# StackOverflow 问答 13936000-13936999

# sql-server - SQL INSERT 使用列具有不同数据类型的表并获得错误转换

> ID：13936000
> 
> 赞同：1
> 
> 时间：2012-12-18T15:17:17.213
> 
> 标签：sql-server, tsql, insert

我有两张桌子，我想从一张桌子插入另一张桌子。在我的暂存（源）表中，每一列都定义为`nvarchar(300)`，并且此限制不能更改。

在我的目标表中，列是所有不同类型的。例如，如果我想从源表（数据类型`nvarchar(300)`）中选择并将该列插入到数据类型中`decimal(28, 16)`。

发生这种情况时，我收到以下错误：

> *将数据类型 nvarchar 转换为数值时出错。*

即使我使用演员表，我也会得到错误。

```
INSERT INTO Destination (
    Weighting
)
VALUES (
    CAST(src.Weighting AS decimal(28, 16))
) 
```

`null`价值观会影响到这一点吗？还有什么要考虑的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:26:22.320

这将搜索非数字字符串

从 src 中选择 src.Weighting，其中 isnumeric(src.Weighting) = 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:31:39.930

如果您的临时表列中的所有数据都可以隐式转换为目标数据类型，那么您不必设置显式转换。

但是如果任何一个值不能被隐式转换（即一个单元格包含一个非数字或格式错误的字符串值，该值应该以`decimal`类型列结束），那么整个事务将失败。

您可以通过像这样设置插入来迁移失败事务的风险：

```
INSERT
  LiveTable (
    VarcharCol,
    DecimalCol,
    NonNullableCol
  )
SELECT
  NvarcharCol1,
  CASE ISNUMERIC(nvarcharCol2) = 0 THEN NvarcharColl2 END,
  ISNULL(NvarcharCol3, '')
FROM
  StagingTable 
```

但显然，这意味着丢失潜在相关数据或数值精度的风险。

您可以在 MSDN 上阅读[哪些数据类型可以相互隐式转换](http://msdn.microsoft.com/en-us/library/aa226054%28v=sql.80%29.aspx)（向下滚动到矩阵）。对于所有其他转换，您必须使用`CAST`或`CONVERT`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:24:49.527

```
INSERT INTO Destination (Weighting)
SELECT CAST(src.Weighting AS decimal(28, 16))
  FROM [Source] src 
```

应该可以正常工作，前提是您的 varchar 值格式正确。如果错误仍然存​​在，请举例说明正在转换的值。

NULL 将成功转换为 NULL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T15:38:18.867

TSQL 具有将数据[转换或转换](http://msdn.microsoft.com/en-us/library/ms187928.aspx)为您想要的类型的功能。如果您在源中的数据类型严格来说是您尝试将它们存储在目标表中并且在目标表的规范中，那么您将不会遇到太多麻烦。

如果你有一列数字，其中一个是“三”而不是“3”，它就会变得复杂。 [这](https://stackoverflow.com/questions/11089125/varchar-to-decimal)是关于将 varchar 转换为小数的问题

An example: I can cast 123 as a varchar(20) then cast the varchar into a decimal with no problem when it is appropriate.

```
SELECT cast(cast('123' as varchar(20)) as decimal(8,2)) 
```

However if I try to convert a character it will give an error.

```
SELECT cast(cast('1a3' as varchar(20)) as decimal(8,2)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T15:40:04.703

The null only be a problem if the target column does not allow nulls, I think the problem is that the format string that can not always be converted into a decimal, see if the decimal separator is a comma instead of a point.

# python - 学习 python 时遇到的障碍 - Urlopen 错误 10060

> ID：13936004
> 
> 赞同：-1
> 
> 时间：2012-12-18T15:17:25.700
> 
> 标签：python, urllib2

我正在尝试进一步学习 Python，但遇到了障碍。我无法让 urllib2/urllib 正常工作。如果我这样做，`response = urllib2.urlopen('http://python.org/')`我会收到此错误：

```
 Traceback (most recent call last):
  File "<pyshell#6>", line 1, in <module>
    response = urllib2.urlopen('http://python.org/')
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = self._open(req, data)
  File "C:\Python27\lib\urllib2.py", line 418, in _open
    '_open', req)
  File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 1207, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "C:\Python27\lib\urllib2.py", line 1177, in do_open
    raise URLError(err)
URLError: <urlopen error [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond> 
```

即使是类似的东西也会`URL = "http://173.194.75.94"`给出`f=urllib.urlopen(URL)`相同的错误，所以这不是 DNS 问题。我没有代理或防火墙。除了我的 Windows 默认防火墙，它像往常一样被禁用。即便如此，我还是将 python 和 pythonw.exe 添加到它的异常中。

任何线索如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:43:29.180

使用[请求](http://docs.python-requests.org/en/v1.0.0/)可以让你的生活更轻松；

```
In [1]: import requests

In [2]: pysite = requests.get('http://python.org/')

In [3]: pysite.status_code
Out[3]: 200

In [4]: pysite.ok
Out[4]: True

In [5]: pysite.text[0:40]
Out[5]: u'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML'

In [6]: pysite.error

In [7]: pysite.links
Out[7]: {}

In [8]: pysite.reason
Out[8]: 'OK' 
```

当您尝试访问不存在或在您的网络上被阻止的站点时，您仍然会遇到异常：

```
In [3]: foobar = requests.get('http://foo.bar/')
---------------------------------------------------------------------------
ConnectionError                           Traceback (most recent call last)
<ipython-input-3-0917ff568fd4> in <module>()
----> 1 foobar = requests.get('http://foo.bar/')

/usr/local/lib/python2.7/site-packages/requests-0.14.1-py2.7.egg/requests/api.pyc in get(url, **kwargs)
     63 
     64     kwargs.setdefault('allow_redirects', True)
---> 65     return request('get', url, **kwargs)
     66 
     67 

/usr/local/lib/python2.7/site-packages/requests-0.14.1-py2.7.egg/requests/safe_mode.pyc in wrapped(method, url, **kwargs)
     37                 r.status_code = 0  # with this status_code, content returns None
     38                 return r
---> 39         return function(method, url, **kwargs)
     40     return wrapped

/usr/local/lib/python2.7/site-packages/requests-0.14.1-py2.7.egg/requests/api.pyc in request(method, url, **kwargs)
     49 
     50     try:
---> 51         return session.request(method=method, url=url, **kwargs)
     52     finally:
     53         if adhoc_session:

/usr/local/lib/python2.7/site-packages/requests-0.14.1-py2.7.egg/requests/sessions.pyc in request(self, method, url, params, data, headers, cookies, files, auth, timeout, allow_redirects, proxies, hooks, return_response, config, prefetch, verify, cert)
    239 
    240         # Send the HTTP Request.
--> 241         r.send(prefetch=prefetch)
    242 
    243         # Return the response.

/usr/local/lib/python2.7/site-packages/requests-0.14.1-py2.7.egg/requests/models.pyc in send(self, anyway, prefetch)
    629 
    630             except socket.error as sockerr:
--> 631                 raise ConnectionError(sockerr)
    632 
    633             except MaxRetryError as e:

ConnectionError: [Errno 8] hostname nor servname provided, or not known 
```

但是 ConnectionError 异常提供的信息告诉你发生了什么；

```
In [8]: try:                    
    foobar = requests.get('http://foo.bar/')
except requests.ConnectionError as oops:
    print oops.message
   ...:     
[Errno 8] hostname nor servname provided, or not known 
```

# css - CSS：图像和文本在一行右侧，没有流文本？

> ID：13936005
> 
> 赞同：1
> 
> 时间：2012-12-18T15:17:29.703
> 
> 标签：css, alignment

我想在该图像的右侧显示带有文本的图像。这应该都在一行上，并且在更多的文本中。我不希望其余的文字围绕图像流动。

例子：

*一些文字... Lorem ipsum dolor sit amet，consetetur sadipscing elitr，sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat，sed diam voluptua。*

**我的图像和我的文字**

*更多文字... Lorem ipsum dolor sit amet，consetetur sadipscing elitr，sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat，sed diam voluptua。*

我不希望图像后面的文字围绕它流动。我为图像尝试了 float:left ，它将它与左侧对齐，但我不知道如何说它旁边只有一些文本。

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:26:03.590

这是一种方法：http: [//jsfiddle.net/2BJ7J/](http://jsfiddle.net/2BJ7J/)

基本上，您使用容器将图像和文本浮动到左侧。

```
.container {
    width:480px;
    padding:20px;
    border:1px solid #ccc;
    overflow:auto;
}
.container img {
    float:left;
    width:260px;
    margin:0 20px 0 0;
}
.container .text {
    float:left;
    width:200px;
}

<div class="container">
    <img src="http://i.telegraph.co.uk/multimedia/archive/01452/fer1_1452403i.jpg" />
    <div class="text">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer sagittis, lorem eget pulvinar faucibus, diam tortor dapibus sapien, a egestas massa arcu ac risus. Ut tempor condimentum tincidunt. Donec vehicula, dui ornare ornare mollis, arcu nibh interdum ipsum, eu condimentum enim nunc id enim
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:40:56.543

CSS

```
p { line-height:1.5; outline:1px dashed green }

.left-img span { /* span would be `img` in your project */
    float:left;
    margin-right:1em;
    /* BEG not needed for image */
    background-color:gray;
    width:20px;
    height:200px;
    outline:1px dotted;
     /* END not needed for image */
}

.left-img + p { clear:left; }
​ 
```

HTML

```
<p>Lorem ipsum ....</p>
<p class="left-img"><span></span>More text</p>
<!-- Replace <span></span> with <img>
---- working code would be:
---- <p class="left-img"><img src="...">More text</p>
-->
<p>Lorem ipsum ....</p>
​ 
```

查看标记的语义并利用自然文档流。上面CSS的最后一行是关键：“`<p>`下面的一个`left-img`类需要恢复正常的文档流。”

小提琴：http: [//jsfiddle.net/MP8GJ/1/](http://jsfiddle.net/MP8GJ/1/)

# c# - c# - DotNetZip 从 MemoryStream 打开 zip 文件

> ID：13936008
> 
> 赞同：3
> 
> 时间：2012-12-18T15:17:48.120
> 
> 标签：c#, asp.net-mvc, dotnetzip

我喜欢做的不是将 zip 文件存储在磁盘上，而是喜欢从 MemoryStream 中打开它。

我正在查看 DotNetZip 编程示例的文档：请注意，我根据我认为可能需要的内容对其进行了微调。

```
 var ms = new MemoryStream();
    using (ZipFile zip = new ZipFile())
    {
       zip.AddFile("ReadMe.txt");
       zip.AddFile("7440-N49th.png");
       zip.AddFile("2008_Annual_Report.pdf");        
       zip.Save(ms); // this will save the files in memory steam
    }

  // now what I need is for the zip file to open up so that 
     the user can view all the files in it. Not sure what to do next after 
     zip.Save(ms) for this to happen. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T15:40:11.733

试试这个：

```
public ActionResult Index()
{
    var memoryStream = new MemoryStream();

    using (var zip = new ZipFile())
    {
        zip.AddFile("ReadMe.txt");
        zip.AddFile("7440-N49th.png");
        zip.AddFile("2008_Annual_Report.pdf"); 
        zip.Save(memoryStream);
    }

    memoryStream.Seek(0, 0);
    return File(memoryStream, "application/octet-stream", "archive.zip");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:22:22.070

如果这是本地的。您需要将流保存到文件中并调用`Process.Start`它。

如果这是在服务器上。只需使用适当的 mime 类型将您的 ms 写入 Response 即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:26:03.727

您必须将内存流的内容作为响应发回：

```
using (MemoryStream ms = new MemoryStream())
{
    using (ZipFile zip = new ZipFile())
    {
       zip.AddFile("ReadMe.txt");
       zip.AddFile("7440-N49th.png");
       zip.AddFile("2008_Annual_Report.pdf");        
       zip.Save(ms); // this will save the files in memory steam
    }

    context.Response.ContentType = "application/zip";
    context.Response.AddHeader("Content-Length", ms.Size);
    context.Response.AddHeader("Content-disposition", "attachment; filename=MyZipFile.zip");
    ms.Seek(0, SeekOrigin.Begin);
    ms.WriteTo(context.Response.OutputStream);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T15:30:12.220

尝试创建`ActionResult`一个有点像这样：我不是 100% 确定这条线`var fileData = ms;`，而且我现在无法访问开发环境，但应该有足够的空间让你解决它。

```
public ActionResult DownloadZip()
{
    using (MemoryStream ms = new MemoryStream())
    {
      using (ZipFile zip = new ZipFile())
      {
         zip.AddFile("ReadMe.txt");
         zip.AddFile("7440-N49th.png");
         zip.AddFile("2008_Annual_Report.pdf");        
         zip.Save(ms); // this will save the files in memory steam
      }
      byte[] fileData = ms.GetBuffer();// I think this will work. Last time I did it, I did something like this instead... Zip.CreateZip("LogPosts.csv", System.Text.Encoding.UTF8.GetBytes(csv));
      var cd = new System.Net.Mime.ContentDisposition
      {
          FileName = "Whatever.zip",
          // always prompt the user for downloading, set to true if you want 
          // the browser to try to show the file inline
          Inline = false,
      };
      Response.AppendHeader("Content-Disposition", cd.ToString());
      return File(fileData, "application/octet-stream");
      }
  } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-22T11:19:20.063

这样我们就可以将 zip 写入输出流。可能有帮助

```
ZipFile zip = new ZipFile();
     List<Attachment> listattachments = email.Attachments;
        int acount = attachments.Count;
        for (int i = 0; i < acount; i++)
        {
            zip.AddEntry(attachments[i].FileName, listattachments[i].Content);
        }
        Response.Clear();
        Response.BufferOutput = false;
        string zipName = String.Format("{0}.zip", message.Headers.From.DisplayName);
        Response.ContentType = "application/zip";
        Response.AddHeader("content-disposition", "attachment; filename=" + zipName);
        zip.Save(Response.OutputStream);
        Response.End(); 
```

# ruby-on-rails - rails 中 api 的类似 github 的身份验证

> ID：13936010
> 
> 赞同：0
> 
> 时间：2012-12-18T15:17:51.950
> 
> 标签：ruby-on-rails, authentication, ssl, public-key-encryption

我正在创建一个仅由特定设备使用的 API。我想使用公钥和私钥对进行身份验证，类似于 github 使用 SSH 进行身份验证的方式。

我认为可行的方案如下：

1.  设备将使用其 ID 请求授权。
2.  服务器通过提供的 ID 找到设备的公钥并加密一个随机字符串。字符串被发送到设备。
3.  设备接收加密字符串并使用其私钥对其进行解密，并将结果发送回服务器。
4.  服务器检查字符串以确保它匹配并在检查正确时为设备设置正确的会话变量。

所有这些都是通过 SSL 连接进行的，因此第 3 步不能被窥探并用于再次进行身份验证。有些设备不需要这种类型的授权，因此 SSL 连接不能只验证设备的公钥是由服务器的证书颁发机构生成的，如果不是则关闭连接。

首先，这有意义吗，还是有更好的方法？第二 - 是否有一些宝石已经在 Rails 中做到了这一点？这似乎是一种比较常见的做事方法。

# c++ - 为结构的整个向量分配结构的元素？

> ID：13936017
> 
> 赞同：2
> 
> 时间：2012-12-18T15:18:24.437
> 
> 标签：c++, stl, functional-programming, assign

我可以在**不创建新的分配功能**的情况下分配如下所示的内容吗？

```
struct S
{
  int     one;
  double  two;
}

vector< S > v( 10 );

std::transform( begin( v ), end( v ), begin( v ), /*some how bind S::two to 10., for example*/ ); 
```

结果：所有`v`元素都有`S:two`== 10, `S::one`'s 具有它们之前的值`std::transform`

没有 C++11，允许升压。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:44:18.557

我写了一个泛型`setter`，你可以使用它来*设置结构的* **任何**成员。

例如，如果您想将成员设置`two`为特定值`10.0`，那么您必须这样写：

```
std::transform(v.begin(), v.end(), v.begin(), make_setter(&S::two, 10.0)); 
```

你完成了。

下面是`setter`and的实现`make_setter`：

```
template<typename C, typename M>
class setter
{
     M C::*m_member;   
     M m_value;

public:

     setter(M C::*member, M value) : m_member(member), m_value(value) {}

     C operator()(C item)
     {
         item.*m_member = m_value;
         return item;
     }
};

template<typename C, typename M>
setter<C, M> make_setter(M C::*member, M value) 
{
    return setter<C,M>(member, value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:22:52.943

```
struct set_two {
    double v;
    set_two(double v_) : v(v_) { }
    S operator()(S s) const { 
        s.two=v;
        return s;
    }
};

std::transform( begin(v), end(v), begin(v), set_two(10.0) ); 
```

虽然我假设你是你自己的`begin`，`end`否则它来自 boost 或 C++11

# ios - iOS在UITabBar中更改UITabBarButton的框架

> ID：13936018
> 
> 赞同：1
> 
> 时间：2012-12-18T15:18:30.693
> 
> 标签：ios, ipad, uitabbarcontroller, uitabbar, uitabbaritem

在我的应用程序`UITabBarController`中，我在其中提供了自定义选择/未选择的图像，`AppDelegate`如下所示：

```
UIImage *selectedImage = [UIImage imageNamed:@"home-tab-selected"];
UIImage *unselectedImage = [UIImage imageNamed:@"home-tab"];
UITabBar *tabBar = tabController.tabBar;
UITabBarItem *item1 = [tabBar.items objectAtIndex:0];
[item1 setFinishedSelectedImage:selectedImage withFinishedUnselectedImage:unselectedImage]; 
```

我拥有的图像是 100x100，比普通的标签栏项目大得多。一切正常，我的图像放置得很好，看起来很棒。

我遇到的问题是底层的框架`UITabBarButton`仍然是 76x48，只留下一小部分标签“可触摸”。（下图，边框周围有边框）

![框架小于标签图像](../Images/65c7e3ae1a9a99507e0a2a458fd1643a.png)

为了尝试解决这个问题，在我的 subcalssed 中`UITabBarController` `viewDidLoad`，我遍历了每一个`UITabBarButton`，并将框架设置如下：

```
for (UIView* subView in self.tabBar.subviews)
{
    if ([subView isKindOfClass:NSClassFromString(@"UITabBarButton")])
    {

        [subView setFrame:CGRectMake(subView.frame.origin.x, subView.frame.origin.y, 100, 100)];

    }
} 
```

在我这样做之后，我记录了框架并且它们确实发生了变化——但是我的标签栏中的框架永远不会改变——我仍然只能看到并且可以触摸较小的红色框。

这是因为Apple不允许您更改这些框架还是我在这里做错了什么？

有任何帮助！谢谢！

编辑：

最后，我只是把我的标签图像缩小了。我发现 70px 的高度仍然可以吸引大多数人的注意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:31:35.603

`UITabBarController`加载后视图的布局可能会发生变化：`UITabBarItem`可以添加额外的 s，用户可以切换到横向。

在 iOS 6 之前，没有办法配置复杂的布局。由于`UITabBar`是一个非常古老的类，它很可能在方法中完成它的工作`layoutSubviews`。

您可以子类化`UITabBar`并覆盖上述方法，但如果您走得那么远，您可能需要考虑创建自己的标签栏，最终它只是一个`UIView`带有几个`UIButton`s 的标签栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T12:32:32.950

底层的 UITabBarButtons 有类似的问题。我通过将 UITabBar 的“项目定位”属性设置为“填充”来解决它。

![在此处输入图像描述](../Images/60acaa445fcb1499167619ab9227135d.png)

# java - 安卓 | 单选按钮不会做任何事情并保持按下状态

> ID：13936020
> 
> 赞同：1
> 
> 时间：2012-12-18T15:18:31.650
> 
> 标签：java, android, radio-button

我正在尝试做一个货币转换器作业（我是编程新手）

做了一切，但单选按钮被按住并且没有做任何事情（不将文本放入 TextView 并且单选按钮被锁定在“按下”模式

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_convert);

    mResult = (TextView) findViewById(R.id.result);
    mToConvert = (EditText) findViewById(R.id.toConvert);
    mRadioGroup = (RadioGroup) findViewById(R.id.radioG);
    mDollar = (RadioButton) findViewById(R.id.dollar);
    Meuro = (RadioButton) findViewById(R.id.euro);

    mRadioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener()
    {
        public void onCheckedChanged(RadioGroup rGroup, int checkedId)
        {

            switch (mRadioGroup.getCheckedRadioButtonId())
            {
            case R.id.dollar:
            Double dollarConvert = Double.valueOf(mToConvert.getText().toString()); //convert the string to int
            double price = dollarConvert * 1.28;
            mDollar.setChecked(true);
            Meuro.setChecked(false);
            String result = mToConvert.getText().toString();
            mResult.setText(result + price);
            break;

            case R.id.euro:
                Double euroConvert = Double.valueOf(mToConvert.getText().toString()); //convert the string to int
                double value = euroConvert * 1.28;
                mDollar.setChecked(false);
                Meuro.setChecked(true);
                String result1 = mToConvert.getText().toString();
                mResult.setText(result1 + value);
                break;

                default:;
            }
        }
    });

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:22:36.483

您需要为 RadioGroup 设置[RadioGroup.setoncheckedchangelistener](http://developer.android.com/reference/android/widget/RadioGroup.html#setOnCheckedChangeListener%28android.widget.RadioGroup.OnCheckedChangeListener%29)以在检查更改事件触发时执行一些操作。

```
mRadioGroup.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener()
{
    public void onCheckedChanged(RadioGroup rGroup, int checkedId)
    {
              //do your code here
    }
}); 
```

# java - 按大小和时间滚动日志

> ID：13936021
> 
> 赞同：9
> 
> 时间：2012-12-18T15:18:32.493
> 
> 标签：java, log4j, appender, rollingfileappender

我使用，当日志文件达到一定大小时，它会滚动日志文件`RollingFileAppender`。`log4j 1.2.16`现在我想每天滚动日志文件*，*当它们达到一定大小时。因此，每天将有一个或多个日志文件。

例如，

```
我的应用程序日志
myapp-17.12.2013.log
myapp-16.12.2012.log
myapp-16.12.2012.1.log
myapp-16.12.2012.2.log

```

是否有现成的附加程序，它已经完成了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T18:45:12.077

确实有两种选择：

1.  使用 LogBack 及其大小和时间触发策略：[http ://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedFNATP](http://logback.qos.ch/manual/appenders.html#SizeAndTimeBasedFNATP)
2.  从这里有 Log4J 的 TimeAndSizeRollingAppender：[http ://www.simonsite.org.uk/](http://www.simonsite.org.uk/)

请记住，这两个选项都使用文件重命名。如果有另一个脚本自动移动这些文件，请仔细考虑这一点。当两个进程处理同一个文件时，文件重命名是有风险的。

我的建议是直接写入模式中的不可变日志文件名：myapp-{dd.MM.yyyy}.{X}.log。这种方式“滚动”只是关闭一个文件并打开一个新文件。没有重命名。没有后台线程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T15:35:24.067

快速回答是“不”。查看 log4j 的 javadoc：[https ://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/FileAppender.html](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/FileAppender.html)

只有两个开箱即用的文件附加程序：DailyRollingFileAppender 和 RollingFileAppender（不推荐使用第一个，因为它存在同步问题）。

为了实现您想要的，您应该创建自己的附加程序，扩展 RollingFileAppender 并修改它以在日期更改时滚动文件。修改将在方法中：

```
 protected void subAppend(LoggingEvent event) 
```

您可以在此处查看其来源：http: [//www.docjar.com/html/api/org/apache/log4j/RollingFileAppender.java.html](http://www.docjar.com/html/api/org/apache/log4j/RollingFileAppender.java.html)（第 274 行）。

您只需要复制并粘贴代码并更改 if 调用 rollOver 以满足您的需要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-15T08:18:41.697

下面的配置 xml 将完成这项工作：需要 JAR：log4j-rolling-appender-20150607-2059

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration debug="true"
    xmlns:log4j='http://jakarta.apache.org/log4j/'>
    <appender name="file"
        class="uk.org.simonsite.log4j.appender.TimeAndSizeRollingAppender">
        <param name="File" value="D:\\App.log" />
        <param name="Threshold" value="DEBUG" />
        <param name="DatePattern" value=".yyyy-MM-dd" />
        <param name="MaxFileSize" value="1KB" />
        <param name="MaxRollFileCount" value="100" />
        <param name="ScavengeInterval" value="30000" />
        <param name="BufferedIO" value="false" />
        <param name="CompressionAlgorithm" value="GZ" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%-5p %-23d{ISO8601} [%t] %x: %c{1} - %m%n" />
        </layout>
    </appender>

    <root>
        <level value="DEBUG" />
        <appender-ref ref="file" />
    </root>

</log4j:configuration> 
```

# jquery - jQuery touch 可拖动响应式滚动条/幻灯片/旋转木马？

> ID：13936026
> 
> 赞同：6
> 
> 时间：2012-12-18T15:18:51.760
> 
> 标签：jquery, scroll, responsive-design, draggable, carousel

我正在寻找一种支持触摸、**可拖动、响应式的 jQuery**滚动条/幻灯片/轮播/滑块，用于显示水平**可滚动**的项目列表（例如，eshop 中的特色产品、最近添加到数据库的照片等）。

它看起来类似于 Apple App Store 中每个应用程序页面上的图像滚动条。我不想要一个典型的滑块，一次只能看到一张大图。我想看到彼此相邻的图像，用户可以在它们之间轻松滚动。

通过可拖动我的意思是拖动'n'drop用于滚动而不是将项目从列表移动到其他地方。见下文。

## 严格要求

*   基于 jQuery（或独立于库）
*   响应式（非固定宽度）
*   每张图片的链接和标题
*   可拖动滚动 - 使用鼠标和手指工作 - 我拖动项目，移动和放下，列表会mooooove然后停止。就像在智能手机上滚动一样，但即使使用鼠标也能工作。
*   一些允许我在到达列表末尾时加载更多项目的 API（不是严格的要求，我想我可能没有它）；如果滚动条检测到用户何时到达列表末尾并且滚动条调用我的函数来附加更多项目，则可以完成

## 很高兴有

*   图像可以有可变宽度
*   自动播放 - 从一个项目移动到另一个项目或逐像素缓慢移动
*   设置可见项目的最小和最大数量
*   当用户滚动并且列表正在滚动时，会出现一个滚动条

首先，我在我的网站上实现[了 FlexSlider 2 轮播。](http://flexslider.woothemes.com/basic-carousel.html)触摸手势有效，但鼠标手势/滚动无效。FlexSlider 是滑块而不是滚动条：/ 否则 FlexSlider 会抓挠我的痒。

请发链接，我去看看。让它成为其他网页设计师的最佳 jQuery 滚动条的有价值列表。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T09:39:24.240

试试 jquery 插件（jquery.nicescroll.js）。它也支持触摸设备。

[http://areaaperta.com/nicescroll/](http://areaaperta.com/nicescroll/)

[http://code.google.com/p/jquery-nicescroll/downloads/list](http://code.google.com/p/jquery-nicescroll/downloads/list)

# html - 使用具有绝对值的背景大小的最佳实践

> ID：13936027
> 
> 赞同：1
> 
> 时间：2012-12-18T15:18:57.833
> 
> 标签：html, css

多年来，我们一直没有`background-size`财产，但现在绝大多数浏览器实际上[都支持它。](http://caniuse.com/#search=background-size)

至少有两种情况`background-size`是非常方便的属性：

1.  相对于某些容器的大小调整背景大小。
2.  调整背景大小以创建动画效果。

但是对于静态（在某种意义上，不调用任何动画效果）内容的绝对大小背景呢？我们总是可以只调整我们需要调整大小的图像而不调用`background-size`属性。所以，由于这是一个相对较新的属性，我不知道如何正确使用它，我的问题是：特别谈论绝对值，什么时候应该以及什么时候不应该使用背景大小而不是图像预处理？

**UPD：**这是一个让我的问题更清楚的[片段。](http://jsfiddle.net/wE6M5/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:16:19.597

几乎没有使用异常绝对值的用例——当您没有任何服务器端处理图像的能力时，我只能考虑使用仅限客户端的解决方案。

所以，你的严格问题的答案是“没有”，所以我最好回答更广泛的问题:)

1.  当与 CSS 渐变一起使用时，您可以模拟重复渐变，或者用它制作[图案](http://24ways.org/2011/css3-patterns-explained/)，或者使用它来获得更好的性能。最后一种情况是最有趣的：当你在一个元素上设置了一些渐变时，它会在这个元素的高度和宽度上呈现，这有时会消耗资源。在很多情况下，您可以将渐变的大小限制为一维或有时两者都限制，因此浏览器会将其渲染为 100x100 而不是 1280x9001。

2.  用于`background-size: cover`确保图像填充块。例如，您的应用程序可能有用户图片或缩略图，其中大多数都是一种特定尺寸，例如 50x50。然而，会有比这更小或更大的，并且`background-size`在这里会很完美 - 你可以使用`cover`这里来使这个图像适合该区域（嗯，这不是绝对值，但它真的很方便，通常`background-position: 50% 0`在使用肖像照片的情况下，无需修剪即可显示头部）。还有另一个类似的案例——使用背景大小制作[整页背景。](http://css-tricks.com/perfect-full-page-background-image/)

3.  背景尺寸通常可用于为类似视网膜的显示器制作图像，因此图像要么总是缩小（即使在非视网膜显示器上也是如此），或者有条件地缩小（使用 dpi 的媒体查询）。

4.  当你有一些图片库时，你通常会有一些缩略图，然后点击后会变成完整的图像。如果您将调整大小的缩略图作为`<img/>`标签作为全尺寸图像的背景放置，则可以实现类似于渐进式 jpeg 的良好效果——这样在加载大图像时，您将有一个模糊图像作为占位符。在带有弹出窗口的类似灯箱的thigies中使用时会更好。

啊，虽然你说不要提动画，但我就是无法控制 mysel，所以我在这里放了[这个演示](http://lab.simurai.com/space-cacss/)的链接:)

# c - Dev-C++4.9.9.2 中使用 libjpeg 的“文件格式无法识别”

> ID：13936031
> 
> 赞同：0
> 
> 时间：2012-12-18T15:19:11.667
> 
> 标签：c, libjpeg

我正在使用in编译[此处](http://download.blender.org/source/chest/blender_2.03_tree/jpeg/example.c)给出的代码。[我也从这里](http://www.ece.sunysb.edu/~cvl/e358/f2001/jpeg-windows.html)下载了所有的头文件和库文件。为简单起见，下面我将整个源代码放在下面-`libjpeg``Dev-C++4.9.9.2`

```
/*
 * example.c
 *
 * This file illustrates how to use the IJG code as a subroutine library
 * to read or write JPEG image files.  You should look at this code in
 * conjunction with the documentation file libjpeg.doc.
 *
 * This code will not do anything useful as-is, but it may be helpful as a
 * skeleton for constructing routines that call the JPEG library.  
 *
 * We present these routines in the same coding style used in the JPEG code
 * (ANSI function definitions, etc); but you are of course free to code your
 * routines in a different style if you prefer.
 */

#include <stdio.h>

/*
 * Include file for users of JPEG library.
 * You will need to have included system headers that define at least
 * the typedefs FILE and size_t before you can include jpeglib.h.
 * (stdio.h is sufficient on ANSI-conforming systems.)
 * You may also wish to include "jerror.h".
 */

#include "jpeglib.h"

/*
 * <setjmp.h> is used for the optional error recovery mechanism shown in
 * the second part of the example.
 */

#include <setjmp.h>

/******************** JPEG COMPRESSION SAMPLE INTERFACE *******************/

/* This half of the example shows how to feed data into the JPEG compressor.
 * We present a minimal version that does not worry about refinements such
 * as error recovery (the JPEG code will just exit() if it gets an error).
 */

/*
 * IMAGE DATA FORMATS:
 *
 * The standard input image format is a rectangular array of pixels, with
 * each pixel having the same number of "component" values (color channels).
 * Each pixel row is an array of JSAMPLEs (which typically are unsigned chars).
 * If you are working with color data, then the color values for each pixel
 * must be adjacent in the row; for example, R,G,B,R,G,B,R,G,B,... for 24-bit
 * RGB color.
 *
 * For this example, we'll assume that this data structure matches the way
 * our application has stored the image in memory, so we can just pass a
 * pointer to our image buffer.  In particular, let's say that the image is
 * RGB color and is described by:
 */

extern JSAMPLE * image_buffer;  /* Points to large array of R,G,B-order data */
extern int image_height;    /* Number of rows in image */
extern int image_width;     /* Number of columns in image */

/*
 * Sample routine for JPEG compression.  We assume that the target file name
 * and a compression quality factor are passed in.
 */

GLOBAL(void)
write_JPEG_file (char * filename, int quality)
{
  /* This struct contains the JPEG compression parameters and pointers to
   * working space (which is allocated as needed by the JPEG library).
   * It is possible to have several such structures, representing multiple
   * compression/decompression processes, in existence at once.  We refer
   * to any one struct (and its associated working data) as a "JPEG object".
   */
  struct jpeg_compress_struct cinfo;
  /* This struct represents a JPEG error handler.  It is declared separately
   * because applications often want to supply a specialized error handler
   * (see the second half of this file for an example).  But here we just
   * take the easy way out and use the standard error handler, which will
   * print a message on stderr and call exit() if compression fails.
   * Note that this struct must live as long as the main JPEG parameter
   * struct, to avoid dangling-pointer problems.
   */
  struct jpeg_error_mgr jerr;
  /* More stuff */
  FILE * outfile;       /* target file */
  JSAMPROW row_pointer[1];  /* pointer to JSAMPLE row[s] */
  int row_stride;       /* physical row width in image buffer */

  /* Step 1: allocate and initialize JPEG compression object */

  /* We have to set up the error handler first, in case the initialization
   * step fails.  (Unlikely, but it could happen if you are out of memory.)
   * This routine fills in the contents of struct jerr, and returns jerr's
   * address which we place into the link field in cinfo.
   */
  cinfo.err = jpeg_std_error(&jerr);
  /* Now we can initialize the JPEG compression object. */
  jpeg_create_compress(&cinfo);

  /* Step 2: specify data destination (eg, a file) */
  /* Note: steps 2 and 3 can be done in either order. */

  /* Here we use the library-supplied code to send compressed data to a
   * stdio stream.  You can also write your own code to do something else.
   * VERY IMPORTANT: use "b" option to fopen() if you are on a machine that
   * requires it in order to write binary files.
   */
  if ((outfile = fopen(filename, "wb")) == NULL) {
    fprintf(stderr, "can't open %s\n", filename);
    exit(1);
  }
  jpeg_stdio_dest(&cinfo, outfile);

  /* Step 3: set parameters for compression */

  /* First we supply a description of the input image.
   * Four fields of the cinfo struct must be filled in:
   */
  cinfo.image_width = image_width;  /* image width and height, in pixels */
  cinfo.image_height = image_height;
  cinfo.input_components = 3;       /* # of color components per pixel */
  cinfo.in_color_space = JCS_RGB;   /* colorspace of input image */
  /* Now use the library's routine to set default compression parameters.
   * (You must set at least cinfo.in_color_space before calling this,
   * since the defaults depend on the source color space.)
   */
  jpeg_set_defaults(&cinfo);
  /* Now you can set any non-default parameters you wish to.
   * Here we just illustrate the use of quality (quantization table) scaling:
   */
  jpeg_set_quality(&cinfo, quality, TRUE /* limit to baseline-JPEG values */);

  /* Step 4: Start compressor */

  /* TRUE ensures that we will write a complete interchange-JPEG file.
   * Pass TRUE unless you are very sure of what you're doing.
   */
  jpeg_start_compress(&cinfo, TRUE);

  /* Step 5: while (scan lines remain to be written) */
  /*           jpeg_write_scanlines(...); */

  /* Here we use the library's state variable cinfo.next_scanline as the
   * loop counter, so that we don't have to keep track ourselves.
   * To keep things simple, we pass one scanline per call; you can pass
   * more if you wish, though.
   */
  row_stride = image_width * 3; /* JSAMPLEs per row in image_buffer */

  while (cinfo.next_scanline < cinfo.image_height) {
    /* jpeg_write_scanlines expects an array of pointers to scanlines.
     * Here the array is only one element long, but you could pass
     * more than one scanline at a time if that's more convenient.
     */
    row_pointer[0] = & image_buffer[cinfo.next_scanline * row_stride];
    (void) jpeg_write_scanlines(&cinfo, row_pointer, 1);
  }

  /* Step 6: Finish compression */

  jpeg_finish_compress(&cinfo);
  /* After finish_compress, we can close the output file. */
  fclose(outfile);

  /* Step 7: release JPEG compression object */

  /* This is an important step since it will release a good deal of memory. */
  jpeg_destroy_compress(&cinfo);

  /* And we're done! */
}

/*
 * SOME FINE POINTS:
 *
 * In the above loop, we ignored the return value of jpeg_write_scanlines,
 * which is the number of scanlines actually written.  We could get away
 * with this because we were only relying on the value of cinfo.next_scanline,
 * which will be incremented correctly.  If you maintain additional loop
 * variables then you should be careful to increment them properly.
 * Actually, for output to a stdio stream you needn't worry, because
 * then jpeg_write_scanlines will write all the lines passed (or else exit
 * with a fatal error).  Partial writes can only occur if you use a data
 * destination module that can demand suspension of the compressor.
 * (If you don't know what that's for, you don't need it.)
 *
 * If the compressor requires full-image buffers (for entropy-coding
 * optimization or a multi-scan JPEG file), it will create temporary
 * files for anything that doesn't fit within the maximum-memory setting.
 * (Note that temp files are NOT needed if you use the default parameters.)
 * On some systems you may need to set up a signal handler to ensure that
 * temporary files are deleted if the program is interrupted.  See libjpeg.doc.
 *
 * Scanlines MUST be supplied in top-to-bottom order if you want your JPEG
 * files to be compatible with everyone else's.  If you cannot readily read
 * your data in that order, you'll need an intermediate array to hold the
 * image.  See rdtarga.c or rdbmp.c for examples of handling bottom-to-top
 * source data using the JPEG code's internal virtual-array mechanisms.
 */

/******************** JPEG DECOMPRESSION SAMPLE INTERFACE *******************/

/* This half of the example shows how to read data from the JPEG decompressor.
 * It's a bit more refined than the above, in that we show:
 *   (a) how to modify the JPEG library's standard error-reporting behavior;
 *   (b) how to allocate workspace using the library's memory manager.
 *
 * Just to make this example a little different from the first one, we'll
 * assume that we do not intend to put the whole image into an in-memory
 * buffer, but to send it line-by-line someplace else.  We need a one-
 * scanline-high JSAMPLE array as a work buffer, and we will let the JPEG
 * memory manager allocate it for us.  This approach is actually quite useful
 * because we don't need to remember to deallocate the buffer separately: it
 * will go away automatically when the JPEG object is cleaned up.
 */

/*
 * ERROR HANDLING:
 *
 * The JPEG library's standard error handler (jerror.c) is divided into
 * several "methods" which you can override individually.  This lets you
 * adjust the behavior without duplicating a lot of code, which you might
 * have to update with each future release.
 *
 * Our example here shows how to override the "error_exit" method so that
 * control is returned to the library's caller when a fatal error occurs,
 * rather than calling exit() as the standard error_exit method does.
 *
 * We use C's setjmp/longjmp facility to return control.  This means that the
 * routine which calls the JPEG library must first execute a setjmp() call to
 * establish the return point.  We want the replacement error_exit to do a
 * longjmp().  But we need to make the setjmp buffer accessible to the
 * error_exit routine.  To do this, we make a private extension of the
 * standard JPEG error handler object.  (If we were using C++, we'd say we
 * were making a subclass of the regular error handler.)
 *
 * Here's the extended error handler struct:
 */

struct my_error_mgr {
  struct jpeg_error_mgr pub;    /* "public" fields */

  jmp_buf setjmp_buffer;    /* for return to caller */
};

typedef struct my_error_mgr * my_error_ptr;

/*
 * Here's the routine that will replace the standard error_exit method:
 */

METHODDEF(void)
my_error_exit (j_common_ptr cinfo)
{
  /* cinfo->err really points to a my_error_mgr struct, so coerce pointer */
  my_error_ptr myerr = (my_error_ptr) cinfo->err;

  /* Always display the message. */
  /* We could postpone this until after returning, if we chose. */
  (*cinfo->err->output_message) (cinfo);

  /* Return control to the setjmp point */
  longjmp(myerr->setjmp_buffer, 1);
}

/*
 * Sample routine for JPEG decompression.  We assume that the source file name
 * is passed in.  We want to return 1 on success, 0 on error.
 */

GLOBAL(int)
read_JPEG_file (char * filename)
{
  /* This struct contains the JPEG decompression parameters and pointers to
   * working space (which is allocated as needed by the JPEG library).
   */
  struct jpeg_decompress_struct cinfo;
  /* We use our private extension JPEG error handler.
   * Note that this struct must live as long as the main JPEG parameter
   * struct, to avoid dangling-pointer problems.
   */
  struct my_error_mgr jerr;
  /* More stuff */
  FILE * infile;        /* source file */
  JSAMPARRAY buffer;        /* Output row buffer */
  int row_stride;       /* physical row width in output buffer */

  /* In this example we want to open the input file before doing anything else,
   * so that the setjmp() error recovery below can assume the file is open.
   * VERY IMPORTANT: use "b" option to fopen() if you are on a machine that
   * requires it in order to read binary files.
   */

  if ((infile = fopen(filename, "rb")) == NULL) {
    fprintf(stderr, "can't open %s\n", filename);
    return 0;
  }

  /* Step 1: allocate and initialize JPEG decompression object */

  /* We set up the normal JPEG error routines, then override error_exit. */
  cinfo.err = jpeg_std_error(&jerr.pub);
  jerr.pub.error_exit = my_error_exit;
  /* Establish the setjmp return context for my_error_exit to use. */
  if (setjmp(jerr.setjmp_buffer)) {
    /* If we get here, the JPEG code has signaled an error.
     * We need to clean up the JPEG object, close the input file, and return.
     */
    jpeg_destroy_decompress(&cinfo);
    fclose(infile);
    return 0;
  }
  /* Now we can initialize the JPEG decompression object. */
  jpeg_create_decompress(&cinfo);

  /* Step 2: specify data source (eg, a file) */

  jpeg_stdio_src(&cinfo, infile);

  /* Step 3: read file parameters with jpeg_read_header() */

  (void) jpeg_read_header(&cinfo, TRUE);
  /* We can ignore the return value from jpeg_read_header since
   *   (a) suspension is not possible with the stdio data source, and
   *   (b) we passed TRUE to reject a tables-only JPEG file as an error.
   * See libjpeg.doc for more info.
   */

  /* Step 4: set parameters for decompression */

  /* In this example, we don't need to change any of the defaults set by
   * jpeg_read_header(), so we do nothing here.
   */

  /* Step 5: Start decompressor */

  (void) jpeg_start_decompress(&cinfo);
  /* We can ignore the return value since suspension is not possible
   * with the stdio data source.
   */

  /* We may need to do some setup of our own at this point before reading
   * the data.  After jpeg_start_decompress() we have the correct scaled
   * output image dimensions available, as well as the output colormap
   * if we asked for color quantization.
   * In this example, we need to make an output work buffer of the right size.
   */ 
  /* JSAMPLEs per row in output buffer */
  row_stride = cinfo.output_width * cinfo.output_components;
  /* Make a one-row-high sample array that will go away when done with image */
  buffer = (*cinfo.mem->alloc_sarray)
        ((j_common_ptr) &cinfo, JPOOL_IMAGE, row_stride, 1);

  /* Step 6: while (scan lines remain to be read) */
  /*           jpeg_read_scanlines(...); */

  /* Here we use the library's state variable cinfo.output_scanline as the
   * loop counter, so that we don't have to keep track ourselves.
   */
  while (cinfo.output_scanline < cinfo.output_height) {
    /* jpeg_read_scanlines expects an array of pointers to scanlines.
     * Here the array is only one element long, but you could ask for
     * more than one scanline at a time if that's more convenient.
     */
    (void) jpeg_read_scanlines(&cinfo, buffer, 1);
    /* Assume put_scanline_someplace wants a pointer and sample count. */
    put_scanline_someplace(buffer[0], row_stride);
  }

  /* Step 7: Finish decompression */

  (void) jpeg_finish_decompress(&cinfo);
  /* We can ignore the return value since suspension is not possible
   * with the stdio data source.
   */

  /* Step 8: Release JPEG decompression object */

  /* This is an important step since it will release a good deal of memory. */
  jpeg_destroy_decompress(&cinfo);

  /* After finish_decompress, we can close the input file.
   * Here we postpone it until after no more JPEG errors are possible,
   * so as to simplify the setjmp error logic above.  (Actually, I don't
   * think that jpeg_destroy can do an error exit, but why assume anything...)
   */
  fclose(infile);

  /* At this point you may want to check to see whether any corrupt-data
   * warnings occurred (test whether jerr.pub.num_warnings is nonzero).
   */

  /* And we're done! */
  return 1;
}

/*
 * SOME FINE POINTS:
 *
 * In the above code, we ignored the return value of jpeg_read_scanlines,
 * which is the number of scanlines actually read.  We could get away with
 * this because we asked for only one line at a time and we weren't using
 * a suspending data source.  See libjpeg.doc for more info.
 *
 * We cheated a bit by calling alloc_sarray() after jpeg_start_decompress();
 * we should have done it beforehand to ensure that the space would be
 * counted against the JPEG max_memory setting.  In some systems the above
 * code would risk an out-of-memory error.  However, in general we don't
 * know the output image dimensions before jpeg_start_decompress(), unless we
 * call jpeg_calc_output_dimensions().  See libjpeg.doc for more about this.
 *
 * Scanlines are returned in the same order as they appear in the JPEG file,
 * which is standardly top-to-bottom.  If you must emit data bottom-to-top,
 * you can use one of the virtual arrays provided by the JPEG memory manager
 * to invert the data.  See wrbmp.c for an example.
 *
 * As with compression, some operating modes may require temporary files.
 * On some systems you may need to set up a signal handler to ensure that
 * temporary files are deleted if the program is interrupted.  See libjpeg.doc.
 */ 
```

我收到以下错误-

```
File format not recognized
ld returned 1 exit status
C:\Users\ravi\test\Makefile.win [Build Error]  [Test.exe] Error 1 
```

下面是 Dev-C++ 的屏幕截图，它显示了链接器参数- ![screenshot_of_Dev-C++,_which_is_showing_linker_params](../Images/07ea7aae60d2aa6cc5d7cd10bd269da5.png)

还缺什么？？？我无法编译它。

# php - Magento：覆盖 Adminhtml 模板会导致内存限制耗尽

> ID：13936032
> 
> 赞同：2
> 
> 时间：2012-12-18T15:19:21.393
> 
> 标签：php, magento

我正在尝试覆盖 Magento 管理区域中的 phtml 文件。具体来说，我试图覆盖的文件是：**app/design/adminhtml/default/default/template/catalog/form/renderer/fieldset/element.phtml**

在**app/code/local/CompanyName/Website/etc/config.xml**，我有：

```
<rewrite>
    <catalog_form_renderer_fieldset_element>CompanyName_Website_Block_Adminhtml_Catalog_Form_Renderer_Fieldset_Element</catalog_form_renderer_fieldset_element>
</rewrite> 
```

我已放入**app/code/local/CompanyName/Website/Block/Adminhtml/Catalog/Form/Renderer/Fieldset/Element.php**的覆盖块 PHP 文件。该文件包含：

```
<?php

class CompanyName_Website_Block_Adminhtml_Catalog_Form_Renderer_Fieldset_Element extends Mage_Adminhtml_Block_Widget_Form_Renderer_Fieldset_Element
{
    public function _construct()
    {
        parent::_construct();

        $this->setTemplate('catalog/form/renderer/fieldset/element.phtml');
    }
} 
```

最后，覆盖模板文件位于**app/design/frontend/enterprise/CompanyName/template/catalog/form/renderer/fieldset/element.phtml**并包含我要覆盖的实际模板。

我得到一个白屏，在日志中有这个错误：`Fatal error: Allowed memory size of 268435456 bytes exhausted (tried to allocate 227543041 bytes) in /var/www/html/gold/lib/Varien/Object.php on line 569`

有什么想法吗？我在扩展正确的课程吗？文件放置正确吗？等等。在同一个 config.xml 文件中还有其他`<rewrite>`块可以正常工作，所以我一定是犯了一个错误！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:26:37.733

这很奇怪，有几个原因。

您似乎只是对更改此块的模板感兴趣。为什么不直接覆盖其默认模板“widget/form/renderer/fieldset/element.phtml”？

你确定你没有像 print_r($someObject->getData()); 这样的东西吗？在您的构造函数或模板中的某个地方？

此外，Mage_Adminhtml_Block_Widget_Form_Renderer_Fieldset_Element::_construct() 只是设置模板文件，因此可能没有理由调用 parent::_construct()。

您是否在构造函数和模板文件中设置了一些 error_log() 以确保它们被调用？该模板的完整路径是什么？即它类似于 /app/design/adminhtml/default/default...？或 /app/design/adminhtml/company/...？如果是后者，我假设您有合适的配置来允许 adminhtml 模板覆盖？

/lib/Varien/Object.php 的第 569 行发生了什么？（我的必须是不同的版本，因为该行在评论中，并且它周围的东西似乎不相关）

* * *

编辑：覆盖 adminhtml 模板。将此添加到 /app/etc/local.xml 中的 <config> 节点

```
<stores>
    <admin>
        <design>
            <package>
                <name>default</name>
            </package>
            <theme>
                <default>companyname</default>
            </theme>
        </design>
    </admin>
</stores> 
```

现在在 /app/design/adminhtml/default/ 中创建一个名为“companyname”的文件夹，并将“template”、“layout”等文件夹放入其中，就像任何主题一样。例如 /app/design/adminhtml/default/companyname/template/widget/form/renderer/fieldset/element.phtml 适合您的情况。

# excel - 在 Matlab 中调用 Excel COM (actxserver) 方法的语法 - 特别是“查找”方法

> ID：13936034
> 
> 赞同：1
> 
> 时间：2012-12-18T15:19:24.250
> 
> 标签：excel, matlab, methods, com

我有搜索和搜索，但似乎无法弄清楚这一点。我认为这是一个适用于很多方法的非常普遍的问题，但我的问题是专门针对“查找”的。

我在 Matlab 环境中进行数据挖掘和写入 Excel 电子表格。我已经能够做很多事情，但是我一直在使用解决方法来解决一年多来我无法弄清楚的事情，这确实减慢了速度。

我需要调用“查找”方法来查找单元格的特定值。

这就是我所在的位置... Excel = actxserver('Excel.Application'); Sheet = Excel.Worksheets.Item(mysheet); 表。激活；cellObj = Sheet.Cells;

现在......这是我需要做的。我想找到一个包含值“myData_1”的单元格。所以我尝试使用...

```
cellObj.Find('myData_1') 
```

当然

```
invoke(cellObj,'Find','myData_1') 
```

也有效..

无论哪种方式，调用都会找到一个单元格，但该单元格实际上包含“myData_10”。由于 Excel 中的默认“查找”方法参数仅用于部分匹配。

所以我录制了一个宏，发现有一个名为'LookAt: = xlPart'的'Find'属性。我还发现，如果我将该属性设置为“xlWhole”，它将与 Microsoft Developer 网站完全匹配。

现在，回到 Matlab 环境。根据 cellObj.methodsview，我应该能够使用 (handle,Variant,Variant(Optional)) 调用“查找”...

所以，我尝试...

```
invoke(cellObj,'Find','myData_1','LookAt:=xlWhole'). 
```

我还尝试了大约 50 种其他语法组合。我只是无法弄清楚搜索我想要的单元格值并更改“LookAt”属性的正确语法是什么。

谁能帮帮我吗？请不要问我为什么要用 Excel 做任何事情，为了使这个线程富有成效，我的工作以这种方式完成是有充分理由的。

在此先感谢，贾斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:06:10.470

我认为如果你使用`cellobj.Find('myData_1',[],[],1)`它应该做你需要的。

如果您查看[文档页面](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.find%28v=office.14%29.aspx)，`Range.Find`您会发现`LookAt`参数是第四个，所以我放置了空数组以将第二个和第三个参数保留为默认值。常数 1 对应于`xlWhole`， 2 对应于`xlPart`。（我猜到了，它起作用了——我从来不知道如何计算出 Excel 中枚举常量对应的数字，但它们通常是一组初始整数）。

希望有帮助！

# sql - 从存储过程中的双分隔字符串创建表

> ID：13936036
> 
> 赞同：-1
> 
> 时间：2012-12-18T15:19:26.053
> 
> 标签：sql, tsql, stored-procedures

给定存储过程的输入值，如下所示：

```
264#20,241#15,228#10 
```

我怎样才能将其转换为如下表？

```
ID1     ID2
264     20
241     15
228     10 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:25:46.380

你可以在存储过程中使用这样的东西：

```
;with cte (item, col1) as
(
  select 
    cast(left(col1, charindex(',',col1+',')-1) as varchar(50)) item,
         stuff(col1, 1, charindex(',',col1+','), '') col1
  from yourtable
  union all
  select 
    cast(left(col1, charindex(',',col1+',')-1) as varchar(50)) item,
    stuff(col1, 1, charindex(',',col1+','), '') col1
  from cte
  where col1 > ''
),
s2 (id1, id2) as
(
  select substring(item, 1, charindex('#', item)-1), 
    reverse(substring(reverse(item), 1, charindex('#', reverse(item))-1))
  from cte
)
select id1, id2
from s2 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/73863/11)

结果：

```
| ID1 | ID2 |
-------------
| 264 |  20 |
| 241 |  15 |
| 228 |  10 | 
```

# google-app-engine - 带有 DataNucleus3.x 缓存的 JDO3.x：如何设置 expireTime 和 chack 一致性

> ID：13936037
> 
> 赞同：0
> 
> 时间：2012-12-18T15:19:26.733
> 
> 标签：google-app-engine, jdo, datanucleus

在 datanucleus-api-jdo-3.1.0-m3 中搜索良好的缓存文档。真的很难找到一些最新的信息......

我试过这个：

```
 DataStoreCache cache = PMF.getDataStoreCache();
        cache.pinAll(false, MyClazz.class);
        JDODataStoreCache jdoCache = (org.datanucleus.api.jdo.JDODataStoreCache) cache;
        final Level2Cache l2 = jdoCache.getLevel2Cache(); 
```

我应该使用像 javax.cache 这样的外部缓存吗？该怎么做？

问题：

*   我如何证明下午正在使用缓存？
*   如何为缓存中的对象设置过期时间？
*   如何设置 pm 仅将缓存用于读取而不用于写入？
*   如果缓存用于写入/更新事务但与数据存储不一致，我是否会遇到异常？
*   如果缓存不是最新的，PM 的“checkConsistency”方法是否会引发异常？该方法的“成本”是多少？

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:45:02.973

不知道为什么你认为很难找到信息。您大概去了 GAE 文档，他们说去适当的 DataNucleus 文档以获取正在使用的版本。你说你正在使用一些 3.1 版本（*为什么在那之后有许多版本时使用里程碑？*使用 3.1.3 比使用非完整版本更有意义），所以你可以访问[http://www。 datanucleus.org/products/accessplatform_3_1/index.html](http://www.datanucleus.org/products/accessplatform_3_1/index.html) 然后只需选择“JDO API”->“PMF”->“L2 Cache”->“JCache”

不知道我们如何才能使其更具逻辑结构

# java - 如何运行嵌入式 vert.x？

> ID：13936039
> 
> 赞同：6
> 
> 时间：2012-12-18T15:19:33.453
> 
> 标签：java, main, vert.x

我用 main(args) 编写了一个 Groovy MainApp。

当我启动它时，JVM 直接退出（*“结束 JVM 执行！”*）。

```
import org.vertx.groovy.core.Vertx

class MainApp {

    public static void main(String[] args) {

        Vertx vertx = VertxFactory.newVertx();

        vertx.createHttpServer().requestHandler{ request -> 
            println "A request has arrived on the server!" 
        }.listen(8080)

        println "End of JVM execution !"
    }
} 
```

如何正确运行带有 vert.x 的**嵌入式**HTTP 服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:01:48.760

I had the same problem with Java. I ended up putting an object in .wait() after all the vert.x code. Looks horrible, but actually makes sense because it gives me a trigger to shutdown the server on demand (via .notify()).

This is non trivial, should be mentioned on the Vert.x official documentation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T07:28:39.327

从文档：

```
all Vert.x threads are daemon threads and they will not prevent the JVM for exiting. Therefore you must ensure that the main() method does not run to completion, e.g. in this example we have used System.in.read() to block the main thread waiting for IO from the console. 
```

因此，您需要在 main 方法的末尾添加以下内容，如下所示：

```
// Prevent the JVM from exiting
System.in.read(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-31T07:52:27.097

取自文档： http: [//vertx.io/embedding_manual.html](http://vertx.io/embedding_manual.html)：

只需等待 System.in 的输入：

```
// Prevent the JVM from exiting
System.in.read(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T07:13:28.427

我遇到了这个。我尝试传递主机名，然后它工作正常。

Vertx vertx = Vertx.newVertx( **"主机名"** )

我想在本地运行时确定 IP 地址存在一些问题，但它失败了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-13T18:16:24.217

```
RouteMatcher routeMatcher = new RouteMatcher();

        // HTTP server
        HttpServer httpServer = vertx.createHttpServer();
        httpServer.requestHandler(routeMatcher);
httpServer.listen(7777); 
```

# c++ - 从一维数组创建二维数组

> ID：13936040
> 
> 赞同：3
> 
> 时间：2012-12-18T15:19:34.127
> 
> 标签：c++, multidimensional-array

如果我有几个相同数据类型的数组，将它们全部复制到二维数组中的最佳方法是什么。例如

```
int array1[] = {1,2,3,4,5,6,7,8,9,10};
int array2[] = {9,8,7,6,5,4,3,2,1,0};

int array2d[][];
//pseudo code array2d = array1 + array2 
```

以便

```
array2d[0][0]; //=1 (first member of array1)
array2d[1][0]; //=9 (first member of array2) 
```

考虑到数组只是指向第一个元素的指针，我想我可以这样做，但它会产生编译器错误。

```
array2d[0][0] = array1;
array2d[1][0] = array2; 
```

我猜我不能使用引用进行复制，因为数组需要它的条目在连续的内存中？我可以使用类似功能的 memset 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:26:13.863

不可能的。您需要将一个元素一个元素从一个数组复制到另一个数组。

您也可以使用指向整数数组的指针数组来模拟二维数组。

```
int array1[] = {1,2,3,4,5,6,7,8,9,10};
int array2[] = {9,8,7,6,5,4,3,2,1,0};

int *array2d[2]; 

array2d[0] = array1;
array2d[1] = array2; 
```

或这个

```
int array1[] = {1,2,3,4,5,6,7,8,9,10};
int array2[] = {9,8,7,6,5,4,3,2,1,0};

int *array2d[] = {array1, array2}; 

cout << "[0][0]=" << array2d[0][0] << endl;
cout << "[1][0]=" << array2d[1][0] << endl; 
```

**或反向**

如果您的目标是向某些 API 呈现二维数组，那么您应该重构您的一方。例如，您可以使用指针模拟一维数组：

```
// an ampty array
int array2d[2][10];

// pointers to parts
int *array1 = array2d[0];
int *array2 = array2d[1];

int n;

// fill "arrays"
for(int i=0, n=1; i<10; ++i, ++n) {
    array1[i] = n;
}
for(int i=0, n=9; i<10; ++i, --n) {
    array2[i] = n;
}

// now you are ready
cout << "[0][0]=" << array2d[0][0] << endl;
cout << "[1][0]=" << array2d[1][0] << endl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:29:04.573

如果你想要一个实际的二维数组（在内存中是连续的），你必须复制元素。但是，您可以使用包含 2 个指针的数组来模拟它：

```
int *array2d[2];
array2d[0] = array1;
array2d[1] = array2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:37:20.143

**定义和分配**：

```
int array1[] = {1,2,3,4,5,6,7,8,9,10};
int array2[] = {9,8,7,6,5,4,3,2,1,0};

int *array2d[2];
array2d[0] = array1;
array2d[1] = array2; 
```

**测试**：

```
printf("%d\t",array2d[0][0]);
printf("%d\t",array2d[0][9]);
printf("%d\t",array2d[1][5]); 
```

它给`1 10 4`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T15:22:41.263

它不是一个实际的二维数组，但您可以创建`array2d`一个指向一维数组的指针数组：

```
int* array2d[2];

array2d[0] = array1;
array2d[1] = array2; 
```

否则，您将不得不手动复制元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T15:29:00.993

您可以做几件事。如果您知道您的数据将在每个数组中保持不变，您可以`#define`这样做，然后在您的 1D 和 2D 数组中使用它。或者，您可以将元素从 1D 数组 memcpy 到 2D 数组。这里说明了第二点：

```
#define ARRAY_1 { 1, 2, 3, 4, 5, 6 }
#define ARRAY_2 {7, 8, 9, 10, 11, 12 }

int array_1[] = ARRAY_1;
int array_2[] = ARRAY_2;

int two_dim_array[][] = {
    ARRAY_1,
    ARRAY_2,
} 
```

# javascript - 将 if 语句添加到出生日期的演员表中

> ID：13936049
> 
> 赞同：2
> 
> 时间：2012-12-18T15:19:53.973
> 
> 标签：javascript, jquery, if-statement

我有以下代码，它接受响应（来自 Facebook）并扭曲日期以使其成为英国（日、月、年）而不是美国。

我为该月添加了一个 +1 条件，因为它从零开始。

现在我需要添加一个 if 语句来设置**月份是否小于 10**，将 0 添加到开头*。这是因为它当前显示的是 1、2 等，它需要是 01、02。

我不确定如何在现有代码中间添加这种语句？

```
var bday = new Date(response.birthday);
document.getElementById("<%= tbOrg.ClientID %>").value = bday.getDate() + "/" + (bday.getMonth()+1) + "/" + bday.getFullYear(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:21:26.090

```
 fixDays = function (d) {
        var days = d;
        if (parseInt(days) < 10) {
            days = "0" + days;
        }
        return days.toString();
    } 
```

像 fixDays(bday.getDate); 一样使用它

**更新**

```
document.getElementById("<%= tbOrg.ClientID %>").value = fixDays(bday.getDate()) + "/" + fixDays((bday.getMonth()+1)) + "/" + bday.getFullYear(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:25:40.337

```
var bDate = bday.getDate();
    bDate = bDate < 10 ? '0'+bDate : bDate;
document.getElementById("<%= tbOrg.ClientID %>").value = bDate + "/" + (bday.getMonth()+1) + "/" + bday.getFullYear();​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:22:45.033

```
var getTwoDigitMonth = function(date) {
    var month = date.getMonth() + 1;
    if (month < 10) {
        month = "1" + month;
    }
    return month;
};

var bday = new Date(response.birthday);
var el = document.getElementById("<%= tbOrg.ClientID %>");
el.value = bday.getDay() + "/" + getTwoDigitMonth(bday) + "/" + bday.getFullYear(); 
```

# r - 在主成分分析 (PCA) 图中添加椭圆

> ID：13936051
> 
> 赞同：22
> 
> 时间：2012-12-18T15:20:07.003
> 
> 标签：r, plot, pca, ggbiplot

我无法在单个站点 PCA 因子图的顶部添加分组变量椭圆，该图还包括 PCA 变量因子箭头。

我的代码：

```
prin_comp<-rda(data[,2:9], scale=TRUE)
pca_scores<-scores(prin_comp)

#sites=individual site PC1 & PC2 scores, Waterbody=Row Grouping Variable.
#site scores in the PCA plot are stratified by Waterbody type.

plot(pca_scores$sites[,1],
     pca_scores$sites[,2],
     pch=21,
     bg=point_colors[data$Waterbody],
     xlim=c(-2,2), 
     ylim=c(-2,2),
     xlab=x_axis_text,
     ylab=y_axis_text)

#species=column PCA1 & PCA2 Response variables
arrows(0,0,pca_scores$species[,1],pca_scores$species[,2],lwd=1,length=0.2)

#I want to draw 'Waterbody' Grouping Variable ellipses that encompass completely, 
# their appropriate individual site scores (this is to visualise total error/variance). 
```

我尝试同时使用 dataellipse、plotellipse 和椭圆函数，但无济于事。无知在这一点上胜出。如果我没有提供足够的信息，请告诉我。

数据（log10 转换）：

```
dput(data)

structure(list(Waterbody = structure(c(4L, 4L, 4L, 4L, 4L, 4L, 
4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 
5L, 5L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("Ditch", "Garden Pond", 
"Peri-Urban Ponds", "River", "Stream"), class = "factor"), Catchment_Size = c(9.73045926, 
9.73045926, 9.73045926, 9.73045926, 9.73045926, 9.73045926, 9.73045926, 
9.73045926, 9.73045926, 9.73045926, 9.73045926, 9.73045926, 9.73045926, 
9.73045926, 9.73045926, 9.73045926, 9.73045926, 9.73045926, 9.73045926, 
9.73045926, 8.602059991, 8.602059991, 8.602059991, 8.602059991, 
8.602059991, 8.602059991, 8.602059991, 8.602059991, 8.602059991, 
8.602059991, 8.602059991, 8.602059991, 8.602059991, 8.602059991, 
8.602059991, 8.602059991, 8.602059991, 8.602059991, 8.602059991, 
8.602059991, 5.230525555, 5.271197816, 5.310342762, 5.674064357, 
5.745077916, 5.733059168, 5.90789752, 5.969640923, 0, 0, 0.419955748, 
0, 0.079181246, 0, 0.274157849, 0, 0.301029996, 1, 0.62838893, 
0.243038049, 0, 0, 0, 1.183269844, 0, 1.105510185, 0, 0.698970004, 
2, 1.079181246, 2.954242509, 1.84509804, 1.477121255, 2.477121255, 
3.662757832, 1.397940009, 1.84509804, 0), pH = c(0.888740961, 
0.891537458, 0.890421019, 0.904715545, 0.886490725, 0.88592634, 
0.892651034, 0.891537458, 0.895422546, 0.8876173, 0.881384657, 
0.888179494, 0.876794976, 0.898725182, 0.894316063, 0.882524538, 
0.881384657, 0.916980047, 0.890979597, 0.886490725, 0.88592634, 
0.903089987, 0.889301703, 0.897627091, 0.896526217, 0.890979597, 
0.927370363, 0.904174368, 0.907948522, 0.890979597, 0.910090546, 
0.892094603, 0.896526217, 0.891537458, 0.894869657, 0.894316063, 
0.898725182, 0.914343157, 0.923244019, 0.905256049, 0.870988814, 
0.868644438, 0.872156273, 0.874481818, 0.88422877, 0.876217841, 
0.874481818, 0.8876173, 0.859138297, 0.887054378, 0.856124444, 
0.856124444, 0.860936621, 0.903089987, 0.860338007, 0.8876173, 
0.860338007, 0.906335042, 0.922206277, 0.851869601, 0.862131379, 
0.868056362, 0.869818208, 0.861534411, 0.875061263, 0.852479994, 
0.868644438, 0.898725182, 0.870403905, 0.88422877, 0.867467488, 
0.905256049, 0.88536122, 0.8876173, 0.876794976, 0.914871818, 
0.899820502, 0.946943271), Conductivity = c(2.818885415, 2.824125834, 
2.824776462, 2.829303773, 2.824125834, 2.82672252, 2.829303773, 
2.82672252, 2.824776462, 2.829946696, 2.846337112, 2.862727528, 
2.845718018, 2.848804701, 2.86923172, 2.85308953, 2.867467488, 
2.847572659, 2.86569606, 2.849419414, 2.504606771, 2.506775537, 
2.691346764, 2.628797486, 2.505963518, 2.48756256, 2.501470072, 
2.488973525, 2.457124626, 2.778295991, 2.237040791, 2.429267666, 
2.3287872, 2.461198289, 2.384174139, 2.386320574, 2.410608543, 
2.404320467, 2.426836454, 2.448397103, 2.768704683, 2.76718556, 
2.771602178, 2.775289978, 2.90579588, 2.909020854, 3.007747778, 
3.017867719, 2.287129621, 2.099680641, 2.169674434, 1.980457892, 
2.741781696, 2.597804842, 2.607669437, 2.419129308, 2.786751422, 
2.639884742, 2.19893187, 2.683497318, 2.585235063, 2.393048466, 
2.562411833, 2.785329835, 2.726808683, 2.824776462, 2.699056855, 
2.585122186, 2.84260924, 2.94792362, 2.877371346, 2.352568386, 
2.202760687, 2.819543936, 2.822168079, 2.426348574, 2.495683068, 
2.731266349), NO3 = c(1.366236124, 1.366236124, 1.376029182, 
1.385606274, 1.376029182, 1.385606274, 1.385606274, 1.385606274, 
1.376029182, 1.385606274, 1.458637849, 1.489114369, 1.482158695, 
1.496098992, 1.502290528, 1.50174373, 1.500785173, 1.499549626, 
1.485721426, 1.490520309, 0.693726949, 0.693726949, 1.246005904, 
1.159266331, 0.652246341, 0.652246341, 0.883093359, 0.85672889, 
0.828659897, 1.131297797, 0.555094449, 0.85672889, 0.731588765, 
0.883093359, 0.731588765, 0.731588765, 0.693726949, 0.693726949, 
0.693726949, 0.693726949, 1.278524965, 1.210853365, 1.318480725, 
1.308777774, 1.404833717, 1.412796429, 0, 0, 0, 0, 0, 0, 1.204391332, 
0, 0, 0, 0.804820679, 0, 0, 0.021189299, 0, 0, 0.012837225, 0, 
0, 0, 0, 0.539076099, 0, 0, 1.619406411, 0, 0, 1.380753771, 0, 
0, 0, 0.931966115), NH4 = c(0.14, 0.14, 0.18, 0.19, 0.2, 0.2, 
0.15, 0.14, 0.11, 0.11, 0.04, 0.06, 0.04, 0.03, 0.07, 0.03, 0.03, 
0.04, 0.04, 0.03, 0.01, 0, 0, 0.01, 0.02, 0.02, 0.05, 0.03, 0.04, 
0.02, 0.21, 0.19, 0.2, 0.1, 0.05, 0.05, 0.08, 0.11, 0.04, 0.04, 
0.15, 2.03, 0.14, 0.09, 0.05, 0.04, 2.82, 3.18, 0.06, 0.12, 2.06, 
0.1, 0.14, 0.06, 1.06, 0.03, 0.04, 0.03, 0.03, 1.91, 0.2, 1.35, 
0.69, 0.05, 0.17, 3.18, 0.21, 0.1, 0.03, 1.18, 0.01, 0.03, 0.02, 
0.09, 0.14, 0.02, 0.07, 0.17), SRP = c(0.213348889, 0.221951667, 
0.24776, 0.228833889, 0.232275, 0.249480556, 0.259803889, 0.244318889, 
0.249480556, 0.240877778, 0.314861667, 0.292494444, 0.311420556, 
0.306258889, 0.285612222, 0.323464444, 0.316582222, 0.34067, 
0.285612222, 0.321743889, 0.074328, 0.074328, 0.120783, 0.133171, 
0.0820705, 0.080522, 0.0789735, 0.0820705, 0.080522, 0.0913615, 
0.136268, 0.1656895, 0.1223315, 0.130074, 0.1192345, 0.1285255, 
0.1873685, 0.167238, 0.15485, 0.157947, 0.1378165, 0.1966595, 
0.198208, 0.241566, 0.037164, 0.0325185, 0.455259, 0.560557, 
0.07987, 0.02119, 0.02119, 0.03912, 0.36349, 0.40098, 0.04401, 
0.07172, 0.15322, 0.92421, 0.02282, 0.17604, 0.17767, 0.66667, 
0.28688, 0.03586, 0.17278, 0.07661, 0.10432, 1.12959, 0.0170335, 
0.0975555, 0.009291, 0.0263245, 0.037164, 0.2214355, 0.0449065, 
0.068134, 0.09291, 0.545072), Zn = c(0.802630077, 1.172124009, 
0.891565332, 0.600253919, 0.583912562, 0.962473516, 0.99881711, 
0.709787074, 1.139860204, 0.953730706, 0.945832806, 0.906270378, 
0.81663232, 0.912514323, 0.935073763, 1.032328597, 1.357197063, 
1.070662063, 0.51200361, 0.987514325, 1.433709044, 1.380974206, 
1.143661074, 0.999774108, 1.449654241, 1.366165106, 1.014239038, 
0.891258617, 0.703978825, 1.086487964, 1.503432481, 1.243241499, 
0.890504851, 0.291391053, 0, 0.802855789, 0.776316103, 0.927421695, 
0.421505212, 0.952099537, 0.688802331, 0.852504392, 0.773545103, 
1.006581553, 1.028229538, 0.880619259, 0.833408503, 1.038608242, 
1.107084413, 0.973967909, 2.135781222, 1.819197019, 1.629353525, 
1.163194184, 1.343286462, 1.273614642, 1.92374902, 1.70523233, 
1.377623112, 1.119971423, 1.461175762, 1.691856516, 1.661826878, 
1.104531494, 1.449455257, 1.092376721, 1.519029523, 1.553407226, 
1.52652924, 1.332876573, 1.293079563, 0.996734891, 1.590475126, 
1.525755949, 1.180418366, 0.712624451, 0.6739512, 0.585043155
), Mn = c(0.817367016, 0.799340549, 1.023910606, 1.012921546, 
0.821579028, 1.321888278, 1.115077717, 1.02031984, 1.135482491, 
1.073645046, 1.016866271, 1.052809328, 0.818423855, 0.836387419, 
1.151032582, 0.720490068, 1.03746634, 1.072580733, 1.041590047, 
0.979548375, 1.073168262, 1.134336511, 0.916137983, 0.641374945, 
1.083753378, 0.84441504, 0.547159121, 0.144262774, 1.084826417, 
0.674861141, 0.478566496, 1.211654401, 1.095518042, 0.387033701, 
0.647480773, 0.775828814, 0.533899101, 0.854548936, 0.755188586, 
0.714497409, 0.851808514, 0.390051496, 0.832508913, 1.222482357, 
1.477048866, 1.475147977, 2.127826941, 2.132205239, 1.639576128, 
1.155578931, 2.203783274, 1.148448404, 1.644586284, 1.122609024, 
1.577319427, 1.633417953, 1.583901241, 1.215478936, 1.135418905, 
1.612847407, 1.95593777, 1.783639208, 1.567837703, 2.251767151, 
0.992155711, 1.738923187, 0.681964459, 0.852845818, 1.77749932, 
2.465019796, 0.887729797, 0.610447221, 1.777760209, 1.034588354, 
0.303196057, 1.793371249, 1.677734668, 1.802157753)), .Names = c("Waterbody", 
"Catchment_Size", "pH", "Conductivity", "NO3", "NH4", "SRP", 
"Zn", "Mn"), class = "data.frame", row.names = c("1_1", "1_2", 
"1_3", "1_4", "1_5", "1_6", "1_7", "1_8", "1_9", "1_10", "1_11", 
"1_12", "1_13", "1_14", "1_15", "1_16", "1_17", "1_18", "1_19", 
"1_20", "2_1", "2_2", "2_3", "2_4", "2_5", "2_6", "2_7", "2_8", 
"2_9", "2_10", "2_11", "2_12", "2_13", "2_14", "2_15", "2_16", 
"2_17", "2_18", "2_19", "2_20", "3_1", "3_2", "3_3", "3_4", "3_5", 
"3_6", "3_7", "3_8", "4_1", "4_2", "4_3", "4_4", "4_5", "4_6", 
"4_7", "4_8", "4_9", "4_10", "4_11", "4_12", "4_13", "4_14", 
"4_15", "4_16", "4_17", "4_18", "4_19", "4_20", "5_1", "5_2", 
"5_3", "5_4", "5_5", "5_6", "5_7", "5_8", "5_9", "5_10")) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T17:50:09.717

由于您在问题中没有提到这一点，我将假设您使用的包是`vegan`，因为它具有`rda()`接受`scale=TRUE`参数的函数。

`plot()`由于未给出某些变量，您的初始调用已被修改。

```
library(vegan)
prin_comp<-rda(data[,2:9], scale=TRUE)
pca_scores<-scores(prin_comp)

plot(pca_scores$sites[,1],
     pca_scores$sites[,2],
     pch=21,
     bg=as.numeric(data$Waterbody),
     xlim=c(-2,2), 
     ylim=c(-2,2))
arrows(0,0,pca_scores$species[,1],pca_scores$species[,2],lwd=1,length=0.2) 
```

为了制作椭圆，使用`ordiellipse()`了包`vegan`的功能。作为参数，必须提供 PCA 分析对象和分组变量。要控制椭圆中包含的点数，`conf=`可以使用参数。

```
ordiellipse(prin_comp,data$Waterbody,conf=0.99) 
```

![在此处输入图像描述](../Images/d28e4c6cdfe1b3841d29d79c5f87f73c.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-10T05:17:17.607

这是一个`ggplot`解决方案，使用 nice`ggbiplot`库。一个明显的改进`plot`是这个标签上的标签。

```
library(devtools) # don't forget to install Rtools first
install_github("vqv/ggbiplot")

library(ggbiplot)
data.class <- data[,1]
data.pca <- prcomp(data[,2:9], scale. = TRUE)
g <- ggbiplot(data.pca, obs.scale = 1, var.scale = 1, 
              groups = data.class, ellipse = TRUE, circle = TRUE)
g <- g + scale_color_discrete(name = '')
g <- g + theme(legend.direction = 'horizontal', 
              legend.position = 'top')
print(g) 
```

![在此处输入图像描述](../Images/8636808b1f5b0de65eb71a6989646c8d.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-26T16:05:24.023

只是要添加这个，因为它可以帮助新用户：

如果您的分组数据是分类数据，则必须使用`as.factor` ，否则您将获得：

> （错误：必须在 中使用向量`[`，而不是类矩阵的对象。）

变成 ：

```
data.pca <- prcomp(dataPCA[,2:4], scale. = TRUE)
g <- ggbiplot(data.pca, obs.scale = 1, var.scale = 1, 
groups = as.factor(dataPCA$Gender), ellipse = TRUE, circle = TRUE)
g <- g + scale_color_discrete(name = '')
g <- g + theme(legend.direction = 'horizontal', legend.position = 'top')
print(g) 
```

# sonarqube - 在声纳中使用 C++ 社区插件的问题。Cppcheck 不起作用

> ID：13936058
> 
> 赞同：1
> 
> 时间：2012-12-18T15:20:46.860
> 
> 标签：sonarqube, cppcheck

当我使用 sonar-runner 时，声纳不会启动 cppcheck。我在 ubuntu 12.04 中使用最后一个版本（声纳、c++ 社区插件和声纳运行器）。

如果有人使用 cppcheck（以及其他插件也可以正常工作，但现在我只需要 cppcheck）声纳，请告诉我如何。

在项目的声纳仪表板中出现代码行数、注释、质量指数、技术债务……并且规则合规性显示为 100%，这是不正确的，因为项目存在 cppcheck 错误。我确定 sonar 不会启动 cppcheck，因为运行 cppcheck 需要 1-2 分钟，并且 sonar-runner 在 cppcheck 部分显示 0ms。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T12:06:03.907

尽管文档另有说明，**但我无法从 sonar 触发 cppcheck 分析**。

我的解决方案是在其一侧启动 cppcheck，然后使用报告文件参数启动 sonar-runner 以将报告导入声纳仪表板：

```
sonar.cxx.cppcheck.reportPath=C:\...\cppcheck_report.xml 
```

如果您在预期的位置 WORKING_DIR/cppcheck-reports/ （未测试）生成文件，则可能不需要精确此参数。

# javascript - 使用 jQuery 选择选定的组合框

> ID：13936063
> 
> 赞同：1
> 
> 时间：2012-12-18T15:21:06.237
> 
> 标签：javascript, jquery

我有这三个选择：

```
<div id ="Xcombos" class = "styled-select">
  <select id="combopie" class="Xcombo" style="display:none;">
    <option value="gender">Gender</option>
    <option value="age">Age</option>
  </select>
  <select id="combobar" class="Xcombo" style="display:none;">
    <option value="date">Date</option>
    <option value="age">Age</option>
  </select>
  <select id="comboline" class="Xcombo" style="display:none;">
    <option value="date">Date</option>
  </select>
</div> 
```

用户应该只选择这 5 个`options values`（性别、年龄、日期、年龄、日期）中的一个

我正在使用这个：

```
var Xcombo_values = $('#Xcombos .Xcombo').val() 
```

但这仅给了我 first 的值`select`。

如何获取所选选项的值？

干杯

**更新 ：**

收音机：

```
<input type="radio" name="tipo" id="pie" value="pie" /><label for="pie">
<input type="radio" name="tipo" id="bar" value="bar" /><label for="bar">
<input type="radio" name="tipo" id="line" value="line" /><label for="line">

$(function () {
    $('input[type=\'radio\']').click(function () {
        $('select.Xcombo').hide();
        $('#combo' + $(this).attr('id')).show();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:51:55.873

```
$(function () {
    $('input[type="radio"]').on('click', function () {
        $('select.Xcombo').hide();
        var comboSelected = $('[name="tipo"]').filter(':checked').val();
        $('#combo' + comboSelected).show();
    });
}); 
```

[**小提琴**](http://jsfiddle.net/aJF8L/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:00:58.260

一样容易：

```
var selected = $('#combopie option:selected').val(); 
```

你可以在这个小提琴中玩它：

[http://jsfiddle.net/EnWvN/](http://jsfiddle.net/EnWvN/)

**编辑**

如果要检索每个选择的选定选项：

```
var select_values = [],
    sel_val;

$('.Xcombo').each(function () {
    sel_val = $(this).children(':selected').val();
    select_values.push(sel_val);
}); 
```

[http://jsfiddle.net/EnWvN/4/](http://jsfiddle.net/EnWvN/4/)

（在示例中，我将代码绑定到更改事件。与您相关的是触发的是什么，而不是如何触发）

而要获得收音机的价值，几乎是一样的。只需使用以下内容来获取每个值：

```
$("#the_id_of_your_form input[name='the_name_of_your_radio']:checked").val(); 
```

# java - 对象/静态创建中的无限递归/为什么这段代码会抛出 NullPointerException？

> ID：13936064
> 
> 赞同：2
> 
> 时间：2012-12-18T15:21:13.773
> 
> 标签：java, recursion, static, nullpointerexception, overflow

我不明白为什么下面的代码不会导致堆（OutOfMemoryError 或其他东西）的堆栈溢出等价物，因为它是某种无限递归（不是吗？）。静态初始化是否提供了对此类事情的防范并引发 NullPointerException？

编辑：我不相信我被理解： `public static void main(String[] args)`从`StaticClass`. `doSmth()`在调用此方法之前，`StaticClass`需要先加载。当一个类被加载时，所有的静态代码都会运行；在`StaticClass`类中，`objClass`是一个带有 a 值的静态字段`new ObjClass()`，因此不应该是`null`（抛出`NullPointerException`）。显然`new ObjClass()`不能实例化，因为为了做到这一点，你需要加载`StaticClass`并且这在加载时已经发生`StaticClass`（因此与无限递归的类比，或者可能是死锁类比）。问题是 JVM 说它是空的，而不是说它因为某种循环调用`objClass`而无法初始化。`new ObjClass()`

在正常情况下，NullPointerException 因为调用者而被抛出。但是在这种情况下，您只能更改被调用者（在`ObjClass`构造函数中删除末尾带有注释的行），然后您将不会收到`NullPointerException`.

```
package pack;

public class ObjClass
{
    public ObjClass() {
        StaticClass.doSmth();//if removed, no NullPointerException
    }

    public String getSomething() {
        return "get";
    }

    public static void main(String[] args) {
        StaticClass.loadStaticClass();
    }
}

class StaticClass {
    private static ObjClass objClass = new ObjClass();

    static void loadStaticClass() {
    }

    static void doSmth()             {
        System.out.println(objClass.getSomething());
    }
} 
```

这使：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at pack.ObjClass.main(ObjClass.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.NullPointerException
    at pack.ObjClass$StaticClass.doSmth(ObjClass.java:39)
    at pack.ObjClass.<init>(ObjClass.java:20)
    at pack.ObjClass$StaticClass.<clinit>(ObjClass.java:34)
    ... 6 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:24:26.860

引用`StaticClass`实例化`objClass`，它调用`ObjClass`构造函数，它调用`doSmth()`. 这使用了 reference `objClass`，但*尚未分配*，因为它需要一个完全构造`objClass`的来引用。

简要地，

```
this.x = doMethod(); 
```

需要`doMethod()`在将引用`x`分配给结果之前完成。

你想做什么 ？或者这是某种运动？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T15:23:57.157

无论你多么坚定，他们都必须有一个复杂的答案来解决这个问题，很简单。你得到一个 NullPointerException 因为你取消引用了一个`null`值。而已。

```
public class Main {
    public static void main(String... args) {
        new A();
    }

    static class A {
        static {
            System.out.println("Start of class A initialisation, A.b is " + A.b);
        }

        static final B b = new B();

        static void method(String from) {
            System.out.println("Called a method in A from " + from + ", A.b is " + A.b);
            B.method();
        }

        static {
            System.out.println("End of class A initialisation, A.b is " + A.b);
        }
    }

    static class B {
        static {
            System.out.println("Start of class B initialisation, A.b is " + A.b);

            A.method("B static block");

            System.out.println("End of class B initialisation, A.b is " + A.b);
        }

        B() {
            A.method("B() constructor");
            System.out.println("Only after this should A.b be set.");
        }

        static void method() {
            System.out.println("Called a method in B, A.b is " + A.b);
        }
    }
} 
```

印刷

```
Start of class A initialisation, A.b is null
Start of class B initialisation, A.b is null
Called a method in A from B static block, A.b is null
Called a method in B, A.b is null
End of class B initialisation, A.b is null
Called a method in A from B() constructor, A.b is null
Called a method in B, A.b is null
Only after this should A.b be set.
End of class A initialisation, A.b is Main$B@33b7b32c 
```

如您所见，一个类可以在完成初始化之前调用另一个类，并且可以检查初始化之前的引用，它会是`null`，甚至是`final`一个。

* * *

它抛出 NullPointerException 因为`objClass`尚未设置。

在您从构造函数返回之前不会设置它，但您在构造函数中，因此它的默认值为`null`.

顺便说一句，这与[http://en.wiktionary.org/wiki/infinite_recursion完全不同](http://en.wiktionary.org/wiki/infinite_recursion)

> 我不明白为什么下面的代码不是导致堆等效的堆栈溢出（OutOfMemoryError 或其他东西）

它们都是具有特定含义的不同错误。在未初始化的情况下使用引用时抛出的错误是 NullPointerException。

> 静态初始化是否提供了对此类事情的防范并引发 NullPointerException？

字段不必是静态的。如果在初始化之前访问它们，非静态字段也会发生同样的情况。

> 加载StaticClass时应该实例化objClass吗？

它还没有加载，实际上它永远不会加载，因为它在完成之前抛出了一个异常。如果您在此之后尝试在哪里使用此类，您将收到 NoClassDefError，因为该类无法加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:23:25.673

```
 private static ObjClass objClass = new ObjClass(); 
```

当类加载 jvm 尝试创建实例时`ObjClass`，引用`objClass`指向`null`的时间`ObjClass`构造函数调用（实例创建尚未完成）。\

您正在尝试调用`objClass.getSomething()`，您正在调用导致`getSomething()`的参考。`null``NullPointerException`

# sencha-touch - 控制器失去对 Sencha-touch 中按钮的引用

> ID：13936067
> 
> 赞同：0
> 
> 时间：2012-12-18T15:21:27.633
> 
> 标签：sencha-touch, sencha-touch-2

我在控制器中的某些代码有问题。当我单击“后退”按钮时，它会切换到不同的视图，但是当我返回该视图时，单击处理程序不再起作用。

见下面的代码......

```
Ext.define('MyApp.controller.MyDetails', {
    extend: 'Ext.app.Controller',

    requires: [
        'TolMobile.view.MyDetails',        

        'Ext.field.Select',
        'Ext.field.DatePicker'
    ],

    config: {
        refs: {

        },

        control: {
            "#btnMyDetailsBack": {
                tap: 'onBackButton'
            }
        }
    },

    onBackButton: function () {        
        MyApp.app.switchMainView('MyApp.view.Home', {});
    }

}); 
```

应用类代码：

```
switchMainView: function (newView, config) {
    if (this.currentView != false) {
        Ext.Viewport.remove(this.currentView);
    }

    this.currentView = Ext.create(newView, config);
    // animateActiveItem - TODO animation not working (but shows ok)
    Ext.Viewport.animateActiveItem(this.currentView, { type: 'slide', direction: 'right' })
} 
```

似乎现在可以使用以下而不是 switchMainView() 调用。此代码在主视图控制器中的按钮单击上调用，现在动画工作和前进/后退。我真的很想知道为什么...

```
 var detailsView = Ext.create('MyApp.view.MyDetails');   
            detailsView.setRecord(userRecord);
            Ext.Viewport.animateActiveItem(detailsView, { type: 'slide', direction: 'left' }) 
```

# python - 将二进制数据从 Python 传递到 C API 扩展

> ID：13936068
> 
> 赞同：4
> 
> 时间：2012-12-18T15:21:39.320
> 
> 标签：python, c, api

我正在编写一个 Python ( **2.6** ) 扩展，并且我需要将一个不透明的二进制 blob（带有嵌入的空字节）传递给我的扩展。

这是我的代码片段：

```
from authbind import authenticate

creds = 'foo\x00bar\x00'
authenticate(creds) 
```

抛出以下内容：

```
TypeError: argument 1 must be string without null bytes, not str 
```

下面是一些 authbind.cc：

```
static PyObject* authenticate(PyObject *self, PyObject *args) {

    const char* creds;

    if (!PyArg_ParseTuple(args, "s", &creds))
        return NULL;
} 
```

到目前为止，我已经尝试将 blob 作为原始字符串传递，例如`creds = '%r' % creds`，但这不仅为我在字符串周围提供了嵌入的引号，而且还将`\x00`字节转换为它们的文字字符串表示形式，我不想在 C 中搞乱。

我怎样才能完成我所需要的？我知道 3.2 中的`y`,`y#`​​ 和`y*`PyArg_ParseTuple() 格式字符，但我仅限于 2.6。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:56:38.970

[好的，我在这个链接](https://stackoverflow.com/questions/7955250/python-c-api-unicode-arguments?rq=1)的帮助下想出了一个。

我使用了这样的`PyByteArrayObject`（docs [here](http://docs.python.org/2.6/c-api/bytearray.html)）：

```
from authbind import authenticate

creds = 'foo\x00bar\x00'
authenticate(bytearray(creds)) 
```

然后在扩展代码中：

```
static PyObject* authenticate(PyObject *self, PyObject *args) {

    PyByteArrayObject *creds;

    if (!PyArg_ParseTuple(args, "O", &creds))
        return NULL;

    char* credsCopy;
    credsCopy = PyByteArray_AsString((PyObject*) creds);
} 
```

`credsCopy`现在完全按照需要保存字节串。

# android - 是否可以在 onPostExecute 中启动活动？

> ID：13936077
> 
> 赞同：1
> 
> 时间：2012-12-18T15:22:14.997
> 
> 标签：android, android-asynctask

我需要将我的 LoginMechanism 更改为 asynchTask，以便它不会在 SDK 4.x 中引发 android.os.NetworkOnMainThreadException。我不清楚如何在这个异步任务中开始一个新的意图。我了解工作将在 doInBackground-Method 中完成，并且此返回结果将在 onPostExecute 方法中进行处理。在这种方法中，我尝试开始我的新活动和我的服务，但它显示了编译器错误

```
The constructor Intent(MainActivity.LoginTask, Class<AttachService>) is undefined 
```

这是 onPostExecute 方法

```
 @Override
    protected void onPostExecute(String result) {
        super.onPostExecute( result );
        if (result.equals("")){
            loginError.setText(R.string.login_error);
            loginError.setVisibility(View.VISIBLE);
        }
        else{
            loginError.setVisibility(View.INVISIBLE);
            startService(new Intent(LoginTask.this, AttachService.class));
            Log.d(TAG, "setting status of user " + login.getText().toString() + " to stored for service endpoint  " + service_endpoint_spinner.getSelectedItemId());
            if (appData.getLoggedInUser() == null){
                loggedInUser = DBManager.getInstance().storeUser(user,hashedPw,target, true);
                appData.setLoggedInUser(loggedInUser);
                DBManager.getInstance().setUserStatusToStored(loggedInUser);
            }
            startActivity(new Intent(this, ActionActivity.class));          
        }

    } 
```

所有 startservice 和 startActivity 方法都会产生编译器错误，有人可以解释原因。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:24:26.877

采用

```
startActivity(new Intent(Your_Current_Activity.this, ActionActivity.class)); 
```

**或者**

```
startActivity(new Intent(getApplicationContext(), ActionActivity.class)); 
```

代替

```
startActivity(new Intent(this, ActionActivity.class)); 
```

从 onPostExecute 开始新活动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:25:36.130

在：

`new Intent(this, ActionActivity.class)`

“ **this** ” 表示 AsyncTask 对象。使用**(你的班级名称).this**代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:25:54.180

在 AsyncTask 内部，this 指的是对象，它是一个 AsyncTask。

您想引用父活动或上下文，因此将其替换为

```
startActivity(new Intent(ParentActivity.this, ActionActivity.class)); 
```

# list - 如何以增量方式将功能应用于列表？

> ID：13936079
> 
> 赞同：3
> 
> 时间：2012-12-18T15:22:23.360
> 
> 标签：list, wolfram-mathematica, apply

有一个清单

```
{a, b, c, d} 
```

和一个函数

```
f 
```

我想得到一份清单

```
{f[a], f[a,b], f[a,b,c], f[a,b,c,d]} 
```

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:03:34.443

```
f @@@ ({a, b, c, d}[[1 ;; #]] & /@ Range[4]) 
```

> {f[a], f[a, b], f[a, b, c], f[a, b, c, d]}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T23:05:40.317

这并不简单，但它确实有效

```
lst = {a, b, c, d};
Block[{f}, SetAttributes[f, Flat]; FoldList[f, f@First@#, Rest@#]]& @ lst
(* {f[a], f[a, b], f[a, b, c], f[a, b, c, d]} *) 
```

这也是基于我对一个非常相似的[问题的](https://mathematica.stackexchange.com/q/16556/52)[回答](https://mathematica.stackexchange.com/a/16571/52)：

```
f @@@ FoldList[#1~Join~{#2} &, {First@#}, Rest@#]& @ lst
(* {f[a], f[a, b], f[a, b, c], f[a, b, c, d]} *) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T14:04:27.547

其他一些配方：

```
f @@ Take[{a, b, c, d}, #] & ~Array~ 4

f[a, b, c, d] ~Take~ # & ~Array~ 4

Rest @ FoldList[Append, f[], {a, b, c, d}] 
```

除了第一个之外的所有可能`f`都会以不希望的方式进行评估，但您可以使用它`Block`来防止这种情况。

```
f = Print;

Block[{f},
  f[a, b, c, d] ~Take~ # & ~Array~ 4
] 
```

> 一种
> 
> 抗体
> 
> 美国广播公司
> 
> A B C D

# wordpress - 打开 WordPress 3.5 媒体管理器时预选图像

> ID：13936080
> 
> 赞同：28
> 
> 时间：2012-12-18T15:22:26.203
> 
> 标签：wordpress, media

我一直在玩 WordPress 中的新媒体管理器，并从中获得了一些乐趣，但已经到了我的头撞墙的地步。

我有一个自定义元框，我想在其中存储一些图像（这是一个隐藏的输入，我目前正在存储它们的 ID，但同样可以是图像对象），然后进行 AJAX 调用以显示一些缩略图，我随后将其制成可拖动的，以便用户可以重新排序（不一定与某些背景相关）。

我的问题是当我打开媒体管理器时，没有选择任何图像，所以如果用户想要编辑他们画廊中的图片，他们需要再次选择它们。

我想弄清楚的是，如何打开媒体管理器并通过当前图像，以便预先选择它们。

所以，总的来说，我的代码看起来像这样

```
jQuery('#myButton').click(function(e) {
  e.preventDefault();
  frame = wp.media({
    title : 'My Gallery Title',
    multiple : true,
    library : { type : 'image'},
    button : { text : 'Insert' },
  });
  frame.on('close',function() {
    // get selections and save to hidden input plus other AJAX stuff etc.
  }
  frame.open();
}); 
```

我的想法是必须有一个参数可以传递到框架中（可能是图像的 JSON 对象，或者我需要为

```
frame.on('open', function() {
  // Set selected images
} 
```

但我已经尝试了两种方式，但没有得到任何结果。

这似乎是可能的，因为更改“精选图像”会将您带到选择当前图像的库 - 我还无法充分理解核心代码，希望其他人也有！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-20T00:11:27.833

在研究了核心之后，这里的答案真的很简单。

侦听对象的打开事件`wp.media`，获取状态，使用您的 id 创建附件对象并将它们添加到选择中。

```
frame.on('open',function() {
  var selection = frame.state().get('selection');
  var ids_value = jQuery('#my_field_id').val();

  if(ids_value.length > 0) {
    var ids = ids_value.split(',');

    ids.forEach(function(id) {
      attachment = wp.media.attachment(id);
      attachment.fetch();
      selection.add(attachment ? [attachment] : []);
    });
  }
}); 
```

这在选择多个图像以及单个图像时有效，并假设使用上面的代码您已将值存储在单个文本/隐藏字段中，并以逗号分隔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:25:55.140

**不是一个真正的答案，而是我注意到的一些事情**

使用您的代码`frame.open( console.log('open') )`确实会触发console.log。
另一个`frame.on('open', function() { console.log('on->open')})`没有。

在查看帖子编辑页面时。（已经设置了特色图片）。如果您打开特色 img 窗口，会发生一些有趣的事情。

1.  WP 进行 3 次 ajax 调用，第 1 次和第 3 次包含特色 img id。第二个与您的代码相同。

2.  加载弹出窗口时，特色图像在其余图像之前可见/加载。当这些出现时，特色图像按正确的顺序排列。

3.  在 dom 选项卡上查看 firebug 时，我发现 var`wp.media.model.settings.post.featuredImageId`保存（等待它）特色图像值。

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:58:32.127

我认为那些人设法做到了： [https](https://wordpress.stackexchange.com/questions/76125/change-the-default-view-of-media-library-in-3-5/76213#76213) ://wordpress.stackexchange.com/questions/76125/change-the-default-view-of-media-library-in-3-5/76213#76213 但这没有不适合我。我在我的帖子/编辑、帖子/新的页脚中有 jquery，但这对我不起作用:(

# java - 'this' 可以传递给 ScheduledExecutorService.scheduleWithFixedDelay() 吗？

> ID：13936082
> 
> 赞同：3
> 
> 时间：2012-12-18T15:22:32.753
> 
> 标签：java, multithreading, concurrency, scheduled-tasks, polling

我正在考虑将`java.util.concurrent`包用于简单的轮询类。我对可用于执行此操作的类、接口和方法的范围感到有些困惑，因此希望得到一些指导。到目前为止，这是我的想法：

要做的第一个决定是如何实例化用于管理日程的类。有几个可能的选项，例如：

```
ScheduledThreadPoolExecutor scheduledThreadPoolExecutor =
    new ScheduledThreadPoolExecutor(corePoolSize) 
```

...或者...

```
ScheduledExecutorService scheduledExecutorService =
    Executors.newSingleThreadScheduledExecutor(); 
```

...或者...

```
ScheduledExecutorService scheduledExecutorService =
    Executors.newScheduledThreadPool(corePoolSize); 
```

我倾向于最后一个，但想知道一个明智的 corePoolSize 会是什么——也许是 1 以保持简单？

***编辑：** 最后我发现使用 top 方法最有好处（即直接实例化[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)）。[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)提供[`getActiveCount()`](https://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html#getActiveCount())用于获取活动线程的数量。这使我能够实现一个`pause()`等待暂停实际生效的方法 - 请参阅[讨论](https://chat.stackoverflow.com/rooms/26250/discussion-between-assylias-and-steve-chambers)。*

下一个决定是跟注[`scheduleAtFixedRate`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate(java.lang.Runnable%2C%20long%2C%20long%2C%20java.util.concurrent.TimeUnit))还是[`scheduleWithFixedDelay`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleWithFixedDelay(java.lang.Runnable%2C%20long%2C%20long%2C%20java.util.concurrent.TimeUnit))。我倾向于，`scheduleWithFixedDelay()`因为轮询规律并不是那么重要，而且我不喜欢在遇到瓶颈后快速连续进行多次轮询的想法。

但问题是：使用一个既启动轮询又代表线程的类是否可以/可取？例如：

```
public class Poller extends Thread {
    @Override
    public void run() {
        ...
    }

    public void startPolling() {
        ScheduledExecutorService exec = Executors.newScheduledThreadPool(1);
        exec.scheduleWithFixedDelay(this, 0, 5000, TimeUnit.MILLISECONDS);
    }
} 
```

我不确定的主要部分是第一个`scheduleWithFixedDelay()`参数：每次执行都会实例化这个类的新实例吗？否则它肯定不会工作，因为 run() 不能在同一个 Thread 实例上调用两次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:33:31.857

正如其他人评论的那样，您需要更改的只是 Thread to Runnable。您可能需要添加一些安全防护，以免运行多个任务。

```
public class Poller implements Runnable {
    final ScheduledExecutorService exec = Executors.newSingleThreadScheduledExecutor();
    Future future = null;

    @Override
    public void run() {
        ...
    }

    public void startPolling() {
        if (future != null && !future.isDone()) {
           future.cancel(true); // stop before restarting
           // or
           return; // already running
        }
        future = exec.scheduleWithFixedDelay(this, 0, 5000, TimeUnit.MILLISECONDS);
    }
} 
```

顺便说一句：如果您有 Java 5.0，则该`run()`方法没有`@Override`. 对于 Java 6+，您应该有 @Override。

> 每次执行都会实例化这个类的一个新实例吗？

使用`new`运算符时会创建一个新实例。

> 否则它肯定不会工作 run() 肯定不能在同一个 Thread 实例上调用两次？

它可以工作，因为在您的代码中使用 Thread 令人困惑，因为您创建的线程没有被使用。它只是需要`Runnable`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:39:19.460

单线程方法可以使用这样的`Poller`实现：

```
public class Poller implements Runnable {
    public void run() {
        while ( mayContinue ) {
            poll();
            Thread.sleep(5000);
        }
    }
} 
```

# ruby-on-rails - 是否可以将分页与 Acts_as_follower 一起使用？

> ID：13936091
> 
> 赞同：0
> 
> 时间：2012-12-18T15:22:55.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
@users = User.find_by_username(params[:username]).all_following.order("created_at DESC").paginate(page: params[:page]) 
```

这个计算不起作用:(
我想使用acts_as_follower的分页和顺序排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:40:00.353

**更新的答案：**

```
@users = User.find_by_username(params[:username]).all_following.sort_by{|i| i.created_at}
Kaminari.paginate_array(@users).page(params[:page]).per(10) 
```

或者

与艾哈迈德的答案混合

```
@users = User.find_by_username(params[:username]).all_following(order: 'created_at DESC')
Kaminari.paginate_array(@users).page(params[:page]).per(10) 
```

参考：[acts_as_follower github](https://github.com/tcocca/acts_as_follower)

参考：[kaminari github](https://github.com/amatsuda/kaminari/wiki/Kaminari-recipes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:15:11.513

您可以将订单（以及任何其他选项`ActiveRecord#all`接受）直接传递给`all_following`喜欢这个

```
@users = User.find_by_username(params[:username]).all_following(:order => 'created_at DESC').paginate(page: params[:page]) 
```

**更新**： will_paginate 可以对数组进行分页，但您必须告诉 Rails 包含此部分，因为默认情况下不包含它，请检查此[答案](https://stackoverflow.com/a/8407304/1856239)。

# php - 从mysql数据库中排序超过一个单词

> ID：13936094
> 
> 赞同：1
> 
> 时间：2012-12-18T15:23:16.967
> 
> 标签：php, mysql, sorting, filter, word

我有一个运行 MySQL 查询的 PHP 代码，以通过选择的过滤器对一些输出数据进行排序。

我遇到的问题是当我过滤超过 1 个单词时，即当我按颜色过滤时，它适用于 RED、YELLOW 等。但不适用于 BLUE NAVY。

我认为添加就足够了，`'"`但事实并非如此。

这是我当前的代码：

```
 <?php
$colors = $con -> prepare("SELECT DISTINCT color_base1 FROM item_descr ORDER BY color_base1 ASC");
$colors ->execute();
while ($colorBoxes = $colors->fetch(PDO::FETCH_ASSOC))
{
echo "<input type='checkbox' class='regularCheckbox' name='color' value='".$colorBoxes[color_base1]."' /><font class='similarItemsText'>   ".$colorBoxes[color_base1]."</font><br />";
}
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:07:50.603

您需要在数组索引周围加上引号。

改变：`$colorBoxes[color_base1]`

到：`$colorBoxes['color_base1']`

[奖励积分](http://us3.php.net/manual/en/function.printf.php)：

```
printf(
    "<input type='checkbox' class='regularCheckbox' name='color' value='%s' /><font class='similarItemsText'>   %s</font><br />",
    $colorBoxes['color_base1'],
    $colorBoxes['color_base1']
); 
```

`name`此外，当输入字段中有空格时，您的表单数据可能会提交很奇怪。提交表单后尝试`var_dump($_REQUEST)`查看交易内容，但我建议不要在您的`color_base1`字段中使用空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:47:03.130

您的 sql 看起来正确，您的代码看起来也正确，但是由于您正在使用`SELECT DISTINCT` 这可能会导致问题，并且它仅从两个单词中选择一个单词（它将与蓝色和海军不同），因此还有另一种更好和推荐的方法。+如果您正在使用，则`ORDER BY`不需要在这里这样做，因为它们做同样的工作。`DISTINCT``ORDER BY`

*   如果您使用的是`item_descr`类型`ENUM`，`SET`那么它们将按列索引而不是列值排序。

尝试这样做

```
SELECT color_base1 FROM item_descr ORDER BY color_base1 ASC 
```

这里[**DEMO SQL FIDDLE**](http://sqlfiddle.com/#!2/ef573/1)

# c# - 如何使用 linq to xml 从 xml 文件中读取数据？

> ID：13936099
> 
> 赞同：1
> 
> 时间：2012-12-18T15:23:39.030
> 
> 标签：c#, linq, linq-to-xml

尝试使用 Linq to XML 读取此 xml

```
<Root>
    <shelves>
        <bookNumber>12</bookNumber>
        <coverType unit="H">soft</coverType>
        <pages>100</pages>
        <Weight units="lb">1.2</Weight>
        <chapter sample="1">example 1</<chapter>
        <chapter sample="2">example 2</<chapter>
        <chapter sample="3">example 3</<chapter>
        <chapter sample="4">example 4</<chapter>
        <chapter sample="5">example 5</<chapter>
        <chapter sample="6">example 6</<chapter>
        <chapter sample="7">example 7</<chapter>
        <chapter .................</chapter>
        <chapter .................</chapter>
        <chapter .................</chapter>
        <chapter .................</chapter>
        <chapter .................</chapter>
        ..............
    </shelves>
</Root> 
```

那就是我正在尝试的代码：-。但是如何读取所有元素'Chapter'的值？

```
var book = from b in xml.Root.Elements("shelves")
                             select b;
    foreach (var s in book)
    {
        booknumber = s.Element("bookNumber").Value,
        covertype = s.Element("bookNumber").Value,
        coverTypeUnit = s.Element("bookNumber").Attribute("unit").Value,
        ...........
        chapter = s.Element("bookNumber").Value ????
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:26:18.010

您可能会发现这些链接很有用：

[linq-to-read-xml](https://stackoverflow.com/questions/670563/linq-to-read-xml)

[101 个 LINQ 示例](http://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB4QFjAA&url=http%3A%2F%2Fcode.msdn.microsoft.com%2F101-LINQ-Samples-3fb9811b&ei=S6KkUKLHErDD0AWQhICQCA&usg=AFQjCNE8mRSbV9y7YZ-Uhiwvtx-rS4CP5A)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:26:08.683

```
var values = s.Elements("chapter").Select(n => n.Value).ToArray(); 
```

此外，您一遍又一遍地阅读同一个元素（书号）。您可能想检查您的代码。

编辑：也产生属性：

```
s.Elements("chapter").
Select(n => new {Topic = n.Attribute("topic").Value, Value = n.Value}).
ToArray(); 
```

# asp.net-mvc - 未解析成员“Microsoft.IdentityModel.Claims.ClaimsPrincipal,Microsoft.IdentityModel”的类型

> ID：13936103
> 
> 赞同：1
> 
> 时间：2012-12-18T15:23:50.433
> 
> 标签：asp.net-mvc, visual-studio-2010, aspnetdb, sitefinity-5, aspnet-development-server

有关如何解决此错误的任何想法？我现在被困住了，很难找到关于这个的阅读。任何帮助将不胜感激：

```
Server Error in '/www' Application. 

Type is not resolved for member 'Microsoft.IdentityModel.Claims.ClaimsPrincipal,Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Runtime.Serialization.SerializationException: Type is not resolved for member 'Microsoft.IdentityModel.Claims.ClaimsPrincipal,Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.

Source Error: 
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 

Stack Trace: 

[SerializationException: Type is not resolved for member 'Microsoft.IdentityModel.Claims.ClaimsPrincipal,Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.]
   Microsoft.VisualStudio.WebHost.Connection.get_LocalIP() +0
   Microsoft.VisualStudio.WebHost.Request.GetLocalAddress() +43
   Microsoft.VisualStudio.WebHost.Request.GetServerName() +11
   System.Web.HttpRequest.get_Url() +140
   Telerik.Sitefinity.Security.Claims.<>c__DisplayClass9.<SkipAuthentication>b__8(String aip) +17
   System.Linq.Enumerable.Any(IEnumerable`1 source, Func`2 predicate) +151
   Telerik.Sitefinity.Security.Claims.SitefinityClaimsAuthenticationModule.SkipAuthentication(HttpRequest request) +74
   Telerik.Sitefinity.Security.Claims.SitefinityClaimsAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs args) +201
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T21:53:07.160

每当我重新安装操作系统或新电脑时，我都会收到此错误。按照这里的说明总是为我修复它：[http ://www.sitefinity.com/developer-network/knowledge-base/details/type-is-not-resolved-for-member-'microsoft.identitymodel.claims.claimsprincipal -microsoft.identitymodel](http://www.sitefinity.com/developer-network/knowledge-base/details/type-is-not-resolved-for-member-'microsoft.identitymodel.claims.claimsprincipal-microsoft.identitymodel)

我希望这是有帮助的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-03T05:18:22.673

我们已通过 Project Manager 工具将 Sitefinity v-8.1 升级到 v-9.2。参见图：Sitefinity 项目经理

>> 行动 >> 升级

![内嵌图片 1](../Images/0a7941b1b9414be8307a3b0fc3f62dfb.png)

成功收到消息后。我们运行应用程序。但是我们在屏幕上收到错误消息。请看下面的错误信息：

错误：

> 未解析成员“Microsoft.IdentityModel.Claims.ClaimsPrincipal,Microsoft.IdentityModel”的类型。

要解决这个问题。首先，您需要再次构建解决方案，然后从“bin”文件夹中复制 .dll 文件“Microsoft.IdentityModel.dll”并粘贴到以下文件夹中。

请在此处查看以下路径：

```
C:\Program Files (x86)\Common Files\microsoft shared\DevServer\11.0 
```

复制 dll 文件后，您需要重新启动系统或重建您的解决方案。注意：请重新启动应用程序池和站点。

现在，我们需要最新的许可证密钥。与 9.2.x 兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-17T08:08:34.347

我面临着同样的问题。 通过以下步骤**解决了它：**

**为 Web 应用程序项目指定 IIS Web 服务器**

1.  在解决方案资源管理器中，右键单击要为其指定 Web 服务器的 Web 应用程序项目的名称，然后单击“属性”。
2.  在“属性”窗口中，单击“Web”选项卡。
3.  在服务器下，单击使用本地 IIS Web 服务器。

# javascript - 使用 getUserMedia() 处理和上传视频

> ID：13936107
> 
> 赞同：2
> 
> 时间：2012-12-18T15:23:56.370
> 
> 标签：javascript, video, stream

我正在尝试使用最近引入 javascript 的媒体捕获界面从用户上传视频。尽管在浏览器兼容性方面存在种种困难，我什至无法理解保存用户捕获的视频的过程。

我在想我可以以某种方式使用 ajax 将流式视频推送到服务器，但即便如此，我什至不确定我是否正确地解决了这个问题。

我包含了我的代码，该代码目前仅在 chrome 和 opera 下流式传输。

```
function hasUserMedia()
{
    return !!(navigator.getUserMedia ||
    navigator.webkitGetUserMedia ||
    navigator.mozGetUserMedia ||
    navigator.msGetUserMedia);
}

if(hasUserMedia())
{
    var onFail = function(error)
    {
        alert("ERROR >> " + error);
    };

    var onPass = function(stream)
    {
        var video = document.querySelector('video');
        video.src = window.URL.createObjectURL(stream);

        video.onloadedmetadata = function(e)
        {
            //..what do I put here..?
        };
    }

    navigator.webkitGetUserMedia({video:true, audio:true}, onPass, onFail);
}
else
{
    alert("ERROR >> USERMEDIA NOT SUPPORTED");
}

function saveVideo()
{
    var connection = new XMLPHttpRequest();
    connection.onreadystatechange=function()
    {
        if(connection.readyState == 4 && connection.status == 200)
        {
            alert("Your streamed video has been saved..!");
        }
    }
    //..what do I type here..?
    connection.open("POST","savevideo.php",true);
    connection.send();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T17:11:25.517

目前您无法打开与服务器的 WebRTC 连接（尽管有人可能正在处理它......）。AFAIK 唯一的方法是通过将视频捕获到画布来截取每一帧的屏幕截图，然后将每个帧发送到服务器并在那里编译视频。

查看： [https ://webrtc-experiment.appspot.com/RecordRTC/](https://webrtc-experiment.appspot.com/RecordRTC/)

也可能有帮助：

[http://www.html5rocks.com/en/tutorials/getusermedia/intro/](http://www.html5rocks.com/en/tutorials/getusermedia/intro/)

# hibernate - 无法在 Hibernate 中保存多对多关系

> ID：13936111
> 
> 赞同：2
> 
> 时间：2012-12-18T15:24:13.677
> 
> 标签：hibernate, many-to-many, entity-relationship, hibernate-mapping

我正在学习休眠，但我无法保存多对多关系。我使用休眠 4.1.8 和弹簧 3.1.3

表

```
CREATE TABLE `t_role` (
`pk_role_id` bigint(20) NOT NULL AUTO_INCREMENT,
`code` varchar(45) DEFAULT NULL,
`description` varchar(45) DEFAULT NULL,
PRIMARY KEY (`pk_role_id`)
) ENGINE=InnoDB AUTO_INCREMENT=24 DEFAULT CHARSET=utf8$$

CREATE TABLE `t_user` (
`pk_user_id` bigint(20) NOT NULL AUTO_INCREMENT,
`login_name` varchar(45) DEFAULT NULL,
`email` varchar(45) DEFAULT NULL,
`password` varchar(45) DEFAULT NULL,
`ordercode` int(11) DEFAULT NULL,
PRIMARY KEY (`pk_user_id`),
KEY `fk0983` (`pk_user_id`)
) ENGINE=InnoDB AUTO_INCREMENT=99 DEFAULT CHARSET=utf8$$

CREATE TABLE `t_user_role` (
`pk_user_id` bigint(20) NOT NULL,
`pk_role_id` bigint(20) NOT NULL,
PRIMARY KEY (`pk_user_id`,`pk_role_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8$$here 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:util="http://www.springframework.org/schema/util" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://www.springframework.org/schema/util
     http://www.springframework.org/schema/util/spring-util-3.0.xsd
     http://www.springframework.org/schema/tx 
     http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close">
        <property name="driverClass" value="com.mysql.jdbc.Driver" />
        <property name="jdbcUrl" value="jdbc:mysql://127.0.0.1:3306/myssh" />
        <property name="user" value="root" />
        <property name="password" value="" />
        <property name="minPoolSize" value="5" />
        <property name="maxPoolSize" value="15" />
        <property name="initialPoolSize" value="3" />
        <property name="maxIdleTime" value="10" />
        <property name="acquireIncrement" value="3" />
        <property name="maxStatements" value="0" />
        <property name="idleConnectionTestPeriod" value="60" />
        <property name="acquireRetryAttempts" value="30" />
        <property name="breakAfterAcquireFailure" value="false" />
        <property name="testConnectionOnCheckout" value="false" />
    </bean>

    <!-- Hibernate SessionFactory -->
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource">
            <ref local="dataSource" />
        </property>
        <property name="annotatedClasses">
            <list>
                <value>demo.myssh.model.User</value>
                <value>demo.myssh.model.Role</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.format_sql">false</prop>
                <prop key="hibernate.generate_statistics">true</prop>
                <prop key="hibernate.autoReconnect">true</prop>
                <prop key="hibernate.max_fech_depth">5</prop>
                <prop key="hibernate.jdbc.batch_size">50</prop>
                <prop key="hibernate.jdbc.fetch_size">100</prop>
                <prop key="javax.persistence.validation.mode">none</prop>
                <prop key="hibernate.current_session_context_class">org.springframework.orm.hibernate4.SpringSessionContext
                </prop>
            </props>
        </property>
    </bean>

    <tx:annotation-driven />

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="user" class="demo.myssh.model.User"></bean>
    <bean id="message" class="demo.myssh.model.Message"></bean>
    <bean id="role" class="demo.myssh.model.Role"></bean>
</beans> 
```

用户

```
package demo.myssh.model;

import java.util.HashSet;
import java.util.Set;
import javax.persistence.*;

@Entity
@Table(name = "t_user")
public class User implements java.io.Serializable {

    // Fields
    private static final long serialVersionUID = 3302763173315884925L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "pk_user_id", unique = true, nullable = true)
    private Long userID;

    @Column(name = "login_name", length = 45)
    private String loginName;

    @Column(name = "email", length = 45)
    private String email;

    @Column(name = "password", length = 45)
    private String password;

    @Column(name = "ordercode")
    private Integer orderCode;

    @ManyToMany(cascade = { CascadeType.ALL })
    @JoinTable(name = "t_user_role", 
        joinColumns = { @JoinColumn(name = "pk_user_id") }, 
        inverseJoinColumns = { @JoinColumn(name = "pk_role_id") })
    private Set<Role> roles = new HashSet<Role>();

    public User() {
    }
...set,get... 
```

角色

```
package demo.myssh.model;

import java.util.HashSet;
import java.util.Set;
import javax.persistence.*;

@Entity
@Table(name = "t_role")
public class Role implements java.io.Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = -7649041422061458221L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "pk_role_id", unique = true, nullable = true)
    private Long roleID;

    @Column(name = "code", length = 45)
    private String code;

    @Column(name = "description", length = 45)
    private String description;

    @ManyToMany(mappedBy = "roles")
    private Set<User> users = new HashSet<User>();

    public Role () {

    }
...set,get... 
```

测试

```
 package demo.myssh.dao.impl;

    import org.hibernate.Session;
    import org.hibernate.SessionFactory;
    import org.junit.Test;
    import org.junit.runner.RunWith;
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.beans.factory.annotation.Qualifier;
    import org.springframework.test.context.ContextConfiguration;
    import org.springframework.test.context.junit4.*;
    import org.springframework.transaction.annotation.Transactional;
    import demo.myssh.model.Role;
    import demo.myssh.model.User;

    @RunWith(SpringJUnit4ClassRunner.class)
    @ContextConfiguration({ "file:WebRoot/WEB-INF/applicationContext.xml" })
    public class hibernateTest {
        @Autowired
        @Qualifier("sessionFactory")
        private SessionFactory sessionFactory;

        private Session session;

        @Autowired
        @Qualifier("user")
        private User user;

        @Autowired
        @Qualifier("role")
        private Role role;

        @Test
        @Transactional
        public final void testHibernate() {
            session=sessionFactory.getCurrentSession();

            user.setEmail("aaf");
            role.setCode("ccf");
            user.getRoles().add(role);
            session.persist(user);

        }
    } 
```

控制台展示

```
2012-12-18 22:39:05 Dialect [INFO] HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect
2012-12-18 22:39:05 LobCreatorBuilder [INFO] HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
2012-12-18 22:39:05 TransactionFactoryInitiator [INFO] HHH000399: Using default transaction strategy (direct JDBC transactions)
2012-12-18 22:39:05 ASTQueryTranslatorFactory [INFO] HHH000397: Using ASTQueryTranslatorFactory
2012-12-18 22:39:06 HibernateTransactionManager [INFO] Using DataSource [com.mchange.v2.c3p0.ComboPooledDataSource [ acquireIncrement -> 3, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, dataSourceName -> 1bqou1j8r1cekgod19q9xm8|26d58939, debugUnreturnedConnectionStackTraces -> false, description -> null, driverClass -> com.mysql.jdbc.Driver, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1bqou1j8r1cekgod19q9xm8|26d58939, idleConnectionTestPeriod -> 60, initialPoolSize -> 3, jdbcUrl -> jdbc:mysql://127.0.0.1:3306/myssh, lastAcquisitionFailureDefaultUser -> null, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 10, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 15, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 5, numHelperThreads -> 3, numThreadsAwaitingCheckoutDefaultUser -> 0, preferredTestQuery -> null, properties -> {user=******, password=******}, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false ]] of Hibernate SessionFactory for HibernateTransactionManager
2012-12-18 22:39:06 Cglib2AopProxy [WARN] Unable to proxy method [public final void demo.myssh.dao.impl.hibernateTest.testHibernate()] because it is final: All calls to this method via a proxy will be routed directly to the proxy.
2012-12-18 22:39:06 TransactionalTestExecutionListener [INFO] Began transaction (1): transaction manager [org.springframework.orm.hibernate4.HibernateTransactionManager@27af8502]; rollback [true]
Hibernate: insert into t_user (email, login_name, ordercode, password) values (?, ?, ?, ?)
Hibernate: insert into t_role (code, description) values (?, ?)
2012-12-18 22:39:06 TransactionalTestExecutionListener [INFO] Rolled back transaction after test execution for test context [[TestContext@4d0ac2a3 testClass = hibernateTest, testInstance = demo.myssh.dao.impl.hibernateTest@7d7082d8, testMethod = testHibernate@hibernateTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@659e733e testClass = hibernateTest, locations = '{file:WebRoot/WEB-INF/applicationContext.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]]
2012-12-18 22:39:06 GenericApplicationContext [INFO] Closing org.springframework.context.support.GenericApplicationContext@2acdb06e: startup date [Tue Dec 18 22:39:03 CST 2012]; root of context hierarchy
2012-12-18 22:39:06 DefaultListableBeanFactory [INFO] Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@132789d2: defining beans  [dataSource,sessionFactory,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,transactionManager,user,message,role,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root  of factory hierarchy 
```

它只保存实体，没有保存关系。原因看起来像

```
Cglib2AopProxy [WARN] Unable to proxy method [public final void demo.myssh.dao.impl.hibernateTest.testHibernate()] because it is final: All calls to this method via a proxy will be routed directly to the proxy. 
```

但是我不是很清楚，请问我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:40:48.687

我看到了几件事。首先在 applicationContext.xml 中删除如下所示的 beans User 和 Role。由于您将持久化这些 bean，因此您只需要创建一个新的 pojo。

```
<bean id="user" class="demo.myssh.model.User"></bean>
<bean id="role" class="demo.myssh.model.Role"></bean> 
```

接下来在您的测试中更改测试以创建一个新的 pojo，然后保留并删除测试中用户和角色的自动装配。

```
@Test
@Transactional
public final void testHibernate() {
    session=sessionFactory.getCurrentSession();
    User user = new User();
    Role role = new Role();
    user.setEmail("aaf");
    role.setCode("ccf");
    user.getRoles().add(role);
    session.persist(user);
} 
```

# .net - 识别循环通过数组的代码

> ID：13936112
> 
> 赞同：0
> 
> 时间：2012-12-18T15:24:16.033
> 
> 标签：.net, vb.net

我最近将一个非常大的 VB6 程序转换为 VB.Net。问题是 VB6 使用基于 1 的索引，而 VB.net 使用基于 0 的索引。我想做的是编写一个程序，它会遍历我的源代码（超过 500,000 行），并在每次迭代数组时找到它。然后它将该行写入一个文本文件，然后我可以煞费苦心地检查每个案例并确保每个数组都被正确读取。是否有捷径可寻？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:56:47.980

我认为您可以将流式阅读器和流式编写器与一些代码结合使用来实现您想要的结果，但我认为这并不理想。（http://www.homeandlearn.co.uk/NET/vbNet.html 有很好的文本操作教程）

```
Dim objReader As New System.IO.StreamReader("filepath")
Dim objWriter As New System.IO.StreamWriter("newfilepath")

Do While objReader.Peek() <> -1
    dim strLine as String = objReader.readline()
    objWriter.Write(strLine.replace("string you want to find and replace","new string").replace("other possible strings to replace","and more new strings"))
Loop

objWriter.close() 
```

这将从您的旧文件创建一个新文件...也就是说，如果您可以识别需要替换的字符串以及可以用什么替换它们...？祝你好运 ：）

附言。您当然可以根据需要在该字符串的末尾添加任意数量的替换方法...

# jquery - jQuery 选择器：选择具有特定高度的元素

> ID：13936114
> 
> 赞同：3
> 
> 时间：2012-12-18T15:24:19.807
> 
> 标签：jquery, height, element, selector

我有一张桌子。有些单元格有很多文本，有些单元格只有一个字符。

我想**更改高度大于或等于 200px 的所有单元格的宽度**。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T15:26:54.647

让我们从选择单元格开始：

```
var $tds = $("td");
// better with a context 
// var context = "#mytable";
// var $tds = $("td", context); 
```

[$.fn.filter](http://api.jquery.com/filter/)将匹配元素的集合减少为匹配选择器或通过函数测试的元素。

```
function isHighterThan ($el, threshold) {
  return $el.height() >= threshold;
}

var $bigTds = $tds.filter(function () {
  return isHighterThan($(this), 200);
}); 
```

最后将新样式应用于匹配元素。

```
$bigTds.each(function () {
  $(this).css("width", "400px");
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-18T15:30:12.723

```
<table>
  <tr>
    <td class="cell">
       ...
    </td>
  </tr>
</table> 
```

jQuery

```
$('.cell').each(function() {
   if($(this).height()>=200)
      $(this).width(...);
}); 
```

# hosting - 有没有简单免费的静态网站托管服务？

> ID：13936122
> 
> 赞同：3
> 
> 时间：2012-12-18T15:24:52.153
> 
> 标签：hosting, web-hosting

我使用的是 staticloud.com，但现在该服务似乎已关闭。

我正在寻找最简单的方法来托管仅包含一些 html、css 和 js 文件的静态站点。

我的选择是什么？

# rally - Rally：从 Web 客户端查看有关当前用户的信息

> ID：13936126
> 
> 赞同：2
> 
> 时间：2012-12-18T15:25:03.397
> 
> 标签：rally

我正在使用 REST 服务调用和 JQuery 编写一个 Rally 应用程序。我想为当前用户自定义应用行为，即显示他们的默认项目。有没有办法获取当前身份验证会话的用户名或 ID？我找到的最接近的是这个网站 url，它重定向到用户 ID（如果您在登录时请求它）。

[https://rally1.rallydev.com/#](https://rally1.rallydev.com/#)

但是有真正的方法吗？一个 REST 调用会很好，但我想那不是 RESTful？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:18:05.470

您可以向[https://rally1.rallydev.com/slm/webservice/1.38/user.js](https://rally1.rallydev.com/slm/webservice/1.38/user.js)发出请求，它将返回当前登录用户的结果。

在您的 fetch 和 Project、Workspace、WorkspaceConfiguration 和 UserProfile 对象上的任何其他字段中包含 UserProfile 和 DefaultProject，您应该能够获得您正在寻找的大部分信息。

如果您使用的是 SDK 2，则其中一些信息在当前上下文中已经可用：

```
Rally.environment.getContext().getUser(); 
```

# c# - ProgramFilesX86 SpecialFolder 在 Windows XP 等系统上有何作用？

> ID：13936127
> 
> 赞同：2
> 
> 时间：2012-12-18T15:25:08.327
> 
> 标签：c#, .net, special-folders

[由于我在MSDN 文档](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.ENVIRONMENT.SPECIALFOLDER.PROGRAMFILESX86%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)中找不到任何明确说明的内容：`ProgramFilesX86`枚举值在 32 位系统上返回什么？

* * *

## 开发环境

***请注意：***在我的组织中，当我想测试事物时，我不能只是站起来机器。这就是我问社区的原因。我什至无法访问 32 位 ISO 来构建虚拟机——所以请理解我在这个组织内部有一些限制。

*   Windows 7 64 位

## 生产环境

在生产中，我不知道他们运行的是 32 位还是 64 位系统，很可能是混合的。但是我确实知道操作系统列表。

*   Windows 7的
*   视窗
*   视窗

## 客观的

获取正确的程序文件目录，以便我可以动态启动我的应用程序。

## 已知变量

1.  该应用程序使用 MSI 安装，并且将使用默认选项安装，因此将安装在`Program Files`目录中。
2.  该应用程序是 32 位应用程序，因此在 64 位系统上它将使用该`Program Files (x86)`文件夹，但在 32 位系统上它将使用标准`Program Files`目录。

谢谢大家！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-14T20:39:00.987

32 位 XP：空字符串 :(
32 位 Vista：“C:\Program Files”
32 位 Win7：未测试，可能与 Vista
64 位 Win7：“C:\Program Files (x86)”相同

不确定64位XP，我自己很好奇。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T15:41:00.567

备注部分[`KNOWNFOLDERID`](http://msdn.microsoft.com/en-us/library/dd378457.aspx)包含一个方便的表格，为您提供所需的信息（从非托管的角度）。在这里重现它很棘手：

```
OS      App     KNOWNFOLDERID               Default                             CSIDL
32 bit  32 bit  FOLDERID_ProgramFilesX86    %SystemDrive%\Program Files         CSIDL_PROGRAM_FILESX86
64 bit  64 bit  FOLDERID_ProgramFilesX86    %SystemDrive%\Program Files (x86)   CSIDL_PROGRAM_FILESX86
64 bit  32 bit  FOLDERID_ProgramFilesX86    %SystemDrive%\Program Files (x86)   CSIDL_PROGRAM_FILESX86 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:33:28.123

它返回“程序文件”。由于您使用 MSI 进行安装，您可能会考虑使用安装程序 API（MsiLocateComponent 等）来定位您的程序，而不是假设它位于预期位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T15:35:07.770

在我的 Win 7 32 位系统上`ProgramFilesX86`返回`C:\Program Files`（没有斜杠）。

```
Console.WriteLine("GetFolderPath: {0}", Environment.GetFolderPath(Environment.SpecialFolder.ProgramFilesX86)); 
```

# java - 如何在 Java 中从和 Html 字符串中去除文本

> ID：13936129
> 
> 赞同：1
> 
> 时间：2012-12-18T15:25:18.657
> 
> 标签：java, html, string, parsing

我想分析html页面的结构。对于一个页面，我将它作为一个字符串，我想去掉文本并只保留 html 结构。我不想使用 DOM 解析器，我需要一些健壮的东西，它不仅适用于 xhtml，而且适用于常规 html。我知道正则表达式足以从字符串中去除 html 标签，但是它们可以用来去除文本并只保留 html 标签吗？

你知道我可以使用的任何其他选项/框架吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:29:46.633

我怀疑使用正则表达式是否有一种简单的方法可以做到这一点。

[Jericho](http://jericho.htmlparser.net/docs/index.html)是一个非常简洁的 HTML 解析器，占用空间小，只有一个 jar，无需额外的外部库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:30:51.263

> 你知道我可以使用的任何其他选项/框架吗？

你可能想看看[JSoup](http://jsoup.org)。似乎旨在解决此类问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:30:57.417

如果你之前已经去掉了标签，你就知道基本的要点是去掉 < 和 > 之间的所有内容。去除文本非常相似，只是你去除了 > 和 < 之间的所有内容。所以是的，正则表达式可以很好地为您去除文本并只留下标签。如果您不想处理它们，它们也可以用于去除标签属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T16:05:50.330

这可能会给你一个不错的开始。我对HTML没有太多经验，所以我不知道除了<标签>之外是否还有其他东西可以解析出字符串。

```
public static void main(String[] args){
    String html = "<body> text text text text </body>";
    String htmlTags = null;
    char c;
    for(int i = 0 ; i < html.length() ; i++){
        c = html.charAt(i);
        if(tagStart(Character.toString(c))){
            for(int j = i ; j < html.length() ; j++){
                if(htmlTags != null){
                    htmlTags += Character.toString(html.charAt(j));
                }else{
                    htmlTags = Character.toString(html.charAt(j));
                }
                c = html.charAt(j);
                if(tagStop(Character.toString(c))){
                    break;
                }
            }
        }
    }
}

private static boolean tagStart(String check){
    if(check.equals("<")){
        return true;
    }else{
        return false;
    }
}

private static boolean tagStop(String check){
    if(check.equals(">")){
        return true;
    }else{
        return false;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T21:48:03.223

类似于以下内容：

```
pageSource.replaceAll(">.*<", "><"); 
```

应该让你开始。

# javascript - requestAnimationFrame 在 IE10 中传递了意外的参数

> ID：13936131
> 
> 赞同：7
> 
> 时间：2012-12-18T15:25:25.637
> 
> 标签：javascript, internet-explorer-10, requestanimationframe

所以我一直是一个优秀的网民，使用功能检测来查看浏览器是否支持`requestAnimationFrame`，否则只能退回到`setTimeout`基于 - 的解决方案（类似于[Paul Irish 的著名帖子](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)）。

```
var NOW = Date.now || function () { return new Date.getTime(); };
var reqAnimFrame =
        window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        /*                        ... ||                     */
        function (callback) {
            setTimeout(function () { callback(NOW()); }, 1000 / 60);
        };

var previousTime = NOW();
function animStep(time) {
    var timePassed = time - previousTime;
    myCharacter.move(myCharacter.speed * timePassed);
    previousTime = time;
    reqAnimationFrame(animStep);
} 

// start the animation
reqAnimationFrame(animStep); 
```

在 Internet Explorer 10 出现之前，这在任何地方都非常有效。在 IE10 中，`time`传递的参数似乎与当前时间没有任何关系，搞砸了`timePassed`.

这是怎么回事？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T15:25:25.637

所有（据我所知）实现的其他浏览器`requestAnimationFrame`都遵循（在撰写本文时）当前[*工作*草案](http://www.w3.org/TR/animation-timing/)中的规范：

> 设*时间*为[重绘时间]，表示为自 1970-01-01T00:00:00Z 以来的毫秒数。

这和你的一样代表时间`NOW()`。

[然而，](http://msdn.microsoft.com/en-us/library/ie/hh773174%28v=vs.85%29.aspx) IE10符合当前[*编辑*草稿](http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/RequestAnimationFrame/Overview.html)中的规范：

> 让*time*成为在此上下文中调用[Performance 接口的 now 方法的结果。](http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/HighResolutionTime/Overview.html#dom-performance-now)

这本质上意味着*自浏览器加载此页面以来的*毫秒数（这也意味着测量更精确，因为`performance.now`返回小数毫秒）。

因此，当您`timePassed`第一次在 IE10 中计算时，您得到的结果类似于负 43 年。

幸运的是，由于传递给`requestAnimationFrame`回调的值在任何一种情况下都具有相同的单位，只是参考点不同，因此您可以轻松适应这一点。

有三种可能：

1.  您可以丢弃第一个动画步骤，*仅*将其用于 set `previousTime`，但不做任何其他事情。
2.  您可以忽略传递的参数并每次都使用您的`NOW()`(or `performance.now`)，因此始终具有相同的参考点。
3.  或者您可以将动画的开始更改为：

    ```
    // start the animation
    reqAnimationFrame(function (t) {
        previousTime = t - (NOW() - previousTime);
        animStep(t);
    ); 
    ```

    `timePassed`无论浏览器遵循哪个规范，这都会使计算（包括第一个）正确。而且由于它仅更改第一次调用，因此从长远来看，您也没有任何额外的开销。

# shell - 使用什么命令来获取文件夹中文件的修订历史记录

> ID：13936134
> 
> 赞同：1
> 
> 时间：2012-12-18T15:25:29.777
> 
> 标签：shell, unix, history, prompt, revision

我正在尝试从项目的 Windows 视图中获取文件的修订历史记录。我知道在 Unix 中有一个命令我可以给出，它会在一列中提供文件名，并在平行列中提供相关的修订日期（或类似的东西）。我可以在我的 Windows 中使用 unix 视图，而且我还直接从 Windows 中创建了 src 代码的文件夹视图。有人知道那个命令是什么吗？如果是这样，请帮忙。

BR瓦尔德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:27:28.660

`ls -l`会给你文件的修改时间，但 Unix/Linux 不（默认）存储修订。为此，您需要某种 SCM 系统（例如 Git / SVN / CVS 等）

[Clearcase](http://www-01.ibm.com/software/awdtools/clearcase/)（SCM）提供了一个[文件系统](http://www-01.ibm.com/support/docview.wss?uid=swg21230196)，允许您本地存储文件的修订。这可能是另一种选择。版本出现在每个文件对应的子目录中。

# c - 动态分配的数组 - 元素不可访问

> ID：13936136
> 
> 赞同：1
> 
> 时间：2012-12-18T15:25:34.023
> 
> 标签：c, pointers, multidimensional-array

我正在编写一个矩阵乘法程序，为了节省代码空间，我创建了一个函数，该函数`make`接受一个指向双精度指针并动态分配给定大小的二维数组。数组`a`和`b`被初始化为 [-2, 2] 中的随机值。但是，当我尝试在 gcc 上运行代码时，出现了 seg 错误。

我通过gdb运行代码，当我尝试设置`b[0][0]`为随机数时出现错误。当我尝试`b[0][0]`在 gdb 中打印时，出现错误：

> 无法访问地址 0xbfebfdc3f5d77f80 处的内存

但是，我实际上可以`b[0][0]`在此之前访问。我可以在分配后打印数组而不会出错。出于某种原因，似乎总是数组`b`引起了问题。

我感觉这是一个指针问题，但我看不到在哪里。我不是一个没有经验的程序员，但我花了 2 天的时间试图找出为什么这个错误不断出现。任何人都可以解释一下吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

void make(double ***a, int m, int n)
{
  int i;
  double *tmp;

  (*a) = (double **) malloc(m*sizeof(double *));
  tmp = (double *) calloc(m*n,sizeof(double));

  if(tmp == NULL)
  {
    printf("Error with malloc.\n");
    exit(EXIT_FAILURE);
  }

  for(i=0;i<m;i++)
    (*a)[i] = &tmp[i*n];

  free(tmp);

  if(a == NULL)
  {
    fprintf(stderr, "Error with the matrix, dimensions: %d, %d. \n", m, n);
    exit(EXIT_FAILURE);
  }
}

int main()
{
  int i, j;
  int l, m, n;
  double **a, **b, **c;

  l = m = n = 8;

  srand48(time(NULL));

  make(&a, l, m);
  make(&b, m, n);
  make(&c, l, n);

  for(i=0; i<l; i++)
    for(j=0; j<m; j++)
      a[i][j] = (drand48()*4.0) - 2.0;

  for(i=0; i<m; i++)
    for(j=0; j<n; j++)
      b[i][j] = (drand48()*4.0) - 2.0;

  free(a);
  free(b);
  free(c);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T15:27:42.653

`free(tmp)`一个问题是对in的调用`make`。那是为数组分配的内存。如果您打算继续使用它，则不应释放它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:41:36.903

您需要为“可能是二维数组”中的每一行分配内存，您只需为第一行分配内存，然后让每个指针指向相同的数据。这没有任何意义。

您不检查第一个 malloc 调用是否成功。

你不应该从这个函数中调用 free 。

最好用相邻分配的内存单元创建一个[真正的二维数组](https://stackoverflow.com/questions/12462615/how-do-i-correctly-set-up-access-and-free-a-multidimensional-array-in-c)，而不是一些指针对指针的混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T04:37:22.200

我在这里粘贴了我的部分代码

```
int *nn,*kk;
int main()
{
int t=0,i;

scanf("%d",&t);
int maxx=0;
nn = new int [t];
kk = new int [t];
for(i=0;i<t;i++)
{
    scanf("%d%d",&n,&k);
    nn[i] = n;
    kk[i] = k;
    if(maxx<n)
        maxx=n;
        cout<<nn[i]<<" "<<kk[i]<<endl;
}
t=0;
for(i=0;i<t;i++)
{
    n = nn[i];
    k = kk[i];cout<<nn[i]<<" "<<kk[i]<<endl;
    //cout<<setprecision(6);
   if(k<34&&n>k)
        //cout<<a[n][k]<<endl;
        printf("%0.7lf\n",a[n][k]);
    else
        printf("0.000000\n");//cout<<"0\n";
}
delete []nn;
delete []kk;
return 0;
} 
```

# javascript - 运行 WinJS 应用程序时显示的所有 bootstrap.html 项是什么？

> ID：13936141
> 
> 赞同：1
> 
> 时间：2012-12-18T15:25:41.277
> 
> 标签：javascript, memory-leaks, windows-8, winjs

我在采用的 WinJS Windows 8 应用程序中遇到内存泄漏问题。调试时，我注意到在**MSAppHost下，** **default.html**下有很多名为**bootstrap.html** ?bubblePointerEvents=1 的项目......其中有几十个。有谁知道这些的目的？它似乎是一个内部 WinJS 运行时的东西，但我认为这可能是我的内存泄漏的地方。

想法？

附上图片，当然。 ![数十个带有相关脚本的引导项](../Images/76f5c312f653dfe50573961f9962532a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:43:58.623

您可以使用新的 Visual Studio 2012 JavaScript 内存泄漏分析工具。

一个很好的教程在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/jj819178.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:57:12.553

听起来您从其他地方继承了代码，并且此代码使用[Twitter Bootstrap](http://en.wikipedia.org/wiki/Twitter_Bootstrap)。

运行应用程序时，您是否在 Visual Studio 的 JavaScript 控制台中看到任何错误？

# database - 在访问报告的文本框中组合字段，一些为空

> ID：13936142
> 
> 赞同：3
> 
> 时间：2012-12-18T15:25:42.587
> 
> 标签：database, ms-access, vba

我正在尝试将一些地址字段合并到报告的一个文本框中：

```
=[City]+", "+[County]+", "+[Post Code] 
```

但是，并非所有记录在 [County] 列中都有条目，这意味着这些记录的文本框中根本没有显示任何内容。所以我尝试了一个 Iif 语句：

```
=IIf([County],[City]+", "+[County]+", "+[Post Code],[City]+", "+[Post Code]) 
```

这不起作用，我怎样才能让文本框显示存在的任何字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:40:06.147

最简单的解决方案 IMO：使用[Nz](http://msdn.microsoft.com/en-us/library/office/ff195223%28v=office.14%29.aspx)。

```
=[City]+", "+Nz([County]+", ")+[Post Code] 
```

尽管您可能希望使用 ot`&`而不是`+`. 在 Access`+`中意味着求和，但`&`意味着串联。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T15:36:45.840

你离得太近了！

```
=[City]+", "+[County]+", "+[Post Code] 
```

应该：

```
=[City]&", "&[County]&", "&[Post Code] 
```

请记住，NULL 胜过数学中的一切，因此每次任何字段为空白时，使用加号运算符都会为您提供 NULL 结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:38:22.193

你的`IIf`陈述很接近。

您错过了 2 个可能的测试之一

如果只能出现空值，

```
=IIf(IsNull([County]),[City]+", "+[County]+", "+[Post Code],[City]+", "+[Post Code]) 
```

如果它可以为空 ( `""`) 或 null

```
=IIf(len(""&[County]),[City]+", "+[County]+", "+[Post Code],[City]+", "+[Post Code]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T16:11:07.167

您可以利用两个连接运算符 (`+`和`&`) 以不同方式处理 Null 的事实。

```
? "A" + Null
Null
? "A" & Null
A 
```

所以你可以这样做...

```
? "A" & ", " & "B" & ", " & "C"
A, B, C
? "A" & ", " & Null & ", " & "C"
A, , C 
```

...但是如果您在使用 Null 而不是第二个字符串值时不想要两个逗号，请改为执行以下操作：

```
? "A" & (", " + Null) & ", " & "C"
A, C 
```

如果这一切都有意义，请将相同的模式应用于您的文本框控件源：

```
=[City] & (", " + [County]) & ", " & [Post Code] 
```

您不需要函数（`IIf`、`IsNull`、`Len`和/或`Nz`）来获得您想要的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T15:45:03.690

请试试这个：相当丑陋的想法......当 Chr(13) 和 Chr(10) 在那里时，它永远不会是空的。

```
IIf(Isnull([County]), 
    IIf(Isnull([Post Code]), 
        IIf(IsNull[Post Code]), "No Address", [Post Code]),
        [City] + Chr(13) & Chr(10) +[Post Code]),
[Country] + Chr(13) & Chr(10) + [City] + Chr(13) & Chr(10) +[Post Code]) 
```

# actionscript-3 - 如何将字符串转换为对象

> ID：13936149
> 
> 赞同：2
> 
> 时间：2012-12-18T15:25:54.373
> 
> 标签：actionscript-3, flash, apache-flex, flash-media-server

我正在尝试使用 sharedObject 来协调多个游戏玩家之间舞台上多个对象的移动。我认为我非常接近，但我似乎在将存储在 sharedObject 中的字符串转换为 Ball 类的实例时遇到问题。

我的问题出在 soSync 函数中。我想我需要将存储在 sharedObject 中的“objectMoved”的值转换为一个对象。我可以跟踪所选对象的名称，但无法将其作为对象检索。如何将所选对象存储在 sharedObject 中，然后使用它与其他游戏玩家协调运动？

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" creationComplete="init()">
    <mx:Script>
        <![CDATA[
            import mx.core.UIComponent;
            public var nc:NetConnection;
            private var connectionURL:String = "rtmp://server address...";
            public var remoteSO:SharedObject; 
            private var checker:Ball;

            public function init():void{
                //Create new checkers; place them and create listeners
                for (var i:int = 0; i < 3; i++){
                    checker = new Ball;
                    checker.x = 150 + (i * 110);
                    checker.y = 150;    
                    checker.name = String(i);
                    this.addChild(checker);
                    checker.addEventListener(MouseEvent.MOUSE_DOWN,handleMouseDown);
                }
                // Establish connection to the server
                nc = new NetConnection();           
                //Listener triggered by the NetConnection connection 
                nc.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);
                nc.connect(connectionURL);
            }
            private function netStatusHandler(e:NetStatusEvent):void {
                if(e.info.code == "NetConnection.Connect.Success"){
                    createRemoteSO();
                }
            }
            private function handleMouseDown(e:MouseEvent):void{
                //Show which object has been selected
                objectInfo.text = "Clicked: "+String(e.currentTarget);
                e.currentTarget.startDrag();
                e.currentTarget.addEventListener(MouseEvent.MOUSE_MOVE,dragging);
                e.currentTarget.addEventListener(MouseEvent.MOUSE_UP,handleMouseUp)
                //Update the remote shared object from this client     
                function dragging(e:MouseEvent):void{  
                    objectInfo.text = "Dragging: "+String(e.currentTarget);
                    //Set the shared object         
                    remoteSO.setProperty("objectMoved",e.currentTarget.name);               
                    remoteSO.setProperty("x",e.currentTarget.x);                
                    remoteSO.setProperty("y",e.currentTarget.y);
                }
                function handleMouseUp(e:MouseEvent):void{
                    e.currentTarget.stopDrag();
                    objectInfo.text = ""
                    e.currentTarget.removeEventListener(MouseEvent.MOUSE_MOVE,dragging)
                }
            }
            private function createRemoteSO():void{
                // Create reference to the remote shared object
                remoteSO = SharedObject.getRemote("remoteSO",nc.uri,false);
                remoteSO.connect(nc);
                //Listener to handle changes to the remote shared object 
                remoteSO.addEventListener(SyncEvent.SYNC, soSync);                      
            }   
            //Called when a change is made to the remote shared object by other clients
            private var counter:int;
            private function soSync(se:SyncEvent):void { 
                if(remoteSO.data.objectMoved){
                    this.getChildByName(remoteSO.data.objectMoved).x = remoteSO.data.x;
                    this.getChildByName(remoteSO.data.objectMoved).y = remoteSO.data.y;
                }else{
                    trace("Object does not exist")
                }
            } 
        ]]>
    </mx:Script>        
    <mx:Text x="147" y="51" text="Selected object"/>
    <mx:TextArea  id="objectInfo" x="237" y="50"/>
</mx:Application> 
```

球.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<mx:UIComponent xmlns:mx="http://www.adobe.com/2006/mxml"  creationComplete="init()">
<mx:Script>
    <![CDATA[
    import mx.events.FlexEvent;

    private function init():void{
        var child:Shape = new Shape();
        child.graphics.beginFill(0xff0000, .5);
        child.graphics.drawCircle(0, 0, 50);
        child.graphics.endFill();
        this.addChild(child);
    }
    ]]>
</mx:Script>    
</mx:UIComponent> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T16:44:59.620

我认为您可以使用 getChildByName("String/ObjectName here")。

所以在你的情况下......

```
this.getChildByName(remoteSO.data.objectMoved).y = remoteSO.data.y; 
```

或者，您是否可以在使用 setProperty 而不是对象名称时仅添加物理对象本身。像这样...

```
remoteSO.setProperty("objectMoved",e.currentTarget); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:00:42.487

您的 Ball 对象似乎是一个 DisplayObject，无法将其作为一个整体保存在共享对象中。但是，您可以实例化一个 Ball 对象，从 SO 中读取属性并将它们分配给您的球。有问题的属性似乎是`x`and `y`，而不是`objectMoved`，因为如果您失去命名上下文，您的球的名字很可能会符合`instance389`which 不拼写的东西，即使没有，您也只能通过名字找到一个孩子，如果它仍然存在。因此，如果您只有一个 Ball 类型的对象，则将其指定为从 SO 读取的 X 和 Y，如果没有，您应该在 SO 中存储几个球，以便稍后实例化它们并保留它们的所有坐标。

# google-chrome-extension - 在网页内嵌入图片

> ID：13936150
> 
> 赞同：0
> 
> 时间：2012-12-18T15:25:55.860
> 
> 标签：google-chrome-extension

我是开发 Chrome 扩展程序的新手，但有编程经验。我想知道是否可以在用户访问的每个网站中嵌入外部图像？

例如，每个网站顶部的小横幅图片，我已经查看了“内容脚本”，但我不确定该图片是否必须已经在网站目录中，或者您是否可以加载外部图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:07:08.097

## 简短的回答：

是的！

## 长答案：

是的，您可以使用外部图像。但是你我不建议你，例如`<img>`在页面中注入一个标签。我最终使用这种方法遇到了一些跨域错误。

我就是这样做的：

首先，您应该将图像主机域添加到清单权限中。

**清单.json**：

```
{
...
"permissions": ["http://image-domain.com/images/*"]
...
} 
```

**然后从扩展域**加载图像并将**图像数据**注入某个`<img>`标签中。

希望能帮助到你...

# php - 编程逻辑最佳实践 - 冗余检查

> ID：13936157
> 
> 赞同：3
> 
> 时间：2012-12-18T15:26:07.437
> 
> 标签：php, coding-style, logic

我正在创建一个大型 PHP 项目，但我对如何进行有一点疑问。

假设我们有一个类`books`，在这个类中我有方法`ReturnInfo`：

```
function ReturnInfo($id) {
    if( is_numeric($id) ) {
        $query = "SELECT * FROM books WHERE id='" . $id . "' LIMIT 1;";

        if( $row = $this->DBDrive->ExecuteQuery($query, $FetchResults=TRUE) )   {  
                return $row;
        } else {
            return FALSE;
        }
    } else {
        throw new Exception('Books - ReturnInfo - id not valid.');          
    }
} 
```

然后我有另一种方法`PrintInfo`

```
function PrintInfo($id) {
    print_r( $this->ReturnInfo($id) );
} 
```

**显然，代码示例只是示例，而不是实际的生产代码。**

在第二种方法中，我应该（再次）检查 id 是否为数字？或者我可以跳过它，因为在第一种方法中已经注意了，如果不是异常就会抛出？

到目前为止，我总是用冗余检查编写代码（无论是否已经在其他地方检查过，我*也会*在这里检查）

有最佳实践吗？只是常识吗？

预先感谢您的友好答复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T15:40:25.097

好吧，问问自己通过检查每一层*可以获得*什么。是不是更安全？不，因为使用该值的函数是唯一易受攻击的函数，它自己进行检查。

它的唯一优点是您可以更早地停止无效值，从而执行更少的代码。在您知道该值无效之前，它不必一直向下并备份。这可能是也可能不是真正的优势。

但它确实会产生问题：你有更多的代码。您的代码不再是 DRY。如果您更改“有效”值的定义，则必须更改所有地方的检查。这些都是更大的问题。

我会以这种方式解决问题：您的核心业务模型会进行详细检查，它最终负责确保该值是有效的，并且它是唯一对这个值做“危险”事情的人。外层（控制器、视图）只是传递值。除了一个例外：他们可能会进行“粗略”的数据验证。假设您的模型需要具有特定格式的电话号码。您应该在模型中检查此特定规则。在视图/控制器层中，您可以粗略地验证该值至少有点数字。比如说，你有一个 Javascript 检查。这可以阻止明显错误的值干扰您的核心应用程序，同时仍然让您可以灵活地在一个地方调整核心验证规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:02:15.613

除非您在连续执行数千次的循环内仔细检查返回，否则您甚至不会*注意到*冗余检查。即便如此，类型检查是一个非常小的操作，并且比用于检索示例中的数据的 SQL 查询快几个数量级。

除非您*真的*为实时应用程序压缩 CPU 周期，否则您可能会享受额外检查为您提供的 ass-coverage。

也就是说，您的函数通常应该比其输出更严格或更严格地验证其*输入*，因此您将编写像这样的额外冗余检查的唯一地方是一些需要严格输入/验证的内联功能。

# selenium - 如何使用 selenium webdriver 处理 ModalDialog？

> ID：13936167
> 
> 赞同：14
> 
> 时间：2012-12-18T15:26:33.913
> 
> 标签：selenium, modal-dialog, selenium-webdriver

我无法切换到给定示例的模态对话框

[http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/showModalDialog2.htm](http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/showModalDialog2.htm)

我不知道如何在模态对话框中获取元素

![在此处输入图像描述](../Images/38ce5d0df4e9e8b7f6df1a31b307359d.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-18T15:35:25.527

采用

以下方法切换到modelframe

```
driver.switchTo().frame("ModelFrameTitle"); 
```

或者

```
driver.switchTo().activeElement() 
```

希望这会奏效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-20T08:51:21.923

您使用的不是模型对话框，而是一个单独的窗口。

使用此代码：

```
private static Object firstHandle;
private static Object lastHandle;

public static void switchToWindowsPopup() {
    Set<String> handles = DriverManager.getCurrent().getWindowHandles();
    Iterator<String> itr = handles.iterator();
    firstHandle = itr.next();
    lastHandle = firstHandle;
    while (itr.hasNext()) {
        lastHandle = itr.next();
    }
    DriverManager.getCurrent().switchTo().window(lastHandle.toString());
}

public static void switchToMainWindow() {
    DriverManager.getCurrent().switchTo().window(firstHandle.toString()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-31T14:22:42.353

`Try the below code. It is working in IE but not in FF22\. If` ***找到模态对话框*** `is printed in Console, then Modal dialog is identified and switched.`

```
 public class ModalDialog {

        public static void main(String[] args) throws InterruptedException {
            // TODO Auto-generated method stub
            WebDriver driver = new InternetExplorerDriver();
            //WebDriver driver = new FirefoxDriver();
            driver.get("http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/showModalDialog2.htm");
            String parent = driver.getWindowHandle();
            WebDriverWait wait = new WebDriverWait(driver, 10);
            WebElement push_to_create = wait.until(ExpectedConditions
                    .elementToBeClickable(By
                            .cssSelector("input[value='Push To Create']")));
            push_to_create.click();
            waitForWindow(driver);
            switchToModalDialog(driver, parent);

        }

        public static void waitForWindow(WebDriver driver)
                throws InterruptedException {
            //wait until number of window handles become 2 or until 6 seconds are completed.
            int timecount = 1;
            do {
                driver.getWindowHandles();
                Thread.sleep(200);
                timecount++;
                if (timecount > 30) {
                    break;
                }
            } while (driver.getWindowHandles().size() != 2);

        }

        public static void switchToModalDialog(WebDriver driver, String parent) { 
                //Switch to Modal dialog
            if (driver.getWindowHandles().size() == 2) {
                for (String window : driver.getWindowHandles()) {
                    if (!window.equals(parent)) {
                        driver.switchTo().window(window);
                        System.out.println("Modal dialog found");
                        break;
                    }
                }
            }
        }

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-15T15:46:40.490

R（RSelenium）中的解决方案：我有一个弹出对话框（动态生成），因此在原始页面源代码中无法检测到以下方法对我有用：

方法1：模拟Tabs的按键并切换到该模态对话框我当前的键集中在模态对话框后面的下拉按钮上

```
remDr$sendKeysToActiveElement(list(key = "tab"))
Sys.sleep(5)
remDr$sendKeysToActiveElement(list(key = "enter"))
Sys.sleep(15) 
```

方法 2：如果可以找到它，将焦点放在框架（或 iframe）上

```
date_filter_frame <- remDr$findElement(using = "tag name", 'iframe')
date_filter_frame$highlightElement()

Sys.sleep(5)

remDr$switchToFrame(date_filter_frame)

Sys.sleep(2) 
```

现在您可以搜索框架中的元素。请记住在命令之间放置足够的 Sys.sleep 以正确加载元素（以防万一）

```
date_filter_element <- remDr$findElement(using = "xpath", paste0("//*[contains(text(), 'Week to Date')]"))
date_filter_element$highlightElement() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T09:21:12.507

试试这个代码，包括你的对象名称和变量来工作。

```
Set<String> windowids = driver.getWindowHandles();
Iterator<String> iter= windowids.iterator();
for (int i = 1; i < sh.getRows(); i++)
{   
while(iter.hasNext())
{
System.out.println("Main Window ID :"+iter.next());
}
driver.findElement(By.id("lgnLogin_UserName")).clear();
driver.findElement(By.id("lgnLogin_UserName")).sendKeys(sh.getCell(0, 
i).getContents());
driver.findElement(By.id("lgnLogin_Password")).clear();
driver.findElement(By.id("lgnLogin_Password")).sendKeys(sh.getCell(1, 
i).getContents());
driver.findElement(By.id("lgnLogin_LoginButton")).click();
Thread.sleep(5000L);
            windowids = driver.getWindowHandles();
    iter= windowids.iterator();
    String main_windowID=iter.next();
    String tabbed_windowID=iter.next();
    System.out.println("Main Window ID :"+main_windowID);
    //switch over to pop-up window
    Thread.sleep(1000);
    driver.switchTo().window(tabbed_windowID);
    System.out.println("Pop-up window Title : "+driver.getTitle()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-28T02:37:24.247

我试过了，它对你有用。

```
String mainWinHander = webDriver.getWindowHandle();

// code for clicking button to open new window is ommited

//Now the window opened. So here reture the handle with size = 2
Set<String> handles = webDriver.getWindowHandles();

for(String handle : handles)
{
    if(!mainWinHander.equals(handle))
    {
        // Here will block for ever. No exception and timeout!
        WebDriver popup = webDriver.switchTo().window(handle);
        // do something with popup
        popup.close();
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-19T17:52:35.210

假设期望只是弹出两个窗口（一个是父窗口，一个是弹出窗口）然后等待两个窗口出现，找到另一个窗口句柄并切换到它。

```
WebElement link = // element that will showModalDialog()

// Click on the link, but don't wait for the document to finish
final JavascriptExecutor executor = (JavascriptExecutor) driver;
executor.executeScript(
    "var el=arguments[0]; setTimeout(function() { el.click(); }, 100);",
  link);

// wait for there to be two windows and choose the one that is 
// not the original window
final String parentWindowHandle = driver.getWindowHandle();
new WebDriverWait(driver, 60, 1000)
    .until(new Function<WebDriver, Boolean>() {
    @Override
    public Boolean apply(final WebDriver driver) {
        final String[] windowHandles =
            driver.getWindowHandles().toArray(new String[0]);
        if (windowHandles.length != 2) {
            return false;
        }
        if (windowHandles[0].equals(parentWindowHandle)) {
            driver.switchTo().window(windowHandles[1]);
        } else {
            driver.switchTo().window(windowHandles[0]);
        }
        return true;
    }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-11T15:45:49.687

不，模型窗口需要由**javaScriptExecutor**处理，因为模型窗口主要由窗口模型组成，一旦模型出现，这将起作用，然后控制进入模型并单击预期的元素。

必须导入**javascriptexecor**

如下所示，

```
Javascriptexecutor js =(Javascriptexecutor).driver;
js.executescript(**<element to be clicked>**); 
```

# android - TaskStackBuilder addParentStack 在 Android 2.3 中是否工作

> ID：13936168
> 
> 赞同：1
> 
> 时间：2012-12-18T15:26:35.537
> 
> 标签：android, navigation

我正在使用`TaskStackBuilder`并且我按照[通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)中的步骤打开了一个`Regular Activity`. 我还同时实现`android:parentActivityName`了.`<meta-data android:name="android.support.PARENT_ACTIVITY..."``Manifest`

但是，当我按回（打开活动后）时，我的 Galaxy Nexus (4.2) 一切正常，但在我的 HTC Nexus One (2.3.6) 中却不行。HTC 手机关闭`Activity`并返回主屏幕，同时 Galaxy Nexus 构建一路返回应用程序主屏幕。

我找不到很多关于这个的信息.. Android 2.3 支持这个吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:14:06.127

不，这在 2.3 中不受支持。您可以在 API 级别 16 (JellyBean) 以外的设备上使用一个兼容性库，但该兼容性库仅适用于 Android 3.0 及更高版本。

请参阅[http://developer.android.com/reference/android/support/v4/app/TaskStackBuilder.html](http://developer.android.com/reference/android/support/v4/app/TaskStackBuilder.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T14:33:33.957

David Wasser 的回答实际上是不正确的：支持 TaskStackBuilder 实际上早在 Gingerbread (2.3.7) 就可以工作。该文档仅说明在 3.0 中更改了使用后退键的应用程序导航的推荐约定，而不是 TaskStackBuilder 在 3.0 以下不起作用。

# python - Python win32clipboard 数据被截断

> ID：13936169
> 
> 赞同：1
> 
> 时间：2012-12-18T15:26:37.760
> 
> 标签：python, wxpython, clipboard, objectlistview

我正在使用一个名为[ObjectListView](http://objectlistview.sourceforge.net/cs/index.html)的 Python 模块作为 wxPython 的补充。我正在使用 python2.7 和 wxPython 2.8.1.2.1

我的问题是将信息复制到 Windows 剪贴板。模块 ObjectListView 有一个部分使用 win32clipboard 将信息存储在剪贴板中。但是，在检索信息时，只返回第一个字符。. .而没有别的。

```
 try:
        win32clipboard.OpenClipboard(0)
        win32clipboard.EmptyClipboard()
        cfText = 1
        print txt #prints 'hello world'
        win32clipboard.SetClipboardData(cfText, txt)
        print htmlForClipboard #prints html output
        cfHtml = win32clipboard.RegisterClipboardFormat("HTML Format")
        win32clipboard.SetClipboardData(cfHtml, htmlForClipboard)
        print win32clipboard.GetClipboardData() #prints 'h'
    finally:
        win32clipboard.CloseClipboard() 
```

那是模块中的代码。我已经输入了打印语句进行调试。我已经评论了打印的文本。这个问题只发生在这个模块中。如果我在 python 解释器中运行那段代码，它运行良好，剪贴板返回整个输入。

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:57:58.210

当一个字符串被剪辑到第一个字符时，我首先想到的是 UTF-16 被解释为一个 8 位字符。大多数欧洲语言的 2 字节 UTF-16 序列的第二个字节为零，导致字符串提前终止。试试这个：

```
print win32clipboard.GetClipboardData().decode('utf-16le') 
```

`encode('utf-16le')`在将数据设置到剪贴板时，我也会使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:49:18.787

不要使用 ObjectListView 进行复制和粘贴，您应该尝试使用 wxPython 附带的方法。以下是一些相关链接：

*   [http://www.blog.pythonlibrary.org/2012/05/25/wxpython-how-to-use-the-clipboard/](http://www.blog.pythonlibrary.org/2012/05/25/wxpython-how-to-use-the-clipboard/)
*   [http://wiki.wxpython.org/ClipBoard](http://wiki.wxpython.org/ClipBoard)

使用它进行简单的复制和粘贴操作时，我从来没有遇到过任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T18:22:02.203

我在这里找到了一个类似的帖子：[wxPython ObjectListView Capture Ctrl-C shortcut](https://stackoverflow.com/questions/19595943/wxpython-objectlistview-capture-ctrl-c-shortcut)

我遇到了同样的问题，并决定重写 ObjectListView 类。我只想复制文本，我使用 Mike D 的示例代码将其复制到剪贴板。

我还借此机会将列文本作为标题复制到我的数据中。这使得粘贴到 Excel 中的信息更易于解析。

这是我的代码：

```
class MyOLVClass(ObjectListView):
    def CopyObjectsToClipboard(self, objects):
        """
        Put a textual representation of the given objects onto the clipboard.

        This will be one line per object and tab-separated values per line.
        """
        if objects is None or len(objects) == 0:
            return

        # Get the column header text
        h = []
        for n in range(self.GetColumnCount()):
            col = self.GetColumn(n)
            h.append(col.GetText())
        header = '\t'.join(h)

        # Get all the values of the given rows into multi-list
        rows = self._GetValuesAsMultiList(objects)

        # Make a text version of the values
        lines = [ "\t".join(x) for x in rows ]
        txt = header + '\n' + "\n".join(lines) + "\n"

        self.dataObj = wx.TextDataObject()
        self.dataObj.SetText(txt)
        if wx.TheClipboard.Open():
            wx.TheClipboard.SetData(self.dataObj)
            wx.TheClipboard.Close()
        else:
            wx.MessageBox("Unable to open the clipboard", "Error") 
```

# python - python - 我很难打印涉及对象的东西

> ID：13936170
> 
> 赞同：3
> 
> 时间：2012-12-18T15:26:39.237
> 
> 标签：python, object, printing

我是编程和使用 Python 的初学者。目前，我正在尝试理解 Jurafsky 和 ​​Martin 2008 年关于语音和语言处理的书（关于句法解析的练习 13.1）中的一些代码。我将它复制到下面（除了最后4行，我没有自己编写此代码）。

我的问题很简单：我没有打印语法规则，而是得到如下输出：

```
set([<__main__.Rule object at 0x011E1810>, <__main__.Rule object at 0x011E1790>, <__main__.Rule object at 0x011E15F0>, ...) 
```

我知道我应该对**str** (self) 做一些事情，但是我尝试了一些事情，但仍然没有得到正常的输出。我怀疑解决方案很简单，但我只是不知道该怎么做。很感谢任何形式的帮助。可能您不需要阅读和理解下面的所有代码即可查看哪些代码不起作用。

非常感谢！

```
def chomsky_normal_form(grammar):
    grammar = set(grammar)
    nonterminals = set(rule.head for rule in grammar)

    # remove single symbol nonterminal rules
    for rule, symbol in _unary_rules(grammar, nonterminals):
        grammar.discard(rule)
        for rule2 in _rules_headed_by(grammar, symbol):
            grammar.add(Rule(rule.head, tuple(rule2.symbols)))
        if all(symbol not in rule.symbols for rule in grammar):
            for rule2 in _rules_headed_by(grammar, symbol):
                grammar.discard(rule2)

    # move terminals to their own rules
    for rule in list(grammar):
        if len(rule.symbols) >= 2:
            for i, symbol in enumerate(rule.symbols):
                if all(rule.head != symbol for rule in grammar):
                    rule = _new_symbol(grammar, rule, i, i + 1)

    # ensure there are only two nonterminals per rule
    for rule in _multi_symbol_rules(grammar):
        _new_symbol(grammar, rule, 0, 2)

    # return the grammar in CNF
    return grammar

# find A -> B rules, allowing concurrent modifications
def _unary_rules(grammar, nonterminals):
    while True:
        g = ((rule, rule.symbols[0])
            for rule in grammar
            if len(rule.symbols) == 1
            if rule.symbols[0] in nonterminals)
        yield g.next()

# find all rules headed by the given symbol
def _rules_headed_by(grammar, symbol):
    return [rule for rule in grammar if rule.head == symbol]

# create a new symbol which derives the given span of symbols
def _new_symbol(grammar, rule, start, stop):
    symbols = rule.symbols
    new_head = '_'.join(symbols[start:stop]).upper()
    new_symbols = symbols[:start] + (new_head,) + symbols[stop:]
    new_rule = Rule(rule.head, new_symbols)
    grammar.discard(rule)
    grammar.add(new_rule)
    grammar.add(Rule(new_head, symbols[start:stop]))
    return new_rule

# find A -> BCD... rules, allowing concurrent modifications
def _multi_symbol_rules(grammar):
    while True:
        g = (rule for rule in grammar if len(rule.symbols) >= 3)
        yield g.next()

# representation of a rule A -> B...C
class Rule(object):
    def __init__(self, head, symbols):
        self.head = head
        self.symbols = symbols
        self._key = head, symbols
    def __eq__(self, other):
        return self._key == other._key
    def __hash__(self):
        return hash(self._key)
    def __str__(self):
        rep = grammar_cnf
        return rep

# build a grammar from a string of lines like "X -> YZ | b"
def get_grammar(string):
    grammar = set()
    for line in string.splitlines():
        head, symbols_str = line.split(' -> ')
        for symbols_str in symbols_str.split(' | '):
            symbols = tuple(symbols_str.split())
            grammar.add(Rule(head, symbols))
    return grammar

grammar = get_grammar("""S -> NP VP | Aux NP VP | VP
NP -> Pronoun | Proper-Noun | Det Nominal
Nominal -> Noun | Nominal Noun | Nominal PP
VP -> Verb | Verb NP | Verb NP PP | Verb PP | VP PP
PP -> Preposition NP
Det -> that | this | a
Noun -> book | flight | meal | money
Verb -> book | include | prefer
Pronoun -> I | she | me
Proper-Noun -> Houston | TWA
Aux -> does
Preposition -> from | to | on | near | through""")

grammar_cnf = chomsky_normal_form(grammar)
print(grammar_cnf) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:28:20.987

你可以[`__repr__`](http://docs.python.org/3/reference/datamodel.html#object.__repr__)在你的规则类中实现

您可以`__str__`用于非正式表示，（如果**str**不存在，则回退到**repr**

这些是这样完成的：

```
class Rule(object):

   def __init__(self, name):
     self.name = name

   def __repr__(self):
      return 'Rule({0})'.format(self.name)    

   def __str__(self):
     return self.name

rule = Rule('test')
print(rule) # test 
```

# sql - 使用内部连接更新

> ID：13936171
> 
> 赞同：1
> 
> 时间：2012-12-18T15:26:42.653
> 
> 标签：sql, sql-server, sql-server-2008, sql-update

> **可能重复：**
> [在 SQL Server 中使用 JOIN 更新表？](https://stackoverflow.com/questions/1604091/update-a-table-using-join-in-sql-server)

我被困在一个非常简单的查询上，一个带有连接的更新，我想将 RECORDTYPE 字段中的字段 RECORDTYPE 的值 = TEMPLATETABLE.RECORDTYPE 的值

我试过这个，但我得到连续的语法错误，这是问题所在？

```
update MAINTABLE MT
set MT.MYTYPE =  TT.RECORDTYPE 
inner join TEMPLATETABLE TT on TT.ID_RECORD_TEMPLATE = MT.ID_RECORD_TEMPLATE 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:27:32.467

您缺少该`FROM`条款。试试这个：

```
UPDATE MT
SET MT.MYTYPE =  TT.RECORDTYPE 
FROM MAINTABLE MT
INNER JOIN TEMPLATETABLE TT 
        ON TT.ID_RECORD_TEMPLATE = MT.ID_RECORD_TEMPLATE 
```

# php - 以 Symfony2 形式存储和检索序列化数组

> ID：13936173
> 
> 赞同：0
> 
> 时间：2012-12-18T15:26:47.420
> 
> 标签：php, forms, serialization, symfony, doctrine-orm

在我的数据库中有一个表，其中有一列文本类型。此列包含一个序列化数组。该数组由另一个应用程序读取和存储，我无法更改其格式。

序列化数组包含两种不同语言的数据库名称、表名称和列名称的选择。

我想在 Symfony2 中编写一个能够修改这个序列化数组的控制器、实体、表单等。

我可以使用一个脚本，它可以提供每个序列化数组可能包含的所有可能的数据库名称、表名和列名的数组。

目标是提供一个复选框列表，用户可以在其中选择数据库、表和列。接下来，他们可以对名称进行翻译。

由于所有数据都非常不稳定，我不确定这在 Symfony2 中是否可行。

另一种方法是制作以下实体：{数据库、表、列}并完全面向对象。然后我可以将序列化数组中的选择导出到期望它的外部应用程序......

你们能听懂我的推理吗？我是否忽略了这里的策略......？

补充：数组是一个嵌套数组，最多为五度。数据库包含表，其中包含列。每个项目都有一个原始名称和一个翻译名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:27:00.743

I know it's really late but I was really busy with university so I couldn't answer sooner

This is what I think is the best to do

Imagine that the table that contains the column which contains your array is called foo

So you make an entity which is called Foo and contains a field(type text) that has the name you like

Now the tricky part is to make an object called Database that contains all the relations you need(To a Table object and Table objects to column Objects)

So even though I told you to make the field type as text you will pas the object Database to this field

So how it's going to work

The Database object will have a __string method that will return the serialized array of the object the way you want

This way when doctrine2 tries to save the Database object in the text field it will be saved as the string that __string method returns

And you will have getDatabase that will converts the serialized array to the database object

This is the idea that I have and not sure if it suits you or not

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:18:32.910

我想你回答了你自己的猜测：

```
An alternative is to make the following entities: { database, table, column } and do it fully OO.
And then I could export a selection in a serialized array, to the external application that 
expects it that way... 
```

您将从映射到您的表的主实体开始。

```
class SomeEntity
{
    protected $serializedInfo;

    public getDatabases()
    {
        // Process serializedInfo into an array of database objects and return 
```

然后将 SomeEntity 传递给 SomeEntityFormType，后者又使用 DatabaseFormTypes 的集合。然后 DatabaseFormType 有一个 TableFormTypes 的集合等等。

最终您的表单将被发布并且 SomeEntity 将被更新。然后，您在发布之前进行序列化。应该直截了当。如果您希望用户添加信息，可能会更具挑战性，但即便如此，它也是可行的。

# objective-c - 您是否应该经常使用 try/catch/finally 块

> ID：13936178
> 
> 赞同：6
> 
> 时间：2012-12-18T15:26:59.170
> 
> 标签：objective-c, ios

作为具有 java 背景的开发人员，我习惯于经常捕获异常以防止它们使我的应用程序崩溃。这包括各种委托方法。只是针对意外情况的额外安全措施。

我的问题是这种方法在目标 c 中是否明智，它是否会引入某种性能问题？换句话说，如果我更频繁地使用 try/catch 块，我的应用程序会受到任何影响吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T15:30:54.703

它不会那么痛苦，但你必须记住一些事情。与您可能拥有的其他语言不同`ConnectionRefusedException`，`FileNonexistantException`在 Objective-C 中，异常在 90% 的情况下都是程序员错误。因此，当您的应用程序投入生产时，它不应该有任何异常。例如，与其捕获越界异常，不如在尝试之前查看数组长度。您可以进行顶级尝试捕获，以防万一出现错误并比崩溃更优雅地退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:32:28.043

通常，您不希望在程序运行时发生异常。因此，在错误发生之前对其进行测试而不是在错误发生后捕获它们被认为是更好的编程实践。

测试方法中的错误并返回一些值作为错误指示器也比抛出异常更好。抛出异常会占用大量系统资源，因此，

***Apple 通常建议不要使用它们不必要的用途（例如，您不想仅仅因为无法打开文件而引发异常）。***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:33:53.340

最好的做法是，仅在加载数据、模块、文件以及由于用户环境设置或用户提交的数据而可能无法正常工作的事物时才使用 try 和 catch。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T15:35:37.130

仅将 tty/catch 用于异常，而不是作为 if/then 的替代品。开销非常昂贵。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T15:32:16.340

异常就是*异常*，不应该经常发生:))，所以它根本不会影响性能。

通常协议包含正常行为和错误的委托方法[例如`didLoadResponse: theResponse`，`didFailWithError: theError`]，因此将涵盖所有情况。

我会保留例外情况，例如写入磁盘时出错或远程服务器关闭 - 实际上会破坏应用程序的情况。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T15:33:29.720

你会遇到性能问题。如果抛出异常，那在调试程序时很好。但是当应用程序在那里运行时，你可能不希望发生这种情况。
我的建议是仅将异常用于调试，然后在发布时禁用它们，然后使用更合适的方法，如 NSError。
假设用户输入了一个 URL 并且这个 URL 无效。你必须加载一个网页。在调试期间你可能只是抛出一个异常，但是当你发布时你可以忽略错误的 URL，并且不要显示页面，或运行 NSAlertPanel 以显示错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T17:52:06.513

我只是在 iPad 上做了一些测试。除非实际抛出异常，否则 @try/@catch 块似乎很少引入性能损失。但是如果抛出异常，惩罚是巨大的。你没有说你正在使用什么环境。所以你的里程可能会有所不同。

# java - Jersey on was 6.1：从 WAS 插件目录加载错误的类定义

> ID：13936179
> 
> 赞同：0
> 
> 时间：2012-12-18T15:26:59.250
> 
> 标签：java, jersey, classloader, jax-rs, websphere-6.1

尝试在 WAS 6.1 上测试 jax rs Jersey 应用程序时，我遇到了以下问题： Jersey 需要 asm 3.1，特别是对于 ClassReader 类，但是从 WAS 插件目录加载了此类的不兼容版本。

从以下位置加载错误的类定义：
file:/C:/Program Files/IBM/SDP70/runtimes/base_v61/plugins/com.ibm.wsfp.main_6.1.0.jar

如果我运行我的应用程序，我会得到一个 noSuchMethodError ：

```
java.lang.NoSuchMethodError:     org/objectweb/asm/ClassReader.accept(Lorg/objectweb/asm/ClassVisitor;I)V
    at  com.sun.jersey.server.impl.container.config.AnnotatedClassScanner.analyzeClassFile(AnnotatedClassScanner.java:322)
    at com.sun.jersey.server.impl.container.config.AnnotatedClassScanner.indexDir(AnnotatedClassScanner.java:271) 
```

……

如果我从插件目录中删除这个 jar，我的 3.1 版本的 asm jar 会被拾取，一切都很好。

所以这是我的问题：**处理这种情况的好方法是什么？**当我把它交给他时，有没有办法告诉服务器拿起我的罐子而不是它的罐子？

[在这里](http://mathieuhicauber-java.blogspot.fr/2012/12/jax-rs-jersey-on-was-61-asm-classreader.html)完成问题描述。

谢谢，

马修。

# wpf - 组合框中不显示包裹的图像

> ID：13936180
> 
> 赞同：0
> 
> 时间：2012-12-18T15:27:10.207
> 
> 标签：wpf, image, binding, combobox

我使用以下问题中描述的方法来填充组合框。

[ComboBox ItemTemplate 不支持“图像”类型的值](https://stackoverflow.com/questions/11514285/combobox-itemtemplate-does-not-support-values-of-type-image)

ComboBox 填充了包含 Image 和一些数据的包装类的实例。但是，正如该问题的发布者所述，图像不会显示在组合框中，但是选择其中一个空白条目确实可以正确绑定数据。

数据绑定在模型视图中，因为它与外部数据源交互，但是图像是特定于 UI 的，因此绑定在用户控件的代码中。

如何让图像显示？

代码：

```
public ObservableCollection<Wrapper> Images { get; set; }
public Class Wrapper
{
    public Wrapper(int data,  Image img)
    {
            Data = data;
            Img = img;              
    }
    public int Data { get; set; }
    public Image Img { get; set; }

}

int selectedData;

public int SelectedData
{
    get { return selectedData; }
    set
        {
            selectedData = value;
            (this.Resources["model"] as MyModel).External = Images[selectedData].Data;
            SendPropertyChanged("SelectedData");
        }
 } 
```

xml:

```
<ComboBox ItemsSource="{Binding Images}" SelectedIndex="{Binding SelectedData}">
     <ComboBox.ItemTemplate>
         <DataTemplate>
             <Image Source="{Binding Img}" Height="83" Width="71"/>
         </DataTemplate>
     </ComboBox.ItemTemplate>
</ComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:37:38.100

Image 控件的[Source](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.source.aspx)不能是另一个 Image 控件。`Img`将您的属性类型更改为[ImageSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imagesource.aspx)：

```
public class Wrapper
{
    ...
    public ImageSource Img { get; set; }
} 
```

# sql - 如何从临时表中添加或更新新值？

> ID：13936187
> 
> 赞同：1
> 
> 时间：2012-12-18T15:27:20.967
> 
> 标签：sql, sql-server, sql-server-2008, tsql

如果存在 A、B、Tarih 和不存在如何更新行如何插入？

我的原始代码：

```
 Insert X(A,B,C,D,E,Tarih)
select substring(dosya,2,25) as A, 
substring(dosya,27,15) as B,
substring(dosya,70,40) as C,
CONVERT(DECIMAL(17,2),substring(dosya,52,17)) as D,
case when substring(dosya,124,2)='00' then 'TL'
     when substring(dosya,124,2)='01' then 'USD'
     when substring(dosya,124,2)='02' then 'CHF'
     when substring(dosya,124,2)='03' then 'CAD'
     when substring(dosya,124,2)='04' then 'KWD'

     when substring(dosya,124,2)='05' then 'GBP'
     when substring(dosya,124,2)='06' then 'SAR'
     when substring(dosya,124,2)='07' then 'JPY'
     when substring(dosya,124,2)='08' then 'EUR'

     when substring(dosya,124,2)='09' then 'AUD'
     when substring(dosya,124,2)='10' then 'IRR'
     when substring(dosya,124,2)='11' then 'DK'
     when substring(dosya,124,2)='12' then 'SEK'
 else 'Döviz' end  as E,
@tarih as Tarih
 from #TempLog
```

我想更新现有值

伪代码：

```
if exist ( A,B,C in BankaEntegrasyonLog)

{

       Update Row!

}

else

{

 Insert 

X(A,B,C,D,E,Tarih)

select substring(dosya,2,25) as   . . . . .  

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:55:06.503

您将需要使用 MERGE 语句。

首先，让我们创建一个测试表：

```
CREATE TABLE TestLog( SomeKey INTEGER, SomeAttribute VARCHAR(80)); 
```

我们可以在其中插入一些值：

```
INSERT INTO TestLog( SomeKey, SomeAttribute ) VALUES ( 43, 'Something' );
INSERT INTO TestLog( SomeKey, SomeAttribute ) VALUES ( 55, 'Another' );
INSERT INTO TestLog( SomeKey, SomeAttribute ) VALUES ( 77, 'Demo' ); 
```

现在，让我们使用 MERGE 和一个已经存在的键。如果我们应该将“某事”更新为“更新！” 对于 SomeKey = 43：

```
MERGE TestLog AS TARGET
USING (SELECT 43 AS SomeKey, 'Updated!' AS SomeAttribute)
AS SOURCE( SomeKey, SomeAttribute )
ON (TARGET.SomeKey = SOURCE.SomeKey )
WHEN MATCHED THEN
   UPDATE SET SomeAttribute = Source.SomeAttribute
WHEN NOT MATCHED THEN
   INSERT (SomeKey, SomeAttribute)
   VALUES (SOURCE.SomeKey, SOURCE.SomeAttribute); 
```

我们可以检查它是否有效：

SELECT * FROM TestLog WHERE SomeKey = 43;

我们确实看到了“更新！” 对于某些属性。我们可以尝试一个新的值：

```
MERGE TestLog AS TARGET
USING (SELECT 22 AS SomeKey, 'Newone!' AS SomeAttribute)
AS SOURCE( SomeKey, SomeAttribute )
ON (TARGET.SomeKey = SOURCE.SomeKey )
WHEN MATCHED THEN
   UPDATE SET SomeAttribute = Source.SomeAttribute
WHEN NOT MATCHED THEN
   INSERT (SomeKey, SomeAttribute)
   VALUES (SOURCE.SomeKey, SOURCE.SomeAttribute); 
```

并检查它：

```
SELECT * FROM TestLog; 
```

我们确实看到了新的第四行 (22, 'Newone!')。将此示例扩展到您的特定表和插入模式应该不难。如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:01:25.017

像这样的东西：

```
MERGE [dbo].[X] AS TARGET
USING (
    SELECT 
        SUBSTRING([dosya],2,25) AS [A],
        SUBSTRING([dosya],27,15) AS [B],
        SUBSTRING([dosya],70,40) AS [C],
        CONVERT(DECIMAL(17,2),SUBSTRING([dosya],52,17)) AS [D],
        CASE 
            WHEN SUBSTRING([dosya],124,2)='00' THEN 'TL'
            WHEN SUBSTRING([dosya],124,2)='01' THEN 'USD'
            WHEN SUBSTRING([dosya],124,2)='02' THEN 'CHF'
            WHEN SUBSTRING([dosya],124,2)='03' THEN 'CAD'
            WHEN SUBSTRING([dosya],124,2)='04' THEN 'KWD'
            WHEN SUBSTRING([dosya],124,2)='05' THEN 'GBP'
            WHEN SUBSTRING([dosya],124,2)='06' THEN 'SAR'
            WHEN SUBSTRING([dosya],124,2)='07' THEN 'JPY'
            WHEN SUBSTRING([dosya],124,2)='08' THEN 'EUR'
            WHEN SUBSTRING([dosya],124,2)='09' THEN 'AUD'
            WHEN SUBSTRING([dosya],124,2)='10' THEN 'IRR'
            WHEN SUBSTRING([dosya],124,2)='11' THEN 'DK'
            WHEN SUBSTRING([dosya],124,2)='12' THEN 'SEK'
            ELSE 'Döviz'
        END AS [E],
        @tarih AS [Tarih]
    FROM #TempLog
) AS SOURCE
    ON SOURCE.[A] = TARGET.[A]
    AND SOURCE.[B] = TARGET.[B]
    AND SOURCE.[Tarih] = TARGET.[Tarih]
WHEN NOT MATCHED THEN
    INSERT (
        [A],
        [B],
        [C],
        [D],
        [E],
        [Tarih]
    )
    VALUES (
        SOURCE.[A],
        SOURCE.[B],
        SOURCE.[C],
        SOURCE.[D],
        SOURCE.[E],
        SOURCE.[Tarih]
    )
WHEN MATCHED THEN
    UPDATE
    SET [C] = SOURCE.[C],
        [D] = SOURCE.[D],
        [E] = SOURCE.[E]; 
```

我还会考虑创建一个查找表来替换那个 case 语句。这可能使将来的维护更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:01:28.543

根据 Gordon Linoff 的建议

```
MERGE X AS target
USING
 (
  select Id,
         substring(dosya,2,25) as A,
         substring(dosya,27,15) as B,
         substring(dosya,70,40) as C,
         CONVERT(DECIMAL(17,2),substring(dosya,52,17)) as D,
         case when substring(dosya,124,2)='00' then 'TL'
              when substring(dosya,124,2)='01' then 'USD'
              when substring(dosya,124,2)='02' then 'CHF'
              when substring(dosya,124,2)='03' then 'CAD'
              when substring(dosya,124,2)='04' then 'KWD'
              when substring(dosya,124,2)='05' then 'GBP'
              when substring(dosya,124,2)='06' then 'SAR'
              when substring(dosya,124,2)='07' then 'JPY'
              when substring(dosya,124,2)='08' then 'EUR'
              when substring(dosya,124,2)='09' then 'AUD'
              when substring(dosya,124,2)='10' then 'IRR'
              when substring(dosya,124,2)='11' then 'DK'
              when substring(dosya,124,2)='12' then 'SEK'
              else 'Döviz' end  as TutarParaBrimi, @tarih as Tarih
  from #TempLog
  ) AS source
ON target.Id = source.Id
WHEN MATCHED THEN 
  UPDATE SET A = source.A,
             B = source.B,
             C = source.C,
             D = source.D,
             E = source.E,
             Tarih = source.Tarih
WHEN NOT MATCHED THEN
  INSERT (A, B, C, D, E, Tarih)
  VALUES (source.A, source.B, source.C, source.D, source.E, source.Tarih); 
```

如果您没有 Id 列，则将 target.Id = source.Id 替换为
A = source.A AND target.B = source.B AND target.C = source.C AND target.D = source.D
AND target。 E = source.E AND target.Tarih = source.Tarih

# sql-server-2008 - 如何使用 sed 从第一行删除第一个字符

> ID：13936197
> 
> 赞同：5
> 
> 时间：2012-12-18T15:27:50.543
> 
> 标签：sql-server-2008, csv, sed

我有三个 .csv 文件，它们是在 MS SQLServer 中保存查询时输出的。我需要将这些文件加载​​到 Informix 数据库中，这需要添加尾随分隔符。使用 sed 很容易做到

`s/$/,/g`

但是，这些文件中的每一个在第一行的第一个字符位置还包含（由 vim 显示，但不是 ed 或 sed）。

我需要摆脱这个角色。它使用 vim 的`x`命令删除一个字符。我如何使用 sed 来描述这个字符，这样我就可以在不删除该行的情况下删除它。

我试过`1s/^.//g`了，但这不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T15:31:17.010

试试这个：

```
sed -e '1s/^.//' input_file > output_file 
```

或者，如果您想就地编辑文件：

```
sed -ie '1s/^.//' input_file 
```

（已编辑）显然`s/^.//`没有引用这样做，已更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:30:21.430

就地删除第一行的第一个字符：

```
sed -i  '1s/^.//' file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T15:31:20.193

尝试：

```
sed -i '1s/^.\(.*\)/\1/' file 
```

这应该从第一行删除第一个字符。（首先尝试不带`-i`参数以确保）

编辑：我最初发布了以下内容，这将删除每一行的第一个字符。在重新阅读这个问题后，我意识到这并不是想要的。

```
sed -i 's/^.\(.*\)/\1/' file 
```

# asp.net - Ajax ModalPopupExtender 样式问题

> ID：13936199
> 
> 赞同：1
> 
> 时间：2012-12-18T15:28:04.493
> 
> 标签：asp.net, css, ajaxcontroltoolkit

我遇到的问题是我的 Css 已被我的控件使用。这是我的代码

ASP.NET

```
 <cc1:ModalPopupExtender ID="mp1" runat="server" PopupControlID="Panel1" TargetControlID="LoginBtn"
        CancelControlID="btnClose" BackgroundCssClass="modalBackground">
    </cc1:ModalPopupExtender>
    <asp:Panel ID="Panel1" runat="server" CssClass="modalPopup" align="center"Style="display: none">
        This is an ASP.Net AJAX ModalPopupExtender Example
        <br />
        <asp:Button ID="btnClose" runat="server" Text="Close" />
    </asp:Panel> 
```

CSS

```
.modalBackground {
background-color: Black;
filter: alpha(opacity=90);
opacity: 0.8;
}

.modalPopup {
background-color: #FFFFFF;
border-width: 3px;
border-style: solid;
border-color: black;
padding-top: 10px;
padding-left: 10px;
width: 300px;
height: 140px;
} 
```

我尝试了很多事情，例如从示例中复制粘贴，但我无法正确解决我做错了什么？

# android - 看看 json 的样子

> ID：13936200
> 
> 赞同：0
> 
> 时间：2012-12-18T15:28:05.130
> 
> 标签：android

我有一个与 Web 服务连接的应用程序。我通过 Json 发送一些数据：

```
 try {

            JSONObject jsonObject = new JSONObject();
            jsonObject.put("token", regId);
            jsonObject.put("appId", GlobalConfig.getAPPLICATION_ID());
            jsonObject.put("phoneId", 1);

            JSONArray jArrayParam = new JSONArray();
            jArrayParam.put(jsonObject);

            List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>();
            nameValuePair.add(new BasicNameValuePair("Token",jArrayParam.toString()));

            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(GlobalConfig.getSendEmail());
              httppost.addHeader("Authorization", "Basic " + Base64.encodeToString(
                        (GlobalConfig.getAuthString()).getBytes(),Base64.NO_WRAP));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePair, HTTP.UTF_8));

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);

        } catch (Exception e) {
            // TODO: handle exception
        } 
```

我怎样才能看到这个 json 的外观？我想服务器看到这样的东西：

```
{"Token": [
{

"token": "asdasfasf",

"appId": 8.8,

"phoneId": 142.369,

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:42:24.087

创建 json 对象为：

```
 JSONObject jsonObject = new JSONObject();
 jsonObject.put("token", regId);
 jsonObject.put("appId", GlobalConfig.getAPPLICATION_ID());
 jsonObject.put("phoneId", 1);

 JSONArray jArrayParam = new JSONArray();
 jArrayParam.put(jsonObject);

 JSONObject finaljsonobj = new JSONObject();

 finaljsonobj.put("Token", jArrayParam); 
```

现在`finaljsonobj`JSON 对象看起来像：

```
{
  "Token": [
    {
      "token": "asdasfasf",
      "appId": 8.8,
      "phoneId": 142.369,

    }
  ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:32:13.970

使用`JSON.stringify(json_object)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:41:43.050

让我们假设您的 JSON 实际上是有效的（不是），并且您有一个功能完善的 JSONObject。如果你想在控制台中看到它，你只需要这样做：

```
System.out.println(myAwesomeJSONObject.toString(2)); 
```

那 1 是指缩进空格的数量。我喜欢它有 2 个缩进空格，但这是个人品味和可读性的问题。

# php - 从另一个类更新对象状态

> ID：13936206
> 
> 赞同：1
> 
> 时间：2012-12-18T15:28:42.923
> 
> 标签：php

大家好，我在这里和 oophp 都是菜鸟。

我正在寻找从另一个类更新现有对象状态。

所以在主文件中我有......

```
$obj1 = new class1();
$obj2 = new class2(); 
```

在class1中我有我改变对象状态的setter方法。

我正在寻找的东西，从class2的现有方法中是这样的......

```
$obj1->updateName('Bob'); 
```

静态方法不好，因为稍后我必须与相同的对象状态相关。

这是一个单页示例....

```
class class1(){

    private $name = '';

    public function updateName($nameIn){
        $this->name = $nameIn;
    }

}

class class2(){

    public function someFuntion(){

        //OTHER CODE//

        $obj1->updateName('Bob');
    }
}

$obj1 = new class1();
$obj2 = new class2();

$obj2->someFuntion(); 
```

希望这有点道理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:32:13.480

你总是可以`$obj1`作为参数传递给 someFunction。

```
class class1(){
    private $name = '';

    public function updateName($nameIn){
        $this->name = $nameIn;
    }
}

class class2(){
    public function someMethod(class1 $class){
        $class->updateName('Bob');
    }
}

$obj1 = new class1();
$obj2 = new class2();

$obj2->someMethod($obj1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:33:16.217

您必须`$obj1`作为参考传递`class2::someFunction()`：

```
class class2(){

    public function someFunction(&$obj1){

        //OTHER CODE//

        $obj1->updateName('Bob');
    }
}

$obj1 = new class1();
$obj2 = new class2();

$obj2->someFunction($obj1); 
```

请注意，通过引用传递的指令是`someFunction`定义的一部分，通过在参数前面加上`&`.

[http://php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)

# jquery-ui - grails jquery自动完成另一个辅助自动完成功能的选定ID

> ID：13936216
> 
> 赞同：1
> 
> 时间：2012-12-18T15:29:26.913
> 
> 标签：jquery-ui, jquery, grails

我一直在遵循 Alidad 博客中的指南，以在 grails 中启用 jquery 自动完成功能：

[http://alidadasb.blogspot.co.uk/2011/12/enabling-jquery-autocomplete-with.html](http://alidadasb.blogspot.co.uk/2011/12/enabling-jquery-autocomplete-with.html)

Country.groovy

```
package rentspace
    class Country {
         String name
         static hasMany = [cities:City] 
    } 
```

城市.groovy

```
package rentspace

class City {
    //static belongsTo = [country:Country]
    static belogsTo = Country
    Country  country
    String name
    static constraints = {}
} 
```

普惠制页面：

```
<g:autoComplete id="countrySearch"
                action='autocompleteCountry'
                controller='any'
                domain='rentspace.Country'
                searchField='name'
                collectField='id'
                value=''
/>

<g:textField id="hiddenState"  name="hiddenState" value=""/>

<label>City:</label>
<g:autoComplete name="citySearch" id="citySearch"
                cid=""
                action='autocompleteCityAction'
                controller='any'
                domain='rentspace.City'
                searchField='name'
                value=''
/> 
```

AutoCompleteTagLib.groovy

```
package rentspace

class AutoCompleteTagLib {
 ..
                if (attrs.style) styles = " styles='${attrs.style}'"

        if (attrs.cid) 
           cid="&cid="+attrs.cid
        else
          cid=""

             .......

                out << "&order="+attrs.order
        out << ""+cid

                out << "&collectField="+attrs.collectField

        out << "',select: function(event, ui) {"
        out << "    \$('#hiddenState').val(ui.item.id);},"
        //out << "  \$('#citySearch').attr('cid',ui.item.id);},"
        out <<" search: function() {"
        out << "\$('#hiddenState').val('');"
        //out << "\$('#citySearch').attr('cid','');"
        out <<"}"   

                out << ", dataType: 'json'"
                out << "});"
        out << "    });"
        out << "</script>"

        }

        def autoCompleteHeader = {
                out << "<style>"
                out <<  ".ui-autocomplete-loading"
                out << "        { background: white url(${resource(dir:'images',file:'ajax-loader.gif')}) right center no-repeat   }"
                out << " </style>"
        }
} 
```

我的问题与 jquery 返回的双重值有关，如果我将值返回到隐藏或文本字段框，它似乎确实有效。我要做的是将国家/地区ID返回到第二个自动完成框是citySearch。因此，一旦用户自动完成国家/地区，国家/地区 id 将作为 cid='1' 或任何 id 返回到 citySearch 自动完成框的 cid 属性。

在标签库中，有一个段被注释掉，它成功地返回或更新 hiddenState 字段的值，但无论我如何尝试更新 cid 值都失败了？

```
 //out << "  \$('#citySearch').attr('cid',ui.item.id);}," 
```

有没有人成功地做这样的事情？

E2A：

[https://github.com/vahidhedayati/grailscountrycity](https://github.com/vahidhedayati/grailscountrycity)

项目可以从上面的链接下载，自述文件中有更多关于问题的信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:24:37.527

Alidad 在这里解决了问题： **{ countryid: \$('#hiddenField').val() }**

[https://github.com/alidadasb/CountryCityAutoComplete](https://github.com/alidadasb/CountryCityAutoComplete)

```
out << "\$('#" + attrs.id+"').autocomplete({ "
                    out << " source: "
                    out << " function(request, response) { "
                    out << " \$.getJSON(' "
                    out << createLink(link)
                    out << "?"
                    out << "term=' + request.term + '"
out << "&domain="+ attrs.domain
                    out << "&searchField="+attrs.searchField
                    out << "&max="+attrs.max
                    out << "&order="+attrs.order
                    out << "&collectField="+attrs.collectField
                    out << "', { countryid: \$('#hiddenField').val() }, "
                    out << " response); } "
                    out << ", dataType: 'json'"
                    out << "});});"
                    out << "</script>" 
```

工作版本可以在这里看到： http: [//countrycity.cloudfoundry.com](http://countrycity.cloudfoundry.com)

# html - 调试 Office 的任务窗格应用程序

> ID：13936220
> 
> 赞同：4
> 
> 时间：2012-12-18T15:29:42.517
> 
> 标签：html, css, visual-studio, ms-office, apps-for-office

我正在尝试调试我的 Office 应用程序，该应用程序在 Microsoft Excel 的任务窗格中运行。我正在使用 Visual Studio 2012 运行它。我想要的功能很简单 - 因为 Office 正在创建的所有应用程序都是 Internet Explorer 任务窗格，是否可以检查作用于每个 HTML 元素的 CSS，方式类似于萤火虫的作品？

能够单击 HTML 元素并知道 CSS 自动作用于该元素会非常有用。特别是对于大型项目。

有谁知道这怎么可能？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T03:00:30.253

西蒙，如果我明白你在问什么，在 Visual Studio 2012 中，你可以使用**Page Inspector**工具。在**解决方案资源管理器**中，右键单击任务窗格应用程序的 .html 页面，选择**Page Inspector**，然后单击**检查**。然后，您可以看到您在页面中单击的对象的相关 CSS。

# r - 条形图中的图例显示不正确

> ID：13936223
> 
> 赞同：21
> 
> 时间：2012-12-18T15:29:49.463
> 
> 标签：r, bar-chart, legend

```
heights1=c(5,5,4.5,4,4,4,4.5,2,4,4)

opar <- par(lwd = 0.3)

barplot(heights1,xlim=c(0,3), ylim=c(0,5),  width=0.1, 
main="Langauges(Verbal & Non-verbal)", 
names.arg=c("Spanish", "Speak" , "English","Speak", "Hindi", 
"Speak", "Arabic", "Speak",  "Body Lang", "Speak"), ylab="Skill level ", 
xlab="Language starting with mostly used", col=c("darkblue","red"),
cex.names=0.7,space=c(2,0,2,0,2,0,2,0,2,0))

legend("top",  c("darkblue","red"), c("reading/Writing", "Speaking")  ); 
```

蓝色是“读/写”，红色是“说话”。如何在图例中进行更正？（我不想在 barplot 函数中定义图例）

![在此处输入图像描述](../Images/98a04ec82fbc2cc4cc14f78a5bdea559.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-18T17:18:30.443

您可以将`fill`参数用于您的颜色。与大卫罗宾逊的回答一样，我也建议在这种情况下将图例放在右上角。

```
legend("topright", 
       legend = c("reading/Writing", "Speaking"), 
       fill = c("darkblue", "red")) 
```

![在此处输入图像描述](../Images/62f4e2b0b8b937861e9b1e568a377225.png)

* * *

查看其他一些问题，您可能还想在绘图*之前花一些时间将数据转换为更合适的形式。*

这是一个例子：

1.  这是您的数据：

    ```
    heights1 = c(5, 5, 4.5, 4, 4, 4, 4.5, 2, 4, 4) # Your data 
    ```

2.  这是您的`matrix`数据`dimnames`

    ```
    mydata <- matrix(heights1, ncol = 2, byrow = TRUE,
                     dimnames = list(c("Spanish", "English", "Hindi", 
                                       "Arabic", "Body Lang"),
                                     c("Reading/Writing", "Speaking")))
    mydata # Much more meaningful to look at than a simple vector
    #           Reading/Writing Speaking
    # Spanish               5.0        5
    # English               4.5        4
    # Hindi                 4.0        4
    # Arabic                4.5        2
    # Body Lang             4.0        4 
    ```

3.  定义您的颜色（可选，但如果您在每组中使用的不仅仅是一对条，则很有用）

    ```
    colors <- c("darkblue", "red") # Define the colors you're using 
    ```

4.  绘制您的数据，在顶部添加一点额外空间并抑制轴。不知道为什么您不想在此阶段包含图例，但可以通过添加以下参数轻松完成：`legend.text = TRUE, args.legend = list(x = "topright", bty = "n")`

    ```
    barplot(t(mydata), beside = TRUE, col = colors, 
            ylim = c(0, 6), axes = FALSE,
            xlab = "Language starting with mostly used",
            main = "Languages (Verbal & Non-verbal)") 
    ```

5.  重新引入您的 y 轴并添加您的图例

    ```
    axis(2, at = 0:5, labels = 0:5)
    legend("topright", colnames(mydata), fill = colors, bty = "n") 
    ```

    ![在此处输入图像描述](../Images/a295d5295375e9bf03c785fb6460a213.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T15:32:26.280

`legend`将您的线路更改为

```
legend("topright", c("reading/Writing", "Speaking"), col=c("darkblue","red"), lwd=10); 
```

该`lwd`论点说图例应该具有每种相应颜色的 10 像素粗线。最好使用`"topright"`而不是`"top"`在您的情况下使用，这样图例就不会出现在条形下方。

![在此处输入图像描述](../Images/25687d933dc078fe9296e8bdd4a25606.png)

# ruby-on-rails-3 - 如何在 Rails 中使用 respond_to 设置自定义 Flash

> ID：13936232
> 
> 赞同：5
> 
> 时间：2012-12-18T15:30:27.010
> 
> 标签：ruby-on-rails-3, respond-to

在`respond_to`你可以`flash[:notice]`这样设置

```
respond_to do |format|
  format.html { redirect_to photo_path(photo), :notice => 'The photos was saved') }
  format.xml  { render :xml => photo, :status => :created}
end 
```

我正在尝试设置 flash[:success]`:success => "yay"`但它不起作用。

难道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T15:35:00.843

您应该以不同的方式使用 redirect_to ：

```
redirect_to photo_path(photo), :flash => { :success => "Yeepee!" } 
```

您可以直接使用的唯一闪光灯是

*   ：注意
*   ：警报
*   ：错误

希望有帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-16T20:34:46.463

从 Rails 4 开始，您可以直接`:success`在`redirect_to`.

只需添加这一行：

```
# in app/controllers/application_controller.rb

class ApplicationController < ActionController::Base
    [...]

    add_flash_types :error, :success, :info

    [...] 
```

如果没有这一行，在 respond_to 中，:notice 会产生 flash，但 :success 不起作用。

为此，请向[米兰蒙达尔的帖子致敬](https://coderwall.com/p/-2klvg/custom-flash-helper-in-rails4)！

# tfs - TFS 报告：如何按团队项目显示变更集列表？

> ID：13936238
> 
> 赞同：-1
> 
> 时间：2012-12-18T15:30:55.980
> 
> 标签：tfs, report

有谁知道如何为 Team Foundation Server 创建一个查询，该查询将显示带有团队项目名称的变更集记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:01:47.273

看看创建一个 TFS 报告来报告与不同项目相关的变更集：

[创建和自定义 TFS 报告](http://msdn.microsoft.com/en-us/library/ff647430.aspx)

# java - SSO 身份验证，响应始终为 NTLM

> ID：13936243
> 
> 赞同：2
> 
> 时间：2012-12-18T15:31:02.923
> 
> 标签：java, kerberos, spnego

我正在尝试在我们正在开发的 Intranet 应用程序上实现 SSO。我为此使用[SPNEGO 。](http://spnego.sourceforge.net/)现在我在配置 SSO 时遇到了一些麻烦，希望这里有人能够帮助我。

设置是这样的：

1.  带有 tomcat 的 Linux 服务器为 Intranet 应用程序提供服务
2.  Windows Server 2008 作为域控制器 (Active Directory)
3.  带有 IE9 和 Firefox 的 Windows 7 客户端

当我打开 Intranet 应用程序时，我看到一个从客户端到 tomcat 服务器的 GET 请求。tomcat服务器和SpnegoFilter的第一个响应是401未授权，这是正确的，因为客户端需要进行身份验证。

```
806 6.117724    192.168.65.50   192.168.65.50   HTTP    284 HTTP/1.1 401 Unauthorized 
WWW-Authenticate: Negotiate\r\n 
```

然后客户端的响应是带有标志 NTLMSSP_NEGOTIATE 的 GET 请求。在这里它打破了。我不期望 NTLM 响应，而是 kerberos/spnego 响应。不知何故，我无法弄清楚如何将正确的响应发送到 tomcat 服务器。

```
808 6.123277    192.168.65.50   192.168.65.50   HTTP    637 GET / HTTP/1.1 , NTLMSSP_NEGOTIATE 
```

默认情况下，SPNEGO 不支持 NTLM，因此我在日志中得到以下条目：

> java.lang.UnsupportedOperationException：指定了 NTLM。降级为基本身份验证（和/或 SSL），但不支持降级。

所以我做错了，但是在摆弄配置和策略一天之后，我就是不知道它是什么。

希望得到一些回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T21:34:24.647

Kerberos 不适用于 IP，请使用完全限定的域名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-20T17:57:58.920

您是否注册了 SPN 并且是否加入了客户端域？WWW-Authenticate: Negotiate 将告诉 Web 浏览器尝试使用 kerberos。浏览器根据地址栏中的 URL 将该请求交给操作系统 (SSPI)。该 URL 必须在 AD 中有一个 SPN。如上所述，在您的 URL 中使用 IP 更为复杂，但可以做到。如果您的客户端未加入域，则需要进行额外的配置工作才能使其联系您的 AD KDC。Firefox 也需要额外的设置。用 IE 解决这个问题，以消除它，当问题解决后他们会回到 FF。

# php - php重定向索尼维他？

> ID：13936246
> 
> 赞同：1
> 
> 时间：2012-12-18T15:31:08.083
> 
> 标签：php, redirect, user-agent

我正在开发一个包含 Flash 组件的站点（不是由我创建的）。似乎最初的创建者有一个 php 重定向脚本，它应该将 iPad 和 iPhone 重定向到一个没有 Flash 组件的网站版本。我实际上不确定这是否有效，因为我没有任何东西可以测试它。

我真正的问题是我还需要它来检测 Sony Vita 浏览器并重定向到没有 Flash 组件的站点版本。但这有点超出我的深度，我从来没有很好地使用 php，而且我从来没有做过这样的事情。

这是当前的重定向代码：

```
<?php
$ua=$_SERVER['HTTP_USER_AGENT'];

//スマフォ
if((strpos($ua,'iPhone')!==false)||(strpos($ua,'iPod')!==false)||(strpos($ua,'Android')!==false)) {
header("location: top_i.php");

//IPAD
}elseif(strpos($_SERVER['HTTP_USER_AGENT'],'iPad')){
header("location: top_i.php");

//PC
}else{
header("location: top.php");
}
?> 
```

谁能帮助解释我需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:38:18.730

添加

```
|| (strpos($ua,'Playstation Vita')!==false) 
```

旁边 (strpos($ua,'Android')!==false)

应该给你类似的东西

```
if((strpos($ua,'iPhone')!==false)||(strpos($ua,'iPod')!==false)||(strpos($ua,'Android')!==false) || (strpos($ua,'Playstation Vita')!==false)) 
```

或添加新的 if 语句

```
elseif(strpos($_SERVER['HTTP_USER_AGENT'],'Playstation Vita')){
   header("location: top_i.php");
} 
```

在最后的“其他”之前

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:42:30.903

Playstation Vita 浏览器使用自定义用户代理字符串，所以它*应该*是这样的代码：

```
<?php
$ua=$_SERVER['HTTP_USER_AGENT'];

//スマフォ
if ((strpos($ua,'iPhone')!==false) || (strpos($ua,'iPod')!==false) || (strpos($ua,'Android')!==false)) {
  header("location: top_i.php");
//IPAD
} elseif (strpos($_SERVER['HTTP_USER_AGENT'],'iPad')){
  header("location: top_i.php");
} elseif (strpos($_SERVER['HTTP_USER_AGENT'],'Playstation Vita')){
  header("location: top_i.php"); // or some other page you like to redirect to

} else {
  //PC
  header("location: top.php");
}
?> 
```

# mysql - 从具有相同结构的不同表中检索最小值和最大值

> ID：13936247
> 
> 赞同：0
> 
> 时间：2012-12-18T15:31:12.627
> 
> 标签：mysql

我有一些具有相同结构的日志表。每个表都与一个站点相关，并且有数十亿个条目。这种拆分的原因是为了进行快速高效的查询，因为 99.99% 的查询都与站点相关。

但是此时，我想检索这些表的一列的最小值和最大值？

我无法编写 SQL 请求。我应该使用`UNION`吗？

我只是在寻找请求概念，而不是最终的 SQL 请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:36:09.890

您可以使用 UNION，是的。这样的事情应该做：

```
SELECT MAX(PartialMax) AS TotalMax
  FROM 
  ( SELECT MAX(YourColumn) AS PartialMax FROM FirstTable UNION ALL SELECT MAX(YourColumn) AS PartialMax FROM SecondTable ) AS X; 
```

如果您对要在其中找到 MAX 的列有索引，则应该具有非常好的性能，因为查询应该寻找该列上索引的末尾以非常快速地找到最大值。如果该列上没有索引，则查询必须扫描整个表以找到最大值，因为没有任何东西固有地对其进行排序。

**添加了一些细节来解决对“巨大查询”的担忧。**

我不确定你所说的“巨大”是什么意思。您可以创建一个为您执行 UNION 的 VIEW；然后，您使用视图，它会使查询变得非常小：

```
SELECT MAX(YourColumn) FROM YourView; 
```

但这只是针对查询文本的大小进行了优化。为什么您认为为此进行优化很重要？VIEW 有助于维护——如果您添加或删除分区，只需适当地修复视图。但是长的查询文本应该不是问题。

或者“巨大”，您是否担心查询将执行的 I/O 量？除了确保每个表都有一个索引`YourColumn`以便可以非常快速地找到每个分区上的最大值之外，没有什么能有这么大的帮助。

# php - Wordpress 获取多个类别的帖子

> ID：13936248
> 
> 赞同：1
> 
> 时间：2012-12-18T15:31:12.687
> 
> 标签：php, wordpress

我想在 WP_Query 函数中使用“category__and”过滤器来发布一些帖子，但我什么也没得到！

这是我的代码：

```
$query_args = array( 'category__and' => array(44,43), 'posts_per_page' => 9, 'no_found_rows' => 1, 'post_status' => 'publish', 'post_type' => 'product');
$r = new WP_Query($query_args);
if ($r->have_posts()) { ............ 
```

重要提示：我在 44 和 43 两个类别中都有帖子。当我删除“类别__and”时，我会收到所有帖子。

# firefox - Firefox 中的 chrome.webRequest.onHeadersReceived.addListener

> ID：13936249
> 
> 赞同：3
> 
> 时间：2012-12-18T15:31:14.947
> 
> 标签：firefox, firefox-addon, add-on

我正在为 Firefox 做一个扩展，并且我接听了对 URL 的调用，因为在运行对 URL 的调用时，我可以在 Firefox 中捕获 http 请求。

例如在谷歌浏览器上的事件：chrome.webRequest.onHeadersReceived.addListener (

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T22:08:27.453

使用 plain `XMLHttpRequest`，当从某个 chrome 特权（系统主体）位置运行时，它允许在不遵守同源策略的情况下访问所有资源，就像 SDK`request`模块不遵守它一样。

*   SDK：在 lib/ 模块中通过

    ```
    const {XMLHttpRequest} = require("sdk/net/xhr");
    ```

*   XUL 覆盖/窗口、ChromeWorker：已经有一个全局`XMLHttpRequest`构造函数。

*   JS代码模块等：

    ```
    Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"].
      createInstance(Components.interfaces.nsIXMLHttpRequest);
    ```

从那里你可以使用来`onreadystatechange`寻找一个`.readyState`。`HEADERS_RECEIVED`请参阅[XMLHttpRequest 文档](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)。

要让拒绝第三方 Cookie 的用户使用 Cookie，您需要[`forceAllowThirdPartyCookie`](http://mxr.mozilla.org/mozilla-release/source/addon-sdk/source/lib/sdk/net/xhr.js)在 SDK 中使用或以其他方式使用：

```
if (xhr_instance.channel instanceof Components.interfaces.nsIHttpChannelInternal)
  xhr_instance.channel.forceAllowThirdPartyCookie = true;
```

# r - 在 Fedora 14 上安装 R-2.15.2 时遇到问题

> ID：13936254
> 
> 赞同：1
> 
> 时间：2012-12-18T15:31:19.723
> 
> 标签：r, makefile, fedora

我需要安装最新版本**R-2.15.2**。我尝试使用

```
blah> sudo yum install R 
```

安装 R，但出于某种原因（可能是因为它是 Fedora 的旧版本？）我的系统认为 R 版本**13**是最新的。因此，我从 R 的站点下载了 .tar.gz 文件并使用了以下内容：

```
blah> tar -xvf R-2.15.2.tar.gz 
```

这样就成功解压了文件。然后我跑了：

```
blah> ./configure

blah/R-2.15.2> ls

ChangeLog     COPYING  Makeconf.in  ONEWS   src       VERSION-NICK
config.log    doc      Makefile.fw  OONEWS  SVN-REVISION
config.site   etc      Makefile.in  po      tests
configure     INSTALL  NEWS     README  tools
configure.ac  m4       NEWS.pdf     share   VERSION 
```

如您所见，生成文件存在。但是，当我在 R 文件夹中运行“make”时，出现以下错误：

```
blah/R-2.15.2> make

make: No targets specified and no makefile found.  Stop. 
```

有什么办法可以解决这个问题吗？我猜人们会建议更新 Fedora，但还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:44:20.047

您应该检查命令**./configure**是否成功终止。如果**./configure**返回没有错误，应该有一个名为**Makefile**的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:01:51.347

评论似乎很长，所以发布了这个答案。

您应该只看到**Makefile** - 没有 Makefile.in、Makefile.fw 或 Makefile.whatdoyouwant - 只有**Makefile**。此文件在**./configure**成功后出现。如果您只看到**Makefile** - 那么**./configure**不成功。因此，请阅读它的输出并尝试了解它需要以正确的方式完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T14:53:49.940

在 R-2.15.2 目录而不是 blah 目录中运行 ./configure。如果它运行，您应该从 ./configure 获得整个输出流。一旦完成， make 应该可以工作。

# php - 从 MYSQL 表中删除重复记录

> ID：13936255
> 
> 赞同：1
> 
> 时间：2012-12-18T15:31:20.750
> 
> 标签：php, mysql, sql

> **可能重复：**
> [如何从 MySQL 表中删除重复的行](https://stackoverflow.com/questions/5770228/how-to-delete-duplicate-rows-from-a-mysql-table)

我一直在互联网上寻找一个体面的答案，但我仍然不明白如何删除重复的行。我在下面有一个查询，有人可以告诉我如何正确实现删除重复行的功能吗？

有任何想法吗？

```
$bbc_values = array('http://www.bbc.co.uk/news/health-', 
    'http://www.bbc.co.uk/news/politics-', 
    'http://www.bbc.co.uk/news/uk-', 
    'http://www.bbc.co.uk/news/technology-', 
    'http://www.bbc.co.uk/news/world-', 
    'http://www.bbc.co.uk/news/england-', 
    'http://www.bbc.co.uk/news/northern_ireland-', 
    'http://www.bbc.co.uk/news/scotland-', 
    'http://www.bbc.co.uk/news/wales-', 
    'http://www.bbc.co.uk/news/business-',
    'http://www.bbc.co.uk/news/education-',
    'http://www.bbc.co.uk/news/science_and_enviroment-',
    'http://www.bbc.co.uk/news/entertainment_and_arts-');

// BBC Algorithm
foreach ($links as $link) {
    $output = array(
        "title"       => Titles($link), //dont know what Titles is, variable or string?
        "description" => getMetas($link),
        "keywords" => getKeywords($link),
        "link"        => $link
    );
    if (empty($output["description"])) {
        $output["description"] = getWord($link);
    }
    $data = '"' . implode('" , "', $output) . '"';

    if (substr_in_array($output, $bbc_values)) {
        $result = mysql_query("INSERT INTO news_story (`title`, `description`, `keywords`, `link`)    VALUES (" . $data . ")");
        $delete = mysql_query("DELETE FROM news_story WHERE link='{$output['link']}'");

    }
    if (!substr_in_array($output, $bbc_values)) {
        echo "Does not equal data";
    } 
```

# imagemagick - ImageMagick：运行转换时出错：转换：无法读取字体

> ID：13936256
> 
> 赞同：74
> 
> 时间：2012-12-18T15:31:30.343
> 
> 标签：imagemagick, osx-mountain-lion

我在 Mountain Lion 上并使用 Homebrew 安装了 ImageMagick（minimagick 也在我的 Gemfile 中，但我认为这无关紧要）。[SimpleCaptcha](https://github.com/galetahub/simple-captcha)在 Rails 应用程序中使用它来创建验证码。

但是，由于此错误，未创建图像：

```
Error while running convert: convert: unable to read font `/usr/local/share/ghostscript/fonts/n019003l.pfb' @ error/annotate.c/RenderFreetype/1123.
convert: Postscript delegate failed `/var/folders/gd/n7rzfhkd5jd0ws8jnzsz34hr0000gn/T/magick-vzHHz4ZP': No such file or directory @ error/ps.c/ReadPSImage/830.
convert: no images defined `/var/folders/gd/n7rzfhkd5jd0ws8jnzsz34hr0000gn/T/simple_captcha20121218-64930-1thtfpf.jpg' @ error/convert.c/ConvertImageCommand/3032. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-12-18T15:38:18.553

看起来你缺少[ghostscript](http://www.ghostscript.com/)。如果您使用[Homebrew](http://mxcl.github.com/homebrew/)，您可以通过以下方式安装它：

```
$ brew install ghostscript 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-14T11:08:49.673

如果您使用的是 Ubuntu 或在带有 Ubuntu 的 docker 中删除并重新安装 ghostscript 包将解决您的问题

`apt remove ghostscript`
`apt install ghostscript`

# java - AppEngine 上的一个应用程序，多个域

> ID：13936262
> 
> 赞同：0
> 
> 时间：2012-12-18T15:31:54.937
> 
> 标签：java, asp.net, google-app-engine

我搜索过，没有找到之前提出的这个问题（它与[AppEngine Instance 的许多自定义域](https://stackoverflow.com/questions/1990041/many-custom-domains-for-appengine-instance)不同），但如果我错了，请纠正我。

我以前使用 ASP.NET 构建了一个 Web 应用程序，然后被多家公司使用。我使用相同的代码库并将其部署到相同的 IIS 网站，但每个公司都有自己的数据库。收到请求后，我检查请求的主机头并将其映射到内容数据库（映射包含在共享配置数据库中）。

这给了我一个应用程序来维护、修复和部署错误，而不同公司的实际数据完全分离在不同的数据库中。导出一个公司的数据很容易，我觉得不会意外混合不同公司的数据很安全。

我现在正在考虑用 Java/GWT 重写这个 webapp 并将它发布到 AppEngine 上。我的问题是：我能做些什么来模仿 AppEngine 上的相同行为？我应该每家公司有一个应用程序吗？这意味着我需要多次部署同一个应用程序，每个公司的站点一次。这也意味着每个应用程序至少每月花费 9 美元（我认为 AppEngine 的免费限制还不够）。是否可以创建一个应用程序，然后将其映射到多个自定义域（就像我今天在 .NET 应用程序中所做的那样）？

据我了解 Google Apps 的想法，管理员应该能够使用 AppEngine 上的应用 ID 将云应用添加到他/她的域，然后开始使用它。是否支持为已为我的应用注册的不同 Google Apps 域启用数据分离？我可以像在我的 .NET 应用程序中那样以编程方式检查主机头并对其进行操作吗？我不希望一个域数据可用于其他域（事实上，在我的情况下这将是非常糟糕的:)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:40:24.260

您可以使用[命名空间](https://developers.google.com/appengine/docs/java/multitenancy/multitenancy)在同一应用程序实例中创建数据的逻辑分离（也称为多租户）。

# c# - 为什么这个正则表达式不正确匹配？

> ID：13936268
> 
> 赞同：2
> 
> 时间：2012-12-18T15:32:25.217
> 
> 标签：c#, .net, regex

我基本上有这个：

```
Regex rx = new Regex(@"\$(?:(\$)|(\{(?<ex>.*?)\}))");
string s = "${P#(n*8+1)!=0$$P}${P#(n*8+1)!=0$N/A$[n*8+1]}";

Match m = rx.Match(s, 0); 
```

第一场比赛是`"${P#(n*8+1)!=0$N/A$[n*8+1]}"`应该的`"${P#(n*8+1)!=0$$P}"`。如果我在第一个之前放一个额外的空间`'$'`，它就可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:38:10.507

您正在交换论点。`Regex.IsMatch`签名是：

```
public static bool IsMatch(string input, string pattern) 
```

编辑：以下代码`True`为我打印两次。

```
var p = @"\$(?:(\$)|(\{(?<ex>.*?)\}))";
var regex = new Regex(p);
Console.WriteLine(regex.IsMatch(" ${foo}"));
Console.WriteLine(regex.IsMatch("${foo}")); 
```

EDIT2：删除了以前的编辑，比赛对我有用。

# javascript - 某些 dom 元素更改高度时的 jQuery 事件

> ID：13936273
> 
> 赞同：5
> 
> 时间：2012-12-18T15:32:45.920
> 
> 标签：javascript, jquery, dom, javascript-events

当某些（任何人）元素改变自己的高度时，有什么方法可以设置 jquery 事件？

我真的不知道我怎么能解雇这个

谢谢大家会帮助我

像：

```
$('body *').onHeightChange(function(){

//do somenthing
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T15:37:23.390

每当您执行更改元素高度的操作时，都会触发一个事件。

```
$("#somelement").slideDown().trigger("heightchange"); 
```

现在您可以绑定到它：

```
$("body").on("heightchange",function(e){
    var $el = $(e.target); // the element that has a new height.
}); 
```

您甚至可以对许多可以更改高度的 jQuery 方法进行猴子补丁，并让它们在使用该方法之前和之后测试高度并相应地触发事件。下面是一个未经测试的例子

```
var topatch = ["slideup","slidedown","height","width","attr","css","animate"];
$.each(topatch,function(i,method){
    var oldfn = $.fn[method];
    $.fn[method] = function(){
        return this.each(function(){
            var $this = $(this), currHeight = $this.css("height"),
                result = oldfn.apply($this,arguments); 
            // check for promise object to deal with animations
            if ( $.isFunction(result.promise) ) {
                result.promise().done(function(){
                    if ( currHeight != $this.css("height") ) {
                        $this.trigger("heightchange");
                    }
                });
                return;
            }
            if ( currHeight != $this.css("height") ) {
                $this.trigger("heightchange");
            }            
        });
    };
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:34:40.453

我认为您可以使用的唯一事件是“DOMSubtreeModified”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:37:31.130

你应该使用which `jQuery mutate`has handlers for`width`等`height`

[http://www.jqui.net/jquery-projects/jquery-mutate-official/](http://www.jqui.net/jquery-projects/jquery-mutate-official/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T16:44:00.400

我想了想，我知道你已经有了答案，触发器是个好主意，但如果你真的想要一个***所有***可能元素的简单插件，你可以使用我在下面做的。它只是一个简单的 jQuery 插件，在高度发生变化时使用计时器和回调函数。请参阅小提琴示例使用。*警告*页面上的元素过多可能会导致问题。

# [jsFiddle](http://jsfiddle.net/SpYk3/JUHR4/)

> **脏插件**

```
(function($) {
    if (!$.onHeightChange) {
        $.extend({  
            onHeightChange: function(callBack) {
                if (typeof callBack == "string") {
                    switch (callBack.toLowerCase()) {
                        case "play":
                            $.onHeightChange.init();
                            break;
                        case "stop":
                            try { clearInterval($.onHeightChange.timer); } catch(err) { };
                            break;
                    }
                }
                else if (typeof callBack == "function" || callBack == undefined)
                {
                    $.onHeightChange.callback = callBack;
                    $.onHeightChange.init(callBack);
                }
            }
        });
        $.onHeightChange.timer;
        $.onHeightChange.init = function(callBack) {
            $("body,body *").each(function(i) {
                $(this).data("onHeightChange", { height: $(this).height(), outer: $(this).outerHeight() });
            });
            try { clearInterval($.onHeightChange.timer); } catch(err) { };
            $.onHeightChange.timer = setInterval(function() {
                $("body, body *").each(function(i) {
                    if ($(this).data("onHeightChange").height != $(this).height()) {
                        $(this).data("onHeightChange", { height: $(this).height(), outer: $(this).outerHeight() });
                        if ($.onHeightChange['callback']) {
                            if (typeof $.onHeightChange.callback == "function") return $.onHeightChange.callback .call(this, $(this), $(this).height(), $(this).outerHeight());
                        }
                    }
                });
            }, 100);
        };
    }
})(jQuery); 
```

> *示例使用*

```
$.onHeightChange(function(ele, height, outer) {
    console.log(ele, height, outer);
});
/*---------------------------------------------*/
$.onHeightChange("stop");
$.onHeightChange("play"); 
```

# perl - 是否有 Selenium IDE 的导出器插件可以输出 Remote::Driver Perl 脚本？

> ID：13936277
> 
> 赞同：1
> 
> 时间：2012-12-18T15:32:59.947
> 
> 标签：perl, webdriver, selenium-webdriver, selenium-ide

到目前为止，我只看到了为我们提供`Test::WWW::Selenium`脚本的导出器。

我担心这可能不是问的正确地方；如果这是真的，请指出我正确的方向。要校准你的 snark 过滤器，是的，我试过谷歌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-08T18:36:38.763

在提到的 perl 模块的源代码中，有一个示例 IDE 格式化程序代码：[https ://github.com/gempesaw/Selenium-Remote-Driver/blob/master/ide-plugin.js](https://github.com/gempesaw/Selenium-Remote-Driver/blob/master/ide-plugin.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:01:25.520

如果您在 google 上搜索过您在 SO 上输入的内容，您会发现这是您的第一个结果 [https://addons.mozilla.org/en-us/firefox/addon/selenium-ide-perl-formatter/](https://addons.mozilla.org/en-us/firefox/addon/selenium-ide-perl-formatter/)

# wordpress - 卷曲 POST 请求安装 wordpress

> ID：13936282
> 
> 赞同：3
> 
> 时间：2012-12-18T15:33:17.920
> 
> 标签：wordpress, shell, post, curl

我试图在 shell 中发出一个 post 请求来调用 wordpress 安装，但 wordpress 只是告诉我“你必须提供一个电子邮件地址”。这是我所拥有的：

```
curl -X POST -A "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:12.0) Gecko/20100101 Firefox/12.0" -e "http://dev.example.com/yeshello/wp-admin/install.php?step=2" -H "Content-Type:application/x-www-form-urlencoded" -H "Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8" -H "Accept-Encoding:gzip, deflate" --data "?step=2&weblog_title=yeshello&user_name=admin&admin_password=admin&admin_password2=admin&admin_email=mathias%40example.com&Submit=Install+WordPress" http://dev.example.com/yeshello/wp-admin/install.php 
```

我设法让它在一个名为 Postman 的 Chrome 插件中工作，这是我在那里设置的：

## 标头

[用户代理：Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:12.0) Gecko/20100101 Firefox/12.0 参考： http](http://dev.feed.no/yeshello/wp-admin/install.php?step=2) ://dev.feed.no/yeshello/wp-admin/install.php?step= [2](http://dev.feed.no/yeshello/wp-admin/install.php?step=2) Content-Type: application/x-www-form-urlencoded Accept: text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8 Accept-Encoding: gzip, deflate

## 生的

*这是原始数据，插件有一个字段支持*

step=2&weblog_title=yeshello&user_name=admin&admin_password=admin&admin_password2=admin&admin_email=mathias%40feed.no&Submit=Install+WordPress

## 网址

*最后有一个 url 字段*

[http://dev.example.com/yeshello/wp-admin/install.php?step=2&weblog_title=yeshello&user_name=admin&admin_password=admin&admin_password2=admin&admin_email=mathias@feed.no&Submit=Install+WordPress](http://dev.example.com/yeshello/wp-admin/install.php?step=2&weblog_title=yeshello&user_name=admin&admin_password=admin&admin_password2=admin&admin_email=mathias@feed.no&Submit=Install+WordPress)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:33:17.920

当我编写 URL 标题时，我尝试在 curl 命令中使用整个 url，如下所示：

```
curl -X POST -A "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:12.0) Gecko/20100101 Firefox/12.0" -e "http://dev.example.com/yeshello/wp-admin/install.php?step=2" -H "Content-Type:application/x-www-form-urlencoded" -H "Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8" -H "Accept-Encoding:gzip, deflate" --data "?step=2&weblog_title=yeshello&user_name=admin&admin_password=admin&admin_password2=admin&admin_email=mathias%40example.com&Submit=Install+WordPress" http://dev.example.com/yeshello/wp-admin/install.php?step=2&weblog_title=yeshello&user_name=admin&admin_password=admin&admin_password2=admin&admin_email=mathias@example.com&Submit=Install+WordPress 
```

它奏效了 :) 但我很生气，为什么不发布这个呢。希望它可以帮助某人！如果有人想澄清为什么必须这样做，我很想听听。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T15:27:04.500

这是原始答案的简化版本。谢谢你的努力，它有帮助。 `curl --data-urlencode "weblog_title=MY_BLOG_NAME" \ --data-urlencode "user_name=MYUSERNAME" \ --data-urlencode "admin_password=MYPASSWORD" \ --data-urlencode "admin_password2=MYPASSWORD" \ --data-urlencode "admin_email=MY@EMAIL.COM" \ --data-urlencode "Submit=Install+WordPress" \ http://wordpress_host/path_if_any/wp-admin/install.php?step=2` 这是我能想到的最简化的。我看不出有任何理由更改用户代理字符串、设置引荐来源网址并在 POST 和 GET 数据中包含所有参数。使用`--data`和/或时，Curl 设置正确的内容标题`--data-urlencode`。

有趣的部分实际上是它`step=2`应该是一个 GET 变量，而其他一切都需要是 POST 数据。

# android - 较小的选项卡 Monodroid

> ID：13936285
> 
> 赞同：0
> 
> 时间：2012-12-18T15:33:26.193
> 
> 标签：android, android-layout, xamarin.android

在我的应用程序中，我有一个选项卡主机和选项卡等问题。我的问题是，我想要高度较低的选项卡。你不知道我的意思吗？这里： [http ://www.pic-upload.de/view-17360783/Tabs.png.html](http://www.pic-upload.de/view-17360783/Tabs.png.html)

我的标签是 30dp 高，至少这是我写入 height 属性的内容，但是正如您所看到的，这些标签不会缩小到那个大小。我该怎么办，“真实”选项卡上方的这个蓝色区域会消失？

ps：没有任何元素，直到带有“0.25”和“Erhardt Schulze”的列表，选项卡将具有正常高度。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clipChildren="false"
    android:isScrollContainer="true"
    android:minWidth="25px"
    android:minHeight="25px">
    <TabHost
        android:layout_width="fill_parent"
        android:id="@android:id/tabhost"
        android:layout_weight="12"
        android:layout_height="wrap_content"
        android:clipChildren="false">
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:id="@+id/linearLayout1"
            android:clipChildren="false">
            <LinearLayout
                android:orientation="vertical"
                android:minWidth="25px"
                android:minHeight="25px"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:id="@+id/linearLayout5"
                android:gravity="top"
                android:layout_weight="1"
                android:clipChildren="false"
                android:isScrollContainer="true">
                <LinearLayout
                    android:orientation="vertical"
                    android:minWidth="25px"
                    android:minHeight="25px"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:id="@+id/linearLayout3">
                    <TableLayout
                        android:minWidth="25px"
                        android:minHeight="25px"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:id="@+id/tableLayout1">
                        <TableRow
                            android:id="@+id/tableRow1">
                            <TextView
                                android:text="@string/UTlbEqID"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:id="@+id/lbEqID"
                                android:layout_column="0"
                                android:layout_weight="1" />
                            <TextView
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:id="@+id/lbEqIDVar"
                                android:hint="wie sieht dass denn aus?"
                                android:layout_column="1"
                                android:gravity="right"
                                android:layout_weight="1" />
                        </TableRow>
                        <TableRow
                            android:id="@+id/tableRow2">
                            <TextView
                                android:text="@string/UTlbEqDesc"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:id="@+id/lbEqDesc"
                                android:layout_column="0"
                                android:layout_weight="1" />
                            <TextView
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:id="@+id/lbEqDescVar"
                                android:hint="wie sieht dass denn aus?"
                                android:layout_column="1"
                                android:layout_weight="1"
                                android:gravity="right" />
                        </TableRow>
                        <TableRow
                            android:id="@+id/tableRow3">
                            <TextView
                                android:text="@string/UTlbTaskID"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:id="@+id/lbTaskID"
                                android:layout_column="0"
                                android:layout_weight="1" />
                            <TextView
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:id="@+id/lbTaskIDVar"
                                android:hint="wie sieht dass denn aus?"
                                android:layout_column="1"
                                android:layout_weight="1"
                                android:gravity="right" />
                        </TableRow>
                        <TableRow
                            android:id="@+id/tableRow5">
                            <TextView
                                android:text="@string/UTlbTaskDesc"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:id="@+id/lbTaskDesc"
                                android:layout_column="0"
                                android:layout_weight="1" />
                            <TextView
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:id="@+id/lbTaskDescVar"
                                android:hint="wie sieht dass denn aus?"
                                android:layout_column="1"
                                android:layout_weight="1"
                                android:gravity="right" />
                        </TableRow>
                        <TableRow
                            android:id="@+id/tableRow4">
                            <TextView
                                android:text="@string/UTlbTaskDate"
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:id="@+id/lbTaskDate"
                                android:layout_column="0"
                                android:layout_weight="1" />
                            <TextView
                                android:textAppearance="?android:attr/textAppearanceSmall"
                                android:id="@+id/lbTaskDateVar"
                                android:hint="wie sieht dass denn aus?"
                                android:layout_column="1"
                                android:layout_weight="1"
                                android:gravity="right" />
                        </TableRow>
                    </TableLayout>
                </LinearLayout>
                <FrameLayout
                    android:id="@android:id/tabcontent"
                    android:layout_width="match_parent"
                    android:layout_height="fill_parent"
                    android:minWidth="25px"
                    android:minHeight="25px"
                    android:clipChildren="false" />
            </LinearLayout>
            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="bottom"
                android:tabStripEnabled="false" />
        </LinearLayout>
    </TabHost>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:53:19.230

我认为您的部分问题可能是由于一些 xml 嵌套。我不确定您包含的表格是否应该在您的标签主机上方或下方，但这是上面表格的示例。

```
<?xml version="1.0" encoding="utf-8"?>
     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clipChildren="false"
    android:isScrollContainer="true"
    android:minWidth="25px"
    android:minHeight="25px">
    <LinearLayout
        android:orientation="vertical"
        android:minWidth="25px"
        android:minHeight="25px"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/linearLayout5"
        android:gravity="top"
        android:layout_weight="1"
        android:clipChildren="false"
        android:isScrollContainer="true">
        <LinearLayout
            android:orientation="vertical"
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/linearLayout3">
            <TableLayout
                android:minWidth="25px"
                android:minHeight="25px"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:id="@+id/tableLayout1">
                <TableRow
                    android:id="@+id/tableRow1">
                    <TextView
                        android:text="@string/UTlbEqID"
                        android:textAppearance="?android:attr/textAppearanceSmall"
                        android:id="@+id/lbEqID"
                        android:layout_column="0"
                        android:layout_weight="1" />
                    <TextView
                        android:textAppearance="?android:attr/textAppearanceSmall"
                        android:id="@+id/lbEqIDVar"
                        android:hint="wie sieht dass denn aus?"
                        android:layout_column="1"
                        android:gravity="right"
                        android:layout_weight="1" />
                </TableRow>
                <TableRow
                    android:id="@+id/tableRow2">
                    <TextView
                        android:text="@string/UTlbEqDesc"
                        android:textAppearance="?android:attr/textAppearanceSmall"
                        android:id="@+id/lbEqDesc"
                        android:layout_column="0"
                        android:layout_weight="1" />
                    <TextView
                        android:textAppearance="?android:attr/textAppearanceSmall"
                        android:id="@+id/lbEqDescVar"
                        android:hint="wie sieht dass denn aus?"
                        android:layout_column="1"
                        android:layout_weight="1"
                        android:gravity="right" />
                </TableRow>
                <TableRow
                    android:id="@+id/tableRow3">
                    <TextView
                        android:text="@string/UTlbTaskID"
                        android:textAppearance="?android:attr/textAppearanceSmall"
                        android:id="@+id/lbTaskID"
                        android:layout_column="0"
                        android:layout_weight="1" />
                    <TextView
                        android:textAppearance="?android:attr/textAppearanceSmall"
                        android:id="@+id/lbTaskIDVar"
                        android:hint="wie sieht dass denn aus?"
                        android:layout_column="1"
                        android:layout_weight="1"
                        android:gravity="right" />
                </TableRow>
                <TableRow
                    android:id="@+id/tableRow5">
                    <TextView
                        android:text="@string/UTlbTaskDesc"
                        android:textAppearance="?android:attr/textAppearanceSmall"
                        android:id="@+id/lbTaskDesc"
                        android:layout_column="0"
                        android:layout_weight="1" />
                    <TextView
                        android:textAppearance="?android:attr/textAppearanceSmall"
                        android:id="@+id/lbTaskDescVar"
                        android:hint="wie sieht dass denn aus?"
                        android:layout_column="1"
                        android:layout_weight="1"
                        android:gravity="right" />
                </TableRow>
                <TableRow
                    android:id="@+id/tableRow4">
                    <TextView
                        android:text="@string/UTlbTaskDate"
                        android:textAppearance="?android:attr/textAppearanceSmall"
                        android:id="@+id/lbTaskDate"
                        android:layout_column="0"
                        android:layout_weight="1" />
                    <TextView
                        android:textAppearance="?android:attr/textAppearanceSmall"
                        android:id="@+id/lbTaskDateVar"
                        android:hint="wie sieht dass denn aus?"
                        android:layout_column="1"
                        android:layout_weight="1"
                        android:gravity="right" />
                </TableRow>
            </TableLayout>
        </LinearLayout>
    </LinearLayout>
    <TabHost
        android:layout_width="fill_parent"
        android:id="@android:id/tabhost"
        android:layout_weight="12"
        android:layout_height="wrap_content"
        android:clipChildren="false">
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical"
            android:id="@+id/linearLayout1"
            android:clipChildren="false">
            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="bottom"
                android:tabStripEnabled="false" />
            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:minWidth="25px"
                android:minHeight="25px"
                android:clipChildren="false" />
        </LinearLayout>
    </TabHost>
</LinearLayout> 
```

# cassandra - WSO2 BAM 2.0 中的嵌入式 cassandra

> ID：13936290
> 
> 赞同：1
> 
> 时间：2012-12-18T15:33:39.740
> 
> 标签：cassandra, wso2, wso2bam

WSO2 BAM 附带了如何禁用嵌入式 cassandra。我应该无法使用 localhost:9160 从 Cassandra 资源管理器连接到它

我想根据文章将其配置为外部集群 cassandra 实例 - [BAM external cassandra](https://stackoverflow.com/questions/12798855/bam-external-cassandra)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:27:58.680

您可以使用以下系统属性启动服务器以禁用启动。

```
sh wso2server.sh -Ddisable.cassandra.server.startup=true 
```

# android - 将 Spinner 设置为与 XML 版本相同的布局

> ID：13936301
> 
> 赞同：0
> 
> 时间：2012-12-18T15:34:32.140
> 
> 标签：android, spinner

在我的源代码中，我有两个 Spinner 视图，一个是使用 XML 文件中的条目属性加载的，另一个是通过 ArrayAdapter 加载的。我喜欢 XML 中版本布局的外观，单击时它具有单选类型外观。我将 ArrayAdapter 的布局文件设置为 simple_spinner_item。在应用程序中选择微调器之前，两个微调器看起来相同。选择时，虽然它只是一个简单且非常小的列表，甚至不足以单击其中的项目。如何将其更改为像条目之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:42:32.163

您可以使用[ArrayAdapter.setDropDownViewResource()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#setDropDownViewResource%28int%29)方法对其进行自定义：

```
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

# jquery - 我可以使用哪种 JQuery 选择器按数据属性选择链接？

> ID：13936302
> 
> 赞同：2
> 
> 时间：2012-12-18T15:34:34.833
> 
> 标签：jquery, jquery-selectors

我的页面上有以下 HTML：

```
<a data-href="/C003Q/History"><span>History</span></a> 
```

是否有一个 JQuery 选择器可以让我向链接发送点击事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:36:14.467

您可以使用`attribute`选择器，

**[现场演示](http://jsfiddle.net/kWrhu/1/)**

```
$('a[data-href="/C003Q/History"]').click(function(){        
   alert("clicked");
});​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T15:37:21.883

如果要触发点击事件，请使用此方法：

```
$('a[data-href="/C003Q/History"]').click(); 
```

或者，如果您想将点击处理程序传递给链接，请使用以下代码：

```
$('a[data-href="/C003Q/History"]').click(function(){
    console.log("click");
    //And do your logic here
}); 
```

这对我有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T15:37:24.327

您可以使用以下内容来了解​​有人单击该链接的时间。

```
$('a[data-href="/C003Q/History"]').click(function() {
   alert('click !');
}); 
```

如果您想“模拟”点击链接，请使用以下命令：

```
$('a[data-href="/C003Q/History"]').click(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T15:39:16.167

尝试：

```
$('a[data-href="/C003Q/History"]') 
```

:)

# sql - 使用 Count、Sum 和 JOIN 进行 SQL 查询

> ID：13936308
> 
> 赞同：0
> 
> 时间：2012-12-18T15:34:54.897
> 
> 标签：sql, join, count

我已经筛选了帖子以找到我的问题的答案，但我没有运气。所以我想我会创建一个新的，看看社区是否能够帮助我！如果我在描述事物时没有使用正确的 SQL 术语，请原谅我。

这个问题的三个表。表 A 是没有依赖关系的“主”表。表 B 具有对表 A 的外键引用。表 C 具有对表 B 的外键引用。

此查询有两个目标。首先是总结一个字段，比如说fieldC，在表C中。必须满足的唯一条件是A中的一个字段，比如说fieldA，必须等于，比如说X。公平地说，这个解决方案很简单：

```
SELECT Sum(C.fieldC) FROM C
  INNER JOIN B
    ON C.foreign_keyB = B.id
  INNER JOIN A
    ON B.foreign_keyA = A.id
  WHERE fieldA = X 
```

好的，现在第二个目标：我想计算在表 A 中找到的匹配 fieldA = X 的行数。我试过这个：

```
SELECT Sum(C.fieldC), Count(A.id) FROM C
  INNER JOIN B
    ON C.foreign_keyB = B.id
  INNER JOIN A
    ON B.foreign_keyA = A.id
  WHERE fieldA = X 
```

但我得到的总数是很差的。我在这里犯了一些明显的错误吗？感谢大家的帮助！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:37:25.510

在这种情况下，您可以使用以下方法解决问题`count distinct`：

```
SELECT Sum(C.fieldC), Count(distinct A.id)
FROM C
  INNER JOIN B
    ON C.foreign_keyB = B.id
  INNER JOIN A
    ON B.foreign_keyA = A.id
  WHERE fieldA = X 
```

如果您想对 A 中的字段进行其他操作，例如平均值或求和，则解决方案会稍微复杂一些。

# mysql - 可扩展的统计数据库

> ID：13936310
> 
> 赞同：0
> 
> 时间：2012-12-18T15:35:04.620
> 
> 标签：mysql, performance, database-design, database-schema

我需要为在线零售店建立一个附属系统。其数据库 (MySQL) 应为其附属机构提供：

*   时间间隔过滤
*   带有视图、点击及其推荐的附属链接
*   客户和订单（只是计数）
*   产品和产品类别
*   点击率、收益等 - 有些可以通过 PHP 脚本汇总

所以我基本上有两个选择：

1.  将所有内容存储在一个表中（以键值对形式）并从该表中提取所有数据
2.  在所有东西上制作表格

有人可以解释一下我应该怎么做，两种变体的优缺点是什么？我了解其中涉及一些性能考虑因素，但我没有任何数据可以支持它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:54:19.667

如果您希望您的关联公司数据是历史数据，以便他们可以看到它随着时间的推移如何变化，那么单独的表格会更好。

如果您决定永远不想提供它，而只是及时给他们一个快照，那么将其添加到表格中会更好。

就个人而言，我会使用附属 ID 引用的单独表格，这样他们就可以查看他们的信息如何随时间变化的图表。

现在，如果您存储数据，例如，每周存储一个新行，那么您将无法让他们查看每天的变化，或者比您存储的数据更小的其他时间间隔，并且更难根据产品进行过滤，以防他们改变营销方式并希望看到效果。

因此，我会选择选项 3，即按需提取数据，因此用户可以根据需要对其进行过滤，但是，您也可以采用标准方法，每周执行和运行一次，如果这是合理的时间片。

我会将这些结果缓存在 NoSQL 数据库中，主要是因为它可以更快地检索，因为您可以获取 javascript 并将其直接发送给用户。

如果您必须按需提取数据，那么还要将其缓存在 NoSQL 数据库中，因为在您转到实际数据库之前，您首先要查看那里是否可以满足请求。

您还可以允许会员设置他们自己的选择标准，并且每天只执行这些自定义标准，这样他们就不会仅仅为了获取他们的信息而访问真实的数据库。

这是关键，限制会员需要访问真实数据库，将他们的信息放在其他地方，除非您必须访问该数据库，以减少可能影响客户的会员的任何影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:26:05.497

**将所有内容存储在一个表中（以键值对形式）**

此方法使用 MySQL 作为键值存储。在这种情况下，您没有明确定义的架构。这是一个优势，因为更改数据模式非常容易。这也是一个缺点，因为您不会注意到数据何时丢失或不一致。

**在所有东西上制作表格**

这迫使您考虑数据结构，但将所有数据放入表中可能会很麻烦。

我建议你试着做桌子。在项目开始时考虑数据结构是一件好事，制作表格会迫使您正确地构建数据。如果这真的不适合你，你总是可以使用一个表或一些 NoSQL 解决方案。

# antlr - AntLR 多种选择

> ID：13936315
> 
> 赞同：0
> 
> 时间：2012-12-18T15:35:21.760
> 
> 标签：antlr, antlr3

我想有一些我不理解的相当基本的东西。下面的语法在我看来很简单。从规则“解析”开始，在我看来并没有太多可能模棱两可的地方。但我得到下面列出的错误。如果有人甚至可以解释第一个会有所帮助的错误。

目的是解析简单的名字，比如“先生”。约翰史密斯三世和简史密斯夫人”或“史密斯，约翰”。

```
parse
    : name+ EOF
    ;

// match Mr. John or Smith,
name
    : NAMESEP? SALUTATION* NAME (firstlast | lastcommafirst)
    ;

// match Smith III
firstlast
    : INITIAL? NAME+ COMMA? title*
    ;

// match John
lastcommafirst
    : COMMA SALUTATION* NAME+ COMMA? title*
    ;

// match III
title
    : TITLE COMMA?
    ; 
```

警告（200）：/NameParser.g:23:16：决策可以使用多种选择匹配输入，例如“NAME”：1、2

结果，该输入警告（200）禁用了替代项 2：/NameParser.g:27:25：决策可以匹配输入，例如“NAME COMMA SALUTATION NAME COMMA SALUTATION NAME {EOF, NAME, SALUTATION.. TITLE, NAMESEP}" 使用多种选择：1、2

结果，该输入警告（200）禁用了替代项2：/NameParser.g:27:25：决策可以匹配输入，例如“NAME {EOF，NAME，SALUTATION..TITLE，NAMESEP}”使用多种选择：1、2

结果，该输入警告（200）禁用了替代2：/NameParser.g:27:25：决策可以使用多个替代匹配输入，例如“NAME COMMA SALUTATION NAME {NAME，INITIAL}”：1 , 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:27:59.017

firstlast 可以只匹配 NAME 或者可以匹配 NAME NAME 但它可以匹配 NAME 并让 NAME 在解析中匹配回来，如果它不属于 firstlast 然后是 name。这是一个让你开始的提示:)

# android - ListView 焦点中的 EditText

> ID：13936318
> 
> 赞同：1
> 
> 时间：2012-12-18T15:35:28.030
> 
> 标签：android

我在关注包含编辑文本的 ListView 时遇到问题。我使用方法 OnItemClickListener 来选择 Listview 的行，但是当我单击编辑文本时它不会选择该行。

我希望当我单击编辑文本时，由于方法 OnItemClickListener 选择了行，然后，编辑文本将焦点放在修改文本上。

我在这方面浪费了很多时间。谢谢。

这是代码。

列表.xml

```
<ListView
    android:id="@android:id/list"
    android:layout_width="match_parent"
    android:layout_height="312dp"
    android:descendantFocusability="beforeDescendants">            
</ListView> 
```

行.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/record"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"

<TextView
    android:id="@+id/itemOra"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="Ora"

 <TextView
    android:id="@+id/itemPrezzo"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.8"
   android:focusable="false"
    android:paddingBottom="3dip"
      android:text="Prezzo"
    android:textColor="#4d4d4d"
    android:textSize="18dip"
       />

  <EditText
    android:id="@+id/itemMotivo"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.8"
    android:text="Motivo"
    android:textColor="#4d4d4d"
    android:textSize="18dip"> 
```

活动.java

```
..........

public void attachItemListener(){       

    searchResults.setOnItemClickListener(new OnItemClickListener() {
        private Flusso corrente;

        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            // TODO Auto-generated method stub

            //NOW EDITTEXT CAN TAKE THE FOCUS. 
```

适配器.java

```
 public class Adapter extends ArrayAdapter<Flusso> {
                public List<Flusso> flussi;

                public Adapter(Context context, int textViewResourceId,
                        List<Flusso> flussi) {
                    super(context, textViewResourceId, flussi);
                    this.flussi = flussi;
                }

                @Override
                public View getView(int position, View convertView, ViewGroup parent) {
                    return getView(position, convertView, parent, R.layout.row);
                }
                public View getView(int position, View convertView, ViewGroup parent, int layout) {
                    View v = convertView;
                    if (v == null) {
                        LayoutInflater vi = (LayoutInflater)    
                                this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                        v = vi.inflate(layout, null);
                    }

                    Flusso flow = flussi.get(position);
                    if (flow != null) {
                        TextView prezzo = (TextView) v.findViewById(R.id.itemPrezzo);
                        EditText motivo = (EditText) v.findViewById(R.id.itemMotivo);

                        TextView ora = (TextView) v.findViewById(R.id.itemOra);

                        prezzo.setText(Float.toString(flow.get_euro()));
                        motivo.setText(flow.get_perche());

                    }
                    return v;
                }

            } 
```

这是代码。我不知道焦点或其他属性是否有问题。尝试使用 onTouchEvent 方法，但它不起作用。

我需要你的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:56:05.867

为了做你正在谈论的事情，你将不得不覆盖 the`onTouchEvent(MotionEvent)`以`EditText`在被触摸时返回 false 。像这样的东西：

```
boolean onTouchEvent(MotionEvent e) {
    super.onTouchEvent(e);
    return false;
} 
```

注意：这可能不一致，因为现在两个视图都将收到 MotionEvent。这通常不是一件好事。

发生的事情是，您的列表视图会从您的 contentView 发送一个 MotionEvent。列表视图然后显示“最好检查我的孩子是否在我之前想要 MotionEvent”，并将其传递给它的孩子以查看他们是否首先想要 cookie。然后，如果剩下任何 cookie（所有孩子的 onTouchEvent(MotionEvent) 调用都返回 false）*，那么*列表视图将吃掉事件并做它的事情。android中的触摸层次结构通常是自下而上的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:49:16.533

所以..这并不是说您知道您`OnClickListener`没有响应，而是`EditText`一旦激活了侦听器，您就没有集中注意力，对吗？您是否只是试图要求您的听众集中注意力？

```
 searchResults.setOnItemClickListener(new OnItemClickListener() {
        private Flusso corrente;

        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            ......
            edittext.requestFocus();                                
        }
    }); 
```

# sql - 我应该如何选择数据库中的列数据类型？

> ID：13936323
> 
> 赞同：0
> 
> 时间：2012-12-18T15:35:38.420
> 
> 标签：sql, database, tsql

我有一个临时表，其中所有不同类型的数据都存储为字符串。具体来说，`nvarchar(300)`。这些列代表各种各样的东西：日期；价格; 数量；等等

我将把这些数据移动到另一个表中，我想知道我应该如何定义目标列的数据类型。

1.  我应该选择最接近我插入的数据的数据类型，还是，
2.  我是否应该保留数据`nvarchar(300)`并让消费者有责任适当地转换或转换数据？

编辑：这是一个关系数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:39:05.073

始终使用最合适的数据类型并在应该显示/打印时对其进行转换。否则你总是需要来回解析它。

`nvarchar`如果您存储所有内容（fe 而不是） ，您也可能会遇到本地化问题（有一天`datetime`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:39:46.607

使用正确的类型，否则大部分代码最终将成为转换例程，您将使用这些例程来访问通过使用正确的类型“免费”获得的功能。

作为一个真正简单的示例，请考虑使用 DATETIME 类型获得的所有功能，或者不同的全局表示可能带来的问题。

接受打击，编写一个健壮的导入例程并使用正确的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:43:20.783

如果您具有进行转换的领域理解，那么在移出临时表时肯定会更好 - 数据的消费者几乎肯定希望将数据重新转换为适当的列，所以价值你的工作基本上变成了文件副本。

如果不止一个消费者使用该表，那么如果您将所有内容都保留为字符串，则出现错误（由于对类型转换的不同解释）的可能性很高 - 尤其是。如果您必须处理数字（精度通常是一个问题）或日期时间值（同样，“2013 年 1 月 1 日”和“2013 年 1 月 1 日 12:00”之间的差异）。做一次，确保每个人都使用相同的数据类型。

不进行转换的唯一两个原因是没有领域知识，或者没有时间/金钱/精力来进行转换。在这两种情况下，您只是将问题推向下游。

# jquery - 用更改的 URL 替换链接 jquery 的内容

> ID：13936326
> 
> 赞同：-1
> 
> 时间：2012-12-18T15:35:43.583
> 
> 标签：jquery

我需要有人通过我的链接来解决这个问题。

这是我的博客链接，并且 URL 发生了变化，因此不应对 jquery 进行硬编码。此链接上的课程不会更改。

示例 1

```
<a class="example" href="http://www.blogname.com/blog_title_here">Hello World</a> 
```

同时，我有一个手动创建的“阅读更多”链接，该链接在博客预览下方进行了硬编码，并带有一个不会改变的“不同类”。我只希望动态链接中的 href 替换阅读更多链接。

替换此网址...

```
<a class="differentclass" href="http://javascript:void(0);">Read More</a> 
```

...使用示例 1 中动态变化的 URL，这将是最终结果。

```
<a class="differentclass" href="http://www.blogname.com/blog_title_here">Read More</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:38:46.823

```
$('a.differentclass').attr('href', $('a.example').attr('href') ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:41:03.837

不确定我是否完全理解您的问题，但不会很简单：

`<a class="differentclass" href="http://javascript:void(0);" id="ReadMoreLink">Read More</a`>

和脚本：

```
$("#ReadMoreLink").attr("href",$(".example").attr("href")); 
```

修理它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:42:17.280

那么您将需要一些触发链接更改的事件。我在这里做了一个 JSFIDDLE：http: [//jsfiddle.net/zDLCs/1/](http://jsfiddle.net/zDLCs/1/)。单击按钮时，链接会更改。更改链接的代码在这里：

```
$('.differentclass').attr('href',$('.example').attr('href')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T15:45:11.007

尝试：

```
<a href="#" onclick="openDefaultUrl(); return false;" >...</a> 
```

当函数看起来像：

```
function openDefaultUrl() {
   window.location = $("a.example").attr("href");
} 
```

# asp.net - AJAX 回发后按钮 onClick 事件未触发，但回发仍然发生

> ID：13936327
> 
> 赞同：0
> 
> 时间：2012-12-18T15:35:49.560
> 
> 标签：asp.net, ajax, events, postback

我有一个带有 DropDownList 的 UpdatePanel。在 UpdatePanel 中，我向 PlaceHolder 添加了一些自定义控件，其中有一个带有`OnClick="AddItemToCart"`. 如果我刷新我的页面并按下该`AddItemToCart`事件被调用的按钮，如果我将 DropDownList 更改为与页面一起加载的默认值以外的其他值，则该`AddItemToCart`事件不会触发。我能够将 DropDownList 更改回默认值，它将允许事件再次触发。

我认为这与事件注册有关，但我不确定在哪里看。我已经尝试以编程方式将 OnClick 值分配给每个回发的按钮，但这似乎不起作用。我不明白出了什么问题，因为回发正在工作，但是我的事件没有被触发。

总而言之，如果下拉值与它在页面加载时加载的值不同，我的 OnClick 在 ajax 回发后不会触发。

这是我的代码（虽然我不确定它会有所帮助）：

```
<asp:UpdatePanel ID="updSIListCnt" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:DropDownList id="ddlSort" runat="server" OnSelectedIndexChanged="ApplyFilters" AutoPostBack="True" Width="23%">
            <asp:ListItem Value="0">Sort By Relevancy</asp:listitem>
            <asp:ListItem Value="1">Sort By Product Code</asp:listitem>
            <asp:ListItem Value="2">Sort By Product Description</asp:listitem>
            <asp:ListItem Value="3">Sort By Price - Lowest</asp:listitem>
            <asp:ListItem Value="4">Sort By Price - Highest</asp:listitem>
        </asp:DropDownList>

        <asp:PlaceHolder id="phContentListCnt" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel>
<asp:UpdateProgress ID="upSIList" runat="server" AssociatedUpdatePanelID="updSIListCnt">
    <ProgressTemplate>
        <asp:Image id="imgLoading" runat="server" ImageUrl="~/Images/loading.gif" CssClass="loader" />
    </ProgressTemplate>
</asp:UpdateProgress> 
```

`phContentListCnt`包含以下几个实例：

```
 <asp:ImageButton ID="btnAddToBasket" runat="server" ImageUrl="~/Images/Buttons/add_to_basket.jpg" OnClick="AddItemToCart" CausesValidation="false" /> 
```

`ApplyFilters`运行一些 SQL 和调用`UpdatePanel.Refresh()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:29:35.637

我设法找到了这个问题的原因。

在`ApplyFilters`我重新加载控件并将它们添加到`phContentListCnt`但我首先清除占位符。这意味着在 Page_Load 中注册的事件也被清除了，此时注册新事件已经到了页面生命周期的后期。在此说明中，我正在使用页面加载中检查我的过滤器，`Request.Form[]`以便可以在页面加载中加载我的动态控件。

# wcf - 使用 WIF 令牌保护的 WCF 服务需要公共方法

> ID：13936328
> 
> 赞同：1
> 
> 时间：2012-12-18T15:36:05.590
> 
> 标签：wcf, wcf-binding, token, wif

我有一个 WCF 服务托管在单个端点上，带有`<ws2007FederationHttpBinding>`. 该服务使用 WIF 令牌进行保护。

服务有一种方法`void IsOnline()`来确定服务的可用性。此方法必须可以在没有令牌的情况下调用，并且我不能拆分接口，也不能添加另一个不安全的端点。（=配置服务限制）

那么，我可以修改我的绑定以基本上声明“使用 WIF 令牌是可选的”吗？或者换句话说：服务应该使用调用者的声明和身份，或者如果没有提供令牌，则使用某种匿名令牌。

我当前的绑定：

```
 <microsoft.identityModel>
    <service saveBootstrapTokens="true">
      <audienceUris>
        <add value="https://.../MyServiceCaller" />
      </audienceUris>
      <federatedAuthentication>
        <wsFederation passiveRedirectEnabled="true" issuer="https://.../MyFederationProviderHere" realm="https://.../MyServiceCaller" requireHttps="true" />
        <cookieHandler requireSsl="true" />
      </federatedAuthentication>
      <applicationService>
        <claimTypeRequired>
          <claimType type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name" optional="true" />
          <claimType type="http://schemas.microsoft.com/ws/2008/06/identity/claims/role" optional="true" />
        </claimTypeRequired>
      </applicationService>
      <serviceCertificate>
        <certificateReference x509FindType="FindByThumbprint" findValue="123123" />
      </serviceCertificate>
      <issuerNameRegistry type="Microsoft.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
        <trustedIssuers>
          <add thumbprint="123123" name="My.Auth.FederationProvider" />
          <add thumbprint="456456" name="My.Auth.FederationProvider" />
        </trustedIssuers>
      </issuerNameRegistry>
    </service>
  </microsoft.identityModel>
    ...
  <ws2007FederationHttpBinding>
    <binding name="Host_Ws2007FederationHttp_WithToken">
      <security>
        <message establishSecurityContext="false" issuedKeyType="BearerKey"
            issuedTokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1"
            negotiateServiceCredential="false">
          <tokenRequestParameters>
            <trust:SecondaryParameters xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
              <trust:TokenType xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1</trust:TokenType>
              <trust:KeyType xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://docs.oasis-open.org/ws-sx/ws-trust/200512/Bearer</trust:KeyType>
            </trust:SecondaryParameters>
          </tokenRequestParameters>
        </message>
      </security>
    </binding>
  </ws2007FederationHttpBinding> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:21:16.670

No - In WCF authentication requirements are per endpoint. You need a separate endpoint for your IsOnline operation. You then use a binding on this endpoint that allows anonymous connections.

# android - 哪种 NFC 标签适合我的要求

> ID：13936334
> 
> 赞同：1
> 
> 时间：2012-12-18T15:36:21.003
> 
> 标签：android, tags, hardware, nfc

我目前正在研究餐厅互动。我需要一个 URL 和记录来支持我的 Android 应用程序中的 AAR。谁能建议我哪些标签适合这个？请提及我可以获取标签的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:14:19.250

您可以使用以下网页来确定 NFC 标签所需的尺寸：http: [//nearfieldcommunication.com/developers/choosing-tags/](http://nearfieldcommunication.com/developers/choosing-tags/)

因为您需要一个 URL 和一个 AAR，所以您应该输入所需的 URL，记住必要的字节数，然后使用包名称创建一个 URL。因为 AAR 是由应用程序的包名组成的，并且它的字节大小几乎与 URL 相同，所以将其添加到 URL 所需的字节数中。

通过这种方式，您无需安装插件，之后您可以选择特定标签，然后您将获得订购 NFC 标签的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:38:08.197

使用简短的包标识符，然后以最小形式添加您想要的数据，例如 id（网上有更多信息）。试试[这个](http://code.google.com/p/nfc-eclipse-plugin/wiki/Tutorial)（无耻插件），编辑器会自动计算任何 NDEF 消息的大小。

# hibernate - 如何使用注释创建休眠复合键

> ID：13936340
> 
> 赞同：27
> 
> 时间：2012-12-18T15:36:44.110
> 
> 标签：hibernate, hibernate-mapping, hibernate-annotations, queryover

我正在尝试`hibernate annotations`将数据插入到`MySQL database`未定义主键的表中。

然而事实是该表的 2 个字段在表中是唯一的。我如何使用休眠注释来实现相同的功能？

这是我的代码..

```
 @Entity
 @Table(name = "RolesMenuItems")
    public class RolesMenuItems {

       @Column(name = "RoleID")
       private String roleID;

       @Column(name = "MenuItemID")
       private String menuItemID;
  /*setter getter methods */
 } 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-18T15:45:03.983

您可以使用`@Embeddeble`and`@EmbeddedId`创建复合键并将其映射到您的实体。例如：

```
@Embeddable
public class RolesMenu {
    @Column(name = "RoleID")
    private String roleID;

    @Column(name = "MenuItemID")
    private String menuItemID;

    //getter, setter methods
}

 @Entity
 @Table(name = "RolesMenuItems")
 public class RolesMenuItems {

     @EmbeddedId
     private RolesMenu roleMenu;

  /*setter getter methods */
 } 
```

然后`RolesMenuItems`在您的 Java 代码中使用以通常方式持久化实体。

参考：[http ://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e535](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e535)

**编辑：** 要持久化实体：

```
RolesMenu roleMenu = new RolesMenu();
roleMenu.setRoleID(...);
roleMenu.setMenuItemID(...);

RolesMenuItems roleItem = new RolesMenuItems();
roleItem.setRoleMenu( roleMenu );

em.persist(roleItem); 
```

# c# - 尝试使用与 silverlight 应用程序通信的 wcf 从 dll 类中获取属性的问题

> ID：13936344
> 
> 赞同：2
> 
> 时间：2012-12-18T15:37:00.077
> 
> 标签：c#, vb.net, wcf, silverlight, dll

我在 c# 中使用了一个包含用于常见任务的类的 dll。在那个 dll 中，我有一个名为 clResultadoOperacionBD 的类，用于检查数据库中的数据行是否已正确插入或更新，具有 Id、Message、Operation Result 等属性。

这里是属性：

```
 /// <summary>
    /// Id Registro tipo entero
    /// </summary>
    public int Id32 { get { return _id_32; } }
    /// <summary>
    /// Id Registro tipo Long
    /// </summary>
    public long Id64 { get { return _id_64; } }
    /// <summary>
    /// Bool que indica si la operación es exitosa o no
    /// </summary>
    public bool Resultado { get { return _resultado; } }
    /// <summary>
    /// Indica el mensaje del resultado de una operación
    /// </summary>
    public string Mensaje { get { return _mensaje; } } 
```

我已经用过这个类好几次了，没问题。

我使用此 dll 在 c# 中创建了一个类库以满足要求。

然后我在 VB.net 中创建了一个 silverlight 项目并与数据库通信，我在 web 项目中使用了 wcf：

```
Imports System.ServiceModel
Imports System.ServiceModel.Activation
Imports ClasesBase
Imports Entities

<ServiceContract(Namespace:="")>
<SilverLightFaultBehavior()>
<AspNetCompatibilityRequirements(RequirementsMode:=AspNetCompatibilityRequirementsMode.Allowed)>
Public Class wcf_comentario

    <OperationContract()>
    Public Function InsertaComentario(ByVal nombre As String, comentario As String, correo As String) As clResultadoOperacionBD
        Using c As Comentario = New Comentario With {.Id = 0, .Nombre = nombre, .Comentary = comentario, .Correo = correo}
            Return Repositories.ComentarioRepo.InsertaComentario(c)
        End Using
    End Function

End Class 
```

之后，我在 silverlight 项目中添加了服务引用，我的问题是，当我无法在 wcf 的已完成事件 args 中使用对象属性时，我认为该行已正确插入数据库中。

```
Private Sub insercion_completed(ByVal sender As Object, ByVal e As Prueba.InsertaComentarioCompletedEventArgs) Handles comentario_wcf.InsertaComentarioCompleted
    lblResultado.Text = e.Result.GetType().Name

    indicador.IsBusy = False

    txtComentario.Text = ""
    txtCorreo.Text = ""
    txtNombre.Text = ""
End Sub 
```

智能仅向我显示 GetType 属性，我想知道使用该类属性的方式。

谢谢！

# php - 如何从另一个表中记录具有最相似属性的表中选择记录

> ID：13936345
> 
> 赞同：1
> 
> 时间：2012-12-18T15:37:02.900
> 
> 标签：php, mysql

表 A
结果选择
A a
B a
B b
C a
C b
C c

表 B

用户选择

1 a
1 b
2 b
2 c

表 C
用户结果
1 B
2 C

如果我想这样做，我应该使用什么 mysql 查询：

如果用户选择 a 结果是 ABC（因为 ABC 在“选择”列中有“a”）如果用户选择 ab 结果是 BC（因为 A 在“选择”列中没有“b”）如果用户选择 abc结果是C（因为C在'select'列中有'ab c'）如果用户选择bc结果是C（因为AB在'select'列中没有'c'）如果用户选择c结果是C（因为 AB 在“选择”列中没有“c”）

所以它会从用户选择的内容中选择最相似的记录，并忽略其他不匹配的记录..对不起我的英语，我说的是国语...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:39:55.933

```
SELECT  `result`
FROM tableA
WHERE   `select` IN ('a','b','c')
GROUP BY result
HAVING COUNT(*) = 3 
```

`select`如果没有对每个强制执行唯一约束`result`，`DISTINCT`则需要 a。

```
SELECT  `result`
FROM tableA
WHERE   `select` IN ('a','b','c')
GROUP BY result
HAVING COUNT(DISTINCT `select`) = 3 
```

# asp.net - ASP.NET 文件路径

> ID：13936346
> 
> 赞同：0
> 
> 时间：2012-12-18T15:37:07.320
> 
> 标签：asp.net, asp.net-mvc, ssi

我正在将网站从 SSI 切换到 ASP.NET。旧文件结构如下：

root
--pageName
------index.hmtl
------local.css
------local.js

如果我有一个视图（在它自己的文件夹中），我需要使用什么文件路径来始终引用这样的本地文件？似乎这`<link rel="stylesheet" type="text/css" href="local.css" />`行不通。

我正在使用：
Visual Studio 2010
Framework 4
MVC3

感谢您的回复。

澄清：
在这种情况下，大多数页面都有一个 local.css/local.js，因此将它们全部移动到同一个目录并不是一个理想的解决方案。我猜这个想法是链接总是可以`<link rel="stylesheet" type="text/css" href="local.css" />`的，因为文件总是有相同的名称，但它总是在与 local.css/local.js 的其他实例不同的文件夹中

理想情况下，我可以链接一次，但每个页面都可以有自己的个人 css/js。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:39:29.330

关于什么

```
<link rel="stylesheet" type="text/css" href="<%=Page.ResolveClientUrl("~/local.css") %>" /> 
```

`~`在 ASP.NET 中是指站点的根目录。

有趣的是，您也可以这样做：

```
<link rel="stylesheet" type="text/css" href="~/local.css" runat="server" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:40:55.320

将您的 css 文件移动到`~/Content`并将链接更改为

```
<link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/local.css")" /> 
```

ASP.NET MVC 使用路由来定义控制器操作的路径。内容路径没有定义路由，因此它将使用文件路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:42:21.847

就 ASP.Net MVC 而言，路径应该是

```
<link rel="stylesheet" type="text/css" 
      href="@Url.Content("~/content/css/local.css")" /> 
```

希望这会有所帮助！

# sql - 使用 postgres 创建顺序证书编号

> ID：13936347
> 
> 赞同：2
> 
> 时间：2012-12-18T15:37:16.463
> 
> 标签：sql, postgresql, concurrency, python-3.x

我有一张包含证书编号的表格。每个证书由一个系列字母和一个序列号组成。证书必须是唯一的并且不允许有间隙，即如果存在 A-1234，那么 A-1233 也**必须**存在。每个系列都有自己的系列，即A-1234和B-1234可以愉快地共存。

保存信息的表是这样的：

```
CREATE TABLE "Certificate"
(
    id serial NOT NULL,
    series character(1) NOT NULL,
    serial integer NOT NULL,
    CONSTRAINT "Certificate_pkey" PRIMARY KEY (id ),
    CONSTRAINT "Certificate_series_serial_key" UNIQUE (series , serial )
)
WITH (
    OIDS=FALSE
); 
```

现在的问题是如何在给定特定系列的情况下创建下一个序列号。Postgres 序列似乎不是要走的路，因为如果插入因任何原因失败或者如果需要来自序列的新值的事务被回滚，这些将产生间隙。

我的想法如下：

```
#! /usr/bin/env python3.2

import postgresql.driver.dbapi20 as pgdb

credentials = #my db credentials

SERIES = 'B'

dbcon = pgdb.connect (**credentials)
cursor = dbcon.cursor ()

cursor.execute ('''insert into "Certificate" ("series", "serial")
    (select %s, coalesce (max ("serial"), 0) + 1
    from "Certificate"
    where "series" = %s) ''', [SERIES] * 2)

input () #just to keep the transaction open some time

cursor.close ()
dbcon.commit ()
dbcon.close () 
```

不幸的是，这不是线程安全的。如果我在两个 shell（比如 A 和 B）上启动此脚本两次，则会发生以下情况：

*   我在 shell A 上启动脚本，它保存在事务中`input ()`。
*   我在 shell B 上启动脚本，它保存在事务中`input ()`。
*   我在 shell A 上按 enter 并提交事务。
*   在这个精确的时刻，shell B 抛出一个 (expected) `postgresql.exceptions.UniqueError: duplicate key value violates unique constraint "Certificate_series_serial_key"`。

**如何根据给定的系列字母以线程安全的方式将下一个证书插入此表中？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:22:53.737

只需捕获异常并重试

```
while True:
    try:
        cursor.execute ('''
            insert into "Certificate" ("series", "serial")
            select %s, coalesce (max ("serial"), 0) + 1
            from "Certificate"
            where "series" = %s
            ''', [SERIES] * 2)
        dbcon.commit ()
        break
    except postgresql.exceptions.UniqueError:
        continue 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T23:19:49.577

您正在尝试创建一个无间隙序列。那里有很多关于它的信息。[这是我不久前就该主题写的一个答案](https://stackoverflow.com/questions/9984196/rails-postgres-does-not-re-use-deleted-ids-but-mysql-does/9985219#9985219)和另一个[here](https://stackoverflow.com/a/12456645/398670)。

您对证书表有正确的想法，尽管我会考虑一个更清楚地表明它是证书序列号表而不是证书的名称。`certificate_series_number`例如。

在事务中，您想要可靠地生成新 ID 的方法是：

```
 curs.execute("UPDATE certificate SET serial = serial + 1 WHERE series = %s RETURNING serial")
    newserial = curs.fetchone()[0] 
```

将`UPDATE`锁定该行，`series`这会导致对该行的其他更新`series`阻塞，直到该事务提交或回滚。它不会干扰影响*其他* `series`的并发事务。

这基本上相当于做 a`SELECT ... FOR UPDATE`后跟一个`UPDATE`没有的常规`RETURNING`，它更方便和更简单。

您会注意到，如果它不存在，这不会创建一个新系列。老实说，在您的情况下，最好的方法是**预先分配您可能使用**的所有系列，因为空间非常有限。在更复杂的情况下你可以使用 upsert 逻辑，但它很难让它顺利工作，你必须为事务重试做好准备。见[http://www.depesz.com/2012/06/10/why-is-upsert-so-complicated/](http://www.depesz.com/2012/06/10/why-is-upsert-so-complicated/)

请注意，如果事务在单个事务中使用多个系列，它们可能会相互死锁，除非他们非常小心地始终以相同的顺序从系列中获取系列，例如按系列 ID 的字母顺序。

# excel - 单元格引用

> ID：13936355
> 
> 赞同：1
> 
> 时间：2012-12-18T15:37:25.543
> 
> 标签：excel

我不知道我想做的事情是否可行，

我想操作另一张表中的数据，例如：

例如在 sheet2 上，我将使用以下公式 =Sheet1!A1+Sheet1!A2

我想要做的是有一个包含文本 Sheet1 的单元格！然后有一个公式使用该单元格中的文本，例如

```
sheet2 a1 = Sheet1 
```

Sheet2 中的公式如下所示

```
=A1!A1+A1!A2 
```

这可能吗

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:43:20.150

您可以使用`INDIRECT`公式，它将一个字符串转换为可用范围。在您的情况下，您可以尝试`Sheet1`在 cell `A1`on`Sheet2`中输入，然后在 cell `A2`on`Sheet2`中输入公式：

```
=INDIRECT(A1& "!A1") 
```

这将获取`A1`( `Sheet1`) 中的值，将其与创建的字符串 - 连接`!A1`并返回值`Sheet1!A1`。

您还可以使用`ADDRESS`公式从单元格引用向后工作到字符串，该公式需要（至少）行号和列号并返回单元格引用的文本表示形式。例如：

```
=ADDRESS(1, 1) 
```

将以字符串形式返回值`$A$1`，然后您可以将其传入`INDIRECT`以获取值（这是一种可用于以灵活/动态方式引用单元格的技术）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:42:09.140

您可以使用`INDIRECT()`公式中的函数来构建参考。

```
Sheet1!A1 = "Sheet2!"
Sheet2!A1 = "Hello World"
Sheet1!A2 = INDIRECT(A1&"A1")
Sheet1!A2 == "Hello World" 
```

# javascript - 如何加载供应商 Rails 3.1

> ID：13936357
> 
> 赞同：0
> 
> 时间：2012-12-18T15:37:32.410
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, stylesheet

如何将供应商的树（！）加载到 Rails 3 应用程序？

现在我使用这种方式：

```
//= require vendor ../../../vendor/assets/ {stylesheet or javascript} 
```

这对我不起作用：

```
require_tree vendor OR require vendor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:56:01.113

我建议你创建像

*   `vendor/assets/javascripts/vendor.js`
*   `vendor/assets/stylesheets/vendor.css`

在里面`vendor.js`你可以做

```
//= require_tree . 
```

在里面`vendor.css`你可以做

```
/* 
 *= require_tree .
 */ 
```

然后里面`app/assets/javascripts/vendor.js`放

```
//= require vendor 
```

并在`app/assets/stylesheets/vendor.css`输入

```
/* 
 *= require vendor
 */ 
```

*应该注意的是，一旦您获得了多个要包含的*文件，您最好避免`require_tree`而是单独为**每个**文件使用`//= require`一行。这使您可以正确地对资产进行排序，以确保解决彼此之间的任何依赖关系。通过执行我上面描述的操作，您可以在那个时候为您目录中的各个行设置成功。**`//= require``vendor/`**

# ios - ios - 一些代码没有按预期运行

> ID：13936361
> 
> 赞同：0
> 
> 时间：2012-12-18T15:37:39.253
> 
> 标签：ios, ios5, nsuserdefaults

每次人们打开应用程序时，我都会运行一些代码。它可以确定此人是否是第一次登录，或者他们是否是重复用户。根据该信息，该应用程序的行为会有所不同。但它并没有像我想象的那样对我有用。这是代码：

```
- (void)viewDidAppear:(BOOL)animated
{            
    // Get user data. 
    NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];

    // First arg is name and second is if not found.
    NSString *user_id = [standardUserDefaults objectForKey:@"user_id"]; 
    bool first_time_cookie = [standardUserDefaults boolForKey:@"first_time_cookie"];

    [super viewDidLoad];

    if(!first_time_cookie)
    {
        // First time on the app, so set the user cookie.
        [standardUserDefaults setBool:YES forKey:@"first_time_cookie"];

        [[NSUserDefaults standardUserDefaults] synchronize];  

        // Make new account 

        [standardUserDefaults synchronize];           
    }
    else 
    { 
        // DO REPEAT USER ACTIONS
    }

    [[NSUserDefaults standardUserDefaults] synchronize];    
} 
```

我在我的 userDefaults 中搞混了。谁能告诉我哪里出错了？正在发生的问题是系统认为许多重复用户实际上是新用户。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:45:14.487

我怀疑这个问题可能与使用`bool`而不是`BOOL`. 在这里看到这个问题[。](https://stackoverflow.com/questions/541289/objective-c-bool-vs-bool)

`bool`映射到 true/false 的值，而`BOOL`映射到 YES/NO。您正在`first_time_cookie`设置为 YES（一个`BOOL`值）。因此，尝试：

```
BOOL first_time_cookie = [standardUserDefaults boolForKey:@"first_time_cookie"]; 
```

# linux - 克服 HDFS-2556：单元测试目录和权限

> ID：13936364
> 
> 赞同：1
> 
> 时间：2012-12-18T15:37:49.830
> 
> 标签：linux, hadoop, hdfs

我正在尝试在 hadoop 上进行 JUnit 测试，我编写了一个测试用例，我使用 MiniDFSCluster、MiniMRCluster 和 JUnit 在本地 mini-hadoop 环境中运行。

但是我收到了这个错误：

```
 WARNING: Metrics system not started: Cannot locate configuration: tried hadoop-metrics2-datanode.properties, hadoop-metrics2.properties
Dec 18, 2012 4:42:29 PM org.apache.hadoop.hdfs.server.datanode.DataNode makeInstance
WARNING: Invalid directory in dfs.data.dir: Incorrect permission for build/test/data/dfs/data/data1, expected: rwxr-xr-x, while actual: rwxrwxr-x
Dec 18, 2012 4:42:29 PM org.apache.hadoop.hdfs.server.datanode.DataNode makeInstance
WARNING: Invalid directory in dfs.data.dir: Incorrect permission for build/test/data/dfs/data/data2, expected: rwxr-xr-x, while actual: rwxrwxr-x
Dec 18, 2012 4:42:29 PM org.apache.hadoop.hdfs.server.datanode.DataNode makeInstance
SEVERE: All directories in dfs.data.dir are invalid. 
```

这看起来像仍然未决的 HDFS 错误[https://issues.apache.org/jira/browse/HDFS-2556 。](https://issues.apache.org/jira/browse/HDFS-2556)

由于我无法更改我正在使用的 hadoop 版本，有没有办法强制 hadoop 接受这些权限？

我试过： System.setProperty("dfs.datanode.data.dir.perm", "775"); 但是 hadoop 忽略了它们。

此外，我无法手动更改权限，似乎迷你集群每次运行都会重新创建它们。

有没有办法在不修改 hadoop 或更改版本的情况下克服这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-11T21:21:43.283

您可以使用此处提供的解决方法， [https://www.mail-archive.com/issues@hbase.apache.org/msg52961.html](https://www.mail-archive.com/issues@hbase.apache.org/msg52961.html)

**更新：链接中的代码片段（以防链接断开）**

```
 try {
        Process process = Runtime.getRuntime().exec("/bin/sh -c umask");
        BufferedReader br = new BufferedReader(new
                InputStreamReader(process.getInputStream()));
        int rc = process.waitFor();
        if (rc == 0) {
            String umask = br.readLine();

            int umaskBits = Integer.parseInt(umask, 8);
            int permBits = 0777 & ~umaskBits;
            String perms = Integer.toString(permBits, 8);

            log.info("Setting dfs.datanode.data.dir.perm to " + perms);
            hBaseTestingUtility.getConfiguration().set("dfs.datanode.data.dir.perm", perms);
        } else {
            log.warn("Failed running umask command in a shell, nonzero return value ");
        }
    } catch (Exception e) {
        // ignore errors, we might not be running on POSIX, or "sh" might not be on the path
        log.warn("Couldn't get umask", e);
    } 
```

# c++ - C++ 有哪些特殊规则适用于静态 const 整数类型？

> ID：13936365
> 
> 赞同：6
> 
> 时间：2012-12-18T15:37:50.473
> 
> 标签：c++, static, constants, standards

***我的印象是，无论****是在命名空间范围内声明还是在类/结构/联合内声明*，C++ 都将相同的特殊规则应用于`static const`整数类型。

 **现在我在想我已经被不兼容的编译器教坏了。

```
static const int A = 1;

struct s
{
    static const int A = 1;
}; 
```

除了范围上的明显差异之外，如何`A`和`s::A`不同？

*   ...什么时候它们的用法将被它们的字面值替换？
*   ...我什么时候可以拿到它的地址？
*   ...当我需要单独定义它们时？

我特别好奇 C++ 03。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:54:30.020

关键字`static`在类范围和命名空间范围内的含义不同。事实上，它在命名空间范围内的使用已被弃用。

在类范围内声明变量时，`static`意味着该变量只有一个实例，具有静态存储持续时间和生命周期。类中的声明*不是*定义；如果使用了变量*，*则必须在一个（并且只有一个）翻译单元中定义它；如果未定义，则您的行为未定义。（在实践中，根据使用情况，要么一切正常，要么链接器出错。）请注意，如果声明是针对`const`整型的，并且包含初始化，那么 *如果*它是在需要常量整数表达式的上下文中使用（如 C 样式数组的维度）。最简单和最可靠的事情就是在某个地方定义它。

在命名空间范围内声明变量时，`static`意味着该名称具有内部链接，而不是外部链接；不管有没有`static`，声明都是一个定义（所以程序中应该没有其他定义）。在 C++03 中，这种用法已被弃用；改用未命名的命名空间。还要注意，如果变量本身是`const`（顶级 const），则默认情况下它具有内部链接，因此`static`没有任何效果。（如果您需要`const`具有外部链接的变量，请将其设为类成员，或显式定义它`extern`，使用初始化程序使其成为定义，而不仅仅是声明。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:05:03.620

> 怎么做`A`和`s::A`区别？

最大的不同是声明of`A`也是定义，而声明of`s::A`不是。我不确定您所说的“特殊规则”是什么意思，但`static`在每种情况下都有不同的含义。

在命名空间范围内，它为其提供*内部链接*，以便对象在当前翻译单元之外不可见。请注意，`static`这里是多余的，因为默认情况下命名空间范围内的常量变量具有内部链接。

在类范围内，这意味着有一个独立于类的任何实例的对象。

> 什么时候它们的用法将被它们的字面值替换？

由于两者都是在声明中带有初始化器的整数常量，因此两者都可以在常量表达式中使用，并且编译器能够用编译时常量替换它们的值。

也许更合适的问题是，什么时候需要定义？

在 C++11 中，如果变量是*odr-used* ，则它是必需的- 粗略地说，如果您执行任何需要变量地址而不是其值的事情。

在 C++03 中，我认为如果完全使用该变量是必需的，尽管不需要诊断，而且如果您只使用它的值，许多编译器也不会抱怨。不过我可能是错的；旧规则相当复杂，我很高兴现在能够忘记它们。

> 我什么时候可以取到它的地址？

这要求变量在 C++03 和 C++11 中都有定义。该定义为变量分配存储空间，使其具有地址。

> 当我需要单独定义它们时？

命名空间范围内的变量声明也是一个定义，除非您声明它`extern`；所以你的第一个变量不需要单独的定义。

类范围的变量声明不是定义；所以你的第二个变量确实需要在 C++03 和 C++11 中单独定义，如果它是*odr-used*。**

# optimization - 战争迷雾和 2D 网格

> ID：13936368
> 
> 赞同：4
> 
> 时间：2012-12-18T15:37:55.933
> 
> 标签：optimization

首先，我正在使用 XNA 框架开发 2D 策略游戏。

我正在为我的游戏实现 2D 战争迷雾。图形部分已经完成并且工作得很好，但我现在正在尝试实现这场战争迷雾的“逻辑”部分。

我创建了一个代表我的关卡的 2D 网格。每一帧，每个单元都使用 Bresenham 算法（这似乎是找出给定圆圈中哪些单元格的最佳方法）更新围绕它的圆圈中的单元格。这实际上有效......当我想知道给定位置是否可见时，我只需要获取单元格的状态......

问题是，当我有大量生成的单元时，我的游戏运行速度很慢......这个性能问题的第一个原因是，由于每个单元都会更新它周围的单元格，所以很多单元格都会多次更新......但是我看不到任何解决方案...

所以......也许我以这种方式实现它是错误的，或者我错过了一个明显的优化，但我有点卡住......

这是代码：

```
class LevelGridCell
{
    public void SetVisible(float a_time)
    {
        if (m_visibleTime < a_time)
            m_visibleTime = a_time;
    }
    public bool IsVisible(float a_time)
    {
        return (m_visibleTime != 0f && m_visibleTime >= a_time);
    }

    float m_visibleTime = 0;
}

class LevelGrid
{
    public LevelGridCell GetAt(int a_x, int a_y)
    {
        return m_grid[a_x + a_y * m_width];
    }

    public void SetVisible(float a_time, int a_x, int a_y, float a_radius)
    {
        GetAt(a_x, a_y).SetVisible(a_time);

        int intRadius = (int)(a_radius / m_cellSize);
        int x = 0, y = intRadius, p = 1 - intRadius;
        PlotSetVisible(a_x, a_y, x, y, a_time);
        while (x < y)
        {
            x++;
            if (p < 0)
                p += 2 * x + 1;
            else
            {
                y--;
                p += 2 * (x - y) + 1;
            }
            PlotSetVisible(a_x, a_y, x, y, a_time);
        }
    }
    private void SafeSetVisible(int a_x, int a_y, float a_time)
    {
        if (a_x >= 0 && a_x < m_width && a_y >= 0 && a_y < m_height)
        {
            GetAt(a_x, a_y).SetVisible(a_time);
        }
    }
    private void PlotSetVisible(int xctr, int yctr, int x, int y, float a_time)
    {

        for (int i = xctr - x; i <= xctr + x; ++i)
        {
            SafeSetVisible(i, yctr + y, a_time);
            SafeSetVisible(i, yctr - y, a_time);
        }
        for (int i = xctr - y; i <= xctr + y; ++i)
        {
            SafeSetVisible(i, yctr + x, a_time);
            SafeSetVisible(i, yctr - x, a_time);
        }
    }

    List<LevelGridCell> m_grid = new List<LevelGridCell>();
    float m_cellSize;
    int m_width;
    int m_height;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:45:58.527

在没有看到您的代码的情况下，我们不得不猜测问题可能是什么。如果你已经分析了你的代码，你应该能够找出哪一部分特别慢；有了这些信息，您就可以直接解决问题。

以下是一些关于哪些位可能很慢的猜测：

*   一个圆圈就是一个圆圈。您是否对每个单元都遵循 Bresenham 的循环算法？相对于（0,0），您似乎只能计算一次圆。然后，对于 (x,y) 处的单位，您可以简单地查找圆圈并将圆圈中的点偏移到 (x,y)，然后将您的战争迷雾逻辑应用于该单位。

*   战争迷雾仅对最近移动的单位有所改变。如果一个单元是静止的，那么您可能不需要再次计算它的可见性。您能否将这种优化应用于您的战争迷雾可见性规则？

*   Bresenham 的圆算法可帮助您绘制圆的边缘。你如何填充圆圈的内部？您是否应该找到更好的算法来填充范围的内部？

**有评论询问有关使用生成的圆圈的更多详细信息，因此我在此添加一些注释。**（编辑答案是否可以做到这一点？抱歉，我对 Stack Exchange 比较陌生。）

“战争迷雾”通常意味着一个单位可以看到它周围的一些半径。你单位的半径是多少？每种单位类型是否有不同的半径？有多少种单位类型？

假设一种单位类型的可见范围半径为 5 个方格。这给我们留下了一个看起来像这样的圆圈：

```
00001110000
00010001000
00100000100
01000000010
10000000001
10000x00001
10000000001
01000000010
00100000100
00010001000
00001110000 
```

由于我们有一个圆圈，我们知道我们不必做任何太难的事情来填充它。一个简单的算法将遍历最右边的 1 和最左边的 1 之间的每一行填充。这将比解决所有内部点的 Breshenham 算法快得多。

用实心圆圈，我们找到这个数组，然后：

```
00001110000
00011111000
00111111100
01111111110
11111111111
11111x11111
11111111111
01111111110
00111111100
00011111000
00001110000 
```

现在，如果我们有一个半径为 5 平方可见度的单位，将战争迷雾应用到该单位只是意味着将这个预先计算的数组应用到战争迷雾数组，这样这个预先计算的数组的中心就在我们所在的单位上加工。您可以使用简单的嵌套循环来做到这一点，一旦您计算了中心的偏移量并将数组的边界剪辑到地图的边缘。

如果你有几个不同的战争迷雾半径，你可以预先计算几个不同的数组。如果你有规则说你的战争迷雾会因障碍物（如地形或建筑物或景观）而变化，那么你必须做更多的处理，但仍然可以应用预计算的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T03:49:08.407

吻

为什么每次都需要计算一个圆？这太贵了。

像这样想。当您在paint.exe 中编辑图片时，选择了大画笔，您认为每次都在计算那个圆圈吗？当您在 Photoshop 中选择花哨或自定义形状的笔刷时，它是如何工作的？

你只需要计算一次圆，即使（我会硬编码，那里的哥们已经给了你一个快速通道）

```
const char circle[] = {
00001110000
00011111000
00111111100
01111111110
11111111111
11111x11111         <-- put this into a static C array
11111111111
01111111110
00111111100
00011111000
00001110000   
} 
```

在那里，现在您可以使用该阵列与您的整个战争迷雾阵列进行比较。如果你遇到 0，如果你有一个 1，什么也不做（你可能有重叠），然后在你的迷雾数组上设置一个。

如果您需要具有不同站点范围的单元，那么您可以为此计算或硬编码一个数组。最多你会用完一千字节的内存，但你会节省很多周期。

但是如果有障碍怎么办？那么你可能需要制作另一个包含高度数组的地图（你已经有了这个吗？）或视图阻挡区域。让我们说这是一个视野阻挡区域（高度无关紧要，它只是阻挡视野）。而不是直接比较您的视图圆数组（上面列出）。您需要将它与视图阻塞数组（也是 1 和 0）进行比较在视图阻塞数组中遇到一个的点，然后您将拥有需要设置为可见的区域。

我在那里的沟通工作有点糟糕，如果你不明白，我会回复你。

话虽如此，无论如何这可能是一个糟糕的方法。如果您每次移动一个单元时重新计算整个网格，这将很容易实现，但这将非常缓慢且效率低下。为此，您必须在 FOW 阵列移动后清理其上的单位标记。（在不清屏或双缓冲的情况下思考 2d 动画）

# javascript - 基于 Python websocket 的应用框架/服务器

> ID：13936371
> 
> 赞同：1
> 
> 时间：2012-12-18T15:38:11.840
> 
> 标签：javascript, python, frameworks, webserver, websocket

我想编写一个基于“云”的应用程序来交互式地开发游戏。多年来，我一直在用 Python 开发应用程序和工具，但到目前为止，它们还没有采用“客户端 <-> 服务器”模型。

**我不想得到任何比较。我想请教专家，哪个工具能够解决这个特定问题**

我花了两个多星期的时间寻找正确的解决方案，我发现了很多不同的服务器/框架。我是客户端服务器世界的新手，所以我无法判断这些库的真正优势或劣势。

我将大量使用 websockets（服务器端的 Python，客户端的 js），我想选择最好的 Python 服务器/框架。

问题是，哪个 python 服务器/框架：

1.  将适用于基于大云的应用程序开发
2.  将使我有可能轻松使用 websockets
3.  将提供良好的可扩展性 - 我想为很多用户提供服务
4.  会给我一个很好的、适合的框架来开发这样的应用程序（或者我应该开发我自己的基于像 Tornado 这样的服务器的框架？）
5.  会很快（有上述假设）
6.  将允许我在客户端和服务器之间使用一些基于 websocket 的“rpc”解决方案

我在研究过程中发现的解决方案包括：

*   [姜戈](https://www.djangoproject.com/)
*   [龙卷风](http://www.tornadoweb.org/)
*   [扭曲的](http://twistedmatrix.com/trac/)
*   [气旋](http://cyclone.io/)
*   [gevent](http://www.gevent.org/) + [gunicorn](http://gunicorn.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:45:16.593

如果您只想使用 Python，那么 Twisted 是一个不错的选择。Django 没有 web sockets 实现，虽然 github 上的项目很少，但仍然不推荐，因为 Django 在 wsgi 上运行。Tornado 也适用于 websockets。

如果您处于起步阶段并正在探索选项，我强烈建议您使用 Node.js。它非常适合异步事件处理。顾名思义，它的 javascript 不是一些 python 框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:54:09.503

我会选择[Autobahn Websockets](http://autobahn.ws)（基于 Twisted）框架。它有一个干净的实现并且经过了很好的测试（另外它有一个 JS 客户端库）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-24T14:14:06.183

你可以试试 [http://websockets.readthedocs.io/en/stable/intro.html](http://websockets.readthedocs.io/en/stable/intro.html) 我已经上传了一个使用 Python3.5 的小演示 [​​https://www.youtube.com/watch?v=BgpPm9N338s](https://www.youtube.com/watch?v=BgpPm9N338s)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:33:10.140

我正在使用**pywebsocket**，简单而小巧...

您可以在此处获取代码 (96 KB)：[http ://code.google.com/p/pywebsocket/](http://code.google.com/p/pywebsocket/)

*提示：*

尝试独立版本而不是 Apache 附加版本

如果您需要 hixie 支持，请在启动服务器时添加 --allow-draft75

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T15:44:38.263

我经常使用 Tornado 网络服务器和 SockJS 作为灵活的传输层（为不同的浏览器提供 websocket 或“几乎 websocket”功能）。该技术堆栈将解决#2，将成为#4 和#6 的良好基础。但从这个角度来看：

> 适用于基于大云的应用程序开发提供良好的
> 
> 可扩展性 - 我想为很多用户提供服务

这些问题只能在某种程度上用 Python 框架“解决”。如果你真的需要可扩展的实时应用程序，它适用于很多用户，我建议你看看 Erlang/OTP 堆栈。

# java - 如何打印或获取在服务器上运行的应用程序的 JRE 版本？

> ID：13936373
> 
> 赞同：5
> 
> 时间：2012-12-18T15:38:12.987
> 
> 标签：java

我的意思是使用 javacode 我想找到应用程序的 JRE 版本，而不是服务器。在我的生产服务器中，我有成千上万的 java 应用程序，如 tomcat、websphere、axway 等。我想知道特定的应用程序 jre 版本。我将编写一个类，我想使用它进行打印。该类将被放置在特定的应用程序中。

我试过[这个链接](https://stackoverflow.com/questions/222187/how-to-check-jre-version-prior-to-launch)，但我没有得到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T16:00:19.340

您应该尝试`System.out.println(System.getProperty("java.version"));` 我已经成功测试它打印用于运行代码的实际 Java 版本。

# java - JPanel 在 JFrame 展开之前不显示

> ID：13936378
> 
> 赞同：0
> 
> 时间：2012-12-18T15:38:31.880
> 
> 标签：java, swing, jframe, jpanel, visible

这对我来说毫无意义。我有一个从我的主类调用的完整登录屏幕，问题是用于保存文本区域等的 JPanel 在我单击窗口边缘之前不会显示（展开它）

这是我的代码：

### 主要的

```
 import javax.swing.*;
    import java.awt.*;
    import java.awt.event.*;

public class SchoolSystem
{

public static void main (String [] args)
{

     Login lg = new Login();

}
} 
```

### 登录

```
 import javax.swing.*;
    import java.awt.*;
    import java.awt.event.*;

 public class Login extends JFrame implements ActionListener
 {

 JFrame frame;

 JButton SUBMIT;
 JPanel panel;
 JLabel label1,label2;
 public Menus m = new Menus();
 final JTextField  text1,text2;

  {
      frame = new JFrame("Welcome");
      frame.setSize(310,110);
      frame.setVisible(true);
      label1 = new JLabel();
      label1.setText("User ID:");
      text1 = new JTextField(15);

      label2 = new JLabel();
      label2.setText("Password:");
      text2 = new JPasswordField(15);

      SUBMIT=new JButton("LOGIN");

      panel=new JPanel(new GridLayout(3,1));
      panel.add(label1);
      panel.add(text1);
      panel.add(label2);
      panel.add(text2);
      panel.add(SUBMIT);
      add(panel,BorderLayout.CENTER);
      SUBMIT.addActionListener(this);
      text2.addActionListener(this);
      setTitle("Welcome");
      frame.add(panel);
  }

 public void actionPerformed(ActionEvent ae)
      {
          //Gets the text inside the User ID and Password Panels
          String value1=text1.getText();
          String value2=text2.getText();

          //Compare text to actual ID and password, Act accordingly
          //In this case show a Menu for the Head Teacher
          if ((value1.equals("Admin") && value2.equals("1234"))){
          m.adminMenu();
          frame.setVisible(false);
          }
          else{
          if (value1.equals("Teach") && value2.equals("0000")) {
          m.teacherMenu();
          frame.setVisible(false);
          }

          else{
          JOptionPane.showMessageDialog(this,"Incorrect login or password",
          "Error",JOptionPane.ERROR_MESSAGE);
          }
          }
      }

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:43:25.470

*   `frame.setVisible(true);`必须是最后一行代码，毕竟`JComponents`都加到`JFrame`

*   最后的代码行可能是`frame.pack();`和`frame.setVisible(true);`

*   用于`JDialog`这项工作，而不是`JFrame`,

*   最好的方法是使用`CardLayout`（`JFrame.pack()`从 切换`logon panel`到后调用`another panel(s)`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T22:48:15.200

正如其他人所说，`frame.setVisible(true)`应该是最后一行代码。但是，如果您想保留代码原样，那么您应该`frame.revalidate()`在 GUI 代码的末尾调用，就在初始化程序块的右大括号之前。

# ajax - jquery-ui-map 如何在第二页显示完整的地图

> ID：13936379
> 
> 赞同：0
> 
> 时间：2012-12-18T15:38:33.517
> 
> 标签：ajax, google-maps, jquery-ui-map

我可以在文档的第一页上显示谷歌地图。当我尝试将地图放在第二页时，它是不完整的。我可以重新加载页面，然后可以看到完整的地图。我尝试了不同的时间来创建页面（文档就绪、pagecreate、pageinit、pageshow 等），但均未成功。我已经将代码精简到最低限度，并且发生了同样的现象，所以我将我的示例代码包括在内。不幸的是，它仍然使用 jquery.mobile-1.2.0.css 和 jquery.ui.map.js 这两个文件。我认为必须有一些我不了解的关于 ajax 的非常基本的东西。

```
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8">
<title>TEST</title>

<link href='http://fonts.googleapis.com/css?family=Cantarell:700italic'
rel='stylesheet' type='text/css'>
<link href="css/jquery.mobile-1.2.0.css" rel="stylesheet"
type="text/css" />

<script type="text/javascript"
    src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script type="text/javascript"
    src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js">
</script>
<script type="text/javascript"
src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="ui/jquery.ui.map.js"></script>
<script>
var newyork = new google.maps.LatLng(40.745176,-74.006859);
var boston = new google.maps.LatLng(42.369706,-71.06036);
var washington = new google.maps.LatLng(38.908133,-77.036922);
var mobileDemo = {
    'center': '40.745176,-74.006859',
    'zoom': 7
};

function initializeMap() {
    $('#map_canvas').gmap({ 
        'center': mobileDemo.center, 
        'zoom': mobileDemo.zoom, 
        'disableDefaultUI':false 
    });
}

  function populateMap() {
    $('#map_canvas').gmap('addMarker', {
       'position': newyork,
        'bounds': true
    } ).click(function() {
        $('#map_canvas').gmap('openInfoWindow', {
            'content': 'New York'
        }, this);
    });
$('#map_canvas').gmap('addMarker', {
    'position': boston,
    'bounds': 'true'
} ).click(function() {
    $('#map_canvas').gmap('openInfoWindow', {
        'content': 'Boston'
    }, this);
    });
    $('#map_canvas').gmap('addMarker', {
        'position': washington,
        'bounds': 'true'
    } ).click(function() {
        $('#map_canvas').gmap('openInfoWindow', {
            'content': 'Washington'
        }, this);
    });
}

$('#selectPage').live("pageinit", function () {
    'use strict';
    initializeMap();
    populateMap();
}); 

</script>

</head>

<body>
    <div data-role="page" id="homePage">
        <div data-role="content">
            <div><a href="#selectPage">View the map</a></div>
        </div>
    </div>

    <div data-role="page" id="selectPage">
        <div data-role="content">
        <div>
            <div id="map_canvas" style= "width:100%; height: 350px">   </div>
        </div>
        </br>
        <div><a href="#homePage">Back to the home page</a></div>
    </div>
</div>

<body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:29:28.337

当您引用下一页时，您必须声明链接不通过 ajax 加载。这可以通过多种方式完成：

1.) 声明属性 data-ajax="false"

```
<a href="file:///pathToYourHtmlPage/yourNextPage.html" data-ajax="false"></a> 
```

2.) 声明属性 rel="external"

```
<a href="file:///pathToYourHtmlPage/yourNextPage.html" rel = "external"></a> 
```

通过：jQuery Mobile 文档：http: [//jquerymobile.com/demos/1.2.0/#/demos/1.2.0/docs/pages/page-links.html](http://jquerymobile.com/demos/1.2.0/#/demos/1.2.0/docs/pages/page-links.html)

# .net - "Hello World".ShowDialog() 在 VB.NET 中是不可能的

> ID：13936382
> 
> 赞同：0
> 
> 时间：2012-12-18T15:38:55.460
> 
> 标签：.net, vb.net

假设我在*String* **`ShowDialog`**上有一个扩展方法，它显示一个带有指定字符串的消息框。

为什么我现在做不到

```
"Hello World".ShowDialog() 
```

并且需要一起玩

```
Call "Hello World".ShowDialog() 
```

或者

```
CStr("Hello World").ShowDialog() 
```

甚至

```
Dim myString = "Hello World"
myString.ShowDialog() 
```

甚至

```
If "Hello World".ShowDialog() = Windows.Forms.DialogResult.OK Then
    CStr("Thank You!").ShowDialog()
End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:53:26.587

在 VB.Net 中，表达式必须以标识符开头。

```
"Hello World".ShowDialog() 
```

不以标识符开头，因此您必须使用以下[`Call`语句](http://msdn.microsoft.com/en-us/library/sxz296wz%28v=vs.110%29.aspx)：

> 当被调用的表达式不以标识符开头时，通常使用 Call 关键字。不建议将 Call 关键字用于其他用途。

# c# - My Excel 2010 Add in 仅在打开空白工作簿时显示。打开现有文档时不会显示

> ID：13936388
> 
> 赞同：6
> 
> 时间：2012-12-18T15:39:04.343
> 
> 标签：c#, excel, vsto, add-in

我们制作了一个正确安装的 excel 插件，仅在从主图标（或空白工作簿）打开 Excel 时才会显示。打开任何现有保存的 Excel 文档时，它不会显示在工具栏上。

我已确保在打开现有文档时，在文件 -> 选项 -> 插件下，它已在 COM 插件中正确检查。为了使用我们的插件，我们必须打开一个空白工作簿，并将我们现有的文件拖到空白工作簿中。

有谁知道为什么它只会出现在空白工作簿的功能区中而不是现有的 .xlsx 文件中？

我什至运行了一个测试，我打开一个空白工作簿，确认加载项在功能区上，在单元格中放入一些文本，将其保存到我的桌面，关闭它，然后重新打开它。然后它不会出现。这个插件是用 VS2010 制作的。

这是来自“ThisAddIn.cs”的代码

```
public partial class ThisAddIn
{
    private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
    }

    private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
    {
    }

    #region VSTO generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InternalStartup()
    {
        this.Startup += new System.EventHandler(ThisAddIn_Startup);
        this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
    }

    #endregion
} 
```

这是我们制作的 Ribbon.cs 文件中的代码......它所做的只是填充一些字段并进行设置：

```
private void MyRibbon_Load(object sender, RibbonUIEventArgs e)
{

  Excel._Workbook activeWorkbook = (Excel._Workbook)Globals.ThisAddIn.Application.ActiveWorkbook;
  if (activeWorkbook.Path == "")
  {
    string pathMyDocuments = System.Environment.GetFolderPath(System.Environment.SpecialFolder.MyDocuments);
    this.editBox1.Text = pathMyDocuments;
  }
  else
  {
    this.editBox1.Text = activeWorkbook.Path;
    this.fileBox.Text = "Converted_" + activeWorkbook.Name;
  }

  this.folderBrowserDialog1.RootFolder = System.Environment.SpecialFolder.MyComputer;
  this.folderBrowserDialog1.ShowNewFolderButton = true;

  //populate the dropdown box with spreadsheet templates
  using (SqlConnection conn = new SqlConnection("<removed for stack overflow>"))
  {
    using (SqlCommand command = new SqlCommand("<sql command text removed for SO", conn))
    {
      command.CommandType = CommandType.Text;

      conn.Open();
      SqlDataReader reader = command.ExecuteReader();

      while (reader.Read())
      {
        RibbonDropDownItem item = Globals.Factory.GetRibbonFactory().CreateRibbonDropDownItem();
        item.Label = reader["MasterSpreadsheetName"].ToString();
        ddlSpreadsheetTemplate.Items.Add(item);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-04T10:12:27.530

抱歉回答晚了，但这是很常见的问题，所以无论如何我都会回答。我自己也遇到过几次，和我插件的代码无关。问题出在资源管理器的预览窗格中。[![在此处输入图像描述](../Images/602add6f991a3b03e3c2aeed10cbcf78.png)](https://i.stack.imgur.com/k4RpF.png)当您在资源管理器中选择您的 Excel 文件时，它会启动一个 Excel 实例以供预览。然后你在真正的 Excel 中打开你的文件，Excel 中的一些错误会阻止所有插件加载。您的插件甚至不会启动任何代码，因此您无法从插件内部执行任何操作。唯一的方法是不要对 excel 文件使用预览。更糟糕的是，在预览一个文件后，Excel 进程仍然挂在内存中，因此插件将无法工作，直到您从任务管理器中将其杀死。此错误存在于 Excel 2007、2010、2013 甚至 2016 中。

# c# - 每当我尝试“writeBytes”时，libnodave 都会超时

> ID：13936391
> 
> 赞同：1
> 
> 时间：2012-12-18T15:39:15.607
> 
> 标签：c#, libnodave

我正在使用该[`libnodave`](http://libnodave.sourceforge.net/)库与 Siemens S7 PLC 进行通信。它工作正常，直到我尝试写入字节。我几乎总是超时。

我必须连接的代码：

```
fds.rfd = libnodave.openSocket(port, address.ToString());
fds.wfd = fds.rfd;

if (fds.rfd > 0) {
    di = new libnodave.daveInterface(fds, "IF1", 0, libnodave.daveProtoISOTCP, libnodave.daveSpeed187k);
    di.setTimeout(10000000);

    dc = new libnodave.daveConnection(di, 0, 0, 2);

    if (0 == dc.connectPLC()) {
        _status.connected = true;
    }
} 
```

并写入字节（在另一种方法中，在稍后阶段调用）：

```
dc.writeBytes(libnodave.daveDB, datablock, address, bytestowrite, buftosend); 
```

几乎总是返回-1025（超时）。

更改超时，或直接在写入之前移动连接例程都没有效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:47:16.157

一如既往，事情变得很奇怪，并且正在进行多线程，问题就出现了。

我在打电话`writeBytes`的时候打电话`readBytes`还在继续，弄乱了结果。

添加一个互斥锁和更好的时间修复它。

# c# - C#中ContextBoundObject和Form的多重继承？

> ID：13936399
> 
> 赞同：0
> 
> 时间：2012-12-18T15:39:39.130
> 
> 标签：c#, winforms

我需要一个从`ContextBoundObject`拦截继承的表单，能够使用某些方法。问题是 C# 中不允许多重继承。

```
public partial class FrmListItems : Form, ContextBoundObject
{

} 
```

有谁有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:47:22.640

您始终可以创建一个继承 a`ContextBoundObject`并实现所有所需行为的“模型”类，而不是使用[数据绑定](http://msdn.microsoft.com/en-us/library/ef2xyb33.aspx)来填充表单上的 UI 元素以在屏幕上显示所有必要的数据。您可以查看各种模式，例如 MVx 模式（[MVP](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter)、[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)、[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)），以清楚地将您的业务逻辑与 UI 分开。

即使 C# 具有多重继承，我也会建议避免这种继承，因为这违反了这些类之间的“IS A”关系。

您始终应该更深入地考虑您的设计，以降低维护成本。放入一类 UI 和业务逻辑总是会导致难以维护和发展的晦涩代码。

例如，我很难理解您将如何测试您的解决方案。使用单独的类也大大简化了可测试性。

# mysql - 从另一个查询的结果中查询第二个 mysql 表

> ID：13936405
> 
> 赞同：1
> 
> 时间：2012-12-18T15:39:58.710
> 
> 标签：mysql, select, nested-queries

我有两个 mysql 表：myTable1 和 b。我的表2

首先，我需要查询第一个表（myTable1）以获取“custid”和“age”，然后查询第二个表（myTable2）以获取与中间结果中的任何记录匹配的所有记录。

第一个查询和结果如下所示：

从 mtyTable1 中选择不同的 custid，年龄，其中 itemid 在（2762、2763）

```
custid      age
"8897953"   53.1839
"1433515"   49.5507
"7638023"   59.4099
"2310899"   46.8374
"6736604"   47.3001 
```

现在，如何编写一个高效的嵌套查询来搜索“myTable2”以查找所有记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:42:05.763

`JOIN`两张表：

```
SELECT t1.*
FROM yourTable2 t1
INNER JOIN
(
    select distinct custid,age 
    from mtyTable1 where itemid in ( 2762 , 2763)
) t2 ON t1.custid = t2.custid AND t1.age = t2.age 
```

**或者：**

```
SELECT t1.*
FROM yourTable2 t1
INNER JOIN yourTable1 t2 ON t1.custid = t2.custid AND t1.age = t2.age
WHERE t2.itemid in ( 2762 , 2763) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:41:55.263

尝试 ：

```
SELECT DISTINCT t2.*
FROM mtyTable1 t1 INNER JOIN Table2 t2 ON t1.custid=t2.custid AND t1.age=t2.age
WHERE t1.itemid IN ( 2762 , 2763) 
```

# model-view-controller - 使用 MVC 从 SharePoint 2010 文档库下载文档

> ID：13936411
> 
> 赞同：0
> 
> 时间：2012-12-18T15:40:13.903
> 
> 标签：model-view-controller, sharepoint, sharepoint-2010, sharepointdocumentlibrary

嗨，我想在 MVC 视图中显示文档列表，并能够在单击时下载它们。我自己尝试了一个解决方案，如下所示。我已经为此苦苦挣扎了很长时间，因此任何建议都将不胜感激。

```
namespace SharePointMVC.Controllers
{
    [HandleError]
    public class HomeController : Controller
    {
            DefaultModel Lists = new DefaultModel();
            string siteURL = "http://MYSPSSITE";
            string documentListName = "MY DOCUMENT LIBRARY";
            ListItemCollection listItems = null;
            using (ClientContext clientContext = new ClientContext(siteURL))
            {
                List documentsList = clientContext.Web.Lists.GetByTitle(documentListName);

                CamlQuery camlQuery = new CamlQuery(); ;
                camlQuery.ViewXml =
                    @"<View>

                     <Query>
                     <Where>
                     <Eq>
                     <FieldRef Name ='" + name + @"'/>

                     <Value Type ='" + type + "'>" + value + @"</Value>
                     </Eq>

                     </Where>
                     <RowLimit>" + rowLimit.ToString() + @"</RowLimit>

                     </Query>
                     </View>";

                listItems = documentsList.GetItems(camlQuery);

                clientContext.Load(documentsList);
                clientContext.Load(listItems);

                clientContext.ExecuteQuery();

            }

            return listItems;
        }

        private static ListItem GetDocumentFromSP(String documentName)
        {
            ListItemCollection listItems = GetListItemCollectionFromSP("FileLeafRef", documentName, "Text", 1);
            return (listItems != null && listItems.Count == 1) ? listItems[0] : null;
        }

        public Stream DownloadDocument(string SiteURL, string documentName)
        {
            ListItem item = GetDocumentFromSP(documentName);
            if (item != null)
            {
                using (ClientContext clientContext = new ClientContext(SiteUrl))
                {
                    FileInformation fileInformation = Microsoft.SharePoint.Client.File.OpenBinaryDirect(clientContext, item["Outline.docx"].ToString());
                    return fileInformation.Stream;
                }
            }

            return null;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:43:04.853

如果您没有太多要求（例如必须能够覆盖神奇的 5000 个文档标记），您可以使用 SPMetal 并运行 LINQ 查询。请注意，它有局限性，性能不如 CAML 查询，但它的工作原理都是一样的。

# c++ - 在 Win32 管道上将两个缓冲区组合成一次写入

> ID：13936412
> 
> 赞同：1
> 
> 时间：2012-12-18T15:40:16.493
> 
> 标签：c++, winapi, pipe, named-pipes, zeromq

我正在通过 Win32 命名管道实现[ZeroMQ 线路格式。](http://www.zeromq.org/whitepapers%3adesign-v01#toc5)该格式需要在消息前面加上其大小。我的界面看起来像`send(std::vector<unsigned char>)`这样，用户已经为其数据的确切大小分配了一个缓冲区，并且我基于`vector.size()`.

目前，我正在将大小标头以独立写入的方式发送到管道。但是，如果实际消息内容的后续写入失败，则数据流将处于错误状态，接收方期望更多数据，但发送方认为该消息失败。

我想将大小标头和内容组合成一个管道写入，因此标头不会自行通过。但我想避免复制`vector`'s 的内容，因为它可能很大。有没有办法将两个缓冲区组合成一个 Win32 管道写入？

如果没有，我总是可以添加类似的东西`unsigned char *getPipeBuffer(size_t size)`，为标题分配额外的空间。但是最好保持界面不变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:32:52.530

你考虑过使用管道`PIPE_READMODE_MESSAGE`吗？通过这种方式，您可以免费获得消息大小，而无需将其包含在消息本身中。

写入时，写入操作仅在写入整个消息时完成。

读取时，读取操作读取一条消息。或者，如果消息不适合管道缓冲区，则读取其中的一部分，然后报告有更多数据等待，并且您需要再次调用它以接收其余消息。

不需要传递消息大小，因为接收者总是知道它何时读完一条消息。

请注意，对于管道客户端，有必要通过调用来更改管道读取模式`SetNamedPipeHandleState`。

更多信息[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365605%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T18:33:48.983

请注意，您用作参考的页面在开头说，“警告：此文本已被弃用，并且指的是旧版本的 ØMQ。它保留在这里是为了历史利益。不要使用这个来学习 ØMQ。”

这不是 0MQ 线路格式。如果您想要 0MQ 线路格式，请访问 RFC 站点[http://rfc.zeromq.org/spec:15](http://rfc.zeromq.org/spec:15)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:07:07.957

我的第一个反应是使用[WriteFileGather](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365749%28v=vs.85%29.aspx)但这对您传递给函数的缓冲区对齐有严格的要求，这可能难以执行，并且在检查文档后似乎这可能根本不适用于管道，虽然我不明白为什么它不会。

我认为进行两次不同的写入，一次用于大小，一次用于数据应该没问题。你问如果第二次写入失败并且流处于某种不一致的状态会发生什么，而另一端需要更多数据。但即使是单个写入请求也可能使管道处于这种状态：例如，WriteFile 写入的字节数可能少于请求的字节数，因此需要进行第二次写入，而第二次写入可能会失败。

# php - 使用 SQL/PHP 进行排序

> ID：13936413
> 
> 赞同：-1
> 
> 时间：2012-12-18T15:40:16.700
> 
> 标签：php, mysql, sorting

我想使用查询的 WHERE 函数进行排序。现在唯一的问题是我希望首先显示所有产品，当您单击排序时，它会在页面上排序。

## 排序查询

```
$result=mysql_query("SELECT * FROM artikels WHERE   
        soort='".mysql_escape_string($_REQUEST['soort'])."'"); 
```

## 显示所有查询

```
$result=mysql_query("SELECT * FROM artikels WHERE soort='dahua' "); 
```

不知何故，我需要将这两个结合起来，但是当我这样做时，它会停止工作，甚至不会排序。当我分离排序或显示所有查询时，它确实有效。

```
$result=mysql_query("SELECT * FROM artikels WHERE 
       soort-'dahua' AND soort='".mysql_escape_string($_REQUEST['soort'])."'"); 
```

如果有人帮助我解决这个问题，我会很高兴，因为我现在被困在我的项目上。

非常感谢，

〜戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:49:22.167

要从表中过滤记录，请使用`WHERE`例如

```
WHERE soort='dahua' 
```

过滤具有多个匹配项的记录，`OR`例如使用。

```
WHERE soort='dahua' OR soort='somethingelse' 
```

`ORDER BY`您使用例如对结果进行排序

```
ORDER BY soort 
```

您可以添加`DESC`或`ASC`指示方向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:42:40.697

我的第一个猜测，不知道“不起作用”是什么意思（语法错误？结果不正确？），是你有`soort-'dahua'`而不是`soort='dahua'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:48:36.367

这个问题很难回答，主要是因为`WHERE`过滤和不排序，但我认为你可能想要执行`OR`：

```
$sql = sprintf("SELECT * 
    FROM artikels 
    WHERE soort='dahua' OR soort='%s'", 
        mysql_real_escape_string($_REQUEST['soort'])
);
$result=mysql_query($sql); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T15:49:01.997

您可以使用[ORDER BY](http://dev.mysql.com/doc/refman/5.0/en/sorting-rows.html)子句对行进行排序。这是一个人为的例子

`SELECT name, age FROM users ORDER BY name DESC;`

# teamcity - TeamCity 发送电子邮件 FxCop 通知

> ID：13936419
> 
> 赞同：0
> 
> 时间：2012-12-18T15:40:43.710
> 
> 标签：teamcity, fxcop

我目前已将 FxCop 集成为我的一个 TeamCity 项目的构建步骤。它在构建后运行并输出错误。

![在此处输入图像描述](../Images/e71979a92955384d899ef8f1b2889355.png)

它工作得很好。然而，我真正想要的是让它在每次运行时通过电子邮件向我发送错误概述，这样我就不必每次都登录到 TeamCity UI。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:51:26.223

网站上的个人资料面板中有一个电子邮件通知功能，您可以通过它配置 TeamCity 以向您发送有关来自特定构建配置、特定项目或所有构建的构建的电子邮件。

我不确定这是否有足够的功能来涵盖通过电子邮件向您发送所需的信息，您需要自己查看（这是在右上角写有您姓名的链接以进行澄清）。如果没有足够的选项，则需要进一步的自定义构建步骤。这需要下载 FxCop 日志，将其处理成您想要的人类可读的电子邮件，然后自己发送出去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:21:41.913

我刚刚发现 TeamCity 实际上默认以以下电子邮件格式发送失败的邮件！

```
> Build myBuild :: Build #15 successful (Inspections total: 5288 (-1),
> errors: 3350 (-1))  Agent: WIN-F6GHH45VG7K 
```

# r - 无法在 Ubuntu 上的 RStudio 服务器上安装 e1071

> ID：13936420
> 
> 赞同：1
> 
> 时间：2012-12-18T15:40:46.870
> 
> 标签：r, installation, rstudio-server

我正在尝试在通过 Web 浏览器访问的 RStudio 服务器上安装 e1071 软件包。这是我得到的错误：

```
> install.packages("e1071")
Installing package(s) into ‘/home/mc/R/library’
(as ‘lib’ is unspecified)
trying URL 'http://cran.nexr.com/src/contrib/e1071_1.6-1.tar.gz'
Content type 'application/x-gzip' length 258910 bytes (252 Kb)
opened URL
==================================================
downloaded 252 Kb

The downloaded source packages are in
    ‘/tmp/Rtmp3a2DZB/downloaded_packages’
Error in system(paste(which, i), intern = TRUE, ignore.stderr = TRUE) : 
  cannot popen '/usr/bin/which pdflatex 2>/dev/null', probable reason 'Cannot allocate memory' 
```

有时当我尝试这个时，我没有收到错误消息，但 e1071 包仍然没有出现在包列表中。

这是我的 sessionInfo()

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C         LC_TIME=C           
 [4] LC_COLLATE=C         LC_MONETARY=C        LC_MESSAGES=C       
 [7] LC_PAPER=C           LC_NAME=C            LC_ADDRESS=C        
[10] LC_TELEPHONE=C       LC_MEASUREMENT=C     LC_IDENTIFICATION=C 

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] caret_5.15-045  cluster_1.14.3  reshape_0.8.4   plyr_1.8       
[5] lattice_0.20-10 doMC_1.2.5      multicore_0.1-7 iterators_1.0.6
[9] foreach_1.4.0  

loaded via a namespace (and not attached):
[1] codetools_0.2-8 grid_2.15.2     tools_2.15.2 
```

有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:06:42.623

请注意，您可以这样做

```
sudo apt-get install r-cran-e1071 
```

除此之外，您的错误*可能*表明缺少资源，可能是 RAM，还可能缺少`r-base-dev`您想要在本地构建包之前安装的资源。

*编辑：*我的立场是正确的。这曾经作为一个包存在，但后来似乎已被撤回。然而，它仍在[迈克尔的 ppa](https://launchpad.net/ubuntu/+source/e1071)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:25:08.060

也许您可以通过以下方式重新启动您的 RStudio 服务器

```
sudo rstudio-server restart 
```

# sql - 在 Postgresql 中选择最近记录的更好方法

> ID：13936422
> 
> 赞同：3
> 
> 时间：2012-12-18T15:40:50.240
> 
> 标签：sql, postgresql

从表中选择上一个和下一个记录的最佳方法是允许用户查看给定产品名称的最近产品，例如奶酪

产品表定义为

```
create table toode (
  toode char(20) primary key, -- product code
  name char (100)    -- product name
  ) 
```

下面的代码似乎可以工作，但看起来有点难看。在 Postgres 中实现这一点的最佳方法是什么？

```
CREATE temp table toodevalik1 on commit drop as 
SELECT * 
FROM toode 
WHERE name  >= 'Cheese'
order by name, toode
limit 50;

CREATE temp table toodevalik2 on commit drop as 
SELECT * 
FROM toode 
WHERE name  < 'Cheese'
order by name desc, toode desc
limit 50;

SELECT * 
FROM toodevalik1
union all
SELECT * 
FROM toodevalik2
order by name, toode; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T04:23:22.743

使用[CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html)可能会更快。
不确定，这取决于。检查与[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)。

```
WITH x AS (
    SELECT *, row_number() OVER (ORDER BY name, toode) AS rn
    FROM   toode
    )
, y AS (
    SELECT COALESCE(
          (SELECT rn FROM x WHERE fest >= 'Cheese' ORDER BY name, toode LIMIT 1)
         ,(SELECT max(rn) FROM x) -- fallback for value > all
        ) AS rn_mid
    )
SELECT *
FROM   x, y -- cross join ok, 1 row from y if any rows exist.
WHERE  x.rn BETWEEN y.rn_mid - 50 AND y.rn_mid + 50 
ORDER  BY rn; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:24:55.297

```
(select name from toode where name > 'Cheese' order by name limit 20)
union all
(select name from toode where name < 'Cheese' order by name desc limit 20) 
```

该查询应该给出围绕“奶酪”的 40 条记录

# sql - 计算时间戳数据之间持续时间的统计信息

> ID：13936426
> 
> 赞同：7
> 
> 时间：2012-12-18T15:40:59.397
> 
> 标签：sql, sql-server

我正在使用 SQL Server 存储有关票证验证的数据。单票可以在多个地方进行验证。我需要按“进入”和“退出”位置对记录进行分组，并计算在两次验证之间通过的持续时间的统计信息。这是表格（为清楚起见进行了简化）：

```
CREATE TABLE TestDuration
(VALIDATION_TIMESTAMP datetime, 
ID_TICKET bigint, 
ID_PLACE bigint) 
```

和数据：

```
INSERT INTO TestDuration(VALIDATION_TIMESTAMP,ID_TICKET,ID_PLACE) VALUES ('2012-07-25 19:24:05.700', 1, 1)
INSERT INTO TestDuration(VALIDATION_TIMESTAMP,ID_TICKET,ID_PLACE) VALUES ('2012-07-25 20:08:04.250', 2, 2)
INSERT INTO TestDuration(VALIDATION_TIMESTAMP,ID_TICKET,ID_PLACE) VALUES ('2012-07-26 10:18:13.040', 3, 3)
INSERT INTO TestDuration(VALIDATION_TIMESTAMP,ID_TICKET,ID_PLACE) VALUES ('2012-07-26 10:18:20.990', 1, 2)
INSERT INTO TestDuration(VALIDATION_TIMESTAMP,ID_TICKET,ID_PLACE) VALUES ('2012-07-26 10:18:29.290', 2, 4)
INSERT INTO TestDuration(VALIDATION_TIMESTAMP,ID_TICKET,ID_PLACE) VALUES ('2012-07-26 10:25:37.040', 1, 4) 
```

这是聚合查询：

```
SELECT VisitDurationCalcTable.ID_PLACE AS ID_PLACE_IN, 
VisitDurationCalcTable.ID_NEXT_VISIT_PLACE AS ID_PLACE_OUT, 
COUNT(visitduration) AS NUMBER_OF_VISITS, AVG(visitduration) AS AVERAGE_VISIT_DURATION 
FROM (
      SELECT EntryData.VALIDATION_TIMESTAMP, EntryData.ID_TICKET, EntryData.ID_PLACE, 
      (
       SELECT TOP 1 ID_PLACE FROM TestDuration 
          WHERE ID_TICKET=EntryData.ID_TICKET 
          AND VALIDATION_TIMESTAMP>EntryData.VALIDATION_TIMESTAMP 
          ORDER BY VALIDATION_TIMESTAMP ASC
      ) 
      AS ID_NEXT_VISIT_PLACE, 
      DATEDIFF(n,EntryData.VALIDATION_TIMESTAMP,
               (
                SELECT TOP 1 VALIDATION_TIMESTAMP FROM TestDuration WHERE ID_TICKET=EntryData.ID_TICKET and VALIDATION_TIMESTAMP>EntryData.VALIDATION_TIMESTAMP ORDER BY VALIDATION_TIMESTAMP ASC
               )
              ) AS visitduration 
     FROM TestDuration EntryData)
AS VisitDurationCalcTable 
WHERE VisitDurationCalcTable.ID_NEXT_VISIT_PLACE IS NOT NULL
GROUP BY VisitDurationCalcTable.ID_PLACE, VisitDurationCalcTable.ID_NEXT_VISIT_PLACE 
```

查询有效，但我很快就遇到了性能问题。对于 40K 行的表查询执行时间约为 3 分钟。我不是 SQL 专家，因此无法真正了解如何将查询转换为更快地工作。这不是一个重要的报告，大约每月只制作一次，但它让我的应用程序看起来很糟糕。我有一种感觉，我在这里错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T15:55:24.513

**TLDR 版本**

您显然缺少有助于此查询的索引。添加缺失的索引本身可能会导致一个数量级的改进。

如果您在 SQL Server 2012 上使用重写查询`LEAD`也可以这样做（尽管这也将受益于缺少的索引）。

如果您仍在 2005/2008 年，那么您**可以**对现有查询进行一些改进，但与索引更改相比，效果会相对较小。

**更长的版本**

为此需要 3 分钟，我假设您根本没有有用的索引，最大的胜利就是简单地添加一个索引（对于每月运行一次的报告，只需将三列中的数据复制到适当索引的`#temp`表中就足够了如果您不想创建永久索引）。

您说为清楚起见简化了表格，并且它有 40K 行。假设以下测试数据

```
CREATE TABLE TestDuration
  (
     Id                   UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,
     VALIDATION_TIMESTAMP DATETIME,
     ID_TICKET            BIGINT,
     ID_PLACE             BIGINT,
     OtherColumns         CHAR(100) NULL
  )

INSERT INTO TestDuration
            (VALIDATION_TIMESTAMP,
             ID_TICKET,
             ID_PLACE)
SELECT TOP 40000 DATEADD(minute, ROW_NUMBER() OVER (ORDER BY (SELECT 0)), GETDATE()),
                 ABS(CHECKSUM(NEWID())) % 10,
                 ABS(CHECKSUM(NEWID())) % 100
FROM   master..spt_values v1,
       master..spt_values v2 
```

您的原始查询在我的机器上花费了 51 秒时间`MAXDOP 1`和以下 IO 统计信息

```
Table 'Worktable'. Scan count 79990, logical reads 1167573, physical reads 0
Table 'TestDuration'. Scan count 3, logical reads 2472, physical reads 0. 
```

[![计划一](../Images/820feff8afb4c0a01abee48e9547782f.png)](https://i.stack.imgur.com/IpQaP.jpg)

对于表中的 40,000 行中的每一行，它正在对所有匹配`ID_TICKET`行进行两种排序，以便按顺序识别下一个`VALIDATION_TIMESTAMP`

只需添加如下索引即可将经过的时间降至 406 毫秒，提高了 100 多倍（此答案中的后续查询假设该索引现已到位）。

```
CREATE NONCLUSTERED INDEX IX
  ON TestDuration(ID_TICKET, VALIDATION_TIMESTAMP)
  INCLUDE (ID_PLACE) 
```

现在该计划如下所示，其中 80,000 次排序和假脱机操作被索引查找所取代。

```
Table 'Worktable'. Scan count 0, logical reads 0, physical reads 0
Table 'TestDuration'. Scan count 79991, logical reads 255707, physical reads 0 
```

[![计划2](../Images/911f4cf3a80accce44d65364a6ff7b40.png)](https://i.stack.imgur.com/XCNZG.jpg)

然而，它仍在为每一行进行 2 次搜索。重写`CROSS APPLY`允许这些组合。

```
SELECT VisitDurationCalcTable.ID_PLACE            AS ID_PLACE_IN,
       VisitDurationCalcTable.ID_NEXT_VISIT_PLACE AS ID_PLACE_OUT,
       COUNT(visitduration)                       AS NUMBER_OF_VISITS,
       AVG(visitduration)                         AS AVERAGE_VISIT_DURATION
FROM   (SELECT EntryData.VALIDATION_TIMESTAMP,
               EntryData.ID_TICKET,
               EntryData.ID_PLACE,
               CA.ID_PLACE                                                          AS ID_NEXT_VISIT_PLACE,
               DATEDIFF(n, EntryData.VALIDATION_TIMESTAMP, CA.VALIDATION_TIMESTAMP) AS visitduration
        FROM   TestDuration EntryData
               CROSS APPLY (SELECT TOP 1 ID_PLACE,
                                         VALIDATION_TIMESTAMP
                            FROM   TestDuration
                            WHERE  ID_TICKET = EntryData.ID_TICKET
                                   AND VALIDATION_TIMESTAMP > EntryData.VALIDATION_TIMESTAMP
                            ORDER  BY VALIDATION_TIMESTAMP ASC) CA) AS VisitDurationCalcTable
GROUP  BY VisitDurationCalcTable.ID_PLACE,
          VisitDurationCalcTable.ID_NEXT_VISIT_PLACE 
```

这给了我 269 毫秒的经过时间

```
Table 'Worktable'. Scan count 0, logical reads 0, physical reads 0
Table 'TestDuration'. Scan count 40001, logical reads 127988, physical reads 0 
```

[![计划 3](../Images/5f852f3959e9eb08355c13ad9dc8c251.png)](https://i.stack.imgur.com/78xKS.jpg)

虽然读取次数仍然很高，但查找都是读取刚刚被扫描读取的页面，因此它们都是缓存中的页面。使用表变量可以减少读取次数。

```
DECLARE @T TABLE (
  VALIDATION_TIMESTAMP DATETIME,
  ID_TICKET            BIGINT,
  ID_PLACE             BIGINT,
  RN                   INT
  PRIMARY KEY(ID_TICKET, RN) )

INSERT INTO @T
SELECT VALIDATION_TIMESTAMP,
       ID_TICKET,
       ID_PLACE,
       ROW_NUMBER() OVER (PARTITION BY ID_TICKET ORDER BY VALIDATION_TIMESTAMP) AS RN
FROM   TestDuration

SELECT T1.ID_PLACE                                                        AS ID_PLACE_IN,
       T2.ID_PLACE                                                        AS ID_PLACE_OUT,
       COUNT(*)                                                           AS NUMBER_OF_VISITS,
       AVG(DATEDIFF(n, T1.VALIDATION_TIMESTAMP, T2.VALIDATION_TIMESTAMP)) AS AVERAGE_VISIT_DURATION
FROM   @T T1
       INNER MERGE JOIN @T T2
         ON T1.ID_TICKET = T2.ID_TICKET
            AND T2.RN = T1.RN + 1
GROUP  BY T1.ID_PLACE,
          T2.ID_PLACE 
```

然而，对我来说，至少将经过的时间略微增加到 301 毫秒（插入为 43 毫秒 + 选择为 258 毫秒），但这仍然是代替创建永久索引的好选择。

```
(Insert)
Table 'TestDuration'. Scan count 1, logical reads 233, physical reads 0

(Select)
Table 'Worktable'. Scan count 0, logical reads 0, physical reads 0
Table '#0C50D423'. Scan count 2, logical reads 372, physical reads 0 
```

[![计划](../Images/5c3b5a45d779450b8db8fcb7daef9ff0.png)](https://i.stack.imgur.com/ArPon.jpg)

最后，如果您使用的是 SQL Server 2012，您可以使用`LEAD`( [SQL Fiddle](http://www.sqlfiddle.com/#!6/d6fb2/1) )

```
WITH CTE
     AS (SELECT ID_PLACE AS ID_PLACE_IN,
                LEAD(ID_PLACE) OVER (PARTITION BY ID_TICKET 
                                         ORDER BY VALIDATION_TIMESTAMP) AS ID_PLACE_OUT,
                DATEDIFF(n, 
                         VALIDATION_TIMESTAMP, 
                         LEAD(VALIDATION_TIMESTAMP) OVER (PARTITION BY ID_TICKET 
                                                              ORDER BY VALIDATION_TIMESTAMP)) AS VISIT_DURATION
         FROM   TestDuration)
SELECT ID_PLACE_IN,
       ID_PLACE_OUT,
       COUNT(*)            AS NUMBER_OF_VISITS,
       AVG(VISIT_DURATION) AS AVERAGE_VISIT_DURATION
FROM   CTE
WHERE  ID_PLACE_OUT IS NOT NULL
GROUP  BY ID_PLACE_IN,
          ID_PLACE_OUT 
```

这给了我 249 毫秒的经过时间

```
Table 'Worktable'. Scan count 0, logical reads 0, physical reads 0
Table 'TestDuration'. Scan count 1, logical reads 233, physical reads 0 
```

[![计划 4](../Images/1001205f980644c5861ea34edbf4b4f9.png)](https://i.stack.imgur.com/8ILqx.jpg)

该`LEAD`版本在没有索引的情况下也表现良好。省略最佳索引会为计划增加额外`SORT`的内容，这意味着它必须读取我的测试表上更广泛的聚集索引，但它仍然在 293 毫秒的经过时间内完成。

```
Table 'Worktable'. Scan count 0, logical reads 0, physical reads 0
Table 'TestDuration'. Scan count 1, logical reads 824, physical reads 0 
```

# objective-c - objc_setAssociatedObject 在 iOS 中不可用吗？

> ID：13936429
> 
> 赞同：19
> 
> 时间：2012-12-18T15:41:23.073
> 
> 标签：objective-c, ios, xcode, objective-c-category

我正在尝试使用关联对象 API 将“属性”添加到类别中。

```
objc_setAssociatedObject(self, &kIsAnimatingAssocObjKey, animating, 
OBJC_ASSOCIATION_RETAIN_NONATOMIC); 
```

Xcode 抱怨：

> 函数“objc_setAssociatedObject”的隐式声明在 C99 中无效

和

> 使用未声明的标识符“OBJC_ASSOCIATION_RETAIN_NONATOMIC”

Xcode 4.5.2，iOS SDK 6，部署目标为 6。它不起作用。

obj_assoc上的[文章](http://www.techpaa.com/2012/04/adding-properties-to-categories-and.html)都没有提到我必须导入任何特殊的东西。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-18T15:43:33.490

只需导入运行时标头：

`#import <objc/runtime.h>`

# c++ - 如何在 C++ 中进行肥皂调用

> ID：13936430
> 
> 赞同：2
> 
> 时间：2012-12-18T15:41:29.197
> 
> 标签：c++, xml, soap, client

我试图弄清楚做一个独立于 wsdl 的 c++ 肥皂客户端的最佳方法是什么。

我需要的是只知道函数的名称和参数列表来发送和发送它并接收肥皂响应或类似的东西（我知道这并不像它那么简单）。

我的想法是做类似的事情： SOAP 请求和响应 使用 libcurl - C 或 [http://www.cplusplus.com/forum/general/16225/](http://www.cplusplus.com/forum/general/16225/)[读取和写入文件](https://stackoverflow.com/questions/4150710/soap-request-and-response-read-from-and-to-file-using-libcurl-c)

您能否指出最好的方法，或者最好的方法是使用像 gSoap 这样的库并在 c++ 代码中执行 gSoap 生成的类的 c++ 方法？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-01-23T14:00:51.850

请注意 gSOAP 是 GPL 许可的。限制较少的替代方案是**[Axis2/C++](http://axis.apache.org/axis/cpp/)**。

使用 Axis2/C++，您可以从 WSDL 生成存根，并使用生成的类在代码中调用 Web 服务

生成存根（是 Java，但这是一次性操作）：

```
java org.apache.axis.wsdl.wsdl2ws.WSDL2Ws Calculator.wsdl -lc++ -sclient 
```

然后使用：

```
#include "Calculator.h" 
#include <stdio.h> 
int main() 
{ 
  Calculator c; 
  int intOut; 
  c.add(20, 40, intOut); 
  printf("result is = %d\n", intOut); 
  return 0; 
} 
```

[更多细节在这里](http://axis.apache.org/axis/cpp/clientuser-guide.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T15:51:52.100

取决于你在做什么。如果您在某处需要单个请求，则 curl （就像您在问题中链接的那样）是合适的。C++ 包含 C，所以一旦你真的不需要 C++ 接口，虽然它会更好。

但是如果你需要对 SOAP 做一些认真的工作，我肯定会推荐使用[gSOAP](http://gsoap2.sourceforge.net/)或类似的库。XML 使用起来相当乏味。序列化/反序列化是处理它的最简单方法，并且 C++ 是静态类型的，序列化代码必须从模式中生成。这正是 gSOAP 所做的。所以我认为没有比 gSOAP 更简单的方法了。

即使您没有 WSDL，我认为在 WSDL 中声明您需要的方法并从中生成适当的序列化代码比手动处理 XML 更容易。在更动态的语言中，可以在运行时生成序列化/反序列化，但 C++ 不允许这样做。

# android - 更多活动生命周期混乱

> ID：13936431
> 
> 赞同：0
> 
> 时间：2012-12-18T15:41:30.880
> 
> 标签：android, android-activity, android-lifecycle

我的活动遇到了这个奇怪的问题。我确信其原因已记录在某处，但到目前为止我的搜索努力都是徒劳的。

总结问题 - my`onCreate()`在活动处于暂停状态时被调用。根据我见过的所有生命周期流程图——这永远不会发生。

这是（我认为）我清单中的相关信息：

```
 <activity
        android:name=".MainActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:mimeType="text/xml" />
            <data android:mimeType="application/xml" />
            <data android:pathPattern=".*\\.xml" />
        </intent-filter>
    </activity> 
```

假设我通过单击图标以通常的方式启动我的应用程序。然后我按下主页按钮。我可以看到操作系统调用`onPause()`- 但不是`onDestroy()`- 这是我所期望的。

如果此时我找到一个 xml 文件并使用我的应用程序打开它，我看到`onCreate()`被调用 - 为什么会发生这种情况？

如果不是因为我将一个相当大的内存缓存初始化为片段并且对于随后的启动 findFragmentByTag 返回 null，我什至可能都不会注意到`onCreate()`，即使存在于恢复状态的应用程序已经创建这和我结束了一个`OutOfMemory`例外。

希望有人可以阐明这一点。

谢谢，

刘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:49:27.803

按下主页按钮 [通常] 不会破坏活动。它将保留在内存中，直到用户返回，或者操作系统需要内存。

onCreate 被称为您的活动，它被*创建*以供使用，通常是第一次。但是，当设备切换方向时，活动会被销毁并重新创建。这就是存在 onSaveInstanceState 和 onRestoreInstanceState 的原因。创建不同于 onStart 或 onResume。OnStart 更能说明第一次启动的活动。OnResume 告诉 Activity 它现在是焦点（最上面的）Activity。

`If at this point I find an xml file and use my application to open it I see onCreate() being called - why does this happen?` 我不确定你的意思是什么？您如何使用 XML 文件“查看”onCreate？

至于您的其他问题，我感觉它存在于您的 onCreate、onStart 或 onPause 方法中。如果你能把它们贴出来，我们可以看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:54:22.910

大概您的活动读取 XML？

如果是这样，那么每次打开 XML 时都会创建一个全新的活动。您可以强制系统只有一个 Activity 实例，但这意味着用户正在查看的任何内容都将消失。

这是该设置[的文档](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)`launchMode`。

# asp.net - ASP.NET OpenWebConfiguration 失败

> ID：13936432
> 
> 赞同：8
> 
> 时间：2012-12-18T15:41:35.283
> 
> 标签：asp.net, web-config

我正在尝试打开 Web 配置，以便可以对其进行加密/解密，但它失败了。我在桌面上的 Web Developer 2010 Express 上执行此操作，我将网站设置为文件系统。以下是我尝试过的方法。

```
Configuration config = WebConfigurationManager.OpenWebConfiguration(HttpContext.Current.Request.ApplicationPath);

Configuration config = WebConfigurationManager.OpenWebConfiguration("~");

Configuration config = WebConfigurationManager.OpenWebConfiguration("/");

Configuration config = WebConfigurationManager.OpenWebConfiguration("/web.config");

Configuration config = WebConfigurationManager.OpenWebConfiguration(/AppNameHere); 
```

每次我收到错误：加载配置文件时发生错误：无法映射路径'/'。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-18T15:51:44.173

如果您尝试从应用程序中打开 web.config，则无需打开它，只需使用：

```
var section = WebConfigurationManager.GetSection("mySection"); 
```

只是为了让您知道，正确的参数是：

```
Configuration config = WebConfigurationManager.OpenWebConfiguration("~/"); 
```

请参阅：http: [//msdn.microsoft.com/es-es/library/system.web.configuration.webconfigurationmanager (v=vs.100).aspx](http://msdn.microsoft.com/es-es/library/system.web.configuration.webconfigurationmanager(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-04T09:25:02.470

以管理员身份运行 Visual Studio。干杯! :D

# javascript - 阅读另一个域上的 iframe 的源代码

> ID：13936435
> 
> 赞同：1
> 
> 时间：2012-12-18T15:41:40.063
> 
> 标签：javascript, html, cross-domain

我需要阅读 iframe 的源代码内容，这是一个跨域

```
 <script type="text/javascript">
     $(document.getElementById("iFrame")).ready(function(){
     var iframe = document.getElementById('iFrame');
     var innerDoc = iframe.contentDocument;
    }); 
```

有机会在另一个域上阅读我的 iframe 的源代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:45:37.530

正如评论者指出的那样，这是一个跨域请求，因此它不能作为 AJAX 请求工作。您可以尝试在您自己的域上创建一个端点，您可以提交一个 AJAX 请求，然后从 URL 服务器端检索内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:52:08.830

有 HTML5 postMessage 和 URL 哈希轮询（对于不支持 HTML5 的浏览器）。

[https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

[http://softwareas.com/cross-domain-communication-with-iframes](http://softwareas.com/cross-domain-communication-with-iframes)

* * *

如果您无法控制这两个域，那么您将陷入服务器端解决方案。使用 URL 作为参数向您的域内服务器发送 ajax 请求，并让它返回 HTML。

* * *

**编辑**由于反对票，我将详细说明 URL Hash 轮询。尽管由于跨域限制而无法读取 URL，但您仍然可以设置 URL 哈希（URL 末尾 # 字符后的文本）。因此，您设置了哈希，这不会导致页面重新加载，并且脚本可以“轮询”对该哈希的更改。

# javascript - dojo 待机小部件不旋转

> ID：13936438
> 
> 赞同：1
> 
> 时间：2012-12-18T15:41:45.033
> 
> 标签：javascript, dojo

使用 dojo 1.8.1...使用 Standby Widget 在服务器忙于处理 AJAX 请求时显示处理。

我有问题地创建了一个 dojox.widget.Standby 对象，它在我第一次 .show() 或 .hide() 时完美运行。我第二次尝试 .show() 它，它出现了，但微调器没有旋转..动画 .gif 麻烦？？

单击按钮第二次或更多次时，如何保持微调器旋转？

更新....

我的应用正在做的是在 dojo DataGrid 对象中显示数据以供用户选择。选择通过 AJAX 请求发送到服务器，服务器返回用户可以下载或打开的文件名（.csv 文件）。我使用以下 javascript 在客户端创建打开/保存对话框：

```
 window.location.assign(path); //Open save/open dialog 
```

如果我注释掉这一行，那么微调器会在每次单击按钮时起作用。

第二次更新......

添加了隐藏的 iframe HTML：

```
 <iframe src="" style="display: none;" id="ifr"></iframe> 
```

当我从服务器收到可下载文件的路径时，我使用它来弹出对话框并下载：

```
 window.document.getElementById("ifr").src=path;  //Where path is location of downloadable file 
```

现在，可下载文件对话框的一切看起来都很顺利，并且更多点击按钮使微调器保持旋转......

感谢@Frode 提供了这个问题的答案......

```
require(["dojox/widget/Standby", "dojo/domReady!"],
function(Standby) {
  var standby = new Standby({
      id: "standbyObj",
      target: "standby",
      color: "transparent",
      zindex: "auto",
      duration: "1000"
  });
  window.document.body.appendChild(standby.domNode);
  standby.startup();
}); 
```

稍后单击按钮时：

```
var standObj = dijit.byId("standbyObj");
if (standObj) {
  standObj.show();
} 
```

...服务器处理 AJAX 请求....

处理完成后：

```
var standObj = dijit.byId("standbyObj");
if (standObj) {
  standObj.hide();
} 
```

这一切都很好，但如果再次单击按钮，微调器会显示但不会旋转。

其他的东西：

CSS：

```
 #standby
 {
   position: absolute;
   top: 50%;
   left:50%;
   width:32px;
   height:32px;
   margin-top: -16px;
   margin-left: -16px;
} 
```

html:

```
<div id="standby"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:30:33.847

这个问题的解决方法如下：

在不可见的 iframe 中创建：

```
 <iframe src="" style="display: none;" id="ifr"></iframe> 
```

当服务器使用可下载文件的路径响应 AJAX 请求时，使用以下 javascript 在客户端 Web 浏览器中显示打开/保存对话框：

```
 window.document.getElementById("ifr").src=path;  //Where path is location of downloadable file 
```

这不仅看起来不错，而且待机微调器将在多次单击按钮时继续旋转。

非常感谢@Frode 为问题提供了解决方案.. 8)

# javascript - Underscore 的油门功能不触发

> ID：13936443
> 
> 赞同：1
> 
> 时间：2012-12-18T15:41:57.520
> 
> 标签：javascript, underscore.js

该`_.throttle(function() {}, 250)`功能是否仅触发`click`？因为我正在尝试运行一些代码，但由于某种原因它似乎无法正常工作。

```
return _.throttle(function() {
    return ( $(this).hasClass('dataRevealed') ) ? $(this).addClass('animated fadeOut') : true;
}, 350); 
```

**编辑：**函数如下所示：

```
Application.CardView.prototype.removeSimilarCards = function(_container) {
    return $(_container).find('[data-identifier="card-view"]').each(function() {
        console.log("first");
        _.throttle(function() {
            console.log("inner");
            return ( $(this).hasClass('dataRevealed') ) ? $(this).addClass('animated fadeOut') : true;
        }, 350);
    });
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-02T16:58:41.510

正如官方文档[underscore#throttle](http://underscorejs.org/#throttle)中提到的那样，传入的函数必须是**节流版本**。你看，“节流”必须在传入之前执行。我刚刚开始工作。:) @closure 在上面的评论中提到了这一点。我们应该多阅读官方文档。

```
var throttled = _.throttle(updatePosition, 100);
$(window).scroll(throttled); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:41:07.227

`_.throttle`用于通过“限制”函数来防止函数运行太多次，因此它每 X ms 只运行一次。您可能想要使用函数队列，在延迟的计时器上出列。

像这样的东西：

```
Application.CardView.prototype.removeSimilarCards = function(_container) {
    var $ele = $(_container),
        $cards = $ele.find('[data-identifier="card-view"]');

    $cards.each(function() {
        var $this = $(this);
        $ele.queue('func', function(next){
            if($this.hasClass('dataRevealed')){
                $this.addClass('animated fadeOut');
            }
            setTimeout(next, 350);
        });
    });

    setTimeout(function(){
        $ele.dequeue('func');
    }, 350);

    return $cards;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:50:56.667

可能是您的代码中的其他问题。

我创建了一个示例以表明它工作正常，[请参阅示例](http://jsbin.com/asaxod/4/watch)

这是代码：

```
var refTime = +new Date();
var fn = _.throttle(function() {
    console.log((+new Date() - refTime)/1000);
}, 3000);

window.setInterval(fn, 10); 
```

# jquery - jQuery使用他们的孩子条件选择对象

> ID：13936444
> 
> 赞同：2
> 
> 时间：2012-12-18T15:41:57.017
> 
> 标签：jquery

我有示例 html 代码：

```
<div class="category">
     <div class="product">
         <!-- some product info -->
         <input type="text" value="0" /> <!-- it is quantity -->
     </div>
<!-- ... other products -->
</div>
<!-- ... other categories --> 
```

所以我需要使用 jQuery 获取所有类别，其中至少一种产品具有正数量。

看起来像这样（在 C# 中）

```
var filteredCategories = categories.Where(c => c.Products.Any(p => p.Quantity !=0)); 
```

如何使用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:46:02.953

你可以使用`.filter()`jQuery方法

```
var filtered = $(".product").filter(function(){return this.find('input').val()>0}); 
```

或者干脆

```
var filtered = $('.product:has(input[value!=0])'); 
```

[:has 选择器](http://api.jquery.com/has-selector/)的 jQuery 文档

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T15:44:15.623

```
$('.product', '.category').filter(function() {
    return parseint($(this).children('input[type="text"]').val(),10) !== 0;
}).dosomething(); 
```

您应该考虑向数量输入添加一个类来定位它，因为`.product`元素内的任何其他文本输入也将使用此方法选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T15:47:06.743

你可以使用以下

```
$('.product').​​​​​​​has(':text[value!=0]') 
```

这将为您提供所有`.products`具有值 <>0 的文本框

看看[这里](http://jsfiddle.net/cjDt2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T15:49:09.873

```
$('.product input[value!="0"]').closest('.product'); 
```

也许是这样的？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T15:48:40.637

试试这个 ：：

```
$("div.product input[value!=0]:text").parents(".category") 
```

**[演示](http://jsfiddle.net/bavkN/1/)**

# mysql - Wordpress 更新 mysql 表

> ID：13936448
> 
> 赞同：12
> 
> 时间：2012-12-18T15:42:07.917
> 
> 标签：mysql, sql, wordpress, sql-update

我正在为 Wordpress 编写一个插件，它应该检查一个 mysql 条目是否已经存在。
如果它不存在，Wordpress 应该将条目插入到表中。这部分按我的预期工作。
但是，如果 mysql 表中已经有一个条目，Wordpress 应该更新该表，但这不起作用。

我为此使用的代码是以下代码：

```
$wpdb->query($wpdb->prepare("UPDATE $table_name SET time=$current_timestamp WHERE userid=$userid")); 
```

我在此查询中使用的变量是正确的，因为它们已成功用于插入表中，但在更新功能出现问题的过程中某处。

有人可以告诉我我在这里做错了什么吗？
解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-18T15:43:58.917

列的值`time`必须用`single quote`

```
$wpdb->query($wpdb->prepare("UPDATE $table_name SET time='$current_timestamp' WHERE userid=$userid")); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-02T11:56:40.830

```
$result = $wpdb->update('westend_areaofficers', array('officerOrder' => $memberOrder,
'officerTitle' => $memberTitle, 'officerName' => $memberName, 'officerPhone' => 
 $memberPhone), array('officerId' => $memberId), array('%d','%s', '%s', '%s'),
 array('%d'));

if($result > 0){
echo "Successfully Updated";
}
else{
  exit( var_dump( $wpdb->last_query ) );
}
$wpdb->flush(); 
```

上面的解决方案对我有用，因为即使传入正确的数字和字符串格式，使用 $wpbd->query($wpbd->prepare()) 语句也不起作用。
var_dump() 函数的目的是查看查询的执行出错的地方。它打印出正在传递的查询和值。当然，使用 $wpdb->flush() 函数会清除缓存以供下一个要执行的查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-26T08:54:21.573

```
UPDATE wp_options SET option_value = replace(option_value, 'http://www.example.com', 'http://localhost/test-site') WHERE option_name = 'home' OR option_name = 'siteurl';
UPDATE wp_posts SET post_content = replace(post_content, 'http://www.example.com', 'http://localhost/test-site');
UPDATE wp_postmeta SET meta_value = replace(meta_value,'http://www.example.com','http://localhost/test-site'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T09:25:11.007

**例子：**

将用户（其 ID 为 546）的 nicename 更改为**Harde_Bande**

```
$execut= $wpdb->query( $wpdb->prepare( "UPDATE $wpdb->users SET user_nicename = %d WHERE ID = %s", "Harde_Bande", 546 ) );
var_dump($execut); 
```

了解更多信息： [http ://codex.wordpress.org/Class_Reference/wpdb#Examples](http://codex.wordpress.org/Class_Reference/wpdb#Examples)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-07T09:22:22.047

很简单

```
global $wpdb;

$execut= $wpdb->query("UPDATE `IK_users` SET `user_nicename` = 'amit' WHERE `IK_users`.`ID` = 19");

var_dump($execut); 
```

'IK_users' 是自定义表名，将其替换为您自己的表名，如 'wp_users'

# android - android通过不同的arraylist填充listview

> ID：13936456
> 
> 赞同：0
> 
> 时间：2012-12-18T15:42:32.413
> 
> 标签：android, arraylist

我想动态填充列表视图，我有一个 lisview 活动，我想在该列表中加载不同的 ArrayList，我的意思是我有一个联系人列表，我想将它加载到列表视图中，然后是国家列表，我想要在listview中加载它，我不想为每个ArrayList创建一个活动，任何想法如何通过arraylist在lisview中加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:51:03.020

您可以使用 a`ListActivity`并通过创建`ArrayAdapter`所需列表来填充列表：

```
public class MainActivity extends ListActivity {

private static final List<String> 
    contacts = new ArrayList<String>(),
    countries = new ArrayList<String>();

private void displayContacts() {
    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, contacts));
}

private void displayCountries() {
    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, countries));
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:51:11.727

您可以重复使用相同的 ListView，但仅在没有任何转换的情况下加载数据对用户来说会很不愉快。相反，您可以在每次需要时（通过 Intent）创建一个新的 Activity 实例，并在其中传递数据以进行显示。这样您就可以重用大部分代码。

# java - 在java中迭代声明的arraylists

> ID：13936461
> 
> 赞同：0
> 
> 时间：2012-12-18T15:42:45.983
> 
> 标签：java, reflection, loops

我有一个类似的问题，如下所述：

[在java中迭代静态int值](https://stackoverflow.com/questions/271109/iterate-static-int-values-in-java)

不同之处在于，在我的班级中，我的元素是 ArrayLists（所有 ArrayLists 都包含相同类型的元素），而不是原始类型。

我想知道是否可以迭代元素并在这个循环中迭代声明的 ArrayList？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:54:59.007

您可以直接迭代`ArrayList`s，因此您的示例与您发布的链接不同，它们需要使用反射来迭代它们，因为它们尚未分组到容器中：

```
class MyClass {
   public static ArrayList<A> myList = new ArrayList<>(
                                       Arrays.asList(new A[]{ A1, A2, ..., AN);

   public static void main(String[] args) {
       // iterate over your list
       for(A a : myList) {
          // do something with A object
       }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:58:48.593

有几种方法可以迭代`ArrayList<Type>`一个 refrence 类型我发现以下方法很有用，你可以自己尝试一下。

A. 最常见/最简单的方法是使用计数器列出其元素

> ```
>  ArrayList<Person> persons = new ArrayList<Person>();
>     //Add some person objects to the list
>     for(int i=0;i<persons.size();i++){    
>     System.out.println(persons.get(i));
>     } 
> ```

B. 使用迭代器

> ```
>  for (Iterator i = persons.iterator(); i.hasNext();) {
>      Object listElement = i.next();
>      System.out.println(listElement);
>    } 
> ```

C. For/in 循环

> ```
>  for (Person listElement : persons) {
>      System.out.println(listElement); 
>    } 
> ```

您可以使用这 3 种方法中的任何一种来完成工作，但建议使用最后一种方法，即 For/in 循环，因为您不必使用计数器（通常称为`i`or `count`）或`Iterator`

# jquery - 触摸屏设备上的 CSS 悬停不会被忽略

> ID：13936464
> 
> 赞同：8
> 
> 时间：2012-12-18T15:42:58.900
> 
> 标签：jquery, html, button, hover, touch

我附加了一个带有 html 按钮的 div：

```
$('.nav').append('<button class="restart">Restart</button>'); 
```

该按钮具有用于悬停的 css 属性。我的问题是，当点击触摸屏设备上的按钮时，按钮会保持悬停状态，直到点击另一个元素。

使用触摸屏设备浏览时，有什么方法可以忽略悬停属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T15:48:49.250

我最近遇到了这个确切的问题，iOS 似乎将悬停伪视为额外点击，因此链接需要点击两次等。

如果您使用[modernizr](http://modernizr.com/)，您可以通过应用于html标签的.no-touch类应用您的:hover psuedos。

所以：

```
html a { color:#222; }

html.no-touch a:hover { color:#111; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T16:55:37.493

不是一个理想的解决方案，但感谢@dualed 的领先！

```
@media screen and (min-device-width:768px) and (max-device-width:1024px) /*catch touch screen devices */
{
    button.restart:hover
    {
        /* replicate 'up' state of element */
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:19:05.017

您可以在 CSS 规则中指定媒体类型。

```
@media handheld {
  button.restart:hover {
    /* undo hover styling */
  }
} 
```

但是，请注意，手持设备不一定有触摸屏。

（顺便说一句。这是 CSS 而不是 jQuery）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T15:49:07.547

也许这不是您想要的，但您可以根据媒体指定不同的 css 样式表：

```
 <link rel="stylesheet" media="screen,projection,tv" href="main.css" type="text/css">
 <link rel="stylesheet" media="print" href="print.css" type="text/css">
 <link rel="stylesheet" media="handheld" href="smallscreen.css" type="text/css"> 
```

在上面的示例中，main.css 将用于计算机屏幕，但对于手持设备，它将是 smallscreen.css

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-08-08T13:16:23.410

一种不错且简单的方法是使用[Modernizr](http://modernizr.com/)。

当 Modernizr 运行时，它会在它检测到的每个功能的 HTML 标记的 class 属性中添加一个条目，如果浏览器不支持，则在该功能前面加上 no-。

现在将以下行添加到您的 css 样式表

```
.touch *:hover {
    display: none;
} 
```

并随意使用 :hover 任意多次。当您在触摸屏中查看您的网站时，所有元素的悬停效果都将被禁用。

# mysql - 将 .txt 转换为 .sql - 包含国家、州、城市、.. 名称的列表

> ID：13936478
> 
> 赞同：3
> 
> 时间：2012-12-18T15:43:37.180
> 
> 标签：mysql, sql, database, country, city

我一直在谷歌上搜索一个包含世界上所有（或尽可能多的）城市的 SQL 数据库，

但我发现最好的是一个 .txt 文件，其格式如下：

```
-1049671    Kassel          agglomeration   323216                      
-1049670    Kingston            agglomeration   956716                      
-1049669    Derry           agglomeration   98319                       
-1049668    Birmingham          agglomeration   1000010                     
-1049667    West Palm Beach         agglomeration   1370178                     
-1049666    Springfield         agglomeration   748567                      
-1049665    Philadelphia            agglomeration   6423182                     
-1049664    New York            agglomeration   23637491 
```

还有其他几行，例如：

```
467009670   Lillo           locality    3139    3972    -330    Spain   Kastilien-La 

    Mancha  Toledo  
    467009725   Tresjuncos          locality    363 3972    -275    Spain   Kastilien-La Mancha Cuenca  
    467009743   Alconchel de la Estrella            locality    129 3972    -257    Spain   Kastilien-La Mancha Cuenca  
    467009780   Valverde de Júcar           locality    1284    3972    -220    Spain   Kastilien-La Mancha Cuenca  
    467009793   Piqueras del Castillo           locality    71  3972    -207    Spain   Kastilien-La Mancha Cuenca  
    467009812   Almodóvar del Pinar         locality    452 3972    -188    Spain   Kastilien-La Mancha Cuenca  
    467009822   Paracuellos         locality    123 3972    -178    Spain   Kastilien-La Mancha Cuenca  
    467009857   Mira            locality    780 3972    -143    Spain   Kastilien-La Mancha Cuenca  
    467009965   Estivella           locality    1454    3972    -35 Spain   Valencia    Valence 
    467009975   Faura           locality    3872    3972    -25 Spain   Valencia    Valence 
    467010262   Valldemosa  Valdemosa, Valldemossa      locality    2098    3972    262 Spain   Balearen    Baléares    
    467010287   Lloseta         locality    5939    3972    287 Spain   Balearen    Baléares    
    467010291   Inca            locality    30441   3972    291 Spain   Balearen    Baléares    
    467010865   Terralba            locality    9610    3972    865 Italy   Sardinien 
```

所以问题是我不知道如何将其导入 mysql/sql 表..然后能够进行查询。

有办法吗？如果没有，任何 SQL 完整数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:51:51.007

查看mysql中的LOAD DATA LOCAL INFILE语句

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

基本上你最终会在 excel 或类似的东西中打开你的文件，保存为 .csv 然后发出查询

```
LOAD DATA LOCAL INFILE 'c:\db.csv' INTO TABLE some_table FIELDS TERMINATED BY ';' 
```

当然，您的“some_table”必须具有适当的结构，并且您必须将字段分隔符调整为您在保存 .csv 文件时选择的内容。

查看我提供的文档以查看更多选项，例如设置文件编码或忽略 n 首行（如果您的文件有标题，则很有用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:50:40.100

是的，首先将其导入excel（制表符分隔），然后通过导入导出工具将其导入SQL

如果你可以提供文件请

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:52:33.677

查看[GeoLite 数据库](http://dev.maxmind.com/geoip/geolite)。

它们专为地理位置而设计，非常完整（383361 行）。Geolite-city 位置的文件以 CSV 格式提供，您应该能够以最少的问题导入该文件。

要导入 CSV 文件，请参阅以下帖子：[如何将 csv 文件导入 MySQL 工作台？](https://stackoverflow.com/questions/11429827/how-to-import-a-csv-file-into-mysql-workbench)和[MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/load-data.html)

# vim - 在 Vim 命令中使用当前目录

> ID：13936480
> 
> 赞同：8
> 
> 时间：2012-12-18T15:43:46.080
> 
> 标签：vim

对于我的 Haskell 程序，我知道路径中可执行文件的名称与我当前目录的名称相同。现在我想创建一个像这样的映射：

```
:map <leader>rr :!curdir()<cr> 
```

但是，我知道的唯一命令是`getcwd()`，它为我提供了整个路径，而不仅仅是目录的名称。

有没有一种简单的方法可以只提取目录的名称？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-18T19:59:55.533

利用

```
fnamemodify(getcwd(), ':t') 
```

或者

```
fnamemodify('.', ':p:h:t') 
```

. `:h`在第二种情况下是必要的，因为`:p`发出尾随路径分隔符（因此选择的最后一个路径组件`:t`现在是空字符串）。

要将其移动到您的映射中，请使用

```
:noremap \rr :!<C-r>=shellescape(fnamemodify('.', ':p:h:t'), 1)<CR><CR> 
```

. 有关为什么您永远不应该使用的说明，`:map`请参见[此处](http://learnvimscriptthehardway.stevelosh.com/chapters/05.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:54:42.453

你可以使用类似的东西：

```
split(getcwd(), "/")[-1] 
```

# objective-c - 将 NSObject 转换为 NSArray

> ID：13936481
> 
> 赞同：-2
> 
> 时间：2012-12-18T15:43:48.777
> 
> 标签：objective-c, ios, casting

我正在使用最新的 SDK 开发 iPhone 应用程序。

我有这个代码：

```
-(void) connectionDidFinishLoading:(NSURLConnection *) connection
{
    NSError* error = nil;
    NSObject* response =
        [NSJSONSerialization JSONObjectWithData:webData
                                        options:NSJSONReadingMutableContainers
                                          error:&error];

    if ([response isKindOfClass:[NSArray class]])
    {
        NSDictionary* resp = [response objectAtIndex:0]; 
```

这条线，`NSDictionary* resp = [response objectAtIndex:0];`行不通。我得到这个编译时间错误：`No visible @interface for 'NSObject' declares the selector 'objectAtIndex:'`。

我可以做这样的事情：

`NSArray* array = [NSArray initWithArray:response];`但我认为它会创建两个对象并且会浪费资源。

**如何将 NSObject 转换为 NSArray？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:24:39.823

本[教程](http://unixjunkie.blogspot.com.es/2008/03/id-vs-nsobject-vs-id.html)解释了为什么我必须使用`id response =`而不是`NSObject* response =`.

如果我使用`id`，我可以向对象发送任何消息`response`。

所以，如果我检查了如果`[response isKindOfClass:[NSArray class]]`我这样做不会有任何问题`[response objectAtIndex:0]`。

而且，它不会是任何编译时错误。

我添加了这个答案，因为会有更多人遇到同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:47:08.963

这应该有效：

```
-(void) connectionDidFinishLoading:(NSURLConnection *) connection
{
    NSError* error = nil;
    NSObject* response =
    [NSJSONSerialization JSONObjectWithData:webData
                                    options:NSJSONReadingMutableContainers
                                      error:&error];

    if ([response isKindOfClass:[NSArray class]])
    {
        NSArray *responseArray = (NSArray*)response;
        NSDictionary* resp = [responseArray objectAtIndex:0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:45:44.530

尝试这个：

```
NSDictionary* resp = [((NSArray *)response) objectAtIndex:0]; 
```

希望它有效

# backbone.js - 带主干的动态 JST 模板选择

> ID：13936485
> 
> 赞同：0
> 
> 时间：2012-12-18T15:44:00.553
> 
> 标签：backbone.js, coffeescript, jst

我有一个视图，需要针对不同模型的不同模板。

我正在实施支付提供商配置，它需要为不同的支付提供商提供一组不同的选项。

这是我现在在我的视图代码中的内容：

```
robokassa: JST["payment_providers/robokassa"]
cash: JST["payment_providers/cash"]

render: =>
  template_name = @model.get('name')
  switch template_name
    when "robokassa" then $(@el).html(@robokassa(payment_provider: @model))
    when "cash" then $(@el).html(@cash(payment_provider: @model)) 
```

它有效，但它很丑陋。

我尝试了类似的方法，但除了简单的用例之外，我找不到关于如何使用 JST 对象的权威手册：

```
render: =>
  template_name = @model.get('name')
  $(@el).html(JST["payment_providers/#{template_name}"](payment_provider: @model) 
```

这会返回一个错误，指出它不是一个函数。

我想，理想情况下，解决方案看起来像

```
template: => 
  JST["payment_providers/#{@model.get('name')}"](payment_provider: @model)
...
render: =>
  $(@el).html(@template()) 
```

但我不知道如何正确编写它。

**更新**

后者确实是正确的，问题是调用 render 时没有加载 @model。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:58:54.513

你的 CoffeeScript 语法对我来说似乎很好。

您的第一个（工作）示例和其他两个示例之间的区别在于，在第一个代码示例中，`JST`在评估您的类时访问对象，而在后两个示例中，仅在呈现视图时才访问该对象。

JST 对象的状态是否在两者之间发生了变化，从而模板在渲染时不再存在？

# html - 悬停在下拉菜单上时如何激活主导航项？

> ID：13936486
> 
> 赞同：0
> 
> 时间：2012-12-18T15:44:00.367
> 
> 标签：html, css, hover, image

当用户将鼠标悬停在下拉菜单上时，我试图保持主导航项处于活动状态。但是，它不像仅仅定位那么简单`li:hover{}`

出于内容管理的原因，我们在 HTML 而不是 CSS 中拥有导航的图像精灵。这是HTML：

```
<div class="nav">
<ul>
    <li class="dropdown"><a href="#"><span class="clip"><img src="css/img/nav-products.png" alt="nav-products" width="81" height="243"></span><span class="link">Our Products</span></a>
        <ul>
            <li><a href="#"><img src="css/img/product.jpg" /><span>Laptops</span></a></li>
            <li><a href="#"><img src="css/img/product.jpg" /><span>Tablets</span></a></li>
        </ul>
    </li>
    <li><a href="#"><span class="clip"><img src="css/img/nav-buy.png" alt="nav-buy" width="81" height="162"></span><span class="link">Where to Buy</span></a></li>
</ul>
</div> 
```

这是CSS：

```
.nav ul li a{padding: 0px; height: 81px; width: 81px;}
.nav ul li a span.clip{height: 81px; width: 81px; display: block; overflow: hidden;}
.nav ul li a span.clip img{position: relative; top: -81px;}
.nav ul li a:hover span.clip img{position: relative; top: 0px;}
.nav ul li.dropdown a:hover span.clip img{position: relative; top: -162px;} 
```

知道当用户将鼠标悬停在下拉菜单上时如何定位 img 吗？所以用户悬停在上面`.nav ul li.dropdown ul li:hover`，我需要调整代码`span.clip img`？

谢谢！杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:16:23.657

Any chance we can see a live example of this to see what the images look like. I'm thinking maybe you are going to have to use a child combinator, maybe like `nav ul > li.dropdown a:hover span.clip but its hard without a working example.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:36:58.157

尝试这个：

```
.nav ul li.dropdown:hover span.clip img {
    // styles here
} 
```

# html - 如何将此标题移动到略低于边框的位置？

> ID：13936491
> 
> 赞同：1
> 
> 时间：2012-12-18T15:44:16.657
> 
> 标签：html, css, moodle

我正在尝试将图像中的标题移到边框下方或下方。

![边框上的标题](../Images/11780c280364daf730670e51109a9a9c.png)

我正在使用moodle主题并追踪了生成边框的css块

```
.course-content .section.main {
   border:1px solid #E3E3E3;
} 
```

我尝试在 CSS 规则中添加填充和边距，但无济于事。

```
.course-content .section.main {
   border:1px solid #E3E3E3;
   margin-top:5px;
}

.course-content .section.main {
   border:1px solid #E3E3E3;
   padding-top:5px;
} 
```

我刚刚尝试了边框间距，但这似乎只适用于表格......

```
 .course-content .section.main{
   border:1px solid #E3E3E3;
   border-spacing:5px;
  } 
```

在 html 编辑器中查看时，标题被此 html 包围。

```
 <div style="text-align: center; font-weight: bold;">
     <span style="font-size: x-large;" size="5">
       German III- HS/Part A
     </span>
   </div> 
```

我不想手动编辑 html，因为涉及到数百门课程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:49:52.667

您用来应用的选择器`padding`并`margin`没有选择您想要的。div 和 span 都没有这些类，因此它们没有得到您设置的填充或边距。

让您获得间距的一种选择是应用于`padding-top`跨度。为此，您需要先找到正确的选择器。

例如，以下选择器应该可以工作，但可能不够独占（也就是说，它可能适用于页面上比您要定位的更多跨度的属性）

```
div > span {
  padding-top: 5px;
} 
```

# css - 将标签与 CSS 中的单选按钮顶部对齐

> ID：13936492
> 
> 赞同：1
> 
> 时间：2012-12-18T15:44:17.607
> 
> 标签：css, button, alignment, label, radio

我试图在 CSS 中对齐单选按钮顶部的标签。

我想做什么：http: [//imageshack.us/photo/my-images/28/radiobuttons.png/](http://imageshack.us/photo/my-images/28/radiobuttons.png/)

我的代码是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
label {
    display:block;
}
</style>
</head>
<body>
<form>
<input type="radio" name="opinions" id="radio-1" />
<label for="radio-1">Yes</label>

<input type="radio" name="opinions" id="radio-2" />
<label for="radio-2">No</label>

<input type="radio" name="opinions" id="radio-3"/>
<label for="radio-3">I don't know</label>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:14:07.850

您可以像这样使用样式列表：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
label {
    display:block;
}
ul {
    list-style: none;
    display: block;
}
ul li {
    float: left;
    display: block;
    width: 85px;
    text-align: center;
}
</style>
</head>
<body>
<form>
<ul>
<li><input type="radio" name="opinions" id="radio-1" />
    <label for="radio-1">Yes</label>
</li>
<li>
<input type="radio" name="opinions" id="radio-2" />
<label for="radio-2">No</label>
</li><li>
<input type="radio" name="opinions" id="radio-3"/>
<label for="radio-3">I don't know</label>
</li>
<ul>
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:08:07.697

把它放在一个 div 和文本对齐它。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css">
    label {
        display:block;
    }
    </style>
    </head>
    <body>
    <form>
<div>
    <input type="radio" name="opinions" id="radio-1" />
    <label for="radio-1">Yes</label>
</div>    
    <input type="radio" name="opinions" id="radio-2" />
    <label for="radio-2">No</label>

    <input type="radio" name="opinions" id="radio-3"/>
    <label for="radio-3">I don't know</label>
    </form>
    </body>
    </html>

div{
text-align: center
} 
```

# session - 覆盖的会话变量

> ID：13936494
> 
> 赞同：1
> 
> 时间：2012-12-18T15:44:18.120
> 
> 标签：session, iis, coldfusion, proxy

我在 IIS 6 上运行的 Coldfusion 项目中的会话变量存在问题。如果我不在代理后面访问该站点，一切正常，但如果我在代理后面登录（显然是从客户端），它一开始可以正常工作，但是当第二个用户登录时，第一个用户在页面刷新时假定第二个用户的身份。就像服务器上的会话变量在每次登录时都被覆盖。

你可以帮帮我吗？

这是我设置会话的代码

```
<cfquery name="qCheckUser" datasource="#myDataSource#">
    SELECT * FROM users WHERE username = '#username#' and pwd = '#pwd#'
</cfquery>

<cflock scope="session" type="exclusive" timeout="10">
    <cfset session.userID = qCheckUser.userID>
</cflock> 
```

用户名和密码来自经典的登录表单。然后我在登录后使用 session.userID 来检索 userId。

# magento - 如何在 Magento 的产品网格中显示库存信息？

> ID：13936495
> 
> 赞同：1
> 
> 时间：2012-12-18T15:44:19.167
> 
> 标签：magento

我对产品类别视图有疑问。由于我有缺货产品展示（需要像这样，因为我们是批发商）我希望它展示出来，以便客户在深入了解详细的产品页面之前查看它是否有库存。

请参阅附件我想在类别页面上看到的部分：

[链接到想法的图像：http://ipseitycore.co.uk/screen.jpg](http://ipseitycore.co.uk/screen.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:58:34.787

在列表模板 (catalog/product/list.phtml) 中尝试以下代码行：

```
<?php
   $qty = (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getQty();
   echo $qty;
?> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T18:43:05.487

实际上，我添加了此代码以显示“缺货”或“仅剩 1 个”。对于我的网站，我不需要显示“有货”。

```
 <span class="out-of-stock">
         <?php 
                $qty = (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getQty();
                if ($qty == 1) :
                    echo $this->__('Only 1 left in stock!');
                elseif ($qty == 0) :
                    echo $this->__('Out of stock!');
                else :
                    echo $this->__('&nbsp;');
                endif;
        ?>
   </span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-27T10:53:38.307

在 list.phtml 文件中使用此代码

```
<?php  $ObjectManager = \Magento\Framework\App\ObjectManager::getInstance();
    $StockState = $ObjectManager->get('\Magento\CatalogInventory\Api\StockStateInterface');
    echo $StockState->getStockQty($_product->getId(), $_product->getStore()->getWebsiteId());
?> 
```

# paypal - 有权访问 manager.paypal.com 帐户，我可以在报告中添加自定义字段吗？

> ID：13936496
> 
> 赞同：1
> 
> 时间：2012-12-18T15:44:24.283
> 
> 标签：paypal, custom-fields

有没有办法将自定义字段发送到 Paypal，以便可以使用 paypal 管理器中的“自定义报告”工具访问它们？

以下是一些字段示例：

```
Item Description  
Item Category  
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:10:43.513

[请参阅PayFlow Developer 文档](https://www.x.com/sites/default/files/payflowgateway_guide.pdf)的第 60 页。您可以使用 COMMENT 字段发送所需的任何数据，这些字段也可用于报告和搜索。

# haskell - 使用 Control.Monad.MonadRandom 对正态分布进行采样

> ID：13936502
> 
> 赞同：8
> 
> 时间：2012-12-18T15:44:41.257
> 
> 标签：haskell, distribution

我想对具有给定均值和标准差的正态分布进行采样。我知道如何在 Data.Random.Rvar 或 Data.Random.MonadRandom 等各种环境中做到这一点。但是，我的函数的上下文是 Control.Monad.MonadRandom，我想保持这种状态，因为我的整个项目都使用 Control.Monad.MonadRandom。

有什么办法吗，你能帮我做吗？

这是代码的样子。Pattern 只是 Data.Vector Double 的别名，Weights 是 Data.Vector (Data.Vector Double) 的别名（即矩阵）

```
train :: MonadRandom m => [Pattern] -> Int -> m Weights
train pats nr_hidden = do
  ws_start <- ws_start''
  foldM updateWS ws_start pats
    where ws_start'  = take p (repeat $ take nr_hidden $ repeat $ (normal 0.0 0.01))
         ws_start'' = vector2D <$> (sequence $ map sequence ws_start')
         p = length pats 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T06:06:48.727

## 快速回答

如何使用 a`Data.Random.RVar`里面的 a `Control.Monad.MonadRandom`？

```
{-# LANGUAGE ScopedTypeVariables #-}

import Control.Monad.Random as CMR
import Data.Random          as DR
import Data.Word (Word32)

gimmeRandom :: forall m . CMR.MonadRandom m => m Int
gimmeRandom = do
  r <- runRVar (uniform 0 100) (getRandom :: m Word32)
  return r 
```

* * *

## 解释

实际上，您希望在具有相似语义的*形式不同的 Monad 中运行 Monad。*

*   `Data.Random.MonadRandom`并且`Control.Monad.Random`在*形式上*是不同的，因为它们在不同的地方独立定义，并且没有一个是另一个的实例（没有`instance DR.MonadRandom m => CMR.MonadRandom m`或相反）。
*   Monad 具有相似的语义，因为它们都提供来自某个随机源的随机数，因此期望我们可以以某种方式组合它们是有意义的。

假设您在`Control.Monad.Random`接口中有一些代码：

```
import Control.Monad.Random as CMR

gimmeRandom :: CMR.MonadRandom m => m Int
gimmeRandom = do
  r <- getRandomR (0, 100)
  return r 
```

我们可以像这样运行它`evalRand gimmeRandom StdGen`，这给了我们一个`Int`.

现在`getRandomR`，您想使用由`Data.Random`.

对于此示例，我们将尝试替换`getRandomR (0, 100)`为`uniform 0 100 :: RVar Int`。我们如何在我们的环境中`Int`摆脱它？`RVar Int``CMR.MonadRandom`

我们想要运行`RVar`monad，正如语义所暗示的那样，我们可能必须为其提供一个随机数源。我们正在为 CMR寻找像[evalRand这样的单子转义函数。](http://hackage.haskell.org/packages/archive/MonadRandom/0.1.8/doc/html/Control-Monad-Random.html#v%3aevalRand)这些转义函数有 type `m a -> someStuffNeededToRunTheMonad -> a`。

在[有关 RVar](http://hackage.haskell.org/packages/archive/rvar/0.2.0.1/doc/html/Data-RVar.html#t%3aRVar)的文档中，有一个示例：

```
-- In a monad, using a RandomSource:
runRVar (uniform 1 100) DevRandom :: IO Int 
```

让我们检查一下`runRVar`：

```
runRVar :: RandomSource m s => RVar a -> s -> m a 
```

是的，这是一种转义函数：给定一个`RVar`随机数的和源，它返回我们`RVar`自己的 monad 内部的随机结果`m`。然而，这需要有一个`instance RandomSource m s`表示它`s`是我们的 monad 的随机源`m`。让我们寻找那个例子。

我们的 monad 是什么`m`？我们想运行`RVar`in `gimmeRandom`，所以 monad 是`CMR.MonadRandom m => m`（所有实现的 monad `CMR.MonadRandom`）。随机性来源是`s`什么？还没有头绪。[让我们查看文档](http://hackage.haskell.org/packages/archive/random-source/0.3.0.2/doc/html/Data-Random-Source.html#t%3aRandomSource)中存在哪些`RandomSource`实例：

```
RandomSource IO DevRandom
...
Monad m0 => RandomSource m0 (m0 Word32)
Monad m0 => RandomSource m0 (m0 Word64)
... 
```

啊哈！这表示*任何*monad`m0`都是 的实例`RandomSource`以及*来自该 monad 的值*（例如`m0 Word32`）。这当然也适用于我们的 monad `CMR.MonadRandom`。我们还可以看到`s`, `m0 Word32`, 一定是随机源产生的随机值。

我们应该传入什么作为`s`in `runRVar (uniform 0 100) s`？*在我们的*monad中生成随机数的东西，类型为`CMR.MonadRandom m => m Word32`. `CMR`生成任意事物的功能是什么，例如 some `Word32`？[随机获取](http://hackage.haskell.org/packages/archive/MonadRandom/0.1.8/doc/html/Control-Monad-Random-Class.html#v%3agetRandom)。所以基本上我们想写：

```
gimmeRandom :: CMR.MonadRandom m => m Int
gimmeRandom = do
  r <- runRVar (uniform 0 100) getRandom
  return r 
```

嗯，那不编译：

```
Could not deduce (RandomSource m (m0 a0))
  arising from a use of `runRVar'
from the context (CMR.MonadRandom m)
  bound by the type signature for
             gimmeRandom :: CMR.MonadRandom m => m Int 
```

`RandomSource m (m0 a0)`? 这很奇怪，the`m`和 the`m0`似乎被编译器识别为*不同*的单子；我们希望它们相同，如`RandomSource m0 (m0 Word64)`.

让我们把完整的签名放到那个地方：

```
r <- runRVar (uniform 0 100) (getRandom :: CMR.MonadRandom m => m Word32) 
```

还是同样的错误。这是因为`m`在那个类型签名中，实际上是*任何*monad 实现`CMR.MonadRandom`，不一定是`MonadRandom`在我们的`gimmeRandom`类型签名中。

（这与 lambda 术语中的阴影概念相同，其中`(\x -> (\x -> f x))`inner`\x`是 in 中使用的；`f x`或者在一阶逻辑中如，作为外部的一个；或者实际上在任何其他编程语言中，在内部范围内具有变量隐藏/阴影——只是这里是*类型*变量阴影）。`∀x . F(x) → ∀x . G(x)``x``G(x)``∀x`

 *所以我们唯一要做的就是告诉编译器，在`getRandom`调用中，我们不希望它用于 any `MonadRandom`，而正是`MonadRandom m`我们在`gimmeRandom`类型签名中拥有的那个。

我们可以使用`ScopedTypeVariables`扩展来做到这一点：

```
{-# LANGUAGE ScopedTypeVariables #-}

[...]

gimmeRandom :: forall m . CMR.MonadRandom m => m Int
gimmeRandom = do
  r <- runRVar (uniform 0 100) (getRandom :: m Word32)
  return r 
```

这使得`m`in`getRandom :: m ...`将*完全* `CMR.MonadRandom m`从顶级类型签名中选择。

这确实编译并解决了问题：我们可以使用接口`Data.Random`在代码中使用分布。`MonadRandom`我们可以很容易地用`uniform`另一个发行版替换。

**总而言之**，我们有

*   确定我们使用来自不同包但具有相同/重叠语义的两个不同 monad
*   找到了如何运行/转义我们想要在我们自己的内部使用的 monad (with `runRVar`)
*   通过查看类型类限制和为这些限制提供的实例，找出传递给转义函数的内容
*   编写了正确的代码 ( `runRVar (uniform 0 100) getRandom`)
*   通过说明`getRandom`应该使用哪个精确的 monad 来编译它。

* * *

If you are wondering why we chose `Word32` somewhat arbitrarily from the instances we can pick from, we just have to give the randomness source in *some* form, and *Word32* is one of the things `Data.Random` takes as input for generating other random stuff.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T17:21:35.093

这是一些示例代码（低效） ，仅使用 Control.Monad.Random 中的函数从具有均值`mu`和标准偏差的正态分布生成样本。`sigma`

```
import Control.Monad.Random

-- |Generates uniform random variables.
unif :: (MonadRandom m) => m Double
unif = getRandomR (0,1)

-- |Generate two samples from the standard normal distribution, using
--  the Box-Muller method.
stdNormals :: (MonadRandom m) => m (Double,Double)
stdNormals = do
    u <- unif
    v <- unif
    let r = sqrt((-2) * log u)
    let arg1 = cos (2 * pi * v)
    let arg2 = sin (2 * pi * v)
    return (r * arg1, r * arg2)

-- |Generate a single sample from the standard normal distribution, by
--  generating two samples and throwing away the second one.
stdNormal :: (MonadRandom m) => m Double
stdNormal = do
    (x,_) <- stdNormals
    return x

-- |Generate a sample from the standard normal distribution with a given
--  mean and variance.
normal :: (MonadRandom m) => Double -> Double -> m Double
normal mu sigma = do
    x <- stdNormal
    return $ mu + sigma * x 
```*

# java - 收到的每个数据包都有新的 FileOutputStream？或保持 FileOutputStream 打开？

> ID：13936505
> 
> 赞同：0
> 
> 时间：2012-12-18T15:44:48.920
> 
> 标签：java, file, io, download, fileoutputstream

我希望这是一个直截了当的设计问题。

***语境：***

我可能正在通过套接字连接下载一对多文件。`byte[]`从套接字读取它们时，我正在传递s 。我也知道将这些字节写入哪个文件。我将这些字节附加到带有[`FileOutputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html). 当收到文件的所有字节时，我也会收到通知。

***问题：***

是否更好：

1.  保持[`FileOutputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html)打开状态，直到`byte`收到并写入所有 s
2.  打开一个新[`FileOutputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html)的，将 s 附加`byte`到正确的文件中，然后每次都关闭。

**2**对我来说感觉更安全，因为我会在每次写入后关闭流，以防任何下载出现问题（比如我由于某种原因停止获取字节）。但它似乎也不是很有效。我很难找出打开和关闭[`FileOutputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html)s 的成本。`FileOutputStream`除了知道何时关闭它需要额外注意之外，保持打开还有其他副作用吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:50:24.133

您可以通过计算重新打开文件 100 或 1000 次所需的时间来测试重新打开文件的成本。

在我的机器上大约需要 2.1 毫秒，因此如果文件为 750 KB/s 或更高，它可能会减慢文件的下载速度。

如果您有一个不完整的文件，您是想保留它，就好像它没有问题一样，还是宁愿知道该文件已损坏，甚至在无法正确下载时将其删除？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:00:31.587

我同意你的观点，2 更安全，但也比 1 贵得多。

每当您创建 FileOutputStream 时，它都会调用其本机实现的 open() 方法。该方法的实现最终将创建一个文件句柄并向操作系统发出 open() 系统调用。这将至少涉及同步（操作系统级别的文件创建通常是原子的）和可能的一些缓冲区分配，因此它比保持文件句柄打开要昂贵得多。

另一方面，如果使用 1，则存在维护过多打开文件句柄并达到限制的风险（这取决于底层操作系统）。如果您不控制所有错误路径，也不要关闭文件。

我建议评估您将并行打开多少个打开的文件，控制所有错误路径以关闭文件的难度，以及您的服务器所需的吞吐量。根据此类分析的结果，我会选择 1 或 2。

此外，如果你使用 1，你可以实现一些安全网，比如看门狗关闭一些超时没有写入的文件。

# java - Java中的IDNA的常规字符串

> ID：13936510
> 
> 赞同：2
> 
> 时间：2012-12-18T15:45:14.530
> 
> 标签：java, encoding, dns, web-standards

是否有能够将 Unicode 域名解析为 IDNA 的库？喜欢 שלום.com ==> [http://xn--9dbne9b.com/](http://xn--9dbne9b.com/)吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:46:53.520

[java.net.IDN](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/net/IDN.html)似乎可以解决问题。从我的 Scala 控制台：

```
scala> java.net.IDN.toUnicode("xn--9dbne9b.com")
res0: java.lang.String = שלום.com 
```

请注意，它适用于主机名，而不是 URL。所以你必须先剥离/提取`http://`协议。

快速浏览一下文档就会发现它也朝着相反的方向工作。从上面（变量中的我的 Unicode 主机名`res0`）

```
scala> java.net.IDN.toASCII(res0)
res3: java.lang.String = xn--9dbne9b.com 
```

# php - 单击“提交”按钮时 HTML 表单刷新

> ID：13936512
> 
> 赞同：0
> 
> 时间：2012-12-18T15:45:14.500
> 
> 标签：php, html, forms, submit

PHP 脚本甚至不运行。当我单击“提交”时，它只会刷新页面。我什至在没有对表单执行操作的情况下测试了代码，它也做了同样的事情。我尝试同时使用按钮和输入作为提交按钮。两者都不起作用。

这是表单代码：

```
 <form name="input" action="oakmanagement.com/SendEmployeeApplication.php" method="post">
<table>
<tr>
    <!-- middle -->
    <td style="width: 12px">
        <table cellpadding="0" cellspacing="0">
            <!-- for multiple images use the rel=gallery[mygallery]
            <tr>
                <td><a href="http://www.expressionofjoy.com/outreach/images/sm/Event_0000s_0008_Layer-5.jpg" class="lightview" rel="gallery[mygallery]" title="my caption"><img src="/images/photoGalleryHolder.jpg" border="0" /></a></td>
            </tr>
            -->
            <tr>
                <td><img src="/images/spacer.gif" height="10px" /></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td><img src="/images/spacer.gif" height="10px" /></td>
            </tr>
            <tr>
                <td><br /></td>
            </tr>
        </table>
  </td>
    <!-- spacing, do not touch -->
    <td><img src="/images/spacer.gif" width="10px" /></td>
    <!-- right -->
    <td class="tdRightColumnTemplate">

        <table cellpadding="0" cellspacing="0">
            <tr>
                <td class="txtXLargeBlack">Oak Management Employment - SITE UNDER CONSTRUCTION!</td>
            </tr>

            <tr>
                <td><img src="/images/spacer.gif" height="20px" /></td>
            </tr>
            <tr>
                <td>
              <!-- form -->

                    <table>
                        <tr>
                            <td><img src="/images/spacer.gif" height="20px" /></td>
                        </tr>
                    <!-- /A head + field -->    
                    <!-- Personal header -->

                        <tr><td colspan="2" bgcolor="#cdd0bd">
                        <!-- <input type="Hidden" value="" name="PERSONAL_SECTION" /> -->
                    <b class="txtNormalBlack" style="padding-top: 10px; padding-bottom: 10px; padding-left: 10px;">Personal:</b>
                        </td></tr>

                    <!-- /A head + field -->    
                    <!-- head + field -->

                        <tr><td colspan="2">
                        <table border="0" width="100%" cellspacing="1" cellpadding="1" align="left" style="background-color: #dddddd; height: 200px;">
                            <tr>

                                <td align="left" id="t_fname" class="formFields">First</td>
                                <td align="left" class="formFields">Middle</td>
                                <td align="left" id="t_lname" class="formFields">Last Name</td>

                                <td align="left" id="t_email" class="formFields">E&#45;mail</td>
                            </tr>
                            <tr>
                                <td align="left" class="formFields">    <INPUT TYPE="text" NAME="FIRST_NAME" VALUE="" SIZE="15" MAXLENGTH="30"> 
                                </td><td align="left" class="formFields">   <INPUT TYPE="text" NAME="MIDDLE_NAME" VALUE="" SIZE="15" MAXLENGTH="30">
                                </td><td align="left" class="formFields">   <INPUT TYPE="text" NAME="LAST_NAME" VALUE="" SIZE="15" MAXLENGTH="30">
                                </td><td class="formFields"><INPUT TYPE="text" NAME="EMAIL" VALUE="" SIZE="20" MAXLENGTH="60"></td>
                            </tr>
                            <tr bgcolor="#cccccc">
                                <td class="formFields" align="center" colspan="2">
                                <input type="submit" name="submit" value="Submit" />
                                <input type="reset" name="RESET" value="Reset" class="btnform" />
                                </td>  
                            </tr>
                        </table>
                        </td></tr>

                    </table> 

                <!-- end of form -->
                </td>
            </tr>
            <tr>
                <td><img src="/images/spacer.gif" height="20px" /></td>
            </tr>
        </table>

  </td>
</tr> 
```

> 这是PHP：

```
function sendEmailToCompany() {
    $from = stripslashes($_POST['EMAIL']);
    $to = "mymail@mail.com";
    $subject = "Employment Form For " . stripslashes($_POST['FIRST_NAME']);
    $message = "Personal\n\nFirst Name: " . stripslashes($_POST['FIRST_NAME']) . "
                \nMiddle Name: " . stripslashes($_POST["MIDDLE_NAME"]) . "
                \nLast Name: " . stripslashes($_POST['LAST_NAME']) . "
                \nE-mail: " . stripslashes($_POST['EMAIL']);
}
error_reporting(E_ERROR | E_PARSE);
sendEmailToCompany();
echo "<meta http-equiv='refresh' content='0;url=ThankYou.aspx'>";
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:56:29.163

你有`<form><tr>`：这是不允许的。表单不能包含表格的*一部分*。表格必须完全包含在单个单元格中，或者整个表格必须在表格中。

您的浏览器可能通过在表格行开始之前关闭它或通过移动表单使其出现在表格之后（将控件留在后面）来进行错误纠正（此错误的错误恢复在所有浏览器中不一致）。

当您单击提交按钮时，您并未提交表单。

[验证](http://validator.w3.org/)您的 HTML 以避免此类问题。

![DOM 检查器中关闭表单的屏幕截图](../Images/5e8b79df2852c77cc86511db46edb790.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T23:17:26.287

在这部分检查您的代码：

`echo "<meta http-equiv='refresh' content='0;url=ThankYou.aspx'>";`

这将使您重定向到页面**ThankYou.aspx**

更改相同类型 PHP 的 url 参数

最好给个条件，这样可以检查发送的邮件是否完美

```
if(sendEmailToCompany())
{
   echo "<meta http-equiv='refresh' content='0;url=ThankYou.php'>";
   //true condition
}
else
{
  echo "error";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T18:30:16.150

您实际上并没有发送邮件，这可能是它不起作用的原因！您正在准备所有数据，但没有将其放入邮件功能。

```
function sendEmailToCompany() {
$from = stripslashes($_POST['EMAIL']);
$to = "mymail@mail.com";
$subject = "Employment Form For " . stripslashes($_POST['FIRST_NAME']);
$message = "Personal\n\nFirst Name: " . stripslashes($_POST['FIRST_NAME']) . "
            \nMiddle Name: " . stripslashes($_POST["MIDDLE_NAME"]) . "
            \nLast Name: " . stripslashes($_POST['LAST_NAME']) . "
            \nE-mail: " . stripslashes($_POST['EMAIL']);
// PART I HAVE ADDED...
mail($to, $subject, $message, $from);
// -------------------

}
error_reporting(E_ERROR | E_PARSE);
sendEmailToCompany();
echo "<meta http-equiv='refresh' content='0;url=ThankYou.aspx'>"; 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-18T15:47:39.573

**代替**

```
<button type="submit">
                                    Submit
                                </button> 
```

**和**

```
<input type="submit" name="submit" value="Submit" /> 
```

**并更换**

```
 <form name="employment" action="./SendEmployeeApplication.php" method="post"> 
```

**和**

```
 <form name="employment" action="YOURDIRECTORY/SendEmployeeApplication.php" method="post"> 
```

# python - 使用高效文件

> ID：13936519
> 
> 赞同：-4
> 
> 时间：2012-12-18T15:45:25.857
> 
> 标签：python

有什么办法可以在不将所有内容加载到缓冲区的情况下读写文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:47:07.193

文件对象是可迭代的：

```
with open(filename) as f:
    for line in f:
        do_something(line) 
```

迭代它们一次会产生 1 行（并且不会将整个文件存储在内存中）

* * *

编写文件同样简单：

```
with open(filename,'w') as f:
     for x in get_data():
         f.write(x) 
```

或者您可以使用`writelines`传入生成器的方法。例如`f.writelines(get_data())`

其中`get_data`可以定义为：

```
def get_data():
    for i in xrange(200):
        yield '%d\n'%i 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T15:52:55.680

您可以使用[seek](http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects) for 转到要读取的文件部分。

来自文档：

> 要更改文件对象的位置，请使用 f.seek(offset, from_what)。位置是通过将偏移量添加到参考点来计算的；参考点由 from_what 参数选择。from_what 值为 0 从文件开头测量，1 使用当前文件位置，2 使用文件末尾作为参考点。from_what 可以省略，默认为 0，使用文件的开头作为参考点。

在寻找之后，您可以读取字节或行，就像您最初正常加载文件一样。

这是一个示例函数：

```
def special_read_file(filename, location, length):
    file_handle = open(filename)
    file_handle.seek(location, 0)
    return file_handle.read(length) 
```

位置和长度以字节为单位。file_name 将是您要读取的文件的位置字符串。

你可以用 seek 做一些有趣的事情。使用它在文件中跳转，这样您就不必在本地存储文件内容，它仍然可以让您遍历行。

`with`正如其他一些答案已经提到的那样，使用和迭代文件行`for line in file`是保持系统内容轻松的好方法。但是传递一个 file_handle 要简单得多，您不必一直打开和关闭或读取它的一部分，您可以打开一个句柄，然后在需要该特定文件时从您需要的位置读取。

在这里，我写了一个生成器函数，它可以像往常一样工作，只有你可以指定从文件的哪个部分开始读取。

```
def read_handle_from(file_handle, start_point):
    file_handle.seek(start_point, 0)
    for line in file_handle:
        yield line

my_file_handle = open(file_name)
for line in read_handle_from(my_file_handle, 2000):
    #do stuff 
```

您可以轻松地修改函数以限制读取的行数，或根据需要读取的字节数。

它很容易为自己创建函数和生成器以使用你想要的方式，不要害怕在 python 中创建你自己的函数，并不是所有的东西都需要内置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:59:21.240

文件对象是可迭代的，因此您可以随心所欲地使用它们。

例如，要从输入到输出每隔一行写入一次，请使用以下内容：

```
from itertools import islice
with open('input') as fin, open('output', 'w') as fout:
    every_other = islice(fin, None, None, 2)
    fout.writelines(every_other) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T15:47:35.707

是的你可以。例如，下面一行一行地查看一个文件：

```
with open('data.txt') as f:
    for line in f:
        print line.strip() 
```

这不会将整个文件加载到内存中。

# kettle - 在 Kettle 中填写运行标题

> ID：13936523
> 
> 赞同：1
> 
> 时间：2012-12-18T15:45:42.057
> 
> 标签：kettle, geokettle

我有一个地区级数据的 XLS 文件，其中每个地区都在一个地区中。但是区域列仅填充区域中的第一个区域。就像是：

```
District  Region Population
Foo       Bar    1234
          Baz    345
          Qux    69
Quux      Zob    1234
          Bax    42 
```

等等。如何处理它，以便用正确的 District 值填充空的 District 字段（最终输出到 CSV，但我可以做到这一点）以获得：

```
District  Region Population
Foo       Bar    1234
Foo       Baz    345
Foo       Qux    69
Quux      Zob    1234
Quux      Bax    42 
```

我实际上是用 GeoKettle 2.0 做的——最终这一切都在一个 Shapefile 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T13:07:10.793

正如@Brian 所说，我认为您不会对这种转换有一个通用的步骤，大多数 PDI 步骤都适用于真正的表格数据。但在这些情况下，您可以通过一个简单的 Modified Java Script 步骤来解决它。

我们在这里要做的是编写一个脚本，将最后一个非空变量存储`District`为变量`lastDistict`，并在空行上使用它。

首先插入一个修改后的 Java 脚本并将其连接到您已经存在的流中。打开步骤并右键单击脚本的标题（选项卡）并选择“添加新”。在这个新脚本中只插入：

```
var lastDistrict; 
```

右键单击此脚本的标题，然后选择“设置启动脚本”。这样做，您将告诉 Kettle 仅在第一次使用该步骤时执行 var 创建，否则您将丢失`lastDistrict`每个新行的值。

在同一步骤的另一个脚本上（通常`Script 1`）插入：

```
if ((District == null) || (trim(Distict) == "")) {
    newDistrict = lastDistrict;
} else {
    newDistrict = District;
    lastDistrict = District;
} 
```

在该步骤的底部，您将看到一个名为 的网格`Fields`。创建一个名为的新字段`newDistrict`并将其类型设置为字符串。

现在您将拥有一个`newDistrict`包含所有行的值的新字段。如果您不想创建新列，只需填写`Rename to`并`Disctrict`设置`Replace value 'Fieldname' or 'Rename to'`为`Y`.

# sql-server-2008 - MDX：关于推进查询的建议

> ID：13936525
> 
> 赞同：0
> 
> 时间：2012-12-18T15:45:47.587
> 
> 标签：sql-server-2008, ssas, mdx

我有一个有效的 MDX 语句，但我想扩展它。当前的语句带回了特定年份的前 10 名，其中行是州，列是总收入。我想生成 5 列——每列和行集代表不同的年份。我将如何实现这一目标？

```
 with
  member measures.[Total Earnings] as 
  (measures.[Total GS]) + (measures.[Total DE]) + (measures.[Total SE])
    set [Top 10 States] as
    topcount 
  (
    {Stores.[State Code]. [State Code].members},
     10,
     (Measures.[Total Earnings], [Time].[C Year].[2011])
  )
  select
   {([Measures].[Total  Earnings])} on columns,
     {[Top 10 States]} on rows
    from LoyaltyMeasurements
     Where (Time.[C Year].[2011]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:35:57.457

我认为您正在寻找的功能是 ParallelPeriod

```
MEMBER measures.[Total Earnings Prev1] as 
    Aggregate(
    ParallelPeriod([Time].[C Year], 1, [Time].CurrentMember),
    (measures.[Total GS]) + (measures.[Total DE]) + (measures.[Total SE])
    ) 
```

# c - 在旧编译器下，对扫描数字求和有时会失败

> ID：13936526
> 
> 赞同：3
> 
> 时间：2012-12-18T15:45:48.443
> 
> 标签：c

我有以下添加输入数字的代码。当我输入 12345 时，它给了我正确的结果，但是当我输入 56789 时，它给了我错误的结果。

任何帮助将不胜感激...

```
#include <stdio.h>
#include <conio.h>
main()
{
int d1, d2, d3, d4, d5, sum, number, n;
clrscr();
scanf("%d", &number);
printf("number=%d\n",number);
n=number;
d1=n % 10;
n=n / 10;
d2=n % 10;
n=n / 10;
d3=n% 10;
n=n / 10;
d4=n% 10;
n=n / 10;
d5=n;
sum=d1 + d2 + d3 + d4 + d5;
printf ("sum of digits =%d\n", sum);
getch();
} 
```

输出结果如图..![在此处输入图像描述](../Images/89185e8f14e6bcfe49d970b9660702eb.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T15:46:33.833

您可能溢出了变量，请尝试使用`long`而不是`int`. 对于 16 位`int`，范围为`-32768`至`32767`。您可以通过打印轻松地测试它`sizeof(int)`，这可能是`2`（16 位）而不是更常见的`4`（32 位）。

看在皮特的份上，**停止使用 Turbo C++**。那里有无数更好的选择。

# windows-phone-8 - Windows Phone 8 上的视频编码和解码技术

> ID：13936531
> 
> 赞同：4
> 
> 时间：2012-12-18T15:46:12.203
> 
> 标签：windows-phone-8, video-editing

我想知道以下问题的答案，因为我完全不知道该怎么做和怎么做。

我想为 Windows Phone 8 开发一个视频编辑器应用程序。但我找不到支持这样做的适当 API。

在浏览和查看 Microsoft 网站时，我了解到 DirectShow 完全没有在 Windows Phone 8 中使用。如果是这样，唯一的选择是 Media Foundation。媒体基础是否支持 Windows Phone 8 上的视频编辑，包括编码和解码？我特别需要它来支持 Windows Phone 8。是否存在与此相关的任何链接？如果 Media Foundation 也不支持 Windows Phone 8，那么在 Windows Phone 8 中进行视频编辑的替代方法是什么？我正在尝试使用 Metro UI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:44:44.087

Media Foundation 支持[仅限于 Windows Phone 上的播放功能](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681688%28v=vs.105%29.aspx)。对于视频编辑，您几乎可以在 .NET 和标准 C/C++ 中执行的操作（即自己编写编解码器或使用 3rd 方库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:49:58.083

我还需要 Windows Phone 8 上的视频帧用于一些研究（不是视频编辑器）。您是否已经看过 Media Foundation 框架中的“TransferVideoFrame”方法？我仍在尝试了解这是如何工作的，但根据文档，这种方法应该可以解决问题。

# c - 分段错误如何在内部（内核/硬件）工作？

> ID：13936534
> 
> 赞同：15
> 
> 时间：2012-12-18T15:46:27.883
> 
> 标签：c, memory-management, linux-kernel, hardware

从广义上讲，我想知道内核（或 CPU）如何知道一个进程试图访问它没有权限的内存位置，以及名为 MMU 的神秘硬件如何帮助做到这一点。

特别是：在我看来，MMU 对操作系统内核的内存管理模型（分页、内存区域、进程地址空间......）是不可知的（我认为 Linux 和 Windows 页面并不完全相同，因为示例。如果我错了，请纠正我）。但是，我的 CPU 是如何判断当前代码是否可以访问 location 的`x`呢？它如何向内核发出信号？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T16:10:38.183

这可能是一个太大的话题，无法在这里完全令人满意地回答；您最好搜索一些讨论虚拟内存实现背后的硬件的论文/文章/书籍（可能从特定架构开始，因为例如 x86、x86_64、sparc 等之间存在显着差异......）。

不过，简短的回答是硬件通过页表来处理这个问题。要求 MMU 处理的每个内存访问都通过页表结构进行验证。如果描述包含所请求地址的页面的页表条目未标记为允许所请求的访问类型（读/写/执行/...），则硬件会生成一个陷阱，Linux 最终将其称为“分段错误” . 其他操作系统以不同的方式命名它们（例如，一般保护故障，...）。然后操作系统内核必须找出故障的原因以及是否可以采取任何措施（许多陷阱由内核处理以从磁盘交换新页面，映射新的空页面等，但有些陷阱，例如空指针解引用，内核能做的最好的事情就是把它扔给应用程序说“

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-18T16:10:29.640

MMU 被配置（通过设计其逻辑和/或内核设置的选项位）作为分页模型实现的硬件部分。

MMU 通常必须将逻辑地址转换为映射的物理地址；当它因为请求的逻辑地址没有对应的物理地址而无法这样做时，它会生成一个错误（通常作为一种中断类型），该错误会在内核中运行处理程序代码。

如果错误是试图请求理论上存在的东西——比如映射文件的一部分——但当前不存在于物理内存中，操作系统的虚拟内存实现可以通过分配一些物理内存并复制适当的磁盘块来解决问题进去。

但是，如果是对不存在的东西的请求，则无法满足，必须作为程序错误处理。

写入不允许写入的内容的请求将以类似的方式处理。

在我的脑海中，我不确定是否在 MMU 中或在 CPU 本身中检测到执行不可执行信息的尝试；指令缓存（如果存在）如何适应这也可能使事情复杂化。但是，最终结果将是相似的 - 发生非法执行尝试的内核故障条件，内核通常会将其视为程序故障。

总之，该模型是更简单的硬件层告诉内核发生了一些不寻常的事情，而硬件使用其当前配置无法自行处理。操作系统然后决定尝试的操作是否可以并且应该发生 - 如果是，它会更新硬件配置以使其成为可能。或者，如果不应该允许尝试的操作，则声明程序错误。并且还有其他可能性，例如，虚拟化层可以决定模拟请求的操作而不是实际执行它，从而与硬件保持一定的隔离。

# mongodb - 从存储在 Mongo 文档中的数组中删除一个值

> ID：13936537
> 
> 赞同：0
> 
> 时间：2012-12-18T15:46:39.933
> 
> 标签：mongodb

我在 Mongo 集合中有一个文档，看起来像这样：

```
{
  _id: [uuid]
  prop: 
    some: "text",
    subprop: ['foo', 'bar']
} 
```

如果可能的话，我想避免将整个记录拉出、修改并推回。在不知道存储索引的情况下，我可以运行哪些更新来从中`'bar'`删除？`doc.prop.subprop`

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:09:20.090

您应该能够使用 $pull 运算符来执行此操作，该运算符可以从字段中提取特定值。您可以使用点表示法来获取 subprop 字段：

```
db.foo.update( { _id : [uuid] }, { $pull : { "prop.subprop" : "bar" } } ); 
```

如果要对集合中的多个文档运行更新，则需要使用以下语法在查询中设置 multi : true ：

```
db.foo.update( { _id : [uuid] }, { $pull : { "prop.subprop" : "bar" } }, { multi : true } ); 
```

这意味着更新查询将在您的集合中匹配 { _id : [uuid] } 的所有文档上运行。

# java - 如何在一个 JFrame 中多次添加一张图像？

> ID：13936538
> 
> 赞同：1
> 
> 时间：2012-12-18T15:46:42.193
> 
> 标签：java, image, swing, jlabel, layout-manager

我正在尝试多次显示一张图像。这是我的代码的一部分：

```
JFrame window = new JFrame();
window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
window.setBounds(30, 30, 800, 600);
JLabel blue = new JLabel(new ImageIcon("blue.jpg"));
JLabel green = new JLabel(new ImageIcon("green.jpg"));
window.add(blue);
window.add(green);
window.add(blue);
window.setLayout(new GridLayout(3, 3));
window.setVisible(true); 
```

不幸的是，所创造的只是每一种形象。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:49:20.560

您必须创建 9 个单独`JLabel`的 s 来填充 3 x 3 网格。您不能重复使用 Swing 组件。

您可以一次创建蓝色图像图标和绿色图像图标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T23:10:58.433

对于纯色，请考虑使用纯色`Icon`（例如实现为`ColorIcon`）。

![棋盘](../Images/288072f8256873fdfedb9f85d6e55940.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class CheckerBoard {

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                // the GUI as seen by the user (without frame)
                JPanel gui = new JPanel(new BorderLayout());
                gui.setBorder(new EmptyBorder(2, 3, 2, 3));
                gui.setBackground(Color.RED.darker().darker());

                int w = 9;
                int h = 3;
                gui.setLayout(new GridLayout(h, w, 2, 2));
                for (int ii=0; ii<w*h; ii++) {
                    Color c = ii%2==0 ? Color.RED : Color.ORANGE;
                    gui.add(new JLabel(new ColorIcon(c, 16)));
                }

                JFrame f = new JFrame("Demo");
                f.add(gui);
                // Ensures JVM closes after frame(s) closed and
                // all non-daemon threads are finished
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                // See http://stackoverflow.com/a/7143398/418556 for demo.
                f.setLocationByPlatform(true);

                // ensures the frame is the minimum size it needs to be
                // in order display the components within it
                f.pack();
                // should be done last, to avoid flickering, moving,
                // resizing artifacts.
                f.setVisible(true);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
}

class ColorIcon implements Icon {

    Color color;
    int preferredSize = -1;

    private ColorIcon() {
    }

    public ColorIcon(Color color, int preferredSize) {
        this.color = color;
        this.preferredSize = preferredSize;
    }

    @Override
    public void paintIcon(Component c, Graphics g, int x, int y) {
        g.setColor(color);
        g.fillRect(0, 0, preferredSize, preferredSize);
    }

    @Override
    public int getIconWidth() {
        return preferredSize;
    }

    @Override
    public int getIconHeight() {
        return preferredSize;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:53:38.167

如果要添加蓝色两次，则需要两个单独的实例，`JLabel`它们的`blue.jpg` `ImageIcon`. 在这种情况下，您应该有类似`blue2`.

```
JFrame window = new JFrame();
window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
window.setBounds(30, 30, 800, 600);
JLabel blue = new JLabel(new ImageIcon("blue.jpg"));
JLabel blue2 = new JLabel(new ImageIcon("blue.jpg"));
JLabel green = new JLabel(new ImageIcon("green.jpg"));
window.add(blue);
window.add(green);
window.add(blue2);
window.setLayout(new GridLayout(3, 3));
window.setVisible(true); 
```

这不会是最灵活的解决方案，但可以解决您尝试将一个添加`JComponent`到另一个添加两次的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T21:28:43.607

如前所述，您不能重复使用它。我发现的一个简单修复是重新初始化 JLabel！所以如果你想要两个蓝色的，只需这样做：

```
blue = new JLabel(new ImageIcon("blue.jpg")); 
```

所以它最终看起来像这样：

```
JFrame window = new JFrame();
window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
window.setBounds(30, 30, 800, 600);
JLabel blue = new JLabel(new ImageIcon("blue.jpg"));
JLabel green = new JLabel(new ImageIcon("green.jpg"));
window.add(blue);
window.add(green);
blue = new JLabel(new ImageIcon("blue.jpg"));
window.add(blue);
window.setLayout(new GridLayout(3, 3));
window.setVisible(true); 
```

# json - objective-c 在项目中使用 SBjson 读取 file.json 但 NSArray 返回 null

> ID：13936540
> 
> 赞同：0
> 
> 时间：2012-12-18T15:46:46.533
> 
> 标签：json, null, nsarray, internal, sbjson

th.json

```
{"lessons":[{"id":"38","fach":"D"},{"id":"39","fach":"M"}]} 
```

视图控制器.m

```
NSBundle *bundle = [NSBundle bundleForClass:[self class]];
NSString *JsonData = [bundle pathForResource:@"th" ofType:@"json"];

SBJsonParser *parser = [[SBJsonParser alloc] init] ;

NSDictionary *jsonObject = [parser objectWithString:JsonData error:NULL];

NSArray *list = [jsonObject objectForKey:@"lessons"];

NSLog(@"%@", list); 
```

输出 NSLog 列表返回

```
(null) 
```

我的应用程序在我的项目内部使用 json 文件。和我的项目文件夹中的“th.json”。但是 NSArray *list 无法在 Json 文件中显示数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:23:42.433

您需要将文件的*内容*提供给 SBJsonParser。您的代码只是将文件的*路径*提供给解析器。试试这个：

```
NSBundle *bundle = [NSBundle bundleForClass:[self class]];
NSString *path = [bundle pathForResource:@"th" ofType:@"json"];
NSLog(@"Path: %@", path);

NSData *jsonData = [NSData dataWithContentsOfFile:path];
NSLog(@"Data: %@", jsonData);

SBJsonParser *parser = [[SBJsonParser alloc] init] ;

NSDictionary *jsonObject = [parser objectWithData:jsonData];
NSLog(@"%@", jsonObject);

NSArray *list = [jsonObject objectForKey:@"lessons"];
NSLog(@"%@", list); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T04:47:57.340

```
for (NSDictionary *dataDict in myitems) {
        NSString *itemName = [dataDict objectForKey:@"itemName"];
        NSLog(@"itemName = %@",itemName);
    } 
```

插入字符串使其工作。

# atk4 - 敏捷工具包“文件存储”

> ID：13936541
> 
> 赞同：0
> 
> 时间：2012-12-18T15:46:49.167
> 
> 标签：atk4, agiletoolkit

嗨，我正在尝试为原型项目（在线策略寄存器）实现文件存储。我正在关注 Jobeet 教程，还查看了agiletoolkit.com 上的 doc/filestore 页面和你的 youtube 网站上的教程视频，但我无法让它工作。目前，当我访问文件管理页面时出现以下错误

> 路径查找器_异常
> 
> 无法包含 SQL\Relation.php

我的项目在 github[这里](https://github.com/Roxout/polyreg)

抱歉，如果我很傻，但我是敏捷新手。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:26:33.210

[https://github.com/Roxout/polyreg/blob/master/.gitignore#L102](https://github.com/Roxout/polyreg/blob/master/.gitignore#L102)

.gitignore 文件中的这一行包含“sql”。它阻止了将 atk4/lib/SQL/* 添加到存储库中。删除该行，然后重新添加文件夹。

下一步是导入[https://github.com/Roxout/polyreg/blob/master/atk4-addons/misc/docs/filestore.001.sql](https://github.com/Roxout/polyreg/blob/master/atk4-addons/misc/docs/filestore.001.sql)并创建页面扩展文件存储\Page_FileAdmin。

[这是有关文件存储的截屏视频，如果您遇到困难： http](http://www.youtube.com/watch?v=h5dmAnvri1I&list=PL7CBF92AB03A1CA3B&index=9) ://www.youtube.com/watch?v= h5dmAnvri1I&list=PL7CBF92AB03A1CA3B &index=9

# java - 最大限度。并行后台线程数（后端）

> ID：13936544
> 
> 赞同：4
> 
> 时间：2012-12-18T15:47:04.393
> 
> 标签：java, google-app-engine

我可以在一个谷歌应用引擎后端启动多少个并行后台线程？我没有找到任何有关并行允许线程数量的信息。我正在为 GAE 使用 Java。

我按照文档中的说明开始了一个新线程：[1]

```
return ThreadManager.createBackgroundThread(new Runnable() { ... }); 
```

如果我运行我的应用程序，一段时间后会引发以下异常（在创建新线程时）：

```
com.google.appengine.api.system.SystemFailureException: An unknown error occurred 
```

这个 [2] 问题提到，如果 API 超出配额，则会出现此异常。所以我可以创建线程，但在一定时间后出现异常。这就是为什么我认为后端有线程限制。

[1] [https://developers.google.com/appengine/docs/java/backends/overview#background_threads](https://developers.google.com/appengine/docs/java/backends/overview#background_threads)

[2] [http://code.google.com/p/googleappengine/issues/detail?id=7398](http://code.google.com/p/googleappengine/issues/detail?id=7398)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-03T04:46:27.177

为了记录，App Engine 区分了[正常线程和](https://developers.google.com/appengine/docs/python/?hl=en#sandboxing_in_python)[后台线程](https://developers.google.com/appengine/docs/python/backends/#Python_Background_threads)，它们不能比启动它们的 HTTP 请求更长寿。

**至少对于 Python**来说，看起来生产（Python 2.7）运行时和 dev_appserver 都对**每个 backend 施加了 10 个后台线程的固定限制**，独立于其他设置，例如`max_concurrent_requests`在 [backends.yaml](https://developers.google.com/appengine/docs/go/config/backends?hl=en#Go_Backends_definitions)中。

我与其他一些 App Engine 团队的老成员交谈过，虽然他们不是 100% 确定，但他们说这听起来是对的。我已经通过下面的测试后端配置和代码凭经验证实了这一点。我还尝试从一个单独的 HTTP 请求和另一个后台线程启动更多后台线程。没运气; 相同的总限制为 10 总。

这是 SDK 在 dev_appserver（特别是 SDK 1.8.8 中的 devappserver2）中为 Python 设置限制的地方： [instance.py:449](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/devappserver2/instance.py?r=404#449)， [python_runtime.py:61](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/devappserver2/python_runtime.py?r=404#61)。看起来 Go 和 Java 完全禁用了后台线程： [go_runtime.py:99](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/devappserver2/go_runtime.py?r=404#99)， [java_runtime.py:61](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/devappserver2/java_runtime.py?r=404#61)。

一个有趣的怪癖：在后台线程中，看起来您可以启动任意数量的正常线程，至少在达到内存限制之前是这样。他们没有打开任何 HTTP 请求，而且他们似乎也没有在截止日期前被切断。我目前正在这样做以解决后台线程限制。

我希望这被记录在案！会为我节省很多时间。

* * *

**后端.yaml**

```
- name: test
  instances: 1
  start: threadtest.application 
```

**测试.py**

```
def test():
  for i in range(100):
    logging.info('Starting #%d', i)
    background_thread.start_new_background_thread(time.sleep, [20])

class Start(webapp2.RequestHandler):
  def get(self):
    background_thread.start_new_background_thread(test, [])

application = webapp2.WSGIApplication([('/_ah/start', Start)], debug=True) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T11:47:02.533

我的问题是后端的 API 限制。我可以启动任意数量的线程，但是当我达到 API 限制（100 个同时调用）时，无法创建新线程。配额和限制在[他们的文档](https://developers.google.com/appengine/docs/python/backends/overview#Billing_Quotas_and_Limits)中描述。

我减少了我的 API 调用（数据库、谷歌云存储）以加快应用程序的性能并且异常消失了 :)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T22:32:59.953

鉴于例外情况，我假设您使用的是 Java。

你是如何创建线程的？您应该使用 ThreadManager（而不是调用不支持的“new Thread()”）。

后台*线程*是指后端中的代码吗？您需要在后端任务中启动后台线程。

作为记录，每个请求限制为 50 个线程。

[在此处](https://developers.google.com/appengine/docs/java/runtime?hl=en#Requests_and_Servlets "这里")阅读线程。

# wpf - 检测 ObservableCollection 是否已被修改

> ID：13936551
> 
> 赞同：1
> 
> 时间：2012-12-18T15:47:13.987
> 
> 标签：wpf, observablecollection

我有一个嵌套在 DockPanel 中的 DataGrid。DockPanel 用作数据上下文：

```
DockPanel1.DataContext = GetData(); 
```

GetData() 方法返回一个 ObservableCollection。

ObservableCollection 可以在 DataGrid 以及嵌套在 DockPanel 中的一些文本框中进行修改。我还使用 DataView 在集合中导航。

我想检测集合是否已被修改，并在用户尝试关闭应用程序而不保存数据时警告用户。

有没有我可以使用的内置机制（集合或视图上的一种“IsDirty”标志）？如果没有，我想我将不得不监视所有控件并手动检测任何更改。

谢谢， 莱斯泽克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:56:47.947

为了检测集合本身的变化，您必须附加一个[CollectionChanged](http://msdn.microsoft.com/en-us/library/ms653375.aspx)处理程序。如果还需要检测集合中包含的对象的更改，则必须将[PropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.propertychanged.aspx)处理程序附加到每个对象（前提是对象实现了 INotifyPropertyChanged）。

一个实现基本上是这样的：

```
var collection = GetData();
collection.CollectionChanged += OnCollectionChanged;

...

private void OnCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    switch (e.Action)
    {
        case NotifyCollectionChangedAction.Add:
            AddPropertyChanged(e.NewItems);
            break;
        case NotifyCollectionChangedAction.Remove:
            RemovePropertyChanged(e.OldItems);
            break;
        case NotifyCollectionChangedAction.Replace:
        case NotifyCollectionChangedAction.Reset:
            RemovePropertyChanged(e.OldItems);
            AddPropertyChanged(e.NewItems);
            break;
    }

    ...
}

private void OnPropertyChanged(object sender, PropertyChangedEventArgs e)
{
    ...
}

private void AddPropertyChanged(IEnumerable items)
{
    if (items != null)
    {
        foreach (var obj in items.OfType<INotifyPropertyChanged>())
        {
            obj.PropertyChanged += OnPropertyChanged;
        }
    }
}

private void RemovePropertyChanged(IEnumerable items)
{
    if (items != null)
    {
        foreach (var obj in items.OfType<INotifyPropertyChanged>())
        {
            obj.PropertyChanged -= OnPropertyChanged;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:51:22.433

为了详细说明上面 Clemens 的回答，这是使用这些事件（在集合上和包含的项目上）来实现 IsDirty 标志的简单方法，例如您描述的：

```
public class DirtyCollection<T> : ObservableCollection<T> where T : INotifyPropertyChanged
{
    private bool isDirty = false;

    public bool IsDirty
    {
        get { return this.isDirty; }
    }

    public void Clean()
    {
        this.isDirty = false;
    }

    protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
        // We aren't concerned with how the collection changed, just that it did.
        this.isDirty = true;

        // But we do need to add the handlers to detect property changes on each item.
        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Add:
                this.AddPropertyChanged(e.NewItems);
                break;

            case NotifyCollectionChangedAction.Remove:
                this.RemovePropertyChanged(e.OldItems);
                break;

            case NotifyCollectionChangedAction.Replace:
            case NotifyCollectionChangedAction.Reset:
                this.RemovePropertyChanged(e.OldItems);
                this.AddPropertyChanged(e.NewItems);
                break;
        }

        base.OnCollectionChanged(e);
    }

    private void AddPropertyChanged(IEnumerable items)
    {
        if (items != null)
        {
            foreach (var obj in items.OfType<INotifyPropertyChanged>())
            {
                obj.PropertyChanged += OnItemPropertyChanged;
            }
        }
    }

    private void RemovePropertyChanged(IEnumerable items)
    {
        if (items != null)
        {
            foreach (var obj in items.OfType<INotifyPropertyChanged>())
            {
                obj.PropertyChanged -= OnItemPropertyChanged;
            }
        }
    }

    private void OnItemPropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        // A property of a contained item has changed.
        this.isDirty = true;
    }
} 
```

代码应该是不言自明的。

当然，您可以删除“where T : INotifyPropertyChanged”以允许将未实现该接口的对象存储在集合中，但是您将不会收到有关它们的任何属性更改的通知，因为没有该接口，他们无法通知您。

如果您不仅要跟踪集合是脏的，而且还要跟踪如何，在 OnCollectionChanged 和 OnItemPropertyChanged 中添加一些用于记录事件 args 中传递的信息的添加会很好地做到这一点。

# powershell-3.0 - Powershell start-job arg 升级到 v3 后没有数据

> ID：13936555
> 
> 赞同：0
> 
> 时间：2012-12-18T15:47:26.157
> 
> 标签：powershell-3.0

我有一个脚本用于部署对供应商软件的升级。该脚本利用 xml 来映射不同的部署路径。我注意到这周在强制升级到 powershell 3 后停止工作。下面是一个小的演示脚本来说明这个问题：

```
$xml = [xml] (Get-Content (Get-Item (".\FooBar.xml")))
$foobar = $xml.Stuff.FooBars.Foobar 

$ScriptBlock = {        
    $foobar = $args[0]

    write-host "Inside the job..."
    write-host ("Foobar     : "+$foobar)
    write-host ("Foobar.Foo : "+$foobar.Foo)
    write-host ("Args       : "+$args)
}

write-host "Outside the job..."
write-host ("Foobar: "+$foobar)
write-host ("Foobar.Foo : "+$foobar.Foo)

Start-Job -ScriptBlock $ScriptBlock -Args $foobar | Out-Null        
While (Get-Job -State "Running") { Start-Sleep 2 }               

write-host ("Jobs Completed.")    
Get-Job | Receive-Job          
Remove-Job * 
```

我的xml：

```
<?xml version="1.0"?>
<Stuff xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <FooBars>
    <FooBar>
      <Foo>ThisIsAFoo</Foo>
      <Bar>ThisIsABar</Bar>
    </FooBar>
  </FooBars> 
</Stuff> 
```

v2 上的输出：

```
Outside the job...
Foobar: System.Xml.XmlElement
Foobar.Foo : ThisIsAFoo
Jobs Completed.
Inside the job...
Foobar     : System.Collections.ArrayList System.Collections.ArrayList
Foobar.Foo : ThisIsAFoo
Args       : System.Collections.ArrayList 
```

v3 上的输出：

```
Outside the job...
Foobar: System.Xml.XmlElement
Foobar.Foo : ThisIsAFoo
Jobs Completed.
Inside the job...
Foobar     : System.Collections.ArrayList System.Collections.ArrayList
Foobar.Foo : 
Args       : System.Collections.ArrayList 
```

所以请注意，在 v2 Foobar.Foo 中可以确定，而在 v3 中则不能。有什么想法会导致这种情况以及最好的解决方法吗？范围问题？在我较大的脚本中，XmlElement 被传递给其他函数，因此我想避免将其转换为不同的对象或将其分解为其属性并单独发送它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T19:41:33.907

I just ran into the same issue. I haven't found the exact cause yet, but as a workaround, you can add the flag -PSVersion 2.0 to your start-job line.

# c++ - 我可以在向量的实例上使用 value_type，而不是在其类型上使用

> ID：13936558
> 
> 赞同：6
> 
> 时间：2012-12-18T15:47:29.160
> 
> 标签：c++, sizeof

在播放并尝试计算矢量的总大小时，我尝试了类似

```
vector<double> vd;
auto area = vd.size()* sizeof (vd::value_type); 
//Ive seen Stepanov use area as name for this kind of size, idk if he adds the sizeof vd also to area :) 
```

不幸的是，这不起作用......我需要使用`vector<double>::value_type`，但这会降低代码的可读性。它可以工作吗？我不喜欢`sizeof vd.front()`，因为为此写它看起来很丑`front()`。
编辑： decltype 变体也适合我所说的丑陋类别......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T15:52:03.380

我*认为* [`decltype`](http://en.cppreference.com/w/cpp/language/decltype)可以使用：

```
auto area = vd.size() * sizeof(decltype(vd)::value_type); 
```

当您使用时，`auto`我假设允许使用 C++11。

通过 g++ v4.7.2 和 clang v3.3 确认。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T15:58:53.657

一个简单的辅助函数怎么样？

```
template <typename Container>
size_t value_size(const Container &)
{
    return sizeof(typename Container::value_type);
}

[...]

vector<double> vd;
auto area = vd.size() * value_size(vd); 
```

您甚至可以重载该函数，以便它与其他容器（例如数组）一起使用（当然，您也需要包装`size`）。

理想情况下，整个计算可以包装到一个通用函数中：

```
template <typename Container>
size_t area(const Container &c)
{
    return c.size() * sizeof(typename Container::value_type);
}

//possible overload for arrays (not sure it's the best implementation)
template <typename T, size_t N>
size_t area(const T (&arr)[N])
{
    return sizeof(arr);
}

[...]

std::vector<double> vd;
auto vd_area = area(vd);
double arr[] = { 1., 2\. };
auto arr_area = area(arr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:52:47.233

在 C++11 中，您可以使用`decltype(vd[0])`：

```
auto area = vd.size()* sizeof (decltype(vd[0])); 
```

但在特定情况下，你可以这样写：

```
auto area = vd.size()* sizeof (vd[0]); 
```

由于不会计算内部`sizeof`（以及）内部的表达式，因此即使为空，两者都将起作用。`decltype``vd`

# vba - 循环遍历范围内的单元格并根据单元格的值锁定单元格

> ID：13936559
> 
> 赞同：0
> 
> 时间：2012-12-18T15:47:30.290
> 
> 标签：vba, excel

好的，说我有一系列来自 A1:B10 的单元格。A1 到 A10 范围内的单元格包含一个带有 2 个选项（锁定、dont_lock）的下拉列表。B1 到 B10 范围内的单元格是允许用户输入数据的空单元格。我想要做的是根据相邻单元格中的值锁定单个单元格。所以如果单元格 A1 设置为“锁定”，那么我锁定单元格 B1。如果单元格 A2 设置为“dont_lock”，则 B2 未锁定，依此类推。我尝试使用下面代码中显示的 for 循环，但它不起作用。任何人都可以帮忙吗？

```
Dim rCell As Range
Dim rRng As Range

Set rRng = Sheet1.Range("A1:B10")

For Each rCell In rRng.Cells
    If rCell = "Lock" Then
    Range("B1").Locked = True

End If

Next rCell 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:02:20.183

在 Excel 中，默认情况下单元格是锁定的。如果要解锁单元格，则必须实际指定该行为。但是，如果工作表当前不受保护，则单元格是否被锁定并不重要。因此，如果您想要锁定行为，请确保调用`Sheet1.Protect`.

现在，如果我正确理解了您的解释，您会用这样的方法做得更好：

```
Dim rCell As Range
Dim rRng As Range

Set rRng = Sheet1.Range("A1:A10") 'Exclude B as you are only checking A.
Sheet1.Unprotect
For Each rCell In rRng.Cells
    'Avoid if else structure since locking depends on result of evaluation only.
    rcell.Offset(0,1).locked = rcell.Value = "Lock"
Next rCell
Sheet1.Protect 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:58:41.113

试试下面的代码。您的代码唯一的问题是缺少 rCell.value = "Lock"。您只锁定所有单元格的单元格 B1，您没有锁定相邻的所有单元格:)

## ** 这是一个示例代码**

```
Option Explicit

Sub lockNextCell()
Dim wkSheet As Worksheet
Dim rng As Range, rCell As Range

Set wkSheet = Sheets("Sheets1") '-- use your own sheet
Set rng = wkSheet.Range("A3:A12") '-- use your own range

For Each rCell In rng
    If rCell.Offset(0, 0).Value = "Lock" Then
        rCell.Offset(0, 1).Locked = True '-- here we are locking the adjacent cell
    else
        rCell.Offset(0, 1).Locked = False
    End If
Next rCell

End Sub 
```

只是丹尼尔谈到保护表时的一个注释：

这是[来自 MSDN 的参考](http://support.microsoft.com/kb/214081)：“如果锁定单元格并保护工作表，则无法在单元格中键入数据，无法修改当前单元格中的数据，或更改单元格的其他属性（例如单元格格式）”

# actionscript-2 - 自定义光标

> ID：13936560
> 
> 赞同：1
> 
> 时间：2012-12-18T15:47:34.160
> 
> 标签：actionscript-2

所以我有这段代码可以在我的游戏中自定义光标。

Mouse.hide() startDrag(mc_cursor,true)

它工作正常，但问题是它无法点击按钮，我真的需要知道为什么它不起作用。请帮助我，任何人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:03:17.243

影片剪辑 mc_cursor 的锚点在哪里？创建影片剪辑时，您可以选择锚点。如果是光标的影片剪辑，您需要选择左上角的锚点。

这应该可以解决您的问题。如果它不能解决您的问题，请告诉我您面临的问题。

[如果您想知道原因，鼠标光标会拖动动画剪辑作为锚点。因此，如果锚点设置在中心，则光标将其从中心拖动。]

# python - 使用python复制netcdf文件

> ID：13936563
> 
> 赞同：5
> 
> 时间：2012-12-18T15:47:38.247
> 
> 标签：python, netcdf

我想使用 Python 制作 netcdf 文件的副本。

关于如何读取或写入 netcdf 文件有非常好的示例，但也许还有一种很好的方法是如何将变量输入然后输出到另一个文件。

一个简单的好方法会很好，以便以最低的成本将维度和维度变量获取到输出文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-05-20T15:34:44.667

我在 python netcdf 找到了这个问题的答案[：制作所有变量和属性的副本](https://stackoverflow.com/questions/15141563)，但我需要更改它以使用我的 python/netCDF4 版本（Python 2.7.6/1.0.4）。如果您需要添加或减少元素，您将进行适当的修改。

```
import netCDF4 as nc

def create_file_from_source(src_file, trg_file):
    src = nc.Dataset(src_file)
    trg = nc.Dataset(trg_file, mode='w')

    # Create the dimensions of the file
    for name, dim in src.dimensions.items():
        trg.createDimension(name, len(dim) if not dim.isunlimited() else None)

    # Copy the global attributes
    trg.setncatts({a:src.getncattr(a) for a in src.ncattrs()})

    # Create the variables in the file
    for name, var in src.variables.items():
        trg.createVariable(name, var.dtype, var.dimensions)

        # Copy the variable attributes
        trg.variables[name].setncatts({a:var.getncattr(a) for a in var.ncattrs()})

        # Copy the variables values (as 'f4' eventually)
        trg.variables[name][:] = src.variables[name][:]

    # Save the file
    trg.close()

create_file_from_source('in.nc', 'out.nc') 
```

这个片段已经过测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-05T16:54:39.173

如果您只想使用 netCDF-4 API 来复制*任何*netCDF-4 文件，即使是那些带有使用任意用户定义类型的变量的文件，这是一个难题。例如，netcdf4-python.googlecode.com 上的 netCDF4 模块目前缺乏对具有可变长度成员或复合基类型的可变长度类型的复合类型的支持。

netCDF-4 C 发行版中提供的 nccopy 实用程序表明，可以仅使用 C netCDF-4 API 复制任意 netCDF-4 文件，但这是因为 C API 完全支持 netCDF-4 数据模型。如果您将目标限制为复制仅使用 googlecode 模块支持的平面类型的 netCDF-4 文件，则 nccopy.c 中使用的算法应该可以正常工作，并且应该非常适合 Python 中更优雅的实现。

一个不那么雄心勃勃但更容易的项目是一个 Python 程序，它可以复制任何 netCDF“经典格式”文件，因为 netCDF-3 支持的经典模型没有用户定义的类型或递归类型。该程序甚至适用于同样使用压缩和分块等性能特性的 netCDF-4 经典模型文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-13T10:17:20.143

自从我发现[xarray](https://xarray.pydata.org/en/stable/index.html)以来，这一直是我所有与 python+netCDF 相关的首选工具

您可以轻松复制 netcdf 文件，例如：

```
import xarray as xr

input = xr.open_dataset('ncfile.nc')
input.to_netcdf('copy_of_ncfile.nc') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-26T14:10:29.690

如果您使用的是 Linux 或 macOS，则可以使用 nctoolkit ( [https://nctoolkit.readthedocs.io/en/latest/installing.html](https://nctoolkit.readthedocs.io/en/latest/installing.html) ) 轻松实现。

```
import nctoolkit as nc
data = nc.open_data("infile.nc")
data.to_nc("outfile.nc") 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-18T15:54:51.307

请参阅[如何在 python 中复制文件？](https://stackoverflow.com/questions/123198/how-do-i-copy-a-file-in-python): netcdf 文件与任何其他文件没有什么不同，因此它应该适合您的需要

# c# - IHttpHandler GetHttpHandler 不触发时的情况

> ID：13936566
> 
> 赞同：1
> 
> 时间：2012-12-18T15:47:51.873
> 
> 标签：c#, .net, asp.net-mvc, web-applications, ihttphandler

我有一个项目需要更改 MVC 对图像 http 请求的默认路由行为。

例如，来自 RouteConfig.cs 的这个示例

```
Route ImagesRoute = new Route("{controller}/{folderName}/{fileName}", new ImageRouteHandler());
string regexWindowsFilePattern = @"^([^\x00-\x1f\\?/%*:|" + "\"" + @"<>]+)\.(?:jpeg|jpg|tiff|gif|png)";

ImagesRoute.Constraints = new RouteValueDictionary { { "fileName", regexWindowsFilePattern } };
routes.Add(ImagesRoute); 
```

应该重新路由

```
http://localhost/home/contents/image.jpg 
```

到磁盘上的路径 (c:\cache\[folderName][fileName])。在我的情况下，“重新路由”只是根据请求编写正确的 http 响应。在一个项目（让我们称之为“测试”项目）中，这段代码触发了正常行为：ImageRouteHandler 类的 GetHttpHandler 方法被命中并且图像出现在浏览器中，但是在其他项目中，RouteConfig.cs 和 ImageRouteHandler 的代码相同，只是简单地插入了 GetHttpHandler不会触发，导致 404 NOT FOUND http 错误。这个另一个项目（“目标”项目）具有几乎相同的配置（我已经检查了相关差异）并且已经在同一个 IIS express 服务器上运行。创建新项目并使用目标和测试项目的内容填充会导致正常行为（即图像显示在浏览器中）。

update_1：
我忘了说这个动作不是故意使用的。我有一个必须包含在部分视图中的 html 文件，该文件将呈现 html 文件正文。我无法控制如何创建此文件，但我有一个定义的结构：名称为 [htmlFileName] 的 html 文件和名称为 [htmlFileName].files 的资源文件夹名称。当我请求一个特定的 URL（比如 localhost/[Controller]/[Action]）时，HTML 标记中对资源的引用会导致 URL 不正确（http://localhost/[Controller]/[folderName]/[fileName]）所以我需要重写这些 URL，以便正确响应浏览器的 http 图像请求。这就是为什么我认为需要这个自定义处理程序。

```
using System;
using System.Net;
using System.Web;
using System.IO;
using System.Web.Routing;

namespace MyProject.WebUI.Interface.Utility
{
    public class ImageRouteHandler : IRouteHandler
    {
        public IHttpHandler GetHttpHandler(RequestContext requestContext)
        {
            string fileName = requestContext.RouteData.Values["fileName"] as string;
            string folderName = requestContext.RouteData.Values["folderName"] as string;

            if (string.IsNullOrEmpty(fileName))
            {
                // return a 404 NOT FOUND HttpHandler here
                requestContext.HttpContext.Response.StatusCode = (int)HttpStatusCode.NotFound;
            }
            else
            {
                requestContext.HttpContext.Response.Clear();

                if (requestContext.HttpContext.Request.Url != null)
                {
                    requestContext.HttpContext.Response.ContentType =
                        GetContentType(requestContext.HttpContext.Request.Url.ToString());
                }
                else
                {
                    requestContext.HttpContext.Response.StatusCode = (int)HttpStatusCode.NotFound;
                    requestContext.HttpContext.Response.End();
                }

                // find physical path to image here.  
                string filepath = @"c:\Cache" + @"\" + folderName + @"\" + fileName;

                /*If file exists send the response, otherwise set HTTP 404 NOT FOUND status code for response.*/
                if (File.Exists(filepath))
                {
                    requestContext.HttpContext.Response.WriteFile(filepath);
                    requestContext.HttpContext.Response.End();
                }
                else
                {
                    requestContext.HttpContext.Response.StatusCode = (int)HttpStatusCode.NotFound;
                    requestContext.HttpContext.Response.End();
                }

            }
            return null;
        }

        private static string GetContentType(String path)
        {
            switch (Path.GetExtension(path))
            {
                case ".bmp": return "Image/bmp";
                case ".gif": return "Image/gif";
                case ".jpg": return "Image/jpeg";
                case ".jpeg": return "Image/jpg";
                case ".png": return "Image/png";
                default: break;
            }
            return "";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:56:51.803

似乎在一个项目中，Web.config 中有一个“模块”元素

```
<modules runAllManagedModulesForAllRequests="true" /> 
```

这允许路由模块正常处理图像请求。它默认放置在 Web.config 中，由于某种原因，其他项目中没有这样的 xml 元素。虽然这是一个问题的解决方案，但我找到了一个更好的解决方案：

```
<modules>
  <remove name="UrlRoutingModule-4.0" />
  <add name="UrlRoutingModule-4.0" type="System.Web.Routing.UrlRoutingModule" preCondition="" />
</modules> 
```

对于任何类型的请求，这仅启用一个（而不是全部）托管模块。将这些 xml 元素添加到 Web.config 后，ImageRouteHandler 的 GetHttpHandler 会按预期命中。

# multithreading - 多线程 boost-asio 服务器（对比 boost 异步服务器教程）

> ID：13936567
> 
> 赞同：1
> 
> 时间：2012-12-18T15:47:51.993
> 
> 标签：multithreading, client-server, boost-asio

我正在关注[boost-asio 教程](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio.html)，但不知道如何使用 boost 制作多线程服务器。我已经编译并测试了[日间客户端](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tutdaytime1.html)和[日间同步服务器](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tutdaytime2.html)并改进了通信（服务器向客户端询问命令，处理它，然后将结果返回给客户端）。但是这个服务器一次只能处理一个客户端。

我想使用 boost 来制作多线程服务器。还有白天执行的[异步服务器](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/tutorial/tutdaytime3.html)

```
boost::asio::io_service io_service;
tcp_server server(io_service);
io_service.run(); 
```

在主程序功能中。问题是 - boost 是否为内部某处的每个客户端创建了一个线程？这是多线程解决方案吗？如果没有 - 如何使用 boost 制作多线程服务器？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:36:55.323

看看[这个](http://en.highscore.de/cpp/boost/asio.html#asio_scalability)教程。简而言之：

*   多线程中的 io_service.run() 给出一个线程池
*   多个 io_services 提供完全分离的线程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T13:09:53.307

当您想要支持多个客户端时，您不需要显式使用线程。但是为此，您应该使用**异步**调用（与您列出的教程中使用的同步相反）。看看[异步 echo tcp 服务器](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp)示例，它为多个客户端提供服务而不使用线程。

```
is boost creating a thread for each client somewhere inside? 
```

在处理异步调用时，boost asio 在幕后做这些事情。它可以使用线程，但通常不会，因为有其他首选机制可以同时处理多个套接字。例如在 linux 上你有[epoll](http://en.wikipedia.org/wiki/Epoll)、[select](http://linux.die.net/man/2/select)和[poll](http://linux.die.net/man/2/poll)（按优先顺序）。我不确定 Windows 上的情况如何，可能还有其他机制，或者偏好顺序可能不同。但无论如何，boost asio 会处理这个问题，为您的平台选择最佳机制并将其隐藏在那些异步调用后面。

# javascript - 一次状态更改在 lync 中多次触发 getstatus

> ID：13936568
> 
> 赞同：0
> 
> 时间：2012-12-18T15:48:03.130
> 
> 标签：javascript, jquery, html, lync

我正在使用 ActiveXObject 来处理 lync 状态更改并通过下面的 javascript 显示存在

```
var Instant = {

sipUri: "name@address.com", // Change this to the user's SIP URI you want to chat with
nameCtl: new ActiveXObject('Name.NameCtrl.1'),

onStatusChange: function (name, status, id) {
    alert(name + " " + status + " " +id);
},

showOOUI: function () {

var oouiX = 0, oouiY = 0;

oouiX += pawn_icon.offsetLeft + pawn_icon.clientLeft - pawn_icon.scrollLeft;
oouiY += pawn_icon.offsetTop + pawn_icon.clientTop - pawn_icon.scrollTop;

Instant.nameCtl.ShowOOUI(Instant.sipUri, 0, oouiX, oouiY);
},

hideOOUI: function () {
    Instant.nameCtl.HideOOUI();
}
} 
```

这个 html/javascript 将事件处理程序实际注册到事件：

```
<head>
    <title>Lync Presence Test</title>

    <!-- le JS -->
    <script type="text/javascript">
        if (Instant.nameCtl.PresenceEnabled) {
            Instant.nameCtl.OnStatusChange = Instant.onStatusChange;
            Instant.nameCtl.GetStatus(Instant.sipUri, "1");
        }
    </script>
</head>
<body>
<div id="presence" onmouseover="Instant.showOOUI()" onmouseout="Instant.hideOOUI()">Name<img id="pawn" name="pawn_icon"  src="Styles/images/LyncStatus/imnon.png" alt="Available"> </div>
</body>
</html> 
```

正如标题所述，如果我加载页面，我会触发事件并获得预期的状态代码。但是，如果我更改状态，则会触发两个事件。第一个包含正确的状态码，第二个包含旧的状态码。这里的问题是我想更改为新状态，但陈旧的状态是最后触发的事件，因此它会覆盖新的更改。当我将鼠标悬停在此人的姓名上时，该事件也会触发 6 次。

Microsoft 的 Name.NameCtrl 对象的文档非常少，但据我了解 getstatus 方法和 onstatuschange 属性，它们正是我正在寻找的。

那么，statuschange 事件触发两次是否有原因，有没有办法抢占它或切换返回事件的顺序？另外，如果您将鼠标悬停在名称上，为什么会触发事件，因为没有发生状态更改？我想了解有关特定状态更改事件的更多信息，但我找不到任何东西。我也无权访问 lync 服务器，所以我必须进行客户端设置。

Name.NameCtrl 文档： http: [//msdn.microsoft.com/en-us/library/bb802706 (v=office.14).aspx](http://msdn.microsoft.com/en-us/library/bb802706(v=office.14).aspx)

我在哪里获得了存在功能的代码：http: [//blog.instant-tech.com/2012/05/web-client-for-microsoft-lync-2010.html](http://blog.instant-tech.com/2012/05/web-client-for-microsoft-lync-2010.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:22:36.047

许多事件触发；但是，警报不能准确了解最后触发的事件。事件以正确的顺序触发。我只是在代码中添加了一个 switch 语句来处理更改图片 bas

# eclipse - 在作业中自动对齐“=”

> ID：13936569
> 
> 赞同：9
> 
> 时间：2012-12-18T15:48:05.440
> 
> 标签：eclipse, coding-style, variable-assignment

如何转换一组变量赋值，例如：

```
private final String s1 = "10011";
private final String s2 = "01100";
private final String ones = "11111";
private final String zeros = "00000"; 
```

到一种拉直格式，其中所有`=`标志都对齐到最长左侧之后的一个空格，例如：

```
private final String s1    = "10011";
private final String s2    = "01100";
private final String ones  = "11111";
private final String zeros = "00000"; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T15:51:44.720

**Preferences** → **Java** → **Code Style** → **Formatter** → goto **Edit**并检查`Align fields in columns`：

![对齐列中的字段](../Images/782ab8a771c40a730dd27d9886a68a1c.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-06T08:24:43.010

如果您希望能够对齐分配而不仅仅是字段声明，这个插件做得很好：[OCDFormat](https://github.com/eduardp/OCDFormat/)。

它适用于所有文本文件，不仅仅是java。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-01T01:49:08.817

您可以使用 Eclipse 插件[columns4eclipse](http://columns4eclipse.sourceforge.net/)：

*   免费
*   开源
*   我已经在 Windows 7 SP1 x64 Ultimate 上使用 Eclipse 4.3 x64 和 4.5 x64 对其进行了测试

[![在此处输入图像描述](../Images/bbcdab6dbb87c6fb49cccce57c6f5bda.png)](https://i.stack.imgur.com/j7q3w.gif)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-02T11:57:55.497

[EclipseFormatter](https://github.com/Comee/EclipseFormatter)完美解决了这个问题，它支持在列中对齐字段、赋值和变量声明。

# javafx-2 - JavaFX 崩溃 X 服务器

> ID：13936573
> 
> 赞同：5
> 
> 时间：2012-12-18T15:48:21.353
> 
> 标签：javafx-2, xorg

背景/上下文：

我目前正在开发一个旨在在 Linux 上运行的触摸屏应用程序。作为开发框架，我选择了 JavaFX (jdk1.7.0_10)，因为它易于快速原型设计。我正在使用 Arch Linux (kernel 3.6.10-1-ARCH) 发行版，由于 JavaFX 需要一个完整的环境来运行，所以我在基本配置之上安装了 Xorg。即使我能够运行我的 JavaFX 应用程序，我的应用程序中显示的弹出窗口也存在一些问题。

尝试显示这些弹出窗口时，有时它们没有按预期响应或更糟的情况，它们使我的应用程序崩溃。我得到的错误如下：

```
The program 'java' received an X Window System error.
This probably reflects a bug in the program.
The error was 'BadDrawable (invalid Pixmap or Window parameter)'.
(Details: serial 51101 error_code 9 request_code 62 minor_code 0)
(Note to programmers: normally, X errors are reported asynchronously;
that is, you will receive the error a while after causing it.
To debug your program, run it with the --sync command line
option to change this behavior. You can then get a meaningful
backtrace from your debugger if you break on the gdk_x_error() function.) 
```

顺便说一句，在 Windows（我的开发机器）上运行相同的应用程序时，一切正常。

我还尝试运行复合管理器（'xcompmgr'），因为我也收到了一些警告，例如

```
Can't create transparent stage, because your screen doesn't support alpha channel. You need to enable XComposite extension. 
```

但它没有帮助。

问题：

为了在 Linux 中顺利运行 JavaFX，我是否遗漏了一些文件或配置，或者是否有人遇到过同样的挑战？由于我主要关心的是性能（由于硬件规格有限），我不想安装功能齐全的 Linux 发行版。我只需要运行我的 JavaFX 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:01:19.150

尝试在软件渲染模式下运行 JavaFX：`java -Dprism.order=j2d -jar your.jar`

另请注意，您的平台似乎未包含在受支持的列表中：[http ://www.oracle.com/technetwork/java/javafx/downloads/supportedconfigurations-1506746.html](http://www.oracle.com/technetwork/java/javafx/downloads/supportedconfigurations-1506746.html)

# java - 如果两个日期相等，则 Date before 方法返回 false

> ID：13936576
> 
> 赞同：42
> 
> 时间：2012-12-18T15:48:38.810
> 
> 标签：java, date

**当使用 date before**方法比较两个日期时，如果日期相似，则返回 false，如下所示：

*   **日期 1：2012 年 12 月 18 日星期二 00:00:00 GMT+02:00**
*   **日期 2：2012 年 12 月 18 日星期二 00:00:00 GMT+02:00**

在这种情况下，该方法`date1.before(date2)`总是返回 false，这对我来说没有意义（换句话说，不适用于我的情况）。我想检查日期（日/月/年）是否等于今天的日期（日/月/年）？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-12-18T15:51:33.497

因为`date1.equals(date2)`，`date1.before(date2)`返回 false 是正常的。会做`date1.after(date2)`的。

两个日期相同，所以一个不在另一个之前。

从[javadoc](https://docs.oracle.com/javase/7/docs/api/java/util/Date.html)：

> 当且仅当此 Date 对象表示的时刻**严格**早于 when 表示的时刻时，才为真；否则为假。

尝试类似：

```
if(date1.before(date2) || date1.equals(date2)) ... 
```

下面提供的答案建议测试逆向，它们是正确的：

```
if(!date1.after(date2)) ... 
```

两种测试是等效的。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-12-18T19:23:16.073

您可以简单地测试逆：

```
!date1.after(date2) 
```

您始终可以通过这种方式将严格的订单检查转换为非严格的检查。由于数学上：

```
a > b ⇔ ¬ (a ≤ b) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-18T16:00:01.193

如果日期相等，那么显然一个不在另一个之前：`false is the correct return for date1.before(date2) where date1 == date2`.

如果你需要*包括*平等，为什么不做一个否定`.after()`（显然如果日期 1 不是在日期 2 之后，那么它*等于或之前*），但我会确保这实际上是你想要完成的正确逻辑.

如果相等是需要以不同方式处理的特殊情况，则对`.equals()`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-03T16:04:15.120

您可以像 bowmore 提出的那样使用逆：`!date1.after(date2)`

或者，如果您正在寻找范围，between 可以包括端点，在这种情况下，您可以`use return !d.before(min) && !d.after(max)`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-10-13T08:33:55.520

您也可以使用它：

```
boolean check = dateOne.before(dateTwo) || DateUtils.isSameDay(dateOne, dateTwo); 
```

DateUtils 来自**org.apache.commons.lang.time**包

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-28T17:07:31.437

您的代码的真正问题可能是您没有考虑到 millis 和 before 函数

带有 toString 结果的两个对象 java.util.Date：Sun Aug 28 00:00:00 CEST 2016 在调用 getTime 时可能具有不同的值。例如

```
Date d1;
Date d2;
d1.toString(); // = Sun Aug 28 00:00:00 CEST 2016
d2.toString(); // = Sun Aug 28 00:00:00 CEST 2016
d1.getTime(); // = 1472335200605
d2.getTime(); // = 1472335200000 
```

当然，这些日期并不相等。

> ## 来自 javadoc：
> 
> “返回：当且仅当此 Date 对象表示的时刻严格早于 when 表示的时刻时才返回 true；否则返回 false。”

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-18T15:51:14.707

这是一种非常正常的行为，因为`dateBefore`检查一个日期是否**在另一个日期之前**。如果日期相同，这显然是错误的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-11T08:03:06.907

您可以使用`Date.compareTo()`.

这里的值是：

1.  如果两个日期相等，则返回值为 0。
2.  如果 Date 在 date 参数之后，则返回值大于 0 。
3.  如果 Date 在 date 参数之前，则返回值小于 0。

示例代码是：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
        Date date1 = sdf.parse("2009-12-31");
        Date date2 = sdf.parse("2010-01-31");

        System.out.println("date1 : " + sdf.format(date1));
        System.out.println("date2 : " + sdf.format(date2));

        if (date1.compareTo(date2) > 0) {
            System.out.println("Date1 is after Date2");
        } else if (date1.compareTo(date2) < 0) {
            System.out.println("Date1 is before Date2");
        } else if (date1.compareTo(date2) == 0) {
            System.out.println("Date1 is equal to Date2");
        } else {
            System.out.println("How to get here?");
        } 
```

有关更多详细信息，您可以访问[此线程](https://mkyong.com/java/how-to-compare-dates-in-java/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-11T19:58:08.023

2012 年的答案是正确的，并且在当时通常是很好的答案。现在我们肯定更喜欢使用 java.time，现代 Java 日期和时间 API，而不是`Date`问题中隐含的类。`Date`设计不佳，现在早已过时。

获得“之前或相等”比较的两种推荐方法是：

1.  **自然而罗嗦的**一个：

    ```
     OffsetDateTime dateTime1 = OffsetDateTime.of(2012, 12, 18, 0, 0, 0, 0, ZoneOffset.ofHours(2));
        OffsetDateTime dateTime2 = OffsetDateTime.of(2012, 12, 18, 0, 0, 0, 0, ZoneOffset.ofHours(2));

        if (dateTime1.isBefore(dateTime2) || dateTime1.isEqual(dateTime2)) {
            System.out.println("dateTime1 is before or equal to dateTime2");
        } else {
            System.out.println("dateTime1 is after dateTime2");
        } 
    ```

    输出是：

    > dateTime1 早于或等于 dateTime2

    顺便`OffsetDateTime.isEqual()`说一句，比较时间点、瞬间、跨 UTC 偏移量并将返回 true 的两个对象表示相同的时间点。也`isBefore()`适用于不同的 UTC 偏移量。

2.  **我们颠倒条件**的简短说明：****

     **```
     if (dateTime1.isAfter(dateTime2)) {
            System.out.println("dateTime1 is after dateTime2");
        } else {
            System.out.println("dateTime1 is before or equal to dateTime2");
        } 
    ```

    输出和以前一样。** 

 **根据要求，您很容易发现自己更喜欢`Instant`该类而不是`OffsetDateTime`. `if`条件将是相同的。

无论是使用老式的`Date`还是现代的类之一，都*意味着*严格*地从前*。因此，要获得*之前或相等*，我们需要使用上述变体之一。**

# java - javax.enterprise.event.Event：如何初始化 pushEvent

> ID：13936582
> 
> 赞同：0
> 
> 时间：2012-12-18T15:48:48.063
> 
> 标签：java, events, push, cdi

我目前正在工作 CDI pushevent。我计划通过后端 Java 代码而不是通过 commandButton 来触发前端 jsf 来触发 pushevent。这是 PushCdiBean.java 的代码

```
import java.io.Serializable;
import java.util.UUID;

import javax.annotation.PostConstruct;
import javax.enterprise.event.Event;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.inject.Inject;

import org.richfaces.application.push.MessageException;
import org.richfaces.application.push.TopicKey;
import org.richfaces.application.push.TopicsContext;
import org.richfaces.cdi.push.Push;

/**
 * @author <a href="http://community.jboss.org/people/lfryc">Lukas Fryc</a>
 */
@javax.inject.Named("pushCdiBean") 
@javax.enterprise.context.RequestScoped 
//@ManagedBean(name="pushCdiBean")
//@ViewScoped

public class PushCdiBean implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = -5241937306040858158L;
    private static final String CDI_PUSH_TOPIC = "pushCdi";
    private String userIdentifier; 
    private String message; 

    @Inject
    @Push(topic=CDI_PUSH_TOPIC)//i thought that the topic is initialized with this ?!
    private Event<String> pushEvent;

    @PostConstruct
    public void initialize() {
                   if(userIdentifier == null) {
                                  userIdentifier = UUID.randomUUID().toString().replace("-", ""); 
                   } 

    TopicsContext topicsContext = TopicsContext.lookup();
    topicsContext.getOrCreateTopic(new TopicKey(CDI_PUSH_TOPIC, userIdentifier));//initialize the topic and make the troublesome message disappears
    }

    public synchronized void sendMessage() throws MessageException {
              pushEvent.fire(message);
    }

    public String getMessage() {
              return message;
    }

    public void setMessage(String message) {
              this.message = message;
    } 

    public Event<String> getPushEvent() {
        return pushEvent;
    }

    public void setPushEvent(Event<String> pushEvent) {
        this.pushEvent = pushEvent;
    }

    public String getUserIdentifier() {
        return userIdentifier;
    }

    public void setUserIdentifier(String userIdentifier) {
        this.userIdentifier = userIdentifier;
    } 
```

但是，当我尝试创建 PushCdiBean 类并调用 sendMessage() 函数时， pushEvent.fire 失败。代码在这里。

```
/**
 * 
 */
public void run() {
      while (running) {
            try {
                            PushCdiBean pushTest = new PushCdiBean();
                            pushTest.setMessage("This is CDI push Test");
                            pushTest.sendMessage();
                         }
                         catch (Exception e) {
                    System.out.println("Exception: " + e.getMessage());
                          }
                       sleep(4000);
                     }
} 
```

你能给我一些建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:07:53.840

您必须`@Inject`使用 CDI bean，而不是通过 new 自己实例化它。

# sql - SQL Server 2008 中的 AVG 和 CASE

> ID：13936583
> 
> 赞同：1
> 
> 时间：2012-12-18T15:48:53.490
> 
> 标签：sql, sql-server, sql-server-2008, case

> **可能重复：**
> [SQL 中的平均值和大小写](https://stackoverflow.com/questions/13935413/average-and-case-in-sql)

我正在使用 SQL Server 2008 并尝试生成报告，但以下代码没有产生所需的结果，这给了我 2 行而不是 1 行。ScoreTypeID 的值可以是 22、52、3 或 4。如果是 22 或 52，我需要平均值，如果不是，我需要显示 0。知道可能是什么问题吗？谢谢。

```
CASE WHEN FAS1.ScoreTypeID = 22 THEN avg(fas1.totalscore)  
    WHEN FAS1.ScoreTypeID = 52 THEN avg(fas1.totalscore)   ELSE 0    
END  AS   'Total Score', 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:43:52.857

您还没有向我们展示其余的查询，一般来说这应该可以；

```
CASE WHEN FAS1.ScoreTypeID IN (22,52) THEN avg(fas1.totalscore) 
     ELSE 0 END AS 'Total Score', 
```

或者 ;

```
ISNULL( AVG( case when FAS1.ScoreTypeID in (22,52) then fas1.totalscore
      else null end), 0) as 'Total Score', 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:48:35.247

不确定你想要什么输出。如果只有 1 行：

```
AVG(CASE WHEN FAS1.ScoreTypeID IN (22, 52) THEN fas1.totalscore
         ELSE 0 END) AS 'Total Score', 
```

如果 2 行：（22 行 1 行，52 行 1 行）

```
SELECT FAS1.ScoreTypeID, AVG(fas1.totalscore) FROM ...
WHERE FAS1.ScoreTypeID IN (22, 52)
GROUP BY FAS1.ScoreTypeID 
```

# java - 通过文件写入器打印所有值

> ID：13936585
> 
> 赞同：0
> 
> 时间：2012-12-18T15:48:57.780
> 
> 标签：java

我想打印用户输入的所有字母，但问题是，我的程序只打印用户输入的最后一个值，并且只有最后一个值记录在`Ascii.txt`. 它应该看起来像这样

例如：用户输入 A,B,c,C

我也想删除逗号，但我不能:(

“Ascii.txt”中的输出应该是：

```
A = 65
B = 66
c = 99
C = 67 
```

请不要笑我，因为我还是个学生和编程新手，非常感谢

```
import java.io.*;

public class NewClass2{
  public static void main(String args[]) throws IOException{

  BufferedReader buff = new BufferedReader(new InputStreamReader(System.in));

  System.out.println("Please Enter  letters separated by comma: ");

  String str = buff.readLine();
  for ( int i = 0; i < str.length(); ++i )
  {
    char c = str.charAt(i);
    int j = (int) c;
    System.out.println(c +" = " + j);
    {
      try
      {
         FileWriter fstream = new FileWriter("Ascii.txt");
         BufferedWriter out = new BufferedWriter(fstream);

         out.write(c+"  =  "+j);
         out.close();

       }catch (Exception e){
       }
     }
    }
  }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:56:54.653

问题是您关闭并重新打开`FileStream`要转储到 ASCII 文件的每个字符。因此，您的文件将在写入字符之前被清空。只需将流的创建和关闭移到循环之外。

```
 BufferedReader buff = new BufferedReader(new  InputStreamReader(System.in));
    System.out.println("Please Enter  letters separated by comma: ");

    String str = buff.readLine();
    BufferedWriter out = null;
    try
    {
        FileWriter fstream = new FileWriter("Ascii.txt");
        out = new BufferedWriter(fstream);
        for ( int i = 0; i < str.length(); ++i )
        {
            char c = str.charAt(i);
            int j = c;
            System.out.println(c + " = " + j);

            out.write(c + "  =  " + j);

        }
    }

    catch ( Exception e )
    {
        ;
    }
    finally
    {
        if ( out != null )
        {
            out.close();
        }
    } 
```

为了从输出中删除逗号，我建议使用[String.split()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)：

```
 //...          
    String[] splittedStr = str.split(",");
    for ( int i = 0; i < splittedStr.length; i++ )
    {
        if ( splittedStr[i].length() > 0 )
        {
            char c = splittedStr[i].charAt(0);
            int j = c;

            out.write(c + "  =  " + j);
        }
    }
    //... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:56:11.750

您只能在 str 上的循环之后写入文件。

```
BufferedWriter out;
try{
FileWriter fstream = new FileWriter("Ascii.txt");
out = new BufferedWriter(fstream);
for ( int i = 0; i < str.length(); ++i ){
  char c = str.charAt(i);
  int j = (int) c;
  System.out.println(c +" = " + j);
  out.write(c+"  =  "+j);
} catch ...{
...
} finally {
   if (out!=null) 
     out.close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:20:38.200

正如所指出的，每次写入文件时都会关闭流。也许您正在寻找`flush()`方法。

作为补充，如果您使用的是 Java 7，则可以将 try 与资源一起使用（因此您不必费心关闭它）：

```
BufferedReader buff = new BufferedReader(new  InputStreamReader(System.in));
System.out.println("Please Enter  letters separated by comma: ");

String str = buff.readLine();

try( BufferedWriter out = new BufferedWriter(new FileWriter("Ascii.txt"))){
   //Using split
   String[] splitted = str.split(",");
   for(String s : splitted){
      char c = s.charAt(0);
      int j = c;
      out.write(c + "  =  " + j);
   }
}catch(Exception E){
   //You really should catch specific exceptions here.
} 
```

# c# - 为整个解决方案设置当前区域性

> ID：13936586
> 
> 赞同：5
> 
> 时间：2012-12-18T15:49:00.593
> 
> 标签：c#, multilingual, culture

我正在尝试在具有多个项目和线程的解决方案中支持多种语言。

我有 2 个资源文件，一个是英文字符串，一个是法文字符串。

我将当前文化设置如下：

```
Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(isEnglish ? "en-US" : "fr-CA"); 
```

有没有办法为整个解决方案全局设置当前文化，还是我必须为每个需要访问字符串的线程执行此操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T15:54:23.343

在 .NET Framework 4.5 中，[CultureInfo.DefaultThreadCurrentCulture 属性](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.defaultthreadcurrentculture%28v=vs.110%29.aspx)获取或设置当前应用程序域中线程的默认区域性。

> 在 .NET Framework 4 及以前的版本中，默认情况下，所有线程的区域性都设置为 Windows 系统区域性。对于当前文化与默认系统文化不同的应用程序，这种行为通常是不可取的。在 .NET Framework 4.5 中，DefaultThreadCurrentCulture 属性使应用程序能够定义应用程序域中所有线程的默认区域性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T15:54:51.297

您可以在 web.config 中的 system.Web 中添加全球化部分

```
<globalization culture="en-US" uiCulture="en-US" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:54:25.317

一旦你设置了`CurrentThread`它，它就会在应用程序的持续时间内设置。只要确保在初始化任何`UI`. 查看此[MSDN 博客](http://msdn.microsoft.com/en-us/library/b28bx3bh%28v=vs.80%29.aspx)以获取更多信息。

# objective-c - 指向函数语法和用法的指针

> ID：13936592
> 
> 赞同：0
> 
> 时间：2012-12-18T15:49:13.413
> 
> 标签：objective-c, c

如果这个问题被问了很多次，我很抱歉。我试图理解为什么这两个都可以正常工作而没有任何警告或其他可见问题（在 Xcode 中）：

```
int testFunctionAcceptingIntPointer(int * p) {         
    return *p = *p +5;
}

void test() {
    int testY = 7;
    typedef int (*MyPointerToFunction)(int*);
    // Both this (simply a function name):
    MyPointerToFunction functionPointer = testFunctionAcceptingIntPointer;
    // And this works (pointer to function):
    MyPointerToFunction functionPointer = &testFunctionAcceptingIntPointer;
    int y = functionPointer(&testY);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T15:56:45.687

由于函数指示符被转换为函数指针，因此代码在没有警告的情况下都可以正常工作

```
MyPointerToFunction functionPointer = testFunctionAcceptingIntPointer; 
```

除非它是地址运算符的操作数

```
MyPointerToFunction functionPointer = &testFunctionAcceptingIntPointer; 
```

（或`sizeof`和`_Alignof`）。

在第一次分配中，您不使用`&`，因此完成了自动转换，从而产生了适当类型的函数指针，在第二次中，您显式地获取了地址，从而产生了适当类型的函数指针。

# tfs - TFS 2012 中的配置文件图像

> ID：13936595
> 
> 赞同：5
> 
> 时间：2012-12-18T15:49:18.420
> 
> 标签：tfs

有没有办法以管理员身份更改用户个人资料图像。在我们公司，我们有一个每个人的图像的中央存储库，我们希望在 TFS Web Portal 上将其用于他们的个人资料。我知道每个人都可以单独完成，但可以在全球范围内为每个人完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T01:45:53.550

**TL/DR**

我已向[ALM Rangers Team Tools 快速响应示例提交了一个补丁，该补丁为任何 TFS 管理员提供了个人资料图像功能](http://blog.jessehouwing.nl/2013/01/set-your-tfs-profile-or-team-image-from.html)。

* * *

**细节**

官方回答：**没有**。不在该平台的当前版本中，正在考虑将其用于未来版本。

真正的答案，可以通过 api 技巧来完成。但它仍然不受支持。我正在开发一个可以做到这一点的命令行工具。假期后我可能会分享它。如果您更早需要它，请打开 reflector.net 中的 webaccess dll，您将能够找到有问题的代码。

个人资料图像基本上是用户身份对象的扩展属性。

重要的几行是：

```
 _identity.SetProperty("Microsoft.TeamFoundation.Identity.Image.Data", imageData); /* byte[] containing 90x90px png */
            _identity.SetProperty("Microsoft.TeamFoundation.Identity.Image.Type", "image/png");
            _identity.SetProperty("Microsoft.TeamFoundation.Identity.Image.Id", Guid.NewGuid().ToByteArray());
            _identity.SetProperty("Microsoft.TeamFoundation.Identity.CandidateImage.Data", null);
            _identity.SetProperty("Microsoft.TeamFoundation.Identity.CandidateImage.UploadDate", null);
            UpdateIdentity(); 
```

更新身份的代码：

```
 private static void UpdateIdentity()
    {
        try
        {
            _service.UpdateExtendedProperties(_identity);
            _service.RefreshIdentity(_identity.Descriptor);
        }
        catch (PropertyServiceException)
        {
            //swallow;
        }
    } 
```

检索身份服务和身份的代码：

```
 var server = TfsConfigurationServerFactory.GetConfigurationServer(new Uri("http://localhost:8080/tfs"));
        server.ClientCredentials = new TfsClientCredentials();
        server.ClientCredentials = new TfsClientCredentials(new WindowsCredential(new NetworkCredential(connectUser, password)));
        server.Authenticate();

        _service = server.GetService<IIdentityManagementService2>();

        var identities = _service.ReadIdentities(IdentitySearchFactor.AccountName,
                                                new[] {userToSetImageOn}, MembershipQuery.None, ReadIdentityOptions.None); 
```

# mercurial - Bitbucket/Mercurial/Tortoise 如何将文件夹添加到 Bitbucket 存储库？

> ID：13936601
> 
> 赞同：4
> 
> 时间：2012-12-18T15:49:34.647
> 
> 标签：mercurial, tortoisehg, bitbucket

我正在与另外 2 个人一起开展一个项目，并希望在 Bitbucket 存储库中为我们每个人创建单独的文件夹。我尝试在我的机器上创建文件夹并将其推送到存储库，但这不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T17:14:13.343

要创建文件夹，您需要在该文件夹中创建一个文件并将其添加到存储库，然后您可以推送它。Mercurial 跟踪文件的更改，因此如果文件夹没有“内容”，则不会对其进行跟踪。

假设您在每个目录中都有一个您想要的基本源文件（我们称之为`main.cpp`），您可以像这样创建文件夹：

```
$ mkdir folder1
$ mkdir folder2
$ hg st 
```

请注意，没有列出任何响应状态的内容，因为没有新文件。

```
$ cp main.cpp folder1
$ cp main.cpp folder2
$ hg st
? folder1/main.cpp
? folder2/main.cpp 
```

以上显示将文件添加到文件夹会使它们对 Mercurial “可见”。

```
$ hg add
$ hg st
+ folder1/main.cpp
+ folder2/main.cpp 
```

现在文件被标记为已添加，因此当您提交时，它们将存在于存储库中。

请注意，上面是*一个示例*，用于演示您需要文件夹中的文件才能看到它。

# python - 使用 Python/Linux 读取网络摄像头的选项

> ID：13936607
> 
> 赞同：6
> 
> 时间：2012-12-18T15:50:13.853
> 
> 标签：python, opencv, webcam, raspberry-pi

我正在寻找一种将网络摄像头集成到我的 python 程序中的方法。

我在 Raspberry Pi Model A OC'd 到 900mHz 上运行，因此该解决方案需要与 ARM 兼容并且（希望）是轻量级的。

我见过的大多数帖子都建议使用 OpenCV 模块来读取网络摄像头，但是除了从我的网络摄像头中出现的黑框之外，我什么也得不到。我假设 OpenCV 与我的网络摄像头不兼容。但是，可用于 linux 的所有其他网络摄像头应用程序都可以检测并显示来自我的网络摄像头的提要。

我想知道是否有任何其他轻量级或简单的方法可以使用 python 从我的网络摄像头捕获。也许我可以直接与 /dev/ 下为我的网络摄像头出现的 video0 设备交互？我愿意接受任何建议；因为我现在正在做的，是行不通的。

谢谢

（按照要求）：

输出`v4l2-ctl --all`：

```
Driver Info (not using libv4l2):
    Driver name   : uvcvideo
    Card type     : UVC Camera (046d:081b)
    Bus info      : usb-bcm2708_usb-1.2
    Driver version: 3.2.27
    Capabilities  : 0x04000001
        Video Capture
        Streaming
Format Video Capture:
    Width/Height  : 640/480
    Pixel Format  : 'YUYV'
    Field         : None
    Bytes per Line: 1280
    Size Image    : 614400
    Colorspace    : SRGB
Crop Capability Video Capture:
    Bounds      : Left 0, Top 0, Width 640, Height 480
    Default     : Left 0, Top 0, Width 640, Height 480
    Pixel Aspect: 1/1
Video input : 0 (Camera 1: ok)
Streaming Parameters Video Capture:
    Capabilities     : timeperframe
    Frames per second: 30.000 (30/1)
    Read buffers     : 0 
```

这是我正在使用的代码片段：

```
import cv

cv.NamedWindow("camera", 1)
capture = cv.CaptureFromCAM(0)

while True:
    img = cv.QueryFrame(capture)
    cv.ShowImage("camera", img)
    if cv.WaitKey(10) == 27:
        break

cv.DestroyWindow("camera") 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T13:54:45.543

您可以使用 gstreamer-0.10。

1.  让它在命令行上工作。例如：gst-launch -v v4l2src ！解码器！ffmpeg色彩空间！！文件接收器位置=out.png

2.  使用 parse_launch 函数在 python 代码中获取工作管道的快捷方式。

    ```
    import gst

    pipeline = gst.parse_launch("""
    v4l2src ! decodebin ! ffmpegcolorspace ! pngenc ! filesink location="%s"
    """ % sys.argv[-1])

    pipeline.set_state(gst.STATE_PLAYING) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T02:00:39.590

我尝试了几种方法从网络摄像头捕获单帧：

uvccapture 是一种选择，这里有一个命令：

```
uvccapture -d /dev/video0 -o outfile.jpg 
```

streamer 是另一个，命令看起来像这样：

```
streamer -c /dev/video0 -o outfile.jpeg 
```

是的，我意识到这不是最高性能，因为您必须使用 Python 的“命令”模块来执行此命令并获取结果，然后在 OpenCV 中打开生成的文件进行处理。

但它确实有效。我已经在几个自动化项目的生产中非常成功地使用它。我所经历的滞后都是基于我的图像处理软件，原始图像可以非常快速地显示出来。

# xml - XQuery：在许多同名的 XML 元素中只获取一个

> ID：13936613
> 
> 赞同：0
> 
> 时间：2012-12-18T15:50:31.013
> 
> 标签：xml, geolocation, xquery

我正在使用此 URL 来获取给定位置的信息（带有纬度/经度）：

> [http://maps.googleapis.com/maps/api/geocode/xml?latlng=48.845909,2.341762&sensor=true](http://maps.googleapis.com/maps/api/geocode/xml?latlng=48.845909,2.341762&sensor=true)

我想做的是得到这个地方的基本地址（地址，城镇）。所以我尝试了这个 XQuery 请求：

```
let $lat := 48.845909,
$lng := 2.341762,
$url := concat('http://maps.googleapis.com/maps/api/geocode/xml?latlng=',$lat,',',$lng,'&#38;sensor=true'),
$resp := doc($url)
return $resp//result/formatted_address/string() 
```

但是有了这个，我得到了 XML 结果的所有**formatted_address**元素，所以在这里我得到：

```
12 Rue Royer-Collard, 75005 Paris, France
Val-de-Grâce, Paris, France
75005 Paris, France
5th arrondissement of Paris, Paris, France
Paris, France
Paris, France
Île-de-France, France
France 
```

我只想要第一行。我应该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:55:17.887

只需使用 [1] 获取第一个元素。：

```
let $lat := 48.845909,
$lng := 2.341762,
$url := concat('http://maps.googleapis.com/maps/api/geocode/xml?latlng=',$lat,',',$lng,'&#38;sensor=true'),
$resp := doc($url)
return ($resp//result/formatted_address/string())[1] 
```

或将其移至第一个结果（可能更快）：

```
let $lat := 48.845909,
$lng := 2.341762,
$url := concat('http://maps.googleapis.com/maps/api/geocode/xml?latlng=',$lat,',',$lng,'&#38;sensor=true'),
$resp := doc($url)
return $resp//result[1]/formatted_address/string() 
```

# php - 如何将 json_encode 结果存储在表中

> ID：13936617
> 
> 赞同：0
> 
> 时间：2012-12-18T15:50:43.963
> 
> 标签：php

我有一个数据库，它通过显示数据库中所有员工的名字和姓氏来工作，我可以显示它，但是当它显示时，它没有被格式化。我想尝试将结果放在表格中，但我不确定我会怎么做。

我以为我必须回声`json_encode(echo.<td>$posts</td>)`或类似的东西

```
 <?php foreach($query as $row): ?>
   <tr> 
   <td>
        <?php $arr = array(

                        'first_name' => $row->first_name,   
                        'last_name' => $row->last_name,

                        ); ?>
    <?php  $posts[] = $arr;?>

    </tr>
    <?php endforeach; ?>
    <?php echo json_encode($posts);?> 
```

这就是它现在的显示方式

```
[{"first_name":"Georgi","last_name":"Facello"},    
{"first_name":"Georgi","last_name":"Atchley"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:56:38.597

你将不得不“手工”建造桌子。像这样：

```
<table>
<?php foreach($query as $row): ?>
   <tr> 
   <td>
     <?php echo $row->first_name; ?>
   </td>
   <td>
     <?php echo $row->last_name; ?>
   </td>
   </tr>
<?php endforeach; ?>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:58:36.820

```
<table>
<thead> 
   <th> First Name </th> 
   <th> Last Name </th> 
</thead> 
<tbody> 
   <?php foreach($query as $row): ?>
      <tr>
         <td> <?php echo $row->first_name ?> </td> 
         <td> <?php echo $row->last_name ?> </td>
      </tr>
   <?php endforeach; ?>
</tbody> 
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T15:55:03.750

你和这样的人之间没有写任何东西`<tr>`..你只是分配给帖子，然后在没有意义的事实之后将其打印为 JSON。

```
<?php foreach... ?>
<tr>
   <td>
      <?php echo $row->first_name ?>
   </td>
   <td>
      <? php echo $row->last_name ?>
   </td>
</tr>
<?php endforeach ?> 
```

# jdbc - MyBatis select 语句返回空值

> ID：13936618
> 
> 赞同：6
> 
> 时间：2012-12-18T15:50:44.133
> 
> 标签：jdbc, mybatis

我正在尝试运行一个简单的 MyBatis 示例，从“trains”表中选择所有行。

问题是查询执行，但它返回一个具有正确数量元素的列表，但填充了空值。直接使用 JDBC PreparedStatement 运行的相同查询工作正常。

也许这是一个配置问题，但我无法弄清楚我做错了什么。

这是代码。提前致谢。

*火车.java*

```
package org.example.mybatis.domain;

public class Train implements Serializable
{
private int id;
private String type;

    // getters and setters
} 
```

*TrainMapper.java*

```
package org.example.mybatis.persistence;

public interface TrainMapper {

List<Train> getAllTrains();
} 
```

*火车选择器.java*

```
package org.example.mybatis.test;

public class TrainSelector implements TrainMapper {

    private static String resource = "mybatis-config.xml";
    private static SqlSessionFactory factory = null;

    private SqlSessionFactory getSqlSessionFactory()
    {
        if (factory == null)
        {
            try {
                InputStream inputStream = Resources.getResourceAsStream(resource);
                factory = new SqlSessionFactoryBuilder().build(inputStream);
            } catch (IOException e) {
                e.printStackTrace();
            }
         }
         return factory;
    }

    @Override
    public List<Train> getAllTrains()
    {
        List<Train> trains = null;

        SqlSession session = getSqlSessionFactory().openSession();
        try {
            TrainMapper mapper = session.getMapper(TrainMapper.class);
            trains = mapper.getAllTrains();
        } finally {
            session.close();
        }   
        return trains;
    }

    public static void main(String[] args) {
        List<Train> trains = null;

        TrainSelector trainSelector = new TrainSelector();
        trains = trainSelector.getAllTrains();

        System.out.println(trains);
    }

} 
```

*mybatis-config.xml*

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE configuration
   PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-config.dtd">

<configuration>
  <properties resource="database.properties" />

  <typeAliases>
    <typeAlias alias="Train" type="org.example.mybatis.domain.Train" />
    <!--package name="org.example.mybatis.domain" />-->
  </typeAliases>

  <environments default="development">
    <environment id="development">
      <transactionManager type="JDBC" />
      <dataSource type="POOLED">
        <property name="driver" value="${database.driver}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.username}" />
        <property name="password" value="${database.password}" />
      </dataSource>
    </environment>
  </environments>

  <mappers>
    <mapper resource="org/example/mybatis/persistence/TrainMapper.xml" />
  </mappers>
</configuration> 
```

*火车映射器.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.example.mybatis.persistence.TrainMapper">

  <cache />

  <select id="getAllTrains" parameterType="list" resultType="Train">
    SELECT * 
    FROM trains
  </select>
</mapper> 
```

*JdbcStatementExample.java*

```
package org.example.mybatis.test;

public class JdbcStatementExample {

    private static void selectAllTrains() throws SQLException
    {
        String sql = "SELECT * FROM trains";
        Connection conn = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        String url = "jdbc:mysql://localhost/testing";
        String user = "test";
        String password = "test";

        try {
            conn = DriverManager.getConnection(url, user, password);
            ps = conn.prepareStatement(sql);
            rs = ps.executeQuery();

            while (rs.next()) {
                String id = rs.getString("train_id");
                String type = rs.getString("train_type");
                System.out.println("id: " + id);
                System.out.println("type: " + type);
            }
        } catch (SQLException e) {
            throw new RuntimeException(e);
        } finally {
            if (ps != null) {
                ps.close();
            }
            if (conn != null) {
                conn.close();
            }
        }
    }

    public static void main(String[] args)
    {
        try {
            selectAllTrains();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T14:20:12.937

结果集中列的名称与 Train 对象中的属性名称不同。你需要一个显式的结果映射，让 Mybatis 知道哪一列要映射到哪个属性。

```
<resultMap id="trainMap" type="Train>
        <id property="id" column="train_id" javaType="java.lang.Integer" jdbcType="INTEGER"/>
        <result property="type" column="train_type" javaType="java.lang.String" jdbcType="VARCHAR"/>
</resultMap> 
```

使您的选择元素成为

```
<select id="getAllTrains" parameterType="list" resultType="trainMap">
    SELECT * FROM trains
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-28T10:02:42.610

其他选项是使用列名和别名。

列名将是您的数据库，别名将设置为与您的 Train 对象属性匹配：

```
<select id="getAllTrains" parameterType="list" resultType="trainMap">
  SELECT 
  train_id as id,
  train_type as type
  FROM trains
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-28T04:24:19.633

我遇到了同样的问题，但仅适用于具有多个单词的字段。当然，我在 SQL 中的命名约定是 user_id，而在 java 中是 userId。我的 mybatis-config.xml 文件中的这段配置保存了这一天：

```
<settings>   
    <setting name="mapUnderscoreToCamelCase" value="false"/> 
</settings> 
```

或对于属性文件：

> mybatis.configuration.map-underscore-to-camel-case=true

信用：[https ://chois9105.github.io/spring/2017/12/31/configuring-mybatis-underscore-to-camel-case.html](https://chois9105.github.io/spring/2017/12/31/configuring-mybatis-underscore-to-camel-case.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-30T16:14:48.953

结果可以按照 Seeta 的描述或在此处的官方文档中进行映射： [https ://mybatis.org/mybatis-3/sqlmap-xml.html](https://mybatis.org/mybatis-3/sqlmap-xml.html)

在 MyBatis 3.x 中，该示例不起作用，因为您需要设置*resultMap*而不是*resultType*。并且您不能同时设置两者！工作示例如下所示：

```
<select id="getAllTrains" parameterType="list" resultMap="trainMap">
    SELECT * FROM trains
</select> 
```

# c# - 编辑文本文件中的单行

> ID：13936620
> 
> 赞同：1
> 
> 时间：2012-12-18T15:50:54.227
> 
> 标签：c#, text-files, edit

我有一个文本文件，每一行都具有相同的结构
ID；标题；注释
示例：1；你好; 一些评论。

我希望能够使用文本框作为 ID 的输入。然后文本文件中与我在文本框中写入的具有相同 id 的所有行都会将该行中的注释调整为“whatever”。
结果如下：1；你好; 任何

如何在文本文件中搜索并用相同的 id 替换行的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:58:16.603

我认为将所有内容加载到内存中是最简单的。在给定 ID 的情况下，使用可以查询数据的良好数据结构。然后遍历您的数据并设置注释。

然后写回你的文件。像这样，您甚至可以相当快地多次查询。

如果它真的是一次性操作，您可以即时进行。逐行复制到另一个文件中。这样做时，请检查您的 ID 是否匹配并调整您的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:27:53.010

我会建议像 [http://kbcsv.codeplex.com/这样的 csv 解析器](http://kbcsv.codeplex.com/)

您可以简单地加载文件，遍历记录并保存结果

你在这里找到一个简单的例子 [http://kbcsv.codeplex.com/discussions/83279](http://kbcsv.codeplex.com/discussions/83279)

# java - 不幸的是，当我尝试运行代码 Twitter Android 时，AppName 已停止

> ID：13936633
> 
> 赞同：-4
> 
> 时间：2012-12-18T15:51:41.817
> 
> 标签：java, android, twitter, android-asynctask

> **可能重复：**
> [Android - android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/9413625/android-android-os-networkonmainthreadexception)

我关注网络[http://codehenge.net/blog/2011/05/android-programming-tutorial-a-simple-twitter-feed-reader/](http://codehenge.net/blog/2011/05/android-programming-tutorial-a-simple-twitter-feed-reader/) 我尝试运行这个示例代码但是当 Emulator Open Application , Emulator show alert对话框“不幸的是，AppName 已停止”谢谢帮助 >.< Example.java

```
package facebook.appwall;

import java.net.URL;
import java.util.ArrayList;

import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class Example extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<Tweet> tweets = getTweets("android", 1);

        ListView listView = (ListView) findViewById(R.id.ListViewId);
        listView.setAdapter(new UserItemAdapter(this, R.layout.listitem1, tweets));
    }

    public class UserItemAdapter extends ArrayAdapter<Tweet> {
        private ArrayList<Tweet> tweets;

        public UserItemAdapter(Context context, int textViewResourceId, ArrayList<Tweet> tweets) {
            super(context, textViewResourceId, tweets);
            this.tweets = tweets;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.listitem1, null);
            }

            Tweet tweet = tweets.get(position);
            if (tweet != null) {
                TextView username = (TextView) v.findViewById(R.id.username);
                TextView message = (TextView) v.findViewById(R.id.message);
                ImageView image = (ImageView) v.findViewById(R.id.avatar);

                if (username != null) {
                    username.setText(tweet.username);
                }

                if(message != null) {
                    message.setText(tweet.message);
                }

                if(image != null) {
                    image.setImageBitmap(getBitmap(tweet.image_url));
                }
            }
            return v;
        }
    }

    public Bitmap getBitmap(String bitmapUrl) {
        try {
            URL url = new URL(bitmapUrl);
            return BitmapFactory.decodeStream(url.openConnection() .getInputStream()); 
        }
        catch(Exception ex) {return null;}
    }

    public ArrayList<Tweet> getTweets(String searchTerm, int page) {
        String searchUrl = "http://search.twitter.com/search.json?q=@" 
                            + searchTerm + "&rpp=100&page=" + page;

        ArrayList<Tweet> tweets = new ArrayList<Tweet>();

        HttpClient client = new  DefaultHttpClient();
        HttpGet get = new HttpGet(searchUrl);

        ResponseHandler<String> responseHandler = new BasicResponseHandler();

        String responseBody = null;
        try{
            responseBody = client.execute(get, responseHandler);
        }catch(Exception ex) {
            ex.printStackTrace();
        }

        JSONObject jsonObject = null;
        JSONParser parser=new JSONParser();

        try {
            Object obj = parser.parse(responseBody);
            jsonObject=(JSONObject)obj;

        }catch(Exception ex){
            Log.v("TEST","Exception: " + ex.getMessage());
        }

        JSONArray arr = null;

        try {
            Object j = jsonObject.get("results");
            arr = (JSONArray)j;
        }catch(Exception ex){
            Log.v("TEST","Exception: " + ex.getMessage());
        }

        for(Object t : arr) {
            Tweet tweet = new Tweet(
                    ((JSONObject)t).get("from_user").toString(),
                    ((JSONObject)t).get("text").toString(),
                    ((JSONObject)t).get("profile_image_url").toString()
                    );
            tweets.add(tweet);
        }

        return tweets;
    }

    public class Tweet {
        public String username;
        public String message;
        public String image_url;

        public Tweet(String username, String message, String url) {
            this.username = username;
            this.message = message;
            this.image_url = url;
        }
    }
} 
```

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:orientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent">
<ListView android:id="@+id/ListViewId" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"/>
</LinearLayout> 
```

listview1.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_height="wrap_content" 
    android:gravity="left|center" 
    android:layout_width="wrap_content" 
    android:paddingBottom="5px" 
    android:paddingTop="5px" 
    android:paddingLeft="5px">
    <ImageView android:id="@+id/avatar" 
        android:layout_width="wrap_content" 
        android:layout_height="fill_parent" 
        android:layout_marginRight="6dip" 
        android:src="@drawable/ic_launcher"/>
    <LinearLayout android:orientation="vertical" 
        android:layout_width="0dip" 
        android:layout_weight="1" 
        android:layout_height="fill_parent">
        <TextView android:id="@+id/username" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:gravity="center"/>
        <TextView android:id="@+id/message" 
            android:layout_width="wrap_content"
             android:layout_height="wrap_content" 
             android:layout_marginLeft="10px" 
             android:textColor="#0099CC"/>
    </LinearLayout>
</LinearLayout> 
```

日志猫

```
12-18 22:32:32.562: E/dalvikvm(8406): Could not find class 'org.json.simple.parser.JSONParser', referenced from method facebook.appwall.Example.getTweets
12-18 22:32:32.582: W/dalvikvm(8406): VFY: unable to resolve new-instance 927 (Lorg/json/simple/parser/JSONParser;) in Lfacebook/appwall/Example;
12-18 22:32:32.582: D/dalvikvm(8406): VFY: replacing opcode 0x22 at 0x0040
12-18 22:32:32.592: D/dalvikvm(8406): DexOpt: unable to opt direct call 0x17ae at 0x42 in Lfacebook/appwall/Example;.getTweets
12-18 22:32:33.282: D/dalvikvm(8406): GC_CONCURRENT freed 111K, 8% free 2679K/2908K, paused 180ms+10ms, total 357ms
12-18 22:32:33.282: D/dalvikvm(8406): WAIT_FOR_CONCURRENT_GC blocked 159ms
12-18 22:32:33.292: I/dalvikvm-heap(8406): Grow heap (frag case) to 3.334MB for 635812-byte allocation
12-18 22:32:33.382: D/dalvikvm(8406): GC_FOR_ALLOC freed 4K, 7% free 3295K/3532K, paused 86ms, total 89ms
12-18 22:32:33.772: W/System.err(8406): android.os.NetworkOnMainThreadException
12-18 22:32:33.772: W/System.err(8406):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
12-18 22:32:33.792: W/System.err(8406):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
12-18 22:32:33.792: W/System.err(8406):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
12-18 22:32:33.801: W/System.err(8406):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
12-18 22:32:33.801: W/System.err(8406):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
12-18 22:32:33.812: W/System.err(8406):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
12-18 22:32:33.812: W/System.err(8406):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
12-18 22:32:33.812: W/System.err(8406):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
12-18 22:32:33.822: W/System.err(8406):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
12-18 22:32:33.833: W/System.err(8406):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:653)
12-18 22:32:33.852: W/System.err(8406):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:627)
12-18 22:32:33.852: W/System.err(8406):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:616)
12-18 22:32:33.872: W/System.err(8406):     at facebook.appwall.Example.getTweets(Example.java:102)
12-18 22:32:33.882: W/System.err(8406):     at facebook.appwall.Example.onCreate(Example.java:37)
12-18 22:32:33.902: W/System.err(8406):     at android.app.Activity.performCreate(Activity.java:5104)
12-18 22:32:33.902: W/System.err(8406):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-18 22:32:33.922: W/System.err(8406):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-18 22:32:33.922: W/System.err(8406):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-18 22:32:33.922: W/System.err(8406):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-18 22:32:33.922: W/System.err(8406):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-18 22:32:33.942: W/System.err(8406):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 22:32:33.942: W/System.err(8406):     at android.os.Looper.loop(Looper.java:137)
12-18 22:32:33.952: W/System.err(8406):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-18 22:32:33.962: W/System.err(8406):     at java.lang.reflect.Method.invokeNative(Native Method)
12-18 22:32:33.962: W/System.err(8406):     at java.lang.reflect.Method.invoke(Method.java:511)
12-18 22:32:33.973: W/System.err(8406):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-18 22:32:33.973: W/System.err(8406):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-18 22:32:33.992: W/System.err(8406):     at dalvik.system.NativeStart.main(Native Method)
12-18 22:32:33.992: D/AndroidRuntime(8406): Shutting down VM
12-18 22:32:34.002: W/dalvikvm(8406): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-18 22:32:34.062: E/AndroidRuntime(8406): FATAL EXCEPTION: main
12-18 22:32:34.062: E/AndroidRuntime(8406): java.lang.NoClassDefFoundError: org.json.simple.parser.JSONParser
12-18 22:32:34.062: E/AndroidRuntime(8406):     at facebook.appwall.Example.getTweets(Example.java:108)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at facebook.appwall.Example.onCreate(Example.java:37)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at android.app.Activity.performCreate(Activity.java:5104)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at android.os.Looper.loop(Looper.java:137)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at  java.lang.reflect.Method.invokeNative(Native Method)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at java.lang.reflect.Method.invoke(Method.java:511)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-18 22:32:34.062: E/AndroidRuntime(8406):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:52:59.517

```
 android.os.NetworkOnMainThreadException
12-18 22:32:33.772: W/System.err(8406):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117) 
```

将您的网络活动 (getTweets()) 移出主线程。使用类似[AsyncTask的东西](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:53:52.697

[NetworkOnMainThreadException ：](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。

表示您正在尝试从 UI 线程运行网络操作，因此将所有与网络相关的代码放在[AsyncTask 的 doInBackground](http://developer.android.com/reference/android/os/AsyncTask.html)方法中，并在 doInBackground 方法执行完成时使用 onPostExecute 更新 UI

如果您使用的是**API LEVEL 9 或 GREATER FROM 9** ，则在 Activity 的 onCreate 中添加[StrictMode](http://developer.android.com/reference/android/os/StrictMode.html)以避免此错误

```
StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
                 .detectDiskReads()
                 .detectDiskWrites()
                 .detectNetwork()  
                 .penaltyLog()
                 .build()); 
```

# r - R中森林图的轴刻度线

> ID：13936635
> 
> 赞同：1
> 
> 时间：2012-12-18T15:51:44.267
> 
> 标签：r, plot, range, forestplot

我在 rmeta 包中有一个用 forestplot 制作的图。请注意，水平轴没有刻度线。我怎么能添加它们，比如说，间隔`0.5`？

这是情节：![阴谋](../Images/d0bc28b534837d501818a00923467e0c.png)

和代码：

```
Forest1 <- read.table(file="Forest_1.txt", sep="\t", head=TRUE, row.names=1)

tabletext<-rbind(c("A","3.77"),
             c("B","1.33"),
             c("C","1.32"),
     c("D","1.12"),
     c("E","1.58"),
     c("F","0.9"))
m <-Forest1$OR
l <-Forest1$lower
u <-Forest1$upper

#overview datafile:
cbind(tabletext, m,l,u)
                          m      l        u       
[1,] "A"         "3.77" "3.77" "0.6144" "6.9256"
[2,] "B"         "1.33" "1.33" "0.644"  "2.016" 
[3,] "C"         "1.32" "1.32" "0.6536" "1.9864"
[4,] "D"         "1.12" "1.12" "0.4536" "1.7864"
[5,] "E"         "1.58" "1.58" "1.0116" "2.1484"
[6,] "F"         "0.9"  "0.9"  "0.7236" "1.0764"

forestplot(tabletext,m,l,u, zero=1, xticks=c(0.2,7),col=meta.colors(box="royalblue",line="darkblue", summary="royalblue")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-10-07T10:11:04.957

您应该使用以下内容修改您对 forestplot 的调用：

```
forestplot(tabletext,m,l,u, zero=1, xticks=c(0.2,.7,1.2,1.7,2.2,2.7,3.2,3.7,4.2,4.7,5.2,5.7,6.2,6.7,7),col=meta.colors(box="royalblue",line="darkblue", summary="royalblue")) 
```

# c# - 如何在等待用户输入时捕获时间间隔？

> ID：13936640
> 
> 赞同：1
> 
> 时间：2012-12-18T15:51:54.370
> 
> 标签：c#, forms, time, response, keydown

我有带 Timer1 的表格，它设置为 10 秒。

有一个 KeyDown 事件 - 当用户按下“Enter”时，我想在“ans”中保存在结束前 10S 间隔内过去的持续时间。

例如：如果我现在启动 timer1，并且在 3 秒之后，我按 Enter，ans = 3。如果我没有按任何键，ans 将等于 10。

我有这个代码：

```
 if (e.KeyCode == Keys.Enter)
    {
        ResponseTimeList.Add(timer1.Interval);
    } 
```

*响应时间列表是：

```
public List<double> ResponseTimeList = new List<double>(); 
```

我该如何改进它？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:59:46.807

好吧，首先，Timer 不是您想要使用的。计时器类旨在以预定义的时间间隔触发事件；例如，您可以使用计时器每 10 秒更新一次表单上的文本框。

相反，您希望使用秒表 (System.Diagnostics.Stopwatch)。每当您想开始计时时，请调用 Stopwatch.Start()。当用户按下回车键时，只需调用 Stopwatch.Stop() 然后获取以秒为单位的时间间隔。

最后，对于 10 秒的逻辑，您将需要使用类似这样的东西（条件评估）：

```
var timeToDisplay = Stopwatch.ElapsedMilliseconds > 10000 ? 10 : Stopwatch.ElapsedMilliseconds/1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:12:24.500

您可以使用Timer 的*Tick*事件。

```
bool isPressed = false;
Timer timer1 = new Timer() { Interval = 10000};

timer1.Tick += (s, e) => 
{ 
    if (!isPressed)
        ResponseTimeList.Add(timer1.Interval);

    isPressed = false;
}; 
```

当按下键时：

```
if (e.KeyCode == Keys.Enter)
{
    ResponseTimeList.Add(timer1.Interval);
    isPressed = true;
} 
```

# iphone - 对 iPhone 模拟器和真 iPhone 的干扰

> ID：13936646
> 
> 赞同：0
> 
> 时间：2012-12-18T15:52:15.683
> 
> 标签：iphone, simulator

我开发了我的应用程序，一切似乎都完成了。该应用程序在 IOS 模拟器下完美运行。（应用程序显示一个 TableView）

现在我想在我的 iPhone 上测试它，但是 APP 崩溃了，但他找不到 TableViewCell 的 ReuseIdentifier。

我再次在 iPhone Simulator 上做同样的事情，一切都很完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:55:12.877

检查重用标识符的大小写以及在代码中使用该标识符的位置。模拟器不区分大小写。实际设备是。eg`thisIdentifier`不一样`thisidentifier`

# java - 使用 RestTemplate.postForEntity 时总是在 ResponseEntity 中得到空响应

> ID：13936649
> 
> 赞同：2
> 
> 时间：2012-12-18T15:52:17.317
> 
> 标签：java, android, spring, resttemplate

我正在尝试使用 Jackson 库从我的 Android 应用程序向 Web 服务器发送 JSON 请求，但响应始终为空。我仅使用 HttpRequest API 对其进行了测试，一切正常 - 我得到了回应。但是现在我尝试使用 Spring RestTemplate 并且我无法收到结果。这是我的代码：

```
protected Void doInBackground(String... params) {
    LinkedHashMap<String, Object> _map = new LinkedHashMap<String, Object>();
    _map.put("login", "Fred");
    _map.put("password", "pass");
    ObjectMapper _mapper = new ObjectMapper ();
    StringWriter _writer = new StringWriter();
    try {
        _mapper.writeValue(_writer,_map);
    } catch (JsonGenerationException e) {
        e.printStackTrace();
    } catch (JsonMappingException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    String _baseURL = "https...."//Address of the server;
    HttpHeaders requestHeaders = new HttpHeaders();
    requestHeaders.setContentType(MediaType.APPLICATION_JSON); 
     HttpEntity<String> _entity = new HttpEntity<String>(_writer.toString(),requestHeaders);
    RestTemplate templ = new RestTemplate();

    templ.setRequestFactory(new HttpComponentsClientHttpRequestFactory());
    templ.getMessageConverters().add(new StringHttpMessageConverter());
    ResponseEntity<String> _response = templ.postForEntity(_baseURL, _entity,String.class);
    String _Test =  _response.getBody(); 
```

所以我总是在_Test中有null。我怀疑这是因为 https 协议。RestTemplate 可以与 https 一起使用吗？

那么该代码有什么问题。如何解决这个问题？

提前致谢。我真的需要帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:08:10.333

您必须设置 responseType，否则 RestTemplate 将丢弃您的响应正文。它需要 responseType 来找到正确的消息转换器。使用 null responseType，下面的委托将为 null...

```
 if (delegate != null) {
            T body = delegate.extractData(response);
            return new ResponseEntity<T>(body, response.getHeaders(), response.getStatusCode());
        }
        else {
            return new ResponseEntity<T>(response.getHeaders(), response.getStatusCode());
        } 
```

使用 RestTemplate 默认构造函数，Spring 几乎包含除 RSS、XML 和 JSON 之外的所有转换器，这取决于 Rome、JAXB 或 Jackson 是否在类路径中。我会将 responseType 设置为 String 并使用调试器运行它，看看为什么它没有找到正确的转换器。如果没有看到来自服务器的响应和标头，我很难说出原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:22:31.307

错字还是您连接到 https 端口？

> String _baseURL = "https...."//服务器地址；

我认为您应该监视您尝试连接的端口，看看是否建立了连接。我这样做的一种简单方法是让笔记本电脑成为一个临时网络，并让一个 Android 设备连接到它，然后，您应该能够使用像 wireshark 这样的数据包嗅探器监控来自您的 Android 设备的所有流量。

# monodevelop - 将 VS2012 项目导入 monodevelop 无法使用“CS1566”编译

> ID：13936650
> 
> 赞同：4
> 
> 时间：2012-12-18T15:52:19.087
> 
> 标签：monodevelop

我尝试将 Visual Studio 2012 csproj 文件导入 Monodevelop。在我编译之前一切正常。当我编译项目时，它会为第一个表单生成 1 个 *.resources 文件，但对于以下表单，不会生成 *.resources 文件并且编译失败并显示

> 读取资源文件时出错... -- 系统找不到文件（CS1566）

（对不起 - 我必须从德语翻译）

我该如何解决？

问候，托拜厄斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T15:19:06.503

我有同样的问题，我用谷歌搜索，我找到了这个链接：[https ://github.com/gitextensions/gitextensions/issues/1751](https://github.com/gitextensions/gitextensions/issues/1751)

正如那里所说，您必须在 MonoDevelop 中使用 XBuild（转到 Tools->Options->Projects->Build）。这为我解决了问题。

# java - Collections.synchronizedList.add() 需要同步块吗？

> ID：13936652
> 
> 赞同：0
> 
> 时间：2012-12-18T15:52:26.133
> 
> 标签：java, multithreading

我对此的理解是，一个`synchronized`块会阻止其他线程访问，直到该块终止为止。也就是说，它们通过当前执行的类（？）持有的锁被搁置到那时。

所以我包装了一个`for`迭代列表的块，然后在一个块`clear()`中直接调用该列表。`synchronized`因为我不能让其他线程添加到这两组操作之间的列表中。这是按照文档说的，

> 当迭代它时，用户必须手动同步返回的集合......

但是，当我进入列表时，我无法确定是否需要做同样的事情`add`。我猜不是，因为在我的情况下，`add`来自不同线程的操作顺序并不重要。我想我不确定的是 un `synchronized` *modify*操作是否会产生任何负面影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:00:31.210

只有当您有多个必须一起工作的操作时才需要锁定。对于迭代器，您将在循环的整个生命周期内执行任何操作。

如果添加可以以任何顺序发生，则不需要额外的锁定。

> 我包装了一个迭代列表的 for 块，然后调用 clear()

从您的用例来看，听起来像 BlockingQueue（没有同步的线程安全）甚至 ExecutorService（将线程池与队列相结合）将是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:58:55.200

在 Collection 本身上同步很重要

```
Collection c = Collections.synchronizedCollection(myCollection);
     ...
synchronized (c) {
     for(Object o : c) {
      ....  
} 
```

调用任何方法的其他线程`c`将被阻止，直到您离开该块。无需其他同步

# java - showInternalConfirmDialog() 方法不适用于 KeyListener() 的参数

> ID：13936657
> 
> 赞同：0
> 
> 时间：2012-12-18T15:52:35.177
> 
> 标签：java, windows, eclipse, swing, dialog

我收到错误消息：

> JOptionPane 类型中的方法 showInternalConfirmDialog(Component, Object, String, int, int) 不适用于参数（new KeyListener(){}, String, String, int, int）

```
 public void keyTyped(KeyEvent e) {

        }

        public void keyReleased(KeyEvent e) {
            System.out.println("Key Released F1");
            if(e.getKeyCode()==KeyEvent.VK_F1) {

    /*here i get the error*/    int choice = JOptionPane.showInternalConfirmDialog(this, "Would you like to play the movie? " 
                        ,"Message", JOptionPane.WARNING_MESSAGE
                        , JOptionPane.OK_CANCEL_OPTION); 
```

知道为什么我会收到此错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:18:40.400

假设您扩展了 JFrame，JFrame 不会扩展 JComponent。我认为这就是它不起作用的原因。作为一种解决方法，我建议使用 JPanel，此代码已编译并有效。

```
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class CodeTester extends JFrame implements KeyListener
{
    JPanel panel = new JPanel();

    public static void main(String[] args)
    {
        JFrame frame = new CodeTester();
        frame.setSize(400, 400);
        frame.setVisible(true);    
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
    public CodeTester()
    {
        addKeyListener(this);
        getContentPane().add(panel);        
    }

    public void keyTyped(KeyEvent e) {}
    public void keyPressed(KeyEvent e) {}

    public void keyReleased(KeyEvent e) 
    {
        int choice = JOptionPane.showInternalConfirmDialog(panel, 
                    "Would you like to play the movie? " 
                       ,"Message", JOptionPane.WARNING_MESSAGE
                    , JOptionPane.OK_CANCEL_OPTION);                

    }
} 
```

希望这可以帮助。

**编辑**我刚刚注意到我在没有实现“F1”按钮条件的情况下编码，我只是为了简化而摆脱了。

# java - CQ 5.5 i18n 和接受语言标头

> ID：13936658
> 
> 赞同：3
> 
> 时间：2012-12-18T15:52:44.783
> 
> 标签：java, servlets, internationalization, adobe, aem

我尝试使用 i18n 本地化，但我卡住了。

如果我使用：

```
I18n i18n = new I18n(slingRequest);
i18n.get("myMessage"); 
```

我总是收到关于密钥的英文消息：myMessage。

在接受语言标题中，我可以看到这些值： de,en;q=0.5

但：

*   request.getLocale() 返回：en

*   request.getLocales() 返回：en

如果我使用下面的代码一切都很好：

```
Locale myLocale = new Locale("de");    
ResourceBundle resourceBundle = slingRequest.getResourceBundle(myLocale);   
I18n i18n = new I18n(resourceBundle); 
```

为什么 cq 不读取“接受语言”请求标头？

ps：我使用独立的cq jar ...

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T16:35:42.003

CQ/Sling（从 5.6 开始）不会**读取**您通过`slingRequest.getLocale()`（或`slingRequest.getResourceBundle(null)`隐式使用该语言环境）获得的语言环境的 Accept-Language 标头，而是使用用户的语言设置（`~/preferences/@language`在 JCR 中）或可配置的默认值 (1) .

原因是固定设置比猜测语言标头要稳定得多，即使在跨设备使用不同浏览器时也是如此。

但它是**可扩展**的：您可以挂钩自定义[org.apache.sling.i18n.RequestLocaleResolver](http://dev.day.com/docs/en/cq/current/javadoc/org/apache/sling/i18n/RequestLocaleResolver.html)服务（具有更高的服务等级），该服务提供`slingRequest.getLocale()`(2) 的值。这也可以考虑接受语言；它可以访问底层的 servlet 请求对象，该对象应该为您提供 Accept-Language 标头值，`getLocale()`并且`getLocales()`（至少 CQ 中的内置 servlet 引擎从 5.4 开始就是这样做的）。

(1) 在此服务上配置默认语言环境：`http://localhost:4502/system/console/configMgr/org.apache.sling.i18n.impl.JcrResourceBundleProvider`

`I18nFilter`(2)您可能在堆栈跟踪中看到的Sling已经完成了所有的魔法并包装了请求以使用和服务提供`slingRequest.getLocale()`和`slingRequest.getResourceBundle()`实现`RequestLocaleResolver``ResourceBundleProvider`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:47:19.370

第一个代码示例复制粘贴了吗？如果示例是从您的代码中粘贴的，那么您的密钥中的拼写错误可能是问题所在，因为您的示例中的语言密钥是“myMessage”而不是“myMessage”，如您的帖子后面所述。

# c# - Treeview闪烁没有任何事件

> ID：13936659
> 
> 赞同：2
> 
> 时间：2012-12-18T15:52:45.577
> 
> 标签：c#, winforms, treeview

我有闪烁`TreeView`，我知道这是一个常见问题。问题是`TreeView`没有事件。

是的，我知道当我从 a 递归添加节点时，`XmlDocument`它会闪烁一点，这是正常的。即使所有内容都加载完毕，我的也会闪烁。只要我的鼠标悬停在一个节点上或单击一个节点。我检查了 ：

*   所有可能导致这种情况的属性（`DrawMode`等`ShowToolTip`）
*   所有事件，以确保没有。（我有一个拖放事件，但我也评论了它，确保它不是问题并且它不会改变任何东西）。
*   我在更新时使用`BeginUpdate`过。（现在它已填充并且没有涉及的过程，但它仍然闪烁。`EndUpdate``TreeView``TreeView`

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T20:33:16.173

我想到了。事实证明，当 a`TreeView`内部的 a（可能另一个控件可能有相同的问题）`SplitContainer`导致闪烁问题时。我用一个非常简单的原型进行了尝试，一个`Winform`只有一个`SplitContainer`和一个`TreeView`容器的新原型，我已经可以看到某些节点上的闪烁。我尝试了很多东西，但似乎完成了这项工作的是：

```
this.SetStyle(ControlStyles.DoubleBuffer, true); 
```

完全排除所有闪烁的另一件事是：

```
int style = NativeWinAPI.GetWindowLong(this.Handle, NativeWindowAPI.GWL_EXSTYLE);
style |= NativeWinAPI.WS_EX_COMPOSITED;
NativeWinAPI.SetWindowLong(this.Handle, NativeWinAPI.GWL_EXSTYLE, style); 
```

两者都在`Form_Load`.

**NativeWinAPI 类：**

```
using System.Runtime.InteropServices;

internal static class NativeWinAPI
{
   internal static readonly int GWL_EXSTYLE = -20;
   internal static readonly int WS_EX_COMPOSITE = 0x02000000;

   [DllImport("user32")]
   internal static extern int GetWindowLong(IntPtr hWnd, int nIndex);

    [DllImport("user32")]
   internal static extern int SetWindowLong(IntPtr hWnd, int nIndex, dwNewLong);
} 
```

这将**完全**停止在`SplitContainer`. 希望我可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-11T12:11:11.823

接受的答案并没有让我满意，所以我发布了我在这里找到的另一个技巧：http: [//dev.nomad-net.info/articles/double-buffered-tree-and-list-views](http://dev.nomad-net.info/articles/double-buffered-tree-and-list-views)

```
public DbTreeView()
{
    // Enable default double buffering processing (DoubleBuffered returns true)
    SetStyle(ControlStyles.OptimizedDoubleBuffer | ControlStyles.AllPaintingInWmPaint, true);
    // Disable default CommCtrl painting on non-Vista systems
    if (Environment.OSVersion.Version.Major < 6)
        SetStyle(ControlStyles.UserPaint, true);
}

protected override void OnPaint(PaintEventArgs e)
{
    if (GetStyle(ControlStyles.UserPaint))
    {
        Message m = new Message();
        m.HWnd = Handle;
        m.Msg = WM_PRINTCLIENT;
        m.WParam = e.Graphics.GetHdc();
        m.LParam = (IntPtr)PRF_CLIENT;
        DefWndProc(ref m);
        e.Graphics.ReleaseHdc(m.WParam);
    }
    base.OnPaint(e);
} 
```

非常适合我！

# android - 动作栏 Sherlock 给出资源错误

> ID：13936666
> 
> 赞同：1
> 
> 时间：2012-12-18T15:53:07.770
> 
> 标签：android, resources, actionbarsherlock

我正在为 Android 2.1 编译。采用了一个运行良好的简单示例项目并添加了 Action Bar Sherlock 库，现在我遇到了资源错误。具有 R 资源的每一行现在都有一个错误。此外，在控制台中，我收到 200 多个错误，这些错误与此类似：

> [CountDownTimerActivity] /Users/kristywelsh/Documents/WorkspacesDec2012/Workspaces/ActionBarSherlock/res/values/abs__themes.xml:211：错误：错误：未找到与给定名称匹配的资源：attr 'android:windowCloseOnTouchOutside'。

我的布局文件中没有错误。

我试过清理项目 - 没有运气。我的编译器的目标是 1.6。知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:46:03.013

您正在针对 1.6 构建它？您必须将构建目标更改为至少 4.0 才能正确编译它。

这是因为 ABS 通过比较 Android.os.Build.VERSION 对某些 Android 平台使用了不同的方法。因此，如果您针对 1.6 编译它，它将找不到 Build.Versions 和更新的方法。

# javascript - 将索引数组添加到 localStorage

> ID：13936667
> 
> 赞同：1
> 
> 时间：2012-12-18T15:53:08.240
> 
> 标签：javascript, jquery-mobile, cordova, local-storage

如何将此索引数组添加`names`到`localStorage`. 并调用这个元素：

```
var name= new Array();

for( var i=0; i<results.rows.length; i++ ) {
    names[results.rows.item(i).IdTypePrestation ] = results.rows.item(i).LibellePrestation;
} 
```

如果我改变这一行：

```
names[results.rows.item(i).IdTypePrestation] = results.rows.item(i).LibellePrestation; 
```

对此：

```
names[i] = results.rows.item(i).LibellePrestation; 
```

一切都好，但我需要第一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:55:55.870

设置为`localStorage`：

```
localStorage.someArrayValue = JSON.stringify(myArray); 
```

获取自`localStorage`：

```
myArray = JSON.parse(localStorage.someArrayValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:15:24.123

我认为您的解决方案应如下所示：

```
//Set names on tableau_type line of localStorage
localStorage['tableau_type'] = JSON.stringify(names);

//Get all names on tableau_type line of localStorage
var retrievedObject = JSON.parse(localStorage['tableau_type']);
$.each(retrievedObject ,function(index,element){
    alert(element);
}); 
```

# c++ - 在不释放旧内存的情况下重新分配

> ID：13936669
> 
> 赞同：7
> 
> 时间：2012-12-18T15:53:18.490
> 
> 标签：c++, c, linux, gcc, realloc

我想使用 realloc 来增加内存大小，同时保持指针不变（因为调用者使用它）。realloc 并不总是这样做；有时它会返回一个不同的指针并释放旧指针。我想“尝试”重新分配内存，如果不可能，请使用原始指针回退到不同的方法 - 但 realloc 已经破坏了它！

如果不可能，有没有办法尝试增加 malloc 的内存而不破坏（如 realloc 那样）旧指针？

例如

```
void *pold;
void *pnew = realloc(pold, newsize);
if (pnew != pold)
{
     free(pnew);
     DoDifferently(pold); // but pold is freed already
} 
```

PS我不关心可移植性（仅限linux，因此是标签）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:48:56.490

您应该查看您正在使用的 libc 中的 realloc() 的源代码。从那里，应该很容易看到当它可以增加大小时所遵循的路径，以及将返回新指针的其他情况。然后，使用它来编写您自己的 tryrealloc() 函数。

例如，这是来自 uclibc 的 realloc() 源代码：http: [//cristi.indefero.net/p/uClibc-cristi/source/tree/nptl/libc/stdlib/malloc/realloc.c](http://cristi.indefero.net/p/uClibc-cristi/source/tree/nptl/libc/stdlib/malloc/realloc.c)

```
24  void *
25  realloc (void *mem, size_t new_size)
26  {
...
57    if (new_size > size)
58    /* Grow the block.  */
59    {
60        size_t extra = new_size - size;
61  
62        __heap_lock (&__malloc_heap_lock);
63        extra = __heap_alloc_at (&__malloc_heap, base_mem + size, extra);
64        __heap_unlock (&__malloc_heap_lock);
65  
66        if (extra)
67          /* Record the changed size.  */
68          MALLOC_SET_SIZE (base_mem, size + extra);
69        else
70          /* Our attempts to extend MEM in place failed, just
71             allocate-and-copy.  */
72        {
73          void *new_mem = malloc (new_size - MALLOC_HEADER_SIZE);
74          if (new_mem)
75            {
76              memcpy (new_mem, mem, size - MALLOC_HEADER_SIZE);
77              free (mem);
78            }
79          mem = new_mem;
80        }
81      }
... 
```

为了清楚起见，我删除了一些部分。但是您可以在第 66 行看到，它检查是否可以简单地为当前指针增加内存。这是您要保留的部分。从第 69 行开始的`else`情况是处理将释放旧内存并返回新指针的情况。这是您要踢出并以不同方式处理的部分。从你所说的来看，我猜你只想删除第 77 行，它在那里免费。

如果您采用这种方式，请记住您必须手动释放旧指针或新指针，因为两者现在都有效（并且您不希望内存泄漏）。

此外，这是针对 uclibc 的。如果您已经在使用不同的 libc，则应将新`tryrealloc()`功能基于`realloc()`该 libc 的功能。

**编辑：**如果你使用这种方法，你必须小心。您的解决方案将基于内存管理器的内部结构，因此在各种 libc 实现之间以及同一 libc 的不同版本之间，情况可能会发生变化和不同。因此，请牢记适当的注意和警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:58:51.067

我不认为有一个可移植的`realloc`函数可以做到这一点。

一种相对简单的可移植解决方案是预先分配比您最初需要的更大的内存块。这将允许在不更改指针的情况下进行一些增长（实际上，您将在原地进行自己的操作`realloc`）。

一旦超出原始块，您将不得不分配一个新块来代替。这是您的“失败”场景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:00:59.243

据我所知，这样的事情是不可能的（使用标准库进行移植）。但是，有一些简单的解决方法。由于您的调用者使用该指针，因此您必须为他们修复它。一种解决方案是：

```
void *do_something(void *your_pointer)
{
    void *new_pointer;
    new_pointer = realloc(your_pointer, ...);
    /* more logic */
    return new_pointer;
} 
```

并告诉他们这样使用`do_something`：

```
new_pointer = do_something(my_pointer);
if (new_pointer) /* if returning NULL is at all possible */
    my_pointer = new_pointer; 
```

* * *

或者，您可以自己处理：

```
int do_something(void **pointer_to_your_pointer)
{
    void *new_pointer;
    new_pointer = realloc(*pointer_to_your_pointer, ...);
    /* more logic */
    *pointer_to_your_pointer = new_pointer;
    return error_code;
} 
```

并告诉他们像这样使用它：

```
do_something(&my_pointer); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T16:05:03.370

这个问题没有便携的解决方案，非便携的解决方案也不是没有风险的。

与 GNU 一起使用的非便携式解决方案`malloc`是用来`malloc_usable_size`找出内存区域的实际大小。但是，即使内存区域足够大，我也不确定是否`realloc`不能保证使用它。IIRC，曾经有一个选项导致`realloc`总是分配新内存，但我再也找不到了；不过，我看起来并不难。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-11T02:55:39.657

替代的内存管理库[jemalloc](http://www.canonware.com/jemalloc/)提供了这样的功能。可以`xallocx()`这样做：

```
size_t realsize = xallocx(pold, newsize, 0, 0);
if (realsize < newsize)
{
     DoDifferently(pold);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T16:00:53.567

为什么不只是`malloc`您可能需要的最大数量？内存通常只会在您使用后才实际分配。要进行微调，您可以使用`mmap`分配内存区域。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-24T18:02:12.747

它不是在程序员手中指向`reallocate`同一点`memory region`..你可以增加`size`使用`realloc()`..你可能会或可能不会`memory location`在使用后得到相同的`realloc`..很可能你可能不会..如果有一个可能没有任何问题内存位置变化..

# css - 如何在 Skeleton Framework 中为容器添加填充？

> ID：13936670
> 
> 赞同：2
> 
> 时间：2012-12-18T15:53:18.660
> 
> 标签：css, responsive-design, skeleton-css-boilerplate

我正在使用 Skeleton Framework (http://getskeleton.com)，并且我想要一个具有背景颜色和白色容器页面的页面。

如果我`.container {padding:0 10px;}`在调整小型设备的窗口大小时添加布局中断。希望我在这里遗漏了一些非常明显的东西。如何在不破坏响应式设计的情况下向容器添加填充？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T22:53:37.733

如果我正确理解您的帖子， 可以[在此处](https://stackoverflow.com/q/9304364/122139)找到我的解决方案。

> 由于它有一个白色背景，我想在盒子里放一些填充物。很简单：我在父级内部添加了一个，并使用填充适当地设置了样式：10px 和白色背景。

## CSS

```
div.inner {
    padding: 4px 4px 8px 12px;
    overflow:auto;
} 
```

## HTML

```
<div id="what_you_think" class="realm eight columns alpha"> 
    <div class="inner">
        <h3>You are <font style="color:black;">not</font>...</h3>

    </div>
</div> 
```

## 结果

[http://home.grandecom.net/~scottmorse/](http://home.grandecom.net/~scottmorse/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:28:00.843

您需要为较小的媒体查询编辑骨架.css（或使用您自己的样式表覆盖它）。

注释掉删除填充的规则，并将 .container .one.column（等等）规则减少 20px。这将为您提供正确的大小和两侧的 10 像素边距。:)

```
 /* Note: Design for a width of 320px */

@media only screen and (max-width: 767px) {
    .container { width: 300px; }

    /* removed to maintain margins
    .container .columns,
    .container .column { margin: 0; } */

    .container .one.column,
    .container .one.columns,
    .container .two.columns,
    .container .three.columns,
    .container .four.columns,
    .container .five.columns,
    .container .six.columns,
    .container .seven.columns,
    .container .eight.columns,
    .container .nine.columns,
    .container .ten.columns,
    .container .eleven.columns,
    .container .twelve.columns,
    .container .thirteen.columns,
    .container .fourteen.columns,
    .container .fifteen.columns,
    .container .sixteen.columns,
    .container .one-third.column,
    .container .two-thirds.column  { width: 280px; } /* this was reduced by 20px */
} 
```

顺便说一句，我需要为 Nexus 7 编写一个设备宽度[为 601px](https://stackoverflow.com/questions/12257279/nexus-7-screen-width-returns-800-but-media-query-max-width-720px-still-applies)的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T18:38:22.167

我可能会误解您的问题，但是您是否尝试过添加边距而不是填充，例如。

```
 <div class="two-thirds column">
          <div class="content">
              Your text etc here
          </div>
      </div> 
```

其中内容类有 margin-left:10px;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T14:40:14.657

这对骷髅来说是不幸的。

请注意，您的 .container.column 和 .container.columns 类每个都有 10px 的填充。通过正确地将列嵌套在容器中，您可以获得一致的填充。

一种解决方案是使用 offset-by-one 类，它为您提供左侧 60 像素的填充。

最后，您可以修改骨架.css 中的核心类，为每个元素添加所需的填充并缩小它们的宽度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-05T22:56:22.193

如果您对要添加填充的任何 DIV 使用 box-sizing，则可以添加填充。这将在考虑填充的情况下计算 div 的宽度。

```
.someElementInSkeletonGrid {
    box-sizing: border-box;
} 
```

通过使用它，我已经能够成功地将填充添加到骨架 DIV 中。浏览器支持也不错。

阅读更多： [http ://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

浏览器支持： [http ://caniuse.com/#feat=css3-boxsizing](http://caniuse.com/#feat=css3-boxsizing)

# jquery - jquery scrollTo() {axis:'x'} 不起作用

> ID：13936672
> 
> 赞同：0
> 
> 时间：2012-12-18T15:53:22.777
> 
> 标签：jquery, html, css

我不知道我做错了什么，但如果我把`{axis:'x'}`这个插件的选项，滚动不起作用

我的html代码：

```
<div id="wrap">

    <div id="main" class="container">

        <div id="wrapper">
            <div id="mask">

                <div id="item0" class="item">
                    <a name="item0"></a>
                    <div class="conteudo">
                        aaaa
                    </div>
                </div>

                <div id="item1" class="item">
                    <a name="item1"></a>
                    <div class="conteudo">
                        bbbbs
                    </div>
                </div>          

            </div>
        </div>

    </div>

</div>

<div class="wrap_menu">
            <ul class="menu">
                <li><a href="#item1" class="panel">EMPRESA</a></li>
                <div class="traco"></div>
                <li><a href="#item2" class="panel">SERVIÇOS</a></li>
                <div class="traco"></div>
                <li><a href="#item3" class="panel">EVENTOS</a></li>
                <div class="traco"></div>
                <li><a href="#item4" class="panel">VJ</a></li>
                <div class="traco"></div>
                <li><a href="#item5" class="panel">PARCEIROS</a></li>
                <div class="traco"></div>
                <li><a href="#item6" class="panel">CONTATO</a></li>
            </ul>
        </div> 
```

我的CSS代码：

```
html, body, #wrap {height: 100%;}

body > #wrap {height: auto; min-height: 100%;}

body{
    font-family:'Pontano Sans', sans-serif;
    color:#FFF;
    background:#110030 url(../imagens/fundo_site.jpg) no-repeat center center fixed;
}

#main {overflow:auto;
    padding-bottom: 117px;}  /* deve ter a mesma altura do rodapé */
#wrapper {
    position:absolute;
    width:100%;
    height:100%;
    top:0;
    left:0;
    background-color:#ccc;
    overflow:hidden;
}

#mask {
    width:100%;
    height:100%;
    /*background:#FFCC00;*/
}

.item {
    width:100%;
    height:100%;
    float:left;
}

#item0{
    background: #000 url(../imagens/bkg/fundo_site.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

#item1{
    background: #000 url(../imagens/bkg/fundo_site2.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

.conteudo {
    position:relative;
    width:960px;
    height:420px;
    margin: 0 auto 150px;
    left:50%;
    margin-left:-480px;
    background:url(../imagens/fundo_conteudo.png);
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;
}

.clear {
    clear:both;
}

.item:before {
  content: '';
  display: inline-block;
  height: 100%;
  vertical-align: middle;
  margin-right: -0.25em; /* Adjusts for spacing */
}

/* The element to be centered, can
   also be of any width and height */ 
.conteudo {
  display: inline-block;
  vertical-align: middle;
} 
```

我的脚本代码：

```
$(document).ready(function() {

        $('a.panel').click(function (e) {
            e.preventDefault();
            //reset and highlight the clicked link
            $('a.panel').removeClass('ativo');
            $(this).addClass('ativo');

            //grab the current item, to be used in resize function
            current = $(this);

            //scroll it to the destination
            //$('.item').hide();
            //$((this).attr('href')).add('.current').show();
            //$('.item').show();
            $('#wrapper').scrollTo($(this).attr('href'), 2000,{axis:'y'});

        });

    }); 
```

我也尝试使用这种方式：

```
$('#wrapper').animate({scrollLeft:$(this).attr('href')},2000); 
```

但也不起作用！

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:20:12.940

对于基本功能，请尝试更换

```
$('#wrapper').scrollTo($(this).attr('href'), 2000,{axis:'y'}); 
```

和

```
$('#wrapper').scrollLeft($($(this).attr('href')).offset().left); 
```

此代码应该正确设置滚动。为了动画面板滑动到这个位置，试试这个代码：

```
$('#wrapper').animate({scrollLeft: $($(this).attr('href')).offset().left}, 2000); 
```

编辑：

就您的网站而言，元素在彼此之上和之下。目前，您可以使用此代码来进行转换：

```
$('#wrapper').animate({scrollTop: $($(this).attr('href')).offset().top}, 2000); 
```

您可以进行 CSS 和站点结构更改以通过左滚动来进行转换，并仅使黑色居中框内的内容进行转换。让我知道这种功能是否符合预期，我将为您提供一些示例标记。

# javascript - HTML 框架获取准确的 URL

> ID：13936673
> 
> 赞同：0
> 
> 时间：2012-12-18T15:53:23.590
> 
> 标签：javascript, jquery, html, iframe

当我放置“src”并在找到确切的当前 url 时进入框架时，我无法找到框架内的确切 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:58:42.613

您是否在寻找 iframe 的当前 URL？你可以试试：

```
$('iframe').contentWindow.window.location.href 
```

这是假设您在页面上只有 1 个 iframe。

# android - android搜索对话框自定义

> ID：13936674
> 
> 赞同：4
> 
> 时间：2012-12-18T15:53:25.710
> 
> 标签：android, search, android-theme

经过几次搜索后，我无法弄清楚如何自定义搜索对话框（单击搜索按钮时出现的顶部搜索栏）。我想更改搜索栏的背景颜色。我得到了有关如何自定义标题栏的文章。但这不适用于搜索栏。

任何有用的指针请...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:09:06.257

似乎它不是可定制的：[https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/ZqZ-KZPLGtk](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/ZqZ-KZPLGtk)

# asp.net-mvc - 如何使用 ActionInvoker.InvokeAction？- ASP.NET

> ID：13936677
> 
> 赞同：2
> 
> 时间：2012-12-18T15:53:32.140
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我是 MVC ASP.NET 的新手，需要在另一个控制器的操作中调用一个控制器的操作。在那里我创建了控制器对象并调用了我所需的操作，如下所示，

```
controllerOne co = new controllerOne();

co.requiredFunction(); 
```

但是我的一位资深人士建议我不要使用这种方法，它会杀死 MVC 模式使用其给定的 `ActionInvoker.InvokeAction()`函数来调用其他控制器的函数，我现在使用如下，

```
public class HomeController : Controller
{

    this.ActionInvoker.InvokeAction(new System.Web.Mvc.ControllerContext(
        this.ControllerContext.RequestContext, new controllerOne()), 
        "requiredAction");
} 
```

这工作正常，但我不知道我使用的方式`ActionInvoker.InvokeAction()`是否正确。我搜索找到任何示例，但我可以找到任何示例。

所以我的问题是：**我是否正确使用它？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:11:22.130

为此，许多人会创建一个服务来封装它`requiredFunction`并通过它的接口将服务注入到两个控制器中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:19:31.320

用这个

```
var ctrl= new MyController();
ctrl.ControllerContext = ControllerContext;
//call action
 return ctrl.Action(); 
```

# c# - 在 MVC 3 中将复杂的 ViewModel 传递给 HttpPost 方法

> ID：13936678
> 
> 赞同：2
> 
> 时间：2012-12-18T15:53:33.923
> 
> 标签：c#, asp.net-mvc

我目前正在为我的项目开发一个编辑功能，我似乎无法让视图模型正确地允许它从视图传递回控制器。View Model 的结构是这样的：

```
public class CreateUserViewModel : ICreateUserViewModel
{
    #region Properties
    public string UserName { get; set; }
    public string Password { get; set; }
    public string Email { get; set; }
    public string SelectedUserType { get; set; }
    public List<ICreateUserItemViewModel> UserTypes { get; set; }
    public List<ICreateUserItemViewModel> Products { get; set; }
    public List<ICreateUserItemViewModel> Languages { get; set; }
    #endregion

    #region Constructor
    public CreateUserViewModel()
    {
    }

    public CreateUserViewModel(List<Product> products, List<Language> languages)
    {
        Products = new List<ICreateUserItemViewModel>();
        foreach (var prod in products)
        {
            var prodVM = new CreateUserItemViewModel
            {
                Name = prod.Name,
                IsSelected = false,
                ID = (int)prod.ID
            };
            Products.Add(prodVM);
        }

        Languages = new List<ICreateUserItemViewModel>();
        foreach (var lang in languages)
        {
            var langVM = new CreateUserItemViewModel
            {
                Name = lang.Name,
                IsSelected = false,
                ID = (int)lang.ID
            };
            Languages.Add(langVM);
        }

    }
    #endregion
} 
```

子类 ViewModel `CreateUserItemViewModel`：

```
public class CreateUserItemViewModel : ICreateUserItemViewModel
{
    public string Name { get; set; }
    public int ID { get; set; }
    public bool IsSelected { get; set; }
} 
```

我希望这个子类在视图中表示为一个复选框，因此用户可以选择是否包含它。

用户控制器：

```
[HttpPost]
public ActionResult Create(CreateUserViewModel model)
{
    if (ModelState.IsValid)
    {
        User newUser = new User();
        newUser.UserName = model.UserName;
        newUser.Password = model.Password;
        newUser.Email = model.Email;
        newUser.Products = model.Products; //Always NULL 
```

当我在应用程序的这一部分设置断点时，会填充用户名密码和电子邮件的属性，但产品和语言为空。我使用 Fiddler2 来观察传入控制器的内容，这是输出：

```
UserName=asdasdsdasd&Password=asd&Email=asD%40asd.com&type.IsSelected=Admin
&prod.ID=1&prod.IsSelected=true&prod.IsSelected=false
&prod.ID=2&prod.IsSelected=false
&prod.ID=3&prod.IsSelected=false
&prod.ID=4&prod.IsSelected=false
&lang.ID=1&lang.IsSelected=true&lang.IsSelected=false
&lang.ID=2&lang.IsSelected=true&lang.IsSelected=false
&lang.ID=3&lang.IsSelected=false
&lang.ID=4&lang.IsSelected=false
&lang.ID=5&lang.IsSelected=false
&lang.ID=6&lang.IsSelected=false
&lang.ID=7&lang.IsSelected=false
&lang.ID=8&lang.IsSelected=false
&lang.ID=9&lang.IsSelected=false
&lang.ID=10&lang.IsSelected=false
&lang.ID=11&lang.IsSelected=false
&lang.ID=12&lang.IsSelected=false
&lang.ID=13&lang.IsSelected=false
&lang.ID=14&lang.IsSelected=false
&lang.ID=15&lang.IsSelected=false
&lang.ID=16&lang.IsSelected=false
&lang.ID=17&lang.IsSelected=false
&lang.ID=18&lang.IsSelected=false
&lang.ID=19&lang.IsSelected=false 
```

创建视图的代码块是：

```
<div class="editor-label">
    @Html.Label("User Products:")
</div>
<div class="editor-field">
    @foreach (var prod in Model.Products)
    {
        @Html.Label(prod.Name)
        @Html.HiddenFor(x => prod.ID)
        @Html.CheckBoxFor(x => prod.IsSelected, new { name = prod.Name })
    }
</div>
<div class="editor-label">
    @Html.Label("User Languages:")
</div>
<div class="editor-field">
    @foreach (var lang in Model.Languages)
    {
        @Html.Label(lang.Name)
        @Html.HiddenFor(x => lang.ID)
        @Html.CheckBoxFor(x => lang.IsSelected, new { name = lang.Name })
    }
</div>
<p>
    <input type="submit" value="Create" />
</p> 
```

我已经为此工作了很长一段时间，我开始认为我想做的事情是不可能的。我希望它返回`CreateUserViewModel`完全填充的用户选择的所有值，但我只是不知道如何实现这一点。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:58:49.803

使用 for 循环而不是 foreach。

```
@for (int i=0; i < Model.Products.Count; i++)
{
    @Html.Label(prod.Name)
    @Html.HiddenFor(model => model.Products[i].ID)
    @Html.CheckBoxFor(model => model.Products[i].IsSelected, new { name = prod.Name })
} 
```

您的属性表达式需要包含足够的信息，以便模型绑定器确定如何将 POST 值绑定到模型。

您也可以尝试创建一个编辑器模板`ICreateUserItemViewModel`，然后将您的标记更改为以下内容。

```
@Html.EditorFor(model => model.Products) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:06:36.040

正如已发布的答案中已经提到的，可以通过应用索引来完成，但如果元素是非顺序的，请参阅下面的文章

[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

另请参阅下面的“模型绑定”介绍

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

添加到建议列表中，考虑从视图模型中删除 CreateUserViewModel(List products, List languages)。ViewModel 应该只包含属性并在控制器内放置额外的逻辑（即，在您的情况下附加 UserTypes 等）。

# php - 如何在 $_Post 前面添加文本？

> ID：13936680
> 
> 赞同：-5
> 
> 时间：2012-12-18T15:53:39.893
> 
> 标签：php, sql, sendmail

我是一个完整的 PHP 新手，我有一个可能看起来很愚蠢的特定问题。但是，我似乎找不到答案（可能是因为我不知道最佳搜索词）。我正在构建一个 sendmail 脚本，我想在从数据库中提取的项目前面添加文本。IE： 名字： 中间名： 姓氏：

```
$message = $_POST['fname']."\n".$_POST['mname']."\n".$_POST['lname']."\n".$_POST['role']."\n".$_POST['facility']."\n".$_POST['specialty']."\n".$_POST['level']."\n".$_POST['email']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:55:15.910

您已经在插入换行符，只需以相同的方式添加文本...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:59:20.163

首先，去阅读一些基本的 PHP 书籍。不要以为看视频课或读几篇文章就够了。

其次，了解您要做什么。$_POST 是一个全局数组，包含所有数据，由客户端通过 POST 方法发送到服务器。

我不完全明白，你想要达到什么，但试试这个：

```
$message = 'First name: ' . $_POST['fname'] . "\n Middle name: ".$_POST['mname']. 'etc....'; 
```

# c# - 什么数据结构适合我的情况？

> ID：13936681
> 
> 赞同：1
> 
> 时间：2012-12-18T15:53:45.547
> 
> 标签：c#, optimization, data-structures, dictionary

首先，这可能是一个 XY 问题，对此感到抱歉。

我正在从文件加载文件表并将其放入内存文件树中。树中的节点代表树中的目录/文件。目前，我每个节点使用两个数据结构，这会导致明显的加载时间，因为插入到集合中，并且由于复制字符串数据和引用每个节点两次而导致更高的内存使用。树只加载一次，之后不会发生变异。

每个节点都有一个用于访问已排序子节点的列表和一个用于按名称访问子节点的字典。出于性能原因，该列表被延迟排序。SortedDictionary 不符合我的使用要求，因为我需要将有子节点的节点排在没有子节点的节点之上，因此传递 IComparer 是不够的。当两个节点都有/没有子节点时，它们按字典顺序排序（OrdinalIgnoreCase）。

**.net 中是否有可以满足我需求的数据结构？**

**此外**，有没有办法在插入字典时为键提供散列，然后从字典中获取存储桶的一部分（即：GetValuesByHash(int hashValue) 产生其对应键具有给定散列的所有值） ? 我正在读取的文件表已经包含整个文件路径的哈希值（适用于我正在做的另一件事），目前，字典只是无缘无故地重新计算它们。

我想我可以通过定义我自己的自定义键来组合一个解决方案，其中包含 { Hash, Node } 以及自定义比较器，但这看起来真的很难看，而且你将无法获得共享相同哈希的节点桶。如果有的话，那仍然感觉像是使用了错误的数据结构。

我已经用谷歌搜索了“c# dictionary get hash”以及其他一些查询，但在这一点上，我还没有看到任何类似的问题。

总体而言，寻找具有以下属性的数据结构（可能与字典有关）：

*   ContainsKeyOfHash(), Get(hash): 文件名哈希 -> 文件条目描述符
*   ContainsKey(), Get(key): 文件名 -> 文件条目描述符
*   Add(string fileName, Entry entry, int hash = gethash(fileName))
*   条目排序如下：

    ```
     m_children.Sort(
           (a, b) => {
              bool aHasChildren = a.HasChildren;
              bool bHasChildren = b.HasChildren;
              if (aHasChildren && !bHasChildren)
                 return 1;
              if (!aHasChildren && bHasChildren)
                 return -1;
              else
                 return -String.Compare(a.m_resourceName, b.m_resourceName, StringComparison.OrdinalIgnoreCase);
           }
        ); 
    ```

*   可以按上述排序顺序检索所有子节点。目前，我有一个 ChildrenSorted 和 ChildrenUnsorted 属性。ChildrenSorted 属性可能会因排序而导致性能下降，而 ChildrenUnsorted 属性则不会。

我认为更糟糕的是，我的解决方案是编写我自己的类字典类。我不必从字典中删除键，所以应该不难。不过，我有点想避免这样做。

我的节点实现可以查看： http: [//pastie.org/5547925](http://pastie.org/5547925)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:09:20.563

我认为您的解决方案已经很不错了。以下是一些想法：

1.  对于一个既排序又可以按键快速访问的集合，我只能想到树数据结构。您可能不想要为每个项目分配一个对象的数据结构。可能所有项目都放在一个数组中的一种堆为您提供最好的服务。我认为您可以通过首先对所有孩子进行排序然后填充它们来非常有效地构建该结构（就像您现在正在做的那样）。
2.  *您可能会考虑将所有*数据填充到一个这样的树中。这将为您节省大部分每个节点的开销（例如本身具有子对象的集合）。关键是节点的“路径”，以某种有效的格式存储。它可以是类似的路径，也可以`"d1\d2\filename"`是`string[]`.

第 (2) 点将是 RDBMS 将如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:08:59.477

您可以`SortedDictionary`通过简单地将您的`Sort()`lambda 放入 `IComparer:

```
public class MyComparer : IComparer, IComparer<MyNode>
{
    public int Compare(object x, object y)
    {
        return Compare(x as MyNode, y as MyNode);
    }

    public int Compare(MyNode x, MyNode y)
    {
        if (ReferenceEquals(x, y))
        {
            return 0;
        }

        if (ReferenceEquals(x, null))
        {
            return -1;
        }

        if (ReferenceEquals(y, null))
        {
            return 1;
        }

        bool xHasChildren = x.HasChildren;
        bool yHasChildren = y.HasChildren;
        if (xHasChildren && !yHasChildren)
            return 1;
        if (!xHasChildren && yHasChildren)
            return -1;
        else
            return String.Compare(y.m_resourceName, x.m_resourceName, StringComparison.OrdinalIgnoreCase);
    }
} 
```

# forms - HTML 表单与 或者不起作用

> ID：13936685
> 
> 赞同：-1
> 
> 时间：2012-12-18T15:53:54.780
> 
> 标签：forms, html

有没有人遇到过奇怪的现象：如果一个 HTML 表单被 <div> 或 table <td> 分成几个部分，那么 <input type="submit" ... > 按钮将不起作用--单击时没有任何反应（未发送“发布”消息）。如果我取出所有 <div> 或表格元素，该按钮将起作用。这是为什么？在我的例子中，表单是由 Ajax 插入的。这可能是问题的原因吗？谢谢。

例如：

```
<div  style="float:left">
<form action="/..." class="submitForm" method="post">
...
...
</div>

<div  style="float:left">
...
...
</div>

<div>
...
<input type="submit" value="submit">
</form>
</div> 
```

或者，

```
<table>
<tr>
<td>
<form action="/..." class="submitForm" method="post">
...
...
</td>

<td>
...
<input ...>
...
</td

<td>
...
<input type="submit" value="submit">
</form>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:52:20.437

这没有什么奇怪的。

HTML 无效。代码没有任何意义。

然后浏览器尝试从您的错误中恢复。结果不是你想要的。

如果您不编写真正的 HTML，则不应期望浏览器能够处理它。

*   元素必须描述一棵树。如果您打开一个元素，您必须在关闭它的任何祖先之前关闭它。
*   [http://validator.w3.org/](http://validator.w3.org/)提供了一个有用的工具来对您的 HTML 执行基本的自动化 QA。

# asp.net - 在锚链接中传递两个变量

> ID：13936686
> 
> 赞同：0
> 
> 时间：2012-12-18T15:54:03.627
> 
> 标签：asp.net, anchor, href

具有以下锚标记，我想传递一个变量以在重定向表单中使用。如您所见，我在这里有目标网址和链接名称。我正在使用 Request["changeId"] 在表单中获取它。

```
<td class="id"><a href='/workplace/managechange?ChangeId=<%#DataBinder.Eval(Container.DataItem, "aux_RelatedChangeID.Id")%>'><%# DataBinder.Eval(Container.DataItem, "aux_customChangeId")%></a></td> 
```

1.  我可以将另一个变量传递给表单 <%# DataBinder.Eval(Container.DataItem, "aux_approvalID")%>，然后通过请求获取它吗？
2.  这个变量在 url 中是否可见？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:03:12.407

我找到了第一个问题的解决方案：

```
<td class="id"><a href='/workplace/managechange?ChangeId=<%#DataBinder.Eval(Container.DataItem, "aux_RelatedChangeID.Id")%>&approvalID=<%# DataBinder.Eval(Container.DataItem, "aux_approvalId")%>'><%# DataBinder.Eval(Container.DataItem, "aux_customChangeId")%></a></td> 
```

而且我认为不可能将其隐藏在网址中，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:31:13.083

IT 将无法使用获取请求/链接隐藏参数，如果您使用表单发布，那么它将对用户“隐藏”。

这将需要...

```
<form action="/workplace/managechange" method="post">
<input type="hidden" name="ChangeId"  value="<%#DataBinder.Eval(Container.DataItem, "aux_RelatedChangeID.Id")%>" /> 

<input type="hidden" name="approvalID" value="<%# DataBinder.Eval(Container.DataItem, "aux_approvalId")%>" />
<input type="submit" value="Submit Values" />
</form> 
```

或者可能通过 AJAX 执行此操作。

您是否需要传递这两个变量，当调用 managechange 页面/操作时您不能派生它吗？

另外为什么你需要从查询字符串中隐藏这个项目？

它已经是公开的，并且从查看查询字符串来看，它不是 seo'd，所以这似乎也不是一个原因。

问候

史蒂夫

# c# - 如何将一定比例的用户重定向到 beta 测试网站？

> ID：13936689
> 
> 赞同：2
> 
> 时间：2012-12-18T15:54:10.397
> 
> 标签：c#, .net, asp.net-mvc-3, redirect, beta

首先，我们使用的是 MVC 3、ASP.NET 4.0 和 Visual Studio 2010。

我们的目标是向公开测试版开放我们全新的网站。我们希望将缓慢增加的流量百分比重定向到我们的新站点，而其余流量则转到我们现有的站点...

我们希望通过负载均衡器来做到这一点，但由于资源、基础设施和时间的原因，这不再是一种选择。现在看来，我们唯一的选择就是通过软件来实现。

这里有人做过吗？你有好的策略或解决方案吗？

我们将有两个不同的 URL，如果需要，我们可以使用 cookie 来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:34:57.340

这相当简单，并且将按照用户被重定向到移动站点的相同方式完成。在 global.asax.cs 中实现 Application_PreRequestHandlerExecute

如果它们符合您决定的任何标准，请响应。重定向它们。我会在将要留在一个站点或下一个站点上的任何人身上存储一个 cookie，这样他们就不会在查看非 beta 站点的过程中被错误地重定向。这也不能处理人们不使用 cookie 的情况。

这是伪代码，所以它可能不是 100% 正确的

```
 protected void Application_PreRequestHandlerExecute(object sender, EventArgs
e)
{

if(Request.Cookies["BetaResult"] == null)
{
   var  cookie = new HttpCookie("BetaResult");
   cookie.Expires = DateTime.Now.AddDays(1d);
   if(whatever logic to redirect to beta)
   {
       cookie["BetaResult"] = "Beta";
       Response.Cookies.Add(cookie);
       Response.Redirect("your beta site");
   }
   else
   {
       cookie["BetaResult"] = "Main";
       Response.Cookies.Add(cookie);
   }

}
else
{
  //if cookie value is beta, redirect to beta site, they 'are a chosen one'
}  

} 
```

# facebook-graph-api - Facebook JS SDK - 照片上传但未出现在时间轴上

> ID：13936690
> 
> 赞同：2
> 
> 时间：2012-12-18T15:54:11.127
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

我正在通过我的应用上传照片，并且照片已成功上传到登录用户的照片部分。但是，一些用户没有将他们的照片发布在他们的时间线上。是否存在导致此问题的帐户设置？我可以传递另一个对象变量以确保它在上传时得到“共享”吗？

编辑：图像似乎进入“等待批准”状态 - 有没有办法绕过这个？

提前致谢。

```
var file_name = 'http://their-image.com/image.jpg';
var access_token = FB.getAuthResponse()['accessToken'];
FB.api('/me/photos', 'post',{
    message: "The image message.",
    url: file_name
    },
    function(response){
        if (!response || response.error) {
            alert('Error occurred');
        } else {
            alert('Your photo was posted!');
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:47:11.450

我发现了这个问题。某些用户设置要求您必须批准 Facebook 应用上传的任何照片。因此，正在添加照片，但它位于应用程序用户相册下的“待​​处理”状态。

这是一个代码位，可帮助您获得指向应用相册的链接，以便用户可以查看他们正在等待批准的照片。

```
FB.api('/me/albums', function(response) {
    // console.log(albums);
    var albums = response['data'];
    for (var key in albums) {
        var album = albums[key];
        if (album['name'] == 'You App Name's Photos') {
            alert(album['link'];
        }
    }
}); 
```

# activerecord - 百货商店模式中的Rails嵌套属性不自动保存外键

> ID：13936692
> 
> 赞同：1
> 
> 时间：2012-12-18T15:54:18.053
> 
> 标签：activerecord, ruby-on-rails-3.2

在以下“百货商店模式”中，我有三个模型：

```
class Store
  has_many :items, inverse_of: :store, autosave: true
  has_many :departments, inverse_of: :store, autosave: true
  accepts_nested_attributes_for :departments, allow_destroy: true

class Department
  belongs_to :store, inverse_of: :departments
  has_many :items, autosave: true, inverse_of: department
  accepts_nested_attributes_for :items, allow_destroy: true

class Item
  belongs_to :store, inverse_of: :items
  belongs_to :department, inverse_of: :items 
```

当我尝试以下操作时：

```
store = Store.new
department = store.departments.build
item = department.items.build

store.save 
```

然后该项目不与商店关联。

我对该问题的解决方案是将以下内容添加到 Item 模型中：

```
class Item
  before_validation :capture_store_info
  def capture_store_info
    self.store = self.department.store
  end 
```

我将它添加到 before_validation 回调中，因为在我的非平凡代码中我有一堆验证，包括一个检查商店模型是否存在的验证。

问题：我的解决方案有效，但它是解决此问题的正确（即 Rails 常规）方法吗？有没有更好的解决方案。这感觉有点脏，每次我在 Rails 中做了一些感觉“有点脏”的事情时，它都会回来咬我。

谢谢，JB

# javascript - 通过 Websockets 通过二进制数据发送布尔值和数字

> ID：13936698
> 
> 赞同：0
> 
> 时间：2012-12-18T15:54:29.243
> 
> 标签：javascript, html, binary, websocket, multiplayer

我正在用 HTML5 构建多人游戏。我已经阅读了一些关于通过 WebSockets 通过像 Uint8Array 这样的 ArrayBuffers 发送二进制数据的阅读，因为我想尽可能地避免开销（所以没有 JSON）。但是，我仍然不知道如何通过 WebSocket 实际发送特定的变量类型（尤其是 1 位布尔值）。

例如，我想通过 1 条消息中的二进制数据发送 5 个布尔值和 3 个数字（精度稍后确定）（因此没有多次发送）。在这种情况下：

1.  编号 - 帧编号
2.  布尔值 - W
3.  布尔值 - A
4.  布尔值 - S
5.  布尔值 - D
6.  布尔值 - 鼠标按下
7.  数字 - 鼠标 X
8.  数字 - 鼠标 Y

我将如何处理这个？我可以把它全部放入一个 Uint8Array 中吗？那不是一个字节吗？如果我只需要说 5 位而不是 8 位，它还会占用 8 位吗？如何将布尔值附加到 ArrayBuffer 并从 ArrayBuffer 中提取布尔值？还是我完全使用了错误的方法？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T02:52:32.117

您可以使用更易于使用的 DataView 来编写数据流。

[https://developer.mozilla.org/en-US/docs/Web/API/DataView?redirectlocale=en-US&redirectslug=Web%2FJavaScript%2FTyped_arrays%2FDataView](https://developer.mozilla.org/en-US/docs/Web/API/DataView?redirectlocale=en-US&redirectslug=Web%2FJavaScript%2FTyped_arrays%2FDataView)

# javascript - javascript：使用淡入淡出的脉冲文本？

> ID：13936699
> 
> 赞同：0
> 
> 时间：2012-12-18T15:54:32.723
> 
> 标签：javascript

嗨，我正在尝试让一段文本自动淡入和淡出，而无需单击或悬停方法。

我不确定我是否可以使用页面加载功能，因为我想要淡入和淡出的文本仅在用户单击以打开页面上的另一个 div 后出现。？（我可能错了？）

我正在使用这个脚本，但文本是静态的，没有做任何事情。谁能告诉我我哪里出错了？谢谢

```
<script>
function cycle() {
    $('#morebutton-pics').fadeOut(1000, function() {
        $('#morebutton-pics').fadeIn(1000);
        cycle();
    });
}
$(document).click(function(){
    cycle();
});

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T15:57:38.800

这听起来像 CSS 动画会更好：

```
#morebutton-pics {
  animation: pulse 1s alternate infinite;
  -webkit-animation: pulse 1s alternate infinite;
}
@keyframes pulse {
  from {opacity:1}
  to {opacity:0}
}
@-webkit-keyframes pulse {
  from {opacity:1}
  to {opacity:0}
} 
```

这将适用于 Firefox、Chrome 和 IE10。由于这比必需的功能更吸引眼球，这对我来说似乎可以接受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:01:23.660

尽管 CSS 可能是更好的答案，但您的代码不起作用，因为它反复调用`cycle()`而无需等待第二个动画完成。

```
function cycle() {
    var $el = $('#morebutton-pics');

    $el.fadeOut(1000, function() {
        $el.fadeIn(1000, cycle);  // loop in the second callback
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:57:55.963

代替

```
$(document).click(function(){
     cycle();
}); 
```

和

```
$(document).ready(function() {cycle(); }); 
```

如果 div 被隐藏，则无关紧要

# javascript - Flash 对象的方法在隐藏后不可用

> ID：13936702
> 
> 赞同：0
> 
> 时间：2012-12-18T15:54:34.813
> 
> 标签：javascript, apache-flex, dom

我正在使用 jQuery 开发 Javascript，使用 Chrome 23.0.1271.97。我有一个 Flex `<object>`，HTML 如下：

```
<div id="chartdiv" style="display:none;">
<object type="application/x-shockwave-flash" id="barchart" data="barchart.swf" style="width:100%;height:100%;">
<param name="movie" value="barchart.swf" />
<param name="quality" value="high" />
<param name="allowScriptAccess" value="always" />
<param name="wmode" value="transparent" />
</object>
</div> 
```

div 通常是隐藏的，但无论如何都会在 onLoad 上初始化对象。但是，当应用程序加载时，会显示这个 div 并且一切正常。问题是，如果它从那时起再次隐藏（只是隐藏，例如`$div.hide()`，未初始化），然后重新显示，我无法访问 Flex 对象方法。

我明白了`Object #<HTMLObjectElement> has no method 'blah'`。它似乎已被修改，但我不确定是什么原因造成的。

那么有什么变化呢？好问题。成功加载后，该对象将工作，并且在控制台中如下所示：

```
<object type=​"application/​x-shockwave-flash" id=​"barchart" data=​"barchart.swf" style=​"width:​100%;​height:​100%;​">​
</object>​ 
```

该对象在尝试失败时看起来像这样（在显示、隐藏和返回之后）：

```
<object type=​"application/​x-shockwave-flash" id=​"barchart" data=​"barchart.swf" style=​"width:​100%;​height:​100%;​">​
<param name=​"movie" value=​"barchart.swf">​
<param name=​"quality" value=​"high">​
<param name=​"allowScriptAccess" value=​"always">​
<param name=​"wmode" value=​"transparent">​
</object>​ 
```

这让我觉得也许我找错地方了。我已经浏览了我的前端 Javascript 代码，除了通过 jQuery 隐藏它之外，似乎没有任何修改对象的调用。我被告知 Flex 对象不知道它是否显示。在我要求查看代码之前，我想确保我在正确的轨道上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-16T00:37:40.353

将其移出屏幕，使对象仍然可行。请参阅本文中的示例： [jquery hide a div that contains flash without reset it](https://stackoverflow.com/questions/1825792/jquery-hide-a-div-that-contains-flash-without-resetting-it)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:57:47.033

这是已知问题。如果您不想重置 Flash 对象，最好的解决方案之一就是将其大小设置为几个像素，这对用户来说是不可见的，但对浏览器来说是“可见的”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:14:01.120

我一直在搜索，似乎[flash 对象在 hidden 时被重置](https://stackoverflow.com/questions/1825792/jquery-hide-a-div-that-contains-flash-without-resetting-it)。

所以我的解决方案是测试 jQuery/DOM 对象，看看是否定义了方法：

```
function isFlashWorking()
{
    return ($chart && chart.blah)
} 
```

`blah`对象中的已知方法在哪里。

# symfony-1.4 - 部分模板通过自定义 sfView 子加载自定义

> ID：13936706
> 
> 赞同：0
> 
> 时间：2012-12-18T15:54:48.210
> 
> 标签：symfony-1.4

我使用自己的自定义 sfPHPView 和 sfPartialView 类设置了 sf1.4，它们在缺少模板的情况下对加载模板文件做了一些额外的事情（回退到默认模板......）

我通过这个视图类定义激活了它：

APP_ROOT/config/module.yml

```
all:
  enabled:                  true
  view_class:               MyProjectName
  partial_view_class:       MyProjectName 
```

**问题**

在我尝试从其他模块加载部分内容之前，一切都很好。

在这种情况下，`sfConfig::get()`仅返回为当前操作模块加载的值，因此 PartialHelper 及其 get_partial() 无法找到我想要的视图类。

具体来说，它试图在 中找到该配置变量`mod_partialmodulename_partial_view_class`，但它仅加载了动作模块配置。

是否存在一些允许加载这些“其他模块”配置的通用配方？

# c# - ASP.NET，将默认屏幕大小设置为 1024x768

> ID：13936711
> 
> 赞同：0
> 
> 时间：2012-12-18T15:55:00.713
> 
> 标签：c#, asp.net, css

原谅我，我是一般网页开发的新手。我必须设置一个网页，使其默认高度针对使用 1024px * 768px 显示的用户。如果页面的内容在垂直方向上大于完成此更改后提供的空间可以容纳的内容，则页面仍应垂直扩展，以便显示文本。

这是我刚刚开始的工作的实践项目的要求之一。我不确定我所做的是否有效，甚至不确定如何对其进行测试。在我有：

```
<body onload="window.resizeTo(1024,768)"> ... </body> 
```

这个对吗？测试后，我的屏幕上没有明显变化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:07:43.670

尽量不要做会惹恼用户的事情，调整他们的窗口大小、弹出窗口、弹出窗口和声音都是这样做的好方法。你对用户施加的压力越少越好。每个人都有自己的浏览习惯，当你访问的网站*告诉你*如何浏览它时，感觉很讨厌。

我建议将包含元素的宽度设置为 1024 像素。在网络世界中，预计会有一些垂直滚动，不鼓励水平滚动（除了明确说明这一点的设计，这是非常罕见的）。

```
/* in a css file */
#container {
    width: 1024px; /* explicitly set the width to 1024px */
    margin: 0 auto; /* this will center your container */
}

<!-- in your HTML (after referencing the css file) -->
<div id="container">
    <p>Bla bla bla this is my content</p>
</div> 
```

# mysql - 按总和查询错误并获取行 - sql

> ID：13936713
> 
> 赞同：0
> 
> 时间：2012-12-18T15:55:01.813
> 
> 标签：mysql, sql

我的 sql 查询有错误。

我的查询：

```
SELECT sum(billsItems_Quantity) as TotalQ , 
    sum(billsItems_ItemDiscount) as TotalD , 
    sum(billsItems_ItemTotal) as TotalI , 
    bills.bills_ID , 
    billsitems.billsItems_BillItemSerial , 
    bills.bills_CashierID , 
    bills.bills_StoreID , 
    billsitems.billsItems_Unit , 
    billsitems.billsItems_Price 
FROM bills , billsitems 
WHERE bills.bills_ID = billsitems.billsItems_BillItemSerial
  and bills.bills_CashierID = '".$id."'
  and bills.bills_StoreID = '$ausers_StoreId'
order by billsitems.billsItems_Unit 
```

在我的查询中，我需要通过使用 sum 函数来获取总和`billsItems_Quantity`，`billsItems_ItemDiscount` `billsItems_ItemTotal`在同一个查询中，我需要获取表的所有项目。

错误 ：

```
Warning: mysql_fetch_array(): supplied argument is not a valid MySQL result resource in 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:02:56.987

我猜是因为你没有添加 GROUP BY，试试

```
 SELECT sum(billsItems_Quantity) as TotalQ , 
        sum(billsItems_ItemDiscount) as TotalD , 
        sum(billsItems_ItemTotal) as TotalI , 
        bills.bills_ID , 
        billsitems.billsItems_BillItemSerial , 
        bills.bills_CashierID , 
        bills.bills_StoreID , 
        billsitems.billsItems_Unit , 
        billsitems.billsItems_Price 
    FROM bills , billsitems 
    WHERE bills.bills_ID = billsitems.billsItems_BillItemSerial
      and bills.bills_CashierID = '".$id."'
      and bills.bills_StoreID = '$ausers_StoreId'

    GROUP BY bills.bills_ID , 
        billsitems.billsItems_BillItemSerial , 
        bills.bills_CashierID , 
        bills.bills_StoreID , 
        billsitems.billsItems_Unit , 
        billsitems.billsItems_Price

    ORDER BY billsitems.billsItems_Unit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:00:53.033

好的，我想我理解你的问题。您使用的是 SQL Server 2005 或更高版本吗？

如果是这样，您可以使用“OVER”子句来执行此操作，这将让您进行求和并获取所有其他列。这是一种方法

```
SELECT sum(billsItems_Quantity) OVER (PARTITION BY /*group by columns for the sum here*/) as TotalQ , 
   sum (billsItems_ItemDiscount) OVER (PARTITION BY /*group by columns for the sum here*/) as TotalD , 
   sum (billsItems_ItemTotal) OVER (PARTITION BY /*group by columns for the sum here*/) as TotalI , 
   bills.bills_ID , billsitems.billsItems_BillItemSerial , bills.bills_CashierID , 
   bills.bills_StoreID , billsitems.billsItems_Unit , billsitems.billsItems_Price FROM bills , 
   billsitems 
WHERE bills.bills_ID = billsitems.billsItems_BillItemSerial
  and bills.bills_CashierID = '".$id."'
  and bills.bills_StoreID = '$ausers_StoreId'
order by billsitems.billsItems_Unit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:03:48.953

您没有提供很多详细信息，但您可能可以使用子查询，`sum()`然后加入您的表：

```
SELECT i1.TotalQ , 
    i1.TotalD , 
    i1.TotalI , 
    b.bills_ID , 
    i2.billsItems_BillItemSerial , 
    b.bills_CashierID , 
    b.bills_StoreID , 
    i2.billsItems_Unit , 
    i2.billsItems_Price 
FROM bills b
INNER JOIN
(
    select sum(billsItems_Quantity) TotalQ,
        sum(billsItems_ItemDiscount) as TotalD,
        sum(billsItems_ItemTotal) as TotalI,
        billsItems_BillItemSerial
    from  billsitems
    group by billsItems_BillItemSerial
)  i1
    ON b.bills_ID = i1.billsItems_BillItemSerial
inner join billsitems i2
    on b.bills_ID = i2.billsItems_BillItemSerial
WHERE b.bills_CashierID = '".$id."'
  and b.bills_StoreID = '$ausers_StoreId'
order by i2.billsItems_Unit 
```

# javascript - 如何从 mongodb shell 准备打印精美的 CSV？

> ID：13936715
> 
> 赞同：1
> 
> 时间：2012-12-18T15:55:04.450
> 
> 标签：javascript, mongodb

我正在运行如下代码：

```
db.items.group({
    cond: {"id": {$in: [1,2,3]}},
    initial: {},
    reduce: function(item_data, out) { print(item_data.id + "," + item_data.price); }
}); 
```

我想要一个 CSV 格式的`id,price`成对输出（针对特定项目）。但是，没有打印任何内容（mapReduce 的空结果除外）。完成使命的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:03:46.643

```
db.items.find({
    "id": {$in: [1,2,3]}
}).forEach(function(item_data) { print(item_data.id + "," + item_data.price); }) 
```

# java - Java 兼容性

> ID：13936718
> 
> 赞同：-3
> 
> 时间：2012-12-18T15:55:10.293
> 
> 标签：java

我在两台机器上运行相同的代码。一（Windows 7 64）使用：

```
java version "1.7.0"
java<TM> SE Runtime Environment <build 1.7.0-b147>
Java HotSpot<TM> 64-Bit Server VM <build 21.0-b17, mixed code> 
```

另一个（linux 64）使用：

```
java version "1.6.0_10"
Java(TM) SE Runtime Environment (build 1.6.0_10-b33)
Java HotSpot(TM) 64-Bit Server VM (build 11.0-b15, mixed mode) 
```

我得到不同的输出。我认为是虚拟机，因为我复制了 .class 文件，运行了这些文件，但仍然得到不同的输出。谁能告诉这可能是什么原因？

编辑：

代码位于[http://pastebin.com/5EmYFkYn](http://pastebin.com/5EmYFkYn)

运行之间的输出应该会有所不同，但不会像这两台机器之间那样剧烈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:11:50.887

我在同一个 Linux 机器上使用 Java 6 更新 31 和 Java 7 更新 7 获得 ~1.78 和 ~3.8。

`new Random(1)`但是，如果我得到带有或其他数字的随机种子，我会得到相同的结果。例如 1 总是为第三个数字产生 ~ 0.79。

查看如何创建随机种子的代码，代码完全不同，我怀疑 nextDouble() 没有应有的随机性，即您的值应该变化更大，并且种子的设置方式非常重要.

* * *

每次在具有相同 Java 版本的同一台机器上运行它时，我都会得到不同的结果。很可能是因为代码中有随机元素。

```
499470 0 3.7783771731449503 10000.355400975242 0.07565041858446288 42
499430 0 3.8374792234448916 10001.384837656298 0.07684781955465791 53
499604 0 3.868284648304009 10000.698947869778 0.07743242690681965 57
499114 0 3.822480313596936 10001.023197561686 0.07659315164172079 46
500030 0 3.8653339884104576 10000.112232176294 0.077302909223347 43 
```

由于在同一台机器上的运行是不同的，我希望它们在不同的机器上是不同的，不同版本的 Java 也是如此。

我仍然会认真考虑获得比 Java 7“不更新”或四年前的 Java 6 版本更新的 Java 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:59:09.587

其中一台机器运行 java 6，另一台运行 java 7。这些版本之间有许多变化：

[http://openjdk.java.net/projects/jdk7/features/](http://openjdk.java.net/projects/jdk7/features/)

此外，可能有很多细节更改可能会影响文档中未描述或未定义的行为。

如果不查看源代码或至少不知道您在谈论哪种输出差异，就不可能知道这些差异中的哪些可能会影响您的程序。

# mysql - MySQL中的映射值？

> ID：13936723
> 
> 赞同：1
> 
> 时间：2012-12-18T15:55:22.167
> 
> 标签：mysql, union

我有一个类似于以下的查询（删除了很​​多不相关的垃圾，因为它更像是一个概念问题）：

```
SELECT o_prop.*
FROM o
LEFT JOIN o_prop
ON o_prop.id = o.id 
```

输出看起来像这样：

```
name      | value
bank_name | My Bank
bank_date | 12-12-12
bank_name | My Bank2
bank_date | 13-12-12 
```

但我需要以下输出：

```
bank_name | bank_date
My Bank   | 12-12-12
My Bank2  | 13-12-12 
```

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:02:17.453

```
SELECT  MAX(CASE WHEN name = 'bank_name' THEN p.value ELSE NULL END) bank_name,
        MAX(CASE WHEN name = 'bank_date' THEN p.value ELSE NULL END) bank_date
FROM    o
        LEFT JOIN o_oprop p
            ON o.id = p.id
GROUP BY p.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:14:55.420

从您的输出来看，在我看来您使用的是[EAV 模型](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)之类的东西，还是我弄错了？如果是这种情况，那么在 SQL 中执行它并不是一个好主意，最好按照@Najzero 的建议在应用程序层执行（在这种情况下，透视将不起作用）。

如果您在 SQL 中**确实**需要它，请查看[@JW.'s answer](https://stackoverflow.com/a/13936866/520779)，它会在这种情况下满足您的需求。但是，在大多数情况下，除了这个简单的查询（当您需要使用 EAV 并且无法进行适当的表模型时），它可能会表现不佳，导致数据不一致或根本不可能。最终，让事情保持简单可能是处理此类系统的一种“更明智”的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:00:21.960

我假设你想选择这样的东西：

```
SELECT o.bank_name, o_prop.bank_date 
```

无论如何，你能描述一下你的桌子吗？（列举他们的领域）

# forms - Zend Framework 2 翻译单选按钮的文本

> ID：13936730
> 
> 赞同：0
> 
> 时间：2012-12-18T15:55:55.263
> 
> 标签：forms, radio-button, zend-framework2, zend-translate

我正在使用 Zend Framework 2 开发一个应用程序，我需要翻译我在表单中创建的单选按钮（“显示”、“隐藏”）的文本：

```
 //within the Form

    public function addRadioButtons ()
        {
            $isPublicRadioButtons = new Element\Radio('isPublic');
            $isPublicRadioButtons->setAttribute('id', 'isPublic')
                    ->setAttribute('value', '0')
                    ->setValueOptions(array(
                        '0' => 'Show',
                        '1' => 'Hide',
                    ));

            $this->add($isPublicRadioButtons);
        } 
```

我必须在视图侧做什么才能翻译它们？

我知道要翻译视图，我需要使用 $this→translate() 视图助手。所以在视图中我将不得不以某种方式调用单选按钮的文本..

```
//Whithin the view

echo $this->translate($someHowCallTheTextOfRadioButton('isPublic') , $textDomain, $locale); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:54:05.017

你可以让你的表单实现 TranslatorAwareInterface，如果你使用 PHP 5.4+，让它使用 TranslatorAwareTrait（否则你只需要自己实现接口）。您现在可以将翻译器实例注入到您的表单中，例如在表单的工厂中。然后您可以按如下方式翻译标签：

```
//within the Form

public function addRadioButtons ()
    {
        $isPublicRadioButtons = new Element\Radio('isPublic');
        $isPublicRadioButtons->setAttribute('id', 'isPublic')
                ->setAttribute('value', '0')
                ->setValueOptions(array(
                    '0' => $this->getTranslator()->translate('Show'),
                    '1' => $this->getTranslator()->translate('Hide'),
                ));

        $this->add($isPublicRadioButtons);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:15:12.293

查看[FormLabel](http://framework.zend.com/manual/2.0/en/modules/zend.form.view.helpers.html#formlabel)部分以了解如何在 zend 框架 2 中翻译标签。我认为要记住的最重要的事情是：

> 如果您在服务管理器中的键“翻译器”下有翻译器，则视图助手插件管理器将自动将翻译器附加到 FormLabel 视图助手。更多信息参见 Zend\View\HelperPluginManager::injectTranslator()。

如何正确设置[ZendSkeletonApplication中的翻译器](https://github.com/zendframework/ZendSkeletonApplication/blob/master/module/Application/config/module.config.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:22:16.753

在您看来，您可以执行以下操作：

$this->formRadio()->setTranslatorTextDomain('textdomainhere');

# c++ - 在多维向量中插入元素

> ID：13936733
> 
> 赞同：6
> 
> 时间：2012-12-18T15:55:59.860
> 
> 标签：c++, vector

```
vector<vector<int>> sort_a;
vector<int> v2;
vector<int> v3;

for (int i=0; i<4; ++i) {
v2.push_back(i);

  for (int j=0; j<4; ++j) {
  v3.push_back(j);
  sort_a.push_back(v2);
  sort_a.push_back(v3);
  }

} 
```

向量 sort_a 应该是一个 4x4 数组，而不是输出是 31x1 有很多空元素，我如何在多维向量中插入元素？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T15:59:58.227

不要将其视为多维向量，将其视为向量的向量。

```
int n = 4;
std::vector<std::vector<int>> vec(n, std::vector<int>(n));

// looping through outer vector vec
for (int i = 0; i < n; i++) {
  // looping through inner vector vec[i]
  for (int j = 0; j < n; j++) {
    (vec[i])[j] = i*n + j;
  }
} 
```

我在括号中加入`(vec[i])[j]`只是为了便于理解。

**编辑：**

如果你想通过 填充你的向量`push_back`，你可以在内部循环中创建一个临时向量，填充它，然后 push_back 它到你的向量：

```
for (int i = 0; i < n; i++) {
  std::vector<int> temp_vec;

  for (int j = 0; j < n; j++) {
    temp_vec.push_back(j);
  }

  vec.push_back(temp_vec);
} 
```

但是，`push_back`调用会导致代码变慢，因为您不仅需要一直重新分配向量，而且还必须创建一个临时的并复制它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T16:28:31.963

a`vector<vector<int>>`不是多维存储的最佳实现。以下植入对我有用。

```
template<typename T>
class array_2d {
    std::size_t data;
    std::size_t col_max;
    std::size_t row_max;
    std::vector<T> a;
public:
    array_2d(std::size_t col, std::size_t row) 
         : data(col*row), col_max(col), row_max(row), a(data)
    {}

    T& operator()(std::size_t col, std::size_t row) {
        assert(col_max > col && row_max > row)
        return a[col_max*col + row];
    }
}; 
```

用例：

```
array_2d<int> a(2,2);
a(0,0) = 1;
cout << a(0,0) << endl; 
```

此解决方案类似于[此处](https://stackoverflow.com/questions/2216017/dynamical-two-dimension-array-according-to-input/2216055#2216055)描述的解决方案。

# php - 如何通过 PHP 从 MySQL 数据库中的单元格中检索内爆数组

> ID：13936735
> 
> 赞同：0
> 
> 时间：2012-12-18T15:56:01.830
> 
> 标签：php, html, mysql, checkbox, implode

感谢您花时间看这个问题。

目前，我有一段代码可以创建四个标记为“奢侈品、品牌、零售商”和“B2B”的复选框。我研究了许多 PHP 方法来创建复选框，我觉得 implode() 函数是最简单且适合我的工作的。我查看了许多创建内爆的教程，但是，它们不符合我的标准，因为我希望数据库值反映在前端。目前在我的数据库中，implode() 有效，因此（例如），如果我检查“奢侈品”、“品牌”、“零售商”，然后按“提交”按钮，则三个项目“奢侈品、品牌、零售商”将在该指定单元格中。看起来我的代码在后端工作，但这些是我的问题：

1.  我不确定（尽管有多个 Google）如何检索存储在单单元格数组中的那些值，并将其选为“已选择”（这将“选中”前端的框）

有人可以看看我下面的代码，让我知道似乎缺少/错误/错误的内容，以便我可以尝试修改吗？任何事情都将不胜感激，谢谢！

```
<?

if (isset($_POST['formSubmit2'])){
    $category = mysql_real_escape_string(implode(',',$_POST['category']));
    $accountID = $_POST['accountID'];

    mysql_query("UPDATE Spreadsheet SET category='$category' WHERE accountID='$accountID'");
}

$query = mysql_query("SELECT * FROM Spreadsheet LIMIT $firstRow,$rpp");

while($row = mysql_fetch_array($query)){  

// Begin Checkboxes

$values = array('Luxury','Brand','Retailer','B2B');

  ?>

<form name ="category" method ="POST" action ="" >

 <?

echo "<input type = 'hidden' name = 'accountID' value = '" . $row['accountID'] . "' >";
        for($i = 0; $i < count($values); $i++){
 ?>

 <input type="checkbox" name="category[]" value="<?php echo $values[$i]; ?>" id="rbl_<? echo $i; ?>" <? if($row['category'] == $i) echo "checked=\"checked\""; ?>/>
 <? echo $values[$i] ?><br>

 <? } ?>

        <input type ="Submit" name ="formSubmit2" value ="Submit" />
        </form>

 <? } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:15:21.973

The best approach i can recommend given what you have is to, explode the values out of the db giving you a new array of all the select fields. Then use in_array to compare the list you have with this new list in the loop. then flag the checkboxs as needed.

# objective-c - MP4 存储在 CoreData 作为外部数据参考...如何获取路径？

> ID：13936741
> 
> 赞同：2
> 
> 时间：2012-12-18T15:56:26.650
> 
> 标签：objective-c, core-data, ios6, nsdata, mp4

我在 CoreData 中将 MP4 文件存储为“允许外部存储”NSData 属性。如何获取此数据的路径字符串或 NSURL？此外，如果 mp4 文件小于 1 MB 并在内部存储会怎样？那么它是否无法提供路径？有什么简单的方法可以判断数据是存储在外部还是内部？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:36:40.480

Core Data 没有提供任何获取路径的方法。正如您所注意到的，它甚至不能保证存在**路径**，因为它可能没有使用外部文件。它被设计成您不需要知道路径是否存在或可能是什么的东西，API 反映了这种态度。

**非正式**地可以找到这些文件。如果您的数据存储名为`Foo.sqlite`，则外部文件（如果有）将位于同一文件夹中名为`.Foo_SUPPORT/_EXTERNAL_DATA/`. 但是，实际的文件名只是 UUID，因此确定哪个与哪个托管对象一起使用仍然不是自动的。您可以做的最好的事情可能是跟踪托管对象的修改日期，然后查找具有相同修改日期的文件。

如果您出于某种原因确实需要获取该文件，则需要滚动您自己的外部参考代码。这很简单，真的。

# javascript - IE 中的 document.execCommand 问题

> ID：13936748
> 
> 赞同：0
> 
> 时间：2012-12-18T15:56:41.300
> 
> 标签：javascript, internet-explorer

我正在使用 html 编辑器并希望扩展功能以在光标位置插入 html 控件。

我正在使用的代码是：

```
document.execCommand("insertHTML", false, "<input type=\"text\">") 
```

此代码在 Chrome 和 FF 中运行良好，但在 IE 中存在问题。它根本不起作用并引发“无效参数”错误。我尝试了以下代码：

```
if (document.selection && document.selection.createRange) {
     range = document.selection.createRange();
     range.collapse(false);
     range.pasteHTML(value);
} 
```

但文本框添加到文档顶部而不是 html 编辑器内。

我需要这方面的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:13:49.463

看起来您正在以这种方法混合和匹配 IE 和现代浏览器标准。我不确定它是否像您认为的那样工作。为 firefox 或 alert() 尝试一点 console.log() 以查看哪些浏览器实际输入了该方法 :)

Firefox 中没有 document.selection。它是 window.getSelection() 代替：

尝试使用以下内容。应该在两种浏览器中都可以使用

```
if (document.createRange) { // "Standards" :)
    var selection = window.getSelection();

    if (selection.rangeCount > 0) {
        selRange = selection.getRangeAt(0);
        var node = document.createTextNode(stringValue);
        selRange.insertNode(node);
        selRange.setStartAfter(node);
        selection.removeAllRanges();
        selection.addRange(selRange);
    }

} else if (document.selection) { // fallback for IE6-8
    selRange = document.selection.createRange();

    selRange.select();
    selRange.pasteHTML(stringValue);
} 
```

如果将其封装在方法中并传递“stringValue”，则可以在任何地方插入文本。

希望有帮助！

# fortran - 具有大文件大小的英特尔 Fortran 编译器

> ID：13936758
> 
> 赞同：0
> 
> 时间：2012-12-18T15:57:12.123
> 
> 标签：fortran, fortran77, intel-fortran

我有一大段用 Fortran 77 编写的遗留代码。我正在编译它并使用英特尔 Fortran 编译器（版本 11？）运行它。我最近遇到了一个问题，输出文件的大小接近 2GB，并且输出停止写入磁盘。

我四处寻找这是否是 Fortran 77 标准的一部分，或者我是否只是缺少编译器标志或其他东西，但没有找到任何指向我的问题的东西。

更改写语句不是一种选择，因为遗留代码大约有几十万行。最坏的情况是每隔几天我就会进入并将输出的早期部分截断到不同的文件中，但我宁愿不必这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T14:55:41.020

这种行为最可能的原因是使用的内存模型。在 64 位模式中，存在三种内存模型，以使用的寻址模式区分：

*   `small`模型`RIP`相关的寻址用于一切，从调用函数到访问数据。`RIP`是 x64 的 64 位指令指针寄存器（ 的 64 位扩展`EIP`），但是相对地址只能是有符号的 32 位数字（并且有一些限制阻止使用完整的有符号整数范围），因此，组合代码 + 静态数据大小限制在 2 GiB 左右。
*   `medium`model - 程序代码限制为 2 GiB，因此 -`RIP`相关函数调用，但数据符号分为两种类型。小数据符号是那些与前 2 GiB 中的代码匹配的符号，它们使用与`RIP`小模型中相同的相对方法进行寻址。使用寄存器寻址访问大数据符号，将符号的绝对地址加载到寄存器中，这比较慢，但对可寻址内存没有限制。
*   `large`模型 - 使用绝对寻址访问所有符号。对代码或数据大小没有限制。

大多数可以针对 x64 的编译器，`ifort`包括在内，都接受`--mcmodel=model`允许一个人控制所使用的内存模型的选项。默认模型是`small`. 目标文件的大小意味着有大量初始化的静态数据，可能是一些非常大的初始化数组（想想`DATA`或`BLOCK DATA`语句）或许多更小的数组（我怀疑即使是 100 万条代码语句也会生成 2 GiB 的指令代码） . 编译`--mcmodel=medium`或`--mcmodel=large`应该解决大目标文件大小的问题。

请注意，将使用不同内存模型的目标代码链接在一起会导致灾难——整个应用程序应该使用相同的内存模型进行编译。

# php - Silex / Symfony 上的“在 SecurityContext 中找不到令牌”

> ID：13936760
> 
> 赞同：21
> 
> 时间：2012-12-18T15:57:27.090
> 
> 标签：php, symfony, silex

我建立了一个带有登录机制的 Silex 项目。

不是 Symfony 专家，我严格遵循这里的认证过程指南：[http ://silex.sensiolabs.org/doc/providers/security.html](http://silex.sensiolabs.org/doc/providers/security.html)

...它在我的开发环境中运行良好

但是，当我将项目推送到生产服务器上时，每次尝试登录我的网络应用程序时都会收到以下错误

```
[2012-12-18 16:35:33] CRITICAL: Symfony\Component\Security\Core\Exception\AuthenticationCredentialsNotFoundException:
A Token was not found in the SecurityContext. (uncaught exception) at
/my/app/path/vendor/symfony/security/Symfony/Component/Security/Http/Firewall/AccessListener.php line 53 [] [] 
```

这意味着 AccessListener.php 中的以下代码

```
$this->context->getToken()); 
```

引发期待

鉴于相同的代码在我的开发环境中运行良好，我认为它与我的生产服务器配置有关。

我发现这个线程[http://groups.google.com/forum/#!msg/symfony-devs/jKphNy_0Q2Y/vYfkAuyjSHEJ](http://groups.google.com/forum/#!msg/symfony-devs/jKphNy_0Q2Y/vYfkAuyjSHEJ)建议将以下行添加到我的项目的 .htaccess

```
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L] 
```

没有结果。我仍然收到“在 SecurityContext 中找不到令牌”异常。

有人有想法吗？

**编辑** 的内容`$app['security.firewalls']`如下

```
$app->register(new Silex\Provider\SecurityServiceProvider(), array(
'security.firewalls' => array(
'login' => array(
  'pattern' => '^/login$'
),
'admin' => array(
  'pattern' => '^/',
  'form'    => array('login_path' => '/login', 'check_path' => '/admin/login_check'),
  'logout'  => array('logout_path' => '/admin/logout'), // url to call for logging out
  'users' => array(
  'admin' => array('ROLE_ADMIN', 'SOMEPASSWORD'),
  ),
)
)
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:01:29.570

它似乎与 HTTP Basic Auth 无关，因为您没有在任何防火墙中使用它。您使用的是带有`form`入口点的防火墙，然后使用会话来存储安全令牌。

与您的开发环境相比，我建议您查看在 prod 服务器上如何管理会话（和 cookie）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:22:42.520

这很可能在您的本地机器上工作但在您的生产环境中不起作用的原因是 Apache 支持 .htaccess，而[nginx 不会浪费 I/O 和 CPU 时间来解析这些文件](http://wiki.nginx.org/LikeApache-htaccess)

如果您发布您的 .htaccess，我将向您展示如何将其转换为高性能的 nginx 可读配置。

**编辑**

Silex 甚至还有 nginx 的配置示例

[http://silex.sensiolabs.org/doc/web_servers.html](http://silex.sensiolabs.org/doc/web_servers.html)

# php - mysql使用表的id生成动态url

> ID：13936763
> 
> 赞同：0
> 
> 时间：2012-12-18T15:57:37.353
> 
> 标签：php, mysql, sql

我需要通过获取表和其他字段的 id 来生成动态 url。但对于这个网址，我只需要 id

我的查询正在运行，但我需要此中每条记录的 id 值`[CARD ID] http://mysite.com/webaplication/postcard/view?id=[CARD ID]&shared`

```
SELECT
            `user`.`first_name` 'First Name',
            `user`.`last_name` 'Last Name',
             CASE `card`.`shared` WHEN 1 THEN 'http://mysite.com/webapplication/card/view?id=**`card`.`id`**&shared' ELSE 'No URL' END 'URL',   
            `card`.`created` 'Created', 
            CASE `card`.`shared` WHEN 1 THEN 'Yes' ELSE 'No' END 'Shared'

        FROM
            `user`, `card`
        WHERE `card`.`id` =`user`.`id`
        GROUP BY
            `card`.`id` 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:01:10.427

使用 CONCAT 函数。

```
(...)
CASE `card`.`shared` WHEN 1 THEN CONCAT('http://mysite.com/webapplication/card/view?id=', `card`.`id`, '&shared') ELSE 'No URL' END 'URL', 
```

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)

# mongodb - 在 mongodb 中存储日期

> ID：13936767
> 
> 赞同：-1
> 
> 时间：2012-12-18T15:57:51.287
> 
> 标签：mongodb, mongodb-php

我需要将日期存储在 mysql 中（没有时间）。用户在输入框中输入日期，如 yyyy-mm-dd，可能会在以后更改。你能告诉我在 mongodb 中存储日期的好方法（没有时间），我们会在 mysql 中使用 DATE 类型吗？现在当我需要存储日期和时间时，我使用 mongdb 日期类型。并像这样存储它：

```
$data['ADDED'] = new MongoDate(time()); 
```

并显示它们：

```
echo gmdate('Y-m-d H:i:s', $data['ADDED']->sec); 
```

当我只使用日期时，我将它们存储为字符串，例如：yyyy-mm-dd（我在存储之前验证日期以确保它是正确的日期）。我需要按日期查找如下内容：

```
dateField <(>) somedate 
```

您认为在 mongodb 中将日期存储为字符串是否可以接受？你通常如何在mongodb中存储日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:15:31.957

MongoDB does not have a DATE type. It instead has a `ISODate` type. This is just as good for storing "without" time as I will explain.

So you can use `MongoDate` like so:

```
$date = new MongoDate(); // Denotes today, just like the date() function 
```

Now to store without time you can just fake it by making PHP only set a date, as such the default time will be `00:00:00` (I should note this does mean a time is actually stored just as `00:00:00`):

```
$date = new MongoDate(strtotime('2012-04-23')); // strtotime for fun 
```

And then you can query by just the date part like:

```
find(array('date' => new MongoDate(strtotime('2012-04-23')))); 
```

And you can now query as though you don't have a time since the time will equal what you put in: `00:00:00`.

Of course this is just one way of fixing it.

# ember.js - Ember-data - isDirty 在提交后为真

> ID：13936770
> 
> 赞同：1
> 
> 时间：2012-12-18T15:58:00.847
> 
> 标签：ember.js, ember-data

我正在尝试在提交时保存表单，但在任何其他情况下都放弃更改。问题是即使在提交之后 isDirty 标志也是真的。

```
App.UserController = Ember.Controller.extend({
    enterEditing: function() {
    this.transaction = App.store.transaction();
    this.transaction.add(this.get('content'));
  },
  updateEditing: function() {
    console.log('update saved');
    this.transaction.commit();
    this.transaction = null;
  }
});
App.UserView = Ember.View.extend({ 
    templateName: 'edit-user',
    willDestroyElement: function() {
    console.log(this.getPath('controller.content.isDirty'));
    if (this.getPath('controller.content.isDirty')) {
      console.log('unsaved changes');
      this.getPath('controller.content.transaction').rollback();   
    }     
  }
}); 
```

还有我的路由器部分：

```
showNew: Ember.Route.extend({
   route: '/user/new',
          cancelEditUser: Ember.Route.transitionTo('index'),
          connectOutlets: function(router) {
            router.get('applicationController').connectOutlet('user');
            router.get('userController').enterEditing();
          }
        }),

  update: function(router, event) {
    router.get('userController').updateEditing();
    router.transitionTo('index');
  } 
```

# jquery - 为具有相同类的元素分配唯一 ID

> ID：13936774
> 
> 赞同：-1
> 
> 时间：2012-12-18T15:58:12.767
> 
> 标签：jquery

我正在创建一个网站，其中有两个不同的按钮。

通过使用 jQuery，我想隐藏和显示两个元素。这两个元素都是文本。例如通过点击`buttonA`，`textA`应该显示，如果`textB`是可见的，它应该隐藏。同样通过单击`buttonB`，`textB`应该显示，如果`textA`可见，它应该隐藏。最初，两个文本都应该被隐藏但加载到它们的位置。

两个文本在布局上的位置相同。我已经定义了一个类（.content 是它的名字），它维护了文本的所有样式。现在我面临的问题是我在课堂上都有两个 div，但我无法为文本提供两个不同的 id。

```
.content {
  visibility:hidden;
  border-style: none;
  display: block;
  position: fixed;
  text-align: centre;
  z-index: 1;
  margin-top: 40%;
  margin-left: 25%;
  margin-right: 25%;
  background-color: transparent;
  font-size:2.5em;
} 
```

这里的问题是如何为两个文本分配一些唯一的 id

```
<div class="content">TextA goes here<br></div>
<div class="content">TextB goes here<br></div> 
```

所以当我使用 jquery

```
$("#ButtonA").click(function(){
  $("#TextA").show();$("#TextB").hide();
});

$("#ButtonB").click(function(){
  $("#TextB").show();$("#TextA").hide();
}); 
```

虽然这可能是蹩脚的问题，但我自己无法弄清楚，所以不得不问。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T16:01:30.737

您不必添加 id，只需使用 jQuery 获取它们 -

```
$("#ButtonA").click(function(){
    $('.content').eq(0).show();
    $('.content').eq(1).hide();
});

$("#ButtonB").click(function(){
    $('.content').eq(1).show();
    $('.content').eq(0).hide();    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:08:09.843

```
$("#ButtonA").click(function(){
    $('.content').eq(0).show();
    $('.content').eq(1).hide();
});

$("#ButtonB").click(function(){
    $('.content').eq(1).show();
    $('.content').eq(0).hide();    
});​ 
```

-- 也改变 --

```
.content {
    border-style: none;
    display: block;
    position: fixed;
    text-align: centre;
    z-index: 1;
    margin-top: 40%;
    margin-left: 25%;
    margin-right: 25%;
    background-color: transparent;
    font-size:2.5em;
    /* visibility: hidden; CHANGE THIS TO */
    display: none;
}​​ 
```

jsFiddle：http: [//jsfiddle.net/gEs66/1/](http://jsfiddle.net/gEs66/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-18T16:06:17.483

不确定我是否完全理解这个问题，但我会采取这样的方法：

[http://jsfiddle.net/HdhKQ/](http://jsfiddle.net/HdhKQ/)

HTML

```
<div class="row">
    <div class="content">TextA goes here</div>
    <div class="button">TextA Button</div>
</div>

<div class="row">
    <div class="content" style="display:none">TextB goes here</div>
    <div class="button">TextB Button</div>
</div> 
```

CSS

```
.button { cursor:pointer; }

.content {
border-style: none;
display: block;
position: fixed;
text-align: centre;
z-index: 1;
margin-top: 40%;
margin-left: 25%;
margin-right: 25%;
background-color: transparent;
font-size:2.5em;
}​ 
```

JS $(".button").click(function(){

```
// Hide all content element
$(".content").hide();

// Show the content for the related button
$(this).parent().children('.content').show(); 
```

}); ​</p>

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-18T16:00:16.707

你能解释一下为什么你不能对元素使用不同的 id 吗？

```
<div class="content" id="TextA">TextA goes here<br></div>
<div class="content" id="TextB">TextB goes here<br></div> 
```

# php - 简单插入查询中的语法错误

> ID：13936776
> 
> 赞同：3
> 
> 时间：2012-12-18T15:58:19.193
> 
> 标签：php, mysql, insert

我正在尝试在 PHP 中创建一些基本的插入查询，它一直在给我一个错误，但我真的不知道为什么，你们可以看看有什么问题吗？

```
 mysql_query("
INSERT INTO itens (nome, data, cliente, link, desc, img) VALUES ($nome,$data,$cliente,$link,$desc,$img)
") or die(mysql_error()); 
```

**更新**

从 OP 的已删除答案中提取，代码现在是：

```
mysql_query("INSERT INTO itens (nome, data, cliente, link, `desc`, img) 
VALUES ($nome,$data,$cliente,$link,$desc,$img)") or die(mysql_error()); 
```

错误是：

```
You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 'kl,j)' at line 2 
```

kl 和 j 是我在表格中插入的最后两件事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T15:59:23.197

`DESC`是 MySQL 保留关键字，您应该使用`backtick`, ex对其进行转义

```
INSERT INTO itens (nome, data, cliente, link, `desc`, img) 
VALUES ($nome,$data,$cliente,$link,$desc,$img) 
```

*   [MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

您的查询很容易受到攻击`SQL Injection`，请花点时间阅读下面有关如何防止它的文章，

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:05:12.887

首先也是最重要的 - **Escape、Escape、Escape**或**学习 PDO / mysqli 和准备好的语句**。

第二 - 知道哪些[保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)不能用于列名；这些必须使用反引号进行转义。

```
$sql = sprintf("INSERT INTO itens (nome, data, cliente, link, `desc`, img) VALUES ('%s', '%s', '%s', '%s', '%s', '%s');", 
    mysql_real_escape_string($nome),
    mysql_real_escape_string($data),
    mysql_real_escape_string($cliente),
    mysql_real_escape_string($link),
    mysql_real_escape_string($desc),
    mysql_real_escape_string($img)
);

mysql_query($sql); 
```

第三 - 我认为您在表名（`itens`vs `items`）中输入了错字。

# android - Android java.lang.Outofmemorry+imports

> ID：13936781
> 
> 赞同：0
> 
> 时间：2012-12-18T15:58:39.397
> 
> 标签：android, out-of-memory, java.lang.class

我想问你一个简单的问题。我与 java.lang.outofmemory 错误作斗争。它可能是由图片引起的，但目前我的项目中有很多未使用的导入和未使用的变量（应用程序有 7 个活动，每个活动大约有 40 个变量）。

使用未使用的导入和未使用的声明变量内存？您认为，可能是由于许多变量和导入导致的 java.lang.outofmemory 错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:23:20.980

从安卓：

> 位图占用大量内存，尤其是对于照片等丰富的图像。例如，Galaxy Nexus 上的相机可拍摄高达 2592x1936 像素（5 兆像素）的照片。如果使用的位图配置是 ARGB_8888（Android 2.3 以后的默认配置），则将此图像加载到内存中大约需要 19MB 内存（2592*1936*4 字节），**立即耗尽某些设备上的每个应用程序的限制。**

基本上，如果使用不当，图像会成为杀手。

[**请参阅此有关有效加载大型位图**](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)的 android 教程[](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

 **具体来说，以所需分辨率从文件/资源​​加载缩放位图的代码示例。

导入在运行时对内存没有影响。他们唯一可能做的就是减慢构建时间。没有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:00:29.863

不，变量不会在`Heap`应用程序中占用更多内存。这可能是由于`bitmap`在您的应用程序中。如果您遇到任何错误，请确保您已发布图像背景，例如

```
imageview.setBackgroundDrawable(null);
relativeLayout.setBackgroundDrawable(null); 
```

或者

```
imageview.setBitmapImage(null); 
```

这将删除布局中使用的可绘制图像。**

# c - 程序在更新时自行重启

> ID：13936791
> 
> 赞同：6
> 
> 时间：2012-12-18T15:58:55.777
> 
> 标签：c, linux, restart

我到处检查，所以我希望不会重复一个问题。

我想为我正在编写的一些 C 代码添加一个可移植的更新功能。该程序可能不在任何特定位置，我更愿意将其保留为单个二进制文件（无动态库加载）

然后更新完成后，我希望程序能够重新启动（不是循环，实际上是从硬盘重新加载）

有什么办法可以在 Linux 上的 C 中做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T16:03:30.697

如果您知道程序在磁盘上的保存位置，那么您可以`exec()`程序：

```
char args[] = { "/opt/somewhere/bin/program", 0 };

execv(args[0], args);
fprintf(stderr, "Failed to reexecute %s\n", args[0]);
exit(1); 
```

如果您不知道该程序在磁盘上的位置，请使用`execvp()`$PATH 搜索它，或者找出。在 Linux 上，使用`/proc`文件系统——`/proc/self/exe`特别是；它是可执行文件的符号链接，因此您需要使用它[`readlink()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/readlink.html)来获取值。注意：`readlink()`不会终止它读取的字符串。

如果需要，您可以安排传递一个参数，该参数指示新进程在更新后正在重新启动；我提供的最简单的参数列表可以根据您的需要而复杂（可能是当前打开以供编辑的文件列表，或者任何其他适当的信息和选项）。

另外，不要忘记在重新执行之前进行清理——例如，干净地关闭所有打开的文件。请记住，打开的文件描述符由执行的进程继承（除非您将它们标记为`exec`用`FD_CLOEXEC`or关闭`O_CLOEXEC`），但新进程不会知道它们的用途，除非您告诉它（在参数列表中）所以它不会无法使用它们。他们只会在没有任何帮助的情况下混乱这个过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:02:54.113

是的，您需要调用正确的`[exec()](http://linux.die.net/man/3/exec)`函数。可能会有一些复杂性，找到绝对路径名可能很麻烦。你需要：

*   将当前目录存储在`main()`.
*   存储来自 的`argc`和（所有）`argv[]`值`main()`。

由于调用`exec()`会替换当前进程，因此您需要做的就是重新启动自己。您可能还需要注意关闭任何打开的文件，因为否则它们可能会“继承”回您自己，而这很少是您想要的。

# linux-kernel - GFP_ATOMIC 如何防止睡眠

> ID：13936795
> 
> 赞同：3
> 
> 时间：2012-12-18T15:59:09.350
> 
> 标签：linux-kernel, linux-device-driver

GFP_ATOMIC（在 kzalloc 中）如何防止睡眠？

还发现

```
#define GFP_ATOMIC (__GFP_HIGH) 
```

但是没有进一步了解..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:52:35.603

的替代方案`GFP_ATOMIC`是`GFP_KERNEL`:
`#define GFP_KERNEL (__GFP_WAIT | __GFP_IO | __GFP_FS)`。

`GFP_KERNEL`incldes `__GFP_WAIT`，在考虑睡眠的各种情况下进行测试。没有这面旗帜，就没有睡眠。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:34:29.257

如果您尝试在 linux 内核中分配内存，则可以借助名为 kmalloc(size,flags) 的函数来完成。但是**函数中的标志参数基本上是指示内核应该如何分配内存。基本上有三个区域的标志作为动作修饰符，区域修饰符和类型**。

如果您将标志指定为**GFP_ATOMIC，则分配是高优先级的并且不会休眠。这是在中断处理程序、下半部分和其他无法睡眠的情况下使用的标志。**

&**它基本上是指示内核从预先分配的slab内存中获取内存块，如果slab中有内存，那么它是原子分配的，否则分配失败**。

欲了解更多信息[http://www.linuxjournal.com/article/6930](http://www.linuxjournal.com/article/6930)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T05:41:38.490

`GFP_ATOMIC`通过告诉内存分配代码不允许睡眠来满足分配来防止睡眠 - 仅此而已。如果内存分配代码需要休眠，并且`GFP_ATOMIC`已经通过，那么它将向调用者返回一个错误。

# windows-xp - 将包文件夹更改为不同的文件夹

> ID：13936803
> 
> 赞同：1
> 
> 时间：2012-12-18T15:59:31.787
> 
> 标签：windows-xp, sublimetext2

我在 Windows XP 机器上安装 Sublime Text 2，它将包文件夹设置为`%APPDATA%\Sublime Text 2\Packages`.

我需要将其更改为不同的文件夹，因为这超出了我的配置文件存储空间。这可以通过 Sublime 更改还是我必须使用符号链接到不同的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:23:09.873

太糟糕了（从 Sublime Text 2.1 开始）不支持通过配置，但是创建目录符号链接非常有效。

为此，我使用了[sysinternals 套件中的](http://technet.microsoft.com/en-us/sysinternals/bb842062)[联结工具](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)。在 Windows XP 及更高版本或 Windows Server 2003 及更高版本上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:01:56.393

符号链接是你最好的选择，我以前没有见过或听说过更改包文件夹的位置。

# php - 使用 TCPDF 时出现致命错误

> ID：13936805
> 
> 赞同：0
> 
> 时间：2012-12-18T15:59:39.890
> 
> 标签：php, tcpdf

使用 TCPDF
时显示以下致命错误

```
Fatal error: Allowed memory size of 8388608 bytes exhausted (tried to allocate 16 bytes) in D:\wamp\www\tcpdf\unicode_data.php on line 7833 
```

我如何解决该错误-我的 php 版本是 PHP 版本：5.2.5 Apache 版本：Apache/2.2.6 (Win32)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:02:31.117

这意味着 8 Mb 的 RAM 不足以用于生成 PDF 文件的 PHP 脚本。

转到您的 php.ini，找到“memory_limit”并将该行更改为类似内容：

```
memory_limit = 256M; 
```

之后，重新启动您的 Apache。

# windows-8 - 将图像加载到 WinRT 中的图像 UI 项中

> ID：13936808
> 
> 赞同：0
> 
> 时间：2012-12-18T15:59:47.243
> 
> 标签：windows-8, windows-runtime

我正在尝试将图片加载到我的 win8 应用程序的图像 UI 项中。但到目前为止，我无法让选择的图像显示在 UI 上。有人可以告诉我正确的做法吗？

```
 Windows.Storage.Pickers.FileOpenPicker OpenPicker = new Windows.Storage.Pickers.FileOpenPicker();
            OpenPicker.FileTypeFilter.Add(".jpg");
            OpenPicker.FileTypeFilter.Add(".bmp");
            Windows.Storage.StorageFile picture =  await OpenPicker.PickSingleFileAsync();

            imgPreview.Source = new Windows.UI.Xaml.Media.Imaging.BitmapImage(new Uri(picture.Path, UriKind.Absolute));

            imgPreview.Stretch = Stretch.Fill;
            imgPreview.Visibility = Windows.UI.Xaml.Visibility.Visible; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:03:29.473

[在这里](http://windows8applicationdevelopment.blogspot.com/2012/09/loading-resources.html)查看我的帖子。

它应该是这样的：

xml:

```
<Image Margin="5" Source="{Binding BMImage}" Height="100"/> 
```

C＃：

```
BitmapImage bmImage;
public BitmapImage BMImage
{
    get
    {
        return bmImage;
    }
}

bmImage = new BitmapImage();

bmImage.UriSource = new Uri(new Uri(
     Windows.Storage.ApplicationData.Current.TemporaryFolder.Path + "\\" +
     Windows.Storage.ApplicationData.Current.TemporaryFolder.Name), 
     "favicon.scale-100.ico"); 
```

# sql - MS SQL 条件连接

> ID：13936812
> 
> 赞同：0
> 
> 时间：2012-12-18T16:00:12.640
> 
> 标签：sql, sql-server-2008

我有一个 SQL 查询：

```
 SELECT * FROM Customer c
  LEFT JOIN  Invoice I ON  I.InvcNum = C.Cust_InvcNum 
```

有些事情发生了变化，连接不起作用，因为“Cust_InvcNum”中的数据没有一致性。所以现在当它没有找到连接的记录或者它为空时，它需要检查另一个条件。

```
 LEFT JOIN Invoice I ON I.InvcNum = (SELECT p.InvcPrefix FROM Prefix WHERE p.DealerID = I.DealrID )  + '-' + I.InvcNum 
```

第二次加入我确实有效，但它需要很长时间才能获取我的数据。有没有其他方法可以做到这一点。

早些时候它曾经是

加入 I.InvcNum = C.Cust_InvcNum
两列具有相同的数据，如 DlrCd-InvcNum 即两列 1234-A789 但它不能与上述数据匹配，或者现在发票表中的列“InvcNum”可以填充为Dlrd-InvcNum 或 InvcPrefix-InvcNum

所以 InvcNum = 1234-A789 但 CustNum = I94-A789 所以我们需要检查是否为 InvoicePrefix-InvcNum

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:44:05.363

```
SELECT *
FROM Customer c 
  LEFT JOIN (
             SELECT i.InvcNum, p.InvcPrefix + '-' + I.InvcNum AS pInvcNum 
             FROM Invoice i LEFT JOIN Prefix p ON i.DealrID = p.DealrID
             ) ip ON c.Cust_InvcNum = CASE WHEN c.Cust_InvcNum = ip.InvcNum 
                                           THEN ip.InvcNum 
                                           ELSE ip.pInvcNum END 
```

# c++ - adjustROI 会改变 cv::Mat 的整体大小吗？

> ID：13936826
> 
> 赞同：1
> 
> 时间：2012-12-18T16:00:41.177
> 
> 标签：c++, opencv

更新：

我原来的问题在这里是无效的，对不起。我留下了一条线，在那里`m.create`被调用。如果对此没有答案，我将立即删除该问题。

* * *

我刚刚注意到这`Mat::adjustROI`似乎改变`wholeSize`了`cv::Mat`.

```
Mat m(11,11,CV_32FC1);
Size wholeSize, old_size;
Point ofs;
m.locateROI(old_size, ofs);
m.adjustROI(0,old_size.height/2,0,old_size.width/2);
m.locateROI(wholeSize, ofs);
assert(wholeSize==old_size); // fails, wholeSize is now smaller 
```

这是正常的吗？
如果是这样，我怀疑重新分配，否则这可能是内存泄漏的根源。
如果我是对的，那么重新分配何时发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:47:20.747

我运行了您的代码，并且断言对我来说没有失败（MSVC 2010）。我用调试器逐步完成了它，我还可以在监视窗口中看到两个大小相等（x 和 y 等于 11）。我是 OpenCV 的初学者，但从函数的文档来看，在我看来，adjustROI 不应该修改“wholeSize”。

> 该方法是对 cv::Mat::locateROI 的补充。实际上，这些函数的典型用途是确定父矩阵中的子矩阵位置，然后以某种方式移动位置。通常，当应考虑 ROI 之外的像素时，可能需要它进行过滤操作。当方法的所有参数都为正时，这意味着 ROI 需要向各个方向增长指定的数量。

# delphi - 日期/时间选择器作为 TCollectionItem 后代中的属性编辑器

> ID：13936827
> 
> 赞同：1
> 
> 时间：2012-12-18T16:00:42.220
> 
> 标签：delphi, datetime, custom-component, propertyeditor, tcollection

我正在编写一个需要日期、时间和日期/时间类型属性的组件。我希望这些属性在对象检查器中可见，并可以选择使用弹出属性编辑器。

我已尝试`TDate`将其作为已发布的属性，这为我提供了仅 Date 所需的结果。但是我需要同样的东西`TTime`，`TDateTime`但它们没有属性编辑器，实际上它甚至不接受我在那里输入的任何值。

我发现`TDateTimeProperty`which 可以用作属性编辑器，或者无论如何我都理解。我在注册这个组件时已经完成了必要的实现。我需要应用它的这个属性实际上是一个`TCollectionItem`后代，不一定是组件的一部分，而是在其中。

我就是这样注册的...

```
RegisterComponents('My Page', [TMyComponent]);
RegisterPropertyEditor(TypeInfo(TDateTime), TMyCollectionItem, 'MyPropName', TDateTimeProperty); 
```

虽然这可以编译，但当我安装它时，这个属性上没有属性编辑器。我尝试使用我的组件的类名来代替`TMyCollectionItem`相同的问题。

我在这里做错了什么来显示这个属性编辑器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:48:17.533

您无需为`TDateTime`、`TDate`和注册内置属性编辑器`TTime`。他们已经注册了。这就是为什么您尝试注册它们没有影响的原因。

这些类型的内置属性编辑器只是在底层浮点值和字符串表示之间进行转换。他们没有实现日期时间选择器或类似的东西。

你说：

> 但是我需要 TTime 和 TDateTime 相同的东西，但它们没有属性编辑器，实际上它甚至不接受我在那里输入的任何值。

这实际上是不正确的。它们确实带有属性编辑器。它们与您在问题中命名的内置属性编辑器相同。他们确实接受价值观。他们不接受您提供的值，因为您提供了无效值。

如果您想注册一个提供可视日期时间选择器的属性编辑器，那么您必须自己编写属性编辑器。

# jquery - 更改列宽问题

> ID：13936829
> 
> 赞同：2
> 
> 时间：2012-12-18T16:00:47.700
> 
> 标签：jquery, jqgrid

我无法在最新的 jqGrid 版本（4.4.1）中更改列宽。

在 3.8.2 版本中，我使用此代码更改列宽（并且效果很好）：

网格选项：

```
shrinkToFit = true; 
```

我将以下代码放在该`loadComplete`部分中。

首先我改变了列宽：

```
$("#gridId").jqGrid('setColProp',"colname",{width:new_width}); 
```

然后我改变了网格宽度

```
$("#gridId").jqGrid('setGridWidth', newGridWidth); 
```

并且网格被正确渲染。

我已经尝试使用 4.3.2 修改版本：
[JQGrid: Resize Grid Width After Column Resized](https://stackoverflow.com/questions/9593101/jqgrid-resize-grid-width-after-column-resized)
但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-22T02:25:16.540

Alberto 提出的解决方案仍然适用于 jqGrid 4.5.4（当前版本）。但是，[这里](https://stackoverflow.com/a/12172228/2842067)建议了一个更好的解决方案：您需要替换`width:`为`widthOrg:`in

```
$("#gridId").jqGrid('setColProp',"colname",{width:new_width}); 
```

第二种解决方案也适用于 jqGrid 4.5.4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T12:46:56.560

我发现了一个错误`grid.base.js`，如果您应用此修复网格调整不同列宽的大小将起作用。

进入 setGridWidth 我改变了两行：

```
cw = this.widthOrg;

width

cw = this.width; 
```

# maven - Maven编译器错误

> ID：13936833
> 
> 赞同：3
> 
> 时间：2012-12-18T16:00:53.737
> 
> 标签：maven, maven-2

您好，我有一个可以从我的计算机构建的项目，但是我在其他环境（服务器）中遇到了这个问题：

```
-----------------------------------------------------
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Internal error in the plugin manager executing goal 'org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile': Unable to load the mojo 'org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile' in the plugin 'org.apache.maven.plugins:maven-compiler-plugin'. A required class is missing: org/codehaus/plexus/compiler/manager/NoSuchCompilerException
org.codehaus.plexus.compiler.manager.NoSuchCompilerException
[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 58 seconds
[INFO] Finished at: Tue Dec 18 09:45:20 CST 2012
[INFO] Final Memory: 32M/490M 
```

这与我假设的 maven 编译器插件有关，在这种情况下可以做什么？

Per Behe 建议使用 -e 执行：

```
[INFO] ------------------------------------------------------------------------
[INFO] Internal error in the plugin manager executing goal 'org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile': Unable to load the mojo 'org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile' in the plugin 'org.apache.maven.plugins:maven-compiler-plugin'. A required class is missing: org/codehaus/plexus/compiler/manager/NoSuchCompilerException
org.codehaus.plexus.compiler.manager.NoSuchCompilerException
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Internal error in the plugin manager executing goal 'org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile': Unable to load the mojo 'org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile' in the plugin 'org.apache.maven.plugins:maven-compiler-plugin'. A required class is missing: org/codehaus/plexus/compiler/manager/NoSuchCompilerException
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:698)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
        at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
        at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
        at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
        at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.PluginManagerException: Unable to load the mojo 'org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile' in the plugin 'org.apache.maven.plugins:maven-compiler-plugin'. A required class is missing: org/codehaus/plexus/compiler/manager/NoSuchCompilerException
        at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(DefaultPluginManager.java:669)
        at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:468)
        at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
        ... 17 more
Caused by: org.codehaus.plexus.component.repository.exception.ComponentLookupException: Unable to lookup component 'org.apache.maven.plugin.Mojoorg.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile', it could not be created
        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:335)
        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:440)
        at org.apache.maven.plugin.DefaultPluginManager.getConfiguredMojo(DefaultPluginManager.java:652)
        ... 19 more
Caused by: org.codehaus.plexus.component.factory.ComponentInstantiationException: Could not instanciate component: role: 'null', implementation: 'org.apache.maven.plugin.CompilerMojo'
        at org.codehaus.plexus.component.factory.java.JavaComponentFactory.makeException(JavaComponentFactory.java:77)
        at org.codehaus.plexus.component.factory.java.JavaComponentFactory.newInstance(JavaComponentFactory.java:62)
        at org.codehaus.plexus.DefaultPlexusContainer.createComponentInstance(DefaultPlexusContainer.java:1464)
        at org.codehaus.plexus.component.manager.AbstractComponentManager.createComponentInstance(AbstractComponentManager.java:93)
        at org.codehaus.plexus.component.manager.PerLookupComponentManager.getComponent(PerLookupComponentManager.java:48)
        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:331)
        ... 21 more
Caused by: java.lang.NoClassDefFoundError: org/codehaus/plexus/compiler/manager/NoSuchCompilerException
        at java.lang.Class.getDeclaredConstructors0(Native Method)
        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
        at java.lang.Class.getConstructor0(Class.java:2699)
        at java.lang.Class.newInstance0(Class.java:326)
        at java.lang.Class.newInstance(Class.java:308)
        at org.codehaus.plexus.component.factory.java.JavaComponentFactory.newInstance(JavaComponentFactory.java:44)
        ... 25 more
Caused by: java.lang.ClassNotFoundException: org.codehaus.plexus.compiler.manager.NoSuchCompilerException
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:303)
        at org.codehaus.classworlds.RealmClassLoader.loadClassDirect(RealmClassLoader.java:195)
        at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:255)
        at org.codehaus.classworlds.DefaultClassRealm.loadClass(DefaultClassRealm.java:274)
        at org.codehaus.classworlds.RealmClassLoader.loadClass(RealmClassLoader.java:214)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:316)
        ... 31 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T18:33:14.663

我建议运行

```
mvn -v 
```

了解您是否在两台机器上使用不同的 Maven 版本。

同时，我建议升级到更新版本的编译器插件。2.0.2 已经很老了。如果不是最新的 3.0，至少升级到 2.3.2 甚至 2.5.1。

此外，我会指定你需要的语言级别的源和目标（例如下面的 Java 7），这样你最终会得到这样的东西

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-compiler-plugin</artifactId>
  <version>3.0</version>
  <configuration>
    <source>1.7</source>
    <target>1.7</target>
  </configuration>
</plugin> 
```

这应该可以解决它，或者至少为您提供更多关于下一步要查看的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-22T15:28:04.223

我在做 maven clean 时遇到了类似的问题。
它使用的是 maven-clean-plugin 2.2 版。
我将以下内容添加到我的构建中并解决了问题：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-clean-plugin</artifactId>
        <version>2.5</version>
 </plugin> 
```

# opencv - OpenCV-KalmanFilter::predict() 错误

> ID：13936840
> 
> 赞同：1
> 
> 时间：2012-12-18T16:01:02.583
> 
> 标签：opencv, runtime-error, kalman-filter, predict

我正在尝试在 OpenCV 上实现卡尔曼滤波器，因此我遵循了以下旋转点跟踪示例（OpenCV 2.4.3）：

[http://fossies.org/unix/misc/OpenCV-2.4.3.tar.gz:a/OpenCV-2.4.3/samples/cpp/kalman.cpp](http://fossies.org/unix/misc/OpenCV-2.4.3.tar.gz:a/OpenCV-2.4.3/samples/cpp/kalman.cpp)

我正在使用 OpenCV 2.4.2 和 QtCreator 4.7.4。一切都编译得很好，但是当我在这段代码的末尾执行程序时崩溃：

```
int main(int, char**)
{
    help();
    Mat img(500, 500, CV_8UC3);
    KalmanFilter KF(2, 1, 0);
    Mat state(2, 1, CV_32F); /* (phi, delta_phi) */
    Mat processNoise(2, 1, CV_32F);
    Mat measurement = Mat::zeros(1, 1, CV_32F);
    char code = (char)-1;

    for(;;)
    {
       randn( state, Scalar::all(0), Scalar::all(0.1) );
       KF.transitionMatrix = *(Mat_<float>(2, 2) << 1, 1, 0, 1);

       setIdentity(KF.measurementMatrix);
       setIdentity(KF.processNoiseCov, Scalar::all(1e-5));
       setIdentity(KF.measurementNoiseCov, Scalar::all(1e-1));
       setIdentity(KF.errorCovPost, Scalar::all(1));

       randn(KF.statePost, Scalar::all(0), Scalar::all(0.1));

       for(;;)
       {
          Point2f center(img.cols*0.5f, img.rows*0.5f);
          float R = img.cols/3.f;
          double stateAngle = state.at<float>(0);
          Point statePt = calcPoint(center, R, stateAngle);

          Mat prediction = KF.predict(); //it crashes here
       ... 
```

我还尝试了本教程（OpenCV 2.2），它也在同一点崩溃：.predict() 函数：

[http://www.morethantechnical.com/2011/06/17/simple-kalman-filter-for-tracking-using-opencv-2-2-w-code/comment-page-1/#comment-34618](http://www.morethantechnical.com/2011/06/17/simple-kalman-filter-for-tracking-using-opencv-2-2-w-code/comment-page-1/#comment-34618)

QtCreator 没有显示错误代码，所以我无法弄清楚这里发生了什么。我检查了其他帖子，他们说问题可能是矩阵的大小不同，但我怀疑因为这个例子适用于其他尝试过它的人......

任何人都可以给我一个关于如何解决这个问题的提示？

非常感谢您提前！！

# c# - 带正则表达式的匹配表

> ID：13936841
> 
> 赞同：1
> 
> 时间：2012-12-18T16:01:03.727
> 
> 标签：c#, .net, regex, .net-4.0

我正在尝试匹配带有正则表达式的表，但我遇到了一些问题。我无法弄清楚为什么它不能正确匹配。这是HTML：

```
 <table class="integrationteamstats">
    <tbody>
    <tr>
        <td class="right">
            <span class="mediumtextBlack">Queue:</span>
        </td>
        <td class="left">
            <span class="mediumtextBlack">0</span>
        </td>
        <td class="right">
            <span class="mediumtextBlack">Aban:</span>
        </td>
        <td class="left">
            <span class="mediumtextBlack">0%</span>
        </td>
        <td class="right">
            <span class="mediumtextBlack">Staffed:</span>
        </td>
        <td class="left">
            <span class="mediumtextBlack">0</span>
        </td>
    </tr>
    <tr>
        <td class="right">
            <span class="mediumtextBlack">Wait:</span>
        </td>
        <td class="left">
            <span class="mediumtextBlack">0:00</span>
        </td>
        <td class="right">
            <span class="mediumtextBlack">Total:</span>
        </td>
        <td class="left">
            <span class="mediumtextBlack">0</span>
        </td>
        <td class="right">
            <span class="mediumtextBlack">On ACD:</span>
        </td>
        <td class="left">
            <span class="mediumtextBlack">0</span>
        </td>
    </tr>
    </tbody>
    </table> 
```

我需要获取 2 条信息：Queue 下面的 td 内的数据和 Wait 下面的 td 内的数据（因此是 Queue 计数和等待时间）。显然，这些数字会经常更新。

这是我拉初始表的正则表达式，但它不起作用：

```
Match statstable = Regex.Match(this.html, "<table class=\"integrationteamstats\">(.*?)</table>"); 
```

而且我不确定应该使用什么正则表达式从 td 获取数据。

在任何人问之前，不，我无法更新 HTML 以具有 ID 或任何类似性质的东西。它几乎是这样。唯一一致的是 td 的位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T16:04:42.513

我建议不要使用正则表达式，而是使用[HTML Agility Pack](http://html-agility-pack.net/?z=codeplex)来解析 HTML 并查询其结构。

> 什么是 Html Agility Pack (HAP)？
> 
> 这是一个敏捷的 HTML 解析器，它构建一个读/写 DOM 并支持普通的 XPATH 或 XSLT（实际上你不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

一般来说，[正则表达式是解析 HTML 的糟糕选择](https://stackoverflow.com/a/1732454/1583)。

# java - 如何将音频文件转换为 CLOB？

> ID：13936843
> 
> 赞同：0
> 
> 时间：2012-12-18T16:01:15.017
> 
> 标签：java, oracle, clob

我是 CLOB 类型的数据对象的新手。我正在使用 JAVA 编程语言进行编码。
我的问题是如何将音频文件转换为 CLOB？

我应该将文件转换为字符数组吗？还是有其他方法？
任何人都可以指导我做一个教程吗？

请帮我。
提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:07:39.643

当引用音频文件（*.wav、*.mp3...）时，您可能正在处理二进制文件。

Oracle CLOB 用于字符（字符大对象），因此您应该使用 BLOB（二进制大对象）。您应该读取文件 ( `FileInputStream`) 并将每个字节写入 BLOB 的输出流。

# cordova - 在触发 DOMContentLoaded 事件之前是否需要将 phonegap javascript 添加到 DOM 中？

> ID：13936850
> 
> 赞同：1
> 
> 时间：2012-12-18T16:01:32.207
> 
> 标签：cordova, hybrid, domcontentloaded

Cordova-2.2.0.js 包含在应用程序启动时加载的初始 html 页面中。触发 deviceready 事件后，使用 "window.location.href = "http://myurl.aspx"; 加载外部 .aspx 页面

如果加载的页面包含 cordova.js 的脚本标记，则 deviceready 触发并且一切正常。但是，用户可能在 iOS 设备或 Android 设备上。所以cordova.js需要动态添加到页面中。Cordova.js 总是下载到设备上，但有时外部 url 无法连接到设备上的 cordova api。我在 iPad 上遇到过这个问题。

当应用程序正常工作时，我注意到 cordova.js 正在处理 DOMContentLoaded 事件，当它不工作时，cordova.js 没有捕获该事件。

谢谢，

# google-maps-api-3 - 如何更改地图（而不是标记）的 Google Maps 可拖动属性？

> ID：13936853
> 
> 赞同：14
> 
> 时间：2012-12-18T16:01:44.153
> 
> 标签：google-maps-api-3, draggable

在[Google Maps v3 reference](https://developers.google.com/maps/documentation/javascript/reference)中，我看到有一种方法`setDraggable(boolean)`可以应用于地图标记。

但是，我想在**地图**`setDraggable`上设置为，*而不是*在地图标记上。 我已在 mapOptions 中将属性设置为，但我不知道如何将其设置为以后  *...*不起作用： `true` ***`draggable``false``true``map.setDraggable(true)`***

 ****```
 // object literal for map options
    var myOptions =
    {
        center: new google.maps.LatLng(37.09024, -95.712891),
        zoom: 4, // smaller number --> zoom out
        mapTypeId: google.maps.MapTypeId.TERRAIN,

        // removing all map controls
        disableDefaultUI: true,

        // prevents map from being dragged
        draggable: false,

        // disabling all keyboard shortcuts
        keyboardShortcuts: false,

        disableDoubleClickZoom: true,

        // do not clear the map div     
        noClear: true
    };

    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    map.setDraggable(true); // does NOT work! 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-18T16:04:28.433

尝试：

```
map.setOptions({draggable: true}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T19:07:55.090

我在本节中输入了我的代码，它可以在移动设备和桌面设备上运行

```
function initialize()
    {
    var mapProp = {
      center:myCenter,
      zoom:5,
      draggable:false,
      mapTypeId:google.maps.MapTypeId.ROADMAP
      }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-08T13:32:37.150

在 Map 类中不使用 setDraggable。

它用于：

**Marker 类**、
**Polyline 类**、
**Polygon 类**、
**Rectangle 类**和**Circle 类**。

在您的情况下，您可以简单地使用：

```
map.draggable = true; 
```****

# firefox-addon - 在 FireFox 中将项目添加到上下文菜单

> ID：13936855
> 
> 赞同：0
> 
> 时间：2012-12-18T16:01:48.200
> 
> 标签：firefox-addon

右键单击图像后，我试图在 Firefox 的上下文菜单中添加一个新项目。我已经阅读了 Mozilla 网页中的文档。在 XUL 文件中我有这个代码：

```
<?xml version="1.0"?>
<overlay id="emailpicture" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
<script type="application/x-javascript" src="chrome://firefoxextension/content/emailpicture.js"/>

<popup id="contentAreaContextMenu">
    <menuitem id="emailpicture" label="Email This Image" oncommand=""/>
</popup>
</overlay> 
```

在 chrome.manifest 我有这个代码：

```
overlay chrome://browser/content/browser.xul chrome://firefoxextension/content/myext.xul 
```

当我运行 Firefox 时，它没有添加任何项目。似乎 Firefox 甚至没有运行`myext.xul`。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:42:10.740

是`<menupopup id="contentAreaContextMenu">`，不是`popup`

# google-cloud-storage - 使用 GCS 存储桶从客户那里接收数据

> ID：13936856
> 
> 赞同：0
> 
> 时间：2012-12-18T16:01:49.733
> 
> 标签：google-cloud-storage

我希望我的客户将文件放入我的存储桶中。阅读此文档[https://developers.google.com/storage/docs/collaboration](https://developers.google.com/storage/docs/collaboration)我了解到我的客户在处理文件之前将有一个额外的步骤来编辑他加载的文件的 ACL。这很不方便，因为我不想用过多的技术问题给我的客户带来麻烦。有用户友好的替代方案吗？

目前，我必须创建一个特定的客户项目，让客户代表成为对项目具有“编辑”权限的团队成员。这种情况会产生不希望的副作用，即授予对项目中其他服务的默认访问权限。我必须通过各种服务并找到限制客户访问的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:42:34.383

您可以为存储桶指定默认对象 ACL 以自动执行此过程。使用 gsutil setdefacl 命令执行此操作。

# jquery - 请帮我在我的 jquery 代码中找到错误？

> ID：13936857
> 
> 赞同：1
> 
> 时间：2012-12-18T16:01:53.753
> 
> 标签：jquery, virtuemart

我在美德马克中创建了一个拖放购物车。但我在这个 javascript jquery 脚本中有一个问题，我花了一整天的时间在这些代码中找到错误：

```
function addToCart( jQueryitem ) {
        var jQuerylist = jQuery( "ul", jQueryhv_cart_items ).length ?
        jQuery( "ul", jQueryhv_cart_items ) :
            jQuery( "<ul class='gallery ui-helper-reset'/>" ).appendTo( jQueryhv_cart_items );

        //ajax add to cart
        var hvvid = jQueryitem.attr("id");
        var hvvcatid = jQueryitem.attr("catid");

        jQuery.get("index.php?quantity[]=1&addtocart=Thêm vào giỏ hàng&option=com_virtuemart&view=cart&task=add&virtuemart_product_id[]="+hvvid+"&virtuemart_category_id[]="+hvvcatid,function(data,status){
            //alert("Data: " + data + "\nStatus: " + status);
        });

        //@hoangvi: find product has the same id with hvvid
        //if founded update product quantity
        //otherwise add product to cart
        var total_li = jQuerylist.find("li").length;
        for (var i=0; i<total_li; ++i) {
            var current_li = jQuerylist.find("li")[i];
            //alert(jQuery('<div/>').append(current_li.clone()).html());
            var li_hidden = current_li.find("span.hv_hidden");
            //alert(jQuery('<div/>').append(li_hidden.clone()).html());
            var id = li_hidden.attr("id");
            //alert(id);
            if (id == hvvid) { //founded
                var quantity = li_hidden.attr('quantity');
                //alert(quantity);
                quantity = quantity+1;
                li_hidden.attr('quantity',quantity);
                return;
            }
        }

        //add product to cart
        var jQueryitem2 = jQuery('<li class="ui-widget-content ui-corner-tr"></li>');
        var jQueryitem_img = jQuery("<div />").append(jQueryitem.find( 'img' ).clone()).html();

        jQueryitem2.append( jQueryitem_img ).append('<span>SL: 1</span> ' )
        .append('<span class="hv_hidden" id="' + hvvid + '" quantity="1"> </span> ');
        jQueryitem2.appendTo( jQuerylist ).fadeIn(function() {
            jQueryitem2
                .animate({ width: "48px" })
                .find( "img" )
                    .animate({ height: "36px" });
        });
        jQueryitem2.append()
    //});
} 
```

我认为这些代码中的这个问题：

```
 //@hoangvi: find product has the same id with hvvid
        //if founded update product quantity
        //otherwise add product to cart
        var total_li = jQuerylist.find("li").length;
        for (var i=0; i<total_li; ++i) {
            var current_li = jQuerylist.find("li")[i];
            //alert(jQuery('<div/>').append(current_li.clone()).html());
            var li_hidden = current_li.find("span.hv_hidden");
            //alert(jQuery('<div/>').append(li_hidden.clone()).html());
            var id = li_hidden.attr("id");
            //alert(id);
            if (id == hvvid) { //founded
                var quantity = li_hidden.attr('quantity');
                //alert(quantity);
                quantity = quantity+1;
                li_hidden.attr('quantity',quantity);
                return;
            }
        } 
```

因为当我删除上述代码时它可以正常工作（但当我添加两个具有相同 ID 的产品时无法更新产品数量）。我认为这是一个语法错误，因为它使 jquery 无法正常工作。像这样的html代码：

```
<ul class="gallery ui-helper-reset">
                                <li class="ui-widget-content ui-corner-tr" style="width: 48px;"><img src="/chovietnam.com/images/stories/virtuemart/product/resized/vantech-vt-3500i_90x90.jpg" alt="vantech-vt-3500i" class="featuredProductImage" border="0" style="height: 36px;"><span>SL: 1</span> <span class="hv_hidden" id="24" quantity="1"> </span> </li><li class="ui-widget-content ui-corner-tr" style="width: 48px;"><img src="/chovietnam.com/images/stories/virtuemart/product/resized/lenovo-g460small_90x90.jpg" alt="lenovo-g460small" class="featuredProductImage" border="0" style="height: 36px;"><span>SL: 1</span> <span class="hv_hidden" id="21" quantity="1"> </span> </li><li class="ui-widget-content ui-corner-tr" style="width: 48px;"><img src="/chovietnam.com/images/stories/virtuemart/product/resized/designer-handbag-223093101833428290_90x90.jpg" alt="designer-handbag-223093101833428290" class="featuredProductImage" border="0" style="height: 36px;"><span>SL: 1</span> <span class="hv_hidden" id="19" quantity="1"> </span> </li></ul> 
```

任何人都可以帮我解决这个问题，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:19:27.467

错误在下面的行中。

```
var current_li = jQuerylist.find("li")[i]' // This gets the DOM Object

var li_hidden = current_li.find("span.hv_hidden"); 
```

`current_li` 是**DOM 对象**而不是**jQuery 对象**

所以`current_li` 应该是`$(current_li)`

在使用之前将其转换为 jQuery 对象`.find()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:25:31.993

> ...代码（但当我添加**两个具有相同 id 的**产品时无法更新产品数量）

页面上不能有具有相同 ID 的元素。**除非**您正确过滤它。这是一个例子：

```
<div class="products">
    <span id="item1">My Item</span>
</div>
<div class="categories">
    <span id="item1">My Item 2</span>    
</div>

$(function() {
    //This will only find the first item with a duplicate ID
    var $items = $("#item1");
    alert("Only the first item: " + $items.text());

    //This will find each duplicate id since it's setting the context either to ".products" or ".categories"
    var $items = $("#item1", ".products");
    alert("Products Item: " + $items.text());

    var $items = $("#item1", ".categories");
    alert("Category Item: " + $items.text());
}); 
```

见：http: [//jsfiddle.net/anAgent/eGSpw/](http://jsfiddle.net/anAgent/eGSpw/)

# java - 如何将具有列表属性的对象列表转换为包含所有列表属性项的列表

> ID：13936858
> 
> 赞同：3
> 
> 时间：2012-12-18T16:01:53.910
> 
> 标签：java, guava

我有一个像这样的对象：

```
class House {

    String name;

    List<Door> doors;

} 
```

我想要做的是将 a 转换`List<House>`为`List<Door>`包含 all `doors`of all的 a `houses`。

有没有机会用番石榴做到这一点？

我尝试使用番石榴使用 Lists.transform 函数，但我只得到一个`List<List<Door>>`结果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T17:25:14.887

如果你真的需要使用函数式方法，你可以使用[FluentIterable#transformAndConcat](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/FluentIterable.html#transformAndConcat-com.google.common.base.Function-)来做到这一点：

```
public static ImmutableList<Door> foo(List<House> houses) {
    return FluentIterable
            .from(houses)
            .transformAndConcat(GetDoorsFunction.INSTANCE)
            .toImmutableList();
}

private enum GetDoorsFunction implements Function<House, List<Door>> {
    INSTANCE;

    @Override
    public List<Door> apply(House input) {
        return input.getDoors();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T17:20:05.500

```
FluentIterable.from(listOfHouses).transformAndConcat(doorFunction) 
```

会做得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:50:23.130

你不需要番石榴（假设我理解正确）：

```
final List<Door> doorsFromAllHouses = Lists.newArrayList();
for (final House house : houses) {
  doorsFromAllHouses.addAll(house.doors);
}
// and doorsFromAllHouses is full of all kinds of doors from various houses 
```

使用`Lists.transform`for input`list of houses`和 transform 函数可以`get all doors from a house`为您提供正确的输出`list of *each house's doors*`（恰好是`List<List<Door>>`）。

更一般地说，你想要[`reduce`/`fold`函数](http://en.wikipedia.org/wiki/Reduce_%28higher-order_function%29)而不是转换，这在 Guava 中没有实现（[参见这个问题](http://code.google.com/p/guava-libraries/issues/detail?id=218)），主要是因为 Java 的冗长语法和 for-each 循环的存在已经足够好了。你可以在 Java 8 中减少（或者你现在可以用任何其他主流语言来做到这一点......）。伪 Java8 代码：

```
List<Door> doors = reduce(
  houses,                                  // collection to reduce from
  new ArrayList<Door>(),                   // initial accumulator value
  house, acc -> acc.addAll(house.doors));  // reducing function 
```

# wordpress - 升级 WP 插件后出现 Google Maps API V3 错误

> ID：13936860
> 
> 赞同：6
> 
> 时间：2012-12-18T16:01:58.123
> 
> 标签：wordpress, google-maps, google-maps-api-3

升级 WP Advanced Custom Fields 后，我遇到了 google maps 的问题。地图显示正确，但页面无休止地加载。FF 中的 JS 错误控制台显示错误：

```
Error: a is undefined
Source File: https://maps.gstatic.com/intl/en_us/mapfiles/api-3/10/19/main.js
Line: 70

Error: q.queue[Za]() is not a function
Source File: https://maps.gstatic.com/intl/en_us/mapfiles/api-3/10/19/main.js
Line: 74 
```

我生成地图 JS 的代码是：

```
<script type="text/javascript" src="https://maps.google.com/maps/api/js?    key=AIzaSyCwynu3lxKxNPk5DNMWCx8oyGX8ka8_KqU&amp;sensor=false"></script>
<script type="text/javascript">
    //<![CDATA[
    var is_init = false;
    var map;
    function map_init() {
        var latlng = new google.maps.LatLng(<?php echo $lat; ?>, <?php echo $lng; ?    >);
        var myOptions = {
            zoom: <?php echo $zoom; ?>,
            center: latlng,
            scrollwheel: false,
            panControl: false,
            zoomControl: true,
            mapTypeControl: false,
            scaleControl: true,
            streetViewControl: true,
            overviewMapControl: false,
            mapTypeId: google.maps.MapTypeId.<?php echo $maptype; ?>
        };
        map = new google.maps.Map(document.getElementById("map_canvas"), myOp    tions);
        var marker;
        var latlng;

        <?php $i = 0; foreach($markers as $title=>$marker): ?>
        <?php if(!empty($marker['lat']) && !empty($marker['lng']))  { ?>
        latlng = new google.maps.LatLng(<?php echo $marker['lat']; ?>,<?php echo     $marker['lng']; ?>);
        marker<?php echo $i; ?> = new google.maps.Marker({
            position: latlng,
            map: map,
            icon: '/wp-content/themes/iw/marker/<?php echo $marker['typ']; ?    >.png',
            title: '<?php echo $title; ?>'
        });
        google.maps.event.addListener(marker<?php echo $i; ?>, 'click', function()     {   
            window.location.href = '<?php echo $marker['link']; ?>';
        });
            google.maps.event.addListener(marker<?php echo $i; ?>, 'mouseover',     function() {
            jQuery('.sbmlink<?php echo $i; ?>').addClass('mouseover');
        });
        google.maps.event.addListener(marker<?php echo $i; ?>, 'mouseout', func    tion() {
            jQuery('.sbmlink<?php echo $i; ?>').removeClass('mouseover');
        });
        <?php } ?>
        <?php $i++; endforeach; ?>
        is_init = true;

}
    jQuery(function(){
        jQuery('#map_button').click(function(){
            jQuery('#map_canvas').toggle();
            if (!is_init) {
                map_init();
            }
            if(jQuery('#map_button').html() == 'Hier klicken, um die Karte     einzublenden') {
                    jQuery('#map_button').html('Hier klicken, um die Karte auszublenden');
                document.cookie="mapstate=open; path=/;";
            } else {
                    jQuery('#map_button').html('Hier klicken, um die     Karte einzublenden');
                document.cookie="mapstate=closed; path=/;";
            }
        });
        <?php if ($mapstate == 'open' || ($map_default_open &&     !isset($_COOKIE['mapstate']))): ?>
        jQuery('#map_button').click();
        <?php endif; ?>
            jQuery.ajax({
            dataType : 'json',
        //  url : '/wetter.php?ort=<?php echo $custom['wetterort'][0]; ?>',
            success : function(data) {
                jQuery('.wetterzustand').html(data.wetterzustand);
                jQuery('.wettertemperatur').html(data.wettertemperatur + '     &deg;C');
                jQuery('.wettericon').html('<img alt="' +     data.wetterzustand + '" src="' + data.wettericon + '"/>');
            }
        });
    });
    //]]>
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-24T08:02:19.610

出现这些错误是因为当我们更新 wordpress 时，它**不会更新 jquery-ui，** 所以我们需要在主题的 functions.php 中手动插入代码来更新 jquery-ui。我也面临同样的问题。它帮助了我。

```
 function new_google_map_script($post) {

        wp_enqueue_style('admin-main', get_bloginfo('template_url') . '/css/admin-main.css');
        //wp_enqueue_style('jquery-ui', get_bloginfo('template_url') . '/css/jquery-ui.css');
        wp_enqueue_style('wp-jquery-ui');
        wp_enqueue_style('wp-jquery-ui-dialog');
    }
    add_action('wp_enqueue_scripts', 'new_google_map_script'); 
```

# javascript - (jQuery) 单击 cookie 时保存复选框状态

> ID：13936865
> 
> 赞同：6
> 
> 时间：2012-12-18T16:02:13.350
> 
> 标签：javascript, jquery, html, forms, jquery-cookie

关于这个功能有很多话题，但我似乎无法让它工作。我已经用谷歌搜索了这个特定的案例，一堆链接让我在这里，但奇怪的是我似乎无法让它们工作。我所做的唯一工作如下： [http](http://dl.dropbox.com/u/2238080/a/!old/z.htm) ://dl.dropbox.com/u/2238080/a/!old/z.htm 但如您所见，它不存储盒子的状态是未经检查。

问候， 鲁本

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T16:51:47.170

您可以将所有代码更改为：已编辑以删除不需要的部分。

```
$(document).ready( function(){
   // read the current/previous setting
    $("input.box[type=checkbox]").each(function() {
        var name = $(this).attr('name');
        if ($.cookie(name) && $.cookie(name) == "true") {
            $(this).prop('checked', $.cookie(name));
        }
    });
   // event management
    $("input.box[type=checkbox]").change(function() {
        var name = $(this).attr("name");
        $.cookie(name, $(this).prop('checked'), {
            path: '/',
            expires: 365
        });
    });
}); 
```

包括摆脱所有这些：

```
$(document).ready( function(){
    remember("[name=1]");
});
... 
```

编辑：不那么冗长的版本：

```
$("input.box").each(function() {
    var mycookie = $.cookie($(this).attr('name'));
    if (mycookie && mycookie == "true") {
        $(this).prop('checked', mycookie);
    }
});
$("input.box").change(function() {
    $.cookie($(this).attr("name"), $(this).prop('checked'), {
        path: '/',
        expires: 365
    });
}); 
```

工作示例：http: [//jsfiddle.net/R73vy/](http://jsfiddle.net/R73vy/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-25T00:58:15.460

如果您只对一个复选框感兴趣并且/或者您不想为此包含 jQuery cookie 插件，这里有两行代码：

```
//on page load set the checkbox to stored value or default to true
$('#turbo').prop('checked' , ( typeof sessionStorage.turbo !== 'undefined' ) ? (sessionStorage.turbo=='true') : true ); 
//when checkbox is updated, update stored value
$('#turbo').change( function() { sessionStorage.turbo = $(this).prop('checked');  }); 
```

这也不使用 cookie，因此节省了几个字节的带宽。更改为 localStorage 以延长已保存选择的生命周期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-05T23:47:11.280

如果您不严格需要使用 cookie，则使用较新的 HTML5 Web 存储（在这种情况下特别是 sessionStorage 对象）比存储在 cookie 中更容易和更好：

[http://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

浏览器支持非常全面：

[http://caniuse.com/#search=sessionstorage](http://caniuse.com/#search=sessionstorage)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T16:06:36.463

它应该与 jQuery < 1.6 一起使用，但从 1.6 开始，您应该将每个外观更改`.attr("checked")`为`.prop("checked")`

编辑：更改了检查 cookie 的 if 条件

```
 function remember( selector ){
            $(selector).each(
                function(){
                    var name = $(this).attr('name');
                    if( $.cookie( name ) && $.cookie(name)=="true" ){
                        $(this).prop('checked', true);
                    } else {
                      $(this).prop('checked', false)
                    }
                    $(this).change(
                        function(){
                            $.cookie(name, $(this).prop('checked'), { path: '/', expires: 365 });
                        }
                    );
                }
            );
        } 
```

# verilog - 求一个月的天数

> ID：13936868
> 
> 赞同：0
> 
> 时间：2012-12-18T16:02:21.370
> 
> 标签：verilog, dataflow

我正在制作一个程序来显示号码。用户提供的月份中的天数。我正在数据流级别制作这个程序。由于我是 Verilog 的新手，我不知道我们是否可以在数据流级别使用 if/else 条件或 case 语句。因为使用 if/else 语句将使这个程序变得轻而易举。如果不是，我如何在数据流级别实现以下想法。

```
if(month==4 || month==6 || month==9|| month==11)

      days=30;
 else
    if(month==2 && leapyear==1)
        days=29; 
```

这是我的verilog不完整代码：

```
 module LeapYear(year,month,leapOrNot,Days);

 input year,month;

 output leapOrNot,Days;

 //if (year % 400 == 0) || ( ( year % 100 != 0) && (year % 4 == 0 ))
 leapOrNot=((year&400)===0) && ((year % 100)!==0 || (year & 4)===0);

  Days=((month & 4)===4 ||(month & 6)===6 ||(month & 9)===9 ||(month & 11)===11 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:59:35.283

您不能在连续赋值中使用 if/else，但可以使用条件运算符，它在功能上是等效的。

试试这个：

```
assign Days = (month == 4 || month == 6 || month == 9 || month == 11) ? 30 : 
              (month == 2 && leapyear == 1) ? 29; 
```

这将产生您在问题中提出的内容。但这不是正确的答案，因为您缺少`Days`等于 28 或 31 的条件。

编辑：以下是如何使用条件 operator.v 将所有条件组合成单个分配语句

```
assign Days = (month == 4 || month == 6 || month == 9 || month == 11) ? 30 : 
              (month == 2 && leapyear == 1) ? 29 :
              (month == 2 && leapyear == 0) ? 28 :
              31; 
```

# web-applications - 如何使用 ubuntu one sync 创建 Web 应用

> ID：13936869
> 
> 赞同：1
> 
> 时间：2012-12-18T16:02:25.390
> 
> 标签：web-applications, ubuntu, synchronization

我在 ubuntu 的网站上为开发人员找到了一个 API 文档（[将文件存储在云中](http://www.example.com/)）......但是由于我只是一个初学者，我不明白我应该如何使用这个文档..我的目的是创建一个带有 Ubuntu One 同步的网络应用程序（html、css、js、php）......我应该如何应用文档？

# mysql - 在列中选择特定记录或具有相同值的记录

> ID：13936872
> 
> 赞同：0
> 
> 时间：2012-12-18T16:02:37.720
> 
> 标签：mysql, select

我有这张数据表：

```
NAME | GROUP
------------
a1   | A
a22  | A
c1   | C
c2   | C
s1   | NULL
t1   | NULL 
```

如何选择记录命名`a1`以及该记录是否`group <> NULL`包含同一组中的其他项目？

我试过子查询：

```
SELECT `name`, `group` FROM `tbl`
WHERE (`name` = 'a1' AND `group` IS NULL) OR `group` = (SELECT `group` FROM `tbl` WHERE `name` = 'a1') 
```

`EXPLAIN`：

```
id  select_type  table  type  possible_keys  key      key_len  ref    rows  
 1  PRIMARY      tbl    ALL   PRIMARY        NULL     NULL     NULL   6 Using where
 2  SUBQUERY     tbl    const PRIMARY        PRIMARY  386      const  1 
```

这可行，但我不确定它是否 100% 正确和有效。寻找更好的解决方案，也许是`JOIN`？

MySQL内部问题：是否`SELECT`为外部表中的每个搜索记录执行内部查询？此查询的结果是否已缓存（如`SELECT SQL_CACHE`查询）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:20:36.373

以下查询将返回与规范匹配的结果集。

```
SELECT DISTINCT COALESCE(t.name,s.name) AS `name`
  FROM `tbl` s
  LEFT
  JOIN `tbl` t
    ON t.group = s.group
 WHERE s.name = 'a1' 
```

如果`name = 'a1'`表中存在具有 的行，则将返回该行。该查询还将返回值与`name`具有的行的`group`任何值相匹配的值。`group``name = 'a1'`

# c - Perl（或 C printf）返回一个选项卡，可能吗？

> ID：13936875
> 
> 赞同：-2
> 
> 时间：2012-12-18T16:02:53.333
> 
> 标签：c, perl, tabs, printf

我们都知道如何用 \t 进一步打印一个字符串

```
printf ("Hello\tthere!\n"); 
```

输出：

```
Hello    there! 
```

向后打印一个标签怎么样？我知道我们可以使用 \r 从行首重新开始，但是在缩进比这更复杂的情况下，我正在寻找类似 \bt （如果它存在）这样我可以写的东西：

```
printf ("Hello\tthere! \n\tHow\n\btare you?\n"); 
```

进入输出：

```
Hello    there!
             How
         are you? 
```

**编辑**

我对这里回复的数量和速度感到惊讶，有时甚至对一些评论的无用性感到惊讶，但只有少数。我想要实现的当然比这更复杂，它正确地格式化了一个 XML 文件以便于阅读。我想确定没有更简单的方法，回复确认没有谢谢。

**编辑 2**

对不起，伙计们，你对这个问题投反对票是对的，首先是因为我没有指定我正在写入文本文件，其次是因为我假设标签可以被文件处理程序“记住”。很抱歉浪费您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:18:31.720

使用*printf*您可以显式控制标签的数量。要返回标签，您只需使用更少的标签。从您提供的示例中，您似乎希望标签级别被记住，并且**缩进**的程度比打印时的实际程度要远。它会出现在与那里相同的制表位**上！****你呢**？

 **假设：

```
printf ("Hello\tthere! \n\tHow\n\btare you?\n"); 
```

您希望看到：

```
你好呀！
    如何
你是？

```

那么只是不要在你之前添加标签**吗？**你会得到你想要的。*要获得更少的选项卡，只需在printf*中添加更少的**\t**符号。 *printf*对之前发生的制表符没有任何*记忆。*

 ***```
printf ("Hello\tthere! \n\tHow\nare you?\n"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T16:09:05.737

不，没有特殊字符可以做你想做的事。甚至 的行为`\b`也依赖于平台。

`\bt`很简单，退格字符后跟字母`t`。因此支持该语法，但没有特殊行为。

但是为什么你需要在这里？为什么不直接使用：

```
printf("Hello\tthere!\r\n\tHow\r\nare you?\n"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:12:28.750

没有办法“返回标签”，但还有其他选项：

正如你所指出的，`\t`给你一个标签。

`\b`可以给你一个退格，所以你可以用它“备份”。

还有一些不太常用的：
`\f`是换页/新页面（从打印机中弹出页面）
`\v`是垂直选项卡（在同一列上向下移动一行）

因此，使用其他选项，您可以模拟您想要的。

```
printf("Hello, this is\n\t\tjust a test.\n");
printf("Hello, this is\v\b\bjust a test.\n"); 
```

最终看起来像：

```
Hello, this is
        just a test.
Hello, this is
    just a test. 
```

然后，您可以使用以下内容简化代码：

```
#define BACKTAB "\v\b\b"

printf("Hello, this is%sjust a test.\n", BACKTAB); 
```

我认为这是你能做的最好的*****

# jquery-mobile - 带有叠加层的弹出窗口，弹出填充窗口？

> ID：13936877
> 
> 赞同：0
> 
> 时间：2012-12-18T16:03:03.450
> 
> 标签：jquery-mobile, popup

想使用带有内容的弹出窗口（jquery mobile）并使其填满屏幕。也有覆盖。

像这样，向下滚动到底部，Overlay 设置为 A 按钮。

[http://jquerymobile.com/branches/popup-widget/docs/pages/popup/index.html](http://jquerymobile.com/branches/popup-widget/docs/pages/popup/index.html)

但我希望弹出窗口几乎填满整个屏幕。这应该作为一个新页面，但充满了 ajax 内容，我稍后会解决这个问题......

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:37:08.143

jQuery Mobile 不会使弹出窗口或对话框的大小超过包含渲染内容所需的大小。如果您真的想填满页面，请使用新页面。考虑改为使用弹出过渡过渡到新页面。

[http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html](http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html)

您也可以考虑 a `dialog`，因为它会掩盖底层的页面内容

[http://jquerymobile.com/demos/1.2.0/docs/pages/dialog/index.html](http://jquerymobile.com/demos/1.2.0/docs/pages/dialog/index.html)

# c# - 使用 Sharppcap 或 packetdotnet 发送 http post 数据包

> ID：13936882
> 
> 赞同：2
> 
> 时间：2012-12-18T16:03:27.220
> 
> 标签：c#, .net, packet, sharppcap, packet.net

出于测试原因，我正在尝试生成具有不同源 IP 地址的 http 数据包并将其发布到目的地。

我将使用**sharppcap**或**packetdotnet**。

在这里找到了很好的样本：

[http://www.tamirgal.com/blog/post/SendTcpSynExamplecs.aspx](http://www.tamirgal.com/blog/post/SendTcpSynExamplecs.aspx)

和这里：

[http://pcapdotnet.codeplex.com/wikipage?title=Pcap.Net%20Tutorial%20-%20Sending%20Packets](http://pcapdotnet.codeplex.com/wikipage?title=Pcap.Net%20Tutorial%20-%20Sending%20Packets)

但我是这方面的菜鸟，我需要帮助：

1.  **发送http包之前**我应该​​做什么？做一个**tcp握手**还是什么？**您可以通过发送 http 数据包**发布任何有关使用**post**动词 **调用 url**的示例吗？

*****   为了进行一些压力测试，我需要更改源 IP 地址和目标响应对我来说并不重要。所以改变
    **源地址**就够**了**？**校验**和和**其他属性**呢？**** 

 *******任何示例或链接都会有所帮助。***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:17:34.240

正如克里斯摩根在他的回答中指出的那样，按照你的描述去做是不可能的。原因如下：

*   HTTP 协议（​​出于实际目的 - 始终）通过 TCP 连接工作
*   TCP 连接必须执行握手（3 包相互交换 - 客户端->服务器->客户端->服务器）才能开始实际数据流动
*   由于握手，替换HTTP源IP地址是不可能的——要建立连接，您需要提供您的有效IP（否则您将不会收到第二个数据包，也无法发送第三个所需的数据包）
*   源 IP 地址将取自已建立的连接属性，因此在建立连接后也无法伪造。

有许多特殊情况是部分可能的（X-Forwarded-For 和 HTTP 请求中的类似标头），但这必须根据每个应用程序进行研究。

因此，简而言之：您所请求的内容是不可能的（除了一些非常特殊的情况），您可以在[此 Wiki 文章上阅读有关 TCP 连接建立的更多信息](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_establishment)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T21:07:09.603

您必须先与服务器建立 tcp 连接，然后才能发送将接收的 http 数据包。从 ip 级别构建您可能需要进行此类测试的工作需要做一些工作。

不过，有些工具会为您生成 http 会话。它们通常也可以配置为同时打开特定数量的 http 会话，如果这是您在提到更改源 IP 时尝试做的事情。[http://code.google.com/p/httperf/](http://code.google.com/p/httperf/)或[http://httpd.apache.org/docs/2.2/programs/ab.html](http://httpd.apache.org/docs/2.2/programs/ab.html)之类的东西可能会这样做。****

# javascript - javascript文本框文本接收发布和更改颜色

> ID：13936889
> 
> 赞同：0
> 
> 时间：2012-12-18T16:03:35.447
> 
> 标签：javascript, html

```
<tr>
<td>page header</td>
<td>
    <input type="text" id="pageh" /></td>
</tr>
<tr>
<td>Header color:</td>
<td>
    <select id="hcolor">
        <option>Red</option>
        <option>Purple</option>
        <option>Gray</option>
    </select></td>
 </tr>
 <tr>
<td>Header size</td>
<td>
    <select id="hsize">
        <option>12px</option>
        <option>18px</option>
        <option>24px</option>
    </select></td>
</tr>
<tr>
<td></td>
<td><input type="button" value="Send" onclick="Start()" /><input type="reset" value="Clear" /></td>
</tr> 
```

因此，我想获取文本框文本，将其复制到这样的 var`var text = document.GetElementByID("pageh").value;`中，然后`document.write`使用列表中选择的颜色和大小执行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:21:53.940

像这样的东西？

```
function Start() { 
    var text = document.getElementById('pageh').value; // get the value of the textbox
    var color_el = document.getElementById('hcolor');
    var color = color_el.options[color_el.selectedIndex].innerText.toLowerCase(); // get the selected color
    var size_el = document.getElementById('hsize');
    var size = size_el.options[size_el.selectedIndex].innerText; // get the font-size
    // make a p element with the selected style properties
    document.write("<p style='color: "+ color +"; font-size: " + size + "'>" + text + "</p>"); 
} 
```

`size_el.options`和是选择标签中选项的`color_el.options`元素列表，`size_el.selectedIndex`和`size_el.selectedIndex`是被选择的选项，用整数表示。所以`color_el.options[2]`会给我们第三个选项元素。然后我们从元素中“提取”innerText。

最后我们创建一个段落元素，看起来`<p style="color: gray; font-size: 24px">test</p>`颜色应该最好用小写字母书写，因此我们使用 "Gray".toLowerCase() 将 "Gray" 转换为 "gray"

# ruby - 为什么我的 ruby 方法总是返回 true？

> ID：13936891
> 
> 赞同：1
> 
> 时间：2012-12-18T16:03:41.310
> 
> 标签：ruby, class, collections, boolean

从 codeschool 的 ruby​​-bits 课程中，我试图了解这些类是如何工作的——我有一个`Game`类和一个集合类，称为`Library`存储游戏集合。

```
class Game
  attr_accessor :name, :year, :system
  attr_reader :created_at

  def initialize(name, options={})
    self.name = name
    self.year = options[:year]
    self.system = options[:system]
    @created_at = Time.now
  end

  def ==(game)
    name == game.name && 
    system == game.system &&
    year == game.year
  end
end 
```

图书馆类：

```
class Library
  attr_accessor :games

  def initialize(*games)
    self.games = games
  end

  def has_game?(*games)
    for game in self.games
      return true if game == game
    end
    false
  end
end 
```

现在我创建了一些游戏：

```
contra = Game.new('Contra', {
  year: 1994,
  system: 'nintendo'
})

mario = Game.new('Mario', {
  year: 1996,
  system: 'SNES'
})

sonic = Game.new('Sonic', {
  year: 1993,
  system: 'SEGA'
}) 
```

并实例化一个新集合：

```
myCollection = Library.new(mario, sonic) 
```

当我尝试查找某个游戏是否正在`myCollection`使用该`has_game?`方法时，我总是得到`true`

`puts myCollection.has_game?(contra) #=> returns **true**`即使这从未作为集合的一部分插入。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:07:11.587

```
return true if game == game 
```

我认为这种说法可能会引起问题。

它总是正确的。

你可能想要这样的东西：

```
def has_game?(wanted)
  for game in self.games
    return true if game == wanted
  end
  false
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:47:58.367

这里有几件事是错误的：

1.  而不是使用`self.XXXX`创建实例变量你应该使用`@XXXX`，它直接访问值，使用 self 实际上执行另一个方法调用，请参阅此处了解更多详细信息：[实例变量：self vs @](https://stackoverflow.com/questions/1693243/instance-variable-self-vs)

2.  正如其他人提到的`game == game`将始终返回`true`，已经发布的答案不允许将多个游戏传递给`has_game?`

这是我的正确工作的更改：

```
class Game
  attr_accessor :name, :year, :system
  attr_reader :created_at

  def initialize(name, options={})
    @name       = name
    @year       = options[:year]
    @system     = options[:system]
    @created_at = Time.now
  end

  def ==(game)
    @name == game.name && 
    @system == game.system &&
    @year == game.year
  end
end

class Library
  attr_accessor :games

  def initialize(*games)
    @games = games
  end

  # only returns true if this Library
  # has ALL of the games passed to has_game? 
  def has_game?(*_games)
    _games.each do |game|
      return false if not @games.include?(game)
    end

    return true
  end
end

contra = Game.new('Contra', {
  year: 1994,
  system: 'nintendo'
})

mario = Game.new('Mario', {
  year: 1996,
  system: 'SNES'
})

sonic = Game.new('Sonic', {
  year: 1993,
  system: 'SEGA'
})

myCollection = Library.new(mario, sonic)
puts "Collection has Contra? #{myCollection.has_game?(contra)}"
puts "Collection has Sonic and Mario #{myCollection.has_game?(sonic, mario)}" 
```

输出：

```
Collection has Contra? false
Collection has Sonic and Mario true 
```

# c# - WCF 字符串方法，它也通过 response.write 提供下载 - 目前仅在 IE 中工作

> ID：13936892
> 
> 赞同：0
> 
> 时间：2012-12-18T16:03:43.730
> 
> 标签：c#, .net, wcf, upload, download

我有这样的 WCF 合同：

```
[OperationContract]
[WebInvoke(Method = "POST")]
string Import_CSV(); 
```

然后 Import_CSV() 方法成功地接受来自 HttpContext.Current.Request.Files 的文件上传... Import_CSV() 方法返回一个字符串，其中包含成功消息或发生的特定错误。

但是，如果我对上传的文件执行的服务器操作出现多个错误，那么我的目标是生成一个 csv 文件并将其提供给用户以供他们下载。

所以，我创建了 csv 内容，现在我想显示它供用户下载。

将 Statuscode 设置为 (int)HttpStatusCode.OK，然后我返回一个空字符串表示成功，并使用 response.write 来提供新生成的 csv 文件，如下所示：

```
HttpContext.current.Response.ContentType = "text/csv";
HttpContext.current.Response.AddHeader("Content-Disposition", "attachment;filename=ImportErrors.csv");
HttpContext.current.Response.AddHeader("Pragma", "no-cache");
HttpContext.current.Response.AddHeader("Cache-Control", "no-cache");
foreach (var line in csvLines)
{
    context.Response.Write(line);
    context.Response.Write(Environment.NewLine);
    context.Response.Flush();
}
context.ApplicationInstance.CompleteRequest(); 
```

在 Internet Explorer 中，一切似乎都按计划进行，但 Firefox 和 Chrome 似乎不知道如何处理这些数据。我尝试为内容设置不同的 http 状态代码和不同的 mime 类型，但我怀疑我走错了路。

有什么建议么？

我最近在堆栈溢出问题上问了这个难题的一小部分：[response.write 上的 88 字节限制？](https://stackoverflow.com/questions/13869430/limit-of-88-bytes-on-response-write)

答案非常有帮助，但现在我的问题是关于 WCF，通过此服务调用返回文本和文件，并且需要在 IE 之外工作。谢谢！

* * *

在 chrome 中使用时的标题：

要求：

```
POST /services/PTService.svc/Import_CSV HTTP/1.1
Host: inf18
Connection: keep-alive
Content-Length: 565
Origin: http://inf18
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 
Safari/537.11
Content-Type: multipart/form-data; boundary=----WebKitFormBoundarykpa0b9lHil712wdL
Accept: */*
Referer: http://inf18/dashboard/ManageRecipient.aspx
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: ASP.NET_SessionId=o50tom0nkjfmglumcmrbtlds 
```

回复：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Transfer-Encoding: chunked
Content-Type: text/csv; charset=utf-8
Content-Encoding: gzip
Vary: Accept-Encoding
Server: Microsoft-IIS/7.5
Content-Disposition: attachment;filename=ImportErrors.csv
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Tue, 18 Dec 2012 18:30:37 GMT 
```

* * *

在 IE 中使用的标头：（IE9 兼容视图，IE9 标准）

要求：

```
POST /services/PTService.svc/Import_CSV HTTP/1.1
Accept: application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg, application/x-
ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*
Referer: http://inf18/dashboard/ManageRecipient.aspx
Accept-Language: en-US
User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR
2.0.50727;     .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; MDDR)
Content-Type: multipart/form-data; boundary=---------------------------7dc180222c0fb0
Accept-Encoding: gzip, deflate
Host: inf18
Content-Length: 598
Connection: Keep-Alive
Pragma: no-cache
Cookie: ASP.NET_SessionId=e2iwodwyy2muxoj4zhpisl5k 
```

回复：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Transfer-Encoding: chunked
Content-Type: text/csv; charset=utf-8
Content-Encoding: gzip
Vary: Accept-Encoding
Server: Microsoft-IIS/7.5
Content-Disposition: attachment;filename=ImportErrors.csv
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Tue, 18 Dec 2012 18:33:34 GMT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:49:10.310

您是否尝试在写入响应之前添加以下行？

```
/******************************************/
HttpContext.Current.Response.ClearHeaders();
HttpContext.Current.Response.Clear();
/******************************************/

HttpContext.Current.Response.ContentType = "text/csv";
HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment;filename=ImportErrors.csv");
//rest of your code sample 
```

# algorithm - 如何有效地对分区数组进行排序？

> ID：13936897
> 
> 赞同：5
> 
> 时间：2012-12-18T16:03:57.877
> 
> 标签：algorithm, matlab, sorting

我有**K**个文件。我称它们为**X1**、**X2**、 ... 、**XK**。
这些文件中的每一个都是**N x 1**的双精度数组。
这意味着我实际上有一个**NK x 1**数组，分区为**K**个数组。让我们称这个大数组**X**。

我需要对**X**进行排序，但我无法将所有数据加载到内存中。执行这种排序并将结果保存在单独文件中的有效算法是什么？

我知道（当然不确定是否有效）如果我只想对 H 元素进行排序，该怎么做：

1.  排序**X1**并保存为**sX1**
2.  **A = sX1(1:H,1)** //在 Matlab 中
3.  排序**X2**和 A
4.  对其他文件重复步骤 1,2 和 3

但是**H**不能很大，同样是因为内存问题。

**Update**
The [Sort with the limited memory](https://stackoverflow.com/questions/4358087/sort-with-the-limited-memory) question 与此问题不同，尽管它有所帮助。如果我想使用那个问题的答案或 MikeB 的答案，那么也应该回答这个问题：我是否应该将 K 个文件合并到一个文件中，然后使用外部排序算法。如果是，如何？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T16:10:48.197

您正在尝试的称为外部排序。每个分区都会自行排序。然后，您必须合并所有分区以构建最终的排序列表。如果您只寻找前几项，您可以提前退出合并。

似乎有一些用于外部合并的现有解决方案 matlab 解决方案。这是 mathworks 文件交换站点上的一个链接：http: [//www.mathworks.com/matlabcentral/fileexchange/29306-external-merge-sort/content/ext_merge/merge.m](http://www.mathworks.com/matlabcentral/fileexchange/29306-external-merge-sort/content/ext_merge/merge.m)

**更新**：我链接的代码显示了它是如何在 matlab 中完成的。具体来说，这里的代码：http: [//www.mathworks.com/matlabcentral/fileexchange/29306-external-merge-sort/content/ext_merge/extmerge.m](http://www.mathworks.com/matlabcentral/fileexchange/29306-external-merge-sort/content/ext_merge/extmerge.m)获取需要合并的文件列表，并最终合并它们到一个文件。

在您最初的问题陈述中，您说您有 K 个文件，从 X1 到 XK。外部排序首先对这些文件进行排序，然后将它们合并到一个文件中。一个简单的实现会有这样的伪代码：

```
// external merge-sort algorithm
For each file F in (X1 ... XK)
    Read file F into memory array R
    Sort R
    Overwrite file F with sorted data from R
    Clear array R in memory
For N = K-1 down to 1
    in-order merge file XN+1 and XN into file X'
    erase file XN+1 and XN
    rename file X' as XN 
```

您应该看到第一阶段是排序。我们将每个文件读入内存，对其进行排序，然后将其写回。这是 I/O，但它很有效；希望我们使用尽可能多的内存，以便尽可能多地在内存中排序。在第一个循环结束时，我们有 K 个文件，每个文件都在自己的值域内排序。

给定 K 个排序的文件，我们的下一步是合并它们。合并两个文件不使用任何内存，但会执行大量 I/O。合并两个文件看起来像这样，给定两个名为 L 和 R 的文件，我们可以将它们合并为 O：

```
// merge two files algorithm
Get value LV from L
Get value RV from R
While L is not EOF AND R is not EOF
    if ( LV <= RV )
        write LV into O
        get value LV from L
    else 
        write RV into O
        get value RV from R
While L is not EOF
    get LV from L
    write LV into O
While R is not EOF
    get RV from R
    write RV into O 
```

合并排序中的第二个循环会将两个文件 N+1 和 N 合并到一个文件 N 中。它遍历每个文件并合并它们。这会读取和重写大量数据，并且您可以通过在循环中处理多个文件来获得更高的效率。但它工作正常，因为我已经写了它。

# c# - 带有 MySQL 连接器的 C# - 访问被拒绝

> ID：13936900
> 
> 赞同：2
> 
> 时间：2012-12-18T16:04:19.437
> 
> 标签：c#, mysql, visual-studio-2010, connection-string, mysql-connector

我有一个带有`MySQL`数据库的远程托管网站。

我正在尝试从一个小`C#`程序访问该数据库。

**我试过的**：

*   在项目中引用 MySQL DLL
*   使用 MySQL 连接字符串
*   禁用我的防火墙
*   将我的 IP 地址添加到`Remote MySQL Databases`站点的 cPanel 中

**我得到了什么**：

*   *Visual Studio 控制台中*用户 blabla@mycomputerip 的访问被拒绝**

 ***让我难以置信的是**：

*   如何确定我的虚拟主机服务是否允许远程连接到数据库？
*   我真的需要将 PuTTy 连接到服务器并调整配置吗？
*   ^ 如果是这样，我什至可以这样做吗？

**后期编辑：**

*   够有趣的。如果我做

    ```
    GRANT ALL PRIVILEGES ON *.* TO 'myuser'@'%' WITH GRANT OPTION; 
    ```

    它向我抛出了这个：

    ```
    #1045 - Access denied for user 'blabla'@'localhost' (using password: YES) 
    ```

    常识应该告诉你我的用户名实际上不是“blabla”。

**稍后编辑：**

我没有创建用户的权限，也没有通过 PuTTy 左右的 SSH 访问权限。
这是否基本上意味着我无法从远程位置连接到数据库是我的主机的错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:08:25.107

看看你的 mysql 数据库中的用户。有几件事要检查：

1.  使用共享主机上的 cPanel，如果您创建一个名为`blah`mysql 中用户的实际名称的用户，通常是`unixusername_blah`. 这是自动完成的，以防止共享同一 MySQL 服务器的不同 cPanel 帐户之间的 MySQL 用户名冲突。

2.  使用 MySQL，您可以定义允许用户连接的主机。您定义的新用户是否允许从您的 IP 连接？

预计到达时间：

可能想要查看该用户帐户的权限并确保授予适当的权限。您可以通过在 phpMyAdmin 或控制台中运行以下命令来执行此操作：

```
SHOW GRANTS FOR 'something_root'@'localhost' 
```

并将您在此处看到的赠款与您在此处获得的赠款进行比较：

```
SHOW GRANTS FOR 'something_root'@'%' 
```

最后，根据您的托管环境，您可能无权创建新用户或扩展他们的权限足以做到这一点。如果您有一个共享主机帐户，这种情况尤其可能发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:11:02.413

> 如何确定我的虚拟主机服务是否允许远程连接？

最好问问你的whebhosting证明者，有些允许远程连接，有些不允许。如果它们允许远程连接，您可能必须配置允许用户从哪些主机连接，或者添加通配符 % 以允许来自任何主机的连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:13:46.103

检查您的托管服务是否允许从其网络外部连接到其数据库服务器。默认情况下，某些托管公司（例如 GoDaddy）不允许这样做。

此外，您需要通过首选的数据库管理工具创建数据库用户并为其分配权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T16:24:56.203

重置mysql用户密码，然后重试

[http://dev.mysql.com/doc/refman/5.1/en/resetting-permissions.html](http://dev.mysql.com/doc/refman/5.1/en/resetting-permissions.html)*

# webview - 在 Dropbox 登录时强制移动 UI

> ID：13936902
> 
> 赞同：0
> 
> 时间：2012-12-18T16:04:23.637
> 
> 标签：webview, dropbox, dropbox-api

我正在为某个第二层移动平台实现 Dropbox API。用户需要通过 Web 界面登录 Dropbox；`https://www.dropbox.com/1/oauth/authorize`根据[文档](https://www.dropbox.com/developers/reference/api#authorize)，我创建了一个 web 视图并使其导航到。用户界面看起来像一个桌面网页 - 有很多图片绒毛，而且无可救药地缩小了。

另一方面，在 iOS 和 Android 上，登录页面看起来非常适合移动设备。

问题 - 有没有办法像 iOS 和 Android API 那样显式调用移动登录页面？替代 URL、自定义标头、用户代理字符串？

我的浏览器控件是 WebKit 派生的 - 它应该理解 CSS 媒体查询和`<meta viewport>`. 但是好像没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:24:23.070

您可以添加 ?display=mobile 以强制移动版本。

# asp.net-mvc - 没有 global.asax 的 ASP.NET 网页路由如何工作

> ID：13936909
> 
> 赞同：2
> 
> 时间：2012-12-18T16:04:44.870
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-webpages

安装了 ASP.Net 4.0 的 Web 服务器，部署了 Web Pages 2.0 DLLs bin。用 cshtml/razor 编写的页面，但路由不起作用。

当仅使用网页而不是完整的 MVC（我将在 global.asax 中定义我的路由）时，服务器上需要什么来激活路由？

现在我只能使用传统的 URL 和查询字符串来调用我的页面。

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:16:22.507

**Web Forms application**

**Global.asax**

```
protected void Application_Start(object sender, EventArgs e)
{
    RegisterRoutes(RouteTable.Routes);
}

public static void RegisterRoutes(RouteCollection routes)
{
    routes.MapPageRoute("",
        "Category/{action}/{categoryName}",
        "~/categoriespage.aspx");
} 
```

**MVC application**

**Global.asax**

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default",                                              // Route name
            "{controller}/{action}/{id}",                           // URL with parameters
            new { controller = "Home", action = "Index", id = "" }  // Parameter defaults
        );

    }

    protected void Application_Start()
    {
        RegisterRoutes(RouteTable.Routes);
    }
} 
```

For more information :

[**How to: Use Routing with Web Forms**](http://msdn.microsoft.com/en-us/library/cc668202.aspx)

[**ASP.NET Routing not working on IIS 7.0**](http://www.west-wind.com/weblog/posts/2011/Mar/27/ASPNET-Routing-not-working-on-IIS-70)

[**Deploying ASP.NET MVC 3 to IIS 6**](http://www.codefrenzy.net/2011/10/19/deploying-asp-net-mvc-3-to-iis-6/)

[**IIS URL Rewriting and ASP.NET Routing**](http://www.iis.net/learn/extensions/url-rewrite-module/iis-url-rewriting-and-aspnet-routing)

[**ASP.NET Routing**](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx)

I hope this will help to you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T10:40:11.667

Web Pages 框架中有两种可用的“路由”。默认路由适用于将 URL 与文件路径匹配。它非常灵活，因为它允许填充`UrlData`字典的附加 URL 段，并且可以启用一些对 SEO 友好的 URL 构造。我在这里写过：[WebMatrix - URLs, UrlData and Routing for SEO](http://www.mikesdotnetting.com/Article/165/WebMatrix-URLs-UrlData-and-Routing-for-SEO)。

第二种路由，类似于 MVC 中可用的路由，需要安装一个包：[Routing For Web Pages](http://nuget.org/packages/WebPageRouteHandler)。一旦你安装了这个，你可以`RouteCollection`在一个 _AppStart.cshtml 文件（你需要自己创建）中填充你的文件，或者你可以`Application_Start`在 global.asax 中这样做。当您选择添加文件时，您可以通过在选择文件类型对话框中选择全部选项来添加 global.asax 文件。

如果你想知道如何使用 Routing 包，我也写过：[更灵活的 ASP.NET 网页路由](http://www.mikesdotnetting.com/Article/187/More-Flexible-Routing-For-ASP.NET-Web-Pages)

# java - JMS 队列上多线程消息处理的最佳实践

> ID：13936914
> 
> 赞同：6
> 
> 时间：2012-12-18T16:05:13.460
> 
> 标签：java, queue, jms, message-listener

我目前正在将 JMS 支持添加到类似应用程序服务器的框架中。JMS 将由 HornetQ（独立代理，服务器类路径上的 hornetq jars）实现，但既没有 JBoss，也没有 spring，也没有任何其他可以提供 MDB 的东西。

下一步是将消息侦听器添加到允许并行处理传入消息的 xa 队列。一些消息会启动长时间运行的任务，所以基本思想是从`onMessage`方法中产生工作线程。

在我漫长的互联网之旅中，我遇到了[这个讨论](https://community.jboss.org/message/594586#594586)，其中一位参与者提到，他不会这样做，而是使用一个额外的内部队列来完成任务：（单线程）消息监听器然后会简单地从入站队列并为内部队列创建新消息，在该内部队列的另一端，一些工作线程争夺传入消息。一旦入站消息被“复制”到内部队列（这对我来说没问题），它们就会被确认。

不幸的是，他们没有说明*为什么*最好不要从该`onMessage`方法中产生工作线程 - 也许是因为如果池中的所有线程都忙，侦听器会阻塞。所以我正在寻找设计决策的利弊：

*   从消息监听器的 onMessage 方法启动工作线程
*   使用内部队列“向工作线程发送消息”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:07:40.237

撇开事务限制不谈，是否有多个线程（或进程）从队列中读取简单归结为消息顺序是否重要。显然，如果顺序很重要，那么单个线程自然会维护该顺序，而多个线程将不提供这样的保证。

您通常会发现，顺序很重要，但在所有消息的子集中。在这种情况下，如果单个线程不高效，您需要将这些消息从队列中取出并在尽可能短的时间内重新排队，因为为了保持顺序，您必须使用从初始值读取的单个线程queue - 因此使用一个或多个内部队列。这导致的问题是事务将在消息完全处理之前关闭，因此您需要某种临时存储来确保如果在处理发生之前进程发生故障，消息不会被丢弃。

如果正如您的问题所暗示的那样，您不太担心丢弃消息，那么`java.util.concurrent.BlockingQueue`听起来就像您需要的内部队列有一个单独的线程为每个队列提供服务。

# c# - C# Web 应用程序智能卡身份验证

> ID：13936915
> 
> 赞同：1
> 
> 时间：2012-12-18T16:05:16.100
> 
> 标签：c#, authentication, iis-7, smartcard

我有一个 C# Web 应用程序 (IIS 7.0)，并且我在网站上设置了智能卡身份验证。用户需要拥有与其帐户相关联的客户证书，以便他们登录。现在我想更进一步，或者在网站上闲置 15 分钟后，或者如果用户注销，我希望网站重定向到注销状态和专门设计为注销页面的页面。这一切都很好，现在是棘手的部分。

现在，如果用户在退出页面并想再次登录，他们必须选择一个链接再次登录，我希望 IIS 要求用户再次选择他们的证书并输入他们的密码（智能卡），如何强制 IIS 执行此操作？我想在注销的页面上我需要以某种方式转储用户证书，以便当用户登录（default.aspx）时系统会要求他们提供证书，但我不知道该怎么做，这可能吗?

# java - Java：如何在位置更改时显示/隐藏 Web 应用程序中的工作指示器？

> ID：13936919
> 
> 赞同：2
> 
> 时间：2012-12-18T16:05:23.617
> 
> 标签：java, gwt, web-applications

我正在寻找一种在我的 Web 应用程序中显示和隐藏工作指示器的方法。我将 GWT 与模型视图演示者模式一起使用，并为我的不同页面和活动（它们是我的演示者对象）提供了位置。

到目前为止我尝试了什么：

视图对象必须实现

```
public interface HasWorkingIndicator 

void showWorkingIndicator(boolean show); 
```

Activity 对象在 start 方法中调用其视图对象上的 showWorkingIndicator。

```
 @Override
     public void start(final AcceptsOneWidget panel, EventBus eventBus){
         page.showWorkingIndicator(true);
         //more code...
     } 
```

那么隐藏 WorkingIndicatorView 的最佳方法是什么？我不能在 start() 的末尾调用 showWorkingIndicator(false)，因为当时没有设置页面。也许有什么模式可以看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:59:03.777

这取决于您想要显示指标的方式/地点/时间。

如果目标是在活动的位置显示它，那么您有两个选择：在视图中处理它，或者对传递给活动的调用`setWidget`两次：一次使用*等待指示器*小部件，然后使用真实活动的视图. 如果你能保证给定的*显示区域*总是有一个活动，那么你也可以在实现中烘焙它：当用 a 调用时你会显示等待指示器（类似的技巧是使用who返回而不是 a活动中的*等待指示器*小部件）。`AcceptsOnWidget``start()` **`AcceptsOneWidget``setWidget``null``IsWidget``asWidget``null`*`start`***

 ***但是，如果您可以使用全局指示器，那么您可以使用一个`NotificationMole`或类似的小部件，并根据挂起的 RPC/RequestFactory 调用和/或您将从活动在事件总线上调度的事件触发其显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:39:19.737

如果您正在使用活动，这将成为一项非常容易完成的任务。

我有一个实现 Activity 的 AbstractActity，它处理我的 clientfactory 和父面板之类的事情。

Activity 接口实现了 mayStop()、onStop 和 onStart 等。

```
public class WorkingIndicator extends Composite {

    private static WorkingIndicator instance = null;

    private WorkingIndicator(){
       initWidget(new Label("Working"));
    }

    public static WorkingIndicator getInstance() {
       if (instance == null) {
          instance = new WorkingIndicator();
      }
      return instance;

    }

    public void show() {
        RootLayoutPanel.get().add(this);
    }

    public void hide() {
        RootLayoutPanel.get().remove(this);
    }

} 
```

活动看起来像这样。

```
public abstract class AbstractActivity<T extends ApplicationPlace, V extends View> implements Activity {

    protected ClientFactory clientFactory;
    protected EventBus eventBus;
    protected AcceptsOneWidget parentPanel;
    protected final T place;
    protected final V display;

    protected final List<HandlerRegistration> handlers = new ArrayList<HandlerRegistration>();

    public AbstractActivity(T place, ClientFactory clientFactory, V display) {
        this.place = place;
        this.clientFactory = clientFactory;
        this.display = display;
    }

    protected void setEventBus(EventBus eventBus) {
        this.eventBus = eventBus;
    }

    protected EventBus getEventBus() {
        return this.eventBus;
    }

    @Override
    public void start(AcceptsOneWidget parentPanel, EventBus eventBus) {
        this.parentPanel = parentPanel;
        this.eventBus = eventBus;

        parentPanel.setWidget(display.asWidget());
        bindToView();
        WorkingIndicator.getInstance().hide();
    }

    public AcceptsOneWidget getParentPanel() {
        return parentPanel;
    }

    public T getPlace() {
        return place;
    }

    public V getDisplay() {
        return display;
    }

    public ClientFactory getClientFactory() {
        return clientFactory;
    }

    /**
     * Shortcut getter for the CSS style in Resources.
     *
     * @return
     */
    public Style style() {
        return clientFactory.getResources().style();
    }

    @Override
    public String mayStop() {
        return null;
    }

    @Override
    public void onCancel() {
    }

    @Override
    public void onStop() {
      cleanup();
      display.reset();
      WorkingIndicator.getInstance().show();
    }

  protected void addHandler(HandlerRegistration registration) {
    handlers.add(registration);
  }

    public List<HandlerRegistration> getHandlers() {
        return handlers;
    }

    protected void cleanup() {
        for (HandlerRegistration handler : handlers) {
            handler.removeHandler();
        }
    }

    /**
     * This function will be called immediately after adding the view to the
     * DOM. This function should be used to hook up click handlers, populate
     * HasData handlers and such.
     */
    protected abstract void bindToView();

    protected DaoRequestFactory daoRequestFactory() {
        return clientFactory.daoRequestFactory();
    }

    protected AnalyticsTaskRequest analyticsTaskRequest() {
        return clientFactory.daoRequestFactory().analyticsTaskRequest();
    }

    protected EventBus eventBus() {
        return clientFactory.getEventBus();
    }

    protected PersonProxy currentPerson() {
        return clientFactory.getCurrentPerson();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T22:04:50.053

地方立即改变。我假设您想在 (A) 首次构建视图时显示指示器，或者 (B) 在显示视图之前等待数据从服务器到达。

在任何一种情况下，您都需要在视图中添加一个标志，例如 isInitialized()，以告知 Activity 是否需要执行某些操作来构建视图（例如创建 DataGrid、填充树等），或者视图具有之前已经建好了，所以这一步可以跳过。

当您的活动开始时，检查视图是否已初始化。如果没有，请显示加载指示器。我推荐一个简单的 PopupPanel，它启用了玻璃来阻挡 UI。当活动完成构建视图/加载数据时，它应该在视图中设置标志（例如 setInitialize()），然后隐藏此弹出面板。***

# com - regsrv32：在注册 COM 对象的更新之前，我是否需要取消注册它？

> ID：13936920
> 
> 赞同：1
> 
> 时间：2012-12-18T16:05:37.363
> 
> 标签：com

我不时发布我在客户端机器上注册的 COM 对象的更新。

**关于注册表的菜鸟问题：**

每次我在新的随机 GUID 下使用相同的命名空间和对象名称注册这些更新时，发生了什么？对象是否被替换？以前的对象版本还在吗？我需要注销以前的版本吗？是否可以取消注册原始 GUID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:43:22.543

您需要的注册取决于您选择更新 COM 对象的方法。最简单的方法是更新现有对象，在这种情况下，您可以完整地保留 CLSID 和对象，并可能使用新方法和接口进行扩展。在这种情况下，您基本上不需要取消注册，但是您可能会遇到这样的情况：您正在停用某些 COM 类并且如果不取消注册它，您会将其注册留在注册表中作为孤立的垃圾。

取消注册被替换的模块，然后在安装新模块后注册它会更安全。或者，您的新 COM 库可以在内部处理升级并明确删除已停用的注册（与普通取消注册旧版本相比，它更复杂且通常不必要）。如果您有任何持久状态，注销/重新注册周期可能会删除一些持久状态，并且注销会清除它们。

如果您希望您的版本在目标系统中并排运行，您可能希望使用另一种方法。在这种情况下，您将为所有/某些类使用新的 CLSID、不同的（尤其是版本化的）ProgID 和版本无关的 ProgID，以便应用程序绑定到“当前”或已安装的最新版本的类。

# python - Python 在 Ruby 中的枚举？

> ID：13936922
> 
> 赞同：25
> 
> 时间：2012-12-18T16:05:42.153
> 
> 标签：python, ruby, arrays, enumerate

```
def enumerate(arr):
    (0..arr.length - 1).to_a.zip(arr) 
```

有什么内置的吗？它不需要让它的成员不可变，它只需要在标准库中。我不想成为继承 Array 类以向项目添加 Python 功能的人。

它在 Ruby 中有不同的名称吗？

```
%w(a b c).enumerate
=> [[0, "a"], [1, "b"], [2, "c"], [3, "d"]] 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-18T16:10:13.307

在 Python 中是这样的：

```
a = ['do', 're', 'mi', 'fa']
for i, s in enumerate(a):
    print('%s at index %d' % (s, i)) 
```

在 Ruby 中变成这样：

```
a = %w(do re mi fa)
a.each_with_index do |s,i|
    puts "#{s} at index #{i}"
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-18T16:08:49.870

假设它是用于枚举，[`each_with_index`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_index)可以做到这一点。或者，如果您有`Enumerator`，只需使用[`with_index`](http://ruby-doc.org/core-1.9.3/Enumerator.html#method-i-with_index).

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-18T16:18:46.030

也许更快的解决方案是：

```
%w(a b c).map.with_index {|x, i| [i, x] } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-20T15:20:21.520

一个有趣的！

```
a = %w(do re mi fa)
a.length.times.zip a 
```

# css - CSS - 相对元素内的固定元素：定位错误？

> ID：13936927
> 
> 赞同：0
> 
> 时间：2012-12-18T16:05:54.083
> 
> 标签：css, google-chrome, firefox

我遇到了一个非常奇怪的配置问题。

工作情况：

我设置了一个基本的容器/内容，容器填满了整个主体，内容固定`width`在中间，位置为`margin: auto`.

在此内容中，我有一个`links-container`元素，其中包含一个`link`包含我的链接的元素。

这个`links-container`元素是`position: fixed`。并且带有偏移量：`link`使链接看起来在容器之外。`position: relative``right: 'size'`

漏洞 ：

对于某些页面，我需要内容向右滑动 : `left: 50px`。
但出于某种原因，在 Firefox 上，链接将保持在内容附近，而在 Chrome 上，它们将保持在同一个位置。

您可以在[此处](http://cssdesk.com/TfQqF)查看错误，以及下面的代码。

这是一个错误，还是我错过了什么？

HTML：

```
<div class='container'>
  <div class='content'>
    <div class='links-container'>
      <div class='links'>
      </div>
    </div>
  </div>
</div> 
```

CSS：

```
body {
  padding: 100px;
}

.container {
  width: 100%;
  height: 100%;
}

.content {
  width: 500px;
  height: 300px;
  background: red;
  position: relative;
  margin: auto;
  background: red;
  left: 50px;
}

.links-container {
  position: fixed;
}

.links {
  position: relative;
  background: yellow;
  width: 50px;
  height: 50px;
  right: 50px;
} 
```

# ios - 使用界面生成器真的是一种不好的做法吗？

> ID：13936928
> 
> 赞同：7
> 
> 时间：2012-12-18T16:05:54.863
> 
> 标签：ios, interface-builder

我开始在一家新公司开发 ios。在这里他们教我永远不要使用 iterface-builder，说它很难维护代码并且有一些限制。

在 netbeans 中使用 java 应用程序的接口构建我看到很多“错误代码”，但我没有看到它使用 IB，此外我在互联网上看到很多 IB 代码，只有少数代码没有它。

那么对于一个没有人是 ios 开发初学者的大公司来说，使用 IB 是一种不好的做法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T16:20:36.200

（让我提前提一下，我强烈反对使用 Interface Builder，原因有很多，我会解释）

> 在这里，他们教我永远不要使用 Interface Builder，说它很难维护代码并且有一些限制。

这只是部分正确。我一般不喜欢 Interface Builder 和 Xcode 的主要原因是**许多**初学者程序员认为这是开发 iOS/OS X 应用程序的唯一方法。他们从未听说过`gcc`and `clang`，他们不知道编译器和链接器错误消息是什么意思，他们无法使用`make`，他们不知道 Objective-C 语言、Cocoa (Touch) API 之间的区别是什么， IDE和编译器是。

毕竟，他们开始使用 Interface Builder 和 Xcode 及其所有古怪的，有时甚至是奇怪/不合逻辑的功能（以及错误），但是当他们需要开发一些不明显的东西时，他们甚至没有意识到那里是一种方法，例如，以编程方式创建视图和视图控制器（是的，我在 StackOverflow 上看到过这个问题）。

因此，当被滥用（或者更确切地说，使用得太早）时，Interface Builder 和所有“方便”的特性会导致程序员学习糟糕的概念并错过一些重要的实践和经验。

**但是，如果您是一名高级开发人员，**拥有所有必要的技能，并且您认为您可以使用简单的文本编辑器和 Makefile 从头开始​​编写整个应用程序，那么您绝对可以使用 IB，如果您觉得这比编写代码更舒服，甚至鼓励您这样做。

所以，总结一下：

> 使用界面生成器真的是一种不好的做法吗？

不。宁可滥用它而不努力学习 UI 的编程方法是不好的做法。

后记：我在 iOS 开发方面有相当多的经验，但我仍然发现 Interface Builder 相当不方便且不一致。我通常对所有事情都使用代码。但这似乎是我个人的喜好。然而，一个优势是，如果一个人通过代码创建所有内容，那么另一个无法访问这些 Apple 特定工具的程序员也将能够为该项目做出贡献。这是“难以维护”部分成为现实的一点......

例如，在我没有足够的钱购买 Mac 之前，我使用 Linux 来开发 iOS 应用程序（[是的，这实际上是可能的](https://github.com/H2CO3/xchain-ios)）。我不能使用 IB 和 Xcode，但我已经完成了大量的应用程序和调整（当然是针对越狱的 iOS），这很好。

Post scriptum #2：避免使用 IB 的另一个原因可能是需要动态 UI。如果您严重依赖动画、自定义 UI 元素等，则很难在 Interface Builder 中完成所有工作。去年夏天，我不得不重写一个应用程序的登录屏幕，老实说，如果我不得不使用 Interface Builder，我不知道我怎么能实现我们设计师的想法。UI/UX 是如此的动态，它有很多方法可以改变，因此绝对有必要对每个像素进行精细控制。这就是代码比 IB 更擅长的事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T16:09:46.657

我强烈不同意 IB 是一种不好的做法。与代码相比，Interface Builder 具有以下优点：

*   当使用复杂（甚至简单）的图形界面时，**IB 将代码缩减到一小部分**——例如，在 IB 中简单地创建一个按钮需要几秒钟，而在代码中，这会转化为几十行，尤其是如果按钮要设置样式

*   使用自动调整大小的蒙版来**支持多种分辨率和设备是一件轻而易举的**事——这很重要，因为 Apple 现在正在推动与分辨率无关的应用程序

*   更改/调整视图属性**只需单击几下**而不是几行代码，尤其是在处理图像时

但是，有一个缺点（我想到了）：

*   很难**确定**可能导致图形问题的原因，因为它将隐藏在 IB 文件中而不是代码中

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T17:48:37.513

已经说了很多，但我仍然会为这次讨论付出我的 2 美分......

直到某个时候我同意[H2CO3](https://stackoverflow.com/users/529758/h2co3)，最好了解幕后发生的事情，而不是继续使用快捷方式来实现某些目标。这在大多数情况下都有效，这就是我强烈反对[H2CO3](https://stackoverflow.com/users/529758/h2co3)的地方，如下：

*   大多数使用技术（C#、Java、HTML、iOS 等）的人，他们使用它是因为他们的公司需要他们使用它，因为实际上其他人会付钱让你使用它。并不是因为你真的在半夜醒来，突然有学习 C 的冲动。

*   如果明天有人要求你创建一个 iOS 应用程序，而你以前从未为 iOS 开发过，我真的怀疑你会在不使用 XIB 或 Storyboards 的情况下从头开始创建一个应用程序（我讨厌顺便说一句）。

H2CO3 提出的是一个乌托邦......你真正了解下面发生的事情，但因为你是这样一个“leet”，你可以使用捷径，比如 XIB。好吧，事情不是这样的，迟早你将不得不做一些糟糕的事情来在第二天早上交付一些东西。

我更喜欢，这是个人观点，使用 XIB，而不是使用我面前的第一个 3rd 方库。而且我认为这比手工制作界面更合理。我更喜欢理解代码并自己完成，而不是使用例如库来帮助我下载/上传东西。

总结一下，**我对提出这个问题的人的建议是：**

试着去理解为什么事情是这样完成的。最重要的是，在你面临的每个新项目中努力成为一个更好的程序员。如果有新的东西出现（新的 iOS 版本），花一两天时间看看有什么新东西，你可以使用什么。XIB 非常好用，但要花一些时间`UIView's`手工创建，这样您就可以看到它们给您的所有灵活性。最重要的是，远离故事板（^^）

**PS：**资深开发者不只是一个“功夫比你好”的人..还不止这些。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-18T16:10:46.410

绝对不。Interface Builder 是一种非常强大的快速创建 UI 的方法。尤其是 Storyboards，它可以让你用很少的代码制作功能性的应用程序。

它“创建错误代码”的问题是垃圾，因为 IB 不创建任何代码。它创建的文件本质上是补充您编写的代码的 XML 文件。

我开发的大多数应用程序大多是在 IB 上开始的。

显然，你不能做你的应用程序的功能性东西。即，您无法准确地告诉按钮该做什么。但是您可以将它指向您编写的函数并获得一个几乎没有代码的工作按钮。

iPad 和 iPhone 上 iPhoto 中的大部分 UI 都是用 Interface Builder 编写的。

# javascript - 让用户跳到点击箭头的视频

> ID：13936937
> 
> 赞同：0
> 
> 时间：2012-12-18T16:06:21.577
> 
> 标签：javascript, youtube-api, dom-events

我的目的是让用户跳到在此**[演示上单击红色箭头的视频](http://jsfiddle.net/CDNm3/3/)**

我已经尝试过功能`ytplayer_render_playlist( )`，但它没有用。我应该在演示上做些什么改变来跳过点击了红色箭头的视频？

```
 function ytplayer_render_playlist( )
  {
    for ( var i = 0; i < ytplayer_playlist.length; i++ )
    {
      var a = getElementById("trackArrow");
      a.onclick = (
        function( j )
        {
          return function( )
          {
            ytplayer_playitem = j;
            ytplayer_playlazy( 1000 );
          };
        }
      )( i );

    }
  } 
```

# sql - MS-Access 根据日期自动输入信息

> ID：13936938
> 
> 赞同：1
> 
> 时间：2012-12-18T16:06:25.650
> 
> 标签：sql, ms-access-2003

我有一个计算员工周年日期的查询。我希望该查询根据当前日期为我的表生成一个条目事件。当他们的周年纪念日到来时，基本上会自动生成周年假期累积。这是我的桌子的一个例子。

```
Table name "SchedulingLog"
LogID "PrimaryKey AutoNbr"
UserID "Employee specific"
LogDate
EventDate
Category "ex Vacation, Anniversary..."
CatDetail "ex. Vacation Day Used, Anniversary..."
Value "ex. -1, 1..." 
```

我的查询

```
Query Name "qry_YOS"
UserID "Employee Specific"
DOH "Employee hire date"
YearsOfService "calculated Field"
Annual "calculated Field"
Schedule "Employee Specific"
Annual Vac Days "calculated field"
Anniversary "calculated Field" 
```

查询关联SQL

```
INSERT INTO schedulinglog
            (userid,
             [value],
             eventdate,
             logdate,
             category,
             catdetail)
SELECT roster.userid,
       [annual] * [schedule]                                      AS [Value],
       Month([wm doh]) & "/" & Day([wm doh]) & "/" & Year(DATE()) AS EventDate,
       DATE()                                                     AS LogDate,
       category.[category name]                                   AS Category,
       catdetail.catdetail
FROM   roster,
       tblaccrual,
       category
       INNER JOIN catdetail
               ON category.categoryid = catdetail.categoryid
WHERE  (( ( [tblaccrual] ! [years] ) < Round(( DATE() - [wm doh] ) / 365, 2) ))
GROUP  BY roster.userid,
          roster.[wm doh],
          Round(( DATE() - [wm doh] ) / 365, 2),
          roster.schedule,
          Month([wm doh]) & "/" & Day([wm doh]) & "/" & Year(DATE()),
          DATE(),
          category.[category name],
          catdetail.catdetail
HAVING ( ( ( category.[category name] ) LIKE "vacation*" )
         AND ( ( catdetail.catdetail ) LIKE "anniversary*" ) ); 
```

我知道有可能我只是不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:02:26.720

使用查询设计窗口，将保存的查询添加到网格并从工具栏中选择追加。选择要添加结果的表，您最终会得到类似的结果：

```
 INSERT INTO Table1 ( AText2, ANumber ) 
 SELECT Query1.AText2, Query1.Total 
 FROM Query1; 
```

您可以触发查询以在事件上运行或要求用户单击按钮。

# button - 垂直显示jquery对话框按钮

> ID：13936939
> 
> 赞同：1
> 
> 时间：2012-12-18T16:06:30.717
> 
> 标签：button, jquery-ui-dialog

我正在尝试显示一个带有两个垂直显示的按钮的 Jquery.dialog，因为我正在执行移动视图。我该怎么做？

```
 $('#divPopUpTiempoEspera').dialog({
        minHeight: 'auto',
        autoOpen: false,
        resizable: false,
        width:'260px',
        modal: true,
        buttons: {
            "Inicio": function() {
               //something
                $('#divPopUpTiempoEspera').dialog('close');
            },
            "Misma búsqueda": function() {
                //something
                $('#divPopUpTiempoEspera').dialog('close');
            }
        }
    }); 
```

# transactions - SQLite 可以让你在一个事务中放置多个查询，但是为什么当 1 与另一个有 fK_relation 时它会发疯呢？

> ID：13936941
> 
> 赞同：0
> 
> 时间：2012-12-18T16:06:34.447
> 
> 标签：transactions, sqlite

我有 2 个要执行的查询。

```
delete from song where ast_id = 1;
delete from artist where ast_id = 1; 
```

与 2 有关系。 1 有一个引用另一个的 FK。

我认为查询将一起执行，但我认为如果以正确的顺序执行，将删除艺术家的歌曲，然后是艺术家自己。此情况并非如此。

我最终通过将其分解为 2 个事务来解决它，但是有没有办法让它只保留 1 个？

我正在做一些事情：

```
string query("delete from song where ast_id = 1; delete from artist where ast_id = 1;");
sqlite3_exec(db, query.c_str(),...); 
```

你可以在上面的 1 笔交易中做到吗/？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:06:18.843

如前所述，一种方法是启动事务（与命令不同）、添加查询并提交。

（注意这是伪代码，我不确定你使用的是什么平台）

```
sqlite3_exec(db, "begin;");
sqlite3_exec(db, "delete from song where ast_id = 1;");
sqlite3_exec(db, "delete from artist where ast_id = 1;");
sqlite3_exec(db, "commit;"); 
```

但是使用外键的方法是首先确保启用外键。

您可以检查它们是否启用：

```
PRAGMA foreign_keys; 
```

或者只是打开它们：

```
PRAGMA foreign_keys = ON; 
```

对于您的 Song 表，您的参考必须正确形成，您必须说出您想在删除时执行的操作：

```
Create Table Song
(
  Song_Id Integer Primary Key,
  ...
  Ast_Id Integer,
  Foreign Key (Ast_Id) References Artist(Ast_Id) ON DELETE CASCADE
); 
```

然后，只需删除艺术家，歌曲就会随之而来。

# javascript - 除了选项之外，如何为 html 组合框赋值？

> ID：13936943
> 
> 赞同：0
> 
> 时间：2012-12-18T16:06:34.743
> 
> 标签：javascript, jquery, html, css

我在我的代码中使用了选择标签，我想动态地为该下拉列表分配值，但我想将该值分配给分配给该选择标签的其他表单选项

例如，如果我有：

```
<select id="city" name="city">
<option value"Solapur">Solapur</options>
<option value"Pune">Pune</options>
<option value"Delhi">Delhi</options>
<option value"Mumbai">Mumbai</options>
</select> 
```

在 jQuery 的帮助下，我想为组合框分配值，而不是刚刚超过四个。

例如。我想将城市指定为“Kolhapur”，这不在选项中。

可以通过 jQuery 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:08:32.307

只需创建一个新选项并使用多种 DOM 插入方法之一将其插入，具体取决于您要插入的位置：

```
var new_option = $('<option />', {value: 'Kolhapur', text: 'Kolhapur'});

$('#city').append(new_option); 
```

或者，如果您只想更改现有选项之一：

```
$('#city').find('option[value="Pune"]').val('Kolhapur').text('Kolhapur'); 
```

# sql - TYPO3 Extbase：操作数应包含 1 列：

> ID：13936944
> 
> 赞同：0
> 
> 时间：2012-12-18T16:06:41.097
> 
> 标签：sql, typo3, extbase, operand

我想向控制器中的数据库添加（）一条消息。到目前为止有效。

我有一个名为“message_tags”的列，我在其中保存了一个数组。

数组是：

```
array(5 items)
0 => 'dfsdfsd' (7 chars)
1 => 'dsfsdf' (6 chars)
2 => 'sdfdsf' (6 chars)
3 => 'asd' (3 chars)
4 => 'google' (6 chars) 
```

现在，TYPO3 给我一个错误：

```
Operand should contain 1 column(s): UPDATE   
tx_xxx_domain_model_message SET message_text='dfdsfsdf', 
message_tags=('dfsdfsd','dsfsdf','sdfdsf','asd','google'), mobile_os=('android'), 
tstamp='1355846301', sys_language_uid=NULL WHERE uid='73' 
```

该数组是在我的控制器中构造的（我知道这与良好的编码相去甚远）：

```
foreach($messageTagsArray as $key => $value) {
              $mergedTagArrayValues[] = $value;
            }
            foreach($storedTagsList as $key => $value) {
              $storedTagsListValues[] = $value;
            }
            $mergedTagArray = array_merge($mergedTagArrayValues, $storedTagsListValues);
            $mergedTagArray = array_unique($mergedTagArray);

            $message->setMessageTags($mergedTagArray); 
```

那是一个错误吗？

谢谢你的帮助！

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:15:33.733

TYPO3 显然正在尝试将您的数组用作查询的一部分，但失败了。

最快的解决方法是在 ( ) 中序列化数组并在`setter`( `setMessageTags($array)`) 中反序列化，在这种情况下，Extbase 会将其保存为字符串，但是您无需任何额外步骤即可使用数组。`getter``getMessageTags()`

# asp.net - 使用 wkhtmltopdf 生成阿拉伯语 PDF

> ID：13936954
> 
> 赞同：0
> 
> 时间：2012-12-18T16:06:54.230
> 
> 标签：asp.net, c#-4.0, pdf-generation, arabic, wkhtmltopdf

使用 wkhtmltopdf 和 C# 生成阿拉伯语 PDF 时遇到问题。

下面是我的代码作为示例

```
 string HTML = "مرحبا";
            Encoding utf = Encoding.GetEncoding("UTF-8");
            Encoding unicode = Encoding.UTF8;
            byte[] unicodeBytes = unicode.GetBytes(HTML);
            HTML = utf.GetString(unicodeBytes); 
```

结果是？？？？？？在 pdf 中，我尝试`'-q -n --encoding UTF-8'` 了 wkhtmltopdf 的参数，甚至没有成功。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T18:04:44.030

您的 HTML 字符串应具有正确的字符集和 Content-Type：

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:38:15.987

我设法通过创建临时 HTML 输入文件并将其发送到 wkhtmltopdf 引擎来呈现阿拉伯字符的唯一方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T05:01:00.533

```
<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<body>
       مرحبا
</body>
</html>
```

它与我在 C# 中的 wkhtmltopdf 0.12.1中运行良好，
只需将 HTML 字符串保存在临时 html 文件中，然后运行 ​​wkhtmltopdf 命令
，然后删除临时 html 文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T16:20:08.110

我建议您查看一些阿拉伯语网站并尝试使用 pdfcrowd 或 htm2pdf.co.uk 进行转换——它们都使用 wkhtmltopdf 并且只将页面作为输入。

该页面中的任何内容（因此该字符串的格式）就是您传递给 wkhtmltopdf 的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-08T08:09:00.793

这可能对其他人有帮助。

我正在使用我的服务器上未安装的阿拉伯语自定义字体。

必须安装它（+ 使用编码 utf-8），然后它才能工作..

# marionette - Marionette 的 bindTo 和 Backbone 的一次

> ID：13936955
> 
> 赞同：0
> 
> 时间：2012-12-18T16:06:57.170
> 
> 标签：marionette

是否有类似于 Backbone.Events.once 的 Marionette Eventbinder？类似“bindToOnce”的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:49:14.627

不，而且很可能不会。Marionette 的 EventBinder 将在不久的将来的某个时候被 Backbone.Events 取代。

但是，您可以通过这样做来完成同样的事情：

`foo.bindTo(bar, "baz", _.once(myFunction));`

# ios - 创建一个带有一些按钮的图层？

> ID：13936958
> 
> 赞同：0
> 
> 时间：2012-12-18T16:07:08.310
> 
> 标签：ios, uibutton, calayer

我有一个 UIImageView 全屏，上面有按钮。这些按钮在按下时应该打开一个带有按钮的较大图像。一个按钮打开站点，另一个按钮关闭图像。我考虑过使用图层来显示图像，但即使按钮有效，也没有任何结果。

```
 - (void)viewDidLoad
  {
       [super viewDidLoad];
        self.bigImageView= [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"SBS_visual_ok.jpg"]];
        self.bigImageView.frame = self.view.bounds;
        //....

        self.buttonInternational =[UIButton buttonWithType:UIButtonTypeRoundedRect];
        [self.buttonInternational addTarget:self action:@selector(pressedInternational:) forControlEvents:UIControlEventTouchUpInside];
        self.buttonInternational.frame = CGRectMake (100, 100, 100, 100);
        //...

        [self.view addSubview:self.bigImageView];
        [self.bigImageView addSubview:self.buttonInternational];
  } 
```

按下按钮 我想用一些按钮拍张照片，但连图像都没有出来。我已经进口了

```
 -(void)pressedInternational:(id)sender{

     CALayer *layer =[CALayer layer];
     layer.frame = CGRectMake(300, 400, 300, 200);
     layer.contents =(id)[UIImage imageNamed:@"International_Security_Service.png"].CGImage;

     [[self.bigImageView layer]addSublayer:layer]; 
     NSLog(@"The layer is %@", layer);
     //The layer is <CALayer: 0x757ba30>

   } 
```

怎么穿上一层纽扣？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:26:06.573

你为什么要使用 CALayer？显示另一个 UIView 可能会更容易，它可以有图像、按钮等：

```
MyView *myView = [[MyView alloc] initWithFrame:CGRectMake(10.0, 10.0, 300.0, 300.0)];
[self.view addSubview:myView]; 
```

您可以轻松显示/隐藏

```
[self.myView setHidden:YES]; 
```

或推送一个新的视图控制器：

```
MyViewController *nextViewController = [[MyViewController alloc] init];
[self presentViewController:myViewController animated:YES completion:nil]; 
```

如有必要，您可以将动画应用于显示和删除其中任何一个。

# internet-explorer - IE 中的组合框问题

> ID：13936960
> 
> 赞同：1
> 
> 时间：2012-12-18T16:07:12.180
> 
> 标签：internet-explorer, extjs, combobox, extjs4.1

我正在使用 Sencha 4.1.2a，IE 9。

我正在将我公司的项目从 sencha 4.07 迁移到 sencha 4.1.2。

我现在面临组合框的意外问题。我们扩展了组合框以响应我们的需求。

首先它们真的很慢，但只在 IE 上（目前使用 9，但更改浏览器模式似乎没有任何效果......）。我无法在 Chrome 和 FF 中重现此问题。

其次，组合框上的前 n 个项目看起来没问题，像这样：

![在此处输入图像描述](../Images/bd77447f56a9b94cf4e16791b4eae0d4.png)

但是一旦我向下滚动就会发生这种情况：

![在此处输入图像描述](../Images/8903abc6085218815377dfde744ed4ba.png)

只有当我将鼠标悬停在项目上方时，项目才会“返回”到它们的位置。但只有那些首先渲染的，因为下面的其他项目永远不会渲染。然后我得到了这个：

![在此处输入图像描述](../Images/933583ef4c5362b4cad31af5311c11ce.png)

我认为这与最新版本的 sencha 中所做的一些更改有关（这意味着更改我们自己的代码），但它在其他 2 个浏览器中运行正常的事实似乎表明问题出在 IE 上。 .

关于为什么会发生这种情况的任何想法？

提前致谢！

**更新：**

我发现了问题。

它是具有 css3 属性的 css 类“x-boundlist-item”。

我现在的问题是如何防止/禁用 sencha 使用 CSS3（如果可能）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:46:18.147

Problem solved.

Check this thread [http://www.sencha.com/forum/showthread.php?205867](http://www.sencha.com/forum/showthread.php?205867)

# java - 如何在Android上按顺序运行java线程

> ID：13936969
> 
> 赞同：4
> 
> 时间：2012-12-18T16:08:12.047
> 
> 标签：java, android

我有七个声纳传感器，我的目标是在 Android 平板电脑上按顺序显示这些传感器值。

为了在平板电脑屏幕上动态显示传感器值，我使用了`Runnable`s.

但是，如果声纳传感器并行工作，则会导致声纳传感器之间产生干扰。因此，我需要让它们按顺序工作。

我的问题是：是否可以按顺序使用线程在 Android 平板电脑上显示传感器值？

尽管我使用了`join()`and `sleep()`，但传感器仍然相互干扰。当我尝试使用等待和通知时，应用程序会出现内存不足异常。我也尝试使用同步方法，但它并没有影响它。

下面你可以看到我的代码。

```
package com.dinning;

import android.widget.TextView;

public class Dinning implements Runnable 
{
    public Interfacekit diningkit;
    public TextView[] Rfidviews; 
    int count=1;

    public Dinning(Interfacekit diningkit,Rfid drfid1,Rfid drfid2, Rfid drfid3,Rfid drfid4,Rfid drfid5,Rfid drfid6,Rfid fsrfid1,Rfid fsrfid2,Rfid fsrfid3,final TextView[] Rfidviews)
    {
        this.diningkit = diningkit;
        this.Rfidviews = Rfidviews;
        new Thread(this).start();
    }

    public void run()       
    {
        while(count==1)
        {   
            if(diningkit.getattach()==true)
            {
                Thread t1 = new Thread(new Runnable() 
                {  
                    public void run() 
                    {
                        Rfidviews[11].post(new Runnable() 
                        {
                            public void run() 
                            {
                                {
                                    int sonar0 = diningkit.getsonar(7);
                                    if(sonar0!=0)
                                        Rfidviews[11].setText("Port0:"+sonar0);
                                    else
                                        Rfidviews[11].setText(" ");
                                }            
                            }
                        });
                    }
                });

                Thread t2 = new Thread(new Runnable() {  
                    public void run() {
                        Rfidviews[12].post(new Runnable() 
                        {
                            public void run() 
                            {
                                {
                                    int sonar1 = diningkit.getsonar(6);
                                    if(sonar1!=0)
                                        Rfidviews[12].setText("Port1:"+sonar1);
                                    else
                                        Rfidviews[12].setText(" ");
                                }            
                            }
                        });
                    }
                });

                Thread t3 = new Thread(new Runnable() 
                {  
                    public void run() 
                    {
                        Rfidviews[13].post(new Runnable() 
                        {
                            public void run() 
                            {
                                {
                                    int sonar2 = diningkit.getsonar(5);     
                                    if(sonar2!=0)
                                        fidviews[13].setText("Port2:"+sonar2);
                                    else
                                        Rfidviews[13].setText(" ");
                                }        
                            }
                        });
                    }       
                });

                t1.start();
                t2.start();
                t3.start();
            } 
        }//while        
    }           
}

 package com.dinning;

import android.app.Activity;
import android.content.Context;
import com.phidgets.InterfaceKitPhidget;
import com.phidgets.Phidget;
import com.phidgets.PhidgetException;
import com.phidgets.event.AttachEvent;
import com.phidgets.event.AttachListener;
import com.phidgets.event.DetachEvent;
import com.phidgets.event.DetachListener;
import com.phidgets.event.InputChangeEvent;
import com.phidgets.event.InputChangeListener;
import com.phidgets.event.SensorChangeEvent;
import com.phidgets.event.SensorChangeListener;

public class Interfacekit {

    int status=1;
    InterfaceKitPhidget ik;
    public boolean attach = false;
    public Phidget phidget;
    int value = 0;
    int index = 0;
    int serial;

    int value0,value1,value2,value3,value4,value5,value6,value7,valport;
    int sonarvalue0,sonarvalue1,sonarvalue2,sonarvalue3,sonarvalue4,sonarvalue5,sonarvalue6,sonarvalue7;
    int curVal;

    public Interfacekit(final Context con,final Activity act,int serial)
    {
        this.serial = serial;

        try
        {
            com.phidgets.usb.Manager.Initialize(con);
            ik = new InterfaceKitPhidget();

            ik.addAttachListener(new AttachListener() {
                public void attached(final AttachEvent ae)
                {
                    act.runOnUiThread(new Runnable() {

                        public void run() {
                            try{
                            attach=true;    

                            value0= ik.getSensorValue(0);
                            value1= ik.getSensorValue(1);
                            value2= ik.getSensorValue(2);
                            value3=ik.getSensorValue(3);
                            value4=ik.getSensorValue(4);
                            value5= ik.getSensorValue(5);
                            value6= ik.getSensorValue(6);
                            value7= ik.getSensorValue(7);

                            }catch(Exception e){}
                        }

                    });

                }
            });

            ik.addDetachListener(new DetachListener() {
                public void detached(final DetachEvent ae) {

                    attach = false;
                    phidget = ae.getSource();
                    act.runOnUiThread(new Runnable() {

                        public void run() {

                        }
                    });
                }
            });

            ik.addSensorChangeListener(new SensorChangeListener() {
                public void sensorChanged(SensorChangeEvent se) {  //final Sensorchangeevent

                    value = se.getValue();
                    index = se.getIndex();

                    try {

                        sonarvalue0=ik.getSensorValue(0);
                        sonarvalue1=ik.getSensorValue(1);
                        sonarvalue2=ik.getSensorValue(2);
                        sonarvalue3=ik.getSensorValue(3);
                        sonarvalue4=ik.getSensorValue(4);
                        sonarvalue5=ik.getSensorValue(5);
                        sonarvalue6=ik.getSensorValue(6);
                        sonarvalue7=ik.getSensorValue(7);

                    } catch (PhidgetException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                }

            });

            ik.addInputChangeListener(new InputChangeListener() {
                public void inputChanged(final InputChangeEvent ie) {

                }
            });
            ik.open(serial);

        }
        catch(Exception e){}
    }

        public boolean getattach()
        {

         return attach ;    
        }

        /* Sonar*/

        public int getsonar(int digitalOutput){

            int curVal,result = 0;

            if(5==digitalOutput){

                    try {
                        ik.setOutputState(digitalOutput, true);

                    } 
                    catch (PhidgetException e) {

                    e.printStackTrace();
                    }

                    curVal=(int) (1.296*sonarvalue2);

                    if(curVal>0 && curVal<60){
                        result=curVal;
                        System.out.println("Port2: "+result);
                    }
                    else if (curVal>60)
                        result=0;

            }

            else if(6==digitalOutput){

                try {
                    ik.setOutputState(digitalOutput, true);

                } 
                catch (PhidgetException e) {

                e.printStackTrace();
                }

                curVal=(int) (1.296*sonarvalue1);

                if(curVal>0 && curVal<80)
                    result=curVal;

                else if(curVal>80) 
                    result=0;

            }

            else if(7==digitalOutput){

                try {
                    ik.setOutputState(digitalOutput, true);

                } 
                catch (PhidgetException e) {

                e.printStackTrace();
                }

                curVal=(int) (1.296*sonarvalue0);

                if(curVal>0 && curVal<50)
                    result=curVal;

                else if(curVal>50)
                    result=0;

            }

            return result;

    }

        /* End Sonar*/

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:16:58.740

Use ExecutorService in java.util.concurrent package. In particular Executors.newSingleThreadExecutor();

> **newSingleThreadExecutor**
> 
> *public static ExecutorService newSingleThreadExecutor() Creates an Executor that uses a single worker thread operating off an unbounded queue. (Note however that if this single thread terminates due to a failure during execution prior to shutdown, a new one will take its place if needed to execute subsequent tasks.) **Tasks are guaranteed to execute sequentially**, and no more than one task will be active at any given time. Unlike the otherwise equivalent newFixedThreadPool(1) the returned executor is guaranteed not to be reconfigurable to use additional threads.*

Also

```
t1.start();
t1.join();
t2.start(); 
```

etc. Start one when the other dies. However I don't see the need for threads at all. Needless complication and against the design purpose of them?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:18:43.473

代替

```
Thread t1 = new Thread(new Runnable() {  
                public void run() {
                   //do something
                }
            }); 
```

`run()`它在线程中运行该方法。

尝试

```
(new Runnable() {  
    public void run() {
        //do something
    }
 }).run(); 
```

它创建匿名`Runnable`并直接调用它`run()`（而不是通过 a `Thread`），因此按顺序执行。

**编辑 0**：你似乎有很多`Thread`s 和`Runnable`s 没有明确的原因。我相信这段代码应该是等价的，但简化了很多让人难以阅读的`Thread`s 和s：`Runnable`

```
package net.ukims.dsp.cid.dataaccess;

import android.widget.TextView;

public class Dinning implements Runnable {
    public Interfacekit diningkit;
    public TextView[] Rfidviews;
    int count = 1;

    public Dinning(Interfacekit diningkit, Rfid drfid1, Rfid drfid2,
            Rfid drfid3, Rfid drfid4, Rfid drfid5, Rfid drfid6, Rfid fsrfid1,
            Rfid fsrfid2, Rfid fsrfid3, final TextView[] Rfidviews) {
        this.diningkit = diningkit;
        this.Rfidviews = Rfidviews;
        run();
    }

    public void run() {
        while (count == 1) {
            if (diningkit.getattach() == true) {
                Rfidviews[11].post(new Runnable() {
                    public void run() {
                        {
                            int sonar0 = diningkit.getsonar(7);
                            if (sonar0 != 0)
                                Rfidviews[11].setText("Port0:" + sonar0);
                            else
                                Rfidviews[11].setText(" ");
                        }
                    }
                });

                Rfidviews[12].post(new Runnable() {
                    public void run() {
                        {
                            int sonar1 = diningkit.getsonar(6);
                            if (sonar1 != 0)
                                Rfidviews[12].setText("Port1:" + sonar1);
                            else
                                Rfidviews[12].setText(" ");
                        }
                    }
                });

                Rfidviews[13].post(new Runnable() {
                    public void run() {
                        {
                            int sonar2 = diningkit.getsonar(5);
                            if (sonar2 != 0)
                                fidviews[13].setText("Port2:" + sonar2);
                            else
                                Rfidviews[13].setText(" ");
                        }
                    }
                });             
            }
        }// while
    }
} 
```

# c# - 如何在应用程序启动时更改实体框架 5 中的 ConnectionString

> ID：13936970
> 
> 赞同：4
> 
> 时间：2012-12-18T16:08:17.937
> 
> 标签：c#, entity-framework

我在 ASP.NET Web 窗体应用程序 (4.5) 上使用 EF5 数据库优先和测试和产品数据库服务器（相同的模式）。有没有办法在 global.asax 的 Application_Start 中动态设置目标连接字符串？因此，当我在测试服务器上时，使用“test”连接字符串，而当我在 prod 服务器上时，使用“prod”连接字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:15:15.850

您是否看过[http://msdn.microsoft.com/en-us/library/gg679467%28v=vs.103%29.aspx](http://msdn.microsoft.com/en-us/library/gg679467%28v=vs.103%29.aspx) DbContext(string connection)？

对象上下文：http : [//msdn.microsoft.com/en-us/library/bb739017.aspx](http://msdn.microsoft.com/en-us/library/bb739017.)

请记住，ObjectContext 的连接字符串不是经典的连接字符串，而是更复杂的 EF 连接字符串。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <connectionStrings>
    <add name="Database1Entities" 
         connectionString="metadata=res://*/Model1.csdl
|res://*/Model1.ssdl
|res://*/Model1.msl;
provider=System.Data.SqlClient;provider connection string="
Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database1.mdf;
Integrated Security=True;
User Instance=True;
MultipleActiveResultSets=True"" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

另请参阅[http://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnection.aspx](http://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnection.aspx)。使用实体连接，您可以基于现有的经典 DbConnection 创建 ObjectContext。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:02:06.333

希望这对其他人有所帮助-但看起来我们可以通过以下示例找到一种方法：[https ://stackoverflow.com/a/8240733/448704](https://stackoverflow.com/a/8240733/448704)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T07:41:25.773

对于这类任务，我建议使用内置于 VS 的工具。使用它们，Visual Studio 将根据您要发布的服务器自动切换配置（不仅是连接字符串）。查看此链接了解更多信息：[Web 部署非常棒](http://www.hanselman.com/blog/WebDeploymentMadeAwesomeIfYoureUsingXCopyYoureDoingItWrong.aspx)

# html - 另一个div内的流体div

> ID：13936973
> 
> 赞同：0
> 
> 时间：2012-12-18T16:08:30.597
> 
> 标签：html, css

我想在调整浏览器窗口大小时得到这个：

![在此处输入图像描述](../Images/0833159f4e51d0529d9601d30b604427.png)

我有这个 HTML：

```
<a class="article-link-block" href="#">
<img src="http://c69282.r82.cf3.rackcdn.com/361.jpg">
<div class="article-info">
    Article Info need to be 20% of the height and always at the bottom
</div>
</a> 
```

我可以得到所有东西，但不能得到文章信息高度的 20%。

我只能将它设为 50px 高度，然后 margin-top: -50px 就可以了，对于最大宽度。但是当我开始减小浏览器的宽度时，它不会只改变高度，而是宽度，即 100%。

任何建议/技术如何动态调整高度并始终保持在底部？

如果我使用 margin-top: -20%; 高度：20%；对于 .article-info

它创建了类似的东西：

![在此处输入图像描述](../Images/8ca609ddd3a91fc94faa6382b38f1459.png) 但这当然是错误的。

顺便提一句。CSS是

```
.article-link-block {
    display: block;
    float: left;
    width: 100%;
    position: relative;
    height: auto;
}

.article-link-block img {
margin: 0px;
padding: 0px;
display: block;
float: left;
}

.article-info {
    background: black;
    width: 100%;
    height: auto;
    float: left;
    position: relative;
    display: block;

        margin-top: -20%;
    height: 20%;

} 
```

**编辑** **编辑** **编辑**

```
<body>

    <div id="header">
        <!-- header is 100% width of body width-->
    </div>

    <div id="content">
        <!-- container is 100% of body width -->

        <div id="articles"> 

                <!-- articles are 70% of container width-->

                <a class="article-link-block article-1" href="#">
                <img src="http://c69282.r82.cf3.rackcdn.com/361.jpg">
                <div class="article-info">
                    Article Info need to be 20% of the height and always at the bottom
                </div>
                </a>

                <a class="article-link-block article-2" href="#">
                <img src="http://c69282.r82.cf3.rackcdn.com/361.jpg">
                <div class="article-info">
                    Article Info need to be 20% of the height and always at the bottom
                </div>
                </a>

                <a class="article-link-block article-3" href="#">
                <img src="http://c69282.r82.cf3.rackcdn.com/361.jpg">
                <div class="article-info">
                    Article Info need to be 20% of the height and always at the bottom
                </div>
                </a>

                <a class="article-link-block article-4" href="#">
                <img src="http://c69282.r82.cf3.rackcdn.com/361.jpg">
                <div class="article-info">
                    Article Info need to be 20% of the height and always at the bottom
                </div>
                </a>

        </div>

        <div id="sidebar">
                <!-- sidebar is 30% of container width -->
        </div>

    </div>

    <div id="footer">
        <!-- footer is 100% of body width -->
    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:00:11.383

Although I believe wrapping a block-element in an `<a>` is HTML5 compliant, it's not necessary.

CSS

```
a { position:relative; outline:1px dashed red; display:inline-block; width:100% }

span {
    position:absolute;
    bottom:0;
    height:20%;
    padding:5px;
    background-color:#ccc;
    width:100%
}

img { width:100% } 
```

HTML

```
<p style="background-color:black"><!-- remove inline style in production code -->
    <a href="#" class="article-link-block">
        <img src="http://c69282.r82.cf3.rackcdn.com/361.jpg">
        <span>Article Info need to be 20% of the height and always at the bottom</span>
    </a>
</p> 
```

Fiddle:   [http://jsfiddle.net/9dt7w/](http://jsfiddle.net/9dt7w/)

**EDIT** (one picture with multiple articles). Instead of using a `<span>` use a list.

```
<img>
<ul>
  <li>article</li>
  <li>article2</li>
</ul> 
```

Fiddle for that one: [http://jsfiddle.net/vtZ8g/](http://jsfiddle.net/vtZ8g/)

**EDIT - Accepted Answer**
[http://jsfiddle.net/MXXaS/](http://jsfiddle.net/MXXaS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:12:27.230

您不应该在“a”标签中真正包含 DIV（块元素）。如果您将 DIV 更改为内联，我认为这可能是有效的。

为了使 DIV 成为其父级的 20%，您需要将“a”标记设为块级元素并为其指定高度。

然后要将其与底部对齐，您需要使“a”标签位置相对，并使 DIV 位置绝对，底部值为“0”。

```
a.article-link-block {
    display:block;
    position:relative
}

.article-info {
    postion:absolute;
    bottom:0;
    display:inline-block;
} 
```

}

# codeigniter - Codeigniter 2.1 - 视图中的库函数 - 好或坏

> ID：13936979
> 
> 赞同：0
> 
> 时间：2012-12-18T16:08:56.963
> 
> 标签：codeigniter, codeigniter-2

在我看来，我有这部分：

```
$rep    = array(' ', '@', ',');
$naslov = strtolower(str_replace($rep, '_', $vest['naslov']));
$naslov = str_replace('"', '', $naslov );
$text   = html_entity_decode(word_limiter(($vest['opis']),63));
$text   = preg_replace("/<img[^>]+>/i", "", $text);
$text   = str_replace('\n', '<br>', $text); 
```

这对 3 种不同类型的文章重复了 3 次（这是必需的，没有办法解决这个问题）。我的问题是：在视图中调用自定义库是好还是坏？除了这个和在视图控制器中编写函数之外还有其他方法吗（我在其他几个视图文件中也需要这个函数）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:16:40.757

I don't see why it would be bad to call library's static method to do this for you. If you don't want a library, you can include your custom helper. If you think your view would be too overloaded, then you can refactor your code to have all ops happening in the controller and the view would only have a very final data.

# php - Yii 框架中的自定义 CListView

> ID：13936982
> 
> 赞同：3
> 
> 时间：2012-12-18T16:09:00.617
> 
> 标签：php, yii, widget

我想修改 Yii 框架提供的默认列表视图。当前视图将所有内容显示为一行![在此处输入图像描述](../Images/65741eb4791e513f94b0e9a25a1583f9.png)。我想要的是以以下格式显示信息![在此处输入图像描述](../Images/a9211cefd8af370fc679081ae300cf6b.png)。您能否建议我如何扩展此小部件并创建自己的视图。我已将两者都附加为图像。我是 Yii 的新手，所以所有的帮助都会非常有用。如果已经有这种格式的小部件，我会很高兴。

我的视图文件的内容将是

```
 <?php
/* @var $this LeosafealertController */
/* @var $data Leosafealert */
?>

<div class="view">  
    <b><?php echo CHtml::encode($data->getAttributeLabel('id')); ?>:</b>
    <?php echo CHtml::link(CHtml::encode($data->id), array('view', 'id'=>$data->id)); ?>
        <br/>
    <b><?php echo CHtml::encode($data->getAttributeLabel('date')); ?>:</b>
    <?php echo CHtml::encode($data->date); ?>
        <br/>
    <b><?php echo CHtml::encode($data->getAttributeLabel('description')); ?>:</b>
    <?php echo CHtml::encode($data->description); ?>
        <br/>
    <b><?php echo CHtml::encode($data->getAttributeLabel('photo')); ?>:</b>
    <?php echo CHtml::image($data->getImageURL().$data->photo,$data->photo); ?>
        </br>
        <b><?php echo CHtml::encode($data->getAttributeLabel('link')); ?>:</b>
    <?php echo CHtml::link(CHtml::encode("click here"), $data->getFileURL().$data->link,array('target'=>'_blank')); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:51:28.463

你能不编辑你的视图文件（例如只编辑'/path/to/model/views/_view.php'，或者你的视图文件叫什么）？

您还可以通过定义[cssFile](http://www.yiiframework.com/doc/api/1.1/CListView#cssFile-detail)属性为 CLitView 声明您自己的 css 文件。IE;

```
$this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_view',
    'cssFile'=>'/css/myCssFile.css',
    ...
)); 
```

您可以为您的布局创建自己的 css 文件，并将其用于您想要的每个 CListView 与给定布局？

# c# - 用随机数字更新多行

> ID：13936989
> 
> 赞同：1
> 
> 时间：2012-12-18T16:09:27.803
> 
> 标签：c#, .net, sql, database

下面是一个名为`Password_Click`. 当您单击此按钮时，它会进入数据库并找到一个名为`TblMaintenance`. 一旦进入表，它会在表中找到字段`Patrol`= True 或 1 的所有记录，并`Password`使用系统生成的随机 4 位数字更新字段（也在表中）。

我的问题是每一行都将使用相同的随机保护密码进行更新。我希望每一行都有一个不同的随机 4 位数字。目前它正在这样做，我不希望它这样做：

站点密码巡逻 CEP 5405 1 GNK 5405 1 ILT 5405 1 KHA 5405 1

但我希望它这样做：

站点密码巡逻 CEP 4567 1 GNK 9000 1 ILT 4345 1 KHA 1278 1

```
protected void lnkPassword_Click(object sender, EventArgs e)
{
    var random = new Random();
    var i = random.Next(1000, 9999);

    SqlHelper.ExecuteSqlNonQuery(@"update Tblmaintenance set
                                   GuardPassword = @newPassword
                                   WHERE Patrol = 1",
                                   "newPassword", i);                        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:42:50.257

如果你想用一个 DML 语句保留它，你可以使用以下命令：

```
update tbl_Security set
                           GuardPassword = round(rand(CAST(CAST(NEWID() AS VARBINARY(4)) AS SMALLINT))* 9000,0) + 1000
                           WHERE Patrol = 1 
```

它应该为符合 where 语句的每一行生成新的四位数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:28:50.563

您的问题的一些解决方法可能是：

```
protected void lnkUpdateGuardPassword_Click(object sender, EventArgs e)
{ 
    //command = query to select all the yard codes.

    List<string> YardCodes = new List<string>();
    SqlDataReader reader = command.ExecuteReader();
    while (reader.Read())
    {
        YardCodes.Add(reader["YardCode"].ToString());
    }

    var random = new Random();
    foreach (var yardcode in YardCodes)
    {
        var i = random.Next(1000, 9999);
        SqlHelper.ExecuteSqlNonQuery(@"update T2_SecurityKeyHolder set
                               GuardPassword = @newPassword
                               WHERE YardCode = @yardcode",
                               "newPassword", yardcode, i); 
    }                       
} 
```

这将首先获取所有码（假设它们是唯一的），然后为每个单独的码设置一个随机码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T16:20:45.717

如果您使用 DataContext（Visual Studio 中的 dbml），您可以使用 LINQ 而不是 SQL 来恢复记录并使用 C# 代码对其进行编辑。

```
DatabaseDataContext db = new DatabaseDataContext();

foreach(T2_keyHolderMaintenance t2 in (from t2 in db.T2_keyHolderMaintenances where t2.ManageGuardPatrol == true select t2).ToList())
{
   t2.GuardPassword = Math.Random() //or whatever you want to do
}

db.SubmitChanges(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T16:17:12.677

问题是您的 SQL 语句。它正在更新 ManagedGuardPatrol 值等于 1 的所有记录。每次调用单击事件时，它们都将具有相同的 GuardPassword 值。您需要使用 YardCode 来识别要更新的记录。

澄清一下，随机数是在 C# 中生成的，并一次传递到 SQL 语句中。这个相同的值通过所有匹配的行传播。

```
i = 4505; // a number that was randomly generated ONCE. 
```

您的 SQL 语句变为：

```
update T2_SecurityKeyHolder 
set GuardPassword = 4501
WHERE ManagedGuardPatrol = 1 
```

**它用一个**随机值更新所有匹配的记录。

如果我能想到一个更清晰的方式来解释它，我会的。目前，可以说，您只生成了一个具有一个固定值的 SQL 语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T16:42:39.517

```
protected void lnkPassword_Click(object sender, EventArgs e)
{
    SqlHelper.ExecuteSqlNonQuery(@"update Tblsecurity set
                                   Password = abs(checksum(NewId())) % 10000
                                   WHERE Patrol = 1");                        
} 
```

或者

```
protected void lnkUpdateGuardPassword_Click(object sender, EventArgs e)
{
    SqlHelper.ExecuteSqlNonQuery(@"update Tblsecurity set
                                   Password = ROUND(((9999 - 1000 -1) * RAND() + 1000), 0)
                                   WHERE Patrol = 1");                        
} 
```

# c++-amp - 将数据从 GPU 复制到 CPU

> ID：13936994
> 
> 赞同：4
> 
> 时间：2012-12-18T16:09:37.290
> 
> 标签：c++-amp

我正在尝试使用 C++ AMP 计算矩阵。我使用宽度和高度为 3000 x 3000 的数组，并重复计算过程 20000 次：

```
 //_height=_width=3000
    extent<2> ext(_height,_width);
    array<int, 2> GPU_main(ext,gpuDevice.default_view);
    array<int, 2> GPU_res(ext,gpuDevice.default_view);
    copy(_main, GPU_main);
    array_view<int,2> main(GPU_main);
    array_view<int,2> res(GPU_res);
    res.discard_data();
    number=20000;
    for(int i=0;i<number;i++)
    {
        parallel_for_each(e,[=](index<2> idx)restrict(amp)
        {
           res(idx)=main(idx)+idx[0];//not depend from calculation type
        }
    array_view<TYPE, 2>  temp=res;
    res=main;
    main=temp;
    }
    copy(main, _main); 
```

在计算之前，我将我的矩阵从主机内存复制到 GPU 内存并创建一个`array_view`从 0 到 7 的代码行。

之后，我开始一个循环来计算一些操作并重复 20000 次。每次迭代我都会开始一个`parallel_for_each`循环，使用 C++ AMP 进行计算。

GPU计算非常快，但是当我将结果复制到主机时，`array _main`我发现这个操作需要很多时间，而且我发现如果我`number`从20000减少到2000，复制的时间也会减少。

为什么会发生这种情况，这是一些同步问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T17:30:40.303

您的代码（按原样）无法编译，下面是一个固定版本，我认为它具有相同的意图如果您想打破从计算时间复制的时间，那么最简单的方法是使用**array<>**和显式副本。

```
 int _height, _width;
        _height = _width = 3000;
        std::vector<int> _main(_height * _width); // host data.
        concurrency::extent<2> ext(_height, _width);
        // Start timing data copy
        concurrency::array<int, 2> GPU_main(ext /* default accelerator */);
        concurrency::array<int, 2> GPU_res(ext);
        concurrency::array<int, 2> GPU_temp(ext);
        concurrency::copy(begin(_main), end(_main), GPU_main);
        // Finish timing data copy
        int number = 20000;
        // Start timing compute
        for(int i=0; i < number; ++i)
        {
            concurrency::parallel_for_each(ext,
                [=, &GPU_res, &GPU_main](index<2> idx)restrict(amp)
            {
               GPU_res(idx) = GPU_main(idx) + idx[0];
            });
            concurrency::copy(GPU_res, GPU_temp);       // Swap arrays on GPU
            concurrency::copy(GPU_main, GPU_res);
            concurrency::copy(GPU_temp, GPU_main);
        }
        GPU_main.accelerator_view.wait(); // Wait for compute
        // Finish timing compute
        // Start timing data copy
        concurrency::copy(GPU_main, begin(_main));
        // Finish timing data copy 
```

请注意**wait()**调用以强制计算完成。请记住，C++AMP 命令通常在 GPU 上排队工作，并且只有在您显式等待、使用**wait()**或等待它或通过调用（例如）**array_view** **< >**。为了更好地了解计时，您应该真正分别计时计算和数据副本（如上所示）。您可以在这里找到一些基本的计时代码：http: [//ampbook.codeplex.com/SourceControl/changeset/view/100791#1983676](http://ampbook.codeplex.com/SourceControl/changeset/view/100791#1983676) in Timer.h 在同一个文件夹中有一些使用示例。

然而。我不确定我是否真的会以这种方式编写代码，除非我想打破复制和计算时间。**将array<>**用于纯粹存在于 GPU 上的数据，使用**array_view<>**用于复制到 GPU 和从 GPU 复制的数据要简单得多。

这看起来像下面的代码。

```
 int _height, _width;
        _height = _width = 3000;
        std::vector<int> _main(_height * _width); // host data.
        concurrency::extent<2> ext(_height, _width);
        concurrency::array_view<int, 2> _main_av(_main.size(), _main); 
        concurrency::array<int, 2> GPU_res(ext);
        concurrency::array<int, 2> GPU_temp(ext);
        concurrency::copy(begin(_main), end(_main), _main_av);
        int number = 20000;
        // Start timing compute and possibly copy
        for(int i=0; i < number; ++i)
        {
            concurrency::parallel_for_each(ext,
                [=, &GPU_res, &_main_av](index<2> idx)restrict(amp)
            {
               GPU_res(idx) = _main_av(idx) + idx[0];
            });
            concurrency::copy(GPU_res, GPU_temp);  // Swap arrays on GPU
            concurrency::copy(_main_av, GPU_res);
            concurrency::copy(GPU_temp, _main_av);
        }
        _main_av.synchronize();  // Will wait for all work to finish
        // Finish timing compute & copy 
```

现在只需要在 GPU 上的数据被声明在 GPU 上，需要同步的数据也被声明为 GPU 上。更清晰，更少的代码。

您可以通过阅读我关于 C++ AMP 的书了解更多信息：)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T21:49:22.567

你是如何测量时间的？您需要在 parallel_for_each 之后等待加速器视图，然后再进行复制，以便计算和复制的准确时间。您可能需要查看以下博客文章，了解一些衡量 C++ AMP 程序性能的技巧：

1.  [如何衡量 C++ AMP 算法的性能 (2011)](http://blogs.msdn.com/b/nativeconcurrency/archive/2011/12/28/how-to-measure-the-performance-of-c-amp-algorithms.aspx)
2.  [如何衡量 C++ AMP 算法的性能 (2012)](http://blogs.msdn.com/b/nativeconcurrency/archive/2012/04/25/data-warm-up-when-measuring-performance-with-c-amp.aspx)

# php - PHP 和 Exchange Web 服务 (EWS) - 无法连接

> ID：13936998
> 
> 赞同：5
> 
> 时间：2012-12-18T16:09:58.397
> 
> 标签：php, exchangewebservices

我以前从未尝试过，但我正在尝试使用 PHP 获取有关交换帐户的数据（例如收件箱中的电子邮件数量和收件箱中未读电子邮件的数量）。仅作记录，PHP 服务器与交换服务器位于不同的域中。

**我的 PHP 服务器正在运行：**
- 系统：Linux
- PHP 版本 5.3.3
- cURL 信息 7.19.7
- cURL NTLM 是
- 启用了 Soap 客户端和服务器

**Excahnge 正在运行：**
- 版本 14.1 或 Exchange 2010 SP1

我尝试了 3 个 PHP 库，它们都返回非常相似的错误。适用于 PHP 、[PHP-EWS](https://github.com/jamesiarmes/php-ews)和[EWSWrapper](http://ewswrapper.lafiel.net/)库的[Heartspring Exchange Web 服务。](https://github.com/Heartspring/Exchange-Web-Services-for-PHP)

由于所有 3 个库都需要，我从交换服务器下载了三个文件并将它们放在 PHP 服务器 Web 目录上的适当位置：
- Services.wsdl（使用大写和 lovercase 首字母） -messages.xsd
-types.xsd

我还添加了`ExchangeServiceBinding`to`Services.wsdl`并将其指向`soap:address location`交换服务器`Exchange.asmx`（我测试了链接，它是正确的）。

我收到所有 3 个库的非常相似的错误消息，这是来自 EWSWrapper 的完整错误：

```
 Fatal error: Uncaught SoapFault exception: [WSDL] SOAP-ERROR: 
    Parsing Schema: can't import schema from 
    '/var/www/vhosts/domain.com/EWSWrapper/wsdl/types.xsd'in 
    /var/www/vhosts/domain.com/EWSWrapper/NTLMSoapClient/Exchange.php:52 
    Stack trace: #0 
    /var/www/vhosts/domain.com/EWSWrapper/NTLMSoapClient/Exchange.php(52):
    SoapClient->SoapClient('/var/www/vhosts...', Array) 
    #1 
    /var/www/vhosts/domain.com/EWSWrapper/ExchangeWebServices.php(483): 
    NTLMSoapClient_Exchange->__construct('/var/www/vhosts...', Array) 
    #2 
    /var/www/vhosts/domain.com/EWSWrapper/ExchangeWebServices.php(235): 
    ExchangeWebServices->initializeSoapClient() 
    #3 
    /var/www/vhosts/domain.com/EWSWrapper/EWSWrapper.php(529): 
    ExchangeWebServices->FindFolder(Object(EWSType_FindFolderType)) 
    #4 
    /var/www/vhosts/domain.com/EWSWrapper/test in
    /var/www/vhosts/domain.com/EWSWrapper/NTLMSoapClient/Exchange.php on line 52 
```

**Exchange.php:52 指向：**

```
parent::__construct($wsdl, $options); 
```

**ExchangeWebServices.php(483) 指向：**

```
protected function initializeSoapClient() {
        return new NTLMSoapClient_Exchange(
            dirname(__FILE__).'/wsdl/services.wsdl',
            array(
                'user' => $this->username,
                'password' => $this->password,
                'location' => 'https://'.$this->server.'/EWS/Exchange.asmx',
            )); // end return
    } // end function initializeSoapClient() 
```

在那里，我尝试将服务器路径 (/var/www/...) 和 web url 路径 (http://domain.com/...) 设置为 services.wsdl 以及服务器位置，但没有任何改变除了上面错误代码中的网址。

**ExcahngeWebServices.php(235) 指向：**

```
public function FindFolder($request) {
        $request->getAsSOAP();
        return $this->initializeSoapClient()->{__FUNCTION__}($request);
    } // end function FindFolder() 
```

似乎 $request 可能存在问题，因为下一个跟踪**EWSWrapper.php(529)**指向：

```
// make the actual call
        $response = $this->ews->FindFolder($request);

        return $response; 
```

任何帮助将不胜感激，因为广泛的 Google 和 Stack Exchange 搜索没有帮助。我会认为通往 的路径`types.xsd`是错误的或`$request`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:43:46.137

我将问题追溯到可能的问题`Bug in PHP`或`possible solution`某些不受该错误影响的用户：

1.  [错误 #61463：使用 https soapservice 时无法导入架构](https://bugs.php.net/bug.php?id=61463)

2.  在本地存储`services.wsdl, types.xsd and messages.xsd`但将架构导入引用`services.wsdl`到交换服务器`messages.xsd`，`messages.xsd`并将架构导入引用到交换服务器`types.xsd`（而不是在我的情况下由于某种原因无法导入的本地存储的）。

`Parsing Schema: can't import schema from`之后，我至少不再收到[Talking SOAP With Exchange](http://www.howtoforge.com/talking-soap-with-exchange)中提供的代码的错误。

我实际上仍然`schema import error`在原始帖子中发布的服务器上。但不在另一台运行 PHP 5.2.7 的测试服务器上。我猜 PHP BUG 不会影响该测试服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:42:50.050

此示例使用 PHP 内部类 SoapClient 来显示 Microsoft Exchange 2010 日历项的主题。为了让它工作，你必须下载和修改'services.wsdl'，'types.xsd'，'messages.xsd'，就像提问者提到的那样。这些文件应与 php 文件位于同一文件夹中。

```
<?php

ini_set('display_errors', '1'); // for debugging
$server = "192.168.0.23";
$wsdl = "file:///" . dirname(__FILE__) . "/services.wsdl";

// valid login credentials
$options = array (
    'login' => 'test@test.net',
    'password' => 'secret'
);

$client = new SoapClient($wsdl, $options);
printf("Connected to %s%s", $server, PHP_EOL);

$FindItem->Traversal = "Shallow";
$FindItem->ItemShape->BaseShape = "AllProperties";
$FindItem->ParentFolderIds->DistinguishedFolderId->Id = "calendar";
$FindItem->CalendarView->StartDate = "2012-08-01T00:00:00Z";
$FindItem->CalendarView->EndDate = "2012-08-31T00:00:00Z";
$result = $client->FindItem($FindItem);
$calendaritems = $result
  ->ResponseMessages
  ->FindItemResponseMessage
  ->RootFolder
  ->Items
  ->CalendarItem;

foreach($calendaritems as $item) { 
    printf("%s%s", $item["Subject"], PHP_EOL);
} 
```

[您将在本教程](http://www.howtoforge.com/talking-soap-with-exchange)中找到有关将 EWS 与 PHP 结合使用的重要信息