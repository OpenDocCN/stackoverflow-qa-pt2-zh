# StackOverflow 问答 14547000-14547999

# symfony - Symfony2，Doctrine，@UniqueEntity 处理异常

> ID：14547001
> 
> 赞同：1
> 
> 时间：2013-01-27T11:44:19.840
> 
> 标签：symfony, exception-handling, doctrine

**实体**

```
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;

/**
 * @ORM\Table(name="_apiKey")
 * @ORM\Entity(repositoryClass="Eve\ProfileBundle\Entity\Repository\apiKeyRepository")
 * @UniqueEntity(fields={"keyID", "vCode", "accountID"}, 
 * message="you already own this api")
 */
class apiKey
{

public function __construct()
{
    // empty
}

// relations start
// relations end

/**
 * @ORM\Column(name="entryID", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $entryID;

/**
 * @ORM\Column(name="accountID", type="integer", nullable=false, unique=true)
 */
private $accountID;

/**
 * @ORM\Column(name="keyID", type="integer", nullable=false, unique=true)
 * @Assert\NotBlank(message="keyID cannot be blank")
 */
private $keyID;

/**
 * @ORM\Column(name="vCode", type="string", nullable=false, unique=true)
 * @Assert\NotBlank(message="vCode cannot be blank")
 */
private $vCode; 
```

在数据库中

```
CREATE TABLE IF NOT EXISTS `_apiKey` (
  `entryID` int(11) NOT NULL AUTO_INCREMENT,
  `accountID` int(11) NOT NULL,
  `keyID` int(11) NOT NULL,
  `vCode` varchar(255) NOT NULL,
  PRIMARY KEY (`entryID`),
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=18 ; 
```

当我尝试添加重复时出现错误

```
An exception occurred while executing 'INSERT INTO _apiKey (accountID, keyID, vCode) VALUES (?, ?, ?)' with params {"1":38,"2":"1233","3":"123"}:

SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '38-1233-123' for key 'accountID' 
```

很好，但我该如何处理呢？“消息选项”在**@UniqueEntity()**中不起作用我如何在表单错误中显示此错误（无异常）

我想要什么（没有 entryID 的 db 的简单示例）

```
123 123 123 - add
123 123 1234 - add
123 125 123 - add
123 123 1234 - form-error on inserting
123 123 123 - form-error on inserting
234 123 123 - add
234 123 123 - form-error on inserting 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T13:31:33.783

> **密钥“accountID”的**重复条目“38-1233-123 ”

 **如果您想单独检查 accountId 的唯一性，请将其添加到您的类中：

```
@UniqueEntity(fields={"accountID"}, message="This account is already taken") 
```

这里是检查组合“keyID”、“vCode”、“accountID”的唯一性以及“accountID”单独的唯一性的完整代码：

```
<?php

// ...

/**
 * @ORM\Table(name="_apiKey")
 * @ORM\Entity(repositoryClass="Eve\ProfileBundle\Entity\Repository\apiKeyRepository")
 * @UniqueEntity(fields={"keyID", "vCode", "accountID"}, message="you already own this api")
 * @UniqueEntity(fields={"accountID"}, message="This account ID is already taken")
 */
class apiKey
{ 
```

我不知道您是否看到该错误仅影响字段 accountID，如果您不希望这种行为，只需从您的属性 $accountID 中删除“unique = true”。

如果您只想说组合“keyID”、“vCode”、“accountID”在数据库中必须是唯一的，请按以下方式进行：

```
/**
 * @ORM\Table(name="_apiKey",
 *      uniqueConstraints = {
 *          @ORM\UniqueConstraint(name="_api_key_key_id_v_code_account_id", columns={"keyID", "vCode", "accountID})
 *      }
 * )
 *
 * ...
 * etc, ...
 */
class apiKey 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:07:52.223

麻烦出现在表单类型类中，要使用这种唯一组合，您必须将所有值添加到您想要唯一的字段中，在我的示例中将是

```
 $builder
            ->add('accountID', 'hidden', array ('data' => $options['acountID']))
            ->add('keyID', 'text')
            ->add('vCode', 'text'); 
```

我添加了隐藏字段（accontID）并用数据填充它，然后我得到正确的表单错误错误，如果你不填写会有空值（所以我不知道为什么它不会检查唯一性）

这对我来说是解决方案，但基本上@Sybio 帮助我理解了很多，所以我会检查他的答案作为答案^_^**

# c# - 实体框架不会添加所有表 Visual Studio 2010

> ID：14547002
> 
> 赞同：0
> 
> 时间：2013-01-27T11:44:24.877
> 
> 标签：c#, visual-studio-2010, entity-framework, asp.net-mvc-4

也许从一些信息开始会更好。我正在使用 Visual Studio 2010 和 Microsoft SQL server 2012 Express。所以我在一些表之间有关系，比如简单成员之间的标准表`UserProfile` `webpages_Roles`，`webpages_UsersInRoles`所以`UsersInRoles`只是链接表。

但是当我使用实体框架添加/新项目/ADO.NET 实体数据模型导入它们时，我选择我的数据库，然后选择所有表，当我导入它们时，链接表不存在......我可以在关联中看到它

我只有这两个.....当我尝试单独添加它们时这些表之间的连接没有创建......所有这些表都是标准成员表，我的站点在 UserProfile 中几乎没有改进......但是当我创建自己的具有相同关系的表时，它也没有被导入。请帮忙。

当我创建新用户和新角色时，我希望能够手动在此表中添加一些内容。实际上我最大的问题是我有自己的具有相同关系的表，我不能使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:58:36.207

我不确定我是否理解你的问题，但无论如何我都会尝试回答。

看起来您正在处理成员资格表。下面是一个将添加角色和用户的示例。 如果表不存在，*WebSecurity.InitializeDatabaseConnection方法将创建表。*

```
 if (!WebSecurity.Initialized)
        {
            WebSecurity.InitializeDatabaseConnection(
                        "DefaultConnection", "UserProfile", 
                        "UserId", "UserName", autoCreateTables: true);
        }

        if (!roles.RoleExists("Admin"))
        {
            roles.CreateRole("Admin");
        }

        if (!roles.RoleExists("Agent"))
        {
            roles.CreateRole("Agent");
        }

        AddUser("admin", "Admin", "123");
        AddUser("agent", "Agent", "123");
    } 
```

如果您使用 Code First，您可以将此代码放在您的 Seed 方法中，以便在迁移期间创建它。

再一次，我不确定我是否回答了你的问题。

# php - 问题验证 startdate 和 enddate codeigniter

> ID：14547010
> 
> 赞同：0
> 
> 时间：2013-01-27T11:45:29.150
> 
> 标签：php, codeigniter, validation, date

我想验证 startdate 和 endate codeigniter，如果 stardate > enddate，不保存在我的数据库中，或者像这样显示错误消息我的控制器

```
function buat_lagi() {
    if ($this->input->post('IDKategori')) {
        $this->MKalender->addEvents();
        $id = $_POST[IDKategori];
        $this->session->set_flashdata('message', 'Agenda Pimpinan baru telah dibuat !');
        redirect('admin/kalenderkategori/lihat/' . $id . '', 'refresh');
    } else {
        $data['title'] = "Tambah Agenda Pimpinan";
        $data['kategori'] = $this->MKalenderKategori->getKategoriDropDown();
        $data['main'] = 'admin/kalender/kalender_buat_lagi';
        $this->load->vars($data);
        $this->load->view('layout/dashboard');
    }
} 
```

我的模型是这样的

```
function addEvents() {
    $data = array(
        'IDKategori' => $this->input->post('IDKategori'),
        'TanggalMulai' => $this->input->post('TanggalMulai'),
        'TanggalAkhir' => $this->input->post('TanggalAkhir'),
        'judul' => $this->input->post('judul'),
        'konten' => $this->input->post('konten'),
        'create_by' => $_SESSION['username'],
    );
    $this->db->insert('kalender', $data);
} 
```

我的表格是这样的

```
<form action="<?= base_url(); ?>index.php/admin/kalender/buat_lagi/" method="post" enctype="multipart/form-data" name="form" id="form">
<?php
echo "<label for='ptitle'>Kegiatan / Lokasi :</label><br/>";
$data = array('class' => 'validate[required] text-input', 'name' => 'judul', 'id' => 'ptitle', 'size' => 80);
echo form_input($data);

echo "<p><label for='long'>Uraian Kegiatan / Keterangan / Catatan :</label><br/>";
$data = array('class' => 'validate[required] text-input', 'name' => 'konten', 'rows' => '13', 'cols' => '60', 'style' => 'width: 60%');
echo form_textarea($data) . "</p>";

echo "<p><label for='ptitle'>Waktu Mulai :</label><br/>";
$data = array('class' => 'validate[required] text-input', 'name' => 'TanggalMulai', 'id' => 'basic_example_1');
echo form_input($data) . "</p>";

echo "<p><label for='ptitle'>Waktu Akhir :</label><br/>";
$data = array('class' => 'validate[required] text-input', 'name' => 'TanggalAkhir', 'id' => 'basic_example_2', 'onblur' => 'function compareDate()');
echo form_input($data) . "</p>";

echo form_hidden('IDKategori', $this->uri->segment(4));
echo form_submit('submit', 'Tambah Even');
?>
&nbsp;&nbsp;<input type="button" value="Kembali" onClick="javascript: history.go(-1)" /> 
```

如何验证我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T17:12:01.883

您还没有给出日期的格式，甚至没有给出日期字段的格式（请记住，这里的大多数用户主要讲英语）您也没有说明您想要这个检查服务器端还是客户端。通过在您的表单中调用的比较日期函数，我假设您至少需要客户端，但我建议尽管表单验证也需要在服务器端完成。客户端非常适合立即通知用户，但对于实际保护表单服务器端的输入是无用的。

客户端的 jQuery（因为我不确定哪个字段是伪代码：

```
function compareDate()
    {
var startDate = Date.parse($("#startDate).val()");
var endDate = Date.parse($("#endDate).val()");
if(startDate>endDate)
{
alert("Your start date must be earlier than your end date.");
}
    } 
```

Codeigniter 函数（回调应该可以工作，但我还没有测试过。）您实际上只需要在日期字段之一上运行该函数，您只想返回一个错误，并且返回它无关紧要，因为它正在比较二。

```
//validation rule
$this->form_validtion->set_rules('endDate', 'End Date','trim|callback_compareDates');

function compareDates()
{
$start = strtotime($this->input->post('startDate'));
$end = strtotime($this->input->post('endDate'));
if($start > $end)
{
    $this->form_validation->set_message('compareDates','Your start date must be earlier than your end date');
    return false;
} 
```

# php - wordpress - 第一篇文章的 query_post 循环

> ID：14547017
> 
> 赞同：0
> 
> 时间：2013-01-27T11:47:11.993
> 
> 标签：php, wordpress, loops, wordpress-theming

我`query_post`用来显示最近发布的列表。我想为第一篇文章提供特殊的样式和 html 标记。

这是我当前的代码：

```
 $cat_args=array(
              'orderby' => 'name',
              'order' => 'ASC'
               );
            $categories=get_categories($cat_args);
              foreach($categories as $category) {
                $args=array(
                  'showposts' => -1,
                  'category__in' => array($category->term_id),
                  'caller_get_posts'=>1
                );
                $posts=query_posts($args);
                  if ($posts) {
                    echo '<h3><a href="' . get_category_link( $category->term_id ) . '" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>' . $category->name.'</a> </h3> ';                   

                    while ( have_posts() ) : the_post(); 
                        if( $wp_query->current_post == 0 ) :?>
                            <?php if ( has_post_thumbnail()) : ?>
                                <a href="<?php the_permalink(); ?>" class="thumb" title="<?php the_title_attribute(); ?>" ><?php the_post_thumbnail('post-thumb'); ?></a>
                            <?php endif; ?>
                            <h5><a href="<?php the_permalink(); ?>"> <?php the_title(); ?></a></h5>
                        <?php else : ?>
                            <?php if ( has_post_thumbnail()) : ?>
                                <a href="<?php the_permalink(); ?>" class="thumb" title="<?php the_title_attribute(); ?>" ><?php the_post_thumbnail('post-thumb'); ?></a>
                            <?php endif; ?>
                            <h5><a href="<?php the_permalink(); ?>"> <?php the_title(); ?></a></h5> 
                        <?php endif;

                    endwhile;
                  } // if ($posts
                } // foreach($categories 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T11:58:57.257

您需要做的只是将您的代码段包装到`if`语句中并在循环`the_post`之前调用函数。`while`通过调用`the_post`函数，您将从队列中获取第一条记录。它应该是这样的：

```
if ( have_posts() ) :
    the_post();

    if ( has_post_thumbnail()) : 
        ?><a href="<?php the_permalink(); ?>" class="thumb" title="<?php the_title_attribute(); ?>" >
            <?php the_post_thumbnail('post-thumb'); ?>
        </a><?php 
    endif; 
    ?><h5>
        <a href="<?php the_permalink(); ?>">
            <?php the_title(); ?>
        </a>
    </h5><?php

    while ( have_posts() ) : 
        the_post(); 
        if ( has_post_thumbnail()) : ?>
            <a href="<?php the_permalink(); ?>" class="thumb" title="<?php the_title_attribute(); ?>" ><?php the_post_thumbnail('post-thumb'); ?></a>
        <?php endif; ?>
        <h5><a href="<?php the_permalink(); ?>"> <?php the_title(); ?></a></h5> 
    endwhile;
endif; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-16T10:36:07.140

根据你想要的样式[整篇文章、标题等]，你会想要识别第一篇文章，然后有条件地输出一个类或你想要的任何 HTML。“循环”是代码中介于 while 和 endwhile 之间的部分。所以在循环之前，放：

```
$is_first_post = TRUE; 
```

然后在 while 循环中，在您尝试添加样式之前，放置：

```
if ($is_first_post == TRUE){
    echo (" .... THIS WOULD BE ADDED TO THE FIRST POST ONLY ....");
    $is_first_post = FALSE; //this flags the next post as not being first 
} 
```

# android - 从 Android 上的图库功能加载 - 有时会失败，为什么？

> ID：14547019
> 
> 赞同：0
> 
> 时间：2013-01-27T11:47:15.573
> 
> 标签：android, android-intent, android-activity, android-gallery

我正在使用一个`loadfromgallery`函数从图库中加载和裁剪图像，但有时它不起作用。

它似乎不适用于没有 SDCard 的设备（我在各种设备上对其进行了测试，在我的 i9000+CM10.1+semaphore 和 w/out 中始终有效，在 android>4.0 的平板电脑中无效）

有人可以帮助我吗？

这是我的`onActivityResult`方法：

```
protected void onActivityResult(int requestCode, int resultCode,Intent imageReturnedIntent) {
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent);
    switch (requestCode) {
    case REQ_CODE_PICK_IMAGE:
        if (resultCode == RESULT_OK) {  
            if (imageReturnedIntent!=null){
                getTempFile();
                String filePath= Environment.getExternalStorageDirectory()+ "/temp/"+TEMP_PHOTO_FILE;
                System.out.println("path "+filePath);
                Bitmap selectedImage =  BitmapFactory.decodeFile(filePath);
                bitmapdrawable = new BitmapDrawable(selectedImage);
                generator_imagen.setImageDrawable(bitmapdrawable);
                app_gestorVistas("GENERATE");
                app_posicionGrid=9999;
            }
        }
    }} 
```

这是功能：

```
public void loadfromgallery(){  //TODO LOAD FROM GALLERY
    Intent photoPickerIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
    photoPickerIntent.setType("image/*");
    photoPickerIntent.putExtra("crop", "true");
    photoPickerIntent.putExtra(MediaStore.EXTRA_OUTPUT, getTempUri());
    photoPickerIntent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
    startActivityForResult(photoPickerIntent, REQ_CODE_PICK_IMAGE);
}
private Uri getTempUri() {
    return Uri.fromFile(getTempFile());
}

private File getTempFile() {
    if (isSDCARDMounted()) {
        File f = new File(Environment.getExternalStorageDirectory(),"/temp/"+TEMP_PHOTO_FILE);

        try {f.createNewFile();}
        catch (IOException e) {}
        return f;
    } else {
        return null;
    }
}

private boolean isSDCARDMounted(){
    String status = Environment.getExternalStorageState();
    if (status.equals(Environment.MEDIA_MOUNTED))
        return true;
    return false;
}

private static final String TEMP_PHOTO_FILE = "mprt_img.jpg"; 
```

这是我过滤的 logcat（生命周期）

```
 01-27 13:34:29.476: V/EVENTO(4630): STATE:  onCreate
01-27 13:34:36.261: V/EVENTO(4630): STATE:  onStart
---APP BUSY--
01-27 13:34:47.296: V/EVENTO(4630): STATE:  onStop
--STOP APP AN DSHOW IMAGEPICKER---
01-27 13:35:01.316: V/EVENTO(4630): STATE:  onRestart
01-27 13:35:01.332: V/EVENTO(4630): STATE:  onStart 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:00:29.723

你能发布你的logcat输出吗？

你的**TEMP_PHOTO_FILE**是什么？您的主要活动的生命周期是什么？当您从图像选择器返回时，它会再次调用 onCreate 吗？如果是这样，您将丢失所有临时变量，您应该将它们保存在包中。

```
 @Override
public void onSaveInstanceState(Bundle outState) {
  super.onSaveInstanceState(outState);
  if (filesaved == null) {
    outState.putString("file-uri", "");
  }
  else {
    outState.putString("file-uri", filesaved.toString());
  }
}; 
```

* * *

另一个问题可能是文件的创建。确保文件夹存在！

```
File sdCard = Environment.getExternalStorageDirectory();

File dir = new File (sdcard.getAbsolutePath() + "/temp/");

dir.mkdirs();

File file = new File(dir, TEMP_PHOTO_FILE);

...

FileOutputStream f = new FileOutputStream(file); 
```

# php - 如何在 PHP 中打开 .ico 文件？

> ID：14547020
> 
> 赞同：0
> 
> 时间：2013-01-27T11:47:33.627
> 
> 标签：php

我曾尝试使用 php 来计算图像的平均颜色。所以我使用php函数：`imagecolorat()`，`imagecreatefromstring()`

这是我的代码的一部分：

```
$fcontents = file_get_contents($imgname);
$im = @imagecreatefromstring($fcontents); 
```

但是我发现它可以成功读取图像，除了 .ico 怎么处理呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-22T10:07:31.903

试试[https://github.com/lordelph/icofileloader](https://github.com/lordelph/icofileloader)

```
$loader = new Elphin\IcoFileLoader\IcoFileService;
$im = $loader->extractIcon('/path/to/icon.ico', 32, 32);

//$im is a GD image resource, so we could, for example, save this as a PNG
imagepng($im, '/path/to/output.png'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:53:49.913

函数 imagecreatefromstring() 不适用于 .ico - 格式：imagecreatefromstring() 返回表示从给定图像获得的图像的图像标识符。如果您的 PHP 版本支持这些类型，则会自动检测到这些类型：JPEG、PNG、GIF、WBMP 和 GD2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T12:59:12.417

显然，可以使用此类

[http://www.phpclasses.org/package/2369-PHP-Extract-graphics-from-ico-files-into-PNG-images.html](http://www.phpclasses.org/package/2369-PHP-Extract-graphics-from-ico-files-into-PNG-images.html)

# ios - 从消息到 [CALayer] 的解除分配实例的僵尸堆栈跟踪没有源代码

> ID：14547029
> 
> 赞同：1
> 
> 时间：2013-01-27T11:48:43.387
> 
> 标签：ios, calayer, zombie-process

当堆栈跟踪未链接回源代码时，我希望有人可以帮助如何将消息跟踪到 [CALayer] 的解除分配实例。

我在 XCode 的诊断中启用了 Zombie Objects 并通过 Zombie 分析运行它。

XCode 中的响应是“2013-01-27 22:37:31.506 AdventureA[9695:11303] *** -[CALayer release]: message sent to deallocated instance 0x757b530”

仪器的反应是： ![乐器 - 僵尸](../Images/c67010b94144a68c506897df79dfdc86.png)

我完全不知道如何找出导致问题的原因；我已经看了好几个小时的源代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:42:15.200

好的 - 找到了。有一个 UIButton（当然，它继承自 UIView）被实例化为 buttonWithType 并且我正在释放它。哦。

如此明显的事情变得如此痛苦的原因（对于那些可能不得不处理同样事情的人）；问题是事后看来这一切听起来都很容易：

*   我仍然不知道为什么没有堆栈跟踪使我能够跟踪问题发生的位置。
*   由于僵尸输出中没有可用的源代码，我被指示认为这是“在幕后”发生的事情
*   当我应该查看受取消分配影响的前一个视图时，我正在查看错误发生时的视图。
*   我从今天早上开始就在编码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:36:29.453

注意调用者列表中对 [UIView dealloc] 的两次调用。查看 UIView 对象的分配。你似乎有一个奇怪的生命周期。

# javascript - 照片库的问题

> ID：14547032
> 
> 赞同：0
> 
> 时间：2013-01-27T11:49:38.403
> 
> 标签：javascript, html, css, image, gallery

所以我想在我的网站上添加一个相册。有一个可以下载的 .zip 文件，其中包含所需的一切。我复制了这些文件，替换并检查了文件路径在 .html 文件中是正确的等等，但这就是发生的事情：http: [//i49.tinypic.com/2m4ep0y.png](http://i49.tinypic.com/2m4ep0y.png)

我想要做什么：http: [//net.tutsplus.com/tutorials/javascript-ajax/create-a-spectacular-photo-gallery-with-mootools/](http://net.tutsplus.com/tutorials/javascript-ajax/create-a-spectacular-photo-gallery-with-mootools/)

CSS 代码可以在上面的链接中找到，我的 .css 文件看起来完全一样，只是复制粘贴。HTML文件中的部分也被复制了，所以不确定问题出在哪里。似乎它没有链接到 javascript/css 文件？我已经对路径等进行了三次检查。

HTML 代码，在 BODY 中添加

```
<div id="container">

<h1>Photo Gallery</h1>

<div id="picture_section">
<div id="inside">

</div>
</div>

<div id="controls_vert">
<div id="up" class="deactivated">Scroll Up</div>
<div id="down">Scroll Down</div>
</div>

<div id="controls_horz">
<div id="left">Left</div>
<div id="right">Right</div>
</div>

</div>

<div id="display_picture_container">
<div id="display_picture">Click on the image to go back to the gallery.</div>
<div id="display_picture_img"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:41:10.697

我还下载了源文件，这就是“index.html”中的代码的样子：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Photo Gallery</title>

<link rel="stylesheet" type="text/css" href="main.css" />

<script type="text/javascript" src="mootools.js"></script>
<script type="text/javascript" src="main.js"></script>
</head>

<body>

<div id="container">

<h1>Photo Gallery</h1>

<div id="picture_section">
<div id="inside">

</div>
</div>

<div id="controls_vert">
<div id="up" class="deactivated">Scroll Up</div>
<div id="down">Scroll Down</div>
</div>

<div id="controls_horz">
<div id="left">Left</div>
<div id="right">Right</div>
</div>

</div>

<div id="display_picture_container">
<div id="display_picture">Click on the image to go back to the gallery.</div>
<div id="display_picture_img"></div>
</div>

</body>
</html> 
```

从我在您的屏幕截图中可以看到，它清楚地没有显示任何内容。`main.js`您可以通过替换`thumbs/`并`picture/`使用所需的文件夹名称来更改文件中图像和缩略图的文件路径。尽量保留文件的编号，否则不会显示。另外，您可以将 motools 脚本行替换为教程中指定的行：`<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/mootools/1.2.4/mootools-yui-compressed.js"></script>`

# android - Chrome 反馈系统是 Android 的一部分吗？

> ID：14547033
> 
> 赞同：4
> 
> 时间：2013-01-27T11:49:41.460
> 
> 标签：android

在 Google Chrome 应用程序中，有一个反馈按钮可以打开一个窗口，就像您报告强制关闭时打开的窗口一样。

我想知道这是否是 Android SDK 的一部分，如果是，关于如何使用它的文档在哪里？

![我的意思截图](../Images/5740343a5842abb114a6a87612c11411.png)

*我在这里发布了这个，因为它在技术上是一个开发问题*

# wcf - WCF ChannelFactory 和通道 - 缓存、重用、关闭和恢复

> ID：14547034
> 
> 赞同：12
> 
> 时间：2013-01-27T11:49:45.847
> 
> 标签：wcf, dispose, channel, channelfactory, recover

我的 WCF 客户端库有以下计划架构：

*   使用 ChannelFactory 而不是 svcutil 生成的代理，因为我需要更多控制，而且我想将客户端保留在单独的程序集中并避免在我的 WCF 服务更改时重新生成
*   需要将带有消息检查器的行为应用于我的 WCF 端点，因此每个通道都能够发送自己的身份验证令牌
*   我的客户端库将从 MVC 前端使用，所以我必须考虑可能的线程问题
*   我正在使用 .NET 4.5（也许它有一些帮助程序或新方法可以以更好的方式实现 WCF 客户端？）

我已经阅读了许多关于各种不同位的文章，但我仍然对如何以正确的方式将它们组合在一起感到困惑。我有以下问题：

1.  据我了解，建议将 ChannelFactory 缓存在静态变量中，然后从中获取通道，对吗？
2.  端点行为是特定于整个 ChannelFactory 还是我可以分别为每个通道应用我的身份验证行为？如果行为特定于整个工厂，这意味着我不能在端点行为对象中保留任何状态信息，因为相同的身份验证令牌将被每个通道重用，但显然我希望每个通道都有自己的身份验证令牌当前用户。这意味着，我必须在我的端点行为中计算令牌（我可以将它保存在 HttpContext 中，我的消息检查器行为只会将它添加到传出消息中）。
3.  我的客户端类是一次性的（实现 IDispose）。我如何正确处置通道，知道它可能处于任何可能的状态（未打开、打开、失败......）？我只是丢弃它吗？我要中止它然后丢弃吗？我要关闭它（但它可能根本还没有打开）然后丢弃吗？
4.  如果在使用频道时遇到问题怎么办？是只有通道坏了还是整个 ChannelFactory 坏了？

我猜，一行代码说一千多个单词，所以这是我的代码形式的想法。我已经用“？？？”标记了我上面的所有问题 在代码中。

```
public class MyServiceClient : IDisposable
{
    // channel factory cache
    private static ChannelFactory<IMyService> _factory;
    private static object _lock = new object();

    private IMyService _client = null;
    private bool _isDisposed = false;

     /// <summary>
    /// Creates a channel for the service
    /// </summary>
    public MyServiceClient()
    {
        lock (_lock)
        {
            if (_factory == null)
            {
                // ... set up custom bindings here and get some config values

                var endpoint = new EndpointAddress(myServiceUrl);
                _factory = new ChannelFactory<IMyService>(binding, endpoint);

                // ???? do I add my auth behavior for entire ChannelFactory 
                // or I can apply it for individual channels when I create them?
            }
        }

        _client = _factory.CreateChannel();
    }

    public string MyMethod()
    {
        RequireClientInWorkingState();
        try
        {
            return _client.MyMethod();
        }
        catch
        {
            RecoverFromChannelFailure();
            throw;
        }
    }

    private void RequireClientInWorkingState()
    {
        if (_isDisposed)
            throw new InvalidOperationException("This client was disposed. Create a new one.");

        // ??? is it enough to check for CommunicationState.Opened && Created?
        if (state != CommunicationState.Created && state != CommunicationState.Opened)
            throw new InvalidOperationException("The client channel is not ready to work. Create a new one.");
    }

    private void RecoverFromChannelFailure()
    {
        // ??? is it the best way to check if there was a problem with the channel?
        if (((IChannel)_client).State != CommunicationState.Opened)
        {
            // ??? is it safe to call Abort? won't it throw?
            ((IChannel)_client).Abort();
        }

        // ??? and what about ChannelFactory? 
        // will it still be able to create channels or it also might be broken and must be thrown away? 
        // In that case, how do I clean up ChannelFactory correctly before creating a new one?
    }

    #region IDisposable

    public void Dispose()
    {    
        // ??? is it how to free the channel correctly?
        // I've heard, broken channels might throw when closing 
        // ??? what if it is not opened yet?
        // ??? what if it is in fault state?
        try
        {
            ((IChannel)_client).Close();
        }
        catch
        {
           ((IChannel)_client).Abort();              
        }

        ((IDisposable)_client).Dispose();

        _client = null;
        _isDisposed = true;
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-02T05:32:53.523

我想晚一点再好一点……而且看起来作者已经在工作了，这可能对未来的 WCF 用户有所帮助。

1) ChannelFactory 安排包含通道所有行为的通道。通过 CreateChannel 方法创建通道会“激活”通道。通道工厂可以被缓存。

2）你用绑定和行为来塑造通道工厂。此形状与创建此频道的每个人共享。正如您在评论中指出的那样，您可以附加消息检查器，但更常见的情况是使用 Header 将自定义状态信息发送到服务。您可以通过 OperationContext.Current 附加标头

```
using (var op = new OperationContextScope((IContextChannel)proxy))
{
    var header = new MessageHeader<string>("Some State");
    var hout = header.GetUntypedHeader("message", "urn:someNamespace");
    OperationContext.Current.OutgoingMessageHeaders.Add(hout);
} 
```

3）这是我处理客户端通道和工厂的一般方法（此方法是我的 ProxyBase 类的一部分）

```
public virtual void Dispose()
{
    CloseChannel();
    CloseFactory();
}

protected void CloseChannel()
{
    if (((IChannel)_client).State == CommunicationState.Opened)
    {
        try
        {
            ((IChannel)_client).Close();
        }
        catch (TimeoutException /* timeout */)
        {
            // Handle the timeout exception
            ((IChannel)innerChannel).Abort();
        }
        catch (CommunicationException /* communicationException */)
        {
            // Handle the communication exception
            ((IChannel)_client).Abort();
        }
    }
}

protected void CloseFactory()
{
    if (Factory.State == CommunicationState.Opened)
    {
        try
        {
            Factory.Close();
        }
        catch (TimeoutException /* timeout */)
        {
            // Handle the timeout exception
            Factory.Abort();
        }
        catch (CommunicationException /* communicationException */)
        {
            // Handle the communication exception
            Factory.Abort();
        }
    }
} 
```

4) WCF 将故障通道而不是工厂。您可以实现重新连接逻辑，但这需要您从某些自定义 ProxyBase 创建和派生客户端，例如

```
protected I Channel
{
    get
    {
        lock (_channelLock)
        {
            if (! object.Equals(innerChannel, default(I)))
            {
                ICommunicationObject channelObject = innerChannel as ICommunicationObject;
                if ((channelObject.State == CommunicationState.Faulted) || (channelObject.State == CommunicationState.Closed))
                {
                    // Channel is faulted or closing for some reason, attempt to recreate channel
                    innerChannel = default(I);
                }
            }

            if (object.Equals(innerChannel, default(I)))
            {
                Debug.Assert(Factory != null);
                innerChannel = Factory.CreateChannel();
                ((ICommunicationObject)innerChannel).Faulted += new EventHandler(Channel_Faulted);
            }
        }

        return innerChannel;
    }
} 
```

5) 不要重复使用频道。打开，做某事，关闭是正常的使用模式。

6）创建通用代理基类并从中派生所有客户端。这可能很有帮助，例如重新连接、使用调用前/调用后逻辑、使用工厂中的事件（例如故障、打开）

7) 创建您自己的 CustomChannelFactory 这使您可以进一步控制工厂的行为方式，例如设置默认超时、强制执行各种绑定设置 (MaxMessageSizes) 等。

```
public static void SetTimeouts(Binding binding, TimeSpan? timeout = null, TimeSpan? debugTimeout = null)
        {
            if (timeout == null)
            {
                timeout = new TimeSpan(0, 0, 1, 0);
            }
            if (debugTimeout == null)
            {
                debugTimeout = new TimeSpan(0, 0, 10, 0);
            }
            if (Debugger.IsAttached)
            {
                binding.ReceiveTimeout = debugTimeout.Value;
                binding.SendTimeout = debugTimeout.Value;
            }
            else
            {
                binding.ReceiveTimeout = timeout.Value;
                binding.SendTimeout = timeout.Value;
            }
        } 
```

# java - 操作栏的下拉菜单 - 允许将图标拖放到屏幕上

> ID：14547037
> 
> 赞同：0
> 
> 时间：2013-01-27T11:50:09.490
> 
> 标签：java, android, menu

正如标题所示，我正在尝试将代码添加到我的应用程序中，该代码允许用户单击操作栏菜单中的一个项目，然后展开一个下拉菜单（微调器类？），其中包含一些选项，例如灯、电视等. - 每个都有一个图标。然后，用户将能够选择其中之一并将图标（或代表图标的图像）拖放到画布上，然后在画布上进行绘制。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:19:22.390

如果您指的是 ActionBar 溢出菜单项，那么您必须查看框架中 ActionBar 的代码并在您的应用程序中扩展它，但这首先需要相当麻烦，其次会破坏兼容性在新版本的 Android 中对 ActionBar 进行了更改。

此外，这完全偏离了 ActionBar 的本意。您应该只在溢出菜单中有操作，而不是包含直接与 Activity 内容交互的元素。这是错误的。考虑重新设计您的 UI，以便在内容视图中实现请求的功能，而不是在 ActionBar 上。

# codeplex - 在 codeplex 中上传代码

> ID：14547041
> 
> 赞同：3
> 
> 时间：2013-01-27T11:50:22.117
> 
> 标签：codeplex

我有一个带有源代码的项目。这是一个视觉工作室 2010 解决方案。现在我想将代码作为项目上传到 codeplex。在 codeplex 我可以创建一个新项目，但不能上传代码。我找不到从硬盘上载现有代码的选项。

如果您有任何解决方案，请发给我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-14T17:19:20.977

您不能将源代码上传到 codeplex，您可以使用 Git 将代码推送到他们的服务器。

他们的帮助网站上有一个教程。您可以使用它来了解如何将源代码上传到他们的服务器。

[https://codeplex.codeplex.com/wikipage?title=Using%20Git%20with%20CodePlex&referringTitle=Source%20Control](https://codeplex.codeplex.com/wikipage?title=Using%20Git%20with%20CodePlex&referringTitle=Source%20Control)

去那里学习将代码上传到他们的服务器以供公众使用。

# java - 使用 DynamicQuery 加入和分组

> ID：14547049
> 
> 赞同：1
> 
> 时间：2013-01-27T11:52:06.383
> 
> 标签：java, sql, liferay, liferay-6, dynamicquery

我有一个 SQL 查询：

```
Select t1.*
From tracking As t1
Inner Join (
    Select Max(trackingid) As trackingid, shipid
    From tracking
    Group By shipid
) As t2 On t1.trackingid = t2.trackingid 
```

如何使用 执行此查询`DynamicQuery`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T06:59:31.217

同意库马尔。您不能在动态查询中使用 JOINS。最好使用 custom-sql 或 finder 查询。

# ruby - 与 created_at 不同天数的 ActiveRecord 计数？

> ID：14547051
> 
> 赞同：3
> 
> 时间：2013-01-27T11:53:08.320
> 
> 标签：ruby, ruby-on-rails-3, activerecord

如果需要查询字段（理想情况下，单独使用 ActiveRecord），是否可以根据字段值检索不同记录的计数？

例如，以下基于“created_at”字段返回唯一记录的计数：

```
Record.count('created_at', :distinct => true) 
```

但是，是否有可能以类似的方式根据“created_at”字段计算唯一天数？

一个天真的 ActiveRecord 示例来解释我的意图是：

```
Record.count('created_at'.day, :distinct => true) 
```

（我知道字符串“created_at”不是“时间”，但这是我想问 ActiveRecord 的那种查询。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T12:08:37.883

您需要对记录进行分组。例如

```
Record.group('DATE(created_at)').count('created_at') 
```

告诉您在每个特定日期创建的行数，或

```
Record.group('DAYOFWEEK(created_at)').count('created_at') 
```

会告诉你在一周中的每一天创建的行数。

请注意，使用通常的活动记录设置，这将在 UTC 中进行日期计算，如果您想在特定时区进行计算，则必须将该转换添加到组语句中。

# c++ - 调用模板函数，该函数将模板指针指向函数

> ID：14547053
> 
> 赞同：0
> 
> 时间：2013-01-27T11:53:14.827
> 
> 标签：c++, templates, pointers, typename

我的问题是我尝试调用我的模板函数测试，它需要指向另一个模板函数的指针。因为你不能有指向函数的模板化指针，所以我通过在 struct 中包装这样的 typedef 指针来做到这一点（请参阅[Template typedefs - What's your work around?](https://stackoverflow.com/questions/26151/template-typedefs-whats-your-work-around)）。没关系 - 我可以通过指针调用我的模板函数，但问题是我不能调用以这个指针作为参数的函数。VS2010中的错误是：

c:\projects\sort\sort\sort.cpp(114): 错误 C2059: 语法错误: '}' c:\projects\sort\sort\sort.cpp(124) : 请参阅函数模板实例化 'void test (void (__cdecl *)(std::vector<_Ty> &))' 使用 [ _Ty=int ] 编译

构建失败。

_Ty 是 int，没关系，对吧？

```
#include "stdafx.h"
#include <vector>
#include <iterator>//for ostream_iterator
#include <algorithm>//for copy
#include <iostream>//for cout
#include <map>
#include <boost/timer/timer.hpp>
#include <boost/random.hpp>
#include <functional>

template <typename T>
void insert_sort(typename std::vector<T>& v){ // O(n^2)
    for(std::vector<T>::iterator it=v.begin();it!=v.end();it++){
        std::vector<T>::iterator it2=it; // [0,...,i-1] has been sorted already
        T temp = *it2;
        while(it2!=v.begin() && *(it2-1)>temp){
            *(it2)=*(it2-1);
            it2--;
        }
        *(it2)=temp;
    }
}
void f(int i){std::cout<<i<<" ";}

template<typename T>
struct sort_struct{
    typedef void (*func_sort)(std::vector<T>& );
    typedef std::map<int,T> mymap;
};

template<typename T>
double sortTime(std::vector<T>& v, typename sort_struct<T>::func_sort f){
    boost::timer t; // start timing
    f(v);
    return t.elapsed();
}

template<typename T>
void test(typename sort_struct<T>::func_sort f){
    int i=100;
    while(i<0xFF){
        boost::mt19937 marsenneTwister;
        boost::uniform_int<> unigen;
        boost::variate_generator<boost::mt19937, boost::uniform_int<> > 
            gen(marsenneTwister, unigen);
        std::vector<int> randVec(i);
        std::random_shuffle(randVec.begin(), randVec.end(), gen);
        double elapsed = sortTime(randVec,f);
        std::cout<<i<<","<<elapsed<<std::endl;
            i+=100;
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    std::vector<int> vi(2);
    sort_struct<int>::func_sort isort_int=insert_sort<int>;
    (*isort_int)(vi); // this is OK

    // how to instantiate and call test<int> ?
    test<int>(isort_int); // error
    //...
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:05:01.183

这条线是问题所在：

```
while(i<0xFF)do{ 
```

正确的语法是

```
while(i<0xFF){ 
```

.

# python - Python：我可以使用 HTML / CSS 做 django 项目的前端吗？

> ID：14547061
> 
> 赞同：1
> 
> 时间：2013-01-27T11:54:04.763
> 
> 标签：python, django, web-applications

嗨，我对 Web 开发框架完全陌生。我目前正在从 [Django 项目教程](https://docs.djangoproject.com/en/dev/intro/tutorial03/)中学习 python 和 django 。

我的（相当愚蠢的）问题是，当我完成小型“民意调查”网站后，我能否使用 HTML/CSS 修改该项目的前端？

另外，我应该使用 Dreamweaver 之类的工具来做到这一点吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:12:47.207

你当然可以。这就是 Web 框架让您构建包括前端在内的整个应用程序的重点。

完成本教程后，您将获得所有内容。您会看到 Django 有非常好的模板语言，它允许您根据从应用程序中获得的数据构建一个 html 页面。

```
<h1>{{ section.title }}</h1> 
```

这最终导致正常的 HTML 页面。当然，您可以为这些页面编写任何类型的 CSS，以获得您喜欢的页面外观。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T12:12:55.490

是的，您可以，您需要在 TEMPLATE_DIRS 指定的位置编辑模板。模板只是 html 与一些 python 代码混合来填充内容。

# javascript - “JavaScript 放置在文档末尾，因此页面加载速度更快” 是吗？

> ID：14547062
> 
> 赞同：10
> 
> 时间：2013-01-27T11:54:29.543
> 
> 标签：javascript, twitter-bootstrap

> **可能重复：**
> [页面底部的Javascript？](https://stackoverflow.com/questions/11786915/javascript-on-the-bottom-of-the-page)

我在一些 twitter 引导示例中看到了一条评论。它说

> **JavaScript 放置在文档末尾，因此页面加载速度更快**

这是真的？？如果是，那么它是如何工作的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T12:01:00.573

> **有很多优点**
> 
> *   无需检查 DOM 是否已加载，因为通过在末尾添加脚本，您可以确定它已加载。
> *   JavaScript 脚本文件必须在 Web 浏览器甚至开始下一个 JavaScript 文件之前完全加载。这样做的效果是，如果 JavaScript 文件包含在文档的顶部，那么在最终用户看到实际页面之前会出现视觉延迟。如果您在文档末尾包含 JavaScript 文件，则可以完全避免这种情况。
> 
> **也有一些限制**
> 
> > 虽然在底部包含 JavaScript 文件可以帮助我们解决延迟页面渲染的问题，从而给人一种网站中每个页面加载速度更快的印象，但它确实有一个缺点。
> 
> *   如果页面对最终用户可见，但 JavaScript 文件尚未完成加载，则尚未对元素应用任何事件（因为每个人都使用不引人注目的方法，对吗？）并且用户可能会开始四处点击而不是得到预期的结果。
>     
>     
> *   如果您有适当的后备，例如，如果支持 JavaScript 并且应用了适当的事件，则链接元素通过 AJAX 获取内容，否则它是通向另一个页面的正常链接，那么问题还不错。不过还是有点烦。

有用的文章[在这里](http://robertnyman.com/2008/04/23/where-to-include-javascript-files-in-a-document/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T11:59:08.483

如果浏览器遇到`<script>`标签，*HTMLRenderer*将默认停止，*ECMAscript 解析器*将完成其工作。HTMLRenderer将不会继续，直到所有的 Javascript 代码都被完全评估*。*

因此，如果您的“*上部*`<script>`”HTML 代码中有很多标签和大量 Javascript 代码，您网站的浏览者可能会意识到加载过程很慢。

 *有几种方法可以避免这个问题。第一个是，正如您所提到的，只需将所有 Javascript 代码和标签放在元素`<script>`的最底部。`<body>`这可确保至少所有*HTML 标记*和*样式表定义*都已完全加载。

另一个选项是元素本身的*标签名称。*`<script>`例如，`async`并且`defer`将向*浏览器*/ *JS 解析器*指示不需要立即加载和评估此填充。例如

```
<script async defer src="/foo/bar.js"></script> 
```

*HTML Renderer*将实现标签并将其存储到队列中，但不会直接停止和评估。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-27T12:00:05.287

大多数浏览器执行 JavaScript 并使用同一线程加载页面。因此，当 JavaScript 正在执行时，页面无法加载。因此，如果您的页面包含大量图像或嵌入的内容，这些资产将在 JavaScript 完成执行之前开始加载。

这就是建议将长时间运行的同步代码放在文档末尾的原因，或者将其推迟到页面加载或 DOM 内容加载时加载。然而，现代浏览器通常会通知用户长时间运行的阻塞脚本，并允许他们在需要时终止脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T12:02:08.560

与将它们放在页面末尾一样重要的是，使用 HTML5属性将它们指定为**异步。**`async`这将确保解析器不会*停止并解析它们*，而是继续页面加载流程并并行下载/解析 JS。

[http://davidwalsh.name/html5-async](http://davidwalsh.name/html5-async)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T12:04:25.290

该概念背后的逻辑是，由于浏览器动态呈现您的代码，通过将所有 html 元素放在脚本之前，理论上它可以比您首先拥有脚本更快地加载，假设您有大量的脚本要处理和。

然而在实践中，没有人会遇到这样一种情况，即需要如此多的脚本时间，以至于它会影响网站的加载时间，而不是像 D/L 带宽这样更紧迫的瓶颈。*

# css - 使用 CSS3 模糊滤镜时图像周围的白色模糊？

> ID：14547064
> 
> 赞同：11
> 
> 时间：2013-01-27T11:54:47.537
> 
> 标签：css, filter, blur

今天我虽然我会重新设计我的网站并以不同的方式处理它。虽然我只是添加一个大图像和小文本，而不是专注于排版。我只是做了：

```
html {
    background: url(../img/background.png) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;

    filter: blur(10px);
    -webkit-filter: blur(10px);
    -moz-filter: blur(10px);
    -o-filter: blur(10px);
    -ms-filter: blur(10px);
} 
```

...但是当我在浏览器中看到它时（Chrome 版本 26.0.1386.0 开发版，在 Ubuntu 12.10 上运行），图像模糊，但也出现了褪色的白框。[这是这个问题的截图](https://i.stack.imgur.com/ygvhr.png)。

有没有办法解决这个问题？我查看了[这个 Stack Overflow 问题](https://stackoverflow.com/questions/12224320/defined-edges-with-css3-filter-blur)，但无法正常工作（部分原因是该示例使用了一个`<img>`标签，而不仅仅是一个标签`<html>`）。那个白色的框架在美学上看起来并不好。不，图像没有白框（它只是我桌面的截图，打开了几个窗口，所以没有白框）。任何想法为什么会发生这种情况？

感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-21T16:47:42.600

如果您有可能，我发现的一个很好的解决方法是使图像大于包含的`<div>`，并使用`overflow: hidden`.

在您的情况下，因为它是整个`<html>`标签，所以我会将图像放在`<div>`带有以下 CSS 的 a 中：

```
position: fixed;
top: 0;
left: 0;
transform: scale(1.02); // or whatever scale amount removes the border 
```

这总是对我有用。

# iphone - 如何自定义iOS徽章编号背景

> ID：14547068
> 
> 赞同：1
> 
> 时间：2013-01-27T11:55:30.830
> 
> 标签：iphone, ios, uitabbarcontroller, uitabbaritem, badge

如何自定义 UITabBarItem 上的徽章编号？

像这样的东西

![在此处输入图像描述](../Images/38937ea64161d4d1b8757035c77c881d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T12:30:57.490

看看[MKNumberBadgeView](http://www.cocoacontrols.com/platforms/ios/controls/mknumberbadgeview)。它是您自定义 BadgeView 的一个小类。

像这样使用它，我可以将它添加到我的自定义 UITabBarController：

```
 MKNumberBadgeView *badge = [[MKNumberBadgeView alloc] initWithFrame:CGRectMake(110, self.view.frame.size.height-20, 30, 30)];
    badge.value = 12;
    UIWindow *window = [[UIApplication sharedApplication].windows objectAtIndex:0];
    [[[window subviews] objectAtIndex:0] addSubview:badge]; 
```

威奇看起来像这样：

![在此处输入图像描述](../Images/592b5ee1626b7c59780420a3e4054e9f.png)

当然，在将 badgeView 添加到窗口时，您必须注意旋转问题。但我想你可以自定义 MKNumberBadgeView 让它看起来像你想要的那样，试一试。

# r - 如何在 Mac 上从 R 写入剪贴板

> ID：14547069
> 
> 赞同：30
> 
> 时间：2013-01-27T11:55:49.347
> 
> 标签：r, clipboard

我正在尝试使用 write.table 函数在 mac os 系统上写入我的剪贴板。从其他线程，我试过了

```
data <- rbind(c(1,1,2,3), c(1,1, 3, 4), c(1,4,6,7))
clip <- pipe("pbcopy", "w")                       
write.table(data, file="clip")                               
close(clip) 
```

此代码不会给出任何错误消息，也不会将任何内容复制到剪贴板。有什么建议么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-27T12:00:58.957

我在 OS X 下没有任何机器来测试它，但我认为你应该使用 just`clip`而不是`"clip"`：

```
data <- rbind(c(1,1,2,3), c(1,1, 3, 4), c(1,4,6,7))
clip <- pipe("pbcopy", "w")                       
write.table(data, file=clip)                               
close(clip) 
```

这`clip`是一个 R 对象。

如果您将字符串“clip”传递给`file`参数，R 将认为它是一个文件名，而不是在剪贴板中查找您的数据，您将在 R 会话工作目录中找到一个名为“clip”的文件，其中包含您的数据。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-06-23T17:53:38.293

这是一个老问题，但当我在寻找如何将某些东西放到剪贴板上时，它仍然是一个热门话题。

现在有一个比这里的任何答案更好的解决方案：`clipr`包。

`clipr::write_clip()`是你所需要的全部。它适用于 Windows、OS X 和 X11。

从帮助文件中：“write_clip() 试图以一种有用的方式聪明地编写对象。如果传递一个 data.frame 或矩阵，它将使用 write.table 对其进行格式化以粘贴到外部电子表格程序中。否则它将强制对象到字符向量。自动将检查对象类型，否则可以显式指定表或字符。

我还写了一个小辅助函数来将最后的结果放到剪贴板上：

```
wc <- function(x = .Last.value) {
  clipr::write_clip(x)
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-27T12:26:09.540

您可以使用`Kmisc`包，它包含 2 个用于剪贴板 I/O（读/写）多平台的函数。

```
data <- data.frame(x1 = c(1,1,2,3), x2= c(1,1, 3, 4), x3= c(1,4,6,7))
write.cb(data)               ## wrapper to write.table in pipe("pbcopy") on MAC 
dat <- read.cb(header=T)     ## wrapper to read.table from pipe("pbpaste") on MAC
dat
  x1 x2 x3
1  1  1  1
2  1  1  4
3  2  3  6
4  3  4  7 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-02-04T14:53:48.653

在 Mac OS X 上试试这个：

```
copy_to_clipboard = function(x,sep="\t",col.names=T,...) { 
  write.table(x
             ,file = pipe("pbcopy")
             ,sep=sep
             ,col.names = col.names
             ,row.names = F
             ,quote = F,...)
} 
```

和这个：

```
paste_from_clipboard = function(sep="\t",header=T,...) {       
  read.table(pipe("pbpaste")
            ,sep=sep
            ,header=header,...) 
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-11-03T05:01:29.717

我发现这个很好的代码可以直接从剪贴板导入 Mac 中的数据 Marco Ghislanzoni 的答案

诀窍是使用管道文件。R 中的管道文件可以通过 pipe 函数来处理。接下来，您需要知道与 Mac 剪贴板对应的管道文件的正确名称，即“pbpaste”。

一旦你把它们放在一起，你就有了 read.table 命令的正确语法：

从 Mac OS X 剪贴板R 导入数据

```
data <- read.table(pipe("pbpaste"), sep="\t", header=T) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-24T20:01:23.873

我刚刚写了一些适用于 windows 和 mac 的[通用函数。](https://gist.github.com/dracodoc/74e5d2042efec0dfd9fcdbe6d65cf7e2)要在 Windows 版本中使用相同的参数，它们使用字符向量作为输入和输出。

# java - 设置 rmi 对象的主机地址

> ID：14547072
> 
> 赞同：0
> 
> 时间：2013-01-27T11:56:31.663
> 
> 标签：java, ip-address, rmi, host, stub

我想在 rmi 中设置远程对象的主机地址。是否可以在存根中设置此 IP 地址？

不是：我知道我可以使用 ThreadLocalRmiClientSocket 工厂制造一个技巧，但我不想使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:38:51.983

在远程存根中，您需要为[受保护的 RemoteRef ref](http://docs.oracle.com/javase/1.4.2/docs/api/java/rmi/server/RemoteObject.html#ref)字段设置一个新值。所有远程通信都通过这个对象。由于该字段受到保护，因此您只能在从 RMI 存根派生的自己的类中简单地执行此操作。

不幸的是 RemoteRef 是一个没有公共实现的接口。您可以查看现有的[OpenJDK 实现](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/rmi/server/UnicastRef.java)。从那里可以看出，有一个实现`sun.rmi.server.UnicastRef`需要 a`LiveRef`并且一个需要`Endpoint`。`Endpoint`已经是比较容易理解的类了。您可能需要在代码中复制这些类的功能。

为了确保存根类确实存在，请使用 rmic 生成它，甚至可以使用`-keepgenerated`这样您就可以检查该字段确实存在的源代码 - 谁知道特定实现的细节。

一般来说，这绝不是一个优雅而简单的解决方案，但它应该可以工作。

**扩展**：由于这一切看起来相当复杂，我建议获取一个新的有效存根，该存根指向远程服务的更新位置并从中窃取`ref`字段的值。这似乎相对容易做到，如果当前存根与某些数据结构纠缠在一起，因此您无法轻松替换它，这可能是合理的。存根本身并不关心主机、端口、对象 id 或 watsoever，只要远程端继续实现相同的远程合约——只有它自己关心`RemoteRef`。Stub 依赖于[RemoteRef.invoke](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/rmi/server/RemoteRef.java.html)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-27T22:11:58.017

在导出任何远程对象之前，您需要在服务器 JVM 中适当地设置系统属性“java.rmi.server.hostname”。然后在导出时创建该值时将该值嵌入到存根中。

# optimization - 在 OpenCL 中更快地构建偏移邻域上的操作

> ID：14547073
> 
> 赞同：4
> 
> 时间：2013-01-27T11:56:40.467
> 
> 标签：optimization, opencl, gpgpu, pyopencl

**如何对 2D 数组的许多重叠但偏移的块进行操作，以便在 OpenCL 中更有效地执行？**

例如，我有以下 OpenCL 内核：

```
__kernel void test_kernel(
    read_only image2d_t src,
    write_only image2d_t dest,
    const int width,
    const int height
)
{
    const sampler_t sampler =  CLK_NORMALIZED_COORDS_FALSE | CLK_ADDRESS_CLAMP_TO_EDGE | CLK_FILTER_NEAREST;
    int2 pos = (int2)(get_global_id(0), get_global_id(1));
    int2 pos0 = (int2)(pos.x - pos.x % 16, pos.y - pos.y % 16);

    uint4 diff = (uint4)(0, 0, 0, 0);

    for (int i=0; i<16; i++)
    {
        for (int j=0; j<16; j++)
        {
            diff += read_imageui(src, sampler, (int2)(pos0.x + i, pos0.y + j)) -
                read_imageui(src, sampler, (int2)(pos.x + i, pos.y + j));
        }
    }
    write_imageui(dest, pos, diff);
} 
```

它产生正确的结果，但速度很慢......在 NVS4200M 上只有 ~25 GFLOPS，输入为 1k x 1k。（硬件规格为 155 GFLOPS）。我猜这与内存访问模式有关。每个工作项读取一个 16x16 数据块，该数据块与 16x16 区域中的所有邻居相同，并且另一个偏移数据块大部分时间与其直接邻居的数据重叠。所有读取均通过采样器。主机程序是 PyOpenCL（我认为这实际上并没有改变任何东西），工作组大小是 16x16。

**编辑**：根据以下建议的新版本内核，将工作区复制到局部变量：

```
__kernel __attribute__((reqd_work_group_size(16, 16, 1)))
void test_kernel(
    read_only image2d_t src,
    write_only image2d_t dest,
    const int width,
    const int height
)
{
    const sampler_t sampler =  CLK_NORMALIZED_COORDS_FALSE | CLK_ADDRESS_CLAMP_TO_EDGE | CLK_FILTER_NEAREST;
    int2 pos = (int2)(get_global_id(0), get_global_id(1));

    int dx = pos.x % 16;
    int dy = pos.y % 16;

    __local uint4 local_src[16*16];
    __local uint4 local_src2[32*32];

    local_src[(pos.y % 16) * 16 + (pos.x % 16)] = read_imageui(src, sampler, pos);
    local_src2[(pos.y % 16) * 32 + (pos.x % 16)] = read_imageui(src, sampler, pos);
    local_src2[(pos.y % 16) * 32 + (pos.x % 16) + 16] = read_imageui(src, sampler, (int2)(pos.x + 16, pos.y));
    local_src2[(pos.y % 16 + 16) * 32 + (pos.x % 16)] = read_imageui(src, sampler, (int2)(pos.x, pos.y + 16));
    local_src2[(pos.y % 16 + 16) * 32 + (pos.x % 16) + 16] = read_imageui(src, sampler, (int2)(pos.x + 16, pos.y + 16));
    barrier(CLK_LOCAL_MEM_FENCE);

    uint4 diff = (uint4)(0, 0, 0, 0);

    for (int i=0; i<16; i++)
    {
        for (int j=0; j<16; j++)
        {
            diff += local_src[ j*16 + i ] - local_src2[ (j+dy)*32 + i+dx ];
        }
    }
    write_imageui(dest, pos, diff);
} 
```

结果：输出正确，运行时间*慢 56%*。如果只使用 local_src（而不是 local_src2），结果会快 10%。

**编辑**：以更强大的硬件为基准，AMD Radeon HD 7850 获得 420GFLOPS，规格为 1751GFLOPS。公平地说，规范是针对乘加的，这里没有乘法，所以预期是~875GFLOPS，但这与理论性能相比仍然相差很多。

**编辑**：为了方便任何想尝试这个的人的运行测试，下面 PyOpenCL 中的主机端程序：

```
import pyopencl as cl
import numpy
import numpy.random
from time import time

CL_SOURCE = ''' 
// kernel goes here
'''

ctx = cl.create_some_context()
queue = cl.CommandQueue(ctx, properties=cl.command_queue_properties.PROFILING_ENABLE)
prg = cl.Program(ctx, CL_SOURCE).build()

h, w = 1024, 1024
src = numpy.zeros((h, w, 4), dtype=numpy.uint8)
src[:,:,:] = numpy.random.rand(h, w, 4) * 255

mf = cl.mem_flags
src_buf = cl.image_from_array(ctx, src, 4)
fmt = cl.ImageFormat(cl.channel_order.RGBA, cl.channel_type.UNSIGNED_INT8)
dest_buf = cl.Image(ctx, mf.WRITE_ONLY, fmt, shape=(w, h))

# warmup
for n in range(10):
    event = prg.test_kernel(queue, (w, h), (16,16), src_buf, dest_buf, numpy.int32(w), numpy.int32(h))
event.wait()

# benchmark
t1 = time()
for n in range(100):
    event = prg.test_kernel(queue, (w, h), (16,16), src_buf, dest_buf, numpy.int32(w), numpy.int32(h))
event.wait()
t2 = time()
print "Duration (host): ", (t2-t1)/100
print "Duration (event): ", (event.profile.end-event.profile.start)*1e-9 
```

**编辑**：考虑内存访问模式，原来的幼稚版本可能还不错；当调用`read_imageui(src, sampler, (int2)(pos0.x + i, pos0.y + j))`工作组中的所有工作项时正在读取相同的位置（所以这只是一次读取？？），并且在调用时`read_imageui(src, sampler, (int2)(pos.x + i, pos.y + j))`它们正在读取顺序位置（因此可以完美地合并读取？？）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T15:22:22.550

这绝对是一个内存访问问题。相邻工作项的像素最多可以重叠 15x16，更糟糕的是，每个工作项至少会重叠 225 个其他像素。

我会使用本地内存并让工作组合作处理许多 16x16 块。我喜欢为每个工作组使用一个大的方形块。矩形块有点复杂，但可以为您获得更好的内存利用率。

如果您从源图像中读取 n x n 像素的块，边界将重叠 nx15（或 15xn）。您需要根据可用的本地内存大小 (LDS) 计算 n 的最大可能值。如果您使用的是 opencl 1.1 或更高版本，则 LDS 至少为 32kb。opencl 1.0 承诺每个工作组 16kb。

```
n <= sqrt(32kb / sizeof(uint4))
n <= sqrt(32768 / 16)
n ~ 45 
```

使用 n=45 将使用 LDS 的 32768 个字节中的 32400 个，并让您每组使用 900 个工作项 (45-15)^2 = 900。注意：这里使用矩形块会有所帮助；例如 64x32 将使用所有 LDS，但组大小 = (64-15)*(32-15) = 833。

为您的内核使用 LDS 的步骤：

1.  为图像的缓存块分配一维或二维本地数组。我使用#define 常量，它很少需要更改。
2.  从图像中读取 uint 值，并在本地存储。
3.  调整每个工作项的“pos”以与本地内存相关
4.  执行相同的 i,j 循环，但使用本地内存读取值。请记住，i 和 j 循环在 n 处停止 15。

每个步骤如果不知道怎么实现可以在网上搜索，也可以问我是否需要帮忙。

您设备上的 LDS 很有可能会超过纹理读取速度。这是违反直觉的，但请记住，您一次读取的数据量很小，因此 gpu 可能无法有效地缓存像素。LDS 的使用将保证像素可用，并且考虑到每个像素被读取的次数，我希望这会产生巨大的差异。

请让我知道您观察到什么样的结果。

**更新：**这是我试图更好地解释我的解决方案。我用方格纸作画，因为我不太擅长图像处理软件。

![值最初是如何来自“src”的](../Images/1d48fd1e3b2834af6dc9e35636cc7594.png)

上面是如何在您的第一个代码片段中从 src 读取值的草图。最大的问题是 pos0 矩形 - 16x16 uint4 值 - 正在为组中的每个工作项（其中 256 个）完整读取。我的解决方案包括读取一个大区域并为所有 256 个工作组共享数据。

![在此处输入图像描述](../Images/972c14eca0753322a0d324c468a10e97.png)

如果您将图像的 31x31 区域存储在本地内存中，则所有 256 个工作项的数据都将可用。

脚步：

*   使用工作组维度：(16,16)
*   将 src 的值读入一个大的本地缓冲区，即：uint4 buff[31][31]；需要翻译缓冲区，使 'pos0' 位于 buff[0][0]
*   屏障（CLK_LOCAL_MEM_FENCE）等待内存复制操作
*   对原来的循环执行相同的 i,j 操作，只是省略了 pos 和 pos0 值。仅使用 i 和 j 作为位置。以与最初相同的方式累积“差异”。
*   将解决方案写入“dest”

这与我对您的问题的第一次回答相同，只是我使用 n=16。此值不会完全利用本地内存，但可能适用于大多数平台。256 往往是常见的最大工作组大小。

我希望这可以为您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:32:15.923

一些建议：

*   在每个工作项中计算超过 1 个输出像素。它将增加数据重用。
*   对不同的工作组大小进行基准测试，以最大限度地利用纹理缓存。
*   也许有一种方法可以将内核分成两个通道（水平和垂直）。

**更新**：更多建议

不要将所有内容都加载到本地内存中，而是尝试仅加载 local_src 值，并将 read_image 用于另一个值。

由于您几乎不进行任何计算，因此您应该以 GB/s 为单位测量读取速度，并与峰值内存速度进行比较。

# excel - 在没有宏的 Excel 中重置（超链接）

> ID：14547080
> 
> 赞同：0
> 
> 时间：2013-01-27T11:57:48.370
> 
> 标签：excel, excel-2007, excel-formula, excel-2010

我有一个电子表格，其中包含多个工作表，其中包含各种计算。我想要的是创建一个 RESET 按钮（或超链接），使用它我可以将所有值重置为默认值！

但是，由于安全问题，我限制自己不使用宏。有没有一种方法可以创建这样一个 RESET 按钮，单击该按钮将： - 清除工作表中的特定单元格！- 在工作表中将特定单元格设置为其默认值！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:01:28.527

因此，您可以只制作一个仅用于“重置”的单元格，并让它说是/否以使用下面的示例。您可以将“覆盖”列留空，它会以任何一种方式获取原始计算。这很 hacky，但如果你要远离 vba，这可能是你最好的选择。我建议做一些验证和 NameRanges 以保持它尽可能干净，因为如果你增加它的复杂性，你可能会遇到麻烦。基本上要清除单元格，只需将“覆盖”保留在同一列中，并在将重置从“否”更改为“是”时将其清除。

我还不能发布图片，但下面的说明应该可以工作（请信誉！）

```
A1 = 'Reset'
A2 = yes/no [validation]
A4 = a
A5 = 1
B4 = b
B5 = 2
C4 = 'Original Result'
C5 = A5 + B5
D4 = 'Overwrite'
D5 = whatever formula/entry you want to overwrite your original calculation
E4 = 'Result'
E5 = =IF(A2="yes",C5,IF(D5="",C5,D5)) 
```

# android - 原始相机显示在空中

> ID：14547082
> 
> 赞同：1
> 
> 时间：2013-01-27T11:57:50.650
> 
> 标签：android, actionscript-3, apache-flex, air, camera

我们正在尝试在屏幕的一部分（原始相机）上显示相机。它在 Android 设备上显示奇怪的黑白显示，但在模拟器上可以正常工作。你对如何解决这个问题有什么想法？

编辑：Camera-> Raw Camera 中的“Tour de Mobile Flex”应用程序有同样的问题。![在此处输入图像描述](../Images/e26bf359917a01d08c2fad40e55f3fcb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T16:59:04.140

我`<renderMode>direct</renderMode>`在 app.xml 中设置。该配置解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T03:33:54.117

将渲染模式设置为直接也适用于我（Nexus S 4.1.2 上的 AIR 3.4）。

如果您不想手动管理清单文件，可以在 CS6 的发布设置对话框（“编辑应用程序设置”）中完成。

# php - PrestaShop 1.3.1 仅在当前页面排序产品

> ID：14547083
> 
> 赞同：0
> 
> 时间：2013-01-27T11:57:55.540
> 
> 标签：php, sorting, prestashop

亲爱的同事们，

我在 prestashop 1.3.1 中按价格排序有问题。当我从“最低价”或“最高价”中选择排序时，它有效，但仅在当前页面中。这是一个非常恼人的错误，我不知道如何修复它。我了解到这个错误很难修复，它在 1.4 版本中得到了解决，但我无法将我的 presta 商店从 1.3.1 升级到 1.4。谁能知道如何解决它或给我一些指示？

您的提示将不胜感激。

提前谢谢了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:41:57.723

我很久没用 PS 1.3 但我会尽力回答你...

如果要保持页面之间的排序，则必须更改分页中的链接以添加顺序参数。

在您的文件“/themes/[your-theme]/pagination.tpl”中，通过将“$link->goPage()”替换为正确的链接来编辑链接。查看“product-sort.tpl”以获得灵感。

在尝试更改它们之前尝试手动调用这些链接，我不确定订单是否会保留，我现在无法为您测试。

# process - 在 windows 或 linux 中为应用程序或进程或程序创建了多少线程？

> ID：14547085
> 
> 赞同：0
> 
> 时间：2013-01-27T11:57:59.993
> 
> 标签：process, operating-system

假设我正在运行一个简单的 C 程序。如何知道哪个线程正在执行这个程序？或者有什么办法可以让我确定我的程序被翻译成一个进程，这个进程又被分成线程。非常抱歉对整个概念的任何错误理解。如果有一个例子来解释我的困惑的解决方案，那就太好了（其实我想直接问如何输出进程id--->线程数，并列出所有线程id）。如何可视化上述概念（如果它们是正确的顺便说一句）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:05:02.813

除非另有说明，否则程序仅由一个线程组成，即主线程。通过调用 pthread_create (from ) 可以创建更多线程。如果您查看 /proc/pid/status （将 pid 替换为进程 ID），您可以看到程序中的确切线程数。

简而言之，将进程视为一个容器，用于一个或多个线程。执行的是线程本身（线程只是一个寄存器状态），而进程包含虚拟内存映像、打开的文件描述符和其他“对象”。

查看状态文件，您将看到“TGID”和“PID”字段。“PID”实际上是线程ID，而“TGID”是线程组ID，它是真正的进程ID。对于简单的进程（只有一个线程），这些是相等的。但是对于多线程（2 个线程或更多），它们仅对主线程是相等的。除了这个文件之外，“PID”确实意味着进程 ID，因为 Linux 模仿了 UNIX 标准。

您可能想尝试的其他命令： ps -L ：这将向您显示“LWP”（这是线程标识符）。如果您查看包含“l”的 ps 的“STATE”列，您可以识别多线程程序，表示多线程进程。

# c - 用单次乘法提取位

> ID：14547087
> 
> 赞同：314
> 
> 时间：2013-01-27T11:58:23.600
> 
> 标签：c, multiplication, bit-manipulation

[我在另一个问题的](https://stackoverflow.com/questions/14537831/isolate-specific-row-column-diagonal-from-a-64-bit-number)[答案](https://stackoverflow.com/a/14539116/367273)中看到了一种有趣的技术，并且想更好地理解它。

我们得到一个无符号的 64 位整数，我们对以下位感兴趣：

```
1.......2.......3.......4.......5.......6.......7.......8....... 
```

具体来说，我们希望将它们移动到前八位，如下所示：

```
12345678........................................................ 
```

我们不关心由 指示的位的值`.`，也不必保留它们。

[解决方案](https://stackoverflow.com/a/14539116/367273)是屏蔽掉不需要的位，并将结果乘以`0x2040810204081`. 事实证明，这可以解决问题。

这种方法有多普遍？这种技术可以用来提取比特的任何子集吗？如果不是，如何确定该方法是否适用于特定的一组位？

最后，如何找到（a？）正确的乘数来提取给定的位？

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2013-01-27T12:27:51.370

非常有趣的问题，巧妙的把戏。

让我们看一个处理单个字节的简单示例。为简单起见，使用无符号 8 位。想象一下你的号码是`xxaxxbxx`你想要`ab000000`的。

该解决方案包括两个步骤：位掩码，然后是乘法。位掩码是一个简单的 AND 操作，将不感兴趣的位变为零。在上述情况下，您的掩码将是`00100100`和结果`00a00b00`。

现在最困难的部分：把它变成`ab......`.

乘法是一堆移位和加法运算。关键是允许溢出“移走”我们不需要的位并将我们想要的位放在正确的位置。

乘以 4( `00000100`) 会将所有内容左移 2 并得到`a00b0000`。为了让`b`a 向上移动，我们需要乘以 1（将 a 保持在正确的位置）+ 4（将 b 向上移动）。这个和是 5，再加上前面的 4，我们得到一个幻数 20，或`00010100`。原来是`00a00b00`蒙版后的；乘法给出：

```
000000a00b000000
00000000a00b0000 +
----------------
000000a0ab0b0000
xxxxxxxxab...... 
```

通过这种方法，您可以扩展到更大的数字和更多位。

你问的一个问题是“这可以用任意数量的比特来完成吗？” 我认为答案是“不”，除非您允许多次屏蔽操作或多次乘法。问题是“碰撞”的问题——例如上面问题中的“流浪b”。想象一下，我们需要对像`xaxxbxxcx`. 按照前面的方法，你会认为我们需要 {x 2, x {1 + 4 + 16}} = x 42（哦——所有问题的答案！）。结果：

```
00000000a00b00c00
000000a00b00c0000
0000a00b00c000000
-----------------
0000a0ababcbc0c00
xxxxxxxxabc...... 
```

如您所见，它仍然有效，但“只是”。这里的关键是我们想要的位之间有“足够的空间”，我们可以把所有东西都挤起来。我不能在 c 之后立即添加第四位 d，因为我会得到 c+d 的实例，位可能携带，...

因此，如果没有正式的证据，我将回答您问题中更有趣的部分如下：“不，这不适用于任何位数。要提取 N 位，您需要在您想要的位之间有 (N-1) 个空格提取，或有额外的掩码乘法步骤。”

对于“位之间必须有 (N-1) 个零”规则，我能想到的唯一例外是：如果要提取原始中彼此相邻的两个位，并且要将它们保留在同样的顺序，那么你仍然可以做到。并且出于 (N-1) 规则的目的，它们计为两位。

还有另一种见解 - 受到下面@Ternary 答案的启发（请参阅我的评论）。对于每个有趣的位，您只需要它右侧的零，因为您需要空间用于需要去那里的位。而且，它需要的左侧位数与左侧的结果位数一样多。因此，如果位 b 最终位于 n 的位置 m，那么它的左侧需要有 m-1 个零，右侧需要有 nm 个零。特别是当位在原始编号中的顺序与重新排序后的顺序不同时，这是对原始标准的重要改进。这意味着，例如，一个 16 位字

```
a...e.b...d..c.. 
```

可以转成

```
abcde........... 
```

即使 e 和 b 之间只有一个空格，d 和 c 之间只有两个空格，其他空格之间只有三个空格。N-1怎么了？？在这种情况下，`a...e`变成“一个块”——它们乘以 1 以在正确的位置结束，因此“我们免费获得了 e”。b 和 d 也是如此（b 需要右边三个空格，d 需要左边三个空格）。所以当我们计算幻数时，我们发现有重复：

```
a: << 0  ( x 1    )
b: << 5  ( x 32   )
c: << 11 ( x 2048 )
d: << 5  ( x 32   )  !! duplicate
e: << 0  ( x 1    )  !! duplicate 
```

显然，如果您希望这些数字以不同的顺序排列，则必须将它们间隔得更远。我们可以重新制定`(N-1)`规则：“如果位之间至少有 (N-1) 个空格，它将始终有效；或者，如果最终结果中的位顺序已知，那么如果位 b 最终位于n，它的左边需要有 m-1 个零，右边需要有 nm 个零。”

@Ternary 指出这条规则不太适用，因为可能有一个进位从位添加“就在目标区域的右侧” - 即，当我们正在寻找的位都是 1 时。继续我上面给出的例子，在一个 16 位字中包含五个紧凑的位：如果我们从

```
a...e.b...d..c.. 
```

为简单起见，我将命名位位置`ABCDEFGHIJKLMNOP`

我们要做的数学是

```
ABCDEFGHIJKLMNOP

a000e0b000d00c00
0b000d00c0000000
000d00c000000000
00c0000000000000 +
----------------
abcded(b+c)0c0d00c00 
```

到目前为止，我们认为任何低于`abcde`(positions `ABCDE`) 的东西都无关紧要，但实际上，正如@Ternary 指出的那样，如果`b=1, c=1, d=1`then `(b+c)`in position`G`会导致 bit 进位到 position `F`，这意味着`(d+1)`in position`F`会进位`E`- 而我们的结果被宠坏了。请注意，感兴趣的最低有效位（`c`在此示例中）右侧的空间无关紧要，因为乘法将导致在最低有效位之外用零填充。

所以我们需要修改我们的 (m-1)/(nm) 规则。如果有不止一个位在右侧有“恰好 (nm) 个未使用的位（不包括模式中的最后一位 - 上例中的“c”），那么我们需要加强规则 - 我们必须反复这样做！

我们不仅要查看满足 (nm) 标准的位数，还要查看处于 (n-m+1) 处的位数等。让我们称它们的数为 Q0（精确`n-m`到下一位），Q1 ( n-m+1)，直到 Q(N-1) (n-1)。然后我们冒险携带如果

```
Q0 > 1
Q0 == 1 && Q1 >= 2
Q0 == 0 && Q1 >= 4
Q0 == 1 && Q1 > 1 && Q2 >=2
... 
```

如果你看这个，你可以看到如果你写一个简单的数学表达式

```
W = N * Q0 + (N - 1) * Q1 + ... + Q(N-1) 
```

结果是`W > 2 * N`，那么您需要将 RHS 标准增加一位`(n-m+1)`。此时，操作是安全的`W < 4`；如果这不起作用，请再增加一个标准，等等。

我认为遵循上述内容将使您对答案有很长的路要走...

* * *

## 回答 #2

> 赞同：159
> 
> 时间：2013-01-27T20:19:39.277

确实非常有趣的问题。我用我的两分钱插话，也就是说，如果你能设法用位向量理论的一阶逻辑来陈述这样的问题，那么定理证明器就是你的朋友，并且可能为你提供非常快的回答您的问题。让我们将所提出的问题重新表述为定理：

“存在一些 64 位常量 'mask' 和 'multiplicand' 这样，对于所有 64 位位向量 x，在表达式 y = (x & mask) * multiplicand 中，我们有 y.63 == x.63 , y.62 == x.55, y.61 == x.47 等"

如果这句话实际上是一个定理，那么常数 'mask' 和 'multiplicand' 的某些值确实满足这个性质。因此，让我们用定理证明者可以理解的东西来表达这一点，即 SMT-LIB 2 输入：

```
(set-logic BV)

(declare-const mask         (_ BitVec 64))
(declare-const multiplicand (_ BitVec 64))

(assert
  (forall ((x (_ BitVec 64)))
    (let ((y (bvmul (bvand mask x) multiplicand)))
      (and
        (= ((_ extract 63 63) x) ((_ extract 63 63) y))
        (= ((_ extract 55 55) x) ((_ extract 62 62) y))
        (= ((_ extract 47 47) x) ((_ extract 61 61) y))
        (= ((_ extract 39 39) x) ((_ extract 60 60) y))
        (= ((_ extract 31 31) x) ((_ extract 59 59) y))
        (= ((_ extract 23 23) x) ((_ extract 58 58) y))
        (= ((_ extract 15 15) x) ((_ extract 57 57) y))
        (= ((_ extract  7  7) x) ((_ extract 56 56) y))
      )
    )
  )
)

(check-sat)
(get-model) 
```

现在让我们问定理证明者 Z3 这是否是一个定理：

```
z3.exe /m /smt2 ExtractBitsThroughAndWithMultiplication.smt2 
```

结果是：

```
sat
(model
  (define-fun mask () (_ BitVec 64)
    #x8080808080808080)
  (define-fun multiplicand () (_ BitVec 64)
    #x0002040810204081)
) 
```

答对了！它在 0.06 秒内重现了原始帖子中给出的结果。

从更一般的角度来看，我们可以将其视为一阶程序综合问题的一个实例，这是一个新兴的研究领域，很少有论文发表。搜索`"program synthesis" filetype:pdf`应该让你开始。

* * *

## 回答 #3

> 赞同：89
> 
> 时间：2013-01-27T12:57:15.673

乘法器中的每个 1 位用于将其中一个位复制到其正确位置：

*   `1`已经在正确的位置，所以乘以`0x0000000000000001`.
*   `2`必须向左移动 7 位，所以我们乘以`0x0000000000000080`（设置了第 7 位）。
*   `3`必须向左移动 14 位位置，所以我们乘以`0x0000000000000400`（设置了第 14 位）。
*   依此类推，直到
*   `8`必须向左移动 49 位位置，因此我们乘以`0x0002000000000000`（设置了第 49 位）。

乘数是各个位的乘数之和。

这只起作用是因为要收集的位不是靠得太近，因此在我们的方案中不属于一起的位的乘法要么超出 64 位，要么位于较低的无关部分。

请注意，原始数字中的其他位必须是`0`。这可以通过使用 AND 操作屏蔽它们来实现。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2013-01-27T20:14:15.567

*（我以前从未见过。这个技巧很棒！）*

我将对 Floris 的断言进行一些扩展，即在提取`n`位时，您需要`n-1`在任何非连续位之间留出空间：

我最初的想法（我们将在一分钟内看到这如何不起作用）是你可以做得更好：如果你想提取`n`位，`i`如果你有任何人（非- 在前面的位或后面的位中与 bit `i`)连续。`i-1``n-i`

我举几个例子来说明：

`...a..b...c...`有效（之后的 2 位中没有人，`a`之前的位和之后的位`b`中没有人，之前的 2 位中没有人`c`）：

```
 a00b000c
+ 0b000c00
+ 00c00000
= abc..... 
```

`...a.b....c...`失败是因为`b`在 2 位之后`a`（当我们 shift 时被拉到其他人的位置`a`）：

```
 a0b0000c
+ 0b0000c0
+ 00c00000
= abX..... 
```

`...a...b.c...`失败，因为`b`is 在前面的 2 位中`c`（当我们 shift 时被推到其他人的位置`c`）：

```
 a000b0c0
+ 0b0c0000
+ b0c00000
= Xbc..... 
```

`...a...bc...d...`有效，因为连续的位一起移位：

```
 a000bc000d
+ 0bc000d000
+ 000d000000
= abcd000000 
```

**但是我们有一个问题。**如果我们使用`n-i`而不是，`n-1`我们可能会遇到以下情况：如果我们在我们关心的部分之外发生碰撞，我们会在最后屏蔽掉一些东西，但其进位位最终会干扰重要的未屏蔽范围? （注意：当我们移动第th 位时`n-1`，通过确保我们的未屏蔽范围之后的位是清晰的，要求确保不会发生这种情况）`i-1``i`

`...a...b..c...d...`进位的潜在故障`c`在`n-1`after中`b`，但满足`n-i`标准：

```
 a000b00c000d
+ 0b00c000d000
+ 00c000d00000
+ 000d00000000
= abcdX....... 
```

那么我们为什么不回到那个“`n-1`空间位”的要求呢？ **因为我们可以做得更好**：

`...a....b..c...d..` *未*通过“`n-1`位空间”测试，但*适用*于我们的位提取技巧：

```
+ a0000b00c000d00
+ 0b00c000d000000
+ 00c000d00000000
+ 000d00000000000
= abcd...0X...... 
```

我想不出一个好的方法来描述这些在重要位之间没有空间的字段，*但*`n-1`仍然适用于我们的操作。但是，由于**我们提前知道**我们感兴趣的位，我们可以检查我们的过滤器以确保我们不会遇到进位冲突：

`(-1 AND mask) * shift`与预期的全一结果进行比较， `-1 << (64-n)`（对于 64 位无符号）

当且仅当两者相等时，提取我们的位的魔术移位/乘法才有效。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-04-14T12:00:35.823

除了这个非常有趣的问题已经得到很好的答案之外，知道这种按位乘法技巧自 2007 年以来就在计算机国际象棋社区中广为人知，它以[**Magic BitBoards**](http://chessprogramming.wikispaces.com/Magic+Bitboards)的名义出现，这可能会很有用。

许多计算机国际象棋引擎使用几个 64 位整数（称为位板）来表示各种棋子集（每个占用的方格 1 位）。假设在某个原点格子上的一个滑动棋子（车、主教、皇后）在`K`没有阻塞棋子存在的情况下最多可以移动到格子。将那些分散的`K`位与占用方块的位板一起使用按位与会给出`K`嵌入在 64 位整数中的特定位字。

魔术乘法可用于将这些分散`K`的位映射到`K`64 位整数的低位。然后可以使用这些较低的`K`位来索引预先计算的位板表，该表表示其原始方块上的块实际上可以移动到的允许方块（注意块块等）

使用这种方法的典型国际象棋引擎有 64 个条目（每个原始方格一个）的 2 个表（一个用于白车，一个用于主教，皇后使用两者的组合），其中包含此类预先计算的结果。评价最高的封闭源代码 ( [**Houdini**](http://www.talkchess.com/forum/viewtopic.php?topic_view=threads&p=368026&t=35858) ) 和开源国际象棋引擎 ( [**Stockfish**](https://github.com/mcostalba/Stockfish/blob/master/src/bitboard.cpp) ) 目前都使用这种方法，因为它具有非常高的性能。

Finding these magic multipliers is done either using an [**exhaustive search**](http://www.pradu.us/old/Nov27_2008/Buzz/research/magic/Bitboards.pdf) (optimized with early cutoffs) or with [**trial and erorr**](http://chessprogramming.wikispaces.com/Looking+for+Magics) (e.g. trying lots of random 64-bit integers). There have been no bit patterns used during move generation for which no magic constant could be found. However, bitwise carry effects are typically necessary when the to-be-mapped bits have (almost) adjacent indices.

AFAIK, the very general SAT-solver approachy by @Syzygy has not been used in computer chess, and neither does there appear to be any formal theory regarding existence and uniqueness of such magic constants.

# c# - 使用“PST”格式解析字符串到日期

> ID：14547091
> 
> 赞同：4
> 
> 时间：2013-01-27T11:58:54.667
> 
> 标签：c#, parsing, datetime

在我们的应用程序服务器中以这样的格式给出日期时间字符串 `"2013-01-14 T 06:33 PST"`和`"2013-01-14 T 06:33 PDT"`或`"2013-01-14 T 06:33 PLT"`

我如何解析这些字符串并在 C# 中获取 DateTime？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:13:37.747

获得日期时间后，您可以使用`TimeZoneInfo`

```
DateTime dateTime = DateTime.Parse("2013-01-14 T 06:33");
TimeZoneInfo PST = TimeZoneInfo.FindSystemTimeZoneById("Pacific Standard Time");
TimeZoneInfo yourZone = TimeZoneInfo.FindSystemTimeZoneById("Pakistan Standard Time"); //For example
DateTime yourLocalTime = TimeZoneInfo.ConvertTime(dateTime, PST , yourZone ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:02:29.280

试试这个： -

```
DateTime dt1 = DateTime.ParseExact("2013-01-14 21:09:06 PST".Replace("PST", "+2"), "yyyy-mm-dd HH:mm z", culture);
DateTime dt2 = DateTime.ParseExact("2013-01-14 21:09:06 PDT".Replace("PDT", "+2"), "yyyy-mm-dd HH:mm z", culture);
DateTime dt3 = DateTime.ParseExact("2013-01-14 21:09:06 PLT".Replace("PLT", "+2"), "yyyy-mm-dd HH:mm z", culture); 
```

# vb.net - 如何引用位于不同选项卡上的控件 (VB.NET)

> ID：14547096
> 
> 赞同：0
> 
> 时间：2013-01-27T11:59:14.620
> 
> 标签：vb.net, datagridview, tabs, tabcontrol

我有一个用 VB.NET 编写的应用程序，它从文件中读取数据并在屏幕上显示数据。

根据文件中的数据，程序有一个 TabControl，最多有 3 个选项卡，每个选项卡又都有一个用于显示数据的 DataGridView。例如，我有一个 TabControl，它有一个名为“Saturday”的选项卡和一个名为“Sunday”的选项卡。

我遇到的问题是，当我从文件中读取数据时，程序会在星期六的选项卡网格上显示所有数据，因为我不确定如何在星期日选项卡上引用网格。

要添加 DataGridView，我使用以下代码：

```
Grid = New DataGridView
Grid.Dock = DockStyle.Fill
Grid.Name = "Grid" & TabControl.SelectedIndex
Grid.Tag = "Grid" & TabControl.SelectedIndex 
```

这就是我读取数据的方式：

```
If reader.GetAttribute("controltype") = "Tab" Then
    SelectedTab = reader.Name
End If

If reader.Name = "cell" Then
y = y + 1
Grid.Rows(i).Cells(y).Style.BackColor = Color.FromName(reader.ReadElementString("cell"))
End If 
```

我几乎想做的是（伪代码）：

```
SelectedTab.Grid.Rows(i).Cells(y).Style.BackColor = Color.FromName(reader.ReadElementString("cell")) 
```

但是，当我使用上面的代码时，它会抱怨：

> “网格”不是“字符串”的成员

我希望你明白这个问题。如果您需要澄清，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:34:26.173

你的代码有点不清楚。但是，在我看来，以下行：

```
If reader.GetAttribute("controltype") = "Tab" Then
    SelectedTab = reader.Name
End If 
```

正在制造至少一个问题。看起来您正在尝试通过其名称的字符串表示来引用 Tabpage 控件，但除非我错过了什么，否则该行实际上正在尝试使 tabpage 控件类型（“SelectedTab”）引用字符串类型. 如果是这种情况，那么您将需要尝试以下方法：

```
If reader.GetAttribute("controltype") = "Tab" Then
    TabControl1.SelectedTab = TabControl1.TabPages(reader.name)
End If 
```

从您发布的代码中很难判断，但这可能会让您走上正确的道路。

++++++++++++++

更新：从您的代码中可以看出，您通过将其所在的选项卡的索引附加到字符串“grid”来命名每个 DGV 控件。我将假设您正在使用一个名为“SelectedTab”的类成员变量来表示控件中选择的当前选项卡。我会假设在你的班级顶部你做了这样的事情：

```
'Form-or-class scoped memebr variables:
Private SelectedTab As TabPage
Private SelectedGrid As DataGridView 
```

您应该能够使用以下方式引用活动网格控件：

```
Private Sub TabControl1_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles TabControl1.SelectedIndexChanged

    ' Set SelectedTab member variable to refer to the new selected tab page:
    SelectedTab = TabControl1.SelectedTab

    ' Set the SelectedGrid to refer to the grid control hosted on the selected tab page:
    SelectedGrid = TabControl1.SelectedTab.Controls("Grid" & TabControl1.SelectedIndex.ToString())
End Sub 
```

从这里，您应该能够使用 SelectedGrid 的成员变量来引用在您的选项卡控件中选择的任何选项卡页上存在的网格。

仅使用代码片段来解决您的问题是具有挑战性的。如果您还有其他困难，请发布更多代码，以便我们更好地了解其他情况。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:42:25.657

好吧，我会去做这样的事情。也许您可以简单地使用 DataSet 在一行中加载 XML 数据（如果它们之前已保存`DataSet.WriteXML`）。

```
 Dim ds As New DataSet
    Dim p As TabPage
    Dim gv As DataGridView

    ds.ReadXml("F:\testdata.xml")
    For i As Integer = TabControl1.TabPages.Count - 1 To 0 Step -1
        TabControl1.TabPages.RemoveAt(i)
    Next

    For Each dt As DataTable In ds.Tables
        p = New TabPage(dt.TableName)
        gv = New DataGridView
        ' ... configure the gv here...
        gv.AutoGenerateColumns = True
        gv.Dock = DockStyle.Fill
        ' ...
        gv.DataSource = dt
        TabControl1.TabPages.Add(p)
        p.Controls.Add(gv)
    Next 
```

# c# - SocketError.NoBufferSpaceAvailable

> ID：14547097
> 
> 赞同：0
> 
> 时间：2013-01-27T11:59:22.597
> 
> 标签：c#, sockets

我的应用程序通过 Socket 输出 UDP 消息。到目前为止，这一直运行良好，但是最近部署到虚拟化操作系统给我带来了带有 SocketError NoBufferSpaceAvailable 的 SocketExceptions 问题。

在正常情况下，UDP 消息每 1 秒传输一次。但是，我经常看到连续 2-3 条消息受到上述异常的影响。处理这个问题的最佳策略是什么？我想到的策略是：

```
int trials = 0;
while(trials <= 5)
{
    try
    {
        trials++;
        _socket.Send(...);
    }
    catch(SocketException e)
    {
        if(e.SocketErrorCode == SocketError.NoBufferSpaceAvailable)
        {
            Thread.Sleep(100);
        }
        else
        {
            throw;
        }
    }
} 
```

在这种情况下，标准方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:24:12.390

您必须检查发送数据包的大小。另外，您是否有一个字符或序列告诉服务器它已经结束了？

# ios - 我怎样才能找到我的财产？

> ID：14547102
> 
> 赞同：1
> 
> 时间：2013-01-27T12:00:22.727
> 
> 标签：ios, objective-c

在尝试将 managedObjectContext 分发到视图控制器时，我收到该错误：在“UIViewController *”类型的对象上找不到属性“managedObjectContext” AppDelegate.m 中的此代码是错误的根源：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController *searchController = [[SearchCriteriaViewController alloc] initWithNibName:@"SearchCriteriaViewController" bundle:nil];
    UIViewController *managementController = [[WineManagementViewController alloc] initWithNibName:@"WineManagementViewController" bundle:nil];

    managementController.managedObjectContext = self.managedObjectContext; 
```

WineManagementViewController 中的代码如下所示：

```
@interface WineManagementViewController : UIViewController <NSFetchedResultsControllerDelegate>
{
    IBOutlet UIButton *countryButton;
    WineStore *store;
}

- (IBAction)newCountry:(id)sender;

@property (strong, nonatomic) UIPopoverController *poCtrl;
@property (strong, nonatomic) WineStore *store;
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext; 
```

这是实施的开始：

```
@implementation WineManagementViewController
@synthesize store, managedObjectContext;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
... 
```

如果我想以这种方式访问​​该属性，或者如果我想使用 setter 方法访问它，则找不到该属性。有谁知道为什么找不到这个属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:02:21.440

应该：

```
WineManagementViewController *managementController = [[WineManagementViewController alloc] initWithNibName:@"WineManagementViewController" bundle:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:10:11.033

使用点语法的好处是它做了更多的类型检查。

你所做的就是将你的新 managementController 对象声明为 a`UIViewController`而不是它的实际类型`WineManagementViewController`。这在里氏替换原则下是完全有效的。

但是 - 您正在使用点语法来设置属性值，并且编译器看不到该对象实际上是一个`WineManagementViewController`对象而不是一个`UIViewController`没有 managedObjectContext 属性的对象。

这就是 using 方法发送语法可以帮助您的地方。如果您保留声明，那么您编写代码就没有问题，例如：

```
UIViewController *managementController = [[WineManagementViewController alloc] initWithNibName:@"WineManagementViewController" bundle:nil];

[managementController setManagedObjectContext:self.managedObjectContext]; 
```

因为使用方法发送语法不会进行相同的类型检查。它会在运行时愉快地向对象发送消息，如果方法没有实现，那么它会抛出异常。

所以; 您所做的并没有错，只是编译器很挑剔。

# php - Codeigniter 视图未加载

> ID：14547103
> 
> 赞同：0
> 
> 时间：2013-01-27T12:00:28.273
> 
> 标签：php, codeigniter, hybridauth, ion-auth

我安装了 Codeigniter、IonAuth + Hybridauth，我正在对其进行改造，以便我的用户可以选择他们自己的用户名，而不是使用 facebook 返回的名字和姓氏生成一个。

因此，在下面的代码中，我检查是否发布了用户名，如果没有，我想加载`choose_username`视图，但由于某种原因，视图没有加载，它完全跳过了该部分，这就是我添加的原因`die('Why no view')`

**更新：第一段代码在新控制器中运行良好**

**在此处查看代码：**

```
if(isset($_POST['username'])){
                            $username = $this->input->post('username', TRUE);   
                            die($username);
                            }else{
                                $this->data['message'] = 'Please choose a username.';
                                $this->data['template'] = 'guests/partials/choose_username';
                                $this->load->view('guests/template/standard', $this->data);
                                die('Why no view?');
                            }; 
```

**更长的版本：**

```
function login_provider($provider = '')
    {
        if(empty($provider)) redirect();

    try
    {
        // create an instance for Hybridauth with the configuration file
        $this->load->library('HybridAuthLib');

        if ($this->hybridauthlib->serviceEnabled($provider))
        {
            // try to authenticate the selected $provider
            $service = $this->hybridauthlib->authenticate($provider);

            if ($service->isUserConnected())
            {
                // grab the user profile
                $user_profile = $service->getUserProfile();
                ////////////
                //var_dump($user_profile);
                //die();
                ////////////

                    $provider_uid = $user_profile->identifier;

                if($this->ion_auth->login_by_provider($provider,$provider_uid))
                {
                    $data['user_profile'] = $this->ion_auth->user_by_provider();
                    //$this->load->view('auth/user_profile',$data);
                    $user = $this->ion_auth->user()->row();

                    //Redirect to custom subdomain
                    $url = explode('://',site_url());
                    if (strpos(site_url(),$user->username) !== false) {
                    redirect($url[0].'://'.str_replace('www','',$url[1]).'dashboard','refresh');
                    }
                        else{
                        redirect($url[0].'://'.$user->username.str_replace('www','',$url[1]).'dashboard');
                        };

                }
                else
                { // if authentication does not exist and email is not in use, then we create a new user 

                //Check if username was posted

                        if(isset($_POST['username'])){
                            $username = $this->input->post('username', TRUE);   
                            die($username);
                            }else{
                                $this->data['message'] = 'Please choose a username.';
                                $this->data['template'] = 'guests/partials/choose_username';
                                $this->load->view('guests/template/standard', $this->data);
                                die('Why no view?');
                            }; 
```

所以当我运行上面的代码时，我得到的只是一个空白页：`Why no view`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T00:55:20.460

如上所述，通常当我遇到此类问题时，它来自视图代码中的错误。

另外，如果没有用户名数据，我不知道这篇文章实际上传递了什么，但您可能还想检查用户名的空值。这可能不是问题，但最好确认初始 if 正在评估您期望的方式。

# java - Java SQL 错误，找不到合适的驱动程序

> ID：14547109
> 
> 赞同：1
> 
> 时间：2013-01-27T12:00:56.313
> 
> 标签：java, database, netbeans, database-connection, derby

我正在尝试编译这段代码，以帮助我连接到我的数据库并检索一些信息来测试它。我在 Windows 7 x64 机器上使用 Netbeans。这是代码：

```
package passwordprotector;
import java.sql.*;

public class PasswordProtector {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    String host = "jdbc:derby://localhost:1527/PasswordProtector DB";
    String dbUsername = "john"; 
    String dbPassword = "arsenal";

    /*try{
        Class.forName("org.apache.derby.jdbc.EmbeddedDriver");
    }catch(ClassNotFoundException e){
        System.out.println(e);
    }*/

    try{
        Connection con = DriverManager.getConnection(host, dbUsername, dbPassword);
        Statement stmt = con.createStatement();

        ResultSet rs = stmt.executeQuery("SELECT * FROM APP.PERSON");

        while (rs.next()) {
            String uName = rs.getString("uname");
            String uPass = rs.getString("upass");
            System.out.println("Username: " + uName + "/n" + "Password: " + uPass);
        }
    }catch(SQLException e){
        System.err.println(e);
    }
}
} 
```

当我编译并运行时，我收到此错误：

```
java.sql.SQLException: No suitable driver found for jdbc:derby://localhost:1527/PasswordProtector DB
BUILD SUCCESSFUL (total time: 0 seconds) 
```

当我右键单击我的数据库并选择属性时，我可以看到它的位置，如下所示：

```
Database URL: jdbc:derby://localhost:1527/PasswordProtector 
```

我已经与其他发布过此内容的人进行了核对，似乎他们有一个不正确的 URL 作为问题，但除了发布的那个之外，我看不到任何其他我可以使用的 URL。

我已经尝试过使用和不使用字符串主机的结尾“DB”，但都不起作用。

我也已经从[这里](http://db.apache.org/derby/papers/DerbyTut/embedded_intro.html)读过，但仍然无法弄清楚为什么 URl 不正确：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:30:00.517

不确定数据库 URL 连接的问题，但使用正确的驱动程序。如果数据库是嵌入式的，您应该使用您的帖子中评论的驱动程序和我的[回答](https://stackoverflow.com/questions/11864443/packing-embedded-database-in-jar-file/11867360#11867360)中的示例，还有[嵌入式 derby 教程](http://db.apache.org/derby/papers/DerbyTut/embedded_intro.html)。

如果没有，那么使用

```
Class.forName("org.apache.derby.jdbc.ClientDriver"); 
```

连接到独立运行的数据库是一个不同的驱动程序。在这种情况下，请参阅[derby 网络客户端](http://db.apache.org/derby/papers/DerbyClientSpec.html)文档如何配置和运行 derby 网络客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T15:22:32.447

确保 derbyrun.jar 在您的类路径中。它位于 JDK 的 db/lib 目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T15:39:18.487

在 Maven 和 Derby 上进行快速搜索，在我的 pom 中包含以下内容：

```
<dependency>
    <groupId>org.apache.derby</groupId>
    <artifactId>derbyclient</artifactId>
    <version>10.10.2.0</version>
</dependency> 
```

之后一切正常，因此如果以前的解决方案不起作用，则可能是库参考问题。

# php - PHP 通过接口强制属性

> ID：14547117
> 
> 赞同：0
> 
> 时间：2013-01-27T12:02:11.940
> 
> 标签：php, interface, abstract-class

我在 github 上经常看到这一点，我看不到这些关系中的优势，甚至没有看到接口的使用。

情况：一个库有一个基类`Article`，它被声明为抽象的并且应该被扩展。为什么它实现`ArticleInterface`基本上是：

```
interface ArticleInterface
{
     // some getter

     // some setter

     // getter...

     // setter....

     // etc...
} 
```

我在这个设置中没有看到接口的使用？抽象类本身还不够，因为它已经定义了那些 getter/setter**和**属性（它实现了接口）。Interface 在这里所做的唯一事情是强制属性声明，这不应该是它的重点，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T12:10:36.547

接口使类更加灵活。最后，它确实是您要定义的接口。抽象类允许您定义类接口的一些重要部分以及（部分）实现。接口更加抽象，只定义必要功能的接口，将实现完全留给实现者。

你应该这样想：接口是*定义*，抽象类只是它的一个示例实现。如果此框架实现适合您的目的，请扩展并使用它。否则，如果您不能或不想*继承*特定类，则可以以任何方式实现接口。您不必强制扩展特定的类，您可以使用自己的类层次结构。

有关为什么应该在接口中思考以及为什么解耦相当重要的更多信息，您可能需要阅读[这篇文章](http://kunststube.net/static)。

# c++ - seekg，tellg，从零开始的计数和文件大小

> ID：14547122
> 
> 赞同：1
> 
> 时间：2013-01-27T12:02:41.550
> 
> 标签：c++, file-io, fstream, ifstream

所以，我很好奇，因为我一直在使用这种相当有用的方法来获取文件的大小，但有些事情让我很困扰。将流锁定到文件系统上的文件和

```
fileStream.seekg(0, std::ios::beg);
int beginning = fileStream.tellg(); 
```

产生 0。这是意料之中的，我们利用从零开始计数的好处。对我来说有趣的是，一个 512 字节的文件的位置将在 [0, 511] 范围内，因此，返回值

```
fileStream.seekg(0, std::ios::end);
int end = (int)fileStream.tellg(); // We don't care for +4GB here 
```

应该为结束产生 511，因为那是最后一个字节。加载文件中的最后一个位置。因此，用于在流中读取的任何缓冲区都只会获得 511 个字节，而不是 512 个字节。

但它有效，所以你可以看到我的困惑。是什么赋予了？我不知所措。+1 从何而来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T12:05:28.693

后，

```
fileStream.seekg(0, std::ios::end); 
```

文件指针位于最后一个字节**之后（#511）。**这就是数字 512 的含义。在这里，511 意味着**就在**最后一个字节之前。

让我们考虑一个有两个字节长的文件：

*   位置 0 在第一个字节之前；
*   位置 1 在第二个字节之前；
*   位置 2 在（不存在的）第三个字节之前，即文件末尾。

# java - 在各种分隔符上提取子字符串

> ID：14547123
> 
> 赞同：-1
> 
> 时间：2013-01-27T12:02:46.737
> 
> 标签：java, android, regex

我是安卓新手。我需要从我的应用程序中的字符串中提取各种子字符串。子字符串的提取取决于各种不同的定界符及其组合。

字符串分隔符的模式如下：

```
xxx|xxx|#yyy|ww~aaaaa|ww~ii|ww~t|*|yyy 
```

现在我需要通过使用所有符号作为分隔符从字符串中获取所有 xxx、yyy、ww、ii、t。有一个巨大的字符串，上面显示的是字符串的一部分。休息如上重复并形成一个大字符串。

那么如何做到这一点。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:24:49.357

```
string.split("\\W+") 
```

会为你工作。

在这里，`\W`意味着一个`non-alphanumeric character`。

`+`意味着`one or more than one`。

# canvas - 单击画布中的地图

> ID：14547127
> 
> 赞同：1
> 
> 时间：2013-01-27T12:02:53.060
> 
> 标签：canvas, map, mozilla, clicking

我找到[了这个](http://www.rubydesigner.com/blog/click-map-using-html5-canvas)画布的点击地图，但问题是它在 Firefox 上不起作用。

你知道这样的事情或者如何让它在 Firefox 上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:09:40.287

通过简单的 Google 搜索，我发现[了这个](http://www.html5canvastutorials.com/labs/html5-canvas-world-map-svg-path-with-kineticjs/)在 Firefox 中工作的漂亮 HTML5 画布地图。

单击[此处](http://www.html5canvastutorials.com/demos/labs/html5-canvas-world-map-svg-path-with-kineticjs/index.php)查看它的工作原理。

我创建了一个[jsFiddle](http://goo.gl/A7Mf5)来显示它正在工作。

![地图...](../Images/39153cc2d119e70aede2fc1f3155c1b7.png)

# android - 返回上一个活动标签主机

> ID：14547130
> 
> 赞同：0
> 
> 时间：2013-01-27T12:03:26.587
> 
> 标签：android, android-tabhost

我使用 TabActivityGroup 在同一选项卡中打开第二个活动。现在我想回到上一个活动（主要活动）但是完成（）；导致强制关闭。在下面的父类中，有一个 id 是“myid”，表示当前正在启动的活动。我相信这是导航回上一个活动的关键。但是我如何在 SecondActivity.class 中使用这个 id 来调用一个意图。有人遇到类似的问题吗？请帮忙，我也知道我可以使用片段，类似的东西，但我使用的是 tabhost。我想知道如何使用第二个活动的意图返回 Parent.class。感谢那些接听我电话的人。

父类

IntentfrequentMessages = new Intent(getParent(),FrequentMessageActivity.class);

TabGroupActivity parentActivity = (TabGroupActivity)getParent();

parentActivity.startChildActivity("myid",frequentMessages);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:12:47.283

只需使用片段。在选项卡中使用活动是错误的。这已经不是 2010 年了。在 2013 年没有任何理由这样做。

坦率地说，引用某人的话：“你说错了。”。见鬼，没有错……完全错了。

# qt - 使用 QTreeWidgetItem 创建子树

> ID：14547132
> 
> 赞同：1
> 
> 时间：2013-01-27T12:04:03.320
> 
> 标签：qt, qtreewidget, qtreewidgetitem

我正在尝试使用 QTreeWidgetItem 创建一个子树。这是代码

```
m_pRoot = new QTreeWidgetItem(treeWidget);
m_pRoot->setText(0, "root");
m_pRoot->setData(0, Qt::UserRole, IT_ROOT);
createTreeItem(m_pRoot, m_pText,      "subtree_1",   IT_TEXT);
m_pRoot->setExpanded(true);
createTreeItem(m_pText, m_pPlainText, "subtree_2", IT_TEXT); 
```

那是方法：

```
void createTreeItem(PTR(QTreeWidgetItem) parent, PTR(QTreeWidgetItem) item, CREF(QString) name, ItemType itemType)
{
    item = new QTreeWidgetItem(parent);
    item->setText(0, name);
    item->setData(0, Qt::UserRole, QVariant(itemType));
} 
```

当我用 m_pRoot 作为根项目创建“subtree_1”时没问题，但是当我想用 m_pText 作为根项目创建“subtree_2”时它会崩溃。

PS PTR() 等于 *parent。

无法理解是什么问题。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:03:26.250

如果您的 PTR(QTreeQWidgetItem) 宏产生 QTreeWidgetItem*，那么 createTreeItem 函数不会初始化项目。

最简单和最合乎逻辑的修复似乎将 createTreeItem 函数更改为返回新项目：

```
QTreeWidgetItem* createTreeItem(PTR(QTreeWidgetItem) parent, PTR(QTreeWidgetItem) item, 
    CREF(QString) name, ItemType itemType)
{
    item = new QTreeWidgetItem(parent);
    item->setText(0, name);
    item->setData(0, Qt::UserRole, QVariant(itemType));
    return item;
} 
```

并使用返回值初始化 m_pText。

# c++ - C++ 头文件链接器错误

> ID：14547133
> 
> 赞同：1
> 
> 时间：2013-01-27T12:04:09.577
> 
> 标签：c++, header, linker-errors

我制作了以下由 3 个文件组成的 C++ 程序：

**thing.h 文件**

```
 #ifndef THING_H
#define THING_H

class thing{
  double something;
  public:
         thing(double);
         ~thing();
         double getthing();
         void setthing(double);  
         void print();  
};

#endif 
```

**thing.cpp 文件**

```
 #include <iostream>
#include "thing.h"

thing::thing(double d){
something=d;                    
}

thing::~thing(){
std::cout << "Destructed" << std::endl;                
}

double thing::getthing(){
return something;       
}

void thing::setthing(double d){
something = d;     
}

void thing::print(){
std::cout <<"The someting is " << something << std::endl;     
} 
```

**主文件**

```
 #include <iostream>
#include "thing.h"

int main(){

thing t1(5.5);
t1.print();
t1.setthing(7.);
double d=t1.getthing();
std::cout << d << std::endl;

system("pause");
return 0;    
} 
```

我以前在一个文件中制作了这个程序，它运行得很好，但是当我尝试将它拆分为单独的文件以创建一个头文件时，我得到一个链接器错误，这是我尝试从主文件运行它时得到的错误：

```
 [Linker error] undefined reference to `thing::thing(double)' 
  [Linker error] undefined reference to `thing::print()' 
  [Linker error] undefined reference to `thing::setthing(double)' 
  [Linker error] undefined reference to `thing::getthing()' 
  [Linker error] undefined reference to `thing::~thing()' 
  [Linker error] undefined reference to `thing::~thing()'
  ld returned 1 exit status 
```

从上述错误看来，主文件似乎无法识别标题中的函数，请问我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:08:27.173

看来您没有将 thing.cpp 链接到您的“项目”中。

如果您使用 gcc 进行编译：

```
g++ thing.cpp -o thing.o
g++ main.cpp -o main.o
g++ main.o thing.o -o my-best-application-ever 
```

如何将文件添加到您的项目取决于您使用的编译器/IDE/构建系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:22:35.930

用稍微不那么迂腐的术语来说：

您的头文件`thing.h`声明了“`class thing`应该是什么样子”，但没有声明它的实现，它在源文件`thing.cpp`中。通过在主文件中包含头文件（我们称之为`main.cpp`），编译器会被告知`class thing`编译文件时的描述，而不是`class thing`实际工作方式。当链接器尝试创建整个程序时，它会抱怨`thing::print()`找不到实现（和朋友）。

解决方案是在创建实际程序二进制文件时将所有文件链接在一起。使用 g++ 前端时，您可以通过在命令行上同时指定所有源文件来做到这一点。例如：

```
g++ -o main thing.cpp main.cpp 
```

将创建名为“main”的主程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T12:58:37.430

@sheu 是对的.. 但是，如果您只在 main.cpp 中包含 thing.cpp，则无需执行任何操作因为您已经在 thing.cpp 中包含了 thing.h，如果您包含了 thing，一切都会正常工作。 cpp

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T12:08:52.133

编译器知道函数的声明，但对定义一无所知。你需要告诉他们他们在哪里。最简单的方法是创建“项目”并将所有文件添加到其中。然后编译器知道在哪里搜索所有文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T14:07:19.277

在 thing.cpp 中放一些代码，让你知道它正在被编译，即

# 错误 ...

显然它没有被编译和链接......

# iphone - iOS 6 自动旋转在 UiNavigationController

> ID：14547134
> 
> 赞同：3
> 
> 时间：2013-01-27T12:04:11.483
> 
> 标签：iphone, ios, objective-c, xcode

我的应用程序中有 UiNavigationController。我希望只有一个屏幕能够旋转，所以我放了这个类：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return YES;
}

-(BOOL)shouldAutorotate {
    return YES;
}

-(NSInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

但发生的问题是在 ecery screen 应用程序发生旋转。我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T14:35:18.457

对于 iOS 6，我在我的应用程序中使用以下代码，它允许您单独指定每个视图控制器的旋转：

AppDelegate.m -

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{NSUInteger orientations =UIInterfaceOrientationMaskAllButUpsideDown;
if(self.window.rootViewController){
UIViewController *presentedViewController = [[(UINavigationController *)self.window.rootViewController viewControllers] lastObject];
orientations = [presentedViewController supportedInterfaceOrientations];
}
return orientations;
} 
```

ViewController.m -

```
- (NSUInteger)supportedInterfaceOrientations{
return UIInterfaceOrientationMaskPortrait;
} 
```

最初的代码学分我相信转到 Ray Wenderlich “iOS 6 by Tutorials”一书。[雷·温德利希网站](http://www.raywenderlich.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T06:30:07.733

Use the below code in the class you want to autorotate only:

```
@interface UITabBarController (rotation)
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation;
- (NSUInteger)supportedInterfaceOrientations;
- (BOOL)shouldAutorotate;
@end

@implementation UITabBarController (rotation)
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    if ([self.selectedViewController isKindOfClass:[UINavigationController class]])
    {
        UINavigationController *navController = (UINavigationController *) self.selectedViewController;
        if ([[navController visibleViewController] isKindOfClass:[CLASS_NAME_FOR_ROTATION class]])
            return YES;
    }
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSUInteger)supportedInterfaceOrientations
{
    if ([self.selectedViewController isKindOfClass:[UINavigationController class]])
    {
        UINavigationController *navController = (UINavigationController *) self.selectedViewController;
        if ([[navController visibleViewController] isKindOfClass:[CLASS_NAME_FOR_ROTATION class]])
            return UIInterfaceOrientationMaskAll;
    }
    return UIInterfaceOrientationMaskPortrait;
}

- (BOOL)shouldAutorotate
{
    if ([self.selectedViewController isKindOfClass:[UINavigationController class]])
    {
        UINavigationController *navController = (UINavigationController *) self.selectedViewController;
        if ([[navController visibleViewController] isKindOfClass:[CLASS_NAME_FOR_ROTATION class]])
            return YES;
    }
    return NO;

}

@end 
```

Use this code in the parent View Controller of the class (i.e. the just previous class on the stack of navigation controller) that is to be rotated.

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationPortrait;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-12T09:37:21.927

在您的 appDelegate 添加此代码

```
@property(nonatomic,assign)BOOL shouldRotate;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    shouldRotate=NO;
}
-(void)shouldAutoRotate:(BOOL)rotate
{
    self.shouldRotate=rotate;
} 
```

并在您的 rootview 控制器中添加此代码

```
#import "AppDelegate.h"
#define myAppDelegate (AppDelegate *)[[UIApplication sharedApplication] delegate]

- (NSUInteger)supportedInterfaceOrientations
{
 if(![myAppDelegate shouldRotate])
     return UIInterfaceOrientationMaskPortrait;
 else
     return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

之后在 viewcontroller.m 中添加此代码，这是您要旋转的

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [myAppDelegate shouldAutoRotate:YES];
}

-(void)viewWillDisappear:(BOOL)animated
{
    [myAppDelegate shouldAutoRotate:NO];
} 
```

我已经为我的一个项目（IOS 7）做了这个。它非常适合我。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-27T13:41:12.940

```
-(NSUInteger)supportedInterfaceOrientations
{
    return self.topViewController.supportedInterfaceOrientations;

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-27T12:20:36.210

您可以创建一个类别来覆盖 navigationController 中的方法以支持所有类。

```
@implementation UINavigationController (Rotation_IOS6)

-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
}

@end 
```

如果您想限制不同控制器中的旋转，则在相应的视图控制器中覆盖supportedInterfaceOrientations 和shouldAutorote，根据需要更改返回值。

# android - Android 使用 Intent 恢复活动

> ID：14547139
> 
> 赞同：0
> 
> 时间：2013-01-27T12:04:34.733
> 
> 标签：android, android-intent, maps, resume

我有 GOOGLE 地图，上面有一些叠加层。覆盖是从数据库中获取的，因此加载覆盖需要一些时间。

然后我单击一个叠加层以带来另一个包含有关该叠加层信息的活动。此信息是通过 Intent 创建的新活动。

然后我想回到地图。好的，我点击按钮，它会调用一个新的 Intent 来返回地图。

地图会出现，但叠加层不会。

我发现一种解决方案可能是恢复地图，而不是有意开始新地图。

我试图添加一个标志来恢复活动，但它不起作用。

在我做的按钮中：

```
Intent myIntent = new Intent(mContext,MapClass.class);
myIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
mContext.startActivity(myIntent); 
```

请问，有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:08:37.277

> 然后我想回到地图。好的，我点击按钮，它会调用一个新的 Intent 来返回地图。

为什么 ？首先，为什么需要一个按钮才能返回？只需让用户使用设备的后退按钮返回即可。其次，如果你真的需要使用后退按钮（我不知道你为什么会这样做），为什么要创建一个新的返回意图？只需使用按钮在 Activity 上调用 finish()。

# gitlab - 安装 gitlab-ci 时权限被拒绝错误

> ID：14547144
> 
> 赞同：2
> 
> 时间：2013-01-27T12:05:14.677
> 
> 标签：gitlab

在 ubuntu（12.04LTS）上安装 gitlab ci（继续集成）时，我在第 5 步（安装应用程序）中收到以下错误

来自：[https ://github.com/gitlabhq/gitlab-ci/blob/master/doc/installation.md](https://github.com/gitlabhq/gitlab-ci/blob/master/doc/installation.md)

```
root@s2:~# cd /home/gitlab_ci/gitlab-ci/
root@s2:/home/gitlab_ci/gitlab-ci# sudo -u gitlab_ci -H gem install bundler
ERROR:  While executing gem ... (Gem::FilePermissionError)
You don't have write permissions into the /usr/local/lib/ruby/gems/1.9.1 directory. 
```

似乎这些 gem 试图安装在 /home/gitlab_ci 之外，这确实会作为用户 gitlab_ci 失败

我的问题是——这些说明有错吗？- 或者 - 我是一个极端情况。当然，我将如何安全地解决这个问题，只是以 root 身份运行命令可能会在以后给我带来更多麻烦......

额外的信息，Ruby 最初是为 gitlab 本身安装的，并且工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:40:13.763

考虑到[gitlab 安装步骤 2](https://github.com/gitlabhq/gitlabhq/blob/master/doc/install/installation.md#2-ruby)建议重新编译 ruby​​，我通常使用`--prefix=/home/gitlab/ruby1.9.3`参数编译它，以便使用我有完全权限编写/添加任何我想要的 gem 而无需使用`sudo`.

因此`$PATH`gitlab_ci 帐户使用的应该包括`/home/gitlab/ruby1.9.3/bin`该帐户安装的任何 gem 将进入本地编译的 ruby​​。
如果两个帐户属于同一组，则它们都应该能够写入`/home/gitlab/ruby1.9.3/lib/ruby/gems/1.9.1`.

# xml - 在程序的生命周期中，spring 中的 xml 机制是什么？

> ID：14547148
> 
> 赞同：0
> 
> 时间：2013-01-27T12:05:55.690
> 
> 标签：xml, spring, proxy, mybatis

当我需要使用 Property Place Holder 时，我只是在 spring_config.xml 中定义了一个 bean，如下所示，没有在 java 代码中对这个 bean 做任何事情，spring 怎么会知道呢？

```
 <bean id="configBean" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer" 
        p:location="spring_test/spring.properties"></bean> 
```

另一个令人困惑的部分是相似的：我在 spring_config.xml 中定义了两个 bean，即 SqlSessionFactoryBean 和 MapperFactoryBean，spring 如何实现 MapperFactoryBean 就像我的 DAO 的代理一样，而无需编写任何 java 代码？

有没有关于xml解析机制或相关内容的文章？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T01:57:03.203

您需要了解 Java 反射。Java 反射可以在运行时检查类、接口、字段和方法，而无需在编译时知道类、方法等的名称。也可以使用反射实例化新对象、调用方法和获取/设置字段值。下面是一个简单的例子。

```
 package com.example;

    public class Emplyoee {    
        private String name;
        public Emplyoee() {
        }
        public String getName() {
            return name;
        }
        public void setName(String name) {
            this.name = name;
        } 

        public static void main(String args[]) {
            String className = "com.example.Emplyoee";
            try {
                 //finds class, casts Emplyoee class
                  Class<Emplyoee> klass = ((Class<Emplyoee>) Class.forName(className ));
                 //instantiate new objects,notice Emplyoee class
                 Emplyoee theNewObject = klass.newInstance();
                 //set value 
                 theNewObject.setName("john");
                 //calls "name" by getter method,and prints "john"
                 System.out.println(theNewObject.getName());

            } catch (ClassNotFoundException e) {
                 e.printStackTrace();
            } catch (InstantiationException e) {
                 e.printStackTrace();
            } catch (IllegalAccessException e) {
                 e.printStackTrace();
            }
       }
    } 
```

Spring容器会通过“forName”方法找到“org.springframework.beans.factory.config.PropertyPlaceholderConfigurer”类，并实例化“PropertyPlaceholderConfigurer”类。

# java - 比较数学表达式

> ID：14547149
> 
> 赞同：6
> 
> 时间：2013-01-27T12:05:55.963
> 
> 标签：java, algorithm, parsing, math, floating-point

所以这是我的情况：我有两个包含变量（x、y、z 等）的数学表达式。我已经使用[分流场算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)将它们编译为后缀以执行，现在我需要一种方法来测试它们是否在数学上相等。

例子：

```
x+5==5+x
x*2==x+x
4/(x/2)==8/x 
```

我最初的想法是只抛出几千个不同的随机输入，看看评估结果是否相同。

我用这种方法预见的问题：精度问题、NaN 情况和可能的溢出。

所有的计算都是用 Java 的 double 类型完成的。

有任何想法吗？:)

编辑：由于这是一款休闲游戏，解决方案不需要完美，只要足够好！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T12:30:56.983

对于您提供的示例表达式，您可以转换函数以生成一个多项式除以另一个多项式，除数的系数最高，并且没有公因数。这会给你一个规范的形式——如果有区别，这两个函数真的会不同。但是，您还需要将系数表示为任意精度有理数或在这里也遇到精度问题，到那时您将编写大部分基本计算机代数系统，例如[http://en.wikipedia.org中列出的那些/wiki/List_of_computer_algebra_systems](http://en.wikipedia.org/wiki/List_of_computer_algebra_systems) - 其中包括一些免费系统。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T12:26:42.123

根据维基百科关于这个主题：

[http://en.wikipedia.org/wiki/Symbolic_computation](http://en.wikipedia.org/wiki/Symbolic_computation)

“数学表达式有两个相等的概念。句法相等是表达式的相等，这意味着它们以相同的方式编写（或在计算机中表示）。因为微不足道，数学家很少考虑它，但它是唯一容易用程序测试的等式。语义等式是两个表达式表示相同的数学对象，如

众所周知，可能不存在确定表示数字的两个表达式在语义上是否相等、表达式中是否允许指数和对数的算法。因此，（语义）相等性只能在某些类型的表达式上进行测试，例如多项式和有理分数。

为了测试两个表达式的相等性，而不是设计一个特定的算法，通常将它们置于某种规范形式或将它们的差异置于正常形式并测试结果的句法相等性。”

这似乎是最佳做法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-18T09:45:02.193

当我在这里结束时，我试图写基本相同的问题。但是我发现了一些这里没有提到的想法。首先，我同意@nelshh 的观点，即在某些特定情况下，您可以找到允许测试表达式相等性的规范形式。

我发现了一些规范形式的例子：

*   最著名的可能是布尔代数中的[最小项规范形式](https://en.wikipedia.org/wiki/Canonical_normal_form)，例如用于电路综合或验证。
*   多项式表达式也承认作为单项式之和的规范形式。这可以解决您的示例：
*   有理数的规范形式是[不可约分数](https://en.wikipedia.org/wiki/Irreducible_fraction)。

你的例子：

1.  两者都已经是规范形式，您只需要通过增加程度对它们进行排序。
2.  `2*x`是其规范形式，`x+x`不是（因为加法的两个操作数具有相同的度数）。
3.  两者都已经是规范形式（-1 次的单项式），除了其中的系数`4/(x/2)`不是`4/(1/2)`有理数的规范形式。

如果您仍然对此感兴趣，我建议您尝试使用计算机代数系统，例如 python 的 sympy（它可能也存在于 java 中）。但是，我也认为您应该删除标签`java`和`floating-point`（它与计算机如何存储实数无关），并添加标签`computer-science`。

例如 sympy 能够告诉这样的事情：

```
>>> Rational(3,4)*(x+y)**2
         2
3⋅(x + y) 
──────────
    4     
>>> Rational(3,4)*(x**2+y**2)+Rational(1,4)*2*x*y+Rational(4,8)*2*x*y
   2              2
3⋅x    3⋅x⋅y   3⋅y 
──── + ───── + ────
 4       2      4  
>>> expand(Rational(3,4)*(x+y)**2)==expand(Rational(3,4)*(x**2+y**2)+Rational(1,4)*2*x*y+Rational(4,8)*2*x*y)
True 
```

# matlab - 在 Matlab 中抑制转义字符

> ID：14547150
> 
> 赞同：5
> 
> 时间：2013-01-27T12:05:59.763
> 
> 标签：matlab, printf

我正在 Matlab 中编写一个模块，以将我的实验的配置参数输入到文件“parameters.txt”中。

这是执行此操作的模块：

```
for i=1:size(ParamSheetText,1)
    fprintf(fparam, ParamSheetText{i,1});
    fprintf(fparam,'\n');
end 
```

参数之一是文件夹位置：“D:\temp”。`fprintf`被解释`\t`为转义序列。有什么方法可以抑制转义序列或修改代码以抑制转义序列。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T12:40:06.253

`fprintf`仅在格式字符串中解析转义序列，因此您不应将数据字符串作为格式字符串传递（而是作为格式说明符后面的附加参数）：

```
fprintf(fparam, '%s', ParamSheetText{i,1}); 
```

我相信这会纠正你的问题。

# java - 无法通过 bouncycastle 库在 android 上生成证书请求

> ID：14547151
> 
> 赞同：0
> 
> 时间：2013-01-27T12:06:00.573
> 
> 标签：java, android, certificate

我现在正在开发 android 上的数字签名应用程序。

但是，我未能制作 apk 文件，因为 eclipse 显示以下消息

[2013-01-27 20:43:25 - BlowfishCipher] Dx 意外顶级异常： **java.lang.IllegalArgumentException：已添加：Lorg/bouncycastle/mozilla/SignedPublicKeyAndChallenge；**

[2013-01-27 20:43:25 - BlowfishCipher] Dx 在 com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123) [2013-01-27 20:43:25 - BlowfishCipher] Dx 在 com.android.dx.dex.file.DexFile.add(DexFile.java:163)

我知道错误消息表明重复的 jar 文件，但我不知道如何解决它，因为重复的 jar (Lorg/bouncycastle/mozilla/SignedPublicKeyAndChallenge;) 是 bouncy caslte 库的核心文件。

并且以下 java 代码显示没有语法错误，但它导致**java.lang.IllegalArgumentException: 已添加**异常

```
package exam.blowfishcipher;

import java.io.FileWriter;
import java.io.OutputStreamWriter;
import java.security.KeyPair;
import java.security.SecureRandom;
import javax.security.auth.x500.X500Principal;
import org.bouncycastle.jce.PKCS10CertificationRequest;
import org.bouncycastle.openssl.PEMWriter;
import android.os.Environment;
import chapter6.PKCS10ExtensionExample;

public class PKCS10Generater
{
    public static PKCS10CertificationRequest generateRequest(
            KeyPair pair)
            throws Exception

            {           
             return new PKCS10CertificationRequest(
                     "SHA256withRSA",
                     new X500Principal("CN=Test CA Certificate"),
                     //new X500Principal("CN=end"),
                     pair.getPublic(),
                     null,
                     pair.getPrivate());
            }

    public static void pemEncodeToFile(String filename, Object obj, char[] password)     throws Exception{
        PEMWriter pw = new PEMWriter(new FileWriter(filename));
           if (password != null && password.length > 0) {
               pw.writeObject(obj, "DESEDE", password, new SecureRandom());
           } else {
               pw.writeObject(obj);
           }
           pw.flush();
           pw.close();
    }

    public static void reqGen() throws Exception
    {
        //create the keys
        /*
        KeyPairGenerator kpGen = KeyPairGenerator.getInstance("RSA", "BC");
        //KeyPairGenerator kpGen = KeyPairGenerator.getInstance()

        kpGen.initialize(512, chapter4.Utils.createFixedRandom());

        KeyPair pair=kpGen.generateKeyPair();
        */
        //PKCS10CertificationRequest request = generateRequest(pair);

        KeyPair pair = chapter8.Utils.generateRSAKeyPair();
        PKCS10CertificationRequest request = PKCS    10ExtensionExample.generateRequest(pair);

        pemEncodeToFile(Environment.getExternalStorageDirectory()+"pkcs10.req",     request, null);
        PEMWriter pemWrt = new PEMWriter( new OutputStreamWriter(System.out));
        pemWrt.writeObject(request);
        pemWrt.close();     
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:07:57.107

Android 已经在系统中包含 BouncyCastle，这就是为什么您在尝试再次添加它时会收到错误的原因（在最近的版本中，它实际上是在`com.android.org.bouncycastle`或类似的版本中，所以理论上您不应该收到错误）。如果你想将它包含在你的项目中，你必须重命名 BC 的包（使用 jarjar 等）。SpongyCastle 已经为您完成了这项工作。尝试使用它而不是常规的 BC jar。

[https://github.com/rtyley/spongycastle](https://github.com/rtyley/spongycastle)

# c# - 创建动态数量

> ID：14547152
> 
> 赞同：0
> 
> 时间：2013-01-27T12:06:15.200
> 
> 标签：c#, asp.net, html

我想`asp:image`在我的 aspx 代码中创建动态数量的标签。

我该怎么做？`response.write`我在里面尝试`<%%>`了一个 for 循环，但它没有用。还有其他想法吗？它也应该在服务器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:39:29.717

你在找这个吗？

```
Label myLabel = new Label();
myLabel.Text = "Sample Label";

Panel Panel1= new Panel();
Panel1.Controls.Add(myLabel); 
```

在你的循环中添加这个将动态生成控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:57:36.640

您可以使用内联标记来做到这一点**：**

```
<% for(int i=0;i<10;i++) {%>
   <img src="whatever.jpg" alt="" />
<%}%> 
```

这将生成 10 张whatever.jpg 的图像。您不能做的一件事是将 ASP 控件放入内联块中：`<%...%> no ASP controls here <%...%>`. `{%>`和之间`<%}%>`应该只有纯 HTML 控件或文本，没有服务器控件。

如果您**必须**使用服务器控件，那么您可以在代码隐藏中的 for 循环中执行此操作。假设您添加`<asp:Placeholder ID="my_placeholder" runat="server"></asp:Placeholder>`了标记，您可以在代码隐藏中执行此操作：

```
for(int i=0;i<10;i++) {
   Image img = new Image();
   img.Src = "whatever.jpg";
   this.my_placeholder.Controls.Add(img);
} 
```

# java - 使用 Slick 图像时出现 NotSerializableException

> ID：14547154
> 
> 赞同：0
> 
> 时间：2013-01-27T12:06:30.853
> 
> 标签：java, image, networking, serialization

我最近开始在我的游戏中添加网络，这是我第一次有这样的经验。

我正在使用这个 Slick API 来处理我的图形（以及其他一些事情）并使用 ObjectInputSteams 和 ObjectOutputStreams 来进行网络连接。

我决定通过服务器发送图像来测试连接，并遇到了图像的 NotSerializableException：

```
 java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException:     org.newdawn.slick.Image
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1332)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
at inGame.ConnectClient.alwaysGet(ConnectClient.java:50)
at inGame.ConnectClient.setUp(ConnectClient.java:26)
at inGame.ConnectClient.run(ConnectClient.java:34)
at java.lang.Thread.run(Thread.java:680)
    Caused by: java.io.NotSerializableException: org.newdawn.slick.Image
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
at inGame.ConnectServer.write(ConnectServer.java:40)
at scenes.HostMenu.update(HostMenu.java:47)
at org.newdawn.slick.state.StateBasedGame.update(StateBasedGame.java:268)
at org.newdawn.slick.GameContainer.updateAndRender(GameContainer.java:657)
at org.newdawn.slick.AppGameContainer.gameLoop(AppGameContainer.java:408)
at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:318)
at scenes.Head.main(Head.java:47) 
```

我将如何使对象可序列化？还是我对所有这一切都朝着完全错误的方向前进？

任何输入表示赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:10:47.337

您`ObjectInputStream / ObjectOutputStream`用于将对象发送到远程客户端。您只能以这种方式发送可**序列化**的对象，它们实现`java.io.Serializable`接口并且它们的所有**非瞬态**字段都是原始值**或**实现`java.io.Serializable`。

第一个解决方案：使所有对象可序列化。但是，如果您使用不可序列化的第三方对象，这将不起作用。

第二种解决方案：使用 java-build-in 的其他序列化。例如，您可以使用**[XStream](http://xstream.codehaus.org/)**，一个非常健壮的 Java 序列化/反序列化库。

第三种解决方案：XML 序列化不是发送二进制数据（例如图像）的最佳方式。在这种情况下，您需要自己处理序列化和反序列化。您将打开简单的输出/输入流并在那里写入/读取二进制数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:13:14.893

使第三方类 Serializable 的一种简单方法是创建自己的类，该类扩展 Image 类并实现 java.io.Serializable 接口（请记住准备所有版本的构造函数并将它们委托给基类的构造函数）。

然而，Slick 的 Image 类可能是不可序列化的，这是有充分理由的。如果它包含一些与操作系统相关的低级内容，则可能无法仅将其序列化，将其发送到服务器并在那里打开。也许一些更简单的解决方案，例如将图像名称发送到服务器并从服务器上的文件加载它会更可靠？

# zend-framework - zfdatagrid 和 jqgrid：子网格未加载

> ID：14547155
> 
> 赞同：1
> 
> 时间：2013-01-27T12:06:34.697
> 
> 标签：zend-framework, jqgrid, subgrid, zfdatagrid

我正在使用 Zend Framework，这就是为什么我决定使用“zfdatagrid deploy jqgrid”而不是直接使用 jqgrid。我想要 jqgrid 和 subgrid。网格显示正常，但是当我单击展开按钮时，我会收到“正在加载”的通知，但没有任何反应。我已经调试正确调用了“subGridUrl”，因为调试器命中了我应该从 MySQL 中为 subgrid 选择数据的函数，并且我尝试传递纯 json 响应（而不是从 MySQL 中选择），但仍然没有显示 subgrid。也许我不明白必须是什么回应？我的回复：

```
<...>
$responce = new stdClass();
$responce->rows[0]['id']='0';
$responce->rows[0]['cell']=array('0','test1','123','1');
$responce->rows[1]['id']='1';
$responce->rows[1]['cell']=array('1','test2','321','2');
$j = json_encode($responce);
echo $j;
<...> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:26:02.240

对不起这是我的错。但是我不会删除我的问题，而是会解释我的错误，以防其他人也会这样做......

我在声明“subGridModel”时犯了一个错误。而是使用数组：

```
$jqGrid->setJqgParams(array(
    'caption' => 'test report',
    <..>
    'subGrid' => true,
    'subGridUrl' => $this->view->url(array('controller'=>'report','action'=>'indexstoragebalancesubgrid'),'default', true),
    'subgridtype' => 'json',
    'loadonce' => false,
    // next line where problem fixed
    'subGridModel' => array(array("name" => array("ID", "Title", "Code", "Quantity"), "width" => array(10,55,200,80)))
    <..>
)); 
```

我写了字符串：

```
'subGridModel'=>'[{name : ["ID", "Title", "Code", "Quantity"], width : [10,55,200,80]}]' 
```

这就是为什么它在 javascript 中不起作用的原因。

顺便说一句，你可以看到我在数组中写了数组。那是因为使用一个数组 ZFDataGrid 会生成这样的 javascript：

```
"subGridModel":{"name":["ID","Title","Code","Quantity"],"width":[10,55,200,80]} 
```

而不是这个：

```
"subGridModel":[{"name":["ID","Title","Code","Quantity"],"width":[10,55,200,80]}] 
```

jqgrid subgrid 工作很重要！

# c++ - 为多个实例提供相同的事件处理程序

> ID：14547157
> 
> 赞同：1
> 
> 时间：2013-01-27T12:07:24.390
> 
> 标签：c++, algorithm, events, poco

我的程序中有一个`Shape`类，它有一些命中测试逻辑来确定用户是否在形状内部单击。

**形状.h**

```
class Shape
{
    Event<ShapeArgs> balloonBurst;
    virtual void onMousePress(); //called when hit test is true on user's click
    private:
    bool hitTest(int x, int y);
}; 
```

**形状.cpp**

```
virtual void onMousePress()
{
    cout<<"Clicked inside the shape";
    ShapeArgs arg;
    arg.name = "XYZ";
    NotifyEvent(balloonBurst, arg);
} 
```

主类有上述形状类的多个实例 **主程序：（Main.h）**

```
vector<Shape*> shapes;
void handleShape(ShapeArgs &e); 
```

.cpp

```
main()
{
    for(int i=0;i<10;++i){
        Shape *shape = new Shape(Color Color, string URL);
        shapes.push_back(shape);
    }
} 
```

现在，我必须听取上述实例的`balloonBurst`事件。`Shape`如果我有一个实例，我会做如下的事情：

```
AddListener(shape->balloonBurst, this, &MainProgram::handleBalloonBurst); //where shape is a single instance` 
```

但是，我在这里有多个实例，我不确定我应该如何订阅它们并为气球提供相同的处理程序方法（需要注意：Balloonburst 事件没有做不特定于该气球的事情，所以不像`C#` `sender`不是在这次活动中对我很重要）。`handleballoonBurst(ShapeArgs &e)`将做另一件事（不特定于事件发生地的气球）

如何在这里监听所有气球形状实例的事件并提供单个处理程序方法？

# android - ADK v21 不工作

> ID：14547161
> 
> 赞同：0
> 
> 时间：2013-01-27T12:08:04.580
> 
> 标签：android

这个问题被问了很多次，也被回答了很多次，但即使没有答案对我有用……所以再次问..

我在 Win 8 64 位，JDK 32 + 64 位安装，Eclipse JRE 32 位和 A SDK 32 位。当我使用 SDK v20 时没问题当我更新到 SDK v21 时问题开始... Eclipse 开始说没有安装 SDK... SDK 管理器立即启动和关闭...

尝试了以下事情

*   从路径环境变量更改 Java 路径
*   修改 Android.bat 文件
*   从 c:\users\\ 文件夹中删除 .android 文件夹
*   尝试了最新的 ADT Bundle 最新的 x86

但没有一个有效

所以我恢复到 SDK v20 工作正常......

任何人都有其他解决方案......我应该坚持使用 SDK v20 吗？

==v2==

尝试按照 m0skit0 的建议更新 Eclipse 插件

来自[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

出错

收集要安装的项目时发生错误会话上下文是：（profile=epp.package.java，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。未找到包含以下内容的存储库：osgi.bundle,org.eclipse.cdt,8.1.1.201209170703 未找到包含以下内容的存储库：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:18:53.067

[安装 ADK Eclipse 插件](http://developer.android.com/sdk/installing/installing-adt.html)。从 Ecipe 的 Android SDK 管理器安装 ADK。使用它来更新，不要忘记不时更新 Elipse 插件。

# r - “需要 TRUE/FALSE 的缺失值”错误 vcd::mosaic

> ID：14547162
> 
> 赞同：6
> 
> 时间：2013-01-27T12:08:11.120
> 
> 标签：r

```
> library(vcd)
Loading required package: MASS
Loading required package: grid
Loading required package: colorspace
> library(MASS)
> tbl = table(survey$W.Hnd,survey$Fold)
> print(tbl)

        L on R Neither R on L
  Left      10       1      7
  Right     88      17    113
> mosaic(tbl)
Error in if (split_vertical[i]) { : missing value where TRUE/FALSE needed
Calls: mosaic -> mosaic.default -> strucplot -> labeling
Execution halted 
```

为什么会出现此错误，以及如何修复代码？

* * *

在这里轻松粘贴代码：

```
library(vcd)
library(MASS)
tbl = table(survey$W.Hnd,survey$Fold) # survey is a library data set in MASS
print(tbl)
mosaic(tbl) # produces the above error 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T12:24:00.990

尝试这个：

```
> mosaic(survey$W.Hnd ~ survey$Fold) 
```

![马赛克](../Images/b289271d555defa83153cc9f465a4a07.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-06T16:52:18.723

另一种选择是`structable`从`vcd`包本身使用。

```
library(vcd)
library(MASS)
tbl <- structable(survey$W.Hnd ~ survey$Fold)
print(tbl)
mosaic(tbl) 
```

# dart - Dart 的快照和 Java 字节码有什么区别？

> ID：14547163
> 
> 赞同：7
> 
> 时间：2013-01-27T12:08:19.697
> 
> 标签：dart

我一直在阅读 Dart 快照，并且经常将它们与 Smalltalk 图像进行比较。但对我来说，它们听起来很像 Java 字节码。

例如：

“Dart 快照只是令牌流的二进制序列化，是通过解析代码生成的。快照不是“正在运行的程序的快照”，它是在令牌变成机器代码之前生成的。所以，没有程序状态是在快照中捕获。”

此外，它们是跨平台的：

“快照格式本身是跨平台的，这意味着它可以在 32 位、64 位机器等之间工作。这种格式的设计使其可以快速读入内存，重点是最大限度地减少指针修复等额外工作。 "

我在某处弄错了吗？

资料来源：
[dart 中的快照概念是什么？](https://stackoverflow.com/questions/12871476/what-is-the-snapshot-concept-in-dart/12877348#12877348)
[http://www.infoq.com/articles/google-dart](http://www.infoq.com/articles/google-dart)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T01:35:53.653

快照包含以类似于 Smalltalk 图像的序列化形式表示已加载脚本的 VM 数据结构。为了更好地理解快照中包含的内容，我们应该看一下 Dart VM 在读取脚本时创建的内容：

*   库对象，指所有顶层结构，例如类或顶层方法和变量。
*   类对象，包含描述所有方法和字段的所有对象。
*   Script 和 Tokenstream 对象代表所有加载的源代码。
*   源代码中所有使用的标识符和字符串常量的字符串对象。

当使用与架构无关的格式生成快照时，此对象图被序列化为文件。这允许 Dart VM 在 32 位或 64 位机器上反序列化此快照文件，并重新创建所有必要的内部 VM 数据结构，这比从一组文件中读取原始脚本要快得多（参见 John 的回答）。

澄清一下约翰的回答。Dart VM 在生成快照时不会解析所有源代码。它只需要解析源的顶层就能够提取类、方法和字段定义，因为它们在序列化图中表示。特别是方法体不会被解析，并且因为脚本语言的习惯，只有在控制到达特定方法时才会报告错误。

正如 Ladicek 所指出的，Java 字节码的目的完全不同。加载字节码后，您可以在 JVM 中创建 VM 数据结构的快照以获得类似的效果。

简而言之：快照包含在 Dart VM 堆上分配的所有数据结构的有效表示，这些数据结构是开始执行脚本所需的。

-伊万

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-27T15:39:32.240

Dart 快照只是所有已提前解析的源文件的汇总。Dart 快照与 Java 字节码文件不同。Java 字节码文件由 JVM*机器代码*组成，是编译、链接和组装（进入 JVM 机器代码）阶段的产物。

Dart 快照是 Dart 程序的二进制文件，它的导入/部分源文件依赖项已被解析为抽象语法树并滚动到单个文件中。执行 Dart 快照可以缩短启动时间，因为：

1.  只能从磁盘或离线加载 1 个文件。相反，必须获取非快照 Dart 程序，然后必须获取任何导入的文件，依此类推。在可以进行每个后续源文件请求之前，必须解析先前获取的源文件以查明它是否引用了更多源文件。想象一下，如果你的 Dart 程序导入了 10 个库，每个库包含 10 个源文件。这意味着 110 个 I/O 请求和解析一个接一个地完成。
2.  解析已经提前完成。它在语法上是正确的并且可以被 Dart VM 编译。

HTH，约翰

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-21T20:29:30.210

我只想指出，在 Dart 2+ 中，关于快照有几个独特的概念：

*   内核快照
*   JIT 快照
*   AOT 快照

[你可以在这里](https://github.com/dart-lang/sdk/wiki/Snapshots)阅读更多。

# javascript - 用javascript读取数组json

> ID：14547173
> 
> 赞同：2
> 
> 时间：2013-01-27T12:09:38.227
> 
> 标签：javascript, jquery, json

我有这个数组电视，当我用循环读取这个数组时，它只给我最后一项，在这种情况下是东芝，我该怎么做才能向我展示电视品牌？

```
for (var i=0;i<tv.length;i++){
            $('#item').html(tv[i].Brand)}
<div id='item'></div> 
```

阵列电视：

```
var tv = [{"Name":"TV","Brand":"Samsung"},
{"Name":"TV","Brand":"Toshiba"},
{"Name":"TV","Brand":"LG"}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T12:10:48.073

*问题：*您只有一个`div#item`元素，并且在每次迭代中都更新它的值。

*解决方案：*动态创建并附加一个元素以显示数组中的每个项目，例如：

```
for (var i=0;i<tv.length;i++){
    $('<div/>').addClass('item').html(tv[i].Brand).appendTo('.container');
} 
```

在哪里：

*   `item`是一个类 - 现在你有多个元素
*   `container`- 假定为您希望在其下显示项目的父元素

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T12:10:57.200

`html()`覆盖每次迭代的内容，这就是为什么只有最后一个是可见的，其他的被覆盖。您应该使用附加：

```
$('#item').empty();
for (var i=0; i<tv.length; i++){
    $('#item').append(tv[i].Brand);
} 
```

# c - 无法打印出我的函数计算

> ID：14547182
> 
> 赞同：2
> 
> 时间：2013-01-27T12:10:34.503
> 
> 标签：c

我的任务是让那些赢得 100 万美元头奖的人将其存入银行，并从他的钱中赚取 8% 的年利率。现在，在每年结束之前，他都会拉 100k。那么他需要多少年才能清空他的帐户？

这是我的代码：

```
#include <stdio.h>
long int year_ended(long int prize);//declare the function to be implemented 

int main(void)

{

    long int jackpot, years;

    jackpot = 1000000;

    for (years = 0; jackpot >= 0; years++) //counting the years until the jackpot is 0
        year_ended(jackpot); 

    printf("it will take %ld years to empty the account", years);

    return 0;
}

long int year_ended(long int prize) //function to decrement 100k every year and add the erned interest

{
    double yearlyRate = 0.08;

    int YearlyWithdraws = 100000, left;

    left = (prize - YearlyWithdraws) * yearlyRate + (prize - YearlyWithdraws);

    prize = left;

    return prize;
} 
```

错误是：程序继续运行，但我没有输出..

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T12:15:06.170

```
for (years = 0; jackpot >= 0; years++)
    year_ended(jackpot); 
```

这是一个无限循环，因为条件始终为真。您可能想要修改`jackpot`. 就像是：

```
for (years = 0; jackpot >= 0; years++) 
    jackpot = year_ended(jackpot); 
```

# php - 什么是整数属性，'\0A\0A' 是什么意思？

> ID：14547187
> 
> 赞同：6
> 
> 时间：2013-01-27T12:11:06.273
> 
> 标签：php

我从[PHP 手册](http://php.net/manual/en/language.types.array.php)中读到了这个：

> 如果将对象转换为数组，则结果是一个数组，其元素是对象的属性。键是成员变量名称，有一些值得注意的例外：***整数属性是不可访问的***；私有变量在变量名前面加上类名；受保护的变量在变量名前有一个“*”。***这些前置值在两边都有空字节。*** ***这可能会导致一些意外行为：***
> 
> ```
> class A {
>     private $A; // This will become '\0A\0A' }
> 
> class B extends A {
>     private $A; // This will become '\0B\0A'
>     public $AA; // This will become 'AA' }
> 
> var_dump((array) new B()); 
> ```
> 
> ***上面似乎有两个名为“AA”的键，尽管其中一个*** ***实际上名为“\0A\0A”。***

我不太明白那些字体像***这样***的部分的含义。

什么是整数属性？

“这些前置值在任一侧都有空字节。这可能导致一些意外行为”是什么意思？

和“什么意思？上面看起来有两个名为'AA'的键，尽管其中一个实际上名为'\0A\0A'”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T12:21:01.533

通过使用此代码，您可以深入了解新的数组键。

```
$x = (array)new B();

foreach ($x as $key => $value) {
    echo bin2hex($key), ' = ', $value, PHP_EOL;
} 
```

它显示了键值的十六进制表示，从中您可以更清楚地看到发生了什么：

```
00420041 = 
4141 = 
00410041 = 
```

第一个属性 ( `B::A`) 的数组键被编码为`"\x00B\x00A"`， ie `chr(0) . 'B' . chr(0) . 'A'`，因为它的可见性是私有的`B`。

第二个属性 ( `B::AA`) 被编码为 simple `'AA'`，因为它的可见性是公开的。

第三个属性 ( `A::A`) 与第一个非常相似，被编码为`"\x00A\x00A"`，因为它的可见性对 是私有的`A`。

~~我不完全确定整数属性是什么。~~我不会担心数值属性，因为它们的使用可以忽略不计并且不鼓励（这可能是为什么没有太多提及这个“功能”的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T12:44:53.607

## 整数属性

这指的是名称是十进制整数的字符串表示形式的属性。例如：

```
$o = new stdClass;
$o->{"123"} = 'foo';        // create a new integer property

echo $o->{"123"}, PHP_EOL;  // verify it's there

$a = (array)$o;             // convert to array

echo $a['123'];             // OOPS! E_NOTICE: Undefined offset!

var_dump(array_keys($a));   // even though the key appears to be there!
print_r($a);                // the value appears to be there too! 
```

[一般来说，如果你重视你的理智](https://stackoverflow.com/q/10333016/50079)，PHP 中的整数属性不是你应该接近的东西。

## 前置值由`null`

对于`private`和`protected`属性，生成的数组键将包含不可打印字符`"\0"`。这可能很有用（因为该字符对于属性名称是不合法的，您可以使用此信息来确定属性的可见性），但如果您不希望它存在，它也可能是一个麻烦。例子：

```
class A {
    private $A; // This will become '\0A\0A'
}

class B extends A {
    private $A; // This will become '\0B\0A'
    public $AA; // This will become 'AA'
}

$a = (array) new B();

// The array appears to have the keys "BA", "AA" and "AA" (twice!)
print_r(array_keys($a));

// But in reality, the 1st and 3rd keys contain NULL bytes:
print_r(array_map('bin2hex', array_keys($a))); 
```

您可以从数组键中提取可见性信息，如下所示：

```
$a = (array) new B();
foreach ($a as $k => $v) {
    $parts = explode(chr(0), $k);
    if (count($parts) == 1) {
        echo 'public $'.$parts[0].PHP_EOL;
    }
    else if ($parts[1] == "*") {
        echo 'protected $'.$parts[2].PHP_EOL;
    }
    else {
        echo 'private '.$parts[1].'::$'.$parts[2].PHP_EOL;
    }
} 
```

# arrays - 从另一个类更新属于一个类的数组

> ID：14547188
> 
> 赞同：0
> 
> 时间：2013-01-27T12:11:11.797
> 
> 标签：arrays, actionscript-3, oop, class, object

我很久以前写过这段代码，当时我以为我理解了它，但现在我试图弄清楚它是如何工作的......

```
// Main.as

package {
    public class Main {

        public function Main() {
            var fruit:Array = [];
            UpdateClass.update(fruit);
            trace(fruit); // Traces out the string pushed into it? How??? I think the data would've got lost...
        }

    }
}

// UpdateClass.as

package {
    public class UpdateClass {

        public static function update(array:Array):void {
            array.push("haha, this is not a fruit!");
        }

    }
} 
```

我只是不明白 UpdateClass 如何设法更新 Main 的水果数组？我认为数据会丢失，因为它没有返回新数组？...当我尝试使用字符串和数字时，数据确实会像预期的那样丢失。

我不知道我在写这篇文章时在做什么，但我想尝试理解这背后的逻辑。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:55:53.810

`String`并且`Number`是 AS3 中的“原始”数据类型，而`Array`其他对象`MovieClip`是“复杂”或“参考”数据类型。

当您传递一个基元时，它的值会被复制，因此修改它不会影响原始值。当您传递一个复杂对象时，它实际上是对该对象在内存中地址的引用，因此您的函数正在修改原始对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T19:24:35.323

当您说字符串和数字丢失了值时，我假设如下：

```
// UpdateClass.as

package {
    public class UpdateClass {

        public static function update(num:Number):void {
            num = 1;
        }

    }
} 
```

它丢失的原因是因为您将原始对象的引用作为 num。但是函数更新将该引用更改为另一个包含值“1”的 Number 对象。如果您将另一个数组分配给传递的引用，这对于数组也是如此，例如：

```
// UpdateClass.as

package {
    public class UpdateClass {
        public static function update(array:Array):void {
            array = new Array();
            array.push("haha, this is not a fruit!");
        }

    }
} 
```

但是，由于您只是在传递的引用（push）上调用一个方法，'array' 仍然引用原始 Array 并更新它。

# python - 执行 sqlite 查询 - 为什么我得到 TypeError？

> ID：14547189
> 
> 赞同：1
> 
> 时间：2013-01-27T12:11:53.940
> 
> 标签：python, sqlite

代码是：

```
with sqlite3.connect('example.db', detect_types=sqlite3.PARSE_DECLTYPES) as conn:
    curr = conn.cursor()
    vals = ( surveyname , surveydesc , dictObj ,)
    curr.execute("INSERT INTO Surveys(Name, Desc, DictObject) VALUES (?, ?, ?)", vals) 
```

我得到的错误是：

```
 C:\Python26\html\xlsxhelper.py in register_survey(surveydict={u'q1': {'n': 3, 'nselect': 1, 'qn': 1, 're': {u'a': {'n': 3, 'text': u'\ud30c\ub791'}}, 'text': u'\uc88b\uc544\ud558\ub294 \uc0c9\uae54\uc740?', 'type': 0}, u'q2': {'n': 3, 'nselect': 2, 'qn': 2, 're': {u'a': {'n': 3, 'text': u'\ub625'}}, 'text': u'\uc88b\uc544\ud558\ub294 \uacfc\uc790\ub294? (2\uac1c\uc120\ud0dd)', 'type': 0}, u'q3': {'n': 1, 'nselect': 1, 'qn': 3, 're': {u'a': {'n': 1, 'type': 0}}, 'text': u'\ubd84\ub958', 'type': 1}, u'q4': {'n': 1, 'nselect': 1, 'qn': 4, 're': {u'a': {'n': 1, 'type': 1}}, 'text': u'\uccb4\ud06c', 'type': 1}, 'qn': 4}, surveyname='qwe', surveyinfo='Survey Description\r\nqwe')
  101         with sqlite3.connect('example.db', detect_types=sqlite3.PARSE_DECLTYPES) as conn:
  102             curr = conn.cursor()
  103             vals = (surveyname , surveydesc , dictObj) <= somehow this line is highlighted
  104             curr.execute("INSERT INTO Surveys(Name, Desc, DictObject) VALUES (?, ?, ?)", vals)
  105             conn.commit()                       
vals undefined, surveyname = 'qwe', surveydesc undefined, dictObj = 'eJwLVg8uLSpLrVRwSS1OLsosKMnMz4spiskrLE9V5yow5NIDANCTC5w=\n'
<type 'exceptions.TypeError'>: function takes at most 2 arguments (4 given) 
      args = ('function takes at most 2 arguments (4 given)',) 
      message = 'function takes at most 2 arguments (4 given)' 
```

函数最多接受 2 个参数是什么意思？我在这里调用什么函数？`curr.execute`接受 2 个参数：实际查询和参数。为什么第 103 行突出显示？这是一个简单的元组赋值。

调查名称和调查名称是简单的字符串。dictObj 是一个经过腌制并压缩成字符串的字典。因此，将三个字符串插入到具有 text/text/blob 列的行中。我找不到这里有什么问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:16:44.457

Python 没有运行该代码；它正在运行您的 python 文件的*先前*版本，其中包含不同的行；猜测是：

```
curr.execute("INSERT INTO Surveys(Name, Desc, DictObject) VALUES (?, ?, ?)", surveyname , surveydesc , dictObj) 
```

python traceback 必须再次读取源代码以向您显示导致错误的行，但如果您同时更改源代码，它将与导致错误的实际字节码不匹配。

重新启动你的 python 脚本（或任何运行你的脚本，比如 HTTP 服务器中的 WSGI 模块）；如果问题仍然存在，请删除所有`*.pyc`文件，并确保在保存对脚本的更改时，它的修改日期已更新。

# javascript - 使用地图 API 的商店定位器库中的“storeLocator.Feature”的下拉菜单

> ID：14547192
> 
> 赞同：1
> 
> 时间：2013-01-27T12:12:25.203
> 
> 标签：javascript, api, google-maps, google-maps-api-3, drop-down-menu

有什么方法可以使用**下拉菜单**，而不是[用于 Maps API 的商店定位器库](http://storelocator.googlecode.com/git/index.html?utm_campaign=sl&utm_source=youtube)示例中的复选框。该复选框是一个“storeLocator.Feature”项目。

本质上，我希望用户能够从下拉列表中选择一个项目，这会立即更改地图上的标记。

我对 Javascript 编码非常陌生，但在 CSS、HTML 和其他计算机语言方面经验丰富。我已经非常密切地遵循链接中的示例，因此您可以假设我自己的代码看起来相同。——</p>

这是我认为我必须编辑的代码部分：

```
DataSource.prototype.parse_ = function(csv) {
var stores = [];
var rows = csv.split('\n');
var headings = this.parseRow_(rows[0]);

for (var i = 1, row; row = rows[i]; i++) {
row = this.toObject_(headings, this.parseRow_(row));
var features = new storeLocator.FeatureSet;  
features.add(this.FEATURES_.getById('Cafe-' + row.Cafe));
    features.add(this.FEATURES_.getById('Wheelchair-' + row.Wheelchair));
    features.add(this.FEATURES_.getById('Audio-' + row.Audio));

var position = new google.maps.LatLng(row.Ycoord, row.Xcoord);

var shop = this.join_([row.Shp_num_an, row.Shp_centre], ', ');
var locality = this.join_([row.Locality, row.Postcode], ', ');

var store = new storeLocator.Store(row.uuid, position, features, {
  title: row.Fcilty_nam,
  address: this.join_([shop, row.Street_add, locality], '<br>'),
  hours: row.Hrs_of_bus
});
stores.push(store);
}
return stores;
}; 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T01:44:24.190

您需要按照以下步骤操作：

1.  **将面板的`featureFilter`-option 设置为`false`** （这将阻止库创建复选框）

2.  **创建一个变量来存储所有功能以供以后使用：**

    ```
    var features=view.getFeatures().asList();
    ```

    这将返回一个包含所有特征的数组

3.  **创建`select`-元素**

4.  **`select`使用所需的元素填充`option`**
    - 元素 迭代上面创建的**-array**`features`并将`option`每个项目附加到`select`. `option`通过调用项目的 - 方法获得的要在其中显示的文本`getDisplayName()`。

5.  **使用以下回调将更改处理程序添加到选择：**

    ```
    功能（）{
    view.set('featureFilter',
            新的 storeLocator.FeatureSet(features[this.selectedIndex]));
            view.refreshView();}
    ```

    （第 2 步中创建的数组在哪里`view`）`storeLocator.View``features`

    **5.将select放到文档内所需的位置**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T15:46:21.833

希望我可以在这里发表评论，因为我发现这个问题对我实现商店定位器非常有用。

Molle 博士在 JS fiddle 中的解决方案非常好，但是我刚刚注意到地图的“方向”功能不再起作用。这很容易纠正吗？谢谢

编辑：比我想象的要容易。在小提琴“featureFilter：”设置为“假”。class="feature-filter" 的 div 需要出现在代码中以显示方向，将值设置为“true”会显示 div（和复选框），以便方向工作。复选框被隐藏在样式表中..

```
.storelocator-panel .feature-filter {
/*overflow: hidden;*/ display:none
} 
```

这可能对某人有用

# cocoa - 如何更改 NSFont 中字母之间的间距？

> ID：14547194
> 
> 赞同：0
> 
> 时间：2013-01-27T12:12:32.717
> 
> 标签：cocoa, core-text, nsfont, nsfontmanager

我正在尝试更改 NSFont（例如 Gill Sans）中的字母间距。这是可能的还是我需要加载自己的自定义字体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T12:29:13.277

虽然我认为字体可能会指定一些字距调整提示，但字距调整实际上是*渲染*文本的一个属性。因此，您的问题的答案取决于您将如何将文本呈现到屏幕上。

如果您使用的是 NSAttributedString，您可以查看 NSKernAttributeName 属性（请参阅[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSAttributedString_AppKitAdditions/Reference/Reference.html#//apple_ref/doc/uid/TP40004007)中的常量部分。如果您使用的是 CoreText 和 CFAttributedString，您可以查看 kCTKernAttributeName 属性（请参阅[文档](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/CoreText_StringAttributes_Ref/Reference/reference.html)中的常量部分。

如果您使用其他东西来呈现文本，那么答案（如果有的话；并非所有文本呈现方法都支持高级定制）将取决于其他东西。

# c# - BinaryWriter 用于 64 位文件的替代品？

> ID：14547195
> 
> 赞同：2
> 
> 时间：2013-01-27T12:12:42.657
> 
> 标签：c#, 64-bit, seek, binarywriter

BinaryWriter - 无法对 64 位值执行 Seek。传递给函数 Seek (int32) 的参数对于大于 2 Gb 的文件是否有类似的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:32:35.320

这个问题的通常解决方案是`FileStream`在`long`创建`BinaryReader`.

# java - JSP 和 Java Servlet

> ID：14547200
> 
> 赞同：0
> 
> 时间：2013-01-27T12:13:10.690
> 
> 标签：java, jsp, servlets

我有一些代码。它适用于 JSp，但不适用于 Java servlet。我在这里粘贴我的代码。你能在servlet文件中说明错误吗？

**JSP：**

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<%
String rollno=null;
String category=null;
rollno=request.getParameter("rollno");
category=request.getParameter("category");
out.println(rollno+"\n"+category+"\n");
%>
</body>
</html> 
```

**Java 小服务程序：-**

```
import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;

import javax.servlet.annotation.WebServlet;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    public class a extends HttpServlet {

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws     ServletException, IOException {
            // TODO Auto-generated method stub
            PrintWriter out=response.getWriter();
            String rollno=null;
        String category=null;
        rollno=request.getParameter("rollno");
        category=request.getParameter("category");
        out.println(rollno+"\n"+category+"\n");
    }
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T12:19:49.307

使用 doGet 方法而不是 doPost

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
} 
```

# c# - HttpWebRequest.GetResponseStream 返回一个空字符串

> ID：14547203
> 
> 赞同：1
> 
> 时间：2013-01-27T12:14:06.133
> 
> 标签：c#, httpwebrequest, meta

我一直在尝试所有可能的方法来下载从使用的页面获取响应流`HttpWebRequest`，这在其他所有内容上都可以正常工作，但没有此页面。如您所见，返回的数据是一个 HTML，但它有一个我不是专家的元标记，但我试图得到这个块

```
{"error":4,"message":"Unsupported link format or unsupported hoster"} 
```

看来我不能，我试图将 GET 内容类型指定为“text/json”，但没有任何帮助。

下面是我在浏览器上打开页面时返回的 HTML 内容，但在代码中它返回空字符串。

```
 <html>
    <meta style="visibility: hidden !important; display: block !important; width: 0px !important; height: 0px !important; border-style: none !important;"></meta>
    <head></head>
    <body>
      <pre style="word-wrap: break-word; white-space: pre-wrap;">{"error":4,"message":"Unsupported link format or unsupported hoster"}
      </pre>
    </body>
    </html> 
```

编辑：

我已经尝试在本地主机上的页面中复制上面相同的 html 并尝试获取它的内容并且它确实有效，是否可能在 IIS 中存在一些可能阻止获取内容的限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:17:53.287

您是否有证据表明问题出在客户身上？更恰当的问题是：为什么服务器会发送这种奇怪的内容？客户端只接收服务器发送的任何内容。

我建议您调试服务器以找出答案，或者提出一个包含您的服务器端代码的新问题并专门询问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:05:52.777

尝试使用`WebRequest`类。[在这里](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)你可以找到它的文档。

您在页面中有此示例：

```
// Create a request for the URL.        
WebRequest request = WebRequest.Create ("[your_url]");
// If required by the server, set the credentials.
request.Credentials = CredentialCache.DefaultCredentials;
// Get the response.
HttpWebResponse response = (HttpWebResponse)request.GetResponse ();
// Display the status.
Console.WriteLine (response.StatusDescription);
// Get the stream containing content returned by the server.
Stream dataStream = response.GetResponseStream ();
// Open the stream using a StreamReader for easy access.
StreamReader reader = new StreamReader (dataStream);
// Read the content. 
string responseFromServer = reader.ReadToEnd ();
// Display the content.
Console.WriteLine (responseFromServer);
// Cleanup the streams and the response.
reader.Close ();
dataStream.Close ();
response.Close (); 
```

这将打印在`Console`该页面的 HTML 内容中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T10:20:26.360

我遇到了同样的问题，原因是我之前将方法设置为，`HEAD`并且在以后的修订中需要解析主体。

# php - 为什么 print_r() 显示数组文本？

> ID：14547205
> 
> 赞同：0
> 
> 时间：2013-01-27T12:14:42.833
> 
> 标签：php, printing

如何禁用数组文本？一切正常，但数组文本`var_dump`或至少`print_r`不是我想要的。

```
array(1) { [0]=> string(21564) "Content" } 
```

这是我的代码：

```
<?php

$url = "http://competitive.euw.leagueoflegends.com/de/ladders/euw/current/ranked_team_3x3";

preg_match('#<table class="views-table cols-6"[^>]+>[\w\W]*?</table>#i', file_get_contents($url), $match);
print_r($match);

?> 
```

Array ( [0] => ) <--- 这是它的丑陋部分，必须删除

显示问题的生活示例：http: [//bruteforce.tv/index.php/ladder](http://bruteforce.tv/index.php/ladder)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:44:29.577

您可以使用[`var_export`](http://php.net/manual/en/function.var-export.php)它输出变量的有效 PHP 表示，如果这就是您所追求的？

编辑：OP想要输出preg_match的结果而不是调试它，`echo $match[0]`答案是......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:40:13.767

更具体地说明您所说的数组文本。如果您正在谈论该`String(5)`部分，那么您可以使用`print_r`而不是`var_dump`其他方式，没有理由使用这些功能中的任何一个。

如果您的系统上`print_r`的`var_dump`行为相同，则它必须是修改输出的 PHP 插件 - 可能`XDebug`

# jquery - 如何使用 jquery 从数组中每隔几秒更改一次文本

> ID：14547206
> 
> 赞同：0
> 
> 时间：2013-01-27T12:14:47.360
> 
> 标签：jquery, twitter-bootstrap

我目前正在做一个项目并使用 Twitter Bootstrap 和 jQuery 设计一个顶部导航栏。我有一个搜索栏，用户可以使用它进行搜索查询。正如您在下面看到的，“占位符”的值是“汽车”。我希望 jQuery 更改“占位符”的值。jQuery 应该从数组中选择一个随机值（字符串），当文本在 x 秒之间变化时，应该有一个平滑的过渡（淡入和淡出）。

```
<div class="span4">
    <form class="navbar-search input-append">
        <input id="appendedInputButton" type="text" class="input-xlarge" placeholder="Cars">
        <button class="btn" type="button"><i class="icon-search"></i></button>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:25:04.310

这将每 1 秒替换一次占位符：

```
$(function() {

   var fonts = ['Times New Roman', 'Arial', 'Tahoma'];
   var time = setInterval(function() {
       var newFont = fonts[Math.floor(Math.random()*fonts.length)];
       $('#appendedInputButton').attr('placeholder', newFont);
   },1000);

}); 
```

[jsFiddle 在这里](http://jsfiddle.net/Jk7ga/)。在褪色方面，您可能无法重新创建您想要的功能。jQuery 提供了实现淡出的需要，无论是通过[`fadeOut()`](http://api.jquery.com/fadeOut/)还是[`animate()`](http://api.jquery.com/animate/)，但它们只影响 DOM 元素本身及其 CSS 属性之一——而不是属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T15:28:35.050

@hohner 似乎在这里完成了艰苦的工作！也许可以使用 CSS 过渡来处理褪色。我知道会有跨浏览器问题，但这是一个开始。

这是他的工作的一个分支，带有概念证明，其中第二个字体的文本颜色发生了变化。[http://jsfiddle.net/panchroma/qpUN6/](http://jsfiddle.net/panchroma/qpUN6/)

对我来说，这适用于 Mac Chrome 和 Safari。要完成所有字体更改，您需要在两个已知值之间循环标记类。Javascript 不是我的强项，但我相信其他人可以更进一步；）

CSS选择器是这样的

```
#appendedInputButton.marker::-webkit-input-placeholder {
color: blue;
}
#appendedInputButton.marker:-moz-placeholder {
color: blue;
} 
```

我从[这个来源中选择占位符文本得到了帮助](http://bit.ly/VgpsNc)

过渡是标准

```
#appendedInputButton::-webkit-input-placeholder{
transition: all 2s;
-webkit-transition: all 2s; /* Safari and Chrome */
} 
```

我把它减慢到 2 秒，这样你就可以看到发生了什么。CSS Transition 对我来说在 Firefox 中不起作用，不知道为什么。

祝你好运

# mysql - 600 000 条记录的 MySQL 选择查询优化

> ID：14547209
> 
> 赞同：2
> 
> 时间：2013-01-27T12:15:08.880
> 
> 标签：mysql

我需要从数据库中的所有产品（大约 600 000）生成 XML 文件。问题是我需要将每个产品的类别和代码放入该文件中。有些产品有 30 个类别和 10 个代码，这真的很痛苦。是否有可能以某种方式在单个有效查询中进行此操作，或者您能否给我一个提示如何改进我当前的解决方案：

```
SELECT * FROM products 
```

然后对于我获取代码和类别的每个产品：

```
SELECT * FROM categories WHERE productid=[productid] 
```

和

```
SELECT * FROM codes WHERE productid=[productid] 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:30:33.463

也许你可以玩`GROUP_CONCAT`： [http ://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
SELECT
  products.*,
  all_prod_categories.*
  all_prod_codes.*

FROM products

INNER JOIN
  (SELECT
     -- Who guarantees that all fields will be concated in the same order?
     -- Nobody :)
     GROUP_CONCAT( categories.id            ) AS all_prod_cat_ids,
     GROUP_CONCAT( categories.category_name ) AS all_prod_cat_names,
     ...
   FROM     categories
   GROUP BY categories.productid
  ) AS all_prod_categories ON categories.productid = products.id

INNER JOIN
  (SELECT
     GROUP_CONCAT( codes.id        ) AS all_prod_code_ids,
     GROUP_CONCAT( codes.code_name ) AS all_prod_code_names,
     ...
   FROM     codes
   GROUP BY codes.productid
  ) AS all_prod_codes ON codes.productid = products.id 
```

# c# - 将受约束的泛型参数从子类型转换为超类型

> ID：14547220
> 
> 赞同：1
> 
> 时间：2013-01-27T12:17:48.943
> 
> 标签：c#, generics, type-conversion, .net-4.5

我有一个像这样的通用函数：

```
private LOCAL_TYPE RemoteToLocal<LOCAL_TYPE>(RemoteObjectBaseType remoteObject)
        where LOCAL_TYPE: EntityBase
    {
        Type t = typeof(LOCAL_TYPE);
        if (t == typeof(FavoritePlace))
        {
            return new FavoritePlace(remoteObject as RemotePlaceType1);
        }
    } 
```

`EntityBase`非抽象类在哪里。`FavoritePlace`类继承自`EntityBase`.

但是，我收到一个错误：

> 无法将类型 Common.Model.FavoritePlace 隐式转换为“LOCAL_TYPE”。

这让我想知道：FavoritePlace 是 EntityBase 的子项，而 LOCAL_TYPE 被限制为 EntityBase 类型。为什么不能发生转换？我可能在这里遗漏了一些重要的东西。

**编辑：**好的，根据当前的答案和一些实验，我找到了另一种解决方法，即进行以下转换：

```
if (t == typeof(FavoritePlace))
    {
        return (LOCAL_TYPE)(EntityBase)new FavoritePlace(remoteObject);
    } 
```

现在编译器很高兴。但我只是想知道，如果从编译器的角度来看这种转换是可能的，为什么不能直接转换为 LOCAL_TYPE 呢？不是*可转换为*关系传递吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:29:37.763

问题是`FavoritePlace`不一定是`LOCAL_TYPE`. 如果你有

```
class OtherEntity : EntityBase { } 
```

`FavoritePlace`那么你打电话时不能返回

```
var entity = RemoteToLocal<OtherEntity>(remoteObject); 
```

如果您知道转换是安全的，则可以通过强制转换绕过它：

```
return (LOCAL_TYPE)(object)new FavoritePlace(remoteObject as RemotePlaceType1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:29:48.037

虽然你已经建立了通过*运行时的代码*其实`LOCAL_TYPE`是*静态*`FavoritePlace`的，编译器并不具备同样的知识。编译器希望您返回一个 type 的对象，与方法的类型参数完全匹配。*`LOCAL_TYPE`*

 *想到这种情况：有人打了以下电话——

```
var res = RemoteToLocal<MostHatedPlace>(remoteObj); // MostHatedPlace derives from EntityBase 
```

现在你在里面`RemoteToLocal`，你经历了一些条件，现在是时候返回结果了。你打电话

```
return new FavoritePlace(remoteObject as RemotePlaceType1); 
```

你知道代码中的这个分支是不可能到达的，因为有一个运行时检查可以保护你：

```
if (t == typeof(FavoritePlace)) {
    ....
} 
```

但是，编译器必须假设到达这个 return 语句是可能的，这在`LOCAL_TYPE`is *not* a的情况下是错误的`FavoritePlace`。

您可能需要在这里重新考虑泛型的使用：从代码片段看来，您需要泛型参数来避免将结果类型转换为调用者中所需的类型。但是，调用者将需要执行额外的检查以查看您内部的转换`RemoteToLocal`是否成功。在这种情况下，一种方法

```
private EntityBase RemoteToLocal(RemoteObjectBaseType remoteObject) {
    ....
} 
```

可能同样适合该任务，因为它不会有欺骗编译器的转换，并且调用代码的结构将保持不变。*

# asp.net - UI 与使用 .NET 技术的自定义授权进行 Web 服务通信

> ID：14547224
> 
> 赞同：0
> 
> 时间：2013-01-27T12:18:41.520
> 
> 标签：asp.net, wcf, authorization, soa

我正在尝试设计一个 Web 应用程序，该应用程序将使用 WCF 服务来访问数据并提供业务逻辑。所以总的来说，整个系统看起来像这样：

```
UI (ASP.NET MVC)
BusinessLayer (WCF Services)
DataLayer (Entity Framework)
Date (SQL Server Database) 
```

系统的所有部分都将抵抗同一个封闭环境，因此我将使用证书来保护`ASP.NET <-> WCF`连接。数据库连接将使用标准 EF 证券、连接字符串和 Windows 身份验证。

应用程序必须提供身份验证和授权功能。我将把大部分内容移到 ASP.NET 中，因此会有`ValidateUserAuth()`服务方法，用于验证凭据，但结果（`UserRole`该用户所属的）将被 ASP 用于创建用户会话。

之后，每个服务方法调用都需要知道当前用户的 UserRole，才能返回正确的结果（或者如果有必要说“访问被拒绝”）。**问题是我不想将它`UserRole`作为每个服务方法的参数传递！**我想让它自动发生。WCF甚至可以吗？

我需要的是：

*   从 ASP.NET 应用程序发出的每个服务调用都将使用从当前 ASP 会话中获取的用户数据进行扩展。
*   该调用调用的服务方法将能够接收该用户数据并根据用户权限使用它来提供结果。
*   所有这一切都会在后台以某种方式发生，因此不会`UserDetails`向从 Service 公开的每个 Service Method 添加额外的方法参数。

我阅读了很多关于 WCF 本身的内容，但发现了任何可以满足我要求的内容。我希望我只是错过了它，它仍然是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:41:48.863

以纯格式将用户角色从客户端传递到服务器将是一个设计错误。客户端可以通过在应用程序范围之外自由调用它们来轻松滥用您的服务。

为什么不依赖角色提供者？这样，您从客户端传递的只是身份（甚至可以是表单 cookie），然后在服务器端读取所有角色。您甚至可以使用内置机制在角色 cookie 中缓存角色。

前段时间我写了两篇关于使用表单身份验证保护 wcf 的教程，以便网页和活动客户端之间的集成很容易

[http://netpl.blogspot.com/2008/02/clickonce-webservice-and-shared-forms.html](http://netpl.blogspot.com/2008/02/clickonce-webservice-and-shared-forms.html)

[http://netpl.blogspot.com/2010/04/aspnet-forms-authentication-sharing-for.html](http://netpl.blogspot.com/2010/04/aspnet-forms-authentication-sharing-for.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:44:19.787

我决定为此使用 MessageInspector：

在客户端：

```
Public Function BeforeSendRequest(ByRef request As System.ServiceModel.Channels.Message, channel As System.ServiceModel.IClientChannel) As Object Implements System.ServiceModel.Dispatcher.IClientMessageInspector.BeforeSendRequest
    Dim requestMessageProperty = New HttpRequestMessageProperty()

    Dim currentUser = Authentication.AuthenticatedStaffcareUser

    If currentUser Is Nothing Then Throw New ApplicationException()

    requestMessageProperty.Headers("UserName") = currentUser.UserName
    requestMessageProperty.Headers("UserId") = currentUser.UserID
    requestMessageProperty.Headers("UserRole") = currentUser.UserRole
    requestMessageProperty.Headers("EffectiveDate") = currentUser.EffectiveDate
    request.Properties(HttpRequestMessageProperty.Name) = requestMessageProperty

    Return Nothing
End Function 
```

和服务器端：

```
Public Function AfterReceiveRequest(ByRef request As Message, channel As IClientChannel, instanceContext As InstanceContext) As Object Implements IDispatchMessageInspector.AfterReceiveRequest
    Dim messageProperty = CType(OperationContext.Current.IncomingMessageProperties(HttpRequestMessageProperty.Name), HttpRequestMessageProperty)

    Dim userName = messageProperty.Headers("UserName")
    Dim userId = Integer.Parse(messageProperty.Headers("UserId"))
    Dim userRole = messageProperty.Headers("UserRole")
    Dim effectiveDate = DateTime.Parse(messageProperty.Headers("EffectiveDate"))

    Dim identity = New AppServerUserIdentity(userName, userId, userRole, effectiveDate)
    Dim principal = New AppServerUserPrincipal(identity)

    Threading.Thread.CurrentPrincipal = principal

    Return Nothing
End Function 
```

我还必须设置自定义 AuthorizationPolicy 以防止标准的 AuthorizationPolicy 覆盖 Thread.CurrentPrincipal：

```
Public Function Evaluate(evaluationContext As EvaluationContext, ByRef state As Object) As Boolean Implements IAuthorizationPolicy.Evaluate

    Dim principal = TryCast(Threading.Thread.CurrentPrincipal, AppServerUserPrincipal)

    If principal Is Nothing Then
        Return False
    Else
        evaluationContext.Properties("Principal") = principal
        Return True
    End If
End Function 
```

# javascript - JavaScript + jQuery this 作用域

> ID：14547234
> 
> 赞同：1
> 
> 时间：2013-01-27T12:20:05.903
> 
> 标签：javascript, jquery, this, scope

我有这个问题 - 我真的无法自己解决。我已经下载[了这个 jQuery 插件](http://www.eyecon.ro/colorpicker/)。

我有*x*个作为 jQuery 对象的 div 被以下扩展：

```
 $('.colorSelector').ColorPicker({
        color: '#0000ff',
        onShow: function (colpkr) {
            $(colpkr).fadeIn(500);
            return false;
        },
        onHide: function (colpkr) {
            $(colpkr).fadeOut(500);
            return false;
        },
        onChange: function (hsb, hex, rgb) {
            $('.colorSelector div').css('backgroundColor', '#' + hex);
        }
    }); 
```

我想要的是检索`$('.colorSelector')`“this”引用（在 ColorPicker 方法的对象内）并替换可以将“css”方法分配给`$(this)`选择器而不是`$(.colorSelector div')`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:09:34.053

我不确定你的问题，但我认为你想让孩子们`div`使用`$(this)`：

```
$(this).find('div').css('backgroundColor', '#' + hex); 
```

如果不是这样，请澄清您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T08:01:53.277

对不起，我已经用另一种方式解决了这个问题。无论哪种方式thanx的答复。

**编辑：**
好吧，我使用了一个真正“原始”的解决方案并分配了唯一的 ID。比我能够通过这些 id 检索实例 - 但在我看来，解决方案并不是我真正想要的。

# python - Python中是否有任何保证永远不会失败的操作？

> ID：14547237
> 
> 赞同：1
> 
> 时间：2013-01-27T12:20:25.653
> 
> 标签：python, exception

在 C++ 中，为了使代码在出现异常时保持健壮，通常需要依赖这样一个事实，即保证一些简单的操作永远不会失败（因此永远不会抛出异常）。这些操作的示例包括分配整数和交换标准容器。

Python 中是否有任何操作可以提供这种无失败保证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T13:42:40.060

Python is a higher-level language than C and C++. Anything can involve code execution behind the scenes, and no name is exempt from looking up its current, possibly overridden value. It might be possible to identify some operations that are guaranteed never to raise an exception, but I suspect that set of operations would be so small that it provides no benefit over the usual assumption that anything can raise an exception at any time.

And the identification of those operations would require limiting your Python environment. For example, you can assign a trace function which is invoked for every line of your Python program. With a suitably crafted trace function, even 1+1 could raise an exception. So do we assume that there is no trace function? What about redefining builtins?

Practically speaking, you need to adopt a different mindset for Python: exceptions happen, and you can't know ahead of time what they might be. As Mark Amery says in the comments, C++ needs to avoid memory leaks and uninitialized variables, which are not issues in Python.

# google-app-engine - 在GAE（Google App Engine）中将实体存储为另一个实体的属性？

> ID：14547238
> 
> 赞同：1
> 
> 时间：2013-01-27T12:20:25.717
> 
> 标签：google-app-engine, google-cloud-datastore

```
static void editItem(Entity item,Entity user)
    {
        item.setProperty("Owner",user); 
    } 
```

正在做上述将一个实体属性设置为另一个实体的事情不是一件坏事，或者我应该像这样存储密钥 -

```
item.setProperty("Owner",user.getKey()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:41:54.300

根据 Google AppEngine 文档：

> 嵌入式实体的属性未编入索引，不能在查询中使用。**您可以选择将密钥与嵌入式实体相关联，但（与成熟实体不同）密钥不是必需的，即使存在，也不能用于检索实体。**

您可以在[嵌入式实体](https://developers.google.com/appengine/docs/java/datastore/entities#Embedded_Entities)中找到更多信息。

# android - 在对话框中设置 TextView

> ID：14547242
> 
> 赞同：-1
> 
> 时间：2013-01-27T12:20:52.627
> 
> 标签：android, dialog, textview

我尝试在具有不同布局但 TextView 上的文本没有改变的对话框上设置 TextView。我为此目的使用该代码：

```
 public void onDialogPositiveClick(DialogFragment dialog) {
    EditText et=(EditText)dialog.getDialog().findViewById(R.id.editText1);
    dosyaAdi=et.getText().toString();

    TextView txv=(TextView) dialog.getDialog().findViewById(R.id.header);
    txv.setText(parametre);

    if(dosyaIslemi){
    generateFeatures kayit=new generateFeatures(this,dosyaAdi);
    }
    else{
    generateFeatures kayit=new generateFeatures(this,dosyaAdi);
    }
    sm.registerListener(this, myAccelerometer,50000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:22:16.393

dialog.setTitle(text); 有什么问题？?

只需使用：

```
dialog.getDialog().setTitle("Title here"); 
```

# php - 如何通过mysql表跟踪parent_id？

> ID：14547246
> 
> 赞同：0
> 
> 时间：2013-01-27T12:21:34.727
> 
> 标签：php, mysql, recursion, tree, parent-child

我有一个代表伪目录系统的 mysql 表：

```
CREATE TABLE `file_directories` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `parent_id` int(11) DEFAULT NULL,
 `name` varchar(255) NOT NULL,
 `level` int(11) NOT NULL DEFAULT '1',
 `created` datetime NOT NULL,
 PRIMARY KEY (`name`,`id`),
 KEY `id` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1 
```

当用户浏览这个系统时，我们的函数接收到由列中的条目组成的路径`name`。

因此，类似于`first/child of first/grandchild`或`second/child of second/grandchild`将是有效路径，并且在数据库中看起来像这样。

```
/----------------------------------------------------\
| id | parent_id | name            | level | created |
|----|-----------|-----------------|-------|---------|
| 1  | NULL      | First           | 1     | ...     |
| 2  | 1         | Child of First  | 2     | ...     |
| 3  | 2         | Grandchild      | 3     | ...     |
| 4  | NULL      | Second          | 1     | ...     |
| 5  | 4         | Child of Second | 2     | ...     |
| 6  | 5         | Grandchild      | 3     | ...     |
\----------------------------------------------------/ 
```

现在，如果我想列出一个子目录，我的过程是这样的：

```
$path = 'first/child of first'; // demo data
$path = explode('/', $path); //array('first', 'child of first');
$level = count($path);
$name = end($path);

//query is not actually built like this, it uses the Codeigniter Active Records library
//but this is effectively the end result,
$sql = "SELECT * FROM `file_directories` WHERE `name` = '$name' AND `level` = $level";

///etc 
```

工作正常，直到我们处理具有`grandchild`相同名称并存在于同一级别的目录。

目录结构强制只有一个目录可以存在相同的目录`parent_id`，`name`但相同的目录可以存在`name`不同的目录。`parent_id``level`

我无法更改传递的数据，所以我能想到的唯一方法是从根节点开始，然后循环执行多个查询以找到正确的子节点。

因此，对于第二个孙子，查询将是。

```
$parent_id = NULL;
foreach($path as $seg){
    $id = SQL: SELECT `id` FROM `file_directories` WHERE `name` = '$seg' AND `parent_id` = (IS NULL for root node) $parent_id;
}

//Get the actual node
$node = SQL: SELECT `*` FROM `file_directories` WHERE `id` = '$id'; 
```

但是，这是很多查询，所以，在不改变我得到的数据的情况下，有没有更好的方法来跟踪树？或选择正确的节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:09:21.170

了解递归函数的奇妙之处：这段代码有点简化。

```
function select_child($node_id, $level, $target_level) {
  if(SELECT new_node_id WHERE parent_id = $node_id)
    if($level = $target_level) {
      return($new_node);
    } else {
      $results->add(select_child($new_node_id, ($level +1), $target_level);
    }
  } else {
    return(NULL);
  }
} 
```

此函数循环遍历给定节点的子节点，直到找到“叶子”（没有子节点的节点）或达到目标级别。如果您正在使用树，则您的大多数函数必须是递归的（调用它们自己直到匹配指定的条件）。

# jquery - 点击删除类

> ID：14547250
> 
> 赞同：-2
> 
> 时间：2013-01-27T12:22:33.233
> 
> 标签：jquery, click, addclass, removeclass

我在使用 jquery 删除类时遇到问题。

我想在点击类时添加和删除一个类，但它不起作用。为什么？

```
$('.class').click(function() {
    $(this).addClass("class1");
    $(this).removeClass("class");
}); 
```

隐藏功能可以正常工作（也可以使用 $(this).hide()），但之后图像更改不起作用：

```
$('.class').mouseenter(function() {
    jQuery(this).attr("src", 'icons/heart.png');
}).mouseleave(function() {
    jQuery(this).attr("src", 'icons/heart_disabled.png' );
});

$('.class1').mouseenter(function() {
    jQuery(this).attr("src", 'icons/heart_disabled.png');
}).mouseleave(function() {
    jQuery(this).attr("src", 'icons/heart.png' );
}); 
```

所以我认为班级没有改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:45:14.430

您应该委托事件，事件处理程序绑定到元素而不是类名，这就是您认为未添加/删除类的原因，请尝试以下操作：

```
$(document).on({
   mouseenter: function() {
      this.src = 'icons/heart.png';
   },
   mouseleave: function() {
      this.src = 'icons/heart_disabled.png';
   }
}, 'img.class');

$(document).on({
   mouseenter: function() {
      this.src = 'icons/heart_disabled.png';
   },
   mouseleave: function() {
      this.src = 'icons/heart.png';
  }
}, 'img.class1'); 
```

# php - zend db 选择类似通配符

> ID：14547257
> 
> 赞同：3
> 
> 时间：2013-01-27T12:23:00.800
> 
> 标签：php, zend-framework

试图在 zend db 的选择中查找有关“like”子句的一些信息，但没有成功。问题是不清楚如何在 LIKE 子句附近使用通配符“%”

我最初使用并在网络上数百个地方推荐的坏主意是

```
 $db->select()
    ->where('text LIKE "%'.$query.'%"'); 
```

我想，正确的答案应该是这样的：

```
 $db->select()
    ->where('text LIKE ?', $query); 
```

但没有使用通配符

我尝试了几种解决方案，但它们似乎都不起作用：

```
$db->select()
    ->where('text LIKE ?', '%$query%');
$db->select()
    ->where('text LIKE ?', '%{$query}%'); 
```

任何人都可以指出文档，或为此提供一个好的解决方案吗？

> where() 方法的第二个参数是可选的。它是一个替换到表达式中的值。Zend_Db_Select 引用该值并将其替换为表达式中的问号（“？”）符号。

说的不够

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-27T12:25:58.200

% 符号必须是绑定到查询的变量的一部分。如果您使用双引号而不是单引号，您的第二个示例将起作用。所以你可以这样做：

```
$query = '%'.$query.'%';
$db->select()
   ->where('text LIKE ?', $query); 
```

或者：

```
$db->select()
   ->where('text LIKE ?', "%$query%"); 
```

# c++ - 如何使用 TCP/IP 在 C++ 中同时将多个矩阵从服务器发送到客户端，反之亦然？

> ID：14547258
> 
> 赞同：-1
> 
> 时间：2013-01-27T12:23:13.497
> 
> 标签：c++, sockets, network-protocols, tcp-ip

我的代码在服务器端调用了两个函数**sendMatrixPos**和**sendMatrixTrack**来顺序发送两个矩阵。我将矩阵 evrey fram 发送给客户

**服务器**

```
void MyTestPlugin::sendMSGP()
{
    if(!connected)
        return;
    if ( (numbytes = send(client_skt, buf, 16*sizeof(float) ,0)) == -1){
        std::cerr<<"server, normal send error"<<std::endl;
        exit(1);
    }
}

void MyTestPlugin::sendMSGT()
{
    if(!connected)
        return;
    if ( (numbytes = send(client_skt, trackBuf, 16*sizeof(float) ,0)) == -1){
        std::cerr<<"server, normal send error"<<std::endl;
        exit(1);
    }
}

void MyTestPlugin::sendMatrixPos()
{
    if(!connected)
        return;

   Matrixd transNode = PluginHelper::getObjectMatrix();

   for (int i=0; i<4; ++i)
     for (int j=0; j<4; ++j)
        matrixP[i*4+j] = transNode(i,j);

   for(int i=0; i<16; i++)
   {
     cerr <<"matrixP:" << i << "   " << matrixP[i] << endl;
   }

    memcpy(buf,matrixP,sizeof(float)*16);
    sendMSGP();
}

void MyTestPlugin::sendMatrixTrack()
{

    if(!connected)
        return;
   Matrixd trackNode = PluginHelper::getHeadMat(1);

   for (int i=0; i<4; ++i)
     for (int j=0; j<4; ++j)
        matrixT[i*4+j] = trackNode(i,j);

   for(int i=0; i<16; i++)
   {
     cerr <<"matrixT:" << i << "   " << matrixT[i] << endl;
   }

    memcpy(trackBuf,matrixT,sizeof(float)*16);
    sendMSGT();
}

void MyTestPlugin::preFrame()
{ 
  sendMatrixPos();   
  sendMatrixTrack();
} 
```

另一方面，我在客户端有两个调用函数，以便每帧从服务器顺序接收两个矩阵。

**客户**

```
void osgMain::draw()
{
    recvMSG();
    ...
    recvMSG();
}

void osgMain::recvMSG()
{
    numbytes = recv(client_skt, buf, bufferSize,0);
        if ( numbytes == -1 ){
            //__android_log_print(ANDROID_LOG_ERROR,"jni client","recv error");
            //exit(1);
        }
        else
        {
            memcpy (matrix, buf, numbytes);
        }
} 
```

我使用了 TCP/IP 协议。我需要同时发送和接收两个矩阵（不是按顺序），这一步该怎么做？或如何同时发送两个矩阵？

客户端的BUFFERSIZE 1024和服务器端的1024 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:19:44.890

您的传输将受到“网络管道大小”的限制 - 除非您有 40Gb/s 网卡，否则您不太可能从尝试并行发送数据中受益 - 您只会让您的代码更复杂 -只要您的代码被编写为异步发送/接收，这就是您所需要的。

# linux - 如何使用 CUDA_FORCE_PTX_JIT？

> ID：14547261
> 
> 赞同：0
> 
> 时间：2013-01-27T12:23:19.187
> 
> 标签：linux, cuda, nvcc

根据 NVIDIA 编程指南：

> 应用程序在运行时加载的任何 PTX 代码都由设备驱动程序进一步编译为二进制代码。这称为即时编译。即时编译增加了应用程序加载时间，但允许应用程序从最新的编译器改进中受益。

...

> 将 CUDA_FORCE_PTX_JIT 设置为 1 会强制设备驱动程序忽略应用程序中嵌入的任何二进制代码（参见第 3.1.4 节），并改为实时编译嵌入的 PTX 代码；如果内核没有嵌入式 PTX 代码，它将无法加载

我已经使用以下标志编译了我的简单 vectorAdd ：

```
nvcc -o vectorAdd -gencode arch=compute_20,code=sm_20 vectorAdd.cu 
```

当`CUDA_FORCE_PTX_JIT`环境变量未设置时，我得到正确的结果。但是当我将`CUDA_FORCE_PTX_JIT`环境变量设置为时，`1`我会收到以下错误`cudaGetErrorString`：

```
invalid device function 
```

如何解决此问题并让 CUDA_FORCE_PTX_JIT 正常工作？也许我的编译方式没有嵌入任何 PTX 代码。

提前致谢。

***更多的信息：***

CUDA 驱动程序版本：295.41

CUDA 工具包版本：4.0

操作系统：Ubuntu 10.04

硬件：GTX 480 或 Tesla C2050

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:20:17.210

我找到了一个锻炼来解决这个问题。在编译期间，无论如何都不能指定目标 GPU（删除`-arch`或`-gencode`标志）。随后，驱动程序在运行时生成目标二进制文件。

# node.js - 如何使用 expressjs 对 hoganjs 中的部分进行条件包含？（使用 hogan-express 模块）

> ID：14547264
> 
> 赞同：1
> 
> 时间：2013-01-27T12:23:45.053
> 
> 标签：node.js, express, angularjs, hogan.js

我使用 express 3.0.x 和 hogan-express 作为模板引擎来构建单页应用程序。

我想添加一个包含有助于我开发/调试应用程序的信息的部分内容。（我也在使用 angularjs）

根据我应用程序中某处的变量，例如“devMode = true”，我想包含这个特定的部分，如果“devMode = false”则不会包含它。

这是我的文件

index.js（路线）：

```
exports.index = function(req, res) {
    res.locals = {
        template_engine: 'HoganJS'
    }

    return res.render(
        'index',
        {
            partials:
            {
                head: 'head', foot: 'foot'
            }
        }
        );
};

exports.partials = function(req, res) {

    res.render('partials/' + req.params.entity + '/' + req.params.name)
} 
```

索引.html：

```
[[> head]]

<div class="navbar fixed-top">
    <div class="navbar-inner">
        <a class="brand" href="/">My app</a>
        <ul class="nav">
        </ul>
    </div>
</div>

<div class="container">
    <div ng-view></div>
</div>

[[> foot]] 
```

（我将 {{ }} 更改为 [[ ]] 以解决与 angularjs 语法的冲突）

我想在 [[>foot]] 之前包含类似 [[>dev]] 的内容，具体取决于我的应用程序中某处的布尔值。

感谢您的任何帮助：）

# uiwebview - 邮件编写器没有显示在我的 UIWebView 下

> ID：14547269
> 
> 赞同：1
> 
> 时间：2013-01-27T12:24:04.197
> 
> 标签：uiwebview, mfmailcomposeviewcontroller

我有一个 MainController 和 detailcontroller。当我弹出书籍选择并选择一本书时，detailcontroller 会显示一个带有书籍文章的 UIWebView：

```
@interface IpadBooksViewController : UITableViewController {
    SearchResult                *searchResult;
    IpadArticleViewController   *detailController;
    IpadMainViewController      *mainController;
    UIPopoverController         *popover;
} 
```

在 UIWebView 中，我显示了一个电子邮件图标并捕获了该方案：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

    NSURL *url          = [request URL];
    NSString *scheme    = [url scheme];
    NSString *host      = [url host];

    if ([[url description] hasSuffix:@"next"]) {
        NSLog(@"next Show");
    }

    BOOL isShareLinks       = [host isEqualToString:@"displayShareLinks"];
    BOOL isFavoriteLinks    = [host isEqualToString:@"displayFavoriteLinks"];

    if ([@"myappurl" isEqualToString:scheme] && (isShareLinks || isFavoriteLinks)) {        

        self.selectedArticleNumber  = [url.path lastPathComponent];

        if (isShareLinks) {                     
            [self sendMailArticleNumber:selectedArticleNumber];

        } else if (isFavoriteLinks) {
            NSLog(@"ipad favorite clicked");
            [self toggleFavorite:selectedArticleNumber];

            Broker *broker = [[Broker alloc] init];
            [broker loadProjects:self];
            [broker release];            
        }
    }

    return [super webView:webView shouldStartLoadWithRequest:request navigationType:navigationType];

} 
```

操作应该在我的 UIWebView 下显示 MFMailController，但没有显示任何错误消息：

```
- (void) sendMailArticleNumber:(NSString *)articleNumber {
    MFMailComposeViewController* composer = [[MFMailComposeViewController alloc] init];
    composer.mailComposeDelegate = self;
    [composer setSubject:@"Article"];

    NSString *messageBody = [Article fetchBody:articleNumber bookId:bookId];

    [composer setMessageBody:messageBody isHTML:YES];   
    [self presentModalViewController:composer animated:YES];

    [composer release];     
} 
```

欢迎任何帮助。我确实尝试创建一个弹出窗口，addView atIndex 没有成功......如果您需要更多代码，请告诉我。

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:00:12.083

我确实通过将控制器加载到委托中解决了这个问题，如下所示：

```
 [((PublilexAppDelegate*)[[UIApplication sharedApplication] delegate]) sendMailArticleNumber:selectedArticleNumber bookId:self.bookId]; 
```

然后进入 Delegate ：

```
- (void) sendMailArticleNumber:(NSString *)articleNumber bookId:(NSString*)bookId {
    MFMailComposeViewController* composer = [[MFMailComposeViewController alloc] init];
    composer.mailComposeDelegate = self;
    [composer setSubject:@"Article"];

    NSString *messageBody = [Article fetchBody:articleNumber bookId:bookId];

    [composer setMessageBody:messageBody isHTML:YES];
    [self->navigationController presentModalViewController:composer animated:YES];

    [composer release];
} 
```

并驳回并回到以前的观点：

```
-(void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error {

    [self->navigationController dismissModalViewControllerAnimated:YES];

    //    [self dismissViewControllerAnimated:YES completion:nil];

    //    [((PublilexAppDelegate*)[[UIApplication sharedApplication] delegate]) navigateToIpadMain];

} 
```

# android - 加入对联系人内容提供者的查询

> ID：14547271
> 
> 赞同：1
> 
> 时间：2013-01-27T12:24:32.397
> 
> 标签：android, android-contentprovider

我们如何在内容提供者上运行连接查询？我需要为 account_type = "custom.account.type" 的所有行查询 Contacts.CONTENT_URI。但在 Contacts.CONTENT_URI 中没有 account_type 列。Account_type 列在 Rawcontacts.CONTENT_URI 中可用。

我可以做的一件事是从 Rawcontacts.CONTENT_URI 获取联系人ID，其中 account_type = "custom.account.type"。而不是查询 Contacts.CONTENT_URI。有没有更好的选择？

# visual-studio-lightswitch - Lightswitch Application.ShowScreen - 如何引用我移动到的屏幕？

> ID：14547274
> 
> 赞同：0
> 
> 时间：2013-01-27T12:24:38.283
> 
> 标签：visual-studio-lightswitch

我有 2 个屏幕，一个是列表，另一个是在第一个屏幕上从 Id 过滤参数的详细信息。当我在详细信息屏幕上进行过滤并放置参数时，Application.ShowDetail 仍然是免费的。我找到了通过 ShowScreen 发送参数的唯一方法，但不知道如何为它选择屏幕。它需要IScreenDefinition。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T09:29:43.403

当您将*屏幕属性*添加到您希望用作屏幕参数的屏幕（使用*Add Data Item*）时，您必须确保在屏幕属性的属性窗格中勾选*Is Parameter 。*

# python - 为什么图像不在剪贴板中

> ID：14547282
> 
> 赞同：0
> 
> 时间：2013-01-27T12:25:05.590
> 
> 标签：python, pygtk, clipboard

我使用了这个`Python` [脚本](https://stackoverflow.com/questions/3571855/pasting-image-to-clipboard-in-python-in-linux)（灵感来自这里）

```
#! /usr/bin/python

import pygtk
pygtk.require('2.0')
import gtk
import os
import sys

def copy_image(f):
    assert os.path.exists(f), "file does not exist"
    image = gtk.gdk.pixbuf_new_from_file(f)

    clipboard = gtk.clipboard_get()
    clipboard.set_image(image)
    clipboard.store()

if __name__ == "__main__":
  copy_image(sys.argv[1]) 
```

将图像复制到剪贴板。运行后

`python imgclip.py img.png`

我想将图像粘贴到`Inkscape`with `ctrl+V`，但`Inkscape`写入 `Nothing on the clipboard`.

您知道如何更正此问题以便能够将图像复制到剪贴板然后将其粘贴到`Inkscape`吗？

操作系统：`Ubuntu 12.04`

# nservicebus - NServiceBus 和通用事件类型

> ID：14547285
> 
> 赞同：0
> 
> 时间：2013-01-27T12:25:33.533
> 
> 标签：nservicebus, ncqrs

我正在使用 NCQRS 框架和 NServiceBus 3.3.4 做一些工作。我一直在努力争取一些订阅，据我所知，我的所有配置都是 100% 正确的。

经过一番挖掘，我注意到保存在 Raven DB 订阅文档中的 MessageType 名称看起来有点奇怪。NCQRS 框架将域事件包装在一个名为 EventMessage'1 的通用类型中。现在，当该消息保存在 scuscription 存储中时，它似乎删除了部分名称，见下文：

```
Ncqrs.Nsb.EventMessage`1[[Platform.Events.Category.CategoryRemoved, Version=1.0.0.0 
```

我希望这个名字更像是这样的：

```
Ncqrs.Nsb.EventMessage`1[[Platform.Events.Category.CategoryRemoved, Version=1.0.0.0]] 
```

至少。

这可能是一个错误还是我做错了什么？我在 app.config 中的订阅如下所示：

```
 <add Messages="Ncqrs.NServiceBus.EventMessage`1[[Platform.Events.Category.CategoryRemoved, Platform.Events]], Ncqrs.NServiceBus" Endpoint="core.platform.domain" /> 
```

这让我疯了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T07:54:43.383

这不是错误，NServiceBus 将不支持这一点，因为我们希望推动您使用更明确的消息协定。也许有一种方法可以将 NCQRS 配置为不需要“EventMessage”这个东西？

# android - 使用greenDao选择具有以下场景的行的最佳方法？

> ID：14547288
> 
> 赞同：0
> 
> 时间：2013-01-27T12:25:49.230
> 
> 标签：android, sqlite, greendao

我有**3 张桌子**：

```
 Manager: manager_id, taluka_name  
    Employee: employee_id, employee_manager_id   
    Target: target_id, target_employee_id 
```

现在我必须明智地显示所有目标**taluka_name**的 ListView 。我正在使用 greenDao 与 SQlite 数据库进行交互。

**这是我尝试过的过程**，使用我使用的方法花费的时间太长：

```
 Step1: Get Manager ID for the taluka name from the DB.
    Step2: Get Employee for the Target table->Employee ID.
    Step3: Get Manager ID from the Employee table.
    Step4: Compare if Both Manager ID are equal {if YES then target 
           belongs to that taluka} 
```

**以下是我想使用 Greendao 完成的查询类型**

```
 SELECT *
        FROM target t, location l, current c
        WHERE t.target_location_id = l.location_id
        AND t.target_location_id = c.school_id
        AND t.target_status <> '0'
        AND t.target_status <> '4'
        AND DATEDIFF(NOW(),t.target_exec_end_time)<7 
```

# javascript - 将变量传递给代码

> ID：14547289
> 
> 赞同：1
> 
> 时间：2013-01-27T12:25:57.450
> 
> 标签：javascript, variables, image, src

希望有人可以帮助菜鸟。提前谢谢了。

我有一个索引页面，其中包含指向数百个包含歌曲词的其他页面的链接。我已经建立了每个歌曲页面，但是拥有一个从索引页面获取变量并找到相应单词（以 png 图形存在）的 MASTER 页面会简单得多。

我已经对第 1 步进行了排序 - 我可以使用以下方法将变量从索引页传递到母版页：

```
<a href="javascript: window.open('MUSIC/beatles/mastertest2.html?song=ER', '_parent')"> 
```

其中`song=ER`是显示 Eleanor Rigby 单词的变量。对于第 2 步，我还可以使用以下命令在母版页中检索该信息：

```
var imageSrc = (qs("song")+".png");  document.write(imageSrc); 
```

这将显示文本`ER.png`，这是我要显示的图像的名称。

对于第 3 步，我试图将相同的变量读入：

```
<input type="image" src="imageSrc;"> 
```

显示图片。我已经搜索了这个论坛和其他论坛好几天了，没有任何建议对我有用。我可能会错过编码中必不可少的早期步骤？

**更新**：

我的主 html 文件有这个代码来检索变量：

```
function qs(search_for) {
    var query = window.location.search.substring(1);
    var parms = query.split('&');
    for (var i=0; i<parms.length; i++) {
        var pos = parms[i].indexOf('=');
        if (pos > 0 && search_for == parms[i].substring(0,pos)) {
            return parms[i].substring(pos+1);;
        }
    }
    return "";
} 
```

它使用此代码显示变量（附加 .png）只是为了向我证明它正在通过：

```
var imageSrc = (qs("song")+".png");
document.write(imageSrc); 
```

然后我试图将变量输入到例程中以显示所选的 png。下一个脚本不起作用，但我现在正在努力尝试任何事情：

```
var imageSrc = (qs("song")+".png");
document.write(imageSrc);

<input type="image" src="@imageSrc;" border="0" value="Notes" onClick="placeIt(); showIt()">
<input id="song-image" type="image">
var imageSrc = 'ER.png';
var input = document.getElementById('song-image');
input.src = imageSrc; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:04:44.753

如果您已经`<input type="image">`在 HTML 页面中，则必须添加一个`id`，然后将其`src`属性设置为

HTML：

```
<input id="song-image" type="image"> 
```

JS：

```
var imageSrc = 'http://www.lorempixel.com/200/100';
var input = document.getElementById('song-image');
input.src = imageSrc; 
```

[JSFiddle](http://jsfiddle.net/ZYV4Y/)用于测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:51:16.417

如果我理解你的话，它非常简单。你在找这个吗？

```
var input = document.createElement('input');
input.type = 'image';
input.src = imageSrc;
document.body.appendChild(input); 
```

如果您可以`imageSrc`使用 document.write 打印变量，那么您可以像上图那样使用它。

# java - 如何使用 Netbeans 在 Rest Webservice 中使用 JoinTable 的列进行查询

> ID：14547291
> 
> 赞同：1
> 
> 时间：2013-01-27T12:25:59.697
> 
> 标签：java, database, rest

我怎么能做这个查询： `@NamedQuery(name = "Scuser.findFriends", query = "SELECT s FROM Scuser s, friends f WHERE f.firstid = :iduser and s.iduser = f.secondid")`

在这堂课中：

```
@Entity
@Table(name = "scuser")
@XmlRootElement
@NamedQueries({
 @NamedQuery(name = "Scuser.findAll", query = "SELECT s FROM Scuser s"),
 @NamedQuery(name = "Scuser.findByIduser", query = "SELECT s FROM Scuser s WHERE s.iduser = :iduser"),
    @NamedQuery(name = "Scuser.findByUpassword", query = "SELECT s FROM Scuser s WHERE s.upassword = :upassword"),
    @NamedQuery(name = "Scuser.findByUname", query = "SELECT s FROM Scuser s WHERE s.uname = :uname"),
    @NamedQuery(name = "Scuser.findByTpoints", query = "SELECT s FROM Scuser s WHERE s.tpoints = :tpoints"),
//    @NamedQuery(name = "Scuser.findFriends", query = "SELECT s FROM Scuser s, friends f WHERE f.firstid = :iduser and s.iduser = f.secondid"),
    @NamedQuery(name = "Scuser.findByUnameUpassword", query = "SELECT s FROM Scuser s WHERE s.uname = :uname and s.upassword = :upassword")})
public class Scuser implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 2147483647)
    @Column(name = "iduser")
    private String iduser;
    @Size(max = 200)
    @Column(name = "upassword")
    private String upassword;
    @Size(max = 200)
    @Column(name = "uname")
    private String uname;
    // @Max(value=?)  @Min(value=?)//if you know range of your decimal fields consider using these annotations to enforce field validation
    @Column(name = "tpoints")
    private Double tpoints;
    @JoinTable(name = "friends", joinColumns = {
        @JoinColumn(name = "firstid", referencedColumnName = "iduser")}, inverseJoinColumns = {
        @JoinColumn(name = "secondid", referencedColumnName = "iduser")})
    @ManyToMany
    private Collection<Scuser> scuserCollection;
    @ManyToMany(mappedBy = "scuserCollection")
    private Collection<Scuser> scuserCollection1;
    @ManyToMany(mappedBy = "scuserCollection")
    private Collection<Beach> beachCollection;

public Scuser() {
}

public Scuser(String iduser) {
    this.iduser = iduser;
}

public String getIduser() {
    return iduser;
}

public void setIduser(String iduser) {
    this.iduser = iduser;
}

public String getUpassword() {
    return upassword;
}

public void setUpassword(String upassword) {
    this.upassword = upassword;
}

public String getUname() {
    return uname;
}

public void setUname(String uname) {
    this.uname = uname;
}

public Double getTpoints() {
    return tpoints;
}

public void setTpoints(Double tpoints) {
    this.tpoints = tpoints;
}

@XmlTransient
public Collection<Scuser> getScuserCollection() {
    return scuserCollection;
}

public void setScuserCollection(Collection<Scuser> scuserCollection) {
    this.scuserCollection = scuserCollection;
}

@XmlTransient
public Collection<Scuser> getScuserCollection1() {
    return scuserCollection1;
}

public void setScuserCollection1(Collection<Scuser> scuserCollection1) {
    this.scuserCollection1 = scuserCollection1;
}

@XmlTransient
public Collection<Beach> getBeachCollection() {
    return beachCollection;
}

public void setBeachCollection(Collection<Beach> beachCollection) {
    this.beachCollection = beachCollection;
}

@Override
public int hashCode() {
    int hash = 0;
    hash += (iduser != null ? iduser.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {
    // TODO: Warning - this method won't work in the case the id fields are not set
    if (!(object instanceof Scuser)) {
        return false;
    }
    Scuser other = (Scuser) object;
    if ((this.iduser == null && other.iduser != null) || (this.iduser != null && !this.iduser.equals(other.iduser))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "REST.Scuser[ iduser=" + iduser + " ]";
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T19:17:30.260

如果我理解正确的话，你有一个用户的 ID，并且你想得到这个 ID 标识的用户的朋友。最简单的方法是做

```
Scuser user = em.find(User.class, userId);
Collection<Scuser> friends = user.getScuserCollection(); 
```

如果你想使用 JPQL 查询，你只需要

```
select friend from Scuser user 
inner join user.scuserCollection friend
where user.id = :userId 
```

请注意，您的映射不正确： scuserCollection1 和 beachCollection 都由相同的属性映射。您还应该为您的关联选择更好的名称（`friends`例如，而不是`scuserCollection`）。

# php - 如何将使用 php 创建的图像上传到 Facebook 上的用户时间轴

> ID：14547295
> 
> 赞同：0
> 
> 时间：2013-01-27T12:26:25.057
> 
> 标签：php, gd, facebook-apps

我开发了一个 facebook 应用程序，其中包含以下文件 1) index.php 2) cap3.php 其中**cap3.php**在 PHP 中使用 GD 生成图像。index.php 使用以下代码显示此图像

```
<img src="cap3.php"> 
```

现在我希望将此生成的图像发布在用户的时间轴上。我试图通过使用以下代码来做到这一点：

```
$facebook->setFileUploadSupport(true);
$img = 'cap3.php';
$args=array( 'source' => '@' .$current , 'message' => 'Photo uploaded via!' );
$photo = $facebook->api('/me/photos', 'POST', $args); 
```

但图片未发布在用户的时间线上，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:26:46.250

一种方法是将`cap3.php`文件放在远程主机中以获取指向它的 URL。例如：`http://www.example.com/cap3.php`。然后，您从您的应用程序下载该图像并将其发送到 Facebook。

让我们看一个例子：

```
$local_img = 'cap3.png'; // I assume your cap3.php generates a PNG file
$remote_img = 'http://www.example.com/cap3.php';

// sample: check for errors in your production app!
$img_content = file_get_contents($remote_img);
file_put_contents($locale_img, $img_content);

$facebook->setFileUploadSupport(true);
$args=array( 'source' => '@' .$locale_img , 'message' => 'Photo uploaded via!' );
$photo = $facebook->api('/me/photos', 'POST', $args); 
```

# c++ - 在 C++ 中分配指针数组

> ID：14547296
> 
> 赞同：-5
> 
> 时间：2013-01-27T12:26:29.243
> 
> 标签：c++, performance

我想使用 malloc 因为它的内存分配发生在`O(1)`而不是`O(n)`使用以下代码：

```
MyQuickInitArray(int size)
{
    A = new T[size];
} 
```

当 A 是类型时：

```
T* A 
```

我认为初始化一个指针数组将需要`O(1)`，因为指针是原语，但我加倍检查，上面的代码实际上`size`多次传递给`T`. 如果可以通过`malloc`我缺少的任何一个或某些东西来避免这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:29:35.660

正如您正确指出的那样，`new T[n]`调用构造函数，而`malloc()`没有。

*   如果您不想调用构造函数（为什么？），那么显然`new[]`不适合您。
*   但是，如果您确实希望调用构造函数，那么就无法绕过`o(n)`复杂性。

如果您要查找的是指向 的*指针`T`*数组，则正确的语法如下：

```
T** A = new T*[size]; 
```

这不会调用`T`'s 的构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:31:01.967

> 我认为初始化一个指针数组需要 O(1)

您没有分配指针数组，而是使用代码分配 T 类型的**对象数组：**

```
T *A = new T[size]; 
```

分配你需要的指针数组

```
typedef T *T_Ptr;
T_Ptr *A = new T_Ptr[size]; 
```

我正在使用 typedef，以便语法更清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T12:31:34.990

新的超载怎么办

```
void* class_name::operator new(size_t size)
{
      cout<<"Allocating memory for object \n";
      void *p;
      p=malloc(size);
      if(p==NULL)
      cout<<"Memory allocation error\n\a";
      else
      return p;
      } 
```

对于数组

```
void* class_name::operator new[](size_t size)
{
      cout<<"Allocating array of size "<<size<<endl;
      void *p;
      p=malloc (size);
      if(p==NULL)
      {
                 cout<<"Memory allocation error \n";
                 }
      return p;
      } 
```

如何使用：

```
Class_name *objptr1,*objptr2;
objptr1=new class_name(10);
objptr2=new class_name[10]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T12:32:59.993

如果您为对象分配了空间，您可以使用 C++ 的“placement new”运算符正确初始化它们；在这种情况下`new`不分配内存，但它会调用构造函数。[http://www.cplusplus.com/forum/general/55150/](http://www.cplusplus.com/forum/general/55150/)有一个例子，但通常你不想这样做，你想在程序的非时间关键部分分配你的对象。

# jquery - 为什么我的回调不适用于 JSONP 数据

> ID：14547299
> 
> 赞同：-1
> 
> 时间：2013-01-27T12:26:43.393
> 
> 标签：jquery, ajax, json, web-services, jsonp

我无法获取以下数据的提要。我知道我为 ajax 指定数据的方式有问题。以下是我尝试过的：

```
<script type="text/javascript">
        $(function() {
            $.ajax({
                type:'GET',
                dataType:'jsonp',
                url:'http://api.stackoverflow.com/1.0/tags/?callback=?',
                success:function(data) {
                    alert(data.tags[0].name.length)
                },
                error:function() {
                    alert("Sorry, I can't get the feed");   
                }
            })
        });
    </script> 
```

我收到以下错误：

> SyntaxError: 无效标签 [中断此错误]
> 
> “总计”：31987，

**根据 TJ，我只是得到一个原始 JSON 文件。现在，当我的服务器发送 JSON 请求时，我需要做什么。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T12:30:26.250

如果您查看对 的响应`http://api.stackoverflow.com/1.0/tags/?callback=foo`，您会看到它是 JSON，而不是 JSONP。根据[api.stackoverflow.com](http://api.stackoverflow.com)的文档，您需要添加`jsonp`查询参数以获取 JSONP：`http://api.stackoverflow.com/1.0/tags/?jsonp=foo`

对于想要控制回调名称以获得最大可靠性的 jQuery，您可以使用`jsonp`选项告诉它该参数的名称应该是什么（并且不要将它放在 URL 中，jQuery 会这样做）：

```
$.ajax({
    type:'GET',
    dataType:'jsonp',
    jsonp: "jsonp",
    url:'http://api.stackoverflow.com/1.0/tags/',
    success:function(data) {
        alert(data.tags[0].name.length)
    },
    error:function() {
        alert("Sorry, I can't get the feed");   
    }
}); 
```

# python - 如何远程/以编程方式调用 Python Cmd 实例，替换标准输入和标准输出管道？

> ID：14547306
> 
> 赞同：2
> 
> 时间：2013-01-27T12:27:48.023
> 
> 标签：python, stdout, stdin, stringio, python-cmd

我希望有一个[Python Cmd](http://docs.python.org/2/library/cmd.html#cmd.Cmd)实例在单独的线程中运行，并且能够从我的程序的其他部分写入输入和读取输出。在 Cmd 的构造函数中，可以指定 stdin(default: sys.stdin) 和 stdout(default sys.stdout)。我期待我可以使用[StringIO](http://docs.python.org/2/library/stringio.html)模块进行读写，但 Cmd 只是读取初始字符串，到达 EOF 并退出。我需要与 sys.stdin 相同的行为，因此 readline() 将阻塞，直到有输入要读取。

我做了这门课，它可以按我的意愿工作：

```
import Queue

class BlockingLineIO():
    def __init__(self):
        self.closed = False
        self.queue = Queue.Queue()
        self.remainder = ""

    def write(self, s):
        for line in s.splitlines(True):
            if not line.endswith("\n"):
                self.remainder = line
            elif line != "":
                self.queue.put(self.remainder + line)
                self.remainder = ""

    def read(self):
        if self.queue.empty() and self.closed:
            return ""
        else:
            self.queue.put(False)
            return "".join(list(iter(self.queue.get, False)))

    def readline(self):
        if self.queue.empty() and self.closed:
            return ""
        else:
            return self.queue.get()

    def flush(self):
        pass

    def close(self):
        self.queue.put("")
        self.closed = True

def main():
    import cmd, threading
    my_cmd_class = type("Foo", (cmd.Cmd, object),
                        {'do_EOF': lambda self, line: self.stdout.write("Bye.\n") == None})
    my_cmd = my_cmd_class(stdin=BlockingLineIO(), stdout=BlockingLineIO())
    my_cmd.use_rawinput = False
    my_cmd.prompt = ""
    cmd_loop = threading.Thread(target=my_cmd.cmdloop)
    cmd_loop.start()
    my_cmd.stdin.write("help\n")
    print my_cmd.stdout.readline()
    print my_cmd.stdout.read()
    my_cmd.stdin.close()
    cmd_loop.join()
    print my_cmd.stdout.read()

if __name__ == '__main__':
    main() 
```

**问题：**

以上是实现我需要的正常方式吗？是否有任何标准类可用于管道标准输入和标准输出？我觉得我错过了一些东西。

# c++ - 使用 std::remove 删除错误的字符

> ID：14547309
> 
> 赞同：2
> 
> 时间：2013-01-27T12:28:40.727
> 
> 标签：c++, string, std, cut

> **可能重复：**
> [从 C++ 中的 std::string 中删除空格](https://stackoverflow.com/questions/83439/remove-spaces-from-stdstring-in-c)
> [std::remove 不起作用](https://stackoverflow.com/questions/13661355/stdremove-does-not-work)

我使用 std::remove 从字符串中删除一些字符。例如：

```
std::string hash_value = "3f-2b-d6-ab-aa-6d-62-b4-ce-6f-6b-2f-21-4c-99-fc";
std::remove(hash_value.begin(), hash_value.end(), '-'); 
```

之后这个`hash_value`大小必须是 32 并且有值：

> 3F2BD6ABAA6D62B4CE6F6B2F214C99FC

但它 47 的大小和价值：

> 3F2BD6ABAA6D62B4CE6F6B2F214C99FC-2F-21-4C-99-FC

你能帮我吗，我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T12:30:44.773

您需要使用[remove-erase idiom](http://en.wikipedia.org/wiki/Erase-remove_idiom)。std::remove 仅将元素移动到容器的末尾，之后您需要删除它们。

尝试

```
hash_value.erase(std::remove(hash_value.begin(), hash_value.end(), '-'), hash_value.end()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T12:31:06.517

[std::remove](http://en.cppreference.com/w/cpp/io/c/remove)重新排列序列的内容，以便“删除”的元素位于末尾，其中 end 定义为函数返回的迭代器与序列末尾之间的范围。如果你想让你的序列更短，请使用[erase-remove idiom](http://en.wikipedia.org/wiki/Erase-remove_idiom)。

```
hash_value.erase(std::remove(hash_value.begin(), hash_value.end(), '-'), hash_value.end()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T13:43:05.217

该函数不能更改包含元素范围的对象的属性（即，它不能更改数组或容器的大小）：删除是通过将比较等于 val 的元素替换为下一个不等于 val 的元素来完成的。 ，并通过将迭代器返回到应该被视为其新的过去元素的元素来发出缩短范围的新大小的信号。

例如看下面与 std::remove 相关的例子

int myints[] = {10,20,30,30,20,10,10,20}; // 10 20 30 30 20 10 10 20

// 范围边界：

int* pbegin = myints; // ^

int* 挂起 = myints+sizeof(myints)/sizeof(int);

// 现在挂起指向容器（逻辑）结束的点

挂起 = std::remove (pbegin, 挂起, 20);

std::cout << "范围包含：";

for (int* p=pbegin; p!=pend; ++p)

std::cout << ' ' << *p;

它会显示

范围包含：10 30 30 10 10

# php - PHP在页面上重复图像

> ID：14547312
> 
> 赞同：-2
> 
> 时间：2013-01-27T12:29:00.690
> 
> 标签：php

我制作了一个 php 程序来在一个方形框中重复页面上的图像。

图像连续重复 100 次，然后垂直重复 100 次。这意味着在该方形框中重复了总共 100x100 个图像。一个这样的重复图像的大小是 10x10 像素。

现在的问题是，当要在 localhost 上测试站点时，页面挂起，尝试打开时，加载后上下滚动它很慢并且有点挂起。

我使用嵌套的 for 循环来重复图像。相同的代码是：

```
<?php
  for($i=1;$i<=100;$i++)
    {for($j=1;$j<=100;$j++)
        {
            echo '<div id="imagebox">';
            echo "<img src='images/image.png'>";
            echo '</div>';
        }
    }
  ?> 
```

伙计们可能是什么问题？

提前感谢任何可能的解决方案。

任何替代的编程技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T02:57:44.020

为什么不尝试获取图像尺寸，然后将容器 div 的高度和宽度设置为图像高度和宽度的 100 倍（分别），然后使用 CSS background-repeat 属性在 x 和 y 轴上重复图像. 当您尝试重复单个图像时，此解决方案可能会起作用。看看它在行动：http: [//jsfiddle.net/vzX9q](http://jsfiddle.net/vzX9q)

的HTML：

```
<div id="img"></div> 
```

Javascript：

```
$(document).ready(function() {
  var imgSrc = "http://lorempixel.com/100/100";

  $("#img").css({
    background: "url("+imgSrc+") repeat"
  });

 var newImg = new Image();
 newImg.src = imgSrc; 

newImg.onload = function() {
  var imgHeight = newImg.height;
  var imgWidth = newImg.width;

  $("#img").css({
    width : imgWidth*100,
    height: imgHeight*100
  });
}
}); 
```

# java - 用于识别构造函数声明的正则表达式

> ID：14547314
> 
> 赞同：1
> 
> 时间：2013-01-27T12:29:15.430
> 
> 标签：java, regex

我正在研究需要能够识别 Java 源文件中的无参数构造函数声明的代码段。虽然这些声明需要在语法上正确，但它们仍可能分布在多行中，例如：

```
public MyCons() 
```

或者

```
public
   MyCons() 
```

甚至

```
public

   MyCons
  (

    ) 
```

我对 Java 中的正则表达式非常陌生，所以我不知道如何让它工作。到目前为止，我尝试过的是：

```
public[\\s|\\n]*MyCons[\\s|\\n]*\\(\\S+\\) 
```

不过，它似乎没有检测到涉及多个交替空格和换行符的情况，就像上面的最后一个示例一样。此外，如果我可以用只接受一个单词的正则表达式替换 MyCons，那就太好了（尽管这不是绝对必要的）。

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:39:09.423

您需要使用反向引用，因为类名和构造函数名始终相同..

```
class\\s*([a-zA-Z\\d$]+).*?(public\\s+\\1\\s*\\(\\s*\\)) 
```

`Group 2`捕获所需的构造函数

您需要`DOTALL`在匹配时使用正则表达式选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:01:26.880

识别代码的另一种简短方法：

```
s = s.replaceAll("\\s+", "");
s.equals("publicMyCons()"); 
```

# hibernate - Spring-MVC 和休眠：java.lang.NoClassDefFoundError: org/springframework/transaction/interceptor/TransactionInterceptor

> ID：14547315
> 
> 赞同：1
> 
> 时间：2013-01-27T12:29:34.480
> 
> 标签：hibernate, spring-mvc

我正在尝试使用 Spring MVC 和 Hibernate。我正在关注本教程：http: [//viralpatel.net/blogs/spring3-mvc-hibernate-maven-tutorial-eclipse-example/](http://viralpatel.net/blogs/spring3-mvc-hibernate-maven-tutorial-eclipse-example/)

我没有使用maven，而是蚂蚁。我收到此错误：

```
Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/XXX-servlet.xml] java.lang.NoClassDefFoundError:org/springframework/transaction/interceptor/TransactionInterceptor 
```

我发现了一些类似的线程，建议在其中添加 spring-tx.jar 等，但我已经包含了这个。

以下是罐子列表：

*   commons-logging-1.1.1.jar
*   hibernate-core-4.1.9.Final.jar
*   javaee-api-5.0.4.jar
*   spring-aop-3.2.0.RELEASE.jar
*   spring-aspects-3.2.0.RELEASE.jar
*   spring-beans-3.2.0.RELEASE.jar
*   spring-context-3.2.0.RELEASE.jar
*   spring-context-support-3.2.0.RELEASE.jar
*   spring-core-3.2.0.RELEASE.jar
*   spring-expression-3.2.0.RELEASE.jar
*   spring-jdbc-3.2.0.RELEASE.jar
*   spring-orm-3.2.0.RELEASE.jar
*   spring-tx-3.2.0.RELEASE.jar
*   spring-web-3.2.0.RELEASE.jar
*   spring-webmvc-3.2.0.RELEASE.jar
*   spring-webmvc-portlet-3.2.0.RELEASE.jar

我的 xxx-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jee="http://www.springframework.org/schema/jee"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <context:annotation-config />
   <context:component-scan base-package="ee.XXX.controller" />

   <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
      <property name="prefix" value="/WEB-INF/jsp/" />
      <property name="suffix" value=".jsp" />
   </bean>

      <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="UTF-8" />
    </bean>
    <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
        p:location="/WEB-INF/jdbc.properties" />

    <bean id="dataSource"
        class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
        p:driverClassName="${jdbc.driverClassName}"
        p:url="${jdbc.databaseurl}" p:username="${jdbc.username}"
        p:password="${jdbc.password}" />

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation">
            <value>classpath:hibernate.cfg.xml</value>
        </property>
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${jdbc.dialect}</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
    </bean>

    <tx:annotation-driven />
    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

</beans> 
```

我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0" metadata-complete="true">
  <display-name>XXX</display-name>
<!--   <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  -->

      <servlet>
        <servlet-name>XXX</servlet-name>
        <servlet-class>
           org.springframework.web.servlet.DispatcherServlet
        </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>XXX</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

</web-app> 
```

任何帮助表示赞赏！

谢谢。

# jquery - 重新加载 AAPL wordpress 插件的代码（写在 DOM 上的 javascripts）

> ID：14547319
> 
> 赞同：1
> 
> 时间：2013-01-27T12:29:56.050
> 
> 标签：jquery, ajax, wordpress, reload

我在使用 AAPL for Wordpress 及其重新加载代码时遇到了一些问题。

[http://wordpress.org/extend/plugins/advanced-ajax-page-loader/](http://wordpress.org/extend/plugins/advanced-ajax-page-loader/)

我必须重新加载从 Flickr 小部件 URL 调用 Javascript 的 Flickr 小部件。它像 JS 一样调用这个 URL：

[http://www.flickr.com/badge_code_v2.gne?count=9&display=random&&layout=x&source=user&user=(USERID)@N02&size=s](http://www.flickr.com/badge_code_v2.gne?count=9&display=random&&layout=x&source=user&user=(USERID)@N02&size=s)

调用的 javascript 返回此标记：

```
var b_txt = '';

// write the badge

    b_txt+= '<div class="flickr_badge_image" id="flickr_badge_image1"><a href="http://www.flickr.com/photos/92475511@N02/8405790393/"><img src="http://farm9.staticflickr.com/8375/8405790393_ef9e7a4e55_s.jpg" alt="Una foto su Flickr" title="9° Palio delle Facoltà @ CUS Catania" height="75" width="75"></a></div>';

    b_txt+= '<div class="flickr_badge_image" id="flickr_badge_image2"><a href="http://www.flickr.com/photos/92475511@N02/8406884700/"><img src="http://farm9.staticflickr.com/8358/8406884700_812180d298_s.jpg" alt="Una foto su Flickr" title="Mercatini di Natale - Dicembre 2012" height="75" width="75"></a></div>';

    b_txt+= '<div class="flickr_badge_image" id="flickr_badge_image3"><a href="http://www.flickr.com/photos/92475511@N02/8406883634/"><img src="http://farm9.staticflickr.com/8370/8406883634_cdb4b75b27_s.jpg" alt="Una foto su Flickr" title="Sit in di protesta contro la Strage di Brindisi" height="75" width="75"></a></div>';

    b_txt+= '<div class="flickr_badge_image" id="flickr_badge_image4"><a href="http://www.flickr.com/photos/92475511@N02/8405790285/"><img src="http://farm9.staticflickr.com/8504/8405790285_4c6f762a9e_s.jpg" alt="Una foto su Flickr" title="9° Palio delle Facoltà @ CUS Catania" height="75" width="75"></a></div>';

    b_txt+= '<div class="flickr_badge_image" id="flickr_badge_image5"><a href="http://www.flickr.com/photos/92475511@N02/8406892022/"><img src="http://farm9.staticflickr.com/8213/8406892022_027ae8b541_s.jpg" alt="Una foto su Flickr" title="Samuela Schilirò @ Feltrinelli - Catania" height="75" width="75"></a></div>';

    b_txt+= '<div class="flickr_badge_image" id="flickr_badge_image6"><a href="http://www.flickr.com/photos/92475511@N02/8406884602/"><img src="http://farm9.staticflickr.com/8183/8406884602_8aa7d0046a_s.jpg" alt="Una foto su Flickr" title="Sit in di protesta contro la Strage di Brindisi" height="75" width="75"></a></div>';

    b_txt+= '<div class="flickr_badge_image" id="flickr_badge_image7"><a href="http://www.flickr.com/photos/92475511@N02/8405790967/"><img src="http://farm9.staticflickr.com/8237/8405790967_b2926b1218_s.jpg" alt="Una foto su Flickr" title="9° Palio delle Facoltà @ CUS Catania" height="75" width="75"></a></div>';

    b_txt+= '<div class="flickr_badge_image" id="flickr_badge_image8"><a href="http://www.flickr.com/photos/92475511@N02/8405791329/"><img src="http://farm9.staticflickr.com/8216/8405791329_398c6b0d4e_s.jpg" alt="Una foto su Flickr" title="Mercatini di Natale - Dicembre 2012" height="75" width="75"></a></div>';

    b_txt+= '<div class="flickr_badge_image" id="flickr_badge_image9"><a href="http://www.flickr.com/photos/92475511@N02/8406884314/"><img src="http://farm9.staticflickr.com/8497/8406884314_92e5c6dc61_s.jpg" alt="Una foto su Flickr" title="Sit in di protesta contro la Strage di Brindisi" height="75" width="75"></a></div>';

b_txt += '<span style="position:absolute;left:-999em;top:-999em;visibility:hidden" class="flickr_badge_beacon"><img src="http://geo.yahoo.com/p?s=792600102&t=6e94e5b35e270281f978527bf40fa8db&r=http%3A%2F%2Fcatania.liveuniversity.it%2F&fl_ev=0&lang=it&intl=uk" width="0" height="0" alt="" /></span>';

document.write(b_txt); 
```

因此 Flickr JS 将标记直接写入 DOM。显然它需要由 AAPL 重新加载才能重新执行 document.write。

然后我必须重新加载一个与 Flickr 小部件具有相同行为的 JS 文件。我假设两者都必须以相同的方式重新加载：

```
 // Kirecom Networks
var images = [],
index = 0;

images[0] = "<a href = 'http://www.centrodidatticoathena.it/servizi' target='_blank'><img src='http://images.catania.liveuniversity.it/sites/3/athena/bannergenerale.jpg' width='262' alt='Athena'></a>";

images[1] = "<a href = 'http://www.centrodidatticoathena.it/corso-serale-di-inglese/' target='_blank'><img src='http://images.catania.liveuniversity.it/sites/3/athena/corsoinglese50.jpg' width='262' alt='Athena'></a>";

images[2] = "<a href = 'http://www.centrodidatticoathena.it/servizi/' target='_blank'><img src='http://images.catania.liveuniversity.it/sites/3/athena/tesi200.jpg' width='262' alt='Athena'></a>";

images[3] = "<a href = 'http://www.centrodidatticoathena.it/servizi/' target='_blank'><img src='http://images.catania.liveuniversity.it/sites/3/athena/lezionindividuali.jpg' width='262' alt='Athena'></a>";

images[4] = "<a href = 'http://www.centrodidatticoathena.it/servizi/' target='_blank'><img src='http://images.catania.liveuniversity.it/sites/3/athena/inglesespagnolo5.jpg' width='262' alt='Athena'></a>";

index = Math.floor(Math.random() * images.length);

document.write(images[index]);

//Stop randomizing 
```

你能帮我重新加载代码吗？在我看来，我应该将 JS 文件重新写入 div，用他的 ID 选择它，或者刷新包含 javascripts 的 DIV（它们在页面的正文中），但我不知道该怎么做.

非常感谢！

# asp.net-mvc-3 - 如何将 knockoutjs 值绑定到 MVC 操作链接 (id)

> ID：14547324
> 
> 赞同：13
> 
> 时间：2013-01-27T12:30:14.987
> 
> 标签：asp.net-mvc-3, data-binding, mvvm, knockout.js, knockout-mvc

我有与 knockoutjs 模型绑定的表视图。

```
<tbody data-bind="foreach: items, visible: items().length > 0">
    <tr>
        <td data-bind="text: Title"></td>
        <td data-bind="text: Type"></td>
        <td data-bind="text: Author"></td>
        <td data-bind="text: Description"></td>
        <td data-bind="text: Time"></td>
        <td data-bind="text: Publisher"></td>
        <td data-bind="text: itemId"></td>
        <td>@Html.ActionLink("Edit", "Edit", "Manager", new {id = <knockoutjs model itemId value here>}, new {@class = "cssClass"})</td>
    </tr>       
</tbody> 
```

我将解释代码。我有包含 itemArray(items) 的 knockoutjs 模型。我想创建actionlink并将id值绑定到来自knockoutjs模型的（itemId）。

希望你能理解我的问题

先感谢您

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-27T13:52:39.283

```
<a data-bind="attr: { 'href': '@Url.Action("Edit", "Manager")/' + itemId() }" class="cssClass">
    Edit
</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T13:47:12.413

我不确定我是否理解您要执行的操作。但是这段代码

```
<td>@Html.ActionLink("Edit", "Edit", "Manager", new {id = <knockoutjs model itemId value here>}, new {@class = "cssClass"})</td> 
```

将不起作用，因为敲除是客户端 javascript，而 razor 语法在服务器中执行并且仅呈现 html 字符串。

为什么不用普通的 html 超链接替换 ​​@Html.ActionLink

```
<a href="someurl" data-bind="attr: { href: Link }, text: SomeField"></a> 
```

# php - php标签转换为html

> ID：14547325
> 
> 赞同：0
> 
> 时间：2013-01-27T12:30:17.640
> 
> 标签：php, apache, html-entities

我有以下代码：

```
<link href="<?=__CSS__?>/style.css" rel="stylesheet"> 
```

__ CSS __ 是一个与样式文件夹的路径相关的常量，但在浏览器中它是这样转换的：

```
<link href="&lt;?=__CSS__?&gt;/style.css" rel="stylesheet"> 
```

是否存在配置问题？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T12:33:09.107

**解决方案#1：启用短标签**

放

```
short_open_tag=On 
```

在[php.ini中](http://php.net/manual/en/ini.core.php)

并重新启动您的 Apache 服务器。

**解决方案#2：不要使用它**

改变

```
<link href="<?=__CSS__?>/style.css" rel="stylesheet"> 
```

到

```
<link href="<?php echo __CSS__; ?>/style.css" rel="stylesheet"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T12:32:30.393

为什么不改变

```
<link href="<?=__CSS__?>/style.css" rel="stylesheet"> 
```

到

```
<link href="<?php __CSS__?>/style.css" rel="stylesheet"> 
```

# iphone - 无法禁用情节提要中的后退按钮

> ID：14547334
> 
> 赞同：0
> 
> 时间：2013-01-27T12:31:29.640
> 
> 标签：iphone, ios5, uinavigationcontroller, uinavigationbar, ios5.1

场景是故事板，这里是结构 UINavigationController > NavigationController > UITabBarController > UIViewController

我正在尝试使用以下选项将后退按钮隐藏到最后一个 UIViewController 但它不起作用。

```
self.navigationItem.leftBarButtonItem=nil;
self.navigationItem.backBarButtonItem=nil;
self.navigationController.navigationItem.leftBarButtonItem=nil;
self.navigationController.navigationItem.backBarButtonItem=nil;
self.navigationController.navigationBar.backItem.hidesBackButton=YES;
self.navigationController.navigationItem.hidesBackButton=YES;
self.navigationItem.hidesBackButton=YES; 
```

谁能帮助或让我知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T02:45:06.987

好吧，我得到了我的答案。

```
self.tabBarController.navigationItem.hidesBackButton=YES; 
```

当我使用 UITabBarController 时，我应该这样做并使用它，实际上解决了我的问题。

# javascript - 哪个 JS 框架可以像 DB 一样存储数据？

> ID：14547336
> 
> 赞同：0
> 
> 时间：2013-01-27T12:32:10.710
> 
> 标签：javascript

我需要像数据库一样在JS的客户端存储数据，

```
db.insert(unique_key,{
    a : 20,
    b : 30
}) ;
db.select('a>10') ; 
```

这只是说明性的语法，

我怎样才能比键/值对更多地处理数据。

任何承认都会很棒，

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:33:54.313

查找 HTML5 SQLite：[http](http://cookbooks.adobe.com/post_Store_data_in_the_HTML5_SQLite_database-19115.html) ://cookbooks.adobe.com/post_Store_data_in_the_HTML5_SQLite_database-19115.html ，它允许您以比键值对更复杂的结构存储数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T13:17:05.387

您可以使用 JavaScript 对象文字符号来存储数据，并使用 javascript linq 库（例如[jslinq](http://jslinq.codeplex.com)）来查询它们。如果你可以使用 jQuery，数据操作很简单，请参见：[Adding/removing items from JSON data with JQuery](https://stackoverflow.com/questions/4538269/adding-removing-items-from-json-data-with-jquery)

来自 codeplex jslinq 的示例：

```
var myList = [
            {FirstName:"Chris",LastName:"Pearson"},
            {FirstName:"Kate",LastName:"Johnson"},
            {FirstName:"Josh",LastName:"Sutherland"},
            {FirstName:"John",LastName:"Ronald"},
            {FirstName:"Steve",LastName:"Pinkerton"}
            ];

var exampleArray = JSLINQ(myList)
                   .Where(function(item){ return item.FirstName == "Chris"; })
                   .OrderBy(function(item) { return item.FirstName; })
                   .Select(function(item){ return item.FirstName; }); 
```

# jquery - jQuery ajax - 只获取与用户相关的结果？

> ID：14547337
> 
> 赞同：2
> 
> 时间：2013-01-27T12:32:19.060
> 
> 标签：jquery, asp.net, ajax, webforms

*登录*用户（基于会话）有一个他最近交易的网格：

```
policyNum | someInfo
--------------------------
    1000        ...
    2000        ...
    3000        ...
    5000        ... 
```

当他点击一行时（*例如第一行（total=1000）*），他可以看到***详细信息***。（来自服务器的结果是 json）。

```
 items    | someInfo
    --------------------------
        100        ...
        300        ...            //100+300+600=1000
        600        ... 
```

我如何获取数据？

我将数据 () 收集`policyNum`到 js 对象中，并通过 jQuery ajax 将其发送到服务器。

**但是**，用户可以更改 ajax 请求并查找他不拥有的策略的详细信息。

我不想运行 sql 查询*然后*发现他不属于那些假号码政策。

我想早点停止。

我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:47:21.433

我想，你可以`policyNum`在服务器上加密。并从 JS 将加密的`policyNum`.
在服务器上，您可以轻松解密它，并获得实际的`policyNum`.

# java - 使用 JAXB 创建 xml 文件

> ID：14547344
> 
> 赞同：-4
> 
> 时间：2013-01-27T12:32:41.123
> 
> 标签：java, jaxb

请在下面标记如何使用 JAxb 创建 xml 文件。就像相同的序列输出我没有得到。在数据节点中我想要文本，一个图像再一个文本节点

```
<data>
    <text>
        hello
    </text>
    <image name="b99d.png">Imagefile name</image> 
    <text>
        world 
    </text>
</data> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:54:47.510

您需要将图像和文本数据存储在一个`List`. 完成此操作后，有几个选项。

* * *

**选项1**

你可以使用`@XmlElements`

```
public class Data {

    @XmlElements({
        @XmlElement(name="text", type=String.class),
        @XmlElement(name="image", type=Image.class)
    })
    public List<Object> getTextAndImages() {
        return textAndImages;
    }
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/10/jaxb-and-xsd-choice-xmlelements.html](http://blog.bdoughan.com/2010/10/jaxb-and-xsd-choice-xmlelements.html)

* * *

**选项 #2**

您还可以利用**单个**`@XmlAnyElement(lax=true)`属性上的注释来映射此用例。该属性的内容将是和的实例。 **`List``List``Text``Image`**

 **```
@XmlRootElement
@XmlSeeAlso({Image.class, Text.class})
public class Data {

    @XmlAnyElement(lax=true)
    public List<Object> getTextAndImages() {
        return textAndImages;
    }
} 
```

这些类中的每一个都需要用 注释`@XmlRootElement`。在创建和类的映射时，`@XmlValue`注释将很有用。`Text``Image`

```
@XmlRootElement
public class Text {

    @XmlValue
    public String getValue() {
        return value;
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/12/jaxbs-xmlanyelementlaxtrue-explained.html](http://blog.bdoughan.com/2012/12/jaxbs-xmlanyelementlaxtrue-explained.html)
*   [http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html](http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html)**

# git - 在 heroku 应用程序中包含第二个独立仓库？

> ID：14547346
> 
> 赞同：1
> 
> 时间：2013-01-27T12:33:00.120
> 
> 标签：git, node.js, heroku, github

我有两个存储库：Web 应用程序（nodejs，但可能是 Rails 等）和网站（静态内容 html/css/js）。

Heroku 托管 Web 应用程序，运行在例如 www.example.com。那里有很多动态内容，例如 example.com/ 等（类似于 twitter.com/）。

静态内容站点还必须位于特定 URL www.example.com/about /tour 等的基本 URL。

我怎样才能有一个单一的 URL 基础 www.example.com 但仍然有来自网站和 Web 应用程序的源？

我知道我可以让 Web 应用程序使用路由器选择哪些 URL 去哪里，但是我如何真正让 Web 应用程序获取静态内容？选项：

*   代理：将网站托管在其他地方（例如 github 页面）并且只是代理。非常低效，占用资源。
*   单一仓库：混乱，需要为每个静态页面更改重新部署。啊。
*   Web 应用程序作为 git 客户端：github 上的网站，例如，每 15 分钟检查一次使用 git 客户端更新 github 的情况。非常混乱，浪费大量资源，而且 heroku 上没有持久文件系统。可能会浪费 CPU、内存、带宽下载到 ./tmp 并在下一次请求时消失。
*   数据库：巨大的浪费。我所有的文件都是静态资产。

有什么好主意吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T03:34:56.573

您可以通过多种方式在 Rails 中管理半静态内容，请查看这个问题：[如何在 Rails 中处理静态内容？](https://stackoverflow.com/questions/1146624/how-to-do-static-content-in-rails)

这是关于 node.js 资源的问题：[静态内容和 NodeJS](https://stackoverflow.com/questions/10861961/static-content-nodejs)

# xslt - 如何将值与 XSLT 中的其他特定元素相加

> ID：14547348
> 
> 赞同：0
> 
> 时间：2013-01-27T12:33:14.153
> 
> 标签：xslt

我有一个这样的transcript.xml，想计算gpa

```
 <?xml version="1.0" encoding="UTF-8"?>
<transcript>
    <courses>
        <course>
            <code>IK2210</code>        
            <credits>3</credits>
            <grade>A</grade>
        </course>
        <course>
            <code>IB2210</code>
            <credits>3</credits>
            <grade>A</grade>
        </course>
        <course>
            <code>IB2210</code>
            <credits>1</credits>
            <grade>C</grade>
        </course>
        <course>
            <code>ID1234</code>
            <credits>2</credits>
            <grade>B</grade>
        </course>
    </courses>

</transcript> 
```

我像这样导入了成绩单

```
<xsl:variable name="transcript" select="document('transcript2.xml')/transcript"/> 
```

我试着这样做

```
<xsl:value-of select=" (4*(sum($transcript/courses/course/credits[$transcript/courses/course/grade='A'])) + 3*(sum($transcript/courses/course/credits[$transcript/courses/course/grade='B'])) + 2*(sum($transcript/courses/course/credits[$transcript/courses/course/grade='C'])) + 1*(sum($transcript/courses/course/credits[$transcript/courses/course/grade='D']))) div (sum($transcript/courses/course/credits))"/> 
```

但零件

```
(sum($transcript/courses/course/credits[$transcript/courses/course/grade='A'])) 
```

总结所有学分

怎么查条件？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:49:28.257

我相信如果不使用以下公式，您的公式会起作用：

```
(sum($transcript/courses/course/credits[$transcript/courses/course/grade='A'])) 
```

你用过：

```
(sum($transcript/courses/course[grade='A']/credits)) 
```

但也许这更简洁一点：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:key name="kGrade" match="credits" use="../grade"/>

  <xsl:template match="/">
    <root>
      <xsl:variable name="transcript" select="document('SOTranscript.xml')/transcript" />
      <xsl:apply-templates select="$transcript" mode="getTotal" />
    </root>
  </xsl:template>

  <xsl:template match="transcript" mode="getTotal">
    <xsl:value-of
            select="(4 * sum(key('kGrade', 'A')) + 
                  3 * sum(key('kGrade', 'B')) + 
                  2 * sum(key('kGrade', 'C')) + 
                  sum(key('kGrade', 'D'))
                 ) div sum(courses/course/credits)"/>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上使用时，结果是：

```
<root>3.5555555555555553</root> 
```

我相信这是预期值。

# android - 线程的Android生命周期从活动开始

> ID：14547352
> 
> 赞同：0
> 
> 时间：2013-01-27T12:33:47.830
> 
> 标签：android, multithreading, android-activity

当我从 Activity 启动常规的无限 Java 线程时，我看到该线程仍在运行，即使
当 Activity 销毁按下后退按钮或从 Activity 调用 Finish()时也是如此
。
当我强制销毁应用程序时线程停止。
我的问题是，如果 Android 在某些情况下破坏了这个线程，或者它会永远运行？
谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:38:09.107

如果出现以下情况，线程将终止：

1.  父进程被关闭，被杀死。*（Android 操作系统可以随时执行此操作，用户可以在设置中执行此操作）*
2.  被显式中断，并且不处理中断。*（在阻塞 IO 操作期间）*
3.  运行方法返回。*（良好的编码:)）*
4.  一些未处理的异常表面。*（ 可能的 ）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:39:27.240

如果 Android 需要内存以供其他进程运行，Android 将销毁，因为这将是后台进程并长时间运行。

# javascript - 等到ajax请求完成

> ID：14547357
> 
> 赞同：0
> 
> 时间：2013-01-27T12:34:06.490
> 
> 标签：javascript, ajax

这是一个javascript函数：

```
 function getValue(key) {
    var value;
    switch(_options.myType){
      case "cookie":
        value = readFromCookie(key);
        break;
      case "localStorage":
        value = readFromLocalStorage(key);
        break;
      case "db":
        //return value from the server
        // how do I wait for the result?
        $.ajax({
            type: "GET",
            url: "123",
            data: { .... },
            success: function(data){
               value = data; 
            }
        });
        break;
    }
    return value;
  }; 
```

在发送ajax请求的情况下，我需要等到ajax请求完成。我该怎么做？

并不是说我**不能**在没有计算值的情况下离开函数。这意味着我不能在`success:`处理程序中放置一个函数，该函数稍后会返回该值（或者我可能不明白什么？）。所以必须在函数内计算`getValue()`。

**更新**

**PS**那么如何重构我的代码以便能够在`success:`处理程序中使用回调呢？这是代码的第二部分：

```
MyClass123.prototype.myMethod = function(value) {
      //..............
      var var1 = this.getValue("key1");
      if (var1 == "123") { ... }
      else { .... }
      //..............
    }
  }; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T12:36:51.450

**请看下面的后续**

您*可以*使 ajax 请求同步，但这通常是个坏主意（而且 jQuery 将不再支持它）。

相反，请`getValue`接受回调：

```
function getValue(key, callback) {
   switch(_options.myType){
     case "cookie":
       setTimeout(function() {
           callback(readFromCookie(key));
       }, 0);
       break;
     case "localStorage":
       setTimeout(function() {
           callback(readFromLocalStorage(key));
       }, 0);
       break;
     case "db":
       //return value from the server
       // how do I wait for the result?
       $.ajax({
           type: "GET",
           url: "123",
           data: { .... },
           success: function(data){
              callback(data);
           }
       });
       break;
   }
} 
```

请注意，我使用`setTimeout`的是`readFromCookie`和`readFromLocalStorage`回调。为什么？因为如果`getValue` *可能*异步返回它的值，它应该*总是*这样做。使用超时`0`要求浏览器在控制权返回给浏览器后尽快执行此操作（尽管它通常限制在不少于 5-10 毫秒）。

* * *

在下面回复您的评论：

> 你读过我写的吗？我说因为某种原因我做不到。

我错过了那一点，但恕我直言，你**可以**。它可能需要对代码进行一些重构，但您*可以*这样做，而且应该这样做。这就是现代 Web 应用程序的工作方式。如果您的结构不支持它，则需要修复结构。您可以[`async: false`](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings)将请求用作**临时**解决方法，直到您可以正确执行为止。（嘿，我们都去过那里，不得不做这样的事情。）请注意，它计划在不久之后退役（只是 jQuery 对它的支持，您仍然可以直接使用 XHR 来执行同步请求）。

* * *

关于您更新的问题，这是您更新该代码的方式：

```
MyClass123.prototype.myMethod = function(value) {
  this.getState("key1", function(var1) {
    //                           ^--- Note the var becomes an arg
    if var1 == "123"{ ... }
    else { .... }
  });
}; 
```

请注意它实际上变化很小。用于*跟随*调用的逻辑`getState`改为进入您传递给它的回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T12:36:12.267

您可以通过指定`async: false`-使 AJAX 请求同步***，虽然不推荐，但可以这样做。***如果绝对是在`getValue()`AJAX 请求返回之前您的函数不应该返回的情况，那么`async`就是要走的路。

```
$.ajax({
    type: "GET",
    url: "123",
    async: false // NEW
    data: { .... },
    success: function(data){
        value = data; 
    }
}); 
```

* * *

替代使用`then`and `when`：

```
function getValue(key, callback) {
   switch(_options.myType){

     ...

     case "db":
       return $.ajax({ // note the 'return'
           type: "GET",
           url: "123",
           ...
       });
   }
} 
```

在你称之为的地方，称之为：

```
$.when(getValue()).then(function() {
   // do the rest here ...
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T12:36:27.867

正确的做法是重构您的程序流程，以便您*可以*将逻辑放置在`success`处理程序中。

您可以使用该`async`选项使 Ajax 请求同步，但这很愚蠢。它会减慢您的应用程序，因为浏览器窗口会冻结，直到请求成功返回（或超时）。它在 JavaScript 开发中并不经常使用，这是有充分理由的。

# android - ViewPager 中的 Android Master/Detail 流程

> ID：14547359
> 
> 赞同：5
> 
> 时间：2013-01-27T12:34:21.240
> 
> 标签：android, android-activity, android-viewpager, fragment, master-detail

我遇到了一个我无法解决的问题，我google了很多但找不到解决方案。

在我的应用程序中，我有一个包含 3 页的 ViewPager。这些页面应该是片段。这工作正常。但是，其中两个页面必须是主/详细信息流（一个用于朋友列表，一个用于新闻提要）。当我使用 Eclipse 创建主/详细信息流时，会创建 2 个片段和 2 个活动。ItemListActivity（需要显示的那个）实现了fragment的Callbacks，这是一个Activity，但ViewPager只接受Fragment本身。

所以问题是：如何将 Master/Detail Flow 放在 ViewPager 中？

非常感谢所有帮助！我在这里完全没有想法。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T13:48:22.397

Master/Detail Flow 只是在同一个内容视图中使用的 2 个片段的昵称，一个在左侧，一个在右侧。这是一般的想法。现在，Master/Detail Flow 可以在 Activity 中使用（就像 Eclipse 对您描述的模板所做的那样）或在 Fragment 中使用，幸运的是，因为 Android 4.2 在其他 Fragment 中引入了 Fragments（Android 兼容库也支持旧版本安卓）。

Eclipse 生成的模板包含在一个活动（在平板电脑上）或 2 个活动（用于手机）中，因为 Eclipse 不知道您需要片段内的主/详细信息。因此，您不能依赖 Eclipse 的模板。但是将 2 个 Fragment 放入另一个 Fragment 并不难。

您只需要暂时忘记 ViewPager，并在包含 Master/Detail Flow 的 Fragment 内完成您的工作，我们称之为 MasterFragment。

1.  再声明 2 个 Fragment：InnerListFragment、InnerDetailFragment。也是手机的 InnerDetailActivity。
2.  为 MasterFragment 声明 2 个 XML 布局文件：

    *   layout/fragment_master.xml - 仅在其中添加 InnerListFragment`<fragment>`标记
    *   layout-sw600dp/fragment_master.xml（用于平板电脑 >7"） - 添加 InnerListFragment 和 InnerDetailFragment`<fragment>`标签。
3.  现在，我不会在这里详细介绍您的所有 java 代码，但在 MasterFragment.java 中，您需要检查设备是否是平板电脑，以便您知道屏幕上的 2 个片段中的哪一个处于活动状态。

    *   如果是电话，则只有 InnerListFragment 可见。所以只需添加列表，onClickListener 将启动 InnerDetailActivity，您需要在其中放置 InnerDetailFragment。

    *   如果是平板电脑，则两个内部片段都是可见的。单击列表项时不要启动新活动，只需引用 MasterFragment 中的两个片段，以便您可以在它们之间进行通信。

这是一般的想法。如果您仍有疑问，请务必提问。

# android - 在 Android 2.2 上复制数据库时出错

> ID：14547363
> 
> 赞同：0
> 
> 时间：2013-01-27T12:34:44.900
> 
> 标签：android, sqlite, android-sqlite

我在资产文件夹中有一个数据库。它在 Android 4.0 上运行良好，但在 2.2 或 2.1 上它在复制数据库时抛出错误。这是来自日志：

```
Data exceeds UNCOMPRESS_DATA_MAX (1532928 vs 1048576) 
```

这是否意味着文件太大？

**OpenHelper 的代码：**

```
public static class DictionaryOpenHelper extends SQLiteOpenHelper 
{
    private final Context mHelperContext;
    private SQLiteDatabase mDatabase;

    private static String DB_PATH="/data/data/com.example.enigmar/databases/";
    private static final String DB_NAME = "gesla.db";

    DictionaryOpenHelper(Context context) 
    {
        super(context, DB_NAME, null, 1);
        this.mHelperContext = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db)
    {

    }

    public void createDataBase() throws IOException
    {

        boolean mDataBaseExist = checkDataBase();

        if(!mDataBaseExist)
        {
            this.getReadableDatabase();
            this.close();
            try 
            {
                copyDataBase();
                Log.e(TAG, "createDatabase database created");
            } 
            catch (IOException mIOException) 
            {
                throw new Error("ErrorCopyingDataBase");
            }
        }

    }

    private boolean checkDataBase()
    {

        File dbFile = new File(DB_PATH + DB_NAME);
        return dbFile.exists();

    }

    private void copyDataBase() throws IOException
    {

        InputStream mInput = mHelperContext.getAssets().open(DB_NAME);

        String outFileName = DB_PATH + DB_NAME;

        OutputStream mOutput = new FileOutputStream(outFileName);

        byte[] mBuffer = new byte[1024];
        int mLength;
         while ((mLength = mInput.read(mBuffer))>0)
         {
             mOutput.write(mBuffer, 0, mLength);
         }
         mOutput.flush();
         mOutput.close();
         mInput.close();

        }

    public boolean openDataBase() throws SQLException
    {

        String mPath = DB_PATH + DB_NAME;
        mDatabase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
        return mDatabase != null;
    }

    @Override
    public synchronized void close() {

    if(mDatabase != null)
        mDatabase.close();

    super.close();

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:45:43.663

您不能在资产文件夹中存储大文件（超过 1M）。将文件拆分为较小的部分或将其移动到原始文件夹。[这里解释如何分割文件。](https://stackoverflow.com/questions/2860157/load-files-bigger-than-1m-from-assets-folder)

# r - 生成给定百分位等级的分布

> ID：14547364
> 
> 赞同：0
> 
> 时间：2013-01-27T12:34:50.543
> 
> 标签：r, statistics

[**给定以下score 和 percentile ranks**](http://en.wikipedia.org/wiki/Percentile_rank)，我想在 R 中生成一个分布。

```
x <- 1:10
PercRank <- c(1, 7, 12, 23, 41, 62, 73, 80, 92, 99) 
```

`PercRank = 1`例如告诉 1% 的数据有一个`value/score <= 1`（x 的第一个值）。同样，`PercRank = 7`告诉 7% 的数据有一个`value/score <= 2`etc..

我不知道如何找到底层分布。`pdf`如果我能从这么多信息中获得一些关于如何获取基础分布的指导，我会很高兴。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T15:28:29.433

来自[维基百科](http://en.wikipedia.org/wiki/Percentile_rank)：

> 分数的百分等级是其频率分布中与它相同或低于它的分数的百分比。

为了说明这一点，让我们创建一个分布，比如 a `normal distribution`，带有`mean=2`and `sd=2`，以便我们稍后可以测试（我们的代码）。

```
# 1000 samples from normal(2,2)
x1 <- rnorm(1000, mean=2, sd=2) 
```

现在，让我们采用`percentile rank`您在帖子中提到的相同内容。让我们将它除以 100，以便它们代表累积概率。

```
cum.p <- c(1, 7, 12, 23, 41, 62, 73, 80, 92, 99)/100 
```

`scores`这些百分位数对应的值（ ）是多少？

```
# generating values similar to your x.
x <- c(t(quantile(x1, cum.p)))
> x
 [1] -2.1870396 -1.4707273 -1.1535935 -0.8265444 -0.2888791  
         0.2781699  0.5893503  0.8396868  1.4222489  2.1519328 
```

这意味着 1% 的数据小于 -2.18。7% 的数据小于 -1.47 等等……现在，我们有了`x`and `cum.p`（相当于你的`PercRank`）。让我们忘记`x1`这应该是一个正态分布的事实。为了找出它可能是什么分布，让我们从累积概率中获取实际概率，方法是使用`diff`第 n 个和第 (n-1) 个元素之间的差异。

```
prob <- c( cum.p[1], diff(cum.p), .01)
> prob
# [1] 0.01 0.06 0.05 0.11 0.18 0.21 0.11 0.07 0.12 0.07 0.01 
```

现在，我们所要做的就是为每个 x 间隔生成大小为 100（可以是任意数字）的`(x[1]:x[2], x[2]:x[3] ...)`样本，然后最终从这个庞大的数据中采样您需要的任意数量的点（例如，10000 )，上面提到的概率。

这可以通过以下方式完成：

```
freq <- 10000 # final output size that we want

# Extreme values beyond x (to sample)
init <- -(abs(min(x)) + 5) 
fin  <- abs(max(x)) + 5

ival <- c(init, x, fin) # generate the sequence to take pairs from
len <- 100 # sequence of each pair

s <- sapply(2:length(ival), function(i) {
    seq(ival[i-1], ival[i], length.out=len)
})
# sample from s, total of 10000 values with probabilities calculated above
out <- sample(s, freq, prob=rep(prob, each=len), replace = T) 
```

现在，我们有来自分布的 10000 个样本。让我们看看它是怎样的。它应该类似于均值 = 2 和 sd = 2 的正态分布。

```
> hist(out) 
```

![normal_dist](../Images/b3fd47b820f61f509b76d4a150f9f51a.png)

```
> c(mean(out), sd(out))
# [1] 1.954834 2.170683 
```

它是一个正态分布（来自直方图），其中`mean = 1.95`和`sd = 2.17 (~ 2)`。

注意：我所解释的某些事情可能是迂回的和/或代码“可能/可能不”适用于其他一些发行版。这篇文章的目的只是用一个简单的例子来解释这个概念。

**编辑：**为了澄清`@Dwin's`一点，我尝试了与`x = 1:10`OP 的问题对应的相同代码，通过替换 x 的值使用相同的代码。

```
cum.p <- c(1, 7, 12, 23, 41, 62, 73, 80, 92, 99)/100
prob <- c( cum.p[1], diff(cum.p), .01)
x <- 1:10

freq <- 10000 # final output size that we want

# Extreme values beyond x (to sample)
init <- -(abs(min(x)) + 1) 
fin  <- abs(max(x)) + 1

ival <- c(init, x, fin) # generate the sequence to take pairs from
len <- 100 # sequence of each pair

s <- sapply(2:length(ival), function(i) {
    seq(ival[i-1], ival[i], length.out=len)
})
# sample from s, total of 10000 values with probabilities calculated above
out <- sample(s, freq, prob=rep(prob, each=len), replace = T)

> quantile(out, cum.p) # ~ => x = 1:10
# 1%     7%    12%    23%    41%    62%    73%    80%    92%    99% 
# 0.878  1.989  2.989  4.020  5.010  6.030  7.030  8.020  9.050 10.010 

> hist(out) 
```

![hist_OPs_data](../Images/bd120404c5a8ff4d380d6ba19dd7ef06.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T14:51:45.580

我认为您想要该`ecdf`功能，该`quantile`功能在`?quantile`帮助页面上被提及为该功能的倒数..

```
# construct your vector containing the data
PercRank <- c(1, 7, 12, 23, 41, 62, 73, 80, 92, 99)

# construct an empirical cumulative distribution function
# which is really just the `inverse` of `quantile
Fn <- ( ecdf( PercRank ) )
# note that the `ecdf` function returns a function itself.

# calculate what percent of `PercRank` is below these integers..
Fn( 0 )
Fn( 1 )
Fn( 2 )
Fn( 3 )
Fn( 6 )
Fn( 7 )
Fn( 8 )

# re-construct your `x` vector using PercRank
Fn( PercRank ) * 10 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T16:36:25.977

这将生成一个数据集，该数据集将具有您指定的特征。如果您想要更多“随机性”，您可以在百分位数范围内减去一些随机数以`rep`在匿名函数内产生：

```
 > mapply( function(x,y) rep(x, each=y), (x),  diff(c(PercRank, 100) ) )
[[1]]
[1] 1 1 1 1 1 1

[[2]]
[1] 2 2 2 2 2

[[3]]
 [1] 3 3 3 3 3 3 3 3 3 3 3

[[4]]
 [1] 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4

[[5]]
 [1] 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5 5

[[6]]
 [1] 6 6 6 6 6 6 6 6 6 6 6

[[7]]
[1] 7 7 7 7 7 7 7

[[8]]
 [1] 8 8 8 8 8 8 8 8 8 8 8 8

[[9]]
[1] 9 9 9 9 9 9 9

[[10]]
[1] 10 
```

# javascript - JavaScript 数组可以为空吗？

> ID：14547366
> 
> 赞同：2
> 
> 时间：2013-01-27T12:34:56.390
> 
> 标签：javascript

我正在收集使其与旧浏览器兼容的 JavaScript 类原型，没关系，但我在收集它们时想知道的是，Mozila 的开发人员将数组与 null 进行比较我可以看到那不是因为但也许我错了这是一个解释？？？

```
 if (!Array.prototype.every) {
    Array.prototype.every = function(fun /*, thisp */) {
        "use strict";

        if (this == null)
            throw new TypeError();

        var t = Object(this);
        var len = t.length >>> 0;
        if (typeof fun != "function")
            throw new TypeError();

        var thisp = arguments[1];
        for (var i = 0; i < len; i++) {
            if (i in t && !fun.call(thisp, t[i], i, t))
                return false;
        }

        return true;
    };
} 
```

在这条线上

```
 if (this == null) 
```

这是指数组

[Mozilla](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every)的这段代码

请我解释一下，即使我知道“this”指的是必须数组类型而不是变量，也可以将数组与空值进行比较的逻辑可以是数组或空值？你认为呢 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T12:41:07.843

当有人在没有上下文的情况下调用它时可能会发生这种情况，例如，`Array.prototype.every(...)`而不是`someArray.every(...)`. 或更可能的情况：`someArray.every`作为回调传递给其他函数，然后在没有适当上下文的情况下调用它。

由于该函数在未提供上下文时以[严格模式运行。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode) `this === undefined`和`undefined == null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T12:39:08.033

它对以下情况很有用：

```
Array.prototype.every.call(null, ...); 
```

您不太可能遇到该版本的代码，但`null`可以是一个尚未初始化的变量来代替。在那种情况下`TypeError`是唯一合乎逻辑的。

# java - 在 ubuntu 12.10 上运行 android sdk 工具时遇到问题

> ID：14547367
> 
> 赞同：0
> 
> 时间：2013-01-27T12:35:12.723
> 
> 标签：java, android, shell, ubuntu, ubuntu-12.04

当我尝试从命令行运行 Android SDK 管理器时，它不会打开。不断给我命令未找到或权限被拒绝这样的消息。

```
osama@prometheus:/media/osama/develop/android-sdk-linux/tools$ pwd
/media/osama/develop/android-sdk-linux/tools
osama@prometheus:/media/osama/develop/android-sdk-linux/tools$ /media/osama/develop/android-sdk-linux/tools/android
bash: /media/osama/develop/android-sdk-linux/tools/android: Permission denied
osama@prometheus:/media/osama/develop/android-sdk-linux/tools$ sudo /media/osama/develop/android-sdk-linux/tools/android
sudo: /media/osama/develop/android-sdk-linux/tools/android: command not found
osama@prometheus:/media/osama/develop/android-sdk-linux/tools$ 
```

我错过了什么吗？难道我做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-27T13:55:12.053

cd 到 android-sdks/tools，然后尝试：

```
sudo ./android 
```

# android - 使用 android maps api v2，如何跟踪用户位置（类似于 google maps api track 的方式）。用户位置标记始终保持在中心

> ID：14547368
> 
> 赞同：1
> 
> 时间：2013-01-27T12:35:35.773
> 
> 标签：android, android-maps-v2

使用 google android api v2，我们如何像 google maps 应用程序一样跟踪/跟踪用户位置。用户位置标记停留在中心。目前我正在使用

mMap.setMyLocationEnabled(isEnabled);

和

mUiSettings.setMyLocationButtonEnabled(isEnabled);

通过使用这两个，我可以显示用户位置和将用户置于地图中心的按钮。但是如果用户正在移动，则位置箭头会离开屏幕。

我可以通过收听 LocationListener 并将地图动画到新位置来解决这个问题。还有其他方法吗？？？？

如果使用 iPhone maps api，这项任务非常简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:29:01.053

谷歌终于添加了`OnMyLocationChangeListener`，当检测到位置变化时调用。所以现在相机的自动居中是一项微不足道的任务。

# c++ - 关于静态数据成员的类内初始化的困惑

> ID：14547370
> 
> 赞同：9
> 
> 时间：2013-01-27T12:36:00.897
> 
> 标签：c++

我正在阅读 lippman 的 c++ 入门书，位于 p。303 他们给了这个：

```
class Account {
private:
  static constexpr int period = 30;
  double daily_tbl[period];
} 
```

> 如果成员仅在编译器可以替换成员值的上下文中使用，则不需要单独定义初始化的 const 或 constexpr static。但是，如果我们在值不能被替换的上下文中使用该成员，则该成员必须有一个定义。

还：

> 例如，如果我们将 Account::period 传递给接受 const int& 的函数，则必须定义 period。

所以我尝试添加这样一个功能：

```
class Account {
private:
  static constexpr int period = 30;
  double daily_tbl[period];

  void foo(const int &i) { ; }
  void bar() { foo(period); } //no error?
}; 
```

在那里我添加了一个接受 const int& 的函数。我也没有为周期变量添加任何定义。但我仍然没有得到任何错误，正如他们所说的那样。为什么不？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T12:49:30.833

违反此规则不需要诊断。所以行为实际上是未定义的。

我认为不需要诊断的原因是因为诊断将由链接器给出。并且当编译器优化访问时（就像在这种情况下可能发生的那样），链接器不再注意到任何错误。仍然注意到这个错误需要在链接器中进行整个程序分析，以便它可以访问原始未优化的源代码表示。这会增加编译时间并需要高级链接器和编译器。

# spring - Spring Security - 基本 HTTP 身份验证 - 更改服务器消息

> ID：14547372
> 
> 赞同：3
> 
> 时间：2013-01-27T12:36:11.360
> 
> 标签：spring, spring-security, http-authentication

如果您使用基本 HTTP 身份验证对自己进行身份验证，您将看到如下弹出窗口：![在此处输入图像描述](../Images/a463580b34a6cf58bc8c3a3a404006dd.png)

我想改变：服务器说：换成`Spring Security Application`别的东西。但我不知道在哪里改变这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T14:49:59.137

指定一个领域。

例如。

```
<http realm="My Owesome Web App"> 
```

# php - Postgresql INSERT 查询的 PHP 语法错误

> ID：14547378
> 
> 赞同：1
> 
> 时间：2013-01-27T12:36:46.810
> 
> 标签：php, sql, postgresql

我已经使用代码几个小时了，只是看不到哪里出错了。这是有问题的代码

```
$answercreatequery = pg_query("INSERT INTO answer (answerid, questionid, adescription, afilelocation, iscorrect) VALUES( default, '".$thisquestionid."', '".$adescription1."', '".$afilelocation."', '".$iscorrect1."' "); 
```

这是报告的错误

> 警告：pg_query() [function.pg-query]：查询失败：错误：输入第 1 行末尾的语法错误：...on，是正确的）值（默认值，'37'，'kyfhdkj'，'none'， '' ^ 在 /ceri/homes1/m/mtp4/public_html/mmp/Quizmaker/Clientside/questioncreatescript.php 第 167 行

我想知道我是否缺少一些简单的东西？我怀疑这是因为 $iscorrect1 是布尔类型，我尝试以多种方式对其进行编辑，但仍然出现同样的错误。

/d 答案表

```
Column     |          Type          |                         Modifiers                         
---------------+------------------------+-----------------------------------------------------------

 answerid      | integer                | not null default nextval('answer_answerid_seq'::regclass)
 questionid    | integer                | not null
 adescription  | character varying(200) | not null
 afilelocation | character varying(200) | not null
 iscorrect     | boolean                | not null
Indexes:
    "answer_pkey" PRIMARY KEY, btree (answerid)
Foreign-key constraints:
    "answer_questionid_fkey" FOREIGN KEY (questionid) REFERENCES question(questionid) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T12:48:25.160

`)`您在查询结束时忘记了 a ：

```
$answercreatequery = pg_query("INSERT INTO answer (answerid, questionid, adescription, afilelocation, iscorrect) VALUES( default, '".$thisquestionid."', '".$adescription1."', '".$afilelocation."', '".$iscorrect1."' ");
........................................................................................................................................................................................................insert ) here ^ 
```

除此之外，您可以简单地省略要使用默认值的列：

```
$answercreatequery = pg_query("INSERT INTO answer
  (questionid, adescription, afilelocation, iscorrect) VALUES
  ('".$thisquestionid."', '".$adescription1."', '".$afilelocation."', '".$iscorrect1."')"); 
```

此外，您应该*真正*使用[`pg_query_params`](http://php.net/manual/en/function.pg-query-params.php)（而不是转义或使用 sql 注入孔）：

```
$answercreatequery = pg_query_params('INSERT INTO answer
  (questionid, adescription, afilelocation, iscorrect) VALUES ($1, $2, $3, $4)',
  array($thisquestionid, $adescription1, $afilelocation, $iscorrect1)); 
```

这样做还可以使您的代码更具可读性。

# django-class-based-views - Django：如何在views.py中调用基于类的通用视图？

> ID：14547384
> 
> 赞同：4
> 
> 时间：2013-01-27T12:37:44.833
> 
> 标签：django-class-based-views, django-generic-views, django-1.4

我想在views.py 中调用基于类的通用视图

请看我的代码...

网址.py

```
from django.conf.urls import patterns, include, url
from crm.views import *

urlpatterns = patterns('',
    (r'^workDailyRecord/$', workDailyRecord),
) 
```

和我的意见.py....请注意...

视图.py

```
from django.views.generic import TodayArchiveView
from crm.models import *

def workDailyRecord(request):
    if request.method == 'GET':
        tView.as_view() # I want call class-based generic views at this line.
    elif:
        """
        Probably this part will be code that save the data.
        """
        pass

class tView(TodayArchiveView):
    model = WorkDailyRecord
    context_object_name = 'workDailyRecord'
    date_field = 'date'
    template_name = "workDailyRecord.html" 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T13:54:04.100

[试试这个](https://docs.djangoproject.com/en/dev/ref/class-based-views/base/#django.views.generic.base.View.as_view)：

```
def workDailyRecord(request):
    if request.method === 'GET':
        return tView.as_view()(request) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-28T21:37:37.850

```
 def common_act(request, way, pk):
     types = {'grp':[10,'Group'],'std':[20,'Student']}
     events = {'crt':[1,'Create'], 'edt':[2,'Edit'], 'dlt':[3,'Delete']}
     ress = way.split('_')
     act_code = str(types[ress[1]][0] + events[ress[0]][0])

     action_way = {
            '11': CrtGroup,
           '12': EdtGroup,
           '13': DltGroup,
           '21': CrtStudent,
           '22': EdtStudent,
           '23': DltStudent
           }
return action_way[act_code].as_view()(request,pk=pk) 
```

它的工作）））

# ruby-on-rails-3 - Rails 3.2 + 表格标签 + 背景属性 + url_for

> ID：14547386
> 
> 赞同：0
> 
> 时间：2013-01-27T12:37:59.753
> 
> 标签：ruby-on-rails-3

在 /config/environment/development.rb 中：

```
config.action_mailer.asset_host = "http://192.155.90.155:3000" 
```

在我的邮件正文中，我想看到：

```
<table background="http://192.155.90.155:3000/assets/fb.png"> 
```

`<table background="<%= url_for('assets/bg.jpg', :only_path => false) %>">`给我错误。

并`<table background="<%= url_for('assets/bg.jpg') %>">`给了我意想不到的结果：

```
<table background="assets/fb.png"> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:45:19.963

我找到了解决方案：

利用`<table background="<%= asset_path 'bg.jpg' %>">`

代替`<table background="<%= url_for('assets/bg.jpg') %>">`

# python - Python中的Networkx - 将节点属性绘制为节点外的标签

> ID：14547388
> 
> 赞同：18
> 
> 时间：2013-01-27T12:38:19.520
> 
> 标签：python, networkx

我有一个具有特定属性的节点图，我想用 Python 中的 networkx 绘制该图，其中有几个属性作为节点外节点的标签。

有人可以帮助我如何编写代码来实现这一目标吗？

我的代码中有一个循环生成“interface_？” 来自防火墙列表 (fwList) 的每个输入的属性

```
for y in fwList:
    g.add_node(n, type='Firewall')
    print 'Firewall ' + str(n) + ' :' 
    for x in fwList[n]:
        g.node[n]['interface_'+str(i)] = x
        print 'Interface '+str(i)+' = '+g.node[n]['interface_'+str(i)]
        i+=1
    i=1
    n+=1 
```

然后，稍后我绘制节点和边缘，例如：

```
pos=nx.spring_layout(g)
nx.draw_networkx_edges(g, pos)
nx.draw_networkx_nodes(g,pos,nodelist=[1,2,3],node_shape='d',node_color='red') 
```

并将其扩展到一些具有其他形状和颜色的新节点。

为了标记单个属性，我尝试了下面的代码，但它没有用

```
labels=dict((n,d['interface_1']) for n,d in g.nodes(data=True)) 
```

对于将文本从节点中取出，我不知道......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T05:35:39.657

您可以访问“pos”字典中的节点位置。因此，您可以使用 matplotlib 将文本放在您喜欢的任何位置。例如

```
In [1]: import networkx as nx

In [2]: G=nx.path_graph(3)

In [3]: pos=nx.spring_layout(G)

In [4]: nx.draw(G,pos)

In [5]: x,y=pos[1]

In [6]: import matplotlib.pyplot as plt

In [7]: plt.text(x,y+0.1,s='some text', bbox=dict(facecolor='red', alpha=0.5),horizontalalignment='center')
Out[7]: <matplotlib.text.Text at 0x4f1e490> 
```

![在此处输入图像描述](../Images/1d7bc1691f33275cd05804309137077c.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-09-19T11:52:57.397

除了 Aric 的回答之外，`pos`字典还包含值中`x, y`的坐标。所以你可以操纵它，一个例子可能是：

```
pos_higher = {}
y_off = 1  # offset on the y axis

for k, v in pos.items():
    pos_higher[k] = (v[0], v[1]+y_off) 
```

然后用新位置绘制标签：

```
nx.draw_networkx_labels(G, pos_higher, labels) 
```

`G`您的图形对象和`labels`字符串列表在哪里。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-05-13T17:31:31.537

我喜欢创建一个`nudge`将布局移动偏移量的函数。

```
import networkx as nx
import matplotlib.pyplot as plt

def nudge(pos, x_shift, y_shift):
    return {n:(x + x_shift, y + y_shift) for n,(x,y) in pos.items()}

G = nx.Graph()
G.add_edge('a','b')
G.add_edge('b','c')
G.add_edge('a','c')

pos = nx.spring_layout(G)
pos_nodes = nudge(pos, 0, 0.1)                              # shift the layout

fig, ax = plt.subplots(1,2,figsize=(12,6))
nx.draw_networkx(G, pos=pos, ax=ax[0])                      # default labeling
nx.draw_networkx(G, pos=pos, with_labels=False, ax=ax[1])   # default nodes and edges
nx.draw_networkx_labels(G, pos=pos_nodes, ax=ax[1])         # nudged labels
ax[1].set_ylim(tuple(i*1.1 for i in ax[1].get_ylim()))      # expand plot to fit labels
plt.show() 
```

[![三角形中三个节点并排的两个图形表示。 左侧的标签根据 networkx 默认设置直接放置在节点上，右侧的标签略微上移](../Images/399bb67b78922d648d7129f42606b012.png)](https://i.stack.imgur.com/jVUgq.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-19T15:37:59.793

NetworkX 的文档`draw_networkx_labels`还显示，您可以使用`horizontalalignment`和`verticalalignment`参数来获得一个简单的、开箱即用的解决方案，而无需手动轻推标签。

从[文档](https://networkx.org/documentation/stable//reference/generated/networkx.drawing.nx_pylab.draw_networkx_labels.html)：

> *   Horizo​​ntalalignment ({'center', 'right', 'left'}) – 水平对齐（默认='center'）
>     
>     
> *   verticalalignment ({'center', 'top', 'bottom', 'baseline', 'center_baseline'}) – 垂直对齐（默认='center'）

更方便的是，您可以将其与更高级别的 NetworkX 函数一起使用，例如`nx.draw()`或其中一个`nx.draw_spectral`（或其变体），因为这些高级函数参数接受关键字参数，而关键字参数又传递给其低级函数。

所以下面的代码是一个最小可行的代码，它可以满足你的要求，即将标签推到节点之外：

```
G = nx.DiGraph(name='Email Social Network')
nx.draw(G, arrowsize=3, verticalalignment='bottom')
# or:
nx.draw(G, arrowsize=3, verticalalignment='top')
plt.show() 
```

结果`verticalalignment`如下图所示： [![在此处输入图像描述](../Images/58d82920f2fe60f8b7d6e0533883f44d.png)](https://i.stack.imgur.com/1bikF.png)

# ruby-on-rails - 延迟作业和操作邮件程序

> ID：14547389
> 
> 赞同：4
> 
> 时间：2013-01-27T12:38:27.770
> 
> 标签：ruby-on-rails, actionmailer, delayed-job

我在使用 ActionMailer 实施延迟作业时遇到问题：延迟作业实施之前：

```
class NotificationsMailer < ActionMailer::Base

  default :from => "noreply@mycompany.com"
  default :to => "info@mycompany.com"

  def new_message(message)
    @message = message
    mail(:subject => "[Company Notification] #{message.subject}")
  end

end 
```

并使用这条线调用它（它工作得很好）：

```
NotificationsMailer.new_message(@message).deliver 
```

* * *

在延迟作业实施之后，我所做的只是将交付线更改为：

```
NotificationsMailer.delay.new_message(@message) 
```

另外，我使用

```
rake jobs:work 
```

如果作业已关闭，我可以看到数据库中的对象，并且我可以看到它们在我启动工作人员后被弹出，但没有任何反应（没有发送电子邮件）。

更新 - 其他延迟任务（与邮件无关）工作正常。

任何人都可以帮助新手吗？

提前致谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-18T12:15:07.983

我花了很多时间使用延迟的工作发送电子邮件，最后它起作用了。

在宝石文件中

```
gem 'delayed_job'
gem 'delayed_job_active_record' 
```

在控制器中

```
 def dtest

    UserMailer.delay.welcome_email
    render json:"Succes"
    return
 end 
```

在邮件中

```
class UserMailer < ActionMailer::Base
  default from: "from@example.com"

  def welcome_email
    ActionMailer::Base.delivery_method = :smtp 
        ActionMailer::Base.smtp_settings = {
                address: "smtp.gmail.com", 
                port: 587, 
                domain: 'gmail.com',
                Authentication: "plain", 
                enable_starttls_auto: true, 
                user_name: 'your@gmail.com',
                password: 'yourpassword'
            }

    mail(to: 'no-reply@gmail.com', subject: 'Background Email Test').deliver

  end

end 
```

在此之后，我只是启动 Rails 服务器并开始工作

```
rake jobs:work 
```

我希望，它会对你们有所帮助，并且使用“延迟作业”发送电子邮件可以正常工作:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T21:45:56.857

我首先要看的是你环境中的 smtp 设置，检查以确保它是正确的：

```
config.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
:address => "smtp.gmail.com",
:port => 587,
:domain => "gmail.com",
:authentication => 'plain',
:enable_starttls_auto => true,
:user_name => "youremail@gmail.com",
:password => "yourpassword"
}
config.action_mailer.default_charset = "utf-8"
config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = true 
```

我使用旧的 ruby​​，1.8.7 和 rails 2.3.8，所以请检查以确保语法也正确。

# winapi - 调整应用程序的亮度和对比度

> ID：14547390
> 
> 赞同：1
> 
> 时间：2013-01-27T12:38:39.283
> 
> 标签：winapi, brightness, contrast

dvju 查看器[WinDjiew](http://sourceforge.net/projects/windjview/)具有调节亮度和对比度的能力，使阅读文档更加舒适。见下图。

对我来说，看起来只是改变背景颜色来达到这个效果，虽然我不知道调整“亮度”和“对比度”的功能实际上应该如何完成。

你知道如何实现这样的功能吗？

![在此处输入图像描述](../Images/e144b52bb0119f06a241741dc4821be2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T21:36:56.390

这些是常规的应用程序私有设置，它们会影响应用程序用于绘制其 UI 的颜色。从你的问题的标题我想你可能已经认为有某些*标准*API 来控制整个应用程序的亮度，但是它是这个应用程序特有的完全私有实现：滑块只是更新内部变量并强制重绘应用程序窗口，窗口使用更新的颜色来绘制自身。

# android - 如果用户打开应用程序，则检测 onTouchEvent

> ID：14547392
> 
> 赞同：1
> 
> 时间：2013-01-27T12:39:03.517
> 
> 标签：android, overriding, touch-event, motionevent

有没有办法了解用户是在主屏幕上单击应用程序的图标还是只是单击桌面？

在开发动态壁纸期间，我重写了该`onTouchEvent`功能

```
@Override
    public void onTouchEvent(MotionEvent event) {
        int action = event.getAction();
        float currentXPosition = event.getX();
        float currentYPosition = event.getY();
        Log.d(Constants.TAG_DISPLAY, "Action = " + action);
        Log.d(Constants.TAG_DISPLAY, "X = " + currentXPosition + "Y = " + currentYPosition);

        if (action == MotionEvent.ACTION_UP) {
            Log.d(Constants.TAG_DISPLAY, "FIRE Action, drawframe");
            pos[0] = Math.round(currentXPosition) + 150;
            pos[1] = Math.round(currentYPosition) - 50;
            drawFrame(true, true);
        }
        super.onTouchEvent(event);
    } 
```

为了刷新壁纸。但是如果用户正在打开应用程序，我不想刷新它。从事件或超级动作，可以确定用户动作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:47:16.800

我找到了一种解决方法来了解用户是否打开应用程序。只是打开进程，而不是将后台应用程序置于前台。

```
public int getTotalRunningApp(){
    ActivityManager actvityManager = (ActivityManager) this.getSystemService( ACTIVITY_SERVICE );
    List<RunningAppProcessInfo> procInfos = actvityManager.getRunningAppProcesses();
    return procInfos.size();
}

@Override
public void onTouchEvent(MotionEvent event) {           
    int runApp = getTotalRunningApp();
    Log.wtf(Constants.TAG_APP, "RunningApp = " + runApp);           
    ...
    super.onTouchEvent(event);
    runApp = getTotalRunningApp();
    Log.wtf(Constants.TAG_APP, "RunningApp = " + runApp);
    ...
} 
```

`getTotalRunningApp()`通过在 real 前后调用，`super.onTouchEvent`我们可以监控正在运行的应用程序的数量，并了解用户是否正在点击应用程序或只是移动主屏幕或什么都不做。它不适用于后台应用程序。

# php - 在 mysql 中使用结果查询

> ID：14547398
> 
> 赞同：1
> 
> 时间：2013-01-27T12:39:18.950
> 
> 标签：php, mysql

在 Mysql 中，我的查询得到了这种结果

```
+-id-+-name--+is_active-+---date---+
|  1 | name1 |     1    | 21231321 |
|  3 | name3 |     1    | 11313213 |
|  4 | name9 |     1    | 10313213 |
|  8 | name3 |     1    | 10013213 |
| 54 | name2 |     0    |    0     |
| 9  | name5 |     0    |    0     |
| 11 | name8 |     0    |    0     | 
```

我想从此结果查询中进行多项选择，而无需再次选择此查询。

从上面的结果查询中，我想将这三个条件合二为一

```
1.Give me first two rows (result query above is sorted by date)
2.Give me one random row where is_active = 1 and not in results in 1.
3.Give me one random row where  is_active = 0 
```

我读过`database views`and `stored procedures`，但我不知道这是否是最好的方法？

有人可以为此提供我的 MySQL 代码吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:01:41.463

对于评论中所述的 50-100 行的小型结果集，PHP 的数组处理工具可以很容易地处理您的要求。假设您的行集在查询输出中排序

```
ORDER BY 
 date DESC,
 is_active DESC 
```

...您可以使用您使用的任何 API 将所有行提取到 PHP 中的一个数组中：

```
// To store output:
$results = array();

// Using the appropriate fetch call (assuming an associative array here)
while ($row = $result_resource->fetch()) {
  // append row onto results
  $results[] = $row;
}

// Remove the first 2 - your first requirement:
$first_two = array_splice($results, 0, 2);

$active = array();
$inactive = array();
// Then split the remaining into is_active or not is_active with a loop
foreach ($results as $r) {
  if ($r['is_active'] == 1) {
    $active[] = $r;
  }
  else $inactive[] = $r;
}

// Then you can just call `array_rand()` to get results from those
$rand_active = array_rand($active);
$rand_inactive = array_rand($inactive); 
```

我将再次声明，这一切都取决于行集是否很小。数组和循环的开销可能会小于多次查询调用。但是，如果行集很大，我会使用 3 个单独的查询。

首先：

```
ORDER BY 
  date DESC
  is_active DESC
LIMIT 2 
```

从该查询中获取行并获取 ID。再次执行：

```
WHERE
  is_active = 1 
  /* the 2 ids from the first query */
  AND id NOT IN (id1, id2)
ORDER BY RAND()
LIMIT 1 
```

第三个查询：

```
WHERE is_active = 0
ORDER BY RAND() 
LIMIT 1 
```

所有这三个*都*可以打包到一个`UNION ALL`查询中，但我会认为只有在性能真的很差的情况下。

# wpf - EasingFunction 在 Windows 8 魅力设置中使用的是什么？

> ID：14547404
> 
> 赞同：1
> 
> 时间：2013-01-27T12:39:41.187
> 
> 标签：wpf, visual-studio, windows-8, easing-functions

我使用 WPF 4.0 (C#) 制作了一个应用程序

我想知道在 Windows 8 魅力设置中使用的 EasingFunction 出现了。

![Windows 8 设置魅力](../Images/15eeb16d7bbbee7218ead52cfc060066.png)

我使用 CubicEase、QuarticEase、PowerEase、ExponentialEase.. 但我无法制作像 Windows 8 这样的动画。

如何使用基于默认的 EasingFunction 制作类似于 Windows 8 的动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T17:24:16.217

他们将 ExponentialEase 与“EaseOut”模式一起使用。

这是代码：

```
<Storyboard>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="X" Storyboard.TargetName="Trans">
                <EasingDoubleKeyFrame KeyTime="0:0:.7" Value="264">
                    <EasingDoubleKeyFrame.EasingFunction >
                        <ExponentialEase EasingMode="EaseOut" Exponent="6"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T18:14:04.933

内置的 Windows 8 缓动功能列表在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj819806.aspx#easing_functions)。它链接[了这个页面](http://samples.msdn.microsoft.com/Silverlight/silverlight_next/Animations/easing_functions_gallery/testpage.html)，让您可以尝试各种缓动功能。如果它是一个内置的缓动函数，那么你应该可以在那里找到它。

# javascript - 为什么这个 window.open 可以在 Chrome 和 FF 上工作，但不能在 IE 上工作？

> ID：14547407
> 
> 赞同：0
> 
> 时间：2013-01-27T12:40:09.623
> 
> 标签：javascript, html, internet-explorer-9

下面的 javascript/html 在用户屏幕的右下角创建了一个小弹出窗口。此代码适用于 Chrome 和 Firefox，但由于某种原因不适用于 IE v9。

在 IE9 调试器中显示 Line: 17 Error: Invalid argument。

第 17 行是 var win = window.open(...

在调试器中，我看到：

```
HTML1202: http://xyzserver:8080/path/test_popup.html is running in Compatibility View because 'Display intranet sites in Compatibility View' is checked. 
```

和

SCRIPT87：参数无效。test_popup.html，第 17 行字符 3

字符是 var win = ... 中的 v

有人有什么想法吗？

```
<!DOCTYPE html>
<html>
<head>
<script>
function open_win(data) 
{
  var w = 200;
  var h = 200;
  var left = (screen.width - (w * 1.1)); 
  var top  = (screen.height - (h * 1.1));

  var win = window.open('', 'about:blank', 'width=' + w + ',  height=' + h + ', top=' + top + ', left=' + left);
  win.document.write("<p>Received: " + data + "</p>")
  win.focus()
}
</script>
</head>

<body>
<form>
<input type="button" value="Open Window" onclick="open_win('information here')">
</form>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T12:45:40.487

您需要作为第一个参数而不是第二个参数传递（这是在 IE`about:blank`中显然可能不包含 . 的窗口名称）`:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T12:45:54.933

尝试这个：

```
var win = window.open('', '', 'width=' + w + ',  height=' + h + ', top=' + top + ', left=' + left); 
```

所以没有，`'about:blank'`因为 Microsoft 不支持将名称作为第二个参数。

或者您应该说：`window.open('_blank', '', 'width='...)....etc`将名称作为第一个参数。

# wordpress - 过期链接插件不显示短代码

> ID：14547415
> 
> 赞同：0
> 
> 时间：2013-01-27T12:41:17.560
> 
> 标签：wordpress, shortcode

我得到的这段代码在 WP 3.5.1 升级之前运行良好。现在它没有显示任何东西，我无法弄清楚。

当我在管理面板中输入简码时，生成的帖子或页面不显示任何内容。甚至没有原始简码？

基本上，此代码显示亚马逊 s3 内容的过期链接以防止浸出。

```
define('FPEAS3', __FILE__);
define('FPEAS3_DIR', dirname(__FILE__));

@define('FPEAS3_AWS_S3_ACCESS_ID', '');
@define('FPEAS3_AWS_S3_SECRET', '');

add_action('init', 'fpeas3_init');

function fpeas3_init() {
  add_shortcode('s3', 'fpeas3_shortcode');
}

function fpeas3_shortcode($atts, $content = null) {
  extract(shortcode_atts(array(
    'expires' => '5',
    'bucket' => '',
    'path' => ''
  ), $atts));

  if (!$content = trim($content)) {
    $content = 'Download';
  }

  $keys = array(
    'access_id' => get_post_meta(get_the_ID(), 'aws_s3_access_id', true),
    'secret' => get_post_meta(get_the_ID(), 'aws_s3_secret', true)
  );

  if (empty($keys['access_id']) || empty($keys['secret'])) {
    $keys = fpeas3_get_static_keys();
  }

  if (empty($keys['access_id']) || empty($keys['secret'])) {
    $error = "Expiring Amazon S3 Links not setup correctly: missing Access ID or Secret.";
    error_log($error);
    if (current_user_can('admin')) {
      return $error;
    } else {
      return '';
    }
  }

  return sprintf('<a rel="nofollow" href="%s" class="s3-temp-link">%s</a>', 
    fpeas3_get_temporary_link($keys['access_id'], $keys['secret'], $bucket, $path, $expires), $content);
}

function fpeas3_get_static_keys() {
  return array(
    'access_id' => FPEAS3_AWS_S3_ACCESS_ID,
    'secret' => FPEAS3_AWS_S3_SECRET
  );
}

/**
 * Calculate the HMAC SHA1 hash of a string.
 * @param string $key The key to hash against
 * @param string $data The data to hash
 * @param int $blocksize Optional blocksize
 * @return string HMAC SHA1
 */
function fpeas3_crypto_hmacSHA1($key, $data, $blocksize = 64) {
  if (strlen($key) > $blocksize) $key = pack('H*', sha1($key));
  $key = str_pad($key, $blocksize, chr(0x00));
  $ipad = str_repeat(chr(0x36), $blocksize);
  $opad = str_repeat(chr(0x5c), $blocksize);
  $hmac = pack( 'H*', sha1(
    ($key ^ $opad) . pack( 'H*', sha1(
      ($key ^ $ipad) . $data
    ))
  ));
  return base64_encode($hmac);
}

/**
 * Create temporary URLs to your protected Amazon S3 files.
 * @param string $accessKey Your Amazon S3 access key
 * @param string $secretKey Your Amazon S3 secret key
 * @param string $bucket The bucket (bucket.s3.amazonaws.com)
 * @param string $path The target file path
 * @param int $expires In minutes
 * @return string Temporary Amazon S3 URL
 * @see http://awsdocs.s3.amazonaws.com/S3/20060301/s3-dg-20060301.pdf
 */
function fpeas3_get_temporary_link($accessKey, $secretKey, $bucket, $path, $expires = 5) {
  // Calculate expiry time
  $expires = time() + intval(floatval($expires) * 60);
  // Fix the path; encode and sanitize
  $path = str_replace('%2F', '/', rawurlencode($path = ltrim($path, '/')));
  // Path for signature starts with the bucket
  $signpath = '/'. $bucket .'/'. $path;
  // S3 friendly string to sign
  $signsz = implode("\n", $pieces = array('GET', null, null, $expires, $signpath));
  // Calculate the hash
  $signature = fpeas3_crypto_hmacSHA1($secretKey, $signsz);
  // Glue the URL ...
  $url = sprintf('http://%s.s3.amazonaws.com/%s', $bucket, $path);
  // ... to the query string ...
  $qs = http_build_query($pieces = array(
    'AWSAccessKeyId' => $accessKey,
    'Expires' => $expires,
    'Signature' => $signature,
  ));
  // ... and return the URL!
  $tempUrl = $url.'?'.$qs;
  return $tempUrl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:03:03.670

好的，所以我用新的眼光再次查看了这段代码。我想我让它工作了。还在测试一些东西。

我稍微改变了这行代码：

```
**return** sprintf('<a rel="nofollow" href="%s"
 class="s3-temp-link">%s</a>', 
     fpeas3_get_temporary_link($keys['access_id'], $keys['secret'], $bucket, $path, $expires), $content); 
```

变成：

```
**echo** sprintf('<a rel="nofollow" href="%s" class="s3-temp-link">%s</a>', 
    fpeas3_get_temporary_link($keys['access_id'], $keys['secret'], $bucket, $path, $expires), $content); 
```

我不是程序员，但经过一番挖掘，我发现有多种显示输出的方法。

关于这是否是编码的好方法有什么意见吗？

# java - 使用 hibernate 4.2.0 需要哪些库？

> ID：14547423
> 
> 赞同：0
> 
> 时间：2013-01-27T12:42:00.137
> 
> 标签：java, mysql, hibernate

我在谷歌上搜索，但每个教程都说不同的 jar 库。为了正确使用 Hibernate（在 Eclipse 上），我可以拥有完整的 jar 列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:53:33.963

您可以查看 Maven 存储库。您需要 /lib/required/ 目录中的所有 jar。其他的用于支持更多的 fitchers，如 JPA 等，但对于基本应用程序，您可以使用此 jar 版本 3 是：

*   hibernate3.jar（主jar）
*   antlr-2.7.6.jar
*   common-collections-3.1.jar
*   dom4j-1.6.1
*   jta-1.1.jar
*   slf4j-api-1.6.1.jar
*   javassist-3.12.0.GA.jar
*   hibernate-jpa-2.0-api-1.0.0.Final.jar（用于 jpa）

这是一个很好的hibernate教程：[java brains](http://javabrains.koushik.org/p/hibernate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-12T06:32:35.233

来自：[http ://www.tutorialspoint.com/hibernate/hibernate_environment.htm](http://www.tutorialspoint.com/hibernate/hibernate_environment.htm)

以下是 Hibernate 所需的包/库列表，您应该在开始使用 Hibernate 之前安装它们。要安装这些软件包，您必须将库文件从 /lib 复制到您的 CLASSPATH 中，并相应地更改您的 CLASSPATH 变量。

dom4j - XML 解析 www.dom4j.org/

Xalan - XSLT 处理器[http://xml.apache.org/xalan-j/](http://xml.apache.org/xalan-j/)

Xerces - Xerces Java 解析器[http://xml.apache.org/xerces-j/](http://xml.apache.org/xerces-j/)

cglib - 在运行时对 Java 类进行适当的更改[http://cglib.sourceforge.net/](http://cglib.sourceforge.net/)

log4j - 记录 Faremwork [http://logging.apache.org/log4j](http://logging.apache.org/log4j)

Commons - 日志记录、电子邮件等[http://jakarta.apache.org/commons](http://jakarta.apache.org/commons)

7SLF4J - Java 的日志门面[http://www.slf4j.org](http://www.slf4j.org)

# javascript - AngularJs 无法读取动态设置的属性

> ID：14547425
> 
> 赞同：1
> 
> 时间：2013-01-27T12:42:06.227
> 
> 标签：javascript, angularjs

我希望能够创建一个 angularjs 指令，最终从元素属性创建一个 HighCharts 图。我有一个指令工作，但任何动态设置的属性都返回未定义。最后，我希望将元素上的所有属性作为参数发送到 $http 请求。

我试过使用 $observe 方法，但它似乎不起作用，我也希望属性是任何东西而不是预定义的。

看到这个小提琴： http: [//jsfiddle.net/F52SF/](http://jsfiddle.net/F52SF/)和指令下面的代码：

```
myApp.directive('example', function () {
    return {
        restrict: 'A',
        link: function (scope, element, attrs) {
            console.log('Log1:', attrs.exampleId);
            attrs.$observe('exampleAttr', function () {
                console.log('Log2:', attrs.exampleId);
            });

            var data = {};
            for(var i in attrs){
                var t = Object.prototype.toString.call( attrs[i] );
                if(t !== '[object Object]' && t != '[object Function]') data[i] = attrs[i];
            } 
            console.log(data);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:55:13.343

在您的示例代码中有几个错误/改进：

1.  您正在混合 exampleAttr 和 exampleId
2.  最好读取传递给 $observe 函数回调的值：

    ```
    attrs.$observe('exampleAttr', function(newValue) {
        /* use newValue here instead of attrs.exampleAttr */
    }); 
    ```

这是工作小提琴：http: [//jsfiddle.net/F52SF/1/](http://jsfiddle.net/F52SF/1/)

# jquery - 如何使用jquery在向导控件中保留用户控件值

> ID：14547431
> 
> 赞同：2
> 
> 时间：2013-01-27T12:42:26.653
> 
> 标签：jquery, wizard

我有一个用户控件附加到向导控件的向导步骤之一。问题是当我单击下一个和上一个按钮时值丢失了。任何帮助如何使用 jquery 保留值？

网页表格

```
<form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>  
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
                       <ContentTemplate>
    <div>
     <asp:Wizard ID="Wizard1" runat="server" HeaderText="Simple Example of Wizard Control" HeaderStyle-Font-Size="Larger" HeaderStyle-ForeColor="Crimson" OnFinishButtonClick="Wizard1_FinishButtonClick" OnNextButtonClick="Wizard1_NextButtonClick">  
            <WizardSteps >  
                <asp:WizardStep ID="WizadStep1" runat="server" title="Personal Information" >  
                    <asp:Label ID="Label1" runat="server" Text="Your Name" AssociatedControlID="TextBox1"></asp:Label>  
                    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>  
                    <br />  
                    <asp:Label ID="Label2" runat="server" Text="City" AssociatedControlID="TextBox2"></asp:Label>  
                    <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>  
                </asp:WizardStep>  
                <asp:WizardStep ID="WizardStep2" runat="server" title="Favorite Color?">  
                    <asp:Label ID="Label3" runat="server" Text="Favorite Color?" AssociatedControlID="RadioButtonList1"></asp:Label>  
                    <asp:RadioButtonList ID="RadioButtonList1" runat="server">  
                        <asp:ListItem Selected="True">Red</asp:ListItem>  
                        <asp:ListItem>Green</asp:ListItem>  
                        <asp:ListItem>Blue</asp:ListItem>  
                    </asp:RadioButtonList>  
                </asp:WizardStep>  
                <asp:WizardStep ID="WizardStep3" runat="server" title="Favorite Tool?">  
                    <asp:Label ID="Label4" runat="server" Text="Most Favorite?" AssociatedControlID="RadioButtonList2"></asp:Label>  
                    <asp:RadioButtonList ID="RadioButtonList2" runat="server">  
                        <asp:ListItem Selected="True">Asp.Net</asp:ListItem>  
                        <asp:ListItem>ColdFusion</asp:ListItem>  
                        <asp:ListItem>PHP</asp:ListItem>  
                    </asp:RadioButtonList>  
                    <uc1:WebUserControl1 runat="server" id="WebUserControl1" />
                </asp:WizardStep>  
                <asp:WizardStep ID="WizardStep4" runat="server" Title="Result" OnActivate="WizardStep4_Activate">  
                    <asp:Label ID="Label5" runat="server" Font-Size="X-Large" ForeColor="DarkGoldenrod"></asp:Label>  
                </asp:WizardStep>  
            </WizardSteps>  
        </asp:Wizard>  
    </div>
                           </ContentTemplate>
            </asp:UpdatePanel>
    </form> 
```

用户控制

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="WebUserControl1.ascx.cs" Inherits="WebApplication2.WebUserControl1" %>

<div class="clear"></div>
<div>
    <ul>
        <li><input type="checkbox"/><span id="0">Column1</span></li>
        <li><input type="checkbox"/><span id="1">Column 2</span></li>
        <li><input type="checkbox"/><span id="2">Column 3</span></li>
            </ul>
</div> 
```

# comparison - 可移植性与平台无关

> ID：14547432
> 
> 赞同：1
> 
> 时间：2013-01-27T12:42:42.623
> 
> 标签：comparison, cross-platform, portability

有人可以解释一下这些的区别吗？如果程序是平台独立的，它是否也使其可移植，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T19:58:33.413

平台无关意味着，这些程序可以在“几乎”所有操作系统中运行。不需要全部，但至少 MS、Linux 和 Mac 可以使用这个词。

并且，让我们挖掘一下“平台无关”这个词背后的事实。

注意：以下句子是我的观点。如果有人阅读，无法理解背后的逻辑或不喜欢，只需按下按钮`CTRL`+`W`即可关闭。我注意到这些是因为 Java 程序员在面对这些句子时会变得非常生气。但它始终是开放的讨论。请检查：[http ://en.wikipedia.org/wiki/Platform-independent_model](http://en.wikipedia.org/wiki/Platform-independent_model)

好的，不要打断话题然后回头。

1.  实际上，从逻辑上讲，任何需要平台安装程序的程序都不能被视为独立于平台的。例如，如果我**不能**在不下载和安装 Java 运行时包服务等的情况下运行 Java 可执行文件......那么我们怎么能说它是平台独立的。如果我们可以说，那么将近 80% 的 Windows 可执行文件也是平台独立的，因为您可以在 Linux 等上使用虚拟机或 WINE 运行它们。当然，如果 Java 独立于平台，PHP、ASP、Perl、Python、Ruby 等. 所有脚本语言也是平台无关的！？啊，当然不是......希望你明白这个逻辑。

2.  但是我们可以做的是，我们可以为许多不同的操作系统编译我们的（自己的）软件。所以我们的软件将是“跨平台”的

3.  真正可以独立于平台的是（正如我在上面写的，我的观点）未编译的程序集、C 等代码......

说到便携，这是另一回事。例如，“windows”操作系统下的“portable software”一词是指；

*   不将注册表或 Appdata 文件夹用于其文件或设置。
*   在它自己的文件夹下工作，它所需的所有文件都位于它自己的文件夹下。
*   还将其设置保存到其自己文件夹下的文件（ini 等）中。

而如果我们在含义上更进一步，甚至不能依赖特定的硬件/软件品牌、型号或特殊模式（如“x”品牌的屏幕卡、“y”分辨率、“z”版本的 DirectX 等）。但实际上你可以忽略最后一个细节，因为这个标准还不成熟，尚未被所有人接受。

# java - 5 行输入产生 4 行输出，直到我再次按下回车键

> ID：14547434
> 
> 赞同：0
> 
> 时间：2013-01-27T12:42:57.270
> 
> 标签：java

我的代码应该输出 5 个案例，但它只输出 4 个，我必须再次按 enter 才能打印第 5 个输出：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.util.Scanner;

public class BeautifulStrings2 {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        //File f=new File("input.txt");
        Scanner in=new Scanner(System.in);
        //BufferedReader in1=new BufferedReader(new InputStreamReader(System.in));
        int n=in.nextInt();
        in.nextLine();
        for (int i=1;i<=n;i++){
            String s=in.nextLine();
            //System.out.println(s);
            String chars="";
            if (Character.isUpperCase(s.charAt(0))){
                chars+=s.charAt(0);
            }
            else {
                chars+=Character.toUpperCase(s.charAt(0));
            }
            for (int j=0;j<s.length();j++){
                boolean flag=true;
                for (int k=0;k<chars.length();k++){
                    if (Character.isLetter(s.charAt(j))){
                        if (chars.charAt(k)==Character.toUpperCase(s.charAt(j))){
                            flag=false;
                            break;
                        }
                    }
                }
                if (flag){
                    chars+=Character.toUpperCase(s.charAt(j));
                }
            }
            String temp=chars;
            chars="";
            for (int j=0;j<temp.length();j++){
                if (temp.charAt(j)>64&&temp.charAt(j)<91)
                    chars+=temp.charAt(j);
            }
            int [] numbers=new int[chars.length()];
            Arrays.fill(numbers, 0);
            for (int j=0;j<chars.length();j++){
                for (int k=0;k<s.length();k++){
                    if (chars.charAt(j)==Character.toUpperCase(s.charAt(k))){
                        numbers[j]++;
                    }
                }
            }
            //System.out.println(chars);
            Arrays.sort(numbers);
            int factor=26,sum=0;
            for (int j=chars.length()-1;j>=0;j--){
                sum+=numbers[j]*factor;
                factor--;
            }
            System.out.println("Case #"+i+": "+sum);
        }
    }

} 
```

预期输出：

```
Case #1: 152
Case #2: 754
Case #3: 491
Case #4: 729
Case #5: 646 
```

实际输出：

```
Case #1: 152
Case #2: 754
Case #3: 491 
Case #4: 729 
```

当我再次按回车键时，第五个案例被打印出来......如何强制打印它而无需更改输入，即

```
5
ABbCcc
Good luck in the Facebook Hacker Cup this year!
Ignore punctuation, please :)
Sometimes test cases are hard to make up.
So I just go consult Professor Dalves 
```

# java - 发送附件时不显示正文消息

> ID：14547435
> 
> 赞同：6
> 
> 时间：2013-01-27T12:42:58.520
> 
> 标签：java, jakarta-mail

当我发送附件时，我在电子邮件中看不到正文消息 (message.setText(this.getEmailBody());)。如果没有附件，电子邮件将与正文一起显示。电子邮件被发送到 gmail 帐户。任何线索为什么会发生这种情况？

```
 MimeMessage message = new MimeMessage(session_m);    
        message.setFrom(new InternetAddress(this.getEmailSender()));
        message.addRecipient(Message.RecipientType.TO, new InternetAddress(this.getEmailRecipient()));
        message.setSubject(this.getEmailSubject());
        message.setText(this.getEmailBody()); //This won't be displayed if set attachments

        Multipart multipart = new MimeMultipart();

        for(String file: getAttachmentNameList()){
            MimeBodyPart messageBodyPart = new MimeBodyPart();
            messageBodyPart.attachFile(this.attachmentsDir.concat(file.trim()));
            multipart.addBodyPart(messageBodyPart);

            message.setContent(multipart);
        }

        Transport.send(message);
        System.out.println("Email has been sent"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T12:47:55.780

您需要使用以下内容：

```
 // Create the message part
        BodyPart messageBodyPart = new MimeBodyPart();
        // Fill the message
        messageBodyPart.setText(body);
        messageBodyPart.setContent(body, "text/html");

        Multipart multipart = new MimeMultipart();
        multipart.addBodyPart(messageBodyPart);
         //Add the bodypart for the attachment(s)
        // Send the complete message parts
        message.setContent(multipart); //message is of type - MimeMessage 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-25T04:55:27.650

你需要分成两部分来做到这一点：

```
 Multipart multipart = new MimeMultipart();

        // content part
        BodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setText(content);
        messageBodyPart.setContent(content, "text/html");
        multipart.addBodyPart(messageBodyPart);

        BodyPart attachmentPart = new MimeBodyPart();
        DataSource source = new FileDataSource(file);
        attachmentPart.setDataHandler(new DataHandler(source));
        attachmentPart.setFileName(file.getName());
        multipart.addBodyPart(attachmentPart); 
```

# php - 以json格式检索api的响应

> ID：14547436
> 
> 赞同：0
> 
> 时间：2013-01-27T12:43:18.697
> 
> 标签：php, json, api

我正在使用**活动监视器的 api**并尝试以`json`它应该执行的格式检索响应。我回应了回应，这是一个例子：

```
string(342) "HTTP/1.1 400 Bad Request
Server: csw
Cache-Control: private, s-maxage=0
X-CS-Node: 25
Content-Type: application/json; charset=utf-8
P3P: CP="OTI DSP COR CUR IVD CONi OTPi OUR IND UNI STA PRE"
Date: Sun, 27 Jan 2013 12:35:10 GMT
Connection: close
Content-Length: 66

{"Code":250,"Message":"List title must be unique within a client"}" 
```

我想得到唯一的最后一行。我怎样才能做到这一点 ？（我试图用空白来爆炸响应，但它没有改变任何东西）。

编辑：文档在[这里](http://www.campaignmonitor.com/api/getting-started/#response_codes)，我调用一个方法`method()`，返回响应`$response = method()`并运行`echo($response)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:58:54.290

您可以使用 preg_match 函数通过搜索正则表达式“/{.*}/”来搜索 JSON。

```
preg_match('/\{.*\}/', $response, $matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:01:53.340

基于[此示例代码](https://github.com/campaignmonitor/createsend-php/blob/master/samples/get_billing_details.php)，您应该执行以下操作：

```
$result = method(); # I'm assuming you over-simplified the code in your question and "method" isn't the real method name
echo $result->response; # Not echo $result; 
```

# haskell - 限制数据构造函数可以拥有的元素数量

> ID：14547437
> 
> 赞同：8
> 
> 时间：2013-01-27T12:43:23.160
> 
> 标签：haskell

我正在用 Haskell 写一个 ADT，它代表一手牌。我的问题是我想将`(Suit,Face)`代表一张牌的数量限制为 5 代表一手牌。

```
data Card = Hand [(Suit,Face)] 
```

我试图做的是这个，但它不起作用。

```
data Card = Hand [(Suit,Face),(Suit,Face),(Suit,Face),(Suit,Face),(Suit,Face)] 
```

我的问题是：我如何将元组的数量限制为 5？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-27T14:05:24.160

我想补充一点，如果您使用基于 5 元组的解决方案（如其他答案中所建议的那样），您仍然可以拥有所需的所有折叠/遍历功能。特别是，首先定义

```
import Control.Applicative
import Data.Foldable
import Data.Traversable

data Tuple5 a = Tuple5 a a a a a 
```

并在其上定义[折叠](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Foldable.html)和[遍历](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Traversable.html)操作：

```
instance Traversable Tuple5 where
    traverse f (Tuple5 a b c d e)
            = Tuple5 <$> f a <*> f b <*> f c <*> f d <*> f e
instance Foldable Tuple5 where
    foldMap = foldMapDefault
instance Functor Tuple5 where
    fmap    = fmapDefault 
```

然后，您可以拥有

```
data Hand = Hand (Tuple5 Card) 
```

`Foldable`并使用/ `Traversable`/中的任何方法折叠/遍历结构`Functor`。

* * *

**更新：**最近我创建了一个小型库[tuples-homogenous-h98](http://hackage.haskell.org/package/tuples-homogenous-h98)，它定义`newtype`了同质元组的别名，例如

```
newtype Tuple5 a = Tuple5 { untuple5 :: (a,a,a,a,a) } 
```

并添加适当的`Traversable`、`Foldable`、`Functor`和实例。`Applicative``Monad`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T13:02:07.690

怎么样

```
data Card = Hand (Suit, Face) (Suit, Face) (Suit, Face) (Suit, Face) (Suit, Face) 
```

?

或者，如果你真的想使用列表（我的意思是，如果你想要 15 张牌，我的建议会变得非常愚蠢），你可以保留`data Card = Hand [(Suit, Face)]`然后告诉用户*不要*使用构造函数，而是提供一个“智能构造函数”像

```
fromList :: [(Suit, Face]) -> Maybe Card
fromList xs 
        | length xs == 5 = Just (Hand xs)
        | otherwise      = Nothing 
```

然后，您还可以让构造函数本身可用，并发出警告，例如“仅在您保证提供的列表包含正好 5 个元素时使用”。

顺便说一句：命名数据类型`Card`和构造函数是不是`Hand`有点违反直觉？我认为应该`Hand`在您的情况下调用数据类型。`Card`是一个很好的别名`Suit`-`Face`对，所以你可以做`type Card = (Suit, Face)`and `data Hand = Hand [Card]`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-27T13:02:58.047

您可以为 Cards 和 Hand 类型创建一个包含五个 Card 元素的类型：

```
type Card = (Suit, Face)
data Hand = Hand Card Card Card Card Card 
```

# ruby-on-rails - NoMethodError users_url 与设计（ajax）

> ID：14547439
> 
> 赞同：1
> 
> 时间：2013-01-27T12:43:34.043
> 
> 标签：ruby-on-rails, devise

我将设计 2.2.2 与 rails 3.2.11 一起使用

我将设计与 ajax 请求一起使用

我更改了以下配置`initializers/devise.rb`

```
config.navigational_formats = [:json, :html]
config.http_authenticatable_on_xhr = false 
```

当我提交一个空的登录请求时，我希望得到一个带有错误哈希的 json 响应，但我得到的是 500（请参阅下面的跟踪）（它适用于注册请求）

这是我的路线（没什么特别的）

```
devise_for :users 
```

痕迹：

```
Started POST "/users/sign_in.json" for 127.0.0.1 at 2013-01-27 13:33:45 +0100
Processing by Devise::SessionsController#create as JSON
  Parameters: {"user"=>{"email"=>"", "password"=>"[FILTERED]"}}
Completed 401 Unauthorized in 1ms
Processing by Devise::SessionsController#new as JSON
  Parameters: {"user"=>{"email"=>"", "password"=>"[FILTERED]"}}
Completed 500 Internal Server Error in 40ms

NoMethodError (undefined method `users_url' for #<Devise::SessionsController:0x007fe88ddd9550>): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-14T20:31:47.693

您可能正在覆盖`after_sign_in_path_for`并在那里有一个返回 nil 的代码路径。

这会导致设计回退到其默认行为并调用`users_url`以获取重定向到的路径。

为什么我会这样想？因为您遇到了与我相同的错误（并且掉了一些头发），并且[此错误报告](https://github.com/plataformatec/devise/issues/1350#issuecomment-50862868)包含许多其他人的 github 用户名，这些人对此特定问题感到谦卑。

# flash - Flash 开发中来自 Flash CS 的符号

> ID：14547442
> 
> 赞同：0
> 
> 时间：2013-01-27T12:43:37.893
> 
> 标签：flash, flashdevelop, flash-cs5

我和一个同事正在开发一个 Flash 游戏。

我的同事使用 Adob​​e CS5，他在“舞台”上创建符号，然后在 ActionScript 文件中简单地使用它们，例如“GoodGuy.visible=true”。

我使用 Flash Develop，所以我没有那个阶段，但我有一个 SWC 文件，由他编译，其中包含一些符号和属性。但是，当我使用相同的 ActionScript 文件时，我收到错误“访问未定义的属性 GoodGuy”。我应该怎么办？

# jquery - 计数器应该适用于所有点击并且功能应该是一个

> ID：14547443
> 
> 赞同：2
> 
> 时间：2013-01-27T12:43:40.457
> 
> 标签：jquery

我有一个脚本计数器，但我想对计数器使用相同的计数器。我对班级和身份证的所有变化持开放态度。这是代码：

```
$(document).ready(function(){
    $('#target').click(function() {
        $('#output').text(function(i, val) { return val*1+1 });
    });

    $('#targetdown1').click(function() {
        $('#output').text(function(i, val) { return val*1-1 });
    });
    }); 
```

这是示例：

[http://jsfiddle.net/cY9p7/7/](http://jsfiddle.net/cY9p7/7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:54:52.063

我不仅针对您的情况使用的解决方案之一是将我需要更新的元素的目标 id 写为启动元素上的属性

在您的情况下，我在每个 +/- 符号上添加了一个数据属性，指示需要更新的目标元素是什么

HTML 代码

```
<div class="left" id="output1">1</div>
<div class="right">
   <div class="up-arrow" id="target" data-target="output1">+</div>
   <div class="down-arrow" id="targetdown1" data-target="output1">-</div>
</div> 
```

jQuery代码

```
$(document).ready(function(){
    $('.up-arrow').click(function() {
        var target = $(this).attr("data-target");
        var val =  

        $('#' + target).text(function(i, val) {return val*1+1 });
    });

    $('.down-arrow').click(function() {
        var target = $(this).attr("data-target");
        $('#' + target).text(function(i, val) { 
            if (val == 0)
                return 0;
            return val*1-1 
        });
    });
}); 
```

[小提琴示例](http://jsfiddle.net/cY9p7/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T12:58:25.327

```
$(document).ready(function () {
    $('.up-arrow, .down-arrow').click(function () {
        var self = this;
        $(this).closest('.counterBox1').find('.left').text(function (i, val) {
            return self.id == 'target' ? (val * 1 + 1) : (val * 1 - 1);
        });
    });
}); 
```

[**小提琴**](http://jsfiddle.net/cY9p7/10/)

# php - PDO -> 为什么使用 fetchAll？

> ID：14547447
> 
> 赞同：0
> 
> 时间：2013-01-27T12:44:06.010
> 
> 标签：php, pdo

假设我正在使用一个简单的 SELECT 语句查询我的数据库。

```
$sql='SELECT * FROM products';
$s=$db->prepare($sql);
$s->execute();
foreach($s as $v){
   echo $v['productName'];
}
$s->closeCursor(); 
```

但是我看到了下面的代码，使用 fetchAll() 来做同样的事情：

```
$sql='SELECT * FROM products';
$s=$db->prepare($sql);
$s->execute();
$products=$s->fetchAll();
$s->closeCursor();
foreach($products as $v){
   echo $products['productName'];
} 
```

首先，我知道 fetchAll() 不应该用于大型结果集。但是，问题是：**如果我们可以直接遍历 prepare() 方法返回的 PDOStatement 对象，为什么我们要让 fetchAll()（和 fetch()）可用？**

似乎唯一的好处是更早地释放连接！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T12:46:37.303

答案很简单：
因为您必须**将业务逻辑与表示逻辑分开。**
意味着首先您必须获取所有必需的数据，然后才能开始输出。
而 fetchAll 在这件事上变得相当得心应手。

好吧，仔细看看你的问题

> 如果我们可以直接遍历 PDOStatement 对象，为什么它们使 fetchAll()（和 fetch()）可用？

我认为这样的“直接遍历”只是一种语法糖，下面有很好的旧 fetch() 或类似的东西。

# arrays - Smalltalk 数组类型

> ID：14547449
> 
> 赞同：9
> 
> 时间：2013-01-27T12:44:09.797
> 
> 标签：arrays, smalltalk, squeak

在查看 Smalltalk 语法定义时，我注意到数组有一些不同的表示法：

```
#[] "ByteArray"
#() "Literal Array"
{}  "Array" 
```

*   为什么有不同的数组类型？在其他编程语言中，我知道只有一种独立于存储类型的数组。
*   什么时候选择哪种？
*   为什么文字数组和数组有不同的符号但相同的类？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-27T16:47:11.557

迈克尔的回答中有一些术语混乱，`#()`是文字数组，而`{}`不是。文字数组是由编译器创建的数组，可以包含任何其他文字值（包括其他文字数组），因此以下是有效的文字数组：

```
#(1 #blah nil ('hello' 3.14 true) $c [1 2 3]) 
```

另一方面 {} 只是运行时数组创建的语法糖，因此`{ 1+2\. #a. anObject}`相当于：

```
(Array new: 3) at: 1 put: 1 + 2; at: 2 put: #a; at: 3 put: anObject; yourself 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-27T13:00:45.333

这是一个小演练：

首先，我们可以找出类型。结果对象的类：

*   `#[] class`结果是`ByteArray`
*   `#() class`结果是`Array`
*   `{} class`也导致`Array`

所以显然后两个产生数组，而第一个产生一个字节数组。ByteArrays 是您所期望的——固定大小的字节数组。

现在我们必须弄清楚`#()`和之间的区别`{}`。尝试评估`#(a b c)`，结果是`#(#a #b #c)`；但是，当您尝试评估时`{a b c}`，它不起作用（因为`a`未定义）。工作版本将是`{#a. #b. #c}`，这也会导致`#(#a #b #c)`.

`#()`和之间的区别在于`{}`，第一个采用空格分隔的符号名称列表。您也可以省略这些`#`标志。使用此表示法，您只能创建包含符号的数组。第二个版本是通用数组字面量。它接受任何表达式，用`.`（点）分隔。您甚至可以编写诸如`{1+2\. anyObject complexOperation}`.

这可能会导致您始终使用该`{}`符号。但是，有一些事情要记住： 对象创建的时刻不同：虽然`#()`数组是在编译期间创建的，但`{}`数组是在执行期间创建的。`#()`因此，当您使用表达式运行代码时，它也将返回*相同*的数组，而`{}`只返回*相等*的数组（只要您使用相等的内容）。此外，AFAIK`{}`不一定是可移植的，因为它不是 ST-80 标准的一部分。

# java - 我应该在哪里（确切地）在我的 Java EE 应用程序中使用同步

> ID：14547452
> 
> 赞同：0
> 
> 时间：2013-01-27T12:44:26.003
> 
> 标签：java, multithreading, jakarta-ee, synchronized, volatile

我正在使用 Java EE 为游戏评论开发一个内容管理系统。

我有一个非常简单的问题，这里是：

我有一个带有 Game 对象的 ArrayList。每个游戏对象都有 GameRank 属性，它是一个简单的类，定义如下：

```
public class GameRank 
{
    private int activity;
    private int positiveVotes;
    private int negativeVotes;

     public GameRank(int activity, int positiveVotes, int negativeVotes) 
     {
       this.activity = activity;
       this.positiveVotes = positiveVotes;
       this.negativeVotes = negativeVotes;   
     }
} 
```

网站的访问者可以选择对游戏投赞成票或反对票，结果将使用 ajax 发送到服务器。

所以问题是：

我应该在哪里同步对 GameRank 对象属性的访问——它们的 getter 和 setter 方法，或者在处理用户投票的 Controller Servlet 中，并根据游戏 ID 决定应该更新哪个对象？

提前 10 倍

* * *

如果我决定在课堂上使用同步，我可以使用 AtomicInteger 作为建议的海报之一或这个：

```
public class GameRank 
{
private volatile int activity;
private volatile int positiveVotes;
private volatile int negativeVotes;

public GameRank(int activity, int positiveVotes, int negativeVotes) 
{
    this.activity = activity;
    this.positiveVotes = positiveVotes;
    this.negativeVotes = negativeVotes;

    this.checkAndFixValues();
}

private void checkAndFixValues()
{
    if(this.activity < 1) this.activity = 1;
    if(this.positiveVotes < 1) this.positiveVotes = 1;
    if(this.negativeVotes < 1) this.negativeVotes = 1;
}

public int getActivity() 
{
    synchronized(GameRank.class)
    {
        return activity;
    }
}

public int getPositiveVotes() 
{
    synchronized(GameRank.class)
    {
        return positiveVotes;
    }
}

public int getNegativeVotes() 
{
    synchronized(GameRank.class)
    {
        return negativeVotes;
    }
}

public void incrementActivitiy()
{
    synchronized(GameRank.class)
    {
        activity++;
    }
}

} 
```

我对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T13:11:02.900

在 Java-EE（或者通常在使用 servlet 时）中，不同的请求由不同的线程处理。无论这些线程在哪里操作共享对象，您都需要某种同步。

根据您的持久性技术，情况可能会也可能不会。使用 JPA，通常为每个线程提供自己的持久性上下文，并检测数据库中的冲突更新。如果这样做，则不需要在 JVM 中进行同步，但您可能需要实现重试逻辑，以防事务由于更新冲突而无法提交。使用 JDBC 时也是如此，前提是您不跨线程共享 JDBC 对象 ( `Connection`, )。`Resultset`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:23:06.447

将线程安全的责任外部化的问题是其他客户端可以随意忽略这些问题，从而破坏所有使用。

最好将这些问题内化，并使您的类线程安全。

幸运的是，JDK 提供了一个可以为您完成所有工作的类：AtomicInteger。如果将计数器的类型更改为 AtomicInteger，则可以简单地添加方法以线程安全的方式递增它们。有关更多信息，请参阅 AtomicInteger 的 javadoc。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T13:04:34.893

您可以在 GameRank 中引入同步方法，该方法将接受投票（+ve or-ve）并相应地更新 positiveVotes/negativeVotes。

# .htaccess - 如何将 www.sub.domain.com 重定向到 sub.domain.com？

> ID：14547461
> 
> 赞同：0
> 
> 时间：2013-01-27T12:45:11.283
> 
> 标签：.htaccess, drupal, redirect

如何将 www.sub.domain.com 重定向到 sub.domain.com？

其他信息：

1.  现在 sub.domain.com 有效，www.sub.domain.com 是“找不到服务器”。
2.  我正在使用drupal 6。我不想添加A记录，因为我使用的缓存模块（Boost）将缓存带有www和不带www的站点版本，从而有效地将缓存大小加倍。<-- 不太确定，但我的网站在以前的主机上就是这种情况。无论如何，这可能只是一个简单的 htaccess 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:12:35.113

这在 .htaccess 文件中没有帮助吗？

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
    RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

</IfModule> 
```

另外：[https ://drupal.stackexchange.com/questions/50552/how-to-keep-domain-consistency-with-or-without-www/50553#50553](https://drupal.stackexchange.com/questions/50552/how-to-keep-domain-consistency-with-or-without-www/50553#50553)

# windows - PowerShell 中的“mkdir”命令

> ID：14547470
> 
> 赞同：1
> 
> 时间：2013-01-27T12:45:49.487
> 
> 标签：windows, powershell, command-line, mkdir

我正在研究“命令行速成课程”，当我尝试在 PowerShell（Windows）中运行“mkdir temp”时，我得到类似“访问路径被拒绝”之类的信息，并且根据书[http:// cli.learncodethehardway.org/book/ex4.html](http://cli.learncodethehardway.org/book/ex4.html)我应该得到一些真正不同的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:51:36.607

这可能是由于访问权限。尝试作为一个运行`Administrator`

您还可以使用[runas](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/runas.mspx?mfr=true)来解决您的目的。像这样的东西：-

```
runas /user:computername\useraccount mkdir thedirtomake\somesubdir\ 
```

或者

您可以在具有写入权限的地方创建目录

# c# - 在 C# 中使用实际方法进行单元测试

> ID：14547472
> 
> 赞同：0
> 
> 时间：2013-01-27T12:45:54.817
> 
> 标签：c#, visual-studio-2010, unit-testing

嗨，我正在为我的项目进行单元测试，我想检查一个名为 Measurementool 的抽象类中的 getmin 方法。该方法从当前矩阵返回选定区域矩阵的最小值。我的项目有一个矩形区域，实际上是 N*N 矩阵。

我需要矩阵内的最小值。我为调试编写单元测试并测试 getmin 值，但我没有看到实际值的期望值。selectedarea 矩阵用零填充，在测试方法中没有设置期望值。我认为，它考虑了两个矩阵。当新矩阵创建如下时，具有零值的矩阵是错误的：

```
MatrixHolder selectedArea = 
           new MatrixHolder(new double[areaHeight * areaWidth], areaWidth); 
```

单元测试代码：

```
[TestMethod()]
public void GetMinTest()
{
    AreaMeasurmentTool target = new Rectangle(); 
    double[,] MatrixResult = new double[,] {
    {10, 0, 20, 10, 10},
    {12, 2, 30, 15, 16},
    {19, 0, 43, 10, 17},
    {80, 0, 65, 18, 13},
    {70, 4, 10, 10, 10}};
    double []SelectedArea1 = new double[9]{2, 30, 15, 1, 43, 10, 2, 65, 18};
    MatrixHolder currentMatrix = new MatrixHolder(SelectedArea1, 3); 
    double expected = 1; 
    double actual;
    actual = target.GetMin(currentMatrix);
    Assert.AreEqual(expected, actual);
} 
```

和类MeasurementTool：

```
public virtual double GetMin(MatrixHolder currentMatrix)
{
    if (currentMatrix == null)
    {
        throw new Exception("the image Matrix cannot be null.");
    }

    double minValue = 0;

    SetSelectArea(currentMatrix);
    minValue = CalculateMin();
    minValue = Math.Round(minValue, 2);

    return minValue;
}

private void SetSelectArea(MatrixHolder currentMatrix)
{
    PointHolder start = new PointHolder(0, 0);
    PointHolder end = new PointHolder(0, 0);

    SetBoundries(start, end);

    int areaHeight = (end.Y - start.Y);
    int areaWidth = (end.X - start.X);

    MatrixHolder selectedArea = new MatrixHolder(new double[areaHeight * areaWidth], areaWidth);
    for (int i = 0; i < areaHeight; i++)
    {
        int sourceIndex = start.X + (currentMatrix.Witdh * (i + start.Y));
        int targetIndex = areaWidth * i;
        Array.Copy(currentMatrix.Values, sourceIndex
            , selectedArea.Values, targetIndex
            , areaWidth);
    }

    SelectedAreas = selectedArea;
} 
```

# android - 如何检查设备是否有前置和后置摄像头？

> ID：14547473
> 
> 赞同：6
> 
> 时间：2013-01-27T12:46:01.230
> 
> 标签：android, android-camera

我需要检测手机是否有前置摄像头，如果有，我需要计算百万像素。后置摄像头也是如此。

我知道如何获取“相机”对象的百万像素，但我不知道如何检查其他内容。

Ps：如果你知道一种方法来检查相机是否有闪光灯，以及其他关于相机的酷统计数据，我也会很好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-29T17:47:01.820

我总是尝试创建助手检查您是否有前置摄像头：

```
public static boolean checkCameraFront(Context context) {
    if(context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FRONT)) {
        return true;
    } else {
        return false;
    }
} 
```

检查您的设备中是否有相机

```
public static boolean checkCameraRear() {
    int numCamera = Camera.getNumberOfCameras();
    if(numCamera > 0) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T12:52:40.970

[http://developer.android.com/reference/android/hardware/Camera.html#getNumberOfCameras()](http://developer.android.com/reference/android/hardware/Camera.html#getNumberOfCameras())，在 API lvl 9 中引入。这可以让您获得相机的数量

[http://developer.android.com/reference/android/hardware/Camera.CameraInfo.html](http://developer.android.com/reference/android/hardware/Camera.CameraInfo.html)包含其朝向的信息。

[http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getPictureSize()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getPictureSize())是百万像素，如果计算的话

[http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getFlashMode()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getFlashMode())如果没有闪光灯则返回 null ..

也可以从相机对象中获取许多其他参数

[http://developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html)有使用相机的分步说明。如果您了解任何面向对象的语言，则可以按照这些说明进行操作。

# android - 在同一个类中将 Handler 与 Async Task 一起使用是否正确？

> ID：14547476
> 
> 赞同：2
> 
> 时间：2013-01-27T12:47:15.977
> 
> 标签：android, google-maps, android-asynctask, android-handler

如您所知，[Android 开发指南中有一个很好的可下载示例，名为“Location Aware”](http://developer.android.com/training/basics/location/locationmanager.html)。

我对用这段代码编写的处理程序有疑问。在同一个类中将 Handler 与 Async Task 一起使用是否正确？此代码是否根据 Android 标准正确编写？（顺便说一句，如果修复了一些错误，这个项目可以正常工作。）

异步任务参考：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

```
public class LocationActivity extends FragmentActivity {
    .....
    private Handler mHandler;
    private boolean mGeocoderAvailable;
    ...

    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        if (savedInstanceState != null) {
            mUseFine = savedInstanceState.getBoolean(KEY_FINE);
            mUseBoth = savedInstanceState.getBoolean(KEY_BOTH);
        } else {
            mUseFine = false;
            mUseBoth = false;
        }
        mLatLng = (TextView) findViewById(R.id.latlng);
        mAddress = (TextView) findViewById(R.id.address);

        ..............

        // Handler for updating text fields on the UI like the lat/long and address.
        mHandler = new Handler() {
            public void handleMessage(Message msg) {
                switch (msg.what) {
                    case UPDATE_ADDRESS:
                        mAddress.setText((String) msg.obj);
                        break;
                    case UPDATE_LATLNG:
                        mLatLng.setText((String) msg.obj);
                        break;
                }
            }
        };
        // Get a reference to the LocationManager object.
        mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    }

    ...............
    @Override
    protected void onStart() {
        super.onStart();

        LocationManager locationManager =
                (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        final boolean gpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

        ........

    private void setup() {
        Location gpsLocation = null;
        Location networkLocation = null;
        mLocationManager.removeUpdates(listener);
        mLatLng.setText(R.string.unknown);
        mAddress.setText(R.string.unknown);

        if (mUseFine) {
            mFineProviderButton.setBackgroundResource(R.drawable.button_active);
            mBothProviderButton.setBackgroundResource(R.drawable.button_inactive);

            gpsLocation = requestUpdatesFromProvider(
                    LocationManager.GPS_PROVIDER, R.string.not_support_gps);

            if (gpsLocation != null) updateUILocation(gpsLocation);
        } else if (mUseBoth) {

            mFineProviderButton.setBackgroundResource(R.drawable.button_inactive);
            mBothProviderButton.setBackgroundResource(R.drawable.button_active);

            gpsLocation = requestUpdatesFromProvider(
                    LocationManager.GPS_PROVIDER, R.string.not_support_gps);
            networkLocation = requestUpdatesFromProvider(
                    LocationManager.NETWORK_PROVIDER, R.string.not_support_network);

            ........

    private void doReverseGeocoding(Location location) {
        // Since the geocoding API is synchronous and may take a while.  You don't want to lock
        // up the UI thread.  Invoking reverse geocoding in an AsyncTask.
        (new ReverseGeocodingTask(this)).execute(new Location[] {location});
    }

    private void updateUILocation(Location location) {
        // We're sending the update to a handler which then updates the UI with the new
        // location.
        Message.obtain(mHandler,
                UPDATE_LATLNG,
                location.getLatitude() + ", " + location.getLongitude()).sendToTarget();

        // Bypass reverse-geocoding only if the Geocoder service is available on the device.
        if (mGeocoderAvailable) doReverseGeocoding(location);
    }

    private final LocationListener listener = new LocationListener() {

        @Override
        public void onLocationChanged(Location location) {
            // A new location update is received.  Do something useful with it.  Update the UI with
            // the location update.
            updateUILocation(location);
        }

        .........

    // AsyncTask encapsulating the reverse-geocoding API.  Since the geocoder API is blocked,
    // we do not want to invoke it from the UI thread.
    private class ReverseGeocodingTask extends AsyncTask<Location, Void, Void> {
        Context mContext;

        public ReverseGeocodingTask(Context context) {
            super();
            mContext = context;
        }

        @Override
        protected Void doInBackground(Location... params) {
            Geocoder geocoder = new Geocoder(mContext, Locale.getDefault());

            Location loc = params[0];
            List<Address> addresses = null;
            try {
                addresses = geocoder.getFromLocation(loc.getLatitude(), loc.getLongitude(), 1);
            } catch (IOException e) {
                e.printStackTrace();
                // Update address field with the exception.
                Message.obtain(mHandler, UPDATE_ADDRESS, e.toString()).sendToTarget();
            }
            if (addresses != null && addresses.size() > 0) {
                Address address = addresses.get(0);
                // Format the first line of address (if available), city, and country name.
                String addressText = String.format("%s, %s, %s",
                        address.getMaxAddressLineIndex() > 0 ? address.getAddressLine(0) : "",
                        address.getLocality(),
                        address.getCountryName());
                // Update address field on UI.
                Message.obtain(mHandler, UPDATE_ADDRESS, addressText).sendToTarget();
            }
            return null;
        }
    }

    ............... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T06:55:52.890

是的。我们可以使用它。这没有错。如果你愿意，你也可以将它们分成两个类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-22T13:02:21.767

不，您在 java 中使用匿名内部类，它获取对外部对象实例的引用。（在这种情况下你的处理程序）

将内部类设为静态，并将 PARENT_CLASS 作为构造函数参数传入，并使用 Wea​​kReference 来存储引用。

这可以防止垃圾收集器中的循环依赖链。

[https://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html](https://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html)

WeakReference 仍然允许您轻松地“指向”一个对象，但是当该对象没有其他（强）引用时......它将被垃圾收集。（这是期望的结果）（在 RAM 有限的 Android 中尤为重要）

编辑：这是一个非常微妙的内存泄漏，除非您专门寻找它，否则很难捕捉到它。其原因是 Java 添加了对所有非静态内部类的隐式引用（我不是 100% 确定 lambda 表示法，但我认为不是……但我需要研究一下……）到创建内部类实例的实例对象...这会导致 GC 跟踪引用的循环...并在不需要时将两个对象保存在内存中的内存泄漏。（请注意，当您处理自己的线程时，这一点更为重要......但仍然是一个很好的实践）

# macos - 如何将带分号的命令设置为applescript中的变量

> ID：14547485
> 
> 赞同：0
> 
> 时间：2013-01-27T12:48:27.630
> 
> 标签：macos, variables, applescript

当我尝试将带有分号的命令设置为变量时，会发生此错误：`expected "" but found unknown token`. 命令如下：`set md5Var to do shell script "find /Users/JS_Admin/Desktop/ -type f -exec cat {} \; | md5"` .

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:16:41.987

尝试

```
do shell script "find -type f '/Users/JS_Admin/Desktop/' -exec cat {} \\; | md5" 
```

# c# - 静态成员不能被实例引用访问；改为使用类型名称来限定它

> ID：14547488
> 
> 赞同：2
> 
> 时间：2013-01-27T12:48:48.047
> 
> 标签：c#, oop

我有抽象类

```
public abstract class MemFactory 
{
    public abstract bool test();

    public virtual string getMember()
    {
        string validMember = "test"; 
        return validMember;
    }
} 
```

我在另一个子类中继承了相同的内容

```
public class MemberFactory : MemFactory
{
 private static readonly MemberFactory instance = new MemberFactory();

 static MemberFactory() { }

  public static MemberFactory Current
  {
        get { return instance;}
  }

 public static string getMember()
 {
     return MemberFactory.Current.getMember();
 }
} 
```

当我访问基类方法时，它给了我

> “不能使用实例引用访问静态成员；改为使用类型名称对其进行限定”

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:52:26.547

我得到了答案。静态方法名称应该不同。

```
public static string getMem()
        {
            return MemberFactory.Current.getMember();
} 
```

这将解决问题。感谢上帝。

# html - Django 模板上的 URL 编码

> ID：14547491
> 
> 赞同：33
> 
> 时间：2013-01-27T12:48:53.597
> 
> 标签：html, django, django-templates, url-encoding

我有这个锚链接：

```
<a href="/question/tag/1/1/?list_id={{title}}">{{title}}</a> 
```

有时，这个标题有一些带有 +（添加运算符）的内容，例如：“Django + Python”

但是当它直接放在锚链接上时，传递的url会是：

```
http://127.0.0.1:8080/question/tag/1/1/?list_id=Django + Python 
```

这最终会导致检索问题，因为 url 解码器认为 list_id GET = DjangoPython。

那么，有谁知道如何避免这个问题？请注意，我不想将锚链接更改为输入按钮。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-01-27T13:14:38.237

代替

```
{{ title }} 
```

做

```
{{title|urlencode}} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-02-06T03:31:28.080

与其硬编码 URL 并通过连接标题上下文项在模板中构建查询字符串，不如考虑使用 django.core.urlresolvers.reverse() 并从相关 urls.py 文件中指定一个命名 URL 来简化它。当您不必担心 URL 更改时，可以实现简洁的设计！想象一下，与简单地将视图集中的上下文变量分配给反向调用的结果相比，您必须更改所有分散的 HREF 会让人头疼。查询字符串也可以很好地添加到视图中，而不必担心一些经常奇怪的模板解析规则。请注意，urllib.urlencode 函数的作用与同名的模板过滤器完全不同；不要混淆！它可以按如下方式使用：

```
# If the entry in URLConf has named capture groups such as ?<pk>,
# pass a dict as kwargs parameter instead.
url = reverse('your-named-url', args=(1, 1))  # e.g '/question/tag/1/1/'
# Encodes as form data to 'list_id=Django+%2B+Python'
querystring = urllib.urlencode({'list_id': 'Django + Python'})
context['question_url'] = '{}?{}'.format(url, querystring) 
```

然后，在模板中它可以像`href="{{ question_url }}"`. 这似乎需要更多的工作，但它可以很快得到回报，而且它是一个更好的关注点分离。通常我会使用`{% url "your-named-url" %}`模板标签，但它目前不能很好地处理查询字符串——就像处理 URLConf 中定义的 URL args 和 kwargs 的方式不同。

# antlr - ANTLR 如何评估 ifdef else end 语句

> ID：14547495
> 
> 赞同：1
> 
> 时间：2013-01-27T12:48:57.093
> 
> 标签：antlr, conditional-compilation

我想知道如何评估 ifdef ... else ... end 语句，它可以放在代码的任何地方。我从一个简单的例子开始，它实现了 2 个基本函数 add(p1,p2) 和 diff(p1,p2)，其中 p1 和 p2 是字符串。它只在 p1 和 p2 之间添加一个 + 或一个 -。这是我的语法：

```
grammar ifdef;

options {
  language = Java;
  output = AST;
  ASTLabelType=CommonTree;
}

tokens 
{
    EQUAL           = '=' ;
    HASH            = '#' ;
    DBLEQUOTE       = '"' ;
    SEMICOLON       = ';' ;
}

@header {
    package Grammar;

    import java.util.Map;
    import java.util.HashMap;

}

@lexer::header {
    package Grammar;    
}

@members {
    private Map<String, String> strMapID = new HashMap<String, String>();
    private Map<String, String> strMapDefine = new HashMap<String, String>();
}

rule returns [String strEval]
    :   {   StringBuilder strBuilder = new StringBuilder(); }
    (   command
        {   if ( $command.str != "" ) {
                strBuilder.append( $command.str );
                strBuilder.append( "\n" );
            }
        }

    )+ EOF
        { $strEval = strBuilder.toString(); }
    ;

command returns [String str]
    :   define      { $str=""; }
    |   undef       { $str=""; }
    |   set         { $str=""; }
    |   function    { $str = $function.str; }
    |   ifdef       { $str=""; }
    ;

define
    :   HASH 'define' ID
        { strMapDefine.put($ID.text, $ID.text); }       // save define ID into hash table
    ;

undef
    :   HASH 'undef' ID
        {   if ( strMapDefine.containsKey($ID.text) ) {
                strMapDefine.remove($ID.text);          // undef ID in hash table
                }
        }
    ;

set
    :   'set' ID EQUAL string SEMICOLON
        { strMapID.put($ID.text, $string.text); }       // save ID,string definition into hash table 
    ;

string
    :   DBLEQUOTE expr DBLEQUOTE
    ;

function returns [String str]
    :   add     { $str = $add.str; }
    |   diff    { $str = $diff.str; }
    ;

add returns [String str]
    :   'add' '(' p1=param ',' p2=param ')'
        {   StringBuilder strBuilder = new StringBuilder();
            strBuilder.append( $p1.str );
            strBuilder.append( "+" );
            strBuilder.append( $p2.str );
            $str = strBuilder.toString();
        }
    ;

diff returns [String str]
    :   'diff' '(' p1=param ',' p2=param ')'
        {   StringBuilder strBuilder = new StringBuilder();
            strBuilder.append( $p1.str );
            strBuilder.append( "-" );
            strBuilder.append( $p2.str );
            $str = strBuilder.toString();
        }
    ;

param returns [String str]
    :   ID          { $str = strMapID.get($ID.text); }      // assign ID definition to str
    |   string      { $str = $string.text; }
    |   function    { $str = $function.str; }
    ;

ifdef
    :   {   Boolean bElse= false;
            StringBuilder strBuilder = new StringBuilder(); }
        HASH 'ifdef' '(' ID ')' c1=expr ( HASH 'else' c2=expr { bElse= true; } )? HASH 'end'
        {   if ( strMapDefine.containsKey($ID.text) ) {
                strBuilder.append($c1.text);
            }
            else {
                if ( bElse ) {
                    strBuilder.append($c2.text);
                }
            }
            System.out.println("ifdef content is : " + strBuilder.toString() + "\n" );
        }
    ;

expr
    :   .+
    ;

ID
    :   ('a'..'z' | 'A'..'Z')+
    ;

WS
    :   ( ' ' | '\t' | '\n' | '\r' ) {$channel=HIDDEN;}
    ; 
```

和java主类

```
package Grammar;

import java.io.IOException;

import org.antlr.runtime.ANTLRFileStream;
import org.antlr.runtime.CharStream;
import org.antlr.runtime.CommonTokenStream;
import org.antlr.runtime.RecognitionException;
import org.antlr.runtime.TokenStream;

import Grammar.ifdefParser.rule_return;

public class mainifdef {

    public static void main(String[] args) throws RecognitionException {
        CharStream stream=null;
        try {
            stream = new ANTLRFileStream("src/input/test.txt");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        ifdefLexer lexer = new ifdefLexer(stream);
        TokenStream tokenStream = new CommonTokenStream(lexer);
        ifdefParser parser = new ifdefParser(tokenStream);
        rule_return evaluator = parser.rule();

        System.out.println("Parsing Tree is \n" + evaluator.tree.toStringTree() + "\n");
        System.out.println("Evaluation is \n" + evaluator.strEval + "\n");

    }
} 
```

输入文件内容如下：

> #undef Z
> set AB = "toto";
> 设置 CD = "titi";
> 
> 差异（CD，“essai”）
> #ifdef（Z）添加（#end
> 
> 添加（AB，差异（CD，“essai”））

结果控制台符合预期

> ifdef 内容是：
> 
> 解析树是
> #undef Z set AB = "toto" ; 设置 CD = "titi" ; diff (CD, "essai") #ifdef (Z) add (#end add (AB, diff(CD, "essai"))
> 
> 评价为
> “titi”-“essai”
> “toto”+“titi”-“essai”

我的问题是如何评估应该给出相同结果的输入文本：

> #undef Z
> set AB = "toto";
> 设置 CD = "titi";
> 
> 差异（CD，“essai”）
> #ifdef（Z）添加（#end
> 
> 添加（AB，#ifdef（Z）添加（#else diff（#end CD，“essai”））

结果控制台是（这是正常的 ANTLR 行为）：

> ifdef 内容是：
> 
> src/input/test.txt 行 8:11 在输入 '#' 处没有可行的替代方案
> src/input/test.txt 行 8:43 在 'CD'
> ifdef content is : diff(
> 
> 解析树是
> #undef Z set AB = "toto" ; 设置 CD = "titi" ; diff ( CD , " essai " ) # ifdef ( Z ) add ( # end add ( AB , < unexpected: [@59,94:94='#',< 6 >,8:11], resync=# > <缺少')'> # ifdef ( Z ) add ( # else diff ( # end <缺少EOF >
> 
> 评价为
> “titi”-“essai”
> “toto”+null

一些从哪里开始的指导将更加感激
问候 JPM

# java - Jtable 标头失真

> ID：14547496
> 
> 赞同：-3
> 
> 时间：2013-01-27T12:49:12.930
> 
> 标签：java, swing, netbeans, jtable, jtableheader

当我调用该方法`updateTable()`时，表格会正确显示，但是当我水平滚动表格时，一些标题会失真（错误的标题/标题相互重叠。）。

我正在使用 Netbeans 我该怎么办？

```
public void  updateTable(String query)
{        
   try
   {     
     String sql=query;            
     PreparedStatement pst=connectionVariable.prepareStatement(sql);
     ResultSet res=pst.executeQuery();               
     myTable.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
     JScrollPane scrollpane = new JScrollPane(myTable);
     scrollpane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
     scrollpane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
     myTable.setModel(DbUtils.resultSetToTableModel(res));
     pst.close();
     res.close();
   }
   catch(Exception e) { JOptionPane.showMessageDialog(null,""+e+"","Error Updating Table",JOptionPane.ERROR_MESSAGE);  }
}

public loadTableAsPerSelection() 
{
  initComponents();
  String load_table="Select columnnames from tablenames";
  updateTable(load_table);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:52:13.147

好的，这是一个 40 列和 2000 行的示例，它按预期工作：

```
import java.awt.BorderLayout;
import java.util.Vector;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.DefaultTableModel;

public class TestTable2 {

    protected void initUI() {
        DefaultTableModel model = new DefaultTableModel();
        for (int i = 0; i < 40; i++) {
            model.addColumn("Col-" + (i + 1));
        }
        for (int i = 0; i < 2000; i++) {
            Vector<Object> row = new Vector<Object>();
            for (int j = 0; j < 40; j++) {
                row.add("Cell " + (i + 1) + "," + (j + 1));
            }
            model.addRow(row);
        }
        JTable table = new JTable(model);
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        JFrame frame = new JFrame(TestTable2.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JScrollPane scrollpane = new JScrollPane(table);
        scrollpane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);
        frame.add(scrollpane, BorderLayout.CENTER);
        frame.setSize(1000, 800);
        frame.setVisible(true);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable2().initUI();
            }
        });
    }

} 
```

# android - 对齐图标和 Listview 项目中的标题

> ID：14547499
> 
> 赞同：0
> 
> 时间：2013-01-27T12:49:40.980
> 
> 标签：android

我正在为我在 android 上的研究项目设计我的界面。所以我添加了 facebook 类侧导航列表视图。但是当项目被添加到列表视图时，它不会水平居中对齐。我需要在同一水平线上获取图标原点和标题。请善意地为我的问题提供解决方案。下面提供了我的代码。我很抱歉我的英语。

这是我当前界面的图像。请参阅设置按钮。设置字有点上行。我需要在同一行中水平对齐图标和设置字。

[图片在这里 http://sphotos-e.ak.fbcdn.net/hphotos-ak-ash4/485944_4792129535506_1863888545_n.jpg](http://sphotos-e.ak.fbcdn.net/hphotos-ak-ash4/485944_4792129535506_1863888545_n.jpg)

`slide.xml`- 列表视图的所有项目都包含在此处

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@+id/item_one"
    android:icon="@drawable/settings"
    android:title="@string/item_one"
    android:top="30dp"
   >
</item>

    <item
    android:id="@+id/item_two"
    android:icon="@drawable/ic_launcher"
    android:title="@string/item_three">
</item>

<item
    android:id="@+id/item_three"
    android:icon="@drawable/ic_launcher"
    android:title="@string/item_three">
</item>
<item
    android:id="@+id/item_four"
    android:icon="@drawable/ic_launcher"
    android:title="@string/item_four">
</item>

 <item
    android:id="@+id/item_five"
    android:icon="@drawable/ic_launcher"
    android:title="@string/item_one">
</item>
<item
    android:id="@+id/item_six"
    android:icon="@drawable/ic_launcher"
    android:title="@string/item_two">
</item>
<item
    android:id="@+id/item_seven"
    android:icon="@drawable/ic_launcher"
    android:title="@string/item_three">
</item>
<item
    android:id="@+id/item_eight"
    android:icon="@drawable/ic_launcher"
    android:title="@string/item_four"
   >
</item>
</menu> 
```

`slidemenu.xml`- 列表视图在这里

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     >

    <LinearLayout
        android:layout_width="260dip"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:background="#2c323f"

         >

        <ImageView
            android:id="@+id/menu_header"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left" 
            android:layout_marginTop="10dp"

            android:layout_marginBottom="10dp"
            android:layout_marginLeft="10dp"
            />

        <ListView
            android:id="@+id/menu_listview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:scrollbars="none"
            android:background="#2c323f"
            android:fadingEdge="none"
            android:overScrollMode="never"
            android:listSelector="#454b5d"
            android:divider="@layout/divider"
            android:dividerHeight="1sp"
            android:cacheColorHint="#2c323f"

             />
    </LinearLayout>

    <FrameLayout
        android:id="@+id/overlay"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </FrameLayout>

</LinearLayout> 
```

这是我的活动课

```
package com.coboltforge.slidemenuexample;

import com.coboltforge.slidemenu.SlideMenu;
import com.coboltforge.slidemenu.SlideMenu.SlideMenuItem;
import com.coboltforge.slidemenu.SlideMenuInterface.OnSlideMenuItemClickListener;

import android.app.Activity;
import android.os.Bundle;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity implements OnSlideMenuItemClickListener {

    private SlideMenu slidemenu;
    private final static int MYITEMID = 42;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        /*
         * There are two ways to add the slide menu: 
         * From code or to inflate it from XML (then you have to declare it in the activities layout XML)
         */
        // this is from code. no XML declaration necessary, but you won't get state restored after rotation.
//      slidemenu = new SlideMenu(this, R.menu.slide, this, 333);
        // this inflates the menu from XML. open/closed state will be restored after rotation, but you'll have to call init.
        slidemenu = (SlideMenu) findViewById(R.id.slideMenu);
        slidemenu.init(this, R.menu.slide, this, 333);

        // this can set the menu to initially shown instead of hidden
//      slidemenu.setAsShown(); 

        // set optional header image
        slidemenu.setHeaderImage(getResources().getDrawable(R.drawable.ic_launcher));

        // this demonstrates how to dynamically add menu items
        SlideMenuItem item = new SlideMenuItem();
        item.id = MYITEMID;
        item.icon = getResources().getDrawable(R.drawable.ic_launcher);
        item.label = "Dynamically added item";
        slidemenu.addMenuItem(item);

        // connect the fallback button in case there is no ActionBar
        Button b = (Button) findViewById(R.id.buttonMenu);
        b.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                slidemenu.show();
            }
        });

    }

    public void onSlideMenuItemClick(int itemId) {

        switch(itemId) {
        case R.id.item_one:
            Toast.makeText(this, "Item one selected", Toast.LENGTH_SHORT).show();
            break;
        case R.id.item_two:
            Toast.makeText(this, "Item two selected", Toast.LENGTH_SHORT).show();
            break;
        case R.id.item_three:
            Toast.makeText(this, "Item three selected", Toast.LENGTH_SHORT).show();
            break;
        case R.id.item_four:
            Toast.makeText(this, "Item four selected", Toast.LENGTH_SHORT).show();
            break;
        case MYITEMID:
            Toast.makeText(this, "Dynamically added item selected", Toast.LENGTH_SHORT).show();
            break;
        }

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch(item.getItemId()) {
        case android.R.id.home: // this is the app icon of the actionbar
            slidemenu.show();
            break;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T12:56:28.127

您可以使用

```
android:gravity="center" (or top/bottom/left/right depending your needs) 
```

您的 textview 以将文本对齐到您想要的位置。

> layout_gravity 设置视图或布局在其父级内部的重力（对齐）。如果你在线性布局中有一个文本视图，那么设置文本视图的 layout_gravity 将改变它在布局中的对齐方式。重力设置应用它的视图或布局的内容的对齐方式。如果您希望文本（在文本视图中）左对齐、居中或右对齐，请修改文本视图的重力属性。

来自：[http ://thinkandroid.wordpress.com/2010/01/14/how-to-position-views-properly-in-layouts/](http://thinkandroid.wordpress.com/2010/01/14/how-to-position-views-properly-in-layouts/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:08:50.397

> 设置字有点上行。我需要在同一行中水平对齐图标和设置字

我猜你使用[这个库](https://github.com/bk138/LibSlideMenu)。问题是您无法访问用于滑动菜单适配器的行视图的布局文件来修改它。但是，如果您复制库的代码（由很少的文件组成）并将其直接放入您的项目中，您可以轻松解决这个问题。然后`slidemenu_listitem.xml`像这样修改文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/menu_icon"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_marginBottom="10dip"
        android:layout_marginLeft="10dip"
        android:layout_marginRight="5dip"
        android:layout_marginTop="10dip" />

    <TextView
        android:id="@+id/menu_label"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:layout_marginBottom="10dip"
        android:layout_marginTop="10dip"

        android:textSize="24dp" />

</LinearLayout> 
```

当然，您始终可以向用户提出功能请求，以便库如何修改它，以便您可以将自己的布局文件插入库中（并等待发生这种情况）。

# oracle - 如何在命令提示符下美化来自 SELECT 查询的输出？

> ID：14547501
> 
> 赞同：12
> 
> 时间：2013-01-27T12:50:11.980
> 
> 标签：oracle, sqlplus

我在命令提示符下运行了简单`select`查询，但输出行不是一行。见下文：

```
SQL> set pagesize 2000
SQL> select * from xtern_empl_rpt ;

EMP LAST_NAME
--- --------------------------------------------------
FIRST_NAME                                         SSN
-------------------------------------------------- ---------
EMAIL_ADDR
--------------------------------------------------------------------------------

YEARS_OF_SERVICE
----------------
001 Hutt
Jabba                                              896743856
jabba@thecompany.com
              18

002 Simpson
Homer                                              382947382
homer@thecompany.com
              20

003 Kent
Clark                                              082736194
superman@thecompany.com
               5

004 Kid
Billy                                              928743627
billythkid@thecompany.com
               9

005 Stranger
Perfect                                            389209831
nobody@thecompany.com
              23

006 Zoidberg
Dr                                                 094510283
crustacean@thecompany.com
               1

6 rows selected.

SQL> 
```

你能帮我把每一行都放在一行吗？

***编辑***

我在下面尝试过，但仍然没有美化。

```
SQL> SET LINESIZE 4000
SQL> select * from xtern_empl_rpt ;

EMP LAST_NAME                                          FIRST_NAME
                          SSN       EMAIL_ADDR
                                                         YEARS_OF_SERVICE
--- -------------------------------------------------- -------------------------
------------------------- --------- --------------------------------------------
-------------------------------------------------------- ----------------
001 Hutt                                               Jabba
                          896743856 jabba@thecompany.com
                                                                       18
002 Simpson                                            Homer
                          382947382 homer@thecompany.com
                                                                       20
003 Kent                                               Clark
                          082736194 superman@thecompany.com
                                                                        5
004 Kid                                                Billy
                          928743627 billythkid@thecompany.com
                                                                        9
005 Stranger                                           Perfect
                          389209831 nobody@thecompany.com
                                                                       23
006 Zoidberg                                           Dr
                          094510283 crustacean@thecompany.com
                                                                        1

6 rows selected.

SQL> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T13:20:55.843

设置列宽以适应屏幕

例如：

```
column EMAIL_ADDR format a30 
```

其中 a 是 hte 列宽。您可以使用 WRA 来包装列，例如

```
column EMAIL_ADDR format a30 WRA 
```

或`TRU`截断，`WOR`打破单词边界

例如：

```
SQL> select * from emp;

        ID FIRST_NAME
---------- ------------------------------
LAST_NAME
------------------------------
EMAIL_ADDR
--------------------------------------------------
         1 Dazza
Smith
d_dazzal@dazzal.com 
```

因此输出有点难以阅读，因为 email_addr 被填充到 300 个字符（因为我的表将其定义为 sql*plus 用于格式化输出的 varchar2(300)）。

首先设置一个合适的linesize：

```
 SQL> set linesize 100 
```

现在让我们设置列，使它们适合一行（linesize 应该大于总 col 宽度）：

```
 SQL> column email_addr format a30 
   SQL> column last_name format a20 
   SQL> column first_name format a20 
   SQL> select * from emp;

            ID FIRST_NAME           LAST_NAME            EMAIL_ADDR
    ---------- -------------------- -------------------- ------------------------------
             1 Dazza                Smith                d_dazzal@dazzal.com 
```

所以现在这些列很容易安装到一个合理大小的终端上。

在您的情况下`first_name`，并且`last_name`是 varchar2(50)，但其中的数据要小得多，所以我将从`column first_name format a15`（与 last_name 相同）开始。使用电子邮件，您的列是 varchar2(100)，但最大输出为 25 个字符，因此`column email format a25`请作为首发。

如果你这样做了，你应该得到输出（如果 linesize 足够高），如：

```
SQL> select * from xtern_empl_rpt ;

EMP LAST_NAME       FIRST_NAME     SSN       EMAIL_ADDR                YEARS_OF_SERVICE
--- --------------- -------------- --------- ------------------------- ----------------
001 Hutt            Jabba          896743856 jabba@thecompany.com      18 
```

最后按要求。`WRA` `TRU`和`WOR`。`WRA`顺便说一句，它是默认的，所以你不必使用它，但可以说我们有：

```
SQL> select * from test;

A
--------------------------------------
THIS IS A SIMPLE WRAPPING TEST 
```

但我想将其格式化为 10 个字符宽度：

小号

```
QL> col a format a10 WRA
SQL> select * from test;

A
----------
THIS IS A
SIMPLE WRA
PPING TEST 
```

这`WRA`意味着只需将字符串切成 10 个字符，无论我们是否在单词中间。如果我们只想在词尾上打断（如果可能的话，单词 > 10 仍然需要打断）：

```
SQL> col a format a10 WOR
SQL> select * from test;

A
----------
THIS IS A
SIMPLE
WRAPPING
TEST 
```

现在输出在字边界处中断，不一定在 10 个字符处。

如果我们只想要前 10 个字符而不需要换行，我们可以使用`TRU`：

```
SQL> col a format a10 TRU
SQL> select * from test;

A
----------
THIS IS A 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-09T20:33:39.663

这应该可以解决您的问题：

```
set wrap off 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-27T12:53:12.560

尝试类似：

```
SET LINESIZE 120 
```

（调整`120`到所需的最大宽度。）

# c# - DataGridView 中的 AutoScrollPosition 替代方案

> ID：14547508
> 
> 赞同：0
> 
> 时间：2013-01-27T12:50:53.893
> 
> 标签：c#, winforms, datagridview

我有一点需要像这样传递 AutoScrollPosition：

```
 pt = new Point(innerPanel.AutoScrollPosition.X, innerPanel.AutoScrollPosition.Y); 
```

但问题是DataGridView 没有AutoScrollPosition，只有AutoScrollOffset。当我尝试时：

```
 pt = new Point(dataGridView1.AutoScrollOffset.X, dataGridView1.AutoScrollOffset.Y); 
```

没发生什么事。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:04:48.270

根据[AutoScrollOffset 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.autoscrolloffset.aspx)：

> 指定滚动位置的 Point。默认是控件的左上角。

所以就这样做：

```
Point PT = dataGridView1.AutoScrollOffset; 
```

您可能还想试试这个：

```
Point PT = New Point(dataGridView1.FirstDisplayedScrollingRowIndex,dataGridView1.FirstDisplayedScrollingColumnIndex); 
```

# arrays - 将秩为 2 的数组转换为秩为 1 的数组

> ID：14547514
> 
> 赞同：0
> 
> 时间：2013-01-27T12:51:56.640
> 
> 标签：arrays, multidimensional-array, fortran

我有以下最小示例：

```
 program main

      double precision, dimension(3)   :: rankone
      double precision, dimension(3,1) :: ranktwo

      double precision, dimension(3)   :: output

      rankone = 1
      ranktwo = 2

      output = rankone + ranktwo

      print *, 'output: ', output

      end program main 
```

是否有像`squeeze`Matlab 中那样从变量中删除单例维度的函数`ranktwo`。我正在寻找类似的东西

```
 output = rankone + squeeze(ranktwo) 
```

如果没有，此设置是否有任何解决方法？

对于这个问题，不同版本的 Fortran 有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T13:39:51.727

试试这个

```
output = rankone + reshape(ranktwo,[3]) 
```

然后查看文档`reshape`以了解发生了什么。你也可以写

```
output = rankone + ranktwo(:,1) 
```

它将一维数组从`ranktwo`. 根据我的经验`reshape`，通常会导致数组复制，因此可能存在内存使用效率参数来支持第二个版本。

不，对于这个问题，Fortran 版本之间没有区别，3x1 数组与长度为 3 的一维数组的形状不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T10:52:26.170

或者，在 F2003 中，您可以使用 Rank 2 指针指向您的 Rank 1 数组，如下所示：

```
program main

  double precision, dimension(3), target   :: rankone
  double precision, dimension(3,1) :: ranktwo
  double precision, dimension(3,1)   :: output
  double precision, pointer :: pp(:,:)

  rankone(:) = 1
  ranktwo(:,:) = 2
  pp(1:size(rankone),1:1) => rankone

  output = pp + ranktwo

  print *, 'output: ', output

end program main 
```

如果我没记错的话，另一个方向（通过一级指针指向二级数组）仅在 Fortran 2008 中有效。

# ruby-on-rails - 如何查找未通过新验证的旧记录？

> ID：14547515
> 
> 赞同：5
> 
> 时间：2013-01-27T12:52:01.817
> 
> 标签：ruby-on-rails

我最近在一个 Rails 应用程序中发现了一个与连接表中的重复条目相关的问题。该应用程序具有教育意义，包括学生模型和练习模型。连接表跟踪哪些练习已分配给哪些学生。将一个练习多次分配给一个学生是没有意义的（即，不应允许连接表中的重复条目）。

我通过向连接表添加唯一性验证来部分解决了这个问题（参见下面的最后一行代码）。此验证将防止将来创建任何新的重复条目。但是，我仍然面临解决表中现有重复项的问题。

有没有办法对整个现有数据库运行新的验证，以检索所有不再有效的记录？

```
class Student < ActiveRecord::Base
  has_many :student_exercise_assignments
  has_many :exercises, :through => :student_exercise_assignments
end

class Exercise < ActiveRecord::Base
  has_many :student_exercise_assignments
  has_many :students, :through => :student_exercise_assignments
end

class StudentExerciseAssignment < ActiveRecord::Base
    belongs_to :student
    belongs_to :exercise
    validates :exercise_id, :uniqueness => { :scope => :student_id, :message => "An exercise can only be assigned to a student once" } 
```

*更新*

Shioyama 在下面的回答正是我正在寻找的信息。`&`不过，作为 Rails 新手，我对他使用in有点困惑`&:invalid?`。如果有人需要 Ruby 中的运算符入门，[这里](https://stackoverflow.com/q/1961030/765287)`&`有一本很好的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T13:03:17.963

怎么样：

```
invalid_assignments = StudentExerciseAssignment.select(&:invalid?) 
```

[`invalid?`](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/validations.rb#L305)这将选择使用该方法调用时返回 true 的所有分配。然后，您可以做任何您需要做的事情来修复它们。

作为旁注，我还建议向您的数据库添加唯一性约束。请参阅此答案以了解原因：[Rails: Validation in model vs migration](https://stackoverflow.com/questions/13122791/rails-validation-in-model-vs-migration/13123347#13123347)

# ruby - 类中的收益 << 类中的自我方法

> ID：14547516
> 
> 赞同：2
> 
> 时间：2013-01-27T12:52:08.023
> 
> 标签：ruby, metaprogramming

我想创建一个类方法，它接受一个方法定义块并将其注入到类中。现在，`self`确实是`Tom`对象，所以`class << self`确实打开了它，但`yield`似乎不起作用。我的理论知识不是那么深，所以我不确定为什么这不起作用。我可能完全错了，所以请随时讨论替代方案。

```
class Tom < Person
  mega_methods do
    def hiya!
      puts 'hiYA!'
    end
  end
end

class Person
  def self.mega_methods
    ...
    class << self
      yield
    end
  end
end

Tom.hiya! 
```

我知道我可以只定义使用中的方法`Tom`或`class << self`可以包含`class << self`在块中的方法。

我还想出了这个替代方案：

```
def self.mega_methods &block
  if block_given?
    extension =  Module.new(&Proc.new)
    self.extend(extension)
  end
end 
```

这个问题更多的是帮助我理解 Ruby 的工作原理，而不是解决一个特定的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T13:38:23.333

这有点奇怪，但如果你正在探索 Ruby，那就可以了。

```
class Person
  puts "evaluating Person's body ..."
  def self.mega_methods
      puts 'in Person#self.mega_methods, about to yield ...'
      yield
  end
end

class Tom < Person
  puts "evaluating Tom's body ..."
  print 'Tom.singleton_methods : '; p Tom.singleton_methods
  mega_methods do
    puts 'in Tom, about to define self.hiya!'
    def self.hiya!
      puts 'hiYA!'
    end
  end
  print 'Tom.singleton_methods : '; p Tom.singleton_methods
end

Tom.hiya! 
```

执行 ：

```
$ ruby -w t.rb 
evaluating Person's body ...
evaluating Tom's body ...
Tom.singleton_methods : ["mega_methods"]
in Person#self.mega_methods, about to yield ...
in Tom, about to define self.hiya!
Tom.singleton_methods : ["mega_methods", "hiya!"]
hiYA! 
```

请注意，按照惯例，方法名称中的感叹号是为销毁方法保留的，例如`String#sub!`修改接收器字符串的方法。

另请参阅[def `self.function` 名称是什么意思？](https://stackoverflow.com/questions/13706373/what-does-def-self-function-name-mean/13709911#13709911)

一切都是为了自己！

```
class Person2
  def self.mega_methods
    print 'in Person2 self='; p self
    class << self
      print 'in class << self self='; p self
      yield
    end
  end
end

class Tom2 < Person2
  mega_methods do
    puts "in Tom2, about to define self.hiya! for self=#{self}"
    def self.hiya!
      puts 'hiYA!'
    end
    def hi
      puts 'hi'
    end
  end
end

print 'Tom2.singleton_methods : '; p Tom2.singleton_methods
print 'Tom2.instance_methods  : '; p Tom2.instance_methods(false)
Tom2.hiya!
Tom2.new.hi 
```

执行 ：

```
$ ruby -w t2.rb 
in Person2 self=Tom2
in class << self self=#<Class:Tom2>
in Tom2, about to define self.hiya! for self=Tom2
Tom2.singleton_methods : ["mega_methods", "hiya!"]
Tom2.instance_methods  : ["hi"]
hiYA!
hi 
```

# python - 如何在金字塔框架上显示带有 tweepy 的推文？

> ID：14547517
> 
> 赞同：0
> 
> 时间：2013-01-27T12:52:21.173
> 
> 标签：python, django, twitter, pyramid, tweepy

我有下一个代码：

```
from wsgiref.simple_server import make_server
from pyramid.config import Configurator
from pyramid.response import Response
import tweepy

consumer_key=""
consumer_secret=""
access_key = ""
access_secret = "" 

def twitterfeed():
    auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
    auth.set_access_token(access_key, access_secret)
    api = tweepy.API(auth)
    statuses = tweepy.Cursor(api.friends_timeline).items(20)
    for status in statuses:
        return list(str(status.text)) 
```

这个 twitterfeed() 方法正在 bash/console 上运行，并显示我和我的订阅者的最新推文。但是当我想在页面上显示这条推文时：

```
if __name__ == '__main__':
    config = Configurator()
    config.add_route('hello', '{name}')
    config.add_view(twitterfeed(), route_name='hello')
    app = config.make_wsgi_app()
    server = make_server('0.0.0.0', 8080, app)
    server.serve_forever() 
```

它向我显示`pyramid.exceptions.ConfigurationExecutionError: <type 'exceptions.AttributeError'>: 'list' object has no attribute '__module__' in: Line 24`错误

我该如何解决？如果你有来自 django 的工作示例，它可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T12:53:51.133

您应该注册*函数*，而不是函数的结果：

```
config.add_view(twitterfeed, route_name='hello') 
```

否则，您将尝试将返回的列表注册`twitterfeed`为视图。

请注意，您的函数也需要接受`request`参数；它也必须返回一个响应对象。将其更改为：

```
from pyramid.response import Response

def twitterfeed(request):
    auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
    auth.set_access_token(access_key, access_secret)
    api = tweepy.API(auth)
    statuses =  tweepy.Cursor(api.friends_timeline).items(20)

    return Response('\n'.join([s.text.encode('utf8') for s in statuses])) 
```

我冒昧地将推文编码为 UTF8，而不是让 Python 为它们选择默认编码（如果推文中有任何国际字符，这将导致 UnicodeEncodeError 异常）。

在继续之前，您真的想阅读[金字塔视图](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/views.html)。

顺便说一句，您的命令行版本仅将*第一*条推文作为单个字符 ( `return list(str(status.text))`) 的列表返回。

# facebook - 如何将gwt应用程序转换为fb？

> ID：14547520
> 
> 赞同：-1
> 
> 时间：2013-01-27T12:52:29.157
> 
> 标签：facebook, gwt

我开发了一个 GWT 应用程序并托管在 Google app-spot 中，我想知道有什么方法可以将其转换/转移到 Facebook 应用程序中吗？或者是否可以在 GWT 上开发 Facebook 应用程序？坦率地告诉我你对这些事情的想法和了解.. 谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T22:01:48.397

是的，有可能 。Java 脚本适用于浏览器，最终您的 GWT 代码将转换为 javascript 。

您的 javascript 代码将显示在 facebook 应用程序入口点页面“Canvas Page”上。

所以有可能

有关 facebook 应用程序的快速示例

[http://gathadams.com/2007/06/18/how-to-write-a-facebook-application-in-10-minutes/](http://gathadams.com/2007/06/18/how-to-write-a-facebook-application-in-10-minutes/)

祝一切顺利 。

# java - 写入图像时出现问题，然后在 Java 中打印到 SVG

> ID：14547530
> 
> 赞同：2
> 
> 时间：2013-01-27T12:53:23.623
> 
> 标签：java, printing, svg, bufferedimage

作为我正在编写的程序的一部分，我希望将图像打印为 SVG 格式。我需要它是 SVG 格式，以便以后可以使用 Adob​​e Illustrator 对其进行修改。就目前而言，虽然我可以直接在 print 方法中绘制一个矩形并将其成功导出为 SVG 格式。

当我在我的`getTagCloud`方法中绘制相同的矩形时，结果（当打印到 SVG 时）是一个由大量小矩形组成的矩形。我不知道为什么会这样，尽管希望答案对阅读本文的人来说是显而易见的！

最终，我需要打印的不仅仅是一个矩形，但 Illustrator 中导出的“组”太大（包含所有这些不同大小的小矩形），我无法找到我绘制的其他对象（如一切，无论我最初使用什么颜色，都呈现为黑色）。任何帮助将不胜感激。下面是相关代码。我没有包含导入语句，因为我在编译代码时没有任何问题。

```
public class TagCloud {

  public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI(); 
        }
    });
}

public static void createAndShowGUI() {
    System.out.println("Created GUI on EDT? "+
    SwingUtilities.isEventDispatchThread());
    JFrame f = new JFrame("Tag Cloud Generator");
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    MyPanel myPanel = new MyPanel();

    Toolkit tk = f.getToolkit();       
    Dimension wndSize = tk.getScreenSize();  

    f.setBounds(0, 0,   
                      wndSize.width, wndSize.height); 
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.addWindowListener(new WindowAdapter() {
           public void windowClosing(WindowEvent e) {System.exit(0);}
        });

    f.add("Center",myPanel);
    f.pack();
    f.setVisible(true);
    myPanel.printTagCloud();

}

}

class MyPanel extends JPanel implements Printable{

private int squareX = 50;
private int squareY = 50;
private int squareW = 20;
private int squareH = 20;
private int x_offset = 30;
private int y_offset = 30;
private BufferedImage img = null;
private int defaultFontSize = 16;

public int print(Graphics g, PageFormat pf, int page) throws
                                                    PrinterException {

    if (page > 0) { /* We have only one page, and 'page' is zero-based */
        return NO_SUCH_PAGE;
    }

    Graphics2D g2d = (Graphics2D)g;
    g2d.translate(pf.getImageableX(), pf.getImageableY());

    if (img == null){
        getTagCloudImage();

    } 
    g.setColor(Color.red);
    g.fillRect(0, 0, 250, 400);
    //g.drawImage(img, 0, 0, null);
    g.dispose();

    return PAGE_EXISTS;
}

public void printTagCloud(){

    PrinterJob job = PrinterJob.getPrinterJob();
    PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();
    PageFormat pf = job.pageDialog(aset);
    job.setPrintable(this);
    boolean ok = job.printDialog(aset);
    if (ok) {
        try {
             job.print(aset);
        } catch (PrinterException ex) {

        }
    }
}

public MyPanel() {
    setBorder(BorderFactory.createLineBorder(Color.black));

    addMouseListener(new MouseAdapter() {
        public void mousePressed(MouseEvent e) {
            moveSquare(e.getX(),e.getY());
        }
    });

    addMouseMotionListener(new MouseAdapter() {
        public void mouseDragged(MouseEvent e) {
            moveSquare(e.getX(),e.getY());
        }
    });
}

private void moveSquare(int x, int y) {

    int OFFSET = 1;
    if ((squareX!=x) || (squareY!=y)) {
        repaint(squareX,squareY,squareW+OFFSET,squareH+OFFSET);
        squareX=x;
        squareY=y;
        repaint(squareX,squareY,squareW+OFFSET,squareH+OFFSET);
    } 
}

public Dimension getPreferredSize() {
    return new Dimension(1000,800);
}

public void paintComponent(Graphics g) {
    super.paintComponent(g); 
if (img == null){
    getTagCloudImage();
    } 
else{

    g.drawImage(img, x_offset, y_offset, null);
}

}

public void getTagCloudImage(){

img = new BufferedImage(250, 250, BufferedImage.TYPE_INT_RGB); 

Graphics g = img.getGraphics();
Graphics2D g2 = (Graphics2D)g;

Rectangle r = new Rectangle (0,0,250,250);
g2.draw(r);
g2.setColor(Color.black);
g2.fill(r);
g2.dispose();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T22:05:03.573

如果不了解 Java `BufferedImage`、和其他相关类的实现`Graphics`，我将无能为力。`PrinterJob`（您可能会为这个问题开始赏金，以引起对 java awt 图形内容有更多内在知识的人的注意）。

正如您显然必须注意到的那样，使用`BufferedImage`（或不使用）是 SVG 输出的不同之处。在有效的版本中，您可以直接在`Graphic`作为方法参数提供给您的上下文上绘制矩形`print()`，我相信这就是它被设计为供`Printable`界面和打印框架的作者使用的方式。

在第二种方法（不正确）中，您首先将矩形绘制到新 `BufferedImage`对象上，然后在提供的`Graphic`上下文中绘制此图像。所以你做的事情远没有直接在上下文中绘制那么简单。开发人员有一个众所周知的事实或直觉，即您使用某些 API 的方式越不直接，您做其作者意想不到的事情的机会就越大:(。

我的假设如下：是（正如你可以从它的[Javadocs](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html)`BufferedImage`中推断出来的）只是一个光栅图像，即。像素网格。这就是为什么 svg 文件中填充了许多小矩形（试图模仿像素）。方法提供的对象可能更抽象，对形状而不是像素进行操作，这更适合写入SVG等矢量图形格式。但这只是假设。`Graphics``draw()`

问题是，你真的需要使用`BufferedImage`吗？如果我理解正确，您希望用户能够在屏幕上编辑矩形，并在准备好时将其导出为 SVG。你不能只记住用户编辑的矩形的左上角和尺寸，然后使用这些数据直接在`Graphics`提供的对象上重新创建这个矩形`print()`，比如：

```
public int print(Graphics g, PageFormat pf, int page)
  throws PrinterException {
...
  g.fillRect(userRect.x,userRect.y,userRect.width,userRect.height);
...
} 
```

?

（`userRect`是您自己的自定义类的对象，它只存储有关用户编辑的图像的数据）

# matlab - 不同的线程块定义

> ID：14547532
> 
> 赞同：0
> 
> 时间：2013-01-27T12:53:31.187
> 
> 标签：matlab, cuda, gpu

在 VS 2010 上测试代码时，我使用 matlab 中的 PTX 调用 CUDA 内核，如下所示：

```
int TPB = 256; 
int BPG = (Nx + TPB -1 ) / TPB;
dim3 blk(TPB,TPB,1);
dim3 grid(BPG ,BPG,1);
grad<<< grid,blk>>>(dev_y,dev_x,dev_b,dev_t,Nx,Ny); 
```

尝试在 matlab 中使用相同的配置

```
TPB = 16; 
BPG = floor((Nx + TPB -1 ) / TPB);
grad = parallel.gpu.CUDAKernel('reg.ptx','reg.cu','grad');
grad.ThreadBlockSize=[TPB TPB 1];
grad.GridSize = [BPG BPG]; 
```

知道每个块有超过 512 个线程，这是我的 TESLA C1060 的允许数量，我是对的

```
Invalid size input to kernel ThreadBlockSize. You must provide a vector of up to 3 positive   integers whose product is <= 512\. The maximum value in each dimension is: [512,512,64]. 
```

任何解释为什么它在 VS 2010 上正确运行而没有像 MATLAB 中发生的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:18:20.583

C++ 代码段在 grad<<<>>> 之后不检查错误。MATLAB 包装器具有额外的错误检查。启动配置超出范围。在 <<<>>> 之后调用 cudaGetLastError 会报启动配置错误。

# delphi - 如何使用 Indy 从 POP3 服务器中删除电子邮件？

> ID：14547537
> 
> 赞同：3
> 
> 时间：2013-01-27T12:53:46.060
> 
> 标签：delphi, indy, indy10

我想用 INDY 10 / DELPHI 删除带有特定标头或特定发件人的邮件。我已经可以使用 INDY10 查询我的电子邮件帐户。这是现有的演示代码：

```
procedure TForm1.BtnCheckClick(Sender: TObject);
var
  i: Integer;
  Msg: TIdMessage;
  MailCount: Integer;
begin
  if IdPop31.Connected then
  begin
    MailCount := IdPOP31.CheckMessages;
    lbMailCount.Caption := IntToStr(MailCount);
    lbMailboxSize.Caption := IntToStr(IdPOP31.RetrieveMailBoxSize) + ' Bytes';

    for i := 1 to MailCount do
    begin
      Msg := TIdMessage.Create;
      try
        IdPOP31.RetrieveHeader(i, Msg);
        MailsList.Lines.Add(Msg.Subject + ' from ' + Msg.From.Text);
      finally
        Msg.Free;
      end;
    end;
  end;
end; 
```

# casting - 无法从 Graphics 转换为 Graphics2D

> ID：14547540
> 
> 赞同：0
> 
> 时间：2013-01-27T12:53:52.780
> 
> 标签：casting, graphics2d, importerror

我的程序代码在这里：

```
package Chapter12;

import java.awt.*;
import javax.swing.*;

public class Pv2 extends JPanel {

    public static void main (String []args){

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(500,500);
        frame.setVisible(true);
        frame.setContentPane(new Pv2());

    }

    @Override
    public void paintComponent(Graphics g){

        Graphics2D g2 = (Graphics2D) g;
    }

} 
```

当我尝试编译代码时，Eclipse 会显示此错误。

```
Cannot cast from Graphics to Graphics2D 
```

此错误发生在此行：

```
Graphics2D g2 = (Graphics2D) g; 
```

尝试过 jre 1.6 和 jre 1.7 - 同样的事情。为什么不允许演员表？我什至尝试下载一些准备好的代码，但错误是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:06:13.403

你的代码没有被破坏，这个演员肯定是可能的。以下代码有效：

```
import java.awt.*;
import javax.swing.*;

public class Pv2 extends JPanel {
    public static void main (String []args){
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(200,200);
        frame.setVisible(true);
        frame.setContentPane(new Pv2());
    }
    public void paintComponent(Graphics g){
        Graphics2D g2 = (Graphics2D) g;
        g2.drawLine(0,0, getWidth(), getHeight());
    }
} 
```

![图形演员作品](../Images/1e5a4f887c9110ad144cbe27e3830b6b.png)

一种可能的解释是，您将类命名为完全相同`Graphics`或`Graphics2D`在同一个包中 ( `Chapter12`)。然后，有了导入，这个类将具有优先权；如果不兼容，编译器将拒绝强制转换。我能够通过在同一个包中创建空类并命名它来重现这一点`Graphics2D`。

要解决，请使用显式导入：将导入语句替换为

```
import java.awt.Graphics;
import java.awt.Graphics2D;

import javax.swing.JFrame;
import javax.swing.JPanel; 
```

这将告诉编译器`Graphics`你`Graphics2D`的意思是什么。即使`Graphics2D`类令人困惑，在重写导入后我也不再看到错误，如图所示。

# windows-8 - 无需触摸屏的 Windows 8 商店应用程序开发

> ID：14547542
> 
> 赞同：1
> 
> 时间：2013-01-27T12:54:07.670
> 
> 标签：windows-8, windows-runtime, winrt-xaml, windows-store-apps, winjs

我已经开始为工作中的一些项目进行 Windows 8 应用商店应用程序开发，但我家里没有自己的触摸屏设备。如果我编写个人应用程序提交到商店，我必须使用自己的硬件，因为我不能将工作计算机用于个人项目。我担心会遇到这样一种情况：我向商店提交应用程序，然后让触摸屏用户描述我无法在非触摸屏设备上复制的问题。

使用触摸与仅使用鼠标时，Windows 8 应用商店应用程序中是否存在表现不同的功能或功能或交互？如果我没有触摸屏，是否会遇到无法重现或解决用户问题的情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T14:04:14.580

正如康斯坦丁建议的那样，强烈推荐使用平板电脑。

下一个最好的方法是在 Visual Studio 中使用设备模拟器。它可以让您更改屏幕尺寸，并允许您使用鼠标模拟基本的触摸手势。此 MSDN 链接包含更多信息：[使用 Visual Studio 2012 测试 Windows 8 应用](http://blogs.msdn.com/b/windowsappdev/archive/2012/08/20/testing-windows-8-apps-using-visual-studio-2012.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T13:26:25.330

Microsoft 引入了与指针无关的事件，这意味着无论您使用的是触摸屏、鼠标还是笔，它们都应该以相同的方式运行。这些就是`MSPointer`事件。[这是一些文档](http://blogs.msdn.com/b/ie/archive/2011/09/20/touch-input-for-ie10-and-metro-style-apps.aspx)。对这些事件使用事件处理程序意味着您不应该收到用户对您的应用程序的触摸友好性的抱怨。但是，我仍然强烈建议您获取一个表面并在其上测试您的应用程序。不仅因为触摸友好，还因为性能差异。

# hibernate - Hibernate hql 和会话管理

> ID：14547543
> 
> 赞同：0
> 
> 时间：2013-01-27T12:54:17.920
> 
> 标签：hibernate, hql, sessionfactory

本周我学会了编写休眠程序，如果我的方法是正确的，我不知道。我阅读了很多文章，每一篇 hibernate 文章看起来都有些不同。我正在使用 Hibernate 4，这是从我的数据库中获取数据的正确方法吗？它目前正在工作，但如果这是最好的方法，我不知道 :) 我错过了什么吗？是否有更好/更清洁的方法来获取数据？

```
 @Autowired
private SessionFactory sessionFactory;

public List<UserFigures> getKeyFigure(int userId) {

    Session session = getSessionFactoryDw().openSession();

    String hql = "from Figures " +
                "where UserID = :userId ";

    Query query = session.createQuery(hql);
    query.setParameter("userId", userId);
    List<UserFigures> res = query.list();
    session.close();
    return res;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T13:05:42.107

您的代码的主要问题是不遵守 Java 命名约定、缺少事务以及糟糕的会话处理代码。

鉴于您对@Autowired 的使用，我猜您正在使用 Spring。因此，您应该使用 Spring 会话和事务管理来拥有与当前 Spring 声明性事务相关联的上下文会话（即使用`sessionFactory.getCurrentSession()`而不是）。`sessionFactory.openSession()`

Spring 文档有一整[章专门介绍 Hibernate](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#orm-hibernate)。阅读。

另外，`Figures`应该命名为`Figure`.

# compiler-construction - 编译包含有关编译它的系统的信息？

> ID：14547544
> 
> 赞同：0
> 
> 时间：2013-01-27T12:54:30.687
> 
> 标签：compiler-construction, compilation

当我在 C++ 中为 EX 编译程序时

我可以告诉它是从哪个操作系统编译的吗？或者甚至可以获得更多关于它被编译的电脑的信息？

# c - C winsock 和 _beginthreadex 编译错误

> ID：14547546
> 
> 赞同：1
> 
> 时间：2013-01-27T12:54:34.127
> 
> 标签：c

我有一个丑陋的 C 代码（我是 Windows 下的 C 新手）不要评判我......我让它成为多线程，它从我的网络服务器列表中读取并检查它们是否还活着，我需要快速它是多线程的。搜索了很多谷歌和howtos，我能做的最好的如下：

```
#include <windows.h>
#include <stdio.h>
#include <string.h>
#include <winsock.h>
#include <process.h>
#include <string.h>

#pragma comment(lib, "wsock32.lib")

int isAlive(char *addr)
{
  struct sockaddr_in blah;
  struct hostent *he;
  WSADATA wsaData;
  int i;
  WORD wVersionRequested;
  SOCKET sock;

  char buff[1024];
  char *ex;
  ex="GET /alive.php HTTP/1.0\n\n";
  char *fmsg="ALIVE";  

  wVersionRequested = MAKEWORD(1, 1);
  if (WSAStartup(wVersionRequested , &wsaData)){
    printf("Winsock Initialization failed.\n");
    return(1);
  }

  if ((sock=socket(AF_INET,SOCK_STREAM,0))==INVALID_SOCKET){
    printf("Can not create socket.\n");
    return(1);
  }
  sock = socket(AF_INET,SOCK_STREAM,0);
  blah.sin_family = AF_INET;
  blah.sin_port = htons(80);
  blah.sin_addr.s_addr = inet_addr(addr);

  if ((he=gethostbyname(addr))!=NULL){
    memcpy((char *)&blah.sin_addr.s_addr,he->h_addr,he->h_length);
  }
  else{
    if((blah.sin_addr.s_addr=inet_addr(addr))==-1){
      WSACleanup();
      return(1);
    }
  }

  if (connect(sock,(struct sockaddr*)&blah,sizeof(blah))==0){
    send(sock,ex,strlen(ex),0);
    recv(sock,buff,sizeof(buff),0);
    if(strstr(buff,fmsg)!=NULL){
      printf("ALIVE: %s", addr);
    }
  }

  closesocket(sock);
  WSACleanup();
  _endthreadex(0);
  return(1);
}

int main(int argc,char *argv[])
{
  if(argc!=2){
    printf("Usage: scan <webservers list>\n");
    return(1);
  }

  char *inname = argv[1];
  FILE *infile;
  char line_buffer[BUFSIZ];
  char line_number;
  int numconnect;

  infile = fopen(inname, "r");
  if (!infile) {
    printf("Couldn't open file %s for reading.\n", inname);
    return 0;
  }

  line_number = 0;
  numconnect=20;
  while (fgets(line_buffer, sizeof(line_buffer), infile)) {
    ++line_number;
    //printf("%s", line_buffer);
    unsigned x;
    unsigned tempThreadID;
    for(x=0;x<numconnect;++x){
        _beginthreadex(0, 0, isAlive, line_buffer, 0, &tempThreadID);
    }
  }
  return 0;
} 
```

当我尝试在 VC 10 下编译时，出现以下错误：

> checkalive.c(90)：错误 C2664：“ *beginthreadex”：无法将参数 3 从“int (* _cdecl *)(char *)”转换为“unsigned int (__stdcall *)(void *)”

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:57:42.537

请参阅 MSDN 文档了解[beginthreadex](http://msdn.microsoft.com/en-us/library/kdzttdcb%28v=vs.80%29.aspx)。您需要将签名更改`isAlive`为

```
unsigned int _stdcall isAlive(void *ptr) 
```

`_stdcall`指定不同的调用约定。有关可用选项的列表，请参见[此处](http://support.microsoft.com/kb/100832)。

您可以简单地通过强制转换来检索您的`addr`论点`ptr`：

```
char* addr = (char*)ptr; 
```

# jquery - Rails：ajax 不使用返回的部分视图渲染 div

> ID：14547550
> 
> 赞同：1
> 
> 时间：2013-01-27T12:55:04.787
> 
> 标签：jquery, ruby-on-rails, ajax, partial-views

我正在尝试将`prepend`ajax 请求返回到 div 内容的部分视图。我已经尝试了很长一段时间，但它似乎不想工作。

这是我的 javascript (jquery) 代码：

```
$("#new_post_form").bind "ajax:success", (event, data, xhr) ->
  $("#feed").prepend(data) 
```

创建帖子时，我的控制器将返回部分视图：

```
def create
    @post = Post.new(params[:post])

    respond_to do |format|
      if @post.save
        format.html { redirect_to @post, notice: 'Post was successfully created.' }
        format.js   { render :partial => "posts/post", :locals => {:post => @post}}
        format.json { render json: @post, status: :created, location: @post }
      else
        format.html { render action: "new" }
        format.json { render json: @post.errors, status: :unprocessable_entity }
      end
    end
  end 
```

不知道为什么数据没有被添加到#feed。我相信数据是一个对象而不是一个 html 字符串？

任何帮助表示赞赏。谢谢。

* * *

*额外：* 调用ajax的表单

```
=simple_form_for(@post, :method => "post", :remote => true, :id => "new_post_form") do |f|
  =f.error_notification
  =f.text_area :description, :id => "post_box", :class => "span12"
  %br
  %div{:id=>"post_box_buttons"}
    .input-append
      =f.select("location_id", @college.locations.collect {|r| [ r.name, r.id ] }, { :include_blank => false })
      =f.button :submit, :value => "Submit", :class => "btn btn-primary" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:26:36.333

`simple_form_for`不会`id`以这种方式添加您想要的。你需要：

`=simple_form_for(@post, :method => "post", :remote => true, :html => {id: 'new_post_form'}) do |f|`

# javascript - 我的谷歌地图多边形边界和缩放不起作用

> ID：14547552
> 
> 赞同：1
> 
> 时间：2013-01-27T12:55:12.587
> 
> 标签：javascript, google-maps, google-maps-api-3

我一直在努力使用我的多边形绑定......当我只有标记时它似乎工作我是地图的完整初学者，所以任何帮助将不胜感激！我知道我将硬编码的长纬度放在前面，但我不知道以后如何更新它。我以为我的最后一行代码应该这样做？

```
function initialize() {
    var projpoints = tempstr.split("|");
    var mapDiv = document.getElementById('map-canvas');
    var map = new google.maps.Map(mapDiv, {
            center: new google.maps.LatLng(-26.6532808494364, 27.8769719868429 ),
            zoom: 16,
            mapTypeId: google.maps.MapTypeId.ROADMAP});
    var bounds = new google.maps.LatLngBounds();
    var pt = [];
    for (var j = 0; j < projpoints.length; j++) {
        pt=[];
        var latlongpoints=projpoints[j].split(",");
        for (var i = 0; i < latlongpoints.length; i++) { 
            var lat = (latlongpoints[i].split(" "));
            var latlng = new google.maps.LatLng(lat[1],lat[0]);
            pt.push(latlng);
            bounds.extend(latlng);
            var shape = new google.maps.Polygon({
                paths: pt,
                strokeColor: '#000000',
                strokeOpacity: 0.8,
                strokeWeight: 2,                    
                fillColor: '#808080',                    
                fillOpacity: 0.35    
            });

            shape.setMap(map);    
        }  

        map.setCenter(bounds.getCenter(),map.getBoundsZoomLevel(bounds));

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:36:53.927

除了做之外`bounds.extend`，您可能还需要`map.fitBounds(bounds);`在最后做 a 在您的循环之后。

而且您对 map.setCenter 的调用不正确。这个函数只接受一个参数，一个 LatLng。你通过它两个。我假设你想做：

```
map.setCenter(bounds.getCenter());
map.getBoundsZoomLevel(bounds); 
```

虽然我知道地图对象上没有 getBoundsZoomLevel 函数。

# api - 是否有访问 Chrome 同步数据的 API？

> ID：14547553
> 
> 赞同：20
> 
> 时间：2013-01-27T12:55:22.817
> 
> 标签：api, google-chrome, bookmarks

如果我想创建一个应用程序（不是 Chrome 扩展程序）来访问，比如说，你的 Chrome 同步书签，我是否必须对 Chrome/Chromium 使用的界面进行逆向工程？或者是否有为此发布的 API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-27T16:07:37.967

您可以使用可同步服务 API：
[https ://www.chromium.org/developers/design-documents/sync/syncable-service-api](https://www.chromium.org/developers/design-documents/sync/syncable-service-api)

编辑 2020-03-27 该网站提到信息已过时，并建议改为： [https ://chromium.googlesource.com/chromium/src/+/HEAD/docs/sync/model_api.md](https://chromium.googlesource.com/chromium/src/+/HEAD/docs/sync/model_api.md)

# javascript - 调用 windows.onload 中包含的 js 文件中定义的函数

> ID：14547554
> 
> 赞同：0
> 
> 时间：2013-01-27T12:55:28.947
> 
> 标签：javascript, html

这是场景。我在 js 文件 common.js 中编写了一些函数，并将其包含在另一个 js 文件之上，我们将其命名为 x.js

现在，当我尝试在 window.onload 函数下的 x.js 中调用这些函数（用 common.js 编写）时，控制台中会弹出一个错误，提示引用错误：未定义。

现在，即使我尝试在 common.js 中使用警报 - 它不会弹出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:16:12.043

找到解决方案 - 感谢@markus 提供[链接](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file)。

对此要解决这样的问题：将x.js内容的内容与这些内容：

```
$.getScript("common.js", function(){

   // everything inside x.js here 

}); 
```

现在只需在您的 html 中包含 x.js（已更新）

# android - 如何将文件夹从未修改更改为已修改

> ID：14547555
> 
> 赞同：0
> 
> 时间：2013-01-27T12:55:49.217
> 
> 标签：android

我有一个文件夹中有许多不同文件的情况。如果该文件夹中的任何文件被修改，我想将文件夹从未修改更改为已修改。

当文件夹内的文件发生更改时，我可以调用类似 theFolder.setAsModified(); 但是没有这样的方法。有没有办法做到这一点？

当文件夹的内容被修改时，folder.lastModified() 返回相同的旧值（在 Long 值中，即 ms）。我希望 folder.lastModified() 在其内容被修改时返回一个新值（该值会稍大一些，因为它是较新的）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:29:11.703

public boolean setLastModified (long time) 我一直在寻找。

使用它很简单：

fileOrFolder.setLastModified(yourDateInMilliseconds);

# ios - iOS：每行有多个图像的 TableView (SDWebImage)

> ID：14547570
> 
> 赞同：1
> 
> 时间：2013-01-27T12:58:15.353
> 
> 标签：ios, asynchronous, uitableview, sdwebimage

我对我的分段 tableview 有点绝望。我使用自定义 UITableViewCell 与 4 图像如下图：

![我的自定义 UITableViewCell](../Images/6f5bc864d3e9d08e9d60c249bcb4accf.png)

我尝试通过 SDWebImage 为每个单元格加载图像。

加载过程都在我的自定义 UITableViewCell 中完成 - 而不是在 UITableViewController 中。从`cellForRowAtIndexPath`i just 调用`[cell setup]`在当前单元格中执行以下代码：

```
NSArray *imageViews = [NSArray arrayWithObjects:self.imageView1, self.imageView2, self.imageView3, self.imageView4, nil];

for (int i = 0; i < self.products.count; i++) {

    Product *currentProduct = [self.products objectAtIndex:i];
    UIImageView *currentImageView = [imageViews objectAtIndex:i];

    NSString *thumbURL = [[CommonCode getUnzippedDirectory] stringByAppendingPathComponent:currentProduct.collectionFolderName];
    thumbURL = [thumbURL stringByAppendingPathComponent:thumbFolder];
    thumbURL = [thumbURL stringByAppendingPathComponent:currentProduct.product_photo];

    [currentImageView setContentMode:UIViewContentModeScaleAspectFit];

    [currentImageView setImageWithURL:[NSURL fileURLWithPath:thumbURL]
                   placeholderImage:[UIImage imageNamed:@"placeholder.png"]];
} 
```

图像都存储在文档目录中，并且不大于最大值。500KB。

问题：

我的问题是，当我滚动浏览我的表格视图时，它突然崩溃了，我不知道为什么。为所有异常启用符号断点表明它由于 SDWebImage 中的一行而崩溃。不幸的是，没有调试器输出：（它在分配图像的地方崩溃）

```
UIImage *image = nil;
if ([imageOrData isKindOfClass:[NSData class]])
{
    image = [[UIImage alloc] initWithData:(NSData *)imageOrData];
} 
```

我也尝试通过`dispatch_asnyc`类似的结果加载图像。**是否可能与并发文件操作有关？**

此外，当我快速滚动时，我会收到内存警告，因此我必须清除 SDWebImage 的缓存。同时停在上面提到的 SDWebImage 中的代码行。

我已经在网上搜索了 2 天，但没有找到有用的东西。我很高兴有一些提示可以解决这个问题。如果有人需要其他数据，例如崩溃报告或其他数据，请告诉我，我会尽快提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-10T03:33:24.103

我遇到了同样的问题，但我暂时像下面这样解决了，但它*会导致内存问题，尤其是在 iPhone 4s 上*

```
NSArray *arrImgs = cellModel.thumbnails_qqnews;
if (arrImgs.count > 0) {
    [self.imgView.subviews enumerateObjectsUsingBlock:^(__kindof UIImageView * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
        [obj sd_setImageWithURL:[NSURL URLWithString:arrImgs[idx]] placeholderImage:[UIImage imageNamed:@"placeholdImage"] completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, NSURL *imageURL) {
            if (image != nil) {
                obj.image = [UIImage cutImageWithTargetSize:[NEMulTiNewsCell getImgSize] image:image];
            }
        }];
    }];
} 
```

我认为下载多张图片是不合逻辑的，但我认为的方法是下载多张图片然后在一张图片中绘制多张图片然后显示，但它可能会创建大量代码行。

# math - 如何使用 HLSL 正交化非正交矩阵？

> ID：14547573
> 
> 赞同：0
> 
> 时间：2013-01-27T12:58:27.560
> 
> 标签：math, matrix, hlsl, ps, orthogonal

我只是想知道这是否可以在 ps 着色器中完成。我有一个非正交矩阵，需要正交化它并使用反转置结果。我求助于 matlab，只发现他们的指令有点复杂着色器。它可能会影响性能。那么有解决方案吗？感谢您的任何回复:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:04:58.620

在一般情况下，对于任意矩阵来说，这可能是一项相当复杂的任务，但对于稍微失去正交性的 3x3 矩阵，您可以使用[Gram-Schmidt 过程](http://en.wikipedia.org/wiki/Gram%E2%80%93Schmidt_process)来正交化矩阵的前两个轴并通过叉积推导出第三个轴：

```
Xx Xy Xz
Yx Yy Yz
Zx Zy Zz

X' = X/|X|
Y' = Y"/|Y"|, Y" = Y - X'*dot(X',Y)
Z' = cross(X',Y') 
```

# c - 为什么编译器会给我错误未使用的变量 n？

> ID：14547576
> 
> 赞同：-2
> 
> 时间：2013-01-27T12:58:43.167
> 
> 标签：c, scope, cs50

```
#include <stdio.h>
#include <cs50.h>

int main (void)
{
        printf("Welcome to blabla\n");

// This next part gets user input and checks if the integer given by user is between 1 and 8

        int n;
        do
        {
            printf("Give me a integer between 1 and 8.\n");
            int n = GetInt();
        }
        while (n >= 1 && n <= 8);

        printf("You picked the number %d.\n", n);   

        return(0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T13:00:22.027

改变

```
int n = GetInt(); 
```

和

```
n = GetInt(); 
```

您正在引入第二个`n`具有块范围的变量，该变量将在第一个`}`. 自动对象的生命周期在它被声明的块的末尾结束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T13:00:37.663

您在`n`循环内部重新声明，因此不使用外部声明。这可能不是你想要的。

代替

```
int n = GetInt(); 
```

和：

```
n = GetInt(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T13:00:41.823

这一行：

```
int n = GetInt(); 
```

试图声明一个*新*的局部变量`n`。它与您之前声明的局部变量完全不同：

```
int n; 
```

当您调用 时`GetInt()`，您只想将值分配给*现有*变量，如下所示：

```
n = GetInt(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T13:01:34.223

为什么在 do {} 中再次将 n 声明为 int n ？只需将其更改为：

```
n = GetInt(); 
```

内部 n 的范围是直到 do 的 '}'。之后就再也没有使用过。循环外的 n 是使用的 n

# c++ - 使用 std::sort 对向量进行排序

> ID：14547580
> 
> 赞同：1
> 
> 时间：2013-01-27T12:59:41.073
> 
> 标签：c++

我得到了一个包含对的向量。我的对有模板参数。

```
std::vector<std::pair<T1, T2> > myVector; 
```

我想按对的第二个数据标签对 myVector 进行排序，所以按“值”（T2），而不是“键”（T1）。我在[这里](http://www.cplusplus.com/reference/algorithm/sort/)看到我可以使用这种甜蜜的方法：

```
std::sort(myVector.begin(), myVector.end(), mySortingFunc); 
```

这是我的 sortFunc：

```
bool mySortingFunc (std::pair<T1, T2> pair1,   std::pair<T1, T2> pair2){ 
     return (pair1.second<pair2.second); 
} 
```

它没有编译，给我抛出了 10 公里长的错误。（我使用 g++）有什么建议我应该怎么做？

*   编辑：

实际代码：

```
template<typename T1, typename T2>
class OrderedMMap
{

std::vector<std::pair<T1, T2> > myVector;

public:

bool sortFunc (std::pair<T1, T2> pair1,   std::pair<T1, T2> pair2) { 

    return (pair1.second<pair2.second); 
}

void sortIt()
{
    std::sort(myVector.begin(), myVector.end(), sortFunc);
}
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T13:08:13.727

你`sortFunc`是一个*非静态*成员函数。那就是问题所在。只能在类的对象上调用非静态成员函数；`std::sort`不能为你做到这一点。

简单的解决方法是使功能`static`：

```
static bool sortFunc (std::pair<T1, T2> pair1,   std::pair<T1, T2> pair2) { 
    return (pair1.second<pair2.second); 
} 
```

有了`static`关键字，现在它变成了普通函数，可以在没有类实例的情况下调用，这意味着`std::sort`现在可以工作。

如果函数通过 const 引用接受参数会很好：

```
static bool sortFunc(std::pair<T1,T2> const& p1,std::pair<T1,T2> const& p2) 
{ 
    return p1.second < p2.second; 
} 
```

希望有帮助。

# java - 尝试显示数组时出现 Java 异常

> ID：14547585
> 
> 赞同：0
> 
> 时间：2013-01-27T13:00:15.613
> 
> 标签：java, exception, arraylist

所以我试图创建一个存储形状类型、大小和颜色的数组列表。然后我希望它在终端中输出。这就是我所拥有的，但我不断收到异常：

```
if (e.getSource() == storeData) {
      ShapeItem.add(shapeChoice.getSelectedItem()); //Add shape type
      ShapeItem.add(ShapeSize); //Add shape size
      ShapeItem.add(shapeColor); //Add shape color
}

else if (e.getSource() == showData) {
    while (it.hasNext()) {
        System.out.println(it.next());
    }
} 
```

和声明：

```
ArrayList ShapeItem = new ArrayList(); //Generic ArrayList to Store objects
Iterator it = ShapeItem.iterator(); //Iterator to go through the array 
```

似乎它应该起作用，但发生的事情是这样的：（对不起，巨大的文字墙，但我不知道例外情况下什么是重要的）

```
Exception in thread "AWT-EventQueue-0" java.util.ConcurrentModificationException
    at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:819)
    at java.util.ArrayList$Itr.next(ArrayList.java:791)
    at Main.actionPerformed(Main.java:140)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
Exception in thread "AWT-EventQueue-0" java.util.ConcurrentModificationException
    at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:819)
    at java.util.ArrayList$Itr.next(ArrayList.java:791)
    at Main.actionPerformed(Main.java:140)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
Exception in thread "AWT-EventQueue-0" java.util.ConcurrentModificationException
    at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:819)
    at java.util.ArrayList$Itr.next(ArrayList.java:791)
    at Main.actionPerformed(Main.java:140)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97)
Exception in thread "AWT-EventQueue-0" java.util.ConcurrentModificationException
    at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:819)
    at java.util.ArrayList$Itr.next(ArrayList.java:791)
    at Main.actionPerformed(Main.java:140)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T13:02:56.350

问题是您在创建`ArrayList`. 迭代器将因您向其中添加项目而失效。您应该在需要时创建迭代器，如下所示：

```
else if (e.getSource() == showData) {
    Iterator it = ShapeItem.iterator();
    while (it.hasNext()) {
        System.out.println(it.next());
    }
} 
```

...并完全删除`Iterator`实例变量。

或者更习惯地说，只需使用增强的 for 循环：

```
else if (e.getSource() == showData) {
    for (Object shape : ShapeItem) {
        System.out.println(shape);
    }
} 
```

我*还*建议：

*   将类型、大小和颜色封装到*单个*对象中，例如 type `Shape`，而不是存储三个不同类型的单独值
*   将您的变量名称更改为常规名称（`shapeItems`或只是`shapes`代替`ShapeItem`）
*   将您的变量更改为私有的并且可能`final`
*   可能将变量类型更改为接口`List`而不是具体`ArrayList`类型
*   使用泛型来指示数据的类型

所以：

```
private final List<Shape> shapes = new ArrayList<Shape>(); 
```

然后添加：

```
if (e.getSource() == storeData) {
    shapes.add(new Shape(shapeChoice.getSelectedItem(),
                         shapeSize, shapeColor));
} 
```

并显示：

```
else if (e.getSource() == showData) {
    for (Shape shape : shapes) {
        System.out.println(shape);
    }
} 
```

# android - 对于Android应用程序来说多少个字符串太多了

> ID：14547595
> 
> 赞同：4
> 
> 时间：2013-01-27T13:00:43.373
> 
> 标签：android, string, resources

我正在创建一个语言学习应用程序，我在应用程序中有一个部分将依赖于相当大量的文本。每个活动大约 800 个单词，分布在不同的文本视图中。我打算将段落/句子存储在字符串资源中。这将或多或少等同于每个活动 100 个字符串和大约 10 个活动。

R.jar 文件总共将有 1000 -1500 个单独的字符串 id。这对于应用程序来说是很多还是太多。这会让我的应用程序真的很慢还是基于文本的应用程序是正常的做法？

我知道我可以将数据存储在 sqlite 数据库中，但是预先填充数据库然后过滤结果并将每个字符串以编程方式放置到其相应的视图中将是一个真正的痛苦，我认为会更慢。我宁愿直接从资源中声明 xml 布局中的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:55:23.520

Android为您放置在 Resources 中的所有字符串创建**静态引用，并且应用程序将在启动应用程序时将所有实例加载到内存中。**它不必要的对象创建。您应该为所有单词创建一个数据库，并在需要时使用它们。

# jodatime - 两个日期之间的乔达时间间隔，包括时区

> ID：14547599
> 
> 赞同：12
> 
> 时间：2013-01-27T13:00:54.387
> 
> 标签：jodatime

我使用 JodaTime 库进行时间操作。我有两个日期： 日期一：

```
DateTime time_server = new DateTime(server_time_milisecs).
    withZone(DateTimeZone.forID("Europe/Zurich"));  //+0100 
```

显示：`2013-01-27 13:44:42`

日期二：

```
DateTime time_local = new DateTime(DateTime.now()).
    withZone(DateTimeZone.getDefault());    //Have "Europe/Moscow" timezone  +0400 
```

显示：`2013-01-27 16:41:47`

**我需要找到包括时区在内的真实间隔**

```
Interval interval = new Interval(time_local, time_server);
Long.toString(interval.toDurationMillis())); 
```

结果：174040 毫秒 -**不正确**

```
int secs = Seconds.secondsBetween(time_local,time_server).getSeconds(); 
```

结果：174 秒**不正确**

```
Period period = new Period(time_local, time_server);
Integer.toString(period.getSeconds()) //**Wrong too** 
```

**结果必须是：10974 秒**

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-27T13:34:07.920

如果您需要进行涉及不同时区的时间计算，您应该花一些时间（不是双关语）来掌握 Jodatime 的概念（[例如）。](https://stackoverflow.com/questions/2653567/joda-whats-the-difference-between-period-interval-and-duration?rq=1)

例如，考虑以下代码

```
DateTime nowHere = DateTime.now();
DateTime nowZur = nowHere.withZone(DateTimeZone.forID("Europe/Zurich"));
System.out.println("now Here:   " + nowHere );
System.out.println("now Zurich: " + nowZur  ); 
```

这输出（对我来说，从苏黎世偏移 4 小时）：

```
now Here:   2013-01-27T10:19:24.460-03:00
now Zurich: 2013-01-27T14:19:24.460+01:00 
```

暂停并尝试猜测以下行的输出：

```
Interval interv = new Interval(nowHere, nowZur);
System.out.println("Interval: " + interv.toDurationMillis()); 
```

以上打印`0`（零）。正如它应该。

因为`nowHere`和`nowZur`代表**相同的时间瞬间**（在物理线路时间），如在两个不同的国家所代表的那样。它们的区别仅在于它们的表示方式，但在物理上它们是相同的时间点（就像`2.54 cm`并且`1 in`是相同的长度，以两种不同的形式表示）。

同样，`2013-01-27T10:19:24.460-03:00`并且`2013-01-27T14:19:24.460+01:00`是同一时刻，即我运行该代码的时刻，仅根据不同国家/地区的惯例表示；一个火星人可以用他自己的火星历来代表同一时刻，它仍然是*同一时刻*。

由于这些 DateTime 代表相同的时间点，因此它们之间的物理间隔（持续时间）必须为零。现在，如果你想得到两者之间的“公民时差”，那是完全不同的事情。`LocalDateTime`和（与和`Period`完全不同）将是正确的概念。例如：`DateTime``Duration`

```
Period per=new Period(nowHere.toLocalDateTime(),nowZur.toLocalDateTime());
System.out.println(per.toStandardSeconds().getSeconds()); 
```

这为我打印了 14400（4 个“标准”-不是物理-小时）

# r - 与仅仅编写大量示例相比，正式单元测试的优势是什么？

> ID：14547600
> 
> 赞同：7
> 
> 时间：2013-01-27T13:00:55.690
> 
> 标签：r, unit-testing

R 具有三个开发良好的单元测试包，`RUnit`、`svUnit`和`testthat`. Base R 在其包功能中内置了示例，如果它们没有正确解析，则会返回错误。

我信任的人的意见是，单元测试比编写大量示例要好，但是我不能完全指出单元测试中无法在示例中复制的任何特定功能。

在 R 中使用单元测试框架的哪些特性使其优于使用包示例的*临时等效框架？*

对于那些不是来自 R 世界的人，请注意，每次构建包时都会运行包中每个函数的示例，并且程序员会因任何警告或错误而受苦。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T13:21:31.287

使用单元测试框架，您可以测试您可能不想作为示例向最终用户公开的各种事物：

*   该函数是否会因输入不正确而引发正确的错误？单元测试框架将捕获错误，从而通过测试。
*   单元测试应该旨在获得真正高的代码覆盖率。您可能想要测试所有输入参数的所有组合。

单元测试框架的另一个优点是速度：

*   例如，您可以有选择地在给定文件中运行测试。相反，取决于包输出意味着您需要构建和检查整个包。
*   这可以更快地识别错误并缩短开发周期。

我的典型包将包含几十个（如果不是数百个）测试，但只有几个示例真正展示了包的含义。

总之，我用测试来测试，用例子来教育和帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T13:20:02.860

当然，这取决于您拥有哪种示例，但很可能这些示例并未显示如何不使用代码。单元测试还可以测试负面情况下的行为。

单元测试可能测试较小的部分，因此测试更简单的功能。使用框架的测试通常可以在每次代码更改后自动运行。如果您一直依赖某人运行示例，那么它们迟早会在某个关键时刻被遗忘。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T15:55:14.500

*测试*和*示例*之间的明显区别之一是测试可以成为开发周期的一部分。在测试驱动开发**TDD**中，每个新特性都从编写测试开始。

我不会在这里详细介绍 TDD 概念（我讨厌笼统，并且我认为该主题在文献中得到了很好的发展）但是如果您总是通过为接下来要实现的功能创建失败测试来完成编码会话，那么它将是当您想继续开发时，您更容易从中断的地方继续。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T13:19:24.497

运行单元测试通常是完全自动化的，运行起来比手动测试便宜得多（更少的开发时间）。当然，编写它们需要时间，但通常比以后花在手动测试上的时间要少。

如果开发是在团队中完成的，通常最好在服务器上进行自动构建，以确保所有新代码都不会破坏任何东西。如果测试在没有与真人进行任何交互的情况下运行，这也更有可能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T13:08:18.093

单元测试的优点是会给出一个红色或绿色的答案。您无需检查结果以查看一切是否仍按预期工作。

# javascript - 刷新我的 jquery 数据表后，jquery 事件侦听器不起作用？

> ID：14547601
> 
> 赞同：2
> 
> 时间：2013-01-27T13:00:57.313
> 
> 标签：javascript, jquery, events, datatables, event-listener

我有一个页面，其中包含一个由 dataTables 填充的大表。
我必须显示几个表，所以每次我删除整个表及其容器并重新初始化一个新表时，但是在我刷新表并再次加载它之后，我的所有事件侦听器都会消失。只需单击几下鼠标即可工作，甚至无法正常工作。
我将所有函数按金字塔顺序嵌套，因此我可以使用 1 或 2 个键函数调用底部函数，但调用它们也不起作用。
所以我打开了使用jquery `.on`，但它没有奏效。
这是我的`.on`功能之一：

```
$('body #dataTable tbody').on('blur keyup', 'div.confirm-edit #tmp', function(e){
    if(e.type === 'blur' || (e.type === 'keyup' && e.which === 13)){
        confirmCurrentActive();
    }
    if(e.type === 'keyup' && e.which === 27){
        cancelCurrentActive();
    }
}); 
```

所以我在这里，不知道如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:07:28.367

您需要将选择器连接到加载后页面中*始终*可用的元素。如果您要删除/添加`table`元素，这不是您想要使用的，所以不要：

```
$('body #dataTable tbody').on(... 
```

利用：

```
$('body').on(... 
```

请注意，虽然这会起作用，但您应该更改`body`为最接近`table`您在页面加载后未动态添加的父元素 - 例如`div`容器或类似容器。

# postgresql - PostgreSQL function-OID: 'my OID' 其中 'my' 是当前执行的用户定义函数

> ID：14547604
> 
> 赞同：0
> 
> 时间：2013-01-27T13:01:13.793
> 
> 标签：postgresql, plpgsql, temp-tables, postgresql-9.2

此查询返回提供名称和签名的函数的 OID：

```
 select 'myfunc(signature)'::regprocedure::oid; 
```

但是 PostgreSQL plpgsql 中是否有类似`myNameAndSignature()`函数的东西，所以我们可以使用动态 sql 来构建一个获取函数的 OID 的语句，然后创建一个临时表，并将 OID 附加到临时表的名称？
动态执行的语句是：

```
create temp table TT17015 
```

我是 PostgreSQL 新手，也许有更好的方法来处理临时表的命名，因此使用临时表并相互调用的函数不会收到它试图删除的特定临时表所在的错误在别处使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T19:30:57.800

使用函数的 OID 不一定能防止命名冲突。同一个函数可以在同一个会话中运行多次。

如果您需要一个唯一的名称，请使用[`SEQUENCE`](http://www.postgresql.org/docs/current/interactive/sql-createsequence.html). 在您的数据库中运行一次：

```
CREATE SEQUENCE tt_seq; 
```

然后，在您的 plpgsql 函数或`DO`语句中：

```
DO
$$
DECLARE
    _tbl text := 'tt' || nextval('tt_seq');
BEGIN
    EXECUTE 'CREATE TEMP TABLE ' || _tbl || '(id int)';
END
$$ 
```

缺点是您必须对动态标识符使用[**动态 SQL**](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)。普通 SQL 命令不接受标识符参数。

# nuget - Nuget有替代品吗？

> ID：14547605
> 
> 赞同：7
> 
> 时间：2013-01-27T13:01:21.523
> 
> 标签：nuget

是否可以在没有 Nuget 的情况下下载 VS 2012 的文件并将必要的文件安装到 VS 2012？

我无法在我的 PC 上访问 Internet，因此我找到了其他方法来下载必要的项目并在没有 Nuget 的 VS 2012 中安装此文件:)。不过，我想在 VS 2012 中有模板，就像我有模板一样，就好像我会通过 Nuget 下载这些项目一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T12:40:59.583

如果您能够将下载的内容带到您的无互联网机器上，那么您可以在该机器上设置本地 nuget 提要：

1.  在支持 Internet 的机器上，转到[此处](http://nuget.codeplex.com/releases/view/59864)并下载 Nuget 包资源管理器。
2.  下载后启动此工具，然后选择“从在线提要打开包”
3.  搜索您想要的包裹，然后点击确定，包裹将打开。
4.  转到文件 -> 另存为 -> 并选择保存 .nupkg 文件的位置。
5.  获取您下载的任何 .nupkg 文件，并将它们传输到其他无互联网计算机上的合理位置
6.  在VS中，打开工具->库包管理器->包管理器设置->包源
7.  为本地提要输入新名称，例如“本地提要”
8.  放入提要的来源，即您放置 .nupkg 文件的本地目录
9.  点击“添加”按钮

现在，当您管理 nuget 包时，您可以选择本地提要并从那里添加包，就像它们来自网络一样。

# php - 初学者 MySQL 数据库搜索 - 没有得到结果

> ID：14547610
> 
> 赞同：0
> 
> 时间：2013-01-27T13:01:35.833
> 
> 标签：php, mysql

我第一次尝试搜索引擎：我有一个名为“global”的数据库和一个名为“mpl”的表，其中包含 11 列（名称：客户、部件号、描述、原产国和其他几个）零件的行。我的目标是使用下面的代码 - 为用户在搜索字段中输入的部件号显示描述和原产国。

形式：

```
<form action="search.php" method="post"> 
<input type="text" name="find" /><br /> 
<input type="submit" value="Search" /> </form> 
```

和 PHP：

```
$host = "localhost"; 
$dbuser = "root"; 
$dbpass = " "; 
$db = "global"; 

$con = mysql_connect($host, $dbuser, $dbpass);
    if(!$con){ die(mysql_error());
    } 
$select = mysql_select_db($db, $con);
    if(!$select){ die(mysql_error()); 
    } 
$item = $_REQUEST['find'];  
$data = mysql_query("SELECT * FROM mpl WHERE 'Part No' ='".$item."'"); 
while($row = mysql_fetch_array($data)){ 
        echo $row['Description']. "<br>";
        echo $row['Country Of Origin']. "<br><p>"; 
 } 

 ?> 
```

有人可以告诉我我在做什么错吗？一旦我在我的“查找”表格中输入任何内容 - 我没有得到任何结果。如果我使用 LIKE 而不是没有值的“=”运行搜索 - 它会显示一堆描述和原产国 - 这意味着我已正确连接到我的数据库。这让我发疯了..我觉得我以某种方式搞砸了 mysql_query() 部分 - 但我不知道是哪一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:16:36.333

您使用了错误的字符来转义查询中的 Part No 列名。用反引号 (`) 转义它们应该没问题。

```
$data = mysql_query("SELECT * FROM mpl WHERE `Part No` ='".$item."'"); 
```

此外，您应该验证用户的查询以防止 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:04:43.303

如果你改变：

```
$item = $_REQUEST['find']; 
```

至

```
$item = $_POST['find']; 
```

还有一些函数，如 mysql_select_db() 已被弃用并将被删除。见： http:
[//php.net/manual/en/function.mysql-select-db.php](http://php.net/manual/en/function.mysql-select-db.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T13:07:38.230

试试换这个药水。

```
$item = $_REQUEST['find'];   $data = mysql_query("SELECT * FROM mpl WHERE 'Part No' ='".$item."'"); 
```

对此

```
$item = $_POST['find'];  
$data = mysql_query("SELECT * FROM mpl WHERE Part No ='$item'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T13:31:05.453

首先，我同意昆汀的观点；你应该使用像 PDO 或 Mysqli 这样的数据库 API。其次，看起来人们可以通过零件编号或描述来搜索零件。假设零件编号是数字，描述是字符串...检查输入类型并相应地运行查询。

```
$host = "localhost"; 
$dbuser = "root"; 
$dbpass = ""; 
$db = "global";

// Establish a database connection and select one.
// Try using one of the database API's.

// Then compose your sql by checking for the type of input from the form.
// Since your request method is a POST, then just look in the `_POST` superglobal.
$item = $_POST['find'];

if( is_numeric($item) ){
   $sql = "SELECT * FROM mpl WHERE 'Part No' = {$item}";
}else{
   $sql = "SELECT * FROM mpl WHERE 'Description' LIKE '%{$item}%'";
}

// Then perform the query. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T13:11:35.523

在您的请求中执行类似的操作以删除任何可能的空格并将选择字符串规范化为大写。

```
$item = strtoupper(trim($_REQUEST['find'])); 
```

并在您的 SQL 中执行此操作：也进行规范化。

```
$data = mysql_query("SELECT * FROM mpl WHERE UPPER(TRIM('Part No')) ='".$item."'"); 
```

您的 where 子句基本上没有完全匹配

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-27T13:28:13.330

这里的很多人已经指出了您的代码中可能的和实际的错误，但这是综合解决方案。首先，我将您的代码转换为[mysqli](http://php.net/manual/en/intro.mysqli.php)，这是连接到 mySQL 数据库的正确方法。您的连接方式已过时，不推荐使用。其次，我添加了一些代码来停止 sql 注入。第三，我`'Part No'`在您的查询中更改为“零件编号”（忽略第二个反勾号）。

```
<?php

$mysqli = new mysqli('localhost', 'root', DB_PASSWORD, 'global');

/* check connection */
if ($mysqli->connect_error)
  die('Connect Error (' . $mysqli->connect_errno . ') ' . $mysqli->connect_error);

/* escape string from sql injection */
$item = $mysqli->real_escape_string($_POST['find']);

/* query database */
$result = $mysqli->query("SELECT * FROM `mpl` WHERE `Part No` = '".$item."'");
while ($col = $result->fetch_array(MYSQLI_ASSOC))
  echo '<p>' . $col['Description'] . '<br />' . $col['Country Of Origin'] . '</p>';
$result->close();

/* don't forget to close the connection */
$mysqli->close();

?> 
```

# javascript - 如何使用 Javascript 获取损坏的图像列表？

> ID：14547611
> 
> 赞同：1
> 
> 时间：2013-01-27T13:01:37.560
> 
> 标签：javascript, jquery

在控制台中我有 180 未能加载资源，我需要获取这些资源的列表，以便我可以使用图像 URL 向网站管理员发送报告。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:54:36.383

只要在图像开始加载之前设置事件侦听器，就可以轻松跟踪加载失败的图像。像这样：

```
img.addEventListener('error', function() {
  //report failed image
}, false); 
```

如果所有图像都加载`<img>`到 html 中的标记中，则可以在脚本中为所有图像设置错误事件。只需确保将设置此设置的脚本放在 img 标签之后，但不要在页面加载事件中运行设置，或者`DOMContentLoaded`因为您可能错过了一些错误事件，否则为时已​​晚。

看这个例子：

[http://jsbin.com/ekiram/2/edit](http://jsbin.com/ekiram/2/edit)

如果你愿意，你可以设置一个[MutationObserver](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver?redirectlocale=en-US&redirectslug=DOM/DOM_Mutation_Observers)事件来监视任何`<img>`动态添加的新元素，并在那里设置一个错误事件。但它不适用于所有浏览器。

您可以通过查看`naturalWidth`属性来检查图像是否已加载。如果为 0，则表示尚未加载。但是没有办法知道图像是否真的无法加载或者只是需要很长时间，比如网络连接速度很慢。我想如果你有另一种方法可以知道页面和所有图像是否真的完成加载，比如在页面`load`事件之后或者你愿意设置一个很长的超时时间，你可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T13:46:50.090

If you can add a script to the page, you can bind a handler to the `error` event and track all failures:

```
$(function(){
  var errorImages = [];

  $('img').on('error', function(){
                errorImages.push(this.src);
              });

  $(window).on('load', function(){
    alert(errorImages);
  });
}); 
```

Working example: [http://jsbin.com/iboyik/3](http://jsbin.com/iboyik/3)

If you want to get all failed images on a page that is already loaded, that is a little trickier. I was able to do that by reloading all images:

```
(function(){
  var errorImages = [];
  $('img')
    .on('error', function(){
                    errorImages.push(this.src);
                 })
    .prop('src', function(i, src){return src;});
  // wait for all images to fail (bit of a hack)
  setTimeout(function(){alert(errorImages);}, 1000);
})(); 
```

Working example: [http://jsbin.com/iboyik/2](http://jsbin.com/iboyik/2)

# javascript - 接受除 ; 以外的特殊字符的正则表达式 并且必须包含一个字母数字字符

> ID：14547625
> 
> 赞同：-3
> 
> 时间：2013-01-27T13:03:20.493
> 
> 标签：javascript, regex

这是我想出的，但它也接受`;`. 有人可以帮助我了解我所缺少的吗

```
var VALID_ALPHANUMERIC_WITH_SPECIAL_CHARS = /^(?=.*[0-9])|(?=.*[a-zA-Z])([a-zA-Z0-9]|[@#!%*&_\/.:{}\[\]\$\-\=\?\\\(\)\+\~\`\^\<\>])+$/; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:20:12.233

如果您想检查至少有一个字母数字字符，并允许在文本中使用字母数字 + 一些特殊字符，那么下面的正则表达式应该可以工作。我还冒昧地删除了一些不必要的转义。

```
/^(?=.*[A-Za-z0-9])[a-zA-Z0-9@#!%*&_\/.:{}\[\]$=?\\()+~`^<>-]+$/ 
```

在某些地方可以进一步简化，但为了清楚起见，我不理会它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T13:47:13.733

@nhahtdh has already provided a correct regex for you. If you want to understand why your regex failed, let's take a look at it:

```
^(?=.*[0-9])   # Either anchor the match at the start and assert
               # that there is at least one ASCII digit
|              # OR
               # Assert that there is
(?=.*[a-zA-Z]) # at least one ASCII letter, then match
([a-zA-Z0-9]|[special chars...])+ # one or more of these characters
$              # with an unnecessary alternation; anchor the match to the end 
```

Do you see the problems?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T13:37:41.757

这部分`(?=.*[a-zA-Z])`匹配任何后跟一个字母的字符，所以它匹配`;a`

您可以这样做`(?=[^;]*[a-zA-Z])`以匹配任何字符，但`;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T13:27:13.507

如果您想接受特殊字符，但`;`只有*一个*字母数字字符

```
var re = /^[@#!%*&_\/.:{}\[\]$\-=?\\()+~`^<>]*[a-zA-Z0-9][@#!%*&_\/.:{}\[\]$\-=?\\()+~`^<>]*$/; 
```

如果您想要除*至少一个*字母数字字符以外`;`的特殊字符

 *```
var re = /^[a-zA-Z0-9@#!%*&_\/.:{}\[\]$\-=?\\()+~`^<>]*[a-zA-Z0-9][a-zA-Z0-9@#!%*&_\/.:{}\[\]$\-=?\\()+~`^<>]*$/; 
```

[JSFiddle](http://jsfiddle.net/HZbTb/)用于测试。*

# android - SQLite 困境：编辑 InitialValues

> ID：14547627
> 
> 赞同：0
> 
> 时间：2013-01-27T13:03:51.813
> 
> 标签：android, sqlite, android-intent

我正在创建一个具有“用户登录”页面的 android 应用程序。我尝试使用 SQlite，这是我的代码：

```
package tsu.ccs.capstone;

import android.content.ContentValues;  
import android.content.Context;  
import android.database.Cursor;  
android.database.SQLException;  
import android.database.sqlite.SQLiteDatabase;  
import android.database.sqlite.SQLiteOpenHelper;  
import android.util.Log;  

public class DBUser {
    public static final String KEY_ROWID = "_id";  
    public static final String KEY_USERNAME= "username";  
    public static final String KEY_PASSWORD = "password";  
    private static final String TAG = "DBAdapter";  

private static final String DATABASE_NAME = "usersdb";  
private static final String DATABASE_TABLE = "users";  
private static final int DATABASE_VERSION = 1;  

private static final String DATABASE_CREATE =  
    "create table users (_id integer primary key autoincrement, "  
    + "username text not null, "  
    + "password text not null);";  

private Context context = null;  
private DatabaseHelper DBHelper;  
private SQLiteDatabase db;  

public DBUser(Context ctx)  
{  
    this.context = ctx;  
    DBHelper = new DatabaseHelper(context);  
}  

private static class DatabaseHelper extends SQLiteOpenHelper  
{  
    DatabaseHelper(Context context)  
    {  
        super(context, DATABASE_NAME, null, DATABASE_VERSION);  
    }  

    @Override  
    public void onCreate(SQLiteDatabase db)  
    {  
        db.execSQL(DATABASE_CREATE);  
    }  

    @Override  
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)  
    {  
        Log.w(TAG, "Upgrading database from version " + oldVersion  
                + " to "  
                + newVersion + ", which will destroy all old data");  
        db.execSQL("DROP TABLE IF EXISTS users");  
        onCreate(db);  
    }  
}      

public void open() throws SQLException  
{  
    db = DBHelper.getWritableDatabase();  
}  

public void close()  
{  
    DBHelper.close();  
}      

public long AddUser(String username, String password)  
{  
     ContentValues initialValues = new ContentValues();  
     initialValues.put(KEY_USERNAME, "p");  
     initialValues.put(KEY_PASSWORD, "p");  
     return db.insert(DATABASE_TABLE, null, initialValues);  

}  

public boolean Login(String username, String password) throws SQLException  
{  
    Cursor mCursor = db.rawQuery("SELECT * FROM " + DATABASE_TABLE + " WHERE username=? AND password=?", new String[]{username,password});  
    if (mCursor != null) {  
        if(mCursor.getCount() > 0)  
        {  
            return true;  
        }  
    }  
 return false;  
}  

} 
```

如您所见，我的布局中的用户名和密码字段有一个 InitialValue。我的问题是我想给用户一个选项来更改我设置的默认用户名和密码。简单地说，只需覆盖 InitialValues 然后保存我的数据库。

任何人都可以帮助我，我才刚刚开始 android 编程，我对这个迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T19:17:19.923

Java 不支持默认参数值，因此您必须重载 AddUser 函数。

```
 public long AddUser(){  
     ContentValues initialValues = new ContentValues();  
     initialValues.put(KEY_USERNAME, "p");  
     initialValues.put(KEY_PASSWORD, "p");  
     return db.insert(DATABASE_TABLE, null, initialValues);
   } 
```

这将使用您的默认用户名和密码创建用户。

```
 public long AddUser(String username, String password){  
     ContentValues initialValues = new ContentValues();  
     initialValues.put(KEY_USERNAME, username);  
     initialValues.put(KEY_PASSWORD, password);  
     return db.insert(DATABASE_TABLE, null, initialValues);
  } 
```

此函数将使用用户提供的值创建用户。

# oauth - Laravel 单点登录

> ID：14547629
> 
> 赞同：3
> 
> 时间：2013-01-27T13:04:10.770
> 
> 标签：oauth, openid, oauth-2.0, laravel, openid-provider

[Laravel](http://laravel.com)上是否有任何 OpenID 实现？（提供者和消费者）

我想要做的是让一个 CoreApp 充当 OpenID 提供者，而其他应用程序充当 OpenID 消费者，以便用户可以选择：

*   使用 CoreApp OpenID 系统登录
*   使用其他 OpenID 提供商（Google、Facebook、Twitter...）登录
*   创建一个帐户，这意味着用户将被重定向到 CoreApp 以创建另一个帐户，并将使用该帐户作为 OpenID 帐户在他的应用程序上登录。

我看到 oAuth (1 & 2) 也适用于这种用法？任何 Laravel 教程/howto ？

由于 L4 ( [Beta1](http://four.laravel.com) ) 的 beta 阶段，我想我可以使用 L3 进行生产吗？

我对 Laravel 还很陌生，仍处于**RTFM**级别:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T23:08:16.900

查看[HybridAuth](http://hybridauth.sourceforge.net/)。它与框架无关，并集成了可能的 OAuth 和 OAuth 2.0 提供程序。

这是一个关于如何在 Laravel 4 中实现的基本示例：[http ://www.mrcasual.com/on/coding/laravel4-package-management-with-composer/](http://www.mrcasual.com/on/coding/laravel4-package-management-with-composer/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T14:37:59.730

解决这个问题的最佳途径可能是寻找与框架无关的东西，即可以与任何 PHP 框架一起工作的东西，但仍然可以为您完成所有艰苦的工作。

看看[Packagist](https://packagist.org)中的很多，包括一些好的多提供者 OpenID 包和 OAuth 包。

它们都可以用 composer 安装，你可以在 Laravel 3（和 4's）`start.php`文件中为它们做很多设置。

希望这可以帮助！

# python - Python 语言环境错误：不支持的语言环境设置

> ID：14547631
> 
> 赞同：374
> 
> 时间：2013-01-27T13:04:11.760
> 
> 标签：python, locale, ubuntu-11.04

为什么在python中执行此操作时会出现以下错误：

```
>>> import locale
>>> print str( locale.getlocale() )
(None, None)
>>> locale.setlocale(locale.LC_ALL, 'de_DE')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/locale.py", line 531, in setlocale
    return _setlocale(category, locale)
locale.Error: unsupported locale setting 
```

这也适用于 fr 或 nl 等其他语言环境。我正在使用 Ubuntu 11.04。

更新：执行以下操作没有产生任何结果：

```
dpkg-reconfigure locales
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
    LANGUAGE = (unset),
    LC_ALL = (unset),
    LC_CTYPE = "UTF-8",
    LANG = (unset)
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
locale: Cannot set LC_CTYPE to default locale: No such file or directory
locale: Cannot set LC_ALL to default locale: No such file or directory 
```

* * *

## 回答 #1

> 赞同：699
> 
> 时间：2016-03-28T06:20:33.887

运行以下命令

```
export LC_ALL="en_US.UTF-8"
export LC_CTYPE="en_US.UTF-8"
sudo dpkg-reconfigure locales 
```

它会解决这个问题。

确保该部分与某些系统上例如`.UTF-8`的输出中找到的实际语法相匹配。`locale -a``.utf8`

* * *

## 回答 #2

> 赞同：238
> 
> 时间：2016-05-09T09:26:00.280

根据[此链接](https://bugs.launchpad.net/devstack/+bug/1249131)，它通过输入以下命令解决：

> 导出 LC_ALL=C

* * *

## 回答 #3

> 赞同：220
> 
> 时间：2013-01-27T14:06:07.563

您可能没有任何`de_DE`可用的语言环境。

`locale -a`您可以使用该命令查看可用语言环境的列表。例如，在我的机器上：

```
$ locale -a
C
C.UTF-8
en_AG
en_AG.utf8
en_AU.utf8
en_BW.utf8
en_CA.utf8
en_DK.utf8
en_GB.utf8
en_HK.utf8
en_IE.utf8
en_IN
en_IN.utf8
en_NG
en_NG.utf8
en_NZ.utf8
en_PH.utf8
en_SG.utf8
en_US.utf8
en_ZA.utf8
en_ZM
en_ZM.utf8
en_ZW.utf8
it_CH.utf8
it_IT.utf8
POSIX 
```

请注意，如果要将语言环境设置为，`it_IT`还必须指定`.utf8`：

```
>>> import locale
>>> locale.setlocale(locale.LC_ALL, 'it_IT')   # error!
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/locale.py", line 539, in setlocale
    return _setlocale(category, locale)
locale.Error: unsupported locale setting
>>> locale.setlocale(locale.LC_ALL, 'it_IT.utf8')
'it_IT.utf8' 
```

要安装新的语言环境，请使用：

```
sudo apt-get install language-pack-id 
```

语言代码在哪里`id`（取自[此处](https://askubuntu.com/questions/17001/how-to-set-locale)）

*安装语言环境后*，您应该遵循 Julien Palard 的建议并使用以下命令重新配置语言环境：

```
sudo dpkg-reconfigure locales 
```

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2017-07-10T12:32:11.770

上述答案之一提供了解决方案：

```
export LC_ALL="en_US.UTF-8"
export LC_CTYPE="en_US.UTF-8"
sudo dpkg-reconfigure locales 
```

**上述解决方案的问题是它必须在 linux shell 上完成。**但是，如果您提供代码以在客户端计算机上工作，那么这是一种不好的方法。我还尝试使用 os.system() 执行上述命令，但仍然无法正常工作。

**对我有用的解决方案是**

```
locale.setlocale(locale.LC_ALL,'en_US.UTF-8') 
```

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2016-04-29T13:33:48.837

更永久的解决方案是在命令显示的输出中填充缺失值：`locale`

输出`locale`为：

```
 $ locale
LANG=en_US.utf8
LANGUAGE=
LC_CTYPE="en_US.utf8"
LC_NUMERIC=es_ES.utf8
LC_TIME=es_ES.utf8
LC_COLLATE="en_US.utf8"
LC_MONETARY=es_ES.utf8
LC_MESSAGES="en_US.utf8"
LC_PAPER=es_ES.utf8
LC_NAME="en_US.utf8"
LC_ADDRESS="en_US.utf8"
LC_TELEPHONE="en_US.utf8"
LC_MEASUREMENT=es_ES.utf8
LC_IDENTIFICATION="en_US.utf8"
LC_ALL= 
```

要填充缺失值，请编辑 ~/.bashrc ：

```
 $ vim ~/.bashrc 
```

在上述命令之后添加以下行（假设您希望 en_US.UTF-8 成为您的语言）：

```
export LANGUAGE="en_US.UTF-8"
export LC_ALL="en_US.UTF-8" 
```

如果此文件是 ReadOnly 您将需要按照[The GeekyBoy](http://www.geekyboy.com/archives/629)提到的步骤进行操作。[Beco 博士在 Superuser 中](https://superuser.com/questions/694450/using-vim-to-force-edit-a-file-when-you-opened-without-permissions)给出的答案包含有关保存只读文件的详细信息。

保存文件后执行：

```
$ source ~/.bashrc 
```

现在你不会再面临同样的问题了。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2013-01-27T16:16:39.820

如果您使用的是 Debian（或 Debian fork），您可以使用以下命令添加语言环境：

```
dpkg-reconfigure locales 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2019-11-14T06:27:18.960

您的错误清楚地表明，您正在尝试使用不存在的语言环境。

```
>>> locale.setlocale(locale.LC_ALL, 'de_DE')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/locale.py", line 581, in setlocale
    return _setlocale(category, locale)
locale.Error: unsupported locale setting 
```

**locale.Error：不支持的区域设置**

**要检查可用设置，请使用** `locale -a`

```
deb@deb-Latitude-E7470:/ambot$ locale -a
C
C.UTF-8
en_AG
en_AG.utf8
en_AU.utf8
en_BW.utf8
en_CA.utf8
en_DK.utf8
en_GB.utf8
en_HK.utf8
en_IE.utf8
en_IN
en_IN.utf8
en_NG
en_NG.utf8
en_NZ.utf8
en_PH.utf8
en_SG.utf8
en_US.utf8
en_ZA.utf8
en_ZM
en_ZM.utf8
en_ZW.utf8
POSIX 
```

所以你可以使用其中之一，

```
>>> locale.setlocale(locale.LC_ALL, 'en_AG.utf8')
'en_AG.utf8'
>>> 
```

为了`de_DE`

此文件可以手动调整或使用工具 update-locale 更新。

```
update-locale LANG=de_DE.UTF-8 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-02-22T22:51:58.970

在 Arch Linux 上，我可以通过运行来解决这个问题`sudo locale-gen`

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-01-16T11:01:50.300

作为记录，我遇到了同样的问题，但没有一个解决方案有效。我已经升级了我的电脑并迁移了我的电脑。我有一个混合语言环境英语和西班牙语：

```
$ locale
LANG=en_US.utf8
LANGUAGE=
LC_CTYPE="en_US.utf8"
LC_NUMERIC=es_ES.utf8
LC_TIME=es_ES.utf8
LC_COLLATE="en_US.utf8"
LC_MONETARY=es_ES.utf8
LC_MESSAGES="en_US.utf8"
LC_PAPER=es_ES.utf8
LC_NAME="en_US.utf8"
LC_ADDRESS="en_US.utf8"
LC_TELEPHONE="en_US.utf8"
LC_MEASUREMENT=es_ES.utf8
LC_IDENTIFICATION="en_US.utf8"
LC_ALL= 
```

但是，在我的新 Debian 安装中，我只是选择了英语作为语言环境。最终奏效的是重新配置语言环境包以添加和生成西班牙语。

```
$ grep -v "#" /etc/locale.gen 
en_US.UTF-8 UTF-8
es_ES.UTF-8 UTF-8 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-03-15T11:42:49.010

把它放在`Dockerfile`上面`ENV`。

```
# make the "en_US.UTF-8" locale so postgres will be utf-8 enabled by default
RUN apt-get update && apt-get install -y locales && rm -rf /var/lib/apt/lists/* \
    && localedef -i en_US -c -f UTF-8 -A /usr/share/locale/locale.alias en_US.UTF-8

ENV LANG en_US.UTF-8 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-12-11T20:11:10.790

在我看来，在 python{,3} 中设置语言环境的最简单方法是：

```
>>> import locale
>>> locale.setlocale(locale.LC_ALL, '')
'de_DE.UTF-8' 
```

然后，如果您使用的是体面的 linux 发行版，并且应该在其他操作系统的二进制发行版上工作（或者恕我直言，这是一个错误），语言环境感知的东西就可以工作。

```
>>> import datetime as dt
>>> print(dt.date.today().strftime("%A %d. %B %Y"))
Sonntag 11\. Dezember 2016 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-08-24T12:10:10.707

只需打开 .bashrc 文件并添加它

> 导出 LC_ALL=C

然后在终端中输入 source .bashrc 。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-08-07T04:24:20.367

*   运行此命令 `locale`以获取使用的语言环境。如：

> LANG=en_US.UTF-8
> LANGUAGE=en_US:en
> LC_CTYPE=zh_CN.UTF-8
> LC_NUMERIC="en_US.UTF-8"
> LC_TIME="en_US.UTF-8"
> LC_COLLATE="en_US.UTF-8"
> LC_MONETARY="en_US .UTF-8"
> LC_MESSAGES="en_US.UTF-8"
> LC_PAPER="en_US.UTF-8"
> LC_NAME="en_US.UTF-8"
> LC_ADDRESS="en_US.UTF-8"
> LC_TELEPHONE="en_US.UTF-8"
> LC_MEASUREMENT="en_US.UTF-8"
> LC_IDENTIFICATION="en_US.UTF-8"
> LC_ALL=

*   `/etc/locale-gen`在文件的第一步中搜索列出的语言环境列表。取消注释使用过的
*   运行`locale-gen`以生成新添加的语言环境

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-09-22T03:42:03.940

对于那些部署 docker 映像并使用命令中未显示的语言环境的用户`locale -a`，请将此行添加到 Dockerfile
`RUN apt-get install -y locales`

这应该将所有语言环境添加到您的图像中，我使用了 de_DE，它不是 AWS 默认 Ubuntu 服务器的一部分。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-02-22T22:09:07.533

如果我是你，我会使用 BABEL：[http ://babel.pocoo.org/en/latest/index.html](http://babel.pocoo.org/en/latest/index.html)

我在这里使用 Docker 遇到了同样的问题，我已经尝试了每一步但效果不佳，总是出现语言环境错误，所以我决定使用 BABEL，一切都运行良好。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-08-27T17:33:14.853

如果您刚刚添加了新的语言环境，则可能会发生此错误。您需要重新启动 python 交互式 shell ( `quit(`) 和`python`) 才能访问它。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-11-26T15:44:35.597

在试图让 python[在特定语言环境中吐出名称时，](https://stackoverflow.com/questions/13037370/python-calendar-day-month-names-in-specific-locale)我遇到了同样的问题。

在寻求答案的过程中，我发现事情变得有点神秘。

我找到了那个python代码。

```
import locale
print locale.getdefaultlocale()
>> ('en_DK', 'UTF-8') 
```

确实`locale.setlocale(locale.LC_TIME, 'en_DK.UTF-8')`有效

在此处使用提示我进一步测试以查看使用 python 代码可用的内容

```
import locale
loc_list = [(a,b) for a,b in locale.locale_alias.items() ]
loc_size = len(loc_list)
print loc_size,'entries'

for loc in loc_list:
    try:
        locale.setlocale(locale.LC_TIME, loc[1])
        print 'SUCCES set {:12} ({})'.format(loc[1],loc[0])
    except:
        pass 
```

产生

```
858 entries
SUCCES set en_US.UTF-8  (univ)
SUCCES set C            (c.ascii)
SUCCES set C            (c.en)
SUCCES set C            (posix-utf2)
SUCCES set C            (c)
SUCCES set C            (c_c)
SUCCES set C            (c_c.c)
SUCCES set en_IE.UTF-8  (en_ie.utf8@euro)
SUCCES set en_US.UTF-8  (universal.utf8@ucs4)
SUCCES set C            (posix)
SUCCES set C            (english_united-states.437)
SUCCES set en_US.UTF-8  (universal) 
```

其中只有上面的工作！但`en_DK.UTF-8`它不在此列表中，尽管它有效！？！？什么？？python 生成的语言环境列表确实包含很多我正在寻找的 da 和 DK 的组合，但同样没有 da/DK 的 UTF-8 ......

我在一个 Point Linux 发行版（基于 Debian）上，这里`locale`说`LC_TIME="en_DK.UTF-8"`我知道它可以工作，但不是我需要的语言环境。

`locale -a`说

```
C
C.UTF-8
en_DK.utf8
en_US.utf8
POSIX 
```

所以肯定需要[安装其他语言环境](https://serverfault.com/questions/54591/how-to-install-change-locale-on-debian)，我通过编辑`/etc/locale.gen`、取消注释需要的行`da_DK.UTF-8 UTF-8`并运行命令来完成`locale-gen`

现在`locale.setlocale(locale.LC_TIME, 'da_DK.UTF-8')`也可以了，我可以获得本地化的日期和月份名称。

**我的结论：**

Python：locale.locale_alias 对查找可用的语言环境毫无帮助！！！

Linux：获取语言环境列表和安装新语言环境非常容易。有很多帮助。

Windows：我一直在调查，但没有任何结论。虽然有帖子导致答案，但我没有追求它的冲动。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-09-04T12:37:29.933

python 查找 .UFT-8，但您可能有 .utf8 尝试使用 sudo dpkg-reconfigure locales 安装 .UFT-8 软件包

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-12-20T10:38:40.173

如果我理解正确，这里的主要错误来源是语言环境名称的确切语法。特别是因为它似乎在分布之间有所不同。我在这里看到在不同的答案/评论中提到：

```
de_DE.utf8
de_DE.UTF-8 
```

尽管这对于人类来说显然是相同的，但对于您的标准确定性算法来说却并非如此。

所以你可能会做一些类似的事情：

```
DESIRED_LOCALE=de
DESIRED_LOCALE_COUNTRY=DE
DESIRED_CODEPAGE_RE=\.[Uu][Tt][Ff].?8
if [ $(locale -a | grep -cE "${DESIRED_LOCALE}_${DESIRED_LOCALE_COUNTRY}${DESIRED_CODEPAGE_RE}") -eq 1 ]
then
    export LC_ALL=$(locale -a | grep -m1 -E "${DESIRED_LOCALE}_${DESIRED_LOCALE_COUNTRY}${DESIRED_CODEPAGE_RE}")
    export LANG=$LC_ALL
else
    echo "Not exactly one desired locale definition found: $(locale -a | grep -E "${DESIRED_LOCALE}_${DESIRED_LOCALE_COUNTRY}${DESIRED_CODEPAGE_RE}")" >&2
fi 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2019-03-14T11:45:11.877

首先，确保您已经安装了语言包：

```
sudo apt-get install language-pack-en-base

sudo dpkg-reconfigure locales 
```

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2021-02-02T23:28:01.147

**不是这个问题的答案，但这个问题帮助我找到了我的问题的答案。**

我在 Docker 容器中使用时遇到了这个问题。
我通过安装**locales**、将我的语言添加到**locale.gen**文件、执行**locale-gen**（它从 locale.gen 读取）并最后将**LANG**设置为我的语言来解决。

例如，我的 Dockerfile：

```
RUN apt-get install -y locales
RUN echo "pt_BR.UTF-8 UTF-8" >> /etc/locale.gen
RUN locale-gen pt_BR.UTF-8
ENV LANG=pt_BR.UTF-8 
```

# css - 为什么禁用表单元素中的文本在 Safari 中不呈现为黑色？

> ID：14547632
> 
> 赞同：6
> 
> 时间：2013-01-27T13:04:14.043
> 
> 标签：css, safari, safari6

我试图让禁用的输入元素中的文本以**黑色**显示。这适用于大多数浏览器：

```
input[type="text"][disabled],
input[type="text"]:disabled {
  color: #000000;
} 
```

但是，在 Safari（版本 6.0.2）中，文本会稍微亮一些。最让我困惑的是，当我在浏览器中选择文本并在控制台上查找*元素信息*时，它清楚地显示：

```
rgba(0,0,0) 
```

所以在代码中它是**黑色**的，但它仍然以黑色*以外*的方式呈现。这怎么可能？

这是 Safari 的错误吗？

感谢您在这件事上的任何帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-19T11:52:13.017

尝试：

> -webkit-文本填充颜色：#000000；

这在 Safari 7 中有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:55:30.680

这确实很奇怪。似乎 Safari 在禁用字段中将确切的黑色显示为灰色，而其他颜色则被遵守。作为一种解决方法，您可以设置`color: #000001`，但它当然不是很黑，而是带有蓝色阴影。

作为另一种方法，请考虑为什么将字段设置为禁用状态，但应以正常黑色显示。例如，以普通文本显示它（当您现在启用禁用字段时，将其转换为普通输入字段）。

# c# - 将图像加载到面板

> ID：14547637
> 
> 赞同：0
> 
> 时间：2013-01-27T13:04:41.437
> 
> 标签：c#, wpf, controls

我在我的项目中创建了一个文件夹“images”。
当调用函数 SetImage() 时，我想从 /images/image.jpg 中获取图像并将其放在我的面板上。
xaml 上的面板声明如下所示：

```
xmlns:my="clr-namespace:System.Windows.Forms.Integration;assembly=WindowsFormsIntegration"
xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"

            <my:WindowsFormsHost Name="windowsFormsHost1">
                <wf:Panel x:Name="panelWinform"  Dock="Fill" />
            </my:WindowsFormsHost> 
```

可以在面板中显示控件的示例：

```
panelWinform.Controls.Clear();
panelWinform.Controls.Add(controlObject);
controlObject.Dock = System.Windows.Forms.DockStyle.Fill; 
```

怎么能放置图片而不是controlObject呢？
.clear() 有什么作用？我需要再打电话吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:32:25.907

*没有* WinForms会很容易。您可能有一个 Grid 或其他一些面板：

```
<Grid x:Name="panel">
</Grid> 
```

只需将[图像](http://msdn.microsoft.com/en-us/library/ms610982.aspx)控件添加到面板，如下所示。

```
public void SetImage()
{
    var uri = new Uri("pack://application:,,,/images/image.png");
    var bitmap = new BitmapImage(uri);
    var image = new Image { Source = bitmap };

    panel.Children.Add(image);
} 
```

* * *

图像 URI 看起来像这样，因为我假设图像文件是 Visual Studio 项目中的资源。有关详细信息，请参阅[Pack URI](http://msdn.microsoft.com/en-us/library/aa970069.aspx)。您也可以为 URI 使用绝对或相对文件路径。

# google-visualization - 检测悬停在图表点上 - 谷歌可视化折线图

> ID：14547642
> 
> 赞同：0
> 
> 时间：2013-01-27T13:05:42.957
> 
> 标签：google-visualization, mouseleave

我正在使用谷歌可视化折线图，并且我正在使用以下事件来检测图表上的某个点何时悬停。

```
google.visualization.events.addListener(chart, 'onmouseover', function (rowColumn) {
            alert("mouseOver");
        });
 google.visualization.events.addListener(chart, 'onmouseleave', function (rowColumn) {
                alert("mouseLeave");
            }); 
```

第一个工作完美，但第二个什么都不做！我该如何启用它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T18:51:02.570

正确的语法是：

```
google.visualization.events.addListener(chart, 'onmouseout', function (rowColumn) {
    alert("onmouseout");
}); 
```

# ruby-on-rails - 多态关联失败

> ID：14547644
> 
> 赞同：0
> 
> 时间：2013-01-27T13:05:49.993
> 
> 标签：ruby-on-rails, associations, polymorphic-associations, rails-activerecord, has-one

在我的 rails 3.2 应用程序中，我有一个 User 模型和一个 Physician 模型，它们具有以下多态关联：

**用户**

```
class User < ActiveRecord::Base
  attr_accessible :authenticatable_id, :authenticatable_type, :email
  belongs_to :authenticatable, polymorphic: true
end 
```

**医师**

```
class Physician < ActiveRecord::Base
  attr_accessible :name
  has_one :user, as: :authenticatable
end 
```

我想在控制台中测试这些并遇到了一个奇怪的事情。正在做：

```
p = Physician.new
p.user.build 
```

给了我`NoMethodError: undefined method 'build' for nil:NilClass`-但是为什么医生的用户属性是`nil`？

奇怪的是，当我将医生模型更改为`has_many :users`而不是`has_one :user`做

```
p = Physician.new
p.users.build 
```

一切正常。

`has_one`为了让协会运作，我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:33:11.840

您可能应该这样做，`p.build_user`因为`has_one`不添加`association.build`方法。您还可以检查有关[has_one](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_one)和[has_many](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_many) 'injects' 方法的 apidock 到您的模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:11:48.030

我并不完全清楚，但似乎您正在创建一个`Physician`也是一个`User`. 因此它能够利用 a`User`提供的功能。

您的实现创建了两个对象 one`Physician`和 one `User`，但是当严格查看情况时，两者都是相同的医师/用户。

所以你应该让`Physician`继承自`User`：

```
class Physician < User 
```

`Physician`并去除和之间的多态关系`User`。

# java - 如何在我的项目中制作捆绑包？

> ID：14547647
> 
> 赞同：0
> 
> 时间：2013-01-27T13:05:53.723
> 
> 标签：java, maven, maven-2, maven-bundle-plugin

我构建了一个名为**ThreadPool-Maven的多模块项目**

**ThreadPool-Maven** 包含两个项目**ThreadPool-Implementation**和**ThreadPool-Evaluator**。

两者是相互依赖的，ThreadPool-Evaluator 项目依赖于 ThreadPool-Implementation 项目。

**ThreadPool-Implementation**包含三个 java 文件。

1.  线程池.java
2.  WorkerThreadPool.java
3.  完成.java

**ThreadPool-Evaluator**包含两个 java 文件。

1.  测试线程池.java
2.  TestWorkerThread.java

这些是我到现在为止的工作。现在我想构建一个**ThreadPool-Implementation**和**ThreadPool-Evaluator包，** **ThreadPool-Maven**使用这些包来执行相同的任务。帮助我做到这一点。

**POMS**如下：-

**线程池-Maven**：-

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.xyz.intern.multiple_project</groupId>
    <version>0.8-SNAPSHOT</version>
    <artifactId>ThreadPool-Maven</artifactId>
    <packaging>pom</packaging>
    <name>Simple Parent Project ThreadPool-Maven</name>

    <modules>
        <module>ThreadPool-Implementation</module>
        <module>ThreadPool-Evaluator</module>
    </modules>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

</project> 
```

**ThreadPool-实现**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

   <parent>
    <groupId>com.xyz.intern.multiple_project</groupId>
    <artifactId>ThreadPool-Maven</artifactId>
    <version>0.8-SNAPSHOT</version>
  </parent>

  <artifactId>ThreadPool-Implementation</artifactId>
  <packaging>jar</packaging>

  <name>ThreadPool-Implementation </name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

</project> 
```

**ThreadPool-Evaluator**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <groupId>com.xyz.intern.multiple_project</groupId>
    <artifactId>ThreadPool-Maven</artifactId>
    <version>0.8-SNAPSHOT</version>
  </parent>
  <artifactId>ThreadPool-Evaluator</artifactId>
  <packaging>jar</packaging>

  <name>ThreadPool-Evaluation</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
        <groupId>com.xyz.intern.multiple_project</groupId>
        <artifactId>ThreadPool-Implementation</artifactId>
        <version>${project.version}</version>
    </dependency>
  </dependencies>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:43:59.923

Maven bundle 插件用于生成 OSGi 兼容的 bundle JAR 文件。查看[Apache Felix Maven Bundle Plugin](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)了解更多信息。

# python - 使用字符串和模块名称调用函数

> ID：14547650
> 
> 赞同：0
> 
> 时间：2013-01-27T13:06:12.220
> 
> 标签：python, string, variables, module, packages

> **可能重复：**
> [如何动态加载 Python 类](https://stackoverflow.com/questions/547829/how-to-dynamically-load-a-python-class)

我目前正在使用“while”循环来自动更新存储在数据库中的游戏。'while' 循环迭代直到达到游戏数。每次迭代都会返回包含所有游戏数据（版本、更新链接等）的行。

现在，我在一个名为“Scripts”的子目录中为每个游戏创建了脚本。像这样

```
MainScript.py
  --> Scripts
       --> Game1.py
       --> Game2.py
       --> Game3.py 
```

现在 MainScript 连接数据库并获取游戏名称后，将所有游戏脚本一一调用。

但问题是存储在数据库中的游戏名称是一个字符串，Game1.py、Game2.py、Game3.py 中的每个函数都与游戏名称相同。

这意味着当我尝试调用游戏的函数时，可以说“我的世界”。它必须看起来像这样。

```
Scripts.Minecraft.Minecraft(version, size, download) 
```

现在尝试动态地执行此操作是我的问题。因为它在一个while循环中，所以每次迭代的名称部分都会改变。我如何动态地做到这一点？

```
Scripts.<GameName>.<GameName>(version, size, download) 
```

**它总是从字面上接受变量并说它不能使用它。调用函数时如何使用变量？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T13:10:53.703

尝试使用[`getattr`](http://docs.python.org/2/library/functions.html#getattr). 例如，游戏名称在`gamename`变量中：

```
getattr(getattr(Scripts, gamename), gamename)(version, size, download) 
```

应该管用。

# ios - iPhone UITableView 使用 Cell ImageView 滚动和搜索缓慢

> ID：14547654
> 
> 赞同：1
> 
> 时间：2013-01-27T13:06:47.010
> 
> 标签：ios, objective-c, uitableview, uiimageview

当我为每个单元格设置图像时，我的应用程序滚动和搜索速度非常慢。图片提升速度更快，但搜索时仍然很慢。这是我在行单元格中的代码。有任何想法吗？

```
@interface UIImage (TPAdditions)
- (UIImage*)imageScaledToSize:(CGSize)size;
@end

@implementation UIImage (TPAdditions)
- (UIImage*)imageScaledToSize:(CGSize)size {
    UIGraphicsBeginImageContext(size);
    [self drawInRect:CGRectMake(0, 0, size.width, size.height)];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return image;
}

@end 
```

cellForRowAtIndexPath

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    static NSInteger buton1_tag = 100;
    static NSInteger buton2_tag = 101;

    if (indexPath.section == 0) {
        CellIdentifier = @"CellMuzikEkle";
    }else{
        if(indexPath.row == 0 && !self.editing)
            CellIdentifier = @"CellPlayereEkle";
        else
            CellIdentifier = @"CellDizi";
    }

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        if (indexPath.section == 1 && indexPath.row == 0 && !self.editing) // Grubu ekle
            cell = [[[NSBundle mainBundle] loadNibNamed:@"Cell4" owner:self options:nil] objectAtIndex:0];
        else{
            if (indexPath.section == 0) {
                cell = [[[NSBundle mainBundle] loadNibNamed:@"Cell" owner:self options:nil] objectAtIndex:5];
                UIButton *ipodbuton = (UIButton *) [cell.contentView viewWithTag:buton1_tag];
                [ipodbuton addTarget:self action:@selector(iPoddan_Ekle:) forControlEvents:UIControlEventTouchUpInside];
                UIButton *yuklenenler = (UIButton *) [cell.contentView viewWithTag:buton2_tag];
                [yuklenenler addTarget:self action:@selector(Yuklenenlerden_Ekle:) forControlEvents:UIControlEventTouchUpInside];
            }else{
                cell.textLabel.font = [UIFont boldSystemFontOfSize:15.0];
                cell.textLabel.numberOfLines=2;
                cell.detailTextLabel.font = [UIFont systemFontOfSize:13];
                [cell.imageView.layer setBorderWidth: 1.5];
            }
        }
    }

    if (indexPath.section == 1 && !self.editing && indexPath.row != 0)
        cell.accessoryType =UITableViewCellAccessoryDetailDisclosureButton;
        else
            cell.accessoryType =UITableViewCellAccessoryNone;

            if(indexPath.section == 0){
                cell.textLabel.text = @"";
                cell.detailTextLabel.text = @"";
                cell.imageView.image = nil;
            }else{
                if (indexPath.row > 0 || self.editing) {
                    if (!self.editing)
                        indexPath = [NSIndexPath indexPathForRow:indexPath.row - 1 inSection:indexPath.section];

                    NSArray *aradizi = tableView == self.searchDisplayController.searchResultsTableView ? [[NSArray alloc] initWithArray:self.filteredListContent] : [[NSArray alloc] initWithArray:self.dizi];

                    if ([[NSUserDefaults standardUserDefaults] boolForKey:cellresimyuk_s])
                        cell.imageView.image = [[self Resim_Artwork:[aradizi objectAtIndex:indexPath.row]] imageScaledToSize:CGSizeMake(65, 50)];
                    else
                        cell.imageView.image = nil;

                    cell.textLabel.text = [[aradizi objectAtIndex:indexPath.row] objectForKey:isim_s];

                    NSTimeInterval theTimeInterval = [[[aradizi objectAtIndex:indexPath.row] objectForKey:sure_s] intValue] - 1;
                    NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
                    NSDate  *date1;
                    if (theTimeInterval >= 3600) {
                        [dateFormatter setDateFormat:@"HH:mm:ss"];
                        date1   = [dateFormatter dateFromString:@"00:00:00"];
                    }else{
                        [dateFormatter setDateFormat:@"mm:ss"];
                        date1   = [dateFormatter dateFromString:@"00:00"];
                    }
                    NSDate *date2 = [[NSDate alloc] initWithTimeInterval:theTimeInterval sinceDate:date1];
                    cell.detailTextLabel.text = [dateFormatter stringFromDate:date2];
                }else{
                    if (tableView == self.searchDisplayController.searchResultsTableView)
                        cell.textLabel.text = AramaSonuclrPlayerEkle_lclz;
                    else
                        cell.textLabel.text = GrubuPlayereEkle_lclz;

                }
            }

    return cell;
} 
```

Resim_Artwork

```
- (UIImage *)Resim_Artwork:(NSDictionary *)dictr{

    if ([dictr objectForKey:videoid_s]) {
        if ([self Dosya_Varmi:[[rsm_favori stringByAppendingPathComponent:[dictr objectForKey:videoid_s]] stringByAppendingPathExtension:@"png"]])
            return [UIImage imageWithContentsOfFile:[[rsm_favori stringByAppendingPathComponent:[dictr objectForKey:videoid_s]] stringByAppendingPathExtension:@"png"]];
    }else{
        if ([[[dictr objectForKey:urlsi_s] pathExtension] isEqualToString:@"mp4"]) {
            AVURLAsset *assetresim = [[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:[kDocdir stringByAppendingPathComponent:[dictr objectForKey:urlsi_s]]] options:nil];
            AVAssetImageGenerator *gen = [[AVAssetImageGenerator alloc] initWithAsset:assetresim];
            gen.appliesPreferredTrackTransform = YES;
            int suresi = CMTimeGetSeconds(assetresim.duration);
            if (suresi > 0) {
                CMTime time;
                if (suresi>6)
                    time = CMTimeMakeWithSeconds(6.0, 600);
                else
                    time = CMTimeMakeWithSeconds(0.0, 600);
                NSError *error = nil;
                CMTime actualTime;
                CGImageRef image = [gen copyCGImageAtTime:time actualTime:&actualTime error:&error];
                UIImage *thumb = [[UIImage alloc] initWithCGImage:image];
                CGImageRelease(image);
                return thumb;
            }
        }else {
            if ([dictr objectForKey:kaynak_s]) {
                AVAsset *asset = [AVURLAsset URLAssetWithURL:[NSURL URLWithString:[dictr objectForKey:urlsi_s]] options:nil];
                for ( AVMetadataItem* item in [asset commonMetadata] ) {
                    if ([[item commonKey] isEqualToString:@"artwork"] )
                        if (item.dataValue != nil)
                            if ([UIImage imageWithData:item.dataValue])
                                return [UIImage imageWithData:item.dataValue];
                }
            }else{
                if ([self Dosya_Varmi:[kDocdir stringByAppendingPathComponent:[dictr objectForKey:urlsi_s]]]){
                    AVAsset *asset = [AVURLAsset URLAssetWithURL:[NSURL fileURLWithPath:[kDocdir stringByAppendingPathComponent:[dictr objectForKey:urlsi_s]]] options:nil];
                    for ( AVMetadataItem* item in [asset commonMetadata] ) {
                        if ([[item commonKey] isEqualToString:@"artwork"] )
                            if (item.dataValue != nil)
                                if ([UIImage imageWithData:item.dataValue])
                                    return [UIImage imageWithData:item.dataValue];
                    }

                }
            }
        }
    }

    return [self Resimm:@".varsayilan" Koordinat:CGRectMake(120,1320, 80, 60) retinami:0 grubu:6];

} 
```

tableView willDisplayCell

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    NSArray *viewControllers = [self.tabBarController viewControllers];
    NSArray *viewControllers2 = [[viewControllers objectAtIndex:0] viewControllers];
    Player *detailViewController = (Player *)[viewControllers2 objectAtIndex:0];

    [detailViewController.temalar Cell_Tema:cell];

    cell.textLabel.backgroundColor = [UIColor clearColor];
    cell.detailTextLabel.backgroundColor = [UIColor clearColor];

    cell.textLabel.textColor = [detailViewController.temalar Baslik_Renk];
    cell.detailTextLabel.textColor = [detailViewController.temalar Bilgi_Renk];
    [cell.imageView.layer setBorderColor: [tableView.separatorColor CGColor]];

    [((UIButton *) [cell.contentView viewWithTag:100])    setBackgroundImage:[self Resimm:@".buton" Koordinat:CGRectMake(0,1350, 94, 35) retinami:0 grubu:7] forState:UIControlStateNormal];
    [((UIButton *) [cell.contentView viewWithTag:100]) setTitleColor:[detailViewController.temalar Baslik_Renk] forState:UIControlStateNormal];
    [((UIButton *) [cell.contentView viewWithTag:101])    setBackgroundImage:[self Resimm:@".buton" Koordinat:CGRectMake(0,1350, 94, 35) retinami:0 grubu:7] forState:UIControlStateNormal];
    [((UIButton *) [cell.contentView viewWithTag:101]) setTitleColor:[detailViewController.temalar Baslik_Renk] forState:UIControlStateNormal];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:47:12.620

这里：

```
 NSArray *aradizi = tableView == self.searchDisplayController.searchResultsTableView ? 
   [[NSArray alloc] initWithArray:self.filteredListContent] : 
   [[NSArray alloc] initWithArray:self.dizi]; 
```

您应该尽可能避免在 cellForRowAtIndexPath 内创建对象。
无论如何，您不需要：

```
 NSArray *aradizi = tableView == self.searchDisplayController.searchResultsTableView ? 
   self.filteredListContent : 
   self.dizi; 
```

在这里，您似乎在动态创建缩略图并调整其大小。：

```
 if ([[NSUserDefaults standardUserDefaults] boolForKey:cellresimyuk_s])
       cell.imageView.image = [[self Resim_Artwork:[aradizi objectAtIndex:indexPath.row]] 
       imageScaledToSize:CGSizeMake(65, 50)]; 
```

这势必会阻塞流畅的tableView scolling。所有这些都应该被预处理和缓存，或者至少在这里只处理一次并缓存以供重用。

像这样耗时的非 UI 处理可以转到另一个线程，这样即使图像还没有准备好显示，你的 scolling 也能保持流畅。像……</p>

```
 if ([[NSUserDefaults standardUserDefaults] boolForKey:cellresimyuk_s])
         dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
             UIImage* image = 
                [[self Resim_Artwork:[aradizi objectAtIndex:indexPath.row]] 
                    imageScaledToSize:CGSizeMake(65, 50)];
             dispatch_async(dispatch_get_main_queue(), ^{
                 //check our cell is still valid
                 if ([[self.tableView cellForRowAtIndexPath:indexPath] isEqual:cell]){
                     cell.imageView.image = image;
                     }
             });
         });

        else
            cell.imageView.image = nil; 
```

关于日期格式化程序：这些是重量级对象，您需要确保只创建一次，保存在一个属性中以供重用。我建议您执行以下操作：

声明两个日期格式化程序属性和另一个作为您的归零日期。在 viewDidLoad 中初始化它们：

```
 - (void)viewDidLoad {
        [super viewDidLoad];
        self.hoursFormat = [[NSDateFormatter alloc] init];
        [self.hoursFormat setDateFormat:@"HH:mm:ss"];
        self.minsFormat =  [[NSDateFormatter alloc]init];
        [self.minsFormat setDateFormat:@"mm:ss"];
        self.zeroDate   = [self.hoursFormat dateFromString:@"00:00:00"];
    } 
```

然后在 cellForRowAtIndexPath 中：

```
 NSDate* date = [self.zeroDate dateByAddingTimeInterval:theTimeInterval];
        if (theTimeInterval >= 3600) {
            self.label.text = [self.hoursFormat stringFromDate:date];
        } else {
            self.label.text = [self.minsFormat stringFromDate:date];
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T00:14:49.780

他是，谢谢你的回答。表现非常好。但自从我做了这个改变，程序就关闭了。新代码：

```
NSMutableArray *aradizi;
if (tableView == self.searchDisplayController.searchResultsTableView)
    aradizi = self.filteredListContent;
if (indexPath.section == 2 && tableView != self.searchDisplayController.searchResultsTableView)
    aradizi = self.dizi_klasorler;
if (indexPath.section == 3)
    aradizi = self.dizi_veriler;

if ([[NSUserDefaults standardUserDefaults] boolForKey:cellresimyuk_s]){
    if (cell.imageView.image == nil)
        cell.imageView.image = [[self Resimm:@".varsayilan" Koordinat:CGRectMake(120,1320, 80, 60) retinami:0 grubu:6] Resim_Skala:CGSizeMake(60, 45)];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        UIImage* image = [[self Resim_Artwork:[[aradizi objectAtIndex:indexPath.row] objectForKey:urlsi_s]] Resim_Skala:CGSizeMake(60, 45)];
        dispatch_async(dispatch_get_main_queue(), ^{
            //check our cell is still valid
            if (tableView == self.searchDisplayController.searchResultsTableView){
                if ([[self.searchDisplayController.searchResultsTableView cellForRowAtIndexPath:indexPath] isEqual:cell])
                    cell.imageView.image = image;
            }else{
                if ([[self.tableView cellForRowAtIndexPath:indexPath] isEqual:cell])
                    cell.imageView.image = image;
            }
        });
    });
}else
    cell.imageView.image = nil; 
```

[http://img29.imageshack.us/img29/1083/ekranresmi2013020301553.png](http://img29.imageshack.us/img29/1083/ekranresmi2013020301553.png)

[http://img502.imageshack.us/img502/5591/ekranresmi2013012919525.png](http://img502.imageshack.us/img502/5591/ekranresmi2013012919525.png)

# apache-flex - 在哪里可以找到 Apache Flex（4.9 版）文档？

> ID：14547655
> 
> 赞同：1
> 
> 时间：2013-01-27T13:06:48.917
> 
> 标签：apache-flex, flash-builder

我一直在寻找最新的 Apache Flex 文档，例如 asdoc。我在哪里可以找到它？以及如何将它集成到 Flash Builder 中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T15:28:00.877

Apache Flex 文档尚未发布，但您可以在[http://flex.apache.org/v2/asdoc/](http://flex.apache.org/v2/asdoc/)找到它们。

请注意该路径中的“v2”：这意味着这将是 Apache Flex 站点的下一个版本，但尚未正式启用。因此，您可以期望在文档中找到一些缺点。我知道的一个是没有指向 Adob​​e 的 ActionScript 类的链接，比如 - 说 - `flash.display.Sprite`。

恐怕我无法在 FlashBuilder 集成方面为您提供太多帮助，但这些文档通常包含在 SDK 中。如果我没记错的话（我的 FB 日子已经过去了一段时间），您可以在“构建路径”配置屏幕中添加文档的路径。

# java - 相对路径作为 InputStream 的输入

> ID：14547656
> 
> 赞同：0
> 
> 时间：2013-01-27T13:06:55.090
> 
> 标签：java, file, file-io

如何从相对路径读取文件？

我试过这个，但没有成功：

```
package es;

import java.io.File;
import java.io.FileInputStream;

public class Principal {

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception {
        File file = new File("/prueba/src/es/myFile.txt");
        FileInputStream fis = new FileInputStream(file);
    }

} 
```

我的项目很简单：

![项目截图](../Images/556879d82c1caaca3e3e0886cea564c3.png)

我得到的错误是：

```
Exception in thread "main" java.io.FileNotFoundException: \prueba\src\es\myFile.txt (El sistema no puede encontrar la ruta especificada)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at es.Principal.main(Principal.java:13) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:08:19.317

我发现了问题：

相对路径应该是：

```
File file = new File("src/es/myFile.txt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T13:09:44.297

`"/prueba/src/es/myFile.txt"`是绝对路径而不是相对路径。删除 intial`'/'`以获得相对路径。

# php - PHP使用strlen确定循环内的最长值

> ID：14547658
> 
> 赞同：-2
> 
> 时间：2013-01-27T13:07:37.480
> 
> 标签：php, loops

在 PHP foreach 循环中，我有一个人的名字循环。但是，在循环之外，我想确定循环内使用的最大长度。所以我在循环中可能有 6 个名字，其中大多数可能是 6-8 个字符长，但一个可能是 12 个字符。所以我想找到最大的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:09:27.973

```
$longest = '';
foreach($names as $name) {
    if(strlen($name) > strlen($longest)) {
        $longest = $name;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T13:13:04.083

作为更明显的变体，考虑一个功能实现：

```
$longest = array_reduce($names, function($longest, $candidate) {
    return strlen($longest) >= strlen($candidate) ? $longest : $candidate;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T13:13:57.030

```
$info = array();

$names = array("Name 1","Name 2","Name 3","This is the longest string","Name 4");

foreach($names as $key=>$value) {
    if(empty($info) || strlen($value) > $info[1]) {
        $info[0] = $key;
        $info[1] = strlen($value);
    }
}

echo 'The longest value is ', $names[$info[0]], ' which has ', $info[1], ' charachters and its array index is ', $info[0]; 
```

# python - Jira-Python - jira.client 导入错误

> ID：14547660
> 
> 赞同：4
> 
> 时间：2013-01-27T13:07:44.290
> 
> 标签：python, python-2.7, jira

我正在安装 jira-python 就像在文档中写的那样

$ pip 安装 jira-python

但安装后我尝试运行示例：

```
from jira.client import JIRA
options = {
    'server': 'https://jira.atlassian.com'
}
jira = JIRA(options)

projects = jira.projects()

keys = sorted([project.key for project in projects])[2:5]

issue = jira.issue('JRA-1330')

import re
atl_comments = [comment for comment in issue.fields.comment.comments
                if re.search(r'@atlassian.com$', comment.author.emailAddress)]

jira.add_comment(issue, 'Comment text')

issue.update(summary="I'm different!", description='Changed the summary to be different.')

issue.delete() 
```

收到以下错误：

```
**Traceback (most recent call last):
  File "jira.py", line 4, in <module>
    from jira.client import JIRA
  File "/home/ubuntu/jira.py", line 4, in <module>
    from jira.client import JIRA
ImportError: No module named client** 
```

对这里的问题有任何想法吗？我也在亚马逊实例上尝试过，但同样的问题......

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-20T20:47:25.017

似乎原因是我的测试文件被命名为 jira.py :) 感谢您的帮助 Inbar！

# php - 使用PHP将记录插入MYSQL数据库

> ID：14547670
> 
> 赞同：0
> 
> 时间：2013-01-27T13:08:54.350
> 
> 标签：php, mysql

希望是一个简单的修复，但整个周末一直困扰着我。

我有一个简单的脚本来连接到我的 MYSQL 数据库，然后使用 HTML 表单中的字段将新记录输入数据库。

该脚本工作得很好，但我没有在脚本中定义数据库列，只是使用插入然后引用 VALUES 作为 HTLM 表单字段。

在职的

```
mysql_select_db("golfingdb", $con);

mysql_query("INSERT INTO Test1 
VALUES
('$_POST[firstname]','$_POST[lastname]','$_POST[email]')");

mysql_close($con); 
```

不工作

```
mysql_select_db("golfingdb", $con);

mysql_query("INSERT INTO 'Test1' (First Name, Surname, Email) 
VALUES ('$_POST[firstname]','$_POST[lastname]','$_POST[email]')");

mysql_close($con); 
```

但是，当我在代码中引用数据库字段名称时，它无法创建新记录。

我已经三次检查了字段名称的拼写（包括大写字母），并且没有抛出任何语法错误。

任何帮助将不胜感激。

干杯

稻田

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:12:29.890

如果名称包含空格，则需要用反引号将列名括起来。

```
(`First Name`, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:24:10.517

Backstick 字符````应该用于转义表名和列名。`''`应该使用单引号字符来转义字符串值。

在您的第二个示例中，表名使用单引号而不是反引号进行转义。此外，字段名称根本没有转义，这可能会导致第一个包含空格的字段名称出现问题。

正确的形式是：

```
 mysql_query("INSERT INTO `Test1` (`First Name`, `Surname`, `Email`)
              VALUES ('$_POST[firstname]','$_POST[lastname]','$_POST[email]')"); 
```

同样重要的是要注意**PHP 的`mysql_`函数已被弃用**。强烈建议使用[为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T13:13:00.590

也许是两个字的列名。引用该列时，您可以使用“名字”或类似名称。

你能发布MySQL给你的确切错误吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T13:17:37.790

尝试这个

```
$firstname=$_POST["firstname"];
$lastname=$_POST["lastname"];
$email=$_POST["email"];

mysql_query("INSERT INTO Test1('First Name', 'Surname', 'Email') 
VALUES ('$firstname','$lastname','$email')"); 
```

确保您已创建具有正确数据类型和长度的表结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-15T13:51:30.093

我已经尝试过了，但它并没有增加我的数据库。这是代码：

```
<?php

// Connecting to Ganoderma genome database
include('../utils/config.php');

// Inserting new data into the table
$sql = "INSERT INTO $var2 ('$column_id', '$column_name', '$column_seq') VALUES ('$_POST[id]', '$_POST[name]', '$_POST[seq]')";

// Qualifying successful entry
if ($conn->query($sql) === TRUE) {
    echo "New record created successfully";
} else {
    echo "Error: " . $sql . "<br>" . $conn->error;
}

$conn->close();
?> 
```

生物信息学家，艾泽克

# msbuild - 从 MSBuild 运行 grunt

> ID：14547673
> 
> 赞同：10
> 
> 时间：2013-01-27T13:09:16.843
> 
> 标签：msbuild, gruntjs

该线程（[问题捕获错误输出](https://github.com/gruntjs/grunt/issues/117)）让您了解我正在努力解决的问题。我正在尝试从 MSBuild 运行 grunt，并且 grunt 错误未显示在 Visual Studio 输出窗口中。我在 Visual Studio Express 2012 for Web 中有一个 .NET 项目。我已经使用 IMPORT 标记将一个外部项目导入到项目构建文件中，并且在导入的项目中我有一个 Exec 任务试图运行 grunt。我显然希望在我的 Visual Studio 输出窗口中看到 grunt 输出的错误消息，而不必大惊小怪。我找到了一个非常简单的解决方法，至少将输出发送到文本文件。

```
grunt.cmd > grunt-output.txt 
```

此输出文件位于我的 .NET 项目文件夹中的某个位置，因此快速刷新并双击允许我打开输出文件并在 Visual Studio 中看到稍微乱码的 grunt 输出版本。

例如，我在 grunt.js 文件上运行 lint 任务，其中包含 JSHint 会反对的内容。我故意没有在后面加上分号`var hello`，所以你会收到错误消息`Missing semicolon`。

从命令行我得到一个格式很好的错误消息。

```
Running "lint:files" (lint) task
Linting grunt.js...ERROR
[L2:C10] Missing semicolon.
var hello

<WARN> Task "lint:files" failed. Use --force to continue. </WARN>

Aborted due to warnings. 
```

当我从 Visual Studio 运行它时，输出文件包含这种混乱的格式：

```
 [4mRunning "lint:files" (lint) task[24m
     Linting grunt.js...[31mERROR[39m
     [31m[[39m[33mL2[39m[31m:[39m[33mC10[39m[31m][39m [33mMissing semicolon.[39m
     var hello[31m[7m [27m[39m

     [31m<[39m[33mWARN[39m[31m>[39m [33mTask "lint:files" failed. Use --force to continue.     [39m [31m</[39m[33mWARN[39m[31m>[39m

     [31mAborted due to warnings.[39m 
```

有谁知道所有这些方括号和数字在做什么，任何人都可以想到一个命令行开关或 grunt 开关或 node.js 开关来解释它们并将它们转换为格式吗？看起来不像某种编码，它们看起来更像是向命令行环境建议如何格式化消息的标签。请不要建议运行某种正则表达式替换功能。我想要一些快速简单的东西，否则它会变得比它的价值更麻烦。

更新：[如果通过管道传输到另一个应用程序，则此链接输出将被切断，](https://github.com/visionmedia/mocha/issues/333)该链接指向 10 个月前节点上游的问题。虽然这已经解决了，但至少获得一个更具可读性的输出文件会很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-27T14:59:18.057

grunt 留言板上的这个线程[Pipe-redirecting Grunt's output is broken](https://github.com/gruntjs/grunt/issues/510)完美地解决了这个问题，并在我们等待整个问题得到修复时提供了一个快速的解决方法。它们是为输出着色的转义码，解决方法是使用 --no-color 选项去除着色。

当我从 MSBuild 运行此命令时

```
grunt.cmd --no-color > grunt-output.txt 
```

我得到格式良好的输出，其内容与命令行完全相同：

```
Running "lint:files" (lint) task
Linting grunt.js...ERROR
[L2:C10] Missing semicolon.
var hello 

<WARN> Task "lint:files" failed. Use --force to continue. </WARN>

Aborted due to warnings. 
```

没有颜色我也能活。但是，如果可以将其发送到输出窗口会很好，因为 MSBuild 在构建过程中抛出了看似错误的东西，而实际上它只是 JSHint 巧妙地伤害了我对 JavaScript 的感觉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T09:55:46.300

回应“我显然希望在我的 Visual Studio 输出窗口中看到 grunt 输出的错误消息，而不用大惊小怪。”

我会看看 VsCommandBuddy ...它可以帮助您将 grunt（以及与此相关的任何其他命令）直接集成到 Visual Studio 中。每个解决方案/项目都配置命令，在撰写本文时，可通过菜单、工具栏、快捷方式和快速启动...

[http://visualstudiogallery.msdn.microsoft.com/f5da988e-2ec1-4061-a569-46d09733c668](http://visualstudiogallery.msdn.microsoft.com/f5da988e-2ec1-4061-a569-46d09733c668)

这是一个我自己痒痒的项目。它帮助我完成瘦身。在我在 Visual Studio 中打开的每个解决方案中，我都会简单地看到我为该解决方案/或项目放置的所有外部命令。

输出根据需要通过输出窗口。grunt 的无颜色选项消除了所有噪音。

希望能帮助到你！！

# c++ - 小型 C++ 位集代码的问题

> ID：14547676
> 
> 赞同：0
> 
> 时间：2013-01-27T13:09:28.377
> 
> 标签：c++, bitset

我试图将以下代码写入我的编译器并编译它：

```
 #include <iostream>
#include <bitset>
using namespace std;

void binary(int a)
{
 cout << bitset<8>(a).to_string() << endl;
}

int main()
{

binary(16);

system("pause");
return 0;    
} 
```

它应该给我一个二进制输出，但我不断收到错误：

```
In function `void binary(int)': 
no matching function for call to `std::bitset<8u>::to_string()' 
```

我是 C++ 新手，真的不知道这意味着什么，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:19:54.050

我认为旧版本的`bitset::to_string<T>()`需要一个模板参数。所以这应该工作：

```
cout << bitset<8>(a).to_string<char>() << endl; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T13:14:13.983

bitset 没有 to_string 方法（stl 无论如何也不使用 to_string）。您应该自己迭代值。

# sql - 将特定有界数字插入多列表中的列

> ID：14547677
> 
> 赞同：0
> 
> 时间：2013-01-27T13:09:30.617
> 
> 标签：sql, sql-server, sql-server-2000

我想更新表中的`id`列并插入到`column1`600 中，如下所示：

更新前的表格：

```
id   name     date     comment
------------------------------
1    jack     9/10/12   null
100  david    9/11/12   20
158  sara     9/12/12   null
. 
```

更新后的表格：

```
1    jack     9/10/12   null
2    david    9/11/12   20
3    sara     9/12/12   null
.
597   "     "      "
598   "     "      "
599   "     "      "
600   "     "      " 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T16:45:29.677

您需要做的第一件事是找出您有多少行

DECLARE @COUNTER INT
SET @COUNTER = SELECT COUNT(*) FROM tbl_tablename

然后声明一个结构几乎完全一样的临时表（ID除外）

DECLARE @tmp_table TABLE
（
P_Id int PRIMARY KEY IDENTITY，
其余字段相同
）

现在将除 id 之外的所有内容插入到新表中

INSERT INTO @tmp_table（从 tbl_tablename 中选择名称、日期、注释）

清空原表

从 tbl_tablename 中删除

并插入临时表中的值

插入 tbl_tablename (SELECT * FROM @tmp_table)

现在您可以添加附加值

WHILE (@COUNTER <= 600)
BEGIN
SET @COUNTER = @COUNTER + 1
INSERT INTO tbl_tablename (@COUNTER, '', null, null)
END

而已。希望对你有帮助

# javascript - 如何通过代码反转 Highcharts 中的图表？

> ID：14547682
> 
> 赞同：5
> 
> 时间：2013-01-27T13:10:07.723
> 
> 标签：javascript, jquery, highcharts

我正在尝试通过 Highcharts 中的代码反转图表。

我正在设置图表反转属性：

```
chart.inverted = true;
chart.redraw(); 
```

你可以在这里看到我使用的代码：

[http://jsfiddle.net/Wajood/Hz4bH/](http://jsfiddle.net/Wajood/Hz4bH/)

这不会反转图表。在我看来， redraw() 函数似乎并不关心反转属性。

任何有关此事的帮助/建议/提示将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T13:15:10.610

调用`redraw()`只会重绘数据更改。浏览[Highcharts API](http://api.highcharts.com/highcharts#Chart)中的方法，似乎没有一种方法可以更改`inverted`现有图表的设置。

`chart.inverted`在这种情况下，您唯一的选择是销毁现有图表并使用相关设置创建一个新图表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-02T21:28:06.400

我遇到了类似的问题，并且能够使用`chart.update`.

```
chart.update({chart: {inverted: true}});
chart.redraw(); 
```

[http://api.highcharts.com/highcharts/Chart.update](http://api.highcharts.com/highcharts/Chart.update)

# java - Eclipse - 需要手动添加外部 jar

> ID：14547685
> 
> 赞同：1
> 
> 时间：2013-01-27T13:10:36.237
> 
> 标签：java, eclipse, compiler-errors, external

我有一个问题，通过[将 jfxrt.jar 添加到标准 Eclipse 构建路径](https://stackoverflow.com/questions/12209956/adding-jfxrt-jar-to-standard-eclipse-build-path)得到了回答。

我遵循了建议，将 jfxft.jar 作为外部 Jar 添加到我已安装的 jdk1.7.0_10.jdk JRE 上（在 Eclipse > Preferences > Java > Installed JREs 下）。

但是当我导入“javafx.application.Application”

它错误：

访问限制：由于所需库 /Library/Java/JavaVirtualMachines/jdk1.7.0_10.jdk/Contents/Home/jre/lib/jfxrt.jar 的限制，无法访问类型 Application

有关于此的帖子，例如[访问限制：由于对所需库的限制而无法访问..\jre\lib\rt.jar](https://stackoverflow.com/questions/9266632/access-restriction-is-not-accessible-due-to-restriction-on-required-library)

我可以通过该线程中的建议来解决这个问题（尽管我不相信它们是好的解决方案）。

或者我找到了将外部 Jar 直接添加到项目中的更好解决方案： - 转到 JRE 并按照上面的设置删除外部 Jar - 打开项目属性并转到 Java 构建路径 - 转到库选项卡 - 添加外部 JARS .. . 并选择完全相同的 jfxrt.jar

现在没有访问限制！

为什么它以一种方式工作而不是另一种？直接添加到 JRE 配置的好处是只需执行一次。

谢谢，

汉克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:17:36.233

我不建议像这样将 JAR 添加到 JRE 配置中，如果您不希望特定 JAR 出现在特定项目的构建路径上，那么很容易忘记它们的存在，并且可能会导致令人困惑的行为。另外，如果一个项目想要使用不同版本的库会发生什么？

我会考虑至少两个其他选项：

1.  为 JavaFX定义一个[用户库](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/java/buildpath/ref-preferences-user-libraries.htm)，然后将用户库包含在需要它的项目中。您仍然必须将用户库添加到需要它的每个项目中，但这并不是什么大不了的 IMO，因为每个项目只需执行一次。
2.  创建一个单独的项目来包含 JAR，将其命名为“JavaFX Libs”。将 JAR 添加到其构建路径并确保在[**Order and Export**](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/java/buildpath/ref-preferences-user-libraries.htm)[选项卡](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/java/buildpath/ref-preferences-user-libraries.htm)[上导出它们](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/preferences/java/buildpath/ref-preferences-user-libraries.htm)**；然后添加“JavaFx Libs”项目作为任何项目需要它的依赖项。**

# android - 如何检查是否安装了拨号器应用程序？

> ID：14547687
> 
> 赞同：3
> 
> 时间：2013-01-27T13:10:58.267
> 
> 标签：android

我的意思是，如何检查用户的设备不是没有拨号器的平板电脑（或音乐播放器）？
PS：我的应用程序使用在拨号器中输入的数字代码，所以我想检查它的存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T13:29:54.023

在您尝试调用它之前检查意图接收器/活动是否确实存在始终是一种好方法。

一些原因是：

如果意图不存在，您的应用程序将强制关闭。如果意图接收器不存在，您可能希望将用户重定向到市场以下载必要的应用程序。根据意图的存在，您可能希望使菜单选项出现/消失。

以下代码段包含两个函数： isIntentAvailable() 和 isActivityAvailable() ，它们可以执行检查并相应地返回布尔值。

```
public boolean isIntentAvailable(Context context, String action) {
    final PackageManager packageManager = context.getPackageManager();
    final Intent intent = new Intent(action);
    List resolveInfo =
            packageManager.queryIntentActivities(intent,
                    PackageManager.MATCH_DEFAULT_ONLY);
   if (resolveInfo.size() > 0) {
     return true;
    }
   return false;
} 
```

在使用它启动任何第三方应用程序之前，只需将您的操作字符串作为参数传递给此函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:50:48.313

似乎是我所需要的：

```
public static String TelephonyChecker (Context context) {
        TelephonyManager manager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
        if(manager.getPhoneType() == TelephonyManager.PHONE_TYPE_NONE){
            return "Off";
        }else{
            return "On";
        }
    } 
```

# r - PerformanceAnalytics Error t(w) %*% M3 : 需要数值/复数矩阵/向量参数

> ID：14547688
> 
> 赞同：0
> 
> 时间：2013-01-27T13:10:58.807
> 
> 标签：r, performanceanalytics

在 R 版本 2.15.2 上，在 PerformanceAnalytics 中使用 ES 函数时：

```
ES(R=indexes, weights=w) 
```

我收到以下错误：

```
Error in t(w) %*% M3 : requires numeric/complex matrix/vector arguments 
```

w 是

```
 [,1]
[1,]  0.5
[2,]  0.5 
```

is.matrix(w) 和 is.numeric(w) 都返回 TRUE

在不传递权重的情况下调用函数（即 ES(R=indexes) ）有效。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:20:28.873

使用这个 edhec 数据（与包一起给出）和权重向量我可以重现错误（下次请给出一个可重现的例子，否则我们将无法确定以下答案是否有意义）

```
weights <- c(0.2, 0.2, 0.1, 0.1, 0.5)       ## must be to number of columns in R"
ES(R = edhec[,1:5], weights= weights)
Error in t(w) %*% M3 : requires numeric/complex matrix/vector arguments 
```

由于 M3 矩阵为空而导致的错误。您需要将参数`portfolio_method`从默认值更改`single`为`component`. 帮助讨论*Component ES*部分中的权重，所以这是有道理的。否则，我认为您需要提供 m3，m4，mu ...（痛苦）

试试这个

```
ES(R = edhec[,1:5], weights= weights,
       portfolio_method= 'component')

$MES
          [,1]
[1,] 0.0331994

$contribution
Convertible Arbitrage            CTA Global Distressed Securities      Emerging Markets Equity Market Neutral 
          0.015504952          -0.006116166           0.004702236           0.007760899           0.011347477 

$pct_contrib_MES
Convertible Arbitrage            CTA Global Distressed Securities      Emerging Markets Equity Market Neutral 
            0.4670251            -0.1842252             0.1416362             0.2337662             0.3417977 
```

# asp.net - 为什么 ASP.NET TreeView 节点居中对齐

> ID：14547691
> 
> 赞同：0
> 
> 时间：2013-01-27T13:11:20.217
> 
> 标签：asp.net, css, treeview

为什么 ASP.NET TreeView 节点默认垂直居中对齐？有办法解决吗？我想要一个完整的页面高度 TreeView 与顶部对齐的节点。这条简单的行创建了一个 TreeView，其节点出现在 TreeView 的中间：

```
<asp:TreeView runat="server" ImageSet="Inbox" ID="tvMain" Height="500px" /> 
```

这是 VS2010 + ASP.NET 4.0，如果有的话。另外，如果需要的话，我对 CSS 解决方案持开放态度。

# mysql - MySQL在一个列上连接两列

> ID：14547692
> 
> 赞同：2
> 
> 时间：2013-01-27T13:11:27.300
> 
> 标签：mysql, sql, select, join

我有 2 张桌子：

1.  table_name：`user_tracking`
    包含列：id、bill_no、container_type、origin_id、destination_id

2.  table_name：`sea_ports`
    包含列：id、bill_no、port_name

我想编写一个查询来获取源端口名和目标端口名。

我的查询是：

```
select a.container_type, 
       b.port_name as origin_port
from user_tracking a 
left join sea_ports b 
on a.bill_no = b.bill_no 
where a.bill_number = '$bill_no' 
```

如何连接两列`origin_id`并在表`destination_id`中的同一字段上获得两个不同的输出？`id``sea_ports`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T13:14:52.387

您需要加入表格`sea_ports`两次，以便获得`port_name`每个起点和终点的信息。还有一件事，*我猜*，你需要使用`INNER JOIN`而不是`LEFT JOIN`因为总会有目的地和起源，对吧？`:D`

```
SELECT  a.ID,
        a.bill_no,
        a.container_type,
        b.port_name AS Origin_name,
        c.port_name AS Destination_name
FROM    user_tracking a
        INNER JOIN sea_ports b
            ON a.origin_id = b.id
        INNER JOIN sea_ports c
            ON a.destination_id = c.id
WHERE   a.bill_number = '$bill_no' 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# php - 根据另一个单元格值从表中提取单元格值

> ID：14547706
> 
> 赞同：1
> 
> 时间：2013-01-27T13:13:02.067
> 
> 标签：php, html, arrays, dom

HTML 文件： [http ://www.arifoorum.com/test/html.htm](http://www.arifoorum.com/test/html.htm)

我用 simplehtmldom 库得到了这个 html 内容：

```
array(66) {
  [0]=>
  array(14) {
    [0]=>
    string(4) "Item"
    [1]=>
    string(11) "Date, time:"
    [2]=>
    string(8) "mõõdikud"
    [3]=>
    string(6) "Name 2"
    [4]=>
    string(6) "Name 3"
    [5]=>
    string(9) "Meter ID:"
    [6]=>
    string(6) "V_HeEn"
    [7]=>
    string(6) "U_HeEn"
    [8]=>
    string(3) "V_V"
    [9]=>
    string(3) "U_V"
    [10]=>
    string(6) "V_InTe"
    [11]=>
    string(6) "U_InTe"
    [12]=>
    string(6) "V_OuTe"
    [13]=>
    string(6) "U_OuTe"
  }
  [1]=>
  array(14) {
    [0]=>
    string(1) "1"
    [1]=>
    string(19) "24.01.2013 22:23:33"
    [2]=>
    string(9) "Meter 002"
    [3]=>
    string(6) "&nbsp;"
    [4]=>
    string(6) "&nbsp;"
    [5]=>
    string(8) "40380040"
    [6]=>
    string(6) "&nbsp;"
    [7]=>
    string(6) "&nbsp;"
    [8]=>
    string(6) "&nbsp;"
    [9]=>
    string(6) "&nbsp;"
    [10]=>
    string(6) "&nbsp;"
    [11]=>
    string(6) "&nbsp;"
    [12]=>
    string(6) "&nbsp;"
    [13]=>
    string(6) "&nbsp;"
  }
  [2]=>
  ...
  }
} 
```

完整输出：[http ://www.arifoorum.com/test/test.php](http://www.arifoorum.com/test/test.php)

**如何从该数组中获取某些元素？**

例如：假设我想要值 where `mõõdikud = 01`and `name 2 = külm`(that should be 72,114) 。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:20:31.853

这可能对其他用户有用，所以我做了一个小函数，根据其他单元格的值（条件）从表格中获取单元格的值：

```
function getCellValue(DOMElement $table, $cellName = null, array $conditions = array()){

  // get all table rows
  $trs = $table->getElementsByTagName('tr');  

  // assume first TR is the table header
  $head = $trs->item(0);

  // find cell names and their index
  $keys = array();
  foreach($head->childNodes as $th)
    if(!($th instanceof DomText))
      $keys[] = trim($th->nodeValue);

  if($invalidKeys = array_diff(array_keys($conditions), $keys))
    throw new Exception(sprintf('Non-extistent key(s) in table: ', implode(', ', $invalidKeys)));

  // find the row that meets all conditions
  $targetRow = null;
  foreach($table->childNodes as $tr){

    // internal counter because we can't rely on DOM index
    $idx = 0;
    foreach($tr->childNodes as $td){

      if($td instanceof DomText)
        continue;

      $value = trim($td->nodeValue);

      // check if all conditions match
      if(array_key_exists($keys[$idx], $conditions))
        $targetRow = ($value != $conditions[$keys[$idx]]) ? null : $tr;

      $idx++;    
    }

    // stop if we found a match
    if($targetRow)
      break;
  }

  if(!$targetRow)
    throw new Exception('No row matches your conditions');

  // build an array with row cells
  $values = array();
  $idx = 0;
  foreach($targetRow->childNodes as $td)
    if(!($td instanceof DomText))
      $values[$keys[$idx++]] = trim($td->nodeValue);

  // return the cell value if a specific cell was requested
  if($cellName !== null)
    return isset($values[$cellName]) ? $values[$cellName] : null;

  // otherwise return all values from the matched row
  return $values;
} 
```

它使用[`DomDocument`](http://php.net/manual/en/class.domdocument.php)是因为该问题未标记为[simplehtmldom](/questions/tagged/simplehtmldom "显示标记为“simplehtmldom”的问题")

@OP：在您的情况下，您可以像这样使用它：

```
$html = file_get_contents('http://www.arifoorum.com/test/html.htm');

$dom = new DomDocument();
$doc->preserveWhiteSpace = false;
$dom->loadHtml($html);

$table = $dom->getElementsByTagName('table')->item(0);

print getCellValue($table, 'V_V', array(
  'mõõdikud' => '01',
  'Name 2'   => 'külm',
)); 
```

# python - OpenCV不会画圆 - Python

> ID：14547709
> 
> 赞同：4
> 
> 时间：2013-01-27T13:13:30.953
> 
> 标签：python, opencv, computer-vision

这有什么问题 - 为什么它不会在我创建的窗口中绘制圆圈？

```
 threeDWinName = "3D View"
    cv2.namedWindow(threeDWinName, cv2.CV_WINDOW_AUTOSIZE)
    img2 = cv2.imread('white.png', 0)
    cv2.imshow(threeDWinName,img2)
    cv2.circle(img2, (100,100),100,255,-1)
    cv2.imshow(threeDWinName,img2) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T13:32:21.483

你的代码对我有用。我看到你正在阅读的文件被称为`white.png`，并且通过加载它`0`你正在加载它`grayscale`，所以你正在绘制的圆圈也是白色的。这可能是问题所在；）

```
img2 = cv2.imread('black.png', 0)
cv2.circle(img2, (100,100),100,255,-1)
cv2.imwrite('circle.png', img2) 
```

![在此处输入图像描述](../Images/7a3c4d47fabb55716cb96f78900e4156.png)

或者如果你使用`img2 = cv2.imread('black.png')`，那么你会得到这个：

![在此处输入图像描述](../Images/657aecd3ea9cab6993a620f61bcebadb.png)

# php - 检索按下注册按钮的时间

> ID：14547715
> 
> 赞同：0
> 
> 时间：2013-01-27T13:13:59.313
> 
> 标签：php, forms, date, submit

我有一个简单的 php 表单。它完美地保存了数据库中的所有数据。但是现在我想要用户在填写表单后单击提交按钮时的确切日期和时间。目前它在数据库中将日期保存为 0000-00-00。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:16:00.037

在您的 INSERT 查询中，在日期字段中使用 NOW()

```
INSERT INTO `table`(`date`, .., ..) VALUES(NOW(), .., ..) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:18:15.730

如果您的数据库中有 created_at 之类的列，请使用 mysql

```
 ON CREATE CURRENT_TIMESTAMP 
```

# c++ - 异常安全：nothrow 交换的好处

> ID：14547719
> 
> 赞同：3
> 
> 时间：2013-01-27T13:14:21.507
> 
> 标签：c++, exception, swap

如果一个类型有一个不能失败的交换函数，这可以更容易地为其他函数提供[强大的异常安全保证](http://www.gotw.ca/gotw/059.htm)。这是因为我们可以首先完成函数的所有可能“偏向一边”失败的工作，然后使用非抛出交换来提交工作。

但是，保证交换永远不会失败还有其他好处吗？

例如，是否存在这样的情况，即无失败交换的存在使得另一个函数更容易提供*基本*保证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:13:19.153

假设我这样做：

```
class C {
  T a, b;  // invariant: a > b
  void swap(C& other);
}; 
```

如果 T::swap(T&) 可能抛出，似乎没有办法在基本保证的情况下实现 C::swap() 。我必须添加一个间接级别并存储 T* 而不是 T。

# html - 如何控制 Firefox 中表格单元格的溢出？

> ID：14547722
> 
> 赞同：4
> 
> 时间：2013-01-27T13:14:37.327
> 
> 标签：html, css, firefox, html-table

我有一张桌子，希望第一列有一个垂直滚动条。这适用于 iPad 上的 Chrome、IE9、Safari，但不适用于 Firefox？为什么不？我究竟做错了什么？

HTML：

```
 <table>
        <tbody>
            <tr>
                <td class="col1">
                    <div class="wrapper">
                        <p>Test</p>
                        <p>Test</p>
                        <p>Test</p>
                        <p>Test</p>
                        <p>Test</p>
                        <p>Test</p>
                        ...
                    </div>
                </td>
                <td class="col2">
                </td>
            </tr>
        </tbody>
    </table> 
```

CSS：

```
html, body {
margin: 0;
padding: 0;
height: 100%;
width: 100%;
}

table {
width: 100%;
height: 100%;
}

table .col1 {
width: 20%;
height: 100%;
}

table .col1>div.wrapper {
width: 100%;
height: 100%;
overflow: auto; 
}

table .col2 {
width: 80%;
height: 100%;
background-color: red;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T13:19:04.253

问题：

`overflow:scroll;`不会在`table`.

如果你对 a 做同样的事情`div`，那么它会正常工作。

查看[实时示例](http://jsfiddle.net/WX8Jj/)

例子：

**HTML**

```
<div class="col1" >
    <div class="wrapper">
        <p>Test</p>
        <p>Test</p>
        <p>Test</p>
        <p>Test</p>
        <p>Test</p>
    ...
    </div>
</div><div class="col2">
</div> 
```

更多阅读： http: [//lists.w3.org/Archives/Public/www-style/2006Mar/0030.html#replies](http://lists.w3.org/Archives/Public/www-style/2006Mar/0030.html#replies)

感[谢基尔坦](https://stackoverflow.com/users/83664/kirtan)

# asp.net - 发布 tfs 工作项入口应用程序

> ID：14547725
> 
> 赞同：1
> 
> 时间：2013-01-27T13:15:00.657
> 
> 标签：asp.net, tfs, tfs-workitem

我开发了一个包含 Web 表单的小程序。在此表单中，用户填写 Team Foundation Server 工作项的字段，我将其作为错误添加到**TFS工作项跟踪器。**到目前为止一切都很好，但是当我发布这个 Web 应用程序并托管时，`IIS 7`我遇到了以下异常：

> 无法加载文件或程序集“Microsoft.TeamFoundation.WorkItemTracking.Client.Cache”或其依赖项之一。试图加载格式不正确的程序。

请注意，我使用`.net 4`并且我的团队基础程序集的版本是 10。此外`IIS 7`，我的服务器上有。

请帮我解决这个问题。

# c# - 使用 EF LazyLoading 初始化属性？

> ID：14547728
> 
> 赞同：1
> 
> 时间：2013-01-27T13:15:24.523
> 
> 标签：c#, entity-framework, lazy-loading, lazy-evaluation

**更新**：我知道我不应该使用 a`DbSet`所以我按照 Erenga 的建议将实现更改为 ICollection

请考虑以下课程：

```
[Table("Tenant")]
public class Tenant : IEntity
{
    public int Id { get; set; }
    public string Name { get; set; }
    [Key]
    public string Guid { get; set; }
    public virtual ICollection<User> Users { get; set; }
}

[Table("User")]
public class User : IEntity
{
    public int Id { get; set; }

    public string Name { get; set; }
    public string EmailAddress { get; set; }
    public string Password { get; set; }
} 
```

第一个测试创建一个新租户和一个新用户，并将它们存储在适当的表中。

```
 [Test]
    public void CreateNewUserForNewTenant()
    {
        var user = _applicationContext.Users.Create();
        user.Name = "barney";
        user.EmailAddress = "barney@flinstone.com";

        var tenant = _applicationContext.Tenants.Create();
        tenant.Name = "localhost";
        tenant.Guid = Guid.NewGuid().ToString();

        tenant.Users.Add(user); // NullReferenceException, I expected the EF would LazyLoad the reference to Users?!
        _tenantRepository.Add(tenant);
        _applicationContext.SaveChanges();
    } 
```

`NullReferenceException`由于属性 Users 未初始化，因此该测试将失败。

我应该如何更改我可以依赖 EF 提供的 LazyLoading 的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:20:03.217

```
 var tenant = new Tenant
        {
            Name = "localhost",
            Guid = Guid.NewGuid().ToString(),
            Users = new List<User> { user }
        }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T13:41:23.597

我在这里看到了两个问题。

1.  正如@SimonWhitehead 提到的，引用类型默认初始化为null。延迟加载仅适用于 EF 创建的实体。这些实际上是您的类的子类，其中包含延迟加载的附加逻辑。

2.  `DbSet`不是实体支持的集合类型。您需要将类型更改为`ICollection`、`ISet`或`IList`。

这是一个工作示例

```
[Table("Tenant")]
public class Tenant : IEntity
{
    public int Id { get; set; }
    public string Name { get; set; }
    [Key]
    public string Guid { get; set; }
    public virtual ICollection<User> Users { get; set; }
}

[Table("User")]
public class User : IEntity
{
    public int Id { get; set; }

    public string Name { get; set; }
    public string EmailAddress { get; set; }
    public string Password { get; set; }
}

[Test]
public void CreateNewUserForNewTenant()
{
    var user = _applicationContext.Users.Create();
    user.Name = "barney"; 
    user.EmailAddress = "barney@flinstone.com";

    var tenant = _applicationContext.Tenents.Create();
    tenant.Name = "localhost";
    tenant.Guid = Guid.NewGuid().ToString();

    tenant.Users = new List<User> { user };
    _tenantRepository.Add(tenant);
    _applicationContext.SaveChanges();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T13:34:16.077

我想你期待这样的事情（不是线程安全的）：

```
[Table("Tenant")]
public class Tenant : IEntity
{
    private DbSet<User> _users;

    public int Id { get; set; }
    public string Name { get; set; }
    [Key]
    public string Guid { get; set; }

    public virtual ICollection<User> Users 
    {
        get 
        {
            if (_users == null)
                _users = new List<Users>();

            return _users;
        }
        set { _users = value; }
    }
} 
```

我相信这个`Lazy<T>`类也可以以某种方式使用，但我不熟悉那个类。

# java - 尝试使用 JSP 搜索相似图像时出错

> ID：14547729
> 
> 赞同：1
> 
> 时间：2013-01-27T13:15:33.460
> 
> 标签：java, sql, postgresql, jsp, numberformatexception

我正在使用 JSP、Java 和 PostgreSQL 构建一个用于特征提取和比较图像特征的 Web 应用程序。

我的特征提取是从图像中提取一些特征，然后我可以比较它们（一些特征是关于颜色的，一些关于图像的直方图等等。我有使用特定库提取它们的特殊方法（我添加到lib)，如您在以下示例中所见！

然后这些功能被成功添加到我的 PostgreSQL 数据库中。

```
public void GetImageProperties(String targetPath, ImageProperties imagesProperties) throws Exception
{
    // load image
    FileInputStream imageStream;
    imageStream = new FileInputStream(targetPath);
    BufferedImage bimg = ImageIO.read(imageStream);        

    // get properties
    imagesProperties.cl = new ColorLayoutImpl(bimg);
    imagesProperties.eh = new EdgeHistogramImplementation(bimg);
    imagesProperties.sc = new ScalableColorImpl(bimg);
} 
```

然后我将它们添加到 postgresql 数据库中（只有功能，而不是图像）

```
String query = "CREATE TABLE Images (" +
               "  imageid SERIAL PRIMARY KEY," +
               "  fname VARCHAR(128)," +
               "  colorlayout VARCHAR(512), " +
               "  edgehist VARCHAR(512), " +
               "  scalablecolor VARCHAR(512) " +
               ")"; 
```

每次我加载图像并想将它与目录中的所有其他图像进行比较时，我都会收到此错误。

```
HTTP Status 500 -     
type Exception report 
```

**信息：**

```
description The server encountered an internal error () that prevented it from fulfilling this request. 
```

**例外：**

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /query.jsp at line 124

121:  if (bSearch) { 
122:    // get form params 
123:    query.setTopK(new Integer(request.getParameter("frm_topk"))); 
124:    query.setColorHistogramWeight(new Integer(request.getParameter("frm_weight_c1"))); 
125:    query.setColorDistributionWeight(new Integer(request.getParameter("frm_weight_c2"))); 
126:    query.setTextureWeight(new Integer(request.getParameter("frm_weight_c3"))); 
127:  } 
```

**堆栈跟踪：**

```
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:568)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)    
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)   
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)    
org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

**根本原因：**

```
java.lang.NumberFormatException: For input string: "1.0"
java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)   
java.lang.Integer.parseInt(Integer.java:492)    java.lang.Integer.<init>
(Integer.java:677)  org.apache.jsp.query_jsp._jspService(query_jsp.java:256)    
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)  
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)    
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)     
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)    
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)   
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)    
org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.27 logs. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:28:05.987

你的问题在这里

```
query.setTopK(new Integer(request.getParameter("frm_topk"))); 
```

应该

```
String parFrm_topk = request.getParameter("frm_topk");
Integer frm_topk = null;
if (parFrm_topk != null && parFrm_topk.length() > 0 && !parFrm_topk.equals("null"))
try {
  frm_topk = Integer.valueOf(parFrm_topk);
} catch (NumberFormatException nfe){
  throw nfe;
}
if (frm_topk ! = null) {
   query.setTopK(frm_topk); 
```

此代码正在尝试检查可能为空的参数，为什么它为空取决于应用程序的流程以及参数如何通过 url 传递。

# codeigniter - 如何调试 CI-Merchant Paypal Pro 集成？

> ID：14547731
> 
> 赞同：1
> 
> 时间：2013-01-27T13:16:12.823
> 
> 标签：codeigniter, paypal-sandbox, ci-merchant

我正在尝试使用 CI-Merchant 库来集成 Paypal Pro（直接付款），但我迷路了..

我已经设置了一个英国沙箱（一个预先配置了 paypal pro 的卖家账户和一个包含以下信息的买家账户（$params 数组）

这是我得到的响应（状态失败，没有消息）以及我正在使用的 $params 数组：

```
Merchant_response Object
(
    [_status:protected] => failed
    [_message:protected] => 
    [_reference:protected] => 
    [_data:protected] => 
    [_redirect_url:protected] => 
    [_redirect_method:protected] => GET
    [_redirect_message:protected] => 
    [_redirect_data:protected] => 
)
Array
(
    [card_type] => Visa
    [card_no] => 4269072658337891
    [first_name] => Buyer
    [last_name] => One
    [address1] => 1 Main Terrace
    [city] => Wolverhampton
    [region] => West Midlands
    [postcode] => W12 4LQ
    [amount] => 10
    [currency] => GBP
    [country] => UK
) 
```

这是代码：

```
$this->load->library('merchant');
$this->merchant->load('paypal_pro');

$settings = array(
  'username' => '***',
 'password' => '***',
 'signature' => '***',
 'test_mode' => true);

$this->merchant->initialize($settings);

//params array is set through a form submit.
$response = $this->merchant->purchase($params);
echo '<pre>';
print_r($response);
print_r($params);
exit; 
```

请让我知道如何调试它！

谢谢你，乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T06:44:03.873

在这段代码之后

```
$this->load->library('merchant');
$this->merchant->load('paypal_pro'); 
```

你需要初始化

```
$settings = $this->merchant->default_settings(); 
```

和宾果游戏

# android - android 中基于 Twitter 的应用程序

> ID：14547734
> 
> 赞同：0
> 
> 时间：2013-01-27T13:16:39.473
> 
> 标签：android, database, twitter, hashtag

我正在尝试为 android 设备构建应用程序。它应该类似于 youtube 的“相关视频”部分，或者例如，在 amazon.com 中，您会看到一个部分说看过这本书的人也看过这些等等。我想，例如查看名为“ hobbit”并尝试找出这些用户还观看了哪些电影。我真的不知道从哪里开始有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:32:07.560

你没有说你有没有Android知识，所以首先你应该从[开发者页面](http://developer.android.com/training/index.html)开始，对Android开发有一个基本的了解。

Twitter也有一个[开发者页面](https://dev.twitter.com/)

您可以解析推文并查看它们的主题标签。推文始终具有提供元数据和有关 Twitter 上发布的内容的附加上下文信息的实体。

在这些实体中，您可以获得主题标签

```
"hashtags":[{"indices":[32,36],"text":"lol"}] 
```

获得这些主题标签后，您可以使用 Twitter API 进行搜索。

# asp.net-mvc - 根据模型的字段禁用 Telerik ASP.NET MVC 网格中的某些行

> ID：14547736
> 
> 赞同：-1
> 
> 时间：2013-01-27T13:16:51.903
> 
> 标签：asp.net-mvc, entity-framework, telerik-mvc

我的视图上有一个 Telerik asp.net 网格。连接到该网格的模型有一个名为“State”的字段。该字段保存每一行的状态。基于此状态，用户可以编辑某些行，而不能编辑其余行。例如，如果一行的状态为 0，则用户可以对其进行编辑，否则必须禁用该行的编辑按钮和其他命令。

**所以我的问题是：有没有办法根据模型的字段禁用某些行？**

这是简化的网格：

```
@{Html.Telerik().Grid<StationEvaluation>().Name("ManagementGrid").DataKeys(dataKeys => dataKeys.Add(o => o.StationEvaluationID)).Groupable().Filterable().Pageable().Sortable().DataBinding(dataBinding => dataBinding.Ajax()
                           .Delete("DeleteFromGrid", "StationEvaluation")
                        ).Columns(columns =>
                        {
                            columns.Command(commands =>
                            {
                                commands.Delete().ButtonType(GridButtonType.Image);
                                commands.Custom("Edit").Action("Edit", "StationEvaluation").ButtonType(GridButtonType.Image).Text("Edit");
                            }).Title("Manage").Width(50);
                            columns.Bound(o => o.FromDate);
                            columns.Bound(o => o.ToDate);
                            columns.Bound(o => o.DateShow);
                            columns.Bound(o => o.State).ClientTemplate("<#= StateDsc #>");
                            columns.Command(commands =>
                            {
                                commands.Custom("NextState").Action("NextState", "StationEvaluation").ButtonType(GridButtonType.Text).Text("Next state").Ajax(true);
                                commands.Custom("PreviousState").Action("PreviousState", "StationEvaluation").ButtonType(GridButtonType.Text).Text("Previous state").Ajax(true);
                            }).Title("Change state").Width(50);
                        }).Render();
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T09:30:03.597

我找到了解决方案。onRowDataBound 事件必须添加到网格中。在这种方法中，我可以隐藏用户需要他们编辑的列：

```
function ManagementGrid_onRowDataBound(e) {

    var dataItem = e.dataItem;

    if (dataItem.State == 0)
    {
        $(e.row).find("a.t-grid-PreviousState").hide();
    }
    else if (dataItem.State == 4) {
        $(e.row).find("a.t-grid-NextState").hide();
    }
} 
```

# javascript - 我怎样才能封装对象属性，使以前的对象不被接管？（原型/关闭。）

> ID：14547737
> 
> 赞同：1
> 
> 时间：2013-01-27T13:16:59.697
> 
> 标签：javascript, events, closures, prototype

我开始关注 Javascript 中的原型设计和闭包，但并不完全如此。下面这个例子，我的两个对象，第二个对象似乎失去了范围/上下文并接管了第一个对象的身份。

```
function broker()
{
    var _q = [];
    this.add = function(delegate) {_q[_q.length] = delegate; }
    this.broadcast = function(message)
    {
        for(qi = 0; qi < _q.length; qi++)
        {
            _q[qi](message);
        }
    }
}

function subscriber(abroker, yourname)
{
    me = this;
    this.myprop = yourname;
    this.subby = function(message){ alert(message + " " + me.myprop + me.dosomething() + secret()); };
    this.dosomething = function() {return "...abc";};
    function secret(){return "...def";}

    abroker.add(this.subby);
}

var thebroker = new broker();
var mysub = new subscriber(thebroker, 'mysub');
var myothersub = new subscriber(thebroker, 'myothersub');
thebroker.broadcast("hello from"); 
```

这个想法是有一个公共代理对象可以调用订阅者对象上的委托并在其中执行函数。但是我在代理调用的调用函数中失去了作用域。

**输出：** 2 个警报窗口，两个输出：“myothersub”，mysub 似乎失去了作用域？

通过在原始对象之外显式声明 subby 委托并引用整个对象，我已经成功地获得了正确的响应，例如：

而不是在订阅者对象中声明 this.subby ：

```
mysub.subby = function(message)
{
    alert(message + " " + mysub.myprop); // obv the dosomething his hidden
}

thebroker.add(mysub.subby); 
```

如果上述任何语法有误，请直接从记忆中输入。它在实践中确实有效，但失去了我习惯的封装。

如何在对象的丢失范围/上下文中使用原始技术进行封装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:24:21.703

**简短的回答：**看起来问题只是与您`me`在`subscriber`构造函数中的声明有关。至少您需要`var`在它前面放置一个以使其成为每个对象的本地/私有变量。所以`var me = this;`代替`me = this;`.

**说明：**在 JavaScript 中，当您不使用 显式声明变量时`var`，它会使变量成为全局变量。因此，在您的原始脚本中发生的是您创建`mysub`的声明`me`为对对象`this`内部的全局引用`mysub`。但是，一旦您创建`myothersub`了全局，就会`me`被覆盖到`this`新`myothersub`对象的内部。

因为您的`subby`方法创建了一个警报，该警报基于`me`您从哪个对象调用它并不重要，因为两个对象中的方法都没有使用任何本地或特定于对象的东西，而只是引用相同的全局变量 -`this`最后一个内部要创建的此类对象

通过简单地编写`var me = this;`而不是每次为您创建的每个新对象而不是被覆盖的对象在闭包内`me = this;`创建一个本地版本。`me`

...

**PS。额外小费。**您应该对所有变量执行此操作，以确保您拥有尽可能少的全局变量，尤其是当您并不意味着它们是全局变量时！因此，我会为构造函数`qi`中的变量做出相同的声明。`broker`您可以简单地通过在循环条件内声明来做到这一点，例如，`for (var qi = 0; qi < _q.length; qi++)`. 这足以停止`qi`成为全局变量。

但是，为了使您的代码易于阅读，最好在函数顶部声明所有变量。所以我建议简单地重写该`broadcast`方法：

```
this.broadcast = function(message) {
    var qi,             // STOPS `qi` BECOMING A GLOBAL
        ql = q.length;  // SO DON'T HAVE TO CHECK LENGTH OF `q` EVERY LOOP
    for(qi = 0; qi < ql; qi += 1) {
        _q[qi](message);
    }
}; 
```

如果你以前没有遇到过他，Douglas Crockford 是一位非常优秀的 JavaScript 编写者，涉及到闭包、对象创建和良好的代码编写约定。[此页面](http://javascript.crockford.com/code.html)上有很多提示，您可以很容易地找到他就该主题进行演讲的视频。当我开始更仔细地研究闭包和 JavaScript 的其他方面时，所有这些都对我很有帮助。希望它也能帮助你。

# php - 当我重复图像 10000 次时页面挂起.. 需要任何备用 jquery 或 javascript 解决方案

> ID：14547747
> 
> 赞同：-1
> 
> 时间：2013-01-27T13:18:08.893
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [PHP 重复页面上的图像](https://stackoverflow.com/questions/14547312/php-repeating-of-an-image-on-a-page)

我制作了一个 php 程序来在一个方形框中重复页面上的图像。

图像连续重复 100 次，然后垂直重复 100 次。这意味着在该方形框中重复了总共 100x100 个图像。一个这样的重复图像的大小是 10x10 像素。

现在的问题是，当要在 localhost 上测试站点时，页面挂起，尝试打开时，加载后上下滚动它很慢并且有点挂起。

我使用嵌套的 for 循环来重复图像。相同的代码是：

```
<?php
for($i=1;$i<=100;$i++)
{for($j=1;$j<=100;$j++)
    {
        echo '<div id="imagebox">';
        echo "<img src='images/image.png'>";
        echo '</div>';
    }
}
?> 
```

伙计们可能是什么问题？

提前感谢任何可能的解决方案。

任何替代编程技术解决方案，如 jquery 或 JS？

使用可能的解决方案，我使用此代码为每个图像单独设置了 ID

```
echo '<div id="imagebox"  . "i" . "j">'; 
```

但这也无济于事

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T13:21:29.077

也许尝试使用 javascript 延迟加载。它只会在屏幕上加载图像？

例如： http: [//www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T13:31:05.480

为什么不尝试获取图像尺寸，然后将容器 div 的高度和宽度设置为图像高度和宽度的 100 倍（分别），然后使用 CSS background-repeat 属性在 x 和 y 轴上重复图像. 当您尝试重复单个图像时，此解决方案可能会起作用。的HTML：

```
<div id="img"></div> 
```

Javascript：

```
$(document).ready(function() {
var imgSrc = "http://lorempixel.com/100/100";

$("#img").css({
    background: "url("+imgSrc+") repeat"
});

var newImg = new Image();
newImg.src = imgSrc; 

newImg.onload = function() {
    var imgHeight = newImg.height;
    var imgWidth = newImg.width;

    $("#img").css({
        width : imgWidth*100,
        height: imgHeight*100
    });
}
}); 
```

# objective-c - 导航控制器，没有故事板

> ID：14547749
> 
> 赞同：0
> 
> 时间：2013-01-27T13:18:13.357
> 
> 标签：objective-c, uitableview, uinavigationcontroller, xib

我正在用 Objective C 编写一个应用程序。对于这个项目，我不能使用 ARC 或故事板。它应该有 6 个视图。首先，导航控制器应保留表格视图（它将包含一些从数组传入的数据）。按下项目后，在顶部的工具栏中，应用程序应移至第二个视图。

我知道我需要在我的委托文件中编写代码，但我不太确定需要包含什么。这些是要求。

事实上，当我运行我的应用程序时，它并没有显示将表格视图作为我的条目视图的导航控制器。在设置中，我找不到复选框来选择它并使其成为条目视图。有什么建议么？最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:26:39.653

最佳使用方式`UITabBarController`

首先创建文件中的所有对象`UIViewController`并使用以下方法`UINavigationController``AppDelegate.h``AppDelegate.m`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window=[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds ]];

    self.viewCon=[[ViewController alloc] init];
    self.navCon=[[UINavigationController alloc] initWithRootViewController:self.viewCon];
    self.navCon.navigationBar.tintColor=[UIColor blackColor];
    self.viewCon.title=@"First View";

    self.fView=[[FirstViewController alloc] init];
    self.FnavCon=[[UINavigationController alloc] initWithRootViewController:self.fView];
    self.FnavCon.navigationBar.tintColor=[UIColor blackColor];

    self.fView.title=@"Secound View";

    self.sView=[[SecoundViewController alloc] init];
    self.SnavCon=[[UINavigationController alloc] initWithRootViewController:self.sView];
    self.SnavCon.navigationBar.tintColor=[UIColor blackColor];
    self.sView.title=@"Third View";
    .
    .
    // create UIViewController and UINavigationController As you need 
    .
    .
    .
    UIImage *img1=[UIImage imageNamed:@"Australia.gif"];
    self.tbItem1=[[UITabBarItem alloc] initWithTitle:@"First Page" image:img1 tag:1];
    self.viewCon.tabBarItem=self.tbItem1;

    UIImage *img2=[UIImage imageNamed:@"Cameroon.gif"];
    self.tbItem2=[[UITabBarItem alloc] initWithTitle:@"Secound Page" image:img2 tag:2];
    self.fView.tabBarItem=self.tbItem2;

    UIImage *img3=[UIImage imageNamed:@"Canada.png"];
    self.tbItem3=[[UITabBarItem alloc] initWithTitle:@"Third Page" image:img3 tag:3];
    self.sView.tabBarItem=self.tbItem3;

    NSMutableArray *viewArr=[[NSMutableArray alloc] init];
    [viewArr addObject:self.navCon];
    [viewArr addObject:self.FnavCon];
    [viewArr addObject:self.SnavCon];

    self.tbCon=[[UITabBarController alloc] init];
    self.tbCon.viewControllers=viewArr;

    [self.window addSubview:tbCon.view];

    [self.window makeKeyAndVisible];

    return YES;
} 
```

# flash - Flash AS2：如何删除循环播放的 mc？

> ID：14547750
> 
> 赞同：0
> 
> 时间：2013-01-27T13:18:14.537
> 
> 标签：flash, for-loop, actionscript-2, scene, mc

我正在制作一个有 2 个关卡、3 个场景的游戏。在最后一个场景之后，它将回到第一个场景的开头。问题出在最后一个场景中，我制作了一个 MC 循环，这些 MC 是使用以下代码拍摄的目标：

```
for(i=1;i<=numTarget;i++){
    tar=_root.attachMovie("mcTarget","t"+i,i);
    tar._x=random(Stage.width);
    tar._y=-random(Stage.height);
    tar._xscale=random(50)+50;
    tar._yscale=tar._xscale;
    tar.onEnterFrame=targetRun;
}

function targetRun(){
    this._y+=spdTarget*(this._xscale/100);
    if(this._y>Stage.height){
        this._x=random(Stage.width);
        this._y=-this._height;
    } 
```

我发现他们在第一个场景中一次又一次地出现，直到我进入第二个场景。我尝试了很多代码，现在一整天都把它们放在很多地方。我想要的是在我使用间隔代码的时间结束后删除它们。

我尝试过的，例如：

```
tar=delete _root.attachMovie("mcTarget","t"+i,i);
    mcTarget.swapDepths(_root.getNextHighestDepth(0));
    mcTarget.removeMovieClip(); 
```

或更改数量

```
numTarget=0; 
```

或者在真正的第一个场景之前创建一个假场景。还有这段代码，

```
_root.tar.swapDepths(_root.getNextHighestDepth());
    _root.tar.removeMovieClip(); 
```

或者

```
mcTarget._visible=false;
_root.tar._visible=false; 
tar._visible=false; 
```

我还能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:55:10.617

好的...因为我可以找到如何摆脱我制作为循环的 MC（s）（电影剪辑）的答案，所以我将在此处发布答案。在这种情况下，有 2 个场景，所以第一个是有 MC 的场景，另一个是我要停止 MC 的场景

要停止它，请转到第二个场景并将该 for 代码添加到您将 #1 场景放入帧中

```
 for(i=1;1<=numTarget;i+1){
delete this["t"+i"].onEnterFrame;
this["t"+i].removeMovieClip();
} 
```

请注意，您必须按照您的更改代码。

//使用delete _root..... <<我以前做的没有用，有人说因为这段代码会全部删除函数和所有没有手动放置在屏幕上的mc并将其卡在屏幕左上角 :P 它也确实发生在我身上。

# php - PHP sql 安全性

> ID：14547754
> 
> 赞同：4
> 
> 时间：2013-01-27T13:18:46.347
> 
> 标签：php, sql, security

我在我的变量上使用了 mysql_real_escape_string()，但是查看我的日志，我注意到来自某人的输入流，其中包含如下条目：

```
${@print(md5(acunetix_wvs_security_test))}

1\" or (sleep(4)+1) limit 1 -- 
```

等等。他们的一个巨大的名单。

他只是在尝试，什么都没有发生吗？还是仅使用 mysql_real_escape_string() 我的代码不安全？

编辑：我看不到任何损坏，但网站上的大部分输入区域都已尝试过很多次。如果它没有工作一次，他会不会停下来，意识到它是安全的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T13:28:25.840

这些条目来自 Acunetix Web 漏洞扫描（有关更多详细信息，请参见[http://www.acunetix.com/vulnerability-scanner/](http://www.acunetix.com/vulnerability-scanner/)）。

简而言之，这只是一个在您的站点上运行并测试已知安全问题的机器人。至于你的问题，他只是在尝试。即使您的站点存在漏洞，扫描程序也不会尝试破坏任何内容，只需将漏洞报告给测试人员。

也许稍后再次检查日志是个好主意，因为自动扫描可能是某人的自动信息收集，然后他尝试使用从自动扫描中获得的信息手动攻击您的站点。但我不知道您的应用程序有多重要。

编辑：不，扫描仪不会停止。这些扫描仪不是很聪明，不会尝试从以前的结果中学习。他们只通过定义的攻击列表工作，并在他们可以找到的每个输入/参数上尝试它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:27:59.423

似乎有人正在使用 acunetix venerability 扫描程序扫描您的站点。你能看到你的数据库数据有什么变化吗？如果是，他就成功了。

该工具非常强大，旨在查找脚本上的大量漏洞。

仅仅依靠 mysql_real_escape_string() 搜索并重新构建站点是不够的。侵入脚本的方法有很多，不仅仅是 mysql 注入。

阅读有关 PHP 和 MYSQL 安全性的更多信息。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-27T13:21:11.070

如果您一直使用`mysql_real_escape_string`，您应该可以安全地防止 SQL 注入。

*请注意，将来`mysql_query`会被[弃用](http://php.net/manual/en/function.mysql-query.php)，您不应该再使用它。*

# iphone - 连接字符串

> ID：14547756
> 
> 赞同：0
> 
> 时间：2013-01-27T13:19:01.633
> 
> 标签：iphone, xcode

这是我将数组中的不同 NSNumber 连接到一个字符串的代码。但由于某种原因，我在观察区得到了一个奇怪的结果。NSLog 的结果很好。也许你能帮忙？

```
for (int i = 0; i < [ViewController sharedInstance].safeZonesUserList.count; i++) {
    int userIndex = [[[ViewController sharedInstance].safeZonesUserList objectAtIndex:i] intValue];
    NSString *arrayValue = [NSString stringWithFormat:@"%d",userIndex];
    usersList = [usersList stringByAppendingString:arrayValue];
    if (i < ([ViewController sharedInstance].safeZonesUserList.count - 1)) {
        usersList = [usersList stringByAppendingString:@","];
    }
} 
```

我的数组包含 1 和 2，但我在监视区域得到的结果是：“1,2;\x8c\a@\x01\x03206”

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:07:46.113

您可以用一行代码替换您的示例：

```
NSString* usersListAsString = [[ViewController sharedInstance].safeZonesUserList componentsJoinedByString:@","] ; 
```

`componentsJoinedByString`获取`description`NSArray 中每个项目的 s，替换循环中的前 2 行代码。然后它将`description`s 与您指定的字符串 (",") 组合成一个 NSString，在它们之间替换您示例的第 3-5 行。

# c - 关于 C 中的指针的几个疑问

> ID：14547760
> 
> 赞同：3
> 
> 时间：2013-01-27T13:19:15.123
> 
> 标签：c

1）初始化我使用的指针：

```
int number, *Pnumber;
    Pnumber=&number;
    number=10; 
```

我这样做对吗？

关于什么：

```
int *Pnumber;
*Pnumber=10; 
```

当我编译它时，我得到：

> RUN FAILED（退出值1，总时间：858ms）

顺便提一句。我需要使用 free(Pnumber) 来释放内存吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T13:20:55.853

> 我这样做对吗？

是的，你是。

> 关于什么：

```
 `int *Pnumber;  
   *Pnumber=10;` 
```

`Pnumber`是一个未初始化的指针。取消引用此指针会导致未定义的行为。`Pnumber`必须指向分配的内存（指向变量或动态分配的内存区域）。

> 顺便提一句。我需要使用 free(Pnumber) 来释放内存吗？

只要你不使用`malloc`，就不要使用`free`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T13:22:31.807

在第一个版本中，您将指针 Pnumber 指向已分配的内存，因此您可以更改指针指向的值。这个版本是正确的。在第二个版本中，您从不指定指针指向的内容（它保持未初始化），因此当您尝试访问内存时，这将导致错误。所以第二个版本是**不**正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T13:20:23.050

您的第一种方法是正确的。

但这是错误的：

```
int *Pnumber;
*Pnumber=10; 
```

因为指针不指向有效内存，而在第一种方法中它确实指向。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T13:20:38.343

第一个是正确的

在第二个中，您缺少将指针指向内存空间。

指针是一个地址，所以

如果我们有

```
int *p; 
```

这意味着 p 是一个地址

*p 是内存地址的内容。

所以在你填充内存之前，指针应该指向一个内存空间

```
*p = 5; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-27T13:26:28.170

如果你使用指针，你“像你一样指向一个变量：

```
 int number, *Pnumber;
Pnumber=&number;
number=10; 
```

指针的优点是您可以为程序节省内存，因此如果您想更改数字的值（32 位整数），您可以使用 *Pnumber = 10; 在这里您使用的是整数，但是如果您使用它们的数组或双精度或浮点数，那么为什么最好在 32 位操作系统架构中将变量的地址保存在 32 位中，始终使用指针不'不管你指的是什么类型

# libpng - libpng 从内存缓冲区加载文件

> ID：14547765
> 
> 赞同：10
> 
> 时间：2013-01-27T13:19:46.280
> 
> 标签：libpng

我尝试浏览 libpng 文档，但没有找到我要查找的内容。

我有一个完全在内存缓冲区中的 PNG 文件，我该如何加载这个文件（除了创建临时文件的明显解决方案）？

[不确定它是否相关，但我使用 ctypes 从 Python 调用 libpng。]

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T09:38:00.407

我发现[这篇文章](http://pulsarengine.com/2009/01/reading-png-images-from-memory/)很好地描述了如何从内存中读取 PNG 文件。

总而言之，您必须创建一个自定义回调函数并将其提供给`libpng`using `png_set_read_fn`。然后在该回调函数中，您从内存缓冲区而不是文件中读取。

# windows-7 - 需要帮助才能开始使用 bugzilla

> ID：14547767
> 
> 赞同：1
> 
> 时间：2013-01-27T13:19:59.230
> 
> 标签：windows-7, installation, bug-tracking, bugzilla, software-quality

我一直在寻找一个教程，该教程可以清楚地解释如何在 Windows 7 上安装和开始使用 bugzilla。我发现的所有教程都没有帮助我：链接无效，使用旧版本或告诉我修改文件在我的系统上不存在。谁能指导我在哪里搜索有关如何开始使用 bugzilla 的更清晰的分步信息？任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:20:36.833

[https://wiki.mozilla.org/Bugzilla:Win32Install](https://wiki.mozilla.org/Bugzilla:Win32Install)很好地描述了在 Win32 平台上安装 Bugzilla、Apache 和 MySQL。

如果您希望使用 IIS 而不是 Apache，这可能会有所帮助 [http://lpsolit.wordpress.com/2010/10/22/make-bugzilla-work-with-iis7-easy/](http://lpsolit.wordpress.com/2010/10/22/make-bugzilla-work-with-iis7-easy/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T03:09:05.570

Bugzilla 是由志愿者提供的，所以虽然很遗憾没有人写出关于如何做你想做的事的最新文档，但它也反映出很少有人试图做同样的事情。

您的最佳行动方案取决于您是否愿意为支持付费。如果您愿意花钱请人帮助您，您可以查阅此列表：

[http://www.bugzilla.org/support/consulting.html](http://www.bugzilla.org/support/consulting.html)

如果您不愿意为支持付费，这里描述了一些方法：

[http://www.bugzilla.org/support/](http://www.bugzilla.org/support/)

您始终可以在此处创建错误以报告可用文档不是最新的：

[https://bugzilla.mozilla.org/enter_bug.cgi?product=Bugzilla](https://bugzilla.mozilla.org/enter_bug.cgi?product=Bugzilla)

# database - 在 db2 导入和导出命令中处理 CLOB 列

> ID：14547771
> 
> 赞同：0
> 
> 时间：2013-01-27T13:20:03.473
> 
> 标签：database, import, db2, export

我在不同的数据库中有一个源表和目标表

两个表具有相同的列结构。

一些列的类型为 CLOB。

我正在使用 db2 export 命令将源表的数据导出到 .dat 文件中。分隔符是“|”

然后使用 import 命令将 .dat 文件中的数据导入目标表。

```
import from $TEMP_DIR/TO_IMPORT.dat of del modified by KEEPBLANKS dateformat=\"YYYY-MM-DD\" timeformat=\"HH:MM:SS\" timestampformat=\"YYYY-MM-DD HH:MM:SS.UUU\" chardel0x01 coldel|  COMMITCOUNT 1000 messages $LOG_DIR/to_import.log insert into MY_SCHEMA.MY_TABLE 
```

但是，在导入期间，我在 CLOB 列上遇到错误。

导入期间如何处理 CLOB 列。或者，如果需要改变出口，改变是什么？

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:03:26.627

如果您指定了您得到的确切错误，那会更容易。

通常，如果您的 LOB 大于 32K，您需要将其导出到一个单独的文件中，并在导入期间将该文件与您的基本文件一起使用。导出时必须使用`LOBS FROM /Location/File`and 修饰符。`LOBSINFILE`

# javascript - 用 QtScript 解析 HTML？

> ID：14547774
> 
> 赞同：0
> 
> 时间：2013-01-27T13:20:12.920
> 
> 标签：javascript, qt4, qtscript

这是场景，我使用 QtNetwork 模块从互联网检索 html 页面，

在过去，我只是创建一个新的 QWebPage 对象，然后使用该`setHtml()`函数加载它并解析它（查找特定的标签和属性），但这看起来很蹩脚。

现在我想我可以通过 QtScript 来做到这一点，我会给出一个 QByteArray 作为输入，然后解析页面，获取一些元素和属性，但是使用 javascript 语法。

即在过去我会`QWebElement::findFirst()`在它们上加上一个 foreach 循环，现在我想做`getElementByID`类似的东西，不是用 C++ 代码，而是用纯 js。

那有可能吗？如果是这样，任何人都可以举一个代码示例吗？我正在运行 Qt 4.8.4

或者任何可以避免 QWebElement 样式解析的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:52:20.810

QTScript 是基于**ECMAScript**的，带有一些扩展，如信号/插槽。它不实现**DOM**。

QTScript 实际上已经实现了`ECMA-262 3rd Edition`. 所以不可能`getElementByID`在 QTScript 中使用，因为它没有在 ECMAScript 标准中定义，因为它实际上是在 DOM 中定义的。

但是，您可以为 DOM 操作创建自己的包装函数，也可以使用`QWebElement.findFirst()`QTScript 中的方法。

# javascript - For 循环打开 url

> ID：14547783
> 
> 赞同：4
> 
> 时间：2013-01-27T13:20:57.073
> 
> 标签：javascript, url, loops, for-loop

我正在使用 for 循环打开几个 url，但是它只打开数组中的第一项。我曾尝试使用 for ( i in array) 但它得出了相同的结果。

```
 <HTML>

<HEAD>

<SCRIPT LANGUAGE="JavaScript">

function launchproducts (form) {

var input_from_user = form.inputbox.value;

var product_numbers;

product_numbers = input_from_user.split(";",100000);

for ( var i = 0; i < product_numbers.length; i++) {
     launch_code = "http://www.youtube.com/results?search_query=" + product_numbers[i];

 window.open(launch_code, '_blank');

    }
}
</SCRIPT>
</HEAD>
<BODY>
<FORM NAME="myform" ACTION="" METHOD="GET">Enter product numbers: <BR>
<INPUT TYPE="text" NAME="inputbox" VALUE=""><P>
<INPUT TYPE="button" NAME="button" Value="Click" onClick="launchproducts(this.form)">
</FORM>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:38:08.730

试试这个 ：

```
<HTML>
<HEAD>
<SCRIPT LANGUAGE="JavaScript">
function launchproducts (form) {
var input_from_user = form.inputbox.value;
var product_numbers;
product_numbers = input_from_user.split(";",100000);
for ( var i = 0; i < product_numbers.length; i++) {
     var launch_code = "http://www.youtube.com/results?search_query=" + product_numbers[i];
     var go = confirm("Launch next ? (" + product_numbers[i] + ")");
     if (go) {
         window.open(launch_code, '_blank');
     }
  }
}
</SCRIPT>
</HEAD>
<BODY>
<FORM NAME="myform" ACTION="" METHOD="GET">Enter product numbers: <BR>
<INPUT TYPE="text" NAME="inputbox" VALUE=""><P>
<INPUT TYPE="button" NAME="button" Value="Click" onClick="launchproducts(this.form)">
</FORM>
</BODY>
</HTML> 
```

# c++ - 如何将 Argb32 加载到特征矩阵中以获得最佳性能？

> ID：14547788
> 
> 赞同：2
> 
> 时间：2013-01-27T13:21:11.600
> 
> 标签：c++, image-processing, eigen

给定一个 Int 数组，一个 Argb32 图像，我怎样才能以最好的方式将它加载到 Eigen Matrixes 中？

目标是创建一个小型图像处理库。作为第一部分，我想从 RGB 转换为灰度。

有没有任何方法可以将 int[] 加载到 3 个特征矩阵中而无需任何内存复制？

（当提到特征时，它的线性代数库）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T17:13:56.380

是的，使用具有适当内部跨度的 Map<> 类，例如：

```
unsigned char* data = ...;
int w, h; // the width and height
typedef Map<Matrix<unsigned char,Dynamic,Dynamic>, 0, InnerStride<4> > Slide;
Slice red(data, w, h), green(data+1, w, h), blue(data+2, w, h); 
```

然后你就可以开始玩它们了，例如，构造一个灰度浮点版本：

```
MatrixXf gray = (red.cast<float>() * 11 + green.cast<float>() * 16 + blue.cast<float>() * 5)/(32.*255.); 
```

# windows - 自定义 Excel 公式出错

> ID：14547789
> 
> 赞同：0
> 
> 时间：2013-01-27T13:21:21.447
> 
> 标签：windows, excel, formula

我有一个文件，其中有一个“创建日期”、一个“请求类型”和一个“截止日期”列。

在“到期日”列中，我制作了这个公式

```
=IF(OR(B2="PASSPORT LOST REPLACEMENT",B2="NATIONAL MDIFICATION"),A2+34, 
```

该公式将添加 34 天，然后在单元格 c 中打印结果，但是当我将“=”放在“IF”之前时，我收到以下错误消息：

> 你为这个函数输入了很多参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:28:14.583

我认为问题出在您拥有的公式的末尾 `IF(OR(WEEKDAY(A2)=7,WEEKDAY(A2)=1),A2+3, A2+5, IF(OR(B2="LETTERS",B2="PRINT FROM JAWAZAT",B2="EXTENDED OF VISIT VISA",B2="INFORMATION MODIFICATION"),A2+1)))`

`A2+3`您的 if 具有三个结果条件，即`A2+5`和`IF(OR(B2...`

应该只有其中两个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T15:12:34.033

假设条件的顺序没问题，你有一个括号放错了——这篇文章中的最后一个：

```
IF(OR(WEEKDAY(A2)=7,WEEKDAY(A2)=1),A2+3,A2+5), 
```

所以修正后的结果是：

```
=IF(OR(B2="PASSPORT LOST REPLACEMENT",B2="NATIONAL MDIFICATION"),A2+34,
   IF(OR(B2="OCCUPATION CHANGE"),A2+21,
       IF(OR(B2="IQAMA OF ISSUANCE",B2="IQAMAS RE-NEWAL",B2="LOST IQAMA REPLACEMENT",B2="TRANSFER OF SPONSORSHIP",B2="BUSINESS VISA R",B2="SEPARATION OF PERSONNEL"),A2+7,
            IF(OR(B2="LETTERS FROM SISTER COMPANIES",B2="NAME MODIFICATION", B2="MULTIPLE VISA",B2="ADD PERSONNEL"),IF(OR(WEEKDAY(A2)=7,WEEKDAY(A2)=1),A2+3,A2+5),
                IF(OR(B2="LETTERS",B2="PRINT FROM JAWAZAT",B2="EXTENDED OF VISIT VISA",B2="INFORMATION MODIFICATION"),A2+1))))) 
```

# visual-studio-2010 - WCF Web.config - 无法读取配置节“system.webserver”，因为它缺少节声明

> ID：14547800
> 
> 赞同：3
> 
> 时间：2013-01-27T13:22:45.573
> 
> 标签：visual-studio-2010, wcf, iis, web-config, asp.net-4.0

我在 Visual Studio 2010 上，目标是 4.0。这个 web.config 有什么问题？

我在本地 Web 服务器上收到 500 错误：无法读取配置部分“system.webserver”，因为它缺少部分声明

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <compilation debug="true" targetframework="4.0">
            <authentication mode="None">
            </authentication>
        </compilation>
    </system.web>
    <system.webserver>
        <modules runallmanagedmodulesforallrequests="true">
        </modules>
    </system.webserver>
    <system.servicemodel>
        <servicehostingenvironment aspnetcompatibilityenabled="true">
            <standardendpoints>
                <webscriptendpoint>
                    <standardendpoint crossdomainscriptaccessenabled="true">
                    </standardendpoint>
                </webscriptendpoint>
            </standardendpoints>
        </servicehostingenvironment>
    </system.servicemodel>
</configuration> 
```

它在 VS 中给了我这些警告：

警告 1 p:\jcp\WCF1\WCF1\Service1.svc: ASP.NET 运行时错误：无法识别的配置节 system.webserver。（p:\jcp\WCF1\WCF1\web.config 第 9 行） p:\jcp\WCF1\WCF1\Service1.svc 1 1 WCF1

警告 2 不允许使用“targetframework”属性。p:\jcp\WCF1\WCF1\Web.config 4 29 WCF1

警告 3 元素“编译”具有无效的子元素“身份验证”。预期的可能元素列表：“程序集、buildProviders、codeSubDirectories、expressionBuilders、folderLevelBuildProviders”。p:\jcp\WCF1\WCF1\Web.config 5 5 WCF1

我已将我的项目设置为使用本地 IIS 并在虚拟上创建。我的客户端是带有 iis7 的 Windows 7 pro，文件夹的 apppool 设置为 4.0。我需要在客户端上安装 .net 3.5 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-27T14:06:32.270

我认为有几个问题可能会导致您看到的错误：

1.  Web.configs 区分大小写。您需要对文本进行驼峰式大小写（例如`system.webServer`, `targetFramework`, `system.serviceModel`.）
2.  `system.web.authentication`是 的同级`system.web.compilation`，而不是它的子级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T10:40:55.607

我也有这个拼写错误，花了我几次才发现我错过了环境中的'n'，值得将整个文件放在 VS proj 中让它测试它

# c++ - 流行的 C++ 编译器对 std::sort 和 std::stable_sort 使用什么算法？

> ID：14547801
> 
> 赞同：18
> 
> 时间：2013-01-27T13:22:48.440
> 
> 标签：c++, algorithm, sorting, compiler-construction, computer-science

流行的 C++ 编译器对 std::sort 和 std::stable_sort 使用什么算法？我知道标准只给出了某些性能要求，但我想知道流行的实现在实践中使用了哪些算法。

如果它引用每个实现的参考，答案会更有用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-27T16:28:13.313

首先：编译器不*提供*. `std::sort`虽然传统上每个编译器都预先打包了一个标准库实现（它严重依赖于编译器的内置），但理论上您可以将一个实现换成另一个。一个很好的例子是 Clang 编译 libstdc++（传统上使用 gcc 打包）和 libc++（全新）。

既然这已经不成问题了……

`std::sort`传统上被实现为[*intro-sort*](https://en.wikipedia.org/wiki/Introsort)。从高级的角度来看，这意味着一个相对标准的快速排序实现（通过一些中值探测来避免 O(n ² ) 最坏情况）加上一个用于小输入的插入排序例程。然而，libc++ 实现略有不同并且更接近于 TimSort：它检测输入中已经排序的序列并避免再次对它们进行排序，从而导致在完全排序的输入上出现 O(n) 行为。它还对小输入使用优化的[排序网络](https://en.wikipedia.org/wiki/Sorting_network)。

`std::stable_sort`另一方面，本质上更复杂。这可以从标准的措辞中推断出来：*如果*可以分配足够的额外内存（暗示*合并排序*），复杂性是 O(n log n)，但如果不是，则退化为 O(n log ² n)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-27T13:35:38.160

如果我们以 gcc 为例，我们会看到它是 introsort for[`std::sort`](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.4/a01347.html#l05243)和 mergesort for [`std::stable_sort`](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.4/a01347.html#l03409)。

如果您浏览[libc++ 代码](http://llvm.org/svn/llvm-project/libcxx/trunk/include/algorithm)，您会发现`std::stable_sort`如果范围足够大，它也会使用合并排序。

您还应该注意的一件事是，虽然一般方法始终是上述方法之一，但它们都针对各种特殊情况进行了高度优化。

# javascript - 在控制器中的所有异步执行之后调用“渲染”的正确方法是什么？

> ID：14547806
> 
> 赞同：3
> 
> 时间：2013-01-27T13:23:22.980
> 
> 标签：javascript, node.js, asynchronous, callback, compoundjs

所以这里我们有一些基于[CompoundJS](http://compoundjs.com/)框架的应用程序和一些控制器：

```
load('application');

action('index', function () {
    someMethodWithAsyncCallback({}, function () {
        /* async preparing some params for template */
    });

    anotherMethodWithAsyncCallback({}, function () {
        /* async preparing another params for template */
    });

    // another couple of async calls

    // rendering index template
    render('index', { /* using async params */ });
}); 
```

问题是：如何`index`在所有回调结束后渲染模板？

也许[这个答案](https://stackoverflow.com/a/10428799/734493)`$.when`中有类似jQuery的描述？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:06:55.387

从概念上讲，您只需要跟踪您正在等待返回的异步调用的数量，我在下面的代码中对此进行了说明。但是有很多小库可以让这变得更通用、更优雅并给你更多的控制权（比如确保它们按顺序运行和类似的东西）。[例如async.js](https://github.com/caolan/async)。

```
 load('application');

action('index', function () {

    var asyncCounter = 2; // Or whatever number of async you want to complete...
    var completeFunc = function() {
        if (--asyncCounter > 0) {
            return;
        }
        // rendering index template
        render('index', { /* using async params */ });
    };

    someMethodWithAsyncCallback({}, function () {
        /* async preparing some params for template */
        completeFunc();
    });

    anotherMethodWithAsyncCallback({}, function () {
        /* async preparing another params for template */
        completeFunc();
    });

    // another couple of async calls

}); 
```

# java - 是否可以存储列表 作为 Google App Engine (GAE) 中实体的财产？

> ID：14547809
> 
> 赞同：3
> 
> 时间：2013-01-27T13:23:35.203
> 
> 标签：java, google-app-engine, google-cloud-datastore

```
 List<Key> items = new ArrayList<Key>();
    user.setProperty("ItemsList", items); 
```

上面给出的代码不起作用。在 GAE 中使用 Java 平台可以通过哪些方式实现这一点？

PS虽然以下代码运行良好 -

```
List<String> items = new ArrayList<String>();
user.setProperty("ItemsList", items); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T23:02:20.400

它应该可以正常工作。你忘记放物品了吗？如果您没有为项目设置 id，DataStore 将自动为实体分配一个整数数字 ID。您需要将生成的密钥放入列表中。这是示例代码：

```
DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
Entity item = new Entity("Item");
datastore.put(item);        

Entity user = new Entity("User");
List<Key> items = new ArrayList<Key>();
items.add(item.getKey());
user.setProperty("ItemsList", items);
datastore.put(user); 
```

请查看文档：[https ://developers.google.com/appengine/docs/java/datastore/entities](https://developers.google.com/appengine/docs/java/datastore/entities)

而且，最好通过 Objectify 等第三方 API 处理数据层：[http ://code.google.com/p/objectify-appengine/](http://code.google.com/p/objectify-appengine/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:21:19.213

它应该工作。

事实上，这是实现多对多和多对一关系的方法之一。

例如，请参见[http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Multi-Value_Relationship](http://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify#Multi-Value_Relationship)

`Key`在 Objectify 示例中使用的是`com.googlecode.objectify.Key<T>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T14:48:31.247

您不能在数据存储中存储空集合。它必须包含至少一个值。难道是你错过了...

```
items.add(item.getKey()); 
```

# c - 如何判断一个宏函数是否定义？

> ID：14547810
> 
> 赞同：1
> 
> 时间：2013-01-27T13:23:42.860
> 
> 标签：c, macros

这是一个头文件，

```
// a.h

#ifndef _A_H_
#define _A_H_

#ifndef MACRO_FUNC
#define MACRO_FUNC(X, Y) (X * Y + X - Y)
#endif

#endif 
```

上面的代码是我如何判断宏函数`MACRO_FUNC`是否定义的。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:26:22.417

是的，`#ifdef`或者`#ifndef`是测试正在定义的宏的正确方法。请注意，您也可以使用`#undef`后跟`#define`替换任何现有定义。

```
#ifdef MACRO_FUNC
#undef MACRO_FUNC
#endif
#define MACRO_FUNC(X, Y) (X * Y + X - Y) 
```

此外，您的示例宏会更好地表示为

```
#define MACRO_FUNC((X), (Y)) ((X) * (Y) + (X) - (Y)) 
```

考虑一下如果你打电话`MACRO_FUNC(somevar - 1, othervar + 1)`的原因不清楚，会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T13:26:33.407

是的，这是正确的方法。确保使用您自己的实现的另一种方法是首先取消定义任何先前的定义：

```
#ifdef MACRO_FUNC
#  undef MACRO_FUNC
#endif
#define MACRO_FUNC(X, Y) (X * Y + X - Y) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T13:25:28.030

这是你所做的正确方式

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-27T13:25:50.733

是的，由于宏是由预处理器评估的，因此您需要使用预处理器指令`#ifdef`或`#ifndef`检查是否存在。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-27T13:26:32.893

是的，这是您检查宏是否已定义的方式。

请注意，以 开头的标识符`_[A-Z]`是为实现保留的。例如更改`_A_H_`。`A_H_`

# r - 无法在 Mac OSX 10.5（豹）上安装 R 2.15.2

> ID：14547813
> 
> 赞同：0
> 
> 时间：2013-01-27T13:24:18.473
> 
> 标签：r

我的操作系统是 Mac OSX 10.5（豹）

我一直在尝试安装最新版本的 R 2.15.2。

从本站下载： [http ://cran.r-project.org/bin/macosx/](http://cran.r-project.org/bin/macosx/)

> 我收到的消息： - 您无法在此卷上安装适用于 Mac OS X 10.5 或更高版本（Leopard 构建）的 R 2.15.2。R 的 Leopard 版本需要 Mac OS X 10.5 或更高版本。对旧系统使用 Tiger 构建（可从 CRAN 获得）。

该错误的原因是什么？

# c# - 如何在 asp.net mvc 中回发嵌套模型

> ID：14547815
> 
> 赞同：0
> 
> 时间：2013-01-27T13:24:40.040
> 
> 标签：c#, asp.net-mvc, vb.net, asp.net-mvc-4, razor-2

首先很抱歉，如果这个问题具有误导性，但我真的不知道如何提出这个问题，所以我会尝试用例子来解释自己。

如果您可以为问题建议一个更好的标题，我很乐意更改它

**我有这些模型：**

```
Public Class Tag
    Property TagID As Integer
    Property Name As String
    <Column(TypeName:="image")>
    Property Image As Byte()
    Property ImageMimeType As String
    Property CategoryID As Integer

    Overridable Property Category As Category
End Class

Public Class Category
    Property CategoryID As Integer
    Property Name As String

    Overridable Property Tags As ICollection(Of Tag)
End Class 
```

**然后我的控制器是这样的：**

```
Function EditCategories() As ActionResult
        Dim categories As IEnumerable(Of Category) = UW.CategoryRepository.GetAll
        Return View(categories)
End Function 
```

现在是我开始把事情复杂化的时候（至少对我来说）

**我的看法是这样的：**

```
@modeltype IEnumerable(Of Category )
@Using Html.BeginForm("EditCategories", "Admin", FormMethod.Post,  New With {.enctype = "multipart/form-data"})
@Html.ValidationSummary(True)
    @<fieldset>
        <legend>Product</legend>
        @Html.EditorForModel()
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
End Using 
```

**在我的 EditorTemplate 文件夹中，我有这个视图**

```
@ModelType ProcesadoraVizcaya.Category 
<div class="category-edit">
    <div>
        @Html.HiddenFor(Function(model) model.CategoryID)
        <div class="info-area">
            <div class="editor-label">
                @Html.LabelFor(Function(model) model.Name)
            </div>
            <div class="editor-field">
                @Html.EditorFor(Function(model) model.Name)
                @Html.ValidationMessageFor(Function(model) model.Name)
            </div>
        <hr />
        </div>
        <div class="tags-area">
                @Html.Partial("EditTags",Model.Tags )
        </div>
    </div>
</div> 
```

如您所见，我正在使用局部视图来呈现每个**类别中的****标签**

 ****所以我的部分观点是这样的**

```
@ModelType IEnumerable(Of ProcesadoraVizcaya.Tag)

@Html.EditorForModel() 
```

**再次在我的 EditorTemplate 文件夹中，我有这样的视图**

```
@ModelType ProcesadoraVizcaya.Tag
<div>
    <div class="editor-label">
        @Html.LabelFor(Function(model) model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(Function(model) model.Name)
        @Html.ValidationMessageFor(Function(model) model.Name)
    </div>
    <div>
    </div>

</div> 
```

至此，一切顺利，懒加载运行，分别渲染我的所有类别和标签没有任何问题。

**但是当我使用以下方式回帖时：**

```
<HttpPost()>
Function EditCategories(Categories As IEnumerable(Of Category)) As ActionResult
     Return View(Categories)
End Function 
```

我明白了：

![在此处输入图像描述](../Images/70c2e86124f5faf3e4258cc712ddd024.png)

如您所见，标签什么都不是。

所以我的问题是这样的，我如何将这些标签返回给服务器？

（我有其他方法可以做到这一点，但我想知道是否可以使用这种方法来做到这一点）

（如果你有 C# 中的答案，请告诉我我会从中工作）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T13:40:33.880

> 如您所见，我正在使用局部视图来呈现每个类别中的标签

那是你的问题。您应该使用编辑器模板：

```
<div class="tags-area">
    @Html.EditorFor(Function(model) model.Tags)
</div> 
```

然后你应该有相应的`~/Views/Shared/EditorTemplates/Tag.vbhtml`模板。你不需要`EditTags.vbhtml`部分。**

# mysql - 在 MySQL 中创建动态数量的表

> ID：14547817
> 
> 赞同：0
> 
> 时间：2013-01-27T13:25:00.817
> 
> 标签：mysql, database, dynamic

好的，我正在做一个关于 DTH 管理系统的项目。我正在使用 MySQL DB 和 Java GUI。问题是我必须制作数据库，以便每次添加用户时，都必须插入一组表（例如 30 天，每天一个表）以添加值。这个新表对所有用户都具有相同的格式，唯一的事情是列值会发生变化。这就像一个矩阵，其中顶部水平行用于计时，左侧垂直行用于频道名称，如果用户在晚上 9 点在频道 9 上观看节目，则单元格 (channel9, 9) 的值为 1，否则为 0。这必须为每一天完成。

我的问题很简单，你是怎么做到的！！其次，系统的负载是什么。在 GUI 中，不得崩溃或花费大量时间来访问数据。

有没有其他方法可以更轻松有效地做到这一点。

请帮忙。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T16:43:08.727

不动态创建表的原因：

1.  你最终会得到孤立的表。例如，用户注册然后删除他的帐户。你怎么处理他所有的桌子？

2.  架构会改变。你的桌子设计现在很好，但我保证你以后会想要改变它。如何自动更新 10,000 个表？（可以编写脚本，但不愉快。）

3.  一切都有限度。我不知道 MySQL 的表限制可能是多少，但我猜如果活动不错，你会成功的。

4.  重构将非常困难。如果你打到 1-3 并认为这是一个坏主意，那么这将需要相当长的时间来改变。

如果您绝对无法找到一种方法来存储您在 MySQL 中所拥有的内容……作为最后的手段，您总是可以将您的对象序列化为 JSON 之类的东西并将结果放入一个字段中。做起来非常快速和容易，不需要一百万张桌子。

# javascript - 多个 window.onload 函数

> ID：14547818
> 
> 赞同：2
> 
> 时间：2013-01-27T13:25:14.943
> 
> 标签：javascript, javascript-events

我有调用的 Javascript 函数`start()`，它们有多个函数可以使用`window.onload`函数加载。但是，我有以下独立工作的功能。但是，如果我把它写在里面`window.onload`，那么它就行不通了。

```
//START()     
window.onload = start;

function start()
{
    loadValues();
    showState4();
} 
```

独立工作的代码很好。

```
window.onload=function(){
    document.getElementById("src2TargetAll").onclick = function() {
        sureTransfer(document.getElementById("net"), document.getElementById("target"), true);
    };
}; 
```

我尝试重新编写代码如下，`window.onload`但它不起作用。`window.onload`如何在单个函数中重写以下代码。

```
window.onload = start;

function start()
{
    loadValues();  //loadValues() and showState4() works fine without sendValues().
    showState4();
    sendValuess();  // tested this sendValues without above two functions and that also works fine. but three functions in window.onload creates a problem
}

function sendValuess(){
    document.getElementById("src2TargetAll").onclick = function() {
        sureTransfer(document.getElementById("net"), document.getElementById("target"), true);
    };
}; 
```

`sendValues()`添加到后我得到`window.onload`的错误如下：

```
STOP RUNNING THIS SCRIPT?
A SCRIPT ON THIS PAGE IS CAUSING YOUR WEB BROWSER TO RUN SLOWLY. IF IT CONTINUES TO RUN, YOUR COMPUTER MIGHT BECOME UNRESPONSIVE. 
```

以下是试图帮助我的人要求的 loadValues 和其他功能的代码：

```
function showState4(){
        var me = document.getElementById('stk1');
         var values = ''; //populate selected options
         for (var i=0; i<me.length; i++)
             if (me.options[i].selected)
                 values += me.options[i].value + ',';
         values = values.substring(0, values.length-1);
         var selected=[values];

         var temp= new Array();
            temp = values.split(",");

         var del = document.getElementById('StakeHolder');

         for(var i=0; i<del.length; i++)
           {
             for(var j=0;j<temp.length;j++)
              {  

                  if(temp[j] == del.options[i].value)
                    {

                       del.options[i].selected = true;
                    }
               }  
           }
         }

     function loadValues()
     {
    var  RD_REQ_RT_ID = "<%=RD_REQ_RT_ID %>";
    if(RD_REQ_RT_ID=="null")
     {
    document.getElementById('requestType').value="";
     }
     else{
    document.getElementById('requestType').value=RD_REQ_RT_ID;
    }
    )

_

     function sureTransfer(from, to, all) {
    if ( from.getElementsByTagName && to.appendChild ) {
        while ( getCount(from, !all) > 0 ) {
            transfer(from, to, all);
        }
    }
     }
     function getCount(target, isSelected) {
    var options = target.getElementsByTagName("option");
    if ( !isSelected ) {
        return options.length;
    }
    var count = 0;
    for ( i = 0; i < options.length; i++ ) {
        if ( isSelected && options[i].selected ) {
            count++;
        }
    }
    return count;
    }
    function transfer(from, to, all) {
    if ( from.getElementsByTagName && to.appendChild ) {
        var options = from.getElementsByTagName("option");
        for ( i = 0; i < options.length; i++ ) {
            if ( all ) {
                to.appendChild(options[i]);
            } else {
                if ( options[i].selected ) {
                    to.appendChild(options[i]);
                }
            }
        }
    }
     } 
```

如何将 sendValuess() 添加到 window.onload 没有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-10T09:10:46.170

```
window.addEventListener will not work in IE so use window.attachEvent

You can do something like this

function fun1(){
    // do something
}

function fun2(){
    // do something
}

var addFunctionOnWindowLoad = function(callback){
      if(window.addEventListener){
          window.addEventListener('load',callback,false);
      }else{
          window.attachEvent('onload',callback);
      }
}

addFunctionOnWindowLoad(fun1);
addFunctionOnWindowLoad(fun2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T04:02:51.860

错误：

```
STOP RUNNING THIS SCRIPT?
A SCRIPT ON THIS PAGE IS CAUSING YOUR WEB BROWSER TO RUN SLOWLY.
IF IT CONTINUES TO RUN, YOUR COMPUTER MIGHT BECOME UNRESPONSIVE. 
```

它发生在 IE 在兼容模式下运行时。（在使用 FB 和 Google+ 时发生）转到“工具”菜单并选择“兼容性视图设置”选项。这将打开一个窗口，您可以在其中关闭“使用兼容性视图显示所有网站”功能。

# python - 套索或矩形 matplotlib

> ID：14547820
> 
> 赞同：2
> 
> 时间：2013-01-27T13:25:21.667
> 
> 标签：python, matplotlib, wxpython

我在 matplotlib 中创建了一个散点图，但是我想让它具有交互性。我想要它，所以我可以在图表上选择多个绘制点。
我在 matplotlib 网站上看到了 lasso 函数，但不知道如何放入我的代码中，因为一些代码在 main 位中。我更喜欢的是很像缩放功能的例子，你有一个矩形。但是我不知道如何做到这一点

到目前为止，我的代码只允许您选择一个点

```
 def showFrame(self, msg):

   self.pubsubText.SetLabel("This is the Contact Map for the chain "+msg.data[0]+" in the PDB file "+msg.data[1])
   self.dpi = 100
   self.fig = figure.Figure((5.0, 4.0), dpi=self.dpi)
   self.canvas = wxagg.FigureCanvasWxAgg(self, -1, self.fig)
   self.axes = self.fig.add_subplot(111)

   self.vbox = wx.BoxSizer(wx.VERTICAL)
   self.vbox.Add(self.canvas, 1, wx.LEFT | wx.TOP | wx.GROW)
   self.vbox.AddSpacer(25)
self.toolbar = wxagg.NavigationToolbar2WxAgg(self.canvas)
self.vbox.Add(self.toolbar, 0, wx.EXPAND)
   self.SetSizer(self.vbox)
   self.vbox.Fit(self)

def draw_figure(self):

    def onpick3(event):
           ind = event.ind
           print('onpick3 scatter:', ind, np.take(x, ind), np.take(y, ind))
    self.axes.get_xaxis().set_visible(False)
    self.axes.get_yaxis().set_visible(False)
       self.axes.clear()
       x, y= [e[0] for e in number_list],[e[1] for e in number_list]
       self.axes.scatter(x, y,color="black",picker=True)
    self.canvas.mpl_connect('pick_event', onpick3)
       self.canvas.draw()
draw_figure(self)

frame=self.GetParent()
frame.Show() 
```

基本上我要问的是如何将套索或矩形应用于我的代码

# php - Facebook opengraph - 从 Facebook 群组获取最新的 5 条更新帖子？

> ID：14547824
> 
> 赞同：0
> 
> 时间：2013-01-27T13:25:34.103
> 
> 标签：php, json, facebook-opengraph

是否有可能以及如何从 Facebook 群组墙上获取最新的 5 个**更新帖子？**

当我运行[https://graph.facebook.com/GROUP_ID/feed?access_token=MY_TOKEN&limit=5](https://graph.facebook.com/GROUP_ID/feed?access_token=MY_TOKEN&limit=5)时，我会收到最新的 5 个**已发布**帖子。

在 Facebook 文档中，我无法找到是否有用于获取最新更新帖子的 URL 参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:47:54.170

您可以使用 FQL[流表](https://developers.facebook.com/docs/reference/fql/stream)执行此操作：

```
https://graph.facebook.com/fql?q=
  SELECT message, attachment, actor_id, created_time, updated_time FROM stream
    WHERE source_id = GROUP_ID ORDER BY updated_time DESC 
```

# sql - 选择唯一值 SQL

> ID：14547825
> 
> 赞同：0
> 
> 时间：2013-01-27T13:25:36.440
> 
> 标签：sql

运行此 SQL 查询时，它会返回每个 Find_ID 四次，我怎样才能让它只选择唯一的查找？

```
SELECT A.FIND_ID, B.NAME, PERIOD
FROM FINDS A, CLASS B
WHERE A.X >= 4
AND A.X <= 10
AND A.Y >= 4
AND A.Y <= 10
AND FIND_ID = DISTINCT 
```

这返回

```
FIND_ID NAME                 PERIOD
========== ==================== ====================
         2 SHARD                BRONZE
         5 SHARD                BRONZE
         2 METAL_WORK           IRON_AGE
         5 METAL_WORK           IRON_AGE
         2 FLINT                MESOLITHIC
         5 FLINT                MESOLITHIC
         2 BONE                 RECENT
         5 BONE                 RECENT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:29:08.910

使用 distinct 属性.. Select Distinct(SAMPLE) From table1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:46:29.130

如果两个表 FINDS 和 CLASS 相关，则需要使用某种连接（INNER，猜测）。您获得四个结果的原因是您正在运行一个返回结果的笛卡尔积的查询 - 也就是说，您将获得两个表的所有组合连接在一起，而没有一个公共字段将它们连接在一起。

这是一个例子。假设您有以下两个非常简单的表格：-

```
PersonID   Name
1           Matt
2           Fred

PersonID   Salary
1           23000
2           18000 
```

然后是这样的查询： -

```
SELECT * FROM Person, Salary 
```

会返回类似：-

```
PersonID  Name  PersonID  Salary
1         Matt  1         23000
2         Fred  2         18000
1         Matt  2         18000
2         Fred  1         23000 
```

等等，四个记录，你可能期望两个。向其中添加 DISTINCT 将一事无成，因为每一行都是不同的。要链接相关表格，您需要以下内容： -

```
SELECT * FROM Person INNER JOIN Salary ON Person.PersonID = Salary.PersonID 
```

# ios - 如何将视图保存为图像

> ID：14547828
> 
> 赞同：0
> 
> 时间：2013-01-27T13:25:54.423
> 
> 标签：ios, objective-c, rubymotion

我正在使用 Rubymotion 构建一个 iOS 应用程序。在这个应用程序中，我让用户通过在视图上绘制来“签名”他们的名字。我想将此“签名”保存为真实图像，以便可以将其上传到服务器。

我想我在这里找到了一个 Objective-C 解决方案：[iPhone : How to save a view as image ??? （例如保存你画的东西）](https://stackoverflow.com/questions/6079273/iphone-how-to-save-a-view-as-image-ex-save-what-you-draw)

代码如下所示：

```
UIGraphicsBeginImageContext(view.bounds.size);
[view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

我试图将这段代码“翻译”成 Ruby，如下所示：

```
UIGraphicsBeginImageContext(signature.bounds.size)
signature.layer.renderInContext(UIGraphicsGetCurrentContext)
image = UIImage.UIGraphicsGetImageFromCurrentImageContext()
UIGraphicsEndImageContext() 
```

但是运行它时出现此错误：

```
uninitialized constant SignatureController::UIGraphicsGetCurrentContext (NameError)
2013-01-27 14:20:29.943 buy_app[18384:13d03] *** Terminating app due to uncaught exception 'NameError', reason: 'signature_controller.rb:88:in `save': uninitialized constant SignatureController::UIGraphicsGetCurrentContext (NameError) 
```

我究竟做错了什么？将普通视图保存到图像中的最佳方法是什么？

谢谢！

**更新**

我是这样解决的：

```
UIGraphicsBeginImageContext(signature.bounds.size)
signature.layer.renderInContext(UIGraphicsGetCurrentContext())
image = UIImage.UIGraphicsGetImageFromCurrentImageContext()
UIGraphicsEndImageContext()
image = UIImagePNGRepresentation(image) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T13:44:37.330

我这样解决了

```
UIGraphicsBeginImageContext(signature.bounds.size)
signature.layer.renderInContext(UIGraphicsGetCurrentContext())
image = UIImage.UIGraphicsGetImageFromCurrentImageContext()
UIGraphicsEndImageContext()
image = UIImagePNGRepresentation(image) 
```

# ios - iOS iPhone 设备统计信息

> ID：14547830
> 
> 赞同：0
> 
> 时间：2013-01-27T13:26:14.943
> 
> 标签：ios

是否有一个组件/控件/类我可以用来收集有关 iPhone / iPad 的设备统计 **信息**

特别是我对以下统计数据感兴趣 -

UDID：设备名称：系统名称：系统版本：6.0 平台：iPhone 5 硬件型号：N41AP 处理器：2 CPU 频率：0 Hz 总线频率：0 Hz 物理内存：1 GB 非内核内存：872.95 MB 型号：iPhone 本地化型号: iPhone 语言: en 语言环境: en_US 容量: 32 GB 格式化: 28.08 GB 已用: 13.48 GB 免费: 14.6 GB 电池状态: 正在充电 电池电量: 70% 本地 IP: MAC 地址:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:48:01.790

All this is possible, but big part of this is ilegal. Apple will reject your app if you try to detect MAC Address for example. However, you can play with private frameworks who will provide you all this info.

# javascript - 从回调函数中获取参数

> ID：14547831
> 
> 赞同：0
> 
> 时间：2013-01-27T13:26:15.677
> 
> 标签：javascript, google-chrome-extension

我有一个看起来像这样的函数：

```
main.add = function(){
    var newTabId;
    chrome.tabs.create({"url":"enter.html","active":true},
        function(tab) {
            newTabId = tab.id;
        }
    );
    console.log(newTabId);
} 
```

但是当`newTabId`打印到控制台时， chrome.tabs.create 函数没有运行，所以 var 是`undefined`.

有没有办法确保 chrome 命名空间中的代码在运行它下面的任何内容之前完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:50:07.260

首先，做 newTabId 全局，在函数之外定义它。您的两个“newTabId”属于不同的命名空间。

其次， chrome.tabs.create 中的函数将在您的主要代码完成后启动。这是异步编程。chrome API 都是异步的，所以，习惯吧，遗憾的是，没有解决方法。

如果你想开始考虑异步，我推荐使用带有 jQ​​uery 的[deferred的](http://api.jquery.com/category/deferred-object/)[promise](http://api.jquery.com/promise/)。

# apache-flex - 在 JSP 中实现 Flex Chart

> ID：14547832
> 
> 赞同：0
> 
> 时间：2013-01-27T13:26:18.457
> 
> 标签：apache-flex, jsp, integration, chartfx

我有一个显示未来销售图表以及其他内容（按钮、文本框等）的 jsp，并且该图表已使用 chartfx 实现。
现在我需要使用 Adob​​e flex 来实现这个图表，而不需要修改 jsp 中的其他组件。

我该如何开始？正确的方法是什么？刚接触 flex，因此很难找到解决方案。请帮忙。谢谢

# android - Widget.Holo.TextView.ListSeperator 导致 Settings.apk 崩溃

> ID：14547840
> 
> 赞同：0
> 
> 时间：2013-01-27T13:26:37.547
> 
> 标签：android, styles, cyanogenmod

我正在为 CyanogenMod 10.1 制作主题，但我偶然发现了一个问题。

我将此添加到我的 styles.xml 中：

```
<style name="Widget.Holo.TextView.ListSeparator" parent="@android:style/Widget.QuickContactBadge">
    <item name="android:textColor">@color/list_divider_text_color</item>
    <item name="android:gravity">center</item>
    <item name="android:background">@drawable/frameworks_res_list_section_divider_holo_dark</item>
    <item name="android:textAllCaps">true</item>
</style> 
```

显然`<item name="android:gravity">center</item>`使它崩溃。我尝试使用 CyanogenMod 和 AOKP 的最新框架编译它，但一些用户仍然在 settings.apk 中强制关闭/崩溃。

我有一些用户提供的 logcat，但它们大多没用。

如果有人知道如何解决这个问题并使其适用于所有人，我将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:40:02.693

某些 listpreference 不能同时支持 QuickContactBadge。所以你可以做的是删除背景......

这就是我修复我的 FC 的方法，所以不包括背景。:(

[https://github.com/XYAOSP/vendor-tmobile-themes-SnapBlack/commit/5b324cee69f202acb1d62bb9e967cdac29938e82](https://github.com/XYAOSP/vendor-tmobile-themes-SnapBlack/commit/5b324cee69f202acb1d62bb9e967cdac29938e82)

# c++ - 在 sdl 中显示移动的对象

> ID：14547844
> 
> 赞同：1
> 
> 时间：2013-01-27T13:26:51.033
> 
> 标签：c++, sdl

我的 SDL 程序有问题。我的目标是让一个点沿着一条线移动。我将所有坐标保存在数据文件中。所以我只想从文件中读取它们并在正确的位置显示点。点类（名为 linefollower）看起来像这样。

```
class Linefollower
{
private:
    int x, y;
    char orientation;

public:
    //Initializes the variables
    Linefollower();

    void set(int m_x, int m_y, char m_orietnation);

    void show();

    char get_orientation();
};

Linefollower::Linefollower()
{
    x = 0;
    y = 0;
    orientation = 'E';
}

void Linefollower::set(int m_x, int m_y, char m_orientation)
{
    x = m_x;
    y = m_y;
    orientation = m_orientation;
}

void Linefollower::show()
{
    //Show the linefollower
    apply_surface(x, y, linefollower, screen );
}

char Linefollower::get_orientation()
{
    return orientation;
} 
```

apply_surface 函数。

```
void apply_surface( int x, int y, SDL_Surface * source, SDL_Surface* destination)
{
//Temporary rectangle to hold the offsets
SDL_Rect offset;

//Get the offsets
offset.x = x;
offset.y = y;

//Blit the surface
SDL_BlitSurface( source, NULL, destination, &offset);
} 
```

应该显示动画的循环看起来像这样。

```
//While the user hasn't quit
    while( quit == false )
    {

        //Apply the surface to the screen
        apply_surface( 0, 0, image, screen );

        fin.read((char*) &my_linefollower, sizeof my_linefollower);
        if(my_linefollower.get_orientation() == 'Q')
            break;

        my_linefollower.show();

        //Upadate the screen
        if( SDL_Flip( screen ) == -1 )
        {
            return 1;
        }

        SDL_Delay(200);

    } 
```

现在我期待，我会在屏幕上看到一个移动的点，但我唯一得到的是几秒钟的背景（图像），直到这`if(my_linefollower.get_orientation() == 'Q') break;`是真的。我做错了什么？

PS：我想值得注意的是，我是 SDL 的初学者，我从[教程](http://lazyfoo.net/SDL_tutorials/index.php)中获取了大部分代码。准确地学习它对我来说是浪费时间，因为我不太可能很快再次使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:38:50.657

首先，您应该将您的`offset`in更改`apply_surface`为以下内容：

```
SDL_Rect offset = { x, y, 0, 0 }; 
```

`SDL_Rect`默认情况下没有将成员设置为的构造函数`0`，因此您将获得未初始化的内存`width`和`height`.

此外，您应该检查`linefollower`包含的内容，如果它是有效的`SDL_Surface`. 删除文件读取代码并手动控制 a`Linefollower`将使您可以轻松找到错误的来源。

使用调试器来验证您的`x`和`y`坐标。

除此之外，您的代码应该可以工作，尽管您的窗口将无响应，因为您没有通过`SDL_PollEvent`.

# java - 解析和操作字符串的有效方法

> ID：14547848
> 
> 赞同：1
> 
> 时间：2013-01-27T13:27:22.527
> 
> 标签：java, android, arrays, string, split

我不确定我是否正在使用有效的方式来操作大量字符串。我需要打开一个大文件（~35kb）并解析和操作每一行，例如：

```
a1="Name surname"
a2="Name surname"
a3="Name surname"
...
a800="Name surname" 
```

我需要将当前 id 作为索引的每个 Name surname 插入到 sqlite db 中。

```
while ((s = d.readLine()) != null){
                        String[] name = s.split("\"");

                        String[] arrIdTemp = s.split("=");
                        String[] arrtId = arrIdTemp[0].split("a");

                        db.execSQL("INSERT INTO " + Constant.DB.DB_NAME
                                + " Values ('" + arrtId[1] + "','" + name[1]
                                + "');");

                    } 
```

通过这种方式，我创建了 3 个字符串数组，前 100 行非常快，但最后整个操作变慢了，可能是因为大量使用内存？有没有更好的解决方案来分割和操作每一行？

Logcat 输出说了很多：

```
01-27 14:46:50.554: D/dalvikvm(2541): GC_CONCURRENT freed 1778K, 68% free 3606K/11079K, external 4662K/5822K, paused 4ms+7ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:12:02.933

**[1°解决方案]**

我拆分这两个操作并使用事务。**从大约 60 秒开始，现在我只需要 2-3 秒。**

这就是我所做的：

```
//List of query
ArrayList<String> queryList = new ArrayList<String>();
...
while ((s = d.readLine()) != null){
                        String[] name = s.split("\"");

                        String[] arrIdTemp = s.split("=");
                        String[] arrtId = arrIdTemp[0].split("a");

                        queryList.add("INSERT INTO " + Constant.DB.DB_NAME
                                + " Values ('" + arrtId[1] + "','" + name[1]
                                + "');");

                    }

...

if (queryList!=null && queryList.size()>0){
                Iterator<String> iter = queryList.iterator();
                db.beginTransaction();
                try {
                    while (iter.hasNext()) {
                         db.execSQL(iter.next());
                        }
                    db.setTransactionSuccessful();
                } finally {
                    db.endTransaction();
                }
            } 
```

如果对我所做的事情有更好的解决方案或改进，请告诉我。

# ios - 使用 xmppFramework 在 ejabberd 服务器上实现 MUC

> ID：14547849
> 
> 赞同：0
> 
> 时间：2013-01-27T13:27:32.307
> 
> 标签：ios, objective-c, ejabberd, xmppframework, multiuserchat

我想知道是否可以创建聊天室并邀请人？我已经在我的 Mac 上设置了 ejabberd，并在 [此链接](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/)之后实现了与单个好友的聊天，但我想实现 MUC。我尝试了带有 xmppframework 的 MUC 演示项目[，](https://github.com/sesharim/ios-jabber-client/tree/master/XMPPFramework)但每次我得到错误 404 找不到远程服务器。委托方法

```
- (void)xmppRoomDidCreate:(XMPPRoom *)sender; 
```

永远不会被调用。反而

```
- (void)handleDidLeaveRoom:(XMPPRoom *)room 
```

这个方法被调用。有没有人使用 localhost 作为服务器成功实现了 MUC？如果是，请告诉我您正在使用的 XMPP 客户端，因为对于 ejabberd，它说找不到远程服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T20:15:46.700

您是否尝试使用 Conference.host（可能是 Conference.localhost）作为 MUC 主机？

# node.js - 在文档/行达到一定年龄后在数据库上运行查询

> ID：14547850
> 
> 赞同：1
> 
> 时间：2013-01-27T13:27:37.703
> 
> 标签：node.js, mongodb, cron, database

在集合中的任何文档达到一定年龄后运行数据库查询的最佳实践是什么？

假设这是一个带有 mongoDB 的 node.js Web 系统，带有一系列帖子。插入新帖子后，应在 60 分钟后更新一些数据。

每分钟或每两分钟检查一次（年龄<一小时）的所有帖子的 cron-job 会是最佳解决方案吗？如果该系统有超过 10.000 个活跃用户，那么压力最小的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T15:06:49.517

一些想法：

*   创建第二个集合作为具有“更新时间”字段的队列，该字段将包含需要更新源记录的时间。索引它，并扫描查找[比](http://docs.mongodb.org/manual/reference/operator/lt/)“现在”更旧的值。
*   在原始文档中包含上面提到的字段并以相同的方式对其进行索引
*   您可以在完成后清除该值，或根据行为将其重置为接下来的 60 分钟（而不是在集合中插入/删除/插入文档）。
*   通过保持更新集合不同，您有更好的机会始终将排队更新的整个工作集保存在内存中（与将更新信息存储在您的帖子中相比）。
*   我不会将更新作为对同一 Node 实例的 Web 请求启动，而是作为一个单独的进程启动，以免阻止用户请求。

至于您如何安排它——这取决于您和您的架构以及最适合您的系统的方式。没有正确的“最佳”答案，尤其是当您有多个 Web 服务器或分片数据系统时。

您可能会使用[上限集合](http://docs.mongodb.org/manual/core/capped-collections/)，尽管您可能会面临丢失需要更新的记录的风险（尽管您会获得性能）

# sql - 描述 IT 环境的数据库模型

> ID：14547851
> 
> 赞同：3
> 
> 时间：2013-01-27T13:27:38.437
> 
> 标签：sql, database, django, database-design, django-models

我正在考虑编写一个 Django 应用程序来帮助记录相当小的 IT 环境。我被困在如何最好地对数据建模，因为每个设备的属性数量可能会有所不同，即使在相同类型的设备之间也是如此。例如，一个 SAN 将有 1 个或更多阵列，以及 1 个或更多卷。然后阵列将具有名称、RAID 级别、大小、磁盘数的属性，卷将具有大小和名称的属性。不同的 SAN 将具有不同数量的阵列和卷。

服务器也是如此，每台服务器可能有不同数量的磁盘/分区，所有这些都将具有大小、已用空间等属性，这在服务器之间会有所不同。

另一种设备类型可能是交换机，它没有阵列或卷，但有许多网络端口，其中一些可能是千兆位，其他 10/100，其他 10Gigabit 等。

此外，我希望将来能够在不更改模型的情况下添加设备类型。一个新的设备类型可能是一个电话系统，它有自己独特的属性，这些属性在不同的电话系统之间可能会有所不同。

我研究过 EAV 数据库设计，但它似乎很快就变得非常复杂，我不清楚这是否是解决这个问题的最佳方法。如图所示，我正在考虑模型的一些内容。

[http://i.stack.imgur.com/ZMnNl.jpg](http://i.stack.imgur.com/ZMnNl.jpg)

一个好处是能够在特定时间创建环境的“快照”，从而可以查看环境随时间的变化。向属性表添加日期列可能是解决此问题的一种方法。

根据记录，这个应用程序不需要进行太多扩展（最多 1000 台设备），因此大规模的可扩展性并不是一个大问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:36:42.570

由于您的属性是每个模型实例并且每个实例都不同，我建议使用完全免费的模式

```
class ITEntity(Model):
    name = CharField()

class ITAttribute(Modle)
    name = CharField()
    value = CharField()
    entity = ForeignKey(ITEntity, related_name="attrs") 
```

这是一个非常简单的模型，您可以完成其余的工作，例如应用程序代码中的模板（即交换机模板、路由器模板等）——它比使用像 EAV 之类的复杂模型更直接（我喜欢 EAV，但这确实似乎不是这个的用例）。

添加历史记录也很简单 - 只需将时间戳添加到`ITAttribute`. 更改属性时 - 改为创建新属性。然后获取属性选择具有最新时间戳的属性。这样您就可以随时查看您的环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:31:21.173

您可以尝试使用基于文档的 NoSQL 数据库，例如 MongoDB。每个文档都可以表示具有任意多个不同字段的设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T23:48:23.913

如果您对您发布的图片内容更满意，下面是一个稍微修改过的版本（对不起，我无法上传图片，没有足够的代表）。

```
+-------------+
| Device Type |
|-------------|
| type        |--------+
+-------------+        |
                       ^
                  +---------------+     +--------------------+     +-----------+
                  | Device        |----<| DeviceAttributeMap |>----| Attribute |
                  |---------------|     |--------------------|     |-----------|
                  | name          |     | Device             |     | name      |
                  | DeviceType    |     | Attribute          |     +-----------+
                  | parent_device |     | value              |
                  | Site          |     +--------------------+
                  +---------------+       
                       v
+-------------+        |
| Site        |        |
|-------------|        |
| location    |--------+
+-------------+ 
```

我添加了一个链接器表`DeviceAttributeMap`，以便您可以更好地控制`Attribute`目录，允许查询具有相同`Attribute`但不同值的设备。我还在设备模型中添加了一个字段，命名为`parent_device`预期作为自引用外键，以捕获设备父设备之间的关系。您可能希望将此字段设为可选。要在 Django 中使外键`parent_device`可选，请将字段的 null 和空白属性设置为 True。

# android - 在 Android 上，为什么 getRunningProcesses() 返回比 TOP 命令少得多？

> ID：14547853
> 
> 赞同：0
> 
> 时间：2013-01-27T13:27:51.313
> 
> 标签：android, process

当我使用 getRunningProcesses() 时，我得到了大约 20~30 个进程。

但是，当我在 Android 终端中使用 TOP 命令时，我看到了 80 多个进程。我发现“root”拥有的一些进程的内存消耗为零。

造成差异的原因是什么？TOP 发现的某些进程当前是否未运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:08:45.340

`top`显示操作系统上运行的所有进程。而 `ActivityManager.getRunningAppProcesses`仅显示由 Android 启动的进程。

Root拥有的进程通常由linux内核启动用于事件处理，而返回的进程`ActivityManager.getRunningAppProcesses`只有Android框架启动的进程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:37:53.007

Android 运行很多[服务](http://developer.android.com/reference/android/app/Service.html)。那些您不想关闭的服务，因为 Android 需要它们运行。以下是有关服务的更多信息：

*   服务不是一个单独的进程。Service 对象本身并不意味着它在自己的进程中运行；除非另有说明，否则它在与其所属的应用程序相同的进程中运行。
*   服务不是线程。它本身并不是一种脱离主线程工作的方法（以避免应用程序无响应错误）。

另请阅读[Android 开发人员 - 进程和线程](http://developer.android.com/guide/components/processes-and-threads.html)。

# oracle - 内联视图与 oracle 中的内联表有何不同？

> ID：14547854
> 
> 赞同：2
> 
> 时间：2013-01-27T13:27:53.867
> 
> 标签：oracle

谁能说出***内联视图***和***内联表***之间的区别？

使用*SQL*代码进行解释可能有助于轻松理解该概念。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T22:04:31.047

> “这个问题在一次采访中被问到过。”

我们经常听到这个。这类问题的问题在于你问错了人：你应该有勇气对面试官说：“对不起，我不熟悉‘内联表’这个词，你能解释一下吗？它？”

相反，你问我们，问题是，我们不知道面试的目的是什么。我同意亚历克斯的观点，最接近“内联表”的是[TABLE() 用于查询嵌套表集合](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10002.htm#sthref6746)的函数，但这不是一个标准术语。

我多次站在面试桌的对面。我总是赞扬要求我澄清问题的候选人；我总是给一个大喊大叫的候选人打分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T08:05:45.850

世界都在努力优化数据库查询，我也是。好吧，如果我说我有一些东西可以将应用程序的速度提高到 80%，如果在正确的情况下使用，你会说什么......在这里我给你一个问题，假设您要计算整个部门的最低和最高薪水，其中员工的姓名与他们各自的经理。一种方法是创建一个临时表，其中包含员工的汇总工资。

```
create table tmp_emp_sal as select t.emp_id,max(t.sal) as maxsal,min(t.sal) as minsal,avg(t.sal) as avgsal from sal t group by t.emp_id 
```

然后在进一步查询中使用它。

```
select concat(e.last_nm, e.first_nm) as employee_name,concat(m.last_nm,m.first_nm) as manager_name,tt.maxsal,tt.minsal,tt.avgsal from emp e,emp m,dept d,tmp_test tt where e.dept_id = d.dept_id and s.emp_id = tt.emp_id and e.mgr_id = m.emp_id   order by employee_name, manager_name 
```

现在我将通过将两个 DML 和 DDL 操作合并到一个 DML 查询中来优化上述代码。

select concat(e.last_nm, e.first_nm) as employee_name,concat(m.last_nm, m.first_nm) as manager_name,tt.maxsal,tt.minsal,tt.avgsal from emp e,emp m, dept d,(select t.emp_id, max(t.sal) as maxsal, min(t.sal) as minsal, avg(t.sal) as avgsal from salt t group by emp_id) tt where e.dept_id = d.dept_id and s.emp_id = tt.emp_id 和 e.mgr_id = m.emp_id 按employee_name,manager_name 排序

上述查询使用户免于以下缺点：- 消除昂贵的 DDL 语句。消除了到数据库服务器的往返行程。内存使用量要轻得多，因为它只存储最终结果而不是中间步骤。因此，最好使用内联视图代替临时表。

# javascript - AngularJS - 如何绑定到指令内的 ngRepeat 元素

> ID：14547860
> 
> 赞同：2
> 
> 时间：2013-01-27T13:28:10.413
> 
> 标签：javascript, web, angularjs, closures, directive

在我的指令中，我有一个带有 ng-repeat 的模板，

```
 ...return {
       template:'<div id="wrapper"><ul><li ng-repeat="item in items">{{item.name}}</li></ul></div>',
       compile:function (tElement, tAttrs) {

        return function (scope, iElement, iAttrs) {
              //bind item mouse event to a closure function
        }
    }
    }... 
```

我想将转发器的每个元素与指令中的函数绑定，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T15:16:23.957

您需要通过添加到指令定义对象来创建隔离范围并将项目传递给指令`scope: { items: '='}`，然后将处理程序添加到每个项目：

```
<span ng-click='clicked(item)'>{{item.name}}<span> 
```

在链接功能中：

```
scope.clicked = function(item) { .. Do thmthng with item...}; 
```

并将其用作`<directive items='items' ...>`

# javascript - Jquery 函数和附加元素

> ID：14547865
> 
> 赞同：1
> 
> 时间：2013-01-27T13:28:51.717
> 
> 标签：javascript, jquery, css

我是 jQuery 的新手。我正在尝试创建一个从 xml 读取的函数。我已经成功地创建了从 xml 文件中读取的函数。使用 xml 中的数据，我正在尝试创建一个切换菜单。

这是我的代码

```
<script type="text/javascript">

$(document).ready(function()
  {

    $.get('newsdata/news.xml', function(d){
    $('body').append('<div id="news" data-collapse="accordion"/>');

    $(d).find('event').each(function(){

        var $event = $(this); 
        var title = $event.attr("title");
        var description = $event.find('description').text();
        var imageurl = $event.attr('imageurl');

        var newcontent = '<h3>'+title+'</h3>';
        newcontent+= '<div>'+description+'</div>';

        $('#news').append($(newcontent)); //notworking
        $('.loadingPic').fadeOut(1400);
    });
      alert($('body').html());  
   });

});
</script> 
```

一切正常。但是样式表没有得到应用。当我使用 html conted`alert($('body').html())`并将其复制到另一个 html 中时，它就可以工作了。但是当我追加时不起作用。

如果有人可以指导我会很有帮助..提前谢谢

# vba - 查找 if 条件语句字段代码的 VBA 语法

> ID：14547866
> 
> 赞同：0
> 
> 时间：2013-01-27T13:28:55.630
> 
> 标签：vba, ms-word

我正在为我的宏搜索正确的语法以查找 IF 条件语句字段代码。

我需要搜索`{IF{DOCVARIABLE"CODE"} = "YES" "A" "B"}`以删除它并替换为“B”（虚假陈述）。

在搜索`{DOCVARIABLE "CODE"}`单独的单词字段时，我写为：`Text1 = "CODE"`但是当有一个 IF & Text & Yes & TRUE, FALSE 像上面一样，我该怎么写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-24T20:38:48.390

综合评论（OP 在其他地方交叉发布）：

对于该特定序列，您可以搜索

```
^19IF^19DOCVARIABLE"CODE" 
```

Word 将选择整个 IF 字段（因此无论如何您都需要解析整个 IF 字段），但它不应该选择例如

```
{IF{DOCVARIABLE"BOX"} 
```

如果有一些变化（例如字符串中的额外空格），您可以使用类似的东西

```
^19^wIF^w^19^wDOCVARIABLE^w"CODE" 
```

# asp.net - OWIN 的这些用法可能吗？

> ID：14547869
> 
> 赞同：5
> 
> 时间：2013-01-27T13:29:36.347
> 
> 标签：asp.net, hosting, web-hosting, self-hosting, owin

是否可以编写一个简单的自定义控制台应用程序，其中包含一个可以直接托管 Asp.Net Web 应用程序的 owin 库（没有 katana.exe，如 CassiniDev 的库）？是否可以让包含 MVC 4、Web API、SignalR 功能的 Asp.Net Web 应用程序跨 IIS 和 owin 托管，而无需/很少更改代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T16:54:56.130

对于在 OWIN 之上托管来自 ASP .NET 框架系列的应用程序，截至本文，您可以使用[WebAPI](http://goo.gl/bNzzj)和[SignalR 来实现](https://github.com/SignalR/SignalR/wiki/Self-host)。如果您需要更像 MVC 和 Razor 的东西，您可以考虑使用[NancyFX](http://goo.gl/PCAhK) Web 应用程序框架。也许在未来版本的 MVC OWIN 支持中将启用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T11:19:04.647

[我在https://github.com/ashmind/Gate.Adapters.AspNet](https://github.com/ashmind/Gate.Adapters.AspNet)做了一个适配器的初始实现。
它绝对没有准备好生产，但如果该功能对您很重要，欢迎您对其进行测试/扩展。

据我所知，没有其他可靠的图书馆。

# c - 如何使用 MPI 或 OpenMP 并行化函数调用

> ID：14547870
> 
> 赞同：1
> 
> 时间：2013-01-27T13:29:40.887
> 
> 标签：c, mpi, openmp

**第一个问题：**

我想知道如何将函数调用并行化到同一个函数，但在 for 循环中使用不同的输入参数。例如（C 代码）：

```
//a[i] and b[i] are defined as elements of a list with 2 columns and N rows
//i is the row number

#pragma omp parallel
{
char cmd[1000];
  #pragma omp for nowait
  for(i=0; i<N; i++) {
    //call the serial programm
    sprintf(cmd, "./serial_program %f %f", a[i], b[i]);
    system(cmd);
  }
} 
```

如果我只是为（当然是 omp 标头）应用一个 pragma omp，则不会发生任何事情。也许这对于 OpenMP 是不可能的，但是对于 MPI 是否可能，它会是什么样子呢？到目前为止，我只使用过 OpenMP，但没有使用过 MPI。更新：在并行区域内定义了 cmd

**状态：已解决**

**第二个问题：**

如果我有一个 OpenMP 并行程序并且我想在集群内的不同节点之间使用它，我如何使用 MPI 在不同节点之间分配调用以及如何编译它？

```
//a[i] and b[i] are defined as elements of a list with 2 columns and N rows
//i is the row number

  for(i=0; i<N; i++) {
    //call the parallelized program
    sprintf(cmd, "./openmp_parallelized_program %f %f", a[i], b[i]);
    system(cmd);
  } 
```

**状态：未解决**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:58:13.390

MPI 是一种在计算集群的节点之间进行通信的方法。它使一个主板能够与另一个主板通信。MPI 用于集群和大型计算任务，而不是用于并行化桌面应用程序。

MPI 中的通信是通过显式发送和接收数据来完成的。

与 OpenMP 不同，没有 #pragma 会自动促进并行化。

此外，您发布的代码确实有些混乱，具体来说，它是一个 C 程序，其行为类似于 bash 脚本。

```
#!/bin/bash
N=10
for i in `seq 1 $N`;
do
./program $i &
done 
```

在许多集群上，调用`system`只会在主机节点上执行，不会导致加速和 io 问题。您显示的命令完全行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T14:29:24.557

使用 MPI，您可以执行以下操作：

```
int rank, size;

MPI_Init();
MPI_Comm_rank(MPI_COMM_WORLD, &rank);
MPI_Comm_size(MPI_COMM_WORLD, &size);

int start = (rank*N)/size;
int end = ((rank+1)*N)/size;

for (i = start; i < end; i++)
{
   sprintf(cmd, "./openmp_parallelized_program %f %f", a[i], b[i]);
   system(cmd);
}

MPI_Finalize(); 
```

然后使用每个节点一个进程运行 MPI 作业。不过有一个警告。一些 MPI 实现不允许进程`fork()`在某些条件下调用（和`system()`调用`fork()`），例如，如果它们通过 InfiniBand 等基于 RDMA 的网络进行通信。相反，您可以合并这两个程序以创建一个混合 MPI/OpenMP 程序。

# git - git中Maven项目的文件夹和文件重组

> ID：14547873
> 
> 赞同：0
> 
> 时间：2013-01-27T13:30:29.520
> 
> 标签：git, maven

我是 git 新手。我在中央 git 存储库中有一个 Maven 项目。

目前项目看起来是这样的：

```
 Root
      |
      project
            |
            src/
            target/
            .project
            .gitignore
            .classpath
            .settings/
            pom.xml 
```

我想重组文件夹，使所有文件和文件夹都在根目录下，而不是在项目名称下。我想要进行重组的主要原因是我用于构建的 Nexus 机器说`pom.xml`找不到。

我在 git 中查看了一个类似的项目，它看起来与我想要的完全一样，并且在 Nexus 中运行良好。

我曾尝试使用该`git mv`命令移动文件和文件夹，但它拒绝移动任何文件夹。我设法`pom.xml`使用 mv 移动，但随后项目无法完成`pom.xml`，并且在 Eclipse 中有大量错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:47:42.137

假设该`Root`目录是您的 git 项目的根目录。可以通过`git rev-parse --show-toplevel`命令验证。

Java 项目包含 2 种类型的文件 - 由 git 管理和不由 git 管理（在输出中标记为**未跟踪**）`git status`。

因此，要将项目从`Root/project/`目录移动到`Root`目录：

1) 移动跟踪的文件`git mv`： 如果跟踪的文件是`src/*`，`pom.xml`并且`.gitignore`：

```
git mv project/src/* ./src/
git mv project/pom.xml ./
git mv project/.gitignore ./ 
```

2）移动未跟踪的文件`mv`：

Git 正在使用应用于文件而不是目录的补丁。这就是为什么 git 将`Root/project/src/`目录留空的原因。删除它。

```
$> mv project/* ./ -v
‘project/target’ -> ‘./target’ 
```

* * *

顺便说一句，奇怪的是您的`.gitignore`文件存储在`Root/project/`目录 insted 的`Root`目录中。

# css - css链接的一个特殊问题

> ID：14547876
> 
> 赞同：0
> 
> 时间：2013-01-27T13:30:56.560
> 
> 标签：css, hyperlink

我的网站上有链接的 CSS 代码：

```
a { text-decoration:none; color:#2B5384; }
a:hover { color:#F90; }
a:visited { color:#2B5384; } 
```

如果链接看起来像这样，它可以正常工作：`<a href="mypage.html">My page</a>`- 链接的颜色是深蓝色，悬停时它会变为橙色并出现下划线。但是，如果我链接到外部网站，例如`<a href="http://www.facebook.com/mypage">My page</a>`- 悬停时链接不会改变颜色，也不会出现下划线。如果我将 URL 更改为具有 .html 扩展名 - `<a href="http://www.facebook.com/mypage.html">My page</a>`，它会起作用，但显然，没有这样的页面。

为什么会发生这种情况，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:34:52.990

请参阅[http://www.w3schools.com/css/css_pseudo_classes.asp](http://www.w3schools.com/css/css_pseudo_classes.asp)特别是注释：

> 注意：a:hover 必须在 CSS 定义中的 a:link 和 a:visited 之后才能生效！！
> 
> 注意：a:active 必须在 CSS 定义中的 a:hover 之后才能生效！！
> 
> 注意：伪类名不区分大小写。

这是 w3c 的官方版本[http://www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)参见第 5.11.3 节

# cakephp - cakephp链接不起作用

> ID：14547877
> 
> 赞同：1
> 
> 时间：2013-01-27T13:30:58.587
> 
> 标签：cakephp, cakephp-2.0

我是 php 和 cakephp 的新手。只是想制作简单的导航菜单。

```
<li><?php
      //pr($this->Html-);
      echo $this->Html->link('Entertainment', array(
          'controller' => 'UpcommingEntertainments',
          'action' => 'index'
      ));
      ?></li> 
```

如果我在 www.example.com，它可以正常工作。问题是如果我在 /admin/* 并单击此链接，它会将我带到 www.example.com/admin/Entertainment，我想去 www.wxample.com/Entertainment。我的链接代码应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:47:06.050

Please try:

```
echo $this->Html->link('Entertainment', array(
      'controller' => 'UpcommingEntertainments',
      'action' => 'index',
      'admin' => false, // thats what you need
      'plugin' => false, // could be helpful if you plan using plugins
  )); 
```

I included the plugin parameter, because you could encounter the same issue, if you use plugins.

Hope that helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:48:42.553

```
<li><?php
      //pr($this->Html-);
      echo $this->Html->link('Entertainment', array(
          'admin' => false, // add this
          'controller' => 'UpcommingEntertainments',
          'action' => 'index'
      ));
      ?></li> 
```

There is a good answer [here](https://stackoverflow.com/questions/3152252/routing-admin-true-vs-prefix-admin-in-cakephp) offering a bit more indepth explanation.

# java - 为什么 Java 中 try/catch 与其他形式的控制流的性能差异？

> ID：14547878
> 
> 赞同：0
> 
> 时间：2013-01-27T13:31:02.343
> 
> 标签：java, benchmarking, microbenchmark

> **可能重复：**
> [Java 异常有多慢？](https://stackoverflow.com/questions/299068/how-slow-are-java-exceptions)

以下两个程序的运行时间大致相同：

```
public class Break {
    public static void main(String[] argv){
        long r = 0, s = 0, t = 0;
        for(long x = 10000000; x > 0; x--){
            long y = x;
            while(y != 1){
                if(y == 0)
                    throw new AssertionError();
                try2: {
                    try1: {
                        for(;;){
                            r++;
                            if(y%2 == 0)
                                break try1;
                            y = y*3 + 1;
                        }
                    }/*catch(Thr _1)*/{
                        for(;;){
                            s++;
                            if(y%2 == 1)
                                break try2;
                            y = y/2;
                        }
                    }
                }/*catch(Thr _2)*/{
                    t++;
                }
            }
        }
        System.out.println(r + ", " + s + ", " + t);
    }
} 
```

```
public class Try {
    private static class Thr extends Throwable {}

    private static final Thr thrown = new Thr();

    public static void main(String[] argv){
        long r = 0, s = 0, t = 0;
        for(long x = 10000000; x > 0; x--){
            long y = x;
            while(y != 1){
                try{
                    if(y == 0)
                        throw new AssertionError();
                    try{
                        for(;;){
                            r++;
                            if(y%2 == 0)
                                throw thrown;
                            y = y*3 + 1;
                        }
                    }catch(Thr _1){
                        for(;;){
                            s++;
                            if(y%2 == 1)
                                throw thrown;
                            y = y/2;
                        }
                    }
                }catch(Thr _2){
                    t++;
                }
            }
        }
        System.out.println(r + ", " + s + ", " + t);
    }
} 
```

```
$ for x in Break Try; 回声 $x; 时间 java $x; 完毕
休息
1035892632、1557724831、520446316

真正的 0m10.733s
用户 0m10.719s
系统 0m0.016s
尝试
1035892632、1557724831、520446316

真正的 0m11.218s
用户 0m11.204s
系统 0m0.017s

```

但是接下来的两个程序所花费的时间是相对不同的：

```
public class Return {
    private static int tc = 0;

    public static long find(long value, long target, int depth){
        if(depth > 100)
            return -1;
        if(value%100 == target%100){
            tc++;
            return depth;
        }
        long r = find(target, value*29 + 4221673238171300827l, depth + 1);
        return r != -1? r : find(target, value*27 + 4494772161415826936l, depth + 1);
    }

    public static void main(String[] argv){
        long s = 0;
        for(int x = 0; x < 1000000; x++){
            long r = find(0, x, 0);
            if(r != -1)
                s += r;
        }
        System.out.println(s + ", " + tc);
    }
} 
```

```
public class Throw {
    public static class Found extends Throwable {
        // note the static!
        public static int value = 0;
    }

    private static final Found found = new Found();

    private static int tc = 0;

    public static void find(long value, long target, int depth) throws Found {
        if(depth > 100)
            return;
        if(value%100 == target%100){
            Found.value = depth;
            tc++;
            throw found;
        }
        find(target, value*29 + 4221673238171300827l, depth + 1);
        find(target, value*27 + 4494772161415826936l, depth + 1);
    }

    public static void main(String[] argv){
        long s = 0;
        for(int x = 0; x < 1000000; x++)
            try{
                find(0, x, 0);
            }catch(Found _){
                s += found.value;
            }
        System.out.println(s + ", " + tc);
    }
} 
```

```
$ for x in Return Throw; 回声 $x; 时间 java $x; 完毕
返回
84227391, 1000000

实际0m2.437s
用户 0m2.429s
系统 0m0.017s
扔
84227391, 1000000

真正的 0m9.251s
用户 0m9.215s
系统 0m0.014s

```

我想一个简单的 try/throw/catch 机制看起来有点像一个至少部分尾调用优化的返回（所以它直接知道控制应该返回到哪里（最近的捕获）），但是，当然，JRE 实现做了很多优化。

为什么后者差别很大，而前者差别不大？是因为控制流分析确定前两个程序几乎相同，而实际的 try/throw/catch 特别慢，还是因为 Return 的`find`展开到某种程度，从而避免了方法调用，而 Throw 的却不能， 或者 ..？谢谢。

编辑：这个问题对我来说似乎与[Java 异常有多慢？](https://stackoverflow.com/questions/299068/how-slow-are-java-exceptions)因为它没有问为什么在与此类似的情况下会有如此大的差异。它还忽略了创建异常对象所花费的时间这一事实（除非`fillInStackTrace`被覆盖，否则包括遍历堆栈并为其创建数组）。然而，它显然回答了我的部分问题：“是不是因为控制流分析确定前两个程序几乎相同”——尽管在答案中提到堆栈跟踪似乎很奇怪（这可能会使任何实际的 throw/catch 操作相形见绌——除非它进行一些复杂的分析来确定堆栈从未见过，这会使@Stephen 的回答变得奇怪）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:00:19.860

您的基准测试没有考虑 JVM 预热效应。因此，您所看到的结果是否真正表明了 try/break/return 在实际程序中的执行情况，这是相当大的疑问。

（您应该在一个方法中声明每个定时测试，并多次调用这些方法。然后丢弃前几次调用的输出......或直到数字稳定......以消除 JIT 的一次性成本编译，类加载等从图中。）

* * *

如果你真的想知道发生了什么，你应该让 JIT 编译器转储它为每种情况生成的本机代码。

我怀疑您会发现在第一种情况下，JIT 编译器将*方法*中的 throw / catch转换为简单的分支指令。在第二种情况下，JIT 编译器很可能正在生成更复杂的代码……大概是因为它不认为这等同于分支。

为什么有区别？好吧，JIT 优化器尝试的每个优化都有成本/收益权衡。JIT 编译器支持的每个新优化都有实施和维护成本。并且在运行时，编译器需要检查它正在编译的代码，看看是否满足优化的先决条件。如果它们是可以执行的优化。否则，JIT 编译器就浪费了时间。

现在在这些示例中，我们有一个异常（在一种情况下）在同一个方法中被抛出和捕获，并且（在另一种情况下）传播到方法调用/返回边界。在前一个示例中，优化的充分前提条件和（可能的）优化代码序列都非常简单。在后一个示例中，优化器必须处理引发和捕获异常的方法位于不同编译单元（因此可能会重新加载）的可能性、覆盖的可能性等等。此外，生成代码序列会明显更复杂......一个非标准的调用返回序列，后跟一个分支。

所以我的理论是 JIT 编译器的作者并不认为更复杂的优化会得到回报。鉴于大多数人*不会编写这样的 Java 代码*，他们可能是对的。

# jquery - 任何人都对此有任何想法。我有这个日期选择器在 FF 上工作，但似乎不在 IE 上工作

> ID：14547883
> 
> 赞同：1
> 
> 时间：2013-01-27T13:31:19.247
> 
> 标签：jquery, datepicker

我发现了这个 datepicker 事件，但不适用于 IE。我不知道这段代码有什么问题。

```
var Event = function(text, className) {
        this.text = text;
        this.className = className;
    };

var events = {};
events[new Date("18/Jan/2013")] = new Event("Drinks @ Seymours - Alumni Event", "Yes");
events[new Date("16/Jan/2013")] = new Event("Retired Staff Luncheon", "Yes");
events[new Date("13/Jan2013")] = new Event("October Spring Lunch - Alumni Event", "Yes");

$("#dates").datepicker({
    dateFormat: 'dd/M/yy',  
    firstDay: 1,
    showOtherMonths: true,
    onSelect: function(date) {
        $('#CAT_Custom_241423').val(date);
        $('#submit-btn-webapp').trigger('click');
    },
    beforeShowDay: addClass 
});

function addClass(date) { 
    var event=events[date];
    if(event){
        return[true,event.className,event.text];
    }
    else {
        return[true,'',''];
    }
} 
```

它在 ff，Google Chrome 上运行良好。这是 jsfiddle 上的工作代码

[http://jsfiddle.net/7U56z/](http://jsfiddle.net/7U56z/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:52:47.020

问题是事件键（生成的日期）。如果您在 IE 中尝试以下操作：

```
 alert(new Date("18/Jan/2013")); 
```

你会得到一个错误（无效的日期）。所以你永远不会在你的函数中得到匹配。像这样定义键（或与此类似）：

```
 events[(new Date(2013, 0, 18, 0, 0, 0))] = new Event(....)
 // format in this case is:
 // new Date(year,month,day,hour,minute,second)
 // month starts with 0. 
```

它有效。在这种情况下，您不必设置小时、分钟和秒。您只需确保生成的密钥是有效日期并且与来自日期选择器的日期匹配。

By the way, I would rename your "Event" Object to something different, because there is already an window.event that is a bit confusing.

# python - py2exe执行错误

> ID：14547888
> 
> 赞同：0
> 
> 时间：2013-01-27T13:31:39.253
> 
> 标签：python, py2exe

我有一个目录结构。

目录的位置是“d:\sources\dir”

```
/dir
    __init__.py
    commonlibs/
              __init__.py
              lib1.py
              lib2.py
    project1/
            __init__.py
            prgfile1.py
            prgfile2.py
            prglib/
                   __init__.py
                   prglib1.py
                   prglib2.py 
```

当我将 dir 添加到我的 PYTHONPATH 时，我可以轻松地从任何东西导入并运行 python 脚本。但是当我从 py2exe 创建我的 exe 时，我得到“commonlibs”中存在的模块的导入错误。并且这些模块被导入到 prglib1 模块中。并且没有导入其他一些模块。

我不知道我错过了什么，但最后我想从任何地方导入，我的 exe 应该运行没有错误。我的 exe 是一个 Windows 服务，我的项目已经实现了命名管道。

# postgresql - Postgres - 杜松子酒索引不起作用

> ID：14547889
> 
> 赞同：2
> 
> 时间：2013-01-27T13:31:41.350
> 
> 标签：postgresql, full-text-search

看来我的服务器不会使用杜松子酒索引。

1.  我用一张表创建了一个新数据库。
2.  我已经插入了一行作为示例。
3.  我已经加载了 trigram 扩展并使用 trigrams 创建了杜松子酒索引
4.  但是当我检查索引是否正常工作时，我可以看到它没有
5.  有任何想法吗？

**SQL： http:** [//pastebin.com/1yDQQA1Z](http://pastebin.com/1yDQQA1Z)

PS 一天前，我学习了一个关于 trigrams 的教程。基本上和我上面的例子一样。该表有 2 列，数字 (5, 0) 和字符变化（具有 gin trgm 索引的列）。查询与使用“％”的类似运算符一起使用并且索引正在工作（我可以在查询解释中看到位图使用），所以我知道，我的服务器可以使用索引（并且它已正确安装）。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-27T13:37:07.363

不要在一行上测试，这是没有意义的。

[以下是在检查索引使用](http://www.postgresql.org/docs/current/static/indexes-examine.html)中解释原因的文档摘录：

> 使用真实数据进行实验。使用测试数据设置索引会告诉您测试数据需要哪些索引，但仅此而已。
> 
> 使用非常小的测试数据集尤其致命。虽然从 100000 行中选择 1000 行可能是索引的候选者，但从 100 行中选择 1 行几乎不会，因为 100 行可能适合单个磁盘页面，并且没有任何计划可以击败顺序获取 1 个磁盘页面.

# c - pthread_join 中的悬空指针？

> ID：14547891
> 
> 赞同：3
> 
> 时间：2013-01-27T13:31:54.220
> 
> 标签：c, pthreads, glibc, memory-management

据此[，](http://sourceware.org/git/?p=glibc.git;a=blob;f=nptl/pthread_join.c;h=6a87a8b329c3e34a57d65e86d45fa97a5fdb2fe2;hb=master) pthread_join 将输出参数 **thread_return 设置为 pd->result，然后释放 pd。这没关系，我错过了什么，还是 glibc 中存在严重的错误？

```
 /* We mark the thread as terminated and as joined.  */
    pd->tid = -1;

    /* Store the return value if the caller is interested.  */
    if (thread_return != NULL)
      *thread_return = pd->result;

    /* Free the TCB.  */
    __free_tcb (pd); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:35:45.433

`__free_tbc`不是 free `pd`，而是线程的堆栈，即`pd->tpp`（另请参见[此处](http://fossies.org/dox/glibc-2.17/pthread__create_8c_source.html#l00200l)）。所以`pd->result`在这些语句之后仍然是一个有效的指针。

# java - 生成随机数并找到最小值/最大值作为 Java 类变量

> ID：14547897
> 
> 赞同：-1
> 
> 时间：2013-01-27T13:32:34.237
> 
> 标签：java, class, variables, random

我是一个完整的Java新手。我正在研究类和方法。我正在尝试创建一个类变量来存储随机数生成器的最小值。

它必须是**类**变量，而不是方法中的变量。有任何想法吗？我想用`Math.random()`发电机。就像是：

```
int ranNum = Math.random(); 
```

这会给我一个随机数，但我如何以这种方式找到最小值（或最大值）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:56:23.840

如果你只是想为你的班级保持状态，这可能是：

```
public class MyRandom {

    private static final MyRandom INSTANCE = new MyRandom();

    public static MyRandom getInstance(){
        return INSTANCE;
    }

    private int low;

    private int high;

    private Random r = new Random();

    private MyRandom(){

    }

    public int getHigh() {
        return high;
    }

    public int getLow() {
        return low;
    }

    public synchronized int getRandom(){
        int next = r.nextInt();
        if (next < low){
            low = next;
        }
        if (next > high){
            high = next;
        }
        return next;
    }

} 
```

请注意，此类是单例的，应在应用程序范围内使用以生成随机值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:42:42.523

The following will give you Random numbers from 0-100

and also will give you the smallest:

```
 import java.util.Random;

   public class AcademicController 
  {
   private static int i,a=0,small=500;

  public static void main(String[] args)
  { 
    Random ran=new Random();
    for(i=0;i<100;i++)//enter the range here
    {

    a=ran.nextInt(100);//gives you any number from 0-99
    System.out.println(a);

    if(a<small)//if given number is < than previous, make this number small
    small=a;
    }

    System.out.println("small is :"+small);
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T13:45:47.040

You can make your own random methods based on it.

```
/**
 * Returns a random real number between 0 and x. The number is always
 * smaller than x.
 * 
 * @param x The maximum range
 * @return A random real number
 */
public static int random(int x){
    return (int) (Math.floor(Math.random() * x));
}

/**
 * Returns a random real number between x1 (inclusive) and x2 (exclusive).
 * 
 * @param x1 The inclusive
 * @param x2 The exclusive
 * @return A random real number between x1 and x2
 */
public static int random_range(int x1, int x2){
    return (int) (Math.floor(x1 + (Math.random() * (x2 - x1))));
} 
```

Hope these simple methods helps you.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T13:40:38.310

我假设你要求这个：

```
int min = 50;
int max = 100;
int ranNum = min+(int)(Math.random()*((max-min) + 1)); 
```

这将生成一个从 min 到 max（包括）的随机数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T13:41:35.830

用这个：

```
import java.util.Random;
Random rand = new Random();
int i = rand.nextInt( 7 - 0 + 1 ); // where 7 is max and 0 is min 
```

# php - 需要阵列的帮助

> ID：14547900
> 
> 赞同：-1
> 
> 时间：2013-01-27T13:32:55.770
> 
> 标签：php, arrays

我有一个**数组**，我想循环并检查每个键的值是否不为空，并创建一个**不包含空值的新数组**：

*请注意，第 3 项和第 5 项为空，因此新数组不应包含这些值。*

```
<?php

   $arrayone = array("item1"=>"bat",
                  "item2"=>"ball",
                  "item3"=>"",
                  "item4"=>"hockey",
                  "item5"=>""); 

?> 
```

我尝试了以下循环，但它给了我一个**未定义的偏移错误**，请有人让我知道我错过了什么或做错了什么？

**环形：**

```
$c=0;
$newarray = array();
foreach ($arrayone as $key => $value) {
   if(!$value==""){
       $newarray[$c] .= $value;

   }
   $c++;
} 
```

此外，形成的新数组有 keys=>1,2,3 而不是 item1,item2,item3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:36:31.757

$newarray[$c] .= $value; 第一次联系一个空的 $newarray[$c]

更改您的代码添加`if(!isset($newarray[$c]))`

```
<?php

$arrayone = array("item1"=>"bat","item2"=>"ball","item3"=>"","item4"=>"hockey","item5"=>""); 

$c=0;
$newarray = array();
foreach ($arrayone as $key => $value) {
    if(!$value==""){

        if(!isset($newarray[$c])) 
            $newarray[$c] = '';
        $newarray[$c] .= $value;

    }
    $c++;
} 
```

# c# - 使用openxml检索word文件的脚注

> ID：14547902
> 
> 赞同：1
> 
> 时间：2013-01-27T13:33:22.667
> 
> 标签：c#, openxml, openxml-sdk, office-2010

如何使用 open xml 在 c# 中检索 word 文件的所有脚注，我知道我们可以通过以下方式检索段落：

```
IEnumerable<Paragraph> paragraphs = mainPart.Document.Body.OfType<Paragraph>(); 
```

但是当我测试它的脚注时，我只得到**空值**，而我知道我的 word 文件中有一些脚注。

我刚刚找到这个页面来帮助我解决这个问题，但他们没有帮助我：

[脚注构造函数](http://msdn.microsoft.com/en-us/library/office/cc803063.aspx)

如何获取所有脚注并将主题保存在列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:07:05.713

获取脚注的示例：

```
FootnotesPart footnotesPart = wordDoc.MainDocumentPart.FootnotesPart;
if (footnotesPart != null)
{
    IEnumerable<Footnote> footnotes = footnotesPart.Footnotes.Elements<Footnote>();
    ...
} 
```

# c - 如何用ncurses绘制直方图？

> ID：14547903
> 
> 赞同：1
> 
> 时间：2013-01-27T13:33:35.440
> 
> 标签：c, histogram, ncurses

我有一个从输入读取的代码，计算字母并将直方图绘制为 ASCII 艺术。我想做同样的事情，但使用 ncurses。怎么做？

```
#include <stdio.h>
int main(void) {
  int c, i, j;
  int chars[256];
  // a counter for every character in the ASCII set
  for (i = 0; i < 256; ++i) {
    chars[i] = 0;
  }
  // check each input and increment the relative element
  while ((c = getchar()) != '0') {
    ++chars[c];
  }
  // print only those characters that were received
  for (i = 0; i < 256; ++i) {
    // go through every element in chars
    if (chars[i] > 0) {
      // print headers
      if (i == ' ')
        printf(" Space: ");
      else if (i == '\n')
        printf("    \\n: ");
      else if (i == '\t')
        printf("   tab: ");
      else
        printf("%6c: ", i);
      for (j = 0; j < chars[i]; ++j)
        // print a # for every tally of each element; chars[i] is the tally
        putchar('#');
        // and we need to go through each from 0 to the final tally of that element
      printf("\n");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:30:39.160

使用Curses 开发工具包中的[CDK 直方图](http://invisible-island.net/cdk/manpage/cdk_histogram.3.html)。超级简单；[这](http://pastebin.com/tnWvKux6)是演示用法的示例代码（取自 Debian libcdk 包）。

# transactions - 使用 OpenEJB 4.5.0 和 MySQL 5.5 执行事务时出现异常

> ID：14547908
> 
> 赞同：1
> 
> 时间：2013-01-27T13:35:00.293
> 
> 标签：transactions, ejb-3.1, openjpa, openejb

我使用带有 InnoDB 引擎的 OpenEjb 4.5.0 和 MySQL 5.5.xx。
我有一个非常简单的无状态 bean，带有注入的 EntityManagerFactory

```
@PersistenceUnit
private EntityManagerFactory factory 
```

我正在做如下交易：

```
EntityManager em = factory.createEntityManager();
EntityTransaction tx = em.getTransaction();
try {
  tx.begin();
  Query query = em.createNativeQuery("INSERT IGNORE INTO `myTable` (myColumn) values (1)");
  query.executeUpdate();
  tx.commit();
} catch (RuntimeException re) {
  if (tx.isActive())
    tx.rollback();
} finally {
  em.close();
} 
```

使用以下配置：
**persistence.xml**：

```
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="ejbPU-ro" transaction-type="RESOURCE_LOCAL">
        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
        <non-jta-data-source>mySQLDataSource</non-jta-data-source>
        <exclude-unlisted-classes>false</exclude-unlisted-classes>
        <properties>
            <property name="openjpa.jdbc.SynchronizeMappings" value="buildSchema(foreignKeys=true"/>
            <property name="openjpa.jdbc.SchemaFactory" value="native(foreignKeys=true)"/>
            <property name="openjpa.Log" value="DefaultLevel=TRACE,SQL=TRACE"/>
        </properties>
    </persistence-unit>
</persistence> 
```

**openejb.xml**（仅数据源定义）：

```
<Resource id="mySQLDataSource" type="DataSource">
    JdbcDriver          com.mysql.jdbc.Driver
    JdbcUrl             jdbc:mysql://127.0.0.1:3307/myDb?relaxAutoCommit=true
    UserName            root
    Password
</Resource> 
```

运行我的小程序，我得到以下异常：
`org.apache.openjpa.persistence.RollbackException: Commit can not be set while enrolled in a transaction`
一些挖掘，实际原因是 dbcp`ManagedConnection.commit`抛出异常，如果`transactionContext != null`

任何方向/提示将不胜感激。

谢谢，
阿维拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T08:31:08.677

好的，这很尴尬 :)
我忘记了最后两行：

```
 <Resource id="mySQLDataSource" type="DataSource">
        JdbcDriver          com.mysql.jdbc.Driver
        JdbcUrl             jdbc:mysql://127.0.0.1:3307/myDb
        UserName            root
        Password            
        JtaManaged          false
        DefaultAutoCommit   false
    </Resource> 
```

# php - 如何设置本地代理服务器？

> ID：14547909
> 
> 赞同：0
> 
> 时间：2013-01-27T13:35:05.370
> 
> 标签：php, iis-7, proxy, localhost

我已经下载了 Glype PHP 代理脚本。我已经把它放在本地主机上。现在我希望我电脑上的所有应用程序都通过本地代理服务器访问互联网。我怎么做？

我尝试在 Google Chrome 中更改 LAN 设置。我启用了该选项`Use a proxy server for your LAN`并将地址设置为`http://localhost/glype-1.4.3/`. 但它没有成功。

我是 Windows 7 Ultimate 上的 IIS7 服务器。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T13:40:19.823

您无需在 Google Chrome 中使用代理服务器进行 LAN 设置，Glype PHP 代理脚本只是通过网络浏览器为用户提供代理服务，您只需浏览网站然后输入任何网站地址即可上网。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:10:46.607

首先，先生，您需要在您的 PC 上安装基于 Linux 或 Unix 的操作系统，它们是最好的服务器，然后将 glype 脚本提取到主页并配置 apache 以接受您 ip 上的连接，并确保在您的本地使用静态 ip网络。

# python - 如何遍历 JSON 中的条目？

> ID：14547916
> 
> 赞同：37
> 
> 时间：2013-01-27T13:35:56.633
> 
> 标签：python, json

我想遍历 JSON 文件的内容并将其打印到控制台。

我想我确实把一些东西和清单混在一起了。

这就是我试图获得的所有`team_name`元素

```
from urllib2 import urlopen
import json

url = 'http://openligadb-json.heroku.com/api/teams_by_league_saison?league_saison=2012&league_shortcut=bl1'
response = urlopen(url)
json_obj = json.load(response)

for i in json_obj['team']:
    print i 
```

这是我的 JSON（简体：）

```
{
    "team": [
        {
            "team_icon_url": "http://www.openligadb.de/images/teamicons/Hamburger_SV.gif",
            "team_id": "100",
            "team_name": "Hamburger SV"
        },
        {
            "team_icon_url": "http://www.openligadb.de/images/teamicons/FC_Schalke_04.gif",
            "team_id": "9",
            "team_name": "FC Schalke 04"
        }
    ]
} 
```

（可在此处找到完整的 JSON 输出：[链接](http://openligadb-json.heroku.com/api/teams_by_league_saison?league_saison=2012&league_shortcut=bl1)）

当然我得到一个错误，我应该在 [] 中使用整数输入，而不是字符串，但我不明白我该怎么做。

```
for i in json_obj['team']:
TypeError: string indices must be integers, not str 
```

这是`response`：

```
http://openligadb-json.heroku.com/api/teams_by_league_saison?league_saison=2012&league_shortcut=bl1
<addinfourl at 139755086292608 whose fp = <socket._fileobject object at 0x7f1b446d33d0>> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-27T14:25:24.990

实际上，要查询`team_name`，只需将其添加到最后一行的括号中即可。除此之外，它似乎适用于命令行上的 Python 2.7.3。

```
from urllib2 import urlopen
import json

url = 'http://openligadb-json.heroku.com/api/teams_by_league_saison?league_saison=2012&league_shortcut=bl1'
response = urlopen(url)
json_obj = json.load(response)

for i in json_obj['team']:
    print i['team_name'] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-27T13:39:46.673

试试这个 ：

```
import urllib, urllib2, json
url = 'http://openligadb-json.heroku.com/api/teams_by_league_saison?league_saison=2012&league_shortcut=bl1'
request = urllib2.Request(url)
request.add_header('User-Agent','Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)')
request.add_header('Content-Type','application/json')
response = urllib2.urlopen(request)
json_object = json.load(response)
#print json_object['results']
if json_object['team'] == []:
    print 'No Data!'
else:
    for rows in json_object['team']:
        print 'Team ID:' + rows['team_id']
        print 'Team Name:' + rows['team_name']
        print 'Team URL:' + rows['team_icon_url'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T13:49:47.300

要解码 json，您必须传递 json 字符串。目前您正在尝试传递一个对象：

```
>>> response = urlopen(url)
>>> response
<addinfourl at 2146100812 whose fp = <socket._fileobject object at 0x7fe8cc2c>> 
```

您可以使用 获取数据`response.read()`。

# macos - 用于发送 Mac OS X“消息”的 Shell 命令？

> ID：14547917
> 
> 赞同：2
> 
> 时间：2013-01-27T13:36:03.800
> 
> 标签：macos, sms, osx-lion

我有 Mac OS X Mountain Lion (10.8.x)，虽然我很欣赏通过 GUI 提供的“消息”功能，但我正在尝试找到一种通过命令行向另一个人的手机发送 iMessage 的方法。有谁知道如何做到这一点？

我不希望使用“打开 Messages.app”来操纵脚本，但如果这是目前唯一可行的方法，请尊重。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-14T18:58:18.623

```
osascript -e 'tell application "Messages" to send "Hello World" to buddy "(your buddy name)"' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-15T04:53:58.700

我找到了一个简单的方法来做到这一点。如果您安装了 brew，只需运行“brew install iMessage”。然后运行“iMessage -t yourmessage -c contact@email.com”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-27T13:47:23.367

I don't think it's possible the apple developer site doesn't mention that and probably it's because they don't want to give opportunity to programmatically send messages (i think spambots are a concern) because it could be potentially annoying to receive automated messages but you could use notifications that it's specifically thinked to do what you are asking

# python - Python JSON 如何过滤返回的数据

> ID：14547918
> 
> 赞同：1
> 
> 时间：2013-01-27T13:36:07.227
> 
> 标签：python, json, discogs-api

我正在使用 Discogs API 获取数据，并且我想将 JSON 限制为仅具有“CD”或“专辑”或“Maxi-Single”格式的记录。我不确定如何过滤获取的数据，因为 Discogs 没有更简单的方法来从初始请求本身过滤它。您会注意到下面提到的 JSON URL 包含我想省略的“DVD”和“VHS”。任何想法/线索在获取完成后如何过滤它？

JSON URL：[http ://api.discogs.com/database/search?sort=year&sort_order=asc&artist=Britney+Spears&track=Crazy+Stop+Remix&type=master](http://api.discogs.com/database/search?sort=year&sort_order=asc&artist=Britney+Spears&track=Crazy+Stop+Remix&type=master)

Python

```
url = 'http://api.discogs.com/database/search?sort=year&sort_order=asc&artist=Britney+Spears&track=Crazy+Stop+Remix&type=master'
request = urllib2.Request(url)
request.add_header('User-Agent','Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)')
request.add_header('Content-Type','application/json')
response = urllib2.urlopen(request)
json_object = json.load(response)
if json_object['results'] == []:
    print 'No results found'
else:
    json_object_results_by_year=[x for x in json_object['results'] if 'year' in x]
    json_sorted_results = sorted(json_object_results_by_year,key=lambda x:x['year'])
    #print json_sorted_results 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T13:55:57.823

```
wanted = {u'CD',u'Album',u'Maxi-Single'}
[i for i in json_object[u'results'] if any(w in wanted for w in i[u'format'])] 
```

或者

```
[i for i in json_object[u'results'] if any(w in i[u'format'] for w in wanted)] 
```

# ms-access - Access 数据库查询分组

> ID：14547919
> 
> 赞同：0
> 
> 时间：2013-01-27T13:36:29.200
> 
> 标签：ms-access, grouping

我有一个 Access 2003 数据库，我被要求尝试修改。我的 MS Access 技能有限，因此这个问题。

查询如下所示：

```
SELECT
  TBL_PropertyProgramMember.PropertyId,
  Max(TBL_PropertyProgramMember.To) AS MaxOfTo,
  TBL_PropertyProgramMember.BookingPriority
FROM
  TBL_PropertyProgramMember
GROUP BY
  TBL_PropertyProgramMember.PropertyId,
  TBL_PropertyProgramMember.BookingPriority; 
```

我需要返回 unique `PropertyIds`，`To`每个属性的最大值，以及`BookingPriority`与该最大值关联的`To`值。使用上面的分组，如果属性被多次列出并且不同的 a different ，我会得到多个结果`BookingPriority`。

当我使用分组时，`BookingPriority`如果 Access 抛出错误，我无法删除分组。

我确定这与分组有关，但我不知道如何解决它。仅仅获得最大值或最小值`BookingPriority`并不能解决问题，因为值可能会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T14:27:16.627

您必须计算您的最大值（不返回您的 BookingPriority），然后再次加入结果，如下所示：-

```
SELECT 
TBL_PropertyProgramMember.PropertyID, 
M.MaxTo, 
TBL_PropertyProgramMember.BookingPriority

FROM 
(
SELECT 
TBL_PropertyProgramMember.PropertyID, 
Max(TBL_PropertyProgramMember.To) AS MaxTo
FROM 
TBL_PropertyProgramMember
GROUP BY 
TBL_PropertyProgramMember.PropertyID
) AS M 
INNER JOIN 
TBL_PropertyProgramMember 
ON (M.MaxTo = TBL_PropertyProgramMember.To) 
AND (M.PropertyID = TBL_PropertyProgramMember.PropertyID); 
```

对于给定的 BookingPriority，您将需要处理多个记录具有相同的最大“收件人”列的情况。

# java - 查找相邻的多边形 Java

> ID：14547921
> 
> 赞同：2
> 
> 时间：2013-01-27T13:36:37.880
> 
> 标签：java, computational-geometry, polygons, jts

我有一系列使用 JTS 拓扑套件创建的多边形。每个多边形是一组点、经度和纬度，形成一个形状，如下图所示。

```
((lat1,lon1),(lat2,lon2),....(lat1,lon1)) 
```

我想找到这些多边形邻居中的每一个，以及物理上靠近它们的其他形状。我曾想过寻找匹配点，但显然这并不适用于所有情况。我想知道是否有任何软件包可以检查多边形是否共享我可以在这种情况下使用的相同边缘？或者，如果不是，那么在 Java 中执行此操作的另一种方法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:00:54.687

There was in fact a very simple way to do this. I created an arraylist containing an array of objects. The object referenced the name/id of the polygon, the actual polygon coordinates and then a string that would contain ids of any neighbours.

In JTS Topology suite there is a method that you can call on polygons called touches that returns a boolean; so I had a double for loop, going through my arraylist twice and calling the method touches on polygon(i) so:

```
arraylist<object[]>..
//where in the array the objects are
object[0] = id
object[1] = polygon
object[2] = neighbours

for (int i=0;i<arraylist;i++)
  for (int j=0;j<arraylist;j++)
    if (i)[1].touches(j)[1]
      update i[2].. 
```

It's probably not the best method but it seems to work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T16:31:15.567

由于您正在寻找共享边，因此您可以创建一个哈希表，使用边作为键，并使用该边作为其项目的多边形列表。

然后你遍历每个多边形并填满表格。这在边数上是线性的。

然后您浏览表格并查找与多个多边形相关的边，这就是您要查找的内容。这与唯一边的数量成线性关系。

我不确定 Java 如何实现哈希表，因此获得此设置可能需要一些工作。确保对边缘进行排序，以防止边缘 (A,B) 与边缘 (B,A) 不同，这会弄乱算法。

至于库，似乎您正在尝试做的事情可能有点专业，因此不确定您是否会找到库实现，因此我概述了一个算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-11T16:25:26.823

如果您使用 JTS 几何图形，则可以使用可与任何几何图形对象一起使用的空间关系。

如果您可以确保邻居之间至少有一个点是共同的并且它们的内部不相交，请使用**触摸。**

如果您不能确保内部不相交，请使用**相交。**根据数据源，这可能是更好的选择。

给定多边形，获取邻居的方法如下所示：

```
public ArrayList<Polygon> getNeighbourList(Polygon center, ArrayList<Polygon> possibleNeighbourList){
    // result list
    ArrayList realNeighbourList = new ArrayList();
    for(Polygon p : possibleNeighbourList){
        // check if current polygon is a neighbour of the center polygon by using the spatial relation touches or intersects
        if(center.intersects(p)){
            realNeighbourList.add(p);
        }
    }
    return realNeighbourList;
} 
```

# c++ - 为什么将静态类内初始化成员传递给采用 const 引用的函数需要该成员具有定义？

> ID：14547923
> 
> 赞同：5
> 
> 时间：2013-01-27T13:36:59.350
> 
> 标签：c++, c++11, static

这是基于**[此处](https://stackoverflow.com/questions/14547370/confusion-about-in-class-initialization-of-static-data-members)**提出的原始问题。

^([详细]：这是评论中要求的相关问题)

Lippman 在 p.303 的 c++ 入门书提到：

```
class Account {
private:
  static constexpr int period = 30;
  double daily_tbl[period];
} 
```

> 如果成员仅在编译器可以替换成员值的上下文中使用，则不需要单独定义初始化的 const 或 constexpr static。但是，如果我们在值不能被替换的上下文中使用该成员，则该成员必须有一个定义。

还：

> 例如，如果我们将 Account::period 传递给接受 const int& 的函数，则必须定义 period。

那么，为什么传递`Account::period`给一个需要 a 的函数`const int&`需要`period`定义呢？
知道会很有帮助，

*   理由是什么？
*   标准是否明确指定了这些场景，或者这些场景是从更通用的引用中推导出来的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T14:00:06.310

如果成员从未获取过它的地址（或者，等效地，绑定到它的引用），编译器可以简单地使用它的值，并且这个值在每个 TU 中都是相同的，所以没有问题，因为右值不必有地址。或者它可以在每个 TU 或任何它想要的东西中制作一个副本，因为你无法观察它的地址。

但是，如果您尝试获取地址，编译器有义务确保在所有 TU 中，地址都是相同的。由于 C++ 真正可怕的 TU 系统，这意味着需要一个且只有一个显式定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:54:44.917

我想基本原理是这样的：

```
const int* get_addr(const int& i) {
  return &i;
}

class Account {
private:
  static constexpr int period = 30;
  double daily_tbl[period];

  const int* period_ptr() {
    return get_addr(period);
  }
} 
```

# meteor - Meteor JS - 允许/拒绝规则

> ID：14547929
> 
> 赞同：5
> 
> 时间：2013-01-27T13:38:05.337
> 
> 标签：meteor

在示例应用程序“聚会”中，有一组用于聚会收集的允许/拒绝规则。的规则`insert`如下所示：

```
Parties.allow({
  insert: function (userId, party) {
    return false; // no cowboy inserts -- use createParty method
  },... 
```

同时，createParty 方法实现了 Party.insert({....})，它在某种程度上不受应用于 Party 集合的规则的影响。

```
.....
return Parties.insert({
      owner: this.userId,
      x: options.x,
      y: options.y,
      title: options.title,
      description: options.description,
      public: !! options.public,
      invited: [],
      rsvps: []
    });
..... 
```

有人可以解释为什么 createParty 方法不受规则影响吗？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T13:56:06.443

通过从客户端调用 a 在服务器和客户端上运行的`createParty`is 。在客户端它不会插入任何数据，但在服务器上运行的方法会插入该方。`Meteor.methods``Meteor.call('createParties')`

流星`allow`和`deny`规则直接控制来自客户端的内容，而不适用于在服务器端运行的任何内容。

# prolog - Prolog无限循环

> ID：14547932
> 
> 赞同：3
> 
> 时间：2013-01-27T13:38:27.003
> 
> 标签：prolog, swi-prolog, failure-slice, b-prolog, xsb

这是一个应该找出谁与 john 兼容的程序。我是 Prolog 的新手。为了让Prolog知道例如。met(X,Y) = met (Y,X) 已经写了很多代码。现在当我开始查询时

```
?- compatible(john, X) 
```

它进入无限循环......

源代码：

```
compatible(X,Y) :- reading(X), reading(Y).
compatible(X,Y) :- football(X), football(Y).
compatible(X,Y) :- friends(X,Y).
compatible(X,Y) :- mutual(X,Y).
friends(X,Y) :- havemet(X,Y), compatible(X,Y).
havemet(X,Y) :- met(X,Y).
havemet(X,Y) :- met(Y,X).
mutual(X,Y) :- friends(X,Temp), friends(Y,Temp).
mutual(X,Y) :- friends(Temp,X), friends(Y,Temp).
mutual(X,Y) :- friends(X,Temp), friends(Temp,Y).
mutual(X,Y) :- friends(Temp,X), friends(Temp,Y).

football(john).
football(james).
friends(john, carl).
friends(carl, john).
reading(carl).
reading(fred).
reading(emily).
met(carl, emily).
met(fred, james).
met(fred, emily). 
```

我一直在研究这么多，但我仍然不明白问题是什么以及如何解决它。能帮助我对我来说太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:27:05.810

那么你的程序有什么问题呢？这是一种本地化您遇到的问题的方法。通过插入目标**`false`**，我们获得了一个[失败切片](https://stackoverflow.com/questions/tagged/failure-slice)。这是一个与原始程序共享许多属性的片段。特别是：如果失败切片循环，则原始程序也会循环。因此，故障片向我们展示了必须修改以克服原始问题的程序的*一部分*。对于您的查询，我得到以下仍然没有终止的片段：

```
?- 兼容（约翰，X），假。

兼容（X，Y）：-**假**，阅读（X），阅读（Y）。
兼容（X，Y）：-**假**，足球（X），足球（Y）。
兼容（X，Y）：-**假**，朋友（X，Y）。
兼容（X，Y）：- 相互（X，Y），假。

朋友（X，Y）：- havemet（X，Y），兼容（X，Y）。
朋友（约翰，卡尔）：-**假**。
朋友（卡尔，约翰）。

havemet(X,Y) :- **false**，met(X,Y)。
已经满足（X，Y）：- 满足（Y，X）。

相互（X，Y）：-**假**，朋友（X，Temp），朋友（Y，Temp）。
相互（X，Y）：-朋友（Temp，X），朋友（Y，Temp），假。
相互（X，Y）：-朋友（X，Temp），假，朋友（Temp，Y）。
相互（X，Y）：-**假**，朋友（Temp，X），朋友（Temp，Y）。

遇见（卡尔，艾米丽）。
遇见（弗雷德，詹姆斯）： -**假**。
遇见（弗雷德，艾米丽）：-**假**。

```

但是不应该只是任何`compatible/2`终止查询吗？对于最一般的查询，可以进一步减少故障片：

```
?- 兼容（X，Y），假。

兼容（X，Y）：-**假**，阅读（X），阅读（Y）。
兼容（X，Y）：-**假**，足球（X），足球（Y）。
兼容（X，Y）：-**假**，朋友（X，Y）。
兼容（X，Y）：- 相互（X，Y），假。

朋友（X，Y）：- havemet（X，Y），兼容（X，Y）。
朋友（约翰，卡尔）：-**假**。
朋友（卡尔，约翰）：-**假**。

havemet(X,Y) :- **false**，met(X,Y)。
已经满足（X，Y）：- 满足（Y，X）。

相互（X，Y）：-**假**，朋友（X，Temp），朋友（Y，Temp）。
相互（X，Y）：-**假**，朋友（Temp，X），朋友（Y，Temp）。
相互（X，Y）：-朋友（X，Temp），假，朋友（Temp，Y）。
相互（X，Y）：-**假**，朋友（Temp，X），朋友（Temp，Y）。

遇见（卡尔，艾米丽）。
遇见（弗雷德，詹姆斯）： -**假**。
遇见（弗雷德，艾米丽）：-**假**。

```

在剩下的部分中，您必须以某种方式解决问题。可能还有其他不终止的原因。但是无论如何，您**都必须解决这个问题。**

如果这仍然不够好，您可以`V = const`在程序中添加目标。但我认为这应该足够了......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T21:18:22.810

What Prolog system are you using? Are you required to use a particular system?

Your program as it is will not terminate in a standard Prolog, but will in a Prolog with tabling support, such as XSB-Prolog [http://xsb.sourceforge.net/](http://xsb.sourceforge.net/) or B-Prolog [http://www.probp.com/](http://www.probp.com/) - just add `:- auto_table.` as a first line of your program.

```
| ?- compatible(john, X).
compatible(john, X).
X = john ?;
X = james ?;
X = carl ?;
X = emily ?;
no 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T14:05:09.340

我对你有一个无限循环并不感到惊讶。`compatible`取决于`friends`而`friends`取决于`compatible`。你确定这是你想要的吗？

请注意，如果您真的希望您的规则是递归的，您将需要一个停止条件。但我不明白为什么你需要递归来解决像亲和力匹配这样简单的问题。

# delphi - 返回 self 作为函数结果的问题

> ID：14547935
> 
> 赞同：6
> 
> 时间：2013-01-27T13:38:57.803
> 
> 标签：delphi, delphi-xe3

我有一个非常简单的 3D 矢量类定义`TVector3D`，以及一些用于实现该`TVector3D.Normalise`功能的方法。如果我向`Normalise`函数传递一个已经标准化的向量，我希望它返回我传递给它的向量。我在这里使用过`Result := Self`，但我得到了一些疯狂的回报。

控制台应用程序：

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

type
  TVector3D = Class
  public
    x : Single;
    y : Single;
    z : Single;
    constructor Create(x : Single;
                       y : Single;
                       z : Single);
    function GetMagnitude() : Single;
    function IsUnitVector() : Boolean;
    function Normalise() : TVector3D;
  end;

  constructor TVector3D.Create(x : Single;
                               y : Single;
                               z : Single);
  begin
    Self.x := x;
    Self.y := y;
    Self.z := z;
  end;

  function TVector3D.GetMagnitude;
  begin
    Result := Sqrt(Sqr(Self.x) + Sqr(Self.y) + Sqr(Self.z));
  end;

  function TVector3D.IsUnitVector;
  begin
    if Self.GetMagnitude = 1 then
      Result := True
    else
      Result := False;
  end;

  function TVector3D.Normalise;
  var
    x : Single;
    y : Single;
    z : Single;
    MagnitudeFactor : Single;
  begin
    if IsUnitVector then
      Result := Self
    else
      MagnitudeFactor := 1/(Self.GetMagnitude);
      x := Self.x*MagnitudeFactor;
      y := Self.y*MagnitudeFactor;
      z := Self.z*MagnitudeFactor;
      Result := TVector3D.Create(x,
                                 y,
                                 z);
  end;

  procedure TestNormalise;
  var
    nonUnitVector : TVector3D;
    unitVector : TVector3D;
    nUVNormed : TVector3D;
    uVNormed : TVector3D;
  begin
  //Setup Vectors for Test
    nonUnitVector := TVector3D.Create(1,
                                      1,
                                      1);
    unitVector := TVector3D.Create(1,
                                   0,
                                   0);
  //Normalise Vectors & Free Memory
    nUVNormed := nonUnitVector.Normalise;
    nonUnitVector.Free;
    uVNormed := unitVector.Normalise;
    unitVector.Free;
  //Print Output & Free Memory
    WriteLn('nUVNormed = (' + FloatToStr(nUVNormed.x) + ', ' + FloatToStr(nUVNormed.y) + ', ' + FloatToStr(nUVNormed.z) + ')');
    nUVNormed.Free;
    WriteLn('uVNormed = (' + FloatToStr(uVNormed.x) + ', ' + FloatToStr(uVNormed.y) + ', ' + FloatToStr(uVNormed.z) + ')');
    uVNormed.Free;
  end;

begin
  try
    TestNormalise;
    Sleep(10000);
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

`Normalise`适用于非单位向量，即`IsUnitVector`返回 false。但是对于单位向量，例如`(1,0,0)`，而不是返回自身，我得到一个非常低的非零数的结果，只要之前有一个非零，例如`(8.47122...E-38,0,0)`。

如果我通过调试器运行此程序，并在`Result := Self`设置为评估 Self 的行上设置断点，Self`(1,0,0)`仍然结果变为`(Very Low Number,0,0)`. `Very Low Number`每次我运行程序时都会发生变化，但似乎总是在`E-38/E-39`.

我不明白为什么会这样。为什么会发生这种情况以及如何最好地改变我的`Normalise`功能以避免它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T14:06:47.343

您当前的`TVector3D.Normalise`实现存在一些问题：

*   最后 4 行*总是*被执行，因为你没有在,`begin-end`之后使用块`else`
*   所以例程永远不会返回`Self`，但总是一个新的实例，
*   返回的实例的内存可能会泄漏，因为您在函数调用后失去了它的所有权，
*   当`IsUnitVector`返回`True`时，将跳过对的分配，`MagnitudeFactor`它将是一个随机值（当前存在于该内存的地址），这解释了为什么你会变得垃圾。编译器还会警告您：*变量`MagnitudeFactor`可能尚未初始化。*

相反，我会重写例程如下：

```
function TVector3D.Normalise: TVector3D;
begin
  if not IsUnitVector then
  begin
    x := x / GetMagnitude;
    y := y / GetMagnitude;
    z := z / GetMagnitude;
  end;
  Result := Self;
end; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-27T16:00:39.323

所有问题的根源在于您使用的是一个类，它是一个引用类型。相反，您需要使您的向量成为值类型。这意味着使用`record`.

在您的代码中，即使您解决了@NGLN 确定的问题，在您开始调用`WriteLn`.

除非你很快掌握这个问题，否则我担心你会继续遇到问题。与您当前的方法相比，切换到使用值类型将使您的编码变得简单。

这里有一些东西可以帮助你开始：

```
type
  TVector3 = record
  public
    class operator Negative(const V: TVector3): TVector3;
    class operator Equal(const V1, V2: TVector3): Boolean;
    class operator NotEqual(const V1, V2: TVector3): Boolean;
    class operator Add(const V1, V2: TVector3): TVector3;
    class operator Subtract(const V1, V2: TVector3): TVector3;
    class operator Multiply(const V: TVector3; const D: Double): TVector3;
    class operator Multiply(const D: Double; const V: TVector3): TVector3;
    class operator Divide(const V: TVector3; const D: Double): TVector3;
    class function New(const X, Y, Z: Double): TVector3; static;
    function IsZero: Boolean;
    function IsNonZero: Boolean;
    function IsUnit: Boolean;
    function Mag: Double;
    function SqrMag: Double;
    function Normalised: TVector3;
    function ToString: string;
  public
    X, Y, Z: Double;
  end;

const
  ZeroVector3: TVector3=();

class operator TVector3.Negative(const V: TVector3): TVector3;
begin
  Result.X := -V.X;
  Result.Y := -V.Y;
  Result.Z := -V.Z;
end;

class operator TVector3.Equal(const V1, V2: TVector3): Boolean;
begin
  Result := (V1.X=V2.X) and (V1.Y=V2.Y) and (V1.Z=V2.Z);
end;

class operator TVector3.NotEqual(const V1, V2: TVector3): Boolean;
begin
  Result := not (V1=V2);
end;

class operator TVector3.Add(const V1, V2: TVector3): TVector3;
begin
  Result.X := V1.X + V2.X;
  Result.Y := V1.Y + V2.Y;
  Result.Z := V1.Z + V2.Z;
end;

class operator TVector3.Subtract(const V1, V2: TVector3): TVector3;
begin
  Result.X := V1.X - V2.X;
  Result.Y := V1.Y - V2.Y;
  Result.Z := V1.Z - V2.Z;
end;

class operator TVector3.Multiply(const V: TVector3; const D: Double): TVector3;
begin
  Result.X := D*V.X;
  Result.Y := D*V.Y;
  Result.Z := D*V.Z;
end;

class operator TVector3.Multiply(const D: Double; const V: TVector3): TVector3;
begin
  Result.X := D*V.X;
  Result.Y := D*V.Y;
  Result.Z := D*V.Z;
end;

class operator TVector3.Divide(const V: TVector3; const D: Double): TVector3;
begin
  Result := (1.0/D)*V;
end;

class function TVector3.New(const X, Y, Z: Double): TVector3;
begin
  Result.X := X;
  Result.Y := Y;
  Result.Z := Z;
end;

function TVector3.IsZero: Boolean;
begin
  Result := Self=ZeroVector3;
end;

function TVector3.IsNonZero: Boolean;
begin
  Result := Self<>ZeroVector3;
end;

function TVector3.IsUnit: Boolean;
begin
  Result := abs(1.0-Mag)<1.0e-5;
end;

function TVector3.Mag: Double;
begin
  Result := Sqrt(X*X + Y*Y + Z*Z);
end;

function TVector3.SqrMag: Double;
begin
  Result := X*X + Y*Y + Z*Z;
end;

function TVector3.Normalised;
begin
  Result := Self/Mag;
end;

function TVector3.ToString: string;
begin
  Result := Format('(%g, %g, %g)', [X, Y, Z]);
end; 
```

这是从我自己的代码库中提取的。我正在使用`Double`，但如果您真的更喜欢使用`Single`，那么您可以轻松更改它。

运算符重载的使用使您编写的代码更具可读性。现在你可以写`V3 := V1 + V2`等等了。

这是您的测试代码与此记录的样子：

```
var
  nonUnitVector: TVector3;
  unitVector: TVector3;
  nUVNormed: TVector3;
  uVNormed: TVector3;

begin
  //Setup Vectors for Test
  nonUnitVector := TVector3.New(1, 1, 1);
  unitVector := TVector3.New(1, 0, 0);

  //Normalise Vectors
  nUVNormed := nonUnitVector.Normalised;
  uVNormed := unitVector.Normalised;

  //Print Output
  WriteLn('nUVNormed = ' + nUVNormed.ToString);
  WriteLn('uVNormed = ' + uVNormed.ToString);
  Readln;
end. 
```

或者，如果您想稍微压缩它：

```
WriteLn('nUVNormed = ' + TVector3.New(1, 1, 1).Normalised.ToString);
WriteLn('uVNormed = ' + TVector3.New(1, 0, 0).Normalised.ToString); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-27T13:43:48.363

一些提示：

首先，如果我是你，我实际上会让向量成为记录而不是类，但是 YMMV。这会简化*很多*，因为编译器将管理每个向量的生命周期（你永远不必担心释放东西）。第二，

```
function TVector3D.IsUnitVector;
begin
  if self.GetMagnitude = 1 then
    result := True
  else
    result := False;
end; 
```

通常写成，句法和完全等价，

```
function TVector3D.IsUnitVector;
begin
  result := GetMagnitude = 1
end; 
```

但即便如此，也是不正确的。由于您正在处理浮点数，因此您无法可靠地测试相等性。相反，您应该查看幅度是否在某个统一区间内，以便“绒毛”不会干扰。例如，您可以执行 ( `uses Math`)

```
function TVector3D.IsUnitVector;
begin
  result := IsZero(GetMagnitude - 1)
end; 
```

第三，如果需要规范化，您的`Normalize`函数将返回一个*新的向量对象，如果不需要，则返回**相同*的对象。这很令人困惑。你永远不知道你有多少实例！相反，将其设为一个过程：

```
procedure TVector3D.Normalize;
var
  norm: single;
begin
  norm := GetMagnitude;
  x := x / norm;
  y := y / norm;
  z := z / norm;
end; 
```

第四，为什么使用`single`代替`double`or `real`？

第五，正如 NGLN 所指出的（请支持他的回答！），您忘记了函数部分中的`begin...end`块，所以最后四行*总是*被执行！因此，您*总是*创建一个新的向量实例！不过，我的观点非常重要：您的原始函数“打算”（如果您只是添加块）根据条件返回或创建一个新实例，这相当糟糕，因为那时您不知道您有多少个实例！（因此，您可能会开始泄漏向量...）`else``Normalize`**`begin...end``self`**

# javascript - 在 iframe 中拖放

> ID：14547937
> 
> 赞同：3
> 
> 时间：2013-01-27T13:39:22.480
> 
> 标签：javascript, html

我正在尝试制作允许用户在 iframe 元素中拖动 div 的网络应用程序。

这是我当前在 index.html 中的代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script>
    function onDrag(event){
        event.dataTransfer.setData('Text', 'Some content');
    }
</script>
<div id="items">
    <ul>
        <li><div draggable="true" ondrag="onDrag(event)">Content1</div></li>
        <li><div draggable="true" ondrag="onDrag(event)">Content2</div></li>
    </ul>
</div>
<iframe id="box" src="box.html">
</iframe> 
```

这是我来自 box.html 的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title></title>
    <script>    
        function onDrop(event){
            event.target.innerHTML += event.dataTransfer.getData('Text');
            alert('Ok!');
        }
        function onDragOver(ev){
            ev.preventDefault();
        }
    </script>
</head>
<body ondragover="onDragOver(event)" ondrop="onDrop(event)">
</body>
</html> 
```

拖动有效，我什至从 onDrop 函数中得到了警报，但是`event.dataTransfer.getData('Text')`返回的是空字符串，我不知道为什么。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:38:58.893

您应该在事件中设置拖动数据`dragstart`，而不是`drag`事件：http: [//jsfiddle.net/SVtzK/1/](http://jsfiddle.net/SVtzK/1/)。

# google-maps-api-3 - 如何获取放置标记的瓷砖编号（xyz）？

> ID：14547940
> 
> 赞同：0
> 
> 时间：2013-01-27T13:39:36.570
> 
> 标签：google-maps-api-3

我需要使用 Google Maps API v3 获取点击标记的图块编号（x、y、z）。

几乎没有可用的文档讨论这个问题。我该怎么开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T14:13:39.123

1.  获取标记 lat lng，它是标记单击事件对象的属性。
2.  使用地图投影 ( `map.getProjection()`) 转换为世界坐标（也称为点平面）。
3.  使用当前地图缩放级别（这是您的“z”坐标），从世界坐标计算像素坐标：
    `pixelCoordinateX = parseInt(worldCoordinateX * Math.pow(2, zoom), 10)`。'y' 坐标的概念相同。
4.  将像素坐标除以平铺大小 (256) 并取整数部分。这是瓷砖编号。
    `x = parseInt(pixelCoordinateX / 256, 10)`.

请参阅[Google Maps API Reference 中的地图类型概念](https://developers.google.com/maps/documentation/javascript/maptypes#MapCoordinates)。

# jquery - 如何更改 jQuery 代码以在 url 末尾隐藏 .jpg？

> ID：14547941
> 
> 赞同：6
> 
> 时间：2013-01-27T13:39:38.933
> 
> 标签：jquery, colorbox

有人可以帮我写这段简短的代码吗？现在，当我单击网站上的缩略图时，它会在地址栏中创建 url。但 url 末尾有 .jpg。我应该如何修改代码，使其不会在 url 末尾显示 .jpg？

如果用户使用诸​​如 www.domain.com/#image.jpg 之类的 url 进入站点，则这段代码也会自动打开 Colorbox 图像，因此对代码的更改自然也会对此产生影响。

谢谢！

```
jQuery(function() {
    var id, group;

    group = jQuery("a[rel='lightbox[63]']").colorbox({ 
        onComplete: function() {
            window.location.hash = (this.pathname.match(/\/([^\/?#]+)$/i) || [,''])[1];
        }, 
        onClosed: function() {
            location.hash = '';
        }
    });

    id = location.hash.replace(/^\#/, '');
    group.filter('[href$="'+id+'"]').eq(0).click();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:57:55.590

替换这个：

```
window.location.hash = (this.pathname.match(/\/([^\/?#]+)$/i) || [,''])[1]; 
```

有了这个：

```
// Get the image URL
with_ext = (this.pathname.match(/\/([^\/?#]+)$/i) || [,''])[1];
// Get the image url without the extension
without_ext =   with_ext.substring(0, with_ext.lastIndexOf(".")));
// Redirect
window.location.hash = without_ext; 
```

## 解释

*   `my_str.lastIndexOf(".")`返回`.`字符串中最后一个字符的位置`my_str`
*   `my_str.substring(n, m)`, where `n`and `m`are numbers 返回`my_str`开头的`n`字符`m`- [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)

## 例子

[http://jsbin.com/uqufev/1/edit](http://jsbin.com/uqufev/1/edit)

# java - 在 HashMap 中使用复合键为许多 LinearGradient 着色器优化 onDraw

> ID：14547946
> 
> 赞同：2
> 
> 时间：2013-01-27T13:39:55.773
> 
> 标签：java, android, performance, hashmap

我正在编写我的第一个 Android 应用程序（以及过去 15 年来我的第一个 Java 应用程序）。它采用编码字符串并将代码转换为绘图操作。一些代码代表梯度定义，这是我的问题所关注的。

如果我理解正确，尝试在`onDraw`函数期间创建任何类型的新对象（在我的扩展`View`类中重写）将导致 lint 输出警告，建议您缓存对象并且在 onDraw 期间永远不会分配新对象。所以我决定尝试对代码字符串定义的所有渐变进行缓存。这样，如果您以相同的大小重绘相同的代码，则不必重新分配该代码定义的渐变。

我在尝试为 定义密钥结构时遇到了问题`HashMap`，我认为这是缓存的最佳结构。如果我可以简单地使用将渐变定义为键的代码片段（字符串）会很好，但我认为这不会很好，因为如果调整图片大小，代码保持不变，但渐变必须随图片改变大小。所以要么我不能对不同大小的相同梯度有相同的键，要么每次调整图片大小时我都必须清除缓存。

这导致我尝试为`HashMap`. 稍微阅读一下 Java，我发现它不支持元组，因为据我所知，它不支持像 C# 这样的值类型。因此，推荐的创建复合键的方法是创建一个新类。所以我开始创建一个新类来表示复合键。然后我意识到我又回到了原点。如果我必须创建一个引用类型对象来表示键，lint 会给我一个关于在 onDraw 期间分配内存的警告，对吧？（或者即使没有，我也会在 onDraw 期间分配内存，这是我们试图避免的。）

我在这里需要一些专家建议。我是否正在为优化而移动，这更像是一种指导而不是规则，我应该只根据需要创建渐变吗？我应该使用代码作为`HashMap`键并在每次大小更改时清除缓存吗？字符串操作（例如子字符串）是否也需要我试图避免的内存分配？Java 是否支持自定义值类型？我是否需要编写自己的替代品`HashMap`来接受一系列值类型作为键而不分配堆内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T11:15:30.613

不幸的是，没有办法（我相信你知道）设置 LinearGradient 的大小或颜色。我认为缓存东西是最好的选择。所以让我澄清一些事情：

1.  不要在每个 onDraw 中创建新的 LinearGradients

2.  是的，子字符串分配了一个新的字符串对象（一些小例外是空字符串 AFAIK）。由于在 Java 或 C# 中无法实际更改字符串对象的内容，因此必须为字符串创建一个新对象。这就是为什么在制作字符串时建议使用 StringBuilders 的原因。此外，您似乎来自 C# 背景，所以如果您还没有遇到过这个问题*（6 个月后...*），请记住不要`String.equals`使用`==`！

3.  Java 不支持自定义值类型。一切都在堆上分配。希望一些分配被优化掉，但这不能保证，显然在许多情况下不适用。

基本上：

首先，“lint”就是这样。这甚至不是警告。这只是特定于您正在开发的平台的指南。随意分配抽奖，但尽量避免每次都这样做。如果您需要在绘制过程中创建一个新的 LinearGradient，请继续，但将其保存以备后用，这样您就不必再次创建它。

其次，你可以对着色器做一件特别的事情来避免大​​量使用它们：使用`Shader.setLocalMatrix`它来移动它并调整它的大小。我在调整某些着色器的大小时遇到​​了一些麻烦（例如，我知道它不适用于 RadialGradient），但如果幸运的话，它可能会起作用。如果一切都失败了，也许会退回到将新矩阵推入 Canvas 的堆栈。

# php - 将 this.value 传递给包含空格的 AJAX javascript 函数，不返回任何结果

> ID：14547954
> 
> 赞同：0
> 
> 时间：2013-01-27T13:40:54.913
> 
> 标签：php, javascript, ajax, drop-down-menu

我有一个包含不同美国州的下拉菜单。当用户选择不同的州时，它会将 this.value 发送到一个 ajax 函数，该函数填充另一个下拉菜单，其中填充了该州内不同的城市。

好消息是它可以工作......在大多数情况下。但是，当我选择一个带有 2 个单词（例如“纽约”）的州时，它什么也找不到。我推测它是因为中间有一个空白区域。因此 this.value 实际上只传递了“New”而不是“New York”。下面是我的 PHP 代码和 AJAX 函数。谁能告诉我我在这里错过了什么？！太感谢了 ：-）

```
 //if result returns a value
if ($result != NULL){

    $row = mysql_fetch_assoc($result);
    $countryCode = $row['Code'];

    if ($countryCode != NULL){

        $sql = "SELECT DISTINCT District FROM City WHERE CountryCode = '$countryCode'";
        $result = mysql_query($sql);

        ?>
        <select name="state" onchange="getCity('<?=$country?>',this.value)">
        <option>Select State</option>

        <? while($row=mysql_fetch_array($result)) { ?>

        <option value="<?=$row['District']?>"><?=$row['District']?></option>

        <? } ?>

        </select>

    <?php

    }

}

function getCity(countryId, stateId) {      
    var strURL="findCity.php?country="+countryId+"&state="+stateId;
    var req = getXMLHTTP();

    if (req) {

        req.onreadystatechange = function() {
            if (req.readyState == 4) {
                // only if "OK"
                if (req.status == 200) {                        
                    document.getElementById('citydiv').innerHTML=req.responseText;                      
                } else {
                    alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                }
            }               
        }           
        req.open("GET", strURL, true);
        req.send(null);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T13:44:02.333

您应该像这样用双引号将值括起来

```
<option value="<?=$row['District']?>"><?=$row['District']?></option> 
```

默认情况下，HTML 将第一个单词作为值，将下一个单词作为下一个没有任何值的属性的名称。将其括在引号中将使整个短语成为单个值..

# javascript - AngularJS - 使用子路由进行模板化

> ID：14547957
> 
> 赞同：6
> 
> 时间：2013-01-27T13:41:07.423
> 
> 标签：javascript, angularjs

我对 Angular.js 很陌生，我似乎无法弄清楚如何解决我的问题。

**该应用程序**由三个主要选项卡组成，它们也是顶级路线，即。

```
#/home
#/inbox
#/products 
```

当前的路由配置看起来像这样（coffeescript）：

```
$routeProvider.
  when('/home', templateUrl: 'home.html').
  when('/inbox', templateUrl: 'inbox.html').
  when('/inbox/:thread_id', templateUrl: 'inbox.html', controller: 'MessagesCtrl').
  otherwise(redirectTo: '/inbox') 
```

现在，**问题是收件箱视图**。

收件箱视图 ( `inbox.html`) 是一个拆分列模板，左侧是消息线程列表，右侧是所选线程的消息：

```
 --------------------------
| Navigation               |
 --------------------------
|         |                |
| Threads |    Messages    |
|         |                |
|         |                | 
```

`#/inbox`无论是否选择了线程，所有路由都应该可见线程列表。

从路由中可以看出，收件箱视图是一个单独的模板 ( `inbox.html`)，它在线程被选中和未选中时都被加载。这使得每次选择线程时 Angular 都会重新渲染整个视图，这也会导致线程列表（右侧）重新渲染并松开其滚动位置。

I would like to keep the thread-list from re-render whenever a thread is selected and I can't seem to figure out how to organize my routes/templates in order to achieve this.

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T00:16:11.810

请检查这个[问题](https://github.com/angular/angular.js/issues/778)，我相信你的问题是完全一样的。

如果您更改 URL 路径，则其中的所有内容都`ng-view`将重新呈现，并且无法避免这种情况。但是，如果您在路由配置中将 设置`reloadOnSearch`为*false*，然后使用类似 的链接`/inbox?id=1`，`ng-view`则不会重新渲染。这可能是您问题的最佳解决方案，您可以使用深度链接并避免重新渲染。

关于该`reloadOnSearch`属性，angularjs[文档](http://docs.angularjs.org/api/ng.$routeProvider)指出：

> [reloadOnSearch=true] - {boolean=} - 当只有 $location.search() 改变时重新加载路由。
> 
> 如果该选项设置为 false 并且浏览器中的 url 发生更改，则 $routeUpdate 事件将在根范围内广播。

您只需要侦听`$routeUpdate`事件即可更新收件箱控制器内的信息，如下所示：

```
app.controller('InboxCtrl', function($scope, $routeParams) {      
    $scope.$on('$routeUpdate', function(value) {
        // update the model/$scope here based on the $routeParams info...
    });    
}); 
```

**jsFiddle**示例：http: [//jsfiddle.net/bmleite/ZB56n/](http://jsfiddle.net/bmleite/ZB56n/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:01:53.663

谢谢你的建议。但是，我能够使用这种技术解决它：

[http://www.bennadel.com/blog/2441-Nested-Views-Routing-And-Deep-Linking-With-AngularJS.htm](http://www.bennadel.com/blog/2441-Nested-Views-Routing-And-Deep-Linking-With-AngularJS.htm) [https://github.com/bennadel/AngularJS-Routing](https://github.com/bennadel/AngularJS-Routing)

实现起来有点复杂，但就我而言，我认为这最终是值得的

# php - 括号正则表达式php

> ID：14547961
> 
> 赞同：0
> 
> 时间：2013-01-27T13:41:24.087
> 
> 标签：php, regex

在 php 中使用正则表达式，我如何将每个 IP 存储到一个单独的变量中？

它将从如下所示的日志文件中获取内容。

```
1/27/2013 7:34:14 AM Removed        {109.104.19.75}
1/27/2013 7:34:16 AM Added          {98.119.183.235}
1/27/2013 7:34:17 AM Removed        {98.119.183.235}
1/27/2013 7:34:34 AM Added          {89.155.107.178}
1/27/2013 7:34:35 AM Removed        {89.155.107.178} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T14:06:21.063

此脚本读取您的日志文件并将 IP 地址作为数组返回。我建议为此使用数组，因为与单独的变量相比，您可以使用 PHP 更好地处理它：

```
function readIps($filename, $unique = false) {
    $lines  = file($filename);
    $result = array();

    foreach ($lines as $line) {
        if (preg_match('/\{([^\}]+)\}$/', $line, $matches)) {
            $result[] = $matches[1];
        }
    }

    return $unique ? array_values(array_unique($result)) : $result;
} 
```

该脚本假定，您确定，每行末尾的括号内只列出了 IP 地址。如果不是这种情况，则正则表达式还将匹配 IP 地址以外的其他内容，并且必须更加特殊。

只用你的文件名调用它，你就会得到一个 IP 列表每次出现的列表，就像它出现的频率一样。将第二个参数设置为调用它，`true`您将获得一个列表，其中每个 IP 仅出现一次。

# c# - 为什么我的图标没有出现在标题栏中？

> ID：14547969
> 
> 赞同：6
> 
> 时间：2013-01-27T13:42:23.693
> 
> 标签：c#, .net, winforms

我已从 Visual Studio 解决方案资源管理器的“属性”窗口为我的应用程序分配了一个图标；应用程序的图标更改成功，但标题栏仍显示默认图标：

![标题栏，显示默认图标](../Images/f42ec58dfabf59081e857ddf3c0b031a.png)

我已经重建了我的应用程序，但它仍然显示默认图标。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T13:45:21.863

因为表单具有与应用程序不同的 icaon 配置。在表单上设置图标，而不仅仅是在应用程序上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-08T15:35:35.157

我知道这是一个非常古老的问题，但我可以添加以下评论：

注意“FormBorderStyle”属性。如果选择了“FixedToolWindow”或“SizableToolWindow”，即使您在“Icon”属性中指定了图标，您的图标也不会出现。我遇到了同样的问题。祝你好运。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-20T22:05:20.567

图标可能不显示还有另一个原因。

如果 Form 的 ControlBox 属性设置为 False，则图标不会显示。

（听起来像一个不受欢迎的副作用）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-27T13:45:30.697

表单本身也有一个`Icon`您需要设置的属性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-27T13:47:45.690

如果您使用 winform，您需要设置主窗体的图标属性

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-27T14:22:47.660

您没有提到您使用的是 winforms 还是 wpf - wpf 会将图标放置在所有窗口/表单上，除非被覆盖。

Winforms 需要单独设置图标。

# xaml - Windows 8 App with Azure WCF Service

> ID：14547974
> 
> 赞同：0
> 
> 时间：2013-01-27T13:42:50.103
> 
> 标签：xaml, azure, windows-8

I have a Windows 8 app that I want to connect to a WCF Service hosted on Windows Azure - easy.

The tricky part is that I want to allow only Authenticated users (via their windows live account) to access my service, including being able to pass a unique identifier to the service to identify the user on the Azure hosted app.

All of this plumbing is available when you use Azure Mobile Services, but surely there must be a solution for a regular WCF app within azure.

Azure Mobile Services has a `MobileServiceClient` type that has all of the required functionality, but I need a regular Azure-hosted WCF equivalent

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T17:58:59.713

[您可以尝试从现已弃用的Windows Azure Toolkit for Windows 8](http://watwindows8.codeplex.com/)中提取一些内容。目前[发布预览版](http://watwindows8.codeplex.com/releases/view/84166)可用；它不会按原样工作，因为它是 pre-RTM，但它应该有助于启动您的工作。

我将再次强调它不受支持，并且 Windows Azure 移动服务是记录计划。

# ios - iOS In-App Purchase invalid product ID iOS 5.1.1

> ID：14547977
> 
> 赞同：0
> 
> 时间：2013-01-27T13:43:44.050
> 
> 标签：ios, in-app

In-App purchase retrieving products data and purchasing are working well on iOS 6\. However, on iOS 5.1.1, I receive "invalid product identifier" when trying getting a product data. What can be incompatible here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:04:52.047

这是 Apple 托管的内容吗？如果是这样，Apple 的托管内容仅适用于 iOS 6 及更高版本。

# sql - 为什么 Oracle SQL SELECT 表达式不打印十进制值？

> ID：14547982
> 
> 赞同：3
> 
> 时间：2013-01-27T13:44:22.783
> 
> 标签：sql, oracle, oracle11g, sqlplus

```
select (4*(22/7)*3958.759*3958.759) as "Earth's Area" from dual;

Prints:
Earth's Area
------------
   197016573 
```

它应该打印 197016572.595304。为什么点后的数字在输出中被忽略？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T13:57:03.800

我假设您使用的是 SQL*PLUS。您看不到其余数字的原因是`numwidth`参数的值。默认是 10，所以你需要稍微调整一下，比如 30。这是一个例子：

```
SQL> select (4*(22/7)*3958.759*3958.759) as "Earth's Area" from dual;

Earth's Area                                                                    
------------                                                                    
   197016573                                                                    

SQL> set numwidth 31

SQL> select (4*(22/7)*3958.759*3958.759) as "Earth's Area" from dual;

 Earth's Area                                                 
----------------                                                 
 197016572.595304 
```

您也可以通过或覆盖`numwidth`参数的值`set numformat``column format`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T13:56:54.433

这是 SQL*Plus，与从数据库返回的内容无关。您可以使用 SQL*Plus 列格式化命令来获得所需的格式，如下所示：-

```
SQL> select (4*(22/7)*3958.759*3958.759) as "Earth's Area" from dual;

Earth's Area
------------
   197016573

SQL> col "Earth's Area" for 99,999,999,999.9999999
SQL> /

           Earth's Area
-----------------------
    197,016,572.5953040 
```

包含更多格式化选项详细信息的 Oracle 文档在[此处](http://docs.oracle.com/cd/B14117_01/server.101/b12170/ch13.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T13:50:47.023

```
to_char((4*(22/7)*3958.759*3958.759)), 'FM99999990D00999999999') 
```

FM 删除前导空白。9 代表该位置的可选数字。D 代表小数分隔符。0 代表该位置的强制性数字。

# c++ - 我可以对静态、constexpr、类内初始化的数据成员做什么？

> ID：14547986
> 
> 赞同：8
> 
> 时间：2013-01-27T13:45:08.467
> 
> 标签：c++, c++11, static-members, constexpr, one-definition-rule

这可能是一个不寻常的问题，因为它要求对[另一个问题](https://stackoverflow.com/questions/14547370/confusion-about-in-class-initialization-of-static-data-members/14547498#comment20292860_14547498)的简短回答以及与之相关的 C++11 标准的某些方面进行更全面的解释。

为了便于参考，我将在这里总结参考的问题。OP 定义了一个类：

```
struct Account 
{
    static constexpr int period = 30;
    void foo(const int &) { }
    void bar() { foo(period); } //no error?
}; 
```

并且想知道为什么他对类内初始化静态数据成员的使用没有错误（一本书提到这是非法的）。Johannes Schaub 的回答指出：

1.  这违反了**单一定义规则**；
2.  不需要诊断。

尽管我依赖这个答案的来源和有效性，但老实说我不喜欢它，因为我个人觉得它太神秘了，所以我试图自己想出一个更有意义的答案，但只取得了部分成功。相关似乎是§ 9.4.2/4：

***“在程序中使用 odr** (3.2)的静态数据成员应该有一个确切的定义；**不需要诊断**”* [重点是我的]

这让我更接近一点。这就是第 3.2/2 节定义**odr-used**变量的方式：

*“名称显示为潜在求值表达式的变量是 odr-used**除非**它是满足出现在常量表达式 (5.19) 中的要求**并且**立即应用左值到右值转换 (4.1) 的对象”* [重点是我的]

在OP的问题中，变量`period`显然满足出现在常量表达式中的要求，是一个`constexpr`变量。所以肯定要在*第二个*条件中找到原因：*“**并且立即应用左值到右值的转换（4.1）** ”*。

这是我在解释标准时遇到困难的地方。**这第二个条件实际上意味着什么？**它涵盖哪些情况？这是否意味着如果静态`constexpr`变量是从函数返回的，则它**不会**被ODR 使用（因此可以在类内初始化）？

更一般地说：**你可以对静态`constexpr`变量做什么，以便你可以在课堂上初始化它？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:10:52.747

> 这是否意味着如果从函数返回静态 constexpr 变量，则不使用 odr（因此可以在类内初始化）？

是的。

本质上，只要您将其视为*value*，而不是*object*，那么它就不是 odr-used 的。考虑一下，如果您粘贴了该值，则代码将具有相同的功能-这是将其视为右值的时候。但是在某些情况下它不会。

只有少数情况下*不对*基元执行左值到右值转换，这就是引用绑定，`&obj`可能还有其他一些情况，但很少。请记住，如果编译器给你一个`const int&`引用`period`，那么你必须能够获取它的地址，此外，这个地址*对于每个 TU*必须是相同的。这意味着，在 C++ 可怕的 TU 系统中，必须有一个明确的定义。

如果它不是 odr-used，编译器可以在每个 TU 中制作一个副本，或者替换该值，或者任何它想要的，并且您无法观察到差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T15:34:23.237

你错过了前提的一部分。`Account::period`如果您还在某处定义（但没有提供初始化程序），则上面给出的类定义是完全有效的。见 9.4.2/3 的最后一句话：

> 如果该成员在程序中被 odr-used (3.2) 并且命名空间范围定义不应包含初始化程序，则该成员仍应在命名空间范围内定义。

整个讨论仅适用于静态 constexpr 数据成员，不适用于命名空间范围的静态变量。当静态数据成员`constexpr`（而不是简单的 const）时，您*必须*在类定义中初始化它们。所以你的问题应该是：**你可以用静态 constexpr 数据成员做什么，这样你就不必在命名空间范围内为它提供定义？**

从前面看，答案是成员不能被*odr-used*。*而且您已经找到了odr-used*定义的相关部分。因此，您可以在没有*潜在评估*的上下文中使用该成员- 作为未评估的操作数（例如`sizeof`or `decltype`）或其子表达式。您可以在立即应用左值到右值转换的表达式中使用它。

所以现在我们要**讨论变量的什么用途导致立即左值到右值的转换？**

部分答案在 §5/8 中：

> 每当一个泛左值表达式作为操作数的操作数出现时，该操作数需要一个纯右值，左值到右值 (4.1)、数组到指针 (4.2) 或函数到指针 (4.3) 标准转换是应用于将表达式转换为纯右值。

对于基本上适用于所有应用标准算术转换的运算符的算术类型。因此，您可以在各种算术和逻辑运算中使用该成员，而无需定义。

我不能列举所有事情，你可以或不能在这里做，因为某事物是 [g]lvalue 或 [p]rvalue 的要求遍布整个标准。经验法则是：*如果只使用变量的**值**，则应用左值到右值的转换；如果变量用作**对象**，则将其用作左值*。

您不能在明确需要左值的上下文中使用它，例如作为地址运算符或变异运算符的参数）。左值引用的直接绑定（没有转换）就是这样一个上下文。

更多示例（没有详细的标准分析）：

您可以将它传递给函数，除非函数参数是可以直接绑定变量的引用。

For returning it from a function: if implicit conversion to the return type involves a user-defined conversion function, the rules for passing to a function apply. Otherwise you can return it, unless the function returns an lvalue (a reference) referring directly to the variable.

The key rule for *odr-used* variables, the "One Definition Rule" is in 3.2/3:

> Every program shall contain exactly one definition of every non-inline function or variable that is odr-used in that program; no diagnostic required.

The "no diagnostic required" part means that programs violating this rule cause undefined behavior, which may range from failing to compile, compiling and failing in surprising ways to compiling and acting as if everything was OK. And your compiler need not warn you about the problem.

The reason, as others have already indicated, is that many of these violations would only be detected by a linker. But optimizations may have removed references to objects, so that no cause for linkage failure remains or else linking may sometimes occur only at runtime or be defined to pick an arbitrary instance from multiple definitions of a name.

# java - Image recognition, separate lines

> ID：14547987
> 
> 赞同：2
> 
> 时间：2013-01-27T13:45:10.230
> 
> 标签：java, image, image-processing

I need to separate lines from each other and make an array of coordinates for each graphic. The problem is (see the red circled section on the pic) some graphics overlap, and i don't know how to write a program that will find this overlaps and separate them. (Now we think that lines only touch each other not cross.)

![Squiggly lines](../Images/20b5ae96c1263b83633c118c7f1b6779.png)

@Rethunk i maked thinning and got this result. [after thinning](http://i45.tinypic.com/24gq4c0.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T15:58:03.843

如果您知道这些行最初是分开的，则可以从左到右跟踪它们。对于每条线，顶部和底部 y 坐标逐渐变化，而 x 坐标增加。对于向右移动的每个像素，您可以从平均 y 坐标开始并上下移动以找到每条线的新顶部和底部 y 坐标。

当两条线接触时，它们的顶部和底部 y 坐标将相同。这可以通过比较彼此相邻的线的坐标来检测。例如，假设第 4 行和第 5 行在某个点重叠。对于这些行，您知道哪一行是较高的行 (4) 和较低的行 (5)。假设 yTopOverlap = 130 和 yBottomOverlap = 160。我们可以在两条线之间划分像素。在这种情况下，为第 4 行设置 yTop 130 和 yBottom 145，为第 5 行设置 yTop 146 和 yBottom 160。当行再次分开时，不再需要修改它们的 y 坐标。

# java - 为什么我的椭圆形不动 Java

> ID：14547988
> 
> 赞同：3
> 
> 时间：2013-01-27T13:45:13.070
> 
> 标签：java, swing, jframe, paint, keylistener

我正在编写一个类似蛇的小游戏，并且正在实现键事件侦听器，因此它会在按下箭头键时进行侦听，它会增加或减少框架中椭圆的位置。下面是我的代码，你认为发生了什么？我尝试在谷歌上搜索可能的解决方案，但结果却是空的。

```
package snakegame;

import java.awt.Graphics;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import javax.swing.JFrame;

/**
 *
 * @author PlaixHax0r
 */
public class SnakeGame extends JFrame{

    int x, y;

    public class ActionListener extends KeyAdapter{
        public void KeyPressed(KeyEvent a){

            int KeyCode = a.getKeyCode();

            if(KeyCode == KeyEvent.VK_RIGHT){
                x++;
            }

            if(KeyCode == KeyEvent.VK_LEFT){
                x--;
            }

            if(KeyCode == KeyEvent.VK_DOWN){
                y++;
            }

            if(KeyCode == KeyEvent.VK_UP){
                y--;
            }

        }

        public void KeyReleased(KeyEvent a){

        }

    }

    public SnakeGame(){
        addKeyListener(new ActionListener());
        setTitle("Snake 1.0");
        setVisible(true);
        setSize(500, 500);
        setResizable(false);
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        x=150;
        y=150;

    }

    public void paint(Graphics g){
        g.drawString("Welcome to Snake Empire", 180, 50);
        g.fillOval(x, y, 15, 15);

        repaint();
    }

    public static void main(String[] args) {
        new SnakeGame();

    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-27T13:47:35.440

几个建议：

*   不要直接在 JFrame 中绘制。查看绘图教程，您将看到在 JPanel 或其他 JComponent 的`paintComponent(...)`方法覆盖中绘图。
*   您的第一行`paintComponent(...)`通常是对超级方法的调用：`super.paintComponent(g)`
*   不要在or`repaint()`内部调用。这是尝试制作不受控制的动画的不好方法。`paint(...)``paintComponent(...)`
*   请改用摇摆计时器。
*   不要将类命名为与核心类相同的名称，特别是不要将其命名为 ActionListener，因为这将使您几乎不可能在需要时使用实际的 ActionListener。
*   KeyListeners 仅在侦听的组件是可聚焦的并且具有焦点时才起作用。
*   避免将 KeyListener 与 Swing 应用程序一起使用，而是使用键绑定。请搜索这个网站，因为这已经用很多例子讨论过很多次了，有些是我的。

请查看[键绑定教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，然后查看我[在此处](https://stackoverflow.com/a/8961998/522444)和[此处](https://stackoverflow.com/a/6887354/522444)使用键绑定的示例代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T13:50:51.220

除了气垫船看到的问题外，我看到的问题还有：

*   您没有覆盖任何 KeyListener（或 KeyAdapter）方法。您的方法名为`KeyPressed`，并且方法在 Java 中始终以小写字母开头。该方法名为`keyPressed()`. 当您打算覆盖方法时，请始终使用 @Override 注释。这样，当你不这样做时，因为你的方法名有错别字，你会得到一个编译器错误：

    ```
     @Override
     public void keyPressed(KeyEvent event) {
         ...
     } 
    ```

*   当一个键被按下时你没有调用 repaint() ，所以 Swing 没有理由重新绘制你的框架。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-27T14:17:39.283

游戏是不同的东西（尽管有些使用摇摆来显示框架）。这些是你游戏中的问题。

*   你在`repaint()`里面打电话`paint()`。它在实际完成之前安排另一个绘画事件。调用它这么多次会爆你的CPU。如果您只需要移动椭圆，只需在`keyPressed()`方法结束时调用 repaint。

*   你无法控制时间。这会导致您的游戏在快速系统上运行快速而在慢速系统上运行缓慢。尝试搜索`game loops`

*   许多游戏使用多个线程。一个独立的逻辑线程，`EDT`以防止 CPU 占用并以正常速率检测输入。

*   避免直接渲染到帧上。仅当您想要主动渲染并创建一个`BufferStrategy`（尽管您不会使用 paint 方法）时才建议使用它。

*   您没有使用双缓冲。它会导致游戏闪烁。

*   切勿直接在输入状态下直接更改对象的位置。只需在更新时更改它们的特定速度并简单地将它们添加到位置（也使用负速度）以确保对象仅定期更新。

*   最后尝试搜索`java game development tutorials`. 这里有一个简单的框架[（教程）](http://www3.ntu.edu.sg/home/ehchua/programming/java/J8d_Game_Framework.html)，它很好地介绍了这个主题。（这是一个蛇游戏的例子）。

摆脱`.NET`java中的命名约定（以大写开头的方法名）

# ruby-on-rails - 用 kaminari 反向分页？

> ID：14547991
> 
> 赞同：4
> 
> 时间：2013-01-27T13:45:27.547
> 
> 标签：ruby-on-rails, kaminari

我正在使用[Kaminari](https://github.com/amatsuda/kaminari) 0.13.0 和[RubyOnRails](http://rubyonrails.org/) 3.2.8。

假设我的元素默认排序为，我的列表中`crated_at`有元素，并且每页对它们进行分页。`8``{a, b, c, d, e, f, g, h}``3`

默认情况下，kaminari 将创建以下链接`1, 2, 3`到`{h, g}`, `{f, e, d}`,的页面链接`{c, b, a}`。

**如何让 kaminari 以相反的顺序创建页面链接？**我希望它以相反的顺序生成链接，`3, 2, 1`仍然链接到反向排序的元素`{h, g}`, `{f, e, d}`, `{c, b, a}`。

**关于我要解决的问题的一些背景信息：**

我通过 created_at 对页面上的元素进行排序。我想让元素永远保持在同一页面上。如果我不使用反向分页，则每次添加新元素时页面内容都会发生变化。因此，在上面带有默认 kaminari 行为的示例中，如果我向列表中添加更多元素，`{i, j}`则`1st`页面将包含`{j, i, h}`，而不是`{h, g}`像以前那样。该`2nd`页面将`{g, f, e}`不会`{f, e, d}`像以前那样包含等等...这对簿记、搜索引擎优化等不利。

如果我有上面描述的反向页码，那么`1st`页面仍然会有`{c, b, a}`, `3rd`page 会用新元素更新到`{i, h, g}`，并且会有一个新的页面 4 有一个元素`{j}`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:47:59.730

我找到了解决方案：

```
def index
  users_scope = Users.order(:whateva)
  @users = reverse_paginate(users_scope, params[:page])
end

def reverse_paginate(scope, page)
  if page
    page_number = page
  else 
    page_number = Kaminari.paginate_array(scope.reverse).page(1).per(10).num_pages
  end
  Kaminari.paginate_array(scope.reverse).page(page_number).per(10).reverse!
end 
```

您需要更新 kaminari 页面视图`_page.html.erb`并添加`?page=1`到 url：

```
 url = "#{url}?page=1" if page.number == 1
   link_to_unless page.current?, page.number, url, opts = {:remote => remote, :rel => page.next? ? 'next' : page.prev? ? 'prev' : nil} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:22:49.300

*[注意：这个答案是从另一个 Stackoverflow 问题](https://stackoverflow.com/questions/13738045/reverse-pagination-with-kaminari)交叉发布的。*

Github 上有一个很好的示例 repo，在 github 上称为[reverse_kaminari](https://github.com/Djo/reverse_kaminari)。它建议按照这些思路实施[（来源）](https://github.com/Djo/reverse_kaminari/blob/master/app/controllers/cities_controller.rb)。

```
class CitiesController < ApplicationController

  def index
    @cities = prepare_cities City.order('created_at DESC')
  end

  private

  def prepare_cities(scope)
    @per_page = City.default_per_page
    total_count = scope.count
    rest_count = total_count > @per_page ? (total_count % @per_page) : 0
    @num_pages = total_count > @per_page ? (total_count / @per_page) : 1

    if params[:page]
      offset = params[:page].sub(/-.*/, '').to_i
      current_page = @num_pages - (offset - 1) / @per_page
      scope.page(current_page).per(@per_page).padding(rest_count)
    else
      scope.page(1).per(@per_page + rest_count)
    end
  end

end 
```

所有功劳[归于 Andrew Djoga](https://github.com/Djo)。他还主持了该应用程序作为[工作演示](http://reverse-kaminari.heroku.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-06T17:46:55.387

`Kaminary.paginate_array`不会产生带有偏移量和限制的查询。出于优化原因，您不应该使用它。

[在这里](https://stackoverflow.com/a/22897591/479407)发布我的答案。

# java - object mapping when using Mongodb

> ID：14547997
> 
> 赞同：0
> 
> 时间：2013-01-27T13:46:07.100
> 
> 标签：java, mongodb

I am new to mongo-db and i have few questions.

I have the following code:

```
public class User
{
    private String id;
    private String name;
    private List<Order> orders;
}
public class Order
{
    private String id;
    private String orderName;
    private Date orderDate;
} 
```

What's the best persisting strategy for User object ?
should i create collection for both User and Order or just for User ? should i save Order and then user ?

i am using spring data MongoRepository

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:13:48.760

我会考虑在建模时如何访问数据。一些问题要问自己：

1.  我是否需要在一个电话中让用户收到他的订单？
2.  一个用户平均有多少订单？如果它很多，可能最好不要对用户和订单进行非规范化。
3.  我的前端将如何访问这些信息？大多数给用户的电话甚至需要订单吗？这些信息在网络上会不会太重/太慢？

一般来说，我会在非规范化方面犯错，而不是为了规范化的关系本能。有冗余数据和不一致的数据是可以的。

Mongo 不会实时加入 - 充其量你可以做 map/reduce。

因此，数据的连接要么需要在数据库中（非规范化），要么需要在 UI 中。