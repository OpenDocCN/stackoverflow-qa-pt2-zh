# StackOverflow 问答 12799000-12799999

# powershell - 如何使用 Powershell 脚本从主字符串中删除子字符串？

> ID：12799000
> 
> 赞同：1
> 
> 时间：2012-10-09T11:24:45.410
> 
> 标签：powershell, replace, substring

我的 powershell 代码实际上是从 XML 读取数据并将特定数据存储到 csv 文件中。**XML 文件**有点如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Report Version="10.0">
<Targets>
<Target Name="\\bin\testBusiness.dll">
<Modules>
<Module Name="testing.dll" AssemblyVersion="1.0.1003.312" FileVersion="1.0.0.0">
<Metrics>
<Metric Name="Maintainability" Value="78" />
</Metrics>
</Module>
</Modules>
</Target>
</Targets>
</Report> 
```

我只需要从上述 XML 代码中**提取“testing.dll” 。**我用来这样做的代码如下：

```
$testDLL = [regex]::matches($xmlfile[5], '<mod name=".*" ')[0].value -replace '<mod name="(.*)" ','$1'
#the above code line gets even the AssemblyVersion 
$testAssembver =  [regex]::matches($xmlfile[5], 'AssemblyVersion=".*" ')[0].value -replace 'AssemblyVersion=".*" ','$1' 
```

我不需要将 AssemblyVersion 连接到 XML 代码中的“testing.dll（xml 中的模块名称）”。

目前我得到类似的东西：

```
 testing.dll" AssemblyVersion=1.0.1000.112" 
```

我只需要 testing.dll，之后的所有内容都应该省略。

请帮忙。

谢谢，阿希什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:47:31.007

我不认为正则表达式是解析 XML 的最佳方式。也许你最好使用 XMLDocument。

使用更好的 XML 文档：

```
<Dumy>
<Report Version="10.0"></Report>
<Goals>
  <Name>"\\somepath\path.dll"</Name>
  <Mods>
    <Mod Name="testing.dll" AssemblyVersion="1.0.1000.112" FileVersion="1.0.0.1"></Mod>
  </Mods>
</Goals>
</Dumy> 
```

您可以像这样找到您的数据：

```
$data = [XML](Get-Content "C:\temp\test.xml")
$data.Dumy.Goals.Mods.Mod.Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:55:25.800

按照 JPBlanc 的正确建议使用 XML。然后使用 XPath。例如，提取想要的值：

```
$data.selectnodes("//Modules/Module/@Name") 
```

# android - 如何解决Android中的错误“BasicClientConnManager的使用无效：确保在分配另一个连接之前释放连接”？

> ID：12799006
> 
> 赞同：5
> 
> 时间：2012-10-09T11:25:22.793
> 
> 标签：android, httprequest

在这里，我试图将一些数据从移动设备发布到服务器。为此，首先我必须登录服务器进行身份验证。然后在我通过 POST 请求发送数据后，我检查了这个相关的 stackoverflow 问题。[HttpClient 4.0.1 - 如何释放连接？](https://stackoverflow.com/questions/4775618/httpclient-4-0-1-how-to-release-connection)

我已经一一尝试了所有这些方法。

1.EntityUtils.consume(实体);

2.is.close();

3.  response.getEntity().consumeContent(); //其中的consumeContent() 显示为已弃用

4.  post.abort();

这是我在 pastebin 链接中的详细代码，请检查。

以下是程序流程。

1.  第一次登录称为 [检查这里我的登录请求](http://pastebin.com/idiNfnYD)

2.  在登录之后和发布想法之前调用此方法[。](http://pastebin.com/bVsz7i50)

3.  最后调用[post idea](http://pastebin.com/10aKhzme)方法。

    但 logcat 向我显示错误：

    **java.lang.IllegalStateException：BasicClientConnManager 的使用无效：连接仍然分配。**

    **确保在分配另一个连接之前释放连接**

> ```
> W/System.err( 2217): java.lang.IllegalStateException: Invalid use of BasicClientConnManager: connection still allocated.
> W/System.err( 2217): Make sure to release the connection before allocating another one.
> W/System.err( 2217):  at ch.boye.httpclientandroidlib.impl.conn.BasicClientConnectionManager.getConnection(BasicClientConnectionManager.java:161)
> W/System.err( 2217):  at ch.boye.httpclientandroidlib.impl.conn.BasicClientConnectionManager$1.getConnection(BasicClientConnectionManager.java:138)
> W/System.err( 2217):  at ch.boye.httpclientandroidlib.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:455)
> W/System.err( 2217):  at ch.boye.httpclientandroidlib.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:902)
> W/System.err( 2217):  at ch.boye.httpclientandroidlib.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:801)
> W/System.err( 2217):  at ch.boye.httpclientandroidlib.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:780)
> W/System.err( 2217):  at com.rahul.cheerfoolz.api.util.postData(util.java:436)
> W/System.err( 2217):  at com.rahul.cheerfoolz.postidea.idea.post_myidea_edit$Post_Idea.doInBackground(post_myidea_edit.java:354)
> W/System.err( 2217):  at com.rahul.cheerfoolz.postidea.idea.post_myidea_edit$Post_Idea.doInBackground(post_myidea_edit.java:1)
> W/System.err( 2217):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
> W/System.err( 2217):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
> W/System.err( 2217):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
> W/System.err( 2217):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
> W/System.err( 2217):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
> W/System.err( 2217):  at java.lang.Thread.run(Thread.java:1019) 
> ```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T12:59:58.593

当您创建一个 DefaultHttpClient 并指定任何 ClientConnectionManager 时，它将默认创建一个[BasicClientConnectionManager](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/conn/BasicClientConnectionManager.html)并且如果您检查 javadoc 说：

> > 单个连接的连接管理器。此连接管理器一次只维护一个活动连接。即使这个类是线程安全的，它也应该只被一个执行线程使用。BasicClientConnManager 将努力为具有相同路由的后续请求重用连接。但是，如果持久连接的路由与连接请求的路由不匹配，它将关闭现有连接并为给定路由打开它。如果已经分配了连接，则抛出 IllegalStateException。

尝试根据您的需要设置具有自定义配置的[PoolingClientConnectionManager 。](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/conn/PoolingClientConnectionManager.html)看一个简单的例子：

```
PoolingClientConnectionManager cxMgr = new PoolingClientConnectionManager( SchemeRegistryFactory.createDefault());
cxMgr.setMaxTotal(100);
cxMgr.setDefaultMaxPerRoute(20); 
```

这对 HttpClient 4.2 有效，因为该版本不推荐使用 ThreadSafeClientConnManager。希望这可以帮助。

# c++ - Scala宏和C++模板的异同

> ID：12799007
> 
> 赞同：9
> 
> 时间：2012-10-09T11:25:24.573
> 
> 标签：c++, templates, scala, macros

Scala 的宏和 C++ 模板都提供了对编译时元编程的访问。您能否详细说明相同点和不同点？它们在表现力方面是否相同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T11:44:33.520

它们之间的一个重要区别是 Scala 宏是用 Scala 编写的，而 C++ 模板是它们自己的编程语言，这与 C++ 完全不同。C++ 是一种命令式的面向对象的严格不纯语言，C++ 模板是一种声明性混合逻辑/功能的非严格纯语言，它从未打算用作成熟的编程语言，因此缺乏许多必要的特性大型编程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T11:34:18.627

它们都提供编译时元编程，并且都图灵完备，但这就是它们的共同点。我不是 C++ 专家，但据我所知，C++ 模板正在完善这一事实很少被利用，并且很难将它们用于实际编程。通常，模板仅用于提供参数多态性（也称为泛型），而 Scala 宏是用 Scala 编写的，可以在编译时使用该语言的全部功能。

# c++ - 无法在 C++ 中使用整数键声明映射

> ID：12799008
> 
> 赞同：1
> 
> 时间：2012-10-09T11:25:25.970
> 
> 标签：c++, data-structures, hash, map

我试图使用 Rabin Karp 和二进制搜索编写一个最长的公共子字符串程序。为此，我编写了一个方法，该方法基本上为其中一个字符串创建哈希表，键是从索引 i 开始的长度为 M 的模式的哈希值。他们键的值将是索引 i 。

我写了以下代码：

```
#include <iostream>
#include <string>
#include<map>
#include<math.h>
#define BASE 10
#define BASE2 10.0
#define M 99999989
using namespace std;
map<int, int> hashmap;
 int pHash=0;
 int mod(int a, int b) {
    return (a%b + b)%b;
}
 int getHash(string & pattern) {
     int hashVal = 0;
    for ( int i =0 ; i<pattern.length();i++) {
            int val = (int) pattern[i];
            hashVal = mod(hashVal*BASE + val, M);

    }

    return hashVal;
}
int rabinKarp(string &pattern, string & text)
{
     pHash = getHash(pattern);  
     cout<<"P HASH  : "<<pHash<<endl;
     int m = pattern.size();
     int fHash = getHash(text.substr(0, pattern.size()));
    int  newKey = fHash;
     hashmap.insert(newKey, 0);
     if(fHash==pHash)
            cout<<"Rabin Karp found a match at index : 0 "<< endl;

     for(int i = 1; i <=text.size()-pattern.size();i++) {
        int val = (int)text[i-1];
        double sz = (double)pattern.size()-1.0;
        int temp = pow(BASE2, sz);
        int mult= mod(temp,M);
        fHash = mod(fHash - mod(val*mult,M),M);
        fHash= mod(fHash*BASE, M);
        fHash= mod(fHash+(int)text[i+m-1], M);
        int key = fHash ;
        hashmap.insert(key, i);
        if(fHash==pHash)
            cout<<"Rabin Karp found a match at index : "<< i<<endl;
    }
    return 1;

}
int main() {
    string pattern;
    string text;
    cout<<"Please enter the pattern "<<endl;
    getline(cin, pattern) ;
    cout<<"Please enter the text " <<endl;
    getline(cin, text);
    int index = rabinKarp(pattern, text) ;

} 
```

问题是我无法将键插入到地图中。我收到以下错误，我对此毫无意义。任何人都可以帮助我理解这是什么？

错误 3 错误 C2664: 'std::pair<_Ty1,_Ty2> std::_Tree<_Traits>::insert(const std::pair<_Kty,_Ty> &)' : 无法将参数 1 从 'int' 转换为 ' const std::pair<_Ty1,_Ty2> &' c:\program files\microsoft visual studio 9.0\vc\include\xtree 760 SPOJ

错误 2 错误 C2100: 非法间接 c:\program files\microsoft visual studio 9.0\vc\include\xtree 760 SPOJ

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T11:28:14.993

如果您尝试插入键值对，则需要插入一个`std::pair<K, V>`, where`K`和`V`分别是键和值类型。见[std::map:insert](http://en.cppreference.com/w/cpp/container/map/insert)。你需要类似的东西

```
hashmap.insert(std::make_pair(newKey, 0)); 
```

如果您想为给定键插入一个值，并且您不介意可能覆盖以前存在的值，您可以使用`operator[]`：

```
hashmap[newKey] = someValue; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-15T00:20:07.777

[从 C++11 开始](http://en.cppreference.com/w/cpp/container/map/emplace)，您还可以使用`emplace(key, value)`. 这会使用给定的参数为您构造 a `pair`，然后将其插入到`map`.

```
hashmap.emplace(newKey, 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T11:30:54.567

你应该打电话

```
 result = hashmap.insert(map<int, int>::value_type (newKey, 0)); 
 // or
 result = hashmap.insert(std::make_pair(newKey, 0)); 
```

insert als0 返回`std::pair<iterator, bool>`- 您可以检查`result.second`是否已成功插入元素（例如，如果存在具有相同 key 的元素，则不会插入它并返回 false。

# php - 如何使用 php 将 apache 请求的 url 保存到数据库中？

> ID：12799009
> 
> 赞同：0
> 
> 时间：2012-10-09T11:25:27.843
> 
> 标签：php, sql, apache, url, logging

我想将我网站的请求网址保存到数据库中的一个表中。

例如，如果 user1 请求 url `myserver.com/images/header.png`，则应将以下记录保存到数据库中。

```
id    user    requested_url
1     user1   /images/header.png 
```

编辑：我的主要问题是如何知道请求的 URL 并将它们传递给 php 文件！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:30:00.493

看看 Apaches`mod_log_mysql`或`mod_log_sql`. 它们将允许您将 apache 日志转发到 SQL 服务器。

阅读：

[http://onlamp.com/pub/a/apache/2005/02/10/database_logs.html?page=2](http://onlamp.com/pub/a/apache/2005/02/10/database_logs.html?page=2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:32:02.683

您必须通过有权访问您的用户会话的 PHP 文件传递​​所有内容。

您需要做的第一件事是设置一个 .htaccess 文件以将所有内容重定向到特定的 PHP 文件。

然后程序将请求的文件传递给用户并记录请求。

确保在执行此操作时排除常规站点页面访问的文件，以便脚本仍然照常工作，只是图像 css js 等非页面元素通过此文件。

将记录请求到页面的相同代码添加到您的主脚本文件之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:28:49.933

您应该使用 DBMS 并对其进行查询，以便将数据保存在所需的表中。在 MySQL 中，它将是：

`INSERT INTO tablename VALUES ( NULL , 'user1', '/images/header.png');`

编辑，因为有人给了我-1。您应该在 index.php 或您用来处理所有页面的任何 FrontPage 控制器页面中添加此查询调用。使用 htaccess 您还可以记录“热链接”文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:33:53.123

您应该先连接到数据库，然后再插入，这是一个使用 PDO 的示例：

```
$dsn = 'mysql:host=localhost;dbname=testdb'; // mysql
//$dsn = 'mssql:host=localhost;dbname=testdb'; // mssql
$db = new PDO($dsn, 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));

$stmt = $db->prepare("INSERT INTO `table` VALUES ( 0 , :user, :page)");
$stmt->execute(array(':user' => $username, ':page' => $_SERVER['REQUEST_URI'])); 
```

我猜第一个字段应该是 ID 和自动增量。

连接和插入必须在每个页面中，可能是全局文件。

# java - JSF EJB3 到 Spring 3，BigInteger 始终为 0 而不是 null

> ID：12799010
> 
> 赞同：3
> 
> 时间：2012-10-09T11:25:30.930
> 
> 标签：java, spring, jsf, tomcat, el

我对我的网络应用程序的这种奇怪行为感到抓狂。我不得不将它从 EJB3 更改为 Spring，现在我面临一个（至少对我而言）奇怪的错误。我有一些普通的 JSF 页面（Primefaces 3.4）并创建了一些过滤器。这一切都很好，但我所有的过滤`BigInteger`值现在总是`0`而不是`null`. 结果是，我的 db-query 现在总是将`0 - values`.. 添加到我的查询中。这不是我想要的。每一个建议都会非常感激。我已经添加了

```
 <context-param>
      <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
      <param-value>true</param-value>
  </context-param> 
```

到我的WEB.xml，但这并没有改变任何东西......

**编辑：** 因此，解决方案是将 EL 从 Tomcat 7.0 更改为“标准”EL。这有点奇怪。我的 web.xml 现在看起来像这样：

```
 <context-param>
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
  </context-param> 
```

我的 pom 看起来像这样：

```
 <dependency>
     <groupId>javax.el</groupId>
     <artifactId>el-api</artifactId>
     <version>2.2</version>
  </dependency>
  <dependency>
     <groupId>org.glassfish.web</groupId>
     <artifactId>el-impl</artifactId>
     <version>2.2</version>
  </dependency> 
```

哇...现在它可以工作了..仍然很困惑...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:06:46.803

此行为特定于 Tomcat 6.0.16 和更高版本。它*过于*严格地遵循[EL 规范](http://jcp.org/aboutJava/communityprocess/mrel/jsr245/index.html)，该规范说数字类型应该被强制为零，并且优先于应该被强制为`null`. 换句话说，不仅数字原语（例如`int`,`long`等）被强制为零，而且其包装类型表示（例如`Integer`, `Long`, `BigInteger`,`BigDecimal`等）也被强制为零而不是`null`.

您需要添加以下 VM 参数来禁用这种不直观的行为：

```
-Dorg.apache.el.parser.COERCE_TO_ZERO=false 
```

当然，您也可以像您所做的那样用 Glassfish EL 实现替换 Tomcat EL 实现（请注意，它不是您暗示的“标准 EL”，它只是“参考实现”）。

请注意，这一切都与 Spring 或 EJB 无关，这只是巧合或不正确的观察。

### 也可以看看：

*   [Tomcat 问题 42385](https://issues.apache.org/bugzilla/show_bug.cgi?id=43285)
*   [JSP/EL 规范问题 184](http://java.net/jira/browse/JSP_SPEC_PUBLIC-184)

# java - 枚举值实现Hadoop的Writable接口

> ID：12799014
> 
> 赞同：5
> 
> 时间：2012-10-09T11:25:42.427
> 
> 标签：java, hadoop, enums

假设我有一个枚举：

```
public enum SomeEnumType implements Writable {
  A(0), B(1);

  private int value;

  private SomeEnumType(int value) {
    this.value = value;
  }

  @Override
  public void write(final DataOutput dataOutput) throws IOException {
    dataOutput.writeInt(this.value);
  }

  @Override
  public void readFields(final DataInput dataInput) throws IOException {
    this.value = dataInput.readInt();
  }
} 
```

我想将它的一个实例作为其他类实例的一部分传递。

等号不起作用，因为它不会考虑枚举的内部变量，而且所有枚举实例在编译时都是固定的，无法在其他地方创建。

这是否意味着我无法在 Hadoop 中通过网络发送枚举或有解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:36:44.203

我对 Hadoop 中枚举的常规和首选解决方案是通过它们的序数值对枚举进行序列化。

```
public class EnumWritable implements Writable {

    static enum EnumName {
        ENUM_1, ENUM_2, ENUM_3
    }

    private int enumOrdinal;

    // never forget your default constructor in Hadoop Writables
    public EnumWritable() {
    }

    public EnumWritable(Enum<?> arbitraryEnum) {
        this.enumOrdinal = arbitraryEnum.ordinal();
    }

    public int getEnumOrdinal() {
        return enumOrdinal;
    }

    @Override
    public void readFields(DataInput in) throws IOException {
        enumOrdinal = in.readInt();
    }

    @Override
    public void write(DataOutput out) throws IOException {
        out.writeInt(enumOrdinal);
    }

    public static void main(String[] args) {
        // use it like this:
        EnumWritable enumWritable = new EnumWritable(EnumName.ENUM_1);
        // let Hadoop do the write and read stuff
        EnumName yourDeserializedEnum = EnumName.values()[enumWritable.getEnumOrdinal()];
    }

} 
```

显然它有缺点：序数可以改变，所以如果你交换`ENUM_2`并`ENUM_3`读取一个以前序列化的文件，这将返回另一个错误的枚举。

因此，如果您事先知道枚举类，则可以编写枚举的名称并像这样使用它：

```
 enumInstance = EnumName.valueOf(in.readUTF()); 
```

这将使用稍微多一点的空间，但更节省对枚举名称的更改。

完整的示例如下所示：

```
public class EnumWritable implements Writable {

    static enum EnumName {
        ENUM_1, ENUM_2, ENUM_3
    }

    private EnumName enumInstance;

    // never forget your default constructor in Hadoop Writables
    public EnumWritable() {
    }

    public EnumWritable(EnumName e) {
        this.enumInstance = e;
    }

    public EnumName getEnum() {
        return enumInstance;
    }

    @Override
    public void write(DataOutput out) throws IOException {
        out.writeUTF(enumInstance.name());
    }

    @Override
    public void readFields(DataInput in) throws IOException {
        enumInstance = EnumName.valueOf(in.readUTF());
    }

    public static void main(String[] args) {
        // use it like this:
        EnumWritable enumWritable = new EnumWritable(EnumName.ENUM_1);
        // let Hadoop do the write and read stuff
        EnumName yourDeserializedEnum = enumWritable.getEnum();

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T16:12:11.803

[WritableUtils](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/io/WritableUtils.html)具有使这更容易的便捷方法。

```
WritableUtils.writeEnum(dataOutput,enumData);
enumData = WritableUtils.readEnum(dataInput,MyEnum.class); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:40:10.607

我对 Hadoop 一无所知，但是根据接口[的文档](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/io/Writable.html)，您可能可以这样做：

```
public void readFields(DataInput in) throws IOException {
     // do nothing
}

public static SomeEnumType read(DataInput in) throws IOException {
    int value = in.readInt();
    if (value == 0) {
        return SomeEnumType.A;
    }
    else if (value == 1) {
        return SomeEnumType.B;
    }
    else {
        throw new IOException("Invalid value " + value);
    }
} 
```

# c# - 在 C# 中处理数据库混淆

> ID：12799023
> 
> 赞同：1
> 
> 时间：2012-10-09T11:26:07.077
> 
> 标签：c#, ado.net

我正在尝试学习如何在 C# 中使用数据库，当我必须使用 DataSet、SqlDataAdapter 和 SqlCommandBuilder 时，我已经参与了教程。这是我在教程示例中编写的代码：

```
 public void InitData() {
        //instantiate the connection
        conn = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=\"D:\\Projects IDE\\Visual Studio\\Exercitii\\Console.app\\WindowsFormsApplication1\\WindowsFormsApplication1\\PlanetWrox.mdf\";Integrated Security=True;User Instance=True");

        //1.instantiate a new DataSet
        dsCustomers = new DataSet();

        //2.init SqlDataAdapter with select command and connection
        daCustomers = new SqlDataAdapter("SELECT Id ,Name, SortOrder FROM Genre", conn);

        // 3\. fill in insert, update, and delete commands
        SqlCommandBuilder cmdBldr = new SqlCommandBuilder(daCustomers);

        // 4\. fill the dataset
        daCustomers.Fill(dsCustomers, tableName);
    }

    public void btnUpdateClicked(object sender, EventArgs e) {
        // write changes back to DataBase
        daCustomers.Update(dsCustomers, tableName);

    } 
```

这里有几件事我不明白：

我注意到的第一件事是我不必打开和关闭数据库。根据我对数据库的有限知识，我知道为了访问数据，您必须打开与它的连接，完成后您有关闭它。这必须发生在幕后的某个地方。对吗？如果那是巫婆的方法吗？

第二个问题是关于 SqlDataAdapter 和 SqlCommandBuilder。我不明白 SqlCommandBuilder 在这里做了什么。SqlDataAdapter 不是执行 sql 查询的那个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:31:29.620

> 我注意到的第一件事是我不必打开和关闭数据库。

[`SqldataAdapter.Fill`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.fill.aspx)将为您打开/关闭连接。

> 如果在调用 Fill 之前关闭了 IDbConnection，则打开它以检索数据，然后关闭它。如果在调用 Fill 之前连接已打开，则它保持打开状态。

从您提供的选择语句的[`SqlCommandBuilder`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)元数据生成 INSERT、UPDATE 或 DELETE 语句。通过这种方式，您可以调用[`daCustomers.Update`](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx)并且对数据库所做的所有更改都`DataSet`将自动更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:29:18.947

dsCustomers.Fill 为您打开和关闭连接。SqlCommandBuilder 根据您的选择语句创建插入、更新和删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T11:30:45.973

当您用数据填充表时，ADO.NET 会为您处理该任务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:38:54.350

```
//instantiate the connection
  using (SqlConnection conn = new SqlConnection("Data Source=.\\SQLEXPRESS;AttachDbFilename=\"D:\\Projects IDE\\Visual Studio\\Exercitii\\Console.app\\WindowsFormsApplication1\\WindowsFormsApplication1\\PlanetWrox.mdf\";Integrated Security=True;User Instance=True"))
  {
    //1.instantiate a new DataSet
    dsCustomers = new DataSet();

    //2.init SqlDataAdapter with select command and connection
    daCustomers = new SqlDataAdapter("SELECT Id ,Name, SortOrder FROM Genre", conn);

    // 3\. fill in insert, update, and delete commands
    SqlCommandBuilder cmdBldr = new SqlCommandBuilder(daCustomers);

    // 4\. fill the dataset
    daCustomers.Fill(dsCustomers, tableName);
  } 
```

这将自动关闭连接并处理，而无需您费心。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T11:42:53.443

`Fill`将使所有`resources locked that are involved in the process`. 此外，根据 sql 设置，它也可能会阻止其他资源。

如果您将此代码用于某些实时工作..请仅在需要时选择它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T11:53:07.433

对于你的第一件事：

我们使用`conn.open();`打开连接和`conn.close();`关闭连接。

在您的程序中，您没有像 sqlserver 那样连接到数据库。您已提供显示的文件物理路径。

第二件事见下文：

[SqlCommandBuilder 类](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)

# magento - Magento 内联翻译不起作用，有红点但没有可更改的书本图标

> ID：12799028
> 
> 赞同：1
> 
> 时间：2012-10-09T11:26:39.433
> 
> 标签：magento

我对 magento 和内联翻译有疑问。如果我打开内联翻译，我会看到文本周围的红色虚线框，但没有选项可以单击书本图标然后进行翻译。

有人以前有过这个吗？

这是您可以看到问题的链接

[关联](http://b2b.digirails.com/b2bde/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T15:12:31.697

有时问题来自 z-index 值，我发现我的主题的 css 配置将书本图标与另一个 z-index 值高于内联翻译的 div 重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:20:11.733

我遇到过同样的问题。为了修复它，我从安装包中复制了`js`目录，现在它可以工作了。`1.7.0.2`

也就是说，我不确定这是否会无意中引发任何其他问题。

# java - 如何在 ListViewer 中选择元素

> ID：12799029
> 
> 赞同：2
> 
> 时间：2012-10-09T11:26:43.427
> 
> 标签：java, swt, eclipse-rcp, jface

我试图在 中查找并选择一个元素`ListViewer`，我将一个字符串与 中的每个元素进行比较`ListViewer`。

我可以获取元素的索引，但我不知道如何在`Listviewer`.

```
String pattern = elementText.gettext();
String[] listViewerValues = mListViewer.getList().getItems();
List<String> valuesList = Arrays.asList(listViewerValues);  
int index = -1;

for(int i=0; i < valuesList.size(); i++) {
    valuesList.set(i, valuesList.get(i).toLowerCase());
}

index = valuesList.indexOf(pattern);
if(index>-1) 
{
    ***....... what to do here ?*** 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:35:12.047

您可以使用该方法[`setSelection(ISelection, boolean)`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/viewers/StructuredViewer.html#setSelection%28org.eclipse.jface.viewers.ISelection,%20boolean%29)来设置选择。

这将选择位于 的元素`position`：

```
mListViewer.setSelection(new StructuredSelection(mListViewer.getElementAt(position)), true); 
```

# eclipse - 将最新的 Xerces 与 Eclipse RCP 应用程序一起使用

> ID：12799033
> 
> 赞同：2
> 
> 时间：2012-10-09T11:26:53.980
> 
> 标签：eclipse, osgi, eclipse-rcp, xerces

我正在尝试在 Eclipse RCP 应用程序中使用 Xerces 2.11.0，但是从我尝试过的所有内容来看，我不知道如何去做。更复杂的是，我也在尝试使用 Batik 1.7。

我已经为 Xerces 和 xml-apis 创建了自己的包，我已经将 Batik 使用的其他 W3C DOM 接口添加到了我的 xml-apis 包中。

蜡染中出现的第一个问题

```
java.lang.NoClassDefFoundError: org/w3c/dom/ElementTraversal 
```

其根本原因似乎是因为 org.w3c.dom 包含在 JRE 中并通过 org.eclipse.osgi（system.bundle）公开。这似乎胜过任何其他想要提供该软件包的捆绑软件。

尝试在任何其他人之前使用 require-bundle 和我的包来影响系统或使用带有显式版本的 import-package 会导致错误，例如

```
java.lang.LinkageError: loader constraint violation: loader
       (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader) 
        previously initiated loading for a different type with name
        "org/w3c/dom/Document" 
```

更改*org.osgi.framework.system.packages*和*org.osgi.framework.bootdelegation*参数以删除 org.w3c.dom 并将我的包添加到*osgi.framework.extensions*会导致错误

```
java.lang.LinkageError: loader constraint violation in interface itable
       initialization: when resolving method 
       "javax.xml.parsers.DocumentBuilder.setErrorHandler(
                 Lorg/xml/sax/ErrorHandler;)V" the class loader 
       (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader)
       of the current class, org/apache/log4j/xml/DOMConfigurator, and the 
       class loader (instance of <bootloader>) for resolved class, 
       javax/xml/parsers/DocumentBuilder, have different Class objects for the
       type rrorHandler;)V used in the signature 
```

我也尝试过使用 java.endorsed.dirs，这会让事情很快崩溃。

有什么我错过或可能做错的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T09:52:49.900

我们曾经在 jdk 1.4 上使用 DOM level 3 时遇到过类似的问题，我认为背书的 dirs 是唯一可行的解​​决方案，因为您需要覆盖 jdk 中的 DOM API。

我们无法再次面对这条路线，因此删除了对 ElementTraversal 的引用并手动构建了 Xerces，问题就消失了。如果 Batik 使用 ElementTraversal，那不是一个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:21:22.977

我想我找到了解决办法。

我已经修改了我的 xml-apis 包，使它成为一个片段，由 system.bundle 托管。

我还修改了我的 Xerces 包以导入包，而不是需要 xml-apis 包（最初这样做是为了说服 xerces 使用正确的包）。

从我所做的测试来看，这似乎足以让每个包找到 org.w3c.dom 包的相同实现，其中包含所有正确的类。

# qt - qt：如何最小化 qsplitter 的孩子？

> ID：12799037
> 
> 赞同：0
> 
> 时间：2012-10-09T11:27:25.943
> 
> 标签：qt, qsplitter

![QS分离器](../Images/5e8b7e4c3789d153d884c6803c099525.png)

我做了一个 QSplitter 布局。在 QSplitter 下，有 QWidget 和它的 gridLayout 子级。在这种情况下，我无法将 QSplitter 最小化为 0 大小。正如我在上面看到的，它有高度限制。是什么导致了这个问题？我测试了一些案例，我发现当我为 QWidget 的孩子使用 QGridLayout 时。但我不能将最小高度设置为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:30:05.850

我不确定您到底要做什么，但是您始终可以在小部件上调用 hide。

# css - 是什么意思？

> ID：12799038
> 
> 赞同：2
> 
> 时间：2012-10-09T11:27:32.087
> 
> 标签：css, wordpress, class, wordpress-theming

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T11:39:58.043

如果相关样式表中没有名为“none”的类，并且没有影响它们的内联代码，则这本质上是一个冗余类。但是，它可能会在某处被 javascript 使用，因此请注意

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-13T19:37:58.233

它用于在 Wordpress 中的行之间放置一个空格。带有
作品的“class="none"。

# mysql - 从表中选择结果以匹配 mysql 中的 2 行

> ID：12799043
> 
> 赞同：0
> 
> 时间：2012-10-09T11:27:45.907
> 
> 标签：mysql, sql, select

我有一个*MySQL*表有这些字段

```
 ID, CID, QUESTION, ANSWER, USER 
```

**ID**是自动递增的，表中的每条记录都有**ID**；
**CID**指向*ANSWER*记录的**ID**

 *比如我们有 4 条记录，2 个问题 2 的 answer，Mike 回答了 2 个问题

```
ID  CID  QUESTION  ANSWER         USER
1    0   Test      NULL           John
2    1   NULL      This is Test   Mike    
3    0   Example   NULL           Tracy
4    3   NULL      Yes it is      Mike 
```

我想列出迈克回答的问题。如何匹配同一表中的**ID**和**CID**字段并打印**QUESTION**以进行输出

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:30:24.033

> 我想列出迈克回答的问题。

```
SELECT t1.*
FROM TableName t1
LEFT JOIN TableName t2 ON t1.ID = t2.CID
WHERE t2.Answer IS NOT NULL
  AND t2.User = 'Mike'; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/ce9bc/2)

请注意，这为您提供了迈克已回答的问题列表，因此您不会在其中找到迈克：

```
ID CID     QUESTION         ANSWER  USER
1   0        Test             NULL   John
3   0       Example           NULL   Tracy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:36:56.677

```
select QUESTION from yourtable 
where ID in(select ID from yourtable where User = 'Mike' and answer is NOT NULL) 
```*

# bash - 使用 sed/awk 在启动时写入 /etc/networking/interfaces？

> ID：12799047
> 
> 赞同：0
> 
> 时间：2012-10-09T11:28:09.807
> 
> 标签：bash, ubuntu, sed, awk

新手来了

我正在尝试`/etc/network/interfaces`在启动时使用 (current) 写入新配置的 XEN Ubuntu (12.04/10.04/8.04) DomU 服务器的自动生成文件`sed`。

自动生成的文件格式如下：

```
自动 eth0
iface eth0 inet 静态
    地址 192.168.0.88
    网关 192.168.0.254
    网络 255.255.255.255
自动lo
iface lo inet 环回

```

使用`sed`，我正在尝试更改第 1 行和第 2 行，添加第三行，删除网关和最后两行，并在最后附加四行。

我目前坚持添加第三行，因为脚本每次运行时都会添加这一行：

```
#!/bin/bash

sed -i "1s/.*/auto lo eth0/" /tmp/interfaces
sed -i "2s/.*/iface lo inet loopback/" /tmp/interfaces
sed -i "2a\iface eth0 inet static" /tmp/interfaces
sed -i "s/auto lo//g" /tmp/interfaces

```

`sed`是否可以仅在使用（或）不存在的情况下添加第三行`awk`？

同样，如果网关和最后两行不存在，我怎样才能删除它们？

我是新手`sed`，所以想知道我是否应该考虑`awk`实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T11:51:23.257

你可以用 sed 做到这一点：

```
sed -i -e '4{/iface eth0 inet static/! i\
    iface eth0 inet static
    }' 
```

您可以使用大括号对命令进行分组。大括号中的命令只会在第三行执行。`i`插入命令只会在第三行执行，并且**如果**第三行不匹配斜线之间的字符串（`!`after 它告诉它在不匹配时执行）。

您可以执行相同的删除操作：

```
sed -i -e '3{/gateway/d}' 
```

这里我们只删除包含字符串的第三行`gateway`。您可能会更通用，只需执行以下操作：

```
sed -i -e '/gateway/d' 
```

这将删除所有包含网关的行，但这可能不是您想要的。

至于删除最后几行，最简单的解决方案是：

```
sed -i -e '${/auto lo/d;/iface lo inet loopback/d}'
sed -i -e '${/auto lo/d;/iface lo inet loopback/d}' 
```

如果`d`删除命令与`auto lo`或匹配，则在最后一行执行删除命令`iface lo inet loopback`。如果它们与模式匹配，则执行两次将删除最后两行。

如果要在文件末尾添加行，可以执行以下操作：

```
sed -i -e '$a\
newline1\
newline2\
newline3' 
```

或者仅在最后一行不是特定行时才添加它们：

```
sed -i -e '${/192\.168\.1\.1/!a\
newline1\
newline2\
newline3
}' 
```

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-08T11:25:53.650

这个脚本可以完成这项工作：[https ://github.com/JoeKuan/Network-Interfaces-Script](https://github.com/JoeKuan/Network-Interfaces-Script)

```
awk -f changeInterface.awk <interfaces file> <device=ethX> 
 <mode=(dhcp|static|manual)> [action=add|remove] 
 [address=<ip addr> netmask=<ip addr> <name=value> ...] 
```

# java - 旋转图像时背景为黑色

> ID：12799052
> 
> 赞同：1
> 
> 时间：2012-10-09T11:28:18.917
> 
> 标签：java, image, rotation

我正在尝试使用以下代码旋转图像：

```
File imgPath = new File("c:\\tmp\\7.jpg");
BufferedImage src = ImageIO.read(imgPath);
AffineTransform tx = new  AffineTransform();

int width = src.getWidth();
int height = src.getHeight();
tx.rotate(radiant ,width, height);
AffineTransformOp op = new AffineTransformOp(tx, AffineTransformOp.TYPE_BICUBIC);
BufferedImage out = op.filter(src, null);

File outFile = new File("c:\\tmp\\out.jpg");
ImageIO.write(out, "jpg", outFile); 
```

由于某种原因，旋转后的背景是黑色的。怎样才能使背景变白或透明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:49:22.487

当您`AffineTransformOp.filter(src, null)`用于创建新图像时，新图像使用与`ColorModel`源图像相同的方法。

您的输入图像是 jpeg，这意味着它不透明，因此目标图像是 RGB 图像，没有 alpha（透明度）级别。

当以如此小的角度旋转时，图像不再占据完全相同的边界，因此背景在其边缘可见，并且由于没有 alpha 级别，因此背景为黑色是正常的。

但是，如果您将其保存为支持 gif 或 png 等透明度的格式，则您的图像将不再显示黑色背景。

```
ImageIO.write(out, "gif", outFile); 
```

完整代码：

```
 try {
        File imgPath = new File("d:\\downloads\\about.jpg");
        BufferedImage src = ImageIO.read(imgPath);
        AffineTransform tx = new AffineTransform();

        int width = src.getWidth();
        int height = src.getHeight();
        tx.rotate(0.02050493823247637, width, height);
        AffineTransformOp op = new AffineTransformOp(tx, AffineTransformOp.TYPE_BICUBIC);
        BufferedImage out = op.filter(src, null);

        File outFile = new File("d:\\downloads\\about0.gif");
        ImageIO.write(out, "gif", outFile);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

看看[这个](https://stackoverflow.com/questions/12165977/java-image-rotation/12166204#12166204)以获得更多信息和技巧。

这是我旋转为 gif 后的图像： ![旋转后的gif图像](../Images/eda0b9a82b315118214eb1cb331233c7.png)

# php - 动态表（冒号取决于表的内容）

> ID：12799053
> 
> 赞同：0
> 
> 时间：2012-10-09T11:28:44.820
> 
> 标签：php, html, html-table, dynamic-tables

此 php 代码显示了我网站上目录的内容：

```
<?php
 $dir = opendir(getcwd());
 ?>
<body>
<table>
    <tbody>
        <tr>
<?php
  while (($file = readdir($dir)) !== false) {
      {
            echo "<td>". $file ."</td>";
    }       
  }
  closedir($dir);
?>
        </tr>
    </tbody>
</table>
</body> 
```

它将结果放在一个`table`. 问题是 PHP 代码会生成一个`<td>`标签并将结果存储在其中。因此，final`table`有一个标签，标签数量与结果`<tr>`一样多`<td>`。

我想要的是`table`每行（tr 标签）有 3 列（3 td）。

有没有办法使表格动态化，并且每三个`<td>`标签变成一个`<tr>`标签，所以结果如下所示：（[单击此处）](http://ahstpc.6te.net/site/logs/the%20wanted%20result.html)

而不是看起来像这样：（[点击这里）](http://ahstpc.6te.net/site/logs/test.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:32:04.400

试试这个：

```
<?php
 $dir = opendir(getcwd());
 ?>
<body>
<table>
    <tbody>

<?php
  $n = 0;
  while (($file = readdir($dir)) !== false) {
      {
           if($n%3 == 0){echo "<tr>";}
           echo "<td>". $file ."</td>";
           $n++;
    }       
  }
  closedir($dir);
?>

</tbody> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:46:44.093

您可以使用[模数](http://php.net/manual/en/language.operators.arithmetic.php)来跟踪您在循环中的位置。然后，当您乘以 3 时，重新启动表格行：

```
<?php
   $dir = opendir(getcwd());
?>
<body>

    <table>
        <tbody>
            <tr>
            <?php
                $counter = 0;
                while (($file = readdir($dir)) !== false) {
                    {
                        if($counter % 3 == 0 && $counter != 0) echo "</tr><tr>";
                        echo "<td>". $file ."</td>";
                        $counter++;
                    }       
                }
                closedir($dir);
            ?>
            </tr>
       </tbody>
    </table>

</body> 
```

# android - Android Split Action Bar-icons 仅在底部栏中

> ID：12799059
> 
> 赞同：0
> 
> 时间：2012-10-09T11:29:03.067
> 
> 标签：android, android-actionbar, android-ui

我想强制将图标放置在 Android 拆分操作栏的底部栏中，同时确保顶部操作栏保持为空。我已经进行了很多实验，但无法弄清楚如何做到这一点。

我确信这是可能的，因为我已经在 Google 地图应用程序中看到了它。见下图：

[带有图标的拆分操作栏 http://imageshack.us/a/img856/3592/portraito.png](http://imageshack.us/a/img856/3592/portraito.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T12:23:07.397

拆分操作栏仅用于纵向`-small`/屏幕 - 在*所有其他情况下*，操作栏在没有拆分的情况下正常运行。`-normal`

 *三星 Galaxy Tab 2 是一款`-large`设备。它不会使用拆分动作条，无论是纵向、横向还是被大象踩踏。

如果您看到在此类设备上运行的应用程序似乎具有拆分操作栏，那么它们并没有使用这些项目的操作栏，而是滚动自己的底部栏。这是不可取的。

（注意：在创建这个答案时没有真正的大象受到伤害）*

# android - ScrollView 不响应键盘

> ID：12799060
> 
> 赞同：1
> 
> 时间：2012-10-09T11:29:04.177
> 
> 标签：android, android-edittext, android-scrollview

我在 ScrollViews 中的 EditText 滚动行为有问题，通常如果键盘在其上打开，它会向上滚动滚动内的内容。但是如果你动态填充滚动视图内的布局，键盘向上推整个屏幕，其他人之前都遇到过这个问题。提前致谢。

```
<ScrollView
    android:id="@+id/scroll_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/header_area" >

        <LinearLayout
            android:id="@+id/contentHolder"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >
        </LinearLayout>
</ScrollView> 
```

此示例在滚动视图中正常工作，线性布局滚动，但即使键盘关闭也显示滚动。我不能使用固定高度。

```
 <ScrollView
        android:id="@+id/scroll_view"
        android:layout_width="fill_parent"
        android:layout_height="100dip"
        android:layout_below="@+id/header_area" >

            <LinearLayout
                android:id="@+id/contentHolder"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >
            </LinearLayout>
    </ScrollView> 
```

我在下面尝试了 xml，它在新项目中按预期工作，但在我的项目中推高了窗口。我发现其他一些人遇到了这个问题，我会尽快分享解决方案。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <RelativeLayout
        android:id="@+id/header_area"
        android:layout_width="match_parent"
        android:layout_height="50dip" >
    </RelativeLayout>

    <ScrollView
        android:id="@+id/scroll_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <LinearLayout
            android:id="@+id/contentHolder"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <EditText 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
            <EditText 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
            <EditText 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
            <EditText 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
            <EditText 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
            <EditText 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T11:34:41.493

```
<application
    android:icon="@drawable/is_logo_iphone"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" > 
```

问题是“全屏”主题不支持调整大小。使用

```
 android:theme="@android:style/Theme.Black.NoTitleBar" 
```

解决问题。
感谢您的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:35:48.207

那是因为您的滚动视图是可调整大小的。尝试将滚动视图的高度设置为 match_parent 。

尝试在你的滚动视图中设置 android:fillViewport="true" 。

此外，您不会碰巧在清单的活动标签中添加以下内容：`android:windowSoftInputMode="adjustResize"`这几乎会毁掉我们所有的努力。如果清单中有以下内容，请将其删除。

您可能必须配置清单。[以下是](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)软键盘的可能配置列表。它可能是`android:windowSoftInputMode="adjustPan"`你想要使用的。

# css - CSS 文件存在但在应用程序部署后第一次被忽略

> ID：12799063
> 
> 赞同：1
> 
> 时间：2012-10-09T11:29:13.130
> 
> 标签：css, proxy, websphere, browser-cache, wicket-1.5

我们面临的问题是，在部署我们的（Web）应用程序的新版本后，任何第一次（重新部署后）打开应用程序的用户都会看到这个页面的混乱版本。如果他按 F5（所以不是 Ctrl-F5），那么页面会重新加载，一切都很好。

我通过查看一个颜色应该是黑色但是白色的单一跨度来研究微观层面的行为。我看到浏览器只考虑来自*style.css*的 CSS 样式（其中颜色设置为白色）。然而，它还应该考虑*history.css*中的样式（其中颜色设置为黑色）。在检查器中，*history.css*存在（我在 HTML 头部和检查器的 CSS 列表中看到它）但它似乎被简单地忽略了。在 F5 后查看检查器，历史.css 文件被考虑在内并设置了正确的颜色。

如果这与 Wicket 有关，则应用程序在部署模式下运行，因此它`MessageDigestResourceVersion`用于命名 CSS 文件。但是，它感觉不像是一个“简单”的缓存问题，因为*history.css*存在但被忽略了。

**更新：**
这不仅是重新部署后的第一次。此外，我们从来没有在我们的 DEV 或 UAT 环境中使用它，而是在我们的 STAGING 环境中始终使用它。因此，它似乎确实与某些服务器配置（WAS 7、Apache、反向代理、F5 负载平衡器、mod_security ......）有关，但现在不知道在哪里寻找......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:40:01.500

问题是，当为用户创建会话时，某个参数被重置（仅在 IE9 上）。F5 负载均衡器使用该参数（实际上是 HTTP 标头参数：SSO 会话 ID）来标识用户正在使用的 WAS 服务器。由于某些资源是使用 Ajax 添加的，并且在加载页面时会话 ID 丢失，因此 F5 试图从另一个 WAS 获取资源，这会导致这些资源的访问被拒绝异常。

# ruby-on-rails-3 - 带有时髦输出的 Rails 十进制计算

> ID：12799069
> 
> 赞同：1
> 
> 时间：2012-10-09T11:29:29.843
> 
> 标签：ruby-on-rails-3

我在 Rails 应用程序中尝试了一些十进制计算，但得到了一些奇怪的结果。

```
@pprice = item.price - (( item.price / 100 ) * promo.discount)

@pprice = item.price - promo.discount 
```

每个值（item.price、promo.discount 等）都是小数。但是，当我尝试计算时，我得到的结果好坏参半，没有一个是正确的总数。结果范围从零、0.0 到 -2.0，具体取决于我是否包含 .to_f。

第一个计算基于百分比折扣，第二个计算基于直接货币减免。

我已经在视图中执行了计算（进行测试）并且它们显示正确，但是当它们移到控制器时，我得到了错误。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:42:57.967

由于您将值转换为浮点数，因此您的计算结果并不精确。请参阅[价格字段的字符串、小数或浮点数据类型？](https://stackoverflow.com/questions/3063968/ruby-on-rails-string-decimal-or-float-for-price-field)

# css - 导航菜单设计

> ID：12799071
> 
> 赞同：0
> 
> 时间：2012-10-09T11:29:36.070
> 
> 标签：css

我想设计一个导航菜单，例如：

```
 <ul id="menu">
        <li><a>link1</a>
        <ul class="subMenu">
            <li><a>sublink1</a></li>
            <li><a>sublink1</a></li>
        </ul>
        </li>
        <li><a>link2</a></li>
        <li><a>link3</a></li>
        <li><a>link4</a></li>
    </ul> 
```

从 css 的角度来看，如何更好地编写代码：使用`position:absolute;` `left:-999em;`hoover`top:0; left:0;`
或 `display:none;`hoover隐藏下拉列表`display:block;`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T11:33:55.930

使用显示而不是定位更正确，因为它实际上隐藏了元素，而不是仅仅将其移动到页面之外。

此外，这还为您节省了 3 行代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:33:56.407

如果你想隐藏它，那么为什么不使用`display:none;`and`display:block;`呢？你有什么理由考虑移动它们吗？

# asp.net-mvc-3 - Visual Studio 在启动时自动删除文件

> ID：12799074
> 
> 赞同：0
> 
> 时间：2012-10-09T11:29:38.217
> 
> 标签：asp.net-mvc-3, visual-studio-2010

昨天我在 Visual Studio 2010 中编辑了一个 MVC 项目的 Global.asax.cs 文件，今天早上当我打开 Visual Studio 时，文件不见了。Visual Studio 已删除磁盘上的文件，包括我的本地更改。

我从源代码管理中恢复了文件并重新启动了 Visual Studio，它在启动时再次删除了文件。该文件最初在 VS 初始化时出现在解决方案资源管理器中，大约 5 秒后它消失了...... VS 将其从磁盘中删除。源代码管理将其显示为缺失。

我可以一次又一次地重现这个。

我尝试过的事情： - 修复 VS。- 禁用 ReSharper。- 重新启动我的机器。- 新鲜的源代码控制结帐。- 打开一个不同的 MVC 项目，看看那里是否发生了同样的事情。它没有。

任何人有任何进一步的想法？很受用。

# c# - 调度程序计时器未运行

> ID：12799075
> 
> 赞同：0
> 
> 时间：2012-10-09T11:29:49.413
> 
> 标签：c#, wpf

我正在尝试从我的 WPF 应用程序执行一些 Python 脚本。脚本正在生成日志文件，Tick 事件中的代码正在读取它们并将其显示在文本框中。

我的问题是，LaunchProcess 成功触发，但 UI 冻结。我有一个不确定的进度条，它也不会开始动画。我是 WPF 的初学者，我必须做一些非常小的事情才能让这段代码正常工作。我没有收到任何错误/警告。脚本运行良好，最后我也知道了结果。但是在运行过程中，我的应用程序的 UI 冻结了。

```
private void LaunchProcess(string paramStr)
        {

        Process myProcess = new Process();
        StartProgressBar();
        try
        {
            dispatcherTimer = new DispatcherTimer();
            dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
            dispatcherTimer.Interval = new TimeSpan(0, 0, 0);
            dispatcherTimer.Start();

            myProcess.StartInfo.UseShellExecute = false;
            // You can start any process
            myProcess.StartInfo.FileName = "C:\\Python32\\python.exe";
            myProcess.StartInfo.Arguments = "\""+paramStr+"\"";
            myProcess.StartInfo.CreateNoWindow = true;
            myProcess.StartInfo.RedirectStandardOutput = true;
            myProcess.StartInfo.RedirectStandardError = true;
            myProcess.Start();

            myProcess.WaitForExit();
            // This code assumes the process you are starting will terminate itself.  
            // Given that is is started without a window so you cannot terminate it  
            // on the desktop, it must terminate itself or you can do it programmatically 
            // from this application using the Kill method.
            dispatcherTimer.Stop();
        }
        catch
        {
            MessageBox.Show("Process Launch Failed!!", "Failure", MessageBoxButton.OK, MessageBoxImage.Error);
        }
    }

    private void dispatcherTimer_Tick(object sender, EventArgs e)
    {
        //txtOutPut.Text = "";
        txtOutPut.Text += "\n" + DateTime.Now.ToString();
        if (File.Exists(scriptPath+"\\log.txt"))
        {

            //File.Copy("C:\\FlashAuto\\Execution_Logs\\log.txt", "C:\\FlashAuto\\Temp\\log.txt", true);
            TextReader readLogs = new StreamReader(scriptPath + "\\log.txt");
            string line = readLogs.ReadLine();
            while (line != null)
            {
                txtOutPut.Text += "\n" + line;
                line = readLogs.ReadLine();
                txtOutPut.ScrollToEnd();
            }

            //CountLines = txtExecLog.LineCount - 1;
            readLogs.Close();
            // Forcing the CommandManager to raise the RequerySuggested event 
            txtOutPut.ScrollToEnd();
            CommandManager.InvalidateRequerySuggested();
            readLogs.Dispose();
        }
        else
        {
            txtOutPut.Text += "log file not found at: " + DateTime.Now.ToString();
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:45:31.880

如果您`LaunchProcess`从 UI 线程调用，它显然会在`myProcess.WaitForExit()`.

您可以简单地从启动方法中删除`myProcess.WaitForExit()`和`dispatcherTimer.Stop()`调用，并检查进程是否仍在计时器 Tick 处理程序中运行。

```
private void dispatcherTimer_Tick(object sender, EventArgs e) 
{ 
    if (myProcess.WaitForExit(0)) // check with timeout zero
    {
        dispatcherTimer.Stop();
    }

    ... // all your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:11:49.477

异步调用`LaunchProcess`方法将解决您的 UI 冻结问题

```
public void LaunchProcessAsynchrousCall(string paramStr) 
{
      ThreadStart displayContentHandler = delegate()
      {
           LaunchProcess(paramStr)
       };

       Thread thread = new Thread(displayContentHandler);
       thread.IsBackground = true;
       thread.Start();
 } 
```

# facebook - Facebook小部件适用于某些网址但不适用于其他网址

> ID：12799076
> 
> 赞同：0
> 
> 时间：2012-10-09T11:29:49.500
> 
> 标签：facebook, facebook-graph-api

看看这个小提琴：[JsFiddle](http://jsfiddle.net/aVBQz/1/)

[正如你所看到的，我已经用 url http://facebook.com/ElizaDoolittle](http://facebook.com/ElizaDoolittle)放置了 facebook like box

问题是它不适用于所有网址，请尝试用以下网址替换网址：[http ://www.facebook.com/fatme.safa.3?ref=fs](http://www.facebook.com/fatme.safa.3?ref=fs)

您将看到一条错误通知。这是为什么？？url有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:37:26.133

> [正如你所看到的，我已经用 url http://facebook.com/ElizaDoolittle](http://facebook.com/ElizaDoolittle)放置了 facebook like box

那是音乐家Facebook*页面的地址。*

> 问题是它不适用于所有网址，请尝试用以下网址替换网址：[http ://www.facebook.com/fatme.safa.3?ref=fs](http://www.facebook.com/fatme.safa.3?ref=fs)

那是*用户配置文件*的地址。

> 您将看到一条错误通知。这是为什么？

因为只有页面可以被点赞，所以用户个人资料**不能**被点赞。而且，Like 框也不适用于用户配置文件。

# linq - 在不使用 SqlMethods 的情况下使用带有通配符的 LINQ

> ID：12799079
> 
> 赞同：0
> 
> 时间：2012-10-09T11:30:03.460
> 
> 标签：linq

我需要用通配符匹配某些字符串，就像使用 SQL LIKE 一样。虽然关于这个主题有类似的问题，但我使用的是 Unity3D，虽然它的 Mono.NET 库有 LINQ，但它没有 SqlMethods。

我需要一种模拟所有通配符的方法。所以`'*MSB'`应该能够匹配 EastMSB、WestMSB，并且`DB0?-??`应该匹配 'DB01-11'、'DB01-07' 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:48:30.553

Linq 能够将`System.String`类的方法扩展`Contains`为适当`SQL`的查询，因此，以下查询：

```
var data = dataContext.Clients.Where(c => c.Name.Contains("John")); 
```

将被“翻译”成类似的东西：

```
DECLARE @p0 VarChar(1000) = '%John%'
SELECT [t0].[Id], [t0].[Name]
FROM [Clients] as [t0]
WHERE [t0].[Name] LIKE @p0 
```

至少，这是我使用[LinqPad](http://www.linqpad.net/)得到的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-09T11:34:31.977

你可以做这样的事情。语法可能不完全正确，它不在我的脑海中，但它会让你接近。

```
List<string> list = new List<string>();
list.Add("#1");
list.Add("#2");
list.Add("#3");

RegularExpressions.Regex regEx = new System.Text.RegularExpressions.Regex("#1");

var qry = list.Where<string>(item => regEx.IsMatch(item)).ToList<string>(); 
```

当然，您在 Regex() 构造函数中传递的表达式可以是满足您的搜索所需的任何内容。

# php - Symfony2 - 如何组织控制器？

> ID：12799080
> 
> 赞同：1
> 
> 时间：2012-10-09T11:30:06.233
> 
> 标签：php, model-view-controller, symfony

这个问题可以与任何 MVC 框架相关。

您如何在 MVC 应用程序中组织控制器？

假设我有一个博客应用程序。这个博客应用程序将有 2 层。显示最新 10 个帖子、单个帖子、按类别发布的帖子等的博客层。

我将拥有管理层，使用户能够创建新的博客文章、编辑文章、删除文章、创建类别......

我将如何构建我的控制器？我应该创建博客控制器和管理控制器吗？或者我应该放松领域驱动设计并创建 BlogController、PostController 来处理与该对象相关的操作？

问题是如何组织你的控制器，控制器是否应该类似于相关功能的“命名空间”？那么管理功能将有管理控制器来处理创建、更新、删除操作，而博客控制器将处理向最终用户显示这些帖子？

我希望你能得到我需要的东西，解释如何在 MVC 中组织你的控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:21:47.340

我认为没有“更好的方法”可以做到这一点。您可以按照您认为更容易的方式组织控制器。事实上，您可以对两个博客层使用单个控制器，而不会出现问题或性能损失。

也就是说，在我的项目中，我更喜欢使用两个控制器（就像在您的第一种方法中一样），所以我可以为每个控制器设置身份验证（无需每次操作都进行）。但这是一个偏好问题。

# discount - 谁知道有没有验证英国学生卡号码的服务？

> ID：12799087
> 
> 赞同：4
> 
> 时间：2012-10-09T11:30:38.273
> 
> 标签：discount

不完全确定这是否是这个问题的正确位置，但这里有。

我曾尝试与英国 NUS 的人员取得联系，但到目前为止，对于是否有任何网络服务可用于验证英国 NUS（全国学生联盟）折扣卡的问题，我没有任何回应。

我认为这些是 18 位代码，但我什至不知道如何广泛解析它们，因为我不知道它们是基于什么的。

我知道 Topshop 以及其他企业在他们的网站结账时提供此功能，将折扣应用到购物车流程中，我们也想这样做……只是我在这方面根本找不到任何东西。

如果我错过了一些直接指向相关信息的搜索词，请随时 LMGTFY。

**编辑** 似乎是 topshop 网站，还有一些其他网站实际上是在针对第三方公司[https://www.myunidays.com/](https://www.myunidays.com/)进行验证。我原以为这对 NUS 来说可能是一项相当有利可图的业务。在我看来，订阅合作企业的订阅将是一个真正的赚钱机会。猜猜它要么是第三方路线，要么等到地狱结冰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:35:29.593

NUS 提供了一个 Web 界面来进行验证。我们已经为客户实现了这个作为 magento 扩展。联系新加坡国立大学额外电话：07974 646 112

# facebook - 使用sharer.php可行吗？

> ID：12799093
> 
> 赞同：2
> 
> 时间：2012-10-09T11:30:48.743
> 
> 标签：facebook, share

好的，所以我知道 sharer.php URL 已经被弃用了一段时间，转而支持社交插件。

然而，sharer.php 的一大优点（对我们来说）是我们不必创建 Facebook 应用程序来获取 ID 以在 SDK 初始化调用中使用。

在我正在处理客户端的项目中，已经在使用 sharer.php 路由，并且他们没有可供我使用的 FB 应用程序。

所以我的问题是，假设 sharer.php 仍然有效（而且似乎有效），是否有人知道此功能是否会很快消失？还是根本没有？我在路线图中没有看到任何提及。

我不是要求最佳实践或类似的东西，因为我通常不会使用已弃用的功能，但如果它在那里，已经被使用，并且可以/将继续工作，那么我肯定会考虑它。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:35:40.323

从我所看到的情况来看，`sharer.php`现在已经停止为某些人工作。

如果你正在开发新的东西，你应该使用[Like Button Social Plugin](https://developers.facebook.com/docs/reference/plugins/like/)而不是弃用的端点。

是的，您需要为他们创建一个应用程序，但这很简单。

# php - 如何从 Twig 模板中检索所有变量？

> ID：12799094
> 
> 赞同：50
> 
> 时间：2012-10-09T11:30:50.760
> 
> 标签：php, symfony, twig, template-engine

是否可以使用 PHP 检索 Twig 模板中的所有变量？

示例 someTemplate.twig.php：

```
Hello {{ name }}, 
your new email is {{ email }} 
```

现在我想做这样的事情：

```
$template = $twig->loadTemplate('someTemplate');
$variables = $template->getVariables(); 
```

$variables 现在应该包含“name”和“email”。

我想这样做的原因是我正在开发一个 CMS 系统，其中我的树枝模板和变量由我的用户动态设置，并且它们还通过 API 填充变量。

我想将默认值设置为未设置的变量，因此我需要模板中存在的所有变量的列表……</p>

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2015-10-22T08:39:39.077

我发现这对于获取当前上下文中可用的所有顶级键很有用：

```
<ol>
    {% for key, value in _context  %}
      <li>{{ key }}</li>
    {% endfor %}
</ol> 
```

感谢[https://www.drupal.org/node/1906780](https://www.drupal.org/node/1906780)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-10-09T11:34:37.757

**2019 年更新**

虽然`{{ dump() }}`确实有效，但在某些情况下，如果它生成太多信息（例如，由于递归），它可能会导致 PHP 出现“内存耗尽”错误。在这种情况下，尝试`{{ dump(_context|keys) }}`按名称获取已定义变量的列表，而不转储其内容。

**2017 年更新**

可以通过使用`{{ dump() }}`过滤器。感谢您在评论中指出这一点！

* * *

**过时的**

这不可能。

您可以在 twig 模板中查找这些变量`|default('your_value')`并向它们添加过滤器。它将检查变量是否已定义并且不为空，如果没有 - 将用您的值替换它。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-05-25T13:59:58.610

我这样做的方式是

```
<script>console.log({{ _context | json_encode | raw }});</script> 
```

然后我只是使用 DevTools 检查我的控制台

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-08-25T12:54:52.480

## 2015年添加的答案

过去是不可能的。但是从 1.5 版开始添加了[dump()](http://twig.sensiolabs.org/doc/functions/dump.html)函数。因此，您可以从当前上下文调用 dump() 获取所有变量，而无需任何参数：

```
<pre>
    {{ dump(user) }}
</pre> 
```

但是，您必须在创建 Twig 环境时显式添加[Twig_Extension_Debug](http://twig.sensiolabs.org/api/master/Twig_Extension_Debug.html)`dump()`扩展，因为默认情况下不可用：

```
$twig = new Twig_Environment($loader, array(
    'debug' => true,
    // ...
));
$twig->addExtension(new Twig_Extension_Debug()); 
```

如果你一直在使用 Symfony、Silex 等，`dump()`默认情况下是可用的。

*   [树枝功能](http://twig.sensiolabs.org/doc/functions/dump.html)

## 编辑：

`dump()`还可以使用全局变量引用传递给模板的所有变量（在 的上下文之外） `_context`。这就是你要找的。它是一个将所有变量名与其值相关联的数组。

[您可以在 Twig 文档中找到一些附加信息。](http://twig.sensiolabs.org/doc/templates.html#global-variables)

但是，对于这个特定问题，最好将您所说的所有这些自定义变量收集在同一个伞形变量下，这样检索它们就不会令人头疼。我将是一个名为`custom_variables`或其他的数组。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-08-08T09:10:38.443

这是转储所有变量的最佳方法和最简单的方法：

```
{{ dump () }} 
```

*来源：[https ://www.drupal.org/docs/8/theming/twig/discovering-and-inspecting-variables-in-twig-templates](https://www.drupal.org/docs/8/theming/twig/discovering-and-inspecting-variables-in-twig-templates)*

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-07-30T13:25:55.070

如果您需要文本中的所有 Twig 元素，只需使用：

```
preg_match_all('/\{\%\s*(.*)\s*\%\}|\{\{(?!%)\s*((?:[^\s])*)\s*(?<!%)\}\}/i', $text, $matches); 
```

我遇到了 WSIWYG 编辑器将 HTML 标记放置在 Twig 变量中的问题。我过滤它们：

```
public function cleanHTML($text)
{
    preg_match_all('/\{\%\s*(.*)\s*\%\}|\{\{(?!%)\s*((?:[^\s])*)\s*(?<!%)\}\}/i', $text, $matches);

    if (isset($matches[0]) && count($matches[0])) {
        foreach ($matches[0] as $match) {
            $clean_match = strip_tags($match);

            $text = str_replace($match, $clean_match, $text);
        }
    }

    return $text;
} 
```

**更新**

使用此表达式查找所有 {{ }} 和 {% %}

```
preg_match_all('/\{\%\s*([^\%\}]*)\s*\%\}|\{\{\s*([^\}\}]*)\s*\}\}/i', $text, $matches); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-10-18T09:54:35.717

我认为 19Gerhard85 的答案非常好，尽管它可能需要一些调整，因为它为我匹配了一些空字符串。我喜欢尽可能使用现有函数，这是一种主要使用 twig 函数的方法。您需要访问应用程序的 twig 环境。

```
/**
 * @param $twigTemplateName
 * @return array
 */
public function getRequiredKeys($twigTemplateName)
{
    $twig = $this->twig;
    $source = $twig->getLoader()->getSource($twigTemplateName);
    $tokens = $twig->tokenize($source);
    $parsed = $twig->getParser()->parse($tokens);
    $collected = [];
    $this->collectNodes($parsed, $collected);

    return array_keys($collected);
} 
```

它唯一的自定义部分是仅收集某些类型节点的递归函数：

```
/**
 * @param \Twig_Node[] $nodes
 * @param array $collected
 */
private function collectNodes($nodes, array &$collected)
{
    foreach ($nodes as $node) {
        $childNodes = $node->getIterator()->getArrayCopy();
        if (!empty($childNodes)) {
            $this->collectNodes($childNodes, $collected); // recursion
        } elseif ($node instanceof \Twig_Node_Expression_Name) {
            $name = $node->getAttribute('name');
            $collected[$name] = $node; // ensure unique values
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-12-07T14:48:50.737

在使用邓肯的答案很长一段时间后，我终于找到了转储模板所有树枝变量的“正确”方法：

```
{% dump %} 
```

而已。模板中可用的所有变量都将被转储并在分析器的转储部分中，而不是像`{{ dump() }}`.

如果将 的内容`dump()`放入变量中：

```
{% set d = dump() %} 
```

您将获得所有变量，但在“转储就绪”html 中，因此解析它会很痛苦。

希望有帮助。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-03-09T22:47:00.757

```
$loader1 = new Twig_Loader_Array([
    'blub.html' => '{{ twig.template.code }}',
]);
$twig = new Twig_Environment($loader1);
$tokens = $twig->tokenize($loader1->getSource('blub.html'));
$nodes = $twig->getParser()->parse($tokens);

var_dump($this->getTwigVariableNames($nodes));

function getTwigVariableNames($nodes): array
{
    $variables = [];
    foreach ($nodes as $node) {
        if ($node instanceof \Twig_Node_Expression_Name) {
            $name = $node->getAttribute('name');
            $variables[$name] = $name;
        } elseif ($node instanceof \Twig_Node_Expression_Constant && $nodes instanceof \Twig_Node_Expression_GetAttr) {
            $value = $node->getAttribute('value');
            if (!empty($value) && is_string($value)) {
                $variables[$value] = $value;
            }
        } elseif ($node instanceof \Twig_Node_Expression_GetAttr) {
            $path = implode('.', $this->getTwigVariableNames($node));
            if (!empty($path)) {
                $variables[$path] = $path;
            }
        } elseif ($node instanceof \Twig_Node) {
            $variables += $this->getTwigVariableNames($node);
        }
    }
    return $variables;
} 
```

玩得开心 ：-）

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-08-10T17:34:19.360

您必须解析模板，并遍历它返回的 AST：

```
$loaded = $twig->getLoader()->getSource($template);
var_dump(extractVars($twig->parse($twig->tokenize($loaded))));

function extractVars($node)
{
    if (!$node instanceof Traversable) return array();

    $vars = array();
    foreach ($node as $cur)
    {
        if (get_class($cur) != 'Twig_Node_Expression_Name')
        {
            $vars = array_merge($vars, call_user_func(__FUNCTION__, $cur));
        }
        else if ($cur->getAttribute('always_defined') == false)
        {
            // List only predefined variables expected by template, 
            // filtering out `v` and leaving `arr` from `{% for v in arr%}`
            $vars[] = $cur->getAttribute('name');
        }
    }

    return $vars;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-09-02T13:45:16.883

我构建了一个 Twig2Schema 类来从 Twig AST 推断变量。要获取文档中的变量，您需要递归地“遍历” Twig AST，并在遇到某些类型的语言节点时制定规则。

此类从节点中提取变量名（如果它们未始终定义），并且还从 ForLoopNodes 和 IfStatements 中使用的值中获取变量。

要使用它，您可以调用`infer`整个模板，也可以使用`inferFromAst`.

```
<?php

class Twig2Schema
{
    /**
     * @param \Twig\Environment $twig - A twig environment containing loaded templates
     * @param $twigTemplateName - The name of the template to infer variables from
     * @param $config - A configuration object for this function
     * @return array
     */
    public function infer(\Twig\Environment $twig, $twigTemplateName)
    {
        $source = $twig->getLoader()->getSourceContext($twigTemplateName);
        $tokens = $twig->tokenize($source);
        $ast = $twig->parse($tokens);
        return $this->inferFromAst($ast);
    }

    /**
     * @param \Twig\Node\ModuleNode $ast - An abstract syntax tree parsed from Twig
     * @return array - The variables used in the Twig template
     */
    public function inferFromAst(\Twig\Node\ModuleNode $ast)
    {
        $keys = $this->visit($ast);

        foreach ($keys as $key => $value) {
            if ($value['always_defined'] || $key === '_self') {
                unset($keys[$key]);
            }
        }

        return $keys;
    }

    /**
     * @param \Twig\Node\Node $ast - The tree to traverse and extract variables
     * @return array - The variables found in this tree
     */
    private function visit(\Twig\Node\Node $ast)
    {
        $vars = [];
        switch (get_class($ast)) {
            case \Twig\Node\Expression\AssignNameExpression::class:
            case \Twig\Node\Expression\NameExpression::class:
                $vars[$ast->getAttribute('name')] = [
                    'type' => get_class($ast),
                    'always_defined' => $ast->getAttribute('always_defined'),
                    'is_defined_test' => $ast->getAttribute('is_defined_test'),
                    'ignore_strict_check' => $ast->getAttribute('ignore_strict_check')
                ];
                break;
            case \Twig\Node\ForNode::class:
                foreach ($ast as $key => $node) {
                    switch ($key) {
                        case 'value_target':
                            $vars[$node->getAttribute('name')] = [
                                'for_loop_target' => true,
                                'always_defined' => $node->getAttribute('always_defined')
                            ];
                            break;
                        case 'body':
                            $vars = array_merge($vars, $this->visit($node));
                            break;
                        default:
                            break;
                    }
                }
                break;
            case \Twig\Node\IfNode::class:
                foreach ($ast->getNode('tests') as $key => $test) {
                    $vars = array_merge($vars, $this->visit($test));
                }
                foreach ($ast->getNode('else') as $key => $else) {
                    $vars = array_merge($vars, $this->visit($else));
                }
                break;
            default:
                if ($ast->count()) {
                    foreach ($ast as $key => $node) {
                        $vars = array_merge($vars, $this->visit($node));
                    }
                }
                break;
        }
        return $vars;
    }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-05-23T00:16:13.557

在我花了整整一夜，尝试了上述所有答案之后，我意识到，出于某种意想不到的原因，正则表达式根本不适用于我的简单模板。他们返回垃圾或部分信息。所以我决定删除标签之间的所有内容，而不是计算标签^_^。

我的意思是，如果模板是`'AAA {{BB}} CC {{DD}} {{BB}} SS'`，我只需`'}}'`在模板的开头和`'{{`结尾添加.... 和之间的所有内容`}}`， `{{`我将删除，在 => 之间添加逗号`}}{{BB,}}{{DD,}}{{BB,}}{{`。然后 - 只需擦除`}}`和`{{`。

我花了大约 15 分钟来编写和测试....但是使用正则表达式我花了大约 5 个小时没有成功。

```
/**
 * deletes ALL the string contents between all the designated characters
 * @param $start - pattern start 
 * @param $end   - pattern end
 * @param $string - input string, 
 * @return mixed - string
 */
 function auxDeleteAllBetween($start, $end, $string) {
    // it helps to assembte comma dilimited strings
    $string = strtr($start. $string . $end, array($start => ','.$start, $end => chr(2)));
    $startPos  = 0;
    $endPos = strlen($string);
    while( $startPos !== false && $endPos !== false){
        $startPos = strpos($string, $start);
        $endPos = strpos($string, $end);
        if ($startPos === false || $endPos === false) {
            return $string;
        }
        $textToDelete = substr($string, $startPos, ($endPos + strlen($end)) - $startPos);
        $string = str_replace($textToDelete, '', $string);
    }
    return $string;
}

/**
 * This function is intended to replace
 * //preg_match_all('/\{\%\s*([^\%\}]*)\s*\%\}|\{\{\s*([^\}\}]*)\s*\}\}/i', 
 * which did not give intended results for some reason.
 *
 * @param $inputTpl
 * @return array
 */
private function auxGetAllTags($inputTpl){
   $inputTpl = strtr($inputTpl, array('}}' => ','.chr(1), '{{' => chr(2)));
   return explode(',',$this->auxDeleteAllBetween(chr(1),chr(2),$inputTpl));
}

$template = '<style>
td{border-bottom:1px solid #eee;}</style>
<p>Dear {{jedi}},<br>New {{padawan}} is waiting for your approval: </p>
<table border="0">
<tbody><tr><td><strong>Register as</strong></td><td>{{register_as}}, user-{{level}}</td></tr>
<tr><td><strong>Name</strong></td><td>{{first_name}} {{last_name}}</td></tr>...';

print_r($this->auxGetAllTags($template)); 
```

希望它会帮助某人:)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-27T15:58:13.170

如果您查看 twig 编译过程，您会看到有一个名为 ignore_strict_check 的参数是否为 true 编译将用 null 替换错过的变量，但如果为 false 编译将引发运行时错误，请查看文件 twig/src/Node/Expression/NameExpression.php 行63 在 symfony 中你可以通过 twig 包配置来设置这个参数 strict_variables: false

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-03-22T21:47:49.207

创建一个 Twig_Extension 并添加一个带有**needs_context**标志的函数：

```
class MyTwigExtension extends Twig_Extension{
   public function getFunctions()
    {
        return array(
            new \Twig_SimpleFunction('myTwigFunction', array($this, 'myTwigFunction'), array('needs_context' => true)),
        );
    }

    public function myTwigFunction($context)
    {
        var_dump($context);
        return '';
    }
} 
```

上下文将作为第一个参数传递给您的函数，其中包含所有变量。

在您的 Twig 模板上，您只需调用该函数：

```
{{myTwigFunction()}} 
```

如果您在创建 Twig 扩展方面需要帮助，请参阅此文档：

[http://twig.sensiolabs.org/doc/2.x/advanced.html](http://twig.sensiolabs.org/doc/2.x/advanced.html)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-04-10T07:37:38.707

这个问题有[一个重复](https://stackoverflow.com/questions/16757993/get-all-variables-used-in-a-twig-template-file?answertab=oldest#tab-top)- 在那里我发现了一个比上面有用且更强大的 RegEX。这一个，我已经改进以匹配更精确：

```
\{\{(?!%)\s* # Starts with {{ not followed by % followed by 0 or more spaces
  ((?:(?!\.)[^\s])*?) # Match anything without a point or space in it
  (\|(?:(?!\.)[^\s])*)? # Match filter within variable
\s*(?<!%)\}\} # Ends with 0 or more spaces not followed by % ending with }}
| # Or
\{%\s* # Starts with {% followed by 0 or more spaces
  (?:\s(?!endfor)|(endif)|(else)(\w+))+ # Match the last word which can not be endfor, endif or else
\s*%\} # Ends with 0 or more spaces followed by %}
# Flags: i: case insensitive matching | x: Turn on free-spacing mode to ignore whitespace between regex tokens, and allow # comments. 
```

# c# - 有没有办法在没有通用约束的情况下强制执行无参数构造函数

> ID：12799099
> 
> 赞同：9
> 
> 时间：2012-10-09T11:31:01.877
> 
> 标签：c#, generics, inheritance, interface, abstract-class

我有一个接口`ISnack`，当它由一个类实现时，它应该有一个默认的无参数构造函数。基本上是这样的：

```
public interface ISnack<T> where T : new()
{

} 
```

我`<T> where T : new()`只是用来强制执行无参数构造函数。

然后我会以这种方式实现接口：

```
public class Cutlet : ISnack<Cutlet>
{

} 
```

这是可行的，它只是确保`Cutlet`类具有无参数的构造函数。

现在我有一个抽象基类`Kitchen`：

```
public abstract class Kitchen<T> where T : ISnack
{

} 
```

要求是`Kitchen`应该有约束 where`T`应该是`ISnack`. **但这不会起作用，因为不存在`ISnack`，而只有`ISnack<T>`.**

如果我试过这个

```
public abstract class Kitchen<T> where T : ISnack<T>
{

} 
```

它不会编译 ( `'T' must be a non-abstract type with a public parameterless constructor in order to use it as parameter 'T' in the generic type or method 'ISnack<T>'`) 并且在我的上下文中也没有意义。

如果我可以强制`ISnack`s 具有无参数构造函数而不受`T`类型参数的约束，那么`T`in`Kitchen<T>`很容易成为`ISnack`. 怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T11:41:59.603

除非您添加约束，否则您不能；通用约束是累积的，所以为了让编译器满意，你必须拥有：

```
public abstract class Kitchen<T> where T : ISnack<T>, new() 
```

如果没问题，***那就这样做***。如果它不好，那么你将不得不`: new`从原件中删除它，并且没有它。这并不像听起来那么糟糕，但这意味着您将验证下推到执行而不是编译。但是：`Activator.CreateInstance<T>()`无论如何，仍然可以满足您的需求-即使没有`new()`约束。所以你可以替换：

```
T newObj = new T(); // validated by the compiler 
```

和：

```
T newObj = Activator.CreateInstance<T>(); // not validated until executed 
```

删除约束时一个方便的技巧是：添加一个单元/集成测试，通过反射找到候选类型，并验证缺少的约束*作为测试套件的一部分*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T12:14:11.683

您可以使用第二个通用参数：

```
abstact class Kitchen<T, S> 
    where T : ISnack<S> 
    where S : new()
.... 
```

这将解决您的问题。

向类添加第二个参数也可能导致我在 .NET 2.0 可用后遇到的一些问题。一些复杂的情况可能需要向类添加比您喜欢的更多的通用参数。`(SpecificType)base.MyTypeTProperty`通常我通过添加更多的直接强制转换（如）来分解通用链。*评论：我试着稍后再找一个样本*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T11:42:40.037

只需将约束再次添加到 T

```
public abstract class Kitchen<T> where T : ISnack<T>, new()   {      } 
```

# r - 使用 NTLM 在 R curl 中调试授权

> ID：12799100
> 
> 赞同：2
> 
> 时间：2012-10-09T11:31:01.960
> 
> 标签：r, curl

我正在尝试从公司网络中的 Windows (sharepoint 2007) Web 服务器访问 URL。我正在使用 R 和 curl，但似乎无法正确获取授权部分。（我和 Web 服务器之间没有代理或防火墙，而且我在同一个域的 Windows 机器上）这是我目前所拥有的；

```
library(SSOAP)
library(XML)
library(RCurl)

#This works fine for a page with no authroisation required
y = tryCatch(getURLContent("http://www.example.com/webpagewithnoauthroisation.html", 
                verbose=TRUE, 
                httpauth="ntlm", userpwd="DOMAIN/username:password"), 
        HTTPError = function(e) {
            cat("HTTP error: ", e$message, "\n")
        })

#This fails for a page that needs authoisation
x = tryCatch(getURLContent("http://sharepoint.example.com/Pages/Default.aspx", 
                verbose=TRUE, 
                httpauth="ntlm", userpwd="DOMAIN/username:password"), 
        HTTPError = function(e) {
            cat("HTTP error: ", e$message, "\n")
        })

> Error: Unauthorized 
```

我有点难过如何调试它（在我的 Windows 机器上）。关于调试 (r) Curl 身份验证问题有什么好的建议吗？

编辑：我认为这将是 NTLM，但刚刚读到它可能是其他东西（Kerberos？）。目标 Web 服务器是 Sharepoint 2007 服务器。

# python - 读取 Python 编辑的文件时节点服务器崩溃

> ID：12799103
> 
> 赞同：0
> 
> 时间：2012-10-09T11:31:12.547
> 
> 标签：python, node.js, socket.io

嗨，我正在编写一个简单的 nodejs 推送通知服务器，它基本上是读取动态编辑的 json 文件并将其内容推送到客户端。

**更新：如果我删除类似的数据 = JSON.parse(data); 有人可以澄清一下吗？**

我每 5 秒使用 python 编辑一次 json 文件。但是每次我运行 python 循环来编辑文件时，节点服务器都会崩溃。但是，如果我在 while 循环中单独运行相同的代码，节点服务器就可以正常工作。

节点服务器出现以下错误

```
 debug - cleared heartbeat timeout for client c_u5Oi1eGnwaDerGREMD
   debug - set heartbeat interval for client c_u5Oi1eGnwaDerGREMD
{"sample": {"name": "Shubhanshu Mishra100", "networks": ["facebook", "twitter",
"linkedin"]}}
   debug - websocket writing 5:::{"name":"notification","args":[{"sample":{"name
":"Shubhanshu Mishra100","networks":["facebook","twitter","linkedin"]},"time":"2
012-10-09T11:24:55.588Z"}]}
{"sample": {"name": "Shubhanshu Mishra100", "networks": ["facebook", "twitter",
"linkedin"]}}
   debug - websocket writing 5:::{"name":"notification","args":[{"sample":{"name
":"Shubhanshu Mishra100","networks":["facebook","twitter","linkedin"]},"time":"2
012-10-09T11:24:55.589Z"}]}
{"sample": {"name": "Shubhanshu Mishra200", "networks": ["facebook", "twitter",
"linkedin"]}}
   debug - websocket writing 5:::{"name":"notification","args":[{"sample":{"name
":"Shubhanshu Mishra200","networks":["facebook","twitter","linkedin"]},"time":"2
012-10-09T11:25:00.598Z"}]}
{"sample": {"name": "Shubhanshu Mishra200", "networks": ["facebook", "twitter",
"linkedin"]}}
   debug - websocket writing 5:::{"name":"notification","args":[{"sample":{"name
":"Shubhanshu Mishra200","networks":["facebook","twitter","linkedin"]},"time":"2
012-10-09T11:25:00.619Z"}]}

undefined:0

^
SyntaxError: Unexpected end of input
    at Object.parse (native)
    at F:\My Codes\NodeJs\PushNotification\server.js:25:16
    at fs.readFile (fs.js:176:14)
    at Object.oncomplete (fs.js:297:15) 
```

我正在使用 Node.js 中的以下代码读取 response.json 文件

```
io.sockets.on('connection', function(socket){
    fs.watch('response.json', function(curr, prev){
        fs.readFile('response.json', 'utf8', function(err, data){
            if(err) throw err;
            console.log(data);
            data = JSON.parse(data);
            data.time = new Date();

            socket.volatile.emit('notification', data);
        });

    });
}); 
```

**更新：如果我删除类似的数据 = JSON.parse(data); 有人可以澄清一下吗？**

当我单独调用我的python脚本时，我的python代码是：

```
import json
import time

jsonStr = {
    "sample": {
        "name": "Shubhanshu Mishra",
        "networks": [
                "facebook",
                "twitter",
                "linkedin"
        ]
    }
}

i = 0
jsonStr['sample']['name'] = "Shubhanshu Mishra" + str(i);
fStr = json.dumps(jsonStr)
with open('response.json', 'w') as f:
        f.write(fStr)
f.closed 
```

但是，当我将上面的相同代码包装在一个睡眠时间为 5 秒的 while 循环中时，我得到了上述错误。我的 while 循环代码是：

```
while True:
    i += 100
    print i
    jsonStr['sample']['name'] = "Shubhanshu Mishra" + str(i);
    fStr = json.dumps(jsonStr)
    #f = open("response.json", "w")
    with open('response.json', 'w') as f:
        f.write(fStr)
    f.closed
    #f.write(fStr)
    print "Written to file: " + fStr
    #f.close()
    time.sleep(5) 
```

我的完整代码可见：[https ://github.com/napsternxg/PushNotification](https://github.com/napsternxg/PushNotification)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:09:15.470

发生的情况是这样的：Python 通过首先清除文件来写入文件，然后写入字符串。一旦文件被清除，节点就会触发事件，并读取（空）文件。然后，尝试 JSON 解析一个空字符串，你会得到错误。

问题是，当您手动运行简单的 python 脚本（没有 while 循环）时，为什么不会发生这种情况。我不确定，但我认为这与各种竞争条件有关，主要区别在于循环中，在写入文件之后，它会打印一些东西，然后睡觉一些，在另一个万一它就退出了。如果您在手动空闲脚本中添加打印和睡眠，如果您得到相同的（崩溃）行为，我一点也不会感到惊讶。

那么，如何解决这个问题。一个不太好，但可行的方法是添加一个小睡眠，以允许写入完成：

```
io.sockets.on('connection', function(socket){
    fs.watch('response.json', function(curr, prev){
      setTimeout(function () {
        fs.readFile('response.json', 'utf8', function(err, data){
            if(err) throw err;
            console.log(data);
            data = JSON.parse(data);
            data.time = new Date();

            socket.volatile.emit('notification', data);
        });
      }, 50);
    });
}); 
```

由于我希望您从 中获得 2 个回调，因此`fs.watch`最好通过下划线对它们进行去抖动（实际上忽略第一个）：

```
var _ = require("underscore");
io.sockets.on('connection', function(socket){
    fs.watch('response.json', _.debounce(function(curr, prev){
        fs.readFile('response.json', 'utf8', function(err, data){
            if(err) throw err;
            console.log(data);
            data = JSON.parse(data);
            data.time = new Date();

            socket.volatile.emit('notification', data);
        }), 50);
    });
}); 
```

如果您忽略该错误，我认为它甚至会像您期望的那样工作（因为在来自 的第二个回调中`fs.watch`，该文件将包含正确的数据）。

但是，最后，我认为这不是将新数据注入正在运行的程序中的方法。我会使用以下方法之一：

*   使用消息队列系统
*   使用命名管道
*   在 sighup 上重新加载配置文件（而不是在它们更改时）

# android - 上传照片到appcelerator云服务器

> ID：12799104
> 
> 赞同：0
> 
> 时间：2012-10-09T11:31:13.750
> 
> 标签：android, file-upload, appcelerator

我正在尝试将照片上传到我的 android 应用程序中的 appcelerator 云服务器。我已按照 appcelerator 官方文档中给出的步骤进行操作。现在没有错误。但是 Eclipse 给出了照片上传所需的 message photo 参数。我被困在这里，请帮助某人。以下是我的代码。

```
package com.example.test;

import java.io.File;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import com.appcelerator.cloud.sdk.CCMeta;
import com.appcelerator.cloud.sdk.CCRequestMethod;
import com.appcelerator.cloud.sdk.CCResponse;
import com.appcelerator.cloud.sdk.Cocoafish;
import com.appcelerator.cloud.sdk.CocoafishError;
import android.net.Uri;
import android.os.Bundle;
import android.widget.ImageView;
import android.widget.Toast;
import android.app.Activity;

public class MainActivity extends Activity {
String stringPath = "android.resource://com.example.test/raw/back.png";
Uri uri = Uri.parse(stringPath);
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Cocoafish sdk = new Cocoafish("ou5G8wrYyA0LKrVWmbZHRZgMpQ53sAH0");
    Map<String, Object> data = new HashMap<String, Object>();
    data.put("login", "test@appcelerator.com");
    data.put("password", "test_password");
    CCResponse response;
    try {
        response = sdk.sendRequest("users/login.json", CCRequestMethod.POST, data);
        JSONObject responseJSON = response.getResponseData();
        CCMeta meta = response.getMeta();
        if("ok".equals(meta.getStatus()) 
            && meta.getCode() == 200 
            && "loginUser".equals(meta.getMethod())) {

    //      Toast.makeText(getBaseContext(), "User Login Successfully",Toast.LENGTH_SHORT).show();
            Map<String, Object> data0 = new HashMap<String, Object>();
            data0.put("photo",R.drawable.back);
            CCResponse response0 = sdk.sendRequest("photos/create.json", CCRequestMethod.POST, data0);

            JSONObject responseJSON0 = response0.getResponseData();
            CCMeta meta0 = response0.getMeta();
            if("ok".equals(meta0.getStatus()) 
                && meta0.getCode() == 200 
                && "createPhoto".equals(meta0.getMethod())) {
              JSONArray photos = responseJSON0.getJSONArray("photos");

            }

        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (CocoafishError e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:08:57.553

代替

```
 data0.put("photo",R.drawable.back); 
```

和

```
 data0.put("photo",new File("/sdcard/testImage.jpg")); 
```

# mongodb - 如何在 MongoDB 中进行自引用 UPDATE？

> ID：12799107
> 
> 赞同：2
> 
> 时间：2012-10-09T11:31:33.807
> 
> 标签：mongodb, nosql

> **可能重复：**
> [使用另一个字段的值更新 MongoDB 字段](https://stackoverflow.com/questions/3974985/update-mongodb-field-using-value-of-another-field)

对于数据库迁移，我总是发现在 SQL 中发出这样的问题很有帮助：

`UPDATE users SET full_name = users.first_name || " " || users.last_name`(PL/SQL) 或 `UPDATE users SET full_name = CONCAT( users.first_name, users.last_name )`(MySQL)

如何在 MongoDB 中执行此操作而不先获取所有文档并通过迭代更新它们？

# java - launch4j：“进程无法访问文件...”

> ID：12799111
> 
> 赞同：-1
> 
> 时间：2012-10-09T11:31:53.950
> 
> 标签：java, executable, launch4j

我刚刚升级到 Win 7，现在我的 launch4j 设置不再工作了。

线索？

使用下面的启动文件，我得到这些错误：

```
 [exec] launch4j: Compiling resources
 [exec] launch4j: Linking
 [exec] launch4j: Wrapping
 [exec] launch4j: H:\Documents\QueryAnalyzerFaker\QueryAnalyzerFaker\.\batchexport.exe (The process cannot access the file because it is being used by another process)
 [exec] launch4j: java.io.FileNotFoundException: H:\Documents\QueryAnalyzerFaker\QueryAnalyzerFaker\.\batchexport.exe (The process cannot access the file because it is being used by another process) 
```

这是启动配置

```
<launch4jConfig>
  <dontWrapJar>false</dontWrapJar>
  <headerType>console</headerType>
  <jar>.\batchexport.jar</jar>
  <outfile>.\batchexport.exe</outfile>
  <errTitle></errTitle>
  <cmdLine></cmdLine>
  <chdir></chdir>
  <priority>normal</priority>
  <downloadUrl>http://java.com/download</downloadUrl>
  <supportUrl></supportUrl>
  <customProcName>false</customProcName>
  <stayAlive>false</stayAlive>
  <manifest></manifest>
  <icon>.\1326449361_table_money.ico</icon>
  <jre>
    <path>C:\Program Files (x86)\Java\jre6</path>
    <minVersion>1.6.0</minVersion>
    <maxVersion></maxVersion>
    <jdkPreference>jreOnly</jdkPreference>
    <maxHeapSize>1024</maxHeapSize>
  </jre>
</launch4jConfig> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:19:05.560

该问题似乎是由目标驱动器（网络驱动器）的同步服务和 launch4j 之间的一些干扰引起的。

我通过在本地 c: 驱动器上构建来解决它，然后添加一个 Ant 目标以将输出复制到网络驱动器上的所需文件夹。

# objective-c - NSTableView 对齐到窗口的右侧？

> ID：12799112
> 
> 赞同：1
> 
> 时间：2012-10-09T11:31:55.730
> 
> 标签：objective-c, macos, cocoa, interface-builder, nstableview

好的，我在 Interface Builder 的窗口中有一个 NSTableView，我希望它的宽度恒定为 250（即使用户调整了窗口的大小！！！）。我还希望它保持在右侧，例如侧面板左右。我还希望单元格保持完全相同的宽度。我在下面添加了一张图片。我猜 Interface Builder 中有一些选项对吗？

![在此处输入图像描述](../Images/8ea58693b2b625811dfa43e8e49c8ae1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:49:36.557

您应该转到 Interface Builder 中的指标窗格并设置表格视图自动调整大小选项，如下图所示

![在此处输入图像描述](../Images/0b1ef0fff2e91ace4448999f654bb22f.png)

这样，您的表格视图将保持在右侧并且不会增长（即，将保持其宽度）。

# android - 在 Android 中复制视图

> ID：12799113
> 
> 赞同：0
> 
> 时间：2012-10-09T11:32:01.837
> 
> 标签：android

我制作了一个清单视图，它有文本输入字段、复选框和两个按钮，一个用于保存列表，另一个用于全部删除。好的，但是一个朋友（正在使用我的应用程序）说“我也需要这个来列出不同种类的东西”。我怎样才能以一种简单的方式复制我的整个视图，我应该将它声明为一个类然后创建几个实例吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:13:40.213

您可以使用包含标签。

例如，如果您将视图保存为“布局”文件夹中的**file.xml**，则可以使用以下代码将其添加到任何位置：

```
<include android:id="@+id/myView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        layout="@layout/file" /> 
```

# sql - 如何使用索引优化 SELECT * 命令？

> ID：12799118
> 
> 赞同：-5
> 
> 时间：2012-10-09T11:32:07.330
> 
> 标签：sql, indexing, db2, database-indexes

我是索引新手，我有大问题。

我的查询`SELECT * FROM TABLE`持续时间过长。

是否可以使用索引对其进行优化以获得更快的结果？

我知道索引对`WHERE`子句和类似内容很有用，但这是`SELECT *`？

我有超过 20 万条记录，当然它们都有唯一的 ID。

只需创建一个带有 ID 列的索引就足够了，或者最好的策略是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:37:34.617

1.  **对于要过滤的所有列，添加**仅包含此列的索引。

2.  在 DB2 中，您可以通过添加 FETCH FIRST N ROWS ONLY 来限制返回的行数，请参阅[http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2 .doc.admin%2Ffrstnrw.htm](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=%2Fcom.ibm.db2.doc.admin%2Ffrstnrw.htm)。这将尽可能快，因为**在找到所有 200k 行之前返回前 N 行**（假设搜索条件已编入索引）。

3.  **获取 200k 行是荒谬的，因为没有人会查看所有行。**您可能想要计算行数（确实可以使用 COUNT 等快速完成），并仅显示前 N 行，见上文。关键是看匹配了多少行，而不是看行本身。我打赌！或者你们是100%的疯子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T11:55:32.007

不要在 25 列上创建索引。创建多个索引，甚至可能为每一列创建一个。如果用户可以过滤所有列，请确保过滤器是 AND 而不是 OR。如果您在过滤器之间进行 OR，则索引将无法正常工作。

首先尝试这个作为测试：

```
SELECT * FROM Ticket WHERE Name = 'AAA'
-- Take length of time that takes

CREATE INDEX IX_TICKET_NAME ON Ticket(Name)

SELECT * FROM Ticket WHERE Name = 'AAA'
-- Seel how long it takes now 
```

如果您看到性能大幅提升，那么 yes 索引会有所帮助。然后尝试找出哪些其他列需要索引。

编辑：然后不允许用户将所有过滤器留空。给他们一个警告，说明至少必须应用一些过滤器。或者如果你不能这样做，如果所有过滤器都是空白的，只需将结果限制为 100 行或其他内容

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T11:43:36.313

您所指的唯一 ID 很可能是索引键。选择这么多数据并在应用程序中处理这些数据不会很快，尤其是在构建网页时。您可能想尝试：

*   选择部分数据并分段处理。
*   在应用程序中显示结果之前，使用数据库上的 sql 尽可能多地处理数据。

# jquery - 使用导航背景颜色滚动顶部不起作用

> ID：12799119
> 
> 赞同：0
> 
> 时间：2012-10-09T11:32:08.963
> 
> 标签：jquery, html, scrolltop

我正在尝试创建单页网站。检查[我的例子](http://rankairos.webs.com/)

在这里，`click`在滚动`Top`时，在除**home**`click`之外的任何导航之后，它显示相同的导航（仅在背景颜色中）。但是单击滚动时我需要主页导航（背景颜色）**`Top`**

 ****例子**

单击**关于我**的导航，然后单击滚动`Top` 它不会更改链接`active` `background color`

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:38:40.017

用于`background-attachment: fixed;`您的`<body>`元素。

IE

```
body {
    background:#000000 url(../images/body.jpg) no-repeat;
    font-size:14px;
    background-attachment: fixed; /* new */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:54:34.897

将这两行添加到您的顶部链接点击事件中：

```
$('#back-top a').click(function() {
  $('#nav li.active').removeClass('active');
  $('#nav li').first().addClass('active');
} 
```

但是必须有一种方法可以使用 pagesscroller api 来做到这一点。

**编辑：** 刚刚查看了[http://pagescroller.com/documentation/](http://pagescroller.com/documentation/)上的 api 有一种方法可以做到这一点，但只能使用专业版的 pagesscroller。
另一种解决方案可能是多次调用pagescroller 的prev() 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:10:23.470

您可以使用 ：

```
$('#back-top a').click(function() {
  $('#nav > li.active').removeClass('active');
  $('#nav > li:first').addClass('active');
}); 
```

并添加此 CSS 样式：

```
li.active {
    background-color: #eee;
} 
```

关于您的需求（菜单项的滚动背景），我真的建议您看看： http: [//net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-lava-lamp -风格导航菜单/](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-lava-lamp-style-navigation-menu/)**

# c# - 如何计算纵向冗余校验 (LRC)？

> ID：12799122
> 
> 赞同：5
> 
> 时间：2012-10-09T11:32:17.703
> 
> 标签：c#, checksum, parity

我试过维基百科的例子：[http ://en.wikipedia.org/wiki/Longitudinal_redundancy_check](http://en.wikipedia.org/wiki/Longitudinal_redundancy_check)

这是 lrc (C#) 的代码：

```
/// <summary>
/// Longitudinal Redundancy Check (LRC) calculator for a byte array. 
/// ex) DATA (hex 6 bytes): 02 30 30 31 23 03
///     LRC  (hex 1 byte ): EC    
/// </summary> 
public static byte calculateLRC(byte[] bytes)
{
    byte LRC = 0x00;
    for (int i = 0; i < bytes.Length; i++)
    {
        LRC = (LRC + bytes[i]) & 0xFF; 
    }
    return ((LRC ^ 0xFF) + 1) & 0xFF;
} 
```

它说结果是“EC”，但我得到“71”，我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T11:46:02.037

这是一个清理后的版本，它不会执行所有那些无用的操作（而不是每次都丢弃高位，它们最终会被一次性丢弃），它给出了您观察到的结果。这是使用加法的版本，但最后有一个否定 - 还不如减去并跳过否定。即使在溢出的情况下，这也是一个有效的转换。

```
public static byte calculateLRC(byte[] bytes)
{
    int LRC = 0;
    for (int i = 0; i < bytes.Length; i++)
    {
        LRC -= bytes[i];
    }
    return (byte)LRC;
} 
```

这是替代 LRC（一个简单的字节异或）

```
public static byte calculateLRC(byte[] bytes)
{
    byte LRC = 0;
    for (int i = 0; i < bytes.Length; i++)
    {
        LRC ^= bytes[i];
    }
    return LRC;
} 
```

在这种情况下，无论是代码（不编译）还是预期结果，维基百科都是错误的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-10T22:15:09.630

猜猜这个看起来更酷；）

```
public static byte calculateLRC(byte[] bytes)
{
    return bytes.Aggregate<byte, byte>(0, (x, y) => (byte) (x^ y));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-09T11:24:11.427

如果有人想从字符串中获取 LRC 字符：

```
 public static char CalculateLRC(string toEncode)
    {
        byte[] bytes = Encoding.ASCII.GetBytes(toEncode);
        byte LRC = 0;
        for (int i = 0; i < bytes.Length; i++)
        {
            LRC ^= bytes[i];
        }
        return Convert.ToChar(LRC);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T15:24:30.417

更正后的维基百科版本如下：

```
private byte calculateLRC(byte[] b)
    {
        byte lrc = 0x00;
        for (int i = 0; i < b.Length; i++)
        {
            lrc = (byte)((lrc + b[i]) & 0xFF);
        }
        lrc = (byte)(((lrc ^ 0xff) + 2) & 0xFF);
        return lrc;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-07T17:57:49.120

我为Arduino创建了这个来理解算法（当然它不是以最有效的方式编写的）

```
String calculateModbusAsciiLRC(String input)
{
  //Refer this document http://www.simplymodbus.ca/ASCII.htm

  if((input.length()%2)!=0) { return "ERROR COMMAND SHOULD HAVE EVEN NUMBER OF CHARACTERS"; } 
 // Make sure to omit the semicolon in input string and input String has even number of characters

   byte byteArray[input.length()+1];
   input.getBytes(byteArray, sizeof(byteArray));
    byte LRC = 0;
    for (int i = 0; i <sizeof(byteArray)/2; i++)
    {
      // Gettting the sum of all registers
     uint x=0;
     if(47<byteArray[i*2] && byteArray[i*2] <58) {x=byteArray[i*2] -48;}
     else { x=byteArray[i*2] -55;     }
       uint y=0;
     if(47<byteArray[i*2+1] && byteArray[i*2+1] <58) {y=byteArray[i*2+1] -48;}
     else { y=byteArray[i*2+1] -55;     }
     LRC  += x*16 + y;
    }   
    LRC = ~LRC + 1;   // Getting twos Complement
    String checkSum = String(LRC, HEX);
    checkSum.toUpperCase(); // Converting to upper case eg: bc to BC - Optional somedevices are case insensitve 
    return checkSum;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-08-08T21:46:14.500

我意识到这个问题已经很老了，但我很难弄清楚如何做到这一点。它现在可以工作了，所以我想我应该粘贴代码。就我而言，校验和需要以 ASCII 字符串形式返回。

```
public function getLrc($string)
{
    $LRC = 0;
    // Get hex checksum.
    foreach (str_split($string, 1) as $char) {
        $LRC ^= ord($char);
    }
    $hex = dechex($LRC);
    // convert hex to string
    $str = '';
    for($i=0;$i<strlen($hex);$i+=2) $str .= chr(hexdec(substr($hex,$i,2)));
    return $str;
} 
```

# lucene - elastich search 查询时缺少过滤器

> ID：12799123
> 
> 赞同：1
> 
> 时间：2012-10-09T11:32:21.960
> 
> 标签：lucene, elasticsearch

这是我第一次使用“缺失”参数，我不确定我是否做错了什么，因为我没有得到我所期望的。

有人可以告诉我缺少的条件是否正确集成在此查询中吗？它应该创建 5 个方面，每个方面仅计算十进制纬度字段“未在索引中设置”或其值为 null 的出现次数。

```
curl -XGET http://my_url:9200/idx_occurrence/Occurrene/_search?pretty=true -d '{
    "filter": {
        "missing": {
            "field": "decimallatitude",
            "existence": true,
            "null_value": true
        }
    },
    "query": {
        "query_string": {
            "fields": ["dataset"],
            "query": "3",
            "default_operator": "AND"
        }
    },
    "facets": {
        "test": {
            "terms": {
                "field": ["kingdom_interpreted"],
                "size": 5
            }
        }
    }
}
' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:53:19.620

正如您在[Search API - Filter](http://www.elasticsearch.org/guide/reference/api/search/filter.html)页面上看到的那样，过滤器应用于您的***查询结果***，但不应用于***构面***。要使其适用于构面，请尝试改用过滤[查询](http://www.elasticsearch.org/guide/reference/query-dsl/filtered-query.html)

```
curl -XGET http://my_url:9200/idx_occurrence/Occurrene/_search?pretty=true -d '{
    "query": {
        "filtered": {
            "filter": {
                "missing": {
                    "field": "decimallatitude",
                    "existence": true,
                    "null_value": true
                }
            },
            "query": {
                "query_string": {
                    "fields": ["dataset"],
                    "query": "3",
                    "default_operator": "AND"
                }
            }
        }
    },
    "facets": {
        "test": {
            "terms": {
                "field": ["kingdom_interpreted"],
                "size": 5
            }
        }
    }
}
' 
```

# c# - 实体框架中存储函数的使用

> ID：12799124
> 
> 赞同：6
> 
> 时间：2012-10-09T11:32:22.263
> 
> 标签：c#, .net, oracle, entity-framework, stored-functions

我有一个`Oracle`试图在`EntityFramework 4.1`应用程序中使用的旧数据库。
我已经阅读了 oracle 对 EF 的巨大限制-除非您创建包装**程序，否则您不能使用 EF 调用 Oracle 存储****函数**。

 **我的数据库中有数千个存储函数，还有其他方法可以解决吗？
喜欢使用 raw`Context.SqlQuery()`吗？

到目前为止，我找不到解决方案...

* * *

[甲骨文文档：](http://www.oracle.com/technetwork/issue-archive/2011/11-sep/o51odt-453447.html)

> Oracle 开发人员可以通过实体框架函数导入（用于显式调用过程）和存储过程映射（为实体插入、更新和删除操作自动调用）在实体框架内利用 PL/SQL 存储**过程，但有限制。**
> 
> **Entity Framework 只能调用 Oracle 存储过程，不能调用存储函数。**（如果将 Oracle 存储函数包装在使用 OUT 参数作为存储函数返回值的存储过程中，则可以使用它们。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T11:42:59.477

如果您使用的是 Entity Framework 4.1 Code First，您可以尝试使用[Database.SqlQuery Method](http://msdn.microsoft.com/en-us/library/gg679117%28v=vs.103%29.aspx)。例如，对于这个函数

```
CREATE OR REPLACE FUNCTION USERNAME_CTX.FUNCTION1 (param number)
 RETURN number
AS
BEGIN
 return param + 1;
END; 
```

您可以使用以下代码：

```
using (var ctx = new Model()) {
   var result =  ctx.Database.SqlQuery<int>("select username_ctx.FUNCTION1(:p0) from dual",1).FirstOrDefault(); 
```

}

**编辑：**

请注意这个针对 dotConnect for Oracle 的解决方案（也许它对于为 ODP.NET 实施类似的解决方案很有用）

对于此功能：

```
CREATE OR REPLACE FUNCTION USERNAME_CTX.FUNCTION2 (param number, int_param out number, str_param out varchar2)
  RETURN number
AS
BEGIN
   int_param := param + 2;
   str_param := 'value';
   return param + 1;
END; 
```

您可以使用以下代码：

```
 using (var ctx = new Model()) {
       var firstParam = new Devart.Data.Oracle.OracleParameter("p0", OracleDbType.Number, 1, ParameterDirection.Input);
       var secondParam = new Devart.Data.Oracle.OracleParameter("p1", OracleDbType.Number, ParameterDirection.Output);
       var thirdParam = new Devart.Data.Oracle.OracleParameter("p2", OracleDbType.VarChar, ParameterDirection.Output);
       var cursorParam = new Devart.Data.Oracle.OracleParameter("cursor_param", OracleDbType.Cursor, ParameterDirection.Output);

       var result = ctx.Database.SqlQuery<int>(
        @"declare
             res number;  
        begin
             res := username_ctx.FUNCTION2(:p0, :p1, :p2);
             open :cursor_param for select res from dual;
        end;",  firstParam, secondParam, thirdParam, cursorParam).FirstOrDefault();

       Console.WriteLine("Return value: {0}; int_param: {1}; str_param: '{2}'", result, secondParam.Value, thirdParam.Value);
      } 
```

**已编辑 2**

或使用此代码：

```
 using (var ctx = new Model()) {
       var firstParam = new Devart.Data.Oracle.OracleParameter("p0", OracleDbType.Number, 1, ParameterDirection.Input);
       var secondParam = new Devart.Data.Oracle.OracleParameter("p1", OracleDbType.Number, ParameterDirection.Output);
       var thirdParam = new Devart.Data.Oracle.OracleParameter("p2", OracleDbType.VarChar, ParameterDirection.Output);
       var resultParam = new Devart.Data.Oracle.OracleParameter("res", OracleDbType.Number, 1, ParameterDirection.Output);
       ctx.Database.ExecuteSqlCommand(@"begin  :res := username_ctx.FUNCTION2(:p0, :p1, :p2);  end;", firstParam, secondParam, thirdParam, resultParam);
       Console.WriteLine("Return value: {0}; int_param: {1}; str_param: '{2}'", resultParam.Value, secondParam.Value, thirdParam.Value);
 } 
```**

# jquery - Ember.js - 拖放列表

> ID：12799126
> 
> 赞同：4
> 
> 时间：2012-10-09T11:32:28.623
> 
> 标签：jquery, ember.js

我使用[这个问题](https://stackoverflow.com/questions/10762484/ember-js-html5-drag-and-drop-shopping-cart-demo)的示例来创建可以在 Web 应用程序上使用的拖放脚本。

在为我自己的目的重新设计它之后，我想实现一些功能。我一直在为自己尝试一段时间，但我还没有找到解决方案......

相关的jsfiddle：http: [//jsfiddle.net/BLLTH/](http://jsfiddle.net/BLLTH/)

特征：

*   应该从可用列表中删除已添加的对象

*   通过单击“x”符号删除添加的对象，将其放回可用列表

*   对象必须与添加时的顺序相同

有任何想法吗？=)

模板：

```
<script type="text/x-handlebars" >  
<b>Available Objects</b><br /><br />
{{#each App.objectsController}}
    {{#view App.ObjectView contentBinding="this"}}
        {{view.content.name}}<br />
    {{/view}}
{{/each}}
<br /><br /><br /><br />
{{#view App.ObjectDropTarget dragContextBinding="App.objectsController.currentDragItem"}}
    {{#each App.cartController}}
        {{#view App.ObjectView contentBinding="this" class="single"}}                
            {{view.content.name}}
        {{/view}}
    {{/each}}  
{{/view}} 
```

​</p>

javascript:

```
App = Em.Application.create({});
DragNDrop = Em.Namespace.create();
DragNDrop.cancel = function(event) {
    event.preventDefault();
    return false;
};
DragNDrop.Draggable = Em.Mixin.create({
    attributeBindings: 'draggable',
    draggable: 'true',
    dragStart: function(event) {
        var dataTransfer = event.originalEvent.dataTransfer;
        dataTransfer.setData('Text', this.get('elementId'));
    }
});
DragNDrop.Droppable = Em.Mixin.create({
    dragEnter: DragNDrop.cancel,
    dragOver: DragNDrop.cancel,
    drop: function(event) {
        event.preventDefault();
        return false;
    }
});
App.Object = Em.Object.extend({
    name: null,
    isAdded: null
});
App.ObjectView = Em.View.extend(DragNDrop.Draggable, {
    tagName: 'div',
    // .setDragImage (in #dragStart) requires an HTML element as the first argument
    // so you must tell Ember to create the view and it's element and then get the 
    // HTML representation of that element.  
    dragStart: function(event) {
        this._super(event);
        // Let the controller know this view is dragging
        this.setPath('content.isDragging', true);
        // Set the drag image and location relative to the mouse/touch event     
    },
    dragEnd: function(event) {
        // Let the controller know this view is done dragging
        this.setPath('content.isDragging', false);
    }
});
App.ObjectDropTarget = Em.View.extend(DragNDrop.Droppable, {
    tagName: 'div',
    classNames: ['dropTarget'],
    classNameBindings: ['cartAction'],
    // This will determine which class (if any) you should add to
    // the view when you are in the process of dragging an item.
    drop: function(event) {
        var viewId = event.originalEvent.dataTransfer.getData('Text'),
        view = Em.View.views[viewId];
        // Set view properties
        // Must be within `Ember.run.next` to always work
        Em.run.next(this, function() {
            view.setPath('content.isAdded', !view.getPath('content.isAdded'));
        });
        return this._super(event);
    }
});
App.objectsController = Em.ArrayController.create({
    content: [
    App.Object.create({
        name: "Object 1",
        isAdded: false
    }),
    App.Object.create({
        name: "Object 2",
        isAdded: false
    }),
    App.Object.create({
        name: "Object 3",
        isAdded: false
    }),
    App.Object.create({
        name: "Object 4",
        isAdded: false
    })
    ],
    currentDragItem: Em.computed(function(key, value) {
        return this.findProperty('isDragging', true);
    }).property('@each.isDragging').cacheable(),
    objectsInCart: Em.computed(function(key, value) {
        return this.filterProperty('isAdded', true);
    }).property('@each.isAdded').cacheable()
});
App.cartController = Em.ArrayController.create({
    content: Em.computed(function(key, value) {
        var cartItems = this.get('cartItems');
        if (!Em.empty(cartItems)) {
            // Sort desc by name
            return cartItems.sort(function(a, b) {
                 if ((a.get('name').toLowerCase()) < (b.get('name').toLowerCase())) return -1;
                 else return 1;
            });
        }
    }).property('cartItems').cacheable(),
    cartItemsBinding: 'App.objectsController.objectsInCart'
 });​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:25:17.077

我在这里为您实现了前两个功能[http://jsfiddle.net/QE9CS/](http://jsfiddle.net/QE9CS/)

“应该从可用列表中删除已添加的对象”是通过在数组上创建另一个计算属性来实现的。

“通过单击“x”符号删除添加的对象，将其放回可用列表”仅使用标准 Ember {{action}} 帮助器。

编辑：

完整版[http://jsfiddle.net/R9hnY/](http://jsfiddle.net/R9hnY/) 我已经变成`isAdded`了一个计算属性，它设置对象的值并在正确的时间从 cartController 的内容中添加或删除对象。因此，为 cartController 提供了一个有序的对象数组以进行渲染。

# javascript - 在 ASP.Net MVC 控制器中捕获 ajax 文件

> ID：12799127
> 
> 赞同：3
> 
> 时间：2012-10-09T11:32:33.927
> 
> 标签：javascript, asp.net, file-upload, asp.net-mvc-4

我想使用 ajax 将文件上传到 ASP.Net MVC 控制器

我的 JavaScript 代码是这样的，基本上每次用户更改输入值时，它都会自动将文件上传到控制器

```
var formdata = false;
if (window.FormData) {
    formdata = new FormData();
}

$('input[name=default_export_filename]').change(function() {
    var i = 0, len = this.files.length, img, reader, file;

    for ( ; i < len; i++ ) {
        file = this.files[i];
        if (file.type.match(/spreadsheet/) || file.type.match(/ms-excel/)) {
            if ( window.FileReader ) {
                reader = new FileReader();
                reader.onloadend = function (e) { 
                    //showUploadedItem(e.target.result, file.fileName);
                };
                reader.readAsDataURL(file);
            }
            if (formdata) {
                formdata.append("default_export_filename", file);
            }
        }   
    }

    if (formdata) {
        $.ajax({
            url: root + mod + '/uploaddef',
            type: "POST",
            data: formdata,
            processData: false,
            contentType: false,
            success: function (res) {
                console.log(res);
            }
        });
    }
}); 
```

在控制器端，我无法使用它捕获该文件

```
 [HttpPost]
    public ActionResult UploadDEF(HttpPostedFileBase file)
    {
        var jsonData = new
        {
            response = 3
        };

        return Json(jsonData); ;
    } 
```

或这个

```
 [HttpPost]
    public ActionResult UploadDEF(FormCollectionfile)
    {
        var jsonData = new
        {
            response = 3
        };

        return Json(jsonData); ;
    } 
```

文件参数始终为空。但是在萤火虫中，我可以看到浏览器正在将文件发布到服务器。我应该用什么对象来捕获文件？

我意识到旧浏览器不支持 FormData 对象，但我的客户都使用最新的浏览器。所以这不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:10:44.127

问题已经解决了。

事实证明，我不必为控制器的方法提供任何参数。这些文件可通过 Request 对象获得。

谢谢大家

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:38:15.797

你不能使用ajax POST来上传这样的文件，必须是表单提交。

看看像[AjaxUploadify](http://www.uploadify.com)或类似的组件。

# asp.net - 使用 localhost 和主机名访问站点

> ID：12799130
> 
> 赞同：0
> 
> 时间：2012-10-09T11:32:36.363
> 
> 标签：asp.net, iis

我在 IIS 中有一个站点。我用主机名“aaa.com”定义了一个绑定。

我的问题是如何访问“http://localhost”并让它引用与[http://example.com](http://example.com)相同的路径，哪个有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:58:54.850

尝试编辑您的主机文件

打开文件（它可能在 C:\Windows\System32\drivers\etc 中）

找到以下行：

`# 127.0.0.1 localhost`

并将其更改为

`127.0.0.1 aaa.com`

# iphone - 当我尝试使用快照方法从 EAGLView 获取图像时出现空白图像

> ID：12799133
> 
> 赞同：0
> 
> 时间：2012-10-09T11:32:56.563
> 
> 标签：iphone, ipad, opengl-es, ios6, eaglview

> **可能重复：**
> [为什么 glReadPixels() 在 iOS 6.0 中的此代码中失败？](https://stackoverflow.com/questions/12528365/why-is-glreadpixels-failing-in-this-code-in-ios-6-0)

当我尝试在 iOS 6 中使用快照方法从 EAGLView 获取图像时出现空白图像。如何解决此问题？

这是快照方法的参考链接： [如何拍摄 OpenGL ES 视图的快照并将结果保存在 UIImage 中？](http://developer.apple.com/library/ios/#qa/qa1704/_index.html)

# linker - 错误：L6218E：未定义符号 __main（来自 anon$$obj.o）

> ID：12799134
> 
> 赞同：1
> 
> 时间：2012-10-09T11:33:00.317
> 
> 标签：linker, arm

我正在尝试使用 ARM 编译器进行编译。我写了一个简单的程序。

其中 C:\Source_Codes\2250_sdk\sdkfiles2delivery.....\arm_rvct22\include\windows\ 包含所有包含文件。

问题：我面临一些不寻常的链接器错误

=========================== main.c：1 个警告，0 个错误警告：L6310W：无法找到 ARM 库。错误：L6218E：未定义的符号 __0printf（引用自 main.o）。错误：L6218E：未定义符号 __main（引用自 anon$$obj.o）。已完成：0 条信息、1 条警告和 2 条错误消息。

=====================================

请帮助我

谢谢问候索宾托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T14:49:46.757

使用 Arm 编译器设置检查编译器标志和链接器标志。尝试使用 --verbose 来查找缺少哪个库。还要检查是否使用环境变量检查路径是否正确。

报告了此失败的主要原因。1\. 库未找到或丢失或路径不正确 2\. 将 c 代码编译为 C++ 导致找不到符号，识别 API 并尝试使用

```
 extern c{}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T21:55:15.257

尝试将`.c`文件添加到项目中：例如，如果您正在处理计时器，请添加`stm32f4xx_tim.c`到`User`文件夹并将其添加到您的项目目录中。

# javascript - 关于传递参数的 Javascript 基本问题

> ID：12799135
> 
> 赞同：0
> 
> 时间：2012-10-09T11:33:02.080
> 
> 标签：javascript, jquery, highcharts

我正在尝试使用 HighCharts 加载图表。

我创建了一个获取相关数据并创建新 garph 的函数，如果我手动获取数据并对其进行硬编码而不是使用参数来传递信息，一切都很好，但我不确定这种方式有什么问题我正在传递它们：

JSFiddle：http: [//jsfiddle.net/4GBNQ/](http://jsfiddle.net/4GBNQ/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:34:59.433

您将数据作为字符串传递，它需要作为数组传递，如下所示：

```
createGraph(
    "3333",
    "123123",
    ['04/10/2012','05/10/2012','06/10/2012','07/10/2012','08/10/2012','09/10/2012'],
    [98,98,97,96,96,94]
); 
```

[**更新的小提琴**](http://jsfiddle.net/4GBNQ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:38:44.473

如下更改您的代码

```
$(document).ready(function() {
createGraph("3333","123123",['04/10/2012','05/10/2012','06/10/2012','07/10/2012','08/10/2012','09/10/2012'],[98,98,97,96,96,94]); 
```

});

如果你观察到，我已经为你的数组删除了“”

# ruby-on-rails - 回形针不显示任何错误消息

> ID：12799139
> 
> 赞同：0
> 
> 时间：2012-10-09T11:33:22.200
> 
> 标签：ruby-on-rails, paperclip

> **可能重复：**
> [回形针不显示错误消息](https://stackoverflow.com/questions/12796703/paperclip-not-displaying-the-error-message)

我正在使用导轨 3.2.6。我在我的模型文件中添加了这个：

```
has_one :avatar, :as => :imageable, :dependent => :destroy
 validates_presence_of :avatar, :message => "can't be empty" 
```

但是，如果该字段留空，我不会收到任何错误消息。我只是`Please review the problems below:`在页面顶部。任何人都可以提出任何建议吗？

我也试过：

```
validates :avatar, :presence => {:message => 'Please select the image'} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:16:18.563

:avatar 字段不是真正的字段。检查 avatar_id，这是真正的数据库字段：

```
validates :avatar_id, :presence => true 
```

请参阅：[http](http://edgeguides.rubyonrails.org/active_record_validations_callbacks.html) ://edgeguides.rubyonrails.org/active_record_validations_callbacks.html第 3.9 节示例。

# android - 如何在android上升级sqlite数据库？

> ID：12799141
> 
> 赞同：0
> 
> 时间：2012-10-09T11:33:36.803
> 
> 标签：android, sqlite, android-contentprovider

我为我的 android 应用程序实现了一个 ContentProvider，它运行良好，但是当我对架构进行一些更改时，数据库似乎没有升级。我的 SQLiteOpenHelper 中有以下代码：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(DEBUG_TAG, "Upgrading database. Existing contents will be lost. ["
        + oldVersion + "]->[" + newVersion + "]");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_TUTORIALS);
    onCreate(db);
} 
```

如果我使用新架构更新我的应用程序，那么我的所有插入都会失败，但是如果我卸载旧版本并安装新版本的应用程序，那么一切正常。所以我猜永远不会调用 onUpgrade() 。oldVersion 和 newVersion 指的是什么？我需要在任何地方指定版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:37:57.830

SQLiteOpenHelper 有一个版本参数，如果你增加`onUpgrade`应该被调用：

```
public SQLiteOpenHelper (Context context, String name, SQLiteDatabase.CursorFactory factory, int version) 
```

例如，我有以下类，如果我增加`dbVersion`它被称为：

```
public class DBHelper extends SQLiteOpenHelper {

    private SQLiteDatabase m_Db;

    public DBHelper(Context context, String dbPath, int dbVersion) {

        super(context, dbPath, null, dbVersion);
        ...
        m_Db = getWritableDatabase();
    }
    ...
} 
```

# asp.net - 如何使用 ASP.NET 验证控件进行用户定义的验证？

> ID：12799144
> 
> 赞同：0
> 
> 时间：2012-10-09T11:33:38.583
> 
> 标签：asp.net, validation

在我的 FormView 上，我有 4 个属性。用户必须至少提供其中一项。有没有办法使用内置的 ASP.NET 验证器来验证它，还是我必须订阅 FormView 的 ItemUpdating/ItemInserting 事件，然后手动验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:36:41.060

我认为您必须订阅 FormView 的 itemupdating/itemInserting 事件并手动执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:39:02.180

没有用于此类验证的内置验证器。如果你想坚持框架验证控制行为，你可以在你的 web 表单上放置一个[CustomValidator并实现客户端和服务器验证例程。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)

# html - Django-Child template-Base.html 不呈现

> ID：12799145
> 
> 赞同：1
> 
> 时间：2012-10-09T11:33:40.213
> 
> 标签：html, django, django-templates

我在我的应用程序中使用 Django 模板系统，并且在子模板中我相应地引用了 {% extends "base.html" %}，尽管在重新渲染模板时，它只出现了 html 标签，没有 css 样式-因此完全没有选择 base.html 模板。请告知我做错了什么？找不到我的 base.html 模板的位置可能是个问题吗？

这是子模板代码：

```
{% extends "base.html" %}
{% block content %} 
{% for field in form %}
{{ form }} 
{% endfor %} 
{% endblock %} 
```

这是 base.html 模板代码（相关部分）：

```
<div id="content">
<h2>
                Page heading - This is where the functionality goes...
            </h2>
            <FIELDSET><INPUT class=Test value="Test" type=submit></FIELDSET>

            {% block primary %}{% endblock %}
</div> 
```

如果您需要更多信息来解决此问题，请告诉我。

-我将在今晚（伦敦时间）添加views.py--

*这一切都已排序，非常感谢您的帮助*

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:54:32.403

就像 goliney 提到的......你需要在你的 base.html 文件中有一个部分

```
{% block content %}
{% endblock %} 
```

然后，您可以在扩展 base.html 模板的其他模板中覆盖它。

目前在您的子模板中，您可以执行

```
{% block primary %}
whatever you want here and this would show up where you marked on the base.html template
{% endblock %} 
```

也不确定你是否只是在整理一个简单的例子。您将需要创建

```
<form action="" method="post">{% csrf_token %} 
for loop here
</form> 
```

# r - 是什么导致在 rfe 中选择了未定义的列？

> ID：12799150
> 
> 赞同：3
> 
> 时间：2012-10-09T11:33:53.607
> 
> 标签：r

我正在使用包中的`rfe`功能`caret`进行功能选择。我经常收到以下错误：

> '{中的错误：任务1失败-“在为函数'as.data.frame'选择方法时评估参数'x'时出错：`[.data.frame`（x，，保留，drop = FALSE）中的错误：选择了未定义的列'

我正在做 100 个样本，它运行了大约 60 个样本左右，然后才产生错误，我正在执行以下操作：

```
folds=100
validmethod='boot'
subsets=c(5,10,15,20,25)

ctrl <- rfeControl(functions = funcs,
                   method = validmethod,
                   rerank=TRUE,
                   saveDetails=TRUE,
                   verbose = TRUE,
                   returnResamp = "all",
                   number=folds)

rfe(df.preds,df.depend, metric=smetric,sizes=subsets, rfeControl=ctrl) 
```

有人可以帮助我了解会导致此错误的事物类型吗？

MWE：

```
df <- cbind(rbinom(100, 1, 0.5), rnorm(100, 0, 1), 
    rnorm(100, 5, 5), rnorm(100, 12, 4), rnorm(100, 100, 0.1))
colnames(df) <- c("response", "f1", "f2", "f3", "f4")
rfe(x=df[,-1], y=as.factor(df[,1]), sizes = 1:3,
    rfeControl = rfeControl(functions = caretFuncs, 
    number = 2, method = "cv"),method = "svmRadial") 
```

如何选择`sizes`？

# php - 如何在 EDIT FORM 中填充组合框

> ID：12799152
> 
> 赞同：0
> 
> 时间：2012-10-09T11:33:55.070
> 
> 标签：php, mysql, forms, combobox

请帮我。我在这里包括（见下文）插入表单的组合框脚本我有一个添加新产品的表单。选项之一是选择什么类别。因此，Combobox 用于从中选择类别。

```
<TD>

<?php

$sql="SELECT categories.id as id, categories.name as name FROM categories";
$result=mysql_query($sql) or die(mysql_error());

$options="";

while ($row=mysql_fetch_assoc($result)) {
$id=$row["id"];
$thing=$row["name"];
$options.= " <OPTION VALUE=".$id.">".$thing.'</option>';
    }

?>

<select name="CATEGORY" onClick=”submitCATEGORY();”&gt;
 <option value="0">Select Category
 <?php echo $options;?></option>

</select>   
</TD> 
```

现在，我想要一个使用与使用组合框在数据库中插入数据相同的脚本的 EDIT FORM。

`<?php echo $CATEGORY; ?>`此脚本用于从数据库中检索数据。

请帮我找到一种方法，当我想编辑产品信息以使用我在插入数据期间选择的选项获取组合框时......我可以成功填写产品名称和其他信息的数据，只有组合框是空的。我希望你能理解我想要达到的目标！提前感谢您的宝贵时间！！！

请参阅下面我尝试但未成功的内容：

```
<?php
$sql="SELECT categories.id as id, categories.name as name FROM categories";
$result=mysql_query($sql) or die(mysql_error());

$options="";
while ($row=mysql_fetch_assoc($result)) {
$id=$row["id"];
$thing=$row["name"];
$options.= " <OPTION VALUE=".$id.">".$thing.'</option>';
        }
    ?>
    <select name="CATEGORY" onClick=”submitCATEGORY();”&gt;
<option value="<?php echo $CATEGORY; ?>">
<?php echo $options;?></option>
</select>
</TD> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:51:40.423

在您的编辑页面中尝试以下操作，

```
<?php
 $CATEGORY = 3; //from DB table, consider 3 as category id for sample

 $sql="SELECT categories.id as id, categories.name as name FROM categories";
 $result=mysql_query($sql) or die(mysql_error());

 $options="";
 while ($row=mysql_fetch_assoc($result)) {
    $id=$row["id"];
    $thing=$row["name"];
    $isSel = ($CATEGORY == $id)?"selected":'';
    $options.= " <OPTION VALUE='$id' $isSel>$thing</option>';
 }
 ?>
 <select name="CATEGORY" onClick=”submitCATEGORY();”&gt;
 <option value="<?php echo $CATEGORY; ?>">
 <?php echo $options;?></option>
 </select>
 </TD> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:44:41.803

如果我理解正确，那么在编辑表单上，您应该使用“已选择”标签标记应选择的选项：

```
<Option value="2" selected="selected">2</Option> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:53:53.250

试试这个..如果我理解正确的话：-

```
<option value="your_id" <?php echo $CATEGORY == your_id ?'selected':'';?>>your_category_name</option> 
```

这里 $CATEGORY 将是从表中检索数据

对于您的编辑页面，您应该这样做：-

```
<option value="1" <?php echo $CATEGORY == 1 ?'selected':'';?> ><?php echo $options;?></option> 
```

# symfony - PHP 致命错误：带有消息清单的未捕获异常 PharException

> ID：12799154
> 
> 赞同：4
> 
> 时间：2012-10-09T11:33:56.657
> 
> 标签：symfony, command-line, symfony-2.1, composer-php

尝试 `composer.phar`通过命令行安装时出现错误

```
 PHP Fatal error: Uncaught exception 'PharException' with message manifest cannot be larger than 100 mb in phar 
```

请支持我解决这个问题，我正在尝试安装`symfony2.1`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T12:26:12.610

由于某种原因，您的 phar 似乎已损坏。[尝试从https://getcomposer.org/download/](https://getcomposer.org/download/)下载一个新快照 - 如果 CLI 说明不适合您，您可以从[https://getcomposer.org/composer.phar手动下载最后一个快照](https://getcomposer.org/composer.phar)

# .net - TraceSource.Trace 方法是否会阻塞调用线程，直到它被所有侦听器处理？

> ID：12799158
> 
> 赞同：3
> 
> 时间：2012-10-09T11:34:13.367
> 
> 标签：.net, multithreading, trace, tracelistener

我是 .net 跟踪的新手。

我的应用程序中有近 10 到 15 个跟踪源，在共享侦听器列表中有一个文本文件侦听器和 sql 服务器侦听器。我的问题是如果我打电话

```
 traceSource.TraceInformation("Sample information") 
```

然后调用线程将被阻塞，直到它被文本文件侦听器和 sql server 侦听器处理/跟踪。或者 TraceSource 内部包含任何日志队列，这样调用线程将立即被释放，日志将在后台线程中完成。

基本上我不希望调用线程被阻塞，直到它被所有跟踪侦听器记录。如果我想这样实现，那么我应该使用自定义侦听器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:39:49.607

您的跟踪仅与您的侦听器一样多线程安全。如果许多线程试图通过跟踪写入同一个文件，可能会发生争用，如果当前日志文件已经打开，一些侦听器将写入另一个日志文件。我从写入控制台跟踪侦听器的经验中知道，有时文本会在两个线程尝试同时写入控制台时交错。这对我来说意味着 System.Diagnostics 框架代码中的任何内容都不会强制阻塞。

要测试慢速侦听器块，您可以通过实现自定义侦听器凭经验确定，我推荐[这个基类](http://essentialdiagnostics.codeplex.com/SourceControl/changeset/view/3e11e4ac6474#Essential.Diagnostics/Diagnostics/TraceListenerBase.cs)，因此您实际上最多只需要重写两个方法来编写自定义侦听器。添加一个 Thread.Sleep(6000) 并查看是否所有线程都阻塞。

如果是这样，您可能需要考虑将跟踪调用放入某种即发即弃的调用中，可能是 Task.Run、Task.StartNew 或新的 Thread/Start。但是，我怀疑创建新线程的开销可能会使性能比阻塞几毫秒更差。[这是一个相关的问题](https://stackoverflow.com/questions/8742371/fire-and-forget-db-logging-with-asp-net)。

# matlab - 是否有 Matlab 函数可以将任何数据结构转换为字符串？

> ID：12799161
> 
> 赞同：7
> 
> 时间：2012-10-09T10:22:15.147
> 
> 标签：matlab

我正在寻找一个在 Matlab 中用于错误消息的函数，如下所示：

```
error(['Invalid value for someVariable: ' wantedFunction(someVariable)]); 
```

我希望`wantedFunction`能够同时使用字符串、数组、单元格数组，最好是结构数组。

目前，我正在使用`num2str`，但这不适用于单元格。我以为我想要的可以用 来完成`sprintf`，但我还没有弄清楚怎么做。我想我可以编写自己的函数，但如果在 Matlab 中已经有办法做到这一点，那将是多余的。有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T12:29:43.433

是的，虽然这并不简单。您必须将 与`disp`结合使用`evalc`：

```
string = evalc(['disp(someVariable)']) 
```

您可以将其转换为更易于管理的形式：

```
toString = @(var) evalc(['disp(var)']); 
```

因此，对于您的示例：

```
>> var = {rand(3,1), 'A', struct('test', 5)};
>> error(['Invalid value for var: ' toString(var)])

??? Invalid value for var:     [3x1 double]    'A'    [1x1 struct] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T14:55:49.307

想一想，我记得很久以前做过的事情与 angainor 在他的回答中所做的非常相似。我会在这里为任何有兴趣将任意事物转换为字符串的人发布它，并且通常可以更好地控制转换的完成方式。

它支持空、逻辑、字符、函数句柄、数字、单元格、结构（数组）和用户定义的类（下次更新中的稀疏数组）。

**编辑：**我已将此作为更新的模板，我最终将其放在[文件交换](http://www.mathworks.com/matlabcentral/fileexchange/38566-string-representations-for-most-data-types)中。随意尝试和修改以满足您的需求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T11:51:12.323

不，没有这样的功能。我遇到了类似的问题，所以这是我使用的一个非常基本的功能。意识到它并不完整。例如，它不会以有意义的方式输出结构的字段，但可以轻松添加。您可以将其视为基本实现并满足您的需求。

```
function ret = all2str(param)
if isempty(param)
    if iscell(param)
        ret = '(empty cell)';
    elseif isstruct(param);
        ret = '(empty struct)';
    else
        ret = '(empty)';
    end
    return;
end

if ischar(param)
    ret = param;
    return;
end

if isnumeric(param)
    ret = num2str(param);
    return;
end

if iscell(param)
    ret = all2str(param{1});
    for i=2:numel(param)
        ret = [ret ', ' all2str(param{i})];
    end
    return;
end

if isstruct(param)
    ret = '(structure)';
    return;
end
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-31T08:15:43.237

看起来很奇怪，但是

```
str = matlab.unittest.diagnostics.ConstraintDiagnostic.getDisplayableString(value) 
```

而是使用那种不美观`evalc(disp())`的方法为您完成工作。

# css - css nav - css 三角形

> ID：12799164
> 
> 赞同：0
> 
> 时间：2012-10-09T11:34:30.997
> 
> 标签：css, sass

![试图创造这个](../Images/0d5cf8a1424197323fb67dcbadc8ccf5.png)

需要一些帮助

这是目前的情况（我已经删除了响应部分）

[现在陈述](http://jsfiddle.net/pvdVn/3/)

基本上我被困在如何创建下拉三角形，以便它工作，并居中。- 导航来自 cms，所以我无法确定导航点的确切尺寸（宽度）

基本上我似乎大脑崩溃了，需要帮助！

ps - css 来自 compass / sass 使用 skelton

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:05:41.463

现在可以使用伪类处理三角形。

看看这个小提琴的想法：

[http://jsfiddle.net/carlosmartinezt/PwEyq/](http://jsfiddle.net/carlosmartinezt/PwEyq/)

但是，在您的情况下，您还需要三角形中的边框，这使得它更难。我认为最快的解决方案是使用图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:01:25.907

好的，可以使用以下内容 - 更新了我的 jsfiddle

```
.keith > li:hover {
  position: relative; background: #ffffff; border: 1px solid #005381;
  color:#005381;
  z-index: 100000;
}
.keith > li:hover:after, .keith > li:hover:before {
  top: 100%; border: solid transparent; content: " "; height: 0; width: 0; position:   absolute; pointer-events: none;
}
.keith > li:hover:after { border-color: rgba(255, 255, 255, 0); border-top-color: #ffffff; 
border-width: 10px; left: 50%; margin-left: -10px; }
.keith > li:hover:before { border-color: rgba(0, 83, 129, 0); 
border-top-color: #005381; border-width: 11px; left: 50%; margin-left: -11px; } 
```

# mercurial - 禁止 hg push -f - 但允许 hg pull 创建新头

> ID：12799177
> 
> 赞同：0
> 
> 时间：2012-10-09T11:35:26.983
> 
> 标签：mercurial, mercurial-hook

作为[Mercurial 的后续行动：在“hg commit”之前强制执行“hg pull -u”](https://stackoverflow.com/questions/10175538/mercurial-enforce-hg-pull-u-before-hg-commit) 我已经开始使用钩子

```
[hooks]
pretxnchangegroup.forbid_2heads = /usr/local/bin/forbid_2head.sh 
```

forbid_2head.sh 看起来像这样

```
#!/bin/bash 
BRANCH=`hg branch`
COUNT=`hg heads --template '{branch}|{rev}\n' | grep ^${BRANCH} | wc -l` 
if [ "$COUNT" -ne "1" ] ; then 
   echo "=========================================================="
   echo "Trying to push more than one head, which is not allowed"
   echo "You seem to try to add changes to an old changeset!"
   echo "==========================================================" 
   exit 1 
fi 
exit 0 
```

它是在[http://tutorials.davidherron.com/2008/10/forbidding-multiple-heads-in-shared.html](http://tutorials.davidherron.com/2008/10/forbidding-multiple-heads-in-shared.html) 中找到的脚本的派生，我确实允许多个命名分支。

我现在遇到的问题是

*   它停止了 hg push -f 这就是我想要的
*   如果有传入的变更集并且我有提交传出，它也会停止 hg pull。这确实很糟糕

我可以以任何方式重用相同的脚本，但更改挂钩设置并停止“hg push -f”吗？或者我可以在 forbid_2head.sh 中知道这是正在运行的推送命令还是拉取命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:20:33.283

首先，该脚本并不完全正确：它只是计算当前在服务器（那个`hg branch`）报告上签出的分支中的头数。你可以通过使用来改进它

```
hg heads tip 
```

得到分支的负责人`tip`。但是有人可能一次将变更集推送到多个分支上，所以你真正想要的是

```
hg heads --template '{branch}\n' $HG_NODE:tip 
```

找到所接触的分支的分支头`$HG_NODE:tip`（在尚未提交的事务中推送的变更集）。然后，您可以将其与

```
hg log --template '{branch}\n' -r $HG_NODE:tip | sort -u 
```

这是变更组触及的分支。

如果您不想允许现有的多个头，那么您可以将上面的内容简化为

```
$(hg heads --template 'x' | wc -c) -eq $(hg branches | wc -l) 
```

它只是测试分支头的数量是否等于分支的数量——即每个命名分支恰好有一个分支头。

顺便说一句，让我提一下`$HG_SOURCE`。该环境变量由 Mercurial 在运行钩子时设置：`push`如果更改组使用直接文件系统访问被推送到存储库中，则它具有值，如果`serve`更改组通过 SSH 或 HTTP 进入，则具有值。请参阅[Mercurial 书](http://hgbook.red-bean.com/read/handling-repository-events-with-hooks.html#sec%3ahook%3asources)。

所以，总而言之，我相信这是一个很好的“禁止多头”脚本：

```
#!/bin/sh
HEADS=$(hg heads --template 'x' | wc -c)
BRANCHES=$(hg branches | wc -l)
test $HG_SOURCE = 'serve' -a $HEADS -ne $BRANCHES 
```

# objective-c - 设备方向不适用于我的应用

> ID：12799178
> 
> 赞同：3
> 
> 时间：2012-10-09T11:35:38.327
> 
> 标签：objective-c, xcode, uiinterfaceorientation

我在实现设备方向方法时遇到问题。我正在实施它

跟随

```
-(BOOL)shouldAutorotate{

    return TRUE;

    }

    -(NSUInteger)supportedInterfaceOrientations{

    return UIInterfaceOrientationMaskAll;

    } 
```

在 tha appdelegate 我正在做

```
self.window.rootViewController = self.splitViewController; 
```

我希望我的应用程序适用于所有方向。但是任何方向都不起作用

正确。有什么帮助吗？我的应用程序是针对 IOS 4.3 的，但它也应该适用于 IOS 5 和 6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:39:47.047

首先，在 AppDelegate 中，这样写。这是非常重要的

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
     return (UIInterfaceOrientationMaskAll);
} 
```

此外，很大程度上取决于您的 UIViewController 嵌入到哪个控制器中。

例如，如果它在 UINavigationController 中，那么您可能需要继承该 UINavigationController 以覆盖这样的方向方法。

子类 UINavigationController（层次结构的顶部视图控制器将控制方向。）需要将其设置为 self.window.rootViewController。

```
- (BOOL)shouldAutorotate
 {
     return self.topViewController.shouldAutorotate;
 }
 - (NSUInteger)supportedInterfaceOrientations
 {
     return self.topViewController.supportedInterfaceOrientations;
 } 
```

从 iOS 6 开始，UINavigationController 不会向其 UIVIewControllers 请求方向支持。因此我们需要对它进行子类化。

# windows - Watir-webdriver 结果与手动测试不同

> ID：12799179
> 
> 赞同：1
> 
> 时间：2012-10-09T11:35:38.487
> 
> 标签：windows, internet-explorer, watir, sap-enterprise-portal

...或者什么时候点击不是点击..？

我正在使用 cucumber 和 watir-webdriver 测试 SAP Enterprise Portal。

在手动测试期间，我观察到门户的行为符合预期。在黄瓜测试（相同的用户+通过）期间，门户的行为不同，我的测试失败。

更具体地说：门户中有一个书签，在手动测试期间具有正确的 URL，但在自动测试期间它指向“/irj/portalapps/com.sap.portal.navigation.helperservice/html/child.html” . 此弹出窗口始终为空白...

我使用 WinXP+IE7 和 Win7+IE8 得到这个。

是否有任何证据表明 webdriver 对用户的行为不同？

* * *

我试图在 SAP Enterprise Portal 中自动化测试。SAP EP 的挑战在于 HTML 由多个嵌套的、动态的`<iframes>`- 有时 10+ 深！由于这个原因，我不得不放弃 cucumber/watir-webdriver 并使用 SAP EP 插件切换到 HP QTP。

我随后发表的评论是为了分享 gem 版本 - 我的格式都错了，它们看起来像是一些垃圾邮件机器人正在攻击该网站......我正在考虑删除它们，但我不确定这是否会有所帮助.

# asp.net-mvc - 返回类别列表 nopCommerce

> ID：12799180
> 
> 赞同：0
> 
> 时间：2012-10-09T11:35:43.613
> 
> 标签：asp.net-mvc, nopcommerce

我正在尝试使用 nopCommerce 返回 2 个列表，这两个列表都是只读的，我正在寻找最简单的方法，因为我正在编写一个 Metro 应用程序并且我真的不想花数周时间学习 MVC 。第一个列表是来自基础 nopCommerce 平台的类别列表，第二个列表是产品列表。两个列表都需要作为 JSON 返回给调用客户端。

我有两个问题：

1.  有没有一种方法可以在不调用自定义代码的情况下获取此列表？
2.  我使用以下代码编写了一个插件

    ```
    using System.Collections;
    using System.Collections.Generic;
    using System.Web.Mvc;
    using Nop.Core;
    using Nop.Core.Domain.Catalog;
    using Nop.Services.Catalog;
    using Nop.Services.Customers;
    using Nop.Core.Plugins;

    namespace Nop.Plugin.Other.ONWWW.Controllers
    {
        public class ONWWWController : Controller
        {
            public  ICategoryService _categoryService;

            public ONWWWController(ICategoryService categoryService)
            {
                this._categoryService = categoryService;
            }

            public ActionResult Index()
            {
                return Json(_categoryService.GetAllCategories(), JsonRequestBehavior.AllowGet);
            }

        }

    } 
    ```

    为什么，当我运行代码时，出现以下错误？

    > 没有为此对象定义无参数构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T19:24:19.433

问题 1：您最好的选择是原始源代码中的*Nop.Plugin.Misc.WebServices*插件。

问题 2：您是否看到您拥有的唯一构造函数是

```
public ONWWWController(ICategoryService categoryService) 
```

哪个必须接受参数？换句话说，您没有正确注册依赖项。尝试查看任何默认插件中的*DependencyRegistrar.cs文件之一。*例如，Nop.Plugin.Misc.MailChimp 插件有一个可以*参考*的*DependencyRegistrar.cs 。*

:)

# css - 大图导致浏览器滚动

> ID：12799185
> 
> 赞同：0
> 
> 时间：2012-10-09T11:35:57.280
> 
> 标签：css, cross-browser

我的页面上的大图像出现问题，我似乎无法避免它在某些浏览器上导致滚动。到目前为止，我只能在 Safari 上看到它，但我的朋友显然也在 Chrome 上看到了它。

我所做的就是将图像绝对定位在其容器内，然后将其向右移动，使其实际上位于容器和包装器之外。问题是，它的图像相当大，因此在某些浏览器中，您可以向右滚动以显示图像的其余部分。这是代码。

```
<html>
<head>
    <style>
        body{
            background: aqua;
            margin: 0;
            overflow-x: hidden;
        }
        #wrapper{
            background: #fff;
            width: 960px;
            height: 100%;
            margin: 0 auto;
        }
        #content{
            width: 960px;
            height: 500px;
            background: yellow; 
            position: relative;
        }
        #image{
            position: absolute;
            bottom: 0;
            right: -320px;
            z-index: 0;
            width: 1210px;
            height: 468px;
            background: red;
        }
    </style>
</head>
<body>
    <div id="wrapper">
        <div id="content">
            <div id="image"></div>
        </div>
    </div>
</body>
</html> 
```

和继承人deomonstrates它的小提琴：http: [//jsfiddle.net/alsweeet/5mqHf/](http://jsfiddle.net/alsweeet/5mqHf/)

在 body 样式中添加 overflow-x:hidden 似乎可以解决大多数浏览器中的问题，但不是 safari。你会看到我还没有在fiddle demo中添加这个，一旦你添加了它，你将无法再左右滚动，这就是我试图实现跨浏览器的效果。

我肯定会对此提出一些建议。我敢肯定，可能有比绝对定位更好的方法来做到这一点。

谢谢！

也好

编辑：Chrome 上也出现问题，滚动条被隐藏，但您仍然可以横向滚动。尽管如此，在火狐中仍然可以正常工作。

编辑：这是一个屏幕截图，以帮助解释我在没有任何侧滚动的情况下要实现的目标。红色框是导致侧滚动的框。您可以看到红色框在 960 包装器之外。

![在此处输入图像描述](../Images/8ccd0b4ce61675e7f728b3fb17b0245d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:56:07.160

overflow-x: 不完全跨浏览器兼容，请尝试使用`overflow:hidden;`，只要您不需要在元素上垂直滚动，那么这永远不会给您带来问题。

在一个元素上设置溢出-y 并在另一个元素上限制溢出-x 的解决方法是这个小提琴。

[http://jsfiddle.net/5mqHf/7/](http://jsfiddle.net/5mqHf/7/) - 修复图像位置

对此的一个考虑是，如果您要垂直滚动，当查看图像元素的宽度时，您需要考虑滚动条的 wdtih 以避免水平滚动条，这通常在 15px 和 30px 之间变化，具体取决于浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:25:19.570

这就是你要找的东西？

**演示**

[http://jsfiddle.net/5mqHf/4/](http://jsfiddle.net/5mqHf/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:12:22.947

请看一看。是否符合您的要求。如果没有，请告诉我，以便我可以尝试更多。

**演示**

[http://jsfiddle.net/saorabhkr/FyJ4F/](http://jsfiddle.net/saorabhkr/FyJ4F/)

# javascript - 如何在标签中编写javascript代码

> ID：12799186
> 
> 赞同：0
> 
> 时间：2012-10-09T11:35:57.343
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:39:40.023

使用 jQuery，你可以这样做：

```
<a href="edit-source.php" class="edit-btn">Edit</a> 
```

```
var id = 10;
var href = $(".edit-btn").prop("href");
$(".edit-btn").prop("href", href + "?source=" + id); 
```

我假设您在呈现代码之前不知道`id`，否则这是没有实际意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:43:52.613

在普通 JS 你可以做

```
<script>
var souceID="somesource"; // this is of course assumed
document.write('<a href="edit-source.php?source='+sourceID+'">Edit</a>')
</script> 
```

或者

```
<a href="#" onclick="this.href='edit-source.php?source='+sourceID">Edit</a> 
```

使用 OP 评论中的此代码：

```
<div id="popuppage" data-role="popup" data-overlay-theme="a" style="max-width:250px;">    
  <ul data-role="listview" data-inset="true" data-dividertheme="d" data-theme="c" style="min-width:210px;"> 
    <li data-icon="gear" class="cust-popuplist" id="popupSourceID"> 
       <a href="#"
       onclick="
         this.href='edit-source.php?source='+
           encodeURIComponent(document.getElementById('srcvalue').value);
       ">Edit</a> 
       <input type="hidden" name="srcvalue" id="srcvalue" value="somevalue"> 
    </li> 
   </ul> 
</div> 
```

或者这个怎​​么样：根本不需要 JS

```
<form action="edit-source.php">
<input type="hidden" name="source" value="<?php echo $srcvalue; ?>" />
<input type="submit" value="Edit" />
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:39:34.283

您不能将标签放在属性值内。

这是一个丑陋的解决方案。这也可以通过在页面首次加载时转储变量来实现。如果你有变量，那么你可以使用 PHP 来插入它。

我猜您想响应用户输入，因此应该将变量添加到链接中。您需要一种完全不同的方法，在适当的时间设置整个 href 属性。

# asp.net - 如何使用c#在asp.net中逐个标签读取远程网页标签的内容？

> ID：12799187
> 
> 赞同：0
> 
> 时间：2012-10-09T11:36:11.717
> 
> 标签：asp.net, url, remote-access

我想使用 C# 在 asp.net 中读取远程网页的内容。我已经使用 asp.net 中的以下代码阅读了它。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        string TheUrl = "http://www.demosite.com/Default.aspx";
        string response = GetHtmlPage(TheUrl);
        Response.Write(response);

    }
static string GetHtmlPage(string strURL)
    {

        String strResult;
        WebResponse objResponse;
        WebRequest objRequest = HttpWebRequest.Create(strURL);
        objResponse = objRequest.GetResponse();
        using (StreamReader sr = new StreamReader(objResponse.GetResponseStream()))
        {
            strResult = sr.ReadToEnd();
            sr.Close();
        }
        return strResult;
    } 
```

在这里，我得到了远程网页的全部内容，现在我想逐个标签地读取内容标签并只获取它的内容。可能吗？

帮助赞赏...！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:38:43.130

使用[HTML Agility 包](http://htmlagilitypack.codeplex.com/)遍历元素。这是解析 HTML 的最佳方式。

您应该能够获得所有文本节点

```
doc.DocumentNode.SelectNodes("//text()[normalize-space(.) != '']") 
```

# android - 如何在来电时激活广播接收器并使用 ITelephony 切断通话？

> ID：12799192
> 
> 赞同：1
> 
> 时间：2012-10-09T11:36:38.393
> 
> 标签：android

我在我的代码（即`ITelephony`）中使用了 Android SDK 的隐藏 API，但我的广播接收器类在来电时没有激活。因此，我的通话没有结束。

我在活动中使用了广播接收器，因为我想将活动的上下文用于某些显示目的。我不明白问题出在哪里！请帮忙。

```
 package com.example.callprio;

 import java.lang.reflect.Method;
 import android.app.Activity;
 import android.app.ActivityManager;
 import android.content.BroadcastReceiver;
 import android.content.Context;
 import android.content.Intent;
 import android.content.IntentFilter;
 import android.database.Cursor;
 import android.net.Uri;
 import android.os.Bundle;
 import android.provider.ContactsContract;
 import android.telephony.PhoneStateListener;
 import android.telephony.SmsManager;
 import android.telephony.TelephonyManager;
 import android.util.Log;
 import com.android.internal.telephony.ITelephony; 

 public class MyCallBroadcastReceiver extends Activity

 {
private static final boolean USE_ITELEPHONY = true;

/**
    * AIDL access to the telephony service process
    */
    private ITelephony telephonyService;  

    private BroadcastReceiver receiver=new BroadcastReceiver()
    {

     private String id;

public void onReceive(Context context, Intent intent) {

     telephony = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);

     MyPhoneStateListener customPhoneListener = new MyPhoneStateListener();

    telephony.listen(customPhoneListener, PhoneStateListener.LISTEN_CALL_STATE);

    Bundle bundle = intent.getExtras();
     phone_number = bundle.getString("incoming_number");
    System.out.println("Phone Number : " + phone_number);
    Log.i("phone_number", phone_number);

    Uri myPhoneUri = Uri.withAppendedPath(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI, phone_number);

    // Query the table
    Cursor phoneCursor = MyCallBroadcastReceiver.this.getContentResolver().query(
            myPhoneUri, null, null, null, null);

    // Get the phone numbers from the contact
    for (phoneCursor.moveToFirst(); !phoneCursor.isAfterLast();                
phoneCursor.moveToNext())
    {
   // Get a phone number id
        id = phoneCursor.getString(phoneCursor
                .getColumnIndexOrThrow(ContactsContract.CommonDataKinds.Phone._ID));

        Log.i("Contact_id", id);
    //    sb.append("Phone: " + phoneNumber + "\n");
    }       

    connectToTelephonyService();

    Log.i("After connectToTelephonyService()", "Telephony service connected");

    fetchPrioById(id);
}
};

private TelephonyManager telephony;

private MyPhoneStateListener customPhoneListener;

private String phone_number;

public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
//setContentView(R.layout.main);
}
@Override
protected void onResume() {
this.registerReceiver(receiver, new IntentFilter("android.intent.action.PHONE_STATE"));
super.onResume();
}

@Override
protected void onPause() {
this.unregisterReceiver(receiver);
super.onPause();
}

protected void onDestroy() {
telephony.listen(customPhoneListener, PhoneStateListener.LISTEN_NONE);
}

/** 
 * get an instance of ITelephony to talk handle calls with 
 */
@SuppressWarnings("unchecked") private void connectToTelephonyService() {
    try 
    {
    // "cheat" with Java reflection to gain access to TelephonyManager's ITelephony 
            Class c = Class.forName(telephony.getClass().getName());
            Method m = c.getDeclaredMethod("getITelephony");
            m.setAccessible(true);
            telephonyService = (ITelephony)m.invoke(telephony);

    } catch (Exception e) {
         e.printStackTrace();
         Log.e("TAG",
                 "FATAL ERROR: could not connect to telephony subsystem");
         Log.e("TAG", "Exception object: " + e);
        finish();
    }               
}

protected void fetchPrioById(String id) {

int prio=0;

int cid=Integer.parseInt(id);
 String query="SELECT priority FROM Call WHERE contact_id="+cid;

  DatabaseAdapter databaseAdapter = new DatabaseAdapter(getApplicationContext());
  databaseAdapter.open();

 Cursor cursor=null;

  cursor= databaseAdapter.getSQLiteDatabase().rawQuery(query,null);

  if (cursor != null)
     {
      //that means priority is assigned take prio from table
      if (cursor.moveToFirst())
         {
       prio = cursor.getInt(cursor.getColumnIndex("priority"));  
         }
     }

  if(prio==0)
  {
      ignoreCall();
  }
  else if(prio==1)
  {
      onSilent(); 
  }
  else if(prio==3)
  {
     sendMessage();
  }

  else if (cursor == null)
  {
      //means priority is not assigned so default behaviour i.e. lower prio
   ignoreCall();      
  }

  cursor.close();
  databaseAdapter.open();

}//FetchFunc

private void sendMessage() {
// TODO Auto-generated method stub
ignoreCall();
String message="I am in meeting,Call you later";
SmsManager smsManager = SmsManager.getDefault();
smsManager.sendTextMessage(phone_number, null, message, null, null);
}

private void onSilent() {
telephonyService.silenceRinger();
}

private void ignoreCall() {
if (USE_ITELEPHONY)
        ignoreCallAidl();
else
        ignoreCallPackageRestart();
}

 /**
  * package restart technique for ignoring calls 
   */
 private void ignoreCallPackageRestart() {
    ActivityManager am = (ActivityManager)getSystemService(ACTIVITY_SERVICE);
    am.restartPackage("com.android.providers.telephony");
    am.restartPackage("com.android.phone");
 }

/** 
  * AIDL/ITelephony technique for ignoring calls
 */
 private void ignoreCallAidl() {
    try 
    {
            telephonyService.silenceRinger();
            telephonyService.endCall();
    } 
    catch(Exception e) 
    {
            e.printStackTrace();
            Log.e("EXCEPTION","FATAL ERROR: call to service method endCall failed.");
            Log.e("TAG", "Exception object: " + e);
    }
}       

}//class Activity ends here 
```

# php - 使用 preg_replace 函数不会在 mysql 中插入

> ID：12799195
> 
> 赞同：0
> 
> 时间：2012-10-09T11:36:44.693
> 
> 标签：php, mysql, codeigniter

我使用 preg_replace 函数，它可以正常工作，但是当我插入数据库 (MYSQL) 时，它会以原样插入（我的 % " " name is & sourov, datta.）而不是 "My name is sourov, datta."。数据库没有正确插入的原因是什么？

```
<?php

$des='My   %   name is   & sourov, datta.';
$des = preg_replace('/[^a-zA-Z0-9\,\.]/', ' ', $des);
echo $des; //output will : My name is sourov, datta.
$data = array(
           'title' => $des,
        );

$this->db->insert('mytable', $data); 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:25:16.693

该模式产生以下输出：

```
My         name is     sourov, datta. 
```

你需要的是这样的：

```
$des = preg_replace('/[^a-zA-Z0-9,\.]+/', ' ', $des); 
```

请注意`+`以下字符组。如果您仍然在数据库中获取原始字符串，那么您做的事情不对，但这将不再是问题。

# c# - 适用于 Windows 应用商店应用的 ServicePoint.Expect100Continue

> ID：12799196
> 
> 赞同：2
> 
> 时间：2012-10-09T11:36:46.007
> 
> 标签：c#, windows, wcf, windows-8, windows-runtime

正如标题所说，我需要为我的应用将此标志设置为 false，如下所示：

```
 ServicePoint.Expect100Continue = false; 
```

但是 ServicePoint 和 ServicePointManager 都无法访问，我找不到另一种设置此属性的方法。此外，没有 app.config，因此也无法通过配置进行设置。

如果我没有将其设置为 false，则在请求中发送标志并发生 CommunicationException。

我无法更改服务器代码，我只是服务器数据的消费者。

使用“添加服务引用”对话框添加服务。任何方法调用都会导致：

```
The underlying connection was closed: An unexpected error occurred on a receive. 
```

当我调用从控制台应用程序中添加“添加服务引用”的相同服务时，会出现相同的错误。原因是 Expect100Continue 属性。如果我[使用通常的方法](http://blogs.msdn.com/b/fiddler/archive/2011/11/05/http-expect-continue-delays-transmitting-post-bodies-by-up-to-350-milliseconds.aspx)删除它，它可以在控制台应用程序中使用。

所以，我想知道 Windows Store 应用程序的等价物是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:57:15.760

我最终从“添加服务引用”中获取自动生成的类并自己序列化它们。然后我使用 HttpClient 拨打电话。可以像这样设置 ExpectContinue 标志：

```
 using (HttpClient client = new HttpClient())
 {
      client.DefaultRequestHeaders.ExpectContinue = false;

      ....code!
 } 
```

# database - 找到连接表格的有效方法

> ID：12799197
> 
> 赞同：0
> 
> 时间：2012-10-09T11:36:50.773
> 
> 标签：database, sql-server-2008, database-design, join, relational-database

这是问题所在：我们有 3 个表（MS SQL 2008 R2）：

表 1 FILMS（带薄膜的表）

表 2 歌曲（有歌曲的表）

表 3 标题

由于“电影”和“歌曲”可以包含多个标题（我有很多不同语言的标题），我想将所有标题保留在单独的“标题”表中。Films 和 Songs 表中的主键基于 [int] 标识规范，增量为 +1。

例如：我们可以拥有 ID=3 的电影和歌曲。

如何将“Titles”表与“Films”和“Songs”连接起来？

PS我试图通过添加一个带有公式的新列[idKey]来创建唯一键，以电影和歌曲

对于电影来说`(CONVERT([nvarchar](10),[ID],(0))+'f')`

对于歌曲来说`(CONVERT([nvarchar](10),[ID],(0))+'s')`

其中 [ID] 是他们的身份规范但我无法将此列标记为主键

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:08:06.270

即使您在这三个表之间没有外键约束，您也可以通过加入三个表来获取数据。

```
 SELECT title.*, film.*,songs.* 
 FROM title t JOIN film f
    ON t.title_name = f.title_name
 JOIN songs s
    ON t.title_name = s.title_name 
```

关键是至少两个表应该有一个通用列

# android - 使用动画时如何避免视图闪烁？

> ID：12799201
> 
> 赞同：5
> 
> 时间：2012-10-09T11:37:24.800
> 
> 标签：android, android-animation

我使用平移和旋转动画`View`在事件`FrameLayout`中定位。`onCreate`我希望动画立即执行，所以我将它们的持续时间都设置为 0。但是当应用程序启动时，我`View`在屏幕的左上角会短暂闪烁，然后它会根据动画参数定位。我怎样才能避免这种眨眼？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T07:07:02.283

我花了一整天的时间来解决这个问题。fillAfter 和 fillBefore 与此无关。在动画开始之前试试这个：

```
view.setVisibility(View.GONE); // view is our View we trying to animate 
```

然后为您的动画设置动画侦听器：

```
 animation.setAnimationListener(new AnimationListener(){
        public void onAnimationEnd(Animation animation) {
        }

        public void onAnimationRepeat(Animation animation) {
        }

        public void onAnimationStart(Animation animation) {
            v.setVisibility(View.VISIBLE);
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T11:40:34.533

使用`animation.setFillAfter(true)`或`animation.setFillBefore(true)`，具体取决于您的需要。这应该可以解决眨眼问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-19T18:25:17.827

在你的动画文件的父标签内有一个标签会导致这种情况，只用一个标签试试，你会看到区别。我现在正在处理这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-20T13:14:17.823

Odaym 的答案实际上是该问题的解决方案。如果你有这样的事情：

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:shareInterpolator="true">
    <set
        android:duration="1000">
        <translate
            android:fromXDelta="100%"
            android:toXDelta="0"
            />
    </set>
</set> 
```

把它改成这样：

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:shareInterpolator="true" android:duration="1000">
        <translate
            android:fromXDelta="100%"
            android:toXDelta="0"
            />
</set> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-30T09:51:59.277

设置动画执行代码后的可见性但不在“onAnimationEnd”中，也尝试设置持续时间

```
view.setVisibility(View.VISIBLE); // view is our View we trying to animate 
```

# php - 在 php 或 js 中绘制具有非线性比例的图表

> ID：12799202
> 
> 赞同：0
> 
> 时间：2012-10-09T11:37:31.150
> 
> 标签：php, javascript, charts

有没有人知道图表库，我可以手动设置值之间的 X 或 Y 刻度间隔？我必须绘制图表，但例如 1 到 10 之间的间隔比 20 到 30 大两倍。所以我希望能够手动设置比例间隔？

# sql - Oracle to_number(1234.567)？

> ID：12799207
> 
> 赞同：0
> 
> 时间：2012-10-09T11:37:56.627
> 
> 标签：sql, oracle

我正在尝试`varchar`使用 oracle 函数 to_number() 将多个类型（例如 1234.456）转换为浮点数。在我的 PC（语言环境德语）中，Oracle SQLDeveloper 在 fromat 中返回数字`1234,567`而不是`1234.567`反过来导致 oracle 错误`ORA-01722-invalid number`。我将系统语言环境更改为`en_usa`但没有用。我怎样才能改变 oracle 的行为？

帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:37:37.303

试试这样：

```
SELECT to_number('1234.5678', '9999D9999', 'NLS_NUMERIC_CHARACTERS=.,')
FROM dual; 
```

[这](http://www.sqlfiddle.com/#!4/d41d8/3078)是一个小提琴

# jquery - jQuery：将自定义事件绑定到预定义函数

ID：12799210

赞同：1

时间：2012-10-09T11:37:58.410

标签：jquery, swipe

# xaml - 在 listview xaml + application métro 中找不到 AlternationCount

> ID：12799211
> 
> 赞同：1
> 
> 时间：2012-10-09T11:38:00.387
> 
> 标签：xaml, listview, windows-8, microsoft-metro

为什么我在 Windows8 应用程序的列表视图 XAML 中找不到成员 AlternationCount？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T00:47:23.280

为此，您可以使用[`ItemContainerGenerator`](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.itemcontainergenerator.aspx)属性并将其`ContainerFromItem`和`IndexFromContainer`方法链接起来以获取项目的索引，然后使用转换器从索引中获取背景颜色。

```
public class Item : BindableBase
{
    public ItemsControl itemsControl {get;set;}

    private string name;
    public string Name
    {
        get{
            return name;
        }
        set
        {
            name = value;
            OnPropertyChanged();
        }
    }

    public int Index
    {
        get
        {
            return itemsControl.ItemContainerGenerator.IndexFromContainer(
                itemsControl.ItemContainerGenerator.ContainerFromItem(this)
            );
        }
    }
}

public sealed partial class ItemContainerGeneratorTest : App1.Common.LayoutAwarePage
{
...
    public ObservableCollection<Item> test 
    {
        get
        {
            var test = new ObservableCollection<Item>();
            test.Add(new Item() { Name = "Index for item 1: ", itemsControl = ItemsControlControl });
            test.Add(new Item() { Name = "Index for item 2: ", itemsControl = ItemsControlControl });
            test.Add(new Item() { Name = "Index for item 3: ", itemsControl = ItemsControlControl });
            test.Add(new Item() { Name = "Index for item 4: ", itemsControl = ItemsControlControl });
            test.Add(new Item() { Name = "Index for item 5: ", itemsControl = ItemsControlControl });
            test.Add(new Item() { Name = "Index for item 6: ", itemsControl = ItemsControlControl });
            return test;
        }
    }
...
}

<ItemsControl x:Name="ItemsControlControl" ItemsSource="{Binding ElementName=pageRoot, Path=test}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Name}"/>
                <TextBlock Text="{Binding Index}"/>
            </StackPanel>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

请注意，此示例当前*不*处理对集合的更改（即在集合更改时`OnPropertyChanged`不调用`Index`）。

# javascript - Chrome 被检测为带有 javascript 的 Safari

> ID：12799212
> 
> 赞同：4
> 
> 时间：2012-10-09T11:38:01.373
> 
> 标签：javascript, google-chrome, safari, browser-detection

我正在寻找一种使用 javascript 检测 Safari 的方法。我知道它已经被覆盖了很多次，但可能有些东西已经改变了，它不再起作用了。至少在我的情况下。

这是我所做的：

```
<script>

    if(!isSafari()){
      alert('not Safari');
    } else {
      alert('I am Safari');
    }

    function isSafari(){    
      var is_safari = navigator.userAgent.indexOf("Safari") > -1;
      if(is_safari){
        return true;
      }
    }
  </script> 
```

jsbin：http: [//jsbin.com/ewerof/1](http://jsbin.com/ewerof/1)

如果您在 Safari 和 Chrome 中运行此代码，您将收到相同的警报“我是 Safari” 那么如何仅检测 Safari？我的 Safari 版本是 4.0.3，以防万一。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T11:44:07.530

Chrome 在 userAgent 字符串中同时具有“Chrome”和“Safari”。Safari 只有“Safari”。

所以这有效：

```
var is_chrome = navigator.userAgent.indexOf('Chrome') > -1; 
var is_explorer = navigator.userAgent.indexOf('MSIE') > -1; 
var is_firefox = navigator.userAgent.indexOf('Firefox') > -1; 
var is_safari = navigator.userAgent.indexOf("Safari") > -1; 
var is_Opera = navigator.userAgent.indexOf("Presto") > -1; 
if ((is_chrome)&&(is_safari)) {is_safari=false;} 
```

**if (is_safari) alert('Safari');**

或仅适用于 Safari，请使用以下命令：

```
if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1) {alert('Its Safari');} 
```

学分：卡巴玛鲁

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:43:21.960

如果您使用 Chrome 在 Web 开发人员控制台中键入此内容：

```
navigator.userAgent 
```

你会得到一个字符串，比如：

```
"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.92 Safari/537.4" 
```

该字符串包含`Safari`，因此您必须专门检查该字符串是否还包含 chrome。您可以为此使用简单的单线：

```
var is_safari = /^(?!.*chrome).*safari/i.test(navigator.userAgent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:44:44.160

我正在使用更新版本的 Safari，但这应该仍然适用。

**Safari 的用户代理：**

```
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.26.14 (KHTML, like Gecko) Version/6.0.1 Safari/536.26.14 
```

**Chrome 的用户代理**

```
 Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4 
```

如您所见，它们都包含“Safari”（很可能是由于它们都使用 WebKit）。您的函数仅检查 Safari。因此，您的函数需要检查“Safari”并确保字符串不包含“Chrome”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:45:59.227

如果您查看您的用户代理，您会看到它在字符串中包含“Safari”；

`Your User Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.92 Safari/537.4`

```
var xSAF = isSafari();

if(SAF)
{
    alert('Is Safari');
} else {
    alert('Not Safari');
}

function isSafari()
{
    var xUA = navigator.userAgent;
    if((xUA.indexOf("Safari")) && (xUA.indexOf("Chrome") == -1))
    {
        return true;
    } else {
        return false;
    }
} 
```

# c# - HttpWebRequest getRequestStream 在多次运行时挂起

> ID：12799218
> 
> 赞同：13
> 
> 时间：2012-10-09T11:38:19.123
> 
> 标签：c#, httpwebrequest

我编写了一些代码来发送和读取来自侦听器的文本。这在第 1 次和第 2 次交换时运行良好，但在第 3 次发送时，调用 GetRequestStream 和实际写入数据之间存在很长的延迟。

我已经按照此处的建议在发送端配置了外流、流读取器以及读取端的输入流： [有谁知道我为什么会收到 HttpWebRequest 超时？](https://stackoverflow.com/questions/2242866/httpwebrequest-timeout-hangs-help)

它仍然在第三次尝试发送信息时挂起。它肯定似乎挂在 getRequestStrean 的 sendMessage ：

```
public void sendMessage(string message)
{
    HttpWebRequest request;
    string sendUrl;

    sendUrl = "http://" + termIPAddress + ":" + sendPort + "/";
    Uri uri = new Uri(sendUrl);
    Console.WriteLine("http://" + termIPAddress + ":" + sendPort + "/");

    ServicePoint servicePoint = ServicePointManager.FindServicePoint(uri);
    servicePoint.BindIPEndPointDelegate = new BindIPEndPoint(BindIPEndPointCallback);
    servicePoint.ConnectionLeaseTimeout = 300;

    request = (HttpWebRequest)WebRequest.Create(sendUrl);
    request.KeepAlive = false;
    request.Method = "POST";
    request.ProtocolVersion = HttpVersion.Version11;
    request.ContentType = "application/x-www-form-urlencoded";
    request.Headers.Add("SourceIP", localIPAddress);
    request.Headers.Add("MachineName", localName);
    requestStarted = true;

    byte[] buffer = System.Text.Encoding.UTF8.GetBytes(message);
    request.ContentLength = buffer.Length;
    try
    {
        using (Stream output = request.GetRequestStream())
        {
            output.Write(buffer, 0, buffer.Length);
            output.Close();
            request = null;
        }
    }
    catch(WebException wE)
    {
        Console.WriteLine(wE.Message);
    }
} 
```

这是阅读部分：

```
public string getMessage()
{
    Console.WriteLine("Entering actual listener");
    string s;
    string sourceIP;

    NameValueCollection headerList;

    HttpListenerContext context = terminalListener.GetContext();
    HttpListenerRequest request = context.Request;

    headerList = request.Headers;
    sourceIP = headerList.GetValues("SourceIP")[0];
    termName = headerList.GetValues("MachineName")[0];
    termIPAddress = sourceIP;
    using (System.IO.Stream body = request.InputStream)
    {
        System.Text.Encoding encoding = request.ContentEncoding;
        using (System.IO.StreamReader reader = new System.IO.StreamReader(body, encoding))
        {
            s = reader.ReadToEnd();
            body.Close();
            reader.Close();
        }
    }

    return termName + " : " + s;    
} 
```

我还尝试添加 IP 端点绑定，但老实说，我不完全理解这段代码：

```
private IPEndPoint BindIPEndPointCallback(ServicePoint servicePoint, IPEndPoint remoteEndPoint, int retryCount)
{
    int portNumber = Convert.ToInt32(sendPort);
    IPEndPoint IEP = new IPEndPoint(IPAddress.Parse(localIPAddress), 0); 
    Console.WriteLine(Convert.ToString(IEP));
    return IEP;  
} 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T12:13:55.470

你只是忘了打电话[`HttpWebRequest.GetResponse`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse.aspx "HttpWebRequest.GetResponse")，因此用完了连接限制。

因此，您应该按如下方式更改代码：

```
try
{
    using (Stream output = request.GetRequestStream())
        output.Write(buffer, 0, buffer.Length);

    var response = request.GetResponse() as HttpWebResponse;
    //TODO: check response.StatusCode, etc.
}
catch(WebException wE)
{
    Console.WriteLine(wE.Message);
} 
```

此外，在某些情况下，您可能需要调整默认连接限制： [`ServicePointManager.DefaultConnectionLimit`](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.defaultconnectionlimit.aspx "ServicePointManager.DefaultConnectionLimit")

或者使用持久连接： [`HttpWebRequest.KeepAlive`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.keepalive.aspx "HttpWebRequest.KeepAlive")

# java - 如何让 Java 小程序中的翅膀移动？

> ID：12799220
> 
> 赞同：0
> 
> 时间：2012-10-09T11:38:24.303
> 
> 标签：java, japplet

这是我的小程序代码。我在互联网上搜索了有关如何为小程序设置动画的示例，但我的问题是我无法让翅膀扇动。

我认为我应该使用线程和重绘，但是我不知道如何实现这两个以及如何启动代码。

```
public class boom extends Applet implements Runnable 
{
    int z = 0;
    int x = 0;
    Thread t = null;
    boolean threadSuspended;

    public void init() {
        setBackground(Color.CYAN);
    } 

    public void start() {
        System.out.println("start(): begin");
        if ( t == null ) {
            System.out.println("start(): creating thread");
            t = new Thread( this );
            System.out.println("start(): starting thread");
            threadSuspended = false;
            t.start();
        }
        else {
            if ( threadSuspended ) {
                threadSuspended = false;
                System.out.println("start(): notifying thread");
                synchronized( this ) {
                notify();
                }
            }
        }
        System.out.println("start(): end");
    }

    public void stop() {
    } 

    public void destroy() {
        System.out.println("destroy()");
    } 

    public void run() {
        System.out.println("run(): begin");
        try {
            while (true) {
                System.out.println("run(): awake");

                // Here's where the thread does some work
                x++;
                z++;

                if (z == 2) {
                    z = 0;
                }

                if ( x == 750 ) {
                    x = 0;
                }

                showStatus( "i is " + x );

                // Now the thread checks to see if it should suspend itself
                if ( threadSuspended ) {
                    synchronized( this ) {
                        while ( threadSuspended ) {
                            System.out.println("run(): waiting");
                            wait();
                        }
                    }
                }

                System.out.println("run(): requesting repaint");
                repaint();
                System.out.println("run(): sleeping");
                t.sleep( 50);  // interval given in milliseconds
            }
        }
        catch (InterruptedException e) {
        }
        System.out.println("run(): end");
    }

    public void paint(Graphics g) { 
        g.fillRect(x+300,10,10,10);
        g.fillRect(x+320,10,10,10);

        //2nd
        g.fillRect(x+280,20,50,10);

        //3rd
        g.fillRect(x+280,30,10,10);
        g.fillRect(x+320,30,10,10);
        g.fillRect(x+260,30,10,10);
        g.setColor(Color.WHITE);
        g.fillRect(x+270,30,10,10);
        g.fillRect(x+250,30,10,10);
        g.fillRect(x+290,30,30,10);

        //4th
        g.setColor(Color.BLACK);
        g.fillRect(x+240,40,10,10);
        g.fillRect(x+310,40,10,10);
        g.setColor(Color.WHITE);
        g.fillRect(x+250,40,60,10);

        //5th
        g.setColor(Color.BLACK);
        g.fillRect(x+240,50,10,10);
        g.fillRect(x+310,50,10,10);
        g.setColor(Color.WHITE);
        g.fillRect(x+250,50,60,10);

        //6th
        g.fillRect(x+240,60,50,10);
        g.setColor(Color.BLACK);
        g.fillRect(x+290,60,20,10);

        //7th
        g.fillRect(x+290,70,10,10);
        g.setColor(Color.WHITE);
        g.fillRect(x+240,70,10,10);
        g.fillRect(x+280,70,10,10);
        g.setColor(Color.GRAY);
        g.fillRect(x+250,70,30,10);
        g.setColor( new Color(24,138,53) ); //green
        g.fillRect(x+370,70,40,10);

        //8th
        g.setColor(Color.WHITE);
        g.fillRect(x+230,80,30,10);
        g.fillRect(x+280,80,10,10);
        g.fillRect(x+380,80,20,10);
        g.setColor(Color.GRAY);
        g.fillRect(x+260,80,20,10);
        g.setColor(Color.BLACK);
        g.fillRect(x+290,80,10,10);

        g.setColor( new Color(12,139, 34) ); //green
        g.fillRect(x+360,80,20,10);
        g.fillRect(x+400,80,20,10);

        //9th
        g.setColor(Color.WHITE);
        g.fillRect(x+230,90,60,10);
        g.fillRect(x+370,90,20,10);
        g.fillRect(x+400,90,10,10);
        g.setColor(Color.BLACK);
        g.fillRect(x+290,90,10,10);
        g.fillRect(x+390,90,10,10);

        g.setColor( new Color(12,139, 34) ); //green
        g.fillRect(x+350,90,20,10);
        g.fillRect(x+410,90,10,10);
        g.setColor( new Color(255,133,0) ); //orange
        g.fillRect(x+420,90,20,10);

        //10
        g.setColor(Color.WHITE);
        g.fillRect(x+240,100,40,10);
        g.fillRect(x+370,100,20,10);
        g.fillRect(x+400,100,10,10);
        g.setColor(Color.BLACK);
        g.fillRect(x+280,100,20,10);
        g.fillRect(x+390,100,10,10);

        g.setColor( new Color(12,139, 34) ); //green
        g.fillRect(x+340,100,30,10);
        g.fillRect(x+410,100,10,10);
        g.setColor( new Color(255,133,0) ); //orange
        g.fillRect(x+420,100,40,10);

        //11
        g.setColor(Color.WHITE);
        g.fillRect(x+230,110,50,10);
        g.fillRect(x+320,110,10,10);
        g.fillRect(x+370,110,40,10);

        g.setColor( new Color(12,139, 34) ); //green
        g.fillRect(x+330,110,40,10);
        g.fillRect(x+410,110,10,10);
        g.setColor( new Color(255,133,0) ); //orange
        g.fillRect(x+420,110,60,10);

        g.setColor(Color.BLACK);
        g.fillRect(x+280,110,10,10);
        g.fillRect(x+310,110,10,10);

        //12
        g.fillRect(x+210,120,20,10); 
        g.fillRect(x+280,120,40,10);
        g.setColor(Color.WHITE);
        g.fillRect(x+230,120,50,10);
        g.fillRect(x+320,120,10,10);
        g.setColor( new Color(36,102,54) ); //dark green
        g.fillRect(x+330,120,20,10);
        g.fillRect(x+400,120,10,10); 

        g.setColor( new Color(12,139, 34) ); //green
        g.fillRect(x+350,120,30,10);
        g.fillRect(x+410,120,10,10); 

        g.setColor( new Color(128,128,128) ); //gray
        g.fillRect(x+380,120,20,10); 

        g.setColor( new Color(255,73,0) ); //dark orange
        g.fillRect(x+420,120,20,10); 
        g.setColor( new Color(255,133,0) ); //orange
        g.fillRect(x+440,120,40,10); 

        //13
        g.setColor(Color.BLACK);    
        g.fillRect(x+180,130,50,10); 
        g.fillRect(x+270,130,50,10);
        g.setColor(Color.WHITE);
        g.fillRect(x+230,130,10,10);
        g.fillRect(x+260,130,10,10);
        g.setColor( new Color(128,128,128) ); //gray
        g.fillRect(x+240,130,20,10);
        g.fillRect(x+320,130,20,10);
        g.setColor( new Color(36,102,54) ); //dark green
        g.fillRect(x+340,130,20,10);
        g.fillRect(x+370,130,50,10);
        g.setColor( new Color(12,139, 34) ); //green
        g.fillRect(x+360,130,10,10);
        g.setColor( new Color(255,73,0) ); //dark orange
        g.fillRect(x+420,130,60,10); 

        //14
        g.setColor(Color.BLACK);    
        g.fillRect(x+150,140,80,10);
        g.fillRect(x+270,140,60,10);
        g.setColor(Color.WHITE);
        g.fillRect(x+230,140,40,10);
        g.setColor( new Color(128,128,128) ); //gray
        g.fillRect(x+330,140,10,10);
        g.setColor( new Color(36,102,54) ); //dark green    
        g.fillRect(x+340,140,70,10);    

        //15
        g.setColor(Color.BLACK);    
        g.fillRect(x+160,150,70,10);
        g.fillRect(x+280,150,50,10);
        g.setColor(Color.WHITE);
        g.fillRect(x+230,150,50,10);
        g.setColor( new Color(128,128,128) ); //gray
        g.fillRect(x+330,150,10,10);

        //16
        g.setColor(Color.BLACK);    
        g.fillRect(x+170,160,60,10);
        g.setColor(Color.WHITE);
        g.fillRect(x+230,160,60,10);
        g.setColor( new Color(128,128,128) ); //gray
        g.fillRect(x+290,160,20,10);

        //17
        g.setColor(Color.BLACK);    
        g.fillRect(x+180,170,50,10);
        g.setColor(Color.WHITE);
        g.fillRect(x+230,170,60,10);
        g.setColor( new Color(128,128,128) ); //gray
        g.fillRect(x+290,170,10,10);

        //18
        g.setColor(Color.BLACK);    
        g.fillRect(x+190,180,30,10);
        g.setColor(Color.WHITE);
        g.fillRect(x+220,180,10,10);
        g.fillRect(x+240,180,30,10);
        g.setColor( new Color(128,128,128) ); //gray
        g.fillRect(x+230,180,10,10);
        g.fillRect(x+270,180,20,10);

        //19
        g.setColor( new Color(128,128,128) ); //gray
        g.fillRect(x+190,190,60,10);
        g.fillRect(x+260,190,20,10);
        g.setColor(Color.WHITE);
        g.fillRect(x+250,190,10,10);

        //20
        g.setColor( new Color(128,128,128) ); //gray
        g.fillRect(x+210,200,50,10);

        //21
        g.setColor( new Color(255,133,0) ); //orange
        g.fillRect(x+190,210,10,10);
        g.setColor( new Color(255,73,0) ); //orange
        g.fillRect(x+200,210,30,10);

        //22
        g.setColor( new Color(255,133,0) ); //orange
        g.fillRect(x+180,220,30,10);
        g.setColor( new Color(255,73,0) ); //orange d
        g.fillRect(x+210,220,10,10);

        //23
        g.setColor( new Color(255,133,0) ); //orange
        g.fillRect(x+190,230,20,10);

        //24
        g.setColor( new Color(255,133,0) ); //orange
        g.fillRect(x+190,240,10,10);
    }
} 
```

# ios5 - 在 ios 5.0 和 4 英寸屏幕上运行的横向模式下键盘不适合视图

> ID：12799223
> 
> 赞同：1
> 
> 时间：2012-10-09T11:38:34.993
> 
> 标签：ios5, uikeyboard, iphone-5

嘿，我正在为 iphone5（4 英寸屏幕）开发一个应用程序，一切正常，但是当我在 iOS 5.0 上运行我的应用程序并旋转到横向模式时，键盘不适合整个屏幕，添加屏幕截图。所有键盘类型都会发生这种情况。

有没有办法在我们这边处理这个错误，或者它只需要由苹果人修复。我在模拟器上运行应用程序，所以如果有人安装了 ios 5.0 的 iphone 5，请检查，设备上是否也存在该问题？ ![在此处输入图像描述](../Images/06cbf50a9429b3d7a4d7beb7aea0f660.png)

# qt - 如何在 Qt 运行时更改语言？

> ID：12799229
> 
> 赞同：2
> 
> 时间：2012-10-09T11:38:43.837
> 
> 标签：qt

我正在用 Qt 框架编写一个多语言程序。我想在运行时更改语言。我在一个插槽中编写了下面的代码，但它不起作用。

```
 QTranslator translator;
    translator.load("arrowpad_tr");
    qApp->installTranslator(&translator); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:57:17.487

安装翻译器仅意味着特定翻译器可用。这由 QCoreApplication 的 LanguageChange 事件发出信号。您仍然需要调用的是`retranslateUi();`负责 Qt Designer 小部件的实际翻译。对于自定义小部件，您必须根据事件创建类似的东西。

# jquery - 键盘导航javascript链接时停止Web浏览器选项卡顺序跳回页面开头

> ID：12799231
> 
> 赞同：0
> 
> 时间：2012-10-09T11:38:56.423
> 
> 标签：jquery, browser, accessibility, jplayer, tabindex

这不是 jplayer 或特定于浏览器的，但在此查询中，我关注的是 jplayer。

jplayer 为上一个和下一个曲目设置了一系列控件，绑定到 jquery。盲人用户不会用鼠标点击，他们会使用键盘进行选项卡，并在听到他们想要的链接时按回车键。问题是，它把它们扔回了顶部。

当您有一个包含 20 首曲目的播放列表可供采样时，回到页面顶部会很烦人。jplayer 附带的代码就是这样的。

`<li><a href="javascript:;" class="jp-play btn btn-large btn-success" > play&nbsp;</a> </li>`

我想也许我可以使用自身id的href。虽然这在点击进入时有效....

`<li><a name="jp-stop" id="jp-stop" href="#jp-stop" class="jp-stop btn btn-large btn-primary" >stop</a></li>`

...它仍然让我在页面顶部转储。任何建议都非常感谢。

顺便说一句，是否有首选理由使用`href="javascript:;"`over `a href="#"`？

**编辑：**我尝试了“动态更改的 tabindex”，正如在下面的评论中所讨论的那样，但它不仅似乎不起作用，而且还导致它无法通过可访问性测试，因为 tabindex 不应该是“乱序”的这页纸。

我决定选择两害相权取其轻，[accesskeys](http://en.wikipedia.org/wiki/Access_key)。但是，如果可以的话，我将保持开放状态，因为我很想知道是否有解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:16:53.113

**href="javascript:;" over a href="#"**将始终在顶部滚动浏览器。

你可以像这样使用**javascript:void(0)**：

```
<li><a href="javascript:void(0);" class="jp-play btn btn-large btn-success" > play&nbsp;</a> </li> 
```

并删除**href="#"**以防止浏览器向上滚动。

# java - java中的HTML标签文本字段

> ID：12799232
> 
> 赞同：1
> 
> 时间：2012-10-09T11:38:59.373
> 
> 标签：java

我目前正在实施一个聊天服务器和客户端作为入门课程的一部分我在服务器端没有任何问题，但是在客户端特别是 GUI 我有点迷失了，我想做的是一些一种将服务于两个目的的文本字段：

1）聊天历史，发送和接收的消息，应该允许一些标记，例如出现一条消息 user1 : bla bla ，并且用户点击用户名我希望触发一个事件，例如添加到朋友列表或忽略，我也希望它被格式化为文本颜色、字体大小和类型。

2）用户输入文本或命令的区域我还想添加一些按钮，以便能够在没有事件部分的情况下进行与上述相同的格式

我对此事的第一个想法是对两者都使用 HTML 标签和 JEditorPane，但我不确定如何注册事件以单击用户名，我不确定它是否必须是完整的 HTML 文档它与 HTML 工具包一起显示在 EditorPane 上？将简单地

```
Text message <b> this part bold </b> 
```

显示没有问题？

另外我想指出，我不是在寻找代码，因为我只是在客户端应用程序的规划阶段，我正在寻找有人在 Swing API 中为我指明正确的方向，这并不太复杂实现并可以提供这样的功能

如果问题不清楚，我很乐意详细说明

~谢谢

# php - 使用 php 集成附加链接

> ID：12799235
> 
> 赞同：2
> 
> 时间：2012-10-09T11:39:10.133
> 
> 标签：php

我想使用 php 将 Sitelink 与我的网站集成。对于演示，他们刚刚提供了此代码

```
 echo '<p>Testing SiteLink...</p>';
    define( 'SITELINK_URL', "https://www.smdservers.net/CCWs_3.5/CallCenterWs.asmx?WSDL");
    define( 'SITELINK_CORP_CODE', "CCTST" );
    define( 'SITELINK_LOC_CODE', "Demo" );
    define( 'SITELINK_CORP_LOGIN', "Administrator" );
    define( 'SITELINK_CORP_PASS', "Demo" );
    $client = new SoapClient( SITELINK_URL );
    $params->sCorpCode = SITELINK_CORP_CODE;
    $params->sLocationCode = SITELINK_LOC_CODE;
    $params->sCorpUserName = SITELINK_CORP_LOGIN;
    $params->sCorpPassword = SITELINK_CORP_PASS;
    try
    {
    $units = $client->SiteInformation( $params );
    $result = $units->SiteInformationResult;
    }
    catch (Exception $e )
    {
    die( 'Error: '.$e->getMessage().'<br>'.$e );
    }
    echo htmlentities( $result->any ); 
```

但我无法理解如何使用 php 感染数据并处理它。我必须获取单位尺寸及其各自的价格。任何帮助是极大的赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:04:22.573

`SiteInformation`不期望数组`Object`，并且您`$params`从未声明过

```
define('SITELINK_URL', "http://www.smdservers.net/CCWs_3.5/CallCenterWs.asmx?WSDL");
define('SITELINK_CORP_CODE', "CCTST");
define('SITELINK_LOC_CODE', "Demo");
define('SITELINK_CORP_LOGIN', "Administrator");
define('SITELINK_CORP_PASS', "Demo");
$client = new SoapClient(SITELINK_URL);
$params = array("sCorpCode" => SITELINK_CORP_CODE,"sLocationCode" => SITELINK_LOC_CODE,"sCorpUserName" => SITELINK_CORP_LOGIN,"sCorpPassword" => SITELINK_CORP_PASS);

try {
    $units = $client->SiteInformation($params);

    header("Content-Type: text/xml");
    print($units->SiteInformationResult->any);

} catch ( Exception $e ) {
    die('Error: ' . $e->getMessage() . '<br>' . $e);
} 
```

[观看现场演示](http://codepad.viper-7.com/PlVNuL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:04:42.507

你不是想得到你得到的单位`SiteInformation`

首先添加类型`$params`：

```
$params = new stdClass; // as stdClass
$params->sCorpCode = SITELINK_CORP_CODE;
$params->sLocationCode = SITELINK_LOC_CODE;
$params->sCorpUserName = SITELINK_CORP_LOGIN;
$params->sCorpPassword = SITELINK_CORP_PASS; 
```

然后：

```
$units = $client->UnitTypePriceList($params);
$result = $units->UnitTypePriceListResult->any; 
```

并且您必须使用 解析数据`DOMDocument`，检查要显示的标签名称并将其打印出来：

```
$dom = new DOMDocument;
$dom->loadXML($result);

$xpath = new DOMXPath($dom);
$el = $xpath->query('//Table');

foreach($el as $units){
    $UnitID = $xpath->query('UnitID_FirstAvailable', $units)->item(0)->nodeValue;
    echo $UnitID;
} 
```

我不知道你想要的价值观是什么，但我以我`UnitID_FirstAvailable`为例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-22T17:32:30.123

我知道这有点老了，但我一直在使用 API 做一些广泛的工作。首先，你会想要这个：[SiteLink API 文档](http://www.sitelink.com/wp-content/themes/sitelink/media/pdf/SiteLink_API.pdf)

要获取所有可用单位，您可以执行以下操作：

```
// define API connection credentials
define('SITELINK_URL', "http://www.smdservers.net/CCWs_3.5/CallCenterWs.asmx?WSDL");
define('SITELINK_CORP_CODE', "CCTST");
define('SITELINK_LOC_CODE', "Demo");
define('SITELINK_CORP_LOGIN', "Administrator");
define('SITELINK_CORP_PASS', "Demo");

$client = new SoapClient( SITELINK_URL );
$params->sCorpCode = SITELINK_CORP_CODE;
$params->sLocationCode = SITELINK_LOC_CODE;
$params->sCorpUserName = SITELINK_CORP_LOGIN;
$params->sCorpPassword = SITELINK_CORP_PASS;
$params->lngLastTimePolled = 0;
$params->bTestMode = true;

try
                        {
                        $units = $client->UnitsInformationAvailableUnitsOnly_v2($params);
                        $result = $units->UnitsInformationAvailableUnitsOnly_v2Result;
                        }
                        catch (Exception $e)
                        { 
                        die( 'Error: '.$e->getMessage().'<br />'.$e ); 
                        }
echo '<table>';
                        $formatUnits = new SimpleXMLElement($result->any);
                        foreach($formatUnits->NewDataSet->Table as $unit){
                            echo "<tr>\r\n";
                            echo "<td><a href='#' data-unit-number='".$unit->sUnitName."' data-unit-id='".$unit->UnitID."' data-rate='".$rate."' class='res-unit-link'>".$unit->sUnitName."</a></td>\r\n";
                            echo "<td>".$unit->sTypeName."</td>\r\n";
                            echo "</tr>\r\n";
}
echo '</table>'; 
```

您可以`var_dump($formatUnits)`查看 SiteLink 返回的对象中的所有可用数据。上面的代码是我使用 jQuery`data-`从链接中获取所有属性以用于租赁/预订过程的示例。

我希望这对某人有所帮助。当我第一次开始使用 API 时，我真的可以使用它。

# javascript - 如何查看和编译所有 TypeScript 源代码？

> ID：12799237
> 
> 赞同：101
> 
> 时间：2012-10-09T11:39:18.730
> 
> 标签：javascript, compilation, typescript

我正在尝试将宠物项目转换为 TypeScript，但似乎无法使用该`tsc`实用程序来查看和编译我的文件。帮助说我应该使用`-w`开关，但它看起来无法`*.ts`递归地观察和编译某个目录中的所有文件。这似乎`tsc`应该能够处理。我有哪些选择？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2015-05-10T06:25:48.423

创建一个以`tsconfig.json`项目根目录命名的文件，并在其中包含以下行：

```
{
    "compilerOptions": {
        "emitDecoratorMetadata": true,
        "module": "commonjs",
        "target": "ES5",
        "outDir": "ts-built",
        "rootDir": "src"
    }
} 
```

**请注意**，它`outDir`应该是接收编译好的 JS 文件`rootDir`的目录的路径，并且应该是包含您的源（.ts）文件的目录的路径。

打开终端并运行`tsc -w`，它会将目录中的任何`.ts`文件编译`src`到`.js`并存储在`ts-built`目录中。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-06-10T08:45:10.987

TypeScript 1.5 beta 引入了对名为`tsconfig.json`. 在该文件中，您可以配置编译器，定义代码格式化规则，更重要的是，为您提供有关项目中 TS 文件的信息。

一旦正确配置，您可以简单地运行该`tsc`命令并让它编译您项目中的所有 TypeScript 代码。

如果你想让它监视文件的变化，那么你可以简单地添加`--watch`到`tsc`命令中。

这是一个示例 tsconfig.json 文件

```
{
"compilerOptions": {
    "target": "es5",
    "module": "commonjs",
    "declaration": false,
    "noImplicitAny": false,
    "removeComments": true,
    "noLib": false
},
"include": [
    "**/*"
],
"exclude": [
    "node_modules",
    "**/*.spec.ts"
]} 
```

在上面的示例中，我将所有`.ts`文件包含在我的项目中（递归地）。请注意，您还可以使用`"exclude"`带有数组的属性来排除文件。

有关更多信息，请参阅文档：[http ://www.typescriptlang.org/docs/handbook/tsconfig-json.html](http://www.typescriptlang.org/docs/handbook/tsconfig-json.html)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2017-11-23T12:32:25.143

你可以像这样观看所有文件

```
tsc *.ts --watch 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-09T12:30:26.663

从技术上讲，您在这里有几个选择：

如果您使用像 Sublime Text 这样的 IDE 和用于 Typescript 的集成 MSN 插件：http: [//blogs.msdn.com/b/interoperability/archive/2012/10/01/sublime-text-vi-emacs-typescript-enabled。 aspx](http://blogs.msdn.com/b/interoperability/archive/2012/10/01/sublime-text-vi-emacs-typescript-enabled.aspx)`.ts`你可以创建一个自动编译源代码的构建系统`.js`。以下是如何做到这一点的解释：[如何为 TypeScript 配置 Sublime 构建系统](https://stackoverflow.com/questions/12779631/how-to-configure-a-sublime-build-system-for-typescript/12781051#12781051)。

`.js`您甚至可以定义在文件保存时将源代码编译到目标文件。在 github 上托管了一个 sublime 包：[https](https://github.com/alexnj/SublimeOnSaveBuild) ://github.com/alexnj/SublimeOnSaveBuild可以实现这一点，只需要在文件中包含`ts`扩展名。`SublimeOnSaveBuild.sublime-settings`

另一种可能性是在命令行中编译每个文件。您甚至可以一次编译多个文件，方法是用空格分隔它们：`tsc foo.ts bar.ts`. 检查此线程：[如何将多个源文件传递给 TypeScript 编译器？](https://stackoverflow.com/questions/12699781/how-can-i-pass-multiple-source-files-to-the-typescript-compiler)，但我认为第一个选项更方便。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2021-02-08T15:37:52.240

其他答案可能在几年前很有用，但现在已经过时了。

鉴于项目有一个[tsconfig](https://www.typescriptlang.org/tsconfig)文件，请运行此命令...

```
tsc --watch 
```

...监视更改的文件并根据需要进行编译。[该文档解释说](https://www.typescriptlang.org/docs/handbook/compiler-options.html)：

> 在监视模式下运行编译器。观察输入文件并在更改时触发重新编译。监视文件和目录的实现可以使用环境变量进行配置。有关更多详细信息，请参阅[配置手表](https://www.typescriptlang.org/docs/handbook/configuring-watch.html)。

要回答最初的问题，即使在没有本机支持的平台上也可以进行递归目录监视，如[配置监视](https://www.typescriptlang.org/docs/handbook/configuring-watch.html#configuring-directory-watching-using-environment-variable-tsc_watchdirectory)文档所述：

> 通过使用 TSC_WATCHDIRECTORY 选择的不同选项为子目录递归创建目录观察程序，支持在不支持在节点中本地查看递归目录的平台上查看目录

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-10-09T12:30:43.083

tsc 编译器只会监视您在命令行上传递的那些文件。它*不会*监视使用`/// <sourcefile>`引用包含的文件。如果您使用 bash，您可以使用 find 递归查找所有`*.ts`文件并编译它们：

```
find . -name "*.ts" | xargs tsc -w 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-01-29T08:36:45.363

考虑使用 grunt 来自动执行此操作，周围有很多教程，但这里有一个快速入门。

对于像这样的文件夹结构：

```
blah/
blah/one.ts
blah/two.ts
blah/example/
blah/example/example.ts
blah/example/package.json
blah/example/Gruntfile.js
blah/example/index.html 
```

您可以通过以下示例文件夹轻松观看和使用 typescript：

```
npm install
grunt 
```

使用 package.json：

```
{
  "name": "PROJECT",
  "version": "0.0.1",
  "author": "",
  "description": "",
  "homepage": "",
  "private": true,
  "devDependencies": {
    "typescript": "~0.9.5",
    "connect": "~2.12.0",
    "grunt-ts": "~1.6.4",
    "grunt-contrib-watch": "~0.5.3",
    "grunt-contrib-connect": "~0.6.0",
    "grunt-open": "~0.2.3"
  }
} 
```

还有一个 grunt 文件：

```
module.exports = function (grunt) {

  // Import dependencies
  grunt.loadNpmTasks('grunt-contrib-watch');
  grunt.loadNpmTasks('grunt-contrib-connect');
  grunt.loadNpmTasks('grunt-open');
  grunt.loadNpmTasks('grunt-ts');

  grunt.initConfig({
    pkg: grunt.file.readJSON('package.json'),
    connect: {
      server: {  // <--- Run a local server on :8089
        options: {
          port: 8089,
          base: './'
        }
      }
    },
    ts: {
      lib: { // <-- compile all the files in ../ to PROJECT.js
        src: ['../*.ts'],
        out: 'PROJECT.js',
        options: {
          target: 'es3',
          sourceMaps: false,
          declaration: true,
          removeComments: false
        }
      },
      example: {  // <--- compile all the files in . to example.js
        src: ['*.ts'],
        out: 'example.js',
        options: {
          target: 'es3',
          sourceMaps: false,
          declaration: false,
          removeComments: false
        }
      }
    },
    watch: { 
      lib: { // <-- Watch for changes on the library and rebuild both
        files: '../*.ts',
        tasks: ['ts:lib', 'ts:example']
      },
      example: { // <--- Watch for change on example and rebuild
        files: ['*.ts', '!*.d.ts'],
        tasks: ['ts:example']
      }
    },
    open: { // <--- Launch index.html in browser when you run grunt
      dev: {
        path: 'http://localhost:8089/index.html'
      }
    }
  });

  // Register the default tasks to run when you run grunt
  grunt.registerTask('default', ['ts', 'connect', 'open', 'watch']);
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-09-09T13:05:29.843

tsc 0.9.1.1 似乎没有*手表*功能。

您可以使用像这样的 PowerShell 脚本：

```
#watch a directory, for changes to TypeScript files.  
#  
#when a file changes, then re-compile it.  
$watcher = New-Object System.IO.FileSystemWatcher  
$watcher.Path = "V:\src\MyProject"  
$watcher.IncludeSubdirectories = $true  
$watcher.EnableRaisingEvents = $true  
$changed = Register-ObjectEvent $watcher "Changed" -Action {  
  if ($($eventArgs.FullPath).EndsWith(".ts"))  
  {  
    $command = '"c:\Program Files (x86)\Microsoft SDKs\TypeScript\tsc.exe" "$($eventArgs.FullPath)"'  
    write-host '>>> Recompiling file ' $($eventArgs.FullPath)  
    iex "& $command"  
  }  
}  
write-host 'changed.Id:' $changed.Id  
#to stop the watcher, then close the PowerShell window, OR run this command:  
# Unregister-Event < change Id > 
```

参考： [自动监视和编译 TypeScript 文件](http://antipatterns.blogspot.nl/2013/09/automatically-watch-and-compile.html)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-24T22:37:04.967

今天我设计了这个 Ant MacroDef 来解决和你一样的问题：

```
 <!--
    Recursively read a source directory for TypeScript files, generate a compile list in the
    format needed by the TypeScript compiler adding every parameters it take.
-->
<macrodef name="TypeScriptCompileDir">

    <!-- required attribute -->
    <attribute name="src" />

    <!-- optional attributes -->
    <attribute name="out" default="" />
    <attribute name="module" default="" />
    <attribute name="comments" default="" />
    <attribute name="declarations" default="" />
    <attribute name="nolib" default="" />
    <attribute name="target" default="" />

    <sequential>

        <!-- local properties -->
        <local name="out.arg"/>
        <local name="module.arg"/>
        <local name="comments.arg"/>
        <local name="declarations.arg"/>
        <local name="nolib.arg"/>
        <local name="target.arg"/>
        <local name="typescript.file.list"/>
        <local name="tsc.compile.file"/>

        <property name="tsc.compile.file" value="@{src}compile.list" />

        <!-- Optional arguments are not written to compile file when attributes not set -->
        <condition property="out.arg" value="" else='--out "@{out}"'>
            <equals arg1="@{out}" arg2="" />
        </condition>

        <condition property="module.arg" value="" else="--module @{module}">
            <equals arg1="@{module}" arg2="" />
        </condition>

        <condition property="comments.arg" value="" else="--comments">
            <equals arg1="@{comments}" arg2="" />
        </condition>

        <condition property="declarations.arg" value="" else="--declarations">
            <equals arg1="@{declarations}" arg2="" />
        </condition>

        <condition property="nolib.arg" value="" else="--nolib">
            <equals arg1="@{nolib}" arg2="" />
        </condition>

        <!-- Could have been defaulted to ES3 but let the compiler uses its own default is quite better -->
        <condition property="target.arg" value="" else="--target @{target}">
            <equals arg1="@{target}" arg2="" />
        </condition>

        <!-- Recursively read TypeScript source directory and generate a compile list -->
        <pathconvert property="typescript.file.list" dirsep="\" pathsep="${line.separator}">

            <fileset dir="@{src}">
                <include name="**/*.ts" />
            </fileset>

            <!-- In case regexp doesn't work on your computer, comment <mapper /> and uncomment <regexpmapper /> -->
            <mapper type="regexp" from="^(.*)$" to='"\1"' />
            <!--regexpmapper from="^(.*)$" to='"\1"' /-->

        </pathconvert>

        <!-- Write to the file -->
        <echo message="Writing tsc command line arguments to : ${tsc.compile.file}" />
        <echo file="${tsc.compile.file}" message="${typescript.file.list}${line.separator}${out.arg}${line.separator}${module.arg}${line.separator}${comments.arg}${line.separator}${declarations.arg}${line.separator}${nolib.arg}${line.separator}${target.arg}" append="false" />

        <!-- Compile using the generated compile file -->
        <echo message="Calling ${typescript.compiler.path} with ${tsc.compile.file}" />
        <exec dir="@{src}" executable="${typescript.compiler.path}">
            <arg value="@${tsc.compile.file}"/>
        </exec>

        <!-- Finally delete the compile file -->
        <echo message="${tsc.compile.file} deleted" />
        <delete file="${tsc.compile.file}" />

    </sequential>

</macrodef> 
```

在您的构建文件中使用它：

```
 <!-- Compile a single JavaScript file in the bin dir for release -->
    <TypeScriptCompileDir
        src="${src-js.dir}"
        out="${release-file-path}"
        module="amd"
    /> 
```

它用于我当时正在使用 Webstorm 开发[的 TypeScript 项目 PureMVC 。](https://github.com/tekool/puremvc-typescript-singlecore)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-30T19:38:57.387

在linux中我使用：

```
tsc -w $(查找 .|grep .ts)
```

这将监视当前目录下的每个打字稿文件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-30T18:16:24.143

编辑：注意，这是如果您的打字稿源中有多个 tsconfig.json 文件。对于我的项目，我们将每个 tsconfig.json 文件编译为不同名称的 .js 文件。这使得观看每个打字稿文件变得非常容易。

我写了一个甜蜜的 bash 脚本，它找到你所有的 tsconfig.json 文件并在后台运行它们，然后如果你 CTRL+C 终端，它将关闭所有正在运行的 typescript watch 命令。

这在 MacOS 上进行了测试，但应该可以在任何支持 BASH 3.2.57 的地方工作。未来的版本可能会改变一些东西，所以要小心！

```
#!/bin/bash
# run "chmod +x typescript-search-and-compile.sh" in the directory of this file to ENABLE execution of this script
# then in terminal run "path/to/this/file/typescript-search-and-compile.sh" to execute this script
# (or "./typescript-search-and-compile.sh" if your terminal is in the folder the script is in)

# !!! CHANGE ME !!!    
# location of your scripts root folder
# make sure that you do not add a trailing "/" at the end!!
# also, no spaces! If you have a space in the filepath, then
# you have to follow this link: https://stackoverflow.com/a/16703720/9800782
sr=~/path/to/scripts/root/folder
# !!! CHANGE ME !!!

# find all typescript config files
scripts=$(find $sr -name "tsconfig.json")

for s in $scripts
do
    # strip off the word "tsconfig.json"
    cd ${s%/*} # */ # this function gets incorrectly parsed by style linters on web
    # run the typescript watch in the background
    tsc -w &
    # get the pid of the last executed background function
    pids+=$!
    # save it to an array
    pids+=" "
done

# end all processes we spawned when you close this process
wait $pids 
```

有用的资源：

*   [bash：将字符串变量解释为文件名/路径](https://stackoverflow.com/questions/16703624/bash-interpret-string-variable-as-file-name-path)
*   [不记住在 while 循环内修改的变量](https://stackoverflow.com/questions/16854280/a-variable-modified-inside-a-while-loop-is-not-remembered)
*   [https://www.cyberciti.biz/faq/search-for-files-in-bash/](https://www.cyberciti.biz/faq/search-for-files-in-bash/)
*   [https://opensource.com/article/18/5/you-dont-know-bash-intro-bash-arrays](https://opensource.com/article/18/5/you-dont-know-bash-intro-bash-arrays)
*   [https://linuxize.com/post/bash-concatenate-strings/](https://linuxize.com/post/bash-concatenate-strings/)
*   [https://www.cyberciti.biz/faq/bash-for-loop/](https://www.cyberciti.biz/faq/bash-for-loop/)
*   [https://www.typescriptlang.org/docs/handbook/tsconfig-json.html](https://www.typescriptlang.org/docs/handbook/tsconfig-json.html)
*   [https://unix.stackexchange.com/questions/144298/delete-the-last-character-of-a-string-using-string-manipulation-in-shell-script](https://unix.stackexchange.com/questions/144298/delete-the-last-character-of-a-string-using-string-manipulation-in-shell-script)
*   [什么是特殊的美元符号 shell 变量？](https://stackoverflow.com/questions/5163144/what-are-the-special-dollar-sign-shell-variables)

# objective-c - 什么是检查数组中对象之间冲突的好方法？

> ID：12799243
> 
> 赞同：-1
> 
> 时间：2012-10-09T11:39:38.823
> 
> 标签：objective-c, ios, arrays, game-physics, physics-engine

我一直在另一个 for 循环中进行 for 循环，以便同时从数组中获取 2 个对象，但必须有更好的方法。我只想检查它们是否发生碰撞，然后将它们从视图和数组中删除。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T12:16:24.050

你`collide`在你的问题中使用了这个词而没有告诉我们你的意思 - 这就是为什么到目前为止的其他答案没有帮助:)他们在谈论“字典/数组中的重复项目”中的碰撞，但你的意思是碰撞如`overlay on the screen`.

这可能是进行此测试的最糟糕的方式 - 当您获得大量图像时，它会迅速变得太慢。我不禁认为您正在尝试解决一个比我们任何一个都聪明得多的人已经解决的问题-您*到底*要做什么-也许完整的物理引擎可能是实现您的更好的方法最终目标？

例如，看看[花栗鼠使用的空间散列数据结构](http://chipmunk-physics.net/release/ChipmunkLatest-Docs/#cpSpace-SpatialHash)- 这将创建一个包含所有对象的树 - 不在树的同一叶子中的对象不能碰撞，因此您可以快速减少比较。但是，该链接有一些图表比我在这里能更好地解释原理：）

如果你还没有，你可以试试这个来优化内部循环：

```
// Compare each image with the others to see if they overlap
NSMutableSet *colliding = [NSMutableSet new];
for (NSInteger indexA = 0; indexA < myImages.count; ++indexA) {
    UIView *a = [myImages objectAtIndex:indexA];
    CGRect rectA = a.frame;

    for (NSInteger indexB = indexA; indexB < myImages.count; ++indexB) {
        UIView *b = [myImages objectAtIndex:indexB];
        if (a==b) continue;

        CGRect rectB = b.frame;
        CGRect intersection = CGRectIntersect(rectA, rectB);
        if (NO == CGRectIsNull(intersection)) {
            [colliding addObject:a];
            [colliding addObject:b];
        }
    }
}

// Remove the colliding images
for (UIView *c in colliding) {
    [c removeFromSuperview];
    [myImages removeObject:c];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:08:09.303

您可以使用[NSCountedSet](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/Reference/Reference.html)。

```
NSArray *array = [[NSArray alloc] initWithObjects:@"1",@"1",@"0",nil];
NSCountedSet *set = [[NSCountedSet alloc] initWithArray:array];
NSLog(@"%@",set); // (1 [2], 0 [1]) // object 1 is collide 
for(id obj in set)
{
    if ([set countForObject:obj]>1) {
        //collide
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T11:43:31.617

您是否正在寻找一种同时查找位于两个不同数组中的对象的方法？

如果是这样，我建议使用`indexesOfObjectsPassingTest:`of `NSArray`。

```
@implementation NSArray (Comparison)
- (NSIndexSet *)indexesOfObjects:(NSArray *)objects {
    return [self indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop) {
        return [objects containsObject:obj];
    }];
}
- (NSArray *)objectsCommonWithArray:(NSArray *)array {
    return [self objectsAtIndexes:[self indexesOfObjects:array]];
}
@end 
```

然后你可以这样做：

```
// assuming array1 and array2 exist.
NSArray *commonObjects = [array2 objectsCommonWithArray:array2]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:55:34.143

`NSArray`s 有一个`containsObject:`方法可以用来代替内部循环。但是将一个对象中的所有对象放入一个集合 ( `[NSSet setWithArray:]`) 并遍历另一个数组，检查它们是否在集合中可能会更快（有人应该进行基准测试并查看）。或者将它们都转换并使用`intersectSet:`（在可变副本上）。我的猜测是，随着数组变大，set 方法会更快，但它不会对你拥有的数字产生影响。

# php - 为什么 PHP 函数/方法中没有“不可用参数”错误？

> ID：12799250
> 
> 赞同：1
> 
> 时间：2012-10-09T11:40:08.420
> 
> 标签：php

我只花了 10 分钟寻找一个错误，当我发现我将某些东西作为第二个参数传递给一个方法时，它不需要超过 1 个参数。我不得不通过其他方式通过它。

这就是我的问题出现的时候：为什么当你传递一个不可用的参数时 PHP 不抛出错误？

除了我自己的 func_get_args 答案之外，我是否遗漏了什么？

```
function test($a)
{

}

test('a', 'b'); // no error, but no 2nd parameter in test(). 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T11:46:33.843

我个人能想到的唯一答案：

[func_get_args](http://php.net/func_get_args)使您能够从函数调用中动态获取参数，使任意数量的参数有效。

# mongodb - 如何使用 QueryBuilder 和 MongoDB 构建 ObjectIds 的 $in 查询

> ID：12799256
> 
> 赞同：4
> 
> 时间：2012-10-09T11:40:17.170
> 
> 标签：mongodb, query-builder

我正在尝试使用 QueryBuilder（MongoDB Java API 2.9.1）构建一个 $in 查询。当查询是字符串数组时我没有问题，但是当我尝试使用 ObjectIds 数组时它不起作用（不返回任何内容）。

我能够成功运行查询并从控制台获得结果：

在控制台查询： db.collection.find({removed:false,app_id: {$in : [ObjectId("4f75c533ac99d845186e19b2"), ObjectId("4f75c533ac99d845186e19b3")]}})

QueryBuilder (MongoDB Java API 2.9.1) 创建的查询：

对象[] id；

Java 代码：DBObject query = QueryBuilder.start("app_id").in(ids).and("removed").is(false).get();

DBObject 上的 ToString 产生： { "app_id" : { "$in" : [ { "$oid" : "4f75c533ac99d845186e19b2"}]} , "removed" : false}

不确定我是否做错了什么或 API 不支持和 $in 类型的 ObjectId 查询。有任何想法吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-14T13:02:11.203

您的 id 应该是类型`org.bson.types.ObjectId`，所以这样的东西应该可以工作：

```
import org.bson.types.ObjectId;

ObjectId[] ids = new ObjectId[]{
  new ObjectId("1234568abcd"), 
  new ObjectId("1234567abcd")};

DBObject query = QueryBuilder.start("app_id").in(ids)
  .and("removed").is(false).get(); 
```

# java - Google plus-cmdline-sample

> ID：12799263
> 
> 赞同：0
> 
> 时间：2012-10-09T11:40:37.030
> 
> 标签：java, oauth-2.0, google-plus

我尝试访问我的 Google+ 帐户以获取我的数据。现在，我找到了样本，但它不能正常工作......

见[这里](http://code.google.com/p/google-api-java-client/source/browse/plus-cmdline-sample/src/main/java/com/google/api/services/samples/plus/cmdline/PlusSample.java?repo=samples)：

我的问题在第 70 行！

如果我在抛出异常后尝试运行该程序

```
Exception in thread "main" java.lang.NoClassDefFoundError: javax/servlet/http/HttpServletRequest
at com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver.getRedirectUri(LocalServerReceiver.java:97)
at com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp.authorize(AuthorizationCodeInstalledApp.java:71)
at com.google.api.services.samples.plus.cmdline.PlusSample.authorize(PlusSample.java:70)
at com.google.api.services.samples.plus.cmdline.PlusSample.main(PlusSample.java:77)
Caused by: java.lang.ClassNotFoundException: javax.servlet.http.HttpServletRequest
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 4 more 
```

* * *

现在我尝试了 google-plus-java-starter 项目。

我在控制台上注册，得到了我的 client_id 和 client_secret 以及我的 API 密钥，但现在抛出了一个异常。

```
Attempting to open a web browser to start the OAuth2 flow
Once you authorize please enter the code here: [entered myCode here]

============== Get my Google+ profile ==============

Okt 15, 2012 2:00:06 PM Sample getProfile
Schwerwiegend: {
"error": {
"errors": [
{
"domain": "usageLimits",
"reason": "dailyLimitExceededUnreg",
"message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup.",
"extendedHelp": "https://code.google.com/apis/console"
}
],
"code": 403,
"message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup."
}
}

Exception in thread "main" java.io.IOException: Stream closed
at java.util.zip.GZIPInputStream.ensureOpen(Unknown Source)
at java.util.zip.GZIPInputStream.read(Unknown Source)
at java.io.FilterInputStream.read(Unknown Source)
at com.google.api.client.http.HttpResponse.parseAsString(HttpResponse.java:464)
at Sample.main(Sample.java:45) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T11:51:50.950

好吧，您的问题的简单答案就是这个原因：

```
Caused by: java.lang.ClassNotFoundException: javax.servlet.http.HttpServletRequest 
```

Java 运行时正在寻找`HttpServletRequest`类，但在类路径中找不到它。

`HttpServletRequest`只能在 Java EE 框架（Servlet 框架）中找到，并且只能通过 Web Container / Application Server 调用（因为它是 Servlet）。

您正在尝试做的是进行 OAuth 2 舞蹈，并且在舞蹈中，服务提供者（您发送请求的服务器）将 HTTP 重定向到您的 Web 应用程序。我想说的是，OAuth 舞蹈必须作为 Web 应用程序来完成。

要`Sample`独立运行，本质上，您将在 Web 容器之外运行 Servlet。从本质上讲，这意味着您必须编写一个 HTTP 层来侦听端口、转换 HTTP 协议`HttpServletRequest`并能够接收`HttpServletResponse`和填充回 HTTP 响应（请参阅[相关的 SO 问题](https://stackoverflow.com/questions/9559295/can-we-have-servlets-outside-the-servlet-container-on-a-web-server)）。

我不知道您提供的示例链接是如何运行的，但我很确定使用了 Servlet 容器（可能通过测试用例？）

祝你好运！:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:02:21.707

这里还有可用的 Plus java starter 示例：

[https://code.google.com/p/google-plus-java-starter/](https://code.google.com/p/google-plus-java-starter/)

These include a command line example that should work.

# mysql - django.db.utils.IntegrityError: 1452 '无法添加或更新子行：外键约束失败

> ID：12799264
> 
> 赞同：3
> 
> 时间：2012-10-09T11:40:39.057
> 
> 标签：mysql, django

我正在尝试将 provider 上的 foreignKey 和 bestbuy_type 上的 M2Mfield 链接 - 但是每次我尝试将任何内容保存到这些字段中的任何一个时，我都会收到错误消息：

```
(1452, 'Cannot add or update a child row: a foreign key constraint fails (`savingschampion`.`products_masterproduct`, CONSTRAINT `provider_id_refs_id_2ea9c584` FOREIGN KEY (`provider_id`) REFERENCES `products_provider` (`id`))') 
```

这些字段在我的模型中指定为：

```
class MasterProduct(BaseModel):
    provider = models.ForeignKey('products.Provider', related_name = 'master_products', blank=True, null=True)
    bestbuy_type = models.ManyToManyField('products.BestBuy',blank=True, null=True)
    ...other (no relationship) fields which work fine 
```

使用它实际上会在 django admin 中为字段填充正确的值，但是在保存时会产生错误。

使用 MySQL 和指定的引擎是：

```
'ENGINE': 'django.db.backends.mysql' 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T13:27:58.040

事实证明，正在创建的新表使用的是 InnoDB，而不是像现有表那样使用 MyISAM。

将此行添加到我的数据库配置中，通过强制 South 创建的新表使用 MyISAM 为我解决了这个问题：

```
'OPTIONS'  : { 'init_command' : 'SET storage_engine=MyISAM', }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-23T06:19:59.840

**'OPTIONS' : { 'init_command' : 'SET storage_engine=MyISAM', },** <<-- 这对我不起作用，但在清理我的数据库表中的数据后，我想修改它，虽然这不是一个好方法跟随。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-09T10:45:24.010

我已经解决了将所有 MyISAM 类型表转换为 InnoDB 应用此脚本生成的 SQL 命令的相同问题：

```
SET @DATABASE_NAME = 'name_of_your_db';

SELECT  CONCAT('ALTER TABLE `', table_name, '` ENGINE=InnoDB;') AS sql_statements
FROM    information_schema.tables AS tb
WHERE   table_schema = @DATABASE_NAME
AND     `ENGINE` = 'MyISAM'
AND     `TABLE_TYPE` = 'BASE TABLE'
ORDER BY table_name DESC; 
```

然后在 django 设置中使用此选项：

```
'OPTIONS'  : { 'init_command' : 'SET storage_engine=InnoDB', }, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-26T08:42:45.120

备份表中的数据，然后从表中删除数据。再次运行迁移它会正常工作。

# eclipse - tomcat没有在eclipse中启动

> ID：12799265
> 
> 赞同：0
> 
> 时间：2012-10-09T11:40:45.627
> 
> 标签：eclipse, tomcat

当我在 Eclipse 中启动我的 tomcat 时，它开始（绿色错误 - 消失 - 红色出现并且 consol 显示“服务器在 535 毫秒内启动”）在状态栏中仍然显示“正在启动 tomcat v6.0”。在一段时间内超时并说服务器无法启动。我将超时从 defaultone 增加到 100 毫秒。还是同样的问题。有人知道吗？

为此，我尝试并应用了 stackoverflow 和其他网站中给出的各种解决方案，但都失败了。Tomcat 在 Eclipse 之外启动。检查 netstat 并比较任何端口没有冲突。（从 Eclipse 更改所有必要的端口）添加了 tomcat-juli.jar（解决方案之一）。我还没有配置一个项目。刚启动tomcat。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:55:51.990

我能够弄清楚。目前我不记得有一个应用程序（软件）在后面运行。（由网络管理员安装）用于 IP/端口相关配置。

# jquery - Google Closure 替代 jQuery 动态创建 dom 元素

> ID：12799266
> 
> 赞同：0
> 
> 时间：2012-10-09T11:40:47.030
> 
> 标签：jquery, google-closure, google-closure-templates

> **可能重复：**
> [关闭来自 html 文本的库 dom 节点](https://stackoverflow.com/questions/12318667/closure-library-dom-node-from-html-text)

在 jQuery 中你可以像这样创建一个 dom 元素

```
var domElement = $("<div><p>more tags and html</p></div>"); 
```

**你如何在 Google Closure 中做同样的事情？**

我不想为了看起来最小的东西而包含整个 jQuery 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:46:49.187

从[文件](http://closure-library.googlecode.com/svn/docs/closure_goog_dom_dom.js.html)

```
goog.dom.createElement(name); //creates a new element
goog.dom.createDom(tagName, opt_attributes, var_args) //Returns a dom node with a set of attributes. 
```

尝试（未经测试的代码）：

```
 var p = goog.dom.createElement('p');
 p.innerHTML = "abc";
 var div =  goog.dom.createDom('div', null, p); 
```

我知道它不像 jquery 那样优雅和干净 :)

# mysql - Mysql - 如何更新表中每行在连接中重复的 2 列

> ID：12799267
> 
> 赞同：1
> 
> 时间：2012-10-09T11:40:50.513
> 
> 标签：mysql, sql-update

我有一个名为 A 的表
A {
   x int,
   y int,
   z int
}
，我有另一个表 B 和
B {
   x int
   代码字符串，
   值字符串
}。
B-> 代码可以有 2 个值：{code1,code2} 基于哪个值也不同。
现在我需要用 y = B.value 如果 code ='code1' 和 z = B.value 如果 code ='code2' 更新 A。我正在尝试在单个查询中执行此操作。
我尝试了通常的更新：
`update A,B set A.y=if(B.code='code1',B.value,A.y), A.z=if(B.code='code2',B.value,A,z) where A.X=B.x .`
但它只更新 y。我认为这是因为 A 中的每一行都创建了 2 行，并且我猜更新被覆盖了。我的推理正确吗？有没有办法在更新查询中做到这一点

# c# - Linq to SQL 记录未更新

> ID：12799268
> 
> 赞同：1
> 
> 时间：2012-10-09T11:40:53.677
> 
> 标签：c#, linq-to-sql

我正在尝试从表中获取记录列表，然后在`foreach`循环中我试图`update`逐个记录记录。

这是我的代码

```
 public IEnumerable<MessageOut> GetSMSInformation()
        {
            using (var db = new DataClasses1DataContext())
            {
                var sms = db.MessageOuts.Where(msg => msg.msgstatus.Equals("Pending")).Select(msg => msg);
                return sms.ToList();
            }
        }

     public void StartSMSSending()
        {
            var information = GetSMSInformation();

            foreach (var sms in information)
            {
                SendSMS(sms.reciever, sms.msg);
                UpdateRecords(sms,"Delivered", DateTime.Now);
            }
        }

   public void UpdateRecords(MessageOut sms, string msgStatus, DateTime sentTime)
        {
            using (var db = new DataClasses1DataContext())
            {
                sms.msgstatus = msgStatus;
                sms.senttime = sentTime;
                db.SubmitChanges();
            }
        } 
```

记录只是不更新​​。我也没有收到任何错误。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T11:47:05.640

为了使用 Linq2Sql 类执行更新操作，您需要保持上下文处于活动状态。在上面的示例中，您将您的选择包含在 using 语句中，因此您的记录被返回，然后上下文被转储。当您进行更新时，会有一个新的上下文，因此没有注册到对象的更改。一种方法是使上下文成为更全局的对象或将其作为参数传递。

```
public IEnumerable<MessageOut> GetSMSInformation(DataContext context)
{
    var sms = context.MessageOuts.Where(
        msg => msg.msgstatus.Equals("Pending")).Select(msg => msg);
    return sms.ToList();
}

public void StartSMSSending()
{
    using (var db = new DataClasses1DataContext())
    {
        var information = GetSMSInformation(db);

        foreach (var sms in information)
        {
            SendSMS(sms.reciever, sms.msg);
            UpdateRecords(sms,"Delivered", DateTime.Now, db);
        }
    }
}

public void UpdateRecords(MessageOut sms, string msgStatus, DateTime sentTime, DataContext context)
{
    sms.msgstatus = msgStatus;
    sms.senttime = sentTime;
    context.SubmitChanges();
} 
```

或者，您可以这样做（我的首选方法）：

```
public IEnumerable<MessageOut> GetSMSInformation()
{
    var sms = Context.MessageOuts.Where(
        msg => msg.msgstatus.Equals("Pending")).Select(msg => msg);
    return sms.ToList();
}

public void StartSMSSending()
{
    var information = GetSMSInformation(db);

    foreach (var sms in information)
    {
        SendSMS(sms.reciever, sms.msg);
        UpdateRecords(sms,"Delivered", DateTime.Now, db);
    }
}

public void UpdateRecords(MessageOut sms, string msgStatus, DateTime sentTime)
{
    sms.msgstatus = msgStatus;
    sms.senttime = sentTime;
    Context.SubmitChanges();
}

private DataClasses1DataContext _context = null;
public DataClasses1DataContextContext
{
    get
    {
        return _context ?? (_context = new DataClasses1DataContext());
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T11:46:48.783

您正在从此数据库上下文中提取数据：

```
 public IEnumerable<MessageOut> GetSMSInformation()
    {
        using (var db = new DataClasses1DataContext())
        {
            var sms = db.MessageOuts.Where(msg => msg.msgstatus.Equals("Pending")).Select(msg => msg);
            return sms.ToList();
        }
    } 
```

然后，您正在从先前的数据库上下文更新数据，您是否正在将更改提交到不同的数据库上下文：

```
 public void UpdateRecords(MessageOut sms, string msgStatus, DateTime sentTime)
    {
        using (var db = new DataClasses1DataContext())
        {
            sms.msgstatus = msgStatus;
            sms.senttime = sentTime;
            db.SubmitChanges();
        }
    } 
```

将数据库上下文作为参考传递，或者最好**将其作为类的成员**。这确保了您的类实例的单个数据库上下文实例。

我的建议如下：

```
class SmsCenter
{
        private DataClasses1DataContext _dbContext;

        public SmsCenter()
        {
            _dbContext = new DataClasses1DataContext();
        }

        public IEnumerable<MessageOut> GetSMSInformation()
        {
            var sms = _dbContext.MessageOuts.Where(msg => msg.msgstatus.Equals("Pending")).Select(msg => msg);
            return sms.ToList();
        }

        public void StartSMSSending()
        {
            var information = GetSMSInformation();

            foreach (var sms in information)
            {
                SendSMS(sms.reciever, sms.msg);
                UpdateRecords(sms,"Delivered", DateTime.Now);
            }
        }

        public void UpdateRecords(MessageOut sms, string msgStatus, DateTime sentTime)
        {
            sms.msgstatus = msgStatus;
            sms.senttime = sentTime;
            _dbContext.SubmitChanges();
        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:01:07.927

您不会将“短信”对象与数据库相关联，例如

```
 sms.msgstatus = msgStatus;
            sms.senttime = sentTime;
            db.MessageOut.Add(sms);
            //or
            db.MessageOut=sms;
            db.SubmitChanges(); 
```

# python - 使用 gtk.WindowGroup 与 python matplotlib 的窗口之间的通信

> ID：12799269
> 
> 赞同：1
> 
> 时间：2012-10-09T11:40:56.407
> 
> 标签：python, numpy, matplotlib

我正在用 python 开发一个应用程序，它使用**matplotlib**、**numpy**和**gtk**绘制信息。我正在使用 matplotlib 绘制 numpy 数据，用户可以更改小部件中的一些参数来修改绘图

出于设计原因，我想将绘图（和数据）与控制 GUI 分开，然后我将数据绘制在一个窗口中，并将控件放在单独的窗口中。在**gtk**中，我发现看起来可以通过多个窗口发送数据的*WindowGroup*小部件，但是我找不到方法！

以下代码显示了问题的简化：我在窗口中绘制了一个正弦曲线，用户可以在窗口中使用垂直调整条（事件）修改变量*fm 。*当我运行脚本时，我可以看到事件（移动垂直调整条）触发了函数，但没有实现绘图。

怎么能改变剧情？*或使用WindowGroup*小部件在两个窗口之间发送消息？

```
#!/usr/bin/python

import gtk
import numpy
import matplotlib.pyplot as plt

from matplotlib.backends.backend_gtkagg \
    import FigureCanvasGTKAgg as FigureCanvas

def update_hscale(event):
    global t    
    fm = hscale.get_value()
    y_new = numpy.sin(2*fm*t)
    l.set_ydata(y_new)
    plt.draw()
    print "doing fm=", fm

# define the window group
window_group=gtk.WindowGroup()

# matplotlib plot in window 1
fm = 5.0
t = numpy.arange(200)
y = numpy.sin(2*fm*t)
fig = plt.figure(1)  
ax = fig.add_subplot(111)
l, = ax.plot(t, y)

win1 = gtk.Window()
win1.connect("destroy", gtk.main_quit)
win1.set_default_size(800,300)
vbox1 = gtk.VBox()
canvas = FigureCanvas(fig)
vbox1.pack_start(canvas, fill=True)
win1.add(vbox1)

# controls in window 2
win2 = gtk.Window()   
vbox2 = gtk.VBox()    
adj = gtk.Adjustment(0.0, -5, 5, 1.0, 1.0, 1.0)
hscale = gtk.HScale(adj)
hscale.set_size_request(200, 30)
vbox2.pack_start(hscale)
hscale.connect("value-changed", update_hscale)
win2.add(vbox2)

# adding windows to window_group
window_group.add_window(win1)   
window_group.add_window(win2)   

win1.set_default_size(400,300)
win1.show_all()
win2.show_all()
gtk.main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:17:51.397

我找到了一个解决方案，首先我删除了所有的`gtk.WindowGroup`东西：

*   `window_group=gtk.WindowGroup()`
*   `window_group.add_window(win1)`
*   `window_group.add_window(win2)`)

`canvas`我在函数中重绘而`update_hscale`不是在情节中`l`：

```
def update_hscale(event):
    global t    
    fm = hscale.get_value()
    y_new = numpy.sin(2*fm*t)
    l.set_ydata(y_new)
    canvas.draw()
    print "doing fm=", fm 
```

# ruby-on-rails - 直接的 Rails 部署

> ID：12799272
> 
> 赞同：0
> 
> 时间：2012-10-09T11:41:11.397
> 
> 标签：ruby-on-rails, git, nginx, web-deployment, thin

我是 ruby​​ 新手，我想更多地了解它是如何工作的。因此，我一直在虚拟机中测试服务器配置以进行快速 Rails 部署。

我在 Ubuntu 10.04 环境中运行 RVM、Ruby、Rails、Git、Gitolite、PostgreSQL、Thin 和 Nginx。

现在我想把所有东西都绑在一起。但是，我在部署过程中遇到了困难。

将项目提交到 Git 主干后，我想挂钩部署操作以将应用程序放在正确的位置，设置为生产，安装包，进行迁移并重新启动 Nginx。

但我找不到关于它如何工作的简单参考。我在谷歌中找到的只是使用乘客、capistrano 和其他人的指南。我想在 git commit 操作上触发部署，类似于 heroku，但是在 100% 服务器端执行该操作的最佳工具是什么？

制作一些shell脚本怎么样？如何手动部署项目？步骤是什么？是否有任何指南不假设我知道 Rails 部署中的所有细节？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:06:42.720

您可能正在寻找的想法是一个`git post-receive`钩子（可以在此处找到教程：http: [//toroid.org/ams/git-website-howto](http://toroid.org/ams/git-website-howto)）。

通过这个钩子，你应该触发例如。一个 shell 脚本，它应该执行你需要的所有步骤——它们是：

1.  从 git repo 签出 HEAD 提交（`git checkout -f`参见链接教程）
2.  跑`bundle install`
3.  运行`bundle exec rake db:migrate`- 这假设您已经创建了数据库
4.  重新启动/启动瘦服务器集群（这里不确定，如果它与乘客类似，我使用此操作只是为了创建一些`restart.txt`文件） - 我假设你有你的 nginx 作为它前面的反向代理，对吧？

这是长话短说。它有点复杂，例如。如果您使用资产管道（rails >= 3.1），您想预编译资产等。但以上是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:35:41.800

好吧，我设法让它几乎完全运行。

到目前为止，我可以追踪的主要行动是：

*   用户推送到主干，必须使用 git 挂钩使用脚本触发后续步骤。

该脚本必须执行以下操作：

*   将项目克隆到 /var/www 文件夹；
*   将“薄”宝石插入 Gemfile；
*   在应用程序文件夹中运行“捆绑”命令；
*   预编译应用程序文件夹中的资产；
*   迁移数据库；
*   停止 nginx 和瘦；
*   再次重新启动瘦和 nginx。

如果应用程序是新的，我们还必须：

*   创建与数据库信息匹配的新用户；
*   创建生产数据库；
*   插入一个新的nginx配置文件；
*   从应用程序文件夹中导出精简配置，如下所示：

`thin config -C /etc/thin/app.yml -c /var/www/app --servers 1 -e production`

动作顺序或多或少是这样的：

```
$ bundle package
$ bundle install --deployment
$ RAILS_ENV=production rake db:migrate
$ rake assets:precompile
$ thin start -C /etc/thin/app.yml 
```

这是目前的基本情况。我想让它 100% 工作，然后我想在互联网上发布指南。

# 更新

我说我会做的指南：

[https://github.com/sentient06/RDH/wiki](https://github.com/sentient06/RDH/wiki)

# c++ - 如何检查 tiff 文件的无效格式错误

> ID：12799275
> 
> 赞同：0
> 
> 时间：2012-10-09T11:41:22.553
> 
> 标签：c++, c, image, tiff

我正在使用一个输出 TIFF 文件的程序。但是，当我尝试从绘图或图片查看器或任何其他图像查看器程序打开该 tiff 文件时，我得到的响应是 tiff 文件的格式无效。

我想深入挖掘，看看为什么我会收到无效的格式错误。我该如何检查。是否有任何 C 或 C++ 代码可以读取 tiff 文件并对格式执行错误检查。什么是最简单的检查方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:47:12.083

查看[`libtiff`](http://www.libtiff.org/libtiff.html)有关打开 TIFF 文件和[查看错误](http://www.libtiff.org/libtiff.html#Errors)的信息。

# accurev - 无法在 Accurev 中创建工作区

> ID：12799276
> 
> 赞同：0
> 
> 时间：2012-10-09T11:41:24.847
> 
> 标签：accurev

我无法在 Accurev 中创建工作区。它给出了这样的错误：

```
Workspace/ref tree location already in use. Its saying Error- 61 - client.c:569 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T19:30:54.400

该消息通常意味着您尝试放置工作空间的物理位置已被另一个工作空间使用。即使它是一个已停用的工作区，您也无法使用该位置，直到您移动已停用的工作区。如果这没有帮助，我建议联系 accurev 支持（support.accurev.com 或 support@accurev.com）以获取更多故障排除。

# android - 如何在android应用程序中维护以前的屏幕历史记录？

> ID：12799277
> 
> 赞同：1
> 
> 时间：2012-10-09T11:41:28.253
> 
> 标签：android

在我的应用程序中有十个活动。

当我按下后退按钮时，10 个屏幕已保存历史记录。但是当我单击下一个按钮时，新屏幕没有任何历史数据。

单击下一步按钮时如何维护历史记录？我的意图代码是

```
Bundle bundle = getIntent().getExtras();
String Group = bundle.getString("GroupApVehicle");
Intent log = new Intent(EngineCompartment.this, FrontAxle.class);

Bundle bun = new Bundle();
bun.putString("Group", Group);
bun.putString("ECSCORE", _StrpretriScoreCount);
System.out.println("Enginegroup" + Group);
bun.putString("TestIDFA", strtestid);
log.putExtras(bun);
startActivityForResult(log,IPC_ID); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T11:47:02.910

我建议您通过实现`onSaveInstanceState()`回调来保存您的活动状态。有可能在 10 次不同的活动之后，Android 会尝试清理内存，保存活动状态可确保操作系统知道您想要保留历史记录。

有关更多信息，请参见此处：http: [//developer.android.com/guide/components/tasks-and-back-stack.html#ActivityState](http://developer.android.com/guide/components/tasks-and-back-stack.html#ActivityState)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:50:44.127

请描述您的后台堆栈的当前状态（例如活动 A -> B -> C -> D）以及您想要实现的行为（例如切换活动 D -> B）。

编辑：

据我了解，您希望将活动保留在内存中并在用户按下“返回”按钮时保留其状态。您可以使用以下代码覆盖后退按钮的行为：

```
    公共无效 onBackPressed () {
        moveTaskToBack (true);
    }

```

但不能保证 Android 会将您的活动保留在内存中。如果操作系统需要额外的内存，它可能会被破坏。修复：您的应用程序应该在您的活动中侦听 onPause() 和 onResume() 事件。您必须对数据进行序列化和反序列化，在活动暂停和恢复时保存活动的状态。

此外，您应该将此属性添加到 AndroidManifest.xml 中的每个活动块中，您只想初始化一次并在应用程序生命周期内保留其状态：

```
    android:launchMode="singleTask"

```

然后使用以下代码示例在活动之间切换：

```
    意图 i = new Intent(C.this, B.class);
    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    开始活动（一）；

```

您也可以使用 Intent.FLAG_ACTIVITY_REORDER_TO_FRONT，但launchMode 也应设置为“singleTask”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:01:24.397

您可以将历史记录手动存储在 sharedPreference 中。它是 android [http://developer.android.com/reference/android/content/SharedPreferences.html中的数据存储因素之一](http://developer.android.com/reference/android/content/SharedPreferences.html)

# matlab - Matlab - 如何使用 textscan 读取具有大量整数列的文件

> ID：12799279
> 
> 赞同：1
> 
> 时间：2012-10-09T11:41:36.483
> 
> 标签：matlab, file-io, csv

我有一个文件，其中包含以下格式的数据：

```
filename.jpg,132,234,234,345,4555,23333,344,...,333 
```

我已经`...`标记了一个事实，即我有一个很长的整数序列。在每一行上，我总共有 132 个整数。

我想读取矩阵中的数字，矩阵中的`132`列和行数与输入文件中的行数一样多。如何使用`textscan`函数读取这些数据？我应该如何指定这种格式？我还想将文件名的第一列读入一个单元格数组。

对于元胞数组，我使用了以下语法：

```
fid = fopen(inputPath);
buffer = textscan(fid, '%s%*[^\n]', 'Delimiter', ',');

close(fid); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:58:59.313

您可以`textscan`使用 a`csvread`代替您的第一个电话：

```
A = csvread('data.txt', 0, 1); 
```

最后两个参数指定数据开始的行和列。您的单元格将包含第一列中的字符串，`A`包含带有数据的矩阵。

否则，如果您真的必须使用`textscan`，请在旁边创建格式字符串：

```
fid = fopen('data.txt', 'r');
% crate a string with as many %f as you need
fmt = ['%s' repmat('%f', 1, 132)];
buffer = textscan(fid, fmt, 'Delimiter', ',');
names = buffer{1};
A = [buffer{2:end}];
fclose(fid); 
```

# java - cron4j 在 servlet/actionbean 上取消调度任务

> ID：12799280
> 
> 赞同：2
> 
> 时间：2012-10-09T11:41:39.703
> 
> 标签：java, servlets, scheduled-tasks, javabeans, cron4j

我已经使用 cron4j 开始了一项任务，使用 Stripes ActionBean 在某些条件下（他们还没有完成他们的工作）每天向人们发送电子邮件。

我将任务 ID 保存在 MySQL 中。

但是，我似乎无法阻止它。我尝试使用 id 来取消计划任务，但它不起作用。我只能通过确保条件始终为假来阻止它。

如何使用不同的调度程序实例停止任务（因为它使用 servlet 和 actionbean，我无法将调度程序实例保存在数据库中）？它甚至可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-25T15:36:18.197

我知道这是一篇很老的帖子，抱歉，最近才开始研究 cron4j。

您很可能没有获得相同的调度程序实例。调度程序有一个 getGUID 方法，当您实例化它时会发出消息，然后在您尝试取消调度时再次发出消息。如果它们不一样，那就是问题所在。

我现在正在一个网站上实现 cron4j，并决定使用单例模式来确保每当我请求调度程序时，我都会加载唯一的实例。到目前为止，我可以毫无问题地取消计划。

# c# - MEF 导入分辨率

> ID：12799283
> 
> 赞同：5
> 
> 时间：2012-10-09T11:41:59.637
> 
> 标签：c#, .net, dependency-injection, mef, dependency-management

假设我有一个类，其中包含一组标记有`[Import]`属性的字段，所有这些字段都禁止[重组](http://mef.codeplex.com/wikipage?title=Recomposition)。

在某些时候，这个类是使用实例化的，`new MyClassWithInjectedFields(...)`并且所有相应的依赖项都是使用`MEF`框架注入的——没什么大不了的，只有双射`Export-To-Import`映射。

> ## 问题：
> 
> *   假设*在这种情况下*注入字段的值将**保持不变，**直到类实例被垃圾收集，是否安全？
>     
>     
> *   或者也许有一些罕见/晦涩的情况，它们*可能*会在运行时被隐式更改`MEF`？也许，当有人卸载或重新加载用于依赖解析的程序集时？

*（我是新手`MEF`，我不确定是否有办法在运行时影响依赖关系图，但是，显然可能有）。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T01:57:04.270

1) MEF 没有对 GC 做任何特殊的事情，因此在没有更多对对象的实时引用之前，不会对实例进行 GC。

2) 如果 Imports 未标记为可重新组合，则 MEF 只会更改 Imports 的值。您不能在正在运行的 .NET 进程中卸载\重新加载程序集，您可以卸载 AppDomain，但这样做实际上会强制终止对象引用，但 MEF 不会做任何特殊的事情来重置它们。

# symfony - 如何在 Symfony 2 中配置一个记住我的监听器？

> ID：12799286
> 
> 赞同：9
> 
> 时间：2012-10-09T11:42:14.753
> 
> 标签：symfony

我已经成功实现了[自定义身份验证提供程序](http://symfony.com/doc/master/cookbook/security/custom_authentication_provider.html)，但现在我还需要添加“记住我”功能，但我找不到有关如何执行此操作的文档。

我试着添加这个：

```
remember_me:
    key: "%secret%"
    lifetime: 31536000 # 1 year
    always_remember_me: true 
```

但它是这样说的：

`You must configure at least one remember-me aware listener (such as form-login) for each firewall that has remember-me enabled.`

我找到了这个，但我不确定如何使用它：`Symfony\Component\Security\Core\Authentication\Provider\RememberMeAuthenticationProvider`

那么在哪里`RememberMeAwareInterface`？（我想有一个？比如 ContainerAware）我应该怎么处理它？

我认为我不需要编写自己的实现，默认的应该可以与我的自定义身份验证提供程序一起工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T14:18:31.983

我编写的自定义 Facebook 身份验证提供程序遇到了同样的问题。解决方案最终非常简单：

我假设您实现了一个自定义身份验证提供程序，其自定义`SecurityFactoryInterface`实现从`Symfony\Bundle\SecurityBundle\DependencyInjection\Security\Factory\AbstractFactory`. 如果你这样做了，剩下的就是配置问题：

1.  在您的安全配置中，`remember_me`为您的防火墙配置功能。假设您将其配置到`public`防火墙中，添加的配置参数可能如下所示：

    ```
    firewalls:
        public:
            remember_me:
                key:      "%secret%"
                lifetime: 31536000 # 365 days in seconds
                path:     /
                domain:   ~ # Defaults to the current domain from $_SERVER 
    ```

2.  在相同的配置中，为您的身份验证提供程序启用 remember_me 功能。假设您将其配置到`public`防火墙中并且您的`SecurityFactoryInterface`实现`getKey()`方法返回`yourAuthProviderKey`，添加的配置参数可能如下所示：

    ```
    firewalls:
        public:
            yourAuthProviderKey:
                remember_me:        true 
    ```

3.  最后，当您的身份验证提供程序处理登录时，请确保您通过在 http 请求中`_remember_me`使用值命名的 http GET 或 POST 参数来请求记住我的功能`1`。（但请注意：如果您在安全配置中更改了其默认值，则此参数可能需要不同的名称。）例如，在我的情况下，我必须告诉 Facebook 在处理身份验证后重定向到以下 URL `http://www.mydomain.com/auth-callback/?_remember_me=1`：. （注意后面的部分`?`）

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T12:44:30.160

你把这个添加到你的`form_login`部分了吗？

```
form_login:
    remember_me: true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-08T10:35:02.830

从 Symfony 2.8 开始，“key”被替换为“secret”。所以你将拥有：

```
remember_me:
   secret: %secret%
   lifetime: 31536000 
```

如果您遇到此错误，那就是修复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-30T04:51:40.143

你可以试试这个：

```
firewalls:                   
    secured_area:
        pattern:    ^/
        anonymous: ~
        form_login:
            csrf_provider: form.csrf_provider
            login_path:  login
            check_path:  login_check
            always_use_default_target_path: true
            default_target_path: /the-cao
            remember_me: true
        logout:
            path: /logout
            target: /
        remember_me:
            key:      "%secret%"
            lifetime: 31536000 # 365 days in seconds
            path:     /
            domain:   ~ # Defaults to the current domain from $_SERVER 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-20T14:12:40.797

在我的情况下，它发生在我创建实现 SecurityFactoryInterface 的工厂类时（如示例“如何创建自定义身份验证提供程序”中所述）。后来我发现创建这个工厂的另一种方法是从 AbstractFactory 扩展，其中包含必要的自述文件（你可以找到它的 create() 方法）。所以有两种解决方案：1）扩展 AbstractFactory 而不是实现 SecurityFactoryInterface 2）实现 SecurityFactoryInterface 并复制粘贴自述文件相关代码。在 symfony 3.1 中：

```
 // add remember-me aware tag if requested
    if ($this->isRememberMeAware($config)) {
        $container
            ->getDefinition($listenerId)
            ->addTag('security.remember_me_aware', array('id' => $id, 'provider' => $userProviderId))
        ;
    } 
```

# ember.js - ember.js 连接控制器（）

> ID：12799293
> 
> 赞同：3
> 
> 时间：2012-10-09T11:42:34.940
> 
> 标签：ember.js

如果您有 2 个不同的页面（称为主页和帖子）共享几乎完全相同的内容和功能，那么将一个页面绑定到另一个页面的最佳方法是什么？

在这个[小提琴](http://jsfiddle.net/tatiana/UmHRf/1/)中，我通过直接在路由器中设置它，将一个视图的内容与另一个视图的内容相关联，如下所示：

```
Router: Ember.Router.extend({
 root: Ember.Route.extend({

     //transitions 

      home: Ember.Route.extend({
          route: '/',
          connectOutlets: function(router) {    
               var posts = router.get('postsController.content');                              
               router.get('homeController').set('content', posts);
               router.get('applicationController').connectOutlet('home');
          },
      }),

    //posts and other states
  })
}) 
```

但是：如果帖子内容需要，我真的不需要即时更新主页内容，但如果我这样做了，会吗？

还有什么其他方法？是否可以使用 connectControllers() 然后在哪里使用它？这是我的失败尝试：[另一个小提琴](http://jsfiddle.net/tatiana/R635J/3/)

```
home: Ember.Route.extend({
     route: '/',
     connectOutlets: function(router) {                                            
         router.get('homeController').connectControllers('posts');                          
         router.get('applicationController').connectOutlet('home');
      },                    
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T12:13:50.453

你可以使用`template`助手。

```
<script type="text/x-handlebars" data-template-name="posts">
  <div class="right"><h2>posts page</h2>
    {{template "posts-details"}}
  </div>            
</script>

<script type="text/x-handlebars" data-template-name="posts-details">
  {{#each post in content}} 
    <article>                                   
      <h3><a {{action "doPost" context="post"}} {{bindAttr id="post.id"}}>{{post.title}}</a></h3>
      <p>{{post.date}}</p>
    </article>
  {{/each}}
</script> 
```

查看您[更新的小提琴](http://jsfiddle.net/MikeAski/UmHRf/3/)

# ruby-on-rails - rails 在 has_and_belongs_to_many 关系中指定 INNER JOIN 列

> ID：12799298
> 
> 赞同：0
> 
> 时间：2012-10-09T11:42:54.423
> 
> 标签：ruby-on-rails, has-and-belongs-to-many

我尝试通过 has_and_belongs_to_many 关系将“Points”链接到“Words”。

我使用一个名为 dictionnaries_points 的表，其中包含“dictionnary_id”和“linked_to”列。

我在模型中指定了我的列的名称“linked_to”

```
class Point < ActiveRecord::Base
  has_and_belongs_to_many :words, :association_foreign_key => "linked_to"
end

class Word < ActiveRecord::Base
   has_and_belongs_to_many :points, :foreign_key => "linked_to"
end 
```

所以我没有任何错误，但是：

*   Rails 没有给出与“linked_to”列中的整数匹配的所有单词......

*   Rails 仅在我的单词表中使用“word_id”而不是“linked_to”进行链接，如下面的查询所示：

    irb(main):002:0> p.words

    ?[1m?[36mWord Load (0.0ms)?[0m
    ?[1mSELECT "words".* FROM "words" INNER JOIN "points_words" ON **"words"."id"** = "points_words"."linked_to" WHERE "points_words ”。"point_id" = 1?[0m

--> 我想要 ON **words.linked_to** ...我如何指定 Rails 应该在“linked_to”列上建立关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:28:49.387

创建一个连接表迁移 points_words，id: false 并且同时具有 point_id 和 word_id。如果你这样做，p = Point.find(:all) 并调用 p.words，它会给你所有与 p 相关的单词。

希望这可以帮助。

# c# - 在 c#.net 中从 xml 文件创建类

> ID：12799300
> 
> 赞同：0
> 
> 时间：2012-10-09T11:43:03.160
> 
> 标签：c#, xml, visual-studio-2008

我有一个具有以下结构的 xml 文件，

```
<TestClass>
  <TestChildClass>
    <TestName Name="sample">
      <Table Name="table1" IdentityColumnName="RollNo" IntColumn="Mark" CharColumn="Name" >
        <Table Name="table2" IdentityColumnName="RollNo" IntColumn="SubjectCode" CharColumn="Subject" ReferenceColumn ="RollNo" >
            <Table Name="table3" IdentityColumnName="RollNo" IntColumn="Average" CharColumn="Subject" ReferenceColumn ="SubjectCode"/>          
         </Table>

        <Table Name="table4" IdentityColumnName="RollNo" IntColumn="Rank" CharColumn="Name" />
      </Table >
    </TestName >    
  </TestChildClass>
  </TestClass> 
```

我使用 XSD.EXE 为上述 xml 创建了一个类。但问题是，当我尝试为名为 TestClass.cs 的新类创建对象时，它会抛出错误，例如“同一个表‘表’不能是两个嵌套关系中的子表。” 如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:02:00.803

Your XML is not valid, you need to remove the lines and make sure to close the node for Table1

```
<TestClass>
  <TestChildClass>
    <TestName Name="sample">
      <Table Name="table1" IdentityColumnName="RollNo" IntColumn="Mark" CharColumn="Name" >
        <Table Name="table2" IdentityColumnName="RollNo" IntColumn="SubjectCode" CharColumn="Subject" ReferenceColumn ="RollNo" >
            <Table Name="table3" IdentityColumnName="RollNo" IntColumn="Average" CharColumn="Subject" ReferenceColumn ="SubjectCode"/>          
         </Table>
        <Table Name="table4" IdentityColumnName="RollNo" IntColumn="Rank" CharColumn="Name" />
      </Table >
    </TestName >    
  </TestChildClass>
</TestClass> 
```

# paypal - Paypal 通过信用卡链接捐款

> ID：12799302
> 
> 赞同：0
> 
> 时间：2012-10-09T11:43:06.390
> 
> 标签：paypal

我有一个非营利性网站，我在上面放了一个捐赠按钮，效果很好。

但是有些老年人没有贝宝账户。如果您点击捐赠链接并继续，它会将您带到信用卡输入屏幕。他们看不到继续链接。

有没有办法通过我的 hosts_button_id 直接链接到该页面？

因此，如果他们没有贝宝帐户，我想在我的网站上创建第二个链接。它将他们直接带到信用卡屏幕。

谢谢你

# c# - 为什么从 VS2010 IDE 启动时 C# Release 慢 3 倍？

> ID：12799303
> 
> 赞同：1
> 
> 时间：2012-10-09T11:43:11.273
> 
> 标签：c#, visual-studio-2010, performance, release, launch

> **可能重复：**
> [C# 64 位发布代码的反汇编视图比 32 位调试代码长 75%？](https://stackoverflow.com/questions/12397108/disassembly-view-of-c-sharp-64-bit-release-code-is-75-longer-than-32-bit-debug)

我有一个非常简单的 C# 控制台应用程序，帽子对大量元素进行了一些排序（只有几行代码与数组操作）。

当我使用 F5 或 Ctrl-F5 从 Visual Studio IDE 启动发布代码时，程序比直接从 Win-Explorer 启动时慢约 3 倍。

```
41.140 seconds when launched from VS 2010 IDE
13.950 seconds when launched by double-clicking myprogram.exe 
```

为什么？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T12:02:07.597

首先是一些细节...

请注意，.NET 中有两个主要的“优化”阶段。

*   在 C# 编译器级别

    ...不同 IL（中间语言）的生成...优化或非优化...由您的项目是否设置`DEBUG`标志来控制

*   在 JITer 级别

    ......当 IL 被翻译成机器代码（通过即时编译或通过 NGEN）......优化的机器代码可能会或可能不会生成

    注意：它不是通过生成的 IL控制 JITter 优化设置的 DEBUG 或 RELEASE 模式下的编译器......这是一个独立的设置。

主要的优化“胜利”发生在 JIT 级别。

*   [http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/57db50f1-54c7-4730-a097-c4976bb3a30b/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/57db50f1-54c7-4730-a097-c4976bb3a30b/)

当您通过 Visual Studio 调试 NET 程序时，通常您不希望 JITter 生成优化的机器代码，因为当您单步执行时，您的程序源语句不会与执行代码密切同步。

所以这就是为什么在 Visual Studio 中有一个选项可以关闭 JITter 优化（这相当于关闭带有`AllowOptimize=0`标志的 JITter 优化）......并且默认情况下 Visual Studio 会关闭 JITter 优化：

![在此处输入图像描述](../Images/725fa21b13009c3f2bd4bafa4f299e6e.png)

有关“抑制”选项的说明，请参见此处：

*   [http://msdn.microsoft.com/en-us/library/ms241594(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms241594(v=vs.85).aspx)

当您在 Visual Studio 之外运行 NET 应用程序时，该程序是编译为 DEBUG（未优化的 IL）还是 RELEASE（优化的 IL）都没有关系……默认情况下，JITter 将生成优化的机器代码。

> 因此需要注意的行为是，由于 JITter 优化设置不同，NET 程序在 Visual Studio 外部启动时比从 Visual Studio 启动时运行速度要快得多......即使它是 RELEASE 模式应用程序......as @ Knasterbax 观察到。此外，在调试 (F5) 时需要添加额外的开销，而不仅仅是从 Visual Studio 运行 (CTRL+F5)。

如果您从资源管理器运行您的应用程序（无论是 RELEASE 还是 DEBUG），然后您使用 Visual Studio“附加”到该进程，那么您的应用程序将使用正在应用优化的 JITter……您的代码将运行得更快……但任何源代码步进都不会同步。

如果取消选中“抑制 JIT 优化”，则可以在 Visual Studio 中以较差的调试体验为代价获得更快的执行速度。

* * *

最后，如果您需要/想要，有一种方法可以为您的应用程序代码关闭 JITter 优化：

*   通过将其放入 app.config 禁用整个应用程序的 JITter

> [.NET Framework 调试控件]
> AllowOptimize=0

*   您可以使用此属性告诉 JITter 不要优化指定的方法

> [MethodImpl(MethodImplOptions.NoOptimization)]

在方法体上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T11:45:49.433

F5 是开始调试，而不是“运行”，它会做很多事情，比如在后台加载符号，即使你正在尝试调试发布版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T11:45:40.253

启动带有调试器的程序总是比没有它时慢得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:55:45.333

当您在调试模式下编译代码时，编译器会关闭一些优化，并添加一些额外的指令，以便可以在任何地方放置断点并可以单步执行代码。

这将使在调试模式下编译的代码比在发布模式下编译的代码慢。

# ruby - Ruby 需要'some-gem' 在控制台中工作，而不是在 Eclipse 中？

> ID：12799306
> 
> 赞同：4
> 
> 时间：2012-10-09T11:43:15.377
> 
> 标签：ruby, eclipse, macos, gem, rvm

好吧，我正在尝试通过“机架”运行一个简单的 Web 服务器。所以这是我的程序：

```
require 'rubygems'
require 'rack'

class HelloWorld
  def call(env)
    [200, {"Content-Type" => "text/html"}, ["Hello Rack!"]]
  end
end

Rack::Handler::Mongrel.run HelloWorld.new, :Port => 9292 
```

如果我在控制台中运行它，它工作正常。如果我在 Eclipse 中运行它，最终会出现错误：

```
/Users/MY_SUPER_SECRET_USER/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- rack (LoadError)
    from /Users/MY_SUPER_SECRET_USER/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/MY_SUPER_SECRET_USER/Sites/service/service.rb:2:in `<main>' 
```

正在工作的那个是这样称呼的：

```
MY_SUPER_SECRET_USER@MacBook-Pro:~/Sites/service $ which ruby
/Users/MY_SUPER_SECRET_USER/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
MY_SUPER_SECRET_USER@MacBook-Pro:~/Sites/service $ ruby service.rb 
```

然后，当我尝试打开`localhost:9292`它时，它会显示预期的“Hello Rack”代码。

我在 Mac OS X 10.8 上，通过 rvm 安装了 ruby​​ 1.9.3（这一定很明显）。我的“机架”包已安装`sudo gem install rack`

如您所见，Eclipse 配置了相同的 ruby​​ 可执行文件。任何建议都会有很大帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:09:26.920

线

```
custom_require.rb:36:in `require': cannot load such file -- rack (LoadError) 
```

意味着它找不到您安装机架 gem 的位置。在互联网上阅读，我一次又一次地看到使用`sudo`似乎不起作用。尝试安装它，看看是否可以修复它。

`$ gem install rack`（没有须藤）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T21:06:40.117

我遇到了同样的问题，试图在 Eclipse 中要求它无法识别的 gem，即使一切似乎都配置正确（gem 已安装，Eclipse 指向正确的 Ruby 解释器等）。

`GEM_HOME`我最终通过向“调试/运行配置”的“环境”选项卡添加和`GEM_PATH`变量来使其工作。

更详细的答案在这里：[https ://stackoverflow.com/a/28419300/525338](https://stackoverflow.com/a/28419300/525338)

# mysql - MySql 查询返回空结果集

> ID：12799307
> 
> 赞同：1
> 
> 时间：2012-10-09T11:43:15.647
> 
> 标签：mysql

您好，我有以下两个表：

**设备表：**

```
deviceID    accountID  InstallTime    fName         lName   
1            2          NULL          Dave          O'Riordan   
2            2          NULL          Kathrine      Hutter  
3            2          NULL          Guy           Swider 
```

**a2_deal 表：**

```
deviceID  companyID  contactID  stage   event   state   serverTime  clientTime  monetary
1            1          1        -1     CALL    OUT     1349445600  1349445600  4600
1           14         12        -1     CALL    OUT     1349449200 1349449200   5400
2           16         19        -1     CALL    OUT     1349445600 1349445600   4456
2           21         20        -1     CALL    OUT     1349449200 1349449200   4000
3           17         22        -1     CALL    OUT     1349447160 1349447160   12000
1            1          1         1     CALL    OUT     1349082060 1349082060   NULL
1           14         12         1     CHECK   IN      1349083380 1349083380   NULL
1            1          1         1     CHECK   IN      1349082660 1349082660   NULL
1           14         12         1     CHECK   OUT     1349085382 1349085382   NULL
1            1          1         1     CHECK   OUT     1349082700 1349082700   NULL 
```

我做了如下查询：

```
SELECT deal.deviceID, devices.fName, devices.lName, SUM(event) AS visits
 FROM `a2_deal` AS deal
 LEFT JOIN `devices` AS devices ON deal.deviceID = devices.deviceID
 WHERE `event` LIKE 'CHECK' 
 AND `serverTime` >= 1349082060
 AND `serverTime` <= 1349190000
 GROUP BY deal.deviceID
 ORDER BY visits 
```

它工作正常并给我结果....但是当我尝试 根据条件从 a2_deal 表中的列**阶段检索数据时，它没有给我任何结果（空结果集）...**

```
SELECT deal.deviceID, devices.fName, devices.lName, SUM(stage) AS closes
FROM `a2_deal` AS deal
LEFT JOIN `devices` AS devices ON deal.deviceID = devices.deviceID
WHERE `stage` =  -1
AND `serverTime` >= 1349082060
AND `serverTime` <= 1349190000
GROUP BY deal.deviceID
ORDER BY closes 
```

任何建议我做错了什么......谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:52:18.573

查询与

```
WHERE `stage` =  -1
AND `serverTime` >= 1349082060
AND `serverTime` <= 1349190000 
```

没有返回任何结果，因为所有值的`stage = -1`时间都超出了定义的范围。

在旁注中，您可以使用`serverTime BETWEEN <start> AND <end>`.

# php - 没有mysql的PHP网站

> ID：12799308
> 
> 赞同：0
> 
> 时间：2012-10-09T11:43:19.040
> 
> 标签：php, mysql, xml

我目前正在研究一个列出产品的现有网站，目前有超过 500 种产品。

该网站为每个产品都有一个文本文件，我想创建一个搜索选项，考虑阅读所有文本文件并创建一个包含每天一次可以搜索的值的 xml 文档。

客户表示他们想添加产品并习惯于使用文本文件添加它们。未来可能会有超过 5000 种产品，所以我认为最好用 mysql 来做这件事。这意味着导入当前产品并为产品创建一个 crud 页面。

有没有人使用过不使用 MySQL 的 PHP 网站？是否可以继续添加文本文件并每天只索引一次，即使这意味着拥有超过 5000 种产品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:46:17.637

5000 似乎仍然可以通过每日 cron 作业进行索引。只要您不打算实时搜索它们，它就可以工作。这并不理想，但它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:48:42.380

是的，您很有可能将文件用于这些类型的交易，但这是**不合理的。**

最好使用 XML 而不是普通的 TXT 来完成这项工作。5000 种产品及其相关数据可能会在未来产生问题。

# 附言

为什么不是 MySQL？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T11:51:40.670

Mysql 的出现是因为基于文件的数据库速度慢且不准确。

只用mysql。如果您想保留旧的基于 txt 的数据库，只需构建一个简单的脚本，该脚本将一个一个地导入每个文件并在您的 sql 数据库中创建相应的表。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T11:59:20.767

有可能，但是如果这不仅仅是一个在线目录，那么管理交易完整性是*非常*困难的——而且您甚至提出这个问题意味着您无法实施所需的控制。正如您已经发现的那样，它并不便于搜索（顺便说一句：mysql 的全文索引是一个非常生硬的工具 - 自己实现一个有效的搜索引擎并不是很大的努力 - 或者有很好的搜索引擎可用-现成的，例如[mnogosearch](http://www.mnogosearch.org/)）

（顺便说一句，为什么是 XML？它使管理数据比需要的复杂得多）

> 并为产品创建一个 crud 页面

为什么？如果客户端想通过文件上传来维护数据并且您已经需要移植数据，那么只需使用相同的接口 -数据*存储*的位置现在不相关。

如果托管+mysql 存在问题，那么使用 SQLite 可以获得大部分好处（尽管它也不会扩展）。

# php - Zend Framework 奇怪的内容

> ID：12799316
> 
> 赞同：0
> 
> 时间：2012-10-09T11:43:59.907
> 
> 标签：php, zend-framework, zend-form

嗨，我有这个`Zend_Form`，它的价值得到了改变。
我在表单中的输入文本被修改，例如：而不是我得到
的文本`It's a great day``It\'s a great day`

我用

```
$name = new Zend_Form_Element_Text('name');
$name->setRequired(true);
$name->setFilters(array('StringTrim', 'StripTags'));
$name->setDecorators(array(
    'Errors',
    'viewHelper',
)); 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:52:00.233

这是由于您的 PHP 使用了魔术引用。

检查是否`get_magic_quotes_gpc()`返回 TRUE。如果是这样，则`\ ' " &`GET 和 POST 请求数据中的字符将使用`\`.

为了解决这个问题，您必须使用额外的过滤器功能`stripslashes()`或按照此示例在 Zend 框架中正确执行此操作：http: [//blog.philipbrown.id.au/2008/10/zend-framework-forms-and-magic_quotes_gpc/](http://blog.philipbrown.id.au/2008/10/zend-framework-forms-and-magic_quotes_gpc/)

// 附录：

在您的本地计算机上，您可以执行**Sudhir**`php.ini`在他的回答中解释的操作，但在共享主机上，除非您有权访问文件或 PHP 作为模块加载`Apache`（mod_php/mod_php5），否则这可能是不可能的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:50:40.617

检查您的**php.ini**文件并查找名为**magic_quotes_gpc**的设置并将其设置为 Off。您也可以通过**.htaccess**文件将其设置为关闭，

```
php_value magic_quotes_gpc off 
```

# java - Solr：创建一个具有多个值的默认值的多值字段？

> ID：12799320
> 
> 赞同：2
> 
> 时间：2012-10-09T11:44:14.767
> 
> 标签：java, solr

在我的 Solr 架构中，我想创建一个 multiValued 字段并在默认情况下设置多个值。可能的值为例如`A`和。我可以将其中一些设置为逗号分隔的列表吗？`B``C`

我想做的是：

```
<field ...
       multiValued="true" 
       default="A,B"/> 
```

这是正确的方法吗？不幸的是，我在官方文档中找不到任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T00:43:54.523

我通过使用模式尝试了许多不同的方法，但似乎你不能只使用模式来放置多个默认值。您编写的语法使您的多值字段只有一个条目，例如

```
<str>A,B</str> 
```

这没用..

由于没有关于它的文档，我建议您在[这里查看 - 您之前可能已经查看过](https://issues.apache.org/jira/browse/SOLR)

您可以尝试破解 solr 源代码以处理架构上的多个默认值。这也可能很痛苦，因为即使对于代码本身，文档也不是那么好，但我认为这是可能的。

ps因为我不能在你的问题下发表评论我不得不写这个作为答案

# silverstripe - SilverStripe 3：添加多级 CMS 菜单

> ID：12799324
> 
> 赞同：1
> 
> 时间：2012-10-09T11:44:29.733
> 
> 标签：silverstripe

在**SilverStripe 3**中，如何添加多级**CMSMenu 项目**。我可以通过在 ModelAdmin 类中使用声明来添加一级 CMSMenu 项

> 静态 $menu_title

有没有办法添加自定义多级 CMSMenu 项目？defualt 实现的一个示例是**“文件”**（出于善意考虑附上图片）。

![在此处输入图像描述](../Images/95e106c56da2cdae00de9e98c58338f7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T00:19:16.417

Not yet! You can add them individually as menu items and use css/javascript to arrange them as submenus under the parent...

# c# - 在类层次结构中强制执行单例

> ID：12799332
> 
> 赞同：1
> 
> 时间：2012-10-09T11:44:47.717
> 
> 标签：c#, .net, design-patterns, singleton

有没有办法在类层次结构中强制执行单例？我没有这方面的用例，我只是好奇它是否可能？

在某种意义上的层次结构，从这个类继承的所有类也将是单例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:52:55.103

没有。你可以帮助他们成为单例，但你不能强制他们的构造函数的访问控制，所以不可能*强迫*他们成为单例。

# c# - Silverlight 5.0 自定义文本框：命名空间中不存在标记“文本框”

> ID：12799333
> 
> 赞同：1
> 
> 时间：2012-10-09T11:44:50.890
> 
> 标签：c#, silverlight, textbox, custom-controls, label

我正在尝试在 Silverlight 5 中编写自己的自定义 TextBox 控件。

我已经**成功**编写了一个自定义标签控件，我可以在我的项目中重复使用它。

标签控件的 XAML 和代码如下所示。

以下代码**对**我有用：

```
<sdk:Label 

x:Class="Gui.CustomControls.LabelControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:sw="clr-namespace:System.Windows;assembly=System.Windows"
xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
mc:Ignorable="d"
d:DesignHeight="25" d:DesignWidth="125">

<Grid x:Name="LayoutRoot" Background="White">

</Grid> 
```

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

namespace Gui.CustomControls
{
    public partial class LabelControl : System.Windows.Controls.Label
    {
        public LabelControl()
        {
            InitializeComponent();

        }

    }
} 
```

**现在我想为 TextBox 做同样的事情 - 编写我自己的自定义 TextBox 控件。TextBox 的代码如下所示： 如您所见，它几乎是一样的**

```
<sdk:TextBox 

    x:Class="Gui.CustomControls.TextBoxControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sw="clr-namespace:System.Windows;assembly=System.Windows"
    xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
    xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
    mc:Ignorable="d"
    d:DesignHeight="25" d:DesignWidth="125">

    <Grid x:Name="LayoutRoot" Background="White">

    </Grid>
</sdk:TextBox>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

namespace Gui.CustomControls
{
    public partial class TextBoxControl : System.Windows.Controls.TextBox
    {
        public TextBoxControl()
        {
            InitializeComponent();

        }

    }
} 
```

**在构建解决方案时，会发生以下错误：**

“XML 命名空间‘http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk’中不存在标签‘TextBox’”

由于文本框控件似乎存在于 System.Windows.Controls.TextBox 命名空间中，因此我在 XAML 中尝试了不同的命名空间，但没有任何效果。

我的问题是：

我必须使用哪个命名空间来构建这个自定义文本框？

如果这不是命名空间问题，我错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:56:54.897

不是`sdk:TextBox`，只是`TextBox`（即`http://schemas.microsoft.com/winfx/2006/xaml/presentation`，这是大多数 XAML 文件中的默认 xmlns）。虽然奇怪地没有记录在[Silverlight TextBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox%28v=vs.95%29.aspx)类中，但它记录在[.NET 4.5 TextBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox%28v=vs.110%29.aspx)类中。

# flash - netstream.buffer.empty red5 , Flash Player 挂起

> ID：12799334
> 
> 赞同：0
> 
> 时间：2012-10-09T11:44:54.547
> 
> 标签：flash, red5, flash-media-server

我正在开发一个 Flex 应用程序，以便能够通过 red5 直播视频。

当我使用最新的 flashplayer(11.4) 时，flash player 有时会卡顿并挂起。令人惊讶的是，当我使用 fms(flash media server) 时不会发生这种情况。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:40:18.687

你用的是什么red5版本？可能值得更新到最新版本并构建您自己的副本并尝试使用它。

# jquery - div 滚动顶部

> ID：12799338
> 
> 赞同：0
> 
> 时间：2012-10-09T11:45:09.363
> 
> 标签：jquery, scroll

在下面的示例中，我在右侧有一个滚动框。我希望它停在脚上方而不是骑在上面。 [http://piotr-m.pl/projekty/skladacze/espace/detal.html](http://piotr-m.pl/projekty/skladacze/espace/detal.html)

```
 var offset = jQuery('aside').offset();  

    $(window).scroll(function () {  
    var scrollTop = $(window).scrollTop(); // check the visible top of the browser  
    if (offset.top<scrollTop) 
        $('aside').addClass('fixed').css('top', scrollTop-250); 
    else 
        $('aside').removeClass('fixed');  
    }); 
```

感谢所有的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:48:29.780

只需将页脚 z-index 设置为 -1

像这样

```
#footer {
float: left;
width: 100%;
position: relative;
z-index: -1;
background: white;
} 
```

# c# - 每个 WebGrid 行的表单

> ID：12799339
> 
> 赞同：1
> 
> 时间：2012-10-09T11:45:21.087
> 
> 标签：c#, asp.net, .net, database, razor

我有一个 WebGrid。现在，我想让用户在每个 Column 行中编辑一个数量。

Sine 我对 jQuery 和 AJAX 几乎没有经验，我想只用 HTML/C# 来做这件事。所以我在想，最简单的方法是为每一行设置一个表格。

WebGrid 可能有数百行，如果不是数千行的话。

这是常见的做法吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:26:49.990

不，我认为这不是常见的做法。首先，网页上的数千行可能会消耗一些数据，从而使网页变慢。特别是如果所有这些数据也保存在视图状态中。相信我，我尝试过但失败了。

其次，您可以简单地将文本框添加到普通网格视图，并使用按钮更新行/或整个网格。确保您在网格视图中隐藏了一个 ID。

您可以调用引用 ID 的方法，例如：gridview.selectedindex[0]

# excel - 在dll中查找excel文件的路径

> ID：12799340
> 
> 赞同：0
> 
> 时间：2012-10-09T11:45:22.770
> 
> 标签：excel, dll, path

我有一个需要打开 excel 文件的 dll，但我似乎无法创建文件的路径。excel 文件是一个模板，必须用于与用户将浏览和打开的 excel 文件进行比较。

我以前在为我的应用程序使用 exe 文件时使用过此代码：

```
string path = System.IO.Path.Combine(System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location), "Data\\BulkMaintenanceExample.xls"); 
```

但使用 dll 它似乎不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:56:27.077

尝试以下获取程序集路径：

```
var dir = AppDomain.CurrentDomain.BaseDirectory; 
```

或者

```
//get the full location of the assembly with DaoTests in it 
string fullPath = System.Reflection.Assembly.GetAssembly(typeof(DaoTests)).Location; 
string theDirectory = Path.GetDirectoryName( fullPath ); 
```

或者

```
string filePath = new Uri(Assembly.GetExecutingAssembly().CodeBase).LocalPath; 
return Path.GetDirectoryName(filePath); 
```

# python - 如何在python上进行动态端口转发？

> ID：12799348
> 
> 赞同：1
> 
> 时间：2012-10-09T11:45:50.477
> 
> 标签：python, sockets, python-2.7, portforwarding, asyncore

我稍微修改了代码（[在此处找到）（添加了 AsyncEventLoop 类）](http://code.activestate.com/recipes/483730-port-forwarding/)

```
import socket,asyncore
import threading

class forwarder(asyncore.dispatcher):
    def __init__(self, ip, port, remoteip,remoteport,backlog=5):
        asyncore.dispatcher.__init__(self)
        self.remoteip=remoteip
        self.remoteport=remoteport
        self.create_socket(socket.AF_INET,socket.SOCK_STREAM)
        self.set_reuse_addr()
        self.bind((ip,port))
        self.listen(backlog)

    def handle_accept(self):
        conn, addr = self.accept()
        # print '--- Connect --- '
        sender(receiver(conn),self.remoteip,self.remoteport)
    def closef(self):
        self.close()

class receiver(asyncore.dispatcher):
    def __init__(self,conn):
        asyncore.dispatcher.__init__(self,conn)
        self.from_remote_buffer=''
        self.to_remote_buffer=''
        self.sender=None

    def handle_connect(self):
        pass

    def handle_read(self):
        read = self.recv(4096)
        # print '%04i -->'%len(read)
        self.from_remote_buffer += read

    def writable(self):
        return (len(self.to_remote_buffer) > 0)

    def handle_write(self):
        sent = self.send(self.to_remote_buffer)
        # print '%04i <--'%sent
        self.to_remote_buffer = self.to_remote_buffer[sent:]

    def handle_close(self):
        self.close()
        if self.sender:
            self.sender.close()

class sender(asyncore.dispatcher):
    def __init__(self, receiver, remoteaddr,remoteport):
        asyncore.dispatcher.__init__(self)
        self.receiver=receiver
        receiver.sender=self
        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
        self.connect((remoteaddr, remoteport))

    def handle_connect(self):
        pass

    def handle_read(self):
        read = self.recv(4096)
        # print '<-- %04i'%len(read)
        self.receiver.to_remote_buffer += read

    def writable(self):
        return (len(self.receiver.from_remote_buffer) > 0)

    def handle_write(self):
        sent = self.send(self.receiver.from_remote_buffer)
        # print '--> %04i'%sent
        self.receiver.from_remote_buffer = self.receiver.from_remote_buffer[sent:]

    def handle_close(self):
        self.close()
        self.receiver.close()

class AsyncEventLoop(threading.Thread):
    def run(self):
        asyncore.loop() 
```

从代码开始

```
ser = forwarder('127.0.0.1', 7774, 'google.com.ua', 80)
evLoop = AsyncEventLoop() 
```

我可以`remoteip, remoteport`即时更改吗？如果无法更改fly，是否也停止此线程以使用新设置（remoteip、remoteport）开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:46:06.503

是的你可以

```
ser.remoteip, ser.remoteport = IP, port 
```

# excel - 使用 SSIS 2008 R2 删除一些列，重新排列剩余列并移动多个 .csv 文件的已处理文件

> ID：12799353
> 
> 赞同：1
> 
> 时间：2012-10-09T11:46:09.710
> 
> 标签：excel, ssis

谷歌搜索了一些关于如何破解这个的提示。但没有得到任何有用的点击。现在，我想知道我是否可以在 SSIS 中实现相同的目标。

**一个文件夹中有多个 .csv 文件。**我想要实现的是：

1.  打开每个 .csv 文件（我将使用参数作为文件名的更改）
2.  删除一些列
3.  以特定顺序重新排列剩余的列
4.  保存 .csv 文件（没有 Excel 确认消息框）
5.  关闭 .csv 文件
6.  将处理后的文件移动到另一个文件夹。

并重新开始上述整个过程，直到处理完文件夹中的所有 .csv 文件。

最初我以为我可以使用 For Each Loop Container 和 Execute process Task 来实现这一点。但是，无法找到有关如何实现上述预期目标的任何资源。

示例： **每个 Source .csv 文件的标题：**

**代码**| **姓名**| **值 1** | **价值 2** | **价值 3** | **日期**| **数量**| **价格**| **VALUE_ADD** | **区**

我需要删除列：NAME | VALUE_ADD | ZONE 从每个文件中，并按以下顺序重新排列列。

*所需的列顺序：*

**代码**| **日期**| **值 1** | **价值 2** | **价值 3** | **价格**| **数量**

我知道这在 SSIS 中是可能的。但我无法弄清楚。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:06:32.130

使用以下四个步骤轻松完成：

*   使用“平面文件连接”打开您的 CSV。
*   使用“平面文件源”组件来读取您的 CSV。
*   使用“派生列”组件重新排列列。
*   使用“平面文件目标”组件保存 CSV。

瞧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T11:46:59.597

经过大量的试验，终于得到了想要的结果。最后，它看起来如此简单。

我创建这个包的主要动机是我有很多 .csv 文件，这些文件需要打开每个文件并运行一个消除几列的宏，并以所需的格式重新排列剩余的列。然后我必须在单击 Excel 确认框后手动保存每个文件。那变得太过分了。我只想要一键式的方法。

详细说明我所做的事情。希望它可以帮助那些想要从多个 .csv 文件中获取数据作为源的人，然后按照他们需要的顺序只获取所需的列，最后将所需的输出作为 .csv 文件保存到新的目的地。

简而言之，我只需要使用：

*   对于**每个循环容器**
*   其中的**数据流任务**。

在数据流任务中：

*   平面**文件源**
*   平面**文件目标**
*   2 个**平面文件连接管理**器 -*源*和*目标*各一个。

此外，必须使用 3 个*变量*- 所有带有项目范围的*字符串*数据类型 - 我将其命名为：**CurrFileName**、**DestFilePath**和**FolderPath**。

.

***详细步骤：***

为变量设置默认值：

**CurrFileName：**只需提供 .scv 文件 (test.csv) 之一的名称以供临时使用。

**FolderPath：**提供源 .csv 文件所在的路径（**C:\SSIS\Data\Input**）

**DestFilePath：**提供要保存已处理文件的目标路径（**C:\SSIS\Data\Input\Output**）

**第 1 步**：将 For Each 循环容器拖到控制流区域。

**第 2 步**：在集合中，选择枚举器为“Foreach 文件枚举器”。

**第 3 步**：在 Enumerator Configuration 下，在 Folder: 下提供 .csv 文件所在的文件夹路径（在我的例子中是**C:\SSIS\Data\Input**），在 Files: 中提供扩展名（在我们的例子中：*. csv)

**第 4 步**：在检索文件名下，选择“名称和扩展名”单选按钮。

**第 5 步**：然后转到变量映射部分并选择变量（在我的例子中：*User::CurrFileName*。

**第 6 步**：创建源连接（我们称之为**SrcConnection**）- 在 Connection Managers 区域中右键单击并选择 Flat File Connection 管理器并选择其中一个 .csv 文件（用于临时目的）。转到“高级”选项卡并为您希望保留的列提供正确的所需数据类型。单击确定退出。

**第 7 步**：然后转到这个新创建的源平面文件连接的属性并单击与*表达式*字段相邻的小框以打开**属性表达式编辑器**。在 'Property' 下，选择 'ConnectionString' 并在 Expression 空间中输入：**@[User::FolderPath] + "\" + @[User::CurrFileName]**并单击 OK 退出。

**第 8 步**：在 Windows 资源管理器中，在 Source 文件夹中创建一个新文件夹（在我们的例子中：**C:\SSIS\Data\Input\Output）**

**第 9 步**：创建目标连接（我们称之为**DestConnection**） - 在 Connection Managers 区域中右键单击并选择 Flat File Connection 管理器并选择其中一个 .csv 文件（用于临时目的）。转到“高级”选项卡并为您希望保留的列提供正确的所需数据类型。单击确定退出。

**第 10 步**：然后转到这个新创建的源平面文件连接的属性并单击与*表达式*字段相邻的小框以打开**属性表达式编辑器**。在 'Property' 下，选择 'ConnectionString' 并在 Expression 空间中输入：**@[User::DestFilePath] + @[User::CurrFileName]**并单击 OK 退出。

**第 11 步**：将数据流任务拖到 Foreach 循环容器中。

**第 12 步**：在数据流任务中，拖动平面文件源并在平面文件连接管理器中：选择源连接（在本例中：**SrcConnection**）。在列中，取消选择所有列并仅选择您需要的列（按您需要的顺序），然​​后单击确定退出。

**第 13 步**：将平面文件目标拖到数据流任务并在平面文件连接管理器中：选择目标连接（在本例中：**DestConnection**）。然后，转到映射部分并验证映射是否符合所需的输出。单击确定退出。

**第14步**：就是这样。执行包。它应该毫无问题地执行。

希望这有帮助:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T20:53:36.053

目前尚不清楚您为什么要使用 SSIS 来执行此操作：您的任务似乎是在数据库外部操作文本文件，并且通常在使用具有良好 CSV 解析的语言编写的小脚本或程序中执行此操作要容易得多支持（Perl、Python、PowerShell 等）。如果这应该是更大包的一部分，那么您可以简单地使用执行进程任务调用脚本。SSIS 是一个很棒的工具，但我觉得这样的任务很尴尬。

# ruby-on-rails - 安装 remotipart gem 时出现解析器错误

> ID：12799354
> 
> 赞同：0
> 
> 时间：2012-10-09T11:46:13.377
> 
> 标签：ruby-on-rails, ruby, ubuntu, gem, yard

我正在使用`RVM`,`Ruby v1.9.3-p125`和`Ruby on Rails v3.2.2`. 在我的 Ubuntu 服务器上，我正在尝试安装[`remotipart v1.0.2`](https://github.com/leppert/remotipart)gem，但出现以下错误：

```
$ gem install remotipart -v 1.0.2
Successfully installed remotipart-1.0.2
1 gem installed
Installing ri documentation for remotipart-1.0.2...
Building YARD (yri) index for remotipart-1.0.2...
[error]: ParserSyntaxError: syntax error in `LICENSE`:(1,18): syntax error, unexpected tINTEGER, expecting $end
[error]: Stack trace:
        /usr/local/rvm/gems/ruby-1.9.3-p125/gems/yard-0.7.5/lib/yard/parser/ruby/ruby_parser.rb:517:in `on_parse_error'
        /usr/local/rvm/gems/ruby-1.9.3-p125/gems/yard-0.7.5/lib/yard/parser/ruby/ruby_parser.rb:49:in `parse'
        /usr/local/rvm/gems/ruby-1.9.3-p125/gems/yard-0.7.5/lib/yard/parser/ruby/ruby_parser.rb:49:in `parse'
        /usr/local/rvm/gems/ruby-1.9.3-p125/gems/yard-0.7.5/lib/yard/parser/ruby/ruby_parser.rb:15:in `parse'
        /usr/local/rvm/gems/ruby-1.9.3-p125/gems/yard-0.7.5/lib/yard/parser/source_parser.rb:438:in `parse'
        /usr/local/rvm/gems/ruby-1.9.3-p125/gems/yard-0.7.5/lib/yard/parser/source_parser.rb:361:in `parse_in_order'

[error]: ParserSyntaxError: syntax error in `README.rdoc`:(1,1): syntax error, unexpected '='
[error]: Stack trace:
        /usr/local/rvm/gems/ruby-1.9.3-p125/gems/yard-0.7.5/lib/yard/parser/ruby/ruby_parser.rb:517:in `on_parse_error'
        /usr/local/rvm/gems/ruby-1.9.3-p125/gems/yard-0.7.5/lib/yard/parser/ruby/ruby_parser.rb:49:in `parse'
        /usr/local/rvm/gems/ruby-1.9.3-p125/gems/yard-0.7.5/lib/yard/parser/ruby/ruby_parser.rb:49:in `parse'
        /usr/local/rvm/gems/ruby-1.9.3-p125/gems/yard-0.7.5/lib/yard/parser/ruby/ruby_parser.rb:15:in `parse'
        /usr/local/rvm/gems/ruby-1.9.3-p125/gems/yard-0.7.5/lib/yard/parser/source_parser.rb:438:in `parse'
        /usr/local/rvm/gems/ruby-1.9.3-p125/gems/yard-0.7.5/lib/yard/parser/source_parser.rb:361:in `parse_in_order'

Installing RDoc documentation for remotipart-1.0.2...

$ 
```

这是什么意思？`remotipart`gem 是否正确安装？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:58:26.643

您可以尝试在没有文档的情况下安装，看看它是否安装正确。这会将问题隔离到文档中。

```
gem install remotipart -v 1.0.2 --no-ri --no-rdoc 
```

# php - 如果在下拉列表中单击，使 SQL 忽略特定的搜索值？

> ID：12799361
> 
> 赞同：0
> 
> 时间：2012-10-09T11:46:33.940
> 
> 标签：php, sql, forms

我正在创建一个搜索肉类包装数据库的多形式搜索框。搜索仅在用户特定时才有效，我希望他们能够搜索数据库，而不必从下拉框中选择特定选项，从而限制搜索次数。

是否可以在下拉框中添加一个选项，例如“任何”，如果用户选择它，SQL 查询会忽略它吗？那么它只会搜索与文本表单中的结果匹配的结果吗？

这是HTML和PHP：

```
 <body>

  <form action="form3.php" method="post"> 
    <label for ="description">Description:</label>
    <input type="text" name="descrip" /><br />

    <label for ="trayheight">Trayheight:</label>
    <input type="text" name="height" /> <br /> 

    <label for ="traywidth">Traywidth:</label>
    <input type="text" name="width" /> <br />

    <label for ="traydepth">Traydepth:</label>
    <input type="text" name="depth" /> <br />

         <label for="trayrange">Trayrange: </label>
                <select name="trayrange">
                    <option value="Other">Any</option>

                    <option value="BBQ">BBQ</option>

                    <option value="Dessert">Dessert</option>

                    <option value="Display">Display</option>

                    <option value="Meat">Meat</option>  

                    <option value="Microwave">Microwave</option>

                    <option value="Party">Party</option>

                    <option value="Salad/Wet Pasta">Salad/Wet Pasta</option>

                    <option value="Snacks">Snacks</option>

                    <option value="Standard">Standard</option>

                </select>

        <label for ="traytype">Traytype: </label> 
            <select name="traytype">
                    <option value="Other">Any</option>

            <option value="Open">Open</option>

            <option value="Cavitised">Cavitised</option>

                    <option value="Lid">Lid</option>

                    <option value="Tray">Tray</option>

                    <option value="Coallition">Coallition</option>

                    <option value="Bowl">Bowl</option>

                    <option value="Hinge pack">Open</option>

                    <option value="Pot">Pot</option>

                    <option value="Base & Lid">Base and Lid</option>

                    <option value="Rectangular">Rectangular</option>

                    <option value="Specalist">Specialist</option>
                </select><br />

        <label for="trayshape">Trayshape: </label>
            <select name="trayshape">
                    <option value="Other">Any</option>

            <option value="Rectangular">Rectangular</option>

                <option value="Oval">Oval</option>

                <option value="Square">Square</option>

                    <option value="Insert">Insert</option>

                    <option value="Round">Round</option>

                    <option value="Open">Open</option>
        </select><br />
        <input type="submit" value="Submit" /> 
    </form> 

        </body> 
```

（也许是这样，Any 选项只会使代码忽略搜索的保管箱）

PHP：

```
 <body>

    <?php
         $con = mysql_connect ("localhost", "root", "");
         mysql_select_db ("delyn_db", $con);

    if (!$con)
        { 
        die ("Could not connect: " . mysql_error());
        }

            $descrip = mysql_real_escape_string($_POST['descrip']); 
            $height = mysql_real_escape_string($_POST['height']);
            $width = mysql_real_escape_string($_POST['width']);
            $depth = mysql_real_escape_string($_POST['depth']);

            $varRange = $_POST['trayrange'];
            $varType = $_POST['traytype'];
            $varShape = $_POST['trayshape'];

    $sql = "SELECT * FROM delyn WHERE description LIKE '%".$descrip."%' AND trayheight
                    LIKE '%".$height."%'AND traywidth LIKE '%".$width."%' AND traydepth LIKE
                    '%".$depth."%' AND trayrange LIKE '%".$varRange."%' AND 
                    traytype LIKE '%".$varType."%' AND trayshape LIKE '%".$varShape."%' ";

    $r_query = mysql_query($sql);

    while ($row = mysql_fetch_array($r_query))
            { 
            echo '<br /> Tool Code:   '.$row['toolcode'];
            echo '<br /> Description: '.$row['description']; 
            echo '<br /> Tray range:  '.$row['trayrange']; 
            echo '<br /> Tray type:   '.$row['traytype'];
                echo '<br /> Tray size:   '.$row['traysize']; 
            echo '<br /> Tray shape:  '.$row['trayshape'] . '<br />' . 
                            '<br />'; ;  
                    }

        if (mysql_num_rows($r_query) <= 0){
            echo 'No results match your search, please try again';
               }
        ?>
      </body> 
```

如果有人可以提供帮助，那就太好了，在此先感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:15:16.417

您的假设是正确的，如果使用“任何”选项，最好不要在查询中包含过滤器（因为您正在生成查询）。

另一种选择是使用多选控件，如果选择的长度为零，则不要太生成过滤器

需要注意的是，如果执行查询的表增长，LIKE 关键字的广泛使用将导致性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:19:22.300

您可以使用可选参数，如下所示。您可以将“全部”选项的值设置为星号或类似名称，然后按如下方式编写 SQL 代码：

```
"SELECT * FROM delyn 
WHERE description LIKE '%".$descrip."%' 
AND ((.$height.   = '*') OR (trayheight LIKE '%".$height."%'))
AND ((.$width.    = '*') OR (traywidth LIKE '%".$width."%')) 
AND ((.$depth.    = '*') OR (traydepth LIKE %".$depth."%')) 
AND ((.$varRange. = '*') OR (trayrange LIKE '%".$varRange."%')) 
AND ((.$varType.  = '*') OR (traytype LIKE '%".$varType."%')) 
AND ((.$varShape. = '*') OR (trayshape LIKE '%".$varShape."%'))"; 
```

此示例假定第一个选择 - 描述需要一个值。用户可以将其余选择设置为“全部”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:27:13.693

你可以用不同的方式构建你的 $sql ：

```
$varRange="";
if ($_POST['trayrange'] != "*") {
$varRange="and trayrange like %".$_POST['trayrange']."%";
} 
```

然后连接

```
$sql="select"...$varRange...; 
```

# javascript - 在JS函数中获取调用者姓名

> ID：12799365
> 
> 赞同：0
> 
> 时间：2012-10-09T11:46:38.037
> 
> 标签：javascript

请帮我解决以下问题。

```
var test = new Object();
test.testInner = new Object();

test.testInner.main = function ()
{
   Hello();
}

function Hello()
{
  /**** Question: currently I am getting blank string with below code,
   **** Is there any way to get function name as "test.testInner.main" over here? */
  console.log(arguments.callee.caller.name);
}
test.testInner.main(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:59:49.180

`test.testInner.main`具有`anonymous`（无名称）功能的参考。您可以通过为它们分配名称来获取名称。修改后的代码：

```
var test = new Object();
test.testInner = new Object();

test.testInner.main = function main()
{
   Hello();
}

function Hello()
{
  /**** Question: currently I am getting blank string with below code,
   **** Is there any way to get function name as "test.testInner.main" over here? */
  console.log(arguments.callee.caller.name);
}
test.testInner.main(); 
```

[jsfiddle](http://jsfiddle.net/4TJeD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:00:34.063

您可以在 Javascript 中设置函数的上下文。

```
function hello() { 
    console.log(this);
}
some.other.object = function() {
    hello.call(this, arguments, to, hello);
} 
```

这将是 hello() 中的 some.other.object。

在您的示例中，调用者是 main，并且它没有 name 属性，因为它是匿名的。像这里：[为什么 arguments.callee.caller.name 未定义？](https://stackoverflow.com/questions/7999485/why-is-arguments-callee-caller-name-undefined)

此外，参数已被弃用，因此不应使用。

# android - 使用 AlarmManager 重新安排 IntentService - 意图额外信息被忽略

> ID：12799367
> 
> 赞同：3
> 
> 时间：2012-10-09T11:46:44.540
> 
> 标签：android, alarmmanager, intentservice

我有一个 IntentService，最初是通过单击按钮启动的：

```
 Intent intent = new Intent(this, ProximityService.class);
        intent.putExtra("com.hybris.proxi.triggerTime", 5000l);
        PendingIntent pendingIntent = PendingIntent.getService(this,  0,  intent, 0);
        long trigger = System.currentTimeMillis() + (5*1000);
        alarmManager.set(AlarmManager.RTC_WAKEUP, trigger, pendingIntent); 
```

这很好用。但是后来我试图从意图服务中再次执行相同的意图服务。这里的想法是我可以改变下一次执行时间以节省电池。

```
@Override
protected void onHandleIntent(Intent intent) {
    Log.d("demo", "ProximityService... STARTING");
    Log.d("demo", "Intent has extra with key com.hybris.proxi.triggerTime" + intent.hasExtra("com.hybris.proxi.triggerTime"));

    long lastTriggerTime = intent.getLongExtra("com.hybris.proxi.triggerTime", -1);
    Log.d("demo", "Last trigger time: " + lastTriggerTime);

    alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

    //trigger me again - TODO change this based on closeness to store
    //TODO does not work, somehow triggertime is not incremented
    if (lastTriggerTime < 50000)
    {
        long newTriggerTime = lastTriggerTime * 2;

        Intent serviceIntent = new Intent(this, ProximityService.class);
        serviceIntent.putExtra("com.hybris.proxi.triggerTime", (long)newTriggerTime);
        Log.d("demo","New triggerTime set in new intent is : " + serviceIntent.getLongExtra("com.hybris.proxi.triggerTime", -1));

        PendingIntent pendingIntent = PendingIntent.getService(this,  0,  serviceIntent, 0);
        long trigger = System.currentTimeMillis() + newTriggerTime;
        alarmManager.set(AlarmManager.RTC_WAKEUP, trigger, pendingIntent);
        Log.d("demo", "Alarm was set with trigger time " + newTriggerTime);
    } 
    else {
        Log.d("demo", "Not rescheduling alarm: lastTriggerTime is " + lastTriggerTime);
    }

    Log.d("demo", "ProximityService... DONE");

} 
```

问题是

intent.getLongExtra("com.hybris.proxi.triggerTime", -1);

总是返回初始值 5000 - 因此下一个警报不会安排在不断增加的触发时间。不知何故，新触发时间的额外意图设置不起作用......

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T11:51:07.043

你需要使用`PendingIntent.FLAG_UPDATE_CURRENT`

将您的代码从更改 `PendingIntent pendingIntent = PendingIntent.getService(this, 0, serviceIntent, 0);` 为

```
PendingIntent pendingIntent = PendingIntent.getService(this,
                        0,  serviceIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

# user-controls - 将 UI.Usercontrol 转换为类库中的自定义控件的类型转换错误

> ID：12799373
> 
> 赞同：1
> 
> 时间：2012-10-09T11:46:56.453
> 
> 标签：user-controls

我有 3 个 .NET 项目。

其中一个项目是名为 Index 的 ASP.Net Web 表单应用程序。下面列出了其他项目索引。数据库项目是数据库层索引。平台项目是业务层。

在业务层即时加载用户控件。在 db 中有关于这些 UserControls 的信息。（路径、ascx 文件、名称、标题、内容、位置等）

在业务层中，我创建了一个从名为 ModuleControl 的 UserControl 驱动的类。

System.Web.dll 引用的 Index.Platform 也使用 Using System.Web.UI.WebControls。

我打算在我加载的 UserControls 中使用这个 ModuleControl 字段。在 Default.aspx 的 Load_Page 事件上实例化了另一个名为 IndexSite 的类。

```
namespace Index.Platform.Modules
{
    public class ModuleControl : System.Web.UI.UserControl
    {
        public string Title { get; set; }

        public bool ShowTitle { get; set; }

        public string Content { get; set; }

        public ModuleControl()
        {

        }
    }
}

//Index.Platform.IndexSite

private void InitializeModules(System.Web.UI.Page page)
        {
            string mPath = null;

            try
            {
                ModuleDictionaryList = DBFactory.LoadModules();

                PositionList = DBFactory.PositionList;
                ModuleList = DBFactory.ModuleList;

                foreach (KeyValuePair<string, List<module>> pair in ModuleDictionaryList)
                {
                    foreach (var item in pair.Value)
                    {
                        mPath = "/Modules/" + item.Name + "/" + item.Name + ".ascx";

                        iControl = (ModuleControl)page.LoadControl(mPath);

                        ShowTitle = Convert.ToBoolean(item.ShowTitle);

                        iControl.ShowTitle = ShowTitle;
                        iControl.Title = item.Title;
                        iControl.Content = item.Content;

                        panel = (PlaceHolder)page.Master.FindControl(item.Position);
                        panel.Controls.Add(iControl);

                        //HttpContext.Current.Response.Write(item.Position + "<br>");
                    }
                }
            }
            catch (Exception ex)
            {
                throw new Exception(ex.Message);
            }
        }

this class takes an argument from Default.aspx. Page sends its self.

        protected void Page_Load(object sender, EventArgs e)
        {
            IndexSite site = IndexSite.Instance.Create(this);
        } 
```

是的，在 Bussines 层中，我使用 LoadControl 方法加载 USerControl，我还将这些控件添加到 MasterPage（PlaceHolder）中的面板控件中。

我的问题出在这一行： iControl = (ModuleControl)page.LoadControl(mPath);

我不能将 UserControl 转换为 ModuleControl。记住这个 ModuleControl 是从 UserControl 驱动的，而我所有的 ascx 文件都是从 ModuleControl 类驱动的。

引发此错误：“无法将 'ASP.modules_mod_login_mod_login_ascx' 类型的对象转换为 'Index.Platform.Modules.ModuleControl'。”

如果我在主应用程序中执行这些过程，则转换 ModuleControl 没有错误。

当 id 将我的应用程序分隔为 3 时。我卡在这里。

# javascript - Chrome 问题 - 聊天行多次返回

> ID：12799379
> 
> 赞同：10
> 
> 时间：2012-10-09T11:47:20.747
> 
> 标签：javascript, jquery, html, google-chrome

我写了一个小聊天插件，我需要在我的网站上使用它。它适用于 HTML 中的简单结构，如下所示：

```
<div id="div_chat">
  <ul id="ul_chat">
  </ul>
</div>

<div id="div_inputchatline">
  <input type="text" id="input_chatline" name="input_chatline" value="">
  <span id="span_sendchatline">Send</span>
</div> 
```

当然，该 Span 元素上有一个“点击”绑定事件。然后，当用户插入消息并单击“Send”跨度元素时，会有一个调用 Ajax 事件的 Javascript 函数将消息插入 MySQL 数据库：

```
function function_write_newchatline()
{
  var chatline = $('#input_chatline').val();

  $.ajax
  ({
    type: "POST",
    url: "ajax-chat-writenewline.php", //1: ok, 0: errore
    data: ({'chat_line': chatline}),
    dataType: "text",
    cache: false,
    success: function(ajax_result)
    {
      function_get_newchatlines();
    }
  });
} 
```

而且，如果消息成功插入 DB，它会调用一个函数来读取新行并将它们放入我之前发布的 HTML 结构中：

```
function function_get_newchatlines()
{
  $.ajax
  ({
    type: "POST",
    url: "ajax-chat-loadnewlines.php", //1: ok, 0: errore
    data: '',
    dataType: "text",
    cache: false,
    success: function(ajax_result) //example of returned string: 'message1>+<message2>+<message3'
    {
      //explode new chat lines from returned string
      var chat_rows = ajax_result.split('>+<');
      for (id_row in chat_rows)
      {
        //insert row into html
        $('#ul_chat').prepend('<li>' + chat_rows[id_row] + '</li>');
      }
      $('#span_sendchatline').html('Send');
    }
  });
} 
```

注意：'ajax_result' 只包含 html 实体，不包含特殊字符，因此即使消息包含 '>+<'，它也会在被此 JS 函数处理之前由使用 Ajax 调用的 php 脚本编码。

现在，奇怪的行为出现了：当发布新消息时，Opera、Firefox 甚至 IE8 都运行良好，正如预期的那样，如下所示：

![从 Firefox 截取的屏幕](../Images/6dd0a2523f21a2700b56f037f6dbaac3.png)

但是，当我打开 Chrome 窗口时，我看到了这个：

![从 Chrome 截取的屏幕](../Images/5010dfc92770d4837115f1fc7446ce8f.png)

如您所见，在 Chrome 中，消息会显示多次（每次增加数字，每条消息最多 8 行）。我检查了内部调试查看器，似乎没有多次调用“读取新行”函数，所以它应该是与 Jquery 事件相关的东西，或者其他东西。

希望我的解释很清楚，如果您需要其他任何内容，请告诉我:)

谢谢，埃雷诺。

**编辑**

正如 Shusl 所指出的，我忘了提到该函数`function_get_newchatlines()`是由`setInterval(function_get_newchatlines, 2000)`Javascript 定期调用的。

**编辑2**

这是 Ajax 调用的 PHP 文件中的一段代码，用于获取新的聊天行（我认为这里不需要像“session_start（）”或 mysql 连接的东西）

```
//check if there's a value for "last_line", otherwise put current time (usually the first time a user logs into chat)
if (!isset($_SESSION['prove_chat']['time_last_line']) || !is_numeric($_SESSION['prove_chat']['time_last_line']) || ($_SESSION['prove_chat']['time_last_line'] <= 0))
{
  $_SESSION['prove_chat']['time_last_line'] = microtime(true);
}

//get new chat lines
$result = mysql_query("select * from chat_module_lines where line_senttime > {$_SESSION['prove_chat']['time_last_line']} order by line_senttime asc; ", $conn['user']);
if(!$result || (mysql_num_rows($result) <= 0))
{
  mysql_close($conn['user']); die('2-No new lines');
}
//php stuff to create the string
//....
die($string_with_chat_lines_to_be_used_into_Javascript); 
```

无论如何，我认为，如果问题出在这个 PHP 脚本上，我也会在其他浏览器中遇到类似的错误 :)

**编辑4**

这是将点击事件绑定到“发送”跨度元素的代码：

```
$('#span_sendchatline').on('click', function()
{
  //check if there's already a message being sent
  if ($('#span_sendchatline').html() == 'Send')
  {
    //change html content of the span element (will be changed back to "send"
    //when the Ajax request completes)
    $('#span_sendchatline').html('Wait..');
    //write new line
    function_write_newchatline();
  }
  //else do nothing
}); 
```

（感谢 f_puras 添加缺失的标签 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:40:43.687

我会执行以下操作之一：

**选项1：**

在 function_write_newchatline() 中的 ajax 调用之前停止计时器，并在 ajax 调用返回时启动计时器。

```
function function_write_newchatline()
{
  var chatline = $('#input_chatline').val();

  stop_the_timer();
  $.ajax
  ({
    type: "POST",
    url: "ajax-chat-writenewline.php", //1: ok, 0: errore
    data: ({'chat_line': chatline}),
    dataType: "text",
    cache: false,
    success: function(ajax_result)
    {
      function_get_newchatlines();
    },
    complete: function() {
      start_the_timer();
    }
  });
} 
```

**选项2：**

在 ajax 调用的成功事件中根本不调用 function_get_newchatlines() 。只让计时器检索聊天条目。

```
function function_write_newchatline()
{
  var chatline = $('#input_chatline').val();

  $.ajax
  ({
    type: "POST",
    url: "ajax-chat-writenewline.php", //1: ok, 0: errore
    data: ({'chat_line': chatline}),
    dataType: "text",
    cache: false,
    success: function(ajax_result)
    {
      // do nothing
    }
  });
} 
```

我认为在用户添加聊天条目后调用的 function_get_newchatlines() 与计时器对 function_get_newchatlines() 的定期调用之间存在一些竞争条件。

**选项 3：**

使用 setTimeout 而不是 setInterval。当浏览器忙碌时，setInterval 可能会搞砸。所以在setTimeout函数结束时再次调用setTimeout。

# google-maps - 如何向地图添加多个（用加号分隔）航点

> ID：12799380
> 
> 赞同：1
> 
> 时间：2012-10-09T11:47:22.240
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

多亏了[geocodezip](https://stackoverflow.com/questions/12789153/how-to-load-markers-from-xml-file-with-directions-api-in-google-maps)，我设法创建了一个带有方向功能和加载 XML 标记的地图。但是还有一个问题：

如何向其中添加航点？它们应该用加号或其他适当的符号分隔。

这是当前代码：

```
<script type="text/javascript"> 
//<![CDATA[
 // global "map" variable
var map = null;
var rendererOptions = {
draggable: true
};
var directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);;
var directionsService = new google.maps.DirectionsService();
// A function to create the marker and set up the event window function 
function createMarker(latlng, name, html) {
var marker = new google.maps.Marker({
position: latlng,
map: map,
zIndex: Math.round(latlng.lat()*-100000)<<5
});
var contentString = html;
google.maps.event.addListener(marker, 'click', function() {
infowindow.setContent(contentString); 
infowindow.open(map,marker);
});
}
// ===== request the directions =====
function getDirections() {
// ==== Set up the walk and avoid highways options ====
var request = {};
if (document.getElementById("walk").checked) {
request.travelMode = google.maps.DirectionsTravelMode.WALKING;
} else {
request.travelMode = google.maps.DirectionsTravelMode.DRIVING;
}
if (document.getElementById("highways").checked) {
request.avoidHighways = true;
}   
if (document.getElementById("alternatives").checked) {
request.provideRouteAlternatives = true;
}   
// ==== set the start and end locations ====
var saddr = document.getElementById("saddr").value
var daddr = document.getElementById("daddr").value
request.origin = saddr;
request.destination = daddr;
directionsService.route(request, function(response, status) {
if (status == google.maps.DirectionsStatus.OK) {
directionsDisplay.setDirections(response);
}
});
}
function initialize() {
// create the map
var myOptions = {
zoom: 8,
center: new google.maps.LatLng(43.907787,-79.359741),
mapTypeControl: true,
mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
navigationControl: true,
mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map_canvas"),
myOptions);
directionsDisplay.setMap(map);
directionsDisplay.setPanel(document.getElementById("directionsPanel"));
google.maps.event.addListener(map, 'click', function() {
infowindow.close();
});
// Read the data from example.xml   
if (document.getElementById("showmarkers").checked) {
downloadUrl("example.xml", function(doc) {
var xmlDoc = xmlParse(doc);
var markers = xmlDoc.documentElement.getElementsByTagName("marker");
for (var i = 0; i < markers.length; i++) {
// obtain the attribues of each marker
var lat = parseFloat(markers[i].getAttribute("lat"));
var lng = parseFloat(markers[i].getAttribute("lng"));
var point = new google.maps.LatLng(lat,lng);
var html = markers[i].getAttribute("html");
var label = markers[i].getAttribute("label");
// create the marker
var marker = createMarker(point,label,html);
}
});
}
// Read the data from example2.xml   
if (document.getElementById("showmarkers2").checked) {
downloadUrl("example2.xml", function(doc) {
var xmlDoc = xmlParse(doc);
var markers = xmlDoc.documentElement.getElementsByTagName("marker");
for (var i = 0; i < markers.length; i++) {
// obtain the attribues of each marker
var lat = parseFloat(markers[i].getAttribute("lat"));
var lng = parseFloat(markers[i].getAttribute("lng"));
var point = new google.maps.LatLng(lat,lng);
var html = markers[i].getAttribute("html");
var label = markers[i].getAttribute("label");
// create the marker
var marker = createMarker(point,label,html);
}
});
}
}
var infowindow = new google.maps.InfoWindow(
{ 
size: new google.maps.Size(150,50)
});  
//]]>
</script> 
```

这是我用来生成航点的代码，但现在不起作用：

```
var via = document.getElementById("via").value;
  if (via) {
      so = via.split("+")
      if (so.length > 1) {
          var wpArray = [];
          for (i=0; (i<so.length); i++) {
            wpArray.push({location: so[i], stopover:true})
          }
          request = {
            origin:saddr, 
            destination:daddr,
            waypoints: wpArray,
            provideRouteAlternatives: true,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
          }
      } else {
          request = {
            origin:saddr, 
            destination:daddr,
            waypoints:[{location:via, stopover:true}],
            provideRouteAlternatives: true,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
          }
      }
  } else {
      request = {
        origin:saddr, 
        destination:daddr,
        provideRouteAlternatives: true,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
      }
  } 
```

编辑这是工作功能：

```
function getDirections() {
        // ==== Set up the walk and avoid highways options ====
        var request = {};
        if (document.getElementById("walk").checked) {
           request.travelMode = google.maps.DirectionsTravelMode.WALKING;
        } else {
          request.travelMode = google.maps.DirectionsTravelMode.DRIVING;
        }

        if (document.getElementById("highways").checked) {
           request.avoidHighways = true;
        }

        if (document.getElementById("alternatives").checked) {
           request.provideRouteAlternatives = true;
        }

        // ==== set the start and end locations ====
        var start = document.getElementById("start").value
        var end = document.getElementById("end").value

        request.origin = start;
        request.destination = end;
        request.waypoints = via;

var so;
var via = document.getElementById("via").value;

if (via) {
      so = via.split("+")
      if (so.length > 1) {
          var wpArray = [];
          for (i=0; (i<so.length); i++) {
            wpArray.push({location: so[i], stopover:false})
          }
          request = {
            origin:start, 
            destination:end,
            waypoints: wpArray,
            provideRouteAlternatives: true,
            avoidHighways: document.getElementById("highways").checked,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
          }
      } else {
          request = {
            origin:start, 
            destination:end,
            waypoints:[{location:via, stopover:false}],
            provideRouteAlternatives: true,
            avoidHighways: document.getElementById("highways").checked,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
          }
      }
  } else {
      request = {
        origin:start, 
        destination:end,
        provideRouteAlternatives: true,
        avoidHighways: document.getElementById("highways").checked,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
      }
  }

    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
      }
    });
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:17:44.647

不知道为什么你有 2 个 xml 文件或它们的格式是什么。这是一个根据类别显示/隐藏标记的示例（再次翻译自 Mike Williams 的 v2 教程）：

[http://www.geocodezip.com/v3_MW_example_categories.html](http://www.geocodezip.com/v3_MW_example_categories.html)

（也复制到[如何在 XML 文件中显示/隐藏标记而不用](https://stackoverflow.com/questions/12802617/how-to-show-hide-markers-from-xml-file-without-refreshing-the-page)它所应用的部分问题刷新页面）

# java - 使用 Java 提交 XML 发布请求

> ID：12799382
> 
> 赞同：0
> 
> 时间：2012-10-09T11:47:31.123
> 
> 标签：java, xml, post, http-post

我正在尝试将 Usurv 调查集成到我的网站。为此，我需要使用 HTTP POST向 URL [http://app.usurv.com/API/Gateway.svc/getcampaignforframe提交一个 XML 请求。](http://app.usurv.com/API/Gateway.svc/getcampaignforframe)然后响应应该包含一个指向调查的唯一 URL。

不幸的是，我无法让它工作 - 代码可以正确编译，但是当我加载网页时，出现以下异常：

```
"WARNING: URL = http://app.usurv.com/API/Gateway.svc/getcampaignforframe
 [Fatal Error] CampaignFrameRequest%3E:6:3: The element type "link" must be terminated by the matching end-tag "</link>"." 
```

我真的很困惑，因为 XML 甚至没有链接标签，所以我不确定错误可能来自哪里。有谁知道可能是什么原因造成的以及我该如何解决？

这是Java代码：

```
public class UsurvSurveyElement extends RenderController 
{
  private static Logger LOG = Logger.getLogger(UsurvSurveyElement.class.getName());
  String xml = "<CampaignFrameRequest xmlns='http://Qsurv/api' xmlns:i='http://www.w3.org/2001/XMLSchema-instance'><PartnerId>236</PartnerId><PartnerWebsiteID>45</PartnerWebsiteID><RespondentID>1</RespondentID><RedirectUrlComplete>http://localhost:8080/eveningstar/home</RedirectUrlComplete><RedirectUrlSkip>http://localhost:8080/eveningstar/home</RedirectUrlSkip></CampaignFrameRequest>";
  String strURL = "http://app.usurv.com/API/Gateway.svc/getcampaignforframe";

  @Override
  public void populateModelBeforeCacheKey(RenderRequest renderRequest, TopModel topModel, ControllerContext controllerContext ) 
  {
    super.populateModelBeforeCacheKey( renderRequest, topModel, controllerContext );  

    PostMethod post = new PostMethod(strURL);

    try 
    { 
        // Specify content type and encoding
        // If content encoding is not explicitly specified
        // ISO-8859-1 is assumed
        post.setRequestHeader(
            "Content-type", "text/xml; charset=ISO-8859-1"); 
        LOG.warning("request headers: " +post.getRequestHeader("Content-type"));

        StringRequestEntity requestEntity = new StringRequestEntity(xml);
        post.setRequestEntity(requestEntity);
        LOG.warning("request entity: " +post.getRequestEntity());

        String response = post.getResponseBodyAsString();
        LOG.warning("XML string = " +  xml); 
        LOG.warning("URL = " +  strURL); 
        topModel.getLocal().setAttribute("thexmlresponse",response);

    }
    catch(Exception e)
    {   
        LOG.warning("Errors while executing postMethod "+ e);
    }  

    try
    {
        DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
        Document document = docBuilder.parse(strURL+xml);
        processNode(document.getDocumentElement());
        LOG.warning("doc output = " + document);
    }
    catch(Exception e)
    {   
        LOG.warning("Errors while parsing XML: "+ e);
    }
} 

private void processNode(Node node) {
    // do something with the current node instead of System.out
    LOG.warning(node.getNodeName());

    NodeList nodeList = node.getChildNodes();
    for (int i = 0; i < nodeList.getLength(); i++) {
        Node currentNode = nodeList.item(i);
        if (currentNode.getNodeType() == Node.ELEMENT_NODE) {
            //calls this method for all the children which is Element
            LOG.warning("current node: " + currentNode);
            processNode(currentNode);
        }
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:38:53.150

这行看起来很奇怪，你不是要解析响应体吗？

```
Document document = docBuilder.parse(strURL+xml); 
```

带有字符串参数的 parse 方法将此字符串用作 URL，因此 XML 解析器使用 GET 请求再次连接到服务器。服务器可能会以 HTML 格式的错误消息进行响应，从而导致抱怨该`link`元素的异常。

像下面这样的东西应该会更好：

```
Document document = docBuilder.parse(new InputSource(new StringReader(response))); 
```

# javascript - 让 YouTube JS API 与 iOS 一起工作，处理 embedSWF？

> ID：12799384
> 
> 赞同：1
> 
> 时间：2012-10-09T11:47:39.207
> 
> 标签：javascript, ios, youtube, youtube-api, swfobject

我正在使用 YouTube 的 JS API 并显示视频播放器，[Google 在文档中建议使用 embedSWF](https://developers.google.com/youtube/js_api_reference#Embedding)，如下所示：

```
 <script type="text/javascript" src="swfobject.js"></script>    

  <div id="ytapiplayer">
    You need Flash player 8+ and JavaScript enabled to view this video.
  </div>

  <script type="text/javascript">

    var params = { allowScriptAccess: "always" };
    var atts = { id: "myytplayer" };
    swfobject.embedSWF("http://www.youtube.com/v/VIDEO_ID?enablejsapi=1&playerapiid=ytplayer&version=3","ytapiplayer", "425", "356", "8", null, null, params, atts);

  </script> 
```

虽然这在我的计算机和 Android 设备上运行良好，但在 iOS 上，*ytapiplayer* div 不会变成嵌入式播放器，而只是显示其原始内容，即错误消息说需要 Flash 播放器 8+ 和 JS。

是否有可能让我的这个在 iOS 上工作？如果是这样，怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:58:03.160

也许您应该尝试新的 YouTube iframe Player API？[https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

它适用于移动设备，无需考虑 Flash。嵌入示例：

```
<script type="text/javascript" src="//www.youtube.com/iframe_api"></script>

function onYouTubePlayerAPIReady() {
    var videoBox = document.getElementById('video1');
    videoBox.ytplayer = new YT.Player(videoBox, {
        videoId: 'kXDiGtgPL6E',
        playerVars: {
            //controls: 0,
            wmode:'transparent'
        },
        height: '200',
        width: '320'
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:44:00.027

几个月前我为一个项目做了这件事......

Javascript，与您所拥有的非常相似：

```
<script type="text/javascript" src="js/swfobject.js"></script>
        <script type="text/javascript">
            var flashvars = {};
                flashvars.youTubeVideo = "VitQwgsBq-w";
                flashvars.controllerAlign = "top";
                flashvars.queTo = "0";
                flashvars.controlBarAlpha = ".3";
            var params = {};
            var attributes = {};
                swfobject.embedSWF("images/youTubeLoader.swf", "youTubeDiv", "250px", "200px", "9.0.0", false, flashvars, params, attributes);
</script> 
```

swfobject.js 要做的是寻找一个名为“youTubeDiv”的 HTML div，并用一个 SWF youtube 播放器替换它的所有内容

（我这样做是因为 iframe 解决方案在我正在处理的 HTML5 项目中存在 z-index 问题）

现在是 HTML：

```
 <div id="youTubeDiv">
            <iframe width="250px" height="200px" src="http://www.youtube.com/embed/VitQwgsBq-w" frameborder="0" allowfullscreen></iframe>
    </div> 
```

# android - 如何在我的 TextView 中使用按钮的标准状态列表

> ID：12799386
> 
> 赞同：2
> 
> 时间：2012-10-09T11:47:40.990
> 
> 标签：android

我正在创建包含 3 个可点击的 TextViews 的复合控件。我让它们变得可聚焦，现在我希望它们根据焦点状态改变背景。我知道创建自己的可绘制状态列表资源以将其用作 TextView 背景非常容易。但我想像在按钮中一样使用 statndart 状态列表（选择器）。

不幸的是，我不知道按钮的标准状态列表的 ID。有没有人知道将它写在我的 TextViews 的 android:background 属性中的 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:01:09.717

使用“@android:drawable/btn_default”drawable 作为 TextView 的背景，这样它将默认按钮背景设置为 TextView。

# powershell - get-user - 选择在某个日期之前创建的用户

> ID：12799387
> 
> 赞同：1
> 
> 时间：2012-10-09T11:47:47.020
> 
> 标签：powershell, powershell-2.0, powershell-3.0

我正在使用 Quest snapin 从活动目录中获取用户。此脚本显示创建用户的日期和时间。格式为“2007 年 7 月 16 日 12:03:55”。

```
Get-QADUser -IncludeAllProperties -SerializeValues | Foreach-Object {$_.createTimeStamp} 
```

如何显示在 01/06/2011 00:00:00 之前创建的用户？谢谢！

谢谢你。我还有一个问题。如何将服务帐户与域用户分开？我承认，每个域用户都有邮件参数。是否可以仅包含域用户？

```
(Get-QADUser user -includeallproperties -serializevalues).mail
user@company.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:00:58.150

尝试：

```
Get-QADUser -IncludeAllProperties -SerializeValues -createdbefore 01/06/2011 
```

如果要指定日期和时间：

```
Get-QADUser -IncludeAllProperties -SerializeValues -createdbefore ([datetime]::parse("01/06/2011 01:00:00 pm")) # or "01/06/2011 13:00:00" 
```

对于第二个问题，请尝试：

```
Get-QADUser user -includeallproperties -serializevalues | ? { $_.mail -ne $null } # or just {$_.mail} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:15:19.777

以下只是使用Powershell operator **lt**

```
Get-QADUser -IncludeAllProperties -SerializeValues | ? { $_.createTimeStamp -lt '01/06/2011' } 
```

这应该回答扩展的问题，这只是扩展过滤器的问题。例如，尝试在邮件值上添加匹配项。例如，如果您知道不需要的用户的邮件属性为空：

```
Get-QADUser -IncludeAllProperties -SerializeValues | ? { ($_.createTimeStamp -lt '01/06/2011') -and ($_.mail -ne '')} 
```

# c# - Outlook MailItem 正文中的按钮，它将调用内部插件函数

> ID：12799393
> 
> 赞同：4
> 
> 时间：2012-10-09T11:48:18.860
> 
> 标签：c#, outlook, vsto, add-in, mailitem

我正在为 Outlook 的 2007 和 2010 开发 C# 插件。

假设我有`Outlook.MailItem`当前显示的邮件的对象，我想用按钮替换部分邮件文本，这将调用内部加载项函数（*当然传递一些参数*）。是否有可能将该回调添加到附加功能？如果是，那么你们能否让我走上正轨，因为我似乎找不到与此相关的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:51:24.757

据我所知，您不能将按钮添加到`MailItem.Body`. 您可以做的最好的事情是根据消息正文的内容将项目添加到[**功能区 UI 。**](http://msdn.microsoft.com/en-us/library/office/ee692172.aspx)也有使用自定义[**任务窗格**](http://msdn.microsoft.com/en-us/library/aa942864%28v=vs.110%29.aspx)和[**表单区域**](http://msdn.microsoft.com/en-us/library/vstudio/bb386301.aspx)的类似方法。

您可以[尝试直接使用 Word 编辑器](https://stackoverflow.com/q/8901066/175679)，但我没有尝试过该路径。

```
Outlook.Inspector inspector = Globals.ThisAddIn.Application.ActiveInspector();
Word.Document document = (Word.Document)inspector.WordEditor; 
```

# asp.net - 如果打开了页面'A'，找出从哪个源页面页面'A'被调用？

> ID：12799395
> 
> 赞同：0
> 
> 时间：2012-10-09T11:48:26.147
> 
> 标签：asp.net

我目前在“pageA.aspx”中。使用`top.location.href`or `Response.Redirect()`，我来到了“pageB.aspx”。如何找出哪个页面调用了“pageB.aspx”。它是“pageA.apsx”还是任何其他页面。

我知道使用 URL Query-String。但我需要使用任何其他选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:51:10.323

您可以使用[`Request.UrlReferrer`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx).

> 获取有关链接到当前 URL 的客户端先前请求的 URL 的信息。

# java - Java CAS 操作的执行速度比 C 等效，为什么？

> ID：12799397
> 
> 赞同：7
> 
> 时间：2012-10-09T11:48:29.193
> 
> 标签：java, c, concurrency, compare-and-swap

*   在这里，我有尝试使用 CAS 执行原子增量操作的 Java 和 C 代码。
*   将 long 变量从 0 增加到 500,000,000。
*   C：耗时：7300ms
*   Java：耗时：2083ms
*   任何人都可以仔细检查这些结果吗？因为我简直不敢相信他们。
*   谢谢

Java代码：

```
import java.util.concurrent.TimeUnit;
import java.util.concurrent.atomic.AtomicLong;

public class SmallerCASTest {

    public static void main(String[] args){
        final long MAX = 500l * 1000l * 1000l;
        final AtomicLong counter = new AtomicLong(0);

        long start = System.nanoTime();
        while (true) {
            if (counter.incrementAndGet() >= MAX) {
                break;
            }
        }

        long casTime = TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - start);
        System.out.println("Time Taken=" + casTime + "ms");
    }

} 
```

C代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#define NITER 500000000

int main (){
   long val = 0;     
   clock_t starttime = clock ();
    while (val < NITER){
      while (1){
        long current = val;
        long next = current+1;
        if ( __sync_bool_compare_and_swap (&val, current, next))
            break;
      }
     } 
   clock_t castime = (clock()-starttime)/ (CLOCKS_PER_SEC / 1000);
   printf ("Time taken : %d ",castime);
} 
```

运行.sh

```
#!/bin/bash

gcc -O3 test.c -o test.o
echo -e "\nC"
./test.o
javac SmallerCASTest.java
echo -e "\nJava"
java SmallerCASTest 
```

其他详情：

```
System : Linux XXXXXXXXX #1 SMP Thu Mar 22 08:00:08 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

gcc --version:
 gcc (GCC) 4.4.6 20110731 (Red Hat 4.4.6-3)

java -version: 
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b04)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01, mixed mode) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T12:16:51.973

正如我确定的那样，您正在将苹果与橙子进行比较。该`java`版本是一个真正的 CAS，当该`C`版本使用我在表单中调用`java`的内容时，会在失败时重试。`synchronized`

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/q/12498483/823393)。

请参阅[该问题的答案](https://stackoverflow.com/a/12498665/823393)以支持它所说的叙述`A full memory barrier is created when this function is invoked`，即用Java术语来说，这是一个`synchronized`电话。

尝试使用[_compare_and_swap](http://pic.dhe.ibm.com/infocenter/comphelp/v121v141/topic/com.ibm.xlc121.aix.doc/compiler_ref/bif_compare_and_swap_compare_and_swaplp.html)以与使用它的 java 等效项相同的方式`AtomicLong`使用，即旋转函数直到值更改为您想要的值。

**添加：**

我找不到一个明确的 C++ 等价于 java `AtomicLong`，但这并不意味着没有。本质上，`AtomicLong`任何线程都可以随时更改 an 并且其中只有一个成功。但是，更改将是一致的，即更改将是一个或另一个线程更改的结果，而不是两者的组合。如果线程 A 尝试将值更改为 0xffff0000（或等效的 64 位数字），而线程 B 尝试更改为 0x0000ffff（同上），则结果将是**这**两个值中的一个，更具体地说，它**不会**是 0x00000000 或 0xffffffff（除非当然涉及第三个线程）。

本质上，除此之外，an`AtomicLong`根本**没有同步**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:57:50.180

**编辑**确实，正如您所指出的，java 似乎使用 CAS 操作来实现 incrementAndGet。

我的测试似乎表明 C 和 Java 版本具有大致相同的性能（这是有道理的，因为耗时的部分是原子的，而不是 java 或 C 编译器设法完成的其余部分的任何优化）。

所以在我的机器（至强 X3450）上，java 版本需要 ~4700 ms，C 版本 ~4600 ms，使用 __sync_add_and_fetch() 的 C 版本 ~3800 ms（建议可以在此处改进 java 而不是在CAS 的顶部）。

java版本是

```
 java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.10.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

GCC 是 4.4.3，x86_64。

操作系统是 Ubuntu 10.04 x86_64。

所以我只能得出结论，在你的测试中有些东西看起来很可疑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:34:11.333

Because Java is awesome?

The java version takes 4ns for each loop. That is about right. An uncontended CAS is actually a CPU local operation, it should be very fast. (edit: probably not 4ns fast!)

Java achieves that speed by aggressive runtime optimization, the code is inlined and becomes just a couple of machine instructions, i.e. as fast as one can hand-code in assembly.

If the gcc version couldn't inline the function call, that's a big overhead per loop.

# php - PHP foreach 行为怪异

> ID：12799400
> 
> 赞同：1
> 
> 时间：2012-10-09T11:48:30.507
> 
> 标签：php, foreach

`$blocks`我有一个名为该函数的数组，`print_r()`它将导致：

```
Array ( [0] => template.header [1] => error [2] => emails.addEmail ) 
```

这是我的代码：

```
if(count($blocks)) {
    foreach ($blocks as $block) {
        echo $block;
        $parts = explode('.', $block);
        if (count($parts) > 1) {
            list($folder, $file) = $parts;
            $folder = $folder . '/';
            echo BASE . '/blocks/' . $folder . $file . '.php';
        } else {
            echo BASE . '/blocks/' . $file . '.php';
        }
    }
    $parts = null;
} 
```

但它的行为很奇怪，`echo`第 3 行给了我这个：

```
template.header
error
error 
```

第三个必须是`emails.addEmail`，但它复制了第二个。

谁能告诉我我的代码有什么问题？

**更新：**我将其删除`@`并替换为`if (count($parts) > 1)`. 对不起那些家伙。但这与我的问题无关！还是需要帮助...

**更新 2：**我`$block`在这段代码之前的某个地方使用了变量，它通过引用另一个东西来连接。通过更改该变量名称解决了该问题。谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:55:36.633

我的第一印象是某些（包含的）文件以某种方式操纵`$blocks`数组或`$block`自身。您应该避免以这种方式引用变量；将变量更改保持在使用它们的范围附近。

我发现的其他问题：

```
echo BASE . '/blocks/' . $file . '.php'; 
```

应该：

```
echo BASE . '/blocks/' . $block . '.php'; 
```

因为`$file`只有在`$parts`包含至少两个元素时才会被设置。

还要测试拆分是否`explode()`返回了两个项目：

```
if (isset($parts[1])) { ... } 
```

或者：

```
if (count($parts) > 1) { ... } 
```

工作示例：[http ://codepad.viper-7.com/6oNhBv](http://codepad.viper-7.com/6oNhBv)

# url - 从 Application-Server 向 Android 设备上的目标应用程序发送消息

> ID：12799403
> 
> 赞同：0
> 
> 时间：2012-10-09T11:48:49.267
> 
> 标签：url

**在通过 GCM 服务器向客户端设备发送消息时，如何准确知道第 3 方应用程序服务器尝试访问的 URL 是什么？**

在“SendAllMessagesServlet.java”（可以找到@android-sdks\extras\google\gcm\samples\gcm-demo-server\src\com\google\android\gcm\demo\server\SendAllMessagesServlet.java）

```
.....
// Error 500 ( Connection timed out) at the following line    

Result result = sender.send(message, registrationId, 5);
..... 
```

第 3 方应用服务器 - Tomcat v7.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:36:29.457

URL 在 android\gcm\gcm-server 库中的 Constants.java 文件中作为 GCM_SEND_ENDPOINT

公共静态最终字符串 GCM_SEND_ENDPOINT =
"https://android.googleapis.com/gcm/send";

错误 500 是由于代理设置引起的。

谢谢你

# c - 如何在 Opensuse 12.2 上构建 Gotoblas2

> ID：12799407
> 
> 赞同：0
> 
> 时间：2012-10-09T11:49:16.203
> 
> 标签：c, build, compilation, hpc, blas

在我的 x86_64 上使用默认的 make 文件构建 GotoBlas2 时，我遇到以下构建错误：

> gcc -O2 -DEXPRECISION -m128bit-long-double -Wall -m64 -DF_INTERFACE_GFORT -fPIC -DSMP_SERVER -DMAX_CPU_NUMBER=8 -DASMNAME= -DASMFNAME=_ -DNAME=_ -DCNAME= -DCHAR_NAME=\"_\" -DCHAR_CNAME= \"\" -I.. -w -o linktest linktest.c ../libgoto2_nehalemp-r1.13.so -L/usr/lib64/gcc/x86_64-suse-linux/4.7 -L/usr/lib64/gcc /x86_64-suse-linux/4.7/../../../../lib64 -L/lib/../lib64 -L/usr/lib/../lib64 -L/usr/lib64/gcc /x86_64-suse-linux/4.7/../../../../x86_64-suse-linux/lib -L/usr/lib64/gcc/x86_64-suse-linux/4.7/../.. /.. -l -l -lgfortran -lm -lquadmath -lm -lc && echo OK。/usr/lib64/gcc/x86_64-suse-linux/4.7/../../../../x86_64-suse-linux/bin/ld：找不到-ll collect2：错误：ld返回1退出状态make[1]: *** [../libgoto2_nehalemp-r1.13.so] 错误 1 ​​make[1]:**[共享] 错误 2

为了解决这个问题，我在我的包管理器中搜索了一个满足 -ll 的库，寻找 libl、liblex、libflex 等内容，但我找不到任何可以满足链接的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:26:54.120

要解决此问题，请将 f_check 中的第 298 行编辑为

```
"print MAKEFILE "FEXTRALIB=$linker_L   -lgfortran -lm -lquadmath -lm $linker_a\n";" 
```

# asp.net-mvc - 从视图模型查看详细信息

> ID：12799411
> 
> 赞同：0
> 
> 时间：2012-10-09T11:49:36.823
> 
> 标签：asp.net-mvc, ef-code-first

我试图弄清楚如何使用 ViewModel 在视图中查看详细信息。

我设置了一个视图模型，但似乎无法在我的视图中使用它。

在我的控制器中，我有一个 Details 方法，我想用它来显示 ViewModel 中的所有详细信息。

到目前为止，我将用户名作为字符串传递，然后创建 ViewModel 的新实例，然后我尝试用数据填充 ViewModel，但不确定我需要如何执行此操作。我根据传入的 id 分配用户名 -

```
public ViewResult Details(string id)
        {

            var viewModel = new RegisterViewModel();
            viewModel.UserName = id;
            return View(viewModel);
        } 
```

然后将视图模型发送回视图，但是如何将其他相关数据放入视图模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:26:36.297

您需要做的是查询您的数据库并将相关信息拉入您的视图模型，然后再将其传递回您的视图，即

```
public ViewResult Details(string id)
{
    var entity = // pull record from DB by id
    return View(new RegisterViewModel()
    {
        UserName = id,
        AnotherProperty = entity.AnotherProperty
        ...
    });
} 
```

如果您在很多地方将视图模型映射到模型，您可能需要考虑使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)，它将简化您的代码。

# winapi - Windows 更新代理与 WMIC QFE GET

> ID：12799414
> 
> 赞同：1
> 
> 时间：2012-10-09T11:49:50.607
> 
> 标签：winapi, visual-c++, windows-update, wmic

我正在探索以下两种获取 Windows 补丁信息的方法的可靠性。

1.  使用 Windows 更新代理 - IUpdateSearcher 接口与 COM。
2.  使用 WMIC QFE GET（通过客户端或带有 COM 的 WMI 接口）

以下是我对上述两种方法的疑问

**使用 Windows 更新代理 - IUpdateSearcher 接口与 COM。**

1.  IUpdateSearcher 是否浏览以下注册表并提供信息？
    HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\基于组件的服务
2.  是否有任何其他注册表路径 IUpdateSearcher 寻找提供更新信息？
3.  IUpdateSearcher 是否提供了 WMIC QFE 提供的超集？

**使用 WMIC QFE GET（通过客户端或带有 COM 的 WMI 接口）**

1.  WMIC QFE 是否搜索以下注册表路径并提供信息？HKEY_LOCAL_MACHINE\Software\Microsoft\Updates (或) HKEY_LOCAL_MACHINE\Software\Wow6432Node\Microsoft\Updates
2.  WMIC QFE GET 是否有任何其他注册表路径用于提供更新信息？

另外，以上两种方式，

1.  哪种方法是在不丢失数据的情况下获取更新信息的最佳方法？
2.  哪种方法执行得更快？

有人可以为我的所有查询提供答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:51:01.380

当您使用该`WMIC QFE GET`命令时，相当于使用[`Win32_QuickFixEngineering`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394391%28v=vs.85%29.aspx)WMI 类执行查询，因为在 Windows Vista 中，此类仅返回由[Component Based Servicing](http://technet.microsoft.com/en-us/library/cc756291%28v=ws.10%29.aspx)提供的更新，在较旧的 Windows 版本中使用 `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Hotfix`和`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Updates`注册表项来枚举更新。

该[`IUpdateSearcher`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386515%28v=vs.85%29.aspx)接口是[Windows Update Agent API (WUA)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387099%28v=vs.85%29.aspx)的一部分，可用于枚举所有修复程序，包括通过 CBS 安装的修复程序、Microsoft Windows Installer (MSI) 或 Windows 更新站点提供的更新等。

因此，获取已安装 Windows 更新的更可靠方法是使用 WUA API。

# mysql - MySQL：UPDATE 查询连接 3 个表运行时间很长（15M 行表，索引）

> ID：12799419
> 
> 赞同：2
> 
> 时间：2012-10-09T11:50:09.110
> 
> 标签：mysql, sql, sql-update

我在 3 个表中有 15M 行（一个表是原始 CSV 导入，另外两个是该 CSV 的规范化版本 + 一些其他数据）。

我需要简单地更新原始 CSV 表中的一个字段。加入这些表的更新查询现在在我的四核 8GB 固态硬盘上运行了 30 个小时。

*   这是正常的吗？有没有更好的方法来执行这个简单的更新？

* * *

```
Tables: ti (the CSV dump, denormalized, ~13M rows)
        i (the primary, normalized table, ~17M rows)
        icm (a map of ti.raw_id to i.item_id, ~17M rows)

mysql> explain select * from item AS i, item_catalog_map AS icm, temp_input AS ti WHERE i.id=icm.item_id AND icm.catalog_unique_item_id=ti.productID;
+----+-------------+-------+--------+----------------------+----------------------+---------+------------+----------+-------------+
| id | select_type | table | type   | possible_keys        | key                  | key_len | ref        | rows     | Extra       |
+----+-------------+-------+--------+----------------------+----------------------+---------+------------+----------+-------------+
|  1 | SIMPLE      | i     | ALL    | PRIMARY              | NULL                 | NULL    | NULL       | 13652592 |             |
|  1 | SIMPLE      | icm   | ref    | IDX_ACD6184F126F525E | IDX_ACD6184F126F525E | 5       | frugg.i.id |        1 | Using where |
|  1 | SIMPLE      | ti    | eq_ref | PRIMARY              | PRIMARY              | 767     | func       |        1 | Using where |
+----+-------------+-------+--------+----------------------+----------------------+---------+------------+----------+-------------+
3 rows in set (0.06 sec)

mysql> UPDATE item AS i, item_catalog_map AS icm, temp_input AS ti
    -> SET i.name=ti.productName,
    ->     icm.price=ti.retailPrice,
    ->     icm.conversion_url=productURL
    -> WHERE i.id=icm.item_id AND icm.catalog_unique_item_id=ti.productID; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:32:16.093

首先，如果您的非规范化数据有 13M 记录，但您的*两个*“规范化”表都有 17M 记录，那么您不会从规范化中获得太多压缩。

其次，您试图在一个 SQL 语句中更新两个规范化表。我认为您应该先更新映射表，然后在第二个 SQL 语句中更新数据表。

第三，执行内部连接可以加快速度，因为您的查询正在执行三向笛卡尔积。嗯，不完全是，因为你只是在做老派的连接，优化器应该接受它，但无论如何，使用 JOIN 语法。

```
UPDATE item_catalog_map AS icm
       INNER JOiN temp_input AS ti
          ON icm.catalog_unique_item_id = ti.productID
  SET icm.price = ti.retailPrice,
      icm.conversion_url = productURL;

UPDATE item AS i
       INNER JOIN temp_input AS ti
          ON i.id = icm.item_id
  SET i.name = ti.productName; 
```

最后，确保您拥有的索引是：

```
CREATE INDEX IDX_CATALOG ON item_catalog_map (catalog_unique_item_id);
CREATE INDEX IDX_RAW_PRODUCT_ID ON temp_input (productID);
CREATE INDEX IDX_RAW_ITEM_ID ON temp_input (item_id); 
```

# javascript - MVC 部署 - 与应用程序路径相关的相对路径问题

> ID：12799420
> 
> 赞同：3
> 
> 时间：2012-10-09T11:50:17.050
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, iis-7

在部署我的 MVC 项目时，我遇到了相对路径 wrt 服务器的问题。我将项目作为 IIS 中的应用程序托管。最后，我的应用程序的 url 看起来像`http://localhost/portal/Account/Login`这里的“门户”是 IIS 中的应用程序名称。在 ASP.net 开发服务器中，一切正常。在部署它时需要相对于服务器的相对路径。因此，我的 jquery ajax 请求开始失败。为了解决这个问题，我将操作保留在隐藏字段中并从那里访问并用于 ajax 请求。以下是代码。

```
 <input type="hidden" value="@Url.Action("GetNewOffersSearch", "Updates")" id="NewOffersSearchUrl" />

var NewoffersUrl = document.getElementById("NewOffersSearchUrl").value;

 $.ajax({
            type: 'GET',
            url: NewoffersUrl ,
            cache: false,
            timeout: 10000,
            contentType: "application/json; charset=utf-8",
            success: function (_results) {
                $("#updatesContent").html(_results);
            },
            error: function (_results) {

            }
        }); 
```

最初 NewoffersUrl 是`"/Updates/GetNewOffersSearch"`并且它抛出了一个路径错误。但现在它`"/portal/Updates/GetNewOffersSearch"`和它的工作正常

我只想知道我遵循的方法是否正确。有没有更好的解决这个问题的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:54:54.190

我们进行`AJAX`请求的方式类似，但是我们将 URL 直接传递给 ajax 调用的 url 参数，而不是使用隐藏字段。

```
$.ajax({
        type: 'GET',
        url: @Url.Action("GetNewOffersSearch", "Updates"),
        cache: false,
        timeout: 10000,
        contentType: "application/json; charset=utf-8",
        success: function (_results) {
            $("#updatesContent").html(_results);
        },
        error: function (_results) {

        }
    }); 
```

# java - 限制 java 类对某些包的访问

> ID：12799422
> 
> 赞同：5
> 
> 时间：2012-10-09T11:50:28.293
> 
> 标签：java

我有一`Java`堂课，里面有一些我不想提供给任何未经授权的班级的机密信息。

我想在一些包中访问这个类（这个包中的类将使用机密信息），所以我的安全类应该可以在这些包中访问。

有什么方法可以检查方法的调用者是否是来自授权包的授权类？

我知道 public/private/default 所有东西（所以请不要让我使用它），但这些在这里没有用，因为我希望在某些包中可以访问一个类（不是一个/相同的）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T12:15:46.670

我觉得你走错了方向。这可能是一个设计问题。

安全要求是您的业务逻辑。您应该以某种方式实现您的安全策略，而不是依赖于 java 语言级别的可见性修饰符或调用程序包名称。因为如果您将罐子交给某人，他无论如何都可以访问您的“机密”课程。

而且，类是一种类型，一种抽象的东西。它不应包含“数据”。当然有时conf信息被写为静态变量等。但是，如果某些数据是敏感的，则不应将其写入类中。它可以存储在数据库或加密文件等中。一旦收到对敏感信息的请求，您就可以检查您实施的安全策略是否允许访问这些数据。

只是我的 2cents

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T11:56:28.813

Java 中的可见性修饰符不是安全工具，而是 OO 设计工具。无论你做什么，如果有人使用你的类，它可以使用反射访问任何类的任何私有成员。

如果您的对象包含机密信息，请将这些对象留在您的安全服务器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T11:55:44.727

您可以创建一个`Exception`（不需要抛出它）并使用它`getStackTrace()`来分析调用堆栈。不过，我总觉得它很丑。

也就是说，您放入客户端机器的任何东西都容易受到该机器的攻击；如果您有一些真正机密的东西，请在您的服务器中保护它；使其仅作为服务提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:14:56.717

您可能可以在此处利用 aspectj。理论上可以根据当前流范围拦截对给定类方法的调用，并让切面抛出异常或其他东西。虽然我不是aspectj专家，但是“cflow”切入点限定符将是您最有可能的选择。也许是这样的

！cflow（调用（* com.mycom.AllowedClient.*））

我还没有测试过这种切入点，但我相信它会起作用。

不过，在这种情况下，您可能希望编译时编织（而不是加载时编织）。

作为旁注，我同意其他一些我认为这是错误的方法。您保护数据。您根据登录的用户权限保护功能访问。您通常不会保护来自其他类的函数调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T11:53:54.610

您可以使用由 Java 中的[Proxy](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/reflect/Proxy.html)类实现的[代理模式](http://en.wikipedia.org/wiki/Proxy_pattern)——它完全是为您的目的而设计的。

[这](http://www.javaworld.com/jw-11-2000/jw-1110-proxy.html)是一个操作方法。

编辑：AFAIK，您不能对静态方法使用常规代理机制，因为代理和代理类必须实现一个公共接口。但是，还有更高级的工具，它们可能会帮助您喜欢[javassist](http://www.jboss.org/javassist)。不幸的是，我自己并不熟悉。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-03T18:27:00.963

指南 4-2 / EXTEND-2：限制包的可访问性 容器可以通过添加到 package.access 安全属性来隐藏实现代码。此属性可防止来自其他类加载器的不受信任的类在指定的包层次结构上链接和使用反射。在设置此属性之前，必须注意确保不受信任的上下文无法访问包。

此示例代码演示如何附加到 package.access 安全属性。请注意，它不是线程安全的。此代码通常应仅在系统中出现一次。

```
private static final String PACKAGE_ACCESS_KEY = "package.access";

static {
    String packageAccess = Security.getProperty(PACKAGE_ACCESS_KEY);
    Security.setProperty(PACKAGE_ACCESS_KEY,
                         (packageAccess == null || packageAccess.trim().isEmpty()
                                 ? "" : packageAccess + ",")
                                 + "xx.example.product.implementation.");
} 
```

# java - 是否可以调试 Eclipse RCP 产品（以及如何调试）？

> ID：12799423
> 
> 赞同：5
> 
> 时间：2012-10-09T11:50:38.297
> 
> 标签：java, eclipse-rcp

可以调试 Eclipse RCP 产品吗？如果是，我该怎么做？我发现了类似的论点

```
-vmargs -Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n 
```

但不知道把它放在哪里，是否足以调试？它是否应该在 VM 参数中（文件 *.product 选项卡正在启动）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T14:00:18.873

通过添加 -X 参数，按照您的描述启动应用程序。

在 Eclipse 中创建一个新的远程 Java 应用程序，例如 ![在此处输入图像描述](../Images/68ca04368fac98798d7373d7a1206aac.png)

端口必须相同，您在

> -Xrunjdwp:transport=dt_socket,address=

您选择的项目必须包含您要调试的类。您还可以添加工作区的所有项目以确保您可以调试其中的任何一个。

您还可以检查[调试-java-applet-in-eclipse](http://www.nakov.com/blog/2008/08/20/debugging-java-applets-in-eclipse/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:55:43.440

当您使用您所说的参数启动*任何java 程序时，您可以将任何 java 调试器远程附加到它。*

所以“简单地”在 Eclipse (IDE) 中创建一个调试配置文件以连接到您的 Eclipse (RCP) 产品，然后您必须指定端口。（调试配置是要看的地方）

否则，您可能能够以调试模式从 Eclipse IDE 启动产品。

# oracle-apex - 区域显示选择器的字体和高度大小

> ID：12799432
> 
> 赞同：1
> 
> 时间：2012-10-09T11:51:09.240
> 
> 标签：oracle-apex

我使用 2 个区域和 1 个区域显示选择器在区域之间创建一些选项卡功能。请参阅以下示例：[http](http://apex.oracle.com/pls/apex/f?p=19914:30) ://apex.oracle.com/pls/apex/f?p=19914:30我使用以下内容删除了“全部显示”按钮[http://apexplained.wordpress.com/ 2012/07/16/hide-the-show-all-tab-in-a-region-selector/](http://apexplained.wordpress.com/2012/07/16/hide-the-show-all-tab-in-a-region-selector/)

我的看起来和上面的例子一样，但是它在区域显示选择器上没有圆角。

我想知道如何将圆角应用于显示选择器，增加区域显示选择器的字体大小和高度？

我在区域显示选择器的“区域属性”中尝试了 style="" 但没有运气。当使用 Firebug 在 Firefox 中调查我的页面时，显示选择器保存在 DIV / UL 列表中，但我不知道如何访问 APEX 构建器中的那些。

使用 Chrome 时，区域显示选择器有圆角，但在 Internet Explorer 中没有。

请帮我解决我的问题。

*   Oracle 版本：Oracle 版本 10.2.0.4.0
*   完整 APEX 版本：Application Express 4.1.1.00.23
*   使用的浏览器和版本：Internet Explorer 7 & 8
*   主题：简单的红色
*   模板：带有简单红色主题的标准模板。
*   区域/项目类型：3 个 HTML 页面，每个页面包含文本框字段。

谢谢你。

请参见下面的区域显示选择器示例：

![在此处输入图像描述](../Images/01b7f4dbc2c7a649d71216193b672880.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:23:12.677

来自简单红色主题的区域选择器 html 示例

```
<div class="apex-rds-container">
   <ul class="apex-rds" id="485041125812774413_RDS">
      <li class="apex-rds-first">
         <a href="#SHOW_ALL"><span>Show All</span></a>
      </li>
      <li class="apex-rds-selected">
         <a href="#R166676032406817143"><span>datepicker</span></a>
      </li>
      <li class="apex-rds-last">
         <a href="#R485010513691770957"><span>region 2</span></a>
      </li>
   </ul>
</div> 
```

检查
DIV 的样式选项卡

```
.apex-rds-container {
    height: 40px;
    margin: 0 0 9px;
} 
```

UL

```
ul.apex-rds {
    background: url("../images/bg-anchor-nc.gif") repeat-x scroll 0 0 transparent;
    border: 1px solid #999999;
    border-radius: 8px 8px 8px 8px;
    box-shadow: 1px 2px 2px #AAAAAA;
    float: left;
    list-style-type: none;
    margin: 0;
} 
```

李

```
ul.apex-rds li {
    float: left;
    list-style: none outside none;
} 
```

一种

```
ul.apex-rds li.apex-rds-first a {
    border-left: 0 solid #000000;
}

ul.apex-rds li a {
    border-left: 1px solid #FFFFFF;
    border-right: 1px solid #999999;
    display: block;
    height: 16px;
    padding: 1px 10px 0;
    text-decoration: none;
}

a {
    color: #660000;
} 
```

跨度

```
ul.apex-rds li span {
    color: #000000;
    font-size: 11px;
} 
```

因此，这表明背景图像用于 UL。根据萤火虫，此图像的尺寸为 1x18px。将鼠标悬停在项目上将设置不同的背景图像，当前区域选择也是如此。
因此，如果您想要更大的选择，请使用更大的图像。增加 div 高度。为当前/非当前项目设置正确的样式。
要增加字体大小，请更改 SPAN 的 css。在 IE 中无法
使用的边框已完成。`border-radius: 8px 8px 8px 8px;`

所有 css 都可以在您的 apex_images 文件夹中的主题 css 文件中找到：/i/themes/theme1/css/theme_4_0.css 转到第 1316 行，

```
/* -------------------- Region Display Selector -------------------- */ 
```

你可以在那里找到你需要的一切。不过不要弄乱那个文件。如果愿意，请进行备份。在您自己的 css 中干净地工作并正确覆盖！

# class - TypeScript 模块和类同时进行？

> ID：12799433
> 
> 赞同：4
> 
> 时间：2012-10-09T11:51:09.763
> 
> 标签：class, module, typescript

我目前正在尝试为 OpenLayers 构建一个 TypeScript 定义文件。

问题在于，在 OpenLayers 中，某些类可以同时转换为 TypeScript 中的模块和类。

例如`Protocol`，模块中有类，模块`OpenLayers`中有类。`Response``OpenLayers.Protocol`

我怎么能在 TypeScript 中建模呢？我可以创建`Protocol`一个类并将该类定义`Response`为导出的内部类吗？你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:13:12.517

声明`Response`为具有构造函数类型的`static`字段，返回定义类的一个：`Protocol``interface``Response`

```
declare module OpenLayers {
    export interface IProtocolResponse {
        foo(): void;
    }

    export class Protocol {
        static Response: new () => IProtocolResponse;
    }
}

var response = new OpenLayers.Protocol.Response();
response.foo(); 
```

**编辑：**

[或者正如 Anders 在此讨论列表问题](http://typescript.codeplex.com/discussions/399101)中指出的那样，您可以通过这种方式为内部类创建多个构造函数：

```
declare module OpenLayers {
    export interface IProtocolResponse {
        foo(): void;
    }

    export class Protocol {
        static Response: {
            new (): IProtocolResponse;
            new (string): IProtocolResponse;
        };
    }
}

var response = new OpenLayers.Protocol.Response('bar');
response.foo(); 
```

这两种方法的主要缺点是您不能从`OpenLayers.Protocol.Response`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:37:33.377

这是我更新的答案，希望对您有所帮助 - 它应该让您开始定义 OpenType：

```
declare module OpenType {
   export class Protocol {
       constructor();
       Request;
   }
}

var x = new OpenType.Protocol();
var y = new  x.Request();
var z = x.Request; 
```

# c# - 从 JavaScript 更改属性背后的 aspx 代码

> ID：12799437
> 
> 赞同：2
> 
> 时间：2012-10-09T11:51:24.893
> 
> 标签：c#, javascript, asp.net

有没有办法在不使用隐藏字段的情况下从 JavaScript 更改属性代码的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:52:32.777

不，如果不通过回发或 ajax 等向服务器发送请求，就无法完成。这可以帮助您[**使用 jquery Ajax向服务器发送请求**](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

如果您想更改某些服务器控件的值，则可以使用 javascript。

**在 html 中**

```
<asp:TextBox id="txtName" runat="server" ></asp:TextBox> 
```

**在 JavaScript 中**

```
<script type="text/javascript>
     txtName = document.getElementById('<%= txtName.ClientId %>');
     txtName.value = "changed";
     alert(txtName.value);         
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:53:21.070

我会说 AJAX 是您问题的最佳答案。

# c# - 未在 Windows 服务中获取 OnStart 事件日志条目

> ID：12799438
> 
> 赞同：4
> 
> 时间：2012-10-09T11:51:28.757
> 
> 标签：c#, windows, service

我有以下代码用于 Windows 服务项目。我已经成功构建并安装了它。当我启动它时，我会在事件日志中启动一个事件。但是，我从来没有得到“In Onstart”的事件，知道为什么会这样吗？

```
namespace ADServiceCarlos
{
    public partial class ADServiceCarlos : ServiceBase
    {           
        public ADServiceCarlos()
        {
            InitializeComponent();
            this.AutoLog = true;

            if (!System.Diagnostics.EventLog.SourceExists("MySource")) 
            {         
                System.Diagnostics.EventLog.CreateEventSource(
                    "MySource","MyNewLog");
            }
            eventLog1.Source = "MySource";
            eventLog1.Log = "MyNewLog";
        }

        protected override void OnStart(string[] args)
        {
            eventLog1.WriteEntry("In OnStart");
        }

        protected override void OnStop()
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:03:57.033

好的，所以这可能会解决您的问题。如果无法查看所有代码，很难准确判断，但[请阅读此内容](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.onstart.aspx)- 更具体地说是“警告”部分。

> 不要使用构造函数来执行应该在 OnStart 中的处理。使用 OnStart 处理服务的所有初始化。构造函数在应用程序的可执行文件运行时调用，而不是在服务运行时调用。可执行文件在 OnStart 之前运行。例如，当您继续时，不会再次调用构造函数，因为 SCM 已将对象保存在内存中。如果 OnStop 释放在构造函数中而不是在 OnStart 中分配的资源，则在第二次调用服务时不会再次创建所需的资源。

因此，您在构造函数中初始化事件日志所做的一切都应该移至`OnStart`事件中。这将确保每次服务启动时都能正确创建它，这意味着您应该能够`OnStart`正确记录您的事件（前提是您在初始化后执行此操作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-03T19:14:11.547

根据@musefan 发布的内容，这是一个示例。我不得不将所有东西完全移出构造函数。

```
public class ServiceMain : System.ServiceProcess.ServiceBase
    {
        public const string SERVICE_NAME = "ServiceName";

        /// <summary> 
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.Container components = null;

        public ServiceMain()
        {
            // This call is required by the Windows.Forms Component Designer.
            InitializeComponent();
        }

        /// <summary> 
        /// Required method for Designer support - do not modify 
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            components = new System.ComponentModel.Container();
            this.ServiceName = SERVICE_NAME;
            this.CanPauseAndContinue = true;
        }

        static void Main()
        {
            //Log all unhandled exceptions
            AppDomain.CurrentDomain.UnhandledException += UnhandledExceptionTrapper;
            System.ServiceProcess.ServiceBase[] ServicesToRun;
            ServicesToRun = new System.ServiceProcess.ServiceBase[] { new ServiceMain() };
            System.ServiceProcess.ServiceBase.Run(ServicesToRun);
        }

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        protected override void Dispose(bool disposing)
        {
            if (disposing)
            {
                if (components != null)
                    components.Dispose();
            }
            base.Dispose(disposing);
        }

        /// <summary>
        /// Set things in motion so your service can do its work.
        /// </summary>
        protected override void OnStart(string[] args)
        {
            //Do your stuff here
        }

        static void UnhandledExceptionTrapper(object sender, UnhandledExceptionEventArgs e)
        {
            Environment.Exit(1);
        }
} 
```

# asp-classic - 使用 xmlhttp (ASP) 发布 - 错误响应：没有输入 XML 数据

> ID：12799444
> 
> 赞同：1
> 
> 时间：2012-10-09T11:52:01.413
> 
> 标签：asp-classic, xmlhttprequest

请看以下代码：

```
<form id='myform' name='myform' action='http://www.xxx.xom' method='post' accept-charset='UTF-8'>
<input type='input' name='xmlData' value='<?xml version="1.0"?>
<order_zip>23222</order_zip>
<shipping_id>15</shipping_id>
<products><product> <product_id>230</product_id> <quantity>40</quantity></product></products>'>
</form> 
```

当我发送表单数据时 - 我得到的响应是：**好的**。

但是我需要在后端（后台）进行。

所以我的代码是：

```
set xmlhttp = server.createobject("MSXML2.XMLHTTP")
xmlhttp.Open "POST",URL,False
xmlhttp.SetRequestHeader "Content-Type","text/xml;charset=UTF-8"
xmlhttp.Send xmlstring
Response.write(xmlhttp.response.text) 
```

这次我收到错误响应：**没有输入 XML 数据** 技术人员只知道 php 没有 asp - 所以他不知道我需要在我的代码中更改什么。

这是php代码示例：

```
<?php
  $xml['xmlData'] .= '<order_zip>187654</order_zip>';
  $xml['xmlData'] .= '<shipping_id>3</shipping_id>';
  $xml['xmlData'] .= '<products>';
  $xml['xmlData'] .= '<product><product_id>458</product_id><quantity>11</quantity></product>';

  $connection = curl_init();
  curl_setopt($connection, CURLOPT_URL, "http://api.xml.com/xml/sendOrder");
  curl_setopt($connection, CURLOPT_SSL_VERIFYPEER, 0);
  curl_setopt($connection, CURLOPT_SSL_VERIFYHOST, 0);
  curl_setopt($connection, CURLOPT_POST, 1);
  curl_setopt($connection, CURLOPT_POSTFIELDS, $xml);
  curl_setopt($connection, CURLOPT_RETURNTRANSFER, 1);
  set_time_limit(108000);
  $strResponse = curl_exec($connection);
  if(curl_errno($connection)) {
  print 'Curl error: ' . curl_error($connection);
  }
  curl_close($connection);
  print_r($strResponse);
  }
  ?> 
```

我只需要表单在后台/后端运行 - 所以我很乐意获得正确的代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T23:00:40.207

尝试这样的事情：

```
xmlstring = "<root>" & _
            "  <order_zip>23222</order_zip>" & _
            "  <shipping_id>15</shipping_id>" & _
            "  <products>" & _
            "    <product>" & _
            "      <product_id>230</product_id>" & _
            "      <quantity>40</quantity>" & _
            "    </product>" & _
            "  </products>" & _
            "</root>"

set xmlhttp = Server.CreateObject("MSXML2.ServerXMLHTTP")
xmlhttp.Open "POST", URL, False
xmlhttp.SetRequestHeader "Content-Type","application/x-www-form-urlencoded"
xmlhttp.Send xmlstring
Response.write xmlhttp.responseText 
```

我向 XML 添加了一个根元素，否则它将不是有效的 XML 文档。

另请参阅有关同一主题的知识库文章：http: [//support.microsoft.com/kb/290591](http://support.microsoft.com/kb/290591)

# php - 从数据库中分配选定的选项值

> ID：12799445
> 
> 赞同：0
> 
> 时间：2012-10-09T11:52:01.437
> 
> 标签：php, html, drop-down-menu

我有一个表格，其中包含从数据库生成的国家/地区的下拉列表。这些值存储在数据库中。有一个选项，用户可以在其中查看或更新插入的值。从数据库中获取更新所有表单值。我需要的是，当加载表单以更新国家下拉列表的选定选项时，必须是存储在数据库中的选项。例如：如果从以下下拉选项中选择 2 并将其插入数据库。

```
 Dropdown: |option1|<selected>
           |option2|
           |option3| 
```

在更新期间应该是这样的

```
 Dropdown: |option1|
           |option2|<selected>
           |option3| 
```

这是我尝试过的代码。

```
 $selected = $list["country_country_name"];

     <tr><td>Country</td><td><select onchange="getCountry(this.value);" name="country" id="country" ><?php  foreach( $query as $qry ) { 
     print '<option value="'.$qry["country_country_name"].'"'; 
     if( $qry["country_country_name"] == $selected ) print'selected'; 
     print '>'.$qry["country_country_name"].'</option>'."\n";} ?>
     </select></td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:03:51.323

```
<select id="list" name="list">
    <option value=""> Please Select </option>
    <?
        $list = array('1',
                        '2',
                        '3',
                        '4',
                        '5',
                        '6');

        while ($L = array_shift($list)) {
            ?>
                <option value="<?=$L?>" <? if($selected == $L){ echo 'selected="selected"'; }?> > 
                    <?= $L ?> 
                </option> 
            <?
         }
    ?>
</select> 
```

您可以通过以下方式简单地获取所选选项：

```
$("#list").val(); 
```

请尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:00:51.637

$selected = $list["country_country_name"];

```
 <tr><td>Country</td>
 <td>
 <select onchange="getCountry(this.value);" name="country" id="country" >
 <?php  foreach( $query as $qry ) { 
    $sel = '';
   if( $qry["country_country_name"] == $selected ) 
    $sel = 'selected="selected"';           

    echo '<option value="'.$qry["country_country_name"].'" '.$sel.'>'.$qry["country_country_name"].'</option>'."\n";
    } ?>
    </select>
    <?php echo form_error('country'); ?>
    </td>
 </tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-25T10:30:51.073

当您的选项标签的`value`属性包含与选项文本相同的值时，值属性不是必需的——所以省略它。

下面显示了一个内联条件语句。

```
<tr>
    <td>Country</td>
    <td><select onchange="getCountry(this.value);" name="country" id="country">
        <?php
        foreach ($query as $row) { 
            echo "<option" ,
                ($row["country_country_name"] == $list['country_country_name'] ? ' selected' : '') ,
                "{$row['country_country_name']}</option>\n";
        }
        ?>
    </select></td>
</tr> 
```

# typo3 - TYPO3 多语言网站内容本地化

> ID：12799446
> 
> 赞同：0
> 
> 时间：2012-10-09T11:52:07.030
> 
> 标签：typo3, typoscript, templavoila

我正在使用 TemplaVoila 在 TYPO3 中创建我的第一个网站。我按照教程：[http](http://www.training-typo3.com/2008/12/15/typo3-multi-language/) ://www.training-typo3.com/2008/12/15/typo3-multi-language/使我的网站多语言。一切正常，除非我在前端选择默认语言以外的语言，页面显示每种语言的内容。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T09:44:34.673

终于我明白了。在主 ts 模板中添加了以下行。

```
 config.sys_language_overlay = hideNonTranslated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:48:09.317

这可能是一个排版设置，你能把 URL 和你的主要排版设置放在这里吗？

# c# - HttpWebResponse 在标头 C# 中显示垃圾字符

> ID：12799448
> 
> 赞同：1
> 
> 时间：2012-10-09T11:52:16.607
> 
> 标签：c#, asp.net, httpwebresponse

这是返回波斯语单词的代码片段`Response.AddHeaders`

![波斯语文本](../Images/2bbe3e9ee6a95be6039fedce7a3bbe83.png)

这是一个代码snippert，通过它获得响应`HttpWebResponse`并显示该波斯语单词的垃圾字符

![垃圾短信](../Images/31f35b265ef6425a84fbcb5e2f5a57c4.png)

我很好奇为什么它会返回这些垃圾字符？我该如何纠正这个问题？在我的 aspx 页面上，垃圾文本如下所示-

![输出文本](../Images/2f08c352e3055e234505897edb2d3356.png)

请尽快帮助...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:58:59.183

我发现 unicode 编码很有用。

```
pwd = HttpUtility.UrlEncodeUnicode(pwd); // encode string to unicode

pwd = HttpUtility.UrlDecode(pwd); // decode unicode to string 
```

# extjs - 标题 ExtJs 中的按钮

> ID：12799449
> 
> 赞同：4
> 
> 时间：2012-10-09T11:52:17.747
> 
> 标签：extjs, header, window

我想在“窗口”标题中添加一些按钮，而不是“X”。 **必须保存可拖动属性！** 它应该如下所示： ![在此处输入图像描述](../Images/aadc6bcc568c92e758cc40cc71b3dae7.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T14:47:04.890

您可以为窗口指定[`tools`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.window.Window-cfg-tools)( [Ext.Panel.Tool](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Tool) ) 配置！

```
tools:[{
    type:'refresh',
    tooltip: 'Refresh form Data',
    handler: function(event, toolEl, panel){
        // refresh logic
    }
},
{
    type:'help',
    tooltip: 'Get Help',
    handler: function(event, toolEl, panel){
        // show help here
    }
}] 
```

有 25 个预定义按钮，但您可以自定义自己的按钮。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-03T16:21:00.830

也可以定义 xtype: 'header' 元素并更精确地自定义窗口/面板的标题：

```
 header: {
            xtype: 'header',
            titlePosition: 0,
            defaults: {
                margin: '0 10px'
            },
            items: [
                {
                    xtype: 'textfield',
                    value: "Test Search",
                    tooltip: "Search something",
                    width: 300
                },
                {
                    xtype: 'container',
                    flex: 1
                },
                {
                    xtype: 'button',
                    text: "Test Button",
                    tooltip: "Add something",
                    iconCls: 'add',
                    handler: Ext.bind(function() {
                        console.log('does something');
                    }, this)
                }
            ]
        } 
```

我现在看到的唯一限制是无法使用'->'元素作为项目，但仍然可以使用它们的完整类名（即Ext.toolbar.Fill）或通过xtype：'tbfill'进行配置。

# python - 转换文本 CSV 二进制文件并在 Python 中从中获取随机行而不将其读入内存

> ID：12799454
> 
> 赞同：1
> 
> 时间：2012-10-09T11:52:36.653
> 
> 标签：python, csv, numpy, bigdata, random-access

我有一些格式为 CSV 的文本文件：

```
1.3, 0, 1.0
20.0, 3.2, 0
30.5, 5.0, 5.2 
```

这些文件的大小约为 3.5Gb，我无法在有用的时间内将它们中的任何一个读入 Pandas 的内存中。

但我不需要读取所有文件，因为我想做的是从文件中选择一些随机行并读取那里的值，我知道如果文件被格式化，理论上是可以做到的所有字段都具有相同大小的方式 - 例如，二进制文件中的 float16。

现在，我想我可以使用问题答案中指定的 NumPy 方法对其进行转换： [How to output list of floats to a binary file in Python](https://stackoverflow.com/questions/807863/how-to-output-list-of-floats-to-a-binary-file-in-python)

**但是，转换完成后如何从中选择随机行？**

在普通的文本文件中，我可以这样做：

```
import random
offset = random.randrange(filesize)
f = open('really_big_file')
f.seek(offset)                  #go to random position
f.readline()                    # discard - bound to be partial line
random_line = f.readline()      # bingo! 
```

但我找不到一种方法可以在由 NumPy 制作的二进制文件中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:03:55.310

我会`struct`用来转换为二进制：

```
import struct
with open('input.txt') as fin, open('output.txt','wb') as fout:
     for line in fin:
         #You could also use `csv` if you're not lazy like me ...
         out_line = struct.pack('3f',*(float(x) for x in line.split(',')))
         fout.write(out_line) 
```

在大多数系统上，这会将所有内容写入标准的 4 字节浮点数。

现在，再次读取数据：

```
with open('output.txt','rb') as fin:
    line_size = 12 #each line is 12 bytes long (3 floats, 4 bytes each)
    offset = random.randrange(filesize//line_size)  #pick n'th line randomly
    f.seek(offset*line_size) #seek to position of n'th line
    three_floats_bytes = f.read(line_size)
    three_floats = struct.unpack('3f',three_floats_bytes) 
```

如果您担心磁盘空间并希望使用`np.float16`（2 字节浮点数）压缩数据，您也可以使用上面的基本骨架来做到这一点，只需替换`np.fromstring`和`struct.unpack`代替`ndarray.tostring`（`struct.pack`当然使用适当的数据类型 ndarray - 并且`line_size`会下降到 6 ...)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T16:24:20.587

因此，使用有用的答案提供的示例，如果有人感兴趣，我找到了一种使用 NumPy 的方法：

```
# this converts the file from text CSV to bin
with zipfile.ZipFile("input.zip", 'r') as inputZipFile:
    inputCSVFile = inputZipFile.open(inputZipFile.namelist()[0], 'r') # it's 1 file only zip

    with open("output.bin", 'wb') as outFile:
        outCSVFile = csv.writer(outFile, dialect='excel')
        for line in inputCSVFile:
            lineParsed = ast.literal_eval(line)
            lineOut = numpy.array(lineParsed,'float16')
            lineOut.tofile(outFile)
        outFile.close()

    inputCSVFile.close()
    inputZipFile.close()

# this reads random lines from the binary file
with open("output.bin", 'wb') as file:
    file.seek(0)

    lineSize = 20 # float16 has 2 bytes and there are 10 values:
    fileSize = os.path.getsize("output.bin")

    offset = random.randrange(fileSize//lineSize)
    file.seek(offset * lineSize)
    random_line = file.read(lineSize)
    randomArr = numpy.fromstring(random_line, dtype='float16') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:10:16.393

您必须根据存储大小调整偏移量，但是：

```
import csv
import struct
import random

count = 0
with open('input.csv') as fin, open('input.dat', 'wb') as fout:
    csvin = csv.reader(fin)
    for row in csvin:
        for col in map(float, row):
            fout.write(struct.pack('f', col))
            count += 1

with open('input.dat', 'rb') as fin:
    i = random.randrange(count)
    fin.seek(i * 4)
    print struct.unpack('f', fin.read(4)) 
```

# r - 用 R 计算位于回归线上方和下方的点数

> ID：12799457
> 
> 赞同：6
> 
> 时间：2012-10-09T11:52:49.863
> 
> 标签：r, linear-regression

如何计算散点图上回归线上方和下方的点数？

```
data = read.csv("info.csv")
par(pty = "s")
plot(data$col1, data$col2, xlab = "xaxis", ylab = "yaxis", xlim = c(0, 
  1), cex.lab = 1.5, cex.axis = 1.5, ylim = c(0, 1), col.lab = "red", 
  col = "blue", pch = 19)
abline(a = -1.21, b = 2.21) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T11:58:13.180

```
x <- 1:10
set.seed(1)
y <- 2*x+rnorm(10)

plot(y~x)

fit <- lm(y~x)
abline(fit)

resi <- resid(fit)
#below the fit:
sum(resi < 0)
#above the fit:
sum(resi > 0) 
```

**编辑：** 如果你做了（出于某种未知原因）这样的事情：

```
x <- 1:10
set.seed(1)
y <- 2*x+rnorm(10)

plot(y~x)
abline(-0.17,2.05) 
```

你可以这样做：

```
yfit <- 2.05 * x - 0.17
resi <- y - yfit

sum(resi < 0)
sum(resi > 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:59:50.007

如果我正确地阅读了这个问题，答案将是。

1.  确定回归线的方程——它是直的，形式为 y = mx +b，其中 m 是直线的斜率，b 是 y 截距。
2.  计算 x 域中每个 x 的 y 值。
3.  使用数据中的 y 值，确定它是否大于、等于或小于 y 的计算值

使用上述内容应该足以找到您所追求的数字（计数）。

# javascript - 打开时如何定位屏幕以显示切换元素？

> ID：12799460
> 
> 赞同：0
> 
> 时间：2012-10-09T11:52:54.347
> 
> 标签：javascript, jquery, position, toggle

我正在使用以下代码作为一个简单的切换按钮来显示/隐藏一些额外的内容：

```
 $(".toggle .button").click(function() {
    $(this).next().slideToggle('fast');
}); 
```

问题是如果切换位于屏幕底部，用户必须向下滚动才能查看新打开的切换内容。所以我的问题是：我怎样才能通过在用户单击切换时将窗口跳转到正确的位置来自动向用户显示切换的数据？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:12:20.787

您可以使用动画来完成这项工作：

```
$('html,body').animate(
   {scrollTop: $('#your-content-id').offset().top},
   'slow'
); 
```

# mysql - 计算mysql表中的一个字段

> ID：12799461
> 
> 赞同：0
> 
> 时间：2012-10-09T11:52:57.413
> 
> 标签：mysql

一般来说，我对 MySQL 和 db 很陌生。

我有一张桌子，我有`date_of_test`和`test_frequency`（可能的值 3、6、12）。

我需要有一个字段`future_test`，其中包含计算日期，其中`date_of_test`的值`test_frequency`是 3、6、12（月）。

我不知道如何实现这一点，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:59:28.830

```
alter table gypsum add column future_test (datetime);

update gypsum
  set future_test = date_add(date_of_test, interval test_frequency MONTH); 
```

正如评论中所指出的，在数据​​库中计算值通常不是一个好主意。

每次更新 date_or_test、test_frequency 或每次插入新值时都必须重新启动计算...

创建专用视图可能会更好

```
CREATE OR REPLACE VIEW gypsumWithFuture AS
(SELECT
  id, 
  date_of_test, 
  test_frequency, 
  DATE_ADD(date_of_test, interval test_frequency MONTH) AS future_test
 FROM gypsum) 
```

或在您的应用程序代码中进行计算（如果有的话）。很多语言都有 DateTime 功能，可以和 MySQL [DATE_ADD](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T11:57:35.317

在我的 sql 中尝试[DATE_ADD()函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)

前任：

```
 SELECT '2008-12-31 23:59:59' + INTERVAL 1 MONTH 
```

# java - 带有配置目录的 Java Web Start 应用程序

> ID：12799466
> 
> 赞同：2
> 
> 时间：2012-10-09T11:53:18.340
> 
> 标签：java, configuration, java-web-start

我有一个 java 应用程序，它被打包到一个可执行的 jar 文件中，它使用它自己的 conf 目录来存储一些配置选项。

现在我想将它作为 Java Web Start 应用程序分发。我知道我可以将配置文件打包到分布式 jar 中，但它应该会导致应用程序逻辑发生一些重大变化。

那么配置目录分发是否有标准方法或简单的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T01:23:56.560

使用 JWS 部署的富客户端的配置选项最好存储在[`PersistenceService`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/PersistenceService.html).

# ios - 以编程方式添加 tableView，未调用 viewDidLoad

> ID：12799470
> 
> 赞同：0
> 
> 时间：2012-10-09T11:53:30.633
> 
> 标签：ios, uitableview

我想在我的 tableViewController 中使用我的 viewDidLoad 函数。如何让 viewDidLoad 在我的控制器中运行？

```
tableViewController = [[TableViewController alloc] init];
UITableView *tableView = [[UITableView alloc] init];
tableViewController.view = tableView;
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:58:13.960

来自 Apple 文档：

> 在视图控制器将其视图层次结构加载到内存后调用此方法。无论视图层次结构**是从 nib 文件加载还是在 loadView 方法中以编程方式创建，都会调用此方法**。您通常覆盖此方法以对从 nib 文件加载的视图执行额外的初始化。

所以你可以尝试从NIB实例化它或者覆盖loadView方法。Apple文档的另一个步骤：

> 如果您无法在情节提要或 nib 文件中定义视图，请**覆盖 loadView 方法以手动实例化视图层次结构**并将其分配给视图属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:58:46.070

`viewDidLoad`将在实际加载视图时调用，这将在您呈现视图控制器*后发生，例如：*

1.  将其添加到导航控制器，

2.  将其添加到标签栏控制器，

3.  模态地呈现它。

这是您的代码中缺少的部分。如果你解释你想如何展示你的视图控制器，我可能会提供进一步的帮助。另外，看看这个：[展示视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)。

（我假设您尝试覆盖`view`表视图控制器的属性的事实只是试图“让事情正常工作” - 但您不需要对此做任何事情，视图控制器将正确设置为里面的表格视图）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-03T06:46:58.273

```
tableViewController = [[TableViewController alloc] init];
tableViewController.tableView // This is your newly generated tableview 
```

将 tableView 分配给另一个 parentview 后将调用 viewDidLoad

# azure - 使用 1000 个并发用户优化从 Azure Blob 存储的下载

> ID：12799473
> 
> 赞同：4
> 
> 时间：2012-10-09T11:53:49.510
> 
> 标签：azure, blob

我有一个关于 Azure blob 下载速度优化的问题。我正在考虑在 Azure blob 存储中拥有一个私有容器，其中包含 10000 个大小约为 5 MB 的文件。每当用户想要下载此文件时，我都会生成一个 SAS Url 供用户下载文件。截至目前，我正在查看大约 1000 个并发用户在任何时间点下载各种文件。

我想知道以下任何步骤是否可以帮助我保持这种使用的最佳下载速度。

1.  将文件存储在不同的容器中有助于提高下载速度。
2.  阅读 Windows Azure 存储团队的博客，每个存储帐户都有固定的带宽。为了抵消这一点，我是否需要将文件存储在不同的存储帐户中。
3.  在存储帐户中拥有一个容器是否足以为约 1000 个并发用户获得最佳下载速度。如果您能告诉我实现这一目标的最佳实践，那也很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T12:36:14.427

1.  不，Blob 是分区，而不是容器。
2.  是的。
3.  这取决于。**单个**blob的目标吞吐量高达 60 MBytes/sec，但由于您谈论的是 10000 个文件，这应该不是问题（假设您的 1000 个并发用户将下载不同的文件）。您需要查看的是存储帐户的可伸缩性目标，其中吞吐量高达每秒 3 吉比特。如果您的应用程序增长，这可能会成为一个问题，但您可以查看一些解决方案：
    *   使用多个存储帐户（可能每个国家、每个应用程序一个......）。创建存储帐户的限制非常低（以前每个订阅有 5 个存储帐户，不知道这是否改变了），因此如果您想使用更多存储帐户，您需要联系 Microsoft。
    *   考虑将 CDN 与 blob 存储一起使用来公开您的文件。这将提高性能（更高的吞吐量），但您的用户也会更快地下载文件，因为他们从“附近”位置下载文件。
    *   您还可以在您的 Web 角色中进行一些缓存（例如在 LocalResources 或缓存预览中，以缓存您的常用文件）。但我不建议这样做。

本文是一个很好的起点：[Windows Azure Storage Abstractions and their Scalability Targets](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/05/10/windows-azure-storage-abstractions-and-their-scalability-targets.aspx)

# c++ - C++中的坐标系

> ID：12799477
> 
> 赞同：1
> 
> 时间：2012-10-09T11:53:59.270
> 
> 标签：c++, arrays, vector, c++11, stdvector

嗨，我想用 C++ 制作一个坐标系。我将从用户那里获得一些（x，y）坐标并使用它我需要制作一个坐标系（更多的地图）样式。我怎样才能做到这一点？它需要如下图所示。我应该使用二维数组还是向量以及如何使循环以不同的方式进行标记？

(2,0)(4,3)(7,8) 需要看起来像

```
 **1************
 ***************
 ***************
 ***************
 ***1***********
 ***************
 ***************
 ********1****** 
```

这是我目前得到的代码，但问题是我不能在其中标记多个坐标。我只是使用了 2 个 for 循环来做到这一点

```
for(int i = -6; i < 7; i++) 
    if (i < 0) 
        cout<<" "<<i; 
    else 
        cout<<"  "<<i; 
cout<<endl; 

for(int i = 0; i < 15; i++) 
    { 
        cout<<(char)(i + 49); 
        for(int j = -6; j < 7; j++) 
        if(i == y - 1 && j == x) 
            cout<<" x "; 
        else 
            cout<<" . "; 

        cout<<(char)(i + 49)<<endl; 
    } 
```

请指教。谢谢 ！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T11:59:10.360

我建议您使用其中一个`vector<string>`或`vector<vector<char> >` 什至`vector<vector<string> >`取决于您打算在单元格中存储什么。如果单元格是单个字符，那么第一个选项可能是最好的。之后创建地图真的很容易：

```
int n,m;
cin >> n >> m;
vector<string> a(n, string(m, '*'); 
```

我不确定“。”是什么。和上面代码中的“x”，但我想象剩下的就是输入几对坐标并`vector<string>`用“1”替换相应的元素。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:52:18.160

我建议使用`std::set`of`std::pair`而不是`std::vector`- 不需要将整个网格保存在内存中，我们只需要点。

[http://liveworkspace.org/code/f434521b804485f16786556762780448](http://liveworkspace.org/code/f434521b804485f16786556762780448)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:30:08.437

要回答您的其他问题，您可以使用一个循环来进行更改，并使用另一个来显示您的结果。使用 izomorphius 的建议，如果您使用列表来存储坐标对，它看起来像这样：

```
vector<string> matrix ;
list<pair> PairList ;

for (list<pair>::const_iterator it = PairList.beguin(); i < PairList.end(); it++) {
    matrix[ (*it).second ][ (*it).first ] = "." ;
} 
```

并显示结果：

```
for (int i = 0; i < matrix.size; i++) {
    cout << matrix[i] << endl ;
} 
```

# java - 重力传感器值增加

> ID：12799482
> 
> 赞同：4
> 
> 时间：2012-10-09T11:54:27.527
> 
> 标签：java, android, kotlin, android-sensors

`onSensorChanged(SensorEvent event)`每次调用事件值后，重力传感器值都会增加。值增加，并在一点点时间（大约 1 分钟）后达到 NaN 值。有人可以说为什么会这样吗？代码：

```
private void recordData(SensorEvent e) {
    String label;
    int currentSensorId = -1;
    switch (e.sensor.getType()) {
    case Sensor.TYPE_ACCELEROMETER:
        currentSensorId = 0;
        label = LOG_LABEL_ACCELEROMETER;
        break;
    case Sensor.TYPE_GYROSCOPE:
        label = LOG_LABEL_GYROSCOPER;
        currentSensorId = 1;
        break;
    case Sensor.TYPE_GRAVITY:
        label = LOG_LABEL_GRAVITY;
        currentSensorId = 2;
        break;
    case Sensor.TYPE_ROTATION_VECTOR:
        label = LOG_LABEL_ROTATION_VECTOR;
        currentSensorId = 3;
        break;
    default:
        label = "UNKNOWN SENSOR TYPE!";
        break;
    }
    if (currentSensorId == -1)
        return;

    // Force set events frequency to value from config,
    // cause sensor events minimal frequency = 0.2 sec.
    timePassed[currentSensorId] = System.currentTimeMillis()
            - lastSensorEventTime[currentSensorId];
    if (timePassed[currentSensorId] < Config.SENSOR_DELAY_MILLISEC) {
        return;
    } else {
        lastSensorEventTime[currentSensorId] = System.currentTimeMillis();
    }

    if (this.pauseRecordingData || checkSDCardMemory())
        return;
    fileWriter.writeEvent(label, System.currentTimeMillis(), e.values);
}

public void writeEvent(String eventSource, long timestamp, float[] values) {
        Log.d(TAG, "writeEvent(); eventSource = " + eventSource);       

    if ( !this.fileExists ) createNewFile();        
    try {       
        String valuesString = eventSource + "\t" + String.format( "%d\t", timestamp);

        for (int i = 0; i < values.length; i++) {
            valuesString += String.format( "%f\t",values[i]);
            Log.d(TAG, "writeEvent(); values[" + i + "] = " + values[i]);
    }           
        buffWriter.append(valuesString + "\n");
    } catch (IOException e1) {              
          e1.printStackTrace();
          Log.d(TAG,"RECORDING EVENT TO FILE FAILED!");
    }               
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:11:58.420

有两种可能：

1.  最可能的一个：您的代码中有错误，例如，您从未重置变量或添加值（有关详细信息，请阅读[http://developer.android.com/guide/topics/sensors/传感器_motion.html](http://developer.android.com/guide/topics/sensors/sensors_motion.html) )。

2.  您的重力传感器坏了（要检查，请在另一台设备上尝试）。

如需更多帮助，请发布您的代码，您如何访问和管理从重力传感器读取的值。

编辑：

正如我所提到的，您的代码中有一个错误。传感器读取延迟应设置为可能的选项之一：

```
int     SENSOR_DELAY_FASTEST     get sensor data as fast as possible
int     SENSOR_DELAY_GAME        rate suitable for games
int     SENSOR_DELAY_NORMAL      rate (default) suitable for screen orientation changes
int     SENSOR_DELAY_UI          rate suitable for the user interface 
```

而不是自定义值！

感谢您找到解决方案。

# c++ - 在这种情况下，如何将字符串转换为 c_str()？

> ID：12799483
> 
> 赞同：1
> 
> 时间：2012-10-09T11:54:30.657
> 
> 标签：c++

> **可能重复：**
> [将 std::string 转换为 const char* 或 char*](https://stackoverflow.com/questions/347949/convert-stdstring-to-const-char-or-char)

我的代码是这个

```
#include <iostream>
#include <fstream>

using namespace std;

string mapChange(int side, string oldMap);

int main(){

  string createMapName;
  string createMapNameData [10];
  int featureSelect;

  cout << "(1)Game or (2)Mapmaker";
  cin >> featureSelect;

  if(featureSelect == 2)
  {
    cout << "Name of Map?";
    cin >> createMapName;
    ofstream mapName;
    mapName.open (createMapName);
    mapName << createMapNameData[0] << endl;
  }
  return 0;
}

string mapChange(int side, string oldMap){

    string newMap;
    if(oldMap == "Test")
    {
      cout << "Map Found :D";
    }
    else
    {
      cout << "ERROR MAP NOT FOUND, PLEASE REINSTALL.";
    }
    return newMap;
} 
```

如何在第 15 行使用 c_str 插入字符串，即如何将字符串转换为 c_str()？请帮忙，利杰罗伯特

# sql-server-2008 - SQL Server：CREATE SEQUENCE - 未知对象类型

> ID：12799485
> 
> 赞同：4
> 
> 时间：2012-10-09T11:54:49.417
> 
> 标签：sql-server-2008

我在查询的以下部分遇到问题：

```
IF EXISTS (SELECT * FROM sys.sequences seq JOIN sys.schemas sch ON seq.schema_id=sch.schema_id WHERE seq.name=N'LID'  AND sch.name=N'dbo' )
   DROP SEQUENCE [dbo].[LID]
GO 
```

它一直告诉我，这`sys.sequences`是一个未知的对象名称，`seq.schema_id`无法解析。

我运行 SQL Server Express 2008 R2。

我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T12:00:05.253

`sys.sequences`表在 sql server 2008 中不可用

序列是从**SQL server 2012在 sql server 中引入的**

[点击这里](http://technet.microsoft.com/en-us/library/ff877934.aspx)

# jpa - 如何在 ormlite 中使用 JPA 注释？

> ID：12799486
> 
> 赞同：4
> 
> 时间：2012-10-09T11:54:49.290
> 
> 标签：jpa, ormlite

我想在 ormlite 中使用 JPA 注释。这些注解（如@Entity 或@Id）属于 javax.persistence 包，它显然没有随 ormlite 提供。我无法解析 JPA 注释，而 ormlite 特定注释（如@DatabaseTable）可以。我是否需要下载第三方 jar 才能让 JPA 注释在 ormlite 中工作？

我只需要使用 ormlite + JPA。

查看[http://ormlite.com/javadoc/ormlite-core/index-all.html](http://ormlite.com/javadoc/ormlite-core/index-all.html)时，我们可以看到没有记录或可用的 JPA 注释，尽管它们在用户手册中有描述。

非常感谢提前！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:34:07.377

javax.persistence 在[中央 maven 存储库](http://central.maven.org/maven2/org/apache/geronimo/specs/geronimo-jpa_2.0_spec/1.1/geronimo-jpa_2.0_spec-1.1.jar)的 jar 中可用（例如）。它包含所有注释以及 ORMLite 忽略的所有其他 JPA 内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-02T22:00:00.153

[CMobileCom JPA](http://cmobilecom.com)是 Java JDBC 和 Android 的 JPA 规范的新实现。它是轻量级的，大约 380K。您可以添加以下 gradle 依赖项：

安卓：

```
dependencies {
    implementation("com.cmobilecom:cmobilecom-jpa-android:${version}@aar") {
        transitive = true
    }

    annotationProcessor "com.cmobilecom:cmobilecom-jpa-processor:$version"
} 
```

Java JDBC：

```
dependencies {
    implementation "com.cmobilecom:cmobilecom-jpa-jdbc:$version"

    // annotation processor: generate static metamodel
    compileOnly "com.cmobilecom:cmobilecom-jpa-processor:$version"
} 
```

支持 JPA 注释，因此您无需添加另一个 jar 来解析代码中的 JPA 注释。

请参阅开发人员指南：

[https://cmobilecom.com/docs/jpa/latest/devguide/index.html](https://cmobilecom.com/docs/jpa/latest/devguide/index.html)

免责声明：我是[CMobileCom JPA](http://cmobilecom.com)的开发人员。

# java - 如何使用 Jackcess 在 Access .mdb 中创建 ODBC 链接表？

> ID：12799489
> 
> 赞同：3
> 
> 时间：2012-10-09T11:54:54.867
> 
> 标签：java, ms-access, odbc, jackcess

我正在尝试使用 Jackcess 在 Access .mdb 中创建 ODBC 链接表。

```
Final String connStr = "ODBC;DRIVER={Sybase ASE ODBC Driver};NA=dbhostname,port;DB=myDbName;UID=myID;PWD=myPass;FILEDSN=path//myDSN.dsn";

Database mdb =Database.create(new File("./test.mdb");
mdb.createLinkedTable("testLinkTable",connStr, "targetTableName"); 
```

当我打开 test.mdb 时，我可以看到“testLinkTable”，但链接类型是“访问链接”。我期待在 test.mdb 中创建“ODBC 链接”表。

有人可以向我展示完成此任务的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T12:33:56.313

Jackcess中的`.createLinkedTable()`方法似乎目前只能创建指向另一个 Access 数据库中的表的链接。我刚刚使用 Jackcess 2.0.1 对此进行了测试，以下代码成功创建了一个名为 [Clients] 的 Access 链接表，该表指向另一个 Access 数据库：

```
Database database = DatabaseBuilder.open(new File("C:\\__tmp\\jTest\\linkTest.accdb"));
String linkedTableLocalName = "Clients";
String linkedTableSource = "C:\\Users\\Public\\Database1.accdb";
String linkedTableRemoteName = "Clients";
database.createLinkedTable(linkedTableLocalName, linkedTableSource, linkedTableRemoteName); 
```

但是，此代码创建了一个名为 [dbo_Addresses] 的链接表，该表*看起来*像是指向另一个 Access 数据库的链接（而不是预期的 ODBC 链接表）并且不起作用：

```
Database database = DatabaseBuilder.open(new File("C:\\__tmp\\jTest\\linkTest.accdb"));
String linkedTableLocalName = "dbo_Addresses"; 
String linkedTableSource = "ODBC;DSN=myDb;Trusted_Connection=Yes;APP=Microsoft Office 2010;DATABASE=myDb;";  
String linkedTableRemoteName = "dbo.Addresses";
database.createLinkedTable(linkedTableLocalName, linkedTableSource, linkedTableRemoteName); 
```

# c# - 自定义代码项目，WebBrowser相关，C#中找不到特定id的元素

> ID：12799492
> 
> 赞同：1
> 
> 时间：2012-10-09T11:55:10.467
> 
> 标签：c#, html, console, getelementbyid

我一直在控制台项目上开发基于 C# 的 Web 浏览器相关程序。现在，这是一段在**Windows 窗体应用程序**中运行的代码，但在**控制台**应用程序中它向我显示*'Object reference not set to an instance of an object'*。到目前为止，通过调试，通过 elementId 将**HTMLElementCollection**中的所有内容转换为**var**，它显示为 False，这意味着 HTML 中没有这样的 id。现在，这段代码没有错，因为相同的代码在 Windows 窗体应用程序中运行良好。我希望你明白。对此有一点帮助将不胜感激！谢谢。

下面提供了一段代码：

```
if (browser.ReadyState == WebBrowserReadyState.Complete)
{
    //Putting the values inside the boxes
    browser.Document.GetElementById("project_title").SetAttribute("value", projectTitle);
    browser.Document.GetElementById("article_title").SetAttribute("value", title);
    browser.Document.GetElementById("article_content").SetAttribute("value", content);
    browser.Document.GetElementById("article_tags").SetAttribute("value", tags);
    browser.Document.GetElementById("article_url_1").SetAttribute("value", url);
    browser.Document.GetElementById("article_keyword_1").SetAttribute("value", keywords);
    browser.Document.GetElementById("article_url_2").SetAttribute("value", url2);
    browser.Document.GetElementById("article_keyword_2").SetAttribute("value", keywords2);
    browser.Document.GetElementById("article_url_3").SetAttribute("value", url3);
    browser.Document.GetElementById("article_keyword_3").SetAttribute("value", keywords3);

    HtmlElementCollection lastElementCollection = browser.Document.All;
    foreach (HtmlElement webpageelement in lastElementCollection)
    {
        if (webpageelement.GetAttribute("value").Contains("Submit"))
            webpageelement.InvokeMember("click");
    }

    Console.WriteLine("Please wait for 5 second(s).");
    Thread.Sleep(5000);
    Console.WriteLine("Post has been submitted successfully!");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:12:49.897

您确定浏览器对象已加载正确的内容吗？首先检查 browser.Document 元素的 innerHtml。（虽然调试可能是？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:31:32.297

你可以试试这个：

只需在代码片段的第一个 IF 语句之前放置一个等待序列；像这样：

```
while (browser.ReadyState != WebBrowserReadyState.Complete)
{  
  Application.DoEvents();
}

if (browser.ReadyState == WebBrowserReadyState.Complete)
{
... 
```

**更新：您是否使用 DocumentCompleted 事件？检查 WebBrowserDocumentCompletedEventArgs 的 url 属性与您请求的 url 是否相同。因为 documentcompleted 会针对您的 Web 请求中的所有文件（如 js 和 css 文件）触发。**

# python - 作业完成时集群 qsub 检查。Python

> ID：12799505
> 
> 赞同：2
> 
> 时间：2012-10-09T11:55:59.003
> 
> 标签：python, cluster-computing, qsub

我正在构建一个 python 管道，并在该管道脚本中调用另一个 python 脚本，该脚本使用 qsub 向集群提交作业（该作业包含 op 70 个作业）现在我需要这些作业的输出才能继续工作。

在完成所有 70 个作业之前，如何“暂停”python 脚本？

我无法修改提交给服务器的脚本，所以必须在我自己的脚本中完成。（使用 AMD64 集群）

编辑：

这就是我调用另一个脚本的方式：

```
os.system("python ScriptThatQsub.py arg1 arg2") 
```

我仍在努力。并搜索interwebz，但我不禁想知道……这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T09:36:17.160

只需使用命令行标志`-sync y`，如`qsub -sync y my_job`或

```
from subprocess import Popen
job = Popen(["qsub", "-sync", "y", "my_job"])
job.communicate() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:34:29.090

我刚刚将集群中的 Qstat 放入一个变量中，并检查了我的作业名是否在该列表中找到。如果是这样的话。睡一会儿。感谢大家的帮助！

# tridion - 如何在 tridion 页面中包含动态组件演示？

> ID：12799509
> 
> 赞同：4
> 
> 时间：2012-10-09T11:56:24.640
> 
> 标签：tridion, tridion-2011

如何在页面中包含/引用动态组件模板。我创建了一个动态 CT 并发布了它，但想在页面中呈现它的演示文稿。请建议。

提前致谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T12:09:53.287

有很多方法可以在页面上添加动态呈现。

直接方法 - 为此，您的组件演示应该被允许在页面上。选中**Allow on Page Using Dynamic Assembly**。在页面上添加与其他所有相同的演示文稿。

代码方法 - 您可以使用 API 直接从代理存储中获取组件表示。这是相同的示例代码。

```
*<%@ Import Namespace="Tridion.ContentDelivery.DynamicContent"%>
<%
  ComponentPresentationFactory factory = new ComponentPresentationFactory();
  ComponentPresentation ps = factory.getComponentPresentation("CompID","TEMPLATEID");
  Response.Write(ps.Content);
%>
JSP example:

<%@ page import="com.tridion.dynamiccontent" %>
<% 
  ComponentPresentationFactory cpf = new ComponentPresentationFactory("tcm:0-1-1"); // Publication URI
  // Component URI and Component Template URI
  ComponentPresentation componentPresentation = cpf.getComponentPresentation("CompID", "TEMPLATEID");
  out.println(componentPresentation.getContent());
%> 
```

C＃

```
ComponentPresentationFactory cp_factory = new ComponentPresentationFactory(publicationid);
ComponentPresentation cp = cp_factory.GetComponentPresentation(CompID, TEMPLATEID);
if (cp != null)
  {
     Output = cp.Content;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T12:02:30.810

有多种方法可以在页面上显示**动态演示**：

*   最简单的方法是将您的**动态 CT**标记为`"Allow on Page Using Dynamic Assembly"`，然后您将能够将其作为非动态 CT 嵌入到您的页面中

![在此处输入图像描述](../Images/d06359b80ca5fdf8374b5a3dfbba0702.png)

*   有关更高级的替代方案，您可以查看实时内容文档： [实施内容交付 > 开发网页](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=dynamic%2520component%2520presentation&sid=lcSearch.runSearch1349784679412&eventType=lcContent.loadDocconcept_2CD03A3B6F88437D910CFC8FC7A6783D&query=&scope=&filename=DevelopingWebPages.xml&docid=concept_2CD03A3B6F88437D910CFC8FC7A6783D&inner_id=&tid=&addHistory=true&resource=)

# jquery - jQuery 事件绑定适用于普通链接，但现在适用于带有图像的链接

> ID：12799511
> 
> 赞同：3
> 
> 时间：2012-10-09T11:56:26.550
> 
> 标签：jquery

我有以下 jQuery 代码：

```
<script type="text/javascript">
    jQuery.noConflict();
    jQuery(document).ready(function(){
            jQuery('a.connect').bind("click", function(event)
            {
                    var str = event.target.id;
                    alert (str);
                    var uid = str.substring(str.indexOf("_") + 1);
                    //connect (uid);
            });
    });
</script> 
```

当我使用以下 HTML

```
<a class="connect button-small-blue" id="connect_{$uid}" href="#">Connect</a> 
```

一切都很好。但是，当我使用

```
<a class="connect" id="connect_{$uid}" href="#"><img src="{$imgSocialConnect}" alt="{$lblSocialConnect}" title="{$lblSocialConnect}" /></a> 
```

alert(str) 调用为空。

我刚刚发现，当我将警报呼叫替换为

```
alert (jQuery(this).attr('id') ); 
```

ID 被正确检索。

任何人都可以对此有所了解并告诉我为什么第二个 HTML 变体不能像现在这样使用 jQuery 函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:00:58.687

那是因为当您在第二种变体情况下单击时，您实际上是**在单击图像**，然后单击事件传播到封闭`a`元素，因此当您打印时，`event.target.id`您试图访问`id`不存在的图像，并且所以你得到一个空字符串。

您可以在第二个变体案例中执行此操作进行测试：

```
alert(event.target.tagName); 
```

那应该给你**IMG**。

要访问第二个变体案例`id`中的`a`元素，只需执行`$(this).attr('id')`

# gdb - 如何让 GDB 使用 RAM 转储文件？

> ID：12799520
> 
> 赞同：0
> 
> 时间：2012-10-09T11:57:03.710
> 
> 标签：gdb, crash-dumps, coredump

我们有一个带有 ColdFire CPU 的嵌入式板，它运行 µC-OS/II。当嵌入程序崩溃时，CPU 会转储（或复制）嵌入闪存中的整个 RAM。然后，我们有一个程序将 RAM 内容（已转储到闪存中）检索到一个简单的 .bin 文件中。当我们要调试时，我们使用 GDB (m68k-elf-gdb.exe) 结合 .elf 文件。例如 ：

```
$ gdb our_elf_file
(gdb) print some_var
Cannot access memory at address 0x30617890
(gdb) ptype some_var
type = unsigned int
(gdb) 
```

这使我们能够知道变量的地址。然后，我们使用先前给定的地址执行简单的偏移操作，并在特定位置读取 RAM 转储。例如，如果我们要读取位于 0x30617890 的**some_var** *，*我们知道转储表示从*0x20000000*开始的 RAM 内容。之后，我们在偏移量（*0x30617890* - *0x20000000*）处读取 .bin 文件的 4 个字节。（有时我们还将 objdump (m68k-elf-objdump.exe) 用于其他目的）。

我对这种东西完全陌生，所以也许我的问题很愚蠢，但是，有没有办法告诉 gdb RAM 内容在哪里？

# ruby-on-rails - 将 Facebook 元数据添加到带有子页面的 Rails 页面

> ID：12799527
> 
> 赞同：0
> 
> 时间：2012-10-09T11:57:31.947
> 
> 标签：ruby-on-rails, facebook, metadata

在 Rails 页面上添加元数据时，我尝试过 Facebook 的 Open Graph 协议。我现在要做的是使我的代码不重复或干燥---而不是为我拥有的每个控制器页面放置一个元数据标题，我想创建一个名为“MyMetaBuilder”的基类，它将被继承通过子页面，但不知道从哪里以及如何开始编码...有人建议必须根据上下文动态生成元数据属性值。比如PlayMetaBuilder、CookMetaBuilder等等……

另外，当对控制器动作进行单元测试时，我如何验证它的存在？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:11:33.477

我为 Scoutzie 所做的，是将所有元数据放入一个头部部分，if/else 情况如下：

```
%meta{:type => 'Author', :content => "Kirill Zubovsky"}
%meta{'property' => "og:site_name", :content=>"Scoutzie"}
-if @designer
 ...
-elsif @design
 ...
-else
 ... 
```

这样，根据加载的变量，我知道它是哪个页面，从而知道要包含哪些元数据。这可能不是一个优雅的解决方案，但它确实有效并且非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:12:23.253

一件事是定义标签，另一件事是渲染它们。我会做以下事情：

*   编写一个控制器混合（类似于acts_as_metatagable），我将为每个控制器定义特定字段（并用默认值填充其余字段）。这些将被分配给类（或实例）变量，并以这种方式在渲染步骤中可访问）。

*   编写一个辅助函数，它将获取我所有的标签并将它们转换为 html。然后将在布局中调用此辅助函数并在文档的头部呈现。

所以，它看起来有点像这样： # homepage_controller.rb class HomepageController < ActionController::Base # option 1.2: 在下面直接包含它 # include ActsAsMetatagable act_as_metatagable :title => "Title", :url => homepage_url结尾

```
# lib/acts_as_metatagable.rb
module ActsAsMetatagable
  module MetatagableMethods
    #option 2.2: insert og_tags method here and declare it as helper method
    def og_metatags
      @og_tags.map do |k, v|
        # render meta tags here according to its spec
      end
    end
    def self.included(base)
       base.helper_method :og_tags
    end
  end

  def acts_as_metagabable(*args)
    include MetatagableMethods
    # insert dirty work here
  end
end

# option 1.1: include it in an initializer
# initializers/acts_as_metatagable.rb
ActiveController::Base.send :include, ActsAsMetatagable

# option 2.1: insert og_metatags helper method in an helper
module ApplicationHelper
  def og_metatags
    @og_tags.map do |k, v|
      # render meta tags here according to its spec
    end
  end
end 
```

# php - 致命错误：在非对象上调用成员函数 bindParam()

> ID：12799528
> 
> 赞同：0
> 
> 时间：2012-10-09T11:57:32.933
> 
> 标签：php, class, sqlbindparameter, member-functions

> **可能重复：**
> [致命错误：调用成员函数 bindParam()](https://stackoverflow.com/questions/7941089/fatal-error-call-to-a-member-function-bindparam)

有人可以帮我修复我的脚本，因为我真的不知道出了什么问题。在我添加多种语言之前，它运行良好。

这是我选择和读取轮胎的脚本：

```
 <div id="bloklinks">
<?php
    include_once "class/tekst.class.php";
    $teksten = new tekst($dbo);
    $tekst = $teksten->getTeksten($website, $lang, $_GET['p']);
?>
                <h3><?php 
                    if(isset($_POST['searchtyre']) && $_POST['type'] != "type" || isset($_POST['searchtyre']) && $_POST['size'] != "size" || isset($_GET['type']) && isset($_GET['app']))
                    {
                        $searchinfo = new search($dbo);
                        $splittype = array("0","");
                        if(isset($_POST['type']) && $_POST['type'] != "type")
                        {
                            $splittype = split("-", $_POST['type']);
                        }
                        $type = isset($_GET['type']) ? $_GET['type'] : $splittype[0];
                        $splittype[1] = isset($splittype[1]) ? $splittype[1] : 0;
                        $app = isset($_GET['app']) ? $_GET['app'] : $splittype[1];
                        $size = NULL;
                        $typearray = $searchinfo->getTypes($website, $type);
                        $apparray = $searchinfo->getApplications($website, $type, $app);
                        echo "<span>";
                        if($type != 0){ echo " >> ".$typearray[0]->type_naam; }
                        if(isset($apparray[0])){ echo " >> ".$apparray[0]->application_naam; }
                        if(isset($_POST['size']) && $_POST['size'] != "size" || isset($_GET['size']) && $_GET['size'] != "size") 
                        { 
                            $size = isset($_GET['size']) ? $_GET['size'] : $_POST['size'];
                            echo " >> ".$size; 
                        } 
                        echo "</span>";
                    }
                    else
                    {
                        echo "Products"; 
                    } ?>&nbsp;</h3>
                <div class="hr"><hr/></div>
                <div id="bandentabel">
                    <table cellspacing="0">
                        <tr>
<?php
include_once "class/banden.class.php";
    $banden = new banden($dbo);
    if(isset($_POST['type']) && $_POST['type'] == "type" && $_POST['size'] == "size")
    {
        echo "\t\t\t\t\t\t\t<th colspan=\"2\" style=\"font-size: 12px; font-weight: normal;\">Please select a type & application or a size.</th>\n";
        $bandlijst = array();
    }
    else if(isset($type) && isset($app))
    {
        $app = ($app == 0) ? $app = NULL : $app = $app;
        $bandlijst = $banden->getBanden($website, NULL, $type, $app, $size);
        if(count($bandlijst) == 0)
        {
            echo "\t\t\t\t\t\t\t\t<th style=\"font-size: 12px; font-weight: normal;\">Company doesn't have a ".$typearray[0]->type_naam." ";
            if(isset($apparray[0])){ echo $apparray[0]->application_naam." "; }
            echo $size." inch tyre in her program, please select a different size.</th>\n";
        }
        $app = ($app == NULL) ? $app = 0 : $app = $app;
    }
    else
    {
        if(isset($size))
        {
            $bandlijst = $banden->getBanden($website, NULL, NULL, NULL, $size);
        }
        else
        {
            $bandlijst = $banden->getBanden($website);
        }
    }
    $counter = 0;
    $patternarray = array();
    foreach($bandlijst as $band)
    {
        if(!in_array($band->band_ID, $patternarray))
        {
            if($counter == 2)
            {
                echo "\t\t\t\t\t\t</tr>
\t\t\t\t\t\t<tr>\n";
                $counter = 0;
            }
            if(isset($type) && isset($app))
            {
                echo "\t\t\t\t\t\t\t<td><a href=\"?lang=".$_GET['lang']."&amp;p=2&amp;type=".$type."&amp;app=".$app;
                if(isset($size))
                {
                    echo "&amp;size=".$size;
                }
                echo "&amp;b=".$band->band_ID."#specification\"><img src=\"bestanden/banden/".$band->band_imgnaam."-K.png\" width=\"107\" height=\"23\" alt=\"".$band->band_pattern."\"><p>".$band->band_pattern."<br/><span>Specification</span></p></a></td>\n";
            }
            else if(isset($size))
            {
                echo "\t\t\t\t\t\t\t<td><a href=\"?lang=".$_GET['lang']."&amp;p=2&amp;type=0&amp;app=0&amp;size=".$size."&amp;b=".$band->band_ID."#specification\"><img src=\"bestanden/banden/".$band->band_imgnaam."-K.png\" width=\"107\" height=\"23\" alt=\"".$band->band_pattern."\"><p>".$band->band_pattern."<br/><span>Specification</span></p></a></td>\n";
            }
            else
            {   
                echo "\t\t\t\t\t\t\t<td><a href=\"?lang=".$_GET['lang']."&amp;p=2&amp;b=".$band->band_ID."#specification\"><img src=\"bestanden/banden/".$band->band_imgnaam."-K.png\" width=\"107\" height=\"23\" alt=\"".$band->band_pattern."\"><p>".$band->band_pattern."<br/><span>Specification</span></p></a></td>\n";
            }
            $counter++;
            array_push($patternarray, $band->band_ID);
        }
    }
    if($counter == 1)
    {
        echo "\t\t\t\t\t\t\t\t<th>&nbsp;</th>\n";
    }
?>
                        </tr>
                    </table>
                </div>
            </div>
<?php
    <div id="blokrechts">
                <h3>Tyre search</h3>
                <div class="hr"><hr/></div>
                <form action="?lang=<?php echo $_GET['lang'];?>&amp;p=2" method="post">
<?php
    $seltype = 0;
    $application = 0;
    $size = 0;
    $search = new search($dbo);
    if(isset($_POST['searchtyre']) && $_POST['type'] != "type" || isset($_POST['searchtyre']) && $_POST['size'] != "size" || isset($_GET['type']) && isset($_GET['app']))
    {
        $splittype = array("0","");
        if(isset($_POST['type']) && $_POST['type'] != "type") { $splittype = split("-", $_POST['type']); }
        $seltype = isset($_GET['type']) ? $_GET['type'] : $splittype[0];
        if($seltype == "type") { $seltype = 0; }
        $splittype[1] = isset($splittype[1]) ? $splittype[1] : 0;
        $application = isset($_GET['app']) ? $_GET['app'] : $splittype[1];
        $size = NULL;
        if(isset($_POST['size']) && $_POST['size'] != "size" || isset($_GET['size']) && $_GET['size'] != "size") { $size = isset($_GET['size']) ? $_GET['size'] : $_POST['size']; }
    }
?>
                    <table class="searchtable">
                        <tr>
                            <td>
                                <select name="type">
                                    <option value="type">-- Type &amp; Application --</option>
<?php
    $types = $search->getTypes($website);
    foreach($types as $type)
    {
        $selected = "";
        $applications = $search->getApplications($website, $type->type_ID);
        if(count($applications) > 0)
        {
            echo "\t\t\t\t\t\t\t\t\t<optgroup label=\"".$type->type_naam."\">\n";
            foreach($applications as $app)
            {
                $selected = "";
                if($application == $app->application_ID) { $selected = " selected=\"selected\""; }
                echo "\t\t\t\t\t\t\t\t\t\t<option value=\"".$type->type_ID."-".$app->application_ID."\"".$selected.">".$app->application_naam."</option>\n";
            }
            echo "\t\t\t\t\t\t\t\t\t</optgroup>\n";
        }
        else
        {
            if($type->type_ID == $seltype) { $selected = " selected=\"selected\""; }
            echo "\t\t\t\t\t\t\t\t\t<option value=\"".$type->type_ID."\"".$selected.">".$type->type_naam."</option>\n";
        }
    }               
?>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <select name="size">
                                    <option value="size">-- Size --</option>
<?php
    $inchlist = $search->getSizes($website);
    sort($inchlist);
    $doublelist = array();
    foreach($inchlist as $inch)
    {
        $selected = "";
        if(!in_array($inch->bandinfo_size, $doublelist))
        {
            if($size == $inch->bandinfo_size) { $selected = " selected=\"selected\""; }
            array_push($doublelist, $inch->bandinfo_size);
            echo "\t\t\t\t\t\t\t\t\t<option value=\"".$inch->bandinfo_size."\"".$selected.">".$inch->bandinfo_size."</option>\n";
        }
    }
?>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="submit" name="searchtyre" value="Search" />
                            </td>
                        </tr>
                    </table>
                </form>

                <h3>Contact us</h3>
                <div class="hr"><hr/></div>
                <table class="contacttable">
                    <tr>
                        <td class="itemtekst">Phone:</td>
                        <td>+31 12345678</td>
                    </tr>
                    <tr>
                        <td class="itemtekst">Fax:</td>
                        <td>+31 12345678</td>
                    </tr>
                    <tr>
                        <td class="itemtekst">E-mail:</td>
                        <td>info@email.com</td>
                    </tr>
                </table>
            </div>

?>
            <div class="clearboth">&nbsp;</div>
            <!--<a name="specification"></a>//-->
<?php
if(isset($_GET['b']))
{
    $headwaarde = $banden->getBanden($website, $_GET['b']);
?>
            <div id="matentabel">
                <table id="spectabel">
                    <tr>
                        <td rowspan="4" class="bandafb">
                            <a href="#" onclick="fx.changeImage('<?php echo $headwaarde->band_imgnaam; ?>', this); return false;">
                                <img src="afbeeldingen/vergroot.png" width="14" height="13" alt="vergroot/verklein" class="zoom"/>
                                <img src="bestanden/banden/<?php echo $headwaarde->band_imgnaam; ?>.png" width="206" height="260" alt="<?php echo $headwaarde->band_pattern; ?>"/>
                            </a>
                        </td>
                        <th><?php echo $headwaarde->band_pattern; ?></th>
                    </tr>
                    <tr>
                        <td style="padding-bottom: 10px;"><?php echo $headwaarde->band_text; ?></td>
                    </tr>
                    <tr>
                        <td><img src="afbeeldingen/specification.png" width="9" height="9" alt="specification"/>&nbsp;&nbsp;Specification</td>
                    </tr>
                    <tr>
                        <td>
                            <div>
                                <table class="spec">
                                    <tr>
<?php
    switch($headwaarde->band_type)
    {
        case "1":
        case "3":
        default:
?>
                                        <th>Item Code</th>
                                        <th>Tire Size</th>
                                        <th>Load Symbol</th>
                                        <th>Note</th>
                                        <th>Speed Max (KM/H)</th>
                                        <th>Overall Diameter (mm)</th>
                                        <th>Section Width (mm)</th>
                                        <th>Tread Depth (mm)</th>
                                        <th>Rim Width (inch)</th>
                                        <th>Weight (KGS)</th>
                                        <th>Single MAX load / pressure (KGS/PSI)</th>
                                        <th>Brandstof</th>
                                        <th>Geluid Db</th>
                                        <th>Geluid</th>
                                        <th>Grip</th>
<?php
            break;
        case "2":
?>
                                        <th>Item Code</th>
                                        <th>Tire Size</th>
                                        <th>Load Index (S/D)</th>
                                        <th>Ply Rating</th>
                                        <th>SI</th>
                                        <th>Overall Diameter (mm)</th>
                                        <th>Section Width (mm)</th>
                                        <th>Tread Depth (mm)</th>
                                        <th>Rim Width (inch)</th>
                                        <th>Weight (KGS)</th>
                                        <th>Single MAX load / pressure (KGS/PSI)</th>
                                        <th>Dual MAX load / pressure (KGS/PSI)</th>
                                        <th>Brandstof</th>
                                        <th>Geluid Db</th>
                                        <th>Geluid</th>
                                        <th>Grip</th>
<?php
            break;
    }
?>
                                    </tr><?php

    $bandinfo = $banden->getBandenInfo($website, $headwaarde->band_ID);

    foreach($bandinfo as $banditem)
    {
        switch($headwaarde->band_type)
        {
            case "1":
            case "3":
            default:
                echo "\n\t\t\t\t\t\t\t\t\t<tr>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_itemcode."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_size."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_loadsymbol."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_note."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_speedmax."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_overalldiameter."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_sectionwidth."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_treaddepth."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_rim."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_weight."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_singlemax."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_fuel."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_geluid_db."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_geluid_img."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_grip."</td>
\t\t\t\t\t\t\t\t\t</tr>";
                break;
            case "2":
                echo "\n\t\t\t\t\t\t\t\t\t<tr>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_itemcode."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_size."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_loadindex."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_plyrating."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_speedsymbol."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_overalldiameter."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_sectionwidth."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_treaddepth."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_rim."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_weight."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_singlemax."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_dualmax."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_fuel."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_geluid_db."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_geluid_img."</td>
\t\t\t\t\t\t\t\t\t\t<td>".$banditem->bandinfo_grip."</td>
\t\t\t\t\t\t\t\t\t</tr>";
                break;
        }
    }
    echo "\n";
?>
                                </table>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
<?php
}
?> 
```

这是我连接到我的数据库的类：

```
<?php
include_once "connect.class.php";

class banden extends connect
{   

    private $bandenlijst;

    private $bandinfolijst;

    public function getBanden($database, $pattern = NULL, $type = NULL, $app = NULL, $size = NULL)
    {
        $sql = "SELECT * FROM `".$database."_banden`";

        if(!empty($pattern))
        {
            $sql .= " WHERE band_ID=:pattern LIMIT 1";
        }
        else if(!empty($type))
        {
            if(!empty($size))
            {
                $sql .= " INNER JOIN _bandinfo ON bandinfo_pattern=band_ID";
            }
            $sql .= " WHERE band_type LIKE :type";
            if(!empty($app))
            {
                $sql .= " AND band_application LIKE :app";
            }
            if(!empty($size))
            {
                $sql .= " AND bandinfo_size=:size";
            }
        }
        else if(!empty($size))
        {
            $sql .= " INNER JOIN ".$database."_bandinfo ON bandinfo_pattern=band_ID WHERE bandinfo_size=:size";
        }
        else
        {
            $sql .= " ORDER BY band_ID DESC";
        }
        try
        {
            $stmt = $this->db->prepare($sql);
            if(!empty($pattern))
            {
                $stmt->bindParam(":pattern", $pattern, PDO::PARAM_STR);
            }
            if(!empty($type))
            {
                $type = $type;
                $stmt->bindParam(":type", $type, PDO::PARAM_INT);
                if(!empty($app))
                {
                    $app = $app;
                    $stmt->bindParam(":app", $app, PDO::PARAM_STR);
                }
            }
            if(!empty($size))
            {
                $stmt->bindParam(":size", $size, PDO::PARAM_STR);
            }
            $stmt->execute(); 
            $this->bandenlijst = $stmt->fetchAll(PDO::FETCH_OBJ);
            $stmt->closeCursor();

            if(!empty($pattern) && isset($this->bandenlijst[0]))
            {
                $this->bandenlijst = $this->bandenlijst[0];
            }

            return $this->bandenlijst;
        }
        catch (Exception $e)
        {
            die ($e->getMessage());
        }
    }

public function getBandeninfo($database, $pattern=NULL, $id = NULL, $limit = NULL)
    {
        $sql = "SELECT * FROM ".$database."_bandeninfo";
        if(!empty($id))
        {
            if(is_numeric($id))
            {
                $sql .= " WHERE bandinfo_ID=:id LIMIT 1";
            }
            else
            {
                return NULL;
            }
        }
        else if(!empty($pattern) && is_numeric($pattern))
        {
            $sql .= " WHERE bandinfo_pattern=:pattern";
        }
        if(empty($id) && !empty($limit))
        {
            if($limit == 1) { $limit = 0; }
            $sql .= " LIMIT ".$limit.", 15";
        }
        try
        {
            $stmt = $this->db->prepare($sql);
            if(!empty($id) && is_numeric($id))
            { 
                $stmt->bindParam(":id", $id, PDO::PARAM_INT); 
            }
            else if(!empty($pattern) && is_numeric($pattern))
            {
                $stmt->bindParam(":pattern", $pattern, PDO::PARAM_INT);
            }
            $stmt->execute();
            $result = $stmt->fetchAll(PDO::FETCH_OBJ);
            $stmt->closeCursor();

            return $result;
        }
        catch(Exception $e)
        {
            die($e->getMessage());
        }
    }

    public function __construct($dbo = NULL)
    {

        parent::__construct($dbo);
    }
}
?> 
```

发生严重错误的情况如下：

当我在第一个下拉列表中选择某些内容并提交时，一切都很好......

但是当我向它添加大小时，我得到了这个错误：

致命错误：在第 62 行的 /website.com/class/banden.class.php 中的非对象上调用成员函数 bindParam()

第 62 行 =`$stmt->bindParam(":size", $size, PDO::PARAM_STR);`

取决于我的选择......有时是这一行：

```
$stmt->bindParam(":type", $type, PDO::PARAM_INT); 
```

有人可以帮助我吗？我不认为自己可以自己修复它:(

非常感谢你

# excel - Excel 命名函数参数或不带宏的 UDF

> ID：12799530
> 
> 赞同：5
> 
> 时间：2012-10-09T11:57:38.380
> 
> 标签：excel, function, excel-formula

似乎有点遗漏了，在 Excel 中创建用户定义的声明性函数而不定义宏是不容易的。我不能将 XSLM 用于企业中的艰苦战斗，但我希望能够有目的地定义一个函数。

**我想做这个;**

```
=BreakEven(C1:C20) 
```

但我不能使用宏，虽然我可以使用“命名公式”。麻烦的是如何传递参数呢？我已经看到了一些技巧（kludgy workarounds），但不适用于 xslx。

我希望能够在另一个选项卡中定义一个 Breakeven() 函数，并在此处引用它，传入 MORE THAN 一个参数，实际上是两个范围。我确定有某种方法可以使用字符串解析，但我看不到它。

我不介意函数看起来不完全一样，只要它在单元格内进行评估并且我可以将其解析为“意图”。例如，我无法在 xlsx 中工作的这个示例（ [http://www.jkp-ads.com/articles/ExcelNames09.asp ）使用这种语法；](http://www.jkp-ads.com/articles/ExcelNames09.asp)

```
=IF(ROW(D3),CellColor) 
```

其中“cellcolor”是函数的名称，D3 是范围参数。我正在玩的另一个解决方案是使用可变参数列表以列格式定义一个函数（这是 Excel 电子表格的两行）；

```
[Value][function][parameter1][parameter2][parameter3]
 24050  BreakEven C1:C20      A1:A20 
```

它并不漂亮，但后者的好处是它向外部读者描述了该功能。我们*知道*这是一个盈亏平衡函数，而如果我们输入*实际*公式“OFFSET,INDIRECT,SUM()()()()等”，它将无法读取/解析。当然，在这种情况下，我必须通过解析 Excel 中右侧的单元格来构造值字段，这会使值公式变得混乱，但至少它会是一个自我描述的行。

任何人都可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T16:45:11.003

## 穷人的UDF

所以我认为我们要做的就是这个；

```
 A      B         C           D           E
1    [Value][function][parameter1][parameter2][parameter3]
2     24050  BreakEven     C1:C20      A1:A20
3       111      mySum          1          10         100 
```

其中“BreakEven”是一个“命名函数”。这是“mySum”的公式；

```
=sum(C1:E1) 
```

要评估 B 中列出的函数，我们只需将其放在 A 列中（为 A 列中的所有行转置相同的值；

```
=value(B) 
```

这是因为 A2 和 A3 都将列 B 评估为一个值，这导致 BreakEven 和 Sum 在 A2 和 A3 的上下文中运行（作为穷人的 UDF）。范围 (C1:E1) 当然是相对的。

因此，实际上，我们可以在 B 列中写入任何函数名称（只要在工作簿中定义了相应的命名函数，它可以像您喜欢的那样复杂）。C、D 和 E 列作为同一行上的函数的参数。

我本来希望能够在 A 列中写下以下内容；

```
=mySum(1,10,100) 
```

但是在没有这种支持的情况下，上述机制提供了一个用户可以理解的可读参数化函数，它也是机器可读的（也可以在 CSV 中工作），并允许我们将可重用函数卸载到库表在工作簿的某个地方进行维护。

不完美，但可以接受的妥协，除非有人有聪明的方法在一个单元格中做到这一点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:56:25.583

不是真正的答案，但在这里比在评论中更容易说明。尽管您不能以简单的方式重命名公式-我喜欢您的建议，实际上我以前从未想过；但是我从来没有在非宏观环境中工作过，所以这从来没有发生过——你可以在实际的公式中添加注释来解释它的作用。例如：

```
=N("This is a really complex BreakEven Formula")+SUM(3,4,5) 
```

是一个完全有效的公式。正如我所说，这不是一个真正的答案，但可能会增加复杂公式的清晰度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T09:54:22.613

你可以用一个小技巧做到这一点

例如，要有效地创建一个模拟 =cuberoot(x) 的 cuberoot UDF，然后将变量命名为 cuberoot 并具有这样的“值”。

=(RC[-1])^(1/3)

现在您可以使用临时切换到 RC 模式来执行此操作，或者将光标放在单元格 E5 中并键入名称值 =(D5)^(1/3)

现在，当您需要一个 cuberoot 时，您可以将参数放在任何单元格中，然后将 =cuberoot 放在其右侧的单元格中。它确实有效并遵循真正的 Excel 规则。

我将它用于具有单个“参数”时间作为因变量的多参数模型。然后我将术语模型定义为模型方程，例如 =a+b *Time+c* Time^2

其中 a,b,c 已经命名为具有唯一参数值的位置 -

然后将时间定义为 =RC[-1]

我的工作表充满了简单地说 =Model 的单元格，并且左边有所需的时间值（即他们的参数）。使用多个单元格扩展到多参数函数很简单。它通常非常适合电子表格布局。在定义名称框中更改一次模型的定义，所有位置都会同时更改。

我有一个名为 ToDMS 的函数，它采用前面单元格中的十进制度值并将其转换为 deg Min 和 Sec 字符串 - 非常整洁。您需要将度数放在单个单元格中，但希望将其放在 alt 中。在另一个单元格中形成

优雅，简单并且有效

鲍勃乔丹

# java - 如何从不扩展 Activity、Android 的类创建 DatePicker？

> ID：12799531
> 
> 赞同：0
> 
> 时间：2012-10-09T11:57:37.193
> 
> 标签：java, android, android-widget

我正在尝试从不扩展 Activity 类的类创建 DatePicker 对话框。我需要一个名为 EnterDate 的类中的 DatePicker，该类具有包含活动上下文的上下文属性。

WEB 上的 DatePicker 的所有示例都是用 Activity 类编写的基本示例，这就是它们让我感到困惑的原因。

我想要在低于 3.0 的 Android 上运行良好的日期选择器。我不使用 XML 布局。

所以基本上我需要建议在哪里放置 onCreateDialog() ，如何检索选择的时间等。

我有一个按钮，它有 onClickListener() 用于调用 DatePicker。

一小时前，我对 TimePicker 提出了同样的问题并得到了这个答案： [如何从不扩展 Activity 的类中创建 TimePicker，Android？](https://stackoverflow.com/questions/12797244/how-to-create-a-timepicker-from-class-which-do-not-extends-activity-android)

我认为该解决方案只需要稍作修改即可像 DatePicker 一样工作。

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:32:24.913

修改类

```
public class MyDatePicker {
DatePickerDialog mDatePickerDialog;

public interface onDateSet {
    public void onDate(DatePicker view, int year, int monthOfYear,
            int dayOfMonth);
}

onDateSet mOnDateSet;

public void setDateListener(onDateSet mOnDateSet) {
    this.mOnDateSet = mOnDateSet;
}
public MyDatePicker(Context ctx) {
    mDatePickerDialog = new DatePickerDialog(ctx, new OnDateSetListener() {

        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            mOnDateSet.onDate(view, year, monthOfYear, dayOfMonth);

        }
    }, 2000, 1, 1);
}

public void show() {
    mDatePickerDialog.show();
} 
```

和..

```
 public void ShowDatePicker() {
        MyDatePicker myTimePicker = new MyDatePicker(this);
        myTimePicker.show();
    myTimePicker.setDateListener(new onDateSet() {

        @Override
        public void onDate(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            Toast.makeText(MainActivity.this,
                    "date is " + year + ":" + monthOfYear+":"+dayOfMonth,
                    Toast.LENGTH_LONG).show();

        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:06:23.300

您不需要活动来创建和显示对话框。您可以使用辅助类创建带有回调和初始化数据的对话框`DatePickerDialog.Builder`，然后调用`show()`此构建器。

*这仅在您处于 UI 线程中时才有效。*

# oracle - 如何比较多列的值？

> ID：12799533
> 
> 赞同：1
> 
> 时间：2012-10-09T11:57:44.323
> 
> 标签：oracle, oracle11g, compare

假设所有值列具有相同的数据类型。我想要 SELECT 查询结果中具有 id 的所有值中的最高值。

表结构：

```
table_a: id, value1, value2, value3, value4, value5 
```

示例数据：

```
id, value1, value2, value3, value4, value5
2, 125, 256, 133, 400, 67
3, 14, 14, 14, 3, 6
4, 325, 441, 441, 975, 3 
```

示例期望的结果：

```
id, highest_value
2, 400
3, 14
4, 975 
```

我开始了 CASE 声明的路径，但很快就变得一团糟。我厌倦了一个子选择，但未能让它发挥作用。有没有一种干净的方法可以将多个列值相互比较？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T12:00:57.503

在这种情况下，[最大](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions069.htm#i77473)的功能将完成这项工作。

```
with t1(id1, val1, val2, val3, val4, val5) as
(
  select 2, 125, 256, 133, 400, 67 from dual union all
  select 3, 14,  14,  14,  3,   6  from dual union all
  select 4, 325, 441, 441, 975, 3  from dual
)

select id1 
     , greatest(val1, val2, val3, val4, val5) Res
  from t1 
```

结果：

```
Id1 Res 
---------------
2   400 
3   14 
4   975 
```

# php - 将数组存储到 Javascript 中

> ID：12799537
> 
> 赞同：0
> 
> 时间：2012-10-09T11:57:59.940
> 
> 标签：php, javascript, mysql, arrays

我在 MySql 数据库中存储了一个二维数组

```
[["c0"]["33925"],["c1"]["39280"],["c2"]["34079"],["c3"]["34091"],["c4"]["34108"]] 
```

我想将其转换为 javascript 数组。

我正在使用 php 页面来获取数组`xmlhttp.responseText`；

它得到了数组，但我不能用它做任何事情；

```
var layoutArray = new Array();   
layoutArray = xmlhttp.responseText;    
alert(layoutArray[0][0]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T11:59:36.083

尝试评估数组，因为你得到了一个字符串：

```
layoutArray = eval(xmlhttp.responseText); 
```

一般来说，`eval`如果您正在运行的数据`eval`来自您的用户，您应该避免使用。但是，如果只有您可以篡改此值，那么`eval`是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:16:54.287

如果您使用 PHP 脚本发回结果，并且“必须”将数据存储为数组而不是 JSON，我将只对数组进行[json_encode](http://www.php.net/manual/en/function.json-encode.php)并返回：

[工作示例](http://sandbox.onlinephpfunctions.com/code/a0cd737aeec75b663ab308f5f25bdae1f508b054)

```
$array = array("1" => "PHP code tester Sandbox Online",  
          "foo" => "bar", 5 , 5 => 89009, 
          "case" => "Random Stuff");

echo json_encode($array) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:11:47.780

我会将数组存储为像feeela 所说的JSON 字符串。

```
var layoutArray = {"c0":"33925","c1":"39280","c2":"34079","c3":"34091","c4":"34108"}

for (key in layoutArray){
     console.log(layoutArray[key])
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:12:35.897

只需`serialize`在将其放入数据库之前和`unserialize`提取时使用。您将拥有 json 结构，而无需在客户端使用 eval。

# javascript - Javascript XSS 预防

> ID：12799539
> 
> 赞同：12
> 
> 时间：2012-10-09T11:58:07.900
> 
> 标签：javascript, security, node.js, xss, sanitization

有一个清理数据的 Node.js 项目，还有一个用于 JavaScript 的 OWASP 库，用于处理清理以防止 XSS。

我一直在对这些库进行基准测试，它们非常密集，可能有点矫枉过正，我的应用程序不需要任何动态 HTML（由用户提交，bbtags 或其他任何东西，根本不需要）所以为什么不这样做：

1.  禁用“ `<`”和“ `>`”字符，不要替换它们或任何东西，只是禁用它们，如果用户提交这些，给他们一个警告，这些被禁用（客户端和服务器端验证）
2.  `&`=>`&amp;`
3.  `"`=>`&quot;`
4.  `'`=>`&#x27;`
5.  `/`=>`/`
6.  对提交的 URL 进行编码（GET 参数等）
7.  由于我的应用程序使用 HTML5 PushState 并且后端与前端完全分离，因此涵盖了基于 DOM 的 XSS。

这是否足以保护自己，正如我所说，我的应用程序不需要用户提交的任何 HTML，所以我根本不需要`<`and`>`标签。

感谢所有反馈，这是我现在使用的：

```
var pattern = /<(.*)>/;

function hasHtmlTags(string) {
    return pattern.test(string);
};

if (hasHtmlTags(userData)) {
    // Do something?
} else {
    // Create entity.
} 
```

所以用户仍然可以使用他们的表情符号 :< 等，并且只有在找到 < 和 > 的组合时才会触发该功能。所以没有昂贵的正则表达式之类的，只需禁用 < 和 > 组合就可以了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T12:02:42.743

这是一个通用的编码过程：

```
var lt = /</g, 
    gt = />/g, 
    ap = /'/g, 
    ic = /"/g;
value = value.toString().replace(lt, "&lt;").replace(gt, "&gt;").replace(ap, "&#39;").replace(ic, "&#34;"); 
```

如果您的用户没有向您的服务器提交任何内容，您甚至不需要上述内容。如果用户提交并且您正在使用用户输入，那么上述内容应该是安全的。只要 '<' 和 '>' 被全局清理并且括号也是你的好去处。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T12:10:58.350

为什么不在`encodeURIComponent`将数据发送到客户端之前使用？

```
var string="<script>...</script>";
string=encodeURIComponent(string); // %3Cscript%3E...%3C/script%3 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-11-08T12:54:16.777

考虑[https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html](https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html)

这是他们建议的实施：

```
function escapeOutput(toOutput){
    return toOutput.replace(/\&/g, '&amp;')
        .replace(/\</g, '&lt;')
        .replace(/\>/g, '&gt;')
        .replace(/\"/g, '&quot;')
        .replace(/\'/g, '&#x27')
        .replace(/\//g, '&#x2F');
} 
```

还要确保仅在必要时使用此功能，否则可能会破坏某些东西。

但我建议你看看已经制作的用于净化输出的库：

[https://github.com/ecto/bleach](https://github.com/ecto/bleach)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-20T12:55:38.157

您可以使用类似的功能

```
 function htmlEncode(str){
  return String(str).replace(/[^\w. ]/gi, function(c){
     return '&#'+c.charCodeAt(0)+';';
  });
} 
```

然后，您将按如下方式使用此函数：

```
<script>document.body.innerHTML = htmlEncode(untrustedValue)</script> 
```

如果您的输入在 JavaScript 字符串中，则需要一个执行 Unicode 转义的编码器。这是一个示例 Unicode 编码器：

```
function jsEscape(str){
  return String(str).replace(/[^\w. ]/gi, function(c){
     return '\\u'+('0000'+c.charCodeAt(0).toString(16)).slice(-4);
  });

} 
```

然后，您将按如下方式使用此函数：

```
<script>document.write('<script>x="'+jsEscape(untrustedValue)+'";<\/script>')</script> 
```

更多信息：[https ://portswigger.net/web-security/cross-site-scripting/preventing](https://portswigger.net/web-security/cross-site-scripting/preventing)

# c# - 为什么实体框架会生成缓慢的过度设计的 SQL？

> ID：12799544
> 
> 赞同：3
> 
> 时间：2012-10-09T11:58:20.833
> 
> 标签：c#, .net, sql, entity-framework, linq-to-entities

我有这个代码：

```
DbSet<TableName> table = ...// stored reference

var items = from n in table where
            n.Name.ToUpper().Contains(searchString.ToUpper().Trim())
            select n;
WriteToLog( items.ToString() ); 
```

最后一行输出生成的 SQL。这是我得到的：

```
SELECT 
    [Extent1].[Name] AS [Name],
    // all the other columns follow
FROM (SELECT 
  [TableName].[Name] AS [Name],
  // all the other columns follow
FROM [dbo].[TableName] AS [TableName]) AS [Extent1]
WHERE ( CAST(CHARINDEX(LTRIM(RTRIM(UPPER(@p__linq__0))), UPPER([Extent1].[Name])) AS int)) > 0 
```

你看，有`SELECT`-from-`SELECT`虽然它完全是多余的 - 一个`SELECT`就足够了。尽管表相当小，但使用 EF 的代码运行时间超过半分钟并在该查询上超时。

为什么会生成这个过度设计的 SQL 查询，如何让 EF 生成更好的查询？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T12:04:32.480

它通过转换表达式树来生成结果 SQL。作为完成该转换的方式的副作用，它似乎过度设计（例如，使用子查询）。转换的细节是专有的和复杂的，结果不应该是人类可读的。

这个问题并不完全清楚 - 你正在尝试解决一个我认为可能不是问题的问题。尝试将生成的查询与您自己的查询进行比较 - 我猜查询优化器会缩短如此简单的优化工作。

我的猜测（这可能是你可以在这里得到的最好的答案，除非出现 LINQ to Entities MS 开发人员）是他们正在这样做：生成最有效的查询，但留下了令人头疼的困难工作将查询优化到他们已经投入了数百或数千个工作日的位置：SQL Server 中的查询优化器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T12:52:25.547

它做了额外的事情，`Select`但 Selects 没有相关的成本。您可以看到估计的查询计划，它会显示其中`0%`的成本。这样做是因为 EF 与各种 RDBMS 系统（如 Oracle、SQL 服务器）兼容，并且为了确保最大的兼容性，它可能会这样做。

但是我确实同意实体框架生成 UGLY sql。您提供的示例是一个非常简单的 Linq 查询，当您的查询开始变得复杂时，您会看到更多的丑陋。

**1）**虽然这可能会或可能不会回答您的答案，但我会说使用像 PetaPoco 这样的微型 ORM：

[https://github.com/toptensoftware/PetaPoco](https://github.com/toptensoftware/PetaPoco)

或 Dapper.Net

[https://github.com/SamSaffron/dapper-dot-net](https://github.com/SamSaffron/dapper-dot-net)

我一直在我的一个项目中使用它，我对使用普通 Ado.Net 获得的原始速度完全满意。

**2）**我的第二个建议是总是对*至少* `Select`语句使用存储过程。对于插入、更新和删除，您可能应该使用 EF 并利用更改跟踪机制，这样可以节省您编写繁琐查询的时间，但至少对于 Select 语句，您应该尝试使用纯 SQL，这样您就可以更自由地了解 SQL 是什么生成。

# c# - 在另一台计算机上重用语音识别训练配置文件

> ID：12799547
> 
> 赞同：0
> 
> 时间：2012-10-09T11:58:49.873
> 
> 标签：c#, android, speech-recognition, voice-recognition

我在 Android 中开发语音到文本转换应用程序。基本思想是在android中录制语音并将录制的wav文件发送到服务器。

在服务器端，我创建了一个使用 Microsoft Speech Recognition API 的 C#-Service 应用程序。该服务从 Android 设备接收音频 wav 文件，将其转换为文本并将识别的文本发送回 Android 设备。

这很好用，因为我已经训练了很多次语音识别 API。

现在我的问题是：我可以在另一台计算机上使用已经训练过的语音识别配置文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:55:31.697

我不知道如何移动您的训练数据，但我有一些建议供您考虑。

Google 为 Android 提供语音识别，请参阅[http://android-developers.blogspot.com/2010/03/speech-input-api-for-android.html](http://android-developers.blogspot.com/2010/03/speech-input-api-for-android.html)

如果您使用 Microsoft Speech Platform 而不是 Windows 7 中的桌面识别器，则不需要培训（您也无法进行听写，但我不知道您是否需要）。请参阅[System.Speech.Recognition 和 Microsoft.Speech.Recognition 有什么区别？](https://stackoverflow.com/questions/2977338/what-is-the-difference-between-system-speech-recognition-and-microsoft-speech-re)了解更多信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-30T13:38:41.483

您可以使用以下网址提供的 microsoft 软件： [https ://www.microsoft.com/en-us/download/details.aspx?id=22358](https://www.microsoft.com/en-us/download/details.aspx?id=22358)

如果您需要以编程方式执行此操作，请参阅以[编程方式导入 MS Speech API 语音配置文件](https://stackoverflow.com/questions/9756695/programmatically-importing-ms-speech-api-speech-profile/34530586#34530586)

# visual-c++ - 如何在 VC++ WTL 中指定单个列表项的字体颜色

> ID：12799553
> 
> 赞同：1
> 
> 时间：2012-10-09T11:59:12.607
> 
> 标签：visual-c++, listbox, visual-studio-2005, wtl, dialogbasedapp

我有一个列表框`CListBox`，我需要根据某些条件在其中指定单个列表项的颜色。我怎样才能做到这一点。我正在运行 VS2005。该应用程序是一个基于 WTL 对话框的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:12:19.390

您可以创建自己的列表框（例如：CColorListBox）

**颜色列表框.h**

```
class CColorListBox : public CListBox
{
// Construction
public:
    CColorListBox();

// Attributes
public:

// Operations
public:

    int AddString( LPCTSTR lpszItem, COLORREF rgb);
    int InsertString( int nIndex, LPCTSTR lpszItem, COLORREF rgb);
// Overrides
    // ClassWizard generated virtual function overrides
    //{{AFX_VIRTUAL(CColorListBox)
    public:
    virtual void DrawItem(LPDRAWITEMSTRUCT lpDrawItemStruct);
    //}}AFX_VIRTUAL

// Implementation
public:
    virtual ~CColorListBox();

    // Generated message map functions
protected:
    //{{AFX_MSG(CColorListBox)
    //}}AFX_MSG

    DECLARE_MESSAGE_MAP()
}; 
```

**颜色列表框.cpp**

这是一个想法不确切的代码............

```
int CColorListBox::AddString( LPCTSTR lpszItem,COLORREF rgb )
{
    int item = AddString(lpszItem);
    if(item >=0)
        SetItemData(item,rgb);
    return item;
}

int CColorListBox::InsertString( int nIndex, LPCTSTR lpszItem, COLORREF rgb)
{
    int item = ((CListBox*)this)->InsertString(nIndex,lpszItem);
    if(item >=0)
        SetItemData(item,rgb);
    return item;

}

void CColorListBox::DrawItem(LPDRAWITEMSTRUCT lpdis) 
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:31:26.713

这就是我在`ListViewCtrl`.

我写了一个类来扩展`CListViewCtrl`.

```
class CListViewCtrlEx: public  CWindowImpl<CListViewCtrlEx, CListViewCtrl>, public CCustomDraw<CListViewCtrlEx> 
{
public:
 BEGIN_MSG_MAP(CListViewCtrlEx)
  MESSAGE_HANDLER(WM_ERASEBKGND, OnEraseBkgnd)  
  CHAIN_MSG_MAP_ALT(CCustomDraw<CListViewCtrlEx>, 1)
  DEFAULT_REFLECTION_HANDLER()
 END_MSG_MAP()

 LRESULT OnEraseBkgnd(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL  bHandled);
 DWORD OnPrePaint(int /*idCtrl*/, LPNMCUSTOMDRAW lpNMCustomDraw);
 DWORD OnItemPrePaint(int /*idCtrl*/, LPNMCUSTOMDRAW lpNMCustomDraw);  
 void ForceMeasureItemMessage(); 
 void DeleteItem(LPDELETEITEMSTRUCT /*lpDeleteItemStruct*/);
 BOOL DeleteItem(int nItem); 
 void GetCellRect(int header_column, const CRect& item_rect, CRect& cell_rect); 
}; 
```

完整的代码在[这里](http://collaborativebloggers.blogspot.in/2012/10/to-make-listbox-in-wtl-display-colored.html)。

# bash - 如果 Bash 脚本找不到或无法读取文件，我该如何杀死它？

> ID：12799559
> 
> 赞同：0
> 
> 时间：2012-10-09T11:59:46.613
> 
> 标签：bash

我写了一个小 bash 程序，它需要读取一个名为`input`. 我希望脚本打印消息`file not found`并在找不到文件时退出或自行终止。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T12:02:39.357

在阅读之前，检查文件是否存在：

```
if [ ! -f input ]; then
  echo "File Not found"
  exit 1
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:16:52.220

### 使用 Bash 退出处理程序

您可以使用 Bash 的`set -e`选项自动处理大多数类似情况，并使用系统生成的（但通常是合理的）错误消息。例如：

```
$ set -e; ls /tmp/doesnt_exist
ls: cannot access /tmp/doesnt_exist: No such file or directory 
```

请注意，-e 选项还会导致当前 shell 在显示错误消息后立即以非零退出状态退出。这是获得您想要的东西的快速而肮脏的方式。

### 手动测试可读文件

如果您确实需要自定义消息，那么您想使用测试条件。例如，要确保文件存在*且可读*，您可以使用类似于以下内容的内容：

```
if [[ -r "/path/to/input" ]]; then
    : # do something with "input"
else
   # Send message to standard error.
   echo "file not found" > /dev/stderr

   # Exit with EX_DATAERR from sysexits.h.
   exit 65
fi 
```

### 也可以看看

有关`man 1 test`可能的测试条件的更完整列表，请参阅。

# php - 在谷歌地图中动态获取标记

> ID：12799566
> 
> 赞同：0
> 
> 时间：2012-10-09T11:59:59.017
> 
> 标签：php, google-maps

我在数据库中有一个谷歌地图地址列表，我希望如果我在列表中给出地址之一的纬度和经度。比所有标记都更接近这一点。标记应该来自我的数据库列表.

例如：如果我有 20 所学校的经纬度列表，并且我希望靠近学校 A 的所有学校的列表可能在 5 公里左右。所有地址都在地图中，这些地址都存储在我的数据库中，而不是其他学校也是谷歌地图上的别针。

**我有什么：我有一个脚本，如果我通过纬度和经度，它会给出更接近这一点的列表。但是地图中的图钉是由谷歌地图提供的，我希望图钉应该来自我的数据库.**

这是您可以在 Xampp、Wampp 等上尝试的脚本。

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Place Search</title>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=true&libraries=places"></script>

    <style>
      #map {
        height: 400px;
        width: 600px;
        border: 1px solid #333;
        margin-top: 0.6em;
      }
    </style>

    <script>
      var map;
      var infowindow;

      function initialize() {
        var pyrmont = new google.maps.LatLng(22.716498,75.86812);//here you can pass the latitude & longitude.

        map = new google.maps.Map(document.getElementById('map'), {
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: pyrmont,
          zoom: 15
        });

        var request = {
          location: pyrmont,
          radius: 500,
          types: ['store']
        };
        infowindow = new google.maps.InfoWindow();
        var service = new google.maps.places.PlacesService(map);
        service.search(request, callback);
      }

      function callback(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
          for (var i = 0; i < results.length; i++) {
            createMarker(results[i]);
          }
        }
      }

      function createMarker(place) {
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({
          map: map,
          position: place.geometry.location
        });

        google.maps.event.addListener(marker, 'click', function() {
          infowindow.setContent(place.name);
          infowindow.open(map, this);
        });
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map"></div>
    <div id="text">

  </body>
</html> 
```

**我想要：我希望列表应该来自我的数据库，并记住我从谷歌地图 API 获取数据库中的条目。所以我不需要创建它们已经是引脚地址的引脚。**

请建议我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:06:50.260

在单击/选择标记事件时，您可以将参数传递给“fetch_results”，即半径 20 米内的学校。

```
var $_METERS = 1000;  // to meters

$this->db->select('`your_school_table`.* CEILING((( acos( sin((' . $options['lat'] . ' * pi() / 180 )) *  sin(( `your_school_table`.`sc_latitude` * pi() / 180 )) + cos((' . $options['lat'] . ' * pi() / 180 )) * cos(( `your_school_table`.`sc_latitude` * pi() / 180 )) * cos(((' . $options['lng'] . ' -  `your_school_table`.`sc_longitude` ) * pi() / 180 )))) * 180 / pi() ) * 60 * 1.1515 * 1.609344 * ' . $this->_METERS . ' ) as distance'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:21:48.197

在这里我找到了答案：我只需要编写查询以从特定引脚（纬度，经度）检索记录。

```
SELECT * , ( 3959 * ACOS( COS( RADIANS( $lat ) ) * COS( RADIANS( lat ) ) * COS( RADIANS( lng ) - RADIANS( $lng ) ) + SIN( RADIANS( $lat ) ) * SIN( RADIANS( lat ) ) ) ) AS distance FROM users HAVING distance <25 
```

上述查询检索距离给定纬度和经度至少 25 公里的所有引脚。

# ruby-on-rails - 资源路由混淆

> ID：12799567
> 
> 赞同：1
> 
> 时间：2012-10-09T12:00:01.653
> 
> 标签：ruby-on-rails, devise

我的路线有一个谜团：

```
resources :organizations

root :to => 'users#index'

devise_for :users, :controllers => { :registrations => 'users/registration', :sessions => 'users/session', :confirmations => 'users/confirmation'} 
```

现在，如果我尝试达到`/organizations/1`它的工作原理。

如果我尝试`/organizations`或`/organizations/new`

对于这两种情况，我都会遇到相同的错误：`No route matches {:action=>"show", :controller=>"organizations"}`

我从未请求过哪条路径。顺便说一句，存在哪条路径。

有什么东西可以拦截路线并在rails（或设计）中进行一些隐藏的重定向吗？

**更新**

以下是路线：

```
 organizations GET    /organizations(.:format)              organizations#index
                     POST   /organizations(.:format)              organizations#create
    new_organization GET    /organizations/new(.:format)          organizations#new
   edit_organization GET    /organizations/:id/edit(.:format)     organizations#edit
        organization GET    /organizations/:id(.:format)          organizations#show
                     PUT    /organizations/:id(.:format)          organizations#update
                     DELETE /organizations/:id(.:format)          organizations#destroy
                root        /                                     users#index
    new_user_session GET    /users/sign_in(.:format)              users/session#new
        user_session POST   /users/sign_in(.:format)              users/session#create
destroy_user_session DELETE /users/sign_out(.:format)             users/session#destroy
       user_password POST   /users/password(.:format)             devise/passwords#create
   new_user_password GET    /users/password/new(.:format)         devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format)        devise/passwords#edit
                     PUT    /users/password(.:format)             devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)               users/registration#cancel
       user_registration POST   /users(.:format)                      users/registration#create
   new_user_registration GET    /users/sign_up(.:format)              users/registration#new
  edit_user_registration GET    /users/edit(.:format)                 users/registration#edit
                         PUT    /users(.:format)                      users/registration#update
                         DELETE /users(.:format)                      users/registration#destroy
       user_confirmation POST   /users/confirmation(.:format)         users/confirmation#create
   new_user_confirmation GET    /users/confirmation/new(.:format)     users/confirmation#new
                         GET    /users/confirmation(.:format)         users/confirmation#show
             user_unlock POST   /users/unlock(.:format)               devise/unlocks#create
         new_user_unlock GET    /users/unlock/new(.:format)           devise/unlocks#new
                         GET    /users/unlock(.:format)               devise/unlocks#show 
```

**更新**

下面是 OrganizationsController 和 ApplicationController：

```
class OrganizationsController < ApplicationController
  before_filter :authenticate_user!

  def index
    new
    render 'organizations/new'
  end

  def new
    @organization = Organization.new
  end
end 
```

和

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  def after_sign_in_path_for(resource)
    accounts_path
  end

  rescue_from CanCan::AccessDenied do |exception|
    flash[:error] = exception.message
    redirect_to :back
  end
end 
```

**更新**

这是该组织的 new.html.erb 视图

```
<%= semantic_form_for @organization, :url => organization_path do |f| %>

    <%= f.inputs do %>
        <%=  f.input :country %>
        <%=  f.input :type, :as => :select, :label => t(:g_type), :collection =>     [[t(:g_company),"Company"],[t(:g_person),"Person"]] %>
    <% end %>
    <%= f.actions %>
<% end %> 
```

**更新**

我还检查了路线是否定义明确，它们似乎是：

```
>> r = Rails.application.routes
#<ActionDispatch::Routing::RouteSet:0x3dbea00>
>> r.recognize_path("/organizations/new")
{:action=>"new", :controller=>"organizations"}
>> r.recognize_path("/organizations/1")
{:action=>"show", :controller=>"organizations", :id=>"1"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:27:43.480

在您的“organisations/new.html.erb”标准中，创建了一个指向`organisation_path(@organisation)`. 而那个不存在，因为你没有组织的表演。

更新：如果使用了路径助手，则错误指向那里，但`link_to "Back", @organisation`可能已使用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:15:42.453

您已将索引定义为

```
def index
  new 
  render 'organizations/new' 
end 
```

如果您不指定要呈现的文件名，则呈现带有 method_name 的文件。因为你已经指定了**组织/新**的，我想你想显示新组织的表格你想重定向到新的组织表格吗？如果是，则添加

```
redirect_to new_organization_path and return 
```

如果您想显示组织列表并在同一页面上接受新的组织数据，您可以这样做

```
def new
  @organizations = Organization.all
  @organization = Organization.new
end 
```

并以你的新形式

```
= form_for(@organization, :url => organizations_path, :method => :post) do |f| 
```

它应该是**organzations_path**

# jquery - 更新 jquery ui 范围滑块值

> ID：12799570
> 
> 赞同：1
> 
> 时间：2012-10-09T12:00:08.843
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

我想用两个文本框中的值更新一个 jquery ui 范围滑块。

```
var minVal = $(this).find('.minTextBox').val();                  
var minVal2 = parseInt(minVal);
var maxVal = $(this).find('.maxTextBox').val();
var maxVal2 = parseInt(maxVal);
var myvalues = [minVal2, maxVal2];

var mySliderId = $(this).find('.RangeSlider').attr('id');

$( "#" + mySliderId).slider({
    range: true,
    values: myvalues,
    slide: function( event, ui ) {
        var idx = $(this).attr("id");
        x = idx.substr(idx.length-2);
        $( "#ctl00_ContentPlaceHolder1_Min"  + x ).val(ui.values[0]);
        $( "#ctl00_ContentPlaceHolder1_Max"  + x ).val(ui.values[1]);
    }
}); 
```

我正在尝试将 myvalues 数组传递给滑块以覆盖旧值。

无论我尝试什么，我都无法让它工作。我已经查看了关于 SO 和文档的各种其他问题，但我无法再接近了。

我对此是否正确？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-01T20:50:14.647

您无需再次初始化。执行以下行以修改范围值。

```
$( "#" + mySliderId).slider( "option", "values", myvalues ); 
```

# java - 通过 JGit 添加远程

> ID：12799573
> 
> 赞同：19
> 
> 时间：2012-10-09T12:00:28.813
> 
> 标签：java, git, jgit

我在玩 JGit，我可以成功地从某个存储库（`git remote rm origin`）中删除一个遥控器，我该怎么做`git remote add origin http://github.com/user/repo`？

要删除，我执行以下操作：

```
StoredConfig config = git.getRepository().getConfig();
config.unsetSection("remote", "origin");
config.save(); 
```

但是没有像`#setSection(String, String)`.

提前致谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-09T13:37:27.290

管理它以这种方式工作：

```
Git git = new Git(localRepository);
StoredConfig config = git.getRepository().getConfig();
config.setString("remote", "origin", "url", "http://github.com/user/repo");
config.save(); 
```

显然它就像一个老板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-27T06:51:42.023

有一些类可以添加新的类：

```
 RemoteAddCommand remoteAddCommand = git.remoteAdd();
    remoteAddCommand.setName("origin");
    remoteAddCommand.setUri(new URIish("http://github.com/user/repo"));
    remoteAddCommand.call(); 
```

也有一个`RemoteSetUrlCommand`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-15T05:21:02.013

[您可以使用git24j](https://github.com/git24j)直接操作远程对象

```
Repository repo = Repository.open("your-repository");
Remote upstream = Remote.create(repo, "upstream", URI.create("http://github.com/user/repo")); 
```

当然，您也可以通过 git-config API 做同样的事情：

```
Config cfg = Config.openOndisk("my-git.config");
cfg.setString("remote.url", "http://github.com/user/repo"); 
```

# javascript - 通过拖动调用 HTML5 输入

> ID：12799577
> 
> 赞同：1
> 
> 时间：2012-10-09T12:00:53.823
> 
> 标签：javascript, html

我正在使用 HTML5 输入来选择日期。

如果用户单击特定图像，我只想打开该输入，但我不能强制移动浏览器打开他们的日期选择器。

这是元素：

```
<input type="date" class="dateInput" name="day" id="day"> 
```

简单的问题：如何用 javascript 打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:05:34.017

HTML5 日期选择器在用户关注表单元素时打开。如果您单击/触摸图像，这与获得焦点不同。

但是您可以通过在图像单击上触发焦点事件来模拟这种行为：

```
jQuery( '#date-input-image-1' ).click( function() {
    jQuery( '#date-input-1' ).focus();
} ) 
```

# c# - 禁用窗口窗体时如何在控件上创建波形？

> ID：12799585
> 
> 赞同：1
> 
> 时间：2012-10-09T12:01:07.090
> 
> 标签：c#, winforms

我正在控件上创建实时波形，这样当创建波形时，它会不断向左移动。在创建波形时，我在我的控件前面带来一个窗口，比如Skype 窗口，这样已经创建的波形的一半位于该窗口的后面。现在，当在录制打开时创建波形时，Skype 窗口后面的部分变为白色，颜色为控制背景。而这个白色的补丁不断向左移动。

当我最小化 Skype 窗口时，波形会像以前一样恢复，并按应有的方式创建。

当控件被禁用或最小化的窗体时如何赎回我的波形？

# android - 如何强制使用溢出菜单而不是本机菜单？

> ID：12799590
> 
> 赞同：3
> 
> 时间：2012-10-09T12:01:17.997
> 
> 标签：android, android-actionbar, actionbarsherlock

我刚刚切换到 ActionBarSherlock 4.2.0。升级后我的 Android 2.3.4 溢出菜单被删除。而是使用本机菜单。

我该如何解决这个问题并强制 ActionBarSherlock 使用溢出菜单？

运行 Android ICS 的 Galaxy S3 也报告了同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:41:00.767

ForceOverFlow 样式已从 4.2 中删除。杰克在他的一篇 G+ 帖子中评论了他为什么将其删除。有人问他是否有理由删除 ForceOverflow 样式，他回答：

“是的。他们本来就不应该出现在那里，而且他们在 API 级别之间造成了不一致。具有硬件菜单键的 ICS 设备不会显示溢出，所以 ICS 之前的设备也不应该显示溢出。”

他还继续说“ActionBarSherlock 的目标是跨 API 级别的一致性。这也是我们无法修复 ICS+ 操作栏中出现的一些基本错误的原因。”

对于完整的线程结帐[https://plus.google.com/u/0/108284392618554783657/posts/L7nsqBiAtsk](https://plus.google.com/u/0/108284392618554783657/posts/L7nsqBiAtsk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:50:22.383

你可以使用我的 ActionBarSherlock 库，我也想要这个功能，所以我手动添加了它。它的版本是 4.2。[https://github.com/ajws7036/abs42-forceoverflow](https://github.com/ajws7036/abs42-forceoverflow)

# ruby-on-rails - 如何在 <%= form_for create 的操作中正确调用参数

> ID：12799591
> 
> 赞同：0
> 
> 时间：2012-10-09T12:01:23.197
> 
> 标签：ruby-on-rails, ruby, twilio

我正在构建一个呼叫跟踪应用程序，以学习 rails 和 twilio。现在，我有一个表单，当它被提交时，将 twilio 电话号码与其他参数一起记录到数据库中，然后购买电话号码。

我有这个功能有点回来，但我改变了一些东西，破坏了我在创建操作中调用参数的能力。

现在，当我运行代码时，我得到了错误：

```
Twilio::REST::RequestError in PhonesController#create

Missing PhoneNumber parameter. Please specify the phone number that you would like to purchase 
```

这是我提交的表格：

```
 <% @numbers.each do |number| %>

            <%= form_for(@phone) do |f| %>
                <%= f.hidden_field :original_number, :value => params[:original_number] %>

                <%= f.hidden_field :name, :value => params[:name] %>
                <%= f.hidden_field :twilio_number,  :value => number.phone_number %>

                <div class="found_list">
                    <div class="found_phone_number">
                        <%= f.label :twilio_number, number.friendly_name %>
                    </div>
                    <div class="choose_found_number">
                    <%= f.submit "Choose This Number", :class => "btn btn-large btn-success" %>
                    </div>
                </div>
                    <hr>
            <% end %>
    <% end %> 
```

这是我点击提交时调试器告诉我的内容：

```
Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"/qJ6qATbNH2pZwxDPcKGifktWtAA5WrShbqb/2+lBbE=",
 "phone"=>{"original_number"=>"6463978797",
 "name"=>"Website",
 "twilio_number"=>"+16464900447"},
 "commit"=>"Choose This Number"} 
```

这是我的创建动作

```
 def create
    @user = current_user
    @phone = @user.phones.build(params[:phone])
    client = Twilio::REST::Client.new(@user.twilio_account_sid, @user.twilio_auth_token)
    number = client.account.incoming_phone_numbers.create({:phone_number => params[:twilio_number]})
   if @phone.save && number.true
      flash[:success] = "Phone Number Created!"
      redirect_to user_path
    else
      render new_phone_path
      flash[:error] = "It looks like there were errors with the submission"
    end
  end 
```

**如果我编辑操作并将 params[:twilio_number] 替换为“+16464900447”，则它可以工作。**

感谢您坚持到这一步！您对我如何正确调用控制器中的 twilio_number 参数有什么想法吗？或者，您认为还有其他问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:21:36.283

我认为您的问题来自参数哈希的错误格式，实际上是

```
{
 "utf8"=>"✓",
 "authenticity_token"=>"/qJ6qATbNH2pZwxDPcKGifktWtAA5WrShbqb/2+lBbE=",
 "phone"=>{
   "original_number"=>"6463978797",
   "name"=>"Website",
   "twilio_number"=>"+16464900447"
 },
 "commit"=>"Choose This Number"
} 
```

所以你可以看到`params[:twilio_number]`不存在，存在的是`params[:phone][:twilio_number]`

但是当然，您的解决方案就像您正在做的那样工作

```
@phone = @user.phones.build(params[:phone]) 
```

您正在创建一个以 params[:phone] 为`:twilio_number`键的电话实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:17:30.090

我尝试了@phone.twilio_number，而不是 params[:twilio_number]，它似乎奏效了！

# iphone - iOS6 中不推荐使用 ADBannerContentSizeIdentifierPortrait？

> ID：12799593
> 
> 赞同：2
> 
> 时间：2012-10-09T12:01:30.573
> 
> 标签：iphone, ios, iad

![代码截图](../Images/b5d8842175528fbf2273221dafab090c.png)

所以 ADBannerContentSizeIdentifierPortrait/Landscape 在 iOS6 中已经被弃用了。在google上搜索后没有太多内容。我想这太新了。我的意思是，我认为我仍然可以运行该应用程序，只是想知道是否有人知道苹果在这方面的真正目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:47:12.437

iOS6 对自动调整大小功能进行了几项新更新。Apple 不再希望开发人员使用`ADBannerContentSizeIdentifierPortrait`和`ADBannerContentSizeIdentifierLandscape`技术，而是使用 iOS6 的自动调整大小功能。

同样，`setCurrentContentSizeIdentifier`and`setRequiredContentSizeIdentifiers`也已弃用。

前几天我发现的关于在 iOS6 中自动调整大小的一个很好的教程可以在[这里找到](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2/)

# deployment - 部署后成员资格提供程序在服务器上不起作用

> ID：12799594
> 
> 赞同：3
> 
> 时间：2012-10-09T12:01:32.290
> 
> 标签：deployment, membership, provider

刚刚将我的 mvc 应用程序部署到服务器上，我在服务器上运行了 4 个服务，并连接到数据库 - 工作正常。当我尝试登录时（使用 Membership.ValidateUser 我总是得到错误，尝试注册用户也是如此（不起作用）。在数据库中我有 ApplicationName =“/”。我的相关配置是：

```
<membership>
    <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" 
             type="System.Web.Security.SqlMembershipProvider" 
             connectionStringName="LargainDb" 
             enablePasswordRetrieval="false" `enter `enter code here`code here`
             enablePasswordReset="true" 
             requiresQuestionAndAnswer="false" 
             requiresUniqueEmail="false" 
             maxInvalidPasswordAttempts="5" 
             minRequiredPasswordLength="6" 
             minRequiredNonalphanumericCharacters="0" 
             passwordAttemptWindow="10" 
             applicationName="/" />
    </providers>
</membership>
<profile>
    <providers>
        <clear />
        <add name="AspNetSqlProfileProvider" 
             type="System.Web.Profile.SqlProfileProvider" 
             connectionStringName="LargainDb" 
             applicationName="/" />
     </providers>
</profile>
<roleManager enabled="true">
    <providers>
        <clear />
        <add connectionStringName="LargainDb" 
             applicationName="/" 
             name="AspNetSqlRoleProvider" 
             type="System.Web.Security.SqlRoleProvider" />
             <add applicationName="/" 
                  name="AspNetWindowsTokenRoleProvider" 
                  type="System.Web.Security.WindowsTokenRoleProvider" />
    </providers>
</roleManager> 
```

我几乎尝试了所有方法，没有任何效果。视觉工作室一切正常。任何人都可以帮忙吗？我很绝望。

# javascript - Javascript 媒体播放器无法在 Android 上运行（在浏览器和 iOS 上运行）

> ID：12799597
> 
> 赞同：1
> 
> 时间：2012-10-09T12:01:35.397
> 
> 标签：javascript, android, media-player

我正在创建一个使用 JS 音频播放器播放音频的应用程序。这个想法是使用 Phonegap 并将其部署在多个平台上。它在 iOS、Firefox（使用 .ogg 时）和 Chrome 上运行良好。当我尝试使用 Android 模拟器运行它时，它没有运行。当我使用网站 URL 而不是本地保存的 ogg 文件时，它会发生这种情况。因此，我认为这很简单，虽然有点过头了！

[这](http://jsfiddle.net/barney278/DVqj4/)是索引文件和JS脚本。

不知道如何在网站上加载文件，但我相信你能明白。ogg 文件位于我电脑上 Android 项目的 assets 文件夹中。

这是来自eclipse的日志：

10-09 12:38:26.140: E/MediaPlayer(876): 错误 (-38,0) 10-09 12:38:26.370: D/CordovaLog(876): Uncaught TypeError: 无法调用未定义的“确认”方法10-09 12:38:26.370：D/CordovaLog(876)：file:///android_asset/www/scripts/html5audio.js：第 75 行：未捕获的类型错误：无法调用未定义 10-09 12 的方法“确认”： 38：26.370：E/Web 控制台（876）：未捕获的类型错误：无法在 file:///android_asset/www/scripts/html5audio.js:75 10-09 12:38:26.440 处调用未定义的方法“确认”：E /MediaPlayer(876): 错误 (1, -2147483648) 10-09 12:38:26.500: E/MediaPlayer(876): 错误 (1,-2147483648)

这是似乎导致问题的 JS 位，第 75 行突出显示：

```
// navigator.notification.alert('Streaming failed. Possibly due to a network error.', null, 'Stream error', 'OK');
***LINE 75***navigator.notification.confirm(
            'Streaming failed. Possibly due to a network error.', // message
            onConfirmRetry, // callback to invoke with index of button pressed
            'Stream error', // title
            'Retry,OK'      // buttonLabels 
```

# matlab - 如何使用多个参数在 Matlab 中执行“查找”？

> ID：12799603
> 
> 赞同：4
> 
> 时间：2012-10-09T12:02:25.430
> 
> 标签：matlab

我正在寻找一种“矢量化”以下代码的方法。也就是说，我想摆脱需要很长时间的 for 循环（这个 for 循环嵌套在另一个重复超过 40,000 次的 for 循环中）。

```
for k=1:length
    if coords(k,1)<=4 && coords(k,2) <=8
        upperLeft(countUL,:) = coords(k,:);
        countUL=countUL+1;
    end
    if coords(k,1)>4 && coords(k,2) <=8
        upperRight(countUR,:) = coords(k,:);
        countUR=countUR+1;
    end
    if coords(k,1)>4 && coords(k,2) >8
        lowerRight(countLR,:) = coords(k,:);
        countLR=countLR+1;
    end
    if coords(k,1)<=4 && coords(k,2) >8
        lowerLeft(countLL,:) = coords(k,:);
        countLL=countLL+1;
    end
end 
```

起初我尝试使用 Matlab`find`函数（例如`find(coords(k,1)<=4)`），但在我的情况下，我有两个参数需要“查找”。我尝试了类似的东西`find(coords(:,1)<=4 && coords(:,2)<=8)`，但是由于 的操作数`&&`不是标量，所以这不起作用。任何关于如何做到这一点的想法将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T12:06:50.663

`&&``||`正如您所注意到的，仅适用于标量比较。`&`不过，也`|`可以研究向量。请注意，您甚至不需要`find`：

```
idxUL = coords(:,1) <= 4 & coords(:,2) <=8;
idxUR = coords(:,1) > 4 & coords(:,2) <=8;

upperLeft = coords(idxUL,:);
upperRight = coords(idxUR,:); %# etc 
```

# asp.net - 模态弹出窗口在 UpdatePanel 内的 gridview 按钮上不起作用

> ID：12799613
> 
> 赞同：0
> 
> 时间：2012-10-09T12:03:04.493
> 
> 标签：asp.net, ajax, updatepanel, modalpopupextender

我在 UpdatePanel 中有一个 gridview。gridview 中的一列是链接，单击时应显示模式。问题是模式只在单击链接时显示一次，下次单击链接时它只会刷新页面。每次单击 gridview 内的链接时，都应显示模态框。

[此链接](https://stackoverflow.com/questions/9102246/modal-popup-not-working-inside-updatepanel)中给出的解决方案适用于 jQuery。我没有使用 jQuery。

请帮我解决这个问题。

**令人惊讶的是，这个问题在 IE7 上不会发生。它发生在 IE9 和 Google Chrome 上。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:31:29.973

模态扩展器的 DropShadow 属性引起了问题。我不确定是否有人注意到它。但是在我的情况下，它设置为true。我只是将它设置为 false，现在在 IE7、IE9 和 Chrome 下一切正常。虽然没有测试过 FireFox，但它应该可以工作。

# android - Android NSD 未发现所有服务

> ID：12799615
> 
> 赞同：31
> 
> 时间：2012-10-09T12:03:40.497
> 
> 标签：android, zeroconf, service-discovery, wifi-direct

我正在尝试使用 Android Native Service Discovery 运行应用程序，但有时当我运行应用程序时，它不会从我的网络中发现所有服务。我正在使用四个星系联结从[https://github.com/joeluchoa/nsd](https://github.com/joeluchoa/nsd)运行代码，并且大多数情况下，他们每个人都同时发现不同数量的服务。

基本上我使用 ServerSocket 运行服务：

```
ServerSocket server = new ServerSocket(0);
Log.i(TAG, "IP " + server.getInetAddress()
        + ", running on port " + server.getLocalPort());

Intent intent = new Intent(MySocket.this,
        MyPresence.class);
intent.putExtra("PORT", server.getLocalPort());
startService(intent); 
```

然后我使用 NsdManager 中的 registerService 方法发布它：

```
NsdServiceInfo serviceInfo = new NsdServiceInfo();

serviceInfo.setServiceName(Build.SERIAL + "-" + new Date().getTime());
serviceInfo.setServiceType(SERVICE_TYPE);
serviceInfo.setPort(port);

mNsdManager.registerService(serviceInfo, NsdManager.PROTOCOL_DNS_SD,
        mRegistrationListener); 
```

为了发现服务，我使用 NsdManager 中的 discoverServices 方法：

```
mNsdManager.discoverServices(SERVICE_TYPE, NsdManager.PROTOCOL_DNS_SD,
        mDiscoveryListener); 
```

使用 mDiscoveryListener 如下：

```
mDiscoveryListener = new NsdManager.DiscoveryListener() {

    @Override
    public void onDiscoveryStarted(String regType) {
        Log.d(TAG, "Service discovery started");
    }

    @Override
    public void onServiceFound(NsdServiceInfo service) {
        Log.d(TAG, "Service discovery success");
        Log.d(TAG, String.format("%s %s %s %d",
                service.getServiceName(), service.getServiceType(),
                service.getHost(), service.getPort()));
        if (!service.getServiceType().contains(SERVICE_TYPE)) {
            Log.d(TAG,
                    "Unknown Service Type: " + service.getServiceType());
        } else if (service.getServiceName().equals(mServiceName)) {
            Log.d(TAG, "Same machine: " + mServiceName);
        } else {
            mNsdManager.resolveService(service, mResolveListener);
        }
    }

    @Override
    public void onServiceLost(NsdServiceInfo service) {
        Log.e(TAG, "service lost" + service);
    }

    @Override
    public void onDiscoveryStopped(String serviceType) {
        Log.i(TAG, serviceType + " Discovery stopped: " + serviceType);
    }

    @Override
    public void onStartDiscoveryFailed(String serviceType, int errorCode) {
        Log.e(TAG, serviceType + " Discovery failed: Error code:"
                + errorCode);
        mNsdManager.stopServiceDiscovery(this);
    }

    @Override
    public void onStopDiscoveryFailed(String serviceType, int errorCode) {
        Log.e(TAG, serviceType + " Discovery failed: Error code:"
                + errorCode);
        mNsdManager.stopServiceDiscovery(this);
    }
}; 
```

难道我做错了什么？有人知道解决方案或解决方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-12-05T10:56:08.737

要发现连接网络的所有服务，只需更改您发现的服务类型，

```
public static final String SERVICE_TYPE = "_services._dns-sd._udp"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-31T05:40:06.267

答案可能有点晚了，但我在他们的开发者网站上找到了一个很好的 NSD for android give 解决方案。我做了一些修改，它工作得很好。

```
public class NsdClient {
private Context mContext;

private NsdManager mNsdManager;
NsdManager.DiscoveryListener mDiscoveryListener;

//To find all the available networks SERVICE_TYPE = "_services._dns-sd._udp"
public static final String SERVICE_TYPE = "_hap._tcp.";
public static final String TAG = "NsdClient";

private static ArrayList<NsdServiceInfo> ServicesAvailable = new ArrayList<>();

public NsdClient(Context context) {
    mContext = context;
    mNsdManager = (NsdManager) context.getSystemService(Context.NSD_SERVICE);
}

public void initializeNsd() {
    initializeDiscoveryListener();
}

public void initializeDiscoveryListener() {
    mDiscoveryListener = new NsdManager.DiscoveryListener() {

        @Override
        public void onDiscoveryStarted(String regType) {
            Log.d(TAG, "Service discovery started " + regType);
        }

        @Override
        public void onServiceFound(NsdServiceInfo service) {
            Log.d(TAG, "Service discovery success " + service);
            AVAILABLE_NETWORKS.add(service);

            if (!service.getServiceType().equals(SERVICE_TYPE)) {
                Log.d(TAG, "Unknown Service Type: " + service.getServiceType());
            } else if (service.getServiceName().equals(mServiceName)) {
                Log.d(TAG, "Same Machine: " + mServiceName);
            } else if (service.getServiceName().contains(mServiceName)) {
                Log.d(TAG, "Resolving Services: " + service);
                mNsdManager.resolveService(service, new initializeResolveListener());
            }
        }

        @Override
        public void onServiceLost(NsdServiceInfo service) {
            Log.e(TAG, "service lost" + service);
            if (ServicesAvailable.equals(service)) {
                ServicesAvailable = null;
            }
        }

        @Override
        public void onDiscoveryStopped(String serviceType) {
            Log.i(TAG, "Discovery stopped: " + serviceType);
        }

        @Override
        public void onStartDiscoveryFailed(String serviceType, int errorCode) {
            Log.e(TAG, "Discovery failed: Error code:" + errorCode);
            mNsdManager.stopServiceDiscovery(this);
        }

        @Override
        public void onStopDiscoveryFailed(String serviceType, int errorCode) {
            Log.e(TAG, "Discovery failed: Error code:" + errorCode);
            mNsdManager.stopServiceDiscovery(this);
        }
    };
}

public class initializeResolveListener implements NsdManager.ResolveListener {

    @Override
    public void onResolveFailed(NsdServiceInfo serviceInfo, int errorCode) {
        Log.e(TAG, "Resolve failed " + errorCode);
        switch (errorCode) {
            case NsdManager.FAILURE_ALREADY_ACTIVE:
                Log.e(TAG, "FAILURE ALREADY ACTIVE");
                mNsdManager.resolveService(serviceInfo, new initializeResolveListener());
                break;
            case NsdManager.FAILURE_INTERNAL_ERROR:
                Log.e(TAG, "FAILURE_INTERNAL_ERROR");
                break;
            case NsdManager.FAILURE_MAX_LIMIT:
                Log.e(TAG, "FAILURE_MAX_LIMIT");
                break;
        }
    }

    @Override
    public void onServiceResolved(NsdServiceInfo serviceInfo) {
        Log.e(TAG, "Resolve Succeeded. " + serviceInfo);

        if (serviceInfo.getServiceName().equals(mServiceName)) {
            Log.d(TAG, "Same IP.");
            return;
        }

    }
}

public void stopDiscovery() {
    mNsdManager.stopServiceDiscovery(mDiscoveryListener);
}

public List<NsdServiceInfo> getChosenServiceInfo() {
    return ServicesAvailable;
}

public void discoverServices() {
    mNsdManager.discoverServices(
            SERVICE_TYPE, NsdManager.PROTOCOL_DNS_SD, mDiscoveryListener);
}
} 
```

希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-27T15:50:22.343

恐怕实现中仍然存在导致它错过服务的错误。我已经用多个 Android 设备和 MacBook 进行了几天的测试，但它并不是一直都有效。我在 Android 错误跟踪器中的错误报告中记录了我的发现： [https ://code.google.com/p/android/issues/detail?id=178080](https://code.google.com/p/android/issues/detail?id=178080)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-02T10:57:36.437

我倾向于认为 Android 中的整个 NSD 实现一定有点不稳定。我还有一个简单的 Activity 只是为了演示生命周期（没有打开 Sockets），有时它可以工作，有时它不工作。我只是不明白。如果有人有一些见解，这里是活动：

[https://github.com/mholzel/Dump/blob/master/NetworkServiceDiscoveryViaWifi.java](https://github.com/mholzel/Dump/blob/master/NetworkServiceDiscoveryViaWifi.java)

另一方面，基于 Wifi Direct 的 NSD 对我来说似乎非常可靠：

[https://github.com/mholzel/Dump/blob/master/NetworkServiceDiscoveryViaWifiDirect.java](https://github.com/mholzel/Dump/blob/master/NetworkServiceDiscoveryViaWifiDirect.java)

请注意，这些活动都没有任何资源，因此只需将活动添加到具有适当权限的清单中即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-08T15:18:17.107

我有同样的问题，重新安装有帮助。尝试使用:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-23T00:16:05.343

我看到了与未发现设备相同的问题，并且能够通过在发现服务之前获取 WifiManager 多播锁定来修复它：

```
val multicastLock: WifiManager.MulticastLock = (mContext.getSystemService(Context.WIFI_SERVICE) as WifiManager).createMulticastLock(TAG)
multicastLock.setReferenceCounted(true)     
multicastLock.acquire()     
mNsdManager.discoverServices(SERVICE_TYPE, NsdManager.PROTOCOL_DNS_SD, mDiscoveryListener) 
```

然后在发现服务后释放锁：

```
mNsdManager.stopServiceDiscovery(mDiscoveryListener)     
multicastLock.release() 
```

# ruby-on-rails - 意外的 RSpec #should_receive 行为

> ID：12799617
> 
> 赞同：0
> 
> 时间：2012-10-09T12:03:43.207
> 
> 标签：ruby-on-rails, ruby, rspec, rspec-rails

我肯定错过了什么……但是什么！？

在我的规范中，我已经

```
User.should_receive(:find).with("1").and_return(@user) 
```

在我的控制器中

```
User.find(params[:id]) 
```

绿灯……正确……

但是如果我使用另一种方法更改我的控制器，例如首先：

```
User.first 
```

甚至

```
User.all 
```

我也得到了绿灯......我期待一个像这样的错误

```
expected: 1 time
received: 0 times 
```

谁能给我一个提示来理解这种行为？

非常感谢

编辑

在这里您可以找到有关此问题的更多信息：[https ://gist.github.com/3848429#file_user_controller_spec.rb](https://gist.github.com/3848429#file_user_controller_spec.rb)

编辑 2

我现在的规范，但我仍然需要检查方法是否调用每个#find ...

```
describe "GET #show" do
  before(:each) do
    @user = mock_model(User)
    should_authorize(:show, @user)
  end

  it "assigns the requested user to @user" do
    User.should_receive(:find).with("1").twice.and_return(@user)
    get :show, id: "1"
  end
  it "renders the :show template" do
    get :show, id: "1"
    response.should render_template :show
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:38:23.793

我不相信你需要两者`User.stub!(:find)...`，`User.should_receive(:find)...`因为 should_receive 基本上就像一个存根。我会删除第一个，看看是否会改变行为。

# c# - 如何在 WinRT 应用程序中获取实际语言？

> ID：12799619
> 
> 赞同：5
> 
> 时间：2012-10-09T12:03:50.357
> 
> 标签：c#, windows-8, windows-runtime

是否可以像在 Windows Phone 上一样获得操作系统的实际语言？我正在使用`CultureInfo.CurrentCulture.TwoLetterIsoString`，但我总是收到 en 而不是正确的语言，就`de`我而言。

那么如何在 WinRT 应用程序中获取实际语言呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-10T01:06:04.853

实际上有很多“有点错误”的答案。

*   `Windows.Globalization.Language.CurrentInputMethodLanguageTag`正如托马斯所指出的那样，并非在所有情况下都有效。它只返回显示用户键盘的语言。
*   您也可以使用`Windows.Globalization.ApplicationLanguages.Languages`，但它是用户语言偏好和应用程序支持的语言的组合。

对于最准确的用户偏好语言，您需要使用`Windows.System.UserProfile.GlobalizationPreferences.Languages[0]`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T12:13:08.513

您可以使用

```
Windows.Globalization.Language.CurrentInputMethodLanguageTag 
```

得到实际的语言。如果您使用的是 Windows 8 的德语版本，它会返回例如 de-DE。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T12:05:14.163

根据 MSDN，正确答案是：

```
Windows.System.UserProfile.GlobalizationPreferences.Languages[0] 
```

这应该是用户最喜欢的语言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T12:05:21.090

就目前我所记得的：

```
Windows.Globalization.ApplicationPreferences.PreferredLanguage 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-09T17:02:46.883

如果您创建 HTML5/javascript Windows 应用程序。你可以使用这个：

```
var language = window.navigator.userLanguage || window.navigator.language;
alert(language); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T05:07:20.943

```
String topUserLanguage = GlobalizationPreferences.Languages[0];
Windows.Globalization.Language userLanguage = new Windows.Globalization.Language(topUserLanguage);

if (userLanguage.Script.Equals("Arab") || userLanguage.Script.Equals("Hebr"))
{
....................
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-14T04:43:14.010

Windows 社区工具包现在为此提供了一个简单的 API：[https ://docs.microsoft.com/en-us/dotnet/api/microsoft.toolkit.uwp.helpers.systeminformation.culture?view=win-comm-toolkit- dotnet-stable#Microsoft_Toolkit_Uwp_Helpers_SystemInformation_Culture](https://docs.microsoft.com/en-us/dotnet/api/microsoft.toolkit.uwp.helpers.systeminformation.culture?view=win-comm-toolkit-dotnet-stable#Microsoft_Toolkit_Uwp_Helpers_SystemInformation_Culture)

用法：

```
using Microsoft.Toolkit.Uwp.Helpers;

var cultureInfo = SystemInformation.Instance.Culture; 
```

示例代码：[https ://github.com/windows-toolkit/WindowsCommunityToolkit/blob/c40264008e596b23e7342dd15fdb0e3f2551a699/Microsoft.Toolkit.Uwp.SampleApp/SamplePages/SystemInformation/SystemInformationPage.xaml.cs#L25](https://github.com/windows-toolkit/WindowsCommunityToolkit/blob/c40264008e596b23e7342dd15fdb0e3f2551a699/Microsoft.Toolkit.Uwp.SampleApp/SamplePages/SystemInformation/SystemInformationPage.xaml.cs#L25)

# database - 有 Dlookup 问题。代码不行吗？

> ID：12799634
> 
> 赞同：0
> 
> 时间：2012-10-09T12:04:49.977
> 
> 标签：database, vba, ms-access

基本上它说我缺少运营商？

```
Dim descpc As String

despc = DLookup("[Description]", "[products/stock]", "[Product Code] = " & Me.cmbSource.Value)
Me.Text47.Value = despc 
```

任何人都可以发现任何东西吗？我不是 100% 使用 Dlookup，所以任何帮助都会很棒！

谢谢，鲍勃·P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:17:16.193

您将 cmbSource 调暗为字符串，因此您需要将值括在单引号中以处理字符串。此外，如果产品代码是一个数字，那么当您尝试将字符串与整数进行比较时，您可能会收到错误消息。试试这个：

```
despc = DLookup("[Description]", "[products/stock]", "[Product Code] = '" & Me.cmbSource & "'") 
```

# java - 请帮助我理解以下代码中的“分配”方法

> ID：12799635
> 
> 赞同：0
> 
> 时间：2012-10-09T12:04:53.877
> 
> 标签：java, oop

```
class Test { 

    int a, b; 

    Test(int a, int b) {    
        this.a = a; 
        this.b = b; 
    } 

    Test() {               
        a = 0; 
        b = 0; 
    } 

    void print() { 
        System.out.println("A=" + a + ", B=" + b); 
    } 

    void assign(Test ob) {  //How can a class(Test) be passed as an argument in a method?
        this.a = ob.a;      //What does ob.a do?
        this.b = ob.b;      //What does ob.b do?
    }                       //How can a object 'ob' be passed as an argument?
} 
```

.

```
class TestDem { 

    public static void main(String ar[]) { 
        Test ob1 = new Test(1, 2); 
        System.out.println("1st object"); 
        ob1.print(); 
        Test ob2 = new Test(); 
        System.out.println("2nd object"); 
        ob2.print(); 
        ob2.assign(ob1); //dont understand how this statement works with the 'assign' method 
        System.out.println("After assigning object 1 to object 2"); 
        System.out.println("1st object"); 
        ob1.print(); 
        System.out.println("2nd object"); 
        ob2.print(); 

    } 
} 
```

**输出**

```
1st object
A=1, B=2
2nd object
A=0, B=0
After assigning object 1 to object 2
1st object
A=1, B=2
2nd object 
A=1, B=2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:08:02.243

```
void assign(Test ob) {  
    this.a = ob.a;      
    this.b = ob.b;      //What does ob.b do?
} 
```

此方法类似于您使用的构造函数：-

```
public Test(int a, int b) {
    this.a = a;
    this.b = b;
} 
```

*   不同之处在于，在此方法中，您获取的是传递的引用的值`a`和`b`来自传递的引用，而不是参数 a 和 b 本身。
*   另请注意，它不是构造函数。它只是将传递的引用的值分配给当前对象。而构造函数在创建实例后初始化实例的状态。

> 如何将类（测试）作为方法中的参数传递？

我们**没有在这里传递**Test**类**，而是**传递**对 Test.. 类对象的引用**。**

该方法除了创建该引用指向的对象的副本（在本例中为 ob）之外什么也不做。因此，在此方法执行后，当前对象（由 指向`this`）将具有与传递的对象相同的值。

> ob.a 是做什么的？

ob.a 是指您传递给此方法的 class引用的`instance`变量..`a``ob``Test`

**所以，如果你有： -**

```
Test ob2 = new Test(1, 2);
Test ob1 = new Test();
ob1.assign(ob2); 
```

**然后当这个方法执行时： -**

因为,`this`指的是当前引用，所以`this`在方法`assign`中将引用`ob1`，因为我们正在调用这个引用..

`ob2`而且，您将在 main 方法和方法`ob`的参数中都有引用，`assign`指向同一个对象..

因此，**ob1.a(this.a)**将等于**ob2.a**，并且
      **ob1.b(this.b)**将等于**ob2.b**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:16:25.830

```
void assign(Test ob) {  //How can a class(Test) be passed as an argument in a method?
    this.a = ob.a;      //What does ob.a do?
    this.b = ob.b;      //What does ob.b do?
}                       //How can a object 'ob' be passed as an argument? 
```

在 Java 中（除了 int 等原始类型，这里我们不讨论它们）一切都扩展了 Object。

您定义了一个`Test`隐含扩展的类`Object`。这个类有两个成员变量：`a`和`b`，它们的类型是`int`。

如果`ob`是 type ，您可以使用and`Test`访问它的成员（as and are public）。您可以使用和设置它们的值。`ob.a``ob.b``a``b``ob.a = anIntValue``ob.b = anIntValue`

这就是您在`assign`方法中所做的：您传递另一个类型的对象`Test`并将其值复制到您的封闭对象 ( `this.a = value`, `this.b = value`) 中。

因此，您的方法的结果是通过复制外部对象的状态来修改您的内部状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:19:34.220

该方法`void assign(Test ob)`接受一个`ob`类型为 的对象`Test`。然后它将`ob`'s 的`a`值分配给正在调用该方法的类的`a`值，然后对这些`b`值进行相同的处理。

也许如果该方法被重命名`copy(Test ob)`，那么该方法的作用会更清楚吗？

# sql-server-2005 - SQL Server：当列大小未知时，将 varchar 设置为不为空

> ID：12799636
> 
> 赞同：2
> 
> 时间：2012-10-09T12:04:56.090
> 
> 标签：sql-server-2005, alter-table, notnull

我正在尝试创建一个脚本，当对数据库运行时，它会占用一列并将其设置为 NOT NULL。

该列应该是 VARCHAR(50)，如果我知道它没有被更改，这将是小菜一碟，但是，我不能确定没有人改变长度，所以我需要确保我不会减小列的大小，例如，如果它被其他人增加到 100。

我希望我能做这样的事情，但它似乎不起作用（假设我已经确保没有 NULL 值）：

```
DECLARE @myColumnLength INT

SET @myColumnLength = (
    SELECT character_maximum_length
    FROM information_schema.columns
    WHERE table_name = 'mytable'
    AND column_name = 'mycolumn'
)

ALTER TABLE mytable
    ALTER COLUMN mycolumn VARCHAR(@myColumnLength) NOT NULL 
```

有任何想法吗？我是否以错误的方式解决问题？似乎有一种方法可以在不改变列大小的情况下将列设置为 NOT NULL，但我的 Google-fu 今天让我失望了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:08:31.160

您可以创建动态语句并使用以下命令执行它`EXEC`：

```
DECLARE @myColumnLength INT

SET @myColumnLength = (
    SELECT character_maximum_length
    FROM information_schema.columns
    WHERE table_name = 'mytable'
    AND column_name = 'mycolumn'
)

DECLARE @cmd VARCHAR(1000)
SET @cmd = 'ALTER TABLE mytable ALTER COLUMN mycolumn VARCHAR(' + @myColumnLength + ') NOT NULL'

EXEC (@cmd) 
```

# javascript - JavaScript - 水平列表动画故障 (IE8)

> ID：12799637
> 
> 赞同：0
> 
> 时间：2012-10-09T12:05:03.740
> 
> 标签：javascript, jquery, html, internet-explorer-8

所以当我尝试这段代码时：

```
function doMove() {
   var left = $('#navContainer').css('margin-left');
   left = parseInt(left) + 1;
   $('#navContainer').css('margin-left', left + 'px'); // show frame
   setTimeout(doMove,20); // call doMove() in 20 msec
} 
```

对此：

```
#navlist li
{
   display: inline;
   list-style-type: none;
   padding-right: 0px;
   padding-left: 0px;
   margin-right: -2px;
   margin-left: -2px;
}

<div class="floatIt" id="smallNavContainer">
   <div id="navContainer">
      <ul id="navlist">
         <li><a><img id="btn9" src="xxx.png" alt="???"/></a></li>
         <li><a><img id="btn10" src="xxx.png" alt="???"/></a></li>
         <li><a><img id="btn11" src="xxx.png" alt="???"/></a></li>
         <li><a><img id="btn1" src="xxx.png" alt="???"/></a></li>
         <li><a><img id="btn2" src="xxx.png" alt="???"/></a></li>
         <li><a><img id="btn3"  src="xxx.png" alt="???"/></a></li>
         <li><a><img id="btn4" src="xxx.png" alt="???"/></a></li>
         <li><a><img id="btn5" src="xxx.png" alt="???"/></a></li>
         <li><a><img id="btn6" src="xxx.png" alt="???"/></a></li>
         <li><a><img id="btn7" src="xxx.png" alt="???"/></a></li>
         <li><a><img id="btn8" src="xxx.png" alt="???"/></a></li>
      </ul>
   </div>
</div> 
```

它确实以一个主要问题向左移动，每次图像离开 smallNavContainer 的视图时，它都会跳到左侧并在其位置留下一小块空白区域。

我已经尝试过 jQuery animate，但它仍然给我同样的问题。

编辑 - 这是一个小提琴： http: [//jsfiddle.net/xReJT/9/](http://jsfiddle.net/xReJT/9/)
在 IE8 下它会在 chrome 下跳转，图像会过早地消失

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:23:45.887

问题可能是您为边距设置了动画。在我看来，如果您使用两个嵌套的 div 容器并对位置样式属性（如 top 和 left）进行动画处理，动画会更直观并且会产生更好的结果。

外层具有定义的宽度和高度，将溢出设置为隐藏，并且它的位置不能是静态的。内部的，也不是静态定位的，是你动画的那个，通常一个使用 top 和 left 属性。这个内部 div 可以是每一种可以动画的 html 的容器。

祝你好运……</p>

# java - 为什么 JSplitPane 为我的组件添加边框，我该如何阻止它？

> ID：12799640
> 
> 赞同：5
> 
> 时间：2012-10-09T12:05:22.557
> 
> 标签：java, swing, border, jsplitpane

`JSplitPane`似乎为添加的任何内容添加了边框`Component`。

这在嵌套的 JSplitPanes 中最为明显 - 例如：

```
public class JSplitPaneToy {

  public static void main(String[] args) {
    JSplitPane sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, 
      makePanel(), makePanel());
    sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, makePanel(), sp);
    sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, makePanel(), sp);
    sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, makePanel(), sp);

    JFrame frame = new JFrame("JSplitPane Toy");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setContentPane(sp);
    frame.pack();
    frame.setVisible(true);
  }

  private static JScrollPane makePanel() {
    JScrollPane pane = new JScrollPane(new JTable(
      new Object[][]{{0, 1, 2}, {1, 2, 3}, {2, 3, 4}}, new Object[]{1, 2, 3}));
    pane.setPreferredSize(new Dimension(200, 100));
    return pane;
  }
} 
```

即，每个后续嵌套组件似乎都设置得更靠后——即添加了某种形式的阴影边框。

*   为什么要添加此边框？（这实际上是在添加边框吗...？）
*   如何防止添加此“边框”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T13:03:02.437

如果您想在所有 JSplitPane 上删除这些边框，您可以像这样更改 UI 的默认值。但是，我通常尽量不要乱用 UI-defaults。

```
import java.awt.Dimension;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class JSplitPaneToy {

    public static void main(String[] args) {
        UIManager.getDefaults().put("SplitPane.border", BorderFactory.createEmptyBorder());
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JSplitPaneToy().initUI();
            }
        });
    }

    public void initUI() {
        JSplitPane sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, makePanel(), makePanel());
        sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, makePanel(), sp);
        sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, makePanel(), sp);
        sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, makePanel(), sp);

        JFrame frame = new JFrame("JSplitPane Toy");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(sp);
        frame.pack();
        frame.setVisible(true);
    }

    private JScrollPane makePanel() {
        JScrollPane pane = new JScrollPane(new JTable(new Object[][] { { 0, 1, 2 }, { 1, 2, 3 }, { 2, 3, 4 } }, new Object[] { 1, 2, 3 }));
        pane.setPreferredSize(new Dimension(200, 100));
        return pane;
    }
} 
```

您可能想看看 SwingX 项目的 JXMultiSplitPane，而不是嵌套这么多拆分窗格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T12:14:25.177

我们使用这种方法来“扁平化”一个 JSplitPane。也许这就是您正在寻找的：

```
/**
 * Makes a split pane invisible. Only contained components are shown.
 *
 * @param splitPane
 */
public static void flattenJSplitPane(JSplitPane splitPane) {
    splitPane.setBorder(BorderFactory.createEmptyBorder(1, 1, 1, 1));
    BasicSplitPaneUI flatDividerSplitPaneUI = new BasicSplitPaneUI() {
        @Override
        public BasicSplitPaneDivider createDefaultDivider() {
            return new BasicSplitPaneDivider(this) {
                @Override
                public void setBorder(Border b) {
                }
            };
        }
    };
    splitPane.setUI(flatDividerSplitPaneUI);
    splitPane.setBorder(null);
} 
```

至于为什么要添加边框，就不得而知了。显然它的某种功能。我们发现它是不受欢迎的，上面的方法可以解决它。可能有一种更简单的方法可以解决这个问题，但是，嘿，当你找到可行的方法时，你就停止寻找替代方案了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T12:42:54.393

我用它来重置分隔线的边框。

```
 SplitPaneUI ui = sp.getUI();
    if( ui instanceof BasicSplitPaneUI ) {
        ((BasicSplitPaneUI)ui).getDivider().setBorder( null );
    } 
```

注意：您的示例不起作用`splitPane`是未知的，它应该是`sp`.

```
public class JSplitPaneToy {

  public static void main(String[] args) {
    JSplitPane sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT,  makePanel(), makePanel());
    SplitPaneUI ui = sp.getUI();

    if( ui instanceof BasicSplitPaneUI ) {
        ((BasicSplitPaneUI)ui).getDivider().setBorder( null );
    }
    sp.setBorder( BorderFactory.createEmptyBorder() );

    sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, makePanel(), sp);
    ui = sp.getUI();
    if( ui instanceof BasicSplitPaneUI ) {
        ((BasicSplitPaneUI)ui).getDivider().setBorder( null );
    }
    sp.setBorder( BorderFactory.createEmptyBorder() );

    sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, makePanel(), sp);
    ui = sp.getUI();
    if( ui instanceof BasicSplitPaneUI ) {
        ((BasicSplitPaneUI)ui).getDivider().setBorder( null );
    }
    sp.setBorder( BorderFactory.createEmptyBorder() );

    sp = new JSplitPane(JSplitPane.VERTICAL_SPLIT, makePanel(), sp);
    ui = sp.getUI();
    if( ui instanceof BasicSplitPaneUI ) {
        ((BasicSplitPaneUI)ui).getDivider().setBorder( null );
    }
    sp.setBorder( BorderFactory.createEmptyBorder() );

    JFrame frame = new JFrame("JSplitPane Toy");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setContentPane(sp);
    frame.pack();
    frame.setVisible(true);
  }

  private static JScrollPane makePanel() {
    JScrollPane pane = new JScrollPane(new JTable(
      new Object[][]{{0, 1, 2}, {1, 2, 3}, {2, 3, 4}}, new Object[]{1, 2, 3}){
    });
    pane.setPreferredSize(new Dimension(200, 100));
    return pane;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:35:56.667

另一种答案是将每个设置`Component`为`JSplitPane`具有空边框 - 例如

```
JComponent a = ...;
JComponent b = ...; 
a.setBorder(BorderFactory.createEmptyBorder());
b.setBorder(BorderFactory.createEmptyBorder());
JSplitPane splitPane = new JSplitPane(JSplitPane.VERTICAL_SPLIT, a, b); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-19T11:35:55.743

只需像这样通过 JScrollPane 覆盖 setBroder

```
public class MyScrollPane extends JScrollPane {
 ...
 @Override
 public void setBorder(Border b) {}
} 
```

# jsp - 无法在我的注册表单的 img 标签中加载 captcha.jsp

> ID：12799646
> 
> 赞同：0
> 
> 时间：2012-10-09T12:05:34.787
> 
> 标签：jsp, captcha, struts1

我正在为我的注册表单实施验证码。当我的页面加载时，我不知道为什么我的验证码没有加载（显示）。

我正在使用 img tag:-> 显示我的验证码 `<img src="captcha.jsp"/>`。但是当我通过facebox访问它时，同样的验证码就会出现。我知道为什么会这样。

如果可以，请你帮助我。

-谢谢

## 索引.jsp

```
 <html:form action="/addUserAction?method=addUser" method="post" onsubmit="return validateAddUserForm(this);">
        <html:javascript formName="addUserForm"></html:javascript>
        <table border="0" width="100%" align="center" height="100%">

            <tr>
                <td align="center" bgcolor="#d0d67f" colspan="2" ><font size="5" face="Broadway" color="#4d4207">Registration Form</font>&nbsp;&nbsp;</td>
            </tr>
            <tr>
                <td align="center" colspan="2"><div id="ashutosh" style="background:#ffebe8;border:0px solid #dd3c10;background-position: top"> </div> <div id="ansuman"  > </div>   </td>
            </tr>
            <tr>
                <td align="right"><img alt=""  src="images/validation/backRequiredGray.gif"><font size="3" face="Broadway" color="#4d4207">Name&nbsp;&nbsp;</font></td>
                <td><html:text tabindex="3" style="height:27px;font-size:16pt;"  property="name" maxlength="240"></html:text></td>
            </tr>
            <tr>
                <td align="right"><img alt=""  src="images/validation/backRequiredGray.gif"><font size="3" face="Broadway" color="#4d4207">Email&nbsp;&nbsp;</font></td>
                <td>
                    <html:text tabindex="4" style="height:27px;font-size:16pt;" onkeyup="getEmailCheckResult(this.value);"   property="email"></html:text>

                </td>
            </tr>
            <tr>
                <td align="right"><font size="3" face="Broadway" color="#4d4207">Phone Number&nbsp;&nbsp;</font></td>
                <td><html:text tabindex="5" style="height:27px;font-size:16pt;" maxlength="15"  onkeypress="return ValidateNum(this,event)" property="contactNumber"></html:text></td>
            </tr>

            <tr>
                <td height="30" align="right" ><font size="3" face="Broadway" color="#4d4207">Code&nbsp;&nbsp;</font></td>
                <td height="30" align="left"><img alt=""  src="captcha.jsp" width="208"/></td>
            </tr>

            <tr>
                <td height="30" align="right" valign=""><img src="images/validation/backRequiredGray.gif"><font size="3" face="Broadway" color="#4d4207">Enter Code&nbsp;&nbsp;</font></td>
                <td height="30" align="left" >
                    <html:text tabindex="7" property="code"  style="height:27px;font-size:16pt;"  onkeyup="getCapchaCheckResult(this.value);"   size="16" maxlength="13"></html:text>
                 <div id="ansuman"> </div>
                </td>
            </tr>
            <tr>
                <td height="30" align="center" valign="middle" colspan="2"><img alt=""  ><font color="#4d4207">By clicking Sign Up, you agree and understand  our</font> <a href="tc.do" target="blank"><font color="#4d4207">Terms & Conditions.</font></a> </td>
            </tr>

            <tr>
                <td height="30" align="right" valign="middle" colspan="2"><img src="images/validation/backRequiredGray.gif"> Fields Required</td>
            </tr>
            <tr>
                <td colspan="2" align="center" ><input type="submit" style="height:37px;font-size:16pt;color:#4d4207;" value="Sign Up"></td>
            </tr>
            <tr>
                <td height="30" align="center" valign="middle" colspan="2" bgcolor="#d0d67f"><font color="#4d4207">Please Note: The Password will be emailed to the mail Id provided.</font> </td>
            </tr>
        </table>
    </html:form> 
```

## 验证码.jsp

```
<%--
        Document   : captcha
        Created on : 23 Jan, 2012, 2:23:50 PM
        Author     : Ashutosh
    --%>

    <%@ page import="java.util.*, java.io.*,java.awt.*,java.awt.image.*,javax.imageio.*,java.awt.geom.*"%>
    <%
     response.setContentType("image/jpg");
      /* Define number characters contains the captcha image, declare global */
      int iTotalChars= 6;

      /* Size image iHeight and iWidth, declare globl */
      int iHeight=40;
      int iWidth=150;

      /* font style */
      Font fntStyle1 = new Font("Arial", Font.BOLD, 30);
      Font fntStyle2 = new Font("Verdana", Font.BOLD, 20);

      /* Possible random characters in the image */
      Random randChars = new Random();
      String sImageCode = (Long.toString(Math.abs(randChars.nextLong()), 36)).substring(0,iTotalChars);

      /* BufferedImage is used to create a create new image*/
      /* TYPE_INT_RGB - does not support transpatency, TYPE_INT_ARGB - support transpatency*/
      BufferedImage biImage = new BufferedImage(iWidth, iHeight, BufferedImage.TYPE_INT_RGB);
      Graphics2D g2dImage = (Graphics2D) biImage.getGraphics();

      // Draw background rectangle and noisey filled round rectangles
      int iCircle = 15;
      //g2dImage.fillRect(0, 0, iWidth, iHeight);
      for ( int i = 0; i < iCircle; i++ )
      {
        g2dImage.setColor(new Color(randChars.nextInt(255),randChars.nextInt(255),randChars.nextInt(255)));
        int iRadius = (int) (Math.random() * iHeight / 2.0);
        int iX = (int) (Math.random() * iWidth - iRadius);
        int iY = (int) (Math.random() * iHeight - iRadius);
        //g2dImage.fillRoundRect(iX, iY, iRadius * 2, iRadius * 2,100,100);
      }
      g2dImage.setFont(fntStyle1);
      for ( int i = 0; i < iTotalChars; i++ )
      {
        g2dImage.setColor(new Color(randChars.nextInt(255),randChars.nextInt(255),randChars.nextInt(255)));
        if (i%2==0)
          g2dImage.drawString(sImageCode.substring(i,i+1),25*i,24);
        else
          g2dImage.drawString(sImageCode.substring(i,i+1),25*i,35);
      }

      /* create jpeg image and display on the screen*/
      OutputStream osImage = response.getOutputStream();
      ImageIO.write(biImage, "jpeg", osImage);
      //osImage.close();

      /* Dispose function is used destory an image object */
      g2dImage.dispose();

      session.setAttribute("dns_security_code", sImageCode);
      //System.out.println("Captcha Page :"+session.getAttribute("dns_security_code"));

    %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:14:48.193

把你的jsp变成一个servlet！

jsp 是创建标记文件的好选择，如果您在文件中添加不必要的空格，这些文件不会中断。

您的验证码在 servlet 的 doGet(...) 方法中无需任何更改即可工作。

```
package test.captcha;

import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.io.OutputStream;
import java.util.Random;
import javax.imageio.ImageIO;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class CaptchaServlet extends HttpServlet {

 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

    response.setContentType("image/jpg");
    /*
     * Define number characters contains the captcha image, declare global
     */
    int iTotalChars = 6;

    /*
     * Size image iHeight and iWidth, declare globl
     */
    int iHeight = 40;
    int iWidth = 150;

    /*
     * font style
     */
    Font fntStyle1 = new Font("Arial", Font.BOLD, 30);
    Font fntStyle2 = new Font("Verdana", Font.BOLD, 20);

    /*
     * Possible random characters in the image
     */
    Random randChars = new Random();
    String sImageCode = (Long.toString(Math.abs(randChars.nextLong()), 36)).substring(0, iTotalChars);

    /*
     * BufferedImage is used to create a create new image
     */
    /*
     * TYPE_INT_RGB - does not support transpatency, TYPE_INT_ARGB - support transpatency
     */
    BufferedImage biImage = new BufferedImage(iWidth, iHeight, BufferedImage.TYPE_INT_RGB);
    Graphics2D g2dImage = (Graphics2D) biImage.getGraphics();

    // Draw background rectangle and noisey filled round rectangles
    int iCircle = 15;
    //g2dImage.fillRect(0, 0, iWidth, iHeight);
    for (int i = 0; i < iCircle; i++) {
        g2dImage.setColor(new Color(randChars.nextInt(255), randChars.nextInt(255), randChars.nextInt(255)));
        int iRadius = (int) (Math.random() * iHeight / 2.0);
        int iX = (int) (Math.random() * iWidth - iRadius);
        int iY = (int) (Math.random() * iHeight - iRadius);
        //g2dImage.fillRoundRect(iX, iY, iRadius * 2, iRadius * 2,100,100);
    }
    g2dImage.setFont(fntStyle1);
    for (int i = 0; i < iTotalChars; i++) {
        g2dImage.setColor(new Color(randChars.nextInt(255), randChars.nextInt(255), randChars.nextInt(255)));
        if (i % 2 == 0) {
            g2dImage.drawString(sImageCode.substring(i, i + 1), 25 * i, 24);
        } else {
            g2dImage.drawString(sImageCode.substring(i, i + 1), 25 * i, 35);
        }
    }

    /*
     * create jpeg image and display on the screen
     */
    OutputStream osImage = response.getOutputStream();
    ImageIO.write(biImage, "jpeg", osImage);
    //osImage.close();

    /*
     * Dispose function is used destory an image object
     */
    g2dImage.dispose();

    HttpSession session = request.getSession();
    session.setAttribute("dns_security_code", sImageCode);
    //System.out.println("Captcha Page :"+session.getAttribute("dns_security_code"));

}

protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

} 
```

如果不存在则创建一个 Web 应用程序描述符：/WEB-INF/web.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<servlet>
        <servlet-name>CaptchaServlet</servlet-name>
        <servlet-class>test.captcha.CaptchaServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>CaptchaServlet</servlet-name>
    <url-pattern>/captcha-image.jpg</url-pattern>
</servlet-mapping>
</web-app> 
```

# java - 如何将产品目录中的产品 ID 发送到 java 类？

> ID：12799647
> 
> 赞同：0
> 
> 时间：2012-10-09T12:05:37.627
> 
> 标签：java, forms, jsp, struts2

（这个问题很难，但我还不能解决）我有一个产品目录，它使用 <div> 标签显示不同的值，应该有一个按钮供用户将所选产品添加到购物篮，但我没有知道将 ProductsID 发送到 java 类。

```
 Name:ProductA     Name:ProductB 
 Price:3.5         Price:5.0
 Add               Add 
```

我在 JSP/struts2 中的代码如下：

这是一个通过接收值将填充标签中的 Friend.name 的表单。

```
<sx:div>
   <div id="Name">name:${Friend.name}</div>
   <s:form action="myMethod" >
     <s:submit/>
   </s:form>
</sx:div> 
```

一旦用户单击提交，它就会转到所需的类并运行第 11 行，但会显示“name is: null”。

```
private String name;

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String myMethod() {
Line 11  System.out.println("in mymethod");  // output is : mymethod
     System.out.println("The name is:" + this.name); // output is: the name is: null
     return "SUCCESS";
} 
```

我不确定这是否是因为 jsp 代码位于 AJAX 标记中而导致的另一个问题。

当我使用时很奇怪

```
 <s:textfield name="Name" label="Name" /> 
```

并输入它接受的输入并使用 this.name 显示值！

**另一个例子**HTML和JSP（新版本）代码如下：

```
 <s:form action="AddProduct" >
     <tr><td><div id="image"><img src=${Product.thumbNailUrl} alt="image"/></div></td></tr>
       <s:textfield name="Name" label="Name" />  
     <tr><td><div id="Name">Here:${Product.name}</div></td></tr>
     <s:hidden id="Name1" value="name1">${Product.name}</s:hidden>
     <s:label id="name2" name="name2" value="John"/>
     <tr><td><div id="Rate:">Rate:${Product.highRate}</div></td></tr>
     <tr><td><div id="Address">Address:${Product.address}</div></td></tr>
     <tr><td>
                  <s:submit/>
    </s:form> 
```

****** *** ** ***** HTML ****** _****

 **```
 <tr><td><div id="Name">Here:Beaufort</div></td></tr>
     Beaufort<input type="hidden" name="" value="name1" id="Name1"/>
     <tr>
         <td class="tdLabel"></td>
         <td><label id="name2">John</label></td>
     </tr>

     <tr><td><div id="Rate:">Rate:437.19</div></td></tr>
     <tr><td><div id="Address">Address:33 Beaufort</div></td></tr>
     <tr><td>
                  <tr>

      <td colspan="2"><div align="right"><input type="submit" id="AddProduct_0" 
       value="Submit"/>
      </div></td>
       </tr>

    </table></form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:15:21.100

我不知道你有多少经验，`struts`但我认为你的问题有一个非常简单的解决方案：

**首先**，您需要有一个表格。此表格应包含您需要传递给班级的任何内容。（*如果你是`form`s新手，做一点谷歌查找各种教程*）

**其次**，将表单设置`action`为负责处理它的 java 类。（*如果你对`controllers`谷歌有点`struts`新手教程*）

**第三**，在该课程中接收输入并按照您的意愿进行操作。

* * *

**更新**

我们有（某种）相同的类似情况。有两种选择：

**One** to have a hidden field and have the IDs there (hidden field or just simply do not show it in your page), so whenever an object is selected the ID will be sent too.

**两个**使用休眠二级缓存，并使用休眠检索它。使用`load`方法从该缓存中检索 ID。

为什么是2级？因为它不查询数据库，效率更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:17:36.070

每当您在视图（html）上填充目录时，您可能应该保留一个隐藏字段，该字段将存储相应产品的 productId。因此，每当用户将产品添加到购物车时，您都可以轻松获取该产品的 id 并将其发送到服务器。**

# objective-c - 我是否应该在 -[UIViewController viewWillUnload] 和 -[UIViewControoler dealloc] 中从 UIView 中删除 KVO？

> ID：12799649
> 
> 赞同：0
> 
> 时间：2012-10-09T12:05:44.530
> 
> 标签：objective-c, uiviewcontroller

我将观察者添加到`UITableView`属性中。

```
[tableView addObserver:self forKeyPath:@"contentSize" options:NSKeyValueObservingOptionNew context:nil]; 
```

众所周知，何时调用`UIViewController`弹出`-[UIViewController dealloc]`方法以及`-[UIViewController viewWillUnload]`何时收到内存警告。

我应该在两个地方删除观察者（好吧，无论如何我*必须*）？这是最好的代码重复。或者也许我可以调用（如 Three20 框架中所写）`-[UIViewController viewWillUnload]`？`-[UIViewController dealloc]`这种方法好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T15:48:29.777

您应该只删除 dealloc 中的观察者。如果您也在 viewWillUnload 中执行此操作，您可能会删除观察者两次，这会使您的应用程序崩溃。但是，添加两次观察者不是问题。即使你在 viewDidUnload 中 nil tableView，观察者可以继续存在，它不会做任何事情。

# css - 如何在css中裁剪背景图像

> ID：12799650
> 
> 赞同：0
> 
> 时间：2012-10-09T12:05:45.350
> 
> 标签：css

实际上我是我有一个透明的背景**条纹**图像，我将在我的**div**的背景中重复，但我想以三角形类型裁剪该图像，所以我如何用**CSS做到这一点**

**实际上我拥有的图像** ![在此处输入图像描述](../Images/a37032a2d6cfc855ab7c41de7b1a0838.png)

**以及我试图达到的预期结果，如下面提到的图像透明条纹图像，所以我如何在 css 中裁剪这个图像** ![在此处输入图像描述](../Images/f12a188bdd948083e96cc8d25b8d666a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:59:44.947

![在此处输入图像描述](../Images/34f4255f613d5af889ca3c9977e1d266.png)

如果您可以设法使用带背景多伙伴时间（管理带不匹配）那么这就是您需要做的**[演示](http://jsbin.com/ubeqop/3/)**

```
<div id="d1">
  <div id="d2"></div>
  <div id="d3"></div>
  <div id="d4"></div>
</div> 
```

**CSS**

```
#d1 {background:#f00;
height: 80px;
width: 400px; position:relative}

#d4{background:rgba(0,0,0,.5);height:80px; width:340px; left:60px; position:absolute;}

#d2{position:absolute;font-size:0px;left:20px;width: 0px; border-top: 40px solid red;
border-right: 40px solid rgba(0,0,0,.5);-webkit-transform:rotate(270deg);}

#d3{position:absolute;font-size:0px;left:20px;top:40px;width: 0px;
border-top: 40px solid red;
border-right: 40px solid rgba(0,0,0,.5);} 
```

编辑：更新了链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:02:15.057

这是我的结果：

![只是一个演示](../Images/cfa6c9a2856d84ade712b5730e6506d3.png)

[**演示**](http://jsfiddle.net/gionaf/GAkZS/)

注意：我是有`rgba`背景的，但我很确定你也可以这样做[`border-image`](http://www.css3.info/preview/border-image/)。

HTML：

```
<div id="bgWrapper">
<div id="retina"></div>
</div>​ 
```

CSS：

```
#bgWrapper {
    background:url(main-background-image.jpg) top left no-repeat;
    height:6em;
    position:relative;
}
#retina {
    position:absolute;
    top:0; left:8em; right:0; bottom:0;
    background:rgba(255,255,255,0.4);
}
#retina:before {
    content:" ";
    position:absolute;
    top:0; left:-6em; bottom:0;
    width:3em;
    border-left:3em solid transparent;
    border-top:3em solid rgba(255,255,255,0.4); /* same as #retina background */
    border-bottom:3em solid rgba(255,255,255,0.4); /* same as #retina background */
} 
```

​</p>

# c++ - qDebug 不显示任何内容

> ID：12799653
> 
> 赞同：11
> 
> 时间：2012-10-09T12:06:10.693
> 
> 标签：c++, qt, qt-creator, qdebug

通常，当我需要调试某些东西时，使用调试器打印某些东西比使用`qDebug()`调试器逐步调试更容易。问题是有时`qDebug()`根本不显示的输出！与`qWarning`和相同`qCritical`。奇怪的是，它仅在正常运行项目（Ctrl + R）时发生，而在调试（F5）时显示输出。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T12:06:10.693

解决方案很简单：添加`CONFIG += console`到您的 .pro 文件并重建整个项目。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-06-01T19:44:03.870

我的解决方案，如[https://bugzilla.redhat.com/show_bug.cgi?id=1227295#c10](https://bugzilla.redhat.com/show_bug.cgi?id=1227295#c10) 中所述：

1.  `qtlogging.ini` 在`/etc/xdg/QtProject/`. _
2.  编辑当前文件（`qtlogging.ini`如果丢失，则创建文件）

> ```
> [Rules]
> *.debug=false 
> ```

至

> ```
> [Rules]
> *.debug=true
> qt.*.debug=false 
> ```

3.  重新编译并检查！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-01T14:58:54.173

如果您正在运行 Qt Creator 的多个实例，qDebug 将无法正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-21T06:18:17.817

我有同样的问题，这里的答案都没有帮助我。我在这里找到了解决方案：[https ://lists.fedoraproject.org/archives/list/kde@lists.fedoraproject.org/thread/SB6QJZGVDLWWBZCMTNKMVZSSPPNREOYJ/](https://lists.fedoraproject.org/archives/list/kde@lists.fedoraproject.org/thread/SB6QJZGVDLWWBZCMTNKMVZSSPPNREOYJ/)

我必须设置 QT_ASSUME_STDERR_HAS_CONSOLE=1。这可以在代码中完成：

```
qputenv("QT_ASSUME_STDERR_HAS_CONSOLE", "1"); 
```

或者在“环境”下的“套件”设置中更好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-26T23:03:46.080

我使用这个问题的解决方案

```
Windows 10 Education
Qt Creator (5.x)
Developing a Qt widget. 
```

问题：

所以我的问题是，每当我添加一条`QDebug`消息时，它并没有出现在应用程序输出中，尽管我的代码与教程中的代码 100% 相同并且编译良好。

解决方案：

右键单击添加`QDebug`消息的文件，对我来说它是`main.cpp`. 单击构建。按底部的绿色箭头。

如果这仍然不起作用，请转到“Build”->“CleanAll”、“Build”->“qMake”并再次选择绿色箭头。

当然，您必须`#include <QDebug>`检查它在您的代码中是否拼写正确。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-28T11:33:12.970

就我而言，不知何故我忘了单击“配置项目”。我正在使用 QTCreator 4.11 和 Qt5.14。当我创建项目时，我没有在创建过程接近尾声时单击“配置项目”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-30T00:47:20.443

Qt5.14.2，QtCreator 4.12.0：对我有用的是取消选择 Projects->Run->Run in Terminal... Duh！

# java - 参考实体标识符的 DDD 值对象

> ID：12799660
> 
> 赞同：2
> 
> 时间：2012-10-09T12:06:24.437
> 
> 标签：java, domain-driven-design

在领域驱动设计 (DDD) 中，ValueObject 具有以下定义

> 值对象是描述某些特征或属性但不带有身份概念的对象。

假设我有“客户”实体和“订单”实体。订单与客户相关，因此通常我会在订单类中添加字段 ClientId，因为我可能不会引用客户实体本身。到现在为止还挺好...

现在我想知道是否可以创建一个值对象 ClientInfo，其中将包括客户端名称、客户端状态**以及 ClientId**？ClientInfo 将是不可变的，只有 clientName、clientStatus 和 clientId 的 getter。

所以你有了它，一个带有实体标识符的值对象。这违反了值对象的定义，还是我在这里安全？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T12:10:47.197

引用实体标识符的值对象很好。如果您有两个具有相同信息的 ClientInfo 对象，它们将完全可以互换。它们是值，就像字符串或整数一样。

# c# - 在 C# 中使用多个线程

> ID：12799662
> 
> 赞同：0
> 
> 时间：2012-10-09T12:06:27.643
> 
> 标签：c#, multithreading

我想做解析系统中多个文件的独立任务并获取每个文件的版本，如下所示：

```
public void obtainVersionList()
{

    for(int iterator = 1; iterator < list.length; iterator++) //list stores all the file names
    {
        Thread t = new Thread( () => GetVersion(ref list[iterator]) 
        //list will again store the fileVersions using GetVersion()
    }
} 
```

这里，

1.  我得到 Index out of bounds 异常。这怎么可能，因为我已经检查了条件迭代器 < list.length。这是由于多个线程正在运行吗？
2.  当我们解析磁盘中的多个文件时，如何最小化操作时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:09:15.683

对于并行执行，我建议您`Parallel.ForEach`（或`Task`班级）：

```
Parallel.ForEach(list, item => GetVersion(ref item)); 
```

然后，您使用的 TPL 会为您执行线程管理，通常使用线程池。但是，您可以使用不同的调度程序实现。一般来说，重用线程比产生许多线程便宜。

受韦斯顿建议的启发，我尝试了一种替代方法，这可能被认为是*创造性的 LINQ 用法*：

```
static void Main(string[] args)
{
    var seq = Enumerable.Range(0, 10).ToList();
    var tasks = seq
        .Select(i => Task.Factory.StartNew(() => Foo(i)))
        .ToList(); // important, spawns the tasks
    var result = tasks.Select(t => t.Result);

    // no results are blockingly received before this
    // foreach loop
    foreach(var r in result)
    {
        Console.WriteLine(r);
    }
}

static int Foo(int i)
{
    return i;
} 
```

对于我中的每个输入，`seq`我都会创建一个`Task<T>`正在做的事情。这些`Result`任务的 收集在 中`result`，在 之前没有迭代`foreach`。此代码也确实维护了结果的顺序。

样品不修改`seq`。这是一个不同的概念，而不是`list`随心所欲地改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T12:11:29.337

该`iterator`变量是通过引用而不是值来捕获的。这使得所有线程共享相同的变量。在 lambda 中使用之前，先将其复制到循环局部变量。

每个人都至少为此而堕落一次。C# 设计者非常后悔这个决定，他们考虑改变它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:19:18.200

要解决索引越界问题，您可以制作迭代变量的本地副本：

```
for(int iterator = 1; iterator < list.length; iterator++) //list stores all the file names
{
     int iterator1 = iterator;
     Thread t = new Thread( () => GetVersion(ref list[iterator1]);
     //list will again store the fileVersions using GetVersion()
} 
```

> 2）当我们解析磁盘中的多个文件时，如何最小化操作时间？

当您只有一个机械磁盘时，这并不是一个好主意。当每个线程都有机会运行时，您只会弹跳机械头。坚持使用单个线程进行磁盘 I/O。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:17:37.760

**看到[这个问题](https://stackoverflow.com/questions/512166/c-sharp-the-foreach-identifier-and-closures)**

不要关闭您的迭代器变量。相反，创建一个局部变量并关闭它：

```
public void obtainVersionList()
{
    //list stores all the file names
    for(int iterator = 1; iterator < list.length; iterator++) 
    {
        //list will again store the fileVersions using GetVersion()
        var local = list[iterator];
        Thread t = new Thread( () => GetVersion(ref local);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T12:24:03.437

你不应该让多个线程调整同一个列表。除非列表是线程安全的，否则这不是线程安全的。我不知道类型，但`List<string>`不是。

另一件事是您不应该为此创建自己的线程。如果列表是 200 个文件，您的 PC 将停止创建 200 个线程。让线程池为您管理合理数量的线程。

此解决方案假定您拥有 .net4。

将 GetVersion 的签名更改为：`private static string GetVersion(string file)`

```
 var tasks = new List<Task>();
        //start tasks
        foreach (var file in list)
        {
            var localFile = file; //local variable on advice of resharper
            tasks.Add(Task<string>.Factory.StartNew(() => GetVersion(localFile)));
        }
        //wait for them to complete
        Task.WaitAll(tasks.ToArray());
        //read the results
        IEnumerable<string> result = tasks.OfType<Task<string>>().Select(e => e.Result);
        //print em out for test
        foreach (var str in result)
        {
            Console.WriteLine(str);
        } 
```

# jquery - 在谷歌浏览器中获取图像大小未定义

> ID：12799666
> 
> 赞同：0
> 
> 时间：2012-10-09T12:06:44.423
> 
> 标签：jquery, html, google-chrome, getimagesize

我的 html 中有几个图像标签和 div，如下所示。

我的要求是计算每个图像的高度 * 宽度，如果高度 * 宽度 <5000，则执行以下操作。1）删除相应的div 2）删除相应图像的“captify”类

为此，我尝试了以下脚本来处理 google chrome，因为我已经设法使用其他方法为 IE 和 firefox 工作。

```
$('img[class = "captify"]').each(function(){

var $that = $(this),
picRealWidth = 0,
picRealHeight = 0,
imgSize = 0,
dvHiResCaption = null,
src = $that.attr( 'src' ),
rel = $that.attr( 'rel' );

// creating a clone in memory
$('<img/>').attr('src', src)
.load(function(){
picRealWidth = parseInt( this.width );
picRealHeight = parseInt( this.height );
}, function(){
// called once the load is complete
imgSize = picRealWidth * picRealHeight;

if( imgSize < 5000 ){
dvHiResCaption = '#' + rel;
$(dvHiResCaption).remove();
$that.removeClass( 'captify' );
}
});
}); 
```

任何人都可以帮我解决这个问题。提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:18:07.870

试试这个：

```
$('img.captify').each(function(i,img){
    img.onload = function() {
        if ((this.width * this.height) < 5000) {
            $('#' + $(this).attr('rel')).remove();
            $(this).removeClass('captify');
        }
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:08:43.267

[jsfiddle](http://jsfiddle.net/5DjLw/)没有这样的方法。this 内部加载函数不是 jQuery 对象，而是 JavaScript HTMLElement。利用：

```
.....
picRealWidth = $(this).width( ); // return integer value
picRealHeight =  $(this)..height( );  // return integer value
..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:13:33.650

使用 $(this).width, $(this).height

```
$('<img/>').attr('src', src)
.load(function(){
picRealWidth =$(this).width();
picRealHeight = $(this).height();
....... 
```

# php - facebook在url中传递参数

> ID：12799668
> 
> 赞同：0
> 
> 时间：2012-10-09T12:06:48.470
> 
> 标签：php, facebook

我想在我的 url 中传递一个 facebook 用户 ID 作为参数。

它看起来像这样：

```
<form action="<?php echo 'single_picture.php?argument=' . $picture_id . '&hus=' . $user_profile['id'] ?>" method="post">
<input type="submit" name="submit" value="Vote!">
</form> 
```

我用这个检索它：

```
$picture_id = $_GET['argument'];
$fbargument = $_GET["hus"];

echo "\npicture_id: ";
echo $picture_id;

echo '<br />';

echo "\$fbargument: ";
echo $fbargument; 
```

第一个参数有效，但我无法让第二个参数有效:(

我尝试将用户标识存储在另一个变量中并发送它，但也没有运气。

我正在将所有数据输出到屏幕上，以确保我有一个用户 ID，并且我可以看到它有效。

```
$user_profile = $facebook->api('/me','GET');
echo "id: " . $user_profile['id']; 
```

当我登录时，这会打印出我的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:14:18.157

现在我意识到，你不需要表格。只需执行 ajax 函数并在那里传递参数：

例如：

```
<input type="hidden" id="argument" value="<?= $picture_id?>">
<input type="hidden" id="hus" value="<?= $user_profile['id']?>">

$(document).on('click', '#submit', function() { 
    var argument = $("#argument").val(),
        hus = $("#hus").val();

    $.ajax({
        type:"POST",
        url: 'url.php',
        data: { argument: argument , hus: hus },
        dataType: "html",
        success: function(e) {
            //do something
        }
    });
}); 
```

# maven - 是否有插件允许我在 Maven 构建中获取版本子组件？

> ID：12799669
> 
> 赞同：1
> 
> 时间：2012-10-09T12:06:48.377
> 
> 标签：maven, plugins, version

在我的 maven 构建中，我想访问当前构建的项目的 majorVersion 和 minorVersion。我尝试编写[gmaven-plugin](http://docs.codehaus.org/display/GMAVEN/Executing+Groovy+Code) groovy 脚本，但失败了；[我还尝试使用properties-maven-plugin](http://evgeny-goldin.com/wiki/Properties-maven-plugin)提取它，但我只获得了我编写的 groovy 脚本的字符串视图。那么，我怎样才能将版本作为多个元素而不是简单的 String ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:42:00.877

有一种叫[`build-helper-maven-plugin`](http://mojo.codehaus.org/build-helper-maven-plugin/parse-version-mojo.html)。它会让你解析你的 pom 的版本，并在你的 pom.xml 中放置一个名为`parsedVersion`use 的新变量。

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <phase>initialize</phase>
                    <id>parse-version</id>
                    <goals>
                        <goal>parse-version</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
    <finalName>${project.artifactId}-${parsedVersion.majorVersion}</finalName>
</build> 
```

# amazon - 亚马逊服务器规格 (ECU)

> ID：12799670
> 
> 赞同：2
> 
> 时间：2012-10-09T12:06:50.007
> 
> 标签：amazon, specifications

亚马逊声称 1ECU 与 2007 年的 1.0 - 1.2 GHz 处理器相比。以下是高内存四倍超大型实例的规格：68.4 GB 内存，26 个 EC2 计算单元（8 个虚拟内核，每个内核有 3.25 个 EC2 计算单元）。这意味着平均总共有 8 * 3.25 * 1.1 GHz = 28.6 GHz。

现在，如果此实例需要安装在物理服务器上，那么它至少有 8 个运行在 3.6 GHz 的内核。

然而，以下来源指出，有 8 个内核以 2.66 GHz 运行。我想我在理解中遗漏了一些重要的东西。希望有人能指出这一点。

[来源] [http://huanliu.wordpress.com/2010/06/14/amazons-physical-hardware-and-ec2-compute-unit/](http://huanliu.wordpress.com/2010/06/14/amazons-physical-hardware-and-ec2-compute-unit/)

有关服务器规格、机架中的服务器数量、机架数量、数据中心中的机架数量的所有资源……都会对我有很大帮助，因为我正在尝试为 Amazon 建立一个现实的模型。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T21:26:10.537

因为您不允许下一代 CPU 的性能优于亚马逊基于其性能计算的早期（2007 年）CPU 代（具有相同的 GHz 值）

# java - 使用 openjdk-6-jdk 重命名为

> ID：12799675
> 
> 赞同：-3
> 
> 时间：2012-10-09T12:07:03.393
> 
> 标签：java

我已经在我的机器 linux 上安装了 openjdk-6-jdk，renameTo 函数不起作用？你对这个问题有什么想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:46:50.557

> 在运行时，程序不会重命名文件（它不会移动文件）。当程序将在新目标中使用文件时出现错误（当我在我的代码 java 中插入命令 linux mv 时它可以工作！！ ！）

基于这些症状，我会说您正在尝试将文件从一个文件系统重命名为另一个文件系统。

“mv”命令可以做到这一点，但`File.renameTo(...)`不能。（顺便说一句，“重命名”系统调用也不能。）这不是 OpenJDK 错误。相反，它是一个记录在案的限制。[javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#renameTo%28java.io.File%29)是这样说的：

> *“这种方法的行为的许多方面本质上是依赖于平台的：重命名操作可能无法将文件从一个文件系统移动到另一个文件系统，它可能不是原子的，如果具有目标抽象的文件可能不会成功路径名已存在。应始终检查返回值以确保重命名操作成功。*
> 
> *请注意，Files 类定义了 move 方法，以独立于平台的方式移动或重命名文件。”*

* * *

它可以在其他机器上工作的事实可能只是因为移动的源和目标位于同一文件系统中。

# .htaccess - 尝试将所有子目录请求重定向到 root，但它根本不起作用

> ID：12799681
> 
> 赞同：0
> 
> 时间：2012-10-09T12:07:23.330
> 
> 标签：.htaccess, redirect

我想将所有 /wordpress/ 请求重定向到 root 的相同地址。

例如：/wordpress/foo -> /foo

我尝试了通过将其添加到 .htaccess 文件中找到的答案：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^wordpress/.*$ / [R=302]
</IfModule> 
```

但不用说，它只是将直接请求重定向到 /wordpress/ 到 /。

例如，对 /wordpress/foo/ 的请求仍将被视为 /wordpress/foo/。

我尝试了我发现的一切，但没有任何效果。

网址是[http://www.ist118.com/](http://www.ist118.com/)

未正确重定向的示例地址是[http://www.ist118.com/wordpress/%D8%A8%D9%87%D8%AA%D8%B1%DB%8C%D9%86-%D8% B1%D8%A7%D9%87%D9%86%D9%85%D8%A7%DB%8C-%D8%AE%D8%B1%DB%8C%D8%AF-%D8%A7%D8% B2-%D8%A7%D8%B3%D8%AA%D8%A7%D9%86%D8%A8%D9%88%D9%84/%D9%82%DB%8C%D9%85%D8% AA-%D8%AE%D9%88%D8%B1%D8%A7%DA%A9%DB%8C-%D9%87%D8%A7-%D8%AF%D8%B1-%D8%A7% D8%B3%D8%AA%D8%A7%D9%86%D8%A8%D9%88%D9%84/](http://www.ist118.com/wordpress/%D8%A8%D9%87%D8%AA%D8%B1%DB%8C%D9%86-%D8%B1%D8%A7%D9%87%D9%86%D9%85%D8%A7%DB%8C-%D8%AE%D8%B1%DB%8C%D8%AF-%D8%A7%D8%B2-%D8%A7%D8%B3%D8%AA%D8%A7%D9%86%D8%A8%D9%88%D9%84/%D9%82%DB%8C%D9%85%D8%AA-%D8%AE%D9%88%D8%B1%D8%A7%DA%A9%DB%8C-%D9%87%D8%A7-%D8%AF%D8%B1-%D8%A7%D8%B3%D8%AA%D8%A7%D9%86%D8%A8%D9%88%D9%84/)

（由于 utf8 阿拉伯字符，url 被编码）

完整的 .htaccess 内容：

```
RewriteOptions inherit

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule /wordpress/(.*) /$1 [PT]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:17:06.873

尝试这个：

```
RewriteRule /wordpress/(.*) /$1 [PT] 
```

**更新**

我认为您的 .htaccess 应该如下所示：

```
RewriteOptions inherit

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule /wordpress/(.*) /$1 [PT]
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

**更新**

仅供您参考。

如果您只需要透明重定向，则应使用

```
RewriteRule /wordpress/(.*) /$1 [PT] 
```

在这种情况下，重定向将透明，用户仍会在浏览器的地址行中看到旧 URL

但是，如果您希望用户知道 URL 已更改，则应使用

```
RewriteRule /wordpress/(.*) /$1 [R=301] 
```

在这种情况下，浏览器地址行中的 URL 也会发生变化

还有一个：

```
R=301 - is for permanently moved URLs (user's browser will rememeber the new URL)
R=302 - is for temporarely moved URLs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:11:47.147

以下应该这样做：

```
RewriteEngine On
RewriteRule "^wordpress/?(.*)" "/$1" [R=302] 
```

**更新**：在“/​​”之后添加问号以启用重定向，即使没有子路径。

# java - 嘲笑宁静的服务

> ID：12799682
> 
> 赞同：1
> 
> 时间：2012-10-09T12:07:25.113
> 
> 标签：java, rest, junit

我正在尝试 Junit 测试调用一些休息服务的客户端代码。我能够配置 Grizzly 等，但不知道如何模拟服务。你能告诉我怎么做吗？

这是客户端代码

```
ClientResponse response =
    executor.invokeService(url,
                           authorizationToken, MediaType.APPLICATION_XML,
                           MediaType.APPLICATION_XML);
InputStream is = response.getEntityInputStream();
JAXBContext context;
context = JAXBContext.newInstance(Release.class); 
```

您能否告诉我模拟上述网络服务调用的方法。

# mysql - 无法将 Bignum 转换为字符串

> ID：12799684
> 
> 赞同：1
> 
> 时间：2012-10-09T12:07:40.480
> 
> 标签：mysql, ruby-on-rails, ruby, database, migrate

我在 Windows 机器上，我正在尝试使用 ruby​​ 的原生功能制作一个脚手架，但我无法让这个脚手架工作，这是我正在使用的命令：

```
rails generate scaffold Page location_id:int title:varchar text:text type:int 
```

我使用 mysql 作为数据库引擎，当我尝试运行“rake db:migrate”时出现错误：“无法将 Bignum 转换为字符串”。

你们能帮帮我吗。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T12:12:38.867

我相信您需要在脚手架中使用正确的 Rails“类型”，例如整数和字符串：

```
rails generate scaffold Page location_id:integer title:string text:text type:integer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:17:18.043

在推特上收到了答案：

> 您不需要使用 mysql 数据类型，而是使用 ruby​​ 数据类型。varchar 应该是字符串，int 应该是整数

愚蠢的错误，谢谢各位大神解答！

# javascript - 在特定路由处理程序提供响应后调用通用路由处理程序

> ID：12799686
> 
> 赞同：2
> 
> 时间：2012-10-09T12:07:50.600
> 
> 标签：javascript, node.js, routes, express

我正在尝试向基于 Express 的服务器添加身份验证。我注意到路由的一些奇怪行为。

我已经将问题提炼为这个 Express 代码：

```
app.get('/', function (req, res) {
    console.log('this is reached first');
    res.send('Hello');
});

app.get('/', function (req, res) {
    console.log('this is not reached');
});

app.get('*', function (req, res) {
    console.log('this is reached');
}); 
```

在请求“/”时，调用第一个处理程序。它提供响应并且不调用 next()。因此，我很惊讶地看到第三个处理程序（'*'）也被调用了！另一个惊喜是传递给第三个处理程序的响应（'res'）与传递给第一个处理程序的响应不同。（如果我要从第一个处理程序调用 next() ，那么将调用第二个处理程序，并使用相同的响应对象。）

现在是我的真实场景：我想以全局方式处理请求并验证身份验证。但是，某些路由应该对未经身份验证的用户仍然可用。我的解决方案基于[Zikes 的回答](https://stackoverflow.com/questions/7951810/check-each-node-js-request-for-authentication-credentials)。我首先路由了“自由”路径。然后我为所有（'*'）添加了一个路由处理程序。如果用户通过身份验证，它将调用 next()，否则调用 next(err)。以下是所有“受限”路线。最后，我自己使用 app.use 的错误处理程序。它看起来像这样：

```
app.use(app.router);
app.use(function(err, req, res, next) {
    console.log('An error occurred: ' + err);
    res.send(401, 'Unauthorized');
});

app.get('/', function (req, res) {
    res.send('Hello all');
});

app.all('*', function (req, res, next) {
    if (req.user) {
        next(); // authorized
    } else {
        next(new Error('401')); // unauthorized
    }
});

app.get('/members', function (req, res) {
    res.send('Hello member');
}); 
```

这工作得很好，阻止了对“/成员”的访问。但是，它有一个错误：即使在访问非限制路径（'/'）时也会发生身份验证检查和错误处理。发送预期响应后，错误处理程序会尝试发送 401 错误响应。后者不会被发送，但代码不应运行。

此外，这种机制的副作用是未经身份验证的用户会收到不存在页面的 401 错误。在某些情况下，我可能想返回 404。但现在我只是在推动它...

我有两个问题：

1.  这种行为是错误吗？是否应该调用通用处理程序而不调用下一个？
2.  什么是挂钩许多但不是所有路线的好解决方案，而不必单独标记它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:00:30.300

对于第一个问题，我的猜测是浏览器发送了多个请求。

例如，当您浏览到`http://localhost:3000/`Chrome 时，还会请求`http://localhost:3000/favicon.ico`

您可以打印被捕获的请求，如下所示：

```
app.get('*', function (req, res) {
    console.log('this is reached');
    console.log('url ' + req.url );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T06:09:39.010

首先，您在回家时可能有两个请求（favicon.ico）。用于`app.use(express.logger('dev'))`记录请求。此外，您可以尝试阻止该路径：

```
app.use('/favicon.ico', function(req, res) {
  console.log('FAVICON')
  res.send(404)
} 
```

其次，你想处理你的错误。发送错误的好方法：

```
var err = new Error('this is my error message.')
err.status = 404 // You want to send a "Not Found" page
next(err)

app.use(function(err, req, res, next) {
  var status = err.status
  if (status === 404) res.send(404, 'Page not found.');
  else res.send(500, 'Something went wrong.');
}) 
```

所有处理的错误都应该有一个状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T17:44:08.463

```
app.get('/', function(req, res, next) {
    console.log('this is reached first.');
    next();
}, function (req, res) {
    console.log('this is reached last.');
    res.send('Hello all');
}); 
```

我通常会这样构建它：

```
var auth = require('../modules/authenticate');

app.get('/', auth.requireLogin, routes.index.get);
app.delete('/items/:id', auth.requireLogin, auth.permission.item.delete, routes.item.delete); 
```

# php - Cakephp 文本区域

> ID：12799689
> 
> 赞同：6
> 
> 时间：2012-10-09T12:08:01.393
> 
> 标签：php, html, forms, cakephp, cakephp-2.x

我正在使用 CakePHP 2.2.3。我有一个没有表格但有验证规则的模型的联系表格。

我的问题是，如何告诉 CakePHP 输入类型是 textarea ？我可以使用`$this->Form->textarea()`，但我注意到当我使用它时，它不会创建正确的 HTML 来报告验证错误。如果我使用`$this->Form->input()`它只会创建一个正常的输入类型文本。

它应该创建如下内容：

```
<div class="input email required"><input name="data[Quote][email]" required="1" type="email" id="QuoteEmail"/></div> 
```

但相反，它创建了类似的东西：

```
<textarea name="data[Quote][company_description]" id="QuoteCompanyDescription"></textarea> 
```

注意没有`<div class="input email required"></div>`，我认为这是 CakePHP 用来注入验证错误的 DOM 元素。

我想知道实现这一目标的最佳方法是什么。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-09T12:09:57.390

我倾向于将 input() 用于所有类型，然后在选项数组中指定..

```
$this->Form->input('company_description', array('type' => 'textarea')); 
```

[http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T12:17:09.513

尝试以下还包括您指定为选项的类

```
echo $this->Form->input('company_description', array('type' => 'textarea', 'escape' => false,'class' =>'input email required'); 
```

[http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#automagic-form-elements](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#automagic-form-elements)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-10T09:45:41.640

```
<?= $this->Form->input('comment', ['type' => 'textarea', 'label' => false, 'placeholder'=> 'Comment here', 'escape' => false,'class' =>'comment', 'rows' => '10', 'cols' => '20']); ?> 
```

创建`textarea`具有指定行数和列数的，而不仅仅是标准文本区域。

# python - 使用列表理解读取文件中的所有行

> ID：12799694
> 
> 赞同：1
> 
> 时间：2012-10-09T12:08:10.553
> 
> 标签：python, file-io, list-comprehension

我有一个简单的问题，如果我在 stackoverflow 中发帖，我很抱歉。我是 python 的新手，我不记得我如何阅读列表压缩 ax,y,z

我的文件是 ax,y,z 文件，其中每一行都是一个点：

```
x1,y1,z1
x2,y2,z2
x3,y3,z3
........

inFile = "Myfile.las"

with lasfile.File(inFile, None, 'r') as f:
     # missing part
     points =[] 
```

我希望保存一个只有 x 和 y 的对象

在此先感谢，很抱歉这个简单的问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T12:09:57.120

您想要一个 x 和 y 坐标列表，这很容易：

```
with lasfile.File(inFile, None, 'r') as f:
     # missing part
     points = [line.split(',')[:2] for line in lasfile] 
```

如果这些坐标是整数，您可以通过快速调用将它们转换为 python int（来自 str）`map()`：

```
points = [map(int, line.split(',')[:2]) for line in lasfile] 
```

在 python 3 中，`map`生成器在哪里，最好使用嵌套列表推导：

```
points = [[int(i) for i in line.split(',')[:2]] for line in lasfile] 
```

这将产生一个列表列表：

```
[[x1, y1], [x2, y2], ...] 
```

# xpath - Selenium IDE：希望链接的 X 路径在不同的窗口中打开，但所有广告的 id、类、标识符都相同

> ID：12799698
> 
> 赞同：1
> 
> 时间：2012-10-09T12:08:27.807
> 
> 标签：xpath, selenium, selenium-rc, selenium-ide

如何为同一页面上的广告链接数量编写 X-path 并且在 HTML 代码中没有唯一的 id 和唯一的名称来区分，我写在下面，请为“点击”广告提供唯一值并在新窗口中打开广告，由于所有广告都有 class="ad" 并且值是动态的，请帮帮我，因为我想一一打开所有广告并验证其中的数据我只展开了两个广告，所有其他广告都折叠了

例子：

```
<div class="result hlisting">

<div class="result hlisting">

<div class="info">

<h2>

#11856006:

<a class="ad" href="http://www.performancecars.ca/index.php/details/11856006/2009-Toyota-Camry.html">2009 Toyota Camry</a>

</h2>

<span class="price"> 14.584 CAD </span>

<p class="address">

<b>Date: </b>

2012-10-09 13:29:01 

</p>

</div>

<p class="description">

<p class="data">

<div class="clear"> </div>

<hr>

</div>

<div class="result hlisting">

<div class="result hlisting">

<div class="info">

<h2>

#11930827:

<a class="ad" href="http://www.performancecars.ca/index.php/details/11930827/2010-Mazda-MAZDA3.html">2010 Mazda MAZDA3 GS ONE OWNER, SU.</a>

</h2>

<span class="price"> 14.200 CAD </span>

<p class="address">

</div>

<p class="description">

<p class="data">

<div class="clear"> </div>

<hr>

</div>

<div class="result hlisting">

<div class="result hlisting"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:30:45.130

```
List<WebElement> allLinks=driver.findElements(By.className("ads"));
for(WebElement e:ele)
{
    e.click();  //click on ad link
    //do your operations on particular ad page
    //go to home page again
} 
```

The above logic will click on every link available on that page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:20:02.803

如果您知道链接的文本，您可以尝试类似

```
selenium.click(selenium.getAttribute("//*[text()='" + link + "']/ancestor::a@href") + " _blank"); 
```

要在新窗口中打开，您需要附加`_blank`到 href。

如果您想点击页面中的所有链接，无论文本是什么，只需遍历 xpath 计数

```
selenium.click(selenium.getAttribute("xpath=(//a)[" + iterator + "]@href") + " _blank"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T06:52:15.933

对于链接，你可以简单地通过写作来定位，链接='链接的文本'......它工作正常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T16:13:36.490

我会尝试使用 css 选择器：

```
String toyotaCss = "a[href='http://www.performancecars.ca/index.php/details/11856006/2009-Toyota-Camry.html']"
String mazdaCss="a[href='http://www.performancecars.ca/index.php/details/11930827/2010-Mazda-MAZDA3.html']"; 
```

希望这对你有用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T15:09:01.383

您可以使用链接名称 -

```
link, '2009 Toyota Camry' 
link, '2010 Mazda MAZDA3 GS ONE OWNER, SU.' 
```

# javascript - Javascript 'this' 与对象名称

> ID：12799702
> 
> 赞同：10
> 
> 时间：2012-10-09T12:08:40.527
> 
> 标签：javascript, object, this

`this`一个由好奇心引发的问题，如果我有以下代码，那么通过而不是`user`在方法中调用属性有什么好处（不仅仅是简单性）`show_name`？

```
var user = {

    name : 'John Doe',

    show_name : function(){

        alert(this.name);

        // OR

        alert(user.name);
    }
}; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T12:13:09.050

如果你看一下这个例子，区别就很明显了。它创建第二个对象并相应地设置原型。

```
var user = {

    name : 'John Doe',

    show_name : function(){

        alert(this.name);

        // OR

        alert(user.name);
    }
};

user2 = Object.create( user );
user2.name = "someone else";

user2.show_name(); 
```

这里`this.name`指的是当前对象的`name`属性，而`user.name`总是指原始`name`属性。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-09T12:10:27.953

通过使用`this`，您可以确保在更改变量名称后，例如 from`user`到`something`您的代码仍然有效。

除此之外，我想（在某些浏览器上）可能还会有一些性能提升，因为`user.name`浏览器必须在您的函数之外的上下文中查找，同时使用`this.name`当前上下文。

* * *

**示例代码**

```
var user = {
    name : 'John Doe',
    show_name : function(){
        alert(user.name);
    }
};

var something = user; // Passing the object to another variable
user = null;          // Make the user variable point to something else

something.show_name(); 
```

如果您运行上面的代码，您将在以下行中遇到错误：

```
alert(user.name); // <-- user is null, so this will produce the following Error: 
```

> 未捕获的类型错误：无法读取 null 的属性“名称”

现在，如果我们切换到`this`而不是`user`，我们的代码将起作用：

```
var user = {
    name : 'John Doe',
    show_name : function(){
        alert(this.name);
    }
};

var something = user; // Passing the object to another variable
user = null;          // Make the user variable point to something else

something.show_name(); 
```

上面的代码将起作用，因为`this`它将指向执行该`show_name`函数的对象（这可以在 . 点方法符号的左侧找到，它是 指向的对象`something`）。

* * *

**参考：**

要了解有关执行上下文（在我们的示例中为对象）如何影响 this 绑定的更多信息，请阅读**Kyle Simpson**的精彩书籍[You Don't Know JS](https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/README.md)的[这段摘录](https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/this%20%26%20object%20prototypes/ch2.md#implicit-binding)。

 **以下章节详细解释了`this`在各种情况下的行为方式（但整个系列都值得一读！）：

[第一章：这个还是那个？](https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/this%20%26%20object%20prototypes/ch1.md)

[第 2 章：这一切现在都说得通了！](https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/this%20%26%20object%20prototypes/ch2.md)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-09T12:11:13.850

您可以在多个地方使用相同的功能，并使其具有上下文相关性。

```
function foo() {
  alert(this.name);
}

var a = { alert: foo, name: "A" };
var b = { alert: foo, name: "B" };
a.alert();
b.alert(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-09T13:23:48.760

是使用`this`还是函数名取决于函数的调用方式。

函数的`this`值由函数的调用方式或*bind*设置，所以如果函数总是作为合适对象的方法调用，请使用`this`. 但是，如果它可以以任何其他方式调用，或者`this`应该只引用特定对象，请使用*bind*或对象名称。

例如，给定 OP 示例，请考虑：

```
var x = user.showName;
x(); 
```

在上面，`showName`在没有设置它的情况下调用它`this`，所以它默认为全局对象，并且`this.name`在函数内可能不会是预期的。

鉴于文本编辑器中相当强大的搜索和替换功能的可用性，更改函数名称并不是一个特别繁重的问题。

顺便说一句，这个问题经常被问到。没有“正确”的答案，只有在某些情况下如何做出选择的建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T12:12:07.637

如果要制作对象的多个副本，则需要`this`引用当前对象。使用名称将引用默认对象，而不是您正在使用的副本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T12:13:22.860

`this`这里指定对象是当前名称空间的一部分，并且可以在对象内部访问..假设您的对象名称从 更改`user`为`newUser`将没有任何依赖关系并消除任何耦合问题..

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-03-18T16:36:32.527

如果使用 jQuery`this`引用 jQuery 对象。所以，我的选择是根本不使用`this`。

```
var user = {

name : 'John Doe',

alertName : function(){

    //  alert(this.name); //never

     alert(user.name);
  }
};
showName : function(){
    $('#show').click(function(){
        //this here references jQuery object 
        $('#username').val(user.name);
    });

}; 
```

此外，对象字面量通常不应该用于创建多个对象，因此，使用`this`内部对象字面量与使用对象变量名相比没有任何好处。**

# php - 将当前时间和日期设置为变量后如何设置 jpeg 扩展名？

> ID：12799706
> 
> 赞同：2
> 
> 时间：2012-10-09T12:09:03.460
> 
> 标签：php, image-uploading

我正在将图像上传到文件夹名称“上传”。然后我正在更改图像的名称和扩展名。我正在使用默认时区获取当前时间和日期现在我正在尝试在获取的日期和时间之后将图像扩展名设置为“jpeg”但没有给出结果我把我的代码放在这里

我想当时我上传图片时我的文件名是“NEWYORK.JPG”但是上传图片后我想更改文件名是“9/10/2012/05:31:15.jpeg”从获取当前时间和日期设置默认时区。

> ```
> date_default_timezone_set('Asia/Kolkata');
> $imagename = date('d/m/Y-h:i:s', time());
> $imagename=basename($imagename,".jpg");
> echo $filename = $imagename;
> $upload   = $_FILES['ctgimage'];
> $target_path = "upload/";
> 
>  echo $target_path .= $filename . "." . path_info($upload["name"], PATHINFO_EXTENSION);
>   if(move_uploaded_file($upload["tmp_name"],$target_path))
>   {
>           echo "uploaded successfully";           $cname=$_POST['ctgname'];
>           mysql_query("insert into category(ctg_name,ctgimage) 
>                values('$cname','$target_path')");
> 
>   } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:13:42.523

一些错误

*   应该`pathinfo`不是`path_info`
*   使用有效的文件名，例如`d-m-Y`文件`h.i.s`的文件夹
*   重复次数过多
*   通过转义避免 SQL 注入

例子 ：

```
date_default_timezone_set('Asia/Kolkata');

$target_path = "upload/";
$imageDir = date('d-m-Y', time());
$imageName = date('h.i.s', time());

$upload = $_FILES['ctgimage'];
$uploadExtention = pathinfo($upload["name"], PATHINFO_EXTENSION);

if (! is_dir($target_path . "/" . $imageDir)) {
    mkdir($target_path . "/" . $imageDir);
}

$target_path = "$target_path/$imageDir/$imageName.$uploadExtention";
$cname = mysql_real_escape_string($_POST['ctgname']);

if (move_uploaded_file($upload["tmp_name"], $target_path)) {
    echo "uploaded successfully";

    mysql_query("insert into category(ctg_name,ctgimage)
    values('$cname','$target_path')");
} 
```

PHP 文档`mysql_*****`

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:14:38.570

我建议您使用 UNIX 时间戳而不是日期来命名您的文件。此外，我不确定操作系统是否允许文件名包含像“/”这样的字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:15:53.547

我认为您无法命名该文件`9/10/2012/05:31:15.jpeg`，因为当您尝试保存时，PHP 会将斜杠解释为文件夹目录。

如果我错了，请纠正我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:18:09.327

目标目录必须存在。

还; 仅作为建议：使用 Y/m/d/... 使文件夹结构更好地排序/遍历/保持顺序。

```
├── 2011
│   └── 12
│       ├── 03/
│       ├── 07/
│       ├── 13/
│       ├── 16/
│       └── 24/
└── 2012
    ├── 02
    │   ├── 14/
    │   └── 20/
    └── 05
        └── 13/ 
```

和/或。IE

```
2012-03-11_13.26.13.jpeg  
2012-03-11_14.26.13.jpeg  
2012-07-14_13.26.13.jpeg 
```

代替：

```
13-11-2012_13.26.13.jpeg  
14-07-2012_13.26.13.jpeg  
14-11-2012_14.26.13.jpeg 
```

如果两个图像具有相同的时间，您还需要附加一个唯一的字符串 -`move_uploaded_file()`如果存在，则覆盖目标文件。

同样如上所述，您不能在文件名中使用正斜杠。我将其解释为文件夹结构的一部分。如果你想伪造它，你可以使用 Unicode 0x206F "⁄" - 但不推荐。

# asp.net - 我已经在 windows server 2008 中为 .net 应用程序创建了 Webserver

> ID：12799709
> 
> 赞同：-3
> 
> 时间：2012-10-09T12:09:15.957
> 
> 标签：asp.net, web-services, webserver, windows-server-2008

我已经在 windows server 2008 中为 .net 应用程序创建了 Web 服务器。现在我想运行我的网站。当我将我的网站放入`C:\inetpub\wwwroot`并通过我的 ip 地址访问时，它会出错，但这种方法对于简单的 html 页面工作正常。

```
<compilation strict="false" explicit="true" targetFramework="4.5 /> 
```

如何在我自己的服务器上成功运行我的 asp.net web 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:45:38.973

将文件复制到 wwwroot 文件夹对于 asp.net 来说是不够的。您必须将 iis 配置为托管 asp.net，在 iis 中将您的应用程序标记为应用程序，设置应用程序池等。

要设置/检查您的 iis 配置，请按照本文中的步骤操作：http: [//msdn.microsoft.com/en-us/library/bb763178 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb763178(v=vs.100).aspx)

要在 iis 中正确部署应用程序，请执行以下操作：http: [//www.codeproject.com/Articles/28693/Deploying-ASP-NET-Websites-on-IIS-7-0#DeployonIIS7](http://www.codeproject.com/Articles/28693/Deploying-ASP-NET-Websites-on-IIS-7-0#DeployonIIS7)

# c# - 在 WP 7 中序列化数据时的问题

> ID：12799711
> 
> 赞同：1
> 
> 时间：2012-10-09T12:09:27.110
> 
> 标签：c#, windows-phone-7, serialization

我有一个需要序列化并存储在独立存储设置（wp7）中的自定义子类。我有需要序列化的子类，并且该类扩展了它的基类所以我正在序列化两个类，当序列化类时，我正在使用 [ DataContract] 到类名​​和 [DataMember] 到变量，同时我将所有变量公开，当尝试将数据保存在 IsolatedStorageSettings 中时，我得到了如下异常

> 数据协定类型 XXXX 不可序列化，因为它不是公共的。公开类型将修复此错误。

所以我用谷歌搜索并进入添加组件的概念

> [程序集：System.Runtime.CompilerServices.InternalsVisibleTo("System.Runtime.Serialization")]

在我的类文件中，最后数据对象被保存，但是当停用应用程序时，数据被正确保存，当激活应用程序时，我正在获取对象，但是我恢复的对象中的变量是空状态，我想要获取变量及其值。我是否遗漏了任何导致我保存的对象中的变量为空的内容？

我在下面更新的代码

```
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;

using Microsoft.Phone.Controls;

using System.Diagnostics;
using System.Runtime.Serialization;
using System.ComponentModel;

[assembly: System.Runtime.CompilerServices.InternalsVisibleTo("System.Runtime.Serialization")]

namespace MyApp.Data
{

    [DataContract]
    public class MyDetail : MyDataSet,INotifyPropertyChanged
    {

        public MyDetail (String data)
        {

            ParseResponse(data);
        }

        public MiniStatementDetail(PhoneApplicationPage context)
        {
            _context = context;
        }
        public void performServerRequest(String mobno, String custno, String uid, String AccNo)
        {

            myProtocol request = this.getProtocol(4);               //Pass Service ID
            request.Parameters.append("mobno", mobno);
            request.Parameters.append("custno", custno);
            request.Parameters.append("uid", uid);
            request.Parameters.append("AccNo", AccNo);

            request.Submit();
        }

        public override void ResponseReceived(String response)
        {
           //         
            MyDetail data = new MyDetail (response);
            ResponseReceived(data);
        }

    public event PropertyChangedEventHandler PropertyChanged;
    public void NotifyPropertyChanged(string propName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(
                this,
                new PropertyChangedEventArgs(propName));
        }
    }
    }
} 
```

以及我在下面添加的子类

```
using System;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Ink;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Collections.Generic;
using MyApp.Lib;
using System.Windows.Navigation;
using Microsoft.Phone.Controls;
using System.Diagnostics;
using MyApp;

using System.Xml.Serialization;//--Added for testing Purpose -Rakesh (10/4/2012)
using System.Runtime.Serialization;
using System.ComponentModel;//--Added for testing Purpose -Rakesh (10/4/2012)

using MyApp.config;

//[assembly: System.Runtime.CompilerServices.InternalsVisibleTo("System.Runtime.Serialization")]

namespace MyApp.data
{
    [DataContract]//--Added for testing Purpose -Rakesh (10/4/2012)
    public class MyDataSet : INotifyPropertyChanged
    {

        [DataMember]
        public List<String[]> _data;
        [DataMember]
        public String[] headers;
        [DataMember]
        public String[] headersAr;
        [DataMember]
        public NameValueCollection _params;
        [DataMember]
        public NameValuePair _params1;
        [DataMember]
        public String _status;
        [DataMember]
        public String _refno;
        [DataMember]
        public String _ptoken;
        [DataMember]
        public String _acid;
        [DataMember]
        public String _branchid;
        [DataMember]
        public String _applicationid;
        [DataMember]
        public String _statusDesc;
        [DataMember]
        public const String HEADER_SEPARATOR = ",";
        [DataMember]
        public const char HEADER_SEPARATOR_SEMI = ';';
        [DataMember]
        public const String ROW_SEPARATOR = "@";

        public event EventHandler OnRequestCompleted;
        [DataMember]
        public PhoneApplicationPage _context;
        [DataMember]
        public NameValueCollection _servicevalues;
        [DataMember]
        public List<String[]> parseddemo;

        public List<String[]> getDataRows()
        {
            return _data;
        }

        public String[] getDataRow(int index)
        {
            return (String[])_data[index];
        }

        public String getToken() { return _ptoken; }

        public String getStatus() { return _status; }

        public String getRefNo() { return _refno; }

        public String[] getHeaders() { return headers; }

        public String getAccountID() { return _acid; }

        public String getApplicationID() { return _applicationid; }

        public String getStatusDesc() { return _statusDesc; }

        public String getHeader(int headerConstant)
        {
            return headers[headerConstant];
        }

        public void ParseResponse(String response)
        {
            App.endResponse = response;
            Debug.WriteLine("Parse Response >>>" + response + "::>>::");
             if (_status.Equals("200"))
            {
                //Common.DisplayAlert(_params.getValueByName("error"));
                LoggedUser.doLogout();
                _context.NavigationService.Navigate(new Uri("/Design/LoginLanding.xaml", UriKind.RelativeOrAbsolute));
                return;
            }
            _statusDesc = _params.getValueByName("StatusDesc");
            _refno = _params.getValueByName("refno");
            _ptoken = _params.getValueByName("ptoken");
            _acid = _params.getValueByName("acid");
            _branchid = _params.getValueByName("branchid");
            _applicationid = _params.getValueByName("ApplicationId");
            _data = ParseResponse(response, "Stmt");

        }

        public List<String[]> ParseResponse(String response, String param)
        {
            List<String[]> data = new List<String[]>();
            String paramValue = _params.getValueByName(param);
            if (!String.IsNullOrEmpty(paramValue))
            {
                String[] dataRows = paramValue.Split(ROW_SEPARATOR.ToCharArray()[0]);
                for (int i = 0; i < dataRows.Length; i++)
                {
                    data.Add(dataRows[i].Split(';'));
                }
            }
            return data;
        }

        public List<String[]> getParamValueBasedData(String paramValue)
        {
            List<String[]> data = new List<String[]>();
            if (paramValue == null) paramValue = "";
            if (!String.IsNullOrEmpty(paramValue))
            {
                String[] dataRows = paramValue.Split(ROW_SEPARATOR.ToCharArray()[0]);
                for (int i = 0; i < dataRows.Length; i++)
                {
                    data.Add(dataRows[i].Split(';'));
                }
            }
            return data;
        }

        public String[] getColumArray(int colid, String firstOption)
        {
            return getColumArray(_data, colid, firstOption);
        }

        public String[] getColumArray(int colid)
        {
            return getColumArray(_data, colid);
        }

        public String[] getColumArray(List<String[]> data, int colid)
        {
            String[] retValues = new String[data.Count];
            for (int i = 0; i < data.Count; i++)
            {
                retValues[i] = ((String[])data[i])[colid];
            }
            return retValues;
        }

        public String[] getColumArray(List<String[]> data, int colid, String firstOption)
        {
            String[] retValues = new String[data.Count + 1];
            retValues[0] = firstOption;
            for (int i = 0; i < data.Count; i++)
            {
                retValues[i + 1] = ((String[])data[i])[colid];
            }
            return retValues;
        }

        public String getParam(String name)
        {
            return _params.getValueByName(name);
        }

        public void OnServerResponse(object sender, EventArgs e)
        {
            myProtocol request = (myProtocol)sender;
            Debug.WriteLine("OnServerResponse::MBDataSet:" + request.Response);
            ResponseReceived(request.Response);
        }

        public myProtocol getmyProtocol(int serviceId)
        {
            myProtocol request = new myProtocol(serviceId);
            request.OnRequestCompleted += new EventHandler(OnServerResponse);
            return request;
        }

        public virtual void ResponseReceived(String response)
        {
        }

        {
            if (OnRequestCompleted != null)
            {
                OnRequestCompleted.Invoke(data, EventArgs.Empty);
            }
        }
        public event PropertyChangedEventHandler PropertyChanged;
        public void NotifyPropertyChanged(string propName)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(
                    this,
                    new PropertyChangedEventArgs(propName));
            }
        }
    }

} 
```

忘记了保存和恢复过程。我将 mycustom 对象保存为

```
var settings = IsolatedStorageSettings.ApplicationSettings;

            if (settings.Contains("SimpleData"))
            {
                settings["SimpleData"] = requiredObj
            }
            else
            {
                settings.Add("SimpleData", requiredObj);

            } 
```

我正在恢复为下面的 gn

```
 try
           {
               var settings = IsolatedStorageSettings.ApplicationSettings;
               MyDetail demoObj= null;
               if (settings.Contains("SimpleData"))
               {
                   Debug.WriteLine("Data Present");
                   settings.TryGetValue<MyDetail >("SimpleData", out demoObj)
                   requiredObj= demoobj;

               }
               else
               {
                   Debug.WriteLine("Data Absent");
               }

           }
           catch (Exception ex)
           {
               Debug.WriteLine("Exception while retreving datas" + ex);
           } 
```

问题的图片如下 ![在此处输入图像描述](../Images/144f4be3018e250598bad3672644bca6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:32:11.217

你看过下面的“序列化指南”吗？ [http://msdn.microsoft.com/en-us/library/6exf3h2k.aspx](http://msdn.microsoft.com/en-us/library/6exf3h2k.aspx)

**类**和**属性**是否指定为公共的？它包含：“1.CONSIDER 将您的类型的数据成员标记为**公共**，如果该类型可以在部分信任下使用。在完全信任的情况下，数据合约序列化程序可以序列化和反序列化非公共类型和成员，但只有公共成员可以序列化和反序列化部分信任。”

否则粘贴代码，我们可能会找到答案。此外，最好**调试**并检查您是否真的存储并从隔离存储中获取一些数据？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T15:49:21.717

对于任何可以提供帮助的人（请参阅[使用 DataContractSerializer 序列化时的 SecurityException](https://stackoverflow.com/questions/10526738/securityexception-when-serializing-with-datacontractserializer)和[http://systemmetaphor.blogspot.fr/2010/04/silverlight-serialization-avoiding.html](http://systemmetaphor.blogspot.fr/2010/04/silverlight-serialization-avoiding.html)）

```
[assembly: InternalsVisibleTo("System.Runtime.Serialization, PublicKey="
+ "00240000048000009400000006020000002400005253413100040000010001008D56C76F9E86493"
+ "83049F383C44BE0EC204181822A6C31CF5EB7EF486944D032188EA1D3920763712CCB12D75FB77E"
+ "9811149E6148E5D32FBAAB37611C1878DDC19E20EF135D0CB2CFF2BFEC3D115810C3D9069638FE4"
+ "BE215DBF795861920E5AB6F7DB2E2CEEF136AC23D5DD2BF031700AEC232F6C6B1C785B4305C123B"
+ "37AB")]
[assembly: InternalsVisibleTo("System.ServiceModel.Web, PublicKey="
+ "00240000048000009400000006020000002400005253413100040000010001008D56C76F9E86493"
+ "83049F383C44BE0EC204181822A6C31CF5EB7EF486944D032188EA1D3920763712CCB12D75FB77E"
+ "9811149E6148E5D32FBAAB37611C1878DDC19E20EF135D0CB2CFF2BFEC3D115810C3D9069638FE4"
+ "BE215DBF795861920E5AB6F7DB2E2CEEF136AC23D5DD2BF031700AEC232F6C6B1C785B4305C123B"
+ "37AB")]
[assembly: InternalsVisibleTo("System.Runtime.Serialization.Json, PublicKey="
+ "00240000048000009400000006020000002400005253413100040000010001008D56C76F9E86493"
+ "83049F383C44BE0EC204181822A6C31CF5EB7EF486944D032188EA1D3920763712CCB12D75FB77E"
+ "9811149E6148E5D32FBAAB37611C1878DDC19E20EF135D0CB2CFF2BFEC3D115810C3D9069638FE4"
+ "BE215DBF795861920E5AB6F7DB2E2CEEF136AC23D5DD2BF031700AEC232F6C6B1C785B4305C123B"
+ "37AB")] 
```

# oracle - 如何在 Oracle 包中并行运行过程？

> ID：12799712
> 
> 赞同：2
> 
> 时间：2012-10-09T12:09:29.803
> 
> 标签：oracle, stored-procedures, parallel-processing, package

> **可能重复：**
> [我们可以在 PL/SQL 中使用线程吗？](https://stackoverflow.com/questions/576802/can-we-use-threading-in-pl-sql)

我有一个包，其中包含一堆捆绑在一起的程序；该包旨在从一个主要的 proc 调用中执行，然后调用其他的。在私有过程中，我有更新（通过合并）表的查询。虽然这些过程/查询更新同一个表，但它们不会更新相同的列。我希望能够并行调用这些 proc 以获得性能，因为它们不应该相互干扰。我该怎么做？

# php - 我需要找到正则表达式来查找字符串

> ID：12799714
> 
> 赞同：1
> 
> 时间：2012-10-09T12:09:40.560
> 
> 标签：php, regex, netbeans

我创建了一个正则表达式：`^\\[(.*)\\]$`

查找所有字符串 [....] 例如。[一般的]

我需要用 ['general'] 替换它

但它不工作

在 Netbeans php 中，我也需要像 general_offline 这样的小写字母

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:23:42.750

我看到两件事可能会造成问题

1.  您使用了锚点`^`和`$`. 它们匹配字符串的开头和结尾，如果您在较大的文本中搜索，它将找不到它们。如果是这样，只需删除它们：

    ```
    \\[(.*)\\] 
    ```

2.  `.*`是贪婪的。这意味着`\\[(.*)\\]`将从第一个开头匹配`[`到最后一个结尾`]`。如果是这样`?`，在量词之后添加一个以将匹配行为更改为“惰性”。

    ```
    \\[(.*?)\\] 
    ```

[在 Regexr 上](http://regexr.com?32dcg)查看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:37:08.373

奇怪的是这个作品：`(\[.*])`几乎是因为我需要在没有 [ ] 的情况下找到里面

# scheme - 使用抽象

> ID：12799715
> 
> 赞同：0
> 
> 时间：2012-10-09T12:09:46.340
> 
> 标签：scheme, predicate, abstraction

如果谓词位？如果项目是 1 或 0，则返回 #t

```
(define bit?
  (lambda (item)
    (if (equal? item 0)
        #t
    (if (equal? item 1)
        #t
        #f)))) 
```

我如何使用比特？在一个新程序中，所有位？如果列表中的所有项目都是位，则返回#t？
我无法弄清楚
这是我尝试过的。

```
 (define all-bits?
      (lambda (ls)
        (cond
          [(null? ls) #t]
          [(equal? (car ls all-bits?)) bit?]
          [else (all-bits? ls (cdr ls))])) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:38:04.180

您的**第二**个条件是完全错误的。它在语法上是错误的；**平等的？**接受两个参数，**car**只接受一个，**bit**也需要一个，但您分别传递了 1、2 和 0 参数。这也没有意义：您的辅助功能**位？**旨在测试单个项目，但您没有用它测试任何东西。为什么是全比特？在那条线上？

第三条**cond**行在语法上是错误的：同样，您将两个参数传递给一个只接受一个参数的函数。

你需要说'如果第一个原子有点**，**第二个原子有点**，并且**（依此类推，依此类推），则返回true。您的代码中根本没有表示该结构。

我还争辩说，对于空列表，所有位都应该返回 false，如果你有一个包含单个位的列表，但可能`(all-bits? '()) ==> #t`在原始课程问题中指定，则返回 true。

按照你的方式去做（对于空列表是真的），你的**cond**应该只有两个语句；

```
(cond
   ((null? l) #t)
   (else ("Return true if the first atom is a bit **and** if the second atom is a bit **and** the third (and so on, and so on, recursively)")) 
```

按照我的方式做，它看起来像这样：

```
(cond
   ((null? l) #f)
   ((and (null? (cdr l)) ("something here to test that (car l) is a bit")) #t)
   (else ("Return true if the first atom is a bit **and** if the second atom is a bit **and** the third (and so on, and so on, recursively)")). 
```

应该清楚引号中的位不是真正的代码。

我还没有为你做功课，但我希望我的所有评论都能让你更清楚地知道你必须做什么。即使您尝试制作您的版本而不是我的版本，我的版本实际上也包含了一个重要提示，告诉您应该如何构建最后一行。

如果您尚未了解如何使用**and**，请使用嵌套**if**语句。

# windows - 使用 Powershell 在文件夹上更改只读 - 灰显

> ID：12799718
> 
> 赞同：4
> 
> 时间：2012-10-09T12:09:53.437
> 
> 标签：windows, powershell, windows-server-2008-r2

**`Powershell`**我正在尝试使用 , 删除或更改文件夹上的只读属性**`Windows server 2008 R2`**。我真的在这个问题上苦苦挣扎。
我什至尝试过**`attrib.exe`**，但灰色标记不会在“文件夹属性”中消失。
有没有人有同样的问题？无论我做什么，它仍然是灰色的。

文件夹的只读属性是灰色的，但是文件夹内的文件不是只读的。奇怪的。

最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:20:10.177

据我所知，这是一个 UI“错误”，即使使用命令行，清除复选框也不会修复它。

请参阅此 KB，没有提到的解决方法对我有用。 [http://support.microsoft.com/kb/326549](http://support.microsoft.com/kb/326549)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T18:24:32.143

就我而言，我的问题是我需要删除目录中子文件的只读属性。然后我可以对父目录做一些事情（在我的情况下删除它）：

```
dir -r $PrePackageDirectory |% {if ($_.PSIsContainer -ne $true){$_.IsReadOnly = $false}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-27T19:13:39.067

刚刚在 Windows 10 机器上遇到了这个问题，以前操作系统中的文件夹被标记为只读。我`attrib -r c:\FolderName`从 powershell 提示符中删除了该属性。请注意，文件夹名称后面没有斜杠。这来自知识库文章，但 powershell tab+autocomplete 包含尾部斜杠，并且该命令对我不起作用。

# upload - 如何将项目上传到 Github

> ID：12799719
> 
> 赞同：260
> 
> 时间：2012-10-09T12:09:52.827
> 
> 标签：upload, github, repository, git-bash, git-gui

检查[将我的项目上传到 github](https://stackoverflow.com/q/6674752/5740428)后，我仍然不知道如何将项目上传到我的 Git Hub 存储库。

我是 GitHub 的新手，我不知道该怎么做。我创建了一个存储库，但我想将我的项目上传到它。

我在存储库页面上查看了某种上传按钮，但我没有看到任何类似的东西。

到目前为止，我已经查看了提供的链接，但我仍然无处可去。他们提到命令行，是 Windows 命令行还是 Git Bash？因为我什么都做不了。

我也尝试过使用 Git GUI，但是当我选择我想要的文件夹时，它说它不是 Git 存储库……是否需要压缩？我尝试在`.gitconfig`文件夹中添加文件，但没有任何区别。

* * *

## 回答 #1

> 赞同：364
> 
> 时间：2012-10-09T12:27:48.093

自从我写了这个答案后，github 发布了一个本地[Windows 客户端](http://windows.github.com/)，它使以下所有步骤变得多余。

您还可以使用[sourcetree](http://sourcetreeapp.com/download/)在 Windows 上获取 git 和 mercurial 设置。

* * *

以下是您在 Windows 中的操作方式：

1.  如果您没有安装 git，请参阅[这篇文章](https://help.github.com/articles/set-up-git)了解如何设置它。
2.  打开 Windows 命令提示符。
3.  在命令提示符下切换到源代码所在的目录。
4.  首先，在此目录中创建一个新的存储库`git init`。这将*显示“Initialized empty git repository in ....git”*（`...`是路径）。
5.  现在您需要通过将文件添加到您的存储库来告诉 git 您的文件。用`git add filename`. 如果要添加所有文件，可以执行`git add .`
6.  现在您已经添加了文件并进行了更改，您需要*提交*更改以便 git 可以跟踪它们。键入`git commit -m "adding files"`。`-m`允许您在线添加*提交消息*。

到目前为止，即使您不使用 github，也可以执行上述步骤。它们是启动 git 存储库的正常步骤。请记住，git 是分布式的（去中心化的），这意味着您不需要“中央服务器”（甚至网络连接）来使用 git。

现在您想将更改推送到由 github 托管的 git 存储库。你通过告诉 git*添加一个远程位置*来做到这一点，你可以用这个命令来做到这一点：

`git remote add origin https://github.com/yourusername/your-repo-name.git`

*注意：`your-repo-name`应该在执行之前在 GitHub 中创建`git remote add origin ...` 完成此操作后，git 现在知道您的远程存储库。然后，您可以告诉它推送（即“上传”）您提交的文件：

`git push -u origin master`

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2014-12-30T07:09:03.627

![如何从头开始上传项目到 Github](../Images/bfa2b2c99dd28e49ccea007dd2a9cd11.png)

按照以下步骤投影到 Github

**1)** `git init`

**2)** `git add .`

**3)** `git commit -m "Add all my files"`

**4)** `git remote add origin https://github.com/yourusername/your-repo-name.git`

> 从头开始上传项目需要`git pull origin master`.

**5)** `git pull origin master`

**6)** `git push origin master`

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2014-01-16T09:38:49.663

```
git push --force origin master 
```

如果您在上传时遇到问题！

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-03-24T16:33:47.633

在这里我解释了我是如何在 Window 上做到的，也许它也对其他人有帮助:)

确保安装[Git](https://git-scm.com/)和[GitHub](https://desktop.github.com/)。

安装完成后，打开“git bash”；

[![在此处输入图像描述](../Images/5b42b6e795f1317204e1cb6f101a85da.png)](https://i.stack.imgur.com/wnGfE.png)

所以会弹出一个像下面这样的窗口：

[![在此处输入图像描述](../Images/230c849fd62f88b92003ebe6ecc14936.png)](https://i.stack.imgur.com/BF4Qv.png)

继续输入`cd ~`以确保您在主目录中；

您可以通过键入来检查您所在的地址`pwd`；

现在您需要创建一个[GitHub](https://github.com/)帐户；

创建 GitHub 帐户后，继续登录；

登录后，点击右上角的 + 并选择“New Repository”</p>

[![在此处输入图像描述](../Images/5a9f1871dc34b0e7f5b81efddf82879d.png)](https://i.stack.imgur.com/OxzSa.png)

然后在打开的窗口中，在“存储库名称”框中键入您希望为存储库设置的名称。如果您愿意，请添加“描述（可选）”，并标记“使用 README 初始化此存储库”。然后单击“创建存储库”。

[![在此处输入图像描述](../Images/a93e4072190c6269947ba4313ccbf0b1.png)](https://i.stack.imgur.com/GwbE1.png)

现在转到您的 C 驱动程序；创建一个新文件夹并将其命名为“git”现在转到“git bash”窗口；通过键入将目录更改为 c 驱动器`cd ~; cd /c` 如果您在此处键入`ls`，它将向您显示那里的文件夹；确保它在那里显示 git 文件夹：

[![在此处输入图像描述](../Images/8e581ea7ac64e4c026334d4562f69b59.png)](https://i.stack.imgur.com/IuOQn.png)

现在回到浏览器；转到您的 GitHub 页面，单击您创建的存储库；并点击“克隆或下载”；并复制那里显示的地址（通过选择复制到剪贴板）

[![在此处输入图像描述](../Images/143ba6f17f819d7a32b05ff365e78050.png)](https://i.stack.imgur.com/GUamv.png)

现在回到“git bash”；使用命令`cd git`进入git文件夹；现在编写以下命令以连接到您的 GitHub（当它询问您时输入您的 GitHub 的用户名和密码）

```
git config --global user.name "Your Name" 
```

然后：`git config --global user.email youremail@domain.com`。下一个类型：`git clone (url)`，而不是（url），输入您从 GitHub 页面复制的 GitHub 存储库的地址；（例如 git clone [https://github.com/isalirezag/Test.git](https://github.com/isalirezag/Test.git)）。

现在，如果您执行`ls`命令，您将在那里看到您的存储库；如果您还打开窗口中的 git 文件夹，您将看到您的存储库已添加为文件夹。

现在使用 cd 命令转到存储库：`cd Test`

继续复制并粘贴要放入该存储库中的任何文件到该文件夹​​中。

为了将文件传输到您的存储库，您现在需要执行以下操作：

输入 git

`add filename`（filename 是您要上传的文件名）或者如果您要添加文件夹中的所有文件，可以键入以下命令：

`git add .`

然后键入：`git commit -m "adding files"`。然后：`git push -u origin master`。

然后你应该准备好了，如果你刷新你的 GitHub 帐户，文件应该在那里:)

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2019-08-08T07:33:52.630

按照以下步骤将您的项目上传到 Github

1)`git init`

2)`git add .`

3)`git commit -m "Add all my files"`

4)`git remote add origin https://github.com/yourusername/your-repo-name.git`

从头开始上传项目需要 git pull origin master。

5)`git pull origin master`

6)`git push origin master`

如果推送使用出现问题 `git push --force origin master`

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2014-01-20T06:21:08.027

请遵循以下两个步骤：

1.  使用以下链接在线创建存储库：[https ://github.com/new](https://github.com/new)
2.  然后使用以下命令将您的本地仓库链接到远程仓库：`git add remote origin https://github.com/userName/repo.git` 这里的 repo.git 将是您新创建的远程仓库。

这将像一个魅力。无需担心 SSH 或 HTTPS 方式。我第一次遇到同样的问题并花了几个小时来解决。但这对我有用。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-01-18T18:52:49.350

这对我有用；

```
1- git init
2- git add .
3- git commit -m "Add all my files"
4- git remote add origin https://github.com/USER_NAME/FOLDER_NAME
5- git pull origin master --allow-unrelated-histories
6- git push origin master 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2021-08-11T07:27:21.773

易于遵循的步骤， git pull origin master 或 main 将给出致命的：找不到远程 ref main 所以下面的步骤可以正常工作。

1.  混帐初始化
2.  混帐添加。
3.  git commit -m "初始提交"
4.  git 远程添加源[https://github.com/yourusername/your-repo-name.git](https://github.com/yourusername/your-repo-name.git)
5.  git 分支 -M 主要
6.  git push -u 原点主

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-07-06T15:01:57.360

> 在 GitHub 上创建一个新的存储库。为避免错误，请勿使用 README、许可证或 gitignore 文件初始化新存储库。您可以在将项目推送到 GitHub 后添加这些文件。打开终端（适用于 Mac 用户）或命令提示符（适用于 Windows 和 Linux 用户）。
> 
> 将当前工作目录更改为您的本地项目。
> 
> 将本地目录初始化为 Git 存储库。
> 
> `git init`
> `#Add the files in your new local repository. This stages them for the first commit.`
> 
> `git add`
> `# Adds the files in the local repository and stages them for commit. To unstage a file, use 'git reset HEAD YOUR-FILE'. Commit the files that you've staged in your local repository.`
> 
> `git commit -m 'First commit'`
> `#Commits the tracked changes and prepares them to be pushed to a remote repository. To remove this commit and modify the file, use 'git reset --soft HEAD~1' and commit and add the file again.`
> 
> 1.  在 GitHub 存储库的快速设置页面顶部，单击[![在此处输入图像描述](../Images/da4694f7e55382984772484bebb6bdfa.png)](https://i.stack.imgur.com/4NwFe.png)以复制远程存储库 URL。在 GitHub 存储库的快速设置页面顶部，单击以复制远程存储库 URL。
> 2.  在命令提示符下，添加将推送本地存储库的远程存储库的 URL。
> 
> `$ git remote add origin remote repository URL` `# Sets the new remote git remote -v` `# Verifies the new remote URL Note: GitHub for Windows users should use the command git remote set-url origin instead of git remote add origin here. Push the changes in your local repository to GitHub.`
> 
> `$ git push origin master`
> `# Pushes the changes in your local repository up to the remote repository you specified as the origin.`

来源归属：[https ://help.github.com/articles/adding-an-existing-project-to-github-using-the-command-line/](https://help.github.com/articles/adding-an-existing-project-to-github-using-the-command-line/)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2017-06-11T07:33:21.290

我假设您像我一样使用 Windows 系统并安装了 GIT。您可以在项目目录中通过简单的命令提示符运行这些命令，也可以使用 GitBash。

第 1 步：在 GIT 中手动创建一个存储库。给它起任何你觉得合适的名字。

第 2 步：进入本地项目目录。如果您想将代码发布到您刚刚创建的这个新存储库，请确保在项目根目录中没有文件夹名称 .git，如果有，请将其删除。运行命令`git init`

第三步：运行命令 `git add .`

第四步：运行命令 `git commit -m YourCommitName`

第五步：运行命令 `git remote add YourRepositoryName https://github.com/YourUserName/YourRepositoryName.git`

第 6 步：运行命令 `git push --set-upstream YourRepositoryName master --force`

请注意，在撰写本文时，我使用的是最新版本的 GIT。另请注意，我没有指定任何特定的分支来将代码推送到其中，因此它进入了 master。在第 6 步中，GIT 将通过要求您在弹出窗口中输入用户名和密码来要求您授权命令。

希望我的回答有所帮助。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2016-12-09T22:52:13.990

1.  打开 Git Bash。
2.  将当前工作目录更改为您的本地项目。
3.  将本地目录初始化为 Git 存储库：`$ git init`
4.  在新的本地存储库中添加文件。这会将它们分阶段进行第一次提交：`$ git add .`
5.  提交您在本地存储库中暂存的文件：`$ git commit -m "First commit"`
6.  在 GitHub 存储库的快速设置页面顶部，单击以复制远程存储库 URL。
7.  在命令提示符下，添加将推送本地存储库的远程存储库的 URL：`$ git remote add origin remote repository URL`
8.  将本地存储库中的更改推送到 GitHub：`$ git push origin master`

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-12-24T09:21:25.673

> 将项目上传到 git 的步骤：-

step1-打开 cmd 并将当前工作目录更改为您的项目位置。

step2-将您的项目目录初始化为 Git 存储库。

> $ 混帐初始化

step3-在本地存储库中添加文件。

> $加。

step4-提交您在本地存储库中暂存的文件。

> $ git commit -m "第一次提交"

step5-复制远程仓库的url。

step6-将远程存储库 url 添加为本地位置的源。

> $ git add origin 复制的_remote_repository_url

step7-确认您的来源是否已更新。

> $ git 远程显示原点

step8-将更改的内容推送到您的 github 存储库

> $ git push 起源大师。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2012-10-09T12:13:21.193

我认为对你来说最简单的事情是为 eclipse 安装 git 插件，它的工作方式或多或少与 eclipse CVS 和 SVN 插件相同：

[http://www.eclipse.org/egit/](http://www.eclipse.org/egit/)

GL！

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-12-21T08:05:10.247

1.  首先你必须在 Github 上创建一个帐户
2.  然后创建新项目 - 根据需要命名该项目，然后显示您的项目 url
3.  现在复制网址
4.  然后打开命令提示符并使用 cmd 转到要上传的目录或文件夹
5.  然后键入以下命令

    ```
     git init
     git add .
     git commit -m "initial commit"
     git remote add origin PASTE URL
     git push -u origin master 
    ```

6.  现在检查您的 GitHub 帐户，存储库已成功上传。

如需完整指导，您可以[观看此视频](https://www.youtube.com/watch?v=psgrKFlNwTI&t)。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-11-29T12:30:47.740

我花了大约 1-2 个小时才意识到我应该在尝试将我的本地文件推送到 github（或者你正在使用的任何 git 服务）**之前创建到 GitHub 的存储库。**

尝试推送后错误如下：

```
remote: Repository not found.
fatal: repository 'https://github.com/username/project.git/' not found 
```

我觉得自己像个白痴，但我真的想向像我这样的初学者强调这一点。我只是认为我的回购将在第一次推送期间自动创建。我错了。

编辑：您可以使用命令设置*遥控器*

```
git remote -v 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2014-02-14T03:16:56.030

可能你能做的最有用的事情就是仔细阅读在线书籍**[[http://git-scm.com/book/en/]](http://git-scm.com/book/en/)**。这确实是一本相当不错的读物，并为您提供了正确执行事物的概念上下文。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2016-09-21T14:41:49.340

下载源树。它适用于 windows7+ 和 Mac，强烈建议通过交互式 UI 在 github 上上传文件。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2019-12-12T13:02:33.920

确保**git 已安装**在您的系统上。我正在解释使用**Windows 操作系统的过程**

这是我的做法：

1.打开**cmd**（你也可以用git bash）。

2.转到您的项目目录（您的项目所在的位置）。

3.现在键入`your_directory >git init`这将初始化一个空存储库，如果它是第一次并进入。例如：`C:\Users>git init`

4.现在输入`your_directory >git add <filename>`（如果是特定文件）或`git add .`（如果要添加所有文件）并输入。

5.现在输入`>git commit -m "commit message goes here"`并输入。

（如果您需要检查状态，可以键入`>git status`）并输入。

6.现在输入`>git remote add origin git_repository_url`

（检查`>git remote -v`）并输入。

7.现在转身推`...>git push origin master`入

（如果出现错误，请通过键入`...>git push -f origin master`并输入来强行推动它。

现在您已完成将其添加到您的存储库。刷新它，它将出现在您创建的存储库中。

希望这对您有用。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-05-05T19:08:06.707

按照上面 RishiKesh Pathak 的说明，您甚至可以通过仅插入此命令行一次来缩短 push 命令：

```
git config --global push.default simple 
```

所以下次不用`git push origin master`你只需要：

```
git push 
```

[*在此处*](https://stackoverflow.com/a/35974260/4058484)查看详细信息。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-05-05T19:13:34.510

最好的 git 方法是实际启动**Gitting**。试试这个网站，它让你逐步了解在命令行上执行功能以在 GitHub 上推送项目的基本方法

这称为[try.github.io](https://try.github.io)或者您也可以参加[codeAcademy上的课程](https://codeacademy.com)

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-01-30T07:55:24.147

我做了如下；

1.  混帐初始化
2.  混帐添加。
3.  git commit -m "Your_message"
4.  git 远程添加来源 @your_git_repository
5.  git push -u 起源大师

当然你必须安装git

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-07-11T07:08:41.753

1.  我们需要 Git Bash
2.  在 Git Bash 命令部分::

1.1 LS

它将显示您的默认位置。

1.2 CD "C:\Users\user\Desktop\HTML" 我们需要分配项目路径

1.3 git init 它将初始化C:\Users\user\Desktop\HTML中的空git仓库

1.4 ls 会列出所有文件名

1.5 git remote add origin [https://github.com/repository/test.git](https://github.com/repository/test.git) 它是你的[https://github.com/repository/test.git](https://github.com/repository/test.git)是你的存储库路径

1.6 git remote -v 检查天气我们是否有获取或推送权限

1.7 混帐添加。如果你把 . 那么这意味着我们在特定文件夹中发布的所有内容。

1.8 git commit -m "第一次"

1.9 git push -u 起源大师

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-06-08T22:08:56.183

你需要一个 SSH 连接和 GitHub init 到你的项目中。我将在Linux机器下进行解释。

让我们从一些简单的东西开始：在终端中导航到您的项目，然后使用：

```
git init
git add .
git commit 
```

现在让我们将 SSH 添加到您的机器中：使用`ssh-keygen -t rsa -C "your_email@example.com"` 并复制公钥，然后将其添加到您的 GitHub 存储库 `Deploy keys -> add one` 中返回到您的机器项目现在启动： `git push origin master` 如果有错误 config your .github/config by `nano .github/config` 并将 URL 更改为 ssh one by `url = git@github.com:username/repo....` 就是这样

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-01-14T15:34:25.830

尝试使用 Git Bash 推送您的代码/进行更改，而不是直接在 GitHub 上上传文件（它不太容易出错并且有时很舒服 - 也需要更少的时间！），为此，您可以遵循以下 -给定步骤：

1.  从这里下载并安装最新版本的 Git Bash - [https://git-scm.com/](https://git-scm.com/)
2.  右键单击系统上的任何所需位置。
3.  单击“此处的 Git Bash”。
4.  git config --global user.name “你的名字”</li>
5.  git config --global user.email “你的邮箱”</li>
6.  回到你的 GitHub 账户——打开你的项目——点击“克隆”——复制 HTTPS 链接。
7.  git clone 粘贴 HTTPS 链接。
8.  您的 GitHub 项目的克隆将在您的计算机位置创建。
9.  打开文件夹并粘贴您的内容。
10.  确保内容不为空
11.  在您粘贴内容的克隆文件夹内右键单击。
12.  再次单击“Git Bash Here”。
13.  您会发现 (master) 出现在您的位置地址之后。
14.  混帐添加。
15.  尝试 git status 检查您的所有更改是否都标记为绿色。
16.  git commit --m “一些信息”</li>
17.  git push 起源大师

* * *

## 回答 #25

> 赞同：-2
> 
> 时间：2017-08-02T17:05:32.153

用于将新项目上传到 GIT（首先你需要有项目的本地代码库和你将上传项目的 GIT 存储库，在 GIT 中你需要有你的凭据）

1.  项目清单

    1.打开Git Bash

    2\. 转到你有代码库的目录（项目位置） cd 到项目位置 cd /*/***/*****/***** 然后这里你需要执行 git 命令

    3.  git init press enter 然后你会在下面看到类似这样的内容 Initialized empty Git repository in *:/***/****/*****/.git/ 所以 git init 将在本地初始化空的 GIT 存储库
    4.  混帐添加。按下输入上述命令将添加所有目录、子目录、文件等，您将看到类似这样的警告：LF 将替换为 **** 中的 CRLF。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被替换为 ******** 中的 CRLF。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被 ******* 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被替换为 ******** 中的 CRLF。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被 ******* 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被替换为 ************** 中的 CRLF。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被 ************ 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被替换为 *************** 中的 CRLF 该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被替换为 j******* 中的 CRLF。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被 *********** 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被替换为 ************** 中的 CRLF。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被 *********** 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被替换为 ********* 中的 CRLF。

    5.  git commit -m "first commit" 按回车键 -m 提供的选项用于添加评论它会将代码提交到 stage env 你会看到类似这样的东西

[master (root-commit) 34a28f6] 添加 ******** 警告：LF 将被替换为 c******* 中的 CRLF。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被 ******* 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被替换为 ******** 中的 CRLF。该文件将在您的工作目录中具有其原始行结尾。警告：LF 将被替换为 ********* 中的 CRLF。该文件将在您的工作目录中具有其原始行结尾。

## 警告：LF 将被 *********** 中的 CRLF 替换。

* * *

27 个文件已更改，3724 次插入（+） 创建模式 100644 ***** 创建模式 100644 ***** 创建模式 100644 ***** 创建模式 100644 ****** 创建模式 100644 ***** * 创建模式 100644 ***** 创建模式 100644 ******

6.git remote add origin [http://username@git:repopath.git](http://username@git:repopath.git) 按回车这将添加到 repo

7.git push -u origin master press enter 这会将所有内容从本地上传到 repo 在此步骤中，您需要输入要上传代码的 repo 的密码。您将在 Counting objects: 33, done 下方看到类似这样的内容。使用多达 12 个线程的 Delta 压缩。压缩对象：100% (32/32)，完成。写入对象：100% (33/33)，20.10 KiB | 0 字节/秒，完成。总共 33 个（增量 14），重用 0 个（增量 0）到[http://username@git:repolocation.git](http://username@git:repolocation.git) * [新分支] master -> master 分支 master 设置为从源跟踪远程分支 master。

# c++ - async_resolve 和 async_connect 参数生命周期

> ID：12799720
> 
> 赞同：1
> 
> 时间：2012-10-09T12:09:55.830
> 
> 标签：c++, boost-asio

我想知道传递给上述方法的对象的生命周期是什么。

# 异步解析

```
ip::basic_resolver::async_resolve(const query & q, ResolveHandler handler); 
```

(1) 在调用处理程序之前，我是否需要让解析器保持活动状态？（是）
（2） async_resolve 是否复制`query`对象？（我正在传递在堆栈上创建的一个 - 是的）

```
{
   boost::asio::ip::tcp::resolver::query query(host_, port_);
   resolver_.async_resolve(query, );
} 
```

(3)`boost::asio::ip::tcp::resolver::iterator`在处理程序中按值返回？（是的）

# 异步连接

```
template<..> void async_connect(basic_socket<Protocol, SocketService> & s,
Iterator begin, ComposedConnectHandler h); 
```

(4) 是`begin`按值传递吗？（是）
（5）我需要维持`resolver`生命吗？（不）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:38:45.120

使用 Boost.Asio，一般规则是：

*   通过 const-reference 或 value 传递的参数被复制。如果支持，它们可能会被移动。
*   非 const-reference 传递的参数必须保持有效，直到同步操作完成或调用异步操作的处理程序。

当规则有例外时，文档会指出它，例如*buffers*参数的情况，在[`boost::asio::async_write`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/async_write/overload1.html)调用处理程序之前必须保持有效。

* * *

对于[`ip::basic_resolver`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/ip__basic_resolver.html)：

*   与其他服务对象一样，如果服务对象因未完成的异步操作而被销毁，则异步操作处理程序将被调用`boost::asio::error::operation_aborted`。如果您不想管理服务对象的生命周期，则使用 a 对其进行管理并将[`shard_ptr`](http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/shared_ptr.htm)其副本绑定`shared_ptr`到处理程序中。
*   因为对象通过 const-reference 传递并最终复制到底层操作的构造函数 ( [`async_resolve`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/ip__basic_resolver/async_resolve/overload1.html))中。这也允许使用临时对象。`query`[`resolve_endpoint_op`](http://www.boost.org/doc/libs/1_51_0/boost/asio/detail/resolve_endpoint_op.hpp)`query`

    ```
    {
      typedef boost::asio::ip::tcp::resolver::query query;
      resolver_.async_resolve(query(host_, port_), );
    } 
    ```

*   [`async_resolve`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/ip__basic_resolver/async_resolve/overload1.html)期望*处理程序*满足[ResolverHandler](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/ResolveHandler.html)要求。它记录了*迭代器*参数是按值获取的。

对于[`boost::asio::async_connect`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/async_connect.html)：

*   根据文档，*开始*参数是按值传递的。
*   `resolver`不需要保持活动状态，因为迭代器共享查询结果的所有权。虽然不在文档中，但[`ip::basic_resolver_iterator`](http://www.boost.org/doc/libs/1_51_0/boost/asio/ip/basic_resolver_iterator.hpp)维护了一个`shared_ptr`对象。这些对象具有端点、主机名和服务名的成员变量。`std::vector`[`ip::basic_resolver_entry`](http://www.boost.org/doc/libs/1_51_0/boost/asio/ip/basic_resolver_entry.hpp)`basic_resolver_entry`

# java - 最后一个块使用 CipherInputStream/CipherOutputStream 不完整，即使使用填充 AES/CBC/PKCS5Padding

> ID：12799726
> 
> 赞同：16
> 
> 时间：2012-10-09T12:10:08.833
> 
> 标签：java, android, encryption, aes, padding

实际上，我也从互联网和stackoverflow中搜索了很多内容，

最初我在加密和解密中没有使用填充，

但最后我从这里得到了解决方案

[https://stackoverflow.com/a/10775577/1115788](https://stackoverflow.com/a/10775577/1115788)

我用填充更新了我的代码作为 AES/CBC/PKCS5Padding 并且同样的错误即将到来，最后一个块没有被解密......

我最近两天一直在做这个，但没有找到解决方案

我的加密器代码：

```
package mani.droid.browsedropbox;

import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.math.BigInteger;
import java.security.InvalidAlgorithmParameterException;
import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;
import javax.crypto.Cipher;
import javax.crypto.CipherInputStream;
import javax.crypto.CipherOutputStream;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKey;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

public class Crypter {

    Cipher encipher;
    Cipher decipher;
CipherInputStream cis;
CipherOutputStream cos;
FileInputStream fis;
byte[] ivbytes = new byte[]{(byte)'a', (byte)'b', (byte)'c', (byte)'d', (byte)'e',                                                                                          (byte)'f', (byte)'g', (byte)'h', (byte)'i', (byte)'j', (byte)'k', (byte)'l', (byte)'m',     (byte)'n', (byte)'o', (byte)'p'};
    IvParameterSpec iv = new IvParameterSpec(ivbytes);

public boolean enCrypt(String key, InputStream is, OutputStream os)
{
    try {
        byte[] encoded = new BigInteger(key, 16).toByteArray();
        SecretKey seckey = new SecretKeySpec(encoded, "AES");
        encipher = Cipher.getInstance("AES/CBC/PKCS7Padding");
        encipher.init(Cipher.ENCRYPT_MODE, seckey, iv);
        cis = new CipherInputStream(is, encipher);
        copyByte(cis, os);
        return true;
    } 
    catch (InvalidKeyException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchPaddingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvalidAlgorithmParameterException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return false;
}

public boolean deCrypt(String key, InputStream is, OutputStream os)
{
    try {
        byte[] encoded = new BigInteger(key, 16).toByteArray();
        SecretKey seckey = new SecretKeySpec(encoded, "AES");
        encipher = Cipher.getInstance("AES/CBC/PKCS7Padding");
        encipher.init(Cipher.DECRYPT_MODE, seckey, iv);
        cos = new CipherOutputStream(os, encipher);
        copyByte(is, cos);
        //cos.close();
        return true;
    } 
    catch (InvalidKeyException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (NoSuchPaddingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (InvalidAlgorithmParameterException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return false;
}

public void copyByte(InputStream is, OutputStream os) throws IOException
{
    byte[] buf = new byte[8192];
    int numbytes;
    while((numbytes = is.read(buf)) != -1)
    {
        os.write(buf, 0, numbytes);
        os.flush();
    }
    os.close();
    is.close();
}
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-03-20T23:24:14.677

我遇到了完全相同的问题。接受的解决方案有效，因为您使用了不需要填充的密码模式，但这不是解决加密相关问题的方法。

根据 CipherOutputStream[文档](http://docs.oracle.com/javase/7/docs/api/javax/crypto/CipherOutputStream.html#close%28%29)，您必须调用 close() 方法才能正确完成加密（即添加填充块）。

> 此方法调用封装密码对象的 doFinal 方法，这会导致处理封装密码缓冲的任何字节。通过调用此输出流的 flush 方法写出结果。
> 
> 此方法将封装的密码对象重置为其初始状态并调用底层输出流的关闭方法。

如果您想在调用 CipherOutputStream.close() 方法后仍保持 OutputStream 处于打开状态，您可以将 OutputStream 包装到不关闭它的流中。例如：

```
public class NotClosingOutputStream extends OutputStream {
  private final OutputStream os;

  public NotClosingOutputStream(OutputStream os) {
    this.os = os;
  }

  @Override
  public void write(int b) throws IOException {
    os.write(b);
  }

  @Override
  public void close() throws IOException {
    // not closing the stream.
  }

  @Override
  public void flush() throws IOException {
    os.flush();
  }

  @Override
  public void write(byte[] buffer, int offset, int count) throws IOException {
    os.write(buffer, offset, count);
  }

  @Override
  public void write(byte[] buffer) throws IOException {
    os.write(buffer);
  }
} 
```

然后你可以使用：

```
...
cos = new CipherOutputStream(new NotClosingOutputStream(os), encipher);
copyByte(is, cos);
cos.close();
... 
```

请注意，`os`流不会关闭，您需要在适当的时候自行关闭。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T11:20:12.213

最后我得到了我自己的问题的答案，经过反复试验实际上在这里冲突是我设置了填充`encipher = Cipher.getInstance("AES/CBC/PKCS7Padding");`

并将 IV 设置为一些值.....，

最后我得到了答案，只是替换了算法

从：

> AES/CBC/PKCS7Padding

到：

> AES/CFB8/无填充

并且它的工作就像魅力......，所以我建议其他在这个问题上苦苦挣扎的人的答案，如果你解决了你的问题，请在这里为其他人提及......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T06:53:28.423

我也看到 CipherInputStream 因填充问题而失败。这种行为因 JVM 的不同版本而异。例如 7u55 32 位我的代码运行良好，7u55 64 位相同的代码失败了......而且我还看到后来的 32 位 JVM 出现故障。解决方法是使用字节数组方法并避免使用 CipherInputStream。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T14:04:30.410

不确定这是否与 OP 的问题有关，但这可能会对某人有所帮助。

***无论您更改什么，***当您***反复**得到`java.io.IOException: last block incomplete in decryption`* **该文件时，请检查您是否仍在使用之前运行的文件。如果您的读/写测试代码附加到该文件，您将始终得到该异常——除非您删除了您写入的损坏文件。**

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-01T21:00:29.957

可以使用带有填充的 CipherInputStream，切换到 NoPadding 是一种解决方法，但不是解决方案。

当 CipherInputStream 到达流的末尾时应用填充。重要的一点是您必须调用 CipherInputStream 的 read() 方法至少两次才能获取所有数据。

以下示例演示了读取带有填充的 CipherInputStream：

```
public static void test() throws Exception {
    Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");

    SecureRandom rnd = new SecureRandom();
    byte[] keyData = new byte[16];
    byte[] iv = new byte[16];
    rnd.nextBytes(keyData);
    rnd.nextBytes(iv);
    SecretKeySpec key = new SecretKeySpec(keyData, "AES");

    cipher.init(Cipher.ENCRYPT_MODE, key, new IvParameterSpec(iv));

    ByteArrayOutputStream buffer = new ByteArrayOutputStream();
    CipherOutputStream out = new CipherOutputStream(buffer, cipher);

    byte[] plain = "Test1234567890_ABCDEFG".getBytes();
    out.write(plain);
    out.flush();
    out.close();
    byte[] encrypted = buffer.toByteArray();
    System.out.println("Plaintext length: " + plain.length);
    System.out.println("Padding length  : " + (cipher.getBlockSize() - (plain.length % cipher.getBlockSize())));
    System.out.println("Cipher length   : " + encrypted.length);

    cipher.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec(iv));
    CipherInputStream in = new CipherInputStream(new ByteArrayInputStream(encrypted), cipher);
    buffer = new ByteArrayOutputStream();
    byte[] b = new byte[100];
    int read;
    while ((read = in.read(b)) >= 0) {
        buffer.write(b, 0, read);
    }
    in.close();

    // prints Test1234567890_ABCDEFG
    System.out.println(new String(buffer.toByteArray()));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-08T08:25:54.900

对于那些正在努力使用图像文件进行 aes 加密/解密的人，这是我的示例，它就像一个魅力。

```
public static String decrypt(String textToDecrypt)  {
    byte[] dataDecrypted = null;

    try {
        Cipher cipher = getCipher();
        SecretKey key = getKey();
        IvParameterSpec iv = getIV();
        if(cipher == null) {
            return null;
        }
        cipher.init(Cipher.DECRYPT_MODE, key, iv);

        byte[] dataToDecrypt = Base64.decode(textToDecrypt, Base64.NO_WRAP);
        ByteArrayInputStream bais = new ByteArrayInputStream(dataToDecrypt);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        // Wrap the output stream
        CipherOutputStream cos = new CipherOutputStream(baos, cipher);

        // Read bytes
        int count = 0;
        byte[] buffer = new byte[DEFAULT_BYTE_READ_WRITE_BLOCK_BUFFER_SIZE];
        while ((count = bais.read(buffer)) != -1) {
            cos.write(buffer, 0, count);
        }
        cos.close();    // manually do close for the last bit

        dataDecrypted = baos.toByteArray();

        // Close streams.
        baos.close();
        bais.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

    return (dataDecrypted == null ? "" : Base64.encodeToString(dataDecrypted, Base64.NO_WRAP));
} 
```

* * *

```
public static String encrypt(String textToEncrypt) {
    byte[] dataEncrypted = null;

    try {
        Cipher cipher = getCipher();
        SecretKey key = getKey();
        IvParameterSpec iv = getIV();
        if (cipher == null) {
            return null;
        }
        cipher.init(Cipher.ENCRYPT_MODE, key, iv);

        byte[] dataToEncrypt = Base64.decode(textToEncrypt, Base64.NO_WRAP);
        ByteArrayInputStream bais = new ByteArrayInputStream(dataToEncrypt);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        // Wrap the output stream
        CipherOutputStream cos = new CipherOutputStream(baos, cipher);

        // Read bytes
        int count = 0;
        byte[] buffer = new byte[DEFAULT_BYTE_READ_WRITE_BLOCK_BUFFER_SIZE];
        while ((count = bais.read(buffer)) != -1) {
            cos.write(buffer, 0, count);
        }
        cos.close();    // manually do close for the last bit

        dataEncrypted = baos.toByteArray();

        // Close streams.
        baos.close();
        bais.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

    return (dataEncrypted == null ? "" : Base64.encodeToString(dataEncrypted, Base64.NO_WRAP));
} 
```**

# ios6 - 在带有状态栏的 Xcode 4.5 iOS 6.0 中更改为横向

> ID：12799729
> 
> 赞同：3
> 
> 时间：2012-10-09T12:10:16.167
> 
> 标签：ios6, statusbar, xcode4.5, landscape-portrait

我一直在为我的 iOS 项目使用 Xcode 4.4，我希望我的屏幕之一是永久横向的，所以我使用了

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

它工作得很好，自从我更新到 Xcode 4.5 和 iOS 6.0 后，它根本不起作用，所以我发现我必须使用新功能，现在我有了：

```
- (NSUInteger)supportedInterfaceOrientations {
        return UIInterfaceOrientationMaskLandscapeRight; 
}

- (BOOL)shouldAutorotate {
        return YES;
} 
```

所以现在我的屏幕是横向的，但状态栏仍然在它的位置，就像屏幕仍然处于纵向模式一样。

我不知道如何解决它。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:35:42.757

我在 viewWillAppear 函数中实现了它，它在 iOS6 中工作：

`[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight animated:YES];`

# struts2 - 会话 Struts2 SSL

> ID：12799734
> 
> 赞同：1
> 
> 时间：2012-10-09T12:10:45.417
> 
> 标签：struts2

我用 struts 2 创建了一个登录应用程序并与 SSL 集成。当我在注销后单击后退按钮时，我仍然能够看到该页面，尽管当我尝试在页面上执行任何操作时它显示会话已过期。**但是，当我刷新页面时，我可以执行页面上的所有操作。我已经在 LogOut 事件中使用拦截器删除了 cookie。**谁能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T07:16:09.833

您在这里给我们的信息不多。

我认为问题可能源于您正在刷新的页面的 URL。请查看 URL 被调用的操作以及重新加载页面时附加的所有 GET 和 POST 数据。您可能需要为此使用调试器。也许这些信息会重新生成 cookie 或会话中的登录信息。

您可以使用 SessionAware 拦截器根据用户的会话存储数据。如果您没有发现错误，您可以在会话中放置一个布尔登录标志，在您的操作开始时检查用户是否真的登录，并在用户注销时将该值设置为 false。

# syslog - 具有优先级的系统日志消息

> ID：12799735
> 
> 赞同：0
> 
> 时间：2012-10-09T12:10:45.907
> 
> 标签：syslog

我正在使用`syslog()`功能在我的一个应用程序中记录信息。我`syslog()`在 Fedora 14 Linux 中使用 c 代码调用函数。

目前，当我调用 syslog 函数时，如下所示：

```
syslog(LOG_INFO,"MYLOG"); 
```

我正在`/var/log/messages`以下文件中记录味精

```
Oct  7 04:32:53 syslogname MYLOG 
```

现在我想在`syslog()`消息的开头记录自定义优先级值（比如 137）。例如：日志应该看起来像这样。

```
PRI Oct  7 04:32:53 syslogname MYLOG 
```

我希望`PRI`数字出现在记录消息的开头。我做了谷歌搜索，但没有得到正确的答案。请您就如何使用`syslog()`功能提出建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T07:51:11.870

您可以使用 rsyslog 以您需要的格式写入。您请求格式的模板应如下所示： %pri% %timereported% %syslogtag% %msg%

有关可用参数，您可以查看[http://www.rsyslog.com/doc/property_replacer.html](http://www.rsyslog.com/doc/property_replacer.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T22:01:08.187

/var/log/messages 文件由您的系统日志守护程序编写。传统上，PRI 值被从中剥离。在那里看到[这个](https://stackoverflow.com/questions/9209130/confused-with-syslog-message-format)问题和我的答案。

您需要在 syslog 守护程序中设置一个特殊的格式化程序，以便在那里记录严重性。Rsyslog 有这方面的模板。使用 nxlog，您可以使用 $SyslogSeverity 字段并将其添加到 $Message 或 $raw_message。

# php - 一种从 PHP shell_exec 返回 XML 输出的方法？

> ID：12799738
> 
> 赞同：0
> 
> 时间：2012-10-09T12:10:52.607
> 
> 标签：php, linux

我需要能够从 PHP 程序运行 Linux find 命令，并希望能够让它以 XML 形式返回 find 的输出。这可能吗？我希望能够做到这一点，这样我就可以轻松地找到每个子（文件）的父（目录）。还是有更好的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T20:47:20.377

您不会将 find 命令的输出作为 xml 获得，它只会返回文本（因为它只应该返回）。

您最好的选择可能是从使用 exec 运行 find 时返回的文本创建所需的 xml。

示例 sudo 代码：

```
get all info you want to find: exec(find);
create barebones xml string;
create xml object ("i'd use simplexml in this example");
simplexml->addchild(info found from exec find); 
```

对不起，只有 sudo 代码，在我目前的情况下无法写任何东西

如果您不了解 simplexml，则可以参考：

[http://us3.php.net/manual/en/book.simplexml.php](http://us3.php.net/manual/en/book.simplexml.php)

# .net - 如何按相关性/权重对文本进行排序以进行搜索

> ID：12799740
> 
> 赞同：0
> 
> 时间：2012-10-09T12:10:59.807
> 
> 标签：.net, sorting, text, relevance

我使用返回许多短（<100 个字符）文本字符串的 Web 服务。我需要以某种文本相关性对这些字符串进行排序，例如，更好的命中应该是第一个，而质量较低的命中（例如匹配最后一个位置的搜索词，或者在另一个词内）。我猜这在许多系统中已经做过很多次了，但是我的谷歌搜索技能让我失望了。

如果可能的话，我想要一个可以导入到我的 asp.net 站点的库，但如果 .Net 不存在现有实现，我也可以实现一个算法。大多数数据库都具有此功能，但我不想将结果放入数据库中，然后要求它为我对结果进行排序:-)

# linux - 如何对多个文件运行拼写检查并在 shell 脚本中显示任何不正确的单词？

> ID：12799741
> 
> 赞同：29
> 
> 时间：2012-10-09T12:11:03.843
> 
> 标签：linux, macos, bash, vim

我有一些文件要进行拼写检查。通常我会在 中打开这些`vim`，运行`:set spell`并进行更改。但是，打开文件并手动检查自上次检查以来我是否拼错了任何单词真的很麻烦。

有没有办法可以对大量文件进行拼写检查并显示找到的任何拼写错误的单词以及文件名，以便我可以去更改它们？我不想打开每个文件，检查它是否“干净”，然后打开下一个并重复。

我找不到任何 POSIX 拼写检查实用程序。一些基于 Red-Hat 的 Linux 发行版据称有`spell`或类似的，但我更喜欢跨平台（ish）方法。我知道`vim` *可以*拼写检查 - 有没有任何方法可以在不手动完成所有拼写检查的情况下进行拼写检查？如果我可以编写一个解决方案，那就*太好了。*

我正在跑步`OS X`，为了它的价值。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-09T22:09:25.063

您可以在 OS X 上使用 Homebrew 安装 aspell。`brew info aspell`列出支持的语言。

```
brew install aspell --lang=en,fi,jp 
```

`aspell check`在交互式拼写检查器中打开文件：

```
for f in *.txt; do aspell check $f; done 
```

`aspell list`打印所有无法识别的单词：

```
cat *.txt | aspell list | sort -u 
```

学过的单词默认存储在`.aspell.en.pws`里面。您还可以`~/Library/Spelling/en`在添加`personal_ws-1.1 en`为第一行之后排除单词。

```
aspell list --personal=$HOME/Library/Spelling/en 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-16T11:11:33.263

使用[aspell](http://aspell.net/man-html/)，这将打印每个文件名，然后是拼写错误单词的排序列表以及它们出现的次数：

```
for f in *.txt ; do echo $f ; aspell list < $f | sort | uniq -c ; done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-17T16:41:13.463

您可以使用`find`命令执行此操作。这样做将递归地工作并编辑子目录中的文件。

```
find . -type f -name "*.txt" -exec aspell check {} \; 
```

解释：

*   **`find`**： 寻找...
*   **`.`**: 在这个目录
*   **`-type f`**: 文件（不是目录）
*   **`-name "*.txt"`**: 以 .txt 结尾
*   **`-exec aspell check {} \;`**: 并在他们每个人上运行 aspell。

带引号的通配符是 bash 构造。它可能不符合 POSIX。

# android - webview中的身份验证标头问题

> ID：12799742
> 
> 赞同：1
> 
> 时间：2012-10-09T12:11:09.837
> 
> 标签：android, web-services, android-webview

我正在开发一个安卓应用程序。在我的应用程序中，我必须从 webservice 打开一些图像和 pdf。我可以使用以下代码打开图像。

```
 HttpGet httpRequest = new HttpGet(URL);
                httpRequest.addHeader("Accepts", "application");
                httpRequest.addHeader("User-Authentication",
                        "c2hpbmVAaWxlYWZzb2x1dGlvbnMuY29tOnNoaW5laWxlYWY=");

                HttpClient httpclient = new DefaultHttpClient();
                HttpResponse response = (HttpResponse) httpclient
                .execute(httpRequest); 
```

现在我必须在 webview 中打开 pdf。所以我编写了以下代码

```
WebView mWebView=new WebView(MyPdfViewActivity.this);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setPluginsEnabled(true);

HashMap<String, String> map = new HashMap<String, String>();

map.put("Accepts", "application");
map.put("User-Authentication", "c2hpbmVAaWxlYWZzb2x1dGlvbnMuY29tOnNoaW5laWxlYWY=");
mWebView.loadUrl(URL,map); 
```

但我收到身份验证标头不可用错误。由于这个问题，我的项目被卡住了。我在这里发现了相同类型的问题。 [在这里检查这个答案](https://stackoverflow.com/questions/2006362/is-it-possible-to-set-custom-http-headers-in-the-webview) ，接受的答案是“您需要自己获取页面（例如，通过 HttpClient）并以这种方式将其加载到 WebView 中”。我怎样才能做到这一点？。请帮我解决问题的朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:42:59.697

查看[文档](http://developer.android.com/reference/android/webkit/WebView.html#loadUrl%28java.lang.String,%20java.util.Map%3Cjava.lang.String,%20java.lang.String%3E%29)。

**`additionalHttpHeaders`**

*`The additional headers to be used in the HTTP request for this URL, specified as a map from name to value. Note that if this map contains any of the headers that are set by default by this WebView, such as those controlling caching, accept types or the User-Agent, their values may be overriden by this WebView's defaults.`*

可能您的`User-Authentication`标题也被覆盖了。

# jquery - 如何将 ID 参数传递给上下文菜单

> ID：12799743
> 
> 赞同：2
> 
> 时间：2012-10-09T12:11:10.600
> 
> 标签：jquery, jquery-gmap3

请帮我解决一下这个。

我正在地图标记上创建右键单击上下文菜单。

见这里 - [http://jsfiddle.net/WEZVX/2/](http://jsfiddle.net/WEZVX/2/)

我需要将标记 'id' 参数传递给 items 函数。

看线

```
// add menu item
menu.add('Request Update', 'update',
function(){
    console.log(id);
    menu.close();
}); 
```

我需要把它包装在另一个函数中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:22:31.503

请检查这没问题

我所做的就是这样包装

```
// add menu item
function addmenuitem(id) {
    menu.add('Request Update', 'update',
    function(){
        console.log(id);
        menu.close();
    });
} 
```

这会传递 id，但每次创建菜单时都会向列表中添加新项目。

所以我`this.items = [];`在创建叠加层后添加。

```
// use menu as overlay
$('#dispatcher').gmap3({
    action:'addOverlay',
    latLng: event.position,
    content: $menu,
    offset: offset
});
// start auto-close
this.initTs(5000);
// clear items after
this.items = []; 
```

似乎正在工作。

# linux - 通过文件扩展名验证脚本的参数？

> ID：12799749
> 
> 赞同：3
> 
> 时间：2012-10-09T12:11:30.657
> 
> 标签：linux, validation, shell, arguments

**我正在编写一个脚本，您可以将文件名作为参数传递给它，并且它只会在它是某个文件扩展名时运行。**

```
flac2mp3 "01 Song.flac" 
```

或者

```
flac2mp3 "01 Song.FLAC" 
```

我知道那里有很多脚本向您展示如何将 flac 转换为 mp3，但这是我的脚本，我想学习如何使用这种方法编写脚本。

这样我就可以学习参数以及何时只想转换 1 个单独的文件。（对于多个文件，我只是在脚本中使用 *.flac 编写了一个 for 循环）

我只想学习如何检查 $1 参数是否包含 *.[Ff][Ll][Aa][Cc]

到目前为止，这是我从互联网上拼凑出来的（我知道这是令人尴尬的错误，但我想展示我的目标）：

```
#!/bin/bash
#flac2mp3

if [ -z $1 ] && [[$1 !=~ *.[Ff][Ll][Aa][Cc]]];then echo "Give FLAC File Name"; exit 0;fi

OUTF=${1%.flac}.mp3

ARTIST=$(metaflac "$1" --show-tag=ARTIST | sed s/.*=//g)
TITLE=$(metaflac "$1" --show-tag=TITLE | sed s/.*=//g)
ALBUM=$(metaflac "$1" --show-tag=ALBUM | sed s/.*=//g)
GENRE=$(metaflac "$1" --show-tag=GENRE | sed s/.*=//g)
TRACKNUMBER=$(metaflac "$1" --show-tag=TRACKNUMBER | sed s/.*=//g)
DATE=$(metaflac "$1" --show-tag=DATE | sed s/.*=//g)

flac -c -d "$1" | lame -m j -q 0 --vbr-new -V 0 -s 44.1 - "$OUTF"
id3 -t "$TITLE" -T "${TRACKNUMBER:-0}" -a "$ARTIST" -A "$ALBUM" -y "$DATE" -g "${GENRE:-12}" "$OUTF"

done 
```

请并感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:15:28.377

试试下面的代码：

```
shopt -s nocasematch

if [[ $1 == *flac ]]; then
    echo "ok"
fi 
```

这是不区分大小写的。

**编辑**

```
$ LANG=C help shopt
shopt: shopt [-pqsu] [-o] [optname ...]
    Set and unset shell options.

    Change the setting of each shell option OPTNAME.  Without any option
    arguments, list all shell options with an indication of whether or not each
    is set.

    Options:
      -o        restrict OPTNAMEs to those defined for use with `set -o'
      -p        print each shell option with an indication of its status
      -q        suppress output
      -s        enable (set) each OPTNAME
      -u        disable (unset) each OPTNAME

    Exit Status:
    Returns success if OPTNAME is enabled; fails if an invalid option is
    given or OPTNAME is disabled. 
```

如果您`shopt`在 shell 中单独运行，您将看到所有可用选项：

```
$ shopt
autocd          on
cdable_vars     on
cdspell         off
checkhash       off
checkjobs       off
checkwinsize    off
cmdhist         on
compat31        off
compat32        off
compat40        off
compat41        off
direxpand       off
dirspell        off
dotglob         on
execfail        off
expand_aliases  on
extdebug        off
extglob         on
extquote        on
failglob        off
force_fignore   on
globstar        on
gnu_errfmt      off
histappend      on
histreedit      off
histverify      off
hostcomplete    off
huponexit       off
interactive_comments    on
lastpipe        off
lithist         off
login_shell     off
mailwarn        off
no_empty_cmd_completion off
nocaseglob      off
nocasematch     off
nullglob        off
progcomp        on
promptvars      on
restricted_shell        off
shift_verbose   off
sourcepath      on
xpg_echo        off 
```

要知道所有这些选项的作用：

```
man bash | less +/'^SHELL BUILTIN COMMANDS' 
```

然后在此部分中搜索“shopt”。

# java - Android：如何在自定义 AlertDialog 中检索 Edittext.getText()？

> ID：12799751
> 
> 赞同：11
> 
> 时间：2012-10-09T12:11:33.887
> 
> 标签：java, android, layout, android-edittext, android-alertdialog

该主题解释了我所追求的......我无法从我在 android 中的自定义视图中检索 EditText。我得到的只是一个空指针异常。:/ 我已经用注释标记了代码中的问题所在。ID:s 是正确的，我的 XML 布局是一个简单的 RelativeLayout，其中包含两个 EditText 属性。显然我在这里遗漏了一些微不足道的东西，但是我现在已经盯着代码看了将近 2 个小时而没有解决这个问题，所以我想我会尝试一下。

```
protected void showLoginDialog() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    // Get the layout inflater
    LayoutInflater inflater = this.getLayoutInflater();

    // Inflate and set the layout for the dialog
    // Pass null as the parent view because its going in the dialog layout
    builder.setView(inflater.inflate(R.layout.activity_login, null))
    // Add action buttons
    .setPositiveButton(R.string.login, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {

            /* ERROR HERE! */
            EditText uName, passWord;
            uName = (EditText) findViewById(R.id.login_username);
            passWord = (EditText) findViewById(R.id.login_password);

            Log.i(TAG, uName.getText().toString() + " " + passWord.getText().toString());
            /* STOP */

            if(the_view.getSocketTask().isConnected) {
                the_view.getSocketTask().send_command("LOGIN ");
            } else {
                showToast("Not connected!");
            }
        }
    })
    .setNegativeButton(R.string.cancel,  new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            dialog.dismiss();
        }
    });      
    builder.create().show();
} 
```

**编辑：**

在提出建议后，以下代码是有效的！再次感谢！

```
protected void showLoginDialog() {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    // Get the layout inflater
    LayoutInflater inflater = this.getLayoutInflater();

    // Inflate and set the layout for the dialog
    // Pass null as the parent view because its going in the dialog layout
    builder.setView(inflater.inflate(R.layout.activity_login, null))
    // Add action buttons
    .setPositiveButton(R.string.login, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            Dialog f = (Dialog) dialog;
            /* ERROR HERE! */
            EditText uName, passWord;
            uName = (EditText) f.findViewById(R.id.login_username);
            passWord = (EditText) f.findViewById(R.id.login_password);

            Log.i(TAG, uName.getText().toString() + " " + passWord.getText().toString());
            /* STOP */

            if(the_view.getSocketTask().isConnected) {
                the_view.getSocketTask().send_command("LOGIN ");
            } else {
                showToast("Not connected!");
            }
        }
    })
    .setNegativeButton(R.string.cancel,  new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            dialog.dismiss();
        }
    });      
    builder.create().show();
} 
```

提前致谢！亚历克斯

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-09T12:14:27.470

将对话框转换为视图：

```
View v_iew=inflater.inflate(R.layout.activity_login, null)) ;
builder.setView(v_iew); 
```

然后替换：

```
 uName = (EditText) findViewById(R.id.login_username); 
        passWord = (EditText) findViewById(R.id.login_password); 
```

和

```
 uName = (EditText) v_iew.findViewById(R.id.login_username);
         passWord = (EditText) v_iew.findViewById(R.id.login_password); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-03T06:21:59.890

（不能投票，所以创建新答案：花了我几个小时才弄清楚；添加限定符最终修复了它 - 就像你已经知道的那样）

不起作用：最终对话框对话框 = 新对话框（此）；... keyInput = (EditText) findViewById(R.id.key_input);

作品：最终对话框对话框=新对话框（此）；... keyInput = (EditText) dialog.findViewById(R.id.key_input);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:24:14.170

在 EditText 的情况下，您应该实现[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)使用 editText.getText() 通常是一个非常糟糕的主意

这是一个非常简单的自定义对话框示例代码，其中包含一个 EditText 作为布局的一部分。还有一个按钮需要位于相同的布局上，单击该按钮会显示您刚刚输入的文本。玩得开心！

```
 final String inputString = null;
        final Dialog dialog = new Dialog(YourActivityName.this);
        dialog.setContentView(R.layout.custom_dialog_layout);
        EditText editText = (EditText) dialog.findViewById(R.id.id_of_edit_text);
        Button done = (Button) dialog.findViewById(R.id.done);
        dialog.show();
        editText.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                inputString = s.toString();

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                // TODO Auto-generated method stub

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub

            }
        });

        done.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Toast.makeText(YourActivityName.this, inputString, Toast.LENGTH_SHORT);
                dialog.dismiss();

            }
        }); 
```

# php - 关键字搜索表

> ID：12799753
> 
> 赞同：1
> 
> 时间：2012-10-09T12:11:35.697
> 
> 标签：php, mysql, sql, full-text-search

我有一个基本上包含在视频搜索引擎上的网站，我有以下代码可以查询 mysql 以获取给定的输入条件：

```
$search=htmlspecialchars($_GET['load']); 
$say=mysql_query("SELECT * FROM madvideo WHERE MATCH (baslik) AGAINST ('*$search*' IN BOOLEAN MODE)"); 
```

然后我有以下代码将显示结果：

```
 $katala=mysql_query("SELECT * FROM madvideo WHERE MATCH (baslik) AGAINST ('*$search*' IN BOOLEAN MODE) order by id asc limit $s,$perpage");
            $i=0;
                    while ($sea=mysql_fetch_array($katala))  { 
            $i++;

$idd=$sea['id']; $seoo=$sea['seo']; $baslikk=$sea['baslik']; $resimm=$sea['resim']; $suree=$sea['sure'];
 $izlenmee=$sea['izlenme']; $tarihh=$sea['tarih']; $katt=$sea['kat']; 
```

让我试着解释一下这有什么问题。假设您在我的网站上搜索“我喜欢吃草莓”

假设我在 mysql 表上有一个同名的条目“我喜欢吃草莓”

使用我当前的代码，我将得到以下示例结果：

“我喜欢开我的车”“我的车超级快”“他们吃得太多”等等，相关的结果可能会出现，但一开始并不像我想的那样。

如何让它以更相关的方式显示结果，例如谷歌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:30:44.747

将搜索词分解为单词，以便您可以使用`like`表达式动态地按条件构建顺序。由于 mysql 中逻辑表达式的结果是 1 或 0，因此您可以添加这些表达式。

```
SELECT * 
FROM madvideo 
WHERE MATCH (baslik) AGAINST ('*$search*' IN BOOLEAN MODE) 
order by 
    (baslik like '%$word1%') 
    + (baslik like '%word2%')
    + (baslik like '%word3%')
    desc
limit $s,$perpage 
```

# javascript - 获取系统 Ext Js 4.1 中可用的打印机名称

> ID：12799754
> 
> 赞同：0
> 
> 时间：2012-10-09T12:11:38.140
> 
> 标签：javascript

我想在客户端 JavaScript 应用程序中检索可用的打印机。

有什么方法可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:30:15.563

我假设您的意思是客户端系统上的本地打印机名称？JavaScript 中没有解决方案。

您可以依赖操作系统/浏览器特定的方式（例如 ActiveX）或 Java 小程序。

（有鉴于此，我认为这不是 Ext JS 4.1 的特定问题。）

如果我可以问，你想完成什么？

# c# - 在 MVC 中使用 Web 服务，新模型与否？

> ID：12799757
> 
> 赞同：1
> 
> 时间：2012-10-09T12:11:42.237
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, soa

我将使用 MVC4 开发一个基于 Web 的系统，它将使用 Web 服务（确切地说是 WCF）从数据提供者获取数据（我不能使用直接连接到 SQL）

所以，我有一个关于在这个项目中使用 Web 服务的问题。直接使用 Web 服务模型作为 MVC 模型是否正确，或者我应该为我的 MVC 项目创建单独的模型，然后使用对象映射器（例如`EmitMapper`）将 Web 服务模型映射到 MVC 中的模型？

**注意**：考虑到网络服务可能会发生很大变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:16:24.593

不，不要将您的 WCF 可序列化代理类用作 MVC 视图模型 - 这将不必要地将 SOA 后端耦合到您的 MVC 前端。

这两个类有完全不同的关注点 - 例如，您可能希望使用不适用于您的 WCF 类的[DataAnnotations](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.uihintattribute.uihint.aspx)等来装饰您`ViewModels`的类（同样，您的 WCF 代理类可能具有序列化属性）。`UIHint`

此外，随着屏幕的发展，您通常会发现您可能需要显着区分这 2 个模型 - 例如，您的屏幕需要您的服务不需要的属性，反之亦然。

所以是的，WCF 数据序列化和 MVC ViewModel 的单独类，正如您所建议的，如果您遵守标准命名约定，像 AutoMapper 这样的映射器将为您完成大部分工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:16:54.350

我只能告诉你我会怎么做。

保持模型分开。正如您所说，Web 服务可能会发生很大变化。有一个中途的房子可以保护你免受很多实施流失的影响。

还值得指出的是：-

*   更容易转移到不同的解决方案（使用不同的策略来填充模型）
*   更容易进行单元测试（不一定需要网络连接来测试您的模型是否有效）

# sharepoint - 如何将一组用户设置到共享点“人员或组”列中 - 以编程方式

> ID：12799765
> 
> 赞同：1
> 
> 时间：2012-10-09T12:11:58.337
> 
> 标签：sharepoint, sharepoint-2013

我想将一组用户添加到我的共享点列表中的人员和组列 如何将其添加到列表中？

这就是我所做的：

```
 SPUserCollection users;
            SPList oSpList = oSPWeb.Lists["VProducts"];
            SPListItem item = oSpList.GetItemById(productId);
            users = (SPUserCollection)item["Followers"];

            users.Add(curUser.LoginName, email, curUser.Name, curUser.Notes); 
```

我不知道我从列表中检索用户集的方式是否正确，以及添加用户并将其重新设置的方式是否正确。最后一行给出了一个空指针异常。我尝试使用 SPGroup，但无法找到完成它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:26:14.930

这应该适合你：

```
SPList oSpList = oSPWeb.Lists["VProducts"];
SPListItem item = oSpList.GetItemById(productId);

SPFieldUserValueCollection users = GetFieldUserValueCollection(oSPWeb, item["Followers"])
users.Add(new SPFieldUserValue(oSPWeb, curUser.ID, curUser.LoginName))

item["Followers"] = users;
item.Update(); 
```

GetFieldUserValueCollection 方法代码如下：

```
private SPFieldUserValueCollection GetFieldUserValueCollection(SPWeb web, object userField)
{            
    //If userField object is null return empty collection
    if (userField == null)
        return new SPFieldUserValueCollection();                   

    return new SPFieldUserValueCollection(web, userField.ToString());
} 
```

# css - 通过另一个文件查看图像

> ID：12799770
> 
> 赞同：1
> 
> 时间：2012-10-09T12:12:13.750
> 
> 标签：css, image

我正在尝试使用 CSS 从另一个文件中查看图像，但即使地址正确，图像也不会显示。我对如何解决这个问题没有更多的想法。你能看出问题所在吗？

[演示@jsFiddle](http://jsfiddle.net/edgren/m53ab/)

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T12:15:30.553

该图像的实际网址是[http://edgren.myftp.org:8081/gallery/images/photos/previews/P1210545.JPG](http://edgren.myftp.org:8081/gallery/images/photos/previews/P1210545.JPG)

您的网址返回一个 html 页面，这就是问题所在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:16:44.100

看这里。

[http://jsfiddle.net/m53ab/2/](http://jsfiddle.net/m53ab/2/)

```
<div style="background-color: #eaeaea; background-image: url(http://edgren.myftp.org:8081/gallery/images/photos/previews/P1210545.JPG); border: 2px solid #d1d1d1; height: 164px; width: 245px;"></div>​ 
```

# python - 如何从 facebook 获取用户的手机号码？

> ID：12799772
> 
> 赞同：4
> 
> 时间：2012-10-09T12:12:18.123
> 
> 标签：python, django, facebook, facebook-graph-api, django-socialauth

我正在使用**django-social_auth**让用户通过**facebook**注册和登录。我想访问用户的**电话号码**。

尝试在 google 和 stackoverflow 上搜索，但没有找到任何答案。也搜索了 facebook 文档。在那里我发现曾经有**'user_mobile_phone'的**权限，但它已被删除。

它也是比现在写的，它将被提供基本权限，但它不可用（我发现了什么）。我尝试使用**Graph API**，但没有成功。

所以，有人请告诉我获取用户数据的方法（如果有的话）。

编辑：2014 年 6 月 17 日 -

现在可以通过 Graph API 获取用户的手机号码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T16:27:10.523

API 不允许您访问用户的联系电话。您必须使用表单手动请求用户的联系方式。

# xml - XML 命名空间前缀不能为空

> ID：12799774
> 
> 赞同：2
> 
> 时间：2012-10-09T12:12:21.207
> 
> 标签：xml, namespaces, jaxb, marshalling

我正在尝试将对象编组为 XML，但名称空间前缀有问题（我不想有任何前缀）。

我正在使用 bindigs 文件来自定义生成的类。生成的 package-info.java 文件包含以下内容：

```
@javax.xml.bind.annotation.XmlSchema(namespace = "http://www.test.com", elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED, xmlns = {
@javax.xml.bind.annotation.XmlNs(namespaceURI = "http://www.test.com", prefix = "")})
package com.test; 
```

所以，前缀设置为“”，但是当生成 XML 时，我有一个生成的前缀。如果我使用另一个值作为前缀（不同于空字符串），则会使用正确的前缀生成 XML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-09T02:43:55.847

使用最新的 JAXB，您必须将 QUALIFIED 设置为 XmlSchema 注释的 elementFormDefault 字段。像这样：

```
@XmlSchema (
    elementFormDefault= XmlNsForm.QUALIFIED,
    ...) 
```

否则，JAXB 将添加一个自动前缀 (ns1, ns2, ...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:34:27.913

您的[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)实现不保证它将使用`@XmlSchema`注释中指定的前缀。 [**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)将如此，最新版本的[**JAXB RI**](http://jaxb.java.net/)也将如此。

JAXB RI 提供了一个`NamespacePrefixMapper`扩展，现在 MOXy 支持该扩展，以更好地控制所使用的前缀。

**了解更多信息**

*   [http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html](http://blog.bdoughan.com/2011/11/jaxb-and-namespace-prefixes.html)

# visual-studio-2010 - Visual Studio 2010 运行时库

> ID：12799783
> 
> 赞同：2
> 
> 时间：2012-10-09T12:12:55.350
> 
> 标签：visual-studio-2010

我编写了一个许多用户会在他们的计算机上使用的工具。但是我注意到，没有安装 Visual Studio 的用户无法打开我的可执行文件。该错误表明缺少 msvcp100.dll。我在互联网上发现了一个来自微软的可再发行包，它显然应该提供这些 dll。我的问题是：有没有另一种方法可以绕过这个问题？类似于项目属性中的选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T12:39:37.923

是的，您可以更改编译器设置以将 C++ 标准库类链接到您的程序中，而不是依赖 DLL。在“解决方案资源管理器”窗口的“属性”中右键单击您的项目。切换到发布配置（左上角）。C/C++、代码生成、运行时库设置。选择 /MT。

仅当您只有一个单一的整体 EXE 时才执行此操作。当您使用自己的 DLL 时，您确实需要 msvcr100.dll 和 msvcp100.dll 以便运行时库在所有模块之间共享。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T12:21:49.730

它是 C++ 运行时的一部分，目标机器需要它。有几种方法可以解决它。

请检查 Microsoft [MCVCP100.DLL的以下链接](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvc/thread/3a007184-80e9-4e25-b5ad-ff31b028c051)

# c# - 通过 ViewModel 设置 ImageSource 不起作用

> ID：12799784
> 
> 赞同：2
> 
> 时间：2012-10-09T12:12:57.187
> 
> 标签：c#, wpf, mvvm, datacontext, imagesource

我有一个 WPF 应用程序，我在其中使用了几个图像。大多数图像都在 XAML 代码中设置，因为它们不会再更改。我的*`Build Action`*所有图像文件都设置为**"Resource"**并且*`Copy to Output Directory`*设置为**"Do Not Copy"**。它们按预期显示，以下是如何设置它们的示例：

```
<ribbon:RibbonApplicationMenu SmallImageSource="/Voetbal;component/Images/Ball_16.png">
//or
<ribbon:RibbonButton LargeImageSource="/Voetbal;component/Images/Calendar_32.png" />
//or
<Image Source="/Voetbal;component/Images/remove.png" Width="16" Height="16" /> 
```

但我也有必须通过 C# 设置的图像。在用户控件中，我有一个 ListView，其中包含带有以下标记的特定列：

```
<GridViewColumn Header="" Width="32">
    <GridViewColumn.CellTemplate>
        <DataTemplate>
            <Image Source="{Binding Icon}" />
        </DataTemplate>
    </GridViewColumn.CellTemplate>
</GridViewColumn> 
```

ListView 的 ItemsSource 是一个通用列表，其中包含将填充 ListView 的项的实例。这些项目有两个字符串字段和一个 ImageSource（名为“Icon”）。我像这样设置图标属性：

```
var icon = new BitmapImage(new Uri("/Images/Gold_16.png", UriKind.RelativeOrAbsolute));
myViewModel.Items[0].Icon = icon; 
```

但问题是我在 ListView 中看不到图像。我也尝试过以下代码。我在 SO 和其他论坛上使用了这些来自类似问题的答案的文章。不是我一直懒惰或没有尝试任何东西，而是我不知道如何解决这个问题......

```
var icon = new BitmapImage(new Uri("/Voetbal;component/Images/Gold_16.png", UriKind.RelativeOrAbsolute));

//or
var icon = new BitmapImage();
icon.BeginInit();
icon.UriSource = new Uri("pack://application:,,,/Voetbal;component/Images/Gold_16.png");
icon.EndInit();

//or
var icon = new BitmapImage();
icon.BeginInit();
icon.UriSource = new Uri("pack://application:,,,/Images/Gold_16.png");
icon.EndInit(); 
```

**PS：**我知道我的 ViewModel 的绑定有效，因为这两个字符串属性正确显示在 ListView 的其他列中。

有谁知道我如何设置 ImageSource 并将其正确绑定到 ListView？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:25:30.130

```
myViewModel.Items[0].Icon = "Images/Gold_16.png"; 
```

请尝试上面的代码。将 Icon 属性设为字符串

# java - 子进程继承了什么？

> ID：12799786
> 
> 赞同：2
> 
> 时间：2012-10-09T12:13:03.790
> 
> 标签：java, linux, process, jpda

分叉的进程是否继承父进程绑定的任何（服务器）端口？
我有一个分叉子进程的 java 进程，从`netstat -anpt |grep`我看到父进程和子进程都绑定到同一个端口。
这可能吗？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:18:51.853

> 分叉的进程是否继承父进程绑定的任何（服务器）端口？

它继承了其父级的资源。这就是操作系统的行为方式。

> 有没有办法解决这个问题？

孩子必须关闭它不需要的所有资源。这在 C 中相对容易做到，但在 Java 中并不简单。可能有一种方法可以使用干净的资源集启动 Java 进程，但我不知道有什么方法可以做到这一点。

# android - 单个 AsyncTask 中的 Android 多个 Web 服务调用

> ID：12799796
> 
> 赞同：2
> 
> 时间：2012-10-09T12:13:23.120
> 
> 标签：android, android-asynctask

如何从单个 Asynctask 调用多个 Web 服务调用，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:22:25.717

它们是同步的吗？然后打电话给第一个，第二个...

```
public class WSTask extends AsyncTask<Void,Void,AccountsOverview_LABean>{

    @Override
    public void onPreExecute(){
        // show progress dialog or something if you want.
    }  

    @Override
    protected ArrayList<Object> doInBackground(Void... params) {
        try{
            ArrayList<Object> a=new ArrayList<Object>();
            a.add(WebService1()); // WebService1 returns the data that you want
            a.add(WebService2()); // WebService1 returns the data that you want
            a.add(WebService2()); // WebService1 returns the data that you want

            return a
            d.cancel();
        }
        return null;
    }

    @Override
    protected void onPostExecute(ArrayList<Object> param){
        // stop loading icon or loading dialog...

        // Manage the content of the arrayList like you need.

    } 

} //WSTask 
```

# android - Android :- 自定义 ExpandableListView : 无法展开组项以在 CustomListView 中显示子项

> ID：12799800
> 
> 赞同：2
> 
> 时间：2012-10-09T12:13:31.747
> 
> 标签：android, actionbarsherlock, expandablelistview

我正在尝试在 SherlockFragment 中实现自定义 ExpandableListView。我按照这个[示例](http://shenhengbin.wordpress.com/2012/03/25/android-practice-custom-expandablelistview-sample-2/)扩展了 BaseExpandableListAdapter 并创建了我的自定义适配器。

**这是我的问题，当我的可扩展列表显示在屏幕上时，我可以看到所有组项目，但是当我单击其中一个时，应该显示在其下方的子项目不会显示**。

1.  我尝试调试它，我放在适配器中的 onGroupExpandListener 从未被调用，实际上我在适配器的不同方法中放置了断点，当我单击其中一个组项时从未调用过。

2.  我尝试修改定义组项和子项的 xml 文件，以使它们可单击或可聚焦，但没有任何改变。我还尝试删除我放在那里的editText，Button和CheckBox，认为这可能会造成冲突......

3.  我认为问题可能是由于使用带有 SherlockFragment 的 ExpandableListView 的一些不兼容问题，但根据开发人员的[论坛](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/VxD_FS9wzas)，它不是。

所以我现在真的不知道在哪里看，这可能只是我在适配器中犯的一个菜鸟错误......任何帮助都会很棒，

提前致谢！

* * *

这是我的代码：

```
public class BuildingExpandalbeListAdapter extends BaseExpandableListAdapter {

private Context mContext;
private ExpandableListView mExpandableListView;
private SideEntity[] mSidesCollection;
private int[] groupStatus;

public BuildingExpandalbeListAdapter(Context pContext,
        ExpandableListView pExpandableListView,
        SideEntity[] pSidesCollection) {
    mContext = pContext;
    mSidesCollection = pSidesCollection;
    mExpandableListView = pExpandableListView;
    groupStatus = new int[mSidesCollection.length];
    mExpandableListView.setClickable(true);     
    setListEvent();
}

private void setListEvent() {

    mExpandableListView
            .setOnGroupExpandListener(new OnGroupExpandListener() {

                @Override
                public void onGroupExpand(int arg0) {
                    // TODO Auto-generated method stub
                    groupStatus[arg0] = 1;
                }
            });

    mExpandableListView
            .setOnGroupCollapseListener(new OnGroupCollapseListener() {

                @Override
                public void onGroupCollapse(int arg0) {
                    // TODO Auto-generated method stub
                    groupStatus[arg0] = 0;
                }
            });
}

@Override
public Object getChild(int groupPosition, int childPosition) {
    return mSidesCollection[groupPosition].getSegmentEntity(childPosition)
            .getName();
}

@Override
public long getChildId(int groupPosition, int childPosition) {
    return mSidesCollection[groupPosition].getSegmentEntity(childPosition)
            .getId();
}

@Override
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ChildHolder childHolder;
    if (convertView == null) {
        convertView = LayoutInflater.from(mContext).inflate(
                R.layout.building_list_item, null);

        childHolder = new ChildHolder();

        childHolder.editText1 = (EditText) convertView
                .findViewById(R.id.editText1);
        childHolder.checkBox1 = (CheckBox) convertView
                .findViewById(R.id.checkBox1);
        convertView.setTag(childHolder);
    } else {
        childHolder = (ChildHolder) convertView.getTag();
    }

    childHolder.editText1.setText(mSidesCollection[groupPosition]
            .getSegmentEntity(childPosition).getName());
    childHolder.checkBox1.setChecked(mSidesCollection[groupPosition]
            .getSegmentEntity(childPosition).hasDoor());
    return convertView;
}

@Override
public int getChildrenCount(int groupPosition) {
    // TODO Auto-generated method stub
    return mSidesCollection[groupPosition].getSegmentsCollection().size();
}

@Override
public Object getGroup(int groupPosition) {
    // TODO Auto-generated method stub
    return mSidesCollection[groupPosition];
}

@Override
public int getGroupCount() {
    // TODO Auto-generated method stub
    return mSidesCollection.length;
}

@Override
public long getGroupId(int groupPosition) {
    // TODO Auto-generated method stub
    return groupPosition;
}

@Override
public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    GroupHolder groupHolder;
    if (convertView == null) {
        convertView = LayoutInflater.from(mContext).inflate(
                R.layout.building_list_group, null);
        groupHolder = new GroupHolder();
        groupHolder.editText1 = (EditText) convertView
                .findViewById(R.id.editText1);
        groupHolder.editText2 = (EditText) convertView
                .findViewById(R.id.editText2);
        convertView.setTag(groupHolder);
    } else {
        groupHolder = (GroupHolder) convertView.getTag();
    }

    groupHolder.editText1
            .setText(mSidesCollection[groupPosition].getName());
    groupHolder.editText2.setText(Integer
            .toString(mSidesCollection[groupPosition]
                    .getSegmentsCollection().size()));

    return convertView;
}

class GroupHolder {
    EditText editText1;
    EditText editText2;
}

class ChildHolder {
    EditText editText1;
    CheckBox checkBox1;
}

@Override
public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return true;
}

@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return true;
}

} 
```

这是我使用此适配器的 SherlockFragment ：

```
public class BuildingFragment extends SherlockFragment {

private ViewGroup myViewGroup;
private View v;
private SideEntity[] mSideCollection;

private BuildingsDbAdapter buildingDataBase;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    if (container == null) {
        return null;
    }
    myViewGroup = container;
    myViewGroup.removeAllViews();
    v = inflater.inflate(R.layout.building_data_layout, container, false);
    buildingDataBase = new BuildingsDbAdapter(getSherlockActivity());
    return v;
}

@Override
public void onResume() {
    super.onResume();
    buildingDataBase.open();
    mSideCollection = BuildingsDbAdapter
            .fetchSideMatchingBuildingId(CustomTabFragmentActivity.mBuildingId);
    for (int i = 0; i < mSideCollection.length; i++) {
        BuildingsDbAdapter.fetchSegmentMatchingSideId(
                mSideCollection[i].getId(), mSideCollection[i]);
    }
    ExpandableListView mExpandableListView = (ExpandableListView) v
            .findViewById(R.id.expandableListView1);
    BuildingExpandalbeListAdapter mAdapter = new BuildingExpandalbeListAdapter(
            v.getContext().getApplicationContext(), mExpandableListView,
            mSideCollection);
    mExpandableListView.setAdapter(mAdapter);
    buildingDataBase.close();
}
} 
```

这是我的 xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_marginLeft="10dip"
        android:layout_weight="3"
        android:singleLine="true"
        android:text="Building name: "
        android:textColor="@android:color/black"
        android:textSize="13dip" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_marginLeft="10dip"
        android:layout_weight="4"
        android:singleLine="true"
        android:text="Columbia Tower"
        android:textColor="@android:color/black"
        android:textSize="15dip"
        android:textStyle="italic" />

   <!--  <Button
        android:id="@+id/button1"
        android:layout_width="0dip"
        android:layout_height="30dp"
        android:layout_gravity="right|center_vertical"
        android:layout_marginRight="10dip"
        android:layout_weight="1"
        android:background="@color/honeycombish_blue"
        android:drawableTop="@drawable/edit_query"
        android:gravity="center_vertical|center_horizontal" /> -->
</LinearLayout>

<ExpandableListView
    android:id="@+id/expandableListView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scrollbars="none"
    android:divider="@android:color/black"
    android:clipChildren="false"
    android:focusable="true" >
</ExpandableListView>

</LinearLayout> 
```

group_item：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:clickable="true"
android:gravity="center_vertical"
android:orientation="vertical" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/RelativeLayout"
    android:layout_marginTop="6dip"
    android:layout_toLeftOf="@+id/button1"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_marginLeft="5dip"
        android:layout_weight="2"
        android:singleLine="true"
        android:text="Side: "
        android:textColor="@android:color/black"
        android:textSize="13dip" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_marginLeft="5dip"
        android:layout_weight="2"
        android:singleLine="true"
        android:textColor="@android:color/black"
        android:textSize="15dip"
        android:textStyle="italic" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_marginLeft="5dip"
        android:layout_weight="5"
        android:singleLine="true"
        android:text="Number of Segment:"
        android:textColor="@android:color/black"
        android:textSize="13dip" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_marginLeft="5dip"
        android:layout_weight="2"
        android:ems="10"
        android:inputType="number"
        android:text="0"
        android:textSize="13dip" />
</LinearLayout>

<Button
    android:id="@+id/button1"
    android:layout_width="30dip"
    android:layout_height="30dip"
    android:layout_alignBottom="@+id/linearLayout1"
    android:layout_alignParentRight="true"
    android:layout_marginLeft="2dip"
    android:background="@android:color/transparent"
    android:drawableBottom="@drawable/ic_edit_shape"
    android:gravity="bottom|center_horizontal" />

</RelativeLayout> 
```

list_item ：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:clickable="true"
android:orientation="vertical" >

<Button
    android:id="@+id/button1"
    android:layout_width="30dip"
    android:layout_height="30dip"
    android:layout_alignBottom="@+id/linearLayout1"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="2dip"
    android:background="@android:color/transparent"
    android:drawableBottom="@drawable/ic_edit_shape"
    android:gravity="bottom|center_horizontal" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/RelativeLayout"
    android:layout_marginTop="6dip"
    android:layout_toRightOf="@+id/button1"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_marginLeft="5dip"
        android:layout_weight="2"
        android:singleLine="true"
        android:text="Name: "
        android:textColor="@android:color/black"
        android:textSize="13dip" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_marginLeft="5dip"
        android:layout_weight="2"
        android:singleLine="true"
        android:text="Shop1"
        android:textColor="@android:color/black"
        android:textSize="15dip"
        android:textStyle="italic" />

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="0dip"
        android:layout_height="30dip"
        android:layout_weight="1"
        android:hint="Door" />
</LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:32:36.850

好的，我发现我的错误，问题实际上来自 EditText 和我在组项目中使用的 Button。当我**将此小部件设置为不可点击和不可聚焦**时，对我的组项目的点击正常执行。

我应该早点检测到这个冲突，我之前尝试删除我的 Button 和我的 EditText，但我忘记了在某些时候我曾尝试添加`android:clickable="true"`到我的 RelativeLayout（认为它会允许点击我的组项目），而是它也造成了冲突：/无论如何，如果有人有类似的问题，请记住检查您的组项目中的任何视图是否可点击或可聚焦并将它们设置为`android:clickable="false" android:focusable="false"`

# mercurial - 为什么单独的 Mercurial 分支中的标签不起作用？

> ID：12799801
> 
> 赞同：2
> 
> 时间：2012-10-09T12:13:32.473
> 
> 标签：mercurial, tags, branch

我正在建立一个 Mercurial 存储库来跟踪第三方代码，大致遵循 Rudi 对[这个问题](https://stackoverflow.com/questions/3997600/vendor-branching-mercurial-style)的回答中描述的供应商默认分支方案。为了快速检索特定版本，我为每个供应商和默认版本创建标签。

我通过提交一个空的 .hgtags 来初始化存储库以建立默认分支，然后`hg branch vendor`导入第一个版本。添加新版本的过程如下所示：

```
hg up -C vendor
... load new version ...
hg commit -A -m "Adding version x.y.x"
hg tag vendor-x.y.z
hg up -C default
hg merge vendor
hg commit -m "Merging version x.y.z"
hg tag x.y.z 
```

在合并期间，我始终保留 .hgtags 的本地副本，因此结果是供应商分支的 .hgtags 包含所有供应商-xyz 标签，而默认分支 .hgtags 只有 xyz 标签。

据我了解，Mercurial 在处理标签时会考虑所有头部的 .hgtags。然而，当我运行时`hg tags`，结果只包含小费和 xyz 标签。无论我的工作目录更新到哪个分支，这都是一样的；它始终是默认分支 .hgtags 文件中的标签。

我可以更新到 vendor-xyz 标签，所以 Mercurial 确实看到了它们的存在，但更新似乎给了我来自供应商分支提示的代码。xyz 标签工作正常。

我过去主要使用 Git 和 SVN/CVS，所以我认为这是一个理解问题，而不是技术问题。为了以防万一，我确实在 Mercurial 的两个版本（2.0.2 和 2.3.2）上进行了尝试，并得到了相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:33:47.103

我不在我的 Mercurial 系统前面进行验证，但我认为问题是 Mercurial 只考虑来自拓扑头的 .hgtags，而不是分支头。例子：

```
[1]---[2]---[5]---[6]    Default
        \         /
         [3]---[4]       Vendor 
```

[6] 是拓扑头，[4] 和 [6] 是分支头。解决方案是在合并时保留对 .hgtags 的所有更改。

**编辑**

这是我的测试。合并后，我立即接受了本地 .hgtags 并且`hg tags`只在 .hgtags 上显示标签`default`。我无法更新到供应商标签，这与您所看到的不同。我正在使用 Mercurial 2.3.1。在 vendor 上创建另一个变更集并制作第二个拓扑头后，丢失的标签重新出现。

```
hg init test
cd test
echo >a
hg ci -Am 1
hg branch vendor
echo >b
hg ci -Am 2
hg tag v1
hg update default
hg tag d1
hg merge vendor --tool internal:local
hg ci -m Merge

@REM This only shows 'tip' and 'd1'
hg tags

hg update vendor
hg tags
hg update d1

@REM This fails to update.
hg update v1

@ Add another topological head by committing to vendor
hg update vendor
echo >c
hg ci -Am 3

@ Now all tags are visible and work.
hg tags
hg update v1
hg update d1 
```

和输出：

```
C:\>hg init test
C:\>cd test
C:\test>echo  1>a
C:\test>hg ci -Am 1
adding a
C:\test>hg branch vendor
marked working directory as branch vendor
(branches are permanent and global, did you want a bookmark?)
C:\test>echo  1>b
C:\test>hg ci -Am 2
adding b
C:\test>hg tag v1
C:\test>hg update default
0 files updated, 0 files merged, 2 files removed, 0 files unresolved
C:\test>hg tag d1
C:\test>hg merge vendor --tool internal:local
1 files updated, 1 files merged, 0 files removed, 0 files unresolved
(branch merge, don't forget to commit)
C:\test>hg ci -m Merge
C:\test>hg tags
tip                                4:80759c41b3cc
d1                                 0:17b05ed457d1
C:\test>hg update vendor
1 files updated, 0 files merged, 0 files removed, 0 files unresolved
C:\test>hg tags
tip                                4:80759c41b3cc
d1                                 0:17b05ed457d1
C:\test>hg update d1
0 files updated, 0 files merged, 2 files removed, 0 files unresolved
C:\test>hg update v1
abort: unknown revision 'v1'!
C:\test>hg update vendor
2 files updated, 0 files merged, 0 files removed, 0 files unresolved
C:\test>echo  1>c
C:\test>hg ci -Am 3
adding c
C:\test>hg tags
tip                                5:a2c0fe73a9f1
v1                                 1:3168d0f4e5e5
d1                                 0:17b05ed457d1
C:\test>hg update v1
0 files updated, 0 files merged, 2 files removed, 0 files unresolved
C:\test>hg update d1
0 files updated, 0 files merged, 1 files removed, 0 files unresolved 
```

# html - 在这种情况下垂直对齐的正确方法是什么？

> ID：12799808
> 
> 赞同：2
> 
> 时间：2012-10-09T12:14:00.527
> 
> 标签：html, css, vertical-alignment

垂直对齐东西似乎是一门黑暗的艺术。这是我当前站点代码的一部分（特别是标题）。该网站的编码是这样的，以使页脚停靠在页面底部。

**HTML：**

```
<div id="header-wrap" class="full_width">
  <div id="header-container" class="dc1">
    <div id="header" class="thin_width rel">
      <a href="/"><img src="/static/img/header.jpg" id="logo" alt="coming soon" title="coming soon"></a>
      <ul>
        <li><a href="/posts/list/">Link 1</a></li>
        <li><a href="/posts/create/">Link 2</a></li>
        <li><a href="/about">Link 3</a></li>
      </ul>
    </div>
  </div>
</div> 
```

**CSS：**

```
#header-wrap { top: 0; left: 0; }
#header-container { height: 60px; border-bottom: 1px solid #E5E5E5; }
#header { margin: 0 auto; }
#header h1 { color: #beffbf; text-align: left; width: 290px; margin: 0; position: absolute; left: 0; top: 20px; }
#header h1 em { color: #90b874; font-size: small; display: block; }
#header ul { margin: 0; padding: 0; list-style: none; position: absolute; top: 35px; right: 0; }
#header ul li { float: left; margin-right: 5px; }
#header ul li a{ color: #90b874; font-weight: bold; font-size: 1.4em; margin-right: 5px; text-decoration: none; }
#header ul li a:hover { color: #beffbf;  }
.dc1 { background-color: #FFFFFF; }
.rel { position: relative; }
.full_width { width: 100%; }
.thin_width { width: 450px; }​ 
```

[这是一个 JSFiddle 示例](http://jsfiddle.net/AHsBN/)

我应该如何尝试垂直对齐右侧的链接和徽标？
我想尝试在不使用固定填充的情况下执行此操作，因为如果我更新徽标或链接高度会很痛苦。

那么，在这种情况下垂直对齐的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:24:59.607

`display:table-cell`很适合这个

```
#header-wrap { top: 0; left: 0; }
#header-container { height: 60px; border-bottom: 1px solid #E5E5E5; display:table-cell; vertical-align:middle; }
#header { margin:0 auto; overflow:auto;} 
```

查看演示[http://jsfiddle.net/AHsBN/2/](http://jsfiddle.net/AHsBN/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:17:30.397

您需要做的就是设置 element.style

`#header ul { top:0;}`和#header`{ position: relative;}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:46:54.823

这是我的解决方案，不需要定位，高度等，只需根据需要调整垂直对齐，顶部，中间，底部或基线等（我使用高度：300px`#header-container`来更容易地说明`vertical-align: middle;`

```
#header > a { background: red; }
ul { background: green; }
#header-container { background: blue; height: 300px; }

#header > a, ul { display: block; }
li { display: inline-block; }
#header > a { float: left; }
ul { float: right; font-size: 200%; }
#header-container { display: table; width: 100%; }
#header { display: table-cell; vertical-align: middle; } 
```

也无需在 CSS 表中清除浮动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T13:18:05.577

**HTML**

```
<div id="header">
    <a href="./" class="logo"><img src="http://www.google.co.in/images/srpr/logo3w.png" alt=""></a>
    <ul>
        <li><a href="/posts/list/">Link 1</a></li>
        <li><a href="/posts/create/">Link 2</a></li>
        <li><a href="/about">Link 3</a></li>
    </ul>
</div> 
```

**CSS**

```
#header { position: relative; background: #ddd; }
#header a.logo {display: inline-block; vertical-align: middle; *display: inline; zoom: 1;}
#header ul { display: inline-block; vertical-align: middle; *display: inline; zoom: 1; position: absolute; right: 0px; top: 50%; height: 20px;}
#header ul li { display: inline; position: relative; top: -50%;  } 
```

示例：http: [//jsfiddle.net/gZceQ/4/](http://jsfiddle.net/gZceQ/4/)

上面的代码应该适用于所有浏览器:)

# php - PDO 选择语句不返回任何内容 (FETCH_ASSOC)

> ID：12799809
> 
> 赞同：1
> 
> 时间：2012-10-09T12:14:04.647
> 
> 标签：php, pdo

我正在尝试从 mySQL 数据库中检索记录，但没有选择任何内容。我正在使用以下 php 函数：

```
function printButton($conn){
$your_variable = 1;
$knappar = $conn->prepare('SELECT * FROM knappar WHERE pid  < :parameter');
$knappar->bindParam(':parameter', $your_variable, PDO::PARAM_INT);
$knappar->execute();

            //Loops boxes
          $count = 1;
          while ($row = $knappar->fetch(PDO::FETCH_ASSOC)) {
            echo "<a href='#'><div class='box' id='div_item".$count."'>";
            echo $row['header'];
            echo $row['id'];

            echo "</div></a>";
            $count = $count + 1;
            }

} 
```

如果我更改“WHERE pid = 1”而不是“<：parameter”，它工作正常。我究竟做错了什么？

我将其更新为现在的样子：

```
function printButton($conn){
$your_variable = 1;
$knappar = $conn->prepare('SELECT header FROM knappar WHERE pid < :parameter');
$knappar->bindParam(':parameter', $your_variable, PDO::PARAM_INT);
$knappar->execute();

            //Loops boxes
      $results = $knappar -> fetchAll(PDO::FETCH_ASSOC);
      foreach ($results as $row){

      echo $row['header'];
      echo '<br />';

      }

} 
```

有了上面的例子，仍然没有输出。pid 值在数据库中是 int(11) 并且所有行的值都是 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:17:26.793

$knappar -> fetch(PDO::FETCH_ASSOC) 只获取结果集的下一行。使用 fetchAll 获取整个结果集。

然后，您可以使用 foreach 遍历返回的数组。

当然，我不知道为什么它只返回第一行，但试一试。

# erlang - -on_load 在 erlang 中如何工作？

> ID：12799823
> 
> 赞同：4
> 
> 时间：2012-10-09T12:15:04.233
> 
> 标签：erlang

我似乎不完全理解 -on_load 指令是如何工作的。在我编写的一个模块中，我有一个函数来初始化一个 ets 表并用一些数据填充它。此函数在显式调用时正常工作。但是：我认为如果在加载模块时“自动”填充 ets 表会很好。但这似乎不起作用，因为`ets:info(filesig)`在加载模块后告诉我“未定义”。相关代码如下所示：

```
...

-on_load(init/0),

init() ->
    % load filesig database into ETS
    {_, Signatures} = file:consult("path to a file"),

    ets:new(filesig, [set, protected, named_table]),
    ets:insert(filesig, Signatures),

    ok.

... 
```

我已经在 erlang shell 中对其进行了测试。对我有什么提示，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T15:19:11.557

[手册](http://www.erlang.org/doc/reference_manual/code_loading.html#id84067)说此代码在新生成的进程中运行，该进程在函数返回时立即终止。

一旦拥有进程终止，您创建的 ETS 表将被删除。这是标准的 ETS 行为。这是[ets 手册页](http://www.erlang.org/doc/man/ets.html)中提到的内容：

> 请注意，表没有自动垃圾收集。即使没有任何进程对表的引用，它也不会自动销毁，除非所有者进程终止。可以使用 delete/1 显式销毁它。默认所有者是创建表的进程。表所有权可以在进程终止时通过使用 heir 选项或通过调用 give_away/3 显式转移。

# sql-server - 如何在 SQL SERVER 2008 中获取表名、列名、列描述、列值

> ID：12799824
> 
> 赞同：2
> 
> 时间：2012-10-09T12:15:13.240
> 
> 标签：sql-server, sql-server-2008

我有一个名为用户的表：

```
UserID  UserName  UserPwd
  1      zhang     123456
  2      li        455667
  3      wang      332222 
```

我想得到如下结果（UserID='1'）：

```
tableName   columnName   columnDescribe      columnValue
  Users       UserName     The user name         zhang
  Users       UserPwd      The user password     123456 
```

谁能帮我吗？

```
SELECT t.name AS [tableName],
   c.name AS [columnName],
   cd.value AS [columnDescribe]
FROM  sysobjects t
INNER JOIN sysusers u
 ON  u.uid = t.uid
LEFT OUTER JOIN sys.extended_properties td
 ON  td.major_id = t.id
    AND  td.minor_id = 0
 AND  td.name = 'MS_Description'
INNER JOIN syscolumns c
 ON  c.id = t.id
LEFT OUTER JOIN sys.extended_properties cd
 ON  cd.major_id = c.id
 AND  cd.minor_id = c.colid
 AND  cd.name = 'MS_Description'
WHERE t.type = 'u' AND t.name='Users'
ORDER BY t.name, c.colorder 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:24:18.260

试试这个：

```
select  'Users' as tableName,
        'UserName' as columnName ,
        'The user name' as columnDescribe,
        UserName as columnValue 
from Users where [UserID]=1 
union all
select  'Users' as tableName,
        'UserPwd' as columnName ,
        'The user name' as columnDescribe,
        UserPwd as columnValue 
from Users where [UserID]=1 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!3/40cab/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:59:23.330

试试这个：

```
select OBJECT_NAME(object_id) as tablename,
       s.name as columnname,
       ex.value as 'columnDescribe',
       CASE WHEN s.name='Username' then UserName else UserPwd end from sys.columns s inner join users_1
on object_id=OBJECT_id('users_1') and s.name in('UserName','UserPwd')
inner join sys.extended_properties ex
on object_id=OBJECT_id('users_1') and s.name = ex.name
where UserID=1 
```

# iphone - 从 twitter api 获取数据

> ID：12799829
> 
> 赞同：-1
> 
> 时间：2012-10-09T12:15:27.563
> 
> 标签：iphone, objective-c, ios, core-data, twitter

我正在尝试获取 Twitter 提要。我正在使用这个网址

```
https://twitter.com/status/user_timeline/wwwkrcgenkbe.json?count=25&from=wwwkrcgenkbe 
```

此 url 提供以下 JSON 格式

```
[

    {
        "place": null,
        "retweeted": false,
        "in_reply_to_status_id_str": null,
        "in_reply_to_screen_name": null,
        "possibly_sensitive": false,
        "in_reply_to_status_id": null,
        "truncated": false,
        "in_reply_to_user_id_str": null,
        "user": { … },
        "in_reply_to_user_id": null,
        "contributors": null,
        "coordinates": null,
        "retweet_count": 0,
        "favorited": false,
        "created_at": "Tue Oct 09 08:54:53 +0000 2012",
        "geo": null,
        "source": "<a href=\"http://www.facebook.com/twitter\" rel=\"nofollow\">Facebook</a>",
        "id_str": "255592155345727489",
        "id": 255592155345727500,
        "possibly_sensitive_editable": true,
        "text": "Vorige week won Nele Vangeneugden het shirtje dat Jelle Vossen droeg in de Europa League wedstrijd tegen... http://t.co/mwxSsBLP"
    }, 
```

我正在按照以下方式进行操作。首先我添加这个方法。

```
 for (NSDictionary *genkInfo in tweets ) {
            NSLog(@"Komt in deze methode");
            [Twitter twitterWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext];
            NSLog(@"tweets: %@", tweets); 
        } 
```

然后我以这种方式将值存储在我的核心数据数据库中。

```
 + (Twitter *)twitterWithGenkInfo:(NSDictionary *)genkInfo
                inManagedObjectContext:(NSManagedObjectContext *)context
{
    NSLog(@"till here");
    Twitter *twitter= nil;
    NSLog(@"till here 2");
    twitter = [NSEntityDescription insertNewObjectForEntityForName:@"Twitter"
                                               inManagedObjectContext:context];
    NSLog(@"tille here3");
    twitter.tweet      = [genkInfo objectForKey:TWITTER_TWEET];
    twitter.date       = [genkInfo objectForKey:TWITTER_DATE];
     NSLog(@"till here 4");
    NSLog(@"tweet is: %@",twitter.tweet);
    NSLog(@"date is: %@",twitter.date);

    return twitter;
} 
```

此方法在我的视图控制器中以下列方式调用。

```
NSArray *tweets         = [GenkData getTweets];

 for (NSDictionary *genkInfo in tweets ) {
                NSLog(@"Komt in deze methode");
                [Twitter twitterWithGenkInfo:genkInfo inManagedObjectContext:document.managedObjectContext];
            } 
```

但我总是遇到这个错误。

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSNull objectForKey:]: unrecognized selector sent to instance 0x2751678' 
```

有人可以帮忙吗？

提前致谢！

日志文件

```
Log is: (
        {
        contributors = "<null>";
        coordinates = "<null>";
        "created_at" = "Tue Oct 09 12:53:08 +0000 2012";
        favorited = 0;
        geo = "<null>";
        id = 255652115341508608;
        "id_str" = 255652115341508608;
        "in_reply_to_screen_name" = "<null>";
        "in_reply_to_status_id" = "<null>";
        "in_reply_to_status_id_str" = "<null>";
        "in_reply_to_user_id" = "<null>";
        "in_reply_to_user_id_str" = "<null>";
        place = "<null>";
        "possibly_sensitive" = 0;
        "possibly_sensitive_editable" = 1;
        "retweet_count" = 0;
        retweeted = 0;
        source = "<a href=\"http://www.facebook.com/twitter\" rel=\"nofollow\">Facebook</a>";
        text = "KRC Genk mobile: de Iphone APP (al meer dan 1 mnd beschikbaar) werd reeds 2226 keer gedownload, de Android APP... http://t.co/QidTcLJS";
        truncated = 0;
        user =         {
            "contributors_enabled" = 0;
            "created_at" = "Fri Nov 20 18:57:28 +0000 2009";
            "default_profile" = 0;
            "default_profile_image" = 0;
            description = "The official twitter account from Belgian Soccer team KRC Genk. Belgium champions 2011\. Qualified for UEFA Euro League 2012-2013.";
            "favourites_count" = 1;
            "follow_request_sent" = "<null>";
            "followers_count" = 4831;
            following = "<null>";
            "friends_count" = 21;
            "geo_enabled" = 0;
            id = 91402003;
            "id_str" = 91402003;
            "is_translator" = 0;
            lang = en;
            "listed_count" = 94;
            location = "Genk -  Belgium";
            name = "KRC Genk";
            notifications = "<null>";
            "profile_background_color" = C0DEED;
            "profile_background_image_url" = "http://a0.twimg.com/profile_background_images/84123014/youtubebg.jpg";
            "profile_background_image_url_https" = "https://si0.twimg.com/profile_background_images/84123014/youtubebg.jpg";
            "profile_background_tile" = 0;
            "profile_image_url" = "http://a0.twimg.com/profile_images/654317237/twitter_thumb_normal.jpg";
            "profile_image_url_https" = "https://si0.twimg.com/profile_images/654317237/twitter_thumb_normal.jpg";
            "profile_link_color" = 0084B4;
            "profile_sidebar_border_color" = C0DEED;
            "profile_sidebar_fill_color" = DDEEF6;
            "profile_text_color" = 333333;
            "profile_use_background_image" = 1;
            protected = 0;
            "screen_name" = wwwkrcgenkbe;
            "statuses_count" = 4230;
            "time_zone" = "<null>";
            url = "http://www.krcgenk.be";
            "utc_offset" = "<null>";
            verified = 0;
        };
    },
-[__NSCFNumber managedObjectContext]: unrecognized selector sent to instance 0x9331b40 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:21:49.863

executeGenkFetch 似乎返回一个空数组或空字典数组。正如@ilmiacs 所说，发布推文的输出。

# php - 用ajax上传图片表单不起作用

> ID：12799834
> 
> 赞同：0
> 
> 时间：2012-10-09T12:15:40.990
> 
> 标签：php, image, forms, upload

您好，我想上传一些图片到我的服务器。当我没有将带有 ajax.load 的页面加载到另一个页面时，它可以工作。因此，通过直接链接它可以正常工作。但我想点击一个链接，打开上传表单并上传图片（全部在一个窗口中）。这是因为页面在上传之前刷新还是另一个问题？不知道如何解决这个问题。

代码：

```
<?php
include('includes/connect.php');

if(isset($_POST['uploadImg'])){
$extension = end(explode(".", $_FILES["file"]["name"]));
$name = $_FILES["file"]["name"];

if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
     mysql_query("INSERT INTO images (itemID,imgPath,imgName,imgExtension,imgAlt)               VALUES (".$_POST['itemNumber'].",'upload','".$name."','".$extension."','".$name."')")or die('kan niet uploaden'.mysql_error()); 
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Uw afbeelding is toegevoegd aan item".$_POST['itemNumber'];
      echo "<a id='uploadNew' href='#'>Nog een item uploaden</a>";
      }                 

mysql_query("INSERT INTO images (itemID,imgPath,imgName,imgExtension,imgAlt)                VALUES (".$_POST['itemNumber'].",'upload','".$name."','".$extension."','".$name."')")or die('kan niet uploaden'.mysql_error());     
}

?>
<form method="post" enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" />
Toevoegen aan: 
<select name="itemNumber">
<? 
            $result = mysql_query("SELECT * FROM items");
                while($row = mysql_fetch_array($result))
                  {
                      echo '<option name="itemVal" value="'.$row['itemID'].'">'.$row['itemTitle'].'</option>';
                      echo "<br />";
                  }
        ?>
</select>
<input type="submit" name="uploadImg" value="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:26:21.033

ajax不能直接上传你的图片，你应该使用一些插件来上传图片，

以前我使用这个插件（ajax.form）来即时[上传图片](http://www.malsup.com/jquery/form/)。

按照链接，在这个链接中是一个简单的例子，说明如何使用这个插件和上传图片.. [http://blog.webtech11.com/2012/03/18/ajax-based-instant-image-upload.html](http://blog.webtech11.com/2012/03/18/ajax-based-instant-image-upload.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:23:46.340

问题来自于表单在加载 AJAX 之前被发送到父页面的事实。您发布的部分页面是通过第二个 HTTP 请求检索的，并且没有设置任何 POST 参数。

您最好的选择是在加载 AJAX 的父页面中添加 php 脚本。还要在表单元素中指定“目标”属性，以便跟踪哪个服务器页面正在处理请求。

# javascript - 简单的广告模块 drupal 7 广告点击后消失

> ID：12799836
> 
> 赞同：0
> 
> 时间：2012-10-09T12:15:49.117
> 
> 标签：javascript, html, css, drupal-7

我正在使用一个简单的广告模块来显示一个广告块，它会显示广告，但是如果我单击站点中的任何位置，广告块就会停止显示。要再次显示它，我需要再次编辑内容并激活该广告，但在再次激活广告之后它产生了同样的问题。问题是我必须在每次点击后一次又一次地去后端激活该广告。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:16:59.007

我遇到了和你一样的问题，你需要做的就是将你的广告添加到一个广告系列中，然后设置一些展示次数/点击次数或天数，这取决于你，在你这样做之后，从后端激活每个广告并它会为你工作。

# magento - 如何在 magento 管理仪表板上加载 js 文件

> ID：12799838
> 
> 赞同：7
> 
> 时间：2012-10-09T12:15:49.727
> 
> 标签：magento

我正在尝试在 magento admin 的仪表板页面上通过 XML 加载 js 文件，但无法正确处理。

这是我在配置文件中添加的部分代码：

```
<config>
    <adminhtml>
        <layout>
            <updates>
                <anattadesign_abandonedcarts>
                    <file>my_extension.xml</file>
                </anattadesign_abandonedcarts>
            </updates>
        </layout>
    </adminhtml>
</config> 
```

我的内容`my_extension.xml`是`/app/design/adminhtml/default/default/layout/`：

```
<layout>
    <default>
        <reference name="head">
            <action method="addJs"><script>my_extension/adminhack.js</script></action>
            <action method="addJs"><script>prototype/prototype.js</script></action>         
        </reference>
    </default>
</layout> 
```

我知道我正在尝试以这种方式为整个管理员加载一个 js 文件，但我想知道两者，在某个页面上加载，以及如果我想在某个页面上加载它如何找出名称和如果`default`是正确的，使其加载到所有管理页面上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T12:22:40.730

确实，使用`default`应该在所有页面上加载它。

要将其加载到仅管理仪表板上，请使用带有下划线的（完整的 3 个元素）路由作为页面的分隔符。对于仪表板，这是 Adminhtml/(controllers)/Dashboard(Controller)/index(Action)。

```
<layout>
  <adminhtml_dashboard_index>
    <reference name="head">
            <action method="addJs"><script>my_extension/adminhack.js</script></action>
            <action method="addJs"><script>prototype/prototype.js</script></action>         
        </reference>
  </adminhtml_dashboard_index>
</layout> 
```

注意我没有测试过这段代码，但我认为它应该这样做。

# c++ - 函数重载和类型转换解析

> ID：12799841
> 
> 赞同：3
> 
> 时间：2012-10-09T12:16:10.707
> 
> 标签：c++, operator-overloading, type-conversion, overloading

为什么我们在下面的代码中看不到“对重载函数的未定义调用”错误？仅仅因为 int 是内置类型？在标准中的哪里可以找到转换为内置类型的保证，例如在下面的代码中？...谢谢！

```
#include <iostream>
using namespace std;

class B {
public:
operator int(){ return 0; }
};

class A {
public:
A( int i ) { };
};

void f ( int i ) { cout << "overload f(int) was used!";};
void f ( A a )   { cout << "overload f(A) was used!" ;};

int main () {
  B b;
  f( b );
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T12:22:50.443

它与内置类型无关。您`operator int`为`B`. 这意味着您提供了从`B`到的用户定义转换`int`。根据标准的 12.3.4，“最多一个用户定义的转换（构造函数或转换函数）被隐式应用于单个值。” 这就是它不转换为 的`A`原因，因为这需要两次隐式转换。

确定何时发生这种情况的规则有些复杂，因此很多人建议您避免提供用户定义的转换。定义这些的另一种方法是为构造函数提供一个参数；您可以添加`explicit`到开头以避免它被隐式应用。

当您调用`f(b)`时，编译器会应用您提供的转换来转换`b`为`int`。如果要将其转换为`A`，则必须定义从`B`to的转换`A`，或显式应用其中一种转换，例如`f(int(b))`or `f(A(b))`。

# c - 运行gdb时Windows中的堆栈溢出

> ID：12799845
> 
> 赞同：0
> 
> 时间：2012-10-09T12:16:15.487
> 
> 标签：c, gdb, stack-overflow

我想我在 Windows 上的 emacs 中通过 gdb 运行我的单元测试时遇到了堆栈溢出问题。

我在 linux 上运行完全相同的单元测试没有问题

我也知道我在这些单元测试中使用了一个内存效率极低的基于堆栈的 .ini 文件解析器，因此发生堆栈溢出似乎是合理的可能性。

我注意到一些在 Windows 上失败的单元测试在 Linux 上通过。进一步的调查揭示了 for 循环中的（基于堆栈的）计数器在 for 循环执行中的随机点处将自身重置为零，并且 for 循环正在检查的数组中的（基于堆栈的）值更改为相同的索引值

我注意到 gdb 似乎在 Windows 下分配了自己的执行线程 - 有没有办法找出线程分配了多少堆栈空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:36:34.037

Linux 和 Windows 之间的区别之一是，在 Windows 上，堆栈大小必须在编译时设置（有两种大小，初始和预定义的保留限制）。不确定您使用的编译器的默认值是什么，但您可以尝试使用 --stack 参数 (gcc) 来增加它。

在 Linux 上，堆栈大小是动态的，通常由系统管理员设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:19:08.943

那么，也许 Windows 对每个进程的最大堆栈数量的限制比 Linux 更严格？

[本页](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540620%28v=vs.85%29.aspx)详细介绍了如何在 Windows 中调试堆栈溢出。它不是基于 gdb，但也许你仍然可以推断出一些东西。

# android - 带有 Eclipse 的 Android - 等待 HOME ('android.process.acore') 启动？

> ID：12799846
> 
> 赞同：13
> 
> 时间：2012-10-09T12:16:16.873
> 
> 标签：android, eclipse

当我尝试使用 Eclipse 运行 Hello World 应用程序时，控制台显示“等待 HOME ('android.process.acore') 启动...”，但即使我等待半小时，除了模拟器在黑色背景上显示“Android”标志。当我尝试通过 AVD Manager 直接启动模拟器时也会发生同样的情况。PATH 变量设置正确，我已经安装了最新版本的 eclipse 和 Android SDK。

发生这种情况的原因可能是什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T12:31:21.457

问题出在 SD 卡中，请按照以下步骤操作，

1）从**eclipse菜单栏中选择****Window**选项

 **2）转到**AVD Manager**并选择**模拟器**（启动后得到probs）。

3) 选择**Emulator**后，单击AVD Manager 右侧的**Edit按钮**

4）转到**SD卡大小**给`128`然后点击' **Edit AVD** '选项下来

5）并**重新启动**你的模拟器

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-15T11:31:04.440

当我在“仿真选项：”下选择“使用主机 GPU”选项时，它对我有用。

您可以在虚拟设备的编辑窗口下找到该选项。

![在此处输入图像描述](../Images/08f3651015a42719fec7f9ffa730292b.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-24T11:44:02.823

尝试可能是问题的路径。

我的建议 - 如果你有一部安卓手机..请使用 USB 调试它并在你的手机上调试你的应用程序。您将从模拟器的长时间运行中解脱出来

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-11T21:35:53.000

“等待 HOME ('android.process.acore') 启动..”

我发现这里的关键字是“等待”。我放弃了在速度较慢的笔记本电脑上多次等待。当我切换到更快的桌面并将其放置一段时间后，模拟器最终启动了。想想你的 android 设备启动需要多长时间，然后考虑它作为模拟 ARM 处理器 + SoC 架构的其余部分运行，仅在你实际生活中的 x86 处理器的 1 个内核上运行。

此外，我给 SD 卡一个 GB 左右的“以防万一”，这只会使其速度更慢，因为它必须在慢速笔记本电脑硬盘驱动器上分配这个空间，然后才能开始启动模拟器。

只是有点耐心对我有用，一旦模拟器启动并运行，不要关闭它！您可以简单地关闭您在虚拟设备上测试的程序，然后在测试代码时一次又一次地使用 eclipse 重新上传/安装。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T18:04:25.807

你确定路径设置正确吗？路径变量应设置为 SDKHOME/tools 和 SDKHOME/platform-tools，其中 SDKHOME 是您的 android sdk 主文件夹。

大多数时候，人们忘记了这一点，只是将路径设置为 /platform-tools 或仅设置另一个路径。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-05T20:26:23.657

另一种可能是您的计算机磁盘空间不足。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-18T08:05:52.690

等待 HOME ('android.process.acore') 启动...

我没有运行我的模拟器，然后我开始运行我的应用程序。但是我的模拟器一直黑屏，并且有控制台 ms“等待 HOME ('android.process.acore') 启动......”。

我停止我的应用程序，然后在运行我的应用程序之前设置我的模拟器。它运行完美。

首先从 Window -> AVD Manager -> (select your emulator)开始运行你的模拟器

完毕。**

# jquery - 启用/禁用元素当 div 元素获得焦点时

> ID：12799854
> 
> 赞同：-5
> 
> 时间：2012-10-09T12:16:40.910
> 
> 标签：jquery, onfocus

我在 div 中有一定数量的 Input 元素。当 div 内的任何输入元素获得焦点时，我想禁用 div 外的元素？如何在 jquery 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:22:53.127

假设以下 HTML 为例：

```
<div class="div">
     <input type="text" />
     <input type="text" /> 
     <input type="text" /> 
</div>

<input type="text" class="b"/> 
```

可以使用以下脚本，使用[**焦点**](http://api.jquery.com/focus)和[**模糊**](http://api.jquery.com/blur/)事件：

```
$('.div input[type="text"]').on('focus', function(){
    $('.b').prop('disabled', true);

}).on('blur', function(){
     $('.b').prop('disabled', false); 
}); 
```

### [检查小提琴](http://jsfiddle.net/9wZ4P/)

# git - 配置 git 只跟踪一个文件扩展名

> ID：12799855
> 
> 赞同：30
> 
> 时间：2012-10-09T12:16:42.197
> 
> 标签：git, file-extension, gitignore, subdirectory

我有一个包含多种不同文件的目录树。父目录上有 300 个目录。每个目录可以有其他子目录。

我只想在所有子目录上跟踪 *.cocci。这是我的 .gitignore：

```
*
!*.cocci 
```

但它不起作用，因为子目录上的文件没有被跟踪。如何告诉 git 我只想在所有子目录上跟踪 *.cocci？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-09T16:11:11.497

阅读[这个问题](https://stackoverflow.com/questions/9162919/git-whitelisting-files-in-a-complex-directory-structure/9227991#comment17298028_9227991)。

你要：

```
# Blacklist everything
*
# Whitelist all directories
!*/
# Whitelist the file you're interested in. 
!*.cocci 
```

**请注意，这将仅** 跟踪`*.cocci`文件。您的不起作用，因为您忽略了**所有内容**（这是第一行），它忽略了*所有子目录*。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-10T12:32:21.890

要扩展@simont 答案，如果我们想 `*.cocci`将给定目录及其子目录的文件列入白名单，我会错误地输入：

```
directory/*
!directory/*/
!directory/*.cocci 
```

这似乎不`*.cocci`包括`directory/subtree`.

为了找到所有`*.cocci`子目录中的所有文件，`directory`输入以下内容：

```
directory/**
!directory/*/
!directory/**/*.cocci 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-24T00:00:49.517

在 .gitignore中无法取消忽略目录`!dir`，但仍然可以手动添加目录：

```
git add dir -f 
```

因此，如果 .gitignore 文件如下所示：

```
*
!*.txt 
```

然后，当您执行`git add .`新`*.txt`文件时，就会添加。新目录不会自动添加，必须手动添加`git add dir -f`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:31:34.747

你试过`!*/*.cocci`而不是你的`!*.cocci`吗？

# ruby-on-rails - 路线在 Rails 3 中运行不正常

> ID：12799856
> 
> 赞同：0
> 
> 时间：2012-10-09T12:16:43.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我的网址是[http://www.abc.com/login](http://www.abc.com/login)

我已经创建了路线

**匹配“登录”=>“会话#新”**

**现在工作正常我想要的是**

我的新网址是[http://www.abc.com/login/hello](http://www.abc.com/login/hello)

**有时会使用你好有时不会**

我的网址是[http://www.abc.com/login](http://www.abc.com/login)

我的新路线是

**匹配“登录/：id”=>“会话#新”**

**当我使用 hello 时，它可以工作，但是当我不在 url 中使用 hello 时，它会显示错误**

```
Routing Error
No route matches [GET] "/login/hello" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:36:01.067

“当我使用 hello 时它可以工作，但是当我不在 url 中使用 hello 时，它会显示错误” “没有路由匹配 [GET] “/login/hello”

将这两个加起来，你在控制器或视图中添加“hello”，否则 Ruby 不会显示包含“hello”的错误......

# coffeescript - 如何使用网络风暴运行咖啡脚本

> ID：12799858
> 
> 赞同：7
> 
> 时间：2012-10-09T12:16:46.750
> 
> 标签：coffeescript, webstorm

我在使用 webstorm 运行咖啡脚本配置时遇到问题。如果我在运行配置中启用咖啡脚本插件，我会收到以下错误

```
/usr/bin/coffee app.coffee
env: node: No such file or directory 
```

我在支持论坛中尝试了将路径变量添加到环境变量中的解决方案，但仍然没有修复。

![在此处输入图像描述](../Images/803834613c9c1613d15f7a6355a3f516.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T11:35:06.273

因为，还没有找到可执行文件。

转到终端并输入：`echo NODE_PATH`或`echo $NODE_PATH`查看文件在哪里。

在 Windows 上，C:\Users[YOUR_USER_NAME]\AppData\Roaming\npm\node_modules\coffee-script\bin\coffee

因此，使用 Spotlight 搜索工具查看 /usr/local/npm ..... 或其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T18:52:24.597

尝试将**绝对路径**传递给您的 app.js。Webstorm 有时会混淆相对路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-23T20:58:09.270

在 Windows 上，我遇到了很多麻烦，你必须找到你的“咖啡”文件。顺便说一句，这也可以帮助你。

### 安装 Node.js 并安装 CoffeScript 插件后：

1.  ****[从CoffeeScript.org](http://coffeescript.org/)****下载**最新版本（或源代码）**
***   **解压**到任何你想要的地方。就我而言，我在 **D:\tools\上解压缩了****jashkenas-coffeescript-1.10.0-0-gf26d33d.tar.gz*****   **选中“使用 CoffeeScript 插件运行”**

    *   ****在菜单“运行 > 编辑配置...”上****定位**咖啡可执行文件：****** 

 ****[![在此处输入图像描述](../Images/14e165701fda79231a2291b4032c4ae8.png)](https://i.stack.imgur.com/nBiDI.png)****

# iphone - 密码存储在内存中

> ID：12799863
> 
> 赞同：2
> 
> 时间：2012-10-09T12:16:58.983
> 
> 标签：iphone, ios

在登录请求期间，密码被存储。在此请求之后，我将密码字符串设置为空字符。它是否真的存储在内存中，如果确实如此，我将如何检查？我该如何擦掉它。

我已经在我的应用程序中使用了 ARC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:27:30.043

```
//Stroe user information
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs setObject:@"Moses" forKey:@"username"];
[prefs setInteger:42 forKey:@"age"];
[prefs synchronize];

//Getting the stored information
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSString *username = [prefs stringForKey:@"username"];
NSInteger age = [prefs integerForKey:@"age"]; 
```

在 NSUserDefaults 中存储密码是不安全的，因为任何可以访问 iPhone 的人都可以查看密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:29:27.523

您可以检查字符串是否为空..via

```
if([yourString isEqualToString:@""]){
NSLog(@"empty string");
} 
```

# mysql - 错误 1005 errno105

> ID：12799866
> 
> 赞同：0
> 
> 时间：2012-10-09T12:17:07.887
> 
> 标签：mysql, sql, foreign-keys, innodb, foreign-key-relationship

我已经搜索了问题，但找不到解决方案。

它是一对一的关系，我对另一个对员工有 FK 的表也有同样的问题

我不断得到一个

```
 error 1005 error no 105 
```

表结构

```
CREATE TABLE `staff` (
  `StaffNumber` varchar(5) NOT NULL,
  `Firstname` varchar(45) DEFAULT NULL,
  `Lastname` varchar(45) DEFAULT NULL,
  `Insertion` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`StaffNumber`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8

CREATE TABLE `airmarshall` (
  `weaponNumber` int(11) NOT NULL,
  `Nationality` varchar(45) NOT NULL,
  `Snumber` varchar(5) NOT NULL,
  `SnumberA` varchar(5) NOT NULL,
  PRIMARY KEY (`Snumber`,`SnumberA`),
  CONSTRAINT `staff_ibfk_1` FOREIGN KEY (`Snumber`) REFERENCES `staff` (`StaffNumber`)     
  ON DELETE CASCADE ON UPDATE CASCADE
 ) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:22:20.740

```
 In Mysql Server version: 5.1.60   

mysql> CREATE TABLE `staff` (   `StaffNumber` varchar(5) NOT NULL,   `Firstname` varchar(45) DEFAULT NULL,   `Lastname` varchar(45) DEFAULT NULL,   `Insertion` varchar(45) DEFAULT NULL,   PRIMARY KEY (`StaffNumber`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    Query OK, 0 rows affected (0.15 sec)

    mysql> CREATE TABLE `airmarshall` (
        ->   `weaponNumber` int(11) NOT NULL,
        ->   `Nationality` varchar(45) NOT NULL,
        ->   `Snumber` varchar(5) NOT NULL,
        ->   `SnumberA` varchar(5) NOT NULL,
        ->   PRIMARY KEY (`Snumber`,`SnumberA`),
        ->   CONSTRAINT `staff_ibfk_1` FOREIGN KEY (`Snumber`) REFERENCES `staff` (`StaffNumber`)     
        ->   ON DELETE CASCADE ON UPDATE CASCADE
        ->  ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
    Query OK, 0 rows affected (0.16 sec)

    mysql> show create table airmarshall;
    -----------------------------------+
    | airmarshall | CREATE TABLE `airmarshall` (
      `weaponNumber` int(11) NOT NULL,
      `Nationality` varchar(45) NOT NULL,
      `Snumber` varchar(5) NOT NULL,
      `SnumberA` varchar(5) NOT NULL,
      PRIMARY KEY (`Snumber`,`SnumberA`),
      CONSTRAINT `staff_ibfk_1` FOREIGN KEY (`Snumber`) REFERENCES `staff` (`StaffNumber`) ON DELETE CASCADE ON UPDATE CASCADE
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 | 
```

# php - Android：UTF-8 编码到 PHP 的 HttpPost JSON 字符串

> ID：12799868
> 
> 赞同：2
> 
> 时间：2012-10-09T12:17:12.533
> 
> 标签：php, android, json, utf-8, http-post

这是使用 php 对 Android 提出的后续问题[：将 utf-8 字符串保存到 MySQL](https://stackoverflow.com/questions/12783635/android-with-php-saving-utf-8-string-to-mysql)

我正在使用 Android 中的 Gson 库将类实例转换为 JSON 字符串。然后将此 JSON 字符串与 HttpPost 一起上传到 PHP 脚本，以将其保存到我的 MySQL 数据库中。

最初我认为问题出在 php 或 MySQL 上，但现在看来是我的 HttpPost 代码序列没有正确地将 JSON 编码为 UTF-8。如果我调试我的代码并在 Chrome 中使用 JSON 字符串进行 POST，它会完美运行。

我的 MySQL 数据库现在被格式化为 UTF-8 (utf8_general_ci)。

这是我的 HttpPost 代码：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(url);

ArrayList<NameValuePair> parameters = new ArrayList<NameValuePair>();
parameters.add(new BasicNameValuePair("questionnaire", json));

httppost.setEntity(new UrlEncodedFormEntity(parameters, "UTF-8"));

HttpResponse response = httpclient.execute(httppost);
HttpEntity entity = response.getEntity();
is = entity.getContent(); 
```

问题可能出在 中`httppost.setEntity(new UrlEncodedFormEntity(parameters, "UTF-8"));`，但我不确定如何通知我的 PHP 脚本我正在以 UTF-8 格式发送 JSON。

例如，当 Gson 创建 JSON 字符串时，Android 将“无法到达那里”正确编码为“can/u0027t 到达那里”。将 JSON 上传到 PHP 后，它在 MySQL DB 中保存为“canu0027t get there”，没有“\”。

那么如何在 Android 中正确标记/标记/识别此 JSON 字符串为 UTF-8 格式，以便正确保存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:09:40.587

`mysql_real_escape_string()`在将它保存到数据库之前，您必须在 php 代码中转义（例如）json 字符串。您的 Android 代码是正确的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-21T10:49:13.157

这是解决方案：

```
StringEntity se = new StringEntity(jObjEnvio.toString(), HTTP.UTF_8); 
```

如果这不起作用，请清理并修复项目。

# git - 逐块应用提交块

> ID：12799872
> 
> 赞同：8
> 
> 时间：2012-10-09T12:17:24.613
> 
> 标签：git, diff, commit, git-diff, git-commit

当我将文件添加到暂存时，我可以

```
$ git add my_file -p 
```

并选择我想要暂存的块。

有没有办法合并/挑选一个提交并逐块应用其差异块？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-09T12:26:59.870

我不知道这样做的直接方法，但这是一种间接方法。

`git cherry-pick -n <commit>`

Cherry 选择提交，但告诉 git 不要提交 ( `-n`)。更改现在应该在您的工作副本中，因此您可以执行

`git checkout -p`

这将遍历每个块并询问您是否要丢弃它，对您*不*想要的任何块说“是”，对您想要保留的块说“不”。

# regex - 将结果提取到行/行的末尾

> ID：12799874
> 
> 赞同：1
> 
> 时间：2012-10-09T12:17:26.947
> 
> 标签：regex, list, line

我正在使用这个 `(?<=Postcode:).*`完美的作品，除了它还包含以下列表中的文本（li）我如何将其更改为仅包含找到“邮政编码”的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:35:14.870

像这样的东西应该工作：

```
(?<=Postcode:)[\w\s]* 
```

这将匹配后面的所有字母数字字符和空格`Postcode:`。当它找到其他东西时（例如，一个`<li>`标签，我认为这是您所说的“以下列表”），它将停止。

说明：这部分正则表达式`[...]`是一个字符类。它将匹配其中包含的字符集合中的任何内容。在上面的示例中，它匹配任意数量的字母数字字符和空格。如果您还想匹配，比如`-`and `.`，您可以像这样编辑它：

```
(?<=Postcode:)[\w\s\-\.]* 
```

注意`-`and`.`必须被转义，因为它们都是特殊字符：`.`匹配任何字符，并且`-`在字符类中用于范围，例如`[a-h0-9]`.

# objective-c - Objective-C，在 NSLog 输出后保留一个变量

> ID：12799888
> 
> 赞同：1
> 
> 时间：2012-10-09T12:18:14.797
> 
> 标签：objective-c, properties, nsstring, nslog, weak-references

我想知道弱属性在 Objective-C 中是如何工作的。在此示例中，“myClass”中的弱属性“myString”的值仅在我使用 NSLog 打印时才保留。这是为什么？

```
#import <Foundation/Foundation.h>
#include <stdio.h>

@interface myClass : NSObject
@property (nonatomic, weak)NSString *myString;
- (void)readString;
@end

@implementation myClass
@synthesize myString;
- (void)readString
{
    const int MAXBUFFER = 80;
    char buffer[MAXBUFFER+1];
    NSLog(@"Input string:");
    fgets(buffer, MAXBUFFER, stdin);
    NSString *tempString = [[NSString alloc] initWithUTF8String:buffer];
    myString = tempString;
    NSLog(@"myString: %@", myString);  // Why does this line make all the difference?
}
@end

int main(int argc, const char * argv[])
{

    @autoreleasepool
    {
        myClass *myInstance = [[myClass alloc] init];
        [myInstance readString];
        NSLog(@"myInstance.myString: %@", myInstance.myString);
    }
    return 0;
} 
```

如果 readString 方法中的 NSLog 行被注释掉，myInstance.myString 变为“(null)”。为什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:21:49.953

来自苹果：

> 弱 指定与目标对象存在弱（非拥有）关系。如果目标对象被释放，属性值会自动设置为 nil。

所以基本上当 arc 将代码插入 [readString] 时，他会：

```
NSString *tempString = [[NSString alloc] initWithUTF8String:buffer];
    myString = tempString;
// + arc [tempString release] 
```

所以你的 tempString 不再存在于方法之外，因为没有任何东西保留它。

但是，当您使用 myString 在 [readString] 中添加 NSlog 时，NSLog 将保持对指针的引用（我不知道具体如何），但他实际上是这样做的，因为他记录了它们。

# iphone - NSMutableArray 不填充 tableView

> ID：12799889
> 
> 赞同：0
> 
> 时间：2012-10-09T12:18:24.280
> 
> 标签：iphone, ios, xcode, uitableview, tableview

我有几个表视图控制器，我希望它们的选择显示在“ResultTableViewController”上。我也有收集所选数据的数组，当我最终将其推送到“ResultViewController”时，它只显示最后一个选择。请帮忙

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    firstarr = [[NSMutableArray alloc]init]; //array with questions
    [self.firstarr addObject:[self.data objectAtIndex:indexPath.row]]; //collects the data properly

    BodyDetailViewController* vc =[[BodyDetailViewController alloc] initWithNibName:@"BodyDetailViewController" bundle:nil];
    vc.someArray = firstarr; //some array - ViewController with Results.

    [self.navigationController pushViewController:vc animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:33:42.417

这个...

```
firstarr = [[NSMutableArray alloc]init]; //array with questions 
```

...创建一个新数组。`firstarr`当您进行新选择时，以前的任何内容都消失了。

要么在其他地方创建一次数组（当对象初始化时？），要么将其内容附加到`vc.someArray`而不是替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:46:49.010

您必须删除此行：

```
firstarr = [[NSMutableArray alloc]init]; 
```

因为每次选择单元格时都会初始化 NSMutableArray，所以之前存储的所有数据都会被删除，并且`vc.someArray`只得到一个只有最后一次选择的数组，这就是为什么；）

在方法之外初始化您的 NSMutableArray，`viewDidLoad`例如

# c# - 停止用户访问某个站点，然后在保持登录状态的同时返回上一个站点

> ID：12799896
> 
> 赞同：0
> 
> 时间：2012-10-09T12:18:49.747
> 
> 标签：c#, asp.net, .net, security

我今天有一个奇怪的问题要解决。客户需要他们的站点不允许人们登录、转到不同的站点，然后如果他们点击浏览器中的后退按钮仍处于登录状态。

我以为很简单……直到我找不到从另一个站点按下后退按钮时触发的页面事件。

我想只使用 JavaScript 并使用引用对象，但这不会实现我的目标，因为我需要访问 .NET 成员系统并将用户从他们的会话中注销。

有没有人解决这个问题？如果是这样，怎么做？任何帮助将不胜感激，可能我只是错过了我可以在 Global.asax 中实现的东西？如果有帮助，我正在使用 .NET 4.5 / C#。

推理：

因为，比如说，如果一个操作员去让他们的机器解锁，访问了谷歌，那么另一个操作员恶意地在同一台机器上点击返回按钮来访问该操作员的登录（客户端非常安全）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:34:01.330

因此，您想在用户离开您的网站时注销用户？你有全局 javascript，每分钟向服务器发送一个请求，说“嘿，服务器，我在这里！我是用户 Joe Blogs，我还在网站上”。如果服务器在一分钟内没有从用户那里收到此消息，请将其注销。

覆盖后退按钮是行不通的。如果用户打开另一个标签/窗口并在那里访问谷歌，你会怎么做？

**更新**：您可以尝试使用jquery 中的[.unload()](http://api.jquery.com/unload/)来捕捉页面离开。并销毁该事件的 cookie。

然而，当机器无人看管时，没有什么能阻止恶意用户去抢夺访问权限。

**更新 2**您可以设置非常短的会话寿命！如果用户处于非活动状态（或离开页面） - 将其注销。为了防止用户在屏幕上看太久（填写很长的表格）时注销可能引起的烦恼 - 使 javascript 定期（每 5 分钟）到服务器到一个虚拟页面 - 以在页面保持会话活跃已加载。

这里是来源：[强制用户在离开我的 php 网站时注销？](https://stackoverflow.com/questions/2510839/force-users-to-logout-when-they-leave-my-php-website)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:11:06.730

这个问题可能有一个“神奇”的解决方案，但这里的关键在于推理：不允许操作员 A 使用具有操作员 B 的凭据的站点。

从客户端和服务器的角度来看，服务器或客户端（浏览器）无法告诉人们在任何时候更换了座位。

**这就是**你必须解决的问题。

但也许实现人脸检测有点过头了？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T14:20:01.557

如果您是从头开始设计站点，则可以通过添加标头来指定您不想要缓存来做到这一点。

`Cache-Control: no-cache` `Pragma: no-cache`

但是您必须通过单个页面访问所有站点。页面不必显示相同，可以包含不同的控件等，但它的内容将由 POST 参数决定，而不是通过正常的 ASP.NET 模型。

例如`Default.aspx`，要导航，您将至少返回两个参数。一个是要导航到的页面，另一个是不可预测的标记。

例如`Token=3Zd2f4O61Z&Page=OrderHistory`

在每个页面加载时，您将验证令牌和页面标题组合，如果确定，您将显示页面并为您希望用户在此时执行的任何导航或操作生成新的回发数据链接。如果用户尝试使用旧令牌访问同一页面，它将使会话过期，然后注销用户。这是最安全的方法，因为单击后退按钮会提示用户再次重新提交他们的帖子数据。如果单击“确定”，浏览器将提交它，但服务器会识别出该令牌现在无效（因为它已被使用，并被服务器丢弃），然后注销用户。

此方法还可以防止 CSRF，因为您正在验证每个请求的有效负载中的令牌，而不仅仅是检查 cookie 值。

我知道这对你没有帮助，除非你可以重新设计你的网站，但我想我会添加这个解决方案，以防有人从一开始就有这个要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:24:11.173

您可以通过 JS 重定向到真实主页，使您的网站的登录页面不包含任何内容，这样当人们点击返回按钮时，他将首先返回到将他移回主页的重定向页面。

但是，如果用户选择一次跳过几页或只是打开另一个窗口，则可以覆盖它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T12:30:48.160

您能否提供有关为什么需要它的更多信息？我认为在您的情况下，有一个可能的解决方案可能是使用单独的数据库表或字段来标记或标记已重定向到另一个站点的此类用户，只需将他们视为已注销，然后一旦他们点击您的站点 URL，您就可以可能会自动检查标志并重新登录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-09T12:48:25.730

JQuery`unload()`函数将像 javascript 一样解决您的问题`window.onbeforeunload`...

# android - 在自定义键盘中添加下一个按钮

> ID：12799900
> 
> 赞同：1
> 
> 时间：2012-10-09T12:19:04.670
> 
> 标签：android, keyboard, customization

我有一个自定义列表`EditText`。当我单击 时`EditText`，会显示自定义键盘。我想在自定义键盘中添加下一个按钮。

单击下一个按钮后，下一个`EditText`字段应该具有焦点。

如何在自定义键盘中实现下一个按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T12:28:38.310

如果通过xml创建布局，在该属性中设置nextFocus视图的id

```
 android:nextFocusForward="id_of_the_next_focus_view" 
```

要在 ime 中设置下一个按钮，请使用此属性

```
 android:imeOptions="actionNext" 
```

这将为您完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T09:02:07.560

在`onStartInput()`您可以处理 IME 选项。在这里，您可以使用包含“下一步”键或类似内容的键盘布局来更改键盘布局。

按下 Next 键（您必须检查键码）时，您必须确保将任何键入的文本 [1] 提交给编辑器，然后调用`getCurrentInputConnection().performEditorAction(EditorInfo.IME_ACTION_NEXT);`

希望这会有所帮助。

[1]

```
if (mComposing.length() > 0) {
   getCurrentInputConnection().commitText(mComposing, 1);
   mComposing.setLength(0);
} 
```

# ruby-on-rails - 在范围上使用 with_scope

> ID：12799902
> 
> 赞同：0
> 
> 时间：2012-10-09T12:19:08.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个模型，上面定义了一些范围：

```
class Alarm < ActiveRecord::Base
  scope :open_alarms, where("state != ?", AlarmStates::STATELIST[-1])
  scope :new_alarms, where('state is null')
  scope :site_alarms, lambda{ |site| where(:mac_address => site.mac_address)}
  #etc
end 
```

这些范围都是 Relation 对象，所以我应该能够在 with_scope 调用中链接它们。但我不能让它全部工作。我一直在尝试类似的东西

```
Alarm.with_scope(:find => Alarm.open_alarms){all} 
```

AFAIK 应该将关系警报 .open_alarms 应用于查找，然后有效地找到与 open_alarms 范围匹配的所有警报。但是当我尝试这个时，我得到一个'未识别的变量或方法“所有”的 Main:Object' 错误。我已经尝试了一系列变体，但似乎没有任何效果。

我想要达到的目标是能够链接一系列范围，然后应用分页，这样我就可以输出警报页面。

任何帮助将不胜感激。

谢谢，

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:29:06.110

@alarms = Alarm.open_alarms.page(params[:page])

@alarms = Alarm.open_alarms.site_alarms("http://sample.me").page(params[:page])

（使用 gem will_paginate 或 kaminari）。

您似乎正在使用 3.2 之前的代码进行查询。

# perl - 如何使用 Perl 从文件中读取多行值

> ID：12799907
> 
> 赞同：3
> 
> 时间：2012-10-09T12:19:17.093
> 
> 标签：perl

我有一个属性文件，比如说

```
##
## Start of property1
##
##
Property1=\
a:b,\
a1:b1,\
a2,b2
##
## Start of propert2
##
Property2=\
c:d,\
c1:d1,\
c2,d2 
```

请注意，任何给定属性的值都可以拆分为多行。

我想用 Perl 读取这个属性文件。这在 Java 中运行良好，因为 Java 支持使用反斜杠的多行值，但在 Perl 中这是一场噩梦。

在上面的属性文件中，有两个属性 -`Property1`并且`Property2`- 每个都与一个字符串相关联，我可以根据分隔符`,`和`:`

对于给定的属性（比如`Property1`）和给定的列（比如`a1`），我需要返回第二列（这里`b1`）

代码应该能够忽略注释、空格等。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:10:58.767

大多数文本处理——包括处理反斜杠续行——在 Perl 中都非常简单。你所需要的只是一个像这样的读取循环。

```
while (<>) {
  $_ .= <> while s/\\\n// and not eof;
} 
```

下面的程序做我认为你想要的。我`print`在读取循环中进行了调用，以显示已在续行上聚合的完整记录。我还演示了提取`b1`您作为示例提供的字段，并显示了输出，[`Data::Dump`](https://metacpan.org/module/Data%3a%3aDump)以便您可以看到创建的数据结构。

```
use strict;
use warnings;

my %data;

while (<DATA>) {
  next if /^#/;
  $_ .= <DATA> while s/\\\n// and not eof;
  print;
  chomp;
  my ($key, $values) = split /=/;
  my @values = map [ split /:/ ], split /,/, $values;
  $data{$key} = \@values;
}

print $data{Property1}[1][1], "\n\n";

use Data::Dump;
dd \%data;

__DATA__
##
## Start of property1
##
##
Property1=\
a:b,\
a1:b1,\
a2,b2
##
## Start of propert2
##
Property2=\
c:d,\
c1:d1,\
c2,d2 
```

**输出**

```
Property1=a:b,a1:b1,a2,b2
Property2=c:d,c1:d1,c2,d2
b1

{
  Property1 => [["a", "b"], ["a1", "b1"], ["a2"], ["b2"]],
  Property2 => [["c", "d"], ["c1", "d1"], ["c2"], ["d2"]],
} 
```

* * *

**更新**

我再次阅读了您的问题，我认为您可能更喜欢数据的不同表示。此变体将属性值保留为哈希而不是数组数组，否则其行为是相同的

```
use strict;
use warnings;

my %data;

while (<DATA>) {
  next if /^#/;
  $_ .= <DATA> while s/\\\n// and not eof;
  print;
  chomp;
  my ($key, $values) = split /=/;
  my %values = map { my @kv = split /:/; @kv[0,1] } split /,/, $values;
  $data{$key} = \%values;
}

print $data{Property1}{a1}, "\n\n";

use Data::Dump;
dd \%data; 
```

**输出**

```
Property1=a:b,a1:b1,a2,b2
Property2=c:d,c1:d1,c2,d2
b1

{
  Property1 => { a => "b", a1 => "b1", a2 => undef, b2 => undef },
  Property2 => { c => "d", c1 => "d1", c2 => undef, d2 => undef },
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:43:41.190

假设您的文件不是太大，这是一个简单的方法：

```
use strict;
use warnings;

open FILE, "my_file.txt" or die "Can't open file!";

{
    local $/;
    my $file = <FILE>;
    #If \ is found at the end of the line, delete the following line break.
    $file =~ s/\\\n//gs;
} 
```

每当一行以 结尾时`\`，都会删除以下换行符。这会将每个多行属性放在一行上。

缺点是这会将整个文件读入内存。如果您的输入文件非常大，您可以将其调整为逐行遍历文件的算法。

# haskell - 从数据库中检索消化函子的选择列表（Snap/Heist）

> ID：12799908
> 
> 赞同：2
> 
> 时间：2012-10-09T12:19:18.650
> 
> 标签：haskell, haskell-snap-framework, digestive-functors

我有一个处理添加和编辑的地址表单（如果添加什么都没有，如果编辑只是地址）。到目前为止，我已经用少数项目硬编码了州和国家/地区的选择。

```
addressForm :: Monad m => Maybe Address -> [Address] -> Form Text m Address
addressForm a addrs = 
    Address
        <$> "id" .: choiceWith (addrToChoice addrs) (fmap id a)
        <*> "name" .: string (fmap name a)
        <*> "street" .: string (fmap street a)
        <*> "city" .: string (fmap city a)
        <*> "state" .: choiceWith stateChoices (fmap state a)
        <*> "country" .: choiceWith countryChoicesRequired (fmap country a)
        <*> "zipcode" .: string (fmap zipcode a)

stateChoices :: [(Text, (Maybe String, Text))] -- (htmlValue, (realValue, labelValue))
stateChoices = [("ON", (Just "ON", "Ontario")), ("NE", (Just "NE", "Nebraska"))]

countryChoicesRequired :: [(Text, (String, Text))]
countryChoicesRequired = [("CA", ("CA", "Canada")), ("US", ("US", "United States of America"))] 
```

现在我想从数据库中检索州和国家的列表。我可以将州/国家/地区列表传递给表单，就像我已经在处理地址列表一样，但此表单也是 3 或 4 个其他表单（新广告客户表单、新客户表单等）的子表单而且我不需要表格之外的州/国家/地区列表，就像我使用地址列表一样。

这是我刚刚添加的用于获取国家/地区信息的新表单：

```
addressForm' :: (HasPostgres p, Monad m) => Maybe Address -> [Address] -> p (Form Text m Address)
addressForm' a addrs = do
    countries <- countryChoices'
    return $ Address
        <$> "id" .: choiceWith (addrToChoice addrs) (fmap id a)
        <*> "name" .: string (fmap name a)
        <*> "street" .: string (fmap street a)
        <*> "city" .: string (fmap city a)
        <*> "state" .: choiceWith stateChoices (fmap state a)
        <*> "country" .: choiceWith countries (fmap country a)
        <*> "zipcode" .: string (fmap zipcode a)

data Region = Region
    { code :: String
    , fullName :: String
    }

countryChoices' :: HasPostgres m => m [(Text, (String, Text))]
countryChoices' = do
    countries <- getCountries
    return $ abbrToChoice countries

abbrToChoice :: [Region] -> [(Text, (String, Text))]
abbrToChoice regions =
    map (\ a -> ((pack $ code a), (code a, (pack $ fullName a)))) regions 
```

这是调用它的处理程序：

```
editAddressH :: ([(T.Text, Splice AppHandler)] -> AppHandler ()) -> Addr.Address -> Maybe Int64 -> AppHandler ()
editAddressH renderer a userId = do
    addresses <- Addr.list userId
    (view, result) <- runForm "form" $ Addr.addressForm' (Just a) addresses -- line 233
    case result of
        Just x -> do
            r <- Addr.edit x -- line 236
            case r of
                _ -> renderer [("success", showContents), ("dfForm", hideContents)]
        Nothing -> renderer $ ("success", hideContents) : ("addressList", addressScriptSplice addresses) : phoneSplices ++ digestiveSplices view 
```

我得到的错误是这样的：

```
src/Site.hs:233:44:
    No instance for (HasPostgres
                       (digestive-functors-0.5.0.1:Text.Digestive.Form.Internal.FormTree
                          (Handler App App) v0 (Handler App App)))
      arising from a use of `Addr.addressForm''
    Possible fix:
      add an instance declaration for
      (HasPostgres
         (digestive-functors-0.5.0.1:Text.Digestive.Form.Internal.FormTree
            (Handler App App) v0 (Handler App App)))
    In the second argument of `($)', namely
      `Addr.addressForm' (Just a) addresses'
    In a stmt of a 'do' expression:
        (view, result) <- runForm "form"
                        $ Addr.addressForm' (Just a) addresses
    In the expression:
      do { addresses <- Addr.list userId;
           (view, result) <- runForm "form"
                           $ Addr.addressForm' (Just a) addresses;
           case result of {
             Just x -> do { ... }
             Nothing
               -> renderer
                $   ("success", hideContents)
                  :   ("addressList", addressScriptSplice addresses)
                    :   phoneSplices ++ digestiveSplices view } }
src/Site.hs:236:40:
    Couldn't match expected type `Addr.Address'
                with actual type `digestive-functors-0.5.0.1:Text.Digestive.Form.Internal.FormTree
                                    m0 Text m0 Addr.Address'
    Expected type: Addr.Address
      Actual type: Form Text m0 Addr.Address
    In the first argument of `Addr.edit', namely `x'
    In a stmt of a 'do' expression: r <- Addr.edit x 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T13:40:19.937

看起来你需要[一元](http://hackage.haskell.org/packages/archive/digestive-functors/0.5.0.2/doc/html/Text-Digestive-Form.html#v%3amonadic)函数。它可能看起来像这样：

```
addressForm :: Monad m => Maybe Address -> [Address] -> Form Text m Address
addressForm a addrs = monadic $ do
    stateChoices <- getStatesFromDB
    countryChoices <- getCountriesFromDB
    return $
      Address
          <$> "id" .: choiceWith (addrToChoice addrs) (fmap id a)
          <*> "name" .: string (fmap name a)
          <*> "street" .: string (fmap street a)
          <*> "city" .: string (fmap city a)
          <*> "state" .: choiceWith stateChoices (fmap state a)
          <*> "country" .: choiceWith countryChoices (fmap country a)
          <*> "zipcode" .: string (fmap zipcode a) 
```

# regex - R 正则表达式用于 Twitter 上的直接消息

> ID：12799910
> 
> 赞同：1
> 
> 时间：2012-10-09T12:19:26.247
> 
> 标签：regex, r, twitter

我得到了一组 Twitter 状态更新，我试图过滤后者的所有直接消息、发送者和接收者。我的数据框包括发件人和文本的列。使用正则表达式我正在尝试将接收者从文本列中过滤出来。

这就是我得到的，但它返回了一些奇怪的结果

```
 WD <- getwd()
   if (!is.null(WD)) setwd(WD)

   load("data.R")
   #http://www.unet.univie.ac.at/~a0406222/data.R

   dmtext <- grep("^@[a-z0-9_]{1,15}", tweets$text, perl=T, value=TRUE,ignore.case=TRUE)
   dm.receiver <- gsub("^@([a-z0-9_]{1,15})[ :,].*$", "\\1", dmtext, perl=T,ignore.case=TRUE)
   dm.sender <- as.character(tweets$from_user[grep("^@[a-z0-9_]{1,15}", tweets$text,       perl=T,ignore.case=TRUE,value=FALSE)])

   dm.df <- data.frame(dm.sender,dm.receiver,dmtext)

   dm.df[1:1000,2] 
```

这些是我为 dm.receiver 得到的坏结果的一些例子

```
 @insultaofuturo Apesar da proibição, jovens insistem em acampar no Aterro na Rio+20\nhttp://t.co/dCfFHUWV
    @mqtodd Bringing the .green Internet to Rio+20 Summit | DotGreen\nhttp://t.co/pQqYilXp #RioPlus20 #gogreen
    @Shyman33 Elinor Ostrom's trailblazing commons research can inspire Rio+20\n http://t.co/m7OTHBtP
    @OccupyRio20 @pnud_es @FBuenAbad @rioplussocial #Futurewewant \nALGO DE ESTO SE HA CUMPLIDO? http://t.co/QDlVwT5z
    @UNDP_CDG#UNDP#Asia-Pacific#Rio+20E-discussion on National&amp;Local Planning for Sustainable Development. Contribute&amp;mail:aprc.rio20@undp.org 
```

为什么我使用 {1,15} 得到的结果超过 15 个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:08:09.580

原来是编码问题。我无法使用正则表达式解决这个问题，但我用来检索推文的软件有一个列，该列指示用户 id 推文的地址。所以我会用它来做分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:29:28.180

您的命令匹配以 1-15 个字母数字字符*开头的*`grep`任何内容。例如：

 *`@blahblahblahblahblahblahblahblahblah`

将匹配，因为 grep 查找行首，查找 @，找到至少一个字母字符，然后愉快地停止，认为这是一个成功的匹配。*grep 不关心字符串中模式之后的内容*，只要它找到匹配的内容即可。

为了只获取 15 个字符以下的内容，您还必须指定接下来的内容：

`dmtext <- grep("^@[a-z0-9_]{1,15}\\b", ...`

这匹配 1-15 个字符，后跟单词边界 ( `\b`，带有用于字符串转义的额外反斜杠)。因此，它不会匹配长度为 16 或 100 个字符的单词——仅匹配 1 到 15 个字符的单词。*

# php - 如何使用 php 创建金字塔？

> ID：12799918
> 
> 赞同：3
> 
> 时间：2012-10-09T12:20:22.143
> 
> 标签：php

我需要使用星号创建一个金字塔。我指定了一个值，它成为金字塔的基础。基数包含与指定值一样多的星号，金字塔必须将其行跳过 1..当我指定偶数个基数时，我遇到了一个问题。

金字塔必须看起来像下面的那个。

```
 * 
   *** 
  ***** 
 ******* 
********* 
********** 
```

我正进入（状态

```
####* 
###*** 
##***** 
###***** 
####***** 
********** 
```

我想用一些空格替换 # 并且我得到了第 4 行中星号数量减少的错误。如何修复这两个错误？

```
function create_pyramid($limit){

     if ($limit > 0){
        for ($row =0;$row<=$limit;$row++){
            if (($row % 2 == 0) && ($row != $limit)){ continue;}
            $rows = "";
            for ($col =0;$col<$row;$col++){
                $rows= $rows.'*';
            }
            $pattern = "%'#".((($limit - $row)/2)+$row)."s\n";
            printf ($pattern,$rows);
            print '<br />';
        }
        }
        else{
            print "Invalid data";
        }
     }

     create_pyramid(10); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T12:39:42.957

我更喜欢我的：

```
 echo '<pre>';

  $n = 5;
  function print_tree($n, $str, $max) {
    for ($i = 0; ($i < (($max - $n) / 2)); $i++) {
      echo "&nbsp;";
    }
    for ($i = 0; ($i < $n); $i++) {
      echo $str;
    }
    echo "<br/>";
  }

  for ($flag = 0; ($flag < 2); $flag++) {
    for ($a = 1, $b = 1, $c = 1, $d = 4; (($d - 3) <= $n); $a += 2, $b++) {
      if ($flag == 1) {
        print_tree($a, "*", $max);
      }
      if ($b == $d) {
        if ($flag == 0) {
          $max = $a;
        }
        if (($d - 3) != $n) {
          $a -= ((2 * $c) + 2);
        }
        $b = 0;
        $d++;
        if (($d % 2) == 0) {
          $c++;
        }
      }
    }
  }
  if ((($foot = $n) % 2) == 0) {
    $foot++;
  }
  for ($i = 0; ($i < $foot); $i++) {
    print_tree($foot, "|", $max);
  } 
```

输出：

```
 *
                  ***
                 *****
                *******
                 *****
                *******
               *********
              ***********
             *************
              ***********
             *************
            ***************
           *****************
          *******************
         *********************
           *****************
          *******************
         *********************
        ***********************
       *************************
      ***************************
     *****************************
       *************************
      ***************************
     *****************************
    *******************************
   *********************************
  ***********************************
 *************************************
***************************************
                 |||||
                 |||||
                 |||||
                 |||||
                 ||||| 
```

甚至这个：

```
<?php

$n = 8;

ob_start();

$stars = ($n - 1) * 2 + 1;
$spaces = 0;
for ($i = 0; ($i < $n); $i++) {
    echo str_repeat(' ', $spaces);
    echo str_repeat('*', $stars);
    echo ' ';
    echo str_repeat(' ', $spaces * 2);
    echo str_repeat('*', $stars);
    echo "\n";
    $spaces += 1;
    $stars -= 2;
}

$stars = ($n - 1) * 2 + 1;
$spaces = 0;
$margin = $stars / 2 + 1;
for ($i = 0; ($i < $n); $i++) {
    echo str_repeat(' ', $margin);
    echo str_repeat(' ', $spaces);
    echo str_repeat('*', $stars);
    echo "\n";
    $spaces += 1;
    $stars -= 2;
}

echo trim(implode("\n", array_reverse(explode("\n", ob_get_clean()))), "\n"), "\n"; 
```

它给：

```
 *
              ***
             *****
            *******
           *********
          ***********
         *************
        ***************
       *               *
      ***             ***
     *****           *****
    *******         *******
   *********       *********
  ***********     ***********
 *************   *************
*************** *************** 
```

有趣的练习不是吗... 8-)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T12:38:32.180

你可以试试

```
create_pyramid("*", 5);
create_pyramid("@", 10);
create_pyramid("^_^", 10);

function create_pyramid($string, $level) {
    echo "<pre>";
    $level = $level * 2;
    for($i = 1; $i <= $level; $i ++) {
        if (!($i % 2) && $i != 1)
            continue;   
        print str_pad(str_repeat($string, $i),($level - 1) * strlen($string), " " , STR_PAD_BOTH);
        print PHP_EOL;
    }
} 
```

输出 A

```
 *    
   ***   
  *****  
 ******* 
********* 
```

输出 B

```
 @         
        @@@        
       @@@@@       
      @@@@@@@      
     @@@@@@@@@     
    @@@@@@@@@@@    
   @@@@@@@@@@@@@   
  @@@@@@@@@@@@@@@  
 @@@@@@@@@@@@@@@@@ 
@@@@@@@@@@@@@@@@@@@ 
```

输出 C

```
 ^_^^_^^_^                        
                     ^_^^_^^_^^_^^_^                     
                  ^_^^_^^_^^_^^_^^_^^_^                  
               ^_^^_^^_^^_^^_^^_^^_^^_^^_^               
            ^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^            
         ^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^         
      ^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^      
   ^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^   
^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^^_^ 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-09T12:30:22.247

让它更简单：

```
function create_pyramid($limit) {
    for($row = 1; $row < $limit; $row ++) {
        $stars = str_repeat('*', ($row - 1) * 2 + 1);
        $space = str_repeat(' ', $limit - $row);
        echo $space . $stars . '<br/>';
    }
}
echo "<pre>" ;
create_pyramid(10); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T12:51:01.413

```
<?php

$n=9;
for($i=0; $i<=$n; $i++)
{

for($j=1; $j<=$i; $j++)

                echo "&nbsp;";

    for($k=1; $k<=$n-$i; $k++)

        echo $k;

        for($j=($k-2); $j>0; $j--)

                  echo $j;

            for($k=1; $k<=$i; $k++)

                        echo "&nbsp;";

    echo "</br>";

}

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T13:13:19.017

```
function create_row($num, $limit) {

    $append = '';

    if($limit > $num && ($limit - $i) % 2 == 0) {

        $append .= '-';

    }

    $stars = str_repeat('*', $num);

    $ap_len = floor(($limit - $num) / 2);

    $prepend = str_repeat('-', $ap_len);

    $append .= str_repeat('-', $ap_len);

    return $prepend . $stars . $append;

}

function create_pyramid($limit){

    if ($limit > 0){

        $no_last = false;

        for($i = 1; $i <= $limit; $i += 2) {

            print create_row($i, $limit) . PHP_EOL;

            if($i == $limit) {

                $no_last = true;

            }

        }

        if(!$no_last) {

            print create_row($limit, $limit) . PHP_EOL;

        }

    }

}

create_pyramid(10); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-01T11:58:21.500

据我了解，您正在寻找的是一个奇数金字塔，即每行中的 * 数是按照奇数系列，如 1、3、5、7。如果您希望包含“if-else”语句，那么您可以使用上述已回答的循环，但如果您只想使用“for”循环，则可以使用以下代码：

```
<?php
$x=1;
  for($i=1;$i<7;$i++)
      {
      for($j=7;$j>$i;$j--)
          {
            echo '&nbsp;&nbsp;';
          }
      for($k=1;$k<=$x;$k++)
          {
            echo '*';
          }
          $x=$x+2;  
          echo "<br/>";
      }
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-12T11:37:57.850

我认为最简单的解决方案是创建 2 个带有条件的循环：

```
$n = 5; // specify how many rows you want to
$stars = 0;

for ($i = $n; $i > 0; $i--) {
    for ($j = 0; $j < $i + $stars; $j++) {
        if ($j < $i - 1) {
            echo " ";
        } else {
            echo "*";
        }
    }

    $stars += 2;
    echo "\n";
} 
```

输出将是：

```
 *
   ***
  *****
 *******
********* 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-15T03:49:57.677

```
<?php 
$l=5;
for ($i=1; $i <=5; $i++) { 

    for ($k=1; $k < $l ; $k++) { 

        echo '&nbsp;';

    }

    for ($j=0; $j<$i; $j++) {

        echo '*';
    }

    $l--;

    echo "<br>";

}

?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-19T17:57:35.153

```
function create_piramide ($filas) {    
    $n = $filas;
    echo '<pre>';
    for ($i = $filas; $i >= 0; $i--) {              
        echo str_repeat(' ', $i).str_repeat('o ', $n - $i)."\n";
    }
    echo '</pre>';
} 

create_piramide (10); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-29T22:32:47.347

```
function pyramid($height)
{

    for ($i = 1; $i <= $height; $i++) {
        echo str_repeat("&nbsp;&nbsp;", $height - $i);
        echo str_repeat('*', $i * 2 - 1) . '<br/>';
    }

}

pyramid(5); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-07T06:32:52.663

**钻石形状**

```
 * 
                  *  * 
                *  *  * 
              *  *  *  * 
            *  *  *  *  * 
          *  *  *  *  *  * 
        *  *  *  *  *  *  * 
      *  *  *  *  *  *  *  * 
    *  *  *  *  *  *  *  *  * 
  *  *  *  *  *  *  *  *  *  * 
 *  *  *  *  *  *  *  *  *  *  * 
  *  *  *  *  *  *  *  *  *  * 
    *  *  *  *  *  *  *  *  * 
      *  *  *  *  *  *  *  * 
       *  *  *  *  *  *  * 
         *  *  *  *  *  * 
           *  *  *  *  * 
            *  *  *  * 
              *  *  * 
                *  * 
                 * 

<?php
        $num=15;
        $num2=0;
        $half = $num;
            for($i=$num2; $i<=$num; $i++)
            {       
                for($j=$half; $j>$i; $j--)
                {
                    echo "&nbsp;&nbsp;";    
                }
                for($j=$num2; $j<=$i; $j++)
                {
                    echo "&nbsp;*&nbsp;";   
                }
                echo "<br>";
            }

            for($i=$num2; $i<=$num; $i++)
            {       
                for($j=$num2; $j<=$i; $j++)
                {
                    echo "&nbsp;&nbsp;";    
                }
                for($j=$half; $j>$i; $j--)
                {
                    echo "&nbsp;*&nbsp;";
                }
                echo "<br>&nbsp;";

            }

    ?> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-23T13:50:39.273

```
$n = 5;
for($i = $n; $i >= 1; $i--){
    for($j = 1; $j <= $i; $j++){
        if($j < $i){
            echo '0';//you can replace 0 with space
        }else{
            $num = $n - $i;
            for($k = 0; $k <= $num; $k++){
                echo '*';
            }
            for($y = 1; $y <= $n - 1; $y++){
                if($y <= $num){
                    echo '*';
                }else{
                    echo '0';//you can replace 0 with space
                    if($y == $n - 1){
                        echo '<br/>';
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-02-25T18:46:06.493

```
 $n1=10;
    $k=$n1/2;
    $n=$n1/2;

    for($i=0 ; $i<=$n1 ; $i++) {
        if($i <= $n1/2) {   
            $k=$k+1;
            $n=$n-1;    
        } else {
            $k=$k-1;
            $n=$n+1;
        }

        for($j=0 ; $j<=$n1 ; $j++) {    
            if($j < $k && $j > $n) {
                echo "*";   
            } else {
                echo "&nbsp;&nbsp";
            }
        }

        echo "<br/>";
    } 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-02-01T13:16:08.487

```
<?php

ini_set('display_errors', 1);

/**
 * Here is my solution for printing the pyramid using a class 
 */

class pyramid 
{
    function __construct($rows)
    {

        for ($k=1; $k <= $rows ; $k++) { 
            $this->space($rows,$k);
            $this->left($k);
            $this->right($k);
            echo "<br>";
        }
    }

    public function left($k)
    {
        for ($i=1; $i < $k ; $i++) { 
            echo $i;
        }
    }
    public function right($i)
    {
        for ($j=$i; $j >= 1 ; $j--) { 
            echo $j;
        }
    }
    public function space($rows,$k)
    {
        for ($i=$rows-$k; $i > 0 ; $i--) { 
            echo "&nbsp;";
        }
    }
}

$pyramid =  new pyramid(5);

?>
<style type="text/css">
    body{
        font-family: monospace;
        font-size: 24px;
    }
</style> 
```

# apache-flex - 更正 FlashBuilder.ini / eclipse.ini 设置以与探查器一起使用

> ID：12799919
> 
> 赞同：4
> 
> 时间：2012-10-09T12:20:24.083
> 
> 标签：apache-flex, profiling, flash-builder

我的 FlashBuilder 实例在执行一些繁重的分析时不断崩溃。必须说，尽管我也在生成对象分配跟踪（全部，而不是默认的 10 个）并经常遍历 GC 路径。

但是我有一种预感，我可以通过允许 Flash Builder 使用更多内存来解决这个问题。

这是我的 FlashBuilder.ini：

```
-startup
eclipse/plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
eclipse/plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502
--launcher.defaultAction
openFile
-nl
en_US
-vmargs
-Xms256m
-Xmx1024m
-XX:MaxPermSize=256m
-XX:PermSize=64m
-Dorg.eclipse.equinox.p2.reconciler.dropins.directory=eclipse/dropins
-Declipse.application=com.adobe.flexbuilder.standalone.FlashBuilderApplication 
```

在我的 Eclipse 错误日志中，我可以清楚地看到：

```
java.lang.OutOfMemoryError: requested 1024000 bytes for GrET in C:\BUILD_AREA\jdk6_16\hotspot\src\share\vm\utilities\growableArray.cpp. Out of swap space? 
```

这是完整的错误日志：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
# java.lang.OutOfMemoryError: requested 1024000 bytes for GrET in C:\BUILD_AREA\jdk6_16\hotspot\src\share\vm\utilities\growableArray.cpp. Out of swap space?
#
#  Internal Error (allocation.inline.hpp:39), pid=3104, tid=3128
#  Error: GrET in C:\BUILD_AREA\jdk6_16\hotspot\src\share\vm\utilities\growableArray.cpp
#
# JRE version: 6.0_16-b01
# Java VM: Java HotSpot(TM) Client VM (14.2-b01 mixed mode windows-x86 )
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

---------------  T H R E A D  ---------------

Current thread (0x01727800):  VMThread [stack: 0x54140000,0x54240000] [id=3128]

Stack: [0x54140000,0x54240000],  sp=0x5423fa64,  free space=1022k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [jvm.dll+0x1e66c7]
V  [jvm.dll+0xa0c9c]
V  [jvm.dll+0xce307]
V  [jvm.dll+0xb4e97]
V  [jvm.dll+0xdc547]
V  [jvm.dll+0x16b5ee]
V  [jvm.dll+0x15955a]
V  [jvm.dll+0x1d48b4]
V  [jvm.dll+0x19632d]
V  [jvm.dll+0xc69ff]
V  [jvm.dll+0xc866c]
V  [jvm.dll+0xc89c0]
V  [jvm.dll+0xcc99a]
V  [jvm.dll+0x1cb122]
V  [jvm.dll+0xc79f5]
V  [jvm.dll+0xc7de1]
V  [jvm.dll+0x1e6b9d]
V  [jvm.dll+0x1e92a3]
V  [jvm.dll+0x1e853e]
V  [jvm.dll+0x1e888c]
V  [jvm.dll+0x1e8cb2]
V  [jvm.dll+0x173e5c]
C  [MSVCR71.dll+0x9565]
C  [kernel32.dll+0x4ed6c]
C  [ntdll.dll+0x6377b]
C  [ntdll.dll+0x6374e]

VM_Operation (0x5b51f80c): GenCollectFull, mode: safepoint, requested by thread 0x555c6800

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x555c6400 JavaThread "Worker-18" [_thread_blocked, id=1024, stack(0x5d080000,0x5d180000)]
  0x555c1400 JavaThread "Worker-16" [_thread_blocked, id=5780, stack(0x56a10000,0x56b10000)]
  0x555c4000 JavaThread "Worker-15" [_thread_blocked, id=968, stack(0x56410000,0x56510000)]
  0x555c2800 JavaThread "Worker-14" [_thread_blocked, id=5804, stack(0x58fa0000,0x590a0000)]
  0x580b6000 JavaThread "Java indexing" daemon [_thread_blocked, id=3432, stack(0x56610000,0x56710000)]
  0x580b6c00 JavaThread "Thread-29" [_thread_in_native, id=4088, stack(0x56510000,0x56610000)]
  0x580b4c00 JavaThread "[ThreadPool Manager] - Idle Thread" daemon [_thread_blocked, id=1148, stack(0x5bfb0000,0x5c0b0000)]
  0x555c6800 JavaThread "Worker-7" [_thread_blocked, id=4324, stack(0x5b420000,0x5b520000)]
  0x555c0400 JavaThread "Worker-2" [_thread_blocked, id=5952, stack(0x01870000,0x01970000)]
  0x555c5000 JavaThread "com.adobe.flexide.editorcore.editor.IdleTypingReconciler" daemon [_thread_blocked, id=1404, stack(0x5aa10000,0x5ab10000)]
  0x555c4c00 JavaThread "org.eclipse.jface.text.reconciler.MonoReconciler" daemon [_thread_blocked, id=5484, stack(0x5a910000,0x5aa10000)]
  0x57c65000 JavaThread "Bundle File Closer" daemon [_thread_blocked, id=5208, stack(0x588d0000,0x589d0000)]
  0x57c3cc00 JavaThread "Thread-3" [_thread_in_native, id=5132, stack(0x587d0000,0x588d0000)]
  0x555f3c00 JavaThread "Worker-JM" [_thread_blocked, id=2704, stack(0x559b0000,0x55ab0000)]
  0x54c9f800 JavaThread "[Timer] - Main Queue Handler" daemon [_thread_blocked, id=3496, stack(0x554b0000,0x555b0000)]
  0x54bfcc00 JavaThread "Framework Event Dispatcher" daemon [_thread_blocked, id=4556, stack(0x552b0000,0x553b0000)]
  0x54c34c00 JavaThread "Start Level Event Dispatcher" daemon [_thread_blocked, id=240, stack(0x551b0000,0x552b0000)]
  0x54c34400 JavaThread "State Data Manager" daemon [_thread_blocked, id=4564, stack(0x56050000,0x56150000)]
  0x54b02800 JavaThread "Framework Active Thread" [_thread_blocked, id=4592, stack(0x55f50000,0x56050000)]
  0x0176f000 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=5252, stack(0x548a0000,0x549a0000)]
  0x01768000 JavaThread "CompilerThread0" daemon [_thread_blocked, id=4436, stack(0x547a0000,0x548a0000)]
  0x01767800 JavaThread "Attach Listener" daemon [_thread_blocked, id=932, stack(0x546a0000,0x547a0000)]
  0x0175cc00 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=4216, stack(0x545a0000,0x546a0000)]
  0x0172ec00 JavaThread "Finalizer" daemon [_thread_blocked, id=4780, stack(0x544a0000,0x545a0000)]
  0x0172a400 JavaThread "Reference Handler" daemon [_thread_blocked, id=860, stack(0x543a0000,0x544a0000)]
  0x01865000 JavaThread "main" [_thread_blocked, id=4172, stack(0x00030000,0x00130000)]

Other Threads:
=>0x01727800 VMThread [stack: 0x54140000,0x54240000] [id=3128]
  0x01770800 WatcherThread [stack: 0x549a0000,0x54aa0000] [id=4080]

VM state:at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread:  ([mutex/lock_event])
[0x01869ca8] Threads_lock - owner thread: 0x01727800
[0x0186a0b8] Heap_lock - owner thread: 0x555c6800

Heap
 def new generation   total 45696K, used 22370K [0x03c20000, 0x06db0000, 0x08ae0000)
  eden space 40640K,  52% used [0x03c20000, 0x050d4e48, 0x063d0000)
  from space 5056K,  23% used [0x063d0000, 0x064f3b30, 0x068c0000)
  to   space 5056K,   0% used [0x068c0000, 0x068c0000, 0x06db0000)
 tenured generation   total 607960K, used 379895K [0x08ae0000, 0x2dc96000, 0x43c20000)
   the space 607960K,  62% used [0x08ae0000, 0x1fdddfe0, 0x1fdde000, 0x2dc96000)
 compacting perm gen  total 78592K, used 78435K [0x43c20000, 0x488e0000, 0x53c20000)
   the space 78592K,  99% used [0x43c20000, 0x488b8c10, 0x488b8e00, 0x488e0000)
No shared spaces configured.

Dynamic libraries:
0x00400000 - 0x0040d000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\FlashBuilder.exe
0x77cd0000 - 0x77e0c000     C:\Windows\SYSTEM32\ntdll.dll
0x765b0000 - 0x76684000     C:\Windows\system32\kernel32.dll
0x75ec0000 - 0x75f0a000     C:\Windows\system32\KERNELBASE.dll
0x77e20000 - 0x77ee9000     C:\Windows\system32\USER32.dll
0x761c0000 - 0x7620e000     C:\Windows\system32\GDI32.dll
0x77e10000 - 0x77e1a000     C:\Windows\system32\LPK.dll
0x76120000 - 0x761bd000     C:\Windows\system32\USP10.dll
0x77c20000 - 0x77ccc000     C:\Windows\system32\msvcrt.dll
0x74d70000 - 0x74f0e000     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_41e6975e2bd6f2b2\COMCTL32.dll
0x77af0000 - 0x77b47000     C:\Windows\system32\SHLWAPI.dll
0x76b50000 - 0x76b6f000     C:\Windows\system32\IMM32.DLL
0x77b50000 - 0x77c1c000     C:\Windows\system32\MSCTF.dll
0x72000000 - 0x7200f000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\eclipse\plugins\org.eclipse.equinox.launcher.win32.win32.x86_1.1.100.v20110502\eclipse_1406.dll
0x77a50000 - 0x77af0000     C:\Windows\system32\ADVAPI32.dll
0x76480000 - 0x76499000     C:\Windows\SYSTEM32\sechost.dll
0x76690000 - 0x76731000     C:\Windows\system32\RPCRT4.dll
0x72b60000 - 0x72c03000     C:\Windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.4940_none_50916076bcb9a742\MSVCR90.dll
0x75310000 - 0x75319000     C:\Windows\system32\VERSION.dll
0x6d710000 - 0x6d732000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\jre\bin\splashscreen.dll
0x7c340000 - 0x7c396000     C:\Windows\system32\MSVCR71.dll
0x6d800000 - 0x6da8b000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\jre\bin\client\jvm.dll
0x74630000 - 0x74662000     C:\Windows\system32\WINMM.dll
0x75d50000 - 0x75d9c000     C:\Windows\system32\apphelp.dll
0x74d30000 - 0x74d70000     C:\Windows\system32\uxtheme.dll
0x6d7b0000 - 0x6d7bc000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\jre\bin\verify.dll
0x6d330000 - 0x6d34f000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\jre\bin\java.dll
0x6d290000 - 0x6d298000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\jre\bin\hpi.dll
0x77ef0000 - 0x77ef5000     C:\Windows\system32\PSAPI.DLL
0x6d7f0000 - 0x6d7ff000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\jre\bin\zip.dll
0x767a0000 - 0x768fc000     C:\Windows\system32\ole32.dll
0x75da0000 - 0x75dac000     C:\Windows\system32\CRYPTBASE.dll
0x76b70000 - 0x76bff000     C:\Windows\system32\OLEAUT32.DLL
0x758a0000 - 0x758b6000     C:\Windows\system32\CRYPTSP.dll
0x75640000 - 0x7567b000     C:\Windows\system32\rsaenh.dll
0x75470000 - 0x75487000     C:\Windows\system32\USERENV.dll
0x75e20000 - 0x75e2b000     C:\Windows\system32\profapi.dll
0x6d610000 - 0x6d623000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\jre\bin\net.dll
0x76220000 - 0x76255000     C:\Windows\system32\WS2_32.dll
0x765a0000 - 0x765a6000     C:\Windows\system32\NSI.dll
0x75860000 - 0x7589c000     C:\Windows\system32\mswsock.dll
0x75850000 - 0x75856000     C:\Windows\System32\wship6.dll
0x73b00000 - 0x73b10000     C:\Windows\system32\NLAapi.dll
0x71fe0000 - 0x71ff0000     C:\Windows\system32\napinsp.dll
0x71fc0000 - 0x71fd2000     C:\Windows\system32\pnrpnsp.dll
0x75720000 - 0x75764000     C:\Windows\system32\DNSAPI.dll
0x71fa0000 - 0x71fa8000     C:\Windows\System32\winrnr.dll
0x753a0000 - 0x753a5000     C:\Windows\System32\wshtcpip.dll
0x73720000 - 0x7373c000     C:\Windows\system32\IPHLPAPI.DLL
0x73700000 - 0x73707000     C:\Windows\system32\WINNSI.DLL
0x71fb0000 - 0x71fb6000     C:\Windows\system32\rasadhlp.dll
0x73590000 - 0x735c8000     C:\Windows\System32\fwpuclnt.dll
0x6d630000 - 0x6d639000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\jre\bin\nio.dll
0x542d0000 - 0x5433e000     C:\Users\*******\Adobe Flash Builder 4.6\cascaded\328916\configuration\org.eclipse.osgi\bundles\546\1\.cp\swt-win32-3735.dll
0x76260000 - 0x762db000     C:\Windows\system32\comdlg32.dll
0x76d70000 - 0x779ba000     C:\Windows\system32\SHELL32.dll
0x764a0000 - 0x76595000     C:\Windows\system32\WININET.dll
0x76c30000 - 0x76d67000     C:\Windows\system32\urlmon.dll
0x75fa0000 - 0x760be000     C:\Windows\system32\CRYPT32.dll
0x75e90000 - 0x75e9c000     C:\Windows\system32\MSASN1.dll
0x76950000 - 0x76b4e000     C:\Windows\system32\iertutil.dll
0x74900000 - 0x74913000     C:\Windows\system32\dwmapi.dll
0x74920000 - 0x74a15000     C:\Windows\system32\propsys.dll
0x779c0000 - 0x77a43000     C:\Windows\system32\CLBCatQ.DLL
0x6cd90000 - 0x6cd99000     C:\Windows\system32\LINKINFO.dll
0x54270000 - 0x5428d000     C:\Users\*******\Adobe Flash Builder 4.6\cascaded\328916\configuration\org.eclipse.osgi\bundles\546\1\.cp\swt-gdip-win32-3735.dll
0x74ba0000 - 0x74d30000     C:\Windows\WinSxS\x86_microsoft.windows.gdiplus_6595b64144ccf1df_1.1.7601.17825_none_72d273598668a06b\gdiplus.dll
0x747d0000 - 0x748cb000     C:\Windows\system32\WindowsCodecs.dll
0x74100000 - 0x7413c000     C:\Windows\system32\oleacc.dll
0x54e90000 - 0x54e9e000     C:\Users\*******\Adobe Flash Builder 4.6\cascaded\328916\configuration\org.eclipse.osgi\bundles\232\1\.cp\os\win32\x86\localfile_1_0_0.dll
0x54ef0000 - 0x54ef8000     C:\Users\*******\Adobe Flash Builder 4.6\cascaded\328916\configuration\org.eclipse.osgi\bundles\242\1\.cp\os\win32\x86\win32refresh.dll
0x55b30000 - 0x55b71000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\eclipse\plugins\com.adobe.flexide.nativelibs_4.6.0.328916\os\win32\x86\BridgeTalk.dll
0x6fdc0000 - 0x6fe2a000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\eclipse\plugins\com.adobe.flexide.nativelibs_4.6.0.328916\libs\adobe_caps.dll
0x762e0000 - 0x7647d000     C:\Windows\system32\SETUPAPI.dll
0x760f0000 - 0x76117000     C:\Windows\system32\CFGMGR32.dll
0x75ea0000 - 0x75eb2000     C:\Windows\system32\DEVOBJ.dll
0x752e0000 - 0x75301000     C:\Windows\system32\ntmarta.dll
0x76900000 - 0x76945000     C:\Windows\system32\WLDAP32.dll
0x55cb0000 - 0x55d67000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\eclipse\plugins\com.adobe.flexbuilder.utils.osnative_4.6.0.328916\os\win32\x86\JNIToNativeBridge.dll
0x55ba0000 - 0x55bab000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\eclipse\plugins\com.adobe.flexide.amt_4.6.0.328916\os\win32\x86\amt_win_jnilib.dll
0x71460000 - 0x714ee000     C:\Windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.4940_none_50916076bcb9a742\MSVCP90.dll
0x633a0000 - 0x63490000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\eclipse\plugins\com.adobe.flexide.amt_4.6.0.328916\os\win32\x86\amtlib.dll
0x63280000 - 0x63395000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\eclipse\plugins\com.adobe.flexide.amt_4.6.0.328916\os\win32\x86\amtservices.dll
0x72090000 - 0x720e8000     C:\Windows\system32\WINHTTP.dll
0x72040000 - 0x7208f000     C:\Windows\system32\webio.dll
0x6cd20000 - 0x6cd8a000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\eclipse\plugins\com.adobe.flexide.amt_4.6.0.328916\os\win32\x86\adobe_caps.dll
0x55ed0000 - 0x55ef8000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\eclipse\plugins\com.adobe.flexide.amt_4.6.0.328916\os\win32\x86\asneu.dll
0x71ad0000 - 0x71ada000     C:\Windows\system32\wbem\wbemprox.dll
0x71d30000 - 0x71d8c000     C:\Windows\system32\wbemcomn.dll
0x75e10000 - 0x75e1e000     C:\Windows\system32\RpcRtRemote.dll
0x71560000 - 0x7156f000     C:\Windows\system32\wbem\wbemsvc.dll
0x71ba0000 - 0x71c36000     C:\Windows\system32\wbem\fastprox.dll
0x71ae0000 - 0x71af8000     C:\Windows\system32\NTDSAPI.dll
0x73560000 - 0x73572000     C:\Windows\system32\dhcpcsvc.DLL
0x73240000 - 0x7324d000     C:\Windows\system32\dhcpcsvc6.DLL
0x75d30000 - 0x75d4b000     C:\Windows\system32\SspiCli.dll
0x75560000 - 0x75568000     C:\Windows\system32\credssp.dll
0x75800000 - 0x75842000     C:\Windows\system32\msv1_0.DLL
0x75ac0000 - 0x75ad1000     C:\Windows\system32\cryptdll.dll
0x756b0000 - 0x756ea000     C:\Windows\system32\schannel.DLL
0x75d10000 - 0x75d18000     C:\Windows\system32\secur32.dll
0x75a00000 - 0x75a38000     C:\Windows\system32\ncrypt.dll
0x759e0000 - 0x759f7000     C:\Windows\system32\bcrypt.dll
0x75580000 - 0x755bd000     C:\Windows\system32\bcryptprimitives.dll
0x75450000 - 0x75466000     C:\Windows\system32\GPAPI.dll
0x631e0000 - 0x63272000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\eclipse\plugins\com.adobe.flexide.amt_4.6.0.328916\os\win32\x86\updaternotifications.dll
0x74490000 - 0x744a1000     C:\Windows\system32\NETAPI32.dll
0x75630000 - 0x75639000     C:\Windows\system32\netutils.dll
0x75ca0000 - 0x75cb9000     C:\Windows\system32\srvcli.dll
0x74480000 - 0x7448f000     C:\Windows\system32\wkscli.dll
0x73a80000 - 0x73afd000     C:\Windows\system32\taskschd.dll
0x56280000 - 0x5628b000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\eclipse\plugins\com.adobe.flexide.nativelibs_4.6.0.328916\os\win32\x86\Headlights.dll
0x6d000000 - 0x6d14a000     C:\Program Files\Adobe\Adobe Flash Builder 4.6\jre\bin\awt.dll
0x6f7c0000 - 0x6f811000     C:\Windows\system32\WINSPOOL.DRV
0x74060000 - 0x74065000     C:\Windows\system32\msimg32.dll
0x6e180000 - 0x6e2ef000     C:\Windows\system32\explorerframe.dll
0x74b70000 - 0x74b9f000     C:\Windows\system32\DUser.dll
0x74ab0000 - 0x74b62000     C:\Windows\system32\DUI70.dll
0x73900000 - 0x7390f000     C:\Users\*******\Adobe Flash Builder 4.6\cascaded\328916\configuration\org.eclipse.osgi\bundles\238\1\.cp\jWinHttp-1.0.0.dll
0x745f0000 - 0x7461e000     C:\Windows\system32\mlang.dll
0x6c2b0000 - 0x6c320000     C:\Windows\system32\ntshrui.dll
0x6f390000 - 0x6f39b000     C:\Windows\system32\cscapi.dll
0x739c0000 - 0x739ca000     C:\Windows\system32\slc.dll
0x6e680000 - 0x6e68d000     C:\Program Files\TortoiseSVN\bin\TortoiseStub32.dll
0x6e020000 - 0x6e08b000     C:\Program Files\TortoiseSVN\bin\TortoiseSVN32.dll
0x6dd30000 - 0x6e020000     C:\Program Files\TortoiseSVN\bin\libsvn_tsvn32.dll
0x6dd00000 - 0x6dd24000     C:\Program Files\TortoiseSVN\bin\libapr_tsvn32.dll
0x6dc40000 - 0x6dcff000     C:\Windows\system32\MSVCR100.dll

VM Arguments:
jvm_args: -Xms256m -Xmx1024m -XX:MaxPermSize=256m -XX:PermSize=64m -Dorg.eclipse.equinox.p2.reconciler.dropins.directory=eclipse/dropins -Declipse.application=com.adobe.flexbuilder.standalone.FlashBuilderApplication -Duser.language=en -Duser.country=US 
java_command: <unknown>
Launcher Type: generic

Environment Variables:
JAVA_HOME=C:\Program Files\Java\jdk1.6.0_31
PATH=C:/Program Files/Adobe/Adobe Flash Builder 4.6/jre/bin/client;C:/Program Files/Adobe/Adobe Flash Builder 4.6/jre/bin;C:/Program Files/Adobe/Adobe Flash Builder 4.6/jre/lib/i386;C:\Program Files\Adobe\Adobe Flash Builder 4.6\;C:\Program Files\Java\jdk1.6.0_31\bin;c:\maven\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\dev\apache-maven-2.2.1\bin;C:\Program Files\Hewlett-Packard\OpenView\service desk 4.5\client\bin;C:\Program Files\TortoiseSVN\bin;C:\apache-ant-1.8.4\bin;C:\Program Files\Git\cmd
USERNAME=*******
OS=Windows_NT
PROCESSOR_IDENTIFIER=x86 Family 6 Model 23 Stepping 10, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows 7 Build 7601 Service Pack 1

CPU:total 2 (2 cores per cpu, 1 threads per core) family 6 model 23 stepping 10, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1

Memory: 4k page, physical 2097151k(1385984k free), swap 4194303k(3980584k free)

vm_info: Java HotSpot(TM) Client VM (14.2-b01) for windows-x86 JRE (1.6.0_16-b01), built on Jul 31 2009 11:26:58 by "java_re" with MS VC++ 7.1

time: Tue Oct 09 14:07:53 2012
elapsed time: 3068 seconds 
```

所有这一切让我得出结论，我的**Xms/Xmx/MaxPermsize/PermSize**参数一定有问题。

我知道将**Xmx**增加到高于**1024m**会导致额外的崩溃/不需要的行为。

有谁知道理想的价值观应该是什么？

任何关于此事的指示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T13:13:57.007

在获取“Java Heap Space”和“Out of Memory”时，我可以建议以下类似的问题 [Eclipse memory settings](https://stackoverflow.com/questions/334102/eclipse-memory-settings-when-getting-java-heap-space-and-out-of-memory/9993926#9993926)

和这篇博文

[http://www.redcodelabs.com/2012/03/eclipse-speed-up-flashbuilder/](http://www.redcodelabs.com/2012/03/eclipse-speed-up-flashbuilder/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T09:08:44.500

禁用“设计模式”对我有用。

在窗口>启用设计模式中找到

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T02:55:17.993

根据您的错误日志，我认为您的 PC 中使用的是 Windows 7，并且您的 PC 的内存约为 2G，对吧？

**简而言之，您的 PC 对于 Flashbuilder 来说是不够的。**

对于 Erorr，你可以参考这个： Exception in thread “main” java.lang.OutOfMemoryError: request bytes for . 交换空间不足？尽管似乎抛出了 OutOfMemoryError，但当来自本机堆的分配失败并且本机堆可能接近耗尽时，HotSpot VM 代码会报告这个明显的异常。该消息指示失败请求的大小（以字节为单位），并且还指示所需的内存。在某些情况下会显示原因，但在大多数情况下，原因将是报告分配失败的源模块的名称。如果抛出带有此错误的 OutOfMemoryError，则可能需要使用操作系统上的实用程序来进一步诊断问题。可能与应用程序无关的问题示例是操作系统配置的交换空间不足，或者系统上有另一个进程正在消耗所有内存资源。如果这些问题都不是原因，则应用程序可能由于本机泄漏而失败；例如，应用程序或库代码不断分配内存，但没有将其释放给操作系统

-- [http://www.oracle.com/technetwork/java/jdk50-ts-guide-149808.pdf（J2SE](http://www.oracle.com/technetwork/java/jdk50-ts-guide-149808.pdf) 故障排除和诊断指南）。</p>

对于您的 PC，我认为您需要减少 Xmx 或关闭不必要的应用程序。

这是来自 Eclipse wiki 的示例： [http ://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F](http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse%3F)

```
-vmargs
-Xms512m
-Xmx1024m
-XX:+UseParallelGC
-XX:PermSize=256M
-XX:MaxPermSize=512M 
```

# macos - 在 NSBitmapImageRep 上绘图

> ID：12799920
> 
> 赞同：3
> 
> 时间：2012-10-09T12:20:35.673
> 
> 标签：macos, cocoa, drawing

我正在尝试创建内存图像，在其上绘制并保存到磁盘。

当前代码是：

```
NSBitmapImageRep *rep = [[NSBitmapImageRep alloc]
                         initWithBitmapDataPlanes:NULL
                         pixelsWide:256
                         pixelsHigh:256
                         bitsPerSample:8
                         samplesPerPixel:4
                         hasAlpha:YES
                         isPlanar:YES
                         colorSpaceName:NSDeviceRGBColorSpace
                         bitmapFormat:NSAlphaFirstBitmapFormat
                         bytesPerRow:0
                         bitsPerPixel:8
                         ];

[NSGraphicsContext saveGraphicsState];
[NSGraphicsContext setCurrentContext:[NSGraphicsContext graphicsContextWithBitmapImageRep:rep]];

// Draw your content...
NSRect aRect=NSMakeRect(10.0,10.0,30.0,30.0);
NSBezierPath *thePath=[NSBezierPath bezierPathWithRect:aRect];
[[NSColor redColor] set];
[thePath fill];

[NSGraphicsContext restoreGraphicsState];

NSData *data = [rep representationUsingType: NSPNGFileType properties: nil];
[data writeToFile: @"test.png" atomically: NO]; 
```

尝试在当前上下文中绘制时，出现错误

```
CGContextSetFillColorWithColor: invalid context 0x0 
```

这里有什么问题？为什么 NSBitmapImageRep 返回的上下文为 NULL？创建绘制图像并保存它的最佳方法是什么？

**更新：**

最终得出以下解决方案：

```
NSImage *image = [[NSImage alloc] initWithSize:NSMakeSize(256, 256)];
[image lockFocus];

NSRect aRect=NSMakeRect(10.0,10.0,30.0,30.0);
NSBezierPath *thePath=[NSBezierPath bezierPathWithRect:aRect];
[[NSColor redColor] set];
[thePath fill];

[image unlockFocus];

NSData *data = [image TIFFRepresentation];
[data writeToFile: @"test.png" atomically: NO]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T00:47:00.860

您的解决方法对手头的任务有效，但是，它比实际让**NSBitmapImageRep**工作更昂贵！请参阅[http://cocoadev.com/wiki/NSBitmapImageRep](http://cocoadev.com/wiki/NSBitmapImageRep)进行一些讨论。

请注意 [ **NSGraphicsContext** *graphicsContextWithBitmapImageRep* :] 文档说：

> “此方法仅接受单平面 NSBitmapImageRep 实例。”

您正在使用 isPlanar:YES 设置您的**NSBitmapImageRep**，因此它使用多个平面...将其设置为 NO - 您应该一切顺利！

换句话说：

```
NSBitmapImageRep *rep = [[NSBitmapImageRep alloc]
                     initWithBitmapDataPlanes:NULL
                     pixelsWide:256
                     pixelsHigh:256
                     bitsPerSample:8
                     samplesPerPixel:4
                     hasAlpha:YES
                     isPlanar:NO
                     colorSpaceName:NSDeviceRGBColorSpace
                     bitmapFormat:NSAlphaFirstBitmapFormat
                     bytesPerRow:0
                     bitsPerPixel:0
                     ];
// etc... 
```

# whois - 如何查找在特定时间注册的域名？

> ID：12799924
> 
> 赞同：0
> 
> 时间：2012-10-09T12:20:48.960
> 
> 标签：whois, registrar

有没有可以查阅域名注册历史的地方？

更具体地说：我怎样才能知道在一定时间内注册了哪些其他域？

我知道有付费服务可以让您查找批量域名注册。我想知道他们是如何获得这些数据的。

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:35:15.710

通常，他们与 Whois 注册商达成协议，每晚获取数据库转储，和/或他们运行[被动 DNS](http://www.enyo.de/fw/software/dnslogger/)之类的东西来发现要放入其数据库的域。

# php - 防止重复的行值

> ID：12799925
> 
> 赞同：1
> 
> 时间：2012-10-09T12:20:49.993
> 
> 标签：php, mysql

我已经进行了一些挖掘，但我找不到根据我的需要防止重复条目的有效方法。我需要第 2 列（proj_id）和第 4 列（dept_id）永远不会相同，因为每个部门只能在一个项目上工作一次。因此，不应允许第 1 行和第 4 行、第 6 行和第 7 行以及第 14 行和第 15 行。我也会继续挖掘。

```
summary_id  proj_id     hours_id    dept_id     date_entered
1   8   3   6   9/9/2012
2   2   2   6   9/9/2012
3   1   6   19  9/9/2012
4   8   3   6   9/9/2012
5   2   5   17  9/9/2012
6   7   2   5   9/9/2012
7   7   2   5   9/9/2012
8   2   5   17  9/9/2012
9   7   4   17  10/10/2012
10  3   6   1   10/10/2012
11  5   1   15  10/10/2012
12  4   4   3   10/10/2012
13  3   5   1   10/10/2012
14  8   2   13  10/10/2012
15  8   2   13  10/10/2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:26:12.040

在两列上定义唯一键

```
ALTER TABLE `your_table` ADD UNIQUE (`proj_id`, `dept_id`); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:35:23.430

在将唯一组合键应用于您的表之前，您必须先删除重复记录，然后应用以下 sql 命令：

ALTER TABLE`your_table_name`添加唯一 ( `proj_id`, `dept_id`);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:34:09.387

看起来你是 php 和 mysql 的新手。所以这是最简单的方法。

1.  登录到 PHPMyAdmin
2.  选择您的数据库和您的表。
3.  查看它的结构（单击屏幕顶部的按钮）。
4.  使用左侧的复选框检查两个字段（proj_id 和 dept_id）。
5.  在表格的底部，您应该找到“With selected”字样，并在其前面找到一些操作。选择选项以制作“主要”。

当然，如果您有重复的条目，请先将其删除。

# mysql - 列出表中的元素，添加其他表中的引用并在 ORDER BY 中使用它们

> ID：12799926
> 
> 赞同：0
> 
> 时间：2012-10-09T12:20:50.817
> 
> 标签：mysql, sql, sql-order-by

表：

帮助（重要的是 id 和 fecha 字段）

![在此处输入图像描述](../Images/3061f405a752b4d565b03db9be0f0502.png)

共享帮助（其他用户在不同日期引用的帮助）

![在此处输入图像描述](../Images/b672fe8f9caee5f1b168794f8c4b7ff1.png)

所以，

来自用户的所有帮助 (user_id = 1)

```
SELECT * FROM helps WHERE id_user = 1 
```

来自用户和他所引用的人的所有帮助

```
SELECT * FROM helps where id_user = 1 or id IN (SELECT helpid FROM shared_helps WHERE userid = 1) 
```

我知道你们会发现这是一个非常丑陋的查询（我希望你们能给我亮光），但它似乎显示了我想要的结果。问题是这种方式 shared_helps.fecha 被忽略了，所以它在 ORDER BY 中不起作用，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:28:21.250

```
SELECT
  helps.*
FROM
  helps
LEFT JOIN
  shared_helps
    ON  shared_helps.helpid = helps.id
    AND shared_helps.userid = 1
WHERE
     helps.id_user = 1
  OR shared_helps.userid = 1
ORDER BY
  CASE WHEN helps.id_user = 1 THEN 0 ELSE 1 END,
  shared_helps.fecha 
```

**编辑**

根据您的评论，试试这个...

```
ORDER BY
  COALESCE(shared_helps.fecha, helps.fecha) 
```

或者可能这个...

```
ORDER BY
  helps.fecha 
```

老实说，我不是 100% 确定你需要什么。也许您可以包含一些样本数据和您希望该样本数据的输出？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:27:51.703

希望这可以帮助你，试试这个方法：

> SELECT * FROM
> help INNER JOIN shared_helps ON help.user_id = shared_helps.user_id WHERE help.user_id = 1
> ORDER BY shared_helps.fecha ASC|DESC

# database - 在 Haskell 中处理数据库游标

> ID：12799928
> 
> 赞同：3
> 
> 时间：2012-10-09T12:20:56.853
> 
> 标签：database, haskell, cursor

在一个相关的[Scala question](https://stackoverflow.com/questions/12786054/functionally-processing-a-database-cursor-in-scala)中，我问了以下问题：

当我需要使用 JDBC 驱动程序从 PostgreSQL 数据库中读取数百万行数据库时，我总是使用游标，否则我会得到 OutOfMemoryError。这是我使用的模式（伪代码）：

```
begin transaction
execute("declare cursor...")
while (true) {
  boolean processedSomeRows = false
  resultSet = executeQuery("fetch forward...")
  while (resultSet.next()) {
    processedSomeRows = true
    ...
  }
  if (!processedSomeRows) break
}
close cursor
commit 
```

如何在惯用的 Haskell 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:38:24.303

有一个非常新的概念来处理像 sql 游标这样的流：[iteratees](http://okmij.org/ftp/Haskell/Iteratee/IterateeM.hs)、[enumerator](http://hackage.haskell.org/package/enumerator)或[管道](http://hackage.haskell.org/package/conduit)。例如，就管道库而言，来自[Persistent Book](http://www.yesodweb.com/book/persistent#persistent-raw-sql-133)：

```
runResourceT $ withStmt "declare cursor..." []
    $$ mapM_ doSomethingWithSingleResult 
```

`withStmt "declare cursor..." []``source`用行创建，为处理单行`mapM_ doSomethingWithSingleResult` 创建，并用.`sink``$$``source``sink`

# java - 如何从其他 Activity 填充 Android 中的 ListView？

> ID：12799930
> 
> 赞同：-1
> 
> 时间：2012-10-09T12:20:59.383
> 
> 标签：java, android, android-activity, views

我想构建一个 Android 应用程序并为此使用 Eclipse。这是我的第一个应用程序，我在[http://developer.android.com](http://developer.android.com)上阅读了如何创建应用程序等等。

我的应用程序：

我使用三个活动。

第一个活动是主要的。在第二个活动中，我可以输入一个字符串并拥有一个按钮。在我的第三个活动中，我有一个 ListView 但它是空的。如果我单击按钮的第二个 Activity，我希望字符串将发送到第三个 Activity 上的 ListView。

另一个问题是如何在 Android 应用程序中保存信息。我可以使用数据库还是正确的方法。我想保存列表视图，如果我从主活动中打开活动，我想查看带有信息的列表视图。

我的代码：

第一活动：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void createPlan(View view)
    {
        Intent intent = new Intent(this,CreateActivity.class);

        startActivity(intent);

    }
} 
```

第二个活动：

```
public class CreateActivity extends Activity {

    public final static String ListViewMessage = "de.linde.KSDILLPlan";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_create);

        FillSpinnerViews(); 
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.test, menu);
        return true;
    }

    public void FillSpinnerViews()
    {
        Spinner spinner = (Spinner)findViewById(R.id.spinner2);

        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.daysArray, android.R.layout.simple_spinner_item);

        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        spinner.setAdapter(adapter);

        Spinner Spinner2 = (Spinner)findViewById(R.id.spinner1);

        ArrayAdapter<CharSequence> adapter2 = ArrayAdapter.createFromResource(this, R.array.zeitArray, android.R.layout.simple_spinner_item);

        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        Spinner2.setAdapter(adapter2); 

    }

    public void createPlan(View view)
    {
        String PlanName;
        //String StundenZahl;
        //String Wochentag;
        //Boolean doppelstunde; 

        Intent intent = new Intent(this,OpenActivity.class);

        EditText planName = (EditText)findViewById(R.id.editText1);

        PlanName = planName.getText().toString();

        intent.putExtra(ListViewMessage, PlanName); 

        startActivity(intent);

    } 
```

第三个活动：ListView

```
public class OpenActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_open);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_open2, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:52:03.893

您可以使用以下意图将数据从一个活动传递到另一个活动，

在 onclick 按钮的第二个活动中，

```
Intent in=new Intent(currentclass.this,nextactivity.class);
in.putExtras("value_name",value);
startActivity(in);
finish(); 
```

在第三个活动中，

```
If(getIntent().getExtras!=null)
{
   String msg=getIntent().getStringExtra("value_name"); // value_name is the attribute given in second activity
} 
```

您可以将数据存储在数据库或 sharedpreference 中。这取决于您的需求。如果要将批量数据存储为大量人员详细信息，可以使用 SQLite 存储在数据库中，或者如果要存储登录详细信息等小数据，可以存储在 SharedPreferences 中。

请参阅 Database 和 SharedPreferences 的链接

[SQLite](http://www.vogella.com/articles/AndroidSQLite/article.html)

[共享首选项](http://marakana.com/forums/android/examples/63.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:43:14.567

使用以下代码从意图的包中获取字符串。

```
public class OpenActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_open);
        String text = getIntent().getStringExtra( CreateActivity.ListViewMessage );
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_open2, menu);
        return true;
    }
} 
```

有关持久存储问题，请参阅此[链接](http://developer.android.com/guide/topics/data/data-storage.html)。

# wpf - 无法删除其他进程使用的文件

> ID：12799931
> 
> 赞同：4
> 
> 时间：2012-10-09T12:21:00.603
> 
> 标签：wpf, c#-4.0, file-io, ioexception

我正在使用以下代码在我的 wpf 应用程序中显示一些图像：

```
 <Image Source="{Binding Path=TemplateImagePath, Mode=TwoWay}"  Grid.Row="3" Grid.Column="2"  Width="400" Height="200"/> 
```

并通过浏览某个目录在构造函数后面的代码中设置它的绑定属性，下面是代码：

```
DirectoryInfo Dir = new DirectoryInfo(@"D:/Template");
            if (Dir.Exists)
            {
                if (Dir.GetFiles().Count() > 0)
                {
                    foreach (FileInfo item in Dir.GetFiles())
                    {
                        TemplateImagePath = item.FullName;
                    }
                }
            } 
```

但是如果用户上传了一些其他图像，那么我需要删除这个旧图像，我正在按照以下方式进行操作，并将图像绑定设置为 null：

```
DirectoryInfo Dir = new DirectoryInfo(@"D:/Template");
                if (Dir.Exists)
                {
                    if (Dir.GetFiles().Count() > 0)
                    {
                        foreach (FileInfo item in Dir.GetFiles())
                        {
                            TemplateImagePath= null;
                            File.Delete(item.FullName);
                        }
                    }
                } 
```

但是我遇到了无法删除其他进程使用的文件的异常。我怎样才能删除它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T14:35:27.633

为了能够在 ImageControl 中显示图像时将其删除，您必须创建一个设置了[BitmapCacheOption.OnLoad的新](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapcacheoption.aspx)[BitmapImage](http://msdn.microsoft.com/en-us/library/ms619218.aspx)或[BitmapFrame](http://msdn.microsoft.com/en-us/library/ms619213.aspx)对象。然后将立即从文件中加载位图，之后文件不会被锁定。

`string TemplateImagePath`将您的属性从to更改为`ImageSource TemplateImage`并像这样绑定：

```
<Image Source="{Binding TemplateImage}"/> 
```

像这样设置`TemplateImage`属性：

```
BitmapImage image = new BitmapImage();
image.BeginInit();
image.CacheOption = BitmapCacheOption.OnLoad;
image.UriSource = new Uri(item.FullName);
image.EndInit();
TemplateImage = image; 
```

或这个：

```
TemplateImage = BitmapFrame.Create(
    new Uri(item.FullName),
    BitmapCreateOptions.None,
    BitmapCacheOption.OnLoad); 
```

* * *

如果您想继续绑定到您的`TemplateImagePath`属性，您可以改用[绑定转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)将字符串转换为 ImageSource，如上所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T13:52:35.837

根据 Clemens 的建议，这是具有良好代码重用性的绑定转换器：

```
namespace Controls
{
    [ValueConversion(typeof(String), typeof(ImageSource))]
    public class StringToImageSourceConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (!(value is string valueString))
            {
                return null;
            }
            try
            {
                ImageSource image = BitmapFrame.Create(new Uri(valueString), BitmapCreateOptions.IgnoreImageCache, BitmapCacheOption.OnLoad);
                return image;
            }
            catch { return null; }
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

并且有一个用于绑定的字符串，例如

```
public string MyImageString { get; set; } = @"C:\test.jpg" 
```

在 UI 中使用了转换器，在我的例子中来自名为“Controls”的库

```
<Window x:Class="MainFrame"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:Controls;assembly=Controls">
    <Window.Resources>
        <controls:StringToImageSourceConverter x:Key="StringToImageSourceConverter" />
    </Window.Resources>
    <Grid>
        <Image Source="{Binding MyImageString, Converter={StaticResource StringToImageSourceConverter}}" />
    </Grid>
</Window> 
```

# java - Java - 格式化数字并导出到 excel doc

> ID：12799932
> 
> 赞同：0
> 
> 时间：2012-10-09T12:21:01.070
> 
> 标签：java, currency, data-formatters

从 java 类中，我将值 54666700 导出到 .xlsx 文档。我想将其显示为 54,666,700 美元，但在文档中它应存储为 54666700，即，当我选择该列时，该值应选择为数字 54666700。

至于格式化为货币，我使用下面的代码。

```
Long newsValue = 54666700
NumberFormat testFormat = NumberFormat.getCurrencyInstance(Locale.US);
testFormat.setMinimumFractionDigits(0);
String currency = testFormat.format(current);
//which will be $54,666,700 
```

我找到了这个库[Apache DataFormatter](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/DataFormatter.html)，但无法弄清楚如何在那里获取 CELL 对象。

任何建议/提示表示赞赏。

# joomla - 打印所有用户 - Joomla 2.5

> ID：12799933
> 
> 赞同：4
> 
> 时间：2012-10-09T12:21:09.823
> 
> 标签：joomla, joomla2.5, user-profile, user-management

我是 Joomla 的新手。我使用 Joomla 2.5 创建了网站。我有登录页面，这是默认的 Joomla 用户管理系统。

我想要的是以表格格式显示所有用户数据。我怎么能这样做？

## 编辑 1

我可以通过以下步骤查看用户。

1.  以 .身份转到管理员页面`www.site.com/administrator`。
2.  以管理员身份登录
3.  单击`Users >> User Manager`菜单，然后我可以看到用户列表。

我想打印相同的列表，但是在网站上而不是在后端的管理员站点上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T12:57:05.580

您可以在要显示用户列表的页面上运行查询。您可以使用 $row 对象获取所有用户表字段。

```
$db =& JFactory::getDBO();
$query = "SELECT * FROM #__users" ;
$db->setQuery($query);
$rows = $db->loadObjectList();
foreach ($rows as $row) {
  echo $row->id.'|'.$row->username.'|'.$row->email;
} 
```

## 编辑 1

下面是我用的。

安装扩展[Flexi 自定义代码](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-modules/15251)。

使用它创建模块，在其中添加上面的代码并在要显示的菜单上显示该菜单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T13:06:33.443

两种可能的解决方案

*   使用JED 中提供的[用户配置文件组件](http://extensions.joomla.org/extensions/clients-a-communities/members-lists/19996)
*   启用“用户 - 联系人创建者”插件为每个新用户创建一个联系人配置文件，然后使用 Joomla 内置菜单项列出所有联系人

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-13T06:37:07.930

// 我的示例包含 opt-groups、预选用户和更好的用户 ID

```
function getUserList ($user_id) {
    $db = JFactory::getDBO ();
    $db->setQuery ("SELECT id, username, usertype FROM ' . $db->quoteName ('#__users') . ' ORDER BY usertype,username ASC");
    $rows = $db->loadAssocList ();
    static $opt_tag;

    $list = '<option value="0">' . JText::_ ('SELECTION') . '</option>';

    foreach ($rows as $row) {
        if (empty ($opt_tag) || $opt_tag != $row['usertype']) {
            $list .= '<optgroup label="' . $row['usertype'] . '">';
            $opt_tag = $row['usertype'];
        }

        if ($row['id'] < 10) {
            $id = '000' . $row['id'];
        }

        elseif ($row['id'] < 100) {
            $id = '00' . $row['id'];
        }

        elseif ($row['id'] < 1000) {
            $id = '0' . $row['id'];
        }

        $list .= '<option value="' . $row['id'] . '"' . (((int) $user_id == $row['id']) ? ' selected="SELECTED"' : '') . '>' . $id . ' - ' . $row['username'] . '</option>';
        if (empty ($opt_tag) || $opt_tag != $row['usertype']) {
            $list .= '</optgroup>';
        }
    }
    return $list;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T13:00:56.570

为此，您将需要某种组件。[例如，此](http://extensions.joomla.org/extensions/clients-a-communities/members-lists/19996)用户配置文件组件（NB 使用此作为我的示例作为工作同事曾经使用过它 - 不像我希望的那样可定制 - 但可能适合你之后的事情。我相信还有更多，因为有一个完整的[成员列出类别](http://extensions.joomla.org/extensions/clients-a-communities/members-lists)。）

只需安装其中一个并选择您要显示的内容。像任何其他组件一样将其添加到菜单中，然后就可以使用了！

# php - 用于过滤 mysql 结果的基于 PHP 的代码，我可以提高效率吗？

> ID：12799936
> 
> 赞同：2
> 
> 时间：2012-10-09T12:21:31.377
> 
> 标签：php, mysql, filter

我已经制作了这个 php 代码来过滤来自 mysql 数据库的结果。它工作得很好，但我确信这不是实现预期结果的最有效方式（或正确使用语言）。我正在尽我最大的努力在编写代码方面变得“好”，并希望得到一些关于如何更好地做到这一点的反馈。

```
$filter = "";

if (isset($_POST['submit']))
{
$aircraft_reg = "";
$prefix = "";
$part_number = "";
$flight_control = "";

if(!empty($_POST['aircraft_reg']))
    {
    $aircraft_reg = "aircraft_reg = '" . $_POST['aircraft_reg'] . "'";
    }
if(!empty($_POST['prefix']))
    {
    $prefix = "prefix = '" . $_POST['prefix'] . "'";
    }
if(!empty($_POST['part_number']))
    {
    $part_number = "part_number = '" . $_POST['part_number'] . "'";
    }
if(!empty($_POST['flight_control']))
    {
    $flight_control = "flight_control = '" . $_POST['flight_control'] . "'";
    }   
if ($aircraft_reg != "" && ($prefix != "" || $part_number != "" || $flight_control != ""))
    {
    $a = " AND ";
    }
else
    {
    $a = "";
    }
if ($prefix != "" && ($part_number != "" || $flight_control != ""))
    {
    $b = " AND ";
    }
else
    {
    $b = "";
    }
if ($part_number != "" && $flight_control != "")
    {
    $c = " AND ";
    }
else
    {
    $c = "";
    }
if ($aircraft_reg != "" || $prefix != "" || $part_number != "" || $flight_control != "")
    {
    $filter = "WHERE " . $aircraft_reg . $a . $prefix . $b . $part_number . $c . $flight_control;
    }
}

    $result = mysql_query("SELECT * FROM installed $filter ORDER BY aircraft_reg , part_number, date_installed ASC"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:43:38.810

您只需要遵循以下模式：

```
$result = mysql_query("
        SELECT * 
        FROM installed 
        WHERE  
            ".($_POST['aircraft_reg']?"aircraft_reg=" .mysql_real_escape_string($_POST['aircraft_reg']):"1" )." AND     
            ...
        ORDER BY aircraft_reg , part_number, date_installed ASC"); 
```

另一种选择：

```
foreach($_POST as $key => $val)
    if($key!="submit" and $val)
        $filters[] = "$key='".mysql_real_escape_string($val)."' ";

$result = mysql_query("
    SELECT * 
    FROM installed 
    ".(isset($filters)?"WHERE ".implode("AND ",$filters):"")."      
    ORDER BY aircraft_reg , part_number, date_installed ASC"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:28:49.600

我建议你使用一些成熟的东西，比如 ActiveRecord：

[http://www.phpactiverecord.org/](http://www.phpactiverecord.org/)

无需重新发明轮子（除非这纯粹是为了学习，在这种情况下，继续！）

...如果这纯粹是为了学习，请不要忘记转义任何 REQUEST 数据，例如您正在使用的 $_POST，使用 mysql_real_escape_string 之类的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:29:48.067

快的：

1.  使用 array_key_exists 查看是否有东西`$_POST`
2.  不要将`$_POST`值直接放在 SQL 中，将它们转义。更多信息当你谷歌搜索`SQL injection attack`
3.  我会先验证/清理您的输入，然后一次性创建查询：

    ```
    if (array_key_exists("partnumber", $_POST) {
         $part_number = validate_partnumber($_POST['partnumber']);
         $part_number = escape_for_db($part_number);
    }
    $q = ".... WHERE part_number='$part_number' ...."; 
    ```

除此之外，它看起来并不太糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T12:44:06.110

你可以试试这个，因为条件运算符的时间复杂度比`if()-else()`. 此外，更少使用变量将导致更少的内存分配，因此它比您使用的更快、更优化。另一件事，使用`mysql_real_escape_string()`防止 sql 注入。

```
$filter = "";
if (isset($_POST['submit']))
{
    $condition_count = 0;

    if(!empty($_POST['aircraft_reg']))
    {
        $filter = " WHERE aircraft_reg = '" . mysql_real_escape_string($_POST['aircraft_reg']) . "'";
        $condition_count++;
    }
    if(!empty($_POST['prefix']))
    {
        $condition_count > 0?$filter .= " AND prefix = '" . mysql_real_escape_string($_POST['prefix']) . "'":$filter .= " WHERE prefix = '" . mysql_real_escape_string($_POST['prefix']) . "'";
        $condition_count++;
    }
    if(!empty($_POST['part_number']))
    {
        $condition_count > 0?$filter .= " AND part_number = '" . mysql_real_escape_string($_POST['part_number']) . "'":$filter .= " WHERE part_number = '" . mysql_real_escape_string($_POST['part_number']) . "'";
        $condition_count++;
    }
    if(!empty($_POST['flight_control']))
    {
        $condition_count > 0?$filter .= " AND flight_control = '" . mysql_real_escape_string($_POST['flight_control']) . "'":$filter .= " WHERE flight_control = '" . mysql_real_escape_string($_POST['flight_control']) . "'";
        $condition_count++;
    }
}

$result = mysql_query("SELECT * FROM installed ".$filter." ORDER BY aircraft_reg , part_number, date_installed ASC"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T12:57:57.397

```
if (!isset($_POST['submit'])) exit;

$aircraft_reg = $_POST['aircraft_reg'];
$prefix = $_POST['prefix'];
$part_number = $_POST['part_number'];
$flight_control = $_POST['flight_control'];

$result = mysql_query("
    SELECT * 
    FROM installed 
    where 
        aircraft_reg = if('$aircraft_reg' = '', aircraft_reg, '$aircraft_reg')
        and
        prefix = if('$prefix' = '', prefix, '$prefix')
        and
        part_number = if('$part_number' = '', part_number, '$part_number')
        and
        flight_control = if('$flight_control' = '', flight_control, '$flight_control')
    ORDER BY aircraft_reg , part_number, date_installed
    "); 
```

如果这是真的，那么不要忘记清理用户输入，否则您将成为一个简单的 sql 注入受害者。

# map - 在地图上跟踪多辆车

> ID：12799938
> 
> 赞同：4
> 
> 时间：2012-10-09T12:21:40.520
> 
> 标签：map, geolocation

我想在开源地图上跟踪多辆车。不管它是在谷歌地图还是其他地方。我想做的就像这个项目： http: [//mbus.pts.umich.edu/index.php](http://mbus.pts.umich.edu/index.php)

我想实时查看汽车如何改变位置。因此，我从汽车上获取 GPS。如果没有 Google 地图许可证，这可能吗？还带几辆车？还有其他例子可以说明如何管理吗？

如果有人可以帮助我，那就太好了！我只是找不到任何其他示例或教程。

# c# - 应在 WPF 中的应用启动时默认选择 ListView 项

> ID：12799939
> 
> 赞同：1
> 
> 时间：2012-10-09T12:21:43.067
> 
> 标签：c#, wpf, xaml, listview, textbox

我的 xaml 文件中有一个列表视图和一个文本框。

**看法：**

```
<ListView Grid.Column="0" ItemsSource="{Binding I2CDeviceList}" SelectedItem="{Binding SelectedI2CDeviceList, Mode=TwoWay}" Name="I2cDeviceList" >
       <ListView.View>
              <GridView>
                    <GridViewColumn Header="I2C Device" Width="Auto" DisplayMemberBinding="{Binding I2CDevName}" />
                    <GridViewColumn Header="I2C Device Address" Width="Auto" DisplayMemberBinding="{Binding I2CDeviceAddress}" />
              </GridView>
       </ListView.View>
</ListView>

<TextBox Height="23" Grid.Column="1" Name="AddressI2C" Text="{Binding Path=AddressMessage, Mode=TwoWay}" /> 
```

**查看型号：**

```
//List View Property
public ObservableCollection<I2CModel> I2CDeviceList
    {
        get { return _I2CDeviceList; }
        set
        {
            _I2CDeviceList = value;
            NotifyPropertyChanged("I2CDeviceList");
        }
    }

    private I2CModel _selectedI2CDeviceList;
    public I2CModel SelectedI2CDeviceList
    {
        get { return _selectedI2CDeviceList; }
        set
        {
            _selectedI2CDeviceList = value;
            AddressMessage = _selectedI2CDeviceList.I2CDeviceAddress; //Displays Address in My textBox
            NotifyPropertyChanged("SelectedI2CDevSize");
        }
    }

// Property for textBox
private string _AddressMessage;
public string AddressMessage
    {
        get
        {
            return _AddressMessage;
        }
        set
        {
            _AddressMessage = value;
            NotifyPropertyChanged("AddressMessage");
        }
    } 
```

我的要求是，

当我启动应用程序时，是否可以默认选择列表视图的第一项？即，如果我的列表视图中的第一项是“Chip Id”、“0x03”，则在启动时它应该被默认选中，并且地址（0x03）也必须显示在 AddressMessage 文本框中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T12:25:24.840

在 XAML 中设置为[`SelectedIndex`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedindex.aspx)。`0`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-09T12:25:54.387

在您的 ViewModel 中，将 SelectedI2CDeviceList 设置为启动时的默认值。我使用 ViewModel Constructor 设置 SelectedItem 以便在我的窗口启动时我的视图显示选定的值。

# php - 从 PHP 和 MySql 中的总和打印排名

> ID：12799949
> 
> 赞同：0
> 
> 时间：2012-10-09T12:22:13.997
> 
> 标签：php, mysql, rank

我有如下的我的 Sql 数据库表

```
 idno      Name        Subject         Score 

  1        Mahesh      English           55
  1        Mahesh      Maths             25
  1        Mahesh      Science           35
  2        Richards    English           65 
  2
  2 
  3
  3         
  3
  .................. Like ways so on till id number 12000 
```

现在我将为用户提供一个表单并告诉他们输入 ID 号并提交然后输出应该是。

如果用户输入 idno : 3 并提交表单，那么输出应该是

```
 IDNO        NAME         TOTAL SCORE       RANK
     1         MAHESH           95            2546 (Example) 
```

我在这里使用这段代码

```
 $id = mysql_real_escape_string($_POST['id']);
   $sum = "SELECT idno, SUM(score) AS tech
   FROM jbit 
   WHERE htno='$id'";
   $result1 = mysql_query($sum);
   echo "
   <center><table id='mytable' cellspacing='0'  border=3 align=center>
   <tr>
   <TH scope='col'>IDNO</TH>
   <TH scope='col'>NAME</TH>
   <TH scope='col'>TOTAL SCORE</TH>
   <TH scope='col'>RANK</TH>
   </tr><center>";
   while ($row = mysql_fetch_assoc($result1)){
echo "<tr>";
   echo "<td align=center>" . $row['idno']. "</td>";
   echo "<td align=center>" . $row['name']. "</td>";
   echo "<td align=center>" . $row['tech']. "</td>";
   echo "</tr>"; 
```

在这里我无法计算排名并打印排名，我该怎么做？

基于总分，即 SUM（分数）作为技术排名应计算和打印

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-22T15:03:27.820

在您的问题上投入了一点时间之后，我终于创建并测试了以下 SQL 查询，它产生了与您要求的结果相同的结果，并且它也很好地处理了关系。

```
SELECT idno, name, rank,total_score
FROM (SELECT *,  IF(@marks=(@marks:=total_score), @auto, @auto:=@auto+1) AS rank 
FROM (SELECT * FROM 
  (SELECT idno, name, SUM(score) AS total_score 
    FROM jbit, 
    (SELECT @auto:=0, @marks:=0) as init 
     GROUP BY name) sub ORDER BY total_score DESC)t) as result
WHERE idno ='1' 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:30:53.830

尝试这个：

```
 SET @rownum = 0; 
   Select *,  (@rownum := @rownum+1) as RANK
   FROM
   (
      SELECT * 
      FROM
      (
         SELECT IDNO, NAME, SUM(score) AS TOTASCORE      
         FROM jbit 
         GROUP BY IDNO, NAME
       ) sub
       ORDER BY TOTASCORE DESC --The rank is calculated based on this field
   ) t
   WHERE IDNO = @IDNOParam 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:25:10.947

```
SELECT idno, SUM(score) AS tech
       FROM jbit 
       WHERE htno='$id'"
       GROUP BY idno 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-07T06:12:22.880

我尝试使用此代码...可能会帮助其他人我从用户那里获得结果并为用户个人资料图片上传表格并加入它，而不是在我计算用户积分并对其进行排序之后。最后检查并添加 wo

```
set @row_num = 0;
set @calp =0;
select  if(@calp=(@calp:=user.cal_points), @row_num, @row_num := @row_num + 1) as row_number,user.* from 
(select user_skills.*,users.username,upload.file_name from user_skills join users on user_skills.user_id=users.id join upload on upload.upload_id=users.profile_pic order by user_skills.cal_points desc) as user
WHERE user.skill_name LIKE  '%ph%'

==========for both search =============
set @row_num = 0;
set @calp =0;

select temp.* from
(select  if(@calp=(@calp:=user.cal_points), @row_num, @row_num := @row_num + 1) as row_number,user.* from 
(select user_skills.*,users.username,upload.file_name from user_skills join users on user_skills.user_id=users.id join upload on upload.upload_id=users.profile_pic order by user_skills.cal_points desc) as user
WHERE user.skill_name LIKE  '%ph%') as temp
WHERE temp.username LIKE '%a%' 
```

# jakarta-ee - 动态生成的服务器服务器静态内容

> ID：12799951
> 
> 赞同：1
> 
> 时间：2012-10-09T12:22:22.267
> 
> 标签：jakarta-ee, servlets

我有一个网络应用程序，它通过上传获取照片并将它们保存在一个名为 Pictures 的文件夹中（位于 /home/andrei/Pictures 中），然后我想通过 servlet（在 html 文档中）显示它们。我听说我必须使用前端 servlet，并且我将拥有一个域，但我没有设法做到这一点。你能告诉我怎么做吗？

（我看到了一些方法，但我没有得到它）

其他信息：
操作系统：Linux Ubuntu
服务器：Apache Tomcat v7
IDE：Eclipse

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:57:47.133

这是一个完整的示例，说明如何使用 Servlet 向客户端公开图像[http://www.exampledepot.com/egs/javax.servlet/GetImage.html](http://www.exampledepot.com/egs/javax.servlet/GetImage.html)

你需要做的修改在这里：

```
String filename = sc.getRealPath("image.gif"); 
```

你只需要在你的图像中包含完整路径...

祝你好运！

**更新**

您可以使用以下方法在 html 中显示图像：

```
<img src="/ServletName?id=xxxx" ... ... ... /> 
```

`< url-pattern >`这将导致浏览器使用=向您的 servlet 发出 http 请求，并使用客户端浏览器`ServletName`获取图像`id=xxxx`

# cocos2d-iphone - iPhone 4 和 5 屏幕上的视差滚动

> ID：12799957
> 
> 赞同：2
> 
> 时间：2012-10-09T12:22:38.390
> 
> 标签：cocos2d-iphone, iphone-5, parallax, kobold2d

我正在尝试实现适用于 iPhone 4 和新 iPhone 5 的横向视差滚动。我从一个宽度为 1136 像素 (HD) 的精灵开始，并认为我也可以在 iPhone 4 上使用它。问题是它不再适用于 iPhone 4。如果您使用的是 iPhone 5，则屏幕尺寸和精灵尺寸是相同的。在 iPhone 4 上不是这样，这将导致在您达到 1136px 横向运动（即精灵/iPhone 5 屏幕的长度）后尴尬地更换精灵。

如何实现与屏幕大小/精灵大小比率无关的无限视差滚动？

这是更新精灵的代码，以便它们无限地运行（基于 Itterheim 的新 Cocos2D 2 书的代码）：

```
for (CCSprite* sprite in spriteBatch.children)
{
    NSNumber* factor = [speedFactors objectAtIndex:sprite.zOrder];

    CGPoint pos = sprite.position;
    pos.x -= (scrollSpeed * factor.floatValue) * (delta * 50);

    // Reposition stripes when they're out of bounds
    CGSize screenSize = [CCDirector sharedDirector].winSize;
    if (pos.x < -screenSize.width)
    {
        pos.x += (screenSize.width * 2) - 2;
    }

    sprite.position = pos;
} 
```

这是它的背景：

```
 @implementation ParallaxBackground

-(id) init
{
    if ((self = [super init]))
    {
        CGSize screenSize = [[CCDirector sharedDirector] winSize];

        // Get the game's texture atlas texture by adding it. Since it's added already it will simply return 
        // the CCTexture2D associated with the texture atlas.
        CCTexture2D* gameArtTexture = [[CCTextureCache sharedTextureCache] addImage:@"game-art.pvr.ccz"];

        // Create the background spritebatch
        spriteBatch = [CCSpriteBatchNode batchNodeWithTexture:gameArtTexture];
        [self addChild:spriteBatch];

        bgLayerTotal = 3;

        // Add the 6 different layer objects and position them on the screen
        for (int i = 0; i < bgLayerTotal; i++)
        {
            NSString* frameName = [NSString stringWithFormat:@"bg%i.png", i];
            CCSprite* sprite = [CCSprite spriteWithSpriteFrameName:frameName];
            sprite.anchorPoint = CGPointMake(0, 0.5f);
            sprite.position = CGPointMake(0, screenSize.height / 2);
            [spriteBatch addChild:sprite z:i];
        }

        // Add 7 more stripes, flip them and position them next to their neighbor stripe
        for (int i = 0; i < bgLayerTotal; i++)
        {
            NSString* frameName = [NSString stringWithFormat:@"bg%i.png", i];
            CCSprite* sprite = [CCSprite spriteWithSpriteFrameName:frameName];

            // Position the new sprite one screen width to the right
            sprite.anchorPoint = CGPointMake(0, 0.5f);

            sprite.position = CGPointMake(screenSize.width - 1, screenSize.height / 2);

            // Flip the sprite so that it aligns perfectly with its neighbor
            sprite.flipX = YES;

            // Add the sprite using the same tag offset by numStripes
            [spriteBatch addChild:sprite z:i tag:i + bgLayerTotal];
        }

        // Initialize the array that contains the scroll factors for individual stripes.
        speedFactors = [NSMutableArray arrayWithCapacity:bgLayerTotal];
        [speedFactors addObject:[NSNumber numberWithFloat:0.1f]];
        [speedFactors addObject:[NSNumber numberWithFloat:3.0f]];
        [speedFactors addObject:[NSNumber numberWithFloat:4.0f]];
        NSAssert(speedFactors.count == (unsigned int)bgLayerTotal, @"speedFactors count does not match bgLayerTotal!");

        scrollSpeed = 1.0f;

        [self scheduleUpdate];
    }
    return self;
}

-(void) update:(ccTime)delta
{
    for (CCSprite* sprite in spriteBatch.children)
    {
        NSNumber* factor = [speedFactors objectAtIndex:sprite.zOrder];

        CGPoint pos = sprite.position;
        pos.x -= (scrollSpeed * factor.floatValue) * (delta * 50);

        // Reposition stripes when they're out of bounds
        CGSize screenSize = [CCDirector sharedDirector].winSize;
        if (pos.x < -screenSize.width)
        {
            pos.x += (screenSize.width * 2) - 2;
        }

        sprite.position = pos;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:28:00.003

而不是使用屏幕大小来重复背景，只需使用最大背景精灵的宽度（或 bg 块的宽度之和，如果它们被分解）。您也可以将最大宽度硬编码为 1136。

所以，改变：

```
CGSize screenSize = [CCDirector sharedDirector].winSize;
if (pos.x < -screenSize.width)
{
    pos.x += (screenSize.width * 2) - 2;
} 
```

类似于：

```
CCSprite *bg = (CCSprite*)[spriteBatch getChildByTag:0];
if (pos.x < -bg.contentSize.width)
{
    pos.x += (bg.contentSize.width * 2) - 2;
} 
```

# jquery - 粘性导航在本地主机上工作，但当我在线上传时（在 webkit 浏览器中）

> ID：12799958
> 
> 赞同：2
> 
> 时间：2012-10-09T12:22:39.053
> 
> 标签：jquery, webkit, nav, sticky

我创建了一个粘性导航，当用户滚动时它会固定在页面顶部。如果用户向上滚动，它应该返回到正常位置。我在我的本地主机上完美地运行了这个，但是当我在线上传它时，只要你滚动一点页面，粘性导航就会一直直接跳到顶部，并且它永远不会回到它的正常位置。

相关的jQuery是：

```
var yOffset = $("#local-nav-wrapper").offset().top;
$(window).scroll(function() {
    if ($(window).scrollTop() > yOffset) {
        $("#local-nav-wrapper").css({
            'top': 0,
            'bottom': 'auto',
            'position': 'fixed'
        });
    } else {
        $("#local-nav-wrapper").css({
            'top': 'auto',
            'bottom': 0,
            'position': 'absolute'
        });
    }
}); 
```

相关的 CSS 是：

```
#local-nav-wrapper {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: rgba(0, 0, 0, 0.8);
    padding: 10px 0;
    z-index: 6000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:15:02.683

如果您在 IE 中工作，请尝试替换`$(window).scrollTop()`为`document.documentElement.scrollTop`or `window.scroll(0,0)`。也许它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-29T15:39:55.947

我正在解决同样的问题。我发现[这个关于 css 技巧的线程](https://css-tricks.com/forums/topic/sticky-nav-jumping-sometimes-in-webkit-browsers/)表明：

> 当它在 localhost 中加载时，它会非常快地获得正确的值，但在服务器上它会在设置元素之前获得值。

# objective-c - 什么是检查两个或多个 CGRect 在 NSMutableArray 中是否接触的好方法？

> ID：12799961
> 
> 赞同：3
> 
> 时间：2012-10-09T12:22:48.477
> 
> 标签：objective-c, ios, xcode, uiimageview, intersection

我在 NSMutableArray 中有几个 UIImageViews。它们都在superView中。我想检查一个 UIImageView 是否与数组中的另一个 UIImageView 相交（碰撞、碰撞或接触）。这是我一直在做的，但我认为应该有更好的方法。

```
for (UIImageView *b in _blocks) {
    for (UIImageView *b2 in _blocks) {
        if (CGRectContainsPoint(b2.frame, CGPointMake(b.center.x, b.center.y + b.frame.size.height/2))) {
            // Do something
        }

    }

} 
```

如果我想以这种方式检查图像视图是否接触超过 2 个视图，代码会变得非常讨厌。这就是为什么我想知道一个更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:29:47.807

采用 ：`CGRectIntersectsRect(b2.frame, b.frame)`

如下 ：

```
for (UIImageView *b in _blocks) {
    for (UIImageView *b2 in _blocks) {
         if (b != b2 && CGRectIntersectsRect(b2.frame, b.frame)) {
            // Do something
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:32:10.583

做这个：

```
 NSMutableArray *arrIntersect = [NSMutableArray array];
 for (UIImageView *b in _blocks) {
    for (UIImageView *b2 in _blocks) {
         if (b != b2 && CGRectIntersectsRect(b2.frame, b.frame)) {
            if(arrIntersect.count > 2)
               //count > 2
            else
               [arrIntersect addObject:b2];
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T12:31:26.127

我认为您有正确的方法，但是您正在重复检查，因此最好在单个循环中进行检查：

```
NSInteger count = [_blocks count];
for (NSInteger i = 0; i < count - 1; i++)
{
    for (NSInteger j = i + 1; j < count; j++)
    {
        UIImageView *iv1 = [_blocks objectAtIndex:i];
        UIImageView *iv2 = [_blocks objectAtIndex:j];
        if (CGRectIntersectsRect(iv1.frame, iv2.frame)
        {
            // Do something
        }
    }
} 
```

考虑您的原始代码检查所有对象两次（例如图像视图 3 和 5，然后在循环中稍后检查 5 和 3）。

# android - Android XML 资源文件的正确结构

> ID：12799967
> 
> 赞同：1
> 
> 时间：2012-10-09T12:23:10.183
> 
> 标签：android, xml, xml-parsing

我不知道如何为 Android 中的资源获取正确的 XML 结构。

我已将 recepies.xml 保存到 values 文件夹中，并希望解析它们。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<recepies xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<recepie name="recepie1">
    <item></item>
    <NumberOfPersons>1</NumberOfPersons>
    <Ingredients>
        <string></string>
        <string></string>
    </Ingredients>
    <Preparation></Preparation>
    <Energy>342</Energy>
    <Protein>8</Protein>
    <RecipeCategory>3</RecipeCategory>
</recepie> 
```

但是，我得到或“无效的开始标签”，

如果我在没有这样的收件人标签的情况下格式化它：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"?> 
```

我明白了，不再允许使用伪属性。

如果我只使用这个：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

我知道标记的格式不正确。

我想我在 XML 格式的基础知识方面遗漏了一些东西，但我不知道是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:28:44.373

`/res/values`文件夹仅适用于 android 资源。您只能在此处定义这些类型的资源之一。 [http://developer.android.com/guide/topics/resources/available-resources.html](http://developer.android.com/guide/topics/resources/available-resources.html)

如果您想要自己的 xml 文件，请将其放在`/assets`文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:28:26.190

values.xml 中的资源必须如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string
        name="string_name">text_string</string>
</resources> 
```

您可以查看[有关字符串资源](https://developer.android.com/guide/topics/resources/string-resource.html)或[TypedArray](https://developer.android.com/guide/topics/resources/more-resources.html#TypedArray)的文档以获取更多信息。

# ios - iOS：iOS 开发的手动保留发布

> ID：12799968
> 
> 赞同：1
> 
> 时间：2012-10-09T12:23:11.753
> 
> 标签：ios

我正在处理我正在手动保留和发布的项目。我在以下链接中遇到了与此相关的许多教程之一。

[http://www.drdobbs.com/mobile/automatic-reference-counting-on-ios/240000820](http://www.drdobbs.com/mobile/automatic-reference-counting-on-ios/240000820)

我对上面的链接有点困惑。在“按消息管理”标题下，他们提到如果我使用“分配/初始化”它会增加参考。数到“1”，如果我再次“保留”它，它会再次增加并变为“2”并再次使用“保留”，现在变为“3”，但它们**不会**“释放”三次以完全释放此内存，相反，他们只释放了两次。这怎么可能？看到这里，我有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:25:41.877

他们不仅发布了两次，他们只是表明他们正在释放直到retainCount 为0，这是正确的。

# javascript - 以 IE9 调试模式显示对象内容

> ID：12799971
> 
> 赞同：0
> 
> 时间：2012-10-09T12:23:17.430
> 
> 标签：javascript, internet-explorer, firebug

我有一些适用于 FF 但不适用于 IE 的 JS。虽然我更喜欢 firebug，但 IE9 的调试模式（F12）也不错。问题是我不知道如何显示像 console.log(obj) 这样的对象的内容。任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:27:45.683

使用[console.dir()](http://msdn.microsoft.com/en-us/library/ie/gg589530%28v=vs.85%29.aspx)显示对象

```
console.dir(obj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T12:27:20.837

您可以设置断点并使用监视功能来查看对象，但我不确定它是否会为您提供与 Firebug 中公开的相同级别的细节

你试过[Firebug lite](http://getfirebug.com/firebuglite)吗？

# javascript - 是否可以在 JavaScript 中将文件附加到电子邮件？

> ID：12799972
> 
> 赞同：1
> 
> 时间：2012-10-09T12:23:25.540
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [通过 mailto URI 附加文件](https://stackoverflow.com/questions/2372036/attach-file-through-mailto-uri)

我有一个 HTML 链接，例如

```
<a href="mailto:someone@example.com?Subject=Hello">Send Mail</a> 
```

当用户单击此链接时，我想在邮件客户端中附加一个文件。

是否可以在 JavaScript 或使用 jQuery、html5 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:44:00.347

不。

当然，JQuery 也无济于事，因为它也是 Javascript。

你真的需要一些服务器端来为你管理这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T12:44:56.383

你可以试试 MS ActiveX：

```
var OA = new ActiveXObject('Outlook.Application');
var OAItem = OA.CreateItem(0);

var OAItemAtms = OAItem.Attachments;
OAItemAtms.add('http://foo.com/some_image.png'); 
```

您可以在此处阅读更多信息 - [compose-and-send-e-mail-from-javascript-by-using-outlook](http://blogs.msdn.com/b/rajnishkaushik/archive/2007/05/06/compose-and-send-e-mail-from-javascript-by-using-outlook-automation-2007.aspx)

# java - Jasper 服务器上的自定义 Jar 文件

> ID：12799975
> 
> 赞同：7
> 
> 时间：2012-10-09T12:23:31.007
> 
> 标签：java, web-applications, web-deployment, jasperserver

我写了一些Java类，创建了jar文件。我想将它添加到*JasperReports Server*。当我使用*iReport*中的 Tools -> Preferences -> Classpath 菜单确定 jar 文件的路径时，它可以正常工作。但是，当我从另一台主机访问*JR 服务器*时，它不起作用。

我必须做什么，让这个 jar 文件在这个*JR 服务器*上可用，从任何地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-02T10:57:54.733

选项 1 - 如果您想在多个报告中使用您的 Jar。

您应该“添加 Jar”（在 iReport 存储库管理器中调用）到 Jasper Server 文件夹树中的某个文件夹。然后在特定报告的“资源”部分中“添加引用”此资源。

选项 2 - 您需要一个特定报告中的 jar。

在特定报告的资源部分中使用“添加 Jar”选项。

在 JasperServer 4.7 上完美运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T14:17:40.387

将 jar 添加为报告的资源（如果是一次性使用）或将其添加到 Jasper Report Server 中的某个路径，并按照 Alex 的建议添加对它的引用。

我建议您在 Jasper Server 中创建一些文件夹（通过 Web 界面或 iReport）并将所有常用文件放在那里（确保正确管理 ROLE_USER 应该有权访问该文件的权限，但您可以将其从文件夹中删除，这样它没有列出）。

然后在需要这些的报告上使用参考。例如，我将它用于报告徽标和一些帮助 Java 类。

编辑为@NormTatlock 询问有关如何执行此操作的更多详细信息：

1.  创建您的 Java 包 my.sample.package 例如：

    公共类 MyClass 扩展了 JRDefaultScriptlet ...

2.  编译它并使用其全名（例如 my.sample.package.jar）将 jar 作为资源上传，或者将其上传到另一个文件夹并在报告的资源文件夹中创建对它的引用。

3.  编辑报告并将 Scriptlet Class 属性设置为：

    我的.sample.package.MyClass

4.  或者将 XML 标记 jasperreports（根标记）中的属性设置为：

    scriptletClass="my.sample.package.MyClass"

5.  在您的报告中使用 scriptlet，如下所示：

    $P{REPORT_SCRIPTLET}.myMethod(myParam1, myParam2)

注意方法的返回类型等等。

希望能帮助到你。玩得开心！

# api - Node.js 阻止函数检查（toString）

> ID：12799996
> 
> 赞同：1
> 
> 时间：2012-10-09T12:24:59.850
> 
> 标签：api, node.js, function, tostring

当 javascript 在浏览器中运行时，无需尝试隐藏函数代码，因为它已下载并可以在源代码中查看。

在服务器上运行时，情况会发生变化。有一些用例，例如 api，您希望为用户提供要调用的函数，而不允许他们查看正在运行的代码。

在我们的特定情况下，我们希望在节点内执行用户提交的 javascript。我们可以对 node.js api 进行沙箱处理，但是我们希望将我们自己的 api 添加到这个沙箱中，而用户无法通过 toString 函数来查看正在运行的代码。

有没有人有模式或知道阻止用户输出功能代码的方法？

**更新：**

这是基于以下公认答案的完整解决方案（我相信）。请注意，尽管这是使用客户端代码演示的。您**不会**使用此客户端，因为有人可以通过简单地阅读下载的代码来查看隐藏函数的内容（尽管如果您使用了 minify，它可能会降低检查代码的速度）。

这适用于服务器端使用，您希望允许用户在沙箱环境中运行 api 代码，但不允许他们查看 api 的作用。这段代码中的沙箱只是为了说明这一点。它不是一个实际的沙盒实现。

```
// function which hides another function by returning an anonymous
// function which calls  the hidden function (ie. places the hidden
// function in a closure to enable access when the wraped function is passed to the sandbox) 
function wrapFunc(funcToHide) {
  var shownFunc = function() {
    funcToHide();
  };
  return shownFunc;
}

// function whose contents you want to hide
function secretFunc() {
  alert('hello');            
}

// api object (will be passed to the sandbox to enable access to
// the hidden function)
var apiFunc = wrapFunc(secretFunc);
var api = {};
api.apiFunc = apiFunc;

// sandbox (not an actual sandbox implementation - just for demo)
(function(api) {
  console.log(api);
  alert(api.apiFunc.toString());
  api.apiFunc();
})(api); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T12:33:19.537

如果将回调包装在函数中，则可以在该范围内使用实际上隐藏在回调范围之外的另一个函数，因此：

```
function hideCall(funcToHide) {
    var hiddenFunc = funcToHide;
    var shownFunc = function() {
        hiddenFunc();
    };
    return shownFunc;
} 
```

然后就这样跑

```
var shtumCallBack = hideCall(secretSquirrelFunc);
userCode.tryUnwindingThis(shtumCallBack); 
```

userCode 范围将无法访问`secretSquirrelFunc`，除非调用它，因为它需要的范围`hideCall`是不可用的函数的范围。