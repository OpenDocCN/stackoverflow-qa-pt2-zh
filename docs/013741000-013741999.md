# StackOverflow 问答 13741000-13741999

# php - 在 PHP 中通过 cURL 发送多字节数据

> ID：13741000
> 
> 赞同：0
> 
> 时间：2012-12-06T09:54:34.333
> 
> 标签：php, api, curl

我正在为我为客户编写的应用程序创建一个 API，因为他们既需要网站也需要移动应用程序。API 和应用程序是用 PHP 编写的，使用 Codeigniter 框架。

我想使用输入文件通过应用程序上传文件。然后如何通过 cURL 将此文件发送到 API，以便我可以在 $_FILES 变量中获取文件？

理想情况下，我想使用 POST 方法，但如有必要，我也可以使用 PUT 或类似方法。

谢谢

小号

=== 更新 ===

我知道如何将文件从应用程序传递到 API - 我的问题的重点更多地与如何在文件位于 API 中后对其进行解析。如果您使用表单上传文件，您会在 $_FILES 中获得临时文件引用 - 这就是我想要模拟的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:00:07.433

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_VERBOSE, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
curl_setopt($ch, CURLOPT_URL, _VIRUS_SCAN_URL);
curl_setopt($ch, CURLOPT_POST, true);
// same as <input type="file" name="file_box">
$post = array(
    "file_box"=>"@/path/to/myfile.jpg",
);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
$response = curl_exec($ch); 
```

?>

参考 :: [http://dtbaker.com.au/random-bits/uploading-a-file-using-curl-in-php.html](http://dtbaker.com.au/random-bits/uploading-a-file-using-curl-in-php.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:00:24.260

在文件路径前附加一个“@”字符以上传文件。

在您的情况下，请使用输入文件中的 tmp_name 。

假设传入的文件是通过 POST 发送的，名称为“input_file”。

```
$curl = curl_init(/* Your URL goes here. */);

curl_setopt_array($curl, array(
    CURLOPT_POST => true,
    CURLOPT_POSTFIELDS => array(
        'file' => "@$_FILES[input_file][tmp_name]"
    )
));

curl_exec($curl); 
```

希望有帮助。

# javascript - jQuery滚动路径？

> ID：13741005
> 
> 赞同：0
> 
> 时间：2012-12-06T09:54:39.550
> 
> 标签：javascript, jquery

我试图使用这个插件“http://joelb.me/scrollpath/”制作一个简单的滚动路径，我想做的只是制作一条简单的线，没有旋转、弧线等，我似乎无法理解这是如何工作的，也找不到关于插件的教程！？

我想要一条像...

```
 __________________
 ______________| 
```

我写了以下没有运气...

任何人都可以看到我做错了什么吗？

```
.moveTo(400, 50, {name: "one"})
  .lineTo(400, 50, {name: "two"})
  .lineTo(400, 50, {name: "three"})
  .lineTo(400, 50, {name: "four"})
  .lineTo(400, 50, {name: "five"})
  .lineTo(400, 50, {name: "six"}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:02:56.560

您似乎使用的`lineTo`思维参数是相对值（即“移至`400;50`”），但这些是绝对值，因此您的示例会移至`400;50`并留在那里。

尝试这样的事情：

```
path
  .moveTo(50,100,{name: 'one'})
  .lineTo(400,100,{name: 'two'})
  .lineTo(400,50,{name: 'three'})
  .lineTo(800,50,{name: 'four'}); 
```

此外，当您初始化插件时，`drawPath: true`作为选项传递，因此您将看到路径是如何实现的：

```
$(".your-container-element").scrollPath({
  drawPath: true,
}); 
```

* * *

你可以在这里找到（一些）文档：[https ://github.com/JoelBesada/scrollpath](https://github.com/JoelBesada/scrollpath)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:03:42.470

滚动路径的作用是将给定的 (x,y) 坐标带到屏幕的中心。

例如

```
.moveTo(50,100,{name='a'}) 
```

将 (50,100) 移动到屏幕的中心。

所以要使用它，你必须像这样使用绝对定位：

例如。格 1 =(50,100) 格 2= (100,100) 格 3= (150,100)

要处理这个你必须

```
.moveTo(50,100,{name: 'div1'});
.moveTo(100,100,{name: 'div2'});
.moveTo(150,100,{name: 'div3'}); 
```

请记住，(50,100) 现在是中心，因此如果您将 div 恰好放置在 (50,100) 它将占据右下角的空间。

而是将整个 div 围绕 (50,100)

# linux - 简单的一步一步NPAPI插件教程（用于在linux上开发）

> ID：13741014
> 
> 赞同：4
> 
> 时间：2012-12-06T09:55:09.497
> 
> 标签：linux, plugins, npapi

我是插件新手，C++ 水平一般。

寻找分步指南，在 linux 机器（Fedora 14）上编写我的第一个“hello world”类型的 NPAPI 插件。

类似于this的东西有没有人在linux上[得到一个简单的一步一步的Mozilla插件教程。](https://stackoverflow.com/questions/2761361/has-anyone-got-a-simple-step-by-step-mozilla-plugin-tutorial)

# c# - 自定义路由上未调用 GetVirtualPath

> ID：13741018
> 
> 赞同：2
> 
> 时间：2012-12-06T09:55:23.437
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我创建了一个名为的自定义路由`CustomRoute`，该路由对方法执行各种操作`GetVirtualPath`（对于本示例，我将整个 URL 设置为小写），其结构如下：

```
public sealed class CustomRoute : Route
{
    public CustomRoute(string url, IRouteHandler routeHandler) : base(url, routeHandler) { }
    public CustomRoute(string url, RouteValueDictionary defaults, IRouteHandler routeHandler) : base(url, defaults, routeHandler) { }
    public CustomRoute(string url, RouteValueDictionary defaults, RouteValueDictionary constraints, IRouteHandler routeHandler) : base(url, defaults, constraints, routeHandler) { }
    public CustomRoute(string url, RouteValueDictionary defaults, RouteValueDictionary constraints, RouteValueDictionary dataTokens, IRouteHandler routeHandler) : base(url, defaults, constraints, dataTokens, routeHandler) { }

    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values)
    {
        VirtualPathData path = base.GetVirtualPath(requestContext, values);

        if (path != null)
        {
            path.VirtualPath = path.VirtualPath.ToLowerInvariant();
        }

        return path;
    }
} 
```

我通过一个名为的扩展方法将此路由添加到我的路由集合中`MapCustomRoute`：

```
public static CustomRoute MapCustomRoute(this RouteCollection routes, string url, object defaults)
{
    CustomRoute route = new CustomRoute(url, new RouteValueDictionary(defaults), new MvcRouteHandler());

    routes.Add(route);

    return route;
} 
```

`RouteTable.Routes`然后最后在 global.asax 中的集合上调用这个扩展：

```
RouteTable.Routes.Clear();
RouteTable.Routes.MapCustomRoute("somecontroller/someaction/{id}", new { controller = "Home", action = "Index" }); 
```

路由工作正常，我的请求正确映射到相应的控制器和操作 - 但是 URL 仍然是大写的。单步执行我的代码，我可以看到`CustomRoute`在初始化路由时调用了我的构造函数 - 但`GetVirtualPath`在发出请求时从未调用该方法。我是否在这里遗漏了一些明显的东西，我尝试使用路由调试工具，一切看起来都很好，所以我在这里不知所措！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:56:26.417

浏览我的问题列表以关闭打开的问题，我找到了这个。这个很奇怪。为了解决这个问题，我不得不从头开始重新创建我的 Visual Studio 解决方案。然后，通过使用我上面的确切代码，新项目可以正常工作 - 但旧项目没有。我认为这是 VS 2010 的怪异现象，我并行运行了两种解决方案，确认它们具有完全相同的代码库并且一个有效，另一个没有。

# symfony - 如何在 symfony2.0 的下拉列表中选择一个值

> ID：13741019
> 
> 赞同：-1
> 
> 时间：2012-12-06T09:55:22.693
> 
> 标签：symfony, doctrine, doctrine-orm, symfony-forms

如何在下拉列表中选择一个值？

## 我有一个下拉列表，当我在编辑案例中填写下拉列表时，如何显示数据库中的选定值？

它是表单构建器类

```
 public function buildForm(FormBuilder $builder, array $options)
   { 
   $builder
        ->add('name')
        ->add('description')
        ->add('parentid', 'entity', array('class'=>'MusicCoreBundle:MusicCategory',
            'property'  => 'name',
            'required'  => false,
            'query_builder' => function(EntityRepository $er) {return $er->createQueryBuilder('s')->orderBy('s.name', 'ASC');},
            'empty_value' => 'No category'));

} 
```

这是用于 ER，我认为与 id 和 parentid 的实体关系是错误的，请用代码回复，在实体声明中：

```
 /**
   * Music\Bundles\Core\Entity\MusicCategory
   * @ORM\Table(name="ms_musiccategory")
   * @ORM\Entity()
   * @ORM\Entity(repositoryClass="Music\Bundles\Core\Entity\Repository\CategoryRepository")
   * @UniqueEntity(fields={"name"},message="The name is already in this system.")
  */
  class MusicCategory 
  {
/**
     * @ORM\Column(name="id",type="integer")
     * @ORM\Id()
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

    /**
     *@ORM\ManyToOne(targetEntity="MusicCategory")
    *@ORM\JoinColumn(name="parent_Id", referencedColumnName="id")
     * 
     */
    private $parentid;
/**
* @ORM\Column(name="name", type="string", length=50, unique=true)
*/
private $name;

/**
* @ORM\Column(name="description", type="string", length=200)
*/
private $description;

    public function __construct()
{
}

    /**
* @see RoleInterface
*/
public function getName()
{
    return $this->name;
}

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
    * Set id
    *
    * @return integer
    */
    public function setId($id)
    {
       $this->id = $id;
    }

    /**
     * Get parentid
     *
     * @return integer 
     */
    public function getParentId()
     {
        return $this->parentid;
     }

     /**
     * Get parentid
     *
     * @return integer 
     */
    public function setParentId($parentid)
     {   $this->parentid = $parentid;
     }
    /**
     * Set role
     *
     * @param string $role
     */
    public function setName($name)
    {
        $this->name = $name;
    }

    /**
     * Set description
     *
     * @param string $description
     */
    public function setDescription($description)
    {
    $this->description = $description;
    }

    /**
     * Get description
     *
     * @return string 
     */
    public function getDescription()
    {
        return $this->description;
    }

   } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:37:31.880

更改此代码如下：

只是改变实体类

```
 /**
     * @ORM\Column(name="id",type="integer")
     * @ORM\Id()
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

    /**
      * @ORM\OneToMany(targetEntity="MusicCategory", mappedBy="parent")
     */
    protected $children;

   /**
     * @ORM\ManyToOne(targetEntity="MusicCategory", inversedBy="children")
     * @ORM\JoinColumn(name="parent_id", referencedColumnName="id")
    */
    protected $parent;

/**
* @ORM\Column(name="name", type="string", length=50, unique=true)
*/

   public function __construct()
{
        $this->parentId = null; // Default value for column parent_id
         $this->children = new \Doctrine\Common\Collections\ArrayCollection();
} 
```

# facebook - 如何使用 facebook graph api 获取/提取可共享的帖子？

> ID：13741025
> 
> 赞同：1
> 
> 时间：2012-12-06T09:55:37.047
> 
> 标签：facebook, facebook-graph-api

我正在使用 graph.facebook.com/posts 来获取用户的个人资料帖子并尝试提取可共享的帖子。帖子中是否有字段或某些条件表明该帖子可以被其他人分享？

# curl - 带有 GET 参数的 PHP curl 请求身份验证

> ID：13741027
> 
> 赞同：1
> 
> 时间：2012-12-06T09:55:42.297
> 
> 标签：curl

我想执行一个 curl 请求来验证来自远程服务器的用户

示例：exec('curl -k -d "j_username='.$name.'&j_password='.$pass.'" URL TO SERVER ', $content);

如果以 centaine 形式输入的通行证是一个特殊字符，例如此通行证：Camilie&

Get url 中的 & 有问题

如果我使用 urlencode() 服务器返回“连接字段”，因为它不知道密码。

有人知道这个问题的解决方案。

谢谢你的回答

# ios - 从 Apple 下载当前注册设备列表

> ID：13741030
> 
> 赞同：1
> 
> 时间：2012-12-06T09:55:51.757
> 
> 标签：ios, provisioning

有没有办法我可以下载我当前注册的所有设备的列表（配置门户），我担心将页面下载/保存为 html 并没有帮助，因为它的 UDID 最后有省略号，同样没有按钮可以导出它到文本/ excel，

是否可以？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:01:07.963

单程：

创建一个新的配置文件，添加所有设备（“全选”），“修改”配置文件并查看页面源，您将在那里找到所有设备及其 UDID。

您可以在设备页面上执行相同的操作，UDID 在源代码中是完整的，它们被页面布局截断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T03:18:52.617

我发现它自然被截断，并且在 UDID 的末尾附加了一个省略号，可能是因为 Apple 似乎没有看到其用户使用 UDID 的正当理由，但需求来来去去，所以这就是我做过;

而不是弄清楚如何从门户选项卡“当前注册的设备”中提取 UDID，而是转到历史记录，使用 VIM 从页面复制所需的内容，并使用 VIM 为您完成肮脏的工作，添加/删除不必要的信息，然后你就有了你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-14T11:31:10.573

请按照该链接：[StackOverFlow 链接](https://stackoverflow.com/a/29426740/2905967)

移动到开发者帐户的页面设备列表页面后，您只需在 Google Chrome 浏览器的 JavaScript 控制台中编写以下代码。

```
var ids = ["Device ID"];
var names = ["Device Name"];
$("td[aria-describedby=grid-table_name]").each(function(){
    names.push($(this).html());
});
$("td[aria-describedby=grid-table_deviceNumber]").each(function(){
    ids.push($(this).html());
});

var output = "";
for (var index = 0; index < ids.length; index++) {
    //output += names[index] + "\t" + ids[index] + "\n";    //original
    output += ids[index] + "\t" + names[index] + "\n";      //post September 2016
}
console.log(output); 
```

# c++ - 如何在qt中启用异常处理

> ID：13741031
> 
> 赞同：1
> 
> 时间：2012-12-06T09:55:55.600
> 
> 标签：c++, qt, exception

> **可能重复：**
> [为什么当我尝试使用异常时，我的代码在 Qt Creator 中使用 -fno-exceptions 进行编译？](https://stackoverflow.com/questions/8802992/why-does-my-code-compile-with-fno-exceptions-in-qt-creator-when-i-try-to-use-ex)

即使我的 .pro 文件行中有：

```
QMAKE_CXXFLAGS += -std=gnu++0x -pedantic -fexceptions 
```

我在编译过程中仍然遇到错误：

```
 error: exception handling disabled, use -fexceptions to enable 
```

任何想法为什么，以及如何在 qt 中启用异常处理？

# image - 如何使用 Perl 比较两个文件夹中更多数量的图像

> ID：13741033
> 
> 赞同：2
> 
> 时间：2012-12-06T09:56:08.157
> 
> 标签：image, perl, matlab, compare, frame

我对 Perl 并不陌生，我需要任何人的帮助来完成一个奇怪的要求。

1.  我想逐帧比较两个视频。我可以使用 AVISYNTH 直接比较它们，但问题是两个视频都是相同的，但初始帧会在不同的时间开始。

2.  为此，我将每个视频拆分为帧/图像，并将它们分别存储在两个文件夹中

3.  现在我想将第一个文件夹的 frame1/image1 与第二个文件夹的所有初始 10-15 图像进行比较。

4.  如果第二个文件夹的第 4 个图像匹配，则需要进一步停止该过程，第 4 帧应存储/视为第二个文件夹的索引。

5.  完成后，我想开始对两个文件夹之间的图像进行实际比较。即文件夹1的图像1与文件夹2的图像4 文件夹1的图像2与文件夹2的图像5 文件夹1的图像3与文件夹2的图像6...等等

我想在 perl / Matlab 中完成所有这些过程。任何机构都可以帮助我提出您的想法或建议。

谢谢 Ganesh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:27:41.827

假设我们有一个子程序`compare_frames`可以比较两个帧，如果它们相同则返回 true。

然后我们可以通过遍历文件夹 2 中的前几帧并比较这些帧来找到偏移量：

```
# return the offset of the first equal image,
# searching frames between "from" (defaulting to 1) and "upto" (defaulting to 15)
sub find_offset (%) {
   my ($min_index, $max_index) = @{+{ from=>1, upto=>15, @_ }}{qw(from upto)};
   for my $index ($min_index .. $max_index) { # assuming 1-based indexing scheme
      return $index - 1 if compare_frames(1, $index);
   }
   warn "no offset found";
   return undef; # or better, exit the program.
} 
```

在脚本的主要部分中，您稍后将运行`my $offset = find_offset upto=>15`并使用它来进行大部分处理。但是，这假定文件夹 1 始终是文件夹 2 的子集。

在我们的比较子程序中，我们希望尽快返回“false”。根据图像格式，如果大小不同，我们可以说两个图像不能相等。但是，位图的大小是固定的，因此这里没有意义，因为所有帧都具有相同的分辨率。其他图像格式具有不同的压缩密度，其中两张图片可能相等，即使其中一张压缩得更多。在这种情况下，请删除`stat`代码。

```
# decide if two frames are equal.
# $frame1 is from the first set of frames,
# $frame2 is the frame from the second set.
sub compare_frames {
   my ($frame1, $frame2) = @_;
   my $file1 = "folder1/$frame1";
   my $file2 = "folder2/$frame1";
   # stat the files for the size.
   my $size1 = (stat $file1)[7];
   my $size2 = (stat $file2)[7];
   return 0 if $size1 != $size2; # strict equality, maybe you want to include some sort of tolerance.
   # do main comparision
   $cmp->set_image1($file1);
   $cmp->set_image2($file2);
   return $cmp->compare;
} 
```

其中`$cmp`是 的比较器对象`Image::Compare`，以及预设的比较方法。

然后，在主要比较期间，您将`compare_frames($i, $i + $offset)`.

# c - 在 C 宏中返回带引号的字符串

> ID：13741048
> 
> 赞同：2
> 
> 时间：2012-12-06T09:56:38.470
> 
> 标签：c, string, macros, quotes

> **可能重复：**
> [宏值的字符串化](https://stackoverflow.com/questions/2653214/stringification-of-a-macro-value)

我想编写一个 C 宏，它采用“字符序列”（例如，`#define macro(sequence)`）并返回带引号的字符串`"sequence"`，所以宏应该创建`"\"sequence\""`. 我知道我可以做到`#sequence`，但这只是返回`"sequence"`，这不是我想要的......我必须说这`"sequence"`是另一个宏，所以我不能像在这个宏中那样写它，因为它被“非字面意思”替换. 有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:11:54.257

```
#include <stdio.h>

#define QUOTE(seq) "\""#seq"\""

int main(void)
{
    printf("%s\n", QUOTE(sequence));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T09:59:18.020

使用`#sequence`但在前后添加引号：

```
#define macro(sequence) "\"" #sequence "\"" 
```

字符串文字将被连接起来，为您提供所需的结果。

例如：

```
#define hello abc
printf("%s\n", macro(hello)); 
```

将打印`"hello"`（包括引号）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:07:42.880

您需要一个宏来扩展参数，另一个来添加引号。调用后一个宏两次以在引号周围添加引号。在这种情况下会自动处理转义。

```
#define stringify_literal( x ) # x
#define stringify_expanded( x ) stringify_literal( x )
#define stringify_with_quotes( x ) stringify_expanded( stringify_expanded( x ) ) 
```

# wpf - 在 WPF 中显示常量文本的组合框

> ID：13741050
> 
> 赞同：2
> 
> 时间：2012-12-06T09:56:54.613
> 
> 标签：wpf, combobox

我想在[这个答案](https://ux.stackexchange.com/a/30139)中实现第二个（插入宏）解决方案。

是否可以有一个始终显示某些文本（折叠时）的组合框？它绑定到 ItemSource，用户可以展开下拉列表并选择一个项目，但我希望文本在折叠时始终显示“插入宏”或类似的内容。我不希望自定义文本显示为选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:02:49.820

当然有可能。首先，您必须定义自己的 ToggleButtonStyle。ControlTemplate 包含一个内容已绑定的内容演示者。

```
<ContentPresenter Content="{TemplateBinding Content}"
OverridesDefaultStyle="True"
VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/> 
```

如果需要，您可以添加其他样式。

那么你必须创建一个自定义的 ComboBoxStyle。创建它的最简单方法是更改​​默认模板（在 Blend 中右键单击您的组合框 -> 编辑模板 -> 编辑副本）。

此模板中的 ContentPresenter 应具有如下所示的 Binding：

```
Content="{TemplateBinding SelectionBoxItem}" 
```

只需删除此行，如果选择了项目，您的 ToggleButton 不应获得新的内容。

现在您应该能够创建具有固定内容的组合框，如下所示：

```
<ComboBox Style="{StaticResource ComboBoxStyle}" Text="Title"> 
```

这里还有一些 ControlTemplateExamples [http://msdn.microsoft.com/en-us/library/ms752094(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms752094%28v=vs.85%29.aspx)

希望这可以帮助。

# php - 你能在php中删除外部cookie吗

> ID：13741052
> 
> 赞同：0
> 
> 时间：2012-12-06T09:56:55.370
> 
> 标签：php, cookies

我正在开发一个网络应用程序，我想删除浏览器中的一个外部 cookie（来自雅虎的一个）。我试过 print_r($_COOKIE); ，它应该打印所有cookie，但它只打印我创建的cookie，有没有访问其他cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:59:07.383

不——这是不可能的——出于隐私和安全原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:00:13.770

您不能使用 PHP 删除或查看或编辑外部网站 COOKIES。但是您可以通过清除浏览器缓存来删除 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:59:44.700

无法访问其他域的 cookie。没有跨域 cookie 之类的东西。

# objective-c - lldb 错误：将未声明的标识符与局部变量一起使用

> ID：13741055
> 
> 赞同：4
> 
> 时间：2012-12-06T09:56:58.513
> 
> 标签：objective-c, ios, lldb, mapbox

我见过这个[线程](https://stackoverflow.com/questions/11488361/lldb-error-use-of-undeclared-identifier)。但是，我遇到的问题不是 ivar，而是常规的即时变量。

在 Mapbox-ios-sdk 中有以下代码：

```
UITapGestureRecognizer *singleTapRecognizer = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)] autorelease];
singleTapRecognizer.numberOfTouchesRequired = 1;
[singleTapRecognizer requireGestureRecognizerToFail:doubleTapRecognizer];
singleTapRecognizer.delegate = self; 
```

我尝试在那里打印 singletapRecognizer 并且有一些输出。但不是当我使用调试器时：

```
(lldb) po singleTapRecognizer
error: use of undeclared identifier 'singleTapRecognizer'
error: 1 errors parsing expression 
```

这是为什么？

# javascript - Javascript日期：更改时间

> ID：13741056
> 
> 赞同：20
> 
> 时间：2012-12-06T09:57:05.750
> 
> 标签：javascript, date

你知道在javascript中更改日期对象时间的优雅方法吗

奇怪的是那些返回 Number 对象的设置器

```
var date = new Date().setHours(0,0,0,0); 
```

日期是数字而不是日期..

所以假设我有一个日期 var date = new Date()

我想改变时间

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-06T10:02:20.197

```
var date = new Date();
date.setHours( 0,0,0,0 ); 
```

[`setHours()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setHours)实际上有两个作用：

1.  它修改它应用到的对象
2.  它返回该日期对象的新时间戳

因此，在您的情况下，只需创建对象并在之后单独设置时间。如果不需要，您可以完全忽略返回值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T10:01:50.087

```
// Create date.  Left empty, will default to 'now'
var myDate = new Date();

// Set hours
myDate.setHours(7);

// Then set minutes
myDate.setMinutes(15);

// Then set seconds
myDate.setSeconds(47); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T10:05:51.723

```
var date = new Date()
date.setUTCHours(15,31,01); 
```

这将返回 15::31:01 的时间

更多信息[在这里](http://www.w3schools.com/jsref/jsref_setutchours.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T10:02:55.210

这样做的方法，例如获取当天的午夜：-

```
var date = new Date(); // Datetime now
date.setHours(0, 0, 0, 0);
console.log(date); // Midnight today 00:00:00.000 
```

该`setHours`函数返回时间戳而不是`Date`对象，但它会修改原始`Date`对象。

时间戳可用于初始化新的日期对象并执行算术运算。

```
var timestamp = new Date().setHours(0, 0, 0, 0);
var date = new Date(timestamp); // Midnight today 00:00:00.000
var hourBeforeMidnight = timestamp - (60 * 60 * 1000);
var otherDate = new Date(hourBeforeMidnight); // Date one hour before 
```

时间戳与调用`getTime`.

```
var timestamp = date.getTime(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-03T06:42:36.033

此代码段会将时间转换为 0:0:0，如果您要过滤一天中的第零个小时的数据，则需要此时间。对日期上的 ODATA 过滤很有用

```
 var a = new Array();
					var b = new Array();
					var c = new Array();
					var date = new Date().toJSON();
					a = date.split("T");
					a = a[0];
					b = a.split("-");
					var currentDate = new Date(b[0],b[1] - 1, b[2] + 1 ,-19,30,0).toJSON();
					c = currentDate.split(".");
					var newDate = c[0];
console.log(newDate);
```

# java - 通过准备好的语句设置 RAW 数据类型

> ID：13741057
> 
> 赞同：4
> 
> 时间：2012-12-06T09:57:07.297
> 
> 标签：java, database, oracle, jdbc

我在表中有一列的列名是INSTANCE_GUID 它的原始数据类型。

我正在编写一个准备好的语句选择查询并设置 INSTANCE_GUID

```
pstatement.setString(instanceGuid); 
```

但这是设置原始数据类型的正确方法吗？请让我知道如何设置原始数据类型，我应该使用 setByte 吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:01:44.067

如[Oracle JDBC Developer's guide and reference 11g](http://docs.oracle.com/cd/B28359_01/java.111/b31224/datacc.htm#BHCJBJCC)中所述，当使用`RAW`列时，您可以将其视为 a`BINARY`或`VARBINARY`JDBC 类型，这意味着您可以使用 JDBC 标准方法`getBytes()`并且`setBytes()`返回或接受`byte[]`. `setBytes()`将接受一个长数组（> 4000 字节）。

其他选项是使用 Oracle 驱动程序特定的扩展`getRAW()`( `oracle.jdbc.OracleResultSet`) 和`setRAW()`( `oracle.jdbc.OraclePreparedStatement`)，它们返回或接受[`oracle.sql.RAW`](http://docs.oracle.com/cd/E11882_01/appdev.112/e13995/oracle/sql/RAW.html). 使用这两个将要求您解包和/或转换为特定的 Oracle 实现类。

要创建一个，只需调用`new oracle.sql.RAW(byte[])`.

# asp.net-mvc - TempData + Windows 身份验证 = 无超时。是否可以？

> ID：13741058
> 
> 赞同：1
> 
> 时间：2012-12-06T09:57:07.183
> 
> 标签：asp.net-mvc, timeout, windows-authentication, tempdata

我的 MVC 应用程序在 Windows 身份验证下运行。

我在我的应用程序的各个地方都使用了 TempData。问题是，他们很清楚会话超时。但是，Windows 登录仍在运行。在用户注销他的 Windows 登录之前，我如何将它们设置为保持不变。我的意思是，不应该有任何超时。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:04:12.803

您可以在 Web 配置中更改会话超时值：

```
<sessionState mode="InProc" timeout="20"/> 
```

只需将分钟超时值从 20 分钟更改为更高的值

例如 2 天：

```
<sessionState mode="InProc" timeout="2880"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:49:38.830

据我了解，TempData 只会在下一个动作之前保持它的价值，这就是为什么它被称为“Temp”Data。并且会话将只能维护当前用户会话的数据。

如果您不想超时（这对我来说听起来很奇怪，而且我可以闻到糟糕的代码实践），然后使用缓存或将数据持久化到数据库。您可以根据需要保留数据。

# primefaces - PrimeFaces 命令按钮 actionListener 不触发

> ID：13741062
> 
> 赞同：0
> 
> 时间：2012-12-06T09:57:20.807
> 
> 标签：primefaces

我正在为 Web 应用程序使用素面，我遇到了这个问题，即我有一个带动作侦听器的素面命令按钮，当我单击该按钮时，actionListener 不会被触发。

```
<p:dataTable var="car" value="#{cart.cartItems}" rendered="#{not empty cart.cartItems}">
<p:columnGroup type="footer">
            <p:row>
                    <p:column colspan="3" footerText="Wallet Balance (#{cart.displayWalletAmount}) " style="text-align:right" />
                    <p:column>
                        <p:panel id="walPayPanel">
                            <p:inputText value="#{cart.payWalletAmount}" maxlength="7"  size="5" id="walAmount" />
                            <p:spacer width="10" />
                            <p:commandButton actionListener="#{cart.updateTotalAmount}" update="totPay,totPaybel" id="iconOnly" title="update" icon="ui-icon-refresh" />
                        </p:panel>

                    </p:column>
                </p:row>

                <p:row>  
                    <p:column colspan="3" footerText="Total Payble: "  style="text-align:right"  />  
                    <p:column><p:panel id="totPay"><h:outputText  id="totPaybel" value="#{cart.totalPayble}"/></p:panel> </p:column>                  
                </p:row>

            </p:columnGroup>                

        </p:dataTable> 
```

这是bean中的相关代码，

```
public void updateTotalAmount() {
    log.info("Entering updateTotalAmount()");
            log.info("Pay wallet Amount : "+payWalletAmount);
        // Double total = getCartTotal();
        if (payWalletAmount < 0.0) {
            FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_ERROR,
                    "Wallet Amount cannot be a minus value", null);
            FacesContext.getCurrentInstance().addMessage(null, message);

        } else if (payWalletAmount > (walletAmount)) {
            FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_ERROR,
                    "Wallet amount cannot be exceeded the available balance", null);
            FacesContext.getCurrentInstance().addMessage(null, message);

        }       

} 
```

有趣的是，如果我将命令按钮放在数据表之外，动作监听就会被触发。即使我在 bean 方法中添加 Actionevent 参数，它也不起作用。有人可以告诉我如何解决这个问题吗？这可以在不将命令按钮从数据表或列组之外移动的情况下完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:05:44.097

有两件事可能对您有所帮助。一种是将“（）”添加到您的 actionListener 中。之前有人报告说这可以解决问题：

```
<p:commandButton actionListener="#{cart.updateTotalAmount()}" update="totPay,totPaybel" id="iconOnly" title="update" icon="ui-icon-refresh" /> 
```

另一个可疑的事情是你的`update`陈述。尝试删除它，看看按钮是否有效。如果是这样，这意味着您可能必须将其更改为：`update=":totPay,:totPaybel"`

让我知道它是否有帮助，如果没有，我会尝试提出其他可能的解决方案。

**编辑1：**

我最近注意到类似的问题，我设法通过将方法签名更改为：

```
public void updateTotalAmount(AjaxBehaviorEvent event) 
```

并保持听众：

```
 <p:commandButton actionListener="#{cart.updateTotalAmount}" update="totPay,totPaybel" id="iconOnly" title="update" icon="ui-icon-refresh" /> 
```

还要确保你的 bean 还活着（`ViewScoped`例如）。

您是否设法以不同的方式解决您的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T12:37:21.450

您应该将您的 p:dataTable 用`<h:form></h:form>`.

# r - 使用 RPostgresql 打印查询时间

> ID：13741064
> 
> 赞同：1
> 
> 时间：2012-12-06T09:57:24.057
> 
> 标签：r, postgresql, rpostgresql

我使用 RPostgresql 连接到本地 Postgres 数据库。通常我们使用 dbGetQuery 将查询作为字符串发送。有没有办法打印查询的执行时间？

在 postgres \timing 中打印所有查询的查询执行时间。无论如何要在 R/RPostgresql 中获取执行时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:31:40.970

在 psql \timing 中只检查查询前后的系统时间。我认为这不是 libpq 函数。这只是系统数学的一般问题（注意我没有在这里仔细检查源，但这是我首先想到的，我不熟悉 libpq 中的任何计时功能）。

由于我们不是在谈论 libpq 功能，因此您需要查看其他方式进行时序检查。正如 Roman 所说，使用 system.time 获取信息并自己计算时间。

# codeigniter - 下拉代码点火器

> ID：13741068
> 
> 赞同：-2
> 
> 时间：2012-12-06T09:57:39.040
> 
> 标签：codeigniter, drop-down-menu

我是 codeIgniter 的新手，我的数据库和下拉菜单有点问题。

我的模型

```
function list_kategori(){
    $query = $this->db->get($this->table1);
    $option = array();
    foreach($query->result_array() as $row) {
        $options[$row['id_cat']] =$row['categori'];
    }
    return $options;

} 
```

我的控制器

```
public function listkategori(){
    $data['kategori']=$this->Mtugasuas->list_kategori();
    $data ['test'] = form_dropdown('kategori', $data);

} 
```

我的观点

```
<?php
echo form_open('tugasuas/listkategori');
echo $test;
echo form_close();
?> 
```

错误

```
A PHP Error was encountered

Severity: Notice

Message: Undefined variable: test

Filename: blackcoffe/add.php

Line Number: 12 
```

我究竟做错了什么？谢谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:23:44.257

这根本行不通，除了 Venkat 提到的内容之外，至少还有一个错误，即当实际数据位于 $data['kategori'] 中时，您试图用 $data 填充下拉列表，这是也不是很好的实践，并且会导致非常混乱的控制器尝试在控制器中构建表单元素（老实说，我什至不肯定这会起作用，理论上它应该但是......

你的控制器

```
public function listkategori(){
    $data['kategori']=$this->Mtugasuas->list_kategori();
    $this->load->view('viewName',$data);
    //load the view with $data this way you can pass multiple variables to the same view.

} 
```

你的看法

```
<?php
    echo form_open('tugasuas/listkategori');
    echo form_dropdown('kategori', $kategori);
    echo form_close();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:00:18.463

您需要使用此变量从控制器发送变量以查看文件...

```
 $this->load->view('view_file_name',$data); 
```

# sql - 在sqlite中搜索名字和姓氏的搜索谓词？

> ID：13741069
> 
> 赞同：0
> 
> 时间：2012-12-06T09:57:39.150
> 
> 标签：sql, sqlite, search, predicate

想象一下以下联系人：

```
{
  first_name:"Walter",
  last_name:"White"
} 
```

我希望以下搜索字符串返回该联系人：

*   `Walter White`
*   `White Walter`

但是，上述搜索字符串不应返回以下联系人：

```
{
  first_name:"Skylar",
  last_name:"White"
}

{
  first_name:"Walter",
  last_name:"Grey"
} 
```

我试图通过编写一个 sqlite 谓词来实现这一点。

我在想这一定是一个非常普遍的问题，但我还没有在这里找到可以回答这个问题的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:29:22.690

```
SELECT *
FROM MyTable
WHERE first_name || ' ' || last_name = ?
   OR last_name || ' ' || first_name = ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:53:37.757

Working from the comments in CL's answer: You're talking about doing partial matches. e.g. Mich returns Michael, Walt returns Walter, Mary returns Mary Sue, etc.

**EDIT:**

Using a little reverse LIKE trickery and some input padding, you get this:

```
SELECT *
FROM People_Table
WHERE first_name || ' ' last_name LIKE '%' || (SELECT replace(inputString, ' ', '%')) || '%'
   OR last_name || ' ' first_name LIKE '%' || (SELECT replace(inputString, ' ', '%')) || '%' 
```

For double names like "Mary Sue Jones", the following will all match: "Mary Jones", "Jones", "Sue Jones", "Jones Sue", "Sue Mary", "Mary Sue Jones", etc. The drawback to this method is that if the portions of a double name are out of order in the search string, it will not match. You'll have to go outside this SQLite predicate to deal with that.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T14:40:34.403

首先分离 & 然后搜索 FirstName = firstname 和 LastName = lastname 然后反转以防万一用户首先输入姓氏

```
try {       
    int firstSpace = search_str.indexOf(" "); // detect the first space character
    firstName = search_str.substring(0, firstSpace);  // get everything upto the first space character
    lastName = search_str.substring(firstSpace).trim(); // get everything after the first space, trimming the spaces off
        }
catch (Exception c){} 
```

FIRST_NAME LIKE '%"+firstName+"%' AND LAST_NAME LIKE '%"+lastName+"%' OR FIRST_NAME LIKE '%"+lastName+"%' AND LAST_NAME LIKE '%"+firstName+"%'

# java - 如何在 Android 中以最佳方式调整位图大小？

> ID：13741072
> 
> 赞同：4
> 
> 时间：2012-12-06T09:58:04.063
> 
> 标签：java, android, graphics

假设我有一个六边形：

![六边形](../Images/459d2ca6d6c5c133ac21b896bd550067.png)

如果我调整它的大小以在包含六边形网格的应用程序中使用它：

```
// ...
bgPaint = new Paint();
bgPaint.setAntiAlias(true);
bgPaint.setDither(true);

// ...
Bitmap coloredBackground = BitmapFactory.decodeResource(getResources(), R.drawable.bg);

// ...
canvas.drawBitmap(coloredBackground, null, getAsRect(), bgPaint); 
```

我明白了：

![六边形](../Images/3f06cd3f35720a70123dbea8b90f1d11.png)

`getAsRect()`返回`Rect`我用于绘图的对象。我想要实现的是摆脱边缘的那些透明像素。我想我做错了什么，但到目前为止我找不到。你知道我该如何解决这个问题吗？

我尝试使用抖动和抗锯齿进行试验，但没有任何改变。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T10:24:57.373

3条建议：

# 1

[试试这个：通过将BitmapFactory.Options.inScaled](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inScaled)设置为 false 来解码资源时关闭系统的缩放：

```
Options options = new BitmapFactory.Options();
options.inScaled = false;
Bitmap source = BitmapFactory.decodeResource(context.getResources(), R.drawable.bg, options); 
```

`inScaled`如果您需要位图的非缩放版本，则应关闭该标志。

然后用 缩放您的位图`Bitmap.createScaledBitmap(...)`。

# 2

另一个可能的原因是您的瓷砖的对角黑线包含不同的灰色阴影：

这是你的瓷砖的特写：

![在此处输入图像描述](../Images/2497ee85094ee5e10724646068b5e95c.png)

在调整大小之前，它是抗锯齿的。任何不是全黑的像素都可能在调整大小的线条中显示为较浅的颜色。您可以将线条更改为完全黑色（0xFF000000），并且仅在调整大小后才进行抗锯齿。

# 3

这个问题的另一个解决方案是像这样设计你的瓷砖：

![在此处输入图像描述](../Images/51a678be6c03b53337194c5bff45ffdf.png)

这避免了在彼此旁边绘制两条抗锯齿对角线的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:15:05.177

为什么不改用这个呢？

```
Bitmap.createScaledBitmap(decodedBitmap, targetWidth, targetHeight, true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:31:41.197

您可以尝试使用[hqx](http://en.wikipedia.org/wiki/Hqx)调整大小算法：

![](../Images/46082f2a2eeb19e9306c2a5f35bb1a27.png) ![](../Images/83166d0c5912831c6eb6391ea53eda14.png)

或者，您可以在更大的表面上绘画，然后完全缩放该表面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:05:22.177

我正在调整图像大小，如下所示：

```
 String url = ""; //replace with path to your image  
    int imageDimension = 48; // replace with required image dimension

    //decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(new FileInputStream(url), null, o);

    //Find the correct scale value. It should be the power of 2.
    final int REQUIRED_SIZE = imageDimension;
    int width_tmp = o.outWidth, height_tmp = o.outHeight;
    int scale = 1;
    while(true){
        if(width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE)
            break;
        width_tmp /= 2;
        height_tmp /= 2;
        scale *= 2;
    }

    //decode with inSampleSize
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inSampleSize = scale;
    Drawable drawable =  new BitmapDrawable(context.getResources(),    BitmapFactory.decodeStream(new FileInputStream(url), null, o2)); 
```

# build - TeamCity：用户必须通过参数来构建

> ID：13741074
> 
> 赞同：4
> 
> 时间：2012-12-06T09:58:10.000
> 
> 标签：build, parameters, teamcity

每次用户在 TeamCity 上执行运行时，我希望 TeamCity 提示用户输入某些要传递的参数，类似于自定义运行，如果未传递参数，则构建不会执行。

我了解自定义运行将允许此参数传递，但我希望在正常运行执行之前首先满足参数提供的条件，这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T10:08:05.667

**编辑：** 看来您*可以*使用“类型化构建参数” 在**TeamCity 7.x**中提示参数： [TeamCity 7.0 中的新增功能 - 类型化构建参数](http://confluence.jetbrains.net/display/TCD7/What%27s+New+in+TeamCity+7.0#What%27sNewinTeamCity7.0-Typedbuildparameters)- 查看“显示类型”选项。

尽管他们使用的术语是参数“需要审核”，这表明它不会强制他们实际输入某些内容，但您的场景可能需要结合下面描述的方法（即用户*必须*输入正确的参数）

**对于 TeamCity 6.5**，我自己不久前遇到了这个问题，并且无法找到提示输入参数的解决方案。单击“运行”后，正常运行就会开始。

但是，我做的一件事是包含一个带有小批量脚本的前期构建步骤，如果未提供必要的参数，该脚本将返回错误。这样，如果参数是通过“运行自定义”选项提供的，至少我可以确保构建只运行（嗯，只运行*成功）。*

尽管如此，任何试图运行构建的人都必须知道这一点，并且必须知道选择“运行自定义”选项并提供参数才能获得绿色构建。

# google-app-engine - 将 db.Key 转换为 ndb.Key - AppEngine 上的 Python

> ID：13741080
> 
> 赞同：1
> 
> 时间：2012-12-06T09:58:30.773
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

似乎 db.Key 和 ndb.Key 实例不一样。

我有一个 db.Key 实例。如何将其转换为 ndb.Key？

这就是我想要做的：

```
NDBEntity(ndb.Model):
  some_property = ndb.StringProperty()

DBEntity(db.Model):
  some_property = ndb.StringProperty()

# I have an instance of a DBEntity already saved in the datastore
db_entity_instance = DBEntity.all().get()

ndb_entity_instance = NDBEntity(id="some_id", parent=db_entity_instance.key(), some_property="foo").put()
# The above line doesn't work because it expects a Key Instance for the parent, and it doesn't seem to recognize a db.Key instance. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-31T10:33:58.707

要将 DB 密钥转换为 NBD 密钥，您必须：

```
ndb.Key.from_old_key(your_old_DB_key) 
```

请查看[NDB Cheet Sheet](https://docs.google.com/a/searce.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/mobilebasic)以进行进一步的转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T10:21:43.263

您需要从“旧”的 db.Key 转换为新的 ndb.Key。查看[NDB Key Class](https://developers.google.com/appengine/docs/python/ndb/keyclass#Key_from_old_key)了解更多信息。

# linux - 作为一名学生程序员，我为什么要使用 linux

> ID：13741084
> 
> 赞同：-3
> 
> 时间：2012-12-06T09:58:33.920
> 
> 标签：linux

我看到的每一份工作都列出了他们希望有 Linux 经验的人，这是为什么呢？他们到底想让你知道 Linux 能教你什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:59:36.197

首先，它是开源的。

因此，您可以看到由专业人士编写的代码。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:03:08.073

查看操作系统的实际实现并了解它是如何工作的。与 win 相比，Linux 很难学习`difficulties makes man perfect.`

所以去吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:00:52.660

因为很多服务器都是Linux服务器。

他们可能想让你知道，如何使用和配置这样的环境（Windows 的配置和 Linux 的配​​置是两个不同的故事）。

# jpa - JPA 多重连接

> ID：13741096
> 
> 赞同：4
> 
> 时间：2012-12-06T09:59:05.060
> 
> 标签：jpa, join, jpql

我有这些课程

```
class Project {
    @ManyToOne Company owner;
    @ManyToMany Set<Person> resources;
}
class Company {
    @ManyToOne Country country;
}
class Person {
} 
```

我如何编写 JPQL 来获取为特定国家/地区的公司开展项目的所有资源？

下面的一个似乎不起作用（使用DataNucleus）

```
SELECT r FROM Project p JOIN p.resources r JOIN p.owner c WHERE c.country = :country 
```

它尝试加入`r`，`c`当然没有该`owner`属性，并且在 DataNucleus 内部引发了 NullPointerException。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:41:07.380

这应该符合您的期望：

```
SELECT resource FROM Project p INNER JOIN p.resources as resource 
```

**编辑：**

我忘记了最初问题的一部分：

```
SELECT resource FROM Project p INNER JOIN p.resources as resource where p.owner.country = :country 
```

# linux - 从一个文件1中匹配列表，从文件2中提取相应的行

> ID：13741098
> 
> 赞同：1
> 
> 时间：2012-12-06T09:59:09.960
> 
> 标签：linux, unix, awk, grep

假设我有一个参考列表，比如说`file1.txt`，其中包含：

```
a
b
c 
d 
```

我有`file2.txt`，数据文件如下：

```
a 1 2 3
b 5 6 7
d 6 7 8
e 7 8 9 
```

和需要的输出`output.txt`：

```
a 1 2 3
b 5 6 7
d 6 7 8 
```

我想将 ID`file1.txt`与第一列匹配`file2.txt`并将整行（从 行`file2.txt`）打印到`output.txt`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T10:20:27.827

这是`join`为：

```
$ join f1 f2
a 1 2 3
b 5 6 7
d 6 7 8 
```

如果您首先需要`sort`您的文件，那么：

```
join <(sort f1) <(sort f2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T10:01:12.480

```
awk 'FNR==NR{a[$1];next}($1 in a)' file1.txt file2.txt 
```

同样在 perl 中：

```
perl -F -lane '$h{$F[0]}++;if($h{$F[0]}>=2){print $_;}' file1 file2 
```

*注意：如果第一个文件具有唯一 ID，则上述 perl 命令将起作用*

# java - 查找多对多为空或相关条件不匹配的位置

> ID：13741099
> 
> 赞同：1
> 
> 时间：2012-12-06T09:59:13.700
> 
> 标签：java, playframework-2.0, ebean

这是我的数据库（简化）：

```
User
    @ManyToMany
    List<Section> sections;

    public static Model.Finder<Long,User> find = new Model.Finder<Long, User>(Long.class, User.class);

Section
    Integer year;
    @ManyToMany
    List<User> users;

    public static Model.Finder<Long,Section> find = new Model.Finder<Long, Section>(Long.class, Section.class); 
```

使用 Ebean，我需要列出今年（2012 年）没有与他们相关的任何部分的所有用户（因此，还包括那些根本没有与他们相关的部分的用户）。

但我看不出我会怎么做。

我试过了 ：

```
User.find.where().isNull("sections").findList(); // but it didn't worked 
```

所以我被困在这里。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T18:49:34.507

你需要这样做：

```
String q="find * fetch sections where sections.id is null"

Ebean.createQuery(User.class,q).findList(); 
```

这将创建一个左外连接查询， find.where().IsNull("sections") 不起作用。

# ruby-on-rails - 使用 Prawn 添加图像，出现错误：Prawn::Errors::UnsupportedImageType, PNG using unsupported interlace method

> ID：13741110
> 
> 赞同：3
> 
> 时间：2012-12-06T09:59:44.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, prawn

我使用 Prawn 创建 pdf 文件，我想将徽标放入文件中。我查看了此站点[创建 pdf](http://www.idyllic-software.com/blog/creating-pdf-using-prawn-in-ruby-on-rails/)以参考如何添加图像。

这是我在`ExamResultPdf.rb`文件中生成pdf的代码：

```
 def initialize(exam, view)
    super(top_margin: 70)
    @exam = exam
    exam_number # line 9, I removed codes are not relevant
  end

  def exam_number
    logo_path = "#{Rails.root}/app/assets/images/logo_hoasen.png"
    image logo_path, height: 200, width: 200
    text "Examination Result \##{@exam.id}", size: 30, style: :bold
  end 
```

但是当我转到 page 时`/result.pdf`，它​​有错误：

```
Prawn::Errors::UnsupportedImageType in ExamsController#result
PNG uses unsupported interlace method

# Trace
app/pdfs/exam_result_pdf.rb:18:in `exam_number'
app/pdfs/exam_result_pdf.rb:9:in `initialize'
app/controllers/exams_controller.rb:43:in `new'
app/controllers/exams_controller.rb:43:in `block (2 levels) in result'
app/controllers/exams_controller.rb:40:in `result' 
```

我的`exams_controller`：

```
def result
    @exam = Exam.find(params[:id])
    @general_exam = GeneralExam.where(id: @exam.general_exam_id).first
    @topic_questions = TopicQuestion.where(general_exam_id: @general_exam.id)
    @exam_result = ExamResult.where(exam_id: @exam.id, user_id: @exam.user_id).first

    respond_to do |format|
      format.html
      format.pdf do
        pdf = ExamResultPdf.new(@exam, view_context) # line 43
        send_data pdf.render, filename: "exam_result_#{@exam.id}",
                                  type: "application/pdf",
                           disposition: "inline"
      end
    end
  end 
```

所以我想问为什么会出现这个错误，Prawn is not support png file？如何将图像放入pdf文件？

**更新**

我用过`jpg`or `jpeg`file，但也没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T22:33:41.740

有许多类型的 PNG - 绝大多数都可以与虾一起使用，但有些则不会。

最简单的选择是将其转换为 JPG 或将其重新保存为非隔行扫描的 PNG。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:53:44.510

经过一小时的搜索谷歌，我没有发现问题。然后我尝试将 png 文件转换为 jpg 文件。我使用[在线图像转换器](http://www.coolutils.com/online/image-converter/)将 png 转换为 jpg 文件。图像转换后，我使用了 jpg 文件：

```
logo = "#{Rails.root}/app/assets/images/logo_hoasen.jpg"
image logo, width: 240, height: 75, position: :left 
```

现在它工作正常。看来问题是因为我的 png 图像文件。

# mysql - MySQL 17.6m rows (1.2 gb) 全表更新太慢

> ID：13741118
> 
> 赞同：2
> 
> 时间：2012-12-06T10:00:16.717
> 
> 标签：mysql

我有一张 1760 万行的表

```
'CREATE TABLE `tmp_hist` (
`ti` int(11) DEFAULT NULL,
`cip6` varchar(15) DEFAULT NULL,
`date` varchar(20) DEFAULT NULL,
`fact` int(11) DEFAULT NULL,
`se` char(1) DEFAULT NULL,
`oper` int(11) DEFAULT NULL,
`qte` int(11) DEFAULT NULL,
`prix` double DEFAULT NULL,
`cip` int(11) DEFAULT NULL,
`fl` int(11) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1' 
```

运行一个非常简单的更新大约需要 10 分钟

```
update tmp_hist set cip=100 
```

有的时候：

*   39sec -- 修复表 tmp_hist（这个特别有趣，因为在 myisam 中，修复表会将其复制到不同的文件并替换原始文件，这表明磁盘速度）
*   531sec -- 更新 tmp_hist 设置 cip=100
*   400sec -- CREATE TABLE tmp_inno SELECT * FROM tmp_hist （这里我尝试将表转换为 InnoDB）
*   317sec -- 更新 tmp_inno 设置 cip=999（这个在 InnoDb 中）

根据所有假设，我希望更新时间与修复时间非常相似，即 40 秒。但是需要10分钟！可以做些什么来加快速度？有问题的代码将一些数据从格式 A 转换为格式 B。它保证在单个线程中运行，没有其他人访问相同的数据，如果出现任何问题，也不需要恢复，它可以重新开始。

PS：为了测试，UPDATE 语句被简化了（所有时间都是为了这个简化的更新）。真实代码为每一行设置不同的值，但我发现真实更新的执行时间与简化更新几乎相同，所以我将问题缩小到简化。

**目前的进展**

使用答案中的知识，我应用了 ROW_FORMAT=FIXED （这似乎相当于将所有列类型更改为固定）并将更新时间减少到 145 秒，几乎快了 4 倍。

尽管如此，它还是比修复时间慢了大约 2.5 倍，我认为这是可以达到的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:07:41.290

由于您`varchar`的表中有 s，因此更新必须读取该行，查找正确的偏移量，然后更新 cip 字段。此外，由于行是可变大小的，引擎不能轻易确定单个记录的偏移量。因此，您可以尝试将您的`varchar`字段更改为固定`char`并进行测试，如果这会有所不同。

[dba SE https://dba.stackexchange.com/a/2643](https://dba.stackexchange.com/a/2643)的一个有趣的答案也涵盖了这个主题

# java - jdbc metadata getTables 仅列出表列表

> ID：13741125
> 
> 赞同：2
> 
> 时间：2012-12-06T10:00:37.760
> 
> 标签：java, jdbc, metadata

当我使用以下语法时，我正在尝试列出数据库中的表

```
ResultSet rs = md.getTables(null, null, "%" ,null); 
```

这将返回数据库中的所有表、视图、索引、system_tables。

但我只需要公共模式中的表列表，所以我给出了以下语法，

```
ResultSet rs = md.getTables(null, "public", "%" ,"TABLE"); 
```

这向我显示了以下错误

```
required: String,String,String,String[]
found: <null>,String,String,String
reason: actual argument String cannot be converted to String[] by method invocation conversion 
```

只需要从公共模式中单独列出表。

请帮助语法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T10:03:48.293

[Javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/DatabaseMetaData.html#getTables%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29)建议您的最后一个参数应该是一个字符串*数组*。

```
public ResultSet getTables(String catalog,
                           String schemaPattern,
                           String tableNamePattern,
                           String[] types)
                    throws SQLException 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T10:06:02.597

for 的签名`getTables()`需要一个数组作为第四个参数。尝试

```
ResultSet rs = md.getTables(null, "public", "%" ,new String[] {"TABLE"} ); 
```

# objective-c - 使用 Objective c 修改现有的 XML 文件

> ID：13741128
> 
> 赞同：0
> 
> 时间：2012-12-06T10:00:56.973
> 
> 标签：objective-c, ios, xml

我在资源中有一个 XML 文件。我想修改那个 XML 文件。

想要将图像附加到它，将数据（字符串，整数，浮点数）插入其中并在特定节点中插入值。

如何在 ObjectiveC 中管理所有这些任务？（我的 XML 文件实际上是从 Excel 转换的文件。因此修改此文件将生成一个新的 Excel 文件。）

如果我的问题不清楚，请提问。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:10:07.757

要编写 xml，您可以使用[libxml](http://www.xmlsoft.org/tutorial/xmltutorial.pdf)。它是一个**基于 DOM 的 XMLParser**。

您也可以为此使用[TouchXML](https://github.com/TouchCode/TouchXML)。

这是 TouchXML 的简单[教程](http://dblog.com.au/general/iphone-sdk-tutorial-building-an-advanced-rss-reader-using-touchxml-part-1/)。

# vb.net - 如何在 vb.net 中写入打开的文件

> ID：13741129
> 
> 赞同：1
> 
> 时间：2012-12-06T10:00:58.863
> 
> 标签：vb.net, filesystems, writealltext

如何在 vb.net 中写入打开的文件

我现在正在使用这个功能

```
My.Computer.FileSystem.WriteAllText(filepath, createString(), True) 
```

但是，如果文件被打开，它会给出一个错误，指出该文件正在被另一个进程使用。如果文件关闭，它会起作用。

那么如何在文件打开时更新文件内容呢？该文件需要在打开时写入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:14:49.400

如果读取文件的应用程序是您没有源代码的东西，那么您对此无能为力，它必须以拒绝写访问的模式打开文件。如果您编写了正在读取文件的应用程序，则可以执行以下操作以允许文件的读/写共享：

[无排他锁读取文件](https://stackoverflow.com/questions/8212567/read-file-without-exclusive-lock)

# javascript - 为什么在构造选择器时会出现语法错误

> ID：13741130
> 
> 赞同：2
> 
> 时间：2012-12-06T10:01:00.160
> 
> 标签：javascript, jquery

这是后续问题。

完全输入的第一个选择器会找到所有其他选择器的值，即使它们“看起来”相同，也会给出语法错误。

```
 $(".smoothie").on("mouseover", function(event) {
          // .. other code

            // first    
            value = $(".row_2.tuesday .e_1.current_Status .smoothie_Text").attr("value");
            alert(value);

            // second
            selector = "\'.row_2.tuesday .e_1.current_Status .smoothie_Text\'";
            alert(selector);
            value = $(selector).attr("value");

            //third
            value = $("\"." + row_Classes[0] + "." + row_Classes[1] + " ." + container_Classes[0] + "." + container_Classes[1] + " .smoothie_Text\"").attr("value");
            alert(value);
          //.. other code
}).svg({loadURL: '../_public/_icons/smoothie.svg'}); 
```

有人可以告诉我我做错了什么。

**编辑**

来自控制台的错误是：

> 错误：语法错误，无法识别的表达式：' [Break On This Error]
> 
> throw new Error("语法错误，无法识别的表达式：" + msg);

我们从昨天的询问中知道是从嘶嘶声。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:02:54.740

您的第二个和第三个字符串都在末尾包含引号。选择器不应该在末尾包含引号。就是这么简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T10:03:21.130

通过删除尝试它`\'`，所以它应该如下所示

```
// second
selector = ".row_2.tuesday .e_1.current_Status .smoothie_Text"; 
```

`\'`在您的选择器代码中不需要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:04:47.493

尝试删除斜杠`\`和单引号`'`

```
 selector = ".row_2.tuesday .e_1.current_Status .smoothie_Text";
        alert(selector);
        value = $(selector).attr("value");

        //third
        value = $(row_Classes[0] + "." + row_Classes[1] + " ." + container_Classes[0] + "." + container_Classes[1] + " .smoothie_Text").attr("value");
        alert(value); 
```

# wicket - 如何在新标签或页面中打开弹出窗口？

> ID：13741135
> 
> 赞同：1
> 
> 时间：2012-12-06T10:01:24.767
> 
> 标签：wicket

我在我的 Web 应用程序中使用 Wicket，并使用`radio input`如下方式创建弹出窗口：

```
 <input type="radio" wicket:id="foo" /> 
```

当我单击此单选按钮时，页面会弹出一个弹出窗口。如何在新页面或标签中打开弹出窗口？`CTRL + mouse`clikc 没有帮助。`Right mouse click`在单选按钮上也没有显示这样做的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:17:32.963

如果弹出窗口的意思是 ModalDialog: 所以您必须通过 JavaScript 打开新窗口[[1]](http://apache-wicket.1842946.n4.nabble.com/Opening-Wicket-Page-in-New-Browser-Tab-Window-tp3752465p3753890.html)并打开页面，在该页面中配置了此模式对话框以在 onLoad 事件期间显示。

# c++ - 未定义对 cv::inpaint 的引用 - 错误 1

> ID：13741143
> 
> 赞同：1
> 
> 时间：2012-12-06T10:01:51.490
> 
> 标签：c++, linux, eclipse, image-processing, opencv

我需要帮助。几个月前，我在 Windows 上的 Visual Studio 中编写了这个 c++ 代码。我从该代码制作 .exe 文件，一切正常，就像这样。这是用于图像处理的简单代码。现在我尝试在 Linux 上的 Eclipse 中做同样的事情，以便我可以将可执行文件放在 Linux Web 服务器上。但我有这个错误：

```
In function `main':
main.cpp:(.text.startup+0x317): undefined reference to `cv::inpaint(cv::_InputArray const&, cv::_InputArray const&, cv::_OutputArray const&, double, int)'
collect2: ld returned 1 exit status
make: *** [inpaint] Error 1 
```

我使用 OpencCV 2.4.1 库。这是源代码：

```
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/photo/photo.hpp"
#include <iostream>

using namespace cv;
using namespace std;
Mat img, img0, maska;
int main( int argc, char** argv )
{

...
   }
Mat inpainted;
inpaint(img0, img, inpainted, 2, CV_INPAINT_NS);
char imeobr[256] = "images/img-uploads/finish";
strcat( imeobr, argv[1] );
strcat( imeobr, ".jpg" );
imwrite(imeobr, inpainted);
return 0;
} 
```

我认为这是输入源的问题，因为不是输入图像的固定名称。但是，我需要为每个应用程序用户动态更改输入源。请帮助人们。我可以做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:11:38.667

当您省略链接库时，会发生未定义的引用错误：

在您的项目的偏好中：

```
C/C++ Build -> GCC C++ Linker -> Libraries 
```

您是否在 Libraries(-l) 中输入了 libopencv_imgproc 库？

# 更新

只是为了测试，我创建了我的程序：

```
#include <opencv/highgui.h>
#include <opencv/cv.h>

using namespace cv;

int main(int argc, char* argv[]) {
  Mat img, img0;
  Mat inpainted;
  inpaint(img0, img, inpainted, 2, CV_INPAINT_NS);
} 
```

在我链接的图书馆中：

```
opencv_imgproc 
opencv_highgui
opencv_core 
```

一切正常..试试看告诉我！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-08T12:00:44.423

你需要包括：

-lopencv_photo

# jquery - ASP.NET MVC 3 - 在淘汰赛中绑定同一字段的多个实例

> ID：13741145
> 
> 赞同：0
> 
> 时间：2012-12-06T10:01:55.453
> 
> 标签：jquery, asp.net-mvc-3, knockout.js

如何将淘汰赛绑定到相同输入字段的多个实例？我有一个编辑器模板，它在隐藏的 div 中呈现 7 个普通输入字段，然后我使用 jQuery .after() 将它们显示在我想要的位置：
编辑器模板：

```
@model ProductRepAttributeViewModel
@{
    // Get the prefix and use it for the knockout field names
    var htmlFieldPrefix = ViewData.TemplateInfo.HtmlFieldPrefix;

    var idx1 = htmlFieldPrefix.IndexOf("Products", StringComparison.Ordinal);
    var koProductPrefix = htmlFieldPrefix.Insert(idx1 + "Products".Length, "()");

    var idx2 = koProductPrefix.IndexOf("ProductRepAttributes", StringComparison.Ordinal);
    var koPrefix = koProductPrefix.Insert(idx2 + "ProductRepAttributes".Length, "()");

    var dictTextBoxAttrs = new Dictionary<string, object>
    {
        { "style", "width: 80%;" },
        { "data-bind", string.Format("value: currentBatch.{0}.Value", koPrefix) }
    };
}
<div class="Expressed" style="width: 10%; display: block; float: left;">
    @Html.TextBoxFor( model => model.Value, dictTextBoxAttrs )
    @Html.ValidationMessageFor(model => model.Value)
</div> 
```

jQuery：

```
$('.expressed-container').after($('.Expressed')); 
```

剃刀：

```
<div style="display: none">
    @Html.EditorFor(x => x.ProductRepAttribute)
</div>

<div style="padding-top: 20px; padding-bottom: 20px" class="grid_12">
<div style="width: 8%; display: block; float: left;">
    @Html.Label("Start", labelStyleDict)
</div>
<div class ="encoded-container"></div>
<div style="width: 10%; display: block; float: left;">
    @Html.Label("End", labelStyleDict)
</div>
</div> 
```

呈现的 HTML：

```
<input type="text" value="" style="width: 80%;" name="Products[0].ProductRepAttributes[0].Value" id="Products_0__ProductRepAttributes_0__Value" data-bind="value: currentBatch.Products()[0].ProductRepAttributes()[0].Value">
<!-- 6 more fields indexed 1 to 6 --> 
```

一切都很好 - 这些字段出现在我的“编码容器”div之后，并且命名正确并且必然会被淘汰。现在我需要在不同的选项卡中显示相同的字段，因此当一个字段更新时，另一个选项卡上的等效字段也应该更新。
我将 Razor 代码（没有 EditorFor 调用）复制并粘贴到第二个选项卡中，这些字段看起来很好，并且具有与原始集相同的名称/ID（尽管我知道字段应该具有唯一的 ID），但是只有最后一个渲染的一组字段势必会被淘汰。如何绑定两组字段？我还尝试使用 jQuery clone()、.insertAfter() 和 appendTo() 来尝试克隆或复制字段，但这些都不起作用。

我可以使用部分视图而不是编辑器模板，但这将涉及为所有 7 个字段手动编写代码，我不想这样做。编辑器模板解决方案很简洁，效果很好，所以我想继续使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:50:17.657

好的，找到了问题 - 花了一个小时写了这个问题，然后在 5 分钟内解决了它！首先在 jQuery 中，我使用 appendTo() 而不是 after()。这并没有解决问题，但后来我意识到我正在调用 appendTo()`after`来初始化我的淘汰赛模型，这意味着只有一组字段可供淘汰赛绑定。所以运行 appendTo()`before`我绑定了模型意味着多个字段就位，所以敲除找到它们并正确绑定它们。

经验教训 - 如果可以，我可以将问题留给可能有类似问题的任何人。

# c# - C# 代码将使用 for 循环创建的文本框的值传递到另一个页面

> ID：13741146
> 
> 赞同：2
> 
> 时间：2012-12-06T10:02:02.597
> 
> 标签：c#, .net

我正在使用以下 C# 代码使用 stringbuilder 填充 div，我想获取单击的特定学生的 studentid。

```
PSC.Data.SQLDB.SQLDBHelper objReg = null;
DataSet objRegDetails = null;
try
{
    objReg = new PSC.Data.SQLDB.SQLDBHelper();
    objRegDetails = new DataSet();
    objRegDetails = objReg.ExecuteDataSet("ListConsultants", retXML);
    if (objRegDetails != null)
    {
        if (objRegDetails.Tables.Count > 0)
        {
            if (objRegDetails.Tables[0].Rows.Count > 0)
            {
                for (int i = 0; i < objRegDetails.Tables[0].Rows.Count; i++)
                {
                    strRep = "<div style='width :70px;height :90px; float :left ;'><div style='width :70px; height :70px; float :left ;'>";
                    strRep += "<input type=\"hidden\" id=\"hdcid\"  name=\"" + objRegDetails.Tables[0].Rows[i]["CName"] + "\" value=\"" + objRegDetails.Tables[0].Rows[i]["ConsultantId"] + "\">";
                    strRep += "<a href='a1.asp?hdcid=<%=hdcid.Value %>'>";
                    strRep += "<img src='../Images/Consultant/defaultimage.png' style='width:70px; height:70px;float:left;'></a></div>";
                    strRep +="<div style='width :70px; height :20px; float :left ;' class='pageRegText'>";
                    strRep += objRegDetails.Tables[0].Rows[i]["CName"].ToString();
                    //Session["ConsultantId"] = objRegDetails.Tables[0].Rows[i]["ConsultantId"].ToString();
                    strRep += "</div>";
                    strRep += "<div style='width :70px; height :20px; float :left ;'></div>";
                    strRep += "</div>";
                    divmain.InnerHtml += strRep;
                }
            }
        }
    }

}
catch (Exception exc)
{
}
finally
{
    objRegDetails = null;
    objReg = null;
} 
```

问题：如何在点击链接标签时获取另一个页面中的隐藏字段值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:17:04.180

您不能在页面之间使用**隐藏字段**，它们仅在它们所在的页面中可用。我认为您需要研究[查询字符串](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDIQFjAA&url=http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx&ei=1G_AUKKALPH64QSt-4DwDQ&usg=AFQjCNEYU5jmTmWNIOWRwr4rAc2qeRL6Zg&sig2=8csCCpg2n_-jN9fafh4ejw)和[会话](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)状态和[Cookie](http://msdn.microsoft.com/en-us/library/aa289495%28v=vs.71%29.aspx) ，然后您将对状态有一个很好的了解，您可以选择最好的，这里可以是**查询字符串**，因为学生 ID 不是像密码这样的凭证。

例如：
源页面：

```
Response.Redirect("destination.aspx" + "?StudentID=" + YourStudentID); 
```

并在目标页面加载：

```
txtStudentIDShow.Text = Request.QueryString["StudentID"].ToString(); 
```

# string - 使用其他 Sub VB6 中的对象或字符串

> ID：13741148
> 
> 赞同：0
> 
> 时间：2012-12-06T10:02:15.593
> 
> 标签：string, object, vb6

如何使其在 vb6 中成为可能，例如我想在 Sub Action() 和 Btn1_Click() 上显示结果，但我在 Form_Load() 上设置了所有必需的对象和字符串：

```
Private Sub Form_Load()
Dim ObjFso As Object
Dim TheText As String
Set ObjFso = CreateObject("Scripting.FileSystemObject")
TheText = "Hello"
Call Action
End Sub

Public Sub Action()
ObjFso.CreateTextFile("Test.txt").WriteLine(TheText)
MsgBox TheText, 0, "This is the text"
End Sub

Private Sub Btn1_Click()
If ObjFso.OpenTextFile("Test.Txt",1).ReadLine = TheText Then
MsgBox "Success", 64, "Ok"
Else
MsgBox "Fail", 16, "Ouch"
End If
End Sub 
```

*   脚本是否有可能创建带有“Hello”文本的文本文件“Test.txt”？
*   是否可以显示带有“Hello”文本的 MsgBox？
*   当我按下 Btn1 时是否有可能出现“成功”消息框？

*   **注意：**我问这个是因为我不知道 vb6 参数`Call TheSub(arguments)`，我只知道**VBS**中的参数，但不知道**VB6**中的参数，所以请不要关闭这个问题 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:11:55.880

与任何其他现代语言没有区别。

您可以`Dim TheText As String`在表单代码的开头全局声明''。因此您可以在表单的任何子或函数中访问它。

您也可以像`CallAction(theText)`使用参数一样调用 CallAction。您的 CallAction 子将是

```
public sub CallAction(text as String)
msgbox text
end sub 
```

# c - 为什么我的 DEBUG_PRINT 宏没有在包含它的 ac 文件中被调用

> ID：13741150
> 
> 赞同：0
> 
> 时间：2012-12-06T10:02:21.823
> 
> 标签：c, debugging, macros, shared-libraries

我在头文件中为我编写的共享对象定义了一个 DEBUG_PRINT 宏，如下所示：

lib_mylib.h：

```
#ifdef DEBUG
#define DEBUG_TEST 1
#else
#define DEBUG_TEST 0
#endif

#define DEBUG_PRINT(fmt, args...) \
        do { if (DEBUG_TEST) fprintf(stderr, "%s:%d:%s(): " fmt, \
                __FILE__, __LINE__, __FUNCTION__, ##args); } while (0) 
```

从使用这个库的 ac 文件中，我设置了

```
#DEFINE DEBUG 1 
```

这导致 DEBUG_PRINT 语句在共享对象中被调用时成功使用。但是，当我在我的 c 文件中使用该语句时，它会编译但不会执行 - 这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:10:34.020

预处理器是严格顺序的，必须在使用或检查宏*之前*定义它们。

# visual-studio - 在 Visual Studio 2008 中通过 FTP 对现有 PDF 进行水印

> ID：13741160
> 
> 赞同：-1
> 
> 时间：2012-12-06T10:02:55.827
> 
> 标签：visual-studio, pdf, watermark

使用什么库/程序？你有一些代码给我吗？

具体要求：Visual Studio 将某些 pdf 文件复制到目录中。每个 PDF 文件都需要一个水印。pdf文件的每一页都需要一个水印。水印需要是文件的名称。水印位置固定，比如中上或中下。

之后，它对它们进行 FTP 处理并将它们存档，这已经涵盖了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:32:20.880

根据对该问题的评论，现有的PDF实际上只需要盖章。您可以使用 iText(Sharp) 来做到这一点。以下示例代码取自[StampText.cs ，即](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=StampText)[iText in Action, Second Edition](http://www.manning.com/lowagie2/)第 6.3.1 节中示例的 .Net 化版本；第 6 章“[操作现有 PDF 文档](http://www.manning.com/lowagie2/samplechapter6.pdf)”可作为免费示例章节下载：

```
public static byte[] Stamp(byte[] resource) {
  PdfReader reader = new PdfReader(resource);
  using (var ms = new MemoryStream()) {
    using (PdfStamper stamper = new PdfStamper(reader, ms)) {
      PdfContentByte canvas = stamper.GetOverContent(1);
      ColumnText.ShowTextAligned(
        canvas,
        Element.ALIGN_LEFT, 
        new Phrase("Hello people!"), 
        36, 540, 0
      );
    }
    return ms.ToArray();
  }
} 
```

此示例操作内存中的 PDF。也可以从文件中读取文档或将加盖的 PDF 写入文件。

iText(Sharp) 可作为免费软件（AGPL 许可）或商业使用。

# ruby-on-rails - ActiveAdmin: how to only get current_user records in index pages

> ID：13741161
> 
> 赞同：0
> 
> 时间：2012-12-06T10:02:57.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

I've install ActiveAdmin in my rails app and do not manage to only display devices that belongs to the logged in user in the index pages.

I have several models:
- user
- group
- device

**user** has_and_belongs_to_many **groups**
**devices** has_and_belongs_to_many **groups**

When a user is logged in, I'd only need the devices belonging to one of the user's groups listed in the index.

I tried to modify the controller within my activeadmin's device model:

```
controller do
  def index
    index! do |format|
      @devices = current_user.is_admin? ? Device.all : current_user.groups.map{ |g| g.devices }.flatten.uniq
      format.html
    end
  end
end 
```

but I end up with the following error:

undefined method `reorder' for #

Any idea ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:55:46.823

I think, you should read this issue.

[https://github.com/gregbell/active_admin/issues/1178](https://github.com/gregbell/active_admin/issues/1178)

# google-apps-script - 每个人都可以看到 WebApps 使用的库的源代码？

> ID：13741173
> 
> 赞同：4
> 
> 时间：2012-12-06T10:03:44.767
> 
> 标签：google-apps-script

具有与 [WebApp 访问的库中的 ScriptDb](https://stackoverflow.com/questions/13113564/scriptdb-in-library-accessed-by-webapp)类似的星座，并且那里给出的答案也适用于这个问题：
当已发布的 WebApp（每个人都可以访问并作为访问用户运行）正在使用库时，那么这个库需要共享给公众（给拥有链接的人），否则会出现错误
“您无权访问您的脚本使用的库...，或者它已被删除。”

这意味着，每个拥有我图书馆链接的人都可以看到所有宝贵的源代码。现在的问题是，有人能猜出那个链接，它看起来像

```
 https://script.google.com/a/macros/..../d/Mmov_2Lg8BnmygsjmTBZMqKFZSw7a2n3o/edit?template=default 
```

或者这个链接既不包含在传递给使用 WebApp 的网络内容中，也不能从库的（猜测的）名称中轻松派生？如果上述链接中以 Mmov_2Lg8B 开头的字符串不知何故是库的编码名称和版本号，并且该算法在两个方向上都有效，那么情况就是如此。
总结一下：发布的 WebApp 的源代码对用户是不可见的，但是该 App 使用的所有库都可以被拥有它们链接的每个人看到。这个链接容易猜到吗？或者甚至有完全不同的方法来保持库的源代码私有？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:35:13.577

我最初认为通过检查 webapp 可以看到库密钥，但这是不可能的。因此，您确实需要将您的图书馆分享给“任何知道该链接的人”，但只要您不在任何地方公布此链接，仅使用您的网络应用程序就无法找到它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T16:08:47.437

请参阅对 Henrique 答案的评论 - 库 url**不可**猜测，并且**不在**webapp 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-12T08:21:25.600

如果有人在脚本编辑器中调试公共代码并继续按下，`STEP IN`那么最终他将到达库代码。所以**你不能以任何方式隐藏库代码。**

# sql - 使用 SQL Server 的输出参数调用 Oracle 存储过程

> ID：13741175
> 
> 赞同：14
> 
> 时间：2012-12-06T10:03:45.700
> 
> 标签：sql, sql-server, oracle, stored-procedures, linked-server

我在 SQL Server 2008 R2 中有一个 Oracle 链接服务器。我需要执行 Oracle 存储过程（第一个是输出参数，第二个过程是输入参数）：

```
CREATE OR REPLACE PROCEDURE my1.spGetDate(CurrentDate OUT VARCHAR2)
IS
BEGIN
-- set output parameter, no select statements
END;

CREATE OR REPLACE PROCEDURE my1.spDeleteOldRecords(CurrentDate IN VARCHAR2)
IS
BEGIN
-- conditional delete from oracle table, no select statements
END; 
```

我没有找到关于这个问题的任何完整文档，只有带有无参数选择/非选择过程的简单示例，并且想知道如何调用这些过程，内部带有选择的过程，具有基本参数类型的多参数过程。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T09:36:12.893

它应该像这样工作：

```
DECLARE @dateval DATETIME

EXECUTE ('begin my1.spGetDate(?); end;', @dateval OUTPUT) AT ORA_DBLINK_NAME;

EXECUTE ('begin my1.spDeleteOldRecords(?); end;', @dateval) AT ORA_DBLINK_NAME; 
```

如果您有多个参数，它可能如下所示：

```
EXECUTE ('begin my1.spProc(?,?,?,?); end;', @param_in_1, @param_in_2, @param_out_3 OUTPUT, @param_out_4 OUTPUT) AT DBLINK_NAME; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:06:56.493

使用 REF CURSOR 并将该游标声明为 oracle 中的输出变量。使用 Ref Cursor 您可以从 Oracle 存储过程中检索结果集

# database - 关于产品 - 订单 - 已删除产品的数据建模的公认方法

> ID：13741176
> 
> 赞同：1
> 
> 时间：2012-12-06T10:03:46.190
> 
> 标签：database, transactions, product, redundancy

我们在为新应用程序建模数据时遇到了两难境地。情况有些复杂；所以我写了一个简化的情况，相当于我们的问题：

*   在 Web 应用程序中，管理员创建产品列表；标题，描述，链接到某些产品类别；等等所以有一个产品实体

*   在前端，用户订购某些产品；所以有一个 Order 实体，其中包含与其关联的 OrderLine 实体数组；每个 OrderLine 实体都有一个与之关联的 Product。

*   几天后，订购了多个产品。然而，管理员需要更改产品的价格，甚至*删除*产品，因为它不再可用。

*   在数据库中，仍然有与 OrderLines 关联的 Orders，它们链接到 Products。当管理员查看数据库中的订单时会发生什么，这些订单是在数据库中更改产品*之前*记录的并且与更改的产品相关联？

*   尽可能避免冗余；在数据库级别上，您将如何对这种情况进行建模？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:38:02.783

我已经建模`Products`，`Orders`并且`OrderItems`以类似的方式；我必须添加到@Neville K 的答案的唯一一件事是，我之前已经`ProductPrices`根据自己的权利创建了域实体；`Product`毕竟，添加新价格与添加新价格不同。A`ProductPrice`有价格、货币以及开始和结束日期；像这样的模型价格还可以为特定客户提供特定组的价格或折扣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:21:57.367

我对这个问题的解决方案是将“产品”的更改记录为一流的域概念。通常，这意味着在订单表中包含“valid_from”和“valid_until”字段，并通过将当前记录的“valid_until”日期设置为 now() 并为具有 now() 的 valid_from 的产品插入新行来记录更改) 和一个 null valid_until。

这允许您的订单检索创建订单时的产品信息，这反过来又允许您的业务逻辑推理该数据 - 例如，按照创建订单时的价格兑现价格。

另一种方法是在产品表中包含一个“版本”ID，作为主键的一部分，并将 orderlines 表连接到 product_id 和 version。

删除产品不应导致 SQL“删除”语句 - 相反，产品表应包含一个标志以指示该产品是否仍然可用。当产品变得不可用时，您将产品表中的旧记录设置为 now() 的 valid_until，并插入一个“availableFlag”设置为 false 的新行。

# android - 更改 Rooted 设备 Android 上的动态壁纸

> ID：13741181
> 
> 赞同：2
> 
> 时间：2012-12-06T10:04:10.243
> 
> 标签：android

由于无法在 Android 上以编程方式更改动态壁纸，如果设备已植根，是否可以通过某种方式更改动态壁纸？

我正在开发一个应用程序，她的目的是从设备上所有已安装的动态壁纸中进行选择，并将其设置在 Android 主页背景上。但问题是我需要在没有任何用户交互的情况下严格以编程方式执行此操作。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:37:58.370

也许 XDA 可以帮助解决这个问题：

[http://forum.xda-developers.com/showthread.php?t=684557](http://forum.xda-developers.com/showthread.php?t=684557)

除此之外，您可以查看 liveWallpaperChoose 的代码并查看它如何更改动态壁纸。

使用普通 API（从果冻豆开始），您选择动态壁纸，用户只需确认选择它：

[如何从应用程序移动到动态壁纸预览？](https://stackoverflow.com/questions/12842924/how-do-i-move-to-live-wallpaper-preview-from-app)

# php - 需要php ajax指导

> ID：13741185
> 
> 赞同：-1
> 
> 时间：2012-12-06T10:04:24.833
> 
> 标签：php, jquery, ajax

我需要 PHP Ajax 方面的指导。

我想开发类似 Gmail 的功能。

现在我们开始吧。

我有两个页面，第一页是登录，第二页是显示。

一旦登录用户将重定向到显示页面，在那里他可以看到其他用户发送的消息。

现在我想实现 ajax，就像每当用户向其他用户发送消息时，其他用户立即通知他/她收到消息并且还需要将其附加到他们的邮箱中。

我知道我可以使用它来做到这一点，`setInterval`但还有其他方法，因为`setInterval`可能适用于其中一个，`5 sec`或者`10 sec`但我想在其他用户向他发送消息时触发它。

我在[zaarly.com](http://www.zaarly.com)和 Gmail 表单中看到了这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:11:06.443

如果您想构建“类似 gmail 的东西”，您将需要对以下内容和一些 javascript 技能进行大量研究。它是您将使用的唯一语言。

*   Node.js - 可以使用套接字向浏览器提供实时更新的后端服务器。
*   Backbone.js - 一种构建单页应用程序“像 gmail”的半结构化方式

我还将 Require.js 包含到该列表中，该列表基本上用于异步加载所有 Backbone javascript 文件。它有助于保持应用程序的文件结构可维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:26:23.640

Ajax 是一种浏览器端技术。如果浏览器不请求消息，它就无法从服务器接收消息。如果您想为此使用 Ajax，那么您需要使用您建议使用的解决方案`setTimeout`或类似的解决方案定期 ping 服务器。

事实上，Ajax 对这类事情的用词是错误的。您需要搜索的术语实际上称为**Comet**。您可以在此处阅读更多相关信息：[http](http://en.wikipedia.org/wiki/Comet_%28programming%29) ://en.wikipedia.org/wiki/Comet_%28programming%29 。

Comet 是服务器推送到浏览器技术的统称。您的解决方案是 Comet 的众多可能实现之一，尽管它在带宽方面并不是特别有效。上面链接的 wiki 页面列出了许多其他可能的实现目标的方法，您可能希望对其进行调查。但是在谷歌上搜索“Comet”而不是“Ajax”肯定会帮助您在这里进行研究。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:25:23.747

我注意到您在评论中声明“即时响应功能”。你应该看看长轮询[（推送技术）](http://en.wikipedia.org/wiki/Push_technology)，理解它，然后选择适合工作的语言、技术和架构。

> 在 web/AJAX 上下文中，长轮询也称为**Comet 编程**。

还有“PHP AJAX”——PHP 是服务器端，JavaScript 是客户端。不要混淆他们，否则你会被搞砸的:)

# c# - 逗号分隔列和列表之间的Linq To Sql查询？

> ID：13741191
> 
> 赞同：1
> 
> 时间：2012-12-06T10:04:41.010
> 
> 标签：c#, sql, linq-to-sql, linq-to-objects

我有一张桌子。

有一列名称是分支。其中包含逗号分隔的值。像这样

```
1,2
2,4
5,6
3,4
6,8
4,9,7 
```

等等...

我有一个`List<string>` 包含两个值 3 和 4。

我需要一个数据库查询，它将获取包含 3 或 4 的所有列数据。

所以输出将是

```
2,4
3,4
4,9,7 
```

我正在使用此代码作为解决方案。

```
RowCollection.Where(row => row.Split(",").ToList()
           .Where(x => list.Contains(x)).Any()).ToList(); 
```

这显示错误。

```
Method 'System.String[] Split(Char[])' has no supported translation to SQL. 
```

请让我知道解决方案我将为此做些什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:07:08.897

不幸的是，您正在使用的 IQueryable（Linq to SQL）不支持 Split 函数。

在这种情况下，您实际上只剩下 IEnumerable (Linq to Objects) 支持。你的第二个代码片段是你需要做的，或者类似......

那么在这种情况下试试这个

```
var collection = RowCollection.ToList();

var filterdate = collection.Where(row => row.Split(",").ToList()
                    .Where(x => list.Contains(x)).Any()).ToList(); 
```

由于不支持拆分 n t-sql 您应该首先在一个列表中获取数据，然后应用您的条件。

或申请`AsEnumerable()`

```
var collection = RowCollection.AsEnumerable()
                  .Where(row => row.Split(",").ToList()
                        .Where(x => list.Contains(x)).Any()).ToList(); 
```

# java - 没有驱动程序的 Java MySQL 连接

> ID：13741194
> 
> 赞同：2
> 
> 时间：2012-12-06T10:04:47.250
> 
> 标签：java, mysql, sql, odbc

我需要建立与数据库（如 MySQL、DB2）的连接，但我无法包含 JAR。

所以我认为 ODBC 能够在没有特定于 DB 的驱动程序的情况下连接到 DB。但是我发现的每个代码示例都使用本机驱动程序。

`Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");`

Java Security 引发访问被拒绝异常，否则我确实得到 java.sql.SQLException：找不到合适的驱动程序...

我只想提交一些简单的 SQL 查询——我不明白为什么我需要本地驱动程序。

我在错误的页面上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:24:04.750

JDBC/ODBC 桥还需要一个驱动程序——它需要一个*已安装*的ODBC 驱动程序，它也是一个“本机”驱动程序。

通常，安装 ODBC 驱动程序比在应用程序中包含 .jar 文件（JDBC 驱动程序）更麻烦。

使用 ODBC 驱动程序，您实际上会遇到更多问题。ODBC 驱动程序必须与所使用的 JVM 的“位数”相匹配。因此，如果您的应用程序使用 32 位 JVM 运行，您必须安装 32 位 ODBC 驱动程序。如果您的应用程序在 64 位 JVM 上运行，则需要 64 位 ODBC 驱动程序。

使用 JDBC（类型 4 - 但现在所有 DBMS 都有一个类型 4 驱动程序），您只需包含该**单个**jar 文件，而不是安装，不用担心 32/64 位。

最重要的是：JDBC/ODBC 桥是有缺陷的，并且可能比使用真正的 JDBC 驱动程序慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:08:17.100

你需要那些驱动程序。即使您使用 Java 的 SQL API，您仍然需要针对特定​​数据库（Oracle、MySQL...）的实现。所以你必须将驱动程序添加到你的项目中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:11:07.043

1）右键单击您的项目。2）@编译选项卡，添加库。3) 寻找司机

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:18:17.260

你可能想读[这个](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/package-summary.html)。你必须有这些驱动程序。

# python - 如何在 Django 模板中使用这个 for 循环？

> ID：13741197
> 
> 赞同：-6
> 
> 时间：2012-12-06T10:05:10.823
> 
> 标签：python, django

这是我在 Stack Overflow 上的第一篇文章。我有这个循环，它在 Python 本身中运行良好。

```
for i, j in enumerate(ls.split("/")):
    print i * " " + j 
```

我想在 Django 模板中实现同样的东西。这是我想我会做的：

```
{% for i, j in enumerate(ls.split("/")) %}
{% i * " " + j %}
{% end for %} 
```

但这不起作用。我从views.py 中得到**ls变量。**`i and j`变量是在实现 for 循环时组成的。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T10:11:29.317

您似乎没有阅读过任何有关 Django 模板的文档。你应该在提问之前这样做。

Django 的模板语言是有意限制的。它不是 Python。您不能在其中进行任意函数调用。这类事情必须在视图中完成，或者可能在自定义模板标签中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:12:14.363

我认为它应该是这样的：

```
{% for i, j in data_supplied_to_template %}
    {{ i * " " + j }}
{% endfor %} 
```

注意`endfor`模板替换的关键字和双括号语法。

现在您必须将所需的数据放入`data_supplied_to_template`您交给模板引擎进行渲染的变量中。

一些额外的建议包括为您的变量使用更好的 nanes（i、j 通常保留用于整数和索引）

有关更多信息，请参阅[模板文档](https://docs.djangoproject.com/en/1.3/ref/templates/builtins/#std%3atemplatetag-for)。

# javascript - 我想知道这两个 JavaScript 片段是否相同

> ID：13741199
> 
> 赞同：14
> 
> 时间：2012-12-06T10:05:24.050
> 
> 标签：javascript, coding-style

我是 JavaScript 新手，我想了解更多关于它的信息。

例如：

```
a == true && alert("a is true"); 
```

这是否类似于：

```
if(a == true)
{
    alert("a is true");
} 
```

如果上面的代码是正确的并且它们都相等，那么我想知道所有这样的运算符和条件。我在哪里可以找到它们？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T10:09:58.353

答案：**结果，即警告框，将是相同的。**

解释：

大多数语言设计为仅在第一个表达式评估为 时才评估第二个表达式`true`，在表达式的情况下`&&`。

这意味着如果`a`计算结果为`false`, `null`, `undefined`, 一个空字符串, `0`, 或`NaN`,`alert("a is true")`将不会被计算，并且您不会看到警告框。

JavaScript 的值可以是“真”或“假”，我建议您在此处阅读更多相关信息：http: [//11heavens.com/falsy-and-truthy-in-javascript](http://11heavens.com/falsy-and-truthy-in-javascript)。

所以，这取决于你对“相同”的定义，结果，即看到或没有看到警告框，是一样的。

如果您想了解更多关于 JavaScript 中不同运算符以及它们如何工作的信息，请查看：[developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T10:29:44.153

两者之间的唯一区别是这是一个表达式：

```
a == true && alert("a is true"); 
```

但这是一个声明：

```
if (a == true) {
    alert('a is true');
} 
```

表达式的结果取决于`a == true`计算结果。

```
false && alert('a is true'); // false (and alert box does not show up)
true && alert('a is true');  // undefined (after alert box is clicked away) 
```

这要归功于评估表达式的“短路”行为；使用`&&`，第一个错误的条件将成为表达式的结果，而不计算其余条件。

另一个具有类似行为的运算符是逻辑或`||`。考虑：

```
a || alert('a is false'); 
```

如果`a`计算结果为假，这将显示警报框。

```
false || alert('a is false'); // undefined (after alert box is clicked away)
true || alert('a is false');  // true (alert box does not show up) 
```

请注意，具有此类副作用的表达式被认为是“聪明”的解决方案；他们可能会缩短您的代码，但最初的意图并不总是显而易见的。

也就是说，它也有很好的用途，例如：

```
a = a || 'default value'; 
```

如果它是假的，这将分配一个默认值，否则分配一个`a`原始值`a`。您可以经常看到这些表达式，它们是该语言的一个强大功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T10:29:04.673

它不是 Javascript 的特殊语法——它只是缩短代码的技巧。

没有魔法。这只是一个简单的逻辑。通常，代码最小化器使用这些技巧来缩短代码。此行为基于 && 和 || 运算符的重要属性 - 如果从第一部分知道结果，它们不会计算表达式的第二部分（与 & 和 | 运算符相反，它们总是计算表达式的两个部分）。

用法说明：

```
a==true && alert("a is true"); 
```

如果 'a' 为假 - javascript 引擎分析整个表达式也必须为假（因为 '&&' (AND) 逻辑运算符的含义） - 它省略了表达式的第二部分，因为无论它返回什么结果都不会改变整个表达式的结果。所以它不会运行“警报”。相反，如果“a”为真 - Javascript 引擎需要知道表达式第二部分的结果并且它运行“警报”。这种行为模仿了通常的“if”语句。

```
a==false || alert("a is true"); 
```

这一个使用“或”逻辑运算符。如果“a”为假，则无需评估表达式的第二部分并触发“警报”。如果“a”为真，则表达式的第二部分有可能为“真”，整个表达式的计算结果为“真”——因此 javascript 引擎运行“警报”。

此外，这些快捷方式可以进一步缩短。因为不需要比较两个布尔值：'a'和'true'，因为'a'已经是布尔值。它使以下内容：

```
a && alert("a is true"); 
```

基本上你不需要手动使用这些东西，只需使用普通的“if”语句——它会让你的代码可读。然后，如有必要，您可以使用代码最小化器来缩短生产代码。

快乐编码！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T12:06:09.180

在其他答案中有很多很好的例子，如何`&&`工作，所以我不会重复它们。无论如何...

计算表达式时，它会发送一个返回值作为结果。在您的特定情况下（第一个示例），返回值不在任何地方使用，结果与第二个示例相同。但是如果我们使用那个返回值，比如在`if`条件中，我们可能会得到一些令人困惑的结果。这是一个例子：

```
var a = true;
if (a == true && alert('a = true')) {
    alert('a really is true');
} else {
    alert('It seems, that a is not true');
} 
```

此代码段将首先警告“a = true”，第二个警告将是“看起来，a 不正确”。这是由于 DOM 原生函数的返回值`alert()`，它返回`undefined`，这使得条件为 falsy( `true && undefined === false`)。因此，我们可以说，您的代码片段在该特定上下文中是相等的，但在其他某些上下文中则不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T10:11:15.677

他们都做同样的事情。这取决于您喜欢代码的外观，并且大多数人（我认为）会同意第二个版本最好阅读。

`If`语句在遇到错误时停止执行（在 && 运算符的情况下），因此第一个语句说“如果 a 为真，则如果警报...”，这意味着如果 a 为真，则将显示警报。

这与第二版的结果完全相同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T10:30:17.703

两组代码产生相同的结果但不相同

对于第一个代码集，

```
a == true && alert("a is true") 
```

使用[逻辑运算符`&&`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)。

使用 ,评估语句时`&&`，`false && anything`短路评估为假。

因此，在第一个语句中，如果`a`为 false，则不会调用 alert(1)。js 编译器跳过该`alert`语句。

如果`a`为真，则执行 alert(1)，因为条件没有短路。

在第二组中，使用正常`if`条件。检查此[链接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/if...else)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-06T10:08:22.650

这段代码做同样的事情，检查 a 是否为真然后调用函数警报，我想我可以说是一样的。

# ruby-on-rails - rails redirect_to html 格式不起作用

> ID：13741202
> 
> 赞同：2
> 
> 时间：2012-12-06T10:05:31.677
> 
> 标签：ruby-on-rails, redirect, format

此操作无效：

redirect_to request.referer, :format => "html", :alert => exception.message

当它从 js 格式的控制器操作重定向时，重定向也是 js 格式，而不是 html 格式。

任何线索为什么？谢谢！

PS：我也试过 :format => :html

**编辑完整性**

重定向发生在通过此 application_controller 方法进行 cancan 自动化之后

```
 if request.referer
      logger.debug "Rescueing Cancan"
      redirect_to request.referer, :format => :html, :alert => exception.message
    else
      redirect_to root_path, :alert => exception.message, :format => :html
    end
  end 
```

这是我的日志：

```
Started GET "/challenges/ground-floor/tasks" for 127.0.0.1 at 2012-12-06 11:17:06 +0100
Processing by ChallengesController#tasks as JS
  Parameters: {"id"=>"ground-floor"}
  Projectmilestone Load (0.6ms)  SELECT "projectmilestones".* FROM "projectmilestones" WHERE "projectmilestones"."id" = 790 LIMIT 1
Rescueing Cancan
Redirected to http://127.0.0.1:3000/challenges/ground-floor?subaction=pmdocuments&page=1
Completed 302 Found in 105ms (ActiveRecord: 1.6ms)

Started GET "/challenges/ground-floor?subaction=pmdocuments&page=1" for 127.0.0.1 at 2012-12-06 11:17:06 +0100
Processing by ChallengesController#show as JS 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:11:55.193

尝试`:back`使用

```
redirect_to :back, alert: exception.message 
```

从上的文档`redirect_to`：

> `:back`- 返回发出请求的页面。对于从多个地方触发的表单很有用。简写为`redirect_to(request.env["HTTP_REFERER"])`

# performance - 将 DBCP 替换为 Tomcat JDBC 池时增加负载并降低性能

> ID：13741203
> 
> 赞同：16
> 
> 时间：2012-12-06T10:05:34.080
> 
> 标签：performance, tomcat, load, apache-commons-dbcp, jdbc-pool

在 DBCP 中出现连接泄漏和死锁问题后，我们决定将其替换为 Tomcat JDBC 池。当然，迁移真的很简单。

但在将其部署到生产环境后，我注意到，运行两个 Tomcat 的服务器上的负载从 4-4.5 增加到 5.5。除了更换游泳池外，我们没有再做任何事情。此外，使用 JMeter 测量的性能下降了约 5%。

我花了一些时间调整池参数，但没有明显的效果。我在下面粘贴了我当前的配置（来自`<GlobalNamingResources>`in `server.xml`）：

```
<Resource name="jdbc/xxxxxx"
          auth="Container"
          type="javax.sql.DataSource"
          factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
          initialSize="10"
          maxActive="100"
          minIdle="10"
          maxIdle="50"
          maxWait="10000" 
          testOnBorrow="true"
          testOnReturn="false"
          testOnConnect="false"
          testWhileIdle="false"
          validationQuery="SELECT 1 from dual"
          validationInterval="30000"
          suspectTimeout="60"
          timeBetweenEvictionRunsMillis="30000"
          removeAbandonedTimeout="60"
          removeAbandoned="true"
          logAbandoned="true"
          abandonWhenPercentageFull="50"
          minEvictableIdleTimeMillis="60000"
          jmxEnabled="true"
          username="xxxxx"
          password="xxxxx"
          driverClassName="oracle.jdbc.OracleDriver"
          url="jdbc:oracle:oci:xxxxx"/> 
```

FairQueue 和 PoolSweeperEnabled 为 true

在 Spring applicationContext-jdbc.xml 我只有：

```
 <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="resourceRef">
      <value>true</value>
    </property>
    <property name="jndiName">
      <value>java:comp/env/jdbc/PortalDB</value>
    </property>
  </bean> 
```

我究竟做错了什么？我想，JDBC_pool 应该比开箱即用的 DBCP 更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T20:35:48.993

您的设置和调整显示正确。您的负载增加可能是由于服务器同时处理更多并发请求。DBCP 可能已阻止服务器承担此负载，因为它锁定池的所有线程。jdbc-pool 不这样做，所以现在您增加了并发性。如果负载增加，响应可能会减少，但您的吞吐量会增加。

我会开始调整

```
maxActive 
```

匹配您的 maxThreads 以处理并发性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:07:23.567

您的诊断很奇怪：AFAIK Tomcat 的 DBCP 库只是 commons-dbcp 的重新打包版本......因此从一个更改为另一个不应导致行为或性能发生任何变化。（见[这里](https://stackoverflow.com/questions/4711943/tomcat-dbcp-vs-commons-dbcp)）

不过，您使用的版本可能发生了变化：尤其要注意 1.3/1.4 的差异。（见[这里](http://commons.apache.org/proper/commons-dbcp//)）

无论如何，您的配置似乎没问题（尽管您可能会遇到问题，但它确实有效）。更新您的库可能是在不进入调试模式的情况下解决问题的唯一方法......

更进一步，您能否更具体地说明“DBCP 中的连接泄漏和死锁问题”是什么意思？确定死锁和连接池之间存在联系是一个非常精确的诊断：您是怎么得出这个结论的？您可能会遇到死锁，因为您的 SQL 语句很容易发生死锁，而池只能通过同时提供许多连接来实现死锁——这实际上只是它的工作。

# ajax - 用于导航的 ASP.NET 基本站点结构

> ID：13741208
> 
> 赞同：2
> 
> 时间：2012-12-06T10:05:57.420
> 
> 标签：ajax, asp.net-mvc, navigation

我现在浏览了许多论坛来回答一个非常基本的问题，但令我惊讶的是，我找不到大多数网站使用的非常基本的设计的一个很好的例子。我对编程并不陌生，但不久前我用它做了大量工作，而且我对 ASP.NET 完全陌生。我目前正在使用 VS2010 并从头开始构建一个 ASP.NET MVC 3 站点。该站点启用了 AJAX，我目前同时使用根据控件进行左窗格导航和 TabContainer 进行顶部选项卡导航。

到目前为止，所有内容都包含在一个母版页中，基本问题是在左侧/顶部菜单中选择导航链接时，整个页面会重新加载并破坏导航菜单的状态。此外，完全没有必要的闪烁，我认为没有理由重新加载整个页面，我只想更改“主要区域”的内容而不触摸导航菜单。

网站结构目前由`<DIV>`元素构成，这使得设计非常简单，CSS 文件的结构提供了极大的灵活性和控制力。根据建议，我想尽我所能避免过时的解决方案，例如 IFrame。我想为如何以现代和灵活的方式完成这项工作奠定基础，并尽可能减少妥协。这很重要，因为我启动的系统可能会在通过多个决策论坛后由整个团队进行工作。

正如我所说，我已经广泛浏览了解决方案，并发现了许多关于母版页概念的解释，这些解释让我输入了我的问题似乎是什么：我的导航菜单绑定到母版页，母版页实际上只是紧密连接到内容页面的“用户控件”，当我选择导航链接时，这些合并页面会重新加载。这是不应该发生的，这是不可接受的。

我还尝试将导航面板的加载包装在“！IsPostBack”条件下，但我得出的结论是问题不在于 PostBack：s，问题在于单击链接/树链接/手风琴窗格在左侧菜单中确实请求了一个全新的页面，因此所有内容都重新加载并且以前的状态丢失了。当然，我可以编写代码来存储状态并为“新页面”提供最后的状态，如果没有其他可能，这将是一个解决方案；但我真的不想重新加载整个页面；我只想重新加载“主要区域”以减少带宽需求并避免闪烁。

所以我搜索了只更新“主要内容内容占位符”的方法，我看到很多关于这个主题的问题，但很少有好的答案，尤其是当我想更改主要区域中的整个 aspx 页面时，不仅仅是更新控件的数量（或动态创建新控件/删除旧控件等）。想要改变整个 aspx 页面的原因是不同的页面会提供不同的功能，仅仅通过一些控件的操作是不够的，但主要区域应该加载另一个 aspx 页面——从开发组织的角度来看，这也是很好，因为不同的开发人员可以在完整的应用程序中处理不同的功能领域。

我愿意放弃整个母版页策略，或者使用嵌套母版页，或者将母版页包装在非母版页中，或者使用更新面板，或者使用跨页发布等。但是我没有找到可以作为开始使用的实际可行的示例。

而且，由于目前这基本上只是客户端更新，我真的不明白为什么这会变得如此棘手。

所以，很简单地说我的问题是：你认为设计一个网站的基本策略是什么这个区域而不是整个站点。

如果您可以向我提供对此的一些描述，当然最好是一些演示站点，其中只有部分站点更新为新页面而不是整个页面 - 就这么简单！- 当这将是非常受欢迎的时候。现在花了三天时间浏览一个好的推荐，我变得越来越困惑...... :-(

将非常感谢指导。

/DT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:34:31.260

我会选择母版页布局。有一个`ContentPlaceHolder`用于导航（根据您的需要），另一个用于主要内容。然后，您可以在需要时使用`JQuery.ajax()`内置的 ASP.NET 之类的东西`UpdatePanel`将内容加载到主 ContentPlaceHolder 中。

关于内容本身，我会使用 UserControls（.ascx 文件）。您可以将命令传递到默认页面，告诉它要加载哪个控件，然后加载它。

我个人会使用 ASP.NETs UpdatePanel，因为您可以强制它使用`UpdatePanel.Update();`.

不过要注意的一件事是，如果这是针对需要搜索引擎优化的实际网站，则可能很难做到，因为 URL 不会改变，因此 SEO 会受到影响。

这是一个广泛的例子，但 HTH。

编辑：

我会做两件事：

1.  将 a 添加`PlaceHolder`到 default.aspx （在 a 内`UpdatePanel`）并将其作为公共 var 在后面的代码中公开，以便可以从外部访问它。
2.  暴露它，`UpdatePanel`以便它可以被外部访问；

因此，默认情况下，您将拥有以下内容：

```
<asp:Content id="Content1" runat="server" contentplaceholderid="cphContent">
    <asp:UpdatePanel id="updMain" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:PlaceHolder id="phMain" runat="server" />
        </ContentTemplate>
    </asp:UpdatePanel>
</asp:Content> 
```

On Navigation Control 对所有导航链接执行此操作（更改 OnClick 以适应要加载的控件 - 这可以在转发器中动态完成）：

```
<asp:LinkButton id="lbItem" runat="server" onClick="LoadControl1" /> 
```

然后在（导航的）代码隐藏中，您可以拥有：

```
protected void LoadControl1(object sender, EventArgs)
{
    MyControl Con = (MyControl)LoadControl("~/MyControl.ascx");
    ((Default)Page).phMain.Controls.Add(Con);
    ((Default)Page).updMain.Update();
} 
```

请注意，您可以在没有母版页复杂性的情况下实现相同的目标，但我更喜欢它们。如果您想在没有母版页的情况下执行此操作，那么您只需`PlaceHolders`默认设置并执行相同的操作。

**编辑2：**

您也可以通过将内容加载到 div 中来使用 JQuery() 来执行此操作。设置页面（MasterPage 或 Normal 页面结构）。然后让你的导航链接像这样：

```
<a href="http://www.mysite.com/page1.aspx" class="ajax_link">Link 1</a> 
```

然后有一些Javascript（使用JQuery）：

```
$(function(){
    $("a.ajax_link").click(function(e){
        ajaxLink(this, e);
    });
});

function ajaxLink(item, e) {
    var container = $("#ajax_container_wrapper");
    var link;

    if (e != null) {
        e.preventDefault();
    }
    link = $(item).attr("href") + " #ajax_container_wrapper"; //Omit the  + " #ajax_container_wrapper"; if you want to drag all the content in.
    container.load(link);
} 
```

并且有：

```
<div id="ajax_container_wrapper"></div> 
```

您希望新页面出现的位置。

这基本上会将每个链接中指定的新页面加载到 div 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:52:16.733

好吧，也许迈出了一步——你的代码在改变页面的意义上是有效的。但据我所知，整个页面仍在重新加载，而不仅仅是我努力做的主要内容区域。

我所做的是，我将您在母版页中提供的 javascript 代码原样放置。

**编辑**刚刚意识到java函数似乎没有被调用。所以锚提供了“标准”功能，这可能是一个线索:-)我怎样才能使javascript被调用（如下所述，也来自后面的代码）？我留下这个答案的其余部分只是为了检查其他错误。**/编辑**

然后我在左侧导航菜单的底部放置了两个锚点（仍在母版页中）

```
<div id="navcol">

    <%-- other left menu stuff --%>

    <a href="../ContentPages/FutureStartPage.aspx" class="ajax_link">Link 1</a>
    <a href="../ContentPages/BusCoachStartPage.aspx" class="ajax_link">Link 2</a>

</div> 
```

我将目标 div 放在主要内容部分，也在母版页中。我还测试了 div id="ajax_container_wrapper" 在 contentplace holder 内和 contentplaceholder 在 div id="ajax_container_wrapper" 内，不幸的是我发现行为没有区别。

```
<div id="contentcol" runat="server">
    <div id="mpcpholder">
        <asp:ContentPlaceHolder ID="ContentPlaceHolderMainArea" runat="server">
        </asp:ContentPlaceHolder>
    </div>
    <div id="ajax_container_wrapper"></div>
</div> 
```

我也试图省略 ContentPlaceHolder 但这似乎是不允许的；它给出了一个解析器错误。

所以可能我做错了什么，但很明显整个页面正在重新加载，包括顶部和左侧菜单。

还; 如果我让它只重新加载主要内容区域；我需要从例如树视图链接以及更重要的代码后面执行此操作。我也会很感激一些关于如何做到这一点的建议。

谢谢/DT

# exception - jrmp 连接建立期间的 jconsole 错误嵌套异常是：java.io.EOFException

> ID：13741211
> 
> 赞同：10
> 
> 时间：2012-12-06T10:06:09.320
> 
> 标签：exception, process, jconsole

我正在尝试使用 jconsole 监视远程进程，这是我使用的命令

```
jconsole -debug localhost:4080 
```

这是我得到的堆栈跟踪

```
java.rmi.ConnectIOException: error during JRMP connection establishment; nested exception is: 
    java.io.EOFException
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:286)
    at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:184)
    at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:322)
    at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
    at sun.tools.jconsole.ProxyClient.checkSslConfig(ProxyClient.java:217)
    at sun.tools.jconsole.ProxyClient.<init>(ProxyClient.java:110)
    at sun.tools.jconsole.ProxyClient.getProxyClient(ProxyClient.java:463)
    at sun.tools.jconsole.JConsole$3.run(JConsole.java:510)
Caused by: java.io.EOFException
    at java.io.DataInputStream.readByte(DataInputStream.java:250)
    at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:228) 
```

如果我将进程的 pid 提供给 jconsole，它能够成功附加。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T10:34:25.173

我们必须配置 tomcat 以允许远程进程连接到它以进行监视

本质上补充说，

```
CATALINA_OPTS="-Djava.awt.headless=true -Xmx128M -server -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=7091 -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false" 
```

这将告诉 tomcat 它将从（例如）jconsole 通过端口 7091 远程监控。

然后开始 jconsole

```
jconsole localhost:7091 
```

现在 jconsole 连接成功。

# iphone - 具有不同 tableview 标签的 tableview 问题

> ID：13741215
> 
> 赞同：0
> 
> 时间：2012-12-06T10:06:28.747
> 
> 标签：iphone, objective-c, ios, uitableview

我的表格视图有问题。让我先概述一下情况。我对顶部有一个看法`2 buttons`（日历和排名）。在这两个按钮下方，我有一个表格视图。当我按下一个按钮时，我设置`tableview's tag ( 1 or 2 )`并重新加载 tableview 的数据。

在我的排名中，我将一个特定单元格的文本颜色设为蓝色。但是当我刷新时，其他单元格的文本变蓝了。

现在`cellForRowAtIndex`我有很多代码。因为我不确切知道问题出在哪里，所以我将在这里发布所有代码。我希望你不要打扰。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //standard cell
    static NSString *simpleTableIdentifier = @"KalenderCell";
    KalenderCell *cell = (KalenderCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if ((cell == nil) || (![cell isKindOfClass:KalenderCell.class]))
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"KalenderCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    //Cells for button 2
    if(self.tableView.tag == 2){
        static NSString *simpleTableIdentifier = @"KlassementCell";

        KlassementCell *cell = (KlassementCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
        if ((cell == nil) || (![cell isKindOfClass: KlassementCell.class]))
        {
            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"KlassementCell" owner:self options:nil];
            cell = [nib objectAtIndex:0];
        }

        Klassement *klassement = [self.fetchedResultsController objectAtIndexPath:indexPath];
        NSData *dataIcon = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:klassement.icon]];
        UIImage *imgIcon = [UIImage imageWithData:dataIcon];

        cell.lblPosition.text       = klassement.position;
        cell.lblName.text           = klassement.name;
        cell.lblgamesPlayed.text    = klassement.gamesPlayed;
        cell.lblGamesWon.text       = klassement.gamesWon;
        cell.lblGamesTied.text      = klassement.gamesTied;
        cell.lblGamesLost.text      = klassement.gamesLost;
        cell.lblGoalsPos.text       = klassement.goalsPos;
        cell.lblGoalsNeg.text       = klassement.goalsNeg;
        cell.lblGoalsDiff.text      = [NSString stringWithFormat:@"%@", klassement.goalsDiff];
        cell.lblPoints.text         = klassement.points;
        cell.imgClub.image          = imgIcon;

        if([klassement.name isEqualToString:@"KRC Genk"]){
            cell.lblPosition.textColor      = [UIColor colorWithRed:(56/255.0) green:(119/255.0) blue:(189/255.0) alpha:100] ;
            cell.lblName.textColor          = [UIColor colorWithRed:(56/255.0) green:(119/255.0) blue:(189/255.0) alpha:100] ;
            cell.lblgamesPlayed.textColor   = [UIColor colorWithRed:(56/255.0) green:(119/255.0) blue:(189/255.0) alpha:100] ;
            cell.lblGamesTied.textColor     = [UIColor colorWithRed:(56/255.0) green:(119/255.0) blue:(189/255.0) alpha:100] ;
            cell.lblGamesLost.textColor     = [UIColor colorWithRed:(56/255.0) green:(119/255.0) blue:(189/255.0) alpha:100] ;
            cell.lblGoalsDiff.textColor     = [UIColor colorWithRed:(56/255.0) green:(119/255.0) blue:(189/255.0) alpha:100] ;
            cell.lblGoalsNeg.textColor      = [UIColor colorWithRed:(56/255.0) green:(119/255.0) blue:(189/255.0) alpha:100] ;
            cell.lblGoalsPos.textColor      = [UIColor colorWithRed:(56/255.0) green:(119/255.0) blue:(189/255.0) alpha:100] ;
            cell.lblPoints.textColor        = [UIColor colorWithRed:(56/255.0) green:(119/255.0) blue:(189/255.0) alpha:100] ;
            cell.lblGamesWon.textColor      = [UIColor colorWithRed:(56/255.0) green:(119/255.0) blue:(189/255.0) alpha:100] ;
            return cell;
        }

        return cell;

        //Cells for button 1
    }else if(self.tableView.tag == 1){
        static NSString *simpleTableIdentifier = @"KalenderCell";

        KalenderCell *cell = (KalenderCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
        if ((cell == nil) || (![cell isKindOfClass:KalenderCell.class]))
        {
            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"KalenderCell" owner:self options:nil];
            cell = [nib objectAtIndex:0];
        }

        Kalender *kalender = [self.fetchedResultsController objectAtIndexPath:indexPath];

        NSData *imgDataHome = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:kalender.homeIcon]];
        NSData *imgDataAway = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:kalender.awayIcon]];

        UIImage *imgHome = [UIImage imageWithData:imgDataHome];
        UIImage *imgAway = [UIImage imageWithData:imgDataAway];

        // Then configure the cell using it ...
        if([kalender.type isEqualToString:@"JPL"]){
            _imgType = [UIImage imageNamed:@"jupiler.png"];
        }else if ([kalender.type isEqualToString:@"EU"]){
            _imgType = [UIImage imageNamed:@"europa.jpg"];
        }else {
            _imgType = nil;
        }

        cell.lblHome.text           = kalender.home;
        cell.lblHomeScore.text      = kalender.homeScore;
        cell.lblAwayScore.text      = kalender.awayScore;
        cell.lblAway.text           = kalender.away;
        cell.lblDate.text           = kalender.date_text;
        cell.lblHour.text           = kalender.hour;
        cell.img_Home.image         = imgHome;
        cell.img_Away.image         = imgAway;
        cell.img_type.image         = _imgType;

        return cell;
    }

    return cell;

} 
```

另一个问题是，有时单元格会在 tableview 内复制 2 或 3 次，但是当我刷新它们时，它们的 tableview 又可以了。

我知道这是很多代码。但我希望你愿意帮助我！

亲切的问候，并提前非常感谢！

**有问题的屏幕**

![在此处输入图像描述](../Images/a21804dbf8ec4282c92e19f2b11a4973.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:16:05.790

在创建新单元格的 else 部分添加以下行：

```
[cell.contentView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

[你可以在这里](https://stackoverflow.com/questions/12934364/duplicating-subviewsuibutton-and-uiimageview-of-uitableviewcell-contentview-on)看到我的答案

试试这个：

```
if ((cell == nil) || (![cell isKindOfClass:KalenderCell.class]))
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"KalenderCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
}
else
{
   [cell.contentView.subviews makeObjectsPerformSelector:@selector(removeFromSuperview)];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:10:00.173

在波纹管条件下，您设置蓝色

```
 if([klassement.name isEqualToString:@"KRC Genk"]){
      /// set blue color 
    } 
```

因为它添加了黑色的其他部分

像下面...

```
 else{
            cell.lblPosition.textColor      = [UIColor blackColor] ;
            cell.lblName.textColor          = [UIColor blackColor] ;
            cell.lblgamesPlayed.textColor   = [UIColor blackColor] ;
            cell.lblGamesTied.textColor     = [UIColor blackColor] ;
            cell.lblGamesLost.textColor     = [UIColor blackColor] ;
            cell.lblGoalsDiff.textColor     = [UIColor blackColor] ;
            cell.lblGoalsNeg.textColor      = [UIColor blackColor] ;
            cell.lblGoalsPos.textColor      = [UIColor blackColor] ;
            cell.lblPoints.textColor        = [UIColor blackColor] ;   
            cell.lblGamesWon.textColor      = [UIColor blackColor] ;
            return cell;
         } 
```

# java - 从未知图形中检测圆

> ID：13741216
> 
> 赞同：2
> 
> 时间：2012-12-06T10:06:29.287
> 
> 标签：java, detection, geometry

我正在开发一个可以绘制节点和边缘图的系统。我正在使用 Java 画布，所以我可以让用户在程序上自由手绘他们想要的一切。是否有一种算法可以检查我从中得到的点的数组列表，以检查线是否更接近圆或线？目前我只是检查是否有任何点（除了它本身）等于同一点来对圆进行分类。我敢肯定有更好的方法来检测一个圆圈。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:59:47.760

一般的技巧 -**使用向量和角度进行分类，而不是单个点**。这是许多交互式文本识别系统所基于的技术。

在您的情况下，概率较高的封闭图形是圆圈。

因此，如果您可以跟踪用户的连续绘图移动，只需将绘图移动的每个向量推入堆栈即可。

之后，您所需要的只是计算堆栈中向量之间的角度之和（注意，角度的符号取决于[伪标量积](http://en.wikipedia.org/wiki/Cross_product)的符号）。如果总和接近`pi`- 这意味着该数字是一个圆圈，否则 - 线

**PS**跟踪**连续绘图移动的**提示- 只需计算连续拖动和单击之间的**延迟**

![在此处输入图像描述](../Images/8347336ee3894fbd8f498cbf3ca1e5fa.png)

# qml - Blackberry 10 级联 qml 方法

> ID：13741217
> 
> 赞同：0
> 
> 时间：2012-12-06T10:06:30.630
> 
> 标签：qml, blackberry-10, blackberry-cascades

当我单击从一个 qml 布局到另一个 qml 的按钮时，如何加载方法？如果我单击按钮，则有一个编辑配置文件按钮意味着我想显示值，我从网络服务获得如何做到这一点？任何人都可以发送一些想法。？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T07:12:56.920

你需要实现这个 onCreationCompleted 方法

```
 onCreationCompleted: {
   // call the function, that you need to show first
   // first_display()
   } 
```

希望这可以帮助。！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T02:56:44.187

听起来您正试图将从 Web 服务检索到的数据从一个 QML 视图传递到另一个。导航窗格，您可以在其中使用`createObject()`.qml 文件构建 UI 屏幕并将新屏幕（页面）推送到导航窗格的视图堆栈上，您的数据可访问新创建的可见页面的 UI 是我认为更具体的描述，以及执行此操作的常用方法。

为了传递您的数据，请在“profileview”QML 页面的根对象（页面、容器）上声明一个属性。然后，在按钮`onClicked()`函数的第一个 QML 文件中`createObject()`，将 QML 定义的结果分配给变量。然后，您可以使用此变量将您的数据分配给“profileview”页面上的属性。你的按钮看起来像这样：

```
// Assume you have a Navigation Pane called navPane
// You also have to define a component for your QML file
Button {
  text: "View profile"
  onClicked: {
    var profilePage = profileDefinition.createObject();
    profilePage.myData = webserviceData;
    navPane.push(profilePage);
  }
  attachedObjects: [
    ComponentDefinition {
      id: profileDefinition
      source: "profilePage.qml"
    }
  ]
} 
```

下面是基于 Navigation Pane Cascades 示例项目的更详细的完整示例：

main.qml

```
// Navigation pane project template
import bb.cascades 1.0

NavigationPane {
id: navPane

// This property holds and tracks the created profile page
property Page profilePage

/* This property holds some sample webservice data, in practice 
 * you would load this from the webservice
 */
property variant webserviceData: {
    "name": "John Doe",
    "email": "john.doe@stackoverflow.com",
    "twitter": "@johndoe"
}
Page {
    // page with a button to display profile
    Container {
        layout: DockLayout {
        }
        Label {
            horizontalAlignment: HorizontalAlignment.Center
            verticalAlignment: VerticalAlignment.Top
            text: webserviceData.name
        }
        Button {
            horizontalAlignment: HorizontalAlignment.Center
            verticalAlignment: VerticalAlignment.Center
            text: qsTr("Show Profile")
            onClicked: {
                // show detail page when the button is clicked
                profilePage = profileDefinition.createObject();
                profilePage.myProfileData = webserviceData;
                navPane.push(profilePage);
            }
            attachedObjects: [
                ComponentDefinition {
                    id: profileDefinition
                    source: "profilePage.qml"
                }
            ]
        }
    }
}
onPopTransitionEnded: {
    // Clean up any pages that have been popped, to avoid memory leaks
    if (profilePage == page) {
        page.destroy();
    }
}
} 
```

profilePage.qml

```
// Navigation pane project template
import bb.cascades 1.0

Page {

/* Our data property
 * Note: A variant is a QVariant Qt type, so it can easily handle different 
 * data types, in our case it is a map.
 * Without the braces to denote that it is an object you will get a TypeError
 * from QML at runtime 
 */
property variant myProfileData: { /*empty object*/ }

// page with profile details
paneProperties: NavigationPaneProperties {
    backButton: ActionItem {
        onTriggered: {
            // Pop this page off the stack and go back
            navPane.pop();
        }
    }
}
Container {
    Label {
        text: qsTr("Profile Page")
        horizontalAlignment: HorizontalAlignment.Center
        textStyle {
            base: SystemDefaults.TextStyles.TitleText
            color: Color.Blue
        }
    }
    Label {
        text: "Name:"
        horizontalAlignment: HorizontalAlignment.Left
    }
    TextField {
        text: myProfileData.name
        horizontalAlignment: HorizontalAlignment.Center
    }
    Label {
        text: "Email:"
        horizontalAlignment: HorizontalAlignment.Left
    }
    TextField {
        text: myProfileData.email
        horizontalAlignment: HorizontalAlignment.Center
    }
    Label {
        text: "Twitter:"
        horizontalAlignment: HorizontalAlignment.Left
    }
    TextField {
        text: myProfileData.twitter
        horizontalAlignment: HorizontalAlignment.Center
    }
}
} 
```

希望这可以帮助您继续前进。此外，GitHub 上的这些示例项目可能会有所帮助：

[https://github.com/blackberry/Cascades-Samples/tree/master/quotes](https://github.com/blackberry/Cascades-Samples/tree/master/quotes)

[https://github.com/blackberry/Cascades-Samples/tree/master/weatherguesser](https://github.com/blackberry/Cascades-Samples/tree/master/weatherguesser)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T22:59:15.310

如果我理解正确，您希望在单击按钮时执行操作。为此，您可以将该`onClicked`方法添加到`Button`QML 中的对象中。例子：

```
Button {
    text: "View profile"
    onClicked: {
        myProfileInfo.visible = true;
    }
}

Label {
    id: myProfileInfo
    text: "This is my profile"
    visible: false
} 
```

# angularjs - Angular JS 和部分

> ID：13741221
> 
> 赞同：32
> 
> 时间：2012-12-06T10:06:41.910
> 
> 标签：angularjs, partial, partials

是否可以在 Angular js 中将 html 页面嵌入到另一个页面中？

如果是这样，该怎么做？

[在他们的教程中](http://docs.angularjs.org/#!/tutorial/step_08)，部分没有嵌入到页面中，但它就像您单击其中一个项目时进入的不同页面。（[见演示](http://angular.github.com/angular-phonecat/step-8/app/#/phones)）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-06T10:46:30.417

是的，您可以使用**ngInclude**指令来做到这一点。

请参阅此处的文档和示例：[https ://docs.angularjs.org/api/ng/directive/ngInclude](https://docs.angularjs.org/api/ng/directive/ngInclude)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-27T21:48:44.967

@Wilt 是对的，但这里有一个更具体的链接和代码示例（来自[https://github.com/angular-ui/ui-router/wiki/Quick-Reference#ui-view](https://github.com/angular-ui/ui-router/wiki/Quick-Reference#ui-view)）

在您的根模板中：

```
<div ui-view></div>
<div ui-view="chart"></div> 
<div ui-view="data"></div> 
```

在你的 app.config 函数中

```
$stateProvider.state("home", {
    views: {
        "": {
            template: "<h1>Some HTML</h1>"
        },
        "chart": {
            templateUrl: "templates/chart.html"
        },
        "data": {
            template: "<data_thing/>"
        }
    }    
}) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-20T10:03:24.510

如果`ng-include`不是您需要的，您可能需要查看**angular-ui-router**模块。它允许您执行嵌套和并行视图......它很棒，灵活，易于使用并且有据可查。 [https://github.com/angular-ui/ui-router](https://github.com/angular-ui/ui-router)

# windows-phone-7 - SIP 键盘有时不显示？

> ID：13741223
> 
> 赞同：0
> 
> 时间：2012-12-06T10:06:43.277
> 
> 标签：windows-phone-7, textbox, keyboard, show, soft-keyboard

我的`TextBox`Windows Phone 7 页面中有一个。当我触摸它时，有时 SIP 键盘不显示。我在我的 C900 手机上遇到了这个问题。

不知道是WP7的问题，还是我手机的问题。如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:00:04.620

可能您的屏幕上涂了油脂，需要清洁，或者您可能将 TextBox 控件的大小调整得太小。两个都试试，希望不是硬件相关的问题。

# java - 不同类型对象的遍历树

> ID：13741227
> 
> 赞同：0
> 
> 时间：2012-12-06T10:07:09.043
> 
> 标签：java, object, tree

例如，我有一棵由不同类型的对象组成的树

```
 Tree
    |  \
  apple  cat
    |  \
  dog  grass
        |   \
       door something 
```

例如，我可以使用 Tree.getApple().getGrass().getSomething() 访问对象，在每个 getter 上我必须检查节点是否存在。问题是我使用的结构非常大，我想要一个实用程序类来加速它。

我只想给出对象的名称，以便能够从结构中提取它。例如，有一个方法，在我给Something.class作为参数后遍历结构，如果它存在则返回对象，否则返回null。（我不能在结构中多次出现一个类，即我只能有一个苹果对象）

那可能吗？我可以用什么来实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:13:08.593

实现一个遍历这三者的访问者，并在访问者中实现过滤器。

大致：

```
 public class LeafSearching {

    private final Class typeToFind;

    private Object result;

    public LeafSearching(Class typeToFind) {
        this.typeToFind = typeToFind;
    }

    public void visit(Node node) {
        if (typeToFind.isAssignableFrom(node.getClass())){
            result = node;
            return;
        }

        for (Node child : node.getChildren()) {
            child.accept(this);
        }
    }
}

interface Node {

    boolean hasChildren();

    List<Node> getChildren();

    void accept(LeafSearching ls);
}

class Apple implements Node {
    //...
}

class Cat implements Node {
    // ...
}

class TreeRoot implements Node {

    private Apple apple;

    private Cat cat;

    public Apple getApple() {
        return apple;
    }

    public Cat getCat() {
        return cat;
    }

    @Override
    public boolean hasChildren() {
        return false;
    }

    @Override
    public List<Node> getChildren() {
        final List<Node> children = new ArrayList<Node>;

        if (getApple() != null) {
            children.add(this.apple);
        }

        if (getCat() != null) {
            children.add(this.cat);
        }

        return children;
    }

    public void accept(LeafSearching ls) {
        ls.visit(this);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:15:40.577

我认为答案是继承。

为所有类型的节点创建一个名为树节点的类。这将作为一个超级类工作。对于所有实际类型，例如苹果、草或其他东西，请创建自己的类来扩展树节点类。在遍历方法中，您可以使用 instanceof 方法检查每个节点的类型以找到所需的节点类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:30:18.857

如上所述，我认为您正在尝试做的事情可以通过几种不同的方式实现；您可以使用继承，您可以使用[访问者模式](http://java.dzone.com/articles/design-patterns-visitor)（也许如果您使用的是 Eclipse，则可以像 Eclipse ASTVisitor 的工作方式一样使用它）。

我想说您还可以使用声明 getChild(name) 之类的方法的接口来检查您正在搜索的类的名称并遍历树。

在我看来，这里的底线是，你只需要选择你想做的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:14:47.347

我不确定您是如何遍历该数据的，但[`instanceof`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)在检查特定类时是否需要此处的运算符。然后调用相应的方法。

# delphi - Delphi7 导出 B-TreeFiler 数据库值

> ID：13741231
> 
> 赞同：2
> 
> 时间：2012-12-06T10:07:30.257
> 
> 标签：delphi, delphi-7

我正在尝试从 btreefiler 数据库中导出一些值。不幸的是，这些值里面有一些奇怪的字符。我正在使用 Delphi 7 和最新的库。

以下是该值的示例：

```
#0#0#0#0#0#0#0#0##0#0#0#0##0#0#0#0'14-19/32mm'#0#0#0#0#0#0#0#0$1A'2'#3#0#0#0#0#0 
```

有谁知道是什么导致了这个问题或如何摆脱它？

提前致谢，

约翰

# vim - 如何在 Vim 中禁用退格键和删除键？

> ID：13741237
> 
> 赞同：11
> 
> 时间：2012-12-06T10:07:48.647
> 
> 标签：vim

我想用 Vim 代替 PyRoom/TextRoom 进行无干扰的写作。[这篇](https://stackoverflow.com/a/8484190/1768191)提到 VimRoom 的帖子已经可以告诉我如何获得大多数设置。

我只是想念如何启用 TextRoom 风格的流模式：

如何禁用退格键和删除键（不是 d$ 之类的快捷方式）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-06T10:26:21.703

您可以通过将它们映射到特殊`<Nop>`目标来禁用单个键：

```
:inoremap <BS> <Nop>
:inoremap <Del> <Nop> 
```

（假设您只想在插入模式下禁用它们。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-29T23:45:39.040

您可以在没有 vim 的情况下进行流程，方法是制作一个 shell 脚本，该脚本在原始模式下从 tty 读取并且不允许大多数控制字符，包括退格和 DEL，并回显两次：一次直接到终端，一次到标准输出，所以你可以将您的工作重定向到文件。

```
#!/bin/sh

saved_tty=$(stty -g < /dev/tty)

bail()
{
  stty $saved_tty < /dev/tty
  exit $?
}

trap bail EXIT INT

stty raw -echo < /dev/tty

while true ; do
  ch=$(dd bs=1 count=1 < /dev/tty 2> /dev/null)
  code=$(printf "%d" "'$ch")
  if [ $code -eq 4 ] ; then
    printf "\r\n" > /dev/tty
    printf "\n"
    break
  elif [ $code -eq 13 -o $code -eq 10 ] ; then
    printf "\r\n" > /dev/tty
    printf "\n"
  elif [ $code -ge 32 -a $code -lt 127 ] ; then
    printf "%s" "$ch" > /dev/tty
    printf "%s" "$ch"
  fi
done 
```

将此另存为`flow`，`chmod a+x flow`然后：

```
$ flow > file.txt
Backspace and del not allowed
here just type and type.
Then hit Ctrl-D when you're done; no Enter
required.

$ flow
ffoorrggoott  ttoo  rreeddiirreecctt!! 
```

如果您需要一个空白屏幕，请`clear`首先或将屏幕清除添加到脚本中。

# vb.net - 跟进将组合框中的信息写入文本文件

> ID：13741238
> 
> 赞同：-1
> 
> 时间：2012-12-06T10:07:49.273
> 
> 标签：vb.net, combobox, streamwriter

参考这个帮助主题

[将信息从组合框写入文本文件](https://stackoverflow.com/questions/6352588/writing-information-from-combo-box-to-text-file)

我不知道如何让它在每个条目后不**添加空格**

例如

约翰玛丽乔

代替

约翰_玛丽_乔_

我如何得到它只是写条目

有问题的代码

```
Dim sb as new StringBuilder()

For Each item As Object In cmbworld.Items
    'Dim test As String
    'test = item
    sb.AppendFormat("{0} {1}", item, Environment.NewLine)
Next

Dim FILE_NAME As String = "D:\Documents\test.txt"
If System.IO.File.Exists(FILE_NAME) = True Then
Dim objWriter As New System.IO.StreamWriter(FILE_NAME)
objWriter.Write(sb.ToString()) 'Use the stringbuilder here
objWriter.WriteLine()
objWriter.Close()
    MsgBox("Text written to file")
Else
    MsgBox("File Does Not Exist")
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:26:35.230

去掉这里的空格：

```
sb.AppendFormat("{0} {1}", item, Environment.NewLine) 
```

所以你有了：

```
sb.AppendFormat("{0}{1}", item, Environment.NewLine) 
```

# javascript - 访问 div 的所有图像并显示未定义或没有 src 的图像的计数

> ID：13741239
> 
> 赞同：1
> 
> 时间：2012-12-06T10:07:50.427
> 
> 标签：javascript, image, html, src

我想访问特定 div 中的所有图像，例如

```
<div id="mydiv">
 <div id="mydiv1">
  <img  src="pic.jpg">
  <img  src="pic.jpg">
  <img  src="">`enter code here`
 </div>
 <div id="mydiv2">
  <img href="#">
  <img  src="pic.jpg">
  <img  src="">
 </div>
</div> 
```

它是一个动态页面，我需要做的是从此 div 获取所有图像的 src 并检查哪个图像在其 src 中没有图像链接，并根据此显示警报

我是java脚本新手，请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:18:45.510

```
var imgs = document.getElementById('mydiv').getElementsByTagName('img');
var countImagesWithoutSrc = 0;

var curImg;
for(var i = 0; i < imgs .length; i++) {
  curImg = imgs[i];

  if(!curImg.src || !curImg.src.length) {
    ++countImagesWithoutSrc;
  }
}

alert(countImagesWithoutSrc); //gives you the number of images missing a src attribute 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:11:23.290

```
var images = document.getElementById('mydiv').getElementsByTagName('img');
var emptyimg = [];
for(var i = 0; i < images.length; i++){
    if(images[i].src=="")
        emptyimg.push(images[i]);
} 
```

引用您的评论：

> 是的，我需要计算空白 src 图像

要查找具有空 src 属性的图像的数量：

```
var count = 0
for(var i = 0; i < images.length; i++){
    if(images[i].src)
        count++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:12:40.327

首先添加 jQuery 库并写下以下代码以找出图像数量。

```
var imageCount = 0;
$(document).ready(function(){
   $('div').children('img').each(function(index,item){
       if($(this).attr('src') == "" || $(this).attr('src') == undefined)
       {
           count++;
       }
   });
   alert(count);
}); 
```

如果您仅使用 javascript，请使用以下代码：-

```
 for(j=0;j < document.getElementsByTagName('img').length;j++)
                {
                    if(document.getElementsByTagName('img')[j].getAttribute('src') == "")
                    {
                        count++
                    }

                } 
```

请检查并让我知道这是否行不通，或者您是否想要除此之外的其他东西。

问候杜尔加普拉萨德

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:10:35.623

您的 html 代码不是很清楚，除非它们是带有 html 扩展名的 jpeg 文件，否则您不能将带有 html 文件的 img 作为源

```
<img src="somepage.html"> 
```

如果你想链接它们，你需要和锚标签
，这
`<a href="somepage.html" ><img src="picsrc.jpg"></a>`
可能是它的原因

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T10:12:53.290

首先了解 jQuery，您可以在其中使用如下内容：

```
$('img').each(function(index) {
    alert(index + ': ' + $(this).text());
}); 
```

# batch-file - 批处理脚本命令只起作用一次，循环不起作用

> ID：13741241
> 
> 赞同：0
> 
> 时间：2012-12-06T10:07:56.710
> 
> 标签：batch-file

我正在为一个为每个用户创建主文件夹的网络制作一个简单的脚本。让用户 + 将他们放在正确的组中效果很好，但是一旦我添加了主文件夹部分，它只会执行一次。这个脚本在另一个脚本中被调用了 9 次，但它只运行一次。

```
rem ****** %1 username
rem ****** %2 password
rem ****** %3 group

net user %1 %2 /ADD 
net user %1 /logonpasswordchg:no 
net user %1 /active:yes 
net user %1 /expires:NEVER 
net user %1 /times:M-F,8-18
net user %1 /passwordchg:no

net group %3 %1 /add

C:
cd \School\Homefolders\Leerlingen
md %1
echo Y| cacls C:\School\Homefolders\Leerlingen\%1 /G %1:C administrators:F
cd..
cd..
cd..
cd..
C: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:38:28.820

我刚刚创建了一个类似的示例，并且由于更改目录而导致了相同的问题。您还有一个额外的“cd ..”语句。尝试使用以下内容：

```
md C:\School\Homefolders\Leerlingen\%1
echo Y| cacls C:\School\Homefolders\Leerlingen\%1 /G %1:C administrators:F 
```

我还假设它会被多次调用，因为您记得在调用该语句的批处理文件中使用调用语句。

# c - 使用C问题在线程之间传递数据

> ID：13741243
> 
> 赞同：6
> 
> 时间：2012-12-06T10:08:00.760
> 
> 标签：c, multithreading

我想知道如何使用**C**语言在线程之间传递数据。

例如：X 等待来自某处的消息。
Y 向 TX 发送有关事件的消息并等待响应。
TX 处理该事件并向 TY 发送响应。
TX 等待另一个消息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T10:24:56.717

a sample program taken from [https://computing.llnl.gov/tutorials/pthreads/#Mutexes](https://computing.llnl.gov/tutorials/pthreads/#Mutexes) and modified. This shows, how to use a globally declared data in multiple threads.

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>

/*   
The following structure contains the necessary information  
to allow the function "dotprod" to access its input data and 
place its output into the structure.  
*/

typedef struct 
 {
   double      *a;
   double      *b;
   double     sum; 
   int     veclen; 
 } DOTDATA;

/* Define globally accessible variables and a mutex */

#define NUMTHRDS 4
#define VECLEN 100

DOTDATA dotstr; //GLOBAL DATA which is going to be accessed by different threads

pthread_t callThd[NUMTHRDS];
pthread_mutex_t mutexsum;

void *dotprod(void *arg)
{

   /* Define and use local variables for convenience */

   int i, start, end, len ;
   long offset;
   double mysum, *x, *y;
   offset = (long)arg;

   len = dotstr.veclen;
   start = offset*len;
   end   = start + len;
   x = dotstr.a;
   y = dotstr.b;

   /*
   Perform the dot product and assign result
   to the appropriate variable in the structure. 
   */

   mysum = 0;
   for (i=start; i<end ; i++) 
    {
      mysum += (x[i] * y[i]);
    }

   /*
   Lock a mutex prior to updating the value in the shared
   structure, and unlock it upon updating.
   */
   pthread_mutex_lock (&mutexsum);
   dotstr.sum += mysum;
   pthread_mutex_unlock (&mutexsum);

   pthread_exit((void*) 0);
}

int main (int argc, char *argv[])
{
   long i;
   double *a, *b;
   void *status;    

   /* Assign storage and initialize values */
   a = (double*) malloc (NUMTHRDS*VECLEN*sizeof(double));
   b = (double*) malloc (NUMTHRDS*VECLEN*sizeof(double));

   for (i=0; i<VECLEN*NUMTHRDS; i++)
    {
     a[i]=1.0;
     b[i]=a[i];
    }

   dotstr.veclen = VECLEN; 
   dotstr.a = a; 
   dotstr.b = b; 
   dotstr.sum=0;

   pthread_mutex_init(&mutexsum, NULL);             

    for(i=0; i<NUMTHRDS; i++)
        {
    /* 
    Each thread works on a different set of data.
    The offset is specified by 'i'. The size of
    the data for each thread is indicated by VECLEN.
    */
    pthread_create(&callThd[i], NULL, dotprod, (void *)i);
    }    

    /* Wait on the other threads */
for(i=0; i<NUMTHRDS; i++)
    {
  pthread_join(callThd[i], &status);
}    

   printf ("Sum =  %f \n", dotstr.sum);
   free (a);
   free (b);
   pthread_mutex_destroy(&mutexsum);
   pthread_exit(NULL);//No need of pthread_join() if pthread_exit() used.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:15:03.777

线程共享相同的内存空间，因此您可以使用普通变量在线程之间共享数据。

您还提到线程等待某个事件，这是另一个故事 - 同步。为此，您可以使用互斥锁。

# ajax - 未捕获的 TypeError：非法调用错误

> ID：13741249
> 
> 赞同：2
> 
> 时间：2012-12-06T10:08:42.447
> 
> 标签：ajax, backbone.js

我正在尝试使用 jquery 发布 ajax 请求。它会导致错误：###Uncaught TypeError: Illegal invocation jquery-1.8.3.min.js:2###

```
CheckLogin: function (user, pword){
    var data = new FormData();
    data.append('UserName', user);
    data.append('Password', pword);
    $.ajax({
        url: 'RegisterSuccess',
        type: 'POST',
        data: data,
        processData: true,
        cache: false,
        contentType: false
    })
    .done(function () {
        console.log(user + " login back");
    })
    .fail(function () {
        self.showAlert('Error!', 'An error occurred while uploading ' + user, 'alert-error');
    });

} 
```

我不明白有什么问题。谁能帮忙？？

# c# - 圈复杂度数为 31，这是从哪里来的？

> ID：13741251
> 
> 赞同：7
> 
> 时间：2012-12-06T10:08:46.400
> 
> 标签：c#, code-analysis, fxcop, cyclomatic-complexity

我正在开发一个从 Excel 文件中提取数据的应用程序（我无权访问实际数据库），并且我编写了一个方法，该方法具有从 Excel 电子表格中提取数据的唯一功能，如下所示.

```
private IEnumerable<SMEntity> ExtractSMData(List<MSExcel.Range> SMData)
{
    List<SMEntity> SMEntities = new List<SMEntity>();

    foreach (MSExcel.Range Row in SMData)
    {
        SMEntity entity = new SMEntity();
        entity.IncidentNumber = Row.get_Range("K1").get_Value();
        entity.SRNumber = Row.get_Range("L1").get_Value();
        entity.SRCategory = Row.get_Range("M1").get_Value();
        entity.SiebelClientCall = EntityConversions.DateTimeConversion(Row.get_Range("N1").get_Value());
        entity.SiebelOpenedDate = EntityConversions.DateTimeConversion(Row.get_Range("O1").get_Value());
        entity.IncidentOpenDate = EntityConversions.DateTimeConversion(Row.get_Range("P1").get_Value());
        entity.PickedUpBeforeClient = Row.get_Range("Q1").get_Value().ToString().ToLowerCase() == "no" ? false : true;
        entity.OutageStartTime = EntityConversions.DateTimeConversion(Row.get_Range("R1").get_Value());
        entity.DetectionPoint = EntityConversions.DateTimeConversion(Row.get_Range("S1").get_Value());
        entity.SecondsToDetection = EntityConversions.ConvertDetectionTimeToInt(Row.get_Range("T1").get_Value());
        entity.OutageEndTime = EntityConversions.DateTimeConversion(Row.get_Range("U1").get_Value());
        entity.MTTR = EntityConversions.ConvertMTTRStringToInt(Row.get_Range("V1").get_Value());
        entity.RepairedOnTime = Row.get_Range("W1").get_Value().ToString().ToLowerCase() == "no" ? false : true;
        SMEntities.Add(entity);
    }

    return SMEntities;
} 
```

我已经运行了代码分析（我正在使用 Visual Studio 2012 并在 .NET 4.5 中开发）并且我有一个`CA1502: Avoid excessive complexity`（复制如下）。作为一名初级开发人员（我今年 17 岁），我尝试使用 MSDN 了解更多有关此内容的信息，但是，我对为什么我的圈复杂度为 33 感到有些困惑。

> CA1502
> 
> 避免过度复杂
> 
> `'Extraction.ExtractSMData(List<Range>)'`圈复杂度为 33。重写或重构方法以将复杂度降低到 25。
> 
> `Core.Extraction.cs:104`

我可以通过我的快速如果（`condition ? if_true : if_false`，这些叫什么？）看到它可能很糟糕，但我仍然只能将其视为 5。

**更新**：

圈复杂度现在是 33...

如果我注释掉`entity.IncidentNumber = Row.get_Range("K1").get_Value();`复杂性变为 32。我认为`get_Range()`并且`get_Value()`每个人都是一个，但还好......

如果我注释掉`entity.RepairedOnTime = Row.get_Range("W1").get_Value().ToString().ToLower() == "no" ? false : true;`复杂度变成 28 ......

`get_Range()`, `get_Value()`, quick-if 是 3，做`ToString()`和数`ToLower()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:28:00.593

我将方法本身、`foreach`和两个条件运算符的复杂度计算为总共 4 个。如果 13 次调用中的每一个`get_Range`都值得 +1 复杂度，并且 13 次调用中的每一个`get_Value`都值得 +1 复杂度，那么总复杂度将加起来为 30（仍然是 1 短，但接近）。我不确定为什么这两个函数会增加复杂性，但这似乎是合理的。

尝试删除其中一条调用`get_Range`并`get_Value`查看圈复杂度是否下降到 29。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T13:42:09.397

您的返回类型是 IEnumerable，所以不要使用列表。这使得 IENumerable 毫无用处。否则你不使用 Lazy-Evaluation 请参阅：http: [//blogs.msdn.com/b/pedram/archive/2007/06/02/lazy-evaluation-in-c.aspx](http://blogs.msdn.com/b/pedram/archive/2007/06/02/lazy-evaluation-in-c.aspx)

最好使用 yield return ：

```
private IEnumerable<SMEntity> ExtractSMData(List<MSExcel.Range> SMData)
{
    foreach (MSExcel.Range Row in SMData)
    {
        SMEntity entity = new SMEntity();

        entity.IncidentNumber = Row.get_Range("K1").get_Value();
        entity.SRNumber = Row.get_Range("L1").get_Value();
        entity.SRCategory = Row.get_Range("M1").get_Value();
        entity.PickedUpBeforeClient = !Row.get_Range("Q1").get_Value().ToString().ToLowerCase() == "no"
        entity.RepairedOnTime = !Row.get_Range("W1").get_Value().ToString().ToLowerCase() == "no"

        entity.SiebelClientCall = EntityConversions.DateTimeConversion(Row.get_Range("N1").get_Value());
        entity.SiebelOpenedDate = EntityConversions.DateTimeConversion(Row.get_Range("O1").get_Value());
        entity.IncidentOpenDate = EntityConversions.DateTimeConversion(Row.get_Range("P1").get_Value());
        entity.OutageStartTime = EntityConversions.DateTimeConversion(Row.get_Range("R1").get_Value());
        entity.DetectionPoint = EntityConversions.DateTimeConversion(Row.get_Range("S1").get_Value());
        entity.OutageEndTime = EntityConversions.DateTimeConversion(Row.get_Range("U1").get_Value());

        entity.MTTR = EntityConversions.ConvertMTTRStringToInt(Row.get_Range("V1").get_Value());
        entity.SecondsToDetection = EntityConversions.ConvertDetectionTimeToInt(Row.get_Range("T1").get_Value());

        yield return entity;
    }

} 
```

你也可以这样写：

```
private IEnumerable<SMEntity> ExtractSMData(List<MSExcel.Range> SMData)
{
    foreach (MSExcel.Range Row in SMData)
    {
        yield return new SMEntity 
        {

            IncidentNumber = Row.get_Range("K1").get_Value(),
            SRNumber = Row.get_Range("L1").get_Value(),
            SRCategory = Row.get_Range("M1").get_Value(),
            PickedUpBeforeClient = !Row.get_Range("Q1").get_Value().ToString().ToLowerCase() == "no"
            RepairedOnTime = !Row.get_Range("W1").get_Value().ToString().ToLowerCase() == "no"

            SiebelClientCall = EntityConversions.DateTimeConversion(Row.get_Range("N1").get_Value()),
            SiebelOpenedDate = EntityConversions.DateTimeConversion(Row.get_Range("O1").get_Value()),
            IncidentOpenDate = EntityConversions.DateTimeConversion(Row.get_Range("P1").get_Value()),
            OutageStartTime = EntityConversions.DateTimeConversion(Row.get_Range("R1").get_Value()),
            DetectionPoint = EntityConversions.DateTimeConversion(Row.get_Range("S1").get_Value()),
            OutageEndTime = EntityConversions.DateTimeConversion(Row.get_Range("U1").get_Value()),

            MTTR = EntityConversions.ConvertMTTRStringToInt(Row.get_Range("V1").get_Value()),
            SecondsToDetection = EntityConversions.ConvertDetectionTimeToInt(Row.get_Range("T1").get_Value())
        };
    }
} 
```

# xml - 如何判断 XSLT 将引用 XML 文件中的哪些属性/元素？

> ID：13741252
> 
> 赞同：1
> 
> 时间：2012-12-06T10:08:47.477
> 
> 标签：xml, xslt

我有一个 XSLT 正在处理的 XML 文件，以生成另一个 XML 文件。

是否有一种简单的方法可以了解 XSLT 将引用以生成输出文件的原始 XML 消息中的所有可能元素/属性？

如果我查看 w3school.com 网站 ( [http://www.w3schools.com/xsl/xsl_transformation.asp](http://www.w3schools.com/xsl/xsl_transformation.asp) ) 上的示例，那么目录 XML 包含价格和年份等项目，但 XSLT 只会拉目录/cd/标题和目录/CD/艺术家。

所以我需要某种~~自动化的魔法~~工具，它可以分析 xslt（可能是输入文件模式），为我提供输出文件将包含的某种属性列表。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:04:36.020

不过想象力很好！出色地。目前没有这样的工具可以分析 XSLT 并让您知道“它在 XML 文件中引用的所有元素/属性”！你必须手动做..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:50:45.730

It isn't difficult to produce such tool yourself:

**Add to any template that matches element(s) or attribute(s)**:

```
<xsl:message>
 <!-- Put all the data here that identifies the element attribute,
      for example the Xpath expression that selects the current node
 -->
</xsl:message> 
```

You can use existing transformations that take a node and produce one XPath expression that selects the node -- invoke them inside the above `xsl:message`. See for example this: [Generate/get xpath from XML node java](https://stackoverflow.com/questions/4746299/generate-get-xpath-from-xml-node-java)

Then what you need to do is to combine all these generated XPath expressions with the `|` operator and to evaluate the resulting XPath expression -- this will select all elements and attributes that are actually referenced in the transformation.

**If you also want to account for the elements/attributes that are processed by the XSLT built-in templates**, simply override those with specific templates in your transformation -- this is a good practice that as additional benefit may find errors in your transformation.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:27:50.487

如果您将 xslt 文件更改为此

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

如果有帮助，它会向您显示原始文件的副本？

# javascript - 如何从 jSignature 插件中的 CANVAS 中删除灰色线条？

> ID：13741254
> 
> 赞同：4
> 
> 时间：2012-12-06T10:09:01.977
> 
> 标签：javascript, jquery

如何从画布（签名面板）中删除灰色线`jSignature plugin`？

是否有任何选项可以验证用户是否输入签名？有任何内置功能吗？

[http://willowsystems.github.com/jSignature/#/demo/](http://willowsystems.github.com/jSignature/#/demo/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-31T04:03:23.157

如何将装饰颜色设置为透明

```
$(document).ready(function() {
        $("#signature").jSignature({
            'background-color': 'transparent',
            'decor-color': 'transparent',
        });
    }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T10:17:06.850

恐怕没有关闭它的选项，所以唯一的解决方案是更改插件代码本身

插件中有一个部分用于绘制基线。像这样注释掉

```
// signature line
ctx.strokeStyle = settings['decor-color']
ctx.shadowOffsetX = 0
ctx.shadowOffsetY = 0
var lineoffset = Math.round( ch / 5 )
//basicLine(ctx, lineoffset * 1.5, ch - lineoffset, cw - (lineoffset * 1.5), ch - lineoffset)
ctx.strokeStyle = settings.color 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-19T17:39:05.597

我知道这个问题已经存在 1 年半了，但今天有一个更好的解决方案。希望这将有助于其他一些人寻找一种方法来保存图像并从 jSignature*非凡*插件中删除灰线。

这里更好的方法：[http ://www.reloadedpc.com/php/jquery-jsignature-php-base30-image/](http://www.reloadedpc.com/php/jquery-jsignature-php-base30-image/)

```
<?php
// Load jSignature library to con
require_once(dirname(__FILE__) . '/jSignature_Tools_Base30.php');

// Get signature string from _POST or _GET
$data = $_GET['signature'];
$data = str_replace('image/jsignature;base30,', '', $data);

// Create jSignature object
$signature = new jSignature_Tools_Base30();

// Decode base30 format
$a = $signature->Base64ToNative($data);

// Create a image            
$im = imagecreatetruecolor(1295, 328);

// Save transparency for PNG
imagesavealpha($im, true);

// Fill background with transparency
$trans_colour = imagecolorallocatealpha($im, 0, 0, 0, 127);
imagefill($im, 0, 0, $trans_colour);

// Set pen thickness
imagesetthickness($im, 5);

// Set pen color to blue            
$blue = imagecolorallocate($im, 0, 0, 255);

// Loop through array pairs from each signature word
for ($i = 0; $i < count($a); $i++)
{
    // Loop through each pair in a word
    for ($j = 0; $j < count($a[$i]['x']); $j++)
    {
         // Make sure we are not on the last coordinate in the array
         if ( ! isset($a[$i]['x'][$j]) or ! isset($a[$i]['x'][$j+1])) break;
              // Draw the line for the coordinate pair
              imageline($im, $a[$i]['x'][$j], $a[$i]['y'][$j], $a[$i]['x'][$j+1], $a[$i]['y'][$j+1], $blue);
         }
    }

// Save image to a folder       
$filename = dirname(__FILE__) . '/signature.png'; // Make folder path is writeable
imagepng($im, $filename); // Removing $filename will output to browser instead of saving
echo $filename;
// Clean up
//imagedestroy($im); 
```

?>

正如作者所说：

“ **base30 字符串**格式允许用户**将字符串保存在数据库**中，并在以后应用程序需要时重复使用。base30 字符串对于要保存的数据量**来说非常小**。幸运的是，jSignature 下载包含一个包装器将 base30 字符串解码为向量点数组。

使用上面的代码将允许您从 jSignature 获取 base30 输入，并**创建一个没有签名行装饰的 PNG 文件**。这提供了一种**将字符串保存在 MySQL**中的方法，然后在需要时**将图像流式传输到浏览器**。我将此技术**与 DOM PDF 结合使用，在 PDF 文件中呈现签名**“

我的意思是，你还想要什么？没有 imagick 或 batik 或更改 jSignature 核心代码。简直完美解决！非常感谢 ReloadedPC

编辑：这种方法的唯一问题是不适用于 iOS。你必须使用base64。这个想法是一样的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-15T23:47:06.440

这可能为时已晚，但希望它可以帮助其他人遇到这个问题。如果在初始化时将 decor-color 传递为 null，我添加了一些代码来禁用灰线。我更喜欢这种方法，然后添加另一个属性来启用/禁用签名行。

```
 // signature line
-  ctx.strokeStyle = settings['decor-color'];
-  ctx.shadowOffsetX = 0;
-  ctx.shadowOffsetY = 0;
-  var lineoffset = Math.round( ch / 5 );
-  basicLine(ctx, lineoffset * 1.5, ch - lineoffset, cw - (lineoffset * 1.5), ch - lineoffset);
+  if (null != settings['decor-color']) {
+    ctx.strokeStyle = settings['decor-color'];
+    ctx.shadowOffsetX = 0;
+    ctx.shadowOffsetY = 0;
+    var lineoffset = Math.round( ch / 5 );
+    basicLine(ctx, lineoffset * 1.5, ch - lineoffset, cw - (lineoffset * 1.5), ch - lineoffset);
+  }

   ctx.strokeStyle = settings.color; 
```

它在我的 git repo 中，地址为[https://github.com/brinley/jSignature](https://github.com/brinley/jSignature)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T10:29:00.437

如果您使用的是 jSignature v2（版本 2），

`c.lineTo(l, i);` - 注释此行以删除画布中的灰线。

下面的代码有效

```
r.prototype.resetCanvas = function (b) {
    var a = this.canvas,
        d = this.settings,
        c = this.canvasContext,
        f = this.isCanvasEmulator,

        .........................

        c.shadowOffsetY = 0;
    var h = Math.round(i / 5),
        p = 1.5 * h,
        k = i - h,
        l = l - 1.5 * h,
        i = i - h;
    c.beginPath();
    c.moveTo(p, k);
    //c.lineTo(l, i); // comment this line to remove the grey line in the canvas.
    c.stroke();
    c.strokeStyle = d.color;
    f || (c.shadowColor = c.strokeStyle, c.shadowOffsetX = 0.5 * c.lineWidth, c.shadowOffsetY = -0.6 * c.lineWidth, c.shadowBlur = 0);

    ..........................
}; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-10T15:09:49.153

我在我的项目中对 jSignature 进行了以下更改：

```
showLine: true, //added showLine in default options

c.showLine = d.showLine; 
if(c.showLine){
  c.lineTo(l, i); 
} 
```

然后我通过`true`或`false`当我通过

```
$('#signature').jSignature({ color: "#00f", lineWidth: 3, showLine: false }); 
```

现在我可以选择显示或隐藏它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-04T10:57:33.437

万一 sombody 对此仍有疑问并使用作者网站上的非冲突版本。这为我解决了它：

注释 jSignature.min.nonconflict.js 的第 54 行以下部分

```
/*c.beginPath();c.moveTo(p,k);c.lineTo(l,i);c.stroke()*/ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-17T02:36:03.327

作者确实提供了删除灰线的选项，但似乎代码未签入。访问此位置[https://github.com/willowsystems/jSignature/pull/17/files](https://github.com/willowsystems/jSignature/pull/17/files) 并查找“文件已更改”选项卡。

在选项卡下 - 您会发现已删除的行带有粉红色背景和 (-) 减号，添加的行带有绿色背景和 (+) 加号。您需要自己更改源。像这样的东西

```
 // signature line
    //ctx.strokeStyle = settings['decor-color']
    //ctx.shadowOffsetX = 0
    //ctx.shadowOffsetY = 0
    //var lineoffset = Math.round(ch / 5)
    //basicLine(ctx, lineoffset * 1.5, ch - lineoffset, cw - (lineoffset * 1.5), ch - lineoffset)
    //ctx.strokeStyle = settings.color

    //if (!isCanvasEmulator) {
    //    ctx.shadowColor = ctx.strokeStyle
    //    ctx.shadowOffsetX = ctx.lineWidth * 0.5
    //    ctx.shadowOffsetY = ctx.lineWidth * -0.6
    //    ctx.shadowBlur = 0

    if (settings.signatureLine) {
        ctx.strokeStyle = settings['decor-color']
        ctx.shadowOffsetX = 0
        ctx.shadowOffsetY = 0
        var lineoffset = Math.round(ch / 5)
        basicLine(ctx, lineoffset * 1.5, ch - lineoffset, cw - (lineoffset * 1.5), ch - lineoffset)
        ctx.strokeStyle = settings.color

        if (!isCanvasEmulator) {
            ctx.shadowColor = ctx.strokeStyle
            ctx.shadowOffsetX = ctx.lineWidth * 0.5
            ctx.shadowOffsetY = ctx.lineWidth * -0.6
            ctx.shadowBlur = 0
        }
    } 
```

一旦代码更改完成......启动 jSignature 对象

```
 $('#signature').jSignature({
    'signatureLine': false
}); 
```

# c# - Linq比较小时

> ID：13741258
> 
> 赞同：0
> 
> 时间：2012-12-06T10:09:12.337
> 
> 标签：c#, linq, compare, hour

我如何比较 Linq 的小时数？

我使用 C# 4.0 和 SQL Server 2008 R2。我的数据：

```
CLIENT_ID (varchar) and HORRAIRE (time 7) 
```

和我的代码：

```
IList<LS_CLIENTHORRAIRE> LesListe;
                using (Soft8Exp_ClientEntities oEntite_T = new Soft8Exp_ClientEntities())
                {
                    var query = from o in oEntite_T.LS_CLIENTHORRAIRE where o.CLIENT_ID == CLIENT_ID && o.HORRAIRE >= [the Computer Time] select o;
                    LesListe = query.ToList();
                }
                return LesListe; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:11:53.650

`time`SQL 中的数据类型[映射到](http://msdn.microsoft.com/en-us/library/bb675168.aspx) `TimeSpan`.Net 中，目前您希望将其与您可能使用的当前系统时间进行比较：

```
DateTime.Now.TimeOfDay 
```

所以你的查询是：

```
var query = from o in oEntite_T.LS_CLIENTHORRAIRE 
            where o.CLIENT_ID == CLIENT_ID && o.HORRAIRE >= DateTime.Now.TimeOfDay 
            select o; 
```

请参阅：[DateTime.TimeOfDay](http://msdn.microsoft.com/en-us/library/system.datetime.timeofday.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:13:15.917

```
o.HORRAIRE >= new TimeSpan(00/*hours*/, 00/*minutes*/, 00/*seconds*/) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:28:10.830

```
 int The_Hour = DateTime.Now.Hour;
                    var query = from o in oEntite_T.LS_CLIENTHORRAIRE where o.CLIENT_ID == CLIENT_ID && o.HORRAIRE > new TimeSpan(The_Hour, 00/*minutes*/, 00/*seconds*/) select o; 
```

# android - 对于具有多个入口点的详细视图活动，Android Up 按钮定义不够清晰

> ID：13741260
> 
> 赞同：0
> 
> 时间：2012-12-06T10:09:25.263
> 
> 标签：android, navigation

我有一个`Activity`A 是登陆主屏幕，一个`Activity`B 是一个项目列表，一个`Activity`C 显示列表中一个项目的详细视图。

`Activity`C 可以从`Activity`A 和`Activity`B 开始。（列表的某些元素在主屏幕中显示）

我的问题是：`Activity`C 的向上按钮是否应该始终将用户带到`Activity`B（列表，即使用户`Activity`从 A 启动 C `Activity`）还是应该充当后退按钮并将用户发送到`Activity`启动的`Activity`C？

从我读到的设计指南：

> 导航到具有多个入口点的屏幕：有时一个屏幕在应用程序的层次结构中没有严格的位置，并且可以从多个入口点到达 - 例如可以从应用程序中的任何其他屏幕访问的设置屏幕。在这种情况下，向上按钮应该选择返回到引用屏幕，其行为与返回相同。

虽然`Activity`C 可以从多个入口点到达，但它在 app 层次结构中的位置非常清晰，是`Activity`B列表中某个元素的详细视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:14:54.033

是的，您的向上按钮应该让您返回到活动 B - 正如[文档](http://developer.android.com/design/patterns/navigation.html)所建议的那样。

> Up 按钮用于根据屏幕之间的层次关系在应用程序中导航。例如，如果屏幕 A 显示一个项目列表，并且选择一个项目会导致屏幕 B（它更详细地显示该项目），那么屏幕 B 应该提供一个返回屏幕 A 的向上按钮。

# jquery - 空选择上的 jQuery hide() 不会触发回调

> ID：13741261
> 
> 赞同：0
> 
> 时间：2012-12-06T10:09:29.830
> 
> 标签：jquery, jquery-selectors

我正在尝试使用 jQuery 过滤页面上的表格。我想淡出当前显示的行并淡入与新选择匹配的行。我的 jQuery 代码如下所示：

```
$('#details-table tr').hide();
var previousFilterResult = $();
var selects = $('#search-panel > select');
selects.change(function () {
    selects.attr('disabled', 'disabled');
    var filterResult = filterTable();

    previousFilterResult.hide('slow', function () {
        filterResult.fadeIn('slow', function () {
            selects.removeAttr('disabled');
        });
    });

    previousFilterResult = filterResult;
}); 
```

我的问题是，当我用 $() 初始化 previousFilterResult 时，代码不起作用，因为它似乎从来没有命中 previousFilterResult.hide 调用的回调。如果我在页面中放置一个虚拟 div 并使用 $('#dummyDiv') 初始化 previousFilterResult 它工作正常。

有什么方法可以初始化 previousFilterResult 而不在页面上放置一个虚拟 div 以便上面的代码仍然有效？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:13:47.313

不，你不能。

从[文档中](http://api.jquery.com/hide/)：

> 重要的是要注意，每个匹配元素都会执行一次回调，而不是整个动画执行一次。

但是您可以轻松地将代码更改为

```
$('#details-table tr').hide();
var previousFilterResult = null;
var selects = $('#search-panel > select');
selects.change(function () {
    selects.attr('disabled', 'disabled');
    var filterResult = filterTable();
    var callback = function () {
        filterResult.fadeIn('slow', function () {
            selects.removeAttr('disabled');
        });
    };
    if (previousFilterResult) previousFilterResult.hide('slow', callback);
    else callback();
    previousFilterResult = filterResult;
}); 
```

在我看来，这比使用`$()`感觉像 hack 更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:15:41.610

请从[文档中](http://api.jquery.com/hide)注意这一点：

> 如果提供，则在动画完成后触发回调。...**如果为多个元素设置了动画，请务必注意，每个匹配的元素都会执行一次回调，而不是对整个动画执行一次。**

*（我的重点）*

因此，如果您想调用该函数*一次*，则需要以另一种方式处理。例如：

```
selects.change(function () {
    var fired = false; // Remember whether we've fired the callback

    selects.attr('disabled', 'disabled');
    var filterResult = filterTable();

    // Do we have any previous result?    
    if (previousFilterResult && previousFilterResult[0]) {
        // Yes, and there's at least one element in the set,
        // hide it/them and schedule a callback
        previousFilterResult.hide('slow', done);
    }
    else {
        // No, go ahead and fire our callback directly
        done();
    }

    previousFilterResult = filterResult;

    function done() {
        // If there were multiple results, we might get multiple calls,
        // so keep track of whether we've been called (fired)
        if (!fired) {
            fired = true;
            filterResult.fadeIn('slow', function () {
                selects.removeAttr('disabled');
            });
        }
    }
}); 
```

# ruby-on-rails - Rails 资产没有被编译

> ID：13741262
> 
> 赞同：0
> 
> 时间：2012-12-06T10:09:35.653
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, asset-pipeline

我已将 rails 应用程序从 迁移`rails 2.3.14`到`rails 3.2.6`. 我将资产从“应用程序/资产”复制`public`到“应用程序/资产”中`application.rb`，我设置

```
config.assets.enabled = true 
```

在布局中，我将样式表包括在内

```
= stylesheet_link_tag 'reset', 'text', '960', 'main', 'articles', :cache => true 
```

应用程序通过“rails server”命令正确启动。

当我转到主页时，我收到以下错误。

```
No such file or directory - Asset file not found at '/home/ramiz/projects/hq_channel/public/stylesheets/home/ramiz/projects/hq_channel/app/assets/stylesheets/reset.css' 
```

在查找文件之前，它似乎已经将文件夹的路径连接了两次。

我做错了什么？

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:08:06.563

读这个。所有这些： http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

如果您正在预编译资产，则需要在配置中声明除应用程序之外的任何内容。例如来自文档：

```
config.assets.precompile += ['admin.js', 'admin.css', 'swfObject.js'] 
```

在你的 application.css

```
*= require reset
*= require text
.. etc .. 
```

而在`<head>`

```
= javascript_include_tag 'application' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:59:41.313

`app/assetes`应该`app/assets`

# jquery - 使用 jQuery 删除文本和标签

> ID：13741266
> 
> 赞同：5
> 
> 时间：2012-12-06T10:09:40.287
> 
> 标签：jquery, removeall

听起来很简单，但它不起作用：我想删除两个跨度标签之间的所有内容（文本和标签）：

```
<div class="comment-body" id="comment-body-parent-330">
<p><span id="sc_start_commenttext-330"></span>
Some Text<br>
Some Text<br>
Some Text</p>
<p>Some Text<span id="sc_end_commenttext-330"></span>
</p>
Some Text and Code
</div> 
```

您可以在 span id "sc_start_commenttext-330" 和 span id "sc_end_commenttext-330" 之间找到的所有内容都应该被删除，如下所示：

```
 <p><span id="sc_start_commenttext-330"></span>
<span id="sc_end_commenttext-330"></span>
    </p> 
```

我只是尝试使用该代码，但它不起作用：

```
 jQuery("#sc_start_commenttext-330").
nextUntil("#sc_end_commenttext-330").
remove(); 
```

该代码由 CMS 生成，因此无法更改 HTML。

一些想法？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:24:18.697

The following jQuery…</p>

```
//Removing all non span elements
$('p').children().not('span').remove();​

//Removing text nodes
var forEach = [].forEach;
forEach.call($('p').contents(), function(node){
    if (node.nodeType === 3) {
      $(node).remove();
    }
}); 
```

results in…</p>

```
<p><span id="sc_start_commenttext-330"></span></p>
<p><span id="sc_end_commenttext-330"></span></p> 
```

edit: here is an alternative for-loop approach for removing the text nodes

```
//Removing text nodes
for (var i = 0, allNodes = $('p').contents(); i < allNodes.length; i++) {
    if (allNodes[i].nodeType === 3) {
      $(allNodes[i]).remove();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:36:46.663

Here is a different approach;

```
var $comment_body = $('.comment-body'), // cache the <div> for future uses
    html = $comment_body.html(), // get the HTML
    // find the first </span>
    start_pos = html.indexOf('</span>', html.indexOf('<span id="sc_start_')) + '</span>'.length, // You can use 7 instead of '</span>'.length, I used it for clarity
    // find the next sc_end_
    end_pos = html.indexOf('<span id="sc_end_', start_pos);
$comment_body.html(
    // replace the unwanted parts
    html.replace(
        html.substring(0, end_pos).substring(start_pos), // unwanted parts
        ''
    )
); 
```

You can see it in action [here](http://jsfiddle.net/karalamalar/7zWHe/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:38:50.113

您可以使用以下代码执行此操作：

```
// Find the start <span> and its container <p>
var $startSpan = $('#sc_start_commenttext-330');
var $startP = $startSpan.parent();

// Find the end <span> and its container <p>
var $stopSpan = $('#sc_end_commenttext-330');
var $stopP = $stopSpan.parent();

// Clear the contents of the <span> elements and move them
//   to a temporary location at the end of the document
$startSpan.html('').appendTo($('body'));
$startSpan.html('').appendTo($('body'));

// Delete anything between the two paragraphs
$startP.nextUntil($stopP).remove();

// Clear the contents of the start and end paragraphs
//   and re-insert the <span> elements
$startP.html('').append($startSpan);
$stopP.html('').append($stopSpan); 
```

看到它在这里工作：http: [//jsfiddle.net/44aLQ/1/](http://jsfiddle.net/44aLQ/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T10:15:19.640

一种方法是替换其祖先之一的 html 内容。在这里你可以去找祖父母，但你可以适应。因此，我提出了类似的建议：

```
var $parent = $("#sc_start_commenttext-330").parent().parent(),
    parentContent = $parent.html();

parentContent = parentContent.replace(/(<span id="sc_start_commenttext-330".*<\/span>)((.|\s)*)(<span id="sc_end_commenttext-330".*<\/span>)/, "$1$4");
$parent.html(parentContent); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T10:56:24.740

这取决于你想做什么......试试这样的事情：

```
// for every "p" element
$("p").each(
  function () {
     // temprary save the children elements like spans & divs
     $temp = $(this).children("span,div");
     // clean the "p" container (text + <br>)
     $(this).empty();
     // recive the children
     $(this).append($temp);
   }
); 
```

如您所见，您可以控制要保留的元素（跨度，div）...而不是删除所有其余元素。希望能帮助到你 ：-）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-15T07:33:19.307

利用

```
$(function() {
	$('span').remove();
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<p><a href="#" id="doClean">Click here to clear comments</a></p>
<p>Text before....</p>
<p><span id="sc_start_commenttext-330">alma</span> Some Text<br> Some Text<br> Some Text</p>
<p>Random paragraph in the middle</p>
<p>Some Text<span id="sc_end_commenttext-330">mahbub</span></p>
<p>Text after...</p>
```

# machine-learning - 如何使用动态大小的输入集合解决机器学习问题？

> ID：13741272
> 
> 赞同：7
> 
> 时间：2012-12-06T10:09:58.843
> 
> 标签：machine-learning, relational-database, neural-network, data-mining, feature-extraction

我正在解决一个问题，试图通过机器学习将数据样本分类为质量好坏。

数据样本存储在关系数据库中。样本包含属性 id、名称、赞成票数（用于表示好/坏质量的指示）、评论数等。还有一个表，其中包含指向数据样本 id 的外键的项目。这些项目包含重量和名称。指向数据样本的所有项目共同表征数据样本，这通常有助于对数据样本进行分类。问题是，指向一个外键的项目数对于不同的样本是不同的。

我想为机器学习输入（例如神经网络）提供指向特定数据样本的项目。问题是我不知道项目的数量，所以我不知道我想要多少个输入节点。

Q1) 当输入维度是动态的时候，是否可以使用神经网络？如果是这样，怎么做？

Q2）当列表的长度未知时，是否有向网络提供元组列表的最佳实践？

Q3) 是否有将机器学习应用于关系数据库的最佳实践？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T21:56:07.453

有一个机器学习领域称为归纳逻辑编程，专门处理关系数据。在您的情况下，如果您希望使用神经网络，您可能希望将关系数据集转换为命题数据集（单表） - 即具有固定数量属性的表，可以输入神经网络或任何其他命题学习器。这些技术通常构建所谓的一阶特征，从辅助表中捕获数据。此外，您需要这样做只是为了诱导您的学习者 - 一旦您拥有了特征和学习者，您就可以动态评估这些特征以获得新的数据点。

这是可用于此类问题的一些技术的[概述文件。](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.1.4738)如果您有任何进一步的问题，请走开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T10:54:57.270

神经网络并非设计用于处理动态大小的输入。很少有机器学习方法是，它们通常假设维数不变。我认为解决这个问题的最简单方法是计算可变大小实例的汇总统计信息，例如，如果您有任意数量的输入，则计算这些输入的均值（和方差，以及您喜欢的任何其他内容），这如果您一心想要使用神经网络，它将是固定维度的。

有一类模型适合您想要做的事情：[贝叶斯非参数](http://mlg.eng.cam.ac.uk/zoubin/talks/uai05tutorial-b.pdf)。这是一类特别优雅的模型，它具有增长到无限大小的能力，但总是使用有限数量的参数来解释有限数量的数据。在数据量不断增加的情况下，模型更新是明确定义的（模型中的参数数量只是根据需要增加以适应它们）。

但是，有两个重要的警告：

1.  这些模型很难。如果您在机器学习和统计方面没有良好的背景，则可能需要相当长的接送时间
2.  无限模型中的推理是棘手的。这通常使用计算量相当大的 MCMC 方法来处理。尽管最近在[变分非参数](http://www.princeton.edu/~sjgershm/GershmanHoffmanBlei12.pdf)方面取得了一些进展，但这仍然是一个新的研究领域，您肯定不会在各种模型中找到这些东西的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T15:04:58.273

我不知道所有问题的答案，但也许这会有所帮助：

Q1）您可以尝试使用一些降[维方法](http://en.wikipedia.org/wiki/Dimension_reduction)，例如[主成分分析](http://en.wikipedia.org/wiki/Principal_component_analysis)（PCA），将所有输入对象映射到一个公共维度。为此，您必须选择长度为 N 的所有数据点，并仅使用这些数据点来学习从维度 N 到维度 M 的映射。

示例：假设您有大小为 3、4 和 5 的输入。您需要学习从大小为 5 到大小为 3 的映射，您可以使用大小为 5 的所有点和从尺寸 4 到尺寸 3，您可以使用所有尺寸为 4 的点来学习。

不过，我不希望这能很好地工作。

Q2) 如果 Q1 得到解决，应该不再是问题。

Q3）我在推测这个，但也许你可以将数据库映射到图表，并使用大量的算法来学习图表？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T18:21:40.373

我很抱歉添加第二个答案，但它与我的第一个答案大不相同。

一种可行的方法是执行以下操作：假设您的输入大小可以是 3、4 或 5。您让神经网络有 5 个输入节点（输入的最大大小）。然后，如果出现大小为 3 的点，则在前 3 个节点上提供其值，并在其余节点上提供虚拟值。

让我们讨论一个具体的例子：假设您的输入是 R^3、R^4 或 R^5 中的点，并且它们是二进制的：它们可以在每个条目处取值 0 或 1。如果出现一个点 (0,1,0,0,1)，您只需将这些值输入网络的 5 个输入节点。如果出现点 (0,1,1)，则将 (0,1,1,-1,-1) 馈送到网络，其中 -1 是虚拟值。这可确保您向网络提供“最后两个节点是特殊的”的信息。

在线性分类器中，虚拟值是非常危险的；然而，由于神经网络不是线性的，它可以（原则上）学习任何函数，只要你给它所需的信息并有足够的训练数据来提供它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T17:57:53.903

据我所知，没有众所周知的分类方法可以直接作用于动态大小的输入集合。降维通过将高维但固定的数据减少到低维来工作，因此它看起来并不像您需要的那样。

在机器学习中处理二进制分类（这似乎是您感兴趣的问题）的一种方法是构建直方图。例如，您可以通过构建文本中出现的单词的直方图来对文本（不同长度）进行分类。已经提出了几个扩展，bi-grams 的直方图，n-grams，但它们建立在相同的想法上。

另一种想法是结构化预测，一个很好的例子是当你有一个句子并且你需要确定每个单词，它是什么词性，在这种类型的设置中，每个单词都有一个标签，以及它们之间的交互标签非常重要。这类问题的很好理解的方法是[Latent Structural SVM](http://www.cs.cornell.edu/~cnyu/latentssvm/)、[CRF](http://en.wikipedia.org/wiki/Conditional_random_field)和[Max Margin Markov Network](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDgQFjAA&url=http://books.nips.cc/papers/files/nips16/NIPS2003_AA04.pdf&ei=t9vAUIH2NKm20QGV9YGACw&usg=AFQjCNHzW9Wc68rib1oO9mV71CtHXm7AWg&sig2=nyz53sKhTuQg7n5HFKwtuw)

# c++ - 我怎么知道相机是否支持mac os x中的分辨率

> ID：13741277
> 
> 赞同：3
> 
> 时间：2012-12-06T10:10:15.680
> 
> 标签：c++, objective-c, macos, objective-c++

我正在做一个项目，最近在一段时间内切换到目标 c。在使用 qtkit 从相机捕获视频时，我在 mac osx 中遇到了一些问题。我目前正在使用“setPixelBufferAttributes”来设置捕获视频的不同属性。问题是 ：

1.  如果相机不支持 640 X 360 分辨率并且我使用“setPixelBufferAttributes”设置它，那么视频也会被捕获并在内部转换为我不需要的 640 X 360。所以我不想自动转换分辨率。

2.  我想要相机硬件直接支持的所有支持的分辨率。

如果还存在任何其他 API，请指导我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:55:11.377

此代码将从以下位置枚举视频源的大小`QTCaptureDevice`：

```
 [captureDevice.formatDescriptions enumerateObjectsUsingBlock:^(QTFormatDescription* formatDescription, NSUInteger idx, BOOL* stop) {
        NSDictionary* attributes = [formatDescription formatDescriptionAttributes];
        NSValue* videoEncodedPixelsSize = [attributes objectForKey:@"videoEncodedPixelsSize"];
        NSSize videoSize = [videoEncodedPixelsSize sizeValue];
        NSLog(@"%@", NSStringFromSize(videoSize));
    }]; 
```

# java - 如何在 Spring 中将单例范围别名为自定义范围

> ID：13741283
> 
> 赞同：2
> 
> 时间：2012-12-06T10:10:37.923
> 
> 标签：java, spring, scope, singleton, alias

好的，所以我有一个在服务器环境中工作的自定义范围。我正在尝试编写一些单元测试，在单元测试的情况下，我希望这些 bean 是单例的，因为模拟使自定义范围工作所需的一切都太复杂了。

我只想做这样的事情

```
<!-- spring-test.xml -->
<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
    <property name="scopes">
        <map>
            <entry key="myCustomScope" value-ref="singletonScope"/>
        </map>
    </property>
</bean> 
```

我想在`junit`测试中覆盖我的自定义范围，让它成为单例。然而，似乎没有一个`SingletonScope class`，因为它似乎完全嵌入框架中，是默认的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:39:49.170

我认为编写一个行为类似于单例范围的 Scope 实现相对容易，特别是如果您不特别关心破坏回调（但即使那样也不是那么困难）。我假设出于测试目的，您更关心对象的创建而不是销毁，因此它应该只是调用和缓存来自您在 Scope.get() 中传递的 ObjectFactory 的值的问题。

# actionscript-3 - Starling Feathers ImageLoader 错误

> ID：13741290
> 
> 赞同：0
> 
> 时间：2012-12-06T10:11:07.060
> 
> 标签：actionscript-3, starling-framework

我正在使用 Starling、AS3 for mobile 开发一个应用程序，并希望合并 Feathers UI。我正在使用 Starling 1.2 并尝试添加 MetalWorksMobile 主题但不断收到错误：找不到类型或不是编译时常量：ImageLoader

不确定这意味着什么或如何解决它。

干杯

在主 .as 文件中：

```
this._theme = new MetalWorksMobileTheme(this.stage); 
```

在 MetalWorksMobileTheme.as 中：

```
protected function imageLoaderFactory():ImageLoader
{
    const image:ImageLoader = new ImageLoader();
    image.textureScale = this.scale;
    return image;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:24:05.130

您应该为 Feathers 使用最新的 Starling 版本，您可以在此处获取[https://github.com/PrimaryFeather/Starling-Framework.git](https://github.com/PrimaryFeather/Starling-Framework.git)。这个版本没有这样的错误。

# c - 请帮助链接列表的冒泡排序

> ID：13741291
> 
> 赞同：-2
> 
> 时间：2012-12-06T10:11:09.457
> 
> 标签：c, sorting, linked-list

我的代码有一些问题，需要看看您是否可以提供帮助。我正在尝试对我的 ROOM Struct 进行冒泡排序，代码如下。差不多，房间 1 名称：z ... 房间 2 名称：a，我想对这些进行排序，以便显示 A、B 等。

问题：当我输出链接列表时，这种排序会使某些节点消失。例如，在它对 Z > A 进行排序并放在 TOP 之后，当我去打印我的链接列表时，A 现在消失了

感谢大家的帮助！

```
 void sortRoomsByName(int count, ROOM *head)
{
int i;
int j;

for(i = count ; i > 1 ; i-- ) //outer loop
{
    ROOM *temp;
    ROOM *swap1;

    swap1 = head;
    for(j = 0 ; j < count-1 ; j++ ) //inner loop
    {
        if(strcmp(swap1->roomName,swap1->nextRoom->roomName)<0) //compares names and swaps
        {
            ROOM *swap2;
            swap2 = swap1->nextRoom;
            swap1->nextRoom = swap2->nextRoom;
            swap2->nextRoom = swap1;
            if(swap1 == head)
            {
                head = swap2;
                swap1 = swap2;
            }
            else
            {
                swap1 = swap2;
                temp->nextRoom = swap2;
            }
        }
        temp = swap1;
        swap1 = swap1->nextRoom;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:35:43.273

```
void sortRoomsByName(int count, ROOM *head)
{
int i;
int j;

for(i = 0 ; i < count - 1 ; i ++ ) //outer loop
{
    ROOM *swap1;

    swap1 = head;
    for(j = 0 ; j < count - i - 1 ; j ++ ) //inner loop
    {
        if(strcmp(swap1->roomName,swap1->nextRoom->roomName)<0) //compares names and swaps
        {
            ROOM *swap2;
            swap2 = swap1->nextRoom;
            swap1->nextRoom = swap2->nextRoom;
            swap2->nextRoom = swap1;
            if(swap1 == head)
            {
                head = swap2;
            }
        }
        else
        {
            swap1 = swap1->nextRoom;
        }
    }
} 
```

如果没有交换，那么你必须跳转到下一个节点，我希望这会有所帮助......

**编辑：** 从函数参数中删除 Head 并将其设为全局或按如下方式传递它。

```
void sortRoomsByName(int count, ROOM **head)
{
int i;
int j;

for(i = 0 ; i < count - 1 ; i ++ ) //outer loop
{
    ROOM *swap1;

    swap1 = *head;
    for(j = 0 ; j < count - i - 1 ; j ++ ) //inner loop
    {
        if(strcmp(swap1->roomName,swap1->nextRoom->roomName)<0) //compares names and swaps
        {
            ROOM *swap2;
            swap2 = swap1->nextRoom;
            swap1->nextRoom = swap2->nextRoom;
            swap2->nextRoom = swap1;
            if(swap1 == head)
            {
                *head = swap2;
            }
        }
        else
        {
            swap1 = swap1->nextRoom;
        }
    }
}

int main (void)
{
    sortRoomsByName(count /* your variable */, &head /* your head pointer */);
} 
```

# android - 如何使用 Actionbar、Tab 支持和 MapView 构建应用程序

> ID：13741294
> 
> 赞同：0
> 
> 时间：2012-12-06T10:11:18.410
> 
> 标签：android, google-maps, android-fragments, actionbarsherlock, android-tabs

我正在构建一个看起来像这样的应用程序。![在此处输入图像描述](../Images/e976c8a59e3f7ac866eb674a0b3e84ee.png)

它有一个操作栏和选项卡，如下所示。

选项卡 1：应显示带有 ViewPage 和指示器的图像。

选项卡 2：应显示地图。

我是 android 新手，但仍然以某种方式设法使用互联网资源并在示例源的帮助下构建了一个应用程序。但我被困在 mapview 附近（点击 Tab2 时）。我使用了 TabHost，但是这很有效，后来才知道 google 已经发布了支持 Map 片段的新 API。我什至将 Google API 用于 MapFragment（新的），但我最终得到的是一些垃圾代码。我把一切都搞砸了。我想从头开始。任何人都可以简要介绍如何实施它。

MapFragment.java

```
public class MapsFragment extends Fragment {  

    MapView map;
    LayoutInflater inflater_;
    ViewGroup container_;
    View layout;

    @Override 
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {  
        inflater_=inflater;
        container_=container;

        super.onCreate(savedInstanceState);

        layout = inflater.inflate(R.layout.fragment_maps, container, false);

        map = (MapView) layout.findViewById(R.id.mapView);

        return (LinearLayout) layout;  
    } 
```

PlaceActivity.java

```
public class PlaceActivity extends SherlockFragmentActivity implements
        OnShareTargetSelectedListener {

    FragmentManager fm = getSupportFragmentManager();
    DetailsFragment fragment_det = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        ActionBar actionBar = getSupportActionBar();
        actionBar.setHomeButtonEnabled(true);
        actionBar.setDisplayHomeAsUpEnabled(true);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab tabMaps = actionBar.newTab();
        ActionBar.Tab tabDetails = actionBar.newTab();

        tabDetails.setText("Details");
        tabMaps.setText("Maps");

        tabDetails.setTabListener(new MyTabListener());
        tabMaps.setTabListener(new MyTabListener());

        actionBar.addTab(tabDetails);
        actionBar.addTab(tabMaps);
    }

    private class MyTabListener implements ActionBar.TabListener {
        @Override
        public void onTabSelected(Tab tab,
                android.support.v4.app.FragmentTransaction ft) {

            if (tab.getPosition() == 0) {

                if (fragment_det == null) {
                    System.out.println("again");
                    fragment_det = new DetailsFragment();

                }

                ft.replace(android.R.id.content, fragment_det);

            } else {

                MapAsyc m = new MapAsyc();

                ft.replace(android.R.id.content, m);

            }
        }

        @Override
        public void onTabUnselected(Tab tab,
                android.support.v4.app.FragmentTransaction ft) {

        }

        @Override
        public void onTabReselected(Tab tab,
                android.support.v4.app.FragmentTransaction ft) {

        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.activity_place, menu);

        MenuItem actionItem = menu.findItem(R.id.action_share);
        ShareActionProvider actionProvider = (ShareActionProvider) actionItem
                .getActionProvider();
        actionProvider.setShareHistoryFileName(null);
        actionProvider.setOnShareTargetSelectedListener(this);
        actionProvider.setShareIntent(createShareIntent());
        return true;
    }

    public boolean onShareTargetSelected(ShareActionProvider source,
            Intent intent) {
        // TODO Auto-generated method stub
        this.startActivity(createShareIntent());

        return true;
    }

    private Intent createShareIntent() {
        String shareText = "Here is the share content body";
        Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
        sharingIntent.setType("text/plain");

        sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, shareText);

        return sharingIntent;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            finish();
        case R.id.action_share:
            Toast.makeText(this, "Share Via", Toast.LENGTH_LONG).show();
            break;
        default:
            break;
        }
        return true;
    }
}

DetailsFragment.java

 public class DetailsFragment extends SherlockFragment 
    {

        ImageFragmentAdapter mAdapter;
        ViewPager mPager;
        PageIndicator mIndicator;

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) 
        {
            //container.removeAllViews();
            // TODO Auto-generated method stub
            View view = inflater.inflate(R.layout.fragment_details, container,
                    false);

            mAdapter = new ImageFragmentAdapter(getActivity().getSupportFragmentManager());

            mPager = (ViewPager) view.findViewById(R.id.pager);
            mPager.setAdapter(mAdapter);

            mIndicator = (CirclePageIndicator) view.findViewById(R.id.indicator);
            mIndicator.setViewPager(mPager);

            return view;
        }

    } 
```

我的 Tab 1 工作正常。当我点击选项卡 2 时，地图将加载。但是当我再次单击 tab1 时，我收到以下错误:::。

```
12-06 02:30:13.891: E/AndroidRuntime(16904): java.lang.IllegalStateException: Recursive entry to executePendingTransactions. 
```

一些帖子建议使用 ASYNC 任务。但我不能使用它，因为我应该将 MapFragment 中的视图返回给侦听器以采取行动。

完整的错误日志

```
12-06 22:54:58.609: E/AndroidRuntime(28745): FATAL EXCEPTION: main
12-06 22:54:58.609: E/AndroidRuntime(28745): java.lang.IllegalStateException: Recursive entry to executePendingTransactions
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.app.FragmentPagerAdapter.finishUpdate(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.view.ViewPager.populate(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.view.ViewPager.setCurrentItemInternal(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.view.ViewPager.setCurrentItemInternal(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.view.ViewPager.onRestoreInstanceState(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.view.View.dispatchRestoreInstanceState(View.java:12088)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2582)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2588)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.view.View.restoreHierarchyState(View.java:12066)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.app.Fragment.restoreViewState(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.app.FragmentManagerImpl.moveToState(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.app.FragmentManagerImpl.moveToState(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.app.BackStackRecord.run(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.support.v4.app.FragmentManagerImpl$1.run(Unknown Source)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.os.Handler.handleCallback(Handler.java:725)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.os.Looper.loop(Looper.java:137)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at java.lang.reflect.Method.invokeNative(Native Method)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at java.lang.reflect.Method.invoke(Method.java:511)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-06 22:54:58.609: E/AndroidRuntime(28745):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:39:27.883

使用[http://viewpagerindicator.com/](http://viewpagerindicator.com/)作为您的 tabview 并设置

mPager.setOffscreenPageLimit(mAdapter.getCount());

PS你在使用actionbarsherlok吗？

# c# - 在c#中使用streamReader类读取具有动态列数的文本文件

> ID：13741302
> 
> 赞同：2
> 
> 时间：2012-12-06T10:11:44.070
> 
> 标签：c#, winforms, streamreader

```
 public class myRows
        {
            public decimal Col1 { get; set; }
            public decimal Col2 { get; set; }
            public decimal Col3 { get; set; }
            public decimal Col4 { get; set; }
            public decimal Col5 { get; set; }
            public decimal Col6 { get; set; }
            public string myDateTimeCol { get; set; }

            public myRows(string str)
            {
                var fields = str.Split(" ".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);

                Col1 = Convert.ToDecimal(fields[0]);
                Col2 = Convert.ToDecimal(fields[1]);
                Col3 = Convert.ToDecimal(fields[2]);
                Col4 = Convert.ToDecimal(fields[3]);
                Col5 = Convert.ToDecimal(fields[4]);
                Col6 = Convert.ToDecimal(fields[5]);
                myDateTimeCol = string.Format("{0} {1} {2} {3} {4}", fields[6], fields[7], fields[8], fields[9], fields[10]);
            }
        } 
```

然后我读了我的日志文件

```
var rows = new List<myRows>();
var sr = new StreamReader(txtFileToImport.Text);

while (!sr.EndOfStream)
       {
          string s = sr.ReadLine();
           if (!String.IsNullOrEmpty(s.Trim()))
               {
                  rows.Add(new myRows(s));
                }
        }

sr.Close();
dataGridView_preView.DataSource = rows; 
```

![在此处输入图像描述](../Images/c715ed2caa4164f4c97606ec8a328dcc.png)

这段代码面临的问题是，如果输入 LogFile 有超过 12 列或更多列，我会得到一个**索引超出范围异常**。

有没有我可以重构代码以使其处理具有任意数量列的任何日志文件。要处理的日志文件具有不同数量的列，我唯一的保证是日期列在所有情况下始终是最后一列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:18:59.097

试试这个：

```
public class myRows
        {
            public List<decimal> Cols = new List<decimal>();
            public string myDateTimeCol { get; set; }
            public string myVariableCols {
               get{
                  var sb = new StringBuilder();
                  for (var x = 0; x < Cols.length; x++){
                     sb.Append( Cols[x].ToString() );
                     if (x < Cols.length - 1) sb.Append("   ");
                  }
                  return sb.ToString();
               }
            }

            public myRows(string str)
            {
                var fields = str.Split(new[]{' '}, StringSplitOptions.RemoveEmptyEntries);
                int x;
                for (x = 0; x < fields.length-5;x++){
                   decimal d;
                   if (Decimal.TryParse(fields[x], out d)){
                      Cols.Add(d);
                   }
                }
                myDateTimeCol = string.Format("{0} {1} {2} {3} {4}", fields[x++], fields[x++], fields[x++], fields[x++], fields[x++]);
            }
        } 
```

如果大于 4，这应该适用于任何列大小。在您的数据网格中，您将只有两个数据绑定列：“myVariableCols”和“myDateTimeCol”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:42:02.250

在不使用任何列表的情况下，我对此有完全不同的方法。请原谅编码，这只是一个快速测试。

首先，我将使用 DataTable。

```
public DataTable dt = new DataTable(); 
```

我从每一行读取的数据将存储在一个字符串类型的数组中。

```
public string[] data; 
```

我们需要做的第一件事是确定数据文件中有多少列。下面我计算实例数，然后生成新的所需列数。

```
public void addcolumns()
        {

            using (StreamReader reader = new StreamReader(@"C:\DataColumnTest.txt"))
            {
                string s = reader.ReadLine();
                string[] col = s.Split(" ".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);

                foreach (var a in col)
                {
                    dt.Columns.Add(new DataColumn());
                }
            }
        } 
```

接下来，在哪里必须添加我们的 DataTable 的行。我们的行数据中的列数应该始终与我们的 DataTable 中的列数相匹配，并且在最初执行此操作的位置应该每次都有效：-

```
Public void addRows()
    {
        var sr = new StreamReader(@"C:\DataColumnTest.txt");

        while (!sr.EndOfStream)
        {
            string s = sr.ReadLine();
            if (!String.IsNullOrEmpty(s.Trim()))
            {
                data = null;
                data = s.Split(" ".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);
                dt.Rows.Add(data);
            }

        }

        sr.Close();
    } 
```

我为这个快速示例所做的就是在表单加载中调用这些方法，然后为 DataGrid 添加数据源：-

```
 private void Form1_Load(object sender, EventArgs e)
        {

            addcolumns();
            addRows();
            dataGridView1.DataSource = dt;
        } 
```

我知道会有更清洁的方法来做到这一点，但它确实有效，与我看到的其他示例不同。

希望这可以帮助。

*** 编辑 ****

这是我使用的数据以及结果。

![在此处输入图像描述](../Images/3db486d131c7632c9d92bf16aeaeebcb.png)

![在此处输入图像描述](../Images/c20353dbc269a8375e0396c65c53fa1b.png)

# c - C random() & setstate 函数未按预期运行

> ID：13741304
> 
> 赞同：5
> 
> 时间：2012-12-06T10:11:50.120
> 
> 标签：c, random, bsd

我不确定为什么这两个代码块会给出不同的输出：

```
unsigned int seed1 = 0;
char state1[256];
initstate(seed1, state1, 256);
printf("%10ld\n", random());
printf("%10ld\n", random());
// Gives:
// 1216130483
// 1950449197 
```

对比

```
unsigned int seed1 = 0;
char state1[256];
initstate(seed1, state1, 256);
printf("%10ld\n", random());
setstate(state1);
printf("%10ld\n", random());
// Gives:
// 1216130483
// 625602885 
```

我误解了什么 setstate() 吗？

编辑：有趣的是，看看这给出了什么：

```
unsigned int seed1 = 0;
char state1[256];
initstate(seed1, state1, 256);
printf("%10ld\n", random());
setstate(state1);
setstate(state1);
printf("%10ld\n", random());
// Gives:
// 1216130483
// 1950449197 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-11T20:41:10.610

两种实现都是正确的。

Setstate 只是将例程中的静态指针更改为指向您的缓冲区。

允许 Initstate 做同样的事情，但也允许先更改缓冲区内容。如果 PRNG 类似于 ARC4 或 Spritz，则缓冲区需要是一个排列，而不仅仅是任意位。如果 PRNG 是非线性加性反馈生成器，则至少需要设置状态中某处的低位之一，否则它将无法正常工作。并且一些库对状态缓冲区进行哈希处理，因此仅从种子+输出信息中就不容易判断正在使用哪种 PRNG。他们不需要；如果它使用的生成器是 LFSG 或不需要任何特定格式或对缓冲区有任何一致性需求的东西，则 lib 可以对 initstate 和 setstate 执行完全相同的操作。但是如果你不做 initstate，而你的操作系统使用了有这种需求的东西，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:18:12.607

我猜对的调用`initstate()`也不会切换到该状态，但对的调用`setstate()`确实如此，这就是为什么后一个`random()`调用返回从新状态生成的数字的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-11T22:50:16.560

BSD 实现在`setstate`将辅助状态信息存储到旧缓冲区之前加载辅助状态信息，以进行错误检查。此外`initstate`和`setstate`是更新此信息的唯一功能。这意味着当使用相同的缓冲区时，它[会加载陈旧状态](https://svnweb.freebsd.org/base/head/lib/libc/stdlib/random.c?annotate=303342#l379)，[存储新数据](https://svnweb.freebsd.org/base/head/lib/libc/stdlib/random.c?annotate=303342#l388)，并[使用前者更新内部状态](https://svnweb.freebsd.org/base/head/lib/libc/stdlib/random.c?annotate=303342#l394)。以这种方式重复调用`setstate`将交替旧存储状态和当前内部状态，导致调用两次时观察到的结果。

[的评论`setstate`](https://svnweb.freebsd.org/base/head/lib/libc/stdlib/random.c?annotate=303342#l366)说用当前缓冲区调用它是可以的，所以要么这是预期的行为，要么是[几十年前的](https://svnweb.freebsd.org/base/head/lib/libc/stdlib/random.c?annotate=1573#l288)错误。

> 请注意，由于事情的完成顺序，可以调用 setstate() 与当前状态相同的状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-12T19:25:48.917

`initstate()`告诉 random 使用什么缓冲区来存储下一个随机数的信息。`random()`由于缓冲区中的信息`state1[256]`已更改，您在调用中会得到不同的答案。查看以下代码的输出：

```
#define LEN (32)
void print_hex( char *b)
{
   int i;
   for( i=0; i < LEN; i++) printf("%02x ",((unsigned char *)b)[i]);     
   printf("\n");
}

main()
{
   char state1[256], state2[256], tmp[256];
   initstate( 42, state2, LEN);
   initstate( 62, state1, LEN) ;
   printf("buffer before random():\n");
   print_hex( state1 ) ;
   printf("%10ld\n", random());
   printf("buffer after random():\n");
   print_hex( state1 ) ;

   setstate( state2 ); // Now we are free to copy data from state1
   printf("buffer after setstate():\n");
   print_hex( state1 ) ;
   memcpy( tmp, state1, 256);
   printf("copied to tmp\n");

   setstate( state1 ); // Go on with original sequence
   printf("next random():\n") ;
   printf("%10ld\n", random());
   printf("next random():\n") ;
   printf("%10ld\n", random());

   setstate( state2 ) ; // Again, this allows us to play with data in state1
   memcpy( state1, tmp, 256);
   setstate( state1 ) ;
   printf("back copy:\n");
   printf("random() after copy:\n") ;
   printf("%10ld\n", random());
   printf("next random():\n") ;
   printf("%10ld\n", random());
} 
```

这给出了输出：

```
buffer before random():
01 00 00 00 e7 22 1d 21 f1 62 9c 90 89 72 b5 89 35 2b 97 b5 76 8c ff a8 56 14 14 7b ba 19 d9 f7
1801070350
buffer after random():
01 00 00 00 e7 22 1d 21 f1 62 9c 90 89 72 b5 89 1c 4e b4 d6 76 8c ff a8 56 14 14 7b ba 19 d9 f7
buffer after setstate():
06 00 00 00 e7 22 1d 21 f1 62 9c 90 89 72 b5 89 1c 4e b4 d6 76 8c ff a8 56 14 14 7b ba 19 d9 f7
copied to tmp
next random():
 483260339
next random():
  40158063
back copy:
random() after copy:
 483260339
next random():
 40158063 
```

可以看到第一次调用后`random()`缓冲区的内容发生了`state1`变化。`random()`使用该区域来存储其状态。此状态被复制到缓冲区`tmp`。稍后我们将其复制回`state1`，并获得相同的随机数序列。请注意，在您复制到应该用于随机数的缓冲区或从缓冲区复制之前，您必须使用or告诉`random()`停止使用该缓冲区。原因是当被调用时，旧缓冲区被修改以允许它再次被加载。`setstate()``initstate()``setstate()``setstate()`

因此，要获得与原始问题相同的答案，您必须使用：

```
unsigned int seed1 = 42;
char state1[256], tmp[256];
initstate(seed1, state1, 256);
printf("%10ld\n", random());
initstate( 0, tmp, 256); // <- notice this
setstate( state1 ) ;
printf("%10ld\n", random()); 
```

# ssl - Log4Net 是否有支持 TLS 加密的 smtp 附加程序？

> ID：13741312
> 
> 赞同：9
> 
> 时间：2012-12-06T10:12:02.993
> 
> 标签：ssl, log4net

如标题中所述，我在找到一个声明它支持 TLS 加密标准的附加程序时遇到了一些问题。

我一直在尝试使用 SmtpAppender 但无法使其工作，并怀疑它与需要 TLS 加密的 smtp 服务器有关，而 SmtpAppender 可能不支持这一点。

[从 Office365 手册设置](http://www.configureoffice365.com/wp-content/uploads/2012/01/office-365-external-smtp-setting-540x91.png)

[手册](http://www.configureoffice365.com/configure-office-365-smtp-relay/)

使用的配置：

```
<appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
  <to value="my email" />
  <from value="The senders email" />
  <Username value="JohnDoe"></Username>
  <password value="NoWay" ></password>
  <authentication value="Basic"></authentication>
  <subject value="Test message" />
  <smtpHost value="pod51011.outlook.com" />
  <port value="587" />
  <bufferSize value="512" />
  <lossy value="true" />
  <EnableSsl value="true"/>
  <evaluator type="log4net.Core.LevelEvaluator">
      <threshold value="INFO"/>
  </evaluator>
  <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%newline%date [%thread] %-5level %logger [%property{NDC}] - %message%newline%newline%newline" />
  </layout>
</appender> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T15:16:20.817

在使用最新的 Log4Net 版本 1.2.11 进行一些额外的研究和实际测试后**，答案是：是的。**

这个问题在这里得到了一定的回答[C# ASP.NET Send Email via TLS](https://stackoverflow.com/questions/2057227/c-sharp-asp-net-send-email-via-tls)并查看 Log4Net 的问题跟踪[允许 smtp 进行 ssl 身份验证和证书。](https://issues.apache.org/jira/browse/LOG4NET-116)据记载，Log4Net 有一个开关 EnableSsl，顾名思义，它启用 SSL 支持，它通过第一个链接属于 TLS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:13:29.807

对于那些还没有准备好升级到 1.2.11 的人来说，另一个选择是添加一个自定义 appender：

```
/// <summary>
/// This is a custom appender so that we can enable SSL properly (and support TLS)
/// </summary>
public class SmtpCustomAppender : SmtpAppender
{
  public bool EnableSsl { get; set; }

  public SmtpCustomAppender()
  {
      Authentication = SmtpAuthentication.None;
      Port = 25; //0x19;
      //Port = 587; // 0x24b;
      Priority = MailPriority.Normal;
      EnableSsl = false;
  }

  /// <summary>
  /// Send the email message - this overrides the email sender so that we can add enabling SSL
  /// </summary>
  /// <param name="messageBody">the body text to include in the mail</param>
  protected override void SendEmail(string messageBody)
  {
      SmtpClient client = new SmtpClient();
      if (!string.IsNullOrEmpty(SmtpHost))
      {
          client.Host = SmtpHost;
      }
      client.Port = Port;
      client.EnableSsl = EnableSsl;
      client.DeliveryMethod = SmtpDeliveryMethod.Network;
      switch (Authentication)
      {
          case SmtpAuthentication.Basic:
              client.Credentials = new NetworkCredential(Username, Password);
              break;
          case SmtpAuthentication.Ntlm:
              client.Credentials = CredentialCache.DefaultNetworkCredentials;
              break;
      }

      MailMessage message = new MailMessage
          {
              Body = messageBody,
              From = new MailAddress(From)
          };
      message.To.Add(To);
      message.Subject = Subject;
      message.Priority = Priority;
      client.Send(message);
  }
} 
```

然后在您的配置文件中，您只需将以前的 SmtpAppender 设置为自定义附加程序的完全限定名称空间。

```
<appender name="ErrorSmtpAppender" 
          type="SomeProject.Infrastructure.Logging.Log4netAppenders.SmtpCustomAppender"> 
```

然后您可以添加`<enablessl value="true" />`到您的日志附加程序。

我创建了一个[要点](https://gist.github.com/ferventcoder/5320517)来向您展示这是什么样的。

# wpf - WPF RibbonWindow + Windows 8 - 控制框看起来很糟糕

> ID：13741313
> 
> 赞同：4
> 
> 时间：2012-12-06T10:12:03.850
> 
> 标签：wpf, windows-7, windows-8, ribbon

我在使用 WPF RibbonWindow 和 Windows 8 时遇到问题。在旧 Windows 中一切正常，但在 Windows 8 控制框（最小化、最大化和退出按钮）上看起来很糟糕 ![窗户8](../Images/3612573693aed9e4a550951432d0a632.png)

我使用 Microsoft 的 RibbonControlLibrary（2010 年 10 月的版本）包含 XAML 代码[http://pastebin.com/cNws0CGt](http://pastebin.com/cNws0CGt)（没有不相关的信息，我希望我没有删除重要的东西）

预期输出（Windows 7）： ![预期的](../Images/ef9b969621b84486757ea21881f0ae98.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:04:16.733

你问的是窗口主题。它在 Windows 8 中不同的原因是因为 Windows 8 具有与 Windows 7 不同的默认主题。要标准化这一点，您需要为您的项目设置一个明确的主题。

请参阅[此处](https://stackoverflow.com/questions/2075720/windows-7-theme-for-wpf)了解如何明确设置您的主题。

有关 Windows 8 中可用主题的更多详细信息，请[点击此处](http://social.msdn.microsoft.com/Forums/da-DK/wpf/thread/e3dd4221-af4d-4ae4-a983-895db12ebcd0)。

编辑：

请参阅[此处](http://connect.microsoft.com/VisualStudio/feedback/details/747820/net-4-5-wpf-ribbonwindow-broken-in-vs2012#details)了解为什么这不是 Windows 8 主题的详细信息。这似乎是一个应该修复的错误。检查您的 .net 运行时版本以确保它是最新的。

# c# - C#中的排序字典

> ID：13741314
> 
> 赞同：0
> 
> 时间：2012-12-06T10:12:09.677
> 
> 标签：c#, sorteddictionary

我有一个 SortedDictionary，我在其中保存特定玩家的积分和他的名字。我需要做的是按降序对它进行排序，以便我将获胜者放在字典的第一位。我怎样才能做到这一点？

另外，如何在不知道密钥的情况下从列表中获取项目？

```
SortedDictionary<int, string> dict = new SortedDictionary<int, string>();
dict.Add(player1Pts, playerNames[0]);
dict.Add(player2Pts, playerNames[1]);
dict.Add(player3Pts, playerNames[2]); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T10:19:54.570

使用以分数作为键的字典并没有什么意义：键必须是唯一的，因此如果两个玩家的分数相同，它将失败。

相反，您应该创建一个`Player`包含名称和分数的类，并将`Player`对象存储在`List<Player>`. 如果您需要按分数对球员进行排序，您可以`Sort`使用自定义比较器调用列表，或者仅使用 Linq 对结果进行排序：

```
foreach (Player player in players.OrderByDescending(p => p.Score))
{
    // Do something with player
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:28:41.903

第一：当您插入另一个值时，排序字典总是会立即排序。

但请注意：使用积分作为 KEY 意味着您不能拥有具有 EQUAL 积分的玩家。

但是如果你想这样做，你可以简单地使用字典的 Last() 方法来获得最高分的玩家：

```
SortedDictionary<int, String> t = new SortedDictionary<int,string>();
t.Add(5, "a");
t.Add(10, "c");
t.Add(2, "b");
MessageBox.Show((t.Last<KeyValuePair<int,string>>()).Value); 
```

这将导致“c”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:21:27.880

首先，我认为您应该切换`<int, string>`玩家姓名的位置应该是关键，而积分是值。

然后您可以按值对其进行排序：

```
dict.Sort(
    delegate(KeyValuePair<int, double> val1,
    KeyValuePair<int, double> val2)
    {
        return val1.Value.CompareTo(val2.Value);
    }
); 
```

您可以通过 foreach 遍历字典以获取键和值：

```
 foreach (var pair in asd)
            {
                string some = pair.Key;
                int someValue =  pair.Value;
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T19:23:45.653

我的问题的答案是任何可能需要它的人:)

```
Player player1 = new Player(playerNames[0], player1Pts);
Player player2 = new Player(playerNames[1], player2Pts);
Player player3 = new Player(playerNames[2], player3Pts);
Player player4 = new Player(playerNames[3], player4Pts);
Player player5 = new Player(playerNames[4], player5Pts);

List<Player> players = new List<Player>();

players.Add(player1);
players.Add(player2);
players.Add(player3);
players.Add(player4);
players.Add(player5);

var sortedPlayers = (from Player play in players
                     orderby play.Points descending
                     select play);

List<Player> sortPlay = (List<Player>)sortedPlayers.ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-29T00:34:25.440

虽然这个问题有几个答案，但这些似乎都没有利用 SortedDictionary 结构。如果您希望将 SortedDictionary 设计为最大堆而不是默认的最小堆，我认为最好的解决方案是覆盖 C# 使用的默认比较器。这可以按如下方式完成：

```
public class DescendingComparer<T>: IComparer<T> where T : IComparable<T>
{
    public int Compare(T x, T y)
    {
        return y.CompareTo(x); //reverses, so compare ascending
                 //this is vs the standard method, which returns x.CompareTo(y)
    }

}

static void Main(string[] args)
{

SortedDictionary<float, string> myDict = new SortedDictionary<float,string>(new DescendingComparer<float>()); //sorts on the key
    string[] name = {"Bill", "Tom", "Susan", "Terry"};
    myDict.Add(.8f, name[0]);
    myDict.Add(.2f, name[1]);
    myDict.Add(.95f, name[2]);
    myDict.Add(.005f, name[4]);

    foreach (KeyValuePair<float, int> j in myDict)
    {
        Console.WriteLine("Key: {0}, Value: {1}",j.Key,j.Value);
    } //now it is stored in increasing order, so accessing largest elements fast
} 
```

另请参见：[C#：按降序排序字典](https://stackoverflow.com/questions/2807461/c-sort-dictionary-in-descending-order)

# linux - 在两个远程位置之间复制文件

> ID：13741315
> 
> 赞同：0
> 
> 时间：2012-12-06T10:12:13.123
> 
> 标签：linux

我在计算机“A”中工作，并且我在计算机“B”中有要复制到网络中的文件夹“C”中的文件。“A”和“B”是 LAN 网络的一部分。

现在，我正在做这样的事情：

我已经（出于另一个原因）将要在“B”中复制的文件夹安装到“A”，然后复制到“C”。

我想知道这是否比 ssh 到“B”并复制到“C”慢。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:18:24.757

使用 rsync 复制文件。它只会传输文件中已更改的部分，默认情况下使用压缩。因此，如果您通过低带宽链接复制文件，只需尝试进行重复数据删除和压缩即可。如果您使用来自不同端点的相同链接，则从哪里复制文件并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:19:13.153

A、B 和 C 是“独立”的计算机……？

如果 B 挂载到 A 并且您在 A 上执行复制命令，它基本上是网络流量的两倍。所以是的，从 B 复制到 C 要快得多。

# ruby - Ruby Curses 控制回车键

> ID：13741317
> 
> 赞同：4
> 
> 时间：2012-12-06T10:12:16.393
> 
> 标签：ruby, cursor, curses

我正在学习 Curses 课程，但无法控制 ENTER 键。到目前为止，这是我的代码：

```
require 'curses'

win = Curses::Window.new(0, 0, 0, 0)

Curses.init_screen
Curses.cbreak
Curses.nonl
Curses.stdscr.keypad(true)

loop do
    case Curses.getch
    when 13 # Enter
        Curses.addstr "abc"
    when 8 # Backspace
        Curses.delch
    end
end

win.close 
```

问题是，当我按 ENTER 键时，“abc”被写入屏幕（如预期的那样）；但是，当我第二次按 ENTER 时，“abc”只是重新写入屏幕上的相同位置。似乎按 ENTER 键首先将光标位置设置为 (0,0)，然后添加字符串。如何停止将光标位置设置为（0,0）？

此外，由于某种原因，常量与我的键不匹配，因此 ENTER 键是键 13，但 ENTER 键的 Ruby 常量是 400ish。我没有使用花哨的键盘或任何东西；标准的美式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T01:30:25.147

好吧，似乎`Curses.nonl`只是意味着当按下 ENTER 时，写入“\r”而不是“\r\n”，所以我设法解决这个问题的唯一方法是使用禁用任何输出到屏幕`Curses.raw`并实现 all数据自己写入屏幕。

我不知道为什么常数没有增加。也许这是键盘上*另一个*ENTER 键的常量（在右下角）。不过没关系，我可以做puts`Curses.getch`来找出钥匙的号码。

# c# - 托管后未获取活动目录用户详细信息

> ID：13741319
> 
> 赞同：0
> 
> 时间：2012-12-06T10:12:31.173
> 
> 标签：c#, asp.net, iis

在本地 iis (varsion5.1) 中托管我的网站后，我没有获得 Active Directory 用户详细信息（电子邮件、电话等）。谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:43:54.080

转到 IIS

--> 右键单击​​网站
--> 选择属性
--> 选择目录安全
--> 在“身份验证和访问控制”部分单击“编辑”。

取消选中匿名访问。
检查集成 Windows 身份验证。
CHECK Digest authentication for Windows domain servers

这解决了我的问题，希望它能解决问题！

# mysql - 从多个连接表中选择重复项

> ID：13741324
> 
> 赞同：0
> 
> 时间：2012-12-06T10:12:56.673
> 
> 标签：mysql, having

我有一个 customer_product 表，其中标识符是“stock_code”。

然后我有三个表：

*   bom_component
*   路由
*   材料工艺

这些表中的每一个都通过它的 stock_code 连接到 customer_product 并包含各种其他字段。

我正在尝试选择 customer_products，其中其他三个表中的记录完全相同，并且只返回重复项的 stock_code。

任何帮助解决这个问题都会很棒，谢谢。

编辑：为了澄清，当我说“其他表中的记录相同”时，我的意思是：

（以路由为例）

stock_code 部门序列
1234 货物 1
1234 准备 2
1234 包装 3
3344 货物 1
3344 准备 2
3344 包装 3
5661 货物 1
5661 包装 2

这里将返回股票代码 1234 和 3344，因为它们在路由中的记录完全匹配。

我正在使用 mySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:48:46.583

根据您使用的 RDBMS，您可以使用 INTERSECT 语句，它基本上类似于 UNION，但只返回在所有单独的 SQL 语句中存在匹配的行。

```
SELECT stock_code, price FROM bom_component
INTERSECT
SELECT stock_code, price FROM routing
INTERSECT
SELECT stock_code, price FROM material_process 
```

这将返回有重复的行。我假设价格为一列，但只需添加您想要制定唯一标准的列。

# xamarin.ios - MonoDevelop Intellisense 未显示 PCL 中的所有项目

> ID：13741327
> 
> 赞同：3
> 
> 时间：2012-12-06T10:13:00.847
> 
> 标签：xamarin.ios, monodevelop, portable-class-library

我目前正在构建一个 MonoTouch 应用程序，并希望在它与任何其他未来平台之间共享尽可能多的代码。我认为最好的方法是将 PCL 用于公共代码。

问题是，当我尝试在我的 PCL 库中引用 System.Collection.Generic.List<T> 时，MOnoDevelop 以红色突出显示列表文本（好像说找不到引用），但是当我构建项目时，编译器没有问题，正常编译...

例如，我可以在我的 PCL 中有以下代码

> ![MonoDevelop 突出显示不正确的解决错误](../Images/d2110d51c9f68088172e0534cbe1f2e4.png)

并且 MD 会很好地编译这个，这个方法可以从我的 MT 应用程序中使用。

然而，使用它令人沮丧，因为它一直误导我认为应该编译的代码不会，而且我错过了 IntelliSense 的很多好处。

我已经尝试过列出的[关于切换编译器](https://stackoverflow.com/questions/12041290/monodevelop-is-it-possible-to-switch-pcls-compiler/12062589#12062589)的解决方案，但这并没有帮助。希望有人对如何解决这个问题提出建议？

出于兴趣考虑，这是 intellisense 为我提供的 System.Collections.Generic 命名空间（该列表中有一项不在视图中 - Stack<T>）

> ![带有 PCL 项目的 MonoDevelop 中 System.Collections.Generic 的 IntelliSense 列表](../Images/56578a85be595a7da3f394ceee688e13.png)

还应该提到我正在使用 MonoDevelop v3.0.5、Mono v2.10.9、MT v6.0.6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T23:09:43.977

MonoDevelop 3.x 对可移植类库的支持是对 Linux 和 Mac 的一种破解，因为在这些平台上，没有任何 PCL 程序集（Mono 没有任何 PCL 程序集）。

当 MonoDevelop 在 Mac 或 Linux（没有真正的 PCL 程序集）上编译 PCL 项目时，它使用被破解的 Microsoft.Portable.CSharp.targets 文件来引用 MonoTouch 或 Mono4Android 程序集（如果可用），否则它会退回到编译针对 .NET 4.0 程序集。

您看到的具体问题是由于 MonoDevelop 无法在您的系统上找到真正的 PCL mscorlib/System/etc PCL 程序集。

# java - Action 和 ActionMap - 解释一下这个行为

> ID：13741334
> 
> 赞同：2
> 
> 时间：2012-12-06T10:13:42.337
> 
> 标签：java, swing, jbutton, key-bindings, abstract-action

我有一个`Action`

```
SampleAction a = new SampleAction("foo", null); 
```

然后我将它添加到 Button 和 ActionMap

```
JButton b = new JButton(a);
b.getActionMap().put("bar", a);
b.getInputMap().put(KeyStroke.getKeyStroke("F1"), "bar"); 
```

`System.out.println("Action [" + e.getActionCommand() + "] performed!");`我在 Action 中添加了一个跟踪 ( )。当我用鼠标按下按钮时，它显示

```
Action [foo] performed! 
```

但是当我使用时`F1`，它显示：

```
Action [null] performed! 
```

为什么？

* * *

```
class SampleAction extends AbstractAction
{
    public SampleAction(String text, Icon icon) {
        super(text, icon);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println("Action [" + e.getActionCommand() + "] performed!");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:23:37.663

除非我误解你应该调用你的`getActionCommand`实例，因为你正在调用：`JButton``ae.getSource()``getActionCommand()``ActionEvent`

```
 SampleAction a = new SampleAction("foo", null);

  JButton b = new JButton(a);
  b.getActionMap().put("bar", a);
  b.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("F1"), "bar");

class SampleAction extends AbstractAction
{
    public SampleAction(String text, Icon icon) {
    super(text, icon);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
    System.out.println("Action [" + ((JButton)e.getSource()).getActionCommand() + "] performed!");
    }
} 
```

**更新：**

感谢@Kleopatra，这可能是一个更好的方法：

```
SampleAction a = new SampleAction("foo", null);

JButton b = new JButton(a);
b.getActionMap().put("bar", a);
b.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("F1"), "bar");

 class SampleAction extends AbstractAction {

        public SampleAction(String text, Icon icon) {
            super(text, icon);

            putValue(Action.ACTION_COMMAND_KEY, text);//'foo' will be printed when button clicekd/F1 pressed
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            System.out.println("Action [" + e.getActionCommand() + "] performed!");
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:31:16.920

我无法访问您的`SampleAction`，但我猜您在构造函数中传递的“foo”文本用作文本，与操作命令无关。

如果您查看扩展的`AbstractButton`类`JButton`，您会看到

```
public String getActionCommand() {
    String ac = getModel().getActionCommand();
    if(ac == null) {
        ac = getText();
    }
    return ac;
} 
```

`ActionEvent`在创建传递给动作的哪个时使用此方法。当您单击按钮时，将调用此方法，我假设`ac`是`null`，但该`getText()`方法返回`"foo"`您在`SampleAction`类中使用的方法。

当您通过按 F1 直接触发动作时，您绕过此机制并简单地触发动作。如果你想避免这种情况，你可以在其中简单地添加一个`Action`，这`ActionMap`是对按钮执行“单击”的 API 调用`JButton``JButton#doClick`

# asp.net-mvc - 从控制器中的强类型视图中获取数据

> ID：13741338
> 
> 赞同：2
> 
> 时间：2012-12-06T10:13:49.793
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我有强类型视图，我想在控制器中获取数据。这就是我所拥有的：

```
@model WordAutomation.Models.Document

@{
    ViewBag.Title = "Document";
}

<h2>Document</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Document</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.CaseNumber)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CaseNumber)
            @Html.ValidationMessageFor(model => model.CaseNumber)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

然后，在控制器中我有这个：

```
[HttpPost]
        public ActionResult Document(FormCollection formValue)
        {
            string test = formValue[0].ToString();
            return View();
        } 
```

但是没有数据出现。知道我在做什么错吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T10:28:07.113

让 MVC 为您处理模型绑定。`FormCollection`您可以简单地传递视图模型的实例，而不是传递给您的控制器。将您的控制器操作更改为：

```
[HttpPost]
public ActionResult Document(WordAutomation.Models.Document model)
{
    string test = model.CaseNumber;

    return View(model); // return your model back to the view to persist values
} 
```

`FormCollection`MVC 会自动为你绑定你的值`WordAutomation.Models.Document`。然后，如果需要，您可以在 POST 之后将模型简单地传递回视图以保留输入值（已在示例中包含此值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:24:21.950

当它是强类型时，它很容易从视图获取数据到控制器。您需要做的只是通过model.yourpropertyname 获取控制器中的数据。

代码在模型中将如下所示

```
[HttpPost]
    public ActionResult Document(Document aDocumentModel)
    {
        string test = aDocumentModel.CaseNumber;
        return View();
    } 
```

现在数据在“字符串测试”中可用，您可以在需要的地方使用它，还有一件事您需要告诉控制器“文档”模型的命名空间，因此您需要添加

```
using WordAutomation.Models;//Your Model's namespace here 
```

在控制器的命名空间部分。

希望能帮助到你！！！

# java - 如何根据 UI 更新状态行

> ID：13741339
> 
> 赞同：1
> 
> 时间：2012-12-06T10:13:49.250
> 
> 标签：java

我正在开发一个 rcp 应用程序，我想添加一个状态行并根据视图中选择的控件显示消息。（例如，假设复选框被选中，而不是状态栏应该显示一条消息，而不是应该显示复选框被选中的消息）。

我正在使用 getViewSite().getActionBars().getstatuslineManager().setMessage 但我无法更新状态行。

我的意思是我在开始时设置的任何文本在运行时都不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:25:15.183

vogella 教程是关于开发 rcp 应用程序的一个很好的信息。检查以下

1.  [访问状态行](http://www.vogella.com/articles/Eclipse3RCP/article.html#statusline)- 在类似的行上，您也可以更新它。

2.  [显示消息框](http://www.vogella.com/articles/EclipseDialogs/article.html#dialogs_jfacemessage)

# comparison - 比较一个文件的两个以上版本

> ID：13741343
> 
> 赞同：1
> 
> 时间：2012-12-06T10:14:16.380
> 
> 标签：comparison, compare, winmerge

我有几个使用配置文件的环境。为了合并这些文件，我希望能够比较它们。然而，当有五个环境时，一次比较两个文件是相当烦人的。

有没有人知道一个工具可以提供一种快速的方法来比较 n 个文件和参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:09:12.860

Google Diff、Match 和 Patch (https://code.google.com/p/google-diff-match-patch/) 为我提供了所需的工具。我很快实现了一个 Java 比较器，它将每个文件与我选择作为参考的文件进行比较。我仍然要查看四个比较结果，但我只询问一次比较并且所有结果都在同一页面上，这样更容易定位异常。

我必须稍微清理一下代码，但如果有人感兴趣，我会尝试分享它。

# android - 用适配器中的两个数组填充数组列表？

> ID：13741344
> 
> 赞同：1
> 
> 时间：2012-12-06T10:14:16.783
> 
> 标签：android, json, arraylist

我的问题是当我将这两个数组设置在一个列表中时，我无法获得这两个数组的正确值。

下面是我从服务器获得的 json 响应。 `User_Label_List`并不总是得到，但`Admin_Label_List`数组很常见。

```
{
    "User_Label_List": [
        {
            "iLabelID": "60",
            "vLabel": "At Ground"
        }
    ],
    "Admin_Label_List": [
        {
            "iLabelID": "53",
            "vLabel": "At School"
        },
        {
            "iLabelID": "51",
            "vLabel": "At Office"
        },
        {
            "iLabelID": "52",
            "vLabel": "At Work"
        },
        {
            "iLabelID": "50",
            "vLabel": "At None"
        },
        {
            "iLabelID": "49",
            "vLabel": "At Home"
        }
    ]
} 
```

这是我的代码。

```
try {
                        JSONObject jsonObject = new JSONObject(result);
                        JSONArray jsonArray = jsonObject.getJSONArray("Admin_Label_List");
                        labelarray = new ArrayList<LabelModel>();
                        for (int i = 0; i < jsonArray.length(); i++) {
                            labelModel = new LabelModel();
                            JSONObject labeljson = jsonArray.getJSONObject(i);
    //                      lableList.put("iLabelID", labeljson.getString("iLabelID"));
    //                      lableList.put("vLabel", labeljson.getString("vLabel"));
                            labelModel.setLabelId(labeljson.getString("iLabelID"));
                            labelModel.setLabelName(labeljson.getString("vLabel"));
                            labelarray.add(labelModel);
                        }

                        Log.e("length", "== "+jsonObject.length());
                        if (jsonObject.length() == 2) {

                        String arryName = jsonObject.names().getString(1);
                        if (arryName.equalsIgnoreCase("User_Label_List")) {
                            JSONArray userjsonArray = jsonObject.getJSONArray("User_Label_List");
                            userlabelarray = new ArrayList<LabelModel>();
                            for (int i = 0; i < userjsonArray.length(); i++) {
    //                          userLabelModel = new UserLabelModel();
                                JSONObject labeljson = userjsonArray.getJSONObject(i);
    //                          lableList.put("iLabelID", labeljson.getString("iLabelID"));
    //                          lableList.put("vLabel", labeljson.getString("vLabel"));
                                labelModel.setLabelId(labeljson.getString("iLabelID"));
                                labelModel.setLabelName(labeljson.getString("vLabel"));
                                userlabelarray.add(labelModel);
                            }

    //                      userlabelarray.addAll(labelarray);
                        }
                        List<LabelModel> union = new ArrayList<LabelModel>(labelarray);
                        union.addAll(userlabelarray);
                        customeLabelAdpater = new CustomeLabelAdpater(ChooselabelActivity.this, lableList);
                        listView.setAdapter(customeLabelAdpater);
                        } 
```

那么有人可以建议我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:28:27.967

您没有`LabelModel`第二次初始化您的，而您正在填充您的第二个数组数据，请您重新初始化您的`LabelModel`，

不要担心您已经填充的先前数据，因此在填充下一个数组数据时，您必须重新初始化您的`LabelModel`，希望它会起作用。

# wpf - 如何使 UserControl 在运行时（在 WPF 中）删除自身？

> ID：13741349
> 
> 赞同：2
> 
> 时间：2012-12-06T10:14:24.200
> 
> 标签：wpf, user-controls, dispose

我制作了一个`userControl`包含几个标签和复选框以及一个“x”按钮，用于在单击时自行删除。

`userControl`考虑到在我的 WPF 应用程序中，用户可以根据需要在运行时动态放置任意数量的这些，**并且**它们都没有`name`要寻址的属性，如何`UserControl`通过单击从应用程序中删除 a它是 -child- 按钮“x”（即在它的“x”按钮的事件处理程序中）？？？

* * *

我已经看了一千个地方，发现这两行代码**不起作用**：

```
((Grid)button.Parent).Children.Remove(this);
((Button)control.Parent).Content = null; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-06T11:56:17.087

如果您的控件已添加到任何类型的容器控件（即从 Panel 派生的类），则以下内容应该有效：

```
((Panel)this.Parent).Children.Remove(this); 
```

# java - 如何从列表中保留非常多的 100 条记录

> ID：13741351
> 
> 赞同：0
> 
> 时间：2012-12-06T10:14:31.813
> 
> 标签：java, hibernate, loops, jpa, persist

我的列表大小由 5000 条记录组成，我每次需要从列表中获取 100 条记录，然后每次保存到 100 条记录，最多有 5000 条记录保存到数据库如何实现这个逻辑？

```
private  List<DoTempCustomers> doTempCustomers;
for(DoTempCustomers tempCustomers:doTempCustomers){
try {
    temp=new TempCustomers();               
    BeanUtils.copyProperties(temp, doTemp);
    getEntityManager().persist(temp);
} 
```

我上面的代码是为每个循环保留所有 5000 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:17:45.870

尝试将列表分成几部分，然后对每个子列表进行操作。如果您需要如何拆分列表，可以参考此链接：[如何将数组列表拆分为相等的部分？](https://stackoverflow.com/questions/13678387/how-to-split-array-list-into-equal-parts)这给了你想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:28:24.510

您可以使用`subList`方法`List`来获得较小的视图`List`

```
private  List<DoTempCustomers> doTempCustomers;
//initialize doTempCustomers list
List<String> muSubList = doTempCustomers.subList(0, 100);
//this will return a view of the specified range 
//(here from 0 to 99, 0 -inclusive and 100 - exclusive) within this list 
```

参考[Javadoc 获取 List#subList](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList%28int,%20int%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:52:13.347

几天前我解决了同样的问题。我的示例代码每次从列表中保存**1000 条记录，而不是在您的情况下为 500 条。**

```
 public void persistData(){

    int tempTblCount = tempTblCount();     // 5000 in your case
    int loopCount = tempTblCount / 1000 + 1;
    int limit = 1;

    while (loopCount > 0) {

       // here i get list of data from temp table having query limit;
       List<MyCustomerVO> myCustomerList = getListFromTempTblData(limit);

       for (iterate over your list) {
              persist your record here;
       }
    }

    limit = limit + 1000;
    loopCount--;

   }

    public List<MyCustomerVO> getListFromTempTblData(int limit) {

    List<MyCustomerVO> getTempTblData = null;
    String sql = " select mobile_number,customer_no from temp_tbl limit "+limit+" , 1000 ";
    execute query;
    return list;

    } 
```

# javascript - dijit textareas 的同步高度

> ID：13741357
> 
> 赞同：0
> 
> 时间：2012-12-06T10:14:49.640
> 
> 标签：javascript, dojo

我在页面上连续有一组`dijit/form/Textarea`-dijit，我希望`height`它们之间是统一的，这样如果用户输入一个`textarea`并使其扩展，其他人就会随之扩展。它看起来比连续几个不同大小`textarea`的 s 要整洁得多。以前有人做过吗？有没有一个钩子我可以调整 a 的大小`dijit/form/textarea`来实现这一点？

# c# - 使用标签组件 C# 循环数据

> ID：13741359
> 
> 赞同：0
> 
> 时间：2012-12-06T10:15:01.327
> 
> 标签：c#, visual-studio

我想循环使用标签组件从查询中获取的一些数据。

这是我获取数据并读取数据的代码：

```
private void populatelblDesc() 
    {
        conn.Open();
        string query;
        query = "select de.emp_username, poc.order_no , poc.company_id_no from dc_emp de, purch_order_carton poc";
        OracleCommand cmd = new OracleCommand(query, conn);
        OracleDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            lblDesc.Text = dr["emp_username"].ToString();
        }
        dr.Close();
        conn.Close();
    } 
```

该查询返回：

```
**EMP_USERNAME**          **ORDER_NO**        **COMPANY_ID_NO**
Werner                    1                   1
Chris                     2                   1
Mike                      1                   2
Marc                      3                   1 
```

现在我想使用我的 NEXT 按钮来浏览数据。查询中的每一列都必须显示在单独的标签中。所以在加载时，第一个标签将显示“Werner”，第二个标签“1”，3d 标签“1”。点击下一个将在第一个标签中显示“克里斯”，第二个标签“2”和 3d 标签“1”再次点击下一个将显示“迈克”等

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:21:27.490

将 a`BindingSource`与`DataTable`和结合使用`DataBindings`。

要么在表单上放置一个并设置`bs.DataSource`到表格中，要么动态创建一个。

```
var table = new DataTable();
table.Load(reader);
var bs = new BindingSource(table, null);
lblDesc.DataBindings.Add("Text", bs, "emp_username"),

btnNext.Click += ()
{
    bs.MoveNext();
};

btnPrev.Click += ()
{
    bs.MovePrevious();
}; 
```

您甚至可以在表单上放置一个 BindingNavigator 并设置`bindingNavigator1.BindingSource`为您的 BindingSource。它将在没有一行代码的情况下管理 First/Previous/Next/Last 逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:37:00.300

将您的值保存在某处的列表中：

```
List<String> LabelTextList = new List<String>();
private void populatelblDesc() 
{
    conn.Open();
    query = "select emp_username from dc_emp";
    OracleCommand cmd = new OracleCommand(query, conn);
    OracleDataReader dr = cmd.ExecuteReader();
    while (dr.Read())
    {
        this.LabelTextList.add(dr["emp_username"].ToString());
    }
    dr.Close();
    conn.Close();
} 
```

然后使用一个整数值，从 0 开始并通过单击 next / prev 来增加/减少它

```
int i = 0;
public void next(){
    if (i+1 < this.LabelTextList.Count())
       lblText.text = this.LabelTextList[++i];
}
public void prev(){
    if (i-1 >= 0)
        lblText.text = this.LabelTextList[--i];
} 
```

如果你得到低于 0 或大于列表大小并且你完成了，请添加一些验证。

# javascript - Div鼠标悬停在Javascript中的div内敲击字体

> ID：13741363
> 
> 赞同：1
> 
> 时间：2012-12-06T10:15:17.317
> 
> 标签：javascript, firefox

这是我的网页网址。在此页面推荐部分中，我使用 javascript 编码来实现 div 的鼠标悬停和鼠标移出效果。它在 chrome 中运行良好。但是在 Firefox 中，当我们将鼠标悬停在推荐的部分上时，它会在 div 中触发字体。我不知道我在编码中犯了什么错误。

[http://sample.com/domain.php?id=1&mview=48](http://sample.com/domain.php?id=1&mview=48)

推荐页面的编码：

```
 <div id="mydiv" style="background:whitesmoke;height: 110px; width: 230px;margin-top: -20px;"  onmouseover="this.style.background='white';this.style.border='1px outset whitesmoke';this.style.textDecoration='line-through';" onmouseout="this.style.background='whitesmoke';this.style.border='none';">
    <div style="float: left;margin-top: 10px;margin-left: 5px;"><img src="upload/<?php echo $recommendimg['choice_image'] ?>" width="100" height="80"/></div>
    <div style="float: right; width: 110px;margin-top: 10px;height:95px;">
    <a id="pollnamerecompoll" href="pollpage.php?id=<?php echo $recommendedimgid; ?>&mview=<?php echo $mviews;?>">
    <div style="font-size: 12px;font-weight: 600;">Best <?php echo $recommendedrow['poll_name'] ?></div>
    </a>
    <a id='pollnamerecompoll' href='cusersprofile.php?oud=<?php echo $useridrec; ?>'>
    <div style="margin-top: 10px;font-size: 11px;">By <?php echo $getuserrec['first_name']; ?></div>
    </a>
    <div style="width: 110px;margin-top: 10px;">
    <div style="float:left;font-size: 11px;"><?php echo $mviews; ?> views</div>
    </div>
    </div>
</div> 
```

任何人都可以请帮助解决这个问题。提前致谢

# c# - Asp.net C# 手动将数据绑定到列表视图？

> ID：13741367
> 
> 赞同：0
> 
> 时间：2012-12-06T10:15:28.113
> 
> 标签：c#, asp.net

我正在尝试使用带有格式化的产品 ID 和数量字符串的 cookie。我已经设置好进行查询并获取 cookie 中每个项目的表数据。现在我需要获取数据，将其连接到列表视图。cookie 看起来像：1x4:23x9...

```
public partial class checkout : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        productTableAdapter ad = new productTableAdapter();

        HttpCookie c = Request.Cookies["cart"];
        if (c == null)
        {

        }
        else
        {
            string items = c.Value;
            new prod(items);
            if (items.Length > 0)
            {
                char[] delimiterChars = {':'};
                string[] orders = items.Split(delimiterChars);
                char[] del = {'x'};
                ObjectDataSource ods = new ObjectDataSource();
                foreach( string s in orders){
                    string[] proc = s.Split(del);
                    int id = int.Parse(proc[0]);
                    int quant = int.Parse(proc[1]);
                    DataSet1.productDataTable td = ad.GetDataByPID(id);
                    // something..?

                }
                ListView1.DataSource = ods;

                ListView1.DataBind();

            }

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:22:58.797

你为什么不绑定到一个`IList`？

```
 public class LVItemModel
 {
     public int Id { get; set; }
     public int Quantity { get; set; } 
 }

        ...

        string items = c.Value;
        if (items.Length > 0)
        {
            List<LVItemModel> list = new List<LVItemModel>();

            string[] orders = items.Split( new char[] { ':' } );
            foreach( string s in orders){

                string[] proc = s.Split(new char { 'x' });

                int id    = int.Parse(proc[0]);
                int quant = int.Parse(proc[1]);

                list.Add( new LVItemModel() { Id = id, Quantity = quant } );
            }

            ListView1.DataSource = list;
            ListView1.DataBind();

        } 
```

# ruby - POpen4错误倒带stderr

> ID：13741370
> 
> 赞同：1
> 
> 时间：2012-12-06T10:15:33.247
> 
> 标签：ruby

希望生成一个可以向其发出多个命令的进程。希望调用一个 bat 文件来为这个生成的进程设置一些环境变量，然后利用这些变量而不影响其他进程等

在 POPEN4 结束，这似乎完全符合我的要求，但是在 stderr.rewind 的倒带时看到错误

使用下面 popen4 提供的示例并看到以下输出

```
C:\>ruby envread.rb
pid        : 4452
stdout     : Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\>echo hello world!
hello world!

C:\>echo ERROR!  1>&2

C:\>
stderr     : ERROR!
C:/Ruby193/lib/ruby/gems/1.9.1/gems/POpen4-0.1.4/lib/popen4.rb:60:in `rewind': invalid argument (Errno::EINVAL)
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/POpen4-0.1.4/lib/popen4.rb:60:n `block in popen4'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/win32-open3-19-0.0.2/lib/win32/open3.rb:6:in `call'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/win32-open3-19-0.0.2/lib/win32/open3.rb:6:in `block in popen4'
    from C:/Ruby193/lib/ruby/1.9.1/open3.rb:208:in `popen_run'
    from C:/Ruby193/lib/ruby/1.9.1/open3.rb:90:in `popen3'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/win32-open3-19-0.0.2/lib/win32/open3.rb:5:in `popen4'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/POpen4-0.1.4/lib/popen4.rb:48:in `popen4'
    from envread.rb:8:in `<main>' 
```

所以为了澄清我必须使用wind32-open3-19，因为我使用的是ruby 1.9。

阅读 1.9 的 IO 文档，它说倒带不能用于流？我看到像 Aruba 这样的宝石使用 stderr 的倒带...

```
> rewind → 0 click to toggle source Positions ios to the beginning of
> input, resetting lineno to zero.
> 
> f = File.new("testfile") f.readline   #=> "This is line one\n"
> f.rewind     #=> 0 f.lineno     #=> 0 f.readline   #=> "This is line
> one\n" Note that it cannot be used with streams such as pipes, ttys,
> and sockets. 
```

我究竟做错了什么？

# java - JSpinner 与 SpinnerDateModel 奇怪的行为

> ID：13741371
> 
> 赞同：2
> 
> 时间：2012-12-06T10:15:38.343
> 
> 标签：java, swing, jspinner

我发誓这太奇怪了。我制作了一个 Spinner，使用具有当前日期、无限制和 Calendar.MINUTE 单位的新 SpinnerDateModel 设置模型。

正如文档中所说：

> 创建一个 SpinnerDateModel，它表示开始和结束之间的日期序列。nextValue 和 previousValue 方法通过按 calendarField 时间单位推进或反转当前日期值来计算序列的元素。start 和 end 参数可以为 null 以指示范围没有上限或下限。

这是我的代码：

```
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import javax.swing.JFrame;
import javax.swing.JSpinner;
import javax.swing.JSpinner.DefaultEditor;
import javax.swing.SwingUtilities;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import javax.swing.text.DateFormatter;
import javax.swing.text.DefaultFormatterFactory;

public class JSpinnerTest {

    public JSpinnerTest() {
        initComponents();
    }

    private void initComponents() {
        JFrame frame = new JFrame("JSpinner Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JSpinner spinner = new JSpinner();
        spinner.setModel(new javax.swing.SpinnerDateModel(new Date(), null, null, Calendar.MINUTE));
        SimpleDateFormat format = new SimpleDateFormat("HH:mm");

        ((DefaultEditor) spinner.getEditor()).getTextField().setFormatterFactory(new DefaultFormatterFactory(new DateFormatter(format)));

        System.out.println("ORIGINAL VALUE: " + spinner.getValue().toString());

        spinner.addChangeListener(new ChangeListener() {
            @Override
            public void stateChanged(ChangeEvent e) {
                System.out.println("VALUE: " + ((JSpinner) e.getSource()).getValue().toString());
            }
        });

        frame.add(spinner);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JSpinnerTest();
            }
        });
    }
} 
```

但是每次我点击小箭头按钮时，日期都会重置为 1970 年 1 月 1 日。为什么？

示例输出：

原始值：2012 年 12 月 6 日星期四 17:06:13 ICT

值：1970 年 1 月 1 日星期四 17:06:00 ICT

值：1970 年 1 月 1 日星期四 17:06:00 ICT

值：1970 年 1 月 1 日星期四 18:06:00 ICT

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:18:47.057

您正在修改附加到 Spinner 的编辑器使用的日期格式。看起来当您使用 HH:mm 格式时，其余字段都使用 epoch 进行初始化。如果您不更改日期编辑器使用的格式，它会按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:18:30.253

如果您输入日期格式以包含不发生这种情况的日期，则为“dd/mm/yy HH:mm”。我知道这不是你的要求，但我会假设当你没有明确说明日期时，它默认不使用它们。

# c# - 如何在C#中使用C++ DLL导出的接口指针

> ID：13741373
> 
> 赞同：6
> 
> 时间：2012-12-06T10:15:37.490
> 
> 标签：c#, c++, pinvoke

我有一个用 C++ 编写的 DLL，它导出一个函数 CreateRisk。该函数返回一个接口指针，如下所示：

```
extern "C"
{
    __declspec(dllexport) IRisk* __stdcall CreateRisk()
    {
        return new  Risk();

    }
} 
```

IRisk 派生自 IUnknown，并有一个自定义方法 Calculate：

```
class IRisk: public IUnknown                               
{
public:
    virtual int __stdcall Calculate(int i,double s) = 0;  
}; 
```

Risk 类实现了 IRisk 接口（这里省略了实现）。

我想要的是在 c# 中调用函数 CreateRisk 并获得对 IRisk 的引用。

我在 C# 中定义了一个包装器接口

```
 [InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]        
    public interface IRisk
    {
        [PreserveSig]                                            
        int Calculate(int i,double s);
    } 
```

我在 C# 中添加了一个 dll 条目

```
 [DllImport("Risk.dll")]
    extern static IntPtr CreateRisk(); 
```

我可以在 C# 中调用 CreateRisk 并获取 IntPtr 的值类型。有没有办法将 IntPtr 编组到 c# IRisk 接口，以便我可以在 C# 中调用 Calculate 方法？

我试过 Marshal.GetIUnknownForObjectInContext,Marshal.GetObjectForIUnknown，但无济于事。

我知道创建一个 COM 组件可以做到这一点。但是，COM 组件需要向系统注册。我想避免这些麻烦，让C#直接使用C++ dll导出的接口。

PS：

以下是我的风险类实现：

```
class IRisk : public IUnknown                               
{
public:
    virtual int __stdcall Calculate(int i,double y ) = 0;  
};

class Risk:public IRisk
{
    int count;
public:
    Risk();
    virtual int __stdcall Calculate( int i ,double y);
    virtual ULONG __stdcall AddRef();
    ULONG __stdcall Release();
    HRESULT __stdcall QueryInterface(const IID& riid,void **ppvObject);
};

Risk::Risk(){
    count=0;
}

ULONG __stdcall Risk::AddRef()
{
    return ++count;
}
ULONG __stdcall Risk::Release()
{
    return --count;
}
HRESULT __stdcall Risk::QueryInterface(const IID& riid,void **ppvObject) {
    *ppvObject=this;
    AddRef();
    return S_OK;
}
int __stdcall Risk::Calculate(int i ,double y) {
    return (int)(i+y);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:09:25.843

以下将起作用：

```
[DllImport("Risk.dll")]
extern static IRiskAssessment CreateRisk(); 
```

您需要在界面中添加一个 GUID：

```
[Guid("your GUID goes here")]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]        
public interface IRiskAssessment
{
    [PreserveSig]                                            
    int Calculate(int i,double s);
} 
```

显然，您需要在 C# 代码中使用与 C++ 代码中相同的 GUID！

**更新**

查看您的 C++ COM 对象实现，明显的错误在`QueryInterface`. 您不得返回`S_OK`所有 GUID。仅返回`S_OK`您实现的接口。为其他人返回`E_NOINTERFACE`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:56:48.627

如果我是你，我会使用[SWIG](http://www.swig.org/)为你的 C++ 代码生成 C# 接口，为你省去很多麻烦。另外，我认为您的程序集可能必须以[混合模式](https://stackoverflow.com/questions/2691325/c-cli-mixed-mode-dll-creation)编译，或者作为托管程序集。

# c# - 睡眠和/或锁定后的 Windows Phone 应用程序状态

> ID：13741376
> 
> 赞同：0
> 
> 时间：2012-12-06T10:15:44.963
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-7.1

我开发了一个 Windows Phone 7.1 应用程序，一切正常，我对此非常满意。虽然......在应用程序运行时让手机进入睡眠状态或在应用程序中锁定手机，然后解锁/唤醒手机 - 应用程序关闭，我必须重新启动它。

因此，这归结为您的应用程序如何从睡眠状态做出反应。如何处理此事件并让应用程序从中断处继续，而不是关闭应用程序并不得不手动重新启动它？

如果在“PhoneWake”或任何你称之为的地方，我可以在应用程序继续运行之前运行一些功能，那也很棒。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T14:48:55.420

微软发布了一本关于 windows phone 开发的免费电子书。它非常有用，它可能会回答这个问题以及您可能遇到的许多其他问题！你可以从这个网站下载这本书：http: [//blogs.msdn.com/b/microsoft_press/archive/2010/10/28/free-ebook-programming-windows-phone-7-by-charles-petzold.aspx](http://blogs.msdn.com/b/microsoft_press/archive/2010/10/28/free-ebook-programming-windows-phone-7-by-charles-petzold.aspx)

# javascript - 格式排序（Ymd H:i:s）在 Datatables.net 插件中不起作用

> ID：13741377
> 
> 赞同：0
> 
> 时间：2012-12-06T10:15:52.513
> 
> 标签：javascript, php, jquery, date, jquery-datatables

我在对日期列进行排序时遇到问题。我的日期是这种格式

```
Y-m-d H:i:s 
```

我得到这个输出：

```
2012-04-14 23:07:00
2012-01-14 22:40:14
2012-03-09 19:03:20
2012-03-12 16:00:28
2012-05-01 16:09:38
2012-02-11 05:07:08
2012-01-17 15:15:09
2012-03-10 16:02:20
2012-02-09 14:33:19 
```

这是我的初始化：

```
$(document).ready(function() {
        oTable=$('#jphit').dataTable( {
          "sDom": 'T,C<"clear">lfrtip',
             "oTableTools": {
            "sSwfPath": "swf/copy_csv_xls_pdf.swf"
        },
             "oColVis": {
             "buttonText": "Extend table",
            "activate": "mouseover"
        },
        "aoColumnDefs": [
      { "bVisible": false, "aTargets": [ 2 , 4 , 6] }
    ],
            "aoColumns": [
              {
                "mDataProp": null,
                "sClass":"center",
                "sDefaultContent": '<img src="images/plus-icon.png" style="width:27px; height:27px;display: inline;">'
              },
              { "mDataProp": 0 }, //date column
              { "mDataProp": 1 },
              { "mDataProp": 2 },
              { "mDataProp": 3 },
              { "mDataProp": 4 },
              { "mDataProp": 5 },
              { "mDataProp": 6 }
            ],
            "aaSorting": [[0,'desc']], //sort date column
            "bProcessing": true,
            "bSort": true,
            "sPaginationType": "full_numbers",
            "bServerSide": true,
            "sScrollY": "500px",
            "bDeferRender": true,
            "sAjaxSource": "history_table.php"
        } ); 
```

这是我的 PHP 部分：

```
$aRow[$iTimestampCol] = date( 'Y-m-d H:i:s', $aRow[$iTimestampCol] ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:54:36.017

我想你应该看到这个[http://datatables.net/plug-ins/sorting](http://datatables.net/plug-ins/sorting)。有一些示例如何按日期排序。

# azure - Azure - 为平滑流式处理准备内容

> ID：13741379
> 
> 赞同：2
> 
> 时间：2012-12-06T10:15:54.127
> 
> 标签：azure, smooth-streaming, azure-media-services

在我的 Azure 编码任务完成后，我将一堆 ISMV/ISMA 文件存储到 Azure blob 中。现在我希望它们可用于平滑流式传输。我怎样才能做到这一点？

我在 Internet 上找到的文章说如何使用 Adaptive Streaming Azure 实用程序将 ISMV 文件从本地 PC 上传到 Azure。但是我的文件已经在 Azure 存储中，我不想下载它们并再次上传。

有人可以建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:43:03.907

非常详细且技术准确的[“如何：提供流媒体内容”](http://www.windowsazure.com/en-us/develop/media-services/how-to-guides/deliver-streaming-content/)将让您清楚地了解如何为您的用户提供流畅的流媒体。

除此之外，您还可以浏览WaMediaWeb 项目中的[自述文件](https://github.com/astaykov/WaMediaWeb/blob/master/Readme.markdown)和[代码：](https://github.com/astaykov/WaMediaWeb/blob/master/WaMedia.Common/Implementations/LocatorService.cs)

```
 public string GetSmoothStreamingOriginLocator(Models.Asset assetToStream)
    {
        // Get a reference to the manifest file from the collection 
        // of streaming files in the asset. 
        var manifestFile = assetToStream.MediaAsset.AssetFiles.Where(x => x.Name.EndsWith(".ism")).FirstOrDefault();
        // Cast the reference to a true IFileInfo type. 
        if (null == manifestFile)
        {
            return null;
        }

        // Create an 1-day readonly access policy. 
        IAccessPolicy streamingPolicy = this.MediaService.MediaContext.AccessPolicies.Create("Streaming policy",
            TimeSpan.FromDays(1),
            AccessPermissions.Read);

        // Create the origin locator. Set the start time as 5 minutes 
        // before the present so that the locator can be accessed immediately 
        // if there is clock skew between the client and server.
        ILocator originLocator =
            (from l in this.MediaService.MediaContext.Locators
             where l.AssetId.Equals(assetToStream.MediaAsset.Id)
             select l).FirstOrDefault();

        if (originLocator == null)
        {
            originLocator = this.MediaService.MediaContext
                .Locators.CreateLocator(LocatorType.OnDemandOrigin, assetToStream.MediaAsset,
             streamingPolicy,
             DateTime.UtcNow.AddMinutes(-5));
        }
        // Create a full URL to the manifest file. Use this for playback
        // in streaming media clients. 
        string urlForClientStreaming = originLocator.Path + manifestFile.Name + "/manifest";

        // Display the full URL to the streaming manifest file.
        Console.WriteLine("URL to manifest for client streaming: ");
        Console.WriteLine(urlForClientStreaming);

        return urlForClientStreaming;
    } 
```

**更新**

**Azure 媒体服务目前不**支持CDN 。以前的 SDK/API 中曾经有一个 AzureCdnOriginlocator，但现在已删除。因此，在 Azure 媒体服务的当前公共预览状态下，您无法使用 CDN。您只能使用 OnDemandOrigin Locator 进行流畅的流式传输。

您还可以选择获取 SAS 定位器。但是，您不能将 SAS 定位器用于平滑流，因为它只会让您访问清单，而不是存储帐户上的其余文件（不同比特率块）。

**更新 2**

github 上的我的代码是最新的（最新的）API 和 SDK。

**更新 3**

我错了！刚刚发现了一些关于 CDN 的东西。因此，关于[如何：启用 CDN](https://www.windowsazure.com/en-us/develop/net/how-to-guides/media-services/#enable-cdn)的文档是正确的，但有点不完整。

请按照该操作方法中描述的步骤进行操作。激活 CDN 的媒体服务帐户后，通过所述的手动过程，您将能够使用您的 CDN 端点。

话虽如此， OnDemandOrigin 定位器将产生如下结果：

> [http://wamsamsreg001orig-hs.cloudapp.net/7f98142c-b513-40be-8d3c-5bf73fe442bb/2012-10-12-320.ism/manifest](http://wamsamsreg001orig-hs.cloudapp.net/7f98142c-b513-40be-8d3c-5bf73fe442bb/2012-10-12-320.ism/manifest)

您必须将 替换为`wamsamsreg001orig-hs.cloudapp.net`您的 Azure CDN 端点，类似于`az02930.vo.msecnd.net`获取流清单的新 URL：

> [http://az02930.vo.msecnd.net/7f98142c-b513-40be-8d3c-5bf73fe442bb/2012-10-12-320.ism/manifest](http://az02930.vo.msecnd.net/7f98142c-b513-40be-8d3c-5bf73fe442bb/2012-10-12-320.ism/manifest)

希望它有点清楚。您不能通过 API 和/或 SDK 自动创建 CDN，您必须手动操作字符串，并且您必须知道您的 CDN 端点。

这对我来说也是新事物。我必须更新我的代码 - 提供 CDN 的部分。

另外，请注意，定位器在创建时不会立即可用。创建后大约 30-40 秒后，定位器将可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:42:25.623

您是否看过这篇关于[如何使用 Windows Azure 媒体服务](http://www.windowsazure.com/en-us/develop/net/how-to-guides/media-services/)的操作指南文章？

> 媒体服务为平滑流、Apple HTTP 实时流和 MP4 格式提供流源支持。

因此，您可以尝试使用此服务来实现您的目标。不能肯定地说，但对我来说，这部分对你来说可能很有趣：

[如何：提供流媒体内容](http://www.windowsazure.com/en-us/develop/net/how-to-guides/media-services/#stream-asset)：

> 例如，您可以创建一个称为定位器的直接 URL，以在媒体服务源服务器上流式传输内容。如果您提供定位器，Microsoft Silverlight 等客户端应用程序可以直接播放流内容。

[MSDN 上的](http://msdn.microsoft.com/en-us/library/hh973629)
[Windows Azure 媒体服务 Windows Azure 媒体服务论坛](http://social.msdn.microsoft.com/Forums/en-US/MediaServices/threads)

# php - php div 内容交换 - 如何包含在 echo 命令中

> ID：13741382
> 
> 赞同：-5
> 
> 时间：2012-12-06T10:16:01.693
> 
> 标签：php, mysql

句法：

```
 echo "<link rel='stylesheet' type='text/css' href='css/mdesign.css' />"; 
echo "<div id=swap>";
echo "<div id=one>One</div>";
echo "<div id=two>Two</div>";
echo "<div id=three>Three</div>";
echo "</div>";
echo "<a href=#one>One</a>";
echo "<a href=#two>Two</a>";
echo "<a href=#three>Three</a>"; 
```

我如何更改上面的源代码：

[http://www.visibilityinherit.com/code/css-content-swap-demo1.php](http://www.visibilityinherit.com/code/css-content-swap-demo1.php) - 原始代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:21:36.210

你还需要添加这个 CSS

```
<style type="text/css">
#swap {
float:right;
height:30em;
width:300px;
overflow:hidden;
border:1px solid;
}
#one, #two, #three {
height:30em;
}
#one{background:red;}
#two{background:blue;}
#three{background:green;}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:22:10.983

只是一些建议：首先，将标签属性的值括在引号中是一种很好的做法。例如：

```
echo "<div id=swap>";   becomes
echo "<div id='swap'>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:23:41.697

可能链接到您的 css 文件的路径错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:25:54.653

该示例依赖于特定的 CSS 布局，使用锚标记来切换内容。它在生产环境中不实用。本质上它是一个隐藏滚动条的盒子。单击锚链接时，它会将所选内容移动到视图中，就好像它已经切换了内容一样。您可以通过关闭#swap div 上的'overflow:hidden' 来测试它。

您的问题表明这是一个 PHP 问题，但它完全不相关。该示例是一个 HTML/CSS 实现，只要您从 PHP 输出正确的 HTML，它就会是一个 CSS 错误。

正如我之前提到的，这种“内容切换”对于 CSS 实验之外的任何东西都没有多大用处。我来看看[jQuery 的 html() 方法](http://api.jquery.com/html/)。

# android - SQL 不会先创建表（或数据库？）

> ID：13741385
> 
> 赞同：1
> 
> 时间：2012-12-06T10:16:21.280
> 
> 标签：android, sql, android-sqlite

在 logcat 我有这个错误：

```
12-05 19:20:26.696: E/SQLiteDatabase(1415): Error inserting lon=5.25 lat=7.52 name=null
12-05 19:20:26.696: E/SQLiteDatabase(1415): android.database.sqlite.SQLiteException: no such table: position (code 1): , while compiling: INSERT INTO position(lon,lat,name) VALUES (?,?,?) 
```

我尝试在名为：位置的表中插入 3 个值：名称、纬度、经度。在代码中我没有任何错误并且应用程序不会崩溃。我已将插入值的事件附加到带有 onClickListener 的按钮（当用户按下按钮时，插入值）。

创建数据库的代码：

> 公共类 listagpsdb {
> 
> ```
> SQLiteDatabase mDb;
> DbHelper mDbHelper;
> Context mContext;
> private static final String DB_NAME="listagps";
> private static final int DB_VERSION=1;
> 
> public listagpsdb(Context ctx){
>         mContext=ctx;
>         mDbHelper=new DbHelper(ctx, DB_NAME, null, DB_VERSION);
> }
> 
> public void open(){  //il database su cui agiamo è leggibile/scrivibile
>         mDb=mDbHelper.getWritableDatabase();
> 
> }
> 
> public void close(){ 
>         mDb.close();
> }
> 
> public void insertPosition(String name,double lat, double lon){ 
>         ContentValues cv=new ContentValues();
>         cv.put(PositionsMetaData.POSITIONS_NAME_KEY, name);
>         cv.put(PositionsMetaData.POSITIONS_LATITUDE_KEY, lat);
>         cv.put(PositionsMetaData.POSITIONS_LONGITUDE_KEY, lon);
>         mDb.insert(PositionsMetaData.POSITIONS_TABLE, null, cv);
> }
> 
> public Cursor fetchProducts(){ 
>         return mDb.query(PositionsMetaData.POSITIONS_TABLE, null,null,null,null,null,null);               
> }
> 
> static class PositionsMetaData {  
>         static final String POSITIONS_TABLE = "position";
>         static final String ID = "_id";
>         static final String POSITIONS_NAME_KEY = "name";
>         static final String POSITIONS_LATITUDE_KEY = "lat";
>         static final String POSITIONS_LONGITUDE_KEY = "lon";
> }
> 
> private static final String POSITIONS_TABLE_CREATE = "CREATE TABLE IF NOT EXISTS"  
>                 + PositionsMetaData.POSITIONS_TABLE + " (" 
>                 + PositionsMetaData.ID+ " integer primary key autoincrement, "
>                 + PositionsMetaData.POSITIONS_NAME_KEY + " text, "
>                 + PositionsMetaData.POSITIONS_LATITUDE_KEY + " double not null);"
>                 + PositionsMetaData.POSITIONS_LONGITUDE_KEY + "double not null);";
> 
> private class DbHelper extends SQLiteOpenHelper { 
> 
>         public DbHelper(Context context, String name, CursorFactory factory,int version) {
>                 super(context, name, factory, version);
>         }
> 
>         @Override
>         public void onCreate(SQLiteDatabase _db) { 
>                 _db.execSQL(POSITIONS_TABLE_CREATE);
>         }
> 
>         @Override
>         public void onUpgrade(SQLiteDatabase _db, int oldVersion, int newVersion) {
> 
>         }
> 
> } 
> ```
> 
> }

在您看到的代码中，我只想在创建数据库时创建表。

这是活动类的代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_navi);

                Button SalvaLocation = (Button) findViewById(R.id.SalvaLocation);
                final listagpsdb db = new listagpsdb(getApplicationContext());
                SalvaLocation.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View view) {

                    db.open(); 

                    String name = null;
                    Double lat = 7.52;
                    Double lon = 5.25;
                    db.insertPosition(name, lat, lon);

                    db.close();

                    }
                }); 
```

**现在我不明白为什么没有创建数据库/表。有人有想法吗？** 如果创建了数据库，在 AVD 内存中可以看到一个技巧？

感谢所有想帮助我的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:58:03.337

更新您的代码在`PositionsMetaData.POSITIONS_LATITUDE_KEY`..

```
private static final String POSITIONS_TABLE_CREATE = "CREATE TABLE IF NOT EXISTS"  
                + PositionsMetaData.POSITIONS_TABLE + " (" 
                + PositionsMetaData.ID+ " integer primary key autoincrement, "
                + PositionsMetaData.POSITIONS_NAME_KEY + " text, "
                + PositionsMetaData.POSITIONS_LATITUDE_KEY + " double not null,"
                + PositionsMetaData.POSITIONS_LONGITUDE_KEY + " double not null);"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:22:10.483

是的，如果已创建数据库，您可以看到它！..

去`Window -> show view -> File Explorer`，..

在那去`data -> data -> your package name-> and Database -> Your db`

之后，您可以使用 SQL open db 打开您的数据库和文件。

# oracle - “&”和“:”的区别（绑定变量的方法）

> ID：13741395
> 
> 赞同：0
> 
> 时间：2012-12-06T10:17:12.280
> 
> 标签：oracle, oracle10g, sqlplus

如果我从 Pl-sql 命令提示符运行命令以一一插入多行而无需再次重写语句，我们可以使用`&`运算符，如下图所示。 ![在此处输入图像描述](../Images/447468b9785065512fd30f058d68ff3b.png)

如果我为相同目的使用 GUI 方法，我必须使用`:`操作符，如下图所示 ![在此处输入图像描述](../Images/2bed8147ad555cc8e887e0e1bcfed5e5.png)

现在我的问题是->为什么我们不能`&`在 GUI 中使用运算符，如果我们使用它会出错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:49:07.840

`&`运算符不是绑定方法 - 它是[`substitution variable`](http://docs.oracle.com/cd/B19306_01/server.102/b14357/ch5.htm#CACIFHGB). 它具有完全不同的使用范围。像这样：

```
18:46:18 TEST@oars_sandbox> accept table_name char prompt "enter table name > "
enter table name > dual
18:46:42 TEST@oars_sandbox> select * from &table_name
18:46:47   2  /

D
-
X 
```

基本上，sql*plus（您正在使用的命令行工具）将脚本主体中的这些变量替换为它们在运行时的值。它为您设计脚本提供了极大的灵活性——例如，动态更改您的 sql*plus 脚本（甚至匿名 pl/sql 块）逻辑。例如，这就是我为假脱机文件分配文件名的方式：

```
col filename noprint new_value spool_file
select '&spoolpath\'
       ||       to_char(sysdate, 'yyyymmdd_hh24mi') 
       ||'_'|| '&_user' 
       ||'_'|| '&_connect_identifier' 
       ||'_'|| '&mysid'
       ||   '.log' as filename 
  from dual;
set termout on
prompt spooling to &spool_file
spool "&spool_file" replace 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:40:44.480

这两种绑定变量的方法都不是 SQL 引擎的一部分：它们都是客户端的便利。由于客户不同，它们具有不同的便利功能。

您所说的“Pl-sql 命令提示符”不是这样的：它是*客户端工具*SQL*Plus 的提示符，而不是像过程语言 PL/SQL 那样的数据库的一部分。

您正在使用的另一个工具类似于 APEX 中的 SQL 工作表。我想如果我猜测一下，我会说他们选择了 ':' 而不是 '&'，因为它是多年后开发的，当时似乎是更自然的选择。Oracle Express Edition 的 Apex 界面设计简洁明了，不向后兼容 SQL*Plus。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:40:48.113

您遇到的是 SQLplus 的文本替换机制（以及实现相同扩展的工具）。

您可以通过以下方式关闭它：

```
SET DEF OFF 
```

或者您可以切换到不同的字符（本例中的加号）：

```
SET DEF + 
```

据我所知，您使用的 Oracle 工具没有实现 SQLplus 扩展。但是 SQL Developer（来自 Oracle 的免费 G​​UI 工具）可以。

# servicestack - ServiceStack CORS 功能

> ID：13741397
> 
> 赞同：4
> 
> 时间：2012-12-06T10:17:14.257
> 
> 标签：servicestack, cors

使用新的 Service 实现，我是否必须为我的所有服务提供一个 Options 方法？

使用我的所有服务当前使用的旧 ServiceBase 方法，OPTIONS 返回 OK，但没有 Access-Control-Allow-Origin 标头。

这是一个例子：

[https://github.com/JonCanning/SSCors](https://github.com/JonCanning/SSCors)

HelloService 使用服务

GoodbyeService 使用 ServiceBase

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T18:57:29.690

因为 ServiceStack 的旧 API 强制执行基于接口的 API，它只支持 GET、POST、PUT、DELETE、PATCH 请求。处理 OPTION 请求，我们本质上是一个权宜之计，只有一个实现来发出配置的标头并关闭响应。

使用[ServiceStack 的新 API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)，不再有任何限制，因为您现在只需在 IService 上使用其名称即可处理任何 HTTP 动词。现在，这使您可以单独处理特定请求的所有动词。但现在它不再为您隐式处理，需要一个实现来通过服务处理它。

您可以继续处理所有 OPTIONS 请求，方法是使用任何[预定义的钩子](https://github.com/ServiceStack/ServiceStack/wiki/Order-of-Operations)在它到达服务之前对其进行一般处理。

例如

```
Plugins.Add(new CorsFeature()); //Registers global CORS Headers

this.RequestFilters.Add((httpReq, httpRes, requestDto) => {
   //Handles Request and closes Responses after emitting global HTTP Headers
    if (httpReq.HttpMethod == "OPTIONS") 
        httpRes.EndRequest();
}); 
```

# google-chrome - 限制 Chrome 可用的 CPU 和资源

> ID：13741398
> 
> 赞同：16
> 
> 时间：2012-12-06T10:17:14.180
> 
> 标签：google-chrome, throttling

我正在尝试在 Chrome 上运行的低规格系统上模拟应用程序的感觉。是否可以限制 CPU 并限制资源？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-08-02T21:26:14.243

CPU 节流在 Chrome stable 中的 Performance DevTools 设置下可用。

开发工具 > 性能选项卡 > 设置（齿轮图标）> CPU

[![Chrome DevTools 性能 CPU 节流](../Images/1065293c061d0f68f9ee3c5bbbcb0524.png)](https://i.stack.imgur.com/kj15b.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-22T09:45:38.570

Chrome 引入了 CPU 节流（截至 2016 年 1 月 22 日，它在金丝雀频道中。**更新**：现在在最新的 Chrome 中可用，在 v54.0 中检查）。

转到 DevTools -> Timeline 并从下拉列表中选择。

[![Chrome CPU 节流](../Images/b5e1133e19fb80eafc8be99663842008.png)](https://i.stack.imgur.com/dWTZR.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-08T09:27:44.903

这取决于您的平台和可用的工具。通常，您可以在 BIOS 设置中设置 CPU 时钟。您还可以在操作系统中使用 CPU 时钟管理软件工具来进行更动态的控制。

您还可以在 Chrome 的开发工具中模拟网络数据节流。如果启用设备仿真模式，则网络限制选项变为可用。

# c# - 使用 LINQ to Entities（实体框架）比较日期

> ID：13741399
> 
> 赞同：15
> 
> 时间：2012-12-06T10:17:14.730
> 
> 标签：c#, entity-framework, datetime

我需要从我的数据库中返回一个项目列表，这些项目在项目提供的日期的预定时间到期。我的**错误**代码如下：

```
return All().Where(o => new DateTime(o.expiry_date.Year, o.expiry_date.Month, o.expiry_date.Day, 17, 30, 0) >= DateTime.Now) 
```

我得到的错误是：

**LINQ to Entities 仅支持无参数构造函数和初始化程序**

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-06T10:19:13.323

请改用[EntityFunctions](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx)。也许[是 CreateDateTime](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.createdatetime.aspx)方法。

所以可能是这样的：

```
return All().Where(o => EntityFunctions.CreateDateTime(o.expiry_date.Year, o.expiry_date.Month, o.expiry_date.Day, 17, 30, 0) >= DateTime.Now) 
```

**更新：**

使用 EF6 时，请改用[DbFunctions](http://msdn.microsoft.com/en-us/library/system.data.entity.dbfunctions%28v=vs.113%29.aspx)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-24T09:01:07.123

您可以使用：

```
var result = await db.Articles
          .Where(TruncateTime(x.DateCreated) >= EntityFunctions.TruncateTime(DateTime.Now))
          .ToListAsync(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T10:25:39.060

Please use:

```
return All().Where(o => EntityFunctions.CreateDateTime(o.expiry_date.Year, o.expiry_date.Month, o.expiry_date.Day, 17, 30, 0) >= DateTime.Now) 
```

# openerp - OpenERP 自定义日记帐凭证视图

> ID：13741401
> 
> 赞同：1
> 
> 时间：2012-12-06T10:17:18.693
> 
> 标签：openerp

我正在尝试进行一个简单的自定义，但由于某些奇怪的原因无法正常工作：

**初始化**.py：

```
import account_voucher_hash 
```

**开放程序**.py****

 **```
{
"name" : "Hash Voucher",
"version" : "1.1",
"depends" : [
              'base',
              'account_voucher',
            ],
"author" : "me",
"description": """The Module customizes Vouchers""",

'website': 'http://abc.com',
'init_xml': [],
'update_xml': [
    'account_voucher_view_hash.xml',
],
'demo_xml': [],
'installable': True,
'active': False,
} 
```

**account_voucher_hash.py**

```
from osv import fields, osv
import netsvc

class account_voucher_hash(osv.osv):
_name = 'account.voucher'
_inherit = 'account.voucher'
_columns={
          'test1': fields.integer('Test 1'),
          'create_uid': fields.many2one('res.users', 'Created By'),
          'creator_name': fields.related("create_uid", "name", type="char", string="Creator Name"),
          'write_uid': fields.many2one('res.users', 'Modified By'),
          'write_name': fields.related("write_uid", "name", type="char", string="Modifier Name"),
          }
account_voucher_hash() 
```

**account_voucher_view_hash.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<openerp>
 <data>

    <record id="view_voucher_form" model="ir.ui.view">
        <field name="name">account_voucher_hash_form</field>
        <field name="model">account.voucher</field>
        <field name="type">form</field>
        <field name="priority" eval="15"/>
        <field name="arch" type="xml">
            <field name="inherit_id" ref="account_voucher.view_voucher_form" />
            <field name="arch" type="xml">
                <field name="reference" select="2" position="after">
                    <field name="test1"/>
                    <field name="create_uid"/>
                    <field name="creator_name"/>
                    <field name="write_uid"/>
                    <field name="write_name"/>
                </field>
            </field>
        </field>
    </record>

  </data>
</openerp> 
```

Journal Voucher 表单不显示新字段。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:02:19.077

您必须从 .py 中删除 create_uid 和 creator_name：

```
_columns = {
    'test1': fields.integer('Test 1'),
    'create_uid': fields.many2one('res.users', 'Created By', readonly=True),
    'creator_name': fields.related("create_uid", "name", type="char", string="Creator Name"),
    'write_uid': fields.many2one('res.users', 'Modified By'),
    'write_name': fields.related("write_uid", "name", type="char", string="Modifier Name"),
} 
```

“create_uid”必须是只读的。

在您的 .xml 中尝试此代码：

```
<record id="view_voucher_form" model="ir.ui.view">
    <field name="name">account_voucher_hash_form</field>
    <field name="model">account.voucher</field>
    <field name="type">form</field>
    <field name="priority" eval="15"/>
    <field name="inherit_id" ref="account_voucher.view_voucher_form"/>
    <field name="arch" type="xml">
            <field name="reference" select="2" position="after">
                <field name="test1"/>
                <field name="create_uid"/>
                <field name="creator_name"/>
                <field name="write_uid"/>
                <field name="write_name"/>
            </field>
        </field>
</record> 
```**

# jquery - Symfony 2 中的 jQuery 地址

> ID：13741402
> 
> 赞同：3
> 
> 时间：2012-12-06T10:17:18.407
> 
> 标签：jquery, url, symfony

我尝试使用 Asual 的 jQuery Address 将我的 Symfony 2.0 网站转换为像 Deezer、Grooveshark、Ubster 这样的 ajax 抓取网站`#!`。

但是当我尝试实现它时，所有页面都会一次又一次地重新加载......可能是因为渲染的所有ajax调用都包括包含JS地址的布局，所以尝试再次调用等等。

我不知道如何在 Symfony 2 中正确集成这个插件。也许你对像 Deezer 和 cie 这样的爬虫有不同的建议。

我正在使用[jQuery 地址](http://www.asual.com/jquery/address/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:28:39.210

只需使用 JQuery ajax 调用您定义的 url 来呈现仅包含所需内容而没有全局模板的视图。

# wireshark - 构建解析器时：如何声明错误？

> ID：13741404
> 
> 赞同：0
> 
> 时间：2012-12-06T10:17:26.370
> 
> 标签：wireshark, wireshark-dissector

我正在构建一个解析器，我想知道是否可以明确声明错误。例如：如果某个东西的长度应该是 0，但它不是，那么我想说“错误，有问题”

提前谢谢。

多亏了“SidR”，你应该采取以下路线，并对他做一些变化。（记得包括`epan/expert.h`）

```
expert_add_info_format(pinfo, acp_data_tree, PI_MALFORMED, PI_WARN, "Length > 0"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:36:53.577

查看[专家信息。](http://www.wireshark.org/docs/wsug_html_chunked/ChAdvExpert.html)

我认为必要的功能在“epan/expert.h”上。您可以查看“epan/dissector/packet-tcp.c”以获取示例实现。

# jsf - 将屏幕转换为 Primefaces 数据表

> ID：13741406
> 
> 赞同：1
> 
> 时间：2012-12-06T10:17:36.303
> 
> 标签：jsf, datatable, primefaces

![在此处输入图像描述](../Images/69ccfcf94d6cc9c0e6be8f9c19e49bcc.png)![数据表](../Images/d88c665aa28df08ec02713388a8db217.png)

我需要将上面的屏幕转换为动态数据表。在我的屏幕截图中，国内操作系统将是静态字段。但是当我点击国内操作系统标签之外的 + 按钮时，对应的两个行 DTJP 和 DCJP 应该来自数据库，最初会显示作为 blnak 行。但是单击 + 按钮应在屏幕上显示带有输入文本字段的行。我尝试了以下代码：

```
 <p:columnGroup type="header">
                                     <p:row>
                                            <p:column rowspan="2" colspan="1" headerText="Resource Type" />
                                            <p:column colspan="12" headerText="2013" />
                                            <p:column rowspan="2" headerText="'14" />
                                            <p:column rowspan="2" headerText="'15" />
                                            <p:column rowspan="2" headerText="'16" />
                                            <p:column rowspan="2" headerText="'17" />
                                     </p:row>
                                     <p:row>
                                            <p:column headerText="4" />
                                            <p:column headerText="5" />
                                            <p:column headerText="6" />
                                            <p:column headerText="7" />
                                            <p:column headerText="8" />
                                            <p:column headerText="9" />
                                            <p:column headerText="10" />
                                            <p:column headerText="11" />
                                            <p:column headerText="12" />
                                            <p:column headerText="1" />
                                            <p:column headerText="2" />
                                            <p:column headerText="3" />
                                     </p:row>

                              </p:columnGroup>

                              <p:column>
                               Employee
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>
                               <h:inputText /> 
                              </p:column>
                              <p:column>

                              </p:column>
                              <p:column>

                              </p:column>

                       </p:dataTable> 
```

已编辑-我需要使用 primefaces 在 jsf 中创建一个数据表，其中我需要有一行，其中一列包含带有一个按钮的静态数据。当我单击此按钮时，其他列（在同一行内）应该显示一些应从数据库中填充带有标签和数据的输入文本字段。这意味着如果有两条记录，则该行中的列应根据记录数跨越到行数中。这意味着一列将是静态的并且该行中的其他列应该动态跨越，并且应该在行内的列中添加一些组件。请帮助我如何做到这一点？

![](../Images/726a39cac0bf04efe4479c0404fb3123.png)

# mysql - 不管用

> ID：13741407
> 
> 赞同：0
> 
> 时间：2012-12-06T10:17:40.190
> 
> 标签：mysql, spring

大家好，我这里有简单的 mysql 脚本。

```
delimiter $$
use ta

DROP FUNCTION IF EXISTS bin2uuid;
CREATE FUNCTION bin2uuid(bin BINARY(16)) RETURNS char(36) CHARSET utf8
    DETERMINISTIC
BEGIN
  DECLARE hex CHAR(32);
  IF(bin IS NULL) THEN
    RETURN NULL;
  ELSE
    SET hex = HEX(bin);
    RETURN LOWER(CONCAT(LEFT(hex, 8),'-'
                          ,SUBSTR(hex, 9,4),'-'
                          ,SUBSTR(hex,13,4),'-'
                          ,SUBSTR(hex,17,4),'-'
                          ,RIGHT(hex, 12)
                          ));
  END IF;
END;

DROP FUNCTION IF EXISTS uuid2bin;

CREATE FUNCTION `uuid2bin`(guid CHAR(36))
   RETURNS binary(16)
   DETERMINISTIC
   BEGIN
      IF (guid IS NULL)
      THEN
         RETURN NULL;
      ELSE
         SET @newguid = IFNULL(guid, UUID());
         RETURN UNHEX(REPLACE(@newguid, '-', ''));
      END IF;
   END;

DROP FUNCTION IF EXISTS calcAllocTradPartyName;   

CREATE FUNCTION calcAllocTradPartyName(vTradeId varchar(36))
  RETURNS varchar(200)
  BEGIN
    DECLARE pTradingPartName varchar(200);

  SELECT
    IF(tpo.broker = 1,IFNULL(GROUP_CONCAT(DISTINCT  IFNULL(tp.symbol,otp.name) SEPARATOR ', '),'TRADAIR'),tpo.name) INTO pTradingPartName
    FROM trades t
    INNER JOIN orderslogadd o ON t.orderId = o.orderId
    INNER JOIN users u ON o.userId = u.guid
    LEFT JOIN orgs tpo ON u.orgId = tpo.guid
    LEFT JOIN tradesAlloc tra ON t.guid = tra.tradeId
    LEFT JOIN tradingparty tp ON tra.tradingpartyId = tp.id
    LEFT JOIN orgs otp ON tra.tradingpartyId = otp.guid
    WHERE t.guid = uuid2bin(vTradeId);

  RETURN pTradingPartName;
  END;   

$$ 
```

这是我`app-context.xml`初始化数据库的一部分。问题是，当我在 mysql 或 TOAD 中运行脚本时，它工作正常，但是当 Spring 尝试运行时，它给了我以下异常：

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CREATE FUNCTION bin2uuid(bin BINARY(16)) RETURNS char(36) CHARSET utf8     DETER' at line 1
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'delimiter' at line 1 
```

我试图在没有分隔符的情况下运行它，`$$`但是在这个异常上它失败了：

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DROP FUNCTION IF EXISTS bin2uuid; CREATE FUNCTION bin2uuid(bin BINARY(16)) RETUR' at line 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:28:53.190

您还没有显示您的配置，但我猜您也需要告诉 Spring 分隔符（没有标准的 SQL 脚本语句分隔符）。该元素具有用于此目的的分隔符属性。

# c - 在C中计算每秒平均值

> ID：13741411
> 
> 赞同：2
> 
> 时间：2012-12-06T10:17:55.523
> 
> 标签：c, math, timer

我有一个递增的整数值，并想找到该整数的每秒平均值。我知道除非您执行特定且复杂的操作，否则 C 中不存在计时器 [我是 C 新手] 有没有更简单的方法可以做到这一点？最好在进行计算时重置该值，以免内存中存在如此大的数字，因为该应用程序将运行很长时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T10:24:03.437

I think you will want to include `time.h`, and use some of its functions and structs (this is actually not a bad way of learning the basics of C). There is an explanation and a few examples [here](http://www.acm.uiuc.edu/webmonkeys/book/c_guide/2.15.html).

If you need sub-second accuracy I suggest you use [`clock_gettime()`](http://linux.die.net/man/3/clock_gettime), which will give you nanosecond resolution.

Here is an example:

```
#include <stdio.h>
#include <time.h>

struct timespec diff(struct timespec start, struct timespec end);

int main()
{
    struct timespec time1, time2, timeDiff;
    int temp, i;

    // Get the start time
    clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time1);

    // Do some work
    for (i = 0; i< 242000000; i++)
        temp+=temp;

    // Get the end time
    clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &time2);

    // Calculate the difference
    timeDiff = diff(time1,time2);

    printf("%d.%d\n", timeDiff.tv_sec, timeDiff.tv_nsec);
    return 0;
}

struct timespec diff(struct timespec start, struct timespec end)
{
    struct timespec temp;
    if ((end.tv_nsec-start.tv_nsec)<0) {
        temp.tv_sec = end.tv_sec-start.tv_sec-1;
        temp.tv_nsec = 1000000000+end.tv_nsec-start.tv_nsec;
    } else {
        temp.tv_sec = end.tv_sec-start.tv_sec;
        temp.tv_nsec = end.tv_nsec-start.tv_nsec;
    }
    return temp;
} 
```

You will need to compile with something like:

```
gcc -o timetest timetest.c -lrt 
```

The `-lrt` part of the command tells the C linker to link to the Realtime library, which contains the definition of `clock_gettime()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T10:22:21.407

您可以只使用`[gettimeofday()](http://linux.die.net/man/2/gettimeofday)`来获取时间值。您需要存储一个这样的读数，以便您可以将最近的读数与旧的读数进行比较，并计算出它们之间的时间。如果您以秒为单位执行此操作，则可以将整数除以该间隔并获得每秒的平均值。

# jquery - 在 fullCalendar 中的每一天在顶部添加一个项目，该项目是所有事件数量的总和

> ID：13741415
> 
> 赞同：0
> 
> 时间：2012-12-06T10:18:18.813
> 
> 标签：jquery, fullcalendar

简单地说，我已经在全日历中添加了带有事件金额的所有事件，并且我想在一天的顶部添加一个项目，即所有事件金额的总和。或者，如果有任何可用的 dayrender 事件对应于每天的事件运行。

请给我任何建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:24:52.503

对于您问题的第一部分，您可以使用 ajax 成功回调循环所有事件并获取总数，然后使用 jquery/javascript 应用于元素。我不确定你在问题的第二部分想要什么，但我认为你应该能够使用相同的方法来实现它。

```
$('#calendar').fullCalendar({
    events: {
        url: '/myfeed.php',
        type: 'POST',
        success: function(response) {
            // loop through events to get total
            // you may need to return the response
        }
    }
}); 
```

# tridion - 在 GetSystemWideList 中使用 PublishTransactionState 过滤器不起作用

> ID：13741423
> 
> 赞同：6
> 
> 时间：2012-12-06T10:18:46.490
> 
> 标签：tridion, tridion-2011

在核心服务（SDL Tridion 2011 SP1）上使用 GetSystemWideList 操作时，我尝试为 PublishTransactionState 应用过滤器。

如果我尝试设置像 PublishTransactionState.ScheduledForPublish 或 PublishTransactionState.WaitingForPublish 这样的过滤器值，我不会得到任何结果，即使我确定队列中有具有此状态的发布事务。

```
var filter = new PublishTransactionsFilterData {ForRepository = new LinkToRepositoryData {IdRef = "tcm:0-69-1"}};
filter.PublicationTarget = new LinkToPublicationTargetData { IdRef = "tcm:0-1-65537" };
filter.PublishTransactionState = PublishTransactionState.ScheduledForPublish;
//filter.StartDate = DateTime.Today.AddDays(-1);

var transactions = coreServiceSession.GetSystemWideList(filter);
Console.WriteLine(transactions.Count() + " publish transactions"); 
```

启用 filter.PublishTransactionState 行后，核心服务始终返回 0 个结果。注释了这一行后，我们将按预期获得发布交易的列表，其中包括一些状态为 SceduledForPublish 的交易。

其他过滤器，如 StartDate 过滤器按预期工作。

有人有这个工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:48:21.597

这是一个已知问题，已在 2013 年修复。

目前没有可用的修补程序，但您可以通过请求列表而不设置 PublishTransactionState 属性然后对结果进行后处理来解决它。

# c++ - 获取模板类所包含的类型

> ID：13741425
> 
> 赞同：3
> 
> 时间：2012-12-06T10:18:50.470
> 
> 标签：c++, templates, typeid

有——

**C_Type.h**

```
#ifndef C_TYPE_H
#define C_TYPE_H
template <class T>
class C_Type {
    public:
        T m_val;
            // implementation ... 

};

#endif 
```

还有一个程序——

```
#include <iostream>
#include <typeinfo>
#include "C_Type.h"
using namespace std ; 

int main () {
    C_Type<int> a  ; 
    cout <<typeid(a.m_val).name()<<endl;

} 
```

我试图提取`int`其中的`C_Type<int>`组成部分，上面的程序只是给出了输出 - `i`。

**编辑 ：**

是否可以在不考虑类成员（即）的情况下获得类型（即 int 或 i `m_val`）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T10:21:36.817

[typeid::](http://en.cppreference.com/w/cpp/types/type_info/name) name 返回的名称是特定于编译器的，对于某些编译器来说它是可怕的（比如`i`for `int`）。大多数编译器都支持名称的去修饰，这会带来更好的表示，但对于编程使用仍然无用。

以下是常用编译器的解组 API 列表：

*   [海合会](http://gcc.gnu.org/onlinedocs/libstdc++/manual/ext_demangling.html)
*   [MSVC](http://msdn.microsoft.com/en-us/library/5x49w699%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T10:52:05.303

回答您的最后一个问题（关于在不提及成员的情况下获取类型）：不。在标准库中，有一个约定来提供`typedef`实例化类型和从它派生的类型；通常的名称是`value_type`，但也有例外（例如`std::map`）。如果你想遵守这个约定（这不是一个坏主意），你应该添加：

```
typedef T value_type; 
```

到您的班级（作为公共成员），并在您需要类型时引用它，而不是某个任意成员（可能存在也可能不存在）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:39:00.807

“i”是正确的名称，可能是“int”类型？这只是一个名字！你想用这个名字做什么？

```
 int main () {
    C_Type<int> a  ; 
    int test=0;
    if(typeid(a.m_val) == typeid(test))
      cout <<"Int"<<endl;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:07:03.587

如果您需要从模板规范中检索模板参数（并且您有 C++11），您可以这样做：

```
template <template <typename> class Templ, typename T>
T typeGetter(Templ<T>); 
```

然后，在你的主要：

```
int main () {
    C_Type<int> a;
    decltype(typeGetter(a)) i = 7; //declares i to be int
} 
```

# c++ - 将 MinGW64 .o 链接到 MSVC 2010

> ID：13741427
> 
> 赞同：0
> 
> 时间：2012-12-06T10:18:51.563
> 
> 标签：c++, visual-c++, mingw, arpack

如何将使用 MinGW64 fortran (gfortran) 编译器 (.o) 生成的目标文件链接到 MSVC 2010？

我只想将 64 位 arpack 库与 64 位 MSVC 解决方案一起使用，但所有其他方法都没有成功。MSVC 找到具有 32 位解决方案配置的 arpack 函数，但启动应用程序时出现运行时错误，并且根本找不到具有 64 位解决方案配置的 arpack 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:33:36.537

简短的回答：你不能。这些编译器使用不同的 ABI，这意味着它们的目标文件格式不同且不兼容。

可能的方法是让 MinGW 从 Fortran 代码中创建一个 DLL。将其导入您的 C++ 程序，但要注意名称修改：DLL 导出的符号不能被修改（我不确定 Fortran 中是否存在名称修改）。在您的 C++ 代码中，从 DLL 导入的函数必须声明为“extern C”，以防止在 C++ 端发生名称修改。

# android - 如何开始第一个活动？（不总是）

> ID：13741435
> 
> 赞同：1
> 
> 时间：2012-12-06T10:19:21.190
> 
> 标签：android

当我单击“退出”按钮时，我运行了“主程序”

```
Intent intent = new Intent(Intent.ACTION_MAIN);
            intent.addCategory(Intent.CATEGORY_HOME);
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

            startActivity(intent); 
```

然后我返回我的应用程序并查看......这不是第一个“活动”..这是我的最后一个“活动”

**如何设置程序...从第一个活动开始？**

只有当我点击“退出”

我有：[1] 活动 [2] 活动 [3] [4]

当我在 [4] 或 [3] 活动中按下“退出”时，我会转到“主”，然后如果我启动或返回应用程序，我会再次创建 [1] 活动，如果我“返回”或按下按钮“向下按钮”并返回当我按下此按钮时，我启动“onResume()”应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:27:09.997

您可以通过将[android:clearTaskOnLaunch](http://developer.android.com/guide/topics/manifest/activity-element.html#clear)属性设置`<activity>`为您的主要活动（开始活动）的标签来实现这一点

如果您只想在活动中按“退出”按钮时清除任务，您可以`finish()`在开始家庭活动之前调用该活动。但是，这仅适用于您在第二个活动中退出的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:57:37.913

我认为问题在于您创建`Intent`. 大概是这两种说法

```
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

让 Android 认为您`MainActivity`是从启动器启动的，因此恢复了完整的导航堆栈并且您会看到最新启动的活动。我建议删除这些行。

下面的代码开始你`MainActivity`应该可以正常工作：

```
Intent intent=new Intent(getApplicationContext(), MainActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:28:45.773

在第一个活动中（主要活动）

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        moveTaskToBack(true);
        android.os.Process.killProcess(android.os.Process.myPid());
    } 
```

和按钮“退出”添加下一个代码

```
 Intent goIntent = new Intent(getApplicationContext(),
                [activity].class);
        goIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(goIntent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T06:39:06.263

你可以试试

intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);

# algorithm - 在浮动div之前定义最小可用高度？

> ID：13741436
> 
> 赞同：1
> 
> 时间：2012-12-06T10:19:23.573
> 
> 标签：algorithm, css-float, two-column-layout, computed-style

我使用 float:left 将多个框（div）排列在两列中。div 有不同的高度，导致这样的布局：

```
AAA BBB
AAA BBB
AAA 
AAA CCC
    CCC
    CCC
    CCC 
```

但是我想定义一个最小高度（最小可用空间），当一个盒子必须漂浮在左列时。我想要一个类似于这样的结果：

```
AAA BBB
AAA BBB
AAA 
AAA 

CCC
CCC
CCC
CCC 
```

我想这是不可能的......但是也许有一个CSS技巧？

谢谢，康拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:36:13.863

在具有较大负边距的已清除元素上方使用浮动元素来控制浮动对齐。浏览器应该增加已清除元素的上边距，以便清除浮动。因此，浏览器会重新计算巨大的顶部负边距，以便元素清除浮动：

```
 <!DOCTYPE html>
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>List Items Divided in Ordered Columns</title>
    <style type="text/css">
    #columnlist {
        margin:auto;
        width:80&#37;;
        font:75%/1.5 arial;
    }
    #columnlist h1 {
        float:left;
        width:100%;
        font-size:167%;
    }
    #columnlist ul {
        margin:0;
        padding:0;
    }
    #columnlist li {
        list-style:none;
        width:33%;
    }
    #columnlist .col1 {
        color:#c00;
    }
    #columnlist .col2 {
        margin-left:33.5%;
        color:#990;
    }
    #columnlist .col3 {
        margin-left:67%;
        color:#090;
    }
    #columnlist .col1+.col2, #columnlist .col2+.col3 {
        clear:left;
        margin-top:-9999px;
    }    
    </style>
    </head>
    <body>
    <div id="columnlist">
        <h1>CSS2 - List Items Divided in Ordered Columns</h1>
        <ul>
            <li class="col1">Column One, Item 1</li>
            <li class="col1">Column One, Item 2</li>
            <li class="col1">Column One, Item 3</li>
            <li class="col1">Column One, Item 4</li>
            <li class="col1">Column One, Item 5</li>
            <li class="col1">Column One, Item 6</li>
            <li class="col1">Column One, Item 7</li>
            <li class="col1">Column One, Item 8</li>
            <li class="col1">Column One, Item 9</li>
            <li class="col1">Column One, Item 10</li>
            <li class="col1">Column One, Item 11</li>
            <li class="col1">Column One, Item 12</li>
            <li class="col1">Column One, Item 13</li>
            <li class="col1">Column One, Item 14</li>
            <li class="col1">Column One, Item 15</li>
            <li class="col1">Column One, Item 16</li>
            <li class="col1">Column One, Item 17</li>
            <li class="col1">Column One, Item 18</li>
            <li class="col2">Column Two, Item 19</li>
            <li class="col2">Column Two, Item 20</li>
            <li class="col2">Column Two, Item 21</li>
            <li class="col2">Column Two, Item 22</li>
            <li class="col2">Column Two, Item 23</li>
            <li class="col2">Column Two, Item 24</li>
            <li class="col2">Column Two, Item 25</li>
            <li class="col2">Column Two, Item 26</li>
            <li class="col2">Column Two, Item 27</li>
            <li class="col2">Column Two, Item 28</li>
            <li class="col2">Column Two, Item 29</li>
            <li class="col2">Column Two, Item 30</li>
            <li class="col3">Column Three, Item 31</li>
            <li class="col3">Column Three, Item 32</li>
            <li class="col3">Column Three, Item 33</li>
            <li class="col3">Column Three, Item 34</li>
            <li class="col3">Column Three, Item 35</li>
            <li class="col3">Column Three, Item 36</li>
            <li class="col3">Column Three, Item 37</li>
            <li class="col3">Column Three, Item 38</li>
            <li class="col3">Column Three, Item 39</li>
            <li class="col3">Column Three, Item 40</li>
            <li class="col3">Column Three, Item 41</li>
            <li class="col3">Column Three, Item 42</li>
            <li class="col3">Column Three, Item 43</li>
            <li class="col3">Column Three, Item 44</li>
            <li class="col3">Column Three, Item 45</li>
            <!-- number of items can change
        <li class="col3">Column Three, Item 46</li>
        <li class="col3">Column Three, Item 47</li>
        <li class="col3">Column Three, Item 48</li> -->
        </ul>
    </div>
    </body>
    </html>
```

相反，高度限制不能用于控制[浮动下降](http://www.cssplay.co.uk/menus/basic-float-drop.html)，但宽度限制可以：

```
 <html>
    <head>
      <style type="text/css">
      #container { width: 300px; }
      .nav { padding:0; margin: 0; border:0; float: left; outline: 1px solid yellow; background-color: black; }
      #one { width: 100px; height: 300px; }
      #two { width: 100px; height: 300px; }
      #three { width: 101px; height: 300px; }

      </style>
    </head>
    <body>
    <div id="container">
      <div class="nav" id="one">
      </div>

      <div class="nav" id="two">
      </div>

      <div class="nav" id="three">
      </div>
    </div>

    </body>
    </html>
```

**参考**

*   [CSS - 测试你的 CSS 技能第 30 号 - 多列](http://www.sitepoint.com/forums/showthread.php?648340-CSS-Test-Your-CSS-Skills-Number-30-Multi-columns/page3)
*   [负边距权威指南](http://coding.smashingmagazine.com/2009/07/27/the-definitive-guide-to-using-negative-margins/)
*   [哪些浮点数被清除清除？](http://www.brunildo.org/test/clear.html)
*   [浮动和清算 - W3C Wiki](http://www.w3.org/wiki/Floats_and_clearing)

# c# - 根据服务器端方法返回显示来自 JQuery 的警报

> ID：13741437
> 
> 赞同：-1
> 
> 时间：2012-12-06T10:19:30.047
> 
> 标签：c#, javascript, asp.net, jquery

`GetMSG`我必须使用 jQuery调用服务器端方法和该服务器端方法

```
[WebMethod()]
public string GetMSG() {
    if(condition) {
        return 'MSG'
    } else {
        return ''  
    }
} 
```

现在使用它`msg`我必须显示警报。如何`msg`在 jQuery 中使用返回和显示警报。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:26:17.530

您是否需要 jQuery 代码来执行 Ajax 调用并显示返回？如果是的话，你可以用这样的东西：

```
$.ajax({
    url: urlOfThePage + "GetMSG",
    type: "get",
    success: function (response, textStatus, jqXHR) {
        alert(response);
    },
    error: function (jqXHR, textStatus, errorThrown) {
    },
    complete: function () {
    }
}); 
```

# iphone - 如何在 iPhone 中获取 twitter 用户的好友列表？

> ID：13741438
> 
> 赞同：1
> 
> 时间：2012-12-06T10:19:29.677
> 
> 标签：iphone, objective-c

我正在开发一个基于 Twitter 的应用程序，我想在其中获取已登录 Twitter 用户的朋友列表。我为此做了一个代码，但它返回错误。

```
NSMutableArray *arr = [[NSMutableArray alloc] init];

    NSMutableDictionary *accountDictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:account.username, @"screen_name", nil];

    [accountDictionary setObject:[[[account dictionaryWithValuesForKeys:[NSArray arrayWithObject:@"properties"]] objectForKey:@"properties"] objectForKey:@"user_id"] forKey:@"user_id"];

    NSURL *followingURL = [NSURL URLWithString:[NSString stringWithFormat:@"https://api.twitter.com/1.1/friends/list.json?cursor=-1&screen_name=%@&skip_status=true&include_user_entities=false",account.username]];

    NSDictionary *parameters = [NSDictionary dictionaryWithObjectsAndKeys:account.username, @"screen_name", nil];

    TWRequest *twitterRequest = [[TWRequest alloc] initWithURL:followingURL
                                                    parameters:parameters
                                                 requestMethod:TWRequestMethodGET];

    [twitterRequest setAccount:account];

        NSError *jsonError = nil;
    NSData *responseData;

        NSDictionary *twitterFriends = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONWritingPrettyPrinted error:&jsonError];

        [accountDictionary setObject:[twitterFriends objectForKey:@"list"] forKey:@"friends_list"];

    return arr; 
```

我收到此错误：

> { errors = ( { code = 34; message = "抱歉，该页面不存在"; } ); }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:07:34.323

```
 ACAccountStore *accountStore = [[ACAccountStore alloc] init];
  ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
  [accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error){
    if (granted==YES) {
        NSArray *accounts = [accountStore accountsWithAccountType:accountType];
        if (accounts.count) {
            ACAccount *twitterAccount = [accounts objectAtIndex:0];
            NSString *str =twitterAccount.accountDescription;
            NSString *newStr = [str substringFromIndex:1];

            id request=nil;
            NSString *profileurl=@"http://api.twitter.com/1/friends/ids.json?&screen_name=";
            NSString *url1= [NSString stringWithFormat:@"%@%@",profileurl,newStr];
            NSURL *url = [NSURL URLWithString:url1];

            TWRequest *request = [[TWRequest alloc] initWithURL:url  parameters:nil 
                   requestMethod:TWRequestMethodGET];

            [request setAccount:twitterAccount];
           [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                dispatch_async(dispatch_get_main_queue(), ^{
                    NSError *error = nil;
                    NSDictionary *profileimageurl =[NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&error] ;
                    //here you get dictionary of your friends ids

                 });
            }]; 
```

# sonarqube - 致命错误 - 分析项目时

> ID：13741440
> 
> 赞同：2
> 
> 时间：2012-12-06T10:19:39.473
> 
> 标签：sonarqube, fatal-error

在声纳中分析项目时出现致命错误。我必须做些什么来解决这个问题。
这是我的日志文件数据。

```
[INFO] ------------------------------------------------------------------------
[INFO] Preparing cobertura:cobertura
[INFO] [dotnet:compile {execution: default-compile}]
[INFO] The project Atlas is not a visual studio project
[INFO] [cobertura:instrument {execution: default-instrument}]
[INFO] Not executing cobertura:instrument as the project is not a Java classpath
-capable package
[INFO] [dotnet:test {execution: default-test}]
[INFO] The project Atlas is not a visual studio project
[INFO] [cobertura:cobertura {execution: default-cli}]
[INFO] Not executing cobertura:report as the cobertura data file (D:\projects\At
las\target\cobertura\cobertura.ser) could not be found
[INFO] [14:49:17.078] Execute org.codehaus.mojo:cobertura-maven-plugin:2.4:cober
tura done: 7453 ms
[INFO] [14:49:17.078] Execute maven plugin cobertura-maven-plugin done: 7453 ms
[INFO] [14:49:17.078] Sensor CoverageSensor...
[INFO] [14:49:17.078] xml file path for coverityD:\projects\Atlas\target\site
[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Java heap space
[INFO] ------------------------------------------------------------------------
[INFO] Trace
java.lang.OutOfMemoryError: Java heap spac
at org.apache.xerces.dom.DeferredDocumentImpl.createChunk(Unknown Source
)
at org.apache.xerces.dom.DeferredDocumentImpl.ensureCapacity(Unknown Sou
rce)
at org.apache.xerces.dom.DeferredDocumentImpl.createNode(Unknown Source)

    at org.apache.xerces.dom.DeferredDocumentImpl.createDeferredAttribute(Un
known Source)
    at org.apache.xerces.dom.DeferredDocumentImpl.setDeferredAttribute(Unkno
wn Source)
    at org.apache.xerces.parsers.AbstractDOMParser.startElement(Unknown Sour
ce)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElemen
t(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContent
Dispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Un
known Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:208)
    at org.sonar.plugins.cpp.coverage.CoverageConvertor.generateOutputFile(C
overageConvertor.java:62)
    at org.sonar.plugins.cpp.coverage.CoverageSensor.analyse(CoverageSensor.
java:97)
    at org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:6
4)
    at org.sonar.batch.phases.Phases.execute(Phases.java:93)
    at org.sonar.batch.bootstrap.ProjectModule.doStart(ProjectModule.java:13
9)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:115)
    at org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:105)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.jav
a:111)
    at org.sonar.batch.bootstrap.Module.start(Module.java:83)
    at org.sonar.batch.bootstrapper.Batch.startBatch(Batch.java:73)
    at org.sonar.batch.bootstrapper.Batch.execute(Batch.java:60)
    at org.sonar.maven.SonarMojo.execute(SonarMojo.java:150)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPlugi
nManager.java:490)
    at org.codehaus.mojo.sonar.Bootstraper.executeMojo(Bootstraper.java:98)
    at org.codehaus.mojo.sonar.Bootstraper.start(Bootstraper.java:79)
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 11 minutes 32 seconds
[INFO] Finished at: Thu Dec 06 14:49:22 IST 2012
[INFO] Final Memory: 38M/63M
[INFO] ------------------------------------------------------------------------ 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:29:36.887

如何增加堆大小？基本上设置`MAVEN_OPTS=-Xmx1024m`（或更高的值）并重新运行。

# xpages - 在 Xpages Java 元素中使用静态方法

> ID：13741443
> 
> 赞同：1
> 
> 时间：2012-12-06T10:19:44.730
> 
> 标签：xpages

在 XPages 中使用 Java 设计元素时，我遇到了问题。

考虑以下简单的 XPage：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

    <xp:button value="Go" id="button1"></xp:button>
    <xp:br></xp:br>
    <xp:br></xp:br>
    <xp:br></xp:br>
    <xp:text escape="true" id="computedField1">
        <xp:this.value><![CDATA[#{javascript:importPackage(PACKAGE_NAME_REDACTED);
        TESTStatic.getValue();}]]></xp:this.value>
    </xp:text>
</xp:view> 
```

它所做的只是建立一个带有按钮和计算域的简单 XPage。计算域的值是调用静态方法的结果。

Java 设计元素代码为：

```
package PACKAGE_NAME_REDACTED;

public class TESTStatic {

public static String value;

static {
    System.out.println("Running static initialiser");
    value = "fred";
}

public static String getValue() {
    return value;
}

} 
```

我难以理解的是这个。调用 Xpage 时，静态初始化程序运行，您可以在服务器控制台日志中看到结果。但是，如果页面再次运行，静态初始化程序不会再次运行，这至少向我表明该类的状态已保持不变——这由保持不变的计算字段的值证实。好像放一会，Java类的状态好像被清除了，静态初始化器又运行起来了。

所以，我假设这个类一旦加载，在一定程度上是持久的。但是我们再次重新运行 Xpage，所以我预计 Java 类的先前状态会丢失。情况似乎并非如此。

我不知道持久性特征和限制——甚至不知道了解它们是否重要。其他人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:18:26.563

静态变量或类对当前正在运行的应用程序的实例有效，并且只要应用程序未超时就存在。这就是为什么只调用一次构造函数，而不是每次加载 XPage 时。

您可以使用静态变量“破坏”会话范围的托管 bean，因为静态变量对整个应用程序有效。

# c# - 有没有办法可以用 C# 检查 HTML 的语法

> ID：13741445
> 
> 赞同：1
> 
> 时间：2012-12-06T10:19:47.793
> 
> 标签：c#, html, xml, html-parsing

我有一个编辑窗口，允许我的授权用户输入 HTML，然后在他们单击提交后将其存储在数据库中。不幸的是，它是这样的：

```
<ul class="controls-buttons">
         <li class="sep"></li>
     <li id="home">
<a title="Home" <a="" data-href="x">xx</a></li>
      </ul> 
```

有没有一种方法可以在将 HTML 字符串存储到数据库之前检查它以确保它是有效的 HTML 标记？例如这里注意使用`<a`和`<a`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:23:10.343

您可以将片段加载到[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)（HTML 解析器）中。源下载包含许多显示用法的示例项目。

检查`ParseErrors`属性以查看片段是否有效。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-06T11:54:04.763

您的下一个最佳方法是将 C# 和 .NET 与 Regex 对象一起使用。只需使用符合您要求的正则表达式并根据您的正则表达式验证内容。

# maven - 将系统属性推送到远程容器

> ID：13741447
> 
> 赞同：4
> 
> 时间：2012-12-06T10:19:55.137
> 
> 标签：maven, jboss-arquillian

我在我的 maven pom.xml 中定义了一堆系统属性，我需要从运行在远程 glassfish 实例上的 Arquillian-tests 访问它们。

将系统属性推送到容器的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:28:42.550

Arquillian Showcase 中有一个 Arquillian Extension，演示了如何“自动”完成此操作。

[https://github.com/arquillian/arquillian-showcase/tree/master/extensions/systemproperties](https://github.com/arquillian/arquillian-showcase/tree/master/extensions/systemproperties)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:53:22.057

您可以将这些属性写入添加到您的 ShrinkWrap 的文件中`@Deployment`。

然后，您可以在`@Before`执行服务器端的设置方法中读取此文件，并使用`System.setProperty(...)`. 这假定`SecurityManager`服务器上的 将允许您设置属性。

如果你不想用所有这些污染你的测试代码，你可以把这个工具写到一个 Arquillian 扩展中来做类似的事情。

# android - 如何使多个活动通用的 CountDownTimer？

> ID：13741450
> 
> 赞同：0
> 
> 时间：2012-12-06T10:20:10.000
> 
> 标签：android

我有活动 A、B、C、D ......我在活动 A 中创建了一个倒数计时器......我想在活动 B、C、D 中调用它的方法......我该怎么做......我试过了使计时器变量静态，但它有一些问题并且不能正常工作......这也不是一个好的编程习惯......那么还有其他方法可以做到这一点吗？

```
public class CountTime extends Activity {

    static MyCount count;
    Button clickBtn;
    TextView tv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.customanim); // 5000 is
                                                                // the
                                                                // starting
                                                                // number
                                                                // (in
                                                                // milliseconds)
        // 1000 is the number to count down each time (in milliseconds)
        count = new MyCount(5000, 1000);
        count.start();
        tv = (TextView) findViewById(com.example.sample.R.id.textView1);

        clickBtn = (Button) findViewById(R.id.button1);
        clickBtn.setText("Click me");
        clickBtn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent my = new Intent(getApplicationContext(),
                        MainActivity.class);
            //my.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(my);
            }
        });
    }

    @Override
    public void onUserInteraction() {
        // TODO Auto-generated method stub
        super.onUserInteraction();
        //count.start();
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        count.cancel();
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        count.start();
    }

    // countdowntimer is an abstract class, so extend it and fill in methods
    public class MyCount extends CountDownTimer {
        public MyCount(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {
            tv.setText("done!");
            Toast.makeText(getApplicationContext(), "Finsihed", Toast.LENGTH_LONG).show();
        }

        @Override
        public void onTick(long millisUntilFinished) {
            tv.setText("Left: " + millisUntilFinished / 1000);
        }
    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:30:42.900

可能最好的方法是用你的 Timer 创建一个 Singleton 类。

如果您不知道 Singleton 是什么，您可以在以下来源中找到它： http: [//www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html](http://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html) [http://en.wikipedia .org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

# android - 有什么办法可以延迟到 onServiceConnected() 被执行？

> ID：13741452
> 
> 赞同：2
> 
> 时间：2012-12-06T10:20:19.200
> 
> 标签：android, android-service

这个问题与这个问题有关 - [android bindservice strong](https://stackoverflow.com/questions/2842080/android-bindservice)。

我根据问题的情况解释我的情况。

就我而言，发生 NullPointerException 是因为在 bindService() 和 onServiceConnected() 之间使用了 mService 变量。

Var mService 经常在其他活动中使用，有时尤其是在 onCreate() 中。

它很少发生，但我想避免它。

没有某种官方方式吗？

我尝试使用一个简单的线程来等待使用 sleep() 完成 onServiceConnected()。但是，我不确定这是否是一个好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:36:21.237

Maybe you can create a new method serviceConnected() in your activity and call it from onServiceConnected().

Like this:

```
private ServiceConnection connection = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder iservice) {
        mService = ILocService.Stub.asInterface(iservice);
        mBound = true;
        **serviceConnected();**
    }

    public void onServiceDisconnected(ComponentName className) {
        mService = null;
        mBound = false;
    }

};

private void serviceConnected(){ 
   // here mService is **not** null
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T12:30:43.420

> 没有某种官方方式吗？

将所有引用的代码移动`mService`到一个点，直到它被调用时才会`onServiceConnected()`被调用。

> 我尝试使用一个简单的线程来等待使用 sleep() 完成 onServiceConnected()。但是，我不确定这是否是一个好方法。

绝对不。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:30:54.450

我不确定如何做到这一点。但我仍然建议使用更好的等待/通知而不是睡眠。

# android - android中透明应用的截图

> ID：13741458
> 
> 赞同：1
> 
> 时间：2012-12-06T10:20:37.737
> 
> 标签：android, view, transparency, screenshot

我想使用代码截取我的透明应用程序的屏幕截图。使用此代码，我仅获得外部视图的屏幕截图。请帮忙

```
View v = getWindow().getDecorView().getRootView();
v.setDrawingCacheEnabled(true);
Bitmap b = v.getDrawingCache();
try{
    File sdcard = Environment.getExternalStorageDirectory();
    File pictureDir = new File(sdcard, "picopaint");
    pictureDir.mkdirs();
    File f = null;
    for (int i = 1; i < 200; ++i){
        String name = "screen" + i + ".png";
        f = new File(pictureDir, name);
        if (!f.exists()) {                                                         
            break;
        }
    }
    if (!f.exists()) {
        String name = f.getAbsolutePath();
        FileOutputStream fos = new FileOutputStream(name);
        b.compress(Bitmap.CompressFormat.PNG, 100, fos);
        fos.flush();
        fos.close();                                                   
    }
} catch (Exception e) {} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:43:16.310

试试这个，我可以生成文件...您可以根据您的要求进行修改

```
public Bitmap generateFileFromView(View v){

Bitmap bmp = Bitmap.createBitmap(v.getWidth(), v.getHeight(), Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(bmp);   // v.layout(0, 0, v.getLayoutParams().width, v.getLayoutParams().height);
v.draw(c);
// create a file to write bitmap data
File file = new File(context.getCacheDir(), "f");
file.createNewFile();

    // Convert bitmap to byte array
Bitmap bitmap = bmp;
ByteArrayOutputStream bos = new ByteArrayOutputStream();
bitmap.compress(CompressFormat.PNG, 0 /* ignored for PNG */, bos);
byte[] bitmapdata = bos.toByteArray();

    // write the bytes in file
FileOutputStream fos = new FileOutputStream(file);
fos.write(bitmapdata);
return file;
} 
```

# python - 使用 SciKit-learn 和大型数据集进行文本分类

> ID：13741460
> 
> 赞同：2
> 
> 时间：2012-12-06T10:20:42.663
> 
> 标签：python, nlp, scikit-learn, scikits

首先，我昨天开始使用 python。我正在尝试使用 SciKit 和大型数据集（250.000 条推文）进行文本分类。对于该算法，每条推文都将表示为 4000 x 1 向量，因此这意味着输入是 250.000 行和 4000 列。当我尝试在 python 中构建它时，我在 8500 条推文后内存不足（使用列表并附加它时），当我预分配内存时，我得到了错误：`MemoryError`（np.zeros（4000,2500000））。SciKit 不能处理这些大型数据集吗？我做错了什么（因为这是我使用 python 的第二天）？是否有另一种表示特征的方式，以便它适合我的记忆？

**编辑**：我想要伯努利 NB

**编辑2**：也许在线学习是可能的？阅读一条推文，让模型使用这条推文，将其从内存中删除，阅读另一个，让模型学习......但我认为 Bernoulli NB 不允许在 scikit-learn 中进行在线学习

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T11:47:00.983

如果您使用 scikits 的矢量化器（`CountVectorizer`或者`TfidfVectorizer`作为第一次尝试），您将获得稀疏矩阵表示。从文档中：

```
vectorizer = TfidfVectorizer(sublinear_tf=True, max_df=0.5, stop_words='english')
X_train = vectorizer.fit_transform(data_train.data)
#initialize your classifier
clf.fit(X_train, y_train) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T10:27:44.203

我假设这些 4000 x 1 向量是词袋表示。如果是这样，那么 250000 x 4000 矩阵有很多零，因为在每条推文中只有很少的单词。这种矩阵称为[稀疏矩阵](http://en.wikipedia.org/wiki/Sparse_matrix)，并且有有效的方法将它们存储在内存中。请参阅[Scipy 文档](http://docs.scipy.org/doc/scipy/reference/sparse.html)和[SciKit 文档](http://scikits.appspot.com/sparse)以了解稀疏矩阵以开始使用；如果您在阅读这些链接后需要更多帮助，请再次发布。

# c# - 对 HashTable、Dictionary 等中的元素进行排序

> ID：13741461
> 
> 赞同：0
> 
> 时间：2012-12-06T10:20:45.457
> 
> 标签：c#, sorting, dictionary, hashtable

我有一组由名称和相关内容组成的数据。因此，我会选择`HashTable`或`Dictionary`存储这些物品。

我需要用两个优先级对这些数据进行排序。首先，它们应该按字母顺序排列，然后一些项目应该按特定顺序放在开头。

如果字母顺序是我唯一的要求，我会使用`SortedDictionary`. 该字典根据键自动对元素进行排序。

我正在寻找的是一个允许我做的课程：

1.  以随机顺序添加元素
2.  按字母顺序对所有元素进行排序
3.  将元素移动（或删除和插入）到开头（或更通用：在我想要的任何地方）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:41:16.820

没有内置集合可以满足您的需要，但您可以相对轻松地构建自己的集合：

*   写一个实现`IDictionary<TKey,TValue>`
*   把 a`Dictionary<TKey,TValue> dict`和 a`List<TKey> keys`放在里面
*   向 中添加元素时`dict`，还要将其键添加到`keys`
*   当请求迭代时，迭代`keys`然后在`dict`

如果您的集合以这种方式组织，您将能够独立于字典条目重新排序键。由于在更改字典的操作中应该进行双重“簿记”，因此您在实施时需要小心。除此之外，解决方案应该相对简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:41:40.627

如果此数据的名称可以重复，您没有提供信息。一般来说，我认为您可以使用不同的方式来保存这些数据。您应该记住，字典的本质是保存键是唯一的键/值数据。元素的顺序不是字典的本质。在我看来，这更重要。因此，您可以尝试将 Dictionary 与 Linq to Objects 混合使用。但也许尝试使用通用

```
 List< KeyValuePair< TKey, TValue>>. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:48:35.557

为什么不看`SortedList<TKey, TValue>`？

那应该有适当的功能让你做你想做的事，而且排序很快！

# linux - 带有选项的 Shell 脚本

> ID：13741462
> 
> 赞同：-1
> 
> 时间：2012-12-06T10:20:47.583
> 
> 标签：linux, shell

我想写一个脚本，它在执行时应该看起来像 -

```
./script.sh -o1 option1 -o2 -o3 option3 ... 
```

输出应该是这样的 -

```
option1
option3 
```

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:28:34.017

如果您不需要开关（“-o1”等），有一个简单的解决方案。命令行选项出现在名为“$1”、“$2”等的变量中。例如

```
me@computer:~> ./script.sh option1 option2 option3
option1
option2
option3 
```

脚本.sh：

```
#! /bin/sh
echo $1
echo $2
echo $3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:22:59.613

查看内置的 bash [getopts](http://wiki.bash-hackers.org/howto/getopts_tutorial)。例如（来自那个链接的教程）

```
while getopts ":a" opt; do
  case $opt in
    a)
      echo "-a was triggered!" >&2
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      ;;
  esac
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:24:47.303

这应该会有所帮助：[Parsing Command Line Options in Shell Scripts](http://blog.mafr.de/2007/08/05/cmdline-options-in-shell-scripts/)

# c# - Asp：asp中的按钮：面板未触发

> ID：13741465
> 
> 赞同：1
> 
> 时间：2012-12-06T10:20:54.340
> 
> 标签：c#, asp.net, panel

asp:Panel 内的按钮未触发。代码如下；

```
 <asp:Panel ID="pnlMainBoxProfilProfil" ClientIDMode="Static" runat="server" >
     <asp:TextBox ID="txtProfilSoyadi" runat="server"></asp:TextBox>
     <asp:Button Text="Kaydet" runat="server" ID="btnProfilGuncelle" OnClick="btnProfilGuncelle_Click" />
      </asp:Panel> 
```

请帮我。我陷入了困境。

# jquery - 如何等到 XAJAX 调用完成后再做其他事情

> ID：13741476
> 
> 赞同：0
> 
> 时间：2012-12-06T10:21:39.980
> 
> 标签：jquery, ajax, jquery-chosen

我必须等到 Xajax 从服务器获得响应，这样我才能将这个响应与 Jquery 插件一起使用：

在此示例中，我必须等到（通过 XAJAX 调用）创建选择框后，才能`.chosen()`在其上应用插件：

```
<? $objResponse = new xajaxResponse();
$objResponse->assign($selectID, 'innerHTML', $codeThatCreatesSelectBox);
$objResponse->script('$(function(){ $("#selectID").chosen(); });');
return $objResponse; ?> 
```

我尝试使用 jquery 函数 AjaxComplete() 但它似乎不起作用，因为 Jquery 和 Xajax 是两个不同的东西：

```
$objResponse->script('$("#selectID").ajaxComplete(function() {$("#selectID").chosen(); });'); 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:35:03.767

您需要执行同步 AJAX 请求。区别在这里讨论：[AJAX 同步和异步的区别](https://stackoverflow.com/questions/5528852/ajax-sync-and-async-difference)

以下是您在 XAJAX 中的操作方式：http: [//community.xajax-project.org/topic/6460/synchonous-requests-with-parameters-fails-completely/](http://community.xajax-project.org/topic/6460/synchonous-requests-with-parameters-fails-completely/)

# jquery - jQuery 如果选中复选框，则更改类

> ID：13741478
> 
> 赞同：0
> 
> 时间：2012-12-06T10:21:43.790
> 
> 标签：jquery, checkbox, toggle

我有两个名为“open_sub_ja”和“open_sub_nee”的复选框。只能检查其中一项。现在我想要做的事情是，当检查带有类“open_sub_nee”的复选框时，我想要一个不同的div添加一个类，当checkbox“open_sub_nee”丢失检查状态时，我希望另一个div删除类（所以一个切换）。

我用谷歌搜索并发现了一些非常接近我想做的事情（经过修改后）。This code does add the class "selected" to the right div when the "open_sub_nee" is checked but it does not toggle when the checkbox does not have the checked state.

```
$('.open_sub_nee').change(function() {
        if($(this).is(':checked')) 
            $(this).parents('.container_vragen').find('.akkoord').addClass('selected'); 
        else
            $(this).parents('.container_vragen').find('.akkoord').removeClass('selected');
    }); 
```

我在这里有一个项目的 jsFiddle：http: [//jsfiddle.net/R5cWW/](http://jsfiddle.net/R5cWW/)尽管项目越来越大而且我的编码不是最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:36:36.233

为什么可以使用单选按钮？

我不完全确定我理解你的问题。您想向*未选中*复选框的父 div-tag 添加一个类，对吗？

```
$('.open_sub_nee').change(function() {
    if($(this).is(':checked')) {
        $('.open_sub_ja').attr('checked', '').closest('div').addClass('someclass');
    } else {
        $('.open_sub_ja').closest('div').removeClass('someclass');
    }
}); 
```

然后对“.open_sub_ja”做同样的事情。

# java - 使用 Timeout 避免 Java 多线程中的死锁

> ID：13741479
> 
> 赞同：12
> 
> 时间：2012-12-06T10:21:45.940
> 
> 标签：java, multithreading, locking, timeout, deadlock

在 Java 多线程中避免死锁情况的策略之一是使用超时。假设，一个线程已经获得了一个资源的锁，现在正在等待另一个资源的锁。在一定时间后，如果它无法获得资源 2 上的锁，则它应该停止等待资源 2 上的锁。它还应该释放对资源 1 的锁定。这样就可以避免死锁。

但是如何在 Java 中实现呢？如何显式“释放”锁？如何定义超时等待锁定。

什么是确切的 java 命令和语法。请问有什么好世界的例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T10:35:14.983

这是一个人为的示例，其中包含 2 个锁和 2 个线程，它们试图以不同的顺序获取它们。如果没有超时，代码就会死锁。

```
public static void main(String[] args) throws Exception {
    final ReentrantLock lock1 = new ReentrantLock();
    final ReentrantLock lock2 = new ReentrantLock();
    Runnable try1_2 = getRunnable(lock1, "lock 1", lock2, "lock 2");
    Runnable try2_1 = getRunnable(lock2, "lock 2", lock1, "lock 1");
    new Thread(try1_2).start();
    new Thread(try2_1).start();
}

private static Runnable getRunnable(final ReentrantLock lock1, final String lock1Name, final ReentrantLock lock2, final String lock2Name) {
    return new Runnable() {
        @Override
        public void run() {
            try {
                if (lock1.tryLock(1, TimeUnit.SECONDS)) {
                    System.out.println(lock1Name + " acquired in thread " + Thread.currentThread());
                    if (lock2.tryLock(1, TimeUnit.SECONDS)) {
                        System.out.println(lock2Name + " acquired in thread " + Thread.currentThread());
                        Thread.sleep(2000);
                    } else {
                        System.out.println("Could not acquire "+lock2Name + " in thread " + Thread.currentThread());
                        lock1.unlock();
                        System.out.println(lock1Name + " released in thread " + Thread.currentThread());
                    }
                } else {
                    System.out.println("Could not acquire " + lock1Name + " in thread " + Thread.currentThread());
                }
            } catch (InterruptedException e) {
                //you should not ignore it
            } finally {
                if (lock1.isHeldByCurrentThread()) lock1.unlock();
                if (lock2.isHeldByCurrentThread()) lock2.unlock();
            }
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T10:25:10.753

[锁定Java](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html)

```
Use tryLock(timeout, timeunits); 
```

> 如果在给定的**等待时间内****空闲**并且当前线程没有被中断，则获取锁。如果锁可用，则此方法**立即**返回值。****`true`****
> 
>  ****如果锁不可用，则当前线程将**被禁**用以用于线程调度目的并处于休眠状态，直到发生以下三种情况之一：
> 
> 锁被当前线程**获取；**
> 
> 或者其他一些线程 **中断**当前线程，支持中断获取锁；
> 
> 或 指定的**等待时间已过******

 ***** * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T10:30:47.263

这可能会有所帮助，

```
Lock lock = null;
lock=....;
if (lock.tryLock(15L, TimeUnit.SECONDS)) {
    try {
       ........
    } finally {
        lock.unlock();
    }
} else {
      // do sumthing
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-29T10:40:48.247

在[Java 8+ 并发 API](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/locks/Condition.html)中，您可以设置一个显式的`lock`等待时间，以便在设置条件时等待：

```
private Lock lock = new ReentrantLock();
private Condition myCondition = lock.newCondition();

try{            
    myCondition.await(1200L, TimeUnit.MILLISECONDS);
} catch (InterruptedException e) {
    System.out.println((e);
} finally{
    lock.unlock();
} 
```

锁将一直等待，直到它从另一个线程接收到`signal()`或`signalAll()`直到 1.2 秒的时间到期。****

# spring - Spring Hibernate JPA EntityManager.Persist() NullPointerException

> ID：13741480
> 
> 赞同：0
> 
> 时间：2012-12-06T10:21:46.830
> 
> 标签：spring, hibernate, jpa, entitymanager

我在使用which return的`Persist()`方法时遇到问题，这是我的代码：`EntityManager``NullPointerExpception`

```
@Repository("chainDao")
public class ChainDaoImpl implements ChainDao{

    private EntityManager em;

    @PersistenceContext(unitName="hibernatePersistenceUnit")
    public void setEntityManager(EntityManager em) {
    this.em = em;
    }

    public int saveChain(Chain chain) {
        em.persist(chain);
        return 0;
    }
} 
```

期望符合`em.persist(chain)`

这是我的`persistence.xml`

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="1.0">

<persistence-unit name="hibernatePersistenceUnit" transaction-type="RESOURCE_LOCAL">
<properties>
<property name="hibernate.hbm2ddl.auto" value="none" />
</properties>
</persistence-unit>

</persistence> 
```

和片段`applicationContext.xml`

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
destroy-method="close"
p:driverClass="${database.driver}"
p:jdbcUrl="${database.url}"
p:user="${database.user}"
p:password="${database.password}"
p:acquireIncrement="5"
p:idleConnectionTestPeriod="60"
p:maxPoolSize="100"
p:maxStatements="50"
p:minPoolSize="10" />
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" >
<property name="persistenceXmlLocation" value="classpath*:META-INF/persistence.xml"></property>
<property name="persistenceUnitName" value="hibernatePersistenceUnit" />
<property name="dataSource" ref="dataSource"/>
<property name="jpaVendorAdapter">
<bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" >
<property name="showSql" value="true"/>
</bean>
</property>
</bean> 
```

痕迹：

```
java.lang.NullPointerException: null
    at pl.postgresql.jpa.dao.ChainDaoImpl.saveCaChain(ChainDaoImpl.java:33) ~[CaChainDaoImpl.class:na]
    at pl.postgresql.jpa.service.StorageServiceImpl.addChain(StorageServiceImpl.java:50) ~[StorageServiceImpl.class:na]
    at pl.camel.jms.service.InputDatabaseServiceImpl.inputChain(InputDatabaseServiceImpl.java:48) ~[InputDatabaseServiceImpl.class:na]
    at pl.camel.jms.connector.EndpointHelper.run(EndpointHelper.java:49) ~[EndpointHelper.class:na]
    at pl.ws.spring.endpoint.CaEndpoint.getCAChain(CaEndpoint.java:63) ~[CaEndpoint.class:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_09]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:1.7.0_09]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_09]
    at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0_09]
    at org.springframework.ws.server.endpoint.MethodEndpoint.invoke(MethodEndpoint.java:134) ~[spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.server.endpoint.adapter.DefaultMethodEndpointAdapter.invokeInternal(DefaultMethodEndpointAdapter.java:229) ~[spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.server.endpoint.adapter.AbstractMethodEndpointAdapter.invoke(AbstractMethodEndpointAdapter.java:53) ~[spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.server.MessageDispatcher.dispatch(MessageDispatcher.java:233) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.server.MessageDispatcher.receive(MessageDispatcher.java:173) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.transport.support.WebServiceMessageReceiverObjectSupport.handleConnection(WebServiceMessageReceiverObjectSupport.java:88) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.transport.http.WebServiceMessageReceiverHandlerAdapter.handle(WebServiceMessageReceiverHandlerAdapter.java:59) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.ws.transport.http.MessageDispatcherServlet.doService(MessageDispatcherServlet.java:221) [spring-ws-core-2.1.1.RELEASE.jar:na]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789) [spring-webmvc-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641) [servlet-api.jar:na]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) [servlet-api.jar:na]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) [catalina.jar:7.0.30.A]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) [catalina.jar:7.0.30.A]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99) [catalina.jar:7.0.30.A]
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929) [catalina.jar:7.0.30.A]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) [catalina.jar:7.0.30.A]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) [catalina.jar:7.0.30.A]
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002) [tomcat-coyote.jar:7.0.30.A]
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585) [tomcat-coyote.jar:7.0.30.A]
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) [tomcat-coyote.jar:7.0.30.A]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0_09]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0_09]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0_09] 
```

任何线索我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:25:30.477

注入的实体管理器只是一个代理。实际的实体管理器实现是在运行时基于`@Transactional`与使用实体管理器的方法相关联的注释中的传播属性值注入的。因此，将方法`saveChain`与`@Transactional`注释关联如下。

```
@Transactional
public int saveChain(Chain chain) {
    em.persist(chain);
    return 0;
} 
```

强烈建议仔细阅读此注释的文档并将注释属性设置为与您的用例相关的值。

**编辑**：

spring DI 框架似乎没有`setEntityManager`像属性名称那样选择设置器`em`。您可能希望将属性重命名`em`为`entityManager`或设置器重命名`setEntityManager`为`setEm`或将`@PersistenceContext`注释移动到属性上并尝试。

# c# - 绑定到 Combobox ToString 方法的 ObservableCollection 不更新

> ID：13741482
> 
> 赞同：2
> 
> 时间：2012-12-06T10:21:53.043
> 
> 标签：c#, .net, wpf, .net-4.0

我有一个绑定到 ObservableCollection<Source> 的组合框。在类中有 2 个属性 ID 和 Type，以及我将 ID 与 Type 结合的 ToString() 方法。当我更改组合框中的类型时，它仍然显示旧类型，但对象已更改。

```
public partial class ConfigView : UserControl,INotifyPropertyChanged
{

    public ObservableCollection<Source> Sources
    {
        get { return _source; }
        set { _source = value;
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs("Sources"));
        }
    }

    public ConfigView()
    {
        InitializeComponent();
        this.DataContext = this;
        Sources = new ObservableCollection<Source>();
    }

    public ChangeSelected(){
         Source test = lstSources.SelectedItem as Source;
         test.Type = Types.Tuner;
    }
} 
```

看法：

```
<ListBox x:Name="lstSources" Background="Transparent" Grid.Row="1" SelectionChanged="lstSources_SelectionChanged" ItemsSource="{Binding Sources, Mode=TwoWay}" /> 
```

源类：

```
public enum Types { Video, Tuner }

    [Serializable]
    public class Source: INotifyPropertyChanged
    {

        private int id;

        public int ID
        {
            get { return id; }
            set { id = value;
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("ID"));
            }
        }

        private Types type;

        public Types Type
        {
            get { return type; }
            set { type = value;
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("Type"));
            }
        }

        public Source(int id, Types type)
        {
            Type = type;
            ID = id;
        }

        public override string ToString()
        {
            return  ID.ToString("00") + " " +  Type.ToString();
        }

        public event PropertyChangedEventHandler PropertyChanged;
    } 
```

当类型是视频时，当我将类型更改为调谐器时，组合框显示 01 视频，组合框仍然显示 01 视频，但它应该是 01 调谐器。但是当我调试对象类型更改为调谐器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T10:32:21.027

这是完全正常的。`ListBox`不可能知道当或改变`ToString`时会返回不同的值。`ID``Type`

你必须以不同的方式来做。

```
<ListBox ItemsSource="{Binding ...}">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <TextBlock>
        <TextBlock Text="{Binding ID}"/>
        <TextBlock Text=" "/>
        <TextBlock Text="{Binding Type}"/>
      </TextBlock>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

# php - \n 或 \n 在 php echo 中不打印

> ID：13741485
> 
> 赞同：8
> 
> 时间：2012-12-06T10:22:02.500
> 
> 标签：php, string

> **可能重复：**
> [在 PHP 中用单引号打印换行符 PHP 中单引号](https://stackoverflow.com/questions/2531969/print-newline-in-php-in-single-quotes)
> [和双引号字符串的区别](https://stackoverflow.com/questions/3446216/difference-between-single-quote-and-double-quote-string-in-php)

```
$unit1 = 'paragrahp1';
$unit2 = 'paragrahp2';
echo '<p>' . $unit1 . '</p>\n';
echo '<p>' . $unit2 . '</p>'; 
```

这正在显示（在查看源代码上）：

```
<p>paragraph1</p>\n<p>paragraph2</p> 
```

但不是我所期待的，不打印新行，可以是什么？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-06T10:23:28.640

PHP 仅在使用双引号 ( ) 时解释转义字符（转义反斜杠`\\`和转义单引号除外）`\'``"`

这有效（导致换行）：

```
"\n" 
```

这不会导致换行：

```
'\n' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-06T10:25:09.580

Better use PHP_EOL ("End Of Line") instead. It's cross-platform.

E.g.:

```
$unit1 = 'paragrahp1';
$unit2 = 'paragrahp2';
echo '<p>' . $unit1 . '</p>' . PHP_EOL;
echo '<p>' . $unit2 . '</p>'; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-06T10:22:57.113

转义序列（以及变量）在[双引号](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double)和[heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)字符串中工作。因此，将您的代码更改为：

```
echo '<p>' . $unit1 . "</p>\n"; 
```

PS：一个澄清，单引号字符串接受两个转义序列：

*   `\'`当你想在单引号字符串中使用单引号时
*   `\\`当你想从字面上使用反斜杠时

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-06T10:23:12.650

`\n`必须用双引号！

```
echo "hello\nworld"; 
```

输出

```
hello
world 
```

* * *

解决这个问题的一个好方法是使用 PHP 作为一种模板语言

```
<p>
    Hello <span><?php echo $world ?></span>
</p> 
```

输出

```
<p>
    Hello <span>Planet Earth</span>
</p> 
```

请注意，所有换行符都保持不变！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-06T10:23:33.983

`\n`必须用双引号！

```
 echo '<p>' . $unit1 . "</p>\n"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T12:15:01.520

```
$unit1 = "paragrahp1";             
$unit2 = "paragrahp2";  
echo '<p>'.$unit1.'</p>';  
echo '<p>'.$unit2.'</p>'; 
```

从新行开始时始终使用标记`<p>`，因此您不需要使用 /n 类型语法。

# kinect - 位图到 avi 异常

> ID：13741505
> 
> 赞同：0
> 
> 时间：2012-12-06T10:23:15.477
> 
> 标签：kinect, avi, kinect-sdk, vfw

我正在使用[Simple C# Wrapper for the AviFile Library ，以及我在](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)[这里](https://stackoverflow.com/questions/10848190/convert-kinect-colorframe-to-bitmap)找到的代码片段，以便从 Kinect 的色框创建一个 avi 文件。

我得到了这个异常：“AVIFileOpen 中的异常：-2147205009”

```
 aviManager = new AviManager(@"C:\temp\temp.avi", false);
        aviStream = aviManager.AddVideoStream(false, 30, _firstBitmap); 
```

上面提到的[函数](https://stackoverflow.com/questions/10848190/convert-kinect-colorframe-to-bitmap)生成“_firstBitmap”的地方

```
Bitmap ImageToBitmap(ColorImageFrame Image)
{
     byte[] pixeldata = new byte[Image.PixelDataLength];
     Image.CopyPixelDataTo(pixeldata);
     Bitmap bmap = new Bitmap(Image.Width, Image.Height, PixelFormat.Format32bppRgb);
     BitmapData bmapdata = bmap.LockBits(
         new Rectangle(0, 0, Image.Width, Image.Height),
         ImageLockMode.WriteOnly, 
         bmap.PixelFormat);
     IntPtr ptr = bmapdata.Scan0;
     Marshal.Copy(pixeldata, 0, ptr, Image.PixelDataLength);
     bmap.UnlockBits(bmapdata);
     return bmap;
 } 
```

并且颜色帧图像由 Kinect SDK 的 ColorFrameReady 委托提供

```
private void SensorColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
{
    using (ColorImageFrame colorFrame = e.OpenColorImageFrame())
    {
        if (colorFrame != null)
        {
            // Copy the pixel data from the image to a temporary array
            colorFrame.CopyPixelDataTo(this.colorPixels);

            // Write the pixel data into our bitmap
            this.colorBitmap.WritePixels(
                new Int32Rect(0, 0, this.colorBitmap.PixelWidth, this.colorBitmap.PixelHeight),
                this.colorPixels,
                this.colorBitmap.PixelWidth * sizeof(int),
                0);
            AviManager aviManager = new AviManager(@"C:\temp\temp.avi", false);
            VideoStream aviStream = aviManager.AddVideoStream(false, 30, bmp);

            Bitmap bitmap = ImageToBitmap(colorFrame);
            aviStream.AddFrame(bitmap);
            bitmap.Dispose();
            aviManager.Close();
        }
    }
} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:15:24.237

[AForge.NET](http://www.aforgenet.com/framework/)框架提供了多种功能，使您可以轻松编写 AVI 或其他视频文件。它还为 Kinect 提供[直接支持](http://www.aforgenet.com/framework/docs/html/ec99e402-afc6-f187-4269-8e640ef5a26f.htm)，让您可以访问摄像机。

但是，根据网站上的信息，它需要`libfreenect`. 我不知道`libfreenect`Office Kinect SDK 是否可以在同一个应用程序中和谐相处。

AVIWriter[类](http://www.aforgenet.com/framework/features/avi_files.html)非常简单，不一定要求您使用 AForge.NET 的 Kinect 访问。您可以轻松地从官方 Kinect SDK 获取最新的色帧，将其转换为 a`Bitmap`并输出。

# php - 使用 strtotime() 计算时差（以小时和分钟为单位）

> ID：13741507
> 
> 赞同：2
> 
> 时间：2012-12-06T10:23:16.613
> 
> 标签：php, date, datetime

```
$time1 = strtotime('23:56');
$time2 = strtotime('00:21');
echo ($time1 - $time2)/60; 
```

预期的 o/p 是`25`。但它返回`1415`;

如果我改变

`$time2= strtotime('24:21');`

它返回 -`25`这是部分正确的（因为它返回负数）。

任何人都可以建议我，以分钟为单位计算时差的其他一些功能。

谢谢 ：）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T10:29:02.037

如果您仅使用 strtotime 时间，则它需要当前日期，因此：

```
$time1 = strtotime('23:56');  // 2012-12-06 23:56
$time2 = strtotime('00:21');  // 2012-12-06 00:21
echo ($time1 - $time2)/60; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T10:29:26.480

这是因为您没有指定日期，所以 00:21 是今天的开始，23:56 是今天的结束

1415 是 23 小时的差异。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-06T10:56:37.410

假设`$time2`必须大于或等于`$time1`。然后`$time2`进行相应的调整：

**示例 1 -- 同一天**

```
$time1 = strtotime('00:21');
$time2 = strtotime('23:56');
if($time2 < $time1) {
    $time2 += 24 * 60 * 60;
}
echo ($time2 - $time1) / 60; // 1415 
```

**示例 2 —— 天翻转**

```
$time1 = strtotime('23:56');
$time2 = strtotime('00:21');
if($time2 < $time1) {
    $time2 += 24 * 60 * 60;
}
echo ($time2 - $time1) / 60; // 25 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T10:30:18.560

php的回答是正确的，它怎么知道你想到了第二天呢？只需从 1440（一天中的分钟数）中减去您的值，然后您将获得所需的结果...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T10:30:22.670

预期的输出不是`25`。您正在从一天中的较晚时间中减去一天中的早期时间。11:56 PM - 12:21 AM 几乎是 24 小时（或 1440 分钟）。

您的结果`1415`正是预期的结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T12:08:06.787

您可以保存时间戳`$temp`并使用日期功能

```
 $time1 = timestamp;
$time2 = timestamp;
$temp  = $time1 - $time2;

echo date("F j Y i:s",$temp); 
```

# asp.net-mvc - ASP.NET MVC 4“字典值提供者 .ContainsPrefix()" 方法错误

> ID：13741514
> 
> 赞同：4
> 
> 时间：2012-12-06T10:23:40.393
> 
> 标签：asp.net-mvc

```
public class UnitTest1
{
    [TestMethod]
    public void TestMethod1()
    {
        var key = new Dictionary<string, object>();
        key.Add("CPLID", new object());
        key.Add("EqID", new object());
        key.Add("Shift", new object());
        key.Add("DateTime", new object());
        key.Add("UpdateDateTime", new object());
        key.Add("No", new object());
        key.Add("LineStop.Remark", new object());
        key.Add("IsRemark", new object());
        key.Add("DispatchID", new object());
        key.Add("CopperID", new object());
        key.Add("CopperLV", new object());
        key.Add("InThickness", new object());
        key.Add("InWidth", new object());
        key.Add("OutWidth", new object());
        key.Add("OutLength", new object());
        key.Add("OutPiece", new object());
        key.Add("WeldingNum", new object());
        key.Add("GuideNum", new object());
        key.Add("Supply", new object());
        key.Add("Produce", new object());
        key.Add("ReturnMaterial", new object());
        key.Add("StartTime", new object());
        key.Add("EndTime", new object());
        key.Add("PrelineNum", new object());
        key.Add("SelflineNum", new object());
        key.Add("ProcessModeNum", new object());
        key.Add("ProcessResultNum", new object());
        key.Add("ProcessMode[0].CopperID", new object());
        key.Add("ProcessMode[0].Mode", new object());
        key.Add("ProcessMode[1].CopperID", new object());
        key.Add("ProcessMode[1].Mode", new object());
        key.Add("ProcessMode[2].CopperID", new object());
        key.Add("ProcessMode[2].Mode", new object());
        key.Add("ProcessMode[3].CopperID", new object());
        key.Add("ProcessMode[3].Mode", new object());
        //key.Add("ProcessMode[4].CopperID", new object());
        //key.Add("ProcessMode[4].Mode", new object());
        DictionaryValueProvider<object> ob = new DictionaryValueProvider<object>(key, CultureInfo.CurrentCulture);

        Assert.IsTrue(ob.ContainsPrefix("ProcessMode"));
    }
} 
```

以上在 MVC3 中运行的示例测试代码是有效的。但是，“ContainsPrefix”方法在 MVC3 中很好，但在 MVC4 中不能正常工作。

然后，当我尝试添加更多项目时。`ProcessMode[4].CopperID`和（删除评论）之类的东西 `ProcessMode[4].Mode`。它在 MVC4 上工作正常。

我觉得很奇怪，</p>

该问题有时会出错：“发布带有 json 内容的 ajax”并且`DefaultModelBinder`它会产生一个错误的数据。

`ContainsPrefix`MVC3 和 MVC4 中的方法是否不同？

12/7 更新

[http://forums.asp.net/t/1856357.aspx/1?FormValueProvider+skips+form+values](http://forums.asp.net/t/1856357.aspx/1?FormValueProvider+skips+form+values)

同样的问题，它让我无法使用 MVC4

使用“二进制搜索”搜索前缀字符串

制作“。” 和 '[' 跳过匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:29:01.143

我找到了解决方案.......................：

[http://weblogs.asp.net/imranbaloch/archive/2012/12/08/fixing-model-the-binding-issue-of-asp-net-mvc-and-asp-net-web-api.aspx](http://weblogs.asp.net/imranbaloch/archive/2012/12/08/fixing-model-the-binding-issue-of-asp-net-mvc-and-asp-net-web-api.aspx)

# content-management-system - 如何创建自定义内容类型作为 Orchard 模块的一部分？

> ID：13741516
> 
> 赞同：3
> 
> 时间：2012-12-06T10:23:54.027
> 
> 标签：content-management-system, orchardcms

我想在 Orchard 1.6 中创建一个自定义包内容类型。我已经有了一个内容部分，它代表了一个包的整个数据库记录和 UI，但现在我想知道我是否正确地处理了这个问题。

在我看来，下一步是使用 Orchard 仪表板创建一个新的内容类型，并将我的自定义内容部分添加到该类型中。但是，内容类型是 Orchard 内部的，依赖于托管内容部分的我的“外部”模块。我怎样才能使我的内容类型仅在我的模块启用时才可用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T15:57:28.837

为方便起见，您可以创建内容类型作为模块中迁移之一的一部分。这只会在启用时运行。它看起来像这样......

```
 //Inside of your migration file... 
   public int UpdateFrom1(){
     ContentDefinitionManager.AlterTypeDefinition("Package", cfg=> cfg
        .Creatable()
        .WithPart("YourCustomPart")
        .WithPart("CommonPart")
        .WithPart("Whatever other parts you want..."));
        return 2;
   } 
```

禁用模块时删除此内容类型将是棘手的部分，因为它可能会出乎用户意料。也许“包”是他们仍然想使用的一种类型，并附有不同的部件。此外，如果他们手动删除您的模块而不禁用，您就无法真正编写代码来响应该事件。我所知道的唯一可靠的是 IFeatureEventHandler。如果他们在管理员中禁用模块，这将允许您删除您的内容类型...

```
public PackageRemover : IFeatureEventHandler {
  private readonly IContentDefinitionManager _contentDefinitionManager;
  public PackageRemover(IContentDefinitionManager contentDefinitionManager){
    _contentDefinitionManager = contentDefinitionManager;
  }

  public void Installed(Feature feature){}
  public void Enabling(Feature feature){}
  public void Enabled(Feature feature){}
  public void Disabling(Feature feature){
    _contentDefinitionManager.DeleteTypeDefinition("Package");
  }
  public void Disabled(Feature feature){}
  public void Uninstalling(Feature feature){}
  public void Uninstalled(Feature feature){}
} 
```

# firefox - Odd Firefox rendering (css transform)

> ID：13741517
> 
> 赞同：2
> 
> 时间：2012-12-06T10:23:55.780
> 
> 标签：firefox, css, rendering, transform

this new CSS3 stuff is so fancy, but the rendering seems to be really inconsistent among browsers (and I'm not even talking about the shadow shape itself)

Here I made an example that looks fabulous in Chrome, but with a jagged border in Firefox: [http://jsfiddle.net/eBJxV/4/](http://jsfiddle.net/eBJxV/4/)

Note that I've added a box-shadow and it looks like the background color shines through. For Chrome, there is this workaround with translate3D, is there also something I can do for Firefox?

here's the code you can also see in JSFiddle

 `````
h1 {
    background-color: #E8501F;
    border-radius: 13px 0 0 13px;
    box-shadow: 2px 3px 3px rgba(0, 0, 0, 0.3);
    display: block;
    font-size: 18px;
    height: 30px;
    letter-spacing: 0.03em;
    padding: 0 20px;
    text-transform: uppercase;

    transform: matrix(0.997564, -0.0697565, 0.0697565, 0.997564, 0, 0);
    transform: rotate(-4deg) translate3d( 0, 0, 0);

    -webkit-transform: matrix(0.997564, -0.0697565, 0.0697565, 0.997564, 0, 0) translate3d( 0, 0, 0);
    -webkit-transform: rotate(-4deg) translate3d( 0, 0, 0);

    margin:10px 0;
    width:100px;
    font-weight:bold;
    font-family:Verdana;
    color:#ffffff;
}

body{
background-color:#FFF;
} 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-09T17:40:58.553

您可以使用 CSS 过滤器修复它：

```
filter: url('data:image/svg+xml;utf8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><filter id="gaussian_blur"><feGaussianBlur in="SourceGraphic" stdDeviation="0" /></filter></defs></svg>#gaussian_blur'); 
```

这是jsfiddle：

[http://jsfiddle.net/eBJxV/14/](http://jsfiddle.net/eBJxV/14/)

请注意，此信息（以及更多信息）在我不久前写的关于该主题的博客文章中进行了讨论：

[http://www.useragentman.com/blog/2014/05/04/fixing-typography-inside-of-2-d-css-transforms/](http://www.useragentman.com/blog/2014/05/04/fixing-typography-inside-of-2-d-css-transforms/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:26:12.803

**used to this** for old **Firefox** `-moz`

**As like this**

```
h1 {

    -moz-transform: matrix(0.997564, -0.0697565, 0.0697565, 0.997564, 0, 0) translate3d( 0, 0, 0);
    -moz-transform: rotate(-4deg) translate3d( 0, 0, 0);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-23T11:33:55.403

解决了这个问题，通过添加一个 1px 的边框和相同的背景颜色。然后以不同的方式应用 box-sizing，使边框成为尺寸的一部分。然后由于填充，不得不改变宽度。

[http://jsfiddle.net/eBJxV/19/](http://jsfiddle.net/eBJxV/19/)

```
h1 {
    background-color: #E8501F;
    border-radius: 13px 0 0 13px;
    box-shadow: 2px 3px 3px rgba(0, 0, 0, 0.3);
    display: block;
    font-size: 18px;
    height: 30px;
    letter-spacing: 0.03em;
    padding: 0 20px;
    text-transform: uppercase;
    border-style: solid;
    border-color: #E8501F;
    border-width:1px;
    transform: matrix(0.997564, -0.0697565, 0.0697565, 0.997564, 0, 0);
    transform: rotate(-4deg) translate3d( 0, 0, 0);

    box-sizing: border-box;
    outline: 1px solid transparent;

    -webkit-transform: matrix(0.997564, -0.0697565, 0.0697565, 0.997564, 0, 0) translate3d( 0, 0, 0);
    -webkit-transform: rotate(-4deg) translate3d( 0, 0, 0);

    margin:10px 0;
    width:140px;
    font-weight:bold;
    font-family:Verdana;
    color:#ffffff;
}

body{
    background-color:#FFF;
}
```

```
 <h1>JSFiddle</h1>
   <h1>Shiddle</h1>
`````

# c# - 在 C# 中使用设置类

> ID：13741520
> 
> 赞同：2
> 
> 时间：2012-12-06T10:24:04.467
> 
> 标签：c#, winforms, properties.settings

我正在使用`Properties.Settings`该类来保存应用程序设置。我想知道，一旦我在客户端系统中部署，设置是否会在应用程序重启和系统重启时保存。

考虑以下场景：

部署应用程序后，用户将通过 UI 将手机号码保存为

电话：1xxxx - 45678

现在，我将电话号码另存为

```
 Properties.Settings.Default.ClientPhone = this.PhoneText.Text;
 Properties.Settings.Default.Save(); 
```

我是否理解，电话号码将跨 app.restarts 和重新启动保存在应用程序中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:30:08.367

这是关于应用程序和用户设置的区别。应用程序设置是只读的。用户设置永久存储在每个用户的基础上。**您的代码正是更改和保存用户设置所需要的**。

请注意：由于它们被称为“用户设置”，它们将为机器上的每个用户单独存储！您不能使用默认的 .NET 设置机制创建对所有用户都相同的可变设置。

不要重新发明轮子！使用 .NET 设置机制 - 你在你的例子中做对了:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:34:07.880

这可以正常工作，但是要记住的一件事是，如果您安装新版本的程序，它将“丢失”旧设置（因为这些设置特定于您的程序的特定版本）。（“版本”是指 AssemblyVersion）

幸运的是，您可以通过在 Main() 开始处或附近调用以下函数来处理此问题。为此，您需要添加一个名为 NeedSettingsUpgrade 的新布尔设置属性并将其默认为“true”：

```
/// <summary>Upgrades the application settings, if required.</summary>

private static void upgradeProgramSettingsIfNecessary()
{                                                        
    // Application settings are stored in a subfolder named after the full #.#.#.# version
    // number of the program. This means that when a new version of the program is installed,
    // the old settings will not be available.
    //
    // Fortunately, there's a method called Upgrade() that you can call to upgrade the settings
    // from the old to the new folder.
    //
    // We control when to do this by having a boolean setting called 'NeedSettingsUpgrade' which
    // is defaulted to true. Therefore, the first time a new version of this program is run, it
    // will have its default value of true.
    //
    // This will cause the code below to call "Upgrade()" which copies the old settings to the new.
    // It then sets "NeedSettingsUpgrade" to false so the upgrade won't be done the next time.

    if (Settings.Default.NeedSettingsUpgrade)
    {
        Settings.Default.Upgrade();
        Settings.Default.NeedSettingsUpgrade = false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:28:42.443

一个快速的谷歌应该已经为你完成了。

是的，他们会根据 msdn：`.NET allows you to create and access values (settings) that are persisted between application execution sessions.`

[http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx)

# jbehave - How do I put a specific order to Jbehave story execution?

> ID：13741525
> 
> 赞同：1
> 
> 时间：2012-12-06T10:24:27.850
> 
> 标签：jbehave

When you submit sorties to Jbehave with

```
@Override
public InjectableStepsFactory stepsFactory() 
{
         return new InstanceStepsFactory(configuration(), 
                 new LoginSteps(), new PreferencesSteps(), new BetterSteps());
} 
```

They are executed in BetterSteps, LoginSteps, PreferencesStpes fasion. How do I make these classes having scenarios execute in a custom order which is not alphabetical? Say LoginSteps followed by PreferenceSteps followed by BetterSteps etc?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T09:25:38.107

有一个解决你的问题的方法..

你可以让你的故事名称从 Sn 开始，其中 n 是 1,2,3..... 比如`S1_LoginSteps`，`S2_PreferenceSteps`

Jbehave 将按字母顺序执行故事，从 S1 开始，然后 S2....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:51:59.083

我是否正确理解您在所有这些步骤类中都有具有相同或相似模式的步骤，并且想要控制哪些步骤用于其他步骤？

如果是这样，请在此处查看步骤优先级：http: [//jbehave.org/reference/stable/prioritising-steps.html](http://jbehave.org/reference/stable/prioritising-steps.html)并将优先级应用于您的首选步骤。

# angularjs - AngularJS withCredentials

> ID：13741533
> 
> 赞同：51
> 
> 时间：2012-12-06T10:25:09.550
> 
> 标签：angularjs

我一直在研究一个 AngularJS 项目，该项目必须将 AJAX 调用发送到一个 restfull 网络服务。这个网络服务在另一个域上，所以我必须在服务器上启用 cors。我通过设置这些标题来做到这一点：

```
cresp.getHttpHeaders().putSingle("Access-Control-Allow-Origin", "http://localhost:8000");
cresp.getHttpHeaders().putSingle("Access-Control-Allow-Credentials", "true");
cresp.getHttpHeaders().putSingle("Access-Control-Allow-Methods", "GET, POST, DELETE, PUT");
cresp.getHttpHeaders().putSingle("Access-Control-Allow-Headers", "Content-Type, Accept, X-Requested-With"); 
```

我能够将 AJAX 请求从 AngularJS 发送到后端，但是当我尝试获取会话的属性时遇到了问题。我相信这是因为 sessionid cookie 没有发送到后端。

通过将 withCredentials 设置为 true，我能够在 jQuery 中解决此问题。

```
$("#login").click(function() {
    $.ajax({
        url: "http://localhost:8080/api/login",
        data : '{"identifier" : "admin", "password" : "admin"}',
        contentType : 'application/json',
        type : 'POST',
        xhrFields: {
            withCredentials: true
        },
        success: function(data) {
            console.log(data);
        },
        error: function(data) {
            console.log(data);
        }
    })
});

$("#check").click(function() {
    $.ajax({
        url: "http://localhost:8080/api/ping",
        method: "GET",
        xhrFields: {
            withCredentials: true
        },
        success: function(data) {
            console.log(data);
        }
    })
}); 
```

我面临的问题是我无法通过 $http 服务在 AngularJS 中使用它。我试过这样：

```
$http.post("http://localhost:8080/api/login", $scope.credentials, {withCredentials : true}).
            success(function(data) {
                $location.path('/');
                console.log(data);
            }).
            error(function(data, error) {
                console.log(error);
            }); 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-01-02T19:24:12.093

你应该传递一个配置对象，像这样

```
$http.post(url, {withCredentials: true, ...}) 
```

或在旧版本中：

```
$http({withCredentials: true, ...}).post(...) 
```

另请参阅[您的其他问题](https://stackoverflow.com/questions/13734686/communication-between-angularjs-and-a-jersey-webservice-which-are-on-a-different/14111039#14111039)。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2015-04-13T10:34:17.770

在您的应用程序配置函数中添加：

```
$httpProvider.defaults.withCredentials = true; 
```

它将为您的所有请求附加此标头。

别忘了注入`$httpProvider`

# 编辑：2015-07-29

这是另一个解决方案：

HttpIntercepter 可用于添加公共标头以及公共参数。

在你的配置中添加这个：

`$httpProvider.interceptors.push('UtimfHttpIntercepter');`

并创建具有名称的工厂`UtimfHttpIntercepter`

```
 angular.module('utimf.services', [])
    .factory('UtimfHttpIntercepter', UtimfHttpIntercepter)

    UtimfHttpIntercepter.$inject = ['$q'];
    function UtimfHttpIntercepter($q) {
    var authFactory = {};

    var _request = function (config) {
        config.headers = config.headers || {}; // change/add hearders
        config.data = config.data || {}; // change/add post data
        config.params = config.params || {}; //change/add querystring params            

        return config || $q.when(config);
    }

    var _requestError = function (rejection) {
        // handle if there is a request error
        return $q.reject(rejection);
    }

    var _response = function(response){
        // handle your response
        return response || $q.when(response);
    }

    var _responseError = function (rejection) {
        // handle if there is a request error
        return $q.reject(rejection);
    }

    authFactory.request = _request;
    authFactory.requestError = _requestError;
    authFactory.response = _response;
    authFactory.responseError = _responseError;
    return authFactory;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T00:37:42.270

澄清：

```
$http.post(url, {withCredentials: true, ...}) 
```

应该

```
$http.post(url, data, {withCredentials: true, ...}) 
```

根据[https://docs.angularjs.org/api/ng/service/$http](https://docs.angularjs.org/api/ng/service/$http)

# sql - How to get table from value in another table

> ID：13741535
> 
> 赞同：0
> 
> 时间：2012-12-06T10:25:10.277
> 
> 标签：sql, oracle

I have a table with names of other tables. How can I create a query that gets the table from the values?

For example, if my table has the values:

```
tables
------
users
users2
users3 
```

I want to create Dynamic SQL function that knows how to take the values (i.e. the table names) from the reference table and then select * from that named value.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:46:32.943

如果您只想要一个一次性脚本，您可以运行查询：

```
select 'select * from ' || table_name || ';' cmd
from user_tables; 
```

然后运行输出

# java - 流式上传/下载

> ID：13741536
> 
> 赞同：2
> 
> 时间：2012-12-06T10:25:12.443
> 
> 标签：java, file-upload, playframework, download, netty

我正在尝试创建一个控制器来使用流方法下载和上传文件，在我的情况下，所有文件都作为 Blob 保存在数据库中。我阅读了 Jboss Netty 的文档，但我认为这不是我的最佳解决方案。
有没有人以前做过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T07:25:33.293

看看[这个](http://www.lunatech-research.com/playframework-file-upload-blob)文件上传/下载的例子。您可以在控制器中添加额外的处理（压缩...）。

# c# - PerlEmbed - C# doesn't work with Interpreter.Language = @"PerlScript"

> ID：13741538
> 
> 赞同：1
> 
> 时间：2012-12-06T10:25:19.310
> 
> 标签：c#

Regarding to the method in: [PerlEmbed - C# - Mono - Linux](https://stackoverflow.com/questions/1196620/perlembed-c-sharp-mono-linux?lq=1)

I got the following error when I tried to run the code above, at line

```
Interpreter.Language = @"**PerlScript**" 
```

I can run a VBScript but unfortunately I couldn't run a PerlScript. Should I do/setup/add etc. something else?

```
System.Runtime.InteropServices.COMException was unhandled
  HelpLink="MSSCRIPT.HLP"
  Message="***A script engine for the specified language can not be created.***"
  Source="ScriptControl"
  ErrorCode=-2146827908
  StackTrace:
       at MSScriptControl.ScriptControlClass.set_Language(String pbstrLanguage)
       at fpu_Parsing.Perl_Interpreter.Perl_Output_returnString() in D:\Documents and Settings\labuser\My Documents\Visual Studio 2005\Projects\fpu_Parsing\fpu_Parsing\Perl_Interpreter.cs:line 77
       at fpu_Parsing.frmFpuAnalyzer..ctor() in D:\Documents and Settings\labuser\My Documents\Visual Studio 2005\Projects\fpu_Parsing\fpu_Parsing\frmFpuAnalyzer.cs:line 24
       at fpu_Parsing.Program.Main() in D:\Documents and Settings\labuser\My Documents\Visual Studio 2005\Projects\fpu_Parsing\fpu_Parsing\Program.cs:line 17
       at System.AppDomain.nExecuteAssembly(Assembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart() 
```

# javascript - 外部 HTML 检索

> ID：13741551
> 
> 赞同：1
> 
> 时间：2012-12-06T10:25:48.397
> 
> 标签：javascript, jquery

我正在尝试通过 ajax 调用获取[http://en.wikipedia.org的内容。](http://en.wikipedia.org)为此，我正在使用 jQuery。这是代码：

```
jQuery.ajax({
  url:"http://en.wikipedia.org",
  crossDomain: true,
  dataType: "jsonp",
  jsonpCallback: "myCallback"
});

function myCallBack(data){
  console.log("ok");  
} 
```

问题是我在 Firebug 中遇到了这个错误：

```
SyntaxError: syntax error
<!DOCTYPE html> 
```

所以我会说，虽然回调函数没有运行，但 html 内容已被提取。在某些时候它遇到指定的标签，抛出这个错误并停止运行脚本。

你知道问题可能出在哪里吗？

有没有其他方法可以获取 html 页面的内容？我不想使用 iframe，因为这意味着我将无法使用或修改其内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:29:11.460

这是因为您的 Ajax 函数需要`json`来自提供的 url 的响应并给出`html`响应，这就是您收到语法错误的原因，您也会从 Chrome 调试器中收到同样的错误。

**更新：**

*您正在尝试做的事情称为跨域请求。*

“出于安全原因，脚本无法访问来自其他域的内容。Mozilla 有一篇关于[HTTP 访问控制](https://developer.mozilla.org/En/HTTP_Access_Control)的长文章，但底线是，如果网站本身没有添加对跨域请求的支持，你就完蛋了。”

[参考](https://stackoverflow.com/questions/7638773/cross-domain-requests-with-jquery)

**解决方案：**

您可以通过为您提供外部页面的后端脚本来解决此问题。就像代理服务器一样，它驻留在同一个域中，因此您不必面对跨域问题。您可以通过以下方式加载它们

```
$.get(url, success: function(data) { // the url that will fetch the external html page for you, located on the same domain
  console.log("ok");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:30:57.263

您在这里遇到的问题是您正在跨域调用。尽管您似乎已经意识到这一点并且正在为您的请求使用 jsonp，但您尝试提取的文档（即 wikepedia）并不是 jsonp 文档。因此，一旦 ajax 找到 html 标签，它就会抛出一个错误，正如您所定义的那样，您期望得到 jsonp 响应。

由于跨域问题，您不能仅使用 javascript 跨域提取其他网站数据，如果您想完成您在此处所做的事情，您将需要使用后端语言来获取数据。

有用的链接是[http://json-p.org/](http://json-p.org/) 希望有帮助

# sql - 使用复合键生成 SQL 查询动态行

> ID：13741557
> 
> 赞同：0
> 
> 时间：2012-12-06T10:26:06.783
> 
> 标签：sql, postgresql, ms-access, composite-key, generate-series

我的问题由 3 个部分组成。

第一部分：
有没有办法根据值生成行？

例如：
我想根据每个家庭的`family_members_count`. 每张凭证都应该有一个唯一的 ID：

基表：

```
id name family_members_count
1  fadi 2
2  sami 3
3  ali  1 
```

结果：

```
family_id     name      voucher_id 
1             fadi      121
1             fadi      122
2             sami      123
2             sami      124
2             sami      125
3             ali       126 
```

第二部分：
可以控制voucher_id复合键吗？我希望`voucher_id`是这样的

```
(location)(cycle)(sequence 5 digits) 
```

如果north = 08并且我们处于第二个周期，它应该是：

```
080200001
080200002 
```

... 等等。

第三部分：
我需要 MS Access 2010 SQL 和 PostgreSQL 9.1 SQL 中的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:39:18.647

### 问题 1

使用[`generate_series()`](http://www.postgresql.org/docs/current/interactive/functions-srf.html). （在即将到来的 9.3 版本中寻找关键字[`LATERAL`](http://wiki.postgresql.org/wiki/Todo)。）

```
SELECT id AS family_id
      ,name
      ,120 + generate_series(1, family_members_count) AS voucher_id 
FROM fam; 
```

[**-> sqlfiddle 演示**](http://sqlfiddle.com/#!12/c714f/1)

### 问题2

```
SELECT id AS family_id
      ,name
      ,location 
       || to_char(cycle, 'FM00')
       || to_char(generate_series(1, family_members_count), 'FM00000')
          AS voucher_id 
FROM fam2; 
```

[**-> sqlfiddle 演示**](http://sqlfiddle.com/#!12/a5a68/1)

*   请注意使用[`to_char()`](http://www.postgresql.org/docs/current/interactive/functions-formatting.html)将数字格式化为文本 - 特别是使用[`FM`模式修饰符](http://www.postgresql.org/docs/current/interactive/functions-formatting.html#FUNCTIONS-FORMATTING-DATETIMEMOD-TABLE)来避免前导空格。

### 问题 3

抱歉，我在 10 年前从我的系统中移除了 MS Access，并且从未回头。其他人可能会填写。我怀疑它会那么简单。

# unix - 如何删除 top(1) 输出的每一行的第二个单词？

> ID：13741558
> 
> 赞同：5
> 
> 时间：2012-12-06T10:26:09.393
> 
> 标签：unix, sed

我有一个格式化的进程列表（顶部输出），我想删除不必要的信息。例如，如何删除每行的第二个单词+空格。

例子：

```
1 a hello
2 b hi
3 c ahoi 
```

我想删除 ab 和 c。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T10:31:40.830

你可以使用`cut`命令。

```
 cut -d' ' -f2 --complement file 
```

`--complement`做相反的事情。即`-f2`选择了第二个字段。并使用`--complement`if 打印除第二个以外的所有字段。当您有可变数量的字段时，这很有用。

GNU 的 cut 有选项`--complement`. 如果，`--complement`则不可用，则以下操作相同：

剪切 -d' ' -f1,3- 文件

含义：打印第一个字段，然后从第三个字段打印到末尾，即排除第二个字段并打印其余字段。 **编辑：**

如果你愿意`awk`，你可以这样做：`awk {$2=""; print $0}' file`

这会将第二个设置为空并打印整行（一个接一个）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T10:29:54.207

用于`sed`替换第二列：

```
sed -r 's/(\w+\s+)\w+\s+(.*)/\1\2/' file 
1 hello
2 hi
3 ahoi 
```

解释：

```
(\w+\s+) # Capture the first word and trailing whitespace
\w+\s+   # Match the second word and trailing whitespace
(.*)     # Capture everything else on the line

\1\2     # Replace with the captured groups 
```

注意：使用`-i`选项将结果保存回`file`,`-r`用于扩展正则表达式，检查`man`可能`-E`取决于实现。

或用于`awk`仅打印指定的列：

```
$ awk '{print $1, $3}' file
1 hello
2 hi
3 ahoi 
```

两种解决方案都有优点，该`awk`解决方案适用于少量固定数量的列，但您需要使用临时文件来存储更改`awk '{print $1, $3}' file > tmp; mv tmp file`，因为该`sed`解决方案更灵活，因为列不是问题，并且`-i`选项在地方。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T10:34:17.367

一种使用方式`sed`：

```
sed 's/ [^ ]*//' file 
```

结果：

```
1 hello
2 hi
3 ahoi 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-06T10:36:13.033

使用重击：

```
$ while read f1 f2 f3
> do
>  echo $f1 $f3
> done < file
1 hello
2 hi
3 ahoi 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-06T13:02:32.980

这可能对您有用（GNU sed）：

```
sed -r 's/\S+\s+//2' file 
```

# python - IMDBpy 获取屏幕信息

> ID：13741561
> 
> 赞同：1
> 
> 时间：2012-12-06T10:26:18.293
> 
> 标签：python, imdbpy

```
import imdb    
ia = imdb.IMDb()
avatar = ia.get_movie("0120667")
ia.update(avatar, 'business')
print avatar['business'] 
```

这将返回整个总票房列表，以及每个国家/地区的放映。但是我怎样才能只得到筛选信息呢？并且仅适用于 1 个国家/地区。在这个例子中，我想获得的信息是（美国）（2005 年 7 月 10 日）（3,602 个屏幕）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T14:54:18.157

```
import imdb
import re

ia = imdb.IMDb()
avatar = ia.get_movie("0120667")
ia.update(avatar, 'business')
opening_weekends = avatar['business']['opening weekend']

def parseDate(date):
    result = {}

    if re.match(".*\d{4}$", date):
        result['year'] = date[-4:]

    m = re.match(".*(?P<month>January|February|March|April|May|June|July|"
                "August|September|October|November|December).*", date, re.I)
    if m:
        result['month'] = m.group('month').lower()

        # try to grab date too then
        daymatch = re.match("^(?P<day>\d{1,2}).*", date)

        if daymatch:
            result['day'] = daymatch.group('day')       
    return result

def parseBudget(amount):
    """
    assumptions: 
    - currency is always before the number
    - no fractions
    """

    # find index first number
    for i in range(len(amount)):
        if amount[i] in "0123456789":
            amount_idx = i
            break

    currency = amount[:amount_idx].strip()
    amount = re.sub("\D", "", amount[amount_idx:])

    return amount, currency

def parseWeekendGross(gross_text):
    g = gross_text.split(' (')
    if not len(g) == 4:
        return ""
    amount, currency = parseBudget(g[0])
    country = g[1].lstrip('(').rstrip(')')
    date = parseDate(g[2].lstrip('(').rstrip(')'))
    day, month, year = date['day'], date['month'], date['year']
    screens = re.sub("\D", "", g[3])
    if not screens:
        screens = "''"

    return amount, currency, country, day, month, year, screens

for entry in opening_weekends:
    amount, currency, country, day, month, year, screens = parseWeekendGross(entry)
    if country == "USA":
        print("Country: %s" % country)
        print("Date: %s %s %s" % (day, month, year))
        print("Screens: %s" % screens)
        break 
```

上面的代码给了我以下结果：

```
Country: USA
Date: 10 july 2005
Screens: 3602 
```

解析数据的函数是从这个项目复制的：[pyIRDG](http://sourceforge.net/projects/pyirdg/)

# java - Generating sequence number in mongoDB

> ID：13741564
> 
> 赞同：0
> 
> 时间：2012-12-06T10:26:23.873
> 
> 标签：java, jdo, datanucleus, mongodb-java, jdoql

I am using java,Datanucleus,mongodb and JDO in my project.

I have a requirement where I should generate sequence number and store it in DB. I was going through various links and found that DataNucleus supports the automatic assignment of sequence values for object identities only for the following datastore:-

```
Oracle
PostgreSQL
SAP DB
DB2
Firebird
HSQLDB
H2
Derby (from v10.6)
DB4O 
```

So does that mean -> sequence generation can't be done for mongoDB? If it can be then please provide some useful link or guidance !

Note:I am already aware of the fact that mongoDB creates an object id on its own..but I want custom sequence number generation,store it in DB and use it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:43:23.710

DataNucleus-MongoDB 支持“INCREMENT”值策略，[文档中非常清楚地说明了这一点](http://www.datanucleus.org/products/accessplatform_3_1/datastore_features.html)，此外还支持许多其他策略。

# python - Numpy：多维数组值内的比较

> ID：13741569
> 
> 赞同：1
> 
> 时间：2012-12-06T10:26:39.577
> 
> 标签：python, multidimensional-array, numpy, indexing, slice

我有一个以下形式的二维数组：

```
[[X1, X2, ..., XN]
[Y1, Y2, ..., YN]] 
```

对于每个`Xi`大于`lower_limit_X`和小于`upper_limit_X`，我想获得大于和小于**的数量** 。`Yi``lower_limit_Y``upper_limit_Y`

我希望除了一个一个索引之外，在 Numpy 中有一种有效的方法可以做到这一点。

编辑：所以我有一个 2xN 数组。第一行有 N X 的有序值，第二行有 N Y 的有序值。我想得到的是：

1.  获取 X 的`lowest_index`和`highest_index`索引，其值大于`lower_limit_X`和小于`upper_limit_X`

2.  `lowest_index`然后在索引范围 [ , `highest_index`]中切片 Y 数组（只有一个数组）

3.  计算我的切片中的元素数量，有 Yi `'s that are greater than`lower_limit_Y `and less than`upper_limit_Y`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:40:12.203

尝试[numpy.logical_and](http://docs.scipy.org/doc/numpy/reference/generated/numpy.logical_and.html)。

```
 numpy.logical_and(array1 > lower_x_limt, array1 < upper_x_limit) 
```

这将进行元素比较并在具有您的值的索引处返回一个布尔列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:34:35.743

这里有两种方法可以做到这一点，更严格的方法可能是，

```
mask = ((lower_x_limit < array[0]) & (array[0] < upper_x_limit) &
        (lower_y_limit < array[1]) & (array[1] < upper_y_limit))
count = sum(mask) 
```

如果您的数组非常大并且 x 和 y 都已排序，则可以`searchsorted`改用，

```
start = array[0].searchsorted(lower_x_limit, 'right')
end = array[0].searchsorted(upper_x_limit, 'left')
temp = array[1, start:end]
start = temp.searchsorted(lower_y_limit, 'right')
end = temp.searchsorted(upper_y_limit, 'left')
count = end - start 
```

# arrays - 算法：在 1 和 0 的数组中找到包含 K 个 0 的最小连续数组

> ID：13741570
> 
> 赞同：3
> 
> 时间：2012-12-06T10:26:47.763
> 
> 标签：arrays, algorithm, data-structures

我只有 1 和 0 的数组。现在我想找到至少包含 K 0 的最小连续子集/子数组。

示例数组为 1 1 0 1 1 0 1 1 0 0 0 0 1 0 1 1 0 0 0 1 1 0 0 1 0 0 0 且 K(6) 应为 0 0 1 0 1 1 0 0 0 或 0 0 0 0 1 0 1 1 0....

我的解决方案

```
 Array: 1 1 0 1 1 0 1 1 0  0  0  0  1  0  1  1  0  0  0   1  1  0  0
     Index: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  20 21 22 23
     Sum:   1 2 2 3 4 4 5 6 6  6  6  6  7  7  8  9  9  9  9  10 11 11 11
Diff(I-S):  0 0 1 1 1 2 2 2 3  4  5  6  6  7  7  7  8  9 10  10 10 11 12 
```

对于 K(6)

从 9-15 开始 = 将差异存储在差异中。

下一步增加差异 8-15(Difference in index) 8-14(Compare Difference in index)

所以继续寻找元素最少的元素......

我正在为此解决方案寻找更好的算法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T11:12:36.777

我相信您可以使用滚动窗口来做到这一点，例如：

1.  在给定的数组中，找到第一次出现的 0（比如在 index 处`i`）。
2.  继续扫描，直到`k`窗口中包含 0（例如，窗口在 index 处结束`j`）记录窗口长度（例如`j-i+1=L`）。
3.  现在，丢弃最左边的 0 在 index `i`，并继续扫描直到你得到下一个 0 （比如在 index`i'`
4.  扩展位于 的窗口的右端`j`以再次`j'`计数 0 的 = `k`。
5.  如果新的窗口长度`L'=j'-i'+1`更小，则更新它。

继续重复上述过程，直到`j`到达数组的末尾。

不需要额外的空间，而且`O(N)`时间复杂，因为一个元素最多会被扫描两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:02:25.677

使用额外的 O(k) 内存，您可以在 O(n) 时间内完成。这是 java 代码。您正在做的是，如果 a[i]==0 则检查队列的第一个元素指向的位置。如果位置差异小于最小值，则更新答案。

```
Queue<Integer> queue =new LinkedList<Integer>();
int i=0;
while(queue.size()<k&&i<n)
{
if(a[i]==0)
{
queue.add(i);
}
i++;
}
if(i==n&&queue.size()<k)
System.out.println("Insufficient 0''s");
int ans=i-1-queue.peek();
for(int j=i;j<n;j++)
{
if(a[i]==0)
{
queue.poll();
queue.add(i);
ans=Math.min(ans,i-queue.peek());
}
}
System.out.println(ans); 
```

编辑：解释

我们维护一个队列，该队列由所有位置为 0 的位置组成，并且我们将队列大小限制为 k。所以最初在 while 循环中，我们用前 k 个索引填充队列。如果看到所有元素后队列大小当然小于 k，那么这是不可能的。之后，我们继续遍历所有剩余的元素。每次看到 0 时，我们都会计算子序列的长度 (i-queue.peek()) 并找到最小值。此外，我们删除第一个元素，然后再次添加最新索引，保持队列大小

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T11:22:51.600

完全工作的python代码：

```
>>> A = "1 1 0 1 1 0 1 1 0  0  0  0  1  0  1  1  0  0  0   1  1  0  0".split()
>>> A = map(int, A)
>>> zero_positions = [i for i, x in enumerate(A) if x == 0]
>>> k = 3
>>> containing_k_zeros_intervals = zip(zero_positions, zero_positions[k:])
>>> min(b - a for a, b in containing_k_zeros_intervals)
3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:12:19.690

1.  从头开始扫描数组以找到索引，直到我们得到 k 个零。

有两个指针。

现在 ptr1 位于看到第一个零的索引处。开始 = ptr1

ptr2 位于我们找到 k 0 的索引处。

结束 = ptr2; a）增加ptr1。

b) 从 ptr2+1 中找到索引，直到我们找到 k 个 0。

c) 假设在 ptr3 我们找到 K 个 0。如果 ptr3-ptr1 < (end-start) 更新索引开始和结束。

重复步骤 a -c 直到列表结束。

最后， start 和 end 将有 k 个 0 的索引。

# java - 围绕 Y 轴在 3D 空间中的图像旋转

> ID：13741571
> 
> 赞同：2
> 
> 时间：2012-12-06T10:26:56.997
> 
> 标签：java, image, graphics, java-3d, image-rotation

我有一个 BufferedImage，我想在 Java 中围绕 Y 轴旋转图像（图片），θ角不是仿射变换。旋转将如下图所示（矩形将是一个图像）。

我可以通过旋转图像的每个像素并绘制图像来做到这一点。因为我必须旋转很多图像，所以我认为这不是最好的主意。

我将如何进行这种转变？

谢谢你的帮助。

![在此处输入图像描述](../Images/4ec0f85e6e6e122a6150b494f1fa37ae.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:22:05.967

通常，您需要找到从输出像素空间到输入像素空间的逆变换。然后迭代输出像素，将它们转换为输入空间并对输入图像进行采样。[Perspective Projection 上](http://en.wikipedia.org/wiki/3D_projection#Perspective_projection)的Wikipedia 条目显示了如何为 Y 轴制作旋转矩阵。如果您所做的只是围绕 Y 轴旋转，您可以简单地反转角度以获得逆变换（假设您的图像以原点为中心）。

# php - 在 iframe 中设置会话值的问题

> ID：13741572
> 
> 赞同：0
> 
> 时间：2012-12-06T10:26:56.597
> 
> 标签：php, session, iframe

我正在使用 joomla 1.5。我有一个单独的代码，它在同一个域中，但在另一个文件夹中。我正在使用 iframe 在我的 joomla 代码中访问该文件夹。现在我必须将会话值从 joomla 应用程序发送到 iframe，我通过以下代码执行此操作。

```
echo '<iframe src="https://localhost/demo/quiz/quiz_main.php?u_d='.$user->id.'" width="910" height="885" style="background-color:transparent"></iframe>'; 
```

其中 $user->id 是注册用户的 id，如果用户登录，显然该页面将打开。

然后在 quiz_main.php 页面中，我正在检查 u_d 的值，并据此控制系统。现在的问题是假设，我在同一个浏览器中使用相同的 url 打开了两个选项卡，并使用相同的用户 ID 登录。现在从一个选项卡中注销。然后转到另一个选项卡。用户可以对在 iframe 中运行的那个小应用程序执行任何操作，直到页面没有刷新。但它不应该。

请帮助我如何解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:33:36.537

无论如何你必须执行检查服务器端，所以`quiz_main.php`你需要类似的东西

```
<?php
    if(!user_is_logged_in())
        // Redirect to login
?> 
```

防止用户执行任何会影响服务器上数据的操作。

您还可以使用 JavaScript 进行检查客户端。您可以每秒钟轮询一次服务器`n`以检查用户是否仍然登录，如果没有将用户重定向到适当的页面。

下面使用 jQuery 的示例

```
function logged_in() {
    $.ajax({
        url: '/logged_in.php',
        type: 'post',
        success: function(data) {
            data = $.parseJSON(data);
            if(data['logged_in'] != true)
                window.location('login.php');
            else
                setTimeout('logged_in()', 5000); // calling itself in 5 seconds.
        }
    });
}
$(document).ready(function() {
    logged_in(); // Calling first time when the document is ready.
}); 
```

只是关于如何做到这一点的粗略草图。当然，您需要`logged_in.php`处理您的请求。

# umbraco - Umbraco CMS 无法保存模板

> ID：13741580
> 
> 赞同：1
> 
> 时间：2012-12-06T10:27:10.237
> 
> 标签：umbraco, savechanges

我在 Visual Studio 中设置了一个新的 umbraco 项目，带有任何预装的模板，当我尝试添加新的母版页时，我无法保存它，我可以在 Visual Studio 中编辑它，但我无法在 umbraco 后端保存任何更改。有什么建议可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T11:47:41.483

它可能是一个权限问题。确保 IIS 对保存母版页的目录具有 r/w 权限

# sql-server - 等号（=）和IN与子查询的区别

> ID：13741582
> 
> 赞同：8
> 
> 时间：2012-12-06T10:27:16.903
> 
> 标签：sql-server, sql-server-2012

我有一个查询需要 20 秒才能执行，请按照我的查询：

```
SELECT MATLIGA.COD_MAT_FAMILIA 
FROM 
    ORCAMENTOS.dbo.OR_1INSUMOS INSUMOS
    INNER JOIN ORCAMENTOS.dbo.OR_MAT_GRUPOS GRUPOS ON (GRUPOS.EMPRESA='01' AND GRUPOS.FILIAL='01' AND GRUPOS.CODIGO_INTERNO = 'HOT' )
    INNER JOIN ORCAMENTOS.dbo.OR_MATERIAIS MATER ON (MATER.EMPRESA='01' AND MATER.FILIAL='01' AND MATER.CODIGO_GRUPO=GRUPOS.ID AND MATER.ID = INSUMOS.COD_INSUMO_MATER )
    INNER JOIN ORCAMENTOS.dbo.OR_MAT_LIGACAO MATLIGA ON (MATLIGA.EMPRESA='01' AND MATLIGA.FILIAL='01' AND MATLIGA.CODIGO_MATERIAL  = INSUMOS.COD_INSUMO_MATER)
WHERE INSUMOS.EMPRESA='01' AND INSUMOS.FILIAL='01' 
AND INSUMOS.COD_INSUMO_MATER IS NOT NULL 
AND INSUMOS.NUMERO=10865812 
AND INSUMOS.OPCAO_SIMULACAO=1 
AND INSUMOS.CODIGO_MAQUINA = (SELECT COD_MAQ_PROPOSTA FROM ORCAMENTOS.dbo.OR_1SIMULACOES AS ORC WHERE  ORC.NUMERO=10865812 AND ORC.OPCAO_SIMULACAO = 1 AND ORC.EMPRESA='01' AND ORC.FILIAL='01' )  
AND INSUMOS.OPCAO_MAQUINA = (SELECT OPCAO_MAQUINA FROM ORCAMENTOS.dbo.OR_1SIMULACOES AS ORC WHERE  ORC.NUMERO=10865812 AND ORC.OPCAO_SIMULACAO = 1  AND ORC.EMPRESA='01' AND ORC.FILIAL='01' )  
GROUP BY MATLIGA.COD_MAT_FAMILIA  
ORDER BY  1 
```

在下面这两行中，如果我通过 (IN)、( = ALL ) 或 ( = ANY ) 更改相等的信号，它会将成本降低到 1 秒。

```
AND INSUMOS.CODIGO_MAQUINA IN (SELECT COD_MAQ_PROPOSTA FROM ORCAMENTOS.dbo.OR_1SIMULACOES AS ORC WHERE  ORC.NUMERO=10865812 AND ORC.OPCAO_SIMULACAO = 1 AND ORC.EMPRESA='01' AND ORC.FILIAL='01' )  
AND INSUMOS.OPCAO_MAQUINA IN (SELECT OPCAO_MAQUINA FROM ORCAMENTOS.dbo.OR_1SIMULACOES AS ORC WHERE  ORC.NUMERO=10865812 AND ORC.OPCAO_SIMULACAO = 1  AND ORC.EMPRESA='01' AND ORC.FILIAL='01' ) 
```

它们之间有什么区别？

谢了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T10:54:32.957

有一个小的语义差异。如果子查询匹配多个记录，则第一个查询必须失败。所以它必须完成子查询直到结束：

```
where col1 = (select col1 from table2) 
```

第二个查询一旦遇到匹配就可以停止：

```
where col1 in (select col1 from table2) 
```

# javascript - document.write() 是做什么的？

> ID：13741584
> 
> 赞同：10
> 
> 时间：2012-12-06T10:27:19.233
> 
> 标签：javascript

这是一个非常基本的问题。我有这个脚本：

```
 <script type="text/javascript">
        function write(){
            document.write('Hello2')
        }
        write();
    </script> 
```

它显示了我的完整页面。并在页面末尾显示**Hello2**。但是，当我去开发者工具并调用**write()**时，它会替换我的整个正文 html。只是好奇想知道。

```
 window.onload=write;// has the same effect. Clear's my page. 
```

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T10:30:21.413

当浏览器正在读取和解析文档时，如果有一个`script`元素调用`document.write`， 的输出将`document.write`插入到该点的文档中。但是，稍后，一旦页面完全加载，如果您使用`document.write`，它会隐式执行 a `document.open`，这会清除页面并从头开始编写新页面。

更多关于 MDN：

*   [`document.write`](https://developer.mozilla.org/en-US/docs/DOM/document.write)
*   [`document.open`](https://developer.mozilla.org/en-US/docs/DOM/document.open)

通常，与其使用`document.write`向页面添加内容，不如使用各种[DOM 方法](http://www.w3.org/DOM/DOMTR)（直接，或通过[jQuery](http://jquery.com)、[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)或[其他任何](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)一种库）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T10:30:24.877

当它在页面完成加载*后*执行时，它会覆盖整个内容——这是对这个问题的回答中提出的要点之一：[为什么 document.write 被认为是“不好的做法”？](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-17T07:36:39.977

document.write 写入文档流，在关闭（加载）的文档上调用 document.write 会自动调用 document.open，这将清除文档。

# iphone - 当 iPad 日期时间设置更改时通知应用程序

> ID：13741585
> 
> 赞同：3
> 
> 时间：2012-12-06T10:27:22.070
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

我想在 ipad 的日期时间设置更改时收到通知。有什么办法吗？

我正在使用 NSDateFormatter 来查找 iPad/iphone 时间模式是 12 小时还是 24 小时格式。NSDateFormatter 似乎需要很多时间（在时间分析中看到）。因此，我想仅在更改设置时检查使用它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-06T10:37:21.893

您可以使用以下两种方式进行操作：

1.  **`- (void)applicationSignificantTimeChange:(UIApplication *)application`在您的应用委托中实现。**
2.  **添加观察者`UIApplicationSignificantTimeChangeNotification`**

    **`[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(timeChanged:) name:UIApplicationSignificantTimeChangeNotification object:nil];`**

> **applicationSignificantTimeChange:**
> 
> 当时间发生重大变化时告诉委托人。 `- (void)applicationSignificantTimeChange:(UIApplication *)application`
> 
> ***参数***
> 
> **应用**
> 
> ```
> The delegating application object. 
> ```
> 
> 讨论
> 
> 重大时间变化的示例包括午夜的到来、运营商的时间更新以及夏令时的变化。委托可以实现此方法来调整应用程序中显示时间或对时间变化敏感的任何对象。
> 
> 在调用此方法之前，应用程序还会发布 UIApplicationSignificantTimeChangeNotification 通知，让感兴趣的对象有机会响应更改。
> 
> 如果您的应用程序当前处于挂起状态，则此消息将排队等待您的应用程序返回到前台，此时它会被传递。如果发生多个时间更改，则仅传送最近的一个。可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```
> 
> 在 UIApplication.h 中声明

更多检查[UIApplicationDelegate_Protocol](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T10:29:53.257

[为NSCurrentLocaleDidChangeNotification](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSLocale_Class/Reference/Reference.html)添加一个观察者怎么样？根据 Apple 的说法，“只要当前区域设置信息发生更改，就重新创建任何缓存的日期和数字格式化程序对象。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T12:50:31.753

您可能还想收听此通知： [`NSSystemTimeZoneDidChangeNotification`](https://developer.apple.com/documentation/foundation/nssystemtimezonedidchangenotification)

# php - 可以动态创建 MySQL 表吗？

> ID：13741587
> 
> 赞同：0
> 
> 时间：2012-12-06T10:27:23.310
> 
> 标签：php, mysql

我正在构建一个类似 aweber 的列表管理系统（用于电话号码，而不是电子邮件）。

有运动。电话号码与每个活动相关联。用户可以发短信给他们将订阅的号码。

我正在构建“创建新广告系列”页面。

1.  我目前的策略是为每个活动创建一个单独的表（campaign_1、campaign_2、...、campaign_n）并将订阅者数据存储在其中。

2.  也可以只创建一个表并向其中添加一`campaign_id`列。

每个活动应该有 5k 到 25k 用户。

哪个是更好的选择？#1 还是 #2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:30:22.550

选项 2 更有意义，并且是广泛使用的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:30:22.343

我想这实际上取决于您将要进行的广告系列的数量。让我们给你一些优点/缺点：

Campaign_n 的优点：

*   更快的查询
*   您可以让每个实例使用自己的代码和自己的数据库运行

Campaign_n 的缺点：

*   数据库修改更难（您需要同步所有表）
*   你有很多桌子

就个人而言，我会选择选项 2（campaign_id 字段），除非您有充分的理由不这样做。

# r - 绘制多维 K 均值的结果

> ID：13741594
> 
> 赞同：1
> 
> 时间：2012-12-06T10:27:41.800
> 
> 标签：r, dataframe, k-means

我对 R 中的 Kmeans 有疑问。我有一个数据框，例如 R 中可用的 IRIS 数据。我找到了一个[网站](http://www.wanderinformatiker.at/unipages/ParCoord/clustering_en.html)，他们在其中创建了我喜欢的 kmeans 结果：![在此处输入图像描述](../Images/4709560712c59bb894920cea8084dc5b.png)

我的问题是，我想用我自己的数据（数据框 100X4）重现该图，但我找不到如何做到这一点。谁能帮我这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:43:34.293

这是一个平行坐标图。例如，您可以使用`parcoord`来自`MASS`--

```
library(MASS)
iris$Species = as.numeric(iris$Species)
parcoord(iris, col=iris$Species) 
```

# sql - 如何在 SQL 中生成分页分组数据

> ID：13741596
> 
> 赞同：0
> 
> 时间：2012-12-06T10:27:47.303
> 
> 标签：sql, pagination

我希望对分组数据进行分页，但我的限制是每页只能显示有限数量的行（而不是结果）。

例如，每页 20 行将显示一组或多组结果。每组将包括：

*   包含组标题的行
*   组中每个结果的一行

如果组中的结果跨越多个页面，则“组标题”行将在后续页面上重复。

到目前为止，我能够以`union`这样一种方式对结果和组标题进行排序，使它们形成一个我可以轻松分页的行表。

```
select * from (

    select f.Id, f.Name, p.Id As ProviderId, 2 as RowType,
        'Result' as RowTypeTitle
    from Fund f
    inner join Provider p on f.ProviderId = p.Id

    union

    select distinct f2.ProviderId as Id, p2.Name, f2.ProviderId, 1 as RowType,
        'Group Title' as RowTypeTitle
    from Fund f2
    inner join Provider p2 on f2.ProviderId = p2.Id

) u

order by u.ProviderId, u.RowType asc 
```

我在上面的 SQL 中缺少的是重复的“组标题”行，例如我需要每页只返回 20 个“行”。我如何能够重构 SQL 以合并这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:33:50.293

使用 ROW_NUMBER 函数，您将能够生成多个行。然后你记下你在哪里。

理想情况下，您可以使用“With”子句简化语法。但这里是您查询的代码。

前任：

```
 SELECT * FROM
    (select ROW_NUMBER () over(order by t.ProviderId, t.RowType )/20 AS PageID ,* 
     from (

         select * from (

            select f.Id, f.Name, p.Id As ProviderId, 2 as RowType,
                  'Result' as RowTypeTitle
            from Fund f
            inner join Provider p on f.ProviderId = p.Id

         union

            select distinct f2.ProviderId as Id, p2.Name, f2.ProviderId, 1 as RowType,
                 'Group Title' as RowTypeTitle
           from Fund f2
           inner join Provider p2 on f2.ProviderId = p2.Id )y)  t 
         )u

         order by u.ProviderId, u.RowType asc 
```

然后“PageID”会告诉你在哪一页放置数据，一次 20 个。

# facebook - Facebook app_data > 安装应用 > app_data 为空

> ID：13741599
> 
> 赞同：0
> 
> 时间：2012-12-06T10:27:56.247
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我遇到了 app_data 的问题。我在我的时间线中发布了一个带有链接的提要。此链接是我的应用程序 url，其中 app_data 又名：

> [http://apps.facebook.com/mfanpage/app_123456?app_data=my-very-important-data-here](http://apps.facebook.com/mfanpage/app_123456?app_data=my-very-important-data-here)

当用户点击链接时，他会被定向到我的应用程序，Facebook 会请求一些权限。如果用户接受所有条件，他将被重定向到应用程序并且我的 app_data 变为**EMPTY**！

我能做些什么？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:39:15.207

这是因为当用户授权您的应用程序时，Facebook 会将用户重定向到您默认提供的应用程序，当用户单击链接时`redirect_uri`，基本上不包括附加到 url 的内容。`app_data`所以你需要存储`app_data`一些方法，当用户授权你的应用程序时，你可以再次检索它。也许使用`cookies`或 HTML5`localstorage`来临时存储它，以便您可以再次检索它。

# c# - C# 对象序列化更改

> ID：13741600
> 
> 赞同：2
> 
> 时间：2012-12-06T10:27:59.123
> 
> 标签：c#

我有以下问题：

我的对象被序列化如下：

```
MemoryStream memorystream = new MemoryStream();
BinaryFormatter bf = new BinaryFormatter();
bf.Serialize(memorystream, _policy);
CaptureData = Convert.ToBase64String(memorystream.ToArray()); 
```

然后保存到我的数据库中，并根据需要对数据库中保存的数据进行反序列化。

我现在的问题是我无法更改此对象、添加属性等，因为这会破坏反序列化。

关于如何在不破坏先前对象的序列化的情况下添加属性的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:34:21.983

You can use [`[OptionalField]`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.optionalfieldattribute.aspx) and similar to take advantage of the [version tolerant serialisation](http://msdn.microsoft.com/en-us/library/ms229752%28v=vs.80%29.aspx) built into .Net.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:32:06.053

我认为不可能使用这个序列化程序。

如果可能，请使用另一个处理向后兼容性的序列化程序，例如[协议缓冲区](http://code.google.com/p/protobuf-net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:31:38.160

您需要从内置的序列化转移，因为正如您所见，它是刚性的且不可扩展。选择任何其他可让您保持类型的可扩展性和系统灵活性的序列化技术。

*   自定义二进制序列化
*   xml序列化
*   json序列化
*   使用 protobuf 进行二进制序列化（只是示例......）

这一切，如果你*能*做到的话。如果没有，对于一些架构（历史）限制，可以做一些类似于哈姆雷特评论中建议的事情。但这对我来说听起来像是一个粗略的解决方案。

# css - 如何动态删除文本周围的空间？

> ID：13741604
> 
> 赞同：0
> 
> 时间：2012-12-06T10:28:04.503
> 
> 标签：css, text

我希望能够删除容器内文本顶部和底部的“空格”。

![在此处输入图像描述](../Images/d4a3bffb521defeea3c5f32d74ebd13c.png)

div 必须尽可能靠近里面的文字。此文本是输入的结果，可由用户更改。

我想我应该使用 line-height，但是如何？

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T10:29:59.223

曾经`line-height`

```
.some_css{
line-height: px; // according to your text size of design 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:37:28.380

您可以使用`padding: 0`' 或尝试`line-height:px`

1.  填充做什么

> ![在此处输入图像描述](../Images/ea179a5771674019c3ac3d3196ed33df.png)

零填充

> ![在此处输入图像描述](../Images/80753c74cc63e1d799bc6b858e6a796d.png)

2.  和线高

> ![在此处输入图像描述](../Images/31bf9b3462a36fcb9e79b3f996e51ff5.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T10:29:55.340

使用 CSS`padding`属性在元素的边界内设置空间：

```
padding:0; 
```

此外，正如 Terric 所指出的，如果孩子有边距，请将其删除：

```
margin:0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T19:58:46.130

如标题中所述，我需要“动态”删除文本周围的空间。事实上，每种字体都有不同的结构，并且不会在每个浏览器上以相同的方式呈现......

我为此找到了一个折衷方案：

```
.text { line-height: 70% } 
```

正如[这里](http://www.w3.org/TR/CSS21/visudet.html#propdef-line-height)所解释的，如果我们使用百分比，我们可以将任何字体大小应用于我们的文本，行高将始终相同。

我可以使用 jQuery 更改字体大小，行高将始终正确应用于文本和周围元素。

我为每种字体处理了一个大小写函数以应用不同的行高。就我而言，这是一个可行的解决方案...

```
var fontFamily = $( "input" ).val(); // Here, the font-Size is defined dynamically by the user... It could be Arial, Verdana, Comic etc...
var lineHeight;

switch ( fontFamily ){

    case "Arial Black": // if the user has selected the arial black font...
        lineHeight = "70%"; // we define a line-height that will be correctly applied to the text
        break;
    case "Verdana":
        lineHeight = "78%";
        break;
    default:
        lineHeight = "66%";

}

$( ".text" ).css("line-height", lineHeight); // we apply the line-height to the text... 
```

请注意，用户还可以使用另一个选择元素更改字体大小...

希望这可以帮助...

# c# - 并行检索 60 行的最快方法是什么，其中每行驻留在 Azure 表存储的不同分区中？

> ID：13741608
> 
> 赞同：2
> 
> 时间：2012-12-06T10:28:26.357
> 
> 标签：c#, multithreading, azure-table-storage

并行检索 60 行的最快方法是什么，其中每行驻留在 Azure 表存储的不同分区中？

我尝试了以下选项，其中异步调用（第 1 到 4 次）都花了大约 2 到 3 秒的相似时间来获得 60 行。

1.  通过异步 Query.Execute 使用多个任务
2.  使用具有 Interlocked.Increment 和异步 Query.Execute 的 ManualResetEvent
3.  使用带有异步 Query.Execute 的 ManualResetEvents 列表
4.  带有 ManualResetEvents 列表并使用异步 Query.Execute 的 Parallel.ForEach 循环
5.  带有阻塞 Query.Execute 的 Parallel.ForEach

仅供参考，我使用的是 Azure SDK 1.7 和 .Net 4。

我为每个选项使用的示例代码：

1.  通过异步 Query.Execute 使用多个任务

    ```
    public List<string> Get100RowsUsingTaskWaitAllWithAsyncExecute()
    {
        var result = new ConcurrentBag<LogEntry>();

        var tasks = new Queue<Task>();

        foreach (var eachId in _rowKeysToGet.Take(60))
        {
            var cloudStorageAccount =
                CloudStorageAccount.Parse(ConfigurationManager.AppSettings["LoggingConnectionString"]);
            var ctx = new LogServiceContext(
                cloudStorageAccount.TableEndpoint.AbsoluteUri,
                cloudStorageAccount.Credentials);

            var query = (from e in ctx.LogEntries where e.RowKey == eachId
                             && e.PartitionKey == _partitionKey
                         select e).AsTableServiceQuery<LogEntry>();

            tasks.Enqueue(
                Task<ResultSegment<LogEntry>>.Factory.FromAsync(
                    query.BeginExecuteSegmented,
                    query.EndExecuteSegmented,
                    TaskCreationOptions.None)
                .ContinueWith(t => {
                    var r = t.Result.Results.FirstOrDefault();
                    result.Add(r);
                }));
        }

        Task.WaitAll(tasks.ToArray());

        var output = result.Select(r => r.RowKey).ToList();

        return output;
    } 
    ```

2.  使用具有 Interlocked.Increment 和异步 Query.Execute 的 ManualResetEvent

    ```
    public List<string> Get100RowsUsingOneManualResetEventWithAsyncExecute()
    {
        var result = new ConcurrentBag<LogEntry>();

        var cloudStorageAccount = CloudStorageAccount.Parse(ConfigurationManager.AppSettings["LoggingConnectionString"]);
        var ctx = new LogServiceContext(cloudStorageAccount.TableEndpoint.AbsoluteUri, cloudStorageAccount.Credentials);

        var threadCount = 0;
        using (var finished = new ManualResetEvent(false))
        {
            foreach (var eachId in _rowKeysToGet.Take(60))
            {
                Interlocked.Increment(ref threadCount);

                var query = (from e in ctx.LogEntries
                             where e.RowKey == eachId
                                   && e.PartitionKey == _partitionKey
                             select e).AsTableServiceQuery<LogEntry>();

                var startTimeInLoop = DateTime.UtcNow;

                query.BeginExecuteSegmented((ar) =>
                {
                    var response = (ar.AsyncState as CloudTableQuery<LogEntry>)
                        .EndExecuteSegmented(ar);

                    var eachLogEntry = response.Results.FirstOrDefault();

                    result.Add(eachLogEntry);

                    if (Interlocked.Decrement(ref threadCount) == 0)
                    {
                        finished.Set();
                    }

                }, query);
            }

            finished.WaitOne();
        }

        return result.Select(r => r.RowKey).ToList();
    } 
    ```

3.  使用带有异步 Query.Execute 的 ManualResetEvents 列表

    ```
    public List<string> Get100RowsUsingListOfManualResetEventsWithAsyncExecute()    
    {
        var result = new ConcurrentBag<LogEntry>();

        var cloudStorageAccount = CloudStorageAccount.Parse(ConfigurationManager.AppSettings["LoggingConnectionString"]);
        var ctx = new LogServiceContext(cloudStorageAccount.TableEndpoint.AbsoluteUri, cloudStorageAccount.Credentials);

        var events = new List<ManualResetEvent>();

        foreach (var eachId in _rowKeysToGet.Take(60))
        {
            var query = (from e in ctx.LogEntries
                         where e.RowKey == eachId
                             && e.PartitionKey == _partitionKey
                         select e).AsTableServiceQuery<LogEntry>();

            var evt = new ManualResetEvent(false);

            LogEntry eachLogEntry = null;
            query.BeginExecuteSegmented((ar) => {
                var response = (ar.AsyncState as CloudTableQuery<LogEntry>)
                    .EndExecuteSegmented(ar);

                eachLogEntry = response.Results.FirstOrDefault();

                result.Add(eachLogEntry);

                evt.Set();

            }, query);

            events.Add(evt);
        };

        WaitHandle.WaitAll(events.ToArray());

        events.ForEach(e => e.Dispose());

        return result.Select(r => r.RowKey).ToList();
    } 
    ```

4.  带有 ManualResetEvents 列表并使用异步 Query.Execute 的 Parallel.ForEach 循环

    ```
    public List<string> Get100RowsUsingParallelForEachAndManualResetEventWithAsyncExecute()
    {
        var result = new ConcurrentBag<LogEntry>();

        var cloudStorageAccount = CloudStorageAccount.Parse(ConfigurationManager.AppSettings["LoggingConnectionString"]);
        var ctx = new LogServiceContext(cloudStorageAccount.TableEndpoint.AbsoluteUri, cloudStorageAccount.Credentials);

        var events = new List<ManualResetEvent>();

        Parallel.ForEach(_rowKeysToGet.Take(60), eachId =>
        {
            var query = (from e in ctx.LogEntries
                          where e.RowKey == eachId
                              && e.PartitionKey == _partitionKey
                          select e).AsTableServiceQuery<LogEntry>();

            var evt = new ManualResetEvent(false);

            LogEntry eachLogEntry = null;
            query.BeginExecuteSegmented((ar) =>
            {
                var response = (ar.AsyncState as CloudTableQuery<LogEntry>)
                    .EndExecuteSegmented(ar);

                eachLogEntry = response.Results.FirstOrDefault();

                result.Add(eachLogEntry);

                evt.Set();

            }, query);

            events.Add(evt);
        });

        WaitHandle.WaitAll(events.ToArray());

        events.ForEach(e => e.Dispose());

        return result.Select(r => r.RowKey).ToList();
    } 
    ```

5.  带有阻塞 Query.Execute 的 Parallel.ForEach

    ```
    public List<string> Get100RowsUsingParallelForEachWithBlockingExecute()
    {
        var result = new ConcurrentBag<LogEntry>();

        var cloudStorageAccount = CloudStorageAccount.Parse(ConfigurationManager.AppSettings["LoggingConnectionString"]);
        var ctx = new LogServiceContext(cloudStorageAccount.TableEndpoint.AbsoluteUri, cloudStorageAccount.Credentials);

        Parallel.ForEach(_rowKeysToGet.Take(60), eachId =>
        {
            var query = (from e in ctx.LogEntries
                         where e.RowKey == eachId
                             && e.PartitionKey == _partitionKey
                         select e).AsTableServiceQuery<LogEntry>();

            var eachLogEntry = query.Execute().FirstOrDefault();

            result.Add(eachLogEntry);
        });

        return result.Select(r => r.RowKey).ToList();
    } 
    ```

# php - XAMPP 和 PHP 5.4.4 的规范器致命错误

> ID：13741615
> 
> 赞同：1
> 
> 时间：2012-12-06T10:28:42.083
> 
> 标签：php, xampp

当我在自定义命名空间的类中使用 PHP 类`Normalizer`（例如`\Normalizer::normalize($string, Normalizer::FORM_KD);`）时，出现以下错误：`Text.php``Utils`

```
Fatal error: Class 'Utils\Normalizer' not found 
in C:\xampp\htdocs\MyProject\src\Utils\text.php on line 380 
```

我的项目使用**PHP 5.4.4在****XAMPP**下运行。我也知道：

 ***   `Normalizer`应该从**PHP 5 >= 5.3.0**开始工作。
*   在我的文件`php_intl.dll`中启用了扩展。`php.ini`

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:47:06.717

您忘记了前导*反斜杠*在`Normalizer::FORM_KD`调用`\Normalizer::normalize($string, Normalizer::FORM_KD)`通知时，您只在类名前面使用了一个反斜杠，但在使用**类常量**时却没有。

在 PHP 中，当您声明或导入名称空间时，您是在告诉 PHP 将您的所有函数、类/接口和常量名称命名为您的名称空间。

所以下面的代码会发出类似的致命错误......

```
<?php
namespace foo;

var_dump(DateTime::createFromFormat('Y-m-d','2012-12-06')); 
```

上面的代码会发出一个错误`PHP Fatal error: Class 'foo\DateTime' not found in /testfile.php on line 4`

要解决此问题，请确保始终将未在命名空间/别名中声明的那些函数/类/接口/常量调用到全局命名空间。

```
<?php
namespace foo;
/* Notice the leading backslash infront of DateTime*/
var_dump(\DateTime::createFromFormat('Y-m-d','2012-12-06')); 
```**

# android - Android：在活动之间切换时保存和恢复数据

> ID：13741617
> 
> 赞同：2
> 
> 时间：2012-12-06T10:28:43.380
> 
> 标签：android, android-intent

我试图在切换到另一个活动时在“MainActivity”中保存一些数据，并在我切换回它时恢复这些数据。

在“MainActivity”中：（恢复数据）

```
 protected void onCreate(Bundle savedInstanceState) {
                   // do usual stuff
                   restoreData();
            } 
```

在“MainActivity”中：（切换到“StatusActivity”）：

```
 Bundle data = saveData();
            Log.d(TAG, "Sending data to status activity intent: " +data);
            Intent intent = new Intent(getApplicationContext(), StatusActivity.class);
            intent.putExtras(data);
            startActivity(intent); 
```

在“状态活动”中：

```
 Bundle data = getIntent().getExtras();
            Log.d(TAG, "Sending data to main activity intent: " +data);
            Intent intent = new Intent(getApplicationContext(), MainActivity.class);
            intent.putExtras(data);
            startActivity(intent); 
```

我的 saveData() 函数：

```
private Bundle saveData() {
    Log.d(TAG, "Started saving state");
    Bundle data = new Bundle();

    // store stuff in the bundle
    return data;
} 
```

我的 restoreData() 函数：

```
private void restoreData() {
    Log.d(TAG, "Started restoring state");

    Bundle data = getIntent().getExtras();
            // restore stuff in the bundle
} 
```

日志猫：

发送到 StatusActivity 时，我的捆绑包很好：

```
Sending data to status activity intent: 
Bundle[{obj0=Bundle[{timeSinceLastPooped=3224, hunger=5, 
id=2130837505, timeSinceLastHungerUpdate=3224, 
timeSinceLastFed=0, timeSinceLastHappinessUpdate=3224, 
timeSinceLastEvolution=3224, posY=0.0, posX=0.0, 
isDead=false, happiness=5, evolutionStage=0, type=pet}], 
time=7.794168E7}] 
```

但随后发送回 MainActivity：

```
Sending data to main activity intent: Bundle[mParcelledData.dataSize=648] 
```

我如何使用 mParcelledData 来取回原始捆绑包？谢谢！

## 回答：

在“MainActivity”中：（恢复数据）

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if(requestCode == 1) {
        if(resultCode == RESULT_OK) {
            restoreData(intent);
        }
    }
} 
```

在“MainActivity”中：（切换到“StatusActivity”）：

```
 Bundle data = saveData();
            Log.d(TAG, "Sending data to status activity intent: " +data);
            Intent intent = new Intent(getApplicationContext(), StatusActivity.class);
            intent.putExtras(data);
            startActivityForResult(intent, 1); 
```

在“状态活动”中：

```
 Bundle data = getIntent().getExtras();
            Log.d(TAG, "Sending data to main activity intent: " +data);
            Intent intent = new Intent(getApplicationContext(), MainActivity.class);
            intent.putExtras(data);
            setResult(RESULT_OK, getIntent());
            finish(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:39:23.967

您可以使用 onRestoreInstanceState() 巫婆在 onStart() 之后调用，而 onCreate() 在 onStart() 之前调用。

使用 put 方法将值存储在 onSaveInstanceState() 中：

```
protected void onSaveInstanceState(Bundle bundle) {
  super.onSaveInstanceState(bundle);
  bundle.putInt("value", value);
} 
```

并恢复 onCreate() 中的值：

```
public void onCreate(Bundle bundle) {
  if (bundle!= null){
    value = bundle.getInt("value");
  }
} 
```

# ajax - 使用 f:ajax 获取 javax.el.PropertyNotFoundExceptionTarget Unreachable，标识符“TestBean”解析为 null

> ID：13741620
> 
> 赞同：-2
> 
> 时间：2012-12-06T10:28:50.847
> 
> 标签：ajax, jsf, exception, javabeans

将 f:ajax 标记添加到我的 jsf 页面，希望使用 ajax

```
<td class="row-center" bgcolor="#FFFFFF" >
<h:commandButton value="run test" action="#{TestBean.runTest1}">
    <f:ajax render="output" />
</h:commandButton>
</td> 
```

我的豆子：

```
@ManagedBean
@RequestScoped
public class TestBean implements Serializable {

public void runTest1() throws InvalidFormatException, IOException, InterruptedException {

} 
```

在添加 f:ajax 标签之前一直在工作

任何想法我做错了什么以及如何解决它？

以下错误消息：

发生错误：

```
javax.el.PropertyNotFoundException: /index.xhtml @102,119 action="#{TestBean.runTest1}": Target Unreachable, identifier 'TestBean' resolved to null
+- Stack Trace
javax.faces.el.EvaluationException: javax.el.PropertyNotFoundException: /index.xhtml @102,119 action="#{TestBean.runTest1}": Target Unreachable, identifier 'TestBean' resolved to null
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:95)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:101)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:791)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1256)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:181)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:641)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.el.PropertyNotFoundException: /index.xhtml @102,119 action="#{TestBean.runTest1}": Target Unreachable, identifier 'TestBean' resolved to null
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:107)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 20 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:39:23.903

通过将属性设为私有并从参数 getter 和 setter 中删除静态修饰符来解决 Property not found 错误：

```
 private static String runTest1Result;  

public String getRunTest1Result() {
    return runTest1Result;
}

public void setRunTest1Result(String runTest1Result) {
    TestBean.runTest1Result = runTest1Result;
} 
```

通过将 Bean 调用的首字母的大小写从 #{TestBean.runTest1} 更改为 #{testBean.runTest1} 解决了初始 javax.el.PropertyNotFoundExceptionTarget Unreachable 'TestBean'

# javascript - 在链接点击时调用 javascript 函数

> ID：13741626
> 
> 赞同：1
> 
> 时间：2012-12-06T10:29:05.387
> 
> 标签：javascript, jquery, html, asp.net-mvc, cookies

当用户单击链接时，我想设置一个 cookie 值。我正在使用以下代码：

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="../../Scripts/jquery.cookie.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {

        function changeLang(lang) {
            $.cookie('myCulture', lang);
            window.location.reload();
            return false;
        }
    });

</script> 
```

HTML

```
 <a href="#" onclick="changeLang('da-DK')"><img src="../../Content/images/danishFlag.png" height="35px" width="35px"/></a>

  <a href="#" onclick="changeLang('sv-SE')"><img src="../../Content/images/swedishFlag.png" height="35px" width="35px"/></a> 
```

看起来很简单的代码，但是当我点击链接时，浏览器出现错误。它说。

```
ReferenceError: changeLang is not defined   

changeLang("da-DK"); 
```

我哪里做错了？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:30:39.057

在 jquery 块之外定义函数

```
$(document).ready(function () {
});

function changeLang(lang) {
        $.cookie('myCulture', lang);
        window.location.reload();
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:33:29.830

您在文档就绪范围内定义函数，因此它不是全局的，因此在全局范围内不可用

只需删除 var 声明或使用 window.changeLang = function 即可将其定义为全局

```
 $(document).ready(function () {

       changeLang = function(lang) {
            document.cookie = 'myCulture' + lang;
            window.location.reload();
            return false;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:32:11.653

请不要像这样在 html 中附加 js 函数。您正在使用 jquery，所以只需执行以下操作：

```
$(document).ready(function () {

    function changeLang() {
        $.cookie('myCulture', $(this).data('lang'));
        window.location.reload();
        return false;
    }
    $('.link').on('click', changeLang);
}); 
```

然后在html中：

```
<a href="#" data-lang="da-DK">...</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:33:25.867

尝试将 ChangeLang 函数移到 Document Ready 部分之外。此外，如果使用 Firebug 在 FireFox 中运行，您可以尝试直接从控制台执行该功能。

祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T10:54:50.407

```
$(document).ready(function () {
});
function changeLang(lang) {
    document.cookie = 'myCulture=' + lang;
    window.location.reload();
    return false;
} 
```

这对你有用。

# linq - LINQ加入多个条件？

> ID：13741631
> 
> 赞同：3
> 
> 时间：2012-12-06T10:29:21.450
> 
> 标签：linq, entity-framework-4.1

我有以下工作 SQL 查询：

```
select a.Id, a.Name
from Addresses a join Companies c 
                on c.AddressId = a.Id
                or c.MailAddressId = a.Id
                or c.Id = a.CompanyId
where c.Id = *CompanyId* and a.Name = *AddressName* 
```

检查具有提供的地址名称的地址是否链接到具有提供的公司 ID 的公司。

如何在 LINQ for EF 中表达这一点？

**更新**：地址和公司类别如下（仅包括与此问题相关的详细信息）：

```
public class Address
{
    public int Id {get; set;}
    public string Name {get; set;}
    public int? CompanyId {get; set;}
    public virtual Company {get; set;}
}
public class Company
{
    public int Id {get; set;}
    public string Name {get; set;}

    public int AddressId {get; set;}
    public virtual Address Address {get; set;}

    public int? MailAddressId {get; set;}
    public virtual Address MailAddress {get; set;}

    public virtual ICollection<Address> DeliveryAddresses {get; set;}
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:44:21.637

LINQ 仅支持相等连接。在其他情况下，您应该使用交叉连接，其中：

```
from a in Addresses
from c in Companies
where (c.AddressId == a.Id || c.MailAddressId == a.Id || c.Id == a.CompanyId)
         &&  (c.Id == *CompanyId* && a.Name == *AddressName*)
select new{a.Id, a.Name} 
```

# symfony - 没有扩展能够加载“facebookbundle”symfony2 的配置

> ID：13741632
> 
> 赞同：34
> 
> 时间：2012-12-06T10:29:23.033
> 
> 标签：symfony

我创建了自己的 FacebookBundle 和

我收到了这个错误：

> 没有扩展能够加载“facebookbundle”的配置（在 /facebookx/app/config/config_dev.yml 中）。寻找命名空间“facebookbundle”，找到“framework”、“security”、“twig”、“monolog”、“swiftmailer”、“assetic”、“doctrine”、“sensio_framework_extra”、“jms_aop”、“jms_di_extra”、“jms_security_extra” ”、“d_facebook”、“d_user”、“d_security”、“web_profiler”、“sensio_distribution”

错误消息意味着我在我的 config.yml 中有一个条目“facebookbundle”，它没有被任何扩展使用？

我的 config.yml

```
facebookbundle:
    file:   %kernel.root_dir%/../src/FacebookBundle/Facebook/FacebookInit.php
    alias:  facebook
    app_id: xxx
    secret: xxx
    cookie: true
    permissions: [email, user_birthday, user_location, user_about_me] 
```

我的 DFacebook 分机

```
<?php

namespace D\FacebookBundle\DependencyInjection;

use Symfony\Component\DependencyInjection\ContainerBuilder;
use Symfony\Component\Config\FileLocator;
use Symfony\Component\HttpKernel\DependencyInjection\Extension;
use Symfony\Component\DependencyInjection\Loader;

/**
 * This is the class that loads and manages your bundle configuration
 *
 * To learn more see {@link http://symfony.com/doc/current/cookbook/bundles/extension.html}
 */
class DFacebookExtension extends Extension
{
    /**
     * {@inheritDoc}
     */
    public function load(array $configs, ContainerBuilder $container)
    {
        $configuration = new Configuration();
        $config = $this->processConfiguration($configuration, $configs);

        $loader = new Loader\YamlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
        $loader->load('services.yml');

        foreach (array('app_id', 'secret', 'cookie', 'permissions') as $attribute) {
            $container->setParameter('facebookbundle.'.$attribute, $config[$attribute]);
        }

        if (isset($config['file']) && $container->hasDefinition('acebookbundle.api')) {
            $facebookApi = $container->getDefinition('facebookbundle.api');
            $facebookApi->setFile($config['file']);
        }
    }
} 
```

是错误吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2016-02-19T12:18:07.060

另外，请记住，**配置文件的根键必须是 Bundle 名称的规范化形式**。

这是我遇到过几次的事情，如果你不知道的话，解决它会非常令人沮丧。

示例：如果调用了 bundle `MyFirstAwesomeBundle`，则文件中的根键必须是`my_first_awesome`. 所以camel-case 被转换成snake-case 并且“bundle”这个词被忽略或者去掉了。

因此，仅仅让文件中的根键与指定的值完全匹配`Configuration::getConfigTreeBuilder()`是不够的。

如果您不遵循此规则，那么您将收到`There is no extension able to load the configuration`错误消息。

* * *

我希望这将帮助下一个最终出现在此页面上的绝望灵魂......

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-06T12:11:50.640

为了接受自定义配置参数，您必须使用捆绑包中的 Configuration.php 类定义捆绑包配置。

**src/FacebookBundle/DependencyInjection/Configuration.php：**

```
<?php
namespace FacebookBundle\DependencyInjection;

use Symfony\Component\Config\Definition\Builder\TreeBuilder;
use Symfony\Component\Config\Definition\ConfigurationInterface;

/**
 * This is the class that validates and merges configuration from your app/config files
 *
 * To learn more see {@link http://symfony.com/doc/current/cookbook/bundles/extension.html#cookbook-bundles-extension-config-class}
 */
class Configuration implements ConfigurationInterface
{
    public function getConfigTreeBuilder()
    {
        $treeBuilder = new TreeBuilder();
        $rootNode = $treeBuilder->root('facebookbundle');

        $rootNode
            ->children()
                ->scalarNode('file')->defaultValue('')->end()
                ->scalarNode('alias')->defaultValue('')->end()
                ->scalarNode('app_id')->defaultValue('')->end()
                ->scalarNode('secret')->defaultValue('')->end()
                ->booleanNode('cookie')->defaultTrue()->end()
                ->arrayNode('permissions')
                    ->canBeUnset()->prototype('scalar')->end()->end()
            ->end()
            ;

        return $treeBuilder;
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-06T10:58:53.157

当您忘记在 app/AppKernel.php 中启动包时会发生这种情况：

```
<?php

use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;

class AppKernel extends Kernel
{

   public function registerBundles()
   {
      $bundles = array (
              new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
              new Symfony\Bundle\SecurityBundle\SecurityBundle(),
              new Symfony\Bundle\TwigBundle\TwigBundle(),
              new Symfony\Bundle\MonologBundle\MonologBundle(),
              new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
              new Symfony\Bundle\DoctrineBundle\DoctrineBundle(),
              new Symfony\Bundle\AsseticBundle\AsseticBundle(),
              new Sensio\Bundle\FrameworkExtraBundle\SensioFrameworkExtraBundle(),
              new JMS\SecurityExtraBundle\JMSSecurityExtraBundle(),
              //...
              new D\FacebookBundle\DFacebookBundle(),
              //...
      );

      if (in_array($this->getEnvironment(), array ('dev', 'test')))
      {
         $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
         $bundles[] = new Sensio\Bundle\DistributionBundle\SensioDistributionBundle();
         $bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
      }

      return $bundles;
   }

   public function registerContainerConfiguration(LoaderInterface $loader)
   {
      $loader->load(__DIR__ . '/config/config_' . $this->getEnvironment() . '.yml');
   }

} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-05-10T10:38:33.263

此错误也可能是由于`services`配置根目录中缺少或无效的键引起的。它应该看起来像这样：

```
services:
    foo_bar.baz:
        class: Foo\BarBundle\Service\BazService 
```

# android - 在可展开的列表视图中设置单个视图的背景颜色

> ID：13741633
> 
> 赞同：0
> 
> 时间：2012-12-06T10:29:24.943
> 
> 标签：android, listview, expandablelistview, android-view

我希望在可展开的列表视图中设置单个视图的背景颜色。每次在可展开列表视图中创建组视图时，都会调用此方法。

```
public View getGroupView(int groupPosition, final boolean isExpanded,View view, ViewGroup parent) 
```

然后，我使用以下命令检查每个视图的条件。

```
if(booleanArray[groupPosition]){

} else {                        
view.setBackgroundColor(Color.parseColor("#F0F0F0"));
} 
```

如果条件为真，我将视图的背景保持原样。如果条件为 FALSE，我将视图的背景颜色更改为 #F0F0F0

我看到的是，即使满足 TRUE 条件，视图的背景颜色仍然设置为 #F0F0F0

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:22:54.627

当您的 if 为真时，您必须将颜色设置为默认值。因为您的视图被重用，所以您不能“保持原样”。

# html - 将鼠标悬停在下拉列表中的子项上时，保持对父项的突出显示

> ID：13741635
> 
> 赞同：0
> 
> 时间：2012-12-06T10:29:25.717
> 
> 标签：html, css, drop-down-menu, menu

 我正在研究一个下拉菜单，我希望我的父母`<a>`在我搬到一个孩子时“保持它的颜色” `<a>`。

我知道如何通过将鼠标悬停在我`<li>`的上面来做到这一点，例如： `ul#nav li:hover > a`。但这在这里行不通，因为我只想将鼠标悬停在我`<a>`的...

希望你能理解我的问题 

这是我的 jsfiddle：http: [//jsfiddle.net/F623k/7/](http://jsfiddle.net/F623k/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:33:16.740

# cassandra - Cassandra 1.1 批量加载时出现异常

> ID：13741638
> 
> 赞同：3
> 
> 时间：2012-12-06T10:29:30.440
> 
> 标签：cassandra, bulk-load

使用 sstableloader 批量加载时出现异常。我正在使用 JDK 1.6.0_25 64 位、Ubuntu 12.04 服务器。IPv6 已关闭。主机之间的网络通信正常工作。我要疯了 ;-（

```
Exception in thread "Streaming to /192.168.219.36:1" java.lang.RuntimeException: java.net.SocketException: Invalid argument or cannot assign requested address
    at org.apache.cassandra.utils.FBUtilities.unchecked(FBUtilities.java:628)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:34)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.SocketException: Invalid argument or cannot assign requested address
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at java.net.Socket.connect(Socket.java:478)
    at java.net.Socket.<init>(Socket.java:375)
    at java.net.Socket.<init>(Socket.java:276)
    at org.apache.cassandra.net.OutboundTcpConnectionPool.newSocket(OutboundTcpConnectionPool.java:96)
    at org.apache.cassandra.streaming.FileStreamTask.connectAttempt(FileStreamTask.java:245)
    at org.apache.cassandra.streaming.FileStreamTask.runMayThrow(FileStreamTask.java:91)
    at org.apache.cassandra.utils.WrappedRunnable.run(WrappedRunnable.java:30) 
```

所有主机都运行 Cassandra 1.1（datastax 版）。端口 7000,7199,9160 已打开。有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T18:27:02.473

为什么要流式传输到端口 1？它应该是 RPC_PORT，默认值为 9160。

> /192.168.219.36：1 **_**

你传递给bulkloader的参数是什么？

# jquery - Jquery Mobile - 防止纵向方向......或根本方向？

> ID：13741641
> 
> 赞同：1
> 
> 时间：2012-12-06T10:29:39.760
> 
> 标签：jquery, jquery-mobile, mobile, orientation

> **可能重复：**
> [jQuery Mobile 锁定方向](https://stackoverflow.com/questions/7009743/jquery-mobile-lock-orientation)

有什么方法可以防止方向改变吗？

我试过了：`$.mobile.orientationChangeEnabled = false;` 但没有成功...

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:59:46.947

你不能阻止方向改变，这是野生动物园的一种行为。

您可以向用户显示一条消息，说明您的网站已针对纵向或横向视图进行了优化。

# javascript - 是否可以将 3D 转换应用于 iframe

> ID：13741644
> 
> 赞同：0
> 
> 时间：2012-12-06T10:29:44.863
> 
> 标签：javascript, jquery, css, 3d

是否可以将 3D 转换应用于 iframe（例如在 div 中）？

![在此处输入图像描述](../Images/7362d842ed3008cbb8b18ade46c8ea80.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:53:22.807

是的，它似乎可以做到..

以下示例可能会有所帮助：

1 ) 在 HTML5 中使用“iframe”创建 3D 动画
[http://www.c-sharpcorner.com/UploadFile/cd80b9/creating-3d-animation-in-html5/](http://www.c-sharpcorner.com/UploadFile/cd80b9/creating-3d-animation-in-html5/)

2）不完全知道它是如何完成的，但是在观察了源代码之后，我发现 div 和 iframe 确实是 3D 转换的。

示例在这里[http://mrdoob.com/lab/javascript/threejs/css3d/](http://mrdoob.com/lab/javascript/threejs/css3d/)

[示例开发者](https://plus.google.com/113862800338869870683/posts/PnJB9fAQb6z)

# jbuilder - 渲染 Jbuilder 视图

> ID：13741651
> 
> 赞同：0
> 
> 时间：2012-12-06T10:30:00.157
> 
> 标签：jbuilder

我在 rails 应用程序中使用 rabl 进行 api 调用。这是我的示例代码

```
app.get '/item/:id' do
  @errors = []
  @revisions = []
  request.body.rewind  # in case someone already read it
  @item = Entity.for_owner(params[:id], @user)
  render :rabl, :item_show
end 
```

我想使用 jbuilder 而不是 rabl 我如何在这里渲染。我已经制作了这样的视图jbuilder视图`item_show.json.builder`

```
Jbuilder.encode do |json|
  json.id @item.id
  json.account_id @item.account_id
end 
```

任何人都可以帮助我如何呈现这个视图。我试过了，`@item.to_json`但它没有呈现 jbuilder 视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T11:39:17.883

tilt-jbuilder 从 0.4.0 开始支持 Sinatra，我在[https://gist.github.com/a2ikm/5072882](https://gist.github.com/a2ikm/5072882)上写了一个示例。我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T21:37:32.297

将模板的扩展名从 .builder 更改为 .jbuilder

# javascript - 拉斐尔设置透明png不透明度丢失alpha通道

> ID：13741654
> 
> 赞同：2
> 
> 时间：2012-12-06T10:30:04.327
> 
> 标签：javascript, internet-explorer, svg, raphael, vml

我正在使用拉斐尔 2.1.0。

当我在 IE8 下对透明 PNG 的不透明度进行动画处理时，透明度动画效果很好。即：“从”0.0 的不透明度“到”1.0 的不透明度。

不透明动画结束后，我想将图像的位置/不透明度设置/恢复为动画前状态，但图像的 alpha 通道变得不透明。曾经是透明背景的地方现在变成了一个白色方块。

使用 SVG 渲染器 - Chrome 和 Firefox - 一切都很好。我尝试链接图像、翻译和 alpha 无济于事。

这是代码：

```
var element = this._paper.image(image.Url(), 0, 0, width, height);
var removeOnStop = true;
var fromParams = {}
var toParams = {};

// From options
fromParams.opacity = options.from.alpha;
// ...
element.attr(fromParams);

// To options
toParams.transform = 'T300,300';
toParams.opacity = options.to.alpha;      

// Animate
var anim = Raphael.animation(toParams, duration, 'linear', function() {  
    if (removeOnStop) {
        element.attr({ opacity: defaultProperties.alpha });
        element.transform('T' + defaultProperties.left + ',' + defaultProperties.top);
    }
}).repeat(repeat);

element.animate(anim); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:36:36.267

我尝试了以下

*   到处为 alpha 设置动画，但这会导致 Raphael 中出现空引用问题
*   链接`translate()`/`transform()`和`attr()`
*   将过滤器直接应用于对象
*   更改顺序（转换前的属性，反之亦然）

最后，工作解决方案是使用以下方法翻译和设置不透明度`attr`：

```
if (removeOnStop) {
    element.attr({ opacity: defaultProperties.alpha });
    element.transform('T' + defaultProperties.left + ',' + defaultProperties.top);
} 
```

变成了

```
if (removeOnStop) {                        
    element.attr({ transform: 'T' + defaultProperties.left + ',' + defaultProperties.top, 
                     opacity: defaultProperties.alpha });
} 
```

重要的是，您*必须*在最初创建图像和设置初始不透明度时执行此操作。

我希望这将为人们节省未来的麻烦。

# .net - 适用于 VS 2012 的 SQL Server Compact 3.5

> ID：13741657
> 
> 赞同：1
> 
> 时间：2012-12-06T10:30:08.433
> 
> 标签：.net, sql-server, sql-server-ce

我已经在我的机器上安装了 Sql Server Compact 3.5。但是在尝试添加新数据源时仍然没有出现在 Visual Studio 2012 上。问题是什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:49:29.807

看起来没有本机支持，但我没有方便确认的 VS 2012 安装。不过，您可以查看这个 Codeplex 项目：

[http://sqlcetoolbox.codeplex.com/](http://sqlcetoolbox.codeplex.com/)

# .net - 使用 PowerShell 获取具有特定尺寸的图像文件列表作为文件对象

> ID：13741668
> 
> 赞同：1
> 
> 时间：2012-12-06T10:30:26.760
> 
> 标签：.net, powershell, imagemagick

通过 Powershell密切关注此[智能图像搜索](https://stackoverflow.com/questions/2957828/smart-image-search-via-powershell)

我有以下 PowerShell 脚本：-

```
Add-Type -Assembly System.Drawing

function Get-Image {
    $input | ForEach-Object { [Drawing.Image]::FromFile($_.FullName) }
}

Get-ChildItem -Path 'C:\Images' -Filter *.jpg -Recurse | Get-Image | ? { $_.Width -gt 1280 -or $_.Height -gt 1280 } 
```

问题是，这会返回一个 Image 对象列表。

我基本上想要一个宽度或高度大于 1280 像素的文件对象列表（最终将是图像）。

我需要以某种方式将图像对象转换回文件对象吗？

最后通牒是大于 1280 像素的文件名列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:43:48.290

```
function Get-Image{ 
process {
          $file = $_
          [Drawing.Image]::FromFile($_.FullName)  |
          ForEach-Object{           
            $_ | Add-Member -PassThru NoteProperty FullName ('{0}' -f $file.FullName)
          }
         }
} 
```

然后

```
Get-ChildItem -Path 'C:\Images' -Filter *.jpg -Recurse | Get-Image | ? { $_.Width -gt 1280 -or $_.Height -gt 1280 } | select -expa Fullname | get-item 
```

# ios - 地图上的自定义 ImageView 不与 iPhone 中的 MapView 一起旋转

> ID：13741675
> 
> 赞同：0
> 
> 时间：2012-12-06T10:30:44.793
> 
> 标签：ios, uiimageview, ios6, mkmapview

嗨，我正在开发地图应用程序。我正在旋转 mapview 和 imageview，它是 annotationView 上的子视图。Mapview 旋转是完美的，但是 imageview 并没有按照 Mapview 旋转，并且总是指向北方向。

我正在使用以下代码来旋转 imageview ：

```
-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation

{

static NSString *identifier = @"annView";

MKPinAnnotationView *annView = (MKPinAnnotationView *) [self.mapView dequeueReusableAnnotationViewWithIdentifier:identifier];

annView=nil;
[annView setSelected:YES animated:NO];
if (annView == nil) 
{
    annView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
}

MyAnnotation *myAnnotation=(MyAnnotation *)annotation;
NSString *details;
if ([myAnnotation isKindOfClass:[MKUserLocation class]])
{
    //return nil;
}
else
{
    details=[myAnnotation annType];

}
NSLog(@"Details is  %@",details);
annView.canShowCallout = YES;

if([details isEqualToString:@"Current"])
{
    [[annView subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)];
    annView.animatesDrop=NO;
    annView.canShowCallout=YES;//pin3.png// Parking_Psymbol//dus2
    annView.image=[UIImage imageNamed:@""];
    UIImage * locaterImage;
    locaterImage = [UIImage imageNamed:@"Locatermap.png"];

    locaterImageView = [[UIImageView alloc] initWithImage:locaterImage];
    locaterImageView.frame = CGRectMake(-28, -4, 70, 70);

    //--------For animating imageview ---------------------

    // Setup the animation
    [UIView beginAnimations: @"anim" context: nil];
    [UIView setAnimationDuration:2.0];
    [UIView setAnimationCurve:2.0];
    //[UIView setAnimationRepeatCount:10];
    [UIView setAnimationBeginsFromCurrentState:YES];
           [UIView setAnimationDelegate:self];
    [UIView commitAnimations];
    //--------For animating imageview ---------------------
    [annView addSubview:locaterImageView];
} 
```

对于旋转 MapView ：

```
-(void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading

{

// Convert Degree to Radian and move the needle
float oldRad =  -manager.heading.trueHeading * M_PI / 180.0f;
float newRad =  -newHeading.trueHeading * M_PI / 180.0f;

CABasicAnimation *theAnimation;
theAnimation=[CABasicAnimation animationWithKeyPath:@"transform.rotation"];
theAnimation.fromValue = [NSNumber numberWithFloat:oldRad];
theAnimation.toValue=[NSNumber numberWithFloat:newRad];
theAnimation.duration = 0.5f;
[mapView.layer addAnimation:theAnimation forKey:@"transform.rotation"];
self.mapView.transform = CGAffineTransformMakeRotation(newRad);
} 
```

我用谷歌搜索，但我找不到我需要的答案。请给出解决此问题的任何想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:03:21.653

这一切只是为了旋转地图以匹配现实世界吗？即地图上的北方真的指向北方吗？如果是这样，您需要做的是将`MKMapView`'s设置`userTrackingMode`为`MKUserTrackingModeFollowWithHeading`

# c# - SHA1 哈希计算不会为 java 和 c# 返回相同的结果

> ID：13741676
> 
> 赞同：0
> 
> 时间：2012-12-06T10:30:45.677
> 
> 标签：c#, java, .net, sha1

我在我的 .net 和 Java 应用程序中计算哈希值。但是当他们给我结果时我遇到了一个问题，因为两者都给出了不同的结果。在搜索这个问题时，我发现这些问题
[问题 1](https://stackoverflow.com/questions/3205066/different-sha1-hash-result-between-java-and-c-sharp)和[问题 2](https://stackoverflow.com/questions/8780261/hmc-sha1-hash-java-producing-different-hash-output-than-c-sharp)因此根据他们的应用在那里答案，但不幸的是我没有成功。我也尝试过`UTF-8`，`UTF-16LE`但结果又不一样了。
现在我被卡住了，想知道为什么会这样，**我该如何解决这个问题**
我的代码片段如下
**.Net**

```
byte[] buffer2 = new SHA1CryptoServiceProvider().ComputeHash(bytes); 
```

**爪哇**

```
MessageDigest sha1 = MessageDigest.getInstance("SHA1");
        byte[] buffer2 = sha1.digest(bytes); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:51:43.977

我认为问题在于 C# 字节是无符号类型，而在 java 中则不是。

这两个代码同样有效：

```
 public static void main(String[] args) throws NoSuchAlgorithmException {
        MessageDigest sha1 = MessageDigest.getInstance("SHA1");
        byte[] bytes = new byte[] { 1, 2, 10 };
        byte[] buffer2 = sha1.digest(bytes);
        for(byte b : buffer2){
            System.out.println(b);
        }
    }

    static void Main(string[] args)
    {
        var bytes = new byte[] { 1, 2, 10 };
        var buffer = new SHA1CryptoServiceProvider().ComputeHash(bytes);
        foreach (var b in buffer)
        {
            Console.WriteLine((sbyte)b); //attention to cast           
        }
        Console.Read();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:52:52.323

所以只是回顾一下我的评论作为答案。请参阅：[Calculating SHA-1 hashes in Java and C#](https://stackoverflow.com/questions/6843698/calculating-sha-1-hashes-in-java-and-c-sharp)
Basic - Java bytes are signed while C# bytes not. 两个结果的内部表示将是相同的，但打印它们会产生不同的结果，除非您进行适当的转换。

# sql - Oracle：对数百万行进行统计的最快方法？

> ID：13741677
> 
> 赞同：1
> 
> 时间：2012-12-06T10:30:46.233
> 
> 标签：sql, database, oracle, database-design

我开发了一个允许用户输入测量值的应用程序 - 这些测量值存储在 Oracle 数据库中。每个测量“会话”可以包含大约 100 个测量值。一个“批次”中可能有大约 100 个测量会话，因此每批次有 10,000 个测量值。在某个时候很容易有大约 1000 个批次，使测量的总数达到数百万。

问题是需要对测量结果进行计算和统计。它的范围从每批次的平均测量值到过去 6 个月测量的统计数据。

我的问题是：有什么方法可以使计算这些统计数据的过程更快？通过我正在运行的查询类型或数据库的结构？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:29:59.747

我假设大多数计算将在单个会话或单个批次上执行。如果是这种情况，那么重要的是会话和批处理不要分布在整个磁盘上。

为了实现所需的数据集群，您可能希望创建一个按批次和会话组织的索引组织表 (IOT)。这样，属于同一会话或同一批次的测量值在磁盘上的位置非常接近，并且会话或批次的查询将仅限于少量磁盘页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:25:28.137

不幸的是，由于需要执行的计算数量不仅限于几个，我无法在每次测量结束时计算它们。

最后，查询并没有花这么长时间——计算所有统计数据大约需要 3 分钟。对于最终用户来说，等待的时间仍然很长，但好在统计数据不一定要完全更新。

因此，我使用物化视图拍摄统计数据的“快照”，并将其设置为每天凌晨 2 点自行更新。然后，当用户从物化视图请求统计信息时，它是即时的！

# text - FCKEditor 中的文本版本比较

> ID：13741679
> 
> 赞同：6
> 
> 时间：2012-12-06T10:30:51.640
> 
> 标签：text, version-control, compare, fckeditor

我正在使用 Fck 编辑器编写内容。我将文本作为版本存储在数据库中。在 FCK 编辑器中加载文本时，我想突出显示版本中的这些更改。

如何比较文本....

如何显示已在删除线模式下删除的任何文本。

请帮我/...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T13:48:18.237

试试 google 的 diff-patch 算法[http://code.google.com/p/google-diff-match-patch/](http://code.google.com/p/google-diff-match-patch/)

获取文本的先前版本和当前版本并将其存储到两个参数中。将这两个参数传递给以下函数。

```
function diffString(o, n) {
o = o.replace(/<[^<|>]+?>|&nbsp;/gi, '');

n = n.replace(/<[^<|>]+?>|&nbsp;/gi, '');

var out = diff(o == "" ? [] : o.split(/\s+/), n == "" ? [] : n.split(/\s+/));
var str = "";

var oSpace = o.match(/\s+/g);
if (oSpace == null) {
    oSpace = ["\n"];
} else {
    oSpace.push("\n");
}
var nSpace = n.match(/\s+/g);
if (nSpace == null) {
    nSpace = ["\n"];
} else {
    nSpace.push("\n");
}

if (out.n.length == 0) {

for (var i = 0; i < out.o.length; i++) {
    str += '<span style="background-color:#F00;"><del>' + escape(out.o[i]) + oSpace[i] + "</del></span>";
}
} else {
if (out.n[0].text == null) {
    for (n = 0; n < out.o.length && out.o[n].text == null; n++) {
        str += '<span style="background-color:#F00;"><del>' + escape(out.o[n]) + oSpace[n] + "</del></span>";
    }
}

for (var i = 0; i < out.n.length; i++) {
    if (out.n[i].text == null) {
        str += '<span style="background-color:#0C0;"><ins>' + escape(out.n[i]) + nSpace[i] + "</ins></span>";
    } else {
        var pre = "";

        for (n = out.n[i].row + 1; n < out.o.length && out.o[n].text == null; n++) {
            pre += '<span style="background-color:#F00;"><del>' + escape(out.o[n]) + oSpace[n] + "</del></span>";
        }
        str += " " + out.n[i].text + nSpace[i] + pre;
    }
    }
}

return str;
} 
```

这将返回一个 html，其中新文本标记为绿色，删除的文本标记为红色 + 被删除。

# validation - DataAnnotations: if (valid) => change Property

> ID：13741686
> 
> 赞同：0
> 
> 时间：2012-12-06T10:31:10.353
> 
> 标签：validation, c#-4.0, mvvm, properties, data-annotations

嗨，我正在谷歌搜索这个问题，但我没有找到任何关于这个的 usfull。

如果每个 DataAnnotations 的验证失败，我想拒绝一组属性

你能告诉我我的代码中缺少什么吗？

型号代码片段

```
 private string _firstname;
        public string Firstname
        {
            get { return _firstname; }
            set
            {
                _firstname = value;
                RaisePropertyChanged(() => Reg(() => Firstname));
            }
        } 
```

ViewModel 代码片段

```
 [Required]
        [RegularExpression(@"^[a-zA-ZäöüßÄÖÜß''-'\s]{2,40}$")]
        public string Name
        {
            get { return currentperson.Name; }
            set
            {
                currentperson.Name = value;
            RaisePropertyChanged(() => Reg(() => Name));
            }
        } 
```

查看代码片段

```
<TextBox HorizontalAlignment="Left" VerticalAlignment="Top" Width="120" Text="{Binding Firstname,UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/> 
```

任何帮助将不胜感激

**编辑：**添加验证类

```
public class VMValidation : VMBase, IDataErrorInfo
{
    private Dictionary<string, string> ErrorList = new Dictionary<string, string>();

    /// <summary>
    /// Gets a value indicating whether or not this domain object is valid. 
    /// </summary>
    public bool IsVailid
    {
        get { return (ErrorList.Count == 0) ? true : false; }
    }

    #region IDataErrorInfo

    /// <summary>
    /// Gets an error message indicating what is wrong with this domain object. 
    /// The default is an empty string ("").
    /// </summary>
    public string Error
    {
        get { return getErrors(); } // noch keine richtige methode für gefunden müsste so aber auch funktionieren
    }

    /// <summary>
    /// dies ist eine methode die durch einen Event (noch unbekannt welcher)
    /// ausgelöst wird und den Propertynamen schon mit übergeben bekommt
    /// </summary>
    /// <param name="propertyName">Name der Property z.B FirstName</param>
    /// <returns>The error message for the property. 
    /// The default is an empty string ("").</returns>
    public string this[string propertyName]
    {
        get { return OnValidate(propertyName); }
    }

    private string getErrors()
    {
        string Error = "";
        foreach (KeyValuePair<string, string> error in ErrorList)
        {
            Error += error.Value;
            Error += Environment.NewLine;
        }

        return Error;
    }

    /// <summary>
    /// Validates current instance properties using Data Annotations.
    /// </summary>
    /// <param name="propertyName">Name der Property</param>
    /// <returns>ErrorMsg</returns>
    protected virtual string OnValidate(string propertyName)
    {
        if (string.IsNullOrEmpty(propertyName))
            throw new ArgumentException("Invalid property name", propertyName);

        string error = string.Empty;
        var value = this.GetType().GetProperty(propertyName).GetValue(this, null);
        var results = new List<ValidationResult>(1);

        var context = new ValidationContext(this, null, null) { MemberName = propertyName };

        var result = Validator.TryValidateProperty(value, context, results);

        if (!result)
        {
            var validationResult = results.First();
            error = validationResult.ErrorMessage;
        }
        if (error.Length > 0)
        {
            if (!ErrorList.ContainsKey(propertyName))
                ErrorList.Add(propertyName, error);
        }
        else
            if (!ErrorList.ContainsKey(propertyName))
                ErrorList.Remove(propertyName);

        return error;
    }

    public bool VailidValue(string propertyName, object value)
    {
        var results = new List<ValidationResult>(1);
        var context = new ValidationContext(this, null, null) { MemberName = propertyName };
        var result = Validator.TryValidateProperty(value, context, results);

        return result;
    }
    #endregion //IDataErrorInfo
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:47:50.190

尝试创建一个验证方法，并且仅在结果为`true`.

```
public string Name
{
    get { return currentperson.Name; }
    set
    {
        if (ValidateProperty("Name", value))
        {
            currentperson.Name = value;
            RaisePropertyChanged(() => Reg(() => Name));
        }
    }
} 

protected bool ValidateProperty(string propertyName, object value)
{
    var results = new List<ValidationResult>();
    bool isValid = Validator.TryValidateProperty(
        value,
        new ValidationContext(this, null)
        {
            MemberName = propertyName
        },
        results);
    // Do what you want with the validation results
    return isValid;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:06:36.320

我改变了我的 VMValidation

```
 public class VMValidation : VMBase, IDataErrorInfo
        {
            private Dictionary<string, string> ErrorList = new Dictionary<string, string>();

            public bool IsVailid
            {
                get { return (ErrorList.Count == 0) ? true : false; }
            }

            #region IDataErrorInfo

            public string Error
            {
                get { return getErrors(); } // noch keine richtige methode für gefunden müsste so aber auch funktionieren
            }

            public string this[string propertyName]
            {
                get { return OnValidate(propertyName); }
            }

            private string getErrors()
            {
                string Error = "";
                foreach (KeyValuePair<string, string> error in ErrorList)
                {
                    Error += error.Value;
                    Error += Environment.NewLine;
                }

                return Error;
            }

            protected virtual string OnValidate(string propertyName)
            {
                string error =String.Empty;

                if (ErrorList.ContainsKey(propertyName))
                    error = ErrorList[propertyName];

                return error;
            }

            public bool VailidateValue(string propertyName, object value)
            {
                if (string.IsNullOrEmpty(propertyName))
                {
                    Logger.ERRROR(propertyName, "Invalid property name");
                    throw new ArgumentException("Invalid property name", propertyName);
                }

                var results = new List<ValidationResult>(1);
                var context = new ValidationContext(this, null, null) { MemberName = propertyName };
                var result = Validator.TryValidateProperty(value, context, results);

                if (!result)
                {
                    var validationResult = results.First();
                    string error = validationResult.ErrorMessage;

                    if (error.Length > 0)
                    {
                        if (!ErrorList.ContainsKey(propertyName))
                            ErrorList.Add(propertyName, error);
                    }
                }
                else
                   if (ErrorList.ContainsKey(propertyName))
                       ErrorList.Remove(propertyName);

                return result;
            }
            #endregion //IDataErrorInfo
        } 
```

并按照 Alyce 的建议去做

```
 [Required]
        [RegularExpression(@"^[a-zA-ZäöüßÄÖÜß''-'\s]{2,40}$")]
        public string Name
        {
            get
            {
                if (currentperson == null)
                    return "";
                return currentperson.Name;
            }
            set
            {
                if (VailidateValue("Name", value))
                {
                    currentperson.Name = value;
                }
                RaisePropertyChanged(() => Reg(() => Name)); //you have to Raise because otherwise you won't get the Error :)
            }
        } 
```

# loops - 如何在 Verilog 的循环中使用准备好的模块？

> ID：13741687
> 
> 赞同：1
> 
> 时间：2012-12-06T10:31:10.133
> 
> 标签：loops, module, verilog

我正在尝试生成 128 个并行异或门，然后将它们的输出连接到 Verilog 中的 64 个异或门。我使用了一个名为“EXOR”的模块。我的问题是：当我将此模块“EXOR”放入循环时，程序给出语法错误“unexpected token:'EXOR'”。我想将这些门命名为 exor0、exor1、...。

我该如何解决？

```
initial begin 
  for (i=0; i<128 ; i=i +1 )
    EXOR exor[i](.I1(m[2*i]), .I2(m[2*i+1]), .o(t[i]));
end

initial begin 
  for (i=0; i<64 ; i=i +1 )
    EXOR exor[i+128](.I1(t[2*i]), .I2(t[2*i+1]), .o(f[i]));
end

initial begin 
  for (i=0; i<32 ; i=i +1 )
    EXOR exor[i+192](.I1(f[2*i]), .I2(f[2*i+1]), .o(g[i]));
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T13:08:21.453

为了详细说明 Munkymorgy 的答案，您在这里寻找的是一个生成循环。'initial' 和 'always' 块用于“运行时”结构。由于您试图在实例上创建一个数组，因此您希望在详细说明时解释一些内容。

```
genvar i;

generate
   for (i = 0; i < 64; i = i + 1) begin : gen_loop
      EXOR exor(.I1(m[2 * i]), .I2(m[2 * i + 1], .o(t[i]));
   end
endgenerate 
```

两件事情：

1) 循环变量必须声明为“genvar”

2) for 循环需要命名。这将用于实例的分层名称。

# javascript - 我如何到达表头 =“1”

> ID：13741691
> 
> 赞同：0
> 
> 时间：2012-12-06T10:31:35.773
> 
> 标签：javascript, select, datagrid, dojo, arcgis

在这个例子中：

```
function onRowClickHandler(evt){
    var clickedTaxLotId = grid.getItem(evt.rowIndex).PARCELID;
    var selectedTaxLot;

    dojo.forEach(map.graphics.graphics,function(graphic){
      if((graphic.attributes) && graphic.attributes.PARCELID === clickedTaxLotId){
        selectedTaxLot = graphic;
        return;
      }
    });
    var taxLotExtent = selectedTaxLot.geometry.getExtent();
    map.setExtent(taxLotExtent);
  } 
```

他们从这里选择 PARCELID：

```
 <th field="PARCELID">Parcel ID</th>
      <th field="OWNERNME1" >Owner 1</th>
      <th field="OWNERNME2">Owner 2</th>
      <th field="RESYRBLT ">Year Built</th>
      <th field="SITEADDRESS" width="100%">Address</th> 
```

但现在我的问题是我有一个`<th field="1">`不可改变的。但我需要得到这样的值， `var clickedTaxLotId = grid.getItem(evt.rowIndex).2;`但在 javascript 中这是不可能的。

表头如下所示：

```
 <div data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region:'bottom'" style="height:350px;" >
<table data-dojo-type="dojox.grid.DataGrid" jsid="grid" id="grid" data-dojo-props="rowsPerPage:'5', rowSelector:'20px'">
  <thead>
    <tr>

      <th field="0" width="auto" >
        Gezocht op
      </th>
      <th field="1" width="auto" >
        Gevonden
      </th>

    </tr>
  </thead>
</table> 
```

**编辑**

在这里，我设置了第 th 字段的值。这由 dataForGrid 完成。第一个字段是“0”，并用 result.foundFieldName 填充，“1”用 result.value

```
 map.graphics.clear();
    var dataForGrid = [];
    //Build an array of attribute information and add each found graphic to the map
    dojo.forEach(results, function(result) {
      var graphic = result.feature;
      dataForGrid.push([result.foundFieldName, result.value]);
      var userlabel = result.value;
      switch (graphic.geometry.type) {
      case "point":
        graphic.setSymbol(markerSymbol);
        break;
      case "polyline":
        graphic.setSymbol(lineSymbol);
        break;
      case "polygon":
        graphic.setSymbol(polygonSymbol);
        break;
      }
      map.graphics.add(graphic);
    });
    var data = {

      items: dataForGrid
    };
    var store = new dojo.data.ItemFileReadStore({
      data: data
    });
    grid.setStore(store);
  } 
```

# android - 应用程序以黑屏启动 - 没有视图可见

> ID：13741692
> 
> 赞同：0
> 
> 时间：2012-12-06T10:31:37.007
> 
> 标签：android, cordova, view

我正在尝试在 phoneGap 的根目录上设置一个简单的视图，但我得到了黑屏。

这是从 xml 膨胀和加载的类的代码：

```
 public TopBar(Context context){
        myActivity = (Activity)context;
    }

    protected View createTopBarView() {

        RelativeLayout mainLayout = new RelativeLayout(myActivity);
        mainLayout.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

        LayoutInflater inflater = myActivity.getLayoutInflater();
        View layout = inflater.inflate(R.layout.top_bar, null);
        topBarView = (LinearLayout) layout.findViewById(R.id.linearLayoutTopBar);

        /**
         * Setting Buttons....
         */

//Adding the View
        mainLayout.addView(topBarView);
        return mainLayout;
    } 
```

该方法返回一个视图，并在一个扩展 droidGap 的类中我做：

```
private void createLayout(){

    mainRelative = new RelativeLayout(this);
    mainRelative.setBackgroundResource(R.drawable.background);

    View topBarView = new TopBar(this).createTopBarView();
    mainRelative.setVisibility(View.VISIBLE);
    mainRelative.addView(topBarView);

    root.addView(mainRelative);

} 
```

此函数是从 onCreate 调用的，但运行时出现黑屏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:36:37.420

你可以尝试添加

```
mainLayout.addView(layout); 
```

代替

```
mainLayout.addView(topBarView); 
```

我可能会帮忙

编辑：你有没有这样做：`setContentView(yourLayout, LayoutParams);`在 onCreate 中？

# multithreading - 从 WaitHandle.Wait 构造任务

> ID：13741694
> 
> 赞同：11
> 
> 时间：2012-12-06T10:31:37.970
> 
> 标签：multithreading, c#-4.0, .net-4.0, task-parallel-library, task

我选择从我的对象中返回`Task<T>`和返回`Task`方法，以便通过 gui 轻松使用。一些方法只是等待其他类型的等待句柄的互斥体。有没有一种方法可以构建`Task`，`WaitHandle.Wait()`这样我就不必为此阻塞一个treadpool线程。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T11:13:35.903

有一种方法可以做到这一点：您可以使用[ThreadPool.RegisterWaitForSingleObject](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.registerwaitforsingleobject.aspx)方法订阅 WaitHandle 并通过[TaskCompletionSource](http://msdn.microsoft.com/en-us/library/dd449174.aspx)类对其进行包装：

```
public static class WaitHandleEx
{
    public static Task ToTask(this WaitHandle waitHandle)
    {
        var tcs = new TaskCompletionSource<object>();

        // Registering callback to wait till WaitHandle changes its state

        ThreadPool.RegisterWaitForSingleObject(
            waitObject: waitHandle,
            callBack:(o, timeout) => { tcs.SetResult(null); }, 
            state: null, 
            timeout: TimeSpan.MaxValue, 
            executeOnlyOnce: true);

        return tcs.Task;
    }
} 
```

用法：

```
WaitHandle wh = new AutoResetEvent(true);
var task = wh.ToTask();
task.Wait(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-03-22T12:34:55.573

正如@gordy 在 Sergey Teplyakov 接受的答案的评论中所指出的那样，[MSDN](https://msdn.microsoft.com/en-us/library/hh873178%28v=vs.110%29.aspx#WHToTap)提出了一个取消订阅已注册 WaitHandle 的实现。

我这里稍微修改了一下，支持回调的结果：如果注册超时，任务返回false。如果已收到信号，则任务返回 true：

```
public static class ExtensionMethods
{
    public static Task<bool> WaitOneAsync(this WaitHandle waitHandle, int timeoutMs)
    {
        if (waitHandle == null)
            throw new ArgumentNullException(nameof(waitHandle));

        var tcs = new TaskCompletionSource<bool>();

        RegisteredWaitHandle registeredWaitHandle = ThreadPool.RegisterWaitForSingleObject(
            waitHandle,
            callBack: (state, timedOut) => { tcs.TrySetResult(!timedOut); }, 
            state: null,
            millisecondsTimeOutInterval: timeoutMs, 
            executeOnlyOnce: true);

        return tcs.Task.ContinueWith((antecedent) =>
        {
            registeredWaitHandle.Unregister(waitObject: null);
            try
            {
                return antecedent.Result;
            }
            catch 
            {
                return false;
            }
        });
    }
} 
```

用法与原始答案相同：

```
WaitHandle signal = new AutoResetEvent(initialState: false);

bool signaled = await signal.WaitOneAsync(1000);
if (signaled)
{
    Console.WriteLine("Signal received");
}
else 
{
    Console.WriteLine("Waiting signal timed out");
} 
```

# list - 列表中同一位置的元素总和

> ID：13741699
> 
> 赞同：2
> 
> 时间：2012-12-06T10:31:44.643
> 
> 标签：list, haskell, nested, sum, fold

如何在同一位置对列表中的元素求和？例如：

```
[[2,3,4],[5,6,7],[8,9,10]]=[15,18,21] 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:40:20.050

您可以转置列表，并对结果中的每个列表求和：

```
ghci> import Data.List (transpose)
ghci> map sum $ transpose [[2,3,4],[5,6,7],[8,9,10]]
[15,18,21] 
```

与其他解决方案不同，这适用于长度不均匀的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:42:13.420

这是 GHCi 中的一个示例：

```
λ> let xs = [[2,3,4],[5,6,7],[8,9,10]]
λ> foldr1 (zipWith (+)) xs
[15,18,21] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T10:39:01.973

尝试：

```
sumIn :: Num a => [[a]] -> [a]
sumIn = foldl (zipWith (+)) (repeat 0) 
```

请注意，如果参数是一个空列表，则结果是一个无限的零列表。因此，您可能希望单独处理这种情况，例如

```
sumIn :: Num a => [[a]] -> [a]
sumIn [] = []
sumIn xs = foldl (zipWith (+)) (repeat 0) xs 
```

# ios - 嵌套 UICollectionViews 的问题

> ID：13741706
> 
> 赞同：2
> 
> 时间：2012-12-06T10:32:13.527
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我有 2 个嵌套的 UICollectionViews。外部集合视图的委托是主视图控制器，内部集合视图委托是外部集合视图的 UICollectionCell。

外部集合视图只有一个标签和内部集合视图 - 通常会有七个，内部集合视图应该包含 3 或 4 个单元格（包含 3 个标签）。

问题是内部集合视图似乎只更新了两次（对于外部视图中的前 2 组数据），然后它们重复。

这是外部 UICollectionView 的 cellForItemAtIndexPath

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Main Tide Data Table Cell";

    TideDataTableCell* tideDayDataCell = [self.tideDataTable dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
    tideDayDataCell.tideDataTable.delegate = tideDayDataCell;
    tideDayDataCell.tideDataTable.dataSource = tideDayDataCell;
    tidalDate* tideDate = self.tidalDates[indexPath.row];
    tideDayDataCell.thisTidalDate = tideDate;
    tideDayDataCell.dayLabel.text = tideDate.dateString;
    tideDayDataCell.averageTideHeight = self.avgTideHeight;

    tideDayDataCell.backgroundColor = [UIColor whiteColor];
    self.tideDataTable.backgroundColor = [UIColor lightGrayColor];
    return tideDayDataCell;
} 
```

...这是第二个 UICollectionView 的 cellForItemAtIndexPath ，它位于 UICollectionViewCell 对象中，用于输出 UICollection 视图！

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSString* CellIdentifier = @"Tide Info Table Cell";

    TidalTideTableCell* tidalTideTableCell = [self.tideDataTable dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
    tidalTideTableCell.timeTideLabel.text = @"";
    tidalTideTableCell.heightTideLabel.text = @"";
    tidalTideTableCell.hwlwTideLabel.text = @"";
    self.tideDataTable.backgroundColor = [UIColor clearColor];
    Tide* tide = self.thisTidalDate.tides[indexPath.row];
    tidalTideTableCell.heightTideLabel.text = [[NSNumber numberWithDouble:tide.height] stringValue];
    if (tide.height > self.averageTideHeight)
    {
        tidalTideTableCell.hwlwTideLabel.text = @"HW";
    }
    else
    {
        tidalTideTableCell.hwlwTideLabel.text = @"LW";
    }
    tidalTideTableCell.timeTideLabel.text = tide.date;
    tidalTideTableCell.backgroundColor = [UIColor clearColor];
    return tidalTideTableCell;
} 
```

我希望这是有道理的-请问是否不是...我只是不明白为什么前1组数据可以，而接下来的5组数据不行...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T17:57:51.757

这是通过在母亲（外部）UICollectionView 的 dequeue 方法中调用 [UICollectionView refreshdata] 解决的

# objective-c - 如何在用户停止触摸屏幕的地方停止 uiscrollview 滚动

> ID：13741710
> 
> 赞同：2
> 
> 时间：2012-12-06T10:32:32.403
> 
> 标签：objective-c, ios, uiscrollview, uipagecontrol

我有一个 UIScrollView，我需要的是当用户停止拖动它时，滚动视图停止滚动。

有时它可以工作，但有时，当释放压力时，滚动会继续。

我用 scrollView.tracking 或像 scrollViewDidScroll 或 scrollViewDidEndDecelerating 等委托方法尝试了很多东西。但目前，我没有找到任何东西！

我也试过 UIPageControl 但我需要我的滚动视图每 50 像素停止一次。

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:51:33.843

您需要执行此方法`(void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate`，`decelerate`参数表示是否应立即停止滚动视图。尝试使用`decelerationRate`属性来设置所需的速率。

# c++ - 错误：“std::this_thread”尚未声明

> ID：13741711
> 
> 赞同：18
> 
> 时间：2012-12-06T10:32:37.253
> 
> 标签：c++, c++11, gcc, mingw, glibc

我尝试使用 std::this_thread::sleep_for() 函数但得到了错误
`error: 'std::this_thread' has not been declared`。
标志 _GLIBCXX_USE_NANOSLEEP 包括在内。
还需要什么来强制它工作？
MinGW ==> gcc 版本 4.7.2 (GCC)

SSCCE：

```
#include<thread>

int main() {
  std::this_thread::sleep_for(std::chrono::seconds(3));
} 
```

命令行：

```
g++ -D_GLIBCXX_USE_NANOSLEEP -std=gnu++0x ssce.cpp -o ssce.exe 
```

编译结果：

```
ssce.cpp: In function 'int main()':
ssce.cpp:4:8: error: 'std::this_thread' has not been declared 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T08:29:40.287

使用带有 POSIX 线程的 MinGW，Luke。

[http://sourceforge.net/projects/mingwbuilds/](http://sourceforge.net/projects/mingwbuilds/)

# c# - 店铺选择结果

> ID：13741712
> 
> 赞同：0
> 
> 时间：2012-12-06T10:32:40.327
> 
> 标签：c#

我想提取我的表名并将其保存到变量中，这是我的 cod，它返回 3 个答案：学生、老师和分数。我如何更改它以将这些树表名称保存为 3 个变量。谢谢你。

```
try
{
  SqlDataReader myreader = null;
  SqlCommand mycommand = new SqlCommand("select * FROM information_schema.tables WHERE table_type = 'BASE TABLE'", myconnect);
  myreader = mycommand.ExecuteReader();
  while (myreader.Read())
  {
    Console.WriteLine(myreader[2].ToString());
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:50:42.827

一个简单的内置方法是使用[`Connection.GetSchema`](http://msdn.microsoft.com/en-us/library/ms254934%28v=vs.80%29.aspx)：

```
using (var con = new System.Data.SqlClient.SqlConnection(conStr))
{
    con.Open();
    DataTable schemaTable = con.GetSchema("Tables");
    IList<string> allTableNames = schemaTable.AsEnumerable()
        .Where(r => r.Field<string>("TABLE_TYPE") == "BASE TABLE")
        .Select(r => r.Field<string>("TABLE_NAME"))
        .ToList();
} 
```

现在你有一个`List<string>`包含所有表名的表，你可以通过索引器或循环访问，或者创建一个逗号分隔的列表`string.Join`：

```
string tNames = string.Join(",", allTableNames);
Console.Write("all tables in the given database: " + tNames); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:42:45.123

你可以使用这个：

```
string tableName ="" ; // Variable to stroe the table names
string connectionString = ""; //Your connectionstring
// get records from the table
string commandString =""; //Your query
// create the data set command object
// and the DataSet
SqlDataAdapter DataAdapter =new SqlDataAdapter(commandString, connectionString);
DataSet DataSet = new DataSet( );

// fill the DataSet object
DataAdapter.Fill(DataSet, "Customers");
// Get the one table from the DataSet
DataTable dataTable = DataSet.Tables[0];
// for each row in the table, display the info
foreach (DataRow dataRow in dataTable.Rows)
 {

  tableName = dataRow[0].tostring();
  //...
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:44:39.617

如果您想为将来的用户或不同的会话保存结果，那么您可以使用以下任何方法

第一个使用“插入”查询将结果一一保存在您专门为保存数据而创建的不同表中，您可以将插入命令/语句直接放入 for 循环

第二种方法使用xml存储值非常简单且内存友好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:00:00.680

我修改了@Doctor 代码以使用 ArrayList 将表名的数量存储在单个变量中。

```
ArrayList alTableName  = new ArrayList(); // Variable to stroe the table names
string connectionString = ""; //Your connectionstring
// get records from the table
string commandString =""; //Your query
// create the data set command object
// and the DataSet

SqlDataAdapter DataAdapter =new SqlDataAdapter(commandString, connectionString);
DataSet DataSet = new DataSet( );

// fill the DataSet object
DataAdapter.Fill(DataSet, "Customers");

// Get the one table from the DataSet
DataTable dataTable = DataSet.Tables[0];

// for each row in the table, display the info
foreach (DataRow dataRow in dataTable.Rows)
{

    alTableName.Add(dataRow[0].tostring());
    //...
} 
```

# javascript - 在私有函数中访问全局（javascript）变量

> ID：13741713
> 
> 赞同：0
> 
> 时间：2012-12-06T10:32:41.980
> 
> 标签：javascript, variables, onclick, global

我目前正在开发一个用于学习目的的计算器，并且在某种程度上，一切都有效，但不是我想要的方式。

这是代码的加法部分：

HTML：

```
<input type="number" id="int1" />
<input type="number" id="int2" />
<input type="button" onClick="sumOf();" />
<div id="result"></div>  // To display the result 
```

JS：

```
var int1 = document.getElementById("int1").value;
var int1 = document.getElementById("int2").value;
var result = document.getElementById("result");

function sumOf(int1, int2) {
  result.innerHTML = parseFloat(int1) + parseFloat(int2);
} 
```

现在的方式是，如果我通过 onClick 事件调用该函数，它将导致 NaN。检查 int 的类型会导致“未定义”。所以我将变量放在函数中，它工作正常，因为现在函数可以访问它们。

我的问题是我怎样才能访问函数之外的变量？我尝试创建一个对象，但在 onClick 事件中引用对象内部的正确函数时遇到问题，我尝试了“objectName.functionInsideTheObject();”。结果是没用。

我怎样才能使这项工作？将为其他计算添加新函数，并且一直复制粘贴变量很乏味。

**编辑：**

我的问题与变量声明中的“.value”有关。如果我这样声明一个变量：

```
var int1 = document.getElementById("int1");  // Not getting the value directly
var int2 = document.getElementById("int2"); 
```

然后像这样引用函数内部变量的值：

```
function sumOf() {
  result.innerHTML = parseFloat(int1.value) + parseFloat(int2.value);
} 
```

它工作正常。我不知道为什么 .value 在全球范围内不起作用。仍然不完美，但不那么乏味。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:34:34.743

I believe that if you create it like this:

```
int1 = document.getElementById("int1").value; 
```

without the var it's then a global.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:37:57.230

您声明变量的方式是正确的。

这些变量是 NaN ，因为您再次将它们填充为函数中的参数

```
function sumOf(int1, int2) {
  result.innerHTML = parseFloat(int1) + parseFloat(int2);
} 
```

你应该像这样调用函数

```
function sumOf() {
  result.innerHTML = parseFloat(int1) + parseFloat(int2);
} 
```

但我认为如果你声明你的函数会更好

```
function sumOf() {
  var int1 = document.getElementById("int1").value;
  var int1 = document.getElementById("int2").value;
  var result = document.getElementById("result");

  result.innerHTML = parseFloat(int1) + parseFloat(int2);
} 
```

# php - 注意：未定义变量：单击

> ID：13741714
> 
> 赞同：-8
> 
> 时间：2012-12-06T10:32:45.630
> 
> 标签：php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:37:31.800

请确保您已在代码行上方声明了变量*$click 。*此错误表示未定义变量。

为避免出现此错误，您可以使用：

```
< li class="outer one [php] if(isset($click)) echo $click; [php]"> 
```

# android - java.lang.NullPointerException: lock == null while get json file from server

> ID：13741721
> 
> 赞同：1
> 
> 时间：2012-12-06T10:33:11.157
> 
> 标签：android, httpclient

我收到以下错误。java.lang.NullPointerException: lock == null while get json file from server.I google但找不到任何解决方案。

**我的代码：**

```
try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            Log.i("clock", httpPost.getURI().toString());
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            Log.i("Buffer", "1");
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            Log.i("Buffer", "2");
            StringBuilder sb = new StringBuilder();
            Log.i("Buffer", "3");
            String line = null;
            Log.i("Buffer", "4");
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            Log.i("Buffer", "5");
            json = sb.toString();
            Log.i("Buffer", "6->"+json);
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result-> " + e.toString());
        } 
```

**日志猫：**

![在此处输入图像描述](../Images/4bc610ad637e180ea6d1d52a67b19848.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:45:29.073

您应该在任何时候使用它之前检查`instance/ java object`它`not null`。

例如。

```
if( httpResponse != null){
    //todo your work here with "httpResponse "
} 
```

和

```
if(is !=null){
   //todo your work here with "is"
} 
```

* * *

**如果我要与服务器通信，这是代码示例**

```
// this method takes URL as input and returns JSON data 
//parent class name is "NewWebHelper.java"

public String getResult(String url) {

        Log.v(TAG, "Final Requsting URL is : :"+url);

        String line = "";
        String responseJsonData = null;

        try {
            StringBuilder sb = new StringBuilder();
            String x = "";
            URL httpurl = new URL(url);
            URLConnection  tc= httpurl.openConnection();   

            BufferedReader in = new BufferedReader(
                              new InputStreamReader(tc.getInputStream()));

            if(in !=null){
                while ((line = in.readLine()) != null) {
                sb.append(line + "\n");
                x = sb.toString();
            }
            responseJsonData = new String(x);

            }
        }
        catch (UnknownHostException uh){            
            Log.v("NewWebHelper", "Unknown host :");
            uh.printStackTrace();
        }
       catch (FileNotFoundException e) {
           Log.v("NewWebHelper", "FileNotFoundException :");
            e.printStackTrace();
         }
        catch (IOException e) {
            Log.v("NewWebHelper", "IOException :");
            e.printStackTrace();
        }
      catch (Exception e) {
          Log.v("NewWebHelper", "Exception :");
            e.printStackTrace();
        }
        return responseJsonData;
    } 
```

* * *

让我知道您是否在重新评分时遇到任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:00:20.790

例如：

```
 JSONObject jRoot = new JSONObject(json);
        if (!jRoot.isNull("response")) {

            JSONObject jChat = jRoot.getJSONObject("response");

            if (!jChat.isNull("type")) {
                ch.setType(jChat.getString("type"));
            } 
```

使用功能`isNull`或使用条件`if (is != null)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-13T10:51:56.227

您只需要在 Manifests 中授予 Internet 访问权限。

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

为我工作...

# php - in_array 不工作爆炸

> ID：13741723
> 
> 赞同：0
> 
> 时间：2012-12-06T10:33:23.830
> 
> 标签：php

![在此处输入图像描述](../Images/31a650945c184ee749091636baa53d9a.png)

我无法弄清楚为什么当 ip 地址在数组中时我的状况不起作用。为什么条件失败，如图所示

```
<?php $valid_ip_list = explode(',',$this->valid_ips);
           echo $client_ip = $_SERVER['REMOTE_ADDR'];
           print('<pre>');
           print_r($valid_ip_list);
            if(in_array($client_ip ,$valid_ip_list))
                {
                    echo 'I am here';
                }
           else
                {
                    echo 'Condition fail';
                }
?> 
```

问题在以下帮助下解决`array_map('trim', explode(',', $valid_ips))`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:39:03.547

这应该有帮助

```
$valid_ips = '192.100.100.61,192.100.100.2,127.0.0.1';

// authorized
if (in_array($_SERVER['REMOTE_ADDR'], array_map("trim", explode(',', $valid_ips)))) {
    //... 
}

// unauthorized
else {
    //...
} 
```

# oracle - How to fetch records according to SYSTIMESTAMP using Hibernate/Oracle11g

> ID：13741729
> 
> 赞同：0
> 
> 时间：2012-12-06T10:33:53.290
> 
> 标签：oracle, hibernate, jpa, oracle11g

I have a field named end_time (of type timestamp(6)) in my Oracle 11g DB. My requirement is to fetch records which are greater than current time stamp.As I work with remote DB, I need the current time of my oracle database server.

After some research I came to know that **SYSTIMESTAMP** returns current time stamp of machine where DB resides.

So I just put a condition like end_time > SYSTIMESTAMP, but it does not filter records. My end-time is of type timestamp(6).

Do I have to use any conversion function? How can I do it from Hibernate? Any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:11:42.687

您能否进一步解释“不过滤记录”，结果中的行太多还是太少？

你的情况看起来绝对没问题：

```
CREATE TABLE mytable (ts TIMESTAMP(6));
INSERT INTO mytable (ts) VALUES (TIMESTAMP '2012-12-06 17:00:00');
INSERT INTO mytable (ts) VALUES (TIMESTAMP '2012-12-06 18:00:00');

SELECT SYSTIMESTAMP FROM DUAL;
 06.12.2012 17:10:38.347629000 +01:00

SELECT * FROM mytable WHERE ts > SYSTIMESTAMP;
06.12.2012 18:00:00.000000000

SELECT * FROM mytable WHERE ts < SYSTIMESTAMP;
06.12.2012 17:00:00.000000000 
```

# xslt - Creating new node based on detection of child node

> ID：13741732
> 
> 赞同：2
> 
> 时间：2012-12-06T10:33:53.903
> 
> 标签：xslt

The feedback from my previous post worked a charm but I have encountered the following with some of the documents on our system. The output is as below.

```
<par def='1'>
   <run>This is start of line one para one </run>
   <run>text hotspot 1</run>
   <run> remainder of line one<break/></run>

   <run>This is line 2 </run>
   <run>another hotspot </run>
   <run>remainder of line 2 <break/></run>
 </par> 
```

Is it possible to generate the following output using XSLT?

```
<document>
   <para>This is start of line one para one text hotspot 1 remainder of line one</para>

   <para>This is line 2 another hotspot remainder of line 2</para>
</document> 
```

ie, the `<break/>` node indicates the end of a sentence but a sentence may run over several `<run>` nodes.

In case anyone is wondering, the source data is generated from Lotus Notes in it's DXL schema format.

I have been using a 3rd party tool to generate my XSLT to date, I'm happy to provide the code but it's not very clean.

Thank you again in advance, becoming a huge fan of this forum.

Dono

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:09:59.360

那这个呢？它只会为 a 中的第一个元素创建新`<para>`元素，并且如果前一个元素中有 a在其中。`<run>``<par>``<par>``<break>`

```
<xsl:template match="par">
  <xsl:for-each select="run[preceding-sibling::run[1]/break or not(preceding-sibling::run)]">
    <para>
      <xsl:apply-templates select="."/>
    </para>
  </xsl:for-each>
</xsl:template>

<xsl:template match="run">
  <xsl:value-of select="."/>
  <xsl:if test="not(break)">
    <xsl:apply-templates select="following-sibling::run[1]"/>
  </xsl:if>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:47:46.863

虽然不是一种可取的方法，但它可以按照您的方式工作..

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

  <xsl:template match="par">
    <document>
      <para>
        <xsl:apply-templates select="node()"/>
      </para>
    </document>
  </xsl:template>

  <xsl:template match="run">
    <xsl:value-of select="."/>
    <xsl:apply-templates select="break"/>
  </xsl:template>

  <xsl:template match="break">
    <xsl:value-of select="'&#60;/para&#62;'" disable-output-escaping="yes"/>
    <xsl:value-of select="'&#60;para&#62;'" disable-output-escaping="yes"/>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:33:48.250

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kPreceding" match="run"
      use="generate-id((following::break|descendant::break)[1])"/>

 <xsl:template match="par">
     <document>
      <xsl:apply-templates select="run/break"/>
     </document>
 </xsl:template>

 <xsl:template match="break">
  <para><xsl:apply-templates select="key('kPreceding', generate-id())/text()"/></para>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<par def='1'>
    <run>This is start of line one para one </run>
    <run>text hotspot 1</run>
    <run> remainder of line one<break/></run>

    <run>This is line 2 </run>
    <run>another hotspot </run>
    <run>remainder of line 2<break/></run>
</par> 
```

**产生想要的正确结果：**

```
<document>
   <para>This is start of line one para one text hotspot 1 remainder of line one</para>
   <para>This is line 2 another hotspot remainder of line 2</para>
</document> 
```

**说明**：

这是一个典型的 XSLT 1.0 位置分组解决方案。我们使用一个键来表达一个元素与其标识为一个组`break`的所有元素之间的关系。`run`

# javascript - 在函数之后调用 JQuery.bind()

> ID：13741733
> 
> 赞同：0
> 
> 时间：2012-12-06T10:33:55.083
> 
> 标签：javascript, jquery

我有一段代码运行良好，但我无法理解它背后的想法，因此感谢您的帮助。

在下面的函数中，**`bind(this)`**函数在代码末尾做了什么？我已经搜索了很多 SO 和 JQuery 文档，但找不到任何这样的用法。try 将函数连接到事件的所有用法，`bind()`但这里 bind 在函数之后调用并传递一个 JQuery 对象（在这种情况下是一个 img 标记）。提前致谢。

```
function refreshCaptcha() {
    var currCaptcha = $('#captcha-div img');

    currCaptcha.animate({
        opacity: 0.3
    }, 300);

    $.getJSON("/captcha.json", function (data) {
        var src = $("#captcha-template").html();
        var template = Handlebars.compile(src);
        var newSrc = template(data);
        var srcDom = $(newSrc);

        srcDom.eq(0).css('opacity', 0).load(function() {

            currCaptcha.animate({
                opacity: 0
            }, 250, function() {
                $("#captcha-div").html(srcDom);

                $(this).animate({
                    opacity: 1
                }, 250);

            }.bind(this));
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:37:48.197

`bind`创建一个新函数，该函数在调用时将其`this`值设置为传递的第一个参数。因此，在这种情况下，`animate`回调将在调用时将其上下文设置为`srcDom.eq(0)`。

```
 srcDom.eq(0).css('opacity', 0).load(function() {

        // In here, the value of "this" is srcDom.eq(0)

        currCaptcha.animate({
            opacity: 0
        }, 250, function() {
            $("#captcha-div").html(srcDom);

            $(this).animate({
                opacity: 1
            }, 250);

        }.bind(this)); /*When that callback is invoked, all 
                         occurrences of "this" inside it will refer 
                         to srcDom.eq(0)*/

    }); 
```

更多关于[这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

# svn - How to combine working copies in SVN 1.7?

> ID：13741736
> 
> 赞同：2
> 
> 时间：2012-12-06T10:34:02.443
> 
> 标签：svn, tortoisesvn, working-copy

I have several huge subdirectories of svn repository checked out on my computer, and I want to reorganize into one sparse working copy of the whole repository trunk.

*   working_copies
    *   trunk (checked out with --depth=immediates, )
        *   doc (empty)
        *   test_data (empty)
        *   project1 (empty)
        *   project2 (empty)
    *   test_data (checkout of trunk/test_data)
    *   project1 (checkout of trunk/project1)

Is it possible to do so without checking out everything (several Gb data from a very remote server) ?

Before version 1.6, it was possible to replace .svn subdirectories of a sparse working copy with full ones, since the information was local.

In SVN 1.7, there is only one database at the root of each working copy, and I see no way to manipulate it without connecting to the server. Are there any tools that can help organize working copies without re-downloading them?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:47:55.783

如果您只是想组织文件结构，我建议您使用`Repo Browser`命令，使用`Repo Browser`窗口移动文件并将新的目录组织模仿到本地副本中。

如果一切正常，TortoiseSVN 将只重新组合 .svn 头文件而不下载文件。否则，Tortoise 将下载所有丢失的文件。请注意使用明确定义的步骤远程和本地组织文件夹。

# c# - 如果我正在实现 IEquatable 是否需要覆盖 Equals ?

> ID：13741737
> 
> 赞同：7
> 
> 时间：2012-12-06T10:34:04.573
> 
> 标签：c#, generics, equality, iequatable

我知道在实现自定义相等检查时覆盖的重要性`GetHashCode`——我已经实现了接口，以及[这里讨论](https://stackoverflow.com/questions/2476793/when-to-use-iequatable-and-why)`IEquality<T>`的泛型和非泛型之间的区别。现在有需要覆盖的地方吗？一切都不是通用的吗？`Equals` `Equals(object t)``Equals(T t)`

```
public override int GetHashCode() //required for hashsets and dictionaries
{
    return Id;
}

public bool Equals(T other) //IEquatable<T> here
{
    return Id == other.Id;
}

public override bool Equals(object obj) //required??
{
    return Equals(obj as T);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T19:47:49.573

未密封的类型不应该实现`IEquatable<T>`，因为确保（甚至可能）派生类型正确实现它的唯一方法是实现`IEquatable<T>.Equals(T)`以调用`Object.Equals(Object)`. 由于 的全部目的`IEquatable<T>`是避免`Object`在比较它们之前浪费 CPU 时间来转换事物，因此调用的实现`Object.Equals(Object)`无法比未实现接口时实现的默认行为更快地执行任何操作。

密封类类型可以通过实现来获得轻微的性能优势`IEquatable<T>`；首选样式是`Object.Equals(Object)`尝试将参数转换为`T`; 如果转换成功，则使用`IEquatable<T>.Equals`实现；否则返回`false`。在传递相同的对象实例时，在任何情况下都不应产生不同的`IEquatable.Equals(T)`结果。`Object.Equals(Object)`

结构类型可以使用与密封类类型相同的模式。尝试转换的方法有点不同，因为失败的转换不能返回`null`，但模式应该仍然相同。如果一个结构实现了一个变异接口（例如`List<T>.Enumerator`，一个实现 的结构`IEnumerator<T>`），相等比较的正确行为有点模糊。

请注意，顺便说一句，`IComparable<T>`应该`IEquatable<T>`被认为是相互独立的。虽然经常会出现 when `X.CompareTo(Y)`is 0`X.Equals(Y)`会返回 true 的情况，但某些类型可能具有自然排序，其中两个事物可能不同，而没有一个关于另一个事物的排名。例如，一个人可能有一种`NamedThing<T>`结合了 a`string`和 a的类型`T`。这种类型将支持 name 的自然排序，但不一定支持`T`. 两个名称匹配但`T`不同的实例应该返回`0`for `CompareTo`，但是`false`for `Equals`。因此，如果未更改，则覆盖`IComparable`不需要覆盖。`GetHashCode``Equals`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T10:35:46.777

您当然*应该*覆盖`Equals(object t)`- 否则在使用该重载时您可能会得到不正确的结果。您不能假设 the`Equals(T other)`是将被调用的重载。

如果您不覆盖它，将使用引用相等，这意味着类似以下内容将返回 false：

```
myObject1.Id = 1;
myObject2.Id = 1;

myObject1.Equals((object)myObject2); // false! 
```

另一个可能的问题是继承类——如果你将你的类型与*继承*类型进行比较，这很容易失败。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T10:51:35.500

来自[msdn](http://msdn.microsoft.com/en-us/library/ms131187.aspx)：

> 如果您实现 IEquatable，您还应该重写 Object.Equals(Object) 和 GetHashCode 的基类实现，以便它们的行为与 IEquatable.Equals 方法的行为一致。如果您确实重写了 Object.Equals(Object)，那么在调用类上的静态 Equals(System.Object, System.Object) 方法时也会调用您重写的实现。此外，您应该重载 op_Equality 和 op_Inequality 运算符。这可确保所有相等性测试返回一致的结果。

我也可以做一个更好的谷歌搜索。这是[JaredPar 在 msdn 博客](http://blogs.msdn.com/b/jaredpar/archive/2009/01/15/if-you-implement-iequatable-t-you-still-must-override-object-s-equals-and-gethashcode.aspx)上关于该主题的一篇好文章。

简而言之，压倒一切`Equals(object obj)`：

> *对象*类上的静态*Equals(object obj1, object obj2)*方法或*ArrayList*实例上的 Contains(object item) 等需要*。*

 ***接受这一点，因为该链接在该主题上更加详尽。也感谢奥德..***

# java - How can I know how many queries are fired in my database?

> ID：13741740
> 
> 赞同：2
> 
> 时间：2012-12-06T10:34:17.367
> 
> 标签：java, mysql, sql

I have an `employee management` application. I am using a MySQL database.

In my application, I have functionality like `add /edit/delete /view`.

Whenever I run any functionality, one query is fired in the database. Like in add employee, it will fire the `insert` query.

So I want to do something on my database, so that I see how many queries have been fired till date.

I don't want to do any changes on my Java code.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:39:14.327

您可以使用[`SHOW STATUS`](http://dev.mysql.com/doc/en/show-status.html)：

```
SHOW GLOBAL STATUS LIKE 'Questions' 
```

如[服务器状态变量](http://dev.mysql.com/doc/en/server-status-variables.html)中所述：

> 状态变量具有以下含义。
> 
> `[ deletia ]`
> 
> *   [`Questions`](http://dev.mysql.com/doc/en/server-status-variables.html#statvar_Questions)
>     
>     
>     
>     服务器执行的语句数。`Queries`与变量不同，这仅包括客户端发送到服务器的语句，而不包括在存储程序中执行的语句。此变量不计算`COM_PING`、`COM_STATISTICS`、`COM_STMT_PREPARE`、`COM_STMT_CLOSE`或`COM_STMT_RESET`命令。

请注意：

*   发布时会重置统计信息[`FLUSH STATUS`](http://dev.mysql.com/doc/en/flush.html)。

*   该`SHOW STATUS`命令本身就是一个语句，并将增加`Questions`计数器。

*   这些统计信息是服务器范围的，因此将包括同一服务器上的其他数据库（如果有的话）——自 2006 年 1 月以来[，每个数据库统计信息的功能请求](http://bugs.mysql.com/bug.php?id=16524)已开放；[同时，可以从google-mysql-tools/UserTableMonitoring](http://code.google.com/p/google-mysql-tools/wiki/UserTableMonitoring)获取每个表的统计信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T10:05:52.747

您应该执行如下所述的查询：

1.  要获取 SELECT 查询计数，请执行`Show global status like 'com_select';`

2.  要获取 UPDATE 查询计数，请执行`Show global status like 'com_update';`

3.  要获取 DELETE 查询计数，请执行`Show global status like 'com_delete';`

4.  要获取 INSERT 查询计数，请执行`Show global status like 'com_insert';`

您还可以分析一般日志或通过 MySQL 代理路由您的应用程序，以在服务器上执行所有查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:08:59.947

如果您不想修改代码，则可以使用触发器在数据库上进行跟踪。限制是触发器只能在插入/更新/删除时触发，因此不能用于计算读取（选择）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:15:16.743

也许你的问题太“企业”和“生产”了。

当您使用 munin (http://munin-monitoring.org/)（其他监控工具有类似的扩展）时，您可以使用 mysql-monitoring 工具来显示有多少请求（在 Insert/Update/Loaddata/.. .) 你开火了。

使用这些工具，您可以查看使用情况和产生的负载。尤其是当数据发生变化时，可能会导致更多的访问/加载（缺少索引，由于 m:n 表大而导致的更多查询，...），您可以识别它。

它非常方便，您可以在休息时进行检查。无需打字，无需任何操作，只需查看图表即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T11:23:57.587

我认为最准确的方法是配置数据库管理系统以记录所有事件，无需修改数据库或应用程序即可运行。

您会留下一个日志文件，这是一个可以按需分析的文本文件。

这是帮助您入门[的通用查询日志手册页。](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)

# php - 在实体内创建和持久化新实体实例

> ID：13741746
> 
> 赞同：1
> 
> 时间：2012-12-06T10:34:36.943
> 
> 标签：php, orm, doctrine-orm

我有一个实体需要返回另一个实体的实例 - 存储的记录或新的记录（如果尚未存储）。

```
<?php

/**
 * @Entity
 */
class User {
    /**
     * @OneToOne(targetEntity="Basket")
     * @JoinColumn(nullable=true)
     */
    protected $activeBasket;

    public function getActiveBasket() {
        if (!isset($this->activeBasket)) {
            $this->activeBasket = new Basket($this);
            // $em->persist($this->activeBasket);
            // $em->flush();
        }
        return $this->activeBasket;
    }
} 
```

我的问题是我没有一个 EntityManager 来保存这个新的篮子（显然不希望模型中有一个）。我不确定执行此操作的最佳方法。我确实希望能够调用`$user->getActiveBasket()`和检索一个篮子，无论它是以前创建的还是新的。

感觉这应该是一个常见问题，或者有更好的方法来构建它（我希望有一种方法可以将一个连接到 EntityRepository 或其他东西中）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:13:42.127

`new Basket()`当它为空或未设置时，我不会返回。模型（实体）应仅用于设置和获取其属性。

返回 null时的逻辑`$user->getActiveBasket()`应该在其他地方 - 在控制器或实体的存储库对象中......

所以我会`public function getActiveBasket() { ... }`进入`public function getActiveBasket() { return $this->activeBasket; }`我会做的控制器中的某个地方：

```
$if(!$user->getActiveBasket()) {
    $user->setActiveBasket(new Basket($user));
    $this->_em->persist($user);
    $this->_em->flush();
}
// now do something with that activeBasket... 
```

# asp.net - Can not access control from nested master page in content page

> ID：13741747
> 
> 赞同：1
> 
> 时间：2012-12-06T10:34:37.403
> 
> 标签：asp.net, master-pages, master

I am using nested master pages where i want to use `Label` control from nested master page and update its text. but it is not accessing. When i removed outer master page then it is working fine. Following is the markup and code.

**OUTER MASTER**

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="Roster.Site" %> 
```

**NESTED MASTER**

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="RoasterMaster.master.cs" Inherits="Roster.RoasterMaster"  MasterPageFile="~/Site.Master" %>
<%@ MasterType VirtualPath ="~/Site.Master" %> 
```

**CONTENT PAGE**

```
<%@ Page Language="C#" AutoEventWireup="true" Inherits="RequestsView" CodeBehind="ViewRequestsByPM.aspx.cs" MasterPageFile ="~/Roaster/RoasterMaster.Master" Title ="Roaster- View Requests by PM" %>
<%@ MasterType VirtualPath ="~/Roaster/RoasterMaster.Master" %> 
```

**CONTENT PAGE CODE**

```
protected void Page_Load(object sender, EventArgs e)
{

    Label lblTitle = new Label();

    lblTitle =(Label)Master.FindControl("lblTitle");
    lblTitle.Text = "View Roaster Request";
} 
```

What is going wrong with the implementation. Please help. Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:46:26.660

您可以添加以下代码片段

嵌套母版页

```
public string PageTitle { get; set; } // In page_load
lblTitle.Text = PageTitle; 
```

内容页码

```
this.Master.PageTitle = "YOUR TEXT"; 
```

这将为您工作...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:51:30.467

假设您的标签在名册母版页中，您可以简单地在母版页代码后面添加方法来设置文本。例如，

在*RoasterMaster.master.cs*

```
public void SetTitle(string value)
{
   this.lblTitle = value;
} 
```

并在内容页面代码中

```
Master.SetTitle("View Roaster Request"); 
```

如果您的标签在外部主机中，那么您可以类似地将呼叫从名册主机代码转发到外部主机。

**编辑**
您的代码在嵌套的主案例场景中不起作用，因为主页面内容被添加到具有不同命名容器的页面控件层次结构中。`FindControl`方法不跨越多个命名容器，这里就是这种情况 - 因为嵌套你有嵌套的命名容器。`Page.Master`会给你外部命名容器，但你的标签可能位于内部命名容器中。一种方法是编写您自己的查找控件实现，该实现将在控件树中重复出现，但实际上它没有意义——我宁愿使用上面更有效且更重要的是可维护性更好的代码。

# image - couldn't find a way to load a 960x624 image on j2me netbeans emulator

> ID：13741749
> 
> 赞同：1
> 
> 时间：2012-12-06T10:34:50.547
> 
> 标签：image, netbeans, java-me, midp, lcdui

How to show a full 960x624 image using j2me canvas?

I wouldn't mind to scroll but I don't want it resized.

```
{image = Image.createImage("/earth.png");}
{g.drawImage(image, width, height, Graphics.BOTTOM | Graphics.RIGHT);} 
```

doesn't serve the purpose. I want to know if I have any option to get both the horizontal and vertical scroll bars without actually creating them to view the whole image?

The image size should be same as I don't want the TEXT on the image become unreadable.

# java - 使用 Java 修改文件的内容

> ID：13741751
> 
> 赞同：14
> 
> 时间：2012-12-06T10:34:55.410
> 
> 标签：java, file-io, io, filereader, filewriter

我想使用下面的 java 程序删除文件的一些内容。这是要在同一个文件中替换的写入方法还是应该将其复制到另一个文件中。

但它删除了文件的所有内容。

```
class FileReplace
{
    ArrayList<String> lines = new ArrayList<String>();
    String line = null;
    public void  doIt()
    {
        try
        {
            File f1 = new File("d:/new folder/t1.htm");
            FileReader fr = new FileReader(f1);
            BufferedReader br = new BufferedReader(fr);
            while (line = br.readLine() != null)
            {
                if (line.contains("java"))
                    line = line.replace("java", " ");
                lines.add(line);
            }
            FileWriter fw = new FileWriter(f1);
            BufferedWriter out = new BufferedWriter(fw);
            out.write(lines.toString());
        }
        catch (Exception ex)
        {
            ex.printStackTrace();
        }
    }
    public statc void main(String args[])
    {
        FileReplace fr = new FileReplace();
        fr.doIt();
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-06T10:45:52.347

我将从关闭阅读器和刷新作者开始：

```
public class FileReplace {
    List<String> lines = new ArrayList<String>();
    String line = null;

    public void  doIt() {
        try {
            File f1 = new File("d:/new folder/t1.htm");
            FileReader fr = new FileReader(f1);
            BufferedReader br = new BufferedReader(fr);
            while ((line = br.readLine()) != null) {
                if (line.contains("java"))
                    line = line.replace("java", " ");
                lines.add(line);
            }
            fr.close();
            br.close();

            FileWriter fw = new FileWriter(f1);
            BufferedWriter out = new BufferedWriter(fw);
            for(String s : lines)
                 out.write(s);
            out.flush();
            out.close();
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    public static void main(String args[]) {
        FileReplace fr = new FileReplace();
        fr.doIt();
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-08-07T07:45:07.693

接受的答案很棒。但是，有一种更简单的方法可以使用 Apache 的`commons-io`库替换文件中的内容（`commons-io-2.4.jar`- 您可以使用任何最新版本）

```
private void update() throws IOException{
        File file = new File("myPath/myFile.txt");
        String fileContext = FileUtils.readFileToString(file);
        fileContext = fileContext.replaceAll("_PLACEHOLDER_", "VALUE-TO-BE-REPLACED");
        FileUtils.write(file, fileContext);
 } 
```

**注意：**`IOException`应用程序需要捕获并相应地处理抛出的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T10:41:36.137

不能同时读取 + 写入同一个文件。

编辑：改写并更正确和具体 - 在同一个线程中读取和写入同一个文件，没有正确关闭阅读器（并冲洗作者）是不行的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-06T10:39:47.773

确保：

*   `close`当您不再需要它们时的任何流
*   特别是*在*重新打开它进行写作之前。
*   `truncate`该文件，以确保如果您写入的内容少于它，它会缩小。
*   然后写输出
*   写单独的行，不要依赖`toString`.
*   `flush``close`当你写完！

如果使用*缓冲*IO，则始终必须确保缓冲区在最后刷新，否则可能会丢失数据！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T10:45:32.197

我可以看到三个问题。

首先，您要写入的`out`内容是 System.out，而不是文件的输出流。

其次，如果您确实将输出流写入文件，则需要关闭它。

第三，`toString()`an 上的方法`ArrayList`不会像您期望的那样写入文件。循环遍历列表并一次写`String`一个。问问自己是否也需要写换行符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-14T10:51:54.250

接受的答案略有错误。这是正确的代码。

```
 public class FileReplace {
List<String> lines = new ArrayList<String>();
String line = null;

public void  doIt() {
    try {
        File f1 = new File("d:/new folder/t1.htm");
        FileReader fr = new FileReader(f1);
        BufferedReader br = new BufferedReader(fr);
        while ((line = br.readLine()) != null) {
            if (line.contains("java"))
                line = line.replace("java", " ");
            lines.add(line);
        }
        fr.close();
        br.close();

        FileWriter fw = new FileWriter(f1);
        BufferedWriter out = new BufferedWriter(fw);
        for(String s : lines)
             out.write(s);
        out.flush();
                } 
        out.close();
   catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

# java - 为什么这个 xslt 转换会替换所有出现的事件？

> ID：13741761
> 
> 赞同：0
> 
> 时间：2012-12-06T10:35:34.583
> 
> 标签：java, xml, xslt-2.0

使用[http://xslt.online-toolz.com/tools/xslt-transformation.php](http://xslt.online-toolz.com/tools/xslt-transformation.php)

.xml

```
<?xml version="1.0"?>
<my:project xmlns:my="http://myns">
<my:properties>
 <my:property>
  <my:name>customerId</my:name>
  <my:value>1</my:value>
 </my:property>
 <my:property>
  <my:name>userId</my:name>
  <my:value>20</my:value>
 </my:property>
</my:properties>
</my:project> 
```

我现在想查找名称`customerId`并想替换`value`.

它几乎可以工作，但它替换了文档中的所有值。我做错了什么只是替换名称匹配的值？

.xsl

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="http://myns" xmlns:saxon="http://saxon.sf.net"> 

 <xsl:param name="name" select="'customerId'"/>
 <xsl:param name="value" select="'0'"/>

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
 </xsl:template>

 <xsl:template match="/*/my:properties/my:property/my:value/text()" > 
   <xsl:choose>
     <xsl:when test="/*/my:properties/my:property/my:name = $name">
        <xsl:value-of select="$value"/>
     </xsl:when>
     <xsl:otherwise><xsl:copy-of select="saxon:parse(.)" /></xsl:otherwise>
   </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:07:58.827

测试`/*/my:properties/my:property/my:name = $name`总是成功，因为它使用绝对路径，因此结果与周围的模板上下文无关。使用相对 xpath 的测试应该可以工作。

XSL：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:my="http://myns" xmlns:saxon="http://saxon.sf.net"> 

    <xsl:param name="name" select="'customerId'"/>
    <xsl:param name="value" select="'0'"/>

    <xsl:template match="node() | @*">
        <xsl:copy>
            <xsl:apply-templates select="node() | @*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/*/my:properties/my:property/my:value/text()" > 
        <xsl:choose>
            <xsl:when test="../../my:name = $name">
                <xsl:value-of select="$value"/>
            </xsl:when>
            <xsl:otherwise>otherwise</xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

XML:

```
<my:project xmlns:my="http://myns">
    <my:properties>
        <my:property>
            <my:name>customerId</my:name>
            <my:value>1</my:value>
        </my:property>
        <my:property>
            <my:name>userId</my:name>
            <my:value>20</my:value>
        </my:property>
    </my:properties>
</my:project> 
```

的结果`saxonb-xslt -s:test.xml -xsl:test.xsl`

```
<my:project xmlns:my="http://myns">
    <my:properties>
        <my:property>
            <my:name>customerId</my:name>
            <my:value>0</my:value>
        </my:property>
        <my:property>
            <my:name>userId</my:name>
            <my:value>otherwise</my:value>
        </my:property>
    </my:properties>
</my:project> 
```

# excel - 定义具有两组值的变量

> ID：13741765
> 
> 赞同：1
> 
> 时间：2012-12-06T10:35:46.530
> 
> 标签：excel, vba

我想用两组值定义我的变量。例如，

```
Dim i as integer
For i = 92 to 97 and 104 to 109 
```

你能解释一下正确的方法吗？这是我所拥有的 -

```
Dim k As Integer
For k = 92 To 97

If Range("A" & k).Text = "#NUM!" Then

Range("A" & k).Select
Selection.ClearContents

Range("I" & k).Select
Selection.ClearContents

Range("J" & k).Select
Selection.ClearContents

End If

Next k

Dim j As Integer
For j = 104 To 109

If Range("A" & k).Text = "#NUM!" Then

Range("A" & j).Select
Selection.ClearContents

Range("I" & j).Select
Selection.ClearContents

Range("J" & j).Select
Selection.ClearContents

End If

Next j 
```

我想组合变量k和j。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:12:07.240

```
Dim k As Integer
For k = 92 To 109
    If Range("A" & k).Text = "#NUM!" and (k <= 97 or k >= 104) Then
        Range("A" & k).ClearContents
        Range("I" & k).ClearContents
        Range("J" & k).ClearContents
    End If
Next k 
```

在我看来，这似乎是合乎逻辑的方式。我还清理了所有这些选择。它们是不必要的，而且会给你带来更多的麻烦。

# android - Android 通知 speedy_c2dm

> ID：13741766
> 
> 赞同：2
> 
> 时间：2012-12-06T10:36:02.910
> 
> 标签：android, ruby-on-rails

第一次从 Rails 服务器发送 android Push 消息的用户。使用[https://github.com/sghael/speedy_c2dm](https://github.com/sghael/speedy_c2dm) 已经在 Google 注册了我的项目，并且项目 ID 获得了 Android 设备的 Registration_ID。现在，尝试下面的 test.rb，但没有任何东西发送到手机。

```
require 'rubygems'
require 'bundler'
Bundler.setup(:default, :development)
$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
$LOAD_PATH.unshift(File.dirname(__FILE__))
require 'speedy_c2dm'

TEST_EMAIL = "my_push_email@gmail.com"
TEST_PASSWORD = "MY_PASSWORD"
TEST_REGISTRATION_ID = "DEVICE_TOKEN_RECEIVED_FROM_PHONE"

speedyC2DM = SpeedyC2DM::API.new(TEST_EMAIL, TEST_PASSWORD)

options = {
  :registration_id => TEST_REGISTRATION_ID,
  :message => "Hi!",
  :extra_data => 42,
  :collapse_key => "some-collapse-key"
}

response = speedyC2DM.send_notification(options) 
```

任何建议..如果我遗漏了什么..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:54:10.603

`speedy_c2dm 1.0.2`

> AFAIK **Speedy C2DM 通过 google c2dm 有效地将推送通知发送到 Android 设备。**

但是正如 [文档](https://developers.google.com/android/c2dm/)所说，您应该使用**`GCM`**代替。

> **重要提示：** C2DM 已于 2012 年 6 月 26 日正式弃用。这意味着 C2DM 已停止接受新用户和配额请求。不会向 C2DM 添加任何新功能。但是，使用 C2DM 的应用程序将继续工作。鼓励现有 C2DM 开发人员迁移到新版本的 C2DM，称为[Android 版 Google Cloud Messaging (GCM)](http://developer.android.com/google/gcm/index.html)。有关更多信息，请参阅 C2DM 到 GCM[迁移](http://developer.android.com/google/gcm/c2dm.html)文档。开发人员必须使用 GCM 进行新的开发。

# android - Android 仅在两个活动之间共享套接字变量（“服务”帮助）

> ID：13741770
> 
> 赞同：1
> 
> 时间：2012-12-06T10:36:12.733
> 
> 标签：android, sockets, android-activity, android-service

我想这太基本了，据我搜索，我找不到任何相关问题。

我有一个创建套接字的活动。我还有三个活动可以读/写到同一个套接字。但是我必须在每个活动中获取套接字。据我搜索，“服务”是最好的选择，但当我通读它时，我认为它更多的是数据的后台处理，而不是只存储变量以供以后使用。你能告诉我如何前进吗？

我有 classA ：创建套接字。classB ：写入套接字。calssC ：从套接字读取。

我最初的想法是在 B 和 C 中创建一个 classA 的 obj，但我认为它不会起作用。有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:45:51.917

您可以使用[Application 类](http://developer.android.com/reference/android/app/Application.html)而不是创建 Activity 类的实例来在您自己的应用程序的不同组件或活动、服务之间共享字段或行为

请参阅以下教程以使用 Application 类在不同组件之间共享数据：

[http://www.helloandroid.com/tutorials/maintaining-global-application-state](http://www.helloandroid.com/tutorials/maintaining-global-application-state)

[http://www.xoriant.com/blog/mobile-application-development/android-application-class.html](http://www.xoriant.com/blog/mobile-application-development/android-application-class.html)

[http://www.intridea.com/blog/2011/5/24/how-to-use-application-object-of-android#](http://www.intridea.com/blog/2011/5/24/how-to-use-application-object-of-android#)

# .net - Skip() vs Skipwhile() in Linq

> ID：13741771
> 
> 赞同：-1
> 
> 时间：2012-12-06T10:36:17.310
> 
> 标签：.net, linq

What is the difference between Skip() and SkipWhile() extension methods in Linq?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T10:40:05.473

Skip 指定要跳过的项目数。

```
 myList.Skip(10) 
```

SkipWhile 允许您提供谓词函数来确定要跳过的数量。

```
myList.SkipWhile(x => x.Age < 18) 
```

`Skip`文档：http: [//msdn.microsoft.com/en-us/library/bb358985.aspx](http://msdn.microsoft.com/en-us/library/bb358985.aspx)

`SkipWhile`文档：http: [//msdn.microsoft.com/en-us/library/bb549075.aspx](http://msdn.microsoft.com/en-us/library/bb549075.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T10:41:26.887

**跳过**

`Skip()`将接受一个整数参数并跳过给定的前 n 个数字`IEnumerable`

*例子*

```
yourlist.Skip(5) 
```

上面的代码行将跳过`5`任何集合中从顶部开始的行

**跳过时**

`SkipWhile()`只要输入条件为真，就会继续跳过元素。一旦条件变为假，它将返回所有剩余的元素。

*例子*

```
yourList.SkipWhile(x => x.marks < 50) 
```

上面的代码行将跳过，直到条件`marks < 50`为真

根据 MSDN ， [Skip()](http://msdn.microsoft.com/en-us/library/bb358985.aspx)和[SkipWhile()](http://msdn.microsoft.com/en-us/library/bb549075.aspx)

# c# - How can we write into rows and columns of an existing excel file for windows phone in a particular format ???

> ID：13741778
> 
> 赞同：0
> 
> 时间：2012-12-06T10:36:33.393
> 
> 标签：c#, excel

the format could be :

namestamp count marks name percentage ddmmyyyyhhmmss 1 75 abc 75

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:38:15.310

我个人会使用像 NPOI 这样的库，但是，我不确定与 Windows Phone 的兼容性……它应该可以工作。

# map - 戈斯莫尔 - 找不到路线

> ID：13741782
> 
> 赞同：2
> 
> 时间：2012-12-06T10:36:46.763
> 
> 标签：map, routing, ubuntu-12.04, openstreetmap, mapnik

我实现了运行离线地图服务器（mapnik/postgresql/osm-maps）。现在我需要一个路线，以便在地图的各个点之间创建可见的路线。当然，它应该在没有互联网连接的情况下离线工作。

用谷歌我找到**了 gosmore**。在从源代码进行一些不成功的安装后，我在终端中写道

> apt-get 安装 gosmore

这是我第一个问题的解决方案。当我这样做的时候

> bzcat RUS-KOS.osm.bz2 | 戈斯莫尔重建

之后，我将创建的 gosmore.pak 文件移动到**/usr/share/gosmore**。所以从终端开始**gosmore**我可以看到街道的名称。但后来我运行**QUERY_STRING gosmore**我总是得到**No route found** =(

> ~# QUERY_STRING="flat=57.785104903827815&flon=40.94085605012125 &tlat=57.7874805971746&tlon=40.9422169187849&fast=0&v=motorcar" gosmore
> Content-Type: text/plain
> 
> 找不到路线

我不知道如何实现它！？我什至尝试四舍五入坐标：

> ~# QUERY_STRING="flat=57.78510&flon=40.94085 &tlat=57.78748&tlon=40.94221&fast=0&v=motorcar" gosmore
> 内容类型：text/plain
> 
> 找不到路线

但无论如何它一直说“找不到路线”。

任何想法？谢谢！

# gwt - 使用异步调用测试 GWTP Presenter

> ID：13741784
> 
> 赞同：7
> 
> 时间：2012-12-06T10:36:47.293
> 
> 标签：gwt, testing, mockito, gwt-platform

我正在使用 GWTP，添加了一个 Contract 层来抽象 Presenter 和 View 之间的知识，我对 GWTP 的结果非常满意。我正在用 Mockito 测试我的演示者。

但随着时间的推移，我发现很难通过测试来保持一个干净的演示者。我做了一些重构来改进它，但我仍然不满意。

我发现以下是问题的核心：我的演示者经常需要异步调用，或者通常使用回调调用对象方法来继续我的演示者流程（它们通常是嵌套的）。

例如 ：

```
 this.populationManager.populate(new PopulationCallback()
  {
     public void onPopulate()
     {
        doSomeStufWithTheView(populationManager.get());
     }
  }); 
```

在我的测试中，我最终验证了模拟的 PopulationManager 对象的 population() 调用。然后在 doSomeStufWithTheView() 方法上创建另一个测试。

但我很快发现这是一个糟糕的设计：任何更改或重构都会破坏我的许多测试，并迫使我从头开始创建其他测试，即使演示者功能没有改变！另外，我没有测试回调是否是我想要的。

所以我尝试使用 mockito doAnswer 方法来不破坏我的演示者测试流程：

```
doAnswer(new Answer(){
     public Object answer(InvocationOnMock invocation) throws Throwable
     {
        Object[] args = invocation.getArguments();
        ((PopulationCallback)args[0]).onPopulate();
        return null;
     }
 }).when(this.populationManager).populate(any(PopulationCallback.class)); 
```

我考虑到它的代码不那么冗长（并且在内部不太依赖于 arg 位置）：

```
doAnswer(new PopulationCallbackAnswer())
  .when(this.populationManager).populate(any(PopulationCallback.class)); 
```

所以在嘲笑 populationManager 的同时，我仍然可以测试我的演示者的流程，基本上是这样的：

```
@Test
public void testSomeStuffAppends()
{
  // Given
  doAnswer(new PopulationCallbackAnswer())
  .when(this.populationManager).populate(any(PopulationCallback.class));

  // When
  this.myPresenter.onReset();

  // Then
  verify(populationManager).populate(any(PopulationCallback.class)); // That was before
  verify(this.myView).displaySomething(); // Now I can do that.
} 
```

我想知道它是否很好地使用了doAnswer方法，或者它是否是代码味道，并且可以使用更好的设计？

通常，我的演示者倾向于只使用其他对象（例如某些 Mediator Pattern）并与视图交互。我有一些演示者有数百（~400）行代码。

再一次，这是一个糟糕设计的证明，还是演示者冗长是正常的（因为它使用了其他对象）？

有没有人听说过一些使用 GWTP 并干净地测试其演示者的项目？

我希望我能以全面的方式解释。

先感谢您。

PS：我对 Stack Overflow 还很陌生，加上我的英语还不够，如果我的问题需要改进，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:42:25.040

您可以使用`ArgumentCaptor`：
查看此[博客文章](http://cleancodematters.com/2011/05/12/testing-calls-to-asynchronous-services-with-mockito/)了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:08:07.413

如果我理解正确，您是在询问设计/架构。

这不应该算作答案，这只是我的想法。

如果我遵循了代码：

```
 public void loadEmoticonPacks() {
    executor.execute(new Runnable() {
        public void run() {
            pack = loadFromServer();
            savePackForUsageAfter();
        }
    });
} 
```

我通常不指望执行者，只是通过加载和保存来检查方法是否完成了具体工作。所以这里的执行器只是防止UI线程中长时间操作的工具。

如果我有类似的东西：

```
accountManager.setListener(this);
....
public void onAccountEvent(AccountEvent event) {
....
} 
```

我将首先检查我们是否订阅了事件（并在某些破坏时取消订阅），我将检查是否`onAccountEvent`符合预期的场景。

**UPD1。**可能，在示例 1 中，最好是提取方法`loadFromServerAndSave`并检查它是否未在 UI 线程上执行，并检查它是否按预期执行所有操作。

**UPD2。**最好使用 Guava Bus 之类的框架进行事件处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T06:00:42.503

我们在演示者测试中也使用了这种 doAnswer 模式，通常它工作得很好。但有一个警告：如果您像这样测试它，您实际上是在消除调用的异步性质，即在服务器调用启动后立即执行回调。

这可能导致未发现的竞争条件。要检查这些，您可以将其分为两步：调用服务器时，answer 方法仅保存回调。然后，当它适合你的测试时，你可以在你的答案上调用类似 flush() 或 onSuccess() 的东西（我建议为此创建一个可以在其他情况下重用的实用程序类），这样你就可以控制何时结果的回调确实被调用了。

# jquery - Firefox + firebug，prototype + jquery.noconflict : Firefox 在页面加载时崩溃

> ID：13741785
> 
> 赞同：0
> 
> 时间：2012-12-06T10:36:52.520
> 
> 标签：jquery, firefox, crash, firebug, prototype

我正在从 移动`Prototype`到`jQuery`.

作为第一步，我使用这两个库，使用`$j=jQuery.noConflict()`;

它在我迄今为止尝试过的所有浏览器中都运行良好，但是如果我打开 Firebug，Firefox 在页面加载时会崩溃。

你听说过类似的问题吗？如何检查 Firebug 发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:29:23.553

通过更新到 Firefox 17.0.1 解决了问题。由于问题是可重现的，我想这是某个地方的错误......但已经以某种方式得到纠正。

# ajax - jQuery ajax + 音频 mp3 ogg 无法在 IE9 中播放

> ID：13741787
> 
> 赞同：0
> 
> 时间：2012-12-06T10:36:53.190
> 
> 标签：ajax, html, audio

我有几个文件想在网站上播放，为了改变它，我使用了 ajax，代码如下：

```
<div id="play"></div>
<div id="list">
    <span id="1">audio 1</span><br />
    <span id="2">audio 2</span><br />
    <span id="3">audio 3</span><br />
    <span id="4">audio 4</span><br />
    <span id="5">audio 5</span><br />
    <span id="6">audio 6</span><br />
    <span id="7">audio 7</span><br />
</div>

<script type="text/javascript">
$(document).ready(function() {
    $('#list span').click(function() {
        $.ajax({
            type: "GET",
            url: "play.php",
            data: { file: $(this).attr('id') }
        }).done(function(msg) {
            $('#play').html(msg);
        });
    });
});
</script> 
```

这是play.php：

```
<audio controls="controls" preload="auto" autobuffer="autobuffer">
    <source src="get-file.php?v=<?php echo 'ogg#'.intval($_GET['file']).''); ?>" type="audio/ogg">
    <source src="get-file.php?v=<?php echo 'mp3#'.intval($_GET['file']).''); ?>" type="audio/mpeg">
Your browser does not support the audio element.
</audio> 
```

在`get-file.php`我检查我要播放的文件和文件类型并使用我返回文件的标题。问题出在***IE9***中，如果我使用 ajax，我会得到`Your browser does not support the audio element.`，如果我直接在浏览器中运行音频...，它可以正常工作。如何在 IE 中修复这个 ajax 问题？

# .net - 卸载/安装 VSTO Excel 插件时出错

> ID：13741788
> 
> 赞同：0
> 
> 时间：2012-12-06T10:36:52.787
> 
> 标签：.net, excel, plugins, vsto, add-in

我对 VSTO 包有疑问。我现在，有很多方法可以清理下载缓存，卸载应用程序等等，但我尝试了所有方法，仍然有问题。

我通过系统应用程序“删除程序和功能”卸载了 ExcelAddIn，通过清除下载缓存

```
rundll32 dfshim CleanOnlineAppCache 
```

并通过手动从 AppData\Local 中删除所有文件

```
rd "%userprofile%\Local Settings\Apps\2.0" /S /Q
rd "%userprofile%\Local Settings\assembly\dl3" /S /Q 
```

之后，我运行 WiseRegistryCleaner 从所有旧条目中清理注册表。

但是在我成功完成所有步骤后，如果我想启动 .xlsm（或 vsto）文件，我仍然遇到问题并收到以下错误：

```
All exceptions: System.Deployment.Application.DeploymentException: Unable to install this application because an application with the same identity is already installed. To install this application, either modify the manifest version for this application or uninstall the preexisting application.
... 
```

我现在能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:50:01.980

我发现，WiseRegistryCleaner 没有找到所有旧的注册表项。我搜索了整个 Windows 注册表，并找到了 AddIn 的一些条目。在我删除此条目后，VSTO 文件有效

# sql - 用于批量更新的 sql 锁定

> ID：13741795
> 
> 赞同：0
> 
> 时间：2012-12-06T10:37:30.897
> 
> 标签：sql, transactions, locking, sql-server-2008-r2

我正在使用 SQL Server 2008 R2 和 C#。

我在 SQL Server 中插入一批行，其中列**Status**设置为值**P**。之后，我检查有多少行已经有状态**R**，如果少于 20 行，我将该行更新为 Status **R**。在插入和更新时，会一直添加和更新更多行。

我已经尝试过多种方式的事务和锁定，但仍然：在激活新批次的那一刻，有超过 20 行状态为**R**几毫秒。在这几毫秒之后，它稳定回到 20。

有谁知道为什么突然锁定似乎不起作用？示例代码、原因以及您可以在此主题上分享的任何内容都会很有用！谢谢！

以下是我的存储过程：

```
 DECLARE @return BIT 
      SET @return = -1 
      DECLARE @previousValue INT 
      --insert the started orchestration 
      INSERT INTO torchestrationcontroller WITH (ROWLOCK)
                ([flowname],[orchestrationid],[status]) 
                VALUES      (@FlowName, @OrchestrationID, 'P') 

      --check settings 
      DECLARE @maxRunning INT 

      SELECT @maxRunning = maxinstances 
              FROM   torchestrationflows WITH (NOLOCK) 
              WHERE  [flowname] = @FlowName 

      --if running is 0, than you can pass, no limitation here                
       IF( @maxRunning = 0 ) 
        BEGIN 
            SET @return = 1 

            UPDATE torchestrationcontroller WITH(ROWLOCK) 
                    SET    [status] = 'R' 
                    WHERE  [orchestrationid] = @OrchestrationID 
        END 
      ELSE 
        --  BEGIN 

RETRY: -- Label RETRY
BEGIN TRY
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE
BEGIN TRANSACTION T1

        --else: check how many orchestrations are now running 
        --start lock table 
        DECLARE @currentRunning INT 

      SELECT @currentRunning = Count(*) 
              FROM   torchestrationcontroller WITH (TABLOCKX) --Use an exclusive lock that will be held until the end of the transaction on all data processed by the statement
              WHERE  [flowname] = @FlowName 
              AND [status] = 'R'                  
              --CASE

      IF( @currentRunning < @maxRunning ) 
        BEGIN 
            -- less orchestrations are running than allowed 
            SET @return = 1 

            UPDATE torchestrationcontroller WITH(TABLOCKX) 
            SET    [status] = 'R' 
            WHERE  [orchestrationid] = @OrchestrationID 
        END 
      ELSE 
        -- more or equal orchestrations are running than allowed 
        SET @return = 0 

      --end lock table 
      SELECT @Return 

COMMIT TRANSACTION T1
END TRY
BEGIN CATCH
--PRINT 'Rollback Transaction'
ROLLBACK TRANSACTION
IF ERROR_NUMBER() = 1205 -- Deadlock Error Number
BEGIN

    WAITFOR DELAY '00:00:00.05' -- Wait for 5 ms
    GOTO RETRY -- Go to Label RETRY
END
END CATCH 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:20:31.953

我已经能够通过在树存储过程上设置隔离级别可序列化+事务来修复它（其中两个我没有提到，因为我认为它们对这个问题并不重要）。显然，这是多个相互干扰的存储过程的组合。

如果您知道更好的修复方法，可以给我带来更好的性能，请告诉我！

# jquery - jQuery flexslider：如何在运行时更改幻灯片并避免副作用

> ID：13741796
> 
> 赞同：1
> 
> 时间：2012-12-06T10:37:33.903
> 
> 标签：jquery, flexslider

我正在使用 flexslider 显示一系列照片。通过 Ajax，我每隔 30 秒就会定期获得新的幻灯片集。`addSlide()`使用and更新 flexslider 中的幻灯片集或多或少都可以`removeSlide()`，但有副作用。

1) `currentSlide`flexslider 中的变量超出了最后一张幻灯片。这会导致显示空白幻灯片，因为这些幻灯片不存在。所以，我添加了一些修复代码来循环`currentSlide`指针：

```
current = slider.currentSlide;
...slider.addSlide(...);
...slider.removeSlide(...);
slider.currentSlide = current < slider.count ? current : slider.count - 1; 
```

这可以解决问题，但非常难看。

2) 下一个挑战是，在幻灯片更新期间，flexslider 管理变得一团糟。这会导致幻灯片顺序发生变化（我可以忍受）、幻灯片数量不规则、幻灯片方向反转以及显示空白幻灯片。
作为测试，我在“之后”事件上触发了我的代码，使用

```
after : function(slider) {updateImages(slider)} 
```

解决潜在的竞争条件，但是，这并没有改善情况。

3）我尝试在更新、使用`slider.flexslider("pause")`和`slider.flexslider("start")`方法过程中停止和启动flexslider显示。不幸的是，这无济于事。

我得到的印象是我做错了什么，忘记了一些非常重要的事情。有人有线索吗？

# ant - 在使用ant创建的jar中添加指定的文件夹

> ID：13741797
> 
> 赞同：2
> 
> 时间：2012-12-06T10:37:34.823
> 
> 标签：ant

我有一个文件夹结构

```
build/classes/com/vaannila/domain/.class files
build/classes/com/vaannila/service/.class files
build/classes/com/vaannila/web/.class files 
```

我的要求是使用 ant 创建一个 jar 文件，我如何在 jar 中包含指定的文件夹，比如我只想包含`domain`和`service`（或）`domain`以及`web`在 jar 中，就像我使用 Eclipse(Export-->存档文件）。

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:07:30.963

您可以在文件集元素中使用包含和排除标签，并选择特定文件...

```
 <jar destfile="${jar.dir}/${jar.file.name}" index="true"
       manifest="${manif.dir}/${manif.file.name}">
     <fileset dir="${build.classes.dir}" >
        <include/>
        <exclude/>
    </fileset>
  </jar>

   <fileset dir="${build.classes.dir}">
    <exclude name="**/property/*"/>
    <include name="**/abcd/*"/>
</fileset> 
```

这样您就可以删除/包含相应的目录。

# python - Scipy fmin_bfgs 错误：遇到被零除：rhok 假定很大

> ID：13741805
> 
> 赞同：0
> 
> 时间：2012-12-06T10:38:01.093
> 
> 标签：python, machine-learning, scipy

**使用fmin_bfgs**（在 SciPy 中）优化非正则化后勤成本函数时出现以下错误：

> 遇到被零除：rhok 假设大
> 
> C:\Python27\lib\site-packages\scipy\optimize\optimize.py:828：RuntimeWarning：在 double_scalars 中遇到除以零 rhok = 1.0 / (numpy.dot(yk, sk))
> 
> 警告：由于精度损失，不一定能达到预期的误差。当前函数值：0.693147 迭代次数：1 函数评估：27

算法 (fmin_bfgs) 在一次迭代后停止。我可能做错了什么？这是python代码：[https ://gist.github.com/4223554](https://gist.github.com/4223554)

这是数据集：[https ://gist.github.com/4223566](https://gist.github.com/4223566)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:48:44.263

您的目标和梯度函数有错误：

*   `initial_theta`而不是`theta`，因此它们返回常量值。这样的函数*没有*明确定义的最小值，因此优化失败。
*   梯度函数假设`theta`是二维数组

修复它们，它可以工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-28T19:29:59.807

伙计们，

与“pv”提到的不同，该问题与 initial_theta 无关。它与训练数据集有关。我已经解决了这个问题，这是工作代码：[https ://github.com/dormantroot/machine-learning-experiment/blob/master/LogisticRegressionExamples/LogisticRegression.py](https://github.com/dormantroot/machine-learning-experiment/blob/master/LogisticRegressionExamples/LogisticRegression.py)

# jquery - 单击分页后，Knockout + jQuery 数据表“启用”绑定丢失

> ID：13741808
> 
> 赞同：2
> 
> 时间：2012-12-06T10:38:14.373
> 
> 标签：jquery, twitter-bootstrap, knockout.js, datatables

我已经连接了几个组件：Knockout、jQuery DataTables + 自定义 KnockOut DataTables、Bootstrap 分页等。它基于这个例子：[http ://chadmullins.com/javascript/knockout-js-series-part-2-binding-knockout -js-to-a-datatables-grid/](http://chadmullins.com/javascript/knockout-js-series-part-2-binding-knockout-js-to-a-datatables-grid/)

现在，这一切都运行良好 - 直到我单击分页控件之一。似乎“启用”绑定以某种方式中断。

这是绑定：

```
<button data-bind="click: $parent.AddToCart, enable: !$parent.InBasket($data)">Add</button> 
```

请原谅我链接到小提琴，但关于依赖关系，我认为这是展示“问题”的最简单方法。小提琴：http: [//jsfiddle.net/K8hhx/](http://jsfiddle.net/K8hhx/)

有人见过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:07:42.897

在使用淘汰赛时，您有一个微妙但常见的问题。

问题出在下面的`$parent.InBasket($data)`函数调用中。

```
 <td>
        <button class="btn btn-mini btn-primary" type="button" 
               data-bind="click: $parent.AddToCart, 
               enable: !$parent.InBasket($data)">
                  Add</button>
    </td> 
```

问题是该函数不是不可观察的。虽然它看起来不错，但它可能会导致您看到的问题。

我将html更改为

```
 <td>
        <button class="btn btn-mini btn-primary" type="button"
            data-bind="click: $parent.AddToCart, enable: !InBasket()">Add</button>
    </td> 
```

项目数据模型是 -

```
var CartItem = function(name) {
    var self = this;
    self.Name = ko.observable(name);
    self.InBasket = ko.observable(false);  /// NEW
} 
```

通过将 InBasket 放入项目数据模型中，当它的状态更新时，knockout 知道如何在您翻页时更新屏幕。从性能的角度来看，它更快，因为每次重新绘制屏幕时，您不再需要搜索购物车来查看它是否在其中。

在[http://jsfiddle.net/photo_tom/K8hhx/4/](http://jsfiddle.net/photo_tom/K8hhx/4/)更新。实际的代码更改相当小。

顺便说一句：我正在考虑在即将到来的项目中使用这个 Datatables/Knockout，如果有一个真实的样本可供查看，将会很有用。

# webmatrix - 如何将excel的记录复制到Webmatrix数据库中的现有表中

> ID：13741816
> 
> 赞同：0
> 
> 时间：2012-12-06T10:38:44.140
> 
> 标签：webmatrix, webmatrix-2

我有一张包含 1400 条记录的 Excel 表格。所以需要将它们复制到我数据库中的现有表中。我多次尝试以优雅的方式做到这一点，但......什么都没有。我正在寻找简单的方法来做到这一点没有代码..

我怎样才能做到这一点？

我会感谢任何能解释我所有过程的人...

再次感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T12:21:41.917

如果您使用 Sql CE 作为数据库服务器，最好的解决方案是将您的 Excel 文件转换为 CSV 并使用[SQL Server Compact Standalone Toolbox](http://sqlcetoolbox.codeplex.com/releases/view/69910)导入 CSV 文件。

您可以在此链接中找到概述该过程的线程：[Loading Comma Delimited Text Data Into WebMatrix](http://forums.asp.net/t/1828672.aspx/1?Loading+Comma+Delimited+Text+Data+Into+WebMatrix)。

否则，如果您使用的是 MS SQL Server，SQL Server Management Studio 提供了一个包含大量功能的详尽的 SQL Server 导入和导出向导。

# asp.net-mvc - MVC 表单身份验证 - 登录后 IsAuthenticated 为假，显式重定向时为真

> ID：13741821
> 
> 赞同：0
> 
> 时间：2012-12-06T10:39:00.240
> 
> 标签：asp.net-mvc, cookies, login, forms-authentication

我有以下负责登录身份验证的方法：

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Login(LoginModel loginModel, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            //if (Membership.ValidateUser(loginModel.UserName, loginModel.Password))
            var session = RMWebClientBL.Sessions.Login(loginModel.UserName, loginModel.Password);
            if(session != null && !session.IsFailed && session.SessionId != Guid.Empty)
            {
                SetAuthCookie(loginModel, session);
                RedirectToLocal(returnUrl);
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View();
    }

    private void SetAuthCookie(LoginModel loginModel, DomainObjects.Sessions.SessionDetails session)
    {
        // create encryption cookie         
        FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(1,
                loginModel.UserName,
                DateTime.Now,
                //TODO: make it configurable!!!!
                DateTime.Now.AddMinutes(20),
                loginModel.RememberMe,
                session.SessionId.ToString());

        // add cookie to response stream         
        string encryptedTicket = FormsAuthentication.Encrypt(authTicket);
        System.Web.HttpCookie authCookie = new System.Web.HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket);
        if (authTicket.IsPersistent)
        {
            authCookie.Expires = authTicket.Expiration;
        }
        System.Web.HttpContext.Current.Response.Cookies.Add(authCookie);  
    }

    private ActionResult RedirectToLocal(string returnUrl)
    {
        if (Url.IsLocalUrl(returnUrl))
        {

           return Redirect(returnUrl);
        }
        else
        {
            return RedirectToAction("Index", "Home");
        }
    } 
```

但是，当我在设置 cookie 后尝试登录时，“User.Identity.IsAuthenticated”仍然为假，但似乎我已登录，因为如果我点击我们的徽标将我重定向到主页，我已通过身份验证。为什么我登录后无法重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:19:08.373

找到解决方案毕竟是一件愚蠢的事情：问题出在以下方法上：

```
 public ActionResult Login(LoginModel loginModel, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            //if (Membership.ValidateUser(loginModel.UserName, loginModel.Password))
            var session = RMWebClientBL.Sessions.Login(loginModel.UserName, loginModel.Password);
            if(session != null && !session.IsFailed && session.SessionId != Guid.Empty)
            {
                SetAuthCookie(loginModel, session);
                return RedirectToLocal(returnUrl);
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View();
    } 
```

如您所见，我已将“返回”添加到

```
return RedirectToLocal(returnUrl); 
```

问题是缺少“return”关键字，所以我总是到最后一行：

```
return View(); 
```

这样我总是回到我的登录页面，而不是处理正确的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:42:57.790

仅仅看一下，您似乎并没有使用 .NET 中包含的标准 MembershipProvider，因为正是这个提供程序设置了 IsAuthenticated 标志。看来您使用自己的提供程序，但仅使用 FormsAuthenticationTicket 部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:02:50.527

尝试使用以下方法而不是加密并创建您自己的 cookie。

```
 FormsAuthentication.SetAuthCookie(userAuth, model.RememberMe); 
```

该方法不仅加密票证，而且还创建一个 cookie，将其添加到响应和幕后的其他一些事情中。我在我的项目中使用它，它工作得很好。

# image-processing - OpenCV：大约。从轮廓图像分割

> ID：13741825
> 
> 赞同：3
> 
> 时间：2012-12-06T10:39:05.187
> 
> 标签：image-processing, opencv, image-segmentation

我正在尝试找到一种方法来对墓地图像进行近似分割（在文化科学中的 CBIR 的背景下 - 但这不是主题）。到目前为止，我正在使用这种策略：

*   两次模糊图像（实验结果）
*   应用 Canny-Edge-Detector
*   寻找轮廓

    ```
    int main(int argc, const char* argv[]) {

    cout << "Starting " << endl;
    Mat sourceImage;
    sourceImage = imread("singlesegmentation/DSCN5204.JPG",
            CV_LOAD_IMAGE_COLOR);

    if (!sourceImage.data) {
        cout << "No Image found." << endl;
        return -1;
    }

    cv::Mat blurred = imagePro::blurrNtimes(2, sourceImage);
    cv::Mat target = edged::applyCanny(blurred);
    cout << "Canny applied " << endl;

    vector<vector<Point> > contours;
    vector<Vec4i> hierarchy;
    cv::Point offset;
    offset.x = sourceImage.rows / 2;
    offset.y = sourceImage.cols / 2;
    cv::findContours(target, contours, hierarchy, CV_RETR_TREE ,
            CV_CHAIN_APPROX_SIMPLE, offset);
    cout << "Contours applied " << endl;

    int idx = 0;
    for (; idx >= 0; idx = hierarchy[idx][0]) {
        Scalar color(rand() & 255, rand() & 255, rand() & 255);
        drawContours(target, contours, idx, color, CV_FILLED, 8, hierarchy);
    }
    cout << "Lines applied " << endl;

    cv::namedWindow("Contour", CV_WINDOW_NORMAL);
    cv::imshow("Contour", target);
    cv::waitKey(0);

    return 0; 
    ```

    }

命名空间“imagePro”和“edged”包含 opencv 的简单代码，用于模糊图像并进一步处理它。该代码有效。这是一个示例图片： ![墓碑的轮廓图](../Images/cb4b135807b16191f21f6c987f587378.png) 但现在我不知道如何分割图像。我想从矩形石头的内部到外部，当我找到一条线时，我想记住坐标然后剪切内容。如果您有想法或提示，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:45:16.530

您可以尝试使用霍夫变换 (cv::HoughLinesP) 参见教程示例[http://docs.opencv.org/modules/imgproc/doc/feature_detection.html](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html)

为了找到图片中石头的坐标，您需要计算霍夫变换找到的线条的交点。对于类似的用例，我使用了 Gaussian-Blur 和 Laplace-Transformation（而不是 canny-edge）。

# c# - 如何在 C# 中使用正则表达式编写正则表达式来验证字符串

> ID：13741829
> 
> 赞同：0
> 
> 时间：2012-12-06T10:39:17.470
> 
> 标签：c#

我需要根据条件验证用户输入。我写了一个正则表达式来这样做，但它不知道为什么。有人能指出我在哪里犯错吗？

```
Regex AccuracyCodeHexRegex = new Regex(@"^[PTQA]((0|8)[01234567]){2}$"); 
```

这就是我要验证的内容（如果字符串是这些字符串的子集，那么它是有效的）：

> Phh, Thh, Qhh, Ahh 其中“h”是集合中的十六进制数字 {00, 80, 01, 81, 02, 82, 03, 83, 04, 84, 05, 85, 06, 86, 07, 87 }

例如：P00 有效 P20 无效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:51:03.103

我会写：

```
^[PTQA]((0|8)[0-7])$ 
```

您似乎不需要`{2}`验证字符串之类的`P0707`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:51:12.723

你的正则表达式`^[PTQA](?:(?:0|8)[01234567]){2}$`

适用于以下：

```
P8001
P8002
P0281
P8005 
```

依此类推，因为您正在重复数字匹配`{2}`

要验证 P81 / P05 之类的内容，您需要将其更改为`{1}`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T11:20:35.110

您可以简化您的正则表达式，`^[PTQA](?:(?:0|8)[0-7])$`这将为您解决问题

如果您需要速度，正则表达式并不是非常快，并且通常可以使用 switch-case 来实现对静态值的简单查找。就可维护性而言，它们并不是那么好，但如果这些值相当稳定并且只在这个地方使用，那么就不应该太担心。如果是，您可以使用所有有效值的 HashSet。

使用哈希集：

```
var leading = new[]{'P','T','Q','A'};
var firstDigit = new []{'0','8'};
var lastDigit = new []{'0','1','2','3','4','5','6','7'};

var set = new HashSet<string>(from l in leading
                              from f in firstDigit
                              from lst in lastDigit
                              select l + f + lst);

public bool IsOk(string value){
   return set.Contains(value);
} 
```

或使用开关盒：

```
public bool IsOk(string value){
   if(value.length != 3) return false;
   switch(value[0]){
       case 'P':
       case 'T':
       case 'Q':
       case 'A':
          switch(value[1]){
               case '0':
               case '8':
                   switch(value[2]){
                        case '0':
                        case '1':
                        case '2':
                        case '3':
                        case '4':
                        case '5':
                        case '6':
                        case '7':
                            return true;
                   }
         }

   }
   return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:49:42.460

如果您对列表中可能的十六进制数字进行排序，您可以像这样自动构建正则表达式

```
var hexs = new List {"00", "80", "01", "81", "02"};
var regex = string.Format("^[PTQA]({0})", string.Join("|", hexs));
var accuracyCodeHexRegex = new Regex(regex); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T10:50:02.790

如果可能的值是已知的，为什么不与这个已知可能值的数组进行比较呢？

```
void Foo(){

    var valueToTest1 = "P07";
    var valueToText2 = "Z54";

    TestValue(valueToTest1);
    TestValue(valueToTest1);
}

bool TestValue(string stringToTest)
{
    var hexValues = new string[] { "00", "80", "01", "81", "02", "82", "03", "83", "04", "84", "05", "85", "06", "86", "07", "87"};
    var leftValues = new char[] { 'P', 'Q', 'H' };

    var left = stringToTest[0];
    var right = strintToTest.SubString(1,2);

    return leftValues.Contains(left) && hexValues.Contains(right);
} 
```

这比使用正则表达式要简单得多，而且我相信性能要好得多

# javascript - 从共享消息中删除“推广”链接

> ID：13741836
> 
> 赞同：0
> 
> 时间：2012-12-06T10:39:41.503
> 
> 标签：javascript, facebook, facebook-timeline

我使用这种技术来允许用户在他们的时间线上从我的网站发布消息/链接：

[http://developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

它可以工作，因为图像和文本显示在他们的提要上。但是，添加帖子后，发布它的用户可以在 facebook 中看到“推广”链接（在帖子下方，如您在上面链接的屏幕截图中所见）。这会邀请他们向 facebook 付费以使其成为付费广告。我想删除此链接，以确保将其视为普通帖子。

我还想添加普通的“分享”链接，这样人们可以，如果他们愿意，与其他 Facebook 朋友分享帖子/链接。

我在 facebook 开发区找不到任何关于此的建议或信息。

# jira - 扩展“快速编辑”插件？

> ID：13741840
> 
> 赞同：0
> 
> 时间：2012-12-06T10:40:03.173
> 
> 标签：jira, jira-plugin

我可以`quick-edit`在 jira 中扩展插件，以便在快速编辑页面上进行一些自定义验证吗？我尝试将 quiick-edit 插件添加为依赖项并扩展`QuickEditIssue`类，但它显示错误

> 编辑问题“已联系 JIRA 服务器，但返回了错误响应。我们不确定此操作的结果。关闭此对话框并在浏览器中按刷新”

那么首先有可能还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:19:39.770

我发现的唯一解决方案是手动编辑 JIRA 5 源存档中的**jira-quick-edit-plugin**（JIRA 系统插件）的源代码。

您可以添加扩展原始操作的类，原始操作是**QuickEditIssue**和**QuickCreateIssue**，然后您必须修改**atlassian-plugin.xml**以便引用您的扩展类而不是原始类。

在此之后，您必须打包插件并将其替换为**atlassian-bundled-plugins.zip**中的插件`WEB-INF/classes folder`。

这不是最优雅的解决方案，但它是迄今为止我发现的唯一一个。

我在 atlassian answers[网站](https://answers.atlassian.com/questions/137921/how-to-extend-issue-actions-in-jira-5)上问了一个类似的问题。

# java - 如何将目录结构从共享位置复制到 ftp

> ID：13741842
> 
> 赞同：0
> 
> 时间：2012-12-06T10:40:04.717
> 
> 标签：java

我需要将一个文件夹（可以有一个目录或文件）从共享位置复制到 FTP？如果我需要复制的文件夹有 2 个文件和 1 个目录。所以在 FTP 中，我的文件夹应该有类似的结构。

谢谢

沙尚克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:55:58.453

看看[apache commons net](http://commons.apache.org/net/)。它有一个 FTP 组件。但是，您需要自己进行一些编码（例如创建远程目录，一个一个复制文件）。

# sql - 显示来自两个不同表的所有列

> ID：13741846
> 
> 赞同：3
> 
> 时间：2012-12-06T10:40:36.930
> 
> 标签：sql, sql-server, sql-server-2008, join

如何将两个不同表的所有列显示为 ONE ？

我在 MovieDB 中有两个表，movies 和 movie_actors。电影的id为主键，电影的id`id`为`movie_actor`外键，`movies_actor.id`引用movies.id

```
 TABLE MOVIES
   id/title/director/genre/year_of_release

   TABLE MOVIE_ACTOR
   id/title/actor/age 
```

我使用了联合，但它不起作用，因为联合要求相同数量的属性。但这里第一个表有 4 列，第二个只有 3 列。

我想在一张桌子上显示

```
 id/title/director/genre/year_of_release/actor/age 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T10:44:12.720

您将希望在表上使用连接。联接将在作为彼此的主键/外键的两个字段之间进行，您所说的是`id`表中的`movie`和`id`表中的`movie_actor`：

```
select m.id,
  a.title,
  m.director,
  m.genre,
  m.year_of_release,
  a.actor,
  a.age
from movies m
inner join movie_actor a
  on m.id = a.id 
```

如果您不熟悉连接语法，那么这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

An`INNER JOIN`将返回在两个表中匹配的记录集。如果表中的记录在`movie`表中没有匹配的记录`move_actor`，那么您需要使用`LEFT JOIN`. 即使表中没有记录，这也会返回所有电影`movie_actor`：

```
select m.id,
  a.title,
  m.director,
  m.genre,
  m.year_of_release,
  a.actor,
  a.age
from movies m
left join movie_actor a
  on m.id = a.id 
```

请参阅带有两个查询[的演示的 SQL Fiddle 。](http://sqlfiddle.com/#!3/7bfc7/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:46:18.607

您可以使用以下查询连接这些表。

```
SELECT MOVIES.id, title, director, genre, year_of_release, actor, age
    FROM MOVIES INNER JOIN MOVIE_ACTOR ON (MOVIE.id = MOVIE_ACTOR.id) 
```

# tinymce - TinyMCE 扩展

> ID：13741847
> 
> 赞同：1
> 
> 时间：2012-12-06T10:40:37.680
> 
> 标签：tinymce

MCFileManager 和 MCImageManager 有什么区别。

我希望我的用户能够上传文件（pdf、word 等）、图像和视频。

我需要同时购买扩展或文件管理器吗？

我还需要支付基本的tinymce来编辑文本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:45:02.397

基本的 tinymce 不会花费您。

MCFileManager 处理各种文件，而 MCImageManager 将允许您执行特定于图像的操作。

# r - R 中具有池化模型的衰减函数（adstock）

> ID：13741849
> 
> 赞同：2
> 
> 时间：2012-12-06T10:40:46.230
> 
> 标签：r

我目前正在使用以下代码来创建衰减率 y 的衰减（adstock）函数：

```
adstock <- function(x, decay=y) filter(x, decay, method = "recursive") 
```

这给出了预期的结果。

但是，如果我有一组数据，例如每个区域都组合在一起并按时间顺序运行，那么第二个区域的开头会从第一个区域的结尾留下衰减。与第三区域类似......

确保 (n>1) 区域的第一次观察保持等于原始值但所有后续值都应用衰减公式的最佳方法是什么？

例如：

```
Weeks <- c("01/01/2012","08/01/2012","15/01/2012","22/01/2012","29/01/2012","01/01/2012","08/01/2012","15/01/2012","22/01/2012","29/01/2012","01/01/2012","08/01/2012","15/01/2012","22/01/2012","29/01/2012")
Regions <- c("North","North","North","North","North","South","South","South","South","South","West","West","West","West","West")
Variable <- c(5,6,4,8,6,19,20,5,7,8,0,5,4,6,7)
exampledata <- data.frame(Weeks, Regions, Variable) 
```

新函数应该只为每个区域运行衰减函数。因此，“西部”区域的第 11 行，01/01/2012，应始终为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-08T15:09:34.757

尝试以下 adstock 功能：

```
adstock <-function(data_vector, decay, period, pool_vector=0){  
 data2<-data_vector
 l<-length(data_vector)
#if no pool apply zero to vector
if(length(pool_vector)==1)pool_vector<-rep(0,l)
#outer loop: extract data to decay from observation i
  for( i in 1:l){
    x<-data_vector[i]
#inner loop: apply decay onto following observations after i
    for(j in 1:min(period,l)){
      #constrain decay to same pool (if data is pooled)
      if( pool_vector[i]==pool_vector[min(i+j,l)]){data2[(i+j)]<- data2[(i+j)]+(x*(1-decay)^j)}
    }
  }
#reduce lenth of edited data to equal lenth of innitial data
data2<-data2[1:l]
  return(data2)
} 
```

如果您不使用周期衰减，只需将其设置为较大的数字（大于观察次数），因此如果您希望在示例中按周期衰减 20%：

```
Variable_20D<-adstock(exampledata$Variable,.2,1000,exampledata$Regions) 
```

# asp.net-mvc - EF 延迟加载不适用于使用 DB 视图的拆分实体

> ID：13741851
> 
> 赞同：0
> 
> 时间：2012-12-06T10:40:48.743
> 
> 标签：asp.net-mvc, entity-framework

我尝试使用实体拆分来使用从数据库视图收集的属性扩展我的实体。如果我直接加载拆分实体，这工作得很好，但如果我有一个实体，拆分实体通过导航属性连接，它就不起作用。

让我们粗略地说它看起来像这样 [Entity A]-[Entity B]-[Entity C]

如果实体 C 未拆分，我可以获取实体 A 并通过实体 B 导航到实体 C，这是通过使用延迟加载的导航属性完成的（据我所知）。这就像一个魅力。

如果实体 C 是包含来自 DB 表和 DB 视图的数据的拆分实体，则上述从实体 A 到实体 C 的导航返回 null。另一方面，如果我直接加载实体 C，它会完全加载，其中包含 DB 表的数据以及 DB 视图的数据。

有什么我没有想到的特别之处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:37:27.707

这是 Gil Fink 的一篇文章，可能会有所帮助。

[http://blogs.microsoft.co.il/blogs/gilf/archive/2009/03/06/entity-splitting-in-entity-framework.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2009/03/06/entity-splitting-in-entity-framework.aspx)

> 如果实体 C 是包含来自 DB 表和 DB 视图的数据的拆分实体，则上述从实体 A 到实体 C 的导航返回 null。另一方面，如果我直接加载实体 C，它会完全加载，其中包含 DB 表的数据以及 DB 视图的数据。

你说的听起来很对。如果您正确拆分表，那么这些属性将不再在实体 C 中可用。

如果您“一直”不需要实体 C 的属性，那么您的第一个映射方案就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:31:21.057

我的问题是，拆分的实体通过内部连接进行连接（请参阅此处的讨论[http://social.msdn.microsoft.com/Forums/en-US/adonetefx/thread/237c1de4-7a42-4c3f-80ab-16601e7fadac /](http://social.msdn.microsoft.com/Forums/en-US/adonetefx/thread/237c1de4-7a42-4c3f-80ab-16601e7fadac/) ) 我所期望的类似于左连接，因此如果附加表中的属性存在则添加，如果不存在则忽略。事实上，如果附加表中没有条目，则整个实体不会被初始化。

上面描述的延迟加载问题只是一个巧合，因为一方面我加载了一个包含附加属性的实体，另一方面，一个实体没有，因此甚至没有像之前描述的那样被初始化。

# javascript - 谷歌地图图像标记未正确放置在精灵中

> ID：13741852
> 
> 赞同：0
> 
> 时间：2012-12-06T10:40:50.530
> 
> 标签：javascript, google-maps-api-3, sprite

我正在尝试使用精灵图像作为谷歌地图标记，但它不显示。这是我正在使用的代码

```
function setMarkers(map, markers) {

    var google_image = new google.maps.MarkerImage("http://www.mydomain.com/images/bodycss/pointer.png", new google.maps.Size(32, 32), new google.maps.Point(28, 32));

        for (var i = 0; i < markers.length; i++) {
            var sites = markers[i];
            var siteLatLng = new google.maps.LatLng(sites[1], sites[2]);
            var marker = new google.maps.Marker({
                position: siteLatLng,
                map: map,
                title: sites[0],
                zIndex: sites[3],
                html: sites[4],
                icon: google_image
            });

            var contentString = "Some content";

            google.maps.event.addListener(marker, "mouseover", function () {
                infowindow.setContent(this.html);
                infowindow.open(map, this);
            });
        }
    } 
```

我给出的图像大小为 32px * 32px，我给出的图像位置点是 28 和 32。只有地图显示没有标记。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:01:08.493

乍一看，可能是您设置了错误的坐标？LatLng 通常表示为：54.621790812770513、-3.562549943618061。

您指定的位置 (28, 32) 是沙特阿拉伯的一个点，距离任何地方 100 英里，除非这是您的意图？

另外，您没有将地图集中在该点上，因此它可以显示（在沙特阿拉伯），而您的地图以其他地方为中心？

如果有人解决了您的问题（尽管我可能没有），也请接受答案。只有礼貌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:45:06.470

您的问题可能有不同的问题。在讨论这个问题之前，几乎没有什么要测试的——

在不使用自定义标记的情况下测试您的代码并查看标记是否正确显示。如果这不起作用，您的 latlng 值是错误的。如果可行，请检查您的站点是否可以访问您的精灵图像（请参阅 chrome 或 firebug 控制台了解错误）。如果没有错误，那么您的位置点可能没有正确调整。

在创建标记后添加`map.setCenter(marker.getPosition())`，使其显示在查看区域中。

**更新**- 如果上述问题不是问题，请在下面的行中更改您的大小和点参数，直到找到标记。

`var google_image = new google.maps.MarkerImage("http://www.mydomain.com/images/bodycss/pointer.png", new google.maps.Size(32, 32), new google.maps.Point(28, 32));`

# windows - 如何在 Windows XP 中为 USB 串行加密狗获得稳定的 COM 端口？

> ID：13741853
> 
> 赞同：9
> 
> 时间：2012-12-06T10:40:54.593
> 
> 标签：windows, embedded, serial-port, usb, usbserial

我开发嵌入式系统，需要串行端口进行通信。

在 Windows XP 中，USB 串行端口加密狗的数量不断变化，这使得它难以在脚本或 makefile 中使用（例如，用于通过其内置引导加载程序对 NXP 控制器进行闪存编程，或用于控制目标和两个实验室设备）同时）。

有没有办法修复这种加密狗的 COM 端口？在 Linux 中，我可以通过 udev 通过匹配 FTDI 加密狗的序列号来做到这一点（请参阅[我刚刚](https://stackoverflow.com/a/13741634/49246)在搜索此问题的答案时给出的答案）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-08T06:39:59.777

FTDI 驱动程序将通过所连接设备的序列号将串行端口分配给相同的 COM 端口。因此，无论 USB 端口如何，端口都应保持不变。但是，如果您插入一个新的 USB 设备，它将不会重新使用之前分配的 COM 端口。

FTDI 有一个[应用](http://www.ftdichip.com/Support/Documents/AppNotes/AN_123_How%20COM%20Ports_Are%20Allocated%20on%20Driver_Installation.pdf)说明更详细地解释了该过程。

我在使用 Prolific 驱动程序时遇到了普遍的稳定性问题，因此我不使用 Prolific USB 转串口设备，也无法评论他们的映射策略。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T18:01:07.900

根据我的经验，每次将设备插入完全相同的 USB 端口会导致它获得相同的 COM 端口号。

如果您需要将设备插入不同的 USB 端口，也可以更改分配给设备的端口号（设备管理器，编辑 COM 端口的属性）。过去，我用 COM 端口号标记了一个设备，然后将其插入笔记本电脑上的每个 USB 端口，并将 COM 端口重新分配为该编号，无论它插入到哪里。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-24T10:59:20.250

使用[ComPortMan](http://www.uwe-sieber.de/comportman_e.html)将 COM 端口号绑定到设备。取自[帮助页面](http://www.uwe-sieber.de/comportman_help_e.html)，这里有一个例子`ComPortMan.INI`：

```
[ComPorts10]
DeviceID=USB\VID_067B&PID_2517
PortName=COM5

[ComPorts20]
DeviceID=USB\VID_1234&PID_5678
PortName=COM6 
```

注意：我发现有时`*`需要将 a 附加到设备 ID 才能使其正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T13:26:27.933

我相信 FTDI 配置工具可以设置固定的 COM 端口号并重命名设备以显示为“您的产品名称”，这样可以更容易地以编程方式找到设备，如果它确实移动（你不只是在寻找COM 端口）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-05T04:35:40.067

对于 XP

标记 USB/com 设备的 USB 端口，反之亦然。或者将usb/com设备一个一个地插入所有usb口，设置相同的设置，所以插入任何一个usb口都会得到相同的结果。

谨防！

如果在模式状态下设置显示或无，则 USB 硬件设备管理器中的高级端口设置将与模式状态（运行 cmd、模式）不同

真正的 9/25 针串口不会在模式状态下显示，只有那些 USB2serial 才会显示，如果设置正确。如果它没有显示或没有显示正确的速度，因为打印机会打印有趣的字母等。

如果模式状态与设备管理器设置特别是波特率不匹配，则设备无法运行。除非您的自定义软件可以在通信之前提前设置好端口。

另一个问题：如果有多个 usb2serial，即使相同的驱动程序也会出现故障，因为它们共享相同的 ser2pl.sys

使用模式测试usb2serial设备：使用模式设置com？到硬件或XonXoff，如果显示none或无法设置，则该设备的驱动BUG或设备部分故障。它仍然可以在 NONE 检测条件下工作，.. 如果您不需要任何硬件检测，那很好。例如：检查打印机是否在线进行打印，NONE 不会提供离线状态，..

为了省钱，我现在只使用 1 个 usb2serial 设备并获得带有 2 个板载的主板或为串口添加串行卡，...

更不用说 Pl2303 usb，.. ca-42 和 dku-5，过去 3 个月都拥有它们，每个只能在不同版本的驱动程序上使用，.. 大多数新 PC 只有 USB 端口，.. 所以我找到 1 个 ca-42(com1) 用于手机和 1 个 usb2serial(com2) 用于打印机。我遇到了很多问题。也尝试使用 1 pl2303 和 1 CH340（不同的驱动器）问题，因为 ser2pl.sys 看起来不像 2 共享。

目前，手头使用板载 com1 用于打印机和 usb pl2303 ca-42(com2) 用于手机，到目前为止一切顺利，还没有问题。交叉我的手指。

干杯。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-07T08:06:37.447

每个 FTDI 设备都有一个序列号。在您的软件中，当枚举（循环）可用的 FTDI 设备时。是的，您可以一次插入许多多个 FTDI 设备。要求用户选择相应的设备。设备。并在每次循环可用设备时保存和恢复序列号..

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-13T10:11:01.277

使用“FT_INF 2.0.61.242 - 自定义 INF 文件生成器”并将“初始索引”设置为要分配的第一个 COM 端口号（例如 32）。然后使用新生成的 .inf 安装 FTDI 驱动程序（可能需要 .cat 文件自签名）

或编辑 ftdiport.inf: [FtdiPort.NT.AddService.AddReg] HKR,"Parameters\VID_0403&PID_6001","InitialIndex",0x00010001,32

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-19T11:35:46.707

如[应用说明之后的 FTDI](http://www.ftdichip.com/Support/Documents/AppNotes/AN_123_How%20COM%20Ports_Are%20Allocated%20on%20Driver_Installation.pdf)中所述，编辑注册表并创建一个设置为 0x01 的 REG_BINARY 值，如下所示：

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\UsbFlags\IgnoreHWSerNum{设备VID、PID和接口}

例如：

忽略HWSerNum04030300

将忽略所有具有 VID 0403 和 PID 0300 的 USB 设备的序列号。所有这些设备将获取相同的驱动程序和相同的 COM 端口

# c#-4.0 - 如何在 C# 中使用 selenium Web 驱动程序将所有网页元素作为树获取

> ID：13741854
> 
> 赞同：1
> 
> 时间：2012-12-06T10:40:55.933
> 
> 标签：c#-4.0, selenium-rc, selenium-webdriver

假设我正在尝试使用 selenium web 驱动程序来获取页面源。我只想知道如何在树状结构中获取所有 html 元素。

```
Iwebdriver driver=new FirefoxDriver();
driver.Navigate().GoToUrl("http://www.google.com"); 
```

我需要像下面这样获取所有的 html 元素。

```
[-] Html
 [+] Head
 [+] Body 
```

ETC

有些人只能为我提供一些想法，无论页面如何，如何实现这一点。

谢谢，洛克什

# html - IE10中的HTML5拖放

> ID：13741857
> 
> 赞同：1
> 
> 时间：2012-12-06T10:41:02.703
> 
> 标签：html, internet-explorer, drag-and-drop, internet-explorer-10

考虑[这个例子](http://jsfiddle.net/Yubms/)：

```
<div style="width:200px; height:200px; background-color:red" draggable="true" /> 
```

在 IE10 中，当我移动红色框时，它会显示带有一个小圆圈的光标，其中有一条线穿过它：

                                                                          ![在此处输入图像描述](../Images/9cc1ef91b17c0abdd07668949709a28c.png)

另一方面，在 IE10 testdrive 的[冰箱演示](http://ie.microsoft.com/testdrive/Graphics/MagneticPoetry/Default.html)中，当我们拖动磁铁时，它会显示一个带有 + 号的手。

除了设置`draggable`为 true 之外，还需要什么才能使光标显示正确的形状？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T16:15:37.980

您需要通过取消拖动事件来表明您接受放置。因此，对于您可以拖放到的元素，请侦听 ondragover 事件并取消它。

这个答案有点晚了，但希望这就是你所需要的。

# css - 如何将css规则存储在drupal的数据库中？

> ID：13741869
> 
> 赞同：1
> 
> 时间：2012-12-06T10:41:45.010
> 
> 标签：css, database, drupal

我想将我的 css 规则存储在数据库中，以允许用户在页面上应用他们自己的 css。我需要帮助。我正面临花括号的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T05:51:04.643

在 Drupal 6 中：

向节点添加 CCK 字段。使用一个文本字段，多行。使用 CCK 的功能隐藏该字段不被输出。现在您有一个字段供人们输入 CSS，但无法输出它。

所以然后编辑你的主题的 node.tpl.php 并添加这样的东西

`<?php echo "<style type='text/css'>" . $node->field_fieldname[0]['value'] . "</style>"; ?>`其中 field_fieldname 是新字段的名称。

在 Drupal 7 中：类似，但使用核心 Fields 模块代替 CCK 做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:54:43.180

您可以[序列化](http://php.net/manual/en/function.serialize.php)css 并存储它，在检索时您可以在取回时[取消序列化](http://php.net/manual/en/function.unserialize.php)它们。如果满足您的需求，您还可以使用诸如[css Injector之类的模块](http://drupal.org/project/css_injector)

# html - 如何在具有固定页眉和页脚的 div 中获取滚动条？

> ID：13741871
> 
> 赞同：12
> 
> 时间：2012-12-06T10:41:54.230
> 
> 标签：html, css, overflow, css-position

我有一个网站，滚动条有一些问题。

我想要什么我可以用这张图片来最好地解释。

![我的网站](../Images/6de82f7a6801fed4df2116a8991c5daa.png)

但我不能得到这样的滚动条。

我已经尝试了一些，这里是[jsfiddle](http://jsfiddle.net/MA9k3/)

在这个小提琴中，我还有：

```
div[role="main"]
{
    overflow-y: scroll;
    margin: 60px 0;
} 
```

但是这个边距不行，在不知道页眉和页脚高度的情况下怎么知道自己需要什么边距。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T11:01:31.413

这可以通过在 body 上使用 padding 和 box-sizing = border-box 来减慢（当 body 高度为 100% 时，它会将 padding 计入高度，因此带有滚动的框将恰好位于页眉和页脚之间）

```
html {
 overflow: hidden;
 height: 100%;
}

body {
 padding: 60px 0px;
 height: 100%;
 box-sizing: border-box;
}

div[role="main"] {
 overflow-y: scroll;
 height: 100%;
} 
```

见[http://jsfiddle.net/wPucQ/](http://jsfiddle.net/wPucQ/)

编辑：在代码中添加了忘记的 HTML 标记

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:01:50.543

您需要为可滚动元素指定一个高度，以便计算滚动条的位置。

```
div[role="main"]
{
    height:400px;
    overflow-y: scroll;
    margin: 60px 0;
} 
```

[http://jsfiddle.net/gkxV4/](http://jsfiddle.net/gkxV4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:50:03.210

尝试提及此 div 的最小高度或高度 div[role="main"]{ overflow-y: scroll; 边距：60px 0；最小高度：400px;}

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T11:24:35.170

请参阅我的小提琴以获得整个逻辑[小提琴](http://jsfiddle.net/MA9k3/7/embedded/result/) [http://jsfiddle.net/MA9k3/7](http://jsfiddle.net/MA9k3/7)

jQuery代码：

```
var doc_height = $(window).innerHeight();

var header_height = $("header").height();
var footer_height = $("footer").height();

var div_height = doc_height - (header_height + footer_height);

$("#content").css({
    "height": (div_height - footer_height) + "px",
    "margin-bottom": footer_height + "px"
});

alert($("#content").height()); 
```

# list - Mathematica - 初始化变量列表

> ID：13741872
> 
> 赞同：3
> 
> 时间：2012-12-06T10:41:57.837
> 
> 标签：list, variables, wolfram-mathematica

我想制作一个可以初始化和可访问的变量列表。
在那种代码之后：

```
abc = {a, b, c}
{a, b, c} = {0, 0, 0}
abc[[1]] = 1 
```

以其他方式，我想创建一个变量列表，用零初始化它们，然后通过引用变量指示列表而不是使用单个变量的名称来更改它们。

如果你愿意

```
abc = {a, b, c}
Evaluate[abc[[1]]] = 1 
```

您得到了正确的结果，即变量 a 设置为 1。但是在第一次设置之后，您无法使用上述方法为该变量设置另一个值。

*更多细节*
我想创建 SetterBars 列表，其中每个都独立于其他，我可以以某种方式存储它们的值。更重要的是，我希望它们被初始化为零。就像是

```
abc = {a, b, c};
Evaluate[abc] = {0, 0, 0};
Table[SetterBar[Dynamic[ abc[[i]] ],{-1,1}], {i,3}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:19:31.597

我相信这可以简化，但至少它确实有效：

```
 {a, b, c} = {0, 1, 0}; 
        {
          With[{abc = {Unevaluated[a], Unevaluated[b], Unevaluated[c]}}, 
               tab = Table[With[{abci = abc[[i]]}, 
                                SetterBar[Dynamic[abci], {0, 1}]], {i, 3}]; 
               tab /. Dynamic[Unevaluated[x_]] :> Dynamic[x]
          ], 
         Dynamic[{a, b, c}]
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T13:17:07.587

## 解决方案

简单的答案是使用索引对象而不是符号：

```
x[_] = 0;

Array[SetterBar[Dynamic @ x @ #, {0, 1}] &, 3] // Row

Array[Dynamic @ x @ # &, 3] 
```

![数学图形](../Images/9d0558c7356dcc4e0c3e2c4872b5a02e.png)

您不仅限于用户数字索引。例如：

```
SetterBar[Dynamic @ x @ #, {0, 1}] & /@ {"one", "two", "three"}

Dynamic @ x @ # & /@ {"one", "two", "three"} 
```

* * *

## 参考

有关更完整的示例和其他选项，请参阅：[按表包装 EventHandler 。](https://mathematica.stackexchange.com/q/13440/121)

对于执行您描述的符号分配的方法，即使我在这里不推荐它，请参阅： [Assigning values to a list of variable names](https://mathematica.stackexchange.com/a/6514/121)，以及：[(1)](https://mathematica.stackexchange.com/q/2926/121)、[(2)](https://mathematica.stackexchange.com/q/783/121)、[(3)](https://mathematica.stackexchange.com/q/2651/121)、[(4)](https://mathematica.stackexchange.com/q/280/121)

# python - 如何在python中获取用户桌面路径独立于语言安装（linux）

> ID：13741873
> 
> 赞同：5
> 
> 时间：2012-12-06T10:42:01.253
> 
> 标签：python, linux, path, desktop

我找到了几个关于“如何找到用户桌面的路径”的问题和答案，但在我看来，它们都已失效（至少我找到了这些）。原因是如果用户安装了非英语的 Linux，他或她很可能在`~/Desktop`. 例如瑞典语，我相信它是在`~/Skrivbord`. 谁知道用户决定将他或她的桌面放在哪里？

出于这个原因，以下内容将不起作用（或它的任何变体）：

```
os.sep.join((os.path.expanduser("~"), "Desktop")) 
```

所以问题是：

在 linux 上，如何在 python 中获取用户桌面的真实路径而不预先假定英文默认目录结构？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T22:29:18.910

`~/.config/user-dirs.dirs`您可以调用该`xdg-user-dir`实用程序，而不是直接从文件中读取：

```
import subprocess
subprocess.check_output(['xdg-user-dir', 'DESKTOP']) 
```

这将适用于任何具有遵循 freedesktop 规范的 DE 的 Linux 发行版，这意味着：KDE、Gnome、XFCE 等等（就像 OP 已经发布的解决方案一样）。

**编辑：**

更新了`subprocess.check_output`因为参数需要在列表中。还值得指出的是，您可以将 DESKTOP 更改为例如 DOCUMENTS 以获取该文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:25:51.927

使用上面@JoachimPileborg 的链接：[freedesktop.org/wiki/Software/xdg-user-dirs](http://freedesktop.org/wiki/Software/xdg-user-dirs)，我将这段代码放在一起，如果可以确定它应该安全地给出用户桌面的路径：

```
import os, re
def get_desktop_path():

    D_paths = list()

    try:

        fs = open(os.sep.join((os.path.expanduser("~"), ".config", "user-dirs.dirs")),'r')
        data = fs.read()
        fs.close()
    except:
        data = ""

    D_paths = re.findall(r'XDG_DESKTOP_DIR=\"([^\"]*)', data)

    if len(D_paths) == 1:
        D_path = D_paths[0]
        D_path = re.sub(r'\$HOME', os.path.expanduser("~"), D_path)

    else:
        D_path = os.sep.join((os.path.expanduser("~"), 'Desktop'))

    if os.path.isdir(D_path):
        return D_path
    else:
        return None 
```

它只是尝试解析应该指定用户目录的文件，如果失败，它会尝试使用英语默认值。最后它验证目录是否存在。我承认正则表达式可能会得到改进，但我认为应该没问题。

# android - 应用程序关闭时如何获取android通知？

> ID：13741875
> 
> 赞同：14
> 
> 时间：2012-12-06T10:42:16.667
> 
> 标签：android, notifications, android-notifications

从网络服务，我以日期和时间的形式获取数据，这意味着对于某个特定日期，我有一些插槽。下图给出了详细的解释。![在此处输入图像描述](../Images/d00b550bfba96328fcd1cac49fabcb24.png)

在每个日期，我都有一些时间安排。这里我想要的是在特定日期和时间显示通知。如果来自数据库的响应包含明天的日期，例如 2012 年 7 月 12 日上午 11:00。我需要在那个时候显示通知。

我对通知管理器和我正在使用的代码有一些想法是..

主.java

```
 NotificationManager notificationManager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.ic_action_search, "A New Message!", System.currentTimeMillis());

    Intent notificationIntent = new Intent(this, Main.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

    notification.setLatestEventInfo(Main.this, notificationTitle, notificationMessage, pendingIntent);
    notificationManager.notify(10001, notification); 
```

**但是在这里我也需要在应用程序关闭时收到通知。**所以，任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T11:15:47.990

将（已启动）添加`Service`到您的应用程序。即使用户退出了您的应用程序，该服务仍将在后台运行。

此外，您可以实现一个 BroadcastReceiver 来监听手机的 Intent 并让您的服务在手机启动时启动！

**我的服务.java**

```
public class MyService extends Service {

@Override
public int onStartCommand(Intent intent, int flags, int startId){
    // START YOUR TASKS
return super.onStartCommand(intent, flags, startId);
}

@Override
public void onDestroy() {
    // STOP YOUR TASKS
super.onDestroy();
}

@Override
public IBinder onBind(Intent intent){
    return null;
} 
```

**BootReceiver.java**

```
public class BootReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
            Intent serviceIntent = new Intent("your.package.MyService");
            context.startService(serviceIntent);
            }
        }
    }
} 
```

**AndroidManifest.xml**

// 在清单标签中

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

// 在您的应用程序标签中

```
<service android:name=".MyService">
    <intent-filter>
        <action android:name="your.package.MyService" />
    </intent-filter>
</service>

<receiver
    android:name=".BootReceiver"
    android:enabled="true"
    android:exported="true"
    android:label="BootReceiver">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

如果你想从一个活动开始你的服务，只需使用

```
private boolean isMyServiceRunning() {
         ActivityManager manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
         for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
             if (MyService.class.getName().equals(service.service.getClassName())) {
                 return true;
             }
         }
         return false;
     }

if (!isMyServiceRunning()){
     Intent serviceIntent = new Intent("your.package.MyService");
     context.startService(serviceIntent);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-06T13:11:44.183

如果数据来自您的服务器，那么使用[GCM](http://developer.android.com/google/gcm/gs.html)可能是一个好方法。在这种情况下，服务器将能够唤醒/启动您的应用程序。

创建一个在您的案例中不断运行的服务是一个糟糕的解决方案。IMO 更好的方法是使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。警报管理器将在特定时间调用意图。（请注意，如果手机重新启动，您必须再次注册意图）。

# android - android的LinearLayout中的自定义背景

> ID：13741878
> 
> 赞同：1
> 
> 时间：2012-12-06T10:42:26.680
> 
> 标签：android, android-layout, android-linearlayout

我正在使用线性布局并将可绘制的 xml 设置为背景。此背景应在用户单击时更改。这是代码和可绘制的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/user_row_layout"
android:background="@drawable/row_background"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/user_row_textlayout"
    android:background="@drawable/row_background"
    android:layout_weight="0.5"
    android:orientation="vertical"
    android:layout_gravity="left"
    android:padding="5dp"
    android:paddingLeft="10dip" >

    <TextView
        android:id="@+id/displayName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:textColor="@drawable/tab_text_selector"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/user_speciality_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@id/displayName"
        android:textColor="@drawable/tab_text_selector" />
</RelativeLayout>

    <ImageView
        android:id="@+id/call_image_button"
        android:layout_width="100dip"
        android:layout_height="wrap_content"
        android:layout_weight="0.25"
        android:src="@drawable/user_list_call_button"
        android:contentDescription="@string/call_contact" />

</LinearLayout> 
```

这是 row_background

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
<item android:state_pressed="true" android:drawable="@color/my_green" /> 
<item android:state_focused="true" android:drawable="@color/my_green" />
<item android:state_selected="true" android:drawable="@color/my_green" />
<item android:drawable="@color/white" /> 
</selector> 
```

但是，如果我将相同的“@drawable/row_background”放在元素上（例如：相对布局），它就像一个魅力。但我希望整个行的背景都发生变化。当我把它放在外面时，即使相对布局部分的背景也不会改变。有什么明显的我错过了吗？我使用的图像也是透明图像。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:52:11.723

感谢大家的时间和投入。我删除了嵌套布局并将整个代码放在一个相对布局中以使其工作。但是，我想知道（为了人类的普遍利益）嵌套布局的一些问题。是不是像“ViewGroup”的LinearLayout这样的东西不会影响与子“View”相同的子视图组（在这种情况下为RelativeLayout）？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T10:45:49.883

你可以试试这段代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/user_row_layout"
android:background="@color/white"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<RelativeLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@+id/user_row_textlayout"
android:background="@color/white"
android:layout_weight="0.5"
android:orientation="vertical"
android:layout_gravity="left"
android:padding="5dp"
android:paddingLeft="10dip" >

<TextView
    android:id="@+id/displayName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:textColor="@drawable/tab_text_selector"
    android:textStyle="bold" />

<TextView
    android:id="@+id/user_speciality_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/displayName"
    android:textColor="@drawable/tab_text_selector" />
</RelativeLayout>

<ImageView
    android:id="@+id/call_image_button"
    android:layout_width="100dip"
    android:layout_height="wrap_content"
    android:layout_weight="0.25"
    android:src="@drawable/user_list_call_button"
    android:contentDescription="@string/call_contact" />

</LinearLayout> 
```

然后，在您的 java 文件中，您可以设置`onClickListener`相对和线性布局

```
private OnClickListener relative = new OnClickListener() {

    @Override
    public void onClick(View v) {
        //change color
    }

};

private OnClickListener Layout = new OnClickListener() {

    @Override
    public void onClick(View v) {
                //change color
    }
}; 
```

# c# - 如何在循环中添加 SqlParameters？

> ID：13741879
> 
> 赞同：2
> 
> 时间：2012-12-06T10:42:29.177
> 
> 标签：c#, sql-server-2008, ado.net

我想从我的代码中删除手动转义。而不是这个我想使用 SqlParameter 对象。

```
foreach (ThreadPost post in ThreadPosts)
{
     string newMessage = Clean(post.Message);
     string oldMessage = post.Message;

     // escape ' character for prevent errors in SQL script
     // I want to pass newMessage and oldMessage as an SqlParameters to prevent unexpected changes, but how it could be done based on the code bellow???
     newMessage = newMessage.Replace("'", "''");
     oldMessage = oldMessage.Replace("'", "''");

     cmdText += string.Format("INSERT INTO ThreadCleanup VALUES ({0}, {1}, '{2}', '{3}')",
          post.ID.ToString(),
          "NULL",
          oldMessage,
          newMessage);
     }
}
if (!string.IsNullOrEmpty(cmdText))
{
     using (SqlConnection con = new SqlConnection(CONNSTR))
     {
          con.Open();
          SqlTransaction tran = con.BeginTransaction(IsolationLevel.ReadUncommitted);
          try
          {
              using (SqlCommand cmd = new SqlCommand(cmdText, con, tran))
              {
                 cmd.ExecuteNonQuery(); // updated records
              }
              tran.Commit();
          }
          catch (SqlException ex)
          {
              tran.Rollback();
          }
          con.Close();
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:05:45.397

您可以以与现在大致相同的方式进行操作 - 通过`insert`在循环中格式化 an，但不是为每个新/旧对使用一个插入，而是对所有对使用一个语句。您应该明确使用列名以避免依赖表中的列顺序（生产中的一个大禁忌）并避免在循环中创建第二个参数，即使您总是向`NULL`它发送 a。

```
var cmdText = new StringBuilder("INSERT INTO ThreadCleanup (id,oldMessage,newMessage) VALUES ");
var args = new List<Tuple<long,string,string>>();
foreach (ThreadPost post in ThreadPosts) {
     int cnt = args.Count();
     if (cnt != 0) {
         cmdText.Append(",");
     }
     cmdText.AppendFormat("(@id{0}, @old{0}, @new{0})", cnt);
     args.Add(new Tuple<long,string,string>(post.ID, post.Message, Clean(post.Message)));
} 
```

此时，您有一个如下所示的 SQL 字符串：

```
INSERT INTO ThreadCleanup (id,oldMessage,newMessage) VALUES
(@id0, @old0, @new0), (@id1, @old1, @new1), (@id2, @old2, @new2), ... 
```

您还有`Tuple<long,string,string>`每个参数的列表，因此您可以这样做：

```
if (args.Count != 0) {
    using (SqlConnection con = new SqlConnection(CONNSTR)) {
        con.Open();
        SqlTransaction tran = con.BeginTransaction(IsolationLevel.ReadUncommitted);
        try {
            using (SqlCommand cmd = new SqlCommand(cmdText, con, tran)) {
               for (var i = 0 ; i != args.Count ; i++) {
                   cmd.Parameters.AddWithValue("@id"+i, args[i].Item1);
                   cmd.Parameters.AddWithValue("@old"+i, args[i].Item2);
                   cmd.Parameters.AddWithValue("@new"+i, args[i].Item3);
               }
               cmd.ExecuteNonQuery(); // updated records
            }
            tran.Commit();
        } catch (SqlException ex) {
            tran.Rollback();
        }
        con.Close();
    }
} 
```

一次性完成的好处是，无论您必须插入多少条记录，您都可以对数据库进行一次往返。除此之外，该解决方案与您当前的解决方案遵循相同的模式，因此性能应该具有可比性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:54:05.257

在 foreach 循环之外声明您的插入命令。然后将 SQLParameters 添加到命令中。

```
String cmdInsert= "INSERT INTO ThreadCleanup VALUES(@value1,@value2,@value3,@value4)"
        cmdInsert.Parameters.AddWithValue("@value1", System.Data.SqlDbType.VarChar);
        cmdInsert.Parameters.AddWithValue("@value2", System.Data.SqlDbType.VarChar);
        cmdInsert.Parameters.AddWithValue("@value3", System.Data.SqlDbType.VarChar);
        cmdInsert.Parameters.AddWithValue("@value4", System.Data.SqlDbType.VarChar); 
```

然后在 foreach 循环中分配值。

```
foreach (ThreadPost post in ThreadPosts)
{
 string newMessage = Clean(post.Message);
 string oldMessage = post.Message;

 // escape ' character for prevent errors in SQL script
 // I want to pass newMessage and oldMessage as an SqlParameters to prevent unexpected changes, but how it could be done based on the code bellow???
 newMessage = newMessage.Replace("'", "''");
 oldMessage = oldMessage.Replace("'", "''");

cmdInsert.Parameters["@value1"].Value = post.ID.ToString();
cmdInsert.Parameters["@value2"].Value = DBNull.Value;
cmdInsert.Parameters["@value3"].Value = oldMessage;
cmdInsert.Parameters["@value4"].Value = newMessage;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-14T17:42:02.093

输入 sqlcmd.Parameters.Clear(); 之前 sqlcmd.Parameters.AddWithValue("@sample",sample);

# android - Google Maps Android API v2 - 仅适用于 ARM？

> ID：13741880
> 
> 赞同：2
> 
> 时间：2012-12-06T10:42:32.283
> 
> 标签：android, google-maps, google-maps-api-2, android-x86

[谷歌地图 Android API v2](https://developers.google.com/maps/documentation/android/)

**尝试在android-x86**设备（Intel Mint）上安装成功编译的地图演示应用程序（`%android-sdk%\extras\google\google_play_services\samples\maps\`）时出现错误：

 **> 失败 [INSTALL_FAILED_CPU_ABI_INCOMPATIBLE]

相同的 APK 可以安装在**ARM**设备上并成功运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T02:30:30.710

是的。它是一个官方的 Google 应用程序，并且没有为 x86/MIPS 重新编译的源代码形式。

使用 Genymotion Android 模拟器，请参阅另一个问题：[如何在 Genymotion 虚拟设备上安装 Google 框架（Play、Accounts 等）？](https://stackoverflow.com/questions/17831990/how-do-you-install-google-frameworks-play-accounts-etc-on-a-genymotion-virtu)**

# javascript - javascript中奇怪的正则表达式行为

> ID：13741881
> 
> 赞同：0
> 
> 时间：2012-12-06T10:42:44.297
> 
> 标签：javascript, regex

> **可能重复：**
> [为什么在 Javascript 中带有全局标志的 RegExp 会给出错误的结果？](https://stackoverflow.com/questions/1520800/why-regexp-with-global-flag-in-javascript-give-wrong-results)

我的代码如下，

HTML：

```
<p id="test"></p>​ 
```

JavaScript：

```
var patt = /h/gi;
var arr = ["", "2Hour", "4Hour", "8Hour", "Next Business Day"];
var test = document.getElementById("test");

for (var i = 0; i < arr.length; i++)
{
    if (patt.test(arr[i])) {
        test.innerHTML += " " + arr[i];
    }
} 
```

但是，得到的输出是`2Hour 8Hour`，为什么 4Hour 不是输出的一部分？

我的正则表达式有问题吗？我该如何解决这个问题？

我把它放在[小提琴上](http://jsfiddle.net/QbXEX/6/)

​</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T10:56:13.103

引用 MDN：

> **与 exec （或与它结合使用）一样，在同一个全局正则表达式实例**上多次调用 test将超过上一次匹配。

目前正在发生的事情是：

1.  存储在中的正则表达式`patt`测试第二个字符串，在索引处找到匹配项`1`，并保留此信息
2.  下次使用`test`它时，会尝试从索引`1` *开始*查找匹配项，这显然不会产生匹配项，因为它正在有效地测试字符串`"our"`
3.  这会将指针重置为`0`，从而允许在 index 处的下一个字符串中`1`找到匹配项。

因此，要解决您的问题，只需在每次迭代中创建一个新实例：

```
for (var i = 0; i < arr.length; i++)
{
    if (/h/gi.test(arr[i])) {
        test.innerHTML += " " + arr[i];
    }
} 
```

这就像“清除指针”一样，并确保正则表达式对于它所测试的每个字符串的行为都是相同的。

这是一个演示：http: [//jsfiddle.net/QbXEX/12/](http://jsfiddle.net/QbXEX/12/)

# xcode - 如何编写预期的失败？

> ID：13741886
> 
> 赞同：11
> 
> 时间：2012-12-06T10:42:51.797
> 
> 标签：xcode, cocoa, unit-testing, testing, ocunit

在 Xcode 中，在我的单元测试结束时，我得到如下结果：

> 测试套件“所有测试”于 2012-12-06 10:23:38 +0000 完成
> 
> 执行了 195 次测试，在 4.314 (4.485) 秒内有 0 次失败（ **0 次意外）**

我很想知道如何定义预期失败的测试。

通常，对于其他测试框架，我喜欢能够将不完整的单元测试定义为对未来必须完成的工作的提醒。这些测试应仅记录为警告，但如果其他一切正常，仍会产生“成功”的最终结果

查看 Xcode 的输出，我认为有一种方法可以实现相同的效果。但是，我在找到正确的宏来标记不完整/TODO 测试时遇到问题。此外，在我看来，正常故障报告为：

> 执行 95 次测试，1 次失败（0 次意外）在 2.314 (2.334) 秒内

因此，任何测试断言失败似乎都是意料之中的。在那种情况下，我什至对（0 次意外）失败的含义感到困惑。

谁能解释那部分日志结果的含义？如何使用？如何标记未完成的测试？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T05:57:36.497

“意外失败”是抛出且未处理的异常。与可能预期的失败相反，后者由断言检查。

OCUnit 不提供将测试标记为“不运行”的方法。要么将它们注释掉（这会使测试不再编译的风险），要么更改方法名称，使其没有“测试”前缀。例如，将 testSomething 重命名为 XXXtestSomething。（这会留下您忘记将其更改回来的风险。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:47:34.573

我的问题的一种解决方案是使用警告预处理器宏来标记必须完成的单元测试。这样，在编译单元测试之后，我就可以很好地了解未来必须完成的工作。这显示在警告面板中，因此它比仅使用 TODO 注释更具吸引力。

但是，我希望对不完整的测试进行总计数，并找出我的日志报告中总是“0 意外”计数的含义。

# objective-c - 如何在解析中调用变量？

> ID：13741887
> 
> 赞同：1
> 
> 时间：2012-12-06T10:42:51.973
> 
> 标签：objective-c, ios, cocoa-touch

这可能是一个非常愚蠢的问题。我在我的项目中解析 2 个 URL，在解析第一个 URL 后，我得到了用户 ID。现在在第二个 url 我需要传递用户 ID。我将如何将用户 ID 放在第二个 URL 中。我正在做的是： -

在 viewdidload 中：-

```
NSString *str1=[[NSString alloc]initWithFormat:@"http://abc.com/user/%@/bookmarksdata",[arrayList valueForKey:@"userId"]];
NSLog(@"%@",str1); 
```

在 connectionDidFinishLoading 中：- NSString *returnString=[[NSString alloc]initWithData:dataReceived encoding:NSASCIIStringEncoding];

```
SBJSON *jsonParser=[[SBJSON alloc]init];

NSDictionary *_dict=(NSDictionary *)[jsonParser objectWithString:returnString error:nil]; 
```

[arrayListG addObject:[_dict objectForKey:@"userId"]];

```
NSLog(@"===%@",arrayList); 
```

我从我的第一个 URL 获取 userId，现在我想将它传递给给定的第二个 URL。请帮助我如何做到这一点..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:55:45.707

从您的 connectionDidFinishLoading 调用此函数

```
 [self gettingUrl:[_dict objectForKey:@"userId"]]; 
```

之后从 viewdidLoad 中删除代码。并像这样调用 viewDidload 函数中的第一个值

```
 [self gettingUrl:[arrayList valueForKey:@"userId"]]; 
```

添加这个功能

```
-(void)gettingUrl:(NSString*)userid
{
  NSString *str1=[[NSString  alloc]initWithFormat:@"http://abc.com/user/%@/bookmarksdata",userid];
 NSLog(@"%@",str1);

 } 
```

# gps - 如何检查Android应用程序中的GPS是否设置了位置？

> ID：13741890
> 
> 赞同：1
> 
> 时间：2012-12-06T10:42:58.977
> 
> 标签：gps, locationmanager, satellite

当在设置中启用“使用 GPS 卫星”选项时，我需要在我的 android 应用程序中检查位置是否由 GPS 设置。我可以使用 isProviderEnabled() 方法来确定是否启用了“使用 GPS 卫星”选项。如何确定位置是否由 GPS 设置？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:02:43.143

使用询问`Location`其提供者[`getProvider()`](http://developer.android.com/reference/android/location/Location.html#getProvider%28%29)。它将回答提供位置/修复的提供商。

# io-redirection - 如何在 Windows 上使用 listProcessesInGuest 重定向 vmrun.exe 的输出？

> ID：13741893
> 
> 赞同：1
> 
> 时间：2012-12-06T10:43:05.090
> 
> 标签：io-redirection

我在命令行上使用 listProcessesInGuest 运行 vmrun.exe，并获取控制台窗口中显示的进程列表。确切的命令行是：

```
"C:\VIX\vmrun.exe" -T vc -h "https://myserver/sdk" -u "mydomain\myuser" -p 123 -gu Administrator -gp 123 listProcessesInGuest "[Storage1] QA-W-7-SP1-64-0/QA-W-7-SP1-64-0.vmx" 
```

它工作正常。

现在我希望重定向输出，但是，既不工作`2>`也不`1>`工作！前者没有效果 - 输出仍然显示在控制台窗口中，所以我断定它是发送到标准输出。但后者也不起作用 - 现在控制台窗口中没有显示任何内容，但重定向文件为空！它创建得很好，但它的大小为零！

有人可以解释发生了什么吗？

**编辑**

管道也`more`没有显示任何内容。意义

```
"C:\VIX\vmrun.exe" -T vc -h "https://myserver/sdk" -u "mydomain\myuser" -p 123 -gu Administrator -gp 123 listProcessesInGuest "[Storage1] QA-W-7-SP1-64-0/QA-W-7-SP1-64-0.vmx" | more 
```

什么都不显示。取下管道，然后就可以了 - 有输出。

**编辑2**

升级到最新版本的 vmrun 可以解决该问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:48:57.473

单管道覆盖，所以也许是这样 - 尝试使用双管道 - 例如：

```
"C:\VIX\vmrun.exe" -T vc -h "https://myserver/sdk" -u "mydomain\myuser" -p 123 -gu Administrator -gp 123 listProcessesInGuest "[Storage1] QA-W-7-SP1-64-0/QA-W-7-SP1-64-0.vmx" >> output.txt 
```

# php - 仅显示表格中的每个标题之一

> ID：13741896
> 
> 赞同：0
> 
> 时间：2012-12-06T10:43:11.207
> 
> 标签：php, sorting

我正在谈论的网页是[http://transfigurationstattoostudio.com/showcase.php](http://transfigurationstattoostudio.com/showcase.php)该表由ID（唯一），TITLE，DESCRIPTION，IMAGE_1，IMAGE_1_DESCRIPTION（加上其他五个图像槽）组成

该网页当前显示每个 IMAGE_1 的缩略图，通过 TITLE 字段链接到完整图库。

我想要做的是删除重复的 TITLE 条目，因此用户可以添加多个具有相同标题的画廊，但只有一个出现在页面上（所有具有相同标题的图像都出现在完整的画廊中）

我尝试使用 DISTINCT，但每条记录都是唯一的，具有不同的 ID。我想要的甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:52:17.740

`SELECT DISTINCT(title), image_1 FROM table;`

尽管应该声明您不应将具有相同标题的项目视为画廊。为什么不创建一个附加表来引用带有画廊 ID 的图像 ID？

```
--Image
id | title | thumb1 | thumb2

--Gallery
id | title | description

--GalleryImage
gallery_id | image_id 
```

这甚至可以向前迈出一步，并与拇指建立另一种关系，而不是使用拇指 1 / 拇指 2 - 但希望你明白这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:54:21.383

尝试两个查询，一个遍历所有不同的标题，第二个获取该标题的第一个图像记录。你没有说你的表名，所以我假设它是图像：

```
$mysqli = new mysqli(...);
$titleSql = "SELECT DISTINCT TITLE FROM IMAGES ORDER BY TITLE";
$result = $mysqli->query($titleSql);
while ($row = $mysqli->fetch_row($result)) {
    // Now just get the first image record associated with that title
    $imageSql = "SELECT ID, IMAGE_1 FROM IMAGES WHERE TITLE = " + $row[0] + " LIMIT 1";
    ...
} 
```

# css - 在 Chrome 和 Safari 中使用 valign=top 在表格中呈现错误

> ID：13741898
> 
> 赞同：4
> 
> 时间：2012-12-06T10:43:20.423
> 
> 标签：css, google-chrome, webkit, vertical-alignment, superscript

我有以下 HTML：

```
<p style="font-family:Verdana">test<sup>2</sup></p>
<p style="font-family:Verdana;vertical-align:top">test<sup>2</sup></p> 
```

问题是在第二

`<sup>`不再位于文本上方，而是低了几个像素。本质`vertical-align:top`上，除了上标之外的所有文本都被提升到顶部：

![铬 23 窗口](../Images/8581779b6545ddecbc3f606dbd66b484.png)

这不会在 Firefox、Opera 中发生，而是在 Chrome 和 Safari（所有 Windows）中发生，而不是在某些字体（如 Times New Roman）中发生。

你认为这是字体的问题还是实际上是 Webkit 中的错误？已经报告了一个错误，我附上了我的测试用例，但我不知道它会多快解决，因为该错误已在三年多前报告...

您有解决方法的想法吗？如果可能，仅更改 CSS。

**更新**

我尝试了建议的解决方案，其中大多数显示与使用`sup`标签相同。

我创建了一个**[小提琴](http://jsfiddle.net/SXpGA/)**来展示不同的实现。

Chrome 错误报告：[http ://code.google.com/p/chromium/issues/detail?id=23634](http://code.google.com/p/chromium/issues/detail?id=23634)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:17:54.837

避免使用该`sup`元素，因为它会导致各种问题并且永远不会真正产生印刷正确的上标。

如果您的文档中只需要上标 2，则只需使用 SUPERSCRIPT TWO 字符，“²”，或使用实体引用`&sup2;`。这意味着使用由印刷师设计的文本字符以适应字体设计。

如果您需要各种上标并且不能将所有上标都表示为上标字符，那么最好使用`span`可以减小字体大小并提高字符的元素和样式——使用相对定位而不是`vertical-align`（这往往会导致行间距不均匀，有时可能干扰其他地方设置的垂直对齐方式）。例子：

```
span.sup {
    font-size: 80%;
    position: relative;
    bottom: 1ex;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T12:53:26.947

我发现它更简单，特别是如果您已经将所有内容添加为元素，以便为 .css 文件中的所有 sup 元素设置全局样式。像这样。

```
sup {font-size: 80%; position: relative;bottom: .8ex;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T14:59:17.997

在我看来，`&sup2;`由于语义意义，使用实体比使用 css 样式更好。

# android - 拍照时插入人物轮廓

> ID：13741899
> 
> 赞同：0
> 
> 时间：2012-12-06T10:43:22.127
> 
> 标签：android, android-camera

我不确定是否可以制作。我需要在拍照时画出人物的轮廓，以确保用户在开始将照片用于其他东西之前将照片拍摄在正确的位置和正确的尺寸。有可能发展吗？我尝试查看**Android 相机类**，但没有任何内容，或者至少我找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:07:52.040

此任务需要对您要捕获的图像进行图像处理，但在此之前您必须实时获取图像，尝试使用此[代码](https://stackoverflow.com/questions/2485141/using-android-view-surfaceview-with-a-camera-on-part-of-the-screen)帮助使用`surfaceView`，现在为了简化图像处理任务，您必须使用一些单一颜色背景，如蓝色或与人的服装颜色不同的颜色

现在在这个阶段，您只需使用此处的[库即可非常轻松地处理图像](https://stackoverflow.com/questions/9870931/find-contours-of-objects-on-photo)

# windows - 带有 svn 的 NetBeans 远程项目

> ID：13741902
> 
> 赞同：8
> 
> 时间：2012-12-06T10:43:30.803
> 
> 标签：windows, svn, netbeans, remote-access, remote-server

我有一个用于工作的远程项目；这是在 Debian OPS 上，我通过 SSL 访问它。该项目在SVN控制下的远程机器上。

有没有办法让我将 NetBeans 连接到存储库并直接提交到它？

“导入到 svn 存储库远程项目”选项是否允许这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T10:52:03.930

是的，只需从 NetBeans 签出项目即可

按照步骤

*   打开 netbeans 并单击工具栏中的团队菜单

*   从团队菜单中选择颠覆并选择结帐。

*   结帐完成后，它会要求您在本地创建项目，请务必创建它

*   然后，它会自动与远程服务器中的存储库同步。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T09:49:43.660

好的，我想通了：3

以下是如何破解 netbeans 在同一个项目中拥有 svn 和远程

1.  连接到您的远程服务器，拉取整个项目。
    *   它将位于您的用户文件中的某个位置，例如项目的文档/netbeanprojects/名称。
2.  现在转到文件夹并从原始 svn 服务器检查 repo...

3.  完成你有远程的svn：3

（邪恶地笑）

# embedded - 就嵌入式环境中突发错误（块代码）的计算时间而言，最快的算法是什么？

> ID：13741907
> 
> 赞同：0
> 
> 时间：2012-12-06T10:43:56.163
> 
> 标签：embedded, reed-solomon

我正在研究为在具有突发错误的嘈杂通道中运行的设备实施编码和解码。我发现克服突发错误的最常用技术如下：

1.  里德-所罗门 (RS) 代码
2.  防火规范
3.  交错
4.  级联
5.  级联

我认为在嵌入式系统中，实现基于多项式的技术以将相关多项式存储在查找表中的最有效方式。然而，编码和解码涉及大量计算，只是想知道这些可能需要多长时间。

任何帮助，将不胜感激。

==========

PS：检测和修正都是必须的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:01:04.937

我不认为有任何替代 RS 来纠正块错误。卷积码非常快（对于维特比，每个解码位约 15 条摊销指令），但仅适用于零星的位更改。BCH（二进制）码 (31,5) 的综合症可以更快地计算出来，但它只能恢复 2 位。

本页讨论长 RS 解码的[完整软件实现的复杂性：](http://www.cs.cmu.edu/afs/cs.cmu.edu/project/pscico-guyb/realworld/www/reedsolomon/reed_solomon_codes.html)

```
 RS(255,251) - 12 Mbps
 RS(255,239) - 2.7 Mbps
 RS(255,223) - 1.1 Mbps 
```

将 2 错误综合症映射到错误位置在 166MHz Pentium 上实现了 12Mbps 的速度（可能使用查找表），可以说是当今典型嵌入式处理器效率的 5-10%。较大多项式的复杂度约为 O(M*N)，其中 M = 块长度，N = 校正子计算和 Berlekamp-Massey 算法的代码长度。Chien 搜索似乎经常在所有可能的 (255) 根上进行蛮力循环，并将它们一一代入错误位置多项式——这也具有大约 O(M*N) 的复杂性，因为 M=块大小= 255 与码字的数量（256）大致相同。

# wcf - WCF NetTcp 绑定会增加耦合吗？

> ID：13741908
> 
> 赞同：1
> 
> 时间：2012-12-06T10:43:58.523
> 
> 标签：wcf, rest, soap, loose-coupling

目前，我们已经使用 SOAP 或更简单的 HTTP REST-like 方法创建了 Web API。同时有多种方法可以让服务器和客户端或多或少地独立发展，我认为这是一个很大的优势。

主要缺点之一是使用 HTTP 会产生一些开销。我们计划增加使用服务 API 来公开数据，而不是应用程序直接访问数据库。我们担心使用 HTTP 会涉及太多开销，这会增加延迟。当然我们可以使用缓存，但这也会增加复杂性。

建议之一是使用 WCF NetTcp 绑定，它的性能应该更高。我担心如果我们选择这项技术，我们可能会失去 REST 的好处：独立发展服务器和客户端的能力。我认为我们将以紧密耦合为代价来提高性能。

我的问题如下：使用 WCP NetTcp 绑定，是否仍然可以在无需更新所有客户端的情况下发展您的 API？换句话说：当使用这个绑定时，我们可以期望客户端和服务器之间的耦合程度如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:53:00.023

> 我们担心使用 HTTP 会涉及太多开销，这会增加延迟 建议之一是使用 WCF NetTcp 绑定，它应该会更高性能

谁说的？要求他们向您展示基准，因为我看不出 TCP 将如何提高性能。当然它使用二进制协议，但服务器中的业务逻辑可能是瓶颈，而不是实际传输。

HTTP 要好得多，因为已经有很多现成的基础设施可以帮助您在需要时进行扩展（如负载平衡、缓存代理等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T20:07:24.133

我相信您要使用的绑定取决于谁是服务的消费者。如果您已经有客户端使用具有特定绑定的 REST HTTP 客户端或 SOAP，则切换到 Net TCP 仍需要对所有已使用该服务的客户端进行服务更新。由于 HTTP 已经有很多可用的基础设施，我认为切换绑定没有太大价值。

# php - 如何在 codeigniter 中使用作曲家包？

> ID：13741917
> 
> 赞同：22
> 
> 时间：2012-12-06T10:44:37.403
> 
> 标签：php, namespaces, codeigniter-2, composer-php

我关注了这篇文章： http: [//philsturgeon.co.uk/blog/2012/05/composer-with-codeigniter](http://philsturgeon.co.uk/blog/2012/05/composer-with-codeigniter)

但我明白了`Fatal error: Class 'Buzz\Browser' not found`。

他的职位缺少什么？

我的控制器或应用程序没有命名空间。我希望能够在非命名空间框架中的一个控制器的操作中使用那个包。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-11-15T16:07:08.567

对于 CodeIgniter 3.x 和 composer，建议[**只**](https://www.codeigniter.com/user_guide/general/autoloader.html)设置`$config['composer_autoload']`为.`TRUE``application/config/config.php`

似乎 CI 假定`vendor`目录在`application`目录中。那不是我的情况。我做了以下事情：

`$config['composer_autoload'] = 'vendor/autoload.php';`

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-06T10:18:37.040

感谢@jmadsen

这可以通过获取正确的加载顺序来实现：

```
/*
 * --------------------------------------------------------------------
 * LOAD THE BOOTSTRAP FILE
 * --------------------------------------------------------------------
 *
 * And away we go...
 *
 */
// Composer Autoloader
require FCPATH . 'vendor/autoload.php';

require_once BASEPATH.'core/CodeIgniter.php';

/* End of file index.php */ 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-04-28T22:30:25.807

那么在 Codeigniter3.x 中，您可以通过进入 application/config/config.php 并查找这一行轻松地做到这一点

```
$config['composer_autoload'] = FALSE; 
```

确保将其设置为 TRUE 并在它之后您 require_once ：

```
require_once APPPATH.'vendor/autoload.php'; 
```

所以你会得到这样的东西：

```
/*
|--------------------------------------------------------------------------
| Composer auto-loading
|--------------------------------------------------------------------------
|
| Enabling this setting will tell CodeIgniter to look for a Composer
| package auto-loader script in application/vendor/autoload.php.
|
|   $config['composer_autoload'] = TRUE;
|
| Or if you have your vendor/ directory located somewhere else, you
| can opt to set a specific path as well:
|
|   $config['composer_autoload'] = '/path/to/vendor/autoload.php';
|
| Note: This will NOT disable or override the CodeIgniter-specific
|   autoloading (application/config/autoload.php)
*/
$config['composer_autoload'] = TRUE;
require_once APPPATH.'vendor/autoload.php'; 
```

只要确保您在应用程序文件夹中有您的供应商文件夹，您就可以开始了。

我最近发现你可以设置 $config['composer_autoload'] = TRUE; 并将您的供应商文件夹放在应用程序文件夹中，就是这样。

对于那些希望您的供应商文件夹在应用程序文件夹之外的人。您可以通过这种方式实现它：例如，您想将它放在根文件夹中。

提示：已经在评论中描述过

$config['composer_autoload'] = '/path/to/vendor/autoload.php';

```
/*
|--------------------------------------------------------------------------
| Composer auto-loading
|--------------------------------------------------------------------------
|
| Enabling this setting will tell CodeIgniter to look for a Composer
| package auto-loader script in application/vendor/autoload.php.
|
|   $config['composer_autoload'] = '/path/to/vendor/autoload.php';
|
| Note: This will NOT disable or override the CodeIgniter-specific
|   autoloading (application/config/autoload.php)
*/
$config['composer_autoload'] = FCPATH .'vendor/autoload.php'; 
```

其中 FCPATH 是 codeigniter 为根文件夹定义的常量。

我想这会有所帮助。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-20T06:55:27.583

*编辑：该死，我刚才说的和@Tjorriemorrie 几乎完全一样*

如果您正确地遵循了所有其他说明，您需要做的就是在index.php 文件**的末尾附近添加以下代码：**

```
/*
 * --------------------------------------------------------------------
 * COMPOSER AUTOLOAD
 * --------------------------------------------------------------------
 */
include_once './vendor/autoload.php'; 
```

...只需确保在调用 CodeIgniter 引导文件**之前将其插入：**

```
/*
 * --------------------------------------------------------------------
 * LOAD THE BOOTSTRAP FILE
 * --------------------------------------------------------------------
 *
 * And away we go...
 *
 */
 require_once BASEPATH.'core/CodeIgniter.php'; 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-12T17:05:17.537

您可以直接在控制器中添加 Composer Autoloder：

```
// Composer Autoloader
require FCPATH.'vendor/autoload.php'; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-05-05T16:36:56.163

有两种方法可以自动加载使用 composer 所需的类文件。

1.  在根目录的 index.php 中添加以下行。

    ```
    require FCPATH . 'vendor/autoload.php'; 
    ```

2.  或者直接在要使用的控制器中自动加载。

    ```
    defined('BASEPATH') OR exit('No direct script access allowed');

    require FCPATH . 'vendor/autoload.php';

    class Home extends CI_Controller {...} 
    ```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-19T07:28:40.973

我正在使用[Kenjis codeigniter composer package](https://github.com/kenjis/codeigniter-composer-installer)，它将供应商目录置于根目录之外。由于根没有预定义的常量（我知道），我使用了以下内容：

```
$root = getcwd();
$config['composer_autoload'] = "$root/vendor/autoload.php"; 
```

# sql - 如何避免除以零错误

> ID：13741923
> 
> 赞同：0
> 
> 时间：2012-12-06T10:44:52.783
> 
> 标签：sql, sql-server, database, sql-server-2008

> **可能重复：**
> [如何避免 SQL 中的“除以零”错误？](https://stackoverflow.com/questions/861778/how-to-avoid-the-divide-by-zero-error-in-sql)

我有一个关于 Sql Server 除以零错误的问题。有时这个错误和它的视图会被阻止，直到我删除相应的行。你能帮我，给我一些建议，我怎么能避免这种情况？谢谢。

```
CREATE VIEW Acq
AS
SELECT
        ac_id
       ,[Company]
       ,No
       ,[ContractID]
       ,[Seller]
       ,[AcquistionDate]
       ,[Village]
       ,[Commune]
       ,[Area]
       ,[PlotArea]
       ,[FieldNo]
       ,[Topo1]
       ,[Topo2]
       ,[Topo3]
       ,[Topo4]
       ,[Topo5]
       ,[TotalAreaSqm]
       ,[OwnershipTitle]
       ,[CadastralNO]
       ,[Type]
       ,[Price]
       ,[NotaryCosts]
       ,[LandTax]
       ,[OtherTaxes]
       ,[AgentFee]
       ,[CadastralFee]
       ,[TabulationFee]
       ,[CertSarcini]
       ,[ProcuraNO]
       ,cast((isnull(price,0)+isnull(notarycosts,0)+isnull(landtax,0)+isnull(othertaxes,0)+isnull(agentfee,0)+isnull(cadastralfee,0)+isnull(tabulationfee,0)+isnull(certsarcini,0)) as decimal(12,4)) as TotalCosts
       ,cast((isnull(price,0)+isnull(notarycosts,0)+isnull(landtax,0)+isnull(othertaxes,0)+isnull(agentfee,0)+isnull(cadastralfee,0)+isnull(tabulationfee,0)+isnull(certsarcini,0))/(TotalAreaSqm/10000) as decimal(12,4)) as RonPerHa
       ,cast((isnull(price,0)+isnull(notarycosts,0)+isnull(landtax,0)+isnull(othertaxes,0)+isnull(agentfee,0)+isnull(cadastralfee,0)+isnull(tabulationfee,0)+isnull(certsarcini,0))/(TotalAreaSqm/10000*FixHist) as decimal(12,4)) as EurPerHa
       ,[DeclImpunere]
       ,[FixHist]
       ,cast((isnull(price,0)+isnull(notarycosts,0)+isnull(landtax,0)+isnull(othertaxes,0)+isnull(agentfee,0)+isnull(cadastralfee,0)+isnull(tabulationfee,0)+isnull(certsarcini,0))/FixHist as decimal(12,4)) as EurHist
       ,[LandStatus]

FROM      tblAcq 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T10:48:01.023

将表达式替换`(TotalAreaSqm/10000)`为`(nullif(TotalAreaSqm,0)/10000)`

这假设您希望结果是`null`除以零的情况。有关. [_](http://msdn.microsoft.com/en-us/library/ms177562.aspx) _`nullif`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:47:35.370

```
CASE (TotalAreaSQM/1000 <> 0) THEN 'do work' ELSE 'dont do it and pass the 0 or what ever' 
```

您可以编写大量类似的东西。

# windows - Windows Azure 移动服务

> ID：13741925
> 
> 赞同：1
> 
> 时间：2012-12-06T10:44:54.873
> 
> 标签：windows, azure, azure-mobile-services

我正在使用 Windows Azure 迈出第一步，从创建移动服务开始，因为我遇到了两个问题： - 如何个性化我的服务，以便在将存储在 DB 中的数据返回给我的客户之前对其进行一些处理。-是否可以实施您自己的身份验证服务以使用默认提供的配置文件（FB、twitter、google 和 windows live ID）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:50:03.267

这都是一个基于 REST 的界面，因此选项非常开放！也就是说，您真的想自己管理身份还是想将个人资料信息附加到由您提到的各种服务验证的身份。

我倾向于选择后者，在这种情况下，您可以收集其他数据并将其存储在与用户关联的 WAMS 中。如果您查看[“使用脚本授权移动服务中的用户”](http://www.windowsazure.com/en-us/develop/mobile/tutorials/authorize-users-in-scripts-dotnet/)，您会注意到您可以访问身份验证服务的“用户 ID”。该 id 可能是不透明的；但是，在您的“注册”WAMS 脚本中，您将能够记录您自己的有意义的数据以及 ID 提供者的唯一用户 ID 密钥。所以现在您正在维护个人资料信息，但不必自己进行身份验证！

当然，在 WAMS 脚本中[，您可以访问](http://msdn.microsoft.com/en-us/library/windowsazure/jj554212.aspx)与调用它的 CRUD 操作关联的表之外的其他表（和服务）。因此，例如，您可以使用`user.userid`作为参数传递到脚本中的参数作为您的配置文件信息表的索引，将您的“配置文件信息”表加入所有其他脚本中。您可以在此处将“治疗”添加到数据中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T05:20:28.540

There are three posts that you might find helpful regarding custom identity:

Here Josh walks through how he does this in his iSO todo app: [http://www.thejoyofcode.com/Exploring_custom_identity_in_Mobile_Services_Day_12_.aspx](http://www.thejoyofcode.com/Exploring_custom_identity_in_Mobile_Services_Day_12_.aspx)

Chris also has two helpful posts: [http://chrisrisner.com/Authentication-with-Windows-Azure-Mobile-Services](http://chrisrisner.com/Authentication-with-Windows-Azure-Mobile-Services) and [http://chrisrisner.com/Authentication-with-iOS-and-Windows-Azure-Mobile-Services](http://chrisrisner.com/Authentication-with-iOS-and-Windows-Azure-Mobile-Services)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-11T08:53:30.627

您还可以从 TechEd 2013 中找到关于自定义身份验证提供程序以及使用服务器端脚本或数据库本身处理您的一些数据的精彩会话。

[http://channel9.msdn.com/Events/TechEd/NorthAmerica/2013/WAD-B338#fbid=sB9ZMarcc7_](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2013/WAD-B338#fbid=sB9ZMarcc7_)

# .net - vb .net，现有属性（例如背景色）进入自定义类别

> ID：13741926
> 
> 赞同：2
> 
> 时间：2012-12-06T10:44:58.383
> 
> 标签：.net, vb.net

我有一个使用 BackColor 原始属性的组件，我希望看到它与我的自定义类别分组。我怎样才能做到这一点？

我试图定义自己命名的 BackgroundColor 并工作（当然我可以将其插入到我的 owb 类别中），但是当我用装饰隐藏原始 BackColor 冗余属性时

[可浏览（假）]

设置背景颜色的功能不再起作用。我认为 [Browsable(False)] 只是对设计师隐藏了该属性，但实际上会完全禁用后续功能。

那么，我怎样才能将一些现有的原始属性分组到我自己的类别中呢？

非常感谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T16:10:58.487

> 我认为 [Browsable(False)] 只是对设计师隐藏了该属性，但实际上会完全禁用后续功能。

您使用该属性隐藏了自己的财产。您必须在属性声明中使用 Shadows 关键字来告诉编译器您有意隐藏基类属性。样板控制实现如下所示：

```
Imports System.ComponentModel

Public Class MyControl
    Inherits Control

    <Category("Aardvark")> _
    Public Shadows Property BackColor() As Color
        Get
            Return MyBase.BackColor
        End Get
        Set(ByVal value As Color)
            MyBase.BackColor = value
        End Set
    End Property

End Class 
```

这使得属性窗口的分类视图如下所示：

![在此处输入图像描述](../Images/514db1d630ef83e8d3635836498daf32.png)

# g-wan - 内容类型处理程序需要 G-WAN 重启

> ID：13741927
> 
> 赞同：0
> 
> 时间：2012-12-06T10:45:02.707
> 
> 标签：g-wan

我制作了一个 html.c 内容类型处理程序来设置 max-age=99999999。起初，它有效。
但是当我修改它并保存它时，
直到 G-WAN 服务器重新启动它才反映更改。
这是设计的行为吗？
更新：
添加如下代码：

```
#include "gwan.h" // G-WAN exported functions

#define CACHE "Expires: Fri, May 02 2042 00:00:00 GMT\r\nCache-Control: max-age=99999999\r\n"  

int main(int argc, char *argv[])
{
   http_header(HEAD_ADD, CACHE, sizeof(CACHE) - 1, argv);
   //http_header(HEAD_AFTER, CACHE, sizeof(CACHE) - 1, argv);
   return 200;
} 
```

请告知我是否做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:54:16.837

这是预期的行为。

虽然在`servlets`运行中重新加载，但所有`handlers`（连接处理程序、内容类型处理程序、协议处理程序）仅在程序停止和重新启动后才重新加载。

我们最初认为处理程序比 servlet 更不可能被修改。这可能会在未来的版本中发生变化。

# eclipse - 纸莎草安装错误

> ID：13741931
> 
> 赞同：1
> 
> 时间：2012-12-06T10:45:15.547
> 
> 标签：eclipse, eclipse-plugin, installation, uml, papyrus

通过 Eclipse Juno Help - Install New Software安装**Papyrus 时，出现此错误；**

```
Cannot complete the install because one or more required items could not be found.
  Software being installed: Papyrus customization (Incubation) 0.9.1.v201209190809 (org.eclipse.papyrus.customization.feature.feature.group 0.9.1.v201209190809)
  Missing requirement: Papyrus properties generation (Incubation) 0.9.1.v201209190809 (org.eclipse.papyrus.customization.properties.generation 0.9.1.v201209190809) requires 'bundle org.eclipse.m2m.qvt.oml.project 3.1.0' but it could not be found
  Cannot satisfy dependency:
    From: Papyrus customization (Incubation) 0.9.1.v201209190809 (org.eclipse.papyrus.customization.feature.feature.group 0.9.1.v201209190809)
    To: org.eclipse.papyrus.customization.properties.generation [0.9.1.v201209190809] 
```

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T05:59:09.743

我建议您遵循开普勒的 Papyrus 版本

请按照以下票证

[在开普勒上安装纸莎草纸](https://stackoverflow.com/questions/14967430/how-to-install-papyrus-kepler-fo-eclipse-4-2-1/17418227#17418227)

# intellij-idea - 在 IntelliJ 编辑器中更改“参数信息”的前景色

> ID：13741939
> 
> 赞同：1
> 
> 时间：2012-12-06T10:45:41.053
> 
> 标签：intellij-idea, color-scheme

如何更改 IntelliJ 中“参数信息”的前景色（当您在方法参数上按：“ctrl + P”时）？

: 文件 | 中没有任何内容 设置 | 颜色和字体

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:36:13.400

如果不更改外观和感觉，现在无法更改它，请参阅相关问题：

*   [IDEA-95904](http://youtrack.jetbrains.com/issue/IDEA-95904) Darcula 参数信息弹出颜色难以阅读
*   [IDEA-95873](http://youtrack.jetbrains.com/issue/IDEA-95873) Darcula：参数信息弹出窗口不可读

# android - 如何在android中保存联系人时避免重复

> ID：13741944
> 
> 赞同：3
> 
> 时间：2012-12-06T10:45:51.060
> 
> 标签：android, android-contentprovider

我想将我的联系人从 listview 添加到 android 中的联系人页面。我可以添加联系人。但是如何避免重复呢？

例如：我有一个名为 Jony 和编号为 123 的条目。如果我再次按下同一个联系人，则不应将其添加到联系人页面。如果联系人已经在联系人页面中，我不想添加联系人。我怎样才能做到这一点？

这是我的代码：

```
import_btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            ArrayList<HashMap<String, String>> newArrayList=null;

            //ArrayList<HashMap<String, String>> selectedContact=null;
            ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

            newArrayList=ContactImportAdapter.contactsArrayList;

            for(int i=0;i<newArrayList.size();i++)
            {

                String name;
                String number;
                String mail;

            name=newArrayList.get(i).get("import_viewContactName");
            number=newArrayList.get(i).get("import_viewContactNumber");
            mail=newArrayList.get(i).get("import_viewContactMail");

            int rawContactInsertIndex = ops.size();

                ops.add(ContentProviderOperation.newInsert(RawContacts.CONTENT_URI)
                    .withValue(RawContacts.ACCOUNT_TYPE, null)
                        .withValue(RawContacts.ACCOUNT_NAME, null).build());

                ops.add(ContentProviderOperation
                        .newInsert(Data.CONTENT_URI)
                        .withValueBackReference(Data.RAW_CONTACT_ID,rawContactInsertIndex)
                        .withValue(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE)
                        .withValue(StructuredName.DISPLAY_NAME, name) // Name of the person
                        .build());                  

            ops.add(ContentProviderOperation
                        .newInsert(Data.CONTENT_URI)
                        .withValueBackReference(
                                ContactsContract.Data.RAW_CONTACT_ID,   rawContactInsertIndex)
                                .withValue(Data.MIMETYPE, Phone.CONTENT_ITEM_TYPE)
                                .withValue(Phone.NUMBER, number) // Number of the person
                                .withValue(Phone.TYPE, Phone.TYPE_MOBILE).build());

                ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                        .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, rawContactInsertIndex)
                        .withValue(ContactsContract.Data.MIMETYPE,
                                ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
                        .withValue(ContactsContract.CommonDataKinds.Email.DATA, mail)
                       .withValue(ContactsContract.CommonDataKinds.Email.TYPE, ContactsContract.CommonDataKinds.Email.TYPE_WORK)
                        .build());

    //Toast.makeText(getApplicationContext(), "Contact Added Successfully", Toast.LENGTH_SHORT).show();     
            }

            newArrayList.clear();
                try
                {
                    ContentProviderResult[] res = getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
                }
                catch (RemoteException e)
                { 
                    // error
                }
                catch (OperationApplicationException e) 
                {
                    // error
                }   

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:07:37.370

首先，为了避免重复，您必须首先调用数据库并检查号码是否存在，然后您可以处理。

# javascript - 使用 $.scrollTop(0) 滚动在 iPhone Safari 上无法正常工作。有时

> ID：13741945
> 
> 赞同：0
> 
> 时间：2012-12-06T10:46:03.560
> 
> 标签：javascript, iphone, ios, safari, responsive-design

我有一个响应式网站，并且在通过 ajax 切换页面后滚动到页面顶部的 iOs Safari 浏览器存在问题。

**有时有效，有时无效。**

我使用以下功能滚动到顶部：

```
 setTimeout(function() {
       $('.mydiv').scrollTop(0);
    },1) 
```

也许这部分与我的问题有关。我隐藏了 iOs 设备上的地址栏。

```
 function hideAddressBar() {
        if( navigator.userAgent.match( /(iphone|ipod)/i ) ) {

            document.documentElement.style.overflow = 'scroll';
            document.body.style.height = '120%';
            $(".mydiv").height('120%');

        }
    } 
```

它在桌面浏览器上完美运行。

$(window).scrollTop(0) 是没有选择的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:26:15.303

```
document.getElementById('mydiv').scrollIntoView(); 
```

# hadoop - datanode、regionserver在Hbase-hadoop集成中的作用

> ID：13741946
> 
> 赞同：19
> 
> 时间：2012-12-06T10:46:10.210
> 
> 标签：hadoop, hbase

据我了解，行被插入到 HBase 表中，并作为区域存储在不同的区域服务器中。因此，区域服务器存储数据

同样，就 Hadoop 而言，数据存储在 hadoop 集群中的数据节点中。

假设我在 Hadoop 1.1.1 之上配置了 HBase 0.90.6，如​​下所示

2 个节点 - 主节点和从节点

1.  主节点充当，
    *   Hadoop - Namenode、Secondary Namenode、作业跟踪器、数据节点、任务跟踪器
    *   HBase - Master、RegionServer 和 zookeeper。
2.  从节点充当，

    *   Hadoop 数据节点和任务跟踪器
    *   HBase 区域服务器

根据我的说法，表数据是否存储在区域服务器中；那么数据节点和区域服务器的作用是什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-06T11:11:11.903

数据节点存储数据。区域服务器本质上是缓冲 I/O 操作；数据永久存储在 HDFS（即数据节点）上。我不认为将区域服务器放在您的“主”节点上是一个好主意。

以下是区域管理方式的简化图：

您有一个运行 HDFS（NameNode + DataNodes）的集群，复制因子为 3（每个 HDFS 块被复制到 3 个不同的 DataNodes）。

您在与 DataNodes 相同的服务器上运行 RegionServers。当写入请求到达 RegionServer 时，它首先将更改写入内存和提交日志；然后在某个时候它决定是时候将更改写入 HDFS 上的永久存储。这是数据局部性发挥作用的情况：由于您在同一台服务器上运行 RegionServer 和 DataNode，因此文件的第一个 HDFS 块副本将被写入同一台服务器。另外两个副本将被写入其他 DataNode。因此，服务于该区域的 RegionServer 几乎总是可以访问本地数据副本。

如果 RegionServer 崩溃或 RegionMaster 决定将区域重新分配给另一个 RegionServer（以保持集群平衡）怎么办？新的 RegionServer 将被强制首先执行远程读取，但一旦执行压缩（将更改日志合并到数据中） - 新的文件将由新的 RegionServer 写入 HDFS，并且将在 RegionServer 上创建本地副本（再次，因为 DataNode 和 RegionServer 在同一台服务器上运行）。

注意：如果 RegionServer 崩溃，之前分配给它的区域将被重新分配给多个 RegionServer。

好读：

*   Tom White，“Hadoop，权威指南”对 HDFS 架构有很好的解释。不幸的是，我没有阅读原始的 Google GFS 论文，所以我不知道它是否容易理解。

*   [谷歌大表](http://research.google.com/archive/bigtable-osdi06.pdf)文章。HBase 是 Google BigTable 的实现，我发现本文中的架构描述是最容易理解的。

以下是 Google Bigtable 和 HBase 实现之间的命名差异（来自 Lars George，“HBase，权威指南”）：

*   HBase - 大表
*   地区 - 平板电脑
*   RegionServer - 平板服务器
*   冲洗 - 轻微压实
*   小压实 - 合并压实
*   主要压实 - 主要压实
*   预写日志 - 提交日志
*   HDFS-GFS
*   Hadoop MapReduce - MapReduce
*   MemStore - 内存表
*   HFile - SSTable
*   动物园管理员 - 胖乎乎的

# winforms - 如何在 DevExpress XtraGrid (Winforms) 中调整单行的大小？

> ID：13741947
> 
> 赞同：2
> 
> 时间：2012-12-06T10:46:09.437
> 
> 标签：winforms, c#-4.0, devexpress

当我尝试调整单行大小时，所有行都会调整大小，我想确保在使用指针增加行高时只调整单行大小。谁能告诉我如何做到这一点？我正在使用 DevExpress DXperience 12.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:11:00.653

我从 DevExpress 得到了这个问题的答案。 [DevExpress 支持](https://www.devexpress.com/Support/Center/Question/Details/Q450528)

# ios - 从 NSData 分配 AVAsset

> ID：13741950
> 
> 赞同：3
> 
> 时间：2012-12-06T10:46:22.253
> 
> 标签：ios, avfoundation

我可以`AVAsset`从`NSData`.. 初始化吗？我知道我可以`AVData`使用如下函数从 url初始化

```
 [[AVURLAsset alloc] initWithURL:url options:nil]; 
```

任何人都可以建议我一种类似的`AVAsset`直接分配方式`NSData`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:57:43.197

据我所知，没有。`AVAsset`表示设备（内部）媒体库中的项目，因此使用自定义数据对其进行初始化没有多大意义。也许值得一提的是，这个类没有用于`NSData`.

我怀疑如果需要，您很可能需要重新设计代码逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-18T16:27:09.500

接受的答案不正确。

可以通过实现创建一个`AVAsset`from an 。`NSData``AVAssetResourceLoaderDelegate`

具体实现：

```
func resourceLoader(_ resourceLoader: AVAssetResourceLoader, shouldWaitForLoadingOfRequestedResource loadingRequest: AVAssetResourceLoadingRequest) -> Bool 
```

它必须：

1.  正确填写 loadingRequest.contentInformationRequest。提示，使用`loadingRequest.contentInformationRequest.contentType = AVFileType.mycontenttype.rawValue`
2.  正确响应数据

稍后我会发布一些代码，但你可以谷歌“AVAssetResourceLoaderDelegate github”获取示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-19T06:27:06.603

这是我解决它的方式的替代解决方案。间接地，我首先通过将 NSData 写入/保存到本地目录进行初始化，然后从该文件路径初始化 AVAsset。

```
AVAsset *asset = [AVAsset assetWithURL:[NSURL fileURLWithPath:locationUrl]]; 
```

您可以尝试先将 nsdata 写入文件路径，然后从该路径初始化到 AVAsset。

```
[videoData writeToFile: locationUrl atomically:YES]; 
```

只需确保文件位置 URL 正确，并测试确认数据是否正在保存到该文件路径，如果在加载时发生任何错误。最后，如果您不再需要它们，请不要忘记清理您的文件。

# java - 独立运行 Camel 并让它继续运行

> ID：13741951
> 
> 赞同：1
> 
> 时间：2012-12-06T10:46:23.847
> 
> 标签：java, apache-camel

我第一次尝试使用 Apache Camel，我正在尝试使用此处找到的示例创建一个独立的应用程序：http: [//camel.apache.org/running-camel-standalone-and-have-it-keep-运行.html](http://camel.apache.org/running-camel-standalone-and-have-it-keep-running.html)

此示例使用`org.apache.camel.Main`该类来管理应用程序的生命周期。该示例工作正常，但我不明白示例中如何创建 Camel 上下文以及如何获取它以添加组件。我想在默认上下文中添加类似这样的内容：

```
ConnectionFactory connectionFactory = new ActiveMQConnectionFactory("vm://localhost?broker.persistent=false");
context.addComponent("myJms", JmsComponent.jmsComponentAutoAcknowledge(connectionFactory)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:02:41.830

鉴于您使用的是 org.apache.camel.main.Main 类或仅定义了一个上下文的 spring 版本，您可以这样做，`main.getCamelContexts().get(0).addComponent("myJms",JmsComponent.jmsComponentAutoAcknowledge(connectionFactory));`因为主类只拥有一个上下文。当您执行`main.run();`一个名为“camel-1”的上下文时，Main 将创建该上下文。

另一种方法是在运行方法之前将组件绑定到注册表： `main.bind("myJms",JmsComponent.jmsComponentAutoAcknowledge(connectionFactory));`

挑选 ：）

# xcode - XCode 4.5.2 选择不是可以重命名的类型

> ID：13741952
> 
> 赞同：5
> 
> 时间：2012-12-06T10:46:27.793
> 
> 标签：xcode

重命名变量/类对我来说似乎被打破了。XCode 4.5.2 弹出一个菜单，询问我要将变量重命名为什么，我输入名称并点击预览，然后出现另一个屏幕，显示消息“选择不是可以改名了。”

我试过删除派生数据（通过命令行，也通过管理器），它没有修复它。有人找到解决方案了吗？有几个人在旧版本的 XCode 上遇到过这个问题，但他们说它已在新版本上修复（但我使用的是最新版本）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T16:01:37.917

I've just spent about an hour trying to get refactoring working again on Xcode 5.0.1 after it spontaneously stopped working for no apparent reason.

I'm not sure what step actually fixed it because it seemed Xcode was keeping certain processes running even when I was quitting it, so it actually started working after a reboot of the machine, but these are the steps I took:

*   Quit Xcode
*   Deleted ~/Library/Developer/Xcode/DerivedData
*   Deleted .xcodeproj/project.xcworkspace/xcuserdata
*   Deleted .xcodeproj/xcuserdata/.xcuserdatad
*   Reboot
*   Restart Xcode
*   Product -> Clean Build Folder

After that, refactoring seemed to spring back into life. Deleting the xcuserdata did mean that Xcode lost some of my layout settings, etc but having a working refactor tool was more useful!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:10:03.020

在 *.m 文件中选择类名时出现此错误。就我而言，解决方案是在 *.h 文件中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:01:39.620

不知道您的问题，但是当我尝试预览时，可以看到分屏视图或更类似于 xcode 的辅助编辑器视图（可以同时查看 .h 和 .m 文件）以及要重命名的变量实例旧名称和新名称。在你的情况下它可能会被窃听。是在所有项目中都相同还是只是其中几个？

# perl - Perl 动态创建方法

> ID：13741954
> 
> 赞同：0
> 
> 时间：2012-12-06T10:46:40.963
> 
> 标签：perl, oop, methods

我已经研究（谷歌）没有成功，所以我转向 SO 寻求帮助。

我似乎记得一种编写 perl 包的方法，这样如果调用了任何缺少的方法，辅助函数将执行该操作。

所有“缺失”的方法都具有相同的外观和感觉。他们只需要使用传入的参数调用另一个库，加上“缺失”方法的名称。

该类将有一些具体的方法，例如。构造函数和析构函数。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:49:16.450

我认为您正在寻找[自动加载](http://docstore.mik.ua/orelly/perl2/prog/ch10_02.htm)

> 通常，您不能调用未定义的子例程。但是，如果在未定义子例程的包中（或者在对象方法的情况下，在对象的任何基类的包中）有一个名为 AUTOLOAD 的子例程，则调用 AUTOLOAD 子例程时使用的参数相同传递给原始子程序。您可以定义 AUTOLOAD 子例程以像常规子例程一样返回值，或者您可以让它定义不存在的例程，然后调用它，就好像它一直都在那里一样。

调用的函数/方法名称因此可用：

```
my $method= our $AUTOLOAD; 
```

# python - 使用 Python 2.7 在 Google App Engine 中使用 setuptools 有什么用

> ID：13741955
> 
> 赞同：0
> 
> 时间：2012-12-06T10:46:51.353
> 
> 标签：python, google-app-engine, setuptools

有人可以解释一下如何在谷歌应用引擎中的 python 中使用 setuptools。它在文档中被列为第三方库。如果我无法访问文件系统，我该如何使用它？

[https://developers.google.com/appengine/docs/python/tools/libraries27](https://developers.google.com/appengine/docs/python/tools/libraries27)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:48:47.403

`setuptools`提供[`pkg_resources`模块](https://pythonhosted.org/setuptools/pkg_resources.html)，让您从 python 鸡蛋中加载资源并查找元数据。

您可以使用它从部署中包含的鸡蛋中加载资源。

# spring - Spring + JSR 303 验证组被忽略

> ID：13741956
> 
> 赞同：1
> 
> 时间：2012-12-06T10:46:53.160
> 
> 标签：spring, spring-mvc, bean-validation

我们有一个带有 JSR 注释的简单 bean

```
公共类 CustomerDTO {

    私有静态最终长序列版本UID = 1L；

    私人整数 id；

    @NotEmpty(message = "{customer.firstname.empty}")
    私人字符串名；

    @NotEmpty(message = "{customer.lastname.empty}")
    私人字符串姓氏；

    @NotEmpty(groups={PasswordChange.class}, message="{password.empty}")
    私人字符串密码；

    @NotEmpty(groups={PasswordChange.class}, message="{confirmation.password.empty}")
    私人字符串密码2；

}

```

我们有一个 Spring Controller

```
@RequestMapping(value="/changePassword", 方法 = RequestMethod.POST)
public String changePassword(@Validated({ PasswordChange.class }) @ModelAttribute("customerdto") CustomerDTO customerDTO, BindingResult 结果, Locale locale) {
    logger.debug("更改密码已提交信息：" + customerDTO.toString());
    尝试 {
        passwordStrengthPolicy.checkPasswordStrength(locale, customerDTO.getPassword());
        if (result.hasErrors()) {
            返回“更改密码”；
        }
        logger.debug("调用客服更改密码：" + customerDTO);
        customerOnlineNewService.changePassword(customerDTO);
    } 捕捉（PasswordNotChangedException e）{
        logger.error("无法更改密码 PasswordNotChangedException:" + customerDTO.toString());
            返回“更改密码”；
    } 捕捉（PasswordNotSecureException e）{
        返回“更改密码”；
    }
    return createRedirectViewPath("changePassword");
}

```

我们的问题是，当调用 changePassword 时，验证器会忽略组（PasswordChange.class）并仅验证不在组中的 firstName 和 lastName。

任何想法？非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:03:26.443

可能与验证顺序有关？( [http://docs.oracle.com/cd/E19798-01/821-1841/gkahp/index.html](http://docs.oracle.com/cd/E19798-01/821-1841/gkahp/index.html)--) )-- >自定义组验证命令听起来确实像！

# mysql - 尝试使用加载数据本地文件 SQL 导入 csv 文件并转换为整数

> ID：13741959
> 
> 赞同：3
> 
> 时间：2012-12-06T10:47:30.417
> 
> 标签：mysql, sql, csv, data-import

我尝试导入一个（巨大的）csv文件，在第一列中包含一个hotel_id，我希望sql表中的数据类型是这个代码的整数；

```
load data local infile 'Images_20121121.csv' into table cimages fields terminated by '|' LINES terminated by '\n' (@var1, link, description) set hotel_id=CAST(@var1 AS UNSIGNED INTEGER); 
```

但这不起作用（我得到一个无效的数据类型错误），有什么想法吗？

CSV 文件的格式如下；

```
ˇ˛hotelid|url|description
4052465|https://carsolizeprod.blob.core.windows.net/images/hotels/a7ce966f-1c8d-4cdb-8050-0000132d2561.jpeg|
4020907|https://carsolizeprod.blob.core.windows.net/images/hotels/7230b738-4746-4751-8212-0000171a99c5.jpeg|
4263993|https://services.carsolize.com/images/hotels/f7f27005-3546-4347-8e18-000021a66962.jpeg|Exterior
4136518|https://services.carsolize.com/images/hotels/30ba8994-acd9-4993-9f74-0000359c309b.jpeg|Guest room
4305893|https://services.carsolize.com/images/hotels/c960b56a-bba6-4256-a0cd-00003f4be196.jpeg|Bar
4023461|https://services.carsolize.com/images/hotels/30388432-ffd2-4b2d-bb86-0000489cfbcf.jpeg|
4205330|https://services.carsolize.com/images/hotels/7473dde7-e7e3-4228-ab1d-000049e7ecfe.jpeg| 
```

我得到的警告是；

```
| Warning | 1292 | Truncated incorrect INTEGER value: '' | 
```

更新：我发现实际导入的 varchar 字段在每个字符之间包含一个 nul 值，所以这可能是问题所在（？）（查看二进制中的值，每个字符之间都有一个 00 字段，因为它是文本aNULbNULcNUL 我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:30:23.660

查询似乎很好。但是，CSV 文件的内容是什么？（如果可能，提供样品）。

另外，请注意，如果第一行包含列名，那么您可能希望将查询更改为：

```
load data local infile 'Images_20121121.csv' into table cimages fields terminated by '|' LINES terminated by '\n' IGNORE 1 LINES (@var1, link, description) set hotel_id=CAST(@var1 AS UNSIGNED INTEGER); 
```

此外，此警告更有意义，请尝试验证空白行的第一列的内容，如果存在这样的行，它可能是罪魁祸首。

另一个建议，尝试对您显示的小样本应用相同的查询，它有效吗？

快速查看下面的链接，可能会让您更深入地了解 LOAD DATA 的工作原理。

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:57:39.257

Carsolize 提供以 UTF-16 编码的 CSV 文件。`file`您可以通过针对 CSV 文件运行 Linux 命令来验证这一点。

如[`LOAD DATA INFILE`语法](http://dev.mysql.com/doc/en/load-data.html)中所述：

> ###  笔记
> 
> 无法加载使用`ucs2`、`utf16`或`utf32`字符集的数据文件。

您可以使用 iconv 转换为 UTF-8：

```
iconv -f UTF-16 -t UTF-8 Images_20121121.csv > Images_20121121_utf8.csv 
```

# php - 根据登录用户名更改表单

> ID：13741965
> 
> 赞同：-2
> 
> 时间：2012-12-06T10:48:03.307
> 
> 标签：php, session

在我的主页上，我有一个登录表单。是否可以根据已登录的用户名更改为其他内容？

例如

```
<form id="form1" name="form1" method="post" action="testconnect.php">
  <p>
    <label for="username">Username:</label>
    <input type="text" name="username" id="username" />
  </p>
  <p>
    <label for="password">Password:</label>
    <input type="text" name="password" id="password" />
  </p>
  <p>
    <input type="submit" name="login" id="login" value="Submit" />
  </p>
</form> 
```

可以在主页上更改以显示

> 欢迎返回“用户名”。登出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:52:24.997

所以，如果我理解正确，如果用户已经登录，你想隐藏表单并在消息中显示他们的用户名？是的，你可以这么做。如果您使用 PHP 会话来存储用户数据，您可以执行以下操作：

```
<?php
// Make sure to start a session first
if(!session_id()) {
    session_start();
}

// If a username is set, display a welcome message.
if(isset($_SESSION['username'])) {
    echo "Welcome back " . $_SESSION['username'];
} else {
    // No login session found, output the form here instead
?>
<form id="form1" name="form1" method="post" action="testconnect.php">
  <p>
    <label for="username">Username:</label>
    <input type="text" name="username" id="username" />
  </p>
  <p>
    <label for="password">Password:</label>
    <input type="text" name="password" id="password" />
  </p>
  <p>
    <input type="submit" name="login" id="login" value="Submit" />
  </p>
</form>
<?php
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:49:48.427

输入登录数据，`$_COOKIE`如果你找到 cookie echo 'Hello username' else echo 你的表单

# c# - 如何更改 Metro 应用程序的 XAML/C# 中单选按钮的样式？

> ID：13741970
> 
> 赞同：3
> 
> 时间：2012-12-06T10:48:27.060
> 
> 标签：c#, xaml, button, microsoft-metro, radio

我正在尝试为 Metro 应用程序更改 XAML/C# 中单选按钮的样式，但我找不到有关如何执行此操作的任何信息。当我放大文本时，我希望我的单选按钮更大且居中。任何帮助或代码示例都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:53:25.957

您必须编辑控件的模板。

您可以使用 Blend 或“手动”来完成。

检索单选按钮的默认模板，然后对其进行自定义以满足您的需求

编辑：[这](http://msdn.microsoft.com/en-us/library/ms751600%28v=vs.85%29.aspx)`RadioButton`是关于模板定制的 MSDN 资源。

EDIT2：所有默认模板都可以在[这里找到](http://msdn.microsoft.com/en-us/library/aa970773.aspx)

# java - 全局初始化的 Drools 规则测试

> ID：13741972
> 
> 赞同：1
> 
> 时间：2012-12-06T10:48:34.943
> 
> 标签：java, global, drools

说我在 drl 中有以下流口水规则

```
global java.lang.Boolean test;
rule "Initialize global"
salience 1000
when
then drools.workingmemory.setGlobal("test", new Boolean(true))
end 
```

这按预期工作，但我也不希望每次都触发规则，所以我想添加检查全局测试是否已初始化，如果没有，则设置它，否则，不要触发规则。你会怎么做？

我相信我也需要 no-loop true 。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T09:09:10.837

使用没有约束的规则是初始化规则的常见模式。您拥有的规则每个会话仅执行一次，因此不必担心重新执行。关于无循环，由于您的规则中没有任何条件，因此无法重新激活它。当您在 RHS 中使用 modify() 或 update() 时，使用无循环来避免递归激活。

此致'

# sql - 选择两列但不是序列的组合

> ID：13741978
> 
> 赞同：1
> 
> 时间：2012-12-06T10:49:07.687
> 
> 标签：sql, postgresql, aggregate-functions

我对这个问题越来越绝望：我有一个只有 3 列的表，每列都引用成员或旅程的 ID。

```
create table sharesRoom (
 member1 int references Members,
 member2 int references Members,
 journey int references Journeys,
 primary key (member1,member2,journey)); 
```

我想编写一个 PLPGSQL 函数，该函数会发出通知，其中包含与谁共享房间的信息以及与谁共享房间的信息。对于该通知，成员存储在表中的顺序无关紧要。所以这张表

```
1 2 1
2 1 2
3 4 1
4 3 1
5 6 1
8 7 1 
```

应该在通知中提出：member1 member2 count（他们多久共享一个房间）

```
1 2 2
3 4 1 (same journey, so this is just 1)
5 6 1
8 7 1 
```

如您所见，成员列的顺序无关紧要。

解决这个问题的最佳方法是什么？我不得不承认，我什至不知道在 select 语句中放什么 :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:53:34.727

您需要一种过滤掉相同成员只是以不同顺序排列的“重复项”的方法。一种方法是使用[`greatest`and`least`](http://www.postgresql.org/docs/9.2/static/functions-conditional.html#FUNCTIONS-GREATEST-LEAST)：

```
select high_member, low_member, count(*)
from( select distinct greatest(member1, member2) as high_member, 
                      least(member1, member2) as low_member, 
                      journey 
      from sharesRoom )
group by high_member, low_member 
```

# soundcloud - 如何从 SoundCloud 流中获取元数据？

> ID：13741981
> 
> 赞同：3
> 
> 时间：2012-12-06T10:49:13.723
> 
> 标签：soundcloud, soundmanager2

使用 Soundmanager2 获取元数据在闪存权限方面遇到了麻烦。我想要的是访问轨道的元数据以生成视觉效果。（[这里](http://reasoner.comoj.com/visual)的例子）

我注意到的一件事是你说

> 他们的 api 允许深度混搭，允许访问几乎所有的轨道元数据

所以我知道你打算让这成为可能，因为需要[的 crossdomain.xml](http://api.soundcloud.com/crossdomain.xml)文件的存在表明了这一点。问题是这个文件只授予 api 子域的权限。当向 api 发出请求时，会给出 3XX 响应，然后我们被转移到 ec-media.soundcloud.com 。此站点没有 crossdomain.xml 文件，因此 flash 和 soundmanager 遇到错误并且没有收到元数据。

我通过搜索找到了一些这样的实例，主要是[SoundCloud + Soundmanager2 + EQData](https://stackoverflow.com/questions/11642556/soundcloud-soundmanager2-eqdata)正是我遇到的问题。不过，这个问题从未得到回答，事实上，唯一的回答来自原始发帖者，并且围绕这个问题留下了一个黑客。

> 我的解决方法是每次重新开始一首歌曲时，我都会修改声音的 URL 以包含一个新的 ts={time} 参数，然后在 SMSound 上运行 .load() ，这会导致重新加载并修复问题。

所以我想知道为什么您的 ec-media 子域中省略了 crossdomain.xml 文件，是出于安全原因吗？如果是这样，您为什么说我们可以访问元数据？

最终，您能否落实上述文件，还是不能落实，我们是否应该解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:09:57.140

[crossdomain.xml](http://ec-media.soundcloud.com/crossdomain.xml)现在可供所有人使用。我很抱歉花了这么长时间。

# php - 使用 zf2 在视图文件中获取站点路径

> ID：13741984
> 
> 赞同：0
> 
> 时间：2012-12-06T10:49:24.557
> 
> 标签：php, zend-framework2

这是一个非常愚蠢的问题，但我是 zf2 的新手

任何人都可以告诉我如何在视图文件中获取这样的路径

“http://localhost/myprj/”

在 zf1 中，我使用 $this->baseUrl("assets/admin/images/shared/side_shadowleft.jpg") 作为图像的 src，我得到了结果，但我无法在 ZF2 中管理它...

我找到了 $this->basePath();

但它返回“myprj/public”我不需要这个。我需要使用 http 路径，我相信所以它必须需要，否则我可以像这样在 index.php 中创建常量。

```
 define("SITE_PATH", $this->serverUrl()."myprj"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T07:31:44.350

用G**gle真的有那么难吗？

```
<?php echo $this->basePath('assets/admin/images/shared/side_shadowleft.jpg'); 
```

或者

```
<?php echo $this->basePath()?>/assets/admin/images/shared/side_shadowleft.jpg 
```

此类示例也包含在 ZF2 框架应用程序中。

# php - 尝试使用 phpunit 获取非对象错误的属性

> ID：13741991
> 
> 赞同：0
> 
> 时间：2012-12-06T10:49:47.660
> 
> 标签：php, phpunit

我开始使用 phpunit，而且我对 OO PHP 的接触有限，所以我认为我缺少一些基本的东西。在设置一个非常简单的测试时，我得到了错误`Trying to get property of non-object`。

这就是我要测试的

```
class Employee
{
    protected $jobTypeModifier, $manager, $id;
    public $name, $employee, $years, $allowances, $allowances_left, $extra, $carried, $totalTaken, $holidays;

    function Employee($id)
    {
        $this->jobTypeModifier = 1;
        $this->manager = 0;
        $this->totalTaken = 0;
        $this->setEmployeeId($id);
    }

    function myId()
    {
        return $this->id;
    }
} 
```

这是我的测试

```
class EmployeeTest extends PHPUnit_Framework_TestCase
{
    protected $employee;

    protected function setUp(){
        $this->employee = new Employee(1);
    }

    protected function tearDown() {
        unset($this->employee);
    }

    public function testMyId()
    {
        $actual = $this->employee->myId();
        $expected = 1;
        $this->assertEquals($actual, $expected);
    }
} 
```

我想我在这里遗漏了一些基本/明显的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:08:43.513

好的，

*   首先，正如我在评论中所说：

> 首先，从 PHP 5.3.3 开始，您的“Employee”将不会被视为构造，而只是常规方法。使用 __construct 作为构造函数。检查你有哪个版本哦 PHP。

*   在您的方法中`Employee`，您调用不存在的方法`setEmployeeId`

*   逐行分隔您的属性

*   定义方法时使用 public/protected/private

*   在断言中，期望值应该作为第一个参数传递

# svn - 无法部署来自 svn 的项目

> ID：13741992
> 
> 赞同：0
> 
> 时间：2012-12-06T10:49:58.733
> 
> 标签：svn, tomcat, struts

你好我有以下情况

我有一个位于 svn 服务器上的项目，当我想在 tomcat 上部署它时出现错误，它是基于 struts 的 web 项目

```
 Grave: Error loading WebappClassLoader
  context: /GRH
  delegate: false
  repositories:
    /WEB-INF/classes/
----------> Parent Classloader:
org.apache.catalina.loader.StandardClassLoader@f0a363
 org.apache.struts.action.ActionServlet
java.lang.ClassNotFoundException: org.apache.struts.action.ActionServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1079)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1002)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:506)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1385)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:306)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1389)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1653)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1662)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1642)
    at java.lang.Thread.run(Thread.java:722)

déc. 06, 2012 10:48:31 AM org.apache.catalina.core.StandardContext loadOnStartup
Grave: La servlet /GRH a généré une exception "load()"
java.lang.ClassNotFoundException: org.apache.struts.action.ActionServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1079)
    at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:1002)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:506)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1385)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:306)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1389)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1653)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1662)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1642)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:52:33.273

问题是您的应用程序分发缺少一些库。你得到这样的错误。如果您希望它们在您的 SVN 存储库中，那么您应该提交它们，否则您应该在外部交付它们，即使用 Maven。

# python - 有没有办法让类用 sphinx 继承其超类的文档？

> ID：13741998
> 
> 赞同：4
> 
> 时间：2012-12-06T10:50:11.670
> 
> 标签：python, python-sphinx

假设我有一堂课

```
class A(object):
  def myfunction():
    """A."""
    pass 
```

和一个子类

```
class B(A):
  def myfunction():
    pass 
```

是否可以使用 sphinx 从 A.myfunction 继承 B.myfunction 的 API 文档？B.myfunction 的文档应该是“A”。也是。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T12:07:46.600

在python中，您可以通过在创建对象后分配给其“文档字符串”来设置对象的文档`__doc__`。最简洁的方法是使用复制父类的文档字符串的装饰器。您甚至可以为 提供额外的文档字符串`B.myfunction`，并将其附加到 的文档中`A.myfunction`（因为您可能正在专门研究它）。使用以下装饰器（改编[自我](https://stackoverflow.com/a/12218693/699305)对类似问题的回答），您可以复制覆盖函数的文档字符串，如下所示：

```
def copydoc(fromfunc, sep="\n"):
    """
    Decorator: Copy the docstring of `fromfunc`
    """
    def _decorator(func):
        sourcedoc = fromfunc.__doc__
        if func.__doc__ == None:
            func.__doc__ = sourcedoc
        else:
            func.__doc__ = sep.join([sourcedoc, func.__doc__])
        return func
    return _decorator

class A(object):
  def myfunction():
    """Documentation for A."""
    pass

class B(A):
  @copydoc(A.myfunction)
  def myfunction():
    """Extra details for B."""
    pass 
```

结果：

```
>>> 帮助（B.myfunction）
关于模块 __main__ 中方法 myfunction 的帮助：

myfunction() 未绑定的 __main__.B 方法
    A 的文档。
    B的额外细节。

```

这需要明确说明您从哪里复制文档字符串：`@copydoc(A.myfunction)`。它可以说比全自动解决方案更灵活，因为您可以选择从哪里复制。

根据对[这个问题](https://stackoverflow.com/q/306130/699305)的回答，我得出结论，一个干净、全自动的解决方案是不可能的：“函数只在运行时成为方法”，[这个答案说，](https://stackoverflow.com/a/307263/699305)所以装饰器无法在函数中查找父类名称目的。你能做的最好的就是装饰师`@copydoc(A)`。这很容易，但是您不妨添加源方法的名称并保留灵活性。（如果您不同意，请发表评论，我将提供代码）。

# c# - 编码的 UI 测试向下转换不起作用

> ID：13741999
> 
> 赞同：5
> 
> 时间：2012-12-06T10:50:14.027
> 
> 标签：c#, automation, coded-ui-tests

我一直在尝试将泛型引入我们的自动化代码，因此我试图将 WpfControl 转换为泛型类型 T，其中 T 被限制为 WpfControl 类型。

```
return control as T; 
```

T 将始终是 WpfControl 的子级，但是当我将 WpfControl 类型的控件转换为泛型类型时，它返回 null。我还尝试将控制权转换为确切的子类型，例如：

```
var childControl = control as WpfTabList; 
```

这仍然返回`null`。有人遇到过类似的问题吗？

看到这个[WpfControl 类](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.uitesting.wpfcontrols.wpfcontrol.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T14:45:50.043

一些建议：

首先，在您的通用方法中，请使用 geteric 类型规范。喜欢

```
public T GetControl<T>(...) where T : WpfControl 
```

在子控件不是 TabList 的情况下，您尝试将 a`WpfControl`与 a匹配的假设和实现存在错误。`WpfTabList`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T18:00:44.430

这绝对有效。[我的github](https://github.com/spelltwister/CodedUIFluentExtensions/tree/master/CodedUIExtensions/CaptainPav.Testing.UI.CodedUI)上有一整套这些。

**您可以添加更多代码来显示控件设置的内容吗？**

这里有一些摘录来展示这可能是什么样子。

```
public static T Find<T>(this UITestControl parent) where T : UITestControl, new()
    {
        return new T() { Container = parent };
    }

public static IEnumerable<T> FindAll<T>(this UITestControl parent) where T : UITestControl, new()
    {
        return parent.Find<T>().FindAllAsType();
    }

private static IEnumerable<T> FindAllAsType<T>(this T current) where T : UITestControl, new()
    {
        if (typeof(T).IsSubclassOf(typeof(HtmlControl)))
        {
            return current.FindMatchingControls().Select(x => new T().ExtendFrom(x));
        }
        return current.FindMatchingControls().OfType<T>();
    }

private static IEnumerable<U> FindAllCastTo<T, U>(this T current) where T : UITestControl
    {
        return current.FindMatchingControls().Cast<U>();
    } 
```

最可能的情况是控件类型不是您尝试将其转换为的类型，或者它为空。