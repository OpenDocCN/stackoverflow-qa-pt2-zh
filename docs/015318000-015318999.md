# StackOverflow 问答 15318000-15318999

# android - 关闭特定片段的 ActionBar HomeButton

> ID：15318002
> 
> 赞同：0
> 
> 时间：2013-03-10T01:45:37.223
> 
> 标签：android, android-actionbar

我想禁用特定的主页按钮（左图标）`fragment`。我当然想要它，只是不可点击。所以我试图`Activity`通过这样做来覆盖父级`fragment`：

```
@Override
public void onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);

    MenuItem home = menu.findItem(android.R.id.home);
    home.setEnabled(false);

} 
```

还有另一种方法可以做到这一点吗？

注意：使用`ActionBarSherlock`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T01:49:37.390

您需要获取一个`ActionBar`实例，然后像这样禁用主页按钮：

```
getSherlockActivity().getSupportActionBar().setHomeButtonEnabled(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T01:47:30.667

您应该改为使用`ActionBar`禁用该按钮：

```
ActionBar actionBar = getSupportActionBar();
actionBar.setShowHomeAsUpEnabled(false); 
```

# ios - 在 UILongPressGestureRecognizer 中获取每次触摸的坐标

> ID：15318004
> 
> 赞同：2
> 
> 时间：2013-03-10T01:45:52.713
> 
> 标签：ios, objective-c, cocoa-touch, uigesturerecognizer

我有一个`UILongPressGestureRecognizer`设置`numberOfTouchesReguired = 2`。如何获得视图上每个手指的连续坐标？

目前我有这个，但它似乎将所有触摸的位置组合成 1 个坐标。

```
- (void)handleLongPress:(UILongPressGestureRecognizer *)sender {
    CGPoint locationInView = [发件人 locationInView:nil];
}
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T01:49:20.307

请参阅`UIGestureRecognizer`. 它为此提供了方法：

```
- (void)handleLongPress:(UILongPressGestureRecognizer *)sender {
    if (sender.state == UIGestureRecognizerStateChanged) {
        NSUInteger *touchCount = [sender numberOfTouches];
        for (NSUInteger t = 0; t < touchCount; t++) {
            CGPoint point = [sender locationOfTouch:t inView:sender.view];
        }
    } 
```

# python - Python，将bigram dict与文本匹配

> ID：15318005
> 
> 赞同：0
> 
> 时间：2013-03-10T01:45:57.037
> 
> 标签：python

我正在努力将 3 个单词的句子与两个单词的 digram 字典匹配，该字典计算（第 1 个单词和第 2 个单词）和（第 2 个单词和第 3 个单词）的频率。我想要的是如何匹配字符串（AAA BBB CCC）在二元组中并且（AAA BBB）有一个计数并且（BBB CCC）有一个计数然后我们取最大值？

```
Counter({
('BBB', 'DDD'): 3, 
('AAA', 'BBB'): 2, 
('DDD', 'XXX'): 1, 
('DDD', 'YYY'): 1,
('YYY', 'BBB'): 1, 
('BBB', 'CCC'): 1, 
('CCC', 'AAA'): 1, 
('XXX', 'BBB'): 1}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:37:45.973

向您的计数器查询构成您的三词句子的两个二元组并比较它们应该非常简单。这是一种方法：

```
def find_sentence_bracketing(sentence, bigram_dict):
    left = sentence[0:2]
    right = sentence[1:3]
    if bigram_dict[left] > bigram_dict[right]:
        return "left bracketing"
    else:
        return "right bracketing" 
```

您当然可以做一些除了返回字符串之外的事情，这只是为了演示基本思想。

代码的重要部分是生成`left`和`right`二元组元组的元组切片，然后可以将其用于索引到字典中。

# iphone - iPhone 表单样式

> ID：15318007
> 
> 赞同：1
> 
> 时间：2013-03-10T01:46:10.333
> 
> 标签：iphone, css, html, forms

好的，我不完全是开发人员，但我正在这里建立一个网站：[http ://www.theycallmeben.com](http://www.theycallmeben.com)

底部的联系表单是我使用简单的 HTML 和 php 构建的第一个表单。让我抓狂的是，我 iPhone 上的表单样式与 Web 上的不同。这些字段的边缘是圆角的，提交按钮使用的是我的代码中甚至不存在的图像（我不认为）。

截图：http: [//i.imgur.com/PEnFOf2.png](http://i.imgur.com/PEnFOf2.png)

我的媒体查询中没有针对此表单的特定 CSS 样式，只有在计算机上查看的表单中使用的样式。为什么会不一样？

有任何想法吗？对不起，如果这很愚蠢......我是一个自学成才的人:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T01:51:00.797

试试这个，可能吗？

```
textarea, select, button, input{
    -webkit-border-radius: 0px;
    border-radius: 0px;
} 
```

此外，使用 CSS 重置可能会解决问题。我喜欢[http://html5reset.org/](http://html5reset.org/)。

# java - 单击菜单中的项目后如何显示文本框。安卓

> ID：15318014
> 
> 赞同：1
> 
> 时间：2013-03-10T01:46:58.207
> 
> 标签：java, android, menu

我对 android 开发完全陌生，我目前正在开发我的第一个应用程序（不会出现在市场上）。我正在使用这个应用程序作为学习体验。我没有受过正规教育，因为我还在上高中。我的问题是单击菜单项后，我无法显示文本框。另外，我如何在我的菜单中添加更多项目？谢谢（对不起，我对android开发的无知......）。

```
 @Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
        case R.id.action_settings:
            actset();
            return true;

        default:
            return super.onOptionsItemSelected(item);
    }
}
private void actset() {
    // TODO Auto-generated method stub
    System.out.println("Developed By Shirwa Mohamed.. ");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T01:53:55.710

获得所需内容的最简单方法可能是显示[`Toast`](http://developer.android.com/guide/topics/ui/notifiers/toasts.html).

而不是使用`System.out.println`in `actset`，试试这个：

```
Toast.makeText(
    getApplicationContext(),
    "Developed By Shirwa Mohamed.. ",
    Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T01:55:26.097

出于教育目的，我建议将其`Toast`用于轻量级消息：

```
Toast.makeText( this, "Developed By Shirwa Mohamed.. ", Toast.LENGTH_LONG).show(); 
```

因为`System.out.println`不会出现在 Android 屏幕上。

如果你想要更多的金色星星，你可以创建完整的`AlertDialog`盒子：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Developed by");
builder.setMessage("Shirwa Mohamed");
builder.setPositiveButton( "ok", null);
builder.create().show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T02:00:29.773

正如其他人所说，一个`Toast`对象可能适用于您想要的。它会在短时间内显示一条消息，然后消失。但是，如果您想要更多控制或想要显示更多信息，那么您可以考虑使用[AlertDialog](http://developer.android.com/guide/topics/ui/dialogs.html)，它会显示一个小窗口，显示您想要的任何信息。

或者，如果您想要更多功能，您可以创建一个单独的类并声明

```
android:theme="@android:style/Theme.Dialog" 
```

在`<activity`你的标签中`manifest`。这将显示一个单独`Activity`的`Dialog`外观。然后你只需使用 an`Intent`来启动它`Activity`

# c++ - c++ 重载 ==operator 需要一个 AND 两个参数

> ID：15318019
> 
> 赞同：1
> 
> 时间：2013-03-10T01:48:19.640
> 
> 标签：c++, overloading, operator-keyword

我正在尝试在我正在做的项目中重载 == 运算符。声明和定义是：

```
friend bool operator==(const TradeItem& item);

bool TradeItem::operator==(const TradeItem& item) 
```

当我编译它时，它说：'bool operator==(const TradeItem&)' 必须正好有两个参数。所以我修改它有两个这样的论点：

```
friend bool operator==(const TradeItem& i1, TradeItem& i2);

bool TradeItem::operator==(const TradeItem& i1, TradeItem& i2) 
```

但是当我编译它时，它告诉我它只需要一个论点....谈论给我解决办法。有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T01:51:21.917

问题是：

```
friend bool operator==(const TradeItem& item); 
```

需要两个参数和：

```
bool TradeItem::operator==(const TradeItem& item) 
```

需要一个论据。

这是因为非会员版本`operator==`总是需要两个，而会员版本需要一个。您的朋友声明声明了非成员运算符重载。

```
class C {
    friend bool operator==(const C &lhs, const C &rhs);
public:
    bool operator==(const C& rhs);
};

bool operator==(const C &lhs, const C &rhs) { return true; }

bool C::operator==(const C& rhs) { return true; } 
```

此外，如果您需要在左侧允许类型转换，则只需要使用两个成员版本。例如：

```
bool operator==(int lhs, const C &rhs);
bool operator==(double lhs, const C &rhs);

10 == C();
3.0 == C(); 
```

而且您可能无需将这些重载声明为 C 的朋友就可以逃脱。也许是这样的：

```
class C {
public:
    bool operator==(const C& rhs);
    bool operator==(int rhs);
    bool operator==(double rhs);
};

bool operator==(int lhs, const C &rhs) { return rhs == lhs; }
bool operator==(double lhs, const C &rhs) { return rhs == lhs; }

bool C::operator==(const C& rhs) { return true; }
bool C::operator==(int rhs) { return *this == convert_int_to_C(rhs); }
bool C::operator==(double rhs) { return *this == convert_double_to_C(rhs); } 
```

* * *

此外，由于检查相等性不应更改对象，因此您应该`const`限定成员函数：

```
class C {
    bool operator== (C const &rhs) const;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T01:51:00.133

请记住，这`==`是一个二元运算符。这意味着它*必须始终*有两个参数。如果您`operator==()`作为成员函数重载，则其中一个参数`this`是传递给每个成员函数的隐式参数。

在您的代码中，您声明了一个属于该类的全局`operator==()`函数。同时，您将 a 定义为的*成员*。选一个; 你不应该两者都做。`friend``TradeItem``operator==()`*`TradeItem`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T01:51:02.523

operator 的类成员版本`==`有一个参数，而友元版本有两个参数，所以它应该是这样的：

```
friend bool operator==(const TradeItem& i1, TradeItem& i2);

bool TradeItem::operator==(const TradeItem& i ) 
```

这是因为成员版本有一个隐藏的`this`参数。会员版也将优先于朋友版。您应该选择其中之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T01:51:04.590

接受两个参数的 operator== 重载不能是成员函数 - 将其声明为`bool operator==(const T&, const T&)`.*

# sql - 从减号到加入的 SQL 查询

> ID：15318020
> 
> 赞同：0
> 
> 时间：2013-03-10T01:48:28.703
> 
> 标签：sql, join

如何翻译以下查询：

```
select col1,col2,col3 from table1
minus
select col1,col2,col3 from table2 
```

进入使用连接子句的查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T01:51:27.267

```
select t1.col1, t1.col2, t1.col3 
from table1 t1
left join table2 t2 on t1.col1 = t2.col1 and t1.col2 = t2.col2 and t1.col3 = t2.col3
where t2.col1 is null 
```

[SQLFiddle](http://sqlfiddle.com/#!3/a29d3/3)

# android - 按钮背景自动更改？

> ID：15318025
> 
> 赞同：-2
> 
> 时间：2013-03-10T01:49:26.103
> 
> 标签：android, android-activity, android-button

我的应用有 2 个活动：

*   MainActivity 有一个启动 SubActivity 的按钮，这个按钮没有设置为透明的。

*   SubActivity 有一个通过 setAlpha() 透明的按钮。

我的问题是有时，当我通过按返回按钮从 SubActivity 返回 MainActivity 时，MainActivity 的按钮变得与 SubActivity 的按钮一样透明。如果我退出应用程序并再次打开它，则会经常出现此问题。

我还尝试在每个活动的 onResume() 中为 button1 设置 alpha 255，为 button2 设置 120，但它不起作用。有时 button1 变得透明，有时 button2 不透明。

我上传 MainActivity.java：

```
package com.example.buttondemo;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity implements OnClickListener {
    private Button button1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        button1 = (Button) findViewById(R.id.button1);
        button1.setOnClickListener(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.button1:
            startActivity(new Intent(this, SubActivity.class));
            break;

        default:
            break;
        }
    }
} 
```

子活动.java：

```
package com.example.buttondemo;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.widget.Button;

public class SubActivity extends Activity {

    private Button button2;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_sub);

        button2 = (Button) findViewById(R.id.button2);
        button2.getBackground().setAlpha(120);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.sub, menu);
        return true;
    }
} 
```

\res\values\strings.xml：

```
<string name="app_name">ButtonDemo</string>
<string name="action_settings">Settings</string>
<string name="hello_world">Hello world!</string>
<string name="title_activity_sub">SubActivity</string>
<string name="button1_label">button1</string>
<string name="button2_label">button2</string> 
```

\res\layout\activity_main.xml;

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button1_label"
        android:background="@drawable/button_selector" />

</RelativeLayout> 
```

\res\layout\activity_sub.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".SubActivity" >

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button2_label"
        android:background="@drawable/button_selector" />

</RelativeLayout> 
```

\res\drawable\button_selector.xml：

```
<selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_pressed="true"
        android:drawable="@drawable/pressed_button" /> <!-- pressed -->
    <item
        android:state_focused="true"
        android:drawable="@drawable/pressed_button" /> <!-- focused -->
    <item
        android:drawable="@drawable/default_button" /> <!-- default -->
</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:33:30.647

我可以解决这个问题，这是因为 2 个按钮引用了相同的可绘制资源（pressed_button.png 和 default_button.png）。当我在源代码中为 button2 设置透明时，似乎它也会影响其可绘制资源。然后，button1 也引用了这个资源，导致背景不稳定。

我尝试删除为按钮设置背景的源代码，但这个问题永远不会发生。所以我认为这个问题的条件是： - 在源代码（.java）中为按钮动态设置相同的可绘制文件中的背景，为其中一个设置透明。

因此，我从原始资源（pressed_button.png，default_button.png）复制了一个名为pressed_button1.png和default_button1.png for button2的可绘制资源。这意味着现在 button1 指的是原始可绘制对象，而 button2 是指新的可绘制对象。结果很奇怪，它可以工作得很好。

我还在 Android 4.2 上进行了测试，除了为可绘制资源制作副本的方式之外，我可以通过 android:alpha 在 .xml 中设置透明，它也很好用。

希望这会有所帮助！:)

# html - 我在哪里可以得到这个 HTML5 图表

> ID：15318026
> 
> 赞同：-2
> 
> 时间：2013-03-10T01:49:28.373
> 
> 标签：html, canvas, graph

我想知道[此页面](http://social.msdn.microsoft.com/Profile/pure%20deal)中用于创建图表的插件的名称。我找不到任何其他具有与此相同的 CSS 效果的类似图表。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T01:55:49.773

它在 HTML5 中使用 Canvas 完成。该图也是 Microsoft（专有）代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T03:04:29.207

试试 Highcharts JS：[http](http://highcharts.com) ://highcharts.com它是一个 JavaScript 库，具有许多不同的绘图功能，但需要 jQuery 并且不是免费的。

# spring - 在 Spring 中向命令 bean 提供查询字符串参数

> ID：15318031
> 
> 赞同：0
> 
> 时间：2013-03-10T01:49:44.627
> 
> 标签：spring, spring-mvc

我需要将查询字符串参数传递给 Spring 命令 bean。我刚刚尝试了以下解决方法。

```
<c:if test="${not empty param.id}">
    <form:input path="id"/>
</c:if> 
```

令我惊讶的是，它会自动将查询字符串（类似于`http://localhost:8080/xxx/aaa.htm?id=100`）上提供的值设置为相应的命令 bean。这正是我想要实现的目标，但我完全不知道为什么会发生这种情况。

为什么以及如何自动将参数设置为命令 bean 的相应属性？

* * *

在命令 bean 中，此参数映射到类型为 的属性`java.lang.Long`。因此，如果我将此参数修改为不表示为类似 的`Long`值的值`xxx`，那么我希望它会导致引发适当的异常，但事实并非如此。

如果我尝试传递一个不是`Long`值的字符串（如`xxx`），那么它会导致 - HTTP 状态 400，

> 客户端发送的请求在语法上不正确。

我很不确定这种行为。为什么会这样？

* * *

当用户在不表示为的 URL 中更改此参数时`Long`，我想显示适当的用户友好错误消息。为此，我注册了几个自定义属性编辑器（它们按原样工作），但是为了让 Spring 从属性文件中显示适当的错误消息，应该引起适当的异常，然后由 Spring 使用该异常和适当的错误显示来自属性文件的消息。

我正在使用 Spring 框架 3.2.0。

* * *

**编辑：**

问题的第二部分（HTTP 状态为 400 的部分）中的问题已解决。这是因为我**没有**收到与Spring 控制器类中的 HTTP 请求`BindingResult`映射的方法中的参数，这是必要的，例如，`GET`

```
@RequestMapping(method={RequestMethod.GET}, value={"admin_side/Country"})
private String showForm(@ModelAttribute("countryBean") CountryBean command, BindingResult errors, Map model)
{
     //...
} 
```

该`BindingResult errors`参数先前丢失，因此无法报告错误。它现在按预期工作。

* * *

一个问题仍然存在，就像我真的不明白的第一部分一样。为什么以及如何将此查询字符串参数`id`绑定到 Spring 命令 bean（自动）？请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:15:12.413

这就是命令 bean 的全部意义所在：包含请求中发送的参数。自 Struts 1 以来，与表单/命令对象的参数绑定一直是 MVC 框架的核心。以下是相关[文档部分](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-arguments)：

> ## 16.3.3.1 支持的方法参数类型
> 
> 以下是支持的方法参数：
> 
> *   [...]
> *   命令或表单对象将请求参数绑定到 bean 属性（通过设置器）或直接绑定到字段，具有可自定义的类型转换，具体取决于 @InitBinder 方法和/或 HandlerAdapter 配置。请参阅 RequestMappingHandlerAdapter 上的 webBindingInitializer 属性。默认情况下，此类命令对象及其验证结果将作为模型属性公开，使用命令类类名称 - 例如，模型属性“orderAddress”用于“some.package.OrderAddress”类型的命令对象。ModelAttribute 注释可用于方法参数以自定义使用的模型属性名称。

# html - 将 HTML 页面分成两半，不重叠

> ID：15318032
> 
> 赞同：3
> 
> 时间：2013-03-10T01:50:02.623
> 
> 标签：html, css

我想将我的 HTML 页面分成等宽的两列，这样每一半就像一个页面，它的内容不会进入另一半。我做`float:left`了 for`#left`和`float:right`for `#right`，但内容与另一半重叠。我怎样才能实现目标？

```
<div id="content">
  <div id="left"></div>
  <div id="right"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T02:08:55.387

您应该将两列都浮动到左侧。对于您在评论中报告的问题，请使用`word-wrap: break-word;`但也不要使用 90 个字符长的假词，除了一些威尔士村庄外，任何人类语言都不存在这种假词。芬兰语和德语的单词很长，但仍然如此。改为使用`lorem ipsum`。URL 仍然可以很长。

这是一个演示：http: [//jsfiddle.net/xZJyE/](http://jsfiddle.net/xZJyE/)

HTML：

```
<div id="content">
  <div class="left w50">LEFT</div>
  <div class="left w50">lorem ipsum</div>
</div> 
```

CSS：

```
html {
    font-size: 62.5%;
}
body {
    background-color: white;
    color: black;
    font-family: helvetica, arial, sans-serif;
    font-size: 1.4em; /* equiv 14px */
    line-height: 1.5; /* adapt to your design */
}
/* you shall not pass */
div, textarea, table, td, th, code, pre, samp {
    word-wrap: break-word;
}
.left {
    float: left;
}
.w50 {
    width: 50%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T01:55:17.720

您的 css 必须正确格式化才能正常工作：

内容
边框：0；
填充：0；
有：100%；

左
边框：0；
边距：0；
填充：0；
向左飘浮;
宽度：50%；

右边
框：0；
边距：0；
填充：0；
浮动：对；
宽度：50%；

对填充、边距、不间断字符串等的任何入侵都会使内容重叠......我认为填充是可以的，因为它在容器内......但你明白了。

# java - 我希望这个程序在用户输入其尺寸的长度和宽度时显示一个星号框

> ID：15318035
> 
> 赞同：0
> 
> 时间：2013-03-10T01:50:22.477
> 
> 标签：java, arrays, algorithm

到目前为止，这是我的代码，它在大多数情况下都有效，但是，它只显示零。我无法弄清楚如何让它显示星号，因为这是我知道如何让它显示内部有东西的二维数组的唯一方法。

```
 import java.util.Scanner;

 public class Main {

 public static void main(String[] args) {

    int length = 0;
    int width = 0;

    Scanner input = new Scanner(System.in);

    //ask user input of array numbers
    while (length <= 20 || width <= 20) {
        System.out.print("Enter the length: ");
        length = input.nextInt();
        System.out.print("Enter the Width: ");
        width = input.nextInt();
        int[][] myarray = new int[width][length]; //To print all elements in this array  of ints,
        //loops is used to make it shorter and efficient
        for (int w = 0; w < length; w++) {
            for (int l = 0; l < width; l++) {
                System.out.print(" " + myarray[l][w]);//prints it in grid fashion
            }
            System.out.println("");
        }
    }
 }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T01:55:48.797

在这一行，您打印出 int[][] 数组的内容，即 0。

```
System.out.print(" " + myarray[l][w]);//prints it in grid fashion 
```

您可以将该部分更改为星号以使其打印星号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:00:26.890

如果您希望您的`2D`数组实际保存星号字符，则必须更改数组的类型以保存`char`值并执行以下操作：

```
char[][] myarray = new char[width][length]; 
for (int i=0; i < myarray.length; i++) {
   Arrays.fill(myarray[i], '*');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T02:04:30.693

您不需要使用任何数组。除非这是稍后将数组用于其他用途的程序的一部分，否则您可以打印星号一定次数。

```
import java.util.Scanner;

public class Main {

public static void main(String[] args) {

    int length = 0;
    int width = 0;

    Scanner input = new Scanner(System.in);

    while (length <= 20 || width <= 20) {
        System.out.print("Enter the length: ");
        length = input.nextInt();
        System.out.print("Enter the Width: ");
        width = input.nextInt();

        for (int w = 0; w < length; w++) {
            for (int l = 0; l < width; l++) {
                System.out.print(" *");
            }
            System.out.println("");
        }
    }
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-14T14:33:30.893

将您的 int 数组更改为字符串数组

```
String[][] myarray = new String[width][length]; 

for (int w = 0; w < length; w++) {
    for (int l = 0; l < width; l++) {
        myarray[l][w]="*";
        System.out.print(" " + myarray[l][w]);
    }
    System.out.println("");
} 
```

# xml - XQuery：返回多个元素

> ID：15318036
> 
> 赞同：0
> 
> 时间：2013-03-10T01:50:32.653
> 
> 标签：xml, xquery

以下是描述我正在使用的 XML 结构的 DTD：

```
<!DOCTYPE bib [
<!ELEMENT bib (book+,magazine*)>
<!ELEMENT book (title,author+,publisher,editor?,price)>
<!ELEMENT magazine (title,publisher,editor+)>
<!ELEMENT title (#PCDATA)>
<!ELEMENT author (last,first)>
<!ELEMENT publisher (#PCDATA)>
<!ELEMENT editor (last, first,affiliation)>
<!ELEMENT price ((#PCDATA)>
<!ELEMENT last (#PCDATA)>
<!ELEMENT first (#PCDATA)>
<!ELEMENT affiliation (#PCDATA)>
<!ATTLIST book year CDATA #REQUIRED>
]> 
```

我必须编写一个 XQuery 来返回 Weikum 先生是编辑之一的所有书籍或杂志。

我在确定如何归还书籍或杂志时遇到问题。这是我能想到的：

```
for $x in document(“bib.xml”)/bib
where $x/book/editor/lastname = “Weikum” or $x/magazine/editor/lastname = “Weikum”
return <result></result> 
```

但这并没有达到我想要的结果。如何退回书籍或杂志元素？我应该说`return $x`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:15:01.543

使用姓氏为“Weikum”的编辑退回书籍和杂志的最简单方法是

```
//editor[lastname='Weikum']/.. 
```

或者，如果您更喜欢 FLWOR 表达式，是的，您可以说`return $x`，如果 $x 绑定到您想要返回的内容。但是，在您的草图中并非如此：您说要退回书或杂志，但已将 $x 绑定到`bib`元素。你想要更像这样的东西：

```
for $x in document('bib.xml')/bib/*
where $x/editor/lastname='Weikum'
return $x 
```

在这两种表述中，我利用了这样一个事实，即只有书籍和杂志才有孩子的名字`editor`，而且只有书籍和杂志才会以`bib`. 在更复杂的 DTD 中，如果您需要过滤掉小册子、标准和博客文章以获取书籍和杂志*，则可能需要更复杂的表达式......*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:44:56.547

**使用**：

```
//*[self::book or self::magazine][editor[lastname eq 'Weikum']] 
```

从 DTD 可以清楚地看出，只有 a`book`或 a`magazine`可以有一个孩子`editor`。

**如果文档已针对此 DTD 成功验证，则表达式可以更简单：**

```
//*[editor[lastname eq 'Weikum']] 
```

**如果我们相信 DTD，a`book`或 a`magazine`必须是 XML 文档顶部元素的子元素**。

这使我们能够提供一个可能更有效的表达式：

```
/*/*[editor[lastname eq 'Weikum']] 
```

# javascript - 使用 Ext.data.operation 和 ajaxProxy 时如何判断数据已经加载了一些行？

> ID：15318037
> 
> 赞同：0
> 
> 时间：2013-03-10T01:50:36.187
> 
> 标签：javascript, ajax, extjs, extjs4

代码在这里：

```
Ext.define('Book', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'id', type: 'int'},
        {name: 'title', type: 'string'},
        {name: 'pages', type: 'int'}, 
        {name: 'numChapters', type: 'int'}
    ]           
});

var ajaxProxy = Ext.create('Ext.data.proxy.Ajax', {
    url: 'books.json',
    model: 'Book'
});

var operation = Ext.create('Ext.data.Operation', {
    action: 'read',
    start: 0,
    limit: 5
});

operation.read(); 
```

book.json 包含 6 行，当我尝试下面的代码时，我得到 6 行，而我预计它的负载为 5 行。

```
ajaxProxy.read(operation, function ()
{
    console.log(operation.response.responseText);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:12:05.093

您误解了限制的用途。限制作为参数发送到 books.json，因此如果这是一个动态内容页面（如 .jsp 或 .php），您可以在生成行时使用限制来实际知道要在响应文本中显示多少. 如果您的 .json 页面上没有任何功能，则限制配置毫无意义。

# android - 将项和子项添加到 ListView

> ID：15318038
> 
> 赞同：3
> 
> 时间：2013-03-10T01:50:38.620
> 
> 标签：android, android-listview

我有以下 XML 文件，其中仅包含一个`ListView`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView android:id="@+id/lview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ></ListView>

</RelativeLayout> 
```

我想向这个 ListView 添加项目和子项目。

我的应用程序根据用户的请求进行某种搜索并获取数据，我希望检索到的这些数据在 ListView 中可见。有没有简单的方法，比如：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    lv1 = (ListView) findViewById(R.id.lview);
    lv1.add(item,subitem,0) // where 0 is the position.. any method like this?
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T01:57:34.320

如果要在每行中填充包含许多数据项的数组列表，则必须实现自定义适配器和`getView`如下方法：

```
 public class tasksRepositoryAdapter extends ArrayAdapter<Task>
{   
    private ArrayList<Task> list;

    public tasksRepositoryAdapter(Context context, int textViewResourceId, List<Task> tasksRepository) 
    {
        super(context, textViewResourceId, tasksRepository);
         this.list = new ArrayList<Task>();
         for (Task task : tasksRepository)
            {
                this.list.add(task);
            }
    }

    public View getView(final int position, View convertView, ViewGroup parent)
    {
        View row;
        final ViewHolder holder = new ViewHolder();
        tfRobotoRegular = Typeface.createFromAsset(getAssets(),"Roboto-Regular.ttf");

        LayoutInflater inflator = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = inflator.inflate(R.layout.new_row, null);
        holder.tvTitle = (TextView) row.findViewById(R.id.text_title);
        String title = tasksRepository.get(position).getTitle();
        if (title.length()>25)
        {
            title = title.substring(0, 24);
            title = title + "...";
        }
        holder.tvTitle.setText(title);
        holder.tvTitle.setTypeface(tfRobotoRegular);
        holder.tvDate = (TextView) row.findViewById(R.id.text_date);
        holder.tvDate.setText(tasksRepository.get(position).getDate());
        holder.tvDate.setTypeface(tfRobotoRegular);
        holder.tvTime = (TextView) row.findViewById(R.id.text_time);
        holder.tvTime.setText(tasksRepository.get(position).getTime());
        holder.tvTime.setTypeface(tfRobotoRegular);
        holder.tvDescription = (TextView) row.findViewById(R.id.text_description);
        String description = tasksRepository.get(position).getDescription();
        if (description.length()>46)
        {
            description = description.substring(0, 45);
            description = description + "...";
        }
        holder.tvDescription.setText(description);
        holder.tvDescription.setTypeface(tfRobotoRegular);
        holder.tvId = (TextView) row.findViewById(R.id.text_id);
        holder.tvId.setText(String.valueOf(tasksRepository.get(position).getId()));
        holder.tvId.setTypeface(tfRobotoRegular);
        holder.tvLocation = (TextView) row.findViewById(R.id.text_location);
        holder.tvLocation.setText(tasksRepository.get(position).getCity());
        holder.llRowLayout = (LinearLayout) row.findViewById(R.id.llRowLayout);
        holder.imCalendar = (ImageView) row.findViewById(R.id.iCalendar);
        holder.imClock = (ImageView) row.findViewById(R.id.iClock);
        holder.imLocation = (ImageView) row.findViewById(R.id.iLocation);

        holder.imTaskStatusButton = (ImageView) row.findViewById(R.id.iTaskStatusButton);
        holder.imTaskStatusButton.setTag(position);
        holder.imTaskStatusButton.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v) 
            {
                 int[] location = new int[2];
                 currentRowId = position;
                 currentRow = v;    
                 // Get the x, y location and store it in the location[] array
                 // location[0] = x, location[1] = y.
                 v.getLocationOnScreen(location);

                 //Initialize the Point with x, and y positions
                 point = new Point();
                 point.x = location[0];
                 point.y = location[1];
                 showStatusPopup(TasksListActivity.this, point);
            }
        });     
        String status = tasksRepository.get(position).getStatus();
        Log.d(TAG, "The status of the current row: "+ status );
        setStatusColorImages(status, holder.imClock, holder.imCalendar, holder.imLocation, holder.llRowLayout); 

        return row;
    }
} 
```

和 ViewHolder：

```
static class ViewHolder
{
    RelativeLayout rlTitle;
    LinearLayout llRowLayout;
    TextView tvId;
    TextView tvTitle;
    TextView tvDate;
    TextView tvTime;
    TextView tvDescription;
    TextView tvLocation;
    ImageView imClock;
    ImageView imCalendar;
    ImageView imLocation;
    ImageView imTaskStatusButton;
} 
```

在这种情况下。

# vb.net - 网络 VB.Net 上的计算机名称

> ID：15318055
> 
> 赞同：3
> 
> 时间：2013-03-10T01:52:29.873
> 
> 标签：vb.net, listbox

我想在列表框中列出所有连接的网络计算机。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T20:51:18.307

添加对`System.DirectoryServices`.

添加;

```
Imports System.DirectoryServices 
```

然后使用；

```
Private Delegate Sub UpdateDelegate(ByVal s As String)

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    Dim t As New Threading.Thread(AddressOf GetNetworkComputers)
    t.IsBackground = True
    t.Start()

End Sub

Private Sub AddListBoxItem(ByVal s As String)
    ListBox1.Items.Add(s)
End Sub

Private Sub GetNetworkComputers()
    Dim alWorkGroups As New ArrayList
    Dim de As New DirectoryEntry

    de.Path = "WinNT:"
    For Each d As DirectoryEntry In de.Children
        If d.SchemaClassName = "Domain" Then alWorkGroups.Add(d.Name)
        d.Dispose()
    Next

    For Each workgroup As String In alWorkGroups

        de.Path = "WinNT://" & workgroup
        For Each d As DirectoryEntry In de.Children

            If d.SchemaClassName = "Computer" Then

                Dim del As UpdateDelegate = AddressOf AddListBoxItem
                Me.Invoke(del, d.Name)

            End If

            d.Dispose()

        Next
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:21:20.243

我砍了一些代码来给你这个，如果它不完美的话应该足够接近（希望它有帮助）......

```
 Private Sub GetCurrentDevices()

    Try

        Dim ps As New System.Diagnostics.ProcessStartInfo("arp", "-a ")

        ps.RedirectStandardOutput = True
        ps.UseShellExecute = False
        ps.WindowStyle = ProcessWindowStyle.Hidden
        ps.CreateNoWindow = True

        Dim sbResults As New StringBuilder

        Using proc As New System.Diagnostics.Process()

            proc.StartInfo = ps
            proc.Start()

            Dim sr As System.IO.StreamReader = proc.StandardOutput

            While Not proc.HasExited
                System.Threading.Thread.Sleep(100)
            End While

            sbResults.Append(sr.ReadToEnd)

        End Using

        Dim IP_Address, MAC_Address, Device_Name As String

        Dim AllOutputLines() As String = sbResults.ToString.Split(vbCrLf)
        sbResults = Nothing

        For Each IndividualOutputLine As String In AllOutputLines

            Windows.Forms.Application.DoEvents()

            If IndividualOutputLine.Contains("dynamic") Then

                Dim Entries() As String = IndividualOutputLine.Split(New String() {}, StringSplitOptions.RemoveEmptyEntries)

                If Entries.Length = 3 Then

                   'Here is your info ...

                    IP_Address = Entries(0)
                    MAC_Address = Entries(1).ToUpper
                    Device_Name = GetComputerName(IP_Address)

                End If

            End If

        Next

          Catch ex As Exception

        MsgBox(ex.ToString)

    End Try

End Sub

Private Function GetComputerName(ByVal IP_Address As String) As String

    Dim ReturnValue As String = cUnknown

    Try

        Dim myIPs As System.Net.IPHostEntry = System.Net.Dns.GetHostEntry(IP_Address)
        ReturnValue = myIPs.HostName
        myIPs = Nothing

    Catch ex As Exception
    End Try

    If ReturnValue = IP_Address Then ReturnValue = cUnknown

    Return ReturnValue

End Function 
```

# java - 如何使用 android.test.mock MockContext？

> ID：15318059
> 
> 赞同：19
> 
> 时间：2013-03-10T01:54:15.660
> 
> 标签：java, android, testing, mocking

我是 Android 测试的新手，我正在尝试使用 MockContext 创建一个 ApplicationTestCase。

这是我的代码，它发生错误（java.lang.NoClassDefFoundError: android/content/Context）

我很感激你给我一些例子。

```
package com.example.defaultmocktest.test;

import junit.framework.TestCase;
import android.test.mock.MockContext;
import android.widget.Toast;

public class DefaultTestCase extends TestCase {

    protected void setUp() throws Exception {
        super.setUp();
    }

    protected void tearDown() throws Exception {
        super.tearDown();
    }

    public void testSetDayAndWeekSetsCorrectPosition() {
        Toast.makeText(new MockContext(), "Mocking", Toast.LENGTH_LONG).show();
    }

} 
```

谢谢

我添加了完整的错误

```
java.lang.NoClassDefFoundError: android/content/Context
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2436)
    at java.lang.Class.getMethod0(Class.java:2679)
    at java.lang.Class.getMethod(Class.java:1605)
    at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestLoader.getTest(JUnit3TestLoader.java:99)
    at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestLoader.loadTests(JUnit3TestLoader.java:59)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassNotFoundException: android.content.Context
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 10 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T02:02:09.360

我相信 MockContext 实际上只是一个 MockContext。它旨在提供足够的功能来运行测试，但不应该运行真正的 UI 任务。

[来自http://developer.android.com/reference/android/test/mock/MockContext.html](http://developer.android.com/reference/android/test/mock/MockContext.html)的文档

```
"All methods are non-functional and throw UnsupportedOperationException." 
```

如果您正在运行 UI/集成测试，我会看看[http://developer.android.com/tools/testing/testing_ui.html](http://developer.android.com/tools/testing/testing_ui.html)

# javascript - Javascript数组分配问题

> ID：15318061
> 
> 赞同：-1
> 
> 时间：2013-03-10T01:54:37.617
> 
> 标签：javascript, arrays, variable-assignment

我正在尝试通过使用三层嵌套的四循环为一系列 81 个框分配一个自动 ID 号。这是我的代码。

```
function printBoxes()
    {
        alert("Function Entered");
        var box = new Array();
        alert("Array Created");

        for(var i = 0; i < 9; i++)
        {
            for(var j = 0; j < 3; j++)
            {
                for(var k = 0; k < 3; k++)
                {
                    box[i, j ,k] = [i, j, k];
                }
            }
        }

        alert(box[3,5,1]);

        alert("Arrays Created");

        for(var a = 0; a < 9; a++)
        {
            document.writeln("<br>");

            for(var b = 0; b < 3; b++)
            {
                for(var c = 0; c < 3; c++)
                {   document.writeln("<FORM inputs>")
                    document.write("<INPUT type = 'text' id = ' " + box[a,b,c] + " ' value = ' " + box[a,b,c] + "' size = '1' maxlength = '1'/>");
                    document.writeln("<//FORM>")
                }
            }
        }
    } 
```

我的问题是这样的：虽然我可以使用警告框来查看每个框都被分配了一个正确的 id，但在它离开主 for 循环后，我分别得到 1/3 820s、821 和 822。我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T02:00:50.087

JavaScript 中没有特殊情况的多维数组——只有数组，它可以包含数组。所以每次为每个维度创建一个新数组：

```
var box = [];

for(var i = 0; i < 9; i++)
{
    box[i] = [];

    for(var j = 0; j < 3; j++)
    {
        box[i][j] = [];

        for(var k = 0; k < 3; k++)
        {
            box[i][j][k] = [i, j, k];
        }
    }
} 
```

… 例如。这假装工作的原因是 JavaScript 有一个逗号运算符，它将评估其操作数并返回正确的操作数，所以`box[i, j, k]`实际上只是意味着`box[k]`.

# android - 唯一标识 ActionBar 选项菜单项

> ID：15318064
> 
> 赞同：3
> 
> 时间：2013-03-10T01:54:54.973
> 
> 标签：android, android-actionbar

我正在将我最初编写的应用程序转换为目标 v2.2，因此它使用 v4 兼容性库和 ActionBarSherlock 以 v4 为目标。

我正在使用`ActionBar`选项菜单和子菜单，并试图找出如何以独特的方式识别子菜单项。

例子...

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    SubMenu mediaSubMenu = menu.addSubMenu("Media");
    mediaSubMenu.add("Videos");
    mediaSubMenu.add("Music");

} 
```

没关系，我得到一个`ActionBar`“媒体”菜单项，当我单击时，我看到“视频”和“音乐”子菜单项。我的问题是我找出确定被点击的子菜单项的唯一方法如下......

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    super.onOptionsItemSelected(item);

    if (item.getTitle().equals("Music")) {
        // Do something
        return true;
    }
    return false;
} 
```

尽管我可能有另一个具有相同名称的子菜单项，例如“设置”->“音乐”。

我如何区分两者？我不禁觉得我在这里错过了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T01:57:48.207

为您的 MenuItems 设置 id

```
mediaSubMenu.add(Menu.NONE, R.id.media_videos, Menu.NONE, "Videos") 
```

您可以在资源文件（如 res/values/ids.xml）中定义 id

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <item name="media_videos" type="id"/>
    <item name="other_videos" type="id"/>
</resources> 
```

然后你可以使用

```
switch(item.getItemId()) {
    case R.id.media_videos:
        ...
    case R.id.other_videos:
        ...
} 
```

我还建议使用菜单 xml 来设置您的操作栏数据。

# netbeans - cuda 找不到 lXmu

> ID：15318069
> 
> 赞同：0
> 
> 时间：2013-03-10T01:55:37.160
> 
> 标签：netbeans, cuda

我收到这个错误

> cuda 找不到 lXmu

在编译 cuda-5.0/Samples 时

```
sudo make LIBRARY_PATH=/usr/lib/nvidia-current:$LIBRARY_PATH 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T01:57:10.433

简单的：

```
sudo apt-get install libxmu-dev libxmu6 
```

# java - 协助建立具有多个班级的体育比赛

> ID：15318073
> 
> 赞同：0
> 
> 时间：2013-03-10T01:56:10.810
> 
> 标签：java, class, inheritance

***更新的代码***我必须编写一个封装体育游戏的类，它继承自 Game。其中比赛具有以下附加属性：比赛是团队比赛还是个人比赛，比赛能否以平局收场。

我不熟悉继承，想知道你们是否可以帮助我走上正确的道路。我整天都在阅读有关继承的信息，只是不明白。我的问题是：我如何构建这个项目来合并继承，可以/应该继承什么以及你是如何做到的？谢谢

我想我可能已经想通了，但是有人可以帮助使用 toString 方法以及如何编写 canTie 代码吗？

```
public class Game 
{
public static void main(String[] args) 
{
    Question39 gm1 = new Question39();
    System.out.println("Game type: "+ gm1.getGameType() + "\n"
                       + "Can it tie: " + gm1.getCanTie());
}

public Game()
{

}  
} 
```

二等舱

```
public class SportsGame extends Game 
{
public SportsGame()
{
    super();
}

public String toString()
{
    String output ="hey"; 
    return output;
}

 //Accessors (Getters)
public String getGameType() 
{
    Scanner scan = new Scanner(System.in);
    System.out.println("Enter number of players");
    int players = scan.nextInt();

    if (players > 2)
    {
        return "Team";
    }    
    else 
    {
        if (players ==2)
        {
            return "Individual";
        }

        else
        {
            return "N/A";
        }
    }

}

public String getCanTie()
{
    String canTie = "yes";
    String cantTie = "no";

    if (1==1) 
            {
                return canTie;
            }
    else 
            {
                return cantTie;
            }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T01:58:07.827

因为你的`SportsGame`"is-a" `Game`，正如你所说，它应该继承自`Game`.

其语法是：

```
public class SportsGame extends Game {
    // ....
} 
```

你的课程应该是这样的：

```
// In Game.java:
public abstract class Game {
    public abstract boolean isTeamGame();
    public abstract boolean canEndInTie();
} 
```

```
// In SportsGame.java:
public class SportsGame extends Game {
    // You'll need to implement the methods from Game here.
    // For example:

    @Override
    public boolean isTeamGame() {
        return true;
    }

    @Override
    public boolean canEndInTie() {
        return true;
    }
} 
```

或者，您可以将这些值初始化为构造函数中的变量，然后从这些方法中返回它们。

# javascript - 如何停止主干事件冒泡

> ID：15318074
> 
> 赞同：2
> 
> 时间：2013-03-10T01:56:34.413
> 
> 标签：javascript, jquery, backbone.js

在主干中，我经常会使用类似...的东西来实例化视图

```
new mysite.some.namespace.View(); 
```

然后它将在我的视图中加载并将事件附加到 DOM。问题在于删除该视图然后再次实例化它。如果我加载视图两次，我的事件通常会加倍。我怎样才能消除这个？这是因为我的 el 设置为应用程序的包装元素吗？

什么是一个简单的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T03:02:55.790

从评论中听起来你已经偏离了脊椎直而狭窄的路径进入杂草。正确的事件处理需要一些小心。如果您发布更多代码，我们可以提供更详细的建议，但是：

*   确保`.remove()`在完成视图实例后调用。所有 DOM 事件绑定将被自动删除。
*   不要做一些古怪的事情，比如让 2 个视图实例引用同一个元素 ( `this.el`)。
*   帮自己一个忙，不要乱来`this.el`。不要指定它。如果需要，可以`tagName`在您的对象中使用，但视图应该是 A) 对该视图唯一且 B) 与 DOM 分离，直到视图外部的东西附加它（通常是路由器或复合视图管理器）。`extend``el`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:11:39.157

您可以使用`e.stopImmediatePropagation();`以防止事件传播。

# python - sqlalchemy：如何将其他表的对象与主键关联？

> ID：15318082
> 
> 赞同：0
> 
> 时间：2013-03-10T01:57:50.213
> 
> 标签：python, orm, sqlalchemy

我有一张`Transaction`桌子

```
class Transaction(Base):
    __tablename__ = 'transaction'
    id = Column('id', Integer, primary_key=True)
    name = Column('name', String)
    amount = Column('amount', Float)
    category_id = Column('category_id', Integer, ForeignKey('category.id'))
    date_created = Column('date_created', Date, default=datetime.now())
    date_modified = Column('date_modifed', Date, onupdate=datetime.now()) 
```

和`Category`表

```
class Category(Base):
    __tablename__ = 'category'
    id = Column('id', Integer, primary_key=True)
    name = Column('name', String)
    subtype = Column('subtype', String) 
```

我将交易数据集添加为

```
name, amount, category_id
Costo,59.0,5
Costo,20,5
Safeway,6.75,1
Safeway,11,1
Safeway,19,1 
```

当我查询它们时，我也可以看到它们

```
for transaction in session.query(Transaction):
    logging.info(transaction) 
```

我也看到了数据

```
INFO:root:<Transaction(22, Medical Insurance, 110.0, 62, 2013-03-09, None)>
INFO:root:<Transaction(23, AllState Renter Insurance, 100.0, 77, 2013-03-09, None)> 
```

但我确实看到`categoty_id`了**62**和**77**。

我只需要它们的值作为对象

```
INFO:root:<Transaction(22, Medical Insurance, 110.0, **Medical**, 2013-03-09, None)>
INFO:root:<Transaction(23, AllState Renter Insurance, 100.0, **Insurance**, 2013-03-09, None)> 
```

如何附加不同表的对象？

我确信仅仅使用是`primary_key`不够的，但我还需要做什么？请指教

我刚刚开始学习`SQLAlchemy`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:00:18.050

您可能需要创建一个`relationship()`：[http ://docs.sqlalchemy.org/en/latest/orm/relationships.html](http://docs.sqlalchemy.org/en/latest/orm/relationships.html)

```
from sqlalchemy.orm import relationship, backref

class Category(Base):
    __tablename__ = 'category'
    id = Column('id', Integer, primary_key=True)
    name = Column('name', String)
    subtype = Column('subtype', String)
    # This line is new
    transactions = relationship("Transaction", backref="category") 
```

我不确定我是否完全理解您的问题，但这应该`transactions`为每个包含相关项目集合的类别附加一个属性。或者：

```
class Transaction(Base):
    __tablename__ = 'transaction'
    id = Column('id', Integer, primary_key=True)
    name = Column('name', String)
    amount = Column('amount', Float)
    category_id = Column('category_id', Integer, ForeignKey('category.id'))
    date_created = Column('date_created', Date, default=datetime.now())
    date_modified = Column('date_modifed', Date, onupdate=datetime.now())
    category = relationship("category") 
```

在相反的方向上多对一地附加对象（正如@daydreamer 已经弄清楚的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:09:43.073

在 my 中添加以下行后`Transaction`，我能够引用`Category`与交易相关的

```
category = relationship('Category') 
```

我的课`Transaction`终于看起来像

```
class Transaction(Base):
    __tablename__ = 'transaction'
    id = Column('id', Integer, primary_key=True)
    name = Column('name', String)
    amount = Column('amount', Float)
    category_id = Column('category_id', Integer, ForeignKey('category.id'))
    date_created = Column('date_created', Date, default=datetime.now())
    date_modified = Column('date_modifed', Date, onupdate=datetime.now())
    category = relationship('Category') 
```

我可以看到输出为

```
INFO:root:<Transaction(28, ATT, 89.0, <Category(148, Utilities, Phone)>, 2013-03-09, None)>
INFO:root:<Transaction(27, Car Gas, 47.0, <Category(146, Utilities, Gas & Fuel)>, 2013-03-09, None)> 
```

感谢@David Marx 指出正确的文档

# c - 如何用“或”逻辑编写 switch 语句？

> ID：15318089
> 
> 赞同：4
> 
> 时间：2013-03-10T01:59:03.430
> 
> 标签：c, switch-statement, or-operator

下面，我创建了一个可以正常工作的简单 switch 语句。我想知道如何更改此代码，使其变为 switch(c)，然后是 case 1、case 2、case 3、默认值。

例子：`if char is 'w' || char is 'W' return WHITE`

我尝试了一个简单的 if 语句，尽管编译成功，但它没有给我正确的输出。希望你能帮忙。谢谢！:)

```
static COLORS color(char c) {

    switch(toupper(c)) {

        case 'W' : return WHITE;

        case 'B' : return BLUE;

        case 'R' : return RED;

        default  : return DEFAULT;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-10T02:02:32.530

您可以简单地将多个案例组合在一起：

```
switch (c) {
  case 'w':
  case 'W':
    // Code
    break;
  default:
    // Code
} 
```

请参阅 MSDN [switch()](http://msdn.microsoft.com/en-us/library/66k51h7a%28v=vs.80%29.aspx)文档。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-10T02:01:53.413

尝试以下

```
switch (c) { 
  case 'w':
  case 'W':
    return WHITE;
  case 'b':
  case 'B':
    return BLUE;
  case 'r':
  case 'R':
    return RED;
  default:
    return DEFAULT;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T02:01:55.543

```
switch(c){

    case 'w' :
    case 'W' : return WHITE;

    case 'b' :
    case 'B' : return BLUE;

    case 'r' :
    case 'R' : return RED;

    default  : return DEFAULT;
} 
```

将工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T02:03:39.393

在您的代码中，您可以尝试`switch((islower(c) ? toupper(c): c))`以当前形式保留其余代码。

# c# - 来自实体框架的缩进 JSON

> ID：15318091
> 
> 赞同：0
> 
> 时间：2013-03-10T01:59:20.763
> 
> 标签：c#, asp.net-mvc, json, entity-framework

在过去的几天里，我一直在尝试阅读和测试各种方法，以获取实体框架内实体中的属性（列）并从中检索平均值，然后将其传递给 JSON。我已经接近了几次，但总是失败。最后，当我有 JSON 时，我想以缩进格式返回它，以便在 JQuery 可视化库中使用。

我的控制器在这里：

```
 public virtual JsonResult GetData()
    {
        var result = new FactSurveryResultsQueries().GetAverages();
        return new JsonResult { JsonRequestBehavior = JsonRequestBehavior.AllowGet, Data = result };
    } 
```

这是我的视图模型：

```
namespace Provider.Models
{
    public class FactSurveyResultsViewModel //: BaseGraphViewModel
    {
        public FactSurveyResultsViewModel() { }
        //public List<KPIUserControl> customerSatisfactionChart = new List<KPIUserControl>();
        ////public List<string> customerSatisfactionChart = new List<string>();
        //public Dictionary<string, decimal> a { get; set; }
        public double? EaseRequestingHelp { get; set; }
        public double? TimeReachQualifiedTech { get; set; }
        public double? TimeProvideSolution { get; set; }
        public double? CompletenessOfSolution { get; set; }
        public double? TechAbilityProdKnowledge { get; set; }
        public double? HowWellKeptInformed { get; set; }
        public double? OverallServiceOpinion { get; set; }

    }
} 
```

最后，这是我当前的迭代，仅检索一个属性并对其进行平均，尽管当前为空。

```
namespace Provider.Queries
{
    public class FactSurveryResultsQueries
    {
        public FactSurveyResultsViewModel GetAverages()
        {
            var result = new FactSurveyResultsViewModel();
            using (var db = new ATSNavigatorDBEntities())
            {
                var thing =
                    from p in db.Fact_SurveyResults
                    group p by 1 into a
                    select new FactSurveyResultsViewModel { EaseRequestingHelp = a.Average(p.EaseRequestingHelp)};
            }
            return result;
        }
    }
} 
```

谁能指出我检索一个属性并让它从我的控制器作为缩进 JSON 访问，以便我可以使用它，然后我可以将它复制到其他属性？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:07:28.287

您可以使用 Json.NET 将 .NET 对象序列化为 JSON。它有一个生成缩进 JSON 的格式化选项。

您可以在 Visual Studio 中通过 NuGet 安装 Json.NET。安装好之后，就可以通过`JsonConvert.SerializeObject()`方法进行序列化了。

# angularjs - _servicename_ 中的下划线在 AngularJS 测试中是什么意思？

> ID：15318096
> 
> 赞同：76
> 
> 时间：2013-03-10T02:00:05.703
> 
> 标签：angularjs, unit-testing, jasmine, angularjs-service

在下面的示例测试中，原始提供程序名称是 APIEndpointProvider，但对于注入和服务实例化，约定似乎是它必须用下划线包裹它来注入。这是为什么？

```
'use strict';

describe('Provider: APIEndpointProvider', function () {

  beforeEach(module('myApp.providers'));

  var APIEndpointProvider;
  beforeEach(inject(function(_APIEndpointProvider_) {
    APIEndpointProvider = _APIEndpointProvider_;
  }));

  it('should do something', function () {
    expect(!!APIEndpointProvider).toBe(true);
  });

}); 
```

我缺少更好的解释的约定是什么？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-03-10T02:06:15.683

下划线是一种方便的技巧，我们可以使用它来以不同的名称注入服务，以便我们可以在本地分配与服务同名的局部变量。

也就是说，如果我们不能这样做，我们将不得不在本地为服务使用其他名称：

```
beforeEach(inject(function(APIEndpointProvider) {
  AEP = APIEndpointProvider; // <-- we can't use the same name!
}));

it('should do something', function () {
  expect(!!AEP).toBe(true);  // <-- this is more confusing
}); 
```

测试中`$injector`使用的 能够只删除下划线以提供我们想要的模块。除了让我们重用相同的名称之外，它什么也不*做。*

[在 Angular 文档中阅读更多内容](https://docs.angularjs.org/api/ngMock/function/angular.mock.inject#resolving-references-underscore-wrapping-)

# vim - Vim 病原体和帮助标签自动生成：错误

> ID：15318105
> 
> 赞同：1
> 
> 时间：2013-03-10T02:01:01.210
> 
> 标签：vim

在我的 vimrc 中，我有以下内容：

```
execute pathogen#infect()
silent execute pathogen#helptags() 
```

但我不断收到一个错误，我不喜欢：

> 处理功能病原体#helptags 时检测到错误：第 4 行：E154：文件 /Users/ *** */MacVim-snapshot-64/MacVim.app/Contents/Resources/vim/vimfiles/doc/pyclewn.txt E154*中的重复标签“BEFORE” : 在文件 /Users/ *** /MacVim-snapshot-64/MacVim.app/Contents/Resources/vim/vimfiles/doc/pyclewn.txt***中重复的标签“必须”***

我喜欢让我的 vim 启动完全没有任何错误，因为错误很烦人。我很困惑为什么

> 静默执行

没有使命令不输出错误；我希望 helptags 也能对所有其他目录执行，而不是在 pyclewn 上死掉。

所以我什至尝试编辑pyclewn自动加载源，其中定义了pathogen#helptags以便放置

> 无声的帮助标签...

在替换。但即使这样也不能让它保持沉默。这听起来像是一个愚蠢的问题，但我真的很喜欢让我的帮助标签始终保持新鲜，而且我不喜欢看到错误。理想情况下，它应该被修复，但是我不知道我是否应该修复它并向 pyclewn 开发人员建议，或者我是否应该让 helptags 命令继续顺利，即使在遇到小碰撞后也能顺利进行。如何在不向 pyclewn 的维护者请求更改存储库的情况下使错误消失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T06:27:07.823

`silent`吞下常规输出。用来`silent!`吞下错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T02:26:08.347

截至今天（2013 年 4 月 7 日），我正在使用最新版本 pyclewn-1.10.py2，并且出现了同样的错误。我编辑了我的 pyclewn.txt，如下所示，错误消失了。

```
$> cd pyclewn-1.10.py2
$> diff runtime/doc/pyclewn.txt ~/.vim/doc/pyclewn.txt
541c541
< 'inferior-tty' variable *MUST* be set *BEFORE* the inferior is started.
---
> 'inferior-tty' variable MUST be set BEFORE the inferior is started.
741,742c741,742
<                     and the TERM environment variable; this command  *MUST* be
<                     issued *BEFORE* starting the inferior. 
```

另外，我刚刚发现 pyclewn 开发人员已经提供了修复程序。 [http://sourceforge.net/tracker/index.php?func=detail&aid=3607476&group_id=212808&atid=1023202](http://sourceforge.net/tracker/index.php?func=detail&aid=3607476&group_id=212808&atid=1023202)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T08:47:22.437

我们对“完美主义者”有不同的定义。作为一个完美主义者，我会修复错误而不是隐藏它。

如果您不想自己修复它，我建议您将问题报告给插件的作者，以便他可以自己修复它并使每个用户都可以使用该修复程序。

*那*将是“完美主义者”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T19:31:48.433

谢谢你告诉我做那个罗马人！我应该首先自己解决这个问题。

我发现只需通过导航到*MUST*和*BEFORE*并执行 :normal cwMUST 和 :normal cwBEFORE 来破坏文件中第 541 行的单个标签，我就可以让 Helptags 运行完成。但这并不完美。

为了理解发生了什么，我阅读了帮助帮助写作，发现你应该有唯一的目标，标识符周围有 *。要指定目标标签，请在某物周围使用 |。

所以，|来源| -> * 目的地 *

在第 741 和 742 行，我认为 MUST 和 BEFORE 上面都有 * 和 |，因为 helptags 抱怨它，而且我可以从那里跳到第 541 行。从 541 我不能跳到 741 .

长话短说，对于这个愚蠢的问题，转到第 741 行并将周围的 * 替换为 |。帮助标签现在工作完成。

# c# - 找到满足某些条件的所有集合（向量）

> ID：15318106
> 
> 赞同：0
> 
> 时间：2013-03-10T02:01:01.630
> 
> 标签：c#, c, parallel-processing

我正在寻找这个问题的解决方案。我有集合的长度 (n)、集合的总和以及可以是集合中某个元素的最大值 k。

例如，n=5，k=3，sum=10

代码应该返回其中一些集合 [3, 3, 2, 1, 1]；[3、2、2、2、1]

如何在 c、c# 中务实地找到这些集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:10:28.487

这是我在 Java 中回答的解决方案：

```
public class Main {

/**
 * @param args the command line arguments
 */
private static void printVectors(int[] p, int n) {

    for (int i = 0; i < n; i++) {
        System.out.print(p[i] + " ");
    }
    System.out.println();
}
//main function
private static void computeVectors(int[] n, int sum, int k, int k1, int i) {

    if (sum == 0) {

        printVectors(n, n.length);
    } else if (i < n.length) {

        for (int j = k; j >= 0; j--) {

            if (j <= k1) {
                n[i] = j;
                computeVectors(n, sum - j, sum - j, k1, i + 1);
            }
        }
    }
}
public static void main(String[] args) {
    // TODO code application logic here
    computeVectors(new int[5], 10, 3, 3, 0);

} 
```

}

如果n=5，程序的一些输出；总和=10；k=3 是：

3 1 2 2 2

3 1 2 1 3

3 1 1 3 2

3 1 1 2 3

3 1 0 3 3

3 0 3 3 1

3 0 3 2 2

3 0 3 1 3

3 0 2 3 2

3 0 2 2 3

3 0 1 3 3

2 3 3 2 0

2 3 3 1 1

2 3 3 0 2

2 3 2 3 0

正如你所看到的，computeVectors 是递归函数，问题是，这个函数是否可以在没有递归的情况下实现，我尝试使用下面的代码但它不起作用：

```
private static void computeVectorsNoRecursion(int[] n, int sum, int k, int i) {
    if (sum == 0) {

        printVectors(n, n.length);
    } else if (i < n.length) {
        int j=k;
       // for (int j = k; j >= 0; j--) {

            while (j <= k) {
                if(j>=0)
                {
                n[i]=j;
                i++;
              int temp=sum;
                sum=temp-j;
                k=temp-j;
                j--;
                if(i>=n.length)
                {
                    i=0;
                    printVectors(n, n.length);
                }

            }
        }

      //  }
    }
} 
```

# java - 正则表达式从文本中删除 URL

> ID：15318110
> 
> 赞同：0
> 
> 时间：2013-03-10T02:01:54.743
> 
> 标签：java, regex

我的文本包含如下所示：

`"\n The Red Hot Chili Peppers are a <ahref=\"http://www.last.fm/tag/funk%20rock\" class=\"bbcode_tag\" rel=\"tag\">funk rock</a> band based in Hollywood, California and were formed in 1983, in Los Angeles, California. The band currently consists of founding members <a href=\"http://www.last.fm/music/Anthony+Kiedis\" class=\"bbcode_artist\">Anthony Kiedis</a> (vocals) and Michael &quot;Flea&quot; Balzary (bass) along with a longtime member Chad Smith (drums). Guitarist John Frusciante quietly left the band on good terms in late 2008\. On January 2, 2010, Josh Klinghoffer was announced as Frusciante's replacement. \n\n
<a href=\"http://www.last.fm/music/Red+Hot+Chili+Peppers\">Read more about Red Hot Chili Peppers on Last.fm</a>.\n \n "`

我想替换所有的`<ahref=\"http://www.alltheUrls</a>`和随机的`\n`并有这个：

`"The Red Hot Chili Peppers are a funk rock band based in Hollywood, California and were formed in 1983, in Los Angeles, California. The band currently consists of founding members Anthony Kiedis (vocals) and Michael Flea Balzary (bass) along with a longtime member Chad Smith (drums). Guitarist John Frusciante quietly left the band on good terms in late 2008\. On January 2, 2010, Josh Klinghoffer was announced as Frusciante's replacement. Read more about Red Hot Chili Peppers on Last.fm."`

谢谢您的帮助！

# php - PHP - 将字符串重新排列成顺序

> ID：15318115
> 
> 赞同：0
> 
> 时间：2013-03-10T02:02:51.827
> 
> 标签：php, string

抱歉，标题可能不太正确，但我有点累了。

我想知道是否有人可以帮助我解决问题，我有一个包含此（或类似即遵循相同模式）文本的字符串。

文本：

玩家 1 ($630) 玩家 2 ($578) CLICKK ($507) 玩家 5 ($600) 玩家 6 ($621)

玩家 1 帖子 (SB) $3 玩家 2 帖子 (BB) $6

从声明堆栈大小的第一个文本中，您可以收集的唯一信息是哪个玩家具有哪个堆栈大小。

下面的信息告诉我们，玩家 1 是 SB（小盲注），玩家 2 是 BB（大盲注），从这些信息中，我现在可以推断 CLICKK 是 UTG，玩家 4（在这种情况下不存在）是 MP，玩家 5 是 CO，玩家 6 是 BTN。

它始终遵循UTG在BB之后，MP在UTG之后，CO在MP之后等趋势。

我想做的是用他们对应的位置替换玩家名称，即玩家 1、玩家 2 等，所以玩家 1（630 美元）将变为 SB（630 美元）等等。

然后最后我可以删除底部，因为它会变得多余。

我不是要你为我做这件事，但如果你能指出我正确的方向，或者给我一些合乎逻辑的步骤，我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:53:33.447

假设，您必须在牌局开始时识别所有玩家。可能正则表达式是字符串搜索的最佳方法，但我会尝试使用 PHP Explode：

```
 <?php

    /** 
     *  Input Strings
    **/
    $GameString = "Player 1 ($630) Player 2 ($578) CLICKK 
                   ($507) Player 5 ($600) Player 6 ($621)";

    $PostBlindString = "Player 1 posts (SB) $3 Player 2 posts (BB) $6";

    $data = explode( ")", $GameString );
    $players = array();

    /** 
     *  Get the Small Blind Player Name
    **/
    $SmallBlindPlayer = trim( 
                          substr( $PostBlindString, 0, 
                              strrpos( $PostBlindString, " posts (SB)" 
                                )
                            )
                        );

    echo $SmallBlindPlayer;
    // (Echos 'Player 1' )

    /** 
     *  Go through each exploded string
     *  find it's name before the bracket
    **/
    foreach ( $data as $p ) {
        if ( $p !== '' )
            $players[] = trim(substr( $p, 0, strrpos( $p, "(" )));
    }

    /** 
     * Our Resulting players
    **/
    print_r( $players );

    Array
    (
        [0] => Player 1
        [1] => Player 2
        [2] => CLICKK
        [3] => Player 5
        [4] => Player 6
    )

    /** 
     *  Game states array
     *  when we know someone's 
     *  position, we can assign it
     *  through some loop
    **/
    $gameStates = array ( 
                    "SB",
                    "BB",
                    "UTG",
                    "MP",
                    "CO",
                    "BTN"
                );

    /**
     *  Find the small button player
    **/
    for ( $x = 0; $x < count($players); $x++ ) {
        if ( $players[$x] == $SmallBlindPlayer )
            echo $players[$x] . " This player is the small blind!";
    }

    /**
     *  Go through them, as assign it
     *  loop back to start if the player
     *  is late in the array
    **/
    $PlayerPositions = array(); 
    $LoopedThrough = false;
    $Found = false; 
    $FoundAt = 0;
    $c = 0;

    for ( $x = 0; $x < count($players); $x++ ) {

        if ( $players[$x] == $SmallBlindPlayer && !$Found ) {
            $PlayerPositions[$players[$x]] = $gameStates[$c];
            $Found = true; 
            $FoundAt = $x;

        } else { 

            if ( $Found ) {
                if ( $x != $FoundAt )
                    $PlayerPositions[$players[$x]] = $gameStates[$c++];
            }

            if ( $Found && !$LoopedThrough ) {
                    $x = -1; $LoopedThrough = true;
            }
        }
    }

    /**
     *  Print the "merged" arrays
    **/
    print_r( $PlayerPositions );

    Array
    (
        [Player 1] => SB
        [Player 2] => BB
        [CLICKK] => UTG
        [Player 5] => MP
        [Player 6] => CO
    )

 ?> 
```

我的想法是，从这里开始，您可以遍历玩家列表，知道您`$Gamestates`将说明您的玩家“找到”的位置，并附加到一个新字符串，或者用`$Gamestring`类似[substr_replace的东西替换原始字符串](http://php.net/manual/en/function.substr-replace.php)

此外，您可以在收集玩家姓名的同时收集堆栈大小以简单地创建一个新玩家名称`$GameString`- 无论如何，现在您将它们放在数组中，您可以使用它们做更多事情。

# excel - Excel 2010 中的 VBA：Scripting.Dictionary 函数的返回值不会作为参数传递给包装函数调用

> ID：15318117
> 
> 赞同：2
> 
> 时间：2013-03-10T02:03:18.747
> 
> 标签：excel, function, vba, parameters, return-value

为此已经把我的头从桌子上敲了几个小时，并且已经在互联网上搜索了我们的chuff，所以如果我错过了一个明显的解决方案，请道歉......

我有 2 个功能：

```
Public Function DictFromRanges(rKeys As Range, rValues As Range) As Scripting.Dictionary

    Debug.Assert (rKeys.Columns.Count = rValues.Columns.Count)

    Dim rRetDict As Scripting.Dictionary
    Set rRetDict = New Scripting.Dictionary

    ' loop through ranges adding values from rValues with keys from rKeys
    Dim iKey As Integer
    For iKey = 1 To rKeys.Columns.Count
        rRetDict(rKeys.Columns(iKey).Value) = rValues.Columns(iKey).Value
    Next iKey

    ' set return value
    Set DictFromRanges = rRetDict

End Function

Public Function MinTurnsToKill(dictAttack As Scripting.Dictionary, iHealth As Integer) As Integer

   MinTurnsToKill = iHealth

End Function 
```

如果我在电子表格的单元格中执行以下操作：

```
=MinTurnsToKill(DictFromRanges(F2:L2,F3:L3),100) 
```

当我在调试器中单步执行 DictFromRanges() 时，它似乎工作正常。

MinTurnsToKill() 是导致我大脑错误的那个 - 显然它是空的，但它甚至没有被调用（我最初有代码，但我把它全部拿出来只是为了确认它是否被调用）。

为了进一步测试发生了什么，我编写了 2 个代理函数：

```
Public Function Proxy(rKeys As Range, rValues As Range) As Variant

    Dim dict As Scripting.Dictionary
    Set dict = DictFromRanges(rKeys, rValues)

    Proxy = MinTurnsToKill(dict, 42)

End Function

Public Function ProxyToo(rKeys As Range, rValues As Range) As Variant

    ProxyToo = MinTurnsToKill(DictFromRanges(rKeys, rValues), 42)

End Function 
```

当从 excel 电子表格中的单元格按如下方式调用时，它们都可以正常工作（即都打印 42）：

```
=Proxy(F2:L2,F4:L4)
=ProxyToo(F2:L2,F4:L4) 
```

因此，看起来 excel 只是拒绝将返回的字典从 DictFromRanges() 传递到 MinTurnsToKill() 如果它们用于位于电子表格实际单元格内的评估引擎中。

事实上，当我在电子表格单元格中执行以下操作时，它几乎就像拒绝承认 MinTurnsToKill() 甚至存在：

```
=MinTurnsToKill(DictFromRanges(F2:L2,F3:L3),100) 
```

我认为必须有一种方法可以让 excel 发挥得很好，如果有人能告诉我怎么做，我将非常感激:)

干杯，

亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T23:15:21.040

问题源于您将这两个函数都用作用户定义函数 (UDF)，即直接从单元格中调用它们。Excel 无法处理类型的返回`Scripting.Dictionary`- 因此也不会将此结果传递给您的`MinTurnsToKill`函数。

幸运的是，Excel 可以处理`Variant`-如果您简单地更改这两行，那么从整个事情`Scripting.Dictionary`“派生”出来的内容将起作用：`Variant`

```
Public Function DictFromRanges(...) As Variant
Public Function MinTurnsToKill(dictAttack As Variant, ... 
```

希望能解决您的问题。

附带说明：在没有看到真正的代码的情况下`MinTurnsToKill`，它看起来非常像`HLOOKUP`(或`INDEX`/`MATCH`对我来说。也许这里根本不需要 VBA？或者不使用字典，你可以使用`.WorksheetFunction.Hlookup(100, [F2:L3],2,0)`？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:26:51.973

请记住，当您的 DictFromRanges 返回对象时，Excel 期望每个函数返回“值”（这是基本的）。没错，在 VBA 环境中，您的解决方案工作正常，但在传递给 Excel 时会破坏函数规则。建议很简单——将两个函数组合成一个返回值的函数。

# ruby-on-rails - 在rails中，当尝试提交指向索引资源（“get”）的form_tag时，我被指向一个创建路径（“post”）

> ID：15318120
> 
> 赞同：0
> 
> 时间：2013-03-10T02:03:38.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, routes

一些细节 - 表单在它指向的页面上（它应该只是刷新页面，我之前已经成功完成过） - 我已经尝试过这两个

```
<%= form_tag yearly_derivatives_path(:method => "get") do %>
  <%= range_field_tag :liabilities_pctg_se_l, 50, :min => 0, :max => 100 %>
  <%= submit_tag %>
<% end %> 
```

和

```
<%= form_tag(:method => "get") do %>
  <%= range_field_tag :liabilities_pctg_se_l, 50, :min => 0, :max => 100 %>
  <%= submit_tag %>
<% end %> 
```

*   这是相关的 routes.rb 数据

    `resources :yearly_derivatives`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:16:49.590

尝试，

`<%= form_tag yearly_derivatives_path, :method => "get" do %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:47:14.943

form_tag 中使用的默认方法是 POST，我认为您正在尝试将 :method => "get" 传递给 yearly_derivatives_path 而不是 form_tag，在这种情况下 form_tag 继续使用默认的 POST 方法。

这应该有效：

```
<%= form_tag :action => 'send_student_report_pdf', :method => 'get' %> 
```

# java - 如何在 java 中搜索保存在我的 arraylist 中的 lastNames？

> ID：15318122
> 
> 赞同：0
> 
> 时间：2013-03-10T02:03:49.223
> 
> 标签：java, for-loop, arraylist

```
public void searchLastName(String lastName)
{
    int size = list.size();

    for(int i = 0 ; i < size ; i++)
    {
        if(list.get(i).getLastName().equals(lastName))
            System.out.print(lastName+ " is located at " +i);
        else
            System.out.println("Cant find at loc:" +i);

    }
} 
```

这段代码有问题吗？？我无法搜索姓氏..请帮帮我

这是来自 Person 类

`public String getLastName() { return lastName; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:09:39.253

您的代码有什么问题，即使某些位置匹配，它也会为所有不匹配的位置打印出“找不到...”消息。也许这就是你想要的。但是，如果您想要一个`lastName`可以找到的位置，您可以执行以下操作：

```
int found = -1;
for (int i = 0; i < size && found == -1; ++i) {
    if (list.get(i).getLastName().equals(lastName)) {
        found = i;
    }
}
if (found >= 0) {
    System.out.print(lastName+ " is located at " + found);
} else {
    System.out.println("Cant find " + lastName);
} 
```

如果你想要找到它的*所有*位置，你可以这样做：

```
List<Integer> found = new ArrayList<Integer>();
for (int i = 0; i < size; ++i) {
    if (list.get(i).getLastName().equals(lastName)) {
        found.add(i);
    }
}
if (found.isEmpty()) {
    System.out.println("Cant find " + lastName);
} else {
    System.out.print(lastName+ " is located at " + found.toString());
} 
```

# android - Android Facebook SDK 3.0 教程：“帖子的链接必须指向应用程序的连接或画布 URL”

> ID：15318123
> 
> 赞同：0
> 
> 时间：2013-03-10T02:03:54.800
> 
> 标签：android, facebook, dialog

我是 Android Facebook SDK 3.0 的新手。我正在尝试在[https://developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog/)上遵循本教程，了解如何使用 Feed 对话框。我成功地让登录教程工作，但在本教程中，我不断收到这个问题标题中的错误。我将此方法复制到我的 MainFragment 类中：

```
private void publishFeedDialog() {
Bundle params = new Bundle();
params.putString("name", "Facebook SDK for Android");
params.putString("caption", "Build great social apps and get more installs.");
params.putString("description", "The Facebook SDK for Android makes it easier and faster to develop");           
params.putString("link", "https://developers.facebook.com/android");
params.putString("picture", "https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png");

WebDialog feedDialog = (
    new WebDialog.FeedDialogBuilder(getActivity(),
        Session.getActiveSession(),
        params))
    .setOnCompleteListener(new OnCompleteListener() {

        @Override
        public void onComplete(Bundle values,
            FacebookException error) {
            if (error == null) {
                // When the story is posted, echo the success
                // and the post Id.
                final String postId = values.getString("post_id");
                if (postId != null) {
                    Toast.makeText(getActivity(),
                        "Posted story, id: "+postId,
                        Toast.LENGTH_SHORT).show();
                } else {
                    // User clicked the Cancel button
                    Toast.makeText(getActivity().getApplicationContext(), 
                        "Publish cancelled", 
                        Toast.LENGTH_SHORT).show();
                }
            } else if (error instanceof FacebookOperationCanceledException) {
                // User clicked the "x" button
                Toast.makeText(getActivity().getApplicationContext(), 
                    "Publish cancelled", 
                    Toast.LENGTH_SHORT).show();
            } else {
                // Generic, ex: network error
                Toast.makeText(getActivity().getApplicationContext(), 
                    "Error posting story", 
                    Toast.LENGTH_SHORT).show();
            }
        }

    })
    .build();
feedDialog.show(); } 
```

对于那些使用 Android Facebook SDK 3.0 的人，我似乎找不到任何关于这个问题的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:23:12.317

转到您的应用程序设置，单击高级，并确保“流发布 URL 安全性”设置为“禁用”。

# excel - 复制和粘贴错误

> ID：15318124
> 
> 赞同：1
> 
> 时间：2013-03-10T02:03:59.643
> 
> 标签：excel, vba

是否有什么可能导致选择和复制范围以仅在某些文档中*包含*隐藏列？

这是大部分的代码：

```
Set rngAcData = .Range(.Cells(1, 1), .Cells(bottomMostRow, rightMostColumn))
rngAcData.Select
Selection.Copy
Sheets(".....").Select
Range("H2").Select
ActiveSheet.Paste 
```

请注意，这适用于大约 98% 的类似格式的文档。但在相同的文件中。它将重复总是包含隐藏的列。我已经尝试手动执行此操作，并且得到了相同的结果。我试图附加`.SpecialCells(xlCellTypeVisible)`到导致`run time error: 1004 database or table range is not valid.`以下高级过滤器命令错误的范围对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:22:52.400

试试下面的代码：

```
Sub test()
    Set rngAcData = .Range(.Cells(1, 1), .Cells(bottomMostRow, rightMostColumn))
    'Set rngAcData = .Range("A1").CurrentRegion  'can use this alternatively
    rngAcData.Copy Sheets(".....").Range("H2")  ' avoid using select in vba
   ' Selection.Copy  ' not needed
    'Sheets(".....").Select  ' not needed
   ' Range("H2").Select  ' not needed
   ' ActiveSheet.Paste  ' not needed
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:23:11.263

如果您要做的只是在排除隐藏单元格的同时复制和粘贴范围，那么您就非常接近了！试试这个：

```
Public Sub CopyVisibleCells()
    Dim rngAcData As Range
    Set rngAcData = Range(Cells(1, 1), Cells(5, 5))
    rngAcData.SpecialCells(xlCellTypeVisible).Copy Destination:=Sheets("Sheet2").Range("H2")
End Sub 
```

它将考虑范围`A1`，`E5`复制可见单元格，然后粘贴到`H2`中`Sheet2`。您可以对其进行修改以满足您的特定需求。

**前**

![在此处输入图像描述](../Images/bbbea9eaa72d6eae20c29ee1ef1a20f3.png)

**后**

![在此处输入图像描述](../Images/4bf89a403e6e4b7a06d0678d296b288b.png)

# gwt - GWT Elemental 简单示例中的异常

> ID：15318125
> 
> 赞同：0
> 
> 时间：2013-03-10T02:04:06.357
> 
> 标签：gwt, gwt-elemental

我正在尝试运行 GWT Elemental 示例（来自 GWT 2.5.1 存储库），它在运行时给了我一个异常。我必须对代码进行一些更改才能使其运行，我猜这是对 Elemental 的更改未反映在示例代码中的结果。这是代码，并注明了我的更改：

```
@Override
public void onModuleLoad() {
  final ButtonElement btn = getDocument().createButtonElement();
  btn.setInnerHTML("w00t?");
  btn.getStyle().setColor("red");
  getDocument().getBody().appendChild(btn);
  final DivElement div = getDocument().createDivElement();
  getDocument().getBody().appendChild(div);
  EventListener listener = new EventListener() {
    @Override
    public void handleEvent(Event evt) {
      final XMLHttpRequest xhr = getWindow().newXMLHttpRequest();
      xhr.setOnload(new EventListener() {
        @Override
        public void handleEvent(Event evt2) {
          div.setInnerHTML(xhr.getResponseText());
        }
      });
      xhr.open("GET", "/snippet.html");
      xhr.send();
      getWindow().setTimeout(new TimeoutHandler() { // *** changed from "new Window.TimerCallback()"
        @Override
        public void onTimeoutHandler() { // *** changed from "public void fire()"
          getWindow().alert("timeout fired");
        }
      }, 1000);
      btn.removeEventListener(Event.CLICK, this, false);
    }
  };
  btn.addEventListener(Event.CLICK, listener, false);
} 
```

原始代码在这里：[ElementalExample.java](http://code.google.com/p/google-web-toolkit/source/browse/releases/2.5/elemental/examples/simple/src/elemental/example/client/ElementalExample.java)。

异常发生在行上：`btn.addEventListener(Event.CLICK, listener, false);`，并且似乎是由其中一个 JavaScript 库中的空对象引起的。如果我注释掉`btn.addEventListener()`调用，那么页面会显示在浏览器中，带有按钮（虽然它是非功能性的，当然，没有事件监听器）。有没有其他人试图运行这个例子？如果是这样，您对在最新版本的 GWT 中运行有什么建议吗？

这是堆栈跟踪：

```
com.google.gwt.core.client.JavaScriptException: (String) : Invoking an instance method on a null instance
 at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
 at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
 at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
 at java.lang.reflect.Constructor.newInstance(Unknown Source)
 at com.google.gwt.dev.shell.ModuleSpace.createJavaScriptException(ModuleSpace.java:80)
 at com.google.gwt.dev.shell.ModuleSpace.createJavaScriptException(ModuleSpace.java:64)
 at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:60)
 at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
 at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338)
 at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:219)
 at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
 at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571)
 at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279)
 at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
 at elemental.js.dom.JsElementalMixinBase$.addEventListener$(JsElementalMixinBase.java)
 at com.google.gwt.core.client.JavaScriptObject$.elemental_html_ButtonElement_addEventListener(JavaScriptObject.java)
 at org.greatlogic.elementalfile.client.ElementalFileEntryPoint.onModuleLoad(ElementalFileEntryPoint.java:48)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
 at java.lang.reflect.Method.invoke(Unknown Source)
 at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:406)
 at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
 at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:526)
 at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
 at java.lang.Thread.run(Unknown Source) 
```

（请注意，我已将代码粘贴到我自己的项目中，因此也粘贴了`org.greatlogic.elementalfile.client.ElementalFileEntryPoint`类名）。

# jquery - 在jQuery中使用数组旋转推荐

> ID：15318129
> 
> 赞同：1
> 
> 时间：2013-03-10T02:04:37.010
> 
> 标签：jquery

[http://jsfiddle.net/jdTL9/1/](http://jsfiddle.net/jdTL9/1/)

我无法让它正常工作。它在错误的时间更改文本（如您在演示中所见）。我想我会以错误的方式解决这个问题（主要`setTimeout`是不必要的）。有人可以看看吗？

```
var testimonials = ['This', 'is', 'kind', 'of', 'working']

$.each(testimonials, function (i, val) {
  setTimeout(function () {
   //Slide In
    $('#testimonials blockquote').show("slide", {
      direction: "right"
    }, 1500, function () {
     //Slide Out
      $(this).text(val).hide("slide", {
          direction: "left"
      },
         1500);
    });
  }, i * 3000);
}); 
```

**我也希望它永远循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T02:20:40.047

您应该在显示项目之前更改文本，可以在`.hide()`的回调中或之前`show()`。还稍微重构了您的逻辑以使用回调而不是`setTimeout`：

```
var testimonials = ['This', 'is', 'kind', 'of', 'working'],
    i = 0,
    l = testimonials.length,
    $el = $('#testimonials blockquote');
(function loopTestimonials() {
    $el.text(testimonials[i++ % l]).show("slide", {
        direction: "right"
    }, 500, function () {
        $(this).delay(2000) //milliseconds to stay in screen
        .hide("slide", {
            direction: "left"
        }, 500, loopTestimonials); //restart show/hide loop when hide completes
    });
}()); 
```

[**小提琴**](http://jsfiddle.net/jdTL9/3/)

# php - PHP抓取多维数组键值

> ID：15318130
> 
> 赞同：0
> 
> 时间：2013-03-10T02:04:42.487
> 
> 标签：php, arrays, multidimensional-array

我有一个看起来像这样的数组：

```
Array
(
    [100] => Array
        (
            [room_id] => 100
            [name] => Town Center
        )

    [110] => Array
        (
            [room_id] => 110
            [name] => Coffee Shop
            [pin_id] => 7146
            [pin_x] => 570
            [pin_y] => 150
        )
) 
```

我想知道是否有一种方法可以找到特定值的键，如果“pin_id”值存在的话。例如：

```
Array
(
    [100] => Array
        (
            [room_id] => 100
            [name] => Town Center
        )

    [110] => Array                    <- I want to get this key "110"             
        (                                 
            [room_id] => 110          
            [name] => Coffee Shop     
            [pin_id] => 7146          <- Because "pin_id" is here
            [pin_x] => 570
            [pin_y] => 150
        )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:10:52.247

您必须通过循环传递数组并使用`array_key_exists`.

```
function makeHappen($argument){
  //Array
    foreach ($argument as $val) {
      if(array_key_exists($val, $array)){
            //if key exists, do something
      }
    }
}
echo makeHappen('pin_id'); 
```

# c# - C# 数据表网格计算

> ID：15318131
> 
> 赞同：0
> 
> 时间：2013-03-10T02:04:47.977
> 
> 标签：c#, matrix, datatable

我一直在尝试在 C# Winform DataTable 中构建一个简单的网格计算，其中用户输入起始值、结束值、展开起始值和展开结束值（在下面的代码中，我只是硬编码了这些值）。从那里，该表构建了一个计算值矩阵。

例如（初始结构）：

价格 ABCD

1
2
3
4

计算值：

1 - A、1 - B、1 - C、1 - D、2 - A、2 - B、2 - C、2 - D、3 - A、3 - B、3 - C、3 - D、4 - A, 4 - B, 4 - C, 4 - D,

下面的网格是我第一次尝试构建计算网格 - 有什么比下面更好的解决方案？：

```
static DataTable GetCalcGrid()
        {

            DataTable table = new DataTable();
            table.Clear();
            DataColumn column;
            DataRow row;

            try
            {
                //double minValue = (double)startingPrice.Value;
                double minValue = 1;
                //double maxValue = (double)endingPrice.Value;
                double maxValue = 2;
                //double incrementValue = (double)incrementPrice.Value;
                double incrementValue = .25;

                //double minSpreadValue = (double)spreadRangeLow.Value;
                double minSpreadValue = -.50;
                //double maxSpreadValue = (double)spreadRangeHigh.Value;
                double maxSpreadValue = .50;
                //double incrementSpreadValue = (double)spreadIncrement.Value;
                double incrementSpreadValue = .25;

                column = new DataColumn();
                column.DataType = System.Type.GetType("System.Int32");
                column.ColumnName = "N*";
                column.AutoIncrement = true;
                column.AutoIncrementSeed = 1;
                column.AutoIncrementStep = 1;
                table.Columns.Add(column);

                column = new DataColumn();
                column.DataType = System.Type.GetType("System.Double");
                column.ColumnName = "Price";
                table.Columns.Add(column);

                for (double x = minSpreadValue; x < maxSpreadValue + incrementSpreadValue; x += incrementSpreadValue)
                {
                    double value;
                    value = x;

                    column = new DataColumn();
                    column.DataType = System.Type.GetType("System.Double");
                    column.ColumnName = value.ToString("0.000");
                    table.Columns.Add(column);
                    table.Columns[value.ToString("0.000")].Expression = "(([Price] + (" + value + ")))";
                    //table.Columns[value.ToString("0.000")].Expression = " " + OP.black("C",4,Convert.ToDouble("(([Price] + (" + value + ")))"),.32,15,365,.003,1).ToString() + " ";
                }

                for (double i = minValue; i < maxValue + incrementValue; i += incrementValue)
                {
                    row = table.NewRow();
                    row["Price"] = i;
                    table.Rows.Add(row);
                }

            }
            catch (Exception ex) { MessageBox.Show("! " + ex); }
            finally { }

            return table;
        }

    private void toolStripButton1_Click(object sender, EventArgs e)
    {
        dataGridView1.DataSource = GetCalcGrid();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:58:05.640

你可以尝试这样的事情：

```
public class Matrix : List<MatrixEntry>
    {
    }

    public class MatrixEntry
    {
        public double Price { get; private set; }

        public double Value1
        {
            get { return (Price - 0.5); }
        }

        public double Value2
        {
            get { return (Price - 0.25); }
        }

        public double Value3
        {
            get { return Price; }
        }

        public double Value4
        {
            get { return (Price + 0.25); }
        }

        public double Value5
        {
            get { return (Price + 0.5); }
        }

        public MatrixEntry(double price)
        {
            Price = price;
        }
    }

static Matrix GetMatrixCalcGrid()
        {
            var matrix = new Matrix();

            try
            {
                double minValue = 1;
                double maxValue = 2;
                double incrementValue = .25;

                for (double i = minValue; i < maxValue + incrementValue; i += incrementValue)
                {
                    var entry = new MatrixEntry(i);
                    matrix.Add(entry);
                }

            }
            catch (Exception ex) { Console.WriteLine("! " + ex); }
            finally { }

            return matrix;
        } 
```

这是你要找的吗？

注意：我显然已经对计算进行了硬编码。但是您可以添加一些额外的属性来存储用户输入并修改属性以返回正确的值。我的示例的要点是，我认为它比使用 DataTable 更有效。

# java - Windows 7 - 将文件类型与 Jar 程序关联

> ID：15318133
> 
> 赞同：2
> 
> 时间：2013-03-10T02:05:09.033
> 
> 标签：java, file, windows-7, jar, associations

我写了一个打开文件的 Jar 文件。此 Jar 与扩展名 .jbz 和 .jbr 相关联。我的程序需要的是文件的完整文件名，以便程序打开它。

Windows 7 似乎失去了 Windows XP 具有的附加运行选项，我不太确定如何将文件名作为参数传递到批处理文件中。

所需的最终结果只是双击一个文件并让我的 Jar 将该文件作为 arg[0] 运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:31:08.827

原来 %1 是您尝试打开的文件的文件名和路径。

java.exe -jar jarFile %1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-27T23:14:09.367

在与 jar 文件相同的文件夹中创建一个 .bat 文件。放入以下行：

```
java -jar "%0\..\jarFile" "%1" 
```

其中 jarfile 是您的 .jar 文件。

现在，当您右键单击您的 .jbz 或 .jbr 文件时，您可以选择 .bat 文件作为“opener”。

# javascript - 阻止 jQuery 函数在请求运行时运行

> ID：15318134
> 
> 赞同：0
> 
> 时间：2013-03-10T02:05:12.330
> 
> 标签：javascript, jquery

我有一个需要经常重用的功能。当我将另一个页面加载到当前页面时会出现问题，该函数会触发两次。我尝试了此解决方案，但无法使其正常工作（[单击 1 次后禁用 jquery 功能，以防止多次执行](https://stackoverflow.com/questions/6064232/disable-jquery-function-after-1-click-to-prevent-multiple-executions)）。有什么解决方案可以防止该功能在发出请求时多次触发？该功能应该每次点击只触发一次。

```
(function($) {
    $.fn.likeclick = function(thiss, key) {  
        var $this = thiss;
        var pid=key;
        if ($this.hasClass('addd')) {
            $.post("/blah.php?id="+pid, function(data) {
                if (data=="ok"){
                    $this.removeClass('addd').addClass('rem');
                    $('.ccount#'+pid).html(function(i,val) {
                        return (parseFloat(val) + 1).toFixed(0);
                    });
                }
            });
        } else {
            $.post("/blah1.php?id="+pid, function(data) {
                if (data=="okk"){
                    $this.removeClass('rem').addClass('addd');
                    $('.ccount#'+pid).html(function(i,val) {
                        return (parseFloat(val) - 1).toFixed(0);
                    });
                }
            });
        }
    };
})(jQuery); 
```

用法：

```
<div class="like addd"></div>

$('.like').click(function() {
    likeclick($(this),this.id);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:46:53.243

如果我正确理解了您的问题，那么您需要一种方法让该函数在发出请求之前知道当前是否有任何活动请求。为什么不添加一个布尔值`hasActiveRequest`来跟踪这个？所以默认情况下它`false`，然后当他们点击它时，检查 boolean...if false 然后将其设置为`true`并发出请求；否则，如果它是`true`，则不要提出请求（因为已经有一个正在进行中）。请求完成后，将布尔值设置回`false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T12:28:39.157

由于这些函数在使用 .post() 方法加载的页面（或数据）上不起作用，因此我尝试将 jQuery 函数直接添加到加载的页面或使用 .js 文件。无论哪种方式，代码都会在使用 .post() 加载几页后多次执行。无论我使用延迟、超时功能还是添加布尔值来尝试防止每次点击多次触发该功能，该功能仍会执行多次。

在无休止的搜索之后，我在 jQuery 文档中看到了这篇文章（ [http://docs.jquery.com/FAQ#Why_do_my_events_stop_working_after_an_AJAX_request.3F ）。](http://docs.jquery.com/FAQ#Why_do_my_events_stop_working_after_an_AJAX_request.3F)

在那篇文章中说：

> 谨防！从 jQuery 1.4.2 开始，多次将同一个处理程序绑定到同一个元素将导致它执行多次。这与以前版本的 jQuery 以及 DOM 2 事件规范（通常忽略重复的事件处理程序）不同。

更多研究发现了 .live() 方法，但该方法已被弃用。.on() 方法取代了 .live()。所以我的解决方案是：

```
$(document).on('click', '.like', function(){
var $this = $(this);
likeclick($this,this.id);
}); 
```

现在我不必从 .post() 方法向加载的页面（数据）添加函数或使用其他方法来尝试阻止函数触发两次。

# java - 通过单击滚动条上的空白区域禁用滚动功能

> ID：15318135
> 
> 赞同：1
> 
> 时间：2013-03-10T02:05:39.747
> 
> 标签：java, swing, jscrollpane, jscrollbar

我正在编写一个小型摇摆应用程序，我试图从本质上将滚动条向下移动到向上和向下按钮。我已经花了好几个小时了解到这个小东西实际上被称为拇指，并且花了 40 秒来弄清楚如何禁用它。不过，这是我的下一个挑战：我想通过单击两个按钮之间的滚动条中的空白区域来禁用用户滚动 JScrollPane 的能力。

有谁知道执行此操作的方法（或覆盖以停止此操作的方法）？

对于好奇，禁用拇指：

```
JTabel tabel = new JTabel(model);
JScrollPane scrollPane = new JScrollPane(table)
JScrollBar scrollBar = scrollPane.getVerticalScrollBar();
BasicScrollBarUI barUI = new BasicScrollBarUI() {
protected void paintThumb(Graphics g, JComponent c,Rectangle thumbBounds) {}};
scrollBar.setUI(barUI); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:29:24.033

```
scrollPane.getVerticalScrollBar().setBlockIncrement(0); 
```

我很好奇，你是怎么禁用拇指的？

# algorithm - 计算爬 n 步的方法，每走 1、2 或 3 步

> ID：15318145
> 
> 赞同：1
> 
> 时间：2013-03-10T02:08:17.273
> 
> 标签：algorithm, recursion, dynamic-programming

在书中，我遇到了以下问题：

给定 N 级楼梯，如果您一次使用 1、2 或 3 级台阶，您可以爬多少种方式？

以下是该书给出的代码：

```
 int countWays(int n){

    if(n<0)
        return 0;

    if(n == 0)
        return 1;

    else return countWays(n-1) + countWays(n-2) + countWays(n-3);
  } 
```

在理解这段代码时，我有以下担忧：

1.  我不明白为什么 n=0 会返回 1。如果有 0 个台阶，那么显然我们不必爬任何台阶，应该返回 0。

2.  对于 n=3 函数返回 4 但我只能看到 3 种情况，即 (1,1,1)、(1,2)、(3)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T02:46:26.037

> 我不明白为什么 n=0 会返回 1。如果有 0 个台阶，那么显然我们不必爬任何台阶，应该返回 0。

当没有台阶时，您无需攀爬就可以通过，这是唯一且唯一的方法。正如其中一条评论所指出的，它可以表示为`()`。

> 对于 n=3 函数返回 4 但我只能看到 3 种情况，即 (1,1,1)、(1,2)、(3)。

实际上有4种情况：（1,1,1），（1,2），（2,1），（3）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:44:49.987

正如 Geobits 所说，爬 3 级楼梯有四种方法

```
(1,1,1),(1,2),(2,1),(3) 
```

至于为什么它返回 1 when `n==0`，这是因为只要`n==0`这意味着你已经找到了 1 种爬楼梯的方法。

最后，如果您输入任何高数字，此算法将花费很长时间，如果您正在寻找一种动态编程方法，您应该创建一个`n`大小数组并将前三个条目初始化为`1,2,4`，然后遍历数组起始和索引 3，每次将索引设置为`array[i-1] + array[i-2] + array[i-3]`. 这将做最少的计算，但会使用大量的内存。

有一种更好的方法，您只使用 1x3 大小的数组，但我将把如何做到这一点留给用户作为练习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-05T09:35:09.643

> 我不明白为什么 n=0 会返回 1。如果有 0 个台阶，那么显然我们不必爬任何台阶，应该返回 0。

为了补充[Terry](https://stackoverflow.com/a/15318330/832230)的答案，问题的一般答案是`tribonacci(n+2)`序列。因此，对于`n=0`，即`tribonacci(2)`，值是 1。这只是楼梯问题的计算技巧，一个有效的方法。如需更彻底的调查，请参阅[此答案](https://stackoverflow.com/a/40920969/832230)。

你当然可以选择拒绝`f(n=0) = 1`。如果你这样做了，那么你可以只使用以下你会更舒服的基本情况值。所有`n>3`这些都将递归到这些基本案例。

*   `f(n=1) = 1`
*   `f(n=2) = 2`
*   `f(n=3) = 4`

# php - 基本的 PHP 联系表

> ID：15318149
> 
> 赞同：-3
> 
> 时间：2013-03-10T02:08:59.037
> 
> 标签：php

您好，我正在上传一个网站，并且联系表格工作正常（接收消息），但提交后的页面给了我一个错误

这是我的php代码

我只是在学习 HTML/CSS 我没有任何 PHP。修复这个错误会很好，请告诉我如何发布“感谢您的信息已收到”

提前感谢您的任何反馈，非常感谢您有美好的一天！

```
 <?php

       if(!$_POST) exit;

       $email = $_POST['email'];

       //$error[] = preg_match('/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i',                                              

    $_POST['email']) ? '' : 'INVALID EMAIL ADDRESS';
   if(!eregi("^[a-z0-9]+([_\\.-][a-z0-9]+)*" ."@"."([a-z0-9]+([\.-][a-z0-9]+)*)+"."\ \.       

    [a-z]{2,}"."$",$email )){
    $error.="Invalid email address entered";
$errors=1;
    }
   if($errors==1) echo $error;
   else{
$values = array ('name','email','message');
$required = array('name','email','message');

$your_email = "xxxxxxxxxx@gmail.com";
$email_subject = "New Message: ".$_POST['subject'];
$email_content = "new message:\n";

foreach($values as $key => $value){
  if(in_array($value,$required)){
    if ($key != 'subject' && $key != 'company') {
      if( empty($_POST[$value]) ) { echo 'PLEASE FILL IN REQUIRED FIELDS'; exit;      

    }
    }
    $email_content .= $value.': '.$_POST[$value]."\n";
  }
}

if(@mail($your_email,$email_subject,$email_content)) {
    echo 'Message sent!'; 
} else {
    echo 'ERROR!';
} 
     }
     ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:17:14.097

## 您的代码非常混乱。

无意冒犯，但你需要努力制作适当的缩进，这样你才能清楚地看到问题所在。

这是您的代码的更简洁版本。

```
$required = array('name','email','message');
$temp = '';
$err = array();
foreach ($required as $value) {
    if ($_POST[$value] == '') $err[] = 'Field '.$value.' is required';
    $temp .= $value.': '.$_POST[$value]."\n";
}

if (count($err) > 0) {
    echo implode('<br />',$err);
    exit;
}

$your_email = "xxxxxxxxx@gmail.com";
$email_subject = "New Message: ".$_POST['subject'];
$email_content = "new message:\n".$temp;

if (mail($your_email,$email_subject,$email_content)) echo 'Message sent';
else echo 'Message not sent'; 
```

# java - 有人可以帮我纠正这个java循环。它是如此接近正确

> ID：15318158
> 
> 赞同：0
> 
> 时间：2013-03-10T02:11:04.067
> 
> 标签：java

所以我有一个如下所示的`ArrayList`调用`originalList`：

> [平底锅，小睡，锅，坐，这是，蒂斯，啪]

我也有一个`ArrayList`看起来`modifiedList`像

> [anps, anps, opst, ist, ist, ist, anps]

修改后的列表采用原始列表，删除标点符号并对其进行排序。该程序的目的是获取输入 ( `originalList`) 并查看输入中是否有字谜。字谜是由相同字母组成的单词。我的循环打印出字谜时遇到问题。这是循环：

```
 for (int i=0; i<modifiedList.size();i++){
        System.out.print(originalList.get(i));
        for (int j=i+1;j<modifiedList.size();j++){
            if (modifiedList.get(i).contentEquals(modifiedList.get(j))){
                System.out.print(" "+ originalList.get(j));
                originalList.remove(j);
                modifiedList.remove(j);                     
            }

        }System.out.println();

    } 
```

当我运行循环时，我得到以下信息：

```
pans naps snap
pots
sit it's
tis 
```

一切都是正确的，除了 tis 没有被列为 sat 和 it's 的字谜。这是 using `modifiedList.remove(j)`which 导致第二个循环在到达 tis 之前退出的原因，并且 tis 永远不会用 sat 和 it's 打印。modifiedList.remove(j) 是必需的，这样单词就不会在输出中重复。我将如何解决这个问题，以便将 tis 列为 sat and it's 的字谜？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:18:47.543

问题是您正在更改数组的索引，但没有更改 j。当您删除时，您会将以下每个项目的索引减少 1。因此，当您点击它时，它会匹配。您删除它，将 tis 移动到它曾经拥有的索引。然后，将 1 添加到 j，它现在超出了数组的末尾（因为 snap 已经被删除了）。因此，在删除 j 之后，您需要将 j 减 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:19:18.527

反转你的循环——从数组的后面工作到前面。这样，当您删除条目时，您不会更改尚未阅读的条目的索引。

您的另一个选择是通过调整循环索引来考虑删除，但这更棘手。

（还有一个选择是组成一个包含原始字符串和排序字符串的对象。制作一个数组，并使用排序方案对其进行排序，该排序方案将对排序后的字符串进行排序。然后扫描列表并注意何时你有一个“运行”的相同排序键。不需要删除。

创建该对象的“骗子”方法是将排序的字符串和原始字符串放在一个字符串中，用空格或其他特殊字符分隔，然后对字符串进行排序。）

# mapreduce - MapReduce 是否适合数据聚合？

> ID：15318159
> 
> 赞同：0
> 
> 时间：2013-03-10T02:11:14.203
> 
> 标签：mapreduce

我正在使用一个名为 XBus 的数据聚合平台。我需要先介绍一下。XBus 聚合了许多不同类型的数据源，如 RDBMS、XML 文件、JSON 文件、Web 服务等。用户可以定义一个数据处理流，其中包含许多操作，如join、order-by、filter、combine、group-by。然后该流程将转换为 XQuery 脚本。SAXON（一种 XML 流程引擎）将**在单台计算机（服务器）中**处理 XQuery 脚本。

**但是如果数据量很大，完成的时间会很长。**所以，我正在考虑 MapReduce 框架，它可以在分布式环境中处理大量数据。但我不确定 MapReduce 是否合适。

有一个问题可以表明我的怀疑。

由于它是一个数据聚合平台，原始数据存储在许多不同的系统中。在使用 MapReduce 处理数据之前，我们是否必须从这些系统中收集相关数据并将它们放入 Mapreduce (HDFS) 中？如果是这样，那将需要很长时间，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:41:37.040

是的，您必须将数据加载到 HDFS，然后对其进行处理。MapReduce 是否适用取决于不同的因素：

*   将数据加载到 HDFS 所需的时间是否明显小于处理集群中所有数据并产生最终结果所需的时间。
*   是否可以将来自所有不同来源的数据存储在 HDFS 中并且仅存储在 HDFS 中，这样就无需在每次作业运行之前将（所有）新数据加载到 HDFS 上。
*   您是否使用相同的转换处理不同的输入？在这里，您可以从重复运行相同的作业但使用不同的输入数据中受益。
*   每次作业运行的所有输入数据都会改变吗？或者也许可以为不同的输入 XML 文件运行该作业，并同时使用相同的 MR 作业对其进行转换。

当您决定使用 MR 时，您可能会发现[Cascading](http://www.cascading.org/documentation/)很有用。它是用于定义复杂数据流的数据 API。该项目提供了分叉、连接、标记、分组等抽象。

# ios - IOS、Xcode：捕获UITouch事件结束

> ID：15318161
> 
> 赞同：1
> 
> 时间：2013-03-10T02:11:38.387
> 
> 标签：ios, xcode, view, uitouch

我是IOS编程的初学者...我目前对方法不熟悉。设置是：我有一个函数调用。在这个函数中，我想等待一个点击然后生成一个新的 ViewController。我只需要点击的CGPoint，然后继续下一步。但我不知道是否有一些方法可以捕获 touchesEnded。或者，也许我想错了。谁能给我一些？

如果我在触摸结束后创建新的 viewController，那么在 modelDetect 之后什么都不会发生（它是必需的）。该应用程序将在触摸之前结束。

所以我现在不知道。

真的非常感谢。

```
- (void)modelDetect
{
 //wait for touches....then
 [self addNewViewController]; 
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event  
{
   NSLog(@"touch happens");
   UITouch *touch = [touches anyObject];
   Location = [touch locationInView:self.view];      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T02:23:33.537

您可以尝试使用`UITapGestureRecognizer`它可以解决您的问题

```
UITapGestureRecognizer *rec = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(userTapped:)];
[self addGestureRecognizer:rec];

- (void)userTapped:(UITapGestureRecognizer *)recognizer
{
    if(recognizer.state == UIGestureRecognizerStateRecognized)
    {
        CGPoint point = [recognizer locationInView:recognizer.view]; 
        // point.x and point.y  touch coordinates
         NSLog("%lf %lf", point.x, point.y);

        // here you could call your method or add the new view controller which you want
         [self addNewViewController]; 
    }
} 
```

为了通过`touchesEnded`你应该使用 CGPoint

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *aTouch = [touches anyObject];
    CGPoint point = [aTouch locationInView:self];
    // point.x and point.y touch coordinates
    NSLog("%lf %lf", point.x, point.y);
} 
```

# sockets - 在 openSUSE 中工作的套接字在 Debian 中不工作？

> ID：15318164
> 
> 赞同：1
> 
> 时间：2013-03-10T02:12:04.290
> 
> 标签：sockets, unix, debian, netcat

我有一个 C/C++ TCP 客户端在 OpenSUSE 中工作，但在 Debian 中没有。我正在使用 nc -l 4242 作为服务器。然后我在我的 Debian 系统（Sid）上连接 ./my_client 127.0.0.1 4242 ，使用连接功能时会失败。

您能否确认您是否也有同样的错误，使用 Debian 或其他操作系统？问题出在哪里？

这是代码：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>
#include <iostream>

void do_server(int s)
{
  write(s, "client connected\n", strlen("client connected\n"));
  close(s);
}

int main(int ac, char **av)
{
  struct protoent *pe;
  struct sockaddr_in sin;
  int s;

  if (ac != 3)
    {
      std::cerr << "Usage: ./client ip port" << std::endl;
      return EXIT_FAILURE;
    }
  pe = getprotobyname("TCP");
  if ((s = socket(AF_INET, SOCK_STREAM, pe->p_proto)) == -1)
    {
      std::cerr << "Error: socket" << std::endl;
      return EXIT_FAILURE;
    }
  sin.sin_family = AF_INET;
  sin.sin_port = htons(atoi(av[2]));
  sin.sin_addr.s_addr = inet_addr(av[1]);
  if (connect(s, (const struct sockaddr *)&sin, sizeof(sin)) == -1)
    {
      std::cerr << "Error: connect" << std::endl;
      close(s);
      return EXIT_FAILURE;
    }
  std::cout << "client started" << std::endl;
  do_server(s);
  return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T03:15:18.680

这似乎与您选择的 netcat 风格有关。

使用“传统”netcat（`/etc/alternatives/nc`链接到`/bin/nc.traditional`），您必须使用此语法来指定侦听端口：

```
nc -l -p 4242 
```

'openbsd' netcat 也支持这种语法（以及你使用的那个），即使它的手册页说你不能一起使用`-l`和`-p`。

# android - 图库控制 - 不工作

> ID：15318165
> 
> 赞同：1
> 
> 时间：2013-03-10T02:12:53.003
> 
> 标签：android, widget, gallery

当我尝试使用图库小部件时。我有一个问题。

此类在 API 级别 16 中已弃用。不再支持此小部件。其他水平滚动小部件包括支持库中的 Horizo​​ntalScrollView 和 ViewPager。

这是我的代码

```
 String [] text=new String[]{"Hello","Hi","Alloha",
            "Bonjour","Hallo","¡Hola"};

    Gallery gallery;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_gallery);

        gallery = (Gallery)findViewById(R.id.gallery1);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_gallery_item,text);
        gallery.setAdapter(adapter);

    } 
```

和activity_gallery.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".GalleryActivity" >

    <Gallery
        android:id="@+id/gallery1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</RelativeLayout> 
```

它显示空白。我正在使用 android 4.2.2 API 17 。我不知道会发生什么。任何人都可以帮助我！！！！

# windows - 无法在 Windows 上编译一个简单的 freeglut 测试程序

> ID：15318167
> 
> 赞同：3
> 
> 时间：2013-03-10T02:13:35.570
> 
> 标签：windows, opengl, freeglut

我下载了包含 freeglut 的“非官方 OpenGL 软件 SDK”，但我似乎无法让它工作。我在 Windows 上。我在 Visual Studio 2010 或 MinGW g++ 上都没有成功。我有一个非常简单的测试程序

```
#include <GL/glut.h>

int main(int argc, char* argv[])
{ 
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH);
    glutInitWindowSize(800, 600);
    glutCreateWindow("GLUT Test");

    glutMainLoop();
    return 0;
} 
```

现在我正在尝试编译它

```
g++ -I/c/Libraries/usr/include -L/c/Libraries/usr/lib -lfreeglut 
```

这是我不断收到的错误消息。

```
C:\Users\Zachary\AppData\Local\Temp\cckeVUNm.o:gluttest.cpp:(.text+0x1c): undefined reference to `_imp____glutInitWithExit@12'
C:\Users\Zachary\AppData\Local\Temp\cckeVUNm.o:gluttest.cpp:(.text+0x3e): undefined reference to `_imp____glutCreateWindowWithExit@8'
C:\Users\Zachary\AppData\Local\Temp\cckeVUNm.o:gluttest.cpp:(.text+0x60): undefined reference to `_imp____glutCreateMenuWithExit@8'
C:\Users\Zachary\AppData\Local\Temp\cckeVUNm.o:gluttest.cpp:(.text+0xa0): undefined reference to `_imp__glutInitDisplayMode@4'
C:\Users\Zachary\AppData\Local\Temp\cckeVUNm.o:gluttest.cpp:(.text+0xb9): undefined reference to `_imp__glutInitWindowSize@8'
C:\Users\Zachary\AppData\Local\Temp\cckeVUNm.o:gluttest.cpp:(.text+0xd2): undefined reference to `_imp__glutMainLoop@0'
collect2: ld returned 1 exit status 
```

我知道它可以找到头文件和库文件，因为如果我删除其中一个文件，它会给我一个错误，说它找不到它们。我不确定从这里去哪里。我曾尝试重新编译 freeglut，但这似乎也不起作用。

有人提到添加 -DFREEGLUT_STATIC 让它知道它正在静态编译。但是，我收到了相同的错误消息。

有什么建议吗？

根据到目前为止的回答，我将编译命令更改为

```
g++ gluttest.cpp -o gluttest -I/c/Libraries/glsdk_0.4.4/freeglut/include -L/c/Libraries/glsdk_0.4.4/freeglut/lib -DFREEGLUT_STATIC -D_LIB -DFREEGLUT_LIB_PRAGMAS=0 -lgdi32 -lwinmm -luser32 -lglu32 -lopengl32 -lfreeglut 
```

但是我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:20:10.567

您需要实际[链接库](http://glsdk.sourceforge.net/docs/html/pg_use.html)。`-L`只是设置库路径。由于您没有使用提供的 Premake4 工具与库链接，因此您还必须按照上述页面上的说明中列出的定义进行设置。

# c++ - 值相同时的 Minheap C++

> ID：15318169
> 
> 赞同：0
> 
> 时间：2013-03-10T02:14:14.473
> 
> 标签：c++, heap, min-heap

所以我做了一小堆二叉树。为了测试它，我创建了一堆具有 2 个不同值的节点。

说

```
struct node 
{
   int frequency;
   int data;
} 
```

说频率是堆主要排序的，但是如果节点频率相同，那就是按照节点数据排序。

当我制作一堆节点并加载堆并弹出并打印它们时，我得到了（大小，是树中有多少节点，min是每棵树拥有的最小数据）

```
Data    Freq    Size    Min
10      1       1       10
84      1       1       84
115     1       1       115
66      1       1       66
114     1       1       114
100     1       1       100
121     2       1       121
111     2       1       111
104     3       1       104
97      3       1       97
101     5       1       101
108     5       1       108
83      6       1       83
32      9       1       32 
```

如果你没有注意到，第三个条目是错误的，因此堆是错误的。

我的错误位于 minheap upheap downheap 的某个地方，删除或插入。

我已经尝试了好几天，我的大脑无法处理它，还有很多其他有趣的事情要做，比如模拟城市。（不是真的，我必须完成这个）

这是我的堆

```
class MinHeap
{
  public:
    int length;
    MinHeap(int mVal );

   ~MinHeap();

    int size();  // returns N, the size of the heap
    void insert(node* e);
    node* remove();
    void printheap();

  private:

    node **a;  // Array of pointers

    int MaxSize;
    int N;      // current size of heap
    int itemMin;
    void upheap(int k);
    void downheap(int k);

   };

MinHeap::MinHeap(int mVal)
{
   a = new node*[mVal+1]();  //  a**  is an array of pointers;
   N=0;  // Sets heap size to zero
   a[0]= new node();
   length = mVal+1;
   MaxSize = mVal;
   itemMin = -32767; // Minimum Heap
   a[0]->frequency= itemMin ;
}

MinHeap::~MinHeap()
{ delete [] a;}

void MinHeap::upheap(int k)
{
node *e = a[k]  ;
while( e->frequency < a[k/2]->frequency  )
    {
        a[k] = a[k/2] ;    //move parent down
        k = k/2 ;
    }
while(e->frequency == a[k/2]->frequency && e->minkey < a[k/2]->minkey)
    {
        a[k] = a[k/2] ;    //move parent down
        k = k/2 ;
    }
 a[k] = e ;

}

void MinHeap::downheap(int k)
{
   int j = 2 * k ;     
   node *e = a[k] ;

   while (j <= N) {

    if ((j < N) && (a[j+1]->frequency < a[j]->frequency)) j++ ;

    if((j<N) && (a[j+1]->frequency == a[j]->frequency) && (a[j+1]->minkey > a[j]->minkey ))j++;

    if (( e->frequency <= a[j]->frequency) ) break;

    a[j/2] = a[j];  // move child up
    j *= 2;         // move child down a level
}
a[j/2] = e;
}

void MinHeap::insert(node* e)
{
a[++N] = e ;
upheap(N) ;
}

node* MinHeap::remove()
{
node *e = a[1];

a[1] = a[N--]; downheap(1) ;
return &(*e);
} 
```

我应该提一下，我需要创建自己的 STL 类，如果频率相同，堆也应该选择优先级，其中树中保存的最小值是相同的，所以这就是代码中的 minkey 指针。只需要弄清楚为什么它的顺序不正确。

我的程序适用于霍夫曼编码器，这里是： [我的文件](http://www.tomwire.net/testfile.zip)

它有一个在 ubuntu 64 系统上编译的 make 文件。使用重定向输入。

上面的堆来自
echo "Sally Sold Sea Shells By The Sea Shore" > input
./huff < input

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:01:21.393

所以我设法弄清楚了，有趣的是我感觉有多愚蠢。

在我的 minheap downheap 函数中

```
void MinHeap::downheap(int k)
{
int j = 2 * k ;     node *e = a[k] ;
while (j <= N) {

    if (( (j < N) && (a[j+1]->frequency < a[j]->frequency) ) ||  ( (j < N) && (a[j+1]->frequency == a[j]->frequency) && a[j+1]->minkey < a[j]->minkey )     ) j++ ;
   //((a[j+1]->frequency == a[j]->frequency) && (a[j+1]->minkey > a[j]->minkey ))j++;

   if (( e->frequency < a[j]->frequency) ) break;
   if((e->frequency == a[j]->frequency && e->minkey < a[j]->minkey)) break;

    a[j/2] = a[j];  // move child up
    j *= 2;         // move child down a level
}
a[j/2] = e;
} 
```

# python - QSytemTrayIcon 未出现在 Ubuntu 12.04 中

> ID：15318170
> 
> 赞同：1
> 
> 时间：2013-03-10T02:14:47.220
> 
> 标签：python, qt, pyqt4, ubuntu-12.04, system-tray

我创建了一个使用 PyQt4 在后台运行的程序。系统托盘图标是在一个单独的线程中创建的，它允许我在创建并放置在托盘中之后与主程序进行交互。我以前在 Ubuntu 10.04 中从来没有遇到过这个问题。但是，我最近升级到了 Ubuntu 12.04，由于某种原因，甚至没有我想要的 QSystemTrayIcon 的踪迹。谁能告诉我这里到底发生了什么？我在 AskUbuntu 和 SO 上查找了有关我的问题的帖子，但似乎在数据库中找不到与我的问题匹配的任何内容。我只包含了我认为相关的部分代码，但如有必要，我会提供更多信息。

编辑：我已经在 Ubuntu 中修改了托盘面板白名单，并将其设置为`['all']`，因此我能够确定这不是问题。

相关代码：

```
class notify(threading.Thread, QtGui.QSystemTrayIcon):
    def __init__(self, process, iconMain, iconNew, parent=None):
        threading.Thread.__init__(self)
        QtGui.QSystemTrayIcon.__init__(self, iconMain, parent)

        self.menu = QtGui.QMenu(parent)
        self.menuNew = QtGui.QMenu(parent)

        viewAdsAction = self.menu.addAction("View Ads")
        textModeAction = self.menu.addAction("Text-Mode")
        exitAction = self.menu.addAction("Exit")
        textModeActionNew = self.menuNew.addAction("PC-Mode")
        exitActionNew = self.menuNew.addAction("Exit")

        self.iconMain = iconMain
        self.iconNew = iconNew
        self.setContextMenu(self.menu)
        self.process = process
        self.textMode = False 
```

在 main() 中执行：

```
def main():
    os.chdir(os.getenv("HOME") + "/.Phones")
    beginMain = mainProgram()
    beginMain.start()
    app = QtGui.QApplication(sys.argv)

    w = QtGui.QWidget()

    notifications = notify(beginMain, QtGui.QIcon("icon-58x58.xpm"), QtGui.QIcon("notify.xpm"), w)
    notifications.show()
    notifications.start()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:23:20.623

我解决了我的问题，解决方案是垃圾。显然 Qt 和 Unity 无法适应某些分辨率，我运行的是 58x58 缩放图标。我将它缩小到 48x48，现在系统托盘图标可见，并且可以正常使用我的程序。

# javascript - 如何在博主 (blogspot.com) 帖子中包含 GoogleMap？

> ID：15318173
> 
> 赞同：1
> 
> 时间：2013-03-10T02:15:18.983
> 
> 标签：javascript, google-maps, blogger

我正在尝试包含这样的页面

[http://www.jefftk.com/apartment_prices/index-2011-06](http://www.jefftk.com/apartment_prices/index-2011-06)

在由 www.blogspot.com（Google 的 Blogger）托管的博客中

以下是从上述页面中提取的相关代码。我已经尝试通过使用 HTML/JavaScript 小工具并在该部分中包含脚本来解决此问题。它们都不起作用。还有其他想法吗？

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
  var overlay;

  TQOverlay.prototype = new google.maps.OverlayView();

  function initialize() {
    var latlng = new google.maps.LatLng(42.345393812066433, -71.079311590576168);
    var myOptions = {
      zoom: 13,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var swBound = new google.maps.LatLng(42.255594, -71.18282318115234);
    var neBound = new google.maps.LatLng(42.43519362413287, -70.9758);
    var bounds = new google.maps.LatLngBounds(swBound, neBound);

    var srcImage = "http://www.jefftk.com/apartment_prices/apts-2011-06.png";
    overlay = new TQOverlay(bounds, srcImage, map);
  }

  function TQOverlay(bounds, image, map) {
    this.bounds_ = bounds;
    this.image_ = image;
    this.map_ = map;
    this.div_ = null;
    this.setMap(map);
  }

  TQOverlay.prototype.onAdd = function() {

    var div = document.createElement('DIV');
    div.style.border = "none";
    div.style.borderWidth = "0px";
    div.style.position = "absolute";

    var img = document.createElement("img");
    img.src = this.image_;
    img.style.width = "100%";
    img.style.height = "100%";

    img.style.opacity = .5;
    img.style.filter = 'alpha(opacity=50)';

    div.appendChild(img);
    this.div_ = div;
    var panes = this.getPanes();
    panes.overlayLayer.appendChild(div);
  }

  TQOverlay.prototype.draw = function() {
    var overlayProjection = this.getProjection();

    var sw = overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest());
    var ne = overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast());

    var div = this.div_;
    div.style.left = sw.x + 'px';
    div.style.top = ne.y + 'px';
    div.style.width = (ne.x - sw.x) + 'px';
    div.style.height = (sw.y - ne.y) + 'px';
  }

  TQOverlay.prototype.onRemove = function() {
    this.div_.parentNode.removeChild(this.div_);
    this.div_ = null;
  }

</script>
</head>
<body onload="initialize()">
  <div id="map_canvas" style="width:100%; height:100%"></div>
  <div id="legend">
  <b>$/bedroom</b>
  <br><br>  
  <font color="#FF0000">&#9608;</font> $1800+<br>
  <font color="#FF2B00">&#9608;</font> $1700+<br>
  <font color="#FF5600">&#9608;</font> $1600+<br>
  <font color="#FF7F00">&#9608;</font> $1500+<br>
  <font color="#FFAB00">&#9608;</font> $1400+<br>
  <font color="#FFD500">&#9608;</font> $1300+<br>
  <font color="#FFFF00">&#9608;</font> $1200+<br>
  <font color="#7FFF00">&#9608;</font> $1100+<br>
  <font color="#00FF00">&#9608;</font> $1000+<br>
  <font color="#00FF7F">&#9608;</font> $900+<br>
  <font color="#00FFFF">&#9608;</font> $800+<br>
  <font color="#00D5FF">&#9608;</font> $700+<br>
  <font color="#00ABFF">&#9608;</font> $600+<br>
  <font color="#007FFF">&#9608;</font> $500+<br>
  <font color="#0056FF">&#9608;</font> $400+<br>
  <font color="#002BFF">&#9608;</font> $300+<br>
  <font color="#0000FF">&#9608;</font> $300-<br>
  <br>
  as of 6/2011<br>
  <a href="index.html">current</a><br>
  <a href="rooms-2011-06.html">$/room</a><br>
  (<a href="/news/2011-06-18.html">details</a>)
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:01:25.427

`div id="map_canvas"`我在我的 Blogger 网站上尝试了上面的代码，并在我设置为固定大小时设法使它工作，如下所示：

```
<div id="map_canvas" style="width:400px; height:400px"></div> 
```

# session-cookies - 带有会话和子域的 HTTP 承载

> ID：15318176
> 
> 赞同：1
> 
> 时间：2013-03-10T02:15:56.860
> 
> 标签：session-cookies, restful-authentication, passport.js

我正在尝试构建一个可以在 client.domain.com 访问的单页 Web 应用程序。我在 api.domain.com 上公开了 web 服务 api（移动应用程序客户端也可以访问）。

使用护照我已经实施了本地、基本和不记名身份验证策略。在使用 curl 进行测试时，它们似乎运行良好。

虽然在 API 调用中提供“access_token”对于移动和 curl 来说效果很好，但对于 Javascript Web 客户端来说实现起来会很痛苦。我正在考虑将 access_token 存储在会话/cookie 中。这有意义还是会损害安全性？

我希望实现以下目标：用户访问 client.domain.com。提交到 api.domain.com/token 的登录表单。成功认证后，我想在会话/cookie 中发送一个令牌。对 api.domina.com 的所有后续请求都将自动使用会话。

如果这看起来没问题，我该如何让它工作——将从会话中读取令牌，并且不记名身份验证将起作用，而无需附加 access_token 作为查询参数。

```
passport.serializeUser(function(user, done) {
  console.log("serializeUser: " + JSON.stringify(user));
  done(null, "1234");
});

passport.deserializeUser(function(token, done) {
    console.log("deserializeUser:"+ token);
    // trying to set a parameter in the req object
    done(null, {access_token:token});
}); 
```

# text - 我的一些文本正在转换为其他编码？

> ID：15318178
> 
> 赞同：0
> 
> 时间：2013-03-10T02:16:47.977
> 
> 标签：text, encoding

这可能不是问这个问题的最佳地方，但我想不出其他地方。我早些时候访问了我的一个本地 wordpress 网站，并且管理栏已转换为其他一些奇怪的字符编码。然后，我在 github 上下载另一个新的 wordpress 警察，它又发生了。有谁知道如何解决这个问题？提前致谢。

我在这里放了一个屏幕截图：[hunterbrose.com](http://hunterbrose.com)

# lambda - 使用 lambda 球拍

> ID：15318182
> 
> 赞同：2
> 
> 时间：2013-03-10T02:17:27.117
> 
> 标签：lambda, scheme, racket

```
Design a function that consumes a [Listof Number] and checks if 0 is in the list. 
```

我想用`lambda`. 我一直在读这本书，这就是我迄今为止想出的。我希望我很接近。

```
(define (five? lon)
  (..... (lambda (x)
           (= x 5))
         lon)) 
```

你将如何完成这个（如果正确的话）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:18:13.973

假设正在搜索的数字是`5`（根据代码而不是问题描述推断） - 有一个过程已经完成了所要求的，它被称为[`member`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._member%29%29)：

```
(member 5 '(1 3 5 7))
=> '(5 7) 
```

其中，根据文档：

> 找到 lst 的第一个相等的元素？to v. 如果存在这样的元素，则返回从该元素开始的 lst 的尾部。否则，结果为#f。

但是，如果我们要从头开始实施类似的过程，解决方案将如下所示，填空：

```
(define five?
  (lambda (lon)
    (if <???>                 ; is the list empty?
        <???>                 ; then the number is not in the list
        (or <???>             ; otherwise the current element is 5 or
            (five? <???>))))) ; the number is in the rest of list 
```

不要忘记测试您的代码：

```
(five? '())
=> #f
(five? '(1 2 3 6 7 9))
=> #f
(five? '(1 2 3 5 7 9))
=> #t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T02:19:49.707

是的！签出`ormap`功能。

程序

```
(ormap proc lst ...+) → any
  proc : procedure?
  lst : list? 
```

[从球拍文档：](http://docs.racket-lang.org/reference/pairs.html?q=ormap#%28def._%28%28lib._racket/private/map..rkt%29._ormap%29%29)

> 在将proc应用于lst的每个元素的意义上类似于map，但是
> 
> *   如果proc的每个应用程序都产生#f，则结果是#f；和
>     
>     
> *   结果是第一次应用 proc 产生的值不是#f，在这种情况下，proc 不会应用于 lsts 的后面元素；proc 对 lsts 的最后一个元素的应用相对于 ormap 调用处于尾部位置。

# css - 打印表格时，chrome 和 safari 将一行切成两半

> ID：15318183
> 
> 赞同：8
> 
> 时间：2013-03-10T02:17:55.557
> 
> 标签：css, printing, tablerow

我在 IE9、Firefox 和 Opera 上没有这个问题。只有 Chrome 和 Safari。

打印页面时，如果有表格需要在某个时间点被打破才能在下一页继续，Safari 和 Chrome 会将行切成两半，并在第一页打印上半部分，在第二页打印下半部分页。

这是我尝试使用的代码，它确实解决了我在使用 IE9 时遇到的问题 - 在下一页的每一行中打印一个 50 像素 x 50 像素的小图像，并在第一页上显示文本。

```
table { page-break-inside:auto }
tr    { page-break-inside:avoid; page-break-after:auto } 
```

我有 7 页不同数量的行，平均大约 10-15 行。我能做些什么来解决这个问题？

而且我使用 PHP`foreach`从数组创建表，所以我宁愿不必编辑该代码，以便在页面之间保持一致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-10T04:25:40.173

这是一个只允许在行之间分页的表格示例。它应该适用于任何流行的桌面浏览器，包括基于 webkit 的浏览器......

```
<style>
  table {
    border-spacing: 0;
    line-height: 1.25em;
  }
  table > tbody > tr > td {padding: 0;}
  table > tbody > tr:first-child > td > div {border-top: 2px solid black;}
  table > tbody > tr > td:first-child > div {border-left: 2px solid black;}
  table > tbody > tr > td > div {
    page-break-inside: avoid;
    display: inline-block;
    vertical-align: top;
    height: 3.75em;
    border-bottom: 2px solid black;
    border-right: 2px solid black;
  }
</style>

<table>
  <tr>
    <td><div>Content</div></td>
    <td><div>Multi-<br/>line<br/>content</div></td>
  </tr>
  <tr>
    <td><div>Content</div></td>
    <td><div>Multi-<br/>line<br/>content</div></td>
  </tr>
</table> 
```

不幸的是，它要求单元格内容的高度是固定的，这对于大多数遇到这篇文章的人来说可能毫无用处。

可以在不设置固定内容高度的情况下完成此操作，但它非常复杂。[在这篇文章](https://stackoverflow.com/questions/7211229/having-google-chrome-repeat-table-headers-on-printed-pages/25737442#25737442)中查看我的答案，看看它是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T10:43:33.173

查看这些错误报告 [Webkit 错误报告](https://bugs.webkit.org/show_bug.cgi?id=5097)

[Webkit 较新的 Bug 报告引用了上面的一个。](https://bugs.webkit.org/show_bug.cgi?id=35217)

# mongodb - Meteor.Collection.ObjectID() 与 MongoDB ObjectId()

> ID：15318184
> 
> 赞同：30
> 
> 时间：2013-03-10T02:18:37.120
> 
> 标签：mongodb, meteor

为什么 Meteor.js 使用它自己的 ID 算法？

为什么不使用 MongoDB 的 ObjectId()？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-10T08:07:31.207

如果您选择使用 Meteor，则对对象 ID 使用相同的方法：

`Meteor.Collection.ObjectID()`和MongoDB的一样`ObjectID`

它只是在`Meteor.Collection`名称下。它使用 EJSON 将普通 JSON 中的对象 ID 保存到客户端。因为基本上有2个数据库有meteor

**米尼蒙戈**

这是客户端上的一种 mongodb 缓存。当浏览器加载时，数据从服务器上的主 mongodb 下载到这个。当进行更改时，它们会被推送到服务器。

**服务器 MongoDB**

这是服务器上 10gen 的原始 mongodb

因此，由于这两个数据库，Meteor 需要在其中包装 mongodb 功能，`Meteor.Collection`并让您在客户端和服务器上使用相同的代码。

默认情况下，meteor 不会使用对象 ID，它会使用随机字母数字文本。这样做是为了让您可以轻松地在 URL 中使用 ID 并在 html 属性中使用 ID。

如果您确实使用`new Meteor.Collection.ObjectID()`，您将获得一个`ObjectID`对象，该对象将在服务器端使用 mongodb 的 ObjectID 规范。对象 ID 中的时间戳值不会被保留，但这应该不会造成任何伤害。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-31T16:26:11.847

由于 0.9.1 Meteor 建议使用`Mongo.ObjectID`而不是`Meteor.Collection.ObjectID`. 基本上两者是一样的。检查[history.md](https://github.com/meteor/meteor/blob/devel/History.md#backwards-compatible-renames)以了解命名约定的更多更改。

# c++ - 虽然它会通过while循环两次

> ID：15318190
> 
> 赞同：0
> 
> 时间：2013-03-10T02:19:27.323
> 
> 标签：c++, while-loop

我试图解析一个名为 FileName 的文本文件，它看起来像：

```
KD JD 6s 5s 3c // no rank (king high)
AH Ks Js AD Ac // three of a kind 
```

现在我想将它们存储到一个向量中（“//”之前的所有内容）。

```
int FileParsing(vector<Card> & v, char * FileName) {
    ifstream ifs;
    ifs.open(FileName);
    if (!ifs.is_open()){
        cout << "file cannot be opened." << endl;
    } else {        
        string line;                    
        while(getline(ifs, line)){
            istringstream iss (line); 
            bool condition = CountWords(line); //dont worry about this method   
            ReadCardDefinitionStrings (condition, line, v);
        }       
    }
    return 0;
}

void ReadCardDefinitionStrings (bool condition, string line, vector<Card> & v){
    istringstream iss (line);   
    string CardDefinitionStrings;   //e.g. 2C, 3h, 7s, Kh
    if (condition) {
            while(iss>>CardDefinitionStrings){  
            if (CardDefinitionStrings == "//"){ //stop reading after it sees "//"
                return;
            }
            Card c = TestCard(CardDefinitionStrings);
            v.push_back(c);     
        }
    }
} 
```

我遇到的问题是：当它在 3c 之后看到“//”时，它会回到

```
 while(getline(ifs, line)){
        istringstream iss (line); 
        bool condition = CountWords(line);  
        ReadCardDefinitionStrings (condition, line, v);
    } 
```

但是这一次，行是空的（我希望它是：AH Ks Js AD Ac // 三种），这意味着这个循环运行一次而不做任何事情。下一次运行，line 将等于 AH Ks Js AD Ac // 三种。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:56:46.997

我想你忘了放很多代码（卡片定义等）。而且，据我所知，您在某些地方有几个多余的定义。

但是，我已经实现了您想要的（解析名为 FileName 的文本文件的能力，如下所示）：

```
KD JD 6s 5s 3c // no rank (king high)
AH Ks Js AD Ac // three of a kind 
```

假设输入文件流已使用文件名初始化：

```
ifstream ifs(FileName);

if (!ifs.is_open()) {
    cout << "file cannot be opened." << endl;
}
else {
    string line;

    //getline reads up until the newline character
    //but you want the characters up to "//"
    while(std::getline(ifs, line)) {

        //line has been read, now get rid of the "//"
        string substr = line.substr(0,line.find("//"));

        //assign the substr to an input stringstream
        istringstream iss(substr);

        //this will hold your card
            //NOTE: Since I don't have your implementation of Card, I put it as a string instead for demonstration purposes
        string card;

        //keep reading until you've read all the cards in the substring (from line)
        while (iss >> card) {
            v.push_back(card);//store the card in the vector
            cout << card << endl;//now output it to verify that the cards were read properly
        }

        cout << endl;//this is just for spacing - so it'll help us distinguish cards from different lines (in the output)
    }
    ifs.close();
} 
```

输出：

```
KD
JD
6s
5s
3c

AH
Ks
Js
AD
Ac 
```

这就是你想要的。;)

# php - MySQL 查询（使用 JOIN）仅检索第一行

> ID：15318195
> 
> 赞同：1
> 
> 时间：2013-03-10T02:20:28.820
> 
> 标签：php, mysql, join

这是我的查询

```
$getPosts = mysql_query ('SELECT `posts`.*, COUNT(`comments`.`comment_id`) 
                          FROM `posts` 
                          LEFT JOIN `comments` 
                          ON (`posts`.`post_id` = `comments`.`post_id`) 
                          ORDER BY `posts`.`post_id` DESC')
            or die(mysql_error()); 
```

然后循环遍历它...

```
while ($post = mysql_fetch_row($getPosts))
{
    echo $post[1] . ' ' . $post[4] . ' comments'; // example
} 
```

一切正常，但仅适用于第一行。

现在，post_id 1 有 2 条评论。post_id 2 在数据库中没有评论。

我认为这是 JOIN 的工作原理，但我不明白。我认为 LEFT JOIN 只匹配左边的内容（所以 post_id），但我尝试了 INNER JOIN、OUTER JOIN 等。但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T02:22:57.183

您的`COUNT()`聚合必须与`GROUP BY`子句一起使用。没有它，MySQL 将返回结果，但它们不会是您期望的结果，因为它会不确定地返回一个相关行。

```
SELECT
  `posts`.*, 
  `c`.`num_comments`
FROM
  `posts` 
  /* join against a subquery which retrieves the number of comments per post_id */
  LEFT JOIN (
    SELECT `post_id`, COUNT(*) AS `num_comments` 
    FROM `comments`
    GROUP BY `post_id` 
  ) AS c ON (`posts`.`post_id` = `c`.`post_id`) 
ORDER BY
  `posts`.`post_id` DESC 
```

MySQL 可能会允许您在不使用子查询的情况下简化此操作，因为它不需要`posts`列出 from 中的每一列`GROUP BY`，但不建议这样做，因为它不适用于任何地方。

```
/* MySQL only, not recommended */
SELECT
  posts.*,
  COUNT(comments.comment_id) AS num_comments
FROM 
  posts
  LEFT JOIN comments ON posts.post_id = comments.post_id
GROUP BY posts.post_id 
```

否则，您将需要列出 中`posts`的每一列，`GROUP BY`因为它们都是`SELECT`. `posts`这将起作用，因为联接只涉及与的一对多关系`comments`。

当您在 PHP 中获取此行时，请使用 alias `num_comments`。建议使用[`mysql_fetch_assoc()`](http://us3.php.net/manual/en/function.mysql-fetch-assoc.php), 并通过名称而不是数字键来访问列。

```
while ($post = mysql_fetch_assoc($getPosts))
{
    echo $post['post_id'] . ' ' . $post['num_comments'] . ' comments';
} 
```

从长远来看，如上面评论中所述，考虑切换到更新的 API，例如 MySQLi 或 PDO，因为该`mysql_*()`扩展在下一个主要 PHP 版本中面临弃用。

# java - 普通构造函数和mutator之间的区别？爪哇

> ID：15318197
> 
> 赞同：0
> 
> 时间：2013-03-10T02:20:42.347
> 
> 标签：java

我只是想知道普通构造函数和突变体之间的区别是什么？它们似乎都有相同的目的 - 为私有变量分配某些值。在特定情况下是否有一定的优势？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T02:26:50.170

区别在于：

*   构造函数的私有变量被分配*为创建新对象过程的一部分*。
*   构造函数通常会分配多个变量……精心设计的 mutator 可能不会这样做。
*   （正如@irreputable 提醒我的那样），构造函数可以（并且必须）将值分配给“空白”`final`变量......这是突变体无法做到的。

还值得注意的是：

*   构造函数*可以*调用 mutators（例如 setter）来进行赋值，并且
*   您可以在构造函数中保留未初始化的变量，并期望/要求作为`new`实例的代码*然后*使用 mutator 来完成初始化。

* * *

> 那么除此之外，它们有相同的目的吗？

不，构造函数的目的是创建一个新对象。mutator 的目的是更改现有对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T02:35:54.753

构造函数可以分配一个`final`变量。二传手不能。

setter 可以有一个更具描述性的名称，例如

```
new Foo(25);
vs
foo.setAge(25); 
```

# c - 此代码在 C 中的最坏情况复杂性

> ID：15318198
> 
> 赞同：0
> 
> 时间：2013-03-10T02:20:48.333
> 
> 标签：c, complexity-theory

该函数接受一个代表鹅卵石的字符数组并将该数组重新排列为红色、白色和蓝色字符。还返回重新排列时进行的交换次数。如果输入合法并且重新排列成功，则该函数返回 1。如果在输入中发现非法字符，则返回 0。

```
boolean processInput(char *pebbles, int *noOfSwaps){

    int low;
    int mid;
    int high;

    *noOfSwaps = 0;

    low = 0;

    while (low < strlen(pebbles) && color(*(pebbles + low)) == RED)
            low++;

    high = strlen(pebbles) - 1;

    while (high >= 0 && color(*(pebbles + high)) == BLUE)
            high--;

    mid = low;

    while (mid <= high){

            if (color(*(pebbles + mid)) == RED){

                    if (mid == low){

                            low++;
                            mid++;
                    }

                    else{

                            swap((pebbles + mid), (pebbles + low));

                            (*noOfSwaps)++;
                            low++;
                            mid++;
                    }
            }

            else if (color(*(pebbles + mid)) == WHITE)
                    mid++;

            else if (color(*(pebbles + mid)) == BLUE){
                    if (color(*(pebbles + high)) == BLUE)
                            high--;

                    else{
                            swap((pebbles + mid), (pebbles + high));
                            (*noOfSwaps)++;
                            high--;
                    }
            }      
            else
                    return 0;
    }
    return 1;
} 
```

^^^ 上面是我的代码。只有一个功能。需要知道该功能的最坏情况复杂性和原因。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:43:06.867

`O(n) + O(color())`当所有的鹅卵石都是红色时，这条线将导致最小值。如果颜色是`O(1)`（它可能是），那么它只是`O(n)`：

```
while (low < strlen(pebbles) && color(pebbles[low]) == RED)
    low++; 
```

其余代码似乎只检查每个元素的颜色一次，因此`O(n) + O(color())`也是如此。

所以我要去`O(n)`。

**编辑：**从头开始，他`strlen`在那个while循环中调用。我要把这个升级到`O(n^2)`. `n`的长度在哪里`pebbles`。让这回到`O(n)`. 调用`strlen()`一次，并缓存该值。

# sql - 连接两个表时，为什么不能在同一个查询中使用表的别名及其原始名称？

> ID：15318199
> 
> 赞同：5
> 
> 时间：2013-03-10T02:20:49.157
> 
> 标签：sql, sqlite, alias

假设有两个表由以下人员创建：

```
CREATE TABLE emp
(
EMPNO int,
EMPNAME varchar(255),
JOB varchar(255),
DEPTNO int
);

CREATE TABLE dept
(
LOC varchar(255),
DEPTNO int
); 
```

我想知道哪个部门没有雇员。我使用这样的左连接：

```
select dept.* 
from dept  
left join emp 
 on (dept.deptno=emp.deptno) 
where emp.empno is null; 
```

但是如果我为dept或emp使用别名，那么我只能使用别名而不能使用原始表名。例如：

```
select dept.* 
from dept as d 
left join emp 
 on (dept.deptno=emp.deptno) 
where emp.empno is null; 
```

我从 sqlite 收到错误“没有这样的表：部门”。

如果我在一个表上运行操作，我可以在同一个查询中使用别名和原始表名。

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T02:54:50.490

为表分配别名后，在查询期间它就是它的新名称 - 原始名称随后不可用。

“为什么”是由于 SQL 标准。如果您正在寻找解释为什么它被指定以这种方式工作，我能想到的主要原因是如果您将一个表连接到自身，您需要为至少一个引用设置别名以区分它们，但是如果您也被允许使用原始名称，因为它可以引用任何一个引用，所以会模棱两可。

另外，如果您想使用原始名称，请不要分配别名

# sqlite - 无法在 Windows 7 64 位机器上创建 sqlite3 数据库

> ID：15318200
> 
> 赞同：0
> 
> 时间：2013-03-10T02:20:56.870
> 
> 标签：sqlite

我正在尝试在我的 windows 7 64 位机器上创建一个 sqlite3 数据库。我已经从[http://www.sqlite.org/download.html](http://www.sqlite.org/download.html)下载了 sqlite-shell-win32-x86-3071502 。从已安装的文件夹运行 sqlite3.exe 后，我运行以下命令：

sqlite3 mytest.db;

但我收到“错误：靠近“sqlite3”：语法错误”。

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T06:07:58.550

我猜你在 sqlite shell 中输入了命令（见下文）

```
sqlite> sqlite3 mytest.db;
Error: near "sqlite3": syntax error 
```

您收到错误是因为它不是有效的 sqlite 命令。如果您正在创建一个名为 mytest.db 的数据库，请尝试在 Windows 命令提示符中输入该命令，然后您将处于 sqlite shell 环境中。要找出所有支持的命令，请在 sqlite shell 中输入 .help。

```
D:\sqlite> sqlite3 mytest.db
SQLite version 3.6.23
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> .help 
```

# jquery - KendoUI 图表不使用 JSON 数据源

> ID：15318204
> 
> 赞同：0
> 
> 时间：2013-03-10T02:21:55.417
> 
> 标签：jquery, json, kendo-ui, data-visualization

我有一个剑道 UI 图表：

```
function createkpiBreakdownChart(labelPosition) {
    $("#kpiBreakdownChart").kendoChart({
        theme: $(document).data("kendoSkin") || "metro",
        dataSource: {
            transport: {
                read: {
                    url: '../Test/GetData',
                    dataType: "json"
                }
            }
        },
        schema: {
            data: "customerSatisfactionChart"
        },
        series: [{
            field: "KPITestColumnValue"
        }],
        categoryAxis: {
            field: "KPITestColumnName"
        },
        title: {
            text: "Customer Satisfaction"
        },
        legend: {
            position: "bottom",
            visible: false,
        },
        chartArea: {
            background: "#ffffff"
        },
        seriesDefaults: {
            type: "bar"
        },
        //series: [{
        //    name: "Performance Metrics",
        //    data: [4.552162849872774, 4.391752577319588, 4.215633423180593, 4.345108695652174, 4.4728682170542635, 4.387005649717514, 4.351351351351352]
        //},],
        valueAxis: {
            minorUnit: .25,
            majorUnit: 1,
            min: 0,
            max: 5,
            plotBands: [{
                from: 4,
                to: 5,
                color: '#000000',
                opacity: .1
            }],
            labels: {
                labels: {
                    format: "N0"
                },

            },
            tooltip: {
                visible: true,
                format: "N0"
            }
        },
        //categoryAxis: {
        //    categories: ['Ease of requesting help', 'Time to reach qualified technician', 'Time to provide a solution', 'Completeness of solution', 'Technical ability & product knowledge', 'How well we kept you informed', 'Overall opinion of service'],
        //},
        tooltip: {
            visible: true,
            format: "#.##"
        }
    });
} 
```

那就是渲染空白。当我运行 AJAX 调用时：

```
$.ajax({
    type: 'GET',
    url: '../Test/GetData',
}).done(function (data) {
    var customerSatisfactionChartData = data;
}).fail(function (jqXHR, textStatus) {
}) 
```

在使用 Firebug 的 Firefox 中，我收到了这个 JSON：

```
{"customerSatisfactionChart":[{"KPIColumnName":"Time To Reach Qualified Tech","KPIColumnValue":3.579831},{"KPIColumnName":"Completeness Of Solution","KPIColumnValue":3.359243},{"KPIColumnName":"Opinion Of Overall Service","KPIColumnValue":3.720588},{"KPIColumnName":"Tech Ability And Prod Knowledge","KPIColumnValue":3.636554},{"KPIColumnName":"Time To Provide Solution","KPIColumnValue":3.285714},{"KPIColumnName":"Ease Of Requesting Help","KPIColumnValue":3.758403},{"KPIColumnName":"How Well Are You Kept Informed","KPIColumnValue":3.262605}]} 
```

我试图弄清楚为什么剑道图表没有正确使用它？这是在我的控制台的响应字段中，但我猜我目前没有剑道将使用的格式？如果这是问题，有没有办法通过解析或参数映射来纠正它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:56:10.807

这是不正确的：

```
 dataSource: {
        transport: {
            read: {
                url: '../Test/GetData',
                dataType: "json"
            }
        }
    },
    schema: {
        data: "customerSatisfactionChart"
    }, 
```

`schema`是 的一部分`DataSource`，所以应该是：

```
 dataSource: {
        transport: {
            read: {
                url: '../Test/GetData',
                dataType: "json"
            }
        }
        schema: {
            data: "customerSatisfactionChart"
        },
    }, 
```

# php - php数组预设值插入

> ID：15318206
> 
> 赞同：0
> 
> 时间：2013-03-10T02:22:16.840
> 
> 标签：php, arrays, algorithm

嗨，我从结果中有以下数组：

```
$ouput = $OuputTypeDB->getTotalOutput($uid); 
```

有五种类型的输出，每种都有自己的值，当前结果返回如下：

```
Array(
            [0] => Array
                (
                    [type] => 4
                    [val] => 1
                )

            [1] => Array
                (
                    [type] => 3
                    [val] => 2
                )

            [2] => Array
                (
                    [type] => 2
                    [val] => 1
                )

        ) 
```

输出结果是根据类型 desc 顺序显示的，现在的问题是 5 和 1 没有类型，我如何在上面的结果中添加 5 和 1 的数组并按以下方式排序：

```
Array
(
    [0] => Array
        (
            [rating] => 5
            [count] => 0
        )

    [1] => Array
        (
            [rating] => 4
            [count] => 1
        )

    [2] => Array
        (
            [rating] => 3
            [count] => 1
        )

   [3] => Array
        (
            [rating] => 2
            [count] => 1
        )

   [4] => Array
        (
            [rating] => 1
            [count] => 0
        )

) 
```

由于类型 5 和 1 没有值，因此两者都设置为`val 0`. 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:32:34.177

不到 20 小时前的[相同问题](https://stackoverflow.com/questions/15307676/set-default-to-php-array/15307780)

这是答案：

```
foreach ($output as $arr) {
    $vote[$arr['type']] = $arr['val'];
}
$output = array();
for ($i=5; $i>0; $i--) {
    $output[] = array("rating"=>$i,"count"=> $vote[$i] ? $vote[$i] : 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:29:48.977

添加一个项目 $output[] = array("rating"=>5, "count"=>$countFor5); 对于排序，您可以使用 uksort 或 usort 函数

# java - 内存屏障和 java.util.concurrent.locks.Condition 示例

> ID：15318207
> 
> 赞同：7
> 
> 时间：2013-03-10T02:22:25.307
> 
> 标签：java, concurrency

`Condition`在使用 a提供的 a时，我有一个关于内存屏障的问题`Lock`。

关于[javadoc for`Condition`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html)中提供的示例，我有一个关于使用的问题：

```
int putptr, takeptr, count; 
```

这些属性不应该被声明为 volatile 吗？正如我从示例中所理解的那样，线程可能看不到例如`count`.

或者，当`signal()`被调用时，自获得锁以来所做的所有修改对其他线程都是可见的？很像一个`synchronized`块中的一些代码？

如果是，修改`signal()`是在调用时可见，还是在`unlock()`锁上调用时可见？

谢谢。

编辑：我在 javadoc 中看到`Lock`：

> 所有 Lock 实现必须强制执行与内置监视器锁提供的相同内存同步语义，如 The Java™ Language Specification 的第 17.4 节所述：
> 
> *   成功的锁定操作与成功的锁定操作具有相同的内存同步效果。
> *   成功的解锁操作与成功的解锁操作具有相同的内存同步效果。
> 
> 不成功的锁定和解锁操作，以及重入锁定/解锁操作，不需要任何内存同步效果。

它们的意思是：“成功的锁定操作与进入`synchronized`块具有相同的内存同步效果”，以及“成功的解锁操作与退出块具有相同的内存同步效果`synchronized`”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T02:34:13.367

您应该阅读它的方式是，在 a 之前发生的所有写入`lock.unlock`对所有后续`lock.lock`. 一个正在运行的线程`await`，当被唤醒时，基本上会做`lock.lock`。因此，自上次解锁以来发生的所有写入现在都将可见。

`signal`没有记忆语义，因为您的后一点状态是`or when unlock() is called on the lock`正确的。

> 它们的意思是：“成功的锁定操作与进入同步块具有相同的内存同步效果”，以及“成功的解锁操作与退出同步块具有相同的内存同步效果”？

对，就是这样！更具体地说，编译器将发出 monitorenter 和 monitorexit 字节码指令。

# python - 在 Python 中捕获 Control-C

> ID：15318208
> 
> 赞同：40
> 
> 时间：2013-03-10T02:22:36.353
> 
> 标签：python, error-handling, keyboard-events

我想知道是否可以通过以下方式在 python 中捕获 Control-C：

```
 if input != contr-c:
    #DO THINGS
 else:
    #quit 
```

我已经阅读了一些东西，`try`但`except KeyboardInterrupt`它们对我不起作用。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-10T04:44:14.490

考虑阅读有关处理异常的页面。它应该会有所帮助[。](http://docs.python.org/3/tutorial/errors.html#handling-exceptions)

正如[@abarnert](https://stackoverflow.com/a/15318291/1931274)所说，`sys.exit()`在`except KeyboardInterrupt:`.

就像是

```
try:
    # DO THINGS
except KeyboardInterrupt:
    # quit
    sys.exit() 
```

您也可以使用内置`exit()`函数，但正如[@eryksun](https://stackoverflow.com/questions/15318208/capture-control-c-in-python/15319004#comment21631060_15319004)指出的那样，`sys.exit`它更可靠。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-10T02:39:06.897

从您的评论中，听起来您唯一的问题`except KeyboardInterrupt:`是当您收到中断时您不知道如何让它退出。

如果是这样，那很简单：

```
import sys

try:
    user_input = input()
except KeyboardInterrupt:
    sys.exit(0) 
```

# android - 使用 ListFragment 在 Android FragmentActivity 中找不到 id 的视图

> ID：15318211
> 
> 赞同：4
> 
> 时间：2013-03-10T02:22:43.597
> 
> 标签：android, android-listview, android-fragments, android-listfragment, android-fragmentactivity

我正在尝试创建一个自定义 ListView。当我测试我的代码时，我收到以下错误

```
03-09 19:21:10.425: E/AndroidRuntime(379): java.lang.RuntimeException: Unable to start      activity ComponentInfo{com.anomaly.punchlist/com.anomaly.punchlist.TeamActivity}: java.lang.IllegalArgumentException: No view found for id 0x7f08000c for fragment TeamListFragment{4067a358 #0 id=0x7f08000c} 
```

除了阅读有关 Fragments、ListFragments 和 ListViews 的 Android 文档之外，我在发布此问题之前还参考了以下链接。

链接 1：[FragmentActivity onCreateView](https://stackoverflow.com/questions/10498258/fragmentactivity-oncreateview)
链接 2：[在 Android 上使用 ListFragment 时出现问题](https://stackoverflow.com/questions/6301074/problem-using-listfragment-on-android)
链接 3：[Android 片段找不到 ID 视图？](https://stackoverflow.com/questions/7508044/android-fragment-no-view-found-for-id)
链接 4：[Android ListFragment 让人困惑](https://stackoverflow.com/questions/10481414/android-listfragment-is-to-confusing)
链接 5：[如何从 FragmentActivity 更新 ListFragment 中的 ListView？](https://stackoverflow.com/questions/10027202/how-update-listview-in-listfragment-from-fragmentactivity)
链接 6：[使用自定义视图填充 ListFragments？](https://stackoverflow.com/questions/9053671/populate-listfragments-with-a-custom-view)

我有扩展 FragmentActivity 的 TeamActivity 类和扩展 ListFragment 并实现 LoaderManager.LoaderCallbacks 的 TeamListFragment。请看下面的代码：

TeamActivity.java

```
package com.anomaly.punchlist;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;

public class TeamActivity extends FragmentActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction =  fragmentManager.beginTransaction();
    TeamListFragment teamListFragment = new TeamListFragment();
    fragmentTransaction.add(R.id.android_teamList, teamListFragment);
    fragmentTransaction.commit();       
   }

 } 
```

TeamListFragment.java

```
package com.anomaly.punchlist;

    import android.database.Cursor;
    import android.os.Bundle;
    import android.support.v4.app.ListFragment;
    import android.support.v4.app.LoaderManager;
    import android.support.v4.content.CursorLoader;
    import android.support.v4.content.Loader;
import android.support.v4.widget.CursorAdapter;
import android.support.v4.widget.SimpleCursorAdapter;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListView;

import com.anomaly.punchlist.contentprovider.basecolumns.TeamBaseColumns.Team;
import com.j256.ormlite.logger.Logger;
import com.j256.ormlite.logger.LoggerFactory;

public class TeamListFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {

    private static Logger logger = LoggerFactory.getLogger(TeamListFragment.class);
    private ListView listView;
    private SimpleCursorAdapter adapter;
    private static final int TEAM_LOADER_ACTIVITY = 0x01;
    private static final String[] PROJECTION = new String[] { "project_manager_id", "contact_id", "project_id" };
    private static String SELECTION = "contact_id = ? AND project_id = ?";

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        try {
            super.onCreate(savedInstanceState);
            int[] uiBindTo = { R.id.text1 };
            getLoaderManager().initLoader(TEAM_LOADER_ACTIVITY, null, this);
            adapter = new SimpleCursorAdapter(getActivity().getApplicationContext(), R.layout.team, null, null, uiBindTo, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);

        } catch (Exception e) {
            logger.error(e.getMessage());
            new RuntimeException("RuntimeException occurred in onCreate() method of TeamActivity." + e);
        }
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int arg0, Bundle bundle) {

        String contactId = new String();
        String projectId = new String();
        CursorLoader cursorLoader = null;

        if (bundle != null) {
            contactId = bundle.getString("contact_id");
            projectId = bundle.getString("project_id");

        }
        String[] selectionArgs = { contactId + ", " + projectId };
        cursorLoader = new CursorLoader(getActivity(), Team.CONTENT_URI, PROJECTION, SELECTION, null, null);
        return cursorLoader;
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        adapter.swapCursor(cursor);
        setListShown(true);

    }

    @Override
    public void onLoaderReset(Loader<Cursor> cursor) {
        adapter.swapCursor(null);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        onCreate(savedInstanceState);
        View teamView = inflater.inflate(R.layout.team, container, false);
        return teamView;
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        listView = getListView();
        listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        setListAdapter(adapter);
        setListShown(true);
    }

} 
```

除了上面的代码，我还有以下自定义布局。

团队.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:paddingLeft="8dp"
    android:paddingRight="8dp" >

    <ListView
        android:id="@+id/android:teamList"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:background="@color/grey2"
        android:divider="@color/blue2"
        android:dividerHeight="1dp"
        android:drawSelectorOnTop="false" />

    <TextView
        android:id="@id/android:empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#FF0000"
        android:text="No data" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T02:26:46.513

在*Activity*`onCreate()`的方法中使用该方法并定义一个布局文件，其中包含一个内部.*`setContentView(R.layout.activity)``FrameLayout``LinearLayout`*

 *现在使用您刚刚添加的*FrameLayout*`add()`的 id调用方法，而不是您在您的中使用的，并在您的 team.xml 布局文件中替换为。*`R.id.android_teamList``onCreate()``android:id="@+id/android:teamList"``android:id="@android:id/list"`*

 *顺便说一句，如果必须，您*可以*使用`android.R.id.list`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T02:44:15.930

`R.id.text1`应定义在`R.layout.team`.

检查[SimpleCursorAdapter 文档](https://developer.android.com/reference/android/widget/SimpleCursorAdapter.html#SimpleCursorAdapter%28android.content.Context,%20int,%20android.database.Cursor,%20java.lang.String%5B%5D,%20int%5B%5D,%20int%29)：

> 定义此列表项的视图的布局文件的资源标识符。布局文件应该至少包括那些在“to”中定义的命名视图**

# sql - 计算高幅度计数的匹配行数（100,000+）

> ID：15318219
> 
> 赞同：7
> 
> 时间：2013-03-10T02:24:22.370
> 
> 标签：sql, postgresql, count, nosql, counter

### 客观的：

当计数的数量级为 100,000 - 10,000,000 时，获取两次之间发生某事的次数。

### 当前实施：

*   使用 PostgreSQL
*   每个“事件”都记录为表格中的单独行

列：

*   事件类型
*   它发生的日期时间

获取计数的查询（伪代码）：

```
COUNT rows WHERE time_occurred > <begin_time> AND time_occurred < <end_time> 
```

### 问题：

这可行，但查询效率非常低，需要大约 40 秒才能响应。据我了解，PostgreSQL 不是用于此类查询的好数据库。

我坐下来想了几种方法可以在 O(log n) 时间内索引和执行这种类型的查询，所以我知道 t 是可能的。

我应该使用什么工具来做到这一点？我们应该使用不同的数据库来存储计数行吗？有没有我们可以在 PostgreSQL 上安装的软件包来轻松完成这项工作？我们有哪些选择？

### 笔记：

不确定我是否清楚这一点。的结果`COUNT`应该在 100,000 - 10,000,000 的数量级上。这意味着与查询匹配的行数大约为 100,000 - 10,000,000。表中的实际行数要多一个数量级。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T07:31:29.213

在 PostgreSQL 9.2 之前，MVCC 的实现需要任何查询来访问表的每一行，以检查该行的版本是否对当前事务可见。即使查询只涉及索引列，也会发生这种情况。这表现为对大型表的缓慢计数，即使对于简单的情况也是如此。

PostgreSQL 9.2 实现[了仅索引扫描](https://wiki.postgresql.org/wiki/Index-only_scans)，这可能有助于缓解某些工作负载的这个问题。

如果您被困在 v9.2 以下，如果您只需要简单查询的大致行数，则有一些已知的解决方法。请参阅[http://wiki.postgresql.org/wiki/Count_estimate](http://wiki.postgresql.org/wiki/Count_estimate)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T22:12:56.773

另一种方法可能是对表进行分区。这家伙似乎已经解决了一个非常相似的分区问题：

[http://www.if-not-true-then-false.com/2009/performance-testing-between-partitioned-and-non-partitioned-postgresql-tables-part-3/](http://www.if-not-true-then-false.com/2009/performance-testing-between-partitioned-and-non-partitioned-postgresql-tables-part-3/)

我对使用他的方法的担忧是可维护性。在他的示例中（您必须单击本教程的第 1 部分才能查看他是如何创建分区的），他手动创建每个子表，并在触发器中硬编码路由到子表。如果您的表不断增长，那么您将做大量的 DBA 工作。

然而，他的表现似乎确实得到了很大的提升。所以，如果你能弄清楚如何使它更易于维护，这可能是一个很好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T22:54:26.743

这正是维度建模和数据仓库旨在解决的问题。

我之前的一个项目在几周内用 Ruby 构建了一个数据仓库，以便处理这样的查询，并通过一个简单的 REST API 将其公开给主应用程序。基本上，您提取数据并将其转换为“星型模式”，该模式针对您描述的查询进行了高度优化。

Postgresql 非常适合作为数据仓库数据库。

这是一个非常详细的主题，一个很好的入门资源是： [http ://www.amazon.com/Data-Warehouse-Toolkit-Complete-Dimensional/dp/0471200247](https://rads.stackoverflow.com/amzn/click/com/0471200247)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T00:42:25.023

保留按天汇总的事件表。

```
create table incidents_agreggated_by_day (
    "day" date primary key, total integer
); 
```

日常跑：

```
insert into events_agreggated_by_day ("day", total) values
select date_trunc('day', time_occurred), count(*) total
from incidents
where 
    time_occurred < current_date
    and date_trunc('day', time_occurred) not in (
        select "day" from incidents_agreggated_by_day
    )
group by 1 
```

假设您想要 '2013-01-01 10:37' 和 '2013-03-02 11:20' 之间的总数：

```
select
(
    select sum(total)
    from incidents_aggregated_by_day
    where "day" >= '2013-01-02'::date and "day" < '2013-03-02'::date
) +
(
    select count(*)
    from incidents
    where 
        time_ocurred >= '2013-01-01 10:37':timestamp
        and time_ocurred < '2013-01-02'
        or
        time_ocurred <= '2013-03-02 11:20':timestamp
        and time_ocurred >= '2013-01-02'
) total 
```

您将阅读数百或数千行，而不是阅读 1 亿行。如果正确索引它会很快。

# javascript - 为什么我需要 8 个反斜杠？

> ID：15318221
> 
> 赞同：2
> 
> 时间：2013-03-10T02:25:25.630
> 
> 标签：javascript, proxy, escaping, cgi, xss

在编写“简单”的 cgi shell 脚本代理服务器以将引用的 xml 包装在 jsonp 样式的回调中时，我遇到了转义反斜杠的问题（通过反复试验和 Opera 出色的调试器解决了这个问题）。我仍在试图弄清楚为什么需要额外的反斜杠（8 vs. 4）。我知道每次解析都需要将反斜杠的数量加倍，但是我似乎忽略了某处的迭代，或者误解了处理。它会在浏览器中被解析两次吗？

*这是我试图弄清楚它为什么工作的最终工作代码*

```
#!/bin/sh
CB=${QUERY_STRING%%&*}
URL=${QUERY_STRING#*&}
case "$CB" in
    callback=*)
        printf "Content-type: application/javascript\r\n\r\n${CB##*=}(\""
        wget -q --no-check-certificate -U "NetSurf/2.9 (Linux; i686)" -T 20 -O - "$URL" \
            |tr -c [\ -~] " "|sed "s/[\\]/\\\\\\\\/g;s/[\"]/\\\\\"/g"
        printf "\")"
        ;;
    *)exit;;
esac 
```

这是我正在使用的测试页面（编辑 - 替换为更简单的非 gzip 版本）。

```
<html><head><title>test</title></head><body><div id="notaniframe"></div>
<script>
    function dummy(data){document.getElementById("notaniframe").innerHTML=data}
    Loaded=0
    setTimeout(function(){if(!Loaded)alert("load failed")},30000);
</script>
<script onload='Loaded=1' src="http://localhost/cgi-bin/xml2jsonp.cgi?callback=dummy&http://stackoverflow.com"></script>
</body></html> 
```

*这只是将 stackoverflow.com 塞进一个 div*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T02:35:38.917

Bash 执行一次传递；这个命令：

```
sed "s/[\\]/\\\\\\\\/g;s/[\"]/\\\\\"/g" 
```

运行此`sed`脚本：

```
s/[\]/\\\\/g;s/["]/\\"/g 
```

一通由`sed`; 在替换字符串中，`\\`表示`\`. 所以这个`sed`脚本将替换`\`为`\\`和。如你所愿。（请注意，这里的方括号实际上并没有做任何事情，而周围的方括号相当于用另一个 . 转义它。）`"``\"``"``\``\`

您可以通过在 Bash 脚本中使用单引号而不是双引号来删除一组反斜杠；在单引号内，`\`没有特殊含义。换句话说，你可以改变这个：

```
sed "s/[\\]/\\\\\\\\/g;s/[\"]/\\\\\"/g" 
```

对此：

```
sed 's/[\]/\\\\/g;s/["]/\\"/g' 
```

或者，就此而言，对此：

```
sed 's/\\/\\\\/g;s/"/\\"/g' 
```

# android - 从浏览器填写 http 表单和在 Android 中使用 httppost 的区别

> ID：15318223
> 
> 赞同：1
> 
> 时间：2013-03-10T02:26:17.130
> 
> 标签：android, google-app-engine, http, blobstore

我在 GAE 上有一个应用程序：http: [//1.myawesomecity.appspot.com/](http://1.myawesomecity.appspot.com/)

如您所见，如果您选择一个文件并点击提交，它将 404，但该文件实际上确实被存储（只要它不是太大，< 100kb）。不要在第一个文本字段中输入任何内容。

该文件的帖子名称是“myFile”。

我现在正在尝试使用 httppost 从 Android 应用程序上传文件。

用户选择一个文件，我得到它的目录，并将 myFile 的 namevaluepair 设置为文件目录。然后我执行 httpconnection，但文件没有上传。

所以我的问题是..有什么区别

1.  在浏览器上，单击“选择文件”，然后选择一个文件与将名称值对中的 myFile 分配给文件的目录

    和

2.  单击“提交”开始上传与运行 httpconnection.execute(httppost)？

如果没有差异，则应上传文件。该文件没有被上传，所以我相信知道两个进程（浏览器与 httppost）之间的差异应该可以揭示文件没有被上传的原因。

我确定以下几点：我的文件目录是正确的。服务器本身（尽管几乎没有功能）允许通过浏览器上传，无论是从我的 PC 浏览器、Android 模拟器的浏览器，还是从实际的 Android 机器的浏览器。Android 应用程序的 httpconnection 正在通过（执行 httpconnection 时不会引发异常）。

仅供参考，服务器正在使用 GAE 的 blobstore。

安卓代码：

```
 HttpClient httpclient = new DefaultHttpClient();

        HttpPost httppost = new HttpPost(url); //url is the app's site listed above

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

        nameValuePairs.add(new BasicNameValuePair("myFile", filename) ); //filename is the file's path
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        httpclient.execute(httppost); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T05:42:47.960

您需要实际发送文件，而不仅仅是文件名。像以下这样简单的东西应该可以为您做到这一点：

```
HttpClient client = new DefaultHttpClient();

HttpPost post = new HttpPost( url );
MultipartEntity entity = new MultipartEntity( HttpMultipartMode.BROWSER_COMPATIBLE );

entity.addPart( "theFile", new FileBody((( new File( filename ), mimeType ));

post.setEntity( entity );

client.execute( post ); 
```

# css - 父 div 中并排的子 div

> ID：15318225
> 
> 赞同：1
> 
> 时间：2013-03-10T02:26:46.547
> 
> 标签：css, html, twitter-bootstrap

使用 Bootstrap 2.3 我创建了两个`.gold-ratio .span6`父 div，每个都包含一个`.left-ratio`和`.right-ratio`div。在我`.left-ratio`的 div 里面是一个图像，在`.right-ratio`div 里面是一些描述图像的文本。但是，我的`.left-ratio`div 填充到父 div 中，并且 div 中的文本`.right-ratio`无处可寻。一切都设置为`float: left`，两个子 div 都是`display: inline-block`. 不太确定为什么图像占据了一切。

**[JSFIDDLE](http://jsfiddle.net/ugSR9/)**

HTML：

```
<div class="row center">
           <ul class="thumbnails">
                <li class="span6" id="item1">
                    <div class="gold-ratio">
                        <div class="ratio-left" id="pic1">
                            <img src="img/arch/studio4_1.jpg"/>
                        </div>
                        <div class="ratio-right">
                            <h3>Some Info</h3>
                            <p>Detailed Info</p>
                        </div><!--/.ratio-right-->
                    </div><!--/.gold-ratio-->
                </li><!--/.span6-->

                <li class="gold-ratio span6" id="item2">
                    <div class="ratio-left" id="pic2">
                        <img src="img/arch/studio4_1.jpg"/>
                    </div><!--/.ratio-left-->
                    <div class="ratio-right">
                        <h3>Some Info</h3>
                        <p>Detailed Info</p>
                    </div><!--/.ratio-right-->
                </li><!--/.gold-ratio .span6-->
           </ul><!--/.thumbnails-->
    </div><!--/.row .center--> 
```

CSS：

```
.gold-ratio {
    display: block;
    float: left;
    overflow: hidden;
    height: 300px;
}

.left-ratio {
    display: inline-block;
    float: left;
}

.right-ratio {
    display: inline-block;
    float: left;
    width: 200px;
} 
```

**编辑：我使用的图像比 div 大，所以我让左 div 切断了所有溢出。**

**[更新的](http://jsfiddle.net/ugSR9/1/)JSFIDDLE**

由于声誉低下，我无法发布照片，但也许这会有所帮助：

我有的：

```
___________________
|                 |
|                 |
|_________________| 
```

这是我想要的：

```
___________________
|             |   |
|             |   |
|_____________|___| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:33:18.827

您在将标记与 CSS 规则链接时犯了一个错误。在您的 HTML 中，我可以看到`<div class="ratio-left">`and `<div class="ratio-right">`，但在您的样式表中，您正在尝试设置`.left-ratio`and的样式`.right-ratio`。

正如您[**在此处**](http://jsbin.com/esusoh/1)看到的，修复此规则可以解决问题并使它们的行为符合您的预期。

## 更新

要解决您的问题，您必须更好地了解**浮动**的工作原理。我将尝试简明扼要地解释它，并简单地关注手头的问题，而不是深入讨论 CSS 最复杂的方面之一：

当一个元素浮动时，它会被尽可能地推向**包含元素**的 float 属性指定的方向。与*绝对定位元素*相反，**浮动元素仍然是文档流的一部分**。简而言之，这意味着它们占据了自己的空间。

在您的情况下，这就是问题所在。

您有一个固定宽度 ( `li.span6`) 的容器。在此元素内，您有另一个容器 ( `div.golden-ratio`)，其中包含两个容器 (`div.left-ratio`和`div.right-ratio`)。最后两个容器的设计目的是`float:left`（您可以摆脱`display: inline`，因为浮动元素会自动制成一个盒子；也许您正在寻找`display:inline-block`可以使您免于很多麻烦的方法）。

然而，由于这最后两个容器**没有固定的宽度**，它们采用任何宽度的内容。

`div.left-ratio`取内部的宽度`img`；不受约束，而是受`max-width: 100%`. 这指的是 100%，`div.span6`因为它是具有固定宽度的最后一个元素。

**通过占据整个空间`div.left-ratio`推动`div.right-ratio`下一行**。当您说它无处可寻时，那是因为您设置`div.golden-ratio`了`overflow:hidden`属性，并且具有固定的高度。`overflow: hidden`意思是：**隐藏超出我固定宽度/高度的所有内容**；因此，被推送的元素正在*消失*。

为了实现您想要做的事情，您必须通过给（或其内容）一些宽度限制（无论是像素、百分比还是任何您想要的）**来腾出空间。`div.righ-ratio`**`div.left-ratio`在[这个更新的示例](http://jsbin.com/esusoh/5)中，我将向您展示如何做到这一点。

……嗯……*简明扼要*……</p>

# dns - 如何检查某些站点的 MX/SOA 记录

> ID：15318227
> 
> 赞同：0
> 
> 时间：2013-03-10T02:26:51.100
> 
> 标签：dns, bind

我喜欢为某些网站查找 MX。

我尝试了类似 www.yahoo.com MX IN 但我找不到 mail.yahoo.com

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T02:52:03.693

```
$ dig yahoo.com MX
; <<>> DiG 9.8.3-P1 <<>> yahoo.com MX
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 20645
;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;yahoo.com.         IN  MX

;; ANSWER SECTION:
yahoo.com.      269 IN  MX  1 mta5.am0.yahoodns.net.
yahoo.com.      269 IN  MX  1 mta7.am0.yahoodns.net.
yahoo.com.      269 IN  MX  1 mta6.am0.yahoodns.net.

;; Query time: 64 msec
;; SERVER: 8.8.8.8#53(8.8.8.8)
;; WHEN: Sat Mar  9 18:51:14 2013
;; MSG SIZE  rcvd: 106 
```

# modulo - N+1个连续数字的LCM

> ID：15318228
> 
> 赞同：0
> 
> 时间：2013-03-10T02:26:59.930
> 
> 标签：modulo, lcm

我们如何编写代码来找到以下解决方案： (N+1)*X =LCM( 1,2,3,4,5,6,......,N,N+1) 使用 mod 当它变得大于 (10^9 +7) 。使用 MOD=(10^9 +7)。我写了以下代码片段，但它不起作用：

```
ll dp[100005];
ll gcd (ll a,ll b)
 {
        if (b == 0)
                return a;
        else
                return gcd (b, a % b);
}
void extend_euclid(int a,int b,int &x,int &y)
{
    if(a==0)
    {
                x=0;y=1;
                return;
        }
        int x1,y1;
        extend_euclid(b%a,a,x1,y1);
        x=y1-(b/a)*x1;
        y=x1;
}
void init()
{
    dp[1]=1;
    for(ll i=2;i<100002;i++)
    {
        ll x,y;
        x=dp[i-1]*i;
        x=x%mod;
        y=gcd(i,dp[i-1]);
        y=y%mod;
                int z1,z2;
        extend_euclid(y,mod,z1,z2);
                y=(z1+mod)%mod;
                dp[i]=(y*x)%mod;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T17:59:09.383

我假设这是你的问题（如果我错了，请纠正我）：

> 当 N*X = LCM(1 -> N) (mod 1E9 +7) 时求 X

首先，得到 LCM(1 -> N)，然后除以 N。

您可以查看每个≤ N 的质数并取≤ N 的最高指数，然后将它们全部相乘，而不是计算每个数字的 LCM，直到 N。因此，如果 N=20，您将取：16(2^4), 9(3^2), 5, 7, 11, 13, 19。将它们相乘得到 232792560，等于 LCM(1 - > 20)。

有了这个，N 总是会分成 LCM(1->N)，（我会让你弄清楚为什么）并且找到 X 很容易。

现在，你会注意到 N=23，你必须 (mod 1E9 +7) 并且你的 LCM(1->23) 不能被 23 整除。你能澄清这个问题需要什么吗？您是否必须找到等于 LCM(1->23) 的 X*N (mod 1E9 +7)？

# javascript - HTML标签中的属性顺序

> ID：15318229
> 
> 赞同：-1
> 
> 时间：2013-03-10T02:27:35.213
> 
> 标签：javascript, html

我知道将属性放在 HTML 标记中的顺序无关紧要，但出于可读性/调试的原因，我保持一致的模式。但是，我将需要违反我的模式，因为我需要使用查找/替换将鼠标悬停添加到一堆元素中。我的鼠标悬停将调用一个 javascript 函数并将 id 作为变量传递。我将把这个函数放在元素的 id 属性之前。这会导致某些浏览器出现任何问题吗？我只想确保每个现代浏览器在执行脚本之前都会读取元素的所有属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T02:30:50.737

您是正确的，因为 HTML 中的顺序或属性无关紧要，因此`onmouseover`在属性之前您不会遇到任何问题`id`。

# php - PHP unlink() 处理异常

> ID：15318230
> 
> 赞同：40
> 
> 时间：2013-03-10T02:28:03.597
> 
> 标签：php, exception-handling, unlink

好吧，我一直想知道我是否可以`unlink()`正确处理该功能。`unlink()`如果无法取消链接文件（可能是由于找不到文件），我不希望该函数抛出一些讨厌的错误。

我尝试了类似的东西

```
try { 
    unlink("secret/secret.txt"); 
} catch(Exception $e) { 
    print "whoops!"; 
    //or even leaving it empty so nothing is displayed
} 
```

但它不起作用。我不是 PHP 专家。我在网络的某个地方搜索并找到了这个异常处理代码。但我记得我的学生时代，Java 也是如此。所以它应该工作。我不知道代码有什么问题。

或者我可以简单地使用 if..else 语句，如

```
if(unlink($file)){
  //leaving here empty must ensure that nothing is displayed
}else{
  //leaving here empty must ensure that nothing is displayed
} 
```

但是这段代码也不起作用。我在哪里做错了？还有什么其他方法可以正确处理它？

可以通过错误报告（PHP）（生产和开发环境）操作来隐藏错误吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-10T02:30:25.367

**注意：**这可能不再起作用。见布赖恩的评论

如果你只想抑制错误，你可以这样做：

```
@unlink('your_file_name'); 
```

通常，在 PHP 中，@ 会抑制任何错误。

更好的方法是最小化错误概率。您说过错误可能性之一是由不存在的文件引起的。如果我是你，我会这样做：

```
if(file_exists('your_file_name')){
    unlink('your_file_name');
}else{
    echo 'file not found';
} 
```

祝你好运 ：）

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-10T02:32:21.953

`unlink`不会抛出异常，会产生错误。正确的方法是在尝试调用文件之前检查文件是否存在`unlink`。如果您只是担心没有错误输出，那么您应该关闭`display_errors`在生产环境中应该始终执行的操作。然后他们将被记录。

不要用 来压制错误`@`，它很少被推荐。

> 你能更详细地描述一下吗`@`

我不确定你到底是什么意思。但是文档在[这里](http://www.php.net/manual/en/language.operators.errorcontrol.php)。至于你为什么不想使用它......那是因为你永远不知道代码不起作用或有问题。即使从功能的角度来看代码仍然有效，它仍然存在问题，并且该问题可能会在某些时候使其他东西完全不起作用。如果您从未遇到过错误，您可能会浪费大量时间进行调试。

更改日志级别或禁用错误显示很好，但您永远不想完全抑制它们。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-11-25T09:59:02.300

这种方法可能看起来很奇怪，但我相信它是最万无一失的，它解释了“竞争条件”。

*   [mkdir 竞争条件](https://github.com/kalessil/phpinspectionsea/blob/master/docs/probable-bugs.md#mkdir-race-condition)
*   [file_put_contents 竞争条件](https://github.com/kalessil/phpinspectionsea/blob/master/docs/probable-bugs.md#file_put_contents-race-condition)

is_file

```
if(is_file($file) && @unlink($file)){
    // delete success
} else if (is_file ($file)) {
    // unlink failed.
    // you would have got an error if it wasn't suppressed
} else {
  // file doesn't exist
} 
```

为什么？

首先[is_file](http://php.net/manual/en/function.is-file.php)是检查 FILE 是否存在而不是[file_exists](http://php.net/manual/en/function.file-exists.php)的正确方法。 [file_exists](http://php.net/manual/en/function.file-exists.php)检查目录和文件，因此可能会返回`TRUE`具有相同文件名的目录，您不能使用[取消链接](http://php.net/manual/en/function.unlink.php)删除目录，这样做会引发错误。

[在取消链接](http://php.net/manual/en/function.unlink.php)之前检查文件是否存在（[is_file](http://php.net/manual/en/function.is-file.php) ）是删除文件的正确/最佳方式。

```
if(is_file($file) && unlink($file)){ 
```

但这不是一个万无一失的方法，因为在[is_file](http://php.net/manual/en/function.is-file.php)检查和[unlink](http://php.net/manual/en/function.unlink.php)之间的小窗口中删除文件是很常见的。当缓存方法使用文件系统时，我已经经历过几次。

但这是最好的方法。

### 因此，您可以正确执行所有操作，但仍然会出错！

好吧，至少错误会告诉您它是否失败....实际上您可以判断它是否在没有错误的情况下失败

[取消链接](http://php.net/manual/en/function.unlink.php)

> `TRUE`成功或`FALSE`失败返回。

如果您已正确编码并且可以区分成功和失败的[取消链接](http://php.net/manual/en/function.unlink.php)，那么**YES 会抑制错误**，它不会使您或您的代码受益。

无论错误是否被抑制，这是我能想到的防止它发生的最佳方法。通过减少检查和删除之间的时间，您将减少它引发错误的可能性。

编辑：更新的链接 URL

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-04-22T23:05:08.427

您可以`is_writable`用来测试您是否有适当的权限来修改或删除文件。

[http://php.net/manual/en/function.is-writable.php](http://php.net/manual/en/function.is-writable.php)

```
try {
  if(!is_writable($file))
      throw new Exception('File not writable');

  unlink($file);
}
catch(Exception $e) { /* do what you want */ } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-07-31T15:21:43.323

我的经验表明，在调用**unlink()**之前调用**file_exists()**不起作用，即使在调用**file_exists** **()**之前调用了**clearstatcache()**也是如此。 PHP 版本和操作系统有很多组合，我发现始终有效的唯一方法（即避免在出现错误时显示警告消息）是制作我​​自己的函数**silent_unlink()**：

 ******```
function silent_unlink( $filename )
{
  $old_er = error_reporting();
  error_reporting( $old_er & ~E_WARNING );
  $result = unlink( $filename );
  error_reporting( $old_er );
  return $result;
} 
```

**它仅针对调用unlink()**禁用警告的错误报告并恢复以前的**error_reporting()**状态。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-29T17:23:15.397

## 使用 try catch 通过 unlink() 作为异常处理“资源不可用”错误

即使`is_file()`或`file_exists()`将检查文件是否存在，也有可能某些应用程序正在使用文件，这些应用程序将阻止删除并`unlink()`显示“资源不可用”*错误*。

因此，在尝试了许多方法（如：`is_resource()`、、`is_writable()`...`stream_get_meta_data()`等）之后，我找到了处理错误的唯一最佳方法，同时*“删除”*一个**不存在**或**存在但被某些应用程序使用的文件**

```
function delete_file($pFilename)
{
    if ( file_exists($pFilename) ) { 
        //  Added by muhammad.begawala@gmail.com
        //  '@' will stop displaying "Resource Unavailable" error because of file is open some where.
        //  'unlink($pFilename) !== true' will check if file is deleted successfully.
        //  Throwing exception so that we can handle error easily instead of displaying to users.
        if( @unlink($pFilename) !== true )
            throw new Exception('Could not delete file: ' . $pFilename . ' Please close all applications that are using it.');
    }   
    return true;
} 
```

**=== 用法 ===**

```
try {
    if( delete_file('hello_world.xlsx') === true )
        echo 'File Deleted';
}
catch (Exception $e) {
    echo $e->getMessage(); // will print Exception message defined above.
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-10-15T15:35:47.800

使用 PHP_Exceptionizer [https://github.com/DmitryKoterov/php_exceptionizer/blob/master/lib/PHP/Exceptionizer.php](https://github.com/DmitryKoterov/php_exceptionizer/blob/master/lib/PHP/Exceptionizer.php)

```
$exceptionizer = new PHP_Exceptionizer(E_ALL);
try {
        unlink($file)
    }  catch (E_WARNING $e) {
        return false;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-31T10:03:50.793

```
if (file_exists($file) && is_writable($file)) {
    return  unlink($file);
} 
```******

# ios - 用于 SLServiceTypeTwitter 的 iOS 6 SLComposeViewController 无法取消、编辑或发送

> ID：15318234
> 
> 赞同：0
> 
> 时间：2013-03-10T02:29:29.860
> 
> 标签：ios, ios6, twitter, slcomposeviewcontroller

我在 iOS 6 中运行了一些非常简单的代码，一切都适用于我的所有设备和模拟器，但是我的一个用户（iPhone 3GS、iOS 6.1.2）遇到了问题。当他们调用此代码时，SLComposeViewController 会显示 twitter 对话框，但他们无法取消、编辑或发送。他们说该代码适用于 Facebook。所以，我很茫然。

也许使 SLComposeViewController 成为一个强大的属性？

任何帮助，将不胜感激。

谢谢你。

```
 SLComposeViewController *sc=[SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
    [sc setInitialText:[NSString stringWithFormat:@"Check out %@ app", [[ConfigUtil getConfig] objectForKey:@"app_title"]]];
    [sc addURL:[NSURL URLWithString:[[ConfigUtil getConfig] objectForKey:@"app_store_url"]]];
    [sc setCompletionHandler:^(SLComposeViewControllerResult result){
        [self dismissViewControllerAnimated:YES completion:nil];
    }];
    [self presentViewController:sc animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:46:41.803

看起来这是 Twitter 的 iOS 问题。用户表示他们也无法从照片应用程序发送推文。打算选择不包括附件，这可能会有所帮助。

# iphone - 动态改变原型单元的高度

> ID：15318235
> 
> 赞同：0
> 
> 时间：2013-03-10T02:29:47.037
> 
> 标签：iphone, ios, objective-c

我正在尝试向我的标签添加一些文本。一旦文本大于单元格的指定高度。我希望细胞也能生长它的高度。我确实添加了以下代码来处理我的标签高度，但我不确定如何将其传播到我的单元格。

代码

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.title = @"Scribbles";
    //Array
    Scribble *scribble1 = [Scribble new];
    [scribble1 setTitle:@"Test 1" andBody:@"This is fun! This is fun! This is fun! This is fun! This is fun! This is fun! This is fun! This is fun! This is fun! This is fun! This is fun!" andImage:@"scribble.png"];
    Scribble *scribble2 = [Scribble new];
    [scribble2 setTitle:@"Test 2" andBody:@"This is fun!" andImage:@"scribble2.png"];
    Scribble *scribble3 = [Scribble new];
    [scribble3 setTitle:@"Test 3" andBody:@"This is fun!" andImage:@"scribble3.png"];
    Scribble *scribble4 = [Scribble new];
    [scribble4 setTitle:@"Test 4" andBody:@"This is fun!" andImage:@"scribble.png"];
    Scribble *scribble5 = [Scribble new];
    [scribble5 setTitle:@"Test 5" andBody:@"This is fun!" andImage:@"scribble2.png"];
    Scribble *scribble6 = [Scribble new];
    [scribble6 setTitle:@"Test 6" andBody:@"This is fun!" andImage:@"scribble3.png"];
    Scribble *scribble7 = [Scribble new];
    [scribble7 setTitle:@"Test 7" andBody:@"This is fun!" andImage:@"scribble.png"];
    Scribble *scribble8 = [Scribble new];
    [scribble8 setTitle:@"Test 8" andBody:@"This is fun!" andImage:@"scribble3.png"];

    scribbles = [NSArray arrayWithObjects:
                 scribble1,scribble2,scribble3,scribble4,scribble5,scribble6,scribble7,scribble8, nil];
}

//To make the Selection disappear
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self.tableView deselectRowAtIndexPath:[self.tableView indexPathForSelectedRow] animated:YES];

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return scribbles.count;
}

//Loading stuff into tableView
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"ScribbleCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    Scribble *scribble = [scribbles objectAtIndex:indexPath.row];

    UIImageView *scribbleImageView = (UIImageView *)[cell viewWithTag:100];
    scribbleImageView.image = [UIImage imageNamed:scribble.image];
    scribbleImageView.layer.cornerRadius = 18.0;
    scribbleImageView.clipsToBounds = YES;

    UILabel *scribbleNameLabel = (UILabel *)[cell viewWithTag:101];
    scribbleNameLabel.text = scribble.title;

    UILabel *scribbleBodyLabel = (UILabel *)[cell viewWithTag:102];
    [scribbleBodyLabel setLineBreakMode:NSLineBreakByWordWrapping];
    scribbleBodyLabel.numberOfLines = 0;
    scribbleBodyLabel.text = scribble.body;
    [scribbleBodyLabel sizeToFit];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:34:15.033

如果您使用的是原型单元格，则 dequeueReusableCellWithIdentifier: 每次都返回一个单元格，前提是标识符正确。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"ScribbleCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    Scribble *scribble = scribble[indexPath.row];

    UIImageView *scribbleImageView = (UIImageView *)[cell viewWithTag:100];
    scribbleImageView.image = [UIImage imageNamed:scribble.image];
    scribbleImageView.layer.cornerRadius = 18.0;
    scribbleImageView.clipsToBounds = YES;

    UILabel *scribbleNameLabel = (UILabel *)[cell viewWithTag:101];
    scribbleNameLabel.text = scribble.title;

    UILabel *scribbleBodyLabel = (UILabel *)[cell viewWithTag:102];
    [scribbleBodyLabel setLineBreakMode:NSLineBreakByWordWrapping];
    scribbleBodyLabel.numberOfLines = 0;
    scribbleBodyLabel.text = scribble.body;
    return cell;
}

    - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        Scribble *scribble = scribble[indexPath.row];

        NSString *scribbleBody = scribble.body;
        UIFont *cellFont = [UIFont systemFontOfSize:17.0f];
        /*Instead of hardcoded width you can find width from tableView frame 
        imageView and their offsets 20 for tableView ,40 for imageView, 30 for 
        offset of body label  */
        CGFloat width = tableView.frame.size.width - 90.0f;
        CGSize constraintSize = CGSizeMake(width, MAXFLOAT);
        CGSize labelSize = [scribbleBody sizeWithFont:cellFont
                                    constrainedToSize:constraintSize
                                        lineBreakMode:NSLineBreakByWordWrapping];

        //Add the height of scribbleNameLabel +offset
        return labelSize.height + 40.0f;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:42:44.800

您需要使用委托方法`heightForRowAtIndexPath`，`UITableView`在这里您可以根据您拥有的文本调整高度`UITableViewCell` 您可以[按照线程](https://stackoverflow.com/questions/129502/how-do-i-wrap-text-in-a-uitableviewcell-without-a-custom-cell)进行操作，这将对您的情况有所帮助

# java - 为什么 [\\s*] 不等于 \\s*？

> ID：15318241
> 
> 赞同：3
> 
> 时间：2013-03-10T02:30:26.307
> 
> 标签：java, regex

我刚刚进入 Java 中的正则表达式，我正在阅读一本书和 Java 文档 - 我不知道为什么 - 鉴于以下程序 - 这`"[\\s*]"`不等同于`"\\s*"`用作分隔符时。这似乎`"[\\s*]"`相当于`"\\s+"`，有人可以从逻辑上告诉我为什么会这样吗？

```
import java.util.Scanner;
import java.util.regex.Pattern;
public class ScanString {
    public static void main(String[] args) {
        String str = "Smith , where Jones had had 'had', had had 'had had'.";
        String regex = "had";
        System.out.println("String is:\n" + str + "\nToken sought is " + regex);

        Pattern had = Pattern.compile(regex);
        Scanner strScan = new Scanner(str);
        strScan.useDelimiter("\\s*");
        int hadCount = 0;
        while(strScan.hasNext()) {
            if(strScan.hasNext(had)) {
                ++hadCount;
                System.out.println("Token found!: " + strScan.next(had));

            } else {
                System.out.println("Token is    : " + strScan.next());
            }
        }
        System.out.println("Count is: " + hadCount);
    }
}
```

对我来说有意义的输出是每个非空白字符作为单独的标记。当分隔符更改为`"\\s+"`or`"[\\s*]"`时，输出为：

```
`String is:
Smith , where Jones had had 'had', had had 'had had'.
Token sought is had
Token is    : Smith
Token is    : ,
Token is    : where
Token is    : Jones
Token found!: had
Token found!: had
Token is    : 'had',
Token found!: had
Token found!: had
Token is    : 'had
Token is    : had'.
Count is: 4`
```

* * *

 `## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T02:34:50.283

方括号`[]`包含一个字符类。在它们内部，关于特殊字符的规则是不同的。唯一的特殊字符是“右括号 ( `]`)、反斜杠 ( `\`)、插入符号 ( `^`) 和连字符 ( `-`)”。（取自[本页](http://www.regular-expressions.info/charclass.html)）

所以在这种情况下`[\\s*]`意味着“空格或`*`”。

在处理正则表达式时，可以使用[RegexPlanet](http://www.regexplanet.com/advanced/java/index.html)（测试代码）或[Regexper](http://www.regexper.com/)（以图形方式可视化正则表达式）等网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T02:35:45.360

`[]`是[字符类](http://www.regular-expressions.info/charclass.html)。看看这些例子：`[abc]`意味着`a|b|c`. 如果您创建类似的东西`[a*]`将意味着`a|\\*`（`a`或`*`字符）。`

# clojure - 尝试将 ring.middleware.json-params 与 compojure 一起使用

> ID：15318242
> 
> 赞同：3
> 
> 时间：2013-03-10T02:30:30.290
> 
> 标签：clojure, leiningen, compojure, ring

我是 Clojure、leiningen 和 java 工具链的新手（但不是 lisp、函数式编程、一般软件）。我正在尝试在 Compojure 中引导一些 RESTful Web 服务。

按照以下说明，我可以毫无困难地开始使用 compojure

```
https://github.com/weavejester/compojure/wiki/Getting-Started 
```

我现在正在尝试从现已过时的网站*逐步添加功能*

```
http://mmcgrana.github.com/2010/08/clojure-rest-api.html 
```

`leiningen`从上面第一个链接的工作项目开始（它通过 工作`lein ring start`，我将一行添加到 project.clj

```
(defproject hello-world "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [ring-json-params "0.1.3"]  ;;; <---===/// Here's the line I added
                 [compojure "1.1.5"]]
  :plugins [[lein-ring "0.8.2"]]
  :ring {:handler hello-world.handler/app}
  :profiles
  {:dev {:dependencies [[ring-mock "0.1.3"]]}}) 
```

然后我重新运行`lein deps`并下载了一堆东西。一切都好，该项目仍然有效。现在我添加一行`handler.clj`：

```
(ns hello-world.handler
  (:use     compojure.core)
  (:use     ring.middleware.json-params)  ;;; <---===/// Here's the line I added
  (:require [compojure.handler :as handler]
            [compojure.route :as route]))

(defroutes app-routes
  (GET "/" [] "Hello World")
  (route/not-found "Not Found"))

(def app
  (handler/site app-routes)) 
```

现在我得到了

```
java.io.FileNotFoundException: Could not locate ring/middleware/json_params__init.class or ring/middleware/json_params.clj on classpath: 
 at clojure.lang.RT.load (RT.java:432)
    clojure.lang.RT.load (RT.java:400)
    clojure.core$load$fn__4890.invoke (core.clj:5415)
    clojure.core$load.doInvoke (core.clj:5414) 
```

由于我是工具链的菜鸟，我不知道如何设置或检查类路径或找出`json_params`leiningen 存放的位置，甚至不知道如何查看类文件以找出名称应该是什么.

除了这个问题的具体解决方案之外，我希望能得到一些新手的指导，所以也许我将来可以自己解决这样的简单问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:33:24.473

启动服务器时是否收到该错误？我的环境没有任何问题。 ![在此处输入图像描述](../Images/5bfdffa3f754e08c77d9e67c0d634fa0.png)

这是我所做的：

```
lein new compojure hello 
```

然后像你一样更改 project.clj 并运行：

```
lein deps 
```

最后补充：

```
(:use ring.middleware.json-params) 
```

处理.clj

启动服务器，没有错误发生。

我建议你建立一个新项目，然后再试一次。

# html - 我如何获得一个 FIXED div 来保持它的空间？

> ID：15318245
> 
> 赞同：0
> 
> 时间：2013-03-10T02:31:16.903
> 
> 标签：html, css, layout, positioning, fixed

我正在尝试在右上角和左上角创建一个带有固定菜单的布局（两者的宽度均为 50 像素），中间有一个 900 像素宽的内容区域（不难）。但是，当用户重新调整浏览器窗口的大小时，我希望所有 DIV 元素保持它们的宽度 - 换句话说，我不希望任何 DIV 低于或超过任何其他 DIV。我希望浏览器窗口在小于 1000 像素（页面上元素的组合宽度）时强制水平滚动条。

这是我到目前为止所得到的，显然它是不正确的：http: [//linomeoli.com/test](http://linomeoli.com/test)

这是代码：

```
<style type="text/css">

div#sideleft {
    position:fixed;
    width:50px;
    height:90px;
    top:20px;
    left:20px;
}

div#sideright {
    position:fixed;
    width:50px;
    height:90px;
    top:20px;
    right:20px;
}

div#middle {
    width:900px;
    margin:auto;
}

</style>

<body>

<div id="sideleft">
This shit<br />
that shit<br />
</div>

<div id="middle">
<img src="http://dispose.co/images/dulla_01.jpg" />
<img src="http://dispose.co/images/dulla_02.jpg" />
<img src="http://dispose.co/images/dulla_03.jpg" />
<img src="http://dispose.co/images/dulla_04.jpg" />
<img src="http://dispose.co/images/dulla_05.jpg" />
<img src="http://dispose.co/images/dulla_06.jpg" />
</div>

<div id="sideright">
previous<br />
next<br />
and whatever
</div>

</body> 
```

我知道这必须是一个非常简单的任务；但是，我被困住了！我保证，在寻求帮助之前，我已经花了很多时间试图解决这个问题。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:52:22.637

如果您摆脱固定位置并将所有 div 浮动到左侧，它们将不会相互堆叠。然后，您可以将中间 div 设置为您希望它们分开的宽度，或者创建另一个 div 来环绕该中间 div 并将其设置为您希望它们分开的宽度。您甚至可以将宽度设置为百分比，以便它会针对不同的屏幕尺寸而变化。如果你想让那个右边的 div 一直到右边，不管右边和中间 div 之间有多少空间，你只需要把那个右边浮动。

# python - 将参数分配给属性的 Pythonic 方式？

> ID：15318258
> 
> 赞同：5
> 
> 时间：2013-03-10T02:33:10.437
> 
> 标签：python, oop, class, methods

示例代码如下：

```
def assign(self, input=None, output=None, param=None, p1=None, p2=None):
    if input:
        self.input = input
    if output:
        self.output = output
    if param:
        self.param = param
    if p1:
        self.p1 = p1
    if p2:
        self.p2 = p2 
```

虽然这看起来很清楚，但如果这个函数有 10 个参数，它就会受到影响。有没有人有关于更方便的方法的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T02:34:23.377

您可以执行以下操作：

```
def assign(self,**kwargs):
    for k,v in kwargs.items():
        if v:
           setattr(self,k,v) 
```

这非常简单，适用于许多情况。如果您想维护一组关键字，您将接受并在其余部分引发 TypeError：

```
#python2.7 and newer
def assign(self,allowed_kwargs={'foo','bar','baz'},**kwargs):
    if kwargs.keysview() - allowed_kwargs:
        raise TypeError('useful message here...')
    for k in allowed_kwargs:
        setattr(self,k,kwargs[k]) 
```

这在某种程度上也是可检查的，因为用户将看到一组允许的 kwargs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T02:39:12.147

*显式优于隐式*

```
def assign(self, input=None, output=None, param=None, p1=None, p2=None): 
```

有很多优势

```
def assign(self, **kwargs) 
```

*   它是自我记录的
*   如果`TypeError`将无效参数传递给 `assign`.
*   `assign`可以使用位置参数和关键字参数调用

值得称赞的是，OP 发布的代码是完全明确的，尽管`if`- 语句是单调的。为了减少单调，你可以使用这样的东西：

```
class Foo(object):
    def assign(self, input=None, output=None, param=None, p1=None, p2=None):
        for name in 'input output param p1 p2'.split():
            val = vars()[name]
            if val is not None:
                setattr(self, name, val)

foo = Foo()
foo.assign(p1=123, p2='abc') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:51:51.300

python 的一大优点是它的交互式解释器。当你写这样的代码时：

```
>>> def assign(self, input=None, output=None, param=None, p1=None, p2=None):
...     pass
... 
```

很容易弄清楚你应该如何使用这个功能：

```
>>> help(assign)
Python Library Documentation: function assign in module __main__

assign(self, input=None, output=None, param=None, p1=None, p2=None) 
```

通过对比：

```
>>> def assign2(self, **kwargs):
...     pass
... 
```

给出：

```
>>> help(assign2)
Python Library Documentation: function assign2 in module __main__

assign2(self, **kwargs) 
```

我希望你明白为什么第一种形式更可取。但是您仍然希望避免将所有内容写两次（在参数和正文中）。

第一个问题是你*为什么*要编写这种性质的代码？我发现这是一个非常常见的情况，我想要一个带有一堆属性的类，它将携带，但这些属性的集合基本上是固定的。在最常见的情况下，这些属性在对象的生命周期内永远不会改变；在这种情况下，python 有一个内置的帮助器！

```
>>> import collections
>>> Assignment = collections.namedtuple('Assignment', 'input output param p1 p2')
>>> assign = Assignment(None, None, None, None, None)._replace
>>> assign(p1=10)
Assignment(input=None, output=None, param=None, p1=10, p2=None)
>>> help(Assignment)
Python Library Documentation: class Assignment in module __main__

class Assignment(__builtin__.tuple)
 |  Assignment(input, output, param, p1, p2)
 |  
... SNIP 
```

`namedtuple`是常规类，您可以从它们继承以赋予它们特殊的行为。不幸的是，它们是不可变的，如果您碰巧需要它，您将需要另一种技术；但是您几乎总是应该首先找到命名元组。否则，我们可以使用其他魔法；我们可以得到所有的局部变量，它们在函数开始时只包含参数：

```
>>> class Assignable(object):
...     def assign(self, input=None, output=None, param=None, p1=None, p2=None):
...         _kwargs = vars()
...         _kwargs.pop('self')
...         vars(self).update((attr, value) for attr, value in _kwargs.items() if value is not None)
... 
>>> a = Assignable()
>>> vars(a)
{}
>>> a.assign(p1=6)
>>> vars(a)
{'p1': 6}
>>> a.p1
6 
```

而且`help()`文字还是很有帮助的！

```
>>> help(a.assign)
Python Library Documentation: method assign in module __main__

assign(self, input=None, output=None, param=None, p1=None, p2=None) method of __main__.Assignable instance 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T22:05:07.187

使用 mgilson 和 unutbu 的解决方案，编写所有类型的调用的可能性就消失了。

在我的以下解决方案中，保留了这种可能性：

```
class Buu(object):
    def assign(self,
               input=None, output=None,
               param=None,
               p1=None, p2=None,
               **kw):
        for k,v in locals().iteritems():
            if v not in (self,None,kw):
                if v == (None,):
                    setattr(self,k,None)
                else:
                    setattr(self,k,v)
        for k,v in kw.iteritems():
            setattr(self,k,v)

buu = Buu()

buu.assign(None,(None,), p1=[])
print "buu's attributes:",vars(buu)
print

buu.assign(1,p2 = 555, xx = 'extra')
print "buu's attributes:",vars(buu) 
```

结果

```
buu's attributes: {'output': None, 'p1': []}

buu's attributes: {'p2': 555, 'output': None, 'xx': 'extra', 'p1': [], 'input': 1} 
```

顺便说一句，当编码人员将`None`参数作为默认参数时，这是因为他预见到在任何情况下都不会有必要将其`None`作为在执行期间真正有影响的重要参数传递。
因此，我认为`None`作为真正重要的论点传递的观点是一个错误的问题。
但是，在上面的代码中，通过使用约定来避免这个问题，即如果`None`必须创建具有值的新属性，则参数应该是`(None,)`。

如果有人想通过`(None,)`？？？
严重地 ？
哎呀！

# matlab - Matlab：在连续输入跨度上使用 Ode23

> ID：15318261
> 
> 赞同：0
> 
> 时间：2013-03-10T02:33:43.737
> 
> 标签：matlab, integration, solver

我试图弄清楚如何为此使用 ode23。我有一个功能：

```
function res = HardyWeinberg(inAFrequency, inFitness_AA, inFitness_Aa, inFitness_aa)
    fA = inAFrequency;
    wAA = inFitness_AA;
    wAa = inFitness_Aa;
    waa = inFitness_aa;
    res = (fA*(1-fA)*(fA*(wAa - wAA) + (1-fA)*(waa - wAa)))/(fA*fA*wAA + 2*fA*(1-fA)*wAa     + (1-fA)*(1-fA)*waa);
end 
```

我想在 [0 10] 的连续跨度上运行它。我见过的每个示例都在函数中包含一个更改合并的参数。在我的情况下，下一次计算的频率是前一次计算的结果。也许我在这里遗漏了一些东西（数学或 Matlab 明智）。

上面的函数显示了两个“世代”之间的差异。

请告知如何计算跨度的 ode23。

谢了，兄弟们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:22:37.430

好的，我已经解决了。

一点背景知识： [Hardy-Weinberg 原理](http://en.wikipedia.org/wiki/Hardy%E2%80%93Weinberg_principle)基本上是一种计算遗传特性频率变化的方法。例如，定义我们眼睛颜色的基因有多个等位基因（棕色等位基因、蓝色、绿色）。我们的眼睛颜色基因是由两个等位基因构成的，一个来自我们的父本，一个来自我们的母本，它们都决定了我们的眼睛颜色。适合度是衡量我们繁殖和后代“成功”的标准，它受我们的基因影响。Hardy-Weinberg 原理有助于根据群体中等位基因的初始频率及其与其他等位基因的遗传贡献的适合度计算该等位基因随时间的频率。好的和有贡献的等位基因可能有助于某种生物更多地繁殖，因此在统计上越来越多地传播该等位基因，直到它可能被固定在种群中（或者如果它' 不好或不贡献它可能会消失）。无论如何...

给定某些等位基因，参数“wAA”、“wAa”和“waa”将被视为常数并且不会改变。（他们定义了[健身](http://en.wikipedia.org/wiki/Fitness_%28biology%29)- 一个生物学/进化术语）。

所以输入只是计算适应度的世代跨度。

Hardy-Weinberg 函数为：

```
function res = HardyWeinberg(t, x)
    fA = x; %# Frequency
    wAA = 1; wAa = 1.01; waa = 1.01; %# Fitness values
    res = (fA*(1-fA)*(fA*(wAa - wAA) + (1-fA)*(waa - wAa)))/(fA*fA*wAA + 2*fA*(1-fA)*wAa + (1-fA)*(1-fA)*waa);
end 
```

在初始等位基因频率为 0.5 的世代中计算 ode23：

```
[tv f1] = ode23(@HardyWeinberg,[1 analytical.Generations],[analytical.A_Frequency]);
plot(tv,f1,tv,1-f1);
xlabel('Generation');
ylabel('Frequency') 
```

希望这有帮助:)

# plone - 评论敏捷对象时出错

> ID：15318263
> 
> 赞同：3
> 
> 时间：2013-03-10T02:33:57.723
> 
> 标签：plone, dexterity

我创建了一个不复杂的内容类型并允许讨论。显示添加评论的表单，但是当发表评论时，我得到了下一个错误：

```
2013-03-09 22:24:32 ERROR root Exception while rendering an error message
Traceback (most recent call last):
  File "/home/daniel/.buildout/eggs/Zope2-2.13.19-py2.6.egg/OFS/SimpleItem.py", line 242, in raise_standardErrorMessage
    v = s(**kwargs)
  File "/home/daniel/.buildout/eggs/Products.CMFCore-2.2.7-py2.6.egg/Products/CMFCore/FSPythonScript.py", line 127, in __call__
    return Script.__call__(self, *args, **kw)
  File "/home/daniel/.buildout/eggs/Zope2-2.13.19-py2.6.egg/Shared/DC/Scripts/Bindings.py", line 322, in __call__
    return self._bindAndExec(args, kw, None)
  File "/home/daniel/.buildout/eggs/Zope2-2.13.19-py2.6.egg/Shared/DC/Scripts/Bindings.py", line 359, in _bindAndExec
    return self._exec(bound_data, args, kw)
  File "/home/daniel/.buildout/eggs/Products.PythonScripts-2.13.2-py2.6.egg/Products/PythonScripts/PythonScript.py", line 344, in _exec
    result = f(*args, **kw)
  File "Script (Python)", line 34, in standard_error_message
  File "/home/daniel/.buildout/eggs/Zope2-2.13.19-py2.6.egg/Shared/DC/Scripts/Bindings.py", line 322, in __call__
    return self._bindAndExec(args, kw, None)
  File "/home/daniel/.buildout/eggs/Zope2-2.13.19-py2.6.egg/Shared/DC/Scripts/Bindings.py", line 359, in _bindAndExec
    return self._exec(bound_data, args, kw)
  File "/home/daniel/.buildout/eggs/Products.CMFCore-2.2.7-py2.6.egg/Products/CMFCore/FSPageTemplate.py", line 237, in _exec
    result = self.pt_render(extra_context=bound_names)
  File "/home/daniel/.buildout/eggs/Products.CMFCore-2.2.7-py2.6.egg/Products/CMFCore/FSPageTemplate.py", line 177, in pt_render
    self, source, extra_context
  File "/home/daniel/.buildout/eggs/Zope2-2.13.19-py2.6.egg/Products/PageTemplates/PageTemplate.py", line 79, in pt_render
    showtal=showtal)
  File "/home/daniel/.buildout/eggs/zope.pagetemplate-3.5.2-py2.6.egg/zope/pagetemplate/pagetemplate.py", line 113, in pt_render
    strictinsert=0, sourceAnnotations=sourceAnnotations)()
  File "/home/daniel/.buildout/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 271, in __call__
    self.interpret(self.program)
  File "/home/daniel/.buildout/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/home/daniel/.buildout/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 888, in do_useMacro
    self.interpret(macro)
  File "/home/daniel/.buildout/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/home/daniel/.buildout/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 533, in do_optTag_tal
    self.do_optTag(stuff)
  File "/home/daniel/.buildout/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 518, in do_optTag
    return self.no_tag(start, program)
  File "/home/daniel/.buildout/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 513, in no_tag
    self.interpret(program)
  File "/home/daniel/.buildout/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/home/daniel/.buildout/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 852, in do_condition
    self.interpret(block)
  File "/home/daniel/.buildout/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 343, in interpret
    handlers[opcode](self, args)
  File "/home/daniel/.buildout/eggs/zope.tal-3.5.2-py2.6.egg/zope/tal/talinterpreter.py", line 742, in do_insertStructure_tal
    structure = self.engine.evaluateStructure(expr)
  File "/home/daniel/.buildout/eggs/Zope2-2.13.19-py2.6.egg/Products/PageTemplates/Expressions.py", line 218, in evaluateStructure
    text = super(ZopeContext, self).evaluateStructure(expr)
  File "/home/daniel/.buildout/eggs/zope.tales-3.5.2-py2.6.egg/zope/tales/tales.py", line 696, in evaluate
    return expression(self)
  File "/home/daniel/.buildout/eggs/zope.contentprovider-3.7.2-py2.6.egg/zope/contentprovider/tales.py", line 77, in __call__
    provider.update()
  File "/home/daniel/.buildout/eggs/zope.viewlet-3.7.2-py2.6.egg/zope/viewlet/manager.py", line 112, in update
    self._updateViewlets()
  File "/home/daniel/.buildout/eggs/zope.viewlet-3.7.2-py2.6.egg/zope/viewlet/manager.py", line 118, in _updateViewlets
    viewlet.update()
  File "/home/daniel/.buildout/eggs/plone.app.discussion-2.1.9-py2.6.egg/plone/app/discussion/browser/comments.py", line 263, in update
    self.form.update()
  File "/home/daniel/.buildout/eggs/plone.z3cform-0.7.8-py2.6.egg/plone/z3cform/fieldsets/extensible.py", line 59, in update
    super(ExtensibleForm, self).update()
  File "/home/daniel/.buildout/eggs/plone.z3cform-0.7.8-py2.6.egg/plone/z3cform/patch.py", line 30, in GroupForm_update
    _original_GroupForm_update(self)
  File "/home/daniel/.buildout/eggs/z3c.form-2.5.1-py2.6.egg/z3c/form/group.py", line 138, in update
    self.actions.execute()
  File "/home/daniel/.buildout/eggs/z3c.form-2.5.1-py2.6.egg/z3c/form/action.py", line 99, in execute
    result = handler()
  File "/home/daniel/.buildout/eggs/z3c.form-2.5.1-py2.6.egg/z3c/form/button.py", line 315, in __call__
    return handler(self.form, self.action)
  File "/home/daniel/.buildout/eggs/z3c.form-2.5.1-py2.6.egg/z3c/form/button.py", line 170, in __call__
    return self.func(form, action)
  File "/home/daniel/.buildout/eggs/plone.app.discussion-2.1.9-py2.6.egg/plone/app/discussion/browser/comments.py", line 232, in handleComment
    comment_review_state = workflowTool.getInfoFor(comment, 'review_state')
  File "/home/daniel/.buildout/eggs/Products.CMFCore-2.2.7-py2.6.egg/Products/CMFCore/WorkflowTool.py", line 263, in getInfoFor
    raise WorkflowException(msg)
WorkflowException: No workflow provides '${name}' information. 
```

我把代码放在[这里](https://github.com/danielhz/degu.forum/tree/540d34af26670925f181fdbf5b0503d451c6afc6)。要重现错误运行`setupenv.sh`，然后`bin/instance fg`. 然后转到浏览器并使用`degu.forum`. 创建一个论坛文件夹，里面有一个论坛，然后放入一个论坛线程。然后尝试在论坛主题上发表评论。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:46:55.753

尽管 Martijn 的评论已经是解决方案并且错误消息非常清楚，但我将其发布为答案：

转到工作流工具并检查是否有任何工作流分配给讨论。

很可能不是。分配一个，fe 'one_state_workflow' 方便用于评论，并更新安全设置。

# java - Android 从文件中读取和偶尔不正确的值

> ID：15318264
> 
> 赞同：3
> 
> 时间：2013-03-10T02:34:10.757
> 
> 标签：java, android, c++, android-ndk, file-io

**免责声明**

正如我在评论中描述的那样，问题已得到解决。我正在考虑删除它，因为没有答案并且我不想混淆其他人，但我的修复不一定针对问题，而是解决它。所以，我只是保留它，希望有一天有人会找到答案。

**原始问题**

我正在使用 android ndk 从一些文件中读取数据，但输出存在一些问题。问题是，它大部分时间都在工作，但偶尔会给出错误的输入。下面是我的代码是如何设置的（请注意，这不是完整的代码，但如果需要更多信息，我会添加它。我只是想保持简单）。确切的问题是下面的代码。

1.  在 NDK C++ 文件中，我使用 fstream 从文件中读取。这些文件存储在手机的内存中，因此可以正常工作。有2个文件：

1.1：文件1.cpp

```
JNIExport jdoubleArray class_path_nativeMethod 
                (JNIEnv* env, jclass thiz, jint index, jint size){
    jdouble dubArray[6];
    jdoubleArray result;
    result = env->NewDoubleArray(size);

    string s = "/sdcard/" + construct_fileName(index);

    ifstream is;
    if(is.fail()){
       return NULL; 
    }
    is.open(s.c_str());

    // read something from the files 
    // save it into dubArray
    // assign dubArray to result

    return result;
} 
```

1.2：文件2.cpp

```
string construct_fileName(int index){
    string s;

    switch(index){
    case 0:
        s = "file1.ext";
        break;
    case 1:
        s = "file2.ext";
        break;
    case 2:
        s = "file3.ext";
        break;
    default:
        // something
    }

    return s;
} 
```

2 现在我的主要活动 MainActivity.java

```
private TextView output;
private TextView output2;
private RadioGroup radioGroup;
private Button calculateButton;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    this.output = (TextView) findViewById(R.id.textView2);
    this.output2 = (TextView) findViewById(R.id.textView3);
    this.radioGroup = (RadioGroup) findViewById(R.id.radioGroup1);
    this.calculateButton = (Button) findViewById(R.id.button1);
}

public void calculate(View v){
    int index;
    switch (v.getId()){
    case(R.id.button1){
        switch(radioGroup.getCheckedRadioButtonId()){
        case R.id.radio0:
            index = 0;
            break;
        case R.id.radio1:
            index = 1;
            break;
        case R.id.radio2:
            index = 2;
            break;
        }
    }

    double arr[] = CppMethods.nativeCalculations(index, 2);
    Double i, j;
    i = Double.valueOf(arr[0]);
    j = Double.valueOf(arr[1]);
    this.output.setText(i.toString().subSequence(0, i.toString().length()));
    this.output2.setText(j.toString().subSequence(0, j.toString().length()));
    }
} 
```

所以问题是，文本视图中的值在大多数情况下都是正确的。但是，假设我`radio0`选择了按钮，并且按下`button`对象 50 次，我会在文本视图中得到错误输出 5 或 6 次，而在其他时间输出正确。

一些可能有用的信息：

*   当输出不正确时，我会得到一些离谱的数字，例如 2.72364283467E17，而我期望的输出是文件中存储的小于 20 的双精度值。
*   当输出不正确时，两个文本视图都有上面显示的荒谬数字
*   代码肯定是正确的，因为大多数时候输出是正确的。

对不起，很长的问题，

谢谢，

纳克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:06:28.543

它可能无法解决您的问题，但我注意到的以下几点可能会对您有所帮助：

1.  在您的`file1.cpp`, 错误处理中`env->NewDoubleArray()`遗漏了（或者您是否故意错过了发布？）

2.  我不知道您如何将`double`s分配给`jdoubleArray`，但这里有一些来自**Google**的最佳实践建议（实际上它也适用于其他 JNI 环境）：

    *   [JNI 技巧 - 原始数组](http://developer.android.com/training/articles/perf-jni.html#arrays)

    *   [JNI 技巧 - 区域调用](http://developer.android.com/training/articles/perf-jni.html#region_calls)

3.  线程问题1：如果您的本机代码没有为多线程做好准备，我认为最好添加`synchronized`（`CppMethods.nativeCalculations()`因为`fstream`如果不这样做，当另一个调用来临时可能仍然打开）：

    ```
    public class CppMethods {
        public static native synchronized double[] nativeCalculations(int index, int size);
    } 
    ```

4.  线程问题 2：您可能需要[`runOnUiThread`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)包装[`setText()`](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)调用之类的东西。此外，我想知道你为什么打电话[`setText()`](http://developer.android.com/reference/android/widget/TextView.html#setText%28java.lang.CharSequence%29)这么复杂，我认为这就足够了（顺便说一句， a[`String`](http://developer.android.com/reference/java/lang/String.html)是 a [`CharSequence`](http://developer.android.com/reference/java/lang/CharSequence.html)）：

    ```
    final double[] arr = CppMethods.nativeCalculations(index, 2);
    this.runOnUiThread(new Runnable() {
        public void run() {
            this.output.setText(String.valueOf(arr[0]));
            this.output2.setText(String.valueOf(arr[1]));
        }
    }); 
    ```

# c# - 将 SQL 服务器返回的 XML 保存在 xml 文件中

> ID：15318267
> 
> 赞同：0
> 
> 时间：2013-03-10T02:34:29.203
> 
> 标签：c#, sql, sql-server, xml

我正在使用（对于 XML 自动从 sql server 检索所有表数据。XSLT 来设置来自服务器的 XML 样式。我想将从 sql server 返回的 xml 保存到文件夹内的 xml 文件中（创建有问题的文件夹以及 xml文件）

```
 protected void Page_Load(object sender, EventArgs e)
{

    string strConnenction = System.Configuration.ConfigurationManager.
ConnectionStrings["Connectionstring0034"].ConnectionString;
    XmlDocument xd = new XmlDocument();
    XPathNavigator xpathnav = xd.CreateNavigator();
    using (SqlConnection conn = new SqlConnection(strConnenction))
    {
        conn.Open();
        SqlCommand command = new SqlCommand(
            "select * from Employees as products for XML AUTO, ELEMENTS", conn);
        using (XmlWriter xw = xpathnav.PrependChild())
        {
            xw.WriteStartElement("products");
            using (XmlReader xr = command.ExecuteXmlReader())
            {
                xw.WriteNode(xr, true);
            }
            xw.WriteEndElement();
        }
    }
    XmlProducts.XPathNavigator = xpathnav;

} 
```

}

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T02:43:11.187

我没有看到任何保存方法被调用，您可以创建 xml 但没有写入文件，即：

> xd.Save("myxml.xml")

# csv - highcharts 3数据模块如何实时更新？

> ID：15318270
> 
> 赞同：1
> 
> 时间：2013-03-10T02:34:56.050
> 
> 标签：csv, highcharts, real-time, beta

随着highcharts 3的新数据模块（[http://www.highcharts.com/component/content/article/2-news/53-highcharts-3-0-beta-released](http://www.highcharts.com/component/content/article/2-news/53-highcharts-3-0-beta-released)）我想知道每次如何实时更新数据变化。`chart.redraw()`我在用数据更新 div 后尝试，但没有任何反应。

我知道作为[http://www.highcharts.com/demo/dynamic-update](http://www.highcharts.com/demo/dynamic-update)上的演示存在手动更改方式，但认为使用数据模块更容易恕我直言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T15:10:31.807

您可以随时重新创建图表：

```
$('#container').highcharts().destroy();
$('#container').highcharts({
    data: {
        csv: document.getElementById('csv1').innerHTML
    },
    title: {
        text: 'Categorized CSV data'
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-26T06:16:03.430

看看这篇博文。作者通过定期重新数据和 highcharts-component 的 redraw() 方法解决了一个类似的问题：http: [//liewdaryl.wordpress.com/2012/10/09/real-time-html-charting-from- csv 数据源/](http://liewdaryl.wordpress.com/2012/10/09/real-time-html-charting-from-csv-data-source/)

# c# - 随机 勉强随机

> ID：15318271
> 
> 赞同：1
> 
> 时间：2013-03-10T02:34:58.327
> 
> 标签：c#, random

我正在尝试制作一个程序，只要它被按下，它就会切换 button1 的位置。出于某种奇怪的原因，随机并不是随机的那么好。Button1 只是沿着倾斜 -45 度的同一条对角线移动。

```
public void button1_Click(object sender, EventArgs e)
    {
        int tempX, tempY;

        Random but1X = new Random();
        tempX = but1X.Next(10, 500);

        Random but1Y = new Random();
        tempY=but1Y.Next(60,490);

        button1.Location = new Point(tempX, tempY);
    } 
```

我听说这样做的原因是因为每当按下 button1 时我都会创建一个新的随机实例，但是当我尝试将随机代码放入方法中时，我仍然得到相同的结果。知道如何让这个按钮真正随机移动，而不仅仅是在幻灯片上上下移动吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T02:37:53.393

尝试不为您想要的每个随机值实例化它：

```
public void button2_Click(object sender, EventArgs e)
{
    int tempX, tempY;

    Random rnd = new Random();
    tempX = rnd.Next(10, 500);
    tempY = rnd.Next(60,490);

    button1.Location = new Point(tempX, tempY);
} 
```

我用两个按钮对此进行了测试，它适用于随机分布。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T05:08:37.287

所有时间新的随机数.....在这里打印标签“New_Random”

```
try
{
    Random randomClass = new Random();
    List<int> collection = new List<int>();

    while (collection.Count <= 100)
    {
        var temp = randomClass.Next(1, 40);
        if (!collection.Contains(temp))
        {
            collection.Add(temp);

            int New_Reandom = Convert.ToInt32(temp);
        }
    }
}
catch
{
} 
```

# linux - 学习汇编语言

> ID：15318274
> 
> 赞同：-5
> 
> 时间：2013-03-10T02:35:42.427
> 
> 标签：linux, assembly, att

我正在尝试学习汇编语言，但我需要帮助来了解每个命令的用途。以下是使用它们的程序。

```
 push   %ebp
 mov    %esp,%ebp
 sub    $0x10,%esp
 mov    0x8(%ebp),%eax
 add    $0x1,%eax
 mov    %eax,-0x4(%ebp)
 mov    -0x4(%ebp),%eax
 leave  
 ret 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T03:09:36.097

一个非常基本的**汇编语言入门**：

首先，您应该知道汇编语言与特定的处理器 (CPU) 或处理器系列相关。例如，问题中显示的代码段似乎适用于 Intel x86 架构。这一点很重要，因为很多汇编语言指令作用于或基于 CPU 寄存器的内容。因此，在深入研究单个指令的细节之前，您应该熟悉**CPU 的体系结构**，即可用寄存器的名称和特征以及它们的作用（其中一些寄存器本质上是通用的，而另一些则具有非常特定的作用）。架构的一部分也是寻址外部内存位置的方式。

其次，**汇编语言指令的种类很少**：

*   流控制指令（测试、跳转、返回[从子程序]等）
*   数据复制指令（将内存内容移入/移出注册表和/或内存）
*   堆栈管理指令（这些是一种特殊的数据复制指令，它也作用于名为 SP 的堆栈指针，一个特殊的寄存器）。
*   算术指令（加、减、乘等）
*   布尔运算（移位 [寄存器内容]、按位与、按位或等）

第三，有时会使事情变得更复杂（但也使汇编逻辑非常强大的原因）是**寻址模式**。本质上，寻址模式用于确定哪些内存位置将用于给定指令。寻址模式的例子有直接和间接，前者提供直接读/写的地址作为指令的操作数，后者也提供内存地址操作数，但获得用于读/写的有效地址通过首先读取提供的地址的内容并将该内容用作应该进行操作的地址。

有了上述基本了解，您可能可以开始进入处理器的说明手册并更了解这一切。

也许从以下维基百科条目开始：

*   [x86 汇编语言](http://en.wikipedia.org/wiki/X86_assembly_language)
*   [x86 指令列表](http://en.wikipedia.org/wiki/X86_instruction_listings)

然后可能是像[这 8 页介绍性课程笔记](http://www.csl.mtu.edu/cs3421/www.spring.13/other.stuff/x86.pdf)(pdf)这样的文件

最后要注意的是：直接查看代码并试图弄清楚它的作用是理解汇编语言的一种非常有效的方法。但是我注意到您的原始帖子（在 pastebin 上）提到了反汇编程序；请注意，有时反汇编程序可能会感到困惑（例如，当它们处理包含代码的数据区域时）并产生非常不明智的指令列表。此外，通过阅读真正的源代码（而不是通过反汇编产生的源代码），您可以从作者的评论和良好的标签名称中受益，这对理解逻辑很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T02:42:08.557

这是一本非常适合您的书：

[计算机系统：程序员的视角](https://rads.stackoverflow.com/amzn/click/com/0136108040)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T02:44:35.193

只需快速搜索即可获得以下 x86 汇编语言参考

*   [x86 组装参考表](https://stackoverflow.com/questions/1933801/x86-assembly-reference-sheet)
*   [http://ref.x86asm.net/](http://ref.x86asm.net/)
*   [http://www.c-jump.com/CIS77/ASM/Assembly/lecture.html](http://www.c-jump.com/CIS77/ASM/Assembly/lecture.html)

为什么要学习汇编语言是另一回事！

# haskell - 在haskell中浮动到int

> ID：15318281
> 
> 赞同：1
> 
> 时间：2013-03-10T02:36:46.250
> 
> 标签：haskell

在这个 Haskell 代码中：

```
power a r = [a*(truncate (r**i)) | i <- e]
    where e = [0,10] 
```

我的`**`操作出现错误，因为我相信它会浮动。有没有办法将它转换为int？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T02:40:06.267

我不知道您的代码类型检查后出现错误是什么意思，但您可能需要`^`运算符：

```
(^) :: (Integral b, Num a) => a -> b -> a 
```

您的代码类型检查也很好：

```
power a r = [a*(r^i) | i <- e]
    where e = [0,10] 
```

# html - 如何让 Rails 将 html_safe 文本呈现为实时链接？

> ID：15318282
> 
> 赞同：0
> 
> 时间：2013-03-10T02:37:32.837
> 
> 标签：html, csv, ruby-on-rails-3.2

我构建了一个 CSV 上传器来填充我正在从头开始编码的 cms——Rails 3.2.12。其中一列最初是原始 html - 已上传并显示在表格上。

```
<a href="http://g.co/maps/phb35">Map</a> 
```

此列是“地图”列，我需要一个指向 Google 地图的实时链接。我无法将此列呈现为除文本之外的任何内容。twitter-bootstrap-rails 是不是搞砸了？我试过了

```
@raw 
```

并使用

```
html_safe 
```

几种不同的方式和各种帮手（帮手文件目前是空的）；没有任何工作。以下是来自 file = show.html.erb 的几次尝试

```
<dt><strong><%= model_class.human_attribute_name(:map) %>:</strong></dt>
<dd><%= raw @meeting.map.html_safe %></dd>

<dt><strong><%= model_class.human_attribute_name(:map) %>:</strong></dt>
<dd><%= @meeting.map %></dd> 
```

所以也许有一个有效的宝石？（哈！） Rinku 看起来很有希望，但它是一个半身像。我在这个 CMS 中有超过 580 条记录，我不想手动编辑每条记录，即使这意味着删除

部分。谢谢！

这是github： [https ://github.com/indie/sccaa](https://github.com/indie/sccaa)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:45:41.663

终于想通了！不需要帮助程序、原始（@anything）或弄乱已清理的 HTML。我使用 grep 将 DB 数据的链接格式更改为直接`http://`链接，并在`<TD>`使用的：`<%= link_to meeting.map, url_for(meeting.map), target: "_blank" %>` ...在此处查看可爱的结果： [https ://github.com/indie/aasj](https://github.com/indie/aasj)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:49:00.340

您的数据是否以转义 html 的形式存储在数据库中？

尝试：

`<%= raw CGI.unescapeHTML(@meeting.map) %>`

# node.js - 如何在 Amzon EC2 实例上卸载旧版本的 nodejs - Ubuntu 11.10

> ID：15318288
> 
> 赞同：0
> 
> 时间：2013-03-10T02:38:17.440
> 
> 标签：node.js, mongodb, amazon-ec2, mongoose

我想在我的 Amazon EC2 Ubuntu 实例上使用 mongodb 和 nodejs（最新版本）。但是，当我创建我的实例时，我安装了 nodejs_v0.4.9。

现在我想升级nodejs的版本，以便我可以使用mongoose模块连接到mongodb。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:25:43.893

I'm always prefer to use the package management system. You can use [packages](http://www.ubuntuupdates.org/package/chris_lea_nodejs/oneiric/main/base/nodejs) from launchpad for 11.10\. The complete process should be like this:

```
sudo apt-get purge nodejs npm
sudo add-apt-repository ppa:chris-lea/node.js
sudo apt-get update
sudo apt-get install nodejs npm 
```

Most recent node packages but only for 12.04 & 12.10 located [here](https://launchpad.net/~richarvey/+archive/nodejs).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T11:09:19.047

如果您安装了 NPM，请执行以下操作：

```
sudo npm cache clean -f
sudo npm install -g n
sudo n stable 
```

# ios - Core Data 发送和接收对象

> ID：15318289
> 
> 赞同：0
> 
> 时间：2013-03-10T02:38:38.793
> 
> 标签：ios, object, core-data, save

我有一个名为 Workout 的实体，具有以下属性：

锻炼日期

运行时间

椭圆时间

楼梯大师时间

卧推重量

我要求用户在使用以下格式“@Username”的应用程序之前创建一个帐户。我正在使用 stackmob 进行托管。创建用户后，我想保存用户在用户个人资料下创建的每个“锻炼”对象，以供以后获取。

问题 1：如何避免将所有用户对象保存在一个位置的一个数据库？我是否需要为每个用户名创建一个实体作为他们的个人资料并将每个“锻炼”对象保存在他们的个人资料下？我希望用户能够根据日期获取这些对象。即从 2013 年 1 月到 2013 年 6 月？过去 6 周？并将对象显示在 UITable 中。

问题 2：我还希望用户将这些对象发送给另一个用户。即将详细信息发送给@Trainer。我相信我将使用推送通知来通知收件人用户另一个用户向他们发送了一个对象——有点像 facebook 通知。此时@Trainer 可以下载接收到的对象并查看、编辑或删除它。等等

在不影响性能的情况下完成这两项任务的最佳方法是什么？

有人可以指出我正确的方向/谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:28:14.687

> 问题 1：如何避免将所有用户对象保存在一个位置的一个数据库？我是否需要为每个用户名创建一个实体作为他们的个人资料并将每个“锻炼”对象保存在他们的个人资料下？我希望用户能够根据日期获取这些对象。即从 2013 年 1 月到 2013 年 6 月？过去 6 周？并将对象显示在 UITable 中。

至于我的理解。您将不得不规范化您的数据库。数据库应该有以下

1.  用户
2.  用户角色 - 与用户的一对多关系。
3.  特权 - 与用户角色的一对多关系。创建、更新、编辑、删除锻炼的权限
4.  WorkOut - 与用户的多对一关系
5.  通知事件 - 与用户的多对多关系。

您应该为每个用户创建一个条目。关系是用户<-->>锻炼，用户可以有很多锻炼（一对多），但锻炼将有一个用户（一对一的关系）。由于锻炼有锻炼日期，您可以轻松地传递时间参考并要求映射到用户的锻炼。

> 问题 2：我还希望用户将这些对象发送给另一个用户。即将详细信息发送给@Trainer。我相信我将使用推送通知来通知收件人用户另一个用户向他们发送了一个对象——有点像 facebook 通知。此时@Trainer 可以下载接收到的对象并查看、编辑或删除它。等等

您可以通过锻炼创建在用户与用户之间映射的事件。您可以将 Event 的唯一标识符与 Push Notification 一起传递。使用此唯一标识符，您可以获取发送给用户的锻炼。

用户有角色，角色有权限。应该允许他们根据许可修改锻炼。

由于您有一个远程用户数据库，因此通过使用 coredata，您可以保留并仅获取已更改内容的增量。或者，如果您可以负担得起每次可以在内存存储中使用来存储结构化数据并相应地编辑它们的数据。

# javascript - 为什么我不能在 javascript 中将 1 加到一个大数上

> ID：15318290
> 
> 赞同：0
> 
> 时间：2013-03-10T02:39:03.037
> 
> 标签：javascript, biginteger

```
var i = 20040115102010000;

i++;

returns 20040115102010000; 
```

我必须使用大数字库吗？

[Javascript 中处理大数（BigNum）的标准解决方案是什么？](https://stackoverflow.com/questions/3072307/is-there-a-bignum-library-for-javascript)

这个数字已经是浮点格式，我将小数点向左移动了 3 次。如果你很快，你会注意到这是一个约会。我应该先将此数字转换为日期格式吗？`Date()`我会发现在对象中以毫秒为单位增加更容易吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:03:15.607

你不能在 javascript 中使用这么大的日期，而不是创建一个 bigDay 库来处理你的 bignums。

/*

来自' [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date) '：

JavaScript 日期以 UTC 时间 1970 年 1 月 1 日午夜以来的毫秒数为单位。一天有 86,400,000 毫秒。JavaScript Date 对象的范围是 -100,000,000 天到 100,000,000 天，相对于 1970 年 1 月 1 日 UTC。*/

```
var firstday=new Date(1970,0,1),lastday=new Date(1969,11,31);

firstday.setDate(firstday.getDate()-100000000);

lastday.setDate(lastday.getDate()+100000000);

firstday.toUTCString()+'; timestamp: '+firstday.getTime()+'\n'+
lastday.toUTCString()+'; timestamp: '+lastday.getTime(); 
```

/* 返回值：（JS中最大和最小的日期）

格林威治标准时间 4 月 20 日星期二 -271821 04:00:00；时间戳：-8639999985600000

格林威治标准时间 9 月 12 日星期五 275760 04:00:00；时间戳：8639999928000000 */

# java - 由 Eclipse 制作的 .jar 文件无法运行

> ID：15318297
> 
> 赞同：0
> 
> 时间：2013-03-10T02:40:15.627
> 
> 标签：java, eclipse, jar

我为自己制作的 Applet 提供了一个类，并且一直在尝试将其制成 .jar 文件。在 Eclipse 中，我右键单击文件夹-> 导出-> Java-> Jar 文件-> 完成。完成后，它会显示“导出时带有编译警告：FirstApplet/src/ScoreCountingApplet.java”。当我单击它时，它不会做任何事情，并且完全没有响应。我什至检查了 MF 文件并确保我在 Manifest 中添加了“Main-Class:ScoreCountingApplet”行。我不知道如何使它工作。任何反馈将不胜感激。谢谢！

**注意：另外，如果我尝试在命令提示符中使用“javac”进行编译，它会显示“javac 未被识别为内部或外部命令、可运行程序或批处理文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:53:36.890

Applet 用于在浏览器或 Appletviewer 工具上运行 HTML 文件。

您还可以选择或使用某种技巧将面板/小程序嵌入框架/JFrame，

如果第二个不是你的情况，我不确定你的 Applet/Jar 是否有办法运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:42:27.103

尝试使用“导出为 Runnable Jar”。

# c# - 在 C# 中，为什么会出现“无法将双精度转换为浮点错误”？

> ID：15318300
> 
> 赞同：1
> 
> 时间：2013-03-10T02:40:34.093
> 
> 标签：c#, floating-point, double

我有以下代码行：

```
 float top = shape.Y + (shape.Height / 2.0) - 4.5; 
```

哪个因错误而失败'Can't cast double to float。Shape.Y 和 shape.height 都是浮点型。

是什么导致了这个错误，最好的方法是确保 top 是一个浮点数（因为我需要将它传递给另一个期望浮点数的函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T02:42:23.410

尝试用 包裹您的数字`f`，因为通常`2.0`代表一个`double`数字。`float` [您可以在此处](http://msdn.microsoft.com/en-us/library/b1e65aza%28v=vs.71%29.aspx)阅读更多信息。

```
float top = shape.Y + (shape.Height / 2.0f) - 4.5f; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T14:28:26.110

原因是你的文字`2.0`和`4.5`类型是`double`.

然后在你的表情中

```
 shape.Y + (shape.Height / 2.0) - 4.5 
```

划分似乎在 a`float`和 a之间`double`。但是有一个从to的*隐式*转换（另一个方向的转换不是隐式的），所以“扩大”到 a 。然后加上这个双倍，出于同样的原因，也扩大到一个。然后整个表达式得到 type 。`float``double``Height``double``Y``Y``double``double`

但是您将`top`变量声明为 a `float`，并且`double`无法将表达式`float`隐式转换为。

富士给出了解决方案：如果将文字写成`2.0f`（或只是`2f`）和`4.5f`，那么加法、除法和差值将一直计算为`float`s，无需转换。

（实际上，如果您将分母指定为`2`，它将隐式转换`int`为`float`，但正如您现在所知道的那样，如果您将其包含在内，可能更容易看出意图`f`。）

# c - 当 inptr == NULL 时我该怎么办？

> ID：15318301
> 
> 赞同：1
> 
> 时间：2013-03-10T02:40:52.893
> 
> 标签：c

我正在上一门介绍性的计算机科学课程。我们被教导在使用以下代码打开文件时检查 inptr 是否为 NULL：

```
//open dictionary
FILE* inptr = fopen(dictionary, "r");
if (inptr == NULL)
{
    fprintf(stderr, "Could not open dictionary.\n");
    return false;
} 
```

问题是我们还没有被教导如何处理它。因此，当我运行我的代码时，它会打印错误消息并返回 false。我该怎么做才能解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:42:35.110

要解决此问题，请找出并在您命名为“ `dictionary`”的参数中提供某个文件的有效路径

例如，尝试打开“”怎么样`/etc/groups`（假设您在 UNIX 机器上运行）。

或者，更准确地说：

```
 FILE* inptr = fopen("/etc/groups", "r"); 
```

或者

```
 char * pathToFile = "/etc/groups";
 FILE * inptr = fopen(pathToFile, "r"); 
```

编辑添加：

既然您说“ `dictionary`”是指向路径的变量，请将其打印出来，然后查看是否可以“cd”到包含它的文件夹/目录。

例如：

```
 printf( "path to my dictionary is %s", dictionary );
 FILE * inptr = fopen(dictionary, "r"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T02:48:25.787

要缩小错误范围，请始终使用 perror() 来解释操作系统返回的错误代码。

```
 FILE* inptr = fopen(dictionary, "r");
     if (inptr == NULL)
     {
         perror("Could not open dictionary.\n");
         return false;
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T02:51:19.980

如果你的程序文件和“字典”文件在同一个目录中，那么你不需要给出路径，否则你必须给出你文件名的完整路径。

```
For e.g:- if your "dictionary" file is in /home/user_name/Documents then 
          FILE* inptr = fopen("/home/user_name/Documents/dictionary", "r"); 
```

还包括引号下的文件名（“/home/user_name/Documents/dictionary”）

有关更多信息，这将对您有所帮助

[http://www.cplusplus.com/reference/cstdio/fopen/](http://www.cplusplus.com/reference/cstdio/fopen/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T02:51:20.190

将错误消息更改为：

```
fprintf(stderr, "Could not open dictionary file '%s'.\n", dictionary); 
```

以便提供更多信息。

收到此错误后，您更改 a）检查变量`dicationary`是否是您所期望的，b）如果是，请使用 shell 检查您可以访问它（文件所有权/文件权限等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T03:06:57.257

对于在这种情况下该怎么做，没有“一个真正的答案”。这实际上取决于您的上下文和您的设计。这取决于您的程序是什么以及它应该如何工作。如果不了解更多信息，就无法回答您的问题。

例如，如果您的程序是交互式的，并且如果您传递给的文件名`fopen`是由用户交互式输入的，那么可行的做法是告诉用户该文件无法打开并要求他们重新输入该文件姓名。

如果您的程序是某种“批处理”程序，它从某种用户供应商配置文件中获取其参数，那么可行的方法是立即终止程序并显示一条有意义的错误消息，即要求用户编辑配置文件重新运行程序。

如果您的程序是某种应该始终运行的服务器程序，那么您可能会决定记录错误并在没有该文件的情况下尽可能地继续工作。

当然，这也可能取决于该文件对程序操作的重要性。如果这个文件是绝对必要的，你必须要么以致命错误终止，要么继续循环询问用户正确的文件名。

如果该文件是可选的，您可能会发出有关丢失文件的警告并假设一些默认配置和/或约定（否则将被丢失的文件覆盖）继续工作。

以上只是一些一般性的考虑。如果不更多地了解您的程序、丢失的文件及其所扮演的角色，就无法说出更具体的内容。

# sorting - Delphi CustomSort 与数字和字母

> ID：15318304
> 
> 赞同：1
> 
> 时间：2013-03-10T02:41:49.190
> 
> 标签：sorting, delphi, letters-and-numbers

**德尔福使用：** 2007

你好，

我有一个包含几列的 Listview。我想对一个特定的列进行排序。项目可以是数字或字母。

![例子](../Images/318d6bf7d5aa5f90c9a7902a49177203.png)

基本上，顺序应该是：1->99，A->Z，AA->ZZ，AAA->ZZZ。我在网上找到了一些CustomSort的代码，我修改了一下。这是结果（好吧，代码更大，但我只放重要的东西）：

```
function CustomSortProc(Item1, Item2: TListItem; SortColumn: Integer): Integer; stdcall;
var
 s1, s2: string;
 i1, i2: Integer;
 r1, r2: Boolean;

 function IsValidNumber(AString : string; var AInteger : Integer): Boolean;
 var
  Code: Integer;
 begin
  Val(AString, AInteger, Code);
  Result := (Code = 0);
 end;

 function CompareNumeric(AInt1, AInt2: Integer): Integer;
 begin
  if AInt1 > AInt2 then Result := 1 else
  if AInt1 = AInt2 then Result := 0 else Result := -1;
 end;

begin
 Result := 0;

 if (Item1 = nil) or (Item2 = nil) then Exit;

 r1 := IsValidNumber(s1, i1);
 r2 := IsValidNumber(s2, i2);
 Result := ord(r1 or r2);
 if Result <> 0 then Result := CompareNumeric(i1, i2) else
 begin
  Result := Length(s1) - Length(s2);
  if Result = 0 then Result := lstrcmp(PChar(s1), PChar(s2));
 end;
end; 
```

以下是该列的排序方式：

![例子](../Images/286d6f1ad45c43815e2d4739790dde76.png)

换句话说，字母和数字是正确排序的。但是，我无法将所有数字都放在字母之前。我敢肯定这很简单，但我一生都无法弄清楚。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:02:27.440

如果一个是字符串，一个是 int，则来自 val 的字符串的值为 0，所以它会在之前。

```
if (Item1 = nil) or (Item2 = nil) then Exit;

 r1 := IsValidNumber(s1, i1);
 r2 := IsValidNumber(s2, i2);
 if (r1 and r2) then
   Result := CompareNumeric(i1, i2)
 else
   if r1 then 
     result := -1
   else
    if r2 then
      result := 1
    else
    begin
     Result := Length(s1) - Length(s2);
     if Result = 0 then 
       Result := lstrcmp(PChar(s1), PChar(s2));
    end;
end; 
```

我想，机器上没有Dephi来检查。

# php - mysqldump 生成零长度文件

> ID：15318307
> 
> 赞同：1
> 
> 时间：2013-03-10T02:42:10.397
> 
> 标签：php, mysql, mysqldump

我正在使用生成零长度文件的 myqldump。我试了很多次，但似乎它只输出一个零长度的文件。我不知道为什么。我需要安装什么东西吗？

```
 <?
    shell_exec("mysqldump -hlocalhost  -uroot -p  -A> db/ilamdb.sql ");
    echo "complete";
  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:43:45.473

1.  提供 mysqldump 的完整路径
2.  为用户提供密码（在您的情况下为 root）。**离开`-p`意味着以交互方式向用户询问密码。** 如果密码包含以下字符之一，请转义或将密码放在引号中`* ? [ < > & ; ! | $`
3.  对于良好的措施使用`--no-defaults`选项。在您的情况下，您可能不需要这个。
4.  最后将 stderr 重定向到`2>&1`在命令末尾添加的 stdout。这样，如果发生错误，您将在文件中获得用于调试目的的错误消息，而不仅仅是空文件。

因此，您要调用的代码`mysqldump`可能如下所示

```
$pwd = '*******';
$cmd = "/usr/local/mysql/bin/mysqldump -hlocalhost -uroot -p'$pwd' -A> db/ilamdb.sql 2>&1";
shell_exec($cmd); 
```

# objective-c - 实现中的属性语法样式 _suit 和 suit 有什么区别（例如）？

> ID：15318308
> 
> 赞同：-2
> 
> 时间：2013-03-10T02:42:14.487
> 
> 标签：objective-c

在我读到的目标 c 书中，作者总是在实现中使用属性对象，例如：

（我知道我们不再使用 synthesize，除非我们覆盖 setter 和 getter，但仅用于示例）

`@synthesize suit, rank;`

在斯坦福课程中，如果他需要使用@synthesize，他会这样做：

`@synthesize suit = _suit;`

`@synthesize rank = _rank;`

它让我有点困惑。是在`_rank`获取对象时将对象设置为某个值`rank`吗？

如果是的话，那么这条线：`@synthesize rank = _rank;`让我有点困惑......

很想得到一些方向。tnx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T02:51:31.000

> `@synthesize rank = _rank;`

`_rank`这指示编译器根据需要使用称为支持实例变量的 ivar 生成 setter 和/或 getter 。`_rank`如果需要，它将创建 ivar 。[编辑]，意思是如果它不存在。[/编辑]

> `@synthesize rank;`

`rank`这指示编译器根据需要使用名为（与属性本身同名）的 ivar 生成 setter 和/或 getter

然后使用 LLVM4，如果您没有明确要求编译器 @synthesize 一个 @property，并且您默认依赖编译器为您执行此操作，那么它将创建一个`_rank`默认调用的 ivar。

# ms-word - 使用图像创建 Microsoft Word 模板

> ID：15318310
> 
> 赞同：0
> 
> 时间：2013-03-10T02:42:26.953
> 
> 标签：ms-word

我正在尝试创建一个 MS Word 模板，供我们的 501c3 小组用于动物救援。我们希望将宠物描述文本从网站复制到网站（手动，而不是通过脚本）。我们还希望能够右键单击网站上的图像并粘贴到 Word docx 中。但是，我需要将图像限制为为带有 word 文档的图像分配的大小。我试图让打印笼子卡片的人尽可能简单，因为它们不是技术性的。我不熟悉 MS Word 模板，所以我向你们寻求帮助。

我正在寻找对我有帮助的步骤或网站，甚至是 youtube 视频。我发现一些网站可以引导我完成表单创建步骤，但对于有约束的图像却没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:08:23.087

据我所知，您希望 Word 文档中的一个区域包含一个占位符图像，您可以轻松地将其替换为网站上的图像。如果是这种情况，您需要执行以下操作：

1.  首先在单词模板中放置一个占位符图像。将其放置在正确的位置，并确保它是您想要的尺寸。
2.  接下来，当您想使用来自网站的新图像时，首先将网站图像保存到您的计算机上。然后右键单击word模板中的图像并选择**更改图片**。选择您保存在计算机上的新图片，瞧！

# php - 如何使用标题从数据库中发布行

> ID：15318316
> 
> 赞同：-1
> 
> 时间：2013-03-10T02:43:29.073
> 
> 标签：php, mysql, pdo

如何搜索和显示 userid = bookid 的结果？bookids**是**外键，而**userid**是两个不同表中的主键。这是通过 MVC 和 PDO 实现的。如何将参数从视图传递到控制器以进行模型查询`SELECT * FROM user,Book WHERE user_id=Book_id`

**看法：**

```
if(!isset($_GET['id']))
{
    exit;
}
$user_id=$_GET['id'];
?>

<div id="BookItem">
    <div id = "thumbview_Book_title">
        Books
    </div>
<?php 
    $BookArray = $this->_dispResult['book'];
    $num = count($BookArray);

    for($i=0;$i<$num;$i++)
    {
        $row = $BookArray[$i];
    }
    <img src="<?php echo $row['booksrcpath'];?>">
    <?php echo $row['bookName'];?> 
```

**控制器：**

```
$bookId= isset($_GET["id"])?$_GET["id"]:'';

    if($bookId)
    {
        $result['bookbyuserid']=$this->_userModel->getBookByUserId();
        $BookRow = $this->_bookModel->getbookById($bookId);
        if(!$bookRow)
        {
            gotoUrl('/error/?error=lost');
            exit;
        }
    }

    $result['book_row'] = $bookRow;
    $result['book_array'] = $this->_bookModel->getAllBooks($bookId, $bookRow['username']);

    $this->_showPage('books', 'books.php',$result);          
} 
```

### 模型

来自两个表的模型从 user 表和 book 表中查询，选择 bookid 等于 userid 的所有书。它与 基本相同`SELECT *FROM USER, BOOK WHERE BOOK_ID = USER_ID`。

```
public function getBookByUserId()
{
    $BookByUserIdArray = array();
    $this->setTable('book,user');

    $select = 'user.username,user.id as user_id,    //$select = string to search db
      book.id as book_id,book.book_name';

    $where ="user.id=book.user_id";   //string to search where in db
    $result= $this->query($select, $where); //query db
    while($Result && $row =$this->nextRow() )   
    {
        $user_name = $row['username'];
        $book_id = $row['book_id'];
        if($this->_BookImgSr->getBookUrl($user_name, $book_id))    // folder where image files are found and searched from
        {
            $row['user_photo'] = $this->_BookImgSr->getUserPhoto($user_name);
            $row['Book_path'] = $this->_BookImgSr->getBookPath($user_name, $Book_id);
            array_push( $BookByUserIdArray, $row);
        }
    } 

    return  $BookByUserIdArray;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T11:20:44.170

> 如何将参数从视图传递到控制器到模型以进行查询

那是错误的道路。
没有什么可以*从*视图中传递出去。
控制器必须调用模型，获取数据，然后将其传递给视图。

所以，你去吧：
首先，调用一个模型来获取数据

```
$bookId= isset($_GET["id"])?$_GET["id"]:'';
$BookRow = $this->_bookModel->getbookById($bookId); 
```

最后，调用视图：

```
$this->_showPage('books', 'books.php',$result); 
```

# javascript - Twitter Bootstrap Carousel：在 Carousel Div 之外有 carousel-indicators

> ID：15318326
> 
> 赞同：7
> 
> 时间：2013-03-10T02:45:46.127
> 
> 标签：javascript, jquery, razor, twitter-bootstrap, carousel

是否可以在 Carousel Div 之外列出轮播指示器列表？在底部，我问是否可以在整个页面中搜索特定元素，并与它们相关联。

我在想象这样的事情：

```
<div id="presentation" class="tab-pane active">
    <div id="presentationCarousel" class="carousel slide">
        <div class="carousel-inner">
            <div class="item active"><img src="...1.jpg" alt="" /></div>
            <div class="item active"><img src="...2.jpg" alt="" /></div>
            <div class="item active"><img src="...3.jpg" alt="" /></div>
        </div>
        <a class="carousel-control left" href="#presentationCarousel" data-slide="prev">&lsaquo;</a>
        <a class="carousel-control right" href="#presentationCarousel" data-slide="next">&rsaquo;</a>
    </div>
</div>

<div id="chapterList">
    <ol class="carousel-indicators">
        <li data-target="#presentationCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#presentationCarousel" data-slide-to="1"></li>
        <li data-target="#presentationCarousel" data-slide-to="3"></li>
    </ol>
</div> 
```

可能吗？

只是补充一下，我检查了引导 JS 源代码并找到了这一行：

```
this.$indicators = this.$element.find('.carousel-indicators') 
```

它只是填充列表指标。我想**这个**引用是针对**演示 div 元素**的。

**JAVASCRIPT问题**

**是否可以通过删除此**引用来搜索整个页面的元素？

```
this.$indicators = $element.find('.carousel-indicators') 
```

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-22T17:04:02.947

派对迟到了，但你可以尝试添加这样的脚本......

```
$('#myCarousel').on('slide.bs.carousel', function () {       

$holder = $( "ol li.active" );
$holder.next( "li" ).addClass("active");  
if($holder.is(':last-child'))
{
$holder.removeClass("active");
$("ol li:first").addClass("active");
}
$holder.removeClass("active");
})   
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-07-11T16:12:07.020

I've written some universal code, so we can put `carousel-indicators` in any place of the page.

```
$(document).ready(function () {
    $('div[data-ride="carousel"]').each(function () {
        var $carousel = $(this);
        var id = this.id;
        var relatedIndicators = $('li[data-target="#'+id+'"]');
        $carousel.on('slid.bs.carousel', function (e) {
            var index = $carousel.find('.carousel-inner .item').index($carousel.find('.carousel-inner .active'));
            relatedIndicators.removeClass('active');
            relatedIndicators.filter('[data-slide-to="'+ index +'"]').addClass('active');
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-08T07:58:06.917

我将简单地参加`slide`活动：

```
$('.carousel').on('slide.bs.carousel', function (e) {
  var indicator = $('[data-target="#'+this.id+'"]');
  var index = $(e.relatedTarget).index();
  indicator.removeClass('active');
  indicator.filter('[data-slide-to="'+ index +'"]').addClass('active');
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:58:36.773

作为此问题的解决方法，您可以通过为每张幻灯片和每个指示器分配一个 id 来将幻灯片中的 class="active"（和 class=""）复制到您的指示器。

```
function navFunction() {
    setTimeout(function() {
        $("#ind-1").attr("class", $("#slide-1").attr("class"));
        $("#ind-3").attr("class", $("#slide-2").attr("class"));
        $("#ind-3").attr("class", $("#slide-3").attr("class"));
    }, 800);
}; 
```

然后在左键或右键单击时调用脚本 navFunction()。此解决方法仅限于不使用自动滚动的幻灯片。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-22T04:33:59.637

这适用于左/右键单击和自动滚动轮播。

```
$(document).ready(function () {         
    $('#presentation').carousel({
        interval: 8000
    }).bind('slide', function() {
        navFunction();
    }).carousel('cycle');
});

function navFunction() {
    setTimeout(function() {
        $("#ind-1").attr("class", $("#slide-1").attr("class"));
        $("#ind-2").attr("class", $("#slide-2").attr("class"));
        $("#ind-3").attr("class", $("#slide-3").attr("class"));
        $("#ind-4").attr("class", $("#slide-4").attr("class"));
        $("#ind-5").attr("class", $("#slide-5").attr("class"));
    }, 800);
 }; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-10T17:51:52.633

我发现使用 bootstrap 中的 carousel() 函数效果最好，因为您指定了哪个 DIV 应该是轮播。轮播类需要有相对位置，但我希望我的指标在页面的最底部有绝对定位，而不仅仅是轮播的底部。

我这样设置 HTML 代码：

```
<div id="galleryCarousel" class="carousel">

  <!-- Wrapper for slides -->
  <div class="carousel-inner">
    <div class="item active">
      <img src="images/photos/IMG_1937_8_9_tonemapped-X3.jpg" alt="Dish">
      <div class="carousel-caption">
        Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum, nec sagittis sem nibh id elit. Duis sed odio sit amet nibh vulputate cursus a sit amet mauris. Morbi accumsan ipsum velit. Nam nec tellus a odio

      </div><!--end caption-->
    </div><!--end item-->

    <div class="item">
      <img src="images/photos/IMG_1961_2_3_tonemapped-X2.jpg" alt="Dish" class="portrait">
      <div class="carousel-caption">
        Lorem Ipsum. Proin gravida nibh vel velit auctor aliquet. Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum, nec sagittis sem nibh id elit. Duis sed odio sit 

      </div><!--end caption-->
    </div><!--end item-->

  </div><!--end carousel-inner-->

  <!-- Controls -->
  <a class="left carousel-control" href="#gallery" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left"></span>
  </a>
  <a class="right carousel-control" href="#gallery" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right"></span>
  </a>

</div> <!--END carousel--> 
```

```
 <div class="col-xs-6 picName">
   other stuff 
    </div>

    <div class="col-xs-6">
    other stuff
    </div>

      <ol class="carousel-indicators col-xs-12">
        <li data-target="#gallery" data-slide-to="0" class="active"><div><img src="images/photos/small/IMG_1937_8_9_tonemapped-X3.jpg" alt="Goldstone, California Facility Images"></div>Goldstone Antenna at...</li>
        <li data-target="#gallery" data-slide-to="1"><div><img src="images/photos/small/IMG_1961_2_3_tonemapped-X2.jpg" alt="Image 2"></div>Image 2</li>

      </ol>
  </div><!--END gallery--> 
```

在我自己的 JS 文件中，我做了以下代码：

```
$('#gallery').carousel({
  interval: 2000,
  pause: "hover",
    wrap: true
}); 
```

我根本没有接触引导文件。“幻灯片”类对于分配给您想要成为轮播的任何 DIV 以便它执行动画非常重要。

# python - 如何在 Windows Azure 上部署 Flask+ Python 应用程序？

> ID：15318329
> 
> 赞同：7
> 
> 时间：2013-03-10T02:46:07.823
> 
> 标签：python, web-services, azure, flask

我最近在 Flask + Python 中开发了一个以 PostgreSQL 作为数据库的应用程序。

如何在 Windwos Azure 上上传我的应用程序？Windows Azure 是否支持 Flask？值得在 Windows Azure 虚拟机上安装 Flask 应用程序吗？

很多教程都指示将 Visual Studio 和 IPython 与 Django 一起使用，但这不是我的选择。

是否有任何入门指南或教程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-28T12:18:05.580

截至 2013 年 7 月，Azure 上有一个 Flask 模板。

![在此处输入图像描述](../Images/2b41122848039db9b68777bcc2346a2c.png)

从那开始。将其克隆到您的计算机。根目录中有一些 IIS 的东西，文件夹中有一个 hello world Flask `FlaskApplication`。您可以在您的计算机上测试 Flask 应用程序`python __init__.py`。我不知道如何在本地测试 IIS 站点。

我也不知道依赖项是如何工作的。模板中有一个 Pip `requirements.txt`，还有 Flask 和其他几个库的源代码树。

我将我的一个应用程序从 Heroku 复制到[Azure](http://footballer-or-pasta.azurewebsites.net/)。最终得到它的工作。最大的困难是查找和读取日志（你需要在IIS管理器中打开所有日志，然后浏览到一个FTP站点，然后日志在一些奇怪的命名xml文件中），这使得这两个小问题需要更长的时间比他们应该解决的问题

1.  工作目录与 Heroku 不同（在 IIS 站点根目录，而不是 Flask 站点根目录）
2.  该模板有一个狡猾的功能`web.config`，可以从获取请求中静默删除查询字符串

这是问题

```
 <action type="Rewrite" url="handler.fcgi/{R:1}" appendQueryString="false" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T03:20:48.377

假设您要创建云服务，最简单的开始方法是使用 Windows Azure PowerShell 和新的模板功能 - 这允许您为自己的角色创建自定义脚手架。您可以将安装 Python 和 Flask 运行时所需的角色设置放在模板文件夹中，然后使用 Publish-AzureServiceProject 发布到 Azure。

有对 Django web 角色的内置支持，因此您实际上可以从那里开始并进行必要的修改以支持 Flask。

另一种选择是使用 Linux VM，您可以通过 SSH 自行设置。PowerShell 或跨平台 CLI 将在这里提供很大帮助，请参阅：[http](http://www.windowsazure.com/en-us/develop/nodejs/tutorials/linux-virtual-machine/) ://www.windowsazure.com/en-us/develop/nodejs/tutorials/linux-virtual-machine/ 了解虚拟机。

# c++ - 使用 OpenMP 的较慢代码如何并行化？

> ID：15318331
> 
> 赞同：2
> 
> 时间：2013-03-10T02:46:32.647
> 
> 标签：c++, performance, parallel-processing, openmp, icc

使用 OpenMP 时，此代码速度较慢。如果没有 OpenMP，我会得到大约 10 秒。使用 OpenMP，我得到大约 40 秒。怎么了？非常感谢各位朋友！

```
for (i=2;i<(nnoib-2);++i){
    #pragma omp parallel for
    for (j=2; j<(nnojb-2); ++j) {
        C[i][j]= absi[i]*absj[j]*
                 (2.0f*B[i][j] + absi[i]*absj[j]*
                 (VEL[i][j]*VEL[i][j]*fat*
                 (16.0f*(B[i][j-1]+B[i][j+1]+B[i-1][j]+B[i+1][j])
                 -1.0f*(B[i][j-2]+B[i][j+2]+B[i-2][j]+B[i+2][j]) 
                 -60.0f*B[i][j]
                 )-A[i][j]));
        c2 = (abs(C[i][j]) > Amax[i][j]);
        if (c2) {
            Amax[i][j] = abs(C[i][j]);
            Ttra[i][j] = t;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T02:58:00.817

仅仅因为您使用的是 OpenMP 并不意味着您的程序会运行得更快。这里可能会发生几件事：

1.  产生每个线程都会产生相关成本，如果产生一个线程来进行少量计算，那么线程本身的产生将比计算花费更多的时间。

2.  默认情况下，OpenMP 将生成 CPU 支持的最大线程数。对于每个内核支持 2 个或更多线程的 CPU，线程将竞争每个内核的资源。使用`omp_get_num_threads()`你可以看到默认情况下会产生多少线程。我建议尝试使用`omp_set_num_threads()`.

您是否确认使用和不使用 OpenMP 的结果相同？变量 j 和 c2 似乎存在依赖关系。您应该将它们声明为每个线程的私有：

```
#pragma omp parallel for private(j,c2) 
```

* * *

我想补充一点：在尝试任何并行化之前，您应该确保代码已经优化。

根据您的编译器、编译器标志和指令的复杂性，编译器可能会也可能不会优化您的代码：

```
// avoid calculation nnoib-2 every iteration
int t_nnoib = nnoib - 2;
for (i=2; i< t_nnoib; ++i){
    // avoid calculation nnojb-2 every iteration
    int t_nnojb = nnojb - 2;
    // avoid loading absi[i] every iteration
    int t_absi = absi[i];
    for (j=2; j< t_nnojb; ++j) {
        C[i][j]= t_absi * absj[j] *
             (2.0f*B[i][j] + t_absi * absj[j] *
             (VEL[i][j] * VEL[i][j] * fat *
             (16.0f * (B[i][j-1] + B[i][j+1] + B[i-1][j] + B[i+1][j])
              -1.0f * (B[i][j-2] + B[i][j+2] + B[i-2][j] + B[i+2][j]) 
              -60.0f * B[i][j]
             ) - A[i][j]));

        // c2 is a useless variable
        if (abs(C[i][j]) > Amax[i][j]) {
            Amax[i][j] = abs(C[i][j]);
            Ttra[i][j] = t;
         }
    }
} 
```

它可能看起来不多，但它会对您的代码产生巨大影响。编译器将尝试将局部变量放在寄存器中（访问时间要快得多）。请记住，您不能无限期地应用此技术，因为您的寄存器数量有限，滥用它会导致您的代码遭受寄存器溢出的影响。

在数组的情况下，您将避免让系统在循环`absi`执行期间将该数组的一部分保存在缓存中。`j`这种技术的总体思路是将任何不依赖于内循环变量的数组访问移至外循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T07:40:53.553

除了 Cristiano 提到的成本之外，您选择在`j`循环上而不是在循环上进行并行化会带来在分配的三个数组中*错误共享*`i`的风险， . 本质上，当一个线程写入其中一个数组的元素时，同一高速缓存行上的连续元素也将被加载到该核心的高速缓存中。当另一个核心将自己的值写入不同的条目时，它将不得不从另一个缓存中拉出线路，多个核心可能会进行“拔河”。*`C, Amax, Ttra`*

 *对此的解决方案是并行化外循环`i`而不是内循环`j`。方便的是，这也大大降低了克里斯蒂亚诺回答中提到的成本，因为生成和工作分配只会发生一次，而不是`i`循环中的每次迭代。您仍然需要私有化`j`and ，或者只是在随后`c2`的中内联值并消除变量（如您的评论中所述）。为了提高效率，使用本地声明的变量而不是意味着不必访问线程私有变量。`c2``if``j`

就像一个（相当重要的）检查一样，这个循环嵌套实际上是您测量的大部分时间的程序部分？添加 OpenMP 编译指示将其时间从 10 秒以下更改为 40 秒以下？*

# c - 使用 Frama-C 和 WP-Plugin 读取子句

> ID：15318334
> 
> 赞同：2
> 
> 时间：2013-03-10T02:47:54.330
> 
> 标签：c, static-analysis, frama-c

在为字符串长度定义公理时，我需要使用 reads 子句。

```
/*@
predicate Length_of_str_is{L}(char *s, integer n) =
 (0 <= n) && \valid(s+(0..n)) && s[n] == 0 &&
 \forall integer i; 0 <= i < n ==> s[i] != 0;

axiomatic LengthAxiomatic{
    logic integer Length{L}(char *s) reads s[..];
    axiom str_length{L}:
    \forall integer n, char *s; Length_of_str_is(s, n) ==> Length(s) == n;
}
@*/ 
```

但是，任意区域的 reads 子句在 WP 中还没有实现，还有哪些替代方案呢？

我需要这个公理来证明 string.h 中的一些函数（例如：strcmp）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:21:23.850

`reads *s`在 Frama-C/Wp 的氧气版本下，`reads s[..]`在这种情况下使用是安全的（尽管从 ACSL 的角度来看是不正确的） 。

下一个即将发布的 Frama-C 将启用通用读取子句。

# java - Java 项目文件组织：新包 vs 子文件夹

> ID：15318335
> 
> 赞同：0
> 
> 时间：2013-03-10T02:47:57.193
> 
> 标签：java, ant, netbeans-7

对于这个问题的幼稚性质，我提前道歉，但我是 Java 开发的新手，我一直在寻找答案。开始...

我想根据目的或功能组织我的 Java 项目配置文件。换句话说，我想有一个像这样组织的java项目

*   应用
    *   FXML
    *   JDBC
    *   图形用户界面
    *   核心逻辑

该组织立即建议一个带有子文件夹的文件夹。我的问题是 NetBeans IDE 将这种范例用于子包而不是简单的子文件夹。

这对我来说有问题的原因是我想使用成员访问和可见性限制并且仍然在我的项目文件中操作。尽管这个特定的项目不会成为一个 API，但我仍然不希望公开我的所有类和类成员。

特别是，如果我创建一个...

```
protected final Client getClientByIndex(int idx) { ... } 
```

...在 JDBC 文件夹中的类文件中，理想情况下，我希望仍然能够将此文件视为同一个包的一部分，因此我的项目中的其他类可以访问。但是，由于 NetBeans 仅使用子文件夹范例来描述子包，因此除非我遗漏了什么，否则这似乎是不可能的。关于受保护访问的 Java 规范对此非常清楚：

> protected 修饰符指定该成员只能在其自己的包中访问（与 package-private 一样），此外，它的类在另一个包中的子类也可以访问。

所以......如果我想将我的项目文件组织到子文件夹中，我必须要么作为子包这样做，要么将所有内容设为公共或子类（对我来说不理想），或者......我必须只放置我希望的所有项目文件在同一个包中放入同一个文件夹（也不理想）。

是否有一个 IDE 可以在构建时区分项目子文件夹和打算作为子包的文件夹？在我看来，这种区别应该可以通过构建文件中的适当描述符来实现。是否有允许这样做的IDE？这是否仅适用于自定义 Ant 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T04:18:56.380

您正在描述一个多模块项目 - 一个由多个模块组成的项目，其中每个模块（通常）编译成自己的 *.jar。所有 IDE 都以一种或另一种方式支持这一点（在 intellij 的想法中，您可以通过选择文件 - > 新模块来添加模块），但创建此类项目的最佳方法是使用支持模块并拥有 IDE 的构建系统选择导入项目。 [maven](http://maven.apache.org/)是一个非常流行的“构建系统”，可以很容易地用于创建多模块项目。有关详细信息，请参阅maven book 的[第 6 章。](http://www.sonatype.com/books/mvnex-book/reference/multimodule.html)

# php - 使用 MySQLi PHP 代码创建和管理分区表

> ID：15318340
> 
> 赞同：1
> 
> 时间：2013-03-10T02:49:14.037
> 
> 标签：php, mysql, mysqli, partitioning

我希望能够使用 PHP 代码创建分区表，而不是在 phpMyAdmin 中手动运行查询，可以这样做吗？

我尽可能使用 MySQLi，因为它比 MySQL 更安全。

目前，我的一张典型表是这样创建的......

```
$sql = "CREATE TABLE `fred` (
`id` INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
`data1` VARCHAR(256),
`data2` VARCHAR(256),
`data3` VARCHAR(256),
`data4` VARCHAR(256)
) CHARACTER SET utf8 COLLATE utf8_general_ci"; 

// Performs the $sql query on the server to create the table
if ($mysqli->query($sql) === TRUE) {
  echo 'Table Fred created successfully';
}
else {
  echo 'Error: '. $mysqli->error;
} 
```

我如何写这个所以它是分区的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-06T10:12:51.813

```
CREATE TABLE `invoice_detail2` (
  `id` int(11) NOT NULL,
  `office_code` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL,
  `order_type` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'purchase order, sale order, transfer in, transfer out, debit note, credit note',
  `in_out_flag` int(1) NOT NULL COMMENT '1=in, 2=out',
  `order_no` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL,
  `order_date` date NOT NULL,
  `item_no` int(10) NOT NULL,
  `item_qty` int(10) NOT NULL,
  `item_unit` varchar(5) COLLATE utf8mb4_unicode_ci NOT NULL,
  `unit_price_loc` int(12) NOT NULL,
  `unit_price_fc` int(12) NOT NULL,
  `curr_code` int(5) NOT NULL,
  `exch_rate` int(7) NOT NULL,
  `total_price_loc` decimal(15,2) NOT NULL,
  `total_price_fc` decimal(15,2) NOT NULL,
  `include` int(11) NOT NULL,
  `includ_vat_tax` varchar(1) COLLATE utf8mb4_unicode_ci NOT NULL,
  `bar_code` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `item_origin` varchar(4) COLLATE utf8mb4_unicode_ci NOT NULL,
  `item_waranty` int(4) NOT NULL,
  `warranty_type` varchar(1) COLLATE utf8mb4_unicode_ci NOT NULL,
  `agaunest_indent_no` varchar(10) COLLATE utf8mb4_unicode_ci NOT NULL,
  `order_statud` varchar(1) COLLATE utf8mb4_unicode_ci NOT NULL,
  `status_date` date NOT NULL,
  `status_ref` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `ss_creator` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `ss_created_on` datetime NOT NULL,
  `ss_modifier` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL,
  `ss_modofier_on` date NOT NULL
)PARTITION BY RANGE (month(order_date)) (
    PARTITION p0 VALUES LESS THAN (1),
    PARTITION p1 VALUES LESS THAN (2),
    PARTITION p2 VALUES LESS THAN (3),
    PARTITION p3 VALUES LESS THAN (4),
    PARTITION p4 VALUES LESS THAN (5),
     PARTITION p5 VALUES LESS THAN (6),
    PARTITION p6 VALUES LESS THAN (7),
    PARTITION p7 VALUES LESS THAN (8),
    PARTITION p8 VALUES LESS THAN (9),
    PARTITION p9 VALUES LESS THAN (10),
     PARTITION p10 VALUES LESS THAN (11),
    PARTITION p11 VALUES LESS THAN (12)
); 
```

# css - 我如何居中 使用 CSS 标记？

> ID：15318341
> 
> 赞同：4
> 
> 时间：2013-03-10T02:49:15.333
> 
> 标签：css

到目前为止的代码：

```
#master {
position: absolute;
height: auto;
width: 1000px;
min-height: 50px;
} 
```

我想将标签水平居中，但不是任务。我需要添加什么代码才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T02:50:30.920

将以下内容添加到您的 CSS 规则中

```
margin: 0 auto; 
```

这将使块级元素水平居中。

# mysql - 员工在所有服务中

> ID：15318342
> 
> 赞同：0
> 
> 时间：2013-03-10T02:49:24.663
> 
> 标签：mysql, sql, database

我有桌子

```
Employees
id
name 

Services
id
name

EmployeesServices
id_employee
id_service 
```

我知道如果我做

```
select * from Employees inner join EmployeesServices on Employees.id = EmployessServices.Employee_id 
```

编辑： A`EmployeeServices`有很多`Services`和`Employees`. 我需要知道我是否有一个`Employee`至少存在`EmployeeServices`一个`Services`

很抱歉造成混乱，但看起来很难

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:40:32.497

我不完全确定我明白你在问什么。我也不完全确定您是否理解您的要求，但是当您尝试掌握 SQL 查询时，这并不罕见。

假设你有

*   Services.id 上的主键约束，以及
*   EmployeesServices(id_employee, id_service) 的主键约束

这应该返回所有“拥有”每项服务的员工。（在 PostgreSQL 中测试。）

```
select id_employee, count(id_employee)
from EmployeesServices
group by id_employee
having count(id_employee) = (select count(*) from Services) 
```

EmployeesServices 中不能有重复的行。因此，员工 ID 号的计数（按员工 ID 号分组）必须与服务计数相匹配，以便员工“拥有”每一项服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:42:36.643

`id_service`计算每个`id_employee`in的不同s `EmployeesServices`：

```
SELECT
  id_employee,
  COUNT(DISTINCT id_service) AS service_count
FROM
  EmployeesServices
GROUP BY
  id_employee
; 
```

现在，您需要过滤该`service_count`值。由于该表达式包含一个聚合函数，因此您需要使用一个`HAVING`子句，因为这是用于过滤*行组*的内容（与用于过滤的单个行相反`WHERE`）。

据我了解，条件应该是“每位员工的不同服务数量与服务表中的服务数量相同”。所以，我们开始：

```
SELECT
  id_employee,
  COUNT(DISTINCT id_service) AS service_count
FROM
  EmployeesServices
GROUP BY
  id_employee
**HAVING
  COUNT(DISTINCT id_service) = (SELECT COUNT(*) FROM Services)**
; 
```

现在，这将只为您提供符合条件的员工的 ID。将查询用作派生表并将其加入`Employee`以访问员工的详细信息：

```
**SELECT
  e.*,
  es.service_count
FROM
  Employee e
INNER JOIN (**
  SELECT
    id_employee,
    COUNT(DISTINCT id_service) AS service_count
  FROM
    EmployeesServices
  GROUP BY
    id_employee
  HAVING
    COUNT(DISTINCT id_service) = (SELECT COUNT(*) FROM Services)
**) es
ON
  e.id = es.id_employee**
; 
```

请注意，如果`EmployeeServices`不接受每个员工的重复服务，您可以替换`COUNT(DISTINCT id_service)`为`COUNT(*)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T03:10:57.303

此查询将返回参与所有服务的所有员工的 ID：

```
SELECT es.id_employee 
FROM
(SELECT e.id as emp_id, s.id as serv_id FROM Employee e CROSS JOIN Service s) as full
LEFT JOIN EmployeeServices es ON es.id_employee=full.emp_id AND es.id_service=full.serv_id
GROUP BY full.emp_id
HAVING COUNT(*)=COUNT(es.id_employee); 
```

[SQL Fiddle](http://sqlfiddle.com/#!2/b327a/24) - 您可能想要试验数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T06:25:43.970

```
 create table Employees (id number unique, name text);
    create table Services (Sid number unique, Sname text);
    create table EmployeesServices (EEid number, ESid number);
    insert into Employees values (1, 'bob');
    insert into Employees values (2, 'joan');
    insert into Employees values (3, 'philippe');
    insert into Services values (100, 'fell tree');
    insert into Services values (101, 'row boat');
    insert into Services values (102, 'read book');
    insert into Services values (103, 'sell book');
    insert into Services values (104, 'sell ticket');
    insert into EmployeesServices values (1, 100);
    insert into EmployeesServices values (2, 101);
    insert into EmployeesServices values (2, 101);
    insert into EmployeesServices values (3, 101);
    insert into EmployeesServices values (3, 103);
    insert into EmployeesServices values (3, 103);
    insert into EmployeesServices values (3, 104);
    insert into EmployeesServices values (1, 100);
    insert into EmployeesServices values (1, 101);
    insert into EmployeesServices values (1, 102);
    insert into EmployeesServices values (1, 102);
    insert into EmployeesServices values (1, 102);
    insert into EmployeesServices values (1, 102);
    select count(*) as Number_of_Unique_Services_Available from Services;
    select id, name, count(distinct Sid) as Unique_Services_Performed
    from Employees, Services, EmployeesServices
    where id = EEid and Sid = ESid
    group by id
    order by Unique_Services_Performed desc, name; 
```

我创建了一些表进行测试。我假设员工可以多次执行相同的服务。第一个 select 语句告诉可用的唯一服务的数量。第二个创建输出，显示每个员工执行的唯一服务的数量。下面的示例输出显示了 5 个独特的服务，并且没有人执行所有这些服务。

```
 Number_of_Unique_Services_Available
    -----------------------------------
    5

    id          name        Unique_Services_Performed
    ----------  ----------  -------------------------
    1           bob         3
    3           philippe    3
    2           joan        1 
```

# c# - 如何读取发送到 255.255.255.255 的 udp 数据包

> ID：15318344
> 
> 赞同：1
> 
> 时间：2013-03-10T02:49:56.167
> 
> 标签：c#, udpclient

我有一个正在广播 UDP 数据包的 iPhone 上运行的应用程序。我想编写一个控制台应用程序来读取我的 PC 上的 UDP 数据包。我尝试了这个示例，但无法读取任何数据包：

[http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx)

我使用了wireshark并验证了UDP数据包正在发送到给定端口上的255.255.255.255。如何在 C# 应用程序中读取数据包？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:00:55.463

这是用于简单侦听器的 C# 代码，应该没问题，但我是在 Mac 上写的，所以无法测试。

```
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;

public class UDPListener
{
    public static int Main()
    {
        var done = false;
        var listener = new UdpClient(31337);
        var ipe = new IPEndPoint("255.255.255.255", 31337);
        var data = String.Empty;

        byte[] rec_array;
        try
        {
            while (!done)
            {
                rec_array = listener.Receive(ref ipe);
                Console.WriteLine("Received a broadcast from {0}", ipe.ToString() );
                data = Encoding.ASCII.GetString(rec_array, 0, rec_array.Length);
                Console.WriteLine("Received: {0}\r\rn", data);
            }
        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        }

        listener.Close();
        return 0;
    }
} 
```

# php - 在表单中创建简单的 PHP 图像上传

> ID：15318345
> 
> 赞同：0
> 
> 时间：2013-03-10T02:50:02.337
> 
> 标签：php, image, forms, upload

我正在制作一个简单的图片上传表单，其中包含供人们添加评论和其他详细信息的地方。到目前为止，我已经达到了这个代码。

问题：当我运行它时，我上传的文件可以正常进入目录，但表单中的数据没有写入数据库。

```
<?php
//$con = mysql_connect("localhost","root","");
$con = mysql_connect("localhost","Login","password","DBname");
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

if(isset($_FILES['files'])){
    $errors= array();
    foreach($_FILES['files']['tmp_name'] as $key => $tmp_name ){
        $file_fname=$_POST['fname'][$key];
        $file_Lname=$_POST['lanem'][$key];
        $file_email=$_POST['email'][$key];
        $file_school=$_POST['school'][$key];
        $file_comment=$_POST['comment'][$key];
        $file_name = $key.$_FILES['files']['name'][$key];
        $file_tmp =$_FILES['files']['tmp_name'][$key];

        if($file_size > 2097152){
            $errors[]='File size must be less than 2 MB';
        }

        $query = "INSERT INTO sameplTable(`fname`,`lname`,`email`,`school`,`comment`,`filename`) VALUES
        ('$fname','$lname','$email','$school','$comment','$filename')";

        $desired_dir="user_data";
        if(empty($errors)==true){
            if(is_dir($desired_dir)==false){
                mkdir("$desired_dir", 0700);        // Create directory if it does not exist
            }
            if(is_dir("$desired_dir/".$file_name)==false){
                move_uploaded_file($file_tmp,"$desired_dir/".$file_name);
            }else{                                  // rename the file if another one exist
                $new_dir="$desired_dir/".$file_name.time();
                rename($file_tmp,$new_dir) ;
            }
            mysql_query($query);
        }else{
            print_r($errors);
        }
    }
    if(empty($error)){
        echo "Success";
    }
}
?>

<form action="" method="POST" enctype="multipart/form-data">
    <input type="file" name="files[]" multiple/>
    Value1: <input type="text" name="fname"><br>
    Value2: <input type="text" name="Lname"><br>
    Value3: <input type="text" name="email"><br>
    Value4: <input type="text" name="school"><br>
    Value5: <input type="text" name="comment"><br>

    <input type="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:26:45.813

您忘记在 type=file 以外的输入名称后添加 []。所以 POST 数组不会有 $key 。

# html - 阻止浏览器在加载后滚动回页面顶部 [链接已修复]

> ID：15318348
> 
> 赞同：0
> 
> 时间：2013-03-10T02:50:41.407
> 
> 标签：html, anchor, loading, external, webpage

# 问题

当您单击带有锚点的外部链接时：

1.  您将被重定向到该页面
2.  您将立即转到链接中的锚点
3.  页面将完成加载（您已经处于锚点）
4.  页面完成加载 - 返回页面顶部

现场示例...直接链接到锚点的外部 URL：[www.mysite.com/index.html#sources_and_credits](http://docs.revaxarts.com/doc_fe95e477c134e16d95f20a873d3680a6/#sources_and_credits)

我在此示例中添加了一些重图像，以便加载和复制包含大量内容和较小图像的文档需要一点时间。如果第一次尝试没有出现问题，请刷新页面并考虑清除缓存。

怎么解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:45:49.223

我是文档器的创建者，您的链接不再有效，因为我在一小时后删除了创建的文档。

所以我将用一个工作示例来解释它：

[http://revaxarts-themes.com/documenter/docs/](http://revaxarts-themes.com/documenter/docs/)

如果您想进行深度链接，可以使用：[http](http://revaxarts-themes.com/documenter/docs/#autosave) ://revaxarts-themes.com/documenter/docs/#autosave直接将您带到该页面（本机浏览器行为）。尽管脚本也尝试滚动到该点并从顶部开始。

为了防止这种本机行为，您可以使用此链接[http://revaxarts-themes.com/documenter/docs/#!/autosave](http://revaxarts-themes.com/documenter/docs/#!/autosave)让您从顶部开始，如果 DOM 准备就绪，它会滚动到该锚点。

当然，这是定制的，而不是原生行为。

希望有帮助！

# javascript - 数组范围问题

> ID：15318349
> 
> 赞同：0
> 
> 时间：2013-03-10T02:51:05.300
> 
> 标签：javascript, scope, global

我已经环顾了几个小时，老实说，我不明白为什么这不起作用。我虽然理解范围，但我认为这与 .popular 方法的回调有关。有什么建议吗？

```
var filters = [];  //Global

INSTAJAM.media.popular(function(popular){

    for (i in popular.data){
        filters.push(popular.data[i].filter); //Pushing to Global
    }

    console.log(filters); //Works fine

});

console.log(filters); //Empty array 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:18:44.373

这些是我能想到的为什么您的第二个 console.log(filters) 为空的原因：

1.  `INSTAJAM.media.popular`很可能是一个异步函数（它在稍后的某个时间调用它的回调可能是 ajax 调用的结果），当您执行第二个`console.log(filters);`时，ajax 调用尚未完成，因此您填充全局`filters`变量的回调尚未被调用或运行.
2.  `var filters = [];`并不是真正的全球性。
3.  范围内还有另一个变量`filters`，因此您实际上并没有修改全局变量。

基于`INSTAJAM.media.popular`需要回调的结构，我的猜测是#1。异步 javascript 意味着事情不会以串行执行顺序发生。相反，您调用类似的东西`INSTAJAM.media.popular(fn)`，稍后，当 ajax 调用完成时调用回调。这意味着在您调用之后立即定位的代码`INSTAJAM.media.popular(fn)`不能使用该调用的结果。相反，任何想要使用这些结果的代码都必须在回调本身中或从回调中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T02:54:04.093

你可以参考`window.filters`

# javascript - 使用 JavaScript 显示/隐藏图像

> ID：15318357
> 
> 赞同：26
> 
> 时间：2013-03-10T02:52:35.263
> 
> 标签：javascript, html

我有一个带有图片的 HTML 页面，我将其设置为 CSS 不可见`visibility: hidden`。我想创建一个名为“显示图像”的链接，这样当我点击它时，图像就会出现。

现在，我不知道如何建立这样的链接，因为通常是`<a href=...>`链接到其他页面的链接。就我而言，我希望链接调用 JavaScript 来显示图像。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-10T02:54:06.780

如果你已经`showImage`定义了一个 JavaScript 函数来显示图像，你可以这样链接：

```
<a href="javascript:showImage()">show image</a> 
```

如果您需要帮助定义函数，我会尝试：

```
function showImage() {
    var img = document.getElementById('myImageId');
    img.style.visibility = 'visible';
} 
```

或者，更好的是，

```
function setImageVisible(id, visible) {
    var img = document.getElementById(id);
    img.style.visibility = (visible ? 'visible' : 'hidden');
} 
```

然后，您的链接将是：

```
<a href="javascript:setImageVisible('myImageId', true)">show image</a>
<a href="javascript:setImageVisible('myImageId', false)">hide image</a> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-10T02:56:03.157

这很简单。

HTML：

```
<img id="theImage" src="yourImage.png">
<a id="showImage">Show image</a> 
```

JavaScript：

```
document.getElementById("showImage").onclick = function() {
    document.getElementById("theImage").style.visibility = "visible";
} 
```

CSS：

```
#theImage { visibility: hidden; } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T02:58:31.187

你可以用 jquery 做到这一点，只需访问[http://jquery.com/](http://jquery.com/)以获取链接，然后执行类似这样的操作

```
<a id="show_image">Show Image</a>
<img id="my_images" style="display:none" src="http://myimages.com/img.png">

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
   $(document).ready(function(){
      $('#show_image').on("click", function(){
         $('#my_images').show('slow');
      });
   });
</script> 
```

或者如果您希望链接打开和关闭图像，请执行此操作

```
<a id="show_image">Show Image</a>
<img id="my_images" style="display:none;" src="http://myimages.com/img.png">

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
   $(document).ready(function(){
      $('#show_image').on("click", function(){
         $('#my_images').toggle();
      });
   });
</script> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-27T05:55:34.777

这是工作代码：

```
<html>
  <body bgcolor=cyan>
    <img src ="backgr1.JPG" id="my" width="310" height="392" style="position: absolute; top:92px; left:375px; visibility:hidden"/>
    <script type="text/javascript">
      function tend() {
        document.getElementById('my').style.visibility='visible';
      }
      function tn() {
        document.getElementById('my').style.visibility='hidden';
      }
    </script>
    <input type="button" onclick="tend()" value="back">
    <input type="button" onclick="tn()" value="close">
  </body>
</html> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-10T02:57:50.313

这是一个工作示例：http: [//jsfiddle.net/rVBzt/](http://jsfiddle.net/rVBzt/)（使用 jQuery）

```
<img id="tiger" src="https://twimg0-a.akamaihd.net/profile_images/2642324404/46d743534606515238a9a12cfb4b264a.jpeg">

<a id="toggle">click to toggle</a>

img {display: none;}

a {cursor: pointer; color: blue;}

$('#toggle').click(function() {
    $('#tiger').toggle();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-29T03:54:36.777

**HTML**

```
<img id="theImage" src="yourImage.png">
<a id="showImage">Show image</a> 
```

**JavaScript：**

```
document.getElementById("showImage").onclick = function() {
    document.getElementById("theImage").style.display = "block";
} 
```

**CSS：**

```
#theImage { display:none; } 
```

# c - fscanf 返回值

> ID：15318360
> 
> 赞同：11
> 
> 时间：2013-03-10T02:53:11.980
> 
> 标签：c, scanf

fscanf 在读取文件中的数据时返回什么。例如，

```
int number1, number2, number3, number4, c;

c = fscanf (spFile, "%d", &number1);
//c will be 1 in this case.

c = fscanf (spFile, "%d %d %d %d", &number1, &number1, &number3, &number4);
//in this case, c will return 4. 
```

我只想知道为什么它会根据参数的数量返回这样的值。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-10T02:54:55.087

从[**Xscanf 系列**](http://pubs.opengroup.org/onlinepubs/009695399/functions/scanf.html)函数的手册页：

> 成功完成后，**这些函数将返回成功匹配和分配的输入项的数量**；如果发生早期匹配失败，此数字可以为零。如果输入在第一次匹配失败或转换之前结束，则返回 EOF。如果发生读取错误，则设置流的错误指示符，返回 EOF，并设置 errno 以指示错误

因此，您的第一次调用`fscanf`返回 1，因为一个输入项 ( `&number1`) 已与格式说明符成功匹配`%d`。您的第二次调用`fscanf`返回 4，因为所有 4 个参数都匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T02:57:30.593

我从[cplusplus.com](http://www.cplusplus.com/reference/cstdio/fscanf/)引用。

> 成功时，该函数返回参数列表中成功填充的项目数。由于匹配失败、读取错误或到达文件结尾，此计数可以与预期的项目数匹配或更少（甚至为零）。
> 
> 如果发生读取错误或读取时到达文件结尾，则设置正确的指示符（feof 或 ferror）。并且，如果在任何数据可以成功读取之前发生任何一种情况，则返回 EOF。

- 编辑 -

如果您打算确定读取到字符串的字节数。

```
int bytes;
char str[80];
fscanf (stdin, "%s%n",str,&bytes);
printf("Number of bytes read = %d",bytes); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T03:49:47.427

返回值不取决于参数的数量`fscanf`，它取决于成功扫描的值的数量`fscanf`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T03:22:24.183

这恰好是一个非常直截了当的问题，查尔斯和埃德在我之前已经恰当地回答了。但是他们没有提到下次遇到困难时应该在哪里寻找这些东西。

首先是问题 - fscanf 属于格式化输入（扫描）函数系列，它们应该读取输入并报告读取的数据的一些信息，如字节或获得适当输入读取的项目（变量地址）计数并已成功分配。

这里 fscanf 应该使用函数调用中提供的格式字符串检查输入文件中的匹配项，并相应地分配（按其位置顺序）变量 - 具有值的地址，一旦完成，它将返回总计数它所做的成功分配的数量。因此 1 和 next 的结果是 4 （假设输入正确提供）。

第二部分：去哪里看？-- 如果您参考手册页或 posix 文档，可以轻松找到此类功能的详细描述。

如果您注意到，前两个答案还包含从手册页中摘录的少量内容。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-10T02:56:15.940

从[手册](http://linux.die.net/man/3/scanf)页：

**这些函数返回成功匹配和分配的输入项的数量，可以少于提供的数量，如果早期匹配失败，甚至为零。**

因此，如果能够从文件中读取一个整数，则第一个返回 1，如果能够从文件中读取 4 个整数，则第二个返回 4。

# php - 随机音频文件生成的html5音频

> ID：15318364
> 
> 赞同：1
> 
> 时间：2013-03-10T02:53:31.490
> 
> 标签：php, html, html5-audio

我正在尝试制作一个简单的页面，其中有一个基本的 html5 音频播放器，但我希望播放器用于来自特定文件夹的随机音频文件。

我试过搜索和研究，但我想出了一个脚本，但它会生成一个空白页

例子：

 `````
<audio>
<?php

$dir = 'files/';
$scan = scandir($dir);  

for ($i = 0; $i<count($scan); $i++) {

    if ($scan[$i] != '.' && $scan[$i] != '..') {
        echo $scan[$i];
    }
}; 
?>
</audio> 
````  `我知道音频控制，但我现在并不担心。

此外，如果我解决了这个问题，我也会尝试让 php 和 html5 音频为随机音频文件生成 id3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:34:43.917

**我自己试过这个并且它有效：（更新）**

```
$dir = '../sound/'; // Change this so IT's true for your case.
$scan = scandir($dir);
$size = sizeof($scan);
$random = rand(1, $size);
$randomFile = $scan[$random];
$fileLocation = $dir. $randomFile; 
```

现在您可以获得文件的扩展名：

```
$explode = explode(".", $randomFile);
$extension = $explode[1]; 
```

**完整的工作代码：**

```
<audio controls>
    <source src="<?php echo $fileLocation; ?>" type="audio/<?php echo $extension; ?>">
</audio> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:26:43.033

您错误地使用了音频标签。你需要有这样的东西：

```
<audio src="<?php #php code to echo file here ?>"></audio> 
```

您将文件的 URL 放在 src 属性中，而不是标签的内容。只有某些类型的文件适用于不同的浏览器。OGG 文件格式适用于大多数浏览器，但有些需要 mp3。确保您具有正确的文件格式以使其正常工作。``

# excel - “对象所需的错误”是什么意思？

> ID：15318367
> 
> 赞同：0
> 
> 时间：2013-03-10T02:53:46.207
> 
> 标签：excel, vba

我下面的代码遇到“需要对象的错误”。你能帮我理解什么是错的吗？

```
Private Sub Command9_Click()
   Dim sPath As String
   Dim sFil As String
   Dim strName As String
   Dim twbk As Workbook
   Dim owbk As Workbook
   Dim ws As Worksheet

   Set twbk = ActiveWorkbook
   sPath = "C:\Adise\Export\" 'Change to suit
   sFil = Dir(sPath & "*.xls")

   Do While sFil <> ""
      strName = sPath & sFil
      Set owbk = Workbooks.Open(strName)
      Set ws = owbk.Sheets(1)
      ws.Range("A1", Range("A" & Row.Count).End(xlUp)).Copy
      twbk.Sheets(1).Range("A65536").End(xlUp)(2).PasteSpecial xlPasteValues
      owbk.Close False 'Close no save
      sFil = Dir
   Loop

   twbk.Save
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T06:09:48.187

试试下面的代码：

这条线的问题：`ws.Range("A1", Range("A" & Row.Count).End(xlUp)).Copy`

您可以使用查找最后一行`Range("A65000").End(xlUp).Row`

或者，您可以使用`Range("A1").CurrentRegion`包含整个当前区域。

```
Private Sub Command9_Click()
    Dim sPath As String
    Dim sFil As String
    Dim strName As String
    Dim twbk As Workbook
    Dim owbk As Workbook
    Dim ws As Worksheet

    Set twbk = ActiveWorkbook
    sPath = "C:\Adise\Export\"    'Change to suit
    sFil = Dir(sPath & "*.xls")

    Do While sFil <> ""
        strName = sPath & sFil
        Set owbk = Workbooks.Open(strName)
        Set ws = owbk.Sheets(1)
        ws.Range("A1", Range("A" & Range("A65000").End(xlUp).Row)).Copy twbk.Sheets(1).Range("A65536").End(xlUp)
        owbk.Close False    'Close no save
        sFil = Dir
    Loop

    twbk.Save
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T06:38:25.623

它应该是复数 - `Rows`，而不是 Row。：

```
ws.Range("A1", ws.Range("A" & ws.Rows.Count).End(xlUp)).Copy 
```

`Rows.Count`返回工作表中的行数：Excel 2003 及更早版本为 65536，Excel 2007 及更高版本为 1,048,576。因此，您还应该将下一行更改为：

```
twbk.Sheets(1).Range("A" & twbk.Sheets(1).Rows.Count).End(xlUp)(2).PasteSpecial xlPasteValues 
```

如上所述，您还应该限定`Ranges`with 。`ws`

# php - mysqli or die，它必须死吗？

> ID：15318368
> 
> 赞同：34
> 
> 时间：2013-03-10T02:53:48.337
> 
> 标签：php, mysql, mysqli

如果我使用这样的代码：

```
$update_result = mysqli_query( $link , $sql_update_login ) or die ('Unable to execute query. '. mysqli_error($link)); 
```

它必须死吗，或者你可以在之后提出不同的查询吗？就像将错误日志写入另一个表的预定函数一样？如：

```
$update_result = mysqli_query( $link , $sql_update_login ) or function('$query, $error); 
```

“或”之后的其他选项是什么？我没有在文档中找到它，感谢任何线索。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-03-10T08:33:48.887

> 它必须死吗

恰恰相反，**它不应该`or die()`永远。**
PHP 是一种遗传不好的语言。非常不好的遗传。并且`or die()`错误消息是最糟糕的雏形之一：

*   die 抛出一条错误消息，向潜在的攻击者透露一些系统内部信息
*   它会用奇怪的消息混淆无辜的用户，并让他们没有可以使用的界面，因此他们很可能会退出。
*   它会杀死中间的脚本，因此可能会导致显示设计撕裂（或根本没有设计）（即用户请求的页面呈现不完整）
*   不可恢复地杀死脚本。虽然可以捕获并优雅地处理抛出的异常
*   `die()`没有提示您**发生错误**的位置。而且在一个相对较大的应用程序中，找到它会很痛苦。

所以，永远不要使用`die()`MySQL 错误，**即使是临时调试**：有更好的方法。

无需手动检查错误，只需将 mysqli 配置为在错误时引发异常，方法是将以下行添加到您的连接代码中

```
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT); 
```

之后只需按原样编写每个 mysqli 命令，无需任何`or die`其他内容：

```
$result = mysqli_query($link, $sql); 
```

如果出现错误，此代码将引发异常，因此您将始终被告知每个问题，而无需一行额外的代码。

关于如何使您的错误报告产品准备好、统一且整体合理，同时使您的代码更清洁的更详细说明，您可以在我的关于[PHP 错误报告](https://phpdelusions.net/articles/error_reporting)的文章中找到。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-10T02:56:33.740

`or`只是一个运算符（与 非常相似`||`）。

该`or die()`语法之所以有效，是因为`or`短路，这意味着如果第一个语句为真，`True or X`则将始终为真，因此`X`不会评估并且您的脚本不会`die`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T03:01:37.740

是的，您可以在 (or) 之后提供不同的功能。我已经测试了以下内容：

```
mysqli_query($sel_db,'what!') or some_func(mysqli_error($sel_db));

function some_func($str) {
    die("ERROR: ".$str);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T03:02:40.607

它不必`die()`特别明确，但它必须是通过调用`exit()`or使脚本停止的`die()`东西，或者引发异常的东西。否则，脚本将继续使用该函数的返回值（可能为 null 或某种垃圾） in `$update_result`，这几乎肯定会导致问题。

# php - 使用 srand 和 rand 函数（php）创建唯一的随机数？

> ID：15318374
> 
> 赞同：0
> 
> 时间：2013-03-10T02:54:31.773
> 
> 标签：php

此代码每秒创建一个新的随机数。

```
 srand(floor(time() / (1)));
   echo rand(0,5); 
```

它如何唯一地回显随机数（0-5），然后循环？

例如，我很想得到这样的序列：

```
1,5,4,3,2,1,4,5,3,2,5,4,1,2,3... 
```

而不是这样：

```
2,2,1,4,3,4,5,5,5,5,5,1,2,3,4... 
```

（澄清一下，第二个间隔很重要，您假设每个页面加载之间存在一秒钟的延迟。每个页面加载都会产生一个随机数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:38:18.537

你想摆脱像“2,2”和“5,5,5,5”这样的序列吗？仅当您将以前的数字存储在某处时才有可能，例如在 $_SESSION 超全局变量中：

```
session_start();
$ran_num = rand(0, 5);
while ($ran_num == $_SESSION['ran_num']) {
    $ran_num = rand(0, 5);
}
$_SESSION['ran_num'] = $ran_num;
echo $ran_num; 
```

# python - 使用 mod_wsgi 和 Apache2 mem_cache 缓存 Django 响应

> ID：15318378
> 
> 赞同：0
> 
> 时间：2013-03-10T02:55:37.150
> 
> 标签：python, django, caching, apache2, httpresponse

我已按照以下文章尝试设置 Apache2 缓存，以便在带有 mod_wsgi 的 Ubuntu 12.10 上将其与 Django 一起使用。我希望 Apache 为我缓存一些请求。

```
http://www.howtoforge.com/caching-with-apaches-mod_cache-on-ubuntu-10.04 
```

从文章中，我启用了模块并设置了以下 php 脚本来测试缓存。缓存工作得很好——我在 5 分钟后才得到一个新的时间戳。

```
vi /var/www/cachetest.php

<?php
header("Cache-Control: must-revalidate, max-age=300");
header("Vary: Accept-Encoding");
echo time()."<br>";
?> 
```

现在在我的 django 响应中，我以相同的方式设置适当的标头后返回一个 HttpResponse 对象：

```
# Create a Response Object with the content to return and set it's 
response = HttpResponse("%s"%(output_display))
response['Cache-Control'] = 'must-revalidate, max-age=20'
response['Vary'] = 'Accept-Encoding'
return response 
```

Django 请求的缓存根本不起作用。我使用 Firefox 的 LiveHeaders 来检查 HTTP 响应标头。

对于上面的示例链接和 PHP 脚本，标题如下所示：

```
http://localhost/cachetest.php

GET /cachetest.php HTTP/1.1
Host: localhost
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Cache-Control: max-age=0

HTTP/1.1 200 OK
Date: Sun, 10 Mar 2013 02:29:32 GMT
Server: Apache/2.2.22 (Ubuntu)
X-Powered-By: PHP/5.4.6-1ubuntu1.1
Cache-Control: must-revalidate, max-age=300
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 34
Connection: close
Content-Type: text/html
---------------------------------------------------------- 
```

对于我的 Django 请求 - 缓存不起作用，它总是强制冗长的操作来完成响应 - 就像用 F5 重新加载上面的 php 请求一样。使用 FireFox 插件，我似乎正在编写正确的标题：

```
http://localhost/testdjango/testdjango/

GET /testdjango/testdjango/ HTTP/1.1
Host: localhost
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:19.0) Gecko/20100101 Firefox/19.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive

HTTP/1.1 200 OK
Date: Sun, 10 Mar 2013 02:32:41 GMT
Server: Apache/2.2.22 (Ubuntu)
Vary: Accept-Encoding
Cache-Control: must-revalidate, max-age=20
Content-Encoding: gzip
Connection: close
Transfer-Encoding: chunked
Content-Type: text/html; charset=utf-8
---------------------------------------------------------- 
```

我究竟做错了什么？如何让 django 缓存像 php 脚本一样工作？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:30:27.227

这似乎是你的问题：

```
Transfer-Encoding: chunked 
```

就 mod_mem_cache 而言，这意味着“流式响应”。而且，根据文档：

> 默认情况下，除非有 Content-Length 标头，否则不会缓存流式响应。

您可以通过设置[MCacheMaxStreamingBuffer 指令](http://httpd.apache.org/docs/2.2/mod/mod_mem_cache.html#mcachemaxstreamingbuffer)来解决它。

# php - 如何在 JavaScript 弹出窗口中显示 PHP 变量值？

> ID：15318382
> 
> 赞同：0
> 
> 时间：2013-03-10T02:56:09.387
> 
> 标签：php, javascript, ajax

我有以下脚本。用户将传递一个数值，例如 123 作为 URL 中的参数，应用程序将从 MySQL 加载/获取该值并将其显示在文本区域中。

例如，在 URL 中输入“example.com/index.php?id=123”将从数据库中提取第 123 条记录并将其显示在文本区域中。一切似乎都在工作，但我想在提交表单时显示“源”表的最后一行/ID。所以，而不是显示“已保存！” 在弹出窗口中，它应该显示类似“124”（或最后更新的行/编号）的内容。

索引.php：

```
<?php
include('connect-db.php');
if (isset($_GET['id']) && is_numeric($_GET['id']) && $_GET['id'] > 0)
{
    $id = $_GET['id'];
    $result = mysql_query("SELECT content FROM source WHERE id=$id") or die(mysqli_error()); 
    $row = mysql_fetch_array($result);

       if($row)
    {
     $submit_date = date("Ymd");
     $content = $row['content'];                    
    }

}
?>
<!DOCTYPE html>
    <html>
      <head>
     <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>        

     <script type="text/javascript"> 
          $(document).ready(function(){
                $("#myform").submit( function () {    
                  $.post(
                   'submit.php',
                    $(this).serialize(),
                    // 
                   // show the last id here!
                   //
                        function(data){ alert("Saved!"); }
                  );
                  return false;   
                });   
            });
    </script>      

      </head>
      <body>

    <div id="header" >

    <form action="submit.php" method="post" id="myform">
    <textarea id="editor" name="editor" id="editor"><?php echo $content; ?></textarea>
    <br/>
    <input type="submit" name="submit" value="Submit" id="submit"/>

    </form>

    </div>

      </body>
    </html> 
```

提交.php：

```
<?php
include('connect-db.php');

$submit_date = date("Ymd");
$content = mysql_real_escape_string(htmlspecialchars($_POST['editor']));
$ip_address = $_SERVER['REMOTE_ADDR'];

if ($content != '') { 
// 
// Show the variable (last_id) value in the JavaScript above!
//
$last_id = mysql_insert_id();  

mysql_query("INSERT INTO source (submit_date, ip, content) values('$submit_date','$ip_address','$content')") or die(mysql_error());
mysql_close($connection);
}
?> 
```

连接数据库：

```
<?php
 $server = 'localhost';
 $user = 'domdom';
 $pass = 'password@123';
 $db = 'domdom';

 $connection = mysql_connect($server, $user, $pass) or die ("Could not connect to server ... \n" . mysql_error ());
 mysql_select_db($db) or die ("Could not connect to database ... \n" . mysql_error ());
?> 
```

请注意，我不需要任何关于 PDO 或 MySQLi 的建议，这在此时并不重要。但是，欢迎任何有关改进安全性/SQL 查询等的建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:06:49.117

我将尝试分两部分回答：

[1] PHP端：在“isset($_GET['id'])”部分，只返回你要填写的文本区域的内容。比如说，在你的数据库中，123 -> 'Friday'。只需返回字符串“星期五”。

[2] 客户端：不要“提交”表格。调用一个 JS 函数，并在其中创建一个 XmlHttpRequest，并将请求作为 AJAX 请求发送到服务器。当您获得返回值时，检查它并填充您的 HTML 文本区域。

如果您认为此方法适合您并且需要更多详细信息，请告诉我。我在我的许多网站上都这样做。

# php - 我第二次使用 MySQLi 结果为空

> ID：15318386
> 
> 赞同：0
> 
> 时间：2013-03-10T02:56:35.280
> 
> 标签：php, mysql, mysqli

我正在尝试使用第一个查询的结果运行第二个查询，以为刚刚检索到的所有行设置一个标志。我第一次使用结果输出 JSON 时它工作正常，但第二次尝试从中调用`fetch_assoc()`时，数组返回 NULL。

```
 $result = API::$connection->query($query);

        if (!mysqli_error(API::$connection))
        {
            API::setHeader(200);
            // return json encoded results

                        /// This works just fine, outputs JSON
            echo JSONizer::jsonEncodeSqlResultWithKeys( $result, array (
                                                                'pId',
                                                                'sender',
                                                                'receiver',
                                                                'content',
                                                                'notified',
                                                                'opened',
                                                                'time' ) );

            // initial update query
            $query = 'UPDATE messages
                    SET received=1
                    WHERE ';

            // start by cycling through each pId received and tack each onto query
            $counter = 0;

                            // this never runs because the associated array returns NULL now
            while ($row = mysqli_fetch_assoc($result));
            {
                $pId = $row['pId'];

                // concat query
                $query .= 'pId='.$pId;

                // if there's still more to go, tack on OR
                if ($counter++ != count($result))
                {
                    $query .= ' OR';
                }
                else 
                {
                    $query .= ';';
                }

            } 
```

我在调用时尝试过对象和程序风格`fetch_assoc`，但没有任何区别。我尝试将结果复制到另一个变量中使用，但这也是 NULL。为什么这只工作一次，而不是第二次。

# c - while循环内的变量范围

> ID：15318393
> 
> 赞同：6
> 
> 时间：2013-03-10T02:57:23.453
> 
> 标签：c, variables, scope

这可能是我遇到过的最奇怪的事情之一。我没有在 C 语言中编写太多程序，但根据我所知道的情况以及在线检查不同的来源，变量**macroName**和**macroBody**仅在 while 循环的范围内定义。因此，每次循环运行时，我都希望**marcoName**和**macroBody**获得新地址并成为全新的变量。然而，事实并非如此。

我发现即使循环再次运行，两个变量共享相同的地址，这让我对需要检查元素唯一性的链表感到非常头疼。我不知道这是为什么。**每次while循环运行时macroName**和**macroBody**不应该获得全新的地址吗？

我知道这是问题所在，因为我正在打印地址并且它们是相同的。

```
while(fgets(line, sizeof(line), fp) != NULL) // Get new line
{
    char macroName[MAXLINE];
    char macroBody[MAXLINE];

    // ... more code

    switch (command_type)
    {
        case hake_macro_definition:
            // ... more code

            printf("**********%p | %p\n", &macroName, &macroBody);
            break;

        // .... more cases
    }
} 
```

作为我的链表代码一部分的代码。

```
struct macro {
    struct macro *next;
    struct macro *previous;
    char *name;
    char *body;
}; 
```

检查元素是否已存在于链表中的函数。但是由于 *name 具有相同的地址，所以我总是在 if 条件内结束。

```
static struct macro *macro_lookup(char *name)
{
    struct macro *temp = macro_list_head;

    while (temp != NULL)
    {
        if (are_strings_equal(name, temp->name))
        {
            break;
        }    

        temp = temp->next;
    }

    return temp;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T03:11:57.243

这些数组在堆栈上分配：

```
char macroName[MAXLINE];
char macroBody[MAXLINE]; 
```

编译器为您预先分配了*在函数开始时存在的*空间。换句话说，从计算机的角度来看，这些数组的位置与您在函数体顶部的循环体之外定义它们的位置相同。

C 中的范围仅指示标识符在何处可见。因此编译器（而不是计算机）强制执行在循环体之前或之后无法引用的`macroName`语义`macroBody`。但是从计算机的角度来看，这些数组的实际数据在函数开始时就存在，只有在函数结束时才会消失。

如果您要查看代码的程序集转储，您可能会看到您的机器的帧指针减少了足够大的量，以便您的函数[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)为所有局部变量（包括这些数组）留出空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T09:03:28.600

除了 chrisaycock 的回答之外，我还需要提一下：你永远不应该在定义这些变量的函数之外使用指向局部变量的指针。考虑这个例子：

```
int * f()
{
   int local_var = 0;
   return &local_var;
}
int g(int x)
{
   return (x > 0) ? x : 0;
}
int main()
{
   int * from_f = f(); //
   *from_f = 100; //Undefined behavior
   g(15); //some function call to change stack
   printf("%d", *from_f); //Will print some random value
   return 0;
} 
```

实际上，这同样适用于块。从技术上讲，可以在块结束后清除块局部变量。因此，在循环的每次迭代中，旧地址可能是无效的。这是不正确的，因为 C 编译器出于性能原因确实将这些 var 放在同一个地址，但你不能依赖它。

您需要了解的是内存是如何分配的。如果你想实现一个列表，它就是一个不断增长的结构。记忆从何而来？您不能从堆栈中分配太多内存，而且一旦您从函数返回，内存就会失效。因此，您需要从堆中分配它（使用`malloc`）。

# java - 尝试从文本文件中读取，将其存储到 arrayList 并将存储的信息打印到我的屏幕上。为什么我的输出是空的？

> ID：15318400
> 
> 赞同：0
> 
> 时间：2013-03-10T02:58:59.173
> 
> 标签：java, arraylist

想打印出存储的信息。我该如何解决这个问题？

```
public class schoolTimeTable {

    private static ArrayList<String> timesArray = new ArrayList<String>();

    public static void main(String[] args) {

        Scanner scanner = null;

        try {

        File file = new File("C:/Users/Tommy/workspace/Prov/src/TestPaket/text.txt");
        scanner = new Scanner(file);
        while(scanner.hasNextLine()){

            String[] tokens = scanner.nextLine().split("\\s+");

            String[] times = tokens;
            for(String time: times)
            timesArray.add(time);
            System.out.println(timesArray); 

        }} catch (Exception e) {
        // TODO: handle exception
    }

}} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T03:01:10.313

如果您更加关注代码格式和样式，您会做得更好。它对可读性和理解性都非常重要。

catch 块什么也不做。你永远不应该有一个空的 catch 块。始终至少打印堆栈跟踪。

对我来说很好：

```
package cruft;

import java.io.File;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

/**
 * SchoolTimeTable
 * @author Michael
 * @link http://stackoverflow.com/questions/15318400/trying-to-read-from-a-text-file-store-it-into-an-an-arraylist-and-print-the-sto/15318413#15318413
 * @since 3/9/13 10:02 PM
 */
public class SchoolTimeTable {

    private static List<String> timesArray = new ArrayList<String>();

    public static void main(String[] args) {
        try {
            File file = new File("resources/timeTable.txt");
            Scanner scanner = new Scanner(file);
            while (scanner.hasNextLine()) {
                String[] times = scanner.nextLine().split("\\s+");
                for (String time : times) {
                    timesArray.add(time);
                }
                System.out.println(timesArray);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我把这个 timeTable.txt 放在我项目的资源文件中：

```
1
2 3 4
5 6 7 8 
```

这是我运行它时得到的输出：

```
"C:\Program Files\Java\jdk1.7.0_17\bin\java" cruft.SchoolTimeTable
[1]
[1, 2, 3, 4]
[1, 2, 3, 4, 5, 6, 7, 8]

Process finished with exit code 0 
```

这对我来说是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:08:26.237

因为没有打印任何内容，我的假设是文件名不正确，或者 Java 不喜欢它。

仔细检查路径，并尝试用（双）反斜杠替换正斜杠，如下所示：

```
C:\\Users\\Tommy\\workspace\\Prov\\src\\TestPaket\\text.txt 
```

而且，当然，正如其他人所说，将您的`catch`块更改为：

```
catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T03:24:11.187

还是要读取文件？我运行你的代码。是对的。该文件的内容是：

demo1,28,feb-01,true demo2,22,dec-03,false demo3,21,dec-03,false demo4,25,dec-03,true

文件名：Visitor.txt 我改了一点代码：</p>

```
package test;

import java.io.File;
import java.util.ArrayList;
import java.util.Scanner;

public class schoolTimeTable {
    private static ArrayList<String> timesArray = new ArrayList<String>();
    public static void main(String[] args) {
        Scanner scanner = null;
        try {
            File file = new File("d:/Visitor.txt");
            scanner = new Scanner(file);
            while (scanner.hasNextLine()) {
                String[] tokens = scanner.nextLine().split("\\s+");
                String[] times = tokens;
                for (String time : times)
                    timesArray.add(time);
            }
            System.out.println(timesArray);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

输出： [demo1,28,feb-01,true, demo2,22,dec-03,false, demo3,21,dec-03,false, demo4,25,dec-03,true]。

在我看来你的文件格式的内容。您比较文件格式的内容。希望能帮上忙

# css - 如何使用 CSS 控制图像父元素的宽度

> ID：15318404
> 
> 赞同：0
> 
> 时间：2013-03-10T03:00:12.450
> 
> 标签：css, width, fluid-layout

在流畅的设计布局中，我想缩放图像，使它们都具有相同的高度，但可能具有不同的宽度，具体取决于图像纵横比。此外，所有图像都位于锚标记内。在 Mozilla 浏览器中，我遇到锚标记的宽度不会自动调整的问题。例如，如果图像的尺寸为 200x100 像素，锚标签的高度为 50 像素，那么在 Mozilla 中，锚标签的尺寸为 200x50 像素，而不是我想要的 100x50 像素。为了解决这个问题，我的 CSS 应该是什么？谢谢

我的 HTML 是：

```
<a class="testimage"><img src="sliderimages/picture8.jpg"/></a> 
```

CSS是：

```
<style>  
    .testimage {height:10%;display:inline-block;border:1px solid yellow;}
    .testimage img {height:100%;}
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T04:05:24.307

你需要用 JavaScript 做一些简单的计算。这是一个带有 JavaScript 的简单 HTML 页面，供您修改和测试。

```
<!DOCTYPE html>
<html>
<head>
    <title>
        Set Image Height
    </title>
</head>

<body>
    <img src='testimage1.jpg' onload='setImageHeight()'>
    <img src='testimage2.png' onload='setImageHeight()'>

    <script>
        function setImageHeight(event) {
            // Allow for cross-platform differences
            event = event || this.event;
            element = event.target || event.srcElement;

            var temp = new Image(),
                fixedHeight = 50,
                height, width, scaledWidth;

            temp.src = element.src;
            width = temp.width;
            height = temp.height;
            scaledWidth = width * fixedHeight / height;

            element.style.width = scaledWidth + "px";
            element.style.height = fixedHeight + "px";
        }
    </script>
</body>
</html> 
```

这是一个[例子](http://dev.lexogram.com/tests/imageHeight/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:43:22.823

试试这个 .... 将 .testimage 设置为`display: block;` 要指定标签的高度或宽度，您应该将显示应用于块而不是内联块。希望这有效。

# r - 如何在R中修剪一棵树？

> ID：15318409
> 
> 赞同：13
> 
> 时间：2013-03-10T03:00:55.760
> 
> 标签：r, machine-learning, decision-tree, rpart

我正在使用 R 中的 rpart 进行分类。树模型由以下人员训练：

```
> tree <- rpart(activity ~ . , data=trainData)
> pData1 <- predict(tree, testData, type="class") 
```

此树模型的准确度为：

```
> sum(testData$activity==pData1)/length(pData1)
[1] 0.8094276 
```

我阅读了一个通过交叉验证修剪树的[教程：](http://www.statmethods.net/advstats/cart.html)

```
> ptree <- prune(tree,cp=tree$cptable[which.min(tree$cptable[,"xerror"]),"CP"])
> pData2 <- predict(ptree, testData, type="class") 
```

修剪树的准确率仍然相同：

```
> sum(testData$activity==pData2)/length(pData2)
[1] 0.8094276 
```

我想知道我修剪的树有什么问题？以及如何在 R 中使用交叉验证来修剪树模型？谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-10T03:22:00.677

您已使用最小交叉验证错误树。另一种方法是使用在最佳树（您正在选择的树）的 1 个标准误差内的最小树。这样做的原因是，考虑到误差的 CV 估计，1 个标准误差内的最小树在预测方面的表现与最好的（最低 CV 误差）树一样好，但它用更少的“术语”来做到这一点”。

**通过以下方式绘制未**修剪树的成本复杂性与树大小：

```
plotcp(tree) 
```

找到误差最小的树左侧的树，其 cp 值位于误差最小的树的误差条内。

修剪不影响拟合树的原因可能有很多。例如，最好的树可能是算法根据中指定的停止规则停止的树`?rpart.control`。

# r - 从计数创建和矩阵

> ID：15318410
> 
> 赞同：4
> 
> 时间：2013-03-10T03:00:56.987
> 
> 标签：r, loops, matrix, sum

我有一个突变计数矩阵，比如“计数”。该矩阵具有列名 V1、V2、...、Vi、...Vn，其中并非每个“i”都存在。因而它可以跳跃，比如V1、V2、V5说的。此外，大多数列中都有一个 0。

我需要创建一个总和矩阵，称为“答案”，其中元素 i, j 是 i 和 j 处的数字计数的总和。在 i, i 元素它只显示 i 处的计数。

这是一个快速的数据设置。我已经在我的代码中设置了正确的尺寸矩阵，称为“答案”。因此，我需要自动化的是我填写矩阵的最后几行。

```
counts <- matrix(data = c(0,2,0,5,0,6,0), nrow = 1, ncol = 7,    dimnames=list("",c("V1","V2","V3","V4","V5","V6","V7")))

answer <- matrix(data =0, nrow = 3, ncol = 3, dimnames = list(c("V2","V4","V6"),c("V2","V4","V6")))

answer[1,1] <- 2
answer[1,2] <- 7
answer[1,3] <- 8
answer[2,1] <- 7
answer[2,2] <- 5
answer[2,3] <- 11
answer[3,1] <- 8
answer[3,2] <- 11
answer[3,3] <- 6 
```

我知道我可以用 2 个嵌套的 for 循环来做到这一点，但肯定有更好的方法，不是吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T03:12:56.763

这可以通过正确使用`expand.grid`and来完成`rowSums`：

```
n = counts[, counts > 0]
answer = matrix(rowSums(expand.grid(n, n)), nrow=length(n), dimnames=list(names(n), names(n)))
diag(answer) = n 
```

为了展示它是如何工作的，`n`最终会是：

```
V2 V4 V5 
 2  5  6 
```

并且`expand.grid(n, n)`将是：

```
 Var1 Var2
1    2    2
2    5    2
3    6    2
4    2    5
5    5    5
6    6    5
7    2    6
8    5    6
9    6    6 
```

最后一行 ( `diag`) 是必要的，因为否则对角线将是原始向量的两倍（添加`2+2`、`5+5`或`6+6`）。

# php - JSON 整圈 (PHP)

> ID：15318411
> 
> 赞同：0
> 
> 时间：2013-03-10T03:00:55.400
> 
> 标签：php, mysql, json, apache, wampserver

我已经简化为最简单的形式，但仍然在跌跌撞撞……我花了 30 多个小时进行研究和测试。根据所有从未显示超过整个圆 15° 的帖子，这应该很容易。

我想要：

1.  将查询参数（以 JSON 格式）从 Android 手机发送到 WAMP 服务器......这可能与本地 SQLite 表的完整转储一样多，因此查询字符串不会削减它。
2.  让 WAMP 服务器读取 JSON 数据，制定 SQL 查询并提交到 mySQL 数据库
3.  将响应打包为 JSON 数据（从简单的“OK”到完整的表转储）
4.  将响应包返回给安卓手机

这已经是一个功能齐全的WAMP应用了，我想集成Android访问。出于这个原因，我*真的*想避免使用 AJAX，因为我想保持与现有内容的一致性。

我已将其简化为最简单的循环并且遇到了障碍。我正在使用 send.php 将一些 JSON 数据发布到 receive.php。此时，我只需要receive.php读取数据并将其发送回（稍作修改）到send.php

send.php 正在正确读取从 receive.php 发送的库存 JSON。我只是无法得到任何生命迹象，receive.php 甚至可以识别发送给它的 JSON。

*请*不要将我引向 cURL ......从我发现的关于 Android 和 JSON 的所有内容来看，cURL 是一个切线，它将让我回到无功能状态。

阿帕奇 2.2.22、PHP 5.4.3

就像我说的，我已经把它简化为最简单的形式来展示一个完整的圆圈......

发送.php：

```
<?php
$url = "http://192.168.0.102:808/networks/json/receive.php";
$data = array(
        'param1'      => '12345',
        'param2'    => 'fghij'
);
$json_data = json_encode($data);

$options = array(
        'http' => array(
                'method'  => 'POST',
                'content' => $json_data,
                'header'=>  "Content-Type: application/json\r\n" .
                "Accept: application/json\r\n" .
                'Content-Length: ' . strlen($json_data) . "\r\n"
        )
);

$context  = stream_context_create( $options );
$result = file_get_contents( $url, false, $context );

$response = json_decode( $result , true);
echo '[' . $response['param1'] . "]\n<br>";
//THIS WORKS!  send.php displays "Initialized"
?> 
```

接收.php

```
<?php
$newparam = 'Initialized';
//HERE I NEED TO read the JSON data and do something

$data = array(
        'param1'      => $newparam,
        'param2'    => 'pqrst'
);

header('Content-type: application/json');
echo json_encode($data);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T01:17:08.523

正如所有不完整的解释中所述，这实际上很容易......我*终于完成了整个工作*

我选择了简单来证明我可以旅行一圈，现在我已经做到了。

发送.php

```
<?php 
//The URL of the page that will:
//  1\. Receive the incoming data
//  2\. Decode the data and do something with it
//  3\. Package the results into JSON
//  4\. Return the JSON to the originator
$url = "http://192.168.0.102:808/networks/json/receive.php";

//The JSON data to send to the page (above)
$data = array(
        'param1'      => 'abcde',
        'param2'    => 'fghij'
);
$json_data = json_encode($data);

//Prep the request to send to the web site
$options = array(
        'http' => array(
                'method'  => 'POST',
                'content' => $json_data,
                'header'=>  "Content-Type: application/json\r\n" .
                "Accept: application/json\r\n"
        )
);
$context  = stream_context_create( $options );

//Make the request and grab the results
$result = file_get_contents( $url, false, $context );

//Decode the results
$response = json_decode( $result , true);

//Do something with the results
echo '[' . $response['param1'] . "]\n<br>";
?> 
```

接收.php

```
<?php
//K.I.S.S. - Retrieve the incoming JSON data, decode it and send one value 
//back to send.php

//Grab the incoming JSON data (want error correction)
//THIS IS THE PART I WAS MISSING
$data_from_send_php = file_get_contents('php://input');

//Decode the JSON data
$json_data = json_decode($data_from_send_php, true);

//CAN DO:  read querystrings (can be used for user auth, specifying the 
//requestor's intents, etc)

//Retrieve a nugget from the JSON so it can be sent back to send.php
$newparam = $json_data["param2"];

//Prep the JSON to send back
$data = array(
        'param1'      => $newparam,
        'param2'    => 'pqrst'
);

//Tell send.php what kind of data it is receiving
header('Content-type: application/json');

//Give send.php the JSON data
echo json_encode($data);
?> 
```

AND Android 集成...使用 Button.onClickListener 调用

```
public void getServerData() throws JSONException, ClientProtocolException, IOException {
    //Not critical, but part of my need...Preferences store the pieces to manage JSON
    //connections
    Context context = getApplicationContext();
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
    String netURL = prefs.getString("NetworkURL", "");
    //  "http://192.168.0.102:808/networks/json"
    String dataPage = prefs.getString("DataPage", "");
    //  "/receive.php"

    //NEEDED - the URL to send to/receive from...
    String theURL = new String(netURL + dataPage);

    //Create JSON data to send to the server
    JSONObject json = new JSONObject();
    json.put("param1",Settings.System.getString(getContentResolver(),Settings.System.ANDROID_ID));
    json.put("param2","Android Data");

    //Prepare to commnucate with the server
    DefaultHttpClient httpClient = new DefaultHttpClient();
    ResponseHandler <String> resonseHandler = new BasicResponseHandler();
    HttpPost postMethod = new HttpPost(theURL);

    //Attach the JSON Data
    postMethod.setEntity(new ByteArrayEntity(json.toString().getBytes("UTF8")));

    //Send and Receive
    String response = httpClient.execute(postMethod,resonseHandler);

    //Begin reading and working with the returned data
    JSONObject obj = new JSONObject(response); 

    TextView tv_param1 = (TextView) findViewById(R.id.tv_json_1);
    tv_param1.setText(obj.getString("param1"));
    TextView tv_param2 = (TextView) findViewById(R.id.tv_json_2);
    tv_param2.setText(obj.getString("param2"));
    } 
```

# c++ - C+ 对向量元素的各个成员进行排序

> ID：15318412
> 
> 赞同：3
> 
> 时间：2013-03-10T03:01:09.453
> 
> 标签：c++, sorting, stl

我有一个向量

```
struct Data {
    size_t iLo;
    size_t iHi;
}; 
```

我想对 和 的值进行`iLo`单独`iHi`排序，即如果我对`iLo`成员进行排序，则不会触及“iHi”成员。`iLo`s 升序排序，`iHi`s 降序排序。例如：

```
{{1, 3}, {4, 66}, {0, 0}, {0, 1}}; 
```

首先对 s 进行升序排序`iLo`会给我

```
{{0, 3}, {0, 66}, {1, 0}, {4, 1}}; 
```

然后对 s 进行降序排序`iHi`将导致

```
{{0, 66}, {0, 3}, {1, 1}, {4, 0}}; 
```

我想这样做的原因是我正在处理大量数据并且可能没有足够的 RAM 来将原始数组数据拆分为两个新数据。我想先在原地试一试。

我不能使用 Boost，只能使用 c++03。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T04:06:38.163

您必须为您的 编写一个[随机访问迭代器](http://en.cppreference.com/w/cpp/concept/RandomAccessIterator)，`vector<Data>`它返回对 iLo（或 iHi，resp.）的引用。

### 完整示例：

```
#include <vector>
#include <algorithm>
#include <iterator>
#include <functional>
#include <iostream>

using namespace std;

struct Data {
    Data(size_t l, size_t h) : iLo(l), iHi(h) {}

    size_t iLo;
    size_t iHi;
};

// `MyIter` is the base for your iterators that return i->iLo / i->iHi.
template <class Impl> // Impl is the actual iterator type.
struct MyIter : public iterator<random_access_iterator_tag, size_t>
{
    typedef vector<Data>::iterator Base;
    Base base;

    MyIter(Base i) : base(i) {}

    // These are common operators that you have to define in GNU's std::sort.
    // The standard actually requires more operators, see
    // http://en.cppreference.com/w/cpp/concept/RandomAccessIterator

    bool operator !=(const Impl &rhs) const {
        return base != rhs.base;
    }
    bool operator ==(const Impl &rhs) const {
        return base == rhs.base;
    }
    bool operator <(const Impl &rhs) const {
        return base < rhs.base;
    }
    bool operator >(const Impl &rhs) const {
        return base > rhs.base;
    }
    bool operator >=(const Impl &rhs) const {
        return base >= rhs.base;
    }
    bool operator <=(const Impl &rhs) const {
        return base <= rhs.base;
    }
    ptrdiff_t operator -(const Impl &rhs) const {
        return base - rhs.base;
    }
    Impl operator +(ptrdiff_t i) const {
        return base + i;
    }
    Impl operator -(ptrdiff_t i) const {
        return base - i;
    }
    Impl &operator ++() {
        ++base;
        return static_cast<Impl&>(*this);
    }
    Impl &operator --() {
        --base;
        return static_cast<Impl&>(*this);
    }
    Impl &operator +=(size_t n) {
        base += n;
        return static_cast<Impl&>(*this);
    }
    Impl &operator -=(size_t n) {
        base -= n;
        return static_cast<Impl&>(*this);
    }
};

struct MyLoIter : public MyIter<MyLoIter>
{
    MyLoIter(Base i) : MyIter(i) {}

    size_t &operator [](int i) {
        return base[i].iLo;
    }
    size_t &operator *() {
        return base->iLo;
    }
};

struct MyHiIter : public MyIter<MyHiIter>
{
    MyHiIter(Base i) : MyIter(i) {}

    size_t &operator [](int i) {
        return base[i].iHi;
    }
    size_t &operator *() {
        return base->iHi;
    }
};

int main() {
    // I like C++11 a lot better ...
    vector<Data> data;
    data.push_back(Data(1, 3));
    data.push_back(Data(4, 66));
    data.push_back(Data(0, 0));
    data.push_back(Data(0, 1));

    // This is the actual sorting, first the iLo part, then the iHi part.
    // std::less and std::greater are used to sort descending and ascending-
    sort(MyLoIter(data.begin()), MyLoIter(data.end()), less<size_t>());
    sort(MyHiIter(data.begin()), MyHiIter(data.end()), greater<size_t>());

    // Now the test if it worked:
    for (vector<Data>::iterator i = data.begin(); i != data.end(); ++i) {
        cout << i->iLo << "\t" << i->iHi << endl;
    }
    return 0;
} 
```

现场运行：http: [//ideone.com/gr2zSj](http://ideone.com/gr2zSj)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T04:07:36.810

试图哄骗标准库以这种方式进行排序将是一场噩梦。

您最好的选择是复制一个简单的快速排序例程，并根据您的特定目的进行调整。它应该只是关于一页代码。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-10T03:17:36.143

```
struct LoComparator
{
    bool operator()(const Data& d1, const Data& d2)
    {
        return d1.iLo < d2.iLo;
    }
};

struct HiComparator
{
    bool operator()(const Data& d1, const Data& d2)
    {
        return d1.iHi > d2.iHi;
    }
}; 
```

按 iLo 排序：

```
Data d[3] = {{3, 4}, {1, 2}, {5, 6}};
sort(&d[0], &d[3], LoComparator()); 
```

按 iHi 排序：

```
Data d[3] = {{3, 4}, {1, 2}, {5, 6}};
sort(&d[0], &d[3], HiComparator()); 
```

# mouseover - 用javascript鼠标悬停

> ID：15318418
> 
> 赞同：0
> 
> 时间：2013-03-10T03:02:04.153
> 
> 标签：mouseover

我很难通过导航栏让鼠标悬停在 javascript 中工作。我做了一些更改，但仍然无法正常工作。

```
 <div class="left_side">  
   <ul id="nav">
   <li><a href="main2.html">Home</a></li>
   <td
    onmouseover="document.getElementById(
    'b1')src.'button1over.png'"
    onmouseout="document.getElementById(
    'b1')src.'button1up.png'" 
      <li><a href="#">Our Team</a>
     <ul>
     <li><a href="faculty.html">Faculty</a>
     <li><a href="fellows.html">Fellows</a>
     </ul>
    </li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:10:21.947

`b1')src.'button1over`.. 应该`b1').src='button1over`

确保也更正`onmouseout`事件..

# php - PHP：从全局函数访问封闭范围

> ID：15318419
> 
> 赞同：0
> 
> 时间：2013-03-10T03:02:23.480
> 
> 标签：php, scope

我对一些 PHP 代码摸不着头脑。我不知道它是否在逻辑上有效，因为我对 PHP 很陌生，由于语法错误，它还不能执行：`syntax error, unexpected 'use' (T_USE), expecting '{'`

`use`尽管 PHP 版本完全支持它，并且语法错误（据我所知）是正确的，但语法错误仍在发生。

代码检查指定了哪个数据库实现，它会定义它的功能。因为我不能将其他函数返回的函数定义为全局函数，所以我将其存储在变量中，通过全局函数“包装”访问，这些全局函数从外部范围捕获变量，或者至少它们应该这样做。

产生错误的两行已被标记：-

```
function query_escaper($element_escaper) {
    return function($query, $values) use ($element_escaper) {
        return join(array_map(
            function($query_elem, $value) {
                return isset($value)
                    ? $query_elem . $element_escaper($value)
                    : $query_elem
                    ;
            },
            explode('?', $query),
            $values
        ));
    };
}

function define_postgresql_functions() {

    [...]

    $escape_query = query_escaper('pg_escape_literal');

    #
    # XXX The error occurs here :-
    #
    function escape_query() use ($escape_query) {
        return call_user_func_array($escape_query, func_get_args());
    }

    [...]
}

function define_mysql_functions() {

    [...]

    $escape_query = query_escaper(function($str) {
        return use_database(function($database) use ($str) {
            return $database->real_escape_string($str);
        });
    });

    #
    # XXX The same error also occurs here :-
    #
    function escape_query() use ($escape_query) {
        return call_user_func_array($escape_query, func_get_args());
    }

    [...]
}

switch ($database_info['type']) {
case 'postgresql':
    define_postgresql_functions();
    break;
case 'mysql':
    define_mysql_functions();
    break;
default:
    throw new DatabaseNotImplementedException();
} 
```

我正在寻找两种可能的解决方案：要么能够从外部范围捕获这些变量，要么以另一种方式将全局函数定义为从其他函数返回的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:12:01.477

该模式`function\s+\w+`总是在全局范围内声明一个函数，这意味着您必须使用全局语法。这意味着如果您正在创建闭包，则无法命名该函数。所以这是无效的：

```
function escape_query()  use ($escape_query) { 
```

但这会很好用：

```
$escape_function = function() use ($escape_query) { 
```

有几种不同的方法可以实现您想要的。`eval`我想到了，就像在函数中使用静态变量或 OOP 解决方案一样。

我认为 OOP 解决方案可能是最简单的：

```
class Escaper {

    public static $escape_function;
}

// in your function
Escaper::$escape_function = function() use ($escape_query) { //...

// later
Escaper::$escape_function('a','b','c'); 
```

# redis - Redis 获取还是创建？

> ID：15318422
> 
> 赞同：2
> 
> 时间：2013-03-10T03:02:35.437
> 
> 标签：redis

我想使用 Redis 作为随机种子缓存。当我想要一个键的值时，如果还没有，我将生成一个随机字符串并将其存储以供以后重用。

我如何执行 atomic `GET EXISTING OR SET AND RETURN THIS VALUE`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T06:55:46.470

您可以先使用 SETNX 尝试设置值。然后 GET 将为您提供现有值或您尝试设置的新值。

`SETNX key value`

如果您想知道这是否是新值，这可能会返回 0 或 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:12:07.650

似乎没有一个命令可以做到这一点。使用`MULTI`和`WATCH`：

第一的：

```
GET key 
```

如果`null`，那么：

```
WATCH key
MULTI
    SET key value
EXEC 
```

如果`[null]`（表示事务中止），则密钥是在此期间创建的，并且现在必须存在：

```
GET key 
```

# unity3d - 复制 ScriptableObjects

> ID：15318425
> 
> 赞同：4
> 
> 时间：2013-03-10T03:02:52.067
> 
> 标签：unity3d

有没有办法在 ScriptableObjects 中模仿 MonoBehaviour 复制语义？

假设我有这样的 MonoBehaviour：

```
public class DummyClassBehaviour : MonoBehaviour {
    public DummyClass           DummyClassTest;     //ScriptableObject
    public DummyClassBehaviour  DummyBehaviourTest; //Another DummyClassBehaviour
} 
```

还有一个 ScriptableObject：

```
public class DummyClass : ScriptableObject {
    public string Text = "";
} 
```

当我复制（CTRL+D）附加了 DummyClassBehaviour 的 GameObject 时，“DummyBehaviourTest”会按照您的预期复制：如果它在我正在复制的 GameObject 中引用 MonoBehaviour，则复制机制会更新对相同 MonoBehaviour 类型的引用新的游戏对象。如果它引用另一个 GameObject 中的 MonoBehaviour，则该引用保持不变。

另一方面，ScriptableObject 始终引用原始对象。所以我最终得到了*N*个 GameObject，它们都与原始 GameObject 共享相同的 ScriptableObject (DummyClass)。我正在使用 ScriptableObjects 来允许对非 Monobehaviour 数据类进行序列化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:04:23.373

据我所知，如果我错了，请有人纠正我，您不能修改 ScriptableObject 的序列化行为以匹配 MonoBehaviour 的序列化行为。也就是说，如果重复，它应该更新引用。

相反，我选择了一个不太理想的解决方案，但它确实有效。我的班级被分配了一个唯一标识符，该标识符像其他所有内容一样被序列化。我在 DummyBehaviour.Awake() 中使用此 ID 创建一个查找表，然后我可以使用它重新分配我的 DummyClass。

我不会接受我自己的答案，因为我觉得它不能完全回答我原来的问题，但它是相关的：

```
[System.Serializable]
public class DummyClass {
// Unique id is assigned by DummyBehaviour and is unique to the game object
    // that DummyBehaviour is attached to.
public int UniqueID = -1;
public string Text = "";

// Override GetHashCode so Dictionary lookups 
public override int GetHashCode(){
    int hash = 17;
        hash = hash * 31 + UniqueID;
    return hash;
}

    // override equality function, allows dictionary to do comparisons.
public override bool Equals(object obj)
{
    if (object.ReferenceEquals(obj, null))return false;

    DummyClass item = obj as DummyClass;
    return item.UniqueID == this.UniqueID;
}

    // Allow checks of the form 'if(dummyClass)'
public static implicit operator bool(DummyClass a) 
{
    if (object.ReferenceEquals(a, null)) return false;
    return (a.UniqueID==-1)?false:true;
}

public static bool operator ==(DummyClass a, DummyClass b)
{
    if (object.ReferenceEquals(a, null))
    {
         return object.ReferenceEquals(b, null);
    }

    return a.Equals(b);
}
public static bool operator !=(DummyClass a, DummyClass b)
{
    if (object.ReferenceEquals(a, null))
    {
         return object.ReferenceEquals(b, null);
    }
    return !a.Equals(b);
}
} 
```

还有我的 MonoBehaviour：

```
[ExecuteInEditMode]
public class DummyBehaviour : MonoBehaviour {
    public List<DummyClass> DummyClasses = new List<DummyClass>();

    // reassign references based on uniqueid.
    void Awake(){   
        Dictionary<DummyClass,DummyClass> dmap = new Dictionary<DummyClass,DummyClass>();
        // iterate over all dummyclasses, reassign references.
        for(int i = 0; i < DummyClasses.Count; i++){
            DummyClass2 d = DummyClasses[i];
            if(dmap.ContainsKey(d)){
                DummyClasses[i] = dmap[d];
            } else {
                dmap[d] = d;
            }
        }
        DummyClasses[0].Text = "All items same";
    }

    // helper function, for inspector contextmenu, to add more classes from Editor
    [ContextMenu ("AddDummy")]
    void AddDummy(){
        if(DummyClasses.Count==0)DummyClasses.Add(new DummyClass{UniqueID = 1});
        else {
            // Every item after 0 points to zero, serialization will remove refs during deep copy.
            DummyClasses.Add(DummyClasses[0]);
        }
        UnityEditor.EditorUtility.SetDirty(this);
    }
} 
```

# ruby - Ruby TCP 服务器基础知识

> ID：15318427
> 
> 赞同：0
> 
> 时间：2013-03-10T03:02:56.800
> 
> 标签：ruby, sockets, tcpserver

有人可以向我解释这段代码的每个部分在做什么吗？如果有人能给我一步一步的解释，那将会很有帮助。另外，我怎样才能上传文件？我一般如何操作 ruby​​ 服务器？

```
#!/usr/bin/env ruby

require 'socket'
require 'cgi'

server = TCPServer.new('127.0.0.1', 8888)
puts 'Listening on 127.0.0.1:8888'

loop {
  client = server.accept

  first_request_header = client.gets
  resp = first_request_header

  headers = ['http/1.1 200 ok',
             "date: #{CGI.rfc1123_date(Time.now)}",
             'server: ruby',
             'content-type: text/html; charset=iso-8859-1',
            "content-length: #{resp.length}\r\n\r\n"].join("\r\n")
  client.puts headers          # send the time to the client
  client.puts resp
  client.close
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:09:53.663

```
#required gems
require 'socket'
require 'cgi'

#creating new connection to a local host on port 8888
server = TCPServer.new('127.0.0.1', 8888)
puts 'Listening on 127.0.0.1:8888'

loop {
  #looks like a client method call to open the connection
  client = server.accept
  first_request_header = client.gets
  resp = first_request_header

  #setting the request headers
  headers = ['http/1.1 200 ok',
             "date: #{CGI.rfc1123_date(Time.now)}",
             'server: ruby',
             'content-type: text/html; charset=iso-8859-1',
            "content-length: #{resp.length}\r\n\r\n"].join("\r\n")

  #inserts custom client headers into request
  client.puts headers         
  client.puts resp

  #closes client connection to local host
  client.close
} 
```

# javascript - javascript if conditional: object 存在并附加了一个值

> ID：15318428
> 
> 赞同：0
> 
> 时间：2013-03-10T03:03:00.347
> 
> 标签：javascript, syntax, conditional

在我的控制台中出现“分配中无效的左侧”错误。我在这里缺少语法吗？

```
if ($images[next] && images[next].loaded = false){
    //stuff
} 
```

每个条件都通过它自己，但在组合时失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:05:04.260

使用双等号进行比较。或者，您可以只写：

```
var item = $images[next];
if (item && !item.loaded){
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:05:20.513

它应该是

```
if ($images[next] && $images[next].loaded == false){
    //stuff
} 
```

或更好

```
var images = $images[next];
if (images  && images .loaded === false){
    //stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T03:07:20.003

使用单一`=`意味着您正在为变量赋值。对于比较，使用`==`or`===`进行严格相等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T03:58:55.623

正如每个人都已经告诉过您的那样，您应该使用`==`(或`===`) 进行比较。导致错误的原因是赋值运算符`=`的[优先级](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)低于布尔`&&`运算符，与`==`任何其他比较运算符不同。因此，您的表达式被评估为：

```
($images[next] && images[next].loaded) = false 
```

括号中的左侧部分将是`true`或`false`。所以这变成了

```
true = false 
```

或者

```
false = false 
```

两者都不允许，因为您不能将任何东西分配给布尔值（只能分配给变量或对象属性）。因此会抛出*Invalid left-hand side in assignment错误。*

当您使用适当的比较运算符时，优先规则会导致它像这样被评估：

```
$images[next] && (images[next].loaded == false) 
```

这变成`true && true`, or `true && false`, or `false && false`, or `false && true`, 然后最终变成`true`or `false`, 这是 if 语句所期望的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T03:12:39.793

也许平等检查中的“==”而不是“=”会有所帮助

```
if ($images[next] && images[next].loaded == false)
{
    //stuff
} 
```

有关 javascript 比较运算符的列表，请查看[此处](http://www.w3schools.com/js/js_comparisons.asp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-10T03:16:11.040

每个人都会说同样的话：`... .loaded = false`应该`... .loaded == false`。`=`是赋值运算符，`==`是比较运算符..

`if (x = someFunction())`有时，只要 someFunction() 不返回 false 或抛出错误（就像在您的情况下那样），您就会看到哪个将运行代码块。

如果您有任何问题，请告诉我：）

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators)

# java - Java驱动程序？

> ID：15318431
> 
> 赞同：3
> 
> 时间：2013-03-10T03:03:40.700
> 
> 标签：java, driver

我真的对java类和驱动程序感到困惑。驱动程序代码的语法是什么，里面应该和不应该是什么？对于驱动程序，我们可能需要在其中有一个主程序，但是 java 类呢，我们不需要任何......吗？我是否需要为 java 类和驱动程序或仅在驱动程序中拥有这个：

公共静态无效主要（字符串[]参数）{}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T03:13:53.577

从这里引用：

[什么是驱动程序类？（爪哇）](https://stackoverflow.com/questions/765751/what-is-a-driver-class-java)

> “驱动程序类”通常只是包含主程序的类。在实际项目中，您可能经常有许多“驱动程序类”用于测试等等，或者您可以在任何对象中构建一个主程序并通过您的 IDE 选择可运行的类，或者只需指定“java 类名”。

例子：

这不是驱动程序类，因为它不包含任何主要方法。在这种情况下，它有方法“hello”：

```
public class HelloWorld {
  public void hello() {
    System.out.println("Hello, world!");
  }
} 
```

与这个相比 - 这是一个驱动程序类，因为它包含一个主要方法，**并且**是**运行**HelloWorld 的类：

```
public class HelloWorldDriver {
  public static void main(String[] args) {
    HelloWorld sayhello = new HelloWorld();
    sayhello.hello();
  }
} 
```

因此，名称“驱动程序类” - 作为类 HelloWorldDriver “*驱动器*”，或者更确切地说，*控制*类 HelloWorld 的实例化和使用。

# mysql - mySQL 权限错误

> ID：15318435
> 
> 赞同：0
> 
> 时间：2013-03-10T03:04:34.253
> 
> 标签：mysql

当我尝试创建数据库时，会发生这种情况：

```
mysql> CREATE DATABASE testing;
ERROR 1044 (42000): Access denied for user ''@'localhost' to database 'testing' 
```

当我运行 select user(); 有时候是这样的：

```
mysql> select user();
+-------------+
| user()      |
+-------------+
| X@localhost |
+-------------+
1 row in set (0.00 sec) 
```

当我尝试以 root 身份登录时，会发生这种情况：

```
> mysql -u root -p
Enter password: 
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES) 
```

我已经尝试了超过 15 种不同的 GRANT 和 FLUSH PRIVILEGES 方法。包括将命令放在文本文件中并以这种方式进行。我在 Mountain Lion 上使用 mySQL Server 和 Sequal Pro 来管理数据库。

Sequal Pro 告诉我我也不能添加数据库。我试图完全重新安装 mySQL，但这似乎也不起作用。我是 mySQL 的新手，只需要开始创建数据库，在开始项目之前，我正在阅读 Django Book 教程。

我能够访问 mysql 的唯一方法是如果我使用

```
mysql -u X -p 
```

但是，这又导致了我的权限错误。

# c++ - 是否可以重用构造函数？

> ID：15318436
> 
> 赞同：1
> 
> 时间：2013-03-10T03:04:42.077
> 
> 标签：c++, qt, class, object, constructor

我有一个名为 FaultsTablemanager 的类，它有两个构造函数：

```
class FaultsTableManager : public QObject
{
    Q_OBJECT
public:
    FaultsTableManager(MainWindow* mainW,
                       QMutex* mu,
                       QWidget* parentPa,
                       QTableWidget* tabA,
                       QRadioButton* sel1,
                       QRadioButton* sel2,
                       QQueue<RDIU*>* que,
                       QTableWidget* tabDe,
                       QWidget* parentDe,
                       QLabel* nameLab,
                       QLabel* timeLab);

    FaultsTableManager(MainWindow* mainW,
                       QMutex* mu,
                       QWidget* parentPage1,
                       QTableWidget* tabA,
                       QRadioButton* sel1,
                       QRadioButton* sel2,
                       QList<RDIU*>* list1,
                       QList<RDIU*>* list2,
                       QTableWidget* tabDe,
                       QWidget* parentDe,
                       QLabel* nameLab,
                       QLabel* timeLab);
...
} 
```

我想在第二个构造函数中重用第一个构造函数，如下所示：

```
 FaultsTableManager::FaultsTableManager(MainWindow* mainW,
                                           QMutex* mu,
                                           QWidget* parentPa,
                                           QTableWidget *tabA,
                                           QRadioButton *sel1,
                                           QRadioButton *sel2,
                                           QList<RDIU*> *list1,
                                           QList<RDIU*> *list2,
                                           QTableWidget* tabDe,
                                           QWidget* parentDe,
                                           QLabel* nameLab,
                                           QLabel* timeLab)
    {
        FaultsTableManager(mainW,
                           mu,
                           parentPa,
                           tabA,
                           sel1,
                           sel2,
                           NULL,
                           tabDe,
                           parentDe,
                           nameLab,
                           timeLab);
//        table = tabA;
        queue = NULL;
        list = list1;
        errList = list2;
    } 
```

但是如果我留下`table = tabA;`注释的代码行，成员`table`将不会被初始化（以后不能使用）。
所以我认为第一个构造函数的调用不会对对象进行操作，只会新建另一个未存储在我的构造函数中的对象。
但是我在子类中看到了 base calss 的构造函数的调用，它在同一个对象上运行，这就是我使用这种方法的原因。
***那么我可以重用`constructor A`in`constructor B`吗？***如果不是，它似乎太多余了，我相信有更好的方法来解决这种冗余。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:33:16.883

这只能在 C++11 中实现，即便如此，许多编译器还没有实现该特定功能。（GCC 刚刚从 4.7 开始支持它，但我没有亲自测试过）。该功能称为“构造函数委托”或“[委托构造函数](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n1986.pdf)”。

据我所知， Visual Studio [2011](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)和[2012](http://msdn.microsoft.com/en-us/library/vstudio/hh567368.aspx)还不支持它。

您必须使用 Initialize() 函数（可能是私有的）来初始化两个构造函数的公共部分。

请参阅[此处](http://gcc.gnu.org/projects/cxx0x.html)了解 GCC 对 C++11 功能的支持状态。（GCC 最高 4.8，MinGW 现在最高 4.7，所以最新的 MinGW 也有这个功能）。

# ruby - 是否可以分解采用隐式块的方法？

> ID：15318437
> 
> 赞同：1
> 
> 时间：2013-03-10T03:04:52.647
> 
> 标签：ruby

我的最终用途是在 Rails 中，我在其中分配一个实现`each`动作的对象`response.body`。

每个方法都很长，我想分解它。但是由于显式和隐式块之间的性能差异，我想保持块隐式。

如何让分解的方法屈服于原始块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:08:02.143

实际上，在发布我的问题后，我意识到如何做到这一点。答案是使用带有参数的块调用子方法并产生参数：

```
def each
  submethod1 {|out| yield out}
  submethod2 {|out| yield out}
  yield "whatever"
end

def submethod1
  yield "submethod1"
end

def submethod2
  yield "submethod2"
end 
```

# c# - 在 MVC4 中使用递归构建树菜单 - 使用哪种数据结构？

> ID：15318438
> 
> 赞同：1
> 
> 时间：2013-03-10T03:05:01.573
> 
> 标签：c#, asp.net-mvc

我正在使用 MVC4 构建一个处理 Boxes 的应用程序。一个 Box 可以包含多个 Box，并且可能包含一个 Box。菜单应如下所示：

```
> Box 1
> Box 2
   > Box 2.A
   > Box 2.B
   > Box 2.C
      > Box 2.C.1
   > Box 2.D
> Box 3 
```

现在我有以下内容：

```
public object GetTree(Box? box){

   foreach (var box in box.Boxes)
   {
       GetTree(box)
       // append menu item with box.name, box.id pair so a link can get generated
   } 
```

我有点卡住了。菜单将作为对象传递给客户端，客户端将以某种方式将其显示为链接的树形菜单。什么数据结构在这里最合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:04:34.277

## 这是关于递归和正确数据结构的全部内容。

所以这里都是关于递归的。您已经开始实施这种方式，所以这很好。

第一件事。数据结构。要表示树状菜单，您应该构建树状喜欢的对象，因此您必须创建它们的简单图形。你开始得很好。你有一个`Box`对象。现在让我们增强它。创建一个`BoxNode`包含框列表的对象，如下所示：

```
public class BoxNode
{
    public List<Box> BoxChildren 
    {
        get; set;
    }
} 
```

然后`Box`：

```
public class Box
{
    public string Name
    {
        get; set;
    }

    public BoxNode BoxNode
    {
        get; set;
    }
} 
```

现在我们有了基本的数据结构，让我们进入函数：

```
 public static void CreateMenuTree(BoxNode boxNode, string indent)
    {
        foreach (Box box in boxNode.BoxChildren)
        {
            Console.WriteLine(indent + box.Name);

            if (box.BoxNode != null && box.BoxNode.BoxChildren != null && box.BoxNode.BoxChildren.Count > 0)
            {
                CreateMenuTree(box.BoxNode, indent + indent);
            }
        }
    } 
```

在这里，我还创建了一个完全可行的代码：[此问题的 Gist 代码](https://gist.github.com/PeterStegnar/5127896)*

请注意，对于 MVC 场景，您当然将 Console.WriteLine 替换为正确的 url 链接生成，并使用某种 CSS 类进行缩进。但我想你应该明白这一点。

*请注意，这不是生产代码，而是演示代码。

# c# - 如何使用 xpath 提取链接

> ID：15318443
> 
> 赞同：2
> 
> 时间：2013-03-10T03:06:03.307
> 
> 标签：c#, xpath

我正在尝试创建一个应用程序，您可以在其中输入 Web url ( `http://www.explosm.net/comics/3104/`)，它会自动保存一个字符串，其中包含给定 xpath ( `//*[@id="maincontent"]/div[2]/div[2]/div[1]/img`) 时找到的第一个链接，这是我要下载的图片。

老实说，我什至不知道从哪里开始。我已经尝试了`HtmlAgilityPack`和`WebBrowser`课程，但我找不到任何东西可以帮助我理解该做什么以及如何去做。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:14:22.590

*使用HTMLAgilityPack*非常容易。

```
var w = new HtmlWeb();
var doc = w.Load("http://www.explosm.net/comics/3104/");

var imgNode = doc.DocumentNode.SelectSingleNode("//*[@id=\"maincontent\"]/div[2]/div[2]/div[1]/img");

var src = imgNode.GetAttributeValue("src", ""); 
```

该变量`src`将具有值`http://www.explosm.net/db/files/Comics/Matt/Dont-be-a-dickhead.png`。

您所要做的就是下载图像：

```
var request = (HttpWebRequest)WebRequest.Create(src);
var response = request.GetResponse();

var stream = response.GetResponseStream();

//Here you have an Image object
Image img = Image.FromStream(stream);

//And you can save it or do whatever you want
img.Save(@"C:\file.png"); 
```

# javascript - 使线条变长的动画

> ID：15318444
> 
> 赞同：0
> 
> 时间：2013-03-10T03:06:08.253
> 
> 标签：javascript, jquery, html, css

如何在 jquery 中为越来越长的线条设置动画？我正在尝试连接两个 div，当其中一个 div 移动时，我需要这条线是动态的。因此，我需要线路变得更长。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T04:20:23.663

[![](../Images/cac6116f4e2fbd41518b52e91ca4d66f.png)](http://jsfiddle.net/DerekL/UwDgq/)

```
<div id="a"></div>                                <!--div A-->
<div id="b"></div>                                <!--div B-->
<div id="line"></div>                             <!--Line --> 
```

```
$("button").click(function () {
    var a = $("#a"),
        b = $("#b"),
        dW = b.offset().left - (a.offset().left),  //dX
        dH = b.offset().top - (a.offset().top),    //dY
        angle = Math.atan(dH / dW),                //angle
        length = Math.sqrt(dW * dW + dH * dH);     //length in between

    if(dW <0) angle += Math.PI;                    //some Math stuff

    $("#line").css({
        top: a.offset().top,                       //Where the line starts
        left: a.offset().left,
        width: 0,
        rotate: angle + "rad",                 //rotation (prefixes not included)
        transformOrigin: '0px 0px'
    }).animate({
        width: length                              //animation
    }, 3000);
}); 
```

**现场演示：http:** [//jsfiddle.net/DerekL/UwDgq/](http://jsfiddle.net/DerekL/UwDgq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:15:16.323

我假设你的 line 是一个 HTML 元素，即`<div>`或其他东西，所以你可以改变它的`width`属性。因此，通过增加`width`时间来为其设置动画。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T04:10:04.017

你可以试试这个：

```
<!DOCTYPE html>
<html>
<head>
    <title>demo</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" 
    type="text/javascript"></script>
    <style type="text/css">
    .drag{
          position:absolute;
          width:100px; 
          height:100px;
          border:1px solid #96C2F1; 
          background-color: #EFF7FF;
          cursor:move; 
          line-height:100px; 
          text-align:center;
    }
    .one{
        left:100px;
        top:100px;
    }
    .two{
        left:500px;
        top:100px;
    }
    .line{
        position: absolute;
        display: block;
        float: left;
        overflow:hidden;
    }
    </style>
    <script type="text/javascript">
        function drawQLine(x1, y1, x2, y2, color) {
            var wh = (x2 - x1) || 1;
            var hg = Math.abs(y2 - y1) || 1;
            var up = ((y1 - y2) > 0 ? -1 : 1);
            var rate;
            var wm;
            if (wh >= hg) {
                wm = "x";
                rate = wh / hg;
            } else {
                wm = "y"
                rate = hg / wh;
            }
            var srate = rate - Math.floor(rate);
            var sumSrate = 0;
            var xOffer = x1;
            var yoffer = y1;
            var body = $("body");
            $(".line").remove();
            if (wm == "x") {
                for (var i = 0; i < hg; i++) {
                    sumSrate += srate;

                    body.append($("<span class='line' style='margin-left:" + (xOffer - 7) + "px;margin-top:" + (yoffer) + "px;width:" + Math.floor(rate) + "px;height:1px;line-height:1px;background:" + color + ";'></span>"));
                    xOffer += Math.floor(rate);
                    yoffer += up;
                    if (sumSrate >= 1) {
                        body.append($("<span class='line' style='margin-left:" + (xOffer - 7) + "px;margin-top:" + (yoffer) + "px;width:1px;height:1px;line-height:1px;background:" + color + ";'></span>"));
                        sumSrate -= 1;
                        xOffer += 1;
                        yoffer += up;
                    }
                }
            }
            if (wm == "y") {
                for (var i = 0; i < wh; i++) {
                    sumSrate += srate;

                    body.append($("<span class='line' style='margin-left:" + (xOffer) + "px;margin-top:" + (yoffer) + "px;width:1px;height:" + Math.floor(rate) + "px;line-height:" + Math.floor(rate) + "px;background:" + color + ";'></span>"));
                    xOffer += 1;
                    yoffer += Math.floor(rate) * up;
                    if (sumSrate >= 1) {
                        body.append($("<span class='line' style='margin-left:" + (xOffer) + "px;margin-top:" + (yoffer) + "px;width:1px;height:1px;line-height:1px;background:" + color + ";'></span>"));
                        sumSrate -= 1;
                        xOffer += 1;
                        yoffer += up;
                    }

                }
            }
        }

        (function(document) {
            $.fn.Drag = function() {
                var M = false;
                var Rx, Ry;
                var t = $(this);
                t.mousedown(function(event) {
                    Rx = event.pageX - (parseInt(t.css("left")) || 0);
                    Ry = event.pageY - (parseInt(t.css("top")) || 0);
                    t.css("position", "absolute").css('cursor', 'move').fadeTo(20, 0.5);
                    M = true;
                })
                    .mouseup(function(event) {
                    M = false;
                    t.fadeTo(20, 1);
                });
                $(document).mousemove(function(event) {
                    if (M) {
                        t.css({
                            top: event.pageY - Ry,
                            left: event.pageX - Rx
                        });
                        drawConnectLine();
                    }
                });
            }
        })(document);

        function drawConnectLine() {
            var one = $("#divOne");
            var two = $("#divTwo");
            drawQLine(parseInt(one.css("left")) + one.width(),
            parseInt(one.css("top")) + one.height() / 2,
            parseInt(two.css("left")),
            parseInt(two.css("top")) + two.height() / 2,
                "red");
        }

        $(document).ready(function() {
            $("#divTwo").Drag();
            drawConnectLine();
        });
    </script>
</head>
<body>
    <div id="divOne" class="drag one">ONE</div>
    <div id="divTwo" class="drag two">TWO</div>
</body>
</html> 
```

演示：http: [//jsfiddle.net/af3qM/](http://jsfiddle.net/af3qM/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T03:23:03.950

假设您正在`<hr>`为您的行使用 an，或者即使您只是使用 div，您也可以简单地使用 jquery animate：

[http://jsfiddle.net/cd9Xs/](http://jsfiddle.net/cd9Xs/)

# java - 为什么不变性是类中所需的特性？

> ID：15318445
> 
> 赞同：2
> 
> 时间：2013-03-10T03:06:10.573
> 
> 标签：java, immutability

我已经阅读了很多地方，其中写到 java 中的不变性是一个理想的特性。为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T03:12:47.777

不变性使推理对象的生命周期变得更容易。它在多线程程序中特别有用，因为它使线程之间的共享变得更加简单。

一些数据结构假定键或元素是不可变的，或者没有以关键方式改变。例如地图和集合。它们不必是严格不可变的，但如果它们是，它会更容易。

不可变对象的缺点是它使回收它们变得更加困难，并且会显着影响性能。

简而言之，如果性能是一个问题，请考虑可变对象，如果不尽可能使用不可变对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T03:21:44.717

不变性的主要好处是不能“从你下面”改变一个对象。例如，考虑一个作为 Map 键的字符串。如果它是可变的，那么可以插入一个键/值对，然后修改作为键的字符串。这会破坏映射中使用的哈希方案，并导致一些潜在的非常不可预测的操作。

在某些情况下，由于故意滥用，这种可变性可能会导致安全漏洞，但更常见的是它只会导致神秘的错误。并且“防御性”复制可变对象（以避免此类错误）将导致创建更多对象（特别是如果对问题采取公式化方法）。

（另一方面，创建了很多对象，例如，因为当有人附加到字符串时会创建一个新字符串，或者“砍掉”它的一部分，而不是简单地改变现有的字符串，所以这两种方法最终都会导致由于不同的原因，要创建更多的对象。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T03:14:02.797

当您需要知道某个类在您不期望的情况下没有更改时，非常需要不可变性。考虑哈希映射中的键。如果为某个键设置了一个可变对象，然后将其存储在该键的当前哈希值（mod 哈希数组大小）中，当您更改它时会发生什么？哈希发生变化，突然它在错误的位置！你（HashMap）不知道它已经改变了，所以你不知道要更新它的位置，所以下次有人试图查找那个键时，你就找不到它了。不变性消除了这个问题——如果你根据它的哈希把一个对象放在某个地方，你就知道它总是在你期望的地方。

而且，正如在其他地方指出的那样，不可变意味着在不同步的情况下从多个线程并发读取是安全的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T03:31:20.850

在编程中，不可变的类或对象是一个对象，其状态在创建后就不能修改。在某些情况下，即使您可以更改它们的属性（字段），它们仍然被认为是不可变的，但对象性质保持不变。

通常需要不可变对象，原因有 3 个：

1.  线程安全
2.  比可变对象更高的安全性
3.  简单

有一个[参考。](http://www.javapractices.com/topic/TopicAction.do?Id=29)您可以查看以更好地了解 Java 类和对象的不变性

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T03:18:06.933

Effective Java Item 15*不可变类比可变类更容易设计、实现和使用。它们更不容易出错并且更安全。*

# ruby-on-rails - 如何绕过在我的控制器中创建的 nil 对象？

> ID：15318454
> 
> 赞同：-1
> 
> 时间：2013-03-10T03:08:15.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3

所以这是我的控制器`Home#Index`

```
class HomeController < ApplicationController
  def index
    @daily_entries = current_user.daily_entries
    @weekly_entries = current_user.weekly_entries
    @daily_entry = current_user.daily_entries.new
    @weekly_entry = current_user.weekly_entries.new
  end
end 
```

之所以这样，是因为我试图渲染两个表单部分，以便`DailyEntry`在`WeeklyEntry`我的`Home#Index.html.erb`.

但是，一旦页面加载，它会自动实例化每个对象`DailyEntry`以及`WeeklyEntry`所有 nil 值。所以每当我做一个简单的`@daily_entries.each`循环时，它会遇到一个包含很多 nil 值的记录——即使该记录不是`nil`它本身。

像这样：

```
 #<DailyEntry id: nil, breakfast: nil, snack_1: nil, lunch: nil, snack_2: nil, dinner: nil, water_intake: nil, workout: nil, notes: nil, created_at: nil, updated_at: nil, user_id: 1>] 
```

除了删除调用之外，我如何在此页面上`current_user.daily_entries.new`为我的循环绕过这些 nil 对象？`each`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:30:45.290

尝试“自信的代码”方法。在这种特殊情况下，滥用 和 等`to_s`方法`to_i`。示例效果更好：

```
@daily_entries.each do |daily_entry|
  # If it's a String, nothing happens, if it's nil, empty string will be returned.
  string_val = daily_entry.breakfast.to_s

  # If it's a Fixnum, nothing happens, if it's nil, 0 will be returned.
  int_val = daily_entry.id.to_i
end 
```

[与 Avdi Grimm 一起](http://www.youtube.com/watch?v=T8J0j2xJFgQ)观看此视频，它很好地解释了有关自信代码的这些内容。

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:04:25.843

这是我发现的作品：

在我的`HomeController.rb`：

```
@daily_entries = current_user.daily_entries.where(:id == true) 
```

这会过滤掉已初始化但未保存的记录。

# cocos2d-iphone - 在 cocos2d 中创建 CCParallaxNode 的问题？

> ID：15318466
> 
> 赞同：0
> 
> 时间：2013-03-10T03:10:04.397
> 
> 标签：cocos2d-iphone, parallax, ccsprite, initializer

我在我的 GameLayer 中使用 CCParallaxNode 作为滚动背景，我遇到了一堆错误，我不知道为什么。

“初始化器元素不是编译时常量”和“Unk

```
@implementation Background

// Load the sprites for each parallax layer, from background to foreground.
CCSprite* para1 = [CCSprite spriteWithFile:@"color.png"];
CCSprite* para2= [CCSprite spriteWithFile:@"ship-hd.png"];
CCSprite* para3 = [CCSprite spriteWithFile:@"twit.png"];
CCSprite* para4 = [CCSprite spriteWithFile:@"Start.png"];

// Set the correct offsets depending on the screen and image sizes.
para1.anchorPoint = CGPointMake(0, 1);
para2.anchorPoint = CGPointMake(0, 1);
para3.anchorPoint = CGPointMake(0, 0.6f);
para4.anchorPoint = CGPointMake(0, 0);

CGPoint topOffset = CGPointMake(0, screenSize.height);
CGPoint midOffset = CGPointMake(0, screenSize.height / 2);
CGPoint downOffset = CGPointZero;

// Create a parallax node and add the sprites to it.
CCParallaxNode* paraNode = [CCParallaxNode node];
[paraNode addChild:para1 z:1 parallaxRatio:CGPointMake(0.5f, 0) ositionOffset:topOffset];

[paraNode addChild:para2 z:2 parallaxRatio:CGPointMake(1, 0) positionOffset:topOffset];

[paraNode addChild:para3 z:4 parallaxRatio:CGPointMake(2, 0) positionOffset:midOffset];

[paraNode addChild:para4 z:3 parallaxRatio:CGPointMake(3, 0) positionOffset:downOffset];

[self addChild:paraNode z:0 tag:ParallaxSceneTagParallaxNode];

                   // Move the parallax node to show the parallaxing effect.
                   CCMoveBy* move1 = [CCMoveBy actionWithDuration:5 position:CGPointMake(−160, 0)];
                   CCMoveBy* move2 = [CCMoveBy actionWithDuration:15 position:CGPointMake(160, 0)];
                   CCSequence* sequence = [CCSequence actions:move1, move2, nil];

                   CCRepeatForever* repeat = [CCRepeatForever actionWithAction:sequence];
                   [paraNode runAction:repeat];

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T08:24:32.477

您需要将代码包含在 -(id)init 方法中，如下所示：

```
@implementation Background

- (id)init
{
    if (self = [super init]) {
        // Load the sprites for each parallax layer, from background to foreground.
        CCSprite* para1 = [CCSprite spriteWithFile:@"color.png"];
        // ... the rest of your code ... //
    }
    return self;
}

@end 
```

# complexity-theory - 边缘添加的复杂性（平面图）？

> ID：15318469
> 
> 赞同：0
> 
> 时间：2013-03-10T03:11:09.060
> 
> 标签：complexity-theory, graph-theory

我创建了一个在顶点之间添加边的程序。目标是在不交叉的情况下添加尽可能多的边（即平面图）。复杂性是什么？

尝试：由于我使用深度优先搜索，我认为它是 O(n+m)，其中 n 是节点，m 是边缘。

此外，如果我们将边数绘制为 n 的函数，它会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T13:34:30.640

您的第一个问题无法回答，因为您没有描述算法。

对于第二个问题，任何具有 v ≥ 3 个顶点的最大平面图都恰好有 3v - 6 条边。

# visual-studio-2010 - 从 Visual Studio 调试加载一个 excel 插件 xll

> ID：15318477
> 
> 赞同：1
> 
> 时间：2013-03-10T03:12:48.150
> 
> 标签：visual-studio-2010, excel, visual-c++, xll

我创建了一个 excel 插件的调试版本，我们称之为 myaddin.xll。当我打开一个 excel 实例并将 myaddin.xll 添加到其中时，我得到了预期的结果。但是当我从 Visual Studio 环境中点击调试时，myaddin.xll 会尝试打开并给出“此程序不能处于 dos 模式”错误。

对于我开发的其他 excel 插件，我没有这个问题。此特定插件突然出现此问题。“dos 模式...”错误通常在缺少某些内容时发生。显然插件没有任何缺失的组件，因为它在 excel 中打开。但是当我尝试从 Visual Studio 中打开时，某些组件会丢失。我的问题是如何找出导致错误的原因并修复它。

当我点击调试时，excel 打开，然后弹出“你的文件 myaddin.dll 的格式与文件扩展名指定的格式不同......”当我点击确定时，我在电子表格中得到垃圾字符.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-14T03:25:20.973

您需要将 Visual Studio 配置为：1）运行 Excel 2）加载您的 .xll 和 3）添加您的 dll 依赖项路径（右键单击 projet-“配置属性”->“调试”）：

[![Visual Studio 调试配置](../Images/0362d4be450d57d559ab1eeee12b69be.png)](https://i.stack.imgur.com/t9c9I.png)

- 不要忘记将 dll 的扩展名（“配置属性”->“常规”）切换为 .xll。

-不要错过有关 x64 位与 32 位的 Govert（[从 Visual Studio 调试加载 excel 插件 xll](https://stackoverflow.com/questions/15318477/loading-a-excel-addin-xll-from-visual-studio-debug#comment21629846_15318477)）评论。

# php - SELECT SUM() 与 mysql 中的条件

> ID：15318481
> 
> 赞同：0
> 
> 时间：2013-03-10T03:13:30.943
> 
> 标签：php, mysql

假设我有

```
SELECT `Type`, `Originating Country Code`,`Originating Currency Code`, SUM(`Principal Amount`) as Total 
FROM `colab` 
WHERE (`Destination Country Code`='PH' 
    AND `Destination Currency Code`='PHP'
    AND `Type` = 'PAID') || (`Destination Country Code`='PH' 
    AND `Destination Currency Code`='USD'
    AND `Type`= 'PAID')
    GROUP BY `Type` 
```

工作正常并返回true，请参见下文

```
country_code | Currency_Code  |   Type    |  Principal

=======================================================
| PH         |   PHP          |    PAID   |    200
======================================================= 
```

我的问题是我想将货币的总本金与美元值分开。请查看我的数据库中的记录

```
country_code | Currency_Code  |   Type    |  Principal

=======================================================
| PH         |   PHP          |    PAID   |    100
| PH         |   USD          |    PAID   |    100
======================================================= 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T03:17:06.500

试试这个查询：

```
SELECT `Currency_Code`, SUM(`Principal Amount`) as Total 
FROM `table`
GROUP BY `Currency_Code` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:18:40.253

你可以这样使用`GROUP BY`：

```
SELECT `Currency_Code`, SUM(`Principal Amount`) as Total 
FROM `table` 
WHERE `Country Code`='PH'
    AND `Type` LIKE '%W%'
GROUP BY `Currency_Code` 
```

如果要添加更多条件，只需使用or在`WHERE`子句中添加更多部分，例如：`AND``OR`

```
SELECT `Currency_Code`, SUM(`Principal Amount`) as Total 
FROM `table` 
WHERE `Country Code`='PH'
    AND `Type` LIKE '%W%'
    AND `Currency_Code` IN('USD', 'CAD', 'YEN')
    AND `Principal_Amount` > 10
GROUP BY `Currency_Code` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T03:17:53.720

你需要使用`GROUP BY`

IE

```
SELECT `Currency Code`, SUM(`Principal Amount`) as Total 
FROM `table` 
WHERE `Country Code`='PH' 
    AND `Type` LIKE '%W%'
GROUP BY `Currency Code` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T03:24:30.020

您不能根据您的要求更改查询吗？我的意思是根据您的预期结果，我推断您需要基于 Type 或 country_code 的结果，因此`Currency Code`从查询中删除“AND ='PHP'”将为您提供预期的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T03:31:13.450

将您的条件分解为子查询并加入它。只需添加任意数量的规则即可。

```
SELECT `Country Code`, `Currency Code`, `Type`,
       SUM(`Principal Amount`) as Total 
FROM `table` 
JOIN (
    SELECT 'PH' as a, 'PHP' as b, '%W%' as c
    UNION SELECT 'PH', 'USD', '%W%'
    UNION SELECT 'PY', 'PYC', '%H%'
) AS criteria
    ON (`table`.`Country Code` = criteria.a and
        `table`.`Currency Code` = criteria.b and
        `table`.`Type` like criteria.c)
GROUP BY `Country Code`, `Currency Code`, `Type` 
```

# php - Highstock 未显示所有系列

> ID：15318488
> 
> 赞同：0
> 
> 时间：2013-03-10T03:14:40.037
> 
> 标签：php, highcharts, highstock

我通过 PHP 传递 Highstock/Highcharts 三个独立的数据系列，由于某种原因，加载图表时只显示一个系列。以下是我的 HTML 输出现在的样子：http: [//bit.ly/15D3Dhi](http://bit.ly/15D3Dhi)，这是我的完整 PHP 代码的样子：

```
date_default_timezone_set('America/Los_Angeles');

$stocks = array('MSFT' => 'http://ichart.finance.yahoo.com/table.csv?s=MSFT', 'AAPL' => 'http://ichart.finance.yahoo.com/table.csv?s=AAPL', 'FB' => 'http://ichart.finance.yahoo.com/table.csv?s=FB', 'ZNGA' => 'http://ichart.finance.yahoo.com/table.csv?s=ZNGA');
$stocks_data = array();

foreach ($stocks as $key=>$stock) {
    $fh = fopen($stock, 'r');
    $header = fgetcsv($fh);

    $varname = $key . '_data';

    $$varname  = array();
    while ($line = fgetcsv($fh)) {
        ${$varname}[count($$varname)] = array_combine($header, $line);
    }

    fclose($fh);
}

foreach($MSFT_data as $val){
    $MSFT[]   = array((strtotime($val['Date']) * 1000), ((float)$val['Close']));
}
$MSFT = json_encode($MSFT);

foreach($AAPL_data as $val){
    $AAPL[]   = array((strtotime($val['Date']) * 1000), ((float)$val['Close']));
}
$AAPL = json_encode($AAPL);

foreach($FB_data as $val){
    $FB[]   = array((strtotime($val['Date']) * 1000), ((float)$val['Close']));
}
$FB = json_encode($FB);

?>
<html>
    <head>
        <title>
            Highcharts + PHP + Stock Data
        </title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">
        $(function() {
            chart = new Highcharts.StockChart({
                    chart: {
                        renderTo: 'container'
                    },

                    rangeSelector: {
                        selected: 4
                    },

                    yAxis: {
                        labels: {
                            formatter: function() {
                                return (this.value > 0 ? '+' : '') + this.value + '%';
                            }
                        },
                        plotLines: [{
                            value: 0,
                            width: 2,
                            color: 'silver'
                        }]
                    },

                    plotOptions: {
                        series: {
                            compare: 'percent'
                        }
                    },

                    tooltip: {
                        pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
                        valueDecimals: 2
                    },

                    series: [{
                name: 'MSFT',
                data: <?php echo $MSFT; ?>
            }, {
                name: 'AAPL',
                data: <?php echo $AAPL; ?>
            }, {
                name: 'FB',
                data: <?php echo $FB; ?>
            }]
                });     
        });
        </script>
    </head>
    <body>
        <script src="http://code.highcharts.com/stock/highstock.js"></script>
        <script src="http://code.highcharts.com/stock/modules/exporting.js"></script>

        <div id="container" style="height: 500px; min-width: 600px"></div>
    </body>
</html> 
```

谁能看看我的代码，看看为什么只显示一个系列？如果您查看我的 HTML 输出的来源，所有数据似乎都以相同的方式传递，所以我不清楚为什么只显示一个系列。

谢谢，如果您有任何问题或需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:20:31.067

看了一下，第一感觉就是代码很干净，但是有一个JS错误：

```
Highcharts error #15: www.highcharts.com/errors/15
Title: Highcharts expects data to be sorted 
```

然后我注意到 FB 是唯一出现的，但是扩大日期范围可以让你看到 FB 和另一个系列，所以 Y 轴是罪魁祸首。

一时兴起，我决定先修复 JS 错误，然后 Y 轴就自行解决了。所以看起来JS错误是罪魁祸首。

已编辑：根据 585connor 的建议，使用更快的 array_reverse 而不是 array_unshift：

```
foreach($MSFT_data as $val){
    $MSFT[] = array((strtotime($val['Date']) * 1000), ((float)$val['Close']));
}
$MSFT = json_encode(array_reverse($MSFT));

foreach($AAPL_data as $val){
    $AAPL[] = array((strtotime($val['Date']) * 1000), ((float)$val['Close']));
}
$AAPL = json_encode(array_reverse($AAPL));

foreach($FB_data as $val){
    $FB[] = array((strtotime($val['Date']) * 1000), ((float)$val['Close']));
}
$FB = json_encode(array_reverse($FB));

foreach($ZNGA_data as $val){
    $ZNGA[] = array((strtotime($val['Date']) * 1000), ((float)$val['Close']));
}
$ZNGA = json_encode(array_reverse($ZNGA)); 
```

# c++ - 未初始化的字符

> ID：15318492
> 
> 赞同：1
> 
> 时间：2013-03-10T03:15:18.257
> 
> 标签：c++

我正在阅读我的一本编程书籍中用于解析 CSV 文件的 C++ 类。我主要用 C# 编写工作，不经常与 C++ 代码交互。其中一个函数 getline 使用了一个未初始化的 char 变量，我很困惑它是否是一个错字。

```
// getline: get one line, grow as needed
int Csv::getline(string& str)
{
    char c;

    for (line = ""; fin.get(c) && !endofline(c); )
        line += c;
    split();
    str = line;
    return !fin.eof();
} 
```

`fin`是一个 istream。我正在阅读的文档显示了`get (char& c);`正在传递引用的函数，但是返回了流中的哪个字符？的初始值是`c`多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:19:00.163

的初始值`c`是未定义的，但它的初始值是什么并不重要，`c`因为调用`get`将设置该值。由于and运算符的左侧后面有一个[序列点](https://stackoverflow.com/a/628554)，我们知道 will 的所有副作用[都已](http://en.wikipedia.org/wiki/Sequence_point)生效，并且将看到 的修改值。`||``&&``get``endofline``c`

# php - 会话正常运行，未设置

> ID：15318495
> 
> 赞同：0
> 
> 时间：2013-03-10T03:15:40.340
> 
> 标签：php, session

我有一个索引页面，我可以将用户发送到另一个 url，用户可以在这里发表评论，当他发表评论时，他被发送到 insert_comment.php，如果一切都成功，则设置为：

```
 $success = "Your comment has been added";
 $_SESSION['success'] = $success; 
```

如果我之后回显它，它的设置和一切都很好

现在我将用户重定向到相同的 URL

```
header("Location: http://mydomain.com/post/?post=". $url_from); // send back 
```

这个 url 调用这个函数

```
<?php 
fetch_for_inside($_SESSION['success']); // I pass the success session to the function
unset($_SESSION['success']); // unset
?> 
```

从函数内重新创建所有其他内容，然后我在函数内拥有它

```
if (isset($success_session)) {

   echo '
             <div class="info">
               '. $success_session .'
              </div>
        ';
}; 
```

这是在函数内，并且函数确实得到了

```
 function fetch_for_inside($success_session) 
```

作为参数，但变量为空？

我愿意

```
<?php session_start() ?> 
```

在[http://mydomain.com/post/?post=](http://mydomain.com/post/?post=) "。$url_from

我在函数内部做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:31:25.560

在开始会话之前未设置变量 $_SESSION。所以一定要打电话

```
<?php session_start() ?> 
```

在调用 fetch_for_inside($_SESSION['success']) 之前一次。

[这里](http://php.about.com/od/advancedphp/ss/php_sessions.htm)有一篇简短的文章，介绍了 PHP 会话的基础知识

跟踪脚本怪异行为的一个好方法是使用带有调试器的 PHP IDE，例如带有 Xdebug的[NetBeans](http://netbeans.org/kb/docs/php/debugging.html#howDebuggerWorks)

# visual-studio-2010 - 我们可以模拟 Windows 用户访问 TFS 或 TFS Web 吗？

> ID：15318497
> 
> 赞同：2
> 
> 时间：2013-03-10T03:15:51.803
> 
> 标签：visual-studio-2010, tfs

是否可以模拟 Windows 用户进行 TFS 或 TFS Web 访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:30:45.000

对的，这是可能的。你会想做这样的事情：

```
NetworkCredential serviceUser = new NetworkCredential(username, password, domain);
ICredentialsProvider TfsProxyCredentials = new NetworkCredentialsProvider(serviceUser);
Uri tpcUri = new Uri("http://yourserver:8080/tfs/yourCollectionName");
TfsTeamProjectCollection tpc = new TfsTeamProjectCollection(tpcUri, serviceUser);

// Get the TFS identity management service
IIdentityManagementService ims = tpc.GetService<IIdentityManagementService>();

// Look up the user that we want to impersonate
TeamFoundationIdentity identity = ims.ReadIdentity(IdentitySearchFactor.AccountService, userToImpersonate, MembershipQuery.None, ReadIdentityOptions.None);

TfsTeamProjectCollection impersonatedCollection = new TfsTeamProjectCollection(tpcUri, serviceUser, TfsProxyCredentials, identity.Descriptor);

return impersonatedCollection; 
```

请注意，**服务用户**必须具有代表其他用户执行操作的权限。您的***TFSService***通常具有该特权。

# jquery - 如何使用 jjqueryscrollto 插件？

> ID：15318500
> 
> 赞同：0
> 
> 时间：2013-03-10T03:16:20.100
> 
> 标签：jquery

我正在尝试使用这个插件。我怎么用这个？这些例子对使用它不是很清楚。

有人可以告诉我如何正确使用这个插件吗？[插件](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)JqueryScrollto

我尝试了如下所示的示例：

```
<li><a title="$(...).scrollTo( 'li:eq(14)', 800 );" id="relative-selector" href="#">Relative selector</a></li>

<div id="pane-target" class="pane">
    <ul class="elements" style="height:1011px; width:1820px;">
        <li>
            <p>0</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>1</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>2</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>3</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>4</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>5</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>6</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>7</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>8</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>9</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>10</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>11</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>12</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>13</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>14</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>15</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>16</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>17</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>18</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>19</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>20</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>21</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>22</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>23</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>24</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>25</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>26</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>27</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>28</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
        <li>
            <p>29</p><a href="#" title="$(...).scrollTo( 0, 800, {queue:true} );" class="back">go back</a>
        </li>
    </ul>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:33:10.377

尝试：

```
$("ul li a.back").click(function () {
    $.scrollTo(0, 800, {
        queue: true
    });

    return false;
}); 
```

[在这里](http://jsfiddle.net/88JxN/1/)提琴

# java - Android-将一个字符串拆分为多个字符串

> ID：15318501
> 
> 赞同：-1
> 
> 时间：2013-03-10T03:16:27.120
> 
> 标签：java, android, string, split

如标题所述。好的，例如，我想做一个 Pig Latin 转换器。所以，用户在文本框中输入了一些东西（不管它叫什么）。然后，我将其转换为字符串。现在，我需要将单词的第一个字母删除到末尾，然后添加“ay”。但是，如果字符串是一个句子，它只会将第一个单词的第一个字母移动到最后一个单词的最后一个字母。我需要它为字符串中的每个单词执行此操作。所以我需要一种方法来拆分每个单词的字符串，然后对于每个单词，执行将其转换为猪拉丁语的方法，元音除外。所以，我真正需要的只是拆分每个单词并以某种简单的方式引用它。我可能不得不使用 for 循环。我只是不确定如何。我想我可以做剩下的。这只是其中的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:19:11.690

用于`String.split(" ")`将其拆分为单词，然后对单个单词执行您需要执行的操作。

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String))

例子：

```
ArrayList<String> words = new ArrayList<String>(Arrays.asList(sentence.split(" ")));
ArrayList<String> convertedWords = new ArrayList<String>();
for (String word : words) {
    convertedWords.add(convertToPigLatin(word));
} 
```

# scala - 我可以在案例类的匹配中使用抽象类型吗？

> ID：15318502
> 
> 赞同：1
> 
> 时间：2013-03-10T03:16:28.623
> 
> 标签：scala, pattern-matching, case-class

或者，换句话说：我可以通过匹配来验证元组中的元素是否属于同一个案例类，尽管它们的字段（参数）中有不同的值？有没有与下面的**case[T]**等价的东西？

```
sealed abstract class RootClass
case class ChildClassX(valuex: Boolean) extends RootClass
case class ChildClassY(valuey: Boolean) extends RootClass
// and other case classes here...

object Foo {
def compare(a: RootClass, b: RootClass) = {
    (a, b) match {
       case[T] (T(a), T(b)) => a == b
       case _ => throw Exception("a and b should be of same child classes.")
    }
} 
```

我希望我不必这样做：

```
object Foo {
def compare(a: RootClass, b: RootClass) = {
    (a, b) match {
       case (ChildClassX(a), ChildClassX(b)) | (ChildClassY(a), ChildClassY(b)) | (ChildClassZ(a), ChildClassZ(b)) | etc. => a == b
       case _ => throw Exception("a and b should be of same child classes.")
    }
} 
```

相关： [匹配](https://stackoverflow.com/questions/13039472/case-classes-matching-in-scala)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:44:09.133

我能想到的最合理的解决方案是简单地比较这两个项目的类。

```
(a, b) match {
  case (x,y) if x.getClass == y.getClass => "matching classes"
  case _ => "no match"
} 
```

我不知道有任何结构可以按照您描述的方式工作，例如`case[T]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:07:55.280

我猜这将是一个解决方案 - 如果它真的只是关于类：

```
object Foo {
  def compare[A,B](a: A, b: B) =
    if (a.getClass.getSuperclass != b.getClass.getSuperclass)
      throw new MatchError("a and b should be of same child classes.")
    else (a.getClass == b.getClass)
} 
```

不涉及匹配...也许有人有更优雅的解决方案？但这可能是最短的...

示例测试代码：

```
object ObjCmp extends App {
  case object X
  val p: Product = ChildClassX(true)
  println(Foo.compare(ChildClassX(true), ChildClassX(false)))
  println(Foo.compare(ChildClassX(true), ChildClassY(false)))
  println(Foo.compare(ChildClassX(true), p))
  println(Foo.compare(ChildClassX(true), X))
} 
```

印刷：

```
true
false
true
Exception in thread "main" scala.MatchError: a and b should be of same child classes. 
```

# android - 编写在 Android 和桌面上运行的测试

> ID：15318504
> 
> 赞同：2
> 
> 时间：2013-03-10T03:16:52.580
> 
> 标签：android, testing, junit, libgdx

最近我注意到我的 Android 应用程序中的一个错误，当我在桌面上运行相同的代码时不会发生该错误（因为该应用程序是在 libgdx 之上编写的，99% 的代码在桌面和 Android 上是相同的。）我决定通过编写一些单元测试来探索原因。但是，虽然测试在桌面上运行良好，但当我尝试在 Android 上运行测试时出现“无法启动测试”错误：

```
[2013-03-09 19:06:45 - zzz-test-android] Installing zzz-test-android.apk...
[2013-03-09 19:06:48 - zzz-test-android] Success!
[2013-03-09 19:06:48 - zzz-test-android] Launching instrumentation android.test.InstrumentationTestRunner on 015d15b51d30180b
[2013-03-09 19:06:48 - zzz-test-android] Failed to launch test 
```

我的项目在 Eclipse 中设置的方式是我有两个项目：一个“zzz-test”，其中包含测试类和 JUnit3 库。然后是第二个“zzz-test-android”项目（通过“New Android Test Project”创建），它依赖于 zzz-test。

关于我可能做错了什么的任何想法，或者至少是一种获取可能更有帮助的错误消息的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T14:19:24.213

它可能与清单文件中缺少的一些权限有关吗？

# actionscript-3 - 离开阶段 AS3 时从数组中移除对象

> ID：15318510
> 
> 赞同：0
> 
> 时间：2013-03-10T03:17:31.077
> 
> 标签：actionscript-3, flash

我有一个 for 循环来检测敌人是否击中子弹或玩家。那些命中测试工作正常，但是当敌人离开舞台时，我不知道如何将敌人从阵列中移除。

这是for循环

```
for (var i:int = _enemies.length - 1; i >= 0; i--){
    for(var j:int = _bullets.length - 1; j >= 0; j--){
        if(_bullets[j] != null && _enemies[i] != null){
            //Check if bullet hits enemy
           if(_bullets[j].hitTestObject(_enemies[i])){
                //Tells enemy he's hit
                if (_enemies[i] != null && _bullets[j] != null){
                      _enemies[i].isHit(_bullets[j].getType());

                    if(_enemies[i].getHealth() <= 0){
                         _enemies.splice(i, 1);
                    }
                 }

                 //removes bullet
                if(_bullets[j] != null){
                    if (_bullets[j].parent) {
                        _bullets[j].parent.removeChild(_bullets[j]);
                        _bullets.splice(j, 1);
                    }
                }  
                if(_bullets[j] != null){
                   if(_bullets[j].x > _stage.stageHeight){
                        if (_bullets[j].parent) {
                             _bullets[j].parent.removeChild(_bullets[j]);
                             _bullets.splice(j, 1);
                        }
                   }
                   else{
                       _bullets.splice(j, 1);
                   }
                }
            }

            //Check if player hit
            else if(_enemies[i] != null && _player != null){
                if(_enemies[i].hitTestObject(_player)){
                    if (_enemies[i] != null){
                       _enemies[i].isHit("player");
                       _enemies.splice(i, 1);
                    }
                    else if (_enemies[i] == null){
                       _enemies.splice(i, 1);
                    }
                }
             }

             if (_enemies[i] != null){
                 if(_enemies[i].isDead == true){
                     _enemies.splice(i, 1);
                  }
              }
              else if(_enemies[i] != null){
                 if(_enemies[i].x < 0){
                     _enemies.splice(i, 1);
                 }
              }

              if(_stage.contains(_enemies[i])){
              }
              else{
                 _enemies.splice(i, 1);
              }
          }
      }
 } 
```

_stage 是来自主类的阶段的引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:27:39.337

您正在删除项目符号

```
_bullets[j].parent.removeChild(_bullets[j]); 
```

相似地

```
_enemies[i].parent.removeChild(_enemies[i]); 
```

当对象 x 或 y 属性超出舞台边界时有条件地使用它

例如，假设敌人的坐标从 0,0 开始

```
 // _enemies[i].x > stage.stageWidth
   // _enemies[i].y > stage.stageHeight
   // _enemies[i].x +_enemies[i].width  < 0
   // _enemies[i].y + _enemies[i].height < 0 
```

* * *

尽管更好的方法是向敌人类添加一个方法，该方法首先删除其显示列表中的每个子项。之后，您可以将它从舞台上移除，最后它是数组中的引用。

要删除数组引用，只需将数组元素设置为 null，

```
_enemies[i] = null; 
```

垃圾收集器将负责从内存中删除未引用的对象。

# java - 得到 Nullpointer 异常不知道为什么

> ID：15318513
> 
> 赞同：2
> 
> 时间：2013-03-10T03:17:51.130
> 
> 标签：java, android, exception, timer

这是被调用的代码：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    super.onStartCommand(intent, flags, startId);

    context=this;
    Timer timer=new Timer();
    TimerTask task=new TimerTask() {

        @Override
        public void run() {
            MyLocation myLocation=new MyLocation();
            try {
                MyLocation.getLocation(context, new MyLocationListener() {

                    @Override
                    public void gotLocation(Location location) {
                        SharedPreferences pref=getSharedPreferences(Utilities.USER_PREF, MODE_PRIVATE);
                        SharedPreferences.Editor editor=pref.edit();
                        double lat=location.getLatitude();
                        double lon=location.getLongitude();
                        editor.putString("lat", lat+"");
                        editor.putString("lon", lon+"");
                        Geocoder coder=new Geocoder(MyLocationService.this);
                        try {
                            List<Address> addresses=coder.getFromLocation(lat, lon, 1);
                            String address=addresses.get(0).getAddressLine(0)+","+addresses.get(0).getAdminArea();
                            editor.putString("address", address+"");
                            editor.commit();

                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                            editor.commit();
                        }

                    }
                });
            } catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }

        }
    };
    timer.schedule(task, 1000);

    return Service.START_STICKY;
} 
```

这是抛出的异常：

```
03-10 03:01:25.721: E/AndroidRuntime(912): FATAL EXCEPTION: Timer-0
03-10 03:01:25.721: E/AndroidRuntime(912):  at com.barkleyandpaws.services.MyLocationService$1.run(MyLocationService.java:78)
03-10 03:01:25.721: E/AndroidRuntime(912): java.lang.NullPointerException 
```

我只是不确定发生了什么......我非常感谢您可能拥有的任何见解。代码的目的是启动一个服务和计时器，该服务和计时器获取周期性位置信息并将其存储在变量中，其他方法使用这些变量在地图上显示或按距离对信息进行排序。

这是 MyLocationService.java 的完整代码

```
package com.barkleyandpaws.services;

import java.io.IOException;
import java.util.List;
import java.util.Timer;
import java.util.TimerTask;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.os.IBinder;
import android.util.Log;

import com.barkleyandpaws.MyLocation;
import com.barkleyandpaws.MyLocation.MyLocationListener;
import com.barkleyandpaws.utils.Utilities;

public class MyLocationService extends Service {

    Context context;

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

//  @Override
//  public void onCreate() {
//      //Log.i(XXX.LOG, "onCreate");
//      super.onCreate();
//  }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);

        context=this;
        Timer timer=new Timer();
        TimerTask task=new TimerTask() {

            @Override
            public void run() {
                MyLocation myLocation=new MyLocation();         
                try {
                    MyLocation.getLocation(context, new MyLocationListener() {

                        @Override
                        public void gotLocation(Location location) {
                            SharedPreferences pref=getSharedPreferences(Utilities.USER_PREF, MODE_PRIVATE);
                            SharedPreferences.Editor editor=pref.edit();
                            double lat=location.getLatitude();
                            double lon=location.getLongitude();
                            editor.putString("lat", lat+"");
                            editor.putString("lon", lon+"");
                            Geocoder coder=new Geocoder(MyLocationService.this);
                            try {
                                List<Address> addresses=coder.getFromLocation(lat, lon, 1);
                                String address=addresses.get(0).getAddressLine(0)+","+addresses.get(0).getAdminArea();
                                editor.putString("address", address+"");
                                editor.commit();

                            } catch (IOException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                                editor.commit();
                            }

                        }
                    });
                } catch (Exception e) {
                    // TODO: handle exception
                    e.printStackTrace();
                }

            }
        };
        timer.schedule(task, 1000);

        return Service.START_STICKY;
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

} 
```

# java - Java，检查两个字符数组是否相等

> ID：15318516
> 
> 赞同：0
> 
> 时间：2013-03-10T03:17:56.073
> 
> 标签：java

我在 Java 中有两个字符数组：

`orig_array`和`mix_array`。我需要检查它们是否不相等。

这是我到目前为止所拥有的：

```
sample data
orig_team=one
mix_team=neo

while(!Arrays.equals(mix_team, orig_team))
{

    if (Arrays.equals(mix_team, orig_team))
    {

        System.out.println("congradulations! you did it");
        System.exit(0);
    }

    else {

        System.out.println("enter the index");
        Scanner scn = new Scanner(System.in);
        int x = scn.nextInt();
        int y = scn.nextInt();
        char first=mix_team[x];
        char second=mix_team[y];
        mix_team[x]=second;
        mix_team[y]=first;
        for (int i = 0; i < mix_team.length; i = i + 1) 
        {
            System.out.print(i);  
            System.out.print(" ");
        }
        System.out.println();
        System.out.println(mix_team);
    }
} 
```

如何确定两个数组是否相等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T03:33:14.653

循环的`while`块仅在两个数组*不*相等时执行，因此以相同的相等性检查开始该块是没有意义的。换句话说，该行：

```
if (Arrays.equals(mix_team, orig_team)) 
```

……永远都是`false`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T03:33:43.830

你基本上有以下循环：

```
while (something) {
    if (! something) {
        code();
    }
} 
```

循环内的代码只有在评估为`while`时才会运行。因此， 的值将始终为 false，并且语句的内容将不会运行。`something``true``!something``if`

相反，请尝试：

```
while (!Arrays.equals (mix_team, orig_team)) {
    System.out.println("enter the index");
    Scanner scn = new Scanner(System.in);
    int x = scn.nextInt();
    int y = scn.nextInt();
    char first=mix_team[x];
    char second=mix_team[y];
    mix_team[x]=second;
    mix_team[y]=first;
    for (int i = 0; i < mix_team.length; i = i + 1) 
    {
        System.out.print(i);  
        System.out.print(" ");
    }
    System.out.println();
    System.out.println(mix_team);
}
System.out.println("congratulations! you did it");
System.exit(0); 
```

* * *

顺便说一句，您不需要每次都创建扫描仪。更好的方法是在循环之前声明扫描仪`while`（基本上将初始化行向上移动两行）。

# android - Android - 活动与 FragmentActivity？

> ID：15318518
> 
> 赞同：86
> 
> 时间：2013-03-10T03:18:12.157
> 
> 标签：android, android-activity, android-fragmentactivity

我是安卓新手。我想构建一个标签格式的应用程序。我发现很多文档在哪里`Activity`被使用过。也在很多情况下都用到了`FragmentActivity`。我不确定哪个会更好。请建议我应该使用`Activity`还是`FragmentActivity`以选项卡格式开始开发？

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-03-10T03:36:08.427

[ianhanniballake 是对的](https://stackoverflow.com/a/15318582/7487335)。您可以获得`Activity`from的所有功能`FragmentActivity`。其实[`FragmentActivity`](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)还有更多的功能。

使用`FragmentActivity`您可以轻松构建`tab and swap`格式。对于每个选项卡，您可以使用不同的`Fragment`（`Fragments`可重复使用）。因此，对于任何人`FragmentActivity`，您都可以重复使用相同的`Fragment`.

您仍然可以`Activity`用于单页，例如列出某些内容并在下一页中编辑列表的元素。

`Activity`如果您正在使用，请记住使用`android.app.Fragment`; `FragmentActivity`如果您正在使用，请使用`android.support.v4.app.Fragment`. 永远不要将 a 附加`android.support.v4.app.Fragment`到a 上`android.app.Activity`，因为这会导致抛出异常。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-03-10T03:28:31.207

`FragmentActivity`为您提供所有功能以及使用[Fragments](http://developer.android.com/guide/components/fragments.html)`Activity`的能力，这在许多情况下非常有用，特别是在使用[ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html)时，这是在 Android 中使用 Tabs 的最佳方式。

如果您**只**针对 Honeycomb (v11) 或更高版本的设备，那么您可以`Activity`毫无问题地使用和使用 v11 中引入的本机 Fragments。`FragmentActivity`是专门作为[支持库](http://developer.android.com/tools/extras/support-library.html)的一部分构建的，用于将一些有用的功能（例如片段）反向移植回旧设备。

我还应该指出，您可能会发现[向后兼容性 - 实施选项卡](http://developer.android.com/training/backward-compatible-ui/abstracting.html)培训非常有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T03:28:27.607

如果您在最近的 ADT 包中使用 Eclipse“New Android Project”向导，您将自动获得作为片段实现的选项卡。这使得将来您的应用程序转换为平板电脑格式变得更加容易。

对于简单的单屏布局，您仍然可以使用`Activity`.

# php - 如何将基于文本的角色扮演游戏中的相同库存项目组合到一行

> ID：15318519
> 
> 赞同：0
> 
> 时间：2013-03-10T03:18:14.420
> 
> 标签：php, html, text-based

我运行基于文本的游戏，在库存中我得到如下行：

迷你火箭发射器 x10000
迷你火箭发射器 x10000
迷你火箭发射器 x10000
迷你火箭发射器 x10000
迷你火箭发射器 x10000
迷你火箭发射器 x10000

我想知道如何制作它，以便将这些项目组合在一起以显示这样的一行

迷你火箭发射器 x10000000

每个项目只有一行。这是页面代码：

```
 <?php

    session_start();
    require "global_func.php";
    if ($_SESSION['loggedin'] == 0)
    {
        header("Location: login.php");
        exit;
    }
    $userid = $_SESSION['userid'];
    require "header.php";
    $h = new headers;
    $h->startheaders();
    include "mysql.php";
    global $c;
    $is =
            mysql_query(
                    "SELECT u.*,us.* FROM users u LEFT JOIN userstats us ON                 u.userid=us.userid WHERE u.userid=$userid",
                    $c) or die(mysql_error());
    $ir = mysql_fetch_array($is);
    check_level();
    $fm = money_formatter($ir['money']);
    $cm = money_formatter($ir['crystals'], '');
    $lv = date('F j, Y, g:i a', $ir['laston']);
    $h->userdata($ir, $lv, $fm, $cm);
    $h->menuarea();
    function item_give($user, $itemid, $qty, $notid=0)
    {
      if($notid > 0)
      {
        $q=mysql_query("SELECT * FROM inventory WHERE inv_userid={$user} and                 inv_itemid={$itemid} AND inv_id != {$notid}");
              }
              else
              {
        $q=mysql_query("SELECT * FROM inventory WHERE inv_userid={$user} and         inv_itemid={$itemid}");
      }
      if(mysql_num_rows($q) > 0)
      {
        $r=mysql_fetch_array($q);
        mysql_query("UPDATE inventory SET inv_qty=inv_qty+{$qty} WHERE inv_id=        {$r['inv_id']}");
      }
      else
      {
        mysql_query("INSERT INTO inventory (inv_itemid, inv_userid, inv_qty) VALUES         ({$itemid}, {$user}, {$qty})");
      }
    }

    $inv =
            mysql_query(
                    "SELECT iv.*,i.*,it.* FROM inventory iv LEFT JOIN items i ON         iv.inv_itemid=i.itmid LEFT JOIN itemtypes it ON i.itmtype=it.itmtypeid WHERE iv.inv_userid=        {$userid} ORDER BY i.itmtype ASC, i.itmname ASC",
                    $c);
    if (mysql_num_rows($inv) == 0)
    {
        print "<b>You have no items!</b>";
    }
    else
    {
        print
                "<font color=white><b>Your items are listed below.</b><br />
    <table width=100%><tr style='background-color:gray;'><font color=white>        <th>Item</th><th><font color=white>Sell Value</th><font color=white><th>Total Sell         Value</th><font color=white><th>Links</th></tr></font>";
        $lt = "";
        while ($i = mysql_fetch_array($inv))
        {
            if ($lt != $i['itmtypename'])
            {
                $lt = $i['itmtypename'];
                print
                        "\n<tr style='background: gray;'><th colspan=4>{$lt}</th>        </tr>";
            }
            print "<tr><td><font color=white>{$i['itmname']}</font>";
            if ($i['inv_qty'] > 1)
            {
                print "&nbsp;<font color=white>x{$i['inv_qty']}</font>";
            }
            print "</td><td><font color=white>\${$i['itmsellprice']}</td><td></font>";
            print $i['itmsellprice'] * $i['inv_qty'];
            print
                            "</td><font color=white><td>[<a href='iteminfo.php?ID=        {$i['itmid']}'><font color=white>Info</a>] [<a href='itemsend.php?ID={$i['inv_id']}'><font         color=white>Send</a>] [<a href='itemsell.php?ID={$i['inv_id']}'><font color=white>Sell</a>]                 [<a href='imadd.php?ID={$i['inv_id']}'><font color=white>Add To Market</a>]</font>";
            if ($i['itmtypename'] == 'Food' || $i['itmtypename'] == 'Medical')
    {
                print " [<a href='itemuse.php?ID={$i['inv_id']}'><font         color=white>Use</a>]</font>";
            }
            if ($i['itmname'] == 'Nuclear Bomb')
            {
                print " [<a href='nuclearbomb.php'><font color=white>Use</a>]</font>";
            }
            print "</td></tr>";
        }
        print "</table>";
    }
    $h->endpage(); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:43:48.567

您可以`GROUP BY`在 SQL 查询中使用 a 。

类似于以下内容：

```
SELECT iv.*,i.*,it.*,SUM(iv.inv_qty)
FROM inventory iv
    LEFT JOIN items i
        ON iv.inv_itemid=i.itmid
    LEFT JOIN itemtypes it
        ON i.itmtype=it.itmtypeid
WHERE iv.inv_userid={$userid}
GROUP BY i.itmname
ORDER BY i.itmtype ASC, i.itmname ASC 
```

注意`SUM(iv.inv_qty)`和`GROUP BY i.itmname`部分。我不知道您的确切表架构，但这是我从您的 OP 中给出的信息中得出的最好的。

希望有帮助

# amazon-web-services - AWS 中的后台进程

> ID：15318521
> 
> 赞同：0
> 
> 时间：2013-03-10T03:18:20.660
> 
> 标签：amazon-web-services, amazon-rds

我是 AWS 新手，对我正在尝试编写的应用程序有疑问。我有一堆位于 Amazon RDS 中的数据。我希望定期运行一小段代码来针对这些数据运行，并在某些情况下在适当的情况下发送通知。在所有 AWS 服务中，最好的架构是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:23:13.607

`cron`您可以使用在 EC2 实例上运行的简单作业。该`cron`作业可以运行一个脚本（PHP、Perl 等）来获取数据，然后对其进行处理（通知人们、生成报告等）

这有帮助吗？

有关开始使用 Linux 实例的详细信息，请参阅此处：http: [//docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html)

您可以使用 Windows 机器和计划任务获得相同的结果。这是 Windows 实例的入门指南：http: [//docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/EC2Win_GetStarted.html](http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/EC2Win_GetStarted.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-08T22:07:55.353

您可以使用由 CloudWatch 事件驱动的 Scheduled Lambda 服务。它充当有弹性的 cron。

# mongodb - MongoDB按嵌套数据排序文档

> ID：15318526
> 
> 赞同：1
> 
> 时间：2013-03-10T03:18:45.153
> 
> 标签：mongodb

考虑以下帖子设计：

```
{
title: string,
body: string,
comments: [
    {name: string, comment: string, ...},
    {name: string, comment: string, ...},
    ...
]
}
... 
```

1) 我想选择我收藏中的所有帖子，并按照评论最多的帖子对它们进行排序。我假设由于 .length 变量始终是通过 javascript 设置的，因此可以使用它进行排序，但我不知道如何将评论计数存储在 post 文档的字段中，或者实际上是否更有效？

1.1）或者将评论计数存储在单独的文档中并不断更新它是否更有意义？

2) 选择帖子时，是否可以将结果限制为仅返回帖子文档的最后 3 条评论，而不是整个数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T11:21:31.973

你需要使用`aggregate`命令

这应该会为您提供一个帖子 _id 列表，其中包含按计数以相反顺序排序的评论数。

您可以使用 $limit 运算符返回 x 顶行。例如 `{ $limit : 5 }`

```
 db.posts.aggregate(
   { $unwind : "$comments" },
   { $group : { _id : "$_id" , number : { $sum : 1 } } },
   { $sort : { number : -1 } }
 ); 
```

看看 [http://docs.mongodb.org/manual/tutorial/aggregation-examples/](http://docs.mongodb.org/manual/tutorial/aggregation-examples/)

# ios - 如何在首选项包中使用 PSLinkListCell 中的值？

> ID：15318528
> 
> 赞同：3
> 
> 时间：2013-03-10T03:19:03.313
> 
> 标签：ios, objective-c, cydia, tweak, theos

我想为我的越狱调整制作一个偏好包。我成功地制作了一个带有有效开关的偏好包。

但我想要一个选择颜色的设置。例子：

```
 Blue      
Color >  Yellow       
         Green 
```

所以如果我点击**颜色**，它会带我到另一个屏幕，要求我选择“**蓝色**”、“**黄色**”或“**绿色**”。我看过网上的教程，我认为这是一个`PSLinkList`.

但我希望我的调整能够读取 plist 并记录选择的颜色。我认为它会读取 的`validValues`，`PSLinkList`对吗？

但是我会用什么代码来阅读 plist？

**编辑**：Nate 帮助我添加了 PSListcontroller，但我遇到了一个问题：

![在此处输入图像描述](../Images/c47fa303222c1245d7657f2ffef5ed32.png)

这是我的 plist [http://pastebin.com/uNKzLBrf](http://pastebin.com/uNKzLBrf)

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>items</key>
  <array>
    <dict>
      <key>cell</key>
      <string>PSGroupCell</string>
      <key>label</key>
      <string>Main</string>
    </dict>
    <dict>
      <key>cell</key>
      <string>PSSwitchCell</string>
      <key>default</key>
      <true/>
      <key>defaults</key>
      <string>com.junyi00.prefs</string>
      <key>key</key>
      <string>enabled</string>
      <key>label</key>
      <string>Enable</string>
    </dict>
    <dict>
      <key>cell</key>
      <string>PSGroupCell</string>
      <key>label</key>
      <string>Colors</string>
    </dict>
    <dict>
      <key>cell</key>
      <string>PSListLinkCell</string>
      <key>defaults</key>
      <string>com.junyi00.prefs</string>
      <key>detail</key>
      <string>PSListItemsController</string>
      <key>key</key>
      <string>color</string>
      <key>label</key>
      <string>Color</string>
      <key>validTitles</key>
      <array>
        <string>Default</string>
        <string>Random</string>
        <string>Yellow</string>
        <string>Blue</string>
        <string>Red</string>
        <string>Green</string>
      </array>
      <key>validValues</key>
      <array>
        <string>Default</string>
        <string>Random</string>
        <string>Yellow</string>
        <string>Blue</string>
        <string>Red</string>
        <string>Green</string>
      </array>
    </dict>
  </array>
  <key>title</key>
  <string>Flash Color</string>
</dict>
</plist> 
```

帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T10:30:25.173

看看[这个较旧的教程](http://modmyi.com/forums/file-mods/22453-how-make-custom-menus-preferences-app-custom-preferences.html)。（*注意：对于阅读本文的其他人，本教程不使用[PreferenceLoader](http://iphonedevwiki.net/index.php/PreferenceLoader)，现在应该将其用于此任务*）

在您的情况下，我认为`MyAppName.plist`应该包含以下内容：

```
 <key>items</key>
    <array>
        <dict>
            <key>cell</key>
            <string>PSLinkListCell</string>
            <key>defaults</key>
            <string>com.mycompany.MyAppName</string>
            <key>detail</key>
            <string>PSListItemsController</string>
            <key>key</key>
            <string>color_pref</string>
            <key>label</key>
            <string>Color</string>
            <key>validTitles</key>
            <array>
                <string>Blue</string>
                <string>Yellow</string>
                <string>Green</string>
            </array>
            <key>validValues</key>
            <array>
                <string>Blue</string>
                <string>Yellow</string>
                <string>Green</string>
            </array>
        </dict>
    </array> 
```

然后可以通过您的代码读取，如下所示：

```
#define PLIST_FILENAME @"/var/mobile/Library/Preferences/com.mycompany.MyAppName.plist"
#define COLOR_PREF @"color_pref"

// an ivar
NSMutableDictionary* preferences;

- (void) initializePreferences {
    NSFileManager* fileManager = [NSFileManager defaultManager];

    // initialize the preferences
    if (![fileManager fileExistsAtPath: PLIST_FILENAME]) {

        // make sure the user settings have default values assigned
        NSDictionary* defaultPrefs = [[NSDictionary alloc] initWithObjectsAndKeys:
                                       @"Yellow", COLOR_PREF,
                                       nil];

        preferences = [[NSMutableDictionary alloc] initWithDictionary: defaultPrefs];
        [preferences writeToFile: PLIST_FILENAME atomically: YES];
    } else {
        preferences = [[NSMutableDictionary alloc] initWithContentsOfFile: PLIST_FILENAME];
    }
}

- (NSString*) colorPref {
    return [preferences valueForKey: COLOR_PREF];
} 
```

我在这里跳过了一些步骤，因为听起来您熟悉[将越狱应用程序或调整设置添加到 Preferences.app 的一般过程](http://iphonedevwiki.net/index.php/PreferenceLoader)。如果这对您不起作用，请发表评论要求澄清。

# c# - 如何在 Web 请求中使用多个凭据？

> ID：15318533
> 
> 赞同：0
> 
> 时间：2013-03-10T03:20:05.357
> 
> 标签：c#, validation, httpwebrequest, credentials

因此，当我在研究 Web 请求验证方法时，我偶然发现了凭据。我的问题是如何在不知道任何信息的情况下获取凭据并通过它们。

这是我想要做的事情的一个想法

```
foreach(Credential c in DefaultCredentials)
{
    CredentialCache.Add(c);
} 
```

然后我会将凭据传递给 Web 请求。我不想知道 URI、主机、端口、authtype 或其他任何东西。

# javascript - Sencha Touch 2：显示在面板内的 HTML 按钮的简单处理程序给出未定义的错误

> ID：15318537
> 
> 赞同：0
> 
> 时间：2013-03-10T03:21:03.313
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2

我有一个非常简单的html。这个 html 使用 panel.setHtml 方法显示在 Sencha Panel 中。示例 HTML 的布局如下。

***HTML 文件***

```
<!DOCTYPE html>
<html>
<head>
<script>
function copyText()
{
alert('It is clicked');
}
</script>
</head>
<body>

Field1: <input type="text" id="field1" value="Hello World!"><br>
Field2: <input type="text" id="field2">
<br><br>
<button onclick="copyText()">Copy Text</button>

</body>
</html> 
```

下面的代码在面板内设置html。上面提到的html被截断为一行，并在面板内设置如下。

```
var res = '<!DOCTYPE html><html><head><script>function copyText(){}</script></head><body>Field1: <input type="text" id="field1" value="Hello World!"><br>Field2: <input type="text" id="field2"><br><br><button onclick="copyText()">Copy Text</button><p>A function is triggered when the button is clicked. The function copies the text from Field1 into Field2.</p></body></html>';
Ext.getCmp('dummyPanel').setHtml(res); 
```

**问题 ：**

**单击按钮时，我收到“未捕获的 ReferenceError：未定义 copyText”错误。**

关于我在这里做错了什么的任何想法？我们不能在 sencha 面板中设置完整的 html。

运行代码位于**[http://www.senchafiddle.com/#5LdC5](http://www.senchafiddle.com/#5LdC5)**

请帮忙。

谢谢你，甘达富

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:19:54.483

我实现它如下。

```
Ext.Viewport.add({
    xtype     : 'panel',
    html      : '<button>Foo</button>',
    listeners : {
        element  : 'element',
        delegate : 'button',
        tap      : function () {
            console.log('button tap!');
        }
    }
}); 
```

因此，处理程序将只为按钮调用，没有别的。

谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T05:46:48.623

我认为这里的“正确”答案是使用[Sencha Touch button](http://docs.sencha.com/touch/2-1/#!/api/Ext.Button)。除了可能不会导致此错误之外，Sencha 还做了大量工作来优化事件处理，并且使用内联事件并没有利用这些优化。我不确定，但我有一种强烈的感觉，即销毁该按钮甚至不会破坏那里的事件处理程序，这是代码中令人不快的泄漏。

```
var button = Ext.create('Ext.Button', {
    text: 'Copy Text'
});

button.on({
    click:{
         copyText()
    }
); 
```

# java - 当 JtextField 被填充时，JTable 单元格必须被填充。怎么做？

> ID：15318540
> 
> 赞同：0
> 
> 时间：2013-03-10T03:21:57.253
> 
> 标签：java, swing, jtable, jtextfield, jtabbedpane

在我的框架中，我有 a`JTable`和 a `JTabbedPane`。

`JTabbedPane`包含一个`JTextField`日期。

当它填充了日期并且按下`Enter`或`Tab`键时，`JTable`必须填充“日期”列。

我有一种方法可以检查文本字段是否包含有效日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:31:56.310

你可以用`ActionListener`.

```
JTextField textField; // this is your text field
textField.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent ae) {
        // Place your code to fill the JTable here.
        // Maybe something like:
        tableModel.setValueAt(textField.getText(), row, column);
    }
} 
```

在上面的示例中，请确保正确引用`textField`、`row`和`column`。

* * *

**编辑：**正如 MadProgrammer[指出](https://stackoverflow.com/questions/15318540/when-jtextfield-get-filled-jtable-cell-has-to-be-filled-how-to-do-it#comment21627805_15318600)的那样，a`FocusListener`将提供更广泛的实现：只要文本字段失去焦点，就可以运行代码。这将按如下方式实施：

```
textField.addFocusListener(new FocusAdapter() {
    @Override
    public void focusLost(FocusEvent fe) {
        // Place your code to fill the JTable here.
        // Maybe something like:
        tableModel.setValueAt(textField.getText(), row, column);
    }
} 
```

# asp.net-mvc-3 - kendo ui上传验证

> ID：15318544
> 
> 赞同：0
> 
> 时间：2013-03-10T03:22:36.200
> 
> 标签：asp.net-mvc-3, kendo-ui

我正在尝试验证用户是否在未选择文件时单击导入按钮以及用户是否选择非 csv 文件。请告知，它目前不验证任何东西。即使我已经将验证放在提交按钮上。请指教，谢谢

这是代码：

```
 @(Html.Kendo().Upload()
                .HtmlAttributes(new { @Style = "align:center; font-size:12px; background-color:#3399FF" })     
                .Name("FileUpload")
                .Multiple(false)
                .Events(ev => ev.Success("onSuccess"))
    )

<script type="text/javascript">

  $(document).ready(function () {

 $(".k-button.k-upload-button").after(' <input type="submit" id="btnSubmit" value="Import" style="height:31px; font-size:14px; background-color:#3399FF" class="k-button" />');

$('#btnSubmit').click(function (e){

            var theFileElement = document.getElementById("FileUpload");
            filename = theFileElement.value;

            if(filename.length == 0)
            {
                alert("Please select a csv file to import");
                return false;
            }
            else if (!/\.csv$/i.test(filename)) {
                alert("Please upload csv file only");
                return false;
            }
            return true;

        });

});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:47:37.070

要限制上传文件类型，您可以尝试使用[本论坛主题](http://www.kendoui.com/forums/ui/upload/restrict-file-types.aspx)中介绍的方法。

请记住，某些元数据可能不会被旧浏览器公开。

# sql - rails joins 显示第二个表的列

> ID：15318547
> 
> 赞同：0
> 
> 时间：2013-03-10T03:22:38.687
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, join

我在连接如何工作

```
Category.joins(:posts)
This produces:

SELECT categories.* FROM categories
  INNER JOIN posts ON posts.category_id = categories.id 
```

但是如何从帖子表中获取列数据。是否可以从两个表中检索所有列，例如

```
SELECT categories.*,posts.* FROM categories
  INNER JOIN posts ON posts.category_id = categories.id 
```

或者我只能通过使用原始 sql 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T04:26:11.143

```
Category.first.includes(:posts) 
```

将急切加载该类别的所有帖子。请参阅 Rails 指南[http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)

# android - 从 sqlite 数据库中选择指定的列并显示到 textview

> ID：15318554
> 
> 赞同：0
> 
> 时间：2013-03-10T03:23:59.177
> 
> 标签：android, database, android-sqlite

更新！！！！

我正在使用 android sqlite 数据库，我想使用带有 where 子句的 sql select 语句选择一个指定的查询，例如 "SELECT * FROM mytable WHERE name = 'Name'";

但我没有成功，这是我的代码，但不包含任何 where 子句。谢谢。

```
public String Read(String name)
{
    String[] columns = new String[]{SQLiteHelper.COLUMN_NPM, SQLiteHelper.COLUMN_NAME};
    String selection = SQLiteHelper.COLUMN_NAME + " = " + name;
    String[] selectionArgs = {String.valueOf(name)};
    Cursor cursor = database.query(SQLiteHelper.TABLE_MHS, columns, selection, selectionArgs, null, null, null);

    cursor.moveToFirst();
    String index_name = cursor.getString(cursor.getColumnIndex(SQLiteHelper.COLUMN_NAME));
    return index_name;
} 
```

我将该代码放在扩展 sqliteopenhelper 的数据库源中，但在 log cat 中出现以下错误

`03-10 11:57:37.000: E/AndroidRuntime(14709): FATAL EXCEPTION: main 03-10 11:57:37.000: E/AndroidRuntime(14709): android.database.sqlite.SQLiteException: no such column: radit: , while compiling: SELECT npm, name FROM Mhs WHERE name = radit 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:53) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1438) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1317) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1271) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1353) 03-10 11:57:37.000: E/AndroidRuntime(14709): at com.crud.MhsDataSource.Read(MhsDataSource.java:55) 03-10 11:57:37.000: E/AndroidRuntime(14709): at com.crud.MainActivity$4.onClick(MainActivity.java:76) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.view.View.performClick(View.java:2533) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.view.View$PerformClick.run(View.java:9320) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.os.Handler.handleCallback(Handler.java:587) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.os.Handler.dispatchMessage(Handler.java:92) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.os.Looper.loop(Looper.java:150) 03-10 11:57:37.000: E/AndroidRuntime(14709): at android.app.ActivityThread.main(ActivityThread.java:4389) 03-10 11:57:37.000: E/AndroidRuntime(14709): at java.lang.reflect.Method.invokeNative(Native Method) 03-10 11:57:37.000: E/AndroidRuntime(14709): at java.lang.reflect.Method.invoke(Method.java:507) 03-10 11:57:37.000: E/AndroidRuntime(14709): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 03-10 11:57:37.000: E/AndroidRuntime(14709): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) 03-10 11:57:37.000: E/AndroidRuntime(14709): at dalvik.system.NativeStart.main(Native Method)`

我得到了答案，这是我的 SQLite 选择参数代码

```
public String Read(String name)
{
    String[] columns = new String[]{SQLiteHelper.COLUMN_NPM, SQLiteHelper.COLUMN_NAME};
    String selection = SQLiteHelper.COLUMN_NAME + " like ? ";
    String[] selectionArgs = {name};
    Cursor cursor = database.query(SQLiteHelper.TABLE_MHS, columns, selection, selectionArgs, null, null, null);

    cursor.moveToFirst();
    String index_name = cursor.getString(cursor.getColumnIndex(SQLiteHelper.COLUMN_NAME));
    String index_npm = cursor.getString(cursor.getColumnIndex(SQLiteHelper.COLUMN_NPM));
    String result = index_npm + " " + index_name;
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:54:16.167

where 子句是 3d 参数，where args 是第 4 个参数。

您应该执行以下操作：

```
public String Read(String name)
{
    String[] columns = new String[]{SQLiteHelper.COLUMN_NPM, SQLiteHelper.COLUMN_NAME};
    where = "Name=?";
    String[] whereArgs = new String[]{name};

    Cursor cursor = database.query(SQLiteHelper.TABLE_MHS, columns, where, whereArgs, null, null, null);

    //....
} 
```

查看[www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)了解详情

# c++ - Visual C++ 2008 Express 下载链接失效？

> ID：15318560
> 
> 赞同：107
> 
> 时间：2013-03-10T03:25:22.573
> 
> 标签：c++, ide, download

我目前正在学习的编程课程使用 Visual C++ 2008，如果要在家工作，我们可以选择获取速成版。我在网站上的任何地方都找不到下载链接，微软的支持绝对没有帮助。我也研究过只使用 Visual C++ 2010，但我听说兼容性工作的机会不大。如果有人知道我在哪里可以获得 Visual Studio 2008 express ISO 或 C++ 2008 express 单独下载的信息，请告诉我。

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2013-03-10T04:56:51.857

直接链接不再适用于 2008 年。

**只是 VS 2008 快递**

[https://download.microsoft.com/download/8/B/5/8B5804AD-4990-40D0-A6AA-CE894CBBB3DC/VS2008ExpressENUX1397868.iso](https://download.microsoft.com/download/8/B/5/8B5804AD-4990-40D0-A6AA-CE894CBBB3DC/VS2008ExpressENUX1397868.iso)

**VS 2008 快递 SP1**

[https://download.microsoft.com/download/E/8/E/E8EEB394-7F42-4963-A2D8-29559B738298/VS2008ExpressWithSP1ENUX1504728.iso](https://download.microsoft.com/download/E/8/E/E8EEB394-7F42-4963-A2D8-29559B738298/VS2008ExpressWithSP1ENUX1504728.iso)

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2013-03-10T04:20:08.500

您可以从此链接下载 Visual Studio C++ 2008：[Microsoft Visual C++ 2008 Express with SP1](http://go.microsoft.com/?linkid=7729279)

# c# - 如何使用 MVC4 构建嵌套菜单

> ID：15318562
> 
> 赞同：1
> 
> 时间：2013-03-10T03:25:47.793
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, web-applications, asp.net-mvc-4

在我进入自定义实现之前，我想问问社区是否有任何内置的帮助程序可以用 MVC4 中的实体构建嵌套菜单。我有这样的数据层次结构：

```
> Folder 1
> Folder 2
>> Folder 2.1
>> Folder 2.2
>>> Item 2.2.1
>>> Folder 2.2.1
>> Folder 2.3
> Folder 3 
```

而且我正在考虑将嵌套数组（嵌套数组[嵌套数组...]）的数组传递到控制器中，以构建相应嵌套链接的列表。在深入探讨之前，我有几个问题：

1.  如果有的话，有哪些工具可以帮助解决这个问题？
2.  如果您必须构建自定义数据结构，您会使用哪些数据结构？

我对 MVC/C# 完全陌生，所以任何建议/指针都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:40:31.000

> 如果有的话，有哪些工具可以帮助解决这个问题？

我个人还没有遇到过现成的解决方案。

> 如果您必须构建自定义数据结构，您会使用哪些数据结构？

最好的办法是为此构建一个自定义类。就像一个`tree`有`dictionary of nodes`. 您可以构建一个自定义的，如下所示：

```
public class Tree
{
    private TreeNode rootNode;
    public TreeNode RootNode
    {
        get { return rootNode; }
        set
        {
            if (RootNode != null)
                Nodes.Remove(RootNode.Id);

            Nodes.Add(value.Id, value);
            rootNode = value;
        }
    }

    public Dictionary Nodes { get; set; }

    public Tree()
    {
    }

    public void BuildTree()
    {
        TreeNode parent;
        foreach (var node in Nodes.Values)
        {
            if (Nodes.TryGetValue(node.ParentId, out parent) &&
                node.Id != node.ParentId)
            {
                node.Parent = parent;
                parent.Children.Add(node);
            }
        }
    }
} 
```

如果您想了解更多详细信息，那么[此链接](http://ole.michelsen.dk/blog/mapping-relational-table-data-to-a-tree-structure-in-mvc/)可以满足您的所有需求。

# http - 如何在 yaws (erlang) 中检测移动浏览器

> ID：15318563
> 
> 赞同：1
> 
> 时间：2013-03-10T03:25:48.043
> 
> 标签：http, mobile, erlang, http-headers, yaws

我知道我可以从 Arg 结构中获取用户代理，但我如何判断它来自移动浏览器（即 android 或 iPhone Safari），然后重定向到相应的移动页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:35:02.740

您可能首先想了解[通过用户代理进行检测的优缺点](https://developer.mozilla.org/en-US/docs/Browser_detection_using_the_user_agent)。一旦你决定如何继续并且你仍然想使用重定向，你可以使用[Yaws 中的重定向支持](http://yaws.hyber.org/redirect.yaws)来重定向到不同的页面。

# node.js - 节点 java 打字稿导入

> ID：15318566
> 
> 赞同：1
> 
> 时间：2013-03-10T03:26:43.080
> 
> 标签：node.js, typescript

我需要在我的打字稿项目中使用[node-java](https://github.com/nearinfinity/node-java) node_module。

然而，

```
var java = require("java"); 
```

不能以打字稿方式工作，而且

```
import java = module("java"); 
```

不能按原样工作。

我知道我们可能需要一个定义文件等，并且有一个像 [https://github.com/borisyankov/DefinitelyTyped这样的项目](https://github.com/borisyankov/DefinitelyTyped)

话虽如此，我认为自己做起来太复杂了。

有没有更简单的解决方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:38:35.933

最好的方法是使用`node-java`API 的定义文件，但是，使用您的第一个代码片段：

```
var java = require("java"); 
```

您可以使用[对此节点类型](https://github.com/borisyankov/DefinitelyTyped/blob/master/node/node.d.ts)的引用，如下所示：

```
/// <reference path="node/node.d.ts" />

var java = require("java");

java.classpath.push("commons-lang3-3.1.jar");
java.classpath.push("commons-io.jar");

var list = java.newInstanceSync("java.util.ArrayList");

java.newInstance("java.util.ArrayList", function(err, list) {
  list.addSync("item1");
  list.addSync("item2");
});

var ArrayList = java.import('java.util.ArrayList');
var list2 = new ArrayList();
list.addSync('item1'); 
```

要使用第二个片段：

```
import java = module("java"); 
```

您将需要一个定义文件。首先，您可以`node-java.d.ts`使用以下代码创建一个文件：

```
module "java" {
    export var classpath: { push(jar: string); };
    export function newInstanceSync(type: string);
    export function newInstance(type: string, callback: (err, list) => any);
    export function import(type: string);
    export function newArray(...item: any[]);
    export function callStaticMethodSync(...args: any[]);
} 
```

并使用此文件如下：

```
/// <reference path="node-java.d.ts" />

import java = module("java");

java.classpath.push("commons-lang3-3.1.jar");
java.classpath.push("commons-io.jar");

var list = java.newInstanceSync("java.util.ArrayList");

java.newInstance("java.util.ArrayList", function(err, list) {
  list.addSync("item1");
  list.addSync("item2");
});

var ArrayList = java.import('java.util.ArrayList');
var list2 = new ArrayList();
list.addSync('item1'); 
```

有时间，我会将`node-java`定义发送到[DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped)存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:21:47.617

当你说这不起作用时：

```
var java = require("java"); 
```

我假设您直接调用时会收到错误，`require`因为它没有类型信息。

解决此问题的一种方法是为 require 添加类型信息：

```
declare var require: (module: string) => any;
var java = require('java'); 
```

这是一个简单的示例 -`java`不会像`require`我的示例中的返回值那样输入`any`- 但如果您有类型信息，您可以转换它：

```
declare var require: (module: string) => any;
var java = <JavaDefinition> require('java'); 
```

# php - ErrorDocument 重定向 url 后的 htacces 保持不变

> ID：15318567
> 
> 赞同：0
> 
> 时间：2013-03-10T03:26:44.553
> 
> 标签：php, .htaccess, mod-rewrite

我正在阻止 htaccess 列出目录，但是在它被定向到索引后，url 不会改变。

如果用户访问[http://www.searchme.com/images](http://www.searchme.com/images)

它将页面重定向到主页，但 url 保持不变[http://www.searchme.com/images](http://www.searchme.com/images)

因此，如果我单击任何链接，则 url 变为[http://www.searchme.com/images/about.php](http://www.searchme.com/images/about.php)而应该变为[http://www.searchme.com/about.php](http://www.searchme.com/about.php)

```
 #IndexIgnore /images/*
 Options -Indexes
 ErrorDocument 404 /searchme/index.php
 ErrorDocument 403 /searchme/index.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:48:21.477

我应该在错误文档中提及整个路径

```
 Options -Indexes
     ErrorDocument 404 http://127.0.0.1/musaada/index.php
     ErrorDocument 403 http://127.0.0.1/musaada/index.php 
```

# sql - 选择带有几个月计数的语句

> ID：15318568
> 
> 赞同：-2
> 
> 时间：2013-03-10T03:26:47.547
> 
> 标签：sql, sql-server-2008, select, count, average

嗨，我正在尝试创建选择，它将按月计算取件表中的取件。Select 将用于在.NET 上编写的网站。
报告将如下所示 ![我正在尝试创建的示例 pf 报告](../Images/fe2d27d7682950c016d354c201a115ae.png)

我有 3 张桌子

```
 create table Agency
    (
    AgencyID int not null IDENTITY, 
    AgencyName varchar (100)not null,
    CeresNo VARCHAR(7), 
   AgencyCode varchar (16) not null,
    Active bit,    
    CensusDist varchar(50) ,    
    GroupCode varchar (10),    
    Primary Key (AgencyID),    
    FOREIGN KEY (CensusDist) REFERENCES AgencyCensus(CensusDist),    
    FOREIGN KEY (GroupCode) REFERENCES AgencyGroup (GroupCode)
    ); 
```

客户表

```
 create table Clients
    (
    ClientID int not null IDENTITY (9000,1), 
    AgencyID int not null,
    AppDate date not null,
    CertifiedDate date ,
    Primary Key (ClientID),   
   FOREIGN KEY (AgencyID) REFERENCES Agency(AgencyID), 
    ); 
```

和取货台

```
create table Pickup

(
PickupID int IDENTITY,
ClientID int ,
PickupDate date ,
PickupProxy  varchar (200) ,
PickupHispanic bit default 0,
EthnCode varchar(5) ,
CategCode varchar (2) ,
AgencyID int,
Primary Key (PickupID),
FOREIGN KEY (ClientID) REFERENCES Clients (ClientID)
); 
```

到目前为止我有这个声明

```
select 
[Agency]= (select AgencyName from agency),
 [Jan] = (select count(pickupid)   from  pickup where PickupDate between '2012-01-01' and '2012-01-31' group by AgencyID),
 [FEB] = (select count(pickupid)  from  pickup where PickupDate between '2012-02-01' and '2012-02-29' group by AgencyID  ) 
```

选择尚未完成，可能应该重写，但我不知道如何:( 它抛出错误

**消息 512，级别 16，状态 1，第 1 行
子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。**

还有一个问题是我不知道如何在当前年份的皮卡表中查看记录。因为我认为将使用网站的人将无法在选择中更改日期:) 此外，由于某种原因，函数 AVG 无法计算正确的平均值并且不想按组进行计算。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:49:40.063

您没有提供有关如何计算平均值的足够详细信息，但其余部分可以计算如下：

```
SELECT
    COUNT(PickupID) as YearTotal,
    SUM(CASE WHEN DATEPART(month, PickupDate) = 1  THEN 1 ELSE 0 end) as Jan,
    SUM(CASE WHEN DATEPART(month, PickupDate) = 2  THEN 1 ELSE 0 end) as Feb,
    SUM(CASE WHEN DATEPART(month, PickupDate) = 3  THEN 1 ELSE 0 end) as Mar,
    SUM(CASE WHEN DATEPART(month, PickupDate) = 4  THEN 1 ELSE 0 end) as Apr,            
    SUM(CASE WHEN DATEPART(month, PickupDate) = 5  THEN 1 ELSE 0 end) as May,
    SUM(CASE WHEN DATEPART(month, PickupDate) = 6  THEN 1 ELSE 0 end) as Jun,
    SUM(CASE WHEN DATEPART(month, PickupDate) = 7  THEN 1 ELSE 0 end) as Jul,
    SUM(CASE WHEN DATEPART(month, PickupDate) = 8  THEN 1 ELSE 0 end) as Aug, 
    SUM(CASE WHEN DATEPART(month, PickupDate) = 9  THEN 1 ELSE 0 end) as Sep,
    SUM(CASE WHEN DATEPART(month, PickupDate) = 10  THEN 1 ELSE 0 end) as Oct,
    SUM(CASE WHEN DATEPART(month, PickupDate) = 11  THEN 1 ELSE 0 end) as Nov,
    SUM(CASE WHEN DATEPART(month, PickupDate) = 12  THEN 1 ELSE 0 end) as Dec         
FROM dbo.Pickup 
where DATEPART(year, PickupDate) = 2012
group by AgencyID 
```

所讨论的年份（此处为 2012 年）作为参数提供。您将需要在报告中查找`AgencyId` into**或**在派生表中使用上述查询并将其连接到表中。`AgencyName`**`Agency`**

 *** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T05:14:45.100

```
Alter procedure sp_CountPickups
 @MyYear int
AS
SELECT
MAX(a.AgencyName),
COUNT(PickupID) as YearTotal,
COUNT(PickupID)/(CASE WHEN YEAR(GETDATE()) =@myYear THEN MONTH(GETDATE()) ELSE 12 END) as MoAvg,
SUM(CASE WHEN DATEPART(month, PickupDate) = 1 THEN 1 ELSE 0 end) as Jan,
SUM(CASE WHEN DATEPART(month, PickupDate) = 2 THEN 1 ELSE 0 end) as Feb,
SUM(CASE WHEN DATEPART(month, PickupDate) = 3 THEN 1 ELSE 0 end) as Mar,
SUM(CASE WHEN DATEPART(month, PickupDate) = 4 THEN 1 ELSE 0 end) as Apr, 
SUM(CASE WHEN DATEPART(month, PickupDate) = 5 THEN 1 ELSE 0 end) as May,
SUM(CASE WHEN DATEPART(month, PickupDate) = 6 THEN 1 ELSE 0 end) as Jun,
SUM(CASE WHEN DATEPART(month, PickupDate) = 7 THEN 1 ELSE 0 end) as Jul,
SUM(CASE WHEN DATEPART(month, PickupDate) = 8 THEN 1 ELSE 0 end) as Aug, 
SUM(CASE WHEN DATEPART(month, PickupDate) = 9 THEN 1 ELSE 0 end) as Sep,
SUM(CASE WHEN DATEPART(month, PickupDate) = 10 THEN 1 ELSE 0 end) as Oct,
SUM(CASE WHEN DATEPART(month, PickupDate) = 11 THEN 1 ELSE 0 end) as Nov,
SUM(CASE WHEN DATEPART(month, PickupDate) = 12 THEN 1 ELSE 0 end) as Dec 
FROM dbo.Pickup p join Agency a on p.agencyid = a.agencyid
where DATEPART(year, PickupDate) = @MyYear
group by a.AgencyID 
order by a.AgencyID 
```

可能对某人有用**

# c# - 如何正确处理 WM_PAINT，不断重绘

> ID：15318569
> 
> 赞同：2
> 
> 时间：2013-03-10T03:26:51.150
> 
> 标签：c#

我正在控件中的 WndProc 覆盖中对 WM_PAINT 和 WM_ERASEBKGD 进行自定义处理。

```
protected override void WndProc(ref Message m)
{
    if (m.Msg == 0xF)
    {
        // [Draw using stored hDC]

        m.Result = (IntPtr)1;
    }
    else if (m.Msg == 0x14)
    {
        m.Result = (IntPtr)1;
    }
    else
        base.WndProc(ref m);
} 
```

它工作得很好，除了它被不断地调用，大约每秒 300 次，如果我允许基地处理它，它会被调用一次。我遗漏了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T03:46:09.183

发生这种情况是因为您没有告诉 Windows“脏矩形”不再脏并被绘制。所以它不断生成 WM_PAINT 消息。

这通常使用 BeginPaint/EndPaint() 完成，由 .NET 中内置的默认消息处理程序调用。它调用了虚拟 OnPaint() 方法。覆盖它或处理 Paint 事件是推荐的方法。如果您出于某种原因不想使用它，那么您必须调用[ValidateRect()](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145194%28v=vs.85%29.aspx)。

# paypal - 无法使用测试测试帐户在贝宝沙盒中付款

> ID：15318571
> 
> 赞同：25
> 
> 时间：2013-03-10T03:27:17.733
> 
> 标签：paypal, paypal-sandbox

自从 paypal 更新了他们的沙箱后，我遇到了很多问题。我无法使用沙盒模拟付款。每当我使用更新前创建的“旧测试帐户”时，都会出现此错误消息

> **此沙盒电子邮件地址不可用。请输入另一个电子邮件地址。**

我创建了一个新帐户，不幸的是它也不起作用。出现相同的错误消息。以下是创建帐户时输入的详细信息。

1.  电子邮件：“test@test.com”
2.  支付宝 : 5000
3.  银行验证：是
4.  支付卡：paypal
5.  信用卡类型：无

**谁能告诉如何使用新的贝宝沙箱进行支付模拟？**我已经阅读了 x.com 中的所有文档，但没有一个有效。这些链接将我重定向到developers.paypal.com 并提示我一次又一次地登录。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-10T07:09:24.883

我通过以下方式解决了它：

*   退出测试站点
*   清除浏览器缓存和 cookie（我使用 chrome）。
*   重新登录测试站点
*   将提交凭据更改为新贝宝沙箱中自动创建的业务帐户
*   提交。

现在按预期工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-08T12:29:00.593

最简单的解决方案是为测试客户使用**隐身浏览器窗口**。

这会将“客户”的 cookie 与“商家”的 cookie 以及来自您的真实 PayPal 帐户的 cookie 分开，这似乎是导致问题的原因。

**Chrome 中的 Ctrl-Shift-N**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T13:26:40.630

嗨，我解决了这个问题，问题的主要原因是您登录了您的主帐户，所以只需打开另一个浏览器并使用沙盒凭据测试您的网站。请注意，您不必登录贝宝或开发者网站

或者您可以在不登录的情况下清除所有贝宝 cookie 和测试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T03:45:34.473

为了使用沙盒......你应该登录。我遇到的常见问题，只需登录沙盒 - 然后再次尝试代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-19T15:49:30.873

1) 打开开发者工具

2) 资源/cookies

3) 选择[https://www.sandbox.paypal.com/](https://www.sandbox.paypal.com/)

4）删除右边的所有键

# ruby - 尝试使用 mini_magick gem 和carrierwave 来调整图像大小（Ruby on Rails）

> ID：15318572
> 
> 赞同：2
> 
> 时间：2013-03-10T03:27:25.947
> 
> 标签：ruby, ruby-on-rails-3, imagemagick, carrierwave, minimagick

我很难让 rmagick 工作，所以我试图让 mini_magick 来代替它。图像上传正常，一切正常，但我只想调整它的大小。

我在 image_uploader.rb 中使用它

```
version :thumb do
     process :resize_to_fit => [150, 150]
   end 
```

但即使安装了 mini_magick，我也会收到此错误消息

```
 LoadError in StaticPagesController#home

cannot load such file -- mini_magick (You may need to install the mini_magick gem) 
```

我通过 gem 文件运行了“gem install mini_magick”，我知道 mini_magick 的 3.5.0 版本已安装。有谁知道如何解决这个问题？

我只想在通过载波上传时调整图像大小。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-02T05:47:33.110

确保将 gem 添加到 Gemfile：

```
gem 'mini_magick' 
```

然后运行：

```
bundle install 
```

最后，**重新启动 rails 服务器**：

```
rails server 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T21:48:55.130

将以下行添加到您的 Gemfile：

```
gem 'mini_magick' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T14:09:40.640

你在使用捆绑器吗？您需要在 Gemfile 中明确指定 gem 才能使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-10T20:22:51.567

MiniMagick 是一个名为 ImageMagick 的命令行应用程序的 Ruby 包装器，因此您需要先安装 ImageMagick。您可以通过终端安装 ImageMagick。 `brew update brew install imagemagick`

接下来，添加`gem 'mini_magick'`到您的 gem 文件中。然后运行`bundle`​​.

# javascript - 使用 document.getElementById 捕获 innerHTML

> ID：15318574
> 
> 赞同：0
> 
> 时间：2013-03-10T03:27:30.553
> 
> 标签：javascript, html

我正在使用 JavaScript 通过 document.getElementById('').innerHTML 为空 div 分配一个值，这工作正常，我可以看到单词更新并出现在浏览器上。然后我尝试捕捉这些词，但一直将其视为未定义。

我的 HTML 是

```
<div id="name"> </div> 
```

JavaScript 执行这个：

```
function doneloading(first_name) {
  document.getElementById('name').innerHTML = first_name;
} 
```

我尝试使用以下方法捕获它：

```
var photoname = document.getElementById('name').value;
alert(photoname); 
```

一般不能捕获innerHTML吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:29:45.517

尝试：

```
var photoname = document.getElementById('name').innerHTML; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:31:17.723

您可以像设置它一样访问元素中的值。

```
var innerHTML = document.getElementById('name').innerHTML; 
```

这还将返回特定元素中任何嵌入的 HTML 标记的代码。[有关innerHTML 属性](http://www.w3schools.com/jsref/prop_html_innerhtml.asp)，请参阅 w3school 的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T03:46:09.270

innerHTML 输出代码为 html 代码： 如：

```
<div id="demo"><div id="name">The demo said is right</div></div>
var domNameHtml=document.getElementById('name').innerHTML; 
```

domNameHtml 值是演示中说的对如果你想改变关于 div html 代码的 dom 对象；必须是这样的：

```
document.getElementById('name').innerHTML='<div id="name">The demo said is right</div><h1>Integral is my</h1>'; 
```

html代码更改：

```
<div id="demo"><div id="name">The demo said is right</div><h1>Integral is my</h1></div> 
```

如果要更改有关 div 文本代码的 dom 对象；

var text=document.getElementById('name').innerTest; 文本值为【demo说的对】去掉了html代码

希望能够帮助到你

# java - 如何在Tomcat中读取我的webapp上下文之外的属性文件

> ID：15318578
> 
> 赞同：10
> 
> 时间：2013-03-10T03:27:56.270
> 
> 标签：java, tomcat, web-applications, servlets, properties

我有这个要求，我的 webapp 需要从 Tomcat webapps 目录之外的属性文件中读取，例如从 $CATALINA_HOME/properties/myapp.properties。我已经尝试了几件事，但到目前为止没有运气

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-10T04:12:05.873

有多种方法。

1.  使用环境变量
2.  使用系统属性
3.  将其设置为 Web.xml 中的应用程序上下文参数

这是一个示例，显示`Option 1 and Option 2`

```
try {

    //Use Any Environmental Variable , here i have used CATALINA_HOME
    String propertyHome = System.getenv("CATALINA_HOME");           
    if(null == propertyHome){

        //This is a system property that is  passed
        // using the -D option in the Tomcat startup script
        propertyHome  =  System.getProperty("PROPERTY_HOME");
    }

    String filePath= propertyHome+"/properties/myapp.properties";

    Properties property = new Properties();         
    property.load(SystemTest.class.getClassLoader().getResourceAsStream(filePath));
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-10T17:33:31.850

我更喜欢通过 Tomcat 上下文描述符进行配置的选项。

这些 XML 文档被放置在文件夹中`tomcat/conf/Catalina/<host>/*.xml`

这指的是： [Externalizing Tomcat webapp config from .war 文件](https://stackoverflow.com/questions/13956651/externalizing-tomcat-webapp-config-from-war-file)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T03:45:20.190

在我们的项目中，我们将文件的路径配置为 vm 参数，这些参数将存储在 tomcat 属性和代码中，用于`System.getProperty(the parameter you config)`获取路径并读取属性文件，然后获取结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-15T11:27:02.287

我们将 webapp-config 目录的路径如下：

**/var/lib/tomcat7/webapps/webapp/WEB-INF/classes/system-properties-location.properties**

其中 **webapp** = 您的 webapp 文件的名称

以下是 system-properties-location.properties 文件的内容：

**位置=/var/lib/tomcat7/webapp-configs/webapp**

它指向一个外部位置以从中提取特定于环境的属性。这样我们就可以在 dev 、 staging 和 prod 中部署相同的战争，而无需修改战争内容。

# jquery - 从每个元素子字段中获取变量

> ID：15318579
> 
> 赞同：0
> 
> 时间：2013-03-10T03:27:59.410
> 
> 标签：jquery, field, variables

.我有一辆不合作的推车。当点击结帐按钮时，除了提交表单之外，它还需要将一些代码发送回我的服务器，这些代码是从每一行的字段中提取的。

HTML（简化版）

```
<div class="row">
<input type="text" readonly="readonly" class="pp_name" value="Sample product">
<input type="hidden" class="pp_id" value="1234">
<input type="hidden" class="pp_stock" value="5">
</div>

<div class="row">
<input type="text" readonly="readonly" class="pp_name" value="Another item">
<input type="hidden" class="pp_id" value="7456">
<input type="hidden" class="pp_stock" value="2">
</div>

<div class="row">
<input type="text" readonly="readonly" class="pp_name" value="Some other thing">
<input type="hidden" class="pp_id" value="9121">
<input type="hidden" class="pp_stock" value="3">
</div>

<input type="submit" value="Checkout" id="checkout"> 
```

我需要在提交时输出的脚本（它向我的服务器发送每个项目的更新库存计数，从 API 库调用函数）：

```
$('#checkout').click(function(){

$('.row').each(function(){
var itemId = $('.pp_id').val;
var fieldId = 100;       // This var is a constant, static value
var newStockcount = $('.pp_stock').val;
setapikey(1234567890);
setMetadata( itemId, fieldId, newValue, );
});

}); 
```

我在编写此脚本时尝试的每一个变体都无法获取每行中字段的值。setMetadata 函数没有任何问题，我在无数站点上使用它都没有问题。它只是从不起作用的字段中为其提供变量。

即使我为每一行设置一个 ID 并使用它来精确定位字段，也不好。即 $('#checkout').click(function(){

```
$('.row').each(function(){

$(this).attr('id', 'active_checkout_row'); //SET ID

var itemId = $('.pp_id').val;
var fieldId = 100;
var newStockcount = $('.pp_stock').val;
setapikey(1234567890);
setMetadata( itemId, fieldId, newValue, );

$(this).attr('id', 'inactive_checkout_row'); //UNSET ID

}); 
```

我已经做了两天了，所以如果有帮助的人能告诉我哪里出错了，我将不胜感激。

即使使用以下方法也不会产生任何结果：

```
var anyVariable = document.getElementById('active_checkout_row').getElementsByClassName('pp_name').value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:42:35.787

你快到了杰里米，

当您遍历每一行时，您需要找到每个子元素。目前，当您遍历每一行时，您正在使用**$('.pp_id')**进行全局搜索，但您真正想要做的是找到**.pp_id**，它是您所在行的子行。

此外，在 jQuery 中，您需要使用括号调用**.val()**来获取实际值。

这是获取所需内容的[jsFiddle](http://jsfiddle.net/6PdYL/)。

HTM 保持不变。

JS：

```
$('#checkout').click(function(){

    $('.row').each(function(){
    var itemId = $(this).find('input.pp_id').val();
    var fieldId = 100;       // This var is a constant, static value
    var newStockcount = $(this).find('input.pp_stock').val();
        console.log('itemid:'+itemId+' fieldId:'+fieldId+' newStockcount:'+newStockcount);
    });

}); 
```

# java - HttpServletResponse.sendError() 不会重定向到错误页面

> ID：15318583
> 
> 赞同：6
> 
> 时间：2013-03-10T03:29:06.553
> 
> 标签：java, servlets

我在 doFilter() 方法中有以下代码，我在其中获得了应用程序范围的 bean。

```
 if (request.getServletContext().getAttribute("resource")==null) {
        response.sendError(503);
        return;
    } 
```

我将 503 代码映射到 web.xml 中的特定错误页面。如果发生错误，我真的会在浏览器中获得错误页面的内容。但是地址栏中的地址不会因错误页面地址而改变：请求的 servlet 的地址离开了那里。这是正确的行为吗？我想明确告知重定向到错误页面。只能使用 sendRedirect() 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T14:09:25.433

这是正确的行为。当您使用 sendError() 时，它将使用错误页面响应当前请求。如果您希望 URL 更改为错误页面 URL，则需要使用 sendRedirect() 以重定向响应。

# android - 在当前应用的顶部显示其他内置应用（显示叠加）

> ID：15318584
> 
> 赞同：0
> 
> 时间：2013-03-10T03:29:09.573
> 
> 标签：android

我正在开发一个应用程序，它将与用户交互。我在 Google Play 上找到了一个名为“Assistant”的应用。当我说“谷歌地图”时，它加载了谷歌地图（内置应用程序）并显示在当前应用程序（助手）的顶部，类似地我说“facebook.com”它加载了网页“facebook.com”，我仍然与“助理”太棒了！

GooglePlay 上的助手：

[https://play.google.com/store/apps/details?id=com.speaktoit.assistant&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5zcGVha3RvaXQuYXNzaXN0YW50Il0](https://play.google.com/store/apps/details?id=com.speaktoit.assistant&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5zcGVha3RvaXQuYXNzaXN0YW50Il0)。

**我的问题：**

1.  如何显示它？

2.  任何示例代码或教程？

我找到了这个链接，它与我的问题相似：

[将一个活动覆盖在另一个活动上或将一个视图覆盖在另一个活动上](https://stackoverflow.com/questions/7878235/overlay-an-activity-on-another-activity-or-overlay-a-view-over-another)

[如何将一个视图显示为另一个视图的叠加层？](https://stackoverflow.com/questions/4901408/in-android-how-to-display-one-view-as-overlay-on-top-of-another-view)

提前致谢。

详细看我的图。 [http://imgur.com/NiJJoLk](https://imgur.com/NiJJoLk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T03:43:03.167

首先，我认为它是嵌入的，而不是另一个活动中的活动。[这](https://developers.google.com/maps/documentation/android/v1/hello-mapview)是在应用程序中嵌入谷歌地图的教程。这很简单。您可以将任何内容放入活动中。使用 google API 也很有帮助。关于使用语音命令或从语音命令中获取结果，我会检查[一下](https://stackoverflow.com/questions/4942808/voice-recognition-apis-will-google-voice-do-this)。这将解释如何实现语音命令，然后您可以启动为该特定命令制作的活动。一旦您知道在遇到减速带时从哪里开始，请让社区知道，并且可以回答有关编码的更直接的问题。我希望这可以帮助您朝着正确的方向前进:)

评论问题：

> 谢谢马克。你能给我一些细节吗，如何将活动嵌入到其他人？你的链接没有提到这个。谢谢

那么首先你必须了解android是基于视图和活动的。我发现最好为每个页面设置一个活动。因此，例如，如果用户按下按钮 A，那么您想要开始一个新活动。可以从一开始就设置下一个活动来处理您想要的一个任务。所以说按钮A是地图视图页面。您将按照指南设置带有地图视图的页面。现在要调用一个新的活动，说按下按钮，你会按照以下指导：

```
Intent back2MainScreen = new Intent(getApplicationContext(), MainScreen.class);
back2MainScreen.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(back2MainScreen); 
```

现在在上面的代码`MainScreen.class`中是您的源代码中的 Java 活动。该标志只是标准的，应该包括在内。然后`startActivity`开始下一个活动。你把它传给`Intent`它。您可以将捆绑包添加到 Itent，这将允许您通过活动传输数据。假设用户输入了邮政编码，并且您想放大地图上的该区域，那么您将希望将邮政编码传递给下一个活动，以便谷歌地图可以显示正确的区域。

这解释了从一项活动到下一项活动。Android 类似于将一大堆页面放在一起。您可以更改活动中的页面，但我喜欢使用后退按钮。因此，由于我没有很多页面（少于 15 个），因此最好为不同的任务设置不同的页面。您也可以拥有许多不同的视图并拥有它们，`INVISIBLE`或者`GONE`直到用户单击按钮。我不建议您这样做，特别是如果您刚开始使用 android。它会让你感到困惑。

# scala - Scala 单例在类型层次结构中的位置

> ID：15318586
> 
> 赞同：2
> 
> 时间：2013-03-10T03:29:38.123
> 
> 标签：scala

给定一个在 Scala 中定义的单例对象...

```
object Foo; 
```

有一个类型，Foo.type，它表示该对象唯一符合的类型。凉爽的！

但我对这种类型还有什么了解。任何事物？我可以看出 Foo.type 是 AnyRef 的子类型。凉爽的！

```
import scala.reflect.runtime.universe.TypeTag
val fooTypeTypeTag = implicitly[TypeTag[Foo.type]]
val anyRefTypeTag = implicitly[TypeTag[AnyRef]]
fooTypeTypeTag.tpe <:< anyRefTypeTag.tpe            // true
fooTypeTypeTag.tpe =:= anyRefTypeTag.tpe            // false 
```

但是无论如何要知道 Foo.type 是否是 AnyRef 的直接后代？是否存在一些所有单例对象（通过“对象 XXX”定义的事物）都符合的通用类型？它[不是 scala.Singleton](https://stackoverflow.com/questions/11594828/why-do-string-literals-conform-to-scala-singleton)，但似乎很自然，所有类型 Foo.type、Bar.type 等都应该表达一些共同的特征。这样的事情存在吗？

在完成为 Foo.type 找到 TypeTag 的工作之后，是否有一些方法可以利用 Scala 反射来探索 Foo.type 的超类型和特征？显然这样的事情不可能详尽无遗，例如潜在的鸭子类型的组合爆炸，但不能通过反射爬上已声明或内置的继承层次结构似乎仍然很奇怪。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T03:42:09.467

单例之间没有共同特征，但它们不一定是 的直接后代`AnyRef`，因为 an`object`可以扩展 a`class`或`trait`.

# git - Git 在 Windows 7 中打开 Chrome 寻求帮助？

> ID：15318593
> 
> 赞同：0
> 
> 时间：2013-03-10T03:30:55.737
> 
> 标签：git, windows-7

我已将 html 文件设置为默认使用 Notepad++ 打开（在 Windows 中）。

当我键入类似的`git help commit`内容时，它使用 Notepad++ 打开 html 手册页而不是 Chrome。

我想将 Notepad++ 保留为默认的 html 编辑器，但我希望 Git 在 Chrome 中打开手册/帮助页面。我怎样才能做到这一点？

我将此添加到我的**.gitconfig**文件中：

```
[web]
    browser = googchr
[browser "googchr"]
    cmd = \"/C/Users/MY_USERNAME/AppData/Local/Google/Chrome/Application/chrome.exe --new-window\" 
```

我这样做是因为在 Mac 上这个人也有类似的工作：[https](https://stackoverflow.com/a/4948249/470749) ://stackoverflow.com/a/4948249/470749 。

但对我来说，Notepad++ 一直在打开而不是 Chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-17T16:01:09.343

## 这适用于 Windows 10 上的 Git Bash

```
[web]
    browser = googchr
[browser "googchr"] 
    path = C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe 
```

非常感谢[https://stackoverflow.com/a/44639359/470749](https://stackoverflow.com/a/44639359/470749)！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T03:40:05.193

解决这个问题的一种方法是

```
google-chrome (html file) 
```

其中html文件是帮助文件的地址。你甚至可以使用快捷方式。

他的以下解决方案对您有用吗？

```
git config --global web.browser ff
git config --global browser.ff.cmd "open -a Firefox.app" 
```

# wpf - How to display image in its actual size with a ScrollViewer using WPF?

> ID：15318602
> 
> 赞同：0
> 
> 时间：2013-03-10T03:32:30.517
> 
> 标签：wpf, image, scrollview

I want to display image in its actual size with a ScrollViewer. I've put the Image Control in a scrollviewer but found that the scrollviewer has no effect. The picture shows is either resized to fit the Image Control or only show a part of it, with no scrollbar. What's the problem?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T07:38:43.367

Stretch="None"
and if nedded HorizontalScrollBarVisibility="Auto" on the scrollViewer

```
<ScrollViewer>
    <Image Source="C:\Untitled.bmp" Stretch="None"/>
</ScrollViewer> 
```

# java - 另一个线程从队列中删除了元素？

> ID：15318607
> 
> 赞同：0
> 
> 时间：2013-03-10T03:33:21.857
> 
> 标签：java, multithreading, concurrency

我有多个线程使用共享变量`queue`。处理它（打印）后，它从队列中删除元素

```
protected void tryToPrint() {
    while (true) {
        try {
            if (printer.isAvailable() && printer.isFair(this)) {
                queueLock.lock();
                try {
                    if (queue.isEmpty()) 
                        break;

                    printer.requestToPrint(this, queue.get(0));
                    queue.remove(0);
                    synchronized (System.out) {
                        System.out.println(getName() + " printed. queue size: " + queue.size());
                    }
                } finally {
                    queueLock.unlock();
                }
            } else {
                printer.requestToPrintNext(this);
            }
        } catch (IllegalPrintStateException e) {
            e.printStackTrace();
        }
    }
} 
```

但我越来越

```
Exception in thread "Thread-1" java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.ArrayList.rangeCheck(ArrayList.java:604)
    at java.util.ArrayList.remove(ArrayList.java:445)
    at printer.ClientImpl.tryToPrint(ClientImpl.java:34)
    at printer.AbstractClient.run(AbstractClient.java:28)
    at java.lang.Thread.run(Thread.java:722) 
```

我想另一个线程以某种方式从队列中删除了一个元素？我怎么可能通过我锁定它？

**更新**：队列实际上是一个`ArrayList<File>()`. 如果它不是线程安全的，这有关系吗？我确实锁定了`queueLock`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:21:41.727

关于您的具体示例，什么是 queueLock？它是在哪里创建的？它是否在线程之间共享（例如静态 - 我的猜测是否定的，这可能会导致您的问题）？需要更多信息。

如果您不想担心所有这些问题，那么只需使用同步重写它。更简单...

```
protected void tryToPrint() {
    while (true) {
        try {
            if (printer.isAvailable() && printer.isFair(this)) {
                synchronized(queue) {
                    if (queue.isEmpty()) 
                        break;

                    printer.requestToPrint(this, queue.get(0));
                    queue.remove(0);
                    synchronized (System.out) {
                        System.out.println(getName() + " printed. queue size: " + queue.size());
                    }
                }
            } else {
                printer.requestToPrintNext(this);
            }
        } catch (IllegalPrintStateException e) {
            e.printStackTrace();
        }
    }
} 
```

# android - 如何以编程方式主动检查屏幕开/关？

> ID：15318608
> 
> 赞同：2
> 
> 时间：2013-03-10T03:33:24.987
> 
> 标签：android

我发现下面的代码可以被动地做到这一点。

```
context.registerReceiver(this.ScreenOffReceiver, new IntentFilter(Intent.ACTION_SCREEN_OFF)); 
```

但是如何以积极的方式获得这一点呢？也就是说，在任何时候，代码都可以检查当前屏幕是打开还是关闭。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T04:30:58.500

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
boolean isScreenOn = pm.isScreenOn(); 
```

是你在寻找吗？

# ruby - 对具有非连续索引的数组进行多重赋值

> ID：15318610
> 
> 赞同：0
> 
> 时间：2013-03-10T03:33:38.540
> 
> 标签：ruby, arrays

红宝石新手在这里。如何将多个元素分配给索引不连续的数组？我有一个长度为 1000 的数组，我希望将索引 30,40,50...90 分配给 strings `["thirty", "fourty", "fifty", "sixty", "seventy", "eighty", "ninety"]`。我这样做的尝试是这样的：

```
tableWords = Array.new(1000)
tableWords[(30..90).step(10).to_a] = ["thirty", "fourty", "fifty", "sixty", "seventy", "eighty", "ninety"] 
```

我不认为 Ruby 中的数组赋值是这样工作的，但我不知道该怎么做。谷歌搜索只告诉我当范围是连续的时如何进行多个数组分配，例如 1,2,3,4,...30。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:39:58.873

你可以这样做：

```
indices = ["thirty", "fourty", "fifty", "sixty", "seventy", "eighty", "ninety"]    
(30..90).step(10).each_with_index {|a, i| tableWords[a] = indices[i]} 
```

# php - 基于PHP转发域邮件

> ID：15318614
> 
> 赞同：1
> 
> 时间：2013-03-10T03:34:41.477
> 
> 标签：php, database, wordpress, email, forward

我有一个基于 Wordpress 的网站，并且电子邮件被发送到我域中的通用地址，例如president@example.com、press@example.com 等。

有没有办法接收到我的域的所有电子邮件，通过 PHP 页面（或任何其他类型的服务器端脚本）处理它们，然后根据脚本将它们转发到新的电子邮件地址？我希望能够自动将电子邮件转发给我网站上的不同用户。例如，发送到president@example.com 的电子邮件将检查Wordpress 数据库以查看谁是该组织的当前总裁，并将消息转发到为他存档的用户电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:39:25.183

最好与[Mailgun](http://www.mailgun.com/)等第三方服务集成。他们有一个功能，可以将收到的邮件发布到您服务器上的脚本中，然后您可以使用 PHP 对其进行解析。

有关 Mailgun 功能的更多文档，请参阅[此页面](http://documentation.mailgun.net/quickstart.html#receiving-and-parsing-email)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T03:37:36.057

您需要一个适用于您的域的 Catch-All 电子邮件地址。万能的电子邮件地址将接收发送到您域中不存在的任何电子邮件地址的电子邮件。

[http://en.wikipedia.org/wiki/Catch-all](http://en.wikipedia.org/wiki/Catch-all)

这是解决您问题的可能方法吗？

# java - 为什么 Java 不支持 <<< 运算符

> ID：15318617
> 
> 赞同：20
> 
> 时间：2013-03-10T03:35:30.697
> 
> 标签：java, oop

为什么Java不支持`<<<`（无符号左移）运算符，但支持`>>>`（无符号右移）运算符？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-10T03:39:41.687

> Java添加了运算符“>>>”来执行逻辑右移，但是由于**逻辑和算术左移操作是相同的**，所以Java中没有“<<<”运算符。

来自[Java中的转变...](http://en.wikipedia.org/wiki/Bitwise_operation#Shifts_in_Java)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-10T03:53:44.507

> 为什么Java不支持`<<<`（无符号左移）运算符，但支持`>>>`（无符号右移）运算符？

因为（假设的）无符号左移运算符与现有的左移运算符完全相同。

（提示：将二进制整数乘以 2 需要左移 1 并使最右边的位为零，无论整数表示是有符号还是无符号。在纸上写一些例子并自己测试。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-10T04:16:13.760

> 为什么 Java 不支持 <<<（无符号左移）运算符，但支持 >>>（无符号右移）运算符？

那是因为当你左移位时，最左边的位（AKA SIGNED Bit）无论如何都会丢失。

由于无符号左移运算符的作用与现有的左移运算符完全相同，因此我们没有它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-21T07:10:45.467

我认为这是一个设计错误。<< 不是算术移位。<< 如果你这样做，应该乘以 2

> 0xF0FFFFFF << 4

它返回一个正数！负数乘以 2 永远不会得到正数。<< 正在做 <<< 工作。

# java - 未报告的异常 FileNotFoundException; 必须被抓住或宣布被扔掉

> ID：15318621
> 
> 赞同：1
> 
> 时间：2013-03-10T03:36:33.050
> 
> 标签：java

我的代码导致以下错误 - 为什么会这样？

```
2 errors found:
File: C:\Users\Name\P4.java  [line: 44]
Error: C:\Users\Name\P4.java:44: unreported exception FileNotFoundException; must be caught or declared to be thrown
File: C:\Users\Name\P4.java  [line: 46]
Error: C:\Users\Name\P4.java:46: exception java.io.FileNotFoundException is never thrown in body of corresponding try statement 
```

这是导致错误的代码：

```
case Command.CMD_DO:
      NextCommand tmpReader;
      try {
       tmpReader = new NextCommand( c.getArg() );
      } 
      catch (FileNotFoundException e) {
       tmpReader = null;
       System.out.println( "Unable to open file:");
       System.out.println( "   " + e.getMessage());
      } 
```

全班都在这里：

```
import java.io.FileNotFoundException;
import java.util.Stack;

public class P4 {

 public static void main( String[] args ) {

  // Start off assuming we're reading from the console and create a stack
  // for storing "pushed" readers
  NextCommand reader = new NextCommand();
  Stack<NextCommand> cmdStack = new Stack<NextCommand>();

  // The command we get and a flag to indicate whether it's time to exit
  Command c;
  boolean userRequestsExit = false;

  // For storing the history. We keep track of the depth of the stack, too.
  // Note that we could just use cmdStack.size() but that's a Vector operation rather
  // than a "pure" stack operation, so for the sake of pedagogy, we won't...
  History h = new History();
  int nestingLevel = 0;

  do {
   // Get a command
   c = reader.get();
   h.add( c, nestingLevel );

   switch (c.getCommand()) {

   // Do nothing in response to a comment
     case Command.CMD_COMMENT:
      break;

   // DO filename. See if we can start a reader up from the file.
   // If not, then print an error and continue from where we left off.
   // If so, push the current reader onto a stack and continue with the new one
     case Command.CMD_DO:
      NextCommand tmpReader;
      try {
       tmpReader = new NextCommand( c.getArg() );
      } 
      catch (FileNotFoundException e) {
       tmpReader = null;
       System.out.println( "Unable to open file:");
       System.out.println( "   " + e.getMessage());
      }
      // Success. Save current reader and switch to new one. We are
      // now nested one level deeper in DO files...
      if (tmpReader!=null) {
       cmdStack.push(reader);
       reader = tmpReader;
       nestingLevel++;
      }
      break;

   // DOC id "title" text 
     case Command.CMD_DOC:
    String[] docParts = c.getArg().split( "\"" );
    if (docParts.length != 3) {
     System.out.println( "ERROR: Invalid format: use DOC docid \"title\" text");
    }
    else {
     Document d = new Document( docParts[0].trim(),
              docParts[1].trim(),
              docParts[2].trim() );
     //Add document to database
     Database.documentList.add(d);
     if (d==null || d.getDocid()==null)
      System.out.println( "ERROR: Invalid DOC: " + d.getTitle() );
     else
      System.out.println( "Added document " + d.getDocid() );
    }
    break;

   // HISTORY
     case Command.CMD_HISTORY:
      System.out.println( h );
      break;

   // END. If the command-source stack is empty, we're done.
   // Otherwise, revert to the previous one and note that we are now
   // one level back up in the nesting of DO files.
     case Command.CMD_END:
    if (cmdStack.empty())
     userRequestsExit = true;
    else {
     reader = cmdStack.pop();
     nestingLevel--;
    }
    break;

   // Others
     default:
    System.out.println ("Only DOC, DO, HISTORY, and END commands work right now.");
   }
  } while (!userRequestsExit);

  // Courtesy exit message.
  System.out.println( "Thank you for playing." );
  System.out.println( "You processed " + h.numCommands()
       + " command"
       + (h.numCommands()==1 ? "" : "s")
       + " before you exited." );
 }

} 
```

这是 NextCommand 类：

```
import java.util.*;
import java.io.*;

public class NextCommand implements NextCommandInterface  {

 private Scanner inStream;
 private boolean promptUser;
 private String nameOfFile;

 // Default constructor uses system input and requests prompting
 public NextCommand() {
  inStream = new Scanner( System.in );
  promptUser = true;
  nameOfFile = null;
 }

 // Alternate constructor to allow input from a file (no prompting)
 public NextCommand(String filename) throws FileNotFoundException {
  inStream = new Scanner( new File(filename));
  promptUser = false;
  nameOfFile = filename;
 }

 // Ask user for a command and process it to return a Command
 public Command get() {
  String inLine;

  // If we have no way to get input, pretend we hit the end
  if (inStream==null)
   return new Command( "END" );

  // Optionally prompt for the command
  if (promptUser)
   System.out.print( "Command? ");

  // Get a command (have to make sure EOF wasn't pressed)
  if (!inStream.hasNextLine())
   return new Command( "END" );

  inLine = inStream.nextLine();

  // Clean it up and return the results
  return new Command( inLine );

 }

 // A whimsical way to print this object out.
 public String toString() {
  if (nameOfFile == null)
   return "Commands being accepted from standard input";
  else
   return "Commands being accepted from " + nameOfFile;
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T13:59:10.833

将 throws 添加`FileNotFoundException`到您的`main()`方法调用中，如下所示：

```
public static void main(String[] args)  throws FileNotFoundException { 
```

然后删除 try-catch 块。让我知道情况如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T04:43:57.003

编译错误是说`FileNotFoundException`在`P4`. 有`java.io.FileNotFoundException`一个你已经导入并试图捕捉的东西。然后是构造函数抛出了一些其他`FileNotFoundException`异常（根据编译器）`NextCommand`。

但这没有意义...

如果代码是你给我们看的，编译错误是你给我们看的，那么我能想到的唯一解释就是*你需要重新编译一些东西*。

具体来说，您已经更改了导入`NextCommand`而没有重新编译它，然后是`P4`类。

我建议您删除然后重新编译所有“.class”文件。

* * *

^(唯一的另一种可能性是您`FileNotFoundException`在与您展示给我们的两个类相同的包中定义了一个虚假版本。如果你这样做了，你的伪类将优先于真正的类。但是为了让这个“工作”作为解释，你还需要对`Scanner`... 做同样的事情，因为真正的`Scanner`构造函数会抛出真正的`FileNotFoundException`... ，这是被检查的，因此必须在`NextCommand`构造函数签名中声明。在这一点上，我将把它视为“难以置信”。)

# c++ - 如何在directx3d中转换人体骨骼顶点的子集顶点？

> ID：15318626
> 
> 赞同：0
> 
> 时间：2013-03-10T03:37:47.507
> 
> 标签：c++, math, animation, transform, direct3d

我想通过一个矩阵来转换一个顶点（比如一个vecotr），但是我在direct9 msdn中找不到像向量乘法矩阵这样的api。所以我的问题是：我应该自己编码，还是有其他的方法可以实现吗？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T16:43:09.750

使用 D3DX 实用程序库：[d3dx msdn 参考](http://msdn.microsoft.com/en-us/library/bb147179%28v=vs.85%29.aspx)

具体：[D3DXVec3Transform msdn 参考](http://msdn.microsoft.com/en-us/library/windows/desktop/bb205520%28v=vs.85%29.aspx)

Win8 已弃用 D3DX 库：[D3DXMath](http://msdn.microsoft.com/en-us/library/windows/desktop/ff729728%28v=vs.85%29.aspx)您可以使用 D3DXMath 库中的[XMVector3Transform 方法](http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.transformation.xmvector3transform%28v=vs.85%29.aspx)。

# ruby - Ruby 提取 Hash 值并保存到新的 Hash

> ID：15318627
> 
> 赞同：0
> 
> 时间：2013-03-10T03:37:56.253
> 
> 标签：ruby, ruby-on-rails-3.2

这是一个真正的红宝石新手问题。我有一个看起来像这样的哈希

```
@hash1 = {1=>{"a"=>1,"b"=>2,"c"=>3}} 
```

我想提取值并将其存储在这样的新哈希中

```
{"a"=>1,"b"=>2,"c"=>3} 
```

我试着做

```
@hash2 = @hash1.values 
```

但这给了我一个看起来像的数组

```
[{"a"=>1,"b"=>2,"c"=>3}] 
```

我不知道如何将其转换为哈希。我可能错过了一些非常简单的东西。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:41:52.287

简单的。只是做你所做的，但`[0]`卡在最后（获取第一个元素）：

```
@hash.values[0] #=> {"a"=>1,"b"=>2,"c"=>3} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T05:51:25.083

有点不同的方法是使用您正在寻找的确切密钥：

```
@hash1 = {1=>{"a"=>1,"b"=>2,"c"=>3}}
@hash2 = @hash1[1] 
```

现在变量`@hash2`将包含`{"c"=>3, "b"=>2, "a"=>1}`

# php - 如果一行中的 2 列与另一行匹配，则将其视为重复条目 MySQL

> ID：15318629
> 
> 赞同：1
> 
> 时间：2013-03-10T03:38:18.507
> 
> 标签：php, mysql, sql, duplicates

例如，`'Column_1'`可能有重复的条目，也`'Column_2'`可能有重复的条目，但一行可能不包含与`'Column_1' AND 'Column_2'`另一行相同的值。在这种情况下希望返回重复输入错误。

我知道如何做到这一点是 PHP，但我正在尝试用 SQL 编写脚本。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:41:43.743

此处正确的方法是在这两列中创建唯一索引。然后数据库将在尝试插入重复项时返回密钥冲突。

```
ALTER TABLE your_table ADD UNIQUE KEY `uniq_column1_column2` (`Column_1`, `Column_2`); 
```

这是一个演示：[http ://sqlfiddle.com/#!2/631373](http://sqlfiddle.com/#!2/631373)

# c# - 使用 Model First 生成代码时出现实体框架错误

> ID：15318630
> 
> 赞同：0
> 
> 时间：2013-03-10T03:38:19.360
> 
> 标签：c#, entity-framework, entity-framework-5

如上图所示，我定义了一个`Customer`带有主键`Id`、a`FirstName`和 a的实体`LastName`。我保存了模型文件并尝试构建解决方案。我收到以下构建错误：

![在此处输入图像描述](../Images/4e6ab82da8a0ef77664806754c0d25e9.png)

我在 Visual Studio 2012 上使用 Entity Framework 5。我的目的是设计模型，然后生成数据库代码。知道可能出了什么问题吗？

这是更多信息：

![在此处输入图像描述](../Images/c13d39823bd5beb2ad8b8cbffe35537d.png)

编辑。更多信息：

![在此处输入图像描述](../Images/41c7d86c6e4953e3dc3a56c6ff0b09ea.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:45:27.100

转到您的模型浏览器并删除那里的重复属性。

# c++ - C++ 属于条件

> ID：15318631
> 
> 赞同：1
> 
> 时间：2013-03-10T03:38:36.703
> 
> 标签：c++

我需要用 ∉ 做一个 if 条件（不属于）

条件：

```
if tj ∉ A(fi) where A(fi) contains some elements 
```

例子：

```
A(f1)= t1, t2 A(f2)= t1, t3 
```

所以如果 t3 ∉ A(f1) 做某事。

我的问题是我不知道如何在 C++ 中执行 ∉

**编辑：**

谢谢你的回答。

我还有一个问题，但我不知道这是否真的可能，或者我是否梦想太多。我需要多次运行我的程序，但每次 A(fi) 中的元素都会改变。

我知道可以随机使用 0 和 1。所以我在想，不是 put t1 而是用 0 或 1 替换，但是在我不知道如何编写命令之后。

就像我有 A(f1) ={1, 0,1,0} 和 A(f2)={0,1,1,0} 所以 t1 出现在 A(f1), t2 出现在 A(f2), t3出现在 A(f1) 和 A(f2) 等。

对于 set 函数，它写道：

“集合是按照特定顺序存储独特元素的容器。” 所以有可能给订单起个名字

所以我的问题是你认为这是否可能以及我如何链接 t1、t2、t3 ......？

我发现另一个问题是我可能会创建更多的集合来拥有超过 2 或 A(fi)，数量不是提前的。我没有发现如何在不同时间创建不同数量的集合。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T03:44:09.250

您可以为此使用[std::set](http://www.cplusplus.com/reference/set/set/)，这是一个示例：

```
#include <iostream>
#include <set>
#include <string>

int main ()
{
  std::set<std::string> myset;

  myset.insert( "t1") ;
  myset.insert( "t2") ;

  if( myset.count( "t2") != 0 )
  {
     std::cout << "Set contains t2" << std::endl; 
  }

  if( myset.count( "t3") != 0 )
  {
     std::cout << "Set contains t3" << std::endl; 
  }

  return 0;
} 
```

以及使用[std::includes](http://en.cppreference.com/w/cpp/algorithm/includes)的示例：

```
#include <iostream>
#include <string>
#include <algorithm>
#include <cctype>
#include <vector>

int main ()
{
  std::vector<std::string> v1 {"t1", "t2", "t3", "t4" };
  std::vector<std::string> v2 {"t2", "t4"};
  std::vector<std::string> v3 {"t3"};  

  std::cout << "v1 contains the follows elments of v2:" << std::endl ;
  for (auto i : v2){
     std::cout << i << ' ';
     std::cout << ": " << std::includes(v1.begin(), v1.end(), v2.begin(), v2.end()) << std::endl ;
  }

  std::cout << "v1 contains the follows elments of v3:" << std::endl ;
  for (auto i : v3){
     std::cout << i << ' ';
     std::cout << ": " << std::includes(v1.begin(), v1.end(), v2.begin(), v2.end()) << std::endl ;
  }

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T03:43:06.347

使用[Set](http://www.cplusplus.com/reference/set/set/)容器来存储一组元素。然后使用该方法`count`并检查其返回值是否为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T03:43:23.043

假设这`A`是一个返回 a `std::set`（或对 a 的引用`std::set`）的函数：

```
auto& s = A(f1);
if(s.find(t3) == s.end())
  std::cout << "Not in set\n"; 
```

# c# - 如何使用 AutoFac 注册这个 .NET 接口？

> ID：15318632
> 
> 赞同：0
> 
> 时间：2013-03-10T03:38:39.670
> 
> 标签：c#, .net, dependency-injection, autofac

我正在尝试使用 AutoFac 执行以下操作（样本取自[此处](https://stackoverflow.com/questions/5516601/asp-net-mvc-3-ravendb-autofac-issue-plus-2-other-autofac-questions)和[此处](https://stackoverflow.com/questions/13279942/register-ravendb-using-autofac)）：

```
builder.Register(c => c.Resolve<IDocumentStore>().OpenSession())          
       .InstancePerLifetimeScope(); 
```

问题是，在当前版本的 AutoFac 中，我得到一个编译错误`c.Resolve`

有人可以告诉我如何注册一个实例方法`IDocumentSession`给我的.`IDocumentStore``OpenSession()`

![在此处输入图像描述](../Images/1ab46eae99805ef7db5b0d8b7c398f51.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T03:59:18.570

```
builder.RegisterInstance(documentStore).As<IDocumentStore>();

builder.Register(x => x.Resolve<IDocumentStore>().OpenSession())
       .As<IDocumentSession>()
       .InstancePerLifetimeScope(); 
```

# vba - 将两张 Excel 工作表合并为一张 Excel 工作表

> ID：15318633
> 
> 赞同：0
> 
> 时间：2013-03-10T03:38:48.473
> 
> 标签：vba, excel

我在 C:\ADISE\Export 中有两张 Excel 表格。第一个数据为

```
rollno name mark1 mark2 mark3 
```

和第二张excel表为

```
rollno name mark4 mark5 mark6 mark7 mark8 
```

我需要将这些合并到一张excel表中

```
rollno name mark1 mark2 mark3 mark4 mark5 mark6 mark7 mark8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:26:53.903

在你的第二张表中，你可以在顶部放置几个公式来使用 ROLLNO 进行 VLOOKUP 以获得 mark4 mark5 mark6 mark7 mark8

就像是：

```
=VLOOKUP(A:A,Sheet2!A:G,3) 
```

高温高压

菲利普

# c - 在 C 中传递指向字符串的指针

> ID：15318634
> 
> 赞同：0
> 
> 时间：2013-03-10T03:39:13.137
> 
> 标签：c, hashmap

我只是在学习 C 中的指针。我正在为哈希映射使用以下结构：

```
struct hashLink {
   KeyType key; /*the key is used to look up a hashLink*/
   ValueType value; /*an int*/
   struct hashLink * next; /*these are like linked list nodes*/
};

struct hashMap {
    hashLink ** table; /*array of pointers to hashLinks*/
    int tableSize; /*number of buckets in table*/
    int count; /*number of hashLinks in table*/
}; 
```

使用命令行，我给程序一个包含测试语句的文件的名称，例如“All's fair in love and in war”。使用循环，我使用了一个名为 getWord 的方法，它返回`char* word`. 仍在循环中，然后它调用并将 hashMap`word`和值`1`传递给 insertMap()。

insertMap函数如下：

```
void insertMap (struct hashMap * ht, KeyType k, ValueType v)
{
    int idx;
    idx = stringHash(k) % ht->tableSize; //hash k to find the index

    if (idx < 0) idx += ht->tableSize;

    if (containsKey(ht, k)) {  //check to see if k is already in the hash map
            ht->table[idx]->value++;  // if yes, increment value to reflect number of times a word appears in the sentence.
        }
    else {  // if k is not in the hashmap, create a new hashLink
        struct hashLink *newLink = (struct hashLink *)malloc(sizeof(struct hashLink));
        newLink->value = v;
        newLink->key = k;
        newLink->next = ht->table[idx];
        ht->table[idx] = newLink;
        ht->count++;
    }
} 
```

这就是问题所在。这是一个带有链接的哈希图。当第二次传递一个单词时，程序不会将其识别为同一个单词，并在哈希映射中创建一个新链接。例如，在上面的句子示例中，使用调试器，我可以看到“in”的第一个实例的键是`0x8f4d00 'in'`. 下一个实例可能是`0x8f4db8 'in'`。显然，我没有`char* word`正确使用，因为一旦它被传递到 insertMap as 中`KeyType key`，就会为第二个“in”创建一个新的 hashLink。

我已经尝试了很多事情，但我开始遇到分段错误，并认为我最好在造成真正的损害之前退出:)。`char* word`在我将它传递给之前，我应该如何使用的任何建议`insertMap()`，以便只传递和存储单词本身，而不是指向它的指针，将不胜感激。还是我应该继续传递指针，但处理方式与现在不同？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:55:00.220

您需要比较`char *word`指针指向的值，但您通常仍希望将指针本身传递给您的函数。在那里，您取消引用指针以检查它在内存中指向的内容。

例如，如果您想将 hashmap 中的键与 a 进行比较`char *k`：

```
strncmp(ht->table[i]->key, k, length); 
```

你可以很简单地自己做这个：

```
int compare_strings(char *s1, char *s2, int len)
{
  int i;
  for (i = 0; i < len; i++)
    if (*s1 != *s2)
      return 0;

  return 1;
} 
```

上述函数将比较和中的`len`字符。这只是一个示例，通常您需要进行边界检查并测试传入的指针。`s1``s2`

# delphi - 如何在 Delphi 中将图片插入 TrichEdit？

> ID：15318636
> 
> 赞同：4
> 
> 时间：2013-03-10T03:39:27.813
> 
> 标签：delphi, delphi-xe3

我在网上搜索了如何在`RichEdit`. 我只发现插入`TImage`Richedit 或其他第 3 部分组件来为我做这件事。我不想使用其他组件或插入`TImage`RichEdit。

有没有其他方法可以做到这一点？

我想将它插入到行中，以便我可以在其上使用诸如 justify 之类的段落操作（插入`TImage`不提供此功能，因为我在示例中发现并经过测试，我错了吗？）。我想写一些类似`TJVRichEdit`（在 JVCL 包中）在 Richedit 中重新调整图片大小的内容可以忽略。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T19:53:20.777

如果您可以将图像包装在[`IOleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd542709.aspx)接口内，例如通过[`OleCreateFromData()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms691211.aspx)or[`OleCreateFromFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms690116.aspx)函数，那么您可以使用[`EM_GETOLEINTERFACE`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb788041.aspx)消息从接口中检索[`IRichEditOle`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774306.aspx)接口`TRichEdit` ，然后调用其`InsertObject()`方法来插入实际图像。棘手的部分是首先将图像包装在 an[`IOleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd542709.aspx)中，但可以通过一些工作来完成。

**更新：**这是MSDN在以下文章中提供的信息的粗略翻译：

[如何使用 Visual C++ 6.0 中的 RichEdit 控件将位图插入 RTF 文档](http://support.microsoft.com/kb/220844)

```
uses
  ..., Winapi.ActiveX, RichOle;

var
  RichEditOle: IRichEditOle;
  LockBytes: ILockBytes;
  ClientSite: IOleClientSite;
  Storage: IStorage;
  Image: IOleObject;
  Obj: REOBJECT;
  Fmt: FORMATETC;
begin
  if RichEdit_GetOleInterface(RichEdit1.Handle, RichEditOle) then
  begin
    ZeroMemory(@Fmt, SizeOf(Fmt));
    Fmt.cfFormat := 0;
    Fmt.ptd := nil;
    Fmt.dwAspect := DVASPECT_CONTENT;
    Fmt.lindex := -1;
    Fmt.tymed := TYMED_NULL;

    OleCheck(CreateILockBytesOnHGlobal(nil, True, LockBytes));
    OleCheck(StgCreateDocfileOnILockBytes(LockBytes, STGM_SHARE_EXCLUSIVE or STGM_CREATE or STGM_READWRITE, 0, Storage));
    OleCheck(RichEditOle.GetClientSite(ClientSite));
    OleCheck(OleCreateFromFile(CLSID_NULL, PChar(FileName), IOleObject, OLERENDER_DRAW, @Fmt, ClientSite, Storage, Image));
    OleSetContainedObject(Image, True);

    ZeroMemory(@Obj, sizeof(Obj));
    Obj.cbStruct := SizeOf(Obj);
    Obj.cp := REO_CP_SELECTION;
    OleCheck(Image.GetUserClassID(Obj.clsid));
    Obj.poleobj := Image;
    Obj.pstg := Storage;
    Obj.polesite := ClientSite;
    Obj.sizel.cx := 0;
    Obj.sizel.cx := 0;
    Obj.dvaspect := DVASPECT_CONTENT;
    Obj.dwFlags := 0;
    Obj.dwUser := 0;

    OleCheck(RichEditOle.InsertObject(Obj));
  end;
end; 
```

这是该单元的第三方版本`RichOle`（Embarcadero 不提供该版本）：

```
{
  RichOle.pas

  Pascal version of richole.h (version: 2005 platform SDK).

  Version 1.3d - always find the most current version at
  http://flocke.vssd.de/prog/code/pascal/rtflabel/

  Copyright (C) 2001-2009 Volker Siebert <flocke@vssd.de>
  All rights reserved.

  Permission is hereby granted, free of charge, to any person obtaining a
  copy of this software and associated documentation files (the "Software"),
  to deal in the Software without restriction, including without limitation
  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  and/or sell copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.
}

{$I DelphiVersion.inc}

{$IFDEF CPPBUILDER}
{$HPPEMIT '#include <RichOle.h>'}
{$ENDIF}

unit RichOle;

{$WEAKPACKAGEUNIT}
{$MINENUMSIZE 4}

interface

uses
  Windows, ActiveX, RichEdit;

(*
 *      RICHOLE.H
 *
 *      Purpose:
 *              OLE Extensions to the Rich Text Editor
 *
 *      Copyright (c) 1985-1999, Microsoft Corporation
 *)

// Structure passed to GetObject and InsertObject
type
  PReObject = ^TReObject;
  {$IFDEF CPPBUILDER}{$EXTERNALSYM _REOBJECT}{$ENDIF}
  _REOBJECT = packed record
    cbStruct: DWORD;            // [00] Size of structure
    cp: LongInt;                // [04] Character position of object
    clsid: TCLSID;              // [08] Class ID of object
    oleobj: IOleObject;         // [18] OLE object interface
    stg: IStorage;              // [1C] Associated storage interface
    olesite: IOLEClientSite;    // [20] Associated client site interface
    sizel: TSize;               // [24] Size of object (may be 0,0)
    dvaspect: DWORD;            // [2C] Display aspect to use
    dwFlags: DWORD;             // [30] Object status flags
    dwUser: DWORD;              // [34] Dword for user's use
  end;
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REOBJECT}{$ENDIF}
  REOBJECT = _reobject;
  TReObject = _reobject;

const
  // Flags to specify which interfaces should
  // be returned in the structure above
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_GETOBJ_NO_INTERFACES}{$ENDIF}
  REO_GETOBJ_NO_INTERFACES  = $00000000;
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_GETOBJ_POLEOBJ}{$ENDIF}
  REO_GETOBJ_POLEOBJ        = $00000001;
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_GETOBJ_PSTG}{$ENDIF}
  REO_GETOBJ_PSTG           = $00000002;
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_GETOBJ_POLESITE}{$ENDIF}
  REO_GETOBJ_POLESITE       = $00000004;
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_GETOBJ_ALL_INTERFACES}{$ENDIF}
  REO_GETOBJ_ALL_INTERFACES = $00000007;

  // Place object at selection
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_CP_SELECTION}{$ENDIF}
  REO_CP_SELECTION          = -1;  // why? cardinal(-1);

  // Use character position to specify object instead of index
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_IOB_SELECTION}{$ENDIF}
  REO_IOB_SELECTION         = -1;  // why? cardinal(-1);
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_IOB_USE_CP}{$ENDIF}
  REO_IOB_USE_CP            = -2;  // why? cardinal(-2);

  // Object flags
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_NULL}{$ENDIF}
  REO_NULL                  = $00000000;  // No flags
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_READWRITEMASK}{$ENDIF}
  REO_READWRITEMASK         = $0000003F;  // Mask out RO bits
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_DONTNEEDPALETTE}{$ENDIF}
  REO_DONTNEEDPALETTE       = $00000020;  // Object doesn't need palette
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_BLANK}{$ENDIF}
  REO_BLANK                 = $00000010;  // Object is blank
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_DYNAMICSIZE}{$ENDIF}
  REO_DYNAMICSIZE           = $00000008;  // Object defines size always
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_INVERTEDSELECT}{$ENDIF}
  REO_INVERTEDSELECT        = $00000004;  // Object drawn all inverted if sel
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_BELOWBASELINE}{$ENDIF}
  REO_BELOWBASELINE         = $00000002;  // Object sits below the baseline
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_RESIZABLE}{$ENDIF}
  REO_RESIZABLE             = $00000001;  // Object may be resized
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_LINK}{$ENDIF}
  REO_LINK                  = $80000000;  // Object is a link (RO)
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_STATIC}{$ENDIF}
  REO_STATIC                = $40000000;  // Object is static (RO)
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_SELECTED}{$ENDIF}
  REO_SELECTED              = $08000000;  // Object selected (RO)
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_OPEN}{$ENDIF}
  REO_OPEN                  = $04000000;  // Object open in its server (RO)
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_INPLACEACTIVE}{$ENDIF}
  REO_INPLACEACTIVE         = $02000000;  // Object in place active (RO)
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_HILITED}{$ENDIF}
  REO_HILITED               = $01000000;  // Object is to be hilited (RO)
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_LINKAVAILABLE}{$ENDIF}
  REO_LINKAVAILABLE         = $00800000;  // Link believed available (RO)
  {$IFDEF CPPBUILDER}{$EXTERNALSYM REO_GETMETAFILE}{$ENDIF}
  REO_GETMETAFILE           = $00400000;  // Object requires metafile (RO)

  // flags for IRichEditOle::GetClipboardData(),
  // IRichEditOleCallback::GetClipboardData() and
  // IRichEditOleCallback::QueryAcceptData()
  {$IFDEF CPPBUILDER}{$EXTERNALSYM RECO_PASTE}{$ENDIF}
  RECO_PASTE                = $00000000;  // paste from clipboard
  {$IFDEF CPPBUILDER}{$EXTERNALSYM RECO_DROP}{$ENDIF}
  RECO_DROP                 = $00000001;  // drop
  {$IFDEF CPPBUILDER}{$EXTERNALSYM RECO_COPY}{$ENDIF}
  RECO_COPY                 = $00000002;  // copy to the clipboard
  {$IFDEF CPPBUILDER}{$EXTERNALSYM RECO_CUT}{$ENDIF}
  RECO_CUT                  = $00000003;  // cut to the clipboard
  {$IFDEF CPPBUILDER}{$EXTERNALSYM RECO_DRAG}{$ENDIF}
  RECO_DRAG                 = $00000004;  // drag

type
  (*
   * IRichEditOle
   *
   * Purpose:
   *   Interface used by the client of RichEdit to perform OLE-related
   *   operations.
   *
   * //$ REVIEW:
   *   The methods herein may just want to be regular Windows messages.
   *)
  {$IFDEF CPPBUILDER}{$EXTERNALSYM IRichEditOle}{$ENDIF}
  IRichEditOle = interface(IUnknown)
    ['{00020D00-0000-0000-C000-000000000046}']
    // *** IRichEditOle methods ***
    function GetClientSite(out clientSite: IOleClientSite): HRESULT; stdcall;
    function GetObjectCount: LongInt; stdcall;
    function GetLinkCount: LongInt; stdcall;
    function GetObject(iob: LongInt; out ReObject: TReObject;
      dwFlags: DWORD): HRESULT; stdcall;
    function InsertObject(var ReObject: TReObject): HRESULT; stdcall;
    function ConvertObject(iob: LongInt; const clsidNew: TCLSID;
      lpStrUserTypeNew: LPCSTR): HRESULT; stdcall;
    function ActivateAs(const clsid, clsidAs: TCLSID): HRESULT; stdcall;
    function SetHostNames(lpstrContainerApp: LPCSTR;
      lpstrContainerObj: LPCSTR): HRESULT; stdcall;
    function SetLinkAvailable(iob: LongInt; fAvailable: BOOL): HRESULT; stdcall;
    function SetDvaspect(iob: LongInt; dvaspect: DWORD): HRESULT; stdcall;
    function HandsOffStorage(iob: LongInt): HRESULT; stdcall;
    function SaveCompleted(iob: LongInt; const stg: IStorage): HRESULT; stdcall;
    function InPlaceDeactivate: HRESULT; stdcall;
    function ContextSensitiveHelp(fEnterMode: BOOL): HRESULT; stdcall;
    function GetClipboardData(const chrg: TCharRange; reco: DWORD;
      out dataobj: IDataObject): HRESULT; stdcall;
    function ImportDataObject(const dataobj: IDataObject; cf: TClipFormat;
      hMetaPict: HGLOBAL): HRESULT; stdcall;
  end;

  (*
   * IRichEditOleCallback
   *
   * Purpose:
   *   Interface used by the RichEdit to get OLE-related stuff from the
   *   application using RichEdit.
   *)
  {$IFDEF CPPBUILDER}{$EXTERNALSYM IRichEditOleCallback}{$ENDIF}
  IRichEditOleCallback = interface(IUnknown)
    ['{00020D03-0000-0000-C000-000000000046}']
    // *** IRichEditOleCallback methods ***
    function GetNewStorage(out stg: IStorage): HRESULT; stdcall;
    function GetInPlaceContext(out Frame: IOleInPlaceFrame;
      out Doc: IOleInPlaceUIWindow;
      lpFrameInfo: POleInPlaceFrameInfo): HRESULT; stdcall;
    function ShowContainerUI(fShow: BOOL): HRESULT; stdcall;
    function QueryInsertObject(const clsid: TCLSID; const stg: IStorage;
      cp: LongInt): HRESULT; stdcall;
    function DeleteObject(const oleobj: IOleObject): HRESULT; stdcall;
    function QueryAcceptData(const dataobj: IDataObject;
      var cfFormat: TClipFormat; reco: DWORD; fReally: BOOL;
      hMetaPict: HGLOBAL): HRESULT; stdcall;
    function ContextSensitiveHelp(fEnterMode: BOOL): HRESULT; stdcall;
    function GetClipboardData(const chrg: TCharRange; reco: DWORD;
      out dataobj: IDataObject): HRESULT; stdcall;
    function GetDragDropEffect(fDrag: BOOL; grfKeyState: DWORD;
      var dwEffect: DWORD): HRESULT; stdcall;
    function GetContextMenu(seltype: Word; oleobj: IOleObject;
      const chrg: TCharRange; var menu: HMENU): HRESULT; stdcall;
  end;

const
  IID_IRichEditOle: TGUID = '{00020D00-0000-0000-C000-000000000046}';
  IID_IRichEditOleCallback: TGUID = '{00020D03-0000-0000-C000-000000000046}';

{$IFDEF CPPBUILDER}{$EXTERNALSYM RichEdit_SetOleCallback}{$ENDIF}
function RichEdit_SetOleCallback(Wnd: HWND;
  const Intf: IRichEditOleCallback): Boolean;
{$IFDEF CPPBUILDER}{$EXTERNALSYM RichEdit_GetOleInterface}{$ENDIF}
function RichEdit_GetOleInterface(Wnd: HWND; out Intf: IRichEditOle): Boolean;

implementation

function RichEdit_SetOleCallback(Wnd: HWND;
  const Intf: IRichEditOleCallback): Boolean;
begin
  Result := SendMessage(Wnd, EM_SETOLECALLBACK, 0, LongInt(Intf)) <> 0;
end;

function RichEdit_GetOleInterface(Wnd: HWND; out Intf: IRichEditOle): Boolean;
begin
  Result := SendMessage(Wnd, EM_GETOLEINTERFACE, 0, LongInt(@Intf)) <> 0;
end;

end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T14:33:42.737

我混合使用了 TJVRichEdit 和 OLE，将 Word 文档 97-2003 分配给我的 OLEContainer，在 Word 环境中编辑后将其保存为 RTF：

```
OLEContainer.OLEObject.SaveAs(Save_Path, $00000006); 
```

然后将其加载到 JVRichEdit 中，效果很好！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-10T12:10:05.260

您希望 TRichedit 成为 TWordEdit，但事实并非如此。

开箱即用的 TRichedit 不支持内联图像。您要么必须自己实现它，获得一个定制的 Richedit 组件（我认为像 RxRichedit），要么开始考虑 ole 自动化并将其加载为 Word 文档。

# java - 单页视图 PDF-renderer java swing

> ID：15318637
> 
> 赞同：0
> 
> 时间：2013-03-10T03:39:38.060
> 
> 标签：java, swing, pdfrenderer

正如标题所说。

如何在一个面板中显示所有 pdf 页面？就像 adobe pdf reader 的单页视图一样。

我在用着`pdf-renderer-1.0.5.jar`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T20:17:56.143

使用该`pdf-render`项目，您可以`PDFPage`为 PDF 中的每个页面获取一个，将每个页面渲染为一个`java.awt.Image`并显示图像的集合，例如在一个`GridView`.

# ruby-on-rails - Ruby one liners - 试图理解具有赋值、两个相等测试、一个三元运算符和一个 && 运算符的单行 ruby 代码

> ID：15318639
> 
> 赞同：0
> 
> 时间：2013-03-10T03:39:44.870
> 
> 标签：ruby-on-rails, ruby, ternary-operator

在几个 railscast 中，Ryan Bates 将这个自定义的“可排序”助手与几个助手方法（[http://railscasts.com/episodes/228-sortable-table-columns](http://railscasts.com/episodes/228-sortable-table-columns)）结合使用。我只会给你看我修改过的版本。

'sortable' helper 方法看起来像这样（我出于自己的目的对其进行了修改，但基本逻辑是相同的）

```
def sortable(column, params, title = nil)
  title ||= column.titleize
  direction = column == YearlyDerivative.sort_column(params) && YearlyDerivative.sort_direction(params) == "desc" ? "asc" : "desc"
  link_to title, params.merge(:sort => column, :direction => direction)
end 
```

我对上面的这条线感到困惑和不知所措：`direction = column == YearlyDerivative.sort_column(params) && YearlyDerivative.sort_direction(params) == "desc" ? "asc" : "desc"`.

即使我确实知道所有语法、代数（让我想到 div/mult-first、add/sub-second 规则等）规则需要遵循这一行，我仍然可能没有必要的 ruby​​ 知识（“真实性”运营商）充分了解这里发生了什么。我要的是一个演练。对于初学者来说，我的保险丝一开始就被烧断了`direction = column == ...`。但是后来当**另一个**相等运算符和三元运算符介入时，我失去了所有的理解。

如果您想知道， sort_column 和 sort_direction 是 YearlyDerivative 类方法（它们实际上并不一定存在，我只需要从不同的地方调用它们就可以了）

```
def self.sort_column(p)
  YearlyDerivative.column_names.include?(p[:sort]) ? p[:sort] : "revenue_usd_mil_derivative"
end

def self.sort_direction(p)
  %w[asc desc].include?(p[:direction]) ? p[:direction] : "asc"
end 
```

该**单行**( `direction = column == YearlyDerivative.sort_column(params) && YearlyDerivative.sort_direction(params) == "desc" ? "asc" : "desc"`) 包含一个赋值、两个相等运算符、一个 && 运算符和一个三元运算符。当然，包括外部调用的方法，它使用了 3 个三元运算符，但我理解这一点没有问题。

谢谢你的耐心。我希望理解这一点能给我和其他 SO 读者/搜索者带来一些意想不到的编程洞察力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:19:39.823

在我的选择中，这是通过将一些逻辑整合到一行中而变得聪明的尝试之一，这确实不应该这样做。真正的最终结果是它令人困惑，并且会导致更难维护代码，因为它会减慢维护者的速度，因为他们弄清楚它在做什么：

```
direction = column == YearlyDerivative.sort_column(params) && YearlyDerivative.sort_direction(params) == "desc" ? "asc" : "desc". 
```

拆开它：

```
if (
  (column == YearlyDerivative.sort_column(params)) &&
  (YearlyDerivative.sort_direction(params) == "desc")
)
  direction = "asc" 
else
  direction = "desc"
end 
```

在 Ruby 中，我们还可以在保持可读性和可理解性的同时进一步简化它：

```
direction = if (
              (column == YearlyDerivative.sort_column(params)) &&
              (YearlyDerivative.sort_direction(params) == "desc")
            )
              "asc" 
            else
              "desc"
            end 
```

它甚至可以这样写，就 Ruby 而言实际上是单行代码，但它仍然比原始的单行代码更容易理解，因为使用括号将逻辑分成块：

```
direction = (
  (column == YearlyDerivative.sort_column(params)) &&
  (YearlyDerivative.sort_direction(params) == "desc")
) ? "asc" : "desc" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T03:50:49.750

在这里，一步一步：

1.  设置`direction`为以下语句的结果
2.  是否`column`等于`YearlyDerivative.sort_direction(params)`
3.  如果 (2) 为真，则返回该行的其余部分
4.  如果`YearlyDerivative.sort_direction(params) == "desc"`为真，则返回`"asc"`，否则`"desc"`。

或者这个（大致）等效的代码：

```
if(column == YearlyDerivative.sort_direction(params))
  if(YearlyDerivative.sort_direction(params) == "desc")
    direction = "asc"
  else
    direction = "desc"
  end
else
  false
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T04:21:25.380

由于方法中封装了三元运算符的调用队列你理解起来没有问题，我建议你把单行拆开再装回去：

```
def func1
  column == YearlyDerivative.sort_column(params)
end
def func2 
  YearlyDerivative.sort_direction(params) == "desc" ? "asc" : "desc"
end
direction = func1 && func2 
```

现在让我们把它组装回来：

```
#           ⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓ func1 ⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓    ⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓ func2 ⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓⇓ 
direction = (column == YearlyDerivative.sort_column(params)) && (YearlyDerivative.sort_direction(params) == "desc" ? "asc" : "desc") 
```

根据[运算符优先级表](http://www.techotopia.com/index.php/Ruby_Operator_Precedence#Operator_Precedence_Table)，上面的大括号可以很容易地省略。

此外，现在您可以摆脱功能以纪念全单行：

```
direction = column == (YearlyDerivative.column_names.include?(p[:sort]) ? p[:sort] : "revenue_usd_mil_derivative") && %w[asc desc].include?(params[:direction]) ? params[:direction] : "asc") == "desc" ? "asc" : "desc" 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T05:14:34.963

我实际上已经将我的代码切换到以下

```
def sortable(column, params, title = nil)
  title ||= column.titleize
  if YearlyDerivative.test_column(params) && YearlyDerivative.sort_direction(params) == "asc"
    direction = "desc"
  else
    direction = "asc"
  end
  link_to title, params.merge(:sort => column, :direction => direction)
end 
```

请注意 sort_column 方法已更改为 test_column 方法，我觉得这更合乎逻辑。

```
def self.test_column(p)
  YearlyDerivative.column_names.include?(p[:sort]) ? true : false
end 
```

sort_column 方法仍然被 'sort' 类方法使用（如下）

```
def self.sort(params); p = params
  order(sort_column(p) + " " + sort_direction(p))
end 
```

** 看起来原始可排序辅助方法中的 2 部分条件要求的第一部分是无用的。就 && 运算符而言，它返回 true。

```
def sort_column(p)
  ["a", "b", "c"].include?(p[:sort]) ? p[:sort] : "is it true or false?"
end
bad_params = {:sort => "d"}
x = true
if sort_column(bad_params) && x
  puts "hmm"
else; puts "it implied false"
end
#=> "hmm" 
```

上面的 ruby​​ 特性测试使我创建了 test_column 方法。

# flume - Flume-ng null 事件的自定义接收器

> ID：15318645
> 
> 赞同：5
> 
> 时间：2013-03-10T03:40:35.257
> 
> 标签：flume

我正在尝试为 flume-ng 编写一个自定义接收器。我查看了现有的接收器和文档并将其编码。但是，应该接收事件的 'process()' 方法总是以 null 结束。我在做 Event event = channel.take(); 但该事件为空。我在日志中看到该方法被重复调用，因为事件仍在通道中。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-30T08:17:10.270

这是一个流程功能的骨架......如果您无法获得**回滚**的事件，请将状态更改为**BACKOFF**。如果不是，您**提交**并将状态设置为**READY**。无论如何，您总是关闭交易。

```
 Status status = null;
    Channel channel = getChannel();
    Transaction transaction = channel.getTransaction();
    transaction.begin();
    try {
        Event event = channel.take();

        if (event != null && validEvent(event.getBody()) >= 0) {
           # make some printing
        }
        transaction.commit();
        status = Status.READY;
    } catch (Throwable ex) {
        transaction.rollback();
        status = Status.BACKOFF;
        logger.error("Failed to deliver event. Exception follows.", ex);
        throw new EventDeliveryException("Failed to deliver event: " + ex);
    } finally {
        transaction.close();
    }
    return status; 
```

我相信这会奏效:)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T11:41:01.960

这是设计使然。接收器运行器将使用事件轮询接收器，`null`以便确保接收器处于活动状态并准备好接受未来的事件。当您收到`null`事件时，请确保您返回`Status.BACKOFF`，并且接收器处理器将在重试之前稍等片刻。

# django - Debian 中的 django 和 bash

> ID：15318646
> 
> 赞同：0
> 
> 时间：2013-03-10T03:40:41.623
> 
> 标签：django, shell

我已经用 mod_wsgi 和 apache 设置了 django。现在想用http来完成svn更新任务。你知道，如果我们要更新服务器上的特定网站，我们必须ssh到服务器并cd到目录并使用svn更新，这太复杂了，所以我想发送一个get请求让python来做给我的东西。

这是我可以在 Debian 中运行 bash 并成功的问题：

```
import os

def hello(request):
    os.chdir("/var/www-chengtoo-new-Test/")
    os.system("svn update")
    os.chdir("/var/TestWebsiteTool/hello")
    os.mkdir("hahaha");
    return HttpResponse("hello") 
```

除了“svn update”之外，一切都很好。那么有人可以帮助我吗？我只是想弄清楚为什么会这样。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:51:06.783

Python`os.system`使用 , 在自己的线程中执行任何命令`sh`，并且不受`chdir`您首先运行的影响。

因此，本质上，当您调用 时`svn update`，它可能会针对系​​统根目录或其他目录执行，具体取决于您的操作系统配置。

你需要做：

```
os.system("cd /var/www-chengtoo-new-Test/; svn update") 
```

在我看来，处理这个问题的更好方法是[子进程](http://docs.python.org/2/library/subprocess.html)库：

```
import subprocess
subprocess.Popen("svn update", shell=True, cwd="/var/www-chengtoo-new-Test/") 
```

# ruby - Ruby on Rails 中的实用程序类

> ID：15318647
> 
> 赞同：14
> 
> 时间：2013-03-10T03:40:47.813
> 
> 标签：ruby, ruby-on-rails-3

这可能是一个愚蠢的问题，但我是 Ruby on Rails 的新手，我可以使用一些指导。我想要一个助手/实用程序类来执行一组网络操作并返回结果。我在哪里放置该类以及如何使用它。

我在我的 app/modulename/helpers 目录中创建了 network_helper.rb。当我尝试做时在我的控制器中

```
 myNetworkHelper = ModuleName::NetworkHelper.new
  results = myNetworkHelper.getResults 
```

我收到一个错误

```
 undefined method `new' for MyModule::NetworkHelper:Module 
```

我敢肯定这只是对 ruby​​ on rails 工作原理的误解。我可以澄清一下吗？

将其设为类而不是模块并将其放入库中会更好吗？我可以在库中添加子文件夹并自动加载它们吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-15T09:45:40.400

## 库或类

像这样的小实用程序类通常放在 lib 文件夹中，尽管有些人更喜欢创建一个名为 classes 的文件夹。无论您选择哪个，请确保将文件夹导入 config/application.rb，因为 lib 文件夹不会自动加载：

```
config.autoload_paths += %W(#{config.root}/lib) 
```

## 关注点

如果您想使用可重用代码扩展您的一些模型而不是实用程序类，您可能还希望查看鼓励您提取可重用模块的新 Rails 4 关注文件夹：

请参阅：[如何在 Rails 4 中使用关注点](https://stackoverflow.com/questions/14541823/how-to-use-concerns-in-rails-4)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T04:22:33.983

要使用`new`，你调用它的东西必须是一个类，而不是一个模块。你正在使用一个模块。更改`module`为. `class`_`lib/utilities/network_utility.rb`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T03:54:51.320

我目前无法验证这一点，但我相信您可以存储自定义模块和类的一个地方是`lib`目录。或者，您应该能够通过将以`app`下行添加到您的 environment.rb 中指定的方式将它们存储在目录中：

```
config.load_paths << File.join(Rails.root, "app", "modulename") 
```

另外，查看[Yehuda Katz 的回答](https://stackoverflow.com/a/1071510/877472)，我认为它不仅可以更好地回答您的问题，而且还包含一些与您的情况相关的非常有趣和有用的信息和概念。希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-24T11:41:41.693

**将您的类添加到`app/lib`文件夹而不是`lib`，这样您就不会更改自动加载路径！**

说明：

接受的答案建议将类添加到`lib`.

但根据[这个讨论](https://github.com/rails/rails/issues/37835)：

> 自 Rails 3 以来，lib 文件夹不属于自动加载路径。

所以不鼓励`lib`在自动加载路径下添加。改为使用`app/lib`。

# haskell - 如何在 Haskell 中设置类实例？

> ID：15318649
> 
> 赞同：1
> 
> 时间：2013-03-10T03:41:14.180
> 
> 标签：haskell

如果我有一个包含列表的数据类型，那么想要以 class 的形式创建它`Show`，我正在尝试这个，但它给出了一个错误：

```
data Mlist a = Mlist [a]
m = Mlist [1, 2, 3]

instance Show Mlist where
    show (Mlist xs) = xs

-- m should now be {1, 2, 3} 
```

有没有人看到问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T04:06:44.020

我想你只需要这个：

```
instance Show a => Show (Mlist a) where
    show (Mlist xs) = show xs 
```

`Show a =>`意味着这将创建`Mlist a`一个`Show`when`a`已经是`Show`. 换句话说，`Show (Mlist a)`取决于`Show a`。

此外，您想显示`xs`列表，使用 的现有实例`Show [a]`，顺便声明了`instance Show a => Show [a] where...`。所以你需要使用`show xs`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T03:44:56.077

的构造函数`Mlist a`被调用`Mlist`，所以写它而不是`mlist`在你的模式匹配中。同样，没有`MList`定义，所以也修复它。

此外，它是`Mlist a`，不是`Mlist`，是 的一个实例`Show`，并且仅当`a`是 时。所以你要`instance (Show a) => Show (Mlist a) where ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T03:48:26.967

让我们查阅`Show`类的定义，现在只使用`show`方法：

```
class Show a where
    show :: a -> String 
```

当您编写 时`instance Show MList`，您将替换`MList`every `a`，因此类型签名 for`show`将变为：

```
show :: MList -> String 
```

啊哈！有问题！ `MList`不是一个有效的类型，但是`MList Char`是，这意味着我们需要修正我们`instance`的说法：

```
instance Show (MList Char) where ...
    show (Mlist xs) = xs 
```

编辑：这是不正确的，因为它`Int`不像您要求的那样处理 s 。 `gspr`的答案是正确的。

# java - 能量转换器应用程序不起作用，问题可能出在 getValues 方法中

> ID：15318651
> 
> 赞同：0
> 
> 时间：2013-03-10T03:41:27.703
> 
> 标签：java

请帮我写代码！

问题很可能位于 getValues 方法中。

每次我输入 2 个值并单击计算按钮时，都会出现很多错误。

我使用 NetBeans 对此进行了编程，这就是为什么代码看起来不精简的原因。

```
 /*
     * To change this template, choose Tools | Templates
     * and open the template in the editor.
     */

    /**
     *
     * @author cshames
     */
    import java.text.DecimalFormat;
    import java.lang.Math.*;
    public class EnergyForm extends javax.swing.JFrame {
        public static DecimalFormat hundred = new DecimalFormat("0.00");
        public static double voltageValue;
        public static double currentValue;
        public static double resistanceValue;
        public static double powerValue;

        /**
         * Creates new form EnergyForm
         */
        public EnergyForm() {
            initComponents();
        }

        /**
         * This method is called from within the constructor to initialize the form.
         * WARNING: Do NOT modify this code. The content of this method is always
         * regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
        private void initComponents() {

            voltageBox = new javax.swing.JTextField();
            currentBox = new javax.swing.JTextField();
            resistanceBox = new javax.swing.JTextField();
            powerBox = new javax.swing.JTextField();
            jLabel1 = new javax.swing.JLabel();
            jLabel2 = new javax.swing.JLabel();
            jLabel3 = new javax.swing.JLabel();
            jLabel4 = new javax.swing.JLabel();
            jLabel5 = new javax.swing.JLabel();
            calculateButton = new javax.swing.JButton();
            resetButton = new javax.swing.JButton();

            setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

            voltageBox.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    voltageBoxActionPerformed(evt);
                }
            });

            currentBox.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    currentBoxActionPerformed(evt);
                }
            });

            resistanceBox.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    resistanceBoxActionPerformed(evt);
                }
            });

            powerBox.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    powerBoxActionPerformed(evt);
                }
            });

            jLabel1.setText("Voltage:");

            jLabel2.setText("Current:");

            jLabel3.setText("Resistance:");

            jLabel4.setText("Power:");

            jLabel5.setFont(new java.awt.Font("Comic Sans MS", 0, 14)); // NOI18N
            jLabel5.setText("Ohm's Law Converter");

            calculateButton.setText("Calculate");
            calculateButton.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    calculateButtonActionPerformed(evt);
                }
            });

            resetButton.setText("Reset");
            resetButton.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent evt) {
                    resetButtonActionPerformed(evt);
                }
            });

            javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
            getContentPane().setLayout(layout);
            layout.setHorizontalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addGap(66, 66, 66)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(jLabel3)
                                    .addComponent(jLabel4))
                                .addGap(18, 18, 18)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(powerBox, javax.swing.GroupLayout.DEFAULT_SIZE, 50, Short.MAX_VALUE)
                                    .addComponent(resistanceBox))
                                .addGap(0, 0, Short.MAX_VALUE))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                .addContainerGap(71, Short.MAX_VALUE)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                        .addComponent(calculateButton)
                                        .addGap(33, 33, 33)
                                        .addComponent(resetButton))
                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addComponent(jLabel1)
                                            .addComponent(jLabel2))
                                        .addGap(18, 18, 18)
                                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(currentBox, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(voltageBox, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addGap(170, 170, 170)))))
                        .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                            .addGap(98, 98, 98)
                            .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 151, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            );
            layout.setVerticalGroup(
                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(21, 21, 21)
                    .addComponent(jLabel5)
                    .addGap(18, 18, 18)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(voltageBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel1))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(currentBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel2))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(resistanceBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel3))
                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(powerBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel4))
                    .addGap(18, 18, 18)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(resetButton)
                        .addComponent(calculateButton))
                    .addContainerGap(30, Short.MAX_VALUE))
            );

            pack();
        }// </editor-fold>                        

        private void voltageBoxActionPerformed(java.awt.event.ActionEvent evt) {                                           
            getValues();
        }                                          

        private void resistanceBoxActionPerformed(java.awt.event.ActionEvent evt) {                                              
            getValues();
        }                                             

        private void powerBoxActionPerformed(java.awt.event.ActionEvent evt) {                                         
            getValues();
        }                                        

        private void currentBoxActionPerformed(java.awt.event.ActionEvent evt) {                                           
            getValues();
        }                                          

        private void calculateButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                
            getValues();
        }                                               

        private void resetButtonActionPerformed(java.awt.event.ActionEvent evt) {                                            
            powerBox.setText(null);
            voltageBox.setText(null);
            currentBox.setText(null);
            resistanceBox.setText(null);
        }                                           

        /**
         * @param args the command line arguments
         */
//help here please! 
       public static void getValues() {
            voltageValue = Float.parseFloat(voltageBox.getText());
            resistanceValue = Float.parseFloat(resistanceBox.getText());
            currentValue = Float.parseFloat(currentBox.getText());
            powerValue = Float.parseFloat(powerBox.getText());
            //if(current==true&&voltage==true){//finds resistance & power
              if(currentBox.getText() != null && voltageBox.getText() != null) { 
                  resistanceValue=voltageValue/currentValue;
                  powerValue=voltageValue*currentValue;
                  String resistanceValueString = hundred.format(resistanceValue);
                  String powerValueString = hundred.format(powerValue);
                  resistanceBox.setText(resistanceValueString);
                  powerBox.setText(powerValueString);

            }
            else if(currentBox.getText() != null && resistanceBox.getText() != null){//finds voltage & power
                voltageValue=resistanceValue*currentValue;
                powerValue=(currentValue*currentValue)*resistanceValue;
                 String voltageValueString = hundred.format(voltageValue);
                  String powerValueString = hundred.format(powerValue);
                  voltageBox.setText(voltageValueString);
                  powerBox.setText(powerValueString);

            }
            else if(resistanceBox.getText() != null && voltageBox.getText() != null){//finds current & power
                currentValue=voltageValue/resistanceValue;
                powerValue=(voltageValue*voltageValue)/resistanceValue;
                 String currentValueString = hundred.format(currentValue);
                  String powerValueString = hundred.format(powerValue);
                  currentBox.setText(currentValueString);
                  powerBox.setText(powerValueString);

            }
            else if(powerBox.getText() != null && voltageBox.getText() != null){//finds current & resistance
                currentValue=powerValue/voltageValue;
                resistanceValue=(voltageValue*voltageValue)/powerValue;
                 String currentValueString = hundred.format(currentValue);
                  String resistanceValueString = hundred.format(resistanceValue);
                  resistanceBox.setText(resistanceValueString);
                  currentBox.setText(currentValueString);

            }
            else if(currentBox.getText() != null && powerBox.getText() != null){//finds voltage & resistance
                voltageValue=powerValue/currentValue;
                resistanceValue=powerValue/(currentValue*currentValue);
                 String resistanceValueString = hundred.format(resistanceValue);
                  String voltageValueString = hundred.format(voltageValue);
                  resistanceBox.setText(resistanceValueString);
                  voltageBox.setText(voltageValueString);

            }
            else if(resistanceBox.getText() != null && powerBox.getText() != null){//finds voltage & current
                voltageValue=Math.sqrt((powerValue*resistanceValue));
                currentValue=Math.sqrt(powerValue/resistanceValue);    
                 String currentValueString = hundred.format(currentValue);
                  String voltageValueString = hundred.format(voltageValue);
                  currentBox.setText(currentValueString);
                  voltageBox.setText(voltageValueString);
            }

        }
        public static void main(String args[]) {
            /* Set the Nimbus look and feel */
            //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
            /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
             * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
             */
            try {
                for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                    if ("Nimbus".equals(info.getName())) {
                        javax.swing.UIManager.setLookAndFeel(info.getClassName());
                        break;
                    }
                }
            } catch (ClassNotFoundException ex) {
                java.util.logging.Logger.getLogger(EnergyForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (InstantiationException ex) {
                java.util.logging.Logger.getLogger(EnergyForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (IllegalAccessException ex) {
                java.util.logging.Logger.getLogger(EnergyForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (javax.swing.UnsupportedLookAndFeelException ex) {
                java.util.logging.Logger.getLogger(EnergyForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            }
            //</editor-fold>

            /* Create and display the form */
            java.awt.EventQueue.invokeLater(new Runnable() {
                public void run() {
                    new EnergyForm().setVisible(true);
                }
            });
        }
        // Variables declaration - do not modify                     
        private javax.swing.JButton calculateButton;
        private static javax.swing.JTextField currentBox;
        private javax.swing.JLabel jLabel1;
        private javax.swing.JLabel jLabel2;
        private javax.swing.JLabel jLabel3;
        private javax.swing.JLabel jLabel4;
        private javax.swing.JLabel jLabel5;
        private static javax.swing.JTextField powerBox;
        private javax.swing.JButton resetButton;
        private static javax.swing.JTextField resistanceBox;
        private static javax.swing.JTextField voltageBox;
        // End of variables declaration                   
    }
    /**
     * if(textfield.getText()!=null&&othertextfield.getText()!=null){
     *     
     * }
     */ 
```

**错误信息：**

> 运行：线程“AWT-EventQueue-0”中的异常 java.lang.NumberFormatException：空字符串在 sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1011) 在 java.lang.Float.parseFloat(Float.java:452)在 EnergyForm.getValues(EnergyForm.java:201) 在 EnergyForm.currentBoxActionPerformed(EnergyForm.java:182) 在 EnergyForm.access$100(EnergyForm.java:12) 在 EnergyForm$2.actionPerformed(EnergyForm.java:59) 在 javax.swing .JTextField.fireActionPerformed(JTextField.java:508) 在 javax.swing.JTextField.postActionEvent(JTextField.java:721) 在 javax.swing.JTextField$NotifyAction.actionPerformed(JTextField.java:836) 在 javax.swing.SwingUtilities。在 javax.swing.JComponent.processKeyBinding(JComponent.java:2879) 在 javax.swing.JComponent 的 notifyAction(SwingUtilities.java:1664)。processKeyBindings(JComponent.java:2926) at javax.swing.JComponent.processKeyEvent(JComponent.java:2842) at java.awt.Component.processEvent(Component.java:6282) at java.awt.Container.processEvent(Container.java :2229) 在 java.awt.Component.dispatchEventImpl(Component.java:4861) 在 java.awt.Container.dispatchEventImpl(Container.java:2287) 在 java.awt.Component.dispatchEvent(Component.java:4687) 在 java .awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1895) 在 java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:762) 在 java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1027) 在 java.awt.DefaultKeyboardFocusManager。 java.awt 中的 typeAheadAssertions(DefaultKeyboardFocusManager.java:899)。DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:727) 在 java.awt.Component.dispatchEventImpl(Component.java:4731) 在 java.awt.Container.dispatchEventImpl(Container.java:2287) 在 java.awt.Window.dispatchEventImpl(Window .java:2719) 在 java.awt.Component.dispatchEvent(Component.java:4687) 在 java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729) 在 java.awt.EventQueue.access$200(EventQueue.java:103 ) 在 java.awt.EventQueue$3.run(EventQueue.java:688) 在 java.awt.EventQueue$3.run(EventQueue.java:686) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.security。 ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76) 在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87) 在 java.awt.EventQueue$4。在 java.security.AccessController.doPrivileged(Native Method) 在 java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java: 76) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:699) 在 java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161) 在 java. awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146) at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138) at java.awt.EventDispatchThread.run (EventDispatchThread.java:91)700) 在 java.security.ProtectionDomain 的 java.security.AccessController.doPrivileged(Native Method) $1.doIntersectionPrivilege(ProtectionDomain.java:76) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:699) 在 java.awt。 EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread .java:146) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:91)700) 在 java.security.ProtectionDomain 的 java.security.AccessController.doPrivileged(Native Method) $1.doIntersectionPrivilege(ProtectionDomain.java:76) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:699) 在 java.awt。 EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242) 在 java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread .java:146) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:91)doIntersectionPrivilege(ProtectionDomain.java:76) at java.awt.EventQueue.dispatchEvent(EventQueue.java:699) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java :161) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138) 在 java .awt.EventDispatchThread.run(EventDispatchThread.java:91)doIntersectionPrivilege(ProtectionDomain.java:76) at java.awt.EventQueue.dispatchEvent(EventQueue.java:699) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java :161) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138) 在 java .awt.EventDispatchThread.run(EventDispatchThread.java:91)161) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138) 在 java. awt.EventDispatchThread.run(EventDispatchThread.java:91)161) 在 java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138) 在 java. awt.EventDispatchThread.run(EventDispatchThread.java:91)

帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:54:03.380

你得到一个`NumberFormatException`，因为你`resistanceBox` `JTextField`是空的。只需`float`为您从中读取值的所有字段提供有效值。您可以在尝试读取值之前添加一个简单的检查，例如：

```
if (!resistanceBox.getText().trim().isEmpty()) {
   resistanceValue = Float.parseFloat(resistanceBox.getText());
} else {
   // TODO: alert that R not supplied...
   return;
} 
```

* * *

注意[欧姆定律](http://en.wikipedia.org/wiki/Ohm%27s_law)，您通常提供 2 个值来获得第三个值：

```
V = IR 
```

还要计算功率：`P = VI`

由于可以计算电阻`R`和功率`P`，因此您只能使用电压和电流作为输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:54:21.420

getValues 的前四行都尝试将文本字段中的值转换为浮点数。除非所有四个文本字段都有数据，否则至少其中一行会抛出 NumberFormatException。您应该 (1) 在尝试解析浮点数之前检查特定文本字段是否为空，并且 (2) 捕获 NumberFormatExceptions 以处理用户输入无效数据的情况。

# css - Bootstrap 跨度不适用于全高侧边栏

> ID：15318660
> 
> 赞同：0
> 
> 时间：2013-03-10T03:42:44.740
> 
> 标签：css, twitter-bootstrap, responsive-design

我正在尝试在具有全高侧边栏的引导程序中创建响应式布局。我得到了响应部分的工作，但唯一的问题是 - 跨度的间距似乎并没有很好地结合在一起。

在右侧 - 主要内容 - 它不适合屏幕的其余部分。此外，当浏览器变得太小时 - 主要内容实际上会被侧边栏部分隐藏。

我对跨度做错了吗？如果我`position: absolute;`从 中删除`.sidebar`，那么整个`.content.`部分会在侧边栏下方滑动 - 但侧边栏不再是全高，并且内容仍然不能均匀地填充屏幕的其余部分。似乎不可能让它正常工作，但我想使用引导程序以方便不必重做所有集成的 CSS/JS。

例子： ![跨度不填充屏幕](../Images/e95d7f9f5cf41f5a15b15b62d1269093.png) ![跨度部分隐藏](../Images/032c526628b5717f5557d7d8193a17cf.png)

CSS

```
html {
    height: 100%;
}

.sidebar {
    background: #333;
    margin: 0;
    padding: 3em 2em;
    height: 100%;
    -moz-box-shadow: 0 0 5px #888;
    -webkit-box-shadow: 0 0 5px#888;
    box-shadow: 0 0 5px #888;
    min-height: 100%;
    position: absolute;
}

.sidebar .logo { margin-bottom: 3em; }

.content {
    margin: 5em;
} 
```

HTML

```
<body>
    <div class="row">
        <!-- Navigation for small screens -->
        <div class="navbar navbar-inverse hidden-desktop">
            <div class="navbar-inner">
                <a class="brand" href="/">Home Link</a>
                <ul class="nav">
                    <li><a href="#">Projects</a></li>
                    <li><a href="#">Photography</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
        </div>

        <!-- Navigation for larger screens -->
        <div class="span3 hidden-phone hidden-tablet">
            <div class="span3 sidebar">
                <div class="logo"><a class="logo-title" href="/">Home Link</a></div>

                <ul class="nav nav-pills nav-stacked">
                    <li><a href="#">Projects</a></li>
                    <li><a href="#">Photography</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
        </div>
        <div class="span9 content">

<div class="span5">
    <div class="page-header">
        <h1>Hello. <small>This is.</small></h1>
    </div>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris faucibus est vitae ante lobortis ultricies. Pellentesque blandit massa a velit convallis at accumsan elit gravida. Nulla facilisi. Fusce egestas consectetur velit vitae egestas. Cras vitae justo a sapien gravida condimentum. Donec lacinia lacinia ante. Proin eget est neque, ut egestas nibh. Donec non enim eu sem varius adipiscing. Proin dapibus enim a enim condimentum hendrerit. Donec vestibulum, mauris eget lobortis sagittis, enim libero dapibus augue, ac luctus ipsum augue quis purus. Aenean magna ante, elementum ac ultricies vitae, lobortis vitae augue. Nam metus erat, adipiscing posuere fringilla sit amet, molestie vel dolor. Quisque libero lacus, auctor eget porta vitae, vehicula eget mi. Vestibulum pulvinar hendrerit faucibus.

Aliquam scelerisque nisl sit amet mauris euismod bibendum. Phasellus ac laoreet enim. Praesent a felis id nisl ultrices dignissim. Nam dictum leo at quam vulputate mollis. Curabitur vitae ipsum enim, sit amet sollicitudin neque. Nunc iaculis ultricies convallis. Etiam nunc neque, consequat ac vehicula id, imperdiet in neque. Duis vitae sem magna. Nulla vehicula sapien sit amet sapien tempus tempus. Fusce pharetra dui nec risus sollicitudin vel pharetra arcu lacinia. Quisque eleifend sapien eu quam rutrum sed imperdiet nisi sagittis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Quisque id placerat purus.</p>
</div>
<div class="span3">
    <div class="page-header">
        <h1>Second Header. <small>Not working.</small></h1>
    </div>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris faucibus est vitae ante lobortis ultricies. Pellentesque blandit massa a velit convallis at accumsan elit gravida. Nulla facilisi. Fusce egestas consectetur velit vitae egestas. Cras vitae justo a sapien gravida condimentum. Donec lacinia lacinia ante. Proin eget est neque, ut egestas nibh. Donec non enim eu sem varius adipiscing. Proin dapibus enim a enim condimentum hendrerit. Donec vestibulum, mauris eget lobortis sagittis, enim libero dapibus augue, ac luctus ipsum augue quis purus. Aenean magna ante, elementum ac ultricies vitae, lobortis vitae augue. Nam metus erat, adipiscing posuere fringilla sit amet, molestie vel dolor. Quisque libero lacus, auctor eget porta vitae, vehicula eget mi. Vestibulum pulvinar hendrerit faucibus.

    Aliquam scelerisque nisl sit amet mauris euismod bibendum. Phasellus ac laoreet enim. Praesent a felis id nisl ultrices dignissim. Nam dictum leo at quam vulputate mollis. Curabitur vitae ipsum enim, sit amet sollicitudin neque. Nunc iaculis ultricies convallis. Etiam nunc neque, consequat ac vehicula id, imperdiet in neque. Duis vitae sem magna. Nulla vehicula sapien sit amet sapien tempus tempus. Fusce pharetra dui nec risus sollicitudin vel pharetra arcu lacinia. Quisque eleifend sapien eu quam rutrum sed imperdiet nisi sagittis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Quisque id placerat purus.</p>

</div>

        </div>
    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:05:23.383

您已经将该侧边栏设置为绝对，为什么还要打扰`height: 100%`? 简单地添加会更容易`top:0; bottom:0`。

您的侧边栏像这样滑过内容的原因是侧边栏的绝对定位。如果你想防止这种情况发生，我建议在你的侧边栏类中设置一个定义的宽度（比如 of `240px`），然后将内容的 CSS 更改为如下所示：

```
.content {
    padding: 5em;
    left: 240px;
    right: 0;
    top: 0;
    bottom: 0;
    overflow-y: auto;
} 
```

这应该适当地限制您的内容在任何情况下都不会滑到您的侧边栏下。然后，为了使其具有适当的响应性，请在屏幕缩小时向下调整侧边栏的字体大小和宽度，并减小 的`left`属性`.content`以匹配侧边栏的宽度。

那是你要找的吗？

# angularjs - 单页应用程序的可访问性（ARIA 等）

> ID：15318661
> 
> 赞同：42
> 
> 时间：2013-03-10T03:42:58.377
> 
> 标签：angularjs, accessibility, single-page-application

使 SPA (AngularJS) 可访问（对于屏幕阅读器等）的最佳方法是什么？

我对 aria 规范几乎没有经验，我想知道它是否完全适用于单页应用程序。

开发过程中常见的陷阱有哪些？

开发时如何调试和测试可访问性？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-22T20:49:33.930

这可以涵盖这里的广泛问题。因此，我将介绍一些基础知识，希望它能让你开始你的道路，常见的陷阱，就像它一样。

首先，就像评论者说的那样，是的，您需要确保正确使用 ARIA 标签。所以，比如说，如果你想将一个 div 暴露为一个按钮，你就会有这样的东西。

```
<div id="mysuperflashybutton" ... role="button" aria-label="Super flashy" tabindex="0"></div> 
```

当屏幕阅读器选择此按钮时，将称为“超级华丽按钮”，因此您无需将按钮放在 aria-label 属性中。那里有更复杂的示例，但这几乎说明了它的基础知识。Role、aria-label 和 tabindex 将是您看到的最流行的 ARIA 属性。

您希望屏幕阅读器用户单击的标签索引元素对此至关重要。将 tabindex 设置为 0 以将其包含在文档上的默认位置。如果您不希望人们使用键盘导航通常可以访问它，请将其设置为 -1。这意味着它超出了正常的 tab 顺序，但如果您想通过 javascript/jquery .focus() 手动将用户的焦点放在那里，仍然可以导航到。

如前所述，有时您可以通过为键盘导航器/屏幕阅读器用户移动焦点来帮助他们。例如，如果他们单击按钮并出现菜单。您可以执行以下操作将它们放在菜单的第一个链接上：

```
$('#linkmenuactivator').on("click", function () {
    $('#linkmenu').find('li:first a').focus();
}); 
```

我知道那是在 JQuery 中，我不熟悉 AngularJS，但我的简要观点让我认为它更像是一个 ViewModel 控制器，而不是像 JQuery 这样的特定 UI，但如果我错了，请纠正我。

如果您在屏幕上执行对屏幕阅读器用户毫无意义的时髦操作，则可以使用实时区域。您可以将文本写入这些区域中的元素，以将信息以文本形式输出。最简单的方法是使用警报或状态角色，分别用于重要消息或一般状态更新。默认情况下，这些角色使您的元素成为活动区域，其中的任何文本更改都将报告给屏幕阅读器。所以一个简单的例子看起来像这样：

```
<p id="ariastatusbox" ... role="status"></p> 
```

然后稍后在 JQuery 中（以您加载文档并在获得它时淡入该文档为例）：

```
$('#maincontent').fadeIn(function () {
    $('#ariastatusbox').text('Document loaded');
}); 
```

这将使屏幕阅读器知道文档已加载并准备好在屏幕上阅读。活动区域可能有点棘手，但如果你能掌握它们，它们就是强大的野兽。

最后，关于可访问性测试，有几个选项。我最近偶然发现的东西是[Wave](http://wave.webaim.org/)，它似乎是一个在线测试工具。乍一看还不错，可以试一试。另一种选择是自己拿一个屏幕阅读器并试一试。我推荐[英伟达](http://www.nvda-project.org/)这是一个开源（因此是免费的）屏幕阅读器。这是我选择的屏幕阅读器，非常好。它附带的合成器没有最好的声音，但还有其他选项，或者您可以关闭语音输出并使用语音查看器查看它要说的文本显示。最后一个选择是要求可访问性测试人员对您的应用进行试驾。对于这些括号中的消费品或事物，如果被要求，盲人和其他可访问技术的用户很可能会自愿这样做。对于您可能不希望在公共论坛中发布的更多面向业务的应用程序，有几个组织可以就使 Web 应用程序可访问的问题进行咨询。

这绝不是一本关于可访问性的综合手册，我希望能真正让你朝着正确的方向前进。如需更深入地了解，请尝试查看[ARIA 角色](http://www.w3.org/TR/wai-aria/roles)文档（所有这些都会有所帮助，但代码位于定义标题下），然后是[ARIA 状态和属性文档](http://www.w3.org/TR/wai-aria/states_and_properties)。它们都可能有点干，但也有你可以明智地使用 ARIA 的所有内容的完整列表。我希望谷歌也应该能够提供一些教程。

我希望这有助于您入门。祝你好运！

# r - 使用 randomForest 时出现错误“x 和 xtest 必须具有相同的列数”

> ID：15318670
> 
> 赞同：0
> 
> 时间：2013-03-10T03:44:27.650
> 
> 标签：r

当我尝试在 R 中使用 randomForest 时出现错误。当我输入

```
basic3prox  <- randomForest(activity ~.,data=train,proximity=TRUE,xtest=valid) 
```

其中 train 是训练数据的数据框，valid 是测试数据的数据框，我收到以下错误

```
Error in randomForest.default(m, y, ...) : 
  x and xtest must have same number of columns 
```

但它们确实有相同数量的列。我使用 subset() 从相同的原始数据集中获取它们，当我运行 dim() 我得到

> 昏暗（火车）

[1] 3237 563

> 昏暗（有效）

[1] 2630 563

所以我不知道这里出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T11:20:44.943

不，他们没有；`train`有 562 个预测列和 1 个决策列，所以`valid`必须有 562 个列（并且必须将相应的决策传递给`ytest`参数）。
所以调用应该如下所示：

```
randomForest(activity~.,data=train,proximity=TRUE,
  xtest=valid[,names(valid)!='activity'],ytest=valid[,'activity']) 
```

然而，这是一个肮脏的 hack，对于更复杂的公式会失败，因此不应该使用它（即使作者试图禁止它，正如 Joran 在评论中指出的那样）。正确、更简单、更快捷的方法是使用单独的对象进行预测和决策，而不是使用公式，如下所示：

```
randomForest(trainPredictors,trainActivity,proximity=TRUE,
  xtest=testPredictors,ytest=testActivity) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-03T09:00:06.787

也许这不是一个错误。当你使用时`dim()`，你会得到不同的号码。这意味着训练数据和有效数据确实有不同的暗淡。我遇到过这样的问题。我的解决方案如下：首先，我使用`names()`显示训练数据和有效数据中的变量。我看到他们确实有不同的变量。其次，我使用`setdiff()`“减去”剩余变量（如果训练数据的变量多于有效数据，则减去训练数据中的剩余变量，反之亦然。）之后，训练数据和有效数据具有相同的变量。您可以使用**randomForest**。

# sql - 如何改进此查询以获得更好的 Oracle 性能

> ID：15318673
> 
> 赞同：1
> 
> 时间：2013-03-10T03:44:41.320
> 
> 标签：sql, performance, oracle, oracle10g, oracle11g

产品

```
product_id  product_serial_number   product_status
1           X123                    PENDING
1           X123                    PROCESSED
2           X345                    PENDING
3           X678                    PENDING
4           Y890                    PENDING
4           Y890                    PROCESSED 
```

上表显示了产品的状态及其历史。我需要生成一个报告，其输出如下所示：

```
product_id  status
1           UPDATE
2           NEW
3           NEW
4           UPDATE 
```

即，如果一个产品之前已经被处理过（例如产品1 和4），它的状态是UPDATE，否则它的状态是NEW。

我提出了这个查询，但我对它的表现不满意：

```
select product_id, 'UPDATE'
from products p1
where product_id in (select product_id from products p2 where p2.product_status='PROCESSED' and p2.product_status='ARCHIVED')
Union
select product_id, 'NEW'
from products p1
where product_id not in (select product_id from products p2 where p2.product_status='PROCESSED' and p2.product_status='ARCHIVED') 
```

另一种可行的方法是将表连接到自身：

```
select p1.product_id, decode(p2.product_id, null, 'NEW','UPDATE')
from products p1, products p2
where p1.product_id=p2.product_id(+)
and p1.product_serial_number=p2.serial_number(+)
and p2.product_status(+) = 'PROCESSED' 
```

当任一查询针对大型数据集运行时，性能都不是很好。我如何改进（甚至完全改变）上述查询以获得最佳性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T03:50:14.540

你试过使用`GROUP BY`吗？

```
SELECT product_id, (CASE WHEN COUNT(*) = 1 THEN 'NEW' ELSE 'UPDATED' END) status
FROM products
WHERE product_status <> 'ARCHIVED'
GROUP BY product_id 
```

查看其他`GROUP BY` [聚合函数](http://docs.oracle.com/cd/E11882_01/server.112/e10592/functions003.htm)。

**编辑**

修复了[Case 表达式](http://docs.oracle.com/cd/B28359_01/server.111/b28286/expressions004.htm)语法的问题。对于那个很抱歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T04:54:58.987

尝试这个

```
with CTE as
(
   select product_id, decode(product_status,'PROCESSED','UPDATE','NEW') status,
   row_number() over (partition by product_id
   order by decode(product_status,'PROCESSED','UPDATE','NEW') desc) rnum
   from products p1
)
select * from cte where rnum = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:20:25.447

除了以前的答案（我喜欢关于 INTERSECT anв MINUS 的答案）。

对于字段“product_status”的极少量可能值，普通索引（基于 B-Tree）无法正常工作。您需要在此字段上使用位图索引。 [Oracle Bitmap Index Techniques](http://www.dba-oracle.com/oracle_tips_bitmapped_indexes.htm) [CREATE INDEX in Oracle Docs - 搜索位图](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_5012.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T04:33:33.080

使用MINUS和 INTERSECT*可能会*获得更好的速度，它们是 UNION 被忽视的表亲。

所有具有 PE​​NDING 和 PROCESSED 行的产品：

```
SELECT product_id FROM Products WHERE product_status = 'PENDING'
INTERSECT SELECT product_id FROM Products WHERE product_status = 'PROCESSED' 
```

所有具有 PE​​NDING 行但没有 PROCESSED 行的产品：

```
SELECT product_id FROM Products WHERE product_status = 'PENDING'
MINUS SELECT product_id FROM Products WHERE product_status = 'PROCESSED' 
```

将它们放在一起（并添加新/更新）：

```
SELECT product_id, 'NEW' FROM (
   SELECT product_id FROM Products WHERE product_status = 'PENDING'
   MINUS SELECT product_id FROM Products WHERE product_status = 'PROCESSED')
UNION
SELECT product_id, 'UPDATE' FROM (
  SELECT product_id FROM Products WHERE product_status = 'PENDING'
  INTERSECT SELECT product_id FROM Products WHERE product_status = 'PROCESSED') 
```

对于一个大表，您将至少涉及 2/3 的行，因此查询永远不会超快。

如果您计划大量运行此查询，您可能还需要考虑在`product_status`.

# mysql - 在 SQL 中使用 AND 关键字与使用“joins”[显式]有何不同

> ID：15318674
> 
> 赞同：-1
> 
> 时间：2013-03-10T03:44:49.337
> 
> 标签：mysql, sql, relational-database

我们真的需要关键字 join 来选择按列的结果集或 AND 条件（根据情况）就足够了吗？使用内连接和 AND 关键字有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:16:26.410

它们完全不同。

AND 允许您在单个子句中指定多个条件。例如，`select * from table where col1=1 and col2=0`将两个条件放在单个 WHERE 子句上，影响您从单个表中获取哪些记录。

INNER JOIN 允许您将一个表中的列与另一表中的列组合。它根据您在 ON 子句中提供的条件匹配行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:59:45.290

两者完全不同。

`AND`缩小结果集。

`INNER JOIN`允许您基于关系交叉引用相关表。

# java - 如何将 BufferedImage 编写为不压缩的 PNG？

> ID：15318677
> 
> 赞同：4
> 
> 时间：2013-03-10T03:45:06.600
> 
> 标签：java, png, javax.imageio

我需要将 a 写`BufferedImage`为 .png 而不执行压缩。我环顾四周，并提出以下代码。

```
public void save(String outFilePath) throws IOException {
    Iterator<ImageWriter> iter = ImageIO.getImageWritersByFormatName("png");
    ImageWriter writer = iter.next();

    File file = new File(outFilePath);      
    ImageOutputStream ios = ImageIO.createImageOutputStream(file);
    writer.setOutput(ios);

    ImageWriteParam iwp = writer.getDefaultWriteParam();
    iwp.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
    iwp.setCompressionQuality(1.0f);

    IIOImage image = new IIOImage(mapImage, null, null);

    writer.write(null, image, iwp);
    writer.dispose();

    //ImageIO.write(mapImage, "png", file);
} 
```

这是抛出的异常。

```
Exception in thread "main" java.lang.UnsupportedOperationException: Compression not supported.
    at javax.imageio.ImageWriteParam.setCompressionMode(Unknown Source)
    at Map.MapTransformer.save(MapTransformer.java:246)
    at Map.MapTransformer.main(MapTransformer.java:263) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:13:34.720

PNG 图像通过首先应用预测[过滤器](http://www.w3.org/TR/PNG-Filters.html)（您可以在五个变体中进行选择）来实现压缩，然后使用 ZLIB 压缩预测误差。你不能省略这两个步骤，你可以做的是指定“NONE”作为预测过滤器，并将compressionLevel=0 用于ZLIB 压缩，这将大致对应于未压缩的图像。该`javax.imageio.*`软件包不允许（我认为）选择此参数，也许您可​​以尝试使用[此](http://www.jfree.org/jcommon/api/com/keypoint/PngEncoder.html)或[此](https://code.google.com/p/pngj/)

# r - 在 R 中创建不同维度的矩阵向量

> ID：15318681
> 
> 赞同：5
> 
> 时间：2013-03-10T03:45:22.520
> 
> 标签：r

如何在 R 中创建不同维度的矩阵向量。例如说我有两个矩阵

```
M1=array(0,dim=c(2,2))
M2=array(0,dim=c(3,3)) 
```

然后我可以制作一个包含这些矩阵的向量 C 使得

```
C[1]=M1 
```

和

```
C[2]=M2. 
```

我知道我可以创建一个 3 维数组

```
C=array(NA,dim=c(2,3,3) 
```

但我知道如何做到这一点的唯一方法必须是

```
C[1,,] 
```

数组中的元素有更多的空间然后是必要的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T03:47:14.320

使用列表

```
C <- list()
C[[1]] <- array(0,dim=c(2,2))
C[[2]] <- array(0,dim=c(3,3))
C[[1]][1,1] <- 5
C[[1]]
C[[2]] 
```

# ios - 在 iOS 上与 SimpleUPC API 集成时遇到问题

> ID：15318686
> 
> 赞同：0
> 
> 时间：2013-03-10T03:45:45.060
> 
> 标签：ios, afnetworking

所以我对此比较陌生，我遇到了一个让我很困惑的问题。SimpleUPC 提供了一个非常简单的 API，但它们具有以下 JSON 请求格式：

```
{
"auth":"Your API Key",
"method":"MethodName",
"params": {
    "paramName":"paramValue",
    "paramName2":"paramValue2",
},
"returnFormat":"optional"
} 
```

我还下载了他们的 Ruby 示例，我已经验证它可以从命令行运行。

```
# Sample API calls using JSON...
host = "api.simpleupc.com"
path = "/v1.php"

# An example query for FetchProductByUPC method
request = {
    "auth" => 'Your-API-Key',
    "method" => 'FetchProductByUPC',
    "params" => {"upc" => '041383096013'}
}

json = request.to_json()

response = Net::HTTP.start(host) { |http|
    http.post(path, json, initheader = {'Content-Type' =>'text/json'})
}

output = response.body

puts output 
```

好的，到目前为止一切都很好。但这是我的代码，它试图做同样的事情，但我收到错误，抱怨缺少参数。

```
NSDictionary *requestDict = @{@"auth": kSimpleAPIKey, @"method": @"FetchProductByUPC", @"params":@{@"upc": code}};

[[SimpleUPCClient sharedClient] getPath:@""
                             parameters:requestDict
                                success:^(AFHTTPRequestOperation *operation, id responseObject) {

                                    NSLog(@"Response: %@", responseObject);

                                }
                                failure:^(AFHTTPRequestOperation *operation, NSError *error) {

                                    [TMReportingHandler handleError:error fatal:NO];

                                }]; 
```

我知道这一定很简单，我做错了，但我无法弄清楚。任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:11:52.477

哇，我知道这很简单。原来它期待的是 POST 而不是 GET ......我切换了它并且它立即工作。

# sql-server - 在本地计算机上运行时，MVC4 应用程序未连接到 SQL Server

> ID：15318687
> 
> 赞同：0
> 
> 时间：2013-03-10T03:45:50.660
> 
> 标签：sql-server, asp.net-mvc-4

在我今天开始工作之前，我有一个 MVC4 应用程序正在运行。据我所知，我没有对连接字符串进行任何更改。

我有一个连接字符串设置为使用 SQL Server 2012 数据库。

尝试从本地计算机运行应用程序时，出现此错误：

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）*
> 
> *描述：*
> 
> *当前 Web 请求执行期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。*
> 
> *SQLExpress 数据库文件自动创建错误：*
> 
> *连接字符串使用应用程序 App_Data 目录中的数据库位置指定本地 SQL Server Express 实例。提供者试图自动创建应用程序服务数据库，因为提供者确定该数据库不存在。成功检查应用程序服务数据库是否存在并自动创建应用程序服务数据库需要以下配置要求：*
> 
> *机器上必须安装 Sql Server Express。*

如果我从它所在的服务器运行应用程序，我不会收到此错误。我还可以使用 SQL Server Management Studio 和服务器资源管理器中构建的 Visual Studio 从本地计算机和服务器访问 SQL Server 数据库。

# python - Matplotlib 在第一帧后停止动画

> ID：15318690
> 
> 赞同：13
> 
> 时间：2013-03-10T03:46:15.593
> 
> 标签：python, animation, matplotlib

我正在尝试为两个子图设置动画，每个子图都有多行。我正在使用[Matplotlib](http://matplotlib.org/)，我正在使用[`FuncAnimation`](http://matplotlib.org/api/animation_api.html#matplotlib.animation.FuncAnimation)许多[动画示例](http://matplotlib.org/examples/animation/index.html)使用的.

### 使用动画：

如果我尝试对其进行动画处理，我只会得到第一帧的结果： ![带动画](../Images/d7cbd58dca3a6d5cb35cfc6e47617c2c.png)

### 不使用动画：

如果我手动调用我的`update_lines`函数，它工作正常。 ![没有动画](../Images/2b9ae175b62eeaf82ed5d440e542151c.png)

### 代码：

以下是完整代码（取消注释`main()`作品中指示的 3 行，但我希望看到它实时更新，因此尝试使用动画）。

```
import matplotlib.pyplot as plt
from matplotlib.animation import FuncAnimation

def make_subplots():
    def setup_axes(axes):
        for ax in axes:
            ax.set_xbound(0, 100)  # bound will change as needed.
            ax.set_ylim(0, 1)  # limit won't change automatically.

    def make_lines(axes):
        labels = ('a', 'b', 'c')
        lines = []
        for ax in axes:
            ax_lines = []
            for label in labels:
                x, y = [0], [0]
                line, = ax.plot(x, y, label=label)  # comma for unpacking.
                ax_lines.append((line, x, y))
            lines.append(ax_lines)
        return lines

    fig, axes = plt.subplots(2, 1, sharex=True, sharey=True)
    lines = make_lines(axes)
    setup_axes(axes)
    return fig, axes, lines

def make_data():
    for i in xrange(100):
        print 'make_data():', i
        data = dict()
        for label in ('a', 'b', 'c'):
            from random import random
            data[label] = random()
        yield (i + 1, data)

def update_lines(data, lines):
    print 'update_lines():', data, lines
    updated_lines = []
    for ax_lines in lines:
        for line, x, y in ax_lines:
            label = line.get_label()
            x.append(data[0])
            y.append(data[1][label])
            line.set_data(x, y)
            updated_lines.append(line)

def main():
    fig, axes, lines = make_subplots()

    # Uncomment these 3 lines, and it works!
    # new_data = make_data()
    # for data in new_data:
    #     update_lines(data, lines)

    FuncAnimation(fig=fig,
                  func=update_lines,
                  frames=make_data,
                  fargs=(lines,),
                  interval=10,
                  blit=False)

    plt.show()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-10T21:42:01.210

### （无证？） 钩子

所以，我正在挖掘 的源代码`matplotlib.animation.Animation`，我注意到函数中的这些行`__init__()`：

```
# Clear the initial frame
self._init_draw()

# Instead of starting the event source now, we connect to the figure's
# draw_event, so that we only start once the figure has been drawn.
self._first_draw_id = fig.canvas.mpl_connect('draw_event', self._start) 
```

### 听起来很熟悉...

到目前为止，这看起来是正确的。该`self._init_draw()`调用立即绘制了我的第一帧。然后动画对象钩入图形对象并等待图形显示，然后再尝试为动画绘制更多帧。

### 尤里卡！

关键字是：动画**对象**。由于我不打算稍后使用动画实例（例如，绘制电影），因此我没有将其分配给变量。*事实上*，我被**pyflakes**[骂](https://pypi.python.org/pypi/pyflakes)是因为`Local variable '...' is assigned to but never used`.

但是因为所有的功能都依赖于钩子，所以当画布最终显示出来时，我认为 Python 的垃圾收集已经删除了 Animation 实例——因为它从未分配给变量——因此动画永远无法启动。

### 修复

只需将实例`FuncAnimation`实例分配给一个变量，一切都会按预期工作！

```
anim = FuncAnimation(fig=fig,
                     func=update_lines,
                     frames=make_data,
                     fargs=(lines,),
                     interval=10,
                     blit=False) 
```

# ajax - 通过 Ajax 传递时，活动记录 codeigniter 不会更新数据库

> ID：15318691
> 
> 赞同：1
> 
> 时间：2013-03-10T03:46:28.007
> 
> 标签：ajax, activerecord, codeigniter-2

问题是当我使用提交时，codeigniter 会干净地处理脚本。但是当我通过 ajax 传递数据时。脚本工作正常。当我使用 print_r 时，它甚至会输出数组。只是它不更新数据库。一切都很好，直到 activerecord 脚本。这是我的控制器脚本。（我只是简化了它）。我所做的是有一个脚本可以创建一个空行。因此，它将检索将用于保存文章的文章 ID。这是保存文章功能。

**控制器：**

```
function saveArticle(){
$this->userarticle_model->trial();
} 
```

**模型：**

```
 function trial(){
      $userid = $this->session->userdata('userid');
      $articleId = $this->input->post('article_id');
      $articleData = array(
    'sfc_articleAuthor' =>$userid ,
    'sfc_articleTitle' => $this->input->post('article_title'),
    'sfc_articleContent' => $this->input->post('article_content'),
    'sfc_articleStatus' => 'saved',
    'sfc_articleTag' =>$this->input->post('article_tag'),
    'sfc_articleCategory' => $this->input->post('article_category')
    );
    $this->db->where('sfc_articleId', $articleId);
    $this->db->update('sfc_articles', $articleData); 
    } 
```

**AJAX：（** 对不起，我只是从教程中复制的。）

```
 $(document).ready(function(){
    $('.save').click(function() {

        $('#article_form').hide(0);
        $('#message').hide(0);
        var article_title =  $('#article_title').val();
        var article_tag = $('#article_tag').val();
        var article_id = $('#articleId').val();
        var article_category =  $('#article_category').val();
        var article_content = $('#article_form').find('.nicEdit-main').text();
        var article_status  = 'saved';
        var dataString = 'article_title='+ article_title + '&article_tag=' + article_tag + '&article_category=' + article_category + '&article_content=' + article_content + '&article_status=' + article_status;
        $.ajax({
            type : 'POST',
            url : 'http://localhost/ci_usage/index.php/article/saveArticle',
            dataType : 'json',
            data: dataString,
            success : function(data){
                $('#waiting').hide(500);
                if (data.error === false)
                    $('#article_form').show(10);
            },
            error : function(XMLHttpRequest, textStatus, errorThrown) {
                $('#article_form').hide(10);
                $('#article_form').show(3);
            }
        });
        return false;
    });
}); 
```

**看法：**

```
<?php echo form_open('article/processArticle',array('id'=>'article_form'));?>

<?php echo validation_errors(); ?>
<div id="sidebar_options">
    <div class="sidebar_title">Article Settings</div>
    <ul>
        <li>
        <label>Tags</label><br />
        <input type="text" name="article_tag"  size="15" value="<?php echo set_value('article_tag');?>" id="article_tag"/>
        </li>
        <li>
        <label>Category</label><br />
         <select name="article_category" id="article_category">
            <option value="1">Test Category 1</option>
            <option value="">Test Category 2</option>
            <option value="">Test Category 3</option>
            <option value="">Test Category 4</option>
        </select>
        </li>
        <a href="#"><li>PDF version</li></a>
    </ul>
</div>
<div id="option_panel">
<input type="text" name="article_title" size="30" placeholder="Title" value="<?php echo set_value('article_title');?>" id="article_title"/>
<input type="submit" value="Publish" name="publish" />
<input type="button" value="Preview" class="save"/>
<input type="button" value="Save" class="see"/>
</div>

<div id="write_panel" style="width:700px; margin-left:50px; width:800px;"></div>
<div id="write_area">
<textarea name="article_content" id="article_content" style="height:690px; width:800px;" ></textarea>
<input type="hidden" value="<?php echo $articleId;?>" name="article_id" id="articleId"/>
</div>
</div>

<?php echo form_close();?> 
```

我真的为此挠头了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T03:16:26.783

刚刚得到答案。忘记添加以将最后一个变量放入 ajax 文件中的数据字符串中。

# php - PHP 到 JQuery：json_encode 不起作用

> ID：15318692
> 
> 赞同：1
> 
> 时间：2013-03-10T03:46:31.597
> 
> 标签：php, jquery, getjson, json

在过去的几天里，我一直在努力解决这个问题。事实上，由于我对这一切都不熟悉，所以我似乎一直在试图弄清楚一些事情。无论如何，关于我的问题。

我正在尝试在 PHP 中编码一个数组，并使用以下代码使用 JSON 在 JQuery 中检索它：

'core/init.php' 中包含的函数：

```
function output_errors($errors) {
    echo json_encode($errors);
} 
```

登录.php：

```
<?php

include 'core/init.php';
logged_in_redirect();

if (empty($_POST) === false) {
$username = $_POST['username'];
$password = $_POST['password'];

if (empty($username) === true || empty($password) === true) {
    $errors[] = 'Please enter a username and password.';
} else if (user_exists($username) === false) {
    $errors[] = 'We can\'t find that username.  Have you registered?';
} else if (user_active($username) === false) {
    $errors[] = 'You haven\'t activated your account.';
} else {
    $login = login($username, $password);
    if ($login === false) {
        $errors[] = 'That username/password combination is incorrect.';
    } 
    else {
    //start session
        $_SESSION['user_id'] = $login;
    //redirect to home.
        header('Location: index.php');
        exit();
    }
}
} else {
header('Location: index.php');
}

include 'includes/overall/header.php';

if (empty($errors) === false) {

?>

<h2>We tried to log you in but...</h2>

<?php

output_errors($errors);

}

include 'includes/overall/footer.php';

?> 
```

查询：

```
function logErrors(errors) {
    alert(errors);
};

$(document).ready(function() {
$.getJSON('login.php', function(errors){
    logErrors(errors);
    });
}); 
```

我在本地工作并且已经让它工作一个测试文件：

测试.php：

```
<?php

function output_errors($errors) {
echo json_encode($errors);
}

output_errors($errors);

?> 
```

在我的一些研究中，我发现 PHP 的版本可能是一个问题。这似乎不是我的问题，因为我已经让它与另一个文件一起工作。

其他人似乎遇到的另一个常见问题是 $.getJSON 是异步的，并且可能在 php 有机会返回数组之前运行。我不确定我的 JQuery 结构是否正确以避免该问题。

我一直得到的是没有警报，并且错误回显如下：[“我们找不到该用户名。您注册了吗？”]。

如何让我的 JQuery 检索编码数组并触发函数 logErrors？

提前感谢你们可以提供的任何帮助。对不起，如果我发布了太多或不够的代码......新手错误。

更新

以下是 user_exists 和 user_active 函数：

用户存在：

```
function user_exists($username) {
   $username = sanitize($username);
   $query = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username` =    '$username'");
   return (mysql_result($query,0) == 1) ? true : false;     
} 
```

用户活动：

```
function user_active($username) {
   $username = sanitize($username);
   $query = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username'AND `active` = 1");
   return (mysql_result($query,0) == 1) ? true : false;     
} 
```

乙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:59:39.453

您的问题可能是需要在返回 json 对象之前设置标头

```
function output_errors($errors) {
    header('Content-Type: application/json');
    echo json_encode($errors);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:32:57.817

最后，想通了。bozdoz 和 DCoder 被证明是正确的。我没有意识到 php 会回显整个页面（菜鸟错误）。我的印象是它只会回显 json_encoded 数组。

对于遇到类似问题的任何人，请确保您正在使用仅回显所需结果的文件。

感谢您的帮助。

# string - 在 Haskell List Comprehensions 中做一些替换

> ID：15318696
> 
> 赞同：6
> 
> 时间：2013-03-10T03:46:47.030
> 
> 标签：string, list, haskell, list-comprehension

我的问题是，如果我输入一个包含诸如`Hello, today is a Nice Day!!`如何摆脱空格和标点符号以及用小写字母替换大写字母的字符串？

我知道如何删除它们，但不知道如何替换它们。

还要去掉标点符号。

抱歉，我不知道如何处理字符串，只有数字。

```
testList xs = [if x = [,|.|?|!] then " "  | x<-xs] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T08:28:03.163

```
import Data.Char 
```

如果要将标点符号转换为空格并将字符从大写转换为小写：

```
testList xs = [if x `elem` ",.?!" then ' ' else toLower x | x<-xs] 
```

例子：`testList "TeST,LiST!" == "test list "`

如果要删除标点符号并将字符从大写转换为小写：

```
testList2 xs = [toLower x | x<-xs, not (x `elem` ",.?!")] 
```

例子：`testList2 "Te..S,!t LiS?T" == "test list"`

如果不想或不能导入 Data.Char，这是 toLower 的一个实现：

```
toLower' :: Char -> Char
toLower' char 
    | isNotUppercase = char -- no change required
    | otherwise = toEnum (codeChar + diffLowerUpperChar) -- char lowered
    where
      codeChar = fromEnum char -- each character has a numeric code
      code_A = 65
      code_Z = 90
      code_a = 97
      isNotUppercase = codeChar < code_A || codeChar > code_Z
      diffLowerUpperChar = code_a - code_A 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T04:16:55.367

我已经很长时间没有在 Haskell 中编写代码了，但是以下应该删除无效字符（用空格替换它们）并将字符从大写转换为小写：

```
import Data.Char

replace invalid xs = [if elem x invalid then ' ' else toLower x | x <- xs] 
```

另一种方法：

```
repl invalid [] = []
repl invalid (x:xs) | elem x invalid = ' ' : repl invalid xs
                    | otherwise      = toLower x : repl invalid xs 
```

您可以像这样调用`replace`(or `repl`) 函数：

```
replace ",.?!" "Hello, today is a Nice Day!!" 
```

上面的代码将返回：

```
"hello  today is a nice day  " 
```

**编辑：**我正在使用 Haskell 中的`toLower`函数`Data.Char`，但如果你想自己编写，请在 Stack Overflow 上查看。这个问题以前有人问过。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-10T05:27:20.290

您将在以下位置找到您需要的功能`Data.Char`：

```
import Data.Char

process str = [toLower c | c <- str , isAlpha c] 
```

虽然就个人而言，我认为函数组合方法更清晰：

```
process = map toLower . filter isAlpha 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-10T04:04:43.163

要摆脱标点符号，您可以使用像这样的过滤器

```
[x | x<-[1..10], x `mod` 2 == 0] 
```

您正在使用的“如果”不会过滤。将 if 放在列表理解的“地图”部分只会在两个选项之间进行选择，但您无法将它们过滤掉。

至于将事物转换为小写，它与您已经可以在数字上实现的技巧相同：

```
[x*2 | x <- [1..10]] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-10T04:37:37.673

这是一个没有导入模块的版本，使用 fromEnum 和 toEnum 来选择允许的字符：

```
testList xs = 
  filter (\x -> elem (fromEnum x) ([97..122] ++ [32] ++ [48..57])) $ map toLower' xs 
    where toLower' x = if elem (fromEnum x) [65..90] 
                          then toEnum (fromEnum x + 32)::Char 
                          else x

OUTPUT:
*Main> testList "Hello, today is a Nice Day!!"
"hello today is a nice day" 
```

对于无模块替换功能，这样的事情可能会起作用：

```
myReplace toReplace xs = map myReplace' xs where
  myReplace' x
    | elem (fromEnum x) [65..90] = toEnum (fromEnum x + 32)::Char
    | elem x toReplace           = ' '
    | otherwise                  = x

OUTPUT:
*Main> myReplace "!," "Hello, today is a Nice Day!! 123"
"hello  today is a nice day   123" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-13T02:34:14.230

使用应用风格

来自“Learn You a Haskell for Great Good！”一书的文字引用：

> 在列表上使用 applicative 样式通常可以很好地替代列表推导式。在第二章中，我们想查看 [2,5,10] 和 [8,10,11] 的所有可能乘积，所以我们这样做了：

```
[ x*y | x <- [2,5,10], y <- [8,10,11]] 
```

> 我们只是从两个列表中提取并在每个元素组合之间应用一个函数。这也可以在应用风格中完成：

```
(*) <$> [2,5,10] <*> [8,10,11] 
```

> 这对我来说似乎更清楚，因为更容易看出我们只是在两个非确定性计算之间调用 *。如果我们想要这两个列表中超过 50 个的所有可能产品，我们会这样做：

```
filter (>50) $ (*) <$> [2,5,10] <*> [8,10,11]
-- [55,80,100,110] 
```

[Functors、Applicative Functors 和 Monoids](http://learnyouahaskell.com/functors-applicative-functors-and-monoids#applicative-functors)

# php - 如何使用 fputcsv 在 MySQL 的 csv 中获取 NULL 值？

> ID：15318706
> 
> 赞同：0
> 
> 时间：2013-03-10T03:48:33.553
> 
> 标签：php, mysql, null, fputcsv

在 PHP 中，我使用该`fputcsv`函数生成一个逗号分隔的文件，以便在 MySQL 表中导入（使用 `LOAD DATA INFILE`）：

```
fputcsv($fcsv, array( 
    $id,
    $name,
    $optional
)); 
```

`$optional`可以为空，所以在 MySQL 中这应该是`NULL`

在 MySQL 文档中，我读到要导入一个`NULL`值，它应该`\N`在 csv 文件中定义。

但是该`fputcsv`函数在它周围加上引号，所以 MySQL 认为它是*string* `"\N"`。

有没有解决方案，或者我应该忘记使用`fputcsv`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T14:52:02.587

有点 hack，但你可以在输出中用 str_replace 用 \N 替换“\N”：

```
//open temporary datastream for CSV output    
$fp = fopen("php://temp", "w");

//assuming $data is an array of arrays each of which is a record with \N 
//in place of nulls
foreach($data as $line) {
  fputcsv($fp, $line);
}

//read data back in to a string
rewind($fp);
$csv_data = fgets($fp);

//replace "\N" with \N
$csv_data = str_replace('"\N"', '\N', $csv_data);

//save to file
file_put_contents($csv_file_path, $csv_data); 
```

可能也不是最节省内存的，所以对于大型数据集要小心，但应该可以......

# javascript - 如何使用 Cradle 向 CouchDB 添加新的键值对？节点.js

> ID：15318711
> 
> 赞同：0
> 
> 时间：2013-03-10T03:49:28.183
> 
> 标签：javascript, node.js, couchdb, couchdb-futon, cradle

我的 CouchDB 数据库中有一个文档，我想添加一个新的键值对。我正在使用 Cradle 与数据库 ( [https://github.com/cloudhead/cradle](https://github.com/cloudhead/cradle) ) 进行通信，但是，如果我尝试使用不存在的字段对其进行更新，则会出现错误。我的文档布局如下：

```
{
 "_id": "document",
 "_rev": "some_revision",
 "key1": "index.html",
 "key2": "hows.html",
 "key3": "about.html"
} 
```

我尝试使用的代码如下所示：

```
db.merge('document', {
        req.body.key: req.body.value
      }, function (err, res) {
        console.log('added to document')
    }); 
```

我得到的错误如下所示：

```
SyntaxError: Unexpected token . 
```

引用 req.body 之间的 (.)。

有没有人对如何处理这个有任何好的指导？到目前为止，摇篮对我来说一直很棒，但这似乎比它应该做的更困难！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T03:59:11.780

这只是一个 Javascript 问题 - 与 Cradle 无关。您不能这样做来设置动态命名的道具：

```
 {
    req.body.key: req.body.value
  } 
```

你需要这样做：

```
var temp = {}
temp[req.body.key] = req.body.value
db.merge('document', temp, ... 
```

# wcf-ria-services - WCF RIA 发送服务器通知

> ID：15318719
> 
> 赞同：1
> 
> 时间：2013-03-10T03:50:24.617
> 
> 标签：wcf-ria-services

是否可以使用 WCF RIA 从服务器通知所有客户端？我们有一个要求，当我们从 Silverlight 5 客户端保存数据时，应通知所有客户端。我们在后端使用 WCF RIA，

如果有人能指出我正确的方向，我会很感激！

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:14:00.747

我同意 Leo 关于 SignalR 的看法，这应该不难做到，但是必须说 Silverlight 支持 FullDuplex，因此您可以让您的客户端调用您的服务器以建立连接并获取回调。这是一个示例[http://msdn.microsoft.com/en-us/library/cc645027(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc645027(v=vs.95).aspx)。请记住，为了使用全双工，silverlight 客户端必须打开端口 (4502-4534)。终于有了使用 Comet 模式的想法，为此我带你去这个问题：[Silverlight：企业级推送通知](https://stackoverflow.com/questions/10079516/silverlight-enterprise-grade-push-notifications)，但是我遇到了 FF/Chrome 和长轮询的一些问题

高温高压

# php - 我在尝试计算变量的值时在 php 中收到通知

> ID：15318720
> 
> 赞同：0
> 
> 时间：2013-03-10T03:50:45.227
> 
> 标签：php

这是检查表单的 php 代码片段

```
<?php
include_once("includes/form_functions.php");
$var1 = 0; 
$var2 = 0; 
$var3 = 0; 
$var4 = 0; 
if(isset($_POST['submit'])) // checks if submit button is clicked of form
{
    if(isset($_POST['rdvar1']))
    {
        $var5 = $_POST["rdvar1"];
        if($_POST["rdvar1"] == "RJ")
        {
            $var1 = 20;
            $var2 = 15;
        }
        else
        {
            $var1 = 5;
            $var2 = 10;
        }           
    }
    if(isset($_POST['rdvar3']))
    {
        $var3 = $_POST["rdvar3"];
    }
    if(isset($_POST['rdvar4']))
    {
        $var4 = $_POST["rdvar4"];
    }
              elseif()
    {
               // many else if validation goes here 
              } 
        else
    {
        // some more internal validations
        $var6 = $var1/100 * $var2 + $var3 * $var4; // here i calculated var6 

            if(empty($message))
            {
            // db insert query  
                  }
    }
}
?> // php tag ends

// html website starts here
<!DOCTYPE html>
<html lang="en">

// somewhere down in html page i used

<?php
echo $var6
?>
// rest of html code and form 
```

我所有的表单代码都很好，所有的 html 都很好，我想我做的所有 php 也很好..

当我运行此代码时，网页上会不断发出通知

```
 Notice: Undefined variable: var6 in C:\wamp\www\aaa\calc.php on line 478 
```

我对未定义变量的理解可能是变量的局部或全局范围......但我在 php 主代码中使用了这个变量并在 php 主代码中再次调用它，这意味着它不在任何函数内，所以它的范围应该是全局的。 . 仍然收到此通知，我无法检查此变量的价值是什么？

伙计们可能有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T03:55:49.883

因为您跳过了它，所以您只分配了 else：

```
if (condition) {
    // !! whatever here is executed
}
else
{
    // !! and this does not
    // some more internal validations
    $var6 = $var1/100 * $var2 + $var3 * $var4; // here i calculated var6 

        if(empty($message))
        { // db insert query }
} 
```

您放入的条件未执行，您可以尝试捕获值或改进 if 条件。

要完成通知并删除错误，您需要像其他脚本一样在脚本顶部初始化；

```
$var1 = 0; 
$var2 = 0; 
$var3 = 0; 
$var4 = 0; 
$var6 = 0; // <-- init this too 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T03:54:06.967

通知通常并不太重要，只是为了警告您一些可能发生但可能不会发生的怪癖。在这种情况下，您可以忽略通知。

您还可以使用以下 PHP 代码禁用通知：

```
error_reporting(E_ALL ^ E_NOTICE); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-10T04:00:25.053

您的代码只是没有设置 $var6 的值。您的选择是：

1.  始终设置 $var6，就像您使用 $var1-4 一样
2.  只是隐藏通知。这样做是这样的： <?PHP echo @$var6; ?>
3.  在回显之前检查是否设置了 $var6： <?PHP echo isset($var6) ? $var6 : "Var6 未设置！"; ?>

# xamarin.ios - UICollectionView 单元格大小

> ID：15318722
> 
> 赞同：4
> 
> 时间：2013-03-10T03:51:04.480
> 
> 标签：xamarin.ios, uicollectionview, uicollectionviewcell

Stackoverflow 问题[https://stackoverflow.com/a/13555814/1678391](https://stackoverflow.com/a/13555814/1678391)已回答关于在 UICollectionViewController 中设置可变大小的单元格。我试图弄清楚如何使用 UIViewController 中包含的 UICollectionView 对象来执行此操作。GetSizeForItem 是我需要的，但看不到从哪里得到它。

我的实现通过 Xcode 向我的 UIViewController 添加了一个 UICollectionView。在我的代码中，我正在执行以下操作；

```
public partial class CustomViewController : UIViewController
{
    public override void ViewDidLoad()
    {
        collectionView.RegisterClassForCell(typeof(MyCell), cellId);
    }

    public override void ViewWillAppear(bool animated)
    {
        collectionView.Source = new CollectionViewSource(items, cellId);
    }

    class CollectionViewSource : UICollectionViewSource
    {
    }

    class MyCell : UICollectionViewCell
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:52:28.550

根据[http://docs.go-mono.com](http://docs.go-mono.com/?link=M:MonoTouch.UIKit.UICollectionViewDelegateFlowLayout.GetSizeForItem) `GetSizeForItem`仅适用于`UICollectionViewDelegateFlowLayout`类。

要使用该方法，您应该实现`UICollectionViewDelegateFlowLayout`子类并将其分配`Delegate`给`UICollectionViewController`. [例子](https://stackoverflow.com/questions/13792350/how-can-i-provide-getsizeforitem-implementation-in-uicollectionviewcontroller)。

# xcode - 如何使用 AppleScriptObjC 关闭我的 Xcode 应用程序？

> ID：15318724
> 
> 赞同：0
> 
> 时间：2013-03-10T03:51:07.803
> 
> 标签：xcode, macos, applescript, applescript-objc

我有一个 AppleScriptObjC Xcode 应用程序。在这个应用程序中，我构建了一个更新程序，它在启动时检查更新并提示用户下载它们。一切都很好 - 除了一件事。我需要应用程序在更新时重新启动，以便更改生效。我已经在互联网上搜索了高低，但我无法弄清楚。我不能“告诉应用程序 \"MyApp\" 退出”，因为 Xcode 不允许这样做。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T08:11:59.780

这是重新启动的Objective-C-Method。也许你可以使用这个想法。

```
+(void)restart:(id)sender
{
    NSString *restartScript = @"while ps -p $1 > /dev/null; do sleep 0.1; done; open \"$2\"";
    NSArray *arguments = [NSArray arrayWithObjects:
                          @"-c", restartScript,
                          @"",
                          [NSString stringWithFormat:@"%d",[[NSProcessInfo processInfo] processIdentifier]],
                          [[NSBundle mainBundle] bundlePath],
                          nil];
    [NSTask launchedTaskWithLaunchPath:@"/bin/sh" arguments:arguments];
    [NSApp terminate:self];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:10:15.413

如果您只想退出应用程序，使用该命令`quit`似乎可以正常工作。如果您希望它*重新启动*（不使用 Objective-C），您可以尝试在退出之前启动一个单独的脚本，执行如下操作：

```
delay 2
tell application "Name of Application" to activate 
```

我希望这个想法有所帮助。

# fortran - 在 FORTRAN 的 PRINT 语句中打印小数点后一定位数

> ID：15318725
> 
> 赞同：0
> 
> 时间：2013-03-10T03:51:18.037
> 
> 标签：fortran

我有一个双精度变量 x = 10，当我使用以下语句时： Print( *,* ) x Fortran 将打印出一个冗长的数字 10.0000000000000 。我只想要小数点 (.) 后的 2 位数字，即 10.00 我应该怎么做，而不是使用 Print( *,* ) ？谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T04:40:48.817

```
 X=10
   WRITE(*,44) X
44 FORMAT(F4.2) 
```

我认为 FORMAT 语句是您所追求的。F4.2 表示要在 4 列中写入小数点后 2 位的实数。

# perl - Perl HTML::TreeBuilder 类“包含”条件

> ID：15318728
> 
> 赞同：1
> 
> 时间：2013-03-10T03:51:37.790
> 
> 标签：perl, html-parsing

我正在尝试使用 Perls HTML::TreeBuilder 从 HTML 页面中提取数据。我的选择器包括以下内容：

```
$root->look_down(_tag => 'div', class => 'member-search-results'); 
```

但是，`div`我正在寻找的有多个类，其中之一是`member-search-results`. 使用此代码，我无法找到`div`, 并且需要列出**所有**类才能成功匹配。

有什么办法可以让一个类*包含*对元素的搜索，以便代码也可以匹配如下标签：

```
<div class="CLASS1 member-search-results CLASS2">...</div> 
```

我知道这应该有效：

```
$root->look_down(_tag => 'div', class => qr/member-search-results/); 
```

但这是正确的方法还是有更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T09:01:18.150

请改用[Web::Query](http://p3rl.org/Web%3a%3aQuery)。它的 CSS 选择器按照标准工作。

```
use Web::Query qw();
Web::Query
    ->new_from_html('<div class="CLASS1 member-search-results CLASS2">...</div>')
    ->find('div.member-search-results')
    ->text; # returns '...' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T14:55:00.530

正如菲利普指出的那样，使用正则表达式方法可以获得预期的结果。具体来说，这是我使用的：

```
$tag = $tag->look_down(_tag => 'ol', class => qr/members/); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T03:58:18.667

也许您需要将它们分开`_tag`并`class`分成单独`look_down`的 's（将它们链接在一起）。

我用：

```
$tree->look_down( id => 'mw-content-text' )->look_down( _tag => 'ul' ); 
```

在[https://github.com/pdurbin/scripts/blob/master/inthenews](https://github.com/pdurbin/scripts/blob/master/inthenews)

# c# - MVC 和 Ajax.BeginForm 和 DIV.Load

> ID：15318736
> 
> 赞同：1
> 
> 时间：2013-03-10T03:53:18.700
> 
> 标签：c#, jquery, ajax, asp.net-mvc, asp.net-mvc-4

我有一个定义 Ajax.BeginForm 的部分。返回的模型具有在将 Url 返回到 PartialView 的服务器资源上创建的 ReportLink 属性。

在 Ajax,BeginForm.OnSuccessFunction 我试图返回并加载 html 内容`$("reportContent").load(AJAXRESULT.RenderLink)`

但是，我在某个地方陷入了无限循环。

编辑添加移动部件：

```
@model xxxx.Reports.Models.Reports.BaseReportModel
@{Layout = null;}
<div id="reportBase" class="k-content">
<div id="reportControl" >  
@using (Ajax.BeginForm(
          Model.PostAction,          
          Model.PostController,
          null,
          new AjaxOptions() { OnSuccess = "editPostSuccess", OnFailure = "editPostFailure" },
          new { id = "reportBase_frmViewer", name = "reportBase_frmViewer" }))
        {    
            @Html.AntiForgeryToken()            
            @RenderSection("reportParams", required: false)  
            if (@Model.AllowRefresh){
                <input type="button" id="btnRefresh" value="refresh" />
            }
            if (@Model.AllowExportToPDF){
                <input type="button" id="btnPDF" value="PDF" />
            }
            if (@Model.AllowExportToExcel){
                <input type="button" id="btnExcel" value="XLS" />
            }  
            @Html.HiddenFor(p => p.AllowExportToExcel)   
            @Html.HiddenFor(p => p.AllowExportToPDF)
            @Html.HiddenFor(p => p.AllowRefresh)      
            @Html.HiddenFor(p => p.AutoStartReport)   
        }   
    </div>
</div>
<div id="wait"></div>
<div id="reportContent"></div>
//The 
<script type="text/javascript">

    function editPostSuccess(ajaxContext) {
        showWaitIndicator(false);       
        $('#reportContent').load(ajaxContext.RenderLink**,<--This is a link to an asction that calls renderPartial on the controller** function () {
            $("#reportContent").show();
        });
    }

    function editPostFailure(ajaxContext) {
        showWaitIndicator(false);
        var response = JSON.parse(ajaxContext.responseText);
        var errorMessage = response.Message;
        $('#reportContent').html('@Resources.labels.lblServerErrorsOnForm' + " " + errorMessage);
        $("#reportContent").show();
        alert("FAILURE:"+response.Message);
    } 
```

**更新：**我不再确定浏览器是否已锁定。内容为 3.15 MB。我认为原始 html 非常冗长，并且需要很长时间才能在浏览器中呈现。下面是执行顺序：

1.  LoadPartial(ReportModel) - 这有一个 Ajax.BeginForm() 返回报告元数据并有一个刷新按钮。单击刷新按钮时。我调用了一个 js 函数，它使用 div.load(ReportModel.RenderLink) 加载一个 div，这是一个从控制器获取内容为 html 的 url。

2.  ReportModel.RenderLink 指向一个控制器方法，该方法根据发送到控制器的模型参数返回一个 html 报告。结果是 PartialView("ReportContentPartial",string) 其中字符串是 html 片段。

3.  为了测试 ReportContentPartial，只需将 @Model 作为 @Html.Raw(Model) 转储到一个 div 中，这就是浏览器锁定的地方。我认为它处于无限循环中，但它只是花费很长时间来呈现 html。

我不明白的部分是当我使用 @Html.BeginForm 并转储 @Html.Raw(HTML) 时，它非常快。我需要以某种方式使用该渲染方法中使用的相同机制。报告 html 在不到一秒的时间内被提取并返回。问题是当我追踪@Html.Raw(HTML) 时，浏览器锁定并需要+15 秒来呈现内容。

我会继续努力的。我确信有一种更有效的方法来解决它，我可能需要考虑分解报告的方法。

**更新 2：**这似乎是开发环境问题。我正在使用运行命令从 VS2012 启动 IE。我感觉 asp.net 开发服务器出了点问题。当我在 chrome 中加载相同的 url 时，在 vs 中进行调试时，它会在不到一秒的时间内呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:34:06.780

我解决了这个问题。.net 40 附带的浏览器定义文件似乎存在问题。我求助于使用 .aspx 页面和回发的基于表单的报告应用程序版本，以了解为什么它会快速呈现而 MVC 版本如此缓慢. 使用 IE 10 时，它不会呈现，我发现 _dsoPostBacks 不适用于表单版本。然后我在浏览器定义文件上找到了[Scott Hanselman 的博客](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)，并在测试服务器上应用了修补程序，现在 ie 中的 mvc 版本正在以可接受的速率呈现。它与识别浏览器和降级 js 支持有关。我不知道为什么这解决了我的问题，但确实解决了:)

# c++ - (make/g++) 包含自动生成的依赖目标的完整路径？（或解决方法）

> ID：15318744
> 
> 赞同：1
> 
> 时间：2013-03-10T03:54:08.597
> 
> 标签：c++, unit-testing, g++, makefile, googletest

[短版] 我的单元测试 c++ 项目中不能有两个同名的源文件，即使它们位于不同的文件夹中。g++ 和 make 彼此脾气暴躁。（或者也许我是愚蠢的）

[长版] 我的 make/g++/gtest 设置遇到了问题。当 g++ 自动生成依赖项时，它会生成如下内容：

```
event_handler.o: src/os/event_handler.h src/os/event.h 
```

但我需要这样的东西（目标的完整路径）：

```
src/os/event_handler.o: src/os/event_handler.h src/os/event.h 
```

原因是当我有这样的文件时：

```
src/os/event_handler.cpp // contains EventHandler class 
```

我有一个这样的伴随文件：

```
test/src/os/event_handler.cpp // contains EventHandlerTest unit test class 
```

...所以他们的 .o 文件都只是在自动生成的依赖列表中显示为 event_handler.o 。有没有办法强制 g++ 提供完整路径，或者我是否需要将测试文件的名称更改为：

```
test/src/os/event_handler_test.cpp 
```

我无法在网上或文档中找到任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T10:49:02.037

有两种解决方案。

1.  使用-MMD一步编译创建依赖，会生成目标文件对应的.d文件。
2.  生成先决条件时，使用 -MT 或 -MQ 指定对象的路径。

我个人更喜欢 MMD 解决方案，因为它也倾向于更好地处理有问题的头文件。见[http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)

# javascript - 设置位置，就好像不存在不可见的图片一样

> ID：15318746
> 
> 赞同：0
> 
> 时间：2013-03-10T03:54:28.227
> 
> 标签：javascript, html

我有以下 HTML 和 JavaScript。有三张图片和三个链接。单击一个链接会显示一张图片并隐藏另外两张。

这行得通。但是，我希望它在显示图片时显示为好像其他两张图片不存在，而不是被推到页面下方的某个位置。那可能吗？

HTML

```
<div id="content">
  <div id="left">
    <a href="javascript:showImage('img1')">show image1</a>
    <a href="javascript:showImage('img2')">show image2</a>
    <a href="javascript:showImage('img3')">show image3</a>
  </div>

  <div id="right">
     <img id="img1" src="berlin.jpg" height="200px"/>
     <img id="img2" src="london.jpg" height="200px"/>
     <img id="img3" src="madrid.jpg" height="200px"/>
  </div>
</div> 
```

JavaScript

```
function showImage(id) {
    var images_id = new Array("img1", "img2", "img3");
    for (var i = 0; i < images_id.length; i++) {
        setImageVisible(images_id[i], false);
    }
    setImageVisible(id, true);
}

function setImageVisible(id, visible) {
    var img = document.getElementById(id);
    img.style.visibility = (visible ? 'visible' : 'hidden');
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T04:02:54.253

而不是这个：

```
img.style.visibility = (visible ? 'visible' : 'hidden'); 
```

用这个：

```
img.style.display = (visible ? '' : 'none'); 
```

# c# - 比较日期时出错

> ID：15318748
> 
> 赞同：-1
> 
> 时间：2013-03-10T03:54:44.620
> 
> 标签：c#, sql, sql-server-2008

我有一个`NVARCHAR`名为`Receivingdate`. 我想将其内容与当前时间进行比较，但是当我调用 时`WHERE (Receivingdate < Getdate())`，出现以下错误：

> 将 nvarchar 转换为 datetime 导致值超出范围

我使用来自 C# 的以下调用插入数据：

```
DateTime.Now.AddDays(ces).ToString("dd/MM/yyyy"); 
```

我想知道我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T04:25:50.633

您做错的是将日期存储在`NVARCHAR`列中。请停止这样做。修复您的表格并使用`DATE`数据类型创建该列。该错误是由垃圾数据进入您的表引起的。使用以下命令查找这些行：

```
SELECT Receivingdate FROM dbo.YourTable 
  WHERE ISDATE(ReceivingDate) = 0; 
```

现在，您需要在修复数据类型之前更正或删除它们。然后：

```
ALTER TABLE dbo.YourTable 
  ALTER COLUMN ReceivingDate DATE; 
```

接下来，在插入时停止转换为区域字符串格式。只需从 C# 中插入`DateTime`值，而无需调用`.ToString()`。绝对没有理由您应该通过任何此过程将日期转换为字符串并再次转换回来，除非您要显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:07:37.313

您的错误是您正在尝试将字符串与日期进行比较。日期是数字。唯一担心格式的时间是在显示它们时。

对于您到目前为止所显示的内容，将您的 c# 代码从

```
DateTime.Now.AddDays(ces).ToString("dd/MM/yyyy"); 
```

至

```
 DateTime.Today; 
```

你应该没事。

# iphone - 是否有可能让您的代码和资产被盗

> ID：15318756
> 
> 赞同：0
> 
> 时间：2013-03-10T03:56:46.603
> 
> 标签：iphone, cocos2d-iphone

我正在使用 kamcord 框架，它可以帮助我在正在开发的应用程序上记录我的游戏。我的东西有可能被偷吗？有哪些提高安全性的好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T03:59:17.490

由于您的最终应用程序已编译，因此不太可能窃取您的确切代码。不过，可以从应用程序的 .app 文件中检索资产。如果您正在录制应用程序的视频，则上述任何一项都不可能。

# c++ - 依赖项上的 C++ 动态链接可能会导致冲突？

> ID：15318758
> 
> 赞同：1
> 
> 时间：2013-03-10T03:57:01.190
> 
> 标签：c++, dynamic-linking

在我的以下场景中：

*   libA.so 库链接 libCommon.so
*   libB.so 库还链接 libCommon.so
*   即使两个库链接相同的 libCommon.so，它们也会设置不同的 libCommon.so 配置

    ```
     --> libA.so --> libCommon.so
            /
    ProgramA
            \
             --> libB.so --> libCommon.so

             --> libA.so
            /           \
    ProgramA              --> libCommon.so
            \           /
             --> libB.so 
    ```

我的程序会共享相同的 libCommon.so 副本还是使用不同的副本？正如我之前提到的，libCommon.so 与不同的设置一起使用。理想情况下，我希望它像第一张图一样，libCommon.so 在内存中有不同的副本。我试图避免调用一个副本影响另一方的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:20:16.037

简短的回答：你得到第二张图。这*通常*是大多数开发人员想要的，否则动态链接的好处就会减少。允许在同一个进程中进行多个实例化实际上取决于 libCommon 的实现——通常通过避免库中的全局变量来维护导出函数调用之间的状态来实现。

您是否维护 libCommon 的源代码？如果是这样，那么探索修复它的方法，使其使用基于“会话”，而不是在全局变量中维护所有状态。

如果没有，那么您是否维护 libA 或 libB 的源代码？您基本上可以通过将 libA 和 libB 中的一个或两个静态链接到 libCommon.a 而不是 libCommon.so 来获得第一个图表 - 这假定存在 libCommon.a 的静态编译版本。

# wordpress - 从 Wordpress 中连接到外部数据库

> ID：15318759
> 
> 赞同：1
> 
> 时间：2013-03-10T03:57:08.597
> 
> 标签：wordpress

我正在尝试从托管在同一本地主机服务器上的外部数据库连接到 WordPress 3.5.1 页面模板并将数据导入到 WordPress 3.5.1 页面模板中。

我已经对此进行了广泛的谷歌搜索，并为此提出了最首选的解决方案：

```
<?php
/*
Template Name: Import Sign data
*/
?>

<?php echo "Import Sign Data Page<br>"; ?>

<?php
$mydb = new wpdb('myname', 'mypassword', 'mydb', 'localhost');
$mydb->show_errors();

$signs = $mydb->get_results("SELECT * FROM signs");
print_r($signs);
foreach ($signs as $sign) {
    echo $sign->title . '<br />';
}

?> 
```

上面的代码只给了我第一个回声，“导入签名数据页”，没有别的。没有错误，什么都没有。我现在已经检查了很多次我的所有语法。任何人都可以看到我在这里可能出错的地方，或者可能建议一些调试技巧吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T04:06:17.490

[根据定义，](http://codex.wordpress.org/Class_Reference/wpdb)使用 wpdb 类仅适用于已安装的 wordpress 数据库。您应该使用与外部数据库相关的任何功能。

# php - 未加载以下主题的主题

> ID：15318764
> 
> 赞同：0
> 
> 时间：2013-03-10T03:58:30.230
> 
> 标签：php, mysql, subject

我的问题是，当我说我想要许多主题的主要主题时，这些主题向他展示了所有显示的事项 例如：工程程序：

* * *

阿贾克斯 PHP

力量：

* * *

阿贾克斯 PHP

* * *

电子：Ajax PHP

```
<?php
require_once 'send.php';
$obj = new classconnect();
$obj->funcconnect();
$cat = mysql_query('SELECT * FROM `_tbcat`');
echo '<table width="251" height="29">' . PHP_EOL;
while($rescat = mysql_fetch_assoc($cat)) {
    echo '<tr>' . PHP_EOL;
    echo '<td>' . PHP_EOL;
    echo '<p><a class="a2" href="showbycat.php?cat=' . $rescat['subcat'] . '">';
    echo '<img src="images/tray-logout.gif" alt="" width="12" height="9"/>' . $rescat['subcat'];
    $query = mysql_result(mysql_query("SELECT COUNT(*) AS `category` FROM `_tbup` WHERE (`category`='{$rescat['subcat']}')"), 0, 0);
    echo 'تعداد مقالات: (' . $query . ')</a></p>' . PHP_EOL;
    $khoroji = mysql_result(mysql_query("SELECT * from `_tbsubcat`,`_tbcat` WHERE _tbcat.id=id_cat"), 0,1);
    echo $khoroji;
}
 echo '</tr>' . PHP_EOL;

echo '</table>' . PHP_EOL;
?> 
```

# python - 如何让 PyParsing 识别 \x 转义？

> ID：15318776
> 
> 赞同：2
> 
> 时间：2013-03-10T04:01:33.450
> 
> 标签：python, pyparsing

我想使用 PyParsing 来解析基于 BNF 的规则。规则可能如下所示：

```
A -> 'You can use \xABCD to display hexadecimal numbers' 
```

其中 A 是非终结符。赋值操作数是'->'。最后一项是带引号的字符串。

我以下列方式使用 PyParsing：

```
Left= Word(alphanums)
Op = oneOf('= := -> ::=')
Right = QuotedString('"') | QuotedString("'")
Rule = Left+ Op+ Right
Rule.parseString("A -> '_\x5555 a'")  # Get an error of ValueError: invalid \x escape 
```

那么您能告诉我如何使用 QuotedString regconize \x 转义吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T13:09:22.070

如果要在输入字符串中嵌入 '\'，请确保在前导引号前加上 'r'，以便 Python 解释器保留所有 '\'，而不是将它们解释为转义。

从 Python 控制台（Python 3.3）：

```
>>> Left= Word(alphanums)
>>> Op = oneOf('= := -> ::=')
>>> Right = QuotedString('"') | QuotedString("'")
>>> Rule = Left+ Op+ Right
>>> Rule.parseString("A -> '_\x5555 a'")
(['A', '->', '_U55 a'], {})
>>> Rule.parseString(r"A -> '_\x5555 a'")  # use a raw string literal, with r""
(['A', '->', '_\\x5555 a'], {}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T05:09:41.850

只需使用`\\`转义`\`：

```
"A -> '_\\x5555 a'" 
```

# jquery - wp_register_script 与协议无关的源参数

> ID：15318779
> 
> 赞同：2
> 
> 时间：2013-03-10T04:02:00.637
> 
> 标签：jquery, wordpress, protocols, wordpress-3.5

在这个 WordPress 函数中注册一个脚本[wp_register_script](http://codex.wordpress.org/Function_Reference/wp_register_script)可以用来加载外部脚本，格式如下：

```
wp_register_script('my_jQuery', '//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'); 
```

如[文档](http://codex.wordpress.org/Function_Reference/wp_register_script)中所示，第二个参数可以以“//”开头，让 WordPress 指定协议：

> 可以使用与协议无关的 URL 指定远程资产​​，即“//otherdomain.com/js/theirscript.js”。默认值：无

对于 WordPress 3.5.1 可以正常工作，但对于 WordPress 3.4.2 则不行。

两个问题：

1-从哪个WordPress版本可以使用带有“//”的第二个参数？

2-对于不支持这种格式“//”的WordPress版本，推荐的外部资源调用方式是什么？我应该要求 WordPress 页面协议并相应地使用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T12:29:44.990

这在 core [Ticket #16560](http://core.trac.wordpress.org/ticket/16560)中进行了讨论：

> 加载外部资源时，大多数浏览器（需要确认）会自动选择`https://`url `http://`-scheme 是否为 simple `//`. 例如，`//ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js`如果包含页面是`https`它本身，则将通过 https 加载，但`http`如果不是，则通过。
> 
> `class.wp-scripts.php`并`class.wp-styles.php`进行正则表达式检查`^https?://`以确定它是否是外部资源，但应该真正使用`^(https?:)?//`- 甚至`^(\w+:)?//`（因为某些疯子*可以*使用 ftp 例如）。

该票已在八个月前关闭并设置为固定，但[仅](http://core.trac.wordpress.org/query?status=closed&milestone=3.5)在版本 3.5 中实施。

对于需要手动检查协议的情况，[**`is_ssl()`**](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/functions.php#L3063)使用该函数：

```
$protocol = is_ssl() ? 'https://' : 'http://'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T04:08:24.090

虽然我不知道哪些版本的 WordPress 支持与协议无关的 URL，但我可以回答您的第二个问题。与协议无关的 URL 的目的是在根据当前用于加载页面的内容加载资源时自动使用 SSL 连接或常规连接。无论您是否在您的网站上使用 SSL 连接，如果您想支持旧版本的 WordPress，那么我会尽可能使用`https://`而不是使用`//`。请注意，这仅适用于支持 SSL 连接的外部脚本，例如 Google 的托管脚本。如果您正在加载的资源不支持 SSL，那么选择很明确，只需使用`http://`而不是`//`

# sockets - Netcat：使用 nc -l port_number 代替 nc -l -p port_number

> ID：15318780
> 
> 赞同：5
> 
> 时间：2013-03-10T04:02:05.400
> 
> 标签：sockets, unix, debian, netcat

这个问题紧随其后：[在 openSUSE 中工作的套接字在 Debian 中不起作用？](https://stackoverflow.com/questions/15318164/sockets-working-in-opensuse-do-not-work-in-debian)

在我的 Debian 系统上使用套接字时，我必须使用 nc -l -p port_number 来模拟我想与之交谈的服务器。如果我使用 nc -l port_number，则在使用套接字连接功能时它会失败，并且 strerror(errno) 会说“连接被拒绝”。

没有 -p 选项的 Netcat 在其他 Linux 发行版上运行良好，我应该对我的配置进行哪些更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T04:10:55.997

不要调整你的设置。那里有多种 netcat 实现；并非所有人的行为都相同。

特别是，netcat 的“传统”版本，可能是您在 Debian 系统上安装的，如果您省略`-p`("port") 标志，最终会做一些完全出乎意料的事情：它最终会将最后一个参数视为一个*hostname*，将它传递给`inet_aton()`，它会将其转换为一个无意义的 IP 地址（例如，1234 将变为 0.0.4.210），然后将继续忽略该 IP 地址并在具有自动分配（可能是随机）端口的套接字上侦听数字。

这种行为显然很愚蠢，因此 netcat 的其他一些实现会假设您的意思是`-p`. 但是，您正在使用的那个没有，因此请通过该`-p`选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T05:44:53.467

我同意黄昏的说法，最好在`-p`任何地方都使用该选项，但要回答您的问题：

您必须做的一件事是安装一个支持您想要的语法的 netcat。我知道该`netcat-openbsd`软件包支持它。我知道`netcat-traditional`包裹没有。还有一个`netcat6`包，它也没有。然后，您可以像这样显式请求 OpenBSD 版本的 netcat：

```
nc.openbsd -l 4242 
```

或者，您可以使用替代系统来设置此版本的 netcat 在您发出`nc`命令时运行：

```
update-alternatives --set nc /bin/nc.openbsd 
```

如果这是您安装的唯一 netcat，这将自动为您完成。

最后，您可以再次选择删除您不喜欢的 netcat (`netcat-traditional`或`netcat6`)。

# javascript - 使用内联函数处理 javascript 范围

> ID：15318781
> 
> 赞同：1
> 
> 时间：2013-03-10T04:02:43.057
> 
> 标签：javascript, scoping

因为我习惯了 C 和 Java，所以我发现 Javascript 缺少块作用域有点令人讨厌。有时我发现自己想要声明然后立即执行一个内联函数来解决这个问题。例如：

```
... 

if (x == 0) { 
  (function () {
    var i;

    for (i = 0; i < 10; i++) {
      ...
    }
  })();
}

... 
```

否则，我觉得有必要在作用域的顶部声明一个函数的所有变量，以避免忘记缺少块作用域。但是在函数的开头有一个巨大的 var 语句对我来说看起来很笨拙。

我在上面展示的方式感觉很浪费，但我不知道首先声明内联函数的成本是多少。这样做是一个坏主意吗？有没有更好的方法来解决我对 Javascript 范围的疑虑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T14:17:29.717

如下写有什么问题：

```
if (x === 0) { // you should always use === over == in JavaScript
    for (var i = 0; i < 10; i++) {
        // body
    }
} 
```

仅仅因为 JavaScript 不支持块作用域并不意味着您不能在块作用域中声明变量。

**您可以在任何地方声明变量。**但是，它们在函数范围内随处可见。

JavaScript 中缺少块作用域导致的唯一问题是当您在访问自由变量的循环内定义一个函数时（臭名昭著的循环问题）。

阅读以下 StackOverflow 线程以了解它：[循环内的 JavaScript 闭包 - 简单实用的示例](https://stackoverflow.com/q/750486/783743)

JavaScript 很简单。**比 C 或 Java 更简单。**它也比 Java 更明智。Java 是一种可悲的语言。

如果您希望 JavaScript 社区成为对您不利的匕首，那么您做得很好。否则就[拥抱 JavaScript](http://www.embracejs.com/ "拥抱")。用道格拉斯·克罗克福德的话来说：

> 在我自己的实践中，我发现使用 JavaScript 使我成为了一个更好的 Java 程序员，因为它向我介绍了一组有用的动态技术。

资料来源：[JavaScript 编程语言调查](http://www.crockford.com/javascript/survey.html "JavaScript：语言概览")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T04:05:52.220

JavaScript 作用域，缺少 ES5 特性，是在函数级别。这就像 C 过去要求您先声明变量一样；你只需要忍受它。

您的代码在语法上不正确。你有一个以`function`关键字开头的语句，但没有函数名；紧随其后的是`()`. 我假设您在谈论函数声明语句。如果您只是将函数实例化为表达式的一部分，那么范围并没有真正考虑到这一点，至少在函数外部。

# android - 在Android中选择复选框之前的AlertDialog

> ID：15318784
> 
> 赞同：2
> 
> 时间：2013-03-10T04:03:02.060
> 
> 标签：android, checkbox, android-alertdialog, confirmation

我有与复选框的对话框。在选择这个复选框之前，我想问一下用户，他一定会选择这些复选框。（我的意思是，我尝试选择复选框并在此 AlertDialog 出现之前询问我是否确定）

在代码中它看起来像这样：

```
CheckBox cb = (CheckBox) v.findViewById(R.id.favouriteChkBox);

            if (cb.isChecked()) {
                AlertDialog.Builder builder = new AlertDialog.Builder(
                        context);
                builder.setTitle("Do you want to add this to favourite?");

                builder.setPositiveButton("yes",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                itemChecked.set(position, true);
                            }
                        });
                builder.setNegativeButton("no",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                dialog.cancel();
                            }
                        });
                builder.create().show();

            } 
```

但这不起作用。如果我单击“是”或“否”，则会显示 AlertDialog 并且没有仪表，复选框被选中。

你能告诉我为什么这不起作用吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:23:09.017

```
 final CheckBox cb = (CheckBox) findViewById(R.id.favouriteChkBox);

    cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (cb.isChecked()) {
                AlertDialog.Builder builder = new AlertDialog.Builder(
                        TestGitActivity.this);
                builder.setTitle("Do you want to add this to favourite?");

                builder.setPositiveButton("yes",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                cb.setChecked(true);
                            }
                        });
                builder.setNegativeButton("no",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                cb.setChecked(false);
                            }
                        });
                builder.create().show();

            }

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:20:22.247

我怀疑这与这样一个事实有关，即如果用户选择**NO** ，则for 的状态`CheckBox`不会改变。试试这个代码：`OnClickListener``NegativeButton`

```
CheckBox cb = (CheckBox) v.findViewById(R.id.favouriteChkBox);
if (cb.isChecked()) {
    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setTitle("Do you want to add this to favourite?");

    builder.setPositiveButton("yes", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            itemChecked.set(position, true);
            // ADD THIS TO YOUR CODE
            cb.setChecked(true);
        }
    });

    builder.setNegativeButton("no", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) {
            // ADD THIS TO YOUR CODE
            .setChecked(false);
            dialog.dismiss(); // CHANGE THE .cancel() TO dismiss()
        }
    });

    builder.create().show();
} 
```

# apache-pig - Pig - 计算字段的总数百分比

> ID：15318785
> 
> 赞同：1
> 
> 时间：2013-03-10T04:03:10.840
> 
> 标签：apache-pig

我正在尝试计算字段中某个值的总数百分比。

例如，对于数据 (name, ct)

(约翰, 1000) (丹, 2000) (利兹, 2000)

我希望输出为（名称，ct 占总数的百分比）

(约翰, .2) (丹, .4) (莉兹, .4)

```
data  = load 'fakedata.txt' as (name:chararray,sqr:chararray,ct:int);
A = foreach data generate name, ct;
A = FILTER A by ct is not null;
B = group A all;
C = foreach B generate SUM(A.ct) as tot;
D = foreach A generate name, ct/(double)C.tot;
dump D; 
```

错误 org.apache.pig.tools.grunt.Grunt - 错误 1000：解析期间出错。无效的别名：C in {name: bytearray,ct: int}

我完全按照[http://pig.apache.org/docs/r0.10.0/basic.html](http://pig.apache.org/docs/r0.10.0/basic.html) 部分中给出的示例代码 - “将关系转换为标量”

如果我说 Dump C，则输出正确生成为 5000。因此 D 中存在问题。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:10:27.390

以下对我有用，没有任何错误。这与您所拥有的基本相同。不确定您为什么会收到此错误。你用的是哪个版本的猪？

```
data = load 'StackData' as (name:chararray, marks:int);
grp = GROUP data all;
allcount = foreach grp generate SUM(data.marks) as total;
perc = foreach data generate name, marks/(double)allcount.total;
dump perc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T14:14:28.567

在 Relation`D`中，您`A`再次循环 Relation - 它知道知道`C`。

我建议计算 SUM，然后执行 JOIN，以便每个条目都包含总和。这样您就可以计算每个条目的总百分比。

# c - 采用 long int 时的可疑指针转换

> ID：15318787
> 
> 赞同：0
> 
> 时间：2013-03-10T04:03:19.363
> 
> 标签：c

```
int main()
{
    long int i,t,n,q[500],d[500],s[500],res[500]={0},j,h;
    scanf("%ld",&t);
    while(t--)
    {
        scanf("%ld %ld",&n,&h);
        for(i=0;i<n;i++)
            scanf("%ld %ld",&d[i],&s[i]);
        for(i=0;i<h;i++)
            scanf("%ld",&q[i]);
        for(i=0;i<h;i++)
        {
            for(j=0;j<n;j++)
            {
                res[j]=d[j]+q[i]*s[j];
            }
        j=cal(res,n,q[i],s);
        printf("%ld\n",j);
        }
    }
    return 0;
}

long int cal(int res[],int n,int q,int s[])
{
    long int i,max=0,p,pos=0;
    for(i=0;i<n;i++)
    {
        if (max==res[i])
        {
            pos=add(res,s,pos,i,q);
            max=res[pos];
        }
        if (res[i]>max)
        {
                max=res[i];
                pos=i;
        }
    }
    return pos;
} 
```

每当我使用变量 as 时`int`，它都可以正常工作，但是如果我将变量声明为 as `long int`，我会在函数调用中收到警告消息“可疑指针转换”——在以下行中：

```
(j=cal(res,n,q[i],s)); 
```

你能解释一下原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T04:34:02.510

鉴于：

1.  `long int i,t,n,q[500],d[500],s[500],res[500]={0},j,h;`
2.  `j=cal(res,n,q[i],s);`和
3.  `long int cal(int res[],int n,int q,int s[])`

您正在尝试将数组传递`long res[500]`给需要`int`. 即使`sizeof(int) == sizeof(long)`在你的机器上，类型是不同的——而且我的机器上的尺寸肯定是不同的。

如果您在 Windows（32 位或 64 位）或 32 位 Unix 上，您将侥幸逃脱，但如果您迁移到 LP64 64 位环境，一切都会崩溃。

这就是为什么它是一个“可疑的指针转换”。这不是犹太洁食；它不可靠；它恰好适用于您的环境（但出于可移植性原因，它非常可疑）。

* * *

> 但是为什么它会给出“可疑指针转换”的警告（而不是“需要 L 值”的预期消息）？

我不确定你为什么会期待一个`l-value required`错误。请记住，当您调用函数时，数组会衰减为指针，因此您的函数声明也可以编写`long cal(int *res, int n, int q, int *s)`，并且您传递`long res[500]`的内容会自动更改为`long *`（就像您编写的一样`&res[0]`），因此您传递的是 a `long *`where an `int *`is预期的，你可能会侥幸逃脱（因此是“可疑的”而不是更严重的）。

考虑代码：

```
long res[500];
long cal(int res[]);

int main(void)
{
    return cal(res);
} 
```

64 位机器（和 64 位编译）上的 GCC 4.7.1 说：

```
x.c: In function ‘main’:
x.c:6:5: warning: passing argument 1 of ‘cal’ from incompatible pointer type [enabled by default]
x.c:2:6: note: expected ‘int *’ but argument is of type ‘long int *’ 
```

*（我不经常看到人们写作`long int`而不仅仅是`long`，所以我采用了删除`int`from的惯常做法`long int`。你说得对，这`long int`是有效且合法的，并且与 的意思相同`long`；大多数人不写多余的话，仅此而已。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:48:23.690

ISO C 9899 在 6.3.1.1 中表示算术操作数

```
The rank of long long int shall be greater than the rank of long int, which
shall be greater than the rank of int, which shall be greater than the rank of short
int, which shall be greater than the rank of signed char 
```

KnR ANSI C 版本在 2.2 中表示数据类型和大小

```
short is often 16 bits long, and int either 16 or 32 bits. Each compiler is free to     choose appropriate sizes for its own
hardware, subject only to the the restriction that shorts and ints are at least 16     bits, longs are
at least 32 bits, and short is no longer than int, which is no longer than long. 
```

结论：不要将 long 转换为 int。您将丢失导致错误的数据。将您的参数转换为长类型。它可以采用 int 和 long int。

# bash - 运行 gist.github.com 中的期望脚本

> ID：15318789
> 
> 赞同：3
> 
> 时间：2013-03-10T04:04:44.700
> 
> 标签：bash, expect, gist

我知道我可以使用以下命令运行放置在 gist.github.com 中的 bash 脚本：

```
bash -c "$(curl -fsSL https://raw.github.com/gist/5126919)" <arg0> <arg1> 
```

我如何为期望脚本做同样的事情？

我这里有一个样本：

[https://gist.github.com/simkimsia/5126919](https://gist.github.com/simkimsia/5126919)

```
#!/usr/bin/expect -f

set CHANGESHELL_FOR_USER [lindex $argv 0];
set PASSWORD_OF_USER [lindex $argv 1];

########################################
## switch to another user
## read this http://stackoverflow.com/a/1988255/80353
########################################
sudo -u $CHANGESHELL_FOR_USER -H sh -c "chsh -s /bin/bash" 

expect "*?assword:*" {send -- "$PASSWORD_OF_USER\r";}
expect eof 
```

我的目的是为特定用户 chsh。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:11:38.723

Bash 和 ksh 支持进程替换，因此您可以这样尝试：

`expect <(curl ...) arg1 arg2 ...`

我能想到的唯一问题是 的值`$argv0`不是我们通常所期望的。您可以考虑在脚本中对其进行硬编码。

# django - django 视图不返回 httpresponse 对象虽然我返回一个

> ID：15318790
> 
> 赞同：2
> 
> 时间：2013-03-10T04:04:53.340
> 
> 标签：django

嘿伙计们，我正在使用 django 开发一个项目管理网站，`The view equipo.frontends.views.hoddashboard didn't return an HttpResponse object`当我验证用户登录到仪表板时出现此错误。

我的views.py如下：

```
 from django.http import HttpResponse
    from django.template import RequestContext
    from django.shortcuts import render_to_response
    from django.views.generic.simple import direct_to_template
    from django.template.loader import get_template
    from django.template import Context
    from django.forms import *
    from django.contrib.auth import authenticate
    from django.contrib import auth 
    from django.http import HttpResponseRedirect

    def hoddashboard(request):
         if request.method=='POST':
             username=request.POST.get('Username')
             password=request.POST.get('Password')
             user=authenticate(username=username,password=password)
             if user is not None:
                 auth.login(request, user)
                 team="team.png"
                 t={'team1':team}
                 return HttpResponseRedirect('/home/aditya/Desktop/equipo/equipo/frontend      /templates/hodnewdash.html') 
```

我的html页面如下：

```
 <html>
        <head>
            <title>hod-login</title>
            <style type="text/css">.hod2{position:absolute;left:160;top:150;}
                .hod1{position:absolute;left:870;top:180;}
                .hod2{position:absolute;left:160;top:150;}
            </style>
        </head>
        <body>
             <div style='position:absolute;z-index:0;left:0;top:0;width:100%;height:100%'>
      <img src='{{MEDIA_URL}}hod.png' style='width:100%;height:100%' alt='[]' />
    </div>
            <img height="300" width="450" class="hod2" src="{{MEDIA_URL}}hod1.jpeg" />
             {%block content %}
            <form action="hodnewdash.html" class="hod1" method="POST" name="hodlogin">{% csrf_token %}
                <label>Username:</label><input type="text" name="uname" size="20"> </input><br />
                <br />

                <label>Password:</label><input type="password" name="pwd" value="" size="20" />
                <br /><br />
                <input  type="submit" value="submit" name="submit" />
            <input type="hidden" name="next" value="hodnewdash.html" />
            </form>
        {% endblock %}
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:01:26.077

如果直接（使用`GET`）请求您的 URL，并且您还有其他一些未处理的条件，则您不会返回任何内容：

```
 def hoddashboard(request):
         if request.method=='POST':
            # do stuff
            if user is not None:
               # do stuff
               return redirect('/some/url')
            else:
               return redirect('/some/url2/')
         else:
            return redirect('/somewhere/else/') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:32:26.617

您应该查看 Burhan 的响应，方法 hoddashboard 的框架更好。

无论如何，您没有以正确的方式使用 HttpResponseRedirect，您应该将要重定向到用户的 URL 作为参数传递。例如，如果您希望用户访问[http://yoursite.com/dashboard/](http://yoursite.com/dashboard/)，您必须使用：

```
return HttpResponseRedirect('/dashboard/') 
```

该响应将在您的代码中运行仪表板方法并返回其响应。

您可以在此处查看文档：[https ://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseRedirect](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponseRedirect)

# php - 如何创建具有访问权限检查的列表

> ID：15318791
> 
> 赞同：1
> 
> 时间：2013-03-10T04:04:57.007
> 
> 标签：php, mongodb, database-design, database

作为标题，当我有一个内容列表，但不是每个人都能看到它们时。例如：我有组 1 和组 2 我创建了一个帖子，只有组 1 中的用户可以看到它。我创建了另一个帖子，只有组 2 中的用户可以看到它。

用户 1 在组 1 中，用户 2 在组 2。然后，当用户 1 看最新的内容列表时，他只能看到帖子 1。然后，用户用户 2 看最新的内容列表，他只能看到帖子2.

您可以看到，不同的帐户（用户）会在他/她的帖子列表中看到不同的帖子。因为我将所有帖子存储在一个表中，并且将 group_id 存储在其中，所以在为用户创建最新帖子列表时，我必须搜索所有最新帖子并一一检查用户是否可以看到它，如果有他没有权限的帖子太多了，表现会很糟糕。

另外，组在某些情况下不是静态的，例如：我的关注者，我的朋友，如果是这样，我仍然无法将用户ID存储在帖子表中，并且必须计算他们的关系以确定他/她可以阅读这个发布与否。同样，该帖子可以具有多个权限组（我的关注者和我的朋友可以看到它）。

我该如何改进它？

顺便说一句，为什么我不在帖子记录中插入 user_id 数组，因为可能组用户的数量很大，所以我只能将 group_id 保存在其中。

顺便说一句，我有一个 SNS 网站。我使用 mongodb 数据库。我使用 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:50:48.920

当用户授权时，将其存储`group_id`在会话数据中。然后，您可以`group_id`在生成菜单时使用它，在数据库查询中将其设置为一个额外条件，以仅获取允许查看该组的帖子。

如果用户没有授权，你可以使用一些默认`group_id`值只显示帖子，允许所有人查看。

对于复杂的条件，如果你有 mysql，我建议你使用`UNION`，但看起来你只需要执行多个查询。首先，将内容组应该对特定用户可用的所有可能的不同条件分开。

例如：如果用户只能看到他的群组、他的朋友和他关注的人的内容，你可以简单地做 3 个请求（获取他的群组的内容列表、他关注的人的帖子和他的朋友的帖子）然后合并这些数据用PHP并输出它。由于所有数据都是相同的（正如您所说 - 全部都在`posts`表格中），您在这里不需要任何花哨的东西。只需三个请求并在 php 端按照您想要的方式进行排序。

# android - Android共享库完整性保护

> ID：15318795
> 
> 赞同：6
> 
> 时间：2013-03-10T04:05:27.067
> 
> 标签：android, security, android-ndk, integrity

有没有办法以某种方式“保护”Android平台的本机共享库（.so）免受二进制更改？例如，有人可以在对应用程序进行逆向工程后用 NOP 覆盖 JMP 指令，并将该库分发到有根设备。

有*什么*人可以做的吗？

我在这里寻找的是关于实施一系列检查（例如加密、校验和等）的想法。当然，由于该平台看起来并不为此提供支持（如果我错了，请纠正我）它必须全部是“客户端”。因此整个事情有点徒劳，但至少会阻碍一些逆向工程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T21:33:46.017

是的，有些事情你可以做，它们会让逆向工程师变得非常具有挑战性，但我怀疑你能做任何能阻止[Chris Eagle](http://www.nostarch.com/idapro2.htm)的事情。

防止修改的最佳方法是在编译后获取 .so 的[SHA-2](https://en.wikipedia.org/wiki/SHA-2)，并在每次运行时重新散列，将其与已知值匹配。此检查将在客户端强制执行，因此熟练的 RE 可以只修改二进制文件以忽略检查。虽然它确实让它变得有点困难。如果您在整个代码中都放置检查并使用不同的检查技术，那么它会扩展 RE 必须做的工作量。但是要知道，微软已经在反 RE 技术上投入了数百万美元，而且*仍然有*那里有 Office 和 Windows 的盗版副本。你永远不会阻止他们。我的个人哲学（现在我自己研究过 RE）是，试图阻止它们最终太痛苦了。只要做一个好的应用程序，让它便宜，人们就会购买。无论如何，偷你东西的歹徒不会买它。

如果您的应用调用 home，您还可以将哈希提交到服务器进行验证。当然，RE 仍然可以绕过这一点，但这是另一回事。

# java - 接口内的枚举实现 - Java

> ID：15318796
> 
> 赞同：38
> 
> 时间：2013-03-10T04:05:33.970
> 
> 标签：java, interface, enums, enumeration

我有一个关于在界面中放置 Java 枚举的问题。为了更清楚，请看以下代码：

```
public interface Thing{
   public enum Number{
       one(1), two(2), three(3);
       private int value;
       private Number(int value) {
            this.value = value;
       }
       public int getValue(){
        return value;
       }
   }

   public Number getNumber();
   public void method2();
   ...
} 
```

我知道接口由具有**空主体**的方法组成。但是，我在这里使用的枚举需要一个构造函数和一个方法来获取关联的值。在此示例中，建议的接口将不仅仅包含具有空主体的方法。是否允许此实施？

我不确定是否应该将枚举类放在接口或实现此接口的类中。

如果我把enum放到实现这个接口的类中，那么public Number getNumber()方法需要返回enum的类型，这会迫使我在接口中导入enum。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-10T04:07:27.250

`enum`在`interface`. _ 在您的情况下，该接口仅用作枚举的命名空间，仅此而已。无论您在哪里使用，该接口都可以正常使用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-04T03:53:05.773

下面列出了上述内容的示例：

```
public interface Currency {

  enum CurrencyType {
    RUPEE,
    DOLLAR,
    POUND
  }

  public void setCurrencyType(Currency.CurrencyType currencyVal);

}

public class Test {

  Currency.CurrencyType currencyTypeVal = null;

  private void doStuff() {
    setCurrencyType(Currency.CurrencyType.RUPEE);
    System.out.println("displaying: " + getCurrencyType().toString());
  }

  public Currency.CurrencyType getCurrencyType() {
    return currencyTypeVal;
  }

  public void setCurrencyType(Currency.CurrencyType currencyTypeValue) {
    currencyTypeVal = currencyTypeValue;
  }

  public static void main(String[] args) {
    Test test = new Test();
    test.doStuff();
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T05:43:23.763

简而言之，是的，这没关系。

该接口不包含任何方法体；相反，它包含您所说的“空体”，通常称为*方法签名*。

不在`enum`接口内部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T06:10:45.050

是的，这是合法的。在“真实”情况下，Number 会实现 Thing，而 Thing 可能会有一个或多个空方法。

# sql - 预订检查的 SQL 查询

> ID：15318799
> 
> 赞同：0
> 
> 时间：2013-03-10T04:05:57.643
> 
> 标签：sql

我有 2 张桌子，Facility 和 Reservation 桌子。

设施表包含，

*   设施ID
*   类型
*   姓名
*   可用性

预订表，

*   ID
*   会员ID
*   设施ID
*   登记日期
*   登记时间

这是我的查询，它只返回保留的详细信息。如何进行查询以返回那些未保留的设施详细信息？

```
SELECT Facility.[Facility Name], Facility.[Facility Type] 
FROM Facility INNER JOIN Reservation on Facility.FacilityID = Reservation.FacilityID
WHERE Reservation.FacilityID = (
    SELECT FacilityID 
    FROM Reservation 
    WHERE MemberID = '" & txtMemberID.Text & "' 
    AND [Check-in date] ='" & lstDate.SelectedItem.ToString & "') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T04:10:31.183

您可以使用 LEFT OUTER JOIN 和 IS NULL 仅返回 Reservation 表中没有记录的行。

以下查询将返回在 FacilityID、MemberID 和入住日期的 Reservation 表中不匹配的所有设施。如果您想查看他们是否有任何会员的预订和任何入住日期，您可以删除 MemberID 和入住日期部分

```
SELECT Facility.[Facility Name], Facility.[Facility Type] 
FROM Facility 
    LEFT OUTER JOIN Reservation on Facility.FacilityID = Reservation.FacilityID
    AND MemberID = '" & txtMemberID.Text & "' // pull in based on certain member
    AND [Check-in date] ='" & lstDate.SelectedItem.ToString & "') // pull in based on certain date
WHERE Reservation.ID IS NULL 
```

# python - 确定字符串的类型

> ID：15318800
> 
> 赞同：1
> 
> 时间：2013-03-10T04:06:04.717
> 
> 标签：python, beautifulsoup, boilerpipe

我正在寻找某种方法来确定来自任何文章网站的字符串类型，例如[这个](http://goarticles.com/article/Finding-Out-What-Makes-a-UK-VPN-Tick/7454423/)。类型可以是标题、作者、日期、文章本身。我使用 BeautifulSoup 和 Boilerpipe 来抓取相关内容：

```
from boilerpipe.extract import Extractor
from bs4 import BeautifulSoup
import urllib

urlvar = 'http://goarticles.com/article/Finding-Out-What-Makes-a-UK-VPN-Tick/7454423/'

result = urllib.urlopen(urlvar)
soup = BeautifulSoup(result.read())

extractor = Extractor(extractor='ArticleExtractor', html=soup.prettify())

extracted_html = extractor.getHTML()
print(extracted_html.encode("utf-8")) 
```

现在我有一些看起来像这样的输出：

```
<HTML prefix="og: http://ogp.me/ns#">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY><DIV id="content"><DIV class="wrapper"><DIV id="article-content"><DIV id="main-col"><DIV align="left" class="article"><H1 class="art_head">
        Finding Out What Makes a UK VPN Tick
        <EM>
         by John H. Hickman
        </EM></H1><H2 class="art_cat"><B>
         in
         <A href="/category/technology/">
          Technology
         </A></B>
        (submitted 2013-03-09)
       </H2><P>
        How a UK VPN Works
       </P><P>
        A VPN creates a virtual tunnel through the Internet, through which encrypted data passes through. No matter how a user connects to the web, a VPN secures the connection with high grade encryption. This is important for public hotspots and other unsecure networks that put users at risk for digital eavesdropping. The benefits don't stop there; below is a description of the benefits of using a British VPN.
       </P><P>
        Can You Access UK Websites with a UK VPN?
       </P><P>
        Many websites are geo-restricted or blocked from users who don't have a UK IP address. A British VPN provider bypasses these restrictions so that users can visit any UK website.
       </P><P>
        Quality VPN providers will also offer other server connections that appear to be in several different countries, including the US, Europe and Asia. Each British VPN provider will offer a different number of servers in different locations. The more servers that the service provides, the more options users have.
       </P><P>
        Is Security That Important?
       </P><P>
        Many think that they have nothing to hide, but information of any kind is valuable to hackers and phishers on the Internet. Each time a person transfers data through the Internet, that information is open to interception. But a United Kingdom VPN provides an encrypted, secure connection so that data stays private. This is how a secure connection works:
       </P><P>
        ΓÇó The United Kingdom VPN provider provides an application that connects to the server. With a few clicks, the connection is configured and ready to go.

        ΓÇó The VPN replaces the actual IP address with one that isn't tied to a physical location.

        ΓÇó The United Kingdom VPN encrypts all information that the user sends and receives online.

        ΓÇó The VPN allows the user to bypass location based IP blocking.

        Many different British VPNs will feature 64bit, 128bit and 256bit encryption; the higher the bit, the better the encryption.

        Only the server and the client can decrypt the secure connection. If a person uses a Wi-Fi hotspot at work, school, the airport or in a restaurant, an unsecure connection can leave them vulnerable to phishing and packet sniffing. A UK VPN will keep this information safe and secure wherever a user accesses the Internet. It will keep passwords, the websites history and online activity secure. A good UK VPN provider will secure the user's Internet connection so that they can browse websites in the UK and other countries safe from hackers and enjoy the web without any worries.
       </P><H3 class="about_author">
        About the Author
       </H3><P>
        Thomas R. Hickman believes the internet should be free and open. The
        <A href="https://www.goldenfrog.com/vyprvpn/uk-vpn" target="_new">
         UK VPN Service
        </A>
        he mentions above is one tool you can use to increase your online freedom. Thomas strives to inform others about the tools available for avoiding restrictions on the web. The fastest UK VPN Provider can be found at
        <A href="https://www.goldenfrog.com/vyprvpn/uk-vpn" target="_new">
         https://www.goldenfrog.com/vyprvpn/uk-vpn
        </A></P><DIV id="a_disclaimer">
        Use and distribution of this article is subject to our
        <A href="/publisher.html" target="_blank">
         Publisher Guidelines
        </A>
        whereby the original author's information and copyright must be included.
       </DIV></DIV></DIV><DIV id="left-col"><P><B>
        John H. Hickman
       </B></P></DIV></DIV></DIV></DIV></BODY></HTML> 
```

或这个：

```
<HTML lang="en-US" xmlns:FB="http://www.facebook.com/2008/fbml" xmlns:OG="http://ogp.me/ns#">
<style type="text/css">
A:before { content:' '; } 
A:after { content:' '; } 
SPAN:before { content:' '; } 
SPAN:after { content:' '; } 
</style>
<BODY class="no-js yog-ltr yog-blog" dir="ltr"><DIV class="yog-bd" id="yog-bd" role="main"><DIV class="yog-wrap yog-grid yog-24u"><DIV class="yog-col yog-16u yom-primary"><DIV class="yog-wrap yom-art-bd"><DIV class="yog-col yog-11u"><DIV class="yom-mod yom-art-content "><DIV class="bd"><P class="first"><SPAN class="yom-figure yom-fig-right" style="width:630px;"><SPAN class="legend">
             A clock hangs in Plantation, Fla. (Joe Raedle/Getty Images)
            </SPAN></SPAN></P><P>
           Here's everything you wanted to know about the time change this weekend.
          </P><P><STRONG>
            When is it?
           </STRONG>
           The time change begins on Sunday, March 10, at 2 a.m., when clocks are moved forward by one hour.
          </P><P><STRONG>
            Why 2 a.m.?
           </STRONG>
           The time change is set for 2 a.m. because it was decided to be the
           <A href="http://www.lifeslittlemysteries.com/81-why-does-daylight-saving-time-begin-at-2-am.html">
            least disruptive
           </A>
           time of day. Moving time forward or back an hour at that time doesnΓÇÖt change the date, which avoids confusion, and most people are asleep, or if people do work on a Sunday, itΓÇÖs usually later than 2 a.m.
          </P><P><STRONG>
            Do all states observe daylight saving time?
           </STRONG>
           Hawaii and most of Arizona donΓÇÖt
           <A href="http://www.timeanddate.com/time/us/arizona-no-dst.html">
            observe the time change
           </A>
           . U.S. territories that donΓÇÖt go on daylight saving time include American Samoa, Guam, Puerto Rico and the Virgin Islands.
          </P><P><STRONG>
            Why do we have it?
           </STRONG>
           The idea is to save electricity because there are more hours of natural light.
           <A href="http://news.nationalgeographic.com/news/2008/03/080307-daylight-saving.html">
            Studies have shown
           </A>
           the savings to be fairly nominalΓÇöthe time change leading people to switch on the lights earlier in the morning instead or cranking up the air conditioning, for example.
          </P><P><STRONG>
            What is the history of daylight saving time?
           </STRONG>
           Fun fact: The idea was first floated in 1784 by one Benjamin Franklin. While minister of France, he
           <A href="http://www.livescience.com/11069-started-daylight-saving-time.html">
            wrote the essay
           </A>
           &quot;An Economical Project for Diminishing the Cost of Light.&quot;
          </P><P>
           The idea failed to see the light of day until 1883, when the U.S. railroads instituted a standardized time for their train schedules. That time change was imposed nationally during the First World War to conserve energy, but it was repealed after the war. It became the national time again during World War II.
          </P><P>
           After that, it was up to the states to decide if they wanted it, and when it would start and end. Congress finally enacted the Uniform Time Act in 1966, which standardized the beginning and end of daylight time for the states that observed it. In 1974 and 1975, the energy crisis moved Congress to enact earlier daylight start times, which were reversed when the crisis was over.
          </P><P><A href="http://aa.usno.navy.mil/faq/docs/daylight_time.php">
            Daylight saving time
           </A>
           since then had always been in AprilΓÇöuntil the Energy Policy Act of 2005 ordered the earlier start time to begin in March 2007.
          </P></DIV></DIV></DIV></DIV><DIV class="yom-mod yom-bcarousel ymg-carousel" id="MediaInfiniteBrowse"><DIV class="hd"><DIV class="yui-carousel-nav"><DIV class="heading"><H3>
           Explore Related Content
          </H3></DIV></DIV></DIV></DIV></DIV></DIV></DIV></BODY></HTML> 
```

我正在寻找任何方法来确定哪个标签包含标题字符串、作者字符串、发布日期和文章字符串（如果有）。
我在胡闹`scrapy`，但它不包含任何用于从不同站点获取此信息的通用算法。
我开始怀疑这样的事情是否可能，除了某种疯狂的评估字符串长度并希望标题标签总是比作者标签更多的字符，但少于文章标签。但这样想是非常幼稚的，输出可能非常不准确。
关于如何做的任何指示？

# json - Chrome 扩展清单中没有 www

> ID：15318808
> 
> 赞同：0
> 
> 时间：2013-03-10T04:08:03.760
> 
> 标签：json, google-chrome-extension, manifest, browser-extension

我正在尝试为将 www.site.com 重定向到 site.com 的网站获取 Chrome 扩展程序

此清单文件有效。

```
{
"name" : "MySite Redesign",
"version": "0.1",
"manifest_version": 2,
"description" : "Improves MySite visual design to make the interface cleaner.",
"content_scripts" : [{
    "matches" : ["*://www.mysite.com/*"],
    "css" : ["style.css"]
  }]
} 
```

这不

```
{
"name" : "MySite Redesign",
"version": "0.1",
"manifest_version": 2,
"description" : "Improves MySite visual design to make the interface cleaner.",
"content_scripts" : [{
    "matches" : ["mysite.com/*"],
    "css" : ["style.css"]
  }]
} 
```

错误内容如下：

“无法从 '/Users/colmtuite/dev/mysite-extension' 加载扩展。'content_scripts[0].matches[0]' 的值无效：缺少方案分隔符。”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T06:35:24.950

根据[“匹配模式”文档](http://developer.chrome.com/extensions/match_patterns.html)，必须指定方案。您可以`*`用来表示“任何方案”、“任何子域”和“任何路径”：

```
*://*.mysite.com/* 
```

# .net - 从 XSLT 输出根目录中删除 XML 命名空间声明？

> ID：15318812
> 
> 赞同：6
> 
> 时间：2013-03-10T04:09:12.003
> 
> 标签：.net, xml, xslt, xml-namespaces

具有以下输入 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
<customSettings xmlns:env="urn:schemas-test-env">
    <connectionStrings>
        <add name="Name" connectionString="None" providerName="" />
        <add name="Name" connectionString="Local"  providerName="" env:name="Local" />
        <add name="Name" connectionString="Dev"  providerName="" env:name="Dev"  />
    </connectionStrings>
    <appSettings>
        <add key="Name" value="Value" />
        <add key="Name" value="Local" env:name="Local" />
        <add key="Name" value="Dev" env:name="Dev" />
    </appSettings>
</customSettings> 
```

和 XSLT：

```
<?xml version="1.0" encoding="utf-8" ?>
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:msxsl="urn:schemas-microsoft-com:xslt"

                xmlns:code="urn:schemas-test-code"
                xmlns:env="urn:schemas-test-env"
>
    <xsl:output version="1.0" encoding="utf-8" omit-xml-declaration="yes" indent="yes" />
    <xsl:strip-space elements="*" />

    <!-- Populate param value -->
    <xsl:param name="env" select="code:GetEnvironment()" />

    <!-- Copy content as is -->
    <xsl:template match="node()|@*" name="identity">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*" />
        </xsl:copy>
    </xsl:template>

    <!-- Remove all add nodes with env:name not matching param -->
    <xsl:template match="add">
        <xsl:if test="not(@env:name != $env)">
            <xsl:call-template name="identity" />
        </xsl:if>
    </xsl:template>

    <!-- Remove all env:name attributes -->
    <xsl:template match="@env:name" />
</xsl:stylesheet> 
```

我得到以下输出 XML：

```
<customSettings xmlns:env="urn:schemas-test-env">
  <connectionStrings>
    <add name="Name" connectionString="None" providerName="" />
    <add name="Name" connectionString="Local" providerName="" />
  </connectionStrings>
  <appSettings>
    <add key="Name" value="Value" />
    <add key="Name" value="Local" />
  </appSettings>
</customSettings> 
```

如何从根元素中删除命名空间声明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T10:34:44.130

在 XSLT 2.0 中，您可以使用

```
<xsl:copy copy-namespaces="no"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T04:54:36.330

如果您替换此模板：

```
<!-- Copy content as is -->
<xsl:template match="node()|@*" name="identity">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*" />
    </xsl:copy>
</xsl:template> 
```

使用这两个模板：

```
<!-- Copy elements without copying their namespace declarations -->
<xsl:template match="*" name="identity">
  <xsl:element name="{name()}">
    <xsl:apply-templates select="node()|@*" />
  </xsl:element>
</xsl:template>

<!-- Copy content as is -->
<xsl:template match="node()|@*" priority="-2">
  <xsl:copy>
    <xsl:apply-templates select="node()|@*" />
  </xsl:copy>
</xsl:template> 
```

那么应该这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-21T12:51:25.773

您是否尝试将 exclude-result-prefixes="env" 添加到样式表声明中？应该工作，像这样：

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:msxsl="urn:schemas-microsoft-com:xslt"

                xmlns:code="urn:schemas-test-code"
                xmlns:env="urn:schemas-test-env"
                exclude-result-prefixes="env"
> 
```

# python - Redis 与 Twemproxy 对比 memcached

> ID：15318816
> 
> 赞同：2
> 
> 时间：2013-03-10T04:09:42.323
> 
> 标签：python, caching, twitter, redis

所以引用[这个](https://stackoverflow.com/questions/10558465/memcache-vs-redis)问题，顶帖指出，Redis 最大的担忧是它在健壮集群方面的可扩展性。我想知道是否将 Redis 与[`Twemproxy`](https://github.com/twitter/twemproxy)开源代理一起使用为 memcache 和 redis 开发了我的 Twitter，是否可以将这个问题缓解到我的主缓存可以只是 Redis 的程度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T12:58:51.703

这取决于您所说的稳健聚类的含义。

如果您需要一个足够强大的解决方案来支持存储（而不是缓存），或者如果您认为无法丢失缓存的数据，那么 twemproxy（或任何其他代理解决方案）是不够的。Memcached 或 Redis 都是如此。对于这种集群需求，Couchbase、Infinispan 甚至 Riak 和 Cassandra 会更好地为您服务。

现在，如果您需要一个具有自动分片、一致哈希和正确管理服务器驱逐（或黑名单）的缓存解决方案，那么 twemproxy 可以很好地与 Redis 和 Memcached 配合使用。twemproxy 的性能非常好。

# javascript - jQuery循环插件不起作用

> ID：15318817
> 
> 赞同：0
> 
> 时间：2013-03-10T04:10:02.393
> 
> 标签：javascript, jquery, jquery-cycle

我正在尝试使用“淡入淡出”过渡效果将 jquery Cycle 幻灯片插件添加到我的页面。但我仍然无法让它工作。

这是我的html：

```
<div class="container">
    <div class="slide1">
         <blockquote>
            <span class="leftquotes">&ldquo;</span> He promptly completed the task at hand and communicates really well till the project reaches the finishing line. I was pleased with his creative design and will definitely be hiring him again. <span class="rightquotes">&bdquo; </span>
         </blockquote>
         <img src="images/profile.jpg" width="120" height="100" />
         <h2>Steve Kruger</h2>
         <h6>UI/UX Designer at Woof Design Studio</h6>
         <div class="slide1bottom"></div>
    </div>

    <div class="slide2">
        <blockquote>
            <span class="leftquotes">&ldquo;</span> Till the project reaches the finishing line. I recommend him to anyone who wants their work done professionally. project reaches the finishing line. I recommend him to anyone who wants their work done professionally. The project ... <a href="#"> read more</a><span class="rightquotes">&bdquo; </span>
        </blockquote>
        <img src="images/images.jpg" width="120" height="100" />
        <h2>John Doe</h2>
        <h6>Developer Relations at Woof Studios</h6>
        <div class="slide2bottom"></div>
    </div>

    <div class="slide3">
        <blockquote>
            <span class="leftquotes "> &ldquo;</span> He promptly completed the task at hand and communicates really well till the project reaches the finishing line. I was pleased with his creative design and will definitely be hiring him again. <span class="rightquotes">&bdquo; </span>
        </blockquote>
        <img src="images/summer_school.png" width="120" height="100" />
        <h2>Steve Stevenson</h2>
        <h6>CEO Woof Web Design Studios</h6>
        <div class="slide3bottom"></div>
    </div>  
</div> 
```

这是我的 jQuery ：

```
$(function() {
    $('#container').cycle();
}); 
```

我已将 JQuery 插件、循环插件和缓动插件正确导入到我的页面。

```
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery.color.js"></script>
<script type="text/javascript" src="js/jquery.cycle.all.min.js"></script>
<script type="text/javascript" src="jscript/jquery.easing.1.3.js"></script> 
```

这是我的小提琴：http: [//jsfiddle.net/kRZ5r/](http://jsfiddle.net/kRZ5r/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:15:27.110

您为初始化指定的选择器`cycle`正在寻找 ，`id`它应该在何时寻找`class`。

```
$('.container').cycle({
   timeout: 10000
}); 
```

[在这里](http://jsfiddle.net/kRZ5r/2/)提琴

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T04:16:55.023

你有这个标记：

```
<div class="container"> 
```

然而你使用这个选择器：

```
$('#container').cycle(); 
```

`#`用于`id`选择器，您需要使用`.`，这是`class`选择器：

```
$('.container').cycle(); 
```

还值得注意的是，Alsup 先生发布了一个闪亮的新更新**Cycle2** ( [http://www.malsup.com/jquery/cycle2/](http://www.malsup.com/jquery/cycle2/) )，它与 ​​HTML5 兼容并且可以利用`data-`属性进行自动初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-08T17:31:21.693

在 html 代码中，您将容器称为类。但在 JQuery 中，您使用 # 将其定义为 id。

```
<div class="container">
</div>

$(function() {
    $('.container').cycle();
}); 
```

# java - 在 Java Play Framework Scala 模板中转义 HTML

> ID：15318819
> 
> 赞同：5
> 
> 时间：2013-03-10T04:10:11.963
> 
> 标签：java, scala, playframework-2.0

使用 Java Play 框架 2.0 中的 Scala 模板，我想将动态内容输出为 HTML 编码。

例如：

```
<script type="text/javascript">
    $("#@field.getId()").fieldList({
        data: "@myUnencodedData"
    })
</script> 
```

是否有内置的方法来实现这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-10T08:59:36.730

默认情况下，出于安全原因对 HTML 进行转义。要输出 HTML，请将其包装在 Html 帮助器中：`@Html(myUnencodedData)`.

# actionscript-3 - 如何制作使用通道的音量滑块

> ID：15318823
> 
> 赞同：0
> 
> 时间：2013-03-10T04:10:35.680
> 
> 标签：actionscript-3

我正在尝试制作一个使用频道的音量滑块。

我不知道该怎么做。

这是我的代码：

```
import flash.media.SoundChannel;
import flash.net.URLRequest;
import flash.media.Sound;

// Enter Frame Event
var sliderValue:uint = mySlider.sliderKnob.x;
addEventListener(Event.ENTER_FRAME, frame);
function frame(event):void {
    sliderValue = mySlider.sliderKnob.x ;
    status_txt.text = "Volume: "+sliderValue;
    var snd:Sound = new Sound();
    var channel:SoundChannel = new SoundChannel();
    var volumeLevel = channel.soundTransform;
    var req:URLRequest = new URLRequest("Background.mp3")
    snd.load(req);
    channel = snd.play();
    var newLevel:Number = mySlider.sliderKnob.x / 100;
    volumeLevel.volume = newLevel;
    channel.soundTransform = volumeLevel;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T12:09:21.547

您正在实例化并在每一帧上加载声音。你需要创建一个新的 SoundTransform 实例！
我认为滑块本身正在工作！

```
var snd:Sound = new Sound();
var channel:SoundChannel = new SoundChannel();
var volumeLevel:SoundTransform = new SoundTransform();

snd.load(new URLRequest("Background.mp3"));
channel = snd.play();

addEventListener(Event.ENTER_FRAME, frame);

function frame(event):void {
    sliderValue = mySlider.sliderKnob.x ;
    status_txt.text = "Volume: "+sliderValue;
    var newLevel:Number = sliderValue / 100;
    volumeLevel.volume = newLevel;
    channel.soundTransform = volumeLevel;
} 
```

# vb.net - 外观设计视图和应用程序启动之间的区别

> ID：15318824
> 
> 赞同：0
> 
> 时间：2013-03-10T04:10:49.993
> 
> 标签：vb.net, winforms, visual-studio-2010, button

我正在 Visual Studio 2010 中开发应用程序 - Windows 7 x64 中的 VB 速成版

我是 Visual Studio 和 VB 的新手。

我的问题是关于我的表格的视觉效果。

当我启动应用程序 - 运行按钮 - 和当我在设计视图选项卡上 - 在 Visual Studio 内时，我的应用程序的视觉效果是不同的。

在设计视图中：

[http://api.photoshop.com/v1.0/accounts/9b66012024ca4fbca3beddffc82e084b/assets/de1def7323514225bfe8c7bc6b9b9f47/renditions/1024.jpg?md=1362888303000](http://api.photoshop.com/v1.0/accounts/9b66012024ca4fbca3beddffc82e084b/assets/de1def7323514225bfe8c7bc6b9b9f47/renditions/1024.jpg?md=1362888303000)

运行： [http ://api.photoshop.com/v1.0/accounts/9b66012024ca4fbca3beddffc82e084b/assets/7c6d11926450453fad3cf44588f16ca3/renditions/1024.jpg?md=1362888304000](http://api.photoshop.com/v1.0/accounts/9b66012024ca4fbca3beddffc82e084b/assets/7c6d11926450453fad3cf44588f16ca3/renditions/1024.jpg?md=1362888304000)

在java中，你必须设置外观。在VB中是一样的吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:17:50.790

[`Application.EnableVisualStyles`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.enablevisualstyles.aspx)因此记录在案：

> 此方法为应用程序启用视觉样式。视觉风格是构成操作系统主题的颜色、字体和其他视觉元素。如果控件和操作系统支持，控件将使用视觉样式进行绘制。**要产生效果，必须在应用程序中创建任何控件之前调用 EnableVisualStyles()；通常，EnableVisualStyles() 是 Main 函数的第一行。**调用 EnableVisualStyles() 时不需要单独的清单来启用视觉样式。

强调我的。

# wordpress - 页面返回 403 禁止但仅来自 Google 搜索链接

> ID：15318825
> 
> 赞同：1
> 
> 时间：2013-03-10T04:10:50.507
> 
> 标签：wordpress, web, google-search

我经营一个网站[http://sciantechnologies.com/](http://sciantechnologies.com/)。

现在，如果你访问那个 URL，它会很好地加载，但是如果你用谷歌搜索“Scian Technologies”，它会返回一个如下所示的链接：

[http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDgQFjAA&url=http%3A%2F%2Fsciantechnologies.com%2F&ei=3AY8UdLvF8Gi2gXxXg&usg=AFQjCNGT916DDNRiBhq31Qu6fz0-_GDOFg&sig2=iHtZm7pPyQGdcyZczOUMRg&bvm= bv.43287494,d.b2I](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDgQFjAA&url=http%3A%2F%2Fsciantechnologies.com%2F&ei=3AY8UdLvF8Gi2gXxXg&usg=AFQjCNGT916DDNRiBhq31Qu6fz0-_GDOFg&sig2=iHtZm7pPyQGdcyZczOUMRg&bvm=bv.43287494,d.b2I)

如果您单击它，会将您重定向到正确的 URL，但由于某种原因，它似乎在此过程中收到了 403。有趣的是它在地址栏中留下了正确的 URL，如果你点击它并按下回车，它就可以正常工作。

我没有在这里设置任何特别的东西 - 它只是一个 wordpress 网站......其他人有这种行为或有任何想法吗？我真的在摸不着头脑——这似乎没有任何意义！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:16:49.347

对于那些使用网络提供商进行托管并遇到此问题的人，我已经设法解决了这个问题。支持团队完全没用。无论如何，我通过在 gui 面板中删除我的虚拟主机来解决这个问题（支持团队实际上建议我不要这样做）并重新创建它。我从未见过他们的虚拟主机配置（他们拒绝向我展示）但我猜当我使用他们神奇的安装程序脚本安装 wp 时，它改变了我没有的虚拟主机配置（很可能与 mod rewrite 相关）的能见度。删除虚拟域然后擦除它并再次干净地开始。请注意，如果您这样做：

1.  删除虚拟域并让它启动（即关闭您的网站），然后再重新创建它
2.  无法保证删除虚拟域会真正擦除此配置。它可能只是取消链接它的服务器端。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:33:26.983

Google 已将您的基本域（不包括 www）编入索引。

您需要将 301 重定向到您的 www 子域。

然后等待 Google 重新索引您的网站。

# ruby - 在 Ruby 中使用 return 不是惯用的吗？

> ID：15318828
> 
> 赞同：1
> 
> 时间：2013-03-10T04:11:38.463
> 
> 标签：ruby, idioms

我今天一直在重构一些代码，并且通过大量使用`return`. 我想到的一件事是，我很少看到在示例代码、博客文章等中使用 return，这让我认为我做错了什么。

在 Ruby 中使用 return 不是惯用的吗？我是否应该让我的方法只通过`if`/ `else`，`case`/`when`语句返回最终值，而不是提前中断它们`return`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T04:26:31.703

Ruby 的核心是只*在需要时*使用 return 。如果提前终止返回使您的方法更清晰，请执行此操作。换句话说：

**做：**

```
def method(arg)
  if(arg == 0) #Special case
    return 42
  end
  arg + 46
end 
```

**不：**

```
def method(arg)
  return arg + 46
end 
```

**最好的：**

```
def method(arg)
  if(arg == 0)
    42
  else
    arg + 46
  end
end 
```

*但是，仅在不必要*时才不鼓励 return 。

# c++ - 生成所有独特的书写方式 x = abc?

> ID：15318837
> 
> 赞同：-6
> 
> 时间：2013-03-10T04:14:23.650
> 
> 标签：c++, python, algorithm, numbers, primes

我有一个数字 x，我希望找到所有独特的方式来编写 a*b*c。唯一的意思是 2*3*5 与 3*2*5 或 5*3*2 相同。

我有一个可行的算法，它采用 x 的素数分解，然后将因子分成三个箱，但它非常缓慢和粗暴，我必须稍后删除重复项，所以我很好奇是否有更快的方法来生成独特的组合直接在这里。

考虑数字 720。

```
[3, 5, 48]
[5, 9, 16]
[3, 15, 16]
[3, 3, 80]
[2, 5, 72]
[5, 6, 24]
[5, 8, 18]
[2, 15, 24]
[2, 3, 120]
[3, 10, 24]
[6, 8, 15]
[3, 8, 30]
[3, 6, 40]
[2, 8, 45]
[2, 9, 40]
[8, 9, 10]
[4, 5, 36]
[5, 12, 12]
[4, 12, 15]
[3, 4, 60]
[3, 12, 20]
[4, 4, 45]
[4, 9, 20]
[2, 2, 180]
[2, 10, 36]
[2, 12, 30]
[2, 6, 60]
[6, 10, 12]
[2, 4, 90]
[2, 18, 20]
[4, 10, 18]
[4, 6, 30]
[6, 6, 20] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:33:39.280

在 Python 中：

```
def trifactorgenerator(n):
  return (((i,j,n/(i*j)) 
           for i in range(1, int(n**.5)+1) if n%i==0 
             for j in range(i, int( (n/i)**.5)+1) if n%(i*j) == 0)) 
```

这个函数有有趣的效果：

*   它是一个真正的生成器——除非调用者创建这样一个列表，否则整个列表永远不会在内存中
*   每个元组都被排序（例如，`(2,3,4)`从不`(2,4,3)`
*   它不返回重复项
*   元组按字典顺序返回。

参考：[https ://stackoverflow.com/a/6800214/8747](https://stackoverflow.com/a/6800214/8747)

# python - 无效语法：函数不返回值

> ID：15318840
> 
> 赞同：0
> 
> 时间：2013-03-10T04:14:37.110
> 
> 标签：python, list, function, return, syntax-error

我的代码出现 Invalid Syntax 错误，但我不知道为什么。我的代码应该创建一个二维零列表，然后将其中一个零更改为一，并检查某些列表值，看看它是否会返回 1 或仅返回零。我定义了一个应该返回相邻单元格值列表的函数，但由于某种原因出现了语法错误。这是我的代码：

```
def test(x,y):
    spotX = [(x-1)%height,0,(x+1)%height]
    spotY = [(y-1)%height,0,(y+1)%height]
    val = []
    for a in range(3):
        for b in range(3):
            if a and b != 2:
                val.append(newBoard[spotX[a]][spotY[b]]
    return val 
```

语法错误是“return val”行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:21:53.647

错误提到该`return val`行的原因是因为它认为它是附加功能的一部分，而实际上您只是忘记关闭括号。

```
val.append(newBoard[spotX[a]][spotY[b]]) 
```

# jenkins - 如何使用 Cloudbees Jenkins 构建完成一项繁重的任务

> ID：15318841
> 
> 赞同：5
> 
> 时间：2013-03-10T04:15:24.227
> 
> 标签：jenkins, cloudbees, gruntjs

我正在尝试在 Cloudbees 上构建和运行 Jenkins。我已经成功安装了 NodeJs，并且从我的 BitBucket 存储库中提取了我的源代码。我正在尝试运行我的 grunt 任务以在部署之前缩小和连接我的 JS 和 CSS 文件。但是，我无法运行 grunt 程序，即使它已成功安装。下面是我的构建脚本：

```
curl -s -o use-node https://repository-cloudbees.forge.cloudbees.com/distributions/ci-addons/node/use-node
NODE_VERSION=0.8.0 \
 source ./use-node
npm install
npm install grunt
grunt 
```

我尝试在有和没有 -g 选项的情况下安装 grunt 都没有成功。这是我构建的 grunt 部分的控制台输出：

```
+ npm install grunt
...
npm http GET https://registry.npmjs.org/grunt
npm http 200 https://registry.npmjs.org/grunt
...
grunt@0.4.0 node_modules/grunt
├── dateformat@1.0.2-1.2.3
├── colors@0.6.0-1
├── hooker@0.2.3
├── eventemitter2@0.4.11
├── which@1.0.5
├── iconv-lite@0.2.7
├── coffee-script@1.3.3
├── lodash@0.9.2
├── nopt@1.0.10 (abbrev@1.0.4)
├── rimraf@2.0.3 (graceful-fs@1.1.14)
├── minimatch@0.2.11 (sigmund@1.0.0, lru-cache@2.2.2)
├── glob@3.1.21 (graceful-fs@1.2.0, inherits@1.0.0)
├── findup-sync@0.1.2 (lodash@1.0.1)
└── js-yaml@1.0.3 (argparse@0.1.12)
+ grunt
/tmp/hudson3382014549646667419.sh: line 8: grunt: command not found
Build step 'Execute shell' marked build as failure
Finished: FAILURE 
```

关于如何使它工作的任何想法？这在 Cloudbees 中是否可行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T02:04:18.940

令人讨厌的是，Grunt 现在被分解成一个单独的 cli 模块。此外，令人讨厌的是，该 cli 模块不包括 grunt 本身。

为了使这项工作：

```
curl -s -o use-node https://repository-cloudbees.forge.cloudbees.com/distributions/ci-addons/node/use-node
NODE_VERSION=0.8.0 \
 source ./use-node
npm install
npm install grunt
npm install grunt-cli
export PATH=$PATH:node_modules/grunt-cli/bin/
grunt 
```

如果做这个的人改变它的工作方式是明智的，那么它将来可能会改变。

此处的文档：http: [//gruntjs.com/getting-started](http://gruntjs.com/getting-started)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T16:07:50.123

您可以从 jenkins 作业中设置所有内容，无需 ssh/命令行：

## 安装 Jenkins 插件

*   Git 插件 -*用于 git*
*   Git 客户端插件 -*用于 git*
*   Git 参数插件 -*用于 git 标签*
*   GitHub API 插件 -*用于 github*
*   NodeJS Plugin -*常用 JavaScript 工具 NodeJS 和 npm 的集成*

## Git / Ant / Maven / NodeJS 安装

*   转到服务器/詹金斯/配置

吉特

*   Git -> Git 安装 -> 添加 Git -> JGit
*   Git 插件 -> 全局配置 user.name 值 = “Anthony Mckale”，全局配置 user.email 值 = “anthony.mckale@bskyb.com”

节点JS

*   NodeJS-> NodeJS 安装 -> 添加 NodeJS -> Name = "NodeJS 0.11.10"，勾选“自动安装”，选择“从 nodejs.org 安装”，将“grunt-cli”添加到全局安装的包中

## 多田

希望你可以使用 git/nodejs 和 grunt

有关如何将 grunt/node 任务添加到 jenkins 作业的更多详细信息，请参阅插件 wiki -> [https://wiki.jenkins-ci.org/display/JENKINS/NodeJS+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/NodeJS+Plugin)

这真的很容易:)

不需要 ssh 登录只需要 jenkins 管理员权限

# c# - LocalDB：你如何删除它？

> ID：15318843
> 
> 赞同：59
> 
> 时间：2013-03-10T04:15:47.363
> 
> 标签：c#, visual-studio, sql-server-express

设置：实体框架代码首先到新数据库。

场景：我在玩 EF，我在我的数据库中添加了一堆元素。然后我更改实体模型，虽然我知道我可以进行迁移，但我只想从头开始，基本上从地球上清除数据库。

默认使用的数据库是 (localdb)\v11.0。

我的问题是：

我可以去某个地方只删除一个文件，或者启动某种管理器来删除该数据库并从头开始吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2014-01-12T10:45:50.793

只需使用管理员权限进入命令提示符并键入：

```
//list the instancies
sqllocaldb i

//stop selected instance
sqllocaldb p "selected instance"

//delete
sqllocaldb d "selected instance"

//recreate or create new one 
sqllocaldb c "new instance" 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-02-03T23:26:12.247

从 Visual Studio => 单击查看 => SQL Server 对象资源管理器 => 右键单击​​所需的数据库并选择删除，它将被删除或做任何你想做的事情

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-11-07T02:10:18.410

如果您使用的是 Entity Framework Core，则可以在包管理器控制台中输入：

```
PM> Drop-Database 
```

它将删除当前数据库。这个命令会告诉你是哪一个：

```
PM> Get-DbContext 
```

这也很方便：

```
PM> Get-Help about_EntityFrameworkCore 
```

除了包管理器控制台，您还可以通过 PowerShell 或命令提示符使用 dotnet CLI：

```
PS> dotnet ef database drop 
```

确保首先通过运行[以下命令](https://docs.microsoft.com/en-us/ef/core/cli/dotnet)安装 EF 扩展：

```
dotnet tool install --global dotnet-ef 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-10T04:18:37.440

我认为您想删除单个数据库，而不是 LocalDB 实例。如果是这样，只需发出 drop database 命令：

```
DROP DATABASE databasename; 
```

您可以从`sqlcmd`Management Studio、您的应用程序代码甚至 Visual Studio 中执行此操作...

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-04-18T07:57:55.230

是的你可以。在 VS 2015/2017 中按 Ctrl+Q，键入“对象资源管理器”。“SQL Server 对象资源管理器”应打开，您将在其中看到本地数据库实例。展开数据库实例，您将看到不同的数据库。选择一个数据库执行右键单击并选择“删除”。

有关更多信息，请查看此[链接](https://docs.microsoft.com/en-us/aspnet/core/tutorials/first-mvc-app/working-with-sql)。

希望有帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-21T11:17:23.020

使用 Entity Framework Core，这也可以通过命令行来完成：

```
dotnet ef database drop --project [path to project] 
```

或者，如果您有多个数据库上下文：

```
dotnet ef database drop --project [path to project] --context [ContextName] 
```

确保首先通过运行[以下命令](https://docs.microsoft.com/en-us/ef/core/cli/dotnet)安装 EF 扩展：

```
dotnet tool install --global dotnet-ef 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-07-22T06:04:52.387

有一个名为 SqlLocalDB.exe 的 exe，可以在 C:\Program Files\Microsoft SQL Server\{version}\Tools\Binn 中找到

对于完全删除：

```
>sqllocaldb stop InstanceName
>sqllocaldb delete InstanceName 
```

完成后，您还可以选择从磁盘中删除 .mdf 文件。我的在

`C:\Users\{username}`

您还可以重新创建一个新实例，甚至附加您之后仍需要的 .mdf 文件。

```
>sqllocaldb create InstanceName
>sqllocaldb start InstanceName
>sqllocaldb info InstanceName 
```

您可以在以下位置查看您的实例：

```
C:\Users\{username}\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-03-16T23:58:23.020

LocalDB 是它自己的独立服务器（它的名字暗示它只是其他服务器实例中的一个数据库，但事实并非如此）。在 SQL Server 2014 Express 中，您使用服务器名称“(localdb)\MSSQLLocalDB”连接到它，就像连接到任何普通数据库服务器一样。如果您使用 SQL Server Management Studio 进行连接，那么您可以使用 SSMS 的所有功能。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-26T13:57:12.663

我写了一个批处理文件来删除一个 SQL 本地数据库。它使用受信任的连接。如果需要，您可以添加带有`-U Username` `-P Password`参数的凭据。

查看[sqlcmd 文档](https://docs.microsoft.com/en-us/sql/ssms/scripting/sqlcmd-use-the-utility?view=sql-server-ver15)！

[![在此处输入图像描述](../Images/b2badbae12c3a681dea82d24dd52ff77.png)](https://i.stack.imgur.com/hqClR.png)

```
@echo off
set /p DbName=Enter local db name:
echo.
sqlcmd -e -S "(LocalDb)\MSSQLLocalDB" -d "master" -Q "EXEC msdb.dbo.sp_delete_database_backuphistory @database_name = N'%DbName%'; USE [master]; DROP DATABASE [%DbName%];"
echo Finished!
pause > nul 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-22T03:44:20.923

实体框架 3.1：

> 删除数据库

```
dotnet ef database drop 
```

> 不想删除数据库，愿意删除数据库中的表

```
dotnet ef database update 0 
```

# visual-studio-2012 - 任何人都知道 Visual Studio 是否存在 opencl intellisense / color 语法？

> ID：15318844
> 
> 赞同：2
> 
> 时间：2013-03-10T04:15:50.717
> 
> 标签：visual-studio-2012, opencl

搜索谷歌我可以找到很多关于 cuda 的信息，但还没有找到任何关于 VS2012 中的 OpenCL 支持的信息？

此外，将颜色语法添加到我的 .ocl 文件会很好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T04:19:09.810

在 Visual Studio 2008 中有一个解决方法，这是一个相当冗长的解释，所以我将在此处链接文章：

[http://opencl.codeplex.com/wikipage?title=OpenCL%20Tutorials%20-%200](http://opencl.codeplex.com/wikipage?title=OpenCL%20Tutorials%20-%200)

一些选项可能已经移动，但我怀疑您可能会从这些说明中获得 VS2012 解决方案。

祝你好运！

# google-maps-api-3 - 如何在一个页面中使用 Google Map API 的方向请求显示具有多条路线的完整行程并全部显示？

> ID：15318852
> 
> 赞同：2
> 
> 时间：2013-03-10T04:17:28.720
> 
> 标签：google-maps-api-3

好的，事情就是这样。我试图通过显示其中的每条路线来显示包含访问多个位置的整个行程。例如：我可能从纽约出发，然后去波士顿，然后是洛杉矶，然后是旧金山，最后回到纽约。

这是包含多个请求的循环并按顺序显示路由的代码的一部分。

```
 for (int i=0; i<all; ++i) {
        System.out.println(places.get(pass.charAt(i)-48)+"to"+places.get(pass.charAt(i+1)-48));
    %>
        var start = "<%=places.get(pass.charAt(i)-48) %>";
        var end = "<%=places.get(pass.charAt(i+1)-48) %>";
        var request = {
          origin: start,
          destination: end,
          provideRouteAlternatives: false,
          travelMode: google.maps.DirectionsTravelMode.TRANSIT
        };
        directionsService.route(request, function(response, status) {
          if (status == google.maps.DirectionsStatus.OK) {
            if (first == 1) {
                first = 0;
                responseAll = response;
                responseAll.routes[<%=i%>] = response.routes[0];
            }else {
                responseAll.routes[<%=i%>] = response.routes[0];
                directionsDisplay.setDirections(responseAll);
            }           
          }
        });
    <%}%> 
```

问题是它只是显示了我请求的前三个路由。在这种情况下，纽约到波士顿、波士顿到洛杉矶、洛杉矶到旧金山的路线。我想可能是页面最多可以显示三个路由。所以我通过将代码更改为这个来测试这个想法（它用 5 个路由初始化 DirectionResponse）

```
 if (first == 1) {
                first = 0;
                responseAll = response;
                for (var a = 0; a!=5;++a) {
                    responseAll.routes[a] = response.routes[0];
                } 
```

然后我发现它可以同时显示超过 5 条路线（尽管在这个测试用例中它们都是相同的路线）。所以事实证明它忽略了第三个请求之后的其他请求。

所以这是我的问题：无论如何要修复它以让它回答所有请求，或者说三个以上的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:45:05.387

*   您可以使用多个“中途停留”航点（最多 8 个，加上起点和目的地）发出单个请求。

[组合多条路线的示例](http://www.geocodezip.com/v3_directions_multipleWayPts_CustomMrkrsB.html)

*   您没有检查返回状态的值，您的代码当前的编写方式，如果方向请求失败（状态！= OK），您不会得到通知。要么检查调试器中的状态值，要么尝试添加一个检查，让您知道它失败的原因。这样的事情可能会有所帮助（未经测试）：

    ```
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        if (first == 1) {
            first = 0;
            responseAll = response;
            responseAll.routes[<%=i%>] = response.routes[0];
        }else {
            responseAll.routes[<%=i%>] = response.routes[0];
            directionsDisplay.setDirections(responseAll);
        }           
      } else { 
        alert("Directions request failed, status = "+status);
      }
    }); 
    ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-10T06:41:01.140

我认为 KML 在与 API 混合时可能对您有所帮助。

# javascript - 如何使用 on() 切换元素？

> ID：15318853
> 
> 赞同：0
> 
> 时间：2013-03-10T04:17:30.063
> 
> 标签：javascript, jquery

我正在将[Hammer.js](https://github.com/EightMedia/hammer.js/wiki/Getting-Started)库用于移动触摸事件，在他们与 jQuery 一起使用的示例中，它们具有以下内容：

```
$('#test_el').hammer().on("tap", ".nested_el", function(event) {
    console.log(this, event);
}); 
```

这很简单；但是，我想将切换行为合并到#test_el。换句话说，如果上面的例子被替换为这样的：

```
$('button').hammer().on("tap", function() {
    $('div').addClass('open');
}, function {
   $('div').addClass('close');
}); 
```

我将如何让这种“切换”行为起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:23:08.980

最初，您可以为所有按钮添加一个起始类。然后在事件中，您可以检查该类是否存在。这让你知道当你点击它时元素处于什么状态。

```
$('button').addClass('close');

$('button').hammer().on('tap', function() {
  if ($(this).hasClass('close')) {
    $(this).removeClass('close').addClass('open');
    // Event code
  }
  else {
    $(this).removeClass('open').addClass('close');
    // Event code
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:21:58.103

jQuery 也提供了一个[`toggleClass`](http://api.jquery.com/toggleClass/)方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T04:22:37.183

JQuery中已经有一个`toggleClass`可用的功能，它似乎可以满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T04:25:16.090

尝试：

```
$('#test_el').hammer().on("tap", ".nested_el", function(event) {
    $(this).toggleClass("classnamehere");
}); 
```

`classnamehere`你的班级名称在哪里。

# objective-c - 如何检查 UIView 是否在坐标处

> ID：15318859
> 
> 赞同：0
> 
> 时间：2013-03-10T04:18:37.777
> 
> 标签：objective-c, uitextfield, uikeyboard

我有一个里面有 textFields 的 tableView，当调用 textFieldDidBeginEditing 方法时，我有一个动画可以向上滑动 tableView。这是我的代码：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
    self.headerView.alpha = 0.2;
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.18];
    [UIView setAnimationDelegate:self];
    self.theTableView.frame = CGRectMake(0, 130, 320, 209);
    [UIView commitAnimations];
} 
```

问题是每当点击一个单元格时动画就会发生，但我只希望它在第一次点击单元格时发生。所以我在想我应该做一个 if 语句来检查 tableView 是否在 (0, 130) 坐标处。有谁知道我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:30:27.860

对于精确的比较，`CGPointEqualToPoint()`就足够了。对于更广泛的比较（检查视图的矩形是否包含给定点），`CGRectContainsPoint()`是完美的。

当然，这一切都有些过头了。子类化您的视图并在其上保留一个标志以跟踪它们是否被向上滑动。它不仅使您的代码更加独立，而且使视图的逻辑远离您的控制器。

# oop - 有没有办法轻松记住类的实例化、类、对象

> ID：15318861
> 
> 赞同：-2
> 
> 时间：2013-03-10T04:18:58.107
> 
> 标签：oop, class, object, instantiation

许多书籍在定义该词的含义时使用了该词（例如，a 是 b 的一个实例）。

也许只有我一个人，但是当我阅读一个定义并且该定义在其定义中使用了不同形式的单词时，它并没有太大帮助。

什么是班级？有人对实例化有明确的定义/解释吗？

我想我知道对象是什么：它是当一个类被处理到计算机内存中时（这是它成为一个“对象”的时候，对吧？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:09:04.027

类只是对如何构造对象/实例的定义。这是一个蓝图。例如，这是一个`Person`类：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

现在，如果我们想使用 的对象/实例`Person`，我们通过实例化它们来创建它们：

```
Person geddy = new Person();
Person alex = new Person(); 
```

现在我们有两个(geddy, alex)的*实例。*`Person`我们可以对它们做一些事情，比如设置它们的属性：

```
geddy.FirstName = "Geddy";
geddy.LastName = "Lee";

alex.FirstName = "Alex";
alex.LastName = "Lifeson"; 
```

`Person`是并且将永远是定义实际实例（geddy、alex）的类或蓝图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:11:21.453

维基百科引用了一个很好的定义`object`：

“**对象是名词（如数据，如数字、字符串或变量）和动词（如动作，如函数）的组合**”

对象是类的具体实现，它定义了用于创建对象的模板。

一堂课就像一个食谱。你不能吃食谱可以吗？但是你可以吃一个食谱的实例，它是按照制作该食谱的说明（比如巧克力蛋糕）的结果。

# wpf - 在多个应用程序中使用资源字典

> ID：15318862
> 
> 赞同：1
> 
> 时间：2013-03-10T04:19:04.973
> 
> 标签：wpf, dll, resourcedictionary

有没有办法在多个应用程序中使用资源字典？我所拥有的是一个使用合并字典等的主题生成器......效果很好！我正在寻找一种方法来将此项目的资源字典引用到我的所有应用程序中。（因此，在我决定创建的每个 File>New 中都有我的主题引擎）到目前为止，我的研究让我一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:05:41.490

好的，所以我发现我可以使用 pack URI 语法从应用程序 A 中获取资源字典并在应用程序 B 中使用它们

首先我创建了一个类库并删除了默认的 class1.cs 然后我添加了一个新项目（没有 .xaml 文件的选项，所以我添加了一个 .xml 文件并更改了扩展名）然后将资源字典代码移动到该文件中。像引用其他任何 .dll 一样引用新的 .dll，现在我可以使用以下语法访问资源字典文件。

```
<ResourceDictionary Source = "pack://application:,,,/App_A;Component/App_A_ResourceDictionary.xaml"/> 
```

交换文件时，其语法相同，只是省略了“pack://application,,”部分。虽然这不是我想要的一切（到目前为止），但它是我找到的最佳解决方案。

现在我想要的部分是能够在 .dll 中容纳交换逻辑。如果我能做到这一点……那么我的主题库可以对任何应用程序进行 PnP 操作，而无需大惊小怪。

# django - Django NoReverseMatch 在 /display/

> ID：15318865
> 
> 赞同：2
> 
> 时间：2013-03-10T04:19:16.110
> 
> 标签：django

我正在开发一个简单的应用程序，宠物用户可以在其中创建关于他们的宠物的板并在板上显示图片。

我正在尝试创建一个功能，用户可以在其中单击他们的看板，这会将他们重定向到他们的看板，这将显示他们所有的宠物图片。

![在此处输入图像描述](../Images/eb5fc740e97f18d79a162ae61dea4e23.png)

*当我尝试配置模板以将用户重定向到他们的看板时出现错误。*

```
Reverse for 'Boat' with arguments '('',)' and keyword arguments '{}' not found.
Django Version: 1.4.3 
Exception Type: NoReverseMatch 
Exception Value: Reverse for 'Boat' with arguments '('',)' and keyword arguments '{}' not found. 

Error during template rendering
In template C:\o\mysite\pet\templates\edit.html, error at line 14
13     {% for b in board %}         

14     <li><a href ="{% url world:Boat animal.id %}">{{ b.name }}</li> 
```

![在此处输入图像描述](../Images/88dcad1bc431efeabaad956632a2f6d0.png)

*我认为问题就在这里当用户点击一个板时。我的 URLconf 将捕获 animal.id 并将其传递给我的 Boat 函数，但我不确定出了什么问题*

```
<li><a href ="{% url world:Boat animal.id %}">{{ b.name }}</li> 
```

**我的edit.html**

```
<h4>My Boards</h4>
{% if board %} 
<ul>  
    {% for b in board %}         
    <li><a href ="{% url world:Boat animal.id %}">{{ b.name }}</li>
    {% endfor %}
</ul>
{% endif %} 
```

**我的主要 URLconf**

```
urlpatterns = patterns('',
    url(
        r'^admin/', 
        include(admin.site.urls)
    ),
    url(
        r'^',
        include('pet.urls',
            namespace = 'world')
    ), 
```

**我的宠物应用程序 URLconf 的一部分**

```
url(
    r'^(?P<animal_id>\d+)/$',
    'pet.views.Boat',
    name = 'Boat',
), 
```

**我的观点.py**

```
def Profile(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:LoginRequest'))

    if request.method == 'POST':
        form = PersonForm(request.POST, request.FILES)
        if form.is_valid():
            person = Person.objects.get(user=request.user)
            person.image = form.cleaned_data['image']
            person.name = form.cleaned_data['name']
            person.save() 
    return render(request,'profile.html',{'form': PersonForm()})

def Boat(request ,animal_id):
    if not request.user.is_authenticated():
            return HttpResponseRedirect(reverse('world:LoginRequest'))

    picture = Picture.objects.filter(board=animal_id)
    return render(request,'boat.html',{'picture':picture}) 
```

感谢你们对我的帮助 ：]

我的更多观点.py

```
def Display(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('world:LoginRequest'))
    board = Board.objects.filter(user=request.user)
    person = Person.objects.get(user=request.user)
    return render(request,'edit.html',{'board':board ,'person':person}) 
```

我的模型.py

```
class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True)
    following = models.ManyToManyField('self', related_name='followers', symmetrical=False, blank=True, null=True)

    def __unicode__(self):
        return self.name

class Board(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:59:19.340

你对 animal.id 没有价值

```
{% if board %} 
<ul>  
    {% for b in board %}         
    <li><a href ="{% url world:Boat b.id %}">{{ b.name }}</li>
    {% endfor %}
</ul>
{% endif %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T05:44:30.343

看来，在您的模板中，该值`animal.id`没有解析。

由于该变量为空，因此您的 URL 正则表达式`^(?P<animal_id>\d+)/$`将不匹配。正则表达式指定一个数字，并且您传入一个空字符串。

至于为什么它没有解决，我们需要查看呈现“edit.html”的视图。

# vb.net - 从列表框 vb 中读取单个单词

> ID：15318867
> 
> 赞同：0
> 
> 时间：2013-03-10T04:19:45.840
> 
> 标签：vb.net

我有一个在 VB.NET 中创建的订单表格，我有一个按订单填充的 ListBox。您可以双击订单，它会在订单表格中填充订单号。我遇到的问题是它用订单号和人名填充文本框。如何使用分隔符仅提取订单号而不提取名称。

```
Imports Business_Objects

Public Class frmSummary
  Private ctrl As Controller
  Dim listID As ArrayList

  Private Sub frmSummary_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    ctrl = CType(MdiParent, frmMain).ctrl
    Dim list As ArrayList
    list = ctrl.GetOrders
    Dim order As Business_Objects.Order
    For Each order In list
      lstOrders.Items.Add(order.ID & "," & " " & order.Server)
    Next
  End Sub

  Private Sub lstOrders_DoubleClick(ByVal sender As Object, ByVal e As System.EventArgs) Handles lstOrders.DoubleClick
    Dim result As Boolean = False
    If lstOrders.Text <> "" Then
      result = True
      Dim frm As New OrderForm
      frm.MdiParent = Me.MdiParent
      frm.Show()
      frm.txtOrderNo.Text = lstOrders.Text
      frm.btnFetch.PerformClick()
    Else
      MessageBox.Show("there are no orders here to click")
    End If
  End Sub

  Private Sub btnRefresh_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnRefresh.Click
    lstOrders.Items.Clear()
    ctrl = CType(MdiParent, frmMain).ctrl
    Dim list As ArrayList
    list = ctrl.GetOrders
    Dim order As Business_Objects.Order
    For Each order In list
      lstOrders.Items.Add(order.ID & " " & order.Server)
    Next
  End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T04:50:01.877

如果您的所有数据都存储为单个字段，或者类似：

```
4322305 John Smith Carrots $3.00
845825 Sam White Oranges $1.25 
```

然后您可以将每条记录读取为字符串，然后将其拆分为基于“”作为分隔符的数组。

代码看起来像：

```
dim myArray as string() = myLongTextRecord.Split(" ") 
```

以这种格式，

```
textBoxName.Text = myArray[1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T13:29:11.747

您快到了。您可以使用 split 函数，但另一种方法是将 Order 对象直接添加到列表框而不是文本。

```
Private Sub frmSummary_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    ctrl = CType(MdiParent, frmMain).ctrl
    Dim list As ArrayList
    list = ctrl.GetOrders
    Dim order As Business_Objects.Order
    For Each order In list
      lstOrders.Items.Add(order)
    Next
  End Sub

  Private Sub lstOrders_DoubleClick(ByVal sender As Object, ByVal e As System.EventArgs) Handles lstOrders.DoubleClick
    Dim result As Boolean = False
    If lstOrders.Text <> "" Then
      result = True
      Dim frm As New OrderForm
      frm.MdiParent = Me.MdiParent
      frm.Show()
      frm.txtOrderNo.Text = DirectCast(lstOrders.SelectedItem, Order).ID.ToString
      frm.btnFetch.PerformClick()
    Else
      MessageBox.Show("there are no orders here to click")
    End If
  End Sub 
```

您需要进入 Order 对象并覆盖 .ToString 函数，以便列表框中的文本显示您想要的任何值（即。`Return ID & "," & " " & Server`）

# c - c 将数组传递给 nasm 函数

> ID：15318873
> 
> 赞同：0
> 
> 时间：2013-03-10T04:21:10.997
> 
> 标签：c, arrays, assembly, nasm

我正在尝试将一个数组传递给我用汇编编写的排序程序。我到目前为止的代码是：

主.c：

```
#include <stdio.h>

extern void myFunc(int * somedata);

int arr[5] = { 3, 2, 33, 11, 1};

void main(){
    int i;
    myFunc(arr);
    for(i = 0; i < 5; i++)
    {
    //      printf( "%d\n", arr[i] );
    }
} 
```

myFunc.asm：

section .text 全局 myFunc extern printf

```
 myFunc:
            enter   4,0
            push    ebx

            push    dword [ebp + 8]
            call    printf

            pop     ebx
            leave
            ret 
```

这只是一些测试代码来学习如何做到这一点。

我的理解是这应该打印指向数组的指针，但我可能错了。

谁能给我一个将数组传递给程序集文件（NASM）的简单示例。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:24:59.537

您调用`printf`的第一个参数是传递给`myFunc`. 那是行不通的——第一个参数必须是格式字符串。

不过，您的其余代码看起来还不错。请注意，您还必须将数组的长度传递给您的 asm 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T15:26:04.317

回答此类问题的最佳方法是编写一个简短的函数来执行您在 C 中感兴趣的操作类型，然后将其编译为汇编以进行逆向工程。

# mysql - mysqldump 无法使用套接字连接

> ID：15318875
> 
> 赞同：7
> 
> 时间：2013-03-10T04:21:18.107
> 
> 标签：mysql, bash, ubuntu, mysqldump

这个问题已经折磨了我几个小时。我一直在尝试使用 mysqldump 转储数据库，使用：

```
mysqldump --protocol=socket -S /var/run/mysqld/mysqld.sock database` 
```

但是，我不断得到：

`1045: Access denied for user 'root'@'localhost' (using password: NO) when trying to connect`

我在本地主机上并在根目录下运行（*sudo su*）。mysql 用户表中允许使用
*Root@localhost 。*
我可以`> mysql`用来查看所有的数据库，但是mysqldump 不行。
我不知道root密码（系统生成）。
我已经尝试像这样将套接字添加到*my.conf*并重新启动 mysql 服务器：

> `[mysqldump]`
> `socket = /var/run/mysqld/mysqld.sock`

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-10T04:25:59.727

即使您通过套接字连接，您仍然必须给用户`root`

如果`root@localhost`没有密码，请执行以下操作：

```
mysqldump -uroot --protocol=socket -S /var/run/mysqld/mysqld.sock database 
```

如果`root@localhost`有密码，请执行以下操作：

```
mysqldump -uroot -p --protocol=socket -S /var/run/mysqld/mysqld.sock database 
```

如果运行

```
mysql 
```

让您通过指定登录`-uroot`，尝试不指定套接字

```
mysqldump database 
```

我刚刚注意到您为 mysqldump 指定的套接字是

```
[mysqldump]
socket = /var/run/mysqld/mysqld.sock 
```

您需要确保套接字也在`[mysqld]`部分下定义`my.cnf`

如果这不存在

```
[mysqld]
socket = /var/run/mysqld/mysqld.sock 
```

然后运行此查询

```
SHOW VARIABLES LIKE 'socket'; 
```

并确保套接字文件的名称和路径。

您可以让系统 DBA 为您添加自定义用户

```
GRANT ALL PRIVILEGES ON *.* TO tyler@localhost; 
```

然后，您可以运行

```
mysqldump -utyler --protocol=socket -S /var/run/mysqld/mysqld.sock database 
```

这是不安全的。泰勒应该有密码。所以，运行这个：

```
SET SQL_LOG_BIN=0;
GRANT ALL PRIVILEGES ON *.* TO tyler@localhost IDENTIFIED BY 'tylerspasssword'; 
```

那么你可以做

```
mysqldump -utyler -p --protocol=socket -S /var/run/mysqld/mysqld.sock database 
```

试试看 ！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T06:05:25.243

我找到了解决方案！套接字本身不保存凭据。它们存储在`/root/.my.cnf`配置文件中。我的只有该`mysql`命令的用户名和密码。我也需要添加`[mysqldump]`它。这是我的`/root/.my.cnf`文件现在的样子：

> `[mysql]`
> `user=root`
> `pass=myawesomepass`
> 
> `[mysqldump]`
> `user=root`
> `pass=myawesomepass`

# php - 显示 sql 所有表并使用类似导航显示列

> ID：15318884
> 
> 赞同：-4
> 
> 时间：2013-03-10T04:22:44.813
> 
> 标签：php, mysql

我正在尝试显示正确数据库中的所有表格列表，并希望在单击正确的表格名称时以链接或导航格式显示表格列表，然后我可以看到该表格的所有列。

我可以通过此代码显示所有表格列表：

```
mysql_select_db("dj", $con);

$result = mysql_query("show tables"); t
while($table = mysql_fetch_array($result)) 

    echo($table[0] . "<BR>");
} 
```

通过这段代码，我成功地显示了数据库中的所有表，但我想要显示正确表的所有行的代码，其中表名将显示为链接或导航。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:28:03.830

1.  [`SHOW COLUMNS FROM tablename`](http://dev.mysql.com/doc/refman/5.6/en/show-columns.html)将为您提供特定表格的列列表
2.  可能看起来像这样的[锚标签](http://www.w3.org/TR/2011/WD-html5-author-20110705/the-a-element.html#the-a-element)`<a href="columns.php?table=tablename">tablename</a>`将帮助您创建链接
3.  [`$_GET['table']`](http://php.net/manual/en/reserved.variables.get.php)将允许您获取使用 url 传递的参数

现在，如何查询数据库并遍历您已经知道的结果集，因此您只需要**付出一些努力**并将它们粘合在一起。

> 请不要将 mysql_* 函数用于新代码。它们已被 [弃用](http://php.net/manual/en/intro.mysql.php)。对[PDO](http://php.net/pdo) 或[MySQLi](http://php.net/mysqli)使用 [准备好的语句](http://goo.gl/vn8zQ)。

# java - 带有交互式回复的 Twilio 短信（我们正在做 Startup Weekend，请帮忙！）

> ID：15318885
> 
> 赞同：0
> 
> 时间：2013-03-10T04:22:54.937
> 
> 标签：java, sms, twilio

是否可以将 Twilio API 与 Java SDK 一起使用来接受/解析对 SMS 消息的回复。

任何人都可以指出任何可能解释这一点的文件。到目前为止，我还没有看到任何迹象表明这是可能的，但 Tropo 是可能的——尽管它并不总是“有趣”的。

我通常会花时间自己做这项研究，但我正处于创业周末的中间，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:47:35.620

当 Twilio 收到 SMS 时，它将通过 GET 或 POST 请求您针对刚刚收到 SMS 的号码配置的 URL。

你可以在这里看到这个过程：http: [//www.twilio.com/sms/api](http://www.twilio.com/sms/api)

1.  用户发短信给你的号码
2.  Twilio 接收文本
3.  Twilio 向您的应用程序发出请求，您的应用程序会做出响应。

在 Twilio 向您的应用程序发出的请求`body`中，GET 或 POST 请求中将包含一个参数。您还可以发送一些其他数据 - 可以在此处的 Twilio 文档中找到更多信息：http: [//www.twilio.com/docs/api/rest/sms](http://www.twilio.com/docs/api/rest/sms)

一旦您的应用程序收到请求，您只需要进行所需的任何处理，然后您甚至可以向该人发送短信以确认它已被接收。

# c++ - 正如在 c 中解释的那样

> ID：15318891
> 
> 赞同：-2
> 
> 时间：2013-03-10T04:23:54.663
> 
> 标签：c++, c, algorithm, visual-c++

我得到了这个问题的原因，我只看到了实现

```
for(i=0;nlist[i].nid!=0;i++)
        {}
        nlist[i].nid=n_id;
        nlist[i].add=temp; 
```

nlist 是类型结构的数组

结构

```
struct node
{
    int id; 
    struct node *l[MAX_CONN+1];
    int cost[MAX_CONN+1];  
    struct node **next;
    int *mincost;

};
typedef struct node nodes; 
struct record 

{
    int nid;
    struct node *add;
};
typedef struct record records;
records nlist[MAX_NODES+1]={0}; 
```

全功能

> ```
>  FILE *f;
>     int d;
>     int i=0,j=0,n_id,n_cost;
>     nodes *temp=0,*temp1=0;
> 
>     if((f=fopen("graph.txt","r"))== NULL)
>     {
>         printf("Error opening file.\n");
>         exit(1);
>     }
>     memset(nlist, 0, sizeof(struct record) * MAX_NODES);
>     count=0;
>     do /*first get the id and address of all nodes*/
>     {
>         fscanf(f,"%d",&n_id);
>         for(i=0;nlist[i].nid!=0;i++)
>         {
>             if(n_id==nlist[i].nid)
>             {
>                 printf("Id already exists.");
>                 return;
>             }
>         }
>         temp=(nodes *)malloc(sizeof(nodes));
>         if (temp == 0)
>         {
>            printf("ERROR: Out of memory\n");
>            return;
>         }
>         memset(temp, 0, sizeof(struct node));
>         temp->id=n_id;
>         temp->l[MAX_CONN+1]=0;
>         temp->cost[MAX_CONN+1]=0;
>         for(i=0;nlist[i].nid!=0;i++)
>         {}
>         nlist[i].nid=n_id;
>         nlist[i].add=temp;
>         count++;
>         while((d=fgetc(f)!=';'))
>         {}
>     }while((d=fgetc(f))!=EOF);
> 
>     rewind(f);
> 
>     for(i=0;i<count;i++) /*now get the information of all nodes connections.*/
>     {
>         fscanf(f,"%*d");
> 
>         temp=nlist[i].add;
>         while((d=fgetc(f)!=';'))
>         {
>             fscanf(f,"%d-%d",&n_id,&n_cost);
>             for(j=0;nlist[j].nid!=0;j++)
>             {
>                 if(nlist[j].nid==n_id)
>                 {
>                     temp1=nlist[j].add;
>                     break;
>                 }
>             }
>             for(j=0;temp->cost[j]!=0;j++)
>             {}
>             temp->cost[j]=n_cost;
>             temp->l[j]=temp1;
>         }
>     }
>     fclose(f); 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:26:54.770

缩进具有误导性。它应该像这样缩进：

```
for(i=0;nlist[i].nid!=0;i++) {
    /* empty loop */
}
nlist[i].nid=n_id;
nlist[i].add=temp; 
```

我认为它应该做的事情如下：`for`循环`i`从 0 开始，直到它找到一个元素的字段`nlist`为空值`nid`。然后，它将该索引处的`nid`和字段分别设置为和。`add``n_id``temp`

我应该补充一点，这是非常危险的代码。如果在没有找到合适的插槽`i`的情况下前进到末尾`nlist`，程序很可能会崩溃或以其他方式出现异常。它肯定不会正确运行。

# apache - .htaccess 中的通用 IP 规范化解决方案

> ID：15318894
> 
> 赞同：4
> 
> 时间：2013-03-10T04:25:16.103
> 
> 标签：apache, .htaccess

我正在寻找一种通用的 IP 规范化解决方案，它不会在我的 htaccess 文件中对 IP 地址进行硬编码。我通常在亚马逊 EC2 实例上运行我的应用程序，并且 IP 地址经常更改。我不想每次都手动更新 htaccess。所以具体来说，我正在寻找匹配通过 ip 地址访问的页面并执行 301 重定向到实际域的 htaccess 规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:49:30.817

您是否考虑过使用各种[动态 DNS](http://en.wikipedia.org/wiki/Dynamic_DNS)来代替？这将使 IP 地址经常更改，同时保持相同的 DNS 名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:06:36.973

我将假设您没有任何子域。以下应该可以解决问题：

```
Options +FollowSymLinks
RewriteEngine on
# 1
RewriteCond %{HTTP_HOST} .
# 2
RewriteCond %{HTTP_HOST} !^www\.domain\.com$
# 3
RewriteRule (.*) http://www.domain.com/$1 [R=301,L] 
```

这将重定向对所有资源^(3的实际域)²以外的任何¹的请求。

**编辑**：对于子域，那么以下应该工作：

```
# If it's one of the domains of the IP address …
RewriteCond %{HTTP_HOST} ^domain\.com [OR]
RewriteCond %{HTTP_HOST} ^111\.222\.222\.111
# … then redirect request for all resources.
RewriteRule (.*) http://www.example.com/$1 [R=301,L] 
```

# opengl-es - 在 OpenGL ES 片段着色器中将绘图细分为纹理 FBO

> ID：15318896
> 
> 赞同：0
> 
> 时间：2013-03-10T04:25:20.480
> 
> 标签：opengl-es, fbo

我正在尝试绘制基于纹理的 FBO 的子区域，但遇到了困难。FBO 的尺寸为 500x500，我试图让片段着色器只重绘一个 20x20 像素的子矩形。修改完整的纹理没有困难。

起初我尝试将 glViewport 设置为所需的子矩形，但它看起来并不那么简单。我怀疑影响 gl_Position 的顶点属性和不同的纹理坐标涉及，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:54:23.680

原来我试图修改纹理坐标属性，但更容易在着色器中使用 glViewport 和 gl_FlagCoord 修改视口。

# javascript - Tablesorter 对多个美元符号进行排序

> ID：15318897
> 
> 赞同：2
> 
> 时间：2013-03-10T04:25:23.483
> 
> 标签：javascript, jquery, tablesorter

我想使用 tablesorter 对包含多个美元符号的表格单元格列进行排序。美元符号的数量从 1 美元到 5 美元美元不等，并且应该以 1 为最低和 5 为最高进行排序。注意：我需要这些字符串完全匹配，因为会有很多美元符号被抛出，所以 $$$ 需要与 $$ 和 $ 区分开来。

这是我目前使用的代码，当我有美元符号时它不起作用，但是当我用“b”和“a”替换它们时，它完美地工作。我有 2 个美元符号代表 1，因为我读到这是在正则表达式中表示美元符号所必需的。我也试过了`\$`。这可能是由于在 HTML 表中输入美元符号的方式造成的吗？我使用了标准的“$”和“ `&#36;`”，都不能正常工作。

```
 // add parser through the tablesorter addParser method 
    $.tablesorter.addParser({ 
        // set a unique id 
        id: 'pricerange', 
        is: function(s) { 
            // return false so this parser is not auto detected 
            return false; 
        }, 
        format: function(s) { 
            // format your data for normalization 
            return s.toLowerCase().replace(/\bd\b/g,3).replace(/\bc\b/g,2).replace(/\b$$$$\b/g,1).replace(/\b$$\b/g,0); 
        }, 
        // set type, either numeric or text 
        type: 'numeric' 
    }); 

    $(function() { 
        $("myTable").tablesorter({ 
            headers: { 
                3: { 
                    sorter:'pricerange' 
                } 
            } 
        }); 
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:21:40.880

尝试

```
return s.match(/\$/g).length; 
```

# java - 在java中读取文件并打印最大和最小数

> ID：15318901
> 
> 赞同：0
> 
> 时间：2013-03-10T04:26:12.727
> 
> 标签：java, file

我需要在此文件中打印最大和最小数字...我尝试了所有方法，但似乎无法使其正常工作。我是初学者请帮忙

```
public class Banck {

    public static void main(String[] args) throws IOException {
        // TODO Auto-generated method stub
        System.out.println("Welcome to JEEEZBANK");

        final int NUM_TO_QUIT = -99;

        String userin ;
        int num;

        System.out.println("Enter a file ending with .txt");
        Scanner scan = new Scanner(System.in);
        userin = scan.nextLine();

        // create file
        PrintWriter file = new PrintWriter(userin);

        for(int i=1; i<5; i++){
            System.out.println("enter first number "+i +" or -99 to quit");
            num = scan.nextInt();
            if(num == NUM_TO_QUIT){
                System.out.println("bye");
                System.exit(0);
            }
            file.println(num);

        }
        file.close();
        // read file and print smallest and biggest number
        Scanner read = new Scanner(file);
        while(read.hasNext()){

            // add the numbers to the array 
            int[] numlist = {num};
            // print the biggest and smallest number inside the numlist array.
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:30:41.610

一种方法是创建两个变量，其中一个跟踪当前的最低数字，另一个跟踪当前的最高数字。对于文件中的每个数字，比较它是否低于当前的最低数字，如果是则替换它或者如果它高于当前的最高数字（如果是则替换它）。

您实际上可以在用户输入它们时比较并查找最小和最大数字，而不是使用单独的循环，因为我认为它们是相同的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T04:33:15.360

不要保留清单。使用两个变量来跟踪最大值和最小值。

```
int min = Integer.MAX_VALUE;

int max = 0;

if(num < min) min = num;

if(num > max) max = num; 
```

假设**num**是在上述循环中从文件中读取的整数。

# javascript - Javascript：使用函数上下文与作为参数传递有什么好处

> ID：15318904
> 
> 赞同：3
> 
> 时间：2013-03-10T04:26:40.550
> 
> 标签：javascript, function, optimization, functional-programming

除了欺骗已经实现`this`为某种东西的现有函数之外，您为什么要编写一个 javascript 函数以便您需要更改其上下文（通过`.call`或`.apply`）而不是显式地将“上下文”作为另一个参数传递？有性能优势吗？

例子：

```
function tryIncrement(inc, context) {
    context = context || this; // just so we can reuse same fn for the example

    if( typeof context.val!= typeof 1|| typeof inc != typeof 1 ) return false;
    context.val += inc;
    return true;
}

var a = {name: 'A', val: 5}, b = {name: 'B', val: 20};

// reassign internal context
for(var i = 0, n = [1,3,"not a num",5]; i < n.length; i++) {
    if( tryIncrement.call(a, n[i]) ) console.log('incremented', i, n[i], a);
    else console.log('failed to increment', i, n[i], a);
}

// provide explicit context;
// could just as easily declared function so context was first param
// so it looked the same as previous implementation
for(var i = 0, n = [1,3,"not a num",5]; i < n.length; i++) {
    if( tryIncrement(n[i], b) ) console.log('incremented', i, n[i], b);
    else console.log('failed to increment', i, n[i], b);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:29:23.767

> 据我所知，使用与`this`另一个参数并没有什么不同，它只是有一种更复杂的修改方式。

我认为回答您的问题的最简单方法是想象基本 Javascript 语言的创建者是否遵循了您的约定。

### 一个没有的世界`this`

一个没有的世界`this`是一个可怕的嘈杂的地方，有很多过度的重复：

```
var arr = [1,2,3,4];
arr.reverse(arr); //4321 
```

更多误导或冗长语法的机会

```
var str = "stringtobesplit";
"abiglongstringnotbeingsplit".split(str,":");
String.prototype.split(str,":"); 
```

至少它根本没有摆脱应用：

```
Math.max.apply(arr);  //didn't add the initial `this` since it doesn't exist 
```

实际上，可以选择只创建全局函数，或者在原型或对象上创建函数，这些函数对它接收的参数的类型做出假设，但不强制执行这些假设。例如想象我们幻想世界中的 toString 方法。

您可以创建一个全局 toString 方法，该方法将接收每种类型的对象，并尝试使它们全部工作，或者您可以在每种类型的原型上使用当前工作的函数，而不强制执行它会被称为该类型。有人可以打电话

```
Array.prototype.toString(str) 
```

我们需要优雅地处理它（因为使用 apply 这样做的价值似乎恢复到 Object.prototype.toString 并返回`[Object String]`）。所以我们需要确定在这些情况下调用的正确原型方法，这意味着我的猜测是约定是调用

```
str.toString(str) 
```

或类似的规定。

### 那么重点是什么？

`this`旨在处理原型链上 javascript 方法的常见情况。它为我们提供了一种简写方式，允许对象在不重复调用或不必确切知道其原型是什么的情况下对其自身进行操作。没有它，我们要么必须在对象上没有函数，要么每次都必须显式地调用函数本身，从而引入额外的语法和潜在的错误。

`call`并且`apply`是例外情况，即使消失，也至少可以使用`this`。将您的 api 写入异常情况绝不是一个好主意。如果您正在创建面向对象的代码，您应该使用`this`一种简单的方法来引用作为调用上下文的对象。如果你写得很好，那么 call 和 apply 应该很少使用并且在特殊情况下使用。

### TL;DR -`this`被设计为 Javascript 的一部分是有原因的，当您在对象上创建方法时使用它以获得更清晰和易于理解的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:15:39.733

在很多情况下，您可能希望使用`this`而不是传递额外的参数。例如，考虑以下函数：

```
Function.prototype.async = function () {
    setTimeout.bind(null, this, 0).apply(null, arguments);
}; 
```

该函数允许我们按如下方式延迟函数调用：

```
alert.async("This will display later.");
alert("This will display first."); 
```

你可以在这里看到演示：http: [//jsfiddle.net/AjwQu/](http://jsfiddle.net/AjwQu/)

`this`我们可以将其作为参数传递，而不是将函数绑定到：

```
function async(funct) {
    setTimeout.bind(null, funct, 0).apply(null, [].slice.call(arguments, 1));
} 
```

我们现在会这样使用它：

```
async(alert, "This will display later.");
alert("This will display first."); 
```

结果是一样的：http: [//jsfiddle.net/63dBF/](http://jsfiddle.net/63dBF/)

但是，要获得我们必须使用的参数`[].slice.call(arguments, 1)`。在第一个示例中，我们可以简单地使用`arguments`，因为函数不是参数列表的一部分。

一切都有它的优点和缺点。您只需要知道何时使用什么。希望这个对你有帮助。

**奖励：**将使用的函数转换为接受额外参数的函数真的很容易，`this`反之亦然。首先让我们定义一些实用函数：

```
var functProto = Function.prototype;

var bind = functProto.bind;

var bindable = bind.bind(bind);
var callable = bindable(functProto.call);
var appliable = bindable(functProto.apply); 
```

该`bindable`函数允许您创建现有函数的可绑定版本，该版本在调用时会返回绑定到给定参数的新函数。

该`callable`函数允许您创建现有函数的可调用版本，该版本在调用时使用给定的参数和`this`指针调用现有函数。

该`appliable`函数允许您创建现有函数的适用版本，该版本在调用时应用给定的参数和`this`指向现有函数的指针。

然后给定第一个示例中的函数，我们可以创建第二个示例中的函数，如下所示：

```
var async = callable(functProto.async); 
```

在此处查看演示：http: [//jsfiddle.net/3dSBS/](http://jsfiddle.net/3dSBS/)

同样，我们可以将第二个示例中的函数转换为第一个示例中的函数，如下所示：

```
Function.prototype.async = function () {
    return async.apply(null, [this].concat([].slice.call(arguments)));
}; 
```

在此处查看演示：http: [//jsfiddle.net/rJQyS/](http://jsfiddle.net/rJQyS/)

`this`正如您所看到的，使用然后构造函数接受上下文作为参数，而不是相反，编写函数要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T09:20:23.403

当您进行面向对象编程时，您的函数将取决于上下文，并且将其作为参数提供是没有意义的，因为这会破坏面向对象编程的目的。

为回调提供隐式上下文也很有意义。如果只需要上下文，则不必记住参数的正确顺序。在这种情况下，您根本不必使用参数。所以而不是

`function mayCallback(param1, param2, context)`

你可以写

`function myCallback()`

并使用`this`，如果您不需要 param1 和 param2。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T18:03:49.550

为了解决我的主要目的——使用*函数参数**是否有性能优势？`this`*——答案似乎是**否定**的：

[http://jsperf.com/function-context-vs-parameter](http://jsperf.com/function-context-vs-parameter)

尽管在对象中使用参数值而不是实例 ( ) 变量[似乎有一点好处](http://jsperf.com/parameter-lookup-vs-instance-variables)（但可能并不显着） 。`this`

（请自行测试并评论是否不同）

[关于其他答案所解决的目的： @Aadit 指出](https://stackoverflow.com/a/15322626/1037948)有一些简洁的用例，可维护性可能是个人偏好，但[就像@ben336 所说](https://stackoverflow.com/a/15318911/1037948)，如果您正在使用对象（因此是 OOP），那么`this`可以更有用。

ECMAScript第[5 版本机函数`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)可能是两个世界之间有趣的桥梁，或者至少是一个需要探索的耗时切线。

上面引用的[实例与参数值测试](http://jsperf.com/parameter-lookup-vs-instance-variables)也可能是我观点的一个很好的例子——如果你正在构建一个静态的功能库，你可以`obj.callback2`通过将范围限定为不同的“劫持” `this`，或者直接调用`obj.callback`你的替代上下文。

# javascript - 填充最后一个输入时，JQuery ajax 调用失败

> ID：15318906
> 
> 赞同：1
> 
> 时间：2013-03-10T04:27:00.120
> 
> 标签：javascript, jquery, html, ajax, json

JQuery 菜鸟在这里，

我正在开发一个简单的网络应用程序，它需要将注册信息发送到服务器。出于某种原因，当仅填写两个表单输入时，此代码可以正常工作，但当最后一个输入中有信息时，即使我没有在代码中使用它，它也会失败。错误回调被调用，但 errorThrown 为空。我的服务器没有收到任何数据。

这有什么明显的问题吗？

注意：填写最后一个输入时调用失败，无论表单中有多少输入。

### 查询：

```
$(document).ready(function() {
     $("#registrationForm button.register").on("click", function(event) {
        var params = {
            email: $("#registrationForm input.email").val(),
            password: $("#registrationForm input.password").val()
        };

        $.ajax({
        url: "/register",
        type: "POST",
        contentType: "application/json",
        data: JSON.stringify(params),
        dataType: "json",
        success: function(data, textStatus, jqXHR) {
            console.log(data);
            if(data.user_exists==true)
            {
                alert("Stop trying to register twice!");
            }else{
                window.location.href = "/registered";
            }
        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.error("Error:", errorThrown);
        }
    });
  });
}); 
```

### 和 HTML：

```
<form id="registrationForm">
    <label>Email:</label>
    <input name="user[email]" type="text" required="required" class="email">
    <br>
    <label>Password:</label>
    <input name="user[password]" type="password" required="required" class="password">
    <br>
    <label>Verify Password:</label>
    <input name="nothing" type="text" required="required">
    <br>
    <button onclick="" class="btn btn-default register">Register</button>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:39:38.327

除非您另外指定，否则表单内的按钮将在单击时提交表单。在`click`函数中， put`event.preventDefault()`停止此默认操作的发生。[有关更多详细信息，请参阅此处](http://api.jquery.com/event.preventDefault/)的 jQuery 文档。

# android - 测量视图的大小？

> ID：15318909
> 
> 赞同：2
> 
> 时间：2013-03-10T04:28:20.043
> 
> 标签：android, android-view

有人可以解释何时以及如何测量从 xml 文件中膨胀的视图的确切大小吗？

我知道在调用 setContentView 后视图的高度和宽度不会立即可用。视图布局完成后必须调用一些回调，但我在 Activity 回调中找不到任何明显的东西。我在 iOS 编程中寻找相当于“viewDidLoad”的东西。

我也有点不清楚我实际上是如何读取高度和宽度的。View 上有 getHeight() 和 getWidth() 函数，但我也看到了使用 getLayoutParams().height 和 getLayoutParams().width 的示例。这两个值有什么区别，我想要哪一个？

我的最终目标是在必要时通过修改宽度来强制我的视图进入固定的纵横比（这是一个面向横向的视图）。我无法在 XML 中找到任何方法来做到这一点，所以我想我可以在运行时读取高度和宽度，计算正确的宽度并设置它。如果有人知道更好的解决方案，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:47:55.717

您可以使用 ViewTreeObserver 类。这是一个很好的答案

[如何检索视图的尺寸？](https://stackoverflow.com/questions/4142090/how-do-you-to-retrieve-dimensions-of-a-view-getheight-and-getwidth-always-r/4406090#4406090)

对于第二部分

LayoutParams.height 是您希望视图一旦布局后的高度，可以设置为特定常量，例如 WRAP_CONTENT，getHeight() 返回实际高度（它返回 0 直到视图未布局）。

# jquery - 设置 JavaScript 对象字面量值

> ID：15318913
> 
> 赞同：0
> 
> 时间：2013-03-10T04:30:08.297
> 
> 标签：jquery, javascript

我有一个JS对象如下；

```
var UserDataObj = {
    name: "John",
    email: "john@example.com",
    phone: "9999999999",
    desc: "some description"
} 
```

现在这是一个全局变量。

在我保存表单数据的功能之一中，

我有

```
$(".formFieldUserData").each(function(){
    var key = $(this).attr("name");
    var value = $(this).val();
    UserDataObj.key = value;
}) 
```

现在我想用用户输入的值更新 UserDataObj 中的默认值。我不确定是否行 UserDataObj.key = value; 是正确的

我需要与对象属性对应的密钥..我有相同的名称...

我该如何解决 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T04:32:22.513

你可以试试

```
UserDataObj[key] = value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:40:13.557

原始对象：

```
var UserDataObj = {
    name: "John",
    email: "john@example.com",
    phone: "9999999999",
    desc: "some description"
} 
```

设置并填充新对象：

```
var userData = {};

$(".formFieldUserData").each(function(){
    var $this = $(this);
    userData[$this.attr("name")] = $this.val();
}); 
```

将新数据合并到我们已有的数据中：

```
$.extend(UserDataObj, userData); 
```

注意：`$.extend`将修改`UserDataObj`以包含新旧数据。

# eclipse - 即使项目在那里，Eclipse 也没有显示我的工作区文件夹中的任何项目？

> ID：15318914
> 
> 赞同：3
> 
> 时间：2013-03-10T04:30:14.067
> 
> 标签：eclipse

我们使用子剪辑作为 Eclipse 的 SVN 客户端，我已成功将项目列表签出到“C:\workspace\myprojects”文件夹，然后我打开了 Eclipse 并将工作区位置指定为“C:\workspace\ myprojects' 但即使有项目，它也没有显示任何项目，为什么？

所以我已经通过 Eclipse 功能一一导入了所有项目，现在我可以看到这些项目，但我的问题是，即使我将 Eclipse 工作区文件夹指定为“C:\workspace\myprojects”，为什么还需要导入？

注意：但是示例场景在其他机器上运行良好，即当他们将 Eclipse 工作区文件夹指定为“C:\workspace\myprojects”时，他们不需要一一导入所有项目。

问候， 巴吉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T07:14:52.667

Eclipse 使用元数据来确定工作空间中的项目。因此，您必须将项目导入工作区，即使它们已经位于文件系统的同一目录中。只需从文件系统中调用 File / Import / Existing Projects 并选择已经存在的项目。这是一种痛苦，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T05:27:59.183

仅仅因为您在工作区目录中有一个项目并不意味着 Eclipse 会打开它，甚至自动看到它。您必须使用 File - Import - General - Import existing project into workspace 来让您的项目在 Eclipse 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T14:57:59.577

实际上一些eclipse配置文件被删除了。因此它无法显示。

最后恢复它后，我可以看到所有的项目。

# ios - 如何使用 CAShapeLayer 使我的 UIBezierPath 动画？

> ID：15318918
> 
> 赞同：15
> 
> 时间：2013-03-10T04:30:45.403
> 
> 标签：ios, core-animation, cashapelayer

我正在尝试为 UIBezierPath 设置动画，并且我已经安装了 CAShapeLayer 来尝试这样做。不幸的是，动画不起作用，我不确定任何图层是否有任何影响（因为代码正在做与我拥有图层之前相同的事情）。

这是实际的代码-希望有任何帮助。Draw2D 是嵌入在 UIViewController 中的 UIView 的实现。所有的绘图都发生在 Draw2D 类中。对 [_helper createDrawing... ] 的调用只是用点填充 _uipath 变量。

Draw2D.h 定义了以下属性：

```
#define defaultPointCount ((int) 25)

@property Draw2DHelper *helper;
@property drawingTypes drawingType;
@property int graphPoints;
@property UIBezierPath *uipath;

@property CALayer *animationLayer;
@property CAShapeLayer *pathLayer;

- (void)refreshRect:(CGRect)rect; 
```

下面是实际的实现：

```
//
//  Draw2D.m
//  Draw2D
//
//  Created by Marina on 2/19/13.
//  Copyright (c) 2013 Marina. All rights reserved.
//

#import "Draw2D.h"
#import"Draw2DHelper.h"
#include <stdlib.h>
#import "Foundation/Foundation.h"
#import <QuartzCore/QuartzCore.h>

int MAX_WIDTH;
int MAX_HEIGHT;

@implementation Draw2D

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        if (self.pathLayer != nil) {
            [self.pathLayer removeFromSuperlayer];
            self.pathLayer = nil;
        }

        self.animationLayer = [CALayer layer];
        self.animationLayer.frame = self.bounds;
        [self.layer addSublayer:self.animationLayer];

        CAShapeLayer *l_pathLayer = [CAShapeLayer layer];
        l_pathLayer.frame = self.frame;
        l_pathLayer.bounds = self.bounds;
        l_pathLayer.geometryFlipped = YES;
        l_pathLayer.path = _uipath.CGPath;
        l_pathLayer.strokeColor = [[UIColor grayColor] CGColor];
        l_pathLayer.fillColor = nil;
        l_pathLayer.lineWidth = 1.5f;
        l_pathLayer.lineJoin = kCALineJoinBevel;

        [self.animationLayer addSublayer:l_pathLayer];
        self.pathLayer = l_pathLayer;
        [self.layer addSublayer:l_pathLayer];
    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect :(int) points :(drawingTypes) type //:(Boolean) initial
{
    //CGRect bounds = [[UIScreen mainScreen] bounds];
    CGRect appframe= [[UIScreen mainScreen] applicationFrame];
    CGContextRef context = UIGraphicsGetCurrentContext();
    _helper = [[Draw2DHelper alloc ] initWithBounds :appframe.size.width  :appframe.size.height :type];

    CGPoint startPoint = [_helper generatePoint] ;

    [_uipath moveToPoint:startPoint];
    [_uipath setLineWidth: 1.5];

    CGContextSetStrokeColorWithColor(context, [UIColor lightGrayColor].CGColor);

    CGPoint center = CGPointMake(self.center.y, self.center.x) ;
    [_helper createDrawing :type :_uipath :( (points>0) ? points : defaultPointCount) :center];
    self.pathLayer.path = (__bridge CGPathRef)(_uipath);
    [_uipath stroke];

    [self startAnimation]; 
}

- (void) startAnimation {
    [self.pathLayer removeAllAnimations];

    CABasicAnimation *pathAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
    pathAnimation.duration = 3.0;
    pathAnimation.fromValue = [NSNumber numberWithFloat:0.0f];
    pathAnimation.toValue = [NSNumber numberWithFloat:1.0f];
    [self.pathLayer addAnimation:pathAnimation forKey:@"strokeEnd"];

}

- (void)drawRect:(CGRect)rect {
    if (_uipath == NULL)
        _uipath = [[UIBezierPath alloc] init];
    else
        [_uipath removeAllPoints];

    [self drawRect:rect  :self.graphPoints :self.drawingType ];
}

- (void)refreshRect:(CGRect)rect {
    [self setNeedsDisplay];
}

@end 
```

我知道为什么路径在绘制时没有动画可能有一个明显的原因（而不是立即显示，这就是现在发生的情况）但我一直盯着这个东西太久了，我只是不看见。

另外，如果有人可以推荐有关 CAShapeLayers 和动画的基本入门，我将不胜感激。还没有遇到任何足够好的。

提前致谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-10T15:10:04.007

看起来您正在尝试在内部进行动画处理`drawRect`（至少是间接的）。这不太合理。你不在`drawRect`. `drawRect`用于绘制单帧。一些动画是用计时器或`CADisplayLink`重复调用`setNeedsDisplay`（这将导致 iOS 调用您的`drawRect`）完成的，在此期间您可能会绘制显示该点动画进度的单帧。但是您根本没有自己`drawRect`启动任何动画。

但是，由于您使用的是 Core Animation 的`CAShapeLayer`and `CABasicAnimation`，因此您不需要自定义`drawRect`。Quartz 的核心动画只是为你处理一切。例如，这是我为 a 绘制动画的代码`UIBezierPath`：

```
#import <QuartzCore/QuartzCore.h>

@interface View ()
@property (nonatomic, weak) CAShapeLayer *pathLayer;
@end

@implementation View

/*
// I'm not doing anything here, so I can comment this out
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}
*/

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

// It doesn't matter what my path is. I could make it anything I wanted.

- (UIBezierPath *)samplePath
{
    UIBezierPath *path = [UIBezierPath bezierPath];

    // build the path here

    return path;
}

- (void)startAnimation
{
    if (self.pathLayer == nil)
    {
        CAShapeLayer *shapeLayer = [CAShapeLayer layer];

        shapeLayer.path = [[self samplePath] CGPath];
        shapeLayer.strokeColor = [[UIColor grayColor] CGColor];
        shapeLayer.fillColor = nil;
        shapeLayer.lineWidth = 1.5f;
        shapeLayer.lineJoin = kCALineJoinBevel;

        [self.layer addSublayer:shapeLayer];

        self.pathLayer = shapeLayer;
    }

    CABasicAnimation *pathAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
    pathAnimation.duration = 3.0;
    pathAnimation.fromValue = @(0.0f);
    pathAnimation.toValue = @(1.0f);
    [self.pathLayer addAnimation:pathAnimation forKey:@"strokeEnd"];
}

@end 
```

然后，当我想开始绘制动画时，我只需调用我的`startAnimation`方法。我可能什至不需要`UIView`子类，因为我实际上并没有改变任何`UIView`行为。肯定有次您`UIView`使用自定义`drawRect`实现进行子类化，但这里不需要。

您要求提供一些参考资料：

*   我可能会先回顾一下苹果的如果您还没有看过的话，[核心动画编程指南。](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html)
*   [对我来说，当我阅读Mike Nachbaur 的核心动画教程第 4 部分](http://nachbaur.com/blog/core-animation-part-4)时，一切都已经到位，实际上是从头开始复制他的演示。显然，您也可以查看第 1 到第 3 部分。

# ruby-on-rails - 从另一个模型中提取复选框列表的数据

> ID：15318921
> 
> 赞同：0
> 
> 时间：2013-03-10T04:31:11.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Total Rails Noob 问题：

我无法让表单正常工作。该应用程序是一个简单的投资组合网站。您可以创建一个项目并将标签关联到（例如，在项目 XYZ 上，我使用了技能（标签）A、B 和 C）。有一个项目控制器和一个标签控制器。我有一个项目输入表单，我想在标签模型中提取标签列表。如果我将数据作为选择框拉入，一切都很好：

```
<%= f.label :Tag %><br />
<%= f.select :tag, Tag.all.collect { |t|
    [t.tagname] } %> 
```

但是，如果我尝试创建一个复选框列表以便您可以为每个项目选择多个标签，则会出现错误（以下代码的未定义方法错误）：

```
<%= f.label :Tag %><br />
<%= f.check_box :tag, Tag.each { |t|
    [t.tagname] } %> 
```

你能告诉我我应该在这里做什么吗？这看起来应该很简单。TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:36:17.120

我自己从未尝试过，但认为这样的事情应该可行

```
<% Tag.all.each do |t| %>

  <%= f.checkbox :t.tagname, t.tagname%>

<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:37:21.567

你应该这样使用：

```
 <%= f.fields_for :tag do |ft| %> 
   <% Tag.all.each do |t| %>
     <%= ft.check_box[] t.tagname, t.tagname %>
   <% end %>
 <% end %> 
```

您为什么不尝试使用简单的可[标记](https://github.com/mbleigh/acts-as-taggable-on)宝石。

# java - 如何将字符串转换为数组列表

> ID：15318922
> 
> 赞同：0
> 
> 时间：2013-03-10T04:31:17.930
> 
> 标签：java, android, json

关于从 mysql db 检索数据，我需要您的帮助。我无法将字符串添加到数组列表。我的清单声明

```
ArrayList<HandleListReport> reportList = new ArrayList<HandleListReport>(); 
```

这是我的代码

```
report_data = json.getJSONArray(TAG_REPORT_DATA);

                    for (int i = 0; i < report_data.length(); i++) {

                        //storing variable
                        JSONObject c = report_data.getJSONObject(i);
                        String reportID = c.getString(TAG_REPORT_ID);
                        String userID = c.getString(TAG_UID);
                        String projectName = c.getString(TAG_PROJECT_NAME);
                        String localWork = c.getString(TAG_LOCATION);
                        String timeStart = c.getString(TAG_TIME_START);
                        String timeEnd = c.getString(TAG_TIME_END);
                        Log.d(TAG_LOCATION, localWork);
                        // add data to Arraylist
                        reportList.add(new HandleListReport(reportID, userID, projectName, localWork, timeStart, timeEnd)); 
```

我的问题我的 listReport 缺少字符串数据。Logcat 显示报告列表 ---> []

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:47:01.343

好像变量report_data的长度为0，所以元素不加列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:38:17.037

创建一个字符串列表

```
List<String> list ......

list.add(String) 
```

然后 list.toArray() 方法

http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray(T[])

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T04:43:06.533

看来您正在尝试将 HandleListReport 的对象存储在 arraylist 中。在这种情况下，使用以下命令启动

```
ArrayList<HandleListReport> reportList = new ArrayList<HandleListReport>(); 
```

# objective-c - Git 分支合并到 master 导致 Xcode 项目中出现“选择器的未知类方法”错误

> ID：15318924
> 
> 赞同：0
> 
> 时间：2013-03-10T04:31:34.490
> 
> 标签：objective-c, xcode, git

我正在开发一个 iOS 应用程序，它的第一个版本上周进入了应用程序商店，我对添加到它的东西有一些想法，我想根据用户反馈改变一些东西。我决定为每个主要的新部分做功能分支。我完成了第一个功能分支并验证了应用程序正常工作，没有任何警告或错误。

我将分支合并到 master 中没有任何冲突，在 Xcode 中打开成功合并的 master 并尝试运行它后，我收到很多“选择器没有已知的类方法”、“类的重复接口定义”和“属性有一个先前的声明”错误。我查看了它提到的所有文件，它们都与功能分支中的完全相同。导致文件的最大问题是来自 Apple 的可达性。

这是抛出“选择器没有已知的类方法”的文件之一的示例。它是为`create`,`update`和`remove`方法做的。所有这些方法都添加到功能分支中。

.h 文件：

```
//
//  Services.h
//  MovieQueue
//
//  Created by Joshua Kendall on 2/22/13.
//  Copyright (c) 2013 Simple App Group LLC. All rights reserved.
//

@interface Services : NSObject

+ (NSArray *)search:(NSString *)movieTitle;
+ (NSDictionary *)getMovieDetails:(NSInteger)movieId;

+ (void)create:(NSDictionary *)record;
+ (void)update:(NSDictionary *)record;
+ (void)remove:(id)movieId;

@end 
```

和编辑过的 .m 文件：

```
//
//  Services.m
//  MovieQueue
//
//  Created by Joshua Kendall on 2/22/13.
//  Copyright (c) 2013 Simple App Group LLC. All rights reserved.
//

#import "Services.h"

@implementation Services

#pragma mark - API Access

+ (NSArray *)search:(NSString *)movieTitle {
...
}

+ (NSDictionary *)getMovieDetails:(NSInteger)movieId {
...
}

#pragma mark - CRUD

+ (void)create:(NSDictionary *)record {
...
}

+ (void)update:(NSDictionary *)record {
...
}

+ (void)remove:(id)movieId {
...
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:39:15.010

好的，事实证明这是导入的问题，我在应用程序的 .PCH 文件中导入了所有常用文件，例如 Services 类。我在我构建的所有应用程序中都这样做了，因为它比在每个视图控制器中导入相同的文件更有意义。

我接受了[CodaFi](https://stackoverflow.com/users/945847/codafi)的建议并检查了导入，在将服务标头导入到有问题的类之一之后，我开始查看 .PCH 文件，因为这似乎是原因。

事实证明，.PCH 文件不能替代在每个使用它的类中导入文件。它们仍然必须被导入到每个类中。这个页面“ [4 Ways Precompiled Headers Cripple Your Code](http://qualitycoding.org/precompiled-headers/) ”向我解释了这个问题，特别是标题为“Find and fix the missing #imports”的部分。

我猜在此之前我从来没有遇到过问题，因为我以前从未在 iOS 项目中使用过分支。

# java - 这个java泛型是什么意思？

> ID：15318927
> 
> 赞同：2
> 
> 时间：2013-03-10T04:31:49.347
> 
> 标签：java, generics

最近看到一个函数声明如下：

```
public static <T extends Comparable<? super T>> void sort(List<T> list) {
    //....
} 
```

谁能告诉我在 T 上为`<T extends Comparable<? super T>>`代码片段设置了什么限制。非常感谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:12:19.703

我来一刀。从简单的开始：

```
static <T> void sort(List<T> list) 
```

假设您正在对 T 类型的列表进行排序。但是，我们需要能够对 T 进行排序，因此我们必须将其限制为：

```
static <T extends Comparable> void sort(List<T> list) 
```

这表示您正在对作为 Comparable 子类的 T 列表进行排序。由于 Comparable 是一个接口，这实际上只是意味着它是一个实现 Comparable 接口的事物的列表。但这还不够。Foo 可以在 Baz 与 Foo 完全不相关的情况下实现 Comparable。所以我们最终得到：

```
static <T extends Comparable<? super T>> void sort(List<T> list) 
```

这表示您正在对一个 T 列表进行排序，其中 T 表示任何实现 Comparable<? super T> - 它可以通过 T 上的方法或 T 的某个祖先（超类）来比较两个 T。这是排序所必需的，因为排序需要在排序过程中比较项目。如果没有明确的比较器，唯一的方法是让项目能够比较自己。比较器不需要在 T 本身上 - 如果有一个实现 Comparable 的超类，那也很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T05:11:54.347

我们可以从左到右逐步了解它的含义。

以 开头`T extends Comparable`，这意味着正在使用的通用接口必须扩展`Comparable`。请注意，因为`T`是扩展`Comparable`，它必须是一个接口，因此假设。

那么，`Comparable<? super T>>`这意味着`Comparable`（`<>`部分）使用的类型必须是 的超类`T`。

把它们放在一起，你会得到如下声明：

> 一个泛型接口 T，它扩展了类型比 T 更高的 Comparable。

在这里，“更高”是指超类。

对泛型的大多数限制都可以这样解释，除了少数极端情况。如果您再次卡住，请尝试大声朗读 - 从左到右 - 并通过口头将其分解以查看到底发生了什么。

# java - 如何使用此分布在 Java 中生成随机布尔值？

> ID：15318929
> 
> 赞同：1
> 
> 时间：2013-03-10T04:32:07.593
> 
> 标签：java, random, boolean

我需要生成一些随机`boolean`值。

但是，我需要确保`true`在 100 次通话中准确获得 10 次。另外，我需要这些`true`值几乎是均匀分布的（例如，第二个`true`将在 9 之后`false`，第三个将在 7 之后`false`，等等）。我尝试使用`java.util.Random`'s`nextBoolean()`方法来实现这一点，但似乎这些`true`值一开始就过于拥挤。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T04:41:30.140

下面是一些实现[分层抽样](http://en.wikipedia.org/wiki/Stratified_sampling)技术的代码：

```
boolean[] get10in100() {
    boolean[] result = new boolean[100];
    Random rand = new Random();
    for (int i = 0; i < 10; ++i) {
        result[10 * i + rand.nextInt(10)] = true;
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:49:35.387

如果你想真正随机地从 N 个中完全随机化 K 个，你可以创建一个包含 K 个和 NK 个真的数组，并使用 Collections 上的 shuffle 方法进行随机化。

```
List<Boolean> values = new ArrayList<Boolean>();
for (int i = 0; i < 10; i++) {
  values.add(true);
}
for (int i = 0; i < 90; i++) {
  values.add(false);
}

Collections.shuffle(values); 
```

如果您希望它从字面上每隔 10-ish 间隔一次，请改用 Ted 的答案，尽管目前尚不清楚您是否真的希望从您的描述中得到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T04:44:50.527

取决于你想如何定义随机性......这是一种可能性：

```
boolean[] ranbool = new boolean[100];
Random rng = new Random();
for (int i = 0 ; i < 10 ; i++)
    ranbool[rng.nextInt(100)] = true; 
```

// 下面是多余的

```
for (int i = 0 ; i < 100 ; i++)
    System.out.print ((ranbool[i]) ? "X" : "O");
System.out.println(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-16T21:22:09.017

**几乎没有增强的通用 @ted-hopp 解决方案，用于创建布尔的分布式 prim 数组**

也许它会对某人有所帮助：

```
public static boolean[] getRandomBooleanArray(int itemsCount, int truePercentage) {
    Random rand = new Random();
    boolean[] result = new boolean[itemsCount];
    int boolCount = (int) (itemsCount * truePercentage * 0.01); // true items count
    int step = (itemsCount + boolCount - 1) / boolCount; // calculate step
    for (int i = 0; i < boolCount; ++i) {
        int noise = rand.nextInt(step); // calculate noise
        int index = step * i + noise; // initial index
        int realIndex = index < itemsCount ? index : itemsCount-1; // ensure min index
        result[realIndex] = true;
    }
    return result;
} 
```

# python - 将执行的值分配给python中的数组

> ID：15318934
> 
> 赞同：0
> 
> 时间：2013-03-10T04:32:50.487
> 
> 标签：python, arrays, assign

```
n = 1
for n in range(3):         
    p = Poly(a[n+1][0:3])
    print p 
    n=n+1 
```

这是我的编码。基本上，我有一个 3 乘以 3 的矩阵，我想将每一行分配给一个多项式函数，然后将每个多项式函数分配给一个新数组。但是，我不知道如何将每次从 poly 函数执行的 p 值分配给我想要的数组。

一些身体请帮助我。

p 执行的输出看起来像

*   `(749.55*x**2) + (6.95*x**1) + (9.68*(10^-4)*x**0)`
*   `(1285*x**2) + (7.051*x**1) + (7.375*(10^-4)*x**0)`
*   `(1531*x**2) + (6.531*x**1) + (1.04*(10^-3)*x**0)`

基本上，从执行的 p 输出构建一个 3*1 数组就足够了。

对于信息，我的矩阵 a 看起来像这样

```
[['A', 'B', 'C', 'PMIN', 'PMAX'], ['749.55', '6.95', '9.68*(10^-4)', '320', '800'], ['1285', '7.051', '7.375*(10^-4)', '300', '1200'], ['1531', '6.531', '1.04*(10^-3)', '275', '1100']]
[['A' 'B' 'C' 'PMIN' 'PMAX'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:19:46.327

列表推导非常简单地描述了这一点：

```
def Poly(a):
  return "{}x^2 + {}x + {}".format(a[0],a[1],a[2])
a = [['A', 'B', 'C', 'PMIN', 'PMAX'],[1,2,3,99,99],[4,5,6,42,42],[7,8,9,3.14,2.72]]
result = [Poly(a[n]) for n in range(1,4)]
print result 
```

输出是：

```
['1x^2 + 2x + 3', '4x^2 + 5x + 6', '7x^2 + 8x + 9'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:37:44.633

试试这个：

```
p = []
for n in range(3):
    p.append(Poly(a[n+1][0:3]))
print p 
```

我无权访问您的`Poly`函数或`a`数组，但我们可以像这样测试它：

```
p = []
for n in range(3):
    p.append([n,n+1,n+2])
print p
#output:
#[[0, 1, 2],
# [1, 2, 3],
# [2, 3, 4]] 
```

我还使用 and 删除了您的行，`n+1`因为`n=n+1`这两个行都是通过使用`n in range(3)`which 自动完成的：

```
for n in range(3):
    print n
#output:
# 0
# 1
# 2 
```

（请注意，它以 开头`0`和结尾`2`，这样它就可以准确地运行`3`时间）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T04:46:07.683

> 但是，我不知道如何将每次从 poly 函数执行的 p 值分配给我想要的数组。

```
results = []
for x in range(3):
   p = Poly(something)
   results.append(p) # adding it to the list `results` 
```

顺便说一句，在 Python 中，没有数组，只有列表（0-index 集合）和字典，它们更像是哈希。

# operational-transform - ShareJS 示例不起作用

> ID：15318935
> 
> 赞同：1
> 
> 时间：2013-03-10T04:32:50.890
> 
> 标签：operational-transform

我正在尝试使用 Sharejs 制作一个协作文本编辑器，但我一开始就遇到了一些问题。

我从“入门”页面开始。我运行`npm install share`，然后使用`./node_modules/share/bin/exampleserver`. 这工作正常。

但是后来我尝试按照“运行服务器”部分中的步骤创建自己的小型应用程序。我编写了 app.js 文件和建议的 html，当我尝试运行它时，浏览器控制台给出 404 错误，说它找不到 socket.io.js：

```
GET http://localhost:8000/socket.io/socket.io.js 404 (Not Found) 
```

然后我反复收到此错误：

```
GET http://localhost:8000/test?VER=8&MODE=init&zx=ktil5643g6cw&t=1 404 (Not Found) 
```

有没有人有任何建议或想法是什么原因造成的？我知道它可以工作，因为正如我之前提到的，预配置的示例在本地工作得很好，只是我在尝试创建新应用程序时不能正确配置某些东西。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T05:52:04.857

您可以在更改日志中看到以下内容：

```
client.open('hello', 'text', function(doc, error) {
  // ...
}); 
```

变成

```
client.open('hello', 'text', function(error, doc) {
  // ...
}); 
```

示例仍然包含过时的回调`function(doc, error)`。此外，将客户端上的 URL 更改为[http://example.com:8000/channel](http://example.com:8000/channel)。

在我的情况下，最终版本是：

**服务器**

```
var connect = require('./node_modules/connect'),
    sharejs = require('./node_modules/share').server;

var server = connect(
    connect.logger(),
    connect.static(__dirname + '/public')
);
var options = {db:{type:'none'}}; // See docs for options. {type: 'redis'} to enable persistance.

// Attach the sharejs REST and Socket.io interfaces to the server
sharejs.attach(server, options);

server.listen(8000, function () {
    console.log('Server running at http://127.0.0.1:8000/');
}); 
```

**客户**

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <script src="http://ajaxorg.github.com/ace/build/src/ace.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="/channel/bcsocket.js"></script>
    <script src="/share/share.js"></script>
    <script src="/share/ace.js"></script>
    <script>
        $(document).ready(function() {
            var editor = ace.edit("editor");

            sharejs.open('hello', 'text', 'http://localhost:8000/channel', function (error, doc) {
                doc.attach_ace(editor);
            });
        });
    </script>
    <style>
        #editor {
            width: 200px;
            height: 100px;
        }
    </style>
</head>
<body>
<div id="editor"></div>
</body>
</html> 
```

# c++ - const char* 成员

> ID：15318943
> 
> 赞同：1
> 
> 时间：2013-03-10T04:33:44.367
> 
> 标签：c++, windows, tinyxml

我正在存储从以下 tinyxml2 函数返回的 const char*：

```
const char* tinyxml2::XMLElement::Attribute (const char * name, const char * value = 0) 
```

[http://www.grinninglizard.com/tinyxml2docs/classtinyxml2_1_1_x_m_l_element.html#ae39be2f7677e470e0f76ccd73eea560c](http://www.grinninglizard.com/tinyxml2docs/classtinyxml2_1_1_x_m_l_element.html#ae39be2f7677e470e0f76ccd73eea560c)

但是，我最近意识到字符串数据会随着时间的推移而损坏，可能是在多次调用 Attribute() 之后。我要将 const char* 更改为 std::string 但我只想了解为什么会发生这种情况。

我尝试查看源代码，但我不明白为什么会发生这种情况。看起来 Attribute() 调用了 Value()，而后者又调用了 GetStr()：

[https://github.com/leethomason/tinyxml2/blob/master/tinyxml2.cpp](https://github.com/leethomason/tinyxml2/blob/master/tinyxml2.cpp)

谁能告诉我为什么 GetStr() 返回的 const char* 指向的数据会损坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:43:17.817

查看源代码会发现它返回一个指向您的 XML 数据的指针。确保在处理完 XML 数据之前将其保存在内存中，或者在删除 XML 数据之前复制所需的字符串。

# c# - 检测不活动并取消屏幕保护程序

> ID：15318945
> 
> 赞同：2
> 
> 时间：2013-03-10T04:34:34.260
> 
> 标签：c#, screensaver

我正在制作一个 WPF C# 程序。对于下一阶段，我想创建一条消息，在半小时不活动后出现在屏幕上。我将不活动定义为没有鼠标移动和没有按键按下。我有两个问题

1）半小时不活动后如何触发消息显示？

2) 如果它正在运行，我将如何取消 Windows 屏幕保护程序？

到目前为止，我已经看过：

*   [阻止屏幕保护程序](https://stackoverflow.com/questions/8354555/block-screensaver)
*   [制作屏幕保护程序](https://stackoverflow.com/questions/12876738/making-a-screensaver)
*   [Windows 8 中的屏幕保护程序](https://stackoverflow.com/questions/14296903/screensaver-in-windows-8)
*   [https://stackoverflow.com/questions/10912891/dynamically-configure-screensaver-application-content](https://stackoverflow.com/questions/10912891/dynamically-configure-screensaver-application-content)
*   [以编程方式中断活动的屏幕保护程序？](https://stackoverflow.com/questions/864129/interrupt-an-active-screensaver-programatically)
*   [http://www.codeproject.com/Articles/17067/Controlling-The-Screen-Saver-With-C](http://www.codeproject.com/Articles/17067/Controlling-The-Screen-Saver-With-C)

您会看到大多数令人沮丧的结果都指向创建 windows/linux 屏幕保护程序，而不是帮助实现我的目标，即创建像 windows 屏幕保护程序一样从不活动状态触发的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T05:16:26.967

尝试查看[有关代码项目的这篇文章](http://www.codeproject.com/Articles/13384/Getting-the-user-idle-time-with-C)。

诀窍是搜索“系统空闲”而不是“屏幕保护程序效果”。

（[归功于 Darin Dimitrov 的回答](https://stackoverflow.com/questions/3092620/system-idle-detection)）

# c# - 在 C# 中将 Object[] 数组转换为 string[] 数组？

> ID：15318946
> 
> 赞同：21
> 
> 时间：2013-03-10T04:34:35.543
> 
> 标签：c#, arrays

我有很多方法可以做到这一点，但仍然想知道是否有任何官方 API 可以将 object[] 转换为 string[] 并检查 null？谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-10T04:44:57.110

您可以使用 Array 类中的 ConvertAll 方法和对象本身的 lambda 对其进行简单的转换。

```
object[] inputArray = new object[10];
string[] resultArray = Array.ConvertAll(inputArray, x => x.ToString()); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-10T04:38:25.633

如果您有一个方法可以通过 null 检查将 an 转换`object`为`string`(or `int`)，那么您可以使用[Array.ConvertAll<TInput, TOutput> 方法](http://msdn.microsoft.com/en-us/library/exc45z53.aspx)将 an 转换`object[]`为`string[]`(or `int[]`)：

```
object[] input = ...;
string[] result = Array.ConvertAll<object, string>(input, ConvertObjectToString); 
```

```
string ConvertObjectToString(object obj)
{
    return obj?.ToString() ?? string.Empty;
} 
```

如果您想`object[]`在转换为 a 时跳过数组中的项目`string[]`，更方便的方法可能是使用[Enumerable Class](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)的扩展方法：

```
object[] input = ...;
string[] result = input.Where(x => x != null)
                       .Select(x => x.ToString())
                       .ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T04:45:03.460

这是一个扩展方法，它允许选择包含/排除空值，以及如果包含空值，则使用什么值替换空值。

```
public static class ObjectArrayExtensions
{
    public static string[] ToStringArray(this object[] array, bool includeNulls = false, string nullValue = "")
    {
        IEnumerable<object> enumerable = array;
        if (!includeNulls)
            enumerable = enumerable.Where(e => e != null);
        return enumerable.Select(e => (e ?? nullValue).ToString()).ToArray();
    }
} 
```

用法：

```
object[] array = new object[] { 10, "hello", 5, "world", null };

var stringArray = array.ToStringArray();
// stringArray = { "10", "hello", "5", "world" }

stringArray = array.ToStringArray(true);
// stringArray = { "10", "hello", "5", "world", "" }

stringArray = array.ToStringArray(true, "empty");
// stringArray = { "10", "hello", "5", "world", "empty" } 
```

感谢 280Z28 改进答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T04:53:33.473

尝试这个：

```
object[] input = {1, 2, null, 4, 5, 0.438, 7};
int[] result = input.OfType<int>().Select((o) => (int)o).ToArray();
// {1, 2, 4, 5, 7} 
```

或`string`先进行替代：

```
object[] input = {1, 2, null, 4, 5, 6.438, 7};
int[] result = input.Where((o) => o != null)
    .Select((o) =>
    {
        string s = o.ToString();
        int x = 0;
        int.TryParse(s, out x);
        return x;
    }).ToArray();
// { 1, 2, 4, 5, 0, 7} 
```

# php - 选中第一组单选按钮的值时显示第二组单选按钮

> ID：15318951
> 
> 赞同：0
> 
> 时间：2013-03-10T04:35:21.030
> 
> 标签：php, button, radio

我想要的是，当我检查第一组单选按钮（名称=来源；数据库中的值）时，他们可以显示第二组单选按钮（名称=考试；值也来自数据库）

```
<?php 

$sql = 'SELECT * FROM source'; 
$query = mysql_query($sql); 

while ($row =mysql_fetch_array($query)) {
   echo '<input type="radio" name="source" value="'.$row['s_id'].'">'.$row['s_desc']; 
   }

*if ($source.checked){
echo '<input type="radio" name="exam" value="'.$row['e_id'].'">'.$row['e_desc']; 
   }
}*
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T04:44:22.867

此摘录中未定义 $source。你的意思是$row['checked']？

也许检查查询返回的值是否确实是您期望看到的值会有所帮助。如果您使用以下几行，它会暂时破坏您的布局，但它会帮助您确认您的查询按预期运行。

```
while ($row=mysql_fetch_array($query)) {
  echo '<input type="radio" name="source" value="'.$row['s_id'].'">'.$row['s_desc'];

  echo '<br />checked: '.$row['checked'];
  echo '<br />e_id: '.$row['e_id'];
  echo '<br />e_desc: '.$row['e_desc'];
  } 
```

你在哪里“检查”rb1的状态？我目前的猜测是，最终用户将检查您的 PHP 脚本提供的 HTML 页面中的单选按钮......但是您正在服务器上的数据库中查找有关按钮本地检查状态的信息。如果我的猜测是正确的，您不想在每次点击后再次提供该页面。相反，您可以为页面提供所有可能的按钮，并使用 CSS 隐藏未选择 rb1 按钮的 rb2 按钮。

注意：未经测试的 PHP

```
while ($row=mysql_fetch_array($query)) {
  echo '<input type="radio" name="source" value="'.$row['s_id'].'"';
  echo 'onclick=yourJavaScriptFunctionToDisplayTheRB2Button()';
  echo '>'.$row['s_desc'];

  echo '<input type="radio" name="exam" value="'.$row['e_id'].'"';
  if (!$row['checked']) {
    echo ' style="visibility=hidden"';
  }
  echo '>'.$row['e_desc'];
  } 
```

[对于您的 JavaScriptFunctionToDisplayTheRB2Button()，请参阅此处](http://jsfiddle.net/c62dJ/1/)的 jsFiddle 示例。

# android - 如何在没有管理员权限的情况下更改环境变量名称和值？

> ID：15318952
> 
> 赞同：0
> 
> 时间：2013-03-10T04:35:25.570
> 
> 标签：android, windows-7, environment-variables

我正在使用eclipse和android。Android 默认调试密钥库位置，因为`C:\users\<user>\.android\debug.keystore`我需要更改默认调试密钥库位置。

所以，我试图`Advanced System Settings`在 Windows 7 中访问。但我没有管理员权限，所以我无法访问`Advanced System Settings`. 如何更改`environment variable and value without admin rights...`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-24T06:52:52.707

我有一个解决方法

1.  转到开始输入帐户，然后单击用户帐户
2.  在左侧去更改我的环境变量
3.  在这里，您可以为您的用户名添加环境变量名称和值。

# sqlexception - 必须声明标量变量“@id”

> ID：15318955
> 
> 赞同：0
> 
> 时间：2013-03-10T04:36:29.840
> 
> 标签：sqlexception

我知道这个问题已经被问了一千次了。但是给出的解决方案对我不起作用。我有一个非常简单的存储过程，如下所示：

`alter procedure sp_updateVacancyWithRecruitment (@id int, @idList varchar(100) ) as EXEC('update Vacancy_team1 set recruitment_request_id=@id where id IN ('+@idList +')')`

甚至以下内容也不起作用：

`exec sp_updateVacancyWithRecruitment @id=5,@idList='6,8'`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:06:39.183

好的 。知道了 。语法错误。我的错。正确的程序是： `alter procedure sp_updateVacancyWithRecruitment (@id int, @idList varchar(100) ) as EXEC('update Vacancy_team1 set recruitment_request_id='+@id+' where id IN ('+@idList+')')`

# c# - 读取 NDS 游戏的标题？

> ID：15318956
> 
> 赞同：3
> 
> 时间：2013-03-10T04:36:42.587
> 
> 标签：c#, nintendo-ds

我知道这有点不寻常，但我想尝试找出如何读取 Nintendo DS 游戏的元数据？在计算机上时，它们具有`.nds`扩展名。

我正在尝试使用我拥有的一些自制游戏，并且我想制作一个库。C# 是我更喜欢使用的语言。

我试过在互联网上研究它，我发现最接近的选项是读取文件头。然而，考虑到游戏文件应该有一个标题和一个图像，我最接近它的只是获得部分标题。

我知道这是可以做到的，因为有一些用 c# 编写的程序已经做到了。那么，有人知道怎么做吗？我非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T04:29:33.233

所有元数据（包括标题/图像）都存储在 ROM 标头中，即`.nds`文件的前 512 个字节。您必须将`.nds`文件作为二进制文件读取并检查存储在某些偏移量处的值。

例如，从 offset 开始的 4 个字节`0x68h`包含一个 32 位值，该值指定存储游戏标题/图标数据的偏移量。英文标题存储在`0x340h`从该`0x68`偏移处找到的 256 个字节（以 16 位 Unicode 编码）中。

类似地，图标位图（32x32 像素）存储在`0x20h`距`0x68h`偏移量的 512 字节中，位图的调色板存储在`0x220h`距`0x86`偏移量的 32 字节中。图标及其调色板采用标准 GBA 颜色方案/调色板进行编码（请参阅[http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#Graphics%20Hardware%20Overview](http://www.cs.rit.edu/~tjh8300/CowBite/CowBiteSpec.htm#Graphics%20Hardware%20Overview)上的颜色格式部分）。

有关`.nds`标头格式的更多信息，请参阅[http://nocash.emubase.de/gbatek.htm#dscartridgeheader](http://nocash.emubase.de/gbatek.htm#dscartridgeheader)。

如果有疑问，您可以参考`ndstool`，这是一个方便的实用程序，用于查看 nds 标头数据和从 DS 文件系统中提取文件。它是开源的，并作为 devkitPro 工具链的一部分包含在[http://sourceforge.net/projects/devkitpro/](http://sourceforge.net/projects/devkitpro/)中。

# javascript - 显示时不出现图片：none 被移除

> ID：15318957
> 
> 赞同：1
> 
> 时间：2013-03-10T04:36:44.963
> 
> 标签：javascript, html, css

我有以下 HTML 和 JavaScript。有三张图片和三个链接。单击一个链接会显示一张图片并隐藏另外两张。

当`display: none`CSS 中的 不存在时，这可以正常工作。但我放在`display: none`那里是因为我**不**希望图片最初出现。现在，当我点击链接时，图片永远不会出现。这是为什么？

HTML

```
<div id="content">
  <div id="left">
    <a href="javascript:showImage('img1')">show image1</a>
    <a href="javascript:showImage('img2')">show image2</a>
    <a href="javascript:showImage('img3')">show image3</a>
  </div>

  <div id="right">
     <img id="img1" src="berlin.jpg" height="200px"/>
     <img id="img2" src="london.jpg" height="200px"/>
     <img id="img3" src="madrid.jpg" height="200px"/>
  </div>
</div> 
```

JavaScript

```
function showImage(id) {
    var images_id = new Array("img1", "img2", "img3");
    for (var i = 0; i < images_id.length; i++) {
        setImageVisible(images_id[i], false);
    }
    setImageVisible(id, true);
}

function setImageVisible(id, visible) {
    var img = document.getElementById(id);
    img.style.display = (visible ? '' : 'none');
} 
```

CSS

```
#img1, #img2, #img3 {
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T04:39:45.487

设置时，您只会影响属性。通过将其设置为，您将从该属性中删除它并让样式表对其.`***elem***.style.***property***``style``""``display:none`

尝试将其设置为`block`。

# ios - AVPlayerLayer的模糊内容

> ID：15318958
> 
> 赞同：1
> 
> 时间：2013-03-10T04:36:57.393
> 
> 标签：ios, avfoundation

有没有办法模糊 AVPlayerLayer 中显示的内容？
内容是流式资产（m3u8），因此没有 AVAssetReader 等选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T13:26:14.733

尝试使用下一个解决方案来获取图像：

```
CIImage *snaphotImage = nil;
AVPlayerItem *item = ((AVPlayerLayer*)view.layer).player.currentItem;
if (item.status == AVPlayerItemStatusReadyToPlay)
{
    AVURLAsset *asset = (AVURLAsset *)item.asset;
    AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];
    CGImageRef thumb = [imageGenerator copyCGImageAtTime:((AVPlayerLayer*)view.layer).player.currentTime
                                              actualTime:NULL
                                                   error:NULL];
    snapshotImage = [CIImage imageWithCGImage:thumb];
    CGImageRelease(thumb);
} 
```

然后对其应用模糊：

```
CIFilter *filter = [CIFilter filterWithName:@"CIGaussianBlur" 
                              keysAndValues:@"inputRadius", @9.0,
                                            @"inputImage", snapshotImage, nil];
CIImage *resultImage = [filter outputImage];
UIImage *resultUIImage = [UIImage imageWithCIImage:resultImage]; 
```

# javascript - 乘以 .val() x 2

> ID：15318959
> 
> 赞同：-2
> 
> 时间：2013-03-10T04:37:10.377
> 
> 标签：javascript, jquery

我试图将此函数中的 val() 乘以 2。但它没有输出。我的代码在哪里混淆了？

```
$('.retina-outline').text($('.billboard-height').val() *2 + 'PX'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:51:31.460

```
var pixels = (parseInt($('.billboard-height').val()) * 2) + 'PX';
$('.retina-outline').text(pixels); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:46:11.627

`$('.billboard-height').val()`可能类似于`20px`and `$('.billboard-height').val() * 2`is `NaN`。

您应该使用`parseInt($('.billboard-height').val()) * 2`in which`parseInt`将`20px`变为`20`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T05:52:25.167

```
var h = $('.billboard-height').val() *2 ;
$('.retina-outline').text(h.tostring() + 'PX'); 
```

# c# - Response.Redirect 正在执行 POST 而不是 GET

> ID：15318962
> 
> 赞同：2
> 
> 时间：2013-03-10T04:37:40.363
> 
> 标签：c#, asp.net, post, get, response.redirect

我的页面上有一个 LinkBut​​ton，当它被点击时，正常行为将回发到同一页面（您可以通过按 F5 刷新页面来判断页面已发布，您将从浏览器中获得一个确认框“您的页面正在查找您输入的已使用信息。返回该页面可能会导致您重复执行的任何操作。您要继续吗？")

所以为了防止用户重新提交处理过的表单，我决定将其response.redirect到同一个页面。

```
void LinkButton1_Click(object sender, EventArgs e) {
    Response.Redirect("Default.aspx"); //redirecting back to the same page
} 
```

就我而言，Response.Redirect 应该使用 GET，但在这种情况下它使用的是 POST（重定向后，如果我想重新提交表单，F5 刷新仍会提示我）。我怀疑 Response.Redirect 没有执行，所以我将 url 从“Default.aspx”更改为“HelloWorld.aspx”，它位于同一服务器的同一目录中，并正确重定向。现在按 F5 将立即刷新页面，而不会询问我是否要重新提交页面。

是什么赋予了？我的页面上有其他代码，但我怀疑它们导致了这种行为，并且它们太长而无法在此处发布。如果需要，我会提供。感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T06:55:33.247

你在用 Chrome 吗？[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get "发布/重定向/获取")模式似乎已损坏，即使发出了 Response.Redirect()，也会导致“确认表单重新提交”对话框：https [://code.google.com/p/chromium/issues/detail?编号=21245](https://code.google.com/p/chromium/issues/detail?id=21245)

其次，Response.Redirect() 总是这样工作，以 Default.aspx 为例：

*   打开页面
*   客户端：HTTP GET Default.aspx
*   服务器：HTTP 200 好的
*   输入表单数据，按提交按钮
*   客户端：HTTP POST Default.aspx
*   服务器：HTTP 302 重定向到 Default.aspx
*   客户端：HTTP GET Default.aspx

我创建了一个带有表单的示例 ASP.NET 应用程序，然后添加了一个带有调用的事件处理程序的 LinkBut​​ton，`Response.Redirect(Request.RawUrl)`顺便说一下，它比类似的东西更受欢迎，`Response.Redirect("Default.aspx")`因为它使用调用页面的相对路径并在开发和部署环境中工作。

在 IE 中，在表单中输入数据并按提交，然后按 F5 后，我没有看到“确认表单重新提交”对话框。与 Firefox 相同；没有对话。但在 Chrome 中，我确实收到了警告。我唯一的结论是您可能遇到了 Chrome 问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T06:47:01.403

# 怎么了

我在 Chrome 中注意到了这个问题，但在 Firefox 或 IE 中没有。

事实上，Chrome 正在执行 GET，但它将 POST 和 GET 捆绑在一起——我想这涉及到一些优化。

`Ctrl-F12`您可以通过点击，查看网络选项卡来确认此行为。请注意，将有一个 302 POST 和一个 200 GET。

我不明白 Chrome 到底在做什么，因为调试器显示 302 后跟 GET，但刷新清楚地提示表单重新提交。

# 信息冲突

互联网上存在关于 302 重定向的严重错误信息，尤其是在 Stack Overflow 上。

从历史上看，大多数浏览器在遇到 302 重定向时都会将 POST 转换为 GET。

但是，根据标准，一个 POST 应该保持一个 POST，一个 GET 应该保持一个 GET ( [Source](http://en.wikipedia.org/wiki/HTTP_302) )。尽管如此，大多数浏览器继续将所有 302 转换为 GET。

他们这样做可能是因为典型的浏览体验对于所有额外的表单重新提交对话框更加烦人。它也可能是更快的浏览。

# 如何修复它

303 重定向是在 POST 之后重定向应用程序的正确方法。

```
Response.Clear();
Response.Status = "303 See Other";
Response.AddHeader("Location", "MyNewURL");
Response.End(); 
```

如果您使用此方法，所有浏览器的行为都会一致，因为浏览器必须对新 URL 使用 GET。

**参考**

*   [302 重定向](http://en.wikipedia.org/wiki/HTTP_302)
*   [303 重定向](http://en.wikipedia.org/wiki/HTTP_303)

# c# - 如何更新先前的gridview行onrowdatabound

> ID：15318967
> 
> 赞同：0
> 
> 时间：2013-03-10T04:38:36.150
> 
> 标签：c#, asp.net, gridview

如果 sVal 包含当前行的“字段名称”，我需要更新前一行的单元格 4 以添加按钮单击事件。

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        string sVal = e.Row.Cells[2].Text;
        if (sVal.Contains("Field Name"))
        {
            // update cell[4] of previous row with button click event

            e.Row.Cells[2].BackColor = System.Drawing.Color.WhiteSmoke;
            e.Row.Cells[2].Font.Bold = true;

            e.Row.Cells[3].BackColor = System.Drawing.Color.WhiteSmoke;
            e.Row.Cells[3].Font.Bold = true;

            e.Row.Cells[4].BackColor = System.Drawing.Color.WhiteSmoke;
            e.Row.Cells[4].Font.Bold = true;

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:01:32.673

您需要上课，然后在自动更新面板计时器 5 秒的更新面板上调用此类.. 这是个好方法...

```
 string sVal = e.Row.Cells[2].Text;
    if (sVal.Contains("Field Name"))
    {
        // update cell[4] of previous row with button click event

        e.Row.Cells[2].BackColor = System.Drawing.Color.WhiteSmoke;
        e.Row.Cells[2].Font.Bold = true;

        e.Row.Cells[3].BackColor = System.Drawing.Color.WhiteSmoke;
        e.Row.Cells[3].Font.Bold = true;

        e.Row.Cells[4].BackColor = System.Drawing.Color.WhiteSmoke;
        e.Row.Cells[4].Font.Bold = true;

    }
} 
```

# java - 随机数生成器行为怪异

> ID：15318968
> 
> 赞同：0
> 
> 时间：2013-03-10T04:38:36.363
> 
> 标签：java, random

我想要一个从 0 到 3 的随机数，并尝试了下面的代码来看看它是如何工作的。

```
int[] count = new int[4];

    for (int i = 0; i < 1000; i++) {
        int t = (int)(Math.round((Math.random() *3)));

        count[t] +=1;

    }

    for (int i = 0; i < count.length; i++) {
        System.out.println(count[i]);

    } 
```

现在奇怪的是，0 和 3 命中大约是 1 和 2 命中的一半，这怎么可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T04:42:59.423

查看四舍五入到每个整数的间隔：

```
|----+----|----+----|----+----|
0         1         2         3

<...>
Rounds to 0
     <........>
     Rounds to 1
               <........>
               Rounds to 2
                         <....>
                         Rounds to 3 
```

您可以看到，舍入到 0 和 3 的范围是其他范围的一半，因此如果您选择统一，则命中它们的频率是一半。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T04:45:18.633

[http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round(double)](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#round(double))

> 返回最接近参数的 long。通过加 1/2、取结果的下限并将结果转换为 long 类型，将结果四舍五入为整数。

您正在创建大小不等的存储桶：

0 - 0.4999... => 0 (.5)

0.5 - 1.499... => 1 (1)

1.5 - 2.499... => 2 (1)

2.5 - 2.99999... => 3 (.5)

要修复，请使用：

```
Random.nextInt(4); 
```

呃......错字，谢谢@TedHopp - 我的意思是：

```
Random r = new Random();
...
r.nextInt(4); 
```

或者做

```
(int) (Math.random() * 4);s 
```

这会做你所期望的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T04:42:18.857

发生这种情况是因为您正在四舍五入。0 只能在小于 0.5 时四舍五入。但是，如果它在 0.5 和 1.5 之间，则可以选择 1。因此，给它两倍的发生机会。同样的事情发生在 2 上，介于 1.5 和 2.5 之间。而 3 只是从 2.5 到 3。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T06:30:49.107

```
class Math {
    ...
    public static long round(double a) {
       return (long)floor(a + 0.5d);
    }
    ...
} 
```

击中1和2的概率更大

```
int t = (int)(Math.ceil((Math.random() * 4))) - 1; 
```

使用 ceil 而不是 round 可以提供更好的分布：

```
250
239
242
269 
```

# python - 需要超过 1 个值才能解压

> ID：15318969
> 
> 赞同：-4
> 
> 时间：2013-03-10T04:38:56.770
> 
> 标签：python

```
movies = defaultdict(int)
for line in open('trial.txt', "r"):
    user,movie,rating,time = line.rstrip('\n').split('::')
    movies[movie] += 1 
```

* * *

对于以下行，总是会出现我不明白的错误：

```
user, movie, rating,time = line.rstrip('\n').split('::')
ValueError: need more than 1 value to unpack 
```

我总是可以打印出这条线，它真的有 4 个部分有什么问题？谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:47:52.660

您的文件中似乎有空行。您必须跳过它们以避免此错误，或者至少检查要解压缩的值的数量是否正确：

```
movies = defaultdict(int)
for line in open('trial.txt', "r"):
    values = line.rstrip('\n').split('::')
    if len(values) == 4:
        user,movie,rating,time = values
        movies[movie] += 1
    else:
        print "Non-valid format: %s" % line 
```

# c++ - 如何将“排序”程序的输出从子级重定向到父级

> ID：15318971
> 
> 赞同：1
> 
> 时间：2013-03-10T04:39:29.890
> 
> 标签：c++, c

我想要做的是使用 pipe1 从父级向子级发送随机数。然后子进程执行`sort`程序对这些数字进行排序并使用 pipe2 发送回父进程。现在，如果我注释掉“if(pipe2In >= 0){ dup2(pipe2In, 1); close(pipe2In);}”，我可以从标准输出中获得正确的排序结果，但我无法从父级的 pipe2 中读取它们，如下所示. 实际上，读取调用无法返回。我错过了什么吗？感谢任何帮助。

```
const int READ = 0, WRITE = 1;
{
pid_t pid;
int pipe1[2], pipe2[2];

if ( pipe(pipe1) ) 
{
    cerr << "Error! Pipe 1 Failed. errno = "<< errno << endl;
    exit(1);
}

int pipe1In = pipe1[WRITE];
int pipe1Out = pipe1[READ];

if ( pipe(pipe2) ) 
{
    cerr << "Error! Pipe 2 Failed. errno = "<< errno << endl;
    exit(1);
}
int pipe2In = pipe2[WRITE];
int pipe2Out = pipe2[READ];

pid = fork();
if( pid < 0 )
{
    cerr << "Error! Fork Failed!\n";
    exit( 1 );
}
else if ( pid == 0 ) // child
{
    close(pipe1In);
    close(pipe2Out);

    if( pipe1Out >= 0 )
    {
        dup2( pipe1Out, 0 );
        close(pipe1Out);
    }
    if( pipe2In >= 0)
        {
            dup2(pipe2In, 1);
        close(pipe2In);
    }

    execlp("sort", "sort", "-nr", (char *)NULL);
    cerr << "Error - Exec Failed!\n";
    exit( -2 );
} // end of child

close(pipe1Out);         // parent continues from here
close(pipe2In);

// generate random numbers
int rn, tem, i, len;
for (i = 0; i < nWks; i++)
{
    rn = rand();
    tem = rn;
    len = 1;
    while (tem /= 10) len++;
    char *bufWrite = (char *) malloc(len+1);
        sprintf(bufWrite, "%d\n", rn);
    write(pipe1In, bufWrite, len+1);
}
char bufRead[1024];
int n;
while ( n = read(pipe2Out, bufRead, sizeof(bufRead)) != 0)
{
    printf("read count %d\n", n);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T05:10:38.930

`sort`直到它`EOF`在其输入流上接收到一个才给出任何输出。要触发它，在您的父进程中，您应该`close(pipe1In);`在读取循环之前。

# asp.net-web-api - WebAPI、oData 和 RavenDb - 为 $top 和 $skip 引发错误

> ID：15318977
> 
> 赞同：5
> 
> 时间：2013-03-10T04:40:25.433
> 
> 标签：asp.net-web-api, ravendb, odata

我正在使用 WebAPI 从 RavenDb 返回基本供应商对象的集合

供应商类是：

```
public class Supplier
{
    public string Id { get; set; }
    public string Title { get; set; }
} 
```

WebAPI 方法是：

```
[Queryable]
public IQueryable<Supplier> Get()
{
    using (var session = _store.OpenSession())
    {
        return session.Query<Supplier>();
    }
} 
```

当我打电话`http://localhost:8083/api/suppliers?$orderby=Id%20desc`或`http://localhost:8083/api/suppliers?$filter=Title%20eq%20'Test'` 一切正常。但是，每当我使用 $top 或 $skip 时，都会出现异常：

**无法将“System.Linq.Expressions.PropertyExpression”类型的对象转换为“System.Linq.Expressions.ConstantExpression”类型。**

如果我使用 ToList() 将整个集合返回到内存中，它可以正常工作，因此它看起来像是使用 RavenDb 延迟执行查询的问题。

我正在使用 RavenDb.Client 2.0.2.2261 的最新稳定版本。

有没有其他人遇到过这个问题或有解决方案？

堆栈跟踪是：

```
 at Raven.Client.Linq.RavenQueryProviderProcessor`1.VisitQueryableMethodCall(MethodCallExpression expression) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryProviderProcessor.cs:line 994
   at Raven.Client.Linq.RavenQueryProviderProcessor`1.VisitMethodCall(MethodCallExpression expression, Boolean negated) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryProviderProcessor.cs:line 693
   at Raven.Client.Linq.RavenQueryProviderProcessor`1.VisitExpression(Expression expression) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryProviderProcessor.cs:line 140
   at Raven.Client.Linq.RavenQueryProviderProcessor`1.GetLuceneQueryFor(Expression expression) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryProviderProcessor.cs:line 1318
   at Raven.Client.Linq.RavenQueryProviderProcessor`1.Execute(Expression expression) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryProviderProcessor.cs:line 1352
   at Raven.Client.Linq.RavenQueryProvider`1.Execute(Expression expression) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryProvider.cs:line 135
   at Raven.Client.Linq.RavenQueryProvider`1.System.Linq.IQueryProvider.Execute(Expression expression) in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryProvider.cs:line 190
   at Raven.Client.Linq.RavenQueryInspector`1.GetEnumerator() in c:\Builds\RavenDB-Stable\Raven.Client.Lightweight\Linq\RavenQueryInspector.cs:line 99
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Newtonsoft.Json.Serialization.JsonArrayContract.CreateWrapper(Object list)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value)
   at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value)
   at Newtonsoft.Json.JsonSerializer.Serialize(JsonWriter jsonWriter, Object value)
   at System.Net.Http.Formatting.JsonMediaTypeFormatter.<>c__DisplayClassd.<WriteToStreamAsync>b__c()
   at System.Threading.Tasks.TaskHelpers.RunSynchronously(Action action, CancellationToken token) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T05:23:11.963

我能够重现您的问题，并成功地验证了我最初的猜测，即可能出了什么问题。尝试`[Queryable(EnableConstantParameterization = false)]`代替普通的`[Queryable]`. 在 OData 开发周期的后期，我们进行了性能更改，以优化使用[LINQ 查询的 EF 自动编译。](http://blogs.msdn.com/b/adonet/archive/2012/02/14/sneak-preview-entity-framework-5-0-performance-improvements.aspx)我们默认启用它，因为它是一个安全的更改。不幸的是，我认为 RavenDB LINQ 提供程序无法理解使用此优化生成的 LINQ 查询。我共享的代码将其关闭并生成 vanilla LINQ 查询。

# gcc - 指的是明显存在的一堆未解决的 OpenSSL 符号的错误？

> ID：15318978
> 
> 赞同：7
> 
> 时间：2013-03-10T04:40:30.980
> 
> 标签：gcc, static-linking, nm

我正在构建一个共享库（我们称之为“foo”），它使用另一个库（我们称之为“bar”）。“bar”利用了 OpenSSL 的一些功能。

这就是问题出现的地方。

“bar”被编译为静态库，OpenSSL 似乎也是如此。因此，当我链接库（“foo”）时，我包括：

*   “foo”的目标文件
*   静态库`libbar.a`
*   OpenSSL 静态库`libcrypto.a`和`libssl.a`

构建命令看起来像这样：

```
g++ -Wl,-soname,libfoo.so -shared file1.o file2.o libbar.a \
  libcrypto.a libssl.a -o libfoo.so 
```

但是，我得到了很多错误：

```
ld: ./obj/libbar.a(file1.c.o): in function initialize_openssl:
  ssl.c:117: error: undefined reference to 'SSL_library_init' 
```

运行以下命令：

```
nm libssl.a | grep SSL_library_init 
```

产生以下输出：

```
00000000 T SSL_library_init 
```

所以显然 OpenSSL 库没有任何问题。什么可能导致这样的事情？以下是用于构建 OpenSSL 的三个命令：

```
export cross=arm-linux-androideabi-
./Configure android --prefix=~/openssl-arm
make CC="${cross}gcc" AR="${cross}ar r" RANLIB="${cross}ranlib" 
```

编译过程完成没有任何错误，所以我完全困惑。

为什么我会收到指向明显存在的一堆 OpenSSL 符号的链接器错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:34:20.670

该问题是由*链接命令中的库顺序引起的。*切换顺序`libcrypto.a`并`libssl.a`解析所有符号。

GCC`LD`默认使用，它是一个单通道链接器。当你有两个库，like`libssl`并`libcrypto`以特定顺序链接时，这意味着`libssl`依赖于`libcrypto`. 因此，`libssl`必须先于`libcrypto`（或`libcrypto`必须跟随`libssl`）。由于提供`libssl`了. _`libcrypto``libcrypto``libssl`

# java - 屏幕左侧 glTranslatef

> ID：15318979
> 
> 赞同：2
> 
> 时间：2013-03-10T04:40:42.527
> 
> 标签：java, android, opengl-es

如果你写`gl.glTranslatef(0, 0, -10.0f);`你的对象出现在中心。我可以将它更改为`gl.glTranslatef(-2.0f, 0, -10.0f);`它会向左移动，但是是否可以自动生成该 x 值，所以它在所有设备的左侧都相同？因为我想如果我写`gl.glTranslatef(-6.0f, 0, -10.0f);`的东西在左边的屏幕上看起来不错，那么在更大或更小的设备上可能都不好。

PS也许我应该得到宽度或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:48:43.290

这取决于您使用的视图类型，例如：

```
GLU.gluPerspective(gl, 67, glGraphics.getWidth()
                / (float) glGraphics.getHeight(), 0.1f, 10f); 
```

并且对于

```
gl.glOrthof(0, WORLD_WIDTH, 0, WORLD_HEIGHT, 1, -1); 
```

我认为他们将您在其中指定的参数拉伸到相同的每个设备

# ember.js - Emberjs - 如何访问 RC1 中的当前状态或路由名称？

> ID：15318981
> 
> 赞同：6
> 
> 时间：2013-03-10T04:41:03.037
> 
> 标签：ember.js, router

在 RC1 中，如何全局获取 currentstatename 或当前路由名称？

更具体的替代语法： **App.get('router').currentState.name;**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T09:09:15.180

看看这个问题的答案：[Ember App.Router.router.currentState undefined](https://stackoverflow.com/questions/15019212/ember-app-router-router-currentstate-undefined/15020704#15020704)

简短的回答：当前状态存储在名为“currentPath”的 ApplicationController 中。

# applescript - 一键调用键盘快捷键

> ID：15318982
> 
> 赞同：0
> 
> 时间：2013-03-10T04:41:09.683
> 
> 标签：applescript, case, systemevent

我在我的 Mac 上创建了三个键盘快捷键，可以在任何应用程序中使用右键单击菜单项：

选择文本时：

大写是`Ctrl+C`

使小写是`Ctrl+L`

使大写是`Ctrl+U`

有道理，但现在已经布置好了，我想创建一个 Applescript 来只用`CAPS`键调用这些快捷方式。

我想要的是：

选择文本时：

双击`CAPS`调用`Ctrl+C`

如果文本是 UC 单击`CAPS`调用`Ctrl+L`

如果文本是 LC 单击`CAPS`调用`Ctrl+U`

否则`CAPS`正常工作。

有没有办法做到这一点？键盘设置不允许我`CAPS`用作热键/快捷方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:39:16.400

我认为这将很难，如果不是不可能做到的话。我过去写过 Applescripts 来检测大写锁定或锁定。（[例如这样](http://hints.macworld.com/article.php?story=20080202094656148)）但它们的设置很笨重。并要求其他组件运行，然后即使我在 Objective-C 中使用或编写了应用程序，也意味着必须运行第三方应用程序。

最简单的解决方案是使用您的功能键。您可以使用其中三个，每个一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:45:35.963

您可以使用[PCKeyboardHack](http://pqrs.org/macosx/keyremap4macbook/pckeyboardhack.html.en)将大写锁定更改为另一个键（如 F19），然后在 KeyRemap4MacBook中的[private.xml](http://pqrs.org/macosx/keyremap4macbook/xml.html.en)中添加类似这样的内容：

`<autogen>__DoublePressModifier__ KeyCode::F19, KeyCode::F19, KeyCode::F19, ModifierFlag::COMMAND_L</autogen>`

或持有钥匙：

`<autogen>__HoldingKeyToKey__ KeyCode::F19, KeyCode::F19, KeyCode::VK_NONE, KeyCode::F19, ModifierFlag::COMMAND_L, Option::NOREPEAT</autogen>`

您可以使用 Automator 创建用于转换为小写/大写的服务。检查输出替换选定的文本并添加一个运行 shell 脚本操作，如下所示：

```
export LC_CTYPE=UTF-8
input=$(cat)
grep -q [[:upper:]] <<< "$input" && \
printf %s "$input" | tr [[:upper:]] [[:lower:]] || \
printf %s "$input" | tr [[:lower:]] [[:upper:]] 
```

您可以在“系统偏好设置”中为其设置一个快捷方式（如 ⌘F19）。

Automator 默认使用 C 语言环境，因此没有 LC_CTYPE=UTF-8 字符类将仅包含 ASCII 字符。

# ios - IOS同步音乐流媒体

> ID：15318983
> 
> 赞同：2
> 
> 时间：2013-03-10T04:41:18.873
> 
> 标签：ios, stream, real-time, core-audio, sync

我正在尝试通过 GKSession 将音乐从一台设备流式传输到另一台设备，以使音乐完全同步。到目前为止，我知道如何使用[它](https://github.com/abbood/audioSamplingToAudioQueue)来获取音频，但我不确定一些事情。我很确定我必须使用 AudioFileReadPackets 来传输数据。

1.  我应该如何将内存缓冲区中的数据包数据打包并作为流发送？
2.  另一方面，如何将接收到的数据包转换回音频流？
3.  确保数据包同步播放的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T06:48:08.450

**重要更新：** 我刚刚在 github 上创建了一个[repo](https://github.com/abbood/audioSamplingToAudioQueue)，它几乎可以满足您的要求。一探究竟！

以下是我的旧答案：

1.  一个。首先你想从你的音乐中获取音频缓冲区数据，类似于我在 github 项目中所做的。

    湾。您想要获取这些数据并将其分成数据包，每个数据包都包含标头信息，您稍后将使用这些信息来管理它们的传递并确保它们被同步。因此，例如每个数据包的时间戳、它的顺序、音乐文件哈希等。看到[这个](https://stackoverflow.com/questions/14687963/how-do-i-stream-avasset-audio-wirelessly-form-one-ios-device-to-another/14691887#14691887)答案以获得一个想法，然后看看[这个](http://www.raywenderlich.com/12910/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-3)优秀的教程，它详细向你展示了如何打包一个数据包任何目的。

2.  在网络的另一端，您以与打包非常相似的方式解包数据包。再次参考上面详细讨论如何做到这一点的教程。

3.  这是最难的部分。幸运的是，您只处理两个设备..所以您可以使用 GKSession 来完成.. 否则您将不得不降低一个级别（即使用 bonjour.. 至尊 GKSession 是...的包装器，这会增加很多开销你买不起实时应用程序..但不要惊慌..[这](http://www.apress.com/mobile/ios/9781430229223)本书有一个很好的简单例子来使用 bonjour..)

这个想法是你想在另一端收集足够的数据包来填充音频队列缓冲区，然后你想发送一个不可靠的数据包（读取：udp 协议）来开始播放音乐。使用 udp 发送，它几乎是即时交付的（我认为人耳不会区分两个设备之间的延迟）.. 偶尔会丢失一个不可靠的数据包.. 所以你必须要么活着用它或想办法处理它。

最后但并非最不重要的一点是，您肯定想获取一份[学习核心音频](https://rads.stackoverflow.com/amzn/click/com/0321636848)的副本.. 任何在 iOS 中做核心音频的人都需要这个。还请查看[此](https://stackoverflow.com/a/12454761/766570)答案之后的讨论。当涉及到核心音频/实时 iOS 应用程序时，它将使您注意许多要处理的事情。

祝你好运！

# twitter-bootstrap - 编译 Twitter bootstrap 3 文档（如何）？

> ID：15318984
> 
> 赞同：21
> 
> 时间：2013-03-10T04:41:19.577
> 
> 标签：twitter-bootstrap, makefile, twitter-bootstrap-3

我正在尝试编译 bootstrap 3。我在本地克隆了 repo。我在引导目录中运行 make 。

```
aaas-imac:bootstrap aaa$ make

Building Bootstrap...
--------------------------------------------------
Running JSHint on JavaScript...             ✔ Done
Compiling LESS with Recess...               ✔ Done
Prepping documentation assets...            ✔ Done
Compiling and minifying JavaScript...       ✔ Done
--------------------------------------------------
Success!

Thanks for using Bootstrap,
<3 @mdo and @fat

aaas-imac:bootstrap aaa$ 
```

我在任何地方都看不到已编译的文档？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-01T12:45:29.313

要安装 Jekyll 并构建：（Windows 的注意事项参见：[https](https://stackoverflow.com/a/16853614/1596547) ://stackoverflow.com/a/16853614/1596547 ）

1.  安装 ruby​​gems (sudo `apt-get install rubygems`)
2.  (须藤)`gem install jekyll`
3.  ~~转到`./docs`引导安装的目录（另请参阅：[探索和安装 Twitter Bootstrap 3](http://bassjobsen.weblogs.fm/explore-and-install-twitter-bootstrap-3/)）~~
4.  `jekyll --server`从您的引导目录运行
5.  `http://localhost:9001/` ~~`http://localhost:9001/docs.html`~~在您的浏览器中访问

注意 WEBrick 的默认端口为 9001。如果此端口不可用，将使用其他端口：`WARN TCPServer Error: Address already in use - bind(2) INFO WEBrick::HTTPServer#start: pid=30728 port=4000`

当您访问时，`http://localhost:9001/`您会发现一个主屏幕。~~当文档位于 docs.html 时，“查看文档”按钮链接到 /docs/~~见下文：

![Twitter 的 Bootstrap 3.0.0 文档](../Images/303a2f878ed876bcf108100e2640f9f3.png)

~~现在（2013 年 7 月 10 日）导航栏链接似乎已损坏（缺少 .html），因此请使用`http://localhost:9001/javascript.html`. `http://localhost:9001/javascript`另见：[https ://github.com/twitter/bootstrap/pull/8443](https://github.com/twitter/bootstrap/pull/8443)~~

**使用 git**（已安装 jekyll）：

```
git clone --branch 3.0.0-wip git://github.com/twitter/bootstrap.git
cd bootstrap
jekyll --server 
```

参观`http://localhost:9001/`或`http://localhost:4000/`

**更新** [@lee-whitney](https://stackoverflow.com/users/700206/lee-whitney)建议使用`jekyll serve`而不是`jekyll --server`. 该`jekyll serve`命令使用文档的 html 文件创建一个目录。您可以在（本地）网络服务器上提供这些文件。`jekyll serve`不要启动（jekyll）服务器。我用 Jekyll 0.12.1 在 linux (Ubuntu 12.04LTS) 上测试这个命令

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-10T12:23:30.213

Bootstrap 3.0 的文档是使用[Jekyll](http://jekyllrb.com/)构建的。要在本地查看文档，您需要[安装 Jekyll](http://jekyllrb.com/docs/installation/)以运行本地服务器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-31T09:03:02.580

在 Windows 中（经过我对 linux 不确定的完美测试）：

> Step1：下载Bootstrap3：github.com/twitter/bootstrap/archive/3.0.0-wip.zip
> Step2：下载Ruby：[点击这里](http://rubyforge.org/frs/download.php/76955/rubyinstaller-2.0.0-p195.exe)
> Step3：下载Devkit：[点击这里](https://github.com/downloads/oneclick/rubyinstaller/DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe)并解压到某个目录。
> Step4 : 通过 ruby​​ 终端进入 devkit 目录并执行以下命令

```
ruby dk.rb init
ruby dk.rb install
gem install jekyll --version '= 0.11.0' 
```

版本步骤非常关键，因为我无法在最新版本的 jekyll 中编译文档，所以我切换到旧版本。

> 第 5 步：转到引导程序目录的根目录 第
> 6 步：运行 jekyll --server第 7 步：
> 在浏览器中访问 localhost:9001/ 或 localhost:4000/ （其中一个肯定可以工作）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-22T00:32:03.123

我尝试了 Abhishek 的方法，它确实有效。但不完全。我仍然遇到一些流体错误。

所以我做了很多挖掘并找到了解决方案。编译 Bootstrap 3 比 2.3.2 更烦人

执行以下操作以编译并使其运行。

1.  获取 Bootstrap 3 主 zip

2.  获取 Ruby 1.9.3

3.  获取 DevKit

4.  安装 Python 2.7 并使用 python 目录更新 PATH 环境变量

5.  获取 Bootstrap 的 GitHUb 页面上提到的 Jekyll 1.x。

    通过 ruby​​ 终端进入 devkit 目录并执行以下命令

    > ruby dk.rb 初始化
    > ruby​​ dk.rb 安装
    > gem 安装jekyll

6.  卸载 pygments 0.5.2 并安装 pygments 0.5.0

    > gem 卸载 pygments.rb --version "=0.5.2"
    > gem install pygments.rb --version "=0.5.0"

7.  转到终端中提取的引导程序源的根目录并运行以下命令

    > chcp 65001
    > 杰基尔发球

现在浏览到 localhost:9001 并在那里，您应该会看到本地托管的文档。

> **注意**：*编译后，您无需每次都运行 jekyll serve 命令即可访问这些页面。只需像打开任何本地保存的网页一样打开 html 页面。*
> 
> *此外，请随意删除提取的 DevKit 文件，因为您不会再次使用它们来查看文档。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-30T15:24:01.667

这是压缩的文档，除了阅读之外不需要做任何事情。完整的可下载 Bootstrap 3 文档。

[http://web3canvas.com/item/bootstrap-3-docs/](http://web3canvas.com/item/bootstrap-3-docs/)

享受！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-16T14:12:27.853

这是完整的解决方案

要安装 Jekyll、Rouge 并构建：

如果你没有安装 ruby​​ - [http://jekyll-windows.juthilo.com/2-jekyll-gem/](http://jekyll-windows.juthilo.com/2-jekyll-gem/)

1.  从命令提示符，cd 进入您的引导文件夹
2.  运行`npm install`- 如果遇到问题，请执行`npm update`
3.  如果 jekyll 没有安装，运行`gem install jekyll`
4.  然后运行`gem install rouge`
5.  `jekyll server`从您的引导文件夹运行
6.  访问[http://localhost:9001/](http://localhost:9001/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-19T11:31:56.917

`Update: For Bootstrap version 3.3.4`

为了在`Twitter Bootstrap(v3.3.4)`本地运行文档，我执行了以下步骤，希望它可以帮助其他人。

**脚步：**

*   `gem install jekyll`（需要`Ruby`，`Rubygems`安装）
*   `git clone --branch gh-pages git://github.com/twitter/bootstrap.git`

    （现在`gh-pages`分支包含所有文档的东西）

*   `cd bootstrap`
*   `jekyll serve`
*   访问`http://127.0.0.1:4000/`默认服务器 url

# java - 从一个jsp获取价值到另一个jsp

> ID：15318986
> 
> 赞同：1
> 
> 时间：2013-03-10T04:41:21.027
> 
> 标签：java, jsp

我开发了简单的 Web 应用程序。在一个 jsp 中，我使用 getattribute 和 set 属性从先前的 servlet 文件中获取值。我得到了这些值。但现在我想要从当前 jsp 到另一个 jsp 文件的值。使用我使用的 getattribute 和 setattribute，但值应显示为 null。

第一个jsp文件：

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
          <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
             "http://www.w3.org/TR/html4/loose.dtd">
           <%@ page import="javax.servlet.http.*" %>

           <html>
           <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
        </head>
        <body>
    <form action="payment.jsp" method="POST">
        <h1>Confirmation</h1>
        <% 
                Integer amount=(Integer)request.getAttribute("amt");   
               String service=(String )request.getAttribute("service");
               String month=(String )request.getAttribute("month");
                Integer day=(Integer)request.getAttribute("day");   
                  String time=(String)request.getAttribute("time");
                  String city=(String)request.getAttribute("city");
                  out.println("<center>");
                  out.println("<table><tr>");
                  out.println("<td><h2>Service:"+service+"</td></tr>");
                  out.println("<tr><td><h2>Month:"+month+"</td></tr>");
                  out.println("<tr><td><h2>Date:"+day+"</td></tr>");
                  out.println("<tr><td><h2>Time:"+time+"</td></tr>");
                  out.println("<tr><td><h2>City:"+city+"</td></tr>");
                   out.println("<tr><td><h2>Total Amount:Rs."+amount+"</td></tr>");                      
                  out.println("</center>");
                  request.setAttribute("amt",amount);

        %>

        <center>
            <input type="submit" value="Confirm"></input>
        </center>

    </form>
         </body>
       </html> 
```

付款.jsp：

```
 <html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body>
    <h2>Select bank</h2>
    <%!Integer money;%>
    <%
    if(request.getAttribute("amt")!=null)
        {
    money=(Integer) request.getAttribute("amt");
    out.println(""+money);
    }
    %>
        </body>
         </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:51:10.550

`payment.jsp`在 HTML 隐藏控件中设置您想要访问的任何值，如下所示：-

```
<form action="payment.jsp" method="POST">
    <input type="hidden" name="amt" value="<%= amount%>" />
</form> 
```

JSP 中的请求对象只跨越一个 HTTP 请求。因此，当您将请求转发到您的第一个 JSP 文件时，它是一个请求。但是当您提交表单并`payment.jsp`加载时，请求对象会被清除，因为它是对服务器的新 HTTP 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T06:40:30.830

您可以使用`session`而不是`request`隐式对象。

```
<html>
               <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
            </head>
            <body>
        <form action="payment.jsp" method="POST">
            <h1>Confirmation</h1>
            <% 
                    Integer amount=(Integer)request.getAttribute("amt");   
                   String service=(String )request.getAttribute("service");
                   String month=(String )request.getAttribute("month");
                    Integer day=(Integer)request.getAttribute("day");   
                      String time=(String)request.getAttribute("time");
                      String city=(String)request.getAttribute("city");
                      out.println("<center>");
                      out.println("<table><tr>");
                      out.println("<td><h2>Service:"+service+"</td></tr>");
                      out.println("<tr><td><h2>Month:"+month+"</td></tr>");
                      out.println("<tr><td><h2>Date:"+day+"</td></tr>");
                      out.println("<tr><td><h2>Time:"+time+"</td></tr>");
                      out.println("<tr><td><h2>City:"+city+"</td></tr>");
                       out.println("<tr><td><h2>Total Amount:Rs."+amount+"</td></tr>");                      
                      out.println("</center>");
                      session.setAttribute("amt",amount);//Changed to session

            %>

            <center>
                <input type="submit" value="Confirm"></input>
            </center>

        </form>
             </body>
           </html> 
```

付款.jsp：

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body>
    <h2>Select bank</h2>
    <%!Integer money;%>
    <%
    if(session.getAttribute("amt")!=null)//changed to session
        {
    money=(Integer) session.getAttribute("amt");//changed to session
    out.println(""+money);
     session.removeAttribute("amt");
    }
    %>
        </body>
         </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-22T13:55:17.707

为了访问您在第一个 jsp 中设置的值，您最好以这种方式使用 session 放置值。`request.getSeession.setAttribute("amount",amount);` 然后在第二个jsp中像这样访问它

```
<form>
 <input type="hidden" value="<%=session.getAttribute("amount")%>"/>
 <form> 
```

我希望它能解决你的问题

# c# - 检索 Google 通讯录始终会忽略自定义字段

> ID：15318989
> 
> 赞同：1
> 
> 时间：2013-03-10T04:41:31.263
> 
> 标签：c#, .net, api, contacts

我有一堆 Google 联系人，并且我已经为其中的大多数添加了自定义字段（使用标准的 Google Web 界面）。当我使用以下代码将联系人检索到我的 C# 程序中时，联系人都被下载，但我似乎无法在任何地方找到自定义字段数据。我期待在 ExtendedProperties 集合中找到它，但它总是包含零项。这是我的代码，假设一个正确的用户名和密码字符串：

```
using Google.Contacts;
using Google.GData.Contacts;
using Google.GData.Client;
using Google.GData.Extensions;

...

RequestSettings settings;
ContactsRequest cr;

settings = new RequestSettings("GoogleContactsUtility", accountName, accountPassword);
settings.AutoPaging = true;
cr = new ContactsRequest(settings);

Feed<Contact> f = cr.GetContacts();

foreach (Contact entry in f.Entries)
    // entry.ExtendedProperties is always empty! 
```

请记住，此代码是成功构建和运行的程序的片段，并检索我的所有联系人以便我可以在标准字段中获取，我做错了什么我无法检索自定义字段？

# c# - 在 MVC 3 中存储额外用户信息的简单方法？

> ID：15318990
> 
> 赞同：1
> 
> 时间：2013-03-10T04:41:54.957
> 
> 标签：c#, asp.net-mvc-3, registration

第一次使用 ASP.NET MVC 3 并真正努力做应该非常简单的事情。

我正在使用内置的会员功能注册用户，但我也想存储他们的名字和姓氏，这不是默认提供的属性。

我无法弄清楚如何将这些属性添加到 MembershipUser 类（如果那是正确的类，那么很难真正弄清楚这里发生了什么）。我还尝试创建一个新的“UserDetails”模型，但无法弄清楚如何使用 UserID 作为外键将其链接到常规用户表。

使用 Code First 方法在 ASP.NET MVC 3 Web 应用程序中存储额外用户信息的正确方法是什么？我一定是在这里做错了什么，因为这必须很简单。我看到关于自定义配置文件提供程序的东西对于这样的基本功能来说似乎太过分了。

谁能指出我正确的方向？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:40:17.353

这不是特定于 MVC 的答案，但 ASP.Net 成员资格提供程序是为简单的授权方案而设计的，并且不附加其他信息。[根据有关此的 MSDN 文档](http://msdn.microsoft.com/en-us/library/yh26yfzy%28v=vs.98%29.aspx)：“会员资格还可以与用户配置文件属性集成，以提供可针对单个用户量身定制的特定于应用程序的定制。”

您需要[创建一个包含 first 和 last name 属性的配置文件模式](http://msdn.microsoft.com/en-us/library/d8b58y5d%28v=vs.100%29.aspx)，可能是这样的：

```
<profile defaultProvider="AspNetSqlProfileProvider">
  <properties>
     <add name="FirstName" type="System.String" />
     <add name="LastName" type="System.String" />
  </properties>
</profile> 
```

然后您可以[从 HTTP 上下文 User 属性](http://msdn.microsoft.com/en-us/library/ewfkf772%28v=vs.100%29.aspx)中引用他们的配置文件详细信息。

另请参阅[演练：使用配置文件属性维护网站用户信息](http://msdn.microsoft.com/en-us/library/taab950e%28v=vs.100%29.aspx)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:04:05.530

您需要在`RegisterModel`下面添加这些属性：

```
 public class RegisterModel
    {
        [Required]
        [Display(Name = "User name")]
        public string UserName { get; set; }

        [Required]
        [DataType(DataType.EmailAddress)]
        [Display(Name = "Email address")]
        public string Email { get; set; }

        [Required]
        [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
        [DataType(DataType.Password)]
        [Display(Name = "Password")]
        public string Password { get; set; }

        [DataType(DataType.Password)]
        [Display(Name = "Confirm password")]
        [System.Web.Mvc.Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
        public string ConfirmPassword { get; set; }
       //Put annotatons as needed
        public string FirstName {get;set;}
        public string LastName {get;set;}
    } 
```

在此之后，您需要使用`Register`in 方法将这些详细信息放入数据库中`AccountController`。这可以通过`UserId`从数据库中获取`Membership`并将额外的详细信息放在与此完全不同的表中来管理。该`UserId`表可以如下所示：

```
public class ExtendedUser
{
    [Key]
    public Guid UserId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

因此`Register`，您的方法已`[HttpPost]`对以下内容进行了注释，以将数据存储在上表中。

```
[HttpPost]

public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
        // Attempt to register the user
        MembershipCreateStatus createStatus;
        Membership.CreateUser(model.UserName, model.Password, model.Email, null, null, true, null, out createStatus);

        if (createStatus == MembershipCreateStatus.Success)
        {
            FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
           //Get UserId for registered user
            var UserId = (Guid)Membership.GetUser(model.UserName).ProviderUserKey;
            ExtendedUser extrainfo = new ExtendedUser();
            extrainfo.UserId = UserId;
            extrainfo.FirstName= model.FirstName;
            extrainfo.LastName= model.LastName;
            //Add this info to database
            db.ExtendedUsers.Add(extrainfo);
            db.SaveChanges();
            return RedirectToAction("Index", "Home");
        }
        else
        {
            ModelState.AddModelError("", ErrorCodeToString(createStatus));
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

当然，您需要将这个新表添加到从类继承的`DbContext`类中，如下所示：

```
 public class YourContext: DbContext
    {
        public DbSet<ExtendedUser> ExtendedUsers{ get; set; }
    } 
```

嘘……你就完了。

**编辑 ：**

[微软在How to: Implement a Custom Membership User](http://msdn.microsoft.com/en-us/library/ms366730.aspx)中以不同的方式做到了这一点，但他们在那里遗漏了一些东西。但是你可以看看它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T05:30:10.600

老实说，我不会使用默认`Membership`工具，因为数据库架构几乎完全由 BLOB 字段组成，并且默认提供程序假定您想要使用它们嵌入的 ADO 逻辑。既然您提到了 Code First，我假设您正在（或想要）使用实体框架。`Membership`编写一个可以利用 EF（或任何其他数据访问工具，就此而言）的自定义提供程序并不难。

如果您需要指导，您可以在此处找到我用于个人网站`Membership`和提供者的实现： [https](https://github.com/tiesont/Monkey.CMS/tree/master/Monkey.Web/Core/Providers) ://github.com/tiesont/Monkey.CMS/tree/master/Monkey.Web/Core/Providers - 和是的，自定义提供程序是多余的，因为您可以通过我的实现看到大多数抽象基类方法不需要实现即可获得工作提供程序。`Role`

# asp.net-mvc - 如何刷新 Kendo UI 组合框？

> ID：15318992
> 
> 赞同：6
> 
> 时间：2013-03-10T04:42:25.243
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid, kendo-combobox, kendo-asp.net-mvc

我有一个 ASP.Net MVC Kendo UI 组合框，它数据绑定到具有 1000 条记录的表。我已将 MinLength 属性设置为 5，因此我只返回相关结果。问题是，用户可能需要一起更改文本值。有没有办法告诉控件刷新？

这是控件的代码...

```
@(Html.Kendo().ComboBoxFor(x => x.Product)
                    .Name("Product")
                    .DataTextField("Name") // Display value
                    .DataValueField("Id") //Return value
                    .MinLength(5)
                    .AutoBind(false)
                    .Suggest(true)
                    .Filter(FilterType.Contains)
                    .DataSource(source =>
                    {
                        source.Read(read =>
                        {
                            read.Action("Products", "Home").Data("onGetProducts");
                        });
                    })
                ) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-23T15:17:33.137

如果我了解您正在努力解决的问题：只需从您需要的任何地方再次调用 read 操作：

```
$("#Product").data("kendoComboBox").dataSource.read(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T05:02:43.410

我认为使用包装器您无法刷新，但获得结果的更好方法是[Kendo](http://www.kendoui.com/forums.aspx) fromum，您可以使用这个[问题](http://www.kendoui.com/forums/ui/combobox/can-t-refresh-reload-data-combobox.aspx)：

正如文档中所述，小部件的[刷新](http://docs.kendoui.com/api/web/dropdownlist#refresh)方法不会[重新加载](http://docs.kendoui.com/api/framework/datasource#read)数据源的数据。要重新加载数据，请使用 dataSource 的 read 方法。

# c - 如何在 C 结构中搜索成员并打印所有成员？

> ID：15318993
> 
> 赞同：0
> 
> 时间：2013-03-10T04:42:35.737
> 
> 标签：c

我们被要求用 c 编写一个特定的程序，使用户能够

*   添加学生
*   查看所有学生
*   搜索学生并退出

使用结构。该程序应该像学生的门户一样。我有这个“暂定代码”，在编译时会打印出分段错误（核心转储）的错误。所以这就是我的代码的运行方式：

```
#include<stdio.h>

typedef struct tag1{
    int day, year, month;
}Date;

typedef struct tag2{
    int number;
    char name[50];
    char course[30];
    Date birthday;
}Record;

main(){
    int choice, n, i=0;
    Record student[200];

    //printing of menu:
    printf("Choose from the menu:\n");
    printf("     [1] Add Student\n");
    printf("     [2] Search Student\n");
    printf("     [3] View All\n");
    printf("     [4] Exit\n");
    scanf("%d", &choice);

    if((choice>=1)&&(choice<=4)){
        if(choice==1){

            printf("Enter student number:\n");
            scanf("%d", &student[n].number);    

            printf("Enter the name of the student:\n");     
            scanf("%[^\n]", student[n].name);

            printf("Enter month of birth:\n");
            scanf("%d", &student[n].birthday.month);

            printf("Enter day of birth:\n");
            scanf("%d", &student[n].birthday.day);

            printf("Enter year of birth:\n");
            scanf("%d", &student[n].birthday.year);

            printf("Enter course:\n");
            scanf("%[^\n]", student[n].course);

            n++;
        }
        if(choice==2){
        while(i<n){
            printf("%d\n", student[n].number);
            printf("%s", student[n].name);
            printf("%d/%d/%d", student[n].birthday.month, student[n].birthday.day,student[n].birthday.year);
            printf("%s", student[n].course);
            i++;
            }
        }
        }

    } 
```

我刚刚完成了一半，因为我不知道如何寻找学生。希望您对我改进代码有任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:50:59.870

假设，您使用`i`迭代学生，直到到达第 n 个元素。

所以应该`student[i]`不是`student[n]`

这应该有效：

```
//...

while(i<n){ 

      Record current = student[i]; 

      printf("%d\n", current.number);
      printf("%s", current.name);
      printf("%d/%d/%d", current.birthday.month, 
                   current.birthday.day,
                   current.birthday.year);
      printf("%s", current.course);

      i++;
} 
```

是的，n 应该被初始化为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T04:46:33.620

您忘记了初始化 n（您可能想要 n=0）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T20:41:19.010

**要为学生保密，您可以像这样使用**

```
int sno;
unsigned char flag=0;
printf("Enter student number to search :");
scanf("%d",&sno); 
```

然后将此记录搜索到所有记录，当它与任何记录匹配时，显示该记录。

```
for(i=0;i<n;i++) // where n is maximum number of records
{
     if(student[i].number == sno)
     {
         flag=1;
         /*** print all the member of student[i] ****/
         break;
     }
} // end of for loop
if(0==flag) { printf("\nSorry !!! Record not found with student number : %d\n",sno); } 
```

# linq - EF 生成类上的 LINQ

> ID：15318998
> 
> 赞同：0
> 
> 时间：2013-03-10T04:43:20.790
> 
> 标签：linq, entity-framework, class, generated

我在数据库中的 EF 上有这个类

```
public partial class STUDENT
{
    public short STUDENTID { get; set; }
    public string NAME { get; set; }
    public string FAMILY { get; set; }

    public virtual CLASS CLASS { get; set; }
}

public partial class CLASS
{
    public CLASS()
    {
        this.STUDENTs = new HashSet<STUDENT>();
    }

    public short CLASSID { get; set; }
    public string CLASSNAME { get; set; }

    public virtual ICollection<STUDENT> STUDENTs { get; set; }
}

public partial class VALIDNAMES
{
    public string VALIDNAME { get; set; }
} 
```

我希望强制用户不能在 student.name 上插入该名称不在 VALIDNAMES 记录中的任何数据。我想在模型层中执行此操作，因为我想在许多页面上使用 name 属性，因此我希望在该层上进行此验证。

另一方面，我想在模型层上使用 LINQ，或者是否可以更改设置并获取 EF 生成的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:05:47.553

您可以尝试在 STUDENT 表中引用 VALIDNAMES 表的 VALIDNAME 列的 NAME 列上设置外键约束。

假设您使用的是 SQL Server，您需要对您的数据库执行类似的操作：

```
ALTER TABLE [dbo].[STUDENT]  WITH CHECK ADD  CONSTRAINT [FK_student_valid_name] FOREIGN KEY([NAME])
REFERENCES [dbo].[VALIDNAMES] ([VALIDNAME])
GO 
```

您可能还需要将 [STUDENT].[NAME] 列指定为`NOT NULL`（因此您的用户无法输入`NULL`姓名），并将 [VALIDNAMES].[VALIDNAME] 设置为唯一索引/主键。

这样，验证由 DBMS 而不是您的应用程序代码完成。