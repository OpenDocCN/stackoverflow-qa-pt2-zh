# StackOverflow 问答 14191000-14191999

# css - 当用户单击按钮时，按钮上出现黑色

> ID：14191016
> 
> 赞同：0
> 
> 时间：2013-01-07T06:33:03.223
> 
> 标签：css

我在 iphone 中使用 enyo 按钮....问题是，当我单击导航按钮时，按钮上出现黑色....我不知道它是阴影、边框颜色还是背景颜色。 ...我想删除这个...请帮助我....

```
my code goes here

     .onyx-Button2 {
        outline: 0;
        color: #FFFFFF;
        font-size: 16px;
        text-align: center;
        white-space: nowrap;
        margin: 0;
        padding: 1px 1px;
        overflow: hidden;
        border-radius: 3px;
        /* for IE8 */
        border: 1px solid #777;
        border: 1px solid rgba(15, 15, 15, 0.2);
            /*
        The border and the gradient interact in a strange way that
        causes the bottom-border (top if the gradient is aligned top)
        to be lighter than other borders.
        We can fix it by using the darker bottom border below, but
        then there are a few rogue pixels that end up very dark.
    */ 
        box-shadow: inset 0px 1px 0px rgba(255,255,255,0.2);
        background: #E1E1E1 url(../../images/gradient.png) repeat-x bottom;
        background-size: contain;
        text-overflow: ellipsis;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:21:57.623

它可能归结为 iOS 浏览器中设置的默认值——我将设置所有适当的属性以涵盖所有基础。

所以添加

```
background-color:#ffffff; // Change this to your color you want 
```

我怀疑这只是iOS默认某些CSS的方式，它也可能与它处理图像作为背景的方式有关。不幸的是，虽然 iOS 符合大多数标准，但它在实现某些 CSS 方面有一些奇怪的方式。

# android - javamail api gmail身份验证发生错误

> ID：14191018
> 
> 赞同：1
> 
> 时间：2013-01-07T06:33:06.390
> 
> 标签：android, jakarta-mail

```
E/MailApp(16209): Could not send email
E/MailApp(16209): javax.mail.AuthenticationFailedException
E/MailApp(16209):   at javax.mail.Service.connect(Service.java:319)
E/MailApp(16209):   at javax.mail.Service.connect(Service.java:169)
E/MailApp(16209):   at javax.mail.Service.connect(Service.java:118)
E/MailApp(16209):   at javax.mail.Transport.send0(Transport.java:188)
E/MailApp(16209):   at javax.mail.Transport.send(Transport.java:118)
E/MailApp(16209):   at AlarmSpy.Email.GMailSender.send(GMailSender.java:104)
E/MailApp(16209):   at AlarmSpy.MotionDetectionActivity.Email(MotionDetectionActivity.java:1267)
E/MailApp(16209):   at AlarmSpy.MotionDetectionActivity.access$9(MotionDetectionActivity.java:1247)
E/MailApp(16209):   at AlarmSpy.MotionDetectionActivity$SavePhotoTask.onPostExecute(MotionDetectionActivity.java:1134)
E/MailApp(16209):   at AlarmSpy.MotionDetectionActivity$SavePhotoTask.onPostExecute(MotionDetectionActivity.java:1)
E/MailApp(16209):   at android.os.AsyncTask.finish(AsyncTask.java:602)
E/MailApp(16209):   at android.os.AsyncTask.access$600(AsyncTask.java:156)
E/MailApp(16209):   at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
E/MailApp(16209):   at android.os.Handler.dispatchMessage(Handler.java:99)
E/MailApp(16209):   at android.os.Looper.loop(Looper.java:137)
E/MailApp(16209):   at android.app.ActivityThread.main(ActivityThread.java:4511)
E/MailApp(16209):   at java.lang.reflect.Method.invokeNative(Native Method)
E/MailApp(16209):   at java.lang.reflect.Method.invoke(Method.java:511)
E/MailApp(16209):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
E/MailApp(16209):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
E/MailApp(16209):   at dalvik.system.NativeStart.main(Native Method) 
```

注意：当我使用不同的国家时，它会通过错误。（在登录时显示的浏览器帐户验证页面中）

# mysql - MySQL：每天计算不同的行

> ID：14191021
> 
> 赞同：26
> 
> 时间：2013-01-07T06:33:35.793
> 
> 标签：mysql, sql, time, count

我有一个有趣的问题需要做。我有一个表，其中有一`INT`列包含 IP 地址编号（使用`INET_ATON`）和一`timestamp`列。我希望能够计算每天存在的唯一 IP 地址列的数量。也就是说，每天有多少不同的 ip 行。因此，例如，如果一个 IP 地址在同一天出现两次，则在最终计数中计为 1，但是如果同一 IP 地址在另一天出现，则将对其进行第二次计数。

### 示例数据：

```
PK | FK  | ipNum      | timestamp
11 | 404 | 219395     | 2013-01-06 22:23:56
7  | 404 | 467719     | 2013-01-06 22:23:41
8  | 404 | 4718869    | 2013-01-06 22:23:42
10 | 404 | 16777224   | 2013-01-06 22:23:56
5  | 404 | 1292435475 | 2013-01-06 22:23:25
12 | 404 | 1526990605 | 2013-01-06 22:23:57
6  | 404 | 1594313225 | 2013-01-06 22:23:40
4  | 404 | 1610613001 | 2013-01-06 22:23:23
9  | 404 | 1628635192 | 2013-01-06 22:23:55
1  | 404 | 2130706433 | 2013-01-06 21:29:38
2  | 407 | 2130706433 | 2013-01-06 21:31:59
3  | 407 | 2130706433 | 2013-01-06 21:32:22 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-07T06:37:17.763

```
SELECT  DATE(timestamp) Date, COUNT(DISTINCT ipNum) totalCOunt
FROM    tableName
GROUP   BY  DATE(timestamp) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/11aa6/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-27T23:22:58.293

以下是过去 7 天每天的计数方式：

```
select
    count(*) as count,
    date(timestamp) as date
from
    tablename
where
    timestamp >= date_sub(curdate(), interval 7 day)
group by 
    date;

+-------------+------------+
| count       | date       |
+-------------+------------+
| #forThatDay | 2020-02-21 |
| #forThatDay | 2020-02-22 |
| #forThatDay | 2020-02-22 |
| #forThatDay | 2020-02-23 |
| #forThatDay | 2020-02-24 |
| #forThatDay | 2020-02-25 |
| #forThatDay | 2020-02-26 |
+-------------+------------+
7 rows in set (0.03 sec) 
```

首先按列分组`ipNum`以获得该列每天的不同计数：

```
select
    count(*) as count,
    date(timestamp) as date
from
    tablename
where
    timestamp >= date_sub(curdate(), interval 7 day)
group by 
    ipNum, date; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-01-27T18:36:59.130

```
$log_date     = date('Y-m-d H:i:s');
$log_date     = date('Y-m-d H:i:s', strtotime($log_date.' -1 hour'));
SELECT ipNum, COUNT(ipNum), COUNT(DISTINCT ipNum), DATE(timestamp), timestamp FROM tableName  WHERE `timestamp` > '".$log_date."' GROUP BY ipNum ORDER BY DATE(timestamp) DESC 
```

这会给你一个类似的结果

```
 ip                  TIME               COUNTIPS
11.237.115.30     2018-01-27 19:13:51       1
21.744.133.52     2018-01-27 19:14:03       1
44.628.197.51     2018-01-27 19:48:12       14 
```

# php - 使用 getid3() 插入专辑艺术家标签

> ID：14191024
> 
> 赞同：1
> 
> 时间：2013-01-07T06:33:44.827
> 
> 标签：php, id3, id3v2, getid3

我正在使用 getID3() 库将元数据插入到没有元数据的歌曲中。

我可以插入除专辑艺术家之外的所有标签，这对我来说非常重要。

在 demo.simple.write.php 中，我给出了歌曲的详细信息，如下所示：

```
$TagData = array(
'title'   => array('Emotion'),
'artist'  => array('Priyesh Vakil'),
'album'   => array('Radiance With Ragas Vol. 1'),
'year'    => array('2004'),
'genre'   => array('World Instrumental'),
'comment' => array('excellent!'),
'track'   => array('04/16'),
); 
```

我尝试添加：

```
'album_artist'   => array('Priyesh Vakil') 
```

但它没有在专辑艺术家中插入任何内容。知道如何插入这个吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T09:59:11.823

尝试设置`band`而不是`album_artist`.

# sql - sql查询在特定时间获取大于每天的数据

> ID：14191026
> 
> 赞同：0
> 
> 时间：2013-01-07T06:33:51.910
> 
> 标签：sql, oracle, date-arithmetic, sysdatetime

我想要所有比特定日期时间戳和表 create_datetime 列存在的记录。

运行此查询时，它应该提供大于 create_datetime 的当天的所有记录以及特定的 18:00:00

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:23:30.943

您的问题文本有点切碎，但我认为您希望每条记录的时间元素`create_date`在 18:00 之后。如果是这样，这个查询将得到它。它使用日期格式掩码`SSSSS`，将日期作为午夜后的秒数返回。

```
select * from your_table
where to_number(to_char(create_date, 'SSSSS')) >= (18 * (60*60))
and some_other_date >= trunc(sysdate) 
```

该查询的另一部分是一个疯狂的猜测，因为就像我说的那样，您的问题在翻译中丢失了。我已经为“将其他日期列设置为今天日期的记录”而大吃一惊。

# javascript - 如何动态显示折线图的图例？

> ID：14191032
> 
> 赞同：2
> 
> 时间：2013-01-07T06:34:17.057
> 
> 标签：javascript, html, css, kendo-ui

在我的项目中，图例是动态显示的，但我想显示名称，例如（学生标记、学生评分等）而不是值。这里的值显示为 0 1 2...（而不是 0，我必须显示学生分数）。在这里我无法更改我的服务值，服务值是 0 1 2 .. 任何人都可以帮助我如何使用剑道 ui 代码（javascript）显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T20:02:08.793

隐藏图例并创建自己的图例。如果您自己构建它，您将拥有更多控制权。只是一个建议。

# python - 用于生产和开发的python项目设置

> ID：14191034
> 
> 赞同：0
> 
> 时间：2013-01-07T06:34:29.080
> 
> 标签：python, django

我正在使用 Django 构建项目，我可以为 Django 创建两个设置文件：production_setting.py 和 development_setting.py，但是，我需要为我的项目配置一些配置文件，并且我正在使用 ConfigParser 来解析这些文件。例如

```
[部分]
名称=“发展”
版本 = “1.0”

```

如何将此配置文件拆分为生产和开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:38:19.747

我们通常在 Django 项目中做的是为每个平台（dev、prod 等）创建所有配置文件的版本，并使用符号链接来选择正确的版本。现在 Windows 正确支持链接，这个解决方案适合所有人。

如果您坚持使用另一个配置文件，请尝试将其设置为仅导入正确配置文件的 Python 文件，这样`name="development"`您将拥有类似的东西`execfile('development_settings.py')`

# java - 没有为动作 net.action.RegisterAction 和结果输入定义结果

> ID：14191035
> 
> 赞同：0
> 
> 时间：2013-01-07T06:34:31.517
> 
> 标签：java, struts

```
<s:form action="register.action">
    <fieldset>
        <div class="head">Registration</div>
        <hr>
        <div>
            <label>Name</label>
            <input type="text" name="username"/>
        </div>
        <div>
            <label>User Id</label>
            <input type="text" name="userid"/>
        </div>
        <div>
            <label>Password</label>
            <input type="password" name="password"/>
        </div>
        <div>
            <label>Email</label>
            <input type="text" name="email"/>
        </div>
        <div>
            <label>City</label>
            <input type="text" name="city"/>
        </div>
        <div>
            <label>Locality</label>
            <input type="text" name="Locality"/>
        </div>
        <hr>
        <div class="checkbox">
            <input type="checkbox" class="check"><div class="text">I confirm that I am 18 years or older & eligible to register and post ads</div>
        </div>
        <div class="checkbox1">
            <input type="checkbox" checked="checked" class="check"><div class="text">Uncheck this box, if you do not wish to be intimated about special offers and new features.</div>
        </div>
        <div class="terms">By clicking " Register ", you're agreeing to our <a href="">Terms of Use & Privacy Policy.</a></div>
        <div>
            <button type="reset" id="reset">Reset</button>
            <s:submit value="Register" cssClass="submit-go" />
        </div>
    </fieldset>
</s:form> 
```

* * *

### 注册.java

```
package net.model;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="Register")
public class Register {

@Id
@GeneratedValue(strategy = GenerationType.AUTO)
private int id;
@Column(name="username")
private String username;
@Column(name="userid")
private String userid;
@Column(name="password")
private String password;
@Column(name="email")
private String email;
@Column(name="city")
private String city;
@Column(name="locality")
private String locality;
public Register() {
    super();
    // TODO Auto-generated constructor stub
}
public Register(int id, String username, String userid, String password,
        String email, String city, String locality) {
    super();
    this.id = id;
    this.username = username;
    this.userid = userid;
    this.password = password;
    this.email = email;
    this.city = city;
    this.locality = locality;
}
public int getId() {
    return id;
}
public void setId(int id) {
    this.id = id;
}
public String getUsername() {
    return username;
}
public void setUsername(String username) {
    this.username = username;
}
public String getUserid() {
    return userid;
}
public void setUserid(String userid) {
    this.userid = userid;
}
public String getPassword() {
    return password;
}
public void setPassword(String password) {
    this.password = password;
}
public String getEmail() {
    return email;
}
public void setEmail(String email) {
    this.email = email;
}
public String getCity() {
    return city;
}
public void setCity(String city) {
    this.city = city;
}
public String getLocality() {
    return locality;
}
public void setLocality(String locality) {
    this.locality = locality;
}
} 
```

* * *

### 注册动作类

```
 package net.action;

 import java.util.ArrayList;
 import java.util.List;

 import javax.persistence.Column;

 import net.controller.Manager;
 import net.model.Register;

 import com.opensymphony.xwork2.Action;
 import com.opensymphony.xwork2.ActionSupport;

 public class RegisterAction extends ActionSupport{

/**
 * 
 */
private static final long serialVersionUID = 1L;

private String username;

private String userid;

private String password;

private String email;

private String city;

private String locality;

private List<Register> registerList;

public RegisterAction() {
    super();
    // TODO Auto-generated constructor stub
}

public String getUsername() {
    return username;
}

public void setUsername(String username) {
    this.username = username;
}

public String getUserid() {
    return userid;
}

public void setUserid(String userid) {
    this.userid = userid;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
}

public String getCity() {
    return city;
}

public void setCity(String city) {
    this.city = city;
}

public String getLocality() {
    return locality;
}

public void setLocality(String locality) {
    this.locality = locality;
}

public List<Register> getRegisterList() {
    return registerList;
}

public void setRegisterList(List<Register> registerList) {
    this.registerList = registerList;
}

public String execute() throws Exception {
    Register registerUser = new Register();
    String result = "error";
    List<Register> getUserdetails = new ArrayList<Register>();
    registerUser.setUsername(username);
    registerUser.setUserid(userid);
    registerUser.setPassword(password);
    registerUser.setEmail(email);
    registerUser.setCity(city);
    registerUser.setLocality(locality);

    if(Manager.adduser(registerUser)){
        getUserdetails = Manager.registerlist();
        return Action.SUCCESS;
    }
    return result;
} 
```

## }

### struts.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" 
"http://struts.apache.org/dtds/struts-2.0.dtd"> 
```

```
<constant name="struts.devMode" value="false"/>

 <package name="default" extends="struts-default">

 <action name="postad" method="execute" class="net.action.PostAction" >
        <result name="success" >viewpost.jsp</result>
        <result name="error" >postad.jsp</result>
    </action>

  <action name="register" class="net.action.RegisterAction" method="execute">
    <result name="SUCCESS">home.jsp</result>
    <result name="error">register.jsp</result>
  </action>
 </package> 
```

## 

我正在struts2-Hibernate上做一个示例项目，当我点击提交按钮时，我发现了一个错误

> HTTP 状态 404 - 没有为动作 net.action.RegisterAction 和结果输入定义结果

请帮我？这里有什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T19:04:22.547

首先请原谅我糟糕的英语。在您的 jsp 上，尝试使用定义的 struts 标签而不是 html 元素，struts 标签提供更多信息以防发生错误。还尝试添加标签 actionError 和 actionMessage 以可视化一些错误。

```
<s:form action="register.action">
   <s:textfield name="username" label="Name" />
   <s:textfield name="userid" label="User Id" />
   <s:password name="password" label="Password" />
   <s:submit value="Register" cssClass="submit-go" />
   <s:actionerror label="ERRORS" />
   <s:actionmessage label="MESSAGES" />
</s:form> 
```

> HTTP 状态 404 - 没有为动作 net.action.RegisterAction 和结果输入定义结果

此错误大部分时间由 de Workflow Interceptor 生成，每当在操作执行之前发生验证错误时，要查看此验证错误，请在您的操作上添加名称输入的结果。

```
<action name="register" class="net.action.RegisterAction" method="execute">
  <result name="SUCCESS">home.jsp</result>
  <result name="error">register.jsp</result>
  <result name="input">register.jsp</result>
</action> 
```

# c# - 如何使用 Selenium WebDriver C# 自动创建文本文件并在其中写入异常

> ID：14191037
> 
> 赞同：0
> 
> 时间：2013-01-07T06:34:43.720
> 
> 标签：c#, selenium-webdriver

我在 c# 中使用 selenium web-driver，我想创建一个文本/日志文件并自动在其中写入异常。现在我正在登录页面上进行测试。如果我更改密码，则应将异常写入带有时间戳的文本文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T06:37:47.810

我建议使用 log4net ( [http://logging.apache.org/log4net/](http://logging.apache.org/log4net/) )，它是一个非常简单的日志库。Selenium 对您的日志记录没有任何影响。您可以像往常一样处理异常并将日志记录语句放入 catch 中。

# asp.net-mvc - 获取 Asp.net MVC 路由的正确方法

> ID：14191039
> 
> 赞同：0
> 
> 时间：2013-01-07T06:34:59.943
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我刚开始学习 asp.net mvc 平台，我真的不喜欢在 url 中有 /home/。

有没有什么办法可以为家庭控制器提供一个只有动作和 id 的路由，如果有 3 个动作（索引、关于和联系），url 读取 localhost:1190/ 、 localhost:1190/about 和 localhost:1190/contact .

我知道我可以将它们变成单独的控制器，并且每个控制器都有一个索引视图，但这真的是最好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T06:42:12.893

当然：

```
routes.MapRoute(
    "Default",
    "{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

但请记住，由于控制器名称不再是路由的一部分，因此您不能再指定它 -> 您将始终拥有一个控制器 - `Home`，如果您开始将所有操作放在一个控制器中，它可能会很快变得臃肿。

# java - 为什么在 Java 中使用 [] 创建数组而不是创建数组对象？

> ID：14191041
> 
> 赞同：0
> 
> 时间：2013-01-07T06:35:01.000
> 
> 标签：java, arrays

我试图了解数组在 Java 中是如何工作的。我查看了源代码，并将构造函数设为私有。如果我写如下内容，它是如何工作的：

```
String [] myArray = new String [10]; 
```

它知道这是一个数组，只需加上括号 [ ]?

此外，他们为什么要做到这一点，所以它不会被诸如如何创建 ArrayList 之类的东西实例化？

```
ArrayList<String> myArray = new ArrayList<String>(10); 
```

数组不是对象吗？是什么让它与众不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T06:55:25.063

> 它知道这是一个数组，只需放置括号`[]`?

是的，它就是这样工作的。这是一种用于声明和创建数组（以及访问它们的元素）的特殊语法。

该语言（和 JVM）对数组有特殊的支持（因为它们经常被使用）。除了你找到的括号外，还有一个特殊的 for-each-loop，一种创建数组字面量的语法，数组可用于 vararg 方法参数。

> 数组不是对象吗？

Java 中的数组是对象（甚至是原始类型的数组）。

> 是什么让它与众不同？

没有什么*不*一样的...

除了您可以将数组分配给类型的变量`Object`（并且它们可以是`null`）之外，它们中并没有太多类似对象的东西。例如，虽然它们有诸如 equals 和 toString 之类的方法，但它们的实现可能并不符合您的预期（请参阅 Arrays 类以获得更有用的版本）。您也不能子类化使数组工作的内部“类”。

综上所述，数组是对象，是*特殊*的对象。与 ArrayList 不同，ArrayList 的构建方式与任何其他类一样。您可以在 Java 中创建自己的 Collection，但是要构建自己的数组，您需要构建自己的 JVM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T06:38:59.417

`Arrays`是固定大小的（需要在创建Object时声明大小），所以在运行时我们不能增加Array的大小。

虽然`ArrayList`在运行时动态增长，即使我们在创建时声明 Size。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T06:42:08.897

数组是一个对象，但是数组也可以是基元的，但基元数组仍然是一个对象。

`Furthermore, why did they make it so it isn't instantiated by something like how ArrayList are created?`

ArrayList 使用泛型来允许扩展类型，而泛型不能用于基元。更不用说，泛型出现在 Java 5 中，而数组一直存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T06:44:35.350

Java 数组（用 标记`[]`）是一种特殊的对象。非常喜欢`int`和朋友。`ArrayLists`这些都是功能齐全的课程。有许多不同之处，您会发现封装这些类型的类，以便您可以像普通类一样操作它们。最值得注意的是，您*不能*子类化数组或`int`. 但是你会发现`ArrayList`或者`Integer`如果你想把它们面向对象。

还要注意的是参数化类型，即`ArrayList<String>`表示法，是 Java 的一个相对较新的补充（我认为它出现在 Java 1.5 中，但我可能弄错了）。在此之前，集合将包含`Object`你必须转换回正确的类的 bare。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T08:59:00.250

> 它知道这是一个数组，只需加上括号 [ ]?

是的。

> 此外，他们为什么要做到这一点，所以它不会被诸如如何创建 ArrayList 之类的东西实例化？

因为（a）他们没有和（b）他们为什么要这样做？如果你想知道答案，那你就来错地方了。问吉姆·高斯林。有很多其他语言以相同的方式完成。为什么要特别关注 Java？

> 数组不是对象吗？

是的。

> 是什么让它与众不同？

`[]`语法被特殊处理的事实？有无数种数组类型的事实：（每个原始类型一个，每个可能的类一个）乘以（从 1 到 Integer.MAX_INT 的任意数量的维度）。

# map - 获取结构元素的静态类型

> ID：14191043
> 
> 赞同：4
> 
> 时间：2013-01-07T06:35:07.777
> 
> 标签：map, go, declaration, compile-time, type-declaration

我查看了 Golang 文档，但没有看到如何实现我想要做的事情的示例。具体来说，我正在尝试编写一个从 inode（由 表示`syscall.Stat_t.Ino`，在我的机器上具有类型`uint64`）到 ino_entry 的映射，定义为

```
type ino_entry struct {
    st    *syscall.Stat_t
    nodes []string
} 
```

其中 nodes 表示所有硬链接到 inode 的文件的名称。

但是，如果可以的话，我想避免将文字类型`uint64`放入地图的规范中。也就是说`map [uint64] ino_entry`，我宁愿不写，而是写`map [typeof(syscall.Stat_t.Ino)] ino_entry`，其中`typeof(x)`返回静态（即编译时）类型的`x`. 我已经尝试过`map [syscall.Stat_t.Ino] ino_entry`，并且类似于类型开关，`map [syscall.Stat_t.Ino.(type)] ino_entry`但是这两个都是语法错误。不用说，`map [reflect.Typeof(syscall.Stat_t.Ino)] ino_entry`不起作用。据我所知，在不对结构元素的类型进行硬编码的情况下实现这一点的唯一方法是使用`inomap := make(map [interface{}] ino_entry)`然后使用类型断言访问元素（尽管我不知道正确的语法）。

有没有办法根据另一个变量、结构或接口成员的静态类型来声明变量的类型，而无需显式地对该类型进行硬编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T19:51:50.143

看起来您正在尝试使用反射来确保机器的可移植性。如果是这种情况，您可以使用更好的工具。

`go build`可以处理基于 arch 和 os 的构建的条件文件包含。

因此，为您支持的每个 arch 和 os 组合创建一些文件。在每个文件的顶部添加一些构建约束。

`// +build linux,386`例如将导致 go 命令仅在具有 386 架构的 linux 机器上使用此文件。

然后在该文件中为适合该拱门的类型添加类型别名：`type Ino uint64`

最后将您的地图创建为`map[Ino]ino_entry`.

哇！使用类型别名和条件文件包含的机器可移植性。

您可以在此处阅读有关 go 构建约束的更多信息：http: [//golang.org/pkg/go/build/](http://golang.org/pkg/go/build/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T06:59:44.557

参照。OP中的最后一个问题：是的，有一种方法可以根据任何表达式的类型声明变量的类型，而无需硬拷贝表达式的类型：

```
v := expr // equal to var v typeof(expr); v = expr; 
```

`expr`还包括您提到的大多数实体，即另一个变量，一个类型为“事物”的结构，但*不*包括接口成员（因为规范中没有提到任何成员）。

不幸的是，这与声明映射类型无关，其中/何时使用的*类型文字*为`map[T]U`. 这里两者`T`都`U` *不能*像上面讨论的短变量声明那样被*推断出来*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T06:59:53.093

`Stat_t`对于任何机器都有[相同的定义](http://golang.org/pkg/syscall/#Stat_t)`Ino`，并且它的字段总是`uint64`，所以这应该不是问题。

如果有一个编译时操作符来静态获取这个类型，它必须被很好地隐藏。

但是，您可以定义一个类型别名：`type ino_id uint64`，这对我来说看起来更易读。

# r - 直接将字符对象转换为数据框而不保存

> ID：14191045
> 
> 赞同：2
> 
> 时间：2013-01-07T06:35:18.270
> 
> 标签：r

我有一段脚本如下：

```
temp <- getURL("http://chart.yahoo.com/table.csv?s=^HSI&a=0&b=01&c=1900&d=0&e=07&f=2013&g=d&q=q&y=0&z=^HSI&x=.csv",.opts=opts)
write(temp,file="test.txt")
temp <- read.csv("test.txt") 
```

我讨厌在将其作为数据框再次导入之前将其保存为 txt，我听说过类似的内容`connection`，我可以跳过这个“写入和加载”过程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T06:41:10.527

你可以直接使用函数`read.csv()`来导入这个csv文件

```
temp<-read.csv("http://chart.yahoo.com/table.csv?s=^HSI&a=0&b=01&c=1900&d=0&e=07&f=2013&g=d&q=q&y=0&z=^HSI&x=.csv")
head(temp)
        Date     Open     High      Low    Close     Volume Adj.Close
1 2013-01-04 23370.36 23370.36 23172.28 23331.09 1505752800  23331.09
2 2013-01-03 23390.54 23400.74 23234.43 23398.60 2211207000  23398.60
3 2013-01-02 22860.25 23317.39 22860.25 23311.98 2129252800  23311.98
4 2012-12-31 22584.44 22698.33 22566.89 22656.92  685413000  22656.92
5 2012-12-28 22706.33 22706.33 22628.46 22666.59 1043816200  22666.59
6 2012-12-27 22705.46 22718.83 22608.60 22619.78 1053372600  22619.78 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:13:05.993

另一个答案显示了如何通过提供 read.csv 的 URL 一步完成此操作，从任何文本字符串读取的更一般情况下使用该`textConnection`函数：

```
> data = read.csv(textConnection("A,B,C\n4,5,6\n99,5,4"))
> data
   A B C
1  4 5 6
2 99 5 4 
```

对于您的网页示例，这将变为：

```
> data = read.csv(textConnection(getURL("http://chart.yahoo.com/table.csv?s=^HSI&a=0&b=01&c=1900&d=0&e=07&f=2013&g=d&q=q&y=0&z=^HSI&x=.csv")))
> head(data)
        Date     Open     High      Low    Close     Volume Adj.Close
1 2013-01-04 23370.36 23370.36 23172.28 23331.09 1505752800  23331.09
2 2013-01-03 23390.54 23400.74 23234.43 23398.60 2211207000  23398.60
3 2013-01-02 22860.25 23317.39 22860.25 23311.98 2129252800  23311.98
4 2012-12-31 22584.44 22698.33 22566.89 22656.92  685413000  22656.92
5 2012-12-28 22706.33 22706.33 22628.46 22666.59 1043816200  22666.59
6 2012-12-27 22705.46 22718.83 22608.60 22619.78 1053372600  22619.78 
```

但显然最好用`read.csv("http:/...etc")`.

查看`help(connection)`更多。

# php - 无法解析 SimpleXML 中的节点

> ID：14191049
> 
> 赞同：-3
> 
> 时间：2013-01-07T06:35:29.550
> 
> 标签：php, xml, simplexml

> **可能重复：**
> [带有连字符名称的 SimpleXML Reading 节点](https://stackoverflow.com/questions/3626901/simplexml-reading-node-with-a-hyphenated-name)

我有带有节点的 XML 包含破折号：

```
 <max-passwd-length>32</max-passwd-length>
  <max-email-length>128</max-email-length> 
```

我使用了这些行：

```
$s = simplexml_load_file('rss-0.91.xml');
print $s->max-email-length->title 
```

但是我收到 PHP 错误，因为有破折号，我该怎么做才能解决这个问题？

PS 我无法编辑 XML 文件以删除破折号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T06:39:56.000

试试这个`$s->{'max-email-length'}->title`

# ruby-on-rails - 错误“安全警告：没有提供给 Rack::Session::Cookie 的秘密选项”

> ID：14191053
> 
> 赞同：68
> 
> 时间：2013-01-07T06:35:44.980
> 
> 标签：ruby-on-rails

> **可能重复：**
> [没有提供给 Rack::Session::Cookie 警告的秘密选项？](https://stackoverflow.com/questions/10374871/no-secret-option-provided-to-racksessioncookie-warning)

在创建脚手架时，我今天遇到了这个错误：

> 安全警告：没有为 Rack::Session::Cookie 提供秘密选项。这构成了安全威胁。强烈建议您提供一个秘密，以防止可能来自精心制作的 cookie 的漏洞利用。未来版本的 Rack 将不支持此功能，未来版本甚至会使您现有的用户 cookie 无效。

但关键是设置在`config/initializers/secret_token.rb`.

我应该做任何事情还是这只是一个标准警告，我可以放心地忽略，因为我已经有了钥匙？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-08T09:09:39.357

这是一个正在讨论的已知[问题。](https://github.com/rails/rails/issues/7372)这是由于升级到 Rack 1.4.2 和您的选择。根据知情人士的说法，在 Rails 更新解决方案之前，您应该忽略错误或降级到 Rack 1.4.1；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T11:59:39.320

根据其他一些网站的讨论，这个警告正在弹出，因为 Rails 使用 Rack cookie 的方式与预期不同。在就如何处理此问题和解决方案达成最终协议之前，暂时忽略此警告应该是可以的。

# iphone - 如何在ios的uiimage中找到透明区域？

> ID：14191054
> 
> 赞同：1
> 
> 时间：2013-01-07T06:35:53.767
> 
> 标签：iphone, ios, ios5, ios4, iphone-sdk-3.0

嗨朋友们，我正在开发填色游戏。我知道如何为完整图像着色。但我想在透明区域为图像着色。

这是我为图像着色的代码

```
-(UIImage*)setCollor:(UIColor*)color image:(UIImage*)img
{
    UIGraphicsBeginImageContext(img.size);    
    CGContextRef context = UIGraphicsGetCurrentContext();

    // set the fill color
    [color setFill];

    CGContextTranslateCTM(context, 0, img.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    // set the blend mode to color burn, and the original image
    CGContextSetBlendMode(context, kCGBlendModeColorBurn);
    CGRect rect = CGRectMake(0, 0, img.size.width, img.size.height);
    CGContextDrawImage(context, rect, img.CGImage);

    // set a mask that matches the shape of the image, then draw (color burn) a colored rectangle
    CGContextClipToMask(context, rect, img.CGImage);
    CGContextAddRect(context, rect);
    CGContextDrawPath(context,kCGPathFill);

    // generate a new UIImage from the graphics context we drew onto
    UIImage *coloredImg = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    //return the color-burned image
    return coloredImg;
} 
```

如何在图像中找到透明区域并填充颜色..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:59:12.393

首先填充完整矩形的颜色。矩形将具有图像宽度和图像高度的大小。现在在同一个矩形上绘制图像。

```
 CGContextSetFillColorWithColor( context, [UIColor redColor].CGColor );
    CGContextFillRect( context, rect );

    CGContextDrawImage(context, rect, [UIImage imageNamed:@"myImage"].CGImage); 
```

# iphone - 如何从 UITableView 中删除选定的行？

> ID：14191057
> 
> 赞同：3
> 
> 时间：2013-01-07T06:36:06.140
> 
> 标签：iphone, ios, uitableview, ios4

> **可能重复：**
> [将 Table 更改为 Edit 模式并删除普通 ViewController 中的 Rows](https://stackoverflow.com/questions/14148229/change-table-to-edit-mode-and-delete-rows-inside-a-normal-viewcontroller)

我想从 tableView 中删除选定的行。我想为用户提供功能，以便当他在行上滑动或轻弹手指时删除该行。我知道编辑风格，它提供了一个带有 -ve 标志的圆形红色按钮。

我试过这段代码：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
{

[tableView beginUpdates];    
if (editingStyle == UITableViewCellEditingStyleDelete) {
    // Do whatever data deletion you need to do...
    // Delete the row from the data source
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:UITableViewRowAnimationTop];      
}       
[tableView endUpdates];
[tableView reloadData];
} 
```

我得到了删除按钮，但是当我单击它时，SIGABRT 错误就在那里。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-07T06:39:26.267

试试下面的几行：

```
[bookmarks removeObjectAtIndex:indexPath.row];
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:UITableViewRowAnimationFade]; 
```

书签是我在表格视图单元格上加载的数组名称，你应该用你的数组名称代替它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T07:04:50.570

删除表行后，从您的数据源中删除相应的索引数据源到表中。然后再次重新加载表。

```
 [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
 [dataArray removeObjectAtIndex:indexPath.row];
  [tableView reloadData]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T07:07:52.450

只需替换代码

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (editingStyle==UITableViewCellEditingStyleDelete)
    { 
        [dataArray removeObjectAtIndex:indexPath.row];
    }

    [tableView reloadData];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T06:42:42.890

尝试这个

```
 [tableArray removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T06:45:09.063

必须尝试这个......

```
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil] withRowAnimation:YES]; 
```

# android - Android 相机 API 应用程序在 onResume 时崩溃

> ID：14191061
> 
> 赞同：5
> 
> 时间：2013-01-07T06:36:38.580
> 
> 标签：android, android-camera

我正在使用相机 API 编写应用程序：显示预览并拍照。第一个版本运行良好。在类 Preview 扩展 SurfaceView 实现 SurfaceHolder.Callback

```
public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, acquire the camera and tell it where
    // to draw.
    camera = Camera.open();
    try {
        camera.setPreviewDisplay(holder);
        camera.startPreview();

    } catch (IOException e) {
        e.printStackTrace();
    }

    hasSurface = true;
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // It will be called immediately after surfaceCreated
    // I move it to Resume.
    setCameraPreviewParameters();

    camera.startPreview();

} 
```

在主要活动中：

```
public class CameraDemo extends Activity 
```

我还设置了一个成员：CameraUnit ui；这是：

```
public class CameraUnit extends LinearLayout 
```

在 onCreate 中，

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ui = new CameraUnit(this);
    setContentView((View) ui); 

    Log.d(TAG, "onCreate'd");
} 
```

它创建一个LinearLayout 对象，其中包含surfaceView 和一个相机按钮。

onResume 是：

```
 @Override
protected void onResume() {
    super.onResume();
} 
```

虽然它有效，但我认为 onResume 不应该为空。我还在一个[著名的 Android 应用示例 OCRTest](https://play.google.com/store/apps/details?id=edu.sfsu.cs.orange.ocr&hl=en)中看到了 surfaceCreated 和 surfaceChanged 是空的， 所以我认为将 surfaceCreated 和 surfaceChanged 中的命令移动到 onResume 会更好也更可行。

我认为我的应用程序的第一个版本的流聊天应该是：主要活动 onCreate（创建 LinearLayout 及其surfaceView、相机按钮的地方）、调用surfaceCreated 和surfaceChanged、onResume。

所以我可以简单地将surfaceCreated 和surfaceChanged 中的命令移动到onResume。但它不起作用！我使用 Debug 发现表面为空。我认为没有调用surfaceCreatd。我的应用程序是不同的 OCRTest，它在主要活动中实现 SurfaceHolder.Callback。我在 SurfaceView 中实现 SurfaceHolder.Callback：

```
class Preview extends SurfaceView implements SurfaceHolder.Callback 
```

所以我在 onResume 中添加了另外两行

```
 ui.preview.surfaceCreated(ui.preview.mHolder);
    ui.preview.surfaceChanged(ui.preview.mHolder, 0, 800, 400); 
```

我随机设置了最后三个整数参数。当我启动 Activity 时，会弹出 Android 手机中的错误窗口。它说“引起：java.lang.RuntimeException：无法连接到相机服务”。但是怎么解决？？？？非常感谢！

错误是：

```
 01-07 00:27:57.173: W/dalvikvm(11625): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
01-07 00:27:57.173: E/AndroidRuntime(11625): FATAL EXCEPTION: main
01-07 00:27:57.173: E/AndroidRuntime(11625): java.lang.RuntimeException: Unable to resume activity {com.example/com.example.CameraDemo}: java.lang.RuntimeException: Fail to connect to camera service
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2460)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2481)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1847)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.app.ActivityThread.access$1500(ActivityThread.java:132)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.os.Looper.loop(Looper.java:150)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.app.ActivityThread.main(ActivityThread.java:4263)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at java.lang.reflect.Method.invokeNative(Native Method)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at java.lang.reflect.Method.invoke(Method.java:507)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at dalvik.system.NativeStart.main(Native Method)
01-07 00:27:57.173: E/AndroidRuntime(11625): Caused by: java.lang.RuntimeException: Fail to connect to camera service
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.hardware.Camera.native_setup(Native Method)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.hardware.Camera.<init>(Camera.java:265)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.hardware.Camera.open(Camera.java:241)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at com.example.Preview.surfaceCreated(Preview.java:60)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at com.example.CameraDemo.onResume(CameraDemo.java:64)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1242)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.app.Activity.performResume(Activity.java:3904)
01-07 00:27:57.173: E/AndroidRuntime(11625):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2450)
01-07 00:27:57.173: E/AndroidRuntime(11625):    ... 12 more
01-07 00:27:59.455: I/Process(11625): Sending signal. PID: 11625 SIG: 9 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T06:43:05.900

你得到这个

```
java.lang.RuntimeException: Fail to connect to camera service 
```

例外，当相机被其他应用程序使用时。但我相信其他应用程序就是您的应用程序本身。您必须释放相机。

这些是您应该释放相机的情况：

**在预览类中：**

```
public void surfaceDestroyed(SurfaceHolder holder) {

    // empty. Take care of releasing the Camera preview in your activity.
    if (mCamera != null) {
        mCamera.release();
    }
} 
```

**在活动中：**

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    if (myCamera != null) {
        myCamera.release();
    }
    finish();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    if (myCamera != null) {
        myCamera.release();
    }
} 
```

同样**在 Cancel clicked 上**，以及当您完成使用相机时，即当图像被捕获并且您返回活动时。

也试试这个：

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {

    if (mHolder.getSurface() == null) {
        return;
    }

    try {
        mCamera.stopPreview();
    } catch (Exception e) {
        //You can ignore this, because this means the Preview doesn't Exist
        //So, no need to try stopping
    }

    try {
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();
    } catch (Exception e) {
        //Catch this
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T14:15:05.107

所以我创建了一个使用相机的应用程序，但使用不同的启动图标进入设置页面。因此，每次我暂停并最小化应用程序以更改设置并返回时，它也会因此错误而崩溃。因此，经过大量研究，我仍然没有答案。然后我意识到这与相机生命周期的管理有关。所以去看看生命周期，特别是在[Pausing](http://developer.android.com/training/basics/activity-lifecycle/pausing.html)。所以我意识到，我们都在用错误的方法做这件事。我们在 onResume 上做的地方，我们应该在 onStart 上做。和砰！有效。

这是我的应用程序代码。

```
@Override
    protected void onPause() {
        super.onPause();
        if (mCamera != null) {
            mCamera.stopPreview();
            mCamera.release();        // release the camera for other applications
            mCamera = null;
        }
        if (mPreview != null) {
            FrameLayout preview = (FrameLayout) findViewById(R.id.camera_viewer);
            preview.removeView(mPreview);
            mPreview = null;
        }
    }

    @Override
    protected void onStop() {
        super.onStop();
        if (mCamera != null) {
            mCamera.stopPreview();
            mCamera.release();        // release the camera for other applications
            mCamera = null;
        }
        if (mPreview != null) {
            FrameLayout preview = (FrameLayout) findViewById(R.id.camera_viewer);
            preview.removeView(mPreview);
            mPreview = null;
        }
    }
    @Override
    protected void onResume() {
        super.onResume();

    }

    @Override
    protected void onStart(){
        super.onStart();
//Check if the camera exists or not so it does not clash with the onCreate
        if(mCamera == null){
            dir_string =  new File("/storage/sdcard1/app");
            Log.d("TAG",dir_string.toString());
            mCamera = getCameraInstance();
            mPreview = new CameraPreview(this, mCamera);
            FrameLayout preview = (FrameLayout) findViewById(R.id.camera_viewer);
            preview.addView(mPreview);
        }
    } 
```

希望这至少可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:13:24.887

我发现在一些示例中，相机打开代码既包含在 surfaceChanged 中，也包含在 onResume 中，使用 if 语句来避免重复。也许这是解决问题的一种方法。

# hadoop - 控制 hadoop 中的日志记录功能

> ID：14191070
> 
> 赞同：6
> 
> 时间：2013-01-07T06:37:34.523
> 
> 标签：hadoop, log4j

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T12:18:20.037

您想用自己的 Log4J 文件具体实现什么目标？我问是因为日志分布在您的集群中，但是通过将它们记录到 rootLogger，您应该能够通过作业跟踪器查看它们（通过深入研究作业任务尝试）。

如果您想使用滚动文件，那么您以后很难检索这些文件（同样因为它们分布在您的任务节点上）。

如果要动态设置日志级别，这应该很简单：

```
public static Logger log = Logger.getLogger(MyMapper.class);

@Override
protected void setup(Context context) throws IOException,
        InterruptedException {
    log.setLevel(Level.WARN);
} 
```

如果您想添加自己的附加程序，那么您应该能够在上面的设置方法中以编程方式执行此操作（请参阅此[SO Question](https://stackoverflow.com/questions/8965946/configuring-log4j-loggers-programmatically)）。

# angularjs - ng-transclude（指令）中的 ng-repeat

> ID：14191071
> 
> 赞同：3
> 
> 时间：2013-01-07T06:37:37.877
> 
> 标签：angularjs

这是 plnkr：[http ://plnkr.co/HVnZWK5dNuvu180HCT6o](http://plnkr.co/HVnZWK5dNuvu180HCT6o)

我以为我写了一个简单的指令，只是`table`稍微重写了一些元素。目的是让嵌入的主体针对父范围做自己的事情。这是一个玩具，我知道，但我正在尝试推出一个“更智能”的桌子，但我无法超越基础知识。

数据表.js：

```
angular.module('daTable', [])
.directive('daTable', function() {
  return {
    restrict: 'E',
    replace: true,
    templateUrl: 'templates/da-table.html',
    transclude: true,
    scope: {}
  }
}); 
```

da-table.html：

```
<table class="table table-bordered table-striped table-hover table-condensed" border="1">
  <caption>Table</caption>
  <thead><tr><th>column 1</th></tr></thead>
  <tbody ng-transclude></tbody>
</table> 
```

main.html（通过 $routeProvider 的路由视图）

```
...
<da-table>
  <tr ng-repeat="r in rows">
    <td>{{r.col1}}</td>
    <td>{{r.col2}}</td>
    <td>{{r.col3}}</td>
  </tr>
</da-table>
... 
```

主.js：

```
dataTableApp.controller('MainCtrl', function($scope) {
  $scope.rows = [
    {col1: "data 1,1", col2: "data 1,2", col3: "data 1,3"},
    {col1: "data 2,1", col2: "data 2,2", col3: "data 2,3"},
    {col1: "data 3,1", col2: "data 3,2", col3: "data 3,3"}
  ]
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T02:37:25.670

我已经在指令领域进行了大量研究，这些指令无法与嵌入和 ng-repeat 一起正常工作。

我遇到了这个：[https ://github.com/angular/angular.js/issues/1459](https://github.com/angular/angular.js/issues/1459)

这基本上是说要避免在指令中使用 <table>、<td> 或 <tr>。问题在于，在 angular 有机会查看它们之前，浏览器将内容移到了元素之外。

他们强烈建议（在 github 问题中）在您的指令中使用基于 CSS 的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:48:49.007

Actually I think it is really tricky issue and my vote is that this behaviour is because how browsers reorder emelents that are inside elements. It can 'pop' elements that are not inline with what table can contain.

And in your example ngTransclude appends transcluded content after , so order of elements becomes invalid and elements poped out of so are not shown.

So may be try to use other options to structure your page layout - like fluid layouts etc, that allows to avoid wierd browser's behavour with elements.

# mysql - 如何在不使用 MySql 中的 Group_Concat 函数的情况下显示记录

> ID：14191072
> 
> 赞同：0
> 
> 时间：2013-01-07T06:37:38.977
> 
> 标签：mysql, sql

我的查询：

```
SELECT tp.EMPCODE,
       tp.NAME,
       tp.DEPARTMENT, 
       Group_Concat(d.dte) AbsentDate, 
       COUNT(tp.EMPCODE) Totalnoofabsentdates
FROM test_prefixmaster tp
JOIN daterange25 d
LEFT JOIN test_prefixtransactions tpt 
       ON (tp.EMPCODE = tpt.empcode) AND DATE(S_DateTime) = d.dte
WHERE tpt.empcode IS NULL
GROUP BY tp.EMPCODE; 
```

我有一串这样的记录

```
Empcode         AbsentDate

111             2012-11-12,2012-11-23,2012-12-22 
```

我的要求是显示如下记录：

```
Empcode          AbsentDate       
111              2012-11-12
                 2012-11-23
                 2012-12-22 
```

如何在 MySql 中显示记录？

注意：在我的查询中，如果我删除 Group_Concat 函数，则会显示 2012-11-12 记录（跳过 2012-11-23、2012-12-22）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:51:55.590

我会试一试，但您缺少一些信息 - 请阅读我的内联评论：

```
SELECT
    tp.EMPCODE,
    tp.NAME,
    tp.DEPARTMENT,
    d.dte AbsentDate
FROM
    test_prefixmaster tp
JOIN
    daterange25 d
    ON (tp.[foreignKey] = d.[someKey]) --You need to specify this...
LEFT JOIN
    test_prefixtransactions tpt
    ON (tp.EMPCODE = tpt.empcode)
    AND DATE(S_DateTime) = d.dte --Where is S_DateTime from?
WHERE
    tpt.empcode IS NULL; 
```

如果您不想`EMPCODE`在每一行中重复该值，您可以这样做，但我不确定您为什么要在 SQL 中这样做：

```
CREATE TABLE tempTable AS (
SELECT
    tp.EMPCODE,
    d.dte AbsentDate
INTO
    #tempTable
FROM
    test_prefixmaster tp
JOIN
    daterange25 d
    ON (tp.[foreignKey] = d.[someKey]) --You need to specify this...
LEFT JOIN
    test_prefixtransactions tpt
    ON (tp.EMPCODE = tpt.empcode)
    AND DATE(S_DateTime) = d.dte --Where is S_DateTime from?
WHERE
    tpt.empcode IS NULL;
);

SELECT
    CASE WHEN COUNT(b.AbsentDate) = 1 THEN a.EMPCODE ELSE '' END AS EMPCode,
    a.AbsentDate
FROM
    tempTable a
LEFT JOIN
    tempTable b
    ON  (a.EMPCODE = b.EMPCODE)
    AND (a.AbesentDate >= b.AbesentDate)
GROUP BY
    a.EMPCODE,
    a.AbsentDate
ORDER BY
    1,2; 
```

# entity-framework - 删除多对多关系

> ID：14191077
> 
> 赞同：0
> 
> 时间：2013-01-07T06:37:57.120
> 
> 标签：entity-framework, entity-framework-4, many-to-many, entity-framework-5

我有两节课：

```
public class User
{
    public int Id {get;set;}
    public string Username {get;set;}

    [InverseProperty("Users")]
    public virtual ICollection<Tag> Tags {get;set;}
}

public class Tag
{
    public int Id {get;set;}
    public string Title {get;set;}

    [InverseProperty("Tags")]
    public virtual ICollection<User> Users {get;set;}
} 
```

这显然会导致第三个表类似于称为 UserTags 的多对多关系，它只有两列，UserId 和 TagId。

现在假设我有 100.000 个用户和 100.000 个标签，平均每个 Eser 与 1.000 个标签有关系。我想从特定的 User.Tags 集合中删除单个标签，而不必在此之前加载所有标签。

最快的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T08:58:20.943

试试这个：

```
// Create dummy objects for existing user and tag
var user = new User { Id = existingUserId };
var tag = new Tag { Id = existingTagId };
user.Tags.Add(tag);

// Start tracking user and related tag as unchanged
dbContext.Users.Attach(user);
// Remove relation between user and tag
user.Tags.Remove(tag);
dbContext.SaveChanges(); 
```

# javascript - Facebook喜欢固定页脚内的按钮框架

> ID：14191079
> 
> 赞同：1
> 
> 时间：2013-01-07T06:38:07.483
> 
> 标签：javascript, html, css, facebook-like, sticky-footer

我想得到这样的东西

![在此处输入图像描述](../Images/c1bb62ba2c199e9b872337cf744cd2bd.png)

但我目前有这个

![在此处输入图像描述](../Images/9fc131e818eff29adb2c37f1637af90f.png)

我尝试了一些方法来解决它，但我无处可去，我该怎么办？

这是[小提琴](http://jsfiddle.net/xjJsk/3/)

我有一些定义，例如：

```
#footer {
            padding: 20px;
            background-color: #000;
            color: #fff;
            font-size: 12px;
} 
```

还有这个 iframe

```
<iframe src="FACEBOOKURL&amp;layout=button_count&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light&amp;height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100%; height:20px;" allowTransparency="true">
</iframe> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:57:01.587

使用左浮动。

```
<div style="float:left">text</div>
<div style="float:left">iframe</div> 
```

确保 iframe 宽度可以根据您的空间进行调整

检查这个 - [http://jsfiddle.net/im4aLL/xjJsk/10/](http://jsfiddle.net/im4aLL/xjJsk/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:19:01.003

你也不需要`float`元素。一个更简单的解决方案是删除`width:100%`iframe 的。

标记：

```
<iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com/Eurekavi&amp;layout=button_count&amp;show_faces=false&amp;width=450&amp;action=like&amp;colorscheme=light&amp;height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden;  height:20px;" allowTransparency="true"> 
```

工作演示：http: [//jsfiddle.net/xjJsk/23/](http://jsfiddle.net/xjJsk/23/)

# actionscript-3 - 如何使用 flash actionscript 3 访问 android 设备前置摄像头

> ID：14191083
> 
> 赞同：0
> 
> 时间：2013-01-07T06:38:17.393
> 
> 标签：actionscript-3, flash, camera

嗨朋友们，我已经为使用 flash as3 的 web 应用程序创建了一个相机应用程序。它工作正常，并使用 Camera.getCamera(); 的相机类；现在我想为 android 创建同样的应用程序。我只有带有前置摄像头的安卓设备。所以我在我的设备中运行了同一个应用程序。我看不到相机显示。我可以使用任何选项来访问设备上的前置摄像头吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:26:09.200

使用[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#getCamera%28%29)！Camera.getCamera() 的描述指出：

```
Parameters
name:String (default = null) — Specifies which camera to get, as determined from the array returned by the names property. For most applications, get the default camera by omitting this parameter. To specify a value for this parameter, use the string representation of the zero-based index position within the Camera.names array. For example, to specify the third camera in the array, use Camera.getCamera("2"). 
```

因此，如果您想要第二台相机，请使用

> Camera.getCamera("1")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:57:08.887

摄像头索引是定义后置摄像头或前置摄像头的数字。第一个索引可以是后置摄像头，第二个项目可以是前置摄像头，反之亦然。

如果我猜的话，我会说你使用[Camera 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html)..[这个博客上的帖子为你提供了更多信息](http://www.riagora.com/2010/07/android-air-and-the-camera/)

愿这对你有帮助..！

# magento-1.7 - 在 magento 的时事通讯中添加国家和州/省字段

> ID：14191084
> 
> 赞同：0
> 
> 时间：2013-01-07T06:38:18.603
> 
> 标签：magento-1.7

我想在时事通讯中显示国家和州字段。对于我使用此编码的国家/地区：-

```
<?php $_countries = Mage::getResourceModel('directory/country_collection')
                                ->loadData()
                                ->toOptionArray(false) ?>
 <?php if (count($_countries) > 0): ?>
                       <label for="country"><?php echo $this->__('Country') ?></label>
                           <select name="country" id="newsletter">
                                <option value="">-- Please Select --</option>
                                 <?php foreach($_countries as $_country): ?>
                                    <option value="<?php echo $_country['value'] ?>">
                                                    <?php echo $_country['label'] ?>
                                    </option>
                                <?php endforeach; ?>
                            </select>
                 <?php endif; ?> 
```

它显示国家/地区列表，但我还想根据所选国家/地区显示状态下拉列表，如果未定义状态，则它将显示文本框，如默认 magento 功能。我试试这个代码： -

```
<div class="input-box">
                            <select id="region_id" name="region_id" title="<?php echo $this->__('State/Province') ?>" class="validate-select" style="display:none;">
                                <option value=""><?php echo $this->__('Please select region, state or province') ?></option>
                            </select>
                            <script type="text/javascript">
                            //<![CDATA[
                                $('region_id').setAttribute('defaultValue', "<?php echo $this->getAddress()->getRegionId() ?>");
                            //]]>
                            </script>
                            <input type="text" id="region" name="region" value="<?php echo $this->escapeHtml($this->getAddress()->getRegion()) ?>" title="<?php echo $this->__('State/Province') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('region') ?>" style="display:none;" />
                        </div> 
```

但它显示错误。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:23:23.667

我得到了解决方案： - 国家的下拉应该是： -

```
 <?php echo Mage::getBlockSingleton('directory/data')->getCountryHtmlSelect($this->getEstimateCountryId()) ?> 
```

状态应该是这样的：--

```
 <label for="state"><em>*</em><?php echo $this->__('State/Province') ?></label>
                         <select style="" title="State/Province" name="region_id" id="region_id" defaultvalue="" class="required-entry validate-select" style="display:none;">
                                <option value=""><?php echo $this->__('Please select region, state or province') ?></option>
                         </select>
                   <script type="text/javascript">
                   //<![CDATA[
                       $('region_id').setAttribute('defaultValue',  "<?php echo $this->getEstimateRegionId() ?>");
                   //]]>
                   </script>
                   <input type="text" id="region" name="region" value="<?php echo $this->escapeHtml($this->getEstimateRegion()) ?>"  title="<?php echo $this->__('State/Province') ?>" class="input-text" style="display:none;" /> 
```

脚本是：-

```
 <script type="text/javascript">
    //<![CDATA[
        new RegionUpdater('country', 'region', 'region_id', <?php echo $this->helper('directory')->getRegionJson() ?>);
    //]]>
    </script> 
```

# php - 将价目表从网上商店动态更新到我的博客

> ID：14191086
> 
> 赞同：-1
> 
> 时间：2013-01-07T06:38:51.023
> 
> 标签：php, javascript, ruby, actionscript

我正在尝试建立一个网站，该网站提供有关各种小工具及其最新价格的详细信息。

问题是价格每天都在变化，我必须手动更新。

有什么方法可以使用任何客户端脚本来做到这一点？这可以用 JavaScript 实现吗？

[这](http://www.mysmartprice.com/mobile/samsung-galaxy-note-2-msp1846)是一个例子

他们已在所有在线商店中包含产品的价格表。我希望在零售商价格发生任何变化时尽快更新此价格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:43:54.527

如果您的来源不提供任何类型的 API 或 RSS 提要来让您获得价格，那么您需要抓取您用来收集数据的页面。可能最好你忘记 Javascript，因为这项工作首当其冲，幸运的是，这项任务在 PHP 中非常简单，你可以将脚本设置为每天或每小时或任何你认为合适的通过 CRON 自动运行。

这是一个非常[简单的 PHP 爬虫教程](http://www.devblog.co/php-web-page-scraping-tutorial/)，可以帮助您入门。

或者稍微复杂一点，你可以使用 cURL 来做同样的工作，这里有一个[cURL Scraper 教程](http://spyderwebtech.wordpress.com/2008/08/08/scraping-web-pages-with-curl-tutorial-part-1/)。

最后，[这](https://stackoverflow.com/questions/5134952/how-can-i-set-cron-job-through-php-script)是 SO 关于如何使用 CRON 运行 PHP 脚本的答案。

# android - Android 应用程序在手机上崩溃

> ID：14191090
> 
> 赞同：0
> 
> 时间：2013-01-07T06:39:18.673
> 
> 标签：android

我刚刚开始开发 android 应用程序，我的第一个应用程序在我的手机上崩溃了。我正在使用 eclipse 作为 SDK，我的手机有 Android 版本 2.3.6 这里是详细信息

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <EditText
        android:id="@+id/edit_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/edit_text"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:hint="@string/edit_text"
        android:inputType="numberDecimal" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/edit_text"
        android:layout_centerHorizontal="true"
        android:onClick="calc_fare"
        android:text="@string/calc_button" />

    <TextView
        android:id="@+id/result_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/button1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="25dp"
        android:text="@string/result_text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

字符串.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">Taxi Fare Calculator</string>
    <string name="edit_text">Enter Meter Reading</string><string name="calc_button">Calculate</string><string name="result_text" >Actual Fare</string><string name="menu_settings">Settings</string>
</resources> 
```

mainActivity.java：

```
package com.example.taxifarecalculator;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.EditText;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;

    }

    public void calc_fare() {
        EditText editText = (EditText) findViewById(R.id.edit_text);
        EditText resultText = (EditText) findViewById(R.id.result_text);
        Double mtr = Double.parseDouble(editText.getText().toString());
        Double fare=mtr*103;
        resultText.setText(fare.toString());

    }

} 
```

当我按下 calc 按钮时，应用程序挂起并崩溃，理想情况下应该调用 calc_fare 方法，该方法反过来应该填充文本视图

问候Parikshit

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T06:47:27.067

更改此方法参数

```
public void calc_fare() {

    } 
```

如下所示：

```
public void calc_fare(View v) {

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:12:06.057

嘿，我检查了代码并做了一些相关的更改。您在 xml 文件中为 Button 定义的方法无法访问，因此我已经明确实现了 Button 的 onClick 并且它工作正常。

以这种方式查看：

> ```
>  public class MainActivity extends Activity{
>         EditText editText;
>        TextView resultText;
>        Button m_btn;
>       View m_view;
> @Override
> protected void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
>     setContentView(R.layout.main);
>     editText = (EditText) findViewById(R.id.edit_text);
>  resultText = (TextView) findViewById(R.id.result_text);
>     m_btn=(Button)findViewById(R.id.button1);
>     m_btn.setOnClickListener(new View.OnClickListener()
>     {
>         @Override
>         public void onClick(View p_v) {
>             // TODO Auto-generated method stub
>             calc_fare();
>         }
>     });
> }
> public void calc_fare() {       
>     Double mtr = Double.parseDouble(editText.getText().toString());
>     Double fare=mtr*103;
>     resultText.setText(fare.toString());
> } 
> ```
> 
> }

从布局的 xml 文件中删除您的`onClick`事件并尝试这种方式。它工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T06:54:32.160

您正在布局中创建 calc_fare 的侦听器，但是当您单击它时您没有让它侦听，并且您必须导致应用程序崩溃您的按钮是一个视图，当您处理视图的侦听器时您没有通过视图 Just Simpliy在您的方法中添加视图

```
public void Calc_fare(){

//add your code here  

} 
```

像这样

```
 public void Calc_fare(View view){
//add your code here 
} 
```

现在它将选择侦听器并执行所需的功能

# java - 网络服务问题

> ID：14191092
> 
> 赞同：0
> 
> 时间：2013-01-07T06:39:24.753
> 
> 标签：java, php, android, mysql, json

在我的 android 应用程序中，我想从 MYSQL 获取数据

java代码是：

```
 public class My_Task extends Activity {

        EditText attend_by_txtbx, cus_name_txtbx, contact_no_txtbx, ticket_no_txtbx, task_detail_txtbx;
        Button btnSave;
        TextView cus_name_txt, contact_no_txt, ticket_no_txt, task_detail_txt;
        private static String attend_by;
         String Save = "interval.txt";

        Handler h2 = new Handler();
        Runnable run = new Runnable() {

            @Override
            public void run() {
                EditText cus_name_txtbx = (EditText) findViewById(R.id.cus_name_txtbx);
                ((EditText) cus_name_txtbx).setText(" " + String.valueOf(cus_name_txtbx));
                EditText contact_no_txtbx = (EditText) findViewById(R.id.contact_no_txtbx);
                ((EditText) contact_no_txtbx).setText(" " + String.valueOf(contact_no_txtbx));
                EditText ticket_no_txtbx = (EditText) findViewById(R.id.ticket_no_txtbx);
                ((EditText) ticket_no_txtbx).setText(" " + String.valueOf(ticket_no_txtbx));
                EditText task_detail_txtbx = (EditText) findViewById(R.id.task_detail_txtbx);
                ((EditText) task_detail_txtbx).setText(" " + String.valueOf(task_detail_txtbx));
                long delaytime = (RestoreRecord0() * 1000);
                h2.postDelayed(this, delaytime);
                String response = CallWebService(cus_name_txtbx, contact_no_txtbx, ticket_no_txtbx, task_detail_txtbx);

            }

            private String CallWebService(EditText cus_name_txtbx,
                    EditText contact_no_txtbx, EditText ticket_no_txtbx,
                    EditText task_detail_txtbx) {
                // TODO Auto-generated method stub
                return null;
            }
        };

        public int RestoreRecord0() {
            try {

                File dir = getFilesDir();
                File file = new File(dir, Save);
                if (!file.exists()) {
                                    }

                FileInputStream fileIS = new FileInputStream(file);
                BufferedReader buf = new BufferedReader(new InputStreamReader(
                        fileIS));
                String readString = new String();
                String data = "";
                // just reading each line and pass it on the debugger

                while ((readString = buf.readLine()) != null) {
                    data += readString;
                }

            }

            catch (Exception ex) {
                ex.getMessage();
            }
            return 0;
        }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_task);

        cus_name_txt = (TextView) findViewById(R.id.cus_name_txt);
        cus_name_txtbx = (EditText) findViewById(R.id.cus_name_txtbx);
        cus_name_txtbx.setText("John");

        contact_no_txt = (TextView)findViewById(R.id.contact_no_txt);  
        contact_no_txtbx = (EditText) findViewById(R.id.contact_no_txtbx);
        contact_no_txtbx.setText("03331231231");

        ticket_no_txt = (TextView)findViewById(R.id.ticket_no_txt);
        ticket_no_txtbx = (EditText) findViewById(R.id.ticket_no_txtbx);
        ticket_no_txtbx.setText("1");

        task_detail_txt = (TextView)findViewById(R.id.task_detail_txt);
        task_detail_txtbx = (EditText) findViewById(R.id.task_detail_txtbx);
        task_detail_txtbx.setText("Training");

        attend_by_txtbx = (EditText)findViewById(R.id.attend_by_txtbx);
        attend_by_txtbx.setText(My_Task.attend_by);

        Spinner severity = (Spinner) findViewById(R.id.severity_spinner);
        // Create an ArrayAdapter using the string array and a default spinner layout
        ArrayAdapter<CharSequence> adapter3 = ArrayAdapter.createFromResource(this,
                R.array.Severity_array, android.R.layout.simple_dropdown_item_1line);
        // Specify the layout to use when the list of choices appears
        adapter3.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        // Apply the adapter to the spinner
        severity.setAdapter(adapter3);

        // save button
        btnSave = (Button) findViewById(R.id.btnSave);
        btnSave.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Onclick_click1(btnSave);

            }
        });   

        long delaytime = (RestoreRecord0() * 1000);
        h2.postDelayed(run, delaytime);

        }

    public void onItemSelected(AdapterView<?> parent, View view, 
            int pos, long id) {
        // An item was selected. You can retrieve the selected item using
        // parent.getItemAtPosition(pos)
    }

    public void onNothingSelected(AdapterView<?> parent) {
        // Another interface callback

    } 

    public void Onclick_click1(final Button btnSave)
    {

         final AlertDialog.Builder alert = new AlertDialog.Builder(
                    My_Task.this);

         alert.setTitle("Alert...!");   
         alert.setMessage("Do you want to Save or Cancel");
         alert.setPositiveButton("Save",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface arg0, int arg1) {
                            // Perform action on click

                            EditText attend_by_txtbx = (EditText) findViewById(R.id.attend_by_txtbx);
                            if(attend_by_txtbx.getText().toString().trim().length() < 1)
                            {
                        Toast.makeText(getBaseContext(),
                                        "Please enter your Name",
                                        Toast.LENGTH_LONG).show();
                            btnSave.performClick();
                            return;
                        }

                            Toast.makeText(getBaseContext(),
                                    "Successfully Saved..!",
                                    Toast.LENGTH_LONG).show();

                        }
                                    });

            alert.setNegativeButton("Cancel",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog,
                                int whichButton) {
                            dialog.cancel();
                        }
                    });

            alert.show();

    }    

    public String CallWebService(String cid, String cus_name, String contact_number, String ticket_no, String task_detail) {
        String response = new String();
        try {
            String url = "http://192.168.0.29/evisiting_records/read_mytask.php?cus_name="+cus_name+"&contact_number="+contact_number+"&ticket_no="+ticket_no+"&task_detail="+task_detail;
            HttpClient client = new DefaultHttpClient();
            HttpPost req = new HttpPost();
            HttpGet request = new HttpGet();
            URI webservice = new URI(url);
            request.setURI(webservice);
            req.setURI(webservice);
            HttpResponse httpResponse = client.execute(request);
            HttpEntity responseEntity = httpResponse.getEntity();
            if (responseEntity != null) {
                response = EntityUtils.toString(responseEntity);
            }
            HttpResponse httpResponse1 = client.execute(req);
            HttpEntity responseEntity1 = httpResponse1.getEntity();
            if (responseEntity1 != null) {
                response = EntityUtils.toString(responseEntity1);
            }
        }

        catch (Exception e1) 
        {
            e1.printStackTrace();
        }

        return response;
    }      
   } 
```

我的PHP代码是：

```
<?php
// read_My_Task.php

/*
 * Following code will get single task details
 * A task_detail is identified by task id (cid)
 */
 // array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// check for post data
if (isset($_GET["cid"])) {
    $cid = $_GET['cid'];

    // get a task from my-task table
    $result = mysql_query("SELECT *FROM my_task WHERE cid = $cid");

    if (!empty($result)) {
        // check for empty result
        if (mysql_num_rows($result) > 0) {

            $result = mysql_fetch_array($result);

            $my_task = array();
            $my_task["cid"] = $result["cid"];
            $my_task["cus_name"] = $result["cus_name"];
            $my_task["contact_number"] = $result["contact_number"];
            $my_task["ticket_no"] = $result["ticket_no"];
            $my_task["task_detail"] = $result["task_detail"];

            // success
            $response["success"] = 1;

            // user node
            $response["my_task"] = array();

            array_push($response["my_task"], $my_task);
            // echoing JSON response
            echo json_encode($response);         
             }            

    else {
            // no task found
          $response["success"] = 0;
        $response["message"] = "No task found";

            // echo no users JSON
      echo json_encode($response);
 }
 } else {
        // no task found
   $response["success"] = 0;
   $response["message"] = "No task found";

        // echo no users JSON
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}

?> 
```

我说出来的是:(我想要的不是这个:(

![在此处输入图像描述](../Images/26567300b2f19ed82474b2933c4d3107.png)

请指导我如何获得 customer_name、contact_no、ticket_no、task_detail？我在调用 Web 服务时哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:55:12.783

是的，我知道我应该在评论部分添加这个，但是如果没有格式化，事情会看起来很模糊，所以让我在这里评论：

```
 EditText cus_name_txtbx = (EditText) findViewById(R.id.cus_name_txtbx);
            ((EditText) cus_name_txtbx).setText(" " + String.valueOf(cus_name_txtbx));
            EditText contact_no_txtbx = (EditText) findViewById(R.id.contact_no_txtbx);
            ((EditText) contact_no_txtbx).setText(" " + String.valueOf(contact_no_txtbx));
            EditText ticket_no_txtbx = (EditText) findViewById(R.id.ticket_no_txtbx);
            ((EditText) ticket_no_txtbx).setText(" " + String.valueOf(ticket_no_txtbx));
            EditText task_detail_txtbx = (EditText) findViewById(R.id.task_detail_txtbx);
            ((EditText) task_detail_txtbx).setText(" " + String.valueOf(task_detail_txtbx)); 
```

您为什么要引用 EditText 字段并在其中设置它们的地址？难怪您会在屏幕截图中看到文本
以下内容足以参考您的 EditText 字段。

```
 EditText cus_name_txtbx = (EditText) findViewById(R.id.cus_name_txtbx);
        EditText contact_no_txtbx = (EditText) findViewById(R.id.contact_no_txtbx);
        EditText ticket_no_txtbx = (EditText) findViewById(R.id.ticket_no_txtbx);
        EditText task_detail_txtbx = (EditText) findViewById(R.id.task_detail_txtbx); 
```

您只需要解析 json 并设置结果。
例如：

```
String name = // from json
cus_name_txtbx.setText(" " + name); 
```

# php - 确定网站是否适合移动设备

> ID：14191093
> 
> 赞同：-1
> 
> 时间：2013-01-07T06:39:25.070
> 
> 标签：php, iphone, mobile, curl

有哪些选项可以检测网站是否对移动设备友好或不使用 php。目前，我正在通过 curl 发送移动用户代理来检查站点是否具有 view-port 元标记、CSS3 @media 属性、移动重定向。在大多数情况下它工作正常，但在少数情况下它不起作用。

人们是否使用其他一些逻辑来使他们的网站对移动设备友好？如果是这样，这些逻辑是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T06:41:33.750

如果你想为移动设备重定向，你可以在你的 .htaccess 文件中使用 mod_rewrite。我这样做：

```
### MOBILE AGENT REDIRECT
RewriteCond %{HTTP_USER_AGENT} "(android|blackberry|googlebot-mobile|iemobile|ipad|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteRule ^.*$ http://m.mysite.com/ [L,R=302] 
```

# javascript - 你如何在 webstorm 调试器中复制完整的字符串

> ID：14191095
> 
> 赞同：3
> 
> 时间：2013-01-07T06:39:27.687
> 
> 标签：javascript, debugging, webstorm

当我在 WebStorm 中调试时，我经常有很长的字符串。如何从调试器窗口复制完整的字符串？

我已经尝试过的事情：右键单击并复制没有得到完整的字符串。我仍然得到这样的东西

> “categoryId=4bf58dd8d48988d121941735,4bf58dd8d48988d11f941735,4bf58dd8d48988d1e79...（长度：194）”

我曾尝试使用监视窗口，但它并没有显示更多内容。

当然，我可以通过控制台写入或日志记录输出字符串，但这需要我更改代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-24T13:13:37.253

有一种解决方法可以帮助您。您可以使用控制台来显示和复制结果，但您不需要更改代码：

[![在此处输入图像描述](../Images/9cffb5325a9ef61191a7e37f9dfb01a9.png)](https://i.stack.imgur.com/rDUFn.png)

由于您已经打开了调试器窗口，因此只需转到 Console 选项卡并键入 console.log(yourvariable)。将出现完整的字符串，因此只需选择它并通过右键单击或 Ctrl-C 进行复制。

我将它与巨大的字符串一起使用并且没有任何问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T12:06:21.920

它看起来像一个已知问题，您可以[在此处跟踪进度](http://youtrack.jetbrains.com/issue/WEB-2100)。

# apache - WAMP 服务器无法上线

> ID：14191097
> 
> 赞同：3
> 
> 时间：2013-01-07T06:39:31.180
> 
> 标签：apache, wamp, wampserver, apache2.2

我最近在我的 Windows PC 上安装了 WAMP 2.2。无论出于何种原因，我的 WAMP 服务器无法正常工作。我尝试在本地主机上打开 php 文件，但收到著名的 404 错误消息。该图标为橙色，表示它在线，但 404 错误向我显示了其他情况。关于它为什么不适合我的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T06:51:10.380

![在此处输入图像描述](../Images/1df703090e77dea9f0c9fb6e79ab137a.png)

只需去测试端口 80。如果它被另一个进程使用，您可以在 httpd.conf 中定义自己的端口搜索并在文件 httpd.conf1 中找到以下字符串

```
 Listen 80 
```

并更改为

```
 Listen {to desired port like 8888} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-30T03:30:37.233

不能投票也不能评论（第一次在这里），但我有同样的问题。在***Apache/Service***下，我尝试重新启动服务器，但它甚至没有启动，然后我尝试安装它，但它说另一个程序正在使用端口 80。

**解决方案**：关闭Skype、***Apache/Service/Install Service***，然后重新启动所有服务。能够将 wamp 服务器联机，最后 localhost 启动并运行。

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-08T19:59:27.607

Wampmanager 向 Windows 事件查看器报告错误。当我意识到这一点时，我发现它不喜欢我的 httpd.conf 例如

```
The Apache service named  reported the following error:
httpd.exe: Syntax error on line 77 of C:/wamp/bin/apache/apache2.4.9/conf/httpd.conf
Cannot   load modules/mod_access_compat.so into server: 
The specified module could not be found. 
```

然而，我真正的罪行是从旧版本的 WAMP 中懒惰地重用 httpd.conf，而不是重新配置提供的默认版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T06:42:55.373

我曾经遇到过类似的 WAMP 问题，我的问题是 Skype 正在运行并使用 WAMP 想要使用的端口。不知道这是否是您的问题，但如果 Skype 正在运行，请尝试将其关闭并重新启动 WAMP

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-16T06:20:57.450

解决此问题的其他方法：

1.  安装 Apache 服务（Apache > 安装服务）或
2.  删除并重新安装 Apache 服务（Apache > 删除服务）

# assembly - 是否有可能获得 GDT 的地址？

> ID：14191107
> 
> 赞同：2
> 
> 时间：2013-01-07T06:40:29.940
> 
> 标签：assembly, x86, gdt

我有一个为我设置 GDT 的引导加载程序。是否有可能找出这个 GDT 的地址以便我可以使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T06:46:42.087

当然，只需使用[`sgdt`](http://faydoc.tripod.com/cpu/sgdt.htm)说明读出当前设置。

# java - 获取数据时的 JPA 多对一持久性问题

> ID：14191108
> 
> 赞同：1
> 
> 时间：2013-01-07T06:40:32.380
> 
> 标签：java, jpa, many-to-one

我有两张桌子`hotel`和`hotal_room_type`。并且有从`hotal_room_type`to的多对一映射`hotel`。表示主键`hotel`是外键`hotal_room_type`。

现在我正在`hotal_room_type`使用以下代码获取数据

```
Query query = entityManager.createQuery("from "
            + HotelsRoomType.class.getName() + " where event.id = "
            + eventId);
List<HotelsRoomType> list = query.getResultList(); 
```

当我获得具有相同酒店的 HotelRoomType 的两条记录时，我仅获得了第一个 HotelRoomType 的 Hotel。对于其他 HotelRoomTypes 它给出了 Hotel 对象但`hotelId`变量中有 0 ，这意味着我无法再次接收 Hotel 对象。

我需要为所有 HotelRoomTypes 获取完整的酒店实体。如何使这成为可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T05:57:18.947

最后我找到了我的答案。我需要添加实体`cascade=CascadeType.ALL`的映射。`Hotel`喜欢 ：

```
@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
@JoinColumn(name = "hot_room_frn_hot_id", nullable = false)
public Hotel getHotel() {
    return this.hotel;
} 
```

# javascript - 如何使用 html 或 jsp 将数据作为 xml 发布到服务器

> ID：14191109
> 
> 赞同：0
> 
> 时间：2013-01-07T06:40:34.813
> 
> 标签：javascript, html, jsp

我想使用 html 或 jsp 将表单的数据作为 xml 发布到服务器。我曾尝试在 html 中发布数据，但我能够获取 xml 但不能发布 xml。我已经给出了我在下面编写的代码。我正在使用 Rest 端点。

```
<html>
<head> 
<script type="text/javascript">
function generateXML(formName) {

var str="";

for(i=0; i<document.myForm.elements.length; i++)
{
   var fieldName = document.myForm.elements[i].name;
   var fieldValue = document.myForm.elements[i].value;
   str += "<" + fieldName + ">" ;
    str += fieldValue ;
   str += "</" + fieldName + ">" ;
}
document.getElementById('xml').value = str;
}
</script>
</head>
<body>
<h3>Conduit HTML Enrollment RESTful Web Service Handle Test</h3>
<form name="myForm" method="get" action="http://pc161742:8080/rest/services/htmlTestApp/htmltestProcess:1.0">
Token:<input type="text" name="token"><br />
FirstName:<input type="text" name="Fname"><br /> 
<input type="hidden" name="xml" id="xml" value=""/>
<input type="submit" onClick="generateXML(this)"/>
</form>
</body>
</html> 
```

我收到类似“com.adobe.idp.dsc.DSCRuntimeException：内部错误”的错误。请让我知道我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T06:59:04.727

尝试[JQuery.ajax](http://api.jquery.com/jQuery.ajax/)：

```
var ajaxurl="http://pc161742:8080/rest/services/htmlTestApp/htmltestProcess:1.0";
var str="";

for(i=0; i<document.myForm.elements.length; i++)
{
   var fieldName = document.myForm.elements[i].name;
   var fieldValue = document.myForm.elements[i].value;
   str += "<" + fieldName + ">" ;
    str += fieldValue ;
   str += "</" + fieldName + ">" ;
}

$.ajax({
    url: ajaxurl,
    data: str, 
    type: 'POST',
    contentType: "text/xml",
    dataType: "xml",
    success : parse_result,
    error : show_error
}); 

function parse_result(xml){
    //
}
function show_error(){
    //
} 
```

另请参阅[jQuery ajax 发布到 Web 服务](https://stackoverflow.com/questions/3099369/jquery-ajax-post-to-web-service)。

# winapi - 有效使用 io.popen 或替代解决方案

> ID：14191118
> 
> 赞同：1
> 
> 时间：2013-01-07T06:41:15.877
> 
> 标签：winapi, lua

我不确定是否有更有效的方法来做到这一点，尽管有人曾经说过他们使用 Win32 API 而不是 io.popen。问题是，我似乎缺乏将 WinAPI 整合到任何东西中的技能，但如果我能找到关于 makefile（或我需要做的任何事情）的详细分步说明并使其工作，我很乐意使用它. 但在那之前，这是手头的任务。

我目前正在使用 io.popen 在我使用的程序中返回 ping 结果问题是，它会弹出 cmd 框，虽然它只是短暂地这样做，但很烦人。这就是我的代码：

```
pinghandle = io.popen("ping "..zs.params(2))
pingresult = pinghandle:read("*a")
pingmin = string.match(pingresult,"Minimum = (%d+ms)")
pingmax = string.match(pingresult, "Maximum = (%d+ms)")
pingavg = string.match(pingresult, "Average = (%d+ms)")
pinghandle:close()
if pingmin and pingmax and pingavg then
  send(zs.param(1),"@r{@x111Ping to @w"..zs.params(2).." @x111Min: @w"..pingmin.." @x111Avg: @w"..pingavg.." @x111Max: @w"..pingmax.."@r}@w")
else
  send(zs.param(1),"@x111Unsuccessful ping to@w",zs.params(2))
end 
```

不注意`zs.param(#)`。这是特定于客户的，与代码无关。我的问题是......是否有一种“隐形”的方式来达到同样的效果？除此之外，这是否与我可以编写代码一样有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:03:25.090

有各种外部库可让您为您执行此操作。

查看[winapi](http://stevedonovan.github.com/winapi/topics/readme.md.html)、[apr](http://peterodding.com/code/lua/apr/docs/#process_handling)或[ex](http://lua-users.org/wiki/ExtensionProposal)

# c++ - 调用析构函数

> ID：14191119
> 
> 赞同：1
> 
> 时间：2013-01-07T06:41:21.837
> 
> 标签：c++

`B`在下面的代码中，当执行返回`main`from时，在案例 1 中调用了类的析构函数，但在案例 2 中没有调用`fn()`。我不明白这种区别，因为当`A`使用`new`. 你能解释一下吗？

```
class B {
public:
    B() {
        printf(" [B] COntsructor");
    }
    ~B() {
        printf(" [B] Destructor");
    }
};

class A {
public:
    A() { 
        printf(" [A] COntsructor");
    }
    ~A() { 
        printf(" [A] Destructor");
    }

    B Query() { return b; }    /// Case 1
    B* Query() { return &b; }  /// Case 2

    B b;
};

void fn()
{
    A *a = new A();
    B b = a->Query();  // case 1
    B* b = a->Query(); // case 2
    return;
}

int _tmain(int argc, _TCHAR* argv[])
{
    fn();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T06:42:55.827

情况 1：当您**按值****返回`b`**时，局部变量`b`是使用复制构造函数构造的。[Return Value Optimization](http://en.wikipedia.org/wiki/Return_value_optimization)会优化除一份之外的所有副本。局部变量`b`的析构触发析构函数。

情况 2：当您返回时，您`&b`返回的只是一个指向的**指针`b`**，因此**不需要销毁**。

编辑：[代码](http://liveworkspace.org/code/2yMQdg%244)显示在没有相应调用构造函数的情况下调用析构函数。这是因为函数返回副本是通过复制构造函数发生的。

Edit2：@ZarShardan 是正确的——由于[Return Value Optimization](http://en.wikipedia.org/wiki/Return_value_optimization) ，我提到的“许多副本”可能不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T06:51:05.437

*   `a`永远不会被删除，因此它或其成员没有析构函数。
*   `a->b`将使用默认构造函数构造，所以这就是你看到的构造函数调用。
*   `B b = a->Query();`将使用不打印任何内容的复制构造函数创建。
*   在 结束时`fn`，本地`b`将超出范围，因此这是您的析构函数调用。

如果您为复制构造函数添加调试代码，如果您让所有调试代码都打印 的值`this`，并且如果您最终删除`a`以查看这些析构函数调用，事情可能会变得更清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T06:48:43.160

我没有看到您在第二种情况下创建了一个`new`实例，因此 A 作为成员持有的指针将使用' 析构函数`B`进行清理，并且由于从未调用过构造函数 in ，因此也不会调用析构函数。`A``B`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-07T06:47:47.600

对象 a 永远不会被删除，因此它自己的析构函数和它的成员对象析构函数都不会被调用。

尝试添加

```
delete a; 
```

在你的函数 fn() 结束时

或更好地使用 std::unique_ptr 而不是裸指针。这是更好的设计，以防您的 Query 成员函数抛出异常（RAII 的东西）

# java - 错误查询

> ID：14191122
> 
> 赞同：0
> 
> 时间：2013-01-07T06:41:44.547
> 
> 标签：java, mysql, phpmyadmin

我有以下两个查询都相同，但仅在结构上有所不同。

第一个查询：

```
SELECT DISTINCT 
    u.username, r.value, u.amount AS `amount`
FROM 
    Daily_Balance_Updates u
INNER JOIN 
    Role r ON u.role_id = r.id
WHERE 
    u.updated_at = (SELECT MAX(inner_u.updated_at)
                    FROM Daily_Balance_Updates AS inner_u
                    WHERE inner_u.username = u.username
                       && amount > 0
                       && UNIX_TIMESTAMP( inner_u.updated_at ) < UNIX_TIMESTAMP( '2013-1-3 23:59:59' )
)
ORDER BY 
    r.value, UNIX_TIMESTAMP( u.updated_at ) DESC 
```

在**Phpmyadmin中运行良好**

第二次查询

当我在 Java 中使用相同的查询时，我声明如下：

```
query="SELECT DISTINCT u.username, r.value, u.amount AS `amount' FROM Daily_Balance_Updates     u INNER JOIN Role r ON u.role_id = r.id WHERE u.updated_at = ("
+ "SELECT MAX(inner_u.updated_at) FROM Daily_Balance_Updates AS inner_u WHERE inner_u.username = u.username && amount > 0 && UNIX_TIMESTAMP( inner_u.updated_at ) < UNIX_TIMESTAMP('" +date+" 23:59:59' )) ORDER BY r.value DESC,UNIX_TIMESTAMP( u.updated_at )" 
```

但是当我执行它时，它在**phpmyadmin**和**java中都出现错误**

**错误**

> 字段列表中的未知表“u”

**我的日志：**

```
12:23:17,963 INFO  [STDOUT] 2013-01-07 12:23:17,962 ERROR 
    com.walletplus.report.dao.ReportDaoMysql -  Thread #98  - 
    StatementCallback; bad SQL grammar 
        [SELECT DISTINCT u.username, r.value, u.amount AS `amount' FROM 
            Daily_Balance_Updates u INNER JOIN Role r ON u.role_id = r.id   
            WHERE u.updated_at = (SELECT MAX(inner_u.updated_at) FROM
            Daily_Balance_Updates AS inner_u WHERE inner_u.username = u.username    
            && amount > 0 && UNIX_TIMESTAMP( inner_u.updated_at ) < 
            UNIX_TIMESTAMP('2013-01-01 23:59:59' )) ORDER BY r.value DESC]; 
            nested exception is java.sql.SQLException: Unknown table 'u' in field list 
```

**问题：**

查询有什么问题？好像没事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:22:23.887

这两个查询有两个不同之处

*   `amount` vs `amount'，两个引号都必须是*反引号*。
    我想，这就是为什么`FROM Daily_Balance_Updates u`无法识别的原因，并且您会收到误导性的错误消息。
*   `order by ... desc, ...`对比`order by ..., ... desc`

还有一点，如果你有一个`user_id`除了`username`，比较`user_id`where 子句中的 s 会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:25:26.187

sql: `amount` java: `amount'

有差异，...

# perl - 设置 apache conf 来处理来自自己服务器的请求

> ID：14191126
> 
> 赞同：0
> 
> 时间：2013-01-07T06:42:01.660
> 
> 标签：perl, acl, httpd.conf

我需要使用 httpd.conf 对 HTTP 请求应用一些规则。这就是我正在做的事情。

1.  我正在使用 perl cgi 程序来处理 HTTP 请求。在做了一些初步验证后，我试图为用户下载文件`print("Location: /app/download/filename1\n");`
2.  我需要控制对这个目录 /app/download/ 的访问，这样只有这个 cgi 程序才能下载文件，但是当用户直接点击 url [http://example.com/app/download/filename](http://example.com/app/download/filename)下载不应该被允许。

请提出任何技术来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:25:30.717

只需将文件存储在 www 根目录之外，然后使用 CGI 脚本读取文件并返回带有正确 http 标头的文件内容。这适用于轻负载。

如果您使用 Location 标头重定向用户请求，那么您将无法限制对直接文件读取的访问。您可以尝试使用引荐来源网址限制 .httaccess 文件的访问。

```
SetEnvIfNoCase Referer "regexp_to_your_web_page" allowit

<Files *>
order allow,deny
allow from env=allowit
deny from all
</Files> 
```

看更多：

[http://www.webmasterworld.com/forum92/1233.htm](http://www.webmasterworld.com/forum92/1233.htm)

[http://httpd.apache.org/docs/2.0/mod/core.html#limit](http://httpd.apache.org/docs/2.0/mod/core.html#limit)

问候，

# sql - Sql Server MAX of sum(Amount)

> ID：14191131
> 
> 赞同：0
> 
> 时间：2013-01-07T06:42:22.660
> 
> 标签：sql, sql-server-2008

我有一张表格，其中有客户制作的付款详细信息。列如下：

```
ID, ClientID, Amount 
```

现在我想通过客户 ID 找到 5 个最大金额组。

我找到`DENSE_RANK()`了，但它不适合我，因为我想找到**sum of amount**。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:54:04.940

请试试：

```
SELECT 
    ClientID, 
SUM(Amount) Amount 
FROM(
    SELECT ROW_NUMBER() OVER (PARTITION BY ClientID ORDER BY Amount DESC) DR, 
        ClientID, 
        Amount 
    FROM YourTable
)x WHERE x.DR<=5
GROUP BY ClientID
ORDER BY ClientID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T06:47:06.257

```
;WITH totalSum
AS
(
    SELECT  ClientID, SUM(Amount) totalAmount
    FROM    tableName
    GROUP   BY ClientID
)
SELECT ClientID, totalAmount
FROM
    (
        SELECT  ClientID, totalAmount,
                DENSE_RANK() OVER (ORDER BY totalAmount DESC) rn
        FROM    totalSum
    ) s
WHERE   rn <= 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T06:47:15.243

```
SELECT 
    ID,
    ClientID,
    Amount
FROM
    PaymentDetails
GROUP BY
    ID
HAVING
   Amount = SUM(Amount) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T06:56:15.950

这对你有用吗？（不确定我是否理解您的问题）如果您想要 TOP 5 的总数，就是这样。`SUM()`查找每个客户的`TOP 5`金额的查询是不同的。

```
;WITH OrderingCTE AS
(
    SELECT   ID
            ,ClientID
            ,Amount = SUM(Amount)
            ,rNum   = ROW_NUMBER() OVER (PARTITION BY ClientID ORDER BY SUM(Amount) DESC)
    FROM MyTable
    GROUP BY ID
            ,ClientID
)
SELECT *
FROM OrderingCTE
WHERE rNum <=5 
```

# c# - 如何使用 granados 通过 SSH 传输文件

> ID：14191133
> 
> 赞同：1
> 
> 时间：2013-01-07T06:42:33.890
> 
> 标签：c#, ssh, sftp

我已经开始开发一个简单的应用程序，通过 SFTP将我的本地文件传输到远程**SSH服务器。**

我的应用程序预计会以编程方式完成，因此我计划使用**Granados**开源 SSH 解决方案。在 Granados 测试应用程序中有一个简单的示例，例如：

```
 SSHConnectionParameter f = new SSHConnectionParameter();
            f.UserName = "root";
            f.Password = "";
            f.Protocol = SSHProtocol.SSH2;
            f.AuthenticationType = AuthenticationType.Password;
            f.WindowSize = 0x1000;

            Reader reader = new Reader();
            Socket s = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            //s.Blocking = false;
            s.Connect(new IPEndPoint(IPAddress.Parse("127.0.0.1"), 22));
            _conn = SSHConnection.Connect(f, reader, s);
            reader._conn = _conn;

            SSHChannel ch = _conn.OpenShell(reader);
            reader._pf = ch;

            SSHConnectionInfo ci = _conn.ConnectionInfo; 
```

在 Granados，我找不到任何说明如何发送文件的示例。

我认为必须有一个简单的功能，例如`_conn.TransmitFile(sourcePath, destinationPath);`但我找不到任何示例。

有谁知道如何通过使用带有 Granados 库的 C# 在服务器之间通过 SSH 发送文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T10:21:18.470

传输数据 reader._pf.Transmit(Encoding.ASCII.GetBytes(nextCommand), 0, nextCommand.Length);

# excel - VBA Excel-如何在列的行总和超过特定值时显示警报？

> ID：14191137
> 
> 赞同：1
> 
> 时间：2013-01-07T06:42:44.247
> 
> 标签：excel, vba

![在此处输入图像描述](../Images/ce4abd4b83b10fa7f568419770b9fceb.png)

如上所示，我有两列。**当用户输入一行并且列工资**的总和大于 1000000时，如何显示警告框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T06:56:11.133

如果您未绑定到 VBA，则可以使用`Data Validation`. 在 Excel 2007 中，选择您的工资范围（假设列`B`），在功能区中单击`Data`并选择`Data Validation`。从那里输入以下公式：

```
=B:B<1000000 
```

每当您输入一个使列的总和 > 1000000 的值时，这都会引发错误。如有必要，您还可以自定义错误：

![在此处输入图像描述](../Images/45f085d13d2ce43ccfb0522dd429aea6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T06:55:36.793

这是对单个单元格执行此操作的方式，此代码需要位于该特定工作表的 vba 页面中，而不是模块中。我相信您可以对其进行调整以适应您的范围。

```
Private Sub Worksheet_Change(ByVal Target As Range) 
    If Not Intersect(Range("A1"), Target) Is Nothing Then 
        If Range("A1").Value > 1000000
            MsgBox "A1 is greater than 1000000, ALERT! ALERT! ALERT!"
        End If 
    End If 
End Sub 
```

但非 VBA 解决方案，如条件格式或 @RocketDonkey 建议的其他数据验证是一个更好的主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T07:34:09.003

假设“薪水”在 B 列。

```
Private Sub Worksheet_Change(ByVal Target As Range)
Total = Application.WorksheetFunction.Sum(Columns("B:B"))
If Total >= 1000000 Then
MsgBox "My message", vbCritical, "Error"
End If
End Sub 
```

# c# - 是否可以强制 ReSharper 实现 ICloneable 接口？

> ID：14191138
> 
> 赞同：4
> 
> 时间：2013-01-07T06:42:51.457
> 
> 标签：c#, .net, resharper, icloneable

是否有可能使用 ReSharper 6.1 让我的类`ICloneable`为我实现接口？

如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:51:26.917

不幸的是，在`Resharper`. 还没有。最接近您想要的是[提取接口](http://www.jetbrains.com/resharper/documentation/help20/Refactoring/extractinterface.html)选项。它添加了一个不存在的新界面。

# css - 从 html/css 预览时图像不显示

> ID：14191145
> 
> 赞同：0
> 
> 时间：2013-01-07T06:43:09.543
> 
> 标签：css, html

我遇到了一个问题，我的 css 无法加载我的最后两张图片

```
top-row background-image: url(../images/top-bg.png) top left repeat-x; width:100%;

top-bg background-image: url(../images/top-row-bg.png) top center no-repeat; width:100%; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:18:11.847

对于 IE

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='.myBackground.jpg', sizingMethod='scale'); 
```

用这个

```
background-image: #000 url(myBackground.jpg) center center fixed no-repeat; 
```

火狐

```
-moz-background-image: #000 url(myBackground.jpg) center center fixed no-repeat; 
```

用于 safari 或 chrome

```
-webkit-background-image: #000 url(myBackground.jpg) center center fixed no-repeat; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T06:46:28.127

几点注意事项：

*   您的 CSS 规则似乎不正确。它应该以点为前缀，否则它假定您有一个被调用的 DOM 元素`<top-row>`，`<top-bg>`这不太可能
*   您在 url 中指定的图像位置必须相对于 CSS 文件的位置。

所以：

```
.top-row {
    background-image: url(../images/top-bg.png) top left repeat-x;
    width:100%;
}

.top-bg {
    background-image: url(../images/top-row-bg.png) top center no-repeat;
    width:100%;
} 
```

例如，如果此 CSS 位于`/styles/main.css`图像中，则必须位于`/images/top-bg.png`和中`/images/top-row-bg.png`。确保是这种情况。

此外，我强烈建议您使用诸如 FireBug 或 Chrome 开发者工具栏之类的调试工具，它允许您检查 DOM 和应用于元素的确切 CSS 规则。它还允许您检查网络流量，如果您在引用静态资源时出错，您将收到 404 错误。

# mongodb - 当实际查询只需要几毫秒时，为什么获取 MongoDB 结果很慢？

> ID：14191157
> 
> 赞同：4
> 
> 时间：2013-01-07T06:45:01.470
> 
> 标签：mongodb, optimization, doctrine, doctrine-odm

我正在使用 Doctrine MongoDB ODM 从远程 MongoDB 数据库中获取少量文档。

我确认查询只用了 1 毫秒就找到了大约 12 个匹配的文档。（即 'millis':1 来自解释输出）。但是遍历结果大约需要 250 毫秒。

当我尝试以下选项的组合时，我无法获得任何性能提升

*   选择（'名称'）
*   水合物（假）
*   急切光标（真）
*   限制(1)

我怎样才能最大限度地减少这种延迟？

* * *

**更新：**示例代码的更多解释

```
$qb = $dm->createQueryBuilder('Books');
$books = $qb->select('name')
            ->field('userId')->equals(123)
            ->field('status')->equals('active')
            ->eagerCursor(true)  // Fetch all data at once
            ->getQuery()
            ->execute();

/**
 * Due to using Eager Cursor, the database connection should be closed and
 * all data should be in memory now.
 */

// POINT A
foreach($books as $book) {
    // I do nothing here. Just looping through the results.
}
// POINT B.

/**
 * From POINT A to POINT B takes roughly 250ms when the query had 12 matching docs.
 * And this doesn't seem to be affected much by the number of records matched.
 * As the data is already in the memory, I expected this to be done in range of 
 * 5~10ms, not 250ms.
 *
 * Am I misunderstanding the meaning of Eager Cursor?
 */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:59:13.643

这里有两个感兴趣的区间：一个是从代码开始到 A 点；另一个是从代码开始到 A 点。第二个是从 A 点到 B 点。 .explain() 测量的是前者；你测量的是后者。

特别是，一旦 BSON 文档被传输到客户端（您的 PHP 程序），它们仍然需要反序列化并转换为 PHP 对象。如果您使用的是 Doctrine，则还必须执行额外的处理。

您看到的时间是反序列化过程的时间。文件有多大？必须对文档的全部内容进行反序列化：如果这些内容很大或很复杂（深度嵌套、许多数组等），那么这可能需要一些时间。

您可以通过仅获取您需要的字段来减少反序列化时间。如果您在查询中添加 ->select('_id')，您的循环时间应该会快很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T23:27:03.437

好吧，看来我误解了 Eager Cursor 的意思。

[http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/eager-cursors.html](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/eager-cursors.html) 该文档建议在**调用execute()**时将所有结果检索到内存中。但这并不完全准确。相反，我发现在第一次访问 EasgerCursor 时获取了记录。

在 EagerCursor 的**initialize()**函数中，一个普通的 Mongo Cursor 的实例被检索并在经过几个其他函数后最终传递给**iterator_to_array()函数。**我很确定这是 Mongo Driver 真正完成获取记录的工作的时候。

就我而言，这发生在**foreach**循环中。因此，在 A 点和 B 点之间观察到延迟。为了确认这一点，我尝试了 MongoClient 实现，发现实现之间的总体时间非常接近。

感谢大家的帮助。

# mysql - 子查询或自连接查询 对于 mysql 表 哪个像递归函数一样工作？

> ID：14191161
> 
> 赞同：0
> 
> 时间：2013-01-07T06:45:16.410
> 
> 标签：mysql, sql, database, self-join

我的表中有以下结构和数据

![在此处输入图像描述](../Images/0a39708a3be46860a56a2caa9376791a.png)

现在从上面的数据中说，如果我想找到给定组织 ID 的所有子组织..那么如何找到它。

在这里我怎样才能让它显示经销商 A、经销商 B、广告商 A、广告商 B，当组织 ID = 10707（主要组织）

我的表名是 organization_ 并且有

> 父组织 ID

在描述该特定组织的父组织的每一行中。

因此，当我给主要组织的 ID 说 10707 时，它应该返回我所有具有该组织 ID 的子组织..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:46:14.157

分层数据有多种模型。看来您在表中同时使用了“邻接列表”和“路径枚举”。您可以在 Bill Karwin 的幻灯片中了解它们，该幻灯片讨论了 MySQL 中的各种模型和实现：**[使用 SQL 的分层数据模型](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)**

因此，使用该`treePath`列，您需要的查询相当简单：

```
SELECT
    GROUP_CONCAT(t.name) AS SubOrganizations
FROM
    tableX AS t
  JOIN
    tableX AS p
      ON  t.treePath LIKE CONCAT( p.treePath, '%') 
      AND t.organizationId <> p.organizationId 
WHERE
    p.organizationId = 10707 ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:10:32.590

简而言之，与其他 RDMBS（SQL Server、Oracle）不同，MySql 不支持递归查询。

来自该网站的几个关于该主题的有用链接：

*   [使用MySQL查询遍历行制作递归树](https://stackoverflow.com/questions/10646833/using-mysql-query-to-traverse-rows-to-make-a-recursive-tree)
*   [递归自查询](https://stackoverflow.com/questions/3276136/recursive-self-query)

# mysql - 数据库架构建议

> ID：14191166
> 
> 赞同：0
> 
> 时间：2013-01-07T06:45:49.553
> 
> 标签：mysql, database-design

我在 table 中有三个字段`user`，其中最多保存了一个用户的三个位置。表的架构如下：

```
UserID, name, location_1, location_2, location_3 
```

现在的问题是我还必须保存用户最喜欢的位置，所以有两种方法。

要么我添加另一列（在 table 中`user`），命名`favorite_location`为三个保存位置之一的值。

或者

我应该只存储位置的位置（在收藏夹位置列中），即 2 表示`location_2`当前是最喜欢的位置。

**更新：**

我有一个限制，不能创建另一个表*UserLocation*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:53:53.597

无论哪种方式，您都将创建`favorite_location`列。因此，您可以选择存储完整的位置值或仅存储列索引。

# html - RML - 具有不同列数和长度的表行

> ID：14191170
> 
> 赞同：1
> 
> 时间：2013-01-07T06:46:05.087
> 
> 标签：html, report, openerp, rml

我需要我的表是这样的：假设它有两行。第一行有六列，第二行有两列（当然整行的长度是相同的）。我需要这个，因为我需要在下面对产品进行描述，并且它需要比其他列更多的空间所以从图形上看，它看起来像这样：

```
1col|2col|3col|4col|5col|6col|
1col     |2col                | 
```

正在使用报告标记语言来编写此表。

现在这个表看起来像这样：

```
<para style="terp_default_1">[[repeatIn(o.order_line,'line')]]</para>
      <blockTable colWidths="180.0,70.0,80.0,70.0,50.0,85.0" style="Table5">
        <tr>
          <td>
            <para style="terp_default_9">[[ line.name ]] </para>
          </td>
          <td>
            <para style="terp_default_Centre_9">[[ ', '.join(map(lambda x: x.name, line.tax_id)) ]]</para>
          </td>
          <td>
            <para style="terp_default_Right_9">[[ formatLang(line.product_uos and line.product_uos_qty or line.product_uom_qty) ]] [[ line.product_uos and line.product_uos.name or line.product_uom.name ]]$
          </td>
          <td>
            <para style="terp_default_Right_9">[[ formatLang(line.price_unit) ]]</para>
          </td>
          <td>
            <para style="terp_default_Centre_9">[[ formatLang(line.discount, digits=get_digits(dp='Sale Price')) ]]</para>
          </td>
          <td>
            <para style="terp_default_Right_9">[[ formatLang(line.price_subtotal, digits=get_digits(dp='Sale Price')) ]] [[ o.pricelist_id.currency_id.symbol ]]</para>
          </td>
        </tr>
        <tr>
          <td>
            <para style="terp_default_9">[[ line.product_id.product_tmpl_id.description ]]</para>
          </td>
        </tr>
</blockTable> 
```

我想应该有一种方法来定义特定的行（tr 标签）以具有特定的列数。就像现在一样，列的长度和数量在“blockTable”标签中定义。或者最好的方法是将 1 和 2 合并为一列，将 3、4、5 和 6 列合并为第二列。

更新：我添加了 html 标签，因为它可能与 rml 中的方法相似。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T10:06:29.993

我设法以此为例解决了这个问题： [reportlab: setting colspan for td in rml](https://stackoverflow.com/questions/5002944/reportlab-setting-colspan-for-td-in-rml)

我需要指定：

```
<blockTableStyle><blockSpan start="1,1" stop="4,1"/></blockTableStyle> 
```

这意味着从第二列到最后一列的第二行将合并为一个。

# android - 使搜索栏拇指出现在栏下方

> ID：14191176
> 
> 赞同：3
> 
> 时间：2013-01-07T06:46:46.593
> 
> 标签：android, android-layout

我希望我的搜索栏拇指出现在栏的底部。有没有一种财产方式来实现这一目标？

```
 <item name="android:progressDrawable">@drawable/custom_seek_bar</item>

       <item name="android:thumb">@drawable/seek_bar_thumb</item>

      <item name="android:thumbOffset">0dip</item>

      <item name="android:minHeight">20dp</item>

      <item name="android:maxHeight">20dp</item>

</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:16:14.013

**移动拇指的 Seekbar（在偏移处）：**

![移动拇指的搜索栏（在偏移处）](../Images/75b892308b10bde4663fb720b3504d78.png)

只需通过在上设置样式来调整`minHeight`和属性：`maxHeight``SeekBar`

```
 <item name="android:minHeight">60dp</item>
    <item name="android:maxHeight">60dp</item> 
```

**来源：**与此处显示的修复相反：http: [//qtcstation.com/2011/05/android-how-to-fix-seekbar-bar-thumb-centering-issues/](http://qtcstation.com/2011/05/android-how-to-fix-seekbar-bar-thumb-centering-issues/)

**替代解决方案：**

1.  使用 style 中的属性修改拇指可绘制`thumb`对象，并在可绘制对象的顶部添加一些不可见的空间，使拇指看起来有点移位
2.  使用两个`SeekBar`s，一个隐藏，另一个不可聚焦...有点像[https://stackoverflow.com/a/13711256/832776](https://stackoverflow.com/a/13711256/832776)但您可能需要修改它们的样式

# arrays - F# find elements in array1 that are also in array2

> ID：14191181
> 
> 赞同：-2
> 
> 时间：2013-01-07T06:47:21.170
> 
> 标签：arrays, f#

Say `array1=[|1;2;3;4;5;6|],array2=[|7;6;5;4;3|]`
basically, I want an array which contains the common elements of array1 and array2 AND in the sorted as array1.
In this case, I should return array `[|3;4;5;6|]`. Can anyone help?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T07:11:00.157

A simple solution:

```
 array1 |> Array.filter (fun t -> array2 |> Array.exists (fun t2 -> t=t2)) 
```

this gets the correct sort order for free.

# vba - 在 Excel VBA 中的动态范围内实现过滤器

> ID：14191185
> 
> 赞同：1
> 
> 时间：2013-01-07T06:47:43.193
> 
> 标签：vba, excel, excel-2010

我已经对此进行了搜索，并分别找到了与过滤器和动态范围相关的答案，但不知道如何将它们组合在一起。

我的excel表的结构是：

*   *资料*：

    *   **日期ABC**
    *   2012 年 2 月 2 日 a1 b1 c1
    *   2012 年 7 月 7 日 a2 b2 c2
*   *图表*：

    *   在此工作表上生成的图表

我正在使用一个命名的动态范围*myDataRange*，它只返回那些数据等于或大于特定参考日期的行：

*   =OFFSET(Data!$C$2,COUNTIF(Data!$B:$B,"<"&Graphs!$B$1&""),0,(COUNTA(Data!$C:$C)-1-COUNTIF(数据！$B:$B,"<"&图表！$B$1&"")),1)

在图表上，我在单元格 B1 中输入了日期，例如：05-05-2012

这将确保 myDataRange 仅返回第二行数据（日期为 07-07-2012）。为此，我绘制了 C 列。

问题：但现在我还需要根据 A 列过滤动态范围。因此，如果图表单元格 B1 中的参考日期是 05-05-2012 并且过滤器是 a2，则 myData 范围仅返回一行。但是如果过滤器是 05-05-2012 和 a1，那么它将返回 0 行。

有人可以帮忙吗 - 我可以修改动态范围本身还是必须以另一种方式实现？我试图修改动态范围参数，但我不断收到错误消息，因为它不返回任何值，然后 Excel 无法绘制它。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T06:22:10.357

我正在使用上面提到的范围，以及我在工作表上插入的组合框上的下面的代码。

这是代码：

子 DropDown2_Change()

```
Dim selectedVal As String

With ThisWorkbook.Sheets("Graphs02").Shapes("Drop Down 2").ControlFormat
selectedVal = .List(.Value)
End With

'MsgBox selectedVal

With ThisWorkbook.Sheets("Data")
.Select
.Range("A1:BY60000").Select

Selection.AutoFilter
Selection.AutoFilter Field:=4, Criteria1:=selectedVal

End With

ThisWorkbook.Sheets("Graphs02").Select 
```

结束子

在此，我放入组合框（下拉 2）的工作表是工作表“graphs02”。工作表数据包含我的所有数据，这些数据根据组合框中选择的值进行过滤。

同样，我在 stackoverflow 的帮助下完成了大部分工作:)

# python - python中的groovy“””有什么等价物吗？

> ID：14191191
> 
> 赞同：0
> 
> 时间：2013-01-07T06:48:20.157
> 
> 标签：python, file

我对python很陌生。我来自 groovy，我用`""""`我希望的方式将一些文本写入文件。

python中有没有等效的方法？

请注意，我想创建一个超过 20 行的文件。所以我需要一些简单而优雅的方式。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T07:12:25.993

目前还不清楚你到底在问什么。

在 Groovy 中使用`'''`或`"""`处理多行字符串的能力是直接从 Python 借来的，所以当然你可以在 Python 中做同样的事情。

但是，在 Groovy 中使用`"`或`"""`用于插值字符串的能力是从 sh 借来的，而 Python 没有相同的功能。在 Python 中，`'`字符串`"`是相同的，插值也不相同。

惯用的 Python 替代方案是[`format`](http://docs.python.org/2/library/string.html#formatstrings). 这是`str`和`unicode`类的一个方法，您可以像这样使用它：

```
s = """This is a string with a {variable} to fill in.
Here's a {second} one
""".format(variable="field", second="'nother") 
```

如果你把它写到一个文件中，你会得到这个：

```
This is a string with a field to fill in.
Here's a 'nother one 
```

有很多变化。如果你想通过位置而不是名称传递参数，你可以使用`{0}`代替`{variable}`——或者，对于按顺序插入它们的简单情况，只需使用`{}`（但要小心 i18n）。您还可以将格式信息放入，例如，打印`repr`（“您将键入什么来获取此值”）而不是`str`（人类可读的表示）。阅读上面链接的文档以获取详细信息。

Python 还有一个较旧的机制，正在逐步淘汰，它使用[`%`运算符](http://docs.python.org/2/library/stdtypes.html#string-formatting)和基于但与 C-style 完全不同的格式规范`printf`。例如：

```
s = """This is a string with a %(variable)s to fill in.
Here's a %(second)s one
""" % {"variable": "field", "second": "'nother"} 
```

同样，有很多可用的变体；再次，阅读上面链接的文档以获取详细信息。`printf`但实际上，只有在处理大量旧代码、从Windows 样式或类似格式进行翻译，或者需要在 Python 2.5 或更早版本上运行时才需要使用它。

如果这些都不足以满足您的需求，那么[PyPI](http://pypi.python.org/pypi)上有 69,105 个模块（以及 ActiveState 上的配方等）可以完成从尽可能接近 perl 的插值到模板化 HTML 页面的所有工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T06:50:51.017

Python 支持`"""`转义多行字符串。但是，变量替换不是立即可用的。

```
multi_line_variable = """This
Is   
The
Coolest
Ever.""" 
```

如果需要变量替换，可以使用 Python 的`printf`格式支持或使用 Jinja 或 Django 模板语言等模板库。

Python 'printf' 格式：

```
>>> echo """Massive %s!""".format("string")
"Massive string!" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T06:50:32.847

```
f = open(name_of_file, 'w')
f.writelines(list_of_lines_to_write)
f.close() 
```

或代替`writelines()`, 使用`f.write("""text_to_write_to_file""")`

# c - 它在外壳中是如何工作的？

> ID：14191196
> 
> 赞同：1
> 
> 时间：2013-01-07T06:48:56.200
> 
> 标签：c, bash, shell, unix, sed

> **可能重复：**
> [为什么“cd”在 bash shell 脚本中不起作用？](https://stackoverflow.com/questions/255414/why-doesnt-cd-work-in-a-bash-shell-script)
> [使用 C 程序回到 Linux 中的上一个目录](https://stackoverflow.com/questions/7089834/go-back-to-previous-directory-in-linux-using-a-c-program)

该`chdir`函数会更改目录，但不会更改原始目录。

例如：

```
$ pwd
  ~/home/loganaayahee
 $ cc chdir
 $ ./a.out ~/Desktop
 The directory change sucess and the current dir is ~/Desktop
 $ pwd
 ~/home/loganaayahee 
```

shell 不会更改目录。是什么原因？所以我确实改变了原来的目录我做什么？chdir() 函数的用途是什么？

# php - PHP 中 EREGI 的替代函数

> ID：14191212
> 
> 赞同：0
> 
> 时间：2013-01-07T06:50:56.550
> 
> 标签：php, regex, preg-match, eregi

我再次制作了联系表格，并且正在使用 eregi() 。但是众所周知，eregi() 函数在 PHP 5.3 上已被弃用，所以我想知道我可以使用哪些替代函数来替换函数 eregi()？我已经尝试了 !preg_match ，即使我得到了所需的输出，似乎仍然存在错误！>3<

> **警告：** preg_match(): Delimiter must not be alphanumeric or backslash in **C:\xampp\htdocs\Wall\mailform.php** on **line 38** （检测到可能的垃圾邮件尝试。如果不是这种情况，请编辑联系表单的内容然后再试一次。） - () 中的句子是期望的结果。

这是我使用的代码。!preg_match() 曾经是 eregi()。:)

```
function spamcheck($field) {
    if(!preg_match("to:",$field) || !preg_match("cc:",$field) || !preg_match("\r",$field) || !preg_match("\n",$field) || !preg_match("%0A",$field)){ 
        $possiblespam = TRUE;
    }else $possiblespam = FALSE;
    if ($possiblespam) {
        die("Possible spam attempt detected. If this is not the case, please edit the content of the contact form and try again.");
        return 1;
    }
} 
```

感谢任何愿意回答和帮助我的人。非常感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:27:58.210

您必须用分隔符包围正则表达式：

```
preg_match("/to:/",$field)
     here __^   ^ 
```

# c++ - 如何从域控制器获取 Kerberos 凭据

> ID：14191213
> 
> 赞同：0
> 
> 时间：2013-01-07T06:51:01.350
> 
> 标签：c++, windows, iis, kerberos

我的电脑加入了 windows 域，但是我以本地帐户而不是域帐户登录我的电脑。而且我未能通过调用 AcquireCredentialsHandle() 获得 Kerberos 凭据。是否可以获得本地帐户的 Kerberos 凭据？就像 IIS 一样，它使用“NT AUTHORITY\Network Service”帐户运行，这个帐户也是一个本地帐户。IIS 如何从域控制器获取 Kerberos 凭据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:06:39.917

你的说法不正确。微软的[参考资料](http://technet.microsoft.com/en-us/library/aa998749%28v=exchg.65%29.aspx)在“Exchange Services and the LocalSystem Account”一章中说

> 此帐户没有密码。NetworkService 帐户对应于域中本地计算机的计算机帐户。在 LocalSystem 帐户的安全上下文中运行的 Exchange 服务在通过网络访问域资源（例如 Active Directory）时使用本地计算机帐户凭据。

使用域帐户登录或使用[`LogonUserEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378189%28v=vs.85%29.aspx).

# mysql - mysql获取当前周，跨越去年和今年

> ID：14191216
> 
> 赞同：0
> 
> 时间：2013-01-07T06:51:17.037
> 
> 标签：mysql

我需要从本周获取所有记录。但由于 2012 年 12 月 31 日星期一是 2012 年，mysql 将其视为第 53 周，而不是 2013 年的第 1 周。我该如何解决这个问题？

询问：

```
SELECT COUNT(*) AS `cnt`
FROM `orders`
WHERE WEEK(`date_purchased`, 1) = WEEK(NOW(), 1)
    AND (
           (
            MONTH(`date_purchased`) = MONTH(NOW() - INTERVAL 1 WEEK)
            AND YEAR(`date_purchased`) = YEAR(NOW() - INTERVAL 1 WEEK)
            )
        OR (
            MONTH(`date_purchased`) = MONTH(NOW())
            AND YEAR(`date_purchased`) = YEAR(NOW())
            )
        ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T06:56:30.440

根据[ISO 标准](http://en.wikipedia.org/wiki/ISO_8601#Week_dates)，一年中的第 1 周是起始年中大部分天数的第一周，而`week(date,1)`为“2012-12-31”返回第 53 周，或者[根据此](https://stackoverflow.com/questions/11788885/what-mode-for-mysql-week-complies-with-iso-8601)[`week(date,3)`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)等值[`weekofyear(date)`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_weekofyear)正确返回周数[标准](https://stackoverflow.com/questions/11788885/what-mode-for-mysql-week-complies-with-iso-8601)，所以：

```
weekofyear('2013-01-01') = weekofyear('2012-12-31') = 1
-- week starts on Monday, and 2012-12-31 is part of the first week of 2013

weekofyear('2012-01-01') = weekofyear('2011-12-31') = 52
-- last week of 2011 starts on 12-26, first week of 2012 starts on 01-02

weekofyear('2010-01-01') = weekofyear('2009-12-31') = 53
-- some years have 53 weeks

weekofyear('2007-01-01') != weekofyear('2006-12-31')
-- that's correct because the first day of 2007 was a Monday 
```

由于您的要求更具体，如果您必须检查两天是否属于**同一年的同一周**，这仍然不足以回答您的问题。

与其使用`week`, 或`weekofyear`, 不如使用[`yearweek(date,mode)`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_yearweek)函数 using `mode=3`, 它返回与上述相同的周数, 但也可以在本周之前加上年份:

```
yearweek('2013-01-01', 3) = yearweek('2012-12-31', 3) = 201301
yearweek('2012-01-01', 3) = yearweek('2011-12-31', 3) = 201152
yearweek('2010-01-01', 3) = yearweek('2009-12-31', 3) = 200952
yearweek('2007-01-01', 3) != yearweek('2006-12-31', 3) 
```

所以你的查询可能变成：

```
SELECT COUNT(*) AS `cnt`
FROM `orders`
WHERE YEARWEEK(`date_purchased`, 3) = YEARWEEK(DATE(), 3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:05:14.700

采用

```
SELECT COUNT(*) AS `cnt`
    FROM `orders`
    WHERE SUBDATE(CURDATE(), WEEKDAY(CURDATE())) <= `date_purchased`
        AND `date_purchased` < ADDDATE(CURDATE(), 7 - WEEKDAY(CURDATE())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T15:51:55.750

您是否尝试过使用 yearweek()？

yearweek('2012-12-31',1) 和 yearweek('2013-01-01',1) 都给出相同的结果。

计算 yearweek 有不同的方法，这就是参数“1”的意义所在。有关完整列表，请参阅[http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_week](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_week)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-26T13:40:12.077

我有一个非常相似但也有点不同的问题/问题（当然，除非我误解了他的问题）。

我还必须列出本周的所有内容（在我的情况下，这是将在电影院放映的电影）。

但是在我的情况下，我需要它，例如，如果您有电影要在 2013 年 12 月 30 日、2013 年 12 月 31 日和 2014 年 1 月 2 日放映，并且您处于 2013 年的一周中，则可以观看所有电影本周（甚至那些将在 2014 年放映的电影）以及当您在 2014 年的部分时间再次观看所有电影时（甚至是那些在 2013 年放映的电影）。

不必手动指定每年的周数，也不必手动指定年份，因为我当然需要它每年工作而无需修改代码。

这是我当前的 SQL 查询：

```
SELECT * FROM #__cinema_dates AS d LEFT JOIN #__cinema_film AS f on d.fid=f.id WHERE WEEK(d.date) = WEEK(CURDATE()) ORDER BY d.date ASC 
```

# spring - 如何在不使用弹簧的情况下初始化 logAspectj

> ID：14191218
> 
> 赞同：0
> 
> 时间：2013-01-07T06:51:26.373
> 
> 标签：spring, aspectj

我正在遵循[这个示例](http://www.mkyong.com/spring3/spring-aop-aspectj-annotation-example/)并尝试在不使用 spring 或 maven 构建的情况下实现 aspectj。

在带有spring实现的aspectj中，我看到aspect类被加载到这个bean id **logAspect**

```
<bean id="logAspect" class="com.mkyong.aspect.LoggingAspect" /> 
```

如果我想使用没有 spring 的 java 类手动加载它。我应该为哪个接口或类创建这个实现以及如何加载它以便方面日志记录工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:17:31.893

AspectJ 完全独立于 Spring。尽量不要去想“如何在没有 Spring 的情况下使用 AspectJ”，而只是想“如何使用 AspectJ”。话虽如此，我推荐 AspectJ 主页。在那里您会找到文档和介绍性材料，例如[编程指南](http://www.eclipse.org/aspectj/doc/next/progguide/index.html)。它甚至包含用于跟踪、记录、分析的样本。在没有 Spring 的情况下使用 AspectJ 实际上比使用 Spring 简单得多。

如果您在 Eclipse 中使用[AspectJ 开发工具 (AJDT)](http://www.eclipse.org/ajdt/)，您会在安装过程中获得几个代码示例，同样包括跟踪/日志记录。享受！

# c# - 即使光标不受控制也接收鼠标移动

> ID：14191219
> 
> 赞同：2
> 
> 时间：2013-01-07T06:51:32.933
> 
> 标签：c#, winforms, mouseevent

我做了类似滚动条的操作`Control`。一切都很好，但是当光标离开控制区域时，`OnMouseMove`不再收到。

当您使用标准 Windows 滚动条时，即使鼠标光标位于控件表面之外，您也可以使用它。

为了避免这种情况，我唯一的想法是从屏幕上获取光标位置，然后计算屏幕上的滚动条位置，并使用计时器或其他东西来更新我的`Control`. 但这听起来非常困难和丑陋。

知道如何解决吗？

编辑：我的意思`Control`不是`UserControl`。

EDIT2：它接收鼠标！我在代码中有错误，我在 MouseMove 方法中调用了 MouseDown，但是在 MouseDown 我有 X/Y 约束，如果 X<0 等，它将强制返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:48:20.703

您正在寻找的东西被称为`mouse capture`并在此处描述：

[http://msdn.microsoft.com/en-us/library/ms171545(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms171545(v=vs.80).aspx)

简而言之：

*   在您的控件中按下鼠标，您“捕获”鼠标输入
*   那么只要没有其他人捕获鼠标，您将收到所有鼠标移动事件，即使是您无法控制的事件
*   如果不再需要数据，您可以释放捕获，可选择在“OnMouseUp”中

# wpf - 将窗口放置到 WPF 控件的左上角

> ID：14191221
> 
> 赞同：0
> 
> 时间：2013-01-07T06:51:57.477
> 
> 标签：wpf, coordinate-transformation

我试图以某种方式放置一个窗口，使其左上角将位于特定 WPF 控件左上角的同一点。
所以我尝试像这样获取控件的屏幕坐标：

```
 PresentationSource source = PresentationSource.FromVisual(ctrl);
 Point posFromScreen = ctrl.PointToScreen(new Point(0, 0));
 Point targetPoints = source.CompositionTarget.TransformFromDevice.Transform(posFromScreen); 
```

然后我将窗口的`Top`和坐标设置为。 但是我的窗口总是出现在控件的右侧，而不是在左上角与他重叠。 `Left``targetPoints`

我究竟做错了什么？怎么做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:04:20.317

写应该够了

```
var p = ctrl.PointToScreen(new Point());
Left = p.X;
Top = p.Y; 
```

# java - Android - 将 JSON 加载到 ListView

> ID：14191224
> 
> 赞同：2
> 
> 时间：2013-01-07T06:52:06.693
> 
> 标签：java, android, json

我对 Android 开发还是很陌生，正在做一个应用程序/项目，其中涉及将这个 JSON（下面列出）加载到一个`ListView`带有名称、描述和图像的文件中，但它在模拟器上一直是空白的。请告诉我我做错了什么 - 任何帮助将不胜感激！（越具体越好，因为我是新手..）

**JSON：**

```
 {
   "success":true,
   "games":[
      {
         "id":"1",
         "name":"Name of the Game",
         "description":"This is what it is about",
         "image":"IMAGE URL"
      }
   ]
} 
```

**AndroidJSONParsingActivity：**

```
// URL to make request
    private static final String url = "URL of API";

    // JSON Node names
    private static final String TAG_GAMES = "games";
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_DESCRIPTION = "description";
    private static final String TAG_IMAGE = "image";

    // games JSONArray
    JSONArray games = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    // Hash map for ListView
                ArrayList<HashMap<String, String>> gameList = new ArrayList<HashMap<String, String>>();

            // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(url);

            try {
                // Getting Array of Games
                games = json.getJSONArray(TAG_GAMES);

                // looping through All Games
                for(int i = 0; i < games.length(); i++){
                    JSONObject c = games.getJSONObject(i);

                    // Storing each JSON item in variable
                    String id = c.getString(TAG_ID);
                    String image = c.getString(TAG_IMAGE);

                    // is again JSON Object
                    JSONObject author = c.getJSONObject(TAG_DESCRIPTION);
                    String name = author.getString(TAG_NAME);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, id);
                    map.put(TAG_NAME, name);
                    map.put( TAG_IMAGE, image);
                    // adding HashList to ArrayList
                    gameList.add(map);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            /**
             * Updating parsed JSON data into ListView
             * */
            ListAdapter adapter = new SimpleAdapter(this, gameList,
                    R.layout.list_item,
                    new String[] { TAG_NAME, TAG_DESCRIPTION }, new int[] {
                            R.id.name, R.id.description });

            setListAdapter(adapter);

            // selecting single ListView item
            ListView lv = getListView();

            // Launching new screen on Selecting Single ListItem
            lv.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    // getting values from selected ListItem
                    String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                    String description = ((TextView) view.findViewById(R.id.description)).getText().toString();

                    // Starting new intent
                    Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                    in.putExtra(TAG_NAME, name);
                    in.putExtra(TAG_DESCRIPTION, description);
                    startActivity(in);

                }
            });

        } 
```

**JSON解析器：**

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject getJSONFromUrl(String url) {

        // Making HTTP request
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

**主.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <!-- Main ListView 
         Always give id value as list(@android:id/list)
    -->
    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

list_item.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">
    <!-- Name Label -->
    <TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#43bd00"
        android:textSize="16sp"
        android:textStyle="bold"
        android:paddingTop="6dip"
        android:paddingBottom="2dip" />
        <TextView
            android:id="@+id/description"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textColor="#acacac"
            android:paddingBottom="2dip" />
        </LinearLayout> 
```

添加 LogCat 信息：

```
01-03 06:16:15.254: E/ActivityThread(616): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d47b40 that was originally bound here
01-03 06:16:15.254: E/ActivityThread(616): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d47b40 that was originally bound here
01-03 06:16:15.254: E/ActivityThread(616):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-03 06:16:15.254: E/ActivityThread(616):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-03 06:16:15.254: E/ActivityThread(616):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-03 06:16:15.254: E/ActivityThread(616):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-03 06:16:15.254: E/ActivityThread(616):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-03 06:16:15.254: E/ActivityThread(616):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
01-03 06:16:15.254: E/ActivityThread(616):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
01-03 06:16:15.254: E/ActivityThread(616):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
01-03 06:16:15.254: E/ActivityThread(616):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
01-03 06:16:15.254: E/ActivityThread(616):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
01-03 06:16:15.254: E/ActivityThread(616):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
01-03 06:16:15.254: E/ActivityThread(616):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-03 06:16:15.254: E/ActivityThread(616):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
01-03 06:16:15.254: E/ActivityThread(616):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-03 06:16:15.254: E/ActivityThread(616):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-03 06:16:15.254: E/ActivityThread(616):  at java.lang.Thread.run(Thread.java:856)
01-03 06:16:15.365: E/StrictMode(616): null
01-03 06:16:15.365: E/StrictMode(616): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d47b40 that was originally bound here
01-03 06:16:15.365: E/StrictMode(616):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
01-03 06:16:15.365: E/StrictMode(616):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
01-03 06:16:15.365: E/StrictMode(616):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
01-03 06:16:15.365: E/StrictMode(616):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
01-03 06:16:15.365: E/StrictMode(616):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
01-03 06:16:15.365: E/StrictMode(616):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
01-03 06:16:15.365: E/StrictMode(616):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
01-03 06:16:15.365: E/StrictMode(616):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
01-03 06:16:15.365: E/StrictMode(616):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
01-03 06:16:15.365: E/StrictMode(616):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
01-03 06:16:15.365: E/StrictMode(616):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
01-03 06:16:15.365: E/StrictMode(616):  at android.os.AsyncTask$2.call(AsyncTask.java:287) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:53:32.533

这是我的代码

```
public class as extends AsyncTask   {

            public as(int aa)       {
                        }

            @Override       protected Object doInBackground(Object... params)       {           //int price1,sp1,save1;             try             {           JSONObject json = JSONfunctions.getJSONfromURL("http://192.168.1.97/inventory/Client.php?action=productlist&page_no="+aa+"&user_id="+userid+"");            Log.e("url", String.valueOf("http://192.168.1.97/inventory/Client.php?action=productlist&page_no="+aa+"&user_id="+userid+""));          mylist = new ArrayList<HashMap<String, String>>();
                try{
                    JSONArray  products = json.getJSONArray("product");
                    Log.v("inside", "inside");

                    Log.e("pages",String.valueOf( json.get("products_count")));
                    pagecount=json.getInt("page_count");

                    //JSONObject e1 = pages.getJSONObject("tot_pages");

                //  Log.e("totpages",e1.getString("tot_pages"));
                //  pagecount=json.getInt("tot_pages");
                    // pcount=json.getInt("p_count");

                    for(int i=0;i<products.length();i++){   
                        String img,img1;
                        HashMap<String, String> map = new HashMap<String, String>();    
                        Log.e("p c",String.valueOf(i));
                        JSONObject e = products.getJSONObject(i);
                        Log.v("name", String.valueOf(e.getString("name")));
                        map.put("name",e.getString("name"));
                        map.put("price",e.getString("price"));
                        map.put("sp",e.getString("special_price"));
                        map.put("image", String.valueOf(e.getString("image")));
                    float price1 = Float.parseFloat(e.getString("price"));
                    float sp1=Float.parseFloat(e.getString("special_price"));
                    float save1=price1-sp1;
                    map.put("save",String.valueOf(save1));

                        mylist.add(map);    

                    }       
                }catch(JSONException e)
                {
                     Log.e("log_tag", "Error parsing data "+e.toString());

                }

                    }   catch(Exception e)
             {      e.printStackTrace();

             }
                            return null;

                        }

            @Override       protected void onPostExecute(Object result)         {           //lv.setAdapter(new ItemListBaseAdapter(AllItems.this, mylist));
                        }

            @Override       protected void onPreExecute()       {           try{            progressDialog = ProgressDialog.show(AllItems.this, "", "Please wait");             }           catch (Exception e) {

                    e.printStackTrace();

                                }           super.onPreExecute();       }

        }       //previous check method

                public class ItemListBaseAdapter extends BaseAdapter {

                    private  ArrayList<HashMap<String, String>> itemDetailsrrayList;         Bitmap bitmap[];           Context context1;           String ab;

                        private LayoutInflater l_Inflater;

            public ItemListBaseAdapter(Context context, ArrayList<HashMap<String, String>> mylist)      {
                            itemDetailsrrayList = mylist;           //l_Inflater = LayoutInflater.from(context);            context1=context;
                }

            public int getCount() {             return itemDetailsrrayList.size();
                        }

            public Object getItem(int position) {           return itemDetailsrrayList.get(position);       }

            public long getItemId(int position) {
                            return position;        }

                    public View getView( final int position, View convertView, ViewGroup parent)        {
              int ruban=3;
                        //final ViewHolder holder;

                        if (convertView == null) {
                    l_Inflater = LayoutInflater.from(context1);

                     convertView = l_Inflater.inflate(R.layout.list1, null,true);

                                }

                            TextView txt_itemName = (TextView) convertView.findViewById(R.id.textView1);            TextView txt_itemDescription = (TextView) convertView.findViewById(R.id.mrp1);          TextView txt_itemPrice = (TextView) convertView.findViewById(R.id.ourprice1);           TextView txt_itemSave = (TextView) convertView.findViewById(R.id.save1);            //holder.txt_itemw = (TextView) convertView.findViewById(R.id.textView4);           WebView itemimmm=(WebView)convertView.findViewById(R.id.imageView1);            TextView t1 = (TextView) convertView.findViewById(R.id.t1);             TextView t2 = (TextView) convertView.findViewById(R.id.t2);             TextView t3 = (TextView) convertView.findViewById(R.id.t3);             ImageView addprod=(ImageView)convertView.findViewById(R.id.addprod);            final Button decprod=(Button)convertView.findViewById(R.id.decprod);
                final TextView disprod=(TextView)convertView.findViewById(R.id.disprod);            decprod.setVisibility(View.INVISIBLE);          disprod.setVisibility(View.INVISIBLE);
                            txt_itemDescription.setPaintFlags(txt_itemDescription.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);           itemimmm.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);
                            txt_itemName.setTypeface(AllItems.face);            txt_itemDescription.setTypeface(AllItems.face);             txt_itemPrice.setTypeface(AllItems.face);           txt_itemSave.setTypeface(AllItems.face);            //holder.txt_itemw.setTypeface(AllItems.face);          t1.setTypeface(AllItems.rupee);
                t2.setTypeface(AllItems.rupee);
                t3.setTypeface(AllItems.rupee);
                //StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
                //StrictMode.setThreadPolicy(policy);           txt_itemName.setText(itemDetailsrrayList.get(position).get("name"));            txt_itemDescription.setText(itemDetailsrrayList.get(position).get("price"));            txt_itemPrice.setText(itemDetailsrrayList.get(position).get("sp"));
                txt_itemSave.setText(itemDetailsrrayList.get(position).get("save"));            //holder.txt_itemw.setText(itemDetailsrrayList.get(position).get("type"));
                itemimmm.loadUrl(itemDetailsrrayList.get(position).get("image"));           if(itemDetailsrrayList.get(position).get("name").equals("Daughter")||itemDetailsrrayList.get(position).get("name").equals("Ethnic"))            {
                Log.e("name", String.valueOf(itemDetailsrrayList.get(position).get("name")));           //decprod.setVisibility(View.VISIBLE);          //disprod.setVisibility(View.VISIBLE);          }

                  // Log.e("before", "try");

                        /*  try{

                        Log.e("try", String.valueOf(itemDetailsrrayList.get(position).get("image")));
                     Bitmap bitmap1 = BitmapFactory.decodeStream((InputStream) new URL(itemDetailsrrayList.get(position).get("image")).getContent());
                     itemimmm.setImageBitmap(bitmap1);
                    }catch(Exception ex){

                         ex.printStackTrace();
                         Log.e("error",String.valueOf(ex));
                     itemimmm.setImageResource(getResources().getIdentifier("ic_launcher", "drawable", getPackageName())); 

                        Log.e("catch", "catch");*/

                //prodImage.setImageResource(getResources().getIdentifier("sample", "drawable", getPackageName()));

                //itemimmm.setImageResource(getResources().getIdentifier("ic_launcher", "drawable", getPackageName())); 

                    //holder.itemImage.setImageBitmap(bitmap[position]);

                              addprod.setOnClickListener(new OnClickListener() {
                                @Override
                    public void onClick(View arg0)          {

                       //decprod.setVisibility(View.VISIBLE);
                        //disprod.setVisibility(View.VISIBLE);

                                       /*   int k = 0;
                                        if(disprod.getText()!="" || disprod.getText()!=null){
                                            k = Integer.parseInt(String.valueOf(disprod.getText()));
                                        }
                                        disprod.setText(String.valueOf(++k));
                                        disprod.setTag(k);*/
                                       Log.v("position", String.valueOf(position));

                                new AddCart(decprod,disprod).execute();

                    }           });   

                decprod.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View arg0)
                    {
                        //Log.v("item name", String.valueOf(itemDetailsrrayList.get(position).get("price")));

                    }           });

               /* textView.setText(getelement()[position]);

                 ImageView imageView = (ImageView) convertView
                .findViewById(R.id.icon);
                 imageView.setImageBitmap(bitmap);*/

                    return convertView;

                   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:05:40.730

**AsyncTask.class**

```
class LoadMovies extends AsyncTask<Void, Void, List<Category>>{

private YourActivity activity;

public LoadMovies(YourActivity activty){
    activity = activty;
}

        private final static String TAG = "Log";

        @Override
        protected List<Category> doInBackground(Void... params) {
            InputStream ips = null;
            JSONObject json = null;

            try{
                DefaultHttpClient client = new DefaultHttpClient();
                HttpResponse response = client.execute(new HttpGet("http://youtsite"));

                ips = response.getEntity().getContent();
                BufferedReader buffer = new BufferedReader(new InputStreamReader(ips));
                StringBuilder builder = new StringBuilder();
                String line;

                while((line = buffer.readLine()) != null){
                    builder.append(line+"\n");
                }
                json = new JSONObject(builder.toString());

            }
            catch(Exception e){
                Log.i(TAG, e.toString());
            }

                List<Category> list = new ArrayList<Category>();
                JSONArray array = json.optJSONObject("data").optJSONArray("reviews");
                for (int i = 0; i < array.length(); i++){
                    JSONObject rss = array.optJSONObject(i); 
                                    Category cat = new Category();
                                    cat.addName(rss.optString("name"));  
                                    cat.addCode(rss.optString("code"));                     
                    list.add(cat);
                }

            return list;
        }

        protected void onPostExecute(List<Category> result){
            super.onPostExecute(result);
                    Youractivity.mMoviesAdapter.addCategory(result);
        }

    } 
```

**类别.class**

```
public class Category {
    private String name;
    private String code;

    void addName(String name){
        this.name = name;
    }

    void addCode(String code){
        this.code = code;
    }

    public String getName(){
     return this.name;
    }

    String getCode(){
        return this.code;
    }
} 
```

适配器类

```
class MoviesAdapter extends ArrayAdapter<Category> {

    Context c;      
    List<Category> mListCategory; 

    public MoviesAdapter(Context context, int resource, int textViewResource, List<Categoryy> list) {
        super(context, resource, textViewResource, list);
        c = context;

        mListCategory= list;
    }

    public void addCategory(List<MoviesCategory> list){
        mListCategory.addAll(list);
        notifyDataSetChanged();
    }

    @Override
     public View getView(int position, View convertView, ViewGroup parent){
        View v = convertView;
        if(v == null){
            LayoutInflater inflater = LayoutInflater.from(c);
            v = inflater.inflate(R.layout.yourview, null);
        }

        TextView title =  (TextView) v.findViewById(R.id.title);
        TextView code=  (TextView) v.findViewById(R.id.code);

        Category cat = getItem(position);
        if(mov != null){
            title.setText(cat.getName());
            code.setText(cat.getCode());

        }

        return v;
    }   

} 
```

并在 MainActivity 调用所有

```
 public class YourActivity extends MainActivity{
    private ListView mCategory;
    private List<Category> mCategoryArray = new ArrayList<Category>();
    private LoadMovies mLoadMovies;
    public mMoviesAdapter adapter;

   @Override
   protected void onCreate(Bundle bundle){
   super.onCreate(bundle);

    //MoviesList        
        mMoviesAdapter = new MoviesAdapter(this, R.layout.main_movies_adapter, R.id.youradapterlayout, mCategoryArray );
        mCategoryList = (ListView) findViewById(R.id.movies_adapter_list);
        mMoviesList.setAdapter(mMoviesAdapter);

        mLoadMovies = new LoadMovies(this);
        mLoadMovies.execute();
}
    } 
```

# android - 执行 JSON 查询时出现 AndroidBlockGuardPolicy 错误

> ID：14191226
> 
> 赞同：0
> 
> 时间：2013-01-07T06:52:28.857
> 
> 标签：android, json, android-asynctask

尝试执行 JSON 查询时出现 AndroidBlockGuardPolicy 错误。看看其他例子，我想使用 AsyncTask，我以为我做到了，但我得到了一个错误......我只是没有看到什么吗？

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.pm_article);
    context = this;

    StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
    .detectAll()
    .penaltyLog()
    .penaltyDialog()
    .build());

    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    getSupportActionBar().setHomeButtonEnabled(true);
    // getting product details from intent
     Intent i = getIntent();

        // getting product id -section id (sid) from intent

        //Receive the section id (SID) from th intent
        String id = i.getStringExtra(PM_section.INTENT_ID);
        id_pub = id;
        new GetProductDetails().execute();

} 
```

异步任务

```
 class GetProductDetails extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(PM_article.this);
            pDialog.setMessage("Loading product details. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Getting product details in background thread
         * */

        protected String doInBackground(String... args) {
            runOnUiThread(new Runnable() {
                public void run () {
                    SharedPreferences sharedPrefs = PreferenceManager
                            .getDefaultSharedPreferences(context);
                    int success;
                    try {
                        //sid2.setText("ID: " + id_pub); 
                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("id", id_pub));
                        System.out.println("Loading stories into the activity!");
                        // getting product details by making HTTP request
                        // Note that product details url will use GET request
                        JSONObject json = jParser.makeHttpRequest(url_load_article, "GET", params);
                        System.out.println("Loading stories into the actisadfsafdsafvity!");
                        // check your log for json response
                        Log.d("Single Product Details", json.toString());

                        // json success tag
                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {
                            // successfully received product details
                            JSONArray contentObj = json
                                    .getJSONArray(TAG_PRODUCT); // JSON Array

                            // get first product object from JSON Array
                            JSONObject product = contentObj.getJSONObject(0);

                            // product with this pid found
                            // Edit Text
                            art_title = (TextView) findViewById(R.id.display_title);
                            art_author = (TextView) findViewById(R.id.display_author);
                            art_publishtime = (TextView) findViewById(R.id.display_date);
                            art_content = (TextView) findViewById(R.id.display_content);

                            // display product data in TextView
                            int text_size = Integer.parseInt(sharedPrefs.getString("prefFontSize", "1"));

                            art_title.setText(product.getString(TAG_TITLE));
                                art_title.setTextSize(TypedValue.COMPLEX_UNIT_SP, text_size+20);
                            art_author.setText(product.getString(TAG_AUTHOR));
                                art_author.setTextSize(TypedValue.COMPLEX_UNIT_SP, text_size+14);    
                                      art_publishtime.setText(product.getString(TAG_PUBLISHTIME));
                                art_publishtime.setTextSize(TypedValue.COMPLEX_UNIT_SP, text_size+14);
                            art_content.setText(product.getString(TAG_CONTENT));
                                art_content.setTextSize(TypedValue.COMPLEX_UNIT_SP, text_size+18);

                        }else{
                            // product with pid not found
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });

            return null;
        }
        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once got all details
            pDialog.dismiss();
        }

    } 
```

错误日志

```
01-06 22:58:42.263: E/AndroidRuntime(23835): FATAL EXCEPTION: main
01-06 22:58:42.263: E/AndroidRuntime(23835): android.os.NetworkOnMainThreadException
01-06 22:58:42.263: E/AndroidRuntime(23835):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at com.example.pt_layout_test3.JSONParser.makeHttpRequest(JSONParser.java:62)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at com.example.pt_layout_test3.PM_article$GetProductDetails$1.run(PM_article.java:180)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at android.os.Handler.handleCallback(Handler.java:615)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at android.os.Looper.loop(Looper.java:137)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at android.app.ActivityThread.main(ActivityThread.java:4745)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at java.lang.reflect.Method.invokeNative(Native Method)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at java.lang.reflect.Method.invoke(Method.java:511)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-06 22:58:42.263: E/AndroidRuntime(23835):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:03:14.347

当前，您正在尝试访问 Ui 元素并`runOnUiThread` 从`doInBackground`AsyncTask 运行，这是不可能的。

当 doInBackground 执行完成时，您需要将所有 UI 元素初始化移入`onPreExecute`并`onPostExecute`用于更新 UI 元素。将您的课程创建`AsyncTask`为：

```
class GetProductDetails extends AsyncTask<String, String, String> {

// Declare UI elemnts here

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
              // show ProgressDialog and initilize Ui elemnts
        }

        protected String doInBackground(String... args) {

             // add your code here from makeing JSON request 
             // 
            return null;
        }
        protected void onPostExecute(String file_url) {
            // Update UI when doInBackground exection completes
        }

    } 
```

有关我们如何在应用程序中使用 AsyncTask 的更多信息，请参见：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# jquery - 在 link_to 和 render partial 之间传递参数

> ID：14191229
> 
> 赞同：0
> 
> 时间：2013-01-07T06:52:58.377
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

如图所示，我正在使用 link_to 呈现部分内容（如单击 link_to 时呈现部分内容）。我想将参数 u.id 传递给部分但我没有成功:(我做错了什么？我很绝望。

**编辑：终于让它工作了。这是我的代码：**

在我看来， users/show.html.erb -“u”是集合中的每个实用程序

```
<% @utilities.each do |u| %>
    <%= link_to u.name, { :controller => :users, :action => :show, :util_id => u.id }, :remote => true %>
<% end %> 
```

在我的用户结束时#show 控制器方法

```
 respond_to do |format|
        format.html {
            redirect_to @current_user and return
        }
        format.json {
            redirect_to @current_user.json and return
        }
        format.js {
          @util_id = params[:util_id]
          redirect_to @current_user and return
        }
    end 
```

显示.js.erb：

```
$("#editUtil").prepend('<%= escape_javascript(raw render :partial => "utilEdit", :locals => {:util => params[:util_id]} ).html_safe%>'); 
```

我的部分：_utilEdit.html.erb

```
TEST: <%= Utility.find(util).name %> 
```

感谢所有帮助过的人！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:38:51.743

```
<%= link_to u.name, '/users/show', :util_id => u.id, :remote => true %> 
```

以这种格式`link_to` `:util_id`转到 html_options，所以你会得到像

```
<a href="/users/show" util_id="1" data-remote="true">... 
```

但是你需要类似的东西

```
<a href="/users/show?util_id=1" data-remote="true">... 
```

尝试使用命名路径或`{ :controller, :action, :params }`结构代替

```
<%= link_to u.name, show_users_path(:util_id => u.id), :remote => true %> 
```

或者

```
<%= link_to u.name, { :controller => :users, :action => :show, :util_id => u.id }, :remote => true %> 
```

# algorithm - App Store 如何计算每个应用的唯一下载次数？

> ID：14191231
> 
> 赞同：-4
> 
> 时间：2013-01-07T06:53:04.890
> 
> 标签：algorithm, performance, hadoop, data-structures, analytics

“唯一”意味着如果一个应用被用户下载超过 1 次，它的下载计数**永远**保持为 1，直到另一个用户再次下载该应用。例如，我们跟踪用户下载行为如下：

```
Date        User        App name
2012-01-01  jack        Angry Birds
2012-01-01  jack        Angry Birds
2012-01-02  jack        Angry Birds
2012-01-02  paul        Angry Birds
2012-01-02  jack        Snappea 
```

这应该给出结果：

```
Angry Birds        2
Snappea            1 
```

一个简单的实现方式是我们使用数据结构，比如 HashSet 来存储**User + App name**作为它的 key。但实际上，App Store 拥有大量用户和应用程序。假设用户数是 400M 并且有 650K 的应用程序，HashSet 的大小在最坏的情况下会达到 400M * 650K = **260T 。**我们还假设我们需要计算**每天**的下载次数。

根据[Google Play 的 600,000 个应用程序，200 亿的总安装量](http://www.engadget.com/2012/06/27/google-play-hits-600000-apps/)，App Store 的总下载量在 2012 年 6 月**达到 300 亿**。这仍然是一个很大的数字。

那么我们怎样才能用更少的空间又快速地实现呢？如果使用hadoop/hbase？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:04:25.747

使用数据库：有一个`users`. 每个用户都应该有下载历史。当用户下载一个应用程序时，它将被添加到下载历史中。如果这是一个新应用程序，它还将更新`app`表（使用触发器）以增加计数。听起来不错？

# asp.net - 我必须将 CausesValidation="False" 添加到每个 ASP 按钮才能工作，为什么？

> ID：14191235
> 
> 赞同：4
> 
> 时间：2013-01-07T06:53:31.003
> 
> 标签：asp.net, vb.net, visual-studio-2008

您好，我有一个大 ASP 页面，我必须在每个 ASP 按钮中设置：

```
CausesValidation="False" 
```

去工作。如果不这样做，它就无法运行代码隐藏功能。

有人可以向我解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T06:56:48.433

您似乎在页面中使用了验证控件。您的页面必须在回发到服务器之前通过验证。下面是 CausesValidation 属性的功能：

*   CausesValidation 属性指定在单击 Button 控件时是否验证页面。

*   默认情况下，单击按钮时会执行页面验证。

*   此属性主要用于在单击取消或重置按钮时阻止验证。

# android - Android AsyncTask 更新列表

> ID：14191236
> 
> 赞同：1
> 
> 时间：2013-01-07T06:53:39.290
> 
> 标签：android, android-asynctask, notifydatasetchanged

我需要帮助，在我`AsyncTask`调用我`MainActivity`的和更新适配器时，LogCat 给`NullPointerException`我`onPostExecture`检查了这个列表，它不为空，有一些值

**异步任务.java**

```
protected void onPostExecute(List<MoviesCategory> result){
    super.onPostExecute(result);
    //Here i have Error, i cheked result it's not null.
    //On AsyncTask i have Constructor when i get Activity.
    activity.mMoviesAdapter.addCategory(result);
} 
```

**适配器.java**

```
List<MoviesCategory> mListMovies;

public void addCategory(List<MoviesCategory> list){
    mListMovies.addAll(list);
    notifyDataSetChanged();
} 
```

我究竟做错了什么，

***更新***

**更新**

```
FATAL EXCEPTION: main
java.lang.NullPointerException
    at uz.afishamedia.Adapter.MoviesAdapter.addCategory(MoviesAdapter.java:49)
    at uz.afishamedia.Utils.LoadMovies.onPostExecute(LoadMovies.java:74)
    at uz.afishamedia.Utils.LoadMovies.onPostExecute(LoadMovies.java:1)
    at android.os.AsyncTask.finish(AsyncTask.java:631)
    at android.os.AsyncTask.access$600(AsyncTask.java:177)
    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5191)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:15:23.100

您的 mListMovies 列表是否已初始化？在您发布的代码中，您只创建引用变量，但不创建实际列表。如果引用变量未初始化，则对其调用方法将导致`NullPointerException`. 所以不要使用：

```
List<MoviesCategory> mListMovies; 
```

利用：

```
List<MoviesCategory> mListMovies = new ArrayList<MoviesCategory>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:15:29.567

问题是 mListMovies 为空。在您的适配器中像这样初始化它：

```
private List<MoviesCategory> mListMovies = new ArrayList<MoviesCategory>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T07:17:11.443

我想你可能初始化失败了`mListMovies`。
添加这可能会有所帮助：

```
List<MoviesCategory> mListMovies = new ArrayList<MoviesCategory>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T07:21:28.240

问题是`mListMovies`从一开始就是空的。您需要先对其进行初始化。

**适配器.java**：

```
List<MoviesCategory> mListMovies = new ArrayList<MoviesCategory>(); 
```

# php - 使一行可点击

> ID：14191241
> 
> 赞同：0
> 
> 时间：2013-01-07T06:53:54.000
> 
> 标签：php, javascript, ajax

我正在创建一个社交网站。我有一个文本框`search.php`来搜索存储在数据库中的场地。当用户开始输入场地名称时，存储在数据库中的场地名称列表应该加载到 div`venuesearch`中。这很好用。我的问题是我需要使 div 内的行`venuesearch`可点击，这样当用户单击特定行时，该值应该出现在文本框中。

搜索.php

```
<script language="javascript">
function showData(str)
{
    if (str.length==0)
    {
        document.getElementById("venuesearch").innerHTML="";
        document.getElementById("venuesearch").style.border="0px";
        return;
    }
    var venue_data = document.getElementById("venue").value;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
         xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("venuesearch").innerHTML=xmlhttp.responseText;
            document.getElementById("venuesearch").style.border="1px solid #A5ACB2";    
            document.getElementById("venuesearch").style.zIndex = "100";
        }
    }
    xmlhttp.open("GET","aj_search.php?venue="+str,true);
    xmlhttp.send();
}
 </script>
 </head>

<body>

<input id="venue" name="venue" type="text" onkeyup="showData(this.value)" value="Tag venue name"/>
<div id="venuesearch">
</div>
</body> 
```

aj_search.php

```
 <?php
$dbhandle=mysql_connect("localhost","root","")or die("Unable to connect");
$select=mysql_select_db("scenekey",$dbhandle) or die("Unable to connect");

    if(isset($_GET['venue']))
    {
  $venue_name = $_GET['venue'];
    }
    $hint='';
    $query_get_venue = "SELECT * from sk_accounts WHERE acnt_member_class='venue' and acnt_fname LIKE '".$venue_name."%'";

     $result_query_get_venue = mysql_query($query_get_venue);
     $row_count = mysql_num_rows($result_query_get_venue);
 if($row_count > 0)
 {
    $hint = "<table>";
     while($row = mysql_fetch_array($result_query_get_venue))
     {

         $act_fname = $row['acnt_fname'];
         $act_lname = $row['acnt_lname'];
         $act_name = $act_fname . ' ' . $act_lname;
         $hint.= "<tr><td>".$act_name."</td></tr>";
     }
     $hint .= "</table>";
 }
     if ($hint == "")
     {
   $response="no suggestion";
     }
     else
     {
 $response=$hint;
      }

     //output the response
     echo $response;
      ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:56:23.273

添加`id`或`class`然后为相同或添加`javascript`功能设置点击事件

```
 $hint.= "<tr onClick ='hintVal(".$act_name.");'><td>".$act_name."</td></tr>"; 
```

在 JavaScript 中：

```
function hintVal(trVal) {
 alert('tr clicked');
 alert('tr value:'+trVal);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T06:59:47.487

为什么不能用`Jquery Autocomplete`？

[http://www.pengoworks.com/workshop/jquery/autocomplete.htm](http://www.pengoworks.com/workshop/jquery/autocomplete.htm)

[http://code.google.com/p/jquery-autocomplete/](http://code.google.com/p/jquery-autocomplete/)

# animation - 从图片创建电影的软件，就好像它是录制的一样

> ID：14191244
> 
> 赞同：0
> 
> 时间：2013-01-07T06:54:04.703
> 
> 标签：animation, video

我正在寻找一种可以拍摄照片（比如说 40 张）并进行一些更改的软件（例如，一位孕妇每周拍摄 1 张照片，然后他们从中创建了一个视频。目标是显示视频原样不是拍摄的照片。程序必须创建所有图像才能完成过渡，使其看起来像真实的。

我见过这样的程序，但我不记得它的名字。我正在开发一个应用程序，我想研究这样的程序有哪些功能！

[这里](http://www.youtube.com/watch?v=wcrkRuzg10s)我有一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T12:49:43.267

我发现。

这些软件称为变形软件。

这里是它们的列表：

[http://morphing-software-review.toptenreviews.com/](http://morphing-software-review.toptenreviews.com/)

# ios - 使用光盘中的数千张图像实现 Photo Grid 的平滑滚动

> ID：14191246
> 
> 赞同：6
> 
> 时间：2013-01-07T06:54:15.250
> 
> 标签：ios, ios5, ios6, smooth-scrolling, nscache

我`PhotoGrid`每行有一张三张照片，使用`UITableView`.

我有一个内存缓存（使用 NSCache），它可以容纳 100 张图像，所以即使我在磁盘上有数千张图像要显示在网格中，我也会有一次在内存中最多有 100 张图像。

我所有的图像都是 4KB-20KB JPEG。

因此，使用此基础架构，当用户滚动照片网格时，图像会不断地从 NSCache 加载和卸载。正常滚动一切看起来都不错，我得到大约 55-58 fps。

当用户开始更快地来回滚动时，我有两种情况：

1.  如果我将图像加载任务从主线程中分离出来，我最终会在照片网格上丢失图像，因为我的单元格在图像被读入内存之前显示。

    ```
    (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            UIImage *image = getImageFromCacheForImagePath:imagePath;
            dispatch_async(dispatch_get_main_queue(), ^{
                cell.leftGridItem.imageView.image =  image;
            });
        });
    } 
    ```

2.  如果我在主线程上有图像加载任务，则会出现口吃。我得到大约36-45fps。

    ```
    (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        UIImage *image = getImageFromCacheForImagePath:imagePath;
        cell.leftGridItem.imageView.image = image;
    } 
    ```

`getImageFromCacheForImagePath:imagePath`如果存在，则立即从 NSCache 获取图像，如果不存在，则从文件中加载图像并设置到 NSCache 以供以后使用，但我将限制设置`NSCache`为 100。

我尝试/调整的事情：

1.  避免`clipsToBounds`用于网格图像视图。
2.  在后台线程上加载图像。
3.  `NSOperation`队列的使用。
4.  以 100 个批量加载图像（有效，但快速滚动，图像加载时间被延迟）。

**我试图达到与原生照片应用程序相同的感觉。**

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:33:53.380

几天前我也遇到了同样的问题，所以 GitHub 是搜索开源解决方案的最佳位置，所以试试这些链接。

检查[PF-GridView](https://github.com/pettyfun/pf-gridview)或[DTGridView](https://github.com/danielctull/DTGridView)。

也看看[AQGridView](https://github.com/AlanQuatermain/AQGridView)，[如何编写像 UIImagePicker 这样的自定义图像选择器](http://www.raywenderlich.com/130/how-to-write-a-custom-image-picker-like-uiimagepicker)，

只需要根据我们的需要进行位操作，它就像一个冠军。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T20:50:41.133

我已经实现了一个包含 700 多个图像的平滑滚动表。关键是不仅要在后台加载图像，还要在后台调整它的大小以完全适合容器。显然调整大小的操作太繁重，无法在 UI 线程中进行。

# width - 文本的动态最大宽度

> ID：14191254
> 
> 赞同：10
> 
> 时间：2013-01-07T06:55:10.323
> 
> 标签：width, css

所以假设我有这个标记；

```
<div>
  <span>Text one</span>
  <span class="sticky">ABC</span>
</div>
<div>
  <span>Some other text</span>
  <span class="sticky">DEF</span>
</div>
<div>
  <span>Lorem dolor sit amet lorem ipsum dolor</span>
  <span class="sticky">GHI</span>
</div> 
```

这将 - 与伴随的 CSS - 产生如下图所示的结果。

但是，当第一个中的文本`span`长于分配的`div`. 通常发生的只是正常的文本换行；第二个`span`被撞到第二行的末尾。

但是，我希望这个元素只是单行。现在，当然要实现这一点，您可以这样做；

```
white-space: nowrap;
overflow: hidden; 
```

但是随后发生的事情是第二个`span`消失在遗忘中，因为它被第一个中文本的长度赶走了`span`。

我想要实现的是下面第三个示例中的图片。当第一个的内容`span`太长而无法显示时，`text-overflow: ellipsis;`会用点-点-点切割字符串，而第二个`span`将被推到最右边（允许`padding`的）。`div`

`max-width`本质上，第一个的伪`span`将等于 的宽度`div`，不包括它`padding`并减去 的宽度`span.sticky`，无论它是什么（因为它的内容可能会有所不同，因此没有设置宽度）。

我不知道`max-width`在接近这样的事情时是否真的要走，但这是我可以用来最好地描述我想要的行为的方法。

有没有一种非 JS 方法来实现这一点？

![例子](../Images/5492c77068d5048de8d0987f876c8d9c.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-08T22:24:52.147

这绝对可以，并且应该在 CSS 中完成。在第一个跨度上应用固定宽度和固定高度。高度使其不会拉伸到多条线。然后可以定位 .sticky 跨度。甚至可以使用百分比或 ems 使之变得流畅。需要考虑的一点是，我不知道“ABC”、“DEF”的上下文，但如果它们是纯粹的视觉元素而不是结构元素，则最好使用 :before 或 :after 伪类来应用它们。

这是一个简单的例子：

```
div { 
    width: 200px; /* some amount that you set */
}
span:not(.sticky) { /* can use another selector, just wanted it to be exceptionally clear what i was referring to here */
    display: inline-block; /* so height and width actually take affect */
    max-width: 80%;
    height: 1em; /* so overflow hidden works and keeps text on one row */
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap; /* important to show ellipsis, or words will just be broken off */
}
span.sticky {
    display: inline-block;
    width: 20%;
} 
```

如果你想在现场看到这个工作，我在 moolta.com 上做了这个设计。单击“发起挑战”并打开模式以选择朋友。下拉列表中的 li 就是我所说的。他们必须变成省略号，并有一个按钮跟随他们，而不是断线

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-04T00:38:24.837

```
<html>
  <head>
    <style>
      .left {
        max-width: 200px;
        display: inline-block;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .right {
        float: right;
      }
    </style>
  </head>
  <body>
    <div class="left">
      <div class="right">FOO</div>
      Lorem
    </div>
    <br />
    <div class="left">
      <div class="right">FOO</div>
      Lorem ipsum
    </div>
    <br />
    <div class="left">
      <div class="right">FOO</div>
      Lorem ipsum dolor sit amet, consectetur adipisicing elit
    </div>
  </body>
</html> 
```

# android - 当我开发一个 Android 应用程序时，我想在较低的 android 版本中使用更高 API 的方法。怎么做？

> ID：14191258
> 
> 赞同：2
> 
> 时间：2013-01-07T06:55:18.727
> 
> 标签：android, api, listview, backwards-compatibility

当我开发一个 Android 应用程序时，我想在较低的 android 版本中使用更高 API 的方法？下面是ListView的一个方法

```
public void smoothScrollToPosition(int position)  Since API Level 8, 
```

但是我想在较低的android版本中使用这种方法，例如，API 5怎么做？？？？谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T06:58:00.067

基本上你做不到。*但是*，您可以在更高版本中使用它，并在代码中为旧版本提供一些向后兼容性：

```
@TargetApi(Build.VERSION_CODES.FROYO)
private void allowSmoothScrollIfSupported() {
    if ( Build.VERSION.SDK_INT >= Build.VERSION_CODES.FROYO ) {
        list.smoothScrollToPosition(position)
    } else {
        list.scrollToPosition(position)
    }
} 
```

此方法只会在 API 版本 8 及更高版本上执行，并且不会在以下崩溃：它将回退到旧 API ( `scrollToPosition`)。

并且在您的中`AndroidManifest.xml`，您可以指出您的目标是最新的 api，但从 5 开始支持所有这些：

```
 <uses-sdk
        android:minSdkVersion="5"
        android:targetSdkVersion="17" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:29:56.187

除了@snicolas 的解决方案，您可以使用反射：

```
 try {       
        Method smoothScrollToPositionMethod = ListView.class.getMethod("smoothScrollToPosition", int.class);
        smoothScrollToPositionMethod.invoke(list, position);
    } catch (NoSuchMethodException e) {
         list.scrollToPosition(position)
    } 
```

# c# - 使用 CommandType.Tabledirect 的目的是什么？

> ID：14191278
> 
> 赞同：33
> 
> 时间：2013-01-07T06:57:10.777
> 
> 标签：c#, ado.net, system.data

与or不同，该选项如何`CommandType.Tabledirect`使用？`CommandType.StoredProcedure``CommandType.Text`

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-07T07:05:03.733

[CommandType](http://msdn.microsoft.com/en-us/library/system.data.commandtype.aspx)包含指定如何解释命令字符串的名称。

1.  `CommandType.Text`对于 SQL 文本命令。（默认。）
2.  `CommandType.StoredProcedure`用于存储过程的名称。
3.  `CommandType.TableDirect`为**表名**。

当您调用其中一种 Execute 方法时，将返回命名表的所有行和列。

注意：**TableDirect**仅受**OLE DB**的 .NET Framework 数据提供程序支持。**当 CommandType 设置为TableDirect**时，不支持多表访问。

示例如何使用它：

```
OleDbConnection myOleDbConnection =new OleDbConnection("provider=sqloledb;server=(local)\\SQLEXPRESS;database=MyDatabase;Integrated Security=SSPI");
OleDbCommand myOleDbCommand = myOleDbConnection.CreateCommand();

myOleDbCommand.CommandType = CommandType.TableDirect;

myOleDbCommand.CommandText = "Employee";

myOleDbConnection.Open();

OleDbDataReader myOleDbDataReader = myOleDbCommand.ExecuteReader();

for (int count = 1; count <= 2; count++)
{
  myOleDbDataReader.Read();
  Console.WriteLine("myOleDbDataReader[\" ID\"] = " +
    myOleDbDataReader["ID"]);
  Console.WriteLine("myOleDbDataReader[\" FirstName\"] = " +
    myOleDbDataReader["FirstName"]);
  Console.WriteLine("myOleDbDataReader[\" LastName\"] = " +
    myOleDbDataReader["LastName"]);
}
myOleDbDataReader.Close();
myOleDbConnection.Close(); 
```

插入/更新

```
 try
        {
            using (SqlCeCommand command = conn.CreateCommand())
            {
                command.CommandText = "Holdings";
                command.CommandType = CommandType.TableDirect;
                using (SqlCeResultSet rs = command.ExecuteResultSet(ResultSetOptions.Updatable | ResultSetOptions.Scrollable))
                {
                    SqlCeUpdatableRecord record = rs.CreateRecord();
                    foreach (var r in _commitBatch)
                    {
                        int index=0;
                        record.SetValue(index++, r.TryGetValueOrDefault("IdentifierFromImportSource",string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("SecurityID", string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("SecurityName", string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("SecurityType", string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("AllocationAmount", string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("Position", string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("AnnualFeePercent", string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("MarginAmount", string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("Price", string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("MorningstarSecId", string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("MorningstarSecType", string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("UserID", string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("MorningstarPrice", string.Empty));
                        record.SetValue(index++, string.Empty);
                        record.SetValue(index++, r.TryGetValueOrDefault("AnnualFeeFrequency", string.Empty));
                        record.SetValue(index++, r.TryGetValueOrDefault("TrackingMethod", "1"));
                        rs.Insert(record);
                    }
                }

            }

        }
        catch (Exception e)
        {
            NotifyError(this, new ImportErrorEventArgs(e.Message + e.StackTrace, ErrorLevel.Application));
        } 
```

# java - 从 web 服务中的肥皂对象获取 SOAP 响应

> ID：14191286
> 
> 赞同：-1
> 
> 时间：2013-01-07T06:58:03.070
> 
> 标签：java, soap

我的 wsdl 中的肥皂地址位置为`"<soap:address location="http://localhost:8080/rpc/soap/helloworldsoap"/>"`

在我的网络服务方法中，我有以下路径。

```
@HttpResource(location="/{name}") 
```

我想获取 SOAP 响应对象。

我尝试了以下网址。

**http://localhost:8080/rpc/soap/helloworldsoap/abcd**

**WSDL**

```
<?xml version='1.0' encoding='UTF-8'?>

<wsdl:definitions name="HelloWorldImplService" targetNamespace="some name space" xmlns:ns1="http://test.com/webservices" xmlns:ns2="http://cxf.apache.org/bindings/xformat" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="some name space" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:import location="http://localhost:8080/rpc/soap/helloworldsoap?wsdl=HelloWorld.wsdl" namespace="http://test.com/webservices">
    </wsdl:import>
  <wsdl:binding name="HelloWorldImplServiceSoapBinding" type="ns1:HelloWorld">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="getHelloWorldAsString">
      <soap:operation soapAction="" style="rpc" />
      <wsdl:input name="getHelloWorldAsString">
        <soap:body namespace="http://test.com/webservices" use="literal" />
      </wsdl:input>
      <wsdl:output name="getHelloWorldAsStringResponse">
        <soap:body namespace="http://test.com/webservices" use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="HelloWorldImplService">
    <wsdl:port binding="tns:HelloWorldImplServiceSoapBinding" name="HelloWorldImplPort">
      <soap:address location="http://localhost:8080/rpc/soap/helloworldsoap" />
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

肥皂：

```
 <soap:Envelope>
       <soap:Body>
        <soap:Fault>
       <faultcode>soap:Server</faultcode>
      <faultstring>No such operation:  (HTTP GET PATH_INFO: /soap/helloworldsoap)     
      </faultstring>
    </soap:Fault>
  </soap:Body>
  </soap:Envelope> 
```

但我没有得到响应对象。

谁能告诉我如何实现这一目标。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:04:50.357

你没有提供太多信息。但是试试

telnet 到 localhost 8080，查看服务是否正在运行

如果是，则从命令行使用 curl 来检查 WSDL 是否实际可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:32:25.907

我很困惑我们是否可以将资源位置用于 SOAP。对于 REST，它很好，而且由于您的错误，它在服务器端（您的输入很好）也给出了关于位置的错误。

尝试这样的事情...

**删除资源位置，使用@WebMethod。**

发布您的接口定义以及 SOAP 输入。

例子 ：

界面：

```
@WebService
public interface Service {

public Address validate(Address address);

@WebMethod
public String sayHi(
    @WebParam(mode = WebParam.Mode.IN)
    String msg);
} 
```

执行：

```
package com.example; 
```

导入 javax.jws.WebService；

```
@WebService(endpointInterface = "com.example.AddressService" )
public class AddressServiceImpl implements AddressService {

@Override
public Address validateAdress(Address address) {
     return  address;
    }

    @Override
    public String sayHi(String msg) {
        return "Vinay";
    }
} 
```

希望这个例子有帮助

# android - 访问收件箱消息

> ID：14191287
> 
> 赞同：1
> 
> 时间：2013-01-07T06:58:11.520
> 
> 标签：android, sms

我想访问收件箱消息。为此，我正在编写以下代码：

```
Uri uriSMSURI = Uri.parse("content://sms/inbox");
Cursor cur = getContentResolver().query(uriSMSURI, null, null, null,null);
String sms = "";
cur.moveToNext();
sms = cur.getString(0); 
```

但我收到以下错误：

```
01-07 12:31:37.222: E/AndroidRuntime(687): FATAL EXCEPTION: main
01-07 12:31:37.222: E/AndroidRuntime(687): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.inboxshowingapp/com.example.inboxshowingapp.MainActivity}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.os.Looper.loop(Looper.java:123)
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.app.ActivityThread.main(ActivityThread.java:4627)
01-07 12:31:37.222: E/AndroidRuntime(687):     at java.lang.reflect.Method.invokeNative(Native Method)
01-07 12:31:37.222: E/AndroidRuntime(687):     at java.lang.reflect.Method.invoke(Method.java:521)
01-07 12:31:37.222: E/AndroidRuntime(687):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-07 12:31:37.222: E/AndroidRuntime(687):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-07 12:31:37.222: E/AndroidRuntime(687):     at dalvik.system.NativeStart.main(Native Method)
01-07 12:31:37.222: E/AndroidRuntime(687): Caused by: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.database.CursorWrapper.getString(CursorWrapper.java:135)
01-07 12:31:37.222: E/AndroidRuntime(687):     at com.example.inboxshowingapp.MainActivity.onCreate(MainActivity.java:32)
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-07 12:31:37.222: E/AndroidRuntime(687):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-07 12:31:37.222: E/AndroidRuntime(687):     ... 11 more 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:02:54.450

首先，您必须确认您已在清单文件中添加了权限。

以下权限适用于消息

```
android.permission.RECEIVE_SMS

android.permission.SEND_SMS 
```

如果是这样，那么您就错过了一个条件，即如果您有多个联系人以及要检索所有联系人的消息的内容，那么您需要像下面这样塑造您的代码：

```
public List<Sms> getSms() {
    List<Sms> lstSms = new ArrayList<Sms>();
    Sms objSms = new Sms();
    Uri message = Uri.parse("content://sms/");
    ContentResolver cr = mActivity.getContentResolver();

    Cursor c = cr.query(message, null, null, null, null);
    mActivity.startManagingCursor(c);
    int totalSMS = c.getCount();

    if (c.moveToFirst()) {
        for (int i = 0; i < totalSMS; i++) {

            objSms = new Sms();
            objSms.setId(c.getString(c.getColumnIndexOrThrow("_id")));
            objSms.setAddress(c.getString(c
                    .getColumnIndexOrThrow("address")));
            objSms.setMsg(c.getString(c.getColumnIndexOrThrow("body")));
            objSms.setReadState(c.getString(c.getColumnIndex("read")));
            objSms.setTime(c.getString(c.getColumnIndexOrThrow("date")));
            if (c.getString(c.getColumnIndexOrThrow("type")).contains("1")) {
                objSms.setFolderName("inbox");
            } else {
                objSms.setFolderName("sent");
            }

            lstSms.add(objSms);
            c.moveToNext();
        }
    }
    // else {
    // throw new RuntimeException("You have no SMS");
    // }
    c.close();

    return lstSms;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:05:03.597

替换这个

```
 cur.moveToNext(); 
```

有了这个：

```
 cur.moveToFirst(); 
```

并将此权限设置为您的清单

```
 <uses-permission android:name="android.permission.READ_SMS" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T07:13:38.757

```
Uri uri = Uri.parse("content://sms/inbox");
Cursor c= getContentResolver().query(uri, null, null, null, null);
startManagingCursor(c); 
```

获取所有收件箱消息：

```
body = new String[c.getCount()];
number = new String[c.getCount()];

if (c.moveToFirst()){
    for (int i=0; i<c.getCount(); i++){
        body[i] = c.getString(c.getColumnIndexOrThrow("body")).toString();
        number[i] = c.getString(c.getColumnIndexOrThrow("address")).toString();
        c.moveToNext();
    }
}
c.close(); 
```

# entity-framework - 如何确定 CodeFirst 中属性加载的顺序？

> ID：14191288
> 
> 赞同：0
> 
> 时间：2013-01-07T06:58:12.413
> 
> 标签：entity-framework, ef-code-first, code-first

我在想有什么方法可以确定 CodeFirst 中属性加载的顺序，例如我有一个如下所示的类：

```
public Class
{
 public string Propert1{get;set;}
 public string Propert2{get;set;}
 public List<string> PropertList{get;set;}
} 
```

而且我需要让EF在property1之前加载ProprtyList！（因为我在Property1_Changed上操作ProprtyList值）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:13:59.447

然后，您可以将 PropertList 声明为只读。

```
public Class
{
 public string Propert1{get;set;}
 public string Propert2{get;set;}
 public List<String> PropertList{
       get{ 
          return genaratePropertyListFromProperty1();
       }
 }
} 
```

此处的 prpertyList 仅在被访问时才会被填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T21:03:35.907

一个属性应该就是：一个属性。即你得到或设置它，没有别的，*没有副作用*。我知道即使是一些违反此规则的 .Net 类，但它仍然是一个非常健康的原则。另一个原则是设置对象的属性的顺序无关紧要。这是因为设置任何单个属性都应该使对象处于有效状态。

所以考虑你的`Class`对象，EF 实现它的方式，是有效的。*然后*就可以开始修改了。如果您想以同时更改多个属性的方式修改对象，您应该通过调用具有描述性名称的方法来执行此操作，而不是通过设置一个属性并静默更改其他属性。

如果您想要一个基于 显示不同内容的列表 `PropertList`，请创建一个只读（未映射）属性或`GetXyz()`生成更改内容的方法（无需修改`PropertList`！）并返回。

# php - 在同一服务器上托管的两个 Web 应用程序之间共享数据

> ID：14191291
> 
> 赞同：0
> 
> 时间：2013-01-07T06:58:33.717
> 
> 标签：php, session, cakephp, web-applications, cookies

我有两个不同的 Web 应用程序托管在同一台服务器上，这两个 Web 应用程序位于完全不同的域上。Web 应用程序将有许多共同的用户，所以我想在两个应用程序之间共享登录。在我的 Web 应用程序中，我将 cookie 设置为会话 ID。如何让 Web 应用程序查看其他应用程序的会话 ID？

如果你们需要更多信息，服务器是标准的 LAMP 服务器，并且应用程序使用的是 CakePHP 框架。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:02:29.723

你不能。可以，但严格来说，Cookie 只能用于一个域（以及所有子域，具体取决于 CakePHP 应用程序中 app/config/core.php 中设置的 Cookie 路径）。

CakePHP 或没有 CakePHP，cookie 不能跨域使用。但是有一个解决方法。这是关于 SO.. 的一个很常见的问题。这是一个很好的答案：

[如何跨两个不同的域使用 cookie？](https://stackoverflow.com/questions/315132/how-do-i-use-cookies-across-two-different-domains)

# html - 用记事本++正则表达式清除html

> ID：14191293
> 
> 赞同：0
> 
> 时间：2013-01-07T06:58:44.250
> 
> 标签：html, regex, notepad++

我想在 notepad++ 正则表达式的帮助下用更新的 html 头代码替换过时的 html 头代码。

我不知道如何选择多行以及如何从文件开头到标签查找字符串。然后在下一个搜索和替换中，我想将文本替换为

已尝试以下方法和其他方法均无济于事：

```
(.*)<title>
</title>(.*)</head> 
```

在我看来，它只会在一行中搜索字符串。

谢谢你的协助！

*我使用的是记事本++ V6.1.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:18:48.397

您也可以通过在正则表达式前面添加**(?s)**来实现相同的效果，而无需选中“.mathces new line”框（这将启用 DOTALL 模式）。您也可以在表达式前面使用**(?-s)**来禁用 DOTALL 模式，同时检查“.mathces new line”或通过 (?s) 修饰符启用 DOTALL 模式。当您想要在正则表达式中启用或禁用 DOTALL 模式时，这会很有用。例如，以下正则表达式将在 PHP 代码中找到流注释和块注释：

```
(?s)/\*.*?\*/|//(?-s).* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T10:39:05.050

![图片](../Images/9bf9c4f3d40353c3e05f6e0a11e5b47f.png)

如前所述，在查找对话框中，您必须检查选项`regular expression`选项以及`matches newline`是否要实现您所说的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:24:09.140

只需选中`. matches new line`搜索/替换窗口中的框。

# informix - Informix 中 sysptnext 的 pe_size 是什么意思？

> ID：14191294
> 
> 赞同：1
> 
> 时间：2013-01-07T06:58:55.113
> 
> 标签：informix

`pe_size`Informix 中的 of是什么`sysptnext`意思，单位是`pe_size`什么？单位 o/s 是特定的吗？可`pe_size`用于计算表格的大小，例如：

```
select dbsname, tabname, sum(pe_size )*2 / 1024 total_size 
from systabnames, sysptnext where partnum = pe_partnum 
group by 1, 2 order by 3 desc; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:21:55.540

显示的查询针对数据库中的表运行`sysmaster`。您通常可以`sysmaster`在 Informix Aministrator 的参考手册中找到对表和视图的描述。但是，似乎`sysptnext`( `ptn`= partition, `ext`= extents) 没有记录。这意味着它在某些视图中使用。`$INFORMIXDIR/etc/sysmaster.sql`您可以在表格中找到更多信息，包括评论“{仅供内部使用}” 。该注释主要表示 Informix 不承诺在需要时不更改表。它通常不会更改使用该表的视图，但它可能会在不通知的情况下修改该表。

```
{ Partition Extent Descriptions }
    create table informix.sysptnext     { Internal Use Only     }    
    (    
    pe_partnum  integer,    { partnum for this partition    }    
    pe_extnum   smallint,   { extent number         }    
    pe_chunk    integer,    { chunk number for this extent  }
    pe_offset   integer,    { chunk offset for this extent  }
    pe_size     integer,    { size of this extent       }    
    pe_log      integer     { logical page for start    }    
    ); 
```

范围大小在内部以页为单位（创建表时以千字节（千字节）为单位指定它们）。页大小取决于存储表的数据库空间。但是，除非您为不同的 dbspace 配置了不同的页面大小，否则任何地方都会使用相同的大小。页面大小是 2 KiB（Solaris、AIX、HP-UX、Linux）还是 4 KiB（Windows、Mac OS X）取决于平台。

根据分配的空间，您的查询应该接近生成表的大小。这大于用于存储行的空间。它也不考虑存储在 blob 空间或智能 blob 空间中的 blob；它也不考虑（分离的）索引。而且，如前所述，它假定页面大小为 2 KiB，而不是适应不同的页面大小。除以 1024 产生以 MiB 为单位的大小（兆字节；相当于兆字节的二进制）。

我保留错过有关碎片表的某些内容的权利。碎片表有多个分区，但`systabnames`表和您的分组子句应该处理这个问题。

如果您有一个 MODE ANSI 数据库，您可能有两个（或更多）不同的表，它们的名称相同但所有者不同；您的查询会将这些表合并为一个报告的答案。

# linux - 如何每隔一小时十分钟运行一次cron作业

> ID：14191295
> 
> 赞同：9
> 
> 时间：2013-01-07T06:58:56.237
> 
> 标签：linux, crontab

我做了以下事情：

```
0 */10 * * * {CMD} 
```

但它一直工作到午夜，第二天没有继续。有人可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-07T07:04:02.083

用这个：

```
10 * * * * {CMD} 
```

这意味着在每小时 10 分钟开始新工作：1:10, 2:10, ...

如果你想从 1:10、2:20、3:30……开始，那么你将需要编写很多手动规则，每个规则都从这些时间开始（或编写自己的调度程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-19T11:38:22.280

每小时，但在第 10 分钟，例如。1:10、2:10、3:10 等

```
https://crontab.guru/#10_*_*_*_* 
```

它就像魅力:)

# c++ - 当库在退出时没有在 C++ 中“清理”时会发生什么

> ID：14191301
> 
> 赞同：3
> 
> 时间：2013-01-07T06:59:26.073
> 
> 标签：c++, linux, exit

我正在运行 linux，只是想知道进程死亡后库的代码实际上会发生什么，而不是通过在它们上运行终止函数或类似的东西来“清理”它们。我见过人们对退出功能实施特定的清理，而其他人则不这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T07:08:52.870

这取决于您期望的清理方式。库已打开的所有本地操作系统资源（内存、打开的文件/套接字等）都将被关闭/释放。即使您不调用相关的清理函数（free/delete、fclose/close 等），也会发生这种情况。

但是，非操作系统资源（例如在服务器上启动的事务）不会被自动清理。发生这种情况是因为操作系统不可能知道在这种情况下该做什么。编写良好的服务器将优雅地处理这些情况。

此外，如果程序正常退出，库可以“隐藏”某些清理功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T20:10:07.587

### 这取决于...

...关于资源类型。

**最佳实践**

*做免费的*文件描述符。（但是操作系统*会*为您关闭它们。）

*关闭*缓冲文件和数据库连接。（但是标准输出缓冲区将在*exit(3)*或从*main()*返回时刷新。

*但不要*在退出前释放分配的内存。这是对时间的极大浪费，并且可能导致回读永远不会使用的页面。

# c# - 如何在 Entity Framework 中基于旧实体创建新实体？

> ID：14191302
> 
> 赞同：2
> 
> 时间：2013-01-07T06:59:26.427
> 
> 标签：c#, .net, entity-framework, duplicates

我需要

1.  将一些实体加载到内存中，

2.  改变几个“标量”

3.  属性值 - 无需触及其导航属性。和

4.  将它们作为新实体保存到数据库中。

    如何在 EntityFramework 中实现这一点，是否足以将对象的 ID 设置为 NULL 以将其保存为新实体，或者应该是什么技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:25:38.043

You simply need to change the [entity state](http://msdn.microsoft.com/en-us/library/system.data.entitystate.aspx) from Modified to Added and Entity Framework will perform an insert instead of an update.

Example using DbContext API:

```
DbContext context = // ...
foreach (var entityEntry in context.ChangeTracker.Entries())
{
    if (entityEntry.State == EntityState.Modified)
         entityEntry.State = EntityState.Added;
}
ct.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T01:12:29.810

您可以使用 Automapper 克隆对象，修改一些属性并将其保存为新实体。

例如：

```
//Get the source object from a fictitious repository
Person source = PersonRepository.GetPersonByID(555);

//Create an AutoMapper Mapper
Mapper.CreateMap<Person, Person>();
//If you want to ignore the primary key of the original object, use something like this:
//Mapper.CreateMap<Person, Person>().ForMember(x => x.PersonID, y => y.Ignore());

//Clone your source person
var clone = Mapper.Map<Person>(source);

//Set some property
clone.SomeProperty = 123;

//Save our clone against the fictional repository
PersonRepository.Save(clone);

//You could also return your clone at this point... 
```

前几天我使用这种方法来克隆记录。您可以做的一件方便的事情是获取已识别的来源，例如`source.PersonID`，并将其存储起来，`clone.ParentID`以便您可以找到克隆的来源（如果需要，您可以继续使用外键）。

来源/建议阅读 -[将对象复制到对象（使用 Automapper ？）](https://stackoverflow.com/questions/5713556/copy-object-to-object-with-automapper)

如果需要，您还可以映射到新的实体类型 - 请参阅 Automapper wiki - [https://github.com/AutoMapper/AutoMapper/wiki/Getting-started](https://github.com/AutoMapper/AutoMapper/wiki/Getting-started)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T15:17:03.493

在实体必须是唯一的并且对实体的更改会产生一个新实体的项目中，我遇到了同样的困难。我在实体类中创建了一个克隆方法，该方法采用实体，并返回相同的类型。它创建一个新实例，复制所有相关属性，然后返回新实体。

为了更进一步，您可能会创建一个带有 Clone 方法的基类，该方法使用反射来复制属性值并让您的实体从它继承。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T07:31:38.240

根据您使用实体框架的方式，我相信您可以分离和附加您的实体，更改标量值（包括 ID）并将其标记为“已添加”。您可能仍然需要连接/添加外国实体。有关我正在谈论的内容的更多信息，请参阅此页面：

[http://msdn.microsoft.com/en-us/data/jj592676.aspx](http://msdn.microsoft.com/en-us/data/jj592676.aspx)

# azure-web-roles - 无法访问 Windows Azure 部署的 webrole

> ID：14191303
> 
> 赞同：0
> 
> 时间：2013-01-07T06:59:35.490
> 
> 标签：azure-web-roles

我已通过 Visual Studio 2010 将 Web 应用程序部署到 Windows Azure，Windows Azure SDK 版本为 1.8。部署在生产中完成，状态显示为正在运行，但我无法访问站点 URL。当我尝试访问站点 URL 时，浏览器给出错误“找不到页面”。由于没有关于错误的线索，请有人给出正确的方法来知道无法访问webrole的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T13:00:20.597

当我第一次开始使用 azure 时，我遇到了同样的问题。这是怎么做的；转到天蓝色面板，

*   点击你的虚拟机
*   点击端点
*   点击添加
*   检查添加独立端点（按钮）
*   点击下一步
*   输入以下详细信息：名称：HTTP，协议：TCP，公共端口：80，私有端口：80
*   完成并等待几分钟激活（我的花了大约 40 秒）

您的网站网址现在可以从任何浏览器访问。

祝你好运，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:44:53.030

配置您的 web.config 以显示堆栈跟踪。这会给你一个线索。

如果您绝对不能让任何访问者看到堆栈跟踪将其更改为 remoteonly 并从 web 服务中浏览该站点，如下所示：http: [//geekswithblogs.net/MagnusKarlsson/archive/2012/12/03/connect-to-running- web-role-from-remote-desktop-connection-and.aspx](http://geekswithblogs.net/MagnusKarlsson/archive/2012/12/03/connect-to-running-web-role-from-remote-desktop-connection-and.aspx)

或将其设置为关闭、部署和浏览。当我有一个不在生产模式下的测试站点时，我就是这样做的。

[http://msdn.microsoft.com/en-us/library/h0hfz6fc(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/h0hfz6fc(v=vs.71).aspx)

```
<customErrors defaultRedirect="url"
              mode="On|Off|RemoteOnly">
   <error statusCode="statuscode"
          redirect="url"/>
</customErrors> 
```

# c++ - 如何从 Sysinternal 的 Process Explorer 复制环境变量

> ID：14191307
> 
> 赞同：2
> 
> 时间：2013-01-07T06:59:48.907
> 
> 标签：c++, windows, visual-c++, process-explorer

是否有一种优雅的方法可以将环境变量从 Process Explorer 复制到 Process 的剪贴板？我试图比较两个 C++ 编译进程，并想看看环境变量有何不同。看来我无法复制文本并随后将其粘贴以进行视觉比较。

**请注意**，我宁愿坚持使用 PE，也不愿使用多种工具，但如果使用其他工具是唯一的选择，请随时提出建议。

也将其标记为 C++，期望从 C++ 开发人员/调试器的角度提供解决方案，包括使用 Visual C++

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-14T16:20:08.107

对于任何仍然感兴趣的人，16.02 版的进程资源管理器现在能够像进程黑客一样复制进程的属性。不知道这个技能是什么时候加入的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T02:34:29.270

Sysinternals Process Explorer 目前无法执行此操作。非常烦人并且肯定是一个错误，特别是如果变量的值太长而无法显示。

开源工具 Process Hacker 2 ( [http://processhacker.sourceforge.net](http://processhacker.sourceforge.net) ) 没有这个问题。用法类似于 Process Explorer：

1.  启动[过程黑客](http://processhacker.sourceforge.net/)
2.  双击感兴趣的进程
3.  单击“环境”选项卡
4.  全选 (Ctrl+A)，然后复制 (Ctrl+C)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T09:52:36.077

只需检查`_environ`调试器中的变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T11:19:48.360

windbg`!peb`命令显示它。

# comments - 如何一次注释混合的 html 和 php 代码？

> ID：14191313
> 
> 赞同：1
> 
> 时间：2013-01-07T07:00:08.827
> 
> 标签：comments, notepad++

在记事本++中，我想暂时关闭这段代码：

```
Number of registered users: <?php echo $objUsers->users['total']; ?><br/>
Newest user: <?php echo $objUsers->users['last']; ?>
<h5>Online users:</h5> <?php echo $objUsers->users['online']; ?> 
```

html 注释标记 - 不起作用。
php 注释标记 - 不起作用。

我不敢相信我必须分别评论 html 和 php 代码 - 3+3 次？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T07:04:17.887

您可以通过将整个内容包含在 PHP 块注释中来注释掉所有代码。它看起来像：

```
<?php /* ?>
Number of registered users: <?php echo $objUsers->users['total']; ?><br/>
Newest user: <?php echo $objUsers->users['last']; ?>
<h5>Online users:</h5> <?php echo $objUsers->users['online']; ?>
<?php */ ?> 
```

当然，不需要将块注释放在单独的 PHP 标记中。精简版如下所示：

```
<?php /* ?>
Number of registered users: <?php echo $objUsers->users['total']; ?><br/>
Newest user: <?php echo $objUsers->users['last']; ?>
<h5>Online users:</h5> <?php echo $objUsers->users['online']; */ ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T07:02:03.193

只需将代码包装在 HTML 注释中：

```
<!--
Number of registered users: <?php echo $objUsers->users['total']; ?><br/>
Newest user: <?php echo $objUsers->users['last']; ?>
<h5>Online users:</h5> <?php echo $objUsers->users['online']; ?>
--> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T07:04:34.327

您必须在 php 块中同时使用 html 标记和 php 注释字符。例如

```
<!-- Number of registered users: <?php //echo $objUsers->users['total']; ?><br/>
Newest user: <?php // echo $objUsers->users['last']; ?>
<h5>Online users:</h5> //<?php echo $objUsers->users['online']; ?> --> 
```

最好将每一行注释为：

```
<!-- Number of registered users: <?php //echo $objUsers->users['total']; ?><br/> -->
<!-- Newest user: <?php // echo $objUsers->users['last']; ?> -->
<!-- <h5>Online users:</h5> //<?php echo $objUsers->users['online']; ?> --> 
```

# c# - 显示 Windows 窗体时控制台应用程序不接受输入

> ID：14191314
> 
> 赞同：1
> 
> 时间：2013-01-07T07:00:15.473
> 
> 标签：c#, winforms, multithreading, console

我创建了一个控制台应用程序。我想让标签（在表单上）显示我在控制台中键入的任何内容，但是当我运行表单时控制台会挂起。

代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace ConsoleApplication1
{
    class Program
    {
        Label a;
        static void Main(string[] args)
        {
            Form abc = new Form(); 
            Label a = new Label();
            a.Text = "nothing";
            abc.Controls.Add(a);
            Application.Run(abc);
            System.Threading.Thread t=new System.Threading.Thread(Program.lol);
            t.Start();

        }
        public static void lol()
        {
            Program p = new Program();
            string s = Console.ReadLine();
            p.a.Text = s;
            lol();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T07:09:50.660

`Application.Run`将阻塞直到表单关闭。所以你应该在一个单独的线程上调用*它。*

但是，您的 UI 将在该单独的线程上执行 - 并且您不能从 UI 线程以外的线程“触摸” UI 元素，因此在调用之后`Console.ReadLine()`，您需要使用`Control.Invoke`或`Control.BeginInvoke`在 UI 中进行更改.

此外，您当前正在声明一个名为的*局部变量*`a`，但从未为`Program.a`.

这是一个完整的版本：

```
using System;
using System.Threading;
using System.Windows.Forms;

class Program
{
    private Program()
    {
        // Actual form is created in Start...
    }

    private void StartAndLoop()
    {
        Label label = new Label { Text = "Nothing" };
        Form form = new Form { Controls = { label } };
        new Thread(() => Application.Run(form)).Start();
        // TODO: We have a race condition here, as if we
        // read a line before the form has been fully realized,
        // we could have problems...

        while (true)
        {
            string line = Console.ReadLine();
            Action updateText = () => label.Text = line;
            label.Invoke(updateText);
        }
   }

    static void Main(string[] args)
    {
        new Program().StartAndLoop();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T07:10:47.240

您的代码中有很多问题，我不会包括命名选择。

*   `Application.Run`正在阻塞。`Form`在您关闭之前，您的其余代码不会被调用。

*   您正在递归调用`lol()`，我不建议这样做。请改用`while`循环。

*   您正在尝试`Label`从与创建控件的线程不同的线程中设置 a 的文本。您将需要使用`Invoke`或类似的方法。

这是您的代码*可能*如何的完整示例。我试图修改尽可能少的东西。

```
class Program
{
    static Label a;

    static void Main(string[] args)
    {
        var t = new Thread(ExecuteForm);
        t.Start();
        lol();
    }

    static void lol()
    {
        var s = Console.ReadLine();
        a.Invoke(new Action(() => a.Text = s));
        lol();
    }

    public static void ExecuteForm()
    {
        var abc = new Form();
        a = new Label();
        a.Text = "nothing";
        abc.Controls.Add(a);
        Application.Run(abc);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T07:05:15.107

在创建新的`Thread`. 这意味着您的程序在退出`Thread`之前永远不会真正创建新的。`Form`

你需要使用

```
System.Threading.Thread t = new System.Threading.Thread(Program.lol);
t.Start();
Application.Run(abc); 
```

# shell - 关于 gzgrep 输出

> ID：14191323
> 
> 赞同：0
> 
> 时间：2013-01-07T07:01:09.667
> 
> 标签：shell, unix, grep

我运行了下面的 gzgrep 命令。它显示文件名后跟冒号和搜索结果。有时文件名不会出现在搜索结果中。我需要修改命令以使文件名始终位于搜索结果的首位。使用 solaris 10 和 korn shell。

```
> gzgrep  3337678895 /home/tst02/WWSD.????.20121123.????.BLB4.????.*.gz
/home/tst02/WWSD.0142.20121123.1145.BLB4.BMA1.scr.mma.20121123_225100.gz:1A010130888236898002B010642012112311390003201211231139030262012112311392901020121123113929C01075001009260511300414141510092605113004141415100926051130041414131009260511300D0100202E01015092882368009999F0101206CAN2PB0004K0100200L0100501600N0101700225103337678895P01002NNQ01004GLB4R01009YNNNNNNYNR02007Y152801

> gzgrep 3564767  /home/tst01/FEL??_R20121101070001_prig_*.gz
2012110107582420121101075911010349504230298062459      0419887344          000000004704230242349500190298062459                                                                                                00480333495001  AA40512C804C036C0048033C036C0048033C21101C00000C0200000C0C0C0C000C010C00298062459CFFFFFFFFFFFFFF1C010C    00419887344C      FFFFFFFFFF0758244C000000464C00000C00000C000C0000000000000C00000C00000C14560C                                                                                                                                                                                                                  042C3564767C                                                                071C101C0C00016C                                                                                                                                    134950019C204230242C 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:40:11.833

**GNU grep** has the `-H` option:

```
 -H, --with-filename
          Print the file name for each match.  This is  the  default  when
          there is more than one file to search. 
```

Maybe this also works with gzgrep.

# javascript - 理解 socket.io.js

> ID：14191327
> 
> 赞同：0
> 
> 时间：2013-01-07T07:01:16.270
> 
> 标签：javascript, socket.io

我试图了解 socket.io 的 Javascript 客户端代码是如何工作的。具体来说，我的目标是了解，它如何知道服务器的位置？

我在程序中使用的客户端代码非常简单——我只是链接到 socket.io.js：

```
<script src="./socket.io/socket.io.js"></script> 
```

进而：

```
var socket = io.connect() 
```

就是这样 - 套接字自动连接到服务器。但它怎么知道？

我查看了 socket.io.js，这就是我发现的（已删除评论）：

```
var io = ('undefined' === typeof module ? {} : module.exports);
(function() {

/** Copyright(c) 2011 LearnBoost <dev@learnboost.com> * MIT Licensed */

(function (exports, global) {
  var io = exports;
  io.version = '0.9.11';
  io.protocol = 1;
  io.transports = [];
  io.j = [];
  io.sockets = {};

  /**
   * Manages connections to hosts.
   * @param {String} uri
   * @Param {Boolean} force creation of new socket (defaults to false)
   * @api public
   */
  io.connect = function (host, details) {
    var uri = io.util.parseUri(host)
      , uuri
      , socket;

    if (global && global.location) {
      uri.protocol = uri.protocol || global.location.protocol.slice(0, -1);
      uri.host = uri.host || (global.document
        ? global.document.domain : global.location.hostname);
      uri.port = uri.port || global.location.port;
    }

    uuri = io.util.uniqueUri(uri);

    ... 

})('object' === typeof module ? module.exports : (this.io = {}), this);
...
})(); 
```

似乎秘密就在“全局”参数中，但是，究竟是谁将“全局”发送给这个函数呢？（很难理解所有括号中的函数......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:06:06.457

您正在寻找的模式是这样的：

```
(function (exports,global) {
   ///content
}) (<whatever>, this); 
```

`this`reference 是执行此函数的范围（此模式既定义了函数又执行了它），恰好是全局范围。有关 javascript 范围的更多信息，请参见此处 - [http://tore.darell.no/pages/scope_in_javascript](http://tore.darell.no/pages/scope_in_javascript)

# ruby-on-rails - Rails 将控制器逻辑移动到模型中

> ID：14191328
> 
> 赞同：3
> 
> 时间：2013-01-07T07:01:33.663
> 
> 标签：ruby-on-rails, refactoring

我正在为我的 Rails 应用程序进行重构。我已经阅读了很多关于将控制器逻辑移动到模型的帖子，但是我在尝试时遇到了一些问题。

我需要帮助

1.  **了解以下错误的原因**
2.  **需要知道我应该阅读哪些文档才能成功地将我的所有控制器逻辑移动到模型中**

由于我还没有对我的应用程序进行任何重大重构，所以先尝试了一个简单的重构。

*PostsController（之前）*

```
def create
    @post = Post.create(params[:post])
    @post.user_id = session[:user_id]
    @post.num_likes = 0
    @post.num_dislikes = 0
    @geoip = GeoIP.new("#{Rails.root.to_s}/db/GeoIP.dat").country(request.remote_ip)
    @post.user_location = @geoip.country_name
end 
```

*PostModel(新)*

```
before_save :initialize_post

def initialize_post
    self.user_id = session[:user_id]
    self.num_likes = 0
    self.num_dislikes = 0
    @geoip = GeoIP.new("#{Rails.root.to_s}/db/GeoIP.dat").country(request.remote_ip)
    self.user_location = @geoip.country_name
end 
```

*PostsController（新）*

```
def create
    @post = Post.create(params[:post])
end 
```

但是，由于`session undefined`AND之类的错误，我连这个简单的重构都没有完成`method request undefined`。我不确定为什么这些动作不能在模型类中使用。

有人可以解释这背后的原因并指导我找到一些可以帮助我顺利完成重构过程的好文档吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:26:39.970

对于您的控制器，我会做类似的事情。

```
def create
    @post = Post.new(params[:post])
    @post.user_id = session[:user_id]
    @post.ip_address = request.remote_ip
    @post.save
end 
```

和你的模型..类似的东西；

```
attr_accessor :ip_address
before_create :set_default_values
before_save :geo_locate

private

def geo_locate
    @geoip = GeoIP.new("#{Rails.root.to_s}/db/GeoIP.dat").country(self.ip_address) rescue nil
    self.user_location = @geoip.country_name unless @geoip.blank?
end

# This only runs when a new record is created. Alternatively, look into setting a default value on your database columns!
def set_default_values
  self.num_likes = 0
  self.num_dislikes = 0
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:11:13.687

您不能将控制器中的每个代码都移动到模型中。会话处理和请求之类的一些代码仅适用于控制器。它们在模型内部不可用。只有仅限于模型级处理的处理代码才需要在模型中。

以下是重构 Rails 代码的最佳书籍，

[http://www.amazon.com/Rails-AntiPatterns-Refactoring-Addison-Wesley-Professional/dp/0321604814](https://rads.stackoverflow.com/amzn/click/com/0321604814)

# css - CSS - 保持列中的 div 对齐

> ID：14191329
> 
> 赞同：5
> 
> 时间：2013-01-07T07:01:40.237
> 
> 标签：css, html, alignment

我尝试搜索我正在寻找的东西，但我一直在内部 div 上寻找 css 的东西。

无论如何，我想要做的是让两列 div 相互对齐，右列始终与左列的顶部对齐。这是我画一个空白的地方，我似乎无法弄清楚如何做到这一点。

左列的大小是动态的，所以我不能使用 :height 属性来保持秩序。

这是我正在尝试做的事情：

![在此处输入图像描述](../Images/d8423e27bdf955ea85c4509456f3746e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T07:12:17.300

您可以做的是，将内联 div 包装在透明 div 中。例如：

```
<div class="transparent-container">
    <div class="inline-div">
    </div>
    <div class="inline-div">
    </div>
    <div class="clearfix"></div>
</div> 
```

### [这是一个有效的 JSFiddle](http://jsfiddle.net/b5pZM/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:01:42.810

您可以通过三种方式做到这一点：

1.  使用表格：

```
<table>
    <tr>
        <td><div>div</div></td>
        <td><div>div</div></td>
    </tr>
    <tr>
       <td><div>div</div></td>
       <td><div>div</div></td>
    </tr>
</table> 
```

2.  使用容器 div 如下：

```
<div class="outer-container">
    <div class="box-container">
        <div class="left-box">
            Left Box content
        </div>
        <div class="right-box">
            Right Box Content
        </div>
    </div>
</div> 
```

3.  使用 JS：

通过左框的Js计算高度，然后将其传递给右框以保持间隙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-27T19:59:16.530

这将非常漂亮地完成这个技巧：

```
.div1, .div2{
vertical-align:top;
}
.div1{
float:left;
width:70px;
}
.div2{
display: table-cell;
width:200px;
}
.div3{
display:table-cell;
width:200px;
}

<div class='div1'>1</div>
<div class='div2'>ABCDE FGHIJ KLMNO PQRST UVWXY Z</div>
<div class='div1'>2</div><div class='div2'>ABCDE FGHIJ KLMNO PQRST UVWXY Z</div> 
```

等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T07:19:17.067

我在类似情况下所做的是 - 而不是创建两*列- 为每**行*2 个 div构建一个容器，并在该容器中浮动 div，而不浮动容器本身。这样容器的高度就会扩展到最高 div 的高度。并且下一个容器将在其下方对齐。

您可以在[这里](http://galilee-export.com/about-us/our-team-2/sales/)查看结果和我的 HTML 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T07:07:00.107

解决方案1：您可以使用表

解决方案 2：使用 jQuery，获取每个 div 的每个列并获取它们的高度。然后比较高度并将两个 div 设置为最大高度。但我更喜欢使用表格来解决这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T07:12:24.710

你可以让它如下所示：

![在此处输入图像描述](../Images/713d2f76656542f3fcb6eafbd6fef476.png)

意味着在您包装在 div 中的每一行中，并且该 div 有 2 个列 div。clearfloat 之后

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-16T22:02:52.547

我想创建一个网格，但简单的表格和嵌套的 div 迫使我一次布置行。这使得为​​响应式设计堆叠列变得困难。

这是一个使用弹性框创建网格的代码笔。第一个允许您一次指定行，而第二个允许您一次指定列。

[https://codepen.io/chaimleib/pen/zPPGgj](https://codepen.io/chaimleib/pen/zPPGgj)

HTML：

```
<h2>By row</h2>
<div class="table table3cols">
  <div class="table-cell"><h3>Eddard Stark</h3></div>
  <div class="table-cell">Sword named Ice</div>
  <div class="table-cell">No direwolf</div>

  <div class="table-cell"><h3>Jon Snow</h3></div>
  <div class="table-cell">Sword named Longclaw</div>
  <div class="table-cell">Direwolf: Ghost</div>

  <div class="table-cell"><h3>Arya Stark</h3></div>
  <div class="table-cell">Sword named Needle</div>
  <div class="table-cell">Direwolf: Nymeria</div>
</div>

<h2>By column</h2>

<div class="table table3cols">
  <div style="order:1;" class="table-cell"><h3>Eddard Stark</h3></div>
  <div style="order:2;" class="table-cell">Sword named Ice</div>
  <div style="order:3;" class="table-cell">No direwolf</div>

  <div style="order:1;" class="table-cell"><h3>Jon Snow</h3></div>
  <div style="order:2;" class="table-cell">Sword named Longclaw</div>
  <div style="order:3;" class="table-cell">Direwolf: Ghost</div>

  <div style="order:1;" class="table-cell"><h3>Arya Stark</h3></div>
  <div style="order:2;" class="table-cell">Sword named Needle</div>
  <div style="order:3;" class="table-cell">Direwolf: Nymeria</div>
</div> 
```

较少的：

```
/* Variables
================================== */
@bw: 3px;  // border width

/* Tables
================================== */
.table {
  display: flex;
  flex-wrap: wrap;
  margin: 0 0 3em 0;
  padding: 0;
}
.table-cell {
  box-sizing: border-box;
  flex-grow: 1;
  width: 100%;  // Default to full width
  padding: 0.8em 1.2em;
  overflow: hidden; // Or flex might break
  list-style: none;
  border: solid @bw white; // margins would overflow row and cause early wrapping
  background: fade(slategrey,20%);
  > h1, > h2, > h3, > h4, > h5, > h6 { margin: 0; }
}

/* Table column sizing
================================== */
.table2cols > .table-cell  { width: 50%; }
.table3cols > .table-cell  { width: 33.33%; }
.table4cols > .table-cell  { width: 25%; }

/* Page styling
================================== */

body {
  border: 1px solid grey;
  margin: 0 auto;
  max-width: 800px;
  padding: 2em;
}
h1, h2, h3, h4, h5, h6 { margin-top: 0; } 
```

这项技术的功劳归功于 Davide Rizzo，他的[文章](https://css-tricks.com/accessible-simple-responsive-tables/)还展示了使设计响应式的巧妙方法。

# objective-c - ios 6.0.1 ALAssetsLibraryChangedNotification，试图了解正在发送的内容

> ID：14191331
> 
> 赞同：5
> 
> 时间：2013-01-07T07:01:54.883
> 
> 标签：objective-c, nsnotificationcenter, alassetslibrary, assetslibrary

我一直在使用 iOS 6.x（目前特别是 6.0.1）中的 ALAssetsLibraryChangedNotification，根据我从文档中了解到的信息，我得到的结果与我期望在我的用户信息中收到的结果相反.

这是我的事件注册代码：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(assetsLibraryDidChange:) name:ALAssetsLibraryChangedNotification object:_library]; 
```

为了测试，我进入我的照片库，删除一些项目，添加一些项目。

这是我的处理程序。

```
 - (void)assetsLibraryDidChange:(NSNotification *)note
{
  NSDictionary* info = [note userInfo];
  NSLog(@"assetsLibraryDidChange calling syncPhotoInfoFromAssets, userInfo %@", info);
  //   If the user information dictionary is nil, reload all assets and asset groups.
  if(note.userInfo==nil) {
    [self syncPhotoInfoFromAssets];
    return;
  }

  //   If the user information dictionary an empty dictionary, there is no need to reload assets and asset groups.
  if(note.userInfo.count == 0) {
    return;
  }

 // If the user information dictionary is not empty, reload the effected assets and asset groups. For the keys used, see “Notification Keys.”
  NSSet *updatedAssets = [info objectForKey:ALAssetLibraryUpdatedAssetsKey];
  NSSet *updatedAssetGroup = [info objectForKey:ALAssetLibraryUpdatedAssetGroupsKey];
  NSSet *deletedAssetGroup = [info objectForKey:ALAssetLibraryDeletedAssetGroupsKey];
  NSSet *insertedAssetGroup = [info objectForKey:ALAssetLibraryInsertedAssetGroupsKey];

  NSLog(@"updated assets:%@", updatedAssets);
  NSLog(@"updated asset group:%@", updatedAssetGroup);
  NSLog(@"deleted asset group:%@", deletedAssetGroup);
  NSLog(@"inserted asset group:%@", insertedAssetGroup);
  //further processing here
} 
```

我的输出：

```
 ALAssetLibraryUpdatedAssetGroupsKey = "{(\n    assets-library://group/?id=736B6346-6DA2-4E43-8830-9C263B2D29ED\n)}";
    ALAssetLibraryUpdatedAssetsKey = "{(\n    assets-library://asset/asset.JPG?id=A695208B-3546-4CCA-B539-B1D132A209B3&ext=JPG\n)}";
}
2013-01-06 22:50:45.738 Olesi[25468:3613] updated assets:{(
    assets-library://asset/asset.JPG?id=A695208B-3546-4CCA-B539-B1D132A209B3&ext=JPG
)}
2013-01-06 22:50:45.738 Olesi[25468:3613] updated asset group:{(
    assets-library://group/?id=736B6346-6DA2-4E43-8830-9C263B2D29ED
)}
2013-01-06 22:50:45.739 Olesi[25468:3613] deleted asset group:(null)
2013-01-06 22:51:06.658 Olesi[25468:3613] inserted asset group:(null) 
```

删除并插入专辑后，我希望在 ALAssetLibraryDeletedAssetGroupsKey 和 ALAssetLibraryInsertedAssetGroupsKey 中都收到数据，而在 ALAssetLibraryUpdatedAsset*Key 中都没有。有任何想法吗？我注意到，即使是[Apple 监听此通知的示例代码](http://developer.apple.com/library/ios/#samplecode/AVPlayerDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010101)甚至都没有使用密钥，而是重新枚举所有资产，而不管具体密钥如何（闻起来就像他们不信任通知信息）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T14:31:58.230

如果您没有对要删除的组的引用，则操作系统不会让您知道。

我使用以下代码得到正确的行为：

```
#import "ROBKViewController.h"
#import <AssetsLibrary/AssetsLibrary.h>

@interface ROBKViewController ()

@property (nonatomic, strong) ALAssetsLibrary *assetsLibrary;
@property (nonatomic, strong) ALAssetsGroup *currentAssetGroup;

- (void) handleAssetChangedNotifiation:(NSNotification *)notification;

@end

@implementation ROBKViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {
        _assetsLibrary = [ALAssetsLibrary new];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleAssetChangedNotifiation:) name:ALAssetsLibraryChangedNotification object:_assetsLibrary];
    }

    return self;
}

- (void) dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self name:ALAssetsLibraryChangedNotification object:nil];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self.assetsLibrary enumerateGroupsWithTypes:ALAssetsGroupAll usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
    } failureBlock:^(NSError *error) {
    }];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Notification handlers

- (void) handleAssetChangedNotifiation:(NSNotification *)notification
{
    NSLog(@"notification: %@", notification);

    if ([notification userInfo]) {
        NSSet *insertedGroupURLs = [[notification userInfo] objectForKey:ALAssetLibraryInsertedAssetGroupsKey];
        NSURL *assetURL = [insertedGroupURLs anyObject];
        if (assetURL) {
            [self.assetsLibrary groupForURL:assetURL resultBlock:^(ALAssetsGroup *group) {
                self.currentAssetGroup = group;
            } failureBlock:^(NSError *error) {

            }];
        }
    }

}

@end 
```

请注意，我只收到分配给 self.currentAssetGroup 的组的通知。

# asp.net - Firefox 播放嵌入式 WMV 文件时出现白框

> ID：14191335
> 
> 赞同：1
> 
> 时间：2013-01-07T07:02:20.247
> 
> 标签：asp.net, firefox, embed, windows-media-player

WMV 文件在加载浏览器时第一次在 mozilla 浏览器**（版本：17.0.1）**中没有播放，而是显示一个白框。当我在选项卡之间切换或打开应用程序并返回时，它可以工作（视频开始播放）。关于这个问题，我用谷歌搜索了很多，但找不到任何解决方案。

我不知道是什么阻止我这样做是浏览器设置或代码问题。

在其他浏览器中播放相同文件时没有问题。

请在这方面帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:44:37.340

我找到了解决方案。在正文的第一个子项中创建对象标签，并使用 javascript/jQuery 将对象标签重新附加到我们所需的 div。请参阅[示例](http://jsbin.com/oqehuc/9)和[代码](http://jsbin.com/oqehuc/9/edit)。

# asp.net-mvc-3 - HTTPS 上的 VLC ActiveX 对象崩溃

> ID：14191337
> 
> 赞同：0
> 
> 时间：2013-01-07T07:02:36.737
> 
> 标签：asp.net-mvc-3, vlc

我使用 VLC 插件在网络浏览器上播放音频/视频文件。它在 HTTP 上运行良好，但插件在 HTTPS 下崩溃。我使用 MVC3 架构并使用控制器来获取文件流。此文件流与 VLC 插件在视图页面上绑定以播放视频。

* * *

```
var fileName = "test.mp3";
            var filePathA = "@Html.Raw(@Url.Action("GetMediaFileStream", new { fileName = "mediafilename", id = "@Model.Id" }))";
            filePathA = filePathA.replace("mediafilename", fileName);
            var vlc = document.getElementById("vlc");
                    var options = new Array(":rtsp-tcp");
                    var id = vlc.playlist.add(filePathA, null, options);
                    vlc.playlist.playItem(id);
                    vlc.playlist.play(); 
```

* * *

和在控制器中

```
 public ActionResult GetMediaFileStream(int id)
        {
// code for sending stream to vlc plugin as;
         Response.OutputStream.Write(buffer, 0, bytesRead);
         Response.Flush();
        } 
```

# android - ajax 在某些 Android 设备上工作，而不是在其他设备上

> ID：14191338
> 
> 赞同：3
> 
> 时间：2013-01-07T07:02:41.430
> 
> 标签：android, ajax, jquery-mobile

[稍后编辑：正如我发现的，问题与 Android 版本有关，而不是设备类型。所以我的代码在 4.0 之前非常适合 Android，而不是更高版本。修复在答案中。]

我在这个问题上浪费了至少 2 天。我很少有网页打包为 Android 应用程序。在浏览器和我的 Android 设备上完美运行，包括 Galaxy Tab 2。但在 Nexus 上却不行。我没有它，所以我一直在制作 APK 和一个朋友测试。错误出现在 AJAX 上。相同的代码对我有用，对他不起作用（还有少数人，我不知道他们的设备）。

下面是我使用的小测试。如您所见，它没有错误（这是我的猜测）。为什么不能在所有 Android 设备上运行？我提到我已经用 Eclipse 和 Build.PhoneGap.com编译了这段代码（其他引用的文件在这里[http://jumpshare.com/b/57O6tH ）。](http://jumpshare.com/b/57O6tH)然而，同样的结果：我得到的 APK 在某些设备上运行，而不是在其他设备上运行。使用 *file:///android_asset/www/import.html* 对我没有帮助。错误是 404，因为文件不存在。但它是！

错误在哪里？它让我疯狂 ：）。为什么此代码在我的 Galaxy Tab 2（和 Samsung Gio）上的浏览器和 APK 中运行良好，但在 Nexus（和其他设备）上却不行？

```
<!DOCTYPE html>
<html> 
<head> 
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Test</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1">    
    <link href="jquery.mobile-1.2.0.min.css" rel="stylesheet"/>
    <script src="jquery-1.8.3.min.js" type='text/javascript'></script>
    <script src="jquery.mobile-1.2.0.min.js" type='text/javascript'></script>   
    <script type='text/javascript'>
    //$(document).ready(function() {
    $(document).bind("pageinit", function(){
        $("#buton").bind('click',function(){
            $.mobile.showPageLoadingMsg();
            $.ajax({
                url:'import.html',
                datatype:'html',
                type: 'GET',
                success:function(html){
                    $.mobile.hidePageLoadingMsg();
                    $("#result").html(html);
                },
                error: function(jqXHR, textStatus, errorThrown) {
                    $("#result").html("ERRORS:"+errorThrown+"<hr>"+textStatus+"<hr>"+JSON.stringify(jqXHR))
                    $.mobile.hidePageLoadingMsg();
                    alert('Not working!!!');
                }
            })
        });
    });
    </script>
</head> 
<body> 
    <!-- Pagina de start -->
    <div data-role="page" id="start">
        <div data-role="header" data-theme="b">
            <h1>Test</h1>
        </div>
        <div data-role="content">
            <button id="buton">AJAX!</button>
            <div id="result"></div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T12:52:14.060

我找到了我需要的东西。Android 4.1 和 4.2 引入了这个新方法：getAllowUniversalAccessFromFileURLs

由于它不适用于低于 16 的 API，因此该解决方案需要多几行，以确保这种不存在的方法不会在以前的 API 中导致错误。

```
public class MainActivity extends Activity {
/** Called when the activity is first created. */
WebView webView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    webView = (WebView) findViewById(R.id.webView);
    webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
    webView.getSettings().setJavaScriptEnabled(true);
    int currentapiVersion = android.os.Build.VERSION.SDK_INT;
    if (currentapiVersion >= android.os.Build.VERSION_CODES.JELLY_BEAN){
        fixNewAndroid(webView);
    }
    webView.setWebChromeClient(new WebChromeClient());
    webView.loadUrl("file:///android_asset/www/index.html");
}

@TargetApi(16)
protected void fixNewAndroid(WebView webView) {
    try {
        webView.getSettings().setAllowUniversalAccessFromFileURLs(true);
    } catch(NullPointerException e) {
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:41:17.280

你检查过你的ajax GET返回什么吗？它是返回 DOM 文档！而你试图为你的#result html 设置文档！如果你看一下[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)你可以看到你的成功函数有 3 个参数：

```
success:function(data, textStatus, jqXHR){} 
```

现在您可以选择如何获取您的 html 并将其显示为`$("#result")`.

```
$("#result").html(jqXHR.responseText); 
```

# google-app-engine - 使用 GWT 和 REST 时发生异常

> ID：14191343
> 
> 赞同：0
> 
> 时间：2013-01-07T07:02:57.687
> 
> 标签：google-app-engine, rest, gwt, jersey

我创建了一个 REST Web 服务。然后尝试使用 GWT 访问它。但我收到以下错误

```
com.sun.jersey.core.spi.component.ProviderFactory __getComponentProvider
SEVERE: The provider class, class com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General, could not be instantiated. Processing will continue but the class will not be utilized
java.lang.IllegalArgumentException: argument type mismatch
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance_(Runtime.java:127)
    at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance(Runtime.java:135)
    at com.sun.jersey.core.spi.component.ComponentConstructor._getInstance(ComponentConstructor.java:198)
    at com.sun.jersey.core.spi.component.ComponentConstructor.getInstance(ComponentConstructor.java:169)
    at com.sun.jersey.core.spi.component.ProviderFactory.__getComponentProvider(ProviderFactory.java:166)
    at com.sun.jersey.core.spi.component.ProviderFactory.getComponentProvider(ProviderFactory.java:137)
    at com.sun.jersey.core.spi.component.ProviderServices.getComponent(ProviderServices.java:256)
    at com.sun.jersey.core.spi.component.ProviderServices.getServices(ProviderServices.java:160)
    at com.sun.jersey.core.spi.factory.MessageBodyFactory.initWriters(MessageBodyFactory.java:207)
    at com.sun.jersey.core.spi.factory.MessageBodyFactory.init(MessageBodyFactory.java:163)
    at com.sun.jersey.api.client.Client.init(Client.java:342)
    at com.sun.jersey.api.client.Client.access$000(Client.java:118)
    at com.sun.jersey.api.client.Client$1.f(Client.java:191)
    at com.sun.jersey.api.client.Client$1.f(Client.java:187)
    at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:197)
    at com.sun.jersey.api.client.Client.<init>(Client.java:187)
    at com.sun.jersey.api.client.Client.<init>(Client.java:170)
    at com.sun.jersey.api.client.Client.create(Client.java:679)
    at com.mycompany.newwebapplicationproject.server.GreetingServiceImpl.greetServer(GreetingServiceImpl.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
7 Jan, 2013 11:55:48 AM com.sun.jersey.spi.inject.Errors processErrorMessages
SEVERE: The following errors and warnings have been detected with resource and/or provider classes:
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$App(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$Text(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$App(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$Text(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$App(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$Text(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.SourceProvider$SAXSourceReader(com.sun.jersey.spi.inject.Injectable) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.SourceProvider$DOMSourceReader(com.sun.jersey.spi.inject.Injectable) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$App(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$Text(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$General(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$App(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$Text(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$App(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$Text(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$App(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$Text(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General(com.sun.jersey.spi.inject.Injectable,javax.ws.rs.ext.Providers) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.SourceProvider$SourceWriter(com.sun.jersey.spi.inject.Injectable,com.sun.jersey.spi.inject.Injectable) at parameter index 0
  SEVERE: Missing dependency for constructor public com.sun.jersey.core.impl.provider.entity.SourceProvider$SourceWriter(com.sun.jersey.spi.inject.Injectable,com.sun.jersey.spi.inject.Injectable) at parameter index 1
com.sun.jersey.spi.inject.Errors$ErrorMessagesException 
```

以下是我在 GWT 中的服务器端代码

```
 public class GreetingServiceImpl extends RemoteServiceServlet implements
        GreetingService {

    public String greetServer(String input) throws IllegalArgumentException {
        try {

            getBaseURI();
             ClientConfig config = new DefaultClientConfig();
             Client client=Client.create(config);
             WebResource service = client.resource(getBaseURI());

            System.out.println(service.path("hello")
                    .accept(MediaType.TEXT_PLAIN).get(ClientResponse.class)
                    .toString());

            System.out.println(service.path("hello")
                    .accept(MediaType.TEXT_PLAIN).get(String.class));

            System.out.println(service.path("hello").accept(MediaType.TEXT_XML)
                    .get(String.class));

            System.out.println(service.path("hello")
                    .accept(MediaType.TEXT_HTML).get(String.class));
            System.out.println(service.path("generic").path("get")
                    .accept(MediaType.TEXT_HTML).get(String.class));
            return "success";
        } catch (Exception e) {
            System.out.println(e.toString());
            return e.toString();

        }

    }

    private static URI getBaseURI() {
        return UriBuilder.fromUri("http://localhost:8080/RestWeb/webresources")
                .build();
    }

} 
```

我使用以下包来继承所需的类

**com.sun.jersey.jersey-core-1.4.0.jar**

**jersey-core-1.7.jar**

**jsr311-api-1.1.1.jar**

以下是网络服务中的类

```
 @Path("/hello")
public class Hello {

    // This method is called if TEXT_PLAIN is request
    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String sayPlainTextHello() {
        return "Hello Jersey";
    }

    // This method is called if XML is request
    @GET
    @Produces(MediaType.TEXT_XML)
    public String sayXMLHello() {
        return "<?xml version=\"1.0\"?>" + "<hello> Hello Jersey" + "</hello>";
    }

    // This method is called if HTML is request
    @GET
    @Produces(MediaType.TEXT_HTML)
    public String sayHtmlHello() {
        return "<html> " + "<title>" + "Hello Jersey" + "</title>"
                + "<body><h1>" + "Hello Jersey" + "</body></h1>" + "</html> ";
    }

    @GET
    @Path("get")
    @Produces(MediaType.TEXT_HTML)
    public String getXml() {

    return "xyz";
    }
}

@Path("generic")
@WebService
public class GenericResource {

    @Context
    private UriInfo context;
    @Context
    private HttpServletResponse response;
    private String content = "content";

    /**
     * Creates a new instance of GenericResource
     */
    public GenericResource() {
    }

    /**
     * Retrieves representation of an instance of
     * com.mycompany.resource.GenericResource
     *
     * @return an instance of java.lang.String
     */
    @GET
    @Path("get")
    @Produces(MediaType.TEXT_HTML)
    public String getXml() {
        System.out.println("\n\n\nGET\n\n\n");
        //response.addHeader(content, content);
        return this.content+" from get method";

    }

    /**
     * PUT method for updating or creating an instance of GenericResource
     *
     * @param content representation for the resource
     * @return an HTTP response with content of the updated or created resource.
     */
    @PUT
    @Path("put")
    @Consumes("text/html,text/xml,text/plain")
    public void putXml(@PathParam("content") String content) {
        System.out.println("\n\n\nPUT\n\n\n");
        response.addHeader(content, content);
        this.content = this.content + content;
    }

    @POST
    @Path("post")
    @Consumes("text/html,text/xml,text/plain")
    public void postXml(@PathParam("content") String content) {
        System.out.println("\n\n\nPOST\n\n\n");
        response.addHeader(content, content);
        this.content = this.content + content;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:34:18.820

通用路径可能有问题。

```
System.out.println(service.path("generic").path("get")
                    .accept(MediaType.TEXT_HTML).get(String.class)); 
```

你能显示通用路径的网络服务的映射吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T17:13:57.937

您的 PUT 和 POST 方法应采用表示请求正文的参数。相反，他们期望一个路径参数`content`。

```
@PUT
@Consumes("text/html,text/xml,text/plain")
public void putXml(@PathParam("content") String content) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:24:52.220

我得到了解决方案 GWT 不支持某些软件包。我发现 GWT 中的 RequestBuilder 类可以连接 REST Web 服务，我使用 RequestBuilder 类来连接 REST Web 服务。但是我没有从 webservice 得到任何东西，因为我的 GWT 和 REST 应用程序有不同的端口和域。它通过在标题中设置 Access-Control-Allow-Orgin 来克服

以下是我的客户端代码（GWT）

```
 public void onModuleLoad() {
        RequestBuilder builder = new RequestBuilder(RequestBuilder.POST,
         "http://localhost:8080/RestWeb/webresources/generic/post/"
         +"haiiiiiii");
        builder.setCallback(new RequestCallback() {

         @Override
         public void onResponseReceived(Request request,
        Response response) {

         Window.alert("onResponseReceived"
        + response.getStatusCode() + response.getText());

         }

         @Override
         public void onError(Request request, Throwable exception) {

         }
         });
        builder.setHeader("Content-Type", "text/plain");
         builder.setHeader("Access-Control-Allow-Methods",
         "PUT, GET, POST, DELETE, OPTIONS");
         builder.setHeader("Access-Control-Allow-Headers",
         "Content-Type");
         builder.setHeader("Access-Control-Allow-Origin",
         "http://127.0.0.1:8888");
         try {
         builder.send();
         } catch (RequestException e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
         }
} 
```

以下是我的服务器端代码

```
 @Path("generic")
@WebService

public class GenericResource {

    @Context
    private UriInfo context;
    @Context
    private HttpServletResponse response;
    private String content = "content";

    /**
     * Creates a new instance of GenericResource
     */
    public GenericResource() {
    }

    /**
     * Retrieves representation of an instance of
     * com.mycompany.resource.GenericResource
     *
     * @return an instance of java.lang.String
     */
    @GET
    @Path("get")
    @Produces(MediaType.TEXT_HTML)
    public String getXml() {
        System.out.println("\n\n\nGET\n\n\n");
        //response.addHeader(content, content);
        return this.content+" from get method";

    }

    /**
     * PUT method for updating or creating an instance of GenericResource
     *
     * @param content representation for the resource
     * @return an HTTP response with content of the updated or created resource.
     */
    @PUT
    @Path("put")
    @Consumes("text/html,text/xml,text/plain")
    public void putXml(@PathParam("content") String content) {
        System.out.println("\n\n\nPUT\n\n\n");
        response.addHeader(content, content);
        this.content = this.content + content;
    }

    @POST
    @Path("post")
    @Consumes("text/html,text/xml,text/plain")
    public void postXml(@PathParam("content") String content) {
        System.out.println("\n\n\nPOST\n\n\n");
        response.addHeader(content, content);
        this.content = this.content + content;
    }
}

import java.io.IOException;
import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.web.filter.OncePerRequestFilter;

/**
 *
 * @author SPC
 */
public class CorsFilter extends OncePerRequestFilter {

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)
            throws ServletException, IOException {
      //  if (request.getHeader("Access-Control-Request-Method") != null && "OPTIONS".equals(request.getMethod())) {
            // CORS "pre-flight" request
                response.addHeader("Content-Type",
                "multipart/form-data,text/plain,text/html");
                response.addHeader("Connection", "keep-alive");
            response.addHeader("Access-Control-Allow-Origin", "http://127.0.0.1:8888");
            response.addHeader("Access-Control-Allow-Methods",  "PUT, GET, POST, DELETE, OPTIONS");
            response.addHeader("Access-Control-Allow-Headers","origin, access-control-allow-methods, content-type, access-control-allow-origin, access-control-allow-headers");
            response.addHeader("Access-Control-Max-Age", "1800");//30 min
       // }
        filterChain.doFilter(request, response);
    }
} 
```

# android - 查找适用于 android 的 mapsforge 示例

> ID：14191344
> 
> 赞同：3
> 
> 时间：2013-01-07T07:03:00.830
> 
> 标签：android, maps

我在[mapsforge wiki](http://code.google.com/p/mapsforge/wiki/OverlayAPI#Sample_applications_for_developers)中读到它有一个示例页面“/trunk/Applications/Android/Samples”。[现在](http://code.google.com/p/mapsforge/source/browse/trunk/Applications/Android/Samples/src/org/mapsforge/applications/android/samples)好像死了。

我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:57:23.423

[你可以在这里](http://code.google.com/p/mapsforge/source/browse/#git/Applications/Android/Samples)找到 mapsforge 的示例源。

# php - 用可变空格解析字符串的想法

> ID：14191349
> 
> 赞同：0
> 
> 时间：2013-01-07T07:03:33.483
> 
> 标签：php

我试图找出一种方法来解析包含大约 3-4 列数据的字符串，每个元素之间有可变空格。我想将每一行分成各自的组件。示例如下：

```
WHITE BLOOD CELL COUNT      10.2        4.0-10.8
HEMOGLOBIN   8.9   ABNORMAL LOW    12-16
PLATELET COUNT     250    160-400 
```

所以在上面的例子中，两行有三个元素，一行有四个元素。我想找到一种方法将它分开。如果第一个元素是一个单词，那将很容易，但是除了遍历每个字符并匹配字母或数字/句点/破折号并以这种方式进行之外，我没有看到一种简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:15:54.383

您的数据可以使用以下方法分成几行：

```
$rows = explode("\n", $str); 
```

然后，对于每一行，您可以使用以下方法按列拆分数据：

```
foreach($rows as $i => $row){
    $rows[$i] = preg_split ( '/\s{2,}/' , $row);
} 
```

这是一个演示：[http ://codepad.org/BdCHu8PO](http://codepad.org/BdCHu8PO)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:28:37.283

```
preg_match_all("#(.*?)(?:\s{2,}|\z)#",$str,$matches); 
```

数组将存储在 $matches[0] 中：

IE：

$matches[0][0] 是白细胞计数

$matches[0][1] 是 10.2

... ETC

一个例子在这里： [http ://sandbox.onlinephpfunctions.com/code/6e36760e284e1fdc5160755d866b5aaea4df3b16](http://sandbox.onlinephpfunctions.com/code/6e36760e284e1fdc5160755d866b5aaea4df3b16)

另一个答案已经很好了，但我想我会包括一步正则表达式。:)

# scrapy - Scrapy 头痛 - 试图调试。没有错误，但代码不起作用

> ID：14191357
> 
> 赞同：2
> 
> 时间：2013-01-07T07:04:19.930
> 
> 标签：scrapy, web-crawler

编辑：这已经解决了！XPATH 是问题所在。

我很困惑。我正在尝试编写一个非常简单的蜘蛛，以抓取网站（talkbass.com）以获取分类低音部分中所有链接的列表（http://www.talkbass.com/forum/f126/） . 我根据教程（我相对轻松地完成了）编写了蜘蛛，而这个只是不工作。我可能做错了很多，因为我也尝试合并规则，但我什么也没得到。

我的商品代码是：

```
from scrapy.item import Item, Field
class BassItem(Item):
    title = Field()
    link = Field()
    print title, link 
```

我的蜘蛛代码是：

```
from scrapy.spider import BaseSpider 
from scrapy.contrib.spiders import Rule 
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor 
from scrapy.selector import HtmlXPathSelector
from tutorial.items import BassItem
class BassSpider(BaseSpider):
    name = "bass"
    allowed_domains = ["www.talkbass.com"]
    start_urls = ["http://www.talkbass.com/forum/f126/"]

    rules = (
        # Extract links matching 'f126/xxx'
        # and follow links from them (since no callback means follow=True by default).
        Rule(SgmlLinkExtractor(allow=('/f126/(\d*)/', ), ))
    )

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        ads = hxs.select('/html/body/div/div/div/table/tbody/tr/td/form/table/tbody')
        items = []
        for ad in ads:
            item = BassItem()
            item['title'] = ad.select('a/text()').extract()
            item['link'] = ad.select('a/@href').extract()
            items.append(item)
        return items 
```

我没有收到任何错误，但日志没有返回任何内容。这是我在控制台中看到的：

```
C:\Python27\Scrapy\tutorial>scrapy crawl bass
2013-01-07 14:36:49+0800 [scrapy] INFO: Scrapy 0.16.3 started (bot: tutorial)
2013-01-07 14:36:49+0800 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, Co
reStats, SpiderState
{} {}
2013-01-07 14:36:51+0800 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddl
eware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, Htt
pCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2013-01-07 14:36:51+0800 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, Refe
rerMiddleware, UrlLengthMiddleware, DepthMiddleware
2013-01-07 14:36:51+0800 [scrapy] DEBUG: Enabled item pipelines:
2013-01-07 14:36:51+0800 [bass] INFO: Spider opened
2013-01-07 14:36:51+0800 [bass] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2013-01-07 14:36:51+0800 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2013-01-07 14:36:51+0800 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080
2013-01-07 14:36:52+0800 [bass] DEBUG: Crawled (200) <GET http://www.talkbass.com/forum/f126/> (referer: None)
2013-01-07 14:36:52+0800 [bass] INFO: Closing spider (finished)
2013-01-07 14:36:52+0800 [bass] INFO: Dumping Scrapy stats:
        {'downloader/request_bytes': 233,
         'downloader/request_count': 1,
         'downloader/request_method_count/GET': 1,
         'downloader/response_bytes': 17997,
         'downloader/response_count': 1,
         'downloader/response_status_count/200': 1,
         'finish_reason': 'finished',
         'finish_time': datetime.datetime(2013, 1, 7, 6, 36, 52, 305000),
         'log_count/DEBUG': 7,
         'log_count/INFO': 4,
         'response_received_count': 1,
         'scheduler/dequeued': 1,
         'scheduler/dequeued/memory': 1,
         'scheduler/enqueued': 1,
         'scheduler/enqueued/memory': 1,
         'start_time': datetime.datetime(2013, 1, 7, 6, 36, 51, 458000)}
2013-01-07 14:36:52+0800 [bass] INFO: Spider closed (finished) 
```

我从来没有做过一个实际的项目，我认为这是一个很好的起点，但我似乎无法解决这个问题。

我也不确定 XPath 是否正确。我正在使用一个名为 XPath helper 的 chrome 扩展。我需要的部分之一是这样的：

```
/html/body/div[1]/div[@class='page']/div/table[5]/tbody/tr/td[2]/form[@id='inlinemodform']/table[@id='threadslist']/tbody[@id='threadbitsforum126']/tr[6]/td[@id='td_threadtitle944468']/div[1]/a[@id='thread_title944468'] 
```

但是，如果您看到“ tr[6] ”和“944468” - 对于每个链接来说，它们并不是恒定的（其他都是）。我刚刚删除了类名和数字，这让我看到了你在我的蜘蛛代码中看到的内容。

还只是添加 - 当我直接从 XPath Helper 复制和粘贴 XPath 时，它会给出语法错误：

```
 ads = hxs.select('/html/body/div[1]/div[@class='page']/div/table[5]/tbody/tr/td[2]/form[@id='inlinemodform']/table[@id='threadslist']/tbody[@id='threadbits_forum_126']/tr[6]/td[@id='td_threadtitle_944468']/div[1]/a[@id='thread_title_944468']')
                                                                                                                                                                                       ^
SyntaxError: invalid syntax 
```

我已经尝试过解决这个问题（使用元素不恒定的通配符）并且每次尝试时都收到语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:14:49.690

可能导致该问题的一个原因是您使用的 BaseSpider 没有实现规则。

尝试将 BaseSpider 更改为 CrawlSpider。您还应该重命名`parse`为`parse_item`（因为 CrawlSpider 实现了一个`parse`函数），这将需要在您的规则中显式设置回调。例如：

```
rules = (
    # Extract links matching 'f126/xxx'
    # and follow links from them (since no callback means follow=True by default).
    Rule(SgmlLinkExtractor(allow=('index\d+\.html', )), callback='parse_item'),
) 
```

一个更新的 Xpath 尝试如下。请注意，这将包括所有粘性线程，因此将其作为练习留给 OP 来解决如何过滤掉这些问题。

```
ads = hxs.select("//td[substring(@id, 1, 15) = 'td_threadtitle_']/div/a") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T16:30:33.603

除了您尝试在 BaseSpider 中使用不受支持的规则这一事实之外，您是否找到与该 hxs.select 语句匹配的任何匹配项？尝试打开命令提示符，然后运行 ​​scrapy shell [http://www.talkbass.com/forum/f126/](http://www.talkbass.com/forum/f126/)

然后输入；

```
hxs.select('/html/body/div/div/div/table/tbody/tr/td/form/table/tbody') 
```

然后;

```
hxs.select('/html/body/div/div/div/table/tbody/tr/td/form/table/tbody/a/text()') 
```

然后;

```
hxs.select('/html/body/div/div/div/table/tbody/tr/td/form/table/tbody/a/@href') 
```

如果您确实找到了匹配项，请尝试一下；

```
item = BassItem()
item['title'] = ad.select('/html/body/div/div/div/table/tbody/tr/td/form/table/tbody/a/text()').extract()
return item 
```

然后在您的项目管道中

```
for i in item['title']:
    print i 
```

底线是您的 hxs.select 语句不正确，因此您应该始终打开 shell 并测试您的 hxs.select 语句，直到您知道在运行您的蜘蛛之前您已经拥有它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T09:08:53.453

您的代码中有几个问题。

**BaseSpider**不支持**规则**

```
class BassSpider(BaseSpider): 
```

**因此，从CrawlSpider**而不是**BaseSpider**扩展您的爬虫，它将开始爬取链接。

```
class BassSpider(CrawlSpider): 
```

在提取部分

```
ads = hxs.select('/html/body/div/div/div/table/tbody/tr/td/form/table/tbody') 
```

将您的 Xpath 转换为**relative**而不是**absolute**，

在大多数情况下**tbody**标签不会出现在源代码上，但浏览器会在渲染时显示这一点，因此包含 tbody 的 Xapth 在浏览器上工作但不在代码中......所以我建议您不要在 xpath 中使用 tbody 标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T04:24:54.287

如前所述，XPath 是这里的大问题。它已被编辑为 '//table[@id="threadslist"]/tbody/tr/td[@class="alt1"][2]/div'

# iphone - 配置证书错误

> ID：14191363
> 
> 赞同：0
> 
> 时间：2013-01-07T07:04:35.980
> 
> 标签：iphone, ios, xcode, certificate, ios-provisioning

我添加了 KeyChain Access 密钥。现在配置证书有问题，它给了我“未找到有效签名身份”的错误。

当我尝试从底部刷新时，他们要求我“使用您的 Apple ID 登录”，如果我输入我的，它会显示...

> 不在任何 iPhone 开发团队中--> 指定用户不在任何 iPhone 开发团队中

是否必须让开发人员帐户修复它或使用供应证书，实际上我正在使用其他人供应证书和钥匙串证书。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:21:15.683

复制配置文件的包标识符并放入 info.plist。在项目和目标中选择正确的配置文件。如果配置文件与捆绑标识符匹配，则会出现此错误。还要检查您是否在钥匙串中安装了此配置文件的 .p12 证书。

# iphone - iOS - 如何将图像转换为无符号字符以使用 Blue Bamboo 打印机打印图像？

> ID：14191364
> 
> 赞同：1
> 
> 时间：2013-01-07T07:04:43.360
> 
> 标签：iphone, ios, uiimage, printers, unsigned-char

我正在开发一款带有 Blue Bamboo 打印机的打印机应用程序。我想通过它打印一个图像，但我无法将其转换为**无符号字符数组**，因为它们在示例代码中提供。我怎样才能做到这一点？这是他们提供的示例代码。

```
 unsigned char buffer3[796]={
     0x55 ,  0x66 ,  0x77 ,  0x88 ,  0x44 ,  0x1B ,  0x58 ,  0x31 ,  
     0x19, 0x20, 
     0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x80 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x01 ,0xC0 ,0x00
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x01 ,0x80 ,0x00 ,0x03 ,0x60 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x03
     ,0xA0 ,0x00 ,0x07 ,0xB0 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x05 ,0x60 ,0x00 ,0x07 ,0xD8 ,0x00
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x05 ,0xA0 ,0x00 ,0x13 ,0xEC ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x04 
     ,0x20 ,0x00 ,0x29 ,0xF4 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x03 ,0xC0 ,0x00 ,0x64 ,0xF9 ,0x00
     ,0x0F ,0xFF ,0x9C ,0x01 ,0xC0 ,0x19 ,0xFF ,0xC0 ,0x7F ,0xFC ,0x7F ,0xF9 ,0xC0 ,0x3D ,0xFF
     ,0xF1 ,0xFF ,0xE3 ,0xFF ,0xC0 ,0x00 ,0x00 ,0xF2 ,0x73 ,0x80 ,0x0F ,0xFF ,0x9C ,0x01 ,0xC0
     ,0x19 ,0xFF ,0xC0 ,0x7F ,0xFE ,0x7F ,0xFD ,0xE0 ,0x3D ,0xFF ,0xF1 ,0xFF ,0xE3 ,0xFF ,0xC0
     ,0x00 ,0x00 ,0x79 ,0x26 ,0xC0 ,0x0F ,0xFF ,0xDC ,0x01 ,0xC0 ,0x19 ,0xFF ,0xC0 ,0x7F ,0xFE
     ,0xFF ,0xFD ,0xF0 ,0x7D ,0xFF ,0xFB ,0xFF ,0xF7 ,0xFF ,0xE0 ,0x00 ,0x03 ,0x3C ,0x8F ,0x60
     ,0x0C ,0x01 ,0xDC ,0x01 ,0xC0 ,0x19 ,0x80 ,0x00 ,0x70 ,0x0E ,0xE0 ,0x1D ,0xF0 ,0x7D ,0x80
     ,0x3B ,0x80 ,0x77 ,0x00 ,0xE0 ,0x00 ,0x04 ,0x9E ,0x8F ,0xB0 ,0x0E ,0x01 ,0xDC ,0x01 ,0xC0
     ,0x19 ,0x80 ,0x00 ,0x70 ,0x0E ,0xE0 ,0x1D ,0xF8 ,0xFD ,0x80 ,0x33 ,0x80 ,0x77 ,0x00 ,0xE0
     ,0x00 ,0x0E ,0x4F ,0x27 ,0xD8 ,0x0F ,0xFF ,0x9C ,0x01 ,0xC0 ,0x19 ,0xFF ,0xC0 ,0x7F ,0xFC 
     ,0xE0 ,0x1D ,0xF9 ,0xFD ,0xFF ,0xF3 ,0x80 ,0x77 ,0x00 ,0xE0 ,0x00 ,0x0F ,0x26 ,0x53 ,0xC8
     ,0x0F ,0xFF ,0x9C ,0x01 ,0xC0 ,0x19 ,0xFF ,0xC0 ,0x7F ,0xFC ,0xEF ,0xFD ,0xDD ,0xDD ,0xFF
     ,0xF3 ,0x80 ,0x77 ,0x00 ,0xE0 ,0x00 ,0x07 ,0x90 ,0xC9 ,0xF0 ,0x0F ,0xFF ,0xDC ,0x01 ,0xC0
     ,0x19 ,0xFF ,0xC0 ,0x7F ,0xFE ,0xEF ,0xFD ,0xDF ,0x9D ,0xFF ,0xFB ,0x80 ,0x77 ,0x00 ,0xE0
     ,0x00 ,0x03 ,0xC9 ,0xE4 ,0xE0 ,0x0C ,0x00 ,0xDC ,0x01 ,0xC0 ,0x19 ,0x80 ,0x00 ,0x70 ,0x06 
     ,0xE7 ,0xFD ,0xCF ,0x9D ,0x80 ,0x3B ,0x80 ,0x77 ,0x00 ,0xE0 ,0x00 ,0x01 ,0xF0 ,0xF2 ,0x40
     ,0x0E ,0x01 ,0xDC ,0x00 ,0xC0 ,0x19 ,0x80 ,0x00 ,0x70 ,0x0E ,0xE0 ,0x1D ,0xCF ,0x1D ,0x80
     ,0x3B ,0x80 ,0x77 ,0x00 ,0xE0 ,0x00 ,0x00 ,0xE6 ,0x79 ,0x00 ,0x0F ,0xFF ,0xDF ,0xFC ,0xFF
     ,0xF9 ,0xFF ,0xC0 ,0x7F ,0xFE ,0xE0 ,0x1D ,0xC7 ,0x1D ,0xFF ,0xFB ,0xFF ,0xF7 ,0xFF ,0xE0
     ,0x00 ,0x00 ,0x49 ,0x3D ,0x00 ,0x0F ,0xFF ,0x9F ,0xFC ,0xFF ,0xF9 ,0xFF ,0xC0 ,0x7F ,0xFE
     ,0xE0 ,0x1D ,0xC2 ,0x1D ,0xFF ,0xF1 ,0xFF ,0xE3 ,0xFF ,0xC0 ,0x00 ,0x00 ,0x1C ,0x9E ,0x00 
     ,0x0F ,0xFF ,0x1F ,0xFC ,0x7F ,0xE1 ,0xFF ,0xC0 ,0x7F ,0xFC ,0xE0 ,0x1D ,0xC0 ,0x1D ,0xFF
     ,0xE0 ,0xFF ,0xC1 ,0xFF ,0x80 ,0x00 ,0x00 ,0x1E ,0x4C ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
     ,0x00 ,0x00 ,0x0F ,0x20 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x07 ,0x90 ,0x00
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x03 ,0xE0 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x01 ,0xC0 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x80 ,0x00
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
     ,0x00 ,0x00 ,0x00  
     }; 
```

# data-binding - AngularJS初学者数据绑定困惑

> ID：14191368
> 
> 赞同：2
> 
> 时间：2013-01-07T07:04:51.163
> 
> 标签：data-binding, angularjs

我正在尝试了解 AngularJS 的数据绑定功能，并且有一个新手问题：

在下面的示例中，当我在文本框中键入名称时，问候语不会更新。

```
<html ng-app>
<head>
    <script src="js/angular.js"></script>
    <script>
        function myCtl($scope){
            $scope.person=$scope.fname;
        }
    </script>
</head>
<body>
        <div ng-controller="myCtl">
            <input ng-model="fname"/>
            <br/>               
            Hello, {{person}}
        </div>
</body> 
```

当我改变

```
Hello, {{person}} 
```

到

```
Hello, {{fname}} 
```

当我键入时，问候语会更新。我对为什么第二种语法有效但第一种无效的原因感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T22:38:22.937

`$scope.person=$scope.fname`在 $scope 对象上创建一个`person`原始属性并为其赋值`undefined`（因为在执行这行代码时 $scope.fname 还不存在）。这是您在输入文本框之前的 $scope 的样子：

![输入前的 $scope](../Images/ecb04f766f4e9bc3f4af2f6ccb2d250c.png)

在您在文本框中输入内容后，Angular 会自动`fname`在 $scope 上创建一个原始属性，并且自动双向数据绑定会不断地将值设置为文本框中的任何内容。所以，如果我输入“Mark”，那么 $scope 现在看起来像这样：

![键入后的 $scope](../Images/5fa92b9e5b29e6b808cb702397f63a5c.png)

现在应该清楚为什么`{{person}}`什么都不显示，而是`{{fname}}`显示文本框中的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T07:19:21.460

因为，当您在输入字段中输入时，`$scope.fname`正在更改，而不是`$scope.person`.

您可以使用`$watch`on修复它`fname`：

```
$scope.$watch('fname', function(value) {
   if(value) {
      $scope.person = value;
   }
}, true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T11:59:19.050

对于 asgoth 的回答，我还要补充一点，这段代码掩盖了一个误解：

```
$scope.person=$scope.fname; 
```

此代码*不会*在每次视图中发生某些事情时运行，而只会在执行控制器时运行一次。您似乎正在尝试设置`$scope.person`为`$scope.fname`. 但是`$scope.fname`没有定义——这是你的控制器需要做的。因此，您的视图和控制器都引用了未定义的值。

在像这样的简单情况下，您的控制器应该在启动时初始化您的模型：

```
function myCtl($scope){
    scope.person = {
        fname: '',
        lname: '',
        email: ''
    };
} 
```

然后将元素绑定到人的属性（例如`ng-model="person.fname"`）。

现在，无论何时代码在您的控制器中运行，它都会自动`person.fname`为您提供正确的角度 - 您永远不需要“从您的视图中读取”。

```
function myCtl($scope){
    $scope.person = {
        fname: '',
        lname: '',
        email: ''
    };
    function validate() {
        if (!$scope.email.match(/@/) return window.alert('Please enter a valid email address!');
    }
} 
```

从你的角度来看，你会这样做：

```
<form ng-submit="validate()"> 
```

或者

```
<button ng-click="validate()"> 
```

# wpf - 当鼠标离开WPF中动态生成的Rect时如何更改鼠标光标？

> ID：14191386
> 
> 赞同：0
> 
> 时间：2013-01-07T07:06:48.867
> 
> 标签：wpf, mouseleave, rect, mouse-cursor

我有一段代码可以做到这一点：
“在 WPF 中使用 Rect 类创建两个矩形，并将它们放置在标签的左边框和下边框上，以指示鼠标指针是否放置在其中任何一个中，以便调整标签的大小如果用户在这些区域中单击并拖动“

代码如下所示：

```
//the event handler
private void thelabel_MouseMove_1(object sender, MouseEventArgs e)
        {
         //if the mouse button is not pressed
            if (Mouse.LeftButton == MouseButtonState.Released)
            {
            //locate the current mouse location
                Point currentLocation = e.MouseDevice.GetPosition(this);

        //the label's position
           Point labelposition = thelabel.TransformToAncestor(thegrid).Transform(new Point(0, 0));

        //create two Rects with 3 pixels as width and just as long as each one's corresponding border, and position them on each bottom and left borders of the label
           var bottomHandle = new Rect(labelposition.X - thelabel.Width, labelposition.Y + thelabel.Height, thelabel.Width, 3);  
           var leftHandle = new Rect(labelposition.X - thelabel.Width, labelposition.Y, 3, thelabel.Height);

           Point relativeLocation = this.TranslatePoint(currentLocation, this);

        //if the left handle contains the mouse location i.e the mouse is on the left handle
           if (leftHandle.Contains(relativeLocation))
             {
                 this.Cursor = Cursors.SizeWE;
             }
          //if the bottom handle contains the mouse location
             else if (bottomHandle.Contains(relativeLocation))
             {
                 this.Cursor = Cursors.SizeNS;
             }
             else
             {
              //but this doesn't work when the mouse leaves the label and the two rects !
                 this.Cursor = Cursors.Arrow;
             }
    } 
```

最后一行代码

```
else
                     {
                         this.Cursor = Cursors.Arrow;
                     } 
```

不起作用，因为当鼠标不在**标签**上时，它`OnMouseMove`不再被调用**并且**光标不会变回箭头。

我已经尝试将 an 添加`OnMouseMove`到 the`Grid`以及`Canvas`包含标签和它的`Rect`s 中，以便将光标更改回箭头。但这会影响确定鼠标是否位于任何一个`Rect`s 上。

**所以**
问题是“我如何确定鼠标是否离开两个矩形，无论是从标签的 OnMouseMove 事件之外还是**通过**任何其他方式”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:00:31.100

当您说“包含...矩形的画布”时，我猜您的意思是[Rectangle](http://msdn.microsoft.com/en-us/library/system.windows.shapes.rectangle%28v=vs.110%29.aspx)。

为了实现拖动，您应该将事件处理程序附加到这些矩形（而不是标签）以用于以下鼠标事件：

*   MouseEnter - 设置拖动光标
*   MouseLeave - 重置光标
*   MouseDown 或 MouseLeftButtonDown - 通过[捕获鼠标](http://msdn.microsoft.com/en-us/library/system.windows.uielement.capturemouse.aspx)开始拖动，
*   MouseUp 或 MouseLeftButtonUp - 通过[释放鼠标捕获结束拖动](http://msdn.microsoft.com/en-us/library/system.windows.uielement.releasemousecapture.aspx)
*   MouseMove - 实际拖动

# asp.net - IIS 中有关会话超时的查询

> ID：14191387
> 
> 赞同：3
> 
> 时间：2013-01-07T07:06:51.090
> 
> 标签：asp.net, iis, iis-7.5

我在 IIS 中托管了一个 Web 应用程序，并且我正在使用系统空闲时间 = 20 分钟（默认）。

但是我遇到的问题是，当我空闲时间不到 20 分钟时，它会在此之前被注销。（注意：这里的客户端和服务器不同）

我在服务器中找到了一个日志条目

```
2013-01-07 06:54:32 <ClientIPAddress> 1101 <server IP Address> 86 - - - - - Timer_ConnectionIdle - 
```

和

```
2013-01-07 06:36:14 <client IPAddress> 56282 <server IPAddress> 86 HTTP/1.1 GET /LogOffPage.aspx?SessionExpired=Y&FromPage=%2fajaxpro%Common.ashx - 2 Connection_Dropped TestApp 
```

可能是什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:07:06.157

我不是 100% 确定，但我认为值得一试。

IIS ASP.NET 应用程序中发生了两件事。一种是空闲超时，即 IIS 在应用程序处于空闲状态时关闭它。另一个是**会话超时**。可能是**空闲超时**（也是 20 分钟）导致了这种情况。**由于您是一个单独的用户，当您处于空闲状态时，您会导致这两种情况同时发生**。

离开会话超时 20 分钟。儿子不改了。

Bu 将空闲超时设置为 30 分钟。再次结束跟踪您的会话超时。

我附上屏幕截图：

![在此处输入图像描述](../Images/600aff2ee81158d21748d2f6f941b897.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:13:26.627

*[正如同行之前所说，没有什么信息可以处理......]*

在 IIS 7.0 上，对于 .Net 应用程序，会话寿命取决于几个设置。

*   池设置中的“空闲时间” ^((1))
*   来自应用程序身份验证设置的“Cookie 超时”
*   应用程序会话状态设置中的“会话超时”
*   在 web.config 文件的 system.web 部分中指定时的“sessionState timeout”

^((1))这对于会话状态设置为“InProc”的应用程序有效

请检查所有这些配置以确保这些设置设置为 20 分钟（1200 秒）或更长时间。

此外，通过 Google，我发现由于内存不足或服务器端脚本执行超时而导致的“Connection_Dropped”事件的报告。

您可以使用 Window 的 PerfMon 检查此类事件。

以下链接中的信息可能有用：

*   关于“InProc”会话销毁的官方文档：http:
    [//support.microsoft.com/kb/324772/en-us](http://support.microsoft.com/kb/324772/en-us)
*   .Net 应用程序的 PerfMon 官方文档：http:
    [//msdn.microsoft.com/en-us/library/fxk122b4 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/fxk122b4(v=vs.85).aspx)
*   “池空闲超时”的官方来源：
    [http ://technet.microsoft.com/en-us/library/cc771956(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc771956(v=ws.10).aspx)

*   关于此设置的相当大胆的声明：
    [How to prevent/extend idleTimeout in IIS 7?](https://stackoverflow.com/questions/3891178/how-to-prevent-extend-idletimeout-in-iis-7)

*   也许必须考虑 ConnectionTimeout 设置：http:
    [//msdn.microsoft.com/en-us/library/microsoft.web.administration.sitelimits.connectiontimeout (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/microsoft.web.administration.sitelimits.connectiontimeout(v=vs.90).aspx)
*   有关 ConnectionTimeout 的更多信息：http:
    [//www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/73566f83-c257-4941-8ed8-7ae45b2e7985.mspx? mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/73566f83-c257-4941-8ed8-7ae45b2e7985.mspx?mfr=true)

*   最后但并非最不重要的一点是，此文档可能有用：
    [http ://ramanisandeep.net/2011/03/19/tipstrick-session-timeout-problem-in-iis7/](http://ramanisandeep.net/2011/03/19/tipstrick-session-timeout-problem-in-iis7/)

祝你好运！

PS：很抱歉缺少说明 IIS 设置的屏幕快照。我的操作系统是葡萄牙语...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:35:40.613

关于您的配置没有足够的信息，但是......

也许您的应用程序池在空闲时正在回收或关闭，这导致 InProc 会话也提前到期？如果这是您需要编辑应用程序池设置并重新测试的原因。

# php - Salesforce 到 magento 的集成

> ID：14191389
> 
> 赞同：2
> 
> 时间：2013-01-07T07:06:57.877
> 
> 标签：php, magento, salesforce

```
 //Create a new partner object
     $connection = new SforcePartnerClient();

     //Create the SOAP connection
     try {
          $connection->createConnection(salesforce_wsdl);
     } catch (Exception $e) {
          //Salesforce could be down, or you have an error in configuration
          //Check your WSDL path
          echo "Salesforce could be down";
     }

     //Pass login details to Salesforce
     try {
          $connection->login(salesforce_username, salesforce_password . salesforce_token);
     } catch (Exception $e) {
          //Make sure your username and password is correct
            echo "usename/password incorrect";
     }

     //Describing the Leads object and printing the array
     $describe = $connection->describeSObjects(array('Lead'));
     print_r($describe);

     //Create New Lead
     $leadFirstName = "John";
     $leadLastName = "Doe";
     $leadCompany = "abc";
     $leadEmail = "chetan@abc.com";

     //Creating the Lead Object
     $lead = new sObject();
     $lead->type = 'Lead';
     $lead->fields = array(
          'FirstName' => $leadFirstName,
          'LastName' => $leadLastName,
          'Company' => $leadCompany,
          'Email' => $leadEmail
     );

     //Submitting the Lead to Salesforce
     $result = $connection->create(array($lead), 'Lead'); 
```

这是我的代码...我只是想使用此代码在销售人员中创建潜在客户。这是salesforce 的示例php 工具包代码。

但是当我试图运行这段代码时。它不会在销售人员中产生任何领先优势。我的登录凭据是正确的，安全令牌也是正确的。

我哪里错了？我在 partner.wsdl.xml 中使用免费的开发人员帐户和以下代码进行连接：

```
 <!-- Soap Service Endpoint -->
    <service name="SforceService">
        <documentation>Sforce SOAP API</documentation>
        <port binding="tns:SoapBinding" name="Soap">
            <soap:address location="https://login.salesforce.com/services/Soap/c/26.0"/>
        </port>
    </service> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:41:46.433

我很高兴你解决了它。只是要指出，用于描述线索和打印结果的区域不是必需的，例如就在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:00:09.380

我确实打印了结果的值，但效果不佳。当我使用合作伙伴 wsdl 时，我将 new SObject() 更改为 new stdClass() 并且它有效.. :)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-18T03:07:53.790

我知道一个很棒的 magento 扩展，它可以为你做这一切，甚至更多：[https ://products.crunchyconsulting.com/crunchy-products/crunchy-magforce.html](https://products.crunchyconsulting.com/crunchy-products/crunchy-magforce.html)

查看帮助和文档选项卡，您甚至可以在其中找到演示截屏视频：

[https://www.youtube.com/watch?v=TjxvjGcAGqY](https://www.youtube.com/watch?v=TjxvjGcAGqY)

[https://www.youtube.com/watch?v=cmf4Ksv3uRM](https://www.youtube.com/watch?v=cmf4Ksv3uRM)

# iphone - 如何更改 UIImagePickerController 的相机视图大小

> ID：14191391
> 
> 赞同：1
> 
> 时间：2013-01-07T07:07:04.287
> 
> 标签：iphone, uiimagepickercontroller

是否可以更改 UIImagePickerController 的可显示帧大小？我想显示相机视图，但不是在整个屏幕上，而是在视图中间的 280*190 边界框中显示

这是我的`viewDidAppear`：

```
- (void) viewDidAppear:(BOOL)animated {

UIImagePickerController *picker = [[UIImagePickerController alloc] init];
picker.sourceType = UIImagePickerControllerSourceTypeCamera;
picker.showsCameraControls = NO;
picker.cameraDevice = UIImagePickerControllerCameraDeviceFront;

[self presentModalViewController:picker animated:YES];  

[super viewDidAppear:YES];
 } 
```

我在任何地方都找不到这样做的方法……没有人使用它吗？

我如何使用覆盖类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T00:07:19.140

我不相信您可以为`UIImagePickerController`. 如果您想要自定义大小的相机视图和捕获大小，您应该查看这些`AVFoundation`类 - 特别是`AVCaptureVideoPreviewLayer`、`AVCaptureDeviceInput`和`AVCaptureStillImageOutput`类。

查看[http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW2](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW2)了解有关使用此功能的更多信息框架。

# javascript - 使用 MessageChannel HTML5 的 Web Workers 通信

> ID：14191394
> 
> 赞同：15
> 
> 时间：2013-01-07T07:07:27.887
> 
> 标签：javascript, jquery, html, web-worker, message-passing

我想实现网络工作者之间的通信。我阅读了 W3C 文档，发现**MessageChannel**是其中一种方法，但是在阅读 MessageChannel 时，我无法理解如何使用 messagechannel 实现工作人员之间的通信。

我从 MSDN 得到这个

[http://msdn.microsoft.com/en-in/library/ie/hh673525(v=vs.85).aspx](http://msdn.microsoft.com/en-in/library/ie/hh673525(v=vs.85).aspx)

这里也没有适当的文档来做到这一点。

我需要知道，如何使用 MessageChannel 与 webworkers 通信？

这是抛出 DATA_CLONE_ERR 的[演示](http://www.antkorp.in/nestedworkers/)

```
var worker = new Worker("sub1_worker.js");
    worker.onmessage = function(e) {
        $("#log").append("<br>" + e.data);
    }
    var channel = new MessageChannel();

    worker.postMessage("ping", [channel.port2]);

    channel.port1.onmessage = function(event) {
        // Message is in event.data
        alert("Message is: " + event.data);
    }

    channel.port1.postMessage('hello');

    $("#send1").click(function() {
        var msg = $("#msg").val();
        if (msg && msg != "start")
            worker.postMessage("ping2");

        $("#msg").val("");

    })
    $("#send2").click(function() {
        var msg = $("#msg").val();
        if (msg && msg != "start")
            worker.postMessage("ping3",[channel.port2]);
        $("#msg").val("");

    }) 
```

和工人

```
onmessage = getMessage;

function getMessage(e){

    if(e.ports[0])
    e.ports[0].postMessage("msg from sub worker 1 "+ e.data);
    else
    postMessage("msg from sub worker 1 "+ e.data);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-12-10T09:49:27.197

这是一个纯 javascript 中的干净示例，说明如何在两个工作人员之间进行设置：

在主线程中：

```
function setup(){
    var channel = new MessageChannel();
    var worker1 = new Worker("worker1.js");
    var worker2 = new Worker("worker2.js");

    // Setup the connection: Port 1 is for worker 1
    worker1.postMessage({
        command : "connect",
    },[ channel.port1 ]);

    // Setup the connection: Port 2 is for worker 2
    worker2.postMessage({
        command : "connect",
    },[ channel.port2 ]);

    worker1.postMessage({
        command: "forward",
        message: "this message is forwarded to worker 2"
    });
} 
```

在`worker1.js`：

```
var worker2port;
var onMessageFromWorker2 = function( event ){
    console.log("Worker 1 received a message from worker 2: " + event.data);

    //To send something back to worker 2
    //worker2port.postMessage("");
};

self.onmessage = function( event ) {
    switch( event.data.command )
    {
        // Setup connection to worker 2
        case "connect":
            worker2port = event.ports[0];
            worker2port.onmessage = onMessageFromWorker2;
            break;

        // Forward messages to worker 2
        case "forward":
            // Forward messages to worker 2
            worker2port.postMessage( event.data.message );
            break;

        //handle other messages from main
        default:
            console.log( event.data );
    }
}; 
```

在`worker2.js`

```
var worker1port;
var onMessageFromWorker1 = function( event ){
    console.log("Worker 2 received a message from worker 1: " + event.data);

    //To send something back to worker 1
    //worker1port.postMessage("");
};

    self.onmessage = function( event ) {
    switch( event.data.command )
    {
        // Setup connection to worker 1
        case "connect":
            worker1port = event.ports[0];
            worker1port.onmessage = onMessageFromWorker1;
            break;

        // Forward messages to worker 1
        case "forward":
            // Forward messages to worker 1
            worker1port.postMessage( event.data.message );
            break;

        //handle other messages from main
        default:
            console.log( event.data );
    }
}; 
```

这展示了如何处理来自主线程的消息，如何将消息从主线程转发到另一个工作线程，以及如何在不涉及主线程的情况下直接在工作线程之间进行通信。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T02:50:40.257

您的演示实际上对我有用（Chrome 23.0.1271.101）。如果我点击第二个“发送给副工”按钮，我只会得到 DATA_CLONE_ERR。这可能是意料之中的。在您创建频道后，您已经通过第一个电话`port2`将您的信息发送`MessageChannel`给了工作人员。`postMessage`再次发送它可能是非法的，尽管我也找不到任何关于此的明确文档。

您可能想要做的是`onmessage`在工作人员接收的端口上设置，然后您可以处理将来通过该端口发送的消息。就像是：

```
onmessage = getMessage;

function getMessage(e){
  if(e.ports[0]) {
    var receivedPort = e.ports[0];
    receivedPort.postMessage("msg from sub worker 1 "+ e.data);
    receivedPort.onmessage = getPortMessage
  }
  else
    postMessage("msg from sub worker 1 "+ e.data);
}

function getPortMessage(e) {
  // Messages sent through the port will be handled here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T11:47:23.857

在 MessageChannel API 上工作了一段时间之后。我得到了使用 MessageChannel 与网络工作者交流的解决方案。这是[工作代码的演示。](http://threadcomm.appspot.com/)

# mysql - 如何使用简写在 mysql 查询中调用字段

> ID：14191400
> 
> 赞同：0
> 
> 时间：2013-01-07T07:08:22.793
> 
> 标签：mysql, subquery, alias, shorthand

我有这个问题，

使用如下查询：

```
 mysql_query("SELECT * FROM mytable WHERE samefield='2' AND (SELECT
    COUNT(*) FROM mytableB as d WHERE d.samefield=samefield)"); 
```

返回我错误的结果，理想的工作如下：

```
 mysql_query("SELECT * FROM mytable WHERE samefield='2' AND (SELECT
    COUNT(*) FROM mytableB as d WHERE d.samefield=mytable.samefield)"); 
```

请注意，我必须如何显式输入 mytable 的名称才能知道精确查找并从数据库中获得正确的结果，是否有明确的通配符用作最外层的父查询以确定 d.samefield 应该等于在不知道它的别名的情况下到第一个父级， d.samefield=thewildcard.samefield 是我要寻找的，或者以某种方式指定它应该在其父级上查找。

因为如果我使用 d.samefield=samefield 它只是不坚持父的值，因为看起来问题是有一个同名的字段，对表 a 的查询和对表 b 的子查询，如果它工作最简单的是必须始终在子查询上声明一个别名，并让第一个父查询字段成为 mysql 要查找的字段，但它似乎不能以这种方式工作。

我知道整个问题听起来有点愚蠢，但这对我来说很重要，因为我已经在这个问题上待了 3 个小时，并尝试了诸如 php 函数之类的方法来发送表名，我想将子查询附加到主表中查询，甚至还尝试过 php 的 eval 但这一切都使得它在我需要答案的上下文中变得非常复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:14:37.397

为什么不在两个表上都放一个别名？

```
SELECT a.* FROM mytable a WHERE a.samefield='2' AND
(SELECT COUNT(*) FROM mytableB b WHERE b.samefield=a.samefield); 
```

# office365 - 如何在 Office 365 Web 应用程序中将数据绑定到 Excel

> ID：14191401
> 
> 赞同：0
> 
> 时间：2013-01-07T07:08:24.197
> 
> 标签：office365

我是 Office 365 Web App 的新手。我想将数据库中的数据绑定到 office 365 中的 excel。如何绑定该数据，请任何人提供任何示例代码或链接以将数据绑定到 excel。

谢谢，

D哈拉维尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T06:01:17.400

```
function test(name) {
var result = "->";
try{
    $.ajax({
        type: 'POST',
        url: 'Service1.svc/GetData',
        contentType: 'xml',
        data: '{"value":' + name + '}',
        success: function (msg) {
            Office.context.document.setSelectedDataAsync(msg);
        },
        error: function () {
            result = "fail";
        }
    });
} catch (err) {
    result = err.description;
}
return result; 
```

}

通过使用 wcf 服务，您可以完成任务。这里您需要编写 jquery 代码来从数据库中获取值。上面的示例代码用于从数据库中绑定值。

# c++ - C++ 中的内存池

> ID：14191403
> 
> 赞同：5
> 
> 时间：2013-01-07T07:08:26.257
> 
> 标签：c++, memory-management, pool

我有非常高性能的 C++ 库。我正在考虑编写一个内存池，这样我就不必使用全局`new`和`delete`. 我做了一些阅读。但是想知道这是否会帮助我减少性能和内存泄漏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:13:15.987

除非您有非常具体的理由相信您的库将从自定义分配器中受益，否则它可能不会有太大帮助，如果有的话。

听起来您正在尝试执行无向优化。不。首先使用分析收集性能数据，*然后*在适当的情况下考虑优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:12:20.293

一个针对应用程序的确切内存分配模式进行微调的内存分配器应该优于任何通用分配器——因为您的分配模式不同于“通用”并且是可预测的。但是，减少或检测内存泄漏是一个完全不同的问题，应该在任何性能问题之前解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T07:17:07.850

根据我的经验，实现自己的内存池对性能没有帮助。因为在多线程环境中，您必须使用互斥锁来保护池上的内存分配和释放，而与系统新建/删除相比，互斥锁非常重。

它也无助于减少内存泄漏。要减少内存泄漏，您必须确保释放所有已分配的内存。它真的应该用你的程序而不是一个池来解决。

唯一的好处可能是帮助跟踪独立于第三方工具的内存使用情况。

# c# - 在标签中使用尖括号

> ID：14191406
> 
> 赞同：2
> 
> 时间：2013-01-07T07:08:45.850
> 
> 标签：c#, asp.net, html, vb.net, label

在 VB.NET 标签中，

```
lblNotification.Text = send email to <name@gmail.com> me 
```

O/PI 得到了`send email to me`，但它不显示`<name@gmail.com>`. 如何显示包括尖括号的全文。也就是说，我需要将 O/P 设为`send email to <name@gmail.com> me`. 谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T07:15:08.390

使用以下代码：

```
Protected Overrides Sub OnLoad(ByVal e As EventArgs)
    MyBase.OnLoad(e)
    Label1.Text = HttpUtility.HtmlEncode("send email to <name@gmail.com> me")
End Sub 
```

HttpUtility.HtmlEncode方法会自动将您的字符串转换为 html 编码[文本](http://msdn.microsoft.com/en-us/library/73z22y6h.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T07:12:35.647

您可以使用`&lt;`代替`<`和`&gt;`代替`>`。所以你的文字应该是`send email to &lt;name@gmail.com&gt; me`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T07:19:37.303

您可以像下面一样使用 < 和 >

```
<asp:Label runat="server" ID="lblNotification" Text="send email to 
&amp;lt;name@gmail.com&amp;gt me;" /> 
```

# python - 概述解决方案堆栈

> ID：14191410
> 
> 赞同：2
> 
> 时间：2013-01-07T07:08:59.130
> 
> 标签：python, ruby-on-rails, ruby, node.js, webserver

请原谅我的无知，因为我是一名航空航天工程师，一头扎进软件世界。

我正在构建一个 Web 解决方案，允许小型计算机（想想 beagleboard）连接到向这些客户端发送和接收数据的服务器。连接将通过多种类型，包括 GPRS/3G/4G。

用户将通过该中央服务器提供的网页与客户端进行实时交互。解决方案必须很好地扩展。

我一直在客户端使用 python，并为带有 Heroku 的服务器使用一些简单的 ruby​​ 代码。我还尝试了一些 NodeJS 和 Ruby on Rails。有这么多的选择，我很难从树上看森林，想知道这些语言在哪里适合我的堆栈。

感谢您的帮助；我很乐意提供更多细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:10:54.190

这一切都取决于您实际尝试做什么以及您的要求是什么。

对于这样的事情没有真正的“正确”语言，它主要取决于您将在这些语言上使用的框架（因为它们都是通用编程语言）和您的个人偏好/经验。

我不能对 Python 发表太多评论，因为我从未真正尝试过它，但据我所知/所见，它可以用于所有使用 Ruby 的东西，尽管 Python 周围的社区有点小，因为 Python 被大量使用科学社区中的更多内容（如果您的应用程序可能正在进行任何 crayz 计算，那可能会很好）。

这将我们引向 Ruby。Ruby 和 Ruby on Rails 框架主要用于编写 Web 应用程序和服务。Ruby 是一种非常优雅的编程语言，工具非常成熟且易于使用。Rails 是一个基于 Ruby 的框架，它使 Web 开发变得非常简单，它为您提供了一组非常好的工具，特别适合编写数据驱动的 Web 应用程序。非常灵活，合作愉快。然而，目前 Ruby 有一些缺点，主要与糟糕的线程有关。

Node.JS 是一种专注于并行性的新语言，它支持 Ruby 和 Python 可以做的所有事情，尽管与 Ruby 所提供的相比，它的文档不足。它也不是最适合初学者的选择，因为 JavaScript 有其所有的怪癖，而且面向回调的异步模型也不是最简单的。

也就是说，Node 是非常裸机，可以非常轻松地编写不需要通过 HTTP 工作的任意 TCP/UDP 服务器。自定义流协议或任何自定义协议实际上在 Node 中几乎可以轻松完成。（我不建议您这样做，但也许这对您的任务很重要）。

公平地说，有一些框架可以促进为节点编写 Web 应用程序，但这些框架是 a) 不如 Rails 或 Django 成熟，并且 b) 你必须选择你的框架选择。

这意味着：Rails 确实带有许多指导您的默认设置，（例如，Rails 有一个默认的数据库堆栈，它围绕它进行了优化），带有框架（如 Express）的 Node 只为您提供了一个基本的 HTTP 服务器，您必须携带在您选择的数据库中等...

最后：您询问的所有语言和框架都主要用于编写 Web 应用程序。然而，它们都可以用来编写一个也使用服务的客户端——这主要取决于一般偏好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:21:12.853

有很多东西要学，但是 Ruby on rails 为您提供了快速的解决方案。要让它成为真正的神，你必须掌握 HTML、javascript、CSS 和 ruby​​。这需要时间。但是，只要你遵循 RoR 的约定就容易了。RoR 世界中有很多开发人员、博客和截屏视频，因此很容易获得帮助。

如果您还不知道[railscasts](http://railscasts.com/)是一个很好的资源。

# css - 完全由 CSS 重新排列位置

> ID：14191411
> 
> 赞同：0
> 
> 时间：2013-01-07T07:09:05.653
> 
> 标签：css, html, positioning

我一直在谷歌搜索并寻找一种使用 CSS 定位元素的方法，但我在解决问题时遇到了麻烦。

我正在尝试做的一个很好的例子是：

我有两个div，

```
<div class="A"></div>
<div class="B"></div> 
```

我想使用 CSS 在 div 类 A*上方*显示 div 类B。我的问题是：是否可以仅使用 CSS 在 A 之上显示 B 而无需更改 HTML？或者是在 A 之上显示 B 以将 B 的 div HTML 放在 A 之上的唯一方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:16:31.273

这是你的答案，

> .a, .b { 位置：绝对；
> 
> ```
> }
> .a {
> top:50px;
> } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:31:00.127

你可以使用这样的CSS

```
.A,.B{
width: 48%;
float: right;
}

.A {
background-color: #ffa;
}

.B{
background-color: #0f0;
} 
```

[演示](http://jsfiddle.net/MmFsM/1/)请参阅此以供[参考](https://stackoverflow.com/questions/6062630/reverse-sort-divs-using-css-or-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T07:18:12.980

这是可能的，但这取决于您要实现的目标。最好的方法仍然是简单地将 B div 放在前面。另一种方法是定位。position:absolute 两者都可以正常工作，但您需要知道元素的确切宽度和高度。例如，如果两者都有 height: 50px 和 width: 50px 您的代码将如下所示：

```
.a {
height: 50px;
width: 50px;
position:absolute; 
top: 50px;
left: 0;
}

.b {
height: 50px;
width: 50px;
position: absolute; 
top: 0px;
left: 0;
} 
```

另一种方法是元素 B 的边距减去。

```
.a {
height: 50px;
width: 50px;
margin-top: 50px;
}

.b {
margin-top: -100px;
height: 50px;
width: 50px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T07:24:36.783

用这个

```
.B{

margin-top:-50px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T07:25:38.577

这样做的方法是：

```
#wrapper { 
     position: relative; 
     }

    #firstDiv { 
     position: absolute; 
     height: 100px; 
     top: 110px; 
     }

    #secondDiv { 
     position: absolute; 
     height: 100px; 
     top: 0; 
     } 
```

[更多方法试试这个](https://stackoverflow.com/questions/220273/css-positioning-div-above-another-div-when-not-in-that-order-in-the-html)

# ios - 苹果推送通知不起作用

> ID：14191412
> 
> 赞同：3
> 
> 时间：2013-01-07T07:09:06.430
> 
> 标签：ios, apple-push-notifications

```
 NSLog(@"push notification in process");
 [[UIApplication sharedApplication]registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge|UIRemoteNotificationTypeSound|UIRemoteNotificationTypeAlert)]; 
```

在方法 中的`appdelegate.m`文件中 输入上述代码 我收到如下错误消息： 错误：`didFinishLaunchingWithOptions:`

```
Failed to get token, error: Error Domain=NSCocoaErrorDomain Code=3000 "no valid 'aps-environment' entitlement string found for application" UserInfo=0x20021380 
{
NSLocalizedDescription=no valid 'aps-environment' entitlement string found for application
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T07:12:46.003

这可能是由于许多问题。看看是否有以下任何修复它：

*   检查您的 AppID 是否已在配置门户中启用推送通知
*   检查您的配置文件中的字符串：aps-environment
*   检查您是否使用命名配置文件（不是通配符）
*   检查证书上的大小写是否与您的产品名称匹配（它们区分大小写）

如果这些失败，那么问题可能是由于 Xcode 中的配置文件。如果您在配置 AppID 以进行推送之前创建了配置文件，请尝试重新生成并安装新的配置文件。

# php - 获得一个使用动态数据的简单 JpGraph

> ID：14191413
> 
> 赞同：0
> 
> 时间：2013-01-07T07:09:06.067
> 
> 标签：php, arrays, jpgraph

我努力让一个简单的示例工作，一旦我看到一个工作示例我应该没问题但无法达到这一点，这是我的代码：

```
foreach($users as $user => $tbl_user_id)
{
    $query = "SELECT * FROM my_table WHERE name = '$user'". $sel_query_tech . "" ;

    $result = mysql_query($query);
    $query_num_rows = mysql_num_rows($result);
    $tc = mysql_num_rows($query);           

    $user_hours_query = "SELECT * FROM tbl_activity WHERE activity_user_id = '$tbl_user_id' AND activity_task_id = '10' ". $sel_query . "" ;
    $result1 = mysql_query($user_hours_query);
    $hours_worked = 0;

            while ($row1 = mysql_fetch_array($result1))
                {
                $hours_worked += $row1['activity_hrs_done'];
                }

    echo '<tr><td>'.$user.'</td>';
    echo '<td>'.$tbl_user_id.'</td>';
    echo '<td>'. $tc_num_rows.'</td>';
    echo '<td>'. number_format($hours_worked,2).'</td>';
    $rt = number_format($query_num_rows / $hours_worked ,2);
    echo '<td>'. $rt.'</td></tr>';  
    $data[]=number_format($hours_worked,2);
    $p1->SetLegends[]=$user;
    }

// Some data
//$data = array(40,21,17,27,23);

// Create the Pie Graph. 
$graph = new PieGraph(400,200,'auto');
$graph->SetShadow();

// Set A title for the plot
$graph->title->Set("3D Pie Client side image map");
$graph->title->SetFont(FF_FONT1,FS_BOLD);

// Create
$p1 = new PiePlot3D($data);
//$p1->SetLegends(array("Jan (%d)","Feb","Mar","Apr","May","Jun","Jul"));
$targ=array("pie3d_csimex1.php?v=1","pie3d_csimex1.php?v=2","pie3d_csimex1.php?v=3",
            "pie3d_csimex1.php?v=4","pie3d_csimex1.php?v=5","pie3d_csimex1.php?v=6");
$alts=array("val=%d","val=%d","val=%d","val=%d","val=%d","val=%d");
$p1->SetCSIMTargets($targ,$alts);

// Use absolute labels
$p1->SetLabelType(1);
$p1->value->SetFormat("%d kr");

// Move the pie slightly to the left
$p1->SetCenter(0.4,0.5);

$graph->Add($p1);

// Send back the HTML page which will call this script again
// to retrieve the image.
$graph->StrokeCSIM(); 
```

我知道 $p1->SetLegends 是错误的，因为我 print_r 和 $data 都输出，$data 返回值但不是 $p1 但我真的有点迷失了，可以做一些指导。

如果我只使用像 $data = array(40,21,17,27,23); 这样的设置值 $p1->SetLegends(array("Jan (%d)","Feb","Mar","Apr","May","Jun","Jul"));

然后它工作正常，所以它与我如何传递信息有关，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:45:53.140

请将此代码写入您的代码中。我希望这能帮到您

```
 //$p1->SetLegends[]=$user;
    $userarr[] = $user; 
```

然后

```
$p1 = new PiePlot3D($data);
//$p1->SetLegends(array("Jan (%d)","Feb","Mar","Apr","May","Jun","Jul"));

$p1->SetLegends($userarr); 
```

# ssh - 如何使用具有不同端口的 scp URI？

> ID：14191414
> 
> 赞同：8
> 
> 时间：2013-01-07T07:09:05.927
> 
> 标签：ssh, scp

我想用`scp`. 如果我使用默认的 ssh 端口，URI 将如下所示：

```
scp://root@host:/root/ids/rules.tar.gz 
```

但我将 ssh 端口更改为`3131`. 如何获取 ssh 端口并将其附加到 scp 命令？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-27T18:05:35.477

从 7.7 版开始，常用`scp`命令行实用程序接受 URL 作为命令行参数。在 URL 中指定端口号的常用方法是跟随主机名：

```
scp://root@host:3131/root/ids/rules.tar.gz
                ^^^^ 
```

或者，`scp`可以`-P`选择指定端口：

```
scp -P 3131 root@host:/root/ids/rules.tar.gz . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:42:31.533

您可以使用 scp -P 命令

# objective-c - 如果在 uitableview 上添加文本字段，则文本字段不会调用其委托方法

> ID：14191418
> 
> 赞同：0
> 
> 时间：2013-01-07T07:09:12.250
> 
> 标签：objective-c

如果我使用此代码，则`UITextField`不会调用其`delegate`方法。在这段代码中，我`UITextField`在`UITableView`.

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{  
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

        if (cell == nil)
        {          
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:nil];
            cell.accessoryType = UITableViewCellAccessoryNone;

            if (indexPath.row!=7) 
            {

            [cell.textLabel setTextColor:[UIColor blackColor]];
            [cell.textLabel setTextColor:[UIColor blackColor]];

            //Creating Lable

            UILabel *lblText= [[UILabel alloc]  initWithFrame:CGRectMake(53, 30, 150, 35)];

            [lblText setFont:[UIFont boldSystemFontOfSize:15.0]];
            lblText.backgroundColor=[UIColor clearColor];

            lblText.textColor=[UIColor blackColor];

            lblText.text = [labelArray objectAtIndex:indexPath.row];

            //creating a the textField 

            UITextField *txtField = [[UITextField alloc] init];
            [txtField setFrame:CGRectMake(50, 56, 220, 31)];

            [txtField setBackgroundColor:[UIColor whiteColor]];

            [txtField setBorderStyle:UITextBorderStyleRoundedRect];
            txtField.delegate=self;
            [txtField setFont:[UIFont systemFontOfSize:14.0]];
            txtField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
                txtField.userInteractionEnabled=YES;
                txtField.enabled=YES;                

            if (indexPath.row==2)
            {
                txtField.keyboardType=UIKeyboardTypeNumbersAndPunctuation;
            }
            else if(indexPath.row==3)
            {
                txtField.keyboardType=UIKeyboardTypeEmailAddress;

            }else
                {

                    txtField.keyboardType=UIKeyboardTypeDefault;

                }

                if (indexPath.row==6 ||indexPath.row==5) 
                {
                    [txtField setSecureTextEntry:YES];
                }

            txtField.tag=indexPath.row;
            [cell addSubview:txtField];

            [cell addSubview:lblText];  
        } 
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T21:29:08.163

我刚刚遇到了同样的问题。由于我在任何地方都找不到关于 stackoverflow 的答案，所以这对我有用：

除了 1）为从情节提要到 UITableViewController 代码的字段制作出口，以及 2）在 UITableViewController 代码中声明，

我不得不

3) 也通过情节提要连接代理出口：a) 转到情节提要并单击有问题的 UITextField，b) 转到该 UITextField 的 Connections Inspector 面板，然后 ctl+将委托加号拖到 UITableViewController 上UITextField 存在于情节提要中。（我拖到最左边故事板大纲中的 UITableViewController ）

之后，我的 UITableViewController 触发了所有 UITextFieldDelegate 方法就好了。

# spring - 从@Responsebody 转义输出

> ID：14191419
> 
> 赞同：0
> 
> 时间：2013-01-07T07:09:16.803
> 
> 标签：spring, spring-mvc, security, spring-3

有没有办法转义使用@Responsebody 时产生的 XML。

```
@RequestMapping(value = "/xml", method = RequestMethod.GET)
public @Responsebody MyClass asXML(){
    MyClass m = myClassService.get.......;
    return m;
} 
```

现在如何确保 m 中的属性不包含脚本标签或类似标签？

现在我已经测试过了

```
thing.setText("<script>alert('Hello');</script>"); 
```

这将完全按原样打印在 XML 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:58:59.020

Spring 的默认 Xml HttpMessageConverters 使用 JAXB2 进行 XML 映射。[从这个问题](https://stackoverflow.com/questions/3289036/how-to-prevent-jaxb-escaping-a-string)的答案可以看出，JAXB 默认转义 XML。所以你不必担心。

# jakarta-ee - 为什么我会收到此错误？应该怎么做才能修复代码？

> ID：14191420
> 
> 赞同：0
> 
> 时间：2013-01-07T07:09:21.720
> 
> 标签：jakarta-ee

```
package ThreadExample;

/**
 *
 * @author Administrator
 */

public class SynThread {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        Share s=new Share();
        MyThread m1=new MyThread(s,"Thread1");
        MyThread m2=new MyThread(s,"Thread2");
        MyThread m3=new MyThread(s,"Thread3");

        // TODO code application logic here
    }

}

class MyThread extends Thread{
    Share s;
    MyThread(Share s,String str){
        super(str);
        this.s=s;
        start();
    }
    public void run(){
        s.doword(Thread.currentThread().getName());
    }
}

class Share{
    public synchronized void doword(String str){
        for(int i=0;i<5;i++){
        System.out.println("Started   :"+str);
        try{
            Thread.sleep(100);
        }catch(Exception e){}
            }
    }
} 
```

/*输出

线程“主”java.lang.VerifyError 中的异常：（类：ThreadExample/Share，方法：签名：()V）构造函数必须在 ThreadExample.SynThread.main(SynThread.java:18) 调用 super() 或 this() */

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:22:28.567

看起来您正在运行旧版本的代码。也许您的某些课程在上一轮没有编译？尝试重新编译所有内容。

FWIW，错误是JVM抱怨类构造函数没有调用超级构造函数。这不应该在运行时发生，因为编译器也会检查相同的东西（并且通常根本不会生成类文件）。

# ios - 带有 vysper 服务器的 XMPPClient 没有响应

> ID：14191422
> 
> 赞同：0
> 
> 时间：2013-01-07T07:09:27.613
> 
> 标签：ios, xmppframework, apache-vysper

我正在尝试在 iOS 上实现 xmppclient。我从 XMPPFRAMEWORK 中的示例开始。但是我无法连接到我的服务器，即 apache-vysper-server。收到 xml 后，客户端将 xml 发送到服务器。但从来没有任何回应。出了什么问题？是 tls 设置不匹配还是？

发送：?xml 版本='1.0'?>

发送：stream:stream xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' version='1.0' to='vtc365.com'>

RECV: (stream:stream xmlns="jabber:client" xmlns:stream="http://etherx.jabber.org/streams" from="vtc365.com" version="1.0" id="0c726f4d2a694b69897069a818447ee3"/>

RECV:(stream:featuresxmlns:stream="http://etherx.jabber.org/streams(starttls>xmlns="urn:ietf:params:xml:ns:xmpp-tls">(required/>(/starttls> （/流：功能>

发送：starttls xmlns='urn:ietf:params:xml:ns:xmpp-tls'/>

RECV：继续 xmlns="urn:ietf:params:xml:ns:xmpp-tls"/> allowSelfSignedCertificates

发送：stream:stream xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams' version='1.0' to='vtc365.com'>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:12:09.610

看起来您正在连接，但您没有进行身份验证。您是否正在调用`-authenticate:error`委托的`-xmppStreamDidConnect:`方法？

# primefaces - PF 3.4.2 版本修复了“pdf 不是有效的媒体播放器类型”问题

> ID：14191423
> 
> 赞同：1
> 
> 时间：2013-01-07T07:09:36.647
> 
> 标签：primefaces

如果您在 Primeface 中寻找“pdf 不是有效的媒体播放器类型”，这不是问题而是答案

PDF 渲染的问题在 PF 3.4.2 中得到修复，它变得非常简单，只需要 CODE 和 Refresh :)

在 .XHTML 中如下设置

```
<p:media value="/resources/Eclipse_Shortcuts.pdf" width="100%" height="300px" player="pdf" /> 
```

并调用/刷新你完成的页面。

primefaces-3.4.2.jar：已修复此问题。:):)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:09:36.647

如下所述，在 .XHTML 中设置它

```
<p:media value="/resources/Eclipse_Shortcuts.pdf" width="100%" height="300px" player="pdf" /> 
```

并调用/刷新你完成的页面。

primefaces-3.4.2.jar：已修复此问题。:):)

# php - 通过 php 从 url 保存图像获取内容

> ID：14191425
> 
> 赞同：2
> 
> 时间：2013-01-07T07:09:43.807
> 
> 标签：php, image, url, save

```
<?php
//Get the file
$content = 'http://dev.aviesta.com.mx/media/catalog/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/b/r/bridal-shoes1.jpg ';
//Store in the filesystem.
$fp = fopen('/var/www/ajaxForm/loading.gif', 'w'); 
fwrite($fp, $content);
fclose($fp);

?> 
```

尝试此操作时出现以下**错误**

> 警告：fopen(/var/www/ajaxForm/loading.gif):**无法**打开 **流**：第 5 行的 /var/www/curlimage.php 中没有这样的文件或目录警告：fwrite() 期望参数 1 是资源，第 6 行 /var/www/curlimage.php 中给出的布尔值 警告：fclose() 期望参数 1 是资源，第 7 行 /var/www/curlimage.php 中给出的布尔值

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T07:24:26.860

刚取自[`similar question`](https://stackoverflow.com/questions/6306935/php-copy-image-to-my-server-direct-from-url)

```
$url = 'http://dev.aviesta.com.mx/media/catalog/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/b/r/bridal-shoes1.jpg';
$img = 'curl/curl_image.jpg';
file_put_contents($img, file_get_contents($url)); 
```

**注意：还可以使用****[is_writable](http://php.net/manual/en/function.is-writable.php)**方法 检查目录是否可写

**参考 ：**

[`file_put_contents`](http://php.net/manual/en/function.file-put-contents.php)

[`file_get_contents`](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T07:14:31.730

您需要保存该图像吗？我不知道你为什么写这段代码，你不能打开一个 gif 图像并在其中写入另一个。如果要保存该图像，则可以使用

`file_put_contents("imgfolder/imgID.jpg", $image);`或者`copy($image_url, $your_path);`

# linux - 通过从单引号中断来进行命令注入。可能吗？

> ID：14191428
> 
> 赞同：0
> 
> 时间：2013-01-07T07:10:20.540
> 
> 标签：linux, command, code-injection

```
#define BUFSIZE 256

int escape_single_quotes(char *to, char *from, int max)
{  int l= 0;

  for (;*from;from++)
  {
    switch (*from)    {
      case '\'':
        if (l>=max-4) return 0; // not enough space for escaped chars!
// replace ' with '\''
        *(to++)= '\'';       
        *(to++)= '\\';
        *(to++)= '\'';
        l += 3;
      default:
        if (l>=max-1) return 0; // not enough space for this char!       
        *(to++)= *from;
        l++;
    }
  }
   *to= 0;

  return 1;
}
 int main(int argc, char *argv[])
{
  FILE *fp;
  char buf[BUFSIZE];
  char escaped_name[BUFSIZE];  char *filename;
  int lines, chars, cpl;

   if (argc != 2)
  {
    fprintf(stderr, "Usage: %s filename\n", argv[0]);
    exit(EXIT_FAILURE);
  }  
  filename= argv[1];
  printf("Counting %s ... \n", filename);

  if (!escape_single_quotes(escaped_name, filename, BUFSIZE))  {
    fprintf(stderr, "Escaped filename is too long!\n");
    exit(EXIT_FAILURE);
  }
   if (snprintf(buf, BUFSIZE, "wc -l '%s'", escaped_name)>=BUFSIZE)
  {
    fprintf(stderr, "Filename %s is too long!\n", filename);
    exit(EXIT_FAILURE);
  } 
  fp= popen(buf, "r");} 
```

这个脚本对命令注入安全吗？它将'替换为'\''。有没有办法打破单引号并注入命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:40:10.417

如果我正确阅读了这个程序，它只会调用`wc -l`它的文件名参数。

当您尝试转义此文件名时，这可能意味着它来自您无法信任的来源。

鉴于此，几点：

*   您可以使用 call 简单地检查这样的文件名是否存在，而不是痛苦地转义文件名，如果存在`access()`，您可以将其传递给 wc 而无需太多关注。
*   即使是调用这个程序的人，我也不会信任，这意味着您不能信任自己的 PATH。换句话说，当你调用 时`wc -l`，你可能会说某事是邪恶的，因为有人做了以下事情：

    ```
    cp evilwc /tmp/wc
    export PATH=/tmp:$PATH
    ./yourprogram goodfilename 
    ```

哎呀！即使文件名是好的，攻击者仍然能够欺骗您的程序调用恶意代码。

**解决方案：**

在这种特殊情况下，您可能可以`wc -l`自己实现而不调用任何外部 - 毕竟这是非常简单的算法。

此外，在调用外部程序时，您应该尝试使用全名来调用它们，例如`/usr/bin/wc`.

如果参数是文件名，最好在传递它们之前检查它们是否真的存在。

您*可能*希望为有效字符清理参数，但这很容易出错，例如删除对所有非英语世界至关重要的非 ASCII 符号。

# iphone - UIButton 在 UILabel text+iPhone 之间

> ID：14191435
> 
> 赞同：0
> 
> 时间：2013-01-07T07:10:58.170
> 
> 标签：iphone, ios, uibutton, uilabel

我想在我的应用程序中实现标记功能。

标签中有一些文本，我想在其上给出`UIButton`动作事件。

我曾使用此代码来检测特定文本是否存在于其中`UILabel`。如何检查特定文本是否存在以及它是否给出了`UIButton`动作事件？

```
arr_count = {ABC,DEF,PQR};

FOR(int i = 0; i < [arr_Count]; i++) {
Nsstring *Str_dec1;
   NSRange range = [Str_dec1 rangeOfString:[arr_count objectatindex:i] options:NSCaseInsensitiveSearch];
   if (range.location != NSNotFound) {
       *******.....MISING CODE HERE......*****
   }
} 
```

`UIButton`当我点击 ABC 或 PQR 或 DEF 文本时，我应该如何编码以便它给我动作事件`UILabel`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:16:15.213

您可以`UITapGestureRecognizer`在标签上使用 a 来调用该`UIButton`方法。或者您可以执行以下操作：

```
 if(condition)
 {
     [self callButtonEvent:sender] // sender can be nil if you aren't passing anything
 } 
```

`condition`当您检查标签的文本是否等于您想要的任何字符串时在哪里 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:12:29.797

你可以简单地打电话

```
[self yourButtonActionMethod:nil]; 
```

# tcl - TABLELIST 包中提供的所有命令都可以用于Gridplus 2 tablelist吗

> ID：14191445
> 
> 赞同：0
> 
> 时间：2013-01-07T07:11:48.603
> 
> 标签：tcl

我正在尝试使用 Gridplus 2 中的 tablelist 选项。我必须在单元格中嵌入窗口才能在表格中获取复选框和单选按钮，因此在尝试完成工作时我尝试获取单元格索引并发现它给了我使用命令时出错

```
.mytablelist cellindex x,y 
```

其中 x - 行和 y 列。然后我尝试了其他单元格命令，例如**cellcget**和**cellselection**，每个命令都给我一个错误说

```
错误命令“cellcget”：必须是 configure、cget、instate、state 或 identify
```

我遵循Dr.Csada Nemethi的[表格列表文档中给出的命令语法。](http://www.nemethi.de/tablelist/tablelistWidget.html#cellcget)因此，任何人都可以澄清这是我的错误，还是 Gridplus 2 不支持可用于实际 tablelist 包的所有命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:46:51.690

对于 GRIDPLUS2，tablelist 小部件的实际名称将是“.mytablelist.tablelist” - 尝试...

```
.mytablelist.tablelist cellindex x,y 
```

...GRIDPLUS2 小部件命名详细信息可在以下文档中找到：-

[http://www.satisoft.com/tcltk/gridplus2/reference.html#names](http://www.satisoft.com/tcltk/gridplus2/reference.html#names)

最好的祝福，

=阿德里安=

# php - php - 检测是否发送了电子邮件

> ID：14191446
> 
> 赞同：14
> 
> 时间：2013-01-07T07:11:55.707
> 
> 标签：php, email

我正在构建一个自动通讯，我有点被这个问题困扰。我需要知道电子邮件是否已发送。这是我的代码

```
 @$send = mail($emailRecipient, $subject, $message, $headers); 
```

我试图将它添加到 if 语句中，但它在这里不起作用是代码。

```
if( @$send = mail($emailRecipient, $subject, $message, $headers)){
   //do something
}else{
  //do something
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-07T07:13:50.497

```
if(@mail($emailRecipient, $subject, $message, $headers))
{
  echo "Mail Sent Successfully";
}else{
  echo "Mail Not Sent";
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-07T07:24:51.563

首先，我建议使用第三方邮件库（[SwiftMailer](http://swiftmailer.org/)、[PHPMailer](http://sourceforge.net/projects/phpmailer/)、[Zend_Mail](http://framework.zend.com/manual/1.12/en/zend.mail.html) ...）而不是内置`mail`函数来发送电子邮件。撰写邮件比大多数人意识到的要复杂，尤其是如果您想编写多部分和/或 HTML 格式的电子邮件。

其次，除了检查邮件是否成功发送到第一个（通常是本地）电子邮件服务之外，几乎不可能确定是否发送了电子邮件。这是由于电子邮件固有的工作方式，并且对此无能为力。

您唯一可以（并且确实应该）做的事情就是确保您的系统以理智的方式处理退回的电子邮件。例如。如果电子邮件地址不断退回，请考虑取消订阅该地址。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-07T07:21:40.690

这是事实：不幸的是，您无法可靠地检测是否发送或接收了电子邮件：电子邮件不是一种可靠的通信形式。

调用的结果`mail()`仅表明 PHP 能够将电子邮件发送到 MTA，但这不会表明电子邮件是否实际发送或收件人实际收到了它。

如果您想要更高的可靠性，则必须*使用*`mail()`. 虽然我从未使用过它，但 PHPMailer 或其他 SMTP 库可能会为您提供 MTA 返回的信息，这将告诉您有关排队传递的更多信息，但不会轮询退回邮件（可能会或可能不会传递到发件人的收件箱）您无法判断收件人是否收到了电子邮件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-02T12:13:21.857

**只是为了完整起见，**应该提到有一种方法可以发送电子邮件，`PHP`并通过接收 MTA 知道它是否真的被接受（这并不意味着它被传递给用户或在 SMTP 握手后静默丢弃） 或不。

理论上可以编写一个纯粹的 SMTP 客户端，例如使用像[stream_socket_client](http://php.net/manual/en/function.stream-socket-client.php)`PHP`这样的内置**流函数**，以便通过在 SMTP 协议请求和响应中形成的直接原始 tcp 连接与接收 MTA 对话。

发出 SMTP 命令的一般逻辑如下：

```
<?php
$fp = stream_socket_client("tcp://fqdn-of-receiving-mta:25", $errno, $errstr, 90);
fwrite($fp, "EHLO LOCALHOST\r\n");
fwrite($fp, "MAIL FROM: youremailaddress@something.tld\r\n");
fwrite($fp, "RCPT TO: recipient@remotedomain.com\r\n");
fwrite($fp, "DATA\r\n");
fwrite(
    $fp,
    "Subject: your subject text\r\n" . 
    "First line of message body\r\n" .
    "At the end of the message body one single period char should be placed before and after EOL character\r\n" .
    "Like this: \r\n" .
    ".\r\n" 
); 
```

当然，这显然是不完整的（有经验的开发人员会注意到我既没有收听也没有解析我得到的 SMTP 响应）。为了使用这种方法，必须认真地重新发明`PHP`语言。

## 这将如何用于检测是否发送了电子邮件？

好吧，您至少会拥有 3 种类型的信息：

1.  接收主机是否还活着并且是否收到电子邮件
2.  握手期间是否被退回（SMTP 5xx 响应类）
3.  `250 2.0.0 Ok`提交消息文本后是否有 SMTP

同样，这仅用于教育目的，除非您准备好与开发符合标准的 SMTP 客户端的项目结合，否则不要在家里这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-10T09:16:43.227

你也可以试试这个

```
$send = mail($to,$subject,$msg);
if($send)
{
    echo "Your Account is Successfully Created. You must Activate your account.";
}
else
    echo "Failed to send"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-27T12:39:31.330

我想在@Daya 的回答中添加更多信息，我想在他的回答中进行一些修改，如下所示：

如果电子邮件发送成功，则不是问题，但如果邮件功能有错误，那么开发人员将如何得到错误，为此他/她可以使用`error_get_last()`函数获取最后一个错误，修改如下：

```
if(!$mail) {
  print_r( 'Mailer error: ' . error_get_last());
} else {
  echo 'Message has been sent.';
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2018-03-02T12:22:23.673

$send = mail($emailRecipient, $subject, $message, $headers);

检查 $sent 的返回值，例如 If($send['error_code'] == 0) { echo "successful"; } 否则 { 回声“错误”；}

# ms-access - MS Access 2010-如何使我的背景图像适合屏幕尺寸？

> ID：14191451
> 
> 赞同：1
> 
> 时间：2013-01-07T07:12:15.863
> 
> 标签：ms-access, vba

我有一个背景，我以图像的形式保存并使用格式选项将图像发送到后面（发送到后面选项）。

现在我在图像上放置了许多控件。

UI 在我的系统中看起来是正确的。但是，当它显示在具有不同屏幕尺寸的显示器上时，图像会缩小并且控件放错位置。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:11:21.957

您似乎使用错误的方法向表单添加背景图像。不要添加图像控件，使用表单属性。拉伸将使图片覆盖您的表格并随表格调整大小。

![形成图片](../Images/a286e6dc2458ee22cb3034ff75205ae8.png)

# javascript - 在没有获得任何权限的情况下在网站上自动播放音乐。

> ID：14191454
> 
> 赞同：4
> 
> 时间：2013-01-07T07:12:20.327
> 
> 标签：javascript, iframe, embed, playback

我想在我的错误 404 页面的背景中自动播放音乐。但是我需要它来同步一个小动画。我用过

```
<embed> 
```

标签。但是它要求获得运行 quicktime 的权限。当用户接受它时，动画就结束了。我也尝试过自动播放 youtube 视频，但通常需要 3-5 秒来缓冲，具体取决于一个人的互联网连接。这太长了。是否有任何解决方案可以在没有任何权限的情况下自动播放歌曲？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:29:01.777

我猜你可以根据你的要求（你需要什么样的浏览器支持）使用 100% HTML5 不使用 Flash 来做到这一点。那将

这是一个很好的例子：[http ://hungry-media.com/code/html5-audio-sync/](http://hungry-media.com/code/html5-audio-sync/)

（与这篇博文相关：http: [//hungry-media.com/2010/09/synchronizing-audio-with-html5/](http://hungry-media.com/2010/09/synchronizing-audio-with-html5/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T23:32:25.413

使用`<audio>`标签，这将适用于大多数浏览器：

```
<![if (!IE)|(gte IE 9)]>
<audio id="speak" autoplay>
  <source src="speak_a.ogg" type="audio/ogg" />
  <source src="speak_a.mp3" type="audio/mpeg" />
</audio>
<![endif]>
<!--[if lt IE 9]>
<bgsound id="speak" name="speak" autostart="true" loop="1">
<script>document.all['speak'].src='speak_a.mp3'</script>
<![endif]--> 
```

[另请参阅我在如何使用 HTML5 将音频合并到网站中的](https://stackoverflow.com/questions/7326778/how-can-i-incorporate-audio-in-a-website-using-html5/14469838)其他相关答案？

# c# - LINQ比较两个列表并删除

> ID：14191458
> 
> 赞同：11
> 
> 时间：2013-01-07T07:12:33.727
> 
> 标签：c#, linq

我有两个清单。我想从 LIST1 中删除 LIST2 中不存在的所有项目。

例如：

```
 var list1 = new List<DownloadTask>();
        list1.Add(new DownloadTask{ OperationID = 1, MachineID = 1 });
        list1.Add(new DownloadTask{ OperationID = 2, MachineID = 1 });
        list1.Add(new DownloadTask{ OperationID = 3, MachineID = 1 });
        list1.Add(new DownloadTask{ OperationID = 3, MachineID = 2 });

        var list2 = new List<DownloadTask>();
        list2.Add(new DownloadTask{ OperationID = 1, MachineID = 1 });
        list2.Add(new DownloadTask{ OperationID = 3, MachineID = 2 }); 
```

运行后`list1`应仅包含项目：组合`operationId = 1`, `machineId = 1`AND `OperationId = 3`, `MachineId =2`.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-07T07:18:01.007

我认为应该是：

```
list1.RemoveAll(x => list2.Exists(y => y.OperationID == x.OperationID && y.MachineID == x.MachineID)); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-07T07:19:19.613

是否`DownloadTask`覆盖`Equals`并`GetHashCode`正确？如果是这样，您只需要：

```
list1 = list1.Intersect(list2).ToList(); 
```

当然，前提是您乐于创建一个新列表。如果您真的想将它们从现有列表中删除，则稍微困难一些。确定结果应该是什么样子很可能是最简单的，然后清除并重新添加：

```
var newList = list1.Intersect(list2).ToList();
list1.Clear();
list1.AddRange(newList); 
```

当然，所有这些*都*需要您在其中适当地实现平等`DownloadTask`- 但如果您还没有这样做，听起来这样做是个好主意。（或者至少在`IEqualityComparer<DownloadTask>`某个地方实现 - 你可以将比较器传递给`Intersect`.）

作为旁注，我认为“只保留也在`list1`其中的元素`list2`”（即交集）作为一种更简单的看待问题的方法，而不是“删除所有`list1`不在其中的元素`list2`” - 后者基本上是双重的消极的，这总是有点痛苦。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-07T07:33:14.303

```
 var lst = (from lst1 in list1 
             where !list2.Any(
                               x => x.OperationID == lst1.OperationID && 
                                    x.MachineID == lst1.MachineID )
             select lst1).ToList();

  list1 = lst.ToList(); 
```

请试试这个它应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-20T14:02:56.377

```
List<int> equalVal = new List<int>();
equal.AddRange(list1.FindAll(x => list2.Contains(x))); 
```

试试这个，它肯定对你有用。

# mysql - 减少导入数据库的持续时间

> ID：14191461
> 
> 赞同：1
> 
> 时间：2013-01-07T07:12:45.123
> 
> 标签：mysql, database, import, temp

我有一个包含许多表和数据的数据库。为了导入数据库，查询

```
LOAD DATA INFILE <file_name> INTO TABLE <table_name>; 
```

为每个表使用。数据库是通过临时表导入的，由于数据库包含大量数据，需要很长时间。当数据增加时，导入需要无限时延。我该如何解决这个问题？

```
public void updateDeviceTables(Connection server) throws SQLException
{

    final Connection DestConn = server;
    try 
    {

        PreparedStatement psInsert;
        final PreparedStatement psTrapDest = DestConn
            .prepareStatement("select * from  TEMP_TABLE_NAME where PRIMARY_KEYID=? ");
            psTrapDest.setInt(1, OldID);
            final ResultSet rsTrapDest = psTrapDest.executeQuery();

            while (rsTrapDest.next()) {
                psInsert = DestConn.prepareStatement(SQLQueries.INSERT_TABLE_DETAILS);

                psInsert.setInt(1, NewID);
                psInsert.setObject(2, rsTrapDest.getObject("Column2"));
                psInsert.setObject(3, rsTrapDest.getObject("Column3"));

                psInsert.executeUpdate();
                psInsert.close();
                psInsert = null;
            }
            rsTrapDest.close();
     }
     catch (final Exception e) 
     {

     }

} 
```

这是我在将数据导入临时表后用于更新表的示例代码。对数据库中的所有表（17 个表）重复相同的过程。调试卡在 **executeUpdate()**中。

# python - 如何将 POINTER(c_char) 类型的变体分配给字符串？

> ID：14191462
> 
> 赞同：0
> 
> 时间：2013-01-07T07:12:44.863
> 
> 标签：python, python-2.7

我在我的程序中使用 ctypes 调用外部 c 库，我不知道如何将 POINTER(c_char) 变体分配给字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:58:01.867

这个问题很模糊，但我想你应该使用`c_char_p`而不是`POINTER(c_char)`.

# gcc - 将 gcc 与 g++ 代码链接

> ID：14191464
> 
> 赞同：0
> 
> 时间：2013-01-07T07:12:47.273
> 
> 标签：gcc, g++

我正在尝试在我的程序中链接已经存在的库。我的程序是用 C++ 编写的，库是用 C 开发的。现在，我在编译和链接时遇到了这个问题。

我关注了这个论坛的许多帖子，这些帖子与将 gcc 库与 g++ 源链接有关。不知何故，我可以解决一些问题。现在，我面临一个问题。这是我的问题的详细信息。

在 testlib.h 文件中

```
int sum(int x, int y)

In testlib.c file

int sum(int x, int y) { 
    return x + y;
} 
```

我创建了这些文件的静态库。

我的下一步是在 g++ 源代码中使用这个函数。

在 call.hh 文件中，

```
#include<iostream>

#include "testlib.h"

using namespace std;

extern "C" {
    int sum(int x, int y);
}

namespace math_operation {
    void show_addition(int x, int y); 
} 
```

我在 call.cc 文件中定义了这个函数

```
#include "call.hh"
#include<iostream>

using namespace std;

void math_operation::show_addition(int x, int y){
    cout<<" sum "<<sum(x, y)<<endl;
} 
```

现在，我在 main.cc 中调用这个函数

```
#include "call.hh"

using namespace math_operation;
int main() {
    int x = 10;
    int y = 15;
    show_addition(x, y);
    return 0; 
} 
```

我有两个问题：首先，它给出了编译错误，因为我已经两次声明了函数 int sum(int, int)。但是，如果我没有在 call.hh 中声明 extern "C" { int sum(int, int) }，编译问题就解决了，并且链接器问题产生了以下错误：未定义对 `sum(int, int)' 的引用

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T07:18:33.310

```
extern "C" {
#include "testlib.h"
} 
```

并且不要自己声明。应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T01:23:50.160

为了`testlib.h`在 C++ 文件中可用，它应该将函数声明为`extern "C"`：

```
#ifdef __cplusplus
extern "C" {
#endif

int sum(int x, int y);

#ifdef __cplusplus
}
#endif 
```

然后，当您定义`sum`为`extern "C"`定义与声明匹配时，您不会收到重新声明错误或未定义的引用。

如果您无法编辑`testlib.h`，则可以将其包含在一个`extern "C"`块中，如 aragaer 的回答所示：

```
extern "C" {
#include "testlib.h"
} 
```

（但这通常是一个 hacky 解决方法，最好修复库）

您不应该`sum`在自己的`call.hh`文件中声明，有一个声明它的标题，您应该使用标题（如果需要`extern "C"`，在标题内部或周围添加`#include`）

# linux - 将 cer 转换为 pem 时出现 OpenSSL 编码错误

> ID：14191468
> 
> 赞同：33
> 
> 时间：2013-01-07T07:13:17.377
> 
> 标签：linux, openssl, certificate, ssl-certificate

我正在尝试通过openssl将.cer文件转换为.pem，命令是：

```
openssl x509 -inform der -in certnew.cer -out ymcert.pem 
```

这就是我得到的错误：

```
unable to load certificate
140735105180124:error:0D0680A8:asn1 encoding routines:ASN1_CHECK_TLEN:wrong tag:tasn_dec.c:1319:
140735105180124:error:0D07803A:asn1 encoding routines:ASN1_ITEM_EX_D2I:nested asn1 error:tasn_dec.c:381:Type=X509 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-09-20T14:35:08.320

正如[ssl.com 所解释的](https://support.ssl.com/Knowledgebase/Article/View/19/0/der-vs-crt-vs-cer-vs-pem-certificates-and-how-to-convert-them)，.cer 文件可以是 der 或 pem 编码。如果它是 der 编码，你需要像你尝试过的那样进行转换，但如果它已经是 pem 编码，则不需要转换，如果你尝试，你会得到错误 - 你可以重命名文件。

如果您不确定，最好知道 .der 是二进制格式，而 .pem 是 ascii 格式。如果您回显证书的内容，.pem 文件将如下所示：

```
-----BEGIN CERTIFICATE-----
MIIEuTCCA6G[snip lots of chars]
XmCpajQ==
-----END CERTIFICATE----- 
```

.der 文件如下所示：

```
0▒▒0▒▒▒@*▒H▒▒▒▒▒0
0▒▒1
    0   UUS10U
VeriSign, Inc.10U
                 VeriSign Trust Network1:08U 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-05-15T12:16:39.880

我也有这个问题。只需将 CER 重命名为 PEM 就足够了 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-24T06:00:30.730

无需将文件从 .cer 转换为 .pem 您只需要使用此命令，所需的结果将是获得 **openssl x509 -inform pem -in certificate.cer -pubkey -noout > certificate_publickey.pem** 这一切都取决于哪种编码类型用于生成@eis 提到的证书

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-21T09:40:37.627

我对 CRT 格式有类似的问题，在转换为 pem 时出现错误。我做同样的事情，比如 L0g0ff 并且它有效。下面有更多细节。

1.  我检查了证书的详细信息：

    `openssl x509 -in certificate.crt -noout -text`

2.  将扩展名从 certificate.crt 更改为 certificate.pem 后，我得到预期格式的文件：

`-----BEGIN CERTIFICATE----- ........................... -----END CERTIFICATE-----`

# php - 如何在Wordpress的主栏和侧栏中同时访问同一个MySQL数据库？

> ID：14191471
> 
> 赞同：0
> 
> 时间：2013-01-07T07:13:39.607
> 
> 标签：php, mysql, pdo, wordpress

我为我的 Wordpress 网站编写了一些基本的自定义 PHP 代码。该代码基本上访问 MySQL 数据库（与 wordpress 数据库不同的数据库）并显示信息。除了在主页上运行它，我还需要它在侧边栏上运行。代码在主页中完美运行，*或者*在侧边栏中运行完美，但是当我将代码放入两者时，边栏中出现以下错误：

**致命错误：在 /home/kimusubi/public_html/wp-content/plugins/php-code-widget/execphp.php(44) 中的非对象上调用成员函数 prepare()：eval()'d code on第 5 行**

我认为这是同时访问同一个表和数据库的问题，但我正在使用 include_once 并在完成后立即关闭我的连接，所以我不确定问题是什么。这是我用于侧边栏和主栏页面的代码：

```
<?php
include_once 'db_config.php'; //Include database configuration file
$current_user = wp_get_current_user()->user_login; //Get current WP logged in user
try { //Access accounts table and pull user info into associative array
    $STH = $DBH->prepare("SELECT * FROM accounts WHERE accnt = :accnt");
    $STH->bindParam(':accnt', $current_user);
    $STH->execute();
    $Result = $STH->fetch(PDO::FETCH_ASSOC);
    $DBH = null;
    }
catch(PDOException $e) {  
    echo "Select Accounts Table Error: " .$e->getMessage(). "</br>"; //Display Error (if any)
}

$available = min($Result['week_two'],$Result['week_one'],$Result['current']);

echo "Account: " .$Result['accnt']. "</br>";
echo "Name: " .$Result['first']. " " .$Result['last']. "</br>";
echo "Address: " .$Result['address']. ", " .$Result['city']. ", " .$Result['state']. ", " .$Result['zip']. "</br>";
echo "Phone: " .$Result['phone']. "</br>";
echo "Current Balance: $" .$Result['current']. "</br>";
echo "Available Balance: $" .$available. "</br>";
?> 
```

这就是我的 db_config.php 文件中的内容：

```
<?php
try {
$DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
$DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING );

}
catch(PDOException $e) {  
    echo "Select DB Error: " .$e->getMessage(). "</br>";
}

?> 
```

Exec-PHP 是我用来直接从 Wordpress 执行 PHP 的唯一插件。我会很感激任何指导。

# jquery - 通过 jquery 存储图像

> ID：14191472
> 
> 赞同：0
> 
> 时间：2013-01-07T07:13:45.963
> 
> 标签：jquery, html, upload

我有一个通过`<input type=file>`函数上传图片的功能。

这是我的脚本

```
 function readURL(input) {
   if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('.prw_img').attr('src', e.target.result).width(112).height(112);

                };

            reader.readAsDataURL(input.files[0]);
        }
    } 
```

我的 HTML 代码是

```
 <img  class= "prw_img" style="width:112px;height:112px;"/>

    <input id="file" type="file" onchange="readURL(this);" name="files[]"> 
```

我正在预览该`<img>`标签中的图像。有没有办法将此上传的图像保存到我的系统

这是[**BIN**](http://jsbin.com/ojaxib/1/)。

而且我也不想弹出一个保存为对话框来打开。有没有办法将图像存储在数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:21:31.943

你的 JS 应该如下所示。它使用 AJAX 上传

```
jQuery('document').ready(function(){

    var input = document.getElementById("file");
    var formdata = false;
    if (window.FormData) {
        formdata = new FormData();
    }
    input.addEventListener("change", function (evt) {

        var i = 0, len = this.files.length, img, reader, file;

        for ( ; i < len; i++ ) {
            file = this.files[i];

            if (!!file.type.match(/image.*/)) {
                if ( window.FileReader ) {
                    reader = new FileReader();
                    reader.onloadend = function (e) { 
                        //showUploadedItem(e.target.result, file.fileName);
                    };
                    reader.readAsDataURL(file);
                }

                if (formdata) {
                    formdata.append("image", file);
                }

                    jQuery.ajax({
                        url: "upload.php",
                        type: "POST",
                        data: formdata,
                        processData: false,
                        contentType: false,
                        success: function (res) {
                            alert('success');
                        }
                    });
                }
            }
            else
            {
                alert('Not a vaild image!');
            }   
        }

    }, false);

}); 
```

PHP - upload.php - 在 php 级别检索如下数据

```
<?php
if ($_FILES["file"]["error"] > 0)
  {
  echo "Error: " . $_FILES["file"]["error"] . "<br>";
  }
else
  {
  echo "Upload: " . $_FILES["file"]["name"] . "<br>";
  echo "Type: " . $_FILES["file"]["type"] . "<br>";
  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
  echo "Stored in: " . $_FILES["file"]["tmp_name"];
  }
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T07:26:36.510

到目前为止，我知道，javascript 不能单独完成。那么这将是一个很大的安全漏洞。您必须在它旁边使用 PHP/其他支持语言。

# jquery-mobile - Jquery mobile：从java脚本的对话框中打开一个页面div

> ID：14191474
> 
> 赞同：1
> 
> 时间：2013-01-07T07:13:54.747
> 
> 标签：jquery-mobile, modal-dialog

我在下面有我的 jQuery 移动页面。它具有带有文本字段的表单和一个 div，在通过 java 脚本提交表单后，我需要将其显示为位于同一页面上的对话框（id 为“dialog1”的 div）。

```
<!DOCTYPE html>
<html>
<head>
  <title>title</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/themes/site_theme/css/mobile.css" />
  <link rel="stylesheet" href="/themes/site_theme/css/jquery.mobile-1.2.0.css" /> 
  <script src="/themes/site_theme/js/jquery-1.7.1.min.js"></script> 
  <script src="/themes/site_theme/js/jquery.mobile-1.2.0.js"></script> 
  <script src="/themes/site_theme/js/min.js"></script> 
</head>
<body><div data-role="page" id="registerPage">
<div data-role="header">
        <a href="/app/index" data-icon="home" data-theme="b">Home</a>
        <h1>Brand List</h1>
        <a href="#"  data-role="button" data-rel="back" data-icon="arrow-l"data-theme="b">Back</a> 
</div>
    <div data-role="content">
                <form data-ajax="false" id="textForm" >
                <textarea name="comments" id="comments" placeholder='Type your comments'  size="85"></textarea>
                <div  align="center">
                    <input data-mini="true" data-inline="true" type="button" value="Submit" onClick="javascript: formText();" />
                    <input type="hidden"  name="company_id"  value="3" >
                    <input type="hidden"  name="branch_id"   value="3" >
                    <input type="hidden"  name="campaign_id" value="6" >
                </div>
            </form>

</div>

<div data-role="dialog" id="dialog1" class="app-dialog">
        <div data-role="header">
             <h3>A dialog</h3>
        </div>
            <div id="content" data-role="content">
                   <p>I am a dialog....!</p>
        </div>
   </div>

        </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:16:38.357

如果我理解正确，您想知道如何显示对话框吗？如果我是正确的，那么您有一个错误，您的对话框是 registerPage 页面的一部分。只需将其提升一个级别。

看看这个例子，我用你的代码做的：http: [//jsfiddle.net/Gajotres/yWTG2/](http://jsfiddle.net/Gajotres/yWTG2/)

```
$('#registerPage').live('pagebeforeshow',function(e,data){    
    $('#test-button').live('click', function(e) {
        $.mobile.changePage('#dialog1', { transition: "pop", role: "dialog", reverse: false } );
    });    
}); 
```

# java - Tomcat _localhost:port_ 为每个系统全局设置

> ID：14191477
> 
> 赞同：-1
> 
> 时间：2013-01-07T07:14:12.587
> 
> 标签：java, jakarta-ee, tomcat, tomcat6, tomcat7

我有*localhost:port*用于 webApplication。我可以将其声明为全局吗？就像我创建了 .war 一样，我可以在任何 tomcat 或任何系统中使用它，而无需更改它？

```
String url=http://localhost:8080/app/xyz.jsp 
```

我想将*localhost:8080*声明为全局（当我将其硬编码到我的应用程序时），就像用户可定义的标志一样。

谢谢。

**明白了，我用*localhost*作为*127.0.0.1*点 self 和*端口*地址**

```
Server server = ServerFactory.getServer();
        Service[] services = server.findServices();
        for (Service service : services) {
            for (Connector connector : service.findConnectors()) {
                ProtocolHandler protocolHandler = connector
                        .getProtocolHandler();
                if (protocolHandler instanceof Http11Protocol
                        || protocolHandler instanceof Http11AprProtocol
                        || protocolHandler instanceof Http11NioProtocol) {
                    serverPort = String.valueOf(connector.getPort());
                }
            }
        } 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:44:54.887

这甚至是不可取的。您可以在运行时获取信息，例如通过 EL：

```
#{request.scheme}://#{request.serverName}:#{request.serverPort}/#{request.contextPath}/... 
```

然后，您的应用程序可以在其他人的任意重新托管、Tomcat 重新配置、端口重新分配等中幸存下来。根本不需要采取任何行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:22:04.683

`I don't think so this is possible`.

部署的war文件属于`application`，属于服务器配置`Hostname`，`port`可以根据自己的需求进行配置。您也可以将它们配置为在其上运行应用程序`SSL`。

# html - 如何将按钮转换为这种样式的按钮

> ID：14191478
> 
> 赞同：1
> 
> 时间：2013-01-07T07:14:18.640
> 
> 标签：html, css

我正在尝试使按钮看起来像我想要的那样。我设法做到了，但问题是要求我使用**javascript 发布表单**，这完全破坏了该网站的可访问性。

所以，我想知道如何在所有按钮上`<input type"submit" />`保持*鼠标悬停*效果的同时使用获得相同的效果，而不仅仅是文本（我的第一个解决方案有这个问题）。

这是按钮的外观（您还可以看到鼠标悬停效果）：

![具有鼠标悬停效果的按钮样式](../Images/2e187948d2931ed1c79d4055080ba1f9.png)

在这里你可以找到一个小提琴：http: [//jsfiddle.net/FireDragonDoL/hjC7P/](http://jsfiddle.net/FireDragonDoL/hjC7P/)

这是代码：

**HTML**

```
<html>
  <head>
    <title>Test</title>
  </head>
  <body>
    <div class="nothing">
      <div class="button"><span><span>Leggi tutto</span></span></div><br /><br />
    </div>
    <div class="container">
      <div class="button"><span><span>Leggi tutto</span></span></div><br /><br />
    </div>
  </body>
</html> 
```

**CSS**

```
* {
    outline:none;
    border:0;
}
body {
    margin:0;
    font-family:Georgia, "Times New Roman", Times, serif;
}
a {
    color:#750e0e;
    text-decoration:none;
}
a.reverse-color {
    color: #D6D6B0;
    text-decoration: none;
}
.container .button {
    background: url("https://dl.dropbox.com/u/762638/Stackoverflow/ButtonStyled/bkg_btn_hover.png") no-repeat scroll 1px 0 transparent;
}
.container .button span {
    background: url("https://dl.dropbox.com/u/762638/Stackoverflow/ButtonStyled/bkg_btn_hover.png") no-repeat scroll 100% 0 transparent;
}
.button {
    background: url("https://dl.dropbox.com/u/762638/Stackoverflow/ButtonStyled/bkg_btn_rosso.png") no-repeat scroll 1px 0 transparent;
    border: 0 none;
    cursor: pointer;
    height: 60px;
    margin: 0;
    overflow: visible;
    padding: 0 0 0 15px;
    width: auto;
    float:right
}
.button span {
    background: url("https://dl.dropbox.com/u/762638/Stackoverflow/ButtonStyled/bkg_btn_rosso.png") no-repeat scroll 100% 0 transparent;
    color: #750E0E;
    float: left;
    font-size: 14px;
    font-weight: bold;
    height: 60px;
    text-align: center;
    text-shadow: 0 1px #D7E9A4 !important;
    white-space: nowrap;
    text-shadow:1px 1px #FFFFFF;
}
.button:hover span {
    color:#333;
}
.button span span {
    line-height: 52px;
    padding: 0 20px 0 0;
}
.button:hover {
    background: url("https://dl.dropbox.com/u/762638/Stackoverflow/ButtonStyled/bkg_btn_hover.png") no-repeat scroll 1px 0 transparent;
}
.button:hover span {
    background: url("https://dl.dropbox.com/u/762638/Stackoverflow/ButtonStyled/bkg_btn_hover.png") no-repeat scroll 100% 0 transparent;
}
.container, .nothing {
  clear: both;
    overflow:hidden;
    padding:10px 0;
} 
```

我唯一的想法实际上是使用按钮背景的大图像（可能更宽）和 use `<input type="image" />`，但在这种情况下，我不知道如何在图像上放置文本。

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:24:53.393

这是可能的，但不同的浏览器会出现问题。简单的方法是在图像中包含您的文本。并使用精灵技术来实现悬停效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:12:32.600

目前，没有办法通过单个 html 元素来做到这一点。也许 with `:before`and`:after`可以做一些事情，或者 with `position: relative`too。

目前，我将坚持使用 javascript 代码将这些项目转换为“提交”按钮。

# javascript - 调用页面方法

> ID：14191480
> 
> 赞同：0
> 
> 时间：2013-01-07T07:14:25.053
> 
> 标签：javascript, asp.net, ajax, jquery

我正在为 void 方法使用 ajax 回调。但如果我在调用方法中调用其他方法。M geeting 错误。任何帮助我都会得到帮助。下面是我的代码

```
 [WebMethod]
    public static void BindNextActions()
    {
        BindGridView(); ---Error at this point..its a private void method

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:27:03.970

您正在尝试从静态函数调用非静态函数。这就是错误的原因。可以在以下链接中找到解决方案。 [如何从 C# 中的静态方法调用非静态方法？](https://stackoverflow.com/questions/1360183/how-do-i-call-a-non-static-method-from-a-static-method-in-c)

# asp.net - mac 验证失败

> ID：14191481
> 
> 赞同：0
> 
> 时间：2013-01-07T07:14:28.407
> 
> 标签：asp.net, macos, viewstate

我已经开发了应用程序，并且它在本地与远程数据库连接上运行良好，但是当它在每个回发事件上放置在实时服务器上时，它给出了这个异常：

```
Server Error in '/openlearningsolutions' Application.
Validation of viewstate MAC failed. If this application is hosted by a Web Farm or cluster, ensure that <machineKey> configuration specifies the same validationKey and validation algorithm. AutoGenerate cannot be used in a cluster.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.Web.HttpException: Validation of viewstate MAC failed. If this application is hosted by a Web Farm or cluster, ensure that <machineKey> configuration specifies the same validationKey and validation algorithm. AutoGenerate cannot be used in a cluster.

Source Error:

[No relevant source lines]

Source File: c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\openlearningsolutions\75c7e45d\68c7418e\App_Web_admin.aspx.cdcab7d2.ff0f08dc.0.cs    Line: 0

Stack Trace:

[ViewStateException: Invalid viewstate. 
    Client IP: 182.177.92.68
    Port: 18076
    Referer: http://www.projects.azexsolutions.com/openlearningsolutions/admin.aspx
    Path: /openlearningsolutions/admin.aspx
    User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:17.0) Gecko/20100101 Firefox/17.0
    ViewState: /wEPDwUKMjAzNzcxOTA4Ng9kFgICAw8WAh4HZW5jdHlwZQUTbXVsdGlwYXJ0L2Zvcm0tZGF0YRYMAhEPZBYCAgUPEA8WBh4NRGF0YVRleHRGaWVsZAUKY291cnNlTmFtZR4ORGF0YVZhbHVlRmllbGQFCGNvdXJzZUlEHgtfIURhdGFCb3VuZGdkEBUAFQAUKwMAZGQCFQ9kFgICBQ8QDxYGHwEFCmNvdXJzZU5hbWUfAgUIY291cnNlSUQfA2dkEBUAFQAUKwMAFgBkAhkPZBYEAgUPEA8WBh8BBQpjb3Vyc2VOYW1lHwIFCGNvdXJzZUlEHwNnZBAVAQZTZWxlY3QVAQZTZWxlY3QUKwMBZxYBZmQCBw8QZGQWAGQCHQ9kFgICAQ8QDxYGHwEFCmNvdXJzZU5hbWUfAgUIY291cnNlSUQfA2dkEBUBDVNlbGVjdCBDb3Vyc2UVAQ1TZWxlY3QgQ291cnNlFCsDAWdkZAIhD2QWBgIBDxAPFgYfAQUKY291cnNlTmFtZR8CBQhjb3Vyc2VJRB8DZ2QQFQAVABQrAwAWAGQCAw8QZGQWAGQCCQ9kFgICAQ8WAh4Fc3R5bGUFxQJiYWNrZ3JvdW5kOnVybCgvb3BlbmxlYXJuaW5nc29sdXRpb25zL1dlYlJlc291cmNlLmF4ZD9kPU1VcVk1UGwybTBtNTJnRUI4a0JBOGJ0WTBiLW9hSWNxWmc1cVU3MjZGRUtEMzJYbnpsRTQ4XzBwUjhJSjVHYV...]

[HttpException (0x80004005): Validation of viewstate MAC failed. If this application is hosted by a Web Farm or cluster, ensure that <machineKey> configuration specifies the same validationKey and validation algorithm. AutoGenerate cannot be used in a cluster.]
   System.Web.UI.ViewStateException.ThrowError(Exception inner, String persistedState, String errorPageMessage, Boolean macValidationError) +235
   System.Web.UI.ViewStateException.ThrowMacValidationError(Exception inner, String persistedState) +14
   System.Web.UI.ObjectStateFormatter.Deserialize(String inputString) +274
   System.Web.UI.ObjectStateFormatter.System.Web.UI.IStateFormatter.Deserialize(String serializedState) +4
   System.Web.UI.Util.DeserializeWithAssert(IStateFormatter formatter, String serializedState) +37
   System.Web.UI.HiddenFieldPageStatePersister.Load() +241
   System.Web.UI.Page.LoadPageStateFromPersistenceMedium() +106
   System.Web.UI.Page.LoadAllState() +43
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +8431
   System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +253
   System.Web.UI.Page.ProcessRequest() +78
   System.Web.UI.Page.ProcessRequestWithNoAssert(HttpContext context) +21
   System.Web.UI.Page.ProcessRequest(HttpContext context) +49
   ASP.admin_aspx.ProcessRequest(HttpContext context) in c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\openlearningsolutions\75c7e45d\68c7418e\App_Web_admin.aspx.cdcab7d2.ff0f08dc.0.cs:0
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +100
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

为什么我在服务器上收到此错误但在本地主机上它工作正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T06:33:56.837

我在 web.config 下添加了这一行，它对我有用：

```
 <machineKey validationKey="ED69AB3D81E3E1CFBE24D3910DDCD3DAFD0919466CD7D442D45E33BCEF2A72DB26CFDDF390D843EF4AB6A2A4C7DA6F23327C0482EA1CF67AF41B188F495D7112" decryptionKey="B114854371A664138153F7A0605108B09E1E871CC112C7873AD2F58C158D11FC" validation="SHA1" decryption="AES" /> 
```

# mysql - MySQL自定义顺序（再次）ORDER BY列的输出

> ID：14191483
> 
> 赞同：0
> 
> 时间：2013-01-07T07:14:31.433
> 
> 标签：mysql, sql, sql-order-by

在 MySQL 中，假设我有一个表：

```
 ----------------------
| Price | ProductType |
 ----------------------
8.5     | Foodstuff
8.5     | Mobile
147     | Application
2       | Mobile
8.5     | Electronic
8.5     | Mobile 
```

在这种情况下，如果 I `ORDER BY Price, ProductType`，它通常会显示为：

```
 ----------------------
| Price | ProductType |
 ----------------------
2       | Mobile
8.5     | Electronic
8.5     | Foodstuff
8.5     | Mobile
8.5     | Mobile
147     | Application 
```

现在的问题是：

*   我可以自己定制`ORDER`吗？（例如，哪一个先来，哪一个第二）

例如，如何编写 a`MySQL Query`以获得如下结果：

```
 ----------------------
| Price | ProductType |
 ----------------------
2       | Mobile
8.5     | Electronic <- 1st in Order
8.5     | Mobile     <- 2nd in Order
8.5     | Mobile     <- ..
8.5     | Foodstuff  <- 3rd in Order
147     | Application 
```

请关注价格行，在这个示例中（在`8.5`第一个列之后），那么显然我想显示：首先，然后，然后。有可能吗？`Order By``Price``Electronic``Mobile``Foodstuff``MySQL`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T07:17:48.207

利用`FIELD`

```
ORDER BY Price, FIELD(ProductType,'Electronic','Mobile','Foodstuff') 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/e3601/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T07:17:51.677

只需在您的表格中为您的自定义订单添加第三个 (INT) 列，将其命名为聪明的名称。然后您可以按以下顺序订购：

```
ORDER BY custom_order 
```

如果您仍然希望价格优先于自定义订单，您可以进行查询：

```
ORDER BY Price, custom_order 
```

您只是不能让 MySQL 猜测您想要安排的顺序，因此替代解决方案应该是 JW 建议的解决方案。您在其中指定查询中的实际顺序。但是，对于大型表和动态数据，我会推荐我的解决方案。

然后希望您对数据库有一个聪明的管理，这样您就可以轻松地以您想要的方式重新排序项目......我已经成功地进行了许多数据库管理，并且喜欢使用 AJAX 和 jQuery Sortable 进行简单的拖放重新排序。

# python - 使用python的微阵列层次聚类和PCA

> ID：14191487
> 
> 赞同：3
> 
> 时间：2013-01-07T07:14:46.230
> 
> 标签：python, bioinformatics, pca, biopython, hierarchical-clustering

我正在尝试使用微阵列列的层次聚类（来自单个微阵列复制的结果）和 PCA 来分析微阵列数据。

我是 python 新手。我有 python 2.7.3、biopyhton、numpy、matplotlib 和 networkx。

我可以使用 python 或 biopython 中的函数（类似于 MATLAB 的 clustergram 和 mapcaplot）来执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-09T11:21:44.350

我建议使用 R Bioconductor 和 Expander 和 MeV 等免费软件。很好的灵活选择是带有 TreeViews 的 Cluster 软件。您还可以从 Python 代码运行 R 和 STATA 或 JMP，并完全自动化您的数据管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:15:46.290

Python 非常适合神经科学，恭喜您的选择。有时资源比 Matlab 更难找到，但它们是免费的，你会发现一个活跃的社区和很多支持。

一个很好的起点是[Python](http://nipy.sourceforge.net/)项目中的 Neuroimaging 及其子项目，例如 nitime。我建议订阅并在邮件列表中询问，这些人非常聪明并且乐于提供帮助。

对于 PCA，您还可以尝试[Modular Toolkit for Dataprocessing in Python](http://mdp-toolkit.sourceforge.net/)，这是一个不错的数据处理算法库。

对于一般的集群，我推荐[Scipy Clustering](http://code.google.com/p/scipy-cluster/)。

HTH，托尔斯滕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T04:49:35.720

R 有各种各样的工具可以完全按照您所描述的通过层次聚类进行微阵列分析。这是我参加的课程的链接，详细说明了如何使用 R 进行微阵列分析。希望[这](https://functionalgenomics.wordpress.com/)会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-29T05:12:59.703

我在 python 中使用[scikit-learn](http://scikit-learn.org/stable/index.html)进行集群和其他机器学习应用程序。我发现 scikit 方法通常很直观，而且令人高兴的是，一切都是开箱即用的。

有许多可用的[聚类](http://scikit-learn.org/stable/modules/clustering.html)算法，包括[凝聚聚类](http://scikit-learn.org/stable/modules/generated/sklearn.cluster.AgglomerativeClustering.html#sklearn.cluster.AgglomerativeClustering)，它是一种层次聚类方法。

除了聚类之外，还有许多有监督和无监督的机器学习算法。还有多种工具支持[特征提取](http://scikit-learn.org/stable/modules/classes.html#module-sklearn.feature_extraction)、[交叉验证](http://scikit-learn.org/stable/modules/classes.html#module-sklearn.cross_validation)等。预处理工具包括[PCA](http://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html#sklearn.decomposition.PCA)等等。

绝对值得一试。

# java - Android 自定义微调器样式进一步

> ID：14191488
> 
> 赞同：0
> 
> 时间：2013-01-07T07:14:49.677
> 
> 标签：java, android, android-spinner

首先我想说这不是为自定义微调器样式创建相同的线程。在我的应用程序中，我喜欢在微调器上显示一个字符串和一个图像但是当我浏览文档时，我注意到只有以下构造函数。

```
ArrayAdapter(Context context, int textViewResourceId)
Constructor
ArrayAdapter(Context context, int resource, int textViewResourceId)
Constructor
ArrayAdapter(Context context, int textViewResourceId, T[] objects)
Constructor
ArrayAdapter(Context context, int resource, int textViewResourceId, T[] objects)
Constructor
ArrayAdapter(Context context, int textViewResourceId, List<T> objects)
Constructor
ArrayAdapter(Context context, int resource, int textViewResourceId, List<T> objects)
Constructor 
```

所以我最初可以有一个对象。那可以是字符串，图像等。

但我想保留字符串和图像。

我知道如何在旋转器展开后显示图像和字符串。

我想我的问题很清楚。有没有办法处理这个？

# html - 如何在 Metro 应用程序中自定义 Appbar 命令图像？

> ID：14191489
> 
> 赞同：2
> 
> 时间：2013-01-07T07:14:52.273
> 
> 标签：html, windows-8, microsoft-metro, winjs, appbar

我有 Metro 应用程序，我试图在其中实现 Appbar 命令控制。我能够显示带有一些图像的 Appbar，但问题是当我突出显示（悬停）时图像正在移动。我的一些代码在这里

`.homebtn1 .win-commandimage{ background-image: url('/images/homeActive.png');
width:140px; height:75px; };`

```
.appbarExtraClass .win-commandicon
{
height:75px;
width:140px;
margin:0px 2px 2px 2px; 
} 
```

任何人都可以告诉我我需要对上面的 CSS 进行哪些更改才能使图像保持不变。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:33:19.480

您可以使用 :disabled :hover 和 :active 伪选择器并将它们应用到您的 appBar。样式很可能是使按钮稍微移动的原因。本文展示了一些操作方法[http://msdn.microsoft.com/en-us/library/windows/apps/jj839733.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj839733.aspx)

这篇博文展示了许多着色和自定义应用栏按钮[http://blogs.msdn.com/b/shawnste/archive/2012/07/17/colorizing-a-modern-win8-javascript-appbar-and-appbarcommands。 aspx](http://blogs.msdn.com/b/shawnste/archive/2012/07/17/colorizing-a-modern-win8-javascript-appbar-and-appbarcommands.aspx)

# python - 为什么很多Python第三方库文档都是txt格式的，如何使用？

> ID：14191496
> 
> 赞同：-7
> 
> 时间：2013-01-07T07:15:25.680
> 
> 标签：python, django

像 django doc 和 docutils doc。

我是一名 Java 程序员，jar doc 都是 html。
所以我不知道如何使用 python txt doc

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T07:20:36.587

现在大多数文档都是使用[reStructuredText](http://docutils.sourceforge.net/rst.html)编写的。[Sphinx Python 文档生成器](http://sphinx-doc.org/)可用于将这些文档转换为 PDF、HTML、LaTeX、EPUB 和其他格式。

packages.python.org 或 readthedocs.org 上的大多数 Python 文档实际上是从 reStructuredText 和 Sphinx 生成的。

所以你的总体印象是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:26:17.163

我怀疑这在一定程度上是一种鼓励用户参考在线文档的策略——在 Django 的案例中，这是明确推荐的。

但是，可以根据以下链接生成 Django 文档的本地 HTML 副本：https://docs.djangoproject.com/en/dev/intro/whatsnext/?from=olddocs#as-html-locally

由于 Python 标准库文档也是使用 Sphinx 生成的，因此也应该可以生成本地 HTML 版本。

# jquery - Jquery验证引擎，如果被ajax调用，提示不会出现

> ID：14191498
> 
> 赞同：0
> 
> 时间：2013-01-07T07:15:39.930
> 
> 标签：jquery, jquery-validation-engine

我在注册表单中使用回调函数来检查用户名的有效性。验证[必需，funcCall[username_check]]..

这是javascript函数

```
function username_check(field, rules, i, options) {
    var username = $('#username').val();
    if (username == "" || username.length < 4) {
        return options.allrules.validate2fields.alertText;
    } else {
        jQuery.ajax( {
            type: "POST",
            url: "<?php echo site_url('signup/validate');?>",
            data: 'username=' + username,
            cache: false,

            success: function (response) {
                if (response == 1) {
                    return options.allrules.validate2fields.alertText;
                } else {
                    return options.allrules.validate2fields.alertError;
                }
            }
        });
    } 
}
$(document).ready(function(){
    $("#signup").validationEngine();
}); 
```

验证期间不显示 alertText。如果我在 $.ajax 提示符之外写下以下 ifelse 条件，则可以看到

```
 if (response == 1) {
          return options.allrules.validate2fields.alertText;
      } else {
          return options.allrules.validate2fields.alertError;
      } 
```

这是一个错误还是我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:41:20.863

看起来您正在使用异步 AJAX 调用作为同步调用。成功回调函数中的代码很可能没有运行，即使它是作为 AJAX-success-callback 函数的结果返回的结果。验证引擎具有 AJAX 验证的特定设置。请参阅[此处](http://www.position-absolute.com/articles/using-form-ajax-validation-with-the-jquery-validation-engine-plugin/)或此处：[jQuery 验证引擎 AJAX 协议](http://posabsolute.github.com/jQuery-Validation-Engine/#ajax-protocol)。

# c++ - C++：错误 C2678：二进制“=”：未找到采用“const SPoint”类型的左侧操作数的运算符

> ID：14191499
> 
> 赞同：1
> 
> 时间：2013-01-07T07:15:51.960
> 
> 标签：c++

这是我的代码：

```
#include <StdAfx.h>;
#include <iostream>;
#include <vector>;
#include <algorithm>;
#include <iterator>;

using namespace std;
struct SPoint
{
    int id;
    int X;
    int Y;
};

bool operator<(const SPoint& p1, const SPoint&p2){
    return p1.id <p2.id;
}

vector<SPoint> points;
vector<SPoint> chosen;
vector<SPoint> cleared;

vector<SPoint>::iterator it;

void print_vect(const vector<SPoint> & vect)
{
    for (int i = 0; i < vect.size(); ++i)
    {
        cout << vect[i].id << " (" << vect[i].X << "," << vect[i].Y << ")"<<endl;               
    }           

    cout << endl;   
}
bool compare(double val1, double val2)
{
    return val1 > val2;
}
void sort_points(const vector<SPoint> & vect, char command)
{
    bool cmp_result;
    SPoint temp;
    bool sorted=true;
    for (int i = 0; i < vect.size()-1 ; i++)
    {
        sorted=true;
        for (int j = 1; j <= vect.size()-1; j++)
        {
            switch (command) 
            {
                case 'x': 
                    {
                        cmp_result = compare(vect[j-1].X, vect[j].X); 
                        break;
                    }
                case 'y': 
                    {
                        cmp_result = compare(vect[j-1].Y, vect[j].Y); 
                        break;              
                    }               
                case 'i': 
                    {
                        cmp_result = compare(vect[j-1].id, vect[j].id); 
                        break;              
                    }           
            }

            if (cmp_result)
            {
                sorted = false;
                temp = vect[j-1];
                vect[j-1] = vect[j];
                vect[j] = temp;
            }

        }
        if (sorted) 
        {
            cout << "Sorted:" << endl;
            print_vect(vect);           
            break;
        }
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    SPoint temp;
    for (int i = 0; i < 10; i++)
    {
        temp.id = i;
        temp.X = i;
        temp.Y = i;
        points.push_back(temp);
    }

    for (int i = 5; i < 10; i++)
    {
        temp.id = i;
        temp.X = i;
        temp.Y = i;
        chosen.push_back(temp);
    }

    cout << "Points:" << endl;
    print_vect(points);
    cout << endl << endl;

    cout << "Chosen:" << endl;
    print_vect(chosen);

    system("pause");
    sort_points(points, 'i');
    sort_points(chosen, 'i');
    set_difference(points.begin(), points.end(), chosen.begin(), chosen.end(), back_inserter(cleared));
    print_vect(cleared);

    return 0;
} 
```

任何人都可以帮助我理解为什么我会出现这些错误：

```
1>c:\users\гость\documents\visual studio 2010\projects\grablevskij2\grablevskij2\grablevskij2.cpp(110): error C2678: binary '=' : no operator found which takes a left-hand operand of type 'const SPoint' (or there is no acceptable conversion)
1>          c:\users\гость\documents\visual studio 2010\projects\grablevskij2\grablevskij2\grablevskij2.cpp(18): could be 'SPoint &SPoint::operator =(const SPoint &)'
1>          while trying to match the argument list '(const SPoint, const SPoint)'
1>c:\users\гость\documents\visual studio 2010\projects\grablevskij2\grablevskij2\grablevskij2.cpp(111): error C2678: binary '=' : no operator found which takes a left-hand operand of type 'const SPoint' (or there is no acceptable conversion)
1>          c:\users\гость\documents\visual studio 2010\projects\grablevskij2\grablevskij2\grablevskij2.cpp(18): could be 'SPoint &SPoint::operator =(const SPoint &)'
1>          while trying to match the argument list '(const SPoint, SPoint)' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T07:19:08.163

在您的`sort_points`函数中，您声明`vect`为`const`. 后来，你说：

```
vect[j-1] = vect[j];
vect[j] = temp; 
```

由于`vect`is `const`，这会导致调用 的`const`版本`operator[]`，这将返回`const`对对象的引用，该引用是不可分配的。

看到它是如何命名的`sort_points`并且不返回新向量，我希望它能够修改我传入的向量。

# mysql - 如何连接两个表

> ID：14191506
> 
> 赞同：0
> 
> 时间：2013-01-07T07:17:00.637
> 
> 标签：mysql, sql, join

我有两个表作为**EventTable**和**VenueTable**

我使用彼此的 prinamrykey 作为外键。表结构如下；

```
EventID|VenueID|EventName 
    1  |    1  | Event1 
    2  |    1  | Event2 
    3  |    2  | Event3 

VenueId|EnevtID|VenueNAme
   1   |   1   | Venue1 
   2   |   2   | Venue2 
```

我想要结果如下；

```
VenueID | VenueName | EventID | EventName
   1    | Venue1    |  1      | Event1 
   1    | Venue1    |  2      | Event2 
   2    | Venue2    |  2      | Event2
   2    | Venue2    |  3      | Event3 
```

我已经使用内部连接来执行此操作。但无法获得预期的结果。

这该怎么做 ？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:34:29.143

试试这个：

```
SELECT
    v.VenueID,
    v.VenueName,
    v.EventID,
    e.EventName
FROM
    VenueTable v
INNER JOIN
    EventTable e 
    ON (v.EventId = e.EventId)

UNION

SELECT
    v.VenueID,
    v.VenueName,
    v.EventID,
    e.EventName
FROM
    VenueTable v
INNER JOIN
    EventTable e 
    ON (v.VenueID = e.VenueID) 
```

*这模拟了 MySQL 中的 FULL OUTER JOIN*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:24:27.157

这应该可以解决问题：

```
 select VenueID, VenueName, EventID, EventName
    from EventTable, VenueTable
    where EventTable.VenueID = VenueTable.VenueID 
```

记住mysql的分隔符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T07:26:39.180

```
SELECT v.VenueID, v.VenueName, v.EventID, e.EventName
FROM VenueTable v
INNER JOIN EventTable e  ON (v.EventId = e.EventId) 
```

甚至

```
SELECT v.VenueID, v.VenueName, v.EventID, e.EventName
FROM VenueTable v, EventTable e 
WHERE v.EventId = e.EventId 
```

# yii - 在 Yii 中禁用验证

> ID：14191509
> 
> 赞同：3
> 
> 时间：2013-01-07T07:17:18.007
> 
> 标签：yii, yii-events

我正在尝试使用 Yii 在我的项目中实现“另存为草稿”功能。我有一个带有 2 个按钮的表单：- 提交和保存。单击提交按钮后，在验证所有字段（包括必填字段）后，表单数据将保存到数据库中。它工作完美。单击保存按钮时，我需要将没有默认验证的表单数据保存到数据库中。如何在控制器操作中实现这种禁用验证？
所有的建议都是可以接受的。。
谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T08:52:49.813

一起关闭验证规则很容易：

```
$model->save(false); 
```

这不会进行任何验证，只会尝试保存您的模型（在数据库端可能仍会失败）。

但是如果你想运行*一些*验证，你可能想在[这里查看](http://www.yiiframework.com/wiki/266/understanding-scenarios/)[**场景**](http://www.yiiframework.com/wiki/266/understanding-scenarios/)。它们允许您根据初始化模型的场景指定一组不同的规则。这样，您只能打开/关闭整套验证规则。

```
$model = new Thingy();
$model->save(); // All default validation rules

$model = new Thingy('draft');
$model->save(); //Applies all default & "draft" validation rules 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:53:47.183

您的问题在控制器中说，但据我所知，在控制器中我们有过滤器，例如检查权限。这可以被覆盖，如本指南的[本节](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter)所述。如果您的意思是在模型中完成的验证，那么您可以使用场景（通过将规则绑定到场景来绕过验证，而在其他场景中不进行验证）。检查这个讨论类似问题的[线程](http://www.yiiframework.com/forum/index.php/topic/20141-solved-how-can-i-skip-a-validation-rule-on-a-specific-case/)

如果我误解了您的问题，请在此处发表评论，以便我相应地更新答案！

# android - 在 Play 商店更新 APK 文件

> ID：14191511
> 
> 赞同：1
> 
> 时间：2013-01-07T07:17:27.577
> 
> 标签：android, google-play

我想在 Google Play 商店更新 APK 文件。

![在此处输入图像描述](../Images/e9dbc0fcbe38221cd1d2d0fc08007799.png)

上传新的APK文件后，我点击激活，它询问是否替换之前的APK文件，我点击确定。然后我得到这个：

![在此处输入图像描述](../Images/1745416ca74936de05321f60f7d33f94.png)

但是当我刷新页面时，我再次获得第一张图片。此外，如果我搜索我的应用程序并单击它，它显示版本为 1.0，而不是 1.0.1。

是因为，谷歌需要时间来处理这个吗？如果是这样的话，它至少不应该显示 2 个 APK 文件，看起来我没有激活它。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T07:19:51.017

真正进入市场需要一些时间。也许几个小时。

您可以在高级模式下查看您的旧 APK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:27:54.127

激活新上传的 apk 后，保存您所做的更改。这可以帮助你吗

# oracle - 在 oracle 中选择更新查询

> ID：14191512
> 
> 赞同：0
> 
> 时间：2013-01-07T07:17:43.200
> 
> 标签：oracle

我有两个表，`#Table1`列`uniqueId`,和列, `cpty_id`,`cpty_code``#Table2``cpty_id``cpty_code``unique_id`

现在我想更新 #Table1 的 uniqueId

喜欢：

```
update #Table1 
set uniqueId = 
    (uniqeId from #Tabel2 
     where #Tabel2.cpty_id=#Table1.cpty_id 
       and #Table2.cpty_code=#Table1.cpty_code) 
```

如何通过更新选择查询在 oracle 中实现这一点（我想避免循环）

注意：它们只是两个表`uniqueId`的组合`cpty_id`和`cpty_code`中的一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:25:41.687

使用`JOIN`：

```
UPDATE 
  ( SELECT t1.uniqeId, 
           t2.uniqeId AS newUniqueId
    FROM 
        #Table1 t1
      JOIN 
        #Table2  t2
          ON  t2.cpty_id = t1.cpty_id 
          AND t2.cpty_code = t1.cpty_code
  ) tmp
SET 
    uniqueId = newUniqueId ; 
```

或稍微更改您的代码（警告！当表 2 中没有关联行时，这会将**`NULL`**值放在 中的某些行中）：`table.uniqueId`

```
update #Table1 
set uniqueId = 
    (SELECT #Table2.uniqeId from #Table2 
     where #Table2.cpty_id = #Table1.cpty_id 
       and #Table2.cpty_code = #Table1.cpty_code) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:26:51.287

请尝试如下

```
update #Table1 
set uniqueId = #Table2.uniqeId 
    (select <column_list> from #Tabel2) table2 
     where #Tabel2.cpty_id=#Table1.cpty_id 
       and #Table2.cpty_code=#Table1.cpty_code 
```

# java - 从另一个类访问 Java JTextField 信息

> ID：14191516
> 
> 赞同：0
> 
> 时间：2013-01-07T07:17:56.093
> 
> 标签：java, swing, jtextfield, accessor

我正在使用带有 JTextFields 的 gui 来收集一些信息，然后使用 JButton 获取该信息并将其写入文件，将 gui 可见性设置为 false，然后使用 Runnable 从不同的类创建另一个 JFrame 的实例以显示幻灯片。

我想从新的 JFrame 幻灯片中访问 JTextFields 的一些信息。我尝试使用访问器方法创建前一个类的对象，但值不断返回 null（我知道我已经正确地做到了）。

我担心当访问器方法去检查什么变量等于 JTextFields 对新的 JFrame 显示为空时。

下面是显示此问题的 sscce。

```
package accessmain;

import javax.swing.*;
import javax.swing.border.EmptyBorder;
import java.awt.*;
import java.awt.event.*;
import java.io.*;

public class AccessMain extends JFrame implements ActionListener 
{
    private static final int FRAMEWIDTH = 800;
    private static final int FRAMEHEIGHT = 300;

    private JPanel mainPanel;

    private PrintWriter outputStream = null;

    private JTextField subjectNumberText;

    private String subjectNumberString;

    public static void main(String[] args) 
    {
        AccessMain gui = new AccessMain();
        gui.setVisible(true); 
    }

    public AccessMain()
    {
        super("Self Paced Slideshow");
        setSize(FRAMEWIDTH, FRAMEHEIGHT);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());

        //Begin Main Content Panel
        mainPanel = new JPanel();
        mainPanel.setBorder(new EmptyBorder(0,10,0,10));        
        mainPanel.setLayout(new GridLayout(7, 2));
        mainPanel.setBackground(Color.WHITE);
        add(mainPanel, BorderLayout.CENTER);

        mainPanel.add(new JLabel("Subject Number: "));
        subjectNumberText = new JTextField(30);
        mainPanel.add(subjectNumberText);

        mainPanel.add(new JLabel(""));
        JButton launch = new JButton("Begin Slideshow");
        launch.addActionListener(this);
        mainPanel.add(launch);
        //End Main Content Panel
    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
        String actionCommand = e.getActionCommand();

        if(actionCommand.equals("Begin Slideshow"))
        {
            subjectNumberString = subjectNumberText.getText();
            if(!(subjectNumberString.equals(""))) 
            {
                System.out.println(getSubjectNumber());
                this.setVisible(false);
                writeFile();
                outputStream.println("Subject Number:\t" + subjectNumberString);
                outputStream.close();
                SwingUtilities.invokeLater(new Runnable() 
                {
                    @Override
                    public void run() 
                    {
                        AccessClass testClass = new AccessClass();
                        testClass.setVisible(true);
                    }
                });      
            }
            else
            {
                //Add warning dialogue here later
            }
        }
    }

    private void writeFile()
    {
        try
        {
            outputStream = new PrintWriter(new FileOutputStream(subjectNumberString + ".txt", false));
        }
        catch(FileNotFoundException e)
        {
            System.out.println("Cannot find file " + subjectNumberString + ".txt or it could not be opened.");
            System.exit(0);
        }
    }

    public String getSubjectNumber()
    {
        return subjectNumberString;
    }
} 
```

然后创建一个准系统类来显示数据丢失：

```
package accessmain;

import javax.swing.*;
import java.awt.*;

public class AccessClass extends JFrame
{
    AccessMain experiment = new AccessMain();
    String subjectNumber = experiment.getSubjectNumber();

    public AccessClass()
    {
        System.out.println(subjectNumber);  
    }
} 
```

使用“test”对访问器方法进行硬编码，如下所示：

```
public String getSubjectNumber()
{
    return "test";
} 
```

在新的 JFrame 中运行此方法如下：

```
SelfPaceMain experiment = new SelfPaceMain();
private String subjectNumber = experiment.getSubjectNumber();
System.out.println(subjectNumber); 
```

确实会导致系统打印“测试”。所以访问器方法似乎正在工作。但是，尝试从 JTextFields 访问值似乎不起作用。

我会从我创建的文件中读取信息，但无法传递 subjectNumber（用作文件名），我无法告诉新类要打开什么文件。

有没有将数据从 JTextFields 传递到其他类的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:33:13.600

将参数“AccessMain”或“JTextField”传递给第二类：

```
SwingUtilities.invokeLater(new Runnable() 
{
    @Override
    public void run() 
    {
        AccessClass testClass = new AccessClass(AccessMain.this); //fixed this
        testClass.setVisible(true);
    }
}); 
```

然后从第二类中的“AccessMain”或“JTextField”中读取“subjectNumber”（JTextField 值）的值：

```
public class AccessClass extends JFrame
{
    final AccessMain experiment;

    public AccessClass(AccessMain experiment)
    {
        this.experiment = experiment;
    }

    public String getSubjectNumber(){
        return experiment.getSubjectNumber();
    }
} 
```

此外，您应该尝试[观察者](http://www.tutorialspoint.com/java/util/observable_addobserver.htm)模式。

*   [Observalbe 和 Observer 的简单演示](http://www.java2s.com/Code/Java/Design-Pattern/AsimpledemoofObservableandObserver.htm)
*   [可观察对象和观察者对象](http://www.java2s.com/Tutorial/Java/0460__Design-Pattern/ObservableandObserverObjects.htm)

# javascript - 显示隐藏 div 成功，但点击时页面刷新。剃刀

> ID：14191518
> 
> 赞同：1
> 
> 时间：2013-01-07T07:18:00.260
> 
> 标签：javascript, razor, asp.net-mvc-4

我能够成功显示/隐藏 div onclick。但是 onclick div 显示一秒钟，页面刷新。我用过javascript。代码：

```
 @{var Count = 0;}
 foreach (var commentlist in Model.Comments.Where(x => x.CommentParentID == 0))
  {
 <div id="@Count" style="display: none;">
<input type="submit" id="reply" class="reply-link" onclick="return showHide(@Count);" value="Reply" />
 @{Count++; }
</div>
}

<script type="text/javascript">
 function showHide(Count) {
        var ele = document.getElementById(Count);
        if (ele.style.display == "block") {
            ele.style.display = "none";           
        }
        else {
            ele.style.display = "block";
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:26:14.747

发生这种情况是因为您的页面正在提交。尝试使用`<input type="button"...>`而不是`<input type="submit"...>`

这里[的区别： <input type='button' /> 和 <input type='submit' /> 之间的区别](https://stackoverflow.com/questions/290215/difference-between-input-type-button-and-input-type-submit)

并且您的控件 ID 不能以数字开头，并且必须是唯一的：

```
@{var Count = 0;}
foreach (var commentlist in Model.Comments.Where(x => x.CommentParentID == 0))
{
    <div id="div_@Count" style="display: none;">
        <input type="submit" id="reply_@Count" class="reply-link" onclick="return showHide('mydiv_@Count');" value="Reply" />
        @{Count++; }
    </div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:26:54.717

如果提交按钮在`<form>`您需要的内部`return false`，`showHide`如果您不希望页面在单击后被提交：

```
<script type="text/javascript">
function showHide(Count) {
    var ele = document.getElementById(Count);
    if (ele.style.display == "block") {
        ele.style.display = "none";           
    }
    else {
        ele.style.display = "block";
    }

    return false; // <-- that's important to prevent the page from submitting
}
</script> 
```

另外请记住，`id`属性不能以 HTML 中的数字开头。所以请修复你的标记：

```
@{var Count = 0;}
foreach (var commentlist in Model.Comments.Where(x => x.CommentParentID == 0))
{
    <div id="mydiv_@Count" style="display: none;">
        <input type="submit" id="reply" class="reply-link" onclick="return showHide('mydiv_@Count');" value="Reply" />
        @{Count++; }
    </div>
}

<script type="text/javascript">
function showHide(id) {
    var ele = document.getElementById(id);
    if (ele.style.display == "block") {
        ele.style.display = "none";           
    }
    else {
        ele.style.display = "block";
    }
    return false;
}
</script> 
```

# c# - 如何从另一个进程获取 .NET CLR 内存堆大小？

> ID：14191523
> 
> 赞同：2
> 
> 时间：2013-01-07T07:18:21.217
> 
> 标签：c#

**背景**

我们使用 Telerik TestStudio（Visual Studio 插件）进行了自动化测试。这将连接到我们的 WPF 应用程序并执行测试，因此自动化作为一个进程运行，而我们的应用程序作为另一个进程运行。现在我想测量和保护，以便我们没有任何内存泄漏或类似情况，我们希望在开发过程中尽早看到这一点，在它到达客户之前。

测量内存是没有问题的。但 .NET CLR 内存堆大小似乎更棘手。

这与我所追求的 Windows 性能监视器得到的结果相同。(perfmon.exe) ![性能监视器](../Images/e157838adc318abb24257793b650f782.png)

**我试过的**

垃圾收集器包含我的进程的这些信息，所以我不能使用它

```
var heap = GC.GetTotalMemory(); 
```

我尝试的是使用[WMI](http://msdn.microsoft.com/en-us/library/aa394554%28v=vs.85%29.aspx)类来获得这个但没有成功。有一个类很有趣：Win32_PerfFormattedData_NETFramework_NETCLRMemory 所以我想我会试一试..

```
var searcher = new ManagementObjectSearcher(@"select * from Win32_PerfFormattedData_NETFramework_NETCLRMemory");
foreach (ManagementBaseObject baseObject in searcher.Get())
{
    var heap0 = baseObject["HeapSize0"];
    var heap1 = baseObject["HeapSize1"];
    var heap2 = baseObject["HeapSize2"];
} 
```

上面的问题是 Get() 根本不返回任何内容，如果我将断点放在 foreach 循环的第一行，它将不会进入。

**问题**

*   在 C# 中有没有其他方法可以做到这一点？
*   以前有没有人尝试过从另一个进程中获取这个堆大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:17:51.543

看看这个博客。我认为它可以回答您的问题。
[如何正确读取 .NET 性能计数器](http://geekswithblogs.net/akraus1/archive/2009/05/27/132456.aspx)

# actionscript-3 - 在flex中通过Socket发送就绪信号

> ID：14191525
> 
> 赞同：0
> 
> 时间：2013-01-07T07:18:50.990
> 
> 标签：actionscript-3, apache-flex, sockets, serial-port

我正在开发一个 AIR 项目来在 Flex 中进行机器集成。在一台机器上，我的应用程序运行得非常好，我能够根据需要从机器接收数据。在第二个中，我认为就像我们必须向机器发送“READY”类关闭信号，我们将获得“ACK”作为回报（握手），然后才开始通信。

如何使用 Socket 从 ActionAcript 发送这个 'READY' 信号。

我的 ActionScript 类文件将如下所示..

```
protected var socket:Socket;
public function init():void
{
    socket = new Socket;
    socket.addEventListener(Event.CONNECT, onConnect);
    socket.addEventListener(ProgressEvent.SOCKET_DATA, onSocketData);
    socket.addEventListener(Event.CLOSE, onClose);
}

/*** connect to the socket */
public function connect():void
{
    if(socket.connected)
    {
        Status = "Socket is already listening to Port " + socket.remotePort + " in " + socket.remoteAddress;
        return;
    }
    socket.connect("localhost", 5331);
}

/*** handles socket connect event */
private function onConnect(event:Event):void
{
    if(socket.connected)
        Status = "Connection established successfully from " + Capabilities.os;
    else
        Status = "Connection failure!";
}

/*** manipulation of received data */
private function onSocketData(event:ProgressEvent):void
{
    //Data Recieved
}

/*** handles socket close event */
protected function onClose(event:Event):void
{
    Status = "Socket Connection is being closed..";
} 
```

机器（KR-8900）的输出是 RS232.. 8 pin mini din（男）.. 系统是 db9 pin（和往常一样）.. 串行端口通信由外部工具“SerProxy”完成. SerProxy 将向机器系统发送和接收数据。使用该应用程序，我必须使用 Socket 连接到系统中的端口并执行读写操作。

我的问题是我的`onSocketData`函数中没有收到任何数据。在通信开始之前，我需要发送 READY 信号。我被困在这里，因为我不知道如何在 Flex 中执行此操作。任何想法或建议都受到热烈欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:43:55.203

[Socket API](http://livedocs.adobe.com/flash/9.0_fr/ActionScriptLangRefV3/flash/net/Socket.html)允许您将字符串和字节写入二进制套接字。

连接套接字后，您可以执行以下操作：

```
socket.writeUTFBytes("READY");
socket.flush(); 
```

您必须调整此代码，以便它准确发送您需要发送的内容。您也可以使用[writeByte](http://livedocs.adobe.com/flash/9.0_fr/ActionScriptLangRefV3/flash/net/Socket.html#writeByte%28%29)写入空 ("\0") 字符或任何控制字符。

要读取数据，您需要使用读取方法。

# ruby-on-rails - 是否有任何工具可以迁移代码以准备好 rails4

> ID：14191531
> 
> 赞同：0
> 
> 时间：2013-01-07T07:19:06.700
> 
> 标签：ruby-on-rails

是否有任何工具可以将我们现有的应用程序从 3.2.x 迁移到 rails4 准备就绪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:26:04.720

不了解工具，但您可以按照以下指南执行此操作

1.  [升级到 Rails 4 指南](http://edgeguides.rubyonrails.org/upgrading_ruby_on_rails.html#upgrading-from-rails-3-2-to-rails-4-0)
2.  [为 Rails 4 准备好您的应用程序](http://rubysource.com/get-your-app-ready-for-rails-4/)

# javascript - CkEditor 对话框事件处理

> ID：14191534
> 
> 赞同：0
> 
> 时间：2013-01-07T07:19:18.350
> 
> 标签：javascript, ckeditor

我刚刚开始使用 CKEditor，我无法很好地理解 API 来完成我的目标。

本质上，我在页面上有几个编辑器实例。但是，对于名为 htmlInput 的编辑器，我想收集添加到编辑器中的表单元素的名称。我得到的最接近的方法是在打开相应的对话框时弹出警报，但我无法提取这些框的名称字段的值。

这是我到目前为止所拥有的。

```
CKEDITOR.on('dialogDefinition', function (e) {
    var dialogName = e.data.name;
    var dialog = e.data.definition.dialog;

    if(e.editor.name == 'htmlInput' && (dialogName=='checkbox' || dialogName=='radio' || dialogName=='textfield' || dialogName == 'textarea' || dialogName == 'select'))
    {
        dialog.on('show', function (ev) {
            alert('here');
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:39:43.070

您正在尝试做的事情非常不安全。想象一下，如果有人粘贴这样的表单元素或使用`editor.insertHtml()`方法会怎样。他们不会被收集。更好的方法如下：

```
var form = {};

CKEDITOR.instances.editor1.dataProcessor.htmlFilter.addRules({
    elements: {
        $: function( element ) {
            if ( element.name in { 'input' : 1, 'textarea': 1, 'button' : 1 } ) {
                if ( !form[ element.name ] )
                    form[ element.name ] = [];

                form[ element.name ].push( element );
            }
        }
    }
}); 
```

现在你基本上可以做到以下几点：

```
CKEDITOR.instances.editor1.getData();
console.log( form ); 
```

然后，您将检索属于该文档的所有表单元素（或任何类型的元素）。只需确保您的`form`对象在序列化表单时为空，因为 ie`htmlFilter`在源模式 <-> 所见即所得之间切换时也会执行，并且它将不断填充您的列表。

* * *

您还可以基本上使用以下内容按标签名称检索元素（简单方式 IMO）：

```
CKEDITOR.instances.editor1.document.getElementsByTag( 'input' ); 
```

# android - Android - 如何让我的应用程序永远不会被垃圾收集？

> ID：14191538
> 
> 赞同：1
> 
> 时间：2013-01-07T07:19:22.817
> 
> 标签：android, garbage-collection

我正在开发一个`sample application`。

我希望这个应用程序不应该被垃圾收集，直到我关掉手机。

```
1\. Is this is possible in android?
2\. If it is possible. How can i do this? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:25:05.743

不，这在 Android 中是不可能的。这有一个很好的理由：系统将内存作为有限资源进行管理，如果不用于确保内存可供其他应用程序使用，则任何应用程序都无法保持活动状态。

尽管如此，从技术上讲，您可以使用前台服务来要求系统尽可能长时间地保持您的应用程序运行，可能比没有此类服务的“普通”应用程序运行时间更长。

但是，总而言之，你想要达到的目标并不是一个好主意。Android 的方式是创建您的应用程序，保持其状态并将您的应用程序的新实例重新设置为相同的状态。对于持久化状态，有多种解决方案，例如使用 SharedPreferences、文件或数据库。

# c# - 如何通过数组添加参数

> ID：14191540
> 
> 赞同：1
> 
> 时间：2013-01-07T07:19:25.637
> 
> 标签：c#, asp.net

我正在通过添加一个参数`Querystring`。我的代码是：

```
 SqlCommand Cmd = new SqlCommand("Showvillage", Constr1);
        Cmd.CommandType = CommandType.StoredProcedure;
        Cmd.Parameters.Add("@Yojna_No", Request.QueryString[0]);
        Cmd.Parameters.Add("@Village_Code", Request.QueryString[1]);
        DataSet ds = new DataSet(); 
```

现在由于我的要求，我必须为每个参数发送多个值，并且多个值`Session`来自上一页的数组。任何人都可以解决如何将该会话数组添加到参数

```
 SqlCommand Cmd = new SqlCommand("Showvillage", Constr1);
        Cmd.CommandType = CommandType.StoredProcedure;
        string[] getyojna = (string[])Session["value"];
        string[] getvillage = (string[])Session["values"];
        Cmd.Parameters.Add("@Yojna_No", Request.QueryString[0]);//change here for session
        Cmd.Parameters.Add("@Village_Code", Request.QueryString[1]);//change here for session 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:51:50.287

```
 SqlParameter something = new SqlParameter("parameterName", "value");
     SqlParameter something2 = new SqlParameter("parameterName2", "value2");
    SqlParameterCollection parameters=new SqlParameterCollection();
    parameters.Add(something);
    parameters.Add(something2); 
```

也许你应该使用这样的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:23:26.163

如果您已成功地将会话对象分配`Session["values"]`给`getvillage`字符串数组，那么您可以简单地使用字符串数组的索引（getvillage）来获取元素。

```
Cmd.Parameters.Add("@Yojna_No", getvillage[0]);
Cmd.Parameters.Add("@Village_Code", getvillage[1]); 
```

# android - Webview 在 4.0 版的 android 中无法正确显示

> ID：14191541
> 
> 赞同：0
> 
> 时间：2013-01-07T07:19:27.277
> 
> 标签：android, android-widget

在我的应用程序中，我正在使用 webview，在 web 视图中，我正在显示文本，它在小于 4.0 的版本中占据其父级，但在 4.0 版中它没有填充其父级。我为 webview 填充父级提供了宽度，但我能够解决这个问题请帮助我如何解决这个问题。

```
 <?xml version="1.0" encoding="utf-8"?>
   <WebView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tv"
android:layout_width="fill_parent"
android:layout_height="match_parent" >

    </WebView> 
```

和数据为

```
 String data = "<html><head><meta name=\"viewport\"\"content=\"width=device-width,initial-scale=0,maximum-scale=0,user-scalable=no,target-densitydpi=device-dpi\" /></head>";
        data = data + "<body><center><img width=\"" + width + "\" src=\""
                + topImage + "\" /></center></body></html>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:24:15.293

尝试

```
android:layout_width="match_parent" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:42:32.070

wv.getSettings().setUseWideViewPort(false); 我给了这个然后它在 android 4.0 中也显示完整

# c# - 将字符串放入 RichTextBox

> ID：14191543
> 
> 赞同：0
> 
> 时间：2013-01-07T07:19:32.000
> 
> 标签：c#, winforms, richtextbox

我有一个很长的字符串，但是当我尝试将它分配给 RichTextBox 时，需要很长时间，例如：

```
string s = "very long string";
RichTextBox obj = new RichTextBox ();
obj.Text = s; 
```

还有另一种方法可以更快地放置字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:12:59.560

当然不是您要查找的内容，而是即时猜测。如果您担心在将长文本（字符串）分配给富文本框时您的表单挂起并且您无法操作任何内容，您可以尝试在线程中分配文本以继续使用您的主表单。下面给出的示例代码。

```
private void SetTextButton_Click(object sender, EventArgs e)
{
    string longText = "Very Long Text";
    Thread t = new Thread(() => AssignLongText(longText));
    t.Start();
}

private void AssignLongText(longText)
{
    Invoke(new Action(() => richTextBox1.AppendText(text)));
} 
```

如果我的啤酒在家里喝完了，肯定会再次尝试看到这篇文章:)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:27:04.973

首先尝试找出导致延迟的原因，是关于写入屏幕还是创建添加的文本。因为它是关于后者，然后在两者之间尝试一个字符串生成器来创建一个字符串

# php - 保护 wordpress - 如何使用 wodb->prepare() 函数

> ID：14191549
> 
> 赞同：0
> 
> 时间：2013-01-07T07:20:29.007
> 
> 标签：php, wordpress, function, sql-injection

我用`$wpdb->prepare`. 目前这个查询是在一个函数中运行的，所有的变量都从我在 wordpress 中的 page.php 文件传递​​给函数。以下查询有效。但是我的问题是我是否需要`%s`在我的变量上使用`$field1, $field2,`等...如果有人可以帮助我如何设置它，当我尝试时它不起作用。如果没有，有人能告诉我为什么不吗？谢谢！

```
$query = $wpdb->prepare("SELECT DISTINCT wp_eva_geography.$field1, wp_eva_geography.$field2 
FROM wp_eva_geography
WHERE wp_eva_geography.$field3=%s AND wp_eva_geography.$field4=%s",$type,$geo_no_dash);
$results = $wpdb->get_results( $query );
            回答 #1

赞同：0

时间：2013-01-07T07:51:41.297

使用参考文档来了解它是如何工作的。

在您的特定情况下，可能值得只回显 MySQL 查询字符串，以便您可以看到它实际尝试请求的内容。然后，您可以发现是否出现问题，例如错误的列名或值条目。

[http://codex.wordpress.org/Class_Reference/wpdb](http://codex.wordpress.org/Class_Reference/wpdb)

```
$wpdb->query( 
    $wpdb->prepare( 
        "DELETE FROM $wpdb->postmeta
         WHERE post_id = %d
          AND meta_key = %s",
         13, 'gargle' 
    )
); 
```

```

# django - 如何在 django 中查找用户组和缓存的使用？

> ID：14191554
> 
> 赞同：1
> 
> 时间：2013-01-07T07:20:45.853
> 
> 标签：django, session, caching, usergroups

我是新手，`django/python`并且正在通过我的`webapp`. 我需要帮助来解决我的一个问题。

在我的应用程序中，我计划将每个用户（来自`auth_user`）分配给组之一（来自`auth_group`）。每个组可以有多个用户。我已经进入`auth_group`,`auth_user`和`auth_user_groups`。这是我的问题：

1.  在登录时，我想检查登录用户属于哪个组？

2.  我想将该组信息保留在会话/缓存中，以便所有页面都只能显示有关该组的信息。

如果你有任何示例代码会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:56:34.830

1）作为`user`的实例`auth.models.User`，可以通过 获取用户所属的所有组`user.groups`。如果您想在登录时询问，那么您应该在登录视图中执行此操作。

2）您可以使用会话或缓存的方法来处理，这无关紧要，但是一旦有了组，您就需要渲染具有该值的页面，我的意思是，您需要将组提供给模板渲染，才能做到这一点我建议您使用[自定义上下文处理器](https://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T04:39:30.047

通过 context_processor 代码示例支持@trinchet 的非常好的答案。

放入`webapp`一个名为的新文件`context_processors.py`并在其上写入以下行：

```
def user_groups(request):
"""
Add `groups` var to the context with all the
groups the logged in user has, so you can access 
in your templates to this var as: {{ groups }}
"""
groups = None
if request.user.is_authenticated():
    groups = user.groups
return {'groups': groups} 
```

最后`settings.py`添加`'webbapp.context_processors.user_groups'`到`TEMPLATE_CONTEXT_PROCESSOR`：

```
 TEMPLATE_CONTEXT_PROCESSORS = (
    'webbapp.context_processors.user_groups', 
) 
```

# php - 加载页面后选择“F1 Packages”选项

> ID：14191555
> 
> 赞同：0
> 
> 时间：2013-01-07T07:20:46.443
> 
> 标签：php, jquery

```
<select name="select-your-sporting-event" id="select-your-sporting-event" class="select">
    <option>-------------</option>
    <option>Cricket Packages @ Lords</option>
    <option>Football Packages</option>
    <option>F1 Packages</option>
    <option>Moto GP Packages</option>
    <option>Golf Packages</option>
    <option>Tennis Packages</option>
    <option>Footbal World Cup 2014</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:34:56.933

```
$(function() { // when DOM is ready
    // using 'val' method
    $('#select-your-sporting-event').val('F1 Packages');
    // using 'prop' method
    $('#select-your-sporting-event option:contains(F1 Packages)').prop('selected', true);
    // using 'eq' method
    $('#select-your-sporting-event option').eq(3).prop('selected', true);
}) 
```

[道具](http://api.jquery.com/prop/)| [情商](http://api.jquery.com/eq/)| [值](http://api.jquery.com/val/)

# testing - 本地化移动应用程序（Android、Iphone、WP）的本地化测试工具

> ID：14191556
> 
> 赞同：2
> 
> 时间：2013-01-07T07:20:49.330
> 
> 标签：testing, mobile, localization

市场上是否有任何工具可以测试不同地区的本地化移动应用程序。例如，在本地化移动应用程序上执行的典型测试将是..
1）应用程序功能 - 用于基本导航
2）字符串截断验证
3）验证翻译的符号和图像必须适合目标语言

等等 ..

请向我提供有关此方面的宝贵信息.. 非常感谢您..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:42:14.053

我有一些使用[Robotium](http://code.google.com/p/robotium/)自动化移动应用程序本地化测试的经验。

您想要在任何平台上的本地化应用程序的任何自动化解决方案中寻找的主要内容是能够使用不会在不同语言环境中更改的标识符来唯一标识您需要与之交互的每个对象（按钮等）。这样，您的自动化代码将在任何语言环境中运行（我们不希望每个语言环境有不同的代码库）。

根据我的经验，开发用于自动化测试 Android 应用程序的 Robotium（基于 Java）解决方案要快得多（存在其他解决方案，例如[SeeTest](http://experitest.com/)，但我觉得它不是很好）。

我发现 QTP 对于桌面应用程序非常有用，但对移动应用程序却没有。[Selenium](http://seleniumhq.org/)非常适合自动化 Web 应用程序，如果需要，您可以使用[Selenium Mobile](http://code.google.com/p/selenium/wiki/WebDriverForMobileBrowsers)与移动设备上的浏览器进行交互。

我最近在博客上详细介绍了我们如何使用 Robotium 来测试我们的 Android 应用程序，以及我使用它的经验，您可以在下面的链接中找到它。

[使用 Robotium 自动化您的 Android 应用程序测试](http://www.jimmycollins.org/blog/?p=633)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T12:27:53.513

在预期的设备和网络上测试您的应用程序时，在目标市场进行用户验收测试可以突出任何特定市场的问题并返回一些非常有用的特定市场反馈。考虑一个 beta（测试阶段）计划、客户早期采用者计划或与 ICanLocalize 之类的公司合作，他们只使用翻译成母语的翻译人员。

例如，如果您的全球移动应用程序实现了自己的弹出式触摸屏键盘，您应该考虑您的国际用户的需求，以确保他们可以在本地脚本中输入文本。虽然移动设备和智能手机的屏幕分辨率越来越高，但也需要考虑可用性和美观性。翻译后的文本通常可以扩展多达 25%，从而影响应用的布局和视觉吸引力。如果显示的字体大小不够大，某些脚本可能很难阅读。在本地化应用程序时需要考虑更多的事情，我在这里不是在谈论简单的旧代码翻译。任何希望赢得国际观众的公司都可以通过提前规划翻译过程来大大简化这项工作：

仔细考虑用于描述菜单的词语。找一位母语语言专家来测试您的应用程序 避免口语化 考虑导航。

[http://www.icalocalize.com/site/2012/10/planning-ahead-for-translation-when-developing-a-mobile-app/](http://www.icanlocalize.com/site/2012/10/planning-ahead-for-translation-when-developing-a-mobile-app/)

# sorting - 为具有浮点数据类型的键排序 NSMutableArray

> ID：14191559
> 
> 赞同：0
> 
> 时间：2013-01-07T07:21:16.143
> 
> 标签：sorting, nsmutablearray

我有一个带有数据的 NSMutableArray：

```
Name ... Male ... Age ... Point
("David"..."Male"...18...7.25)
("Mary"..."Female"...16...20.50)
("Kend"..."Male"...17...4.50)
("Frank"..."Male"...25...27.50)
("Cain"..."Female"...28...2.25)
("Sims"..."Female"...17...10.50) 
```

...

我想按关键点对这个 NSMutableArray 进行排序。我试过了：

```
NSSortDescriptor *aSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"Point" ascending:NO];
[self.arrayPupils sortUsingDescriptors:[NSArray arrayWithObject:aSortDescriptor]]; 
```

和输出：

```
David/Male/18/7.25
Kend/Male/17/4.50
Frank/Male/25/27.50
Mary/Female/16/20.50
Cain/Female/28/2.25
Sims/Female/17/10.50 
```

但预期的结果是：

```
Frank/Male/25/27.50
Mary/Female/16/20.50
Sims/Female/17/10.50
David/Male/18/7.25
Kend/Male/17/4.50
Cain/Female/28/2.25 
```

请帮助我...非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:23:17.103

您的排序是按年龄排序。您需要改为按“点”排序以获得该输出。

# backbone.js - 不从对象中检索名称属性

> ID：14191560
> 
> 赞同：0
> 
> 时间：2013-01-07T07:21:21.143
> 
> 标签：backbone.js

来自主干文档

```
getmodel.get(attribute) 
Get the current value of an attribute from the model. For example: note.get("title") 
```

我将一些带有每个国家/地区名称的数据植入到 Rails 应用程序中

```
Country.create!(name: "Brazil")
Country.create!(name: "France")
Country.create!(name: "Germany")
Country.create!(name: "Spain") 
```

在控制台中，我创建了一个新集合并获取了数据

```
countries.fetch();
Object
XHR finished loading: "http://localhost:3000/countries". 
```

检查了长度。等于我创建的四个国家。

```
countries.length
4 
```

使用下划线的 shuffle 方法随机选择一个。

```
c = countries.shuffle()[0] 
```

对象有名字

```
 Backbone.Model
_changes: Array[2]
_currentAttributes: Object
_events: Object
_hasComputed: false
_previousAttributes: Object
attributes: Object
  country: Object
   created_at: "2013-01-07T06:09:43Z"
   id: 2
   name: "France"
   updated_at: "2013-01-07T06:09:43Z"
__proto__: Object
__proto__: Object 
```

尝试了几种不同的方式从对象中获取名称属性，都没有成功

```
c.get('name')
undefined
c.get("name");
undefined
c.get("name")
undefined 
```

谁能想到我可能做错了什么？

我发现不寻常的一件事是有一个“国家”属性包装了其他属性

```
attributes: Object
      country: Object
       created_at: "2013-01-07T06:09:43Z"
       id: 2
       name: "France"
       updated_at: "2013-01-07T06:09:43Z" 
```

我不确定为什么“国家”要包装其他数据。是因为我使用 Country 模型创建了种子数据吗？

```
Country.create!(name: "Brazil") 
```

无论如何，`obj.get('country')` *不*​​返回未定义

```
c = countries.shuffle()[0]
k = c.get('country')
Object
 created_at: "2013-01-07T06:09:43Z"
 id: 3
 name: "Germany"
 updated_at: "2013-01-07T06:09:43Z"
 __proto__: Object 
```

但在那之后我不能得到名字（即在我得到国家之后）

```
k = c.get('country')
Object
k.get('name')
undefined 
```

有没有办法删除国家/地区包装器并能够获取它创建的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:57:41.890

覆盖[`model.parse`](http://backbonejs.org/#Model-parse)以提取`country`元素。`parse`从获取的数据填充模型之前的主干调用：

```
var Country = Backbone.Model.extend({
  parse: function(attributes) {
    return attributes.country;
  }
}); 
```

# javascript - CKEditor 3.6.3 - 样式有问题

> ID：14191563
> 
> 赞同：1
> 
> 时间：2013-01-07T07:21:29.690
> 
> 标签：javascript, ckeditor

当我选择一些文本并更改样式时，我在 ckeditor 样式中遇到问题。但它反映到整条线。任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:16:18.260

您可能正在应用块样式或更改格式（格式实际上是块样式）。它们适用于整个段落/块，而不仅仅是选定的文本。

这与它在 MS Word 中的工作方式很接近（并且与在 Libre Office 中完全一样），但不同的是，在 MS Word 中，如果您在未折叠（非空）选择上应用格式，则可以格式化部分块。CKEditor 不允许这样做，因为它会创建 HTML。而在 HTML 中，只有整个块可能是标题、段落、预格式化等。您不能更改部分块的格式。

因此，如果我们谈论格式组合和块样式的行为 - 这是正确的。

# c++ - 命名空间 std 中的 C++ 互斥锁未命名类型

> ID：14191566
> 
> 赞同：36
> 
> 时间：2013-01-07T07:21:37.960
> 
> 标签：c++, multithreading, compiler-errors, locking, mingw

我正在编写一个简单的 C++ 程序来演示锁的使用。我正在使用`codeblocks`和`gnu` `gcc`编译器。

```
 #include <iostream>
 #include <thread>
 #include <mutex>
 using namespace std;
 int x = 0; // shared variable

 void synchronized_procedure()
 {
    static std::mutex m;
    m.lock();
    x = x + 1;
    if (x < 5)
    {
       cout<<"hello";
    }
    m.unlock();

 }

int main()
{

   synchronized_procedure();
   x=x+2;
   cout<<"x is"<<x;
} 
```

我收到以下错误：`mutex in namespace std does not name a type`。

为什么我会收到此错误？编译器不支持使用锁吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-01T06:35:41.700

我碰巧在看同样的问题。GCC`std::mutex`在 Linux 下运行良好。但是，在 Windows 上，情况似乎更糟。在 MinGW GCC 4.7.2 附带的 <mutex> 头文件中（我相信您也使用了 MinGW GCC 版本），我发现 mutex 类是在以下`#if`保护下定义的：

```
#if defined(_GLIBCXX_HAS_GTHREADS) && defined(_GLIBCXX_USE_C99_STDINT_TR1) 
```

遗憾的是，`_GLIBCXX_HAS_GTHREADS`在 Windows 上没有定义。运行时支持根本不存在。

您可能还想直接在 MinGW 邮件列表上提问，以防一些 GCC 专家可以帮助您。

编辑：MinGW-w64 项目提供了必要的运行时支持。查看[http://mingw-w64.sourceforge.net/](http://mingw-w64.sourceforge.net/)和[https://sourceforge.net/projects/mingw-w64/files/](https://sourceforge.net/projects/mingw-w64/files/)。另外，正如 0xC0000022L 指出的那样，您需要下载 POSIX 线程版本（我上次没有提到它）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-11-28T21:26:30.093

对 MINGW 使用 POSIX 线程模型：

```
$ sudo update-alternatives --config i686-w64-mingw32-gcc
<choose i686-w64-mingw32-gcc-posix from the list>

$ sudo update-alternatives --config i686-w64-mingw32-g++
<choose i686-w64-mingw32-g++-posix from the list>

$ sudo update-alternatives --config x86_64-w64-mingw32-gcc
<choose x86_64-w64-mingw32-gcc-posix from the list>

$ sudo update-alternatives --config x86_64-w64-mingw32-g++
<choose x86_64-w64-mingw32-g++-posix from the list> 
```

另请参阅：[mingw-w64 线程：posix 与 win32](https://stackoverflow.com/questions/17242516/mingw-w64-threads-posix-vs-win32)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-06-15T15:47:28.283

这现已包含在 MingW（版本 2013072300）中。要包含它，您必须在 MinGW 安装管理器中选择 pthreads 包。

![MingW 安装管理器中的 Pthreads 包选项](../Images/f17f3861c9ebcaa349b2bbac78927b40.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-12-23T00:44:03.097

至少，Mingw-builds 工具链的“线程模型：win32”不支持互斥锁。您必须选择任何带有“线程模型：posix”的工具链。在尝试了几个版本和修订版（架构 i686 和 x86_64）之后，我只发现 x86_64-4.9.2-posix-seh-rt_v3-rev1 中的支持是线程模型，IMO，决定因素。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-11-18T16:47:35.457

我在使用 MingW-W64 7.2.0 时遇到了同样的问题。[我从mingw-64 下载页面](https://www.mingw-w64.org/downloads/#mingw-builds)测试了几个不同的 Windows 版本，发现[MinGW-W64 GCC-8.1.0](https://versaweb.dl.sourceforge.net/project/mingw-w64/Toolchains%20targetting%20Win32/Personal%20Builds/mingw-builds/installer/mingw-w64-install.exe)支持`mutex`并包含该`pthread`库。安装时，我选择了以下选项：

*   x86_64
*   正则表达式
*   嘘

我基于`pthreads`now 的多线程代码可以在 Windows 和 Linux 上干净地编译和运行，无需任何更改。

[![在 Windows 8.1 上安装 MingW 版本](../Images/18d9c701758eca144823f312d3ddf12a.png)](https://i.stack.imgur.com/QeW9U.png)

这个版本比我使用的 7.3.0 版本更精简，因为它没有 CygWin 环境或包管理器。我也复制`mingw32-make.exe`到了，`make.exe`所以我的 Makefile 不需要修改。安装程序会在 Windows 开始菜单中创建一个“运行终端”链接。

[![使用 MingW 在 Windows 8.1 上构建和运行 pthread 应用程序](../Images/008db1a48d41533733894167b3493ab7.png)](https://i.stack.imgur.com/hrz07.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-04T04:44:10.340

我在 gcc4.7.7 上遇到了同样的错误。

添加“-std=c++0x”后，修复。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-26T01:44:31.570

我的 gcc 版本是 5.4，我在添加 #include 并在我的 CmakeLists.txt 中添加 -std=c++11 时解决了这个问题，如下所示：

```
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall  -O3 -march=native -std=c++11") 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-28T06:25:48.167

我通过以下步骤修复了它：

*   项目 > 构建选项...
*   默认选择的编译器：GNU GCC Compiler
*   在“编译器设置/编译器标志”选项卡上，选中“让 g++ 遵循 C++11 ISO C++ 语言标准 [-std=c++11]”选项

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-06-03T08:14:17.097

我不知道它是否适用于所有人，但以其他方式你只需要更新你的ndk。我正在使用 ndk-r11c，它运行良好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-13T19:41:00.980

我安装了 Cygwin 而不是 WinGW。youtube 上的说明 [https://www.youtube.com/watch?v=DAlS4hF_PbY&t=245s](https://www.youtube.com/watch?v=DAlS4hF_PbY&t=245s)

* * *

## 回答 #11

> 赞同：-8
> 
> 时间：2013-07-03T05:43:52.163

标准线程库的许多类都可以替换为 boost 类。`mutex`一个非常简单的解决方法是用几行更改整个标准文件。

```
#include <boost/thread.hpp>

namespace std
{
   using boost::mutex;
   using boost::recursive_mutex;
   using boost::lock_guard;
   using boost::condition_variable;
   using boost::unique_lock;
   using boost::thread;
} 
```

并且不要忘记链接到 boost 线程库。

# wpf - WPF ListBox：绑定到 ObservableCollection

> ID：14191567
> 
> 赞同：1
> 
> 时间：2013-01-07T07:21:39.183
> 
> 标签：wpf, binding, listbox, observablecollection

我在运行时将我的 ListBox 绑定到 ObservableCollection。单击按钮后，我的集合中的一个项目被修改，但相应的 ListBox 项目不会相应地更新自身。我已经浏览了几篇类似的 SO 文章和其他帮助材料，似乎我正在做他们要求的一切，但没有运气。一切似乎都正确加载和绑定，但是当我更改集合中某个项目的“IsLoading”属性时，绑定到 IsLoading 属性的网格的可见性（请参阅下面的 DataTemplate）不会改变。

以下是我的列表框 XAML：

```
 <ListBox Name="lstItems">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Name="ListBoxGrid">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="120"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>
                        <CheckBox Grid.Column="0" IsChecked="{Binding IsSelected}" />
                        <Image Grid.Column="1" Width="50" Stretch="Uniform" Source="{Binding Image}" />
                        <TextBlock Grid.Column="2" Text="{Binding Path=ImageFilePath}" />
                        <Grid Grid.Column="3" Visibility="{Binding IsLoading, NotifyOnTargetUpdated=True, NotifyOnSourceUpdated=True, Mode=TwoWay, BindsDirectlyToSource=True, Converter={StaticResource BooleanToVisibilityConverter1}}">
                            <my:LoadingAnimation x:Name="SendAnimation" VerticalAlignment="Center" HorizontalAlignment="Center" />
                        </Grid>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

这是我的BO：

```
public class Order : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public bool IsSelected { get; set; }
    public string ImageFilePath { get; set; }
    public ImageSource Image { get; set; }

    private bool mIsSending = false;
    public bool IsSending
    {
        get { return mIsSending; }
        set
        {
            mIsSending = value;

            if (PropertyChanged != null)
                PropertyChanged(null, new PropertyChangedEventArgs("IsSending"));
        }
    }
} 
```

这就是我创建集合并绑定它的方式：

```
 ObservableCollection<Order> mOrders = new ObservableCollection<Order>();

    public MainWindow()
    {
        InitializeComponent();

        lstItems.ItemsSource = mOrders;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:30:41.657

没关系。有时是您花费数小时挖掘问题，最后感到沮丧，将其发布在 SO 上，接下来的 2 分钟您自己解决了问题。对于任何未来的读者来说，唯一的问题是我正在发送`null`事件`PropertyChanged`。一旦我将其更改为`this`，事情就开始像魅力一样发挥作用。

# node.js - 尝试添加文件时出现快速错误

> ID：14191576
> 
> 赞同：0
> 
> 时间：2013-01-07T07:22:13.213
> 
> 标签：node.js, express

我有

```
var users1 = require('./users'); 
```

当我尝试使用此行编译文件时：我收到错误：

```
undefined:2
    ∩┐╜tobi∩┐╜: {
    ^

    SyntaxError: Unexpected token ∩┐╜
        at Object.parse (native)
        at Object..json (module.js:471:25)
        at Module.load (module.js:353:31)
        at Function._load (module.js:311:12)
        at Module.require (module.js:359:17)
        at require (module.js:375:17)
        at Object.<anonymous> (C:\node\XXXXXXX)
        at Module._compile (module.js:446:26)
        at Object..js (module.js:464:10)
        at Module.load (module.js:353:31) 
```

我真的不明白那条线的问题是什么。它是一个带有 json 主体的文件名 users.jason

user.json 的内容是：

```
{
    “tobi”: {
        “password”: “xxxxxx”
    }
} 
```

它应该是.json（或）json吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:11:19.610

# java - 多人java游戏使用applet查询？

> ID：14191582
> 
> 赞同：0
> 
> 时间：2013-01-07T07:22:28.983
> 
> 标签：java, applet, hosting, multiplayer

我是 java 游戏编程的新手，直到现在我还在使用 jquery 和 html5 构建游戏。所以我只想知道是否可以**使用 java 构建多人在线游戏**，我可以在浏览器中运行**而无需使用任何 java 托管**。我已经购买了一个托管计划，但它不为 java 应用程序提供托管。我特别需要一些关于如何在线发布它的信息。如果有任何教程，请提供链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:29:17.420

您可以创建一个基于 Java 的小程序游戏，无需特定于 Java 的主机即可运行。

从服务器的角度来看，Java 小程序只是另一个文件，它按需提供给客户端 Web 浏览器。

不过，您必须考虑如何处理多人游戏的服务器部分。大多数多人游戏都有一个大型服务器组件来处理通信、更新游戏状态等。如果你想用 Java 编写这些部分，你需要能够在服务器上运行 Java 虚拟机。

还要注意，多人游戏编程很难，Java 或其他。我建议您在开始任何过于雄心勃勃的事情之前，先熟悉编写小型单人 Java 游戏。

# .net - 如何在服务器上拦截和处理传入的电子邮件？

> ID：14191583
> 
> 赞同：0
> 
> 时间：2013-01-07T07:22:33.840
> 
> 标签：.net, email

我需要实现一个像 Basecamp 正在使用的电子邮件到消息解决方案。我已经搜索并找到了一些建议，例如在电子邮件的主题或正文中发送一个唯一的 ID，然后通过这个唯一的 ID 阅读邮箱和过滤电子邮件。它可以工作，但客户希望它与 BaseCamp 完全一样。

所以请建议我可以从哪里开始，或者我可以使用任何第三方.Net组件。

一个第三方组件，可以在 Pop3 或 IMAP 之前拦截服务器上的传入电子邮件并将它们保存在自定义数据库中。

电子邮件不需要进入邮箱我只是希望它添加到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:48:36.160

我在谷歌搜索很多时找到了解决方案。

有一个网站 www.mailgun.com 提供了我需要的相同功能。

我已经根据我的需要测试了他们的服务及其工作。

谢谢

# c++ - 如何在 SDL (C++) 中绘制正在进行的图像计算？

> ID：14191584
> 
> 赞同：1
> 
> 时间：2013-01-07T07:22:34.713
> 
> 标签：c++, sdl

我有一个计算基本 Julia 分形的函数。它工作正常，我可以在 SDL 窗口中显示它。它按我的预期工作。但是，我希望能够在创建 Julia 分形时看到它。

分形以简单的 forx,fory 方式计算。所以它不是递归函数。在循环结束时，我为像素着色并绘制 Julia 描述范围内的像素。像素绘图写入主 Sdl 表面 *screen。

有没有办法在 SDL 应用程序中显示正在进行的计算？我希望能够看到图像的进展。我意识到这可能需要不同类型的编程方法。我只是想弄清楚我的选择是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:34:54.203

最简单的方法是在计算的每个像素或每一行之后显示图像。如果自上次更新以来的时间大于给定的最小值（例如 1/60.0 秒），您可以选择更新您的图像

一个更复杂的解决方案是将渲染和计算分离到单独的线程中。这提供了各种优势：实际计算不与渲染部分混合，显示（和其他 UI 相关功能）不依赖于计算速度。

# c - 反向存储价值？

> ID：14191588
> 
> 赞同：0
> 
> 时间：2013-01-07T07:22:51.733
> 
> 标签：c, pointers

我编写了使用指针连接两个字符串的函数。和 strcat(s,t) 一样，所以在 s 的末尾会加上 t..

```
 int main ()
{
  char b[] = "Hello";
  char b1[] = "world";
  string_cat(b,b1);
  printf("Concatenated string is %s\n",b);
  return 0;
}
int string_cat(char *s, char *d)
{
  while(*++s != '\0')
    ;
  *s++ = ' ';
  while((*s++ = *d++)!='\0');  // Concatenation
  printf("S is %c\n",s[-2]);   // Just to see the values
} 
```

串联工作正常，但是当我想查看元素的存储方式时，所有元素都以负方向存储，我的意思是 s[-2] 等于 'd'， s[-3] 等于 'l' 。 .它们是这样存储的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T07:25:42.470

首先`b`是太小而无法容纳连接的字符串。它只有足够的空间来容纳`Hello\0`，所以你正在做的事情是不确定的。其次，看这一行：

```
while((*s++ = *d++)!='\0');
        ^^^ 
```

你在进步`s`，因为你在增加它。每次增加它时，您应该想象它指向一个元素。当你走到尽头时，`s`不是它开始的样子。所以`s[-2]`实际上比原来的`s`（`b`在你的情况下）更远。

* * *

### 编辑

> 那么，如何声明它，使其动态调整为新的大小？

如果可能的话，让它调整到合适的尺寸是很困难的。你可以做什么：

*   像这样声明它：`char b[LENGTH] = "Hello"`;
*   传递另一个参数来`string_cat`指定大小

经过多次迭代，你最终会得到类似`strncpy`/的东西`memcpy`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T07:25:10.603

它不是以负方向存储，而是因为您在连接时递增指针（`*s++`在 while 循环中`while((*s++ = *d++)!='\0');`），所以在结尾处`s`指向字符串的结尾。您可能需要保存指针的副本以确保不会丢失字符串的开头（如果需要）`string_cat`

您的代码还有其他可能导致堆栈缓冲区溢出的潜在问题。

```
char b[] = "Hello"; 
```

是一个固定大小的缓冲区。连接最终会导致缓冲区溢出，从而导致 UB 并最终可能崩溃`b1`。`b`

# python - 如何在页面上找到电子邮件？

> ID：14191589
> 
> 赞同：-1
> 
> 时间：2013-01-07T07:22:55.910
> 
> 标签：python, google-app-engine, email

我使用以下代码在下载的页面上查找电子邮件：

```
page = urlfetch.Fetch(url = 'http://www.toyotabc.ru/vacancy/', deadline = 60)
if page.status_code == 200 and page.content:
    regexp = re.compile(
        r"(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*"
        r'|^"([\001-\010\013\014\016-\037!#-\[\]-\177]|\\[\001-011\013\014\016-\177])*"'
        r')@(?:[A-Z0-9-]+\.)+[A-Z]{2,6}$', re.IGNORECASE)
    email = regexp.findall(page.content)
    if email:
        email = email[0]
        self.response.out.write('e-mail found: %s<br>' % (email)) 
```

但是，当代码中给出的示例页面上存在电子邮件时，它什么也不返回（ `email`is ）。`False`我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T07:54:32.760

我不知道你为什么从一个充满控制字符和其他东西的表达式开始，甚至不知道那个表达式应该是什么意思。也许如果你告诉我们你从哪里得到它，或者解释它，我们可以帮助你调试它。但除此之外，扔掉它并给你一个更简单的东西要简单得多。

您说您是从[这个答案](https://stackoverflow.com/questions/2640414/python-regexp-to-match-e-mail-against-domain-names/2640791#2640791)中获取的，但是该答案中的字符串比您给出的字符串长 29 个字符，因此显然您复制粘贴错误，或者事后以某种方式对其进行了修改。无论如何，根据问题，该正则表达式旨在针对域验证电子邮件地址，而不是查找所有电子邮件地址。它似乎也可以处理引用的（甚至可能是编码的？）名称。它以开头`^`和结尾的事实`$`清楚地表明它不能用于查找字符串中间的地址，而只能用于匹配整个字符串。所以，这不是你想要的。您不能只从一个问题中选择一个正则表达式，并希望它适用于一个模糊相关的问题，而不了解它在做什么。

您抱怨 RocketDonkey 不适用于带有点的电子邮件。这是真的，它也不处理地址中有效的其他一些字符。您可以阅读适当的 RFC，但在线快速搜索电子邮件地址的预制正则表达式要快得多。

您可能希望看到[这个问题](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)，其中包括指向完全符合 RFC-822 的正则表达式的链接，并解释了如何在需要时获得符合 RFC-5322 的正则表达式。

但是根据您的用途，您可能想要更简单的东西，可以对其进行调整以匹配无效但工作的地址，或不匹配有效但无用的地址，或匹配本机 Unicode 而不是 IDN 损坏的 Unicode，或…</p>

这是我在 Google 搜索中找到的第一个：

```
regexp=re.compile(r'[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,6}', re.IGNORECASE) 
```

这是对的吗？乍一看，它似乎应该处理所有且仅使用 DNS 名称的有效电子邮件地址，但这并不是所有有效地址。也许您需要处理点 IP 邮件域或互联网前电子邮件地址，或者您希望在某些方面更宽松或在其他方面更严格，或其他任何方式。如果是这样，你必须解释你到底想要什么。但是您应该可以自己从这里开始：在您的测试用例上尝试一下，然后看看。如果它不正确，它很容易阅读，并且应该很容易修改。

# java - 映射时休眠中的异常构造服务

> ID：14191595
> 
> 赞同：0
> 
> 时间：2013-01-07T07:24:03.763
> 
> 标签：java, hibernate, tapestry

当我使用映射的两个实体运行应用程序时出现此异常

```
Exception constructing service 'ValueEncoderSource': Error invoking service contribution    method
 org.apache.tapestry5.hibernate.HibernateModule.contributeValueEncoderSource(MappedConfiguration, boolean, HibernateSessionSource, Session, TypeCoercer, PropertyAccess, LoggerSource):
Exception constructing service 'HibernateSessionSource': Error invoking constructor public org.apache.tapestry5.internal.hibernate.HibernateSessionSourceImpl 
```

我看到很少有人建议它可能是不支持彼此的休眠/挂毯版本，但让我感到困惑的是，当我删除实体之间的映射时它工作得很好。以防万一，我从这些依赖项中获得了挂毯和休眠的发布版本

```
<dependency>
        <groupId>org.apache.tapestry</groupId>
        <artifactId>tapestry-core</artifactId>
        <version>${tapestry-release-version}</version>
    </dependency>
<dependency>
        <groupId>org.apache.tapestry</groupId>
        <artifactId>tapestry-hibernate</artifactId>
        <version>${tapestry-release-version}</version>
    </dependency> 
```

有没有人对可能导致此问题的原因以及解决方法提出建议？如果您需要任何进一步的信息，请告诉我，我会很快回复，因为我需要尽快完成此应用程序。

编辑：这是完整的[跟踪](http://pastebin.com/vbjFq3YZ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:46:18.730

您还没有附加完整的堆栈跟踪，所以我所能做的就是猜测。如果您将 Hibernate 4+ 与 Tapestry 一起使用，它将无法工作，因为 Tapestry 仍然使用 Hibernate 3.6+。您可以使用 Hibernate 3.6+，也可以从仅更改 build.gradle/pom.xml 文件的源代码构建 Tapestry-hibernate 和 Tapestry-hibernate-core。

# xml - 如何使用 go 创建 xml 的 CDATA 节点？

> ID：14191596
> 
> 赞同：14
> 
> 时间：2013-01-07T07:24:06.853
> 
> 标签：xml, go, cdata

我有以下结构：

```
type XMLProduct struct {
    XMLName          xml.Name `xml:"row"`
    ProductId        string   `xml:"product_id"`
    ProductName      string   `xml:"product_name"`
    OriginalPrice    string   `xml:"original_price"`
    BargainPrice     string   `xml:"bargain_price"`
    TotalReviewCount int      `xml:"total_review_count"`
    AverageScore     float64  `xml:"average_score"`
} 
```

我使用 对其`encoding/xml`进行编码，然后将其显示在网页上。

该`ProductName`字段需要用`<![CDATA[]]`. 但是如果我把它写成`<![CDATA[ + p.ProductName + ]]>`，`<`and`>`将被翻译成`&lt;`and `&gt;`。

我怎样才能`CDATA`以最低的成本创建？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-02-05T20:24:07.937

@spirit-zhang：从 Go 1.6 开始，您现在可以使用`,cdata`标签：

```
package main

import (
    "fmt"
    "encoding/xml"
)

type RootElement struct {
    XMLName xml.Name `xml:"root"`
    Summary *Summary `xml:"summary"`
}

type Summary struct {
    XMLName xml.Name `xml:"summary"`
    Text    string   `xml:",cdata"`
}

func main() {

    cdata := `<a href="http://example.org">My Example Website</a>`
    v := RootElement{
        Summary: &Summary{
            Text: cdata,
        },
    }

    b, err := xml.MarshalIndent(v, "", "  ")
    if err != nil {
        fmt.Println("oopsie:", err)
        return
    }
    fmt.Println(string(b))
} 
```

输出：

```
<root>
  <summary><![CDATA[<a href="http://example.org">My Example Website</a>]]></summary>
</root> 
```

游乐场： https: [//play.golang.org/p/xRn6fe0ilj](https://play.golang.org/p/xRn6fe0ilj)

规则基本上是：1）它必须是`,cdata`，你不能指定节点名称和2）使用`xml.Name`你想要的节点命名。

这就是如今 Go 1.6+ 和 XML 的大多数自定义内容的工作方式（带有 的嵌入式结构`xml.Name`）。

* * *

编辑：添加`xml:"summary"`到`RootElement`结构中，因此您也可以`Unmarshal`将 xml 反向返回到结构（需要在两个地方都设置）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-10-27T18:22:15.880

我不确定在哪个版本的 go 中可以使用 innerxml 标记，但它允许您包含不会被转义的数据：

代码：

```
package main

import (
    "encoding/xml"
    "os"
)

type SomeXML struct {
    Unescaped CharData
    Escaped   string
}

type CharData struct {
    Text []byte `xml:",innerxml"`
}

func NewCharData(s string) CharData {
    return CharData{[]byte("<![CDATA[" + s + "]]>")}
}

func main() {
    var s SomeXML
    s.Unescaped = NewCharData("http://www.example.com/?param1=foo&param2=bar")
    s.Escaped = "http://www.example.com/?param1=foo&param2=bar"
    data, _ := xml.MarshalIndent(s, "", "\t")
    os.Stdout.Write(data)
} 
```

输出：

```
<SomeXML>
    <Unescaped><![CDATA[http://www.example.com/?param1=foo&param2=bar]]></Unescaped>
    <Escaped>http://www.example.com/?param1=foo&amp;param2=bar</Escaped>
</SomeXML> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-27T19:22:32.160

带有“,cdata”符号的 CDATA。使用“Cdata”创建结构并与您的 xml 对象一起使用很方便

```
package main

import (
    "encoding/xml"
    "fmt"
)

type Person struct {
    Name    string `xml:"Name"`
    Age     int    `xml:"AGE"`
    Address Cdata  `xml:"ADDRESS"`
}

type Cdata struct {
    Value string `xml:",cdata"`
}

func main() {

    var address Cdata
    address.Value = "John's House, <House #>: 10,Universe  PIN: 00000  "

    var person Person
    person.Name = "John"
    person.Age = 12
    person.Address = address

    xml, err := xml.MarshalIndent(person, "", "  ")
    if err != nil {
        fmt.Println("oopsie:", err.Error())
        return
    }

    fmt.Println(string(xml))
} 
```

输出：

```
<Person>
  <Name>John</Name>
  <AGE>12</AGE>
  <ADDRESS><![CDATA[John's House, <House #>: 10,Universe  PIN: 00000  ]]></ADDRESS>
</Person> 
```

游乐场： https: [//play.golang.org/p/sux2_JB-hkt](https://play.golang.org/p/sux2_JB-hkt)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-07T15:28:34.877

正如@Tomalak 提到的，不支持输出 CDATA。

您可能可以编写`![CDATA[`为 xml 标记，然后从生成的 xml 中替换结束标记。这对你有用吗？它可能不是成本最低的，但最简单的。您当然可以在下面的示例中仅用 Marshal 调用替换 MarshalIndent 调用。

[http://play.golang.org/p/2-u7H85-wn](http://play.golang.org/p/2-u7H85-wn)

```
package main

import (
    "encoding/xml"
    "fmt"
    "bytes"
)

type XMLProduct struct {
    XMLName          xml.Name `xml:"row"`
    ProductId        string   `xml:"product_id"`
    ProductName      string   `xml:"![CDATA["`
    OriginalPrice    string   `xml:"original_price"`
    BargainPrice     string   `xml:"bargain_price"`
    TotalReviewCount int      `xml:"total_review_count"`
    AverageScore     float64  `xml:"average_score"`
}

func main() {
    prod := XMLProduct{
        ProductId:        "ProductId",
        ProductName:      "ProductName",
        OriginalPrice:    "OriginalPrice",
        BargainPrice:     "BargainPrice",
        TotalReviewCount: 20,
        AverageScore:     2.1}

    out, err := xml.MarshalIndent(prod, " ", "  ")
    if err != nil {
        fmt.Printf("error: %v", err)
        return
    }

    out = bytes.Replace(out, []byte("<![CDATA[>"), []byte("<![CDATA["), -1)
    out = bytes.Replace(out, []byte("</![CDATA[>"), []byte("]]>"), -1)
    fmt.Println(string(out))
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-02-02T22:20:12.830

扩展@BeMasher 的答案，您可以使用该`xml.Marshaller`界面为您完成工作。

```
package main

import (
    "encoding/xml"
    "os"
)

type SomeXML struct {
    Unescaped CharData
    Escaped   string
}

type CharData string

func (n CharData) MarshalXML(e *xml.Encoder, start xml.StartElement) error {
    return e.EncodeElement(struct{
        S string `xml:",innerxml"`
    }{
        S: "<![CDATA[" + string(n) + "]]>",
    }, start)
}

func main() {
    var s SomeXML
    s.Unescaped = "http://www.example.com/?param1=foo&param2=bar"
    s.Escaped = "http://www.example.com/?param1=foo&param2=bar"
    data, _ := xml.MarshalIndent(s, "", "\t")
    os.Stdout.Write(data)
} 
```

输出：

```
<SomeXML>
    <Unescaped><![CDATA[http://www.example.com/?param1=foo&param2=bar]]></Unescaped>
    <Escaped>http://www.example.com/?param1=foo&amp;param2=bar</Escaped>
</SomeXML> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-29T05:35:35.413

如果您使用 Go 版本 1.6 或更高版本，只需添加“cdata”标签即可。

```
type XMLProduct struct {
    XMLName          xml.Name `xml:"row"`
    ProductId        string   `xml:"product_id"`
    ProductName      string   `xml:"product_name,cdata"`
    OriginalPrice    string   `xml:"original_price"`
    BargainPrice     string   `xml:"bargain_price"`
    TotalReviewCount int      `xml:"total_review_count"`
    AverageScore     float64  `xml:"average_score"`
} 
```

# php - 移动站点仅重定向到主站点主页

> ID：14191600
> 
> 赞同：1
> 
> 时间：2013-01-07T07:24:27.953
> 
> 标签：php, redirect, mobile

从移动站点重定向后，我在保持主站点显示时遇到问题。

如果检测到移动设备，它将重定向到移动站点。移动网站上有一个“主站点”链接，点击后会带您进入主站点。由于某种原因，当您单击主站点主页上的链接时，它不会停留在主站点上，它会重定向回移动站点。

我假设 cookie 没有正确存储。

```
<?php
@include("Mobile_Detect.php");
$detect = new Mobile_Detect();
$allow_mobile = isset($_COOKIE['mobile'])? true:false;
if (isset($_GET['mobile'])) {
   if ($_GET['mobile']=='false'){
     setcookie("mobile", "");
     $allow_mobile = false;
   } else {
     setcookie("mobile", true, time() + 31536000, "/");
     $allow_mobile = true;
   }

}

if ($allow_mobile && $detect->isMobile()){
   if (!$detect->isTablet()) {
 header("Location:http://mobilesite.mobi");
   }
}

$not_mobile_cookie = isset($_COOKIE['notmobile'])? true:false;
if (isset($_GET['mobile'])) $not_mobile_cookie = $_GET['mobile'];

if ($not_mobile_cookie==false && $detect->isMobile()){
    if (!$detect->isTablet()) {
       header("Location:http://mobile.mobi");
    }
}

?> 
```

这可能很简单，但我无法弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:28:10.787

*您的问题的关键是，当您单击主站点主页上的链接时*，移动设备仍会被重定向。

您的代码正在测试一个名为 ['notmobile'] 的 cookie，它似乎没有在任何地方设置。因此总是评估为假，这就是移动用户被重定向回移动站点的原因。

在您的代码中，`mobile`GET 变量的用途尚不清楚，但认为它允许移动设备访问主站点，我已将下面的变量重命名为`allowMobile`.

假设`Mobile_Detect`运行正常，以下代码将允许移动设备在`allowMobile=true`GET 请求后停留在主站点上。这可以通过 with`allowMobile=false`请求取消。

```
@include("Mobile_Detect.php");
$detect = new Mobile_Detect();

// Do we want to allow a mobile to view the main site content?
// If there is a cookie, yes, if not no.

$allow_mobile = (isset($_COOKIE['mobile']) && $_COOKIE['mobile']) ? true : false;

// If there is a GET allowMobile string saying 'false', delete the cookie and deny access
if (isset($_GET['allowMobile']) && $_GET['allowMobile']=='false') {
     // Delete a cookie if one exists
     setcookie("mobile", "", time()-1, "/");
     $allow_mobile = false;

} elseif (isset($_GET['allowMobile'])  {
     // if there is any other value for allowMobile, set a cookie allowing mobile access
     setcookie("mobile", true, time() + 31536000, "/");
     $allow_mobile = true;
} 

// If we DO NOT allow mobile, then redirect to the mobile site

if (!$allow_mobile && $detect->isMobile() && !$detect->isTablet()){
  header("Location: http://mobilesite.mobi");
  exit();
}

// Else, display or redirect to non-mobile page here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T07:36:12.563

如果其他人有同样的问题，这似乎可行。我不确定这是否是正确的做法，但它对我来说工作正常。

非常感谢[PassKit](https://stackoverflow.com/users/1931641/passkit)的帮助，非常感谢！

```
<?php
@include("Mobile_Detect.php");
$detect = new Mobile_Detect();

$mobile_cookie = isset($_COOKIE['mobile'])? $_COOKIE['mobile'] : "";

$force_mobile = ($mobile_cookie == "true") ? true : false;

if (isset($_GET['mobile'])) {
   if ($_GET['mobile'] == 'true') { // must we force the mobile site? if ?mobile=true then FORCE THAT MOBILE
  setcookie("mobile", "true", time() + 31536000, "/");
  $force_mobile = true;
   } else { // if ?mobile=false then remove the force
 setcookie("mobile", "false");
 $force_mobile = false;
  }
}

if ($force_mobile){

   header("Location:http://mobilesite.mobi");
} else {

   if ($detect->isMobile()){

 if ($mobile_cookie == "" && !$detect->isTablet()){

   header("Location:http://mobilesite.mobi");
 }
   }
}
?> 
```

# objective-c - Objective C NSString 验证

> ID：14191604
> 
> 赞同：0
> 
> 时间：2013-01-07T07:25:04.643
> 
> 标签：objective-c, ios, xcode

我有一个`NSString`用户输入的`UITextField`值，在这里我需要验证字符串是否只包含类似的值

```
'a to z' , 'A to z' , '1 to 9'. 
```

我不想要除这些以外的任何其他字符...请帮帮我...我`NSNumberFormatter`对数字和`NSScanner`字符串都有用，但是如何一次验证两者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T07:29:49.400

制作`UITextField`委托并粘贴以下代码：-

// 在 -init、-initWithNibName:bundle: 或类似中

```
NSCharacterSet *blockedCharacters = [[[NSCharacterSet alphanumericCharacterSet] invertedSet] retain];

- (BOOL)textField:(UITextField *)field shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)characters
{
    return ([characters rangeOfCharacterFromSet:blockedCharacters].location == NSNotFound);
} 
```

// 在 -dealloc

```
[blockedCharacters release]; 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:43:57.650

你可以使用`NSRegularExpression`这样的：

```
 NSString *string1 = @"abc123";
    NSString *string2 = @"!abc123";
    NSError *error = NULL;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"[^a-z0-9]" options:NSRegularExpressionCaseInsensitive error:&error];

    NSUInteger numberOfMatches = [regex numberOfMatchesInString:string1 options:0 range:NSMakeRange(0, [string1 length])];
    NSLog(@"string 1 matches: %ld", numberOfMatches);

    numberOfMatches = [regex numberOfMatchesInString:string2 options:0 range:NSMakeRange(0, [string1 length])];
    NSLog(@"string 2 matches: %ld", numberOfMatches); 
```

并更改图案`@"[^a-z0-9]"`以适合您要检查的字符。表示“`^`不在此集合中”，因此如果找到任何匹配项，则该字段应验证失败。

# .htaccess - `.htaccess` 文件应该放在哪里？

> ID：14191607
> 
> 赞同：4
> 
> 时间：2013-01-07T07:25:10.637
> 
> 标签：.htaccess

我注意到`.htaccess`我的网站服务器上有两个文件，一个在根文件夹中，一个在`www`文件夹中。哪个是活动的，我应该删除哪个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T07:29:08.533

您将 .htaccess 放在要更改其行为的文件夹中。这也会影响所有子文件夹的行为。您可能希望一个或多个子文件夹具有不同的行为，在这种情况下，您为它们提供自己的 .htaccess 文件并覆盖不从父文件夹继承的设置。

# android - 安卓谷歌地图错误

> ID：14191618
> 
> 赞同：0
> 
> 时间：2013-01-07T07:26:12.047
> 
> 标签：android, google-maps

目前，我正在使用 google map api V2 通过使用**"com.google.android.gms.maps.MapView"**将地图显示到我的应用程序中。我的问题是，当特定设备没有安装“谷歌播放服务”时，**“获取谷歌播放服务”**按钮将自动显示“MapView”。但是，当我单击该按钮时，应用程序被强制关闭，并出现错误**“找不到处理 Intent 的活动{act=android.intent.action.VIEW dat=http://play.google.com/store/apps/details?id= com.google.android.gms}”**提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:33:55.173

试试这个代码

```
try{
     put your code here to open Google Play services
   }catch (ActivityNotFoundException e) {
      show some text here
    } 
```

# mysql - 如何为我的给定条件创建一个 sql 查询？

> ID：14191621
> 
> 赞同：1
> 
> 时间：2013-01-07T07:26:18.633
> 
> 标签：mysql, sql

我有一张名为`task_assignment`.
它有以下 6 个字段，命名为：

```
testId,quesId,evaluatorId,studId and marks 
```

实际上，该表用于存储每个测试的分数，包括每个学生的每个评估者的分数（按问题 ID）。

我有 testId=1, quesId=Q1 和 studId=S1 作为输入。所以，我想在选择查询中获得以下信息。即，`Both evaluators(E1,E2)`给定输入的标记。

sql 查询不会为此编写超过一行...我希望查询输出为：20,15 在一行中。

请指导我摆脱这个问题......

![在此处输入图像描述](../Images/1067cf63a31f4cc8914e58816646fd44.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T07:48:57.823

我认为您将无法获得所需的输出`20, 15`，因为只有一条记录满足您的标准`testId = 1, quesId = Q1, studId = S1`。

但要回答你的问题，这是我的问题：

```
SELECT GROUP_CONCAT(marks)
    FROM task_assignment
    WHERE testId = 1
        AND quesId = 'Q1'
        AND studId = 'S1'; 
```

我已经在[SQL Fiddle](http://sqlfiddle.com/#!2/c173a/1)中尝试过。

**编辑 1**

如果要在`C#`代码中解析查询的输出以将它们存储在单独的变量中，可以使用以下`Split`函数：

```
string marks = "20, 15"; //Suppose that this value came from database

int mark1 = Convert.ToInt32(marks.Split(',')[0]);
int mark2 = Convert.ToInt32(marks.Split(',')[1]); 
```

根据`marks`变量的值，代码仍然容易出错，只需确保您已经验证了该值。

这可能与问题无关，但仍然可以帮助您完成任务，这就是我的答案。

# php - 使用 preg_match 并在图像 SRC 处停止

> ID：14191622
> 
> 赞同：-2
> 
> 时间：2013-01-07T07:26:22.050
> 
> 标签：php, preg-match

所以我正在使用该`preg_match()`函数来提取图像的 SRC 文件名，并且该部分运行良好。

但问题是它并没有停在 src 字段的右引号处。它继续在图像标签中包含“一些”其他内容，但随后就停止了。我真的只想要 src URL。

```
preg_match('/<img.+src=[\'"](?P<src>.+)[\'"].*>/i', $rss, $image);
echo $image['src']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:29:22.743

此外，我不建议像这样解析 HTML，但这对你有用；

```
$str = '<img src="to/file/img.png" width="100">';
preg_match('~<img.*?src=[\'"]*(?P<src>[^\s\'"]*)~i', $str, $match);
print_r($match); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:30:59.053

试试这个，这可能有效

```
$regex = '/src="(.+?)"/';
then preg_match($regex,$rss,$image); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T07:33:27.133

我正在这样做；preg_match('#src. *=.* ".*"',$stringToMatch,$result);

# java - InvocationTargetException - 使用 httpClient 从 java Soap webservice 调用 Rest 服务

> ID：14191624
> 
> 赞同：1
> 
> 时间：2013-01-07T07:26:32.800
> 
> 标签：java, web-services, rest, soap

我在我的服务器中创建了肥皂网络服务。我想使用带有“POST”方法的httpClient从我的soap服务中调用其他服务（在另一台服务器中）。我使用了“httpclient-4.2.2.jar”和“httpcore-4.2.2.jar”。

代码片段：

```
 public class User {
        public static String addUser(String userEmail, String password) {
            final String uri = "http://www.example.com/";
            String requestParams = String.format("{\"userEmail\": \"%s\", \"password\": \"%s\"}", userEmail, password);

            final HttpClient client = new DefaultHttpClient();
            final HttpPost postMethod = new HttpPost(uri);
            postMethod.setEntity(new StringEntity(requestParams, "utf-8"));

            try {
               final HttpResponse response = client.execute(postMethod);
               final String responseData = EntityUtils.toString(response.getEntity(), "utf-8");
               System.out.println(responseData);
            } catch(final Exception e) {
                e.printStackTrace();
            }
          return responseData;
        }
    } 
```

当我使用以下代码从另一个类调用此方法时。

```
 User.addUser(userEmail, password); 
```

堆栈跟踪：

```
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:269)
    at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:170)
    at org.apache.struts.chain.commands.servlet.ExecuteAction.execute(ExecuteAction.java:58)
    at org.apache.struts.chain.commands.AbstractExecuteAction.execute(AbstractExecuteAction.java:67)
    at org.apache.struts.chain.commands.ActionCommandBase.execute(ActionCommandBase.java:51)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
    at org.apache.commons.chain.generic.LookupCommand.execute(LookupCommand.java:305)
    at org.apache.commons.chain.impl.ChainBase.execute(ChainBase.java:191)
    at org.apache.struts.chain.ComposableRequestProcessor.process(ComposableRequestProcessor.java:283)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1913)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:449)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:693)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:806)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.geronimo.tomcat.valve.DefaultSubjectValve.invoke(DefaultSubjectValve.java:56)
    at org.apache.geronimo.tomcat.GeronimoStandardContext$SystemMethodValve.invoke(GeronimoStandardContext.java:406)
    at org.apache.geronimo.tomcat.valve.GeronimoBeforeAfterValve.invoke(GeronimoBeforeAfterValve.java:47)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:555)
    at org.apache.geronimo.tomcat.valve.ThreadCleanerValve.invoke(ThreadCleanerValve.java:40)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.VerifyError: Cannot inherit from final class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at org.apache.geronimo.kernel.classloader.JarFileClassLoader.access$200(JarFileClassLoader.java:52)
    at org.apache.geronimo.kernel.classloader.JarFileClassLoader$6.run(JarFileClassLoader.java:308)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.apache.geronimo.kernel.classloader.JarFileClassLoader.findClass(JarFileClassLoader.java:260)
    at org.apache.geronimo.kernel.config.MultiParentClassLoader.loadOptimizedClass(MultiParentClassLoader.java:441)
    at org.apache.geronimo.kernel.config.MultiParentClassLoader.loadClass(MultiParentClassLoader.java:281)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.apache.http.impl.client.DefaultHttpClient.createHttpParams(DefaultHttpClient.java:157)
    at org.apache.http.impl.client.AbstractHttpClient.getParams(AbstractHttpClient.java:448)
    at org.apache.http.impl.client.AbstractHttpClient.createClientConnectionManager(AbstractHttpClient.java:309)
    at org.apache.http.impl.client.AbstractHttpClient.getConnectionManager(AbstractHttpClient.java:466)
    at org.apache.http.impl.client.AbstractHttpClient.createHttpContext(AbstractHttpClient.java:286)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:851)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784)
    at com.test.User.addUser(User.java:18)
    ... 34 more 
```

它抛出“InvocationTargetException”。可能是什么问题？你能给出你的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T08:47:50.397

问题就在堆栈跟踪中：

```
Caused by: java.lang.VerifyError: Cannot inherit from final class 
```

如果你仔细观察下面的行，你可以看到哪里出错了（提示`DefaultHttpClient.createHttpParams(DefaultHttpClient.java:157)`：）

切入正题：松开、、和上的`final`修饰符。无论如何，它们都是不必要和/或错误使用的。`uri``client``postMethod``response``responseData`

另一方面，您*可以*将`final`修饰符添加到方法的形式参数`userEmail`和`password`，但[请先阅读`final`](https://stackoverflow.com/questions/137868/using-final-modifier-whenever-applicable-in-java)。

干杯，

# php - 使用 jquery 进行页面重定向

> ID：14191625
> 
> 赞同：-1
> 
> 时间：2013-01-07T07:26:34.847
> 
> 标签：php, jquery, mysql

我正在使用 jquery 进行登录，它工作正常，但如果成功 ==1，我必须在 index.php 页面上重定向登录页面，否则它将显示错误。但它不会在索引页面上重定向并保持在同一登录页面上。任何人都可以帮助我。这是我的代码

```
<script src="http://code.jquery.com/jquery-1.7.min.js"></script>
<script type="text/javascript">
$(document).ready(function() { 
            $('#form_login').submit(function() { 

                var uname= $('#username').val(); alert(uname);
                var password=$('#password').val(); alert(password);
                $.ajax({
                    type: "POST",
                    url: "http://localhost/shop/admin/match_login.php",
                    data: {uname: uname, password:password},
                    success:function(data){
                    if(data==1){ alert("right");
                    var url='http://localhost/shop/admin/index.php';
                    $(location).attr('href',url);

                    }else{ alert("wrong");
                    $('#login-msg').html("Wrong User Name/Password");

                    }

                    } //call function after success
                });
                    return false;

            });
        }); 
</script>

session_start();
require_once("../utils/config.php");
require_once("../utils/functions.php");
require_once("../utils/dbClass.php");
require_once("../utils/database.php");
 $objNEWDB = new NEWMySQL;
 $host= $_SERVER['HTTP_HOST'];
 $url=$_SERVER['SCRIPT_URI'];
 $hostnew=substr($url,0,-16);
 $user_name= $_POST['uname'];
 $password= $_POST['password']; 
 $SQL = "Select * from admin where UserName ='".$user_name."' and Password='".$password."'";
 $rsUser = $objNEWDB->select($SQL); //print_r($rsUser);
 //$res=mysql_fetch_array($rsUser); 
 if(sizeof($rsUser)==1 && $rsUser[0]['Status']=='1')
 {
    $_SESSION["session_admID"] = $rsUser[0]['AdminID']; 

 }
    echo $size= sizeof($rsUser); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:29:39.333

尝试

`document.location = url;`.

或者

`document.location.href = url;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:35:01.820

改变

```
$(location).attr('href',url); 
```

至

```
location = url 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T08:05:02.097

你可以试试

> if(data==1) { window.location = "页面网址"; }

或者

> if(data==1) {window.location.href = "页面网址"; }

还要检查 if 循环是否满足

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T07:31:25.280

```
// similar behavior as an HTTP redirect
window.location.replace("http://localhost/shop/admin/index.php");

// similar behavior as clicking on a link
window.location.href = "http://localhost/shop/admin/index.php"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T07:30:10.873

你可以简单地使用`window.location = "http://localhost/shop/admin/index.php";`

# iphone - UITableView sectionIndexTitlesForTableView 和 scrollingIndicator

> ID：14191628
> 
> 赞同：0
> 
> 时间：2013-01-07T07:26:50.917
> 
> 标签：iphone, objective-c, ios

当我`sectionIndexTitlesForTableView`返回一些东西（不是零）时，我的 UITableView 的默认 scrollView 滚动指示器消失了。我该如何展示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:32:14.200

你可以打电话

```
[self.tableView flashScrollIndicators]; 
```

他们将闪烁以向用户显示他们在那里。这通常放在`viewDidAppear`.

它实际上闪烁`scroll indicators`.

# jquery - jQuery 动画淡入淡出

> ID：14191632
> 
> 赞同：0
> 
> 时间：2013-01-07T07:27:02.767
> 
> 标签：jquery, jquery-animate

我有 12 张带图片的幻灯片。我想使用 jQuery 动画或淡入/淡出效果。这是我的代码：

```
$('#Li4').click(function () {
  $('#bnrImg').fadein(1000);
  $('#chnlLogo').fadein(1000);
  $('#mainBanner').css('backgroundColor', '#FBB03E');
  $('#bnrImg').attr('src', 'images/cBanners/bnr_neuro.png');
  $('#chnlLogo').attr('src', 'images/images.png');
  $('#chnlLink').attr('href', 'http://link.tv');
  $('#bnrImg').fadeout(1000);
  $('#chnlLogo').fadeout(1000);
});
$('#Li5').click(function () {
  $('#bnrImg').fadein(1000);
  $('#chnlLogo').fadein(1000);
  $('#mainBanner').css('backgroundColor', '#DB7EB4');
  $('#bnrImg').attr('src', 'images/cBanners/bnr_diabetes.png');
  $('#chnlLogo').attr('src', 'images/image.png');
  $('#chnlLink').attr('href', 'http://link.com');
  $('#bnrImg').fadeout(1000);
  $('#chnlLogo').fadeout(1000);
}); 
```

但问题是，当我从#li4 单击到#li5 时，#bnrImg 和#chnlLogo 会在我单击后执行它们的动画或淡入/淡出。我希望在单击幻灯片后具有淡出效果，然后在幻灯片更改后立即自动淡入图像。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:37:13.947

好的。Jere 是一个完整的示例代码。只需粘贴到网页并更改所有图像路径：

HTML 代码：

```
<div id="galleryContainer">
  <div id="photoShow">
    <div class="current"><img src="assets/banner/banner_one.jpg" width="900" height="324" class="gallery" /></div>
    <div><img src="assets/banner/banner_two.jpg" width="900" height="324" class="gallery" /></div>
    <div><img src="assets/banner/banner_three.jpg" width="900" height="324" class="gallery" /></div>
    <div><img src="assets/banner/banner_four.jpg" width="900" height="324" class="gallery" /></div>
    <div><img src="assets/banner/banner_five.jpg" width="900" height="324" class="gallery" /></div>
    <div><img src="assets/banner/banner_six.jpg" width="900" height="324" class="gallery" /></div>
  </div>
</div> 
```

CSS 代码：

```
#galleryContainer {
    width:900px;
    height:330px;
    margin:0 auto;
    position:relative;
    padding-bottom:10px;
}
#photoShow {
    position:relative;
    width:900px;
    height:324px;
    margin:0 auto;
}
#photoShow div {
    position:absolute;
    z-index: 0;
    margin-top:8px;
}
#photoShow div.previous {
    z-index: 1;
}
#photoShow div.current {
    z-index: 2;
} 
```

这是您的 jQuery 代码：

```
$(function() {
  setInterval("rotateImages()", 5000);
});
function rotateImages() {
  var curPhoto = $('#photoShow div.current');
  var nxtPhoto = curPhoto.next();
  if (nxtPhoto.length == 0)
    nxtPhoto = $('#photoShow div:first');
  curPhoto.removeClass('current').addClass('previous');
  nxtPhoto.css({ opacity: 0.0 }).addClass('current').animate({ opacity: 1.0 }, 2000,
    function() {
      curPhoto.removeClass('previous');
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:32:07.587

您可能想查看可用于淡入/淡出方法的回调函数。也许另外 stopPropagation 和 preventDefault 方法可以帮助你。

# jquery - 新标签中的jquery ui手风琴不起作用

> ID：14191635
> 
> 赞同：0
> 
> 时间：2013-01-07T07:27:07.680
> 
> 标签：jquery, dynamic, user-interface, tabs, accordion

如何让 JQuery UI 手风琴在动态添加的选项卡中工作？我希望它每次创建一个新选项卡时，都会在其中创建一个新的手风琴对象。这是一个使用 Jquery UI 站点的基本选项卡示例的代码示例，稍作修改以包含一个带有 2 个部分的手风琴。

截至目前，标签工作正常，但在新标签内，手风琴内容显示为常规 HTML，而不是手风琴 jquery 对象。

提前致谢。

```
<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Untitled 1</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link type="text/css" href="jquery-ui/css/smoothness/jquery-ui-1.8.22.custom.css" rel="stylesheet" />
<style>
#dialog label, #dialog input { display:block; }
#dialog label { margin-top: 0.5em; }
#dialog input, #dialog textarea { width: 95%; }
#tabs { margin-top: 1em; }
#tabs li .ui-icon-close { float: left; margin: 0.4em 0.2em 0 0; cursor: pointer; }
#add_tab { cursor: pointer; }
</style>
<script>
$(document).ready(function(){
   $( "#accordion" ).accordion();

   var tabTitle = $( "#tab_title" ),
        tabContent = $( "#tab_content" ),
        tabTemplate = "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>",
        tabCounter = 2;

    var tabs = $( "#tabs" ).tabs();

    // modal dialog init: custom buttons and a "close" callback reseting the form inside
    var dialog = $( "#dialog" ).dialog({
        autoOpen: false,
        modal: true,
        buttons: {
            Add: function() {
                addTab();
                $( this ).dialog( "close" );
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            form[ 0 ].reset();
        }
    });

    // addTab form: calls addTab function on submit and closes the dialog
    var form = dialog.find( "form" ).submit(function( event ) {
        addTab();
        dialog.dialog( "close" );
        event.preventDefault();
    });

    // actual addTab function: adds new tab using the input from the form above
    function addTab() {
        var label = tabTitle.val() || "Tab " + tabCounter,
            id = "tabs-" + tabCounter,
            li = $( tabTemplate.replace( /#\{href\}/g, "#" + id ).replace( /#\{label\}/g, label ) ),
            tabContentHtml = tabContent.val() || "Tab " + tabCounter + " content.";

        tabs.find( ".ui-tabs-nav" ).append( li );
        tabs.append( "<div id='" + id + "'><div id='accordion'><h3>header1</h3><div><p>PARAGRAPH1</p></div><h3>header2</h3><div><p>PARA2</p></div></div></div>" );
        tabs.tabs( "refresh" );
        tabCounter++;
    }

    // addTab button: just opens the dialog
    $( "#add_tab" )
        .button()
        .click(function() {
            dialog.dialog( "open" );
        });

    // close icon: removing the tab on click
    $( "#tabs span.ui-icon-close" ).live( "click", function() {
        var panelId = $( this ).closest( "li" ).remove().attr( "aria-controls" );
        $( "#" + panelId ).remove();
        tabs.tabs( "refresh" );
    });
});
</script>
</head>
<body>
<div id="dialog" title="Tab data">
    <form>
        <fieldset class="ui-helper-reset">
            <label for="tab_title">Title</label>
            <input type="text" name="tab_title" id="tab_title" value="" class="ui-widget-content ui-corner-all" />
            <label for="tab_content">Content</label>
            <textarea name="tab_content" id="tab_content" class="ui-widget-content ui-corner-all"></textarea>
        </fieldset>
    </form>
</div>
<button id="add_tab">Add Tab</button>
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a> <span class="ui-icon ui-icon-close">Remove Tab</span></li>
    </ul>
    <div id="tabs-1">
        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris.</p>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:29:41.393

将新选项卡附加到 DOM 后，您必须再次在新创建的元素上调用 .accordion() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:33:42.660

只需替换这一行 -

```
tabs.append( "<div id='" + id + "'><div id='accordion'>"+tabContentHtml+"</div>" ); 
```

见这里 - [http://jsfiddle.net/im4aLL/nLqmN/](http://jsfiddle.net/im4aLL/nLqmN/)

# c# - DataReader 只读取偶数行

> ID：14191636
> 
> 赞同：0
> 
> 时间：2013-01-07T07:27:10.497
> 
> 标签：c#, asp.net

我在网格视图中绑定数据库中的数据。但在数据源“CountryList”中，仅从数据读取器添加偶数行。这段代码有什么问题？

```
using (cmd)
{
    cmd.CommandType = CommandType.StoredProcedure;
    cn.Open();
    using (SqlDataReader dr = cmd.ExecuteReader())
    {
        if (dr.HasRows)
        {
            while (dr.Read())
            {
                CountryList.Add(ParseDataReader(dr));
            }

            cn.Close();
            return CountryList;

        }
    }
} 
```

Parse 方法是：

```
public static  Countries ParseDataReader(SqlDataReader dr)
    {
        Countries MyCountries = new Countries();

        dr.Read();

            if (dr["CountryID"]!=DBNull.Value )
            {
                MyCountries.CountryID = (int)dr["CountryID"];
            }
            if (dr["Code"]!=DBNull.Value)
            {
                MyCountries.Code = dr["Code"].ToString();
            }
            if (dr["Name"]!=DBNull.Value)
            {
                MyCountries.Name = dr["Name"].ToString();
            }
            if (dr["RequiresState"]!= DBNull.Value)
            {
                MyCountries.RequiresState = (bool)dr["RequiresState"];
            }
            if (dr["Order"]!=DBNull.Value)
            {
                MyCountries.Order = (decimal)dr["Order"];
            }

        return MyCountries;
    } 
```

仅供参考：我的存储过程返回正确的行数。但数据读取器仅从结果中读取偶数行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T07:53:21.677

```
public static  Countries ParseDataReader(SqlDataReader dr)
{
    Countries MyCountries = new Countries();
    //dr.Read(); // << remove this 
```

你打`dr.Read()`了两次电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:35:16.773

ParseDataReader 中有什么代码？`dr.Read()`请注意，您应该每行只调用一次，并且`while()`足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T07:38:26.633

好吧，感谢您没有显示相关代码。

显然这是错误的。如果 DR 会读取每 2 行 - 好吧，很多人会意识到这一点。

发生这种情况有两种可能的方式：

*   ParseDataaReader 进行 dr.read （因此每一行都会跳过一行）
*   存储过程不会返回您认为它返回的数据（因此您甚至不会发送您认为的所有行）。

简单的。

请验证。

* * *

更新：而且，你能阅读你发布的内容吗？ParseDataReader 方法中有一个 dr.READ 调用。所以，你转发一个，然后 ParseDataaReader 转发一个（跳过行）并解析它。

# python - 为什么在从站点包调用模块时导入模块会导致模块运行，但在本地调用时不会？

> ID：14191637
> 
> 赞同：1
> 
> 时间：2013-01-07T07:27:10.880
> 
> 标签：python, python-2.7

我以这种方式使用 distutils 在 python 中制作了一个包：

```
#! /usr/bin/env python

from distutils.core import setup

setup(name='mypackage4.py',
    version='1.0',
    description='Description',
packages=['mypackage4']
) 
```

setup.py 然后将它安装到我的 python2.7/site-packages 目录。

当我跑

```
import mypackage4 
```

它尝试运行 mypackage4 目录中的 .py 文件。该目录包含包含函数（def 命令）的 python 文件。我要做的就是使这些功能可供使用，而不是直接在导入时运行。

但是，如果我这样做

```
cd python2.7/site-packages 
```

然后进行导入，以便它在本地获取 mypackage4，它在不运行任何东西的情况下导入，所以我可以以正常方式从 python 命令行访问这些函数。

为什么python似乎在包不在本地目录时运行函数，但在包在本地目录时不运行函数？

其次，我读到了关于放置一个

```
if __name__ == '__main__':
    pass
else:
    <define functions here> 
```

我的 .py 文件中的命令以防止它们运行，但是它肯定不会运行这些函数，那么它是如何知道它们的呢？

任何帮助是极大的赞赏！

ps，（以防万一）在我的包目录中，我有一个`__init__.py`文件告诉python要导入哪些文件

```
__all__ = [
    'pyfile1',
    'pyfile2',
    'pyfile3',
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T07:35:06.943

> 该目录包含包含函数（def 命令）的 python 文件。我要做的就是使这些功能可供使用，而不是直接在导入时运行。

语句是必须运行的`def`代码，或者没有定义函数。当你导入一个模块或包时，Python*总是运行你的代码。*函数、类和全局变量/常量定义是代码，就像其他任何东西一样。

除非您编写代码来调用它们，否则不会*调用*这些函数。但是，如果您确实编写了这样的代码，它就会运行。没有特殊状态`def foo(i): print(i)`发生，但`foo(3)`没有；您的所有代码都会运行。

有时，您想编写一个可以由其他代码导入但也可以作为脚本运行的模块。（或者您可能只希望模块在作为脚本执行时运行其测试。）这就是`__main__`成语的用武之地。

你的习语有点错误——或者，更确切地说，你把一个不常见的情况放在典型的前面。通常，您会执行以下操作：

```
def foo(f):
    blahblah(f)

def bar(fname):
    with open(fname) as f:
        foo(f)

if __name__ == '__main__':
    import sys
    for arg in sys.argv[1:]:
        bar(arg) 
```

当您导入模块时，`foo`and`bar`定义会被执行，因此导入代码可以执行`qux.bar(fname)`，但`if`语句中的内容不会被执行（因为`__name__ != '__main__'`对于导入的模块）。当您将模块作为脚本运行时，这些东西*确实*会被执行（因为`__name__ == '__main__'`）。所以，你可以做`./qux.py myfile.txt`（​​或`C:\Python33\Python.exe .\qux.py myfile.txt`，或其他），它会为你解决 myfile.txt 的问题。

你很少需要`else`为`if __name__ == '__main__'`.

但很少不是从来没有。有时，您有将模块用作模块所需的定义，但不需要将其作为脚本运行。如果编译这些定义需要很长时间（例如，因为模块预先计算了 100000 个元素`dict`以加速以后的访问），那么您不希望每次运行脚本时都这样做。因此，这些定义将进入该`else`块。

# youtube-api - 如何使用 youtube api 获取 youtube 视频的共享计数？

> ID：14191638
> 
> 赞同：1
> 
> 时间：2013-01-07T07:27:13.433
> 
> 标签：youtube-api, youtube-channels

我正在使用 youtube 检索 youtube 频道上的一些数据（标题、ID、关键字、长度、发布日期……）

我想知道如何获取此频道中每个视频的分享数。我想建立一个特定频道的“前 10 名最常分享的视频”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:45:56.753

查看 YouTube 分析 API：

[https://developers.google.com/youtube/analytics/](https://developers.google.com/youtube/analytics/)

有一个用于检索共享计数的指标 ( `shares`)。使用尺寸 ( `dimensions=video&metric=shares`)。或者，如果您想检索特定视频的分享计数，请使用过滤器：`video==Zhawgd0REhA`. 有关详细信息，请参阅：

[https://developers.google.com/youtube/analytics/v1/available_reports](https://developers.google.com/youtube/analytics/v1/available_reports)

# c# - 使用 asp.NET 保存 Excel 文件时遇到问题

> ID：14191641
> 
> 赞同：1
> 
> 时间：2013-01-07T07:27:28.257
> 
> 标签：c#, asp.net, .net

我正在尝试从我的 Web 应用程序将数据表中的数据插入到 Excel 文件中。按下按钮即可填充数据表并将其插入 Excel 文件。问题是当数据正确插入并且我保存文件然后关闭它时，数据就会消失。它发生在 Excel 文档关闭时。

这是我的代码：

```
public  bool ExportDataTableToExcel(DataTable dt, string filepath)
{

    Excel.Application oXL;
    Excel.Workbook oWB;
    Excel.Worksheet oSheet;
    Excel.Range oRange;

    try
    {
        // Start Excel and get Application object. 
        oXL = new Excel.Application();

        // Set some properties 
        oXL.Visible = true;
        oXL.DisplayAlerts = false;

        // Get a new workbook. 
        oWB = oXL.Workbooks.Add(Missing.Value);

        // Get the Active sheet 
        oSheet = (Excel.Worksheet)oWB.ActiveSheet;
        oSheet.Name = "Data";

        int rowCount = 1;
        foreach (DataRow dr in dt.Rows)
        {
            rowCount += 1;
            for (int i = 1; i < dt.Columns.Count + 1; i++)
            {
                // Add the header the first time through 
                if (rowCount == 2)
                {
                    oSheet.Cells[1, 1] = "CustID";
                    oSheet.Cells[1, 2] = "Alias";
                    oSheet.Cells[1, 3] = "AdrID";
                    oSheet.Cells[1, 4] = "Truck Delivery Days";
                    oSheet.Cells[1, 5] = "Truck Delivery Hours";
                    oSheet.Cells[1, 6] = "Truck Delivery Type";
                    oSheet.Cells[1, 7] = "Plane Delivery Days";
                    oSheet.Cells[1, 8] = "Plane Delivery Hours";
                    oSheet.Cells[1, 9] = "Plane Delivery Type";
                    oSheet.Cells[1, 10] = "Other Delivery Days";
                    oSheet.Cells[1, 11] = "Other Delivery Hours";
                    oSheet.Cells[1, 12] = "Other Delivery Type";
                    oSheet.Cells[1, 13] = "Distance to Dealer";
                }
                oSheet.Cells[rowCount, i] = dr[i - 1].ToString();
            }
        }
        oRange = oSheet.Range[oSheet.Cells[1, 1],oSheet.Cells[rowCount, dt.Columns.Count]];
        oRange.EntireColumn.AutoFit();

        // Save the sheet and close 
        oSheet = null;
        oRange = null;
        oWB.SaveAs(filepath, Excel.XlFileFormat.xlWorkbookNormal,
            Missing.Value, Missing.Value, Missing.Value, Missing.Value,
            Excel.XlSaveAsAccessMode.xlExclusive,
            Missing.Value, Missing.Value, Missing.Value,
            Missing.Value, Missing.Value);
        oWB.Close(Missing.Value, Missing.Value, Missing.Value);
        oWB = null;
        oXL.Quit();
    }
    catch
    {
        throw;
    }
    finally
    {
        // Clean up 
        // NOTE: When in release mode, this does the trick 
        GC.WaitForPendingFinalizers();
        GC.Collect();
        GC.WaitForPendingFinalizers();
        GC.Collect();
    }

    return true;
} 
```

执行此行后数据消失：

```
 oWB.Close(Missing.Value, Missing.Value, Missing.Value); 
```

有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T07:30:18.067

**[MS 在服务器场景（如 ASP ...）中不支持互操作](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)。**

有许多选项可以读取/编辑/创建 Excel 文件，而无需在服务器上进行互操作/安装 Excel：

MS 提供免费的 OpenXML SDK V 2.0 - 请参阅[http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx](http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx)（仅限 XLSX）

这可以读写 MS Office 文件（包括 Excel）。

另一个免费选项参见[http://www.codeproject.com/KB/office/OpenXML.aspx](http://www.codeproject.com/KB/office/OpenXML.aspx)（仅限 XLSX）

如果您需要更多处理旧 Excel 版本（如 XLS，不仅是 XLSX）、渲染、创建 PDF、公式等，那么有不同的免费和商业库，如[ClosedXML](http://closedxml.codeplex.com/)（免费，仅限 XLSX）、[EPPlus](http://epplus.codeplex.com/)（免费，仅限 XLSX） , [Aspose.Cells](http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx) , [SpreadsheetGear](http://www.spreadsheetgear.com/) , [LibXL](http://www.libxl.com/)和[Flexcel](http://www.tmssoftware.com/site/flexcelnet.asp)等。

# wxpython - wxpython上另一个静态框中的静态框

> ID：14191643
> 
> 赞同：1
> 
> 时间：2013-01-07T07:27:34.367
> 
> 标签：wxpython

我将如何在面板顶部的 wxpython 中的另一个静态框中实现一个静态框？

我正在尝试完成此操作，因为我正在为不同的事物分组按钮。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:01:47.697

你必须使用**[`StaticBoxSizer`](http://wxpython.org/docs/api/wx.StaticBoxSizer-class.html)**

```
import wx

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)

        self.box1 = wx.StaticBox(self.panel, label="One")      
        self.box2 = wx.StaticBox(self.panel, label="Two")

        self.box_sizer = wx.StaticBoxSizer(self.box1, wx.HORIZONTAL)
        self.box_sizer.Add(self.box2, 1, wx.ALL | wx.EXPAND, 5)

        self.sizer = wx.BoxSizer(wx.VERTICAL)
        self.sizer.Add(self.box_sizer, 1, wx.ALL | wx.EXPAND, 5)
        self.panel.SetSizerAndFit(self.sizer)

        self.Show()

if __name__ == "__main__":
    app = wx.App(False)
    win = MainWindow(None)
    app.MainLoop() 
```

# meteor - 简单的流星插入不起作用

> ID：14191644
> 
> 赞同：2
> 
> 时间：2013-01-07T07:27:49.243
> 
> 标签：meteor

我刚刚开始搞乱 Meteor，无法获得以下代码，用于简单的 Collection.insert 在触发事件时更新数据库。我什至可以看到页面在消失之前瞬间更新了文本字段的值（大概是一旦 Meteor 意识到该值没有写入服务器）。通过控制台插入效果很好......有一些我忽略的基本概念吗？

文件.js

```
var Tasks = new Meteor.Collection("Tasks");

if (Meteor.isClient) {

    Template.main.task = function() {
        return Tasks.find({});
    };

    Template.main.events = {
        'click #submit' : function(event) {
            var task = document.getElementById("text").value;
                Tasks.insert({title: task});
        }
    };
} 
```

文件.html

```
<body>
  {{> main}}
</body>

<template name="main">
    <form class="form-inline">
        <input type="text" id="text" class="input-small" />
        <input type="Submit" class="btn" id="submit" value="Submit"/>
    </form>
    {{#each task}}
        <span id="output">{{title}}</span>
    {{/each}}
</template> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T13:32:45.800

您的提交按钮在执行您的 javascript 取消您对服务器的请求之前发出页面重新加载。

尝试使用“mousedown”而不是“click”或（更好）阻止按钮重新加载页面。

尝试使用此代码段，它会禁用按钮的提交，因此仅执行您的 javascript。

```
<body>
  {{> main}}
</body>

<template name="main">
    <form class="form-inline">
        <input type="text" id="text" class="input-small" />
        <button type="button" class="btn" id="submit">Submit</button>
    </form>
    {{#each task}}
        <span id="output">{{title}}</span>
    {{/each}}
</template> 
```

我将您的第二个标签更改`<input>`为按钮并将其类型属性设置为“按钮”以使按钮不执行任何操作。

# linux - 在cshell中计算一行中的单词数

> ID：14191646
> 
> 赞同：0
> 
> 时间：2013-01-07T07:28:05.380
> 
> 标签：linux, shell

我需要在 cshell 中计算一行中的单词数。单词由一个空格或多个空格分隔。例如，

```
fish duck     cheese            bacon 
```

将返回 4。我缺少一个简单的命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:30:50.177

尝试

```
 $ echo "fish duck     cheese            bacon" | wc -w 
```

# php - 如何在网页标题中获取 Content-Length 或 CRC？

> ID：14191649
> 
> 赞同：2
> 
> 时间：2013-01-07T07:28:33.920
> 
> 标签：php, apache, http, http-headers

我为特定的动态网站编写了一个爬虫。所有抓取作业都需要 3 个小时以上。我想控制页面是否已经被爬取或者页面有一些变化。如果我能做到这一点，脚本将在很短的时间内完成。

例如：

```
 foreach ($urls as $url) {
        if(thereAreChanges($url)){
            crawl($url);
        }
    } 
```

信息：网页不提供内容长度和CRC。

```
Array ( [0] => HTTP/1.1 200 OK 
        [Date] => Tue, 08 Jan 2013 07:47:03 GMT 
        [Server] => Apache 
        [Set-Cookie] => Array ( 
                [0] => PHPSESSID=eisb6qjme9b0ouoga9su9fgok4; path=/  
                [1] => j12011=a%3A3%3A%7Bs%3A3%3A%22sid%22%3Bs%3A26%3A%22eisb6qjme9b0ouoga9su9fgok4%22%3Bs%3A2%3A%22ip%22%3Bs%3A12%3A%2294.103.47.65%22%3Bs%3A4%3A%22time%22%3Bi%3A1357631223%3B%7D; expires=Sat, 09-Mar-2013 07:47:03 GMT; path=/  
        ) 
        [Expires] => Thu, 19 Nov 1981 08:52:00 GMT 
        [Cache-Control] => no-store, no-cache, must-revalidate, post-check=0, pre-check=0 
        [Pragma] => no-cache 
        [Vary] => Accept-Encoding 
        [Connection] => close 
        [Content-Type] => text/html 
) 
```

该站点提供 Content-Type 但不提供 Content-Length。我如何向 apache 询问内容长度。

更新：[http](http://urivalet.com/) ://urivalet.com/可以获得内容长度。我需要这个。

如果我可以在标题中获得页面的 CRC 代码。这将是完美的。但我想这是长远的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:45:27.877

在函数`thereAreChanges($url)`中您可以执行以下操作，

1.  发送请求`If-modified-since`时，将您上次访问页面的时间作为参数发送标头。`304`如果未修改，此标头将返回状态代码。
2.  检查`Last-Modified`响应的标题并与您当前存储的页面的最后修改日期进行比较。如果内容较新，请获取它。
3.  如果可能`HEAD`，请使用这些标头执行请求。`GET`会给你所有的内容。但`HEAD`只会返回标题。对于这样的查询，只需要标题。

使用现有的爬虫和搜索引擎框架比编写一个更好。

使用 Apaches [Nutch](http://nutch.apache.org/)抓取网页，使用[Solr](http://lucene.apache.org/solr/)搜索索引页面。Solr 提供了一个 HTTP 接口，您可以在其中运行 PHP 查询。为了获得更大的灵活性，您可以使用[Lucene](http://lucene.apache.org/)。

这是有关如何设置 Nutch 和 Solr的[教程。](http://blog.building-blocks.com/building-a-search-engine-with-nutch-and-solr-in-10-minutes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T10:35:46.227

解决方案是`'header'=>"Accept-Encoding: gzip"`

这就是为什么 header 不返回 Content-Length，使用此参数 page 返回 content-length。

# xslt - 使用 XSLT 向 DOM NodeList 节点添加属性

> ID：14191653
> 
> 赞同：0
> 
> 时间：2013-01-07T07:28:55.810
> 
> 标签：xslt, attributes, add

我必须从 NodeList 向节点添加一个属性 Publisher="Penguin" ：输入 xml 如下所示：

```
 <Rack RackNo="1">
    <Rows>
    <Row RowNo="1" NoOfBooks="10"/>
    <Row RowNo="2" NoOfBooks="15"/>
    <Rows>
    </Rack> 
```

输出 xml 如下所示：

```
 <Rack RackNo="1">
    <Rows>
    <Row RowNo="1" NoOfBooks="10" Publisher="Penguin"/>
    <Row RowNo="2" NoOfBooks="15" Publisher="Penguin"/>
    <Rows>
    </Rack> 
```

我写的 xsl 是：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes" />
   <xsl:template match="/">
        <Order>
            <xsl:copy-of select = "Rack/@*"/>
                <xsl:for-each select="Rows/Row">
                    <OrderLine>
                        <xsl:copy-of select = "Row/@*"/>
        <xsl:attribute name="Publisher"></xsl:attribute>
                        <xsl:copy-of select = "Row/*"/>
                    </OrderLine>
                </xsl:for-each>
            <xsl:copy-of select = "Rack/*"/>
        </Order>
 </xsl:template>
</xsl:stylesheet> 
```

这不会返回所需的输出。任何帮助都感激不尽。

提前谢谢各位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:51:38.373

这是 XSLT 身份转换的工作。就其本身而言，它可以简单地创建输入 XML 中所有节点的副本

```
<xsl:template match="@*|node()">
   <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
   </xsl:copy>
</xsl:template> 
```

您需要做的就是添加一个额外的模板来匹配**Row**元素，并为其添加一个**Publisher**属性。最好先参数化您要添加的发布者

```
<xsl:param name="publisher" select="'Penguin'" /> 
```

然后按如下方式创建匹配模板：

```
<xsl:template match="Row">
   <OrderLine Publisher="{$publisher}">
      <xsl:apply-templates select="@*|node()"/>
   </OrderLine>
</xsl:template> 
```

请注意使用“属性值模板”来创建**发布**者属性。花括号表示它是一个要计算的表达式。另请注意，在您的 XSLT 中，您似乎也在重命名元素，所以我也在我的 XSLT 中这样做了。（如果不是这种情况，只需将**OrderLine**替换为**Row**。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:param name="publisher" select="'Penguin'" />

   <xsl:template match="Rack">
      <Order>
         <xsl:apply-templates />
      </Order>
   </xsl:template>

   <xsl:template match="Rows">
      <xsl:apply-templates />
   </xsl:template>

   <xsl:template match="Row">
      <OrderLine Publisher="{$publisher}">
         <xsl:apply-templates select="@*|node()"/>
      </OrderLine>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<Order>
   <OrderLine Publisher="Penguin" RowNo="1" NoOfBooks="10"></OrderLine>
   <OrderLine Publisher="Penguin" RowNo="2" NoOfBooks="15"></OrderLine>
</Order> 
```

# php - 使用__call方法通过另一个类属性调用一个类的方法

> ID：14191654
> 
> 赞同：1
> 
> 时间：2013-01-07T07:28:56.480
> 
> 标签：php, function, magic-methods

我想使用 __call 方法通过另一个类属性调用一个类的方法（方法名称是动态决定的）。我尝试如下。我希望代码将描述我尝试过的内容。

```
class A { 

    public function a1($r1) { return 'a1.'; }

    public function a2($r1, $r2) { return 'a2.'; }

    //...
}

class B { 

    private $a; 

    function __construct() { $this->a = new A(); }

    function __call($name, $args) {

        // some code goes here.

        // How to call the method of class-A using the property a.
        return call_user_func_array('$this->a->'.$name, $args);
    }   
}

$b = new B();

// I want to call a1 and a2 of class-A through class-B.
echo $b->a1(11);
echo $b->a2(21, 22); 
```

但得到错误。

```
PHP Warning:  call_user_func_array() expects parameter 1 to be a valid callback,
function '$this->a->a2' not found or invalid function name in ...php on line 24 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T07:38:08.813

这应该可以解决您的问题：

```
return call_user_func_array(array($this->a, $name), $args); 
```

# c# - 如何在 solr 中使用 Suggester 组件配置自动建议？

> ID：14191660
> 
> 赞同：1
> 
> 时间：2013-01-07T07:29:11.570
> 
> 标签：c#, solr, autosuggest

我正在使用 SolrNet 对几个表进行索引和搜索。

我能够成功搜索完整的单词。

现在，我正在尝试实现自动建议功能，其中查询将包含部分单词或短语而不是完整的单词。

我的 Schema.xml 看起来像这样

```
<fields>
    <!-- declare fields of entity class -->
    <!-- type will specify the table name -->
    <field name="type" type="string" indexed="true" stored="true"  />

    <field name="id" type="string" indexed="true" stored="true" required="true" multiValued="false" />
    <field name="name" type="text_general" indexed="true" stored="true" omitNorms="true"/>

    <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/>
    <field name="_version_" type="long" indexed="true" stored="true"/>

    <!-- unique field -->
    <field name="uid" type="uuid" indexed="true" stored="true" />

  </fields>

  <uniqueKey>uid</uniqueKey>

  <copyField source="name" dest="text"/>

  <types>
    <fieldType name="uuid" class="solr.UUIDField" indexed="true" />
    <fieldType name="string" class="solr.StrField" sortMissingLast="true" />
    <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true"/>

    <fieldType name="int" class="solr.TrieIntField" precisionStep="0" positionIncrementGap="0"/>
    .....
    </types> 
```

我的 solrconfig.xml 看起来像

```
<searchComponent name="suggest" class="solr.SpellCheckComponent">
    <!-- a spellchecker built from a field of the main index -->
    <lst name="spellchecker">
      <str name="name">suggest</str>
      <str name="field">name</str>
      <str name="classname">org.apache.solr.spelling.suggest.Suggester</str>
      <str name="lookupImpl">org.apache.solr.spelling.suggest.tst.TSTLookup</str>
      <str name="buildOnCommit">true</str>          
      <str name="distanceMeasure">internal</str>
      <float name="accuracy">0.5</float>
      <int name="maxEdits">2</int>
      int name="minPrefix">1</int>
      <int name="maxInspections">5</int>
      <int name="minQueryLength">4</int>
      <float name="maxQueryFrequency">0.01</float>
       <float name="thresholdTokenFrequency">.01</float>      
    </lst>

    <!-- a spellchecker that can break or combine words.  See "/spell" handler below for usage -->
    <lst name="spellchecker">
      <str name="name">wordbreak</str>
      <str name="classname">solr.WordBreakSolrSpellChecker</str>
      <str name="field">name</str>
      <str name="combineWords">true</str>
      <str name="breakWords">true</str>
      <int name="maxChanges">10</int>
    </lst>
</searchComponent>

<requestHandler name="/suggest" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>
      <!-- Solr will use suggestions from both the 'default' spellchecker
           and from the 'wordbreak' spellchecker and combine them.
           collations (re-written queries) can include a combination of
           corrections from both spellcheckers -->
      <str name="spellcheck">true</str>
      <str name="spellcheck.dictionary">suggest</str>
      <!--<str name="spellcheck.dictionary">wordbreak</str>-->
      <str name="spellcheck">on</str>
      <str name="spellcheck.extendedResults">true</str>       
      <str name="spellcheck.count">10</str>
      <str name="spellcheck.alternativeTermCount">5</str>
      <str name="spellcheck.maxResultsForSuggest">5</str>       
      <str name="spellcheck.collate">true</str>
      <str name="spellcheck.collateExtendedResults">true</str>  
      <str name="spellcheck.maxCollationTries">10</str>
      <str name="spellcheck.maxCollations">5</str>         
    </lst>
    <arr name="last-components">
      <str>spellcheck</str>
    </arr>
  </requestHandler> 
```

但是，我在搜索的输出中没有得到任何记录。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:41:15.833

您在 solrconfig.xml 的 minPrefix 标记中缺少 <

```
<int name="maxEdits">2</int>
int name="minPrefix">1</int>
<int name="maxInspections">5</int> 
```

# android - 无法在数组列表中加载字符串值

> ID：14191661
> 
> 赞同：-1
> 
> 时间：2013-01-07T07:29:12.240
> 
> 标签：android

我想获取电话联系人并显示在 listView 中。但我无法在数组列表中加载字符串值。我不知道如何解决这个问题。

记录猫错误：

```
01-07 12:43:49.381: E/AndroidRuntime(863): FATAL EXCEPTION: main
01-07 12:43:49.381: E/AndroidRuntime(863): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.rathnasoft.sample/com.rathnasoft.sample.ContactsPhone}: java.lang.NullPointerException
01-07 12:43:49.381: E/AndroidRuntime(863):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-07 12:43:49.381: E/AndroidRuntime(863):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-07 12:43:49.381: E/AndroidRuntime(863):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-07 12:43:49.381: E/AndroidRuntime(863):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-07 12:43:49.381: E/AndroidRuntime(863):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 12:43:49.381: E/AndroidRuntime(863):  at android.os.Looper.loop(Looper.java:123)
01-07 12:43:49.381: E/AndroidRuntime(863):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-07 12:43:49.381: E/AndroidRuntime(863):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 12:43:49.381: E/AndroidRuntime(863):  at java.lang.reflect.Method.invoke(Method.java:521)
01-07 12:43:49.381: E/AndroidRuntime(863):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-07 12:43:49.381: E/AndroidRuntime(863):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-07 12:43:49.381: E/AndroidRuntime(863):  at dalvik.system.NativeStart.main(Native Method)
01-07 12:43:49.381: E/AndroidRuntime(863): Caused by: java.lang.NullPointerException
01-07 12:43:49.381: E/AndroidRuntime(863):  at com.rathnasoft.sample.ContactsPhone.displayContacts(ContactsPhone.java:67)
01-07 12:43:49.381: E/AndroidRuntime(863):  at com.rathnasoft.sample.ContactsPhone.onCreate(ContactsPhone.java:22)
01-07 12:43:49.381: E/AndroidRuntime(863):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-07 12:43:49.381: E/AndroidRuntime(863):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-07 12:43:49.381: E/AndroidRuntime(863):  ... 11 more 
```

编码部分：

```
public class ContactsPhone extends Activity {
private ListView lvContact;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contacts);
    lvContact = (ListView) findViewById(R.id.listView1);
    ArrayList<String> list = displayContacts();
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getBaseContext(), android.R.layout.simple_list_item_1,list);
    lvContact.setAdapter(adapter);

}

private ArrayList<String> displayContacts() {

    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
            null, null, null);

    ArrayList<String> contact = null;
    String phoneNo = null;
    if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
            String id = cur.getString(cur
                    .getColumnIndex(ContactsContract.Contacts._ID));
            String name = cur
                    .getString(cur
                            .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

            if (Integer
                    .parseInt(cur.getString(cur
                            .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                Cursor pCur = cr.query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                + " = ?", new String[] { id }, null);
                while (pCur.moveToNext()) {
                    phoneNo = pCur
                            .getString(pCur
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    System.out.println("name" + name + "ph no" + phoneNo);
                    Toast.makeText(this,
                            "Name: " + name + ", Phone No: " + phoneNo,
                            Toast.LENGTH_SHORT).show();
                }

                pCur.close();
            }
            contact.add(name + "\n" + phoneNo);
        }
    }
    return contact;

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T07:37:16.707

我认为你的问题是没有初始化 arrayList

```
 ArrayList<String> contact = null; 
```

改成

```
 ArrayList<String> contact = new ArrayList<String>(); 
```

因此零点

编辑 - 哈哈被打败了:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T07:36:36.070

创建数组列表而不是将其设置为 null：

```
ArrayList<String> contact =  new ArrayList<String>(); 
```

# grails - grails.server.port 在 BuildConfig.groovy 中不再起作用

> ID：14191673
> 
> 赞同：0
> 
> 时间：2013-01-07T07:30:10.357
> 
> 标签：grails

`grails.server.port`应该`BuildConfig.groovy` 总是通过

`-Dserver.port=XXXX`

Grails 2.1.1 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:20:28.287

这是

```
grails.server.port.http = xxxx 
```

不是

```
grails.server.port = xxxx 
```

但还有一些事情需要进一步检查：

1.  如果在 Unix 平台上部署应用程序，1024 以下的所有端口只能由 root 用户访问。否则你会得到一个错误，比如`Error Server failed to start for port 80: Permission denied`

2.  redirect() 方法使用 grails.serverURL 配置设置来生成重定向 URL。您可能需要删除该设置，尤其是从开发和测试环境中。

# javascript - 用 JavaScript 解决线性方程和类似的代数问题

> ID：14191678
> 
> 赞同：8
> 
> 时间：2013-01-07T07:30:18.290
> 
> 标签：javascript

我是 JavaScript 新手，我正在尝试编写一个解决线性方程的简单脚本。到目前为止，我的脚本解决了只有正负的线性方程，例如“2x + 28 - 18x = 36 - 4x + 10”。我希望它也能够解决包含乘法和除法的线性方程/代数问题，例如“2x * 3x = 4 / 2x”。

我有点知道下一步该做什么，但我认为我现在拥有的脚本可能过于复杂，并且只会使添加乘法和除法变得更加复杂。

下面是我的脚本。我希望得到一些关于如何改进和简化我已经拥有的东西以及添加乘法和除法的最佳方法的建议？

我在 JS Bin 上的脚本：http: [//jsbin.com/ufekug/1/edit](http://jsbin.com/ufekug/1/edit)

我的脚本：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Problem Solver</title>
<script>
window.onload = function() {
    // Total Xs on each side of equation
    // Example problem: 5x + 2 = 10 - 2x
    var leftSideXTotal = 0; // 5
    var rightSideXTotal = 0; // -2

    // Total integers on each side of equation
    // Example problem: 5x + 2 = 10 - 2x
    var leftSideIntTotal = 0; // 2
    var rightSideIntTotal = 0; // 10

    // Enter a math problem to solve
    var problem = "5x + 2 = 10 - 2x";

    // Remove all spaces in problem
    // Example problem: 5x + 2 = 10 - 2x
    problem = problem.replace(/\s/g,''); // 5x+2=10-2x

    // Add + signs in front of all - signs
    // Example problem: 5x + 2 = 10 - 2x
    problem = problem.replace(/-/gi, "+-"); // 5x+2=10+-2x

    // Split problem into left and right sides
    // Example problem: 5x + 2 = 10 - 2x
    var problemArray = problem.split("=");
    var problemLeftSide = problemArray[0]; // 5x+2
    var problemRightSide = problemArray[1]; // 10+-2x

    // Split values on each side into an array
    var problemLeftSideValues = problemLeftSide.split("+");
    var problemRightSideValues = problemRightSide.split("+");

    // Go through the left side values and add them up
    for (var i = 0; i < problemLeftSideValues.length; i++) {

        // Current value
        var currentValue = problemLeftSideValues[i];
        // Length of current value
        var currentValueLength = currentValue.length;

        if (currentValue.charAt(currentValueLength - 1) == "x") { //Check if current value is a X value

            // Remove X from end of current value
            currentValue = currentValue.split("x");

            // Add to total Xs on left side
            leftSideXTotal = Number(leftSideXTotal) + Number(currentValue[0]);

        } else {

            // Add to total integers on left side
            leftSideIntTotal = Number(leftSideIntTotal) + Number(problemLeftSideValues[i]);

        }
    }

    // Go through the right side values and add them up
    for (var i = 0; i < problemRightSideValues.length; i++) {

        // Current value
        var currentValue = problemRightSideValues[i];
        // Length of current value
        var currentValueLength = currentValue.length;

        if (currentValue.charAt(currentValueLength - 1) == "x") { //Check if current value is a X value

            // Remove X from end of current value
            currentValue = currentValue.split("x");

            // Add to total Xs on right side
            rightSideXTotal = Number(rightSideXTotal) + Number(currentValue[0]);

        } else {

            // Add to total integers on right side
            rightSideIntTotal = Number(rightSideIntTotal) + Number(problemRightSideValues[i]);

        }
    }

    // Compute
    var totalXs = (leftSideXTotal - rightSideXTotal)
    var totalIntegers = (rightSideIntTotal - leftSideIntTotal)
    var solution = (totalIntegers / totalXs)

    // Display solution
    document.getElementById("divSolution").innerText = solution;
}
</script>
</head>

<body>
<div id="divSolution"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T16:18:22.667

您需要编写（或使用）运算符优先级解析器。

这个想法是将方程变成一棵树，例如

```
x + 3 = 3x - 2 
```

真的是结构

```
 =
     /     \
    +       -
   / \     / \
  x   3   *   2
         / \
        3   x 
```

每个运算符描述树的两个“分支”之间的操作。使用 javascript 对象创建结构应该不难：

```
function tree(lterm,op,rterm) {
   t.operator = op;
   t.left = lterm;
   t.right = rterm;
   return t;
}

expression = tree("x", "/", tree("x","+",3) );  //    x / (x+3) 
```

然后通过操纵树，您可以求解方程，或进行计算。要评估一个表达式（没有未知数），您从终端开始遍历树，然后从一个交叉点向上到另一个交叉点。您可以用结果替换树的一部分，或用结果对其进行注释 - 将结果变量添加到`tree`对象。

以下是包含在树类中的一些有用方法：

*   左转
*   获得权利
*   漂亮打印
*   评估
*   evaluate("x",5) // x=5，现在计算 ...

可以通过这种方式“解析”的不仅仅是线性运算。更好的解析器将有一个运算符列表，其中包括 =*/+- 以及一元运算符： - ( ) sin cos...

我没有在 javascript 中使用运算符优先级解析器，但有些必须预先编写好。当然，这个网站上的好心人会给我的答案添加一两个很好的链接。

顺便说一句，树方法有很多应用。在电子表格中：

```
A2 = A1+B1 
```

在布尔求解器中：

```
A = not (B or C)
C = true 
```

在 XML 解析中：

```
<main>
  <part>A</part>
  <part>B</part>
</main> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:21:36.473

我定义了两个函数：

`getTotalX()`：它将为您`x`提供任何输入字符串的计数。

`getTotalScalars()`：它会给你标量（数字）的总数。

最后，您更新的代码（它仍然只做加法和减法）：

```
<script>
window.onload = function() {
    // Total Xs on each side of equation
    // Example problem: 5x + 2 = 10 - 2x
    var leftSideXTotal = 0; // 5
    var rightSideXTotal = 0; // -2

    // Total integers on each side of equation
    // Example problem: 5x + 2 = 10 - 2x
    var leftSideIntTotal = 0; // 2
    var rightSideIntTotal = 0; // 10

    // Enter a math problem to solve
    var problem = "5x + 2 = 10 - 2x";

    // Remove all spaces in problem
    // Example problem: 5x + 2 = 10 - 2x
    problem = problem.replace(/\s/g,''); // 5x+2=10-2x

    // Add + signs in front of all - signs
    // Example problem: 5x + 2 = 10 - 2x
    problem = problem.replace(/-/gi, "+-"); // 5x+2=10+-2x

    // Split problem into left and right sides
    // Example problem: 5x + 2 = 10 - 2x
    var problemArray = problem.split("=");
    var problemLeftSide = problemArray[0]; // 5x+2
    var problemRightSide = problemArray[1]; // 10+-2x

    leftSideXTotal = getTotalX(problemLeftSide);
    leftSideIntTotal = getTotalScalars(problemLeftSide);

    rightSideXTotal = getTotalX(problemRightSide);
    rightSideIntTotal = getTotalScalars(problemRightSide);

    // Compute
    var totalXs = (leftSideXTotal - rightSideXTotal)
    var totalIntegers = (rightSideIntTotal - leftSideIntTotal)
    var solution = (totalIntegers / totalXs)

    // Display solution
    document.getElementById("divSolution").innerText = solution;

    // Find the total number of X in the string
    function getTotalX(data) {
        data = data.replace(/\s/g,'');
        xCount = 0;

        if(data.indexOf('x') != -1) {
            if (data.indexOf('+') != -1) {
                data = data.split('+');

                for(var i = 0; i < data.length; i++) {
                    xCount += getTotalX(data[i]);
                }
            } else if (data.indexOf('-') != -1) {
                data = data.split('-');

                // Single negative
                if(data[0] == "") {
                    xCount -= getTotalX(data[1]);
                } else {
                    xCount += getTotalX(data[0]);

                    for(var i = 1; i < data.length; i++) {
                        xCount -= getTotalX(data[i]);
                    }
                }
            } else {
                xCount = parseInt(data.split('x')[0]);
            }
        }

        return xCount;
    }

    // Find the total of scalars
    function getTotalScalars(data) {
        data = data.replace(/\s/g,'');
        intCount = 0;

        if (data.indexOf('+') != -1) {
            data = data.split('+');

            for(var i = 0; i < data.length; i++) {
                intCount += getTotalScalars(data[i]);
            }
        } else if (data.indexOf('-') != -1) {
            data = data.split('-');

            // Single negative
            if(data[0] == "") {
                intCount -= getTotalScalars(data[1]);
            } else {
                intCount += getTotalScalars(data[0]);

                for(var i = 1; i < data.length; i++) {
                    intCount -= getTotalScalars(data[i]);
                }
            }
        } else {
            if(data.indexOf('x') == -1) {
                intCount = parseInt(data.split('x')[0]);
            } else {
                intCount = 0;
            }
        }

        return intCount;
    }
}
</script> 
```

# android - Android：在 ListView 中为 singleChoice 更改文本颜色

> ID：14191685
> 
> 赞同：0
> 
> 时间：2013-01-07T07:30:54.610
> 
> 标签：android, listview

我有一个设置为使用 singleChoice 的列表视图。我要做的就是将默认背景颜色更改为白色，将文本颜色更改为黑色。我无法弄清楚如何做到这一点。这是我的xml布局：

```
<ListView
    android:id="@+id/lvSpeeds"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@id/llToolbar"
    android:layout_below="@id/rgSpeedUnits"
    android:textColor="@android:color/black"
    android:choiceMode="singleChoice"
    android:background="#ffffff"
    android:cacheColorHint="#00ffffff"
    android:clickable="true"
    android:divider="#ff000000"
    android:dividerHeight="1dp"
    android:focusable="true"
    android:scrollingCache="true" /> 
```

编辑：我应该指出我只想使用 xml 布局文件而不是代码来更改它。我已经知道如何在代码中做到这一点。使用 android.R.layout.simple_list_item_single_choice 以外的自定义布局会强制您实现适配器、绑定、编写更多代码等等。从查看更多帖子来看，似乎无法仅使用 xml 更改文本颜色。实际上，似乎无法更改一行中的任何内容，因为无法访问底层布局 android.R.layout.simple_list_item_single_choice。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:41:02.240

试试这个：

在 getview 方法的适配器中插入此代码：

```
LinearLayout mRowLayout = (LinearLayout) vi
                    .findViewById(R.id.list_item_layout);
            final TextView title = (TextView) vi
                    .findViewById(R.id.list_item);

            title.setText(Massage[position]);

            mRowLayout.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                                    title.setTextColor(Color.RED);

                            }); 
```

这里 list_item 代码：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/list_item_layout"
android:orientation="vertical" >

<RelativeLayout android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/row_single"
                android:layout_margin="5dp">

<TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:textColor="@android:color/black"
        android:padding="10dp"
        android:textSize="16sp"

        android:layout_toLeftOf="@+id/arrow"
        android:id="@+id/list_item"/>
</RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:35:54.993

对于列表视图使用这样的android选择器

并用 l 保存它`anyname.xm`并给出列表背景的参考

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android" >

     <item android:state_pressed="true" android:drawable="@drawable/about_btn_hover"></item>
    <item android:drawable="@drawable/about_btn"></item> 

</selector> 
```

并为更改文本颜色在 res 目录中添加颜色文件夹创建一个 xml 保存`textchangecolor.xml` 并添加以下行

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" 
        android:color="@color/whiteColor"></item>
    <item android:color="@color/bluetxt"></item> 
</selector> 
```

并给出对 textcolor 的引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-08T05:44:17.627

我能找到的最佳解决方案是使用 styles.xml 并为我的对话框设置主题。

样式.xml

```
<style name="DialogTheme" parent="AppTheme">
    <item name="android:textColor">@color/text</item>
    <item name="android:textColorAlertDialogListItem">@color/text</item>
    + other styles
</style> 
```

在 Java 内置对话框中：

```
ContextThemeWrapper theme;
theme = ContextThemeWrapper(view.getContext(), R.style.DialogTheme);
AlertDialog.Builder builder = new AlertDialog.Builder(theme); 
```

在 XML 构建的对话框中：

```
<myLayout
    ....
    android:theme="@style/DialogTheme" /> 
```

# android - 如何在android设备上搜索pdf文件？

> ID：14191693
> 
> 赞同：0
> 
> 时间：2013-01-07T07:31:36.297
> 
> 标签：android, search, pdf

我的 Nexus 10 上有数千个 pdf 文件的完整集合，我真的希望能够搜索它们：例如查找包含“stackoverflow”一词的所有 pdf；）。市场上的许多应用程序允许按日期、标题等过滤 pdf 数据库，其中许多应用程序提供搜索功能……但仅适用于单个 pdf。你有什么主意吗 ？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-28T08:23:37.177

我刚刚发现了一个在多个文件中搜索的应用程序（我也有数百个技术 PDF）：[Andro Search](https://play.google.com/store/apps/details?id=com.chocosoft.as)，终于！我自己多年来一直在寻找。

你也可以使用 Evernote（一些云存储提供商也有这个功能，但是我需要几个小时才能上传我的所有文件，而且我反正不使用它们）。

现在有第二个可能更好的解决方案：[Librera Reader](https://play.google.com/store/apps/details?id=com.foobnix.pro.pdf.reader)。

Librera Reader PRO 并没有创建巨大的缓存文件并且仍然非常快（相对而言）。在设置区域中寻找搜索功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T07:43:03.787

我假设您想编写一个应用程序来为您执行此操作？您需要做的是将文件夹设置为搜索或递归搜索您的nexus 上的文件系统并检查PDF 文件。然后，您需要使用 PDFbox 之类的库来搜索文本。[这里](http://hello-world-2-0.blogspot.co.uk/2008/03/java-library-to-search-in-pdf-files_12.html)有一个不错的教程

请注意，这将相当慢，但这是一个简单的解决方案。

# c# - 将现有 Microsoft sql 数据库添加到 asp.net 项目

> ID：14191697
> 
> 赞同：0
> 
> 时间：2013-01-07T07:31:57.363
> 
> 标签：c#, sql-server, visual-studio-2012

我一直在做 C# asp.net 练习，通常我会在我的项目的应用程序数据文件夹中添加一个 Access 数据库，然后使用我的 OleDbConnection 字符串连接到数据库并与表进行交互。

但是，我现在想将现有的 Microsoft sql 2008 express edition 数据库添加到我的 asp.net 项目（visual studio 2012）中，但我很难做到这一点，因为这不是简单地将数据库添加到应用程序数据文件夹并制作使用必要的连接字符串进行连接。

执行此操作的演练或分步程序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:36:01.500

> 执行此操作的演练或分步程序是什么？

1.  如果尚未安装 SQL Server（完整版）（可以与 Web 应用程序安装在同一台机器上或单独的机器上），请安装。
2.  在此 SQL Server 中创建一个数据库。
3.  在新创建的数据库中创建表。
4.  指定此 SQL 服务器的连接字符串。

您当然可以使用嵌入式数据库。例如 VS 2012 带有一个 LocalDB，它将文件存储在 App_Data 文件夹中。当您使用 Internet 模板创建新的 ASP.NET MVC 4 应用程序时，它会为您设置好一切。但这不是一个生产就绪的数据库。基本上它设置了一个指向 App_Data 文件夹的连接字符串：

```
<connectionStrings>
  <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-MvcApplication1-20130107093649;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-MvcApplication1-20130107093649.mdf" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

并设置实体框架以使用此提供程序：

```
<entityFramework>
  <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
</entityFramework> 
```

因此，当您准备好将应用程序部署到生产环境并拥有一个正在运行的 SQL Server 实例时，您只需将连接字符串更改为指向该 SQL 实例即可。

这[`nice article on MSDN`](http://msdn.microsoft.com/en-us/library/jj653752.aspx)是您可以基于目标数据库使用的各种连接字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:42:08.480

如果您有现有的 MSSQL 数据库，则不必处理文件。只需添加您的连接字符串，您就可以使用了。您有 2 个选项来包含连接字符串，您可以将其包含在 web.config 中，也可以直接将其包含到您的 cs 文件中。

如果您选择将它包含到您的 cs 文件中，您应该使用 SqlConnection 类。在 web.config 中，它应该如下所示：

```
<connectionStrings>
<add name="constr" connectionString="Data Source=yourservername;Initial Catalog=yourdatabasename;User ID=youruserid;Password=yourpass" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

# objective-c - 有效地保持一个字符串附加另一个字符串

> ID：14191702
> 
> 赞同：2
> 
> 时间：2013-01-07T07:32:07.787
> 
> 标签：objective-c

我有一些这样的代码：

```
-(void)updateString: (NSString*)str {
     self.buffer = [self.buffer stringByAppendingString:str];
     self.string = [self.buffer stringByAppendingString:@"Always at the end of self.string"];
} 
```

输入：

```
self.buffer: "blah\n"
self.string: "Always at the end of self.string"
str: "Hello\n" 
```

输出：

```
self.buffer: "blah\nHello\n"
self.string: "blah\nHello\nAlways at the end of self.string" 
```

如果`updateString`被频繁调用，是否会随着`self.buffer`越来越大而导致性能问题？看起来这将遭受类似于[Schlemiel the Painter 算法的](https://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm)低效率。

如果是这样，我能做些什么来改进我的幼稚实现？用于？`NSMutableString`_`self.buffer`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:51:36.467

NSMutableString 对于大字符串会更有效，因为它不需要每次都复制数据。

您应该使用仪器进行分析，看看会发生什么。当您在仪器中的 CPU 优化命中列表的顶部看到 updateString 时，请先画掉，然后再担心这个问题。
此外，如果没有分析，很难预测需要优化的地方。例如，如果 updateString 被调用的次数比 self.string 多得多，你可以这样优化：

```
//assuming NSMutableString *buffer;

- (void)updateString:(NSString *)string {
    [self.buffer appendString:string];
}

- (NSString *)string {
    return [self.buffer stringByAppendingString:@"Always at the end of self.string"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:12:54.750

你甚至需要单独`buffer`的和`string`属性吗？您可以只使用一个`NSMutableString`，并在附加更多文本时覆盖“始终在末尾”部分吗？

```
- (void)updateStringWithString:(NSString *)moreText {
    static NSString *const tail = @"Always at the end";
    NSRange rangeToReplace = NSMakeRange(self.string.length - tail.length, tail.length);
    [self.string replaceCharactersInRange:rangeToReplace withString:moreText];
    [self.string appendString:tail];
} 
```

# jquery - jquery 循环插件：在移出上一张幻灯片之前移入新幻灯片？

> ID：14191706
> 
> 赞同：1
> 
> 时间：2013-01-07T07:32:39.447
> 
> 标签：jquery, cycle-plugin

我想从从左到右的 div 制作幻灯片。但不是简单地让当前幻灯片移出并让下一张幻灯片移入，我希望使用循环插件和缓动功能来制作更好的动画。

我正在寻找的动画/过渡描述如下：假设当前幻灯片在视图中，下一张幻灯片应该反弹到当前幻灯片的左侧，有效地将当前幻灯片踢出，然后应该出现新幻灯片. 我已经解决了，但我就是无法正确把握传入和传出幻灯片的时间。

为了完整起见，我使用 jquery 1.8.3, easing 1.3 anc cycle-plugin 2.99

以下是我现在所拥有的，不胜感激。

HTML：

```
<div id="fixed_box">
    <div class="slide">
        <h4>Slide 1</h4>
    </div>
    <div class="slide">
        <h4>Slide 2</h4>
    </div>
    <div class="slide">
        <h4>Slide 3</h4>
    </div>
    <div class="slide">
        <h4>Slide 4</h4>
    </div>
    <div class="slide">
        <h4>Slide 5</h4>
    </div>
</div>

<style>
    #fixed_box {position:relative; width:300px; height:180px; background-color:000000; color:white; left:100px;}
    .slide {position:relative; width:250px; height:130px; padding:2px 8px; overflow:hidden; background-color:#777777;}
</style>

<script type="text/javascript">
    $(function(){
        $("#fixed_box").before('<div id="nav">').cycle({
            fx: 'scrollRight',          
            timeout: 1000,
            pager: '#nav',
            easeIn: 'easeInBounce',
            easeOut: 'linear',
            speedIn: 2000,
            speedOut: 1000,
            sync: 1000
        });             
    });
</script> 
```

# java - Java和Android中的GLUT替代品？

> ID：14191707
> 
> 赞同：5
> 
> 时间：2013-01-07T07:32:55.737
> 
> 标签：java, opengl, opengl-es, glut, jogl

我注意到 GLUT 仅适用于 C++。我希望在 Java 上重用我的 OpenGL 代码，然后再次将其移植到 Android。对于这些系统，有什么“标准”用来代替 GLUT 吗？

**编辑：** 我实际上正在使用 JOGL，并且有兴趣通过 Java 重新实现而不是重用 C++。我对 C++、Java 和 OpenGL 有基本的了解，但还没有什么花哨的东西。我很想弄清楚关于窗口的一切，比如调整大小、着色等。我想知道是否有什么可以帮助我处理一些（更高级的？）函数，比如 glutSwapBuffers()、glutDisplayFunc()、glutMainLoop( ）， ETC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T08:15:39.397

[JOGL](https://jogamp.org/jogl/www/)或[LWJGL](http://www.lwjgl.org/)怎么样。他们的 API 与 C++ [glut](http://en.wikipedia.org/wiki/OpenGL_Utility_Library)是 1:1管理上下文和窗口，但我确实使用 LWJGL 做过商业项目，并且可以说这个库很棒。你也可以将它用于移动开发。

我想稍微扩展一下这个话题：

首先，似乎 JOGL 有[GLUT 类](http://download.java.net/media/jogl/jogl-2.x-docs/com/sun/opengl/util/gl2/GLUT.html)，它主要负责基元的创建。我还发现[这个](http://code.google.com/p/chrishobson-java/wiki/jreeglut)库是 C++ GLUT 的部分端口。但事实上，我不明白你在寻找像库这样的 GLUT C++ 背后的原因。 JOGL 和 LWJGL 都为您提供内置功能的输入处理、上下文和窗口创建。而在 Java 中，您可能无法在单一屋顶下统一上下文和窗口创建，因为 Android 和 Windows Java 环境的做法不同。当然你总是可以滚动你自己的类，它将在下面处理基于平台的上下文/窗口设置，但我认为这就像重新发明轮子一样。

关于原始几何创建 - 在这种情况下，我不会费心研究 GLUT。这些是使用旧的、不推荐使用的（固定的）OpenGL 管道制作的。今天是 2013 年，OpenGL 目前是 4.3 版本，如果你想与这项技术的当前状态并受益于 OpenGL 中的许多新功能，我强烈建议您继续前进到 OpenGL 3.3。这样做您需要手动编码几何图形。但是您可以获得许多其他好处，例如完全控制方式您的渲染管道可以工作。还有许多关于如何为可编程 OpenGL 创建几何图形的在线示例和教程。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:45:36.287

有[jnigraphics](https://stackoverflow.com/questions/5605853/what-is-jni-graphics-or-how-to-use-it)，使用[NDK](http://developer.android.com/tools/sdk/ndk/index.html)为Android开发原生C代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:06:51.597

jogl 对 GLUT 的支持非常有限，它肯定没有 glutInitDisplayMode()。我建议您执行以下操作：

## 简单的方法。

1.  找出你需要的最小过剩函数集；
2.  创建一个小型动态库为您调用它们；
3.  Bridj 该库并从您的 java 应用程序中调用您需要的方法。

## 更复杂的方式。

1.  向 jogl+gluegen 添加所需的功能，他们有一种代码生成器。

这种方式更正确，但是：（a）这是更多的工作；(b) 不幸的是，jogl 维护者不是那么友好，您将无法轻松地与社区共享工作。首先，他们会开始责怪你，你的补丁是一坨屎。后来他们几乎会命令你按照他们需要的方式去做。换句话说，愚蠢的电子邮件需要一个月的时间...... :)

# android - 无法从 android 中的电子邮件客户端打开应用程序

> ID：14191708
> 
> 赞同：0
> 
> 时间：2013-01-07T07:33:01.853
> 
> 标签：android, email

我正在编写应用程序来打开 HTML 文件。在某些设备（如 Galaxy 播放器、nexus one）中，当我尝试从电子邮件客户端打开 html 文件时，我的应用程序未显示

> “打开用”

使用“对话框打开，但如果我从 Gmail 客户端打开相同的 HTML 文件，我的应用程序将显示在

> “打开用 ”

打开”对话框。在其他设备（如 Google nexus、S2 等）中，我可以通过电子邮件客户端、电子邮件客户端的应用程序打开 HTML 文件。这是设备特定的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:08:15.257

如果您的应用打开 .HTML 文件，则意图过滤器应如下所示：

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />
  <category android:name="android.intent.category.BROWSABLE" />
  <data android:pathPattern=".*\\.html" />
  <data android:mimeType="*/*" />
  <data android:scheme="file" />
  <data android:host="*" />
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:10:08.337

在某些设备中，电子邮件客户端未打开 mime 类型为 text/html.so 的应用程序，因此我进行了如下更改。

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:mimeType="text/html"/>
             <data android:mimeType="text/plain"/>
        </intent-filter> 
```

然后电子邮件应用程序能够在列表中显示我的应用程序。但它会在我们尝试打开 HTML/文本文件时显示。

# android - 无法实例化活动组件错误

> ID：14191711
> 
> 赞同：0
> 
> 时间：2013-01-07T07:33:12.250
> 
> 标签：android

我的应用程序不断崩溃，我不知道出了什么问题。我只是在应用程序中添加了一个新包

下面的代码是我的 logcat 错误输出

```
01-07 07:28:51.824: E/AndroidRuntime(471): FATAL EXCEPTION: main
01-07 07:28:51.824: E/AndroidRuntime(471): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.coverflow/com.coverflow.CoverFlowExample}: java.lang.ClassNotFoundException: com.coverflow.CoverFlowExample in loader dalvik.system.PathClassLoader[/data/app/com.example.coverflow-2.apk]
01-07 07:28:51.824: E/AndroidRuntime(471):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1739)
01-07 07:28:51.824: E/AndroidRuntime(471):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
01-07 07:28:51.824: E/AndroidRuntime(471):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
01-07 07:28:51.824: E/AndroidRuntime(471):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
01-07 07:28:51.824: E/AndroidRuntime(471):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-07 07:28:51.824: E/AndroidRuntime(471):  at android.os.Looper.loop(Looper.java:132)
01-07 07:28:51.824: E/AndroidRuntime(471):  at android.app.ActivityThread.main(ActivityThread.java:4123)
01-07 07:28:51.824: E/AndroidRuntime(471):  at java.lang.reflect.Method.invokeNative(Native Method)
01-07 07:28:51.824: E/AndroidRuntime(471):  at java.lang.reflect.Method.invoke(Method.java:491)
01-07 07:28:51.824: E/AndroidRuntime(471):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
01-07 07:28:51.824: E/AndroidRuntime(471):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
01-07 07:28:51.824: E/AndroidRuntime(471):  at dalvik.system.NativeStart.main(Native Method)
01-07 07:28:51.824: E/AndroidRuntime(471): Caused by: java.lang.ClassNotFoundException: com.coverflow.CoverFlowExample in loader dalvik.system.PathClassLoader[/data/app/com.example.coverflow-2.apk]
01-07 07:28:51.824: E/AndroidRuntime(471):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:251)
01-07 07:28:51.824: E/AndroidRuntime(471):  at java.lang.ClassLoader.loadClass(ClassLoader.java:540)
01-07 07:28:51.824: E/AndroidRuntime(471):  at java.lang.ClassLoader.loadClass(ClassLoader.java:500)
01-07 07:28:51.824: E/AndroidRuntime(471):  at android.app.Instrumentation.newActivity(Instrumentation.java:1022)
01-07 07:28:51.824: E/AndroidRuntime(471):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1730)
01-07 07:28:51.824: E/AndroidRuntime(471):  ... 11 more 
```

下面是我的android清单文件，我添加了活动意图

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example.coverflow"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application 
        android:icon="@drawable/icon" 
        android:label="@string/app_name"
        android:largeHeap="true">
        <activity android:name="com.coverflow.CoverFlowExample"
            android:configChanges="orientation|keyboardHidden"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.example.userguide"></activity>

    </application>
    <uses-sdk android:minSdkVersion="13" />
    <supports-screens android:anyDensity="true" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:37:50.360

您已经提供了您的包名称`package="com.example.coverflow"`，并且您正在通过此名称访问您的活动`android:name="com.coverflow.CoverFlowExample"`。这里你忘记写了`example`，所以你的全名是错误的。

请改成这样：

`android:name="com.example.coverflow.CoverFlowExample"`

# php - 通过 php 将 HTML 转为 TXT 文件

> ID：14191718
> 
> 赞同：0
> 
> 时间：2013-01-07T07:33:42.910
> 
> 标签：php

我需要将 HTML 转换为 txt 输出。像下面的示例，通过 php ，是否可能？

前任：

HTML 格式：

```
<table>
    <tr>
        <td>Srinivasan-1</td>
        <td>welcome-1</td>
    </tr>
    <tr>
         <td>Srinivasan-2</td>
         <td>welcome-2</td>
    </tr>
</table> 
```

需要这种txt格式的输出

```
Srinivasan-1      welcome-1  Test -1   
Srinivasan-2      welcome-2  Test -2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:56:19.623

如果您希望文本保持表格中的格式，那么解决方案将非常复杂。使用内置 PHP 函数，您将无法保持列之间的均匀间距，因为它将不再是表格，而只是文本。

您可以做的是使用[strip_tags()](http://php.net/manual/en/function.strip-tags.php "strip_tags()")函数摆脱 HTML。可能需要在列之间放置制表符以使其看起来好像仍然是一个表。这是我掀起的一个功能：

```
<?php
    function StripHtmlFromTable($html_in)
    {
        $html_in = str_replace("</td>", "\t", $html_in); // Space the columns.
        $html_in = str_replace("</tr>", "\n", $html_in); // Put each row on a new line.
        $text_out = strip_tags($html_in);

        return $text_out;
    }
?> 
```

我在我的电脑上测试了脚本，这是输出的图像：

![该功能在起作用，相信这就是你想要它做的吗？](../Images/4ee55d25bda30e17f4320c41646f42bb.png)

我必须将输出放在`<pre>`标签内，以便您可以看到该函数如何使用空格来格式化文本。输出看起来与您的示例输出完全一样，我希望这是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:59:21.563

您可以使用一组正则表达式并将它们替换为换行符和制表符：

```
<?php
$raw = '<table>
    <tr>
        <td>Srinivasan-1</td>
        <td>welcome-1</td>
    </tr>
    <tr>
         <td>Srinivasan-2</td>
         <td>welcome-2</td>
    </tr>
</table>';
    $patterns = array(
        '/[\n\t]/si', /* remove existing whitespace and linebreaks */
        '/<tr.*?>/s', /* beginning of a row (new line) */
        '/<td.*?>([^<]+)<\/td>/s' /* all cells*/
    );
    $replaces = array(
        "", /* remove whitespace */
        "\n", /* add a new line for each tr */
        "\t$1" /* add a indent and the content of each cell */
    );
    // run the preg replace and strip all other tags
    $text = strip_tags(preg_replace($patterns,$replaces,$raw));
    echo $text;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T07:41:15.340

你能试试这个吗？

```
 <?php
    $ones= "<table><tr><td>Srinivasan-1</td><td>welcome-1</td></tr><tr><td>Srinivasan-2</td><td>welcome-2</td></tr></table>";

    $ones= strip_tags($ones);

    $file = fopen("test.txt","w");

    fwrite($file,$ones);

    fclose($file);
    ?> 
```

无论如何，它不会按您的意愿输出。但我希望这是写入文件的基本方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T07:36:57.157

嗯... PHP strip_tags 函数是否由于某种原因不够用？

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

您可以使用 str_replace 分别将每个关闭的 td 和 tr 替换为选项卡和 CRLF 以获得您似乎正在寻找的输出布局。

# linux - 我可以用 sed 匹配多行模式吗

> ID：14191721
> 
> 赞同：1
> 
> 时间：2013-01-07T07:33:58.357
> 
> 标签：linux, sed

假设我在一个文件中有这个模式：

```
<directory number=133 name=var1> 
<myfile name=test1 /> 
</directory> 
```

现在我想用

```
<directory number=133 myfile=test1 /> 
```

我该怎么做`sed`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:43:23.577

Sed 不适合多行的东西，但是：

```
sed ':l;N;$!tl;N;s!<directory number=133 name=var1>[ ]*\n<myfile name=test1 />[ ]*\n</directory>!<directory numbe=133 myfile=test1 />!' input 
```

此命令首先循环读取所有文件：

```
:l;N;$!tl;N;  # label l, read line, while not eof jump to label l 
```

`:l`标签在哪里。`N`是读取下一行并将其附加到缓冲区命令。`$!`测试是否 ( `!`) 文件结尾 ( `$`)。`t`是最后一次测试成功命令的分支。`t`后跟要分支到的标签名称，因此`tl`. 最后`N`一行在继续之前将最后一行附加到缓冲区。

然后基本上匹配问题中的输入，并使用替换 ( `s!regex!replace!`) 命令将其替换为所需的输出。

如果您还想捕获所有不同的数字和名称：

```
sed ':l;N;$!tl;N;s!<directory number=\([0-9]*\) name=\([^>]*\)>[ ]*\n<myfile name=test1 />[ ]*\n</directory>!<directory number=\1 myfile=\2 />!' input 
```

# apache-flex - 关于 flex arraycollection

> ID：14191730
> 
> 赞同：0
> 
> 时间：2013-01-07T07:34:38.017
> 
> 标签：apache-flex

我试图在 fx:string 中获取数组集合中的命令，这是我希望它在我单击退出时退出的代码

```
 <s:ArrayCollection>
                    <fx:String>Settings</fx:String> 
                    <fx:String>Email Us</fx:String>
                    <fx:String>About</fx:String>
                    <fx:String>Exit</fx:String>
                </s:ArrayCollection>
                </s:List>

        </s:calloutContent>
    </s:CalloutButton>
</s:navigationContent> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:53:42.020

```
<s:List id="menulst" change="if(menulst.selectedItem == 'Exit')nativeApplication.exit();">
    <s:ArrayCollection>
        <fx:String>Settings</fx:String> 
        <fx:String>Email Us</fx:String>
        <fx:String>About</fx:String>
        <fx:String>Exit</fx:String>
    </s:ArrayCollection>
</s:List> 
```

或者你也可以为列表组件编写一个点击事件，并在那里编写这样的代码。`nativeApplication.exit()`是退出应用程序的最佳方式。

# forms - HTML 表单“值 = [非静态]”

> ID：14191732
> 
> 赞同：0
> 
> 时间：2013-01-07T07:34:49.190
> 
> 标签：forms, email, non-static, subject

**当前的：**

```
<input type="hidden" name="subject" value="| Website Owners Co. - Web Referral |" /> 
```

在*完美世界*中，以下基本上是我想要它做的。

```
<input type="hidden" name="subject" value="| UserInput "Location" , UserInput "Date Set" |" /> 
```

在表单本身中，我想调用用户设置的“位置”和用户设置的“事件日期”。

所以你真的得到了这个想法，表格要求 . . .

事件日期（下拉值） m/d/y
事件位置（文本字段）

电子邮件的[主题]行可以这样非静态吗？

这可以简单地完成吗？我对 css/html 之外的代码不是很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:31:29.717

您没有说明您用于处理表单的服务器端脚本的语言，并且它没有被标记。如果使用 PHP 会建议如下。

那么，您想提交表单，进行一些处理，然后使用表单中提交的字段作为主题标题发送电子邮件？

在您的表单处理页面中，只需使用类似以下的内容，您正在使用 method=POST 并且字段名称是 event_location 和 event_date。如果您从两个提交的值创建主题，您实际上不需要将主题作为隐藏表单字段提交。

提交表单后，您应该能够获取两个字段的内容，然后将它们连接在一起以创建一个新的电子邮件主题变量。

```
$email_subject = $_POST['event_location']. ", ". $_POST['event_date']; 
```

在 PHP 中，它会以这种方式完成。我想这取决于你如何处理你的表格。

# java - 终结器守护者

> ID：14191735
> 
> 赞同：4
> 
> 时间：2013-01-07T07:34:58.557
> 
> 标签：java, finalizer

我正在浏览Stack Overflow 上发布的[finalizer Guardian 示例](https://stackoverflow.com/questions/6872857/how-does-a-finalizer-guardian-work-in-java)，对此我有几个问题：

1.  为什么我们需要创建 Guardian 对象？为什么不简单地覆盖终结器工作？（因为所有类都是 Object 类的子类）。

2.  Guardian 对象是在什么时候创建的？我假设它是在类加载期间。

3.  我不明白正在创建的监护人对象的语法。函数与变量声明一起声明。这个范式在 Java 中叫什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:12:46.077

1.  正确覆盖 finalize() 当然会起作用。我相信监护人的技巧是确保即使您重写的 finalize() 没有调用 super.finalize()，监护人也在您的子类的终结器之前调用父级的终结器。

2.  创建封闭对象实例时。监护人对象不过是一个实例变量

3.  那是匿名（内部）类。我相信大多数 Java 书籍或教程都涵盖了这一点。尝试用“java 匿名类”Google 会给你相当多的资源，例如，[http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)

# .net - 如何在 ThoughtWorks Twist 框架中使用小黄瓜语言？

> ID：14191740
> 
> 赞同：0
> 
> 时间：2013-01-07T07:35:17.467
> 
> 标签：.net, bdd, ui-automation, gherkin, twist

我正在做 BDD。我正在使用 Visual Studio 2010 - C#。我在互联网上查看了 gherkin-twist 集成，但没有找到解决方案。请建议我如何在 ThoughtWorks Twist 框架中使用小黄瓜语言。

还请向我推荐 Twist 和 gherkin 的推荐读物。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:24:15.583

[在场景页面中，您可以按照此处](http://support.thoughtworks.com/entries/21663498-Getting-started-with-Twist)所述写下小黄瓜的材料。相应的代码可以通过手动或使用记录选项来实现。

# android - 通过 android intent 在 Google plus 上发布图片

> ID：14191741
> 
> 赞同：0
> 
> 时间：2013-01-07T07:35:23.350
> 
> 标签：android, android-intent

我正在通过意图在 Google plus 上发布图像（我正在捕获我的设备的图像），这意味着我没有使用 outh 身份验证，但是在发布图像应用程序时出现错误，我的日志如下

```
01-05 20:12:14.021: E/HttpTransaction(6230): HttpOperation failed com.google.android.apps.plus.api.SnapToPlaceOperation@47da30a8
01-05 20:12:14.021: E/HttpTransaction(6230): java.lang.RuntimeException: Cannot obtain authentication token
01-05 20:12:14.021: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.ApiaryHttpRequestConfiguration.addHeaders(ApiaryHttpRequestConfiguration.java:59)
01-05 20:12:14.021: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.HttpTransaction.<init>(HttpTransaction.java:298)
01-05 20:12:14.021: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.HttpOperation.start(HttpOperation.java:199)
01-05 20:12:14.021: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.HttpOperation.start(HttpOperation.java:179)
01-05 20:12:14.021: E/HttpTransaction(6230):    at com.google.android.apps.plus.phone.LocationController$2.run(LocationController.java:403)
01-05 20:12:14.021: E/HttpTransaction(6230): Caused by: com.google.android.apps.plus.network.NetworkException: Cannot get auth token
01-05 20:12:14.021: E/HttpTransaction(6230):    at com.google.android.apps.plus.util.AccountsUtil.getAuthToken(AccountsUtil.java:141)
01-05 20:12:14.021: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.ApiaryAuthDataFactory$ApiaryAuthDataImpl.getAuthToken(ApiaryAuthDataFactory.java:72)
01-05 20:12:14.021: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.ApiaryHttpRequestConfiguration.addHeaders(ApiaryHttpRequestConfiguration.java:56)
01-05 20:12:14.021: E/HttpTransaction(6230):    ... 4 more
01-05 20:12:14.021: E/HttpTransaction(6230): Caused by: com.google.android.apps.plus.network.NetworkException: Cannot get auth token
01-05 20:12:14.021: E/HttpTransaction(6230):    at com.google.android.apps.plus.util.AccountsUtil.getAuthToken(AccountsUtil.java:137)
01-05 20:12:14.021: E/HttpTransaction(6230):    ... 6 more
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
01-05 20:12:23.704: E/HttpTransaction(6230): HttpOperation failed com.google.android.apps.plus.api.SnapToPlaceOperation@47ff4940
01-05 20:12:23.704: E/HttpTransaction(6230): java.lang.RuntimeException: Cannot obtain authentication token
01-05 20:12:23.704: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.ApiaryHttpRequestConfiguration.addHeaders(ApiaryHttpRequestConfiguration.java:59)
01-05 20:12:23.704: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.HttpTransaction.<init>(HttpTransaction.java:298)
01-05 20:12:23.704: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.HttpOperation.start(HttpOperation.java:199)
01-05 20:12:23.704: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.HttpOperation.start(HttpOperation.java:179)
01-05 20:12:23.704: E/HttpTransaction(6230):    at com.google.android.apps.plus.phone.LocationController$2.run(LocationController.java:403)
01-05 20:12:23.704: E/HttpTransaction(6230): Caused by: com.google.android.apps.plus.network.NetworkException: Cannot get auth token
01-05 20:12:23.704: E/HttpTransaction(6230):    at com.google.android.apps.plus.util.AccountsUtil.getAuthToken(AccountsUtil.java:141)
01-05 20:12:23.704: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.ApiaryAuthDataFactory$ApiaryAuthDataImpl.getAuthToken(ApiaryAuthDataFactory.java:72)
01-05 20:12:23.704: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.ApiaryHttpRequestConfiguration.addHeaders(ApiaryHttpRequestConfiguration.java:56)
01-05 20:12:23.704: E/HttpTransaction(6230):    ... 4 more
01-05 20:12:23.704: E/HttpTransaction(6230): Caused by: com.google.android.apps.plus.network.NetworkException: Cannot get auth token
01-05 20:12:23.704: E/HttpTransaction(6230):    at com.google.android.apps.plus.util.AccountsUtil.getAuthToken(AccountsUtil.java:137)
01-05 20:12:23.704: E/HttpTransaction(6230):    ... 6 more
01-05 20:12:23.767: D/WifiService(2478): releaseWifiLockLocked: WifiLock{NetworkLocationProvider type=2 binder=android.os.Binder@480c9f98}
01-05 20:12:23.782: D/GoogleLoginService(2665): onBind: Intent { act=android.accounts.AccountAuthenticator cmp=com.google.android.gsf/.loginservice.GoogleLoginService }
01-05 20:12:23.814: E/AudioTrack(2478): getAudioMode[0]
01-05 20:12:23.896: D/WifiService(2478): acquireWifiLockLocked: WifiLock{NetworkLocationProvider type=2 binder=android.os.Binder@480c9f98}
01-05 20:12:24.173: E/HttpTransaction(6230): HttpOperation failed com.google.android.apps.plus.api.SnapToPlaceOperation@48004500
01-05 20:12:24.173: E/HttpTransaction(6230): java.lang.RuntimeException: Cannot obtain authentication token
01-05 20:12:24.173: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.ApiaryHttpRequestConfiguration.addHeaders(ApiaryHttpRequestConfiguration.java:59)
01-05 20:12:24.173: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.HttpTransaction.<init>(HttpTransaction.java:298)
01-05 20:12:24.173: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.HttpOperation.start(HttpOperation.java:199)
01-05 20:12:24.173: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.HttpOperation.start(HttpOperation.java:179)
01-05 20:12:24.173: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.HttpOperation$1.run(HttpOperation.java:294)
01-05 20:12:24.173: E/HttpTransaction(6230):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
01-05 20:12:24.173: E/HttpTransaction(6230):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
01-05 20:12:24.173: E/HttpTransaction(6230):    at java.lang.Thread.run(Thread.java:1096)
01-05 20:12:24.173: E/HttpTransaction(6230): Caused by: com.google.android.apps.plus.network.NetworkException: Cannot get auth token
01-05 20:12:24.173: E/HttpTransaction(6230):    at com.google.android.apps.plus.util.AccountsUtil.getAuthToken(AccountsUtil.java:141)
01-05 20:12:24.173: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.ApiaryAuthDataFactory$ApiaryAuthDataImpl.getAuthToken(ApiaryAuthDataFactory.java:72)
01-05 20:12:24.173: E/HttpTransaction(6230):    at com.google.android.apps.plus.network.ApiaryHttpRequestConfiguration.addHeaders(ApiaryHttpRequestConfiguration.java:56)
01-05 20:12:24.173: E/HttpTransaction(6230):    ... 7 more
01-05 20:12:24.173: E/HttpTransaction(6230): Caused by: com.google.android.apps.plus.network.NetworkException: Cannot get auth token
01-05 20:12:24.173: E/HttpTransaction(6230):    at com.google.android.apps.plus.util.AccountsUtil.getAuthToken(AccountsUtil.java:137)
01-05 20:12:24.173: E/HttpTransaction(6230):    ... 9 more
01-05 20:12:24.396: E/MediaPlayer(2478): Unable to to create media player
*****************************************************************************************************************************************************************************
01-05 20:12:34.107: E/AndroidRuntime(6230): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.google.android.apps.plus/com.google.android.apps.plus.phone.EditAudienceActivity}: android.view.InflateException: Binary XML file line #10: Error inflating class com.google.android.apps.plus.views.EsListView
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.os.Looper.loop(Looper.java:123)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.app.ActivityThread.main(ActivityThread.java:4627)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at java.lang.reflect.Method.invokeNative(Native Method)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at java.lang.reflect.Method.invoke(Method.java:521)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at dalvik.system.NativeStart.main(Native Method)
01-05 20:12:34.107: E/AndroidRuntime(6230): Caused by: android.view.InflateException: Binary XML file line #10: Error inflating class com.google.android.apps.plus.views.EsListView
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.view.LayoutInflater.createView(LayoutInflater.java:513)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at com.google.android.apps.plus.fragments.EditAudienceFragment.onCreateView(EditAudienceFragment.java:414)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:846)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1061)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1160)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:558)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:200)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.app.Activity.setContentView(Activity.java:1647)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at com.google.android.apps.plus.phone.EditAudienceActivity.onCreate(EditAudienceActivity.java:46)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
01-05 20:12:34.107: E/AndroidRuntime(6230):     ... 11 more
01-05 20:12:34.107: E/AndroidRuntime(6230): Caused by: java.lang.reflect.InvocationTargetException
01-05 20:12:34.107: E/AndroidRuntime(6230):     at com.google.android.apps.plus.views.EsListView.<init>(EsListView.java:25)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at java.lang.reflect.Constructor.constructNative(Native Method)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.view.LayoutInflater.createView(LayoutInflater.java:500)
01-05 20:12:34.107: E/AndroidRuntime(6230):     ... 30 more
01-05 20:12:34.107: E/AndroidRuntime(6230): Caused by: android.content.res.Resources$NotFoundException: File res/drawable-hdpi/scrollbar_handle_vertical.9.png from drawable resource ID #0x0
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.content.res.Resources.loadDrawable(Resources.java:1714)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.widget.AbsListView.<init>(AbsListView.java:630)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.widget.ListView.<init>(ListView.java:230)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.widget.ListView.<init>(ListView.java:226)
01-05 20:12:34.107: E/AndroidRuntime(6230):     ... 34 more
01-05 20:12:34.107: E/AndroidRuntime(6230): Caused by: java.io.FileNotFoundException: res/drawable-hdpi/scrollbar_handle_vertical.9.png
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.content.res.AssetManager.openNonAssetNative(Native Method)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.content.res.AssetManager.openNonAsset(AssetManager.java:405)
01-05 20:12:34.107: E/AndroidRuntime(6230):     at android.content.res.Resources.loadDrawable(Resources.java:1706)
01-05 20:12:34.107: E/AndroidRuntime(6230):     ... 38 more 
```

我正在使用的代码如下

```
if(share!=null && share.equalsIgnoreCase("Share with GooglePlus")){
                Uri uri =Uri.parse(url);
                Intent intent = new Intent(Intent.ACTION_SEND);
                intent.setType("image/png");
                intent.putExtra(Intent.EXTRA_STREAM, uri);
                startActivity(Intent.createChooser(intent , "Send                      
                                                                               options"));
} 
```

感谢所有建议谢谢

已编辑

我正在截取设备的屏幕截图并将其发布在 google plus 上，我使用了你的代码，我得到了异常 FileNotFoundException() 并且 getAbsolutePath() 方法对于 String 类型未定义，我的代码如下所示，请建议我在代码中更正

包 com.testproject;

```
import java.io.File;
import java.io.FileNotFoundException;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.RelativeLayout;

public class TestProjectActivity extends Activity {

    private Button share_btn = null; 
    private String url=null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        share_btn = (Button)findViewById(R.id.share_btn);
        share_btn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(TestProjectActivity.this,ShareDialogActivity.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);    
                startActivityForResult(intent, 1);  
            }
        });
    }
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        String url =takeScreenShot();
        super.onActivityResult(requestCode, resultCode, data);
        switch (resultCode) {
        case 1:
            String share = data.getExtras().getString("NAME");
            if(share!=null && share.equalsIgnoreCase("Share with Instagram")){
                Intent i = new Intent(Intent.ACTION_SEND);
                i.setType("image/jpg");
                i.putExtra(Intent.EXTRA_STREAM, Uri.parse(url));
                startActivity(Intent.createChooser(i, "Share Image"));
            }

            if(share!=null && share.equalsIgnoreCase("Share with GooglePlus")){
                Intent shareIntent = new Intent(Intent.ACTION_SEND);
                File tmpFile = new File(url);
                String photoUri=null;
                photoUri = url.getAbsolutePath();
                try {
                    photoUri = MediaStore.Images.Media.insertImage(
                            getContentResolver(), tmpFile.getAbsolutePath(), null, null);
                    shareIntent = ShareCompat.IntentBuilder.from(this)
                    .setText("Hello from Google+!")
                    .setType("image/jpeg")
                    .setStream(Uri.parse(photoUri))
                    .getIntent()
                    .setPackage("com.google.android.apps.plus");
                    startActivity(shareIntent);
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            break;
        }
    }
    public String takeScreenShot(){
        try{
            RelativeLayout  view = (RelativeLayout)findViewById(R.id.icflag_layout);
            View v1 = view.getRootView();
            System.out.println("Root View : "+v1);
            v1.setDrawingCacheEnabled(true);
            Bitmap bm = v1.getDrawingCache();
            url =MediaStore.Images.Media.insertImage(getContentResolver(), bm,"screeshot.jpg", 1233+ ".jpg Card Image");
        }
        catch(OutOfMemoryError e){

        }
        return url;
    }
} 
```

谢谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:57:19.143

Google+ 应用仅支持[content:// URI](http://developer.android.com/reference/android/content/ContentUris.html)。`MediaStore`为此，您需要使用API。

```
 File tmpFile = new File("path of the image");
 final String photoUri = MediaStore.Images.Media.insertImage(
         getContentResolver(), tmpFile.getAbsolutePath(), null, null);

 Intent shareIntent = ShareCompat.IntentBuilder.from(this)
         .setText("Hello from Google+!")
         .setType("image/jpeg")
         .setStream(Uri.parse(photoUri))
         .getIntent()
         .setPackage("com.google.android.apps.plus"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T08:56:30.380

不要使用绝对路径。

OnActivityResult() 在从相机捕获图像后使用它。

```
Uri photoUri = intent.getData();                
Intent shareIntent = ShareCompat.IntentBuilder.from(this)
                         .setText("Hello From Google+!")
                             .setType("image/jpeg")
                             .setStream(photoUri)
                             .getIntent()
                     .setPackage("com.google.android.apps.plus");
startActivity(shareIntent); 
```

这对我有用。

# android - 防止先前的活动发生触摸事件

> ID：14191742
> 
> 赞同：0
> 
> 时间：2013-01-07T07:35:36.433
> 
> 标签：android, dialog, android-activity, touch-event

我有一个活动（比如说第一个活动），然后我开始新的活动调用第二个活动。

第二个活动已设置为使用主题对话框。我不想使用默认反应，即当用户在第二个活动之外按下时关闭对话框（我有取消按钮来处理）。

但实际上，当我按下外部（触摸外部）时，如果我触摸第一个活动中具有控件的位置，则此控件接收我的触摸事件（也关闭第二个活动对话框）。

如何防止第一个活动在第二个对话框活动上接收触摸事件？

任何建议真的对我有很大帮助，谢谢！

# linux - 谁吃掉了我的记忆？

> ID：14191750
> 
> 赞同：-1
> 
> 时间：2013-01-07T07:36:10.270
> 
> 标签：linux, memory

```
free -m 
             total       used       free     shared    buffers     cached
Mem:          7974       6993        981          0        557        893
-/+ buffers/cache:       5542       2432
Swap:         2047          0       2047 
```

你看我的系统已经使用了5542MB的内存，但是当我用ps aux来查看谁在使用它的时候，我想不通。

```
ps aux | awk '$6 > 0{print $3, $4, $5, $6}'
%CPU %MEM VSZ RSS
0.0 0.0 10344 700
0.0 0.0 51172 2092
0.0 0.0 51172 1032
0.0 0.0 68296 1600
0.0 0.0 12692 872
0.0 0.0 33840 864
0.0 0.0 10728 376
0.0 0.0 8564 648
0.0 0.0 74856 1132
53.2 0.5 930408 45824
0.0 0.0 24236 1768
0.0 0.0 51172 2100
0.0 0.0 51172 1040
0.0 0.0 68296 1600
51.9 0.5 864348 42740
0.0 0.0 34360 2672
0.0 0.0 3784 528
0.0 0.0 3784 532
0.0 0.0 3784 528
0.0 0.0 3784 528
0.0 0.0 3784 532
0.0 0.0 65604 900
0.0 0.0 63916 832
0.0 0.0 94020 5980
0.0 0.0 3836 468
0.0 0.0 93736 4000
0.0 0.0 3788 484
0.0 0.0 3652 336
0.0 0.0 3652 336
0.0 0.0 3684 344
0.0 0.0 3664 324
0.0 0.0 19184 4880
0.0 0.0 3704 324
0.0 0.0 340176 1312
0.0 0.0 46544 816
0.0 0.0 10792 1092
0.0 0.0 3824 400
0.0 0.0 3640 292
0.0 0.0 3652 332
0.0 0.0 3652 332
0.0 0.0 3664 328
0.0 0.0 4264 1004
0.0 0.0 4584 2368
0.0 0.0 77724 3060
0.0 0.0 89280 2704 
```

你看，RSS总和是152.484MB，VSZ总和是3376.34MB，所以不知道谁吃掉了剩下的内存，内核？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:45:44.143

从我的系统：

```
$ grep ^S[^wh] /proc/meminfo 
Slab:            4707412 kB
SReclaimable:    4602900 kB
SUnreclaim:       104512 kB 
```

这三个指标是平板分配器持有的数据结构。虽然它是不可`SUnreclaimable`回收的，`SReclaimable`但它就像系统中的任何其他缓存一样 - 它将可供处于内存压力下的进程使用。不幸的是`free`似乎没有考虑到这一点，正如[我在这个较早的答案](https://stackoverflow.com/a/4417121/507519)中详细提到的那样，这部分内存很容易增长到几 GB 的内存......

如果您真的想查看您的进程正在使用多少内存，您可以尝试通过我的帖子中描述的缓存清空过程 - 您可以跳过与交换相关的部分，因为您的系统似乎并没有使用任何交换内存.

# tomcat - 使用 j_security_check 自动登录

> ID：14191751
> 
> 赞同：1
> 
> 时间：2013-01-07T07:36:20.317
> 
> 标签：tomcat, j-security-check

我是 j_security_check tomcat 的新手。但是，我使用登录过滤器和 web.xml 中的一些设置实现了登录功能（基于表单的身份验证）。当我们尝试访问安全页面时，tomcat 会重定向到登录页面。提供凭据后，它将用户重定向到用户尝试访问的页面。到目前为止，它按预期工作。

但是，新的要求是：用户访问一个非安全页面（公共页面），在那里他可以输入他的登录用户名和登录密码。在提交此页面时，我们必须做

1.  使用用户提供的详细信息创建用户（保存到数据库）
2.  自动登录用户并重定向到安全的主页。

第一点已经实施并且工作正常。插入新用户后，我将重定向到安全主页。然后容器显示一个登录页面，用户可以在其中输入他的凭据，登录页面的提交操作将用户带到安全页面。

但是我想在将用户的详细信息保存到数据库后将用户重定向到安全主页，因为我们有他的用户名和密码，即非安全页面到安全页面，而不会中断登录页面。我只想使用容器管理的身份验证。

有任何想法吗？？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:40:04.820

如果您使用的是 Tomcat 7.0.x 和 Servlet 3.0 webapp，则可以在 Servlet 或 Filter 中使用 HttpServletRequest 对象的 login(user, pass) 方法。

[http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#login(java.lang.String,%20java.lang.String](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#login(java.lang.String,%20java.lang.String) )

# node.js - 为什么在 Mojito 中，将 controller.server.js 重命名为 controller.server-foo.js 会没有效果？

> ID：14191753
> 
> 赞同：0
> 
> 时间：2013-01-07T07:36:39.270
> 
> 标签：node.js, mojito

在 Node.js 之上的 Mojito 中，我遵循了[http://developer.yahoo.com/cocktails/mojito/docs/quickstart/上的示例](http://developer.yahoo.com/cocktails/mojito/docs/quickstart/)

我所做的是重命名`controller.server.js`为`controller.server-foo.js`，并创建了一个新文件`controller.server.js`来显示“Hello World”。

但是当启动 mojito 时，`controller.server-foo.js`正在使用旧文件，因此不会打印“Hello World”。Mojito 怎么会使用旧文件？

（我也尝试重命名`controller.server-foo.js`为`foo-controller.server.js`，现在打印了“Hello World”，但为什么要`controller.server-foo.js`使用？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:18:40.290

我发现从历史上看，控制器的“亲和力”可以是两部分。第一部分是`common`, `server`, or `client`，第二部分是可选的，可能是`tests`, 或者其他词，所以使用其他名称，例如`controller-not-used-server.js`禁用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T17:01:00.847

@Charles，mojito 中有 3 个注册过程（是的，一开始很混乱）：

*   亲和性（服务器、客户端或公共）。
*   在创建 yui 模块（控制器、模型、绑定器等）时添加 YUI.add
*   不太常见的是按名称注册（包括我们称之为选择器的东西）

在您的情况下，通过拥有两个控制器，其中一个带有名为“foo”的自定义选择器，您可以立即使用 3 个注册。以下是内部发生的情况：

*   控制器总是从 mojit 文件夹中引爆为“控制器”文件名，这是按名称注册的一部分，并且由于您为其中一个控制器提供了“foo”选择器，因此您的 mojit 必须使用“默认”和“模式”富”。其中哪一个会被使用？取决于application.json，你可以在其中有一些条件来设置“selector”的值，默认为空。例如，如果您在设备是 iphone 时将选择器的值设置为“foo”，那么当该条件匹配时，将使用该控制器。
*   Then the `YUI.add` plays an important role, it is the way we can identify which controller should be used, and its only requirement is that NO OTHER MODULE in the app can have the same YUI Module name, which means that your controllers can't be named the same when registering them thru `YUI.add`. And I'm sure this is what is happening in your case. If they both have the same name under `YUI.add()` one will always override the other, and you should probably see that in the logs as a warning, if not, feel free to open an issue thru github.

To summarize:

*   The names used when registering YUI modules have to be unique, in your case, you can use: `YUI.add('MyMojit', function(){})` and `YUI.add('MyMojitFoo', function(){})`, for each controller.
*   Use the selector (e.g.: controller.server-mobile.js) to select which YUI module should be used for a particular request by setting `selector` to the proper value in `application.json`.

# iphone - 带有 iOS 6 SDK 的 XCode 4.2：无法使用 iPhone 4 进行调试

> ID：14191757
> 
> 赞同：1
> 
> 时间：2013-01-07T07:37:06.710
> 
> 标签：iphone, ios, xcode, ios6, xcode4.2

我最近按照以下说明升级了我的 XCode 4.2 以使用 iOS 6 SDK（Mac 太旧，无法安装 Lion 和 XCode 4.5）： [Is it possible to get the iOS 5.1 SDK for Xcode 4.2 on Snow Leopard？](https://stackoverflow.com/questions/9613565/is-it-possible-to-get-the-ios-5-1-sdk-for-xcode-4-2-on-snow-leopard)

一切似乎都运行良好（即创建构建以将 iOS 6 作为基础 SDK 上传到应用商店，生成构建供客户测试，能够检测安装了 iOS 6 的设备）。

不幸的是，当我尝试在我的 iPhone 4 (iOS 6) 上以调试模式运行时，在尝试在我的简单视图控制器之间切换后，我收到以下错误：

*   启动可执行文件“AppName”时出错 - 启动远程程序时出错：无法获取进程 453 的任务。

每当我试一试时，上面的进程号似乎总是不同。此外，该应用程序在 iOS 5 模拟器上运行良好，或者如果我停止调试模式并打开安装在我的设备上的版本。

任何人都知道如何解决这个问题以在我的设备上运行调试模式？

提前致谢！

# javascript - 使用多个 XSLT 文件转换单个 XML 文件

> ID：14191760
> 
> 赞同：2
> 
> 时间：2013-01-07T07:37:23.980
> 
> 标签：javascript, html, xml, xslt

我正在寻找一种解决方案来转换具有多个 XSLT 文件的 XML 文件。

我的 Web UI 上有几个选项卡。每个 UI 选项卡都包含一个 XSLT 文件。在构建 UI 时，我想通过一个 XML 使用多个选项卡进行渲染。

例如，我的 UI 中有四个选项卡，每个选项卡都有单独的 XSLT 文件，并且只有一个数据 XML。我想将此数据 XML 应用于我的多个 XSLT 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:40:41.330

您将需要在您的 xslt 文件中有模板，这些模板将为您拥有的每个选项卡匹配一次数据。在此模板中，您可以单独为每个选项卡设置数据格式。您不需要多个 xslt 文件。

您还可以使用`<xsl:include>`将多个 xsl 文件包含到一个文件中。有关详细信息，请参阅[http://www.w3schools.com/xsl/el_include.asp](http://www.w3schools.com/xsl/el_include.asp)。

# grails - 将兵马俑与圣杯相结合

> ID：14191761
> 
> 赞同：3
> 
> 时间：2013-01-07T07:37:29.983
> 
> 标签：grails, terracotta

创建空grails项目

`grails create-app foo`

已修改`BuildConfig.groovy`，未注释

```
inherits("global") {  
  // uncomment to disable ehcache                                                                                                                                                                                                        
  excludes 'ehcache'                                                                                                                                                                                                                       
} 
```

所以现在`ehcache`被排除在外。

将这 5 个 jar 从`terracotta`安装复制到`foo/lib`目录：

```
ehcache-core-ee-2.6.2.jar
ehcache-terracotta-ee-2.6.2.jar
slf4j-api-1.6.1.jar
slf4j-jdk14-1.6.1.jar
terracotta-toolkit-1.6-runtime-ee-5.2.0.jar 
```

`ehcache.xml`在`grails-app/conf/`目录中创建：

```
<ehcache>

  <terracottaConfig url="vm4:9510"/>

   <defaultCache
       maxElementsInMemory="50"
       eternal="false"
       timeToIdleSeconds="20"
       timeToLiveSeconds="20"
       overflowToDisk="false"
       diskPersistent="false"
       memoryStoreEvictionPolicy="LRU">

    <terracotta clustered="true" valueMode="serialization"/>
  </defaultCache>

</ehcache> 
```

运行项目`grails run-app`并获得此异常：

```
Message: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'transactionManager': 
Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'sessionFactory': Invocation of init method failed; nested exception is org.hibernate.cache.CacheException: 
net.sf.ehcache.CacheException: Could not create ClusteredInstanceFactory due to missing class. Please verify that terracotta-toolkit is in your classpath. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T16:17:34.180

从目录中删除所有 jars `foo/lib`，并在 BuildConfig.groovy 中插入一些依赖项：

```
 repositories {
        .....
        mavenRepo "http://www.terracotta.org/download/reflector/releases"
    }
    dependencies {
        runtime 'net.sf.ehcache:ehcache-core:2.6.2'
        runtime 'net.sf.ehcache:ehcache-terracotta:2.6.2'
        runtime 'org.terracotta:terracotta-toolkit-1.6-runtime:5.2.0'
    } 
```

这将允许从 repo 和 classpath 设置中自动下载其他必要的 jar。

而且，如果你像我一样设置开源 terracotta 服务器，企业版 foo/lib/ehcache-terracotta-ee-2.6.2.jar 将导致错误：

> 错误 - 企业客户端无法连接到开源服务器，连接被拒绝。

**关键部分：**

运行应用程序`grails -noreloading run-app`而不是`grails run-app`绕过重新加载代理。然后分布式缓存应用程序应该可以工作。

ps 将应用程序部署到生产环境不需要额外的工作。

# hadoop - 来自 Hive 的 MR 码

> ID：14191762
> 
> 赞同：0
> 
> 时间：2013-01-07T07:37:30.560
> 
> 标签：hadoop, mapreduce, hive

我正在学习 Hadoop，最近也在学习 Hive。它就像一个 SQL 查询，可以用来代替 MR java 代码。我的导师说 Hive 在后台生成 MR java 代码，然后将其导出为 jar 文件，然后在 HDFS 文件系统之上运行。但是，他不确定我们是否可以得到 Hive 生成​​的 MR 码。我正在阅读权威指南，但没有讨论任何内容。我想知道真的是这样吗？我认为如果我们可以获得 MR 代码，那么该代码可以进一步细化以实现许多其他事情（可以为其他任务定制手段）。

我知道我刚刚处于学习阶段，应该在提问或下结论之前等待，但我很好奇。我认为，如果上述概念是正确的，那么捕获 MR 代码应该是可能的。我是 .Net C# 开发人员，不熟悉 Java，也不是关系数据库方面的专家，我只想告诉它是否重要。

# perl - 如何使用 perl 模块从 html 页面中提取表格的列？

> ID：14191763
> 
> 赞同：0
> 
> 时间：2013-01-07T07:37:30.283
> 
> 标签：perl, html-parsing, perl-module

我有以下网页一部分的 html 代码。

```
<h2 id="failed_process">Failed Process</h2>
<table border="1">
  <thead>
    <tr>
      <th>
        <b>pid</b>
      </th>
      <th>
        <b>Priority</b>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td id="90"><a href="details.jsp?pid=p_201211162334&refresh=0">p_201211162334</a></td>
      <td id="priority_90">NORMAL</td>
    </tr>
    <tr>
      <td id="91"><a href="details.jsp?pid=p_201211163423&refresh=0">p_201211163423</a></td>
      <td id="priority_91">NORMAL</td>
    </tr>
    <tr>
      <td id="98"><a href="details.jsp?pid=p_201211166543&refresh=0">p_201211166543</a></td>
      <td id="priority_98">NORMAL</td>
    </tr>
  </tbody>
</table>
<hr> 
```

我需要提取 pid 列。输出应该看起来像

```
pid
p_201211162334
p_201211163423
p_201211166543 
```

“失败进程”表的表数为 4。但问题是，如果我提到表数为 4，并且网页中没有失败的任务，它将转到下一个表并获取下一个表的 pid导致错误的pid。

我正在使用下面的代码来获得结果。

```
#!/usr/bin/perl
 use strict; 
 use warnings;
 use lib qw(..);
 use HTML::TableExtract;

 my $content = get("URL");
 my $te = HTML::TableExtract->new(
 headers => [qw(pid)], attribs => { id => 'failed_process' },
 );

 $te->parse($content);

 foreach my $col ($te->rows) {
 print ("\t", @$col), "\n";
 } 
```

但我收到以下错误：

```
Can't call method "rows" on an undefined value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:10:06.610

[使用Mojolicious 套件](http://mojolicio.us)中我最喜欢的 DOM 解析器[Mojo::DOM](http://mojolicio.us/perldoc/Mojo/DOM)，它看起来像这样：

```
#!/usr/bin/env perl

use strict;
use warnings;
use feature 'say';
use Mojo::DOM;

# instantiate with all DATA lines
my $dom = Mojo::DOM->new(do { local $/; <DATA> });

# extract all first column cells
$dom->find('table tr')->each(sub {
    my $cell = shift->children->[0];
    say $cell->all_text;
});

__DATA__
<h2 id="failed_process">Failed Process</h2>
<table border="1">
    ... 
```

输出：

```
pid
p_201211162334
p_201211163423
p_201211166543 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:18:04.727

在`$te->parse($html)`你可以添加一些`foreach my $table ($te->tables) ..`之后你可以得到 rows `$table->rows`。您也可以使用[Data::Dumper](http://p3rl.org/Data%3a%3aDumper)来分析`$te`.

# php - 比较 in_array 值

> ID：14191764
> 
> 赞同：0
> 
> 时间：2013-01-07T07:37:48.970
> 
> 标签：php

我有一个 val 数组，其中包含带下划线的动态字符串。另外，我有一个包含整数的变量 $key。我需要将 $key 与每个 $val （下划线之前的值）匹配。

我做了以下方式：

```
<?php
    $key = 2; //always a dynamic number
$val = array('3_33', '2_55'); //always a dynamic string with underscore
if(in_array($key, $val)) {
    echo 'Yes'; 
} 
else
{
    echo 'No';  
}
?> 
```

虽然这段代码运行良好，但我想知道它是否是正确的方法或建议一些更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:19:18.200

使用此函数从 php.net 进行正则表达式匹配

```
function in_array_match($regex, $array) {
    if (!is_array($array))
        trigger_error('Argument 2 must be array');
    foreach ($array as $v) {
        $match = preg_match($regex, $v);
        if ($match === 1) {
            return true;
        }
    }
   return false;
} 
```

然后更改您的代码以使用此功能，如下所示：

```
$key = 2; //always a dynamic number
$val = array('3_33', '2_55'); //always a dynamic string with underscore
if(in_array_match($key."_*", $val)) {
    echo 'Yes'; 
} 
else
{
    echo 'No';  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:44:37.793

这应该工作：

```
foreach( $val as $v ) 
{
    if( strpos( $v , $key .'_' ) === true ) 
    {
        echo 'yes';
    }
    else {
        echo 'no';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T08:13:37.940

给定的格式非常不切实际。

```
$array2 = array_reduce ($array, function (array $result, $item) {
     list($key, $value) = explode('_', $item);
     $result[$key] = $value;
     return $result;
}, array()); 
```

现在您可以使用`isset($array2[$myKey]);`. 我假设您稍后会在执行过程中发现这种格式也很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T07:41:26.307

你可以用这个

```
 function arraySearch($find_me,$array){
$array2 =array();
foreach ($array as $value) {
    $val = explode('_',$value);
    $array2[] =$val[0]; 
}
$Key = array_search($find_me, $array2);
$Zero = in_array($find_me, $array2);
if($Key == NULL && !$Zero){
    return false;
}
return $Key;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T07:39:39.080

```
$key = 2; //always a dynamic number
$val = array('3_33', '2_55'); //always a dynamic string with underscore
$inarray = false;
foreach($val as $v){
    $arr = explode("_", $val);
    $inarray = $inarray || $arr[0] == $key
}
echo $inarray?"Yes":"No"; 
```

# wordpress - Wordpress - 让帖子作者选择最佳评论（前端）

> ID：14191768
> 
> 赞同：1
> 
> 时间：2013-01-07T07:38:08.307
> 
> 标签：wordpress, comments, meta, author

从前端，我想让作者获得他帖子的最佳评论/答案。我很近，但还没有。每次我点击按钮时，该帖子的所有评论都被选为最佳（这是错误的）。每个帖子只能选择一条评论。

在 function.php 我有以下内容：

```
add_action ('comment_post', 'add_comment_field', 1);
function add_comment_field($comment_id) {
    add_comment_meta($comment_id, 'bestanswer', 'no', false);
} 
```

在comment.php 我有以下内容：

```
<?php
    $current_author = get_the_author_meta('nickname');
    global $current_user; get_currentuserinfo();
    if ($current_user->nickname == $current_author) {
?>
<?php
    $my_post_meta = get_comment_meta($comment->comment_ID, 'bestanswer', true);
    if ( $my_post_meta == 'yes' ) {
            echo '<h4>Best answer</h4>';
        } else {
        ?>
        <form method="post" action="" id="bestanswer-<?php comment_ID() ?>">
            <input type="submit" name="confirm" value="Best Answer" />
        </form>
        <?php   

        if (isset($_POST['confirm'])) {
            update_comment_meta($comment->comment_ID, 'bestanswer', 'yes');
        }

    }
?> 
```

想法？建议？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:14:27.490

我通过为每条评论添加一个链接来解决这个问题。该链接转到显示该评论的页面。然后在此页面上，作者选择评论作为最佳答案。现在，评论元仅针对该特定评论保存。我知道这是一个额外的步骤，但我更喜欢这种方法，因为作者必须确保这是他想要选择的评论。一旦评论被选为最佳，作者就无法更改它。

# c++ - Dominosa- 容器类 C++

> ID：14191769
> 
> 赞同：0
> 
> 时间：2013-01-07T07:38:09.860
> 
> 标签：c++

我正在做一个练习——Dominosa——我必须使用递归回溯来解决 Dominosa 板。在随机数板上，数字需要配对，不能重复配对。

问题是类头文件似乎不允许使用容器类 - 或者至少不允许以我尝试的方式使用。到目前为止，我已经尝试过集合中的集合、集合中的地图、集合中的向量等——以跟踪已选择的数字对。但我总是得到错误“二进制表达式的无效操作数”，它链接到这个；

```
 /// One of the @link s20_3_3_comparisons comparison functors@endlink.
      template <class _Tp>
       struct less : public binary_function<_Tp, _Tp, bool>
        {
          bool
          operator()(const _Tp& __x, const _Tp& __y) const
          { return __x < __y; }
       }; 
```

在 stl_function.h 中。所以这;

```
Map<coord, int> numbers; 
```

不会产生错误，而这；

```
Set<Set<Map<coord, int> > > pairings; 
```

创建一个错误。

目前我不知道如何在不跟踪配对的情况下解决这个问题......？

# c# - 带有 vs 2010 的窗口 CE

> ID：14191775
> 
> 赞同：0
> 
> 时间：2013-01-07T07:39:15.867
> 
> 标签：c#, window, windows-ce

我是window CE 的新手，我需要做一个window CE 程序。我的电脑安装了 VS 2010。我想知道 Visual Studio 2010 是否支持 Windows CE 程序？
为什么我的电脑无法安装window CE模拟器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:44:17.103

据我所知，您无法使用 Visual Studio 2010 创建 Windows CE 程序。Visual Studio 2008 确实支持这一点，微软显然计划在 VS 2012 中支持 .NET CF（这是 Windows CE 使用的 .NET 平台）。

例如，请参阅这篇有 600 多个赞的帖子：[http ://connect.microsoft.com/VisualStudio/feedback/details/595712/no-support-for-windows-ce-and-compact-framework-development-in-vs2010](http://connect.microsoft.com/VisualStudio/feedback/details/595712/no-support-for-windows-ce-and-compact-framework-development-in-vs2010)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:51:12.933

你确定你安装的是正确的位吗？64位/32位？

我目前正在开发一个 Windows CE 应用程序，并且可以肯定地告诉你 VS2010 不支持它。VS2005 和 2008 是您的最佳选择。

当安装失败时，最好用谷歌搜索你得到的错误。

# java - 在 Mac OS X 上使用键盘输入的 Java Swing 全屏

> ID：14191776
> 
> 赞同：1
> 
> 时间：2013-01-07T07:39:15.783
> 
> 标签：java, macos, swing, fullscreen

我在让我的 Java JFrame 在所有操作系统（Windows、Mac、Linux）上全屏显示时遇到了一些问题。似乎我发现的任何解决方案都可以在一个操作系统上运行，但不能在其他操作系统上运行，或者有一些其他严重的错误。我想使用 setFullScreenWindow(window w) 方法正确启动全屏，因为 setExtendedState(...) 在 Mac/Linux 上不起作用，因为菜单栏和任务栏仍然可见。

setFullScreenWindow(...) 方法在所有环境中都可以正常工作，直到 Java 7 出现，现在似乎存在一个问题，即一旦您进入全屏模式，应用程序就不再响应 Mac OS X 上的关键事件。应用程序工作在 Windows 上就好了。

有谁知道我怎么可能解决这个问题？

**注意：** *此处描述的解决方法（[FullScreen Swing Components Fail to Receive Keyboard Input on Java 7 on Mac OS X Mountain Lion](https://stackoverflow.com/questions/13064607/fullscreen-swing-components-fail-to-receive-keyboard-input-on-java-7-on-mac-os-x)）不适用于 Windows，因为它会导致 JFrame 闪烁并且无法正确打开。*

*此处描述的全屏方法与下面使用的方法相同，但由于键输入问题而无法使用：（[如何使 JFrame 真正全屏？](https://stackoverflow.com/questions/10055436/how-to-make-a-jframe-really-fullscreen)）*

**示例代码：**

```
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.KeyStroke;

public class FullScreenKeyTest extends JFrame {

public void createFrame() {
    initKey();
    GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();
    this.setUndecorated(true);
    this.setVisible(true);
    gd.setFullScreenWindow(this);
}

private void initKey() {
    Action keyAction = new AbstractAction() {
        public void actionPerformed(ActionEvent e) {
            System.out.println("Escape key pressed");
            setVisible(false);
            System.exit(0);
        }
    };
    this.getRootPane().getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0), "keyPress");
    this.getRootPane().getActionMap().put("keyPress", keyAction);
}

public static void main(String[] args) {
    FullScreenKeyTest testFrame = new FullScreenKeyTest();
    testFrame.createFrame();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:45:27.743

这有点不稳定，因为我可以让它工作并同时破坏它。

使用您的示例代码，我添加了

```
getContentPane().setFocusable(true);
getContentPane().requestFocus(); 
```

在`createFrame`方法结束时，我没有在根窗格中注册操作，而是在内容窗格中注册

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T23:33:01.753

我发现如果您使用本机 OS X Lion 全屏 API，键盘输入会起作用。[请参阅OSX Lion 上 Java 应用程序的全屏功能](https://stackoverflow.com/questions/6873568/fullscreen-feature-for-java-apps-on-osx-lion)问题的解决方案。

# azure - 捕获视频并将其上传到 Azure Blob

> ID：14191777
> 
> 赞同：0
> 
> 时间：2013-01-07T07:39:16.380
> 
> 标签：azure, video-streaming, blob, azure-media-services

我正在处理一个示例项目，我想从网络摄像头捕获视频并将其直接上传到 blob，而不在本地保存视频。

它应该以不应该在本地存储视频的方式工作。有什么方法可以将正在捕获的视频源流并行上传到 Blob 存储？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:42:30.687

从技术上讲，这应该是可能的。Blob 存储允许您以块的形式上传文件，完成后您可以按特定顺序提交这些块：

*   [PutBlock](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.blob.cloudblockblob.putblock.aspx) : 上传一个块
*   [PutBlockList](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.blob.cloudblockblob.putblocklist.aspx)：按特定顺序提交块列表

例如，使用这些方法，您可以在内存中创建一个缓冲区来存储视频，并在每次缓冲区达到一定大小时调用 PutBlock。然后，一旦录制完成，您就可以调用 PutBlockList 来提交所有块。因此，您的 blob 将包含完整的记录，而无需先将其保存到本地磁盘。

# java - 日期格式混乱

> ID：14191778
> 
> 赞同：1
> 
> 时间：2013-01-07T07:39:22.253
> 
> 标签：java, date

在我的应用程序用户中选择日期，`2013-01-02` 但在 MySql DB 中，列格式就像`02-Jan-2013`这样想要更改日期格式

我的代码是：

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-mm-dd");
    SimpleDateFormat formatter1 = new SimpleDateFormat("dd-mmm-yyyy");
    Date start_date = (Date)formatter.parse(GBRF.getStart_date());//GBRF.getStart_date() returns Form Data as 2013-01-02
    String dt=formatter1.format(start_date);
    Date sd=(Date)formatter1.parse(dt); 
```

在这样的结束`sd`打印日期`Wed Jan 02 00:01:00 IST 2013`

我不想要那种格式..只是我想要喜欢`02-Jan-2013`

给我一个想法..在此先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T07:41:40.283

您可以格式化`Date`为`String`with `SimpleDateFormat`，之后如果您尝试打印日期实例，它将调用`toString()`Date 类的方法，该方法的输出没有变化，并且您无法更改该输出，因为它来自`toString()`实现

注意：在您的格式中，您需要使用 M 表示月份（注意大写 M）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T07:42:19.390

`Date`对象本身没有格式。它只存在一个时间点。当您将其转换为`String`.

另请注意，`m`该格式用于分钟而不是月。所以你可能想要一个像`dd-MMM-yyyy`.

尝试

```
System.out.println(formatter1.format(sd)); 
```

打印您喜欢的日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T07:46:08.283

您需要先更改日期格式：

```
`SimpleDateFormat formatter1 = new SimpleDateFormat("dd-MMM-yyyy");` 
```

在您的情况下，如果您只是 print `dt`，它应该以所需的格式打印日期，而不是`Date`再次将其转换为对象，即`sd`

当您打印`sd`时，没有任何格式，它将打印 Date 对象的默认 String 实现，这正是您所看到的输出

# extjs - 在 CQ5 中，如何在 extJS 组件中配置下拉菜单？

> ID：14191779
> 
> 赞同：0
> 
> 时间：2013-01-07T07:39:22.387
> 
> 标签：extjs, aem

我正在注册一个需要文本字段和下拉列表的 xtype。
对于 Text 字段，我们将 Cq 小部件的 xtype 指定为：

```
this.linkText = new CQ.Ext.form.TextField 
```

我们需要在 ExtJs 中为下拉菜单写什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:03:03.547

你可以像下面这样写下拉 -

```
var cb = new CQ.Ext.form.ComboBox({
    // all of your config options
    listeners:{
         scope: yourScope,
         'select': yourFunction
    }
}); 
```

如需更多帮助 -

[http://dev.day.com/docs/en/cq/current/widgets-api/index.html?class=CQ.Ext.form.ComboBox](http://dev.day.com/docs/en/cq/current/widgets-api/index.html?class=CQ.Ext.form.ComboBox)

# ios - 如何阻止 iOS Safari 将光标保持在浏览器窗格的左上角像素中？

> ID：14191784
> 
> 赞同：0
> 
> 时间：2013-01-07T07:39:50.513
> 
> 标签：ios, css, mobile-safari, cursor-position

我有一个网站[http://ADHD.BHStudios.org](http://ADHD.BHStudios.org)，它有一个侧边栏，应该保持隐藏状态，直到您将鼠标光标悬停在它上面（纯 CSS）。但是，在 iOS Safari 中，浏览器窗格总是被告知光标位于左上角像素中，这会强制此侧边栏始终保持打开状态，而不是在用户触摸它以使其获得焦点时。**如何阻止 iOS Safari 将光标保持在浏览器窗格的左上角像素中，以及如何在这样做后保持“触摸扩展”功能？**其他浏览器和其他操作系统没有这个问题。在装有 iOS 5 和 6 的 iPad 2、iPad 3 和 iPhone 4s 上测试。同样，这适用于其他移动浏览器和其他移动设备，例如 Opera Mobile（iOS 和 Android）、Chrome（iOS 和 Android），以及默认安卓 2.2 浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:14:53.033

iPhone 有不同的布局，但在 iPad 上，侧边栏永远不会打开。所以，我无法复制你问题的那一部分。

至于悬停问题，显然触摸屏设备上没有悬停伪类。您必须将事件侦听器附加到 touchstart 事件

```
document.getElementById('top').addEventListener('touchstart', function(){...}); 
```

你可以设置一个计时器让它消失（把它放在你的 touchstart 回调中）：

```
 setTimeout(function(){...}), [milliseconds]); 
```

我就是这样做的。

# jquery - jQuery 事件在移动网络上被触发两次

> ID：14191788
> 
> 赞同：0
> 
> 时间：2013-01-07T07:40:17.287
> 
> 标签：jquery, events, mobile, touch

以下是我为当前视图定义的事件。我添加了touchend以适应手机上的访问

```
events:
  "click .join_in"      : "addMuse"
  "touchend .join_in"   : "addMuse"
  "touchend .promote"   : "promoteMuse"
  "click .promote"      : "promoteMuse" 
```

但是，我意识到当我尝试单击“加入”按钮或“推广”链接时，这些方法似乎被触发了两次。

这是为移动网络绑定事件的正确方法吗？我是否需要以不同的方式定义它们，或者仅在我检查我是否在移动设备上时才绑定它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:01:18.243

它应该取决于浏览器的实现。

您可以测试`click`事件是否存在并声明`touchend`如果不存在。

像这样检查事件[是否存在：如何使用 jQuery 或 JS 检查事件处理程序是否存在？](https://stackoverflow.com/questions/3898055/how-to-check-if-an-event-handler-exist-using-jquery-or-js)

# apache-pig - 使用 JAR 作为 UDF 运行 Pig 返回错误 101

> ID：14191789
> 
> 赞同：2
> 
> 时间：2013-01-07T07:40:28.600
> 
> 标签：apache-pig, oozie

我是 Pig 和 Oozie 的新手，所以这可能是一个初学者的问题，但我到处寻找答案，但没有运气......我正在尝试在 Pig 上运行 UDF，UDF 是一个带有 eval 的 JAR方法重载（取自[http://wiki.apache.org/pig/UDFManual](http://wiki.apache.org/pig/UDFManual)）：

```
package myudfs;
import java.io.IOException;
import org.apache.pig.EvalFunc;
import org.apache.pig.data.Tuple;
import org.apache.pig.impl.util.WrappedIOException;

public class UPPER extends EvalFunc<String>
{
    public String exec(Tuple input) throws IOException {
        if (input == null || input.size() == 0)
            return null;
        try {
            String str = (String)input.get(0);
            return str.toUpperCase();
        } catch(Exception e) {
            throw e;
        }
    }
} 
```

而 Pig 脚本是：

```
REGISTER myudfs.jar;
Raw = LOAD '/user/piguser/input' AS (name: chararray, age: int, gpa: int);
x = FOREACH Raw GENERATE myudfs.UPPER(name);
RMF 'output';
STORE x INTO 'output'; 
```

在本地（pig -f script.pig.txt）上运行它时，我收到了想要的结果，但是在 Oozie（`oozie job -oozie http://localhost:11000/oozie -config job.properties -run`）上运行它时，我收到以下错误： *错误 101：本地文件“myudfs.jar”确实不存在。*

你会建议我做什么？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T18:13:07.650

参见案例 4，此处： [猪食谱](https://cwiki.apache.org/confluence/display/OOZIE/Pig+Cookbook)

总结一下，你可以选择三种方式：

1.  将您的 jar 文件放在 Workflow 和 Pig 文件下方名为“lib”的文件夹中
2.  使用`<archive>`pig-action 中的标签来指定文件的位置。
3.  使用`<file>`pig-action 中的标签来指定文件的位置。

我个人使用`<file>`标签，但我也尝试过使用 lib 文件夹，它工作正常。

编辑：您可能需要在文件标签中包含符号链接。例如`<file>myudfs.jar#myudfs.jar</file>`。

# c# - wp7如何隐藏或删除网页的标题div

> ID：14191793
> 
> 赞同：1
> 
> 时间：2013-01-07T07:40:52.397
> 
> 标签：c#, javascript, windows-phone-7, windows-phone

我正在开发简单的应用程序，我想在图像点击时显示并显示网页，但我不想显示包含菜单、徽标图像的标题 div 内容。

以便能够使用**Web 浏览器控件**调用和显示网页

我的 C# 代码 ID

```
private void image_Tap(object sender, GestureEventArgs e)
    {
        webBrowser1.Navigate(new Uri("http://www.my-url.com", UriKind.Absolute));
    } 
```

效果很好。

现在我如何删除标题标签数据（b/w < header ></header > divs 中的内容）。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:49:39.287

Web 浏览器控件只是加载您传递给它的 HTML 文档。如果文档未托管在您自己的服务器上，则无法直接操作此 HTML。一种非常原始的方法是解析 HTML 文档，然后执行搜索/替换`<header>...</header>`，`<!--<header>..</header>-->`
您可以使用[WebBrowser.SaveToString](http://msdn.microsoft.com/en-us/library/system.windows.controls.webbrowser.savetostring%28v=vs.95%29.aspx)方法将 HTML 文档源保存为字符串。对于 C# 中的 HTML 解析，我建议使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。另请查看[在 C# 中解析 html 的最佳方法是什么？](https://stackoverflow.com/questions/56107/what-is-the-best-way-to-parse-html-in-c)和 [解析 HTML 字符串](https://stackoverflow.com/questions/5105379/parsing-html-string)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:50:45.917

如果你想用 JavaScript 来做：

`document.getElementsByTagName('header')[0].style.display = 'none';`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T12:10:42.180

Windows Phone 中的 WebBrwoserControl 呈现从 URL 获取的 html。

您可以在呈现 HTML 后执行 javascript 代码（来自您的 c# 代码）来操作呈现的 DOM/HTML - 在您的情况下删除 HTML 标记。您所要做的就是使用 InvokeScript。

假设您想在按下 Windows Phone 应用程序中的按钮时执行一些代码。该按钮单击事件的事件处理程序是 Button1_Click ，执行代码的代码如下。

```
private void Button1_Click(object sender, RoutedEventArgs e)
{
    object results = WB1.InvokeScript("HideElement", new string[] { "hideElement" });
} 
```

您现在需要做的就是在您的页面中添加一个名为“HideElement”的函数，您可以从 www.my-url.com 加载该函数并设置好。当单击按钮时，InvokeScript 调用该函数。需要明确的是：该 javscript 功能需要位于您加载的网页来自的 Web 服务器上。

# linux - 将字符串或数组中的代码插入到whiptail

> ID：14191797
> 
> 赞同：0
> 
> 时间：2013-01-07T07:41:05.277
> 
> 标签：linux, string, shell, insert

我是 Linux、shell 和脚本的新手。我遇到了一个问题，无论我如何尝试谷歌，我都找不到答案。

我有一个脚本，它为一个名为“whiptail”的程序创建菜单项，这似乎是在 Debian 上为 Raspberry Pi 显示对话框和菜单项的标准方式。列表项是根据在 Linux 机器上的各种文件中找到的各种数据创建的。我的代码开始

```
#!/bin/sh 
```

该列表是在脚本顶部的 #!/bin/sh 环境中创建的。

但是，为了举例，让我们将列表定义为：

```
LIST="\"Tag 1\" \"Item 1\" \\ \n\"Tag 2\" \"Item 2\" \\ \n" 
```

有效的代码是：

```
while true; do
 TESTRESULT=$(whiptail --menu "Test" 20 80 12 --cancel-button Cancel --ok-button Select \
  "Tag 1" "Item 1" \
  "Tag 2" "Item 2" \
   3>&1 1>&2 2>&3)
 RET=$?
 if [ $RET -eq 1 ]; then
   echo "Cancel"
   exit 0
 elif [ $RET -eq 0 ]; then
   echo "Do something with the selection stored in TESTRESULT"
   exit 0
 else
   exit 1
 fi 
```

不知道怎么换

```
 "Tag 1" "Item 1" \
  "Tag 2" "Item 2" \ 
```

与“LIST”变量中的项目。我有一种感觉，答案在于“eval”，但我也遇到了将其作为解决方案工作的问题。

我也在尝试将 LIST 创建为数组，但我认为这也使事情变得复杂。

任何人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T18:04:44.113

没关系想通了。问题是字符串被分解的方式。更改 IFS（内部字段分隔符）并再次更改它允许我在我想要的地方使用空格：

```
oIFS="$IFS";
IFS="/"

LIST="Tag 1/Item 1/Tag 2/Item 2"

while true; do
 TESTRESULT=$(whiptail --menu "Test" 20 80 12 --cancel-button Cancel --ok-button Select $LIST 3>&1 1>&2 2>&3) 
 RET=$?
 if [ $RET -eq 1 ]; then
  echo "Cancel"
  exit 0
 elif [ $RET -eq 0 ]; then
  echo "Do something with the selection stored in TESTRESULT"
  exit 0
 else
  exit 1
 fi
done

IFS=$oIFS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:16:44.510

我还意识到每个菜单项末尾的“\”可能是在告诉外壳程序“视为一行”而不是分隔菜单项，但是在重新格式化“LINE”以充当单行之后清单，我仍然有使用问题

```
"TESTRESULT=$(whiptail --menu "Test" 20 80 12 --cancel-button Cancel --ok-button Select $LIST 3>&1 1>&2 2>&3) 
```

我想知道它是否与 $() 容器中使用的 $LIST 有关。

# jquery - 在asp页面中使用jquery在表单完成时启用或禁用提交按钮

> ID：14191801
> 
> 赞同：0
> 
> 时间：2013-01-07T07:41:24.350
> 
> 标签：jquery, css, asp-classic

在 asp 页面中使用 jquery 在表单完成时启用或禁用提交按钮。当用户填写所有必要的字段时，我想启用按钮并更改我的 asp 页面上的按钮类别请帮助我，我找到了很多代码，但甚至没有一个是我的工作请帮助我，我已经尝试过

```
(function() {
    $('form > input').keyup(function() {

        var empty = false;
        $('form > input').each(function() {
            if ($(this).val() == '') {
                empty = true;
            }
        });

        if (empty) {
            $('#register').attr('disabled', 'disabled'); // updated according to http://stackoverflow.com/questions/7637790/how-to-remove-disabled-attribute-with-jquery-ie
        } else {
            $('#register').removeAttr('disabled'); // updated according to http://stackoverflow.com/questions/7637790/how-to-remove-disabled-attribute-with-jquery-ie
        }
    });
})() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:28:09.003

试试这个 [http://jsfiddle.net/5QJvK/2/](http://jsfiddle.net/5QJvK/2/)

```
$(function(){
   $('form > input.field').keyup(function() {
        var empty = false;
        $('form > input.field').each(function() {
            if ($(this).val() == '') {
                empty = true;
            }
        });
        if (empty) {
            $('form input[type=submit]').attr('disabled', 'disabled');
        } else {
            $('form input[type=submit]').removeAttr('disabled');
        }
    });
}); 
```

# java - 使用 mockito 验证参数时集合的模棱两可的相等性

> ID：14191804
> 
> 赞同：1
> 
> 时间：2013-01-07T07:41:31.057
> 
> 标签：java, mocking, mockito

mockito verify 方法是否匹配集合的相同实例，或者它是否验证集合的元素？如果我在 Page#equals() 方法上设置一个断点，它不会被触发。只有 Page#hashCode() 可以。知道为什么 Mockito 在具有相同元素时不认为 Set 的 2 个实现是相等的吗？

```
Set<Page> pagesToRemove = Sets.newHashSet();
// add a few pages
Set<Page> copy = ImmutableSet.copyOf(pagesToRemove)
pageManager.removePages(copy);
verify(pageManager, new Times(1)).removePages(pagesToRemove); 
```

Page 上的 Equals 和 HashCodes 方法具有继承自 Object 的默认实现。

> 论据不同！通缉：pageManager.removePages( (HashSet) [{ pageId : null; parentId : null; firstChild : null; nextSibling : null }, etc...] ); -> at com.fg.edee.integration.service.PageServiceTest.testRemove(PageServiceTest.java:60) 实际调用有不同的参数： pageManager.removePages( (RegularImmutableSet) [{ pageId : null; parentId : null; firstChild : null; nextSibling : null } 等..] );

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:26:36.083

我写了一些测试，发现它只是一个 HashSet hashCode 的东西。正如我所说，我使用的是本机 Object#hashCode 和：

> 一个关键限制是在标准 Java 实现中，哈希码不能唯一地标识一个对象。它们只是缩小了匹配项的选择范围，但预计在正常使用中，几个对象很有可能共享相同的哈希码。

这是相当误导的，因为本机 Object#hachCode() 方法在执行过程中总是返回相同的整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:04:47.293

在验证使用引用类型对象作为参数调用的方法时，可以使用 ArgumentMatcher。见[这里](http://mockito.googlecode.com/svn/branches/1.7/javadoc/org/mockito/ArgumentMatcher.html)。

# ios - 如何选择用于 AVAssetReader 的像素格式类型 (kCVPixelBufferPixelFormatTypeKey)？

> ID：14191806
> 
> 赞同：7
> 
> 时间：2013-01-07T07:41:35.447
> 
> 标签：ios, avassetwriter, core-video, avassetreader

我们正在使用`AVAssetReader`并`AVAssetWriter`在某种程度上采用视频编码中所述的风格，[使用 AVAssetWriter - CRASHES](https://stackoverflow.com/questions/8191840/video-encoding-using-avassetwriter-crashes)基本上是为了读取我们从照片库/资产库中获得的视频，然后以不同的比特率写入以减小其大小（用于最终的网络上传） .

让它为我们工作的诀窍是在on中指定一个`kCVPixelBufferPixelFormatTypeKey`键和值，如下所示：`outputSettings``AVAssetReaderTrackOutput`

```
NSDictionary *outputSettings = [NSDictionary 
    dictionaryWithObject:[NSNumber numberWithInt:kCVPixelFormatType_32BGRA] 
                  forKey:(id)kCVPixelBufferPixelFormatTypeKey];     
readerTrackOutput = 
    [[AVAssetReaderTrackOutput alloc] initWithTrack:src_track 
                                     outputSettings:outputSettings]; 
```

所以基本上我们使用`kCVPixelFormatType_32BGRA`了键的值`kCVPixelBufferPixelFormatTypeKey`。

但显然我们可以选择许多可能的像素格式类型。运行[技术问答 QA1501：核心视频 -](http://developer.apple.com/library/mac/#qa/qa1501/_index.html) iOS 6.0.1 iPhone 设备上可用的像素格式中记录的代码，下面是它显示的支持像素格式类型的列表：

```
Core Video Supported Pixel Format Types:
Core Video Pixel Format Type: 32
Core Video Pixel Format Type: 24
Core Video Pixel Format Type: 16
Core Video Pixel Format Type (FourCC): L565
Core Video Pixel Format Type (FourCC): 2vuy
Core Video Pixel Format Type (FourCC): yuvs
Core Video Pixel Format Type (FourCC): yuvf
Core Video Pixel Format Type: 40
Core Video Pixel Format Type (FourCC): L008
Core Video Pixel Format Type (FourCC): 2C08
Core Video Pixel Format Type (FourCC): r408
Core Video Pixel Format Type (FourCC): v408
Core Video Pixel Format Type (FourCC): y408
Core Video Pixel Format Type (FourCC): y416
Core Video Pixel Format Type (FourCC): BGRA
Core Video Pixel Format Type (FourCC): b64a
Core Video Pixel Format Type (FourCC): b48r
Core Video Pixel Format Type (FourCC): b32a
Core Video Pixel Format Type (FourCC): b16g
Core Video Pixel Format Type (FourCC): R10k
Core Video Pixel Format Type (FourCC): v308
Core Video Pixel Format Type (FourCC): v216
Core Video Pixel Format Type (FourCC): v210
Core Video Pixel Format Type (FourCC): v410
Core Video Pixel Format Type (FourCC): r4fl
Core Video Pixel Format Type (FourCC): grb4
Core Video Pixel Format Type (FourCC): rgg4
Core Video Pixel Format Type (FourCC): bgg4
Core Video Pixel Format Type (FourCC): gbr4
Core Video Pixel Format Type (FourCC): 420v
Core Video Pixel Format Type (FourCC): 420f
Core Video Pixel Format Type (FourCC): 411v
Core Video Pixel Format Type (FourCC): 411f
Core Video Pixel Format Type (FourCC): 422v
Core Video Pixel Format Type (FourCC): 422f
Core Video Pixel Format Type (FourCC): 444v
Core Video Pixel Format Type (FourCC): 444f
Core Video Pixel Format Type (FourCC): y420
Core Video Pixel Format Type (FourCC): f420
Core Video Pixel Format Type (FourCC): a2vy
Core Video Pixel Format Type (FourCC): L00h
Core Video Pixel Format Type (FourCC): L00f
Core Video Pixel Format Type (FourCC): 2C0h
Core Video Pixel Format Type (FourCC): 2C0f
Core Video Pixel Format Type (FourCC): RGhA
Core Video Pixel Format Type (FourCC): RGfA 
```

尽管`kCVPixelFormatType_32BGRA`对我们有用（至少表面上），但我们很好奇是否有比上述列表更好的选择。我们应该如何选择适合我们的像素格式类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T13:07:13.963

您可以尝试不同的设置并比较性能。以不同的像素格式向编码器提供缓冲区可能会导致编码性能的差异。硬件加速编码器通常使用“420v”。

另请参阅，[在 iOS 上捕获视频时查询最佳像素格式？](https://stackoverflow.com/questions/7186472/query-for-optimal-pixel-format-when-capturing-video-on-ios?rq=1)

# java - Garbage Collection：对象是否会被回收

> ID：14191808
> 
> 赞同：3
> 
> 时间：2013-01-07T07:41:46.443
> 
> 标签：java, garbage-collection

> **可能重复：**
> [将 Java 对象设置为 null 有什么作用吗？](https://stackoverflow.com/questions/850878/does-setting-java-objects-to-null-do-anything-anymore)

我在一个方法中一次又一次地使用同一个变量并多次将其引用到一个新对象。从垃圾收集方面来说，在使其引用一个新对象之前将其无效是一种好习惯吗？

例子：

```
StopWatch watch = new StopWatch();
watch.start();
//some code
watch.stop();
//some code
watch = null;
watch = new StopWatch();
watch.start();
//some code
watch.stop();
//some code 
```

不确定在这种情况下取​​消它是否会对 GC 产生影响。请指导。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T07:44:12.327

在那一点分配`null`不会有任何区别，因为您将立即为该变量分配一个新值。

`null`在 Java 中，分配给变量并没有什么“神奇”之处。它不会导致对象立即被垃圾收集。它所做的只是打破（可能）许多“路径”之一，通过这些“路径”可以访问相关对象。如果在下一次 GC 运行之前路径会自行中断/消失，那么分配将`null`一无所获。

通常，在 Java 中将变量或字段置空是不值得的，对于即将被覆盖或即将超出范围的局部变量，当然也不值得这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T07:52:21.517

不，在这种情况下，取消不会有任何区别。

如果没有立即将其分配给其他变量，那将会有所不同。在这种情况下，不是等待引用超出范围，而是对象将有资格进行 GC。

GC 通常会收集那些没有引用的对象。当您将引用指向内存中的某个其他对象时，对前一个对象的引用无论如何都会丢失。因此，是否将 null 分配给它没有区别。

它将可供垃圾收集提供程序使用，没有其他参考

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T09:39:50.937

当一个对象可用于垃圾回收时，JVM 为该对象分配空值。

通常，在 Java 中将变量或字段置空是不值得的，对于即将被覆盖或即将超出范围的局部变量，当然也不值得这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T07:43:45.117

它不会有任何区别，因为您在取消后立即分配一个新对象

# django - 如何在 views.py 中设置 Django HTTP 响应版本，比如 HTTP/0.9、HTTP/1.0 或 HTTP/1.1？

> ID：14191809
> 
> 赞同：0
> 
> 时间：2013-01-07T07:41:46.587
> 
> 标签：django, http, views

我想在views.py 中指定HTTP 响应版本为HTTP/0.9、HTTP/1.0 或HTTP/1.1。我怎么能那样做？我可以使用像 http_version 这样的变量吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:12:07.640

您不能在 Django 视图中更改 http 协议。

您必须在 HTTP 服务器级别而不是在应用程序的视图级别进行更改。

例如，如果您使用的是 Apache，则必须更改 Apache 配置。

# mysql - mysql查询中的多个字段具有空值

> ID：14191811
> 
> 赞同：0
> 
> 时间：2013-01-07T07:42:12.010
> 
> 标签：mysql

大家好！！我想将数据库中的数据显示到 Gridview 中，为此我设计了网页并让最终用户输入他们的自定义值...最终用户查询字段在不同时间可能会有所不同...

例如：假设，有以下字段.. 日期从，日期到，分机，主干，目的地，成本...

现在根据要求，如果用户想要从 datefrom 到 dateto 结果的数据应该出现，如果他们想要从 datefrom 到 dateto 的结果以及扩展和扩展结果应该出现......

我需要对这种情况进行单一查询..

请大家帮帮我......提前谢谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:47:46.687

我认为您应该在您的应用程序中检查用户发送给您的变量类型，然后开始构建您的查询，如下所示。

```
SELECT *
FROM t
WHERE
    1 = 1
    AND datefrom >= 'YYYY-MM-DD' 
    AND dateto <= 'YYYY-MM-DD'
    AND extension = 'value'; 
```

您还应该考虑为此查询中的列创建索引。

# android - NumberFormatException：无法在列表视图中将评级设置为评级栏

> ID：14191819
> 
> 赞同：0
> 
> 时间：2013-01-07T07:42:39.327
> 
> 标签：android, set, rating, ratingbar

我正在尝试将评级设置为位于 Listview 但无法设置的 Ratingbar。我被困在这部分但直到我没有得到答案。我的评分栏不可点击。
这是我的xml文件代码

```
<RatingBar
    android:id="@+id/ratingBar1"
    style="?android:attr/ratingBarStyleSmall"
    android:layout_width="60dp"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/title"
    android:layout_marginRight="46dp"
    android:layout_toLeftOf="@+id/imageView1"
    android:isIndicator="true"
    android:numStars="5"
    android:stepSize="0.1" /> 
```

这是我将评级设置为评级栏的代码。实际上，我是从 json 文件中获取值，然后将其转换为浮点数。看这个。

```
static final String TAG_DISHRATING = "dishrating";
.... 
float dishRating = Float.valueOf(dishResult.getString(TAG_DISHRATING));//parse from json file  
.....
//then i add it i hashmap  
map.put(TAG_DISHRATING, String.valueOf(dishRating));
// Then i am getting it form map   
 for(HashMap hm:songsList) 
  if(hm.get(TAG_lOCATIONNAME).equals(name)) 
  {                     
    dishid = Integer.parseInt(hm.get(TAG_DISHiD).toString());
    float dishrating = Float.parseFloat(hm.get(TAG_DISHRATING).toString());                     
  } 
```

最后我将评级设置为评级栏

```
RatingBar ratingBar = (RatingBar)vi.findViewById(R.id.ratingBar1);// rating bar

    ratingBar.setClickable(false);
    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    // Setting all values in listview
    title.setText(song.get(HotelList.TAG_lOCATIONNAME));
    artist.setText(song.get(HotelList.TAG_DISHTOTALVOTES));
    ratingBar.setRating(Float.parseFloat(HotelList.TAG_DISHRATING)); //here i am getting exception 
```

日志异常：

```
01-07 13:10:24.250: E/AndroidRuntime(25565): FATAL EXCEPTION: main
01-07 13:10:24.250: E/AndroidRuntime(25565): java.lang.NumberFormatException: Invalid float: "dishrating"
01-07 13:10:24.250: E/AndroidRuntime(25565):    at java.lang.StringToReal.invalidReal(StringToReal.java:63)
01-07 13:10:24.250: E/AndroidRuntime(25565):    at java.lang.StringToReal.parseFloat(StringToReal.java:310)
01-07 13:10:24.250: E/AndroidRuntime(25565):    at java.lang.Float.parseFloat(Float.java:300)
01-07 13:10:24.250: E/AndroidRuntime(25565):    at com..LazyAdapter.getView(LazyAdapter.java:57) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:44:36.067

```
ratingBar.setRating(Float.parseFloat(HotelList.TAG_DISHRATING)); 
```

应该

```
ratingBar.setRating(Float.parseFloat(song.get(HotelList.TAG_DISHRATING))); 
```

因为当前您正在尝试将字符串解析为浮点数。将正确的值传递给`Float.parseFloat`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:45:52.543

尝试

```
ratingBar.setRating(Float.parseFloat(song.get(HotelList.TAG_DISHRATING))); 
```

# ruby - “无法加载此类文件——action_controller/request”当需要“opensocial”时

> ID：14191820
> 
> 赞同：2
> 
> 时间：2013-01-07T07:42:53.980
> 
> 标签：ruby, ruby-on-rails-3, opensocial

在 gem 安装 rails gem 之后安装 opensocial

我试图在 irb 下做 require 'opensocial'。

但发生了错误。

> > `gem_original_require' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in`需要“opensocial”加载错误：没有要加载的文件——来自/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in 的action_controller/request ' 来自 /Library/Ruby/Gems/1.8/gems/oauth-0.4.7/lib/oauth/request_proxy/action_controller_request.rb:3 来自 /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ ruby/1.8/rubygems/custom_require.rb:31:in`gem_original_require' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in`来自 /Library/Ruby/Gems/1.8/gems/opensocial-0.0.4/lib/opensocial/auth/action_controller_request.rb:27 来自 /System/Library/框架/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in`gem_original_require' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in`需要'来自 /Library/Ruby/Gems/1.8/gems/opensocial-0.0.4/lib/opensocial.rb:19 来自 /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8 /rubygems/custom_require.rb:31:in `gem_original_require' from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in`require' from (irb):4 from :0

当我在 ror 下使用它时（将 gem 'opensocial' 添加到 Gemfile，然后是 rails 服务器），也会出现同样的错误。

谁能帮我？

# javascript - 具有动态/数组 ID 的 Javascript 函数

> ID：14191825
> 
> 赞同：0
> 
> 时间：2013-01-07T07:43:13.760
> 
> 标签：javascript, arrays, function, dynamic, color-picker

我有一个关于 JavaScript 函数的动态调用的问题。这是我的问题：

假设我有一个包含颜色选择器的元素（div）。我想动态地使用/克隆这个元素（用户想要多少次）。调用这个颜色选择器看起来像：代码可以在这里查看：http: [//jsfiddle.net/CJhqc/1/](http://jsfiddle.net/CJhqc/1/)（把它放在小提琴中，因为它在这里搞砸了，而不是在那里测试）

其中 id 是例如名为 的变量`my_color`。我添加`[]`到输入中，以便我可以调用更多这个颜色选择器项目。没关系，我可以有 5 个这样的元素，并且可以读取每个输入。问题来自颜色选择器调用。colopicker 现在有`id="color_picker"`然后调用：

```
jQuery(document).ready(function(){
    jQuery('#color_picker').children('div').css('backgroundColor', '<?php echo $value; ?>');    
    jQuery('#color_picker').ColorPicker({
        color: '<?php echo $value; ?>',
        onShow: function (colpkr) {
            jQuery(colpkr).fadeIn(500);
            return false;
        },
        onHide: function (colpkr) {
            jQuery(colpkr).fadeOut(500);
            return false;
        },
        onChange: function (hsb, hex, rgb) {    
            jQuery('#color_picker').children('div').css('backgroundColor', '#'+ hex);
            jQuery('#color_picker').next('input').attr('value','#'+ hex);
        }
    });
}); 
```

问题：如果我现在有 3 个这样的项目，它们的 JavaScript 总是相同的。颜色选择器旁边的输入是 "arrayed" -> `<?php echo $id; ?>[]`，但是如何为每个项目设置颜色选择器 JavaScript。而且不能给`color_picker id -> color_picker[]`。现在，如果我想更改第二个项目的颜色（例如），第一个项目的颜色将发生变化，而不是第二个项目。猜猜每个人都需要它自己的 JavaScript，但是如何调用它呢？

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:49:59.950

使用颜色选择器的类（在它已经有的小提琴中，`colorSelector`所以我将使用它）而不是 id，并`jQuery(this)`在 onChange 处理程序中引用以使用正确的子项和输入。我认为这应该像你想要的那样工作。

```
jQuery(document).ready(function(){
    //init all color pickers to the same $value
    jQuery('.colorSelector').children('div').css('backgroundColor', '<?php echo $value; ?>');    
    //init ColorPicker handling for all color pickers
    jQuery('.colorSelector').ColorPicker({
        color: '<?php echo $value; ?>',
        onShow: function (colpkr) {
            jQuery(colpkr).fadeIn(500);
            return false;
        },
        onHide: function (colpkr) {
            jQuery(colpkr).fadeOut(500);
            return false;
        },
        //handle onChange individually
        onChange: function (hsb, hex, rgb) {    
            jQuery(this).children('div').css('backgroundColor', '#'+ hex);
            jQuery(this).next('input').attr('value','#'+ hex);
        }
    });
}); 
```

# c# - Asp.net 图表控件 IsValueShownAsLabel 和标签将显示带有 $ 符号的值

> ID：14191826
> 
> 赞同：0
> 
> 时间：2013-01-07T07:43:14.843
> 
> 标签：c#, asp.net, asp.net-charts

我在 asp.net 图表控件中将**IsValueShownAsLabel设置为 true。**我试图将这些可见标签显示为**100.00 美元**，而不是仅显示**100.00**左右的数字。

据我所知，有什么方法可以使只有数字可以作为标签可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:55:06.770

```
chartSeries.LabelFormat = "${0.00}"; 
```

解决了我的问题

编辑：最专业的方式，从 prthrokz 对问题的评论中得到提示。

```
chartSeries.LabelFormat = "{0:C}"; 
```

# c# - c#中的字符串有问题吗？

> ID：14191830
> 
> 赞同：1
> 
> 时间：2013-01-07T07:43:50.810
> 
> 标签：c#

我正在 c# 中创建一个字符串。

```
string jsVersion = @"function getContent() {
                     var content = " + "\"" + documentString + "\"" + @"
                     return content; 
                     }"; 
```

documentString 变量包含一个巨大的字符串，其中也有换行符。现在在 javascript 中，当我加载此字符串时，内容变量不包含有效字符串（因为换行符）。

现在我如何创建一个即使有换行符也有效的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:46:26.320

您可以使用[`HttpUtility.JavaScriptStringEncode`](http://msdn.microsoft.com/en-us/library/dd991914.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:47:07.927

你能以这种方式使用 string.format 而不是连接吗？

一个例子：

```
string jsVersion = string.format("function getContent() {var content = '{0}'return content; }",documentString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T07:51:33.370

这会将您的换行符替换为`<br/>`：-

```
stringToDecode.replace(/\n/, '&lt;br /&gt;') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T08:24:01.213

如果你想摆脱换行符，只需`@`从刺痛中移除。

`@`为您的字符串逐字执行，因此添加您在声明中输入的换行符。

```
string jsVersion = "function getContent() {
                     var content = " + "\"" + documentString + "\"" + "
                     return content; 
                     }"; 
```

应该做的伎俩。

# python - 如何在python中计算两周内两个日期之间的差异

> ID：14191832
> 
> 赞同：50
> 
> 时间：2013-01-07T07:43:55.137
> 
> 标签：python, datetime

我正在尝试计算“一年中的几周”中两个日期之间的差异。我可以获取 datetime 对象并获取天数等，但不能获取周数。当然，我不能减去日期，因为这样不能保证周末。

我尝试使用`d1.isocalendar()[1]`和减去获得周数，`d2.isocalendar()[1]`但问题是`isocalendar()[1]`返回`December 31, 2012`为第 1 周（这应该是正确的），但这意味着我的逻辑不能跨越这个日期。

作为参考，这是我的完整代码：

```
def week_no(self):
    ents = self.course.courselogentry_set.all().order_by('lecture_date')
    l_no = 1
    for e in ents:
        if l_no == 1: 
             starting_week_of_year = e.lecture_date.isocalendar()[1] # get week of year
             initial_year = e.lecture_date.year   
        if e == self: 
            this_year = e.lecture_date.year
            offset_week = (this_year - initial_year) * 52
            w_no = e.lecture_date.isocalendar()[1] - starting_week_of_year + 1 + offset_week
            break 
        l_no += 1
    return w_no 
```

使用此代码，2012 年 12 月 31 日的讲座最终为 -35。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-07T07:53:06.723

如何计算各个日期几周内的**星期一**之间的周差？在以下代码中，`monday1`是星期一或之前`d1`（同一周）：

```
from datetime import datetime, timedelta

monday1 = (d1 - timedelta(days=d1.weekday()))
monday2 = (d2 - timedelta(days=d2.weekday()))

print 'Weeks:', (monday2 - monday1).days / 7 
```

如果两个日期都在一周内，则返回**0** ，如果连续两周，则返回**1 ，依此类推。**

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-01-07T07:52:40.283

您可能需要参考 Python CookBook（2005 版）Recipe 3.3。以下代码片段来自食谱，可以满足您的要求。

```
from dateutil import rrule
import datetime
def weeks_between(start_date, end_date):
    weeks = rrule.rrule(rrule.WEEKLY, dtstart=start_date, until=end_date)
    return weeks.count() 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2018-01-22T06:34:13.827

这是一个非常简单的解决方案，每个人都能理解的编码更少。

```
from datetime import date

d1 = date(year, month, day)
d2 = date(year, month, day)
result = (d1-d2).days//7 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-16T11:45:27.463

确定两个日期跨越多少周。例如从 10 月 3 日到 10 月 13 日

```
 October 2015
Mo     5 12 19 26
Tu     6 13 20 27
We     7 14 21 28
Th  1  8 15 22 29
Fr  2  9 16 23 30
Sa  3 10 17 24 31
Su  4 11 18 25 
```

代码：

```
 import math, datetime

    start_date = datetime.date(2015, 10, 3)
    start_date_monday = (start_date - datetime.timedelta(days=start_date.weekday()))
    end_date = datetime.date(2015, 10, 13)
    num_of_weeks = math.ceil((end_date - start_date_monday).days / 7.0) 
```

等于 3 周。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-22T21:41:24.680

上面的解决方案有一个错误（由于声誉低，我无法添加评论）。它不考虑小时差异。

```
# This code has a bug.
monday1 = (d1 - timedelta(days=d1.weekday()))
monday2 = (d2 - timedelta(days=d2.weekday())) 
```

相隔一周以上的 2 个日期的反例：

```
Timestamp1: 1490208193270795 (22 Mar 2017 18:43:13 GMT)
Monday1: 20 Mar 2017 18:43:13 GMT

Timestamp2: 1489528488744290 (14 Mar 2017 21:54:48 GMT)
Monday2: 13 Mar 2017 21:54:48 GMT 
```

使用该代码，它在应该为 1 时返回 0 作为周差异。还需要将小时/分钟/秒归零。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T07:52:22.670

您对“周差”的确切含义有些模糊。6天的差异是一周还是零？八天是一周还是两周？

在任何情况下，您为什么不能简单地找到另一个单位（秒或天）的差异并除以适当的数量，并使用您喜欢的四舍五入数周？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-03T05:58:29.880

编辑最佳答案

```
from datetime import timedelta
monday1 = (d1 - timedelta(days=d1.weekday()))
monday2 = (d2 - timedelta(days=d2.weekday()))
diff = monday2 - monday1
noWeeks = (diff.days / 7)  + math.ceil(diff.seconds/86400)
print('Weeks:', noWeeks)` 
```

# iphone - 无法从指向 imageview 的链接获取图像

> ID：14191839
> 
> 赞同：-2
> 
> 时间：2013-01-07T07:44:32.013
> 
> 标签：iphone, objective-c, ios, ios5, uiimageview

在我的 Iphone 应用程序中。我没有在 imageview 中获取图像。这些图像来自链接。

链接是[http://pointngo.testshell.net/Images/2013-01-05%2001-05-59_20110623033304.jpg](http://pointngo.testshell.net/Images/2013-01-05%2001-05-59_20110623033304.jpg)

我正在使用此代码。

```
UIImage* myImage = [UIImage imageWithData: [NSData dataWithContentsOfURL: [NSURL URLWithString:str]]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:49:04.477

试试这个 ：-

```
str = [str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
UIImage* myImage = [UIImage imageWithData: [NSData dataWithContentsOfURL: [NSURL URLWithString:str]]]; 
```

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:48:08.157

试试这个代码...

```
NSURL *imgURL = [NSURL URLWithString:@"http://pointngo.testshell.net/Images/2013-01-05%2001-05-59_20110623033304.jpg"];

NSData *data = [[NSData alloc] initWithContentsOfURL:imgURL];

UIImage *tmpImage = [[UIImage alloc] initWithData:data];

yourImageView.image = tmpImage; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T07:57:49.567

你应该确保`[NSData dataWithContentsOfURL: [NSURL URLWithString:str]]`回报不是`nil`。如果`nil`你应该使用 `dataWithContentsOfURL:options:error:`.

引用 Apple 文档：返回值 包含来自 aURL 指定位置的数据的数据对象。如果无法创建数据对象，则返回 nil。

讨论 如果您需要知道失败的原因，请使用`dataWithContentsOfURL:options:error:`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T07:53:39.190

我尝试了以下方法，对我来说效果很好：

```
NSString *str = @"http://pointngo.testshell.net/Images/2013-01-05%2001-05-59_20110623033304.jpg";

//NSLog(@"Image data   %@", [NSData dataWithContentsOfURL: [NSURL URLWithString:str]]);

UIImageView *imgv = [[[UIImageView alloc] initWithFrame: CGRectMake(50.0, 50.0, 100.0, 100.0)] autorelease];
imgv.image = [UIImage imageWithData:[NSData dataWithContentsOfURL: [NSURL URLWithString:str]]];
imgv.contentMode = UIViewContentModeScaleAspectFill;
[self.view addSubview:imgv]; 
```

# iphone - 我如何在情节提要中使用原型单元和搜索结果控制器

> ID：14191841
> 
> 赞同：4
> 
> 时间：2013-01-07T07:44:33.603
> 
> 标签：iphone, ios, uitableview, storyboard, uisearchresultscontroller

我`tableview`在搜索栏中搜索时使用搜索结果控制器得到此错误指示没有单元格并得到以下错误。如何`prototype`在此方法中创建我的单元格`CellForRowAtIndexPath`

代码 ：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{
 static NSString *CellIdentifier = @"HoCell";
Ho *cell;
Ho *item;

if (tableView == self.searchDisplayController.searchResultsTableView) {
    if (cell == nil)
    {
        cell = [[Ho alloc]  initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"HoCell"];
    }
    item = [searchResultsController objectAtIndexPath:indexPath];
}
else{
    cell = (Ho*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    item = [fetchedResultsController objectAtIndexPath:indexPath];
}
cell.ho.text = item.name;

cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"se.png"]];

return cell;
} 
```

错误 ：

```
*** Assertion failure in -[UISearchResultsTableView _configureCellForDisplay:forIndexPath:],  /SourceCache/UIKit_Sim/UIKit-2372/UITableView.m:5471
 Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:12:37.690

这里可能有两种可能性：

> 1) 您从 tableView:numberOfRowsInSection: 返回一个大于数组计数的数字。不。
> 
> 2) 您的一个或多个 cell# 插座未连接到您的笔尖，或者未连接到 UITableViewCell（或子类）。正确连接它们。

浏览这个**Ray Wenderlich 的链接：** [如何将搜索添加到表视图中](http://www.raywenderlich.com/forums/viewtopic.php?f=20&t=4512&start=40)

检查这个**SO 问题：**

**1)** [UITableView dataSource 必须从 tableView 返回一个单元格：cellForRowAtIndexPath: Exception](https://stackoverflow.com/questions/2224316/uitableview-datasource-must-return-a-cell-from-tableviewcellforrowatindexpath)

**2)** [ios 5 UISearchDisplayController 崩溃](https://stackoverflow.com/questions/8066668/ios-5-uisearchdisplaycontroller-crash)

一个更漂亮的链接：[自定义原型表单元格和故事板](http://useyourloaf.com/blog/2012/06/07/prototype-table-cells-and-storyboards.html)只需查看此**部分：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  UITableViewCell *cell = [tableView
            dequeueReusableCellWithIdentifier:UYLCountryCellIdentifier];
  if (cell == nil)
  {
    [self.countryCellNib instantiateWithOwner:self options:nil];
    cell = self.countryCell;
    self.countryCell = nil;
  }
  // Code omitted to configure the cell...
  return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:56:50.100

您的代码似乎有问题。您检查 cell == nil，而它最初未设置为 nil。您根据搜索模式以这种方式分配单元格也看起来有点奇怪。

无论如何，我会以不同的方式来做。恕我直言，我这样做的方式几乎是规范的 :) 只需使用您的搜索结果为您的单元格填充每种情况下的正确数据（搜索模式和正常模式）。在此示例中，searchResult 和 dataSource 是带有字符串的数组。我认为在现实生活中对你来说这将是更复杂的东西，比如 nsdictionary 数组。

在您的视图控制器中：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)_section
{
        /* Use correct data array so that in search mode we draw cells correctly. */
        NSMutableArray *data = searching ? searchResult : dataSource;
        return [data count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{       
        /* Use correct data array so that in search mode we draw cells correctly. */
        NSMutableArray *data = searching ? searchResult : dataSource;
        static NSString *CellIdentifier = @"CellId";

        CustomTableViewCell *cell = (CustomTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
                cell = [[[CustomTableViewCell alloc] initWithIdentifier:CellIdentifier] autorelease];
        }

        /* Note this is only correct for the case that you have one section */
        NSString *text = [data objectAtIndex:[indexPath row]]

        cell.textLabel.text = text;
        /* More setup for the cell. */
        return text;
} 
```

以下是搜索控制器和一些助手的委托方法：

```
- (void) searchTableView
{
        NSString *searchText = searchBar.text;

        for (NSString *item in dataSource) {
                NSRange range = [item rangeOfString:searchText options:NSCaseInsensitiveSearch];
                if (range.length > 0) {
                        [searchResult addObject:item];
                }
        }
}

- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller
{
        searching = NO;
}

- (void)searchDisplayControllerWillEndSearch:(UISearchDisplayController *)controller
{
        searching = NO;
        [self.tableView reloadSections:[NSIndexSet indexSetWithIndex:0]
                      withRowAnimation:UITableViewRowAnimationAutomatic];
        [searchResult removeAllObjects];
}

- (BOOL)searchDisplayController:(UISearchDisplayController *)controller
shouldReloadTableForSearchString:(NSString *)searchText
{
        [searchResult removeAllObjects];

        if ([searchText length] > 0) {
                searching = YES;
                [self searchTableView];
        } else {
                searching = NO;
        }
        return YES;
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-11T06:18:38.707

我有同样的问题，这就是所做的，现在它工作得很好..

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Here is my code BEFORE
    //
    OPUsersTableViewCell *tableCell = [tableView dequeueReusableCellWithIdentifier:TableCellID];

    // Here is my code AFTER
    //
    OPUsersTableViewCell *tableCell = [self.groupTableView dequeueReusableCellWithIdentifier:TableCellID]; 
```

笔记：

`self.groupTableView`是在哪里`prototype cell`...

# vb.net - 如何在记事本中获取光标的位置

> ID：14191846
> 
> 赞同：0
> 
> 时间：2013-01-07T07:44:44.430
> 
> 标签：vb.net

我需要使用 VB.NET 2010 在另一个应用程序中获取光标在屏幕上的当前位置/坐标。例如，如何在记事本或 MS Word 中获取当前光标位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:31:52.380

我猜这对于记事本来说是不可能的。对于 Word，如果此 Interop Modell 公开此信息，则它是可能的。如果在word中选择了文本，您可以使用选择对象找到您需要的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:01:33.780

这会将变量设置为光标位置。

```
 Dim MousePosition As Point
    MousePosition = Cursor.Position 
```

然后你可以在你想要的地方使用这个变量

# postgresql - Postgresql Order By 很奇怪

> ID：14191848
> 
> 赞同：2
> 
> 时间：2013-01-07T07:45:19.423
> 
> 标签：postgresql

我不熟悉 Postgresql。尝试学习它，因为我正在将我的 Rails 应用程序移动到 Heroku。

这是一个关于排序问题的例子。

```
# select name_kr from users order by name_kr;

 name_kr 
---------
 곽철
 김영
 박영
 안준
 양민
 이남
 임유
 정신
 차욱
 강동수
 강상구
 강신용
 강용석
 강지영
 강지원
 강호석 
```

你可能听不懂韩语。但一个奇怪的事情是它首先显示 2 个音节单词和 3 个音节 - 每个都在其组中正确排序。

以下是相关信息：

```
kwanak_development=# show lc_collate;
 lc_collate  
-------------
 en_US.UTF-8
(1 row)

kwanak_development=# show lc_ctype;
  lc_ctype   
-------------
 en_US.UTF-8
(1 row) 
```

我做错了什么？

谢谢。

山姆

附加信息：

我尝试排序排序，得到了一个有趣的结果。

```
select name_kr from users order by name_kr collate "ko_KR"; => Same as above
select name_kr from users order by name_kr collate "C"; => Correct Result 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T07:34:40.400

`sort`PostgreSQL 排序规则主要由 PostgreSQL 处理，并且应该遵循与 UNIX命令相同的规则。要做的第一件事是尝试使用该`sort`命令来确定这是否确实是问题所在，或者它是否仅仅是堆栈中更深层次的问题的症状。

如果`sort`在相同的语言环境设置下没有显示这个问题，那么请向 PostgreSQL 团队提交一个错误（这让我觉得不太可能，但这是可能的）。如果它确实显示了问题，那么您将需要与您正在使用的标准 C 库的制造商联系。

作为对我们这些不熟悉韩语排序的人的最后说明，您可能想尝试描述所需的排序，而不仅仅是问题排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T20:55:10.510

在 OS X 上使用 GNU `sort`5.93，我在默认语言环境中得到相同的顺序（这可能是 en_GB.utf8 或 en_US.utf8 之一 - 无论如何都不懂韩语）。但是，如果我设置`LC_ALL`为 ko_KR.utf8，我会首先对三个字符串进行排序。两个和三个字符串的集合在它们之间保持相同的顺序。

请注意，所有三个字符的名称都以“강”开头。这看起来是'강'在一个幼稚的语言环境中排序在所有其他初始字符之后，但在韩语中排序在它之前。如果我插入一个由三个字符串之一组成的无意义字符串，其中初始字符替换为两个字符串之一的初始字符（即“양호석”），那么它与两个字符排序字符串。这说明排序顺序与字符串的长度无关，只与'강'的排序有关。

我完全不知道为什么“강”会排在我所在地区的其他字符之后。'강' 位于代码点 U+AC15。'곽' 位于代码点 U+ACFD。'차' 位于代码点 U+CC28。如果排序是在原始代码点上，“강”将排在其他字符之前，就像韩语排序一样。

如果我用 Java 对这些字符串进行排序，它们首先会出现 '강' 字符串，就像韩语排序一样。Java 对 unicode 问题非常小心。它和韩国人一致的事实让我认为这是正确的顺序。

如果您以 UTF-8 对字符进行编码，那么它的第一个字节是 0xea，它将再次排在其他字符之前，这些字符编码为从 0xea 到 0xec 的值开始的字节。这大概就是为什么`collate "C"`会给你正确的结果 - 该设置导致字符串被排序为不透明字节的字符串，而不是编码字符。

我对为什么`collate "ko_KR"`给出错误的结果感到完全困惑。

# css - Spotify 预览 API CSS 资源

> ID：14191849
> 
> 赞同：0
> 
> 时间：2013-01-07T07:45:20.267
> 
> 标签：css, spotify

我在 Preview API 中看不到对 api.css、adam.css 和 eve.css 文件的引用，也找不到他们希望应用程序使用的按钮和图标的任何引用。

有没有我错过的页面？

我试过了：

[此处](https://developer.spotify.com/technologies/apps/preview/)和[此处](https://developer.spotify.com/technologies/apps/guidelines/integration/) （与 Preview API 不兼容）

还有[这个](https://github.com/spotify/apps-tutorial/tree/1.0)，但它没有提供太多帮助（除了帮助解码可怕的[JSDoc 站点](https://developer.spotify.com/technologies/apps/docs/preview/api/)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:51:54.553

整体 api.css 文件已被拆分为单独的样式表，每个样式表对应于特定的视图模块。因此，您只需要包含您使用的模块的 CSS 文件。

现在，这些是文件：

*   $views/css/list.css
*   $views/css/image.css
*   $views/css/buttons.css
*   $views/css/throbber.css
*   $views/css/popup.css

[您可以在Views 教程预览](https://developer.spotify.com/static/builds/views-tutorial-preview.zip)中看到它们的实际效果，其中一些还在[GitHub 上的应用程序教程中使用](https://github.com/spotify/apps-tutorial/tree/1.0)。

# c++ - 你如何模拟加速计时器的时间？

> ID：14191855
> 
> 赞同：18
> 
> 时间：2013-01-07T07:46:00.810
> 
> 标签：c++, unit-testing, boost-asio

如果可能，您如何模拟时间以在单元测试中触发加速计时器？

例如，是否有可能实现以下目标：

```
#include <iostream>
#include <boost/asio.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

void print(const boost::system::error_code& /*e*/)
{
  std::cout << "Hello, world!\n";
}

int main()
{
    boost::asio::io_service io;        // Possibly another class needed here, or a way of setting the clock to be fake

    boost::asio::deadline_timer t(io, boost::posix_time::hours(24));
    t.async_wait(&print);

    io.poll();  // Nothing should happen - no handlers ready

    // PSEUDO-CODE below of what I'd like to happen, jump ahead 24 hours
    io.set_time(io.get_time() + boost::posix_time::hours(24));

    io.poll();  // The timer should go off

    return 0;
} 
```

**更新**感谢所有答案，他们对问题提供了极好的洞察力。我提供了自己的答案 (SSCCE)，但如果没有提供的帮助，我无法做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T02:20:47.017

该`basic_deadline_timer`模板有一个[特征](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/TimeTraits.html)参数，您可以使用它来提供您自己的时钟。Boost Asio 的作者有一篇[博](http://blog.think-async.com/2007/08/time-travel.html)文展示了如何做到这一点。这是帖子中的一个示例：

```
class offset_time_traits
  : public asio::deadline_timer::traits_type
{
public:
  static time_type now()
  {
    return add(asio::deadline_timer::traits_type::now(), offset_);
  }

  static void set_now(time_type t)
  {
    offset_ =
      subtract(t, asio::deadline_timer::traits_type::now());
  }

private:
  static duration_type offset_;
};

typedef asio::basic_deadline_timer<
    boost::posix_time::ptime, offset_time_traits> offset_timer; 
```

`offset_timer`也许您可以在整个应用程序中使用类似的东西，但只`set_now()`在运行测试时调用？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T06:42:49.777

据我所知，没有办法模拟时间变化或使用 Boost[设置时间。](https://svn.boost.org/trac/boost/ticket/5387)在扩展可用于解决此问题的一些技术之前，需要考虑以下几点：

*   Boost.Asio 提供了使用时钟的计时器，但不提供时钟，因为它们超出了 Boost.Asio 的范围。因此，与时钟相关的功能，例如设置或仿真，不在 Boost.Asio 的能力范围内。
*   可以在内部使用单调时钟。因此，时钟（模拟的或实际的）的变化可能不会产生预期的效果。例如，[boost::asio::steady_timer](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/steady_timer.html)不会受到系统时间更改的影响，并且使用的反应器实现`epoll`可能需要长达 5 分钟才能检测到系统时间的更改，因为它受到保护，不会更改系统时钟。
*   对于 Boost.Asio 计时器，更改过期时间将根据[WaitableTimerService](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/WaitableTimerService.html)和[TimerService](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/TimerService.html)要求隐式取消异步等待操作。此取消会导致未完成的异步等待操作尽快完成，并且取消的操作将具有错误代码`boost::asio::error::operation_aborted`。

尽管如此，根据正在测试的内容，有两种总体技术可以解决此问题：

*   缩放时间。
*   包装类型。

* * *

## 缩放时间

缩放时间在多个计时器之间保持相同的整体相对流。例如，到期时间为 1 秒的计时器应在到期时间为 24 小时的计时器之前触发。最小和最大持续时间也可用于附加控制。此外，缩放持续时间适用于不受系统时钟影响的计时器，例如`steady_timer`.

这是一个示例，其中应用了 1 小时 = 1 秒的比例。因此，24 小时到期实际上是 24 秒到期。此外，

```
namespace bpt = boost::posix_time;
const bpt::time_duration max_duration = bpt::seconds(24);
const boost::chrono::seconds max_sleep(max_duration.total_seconds());

bpt::time_duration scale_time(const bpt::time_duration& duration)
{
  // Scale of 1 hour = 1 seconds.
  bpt::time_duration value =
    bpt::seconds(duration.total_seconds() * bpt::seconds(1).total_seconds() /
      bpt::hours(1).total_seconds());
  return value < max_duration ? value : max_duration;
}

int main()
{
  boost::asio::io_service io;
  boost::asio::deadline_timer t(io, scale_time(bpt::hours(24)));
  t.async_wait(&print);
  io.poll();
  boost::this_thread::sleep_for(max_sleep);
  io.poll();
} 
```

## 包装类型

有几个不同的位置可以引入新类型以获得一些所需的行为。

*   将[`deadline_timer`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/deadline_timer.html).
*   创建一个自定义[WaitableTimerService](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/WaitableTimerService.html)。
*   创建自定义处理程序。

在所有这些情况下，重要的是要考虑更改过期时间将隐式取消异步等待操作的行为。

### 将`deadline_timer`.

包装[`deadline_timer`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/deadline_timer.html)需要在内部管理用户的处理程序。如果计时器将用户的处理程序传递给与计时器关联的服务，则当到期时间更改时，将通知用户处理程序。

自定义计时器可以：

*   将`WaitHandler`提供的内容存储在[`async_wait()`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/basic_deadline_timer/async_wait.html)内部 ( `user_handler_`)。
*   调用时`cancel()`，会设置一个内部标志以指示已发生取消 ( `cancelled_`)。
*   聚合一个计时器。设置到期时间后，内部处理程序将传递给聚合计时器的`async_wait`. 每当调用内部处理程序时，它都需要处理以下四种情况：
    *   正常超时。
    *   显式取消。
    *   从到期时间更改为时间的隐式取消不在未来。
    *   从到期时间更改为未来时间的隐式取消。

内部处理程序代码可能如下所示：

```
void handle_async_wait(const boost::system::error_code& error)
{
  // Handle normal and explicit cancellation.
  if (error != boost::asio::error::operation_aborted || cancelled_)
  {
    user_handler_(error);
  }
  // Otherwise, if the new expiry time is not in the future, then invoke
  // the user handler.
  if (timer_.expires_from_now() <= boost::posix_time::seconds(0))
  {
    user_handler_(make_error_code(boost::system::errc::success));
  }
  // Otherwise, the new expiry time is in the future, so internally wait.
  else
  {
    timer_.async_wait(boost::bind(&custom_timer::handle_async_wait, this,
                      boost::asio::placeholders::error));
  }
} 
```

虽然这很容易实现，但它需要充分了解计时器接口以模仿其前置/后置条件，但要偏离的行为除外。测试中也可能存在风险因素，因为需要尽可能地模仿行为。此外，这需要更改用于测试的计时器类型。

```
int main()
{
    boost::asio::io_service io;

    // Internal timer set to expire in 24 hours.
    custom_timer t(io, boost::posix_time::hours(24));

    // Store user handler into user_handler_.
    t.async_wait(&print);

    io.poll(); // Nothing should happen - no handlers ready

    // Modify expiry time.  The internal timer's handler will be ready to
    // run with an error of operation_aborted.
    t.expires_from_now(t.expires_from_now() - boost::posix_time::hours(24));

    // The internal handler will be called, and handle the case where the
    // expiry time changed to timeout.  Thus, print will be called with
    // success.
    io.poll();

    return 0;
} 
```

### 创建自定义`WaitableTimerService`

创建一个自定义的 [WaitableTimerService](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/WaitableTimerService.html)有点复杂。尽管文档说明了 API 和前置/后置条件，但实现需要了解一些内部结构，例如`io_service`实现和调度程序接口，这通常是一个反应器。如果服务将用户的处理程序传递给调度程序，则用户处理程序将在到期时间更改时收到通知。因此，类似于包装计时器，用户处理程序必须在内部进行管理。

这与包装计时器具有相同的缺点：需要更改类型并且由于尝试匹配前置/后置条件时的潜在错误而具有继承风险。

例如：

```
deadline_timer timer; 
```

相当于：

```
basic_deadline_timer<boost::posix_time::ptime> timer; 
```

并会变成：

```
basic_deadline_timer<boost::posix_time::ptime,
                     boost::asio::time_traits<boost::posix_time::ptime>,
                     CustomTimerService> timer; 
```

虽然这可以通过 typedef 来缓解：

```
typedef basic_deadline_timer<
  boost::posix_time::ptime,
  boost::asio::time_traits<boost::posix_time::ptime>,
  CustomTimerService> customer_timer; 
```

### 创建自定义处理程序。

处理程序类可用于包装实际处理程序，并提供与上述相同的方法，具有额外的自由度。虽然这需要更改类型并修改提供给 的内容`async_wait`，但它提供了灵活性，因为自定义处理程序的 API 没有预先存在的要求。这种降低的复杂性提供了最小风险的解决方案。

```
int main()
{
    boost::asio::io_service io;

    // Internal timer set to expire in 24 hours.
    deadline_timer t(io, boost::posix_time::hours(24));

    // Create the handler.
    expirable_handler handler(t, &print);
    t.async_wait(&handler);

    io.poll();  // Nothing should happen - no handlers ready

    // Cause the handler to be ready to run.
    // - Sets the timer's expiry time to negative infinity.
    // - The internal handler will be ready to run with an error of
    //   operation_aborted.
    handler.set_to_expire();

    // The internal handler will be called, and handle the case where the
    // expiry time changed to timeout.  Thus, print will be called with
    // success.
    io.poll();

    return 0;
} 
```

* * *

总而言之，以传统方式测试异步程序可能非常困难。通过适当的封装，如果没有条件构建，甚至几乎不可能进行单元测试。有时它有助于转变观点并将整个异步调用链视为一个单元，所有外部处理程序都是 API。如果异步链太难测试，那么我经常发现该链太难理解和/或维护，并将其标记为重构的候选者。此外，我经常必须编写帮助程序类型，以允许我的测试工具以同步方式处理异步操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T14:12:31.840

我不知道如何伪造时间流逝之类的东西，而且我认为提供自己的时间服务是矫枉过正的。但这里有一个想法：

通过使用硬编码的 24 小时来初始化计时器，您使用了可以被视为魔术常数的东西（意思是：您不应该做的事情）。相反，你可以试试这个：

```
boost::asio::deadline_timer t(io, getDeadLineForX()); 
```

现在，如果您`getDeadLineForX`在测试套件中存根函数，您可以通过足够小的截止日期来测试计时器，并且您不必等待 24 小时才能完成测试套件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T03:59:06.013

SSCCE，基于@free_coffee发布的[链接](http://blog.think-async.com/2007/08/time-travel.html "时间旅行")：

```
#include <boost/asio.hpp>
#include <boost/optional.hpp>

class mock_time_traits
{       
    typedef boost::asio::deadline_timer::traits_type  source_traits;

public:

    typedef source_traits::time_type time_type;
    typedef source_traits::duration_type duration_type;

    // Note this implemenation requires set_now(...) to be called before now()
    static time_type now() { return *now_; }

    // After modifying the clock, we need to sleep the thread to give the io_service
    // the opportunity to poll and notice the change in clock time
    static void set_now(time_type t) 
    { 
        now_ = t; 
        boost::this_thread::sleep_for(boost::chrono::milliseconds(2)); 
    }

    static time_type add(time_type t, duration_type d) { return source_traits::add(t, d); }
    static duration_type subtract(time_type t1, time_type t2) { return source_traits::subtract(t1, t2); }
    static bool less_than(time_type t1, time_type t2) { return source_traits::less_than(t1, t2); }

    // This function is called by asio to determine how often to check 
    // if the timer is ready to fire. By manipulating this function, we
    // can make sure asio detects changes to now_ in a timely fashion.
    static boost::posix_time::time_duration to_posix_duration(duration_type d) 
    { 
        return d < boost::posix_time::milliseconds(1) ? d : boost::posix_time::milliseconds(1);
    }

private:

    static boost::optional<time_type> now_;
};

boost::optional<mock_time_traits::time_type> mock_time_traits::now_;

typedef boost::asio::basic_deadline_timer<
            boost::posix_time::ptime, mock_time_traits> mock_deadline_timer;

void handler(const boost::system::error_code &ec)
{
    std::cout << "Handler!" << std::endl;
}

int main()
{
    mock_time_traits::set_now(boost::posix_time::time_from_string("2013-01-20 1:44:01.000"));

    boost::asio::io_service io_service;
    mock_deadline_timer timer(io_service, boost::posix_time::seconds(5));
    timer.async_wait(handler);

    std::cout << "Poll 1" << std::endl;
    io_service.poll();

    mock_time_traits::set_now(mock_time_traits::now() + boost::posix_time::seconds(6));

    std::cout << "Poll 2" << std::endl;
    io_service.poll();

    std::cout << "Poll 3" << std::endl;
    io_service.poll();

    return 0;
}

// Output
Poll 1
Poll 2
Handler!
Poll 3 
```

感谢@free_coffee 提供[此链接](http://blog.think-async.com/2007/08/time-travel.html "时间旅行")到boost asio 的创建者的博客条目。以上略有修改（我相信略有改进）。通过不使用系统时钟上的偏移量，您可以完全控制计时器：它们不会触发，直到您明确将时间设置为超过计时器。

可以通过使`this_thread::sleep`部件可配置来改进解决方案。请注意， [ [1](http://blog.think-async.com/2007/08/time-travel.html "Time Travel")`to_posix_duration` ]中描述的 hack需要使用比.`sleep`

对我来说，这种方法似乎仍然有点神奇，因为`time_traits`没有很好的记录，特别是 hack`to_posix_duration`有一种巫毒教的味道。我想这只是归结为对`deadline_timer`实现的深入了解（我没有）。

# android - 从 android 设备录制 vlc 流

> ID：14191860
> 
> 赞同：2
> 
> 时间：2013-01-07T07:46:33.183
> 
> 标签：android, streaming, vlc, recording

我想在 android 中开发一个可以记录 VLC 流（http 或 rtsp）的应用程序。

我在我的 Fedora 16（32 位）系统上运行 VLC Player，我将使用 VLC HTTP Streaming 选项开始流式传输。我能够正确地获取流并在具有 MediaPlayer 类的 android 设备（Sony Experia Neo L ICS 4.0.4）中播放它。但我不想玩，只是想在安卓设备上录制。

我需要怎么做？

帮我解决这个问题。

谢谢你

拉金德拉

# html - 同一 HTML 页面中的 Jsp 和 Servlet

> ID：14191862
> 
> 赞同：0
> 
> 时间：2013-01-07T07:47:00.603
> 
> 标签：html, jsp, servlets

我想开发一个包含注册和登录按钮的登录 HTML 页面。在运行时的 HTML 页面中，我可以选择任何按钮（登录/注册）。单击注册时，页面应重定向到 Signup JSP 程序，单击登录页面时，页面应重定向到登录 Servlet 程序。现在的问题是我必须在html页面中的表单操作方法中提到哪个页面（JSP/SERVLET）。? 如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:49:06.227

你可以只插入文本

例子：

```
<a href="http://urlToSignInPage">Sign In</a>
<a href="http://urlToSignUpPage">Sign Up</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:49:11.630

它应该是简单的超链接[GET]，您不需要为此提交表单

```
<a href="urlToSignInPage"><!--sign in button code --></a>

<a href="urlToSignUpPage"><!--sign up button code --></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T14:36:02.540

如果要使用按钮，则必须通过按钮的 onClick 等事件`jQuery`。`javascript`这是几个例子。正是你需要的。您不需要通过表单操作提交来做到这一点。

```
<html>
<head>
<script>
function open_win()
{
    window.open("http://yoururl.com");
    /*or 
    window.location.href = "/yourpathToPageOrServletIfany/yourfiel.jsp.html.phpOrYourServletMapping";
    */
}
</script>
</head>
<body>

<input type="button" value="Open Window" onclick="open_win()">

</body>
</html> 
```

jquery 也有同样的可能`$('#buttonId').click(function(){...in here ...});`

# ios - 应用访问地图服务时系统弹出UIAlertView，可以更改UIAlertView的消息吗？

> ID：14191865
> 
> 赞同：0
> 
> 时间：2013-01-07T07:47:19.267
> 
> 标签：ios, location, uialertview

我的 ios 应用程序访问用户位置，系统弹出 UIAlertView？如何获得 UIAlertView 并更改消息按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:20:54.033

**`NSLocationUsageDescription`**您可以使用info.plist 中的键更改消息。

将此键添加到您的 info.plist 并将消息添加为它的值。

> **NSLocationUsageDescription**
> 
> `NSLocationUsageDescription`(String - iOS) 描述应用访问用户位置信息的原因。当系统提示用户允许访问时，此字符串将显示为对话框的一部分。
> 
> iOS 6.0 及更高版本支持此密钥。

请检查[**InfoPlistKeyReference**](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html)

**或者**

类的使用`setPurpose:`方法`CLLocationManager`。

初始化后，使用添加您的消息`setPurpose:`

```
CLLocationManager *locManager = [[CLLocationManager alloc] init];
[locManager setPurpose:@"My purpose"]; 
```

# mysql - 如何在sql中选择从min到max的特定数据

> ID：14191867
> 
> 赞同：-2
> 
> 时间：2013-01-07T07:47:23.503
> 
> 标签：mysql

我的桌子是

```
price 
10
20
30
40 
50
70
90
100 
```

当我传递两个参数`@min= 10`然后`@max=90` 我得到结果数据时

```
10
20
30
40
50
70
90 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:54:22.590

> 从价格在@min 和@max 之间的表中选择价格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T07:57:09.020

```
SELECT price FROM table WHERE price BETWEEN @min and @max 
```

或者

```
SELECT price FROM table WHERE price >= @min and price <= @max 
```

或者，如果您希望将其作为逗号分隔的字符串

```
SELECT CONCAT_WS(", " price) FROM table WHERE price >= @min and price <= @max 
```

# node.js - 在两台服务器上对两个单独的 node.js 进程进行负载平衡？

> ID：14191868
> 
> 赞同：0
> 
> 时间：2013-01-07T07:47:36.723
> 
> 标签：node.js, express, load-balancing, derbyjs

我运行一个小的 socket.io node.js 应用程序，它总是有少量并发用户。在大多数情况下，它可以 100% 的时间在单个进程上运行（无论是在我的 Linode 还是 Heroku[1] 上）。

我希望将它宣传几天，在此期间我预计会有相当多的流量。这意味着并发 websocket/xhr-polling 连接。但是，两个 socket.io 连接不必**相互**通信。

该应用程序在我的 Linode 上运行了很长一段时间，但我最近将其转移到了一个免费的 heroku dyno 上。即使使用 xhr-polling（heroku 本身不支持 websockets）运行它也非常快。

我很好奇如何利用我的 Linode 来运行和负载平衡应用程序。但是，如果它开始变慢，请将用户推到正在运行的 heroku dyno（反之亦然）。这应该可以使用[node-http-proxy 之](https://github.com/nodejitsu/node-http-proxy)类的东西，但是我很难让它正常运行。希望我可以对其进行微调，使其达到某个点，或者我可以轻弹一个开关，它会开始平衡用户到第二个站点。

基本上，我只是希望指出正确的方向。代码会很好，但不是必需的。解决方案甚至不必在节点中。

谢谢！

[1] 我也尝试了 nodejitsu 很长一段时间，只是没有发现它可以用于生产。

编辑：我应该只使用一个简单的循环，如此处所述[吗](https://stackoverflow.com/questions/6586362/node-js-supports-multiple-load-balance-across-servers?rq=1)？如果我想偏爱其中一个怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:33:08.623

您可以将[Foreman](http://ddollar.github.com/foreman/)用于此类工作：

**档案**

```
web: node app.js 
```

然后只需在命令行中调用它：

```
$ foreman start -c web=4 
```

这将创建 4 个节点应用程序实例，侦听不同的端口。

```
08:29:41 web.1  | started with pid 2576
08:29:41 web.2  | started with pid 1968
08:29:41 web.3  | started with pid 2712
08:29:41 web.4  | started with pid 5280
08:29:42 web.3  | Express server listening on port 5002
08:29:42 web.1  | Express server listening on port 5000
08:29:42 web.2  | Express server listening on port 5001
08:29:42 web.4  | Express server listening on port 5003 
```

然后，您可以只使用 nginx 并将它们设置为您的上游。

# perl - 读取和写入同一个文件

> ID：14191873
> 
> 赞同：0
> 
> 时间：2013-01-07T07:47:50.160
> 
> 标签：perl

我正在使用我在网上找到的这段代码来读取我的 Perl 脚本中的属性文件：

```
open (CONFIG, "myfile.properties");
while (CONFIG){
  chomp;     #no new line
  s/#.*//;   #no comments
  s/^\s+//;  #no leading white space
  s/\s+$//;  #no trailing white space
  next unless length;
  my ($var, $value) = split (/\s* = \s*/, $_, 2);
  $$var = $value;
} 
```

是否也可以在此 while 循环中写入文本文件？假设文本文件如下所示：

```
#Some comments
a_variale = 5
a_path    = /home/user/path

write_to_this_variable = "" 
```

我怎样才能在里面放一些文字`write_to_this_variable`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:00:38.990

覆盖具有可变长度记录（行）的文本文件并不实际。复制文件是正常的，如下所示：

```
my $filename = 'myfile.properites';
open(my $in, '<', $filename) or die "Unable to open '$filename' for read: $!";

my $newfile = "$filename.new";
open(my $out, '>', $newfile) or die "Unable to open '$newfile' for write: $!";

while (<$in>) {
    s/(write_to_this_variable =) ""/$1 "some text"/;
    print $out;
}

close $in;
close $out;

rename $newfile,$filename or die "unable to rename '$newfile' to '$filename': $!"; 
```

您可能必须对您正在编写的文本进行清理，例如`\Q`它是否包含非字母数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:50:38.993

这是一个程序示例，它使用[`Config::Std`](https://metacpan.org/module/Config%3a%3aStd)模块读取和写入像您这样的简单配置文件。据我所知，它是唯一可以保留原始文件中任何注释的模块。

有两点需要注意：

1.  中的第一个哈希键`$props{''}{write_to_this_variable}`构成将包含该值的配置文件部分的名称。如果没有部分，对于您的文件，那么您必须在此处使用空字符串

2.  如果您需要在 a 值周围加上引号，那么您必须在分配给哈希元素时显式添加这些，就像我在这里所做的那样`'"Some text"'`

我认为程序的其余部分是不言自明的。

```
use strict;
use warnings;

use Config::Std { def_sep => ' = ' };

my %props;
read_config 'myfile.properties', %props;

$props{''}{write_to_this_variable} = '"Some text"';

write_config %props; 
```

**输出**

```
#Some comments
a_variale = 5
a_path = /home/user/path

write_to_this_variable = "Some text" 
```

# java - 通过服务访问活动

> ID：14191874
> 
> 赞同：0
> 
> 时间：2013-01-07T07:47:55.833
> 
> 标签：java, android, service, android-activity

我有一个活动和一个服务。该活动有一个`TextView`成员和一个`setText()`方法。我想通过服务调用该方法，我该怎么做？这是代码：

活动：

```
public class MainActivity extends Activity {
    private TextView tv1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        this.tv1 = (TextView) findViewById(R.id.textView1);
        Intent intent = new Intent(this,MyService.class);
        startService(intent);
    }

    // <-- some deleted methods.. -->

    public void setText(String st) {
        this.tv1.setText(st);
    }
} 
```

服务：

```
public class MyService extends Service {
    private Timer timer;
    private int counter;

    public void onCreate() {
        super.onCreate();
        this.timer = new Timer();
        this.counter = 0;
        startService();
    }

    private void startService() {
        timer.scheduleAtFixedRate(new TimerTask() {
            public void run() {
                //MainActivityInstance.setText(MyService.this.counter); somthing like that
                MyService.this.counter++;
                if(counter == 1000)
                    timer.cancel();
            }
        },0,100);
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:06:52.840

您可以使用意图将任何信息（即 TextView 成员的计数器）发送到 Activity。

```
public void run() {
    //MainActivityInstance.setText(MyService.this.counter); somthing like that
    MyService.this.counter++;
    Intent intentBroadcast = new Intent("MainActivity");
    intentBroadcast.putExtra("counter",MyService.this.counter);
    sendBroadcast(intentBroadcast);
    if(counter == 1000)
    timer.cancel();
} 
```

...然后，您将使用广播接收器在 Activity 中接收数据

```
/**
 * Declares Broadcast Reciver for recive location from Location Service
 */
private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        // Get data from intent
        serviceCounter = intent.getIntExtra("counter", 0);
        // Change TextView
        setText(String.valueOf(counterService));
    }
}; 
```

# java - 从 Cayenne DataConext 获取 DataSource

> ID：14191876
> 
> 赞同：1
> 
> 时间：2013-01-07T07:48:07.547
> 
> 标签：java, jdbc, orm, apache-cayenne

目前我使用 Cayenne 作为我的 ORM。我需要获取 DataSource 以在我的代码中初始化 Velocity Engine。我可以手动创建数据源，但我不想这样做并且想使用 Cayenne 的现有数据源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T17:52:35.957

在 Cayenne 3.1 中，这是相当微不足道的：

```
ServerRuntime runtime = .. // this exists in every app
DataSource ds = runtime.getDataSource("MyDataNode"); 
```

在早期版本中，它只是稍微困难一点：

```
DataDomain dd = context.getParentDataDomain();
DataSource ds = dd.getDataNode("MyDataNode").getDataSource(); 
```

最后一种方法也适用于 3.1 顺便说一句。

# php - 标签到html 中的输入元素我有一个表单，其中包含几个输入和选择元素。我的问题是我可以使用选项卡在输入元素之间移动，但不能使用选择下拉菜单。我尝试了 tabindex="2" 属性，但它没有影响任何东西。有没有办法做到这一点？这是我的代码示例。如果它改变了我在 php 中的任何内容，但我无法将它添加到 html ether 中的选项卡中。

| <select><option value="volvo" &g<="" h1="">ID：14191879 赞同：0 时间：2013-01-07T07:48:49.700 标签：php, html, drop-down-menu, input, tabs 回答 #1 赞同：1 时间：2013-01-07T10:51:06.463 例如，在 Firefoxselect上，您的真实示例页面http://cafe.bg14.com/purchases.php上的元素 可以被制表符，它只是在制表符顺序中较晚。原因是您正在tabindex为某些表单字段设置属性，但不是全部。没有属性的人会排在最后。 要么删除所有tabindex属性（如果自然的跳格顺序，按 HTML 标记中的顺序，是可以的），或者将它们用于应该参与跳格的所有字段和其他项目。 在决定要使用哪个版本的 HTML 之后，您还应该使用 HTML W3C 验证器修复标记。该页面现在声明了 XHTML 1.0，但使用了不带引号的属性值和 HTML5 特性。这使得更难看出存在严重的标记错误，例如th元素未包含在tr元素中。（破坏 HTML 表格模型可能会对呈现和功能产生影响。） 回答 #2 赞同：0 时间：2013-01-07T08:06:59.953 试试下面的代码，我已经测试过它并且它也可以工作。 我根据您在问题中要求做的事情来回答它。 <form action="#" method="post"> <p><input type="text" name="first" tabindex="10" /></p> <p><input type="text" name="second" tabindex="20" /></p> <p> <select name="third" tabindex="30"> <option value="foo">Foo</option> <option value="bar">Bar</option> </select> </p> <p> <select name="fourth" tabindex="40"> <option value="foo">Foo</option> <option value="bar">Bar</option> </select> </p> <p><input type="text" name="fifth" tabindex="50" /></p> <input type="submit" value="Submit" tabindex="100" /> </form></option></select> |

# javascript - 用标签将所有电子邮件匹配项括在字符串中

> ID：14191881
> 
> 赞同：1
> 
> 时间：2013-01-07T07:49:03.603
> 
> 标签：javascript, regex, replace

我一直在尝试不同的函数来替换DIV`blahhhh@blahhh.blahhh`中的任何函数，但没有成功。`contentEditable`正则表达式存在问题，或者`[String].replaceAll`不是 Chrome 中现有的原型，所以我需要使用`replaceAll`我在网上找到的任何原型。

用自定义模式替换字符串中的所有电子邮件的跨浏览器（Chrome/WebKit/Moz）算法应该是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T07:55:01.617

`replaceAll`确实不是标准函数，但正则表达式应该可以工作：

像这样简单的东西：

> [A-Z0-9._%+-]+@[A-Z0-9.-]+.[AZ]{2,}

已经可以很好地工作了：

```
var s = "sample@mail.com is a sample email address with an @, as is some.mail@some.government";
s.replace(/([A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,})/ig, '<tag>$1</tag>');
// "<tag>sample@mail.com</tag> is a sample email address with an @, as is <tag>some.mail@some.government</tag>";

# Match:
# (              --> Start group
# [A-Z0-9._%+-]+ --> one or more characters within the specified range,
# @              --> Followed by an `@`,
# [A-Z0-9.-]+    --> Followed by some more characters,
# \.             --> Followed by an dot,
# [A-Z]{2,}      --> followed by 2 or more letters,
# )              --> End group.
# ig             --> (i)gnore case, (g)lobal.
# In the replacement:
# $1             --> Content of the first pair of `()` 
```

# python - 哪种算法最适合用 Python 解决像“Boggle”这样的单词搜索游戏

> ID：14191889
> 
> 赞同：6
> 
> 时间：2013-01-07T07:49:39.487
> 
> 标签：python, algorithm, boggle

我正在编写一个类似于[Boggle](http://en.wikipedia.org/wiki/Boggle)的游戏，玩家应该在一个由随机字母组成的大字符串中找到单词。

例如，有五个数组，里面有这样的字符串。五行，每行由六个字母组成：

```
AMSDNS
MASDOM
ASDAAS
DSMMMS
OAKSDO 
```

因此，游戏的用户应该使用可用的字母来制作单词，并牢记以下限制和规则：

*   不可能重复同一个字母来造一个词。我说的是游戏中的“物理”字母，即骰子。它不可能使用相同的骰子两次或更多次来制作单词。
*   不可能“跳”任何字母来造词。组成单词的字母必须是连续的。
*   用户可以向她想要的任何方向移动，而不受上述两个限制。所以它有可能先到顶部，然后到底部，然后到右边，然后再到顶部，依此类推。所以寻找单词的动作可能有点不稳定。

我想知道如何遍历所有的字符串来造词。要知道单词我会使用带有单词的 txt 文件。

我不知道如何设计一种能够执行搜索的算法，特别是考虑查找单词所需的不稳定动作并遵守限制。

我已经实现了用户体验、掷骰子和填满棋盘游戏的逻辑，以及六字母骰子的所有逻辑。

但这部分并不容易，我想阅读您对这个有趣挑战的建议。

我在这个游戏中使用 Python，因为它是我用来编码的语言，也是我最喜欢的语言。但是算法本身的解释或建议也应该很好，与语言无关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:17:58.597

您可能会发现[Trie](http://en.wikipedia.org/wiki/Trie)很有用 - 将所有字典单词放入 Trie，然后从 Boggle 网格中创建另一个 Trie，只要您匹配字典 Trie。

即字典特里：

```
S->T->A->C->K = stack
      \->R->K = stark
         \->T = start 
```

网格：（简化）

```
STARKX 
XXXTXX 
XXXXXX 
```

Grid trie：（仅从 S 开始显示 - 对于 ART 等也从 A 开始）

```
S->X (no matches in dict Trie, so it stops) 
\->T->X
   \->A-R->K (match)
      | |->T (match)
      | \->X  
      \->C->K (match)
         \->X 
```

[您可以像这样](http://softwareramblings.com/2008/11/graphviz-and-the-visitor-pattern.html)使用 GraphViz 可视化您的尝试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T08:15:28.880

基本算法很简单。

*   对于每个图块，请执行以下操作。
    *   从一个空的候选词开始，然后访问当前图块。
    *   按照以下步骤访问磁贴。
        *   将图块位置的字母添加到候选词中。
        *   候选词是已知词吗？如果是这样，请将其添加到找到的单词列表中。
        *   候选词是任何已知词的前缀吗？
            *   如果是这样，对于每个没有被访问以形成候选词的相邻瓦片，访问它（即，递归）。
            *   如果不是，则回溯（停止考虑该候选词的新图块）。

在询问“这个词是我字典中任何词的前缀”的问题时，为了使事情顺利进行，请考虑将您的字典表示为[trie](http://en.wikipedia.org/wiki/Trie)。尝试为单词和前缀提供快速查找时间。

# php - 图片上传格式

> ID：14191890
> 
> 赞同：-3
> 
> 时间：2013-01-07T07:49:50.630
> 
> 标签：php

我有一张上传照片的表格。那张照片应该是`.jpg`、`.jpeg`、`.png`或`.bmp`。当我尝试上传图像或照片时，它将存储在一个临时文件夹中，并且图像/照片的名称应该是表单的 user_id。直到完成..

但我的问题是，

1.  只有`.jpg`文件被上传并显示，当我尝试上传其他类型时，它将存储在临时文件夹中，并且不显示。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-07T07:55:30.877

***只需尝试以下示例：***

```
<?php
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

    if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
      echo $_FILES["file"]["name"] . " already exists. ";
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
      echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
      }
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

我认为这可以帮助您解决问题。

# ios - 更新开发和分销证书 - 我应该为两者使用相同的 CSR 吗？

> ID：14191894
> 
> 赞同：5
> 
> 时间：2013-01-07T07:50:48.813
> 
> 标签：ios, objective-c, xcode, certificate, csr

我需要更新我的开发和分销证书。它很快就要到期了，在 100% 确定我在做正确的事情之前，我有点担心这样做。（这些证书附带的应用商店中有 20 个应用程序）无论如何，我已经在线阅读了一些指南，但在我从我的钥匙串请求新的 CSR 之后，我找不到答案，我应该使用相同的吗`certSigningRequest`文件 bor 开发和分发，还是应该在每个文件之前创建一个新文件？

如果我没有保存去年的 CSR，我是否需要上传新的 pem 文件才能在我的应用程序上获得推送通知？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T08:30:12.473

是的你可以。这没什么不好，我一直都在做。事实上，请保留您的 CSR，以便您将来使用它并节省一些精力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:19:28.337

是的，您只使用一个 CSR，当您的证书在供应门户中获得批准时，您正在创建分发和开发证书。

之后，您总是可以创建具有不同权限和不同证书的新用户，但为什么要麻烦呢？

# oracle - 带有 INSERT INTO WHERE 条件的 INSERT 触发器

> ID：14191895
> 
> 赞同：0
> 
> 时间：2013-01-07T07:50:55.103
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我正在研究一个需要 INSERT INTO 和 WHERE 逻辑的触发器。

我有三张桌子。

缺席表：

```
-----------------------------
|  user_id | absence_reason |
-----------------------------
|  1234567 |   40           |
|  1234567 |   50           |
|  1213    |   40           |
|  1314    |   20           |
|  1111    |   20           |
----------------------------- 
```

公司表：

```
-----------------------------
| user_id  | company_id     |
-----------------------------
| 1234567  |  10201         |
| 1213     |  10200         |
| 1314     |  10202         |
| 1111     |  10200         |
----------------------------- 
```

就业表：

```
--------------------------------------
| user_id  |   emp_type    |  emp_no |
--------------------------------------
| 1234567  |   Int         |    1    |
| 1213     |   Int         |    2    |   
| 1314     |   Int         |    3    |
| 1111     |   Ext         |    4    |
-------------------------------------- 
```

最后我列出了只有emp_type = Int inemployment_table 和company_id = 10200 的数据应该去哪里的表格

出去：

```
--------------------------------
| employee_id | absence_reason |
--------------------------------
|  1          |    40          |
|  1          |    50          |
|  2          |    40          |
|  3          |    20          |
-------------------------------- 
```

这是我的触发器：

```
CREATE OR REPLACE TRIGGER "INOUT"."ABSENCE_TRIGGER" 
  AFTER INSERT ON absence_table 
  FOR EACH ROW
DECLARE
BEGIN
  CASE
      WHEN INSERTING THEN
           INSERT INTO out (absence_reason, employee_id)
           VALUES (:NEW.absence_reason, (SELECT employee_id FROM employment_table WHERE user_id = :NEW.user_id)
           WHERE user_id IN 
             (SELECT user_id FROM employment_table WHERE employment_type = 'INT') 
             AND user_id IN 
               (SELECT user_id FROM company_table WHERE company_id = '10200');
  END CASE;
END absence_trigger; 
```

它显然不起作用，我不知道该怎么做才能使它起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:07:37.847

将插入更改为：

```
insert into out (absence_reason, employee_id)
select :NEW.absence_reason, e.emp_no
  from employment_table e 
       inner join company_table c
               on c.user_id = e.user_id
 where e.user_id = :NEW.user_id
   and e.emp_type = 'INT'
   and c.company_id = '10200'; 
```

这应该工作。请注意`emp_no`，您的示例结构`employee_id`中还有触发器插入。我假设`emp_no`是对的。也`emp_type`vs `employment_type`。

最后在你的触发器中你有`company_id`引号。它真的是一个varchar2吗？如果可以，如果不是，请不要使用引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:06:59.687

括号不平衡。价值的那一个没有关闭。这是您的特定错误的原因，但@DazzaL 的答案看起来是正确的解决方案。

# python - 从内存中导入 Python 模块

> ID：14191900
> 
> 赞同：12
> 
> 时间：2013-01-07T07:51:26.650
> 
> 标签：python

> **可能重复：**
> [如何从内存中加载已编译的 python 模块？](https://stackoverflow.com/questions/1830727/how-to-load-compiled-python-modules-from-memory)

我在内存中有一些可能是 StringIO 的 Python 文件。如何导入存储在内存中的模块文件？我不想将它保存到磁盘然后加载。

看起来像：

```
import StringIO.StrngIO([buf]) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-07T09:02:12.987

[一个不错的方法是使用PEP 302](http://www.python.org/dev/peps/pep-0302/#specification-part-2-registering-hooks)中描述的自定义 Meta 导入钩子。可以编写一个从字符串字典动态导入模块的类：

```
"""Use custom meta hook to import modules available as strings. 
Cp. PEP 302 http://www.python.org/dev/peps/pep-0302/#specification-part-2-registering-hooks"""
import sys
import imp

modules = {"a" : 
"""def hello():
    return 'Hello World A!'""",
"b":
"""def hello():
    return 'Hello World B!'"""}    

class StringImporter(object):

   def __init__(self, modules):
       self._modules = dict(modules)

   def find_module(self, fullname, path):
      if fullname in self._modules.keys():
         return self
      return None

   def load_module(self, fullname):
      if not fullname in self._modules.keys():
         raise ImportError(fullname)

      new_module = imp.new_module(fullname)
      exec self._modules[fullname] in new_module.__dict__
      return new_module

if __name__ == '__main__':
   sys.meta_path.append(StringImporter(modules))

   # Let's use our import hook
   from a import hello
   print hello()
   from b import hello
   print hello() 
```

顺便说一句：如果你不想那么多，只想导入一个字符串，那么坚持方法 load_module 的实现。你所需要的就在它里面。

# mysql - 索引表列

> ID：14191901
> 
> 赞同：0
> 
> 时间：2013-01-07T07:51:32.143
> 
> 标签：mysql, indexing, xampp, innodb

我正在开发一个应用程序，我从该程序创建查询字符串并将其传递给一个存储过程，其中包括四个`Prepared statements`. 传递变量后，语句如下，

```
DROP TABLE IF EXISTS tbl_correlatedData;

CREATE TABLE tbl_correlatedData 
SELECT t0.*,t1.counttimeStamplocalIp,t2.countlocalPort,t3.countlocalGeo,t4.countisp,t5.countforeignip,t6.countforeignPort,t7.countforeignGeo,t8.countinfection 
FROM tbl_union_threats t0 
LEFT JOIN tbl_tsli t1 
USING (timeStamp,localIp) LEFT JOIN tbl_tslilp t2 USING (timeStamp,localIp,localPort) 
LEFT JOIN tbl_tslilplg t3 
USING (timeStamp,localIp,localPort,localGeo) 
LEFT JOIN tbl_tslilplgisp t4 
USING (timeStamp,localIp,localPort,localGeo,isp) 
LEFT JOIN tbl_tslilplgispfi t5 
USING (timeStamp,localIp,localPort,localGeo,isp,foreignip) 
LEFT JOIN tbl_tslilplgispfifp t6 
USING (timeStamp,localIp,localPort,localGeo,isp,foreignip,foreignPort) 
LEFT JOIN tbl_tslilplgispfifpfg t7 
USING (timeStamp,localIp,localPort,localGeo,isp,foreignip,foreignPort,foreignGeo) 
LEFT JOIN tbl_tslilplgispfifpfginf t8 USING (timeStamp,localIp,localPort,localGeo,isp,foreignip,foreignPort,foreignGeo,infection)
GROUP BY timeStamp,localIp;

ALTER TABLE tbl_correlatedData 
MODIFY timeStamp VARCHAR(200) NOT NULL, 
MODIFY localIp VARCHAR(200) NOT NULL, 
MODIFY localPort VARCHAR(200) NOT NULL, 
MODIFY localGeo VARCHAR(200) NOT NULL, 
MODIFY isp VARCHAR(200) NOT NULL, 
MODIFY foreignip VARCHAR(200) NOT NULL, 
MODIFY foreignPort VARCHAR(200) NOT NULL, 
MODIFY foreignGeo VARCHAR(200) NOT NULL, 
MODIFY infection VARCHAR(200) NOT NULL;

CREATE INDEX id_index ON tbl_correlatedData (timeStamp,localIp,localPort,localGeo,isp,foreignIp,foreignPort,foreignGeo,infection); 
```

但是当进程到达索引查询时，它会给出一个错误说，

`Incorrect key file for table 'tbl_correlateddata'; try to repair it`

**仅供参考：** 我正在使用 xampp 服务器的驱动器上的 19 GB 可用空间的 Windows Vista 32 位上尝试此操作，并且创建的表在 phpMyadmin 上显示其大小为 25Mb。

**编辑：** 当我尝试使用`REPAIR TABLE tbl_correlateddata`以下内容修复它时，

```
Table                                |  Op    | Msg_type |  Msg_text
-----------------------------------------------------------------------------------------------------------------
db_threatanalysis.tbl_correlateddata |  repair| Error    |  Table 'db_threatanalysis.tbl_correlateddata' doesn...
db_threatanalysis.tbl_correlateddata |  repair| status   |  Operation failed 
```

非常感谢您的帮助..提前:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:17:45.233

您正在尝试创建复合（多列）索引，这对于 Innodb 来说太长了。

您有 9 列，每列 VARCHAR(200)，因此总索引宽度为 1800 个字符。根据[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html)，Innodb 密钥限制为 3072 个字符。所以，你应该没问题，但是，不能保证`ALTER TABLE ... MODIFY ...`能够将所有列宽减少到 200 或更小，所以即使一个保持在 4000 个字符左右，你也会收到这个错误。

**解决方案：**

减少复合索引中的字段数。分析将要查询这个生成的表的查询，并且只创建真正需要的索引。我想它们中的大多数将是单列索引。

此外，您为什么需要 VARCHAR(200) 来存储诸如时间戳、ip、端口等简单的东西，这很奇怪。您可能很容易将它压缩到 10 个字节或更少，然后就可以收工了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T08:19:33.437

您的密钥大小可能太长。我在本地 MySQL 安装上尝试了类似的东西。由于我没有您的表，我无法运行 CREATE TABLE 语句。由于我的数据库是为 UNICODE 设置的，因此我的密钥大小超过 4000 字节。MySQL InnoDB 只能创建键大小为 3072 字节的索引。

我的代码如下所示：

```
CREATE TABLE tbl_correlatedData 
(
  `timeStamp` VARCHAR(200) NOT NULL, 
   localIp VARCHAR(200) NOT NULL, 
   localPort VARCHAR(200) NOT NULL, 
   localGeo VARCHAR(200) NOT NULL, 
   isp VARCHAR(200) NOT NULL, 
   foreignip VARCHAR(200) NOT NULL, 
   foreignPort VARCHAR(200) NOT NULL, 
   foreignGeo VARCHAR(200) NOT NULL, 
   infection VARCHAR(200) NOT NULL
  );

CREATE INDEX id_index ON tbl_correlatedData
       (timeStamp,
        localIp,
        localPort,
        localGeo,
        isp,
        foreignIp,
        foreignPort,
        foreignGeo,
        infection
 ); 
```

这导致了错误：

```
Error Code: 1071\. Specified key was too long; max key length is 3072 bytes 
```

请在此处阅读有关大小限制的信息：http: [//dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html)。我怀疑你有这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T09:37:47.827

innodb 表的索引键前缀最多可达 767 个字节，而 myisam 表的索引键前缀约为 1000 个字节

mysql innodb 的总索引长度为 3072

首先，您只需检查索引的长度，如果可能的话，减少所有列的大小 varchar(100)

如果可能，创建单独的索引（如果它符合您的要求）

看链接

[http://dev.mysql.com/doc/refman/5.0/en//create-index.html](http://dev.mysql.com/doc/refman/5.0/en//create-index.html)

[http://bugs.mysql.com/bug.php?id=6604](http://bugs.mysql.com/bug.php?id=6604)

# android - Android相机意图可以指定pictureSize吗？

> ID：14191905
> 
> 赞同：0
> 
> 时间：2013-01-07T07:51:43.250
> 
> 标签：android, android-camera, android-camera-intent

从我目前的搜索来看，Android 相机意图不能指定图片大小。由于我的应用程序需要快速，我不想将大尺寸的图片保存在 sd 卡中，然后将其加载到小尺寸的 Bitmap 中。我认为这需要时间。另外，我需要一个灰度图像，而不是彩色位图。我知道如何转换它们，但同样需要时间。

我打算拍一张指定尺寸的图片，直接处理内存中YUV数据中的Y部分（灰度）。

那么这是否意味着我必须使用相机 API 编写自己的相机应用程序？

有什么好的例子吗？到目前为止，我检查的许多示例通常不考虑自动对焦。我在 XML 文件中添加功能：

```
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

我将自动对焦模式添加到相机参数中。

```
parameters.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO); 
```

但它不起作用。所以我在相机按下按钮之前立即添加自动对焦命令。

```
preview.camera.autoFocus(myAutoFocusCallback);
preview.camera.takePicture(shutterCallback, rawCallback, jpegCallback); 
```

但是自动对焦需要一些时间，直到预览变得清晰，才进行了拍照。另外，即使我不按下相机按钮，我也希望它能够自动对焦。我怎样才能很好地把自动对焦放在里面？

有什么好的例子吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T09:44:28.983

Android 开发者指南有一个关于制作相机应用的教程：http: [//developer.android.com/guide/topics/media/camera.html#custom-camera](http://developer.android.com/guide/topics/media/camera.html#custom-camera)

您不需要在清单中同时添加相机和 camera.autofocus 功能。后者意味着第一个——尽管这不是一个真正的问题。

FOCUS_MODE_AUTO 并不意味着相机会连续对焦，只是它会通过回调函数在某个点使用自动对焦（而不是手动对焦）。如果您希望相机自行对焦，则需要 FOCUS_MODE_CONTINUOUS_PICTURE。它在[文档](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#FOCUS_MODE_AUTO)中进行了解释。

至于在相机对焦之前拍照：尝试从 autoFocusCallback 内部调用 takePicture() ，如下所示：

```
private AutoFocusCallback myAutoFocusCallback = new AutoFocusCallback() {
    @Override
    public void onAutoFocus(boolean success, Camera camera) {
        if (success) {
                camera.takePicture(shutterCallback, rawCallback, jpegCallback);
            }
    }
}; 
```

# zend-framework - 使用zend框架下载多个pdf

> ID：14191907
> 
> 赞同：0
> 
> 时间：2013-01-07T07:52:03.917
> 
> 标签：zend-framework, pdf

我在将 pdf 文件附加到我的网站时获得了此代码，以便观众下载此类 pdf 文件..

$fullPath = "../public/pdffiles/FolioPlusUserGuide(v3.0).pdf";

```
 if ($fd = fopen ($fullPath, "r")) {

        $fsize = filesize($fullPath);
        $path_parts = pathinfo($fullPath);
        $ext = strtolower($path_parts["extension"]);

        header("Content-type: application/pdf");
        header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\"");            
        header("Content-length: $fsize");
        header("Cache-control: private");

        while(!feof($fd)) {
            $buffer = fread($fd, 2048);
            echo $buffer;
        }
    }

    fclose ($fd);
    exit; 
```

html代码：

baseUrl().'/DownloadPdf'?>">下载手册

此代码仅包含 1 个文件路径，我有更多具有不同文件名和不同按钮的 pdf 文件来处理下载事件。我怎样才能做到这一点？..谢谢！..=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:19:34.863

您可以通过 HTTP 请求传递 PDF 文件名，如下所示：

下载PDF.php?filename=test1.pdf

然后在您的 DownloadPDF 文件中有如下内容：

```
$pdfdir = "/pdffiles/folder/location/here";
$pdffilename = $_GET['filename'];
$fullPath = $pdfdir.$pdffilename;

if ($fd = fopen ($fullPath, "r")) {

        $fsize = filesize($fullPath);
        $path_parts = pathinfo($fullPath);
        $ext = strtolower($path_parts["extension"]);

        header("Content-type: application/pdf");
        header("Content-Disposition: attachment; filename=\"".$path_parts["basename"]."\"");            
        header("Content-length: $fsize");
        header("Cache-control: private");

        while(!feof($fd)) {
            $buffer = fread($fd, 2048);
            echo $buffer;
        }
    }

    fclose ($fd);
    exit; 
```

现在您的代码是动态的，您可以下载任何带有如下链接的 PDF：

```
<a href=downloadpdf.php?filename=something.pdf>Something</a>
<a href=downloadpdf.php?filename=something2.pdf>Something2</a> 
```

等等

# javascript - 使用 1 个函数更改 span 的值

> ID：14191911
> 
> 赞同：-1
> 
> 时间：2013-01-07T07:52:27.240
> 
> 标签：javascript, counting

我正在尝试计算 texbox 中的字符，并使用 java 脚本将该数字放到一个跨度中。我如何使用 1 个 javascript 函数来做到这一点？它们都在一个 php 变量中。

```
$content="

<script language='JavaScript'>
   function here
</script>

<p><input type='text' name='title' onKeyUp='function()' />
    <br />character count: <span id='titlecharcount'>0</span></p>
<p><input type='text' name='description' onKeyUp='function()' />
    <br />character count: <span id='descriptioncharcount'>0</span></p>
"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:57:50.163

如果您更改`onKeyUp`要传入的属性`this`以及`id`跨度的属性，例如（注意引号）：

```
<input type='text' name='title' onKeyUp="yourHandler(this, 'titlecharcount')" /> 
```

...然后在您的处理程序中接受这些参数，第一个将是对`input`元素的引用，第二个将是给出`id`跨度的字符串。然后，您可以`span`通过`document.getElementById`. 这使您可以获取和设置其`innerHTML`属性以获取和设置其内容。an 的值`input`可用作`value`输入的属性，因此：

```
function yourHandler(input, id) {
    var span = document.getElementById(id);
    span.innerHTML = input.value.length;
} 
```

* * *

旁注：我建议使用`onkeypress`而不是`onkeyup`. `onkeyup`仅在释放键时触发，因此当有人按住键并重复键时，您的计数不会更新。

另外，将属性名称全部小写，不要混合大小写（`onkeypress`not `onKeyPress`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:00:02.293

span 元素没有价值，它们有内部内容。您可以使用此功能更改内容：

```
function changeLink(elementID)
{
    document.getElementById(elementID).innerHTML="content";
} 
```

# android - 从文本文件导入坐标以固定在 google map android gps

> ID：14191914
> 
> 赞同：0
> 
> 时间：2013-01-07T07:52:41.000
> 
> 标签：android, google-maps, gps

我正在做我的毕业论文，我必须做一个 Android 应用程序，在谷歌地图上显示我的位置（我已经做过），当我靠近大学内的某些地方时，会弹出一些建筑物的信息（我可能会通过接近警报来做到这一点）。关键是我想将它们将在地图上显示的地方作为文本文件中的图钉导入。

这可能吗（我已经做到了，但在代码内部是静态的）？我正在研究 Eclipse，如果有用，我可以复制/粘贴代码。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    Drawable marker=getResources().getDrawable(R.drawable.pushpin);
    marker.setBounds((int) (-marker.getIntrinsicWidth()/2),-marker.getIntrinsicHeight(),(int) (marker.getIntrinsicWidth()/2),0);        
    mapController=mapView.getController();
    mapController.setZoom(15);

    InterestingLocations funPlaces= new InterestingLocations(marker);
    mapView.getOverlays().add(funPlaces);

    GeoPoint pt=funPlaces.getCenterPt();
    int latSpan=funPlaces.getLatSpanE6();
    int lonSpan=funPlaces.getLonSpanE6();
    Log.v("Overlays", "Lat span is " + latSpan);
    Log.v("Overlays", "Lon span is " + lonSpan);

    MapController mc = mapView.getController();
    mc.setCenter(pt);
    mc.zoomToSpan((int) (latSpan*1.5), (int)(lonSpan*1.5));

    whereAmI= new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(whereAmI);
    mapView.postInvalidate();

public class InterestingLocations extends ItemizedOverlay{
    private ArrayList<OverlayItem> locations = new ArrayList<OverlayItem>();
    private GeoPoint center=null;

    public InterestingLocations(Drawable marker){
        super(marker);

        GeoPoint disneyMagicKingdom = new GeoPoint((int)(37.97897823618044*1000000) ,(int)(23.6723855137825*1000000));
        GeoPoint disneySevenLagon= new GeoPoint((int)(37.98013047446126*1000000) ,(int)(13.6715030670166*1000000));
        locations.add(new OverlayItem(disneyMagicKingdom,"Magic Kingdom","Magic Kingdom"));
        locations.add(new OverlayItem(disneySevenLagon,"Seven Lagon","Seven Lagon"));

        populate();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:02:35.050

是的，你可以做到。将文本文件保存在资源的资产文件夹中。从中读取位置并在加载时在地图上放置一个覆盖（该位置的引脚）。如果您需要一个教程来开始使用谷歌地图，那么[这](http://www.androidhive.info/category/gps/)是一个很好的教程。

# gcc - 显示不同架构的操作码差异

> ID：14191916
> 
> 赞同：0
> 
> 时间：2013-01-07T07:53:07.160
> 
> 标签：gcc, x86, x86-64, gnu-assembler

我有一个脚本，它（如预期的那样）允许我查看为不同架构生成的操作码的差异（特别是对**x86**与**x86_64**上的 x87 指令感兴趣）。

```
#!/usr/bin/env bash

cat - <<__EOF> a.cpp
int main()
{
    double const x(1.0);
    asm volatile ("fldl (%0)" : : "a" (&x));
    return 0;
}
__EOF
EXEC_STR='g++ a.cpp -c -O0 -o /dev/null -m${BITNESS} -mfpmath=387 -Wa,-adhlns="${BITNESS}.lst"'
FILTER_STR='awk "/\/APP/, /\/NO_APP/" ${BITNESS}.lst | cut -f 2- > ${BITNESS}_.lst'
BITNESS=32 bash -c "${EXEC_STR} && ${FILTER_STR}"
BITNESS=64 bash -c "${EXEC_STR} && ${FILTER_STR}"
diff -w -B 32_.lst 64_.lst 
```

输出：

```
3c3
<   fldl (%eax)
---
>   fldl (%rax) 
```

但是`cut -f 2-`除了删除第一列之外，还要用操作码删除列（这是可取的）。

有没有其他方法可以得到想要的结果？以及如何过滤掉文本？

# sql-server-2008-r2 - 如何将 SQL SERVER MANAGEMENT STUDIO DATABASE 恢复到 PC 服务器到 SQLEXPRESS 服务器？

> ID：14191925
> 
> 赞同：0
> 
> 时间：2013-01-07T07:54:02.187
> 
> 标签：sql-server-2008-r2

我正在使用 SQL SERVER MANAGEMENT STUDIO 2008 R2。我使用我的电脑名称（例如，MY-PC）作为服务器名称来创建数据库。现在，当我选择 .\sqlexpress 作为服务器时，如何获取在我的电脑命名服务器中创建的数据库。

当我尝试从 .bak 文件恢复 .\sqlexpress 时显示的错误：服务器“MY-PC\SQLEXPRESS”恢复失败。(Microsoft.SqlServer.SmoExtended)

附加信息：System.Data.SqlClient.SqlError：数据库备份在运行版本 10.50.1600 的服务器上。该版本与运行版本 10.00.2531 的此服务器不兼容。在支持备份的服务器上恢复数据库，或使用与该服务器兼容的备份。(Microsoft.SqlServer.Smo)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:15:52.503

您无法在上述情况下恢复数据库 - 根据错误，备份是在**SQL Server 2008R2**实例上进行的，而您正试图在**SQL Server 2008**实例上恢复它 - 备份文件不向后兼容。

您可以从错误消息中看到这一点：

**10.50.1600**是**SQL Server 2008 R2 RTM**

**10.00.2531**是**SQL Server 2008 Service Pack 1**

有关 SQL Server 版本号的详细信息，请参阅以下 Microsoft 文章：

[http://support.microsoft.com/kb/321185](http://support.microsoft.com/kb/321185)

# ruby-on-rails - 邀请用户加入 Rails 应用程序组

> ID：14191926
> 
> 赞同：3
> 
> 时间：2013-01-07T07:54:08.177
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, polymorphic-associations

我正在构建一个简单的 Rails 应用程序，它允许用户登录并为自己创建私人列表，到目前为止一切都很好。我希望用户可以选择邀请人们加入某个列表，这些新用户将拥有对任务的编辑权限。在添加用户方面，这与 basecamp 和 trello 相同。

我从哪里开始，我一直在绞尽脑汁搜索谷歌，找不到任何相关的指导教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:10:12.690

好吧，那怎么样

```
1) A users Table (model)
2) A lists table (model) 
```

模型协会

```
A user has many lists
A list belongs to a user 
```

用户表将具有外键 list_id（您需要通过迁移添加它）

这只是一个开始，我假设您了解 rails 中的资源（大 7）？因为您将广泛使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-25T04:35:18.613

您可以创建一个成员表，它将充当用户和列表之间的连接表。然后，您可以使用布尔类型将 :admin 属性添加到 Membership 模型。

```
class List < ActiveRecord::Base
  has_many :memberships
  has_many :users, :through => :memberships
end

class User < ActiveRecord::Base
  has_many :memberships
  has_many :lists, :through => :memberships
end

class Membership < ActiveRecord::Base
  belongs_to :user
  belongs_to :list
end 
```

# loadrunner - LoadRunner 动态值

> ID：14191927
> 
> 赞同：0
> 
> 时间：2013-01-07T07:54:08.873
> 
> 标签：loadrunner

我对在 web_url 中创建的动态值有一个挑战，如下所示：

```
web_url("klargjore", 

            "URL=http://d26jbsl00003.test.local:8080/vedtak/behandling/23821/klargjore?3-1.IBehaviorListener.0-neste&_=1357544083160", 

            "TargetFrame=", 
```

错误消息说：

Action.c(37): Error -26612: HTTP Status-Code=500 (Internal Server Error) for "http://d26jbsl00003.test.local:8080/vedtak/behandling/23821/klargjore?3-1.IBehaviorListener. 0-嵌套&_=1357544083160" [MsgId: MERR-26612]

问题是不可能对这个值使用相关性，因为它是在构建 url 时创建的，至少看起来是这样。我无法以任何方式从服务器捕获它并在 url 中重用它，就像在手动关联中所做的那样。也许我在这里遗漏了一些东西，但是有没有办法检查 1357544083160 是否从服务器发送？

```
Action()

{

    web_url("vedtak", 

            "URL=http://d26jbsl00003.test.local:8080/vedtak/", 

            "TargetFrame=", 

            "Resource=0", 

            "RecContentType=text/html", 

            "Referer=", 

            "Snapshot=t1.inf", 

            "Mode=HTML", 

            EXTRARES, 

            "Url=statisk/css/images/navlogo.jpg", "Referer=http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=lYqFC7YlETkjBwcS+iVN7a+6?0", ENDITEM, 

            "Url=statisk/css/images/prosessteg_klargjore.png", "Referer=http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=lYqFC7YlETkjBwcS+iVN7a+6?0", ENDITEM, 

            "Url=statisk/img/glyphicons-halflings-white.png", "Referer=http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=lYqFC7YlETkjBwcS+iVN7a+6?0", ENDITEM, 

            LAST);

    web_submit_data("opprett;jsessionid=lYqFC7YlETkjBwcS+iVN7a+6", 

            "Action=http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=lYqFC7YlETkjBwcS+iVN7a+6?0-1.IFormSubmitListener-oppretteBehandlingForm", 

            "Method=POST", 

            "TargetFrame=", 

            "RecContentType=text/html", 

            "Referer=http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=lYqFC7YlETkjBwcS+iVN7a+6?0", 

            "Snapshot=t2.inf", 

            "Mode=HTML", 

            ITEMDATA, 

            "Name=neste", "Value=x", ENDITEM, 

            "Name=fnr", "Value=10014549957", ENDITEM, 

            "Name=mottattDato", "Value=07.01.2013", ENDITEM, 

            EXTRARES, 

            "Url=../wicket/resource/no.nav.vedtak.web.pages.base.BasePage/jquery.placeholder-ver-1356010900000.js", "Referer=http://d26jbsl00003.test.local:8080/vedtak/behandling/23821/klargjore?3", ENDITEM, 

            "Url=../statisk/img/glyphicons-halflings.png", "Referer=http://d26jbsl00003.test.local:8080/vedtak/behandling/23821/klargjore?3", ENDITEM, 

            LAST);

    lr_think_time(7);

    web_url("klargjore", 

            "URL=http://d26jbsl00003.test.local:8080/vedtak/behandling/23821/klargjore?3-1.IBehaviorListener.0-neste&_=1357544083160", 

            "TargetFrame=", 

            "Resource=0", 

            "RecContentType=text/xml", 

            "Referer=http://d26jbsl00003.test.local:8080/vedtak/behandling/23821/klargjore?3", 

            "Snapshot=t3.inf", 

            "Mode=HTML", 

            LAST);

    web_url("vurderevilkar", 

            "URL=http://d26jbsl00003.test.local:8080/vedtak/behandling/23821/vurderevilkar", 

            "TargetFrame=", 

            "Resource=0", 

            "RecContentType=text/html", 

            "Referer=http://d26jbsl00003.test.local:8080/vedtak/behandling/23821/klargjore?3", 

            "Snapshot=t4.inf", 

            "Mode=HTML", 

            EXTRARES, 

            "Url=/vedtak/statisk/css/images/Prosessteg_vurdere_vilkar.png", "Referer=http://d26jbsl00003.test.local:8080/vedtak/behandling/23821/vurderevilkar?5", ENDITEM, 

            "Url=/vedtak/statisk/css/images/icon_ok.png", "Referer=http://d26jbsl00003.test.local:8080/vedtak/behandling/23821/vurderevilkar?5", ENDITEM, 

            "Url=/vedtak/statisk/css/images/icon_ikke_ok.png", "Referer=http://d26jbsl00003.test.local:8080/vedtak/behandling/23821/vurderevilkar?5", ENDITEM, 

            LAST);

    return 0;

} 
```

虚拟用户脚本开始于：2013-01-07 08:35:07

启动操作 vuser_init。

适用于 Windows 7 的 LoadRunner 11.0.0 的 Web Turbo Replay；构建 9375（2011 年 5 月 18 日 01:44:32）[MsgId: MMSG-27143]

运行模式：HTML [MsgId：MMSG-26000]

运行时设置文件：“C:\Users\F119506\AppData\Local\Temp\noname20\default.cfg”[MsgId: MMSG-27141]

结束动作 vuser_init。

正在运行 Vuser...

开始迭代 1。

开始行动行动。

Action.c(4)：重定向“http://d26jbsl00003.test.local:8080/vedtak/”（重定向深度为 0）[MsgId: MMSG-26694]

Action.c(4)：到位置“http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett”[MsgId: MMSG-26693]

Action.c(4)：重定向“http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett”（重定向深度为1）[MsgId：MMSG-26694]

Action.c(4): 到位置 "http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26693]

Action.c(4)：在 HTML“http://d26jbsl00003.test.local:8080”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/css/modig-ver-1352360328000.css” /vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test.local:8080”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/css/BasePage-ver-1356010900000.css” /vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test.local:8080”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/css/datepicker-ver-1356010900000.css” /vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test.local:8080”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/css/KlargjoreForVedtakPage-ver-1356010900000.css” /vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test.local:8080”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/css/VurdereVilkarPage-ver-1356010900000.css” /vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/jquery/jquery-1.8.2-ver-1352360328000.js” .test.local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-transition-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-alert-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-button-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-carousel-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-collapse-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-dropdown-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-modal-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-tooltip-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-popover-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-scrollspy-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-tab-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-typeahead-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-affix-ver-1352360328000.js” .local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test.local”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap-datepicker-ver-1356010900000.js” :8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML“http://d26jbsl00003.test.local:8080”中找到资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/KlargjoreForVedtakPage-ver-1356010900000.js” /vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：找到资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.devutils.debugbar.DebugBar/wicket-debugbar-ver-1350674618000.css”在 HTML "http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：找到资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.devutils.debugbar.DebugBar/wicket-debugbar-ver-1350674618000.js”在 HTML "http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML 中找到资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.devutils.debugbar.DebugBar/wicket-ver-1350674618000.png” "http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML 中找到资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.devutils.inspector.InspectorPage/bug-ver-1350674618000.png” "http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML 中找到资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.devutils.debugbar.SessionSizeDebugPanel/harddrive-ver-1350674618000.png” "http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：在 HTML 中找到资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.devutils.debugbar.DebugBar/remove-ver-1350674618000.png” "http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=abH1X9LF+cnPumVk3-+8A4Ys?0" [MsgId: MMSG-26659]

Action.c(4)：下载资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/css/images/navlogo.jpg”（由参数编号 10 指定）[MsgId: MMSG-26577]

Action.c(4)：下载资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/css/images/prosessteg_klargjore.png”（由参数编号 13 指定）[MsgId: MMSG-26577]

Action.c(4)：下载资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/img/glyphicons-halflings-white.png”（由参数编号 16 指定）[MsgId: MMSG-26577]

Action.c(4): web_url("vedtak") 成功，526330 个正文字节，9391 个标头字节，13 个分块开销字节 [MsgId: MMSG-26385]

Action.c(18)：重定向“http://d26jbsl00003.test.local:8080/vedtak/behandling/opprett;jsessionid=lYqFC7YlETkjBwcS+iVN7a+6?0-1.IFormSubmitListener-oppretteBehandlingForm”（重定向深度为0）[ MsgId: MMSG-26694]

Action.c(18)：到位置“http://d26jbsl00003.test.local:8080/vedtak/behandling/23829/klargjore”[MsgId: MMSG-26693]

Action.c(18)：重定向“http://d26jbsl00003.test.local:8080/vedtak/behandling/23829/klargjore”（重定向深度为1）[MsgId：MMSG-26694]

Action.c(18)：到位置“http://d26jbsl00003.test.local:8080/vedtak/behandling/23829/klargjore?2”[MsgId: MMSG-26693]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/css/modig-ver-1352360328000.css”已经在缓存中，不会再次下载[MsgId: MMSG -26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/css/BasePage-ver-1356010900000.css”已经在缓存中，不会再次下载[MsgId: MMSG -26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/css/datepicker-ver-1356010900000.css”已经在缓存中，不会再次下载[MsgId：MMSG -26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/css/KlargjoreForVedtakPage-ver-1356010900000.css”已经在缓存中，不会再次下载[MsgId：MMSG -26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/css/VurdereVilkarPage-ver-1356010900000.css”已经在缓存中，不会再次下载[MsgId: MMSG -26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/jquery/jquery-1.8.2-ver-1352360328000.js”已经在缓存中并且不会再次下载 [MsgId: MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-transition-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-alert-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-button-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-carousel-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-collapse-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-dropdown-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-modal-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-tooltip-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-popover-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-scrollspy-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-tab-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-typeahead-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap/bootstrap-affix-ver-1352360328000.js”已经在缓存中，不会再次下载[消息 ID：MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/bootstrap-datepicker-ver-1356010900000.js”已经在缓存中，不会再次下载[MsgId : MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/js/KlargjoreForVedtakPage-ver-1356010900000.js”已经在缓存中，不会再次下载[MsgId：MMSG -26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.devutils.debugbar.DebugBar/wicket-debugbar-ver-1350674618000.css”是已经在缓存中，不会再次下载 [MsgId: MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.devutils.debugbar.DebugBar/wicket-debugbar-ver-1350674618000.js”是已经在缓存中，不会再次下载 [MsgId: MMSG-26655]

Action.c(18)：找到资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.ajax.AbstractDefaultAjaxBehavior/res/js/wicket-event-jquery-ver- 1350674288000.js" 在 HTML "http://d26jbsl00003.test.local:8080/vedtak/behandling/23829/klargjore?2" [MsgId: MMSG-26659]

Action.c(18)：找到资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.ajax.AbstractDefaultAjaxBehavior/res/js/wicket-ajax-jquery-ver- 1350674288000.js" 在 HTML "http://d26jbsl00003.test.local:8080/vedtak/behandling/23829/klargjore?2" [MsgId: MMSG-26659]

Action.c(18)：找到资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.ajax.AbstractDefaultAjaxBehavior/res/js/wicket-ajax-jquery-debug-版本 1350674288000.js” 在 HTML “http://d26jbsl00003.test.local:8080/vedtak/behandling/23829/klargjore?2” [MsgId: MMSG-26659]

Action.c(18)：找到资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/no.nav.vedtak.web.pages.base.BasePage/jquery.placeholder-ver-1356010900000。 js”在 HTML “http://d26jbsl00003.test.local:8080/vedtak/behandling/23829/klargjore?2” [MsgId: MMSG-26659]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.devutils.debugbar.DebugBar/wicket-ver-1350674618000.png”在已缓存且不会再次下载 [MsgId: MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.devutils.inspector.InspectorPage/bug-ver-1350674618000.png”在已缓存且不会再次下载 [MsgId: MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.devutils.debugbar.SessionSizeDebugPanel/harddrive-ver-1350674618000.png”在已缓存且不会再次下载 [MsgId: MMSG-26655]

Action.c(18)：资源“http://d26jbsl00003.test.local:8080/vedtak/wicket/resource/org.apache.wicket.devutils.debugbar.DebugBar/remove-ver-1350674618000.png”在已缓存且不会再次下载 [MsgId: MMSG-26655]

Action.c(18)：下载资源“http://d26jbsl00003.test.local:8080/vedtak/statisk/img/glyphicons-halflings.png”（由参数编号 23 指定）[MsgId: MMSG-26577]

Action.c(18): web_submit_data("opprett;jsessionid=lYqFC7YlETkjBwcS+iVN7a+6") 成功，116948 个主体字节，2268 个标头字节，20 个分块开销字节 [MsgId: MMSG-26385]

Action.c(37): Error -26612: HTTP Status-Code=500 (Internal Server Error) for "http://d26jbsl00003.test.local:8080/vedtak/behandling/23821/klargjore?3-1.IBehaviorListener. 0-嵌套&_=1357544083160" [MsgId: MERR-26612]

Action.c(37): web_url("klargjore") 最高严重级别是“ERROR”，4930 个正文字节，242 个标头字节，13 个分块开销字节 [MsgId: MMSG-26387]

结束动作 动作。

结束迭代 1。

正在结束 Vuser...

开始操作 vuser_end。

结束动作 vuser_end。

Vuser 已终止

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:23:12.720

您的 13 位数字是自纪元以来的 unix 时间戳/时间，很可能是由一些有进取心的开发人员在本地（而不是来自服务器）生成的，他们正在寻找一个准唯一的数字来唯一标识对服务器的请求。

```
 1357544083160 = Mon, 7 Jan 2013 07:34:43.160 UTC 
```

这很可能是您记录业务对话的时间，这是您的网络虚拟用户代码的基础。

检查**web_save_timestamp_param()**的帮助文件以了解对您有用的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T06:39:43.527

Magnus，我建议您花一些时间在[Firebug](http://getfirebug.com/)、[HTTP Watch](http://www.httpwatch.com/)或[Fiddler](http://www.fiddler2.com/fiddler2/)上，先看看应用程序实际上在做什么。更好的是，尝试浏览器中的“查看源代码”选项，您可能会对所发现的内容感到惊讶。

如果您不知道手动操作时会发生什么，您就无法实现自动化。

您的脚本没有经过验证，而且您似乎真的不了解应用程序的工作原理。您执行数据提交，然后直接执行 web_url。这是模拟用户点击链接吗？如果是这样，那么链接必须存在于页面中，对吗？尝试 web_reg_save_param / web_reg_save_param_ex 并以这种方式提取地址。

不要只是盲目地编写一个脚本，在没有验证或了解应用程序在做什么的情况下将 HTTP 请求泵送到服务器。

URL 末尾的唯一标签很可能是一种缓存机制，而不是一个狡猾的唯一标识符。这样，HTTP 标头设置为永不过期，并且项目将被缓存，直到应用程序使用新的唯一标识符更新。无论哪种方式，该值的应用程序验证极不可能在不正确时导致 500 错误。

另外，Magnus，如果您得到问题的答案，请按接受。12 个问题并且不接受，即使您[之前](https://stackoverflow.com/questions/13626428/loadrunner-parameter-parameter-with-spaces)的问题已经成功回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T01:23:23.363

如果那是时间戳，那么您需要编写函数来获取当前时间戳。我认为该错误是由于 wicket(3-1) 错误造成的。您需要关联动态 url 3-1.IBehaviorListener

# bash - echo shell 脚本执行时间

> ID：14191928
> 
> 赞同：0
> 
> 时间：2013-01-07T07:54:10.453
> 
> 标签：bash, shell

我有这个执行以下命令的 shell 脚本：

```
#!/bin/sh
echo -e  " {\"username\":\"user\",\"password\":\"mypasswd\",\"data\"" > $file 
```

我需要如何调整它以测量执行时间并将执行时间和脚本输出回显到文件？

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:56:03.600

使用`time`命令。例如：

```
time (
    echo -e  "$(date) \n--\n{\"username\":\"user\",\"password\":\"mypasswd\",\"data\": [$formated]}\n --"
) > $outputFileName 2>&1 
```

# android - 使用相机的指纹扫描仪

> ID：14191929
> 
> 赞同：43
> 
> 时间：2013-01-07T07:54:16.623
> 
> 标签：android, sdk, android-ndk, camera, fingerprint

[使用或不使用相机进行指纹扫描仪，它的可能性和成功率？，我遇到了一个名为FingerJetFX](http://digitalpersona.com/fingerjetfx/)的开源 SDK ，它也提供了 android 的可行性。

FingerJetFX OSE 指纹特征提取器是独立于平台的，可以通过对 make 文件进行适当更改而构建，并在有或没有操作系统的环境中运行，包括

*   Linux
*   安卓
*   视窗
*   视窗 CE
*   各种实时操作系统

但我不确定指纹扫描仪是否可行，我下载了 SDK 并挖掘但没有运气，甚至没有找到任何集成 SDK 的步骤，所以很少有以下列出的问题：

我正在寻找建议和指导：

> 1.  指纹扫描仪可以在 android 中使用相机或不使用相机吗？
> 2.  在帮助下`FingerJetFX`我可以实现我的目标吗？
> 3.  如果第二个答案是肯定的，那么有人可以为我提供任何将 SDK 集成到 android 中的步骤吗？

你的建议是可观的。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-07T22:38:14.193

**基于 Android 摄像头的解决方案：**

作为对这个确切问题进行了大量研究的人，我可以告诉您，使用任何当前 Android 设备上的库存相机很难获得适合模板（特征提取）的图像。主要的衰弱问题是在手指的脊和谷之间实现显着对比。商业光学指纹扫描仪（您试图模仿）通常通过棱镜中的受抑全内反射来实现必要的对比度。

![生物识别中的 FTIR](../Images/f26d50530253cebf58605a36542eb8f7.png)

在这种情况下，来自与棱镜接触的脊的光会传输到 CMOS 传感器，而来自谷的光则不会。您根本无法从 Android 相机可靠地获得相同类型的结果，但这并不意味着您无法在理想条件下获得可用的东西。

我使用商用光学指纹扫描仪 (Futronics FS80) 拍摄左侧的图像，使用普通相机 (15MP Cannon DSLR) 拍摄右侧的图像。在裁剪、反转（以匹配其他扫描仪的约定）、对比等相机图像之后，我们得到了以下结果。

![在此处输入图像描述](../Images/3699c3ffd0746f218b283eff45248ae5.png)

相机图像的低对比度是显而易见的。

![在此处输入图像描述](../Images/7bd83a388c2aa39b279c905202f9f864.png)

但该软件能够准确地确定脊流。

![在此处输入图像描述](../Images/ef046d796dbd7058744cb1e20d757dae.png)

我们最终找到了相当数量的匹配细节（用红色圆圈标记。）

这是坏消息。对指尖进行这些类型的近距离拍摄是很困难的。我使用带闪光灯的数码单反相机来达到这些效果。此外，大多数指纹匹配算法都不是尺度不变的。因此，如果在随后的“扫描”中手​​指距离相机较远，则可能与原始手指不匹配。

我用于可视化的软件包是优秀的 BSD 许可[SourceAFIS](https://sourceafis.angeloflogic.com/)。尽管目前仅移植到 C# 和 Java（有限），但也没有企业“开源版本”/“付费版本”恶作剧。

**非基于相机的解决方案：**

对于具有支持“USB 主机模式”的硬件的少数设备，您可以[编写自定义驱动程序](http://developer.android.com/guide/topics/connectivity/usb/host.html)以将指纹扫描仪与 Android 集成。老实说，对于我所做的这两个模型来说，这是一个巨大的痛苦。我通过使用[wireshark](http://www.wireshark.org/)来嗅探扫描仪和具有工作驱动程序的linux 机器之间的USB 数据包，然后根据嗅探命令编写Android 驱动程序来完成它。

**交叉编译 FingerJetFX**

一旦您制定了图像采集解决方案（两种潜在的解决方案都有其缺点），您就可以开始担心在 Android 上运行 FingerJetFX。首先，您将使用他们的 SDK 编写一个自包含的 C++ 程序，该程序获取图像并将其转换为模板。在那之后，你真的有两个选择。

1.  将其编译为库并使用 JNI 与其交互。
2.  将其编译为可执行文件并让您的 Android 程序将其作为子进程调用。

对于任何一个，您都需要[NDK](http://developer.android.com/tools/sdk/ndk/index.html)。我从来没有使用过 JNI，所以我会听从[其他人](http://code.google.com/p/awesomeguy/wiki/JNITutorial)[的智慧](http://blog.edwards-research.com/2012/04/tutorial-android-jni/)来判断我们如何做到最好。我总是倾向于选择路线#2。对于这个应用程序，我认为它是合适的，因为你只是真正调用本机代码来做一件事，模板你的图像。一旦您的本机程序运行并交叉编译，您就可以[使用此问题的答案将](https://stackoverflow.com/questions/4703131/is-it-possible-to-run-a-native-arm-binary-on-a-non-rooted-android-phone/6803287#6803287)其与您的 Android 应用程序打包并从您的 Android 代码中调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T11:02:05.407

有几个直接的障碍：

1.  获得良好的指纹图像至关重要。根据他们的网站，fingerjet 需要标准指纹图像——例如 8 位灰度（高对比度）、扁平指纹图像。如果您使用相机拍摄指纹照片，则用户需要有一个平坦的透明表面（玻璃），您可以将指纹压平以拍摄照片。然后，您的应用程序将在图像中定位指纹，并将其转换为 Fingerjet 可接受的格式。像 OpenCV 这样的库将有助于做到这一点。

2.  FingerJetFX OSE 似乎不提供罐装 android 支持 - 您必须为 android 编译库并通过 JNI/NDK 使用它。

从那里，fingerjet 应该为您提供可用于匹配的打印的紧凑表示。

这将是可行的，但使用要求（用户需要有一个可用的平坦透明表面）可能会破坏交易......

# c# - 我如何知道没有 Textchanged 事件的文本框的文本更改

> ID：14191932
> 
> 赞同：1
> 
> 时间：2013-01-07T07:54:28.580
> 
> 标签：c#, winforms

在我的 C# Windows 窗体 MyForm 中，我有一些文本框。在这些TextBoxes中，我们要检测是否发生TextChanged事件，如果这些TextBoxes发生变化并点击关闭按钮，当我们关闭表单时它会询问我们是否要取消更改。但是，当我运行 MyForm 时，我无法知道由于用户键入 for 而没有 textchanged 事件属性而导致的每个文本框的文本更改。但我在想如何让 TextBox 的 TextChanged 知道用户在没有 textchanged 事件的情况下键入导致的事件？感谢帮助。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:03:16.607

`TextChanged`在没有事件或事件的情况下，没有（体面的）方法可以知道输入的内容`Leave`。

您需要使用这些事件之一来获取键入的内容。这样做可以让您设置一个“脏”标志，您可以在关闭时检查并在保存时清除。

如果没有这个，比较新旧值是没有意义的，因为你不知道应该设置什么值而不知道有什么改变。

有一个例外：如果您的原始数据来自数据库，您可以使用比较旧/新方法，因为您将比较来自数据库的文本框。

更新：

解决此评论：

> “因为 Myform 有很多文本框，如果没有文本更改，这将不会显示确认消息。如果我捕获所有文本框的 textchanged 事件，这就是这么多代码。”

您可以使用通用处理程序以一种方法收集所有文本框的更改。如果需要，使用`sender`对象（将其转换为文本框）来识别更改了哪个文本框，或者简单地为任何文本框更改设置一个脏标志。

```
bool isDirty = false;

void SomeInitMethod() //ie. Form_Load
{
    textbox1.TextChanged += new EventHandler(DirtyTextChange);
    textbox2.TextChanged += new EventHandler(DirtyTextChange);
    textbox3.TextChanged += new EventHandler(DirtyTextChange);
    //...etc
}
void DirtyTextChange(object sender, EventArgs e)
{
    isDirty = true;
}
void Form1_Closing(object sender, System.ComponentModel.CancelEventArgs e)
{
    if (isDirty) {
        //ask user
    }
}

// to clear
void Save()
{
    SaveMyDataMethod();
    isDirty = false;
} 
```

如果表单中有*很多*文本框，则通过表单控件集合循环并用于`typeof`处理文本框。如果您有需要不同方法的文本框，请使用`Tag`文本框的属性来区分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:10:27.967

一种可能的方法是使用计时器。有一个计时器，每 1000 毫秒（例如）滴答一次并检查 textBox.Text。

第二种可能的方法是覆盖`WndProc`文本框（通过继承一个新类）并处理更改文本消息。这与覆盖相同`TextBox.OnTextChanged`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:52:16.663

你为什么不使用一个计时器，它会在几个间隔后检查文本框是否包含任何文本

# android - wifi断开后，Android socket仍然可以正常写入

> ID：14191934
> 
> 赞同：2
> 
> 时间：2013-01-07T07:54:33.633
> 
> 标签：android, sockets, wifi

我编写了一个 Android 套接字演示，它只是将用户的输入发布到服务器。我通过wifi连接从android客户端建立了一个socket，一切顺利，服务器可以接收到android客户端发送的消息。问题是，然后我关闭了手机的WIFI，但是socket可以正常写入。

安卓客户端代码：

```
public class MyActivity extends Activity {
    private SocketHandlerThread thread;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        thread = new SocketHandlerThread("ScoketTest");
        thread.start();
    }

    class SocketHandlerThread extends HandlerThread {
        private Socket socket;
        private Handler handler;

        public SocketHandlerThread(String name) {
            super(name);
        }

        public SocketHandlerThread(String name, int priority) {
            super(name, priority);
        }

        @Override
        public void run() {
            try {
                socket = new Socket("192.168.60.184", 1990);
            } catch (IOException e) {
                Log.e("SocketTest", e.getLocalizedMessage(), e);
            }
            super.run();
        }

        Handler getHandler() {
            if (handler == null) {
                handler = new Handler(getLooper());
            }
            return handler;
        }

        void send(final String text) {
            Runnable runnable = new Runnable() {
                public void run() {
                    Log.e("SocketTest", "Start send text: " + text);
                    try {
                        socket.getOutputStream().write((text + "\n").getBytes());
                        socket.getOutputStream().flush();
                    } catch (Exception e) {
                        Log.e("SocketTest", e.getLocalizedMessage(), e);
                    }
                    Log.e("SocketTest", "Text has been send:" + text);
                }
            };
            getHandler().post(runnable);
        }

        @Override
        protected void onLooperPrepared() {
            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    findViewById(R.id.button).setEnabled(true);
                }
            });
        }
    }

    public void send(View view) {
        String text = ((EditText) findViewById(R.id.text)).getText().toString();
        thread.send(text);
    }
} 
```

服务器代码：

```
public class SocketTestServer {
    ServerSocket serverSocket;

    SocketTestServer() throws IOException {
        serverSocket = new ServerSocket(1990);
    }

    void start() throws IOException {
        Socket clientSocket = serverSocket.accept();
        clientSocket.getInputStream();
        PrintWriter out = new PrintWriter(System.out, true);
        BufferedReader in =
                new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null) {
            out.println(inputLine);
        }
    }

    public static void main(String[] args) throws IOException {
        SocketTestServer server = new SocketTestServer();
        server.start();
    }
} 
```

我尝试了几部手机。在 Galaxy Nexus(4.2.1) 上按预期抛出异常，但在某些 MOTO 或 HTC 手机上，套接字仍然可以毫无异常地写入，这意味着我可能会丢失一些我认为已成功接收的消息。我怎么知道任何类型的手机上的套接字连接都断开了？

任何建议将不胜感激。

ps 我知道连接更改广播，但在接收广播之前，客户端可能已经通过损坏的套接字写入了一些消息。

虽然在应用协议上添加接收检查可以解决消息丢失的问题，但我更喜欢保证 TCP 协议承诺的传输层的可靠性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:54:55.213

我在我的套接字中使用 Writer & IOException，它工作正常。尝试这个：

```
public static void sendUTF(String str)
    {
        try
        {
            outWriter.write(str + '\n');
            outWriter.flush();
        } 
        catch (IOException e)
        {
            e.printStackTrace();
            outServ.setText("Connection lost!");
        }
    }

public static Writer outWriter = new OutputStreamWriter(outputStream, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T22:25:48.200

这是 TCP 栈（OS 层面）的问题，是一个难以解决的问题。如果服务器是失去连接的服务器（尝试在打开套接字后重新启动服务器并且没有客户端会注意到），也会发生这种情况......下次通过套接字发送数据包时，您将遭受“管道损坏错误”。

所以，有两种情况：

1-客户端发送信息时管道损坏。

在这种情况下，您应该捕获 IOException 并重试以打开连接（您必须定义重试策略）。

2-服务器断开连接时管道损坏

当服务器失去连接时，客户端不会注意到，在这种情况下，您应该定期向服务器发送数据包（轮询技术）并尝试重新连接以防连接丢失。仅当您从服务器更新接收时才需要这样做，如果您的流量始终是客户端-> 服务器，则仅适用于场景 1。

# selenium - 如何使用 Selenium 在表格中查找特定行？

> ID：14191935
> 
> 赞同：10
> 
> 时间：2013-01-07T07:54:41.200
> 
> 标签：selenium, selenium-webdriver, web-testing, automated-tests, gui-testing

这是一个示例代码：

```
<div id="productOrderContainer">
  <table class="table gradient myPage"> 
```

所以这个在 productOrderContainer 中的表有几列，并且取决于几件事将有几行，它们都有几列。一个例子是：

我想要做的是例如获取该表的第一行。（行有 id `<td rowspan="1">`，例如：）然后再次例如在此行跨度中查找特定值中的特定值`<div>`

所以在伪代码中我想说的是：

给我桌子，给我第n行，给我价值`<div id='something'>`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-07T08:27:57.853

您可以尝试以下

```
int index = 0;
WebElement baseTable = driver.findElement(By.className("table gradient myPage"));
List<WebElement> tableRows = baseTable.findElements(By.tagName("tr"));
tableRows.get(index).getText(); 
```

您还可以迭代 tablerows 以执行您想要的任何功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T12:05:40.483

你要：

```
int rowNumber=...;
string value = driver.findElement(By.xpath("//div[@id='productOrderContainer']/table/tbody/tr[" + rowNumber +"]/div[id='something']")).getText(); 
```

换句话说，使用 id 为“productOrderContainer”`<DIV>`的`rowNumber`th`<TR>`中`<TABLE>`包含`<DIV>`的 id 找到“something”，然后获取它的文本值（我相信你的意思是“get me the value in `<div id='something'>`”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T08:34:34.653

以前，我使用了您可以在以下内容中找到的方法`WebElement`：

```
WebElement baseTable = driver.findElement(By.tagName("table"));
WebElement tableRow = baseTable.findElement(By.xpath("//tr[2]")); //should be the third row
webElement cellIneed = tableRow.findElement(By.xpath("//td[2]"));
String valueIneed = cellIneed.getText(); 
```

请注意，我在找到的`WebElement`实例中找到。

以上是Java代码，假设`driver`变量是健康的实例`WebDriver`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-25T13:24:13.040

如果你想访问表格单元格

```
WebElement thirdCell = driver.findElement(By.Xpath("//table/tbody/tr[2]/td[1]")); 
```

如果您想访问嵌套表格单元格 -

```
WebElement thirdCell = driver.findElement(By.Xpath("//table/tbody/tr[2]/td[2]"+//table/tbody/tr[1]/td[2])); 
```

有关更多详细信息，请访问本[教程](http://www.qaautomated.com/2016/10/access-web-elements-inside-table.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-08T19:01:59.350

```
(.//*[table-locator])[n] 
```

其中`n`表示特定的行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-18T17:45:55.467

以下代码允许您指定行/列号并获取结果**单元格值**：

```
WebDriver driver = new ChromeDriver();
WebElement base = driver.findElement(By.className("Table"));
tableRows = base.findElements(By.tagName("tr"));
List<WebElement> tableCols = tableRows.get([ROW_NUM]).findElements(By.tagName("td"));
String cellValue = tableCols.get([COL_NUM]).getText(); 
```

# polygon - 平面的质心是它上面的一个点吗

> ID：14191938
> 
> 赞同：0
> 
> 时间：2013-01-07T07:54:43.650
> 
> 标签：polygon, plane, centroid

我想知道一个平面的质心是否真的可以被视为平面上的一个点。我在平面上有几个点，我从中推导出了质心。我想知道我是否在平面方程中替换它它是有效的。

谢谢，哈沙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:59:27.273

更多的是一道数学题。答案将取决于您想要的质心定义。如果您将质心定义为将平面一分为二的直线的交点，那么显然每条线都在平面内，因此它们的所有交点也必须是。

# django - 将应用程序移动到嵌套文件夹后的 ImportError

> ID：14191944
> 
> 赞同：2
> 
> 时间：2013-01-07T07:55:08.387
> 
> 标签：django

当我想看看我是否可以以更好的方式组织我的项目时，我的应用程序运行良好。我通读了[有关构建 django 项目的](http://www.deploydjango.com/django_project_structure/index.html)教程。

之前我的项目结构如下：

*   卡穆卡姆
    *   图书
        *   管理员.py
        *   模型.py
        *   视图.py
        *   __init__.py
    *   静止的
    *   模板
    *   网址.py
    *   视图.py
    *   设置.py
    *   wsgi.py
    *   __init__.py

我想做的是将书籍应用程序移动到应用程序文件夹中。因此，我这样做并将项目结构更改为以下内容：

*   卡穆卡姆
    *   应用
        *   图书
            *   管理员.py
            *   模型.py
            *   视图.py
            *   __init__.py
    *   静止的
    *   模板
    *   网址.py
    *   视图.py
    *   设置.py
    *   wsgi.py
    *   __init__.py

然后我将views.py 和admin.py 中的导入从books.models 更改为apps.books.models。我还在`INSTALLED_APPS`settings.py 中从 book 更改为 apps.books。

然后，当我尝试运行 syncdb 时，出现以下错误：

```
raise ImproperlyConfigured('ImportError %s: %s' % (app, e.args[0]))
django.core.exceptions.ImproperlyConfigured: ImportError apps.books: No module named apps.books 
```

我在这里搞砸了什么，所以它再也找不到我的应用程序了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T08:02:41.630

您的应用程序文件夹没有`__init__.py`文件，因此无法识别为 python 模块

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-28T11:05:01.337

按照相同的指南，我遇到了同样的错误，因为未引用以下列表的最后一点。确保您执行了以下更改：

*   在应用程序文件夹中创建一个空白`__init__.py`文件（python 需要将其识别为包）
*   在您引用外部应用程序的任何地方更新导入语句：

    ```
    from projectname.apps.appname.models import YourModel, YourOtherModel 
    ```

*   内部`settings.py`编辑`INSTALLED_APPS`使其看起来像这样：

    ```
    INSTALLED_APPS = (

        ...

        # apps
        'projectname.apps.appname1',
        'projectname.apps.appname2',
    ) 
    ```

*   **指南中未指定这一点：**在所有`urls.py`文件中，更新`urlpatterns`!

    前：

    ```
    # client views
    urlpatterns += patterns('appname',
        ...
    ) 
    ```

    后：

    ```
    # client views
    urlpatterns += patterns('projectname.apps.appname',
        ...
    ) 
    ```

*   最后记得通过调用更新您的更改`python manage.py syncdb`

希望有帮助。

# iphone - iOS 6 SDK SLRequest 返回“400”

> ID：14191946
> 
> 赞同：2
> 
> 时间：2013-01-07T07:55:40.673
> 
> 标签：iphone, facebook-graph-api, ios6

让我说清楚。我没有使用`Facebook SDK`. 我正在使用 iOS SDK`Social.framework`和`ACAccountStore`访问 Facebook 帐户，并与它/他们一起发布。

我使用相同的代码在 Twitter 上发帖。它可以 100% 工作。但出于某种原因，无论我为 Facebook 集成做什么，我在尝试发布时都会收到“400”错误。

我的方法是：

```
ACAccountStore *account = [[ACAccountStore alloc] init];
ACAccountType *facebookAccountType = [account accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

// Specify App ID and permissions
NSDictionary *options = @{ ACFacebookAppIdKey: @"MY_APP_ID",ACFacebookPermissionsKey: @[@"publish_stream", @"publish_actions"],ACFacebookAudienceKey: ACFacebookAudienceFriends };
[account requestAccessToAccountsWithType:facebookAccountType options:options
                              completion:^(BOOL granted, NSError *error)
 {
     if (granted == YES)
     {
         NSDictionary *parameters = @{@"message": string999};
         NSURL *feedURL = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];

         SLRequest *feedRequest = [SLRequest
                                   requestForServiceType:SLServiceTypeFacebook
                                   requestMethod:SLRequestMethodPOST
                                   URL:feedURL
                                   parameters:parameters];

         acct.accountType = facebookAccountType;

         // Post the request
         [feedRequest setAccount:acct];

         // Block handler to manage the response
         [feedRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
          {
              if (granted && error == nil) {
              } else {
                  NSLog(@"Facebook response, HTTP response: %i %@", [urlResponse statusCode], [error description]);
                  [self closeShareMenu];
              }
          }];
     }
 } 
```

我不知道我哪里错了！太烦人了！我已经在 Facebook Developers 中正确设置了我的应用程序！请帮忙 -_-'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:38:47.187

# php - PHP-FPM fastcgi_finish_request 可靠吗？

> ID：14191947
> 
> 赞同：6
> 
> 时间：2013-01-07T07:55:41.390
> 
> 标签：php, fastcgi

在声明后在我的 php 脚本中实施一些后处理后`fastcgi_finish_request();`，我担心会出现一些差异。

看起来 PHP 在 fastcgi_finish_request 之后没有执行所有脚本。

在日志文件中，我找不到关于这部分的通知，没有警告，没有错误或违规行为。

是否存在文档中未提及的使用 fastcgi_finish_request 的限制或提示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-08T19:18:32.213

调用 fastcgi_finish_request() 之后的任何显式或隐式输出刷新都将导致退出 PHP 脚本而没有任何警告或错误。换句话说，在调用 fastcgi_finish_request() 之后调用 flush() 将表现得像调用了 exit() 而不是 flush()。

这是记录该行为[的 PHP 票证。](https://bugs.php.net/bug.php?id=68772)他们将其标记为“不是错误”。

这是一些重现该问题的代码：

```
function writestamp($case, $file){
  file_put_contents($file, "". $case . ": " . time() . "" . PHP_EOL, FILE_APPEND);
}

// Flush buffers and stop output buffering
while (@ob_end_flush());

// Destroy session, otherwise request can't be finished
if(session_status() > 1) session_destroy();

$file = tempnam(sys_get_temp_dir(), 'flushbug_');
echo 'Writing 4 timestamps to: '.$file;

// this one gets called
writestamp('1', $file);

// and this
register_shutdown_function('writestamp', '4', $file);

// finish the request
fastcgi_finish_request();

// as does this
writestamp('2', $file);

// but this one does NOT - calling flush() after fastcgi_finish_request() exits PHP without errors or warnings
flush();
writestamp('3', $file); 
```

一个简单的解决方法是在调用[`ignore_user_abort(true)`](https://www.php.net/manual/en/function.ignore-user-abort.php)之前或之后`fastcgi_finish_request`调用：

```
ignore_user_abort(true);
fastcgi_finish_request(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-24T23:40:17.457

到目前为止，对我们来说，在调用 fastcgi_finish_request() 之后，几乎所有东西都可以正常工作。除了 error_log()。调用此函数后它不会记录任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-22T14:54:56.127

要获取错误日志工作集：**catch_workers_output = yes**在您的池 conf 文件**www.conf**

```
sed -i "s/;catch_workers_output = yes.*/catch_workers_output = yes/g" /etc/php/<VERSION>/fpm/pool.d/www.conf 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-06T14:30:45.007

`error_log`默认情况下，通过 fastcgi 写入日志（这就是你看到 php log into的原因`/var/log/nginx/error.log`），当调用时`fastcgi_finish_request`，这将关闭 php-fpm 和 fastcgi 服务器（实例为 Nginx）之间的链接，因此日志不会写入：/

[您可以根据http://php.net/manual/fr/function.error-log.php](http://php.net/manual/fr/function.error-log.php)上的文档指定日志位置。

注意 php worker 还活着，并且可以使 php-fpm 池饱和。

# c# - 我的用户控件的线程

> ID：14191953
> 
> 赞同：0
> 
> 时间：2013-01-07T07:56:46.853
> 
> 标签：c#, multithreading, backgroundworker

我有一个用户控件，它以拨号格式（图像）显示速度。

它有一个方法：SetSpeed(int speed);

然后它使转盘从最后设定的速度移动到所需的速度。然后它会加罪。也就是说，它移动到新的速度。

问题是，如果汽车以 10 公里/小时的速度行驶，然后（非常快地）达到 100 公里/小时，则表盘可能需要 2 秒才能达到该速度......（这不是 100% 实时 - 这是现实的。 . 它移动到新的速度）。

但是，如果在表盘达到 100 公里/小时之前，人减速到 50 公里/小时，我需要中断移动到 100，然后开始移动到 50。不管表盘的当前位置（而不是速度）如何，我需要更改“目标速度”。

我的控件使用 BackgroundWorker 来处理刷新，而不是锁定 UI。

所以，我的电话在 UI 上是非常基本的：

```
dial1.SetSpeed(int.Parse(value)); 
```

然后用户控件执行此操作：

```
BackgroundWorker bw = new BackgroundWorker();

public void SetSpeed(int speed)
        {
            while(bw.IsBusy)
            {
                Thread.Sleep(50);
            }
            bw.RunWorkerAsync(speed);
        } 
```

以及完成工作的方法：

```
private void UpdateSpeed(object sender, DoWorkEventArgs e)
        {
            var oldSpeed = airSpeed;
            var newSpeed = (int) e.Argument;

            if(oldSpeed <= newSpeed)
            {
                for (int i = oldSpeed; i < newSpeed; i++)
                {
                    airSpeed++;
                    this.Invoke(new MethodInvoker(Refresh));
                }
            }
            else
            {
                for (int i = oldSpeed; i > newSpeed; i--)
                {
                    airSpeed--;
                    this.Invoke(new MethodInvoker(Refresh));

                }

            }
            airSpeed = newSpeed;
        } 
```

当我快速连续发送两个值时它会锁定......如果线程正在运行，我如何中断线程并更改值？

（另外，我认为我改变速度的代码很糟糕 - 可以做得更整洁吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:04:00.843

你不。您以适当的方式处理它，使用锁，并检查值是否需要更改。你不要打断它。

基本上，您需要在 SetSpeed 和 Refresh 方法之间设置一个锁定区域，以便一个阻止另一个。然后，当您设置速度并且线程当前处于关键区域时，它只是等待更新完成。

而且您的 UpdateSpeed 毫无意义 - 更改（空速 - 和空速 ++）应该是计时器驱动的......您目前以“任意”速度更改它们，具体取决于处理器速度。没有时间。

# vim - gvim 使用 g ctrl 显示“所有标签”需要很长时间-]

> ID：14191956
> 
> 赞同：1
> 
> 时间：2013-01-07T07:57:11.990
> 
> 标签：vim, tags

我正在使用 gvim 和 ctags 导航 c++ 代码。ctags 文件的大小为 3.5 GB。ctrl-] 工作得很快，但 g+ctrl-] 花了将近 5 秒，我认为这太多了（搜索排序的 ctgas 文件的时间太长了！）。有什么提高速度的建议吗？

**我的.gvimrc：**

```
set gcr=n-c-v:blinkoff0         " it switches off cursor blinks
set lines=52 columns=120        " Sets the geometry of gui window.
colorscheme default             " desert load the color scheme of choice
set nocompatible                " This must be first, because it changes other options as a side effect.
set ic
set backspace=indent,eol,start  " allow backspacing over everything in insert mode
set history=10000               " keep 100 lines of command line history
set showcmd                     " display incomplete commands
set incsearch                   " do incremental searching
set et
set paste
set ruler 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:17:25.157

当你`'ignorecase'`打开时，Vim 主要需要对标签数据库执行线性搜索，而不是更快的二进制搜索。您可以使用适当的标签数据库来避免这种惩罚，该数据库通过此行指示大小写折叠排序：

```
!_TAG_FILE_SORTED   2 
```

查看`:help 'tagbsearch'`所有详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T07:57:11.990

问题是由于ic！当我删除 ic（即设置 noic）时，速度大大提高了。g+ctrl-] 现在和 ctrl-] 一样快。

# windows - 在 Hyper-V Server 2012 中安装 Ubuntu

> ID：14191961
> 
> 赞同：-1
> 
> 时间：2013-01-07T07:57:31.227
> 
> 标签：windows, ubuntu, hyper-v

我只是尝试安装 Hyper-V Server 2012 本机版本。Hyper-V 本机版本内部没有 GUI

我想在 Hyper-V 服务器中运行 ubuntu。

任何文档如何做到这一点？或文档如何使用 Hyper-V Server Native 版本？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:01:00.607

Hyper-V 服务器基本上只是一个核心 WIndows 服务器 - 欢迎使用文档。

PowerShell 会工作。PowerShell 具有用于管理 Hyper-V 的 cmdlet。

RSAT - Rmote 服务器管理工​​具 - 也有效。从另一台服务器或 Windows 8 机器管理它。

# image-processing - OpenCV：高效的高斯差分

> ID：14191967
> 
> 赞同：13
> 
> 时间：2013-01-07T07:58:28.707
> 
> 标签：image-processing, opencv, edge-detection

对于边缘检测的特定情况，我正在尝试实现[高斯差（DoG）。](http://en.wikipedia.org/wiki/Difference_of_Gaussians)正如算法的名称所暗示的那样，它实际上相当简单：

```
Mat g1, g2, result;
Mat img = imread("test.png", CV_LOAD_IMAGE_COLOR); 
GaussianBlur(img, g1, Size(1,1), 0);
GaussianBlur(img, g2, Size(3,3), 0);
result = g1 - g2; 
```

但是，我觉得这可以更有效地完成。是否可以通过更少的数据传递来完成？

[这里](https://stackoverflow.com/questions/8308325/opencv-make-a-difference-of-gaussian/14141790)的问题教会了我有关可分离过滤器的知识，但我是一个图像处理新手，无法理解如何在这种情况下应用它们。

谁能给我一些关于如何优化它的指示？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T10:34:17.903

可分离滤波器的工作方式与普通高斯滤波器相同。当图像尺寸较大时，可分离滤波器比普通高斯滤波器更快。滤波器核可以解析形成，滤波器可以分成两个一维向量，一个水平向量和一个垂直向量。

例如..

考虑过滤器是

```
1 2 1
2 4 2
1 2 1 
```

这个过滤器可以分为水平矢量（H）1 2 1和垂直矢量（V）1 2 1。现在这两个过滤器的集合被应用于图像。矢量 H 应用于水平像素，V 应用于垂直像素。然后将结果加在一起以获得高斯模糊。我正在提供一个执行可分离高斯模糊的函数。（请不要问我评论，我太懒了：P）

```
Mat sepConv(Mat input, int radius)
{

Mat sep;
Mat dst,dst2;

int ksize = 2 *radius +1;
double sigma = radius / 2.575;

Mat gau = getGaussianKernel(ksize, sigma,CV_32FC1);

Mat newgau = Mat(gau.rows,1,gau.type());
gau.col(0).copyTo(newgau.col(0));

filter2D(input, dst2, -1, newgau);

filter2D(dst2.t(), dst, -1, newgau);

return dst.t();

} 
```

另一种改进高斯模糊计算的方法是使用 FFT。如果数据量非常大，基于 FFT 的卷积比可分离核方法快得多。

快速的谷歌搜索为我提供了以下功能

```
Mat Conv2ByFFT(Mat A,Mat B)
{
Mat C;
// reallocate the output array if needed
C.create(abs(A.rows - B.rows)+1, abs(A.cols - B.cols)+1, A.type());
Size dftSize;
// compute the size of DFT transform
dftSize.width = getOptimalDFTSize(A.cols + B.cols - 1);
dftSize.height = getOptimalDFTSize(A.rows + B.rows - 1);

// allocate temporary buffers and initialize them with 0's
Mat tempA(dftSize, A.type(), Scalar::all(0));
Mat tempB(dftSize, B.type(), Scalar::all(0));

// copy A and B to the top-left corners of tempA and tempB, respectively
Mat roiA(tempA, Rect(0,0,A.cols,A.rows));
A.copyTo(roiA);
Mat roiB(tempB, Rect(0,0,B.cols,B.rows));
B.copyTo(roiB);

// now transform the padded A & B in-place;
// use "nonzeroRows" hint for faster processing
Mat Ax = computeDFT(tempA);
Mat Bx = computeDFT(tempB);

// multiply the spectrums;
// the function handles packed spectrum representations well
mulSpectrums(Ax, Bx, Ax,0,true);

// transform the product back from the frequency domain.
// Even though all the result rows will be non-zero,
// we need only the first C.rows of them, and thus we
// pass nonzeroRows == C.rows
//dft(Ax, Ax, DFT_INVERSE + DFT_SCALE, C.rows);

updateMag(Ax);
Mat Cx = updateResult(Ax);

//idft(tempA, tempA, DFT_SCALE, A.rows + B.rows - 1 );
// now copy the result back to C.
Cx(Rect(0, 0, C.cols, C.rows)).copyTo(C);
//C.convertTo(C, CV_8UC1);
// all the temporary buffers will be deallocated automatically
return C;

} 
```

希望这可以帮助。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-10T13:37:35.937

我知道这篇文章很旧。但这个问题很有趣，可能会让未来的读者感兴趣。据我所知，DoG 过滤器是不可分离的。所以剩下两个解决方案：1）通过调用函数 GaussianBlur() 计算两个卷积，然后将两个图像相减 2）通过计算两个高斯内核的差异来制作一个内核，然后将其与图像进行卷积。

关于哪个解决方案更快：解决方案 2 乍一看似乎更快，因为它只对图像进行一次卷积。但这不涉及可分离过滤器。相反，第一种解决方案涉及两个可分离的过滤器，最终可能会更快。（我不知道 OpenCV 函数 GaussianBlur() 是如何优化的，以及它是否使用可分离滤波器。但很可能。）

但是，如果使用 FFT 技术进行卷积，则第二种解决方案肯定会更快。如果有人有任何建议要添加或希望纠正我，请这样做。

# c++ - 局部变量和作为参数传递的变量

> ID：14191971
> 
> 赞同：0
> 
> 时间：2013-01-07T07:58:54.997
> 
> 标签：c++, constructor, copy-constructor, output

我对以下代码有疑问。功能`fun1`和`fun2`都是一样的。在一个中，我声明了一个局部变量，在另一个中，一个变量通过参数传递。那么为什么不调用 fun1 复制构造函数。

```
#include<stdio.h>
#include<iostream>
using namespace std;
class A
{
    public:
A()
{
    printf("constructor\n");
}
A(const A&)
{
    printf("copy cons\n");
}
~A()
{
    printf("destructor\n");
}
};
A fun1()
{
A obj;
return obj;
}
A fun2(A obj)
{
return obj;
}

int main()
{
    A a=fun1();
    printf("after fun1\n");
    A b;
    A c = fun2(b);
} 
```

输出

```
constructor
after fun1
constructor
copy cons
copy cons
destructor
destructor
destructor
destructor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:02:24.103

> 那么为什么不调用 fun1 复制构造函数呢？

如果`A`具有可访问的副本或移动构造函数，编译器可能会选择省略副本。这就是所谓的（命名的）返回值优化[（（N）RVO）](http://en.wikipedia.org/wiki/Return_value_optimization)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:02:41.777

由于[命名返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)，这是编译器对您的代码执行的优化。它认识到函数 fun1() 的返回类型与 fun1() 中的临时对象（类型 A）相同，因此它不会创建它的副本（不调用复制构造函数）返回声明。

您可以尝试在[不优化](http://www.network-theory.co.uk/docs/gccintro/gccintro_49.html)的情况下编译代码，然后查看是否调用了复制构造函数。如果您使用 gcc 编译器，关闭优化的编译器标志是“-O0”。

# reporting-services - 在 SSRS 2008 中导出到 MHTML 时保持折叠展开

> ID：14191973
> 
> 赞同：0
> 
> 时间：2013-01-07T07:59:11.890
> 
> 标签：reporting-services, ssrs-2008

是否可以创建具有“折叠-展开”功能的报告并在将报告导出到 MHTML 时保持“实时”？

我尝试它没有任何成功，我只是想知道是否有任何“变通”的方法。我在网上没有找到关于这个问题的任何参考资料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:38:35.600

MHTML 是在导出报告定义时对 RDL 语言的解释。我不确定 SSRS 的许多高级选项是否可以用于导出（向下钻取、折叠等）。不过，你可以用 Excel 折叠，我知道。

难道你不能开发一个调用服务器或给用户直接访问的 HTML 页面吗？不同的格式会做不同的事情，但直接报告总是比它的“导出”格式更强大。在走得太远之前，我会问：“你为什么需要这样做？” 某个用户是否必须以与 SSRS 分离的格式使用它？

我可以告诉你两件事，取决于你的代码知识水平和你想要完成的事情：

1.  您可以将报表作为属性嵌入到现有 HTML 中。它类似于：

    < Form id="frmRender" action="http://(servername)/(webservicelocaleofreport) method="post" target="self">

2.  您可以使用 C# 或 VB.NET 语言编写报表查看器，该报表查看器可以调用 Web 服务以通过 SOAP Web 调用实时查看报表。

# android - 我的 Android 应用程序的 editText 中没有出现任何值

> ID：14191976
> 
> 赞同：0
> 
> 时间：2013-01-07T07:59:21.940
> 
> 标签：android, xml

我是使用 Java/XML 开发的新手，我在使用这个应用程序时遇到了一个奇怪的问题。代码编译良好，应用程序以我想要的方式出现。但是一些主要活动的文本视图不显示我在键盘上键入的值。试图通过阅读 LogCat 来了解发生了什么，但我真的不明白问题出在哪里。有人可以帮忙吗？提前很多这里是 XML 代码：

```
 <LinearLayout 
            xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#000000"
            android:orientation="vertical"
            tools:context=".MainActivity" >

        <ScrollView    
            android:id="@+id/scroll"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:scrollbars="none">

            <HorizontalScrollView 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">

            <TableLayout
                android:id="@+id/TheTable"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:stretchColumns="0,1,2,3,4,5,6,7,8,9,10,11,12" >        

             <TableRow
                 android:id="@+id/tbRow1"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content" >

              <TextView
                android:id="@+id/spot"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingRight="10dp"
                android:text="@string/spot"
                android:textSize="10sp"
                android:gravity="center"
                android:textColor="@color/white" />

              <TextView
                    android:id="@+id/div"               
                    android:text="@string/div"
                    android:gravity="center"
                    android:textColor="@color/white"
                    android:textSize="10sp" />      

                <TextView
                    android:id="@+id/rate"
                    android:text="@string/Rate"
                    android:gravity="center"
                    android:textColor="@color/white"
                    android:textSize="10sp" />
            </TableRow>

            <TableRow
                android:id="@+id/tbRow2"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

                <EditText
                    android:id="@+id/spotText"
                    android:hint="@string/Spot"
                    android:gravity="center"      
                    android:inputType="numberSigned"
                    android:textColor="@color/white"
                    android:textSize="10sp" />

                <EditText
                    android:id="@+id/divRate"
                    android:hint="@string/divRate"
                    android:gravity="center"    
                    android:inputType="numberDecimal"
                    android:textColor="@color/white"
                    android:textSize="10sp" />

                <EditText
                    android:id="@+id/IR"
                    android:hint="@string/IRate"
                    android:gravity="center"    
                    android:inputType="numberDecimal"
                    android:textColor="@color/white"
                    android:textSize="10sp" />

            </TableRow>        

                        <TableRow
                            android:id="@+id/tbRow3"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" >

                            <TextView
                                android:id="@+id/product"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:paddingRight="10dp"
                                android:text="@string/product"
                                android:gravity="center"
                                android:textSize="10sp"
                                android:textColor="@color/white" />

                            <TextView
                                android:id="@+id/strike"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:paddingRight="10dp"
                                android:text="@string/strike"
                                android:textSize="10sp"
                                android:gravity="center"
                                android:textColor="@color/white" />

                            <TextView
                                android:id="@+id/maturity"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:paddingRight="10dp"
                                android:text="@string/maturity"
                                android:textSize="10sp"
                                android:gravity="center"
                                android:textColor="@color/white" />

                            <TextView
                                android:id="@+id/vol"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:paddingRight="10dp"
                                android:textSize="10sp"
                                android:gravity="center"
                                android:text="@string/volatility"
                                android:textColor="@color/white" />

                            <TextView
                                android:id="@+id/Qty"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:paddingRight="10dp"
                                android:textSize="10sp"
                                android:gravity="center"
                                android:text="@string/Quantity"
                                android:textColor="@color/white" />

                            <TextView
                                android:id="@+id/price"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:paddingRight="15dp"
                                android:textSize="10sp"
                                android:gravity="center"
                                android:text="@string/price"
                                android:textColor="@color/white" />
                        </TableRow>
                        <TableRow
                            android:id="@+id/tbRow4" >
                            <Spinner 
                                android:id="@+id/spin1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:dropDownSelector="@string/Product"
                                android:prompt="@string/Product"
                                android:entries="@array/Array"
                                android:background="@color/SpinColor"
                                android:textSize="10sp"/>
                            <EditText
                                android:id="@+id/K1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:hint="K"
                                android:textColor="@color/white"
                                android:gravity="center"
                                android:textSize="10sp"/>
                            <EditText
                                android:id="@+id/T1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:hint="T"
                                android:textColor="@color/white"
                                android:gravity="center"
                                android:textSize="10sp"/>
                            <EditText
                                android:id="@+id/Vol1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:hint="Vol"
                                android:textColor="@color/white"
                                android:gravity="center"
                                android:textSize="10sp"/>
                            <EditText
                                android:id="@+id/Qty1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:hint="Qty"
                                android:textColor="@color/white"
                                android:gravity="center"
                                android:textSize="10sp"/>
                            <TextView
                                android:id="@+id/Px1"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:gravity="center"
                                android:textColor="@color/blue"
                                android:textSize="10sp"/>
                        </TableRow>
                        <TableRow
                            android:id="@+id/tbRow9">                
                             <Button 
                                android:id="@+id/delBtn"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:textSize="10sp"
                                android:text="@string/delete"/>
                            <Button 
                                android:id="@+id/addBtn"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:textSize="10sp"
                                android:text="@string/Add"/>

                        </TableRow>
                    </TableLayout>

               </HorizontalScrollView>
            </ScrollView>            

        </LinearLayout> 
```

这是LogCat：

```
 01-07 07:46:12.465: E/ActivityThread(8437): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d54278 that was originally bound here
    01-07 07:46:12.465: E/ActivityThread(8437): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d54278 that was originally bound here
    01-07 07:46:12.465: E/ActivityThread(8437):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
    01-07 07:46:12.465: E/ActivityThread(8437):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
    01-07 07:46:12.465: E/ActivityThread(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
    01-07 07:46:12.465: E/ActivityThread(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
    01-07 07:46:12.465: E/ActivityThread(8437):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
    01-07 07:46:12.465: E/ActivityThread(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
    01-07 07:46:12.465: E/ActivityThread(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
    01-07 07:46:12.465: E/ActivityThread(8437):     at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
    01-07 07:46:12.465: E/ActivityThread(8437):     at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
    01-07 07:46:12.465: E/ActivityThread(8437):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
    01-07 07:46:12.465: E/ActivityThread(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
    01-07 07:46:12.465: E/ActivityThread(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
    01-07 07:46:12.465: E/ActivityThread(8437):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
    01-07 07:46:12.465: E/ActivityThread(8437):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
    01-07 07:46:12.465: E/ActivityThread(8437):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
    01-07 07:46:12.465: E/ActivityThread(8437):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
    01-07 07:46:12.465: E/ActivityThread(8437):     at java.lang.Thread.run(Thread.java:856)
    01-07 07:46:12.484: E/StrictMode(8437): null
    01-07 07:46:12.484: E/StrictMode(8437): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d54278 that was originally bound here
    01-07 07:46:12.484: E/StrictMode(8437):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
    01-07 07:46:12.484: E/StrictMode(8437):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
    01-07 07:46:12.484: E/StrictMode(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
    01-07 07:46:12.484: E/StrictMode(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
    01-07 07:46:12.484: E/StrictMode(8437):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
    01-07 07:46:12.484: E/StrictMode(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
    01-07 07:46:12.484: E/StrictMode(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
    01-07 07:46:12.484: E/StrictMode(8437):     at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
    01-07 07:46:12.484: E/StrictMode(8437):     at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
    01-07 07:46:12.484: E/StrictMode(8437):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
    01-07 07:46:12.484: E/StrictMode(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
    01-07 07:46:12.484: E/StrictMode(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
    01-07 07:46:12.484: E/StrictMode(8437):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
    01-07 07:46:12.484: E/StrictMode(8437):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
    01-07 07:46:12.484: E/StrictMode(8437):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
    01-07 07:46:12.484: E/StrictMode(8437):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
    01-07 07:46:12.484: E/StrictMode(8437):     at java.lang.Thread.run(Thread.java:856)
    01-07 07:46:12.524: E/ActivityThread(8437): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d57990 that was originally bound here
    01-07 07:46:12.524: E/ActivityThread(8437): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d57990 that was originally bound here
    01-07 07:46:12.524: E/ActivityThread(8437):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
    01-07 07:46:12.524: E/ActivityThread(8437):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
    01-07 07:46:12.524: E/ActivityThread(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
    01-07 07:46:12.524: E/ActivityThread(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
    01-07 07:46:12.524: E/ActivityThread(8437):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
    01-07 07:46:12.524: E/ActivityThread(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
    01-07 07:46:12.524: E/ActivityThread(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
    01-07 07:46:12.524: E/ActivityThread(8437):     at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
    01-07 07:46:12.524: E/ActivityThread(8437):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
    01-07 07:46:12.524: E/ActivityThread(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
    01-07 07:46:12.524: E/ActivityThread(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
    01-07 07:46:12.524: E/ActivityThread(8437):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
    01-07 07:46:12.524: E/ActivityThread(8437):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
    01-07 07:46:12.524: E/ActivityThread(8437):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
    01-07 07:46:12.524: E/ActivityThread(8437):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
    01-07 07:46:12.524: E/ActivityThread(8437):     at java.lang.Thread.run(Thread.java:856)
    01-07 07:46:12.544: E/StrictMode(8437): null
    01-07 07:46:12.544: E/StrictMode(8437): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d57990 that was originally bound here
    01-07 07:46:12.544: E/StrictMode(8437):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
    01-07 07:46:12.544: E/StrictMode(8437):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
    01-07 07:46:12.544: E/StrictMode(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
    01-07 07:46:12.544: E/StrictMode(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
    01-07 07:46:12.544: E/StrictMode(8437):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
    01-07 07:46:12.544: E/StrictMode(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
    01-07 07:46:12.544: E/StrictMode(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
    01-07 07:46:12.544: E/StrictMode(8437):     at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
    01-07 07:46:12.544: E/StrictMode(8437):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
    01-07 07:46:12.544: E/StrictMode(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
    01-07 07:46:12.544: E/StrictMode(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
    01-07 07:46:12.544: E/StrictMode(8437):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
    01-07 07:46:12.544: E/StrictMode(8437):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
    01-07 07:46:12.544: E/StrictMode(8437):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
    01-07 07:46:12.544: E/StrictMode(8437):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
    01-07 07:46:12.544: E/StrictMode(8437):     at java.lang.Thread.run(Thread.java:856)
    01-07 07:46:13.445: E/Trace(12824): error opening trace file: No such file or directory (2)
    01-07 07:46:14.484: E/InputDispatcher(8021): channel '4104a3e8 com.example.lilpricer/com.example.lilpricer.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
    01-07 07:46:23.534: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
    01-07 07:46:33.184: E/Trace(12840): error opening trace file: No such file or directory (2)
    01-07 07:46:34.434: E/Trace(12853): error opening trace file: No such file or directory (2)
    01-07 07:46:38.474: E/Trace(12868): error opening trace file: No such file or directory (2)
    01-07 07:46:39.904: E/Trace(12881): error opening trace file: No such file or directory (2)
    01-07 07:46:42.026: E/Trace(12894): error opening trace file: No such file or directory (2)
    01-07 07:46:45.554: E/Trace(12911): error opening trace file: No such file or directory (2)
    01-07 07:46:48.954: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
    01-07 07:46:50.244: E/Trace(12941): error opening trace file: No such file or directory (2)
    01-07 07:46:59.634: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
    01-07 07:47:03.514: E/ActivityThread(8437): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d61f28 that was originally bound here
    01-07 07:47:03.514: E/ActivityThread(8437): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d61f28 that was originally bound here
    01-07 07:47:03.514: E/ActivityThread(8437):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
    01-07 07:47:03.514: E/ActivityThread(8437):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
    01-07 07:47:03.514: E/ActivityThread(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
    01-07 07:47:03.514: E/ActivityThread(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
    01-07 07:47:03.514: E/ActivityThread(8437):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
    01-07 07:47:03.514: E/ActivityThread(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
    01-07 07:47:03.514: E/ActivityThread(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
    01-07 07:47:03.514: E/ActivityThread(8437):     at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
    01-07 07:47:03.514: E/ActivityThread(8437):     at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
    01-07 07:47:03.514: E/ActivityThread(8437):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
    01-07 07:47:03.514: E/ActivityThread(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
    01-07 07:47:03.514: E/ActivityThread(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
    01-07 07:47:03.514: E/ActivityThread(8437):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
    01-07 07:47:03.514: E/ActivityThread(8437):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
    01-07 07:47:03.514: E/ActivityThread(8437):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
    01-07 07:47:03.514: E/ActivityThread(8437):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
    01-07 07:47:03.514: E/ActivityThread(8437):     at java.lang.Thread.run(Thread.java:856)
    01-07 07:47:03.704: E/StrictMode(8437): null
    01-07 07:47:03.704: E/StrictMode(8437): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d61f28 that was originally bound here
    01-07 07:47:03.704: E/StrictMode(8437):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
    01-07 07:47:03.704: E/StrictMode(8437):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
    01-07 07:47:03.704: E/StrictMode(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
    01-07 07:47:03.704: E/StrictMode(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
    01-07 07:47:03.704: E/StrictMode(8437):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
    01-07 07:47:03.704: E/StrictMode(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
    01-07 07:47:03.704: E/StrictMode(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
    01-07 07:47:03.704: E/StrictMode(8437):     at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
    01-07 07:47:03.704: E/StrictMode(8437):     at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
    01-07 07:47:03.704: E/StrictMode(8437):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
    01-07 07:47:03.704: E/StrictMode(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
    01-07 07:47:03.704: E/StrictMode(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
    01-07 07:47:03.704: E/StrictMode(8437):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
    01-07 07:47:03.704: E/StrictMode(8437):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
    01-07 07:47:03.704: E/StrictMode(8437):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
    01-07 07:47:03.704: E/StrictMode(8437):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
    01-07 07:47:03.704: E/StrictMode(8437):     at java.lang.Thread.run(Thread.java:856)
    01-07 07:47:03.744: E/ActivityThread(8437): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d49c40 that was originally bound here
    01-07 07:47:03.744: E/ActivityThread(8437): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d49c40 that was originally bound here
    01-07 07:47:03.744: E/ActivityThread(8437):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
    01-07 07:47:03.744: E/ActivityThread(8437):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
    01-07 07:47:03.744: E/ActivityThread(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
    01-07 07:47:03.744: E/ActivityThread(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
    01-07 07:47:03.744: E/ActivityThread(8437):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
    01-07 07:47:03.744: E/ActivityThread(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
    01-07 07:47:03.744: E/ActivityThread(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
    01-07 07:47:03.744: E/ActivityThread(8437):     at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
    01-07 07:47:03.744: E/ActivityThread(8437):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
    01-07 07:47:03.744: E/ActivityThread(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
    01-07 07:47:03.744: E/ActivityThread(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
    01-07 07:47:03.744: E/ActivityThread(8437):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
    01-07 07:47:03.744: E/ActivityThread(8437):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
    01-07 07:47:03.744: E/ActivityThread(8437):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
    01-07 07:47:03.744: E/ActivityThread(8437):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
    01-07 07:47:03.744: E/ActivityThread(8437):     at java.lang.Thread.run(Thread.java:856)
    01-07 07:47:03.764: E/StrictMode(8437): null
    01-07 07:47:03.764: E/StrictMode(8437): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d49c40 that was originally bound here
    01-07 07:47:03.764: E/StrictMode(8437):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
    01-07 07:47:03.764: E/StrictMode(8437):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
    01-07 07:47:03.764: E/StrictMode(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
    01-07 07:47:03.764: E/StrictMode(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
    01-07 07:47:03.764: E/StrictMode(8437):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
    01-07 07:47:03.764: E/StrictMode(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
    01-07 07:47:03.764: E/StrictMode(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
    01-07 07:47:03.764: E/StrictMode(8437):     at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
    01-07 07:47:03.764: E/StrictMode(8437):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
    01-07 07:47:03.764: E/StrictMode(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
    01-07 07:47:03.764: E/StrictMode(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
    01-07 07:47:03.764: E/StrictMode(8437):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
    01-07 07:47:03.764: E/StrictMode(8437):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
    01-07 07:47:03.764: E/StrictMode(8437):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
    01-07 07:47:03.764: E/StrictMode(8437):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
    01-07 07:47:03.764: E/StrictMode(8437):     at java.lang.Thread.run(Thread.java:856)
    01-07 07:47:53.673: E/ActivityThread(8437): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d7c008 that was originally bound here
    01-07 07:47:53.673: E/ActivityThread(8437): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d7c008 that was originally bound here
    01-07 07:47:53.673: E/ActivityThread(8437):     at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
    01-07 07:47:53.673: E/ActivityThread(8437):     at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
    01-07 07:47:53.673: E/ActivityThread(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1418)
    01-07 07:47:53.673: E/ActivityThread(8437):     at android.app.ContextImpl.bindService(ContextImpl.java:1407)
    01-07 07:47:53.673: E/ActivityThread(8437):     at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
    01-07 07:47:53.673: E/ActivityThread(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
    01-07 07:47:53.673: E/ActivityThread(8437):     at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
    01-07 07:47:53.673: E/ActivityThread(8437):     at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
    01-07 07:47:53.673: E/ActivityThread(8437):     at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
    01-07 07:47:53.673: E/ActivityThread(8437):     at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
    01-07 07:47:53.673: E/ActivityThread(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
    01-07 07:47:53.673: E/ActivityThread(8437):     at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
    01-07 07:47:53.673: E/ActivityThread(8437):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
    01-07 07:47:53.673: E/ActivityThread(8437):     at java.util.concurrent.FutureTask.run(FutureTask.java:234) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:07:17.283

在这里我得到了你的问题。看起来您已将所有 EditText 的 TextColor 设置为白色，并且当您键入一些文本时，由于 EditText 具有白色背景，因此没有任何内容可见。

`android:textColor="@color/white"`将您的 EditTexts 中的此属性替换为`android:textColor="@android:color/black"`

# objective-c - 如果使用 self，则使用 instanceType 作为返回值会失败。为什么？

> ID：14191979
> 
> 赞同：2
> 
> 时间：2013-01-07T08:00:02.630
> 
> 标签：objective-c, clang, xcode4.5

```
static NSMutableDictionary * allTheSingletons;
@implementation BGSuperSingleton

+(instancetype)singleton
{
    return [self singleton1];
}
+(id) singleton1
{
    NSString* className = NSStringFromClass([self class]);

    if (!allTheSingletons)
    {
        allTheSingletons = NSMutableDictionary.dictionary;
    }

    id result = allTheSingletons[className];

    PO(result);
    if (result==nil)
    {
        result = [[[self class] alloc]init];
        allTheSingletons[className]=result;
    }
    return result;
} 
```

BGSuperSingleton 应该是所有单例类的父类。

然后我在其中一个子类中做：

```
+(NSPredicate *)withinASquare:(double)distance{
    CLLocation * anchorWeUsed=[self singleton].mapCenterLocation; //Error map center is not of type ID
    return [self withinASquare:distance fromLocation:anchorWeUsed];
} 
```

看起来 CLANG 不明白单例是类型`+(instancetype)`，而是认为类型是 id。

我错过了什么？

替换`self`为`MySubSingletonClass`（这是在编译时已知的）虽然有效。

有什么解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:19:01.090

不确定（以下所有内容只是我的假设），但似乎在编译时编译器不知道`[self singleton1]`. 正如[文档](http://clang.llvm.org/docs/LanguageExtensions.html#related-result-types)中所说（如果我们也推断该行为`instancetype`）：

> **...如果该方法的返回类型与其类的类型兼容，则**该方法将具有相关的结果类型...

即`singleton1`返回未知类的对象，`singleton`并认为它返回与`BGSuperSingleton`类不兼容的对象（就编译时未知而言），因此相关的结果魔术在这里不起作用。

对此感兴趣并检查了：

```
+ (NSPredicate*) withinASquare: (double)distance {
    CLLocation* anchorWeUsed = [[self alloc] init].mapCenterLocation; // Error map center is not of type ID
    return [self withinASquare:distance fromLocation:anchorWeUsed];
} 
```

`alloc`并`init`返回相关的结果类，错误仍然存​​在。帮助的事情是：

```
+ (NSPredicate*) withinASquare: (double)distance {
    BGSuperSingleton* bgSuperSingleton = [[self alloc] init]; // class is known at compile time
    CLLocation* anchorWeUsed = bgSuperSingleton.mapCenterLocation; // no error here
    return [self withinASquare:distance fromLocation:anchorWeUsed];
} 
```

我仍然对此感兴趣，并希望有人可以批准或纠正我的**假设**。

# objective-c - 从 iOS 服务检测屏幕开/关

> ID：14191980
> 
> 赞同：10
> 
> 时间：2013-01-07T08:00:05.437
> 
> 标签：objective-c, ios, notifications, jailbreak, broadcast

我正在开发一个作为服务在后台运行的网络监视器应用程序。屏幕打开或关闭时是否可以收到通知/呼叫？

它通过使用以下代码存在于Android中：

```
private void registerScreenOnOffReceiver()
{
   IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
   filter.addAction(Intent.ACTION_SCREEN_OFF);
   registerReceiver(screenOnOffReceiver, filter);
} 
```

然后在屏幕打开/关闭时调用 screenOnOffReceiver。iOS有类似的解决方案吗？

**编辑：** 到目前为止我发现的最好的是 UIApplicationProtectedDataWillBecomeUnavailable （[检测 iPhone 屏幕是否打开/关闭](https://stackoverflow.com/questions/6114677/detect-if-iphone-screen-is-on-off)），但它要求用户在设备上启用数据保护（密码保护）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T05:33:33.613

您可以使用[Darwin 通知](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFNotificationCenterRef/Reference/reference.html)来监听事件。我不是 100% 确定，但在我看来，在越狱的 iOS 5.0.1 iPhone 4 上运行，这些事件之一可能是你需要的：

```
com.apple.iokit.hid.displayStatus
com.apple.springboard.hasBlankedScreen
com.apple.springboard.lockstate 
```

**更新：**此外，当手机锁定（但不是解锁时）时会发布以下通知：

```
com.apple.springboard.lockcomplete 
```

要使用它，请像这样注册事件（这仅注册一个事件，但如果这对您不起作用，请尝试其他事件）：

```
CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                NULL, // observer
                                displayStatusChanged, // callback
                                CFSTR("com.apple.iokit.hid.displayStatus"), // event name
                                NULL, // object
                                CFNotificationSuspensionBehaviorDeliverImmediately); 
```

`displayStatusChanged`您的事件回调在哪里：

```
static void displayStatusChanged(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo) {
    NSLog(@"event received!");
    // you might try inspecting the `userInfo` dictionary, to see 
    //  if it contains any useful info
    if (userInfo != nil) {
        CFShow(userInfo);
    }
} 
```

如果您真的希望此代码作为*服务*在后台运行，并且您已越狱，我建议您查看[iOS Launch Daemons](http://chrisalvares.com/blog/7/creating-an-iphone-daemon-part-1/)。**与您简单地在后台运行的应用程序**相反，启动守护程序可以在重新启动后自动启动，您不必担心应用程序在后台运行任务的 iOS 规则。

让我们知道这是如何工作的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-30T11:33:55.637

使用较低级别的通知 API，您可以在收到通知时查询锁定状态：

```
#import <notify.h>

int notify_token;
notify_register_dispatch("com.apple.springboard.lockstate", &notify_token, dispatch_get_main_queue(), ^(int token) {
    uint64_t state = UINT64_MAX;
    notify_get_state(token, &state);
    NSLog(@"com.apple.springboard.lockstate = %llu", state);
}); 
```

当然，您的应用必须启动 UIBackgroundTask 才能获得通知，由于 iOS 允许的运行时间有限，这限制了该技术的实用性。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-07T08:06:47.473

当 iPhone 屏幕被锁定时，将调用 appdelegate 方法 **“- (void)applicationWillResignActive:(UIApplication *)application”** ，您可以检查一下。希望它可以帮助你。

# php - 解析 XML 请求

> ID：14191982
> 
> 赞同：0
> 
> 时间：2013-01-07T08:00:13.933
> 
> 标签：php, xml, soap

我对服务器端的事情非常陌生。我需要设置一个简单的 server.php 来接收 xml 请求。

我什至不知道如何开始。我习惯于从表单中正常发布/获取变量。

这是我正在收听并需要回应的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"
 SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
 xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Body>
        <authenticate xmlns="http://someplace.someplace.com/">
            <strUserName xsi:type="xsd:string">username</strUserName>
            <strPassword xsi:type="xsd:string">password</strPassword>
        </authenticate>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

显然，我可以在里面看到一个用户名/密码。
验证用户/通行证是很容易的部分，但我该如何解析呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:06:42.050

试试 SimpleXML，这里有几个例子：

[SimpleXML 示例](http://php.net/manual/en/simplexml.examples.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:12:09.810

您还可以使用 DOM 元素来访问所需的值：

```
$xml = '<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"
 SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
 xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Body>
        <authenticate xmlns="http://someplace.someplace.com/">
            <strUserName xsi:type="xsd:string">username</strUserName>
            <strPassword xsi:type="xsd:string">password</strPassword>
        </authenticate>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope>';

$dom = new DOMDocument();
$dom->loadXML( $xml );

$username = $dom->getElementsByTagName('strUserName')->item(0)->nodeValue;
$password = $dom->getElementsByTagName('strPassword')->item(0)->nodeValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:05:49.397

在解析 SOAP 请求时，您可能应该使用现有的 API。这不仅会自动消除您的解析问题，还会生成正确的 SOAP 输出。

例子：

```
$request = '<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"
 SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
 xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Body>
        <authenticate xmlns="http://someplace.someplace.com/">
            <strUserName xsi:type="xsd:string">foo</strUserName>
            <strPassword xsi:type="xsd:string">bar</strPassword>
        </authenticate>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope>';

$s = new SoapServer(NULL, array('uri' => 'http://someplace.someplace.com/'));
$s->setClass("Auth");
$s->handle($request);

class Auth
{
    public function authenticate($strUserName, $strPassword)
    {
        return "U: $strUserName; P: $strPassword";
    }
} 
```

**注意**：如果你不向它传递参数，`handle()`它将使用`POST`数据。

# grails - Grails 外部配置 Config System.getenv

> ID：14191984
> 
> 赞同：2
> 
> 时间：2013-01-07T08:00:23.643
> 
> 标签：grails, config, getenv

我在 config.groovy 中有代码

```
def ENV_NAME = "/home/myFolder"

if(System.getenv("ENV_NAME")) {
    println( "Including configuration file: " + System.getenv("ENV_NAME"));
    grails.config.locations << "file:" + System.getenv("ENV_NAME")
} else {
    println "No external configuration file defined."
} 
```

当我运行时，结果是“*没有定义外部配置文件。* ”我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:28:39.283

`ENV_NAME`大概是在您运行应用程序时没有定义名为的环境变量。

# google-nativeclient - 运行 Native Client SDK 示例时出错

> ID：14191985
> 
> 赞同：0
> 
> 时间：2013-01-07T08:00:24.087
> 
> 标签：google-nativeclient

我已按照[https://developers.google.com/native-client/devguide/tutorial#verify中的说明进行操作](https://developers.google.com/native-client/devguide/tutorial#verify)

但是，似乎所有示例都没有运行良好。试过设置`NACL_SDK_ROOT`但`/nacl_sdk/`仍然`/nacl_sdk/pepper_23/`没有工作

例如，在“Interactive Hello World in C++”中，当尝试单击“Call reverseText()”按钮时，什么也看不到。使用开发工具，我看到控制台输出是：

```
 Uncaught TypeError: Cannot call method 'postMessage' of null           example.js:25 
```

这是 example.js 的一部分：

```
22: function reverseText() {
23:   // Grab the text from the text box, pass it into reverseText()
24:   var inputBox = document.getElementById('inputBox');
25:   common.naclModule.postMessage('reverseText:' + inputBox.value);
26: } 
```

看起来原因是“common.naclMode 为空”。如何修复此错误？

- 编辑 -

当我尝试另一个“hello world”示例时，http 服务器的输出是：

```
localhost - - [07/Jan/2013 15:52:42] "GET / HTTP/1.1" 200 -
localhost - - [07/Jan/2013 15:52:45] "GET /hello_world/index.html HTTP/1.1" 200 -
localhost - - [07/Jan/2013 15:52:45] "GET /hello_world/index_newlib_Debug.html HTTP/1.1" 200 -
localhost - - [07/Jan/2013 15:52:45] "GET /hello_world/common.js HTTP/1.1" 200 -
localhost - - [07/Jan/2013 15:52:45] "GET /hello_world/newlib/Debug/hello_world.nmf HTTP/1.1" 200 -
localhost - - [07/Jan/2013 15:52:45] "GET /hello_world/newlib/Debug/hello_world_x86_64.nexe HTTP/1.1" 200 - 
```

我在页面上看到以下内容：

```
Hello World.
Status: Creating embed: newlib 
```

控制台输出：

```
NativeClient: NaCl module load failed: Nexe crashed during startup 
```

这是objdump的输出：

```
nacl_sdk/pepper_23/examples/hello_world$ ../.././toolchain/linux_x86_newlib/bin/x86_64-nacl-objdump -p newlib/Debug/hello_world_x86_64.nexe

newlib/Debug/hello_world_x86_64.nexe:     file format elf64-nacl

Program Header:
    PHDR off    0x0000000000000000 vaddr 0x0000000000000000 paddr 0x0000000000000000 align 2**3
         filesz 0x0000000000000120 memsz 0x0000000000000120 flags r--
    LOAD off    0x0000000000010000 vaddr 0x0000000000020000 paddr 0x0000000000020000 align 2**16
         filesz 0x0000000000021ac0 memsz 0x0000000000021ac0 flags r-x
    LOAD off    0x0000000000040000 vaddr 0x0000000010020000 paddr 0x0000000010020000 align 2**16
         filesz 0x0000000000010474 memsz 0x0000000000010474 flags r--
    LOAD off    0x0000000000060000 vaddr 0x0000000010040000 paddr 0x0000000010040000 align 2**16
         filesz 0x00000000000006e8 memsz 0x0000000000001da8 flags rw- 
```

VERBOSITY=5 的 chrome 输出：

```
[deqing@hdell]~/works/nacl_sdk/pepper_23$ export NACLVERBOSITY=5
[deqing@hdell]~/works/nacl_sdk/pepper_23$ google-chrome http://localhost:5103 
[7,3729430976:11:56:19.763373] NaClRefCountCtor(0x7fb3e5184ac0).
[7,3729430976:11:56:19.763465] NexeFileDidOpen: invoking LoadNaClModule
...
[12,1392863616:03:56:19.825517] nacl_debug(136) : Debugging started.
[12,1392863616:03:56:19.825545] setting stack to : 00007fcefffeffa0
[12,1392863616:03:56:19.825557] copying arg 0  0x7fd95a7b1a40 -> 0x7fcefffeffd0
[12,1392863616:03:56:19.825568] copying env 0  0x7ffff4941bd6 -> 0x7fcefffeffd9
[12,1392863616:03:56:19.825575] copying env 1  0x7ffff4941c95 -> 0x7fcefffeffea
[12,1392863616:03:56:19.825583] system stack ptr : 00007fcefffeff98
[12,1392863616:03:56:19.825589]   user stack ptr : 00007fcefffeff98
[12,1392863616:03:56:19.825595]          natp = 0x000000000181fa80
[12,1392863616:03:56:19.825603]           nap = 0x00007ffff493b9a0
[12,1392863616:03:56:19.825609] usr_stack_ptr = 0x00007fcefffeff98
[12,1392863616:03:56:19.825639] NaClWaitForMainThreadToExit: taking NaClApp lock
[12,1392863616:03:56:19.825648]  waiting for exit status
[12,1376372480:03:56:19.825665] NaClThreadLauncher: entered
[12,1376372480:03:56:19.825684]       natp = 0x000000000181fa80
[12,1376372480:03:56:19.825691]  prog_ctr  = 0x00007fce0fc00200
[12,1376372480:03:56:19.825698] stack_ptr  = 0x00007fcefffeff98
[12,1376372480:03:56:19.825708] ix 0: 0x00000000
[12,1376372480:03:56:19.825716] found first not-all-ones ix 0
[12,1376372480:03:56:19.825723] Set(0,0x181fa80) @ix 0: 0x00000000
[12,1376372480:03:56:19.825729] After @ix 0: 0x00000001, avail_ix 0 
```

为什么nexe崩溃了？任何人都可以解释一下吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T18:57:36.250

日志消息

> nacl_debug(136) ：调试开始。

表示您在 about:flags 中打开了“基于本机客户端 GDB 的调试”。发生这种情况时，gdb 应该连接到端口 4014。正在将 gdb 连接到调试存根吗？如果你真的不想要它，你能检查你的 about:flags 并关闭基于 gdb 的调试吗？

# android - Android 的无线电 API

> ID：14191986
> 
> 赞同：3
> 
> 时间：2013-01-07T08:00:25.023
> 
> 标签：android, radio

是否有用于开发可以播放无线电调频传输频率的应用程序的 API？我正在开发一个需要我读取 FM 信号和播放广播频道的应用程序。换句话说，有 Android 收音机应用程序。只是想知道他们使用了什么 API，因为 Android 平台文档下没有可用的 API。我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T08:04:36.070

Android 中没有用于 FM 收音机的官方 API，但爱好者找到了在[Nexus One上启用收音机的方法](http://www.androidpolice.com/2010/07/13/nexus-one-finally-receives-fm-radio-support-not-thanks-to-google-but-the-android-community-coming-to-a-rom-near-you/)

到目前为止，我所看到的设备具有专有的供应商特定 API，可与 FM 收音机配合使用。

您还可以使用[此库](http://mmbtools.crc.ca/content/view/53/33/)为 android 开发 FM 收音机应用程序。但是这个库依赖于固件。

另一种选择是拥有一个互联网广播应用程序，该应用程序从在线源流式传输广播电台。

# caching - Windows azure：共享缓存 - 全部删除？

> ID：14191987
> 
> 赞同：3
> 
> 时间：2013-01-07T08:00:30.100
> 
> 标签：caching, azure, azure-caching

我正在使用 Windows Azure 共享缓存。我遇到了几个问题：

1.  如何知道缓存中存在哪些键？有没有类似`GetAllKeys()`方法的东西？
2.  可以打电话`clearAll()`吗？
3.  为什么我不能使用区域？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T10:26:26.343

本节适用于**Windows Azure 缓存**

Windows Azure 提供两种缓存模式：

*   **专用角色缓存**- 角色实例专门用于缓存（该实例中没有运行其他代码）。
*   **同位角色缓存**- 缓存与应用程序共享 VM 资源（带宽、CPU 和内存）。

> 如何知道缓存中有什么？有没有类似“GetAllKeys()”的方法？

您是否需要这些信息来应用更多报告/审计？我认为，微软没有提供这种方法有一个很好的理由：它返回的信息可能很快就会过时。看，缓存项目可能随时过期（取决于过期时间和将项目添加到缓存的时间），因此您从 *GetAllKeys()*方法收到的信息可能会在几秒甚至几毫秒后无效。

缓存使用标准模式将是

*   通过键从缓存中获取项目
*   如果缓存返回`Null`，则创建该项目并将/添加到缓存中
*   对项目执行操作（从缓存中获取或重新创建）

并置角色缓存

> 是否可以清除所有（）？

我认为您不必担心清除缓存。如果您将缓存逐出策略设置为**LRU**（最近一次使用），那么最近最少使用的项目将首先被丢弃。所以你永远不会得到像“*缓存中没有空间*”这样的东西。

> 为什么我不能使用regoins？

您可以但只能在同一实例上使用缓存定位。专用角色缓存不支持它。

* * *

本部分适用于**Windows Azure 共享缓存**

从客户端的角度来看，Windows Azure 共享缓存与 Windows Azure 缓存（如上所述）非常相似，并且所有解释也适用于共享缓存。

项目驱逐有一个小的变化：在共享缓存中，没有特定过期时间的项目将在**48 小时**后过期。但是，您可以使用明确的过期时间（例如 X 分钟或 Y 天）将项目添加到缓存（通过`Add`和方法的各种重载）。`Put`

当您超过缓存的大小（您在创建过程中选择的缓存大小）时，缓存服务将在缓存中启动“*驱逐项目*”，直到内存问题得到解决（您有足够的内存来添加新的缓存项目）。在“驱逐”期间使用*LRU*机制——缓存中最近最少使用的项目被删除。

*处理缓存项的获取、检查和重新创建*方法（如上所述）也适用于共享缓存。

我希望这将帮助您更好地了解 Azure 缓存和共享缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T15:25:27.063

以下方法清除缓存中的所有数据。

```
public static void InvalidateCache(string cacheName)
{
    DataCache desiredCache = new DataCache(cacheName); 
    foreach (string regionName in desiredCache.GetSystemRegions()) 
    {
        desiredCache.ClearRegion(regionName);
    }
} 
```

# c++ - 如何使用可变参数完美转发到 lambda？

> ID：14191989
> 
> 赞同：18
> 
> 时间：2013-01-07T08:00:50.150
> 
> 标签：c++, binding, c++11, lambda, variadic-templates

我有一个调用 lambda 的工作函数模板。

我想概括这个函数模板以获取可变参数并将它们完美地转发到 lambda 中，但是我无法编译这段代码。

我正在使用 gcc 4.7.2。

**更新**

使用 R. Martinho Fernandes 的建议，我在 bugzilla[中查找了错误 - 它看起来确实是一个已经存在一段时间的错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=41933)。如果有人知道一种解决方法（我现在正在研究一个），请发布答案 - ty.

**错误**

```
junk.cpp: In lambda function:
junk.cpp:32:68: error: parameter packs not expanded with ‘...’:
junk.cpp:32:68: note:         ‘args’
junk.cpp: In instantiation of ‘std::pair<std::basic_string<char>, typename T::Lambda> MP(const string&, M, Args&& ...) [with T = Integer; M = int (Integer::*)()const; Args = {}; typename T::Lambda = std::function<std::function<int()>(const Integer&)>; std::string = std::basic_string<char>]’:
junk.cpp:47:42:   required from here
junk.cpp:34:2: error: using invalid field ‘MP(const string&, M, Args&& ...)::<lambda(const T&)>::__args’
make: *** [junk] Error 1 
```

**代码**

```
#include <functional>
#include <iostream>
#include <map>

struct Integer
{
    typedef std::function<int()>                            Function;
    typedef std::function<Function( Integer const& inst )>  Lambda;

    virtual int getInt() const = 0;
};

struct IntImpl : public Integer
{
    virtual int getInt() const { return 42; }
};

typedef std::function<int()>                               IntFunction;
typedef std::function<IntFunction( Integer const& inst )>  IntLambda;

#define WONT_COMPILE

template<typename T,typename M,typename... Args>
std::pair<std::string,typename T::Lambda>
MP( std::string const& str, M method, Args&&... args )
{
#ifdef WONT_COMPILE 
    return std::make_pair( str, 
        [=]( T const& inst ) 
        {
            // COMPILE ERROR (Line 32) on next line
            return std::bind( method, std::cref( inst ), std::forward<Args>(args)...);
        } 
    );
#else
    return std::make_pair( str, 
        [method]( T const& inst ) 
        {
            return std::bind( method, std::cref( inst ));
        } 
    );
#endif
}

std::map<std::string,IntLambda> const g_intTbl =
{
    MP<Integer>( "getInt", &Integer::getInt )
};

int
main( int argv, char* argc[] )
{
    IntImpl x;
    std::cerr << g_intTbl.find("getInt")->second( x )() << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-16T04:12:52.030

> 如果有人知道解决方法（我现在正在寻找一个），请发布答案

我遇到了完全相同的问题并找到了解决方法。这是一个迟到的答案，希望你同时找到一个解决方案，但无论如何它都在这里（它至少对其他人有用）。

这个想法是改变 lambda 的参数，以便它也接受与外部函数相同的可变参数（例如 become `[](int) {}`）`[](int, Args&&... args) {}`和`bind`lambda 到外部函数的可变参数。一旦完成，在 lambda 中转发可变参数就没有问题了。

把它们加起来：

```
template<typename... Args>
std::function<void (int)> foo(Args&&... args) {
    return [&](int bar) {
                  // COMPILER BUG: doesn't work with GCC 4.7 despite the capture
                  doSomething(bar, std::forward<Args>(args)...);
              };
}

template<typename... Args>
std::function<void (int)> foo(Args&&... args) {
    return std::bind([](int bar, Args&&... args) {
                            // now this works with GCC 4.7
                            doSomething(bar, std::forward<Args>(args)...);
                       },
                     std::placeholders::_1, std::forward<Args>(args)...);
} 
```

当然这是一个丑陋的 hack，但至少即使你遇到了一个有问题的编译器，你仍然可以获得预期的功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-07T08:19:01.953

这似乎是编译器的错误（如果还没有，请报告）。标准说：

> *包扩展*由一个模式和一个省略号组成，其实例化会在列表中产生零个或多个模式的实例化（如下所述）。模式的形式取决于扩展发生的上下文。包扩展可能发生在以下情况下：
> 
> — [...]
> — 在*捕获列表中*(5.1.2)；该模式是一个捕获。
> — [...]

这使您的代码正确。

在您获得可以处理此问题的编译器之前，您将捕获所有内容作为解决方法，使用`[=]`.

# javascript - 如何使用 Jquery 突出显示 svg 地图？

> ID：14191990
> 
> 赞同：2
> 
> 时间：2013-01-07T08:00:52.453
> 
> 标签：javascript, jquery, jquery-ui, svg, jquery-svg

我在使用 jquery 突出显示地图中的状态时遇到问题。我已经使用 javascript 实现了它。` SVG Illustrator 测试

```
 <object data="map_with_hover.svg" type="image/svg+xml" id="alphasvg" width="100%" height="100%"></object>
<script>
    var a = document.getElementById("alphasvg");

    //it's important to add an load event listener to the object, as it will load the svg doc asynchronously
    a.addEventListener("load",function(){
        var svgDoc = a.contentDocument; //get the inner DOM of alpha.svg
        var delta = svgDoc.getElementById("states"); //get the inner element by id
        delta.addEventListener("mouseover",function(evt){ evt.target.setAttributeNS(null,"opacity","0.5");},false);    //add behaviour
        delta.addEventListener("mouseout",function(evt){ evt.target.setAttributeNS(null,"opacity","1");},false);    //add behaviour
    },false);
</script>

</body>
</html> 
```

`

通过此代码状态可以轻松突出显示，但我想在 jquery 中执行此操作，因为我还想添加工具提示，以便在鼠标悬停时也显示状态名称。所以基本上我想知道如何使用 SVG 的 id 或类或标签来通过使用 jquery 来执行不同的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:00:27.350

您应该将文件直接嵌入到您的 HTML 中（使用 SVG 标签）。这将允许您使用纯 jQuery 选择不同的 SVG 元素。看[这里](http://www.restingrobot.com/testing/MapDemo.html)

随意使用此代码，因为它非常基础，我从 Wikipedia 中提取了地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:03:58.007

有一个名为[jQuery SVG](http://keith-wood.name/svg.html)的库，它可能会对您有所帮助。

# c# - 从 Visio 文档中删除模具

> ID：14191995
> 
> 赞同：1
> 
> 时间：2013-01-07T08:01:39.793
> 
> 标签：c#, visio

有什么方法可以从 Visio 文档中删除现有模具？( `C# Win App`)

* * *

我找不到删除现有模板的方法。但这是一个添加 1 的示例。

```
VisioDrawing.Document.Application.ActiveDocument.OpenStencilWindow();
VisioDrawing.Document.Application.Documents.OpenEx(_StencilPath + "BASFLO_M.vss",
(short)VisOpenSaveArgs.visOpenDocked); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:22:12.043

如果您使用同一个模板打开了多个文档，您应该能够只关闭绘图的模板窗口。这样，您就不会关闭来自其他文档的模板。

因此，要做到这一点，您将从 Visio.Application.Windows 中找到该文档的窗口，然后查看该窗口的窗口列表，并查看每个窗口的文档是否是您要关闭的文档。然后，您只需在该窗口上调用 close 方法。保存文件时，模具不再附加到该图形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:06:10.213

You can simply close the open stencil, e.g.:

```
VisioDrawing.Document.Application.Documents.Item("BASFLO_M.vss").Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T22:46:22.280

如果不想/不需要加载模具，您可以重命名存储模具的 Visio 内容文件夹。

对于 Visio2013，它是 C:\Program Files (x86)\Microsoft Office\Office15\Visio Content\1033。添加一个新文件夹并将文件转储在那里。这会隐藏模板，以便 Visio 看不到它们。然后启动您的 Visio 文件。

# c# - linq to entity：linq查询性能优化

> ID：14191998
> 
> 赞同：3
> 
> 时间：2013-01-07T08:02:15.173
> 
> 标签：c#, mysql, sql, entity-framework, linq-to-entities

我正在使用`EF 4.4.20627.0`，`MySQL 5.6`版本`MySQL .net connector`6.6.4

我有一个这样的方法，它生成的 sql 是`very very slow`（需要超过 1 分钟）

```
 private List<TNews> GetPagedNews(int pagenum, int pagesize,
        AdvSearcherArgs advcArgs, string keyword)
    {
        var dataSrc = _dbRawDataContext.TNews.Where(x => x.Id>0);
        if (!string.IsNullOrWhiteSpace(advcArgs.PMAC))
        {
            dataSrc = dataSrc.Where(m => m.Pmac == advcArgs.PMAC);
        }
        if (!string.IsNullOrWhiteSpace(advcArgs.BegineDate))
        {
            var begin = Convertion.ToDate(advcArgs.BegineDate);
            var end = Convertion.ToDate(advcArgs.EndDate);

            dataSrc = dataSrc.Where(m => m.PmacDT >=begin && m.PmacDT<end);
        }
        dataSrc = dataSrc.OrderByDescending(n => n.PmacDT).Skip(pagenum * pagesize).
          Take(pagesize);

        var cnt = dataSrc.Count();
        SetPagerValues(pagenum, pagesize, cnt);

        return dataSrc.ToList();
    } 
```

生成的sql是这样的：

```
SELECT
`Project1`.*
FROM 
(
   SELECT
   `Extent1`.*
   FROM `tnews` AS `Extent1`
   WHERE (`Extent1`.`Id` > 0) 
   AND ((`Extent1`.`PmacDT` >= '2013-01-01 00:00:00 ') AND          
        (`Extent1`.`PmacDT` < '2013-01-07 00:00:00 '))
) AS `Project1`
 ORDER BY 
`Project1`.`PmacDT` DESC LIMIT 0,20
/* Affected rows: 0  Found rows: 20  Warnings: 0  Duration for 1 query: 00:01:30 */ 
```

如果我将`order by`and`limit`子句移动到大括号中，这个 sql 将是`very fast`（成本低于`1 sec`）：

```
SELECT
`Project1`.*
FROM 
(
   SELECT
   `Extent1`.*
   FROM `tnews` AS `Extent1`
   WHERE (`Extent1`.`Id` > 0) 
   AND ((`Extent1`.`PmacDT` >= '2013-01-01 00:00:00 ') AND          
        (`Extent1`.`PmacDT` < '2013-01-07 00:00:00 '))
   ORDER BY 
   `PmacDT` DESC LIMIT 0,20
) AS `Project1`
 /* Affected rows: 0  Found rows: 20  Warnings: 0  Duration for 1 query: 0.000 sec. */ 
```

是什么`ProjectX`意思`Extent1`？为什么实体框架不把`orderby * limit x,y`真正的查询放在外面？

sql很奇怪，肯定会让查询很慢，我永远不会那样写sql...那么如何让EF生成一个`CORRECT`sql？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:19:18.917

快速猜测一下：Count() 和 ToList() 都执行查询。首先执行 ToList()，并使用接收到的列表来获取元素的数量。

像这样：

```
private List<TNews> GetPagedNews(int pagenum, int pagesize,
    AdvSearcherArgs advcArgs, string keyword)
{
    var dataSrc = _dbRawDataContext.TNews.Where(x => x.Id>0);
    if (!string.IsNullOrWhiteSpace(advcArgs.PMAC))
    {
        dataSrc = dataSrc.Where(m => m.Pmac == advcArgs.PMAC);
    }
    if (!string.IsNullOrWhiteSpace(advcArgs.BegineDate))
    {
        var begin = Convertion.ToDate(advcArgs.BegineDate);
        var end = Convertion.ToDate(advcArgs.EndDate);

        dataSrc = dataSrc.Where(m => m.PmacDT >=begin && m.PmacDT<end);
    }
    dataSrc = dataSrc.OrderByDescending(n => n.PmacDT).Skip(pagenum * pagesize).
      Take(pagesize);

    var myList = dataSrc.ToList(); //execute the query to an in-memory list

    var cnt = myList.Count(); //get the count from the already exeuted query
    SetPagerValues(pagenum, pagesize, cnt);

    return myList; //return the list
} 
```