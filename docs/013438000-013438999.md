# StackOverflow 问答 13438000-13438999

# gtk - 单击工具按钮时，如何在相邻窗格中加载小部件？

> ID：13438003
> 
> 赞同：0
> 
> 时间：2012-11-18T06:28:08.740
> 
> 标签：gtk, pygtk, glade, gtk3

我正在尝试创建一个用于配置设置的 GTK python 应用程序，并且我一直在考虑使用 Glade 为该应用程序创建一个 GTK 设计。

到目前为止，我已经创建了一个包含 5 个笔记本的设计，它看起来有点像这样：

![林间空地笔记本](../Images/6739985f97ea0e7a45c9457daced6297.png)

但是，我实际上想使用带有主要样式工具栏按钮的 Gtktoolbar，当单击 Gtktoolbar 按钮时，这些按钮会在相邻窗格中打开设置。当前的 Gtkprimarytoolbar 实现如下所示：

![林间空地工具栏](../Images/fb685eb7044b313437a537d1fff20cdd.png)

我对 Gtk 设计非常陌生，我尝试将`on_tool_unitysettings_clicked`信号设置为处理`nb_unitysettings`。我承认我不知道我在做什么。

这个想法是当我单击工具栏按钮时，相关的笔记本会加载到工具栏按钮下方的窗格中。我该怎么做？我会对 Glade 解决方案感到非常满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T22:34:47.327

当按下每个工具栏按钮时，我最终合并了上面的两个窗口并更改了笔记本的页面。我还隐藏了笔记本的标签，所以看起来根本就没有笔记本。

这是按下按钮时处理信号的python文件：

```
#!/usr/bin/env python3
from gi.repository import Gtk

class Handler ():
    '''Clicking the toolbars'''
    def on_tool_startpage_toggled(self,nb_mechanig):
        nb_mechanig.set_current_page(0)
    def on_tool_unitysettings_toggled(self,nb_mechanig):
        nb_mechanig.set_current_page(1)
    def on_tool_compizsettings_toggled(self,nb_mechanig):
        nb_mechanig.set_current_page(2)
    def on_tool_themesettings_toggled(self,nb_mechanig):
        nb_mechanig.set_current_page(3)
    def on_tool_desktopsettings_toggled(self,nb_mechanig):
        nb_mechanig.set_current_page(4)

# Basic builder setting up

builder = Gtk.Builder()
builder.add_from_file("mechanig.glade")
builder.connect_signals(Handler())

# The main Mechanig window that needs to be shown
mechanig_main = builder.get_object('mechanig_main')

# This signal is emitted when you close the window,
# which triggers Gtk.main_quit, which tells the main Gtk loop to quit
mechanig_main.connect("delete-event", Gtk.main_quit)

# This is required, otherwise Gtk leaves the window hidden.
# Useful, like with our dummy "windows" that get reparented
mechanig_main.show_all()

# Runs the main loop
Gtk.main() 
```

窗口现在看起来像这样，这是我能得到的最接近我想要的东西：

![Mechanig-glade-previewer](../Images/7ce73cbc88b03326ec5d47a16f1809cb.png)

# python - Python Convert String to Namespace

> ID：13438005
> 
> 赞同：0
> 
> 时间：2012-11-18T06:28:27.167
> 
> 标签：python, string, namespaces, integer

I need to figure out a way to convert a string in python to a namespace that can carry an integer value. This is important for a script I'm writing that creates a character sheet for a pen and paper roleplaying game that uses stat adjusted target numbers- I'm writing it in modules, and each stat calls one of these modules using a different version of a name in the same initial string, which is supposed to be converted to a namespace, then used to carry an integer that is used to modify another integer in a class.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:30:58.640

听起来你想使用[`__import__`](http://docs.python.org/2/library/functions.html#__import__)：

```
mod = __import__(name)
print mod.something 
```

这允许您使用任意字符串`name`作为要导入的模块的名称。您可以创建一个名为 example 的模块`foo.py`，其中包含：

```
something = 4 
```

然后上面的代码将打印 4 如果`name`是`"foo"`。

然而，这是 Python 中一种不常见的编程技术（如文档中所述），因此可能有更好的方法来表达您的意图。

# python - 如何在 Django 中使用模型表单在 commit=False 后保存字段？

> ID：13438009
> 
> 赞同：3
> 
> 时间：2012-11-18T06:29:33.403
> 
> 标签：python, django, forms, model

我有一个模型：

```
class Book(models.Model):
    name = models.CharField(max_length=100)
    alias = models.CharField(max_length=100)
    description = models.TextField()

    def __unicode__(self):
        return self.name 
```

和 forms.py 中的 ModelForm：

```
class BookForm(ModelForm):
class Meta:
    model = Book 
```

所以我试图在我的观点中做出这样的事情：

```
def register_book(request):
if request.method == 'POST':
    formul = BookForm(request.POST)
    if formul.is_valid():
        new_book=formul.save(commit=False)
        new_book.alias='foo'
        new_book.save()
        return HttpResponseRedirect('/') 
```

因此，我从 html“表单”中保存名称和描述，但是在获取表单后我需要保存的别名。但不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T11:14:14.040

默认情况下， A`ModelForm`将包含并验证模型的所有字段。如果您总是`alias`在视图中自己分配值，那么您不需要`alias`表单中的字段，您可以将其排除：

```
class BookForm(ModelForm):

    class Meta:
        model = Book
        fields = ('name', 'description')
        # NOTE: you can also use excludes, but many consider it a bad practice 
```

与往常一样，[Django 文档](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-a-subset-of-fields-on-the-form)可以告诉你更多关于它的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T10:41:47.473

您正在尝试先保存没有别名的模型。您需要先允许空白值，然后才能执行此操作。推荐的方法是使用[`blank`](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.Field.blank)：

```
alias = models.CharField(max_length=100, blank=True) 
```

# r - igraph中的可变顶点字体大小

> ID：13438013
> 
> 赞同：2
> 
> 时间：2012-11-18T06:29:52.937
> 
> 标签：r, igraph

是否有可能具有可变字体大小的顶点标签。用比其他更大的字体标记某些节点

```
g1 <- erdos.renyi.game(20, 2/20)
V(g1)$name<-letters[1:vcount(g1)]
plot(g1,vertex.label=V(g1)$name) 
```

了解 igraph.plot 中有一个 vertex.label.cex 选项，但它是全局的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T07:13:46.893

是的，有可能。 `V(g)$label.cex`是你所追求的。有关如何操作的示例，请参见我的这篇博客文章：http: [//trinkerrstuff.wordpress.com/2012/06/30/igraph-and-sna-an-amateurs-dabbling/](http://trinkerrstuff.wordpress.com/2012/06/30/igraph-and-sna-an-amateurs-dabbling/)

我可以建议您在下一篇文章中提供一个可重复的示例，您可能会得到更好的帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T07:17:17.980

是的，你是对的，泰勒，我的错。在问题中添加了一个示例

你的解决方案会是这样的吗？

```
V(g1)$label.cex = 1
V(g1)$label.cex[1:20 %% 2 == 0] = 0.5 
```

此方法是否也适用于所有顶点和边缘属性？

# dotcloud - 升级 dotcloud cli 时遇到问题

> ID：13438020
> 
> 赞同：0
> 
> 时间：2012-11-18T06:31:04.987
> 
> 标签：dotcloud

按照此处的说明进行操作：http: [//docs.dotcloud.com/0.9/guides/migration/](http://docs.dotcloud.com/0.9/guides/migration/)

当我跑`sudo pip install -U dotcloud`

```
Downloading/unpacking dotcloud
  Downloading dotcloud-0.9.2.tar.gz
  Running setup.py egg_info for package dotcloud
Downloading/unpacking argparse (from dotcloud)
  Downloading argparse-1.2.1.tar.gz (69Kb): 69Kb downloaded
  Running setup.py egg_info for package argparse
    warning: no previously-included files matching '*.pyc' found anywhere in distribution
    warning: no previously-included files matching '*.pyo' found anywhere in distribution
    warning: no previously-included files matching '*.orig' found anywhere in distribution
    warning: no previously-included files matching '*.rej' found anywhere in distribution
    no previously-included directories found matching 'doc/_build'
    no previously-included directories found matching 'env24'
    no previously-included directories found matching 'env25'
    no previously-included directories found matching 'env26'
    no previously-included directories found matching 'env27'
Downloading/unpacking requests==0.14.1 (from dotcloud)
  Downloading requests-0.14.1.tar.gz (523Kb): 523Kb downloaded
  Running setup.py egg_info for package requests
    warning: no files found matching 'tests/*.'
Downloading/unpacking colorama (from dotcloud)
  Downloading colorama-0.2.4.tar.gz
  Running setup.py egg_info for package colorama
Installing collected packages: dotcloud, argparse, requests, colorama
  Running setup.py install for dotcloud
    changing mode of build/scripts-2.6/dotcloud from 644 to 755
    changing mode of /usr/local/bin/dotcloud to 755
  Found existing installation: argparse 1.2.1
    Uninstalling argparse:
      Successfully uninstalled argparse
  Running setup.py install for argparse
    warning: no previously-included files matching '*.pyc' found anywhere in distribution
    warning: no previously-included files matching '*.pyo' found anywhere in distribution
    warning: no previously-included files matching '*.orig' found anywhere in distribution
    warning: no previously-included files matching '*.rej' found anywhere in distribution
    no previously-included directories found matching 'doc/_build'
    no previously-included directories found matching 'env24'
    no previously-included directories found matching 'env25'
    no previously-included directories found matching 'env26'
    no previously-included directories found matching 'env27'
  Found existing installation: requests 0.14.1
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    warning: no files found matching 'tests/*.'
  Found existing installation: colorama 0.2.4
    Uninstalling colorama:
      Successfully uninstalled colorama
  Running setup.py install for colorama
Successfully installed dotcloud argparse requests colorama
Cleaning up... 
```

当我跑`dotcloud setup`

```
Traceback (most recent call last):
  File "/usr/local/bin/dotcloud", line 16, in <module>
    cli = CLI(endpoint=url, debug=debug, username=username)
  File "/Library/Python/2.6/site-packages/dotcloud/ui/cli.py", line 42, in __init__
    user_agent=self._build_useragent_string(),
  File "/Library/Python/2.6/site-packages/dotcloud/ui/cli.py", line 72, in     _build_useragent_string
    (langcode, encoding) = locale.getdefaultlocale()
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/locale.py", line 459, in getdefaultlocale
    return _parse_localename(localename)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/locale.py", line 391, in _parse_localename
    raise ValueError, 'unknown locale: %s' % localename
ValueError: unknown locale: UTF-8 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:49:09.627

它要么是语言环境问题，要么是权限问题。

您可能没有设置默认语言环境，或者它无法在需要时正确加载语言环境。

而不是复制所有信息，您应该查看这个问题以获得您的答案，它可能会有所帮助。

[python语言环境奇怪的错误。这里到底发生了什么？](https://stackoverflow.com/questions/1830394/python-locale-strange-error-whats-going-on-here-exactly)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:13:45.277

看来 cli 正在访问 locale._parse_localname 方法并遇到 ValueError，因为它找不到值 UTF-8 的语言环境。

The link to this blog post provided below suggests that if you modify your ~/.bash_profile (or ~/.profile on some systems) and export the values, it will resolve the issue you're seeing. If you do choose to modify your files, please be sure to back them up first (just in case!).

[http://patrick.arminio.info/blog/2012/02/fix-valueerror-unknown-locale-utf8/](http://patrick.arminio.info/blog/2012/02/fix-valueerror-unknown-locale-utf8/)

# html - 无法居中我的导航栏

> ID：13438025
> 
> 赞同：0
> 
> 时间：2012-11-18T06:32:00.680
> 
> 标签：html, css

我的导航栏有以下代码，但似乎无法将其集中在网站上。我究竟做错了什么？删除 float: left 对定位没有任何作用。谢谢。

css

```
ul#list-nav {
    list-style: none;
    margin: 20px auto;
    padding: 0px;
    width: 800px;
}

ul#list-nav li {
    display: inline;
}

ul#list-nav li a {
    text-decoration: none;
    padding: 5px 0;
    width: 100px;
    float: left;
    background: #485e49;
    color: #eee;
    text-align: center;
    border-left: 1px solid #fff;
}

ul#list-nav li a:hover {
    background: #a2b3a1;
    color: #000
} 
```

html

```
</head>
<body>
    <div id="as">
        <ul id="list-nav">
            <li><a href="#">Home</a></li>
            <li><a href="#">About Us</a></li>
        </ul>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:34:16.693

您将需要添加 display: block;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:36:13.417

您需要将导航栏包装在包装器 div 中，然后将该 div 的边距设置为 auto ，如下所示：

```
<style>
#wrapper {
 margin: auto;
}
</style>

<div id="wrapper"> 

<!-- (your nav bar code here) -->

</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T06:40:22.103

它已经居中，只是您正在为菜单使用显式宽度，因此请考虑减小菜单宽度

[**演示**](http://jsfiddle.net/JTf8h/)

CSS

```
ul#list-nav {
  list-style:none;
  margin:20px auto;
  padding:0px;
  width:800px;
  border: 1px solid #ff0000;
  overflow: hidden;
} 
```

目前我已经做到了`205px`

CSS

```
ul#list-nav {
  list-style:none;
  margin:20px auto;
  padding:0px;
  width:205px;
  border: 1px solid #ff0000;
  overflow: hidden;
} 
```

[**固定演示**](http://jsfiddle.net/JTf8h/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T06:53:09.987

我相信以下应该可以解决问题；

<div id="as" align="center">

# perl - 在 Perl 中使用 MyParser 从 HTML 标记中获取内容

> ID：13438026
> 
> 赞同：2
> 
> 时间：2012-11-18T06:32:29.557
> 
> 标签：perl, html-parsing

我有一个如下的html：

```
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body bgcolor="white">

<h1>foo.c</h1>

<form method="post" action=""
        enctype="application/x-www-form-urlencoded">
  Compare this file to the similar file: 
  <select name="file2">

    <option value="...">...</option>

  </select>
  <input type="hidden" name="file1" value="foo.c" /><br>
  Show the results in this format: 
</form>
<hr>

<p>
<pre>
some code
</pre> 
```

我需要获取输入名称 = 'file' 的值和 HTML pre 标记的内容。我不知道 perl 语言，通过谷歌搜索我写了这个小程序（我相信它不是“优雅的”）：

```
#!/usr/bin/perl

package MyParser;
use base qw(HTML::Parser);

#Store the file name and contents obtaind from HTML Tags
my($filename, $file_contents);

#This value is set at start() calls
#and use in text() routine..
my($g_tagname, $g_attr);

#Process tag itself and its attributes
sub start {
    my ($self, $tagname, $attr, $attrseq, $origtext) = @_;

    $g_tagname = $tagname;
    $g_attr = $attr;
}

#Process HTML tag body
sub text {
    my ($self, $text) = @_;

    #Gets the filename
    if($g_tagname eq "input" and $g_attr->{'name'} eq "file1") {
    $filename = $attr->{'value'};
    }

    #Gets the filecontents
    if($g_tagname eq "pre") {
    $file_contents = $text;
    }
}

package main;

#read $filename file contents and returns
#note: it works only for text/plain files.
sub read_file {
    my($filename) = @_;
    open FILE, $filename or die $!;
    my ($buf, $data, $n);
    while((read FILE, $data, 256) != 0) {
    $buf .= $data;
    }
    return ($buf);
}

my $curr_filename = $ARGV[0];
my $curr_file_contents = read_file($curr_filename);

my $parser = MyParser->new;
$parser->parse($curr_file_contents);

print "filename: ",$filename,"file contents: ",$file_contents; 
```

然后我打电话`./foo.pl html.html`但我从`$filename`和得到空值`$file_contents`变量中得到空值。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T10:12:50.507

像往常一样，有不止一种方法可以做到这一点。以下是如何使用[Mojolicious的](http://mojolicio.us)[DOM Parser](http://mojolicio.us/perldoc/Mojo/DOM)来完成此任务：

```
#!/usr/bin/env perl

use strict;
use warnings;
use Mojo::DOM;

# slurp all lines at once into the DOM parser
my $dom = Mojo::DOM->new(do { local $/; <> });

print $dom->at('input[name=file1]')->attr('value');
print $dom->at('pre')->text; 
```

输出：

```
foo.c
some code 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T07:58:21.470

使用[xpath](/questions/tagged/xpath "显示标记为“xpath”的问题")和[HTML::TreeBuilder::XPath](http://search.cpan.org/~mirod/HTML-TreeBuilder-XPath-0.14/lib/HTML/TreeBuilder/XPath.pm) `Perl`模块（很少行）：

```
#!/usr/bin/env perl
use strict; use warnings;
use HTML::TreeBuilder::XPath;

my $tree = HTML::TreeBuilder::XPath->new_from_content( <> );
print $tree->findvalue( '//input[@name="file1"]/@value' );
print $tree->findvalue( '//pre/text()' ); 
```

**用法**

```
./script.pl file.html 
```

**输出**

```
foo.c
some code 
```

**笔记**

*   过去，我使用`HTML::TreeBuilder`模块进行一些网络抓取。现在，我不能回到复杂性。`HTML::TreeBuilder::XPath`用有用的[Xpath](http://en.wikipedia.org/wiki/Discussion%3aXPath)表达式做所有的事情。
*   您可以使用`new_from_file`方法来打开文件或文件句柄，而不是`new_from_content`，请参阅`perldoc HTML::TreeBuilder`（`HTML::TreeBuilder::XPath`从继承方法`HTML::TreeBuilder`）
*   `<>`此处允许以这种方式使用，因为`HTML::TreeBuilder::new_from_content()`特别允许以这种方式读取多行。大多数构造函数不允许这种用法。您应该提供一个标量或使用另一种方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-18T06:45:42.630

您通常不想使用纯 HTML::Parser，除非您正在编写自己的解析模块或做一些通常很棘手的事情。在这种情况下，[HTML::TreeBuilder](http://p3rl.org/HTML%3a%3aTreeBuilder)是 HTML::Parser 的子类，是最容易使用的。

另外，请注意 HTML::Parser 有一个`parse_file`方法（而 HTML::TreeBuilder 使用方法更容易`new_from_file`，所以你不必做所有这些`read_file`事情（此外，还有比你选择`File::Slurp`的一个，包括和老`do { local $/; <$handle> }`把戏。

```
use HTML::TreeBuilder;

my $filename = $ARGV[0];
my $tree = HTML::TreeBuilder->new_from_file($filename);

my $filename = $tree->look_down(
    _tag => 'input',
    type => 'hidden',
    name => 'file1'
)->attr('value');

my $file_contents = $tree->look_down(_tag => 'pre')->as_trimmed_text;

print "filename: ",$filename,"file contents: ",$file_contents; 
```

有关`look_down`、`attr`和的信息`as_trimmed_text`，请参阅[HTML::Element](http://p3rl.org/HTML%3a%3aElement)文档；HTML::TreeBuilder 都是元素，并且可以与元素一起使用。

# android - 在 Canvas 上绘制两个 3D 字符串？

> ID：13438032
> 
> 赞同：5
> 
> 时间：2012-11-18T06:34:08.923
> 
> 标签：android, matrix, camera, android-canvas

我必须在画布上绘制 2 个字符串。字符串必须使用**相同的坐标**绘制，第二个字符串必须是第一个字符串绕 Y 轴旋转 45 度的结果。结果必须如下所示：

![在此处输入图像描述](../Images/d12f1f1a5cd2012d949dd77e831f039a.png)

这是我的代码：

```
Matrix matrix = new Matrix();
matrix = canvas.getMatrix();
mCamera = new Camera();

canvas.drawText("In the name of God", 30, 100, redPaint);
mCamera.rotateY(45);
mCamera.getMatrix(matrix);

matrix.preTranslate(30, 100);
//      matrix.postTranslate(-30, -100);

canvas.setMatrix(matrix);
canvas.drawText("In the name of God", 0, 0, greenPaint); 
```

但是上面代码的结果是：

![在此处输入图像描述](../Images/08d39267ac66c30578c09a897347e8cf.png)

你可以看到**字符串的坐标是不同的**。那么我做错了什么？我猜这是由不正确的参数引起的`matrix.preTranslate()`。

**更新**：

我将代码更改为：

```
canvas.drawText("In the name of God", 30, 100, redPaint);
mCamera.rotateY(45);
mCamera.getMatrix(matrix);
matrix.preTranslate(-30, -100);
matrix.postTranslate(30, 100);
canvas.setMatrix(matrix);
canvas.drawText("In the name of God", 0, 0, greenPaint); 
```

或喜欢：

```
canvas.drawText("In the name of God", 30, 100, redPaint);
mCamera.rotateY(45);
mCamera.getMatrix(matrix);
matrix.preTranslate(-30, -100);
//matrix.postTranslate(30, 100);
canvas.setMatrix(matrix);
canvas.drawText("In the name of God", 0, 0, greenPaint); 
```

或喜欢：

```
canvas.drawText("In the name of God", 30, 100, redPaint);
mCamera.rotateY(45);
mCamera.getMatrix(matrix);

matrix.preTranslate(-30, -100);
//      matrix.postTranslate(30, 100);
canvas.setMatrix(matrix);
canvas.drawText("In the name of God", 30, 100, greenPaint); 
```

对于上述所有三个代码，结果如下所示：

![在此处输入图像描述](../Images/e901123bd17248af112a50f86d956f08.png)

我猜第二个文本超出了范围或在后面`status bar`，所以它是不可见的。

然后将我的代码更改为：

```
mCamera.rotateY(45);
mCamera.getMatrix(matrix);
matrix.preTranslate(-30, -100);
matrix.postTranslate(30, 100);
canvas.setMatrix(matrix);
canvas.drawText("In the name of God", 30, 100, greenPaint); 
```

结果：

![在此处输入图像描述](../Images/93d4a32e464498778e7a2c178d93b440.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T06:52:49.400

感谢您的回复。我解决了这个问题。我必须使用`canvas.concat()`而不是。`canvas.setMatrix`这是正确的代码：

```
Matrix matrix = new Matrix();
mCamera = new Camera();

canvas.drawText("In the name of God", 30, 100, redPaint);
mCamera.rotateY(60);
mCamera.getMatrix(matrix);

matrix.preTranslate(-30, -100);
matrix.postTranslate(30, 100);
canvas.concat(matrix);
canvas.drawText("In the name of God", 30, 100, greenPaint); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T14:28:40.413

试试这个：

```
Matrix matrix = new Matrix();
matrix = canvas.getMatrix();
mCamera = new Camera();

canvas.drawText("In the name of God", 30, 100, redPaint);
mCamera.translate(30, 100);
mCamera.rotateY(45);
mCamera.getMatrix(matrix);

canvas.setMatrix(matrix);
canvas.drawText("In the name of God", 0, 0, greenPaint); 
```

我从不搞乱前翻译和后翻译，但你可以调试它并尝试做后翻译而不是预翻译并提供 (30, 100) 看看是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T15:46:32.233

矩阵对象描述的旋转始终具有其旋转轴通过原点的属性。旋转轴上的每个点在旋转下都是不变的，这是一种奇特（且紧凑）的说法，即它不会改变。按照您描述所需结果的方式，您希望文本的左边缘不移动。这意味着文本的左边缘必须在那个不变的轴上。

这是`pretranslate()`为了什么。您需要将文本位置转换为原点的翻译。该平移的坐标是坐标的负数：

```
matrix.preTranslate(-30, -100); 
```

此平移应用于文本，而不是旋转轴。这种混乱似乎是你问题的根源。要将文本放回原来的位置，`postTranslate`请与预翻译的负数一起使用，即与原始坐标一起使用。

为了更好地理解这一点，请阅读[相似变换](http://en.wikipedia.org/wiki/Matrix_similarity)。

# c# - 为什么我的 REST API 客户端需要 JSONP 请求？

> ID：13438034
> 
> 赞同：0
> 
> 时间：2012-11-18T06:34:35.433
> 
> 标签：c#, jquery, asp.net-web-api, jsonp

我在 MVC 4 中创建了 REST 基础 webAPI 并托管在服务器上，当我从其他域上的 HTML 和本地电脑上调用它时，我需要将它作为 JSONP 请求调用，例如 put callback=? 在 url 中，所以它可以是 jsonp。我的问题是为什么会这样？如果它是由于跨域，那么 google 和 facbook 和其他公司如何托管他们的 api 我们也从我们自己的域调用它，但我们不保留回调 =？在他们的网址中。

那么为什么我的 API 需要回调=？如果我从其他域或使用简单的 jquery html 在我的本地 PC 上调用它，则在 url 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:41:17.430

这是因为浏览器强加的同源策略。请参阅 [http://www.w3.org/Security/wiki/Same_Origin_Policy](http://www.w3.org/Security/wiki/Same_Origin_Policy)

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

. 另请注意，未来 CORS 可能是比 JSONP 更好的选择

[http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

编辑： - - - - - -

如果您浏览了上述链接，您会看到 JSONP 允许用户解决浏览器强加的同源策略安全措施。

诀窍是浏览器允许标签引用除源之外的其他域中的文件。

基本上，使用 JSONP 会发生什么，您将回调函数名称发送到附加到查询字符串的服务器。然后服务器将通过调用此函数来填充或前缀它是 JSON 请求，因此名称中表示响应的 P 被填充或前缀。

例如，您可以创建一个脚本标签，如

那么目标服务器应该发送一个响应，使得

```
mymethod({normal: 'json response'}) 
```

当在客户端评估此响应时（对于任何其他 javascript 文件），它将有效地使用来自该服务器的 JSON 响应调用您的方法。

但是，这只能执行 GET 请求。

如果要发出 POST (PUT/DELETE) 请求，则需要使用 CORS，其中服务器需要事先设置特定的标头。

```
Access-Control-Allow-Origin: www.ext.site.com 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:39:56.950

因为同源策略限制。同源策略防止从一个域加载的脚本从另一个域获取或操作文档的属性。即请求的 URL 的域必须与当前网页的域相同。这基本上意味着浏览器将来自不同来源的内容隔离开来，以防止它们被操纵。

# iphone - 如何在 UITapGesture 中设置两次点击之间的最大持续时间？

> ID：13438035
> 
> 赞同：1
> 
> 时间：2012-11-18T06:34:51.063
> 
> 标签：iphone, ios, uitapgesturerecognizer

在我的 iOS 应用程序中，我使用`UITapGesture`等于`numberOfTapsRequired`两个。`maximum duration`但我需要在两次点击之间指定所需的。

如果两次点击之间的持续时间大于指定的（例如 0.5 秒），则手势不应工作。

请指导我如何实现这一目标。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T06:49:55.363

似乎您**不需要通过手势**中每次点击的最大持续时间来处理点击手势。您只需要指定**需要多少次触摸和点击，**并且在方法中您可以检查点击手势的**状态**。

```
- (void)handleTap:(UITapGestureRecognizer *)sender {     
    if (sender.state == UIGestureRecognizerStateEnded)     {         
       // handling code     
     } 
  } 
```

[上面的代码来自苹果文档。](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITapGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UITapGestureRecognizer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T09:22:38.627

This question reminds me of how the Double Tap gesture was implemented before Apple went out and implemented it themselves in UITapGestureRecognizer.

Before all of that, we used the methods, touchesBegan and touchesEnd to keep track of the number of fingers touching the screen and also, add a delay to make sure we track double taps. Thats when we could use the time which you asked. Now, there is simply no need as R.A pointed out.

# php - 使用什么 php 函数定期从 MySQL 中提取数据并将其显示在网站上？

> ID：13438038
> 
> 赞同：1
> 
> 时间：2012-11-18T06:35:32.793
> 
> 标签：php, mysql

我正在为在线游戏运行服务器和网站。

我需要从包含玩家姓名和消息的 mySQL 数据库中提取信息并将其显示在我们的网站上。

我设法使用一个 php 脚本来做到这一点，该脚本在有人打开页面时直接从 MySQL 数据库中提取信息。

但是，这会给服务器带来不必要的负载。

我需要实现，以便该函数仅以特定间隔（例如，每小时）提取数据。

我不知道如何做到这一点，甚至不知道在功能方面要寻找什么。

谁能告诉我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:41:44.873

如果您担心每次用户打开站点时调用的负载会增加，那么您可能首先应该考虑缓存。诸如 APC 或 memcached 之类的东西，这样就没有实际的数据库查找，它只返回上次抓取的相同数据您只需设置希望缓存保存数据的时间段，以便及时抓取新副本，在您的情况下，这将是一个小时。

有一堆关于 APC、memcached 等关于堆栈溢出的问题应该能够帮助你，例如，[PHP 缓存的最佳方式](https://stackoverflow.com/questions/4502597/the-best-way-of-php-caching)

# c - #define x 4+1....... 打印 x 的立方体时会输出什么？

> ID：13438046
> 
> 赞同：1
> 
> 时间：2012-11-18T06:36:58.813
> 
> 标签：c, c-preprocessor

```
#include<stdio.h>
#define x 4+1
int main()
{
     int i;
     i = x*x*x;
     printf("%d",i);
     return 0;
} 
```

我想知道如何评估表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T06:39:03.613

`x`C 预处理器将逐字替换for 的所有实例`4+1`，从而生成以下代码：

```
i = 4+1*4+1*4+1; 
```

由于`*`优先于`+`，因此计算结果为：

```
i = 4+4+4+1; 
```

并`i`获得价值`13`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T20:32:52.890

您还可以在定义中使用括号，如下所示：

```
#define x (4+1) 
```

然后，这评估为：

```
i = (4+1)*(4+1)*(4+1) 
```

的值为`i`125

# byte - B 在 MB/GB、位或字节中代表什么？

> ID：13438048
> 
> 赞同：11
> 
> 时间：2012-11-18T06:37:15.530
> 
> 标签：byte, bit

在 PC 属性（即我的电脑 -> 属性）中，B 代表 MB 或 GB。它是定义位还是字节？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-18T06:39:06.233

字节。位是小写。MB = 兆字节，Mb 是兆位。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-18T06:40:52.847

B 的字节，b 的位。

这是国际标准。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T06:39:14.337

大写 B 始终表示字节，小写表示位。

例如，当您看到以 MB/s 列出的互联网速度时，表示每秒兆字节，当您看到以 Mb/s 列出时表示每秒兆位。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T06:38:58.217

字母“B”代表“字节”。

# php - 如何解码codeigniter中的utf-8？

> ID：13438062
> 
> 赞同：1
> 
> 时间：2012-11-18T06:40:17.980
> 
> 标签：php, codeigniter

我正在开发一个支持多语言的带有 codeigniter 的网站。当用户使用他们的母语搜索时，当我对结果进行分页时，我得到了第一个结果，该字符未解码。

这是用于分页的url。

![在此处输入图像描述](../Images/8d2d91a204de2812b3a93c99c26f10a5.png)

当我打印 uri 段时，我得到了 %E0%B4%AE

我尝试了 url 编码和 url 解码，那次我得到了一个不同的字符，比如 à´®

谁能告诉我如何解码这种类型的字符集？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T06:43:06.977

虽然`urldecode`这是您应该使用的，但打印错误输出的原因可能是因为输出页面的编码尚未设置为 UTF-8，因此默认为 ISO-8859-1。因此，虽然字符已被 PHP 正确解码，但浏览器会以错误的编码解释字符，从而导致不正确的显示。

要解决此问题，请在任何输出之前`charset`在标头中发送 a ，如下所示：`Content-type`

```
header('Content-type: <type>; charset=utf-8'); 
```

如果您的输出页面是 HTML，您也可以在`head`:

```
<meta charset="utf-8"> 
```

如果您选择第二个选项，请务必尽早将标记放置在 中`head`，因为浏览器不会扫描超过该声明页面的前 1024 个字节。

# android - Nexus 10 - 在 Windows 7 或 Linux 上对 adb 不可见

> ID：13438064
> 
> 赞同：33
> 
> 时间：2012-11-18T06:40:24.347
> 
> 标签：android, usb

adb 在 Windows 7 上无法识别我的 Nexus 10。这是我所做的：

1.  从 Google 安装 SDK 和 USB 驱动程序。Windows 7 将平板电脑视为“Android ADB 接口”。
2.  通过点击“关于平板电脑”并点击内部版本号七次，将平板电脑置于开发者模式
3.  转到存储 > USB 计算机连接，将平板电脑置于相机 (PTP) 模式。
4.  反复启动并重新启动平板电脑、我的电脑和 adb 服务器。

这些都没有帮助。当我运行“adb devices”时，它给了我一个空列表。我还可以做些什么？

谢谢。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-04T19:25:33.953

我在 Windows 7 上遇到了同样的问题。

首先确保 Nexus 10 开发者模式和 USB 调试已打开（如果您没有看到开发者选项，请点击关于**设置 -> 平板电脑 -> 内部版本号**几次，它应该会激活开发者模式）

通过进入设备管理器检查您的 ADB 驱动程序是否处于良好状态。如果没有卸载 ADB 设备管理器并**通过将 Windows 指向 Android SDK 位置重新安装它**（它应该会自动选择驱动程序）。

安装后仍然无法正常工作。进入**设置-> 存储-> USB 计算机连接**并选择 PTP 选项。将平板电脑重新连接到 USB。

希望能帮助到你！。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-27T21:21:55.270

我对此也有一些问题。我赢了8。

1.  从 Google安装 SDK 和**USB 驱动程序。**USB 驱动程序在 Eclipse 的“Android SDK Manager”中可用。
2.  通过点击“关于平板电脑”并点击内部版本号七次将平板电脑置于开发者模式（疯狂）
3.  打开 Windows 设备管理器并右键单击“Android ADB 接口”
4.  单击属性
5.  驱动程序选项卡
6.  更新驱动程序
7.  选择“浏览我的计算机以查找驱动程序软件”选择您在步骤 1 中安装 sdk 的位置下的“sd​​k”文件夹（例如 D:\Dev\Software\adt-bundle-windows-x86_64-20130219\sdk）

不知道为什么windows没有自动检测到它，但它没有。可能是因为谷歌实际上并没有将驱动程序“安装”到 Windows 中，或者可能是因为我的旧手机安装了 HTC USB 驱动程序。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-18T22:17:27.983

我从和你一样的问题开始，但设法让我的 adb 连接在 Fedora 16 系统上工作，如下所示：

1.  插入（我不关心设备 ID `0x18d1`）`adb_usb.ini`

2.  将以下额外行插入`99-android.rules`. 它和你的不太一样，但我让你去试验。

    ```
    SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", MODE="0666", GROUP="plugdev", OWNER="johnp" 
    ```

3.  按了`settings->about->version`数字 7 次。

4.  重新启动平板电脑并注意到在名为“开发人员选项”的设置中创建了一个新部分。

5.  `settings->about->developer`在选项中启用 USB 调试。

6.  在 Fedora 上执行`adb kill-server`。

7.  在 Fedora 上执行`adb start-server`。

8.  在 Fedora 上执行`adb devices`。

我现在在列表中看到一个新的 USB 设备。当我进入我的开发环境（Eclipse）时，我也看到了该设备。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-28T18:17:26.830

对于那些在遵循其他好的答案后仍然被卡住的人，请尝试使用不同的 USB 端口...加上 adb 重新启动以确保。这让我停滞了好多年。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-28T19:30:02.137

我有同样的问题，但我[从这个应用程序下载了驱动程序](http://forum.xda-developers.com/showthread.php?t=2001868)并开始工作。我在 Windows 7 和 Windows 8 上使用了相同的技术

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-16T15:33:04.250

我一直在为同样的问题苦苦挣扎一个月。我尝试了其他 Nexus 10、其他端口、其他计算机……一切。我以为我也尝试了其他 USB 电缆，但可能还不够，因为当朋友给我另一个电缆调试工作时。

对我来说，问题是当 Nexus 10 通过坏电缆连接到坏（前壳）端口时，PC的[EMI保护会启动。](https://en.wikipedia.org/wiki/Electromagnetic_interference)它是一个很大的平板电脑，所以我猜它会消耗大量电流，再加上屏蔽不良的电缆会使 PC 吓坏了。

因此，我对无法以任何其他方式解决问题的人的建议是：使用优质的 USB 电缆（连接器体积庞大的电缆 - 意味着更好的屏蔽），而不是便宜的电缆。

![在此处输入图像描述](../Images/0bd582caf886fca33db6c375f4338893.png)

图片上：红线坏，黑线好。

玩得开心，

-斯坦

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-11T04:28:18.213

按照这些说明在 Windows 7 上为我安装了正确的 ADB 驱动程序[http://developer.android.com/tools/extras/oem-usb.html](http://developer.android.com/tools/extras/oem-usb.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-12-09T01:27:24.370

我所要做的就是重新启动平板电脑。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-18T07:32:41.170

你应该至少做两件事来让你的设备在 Linux 上被识别：

1.  在热插拔管理器中指定 USB 制造商和设备 ID
2.  使用 USB 制造商 ID 向 ~/.android/adb_usb.ini 添加一个条目

您可以使用“lsusb”命令（即小写的 LSUSB）找到制造商和设备 ID。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-06-28T03:57:10.557

听起来很奇怪，尝试在媒体设备和相机模式之间切换平板电脑。在 10 ADB 上，我只在相机模式下工作，而在 7 上，它只在媒体设备模式下工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-03T19:34:15.473

尝试不同的 USB 端口。在带有 Nexus5/10 的 Windows 8.1 上为我工作。

# facebook - 在不透露APP ID的情况下使用Facebook登录用户

> ID：13438069
> 
> 赞同：1
> 
> 时间：2012-11-18T06:41:42.017
> 
> 标签：facebook

在有关使用 Facebook APP 登录用户的 Facebook 文档中，他们说：

“*因为它要求您包含您的 App Secret，所以您不应该尝试在客户端进行此调用，因为这会将这个秘密暴露给您的所有应用用户。重要的是，您的 App Secret 永远不会与任何人共享*”。

我理解是关于APP Secret，但是Developer ID呢？开发者 ID 添加到用户使用 Facebook 登录窗口的 URL 地址中：

`https://www.facebook.com/dialog/oauth?client_id=APP_ID&redirect_uri=...&state=...&scope=...`

APP_ID 可以被任何人复制和使用。我尝试使用 JavaScript SDK 和 PHP SDK，但在这两种情况下，开发人员 ID 都会出现在地址栏中。我还尝试使用 cURL 从该 URL 地址获取和显示页面，但当然不起作用。有什么方法可以在不透露开发者 ID 的情况下使用 Facebook 登录我的网站中的用户？或者，是否有人使用您的 Facebook APP ID 并不重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:31:36.103

你可以尝试使用 iframe 吗？这不是一个很好的问题解决方案，因为它仍然非常可用，但至少它不在地址栏中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:12:45.103

没关系，这本质上是公开信息。

# java - 导入 org.apache.xml.serialize.XMLSerializer 无法解析

> ID：13438072
> 
> 赞同：10
> 
> 时间：2012-11-18T06:41:53.233
> 
> 标签：java, jdbc, xerces

当我尝试导入 org.apache.xml.serialize.XMLSerializer 时，我收到以下错误消息：

```
 The import org.apache.xml.serialize.XMLSerializer cannot be resolved 
```

谁能告诉我原因？谢谢！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T17:36:52.090

您的构建路径中缺少[xercesImpl-2.9.0.jar](http://repo1.maven.org/maven2/xerces/xercesImpl/2.9.0/xercesImpl-2.9.0.jar)。如果您使用的是 Maven，则可以添加依赖项：

```
<dependency>
   <groupId>xerces</groupId>
   <artifactId>xercesImpl</artifactId>
   <version>2.9.0</version>
</dependency> 
```

# matlab - 使用 Givens 旋转的 QR 分解算法

> ID：13438073
> 
> 赞同：7
> 
> 时间：2012-11-18T06:42:51.097
> 
> 标签：matlab, qr-decomposition

我在 MATLAB 中编写了一个 QR 分解算法，只是为了确保我的机制是正确的。这是主要功能的代码：

```
 function [Q,R] = QRgivens(A)
        n = length(A(:,1));
        Q = eye(n);
        R = A;

        for j = 1:(n-1)
            for i = n:(-1):(j+1)
                G = eye(n);
                [c,s] = GivensRotation( A(i-1,j),A(i,j) );
                G(i-1,(i-1):i) = [c s];
                G(i,(i-1):i)   = [-s c];
                Q = Q*G';
                R = G*R;
            end
        end
    end 
```

下面给出了子函数 GivensRotation：

```
 function [c,s] = GivensRotation(a,b)
        if b == 0
            c = 1;
            s = 0;
        else
            if abs(b) > abs(a)
                r = -a / b;
                s = 1 / sqrt(1 + r^2);
                c = s*r;
            else
                r = -b / a;
                c = 1 / sqrt(1 + r^2);
                s = c*r;
            end
        end
    end 
```

我已经完成了研究，我很确定这是实现这种分解的最直接的方法之一，尤其是在 MATLAB 中。但是当我在矩阵 A 上测试它时，产生的 R 并不是应有的直角三角形。Q 是正交的，并且 Q*R = A，所以该算法在做一些正确的事情，但它并没有产生完全正确的分解。也许我只是盯着这个问题太久了，但是任何关于我忽略了什么的见解都会受到赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T01:47:28.790

这似乎有更多的错误，我所看到的：

1.  你应该使用 [c,s] = GivensRotation( R(i-1,j),R(i,j) ); （注意，R 代替 A）
2.  原来的乘法 Q = Q*G'; R = G*R 是正确的。
3.  r = a/b 和 r = b/a（没有减号，不确定是否重要）
4.  G([i-1, i],[i-1, i]) = [c -s; sc];

这是一个示例代码，似乎有效。

第一个文件，

```
% qrgivens.m
function [Q,R] = qrgivens(A)
  [m,n] = size(A);
  Q = eye(m);
  R = A;

  for j = 1:n
    for i = m:-1:(j+1)
      G = eye(m);
      [c,s] = givensrotation( R(i-1,j),R(i,j) );
      G([i-1, i],[i-1, i]) = [c -s; s c];
      R = G'*R;
      Q = Q*G;
    end
  end

end 
```

第二个

```
% givensrotation.m
function [c,s] = givensrotation(a,b)
  if b == 0
    c = 1;
    s = 0;
  else
    if abs(b) > abs(a)
      r = a / b;
      s = 1 / sqrt(1 + r^2);
      c = s*r;
    else
      r = b / a;
      c = 1 / sqrt(1 + r^2);
      s = c*r;
    end
  end

end 
```

# c - rsa 算法：任何人都可以向我解释发生了什么

> ID：13438074
> 
> 赞同：-1
> 
> 时间：2012-11-18T06:43:06.100
> 
> 标签：c, rsa

```
#include <string.h>
#include <conio.h>
#include <math.h>

int mult(unsigned int x, unsigned int y, unsigned int n) {
    unsigned long int k = 1;
    int j;
    for (j = 1; j <= y; j++)
        k = (k * x) % n;
    return (unsigned int) k;
}

void main() {
    char msg[100];
    unsigned int pt[100], ct[100], n, d, e, p, q, i;
    printf("Enter message : ");
    gets(msg);
    //strcpy(pt, msg);
    for (i = 0; i < strlen(msg); i++)
        pt[i] = msg[i];
    n = 253;
    d = 17;
    e = 13;
    printf("\nCT = ");
    for (i = 0; i < strlen(msg); i++)
        ct[i] = mult(pt[i], e, n);
    for (i = 0; i < strlen(msg); i++)
        printf("%d ", ct[i]);
    printf("\nPT = ");
    for (i = 0; i < strlen(msg); i++)
        printf("%c", pt[i]);
    for (i = 0; i < strlen(msg); i++)
        pt[i] = mult(ct[i], d, n);
} 
```

这是实现 RSA 算法的简单程序，任何人都可以向我解释这里发生了什么以及为什么特别是 n=253、d=17、e=13。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:26:25.667

[http://en.wikipedia.org/wiki/RSA_](http://en.wikipedia.org/wiki/RSA_(algorithm) (算法)。

253=11*23, // n=253 是两个“大”素数 p,q 的乘积

φ(n)=10*22=220。// Euler totient 函数是从 p,q
e= 13 // 一个小数，即与 phi(n) 互质的。然后计算 d，即 e*d=1 mod 220 --> d=17
-> d*e=221 === 1 mod 220。

扔掉 p,q。

# android - 如何在 Android 上使用渐变填充形状？

> ID：13438076
> 
> 赞同：0
> 
> 时间：2012-11-18T06:43:29.937
> 
> 标签：android, gradient

如何在 Android 上使用渐变填充形状？例如，LinearGradient、RadialGradient 或 SweepGradient。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-18T08:49:58.537

您可以从 xml 中执行此操作。在drawables文件夹中创建一个xml文件，文件应该是这样的

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
<!-- fill stroke color  -->
<stroke
    android:width="1dip"
    android:color="#bd5426" />
<!-- gradient color   -->
<gradient
    android:angle="-270"
    android:endColor="#B4BBBD"
    android:centerColor="#color you want"
    android:startColor="#D9DFE0" />

</shape> 
```

最后你在你的视图中使用

```
android:background="@color/name_of_xml_defined_above" 
```

# swing - Swing 包装器似乎缺少某些对等功能？

> ID：13438080
> 
> 赞同：0
> 
> 时间：2012-11-18T06:44:34.770
> 
> 标签：swing, scala

任何想法为什么scala中的swing组件似乎没有被完全包裹？例如，“paintImmediately”函数。或“更新”（因此我似乎无法覆盖）。

与 scala API 相比，对 Scala 源代码的检查似乎有点令人困惑..（scala 2.9 源代码如下所示）。API 似乎暗示存在这些其他功能：

[http://www.scala-lang.org/api/current/scala/swing/Component](http://www.scala-lang.org/api/current/scala/swing/Component) $SuperMixin.html

据我所知，SuperMixin 特征是打开对等组件的覆盖调用的原因。只有一些似乎已定义。我如何覆盖更新（图形 g）？有没有更流畅的调用 Panel.peer.paintImmediately(rect) 的方式？

我正在考虑修改 Scala 源代码以构建一个新的 Panel 类来纠正这些绘图问题。

抽象类组件扩展 UIElement { 覆盖惰性 val peer: javax.swing.JComponent = new javax.swing.JComponent with SuperMixin {} var initP: JComponent = null

```
 /**
* This trait is used to redirect certain calls from the peer to the wrapper
* and back. Useful to expose methods that can be customized by overriding.
*/
  protected trait SuperMixin extends JComponent {
    override def paintComponent(g: Graphics) {
      Component.this.paintComponent(g.asInstanceOf[Graphics2D])
    }
    def __super__paintComponent(g: Graphics) {
      super.paintComponent(g)
    }
    override def paintBorder(g: Graphics) {
      Component.this.paintBorder(g.asInstanceOf[Graphics2D])
    }
    def __super__paintBorder(g: Graphics) {
      super.paintBorder(g)
    }
    override def paintChildren(g: Graphics) {
      Component.this.paintChildren(g.asInstanceOf[Graphics2D])
    }
    def __super__paintChildren(g: Graphics) {
      super.paintChildren(g)
    }

    override def paint(g: Graphics) {
      Component.this.paint(g.asInstanceOf[Graphics2D])
    }
    def __super__paint(g: Graphics) {
      super.paint(g)
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:31:19.317

大多数 scala swing 包装器委托给 java 库中相应的包装`peer`组件，并且通过隐式转换使操作可用。

当我有空的时候，我会添加一些细节。

# php - 导出数据库中所有表的某些列

> ID：13438082
> 
> 赞同：0
> 
> 时间：2012-11-18T06:45:20.827
> 
> 标签：php, mysql, phpmyadmin

我有一个小问题。我有两个 MySQL 数据库，我想将所有表从一个移到另一个，除非我使用普通的 PHPMyAdmin 导出，因为我的 ID 列而出现错误。如何将整个数据库复制到另一个数据库中，除非在 PHPMyAdmin 中不复制该表？另外，我不能只是手动复制表，因为我有很多表。我知道这可能涉及遍历数据库中的所有表。任何人都知道这样做的方法（如果它使用 PHP，我可以）？
所有表的结构完全相同，并遵循以下结构：

```
id int NOT NULL AUTO_INCREMENT, # The one I don't want to copy (it is also a primary key)
col1 varchar(5), # Want to copy all of these.
col2 varchar(15),
col3 varchar(1000),
col4 varchar(20) 
```

我想要做的就是将所有表从一个数据库复制到另一个数据库，除非不复制`id`每个条目的列。因此，例如，如果我只是手动添加一个条目，我会使用`CREATE TABLE IF NOT EXISTS mytable ...`, 然后`INSERT INTO mytable (col1, col2, col3, col4) VALUES (value1, value2, value3, value4)`. 请注意，我没有插入该`id`列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:55:11.633

```
select concat( 'INSERT INTO destination_db.destintation_table 
(col1, col2, col3, col4)
SELECT col1, col2, col3, col4 FROM ',a.table_name,';' )
from information_schema.tables a 
where a.table_name like 'table_prefix_%'; 
```

假设您的表都有前缀，应该给您运行代码吗？在它回来后运行它返回的查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T00:48:52.320

您可以创建 PHP 脚本来获取所有表并执行循环以插入到新表中。如果结构相同，那么复制所有这些应该更容易。这里的想法：

获取所有表

```
$sql = "SHOW TABLES FROM DB1";
$query = mysql_query($sql);    

// save the result as $old_tables

$sql = "SHOW TABLES FROM DB2";
$query = mysql_query($sql);    

// save the result as $new_tables 
```

循环结果并插入到您的其他表中，如果它不存在则创建：

```
foreach($old_tables as $table){
    if(!in_array($table, $new_tables)){
        // create table with the name $table in DB2
    }

    $sql = "INSERT INTO DB2.$table(col1, col2, col3, col4) SELECT col1, col2, col3, col4 FROM  DB1.$table";
    mysql_query($sql);
} 
```

最简单的方法是使用 SQLYog、Navicat 等数据库管理工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:00:29.490

如果您有一个可以访问这两个数据库的用户，您可以执行以下操作：

```
INSERT INTO destination_db.destintation_table 
    (col1, col2, col3, col4)
    SELECT col1, col2, col3, col4 FROM source_db.source_table 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T13:08:38.140

这里的这个人有一个 bash 脚本，可以从数据库中获取表名并对每个表执行操作：[http ://wozia.com/blog/tips/bash-script-to-repair-all-mysql-tables-for -所有数据库/](http://wozia.com/blog/tips/bash-script-to-repair-all-mysql-tables-for-all-databases/)

如果您将其与上面@Lex 的答案结合起来，它可能会满足您的需求。具体来说，仅在链接页面上使用第二个文件，并将*mysql*行更改为：

```
INSERT INTO targetdb.$TABLENAME (col1, col2, col3 col4)
    VALUES (SELECT col1, col2, col3, col4
            FROM sourcedb.$TABLENAME) 
```

我敢肯定，您必须做一些工作才能让它引用正确的列。您也将无法进行重复或错误检查，但我假设您已经考虑过这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-24T15:12:49.133

好的，这是疯狂的方法。

1) 转储你的 MySQL 数据库

```
mysqldump -h localhost -u <user> -p<password> <database> > dump.sql 
```

2) 用vim打开dump.sql，在所有表名后面加上(col1, col2, col3, col4)

```
vim dump.sql
:%s/INSERT INTO `\(.*\)`/INSERT INTO `\1`(col1, col2, col3, col4)/g 
```

3) 现在删除 VALUES 之后的第一个值，它应该是每一行的 id。

```
:%s/VALUES (\d\+,/VALUES (/g 
```

4）从转储中删除您不想复制的所有表。将转储应用到目标数据库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T20:04:18.687

我使用“Navicat for MySQL”在数据库之间复制各种数据。听起来它可能适用于您的用例。Navicat 在跨数据库数据管理方面非常灵活。您可以下载 30 天试用版，试用它并确定它是否适合您。[http://www.navicat.com](http://www.navicat.com)

注意：我不为 Navicat 工作……我只是一个满意的客户。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-27T03:43:17.837

这是我的解决方案 - PHP 需要在 sudoers 中配置

```
<?php

// Dump and recover 

system("mysqldump -u root -ppassword -h localhost --ignore-table=my_db_name.my_table_name1 --ignore-table=my_db_name.my_table_name2 my_db_name | mysql -u root -ppassword -h remote_host my_db_name"); 
```

如果你不需要 PHP，你可以在 shell 中运行这个命令行

```
mysqldump -u root -ppassword -h localhost --ignore-table=my_db_name.my_table_name1 --ignore-table=my_db_name.my_table_name2 my_db_name | mysql -u root -ppassword -h remote_host my_db_name 
```

# python - Python 自动文件名

> ID：13438084
> 
> 赞同：0
> 
> 时间：2012-11-18T06:45:40.680
> 
> 标签：python, file-io, python-2.7

我想自动使用 . 保存电子表格时使用的文件名`xlwt`。`Data`假设在 python 程序正在运行的文件夹中有一个名为的子目录。我希望程序计算该文件夹中的文件数（# = n）。然后文件名必须以 (n+1) 结尾。如果文件夹中有 0 个文件，则文件名必须为`Trial_1.xls`. 该文件必须保存在该子目录中。

我知道以下内容：

```
import xlwt, os, os.path
n = len([name for name in os.listdir('.') if os.path.isfile(name)]) 
```

计算同一文件夹中的文件数。

```
a = n + 1
filename = "Trial_" + "a" + ".xls"
book.save(filename) 
```

这会将正确命名的文件保存到同一文件夹中。

我的问题是如何将其扩展到子目录？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T06:47:55.720

`os.listdir('.')``.`in this 指向执行文件的目录。将 to 更改为`.`您感兴趣的子目录。

你应该从你的文件系统的根目录给它完整的路径名；否则它将相对于执行脚本的目录。这可能不是您想要的；特别是如果您需要从另一个程序引用子目录。

您还需要提供`filename`变量的完整路径；这将包括子目录。

为了让生活更轻松，只需设置变量的完整路径并在需要时引用它。

```
TARGET_DIR = '/home/me/projects/data/'
n = sum(1 for f in os.listdir(TARGET_DIR) if os.path.isfile(os.path.join(TARGET_DIR, f)))
new_name = "{}Trial_{}.xls".format(TARGET_DIR,n+1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T12:11:04.203

你实际上想要[glob](http://docs.python.org/library/glob.html#module-glob)：

```
from glob import glob    

DIR = 'some/where/'
existing_files = glob(DIR + '*.xls')
filename = DIR + 'stuff--%d--stuff.xls' % (len(existing_files) + 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T07:26:45.970

既然您说 Burhan Khalid 的回答“完美运行！” 你应该接受它。

我只是想指出另一种计算数字的方法。你这样做的方式是可行的，但如果我们想象你在数沙粒或其他东西会占用太多内存。这是获取计数的更直接方法：

```
n = sum(1 for name in os.listdir('.') if os.path.isfile(name)) 
```

对于每个符合条件的名称，我们都会得到一个 1，所有这些 1 都会被输入`sum()`，然后你就会得到你的计数。

请注意，此代码使用“生成器表达式”而不是列表推导。上面的代码没有构建一个列表，获取它的长度，然后丢弃该列表，而是创建了一个迭代器来`sum()`迭代计算计数。

这有点低俗，但我们可以使用一个快捷方式：`sum()`接受布尔值，并将`True`其视为 1 和`False`0。我们可以将它们相加。

```
# sum will treat Boolean True as a 1, False as a 0
n = sum(os.path.isfile(name) for name in os.listdir('.')) 
```

这非常棘手，我可能不会在不发表评论的情况下使用它。但我相信这是在 Python 中计算事物最快、最有效的方法。

# c - 这个声明有什么问题？

> ID：13438093
> 
> 赞同：2
> 
> 时间：2012-11-18T06:48:03.720
> 
> 标签：c, pthreads, declaration, void-pointers

是这样的，第四，第五：

```
void * copyFile( void * arg )
{
    struct dirent *ent = (dirent *)arg;
} 
```

GCC 告诉我`'dirent' undeclared (first use in this function)`。

在你问之前，争论是`void *`因为它被传递给了一个 pthread，这正是我被教导这样做的方式，而且因为这是我第一次线程化（很痛），我只是按照我被告知的去做因为我在这里的理解充其量是薄弱的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T06:54:53.077

除非你`typedef`有你需要的结构：

```
struct dirent *ent = (struct dirent *)arg; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T14:16:26.147

正如 mux 所解释的，您需要使用

`struct dirent *ent = (struct dirent *)arg;`

我只是想弄清楚为什么你必须这样做。当您声明一个结构时，我们会执行以下操作之一

**1.没有typedef**

```
struct my_struct         // <----- Name of the structure(equivalent to datatype)
     {
    int x;
    int y;
     } hello;          // <------Variable of type my_struct 
```

现在您可以使用以下方式访问：

1.  `hello.x=100;`

2.  可以使用声明一个新变量

`struct my_struct new_variable; (new_variable is new variable of type my_struct)`

**2\. 现在使用 typedef**

```
typedef struct my_struct
  {
     int x;
     int y;
   } hello;        //<----- Hello is a typedef for **struct my_struct** 
```

所以当你这样做时

```
hello new_var; //  <-------- new_var is a new variable of type my_struct

hello.x      //  <-------- Here hello refers to the datatype and not the variable 
```

因此，变量 dirent 在***不同的上下文中***可能意味着不同的东西：-

如果您不提及该结构，编译器将假定它在 typedef 上下文中，因此会发现该变量未声明。

因此，您需要像 mux 所指出的那样直接提及它。

# css - CSS 优先级 - 哪一个胜过？

> ID：13438094
> 
> 赞同：2
> 
> 时间：2012-11-18T06:48:16.397
> 
> 标签：css

即将参加考试，我正在参加我们之前的考试。

问题：
当两个或多个样式表规则适用于同一个元素时，以下哪种类型的规则将优先？

一种。任何带有浏览器来源的声明
b. 带有用户来源的正常声明
c. 带有作者来源的正常声明
d. 文件级声明

那么答案是c还是d？我猜是 d 因为 c 是一个正常的声明，并不重要，但我无法在任何地方得到明确的答案

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T06:51:22.477

答案是`Document-level declaration`，它会将样式应用于在最后一个链接样式表中声明的元素

测试用例

HTML

```
<html>
    <head>
        <link href="stylesheet1.css" rel="stylesheet" type="text/css" />
        <link href="stylesheet2.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div>hello<!-- Color applied will be green --></div>
    </body>
</html> 
```

CSS

`stylesheet1.css`

```
div {
    color: red;
} 
```

`stylesheet2.css`

```
div {
    color: green;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:47:22.323

考试题是不正确的，因为考试题经常是。“文档级声明”这个表述不是一个专有名词，它有多种解释。此外，它使用“正常”这个词并没有具体说明其含义，但您可能猜对了它的意思是“没有`!important`”。

答案是“未定”，因为“a”包含一个带有 的浏览器样式表规则`!important`，它胜过“b”和“c”（以及“d”，除非它表示可能有的东西`!important`），但这样说是不正确的“a”通常胜过其他。**编辑：**可能会阅读规范，以使浏览器样式表不能具有`!important`或对其没有影响，但至少 Firefox html.css 使用`!important`（模糊）。

我敢打赌，考试的作者没有想到`!important`浏览器样式表中可能存在规则，因此您应该回答“c”。

**编辑：**选项“d”可能只是为了混淆学生，因为如果它表示嵌入在 HTML 文档中的样式表，它是作者样式表的特例，并且嵌入不会影响级联规则（在嵌入的样式表中） with`style`和 linked with `link`，重要的是 HTML 元素的位置，而不是嵌入的与链接的东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T09:08:09.020

您正在引用[CSS Cascading](http://www.w3.org/TR/CSS2/cascade.html#cascade)。

所以，从链接

> 样式表可能有三个不同的来源：作者、用户和用户代理。

并且它们之间的优先级如下

> 默认情况下，作者样式表中的规则比用户样式表中的规则更重要。> 但是，对于“！important”规则，优先级是相反的。所有用户和作者规则都比 UA 的默认样式表中的规则具有更大的权重。

级联顺序由优先级升序定义

```
user agent declarations
user normal declarations
author normal declarations
author important declarations
user important declarations 
```

[CSS 特殊性规则](http://www.w3.org/TR/CSS2/cascade.html#specificity)稍后会出现。

# linux - 用字符串替换文本文件中的第一行

> ID：13438095
> 
> 赞同：77
> 
> 时间：2012-11-18T06:48:20.210
> 
> 标签：linux, shell, unix

我是 shell 脚本的新手，对如何使用`sed`或任何其他工具将我的文本文件中的第一行替换为字符串感到困惑。以下是文本文件内容：

```
/home/snehil/Desktop/j1/movie.MOV
“spome 其他文本行”

```

我想用just `movie.MOV`（可能是shell脚本中的变量）替换第一行（电影文件路径）

请指导我如何做到这一点。我在一些帖子中遇到过`sed`，我需要在这里使用`sed`吗？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-11-18T06:51:58.370

sed 是正确的工具，尝试这样做：

```
var="movie.MOV"
sed -i "1s/.*/$var/" file.txt 
```

**解释**

*   `1`意思是第一行
*   剩下的就是替换：我们用变量`s///`替换所有内容 (.*)`$var`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-11-24T15:34:20.050

你可以用尾巴轻松做到这一点：

```
#I want to replace the first line
cp test.txt test.txt.backup
echo 'mynewfirstline'> test.txt
#add everything from old file starting from second line
cat test.txt.backup |tail -n+2>> test.txt 
```

# postgresql - 通过 jdbc 驱动程序和 h2console.war 连接到 postgresql

> ID：13438096
> 
> 赞同：1
> 
> 时间：2012-11-18T06:48:41.327
> 
> 标签：postgresql, jdbc, jboss7.x, h2

我使用 JBoss AS 7.1.1.Final 作为我的应用程序服务器。

我已经在 J​​Boss 社区用户论坛上发布了我的问题：[question-here](https://community.jboss.org/thread/213500)

转载如下：

* * *

在我的 MacBook Pro 上安装了 AS 7.1.1.Final。

下载了快速入门示例。能够成功部署和测试 helloworld、jboss-as-greeter 战争。

然后我设置了 postgresql 数据库引擎来尝试 jboss-as-cmt 示例。我能够编译和部署它。

一切都很好，除了一件事 - 我无法从应用程序服务器附带的 h2console web-app 连接到 postgresql 数据库。

jboss-as-cmt 战争完美运行，即我能够将客户添加到发票中。我可以 psql 进入数据库引擎，我可以看到所有的记录。我唯一的问题是我无法使用 h2console webapp 进入我创建的 jboss-as-cmt postgres 数据库。

我正在使用：“org.postgresql.Driver”作为驱动程序类字段。JDBC URL 为“jdbc:postgresql://127.0.0.1:5432/jboss-as-cmt”。这与我在 Standalone-full.xml 配置文件中设置的 connection-url 值相同。“sa”代表用户名和密码。

当我按下 h2console 应用程序上的“测试连接”按钮时，不幸的是我看到 -

```
Class "org.postgresql.Driver" not found [90086-161]
org.h2.message.DbException: Class "org.postgresql.Driver" not found [90086-161]
    at org.h2.message.DbException.get(DbException.java:158)
    at org.h2.util.Utils.loadUserClass(Utils.java:429)
    at org.h2.util.JdbcUtils.getConnection(JdbcUtils.java:146)
    at org.h2.server.web.WebServer.getConnection(WebServer.java:653)
    at org.h2.server.web.WebApp.test(WebApp.java:839)
    at org.h2.server.web.WebApp.process(WebApp.java:215)
    at org.h2.server.web.WebApp.processRequest(WebApp.java:164)
    at org.h2.server.web.WebServlet.doGet(WebServlet.java:118)
    at org.h2.server.web.WebServlet.doPost(WebServlet.java:153)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930)
    at java.lang.Thread.run(Thread.java:680)
Caused by: org.h2.jdbc.JdbcSQLException: Class "org.postgresql.Driver" not found [90086-161]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    ... 24 more
Caused by: java.lang.ClassNotFoundException: org.postgresql.Driver from [Module "com.h2database.h2:main" from local module loader @b4e29b (roots: /Users/avyayatek/Downloads/jboss-as-7.1.1.Final/modules)]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:423)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at org.h2.util.Utils.loadUserClass(Utils.java:424)
    ... 22 more 
```

我能够建立从 jboss 管理控制台 (http://localhost:9990/console) 到数据源的成功连接。在数据源配置文件面板上，我将数据源的名称设置为“postgresDS”，将 jndi 设置为“java:jboss/postgresDS”。连接 URL 与我在 h2console 上使用的相同 - “jdbc:postgresql://127.0.0.1:5432/jboss-as-cmt”

我不知道为什么 h2console 没有连接到 postgresql 数据库引擎。它成功连接到 jboss-as-greeter 示例中使用的 h2 内存数据库。

我已将 JDBC 驱动程序放在 $JBOSS_HOME/modules/org/postgresql/main 文件夹中。在那里创建了 module.xml。在 ~/org/postgresql/ 文件夹中的 jar 中有一个 Driver.class 文件。我已修改 $JBOSS_HOME/standalone/configuration/standalone-full.xml 以添加与 postgresql 相关的数据源和驱动程序部分。

正如我所说，我可以构建 jboss-as-cmt 并进行部署，它可以按预期工作。如果我能让 h2console 连接到这个 postgresql 数据库，它会给我一些安宁。

一般来说，我是 JBoss 和服务器端的新手。

我附上了一些图片供参考。

谢谢你的时间。

* * *

任何想法都受到高度赞赏。感谢您的见解和时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:03:30.070

首先，感谢@ThomasMueller，他的评论鼓励我进一步挖掘并找到一个实用的解决方案。还要感谢 JBoss 社区页面上的 Wolf-Dieter 为我指明了正确的方向。所以，我对@MarkRotteveel 的真诚建议是，在可信的论坛上发帖并没有什么坏处，当我们找到解决方案时，每个人都会受益。

这对我有用：感谢[源代码](http://www.h2database.com/)的链接，我从源代码创建了 h2console，这一次，我将 postgres JDBC 驱动程序 jar 文件放在 WEB-INF/lib 文件夹中。现在，我可以使用 h2console 连接到 postgresql 数据库。

快速入门附带的 h2console 应用程序在 WEB-INF/lib 文件夹中没有任何库 jar。相反，它指定 META-INF/MANIFEST.mf 文件中的依赖项。我很肯定在 JBoss 启动时加载了 h2 和 postgres 驱动程序 - 我可以看到日志。但是由于某种原因，这个应用程序只能识别 h2 驱动程序而无法识别 postgres 驱动程序。查看源文件，我相当肯定那里没有“硬编码”。所以，这对我来说仍然是个谜。

h2console 工具的替代品 - [SQUirrel](http://squirrel-sql.sourceforge.net/)。

谢谢大家。希望这对某人有所帮助-不仅限于SO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-13T02:57:44.357

驱动程序可以将自己注册为多个 JDBC 协议的处理程序。它可能已经改变，但在某一时刻，H2 会将自己注册为 jdbc:postgresql 的处理程序——这并非完全不合理，因为 H2 可以在 PostgreSQL 仿真模式下运行。如果您直接使用 DriverManager（因为它只需要 url）会很好，但如果您使用连接管理器（需要驱动程序类路径）会出现问题，因为驱动程序不是 org.postgresql.Driver。

如果您的类路径中有 h2 和 postgresql 驱动程序，这也会导致问题。我不记得它是“第一个注册的”还是“最后一个注册的”，但是您从 DriverManager 获得的驱动程序将取决于 jar 的加载顺序。它引起了很多悲伤，也是我养成始终定义明确命名要使用的类路径的 DataSource 习惯的原因之一。一次性应用程序只需要一个连接，但它消除了歧义，这有点矫枉过正。

至于特定问题，我只是将罐子添加到 java 类路径中。我有一个小的 bash shell 脚本，它将大约十几个 jar 放到类路径中，它允许我毫无问题地连接到大量数据库。它避免了每次我需要更新其中一个驱动程序时都需要重建 h2 jar。

# extjs - 记录未更新

> ID：13438097
> 
> 赞同：0
> 
> 时间：2012-11-18T06:48:49.657
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我是 Ext js 的新手，使用 Extjs 4.1.1。我正在尝试通过编辑（View-Edit.js）来更新记录（用户-模型）。但是当发送请求时，操作在中间被中止并且没有完成。
是要编写额外的代码来保存还是我的代码中有一些缺陷？

请在下面找到我的代码。

**应用程序.js**

```
 Ext.application({

name: 'AM',

appFolder:'app',

controllers:['Users'],

requires:['AM.view.user.List','AM.Configuration'],

launch:function(){

    Ext.create('Ext.container.Viewport',{
        layout:'fit',
        items:[{
                xtype:'userlist',
                title:'Users',
                html:'List of users will go here'
            }   
        ]
    });
}}); 
```

**模型**

```
Ext.define('AM.model.User',{
extend:'Ext.data.Model',
fields: ['id','name','email']}); 
```

**店铺**

```
Ext.define('AM.store.Users',{
extend: 'Ext.data.Store',
model: 'AM.model.User',
autoLoad: true,
idProperty:'id',

proxy:{
    type:'ajax',
    url: 'data/users.json',
    api:{
        read: 'data/users.json',
        update: 'data/updateUsers.json'
    },
    reader:{
        type: 'json',
        root: 'users',
        successProperty:'success',
    }   
}}); 
```

**看法**

```
 Ext.define('AM.view.user.Edit',{

extend: 'Ext.window.Window',

alias: 'widget.useredit',

title: 'Edit User',

layout:'fit',

autoShow:'true',

initComponent: function(){

        this.items = [{

                    xtype:'form',
                    items:[{
                        xtype:'textfield',
                        name: 'name',
                        fieldLabel: 'Name'
                    },{
                        xtype:'textfield',
                        name: 'email',
                        fieldLabel: 'Email'
                    }]
            }];

        this.buttons = [{
                text:'Save',
                action:'save'
            },{
                text:'Cancel',
                scope:this,
                handler: this.close
        }]

    this.callParent(arguments);
}}); 
```

**控制器**

```
 Ext.define('AM.controller.Users',{
extend: 'Ext.app.Controller',

views:['AM.view.user.List','AM.view.user.Edit'],

requires:['AM.view.user.List'],

stores:['Users'],

models:['User'],

init: function(){
    console.log('Initialized Users!! This happens before the application launch function is called');   
    this.control({

        'userlist':{
             itemdblclick: this.onEditUser
        },
        'useredit button[action=save]':{
            click: this.updateUser
        }

    });
},

onEditUser: function(grid,record){
    console.log('called on Edit User.. for user '+record.get('name'));
    var view = Ext.widget('useredit');
    view.down('form').loadRecord(record);
},

updateUser: function(button){
    console.log('Clcked save button');
    var win = button.up('window'),
    form = win.down('form'),
    record = form.getRecord(),
    values = form.getValues();

    record.set(values);
    win.close();
    this.getUsersStore().sync();
}}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:24:53.370

试试这个方法

```
grid.insert(rowIndex,[values]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:59:49.430

尝试添加到存储代理：`writer:new Ext.data.JsonWriter()`

# android - Android：使用 SOAP 调用 Web 服务

> ID：13438099
> 
> 赞同：0
> 
> 时间：2012-11-18T06:49:02.270
> 
> 标签：android

我正在使用返回 xml 模式的 Web 服务。我想通过 SOAP 调用它。我已经对其进行了编码，但我没有得到任何输出。有人可以帮我吗？

我的网络服务是：

[http://dev.sigwp.org/WikipediaOntologyAPIv4/Service.asmx?WSDL](http://dev.sigwp.org/WikipediaOntologyAPIv4/Service.asmx?WSDL)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:52:44.453

你的问题不是很清楚你真正想要什么，但如果你想使用 Android 的肥皂网络服务，你可以按照本教程

[http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T06:58:34.267

我使用以下内容发出了登录的肥皂请求。根据您的需要修改相同的内容。确保您的项目 lib 中包含最新的 soap jar 文件。还可以查看本教程。[http://www.youtube.com/watch?v=v9EowBVgwSo](http://www.youtube.com/watch?v=v9EowBVgwSo)。

```
 SoapObject request = new SoapObject("NameSpace", "MethodName");//
    loginreq.setValue("<LoginReq>" 
                        +"<nickName>"+name+"</nickName>" 
                        +"<password>"+pass+"</password>" 
                        +"<IMEI>"+mImei+"</IMEI>" 
                        +"<location>" 
                        +"<latitude>"+lati+"</latitude>"
                        +"<longitude>"+longi+"</longitude>"
                        +"</location>" 
                        +"</LoginReq>");//my requirement was to send request in this format.
   PropertyInfo loginreq = new PropertyInfo();
            loginreq.name="LoginReq";
            loginreq.type=String.class;
            request.addProperty(loginreq);  //sending request.
            SoapSerializationEnvelope envelop = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelop.setOutputSoapObject(request);
            System.out.println("Request is"+request); 

        HttpTransportSE androidHttpTransport = new   HttpTransportSE ("http://bugs.medalsystems.com:8080/ThirdEye/ThirdEyeWebService?wsdl");//your wsdl link
        androidHttpTransport.debug=true;

        try
        {
        androidHttpTransport.call("http://service.medal.org/ThirdEyeWebService/LoginRequest", envelop);
        SoapObject response=(SoapObject) envelop.bodyIn;
        System.out.println("Response is......"+response.toString());
   System.out.println("Response is......"+response.toString());

        DocumentBuilderFactory dbf =DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(response.getProperty(0).toString()));

        Document doc = db.parse(is);//parse xml
        NodeList nodes = doc.getElementsByTagName("StandardResp");

        for (int i = 0; i < nodes.getLength(); i++) 
            {

              Element element = (Element) nodes.item(i);

              NodeList rc = element.getElementsByTagName("respCode").item(0).getChildNodes();//get value form respCode tag
              ResponseCode = ((Node) rc.item(0)).getNodeValue();
              System.out.println("Respone Code...."+ResponseCode);

              NodeList mess =  element.getElementsByTagName("message").item(0).getChildNodes();
              Message = ((Node) mess.item(0)).getNodeValue();
              System.out.println("Message....."+Message);

              NodeList sess =  element.getElementsByTagName("sessionId").item(0).getChildNodes();
              SessionIdlin = ((Node) sess.item(0)).getNodeValue();
              System.out.println("Session Id....."+SessionIdlin); 

            }

        }
        }
        catch(Exception e)
         {
      e.printStackTrace();
       } 
```

[解析 XML 模式 java](https://stackoverflow.com/questions/11408652/parsing-xml-schema-java)。

# python - Google App Engine 中的 Tkinter

> ID：13438101
> 
> 赞同：1
> 
> 时间：2012-11-18T06:49:23.980
> 
> 标签：python, google-app-engine, tkinter

我正在使用 Tkinter 在 Python 中创建游戏，并希望使用 Google App Engine 将我的游戏上线。

我只是希望链接 randomappname.appspot.com 直接进入我的游戏，没什么特别的。我以前从未使用过 GAE，所以我想知道最简单的方法是什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:19:43.563

Tkinter 不是为在浏览器中运行而设计的。一次可以通过使用[tcl 插件](http://www.tcl.tk/software/plugin/download.html)在浏览器中运行 Tk ，但我怀疑该插件适用于任何现代浏览器（当前版本的日期为 2006 年），并且它不适用于 Tkinter，因为 Tkinter 依赖于 python .

# php - CakePHP 找不到用户控制器

> ID：13438103
> 
> 赞同：3
> 
> 时间：2012-11-18T06:49:50.023
> 
> 标签：php, cakephp

我一直在关注 cakephp.org 上的博客教程，并且添加和编辑帖子表工作正常。我想添加一个用户登录，但是在按照教程进行操作时遇到了问题。当我现在运行我的应用程序时，我不断收到错误消息：

错误：找不到用户控制器。

错误：在以下文件中创建类 UsersController：app/Controller/UsersController.php

我知道控制器肯定在那里，我遵循命名约定，并且在 UsersController.php 或其他任何代码中找不到任何错误。有谁知道为什么会发生这种情况？

编辑：清除缓存似乎不是问题。所有这一切都是一个空的文本文件。

谢谢，乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T07:57:39.237

检查文件权限，每个人都应该可以阅读。

清除 /app/tmp/cache/models、/app/tmp/cache/persistent 中的缓存

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T11:29:59.837

您的缓存有问题删除 /app/tmp/cache/models 中的所有代表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-29T08:40:51.967

如果您从教程页面复制这些示例，请确保复制文件开头的 php 标签

```
<?php 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-29T09:32:12.620

确保您的调试模式为 ON 。

```
Configure::write('debug', 2); 
```

进入 config/core.php 文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-02T09:27:04.540

确保页面开头和php开始标签之间没有空格

# java - 将多行 JTextArea 内容写入文件

> ID：13438104
> 
> 赞同：0
> 
> 时间：2012-11-18T06:49:50.417
> 
> 标签：java, swing, jtextarea, filewriter, jtextcomponent

我必须将 textarea 的内容写入带有换行符的文件中。我得到了输出，它被写为文件中的一个字符串。

```
public void actionPerformed(ActionEvent ev) {

text.setVisible(true);
String str= text.getText();
System.out.println(str);

try {
    BufferedWriter fileOut = new BufferedWriter(new FileWriter("filename.txt")); 

    fileOut.write(str);

    fileOut.close();
} catch (IOException ioe) {
    ioe.printStackTrace();
}
} 
```

例子

输出应该是：

```
I
am
King. 
```

但它显示：

```
IamKing. 
```

请给我一些建议

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T07:42:48.640

使用[`JTextComponent.write(Writer)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#write%28java.io.Writer%29)：

> 将模型的内容存储到给定的流中。默认情况下，这会将模型存储为纯文本。

## 例如

```
BufferedWriter writer = new BufferedWriter(new FileWriter("filename.txt"));
text.write(writer); 
```

# c++ - 分配 std::vector 数组减慢后续计算

> ID：13438106
> 
> 赞同：0
> 
> 时间：2012-11-18T06:49:54.867
> 
> 标签：c++, vector

我正在优化算法。我遇到了一个奇怪的怪事。

以下：

```
//The following is completely unused
vector<int>** rotated_squares;
rotated_squares = new vector<int>*[31];
for (int i=0;i<31;++i) {
    rotated_squares[i] = new vector<int>[31];
}

{
    //Lots of computation, using other vectors, but not rotated_squares
} 
```

. . . 至少比以下速度慢十倍：

```
{
    //The exact same computation as above.
} 
```

我不知道是什么原因造成的。我唯一能想到的是，它以某种方式是底层实现的产物。为此，使用 Visual Studio 2010 for C++ 编译器。

编辑：澄清，下面的计算是变慢的部分。分析时，顶部的内存分配几乎可以忽略不计。

所以问题是我在顶部添加了行，代码运行速度慢了大约十倍。通过调试，额外的内存分配需要几分之一秒，但通常需要大约 8 秒的计算代码开始需要几分钟。

编辑：根据大众的需求，算法的来源可以在这里找到：http: [//pastebin.com/Yf78gTNC](http://pastebin.com/Yf78gTNC)。关键是#if 1 可以设置或取消设置，并且代码编译得很好——但是有了它，它在计算部分的运行速度要慢得多。

编辑：我已将代码简化为以下内容：http: [//pastebin.com/mpnPsQE1](http://pastebin.com/mpnPsQE1)。在我的代码中，这会导致问题。但是，制作一个简单的测试用例（即仅包含此代码的 main 函数）不会*显示*问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T06:54:27.670

> 我不知道是什么原因造成的。

这

```
vector<const Vec2>** rotated_squares;
rotated_squares = new vector<const Vec2>*[size2[1]]; //size2[1]==31
for (int i=0;i<size2[1];++i) {
    rotated_squares[i] = new vector<const Vec2>[size2[0]]; //size2[0]==31
} 
```

部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T07:22:25.617

使用 C++03 和 a `std::vector< T const >`，您已进入未定义行为领域。我不确定 C++11 的情况，即使在使用 10 分钟拖网标准之后也是如此。但可能相同，在这种情况下不需要特殊解释。

但是，可能是您未显示的代码（据称速度变慢）正在引用`rotated_squares`.

也可能是添加的代码导致缓存未命中。

没有代码很难重现，但它可能有助于将减慢的代码放入自己的函数中。

让 ESP 电路过载……集中注意力……不，那也没用。

# java - 为什么处理器需要相同的时间来执行这两个 for 循环（用 Java 编码）？

> ID：13438108
> 
> 赞同：0
> 
> 时间：2012-11-18T06:49:58.517
> 
> 标签：java, performance, time, for-loop, processor

```
public class FactorFinder{
  public static void main(String[] args) {      
    long n = ((long)Integer.MAX_VALUE+1)*2;
    boolean isPrime=true;

    for(long i=2;i<=n/2;i++){
        if(n%i==0){
            System.out.println(i + " is a factor of " + n);
            isPrime = false;
        }   
    }    
    if(isPrime == true) System.out.println(n+ " is a prime number");   
  }     
} 
```

我编写了上面的代码来查找因子 n，或者如果它没有任何因子打印“n 是素数”。我在代码中临时设置了 n=2^32 以查看程序完全运行需要多长时间。花了1分17秒。

然后我将for循环更改为

```
for(long i=2;i<n;i++){ 
```

并预计完成该程序所需的时间是原来的两倍。如您所料，既然您已经阅读了我的问题，只花了 1 分 17 秒。

我是否认为处理器能够以某种方式知道在 n 大于 2^32 / 2 之后，它不必再运行循环了，或者即使它运行了，它也不必检查if 语句的条件了吗？

我有一个在 Windows 7 上运行的 Intel core i3、JDK 1.7.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:11:17.560

我机器上的 n/2 版本花费了一半的时间。编译器不可能足够聪明，无法弄清楚您正在考虑的优化类型。

你记得在第二次测试之前保存源文件并重新编译吗？忘记这一点可以解释你得到的结果，我想不出还有什么可以解释的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:08:47.670

如果编译器不尝试执行不必要的计算，这是非常聪明的，因为没有必要检查 n 是否可被 i 整除，如果 i > root(n)

# actionscript-3 - 使用 Flash/AS3 录制内部音频

> ID：13438110
> 
> 赞同：1
> 
> 时间：2012-11-18T06:51:01.850
> 
> 标签：actionscript-3, flash, audio, record, piano

在网上搜索了高低之后，我一生都无法弄清楚这一点。我绝对是所有 Flash 的新手，但我正在尽我所能自学。我有一个简单的 Flash 钢琴工作，并想添加记录和播放功能。这就是问题所在 - 我可以找到许多关于从*麦克风*录制并使用 Flash 保存/播放它的答案，但我能找到的唯一与内部音频（或基于 Flash 的钢琴）有关的东西是像这样的问题，答案要么非常模糊，要么根本没有答案。

我有某种想法，我应该创建一个跟踪点击的数组？（目前它是一台可以用鼠标弹奏的钢琴，但如果我最好让它基于键盘，那至少我可以做到）。在（之前？期间？）创建该数组之后，我如何保持节奏/时间正确？

我只是超级迷路，真的需要你的专业知识......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:04:18.457

您在将点击存储在数组中时处于正确的轨道上。至于节奏和计时，当用户想开始“录音”时，你可以启动一个计时器，我会每隔 200 毫秒左右。您可以使用该计时器来确定在播放时单击该键以使用该键的时间点。

我不知道您是否需要长按之类的东西，但是要做到这一点，使用相同的计时器，您可以设置开始时间和结束时间（按下->释放）并减去结束时间从开始时间开始，现在您可以知道按键的持续时间

**编辑：**这是我在原始帖子中所指内容的一个简单示例：[http ://ronnieswietek.com/piano/piano_example.swf](http://ronnieswietek.com/piano/piano_example.swf)

来源：[http ://ronnieswietek.com/piano/piano_example.fla](http://ronnieswietek.com/piano/piano_example.fla)

# android - 如何在 Android ListView 中显示两个 ArrayList 值？

> ID：13438112
> 
> 赞同：0
> 
> 时间：2012-11-18T06:51:12.670
> 
> 标签：android

```
package com.in2em.hotel;

import java.util.ArrayList;

import android.annotation.SuppressLint;
import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.util.Log; 
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.CheckedTextView;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;

@SuppressLint("ParserError") 
```

在列表视图中显示两个数组列表的活动

```
 public class OrderActivity extends ListActivity {
    ArrayList<String> data,rate;
    OrderAdapter orderAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.order);
        Bundle extras = getIntent().getExtras(); 
        data = extras.getStringArrayList("list");
        rate = extras.getStringArrayList("rate");
        for(String str : data)  {
            Log.d("data", str);

        }
        for(String str1 : rate) {
            Log.d("data", str1);

        } 
```

数据和速率是两个数组列表

```
 String[] captionArray = (String[]) data.toArray(
                new String[data.size()]);
        String[] rateArray = (String[]) rate.toArray(
                new String[rate.size()]);
        R.layout.order_list,R.id.itemname, captionArray)); 
```

如何在 listview 中设置两个数组列表？我只能设置一个数组列表？

```
 orderAdapter = new OrderAdapter(
                OrderActivity.this, R.layout.order_list,
                captionArray); 
```

设置列表适配器

```
 setListAdapter(orderAdapter);

        return ;
    } 
```

自定义列表适配器

```
 private class OrderAdapter extends BaseAdapter {
        String[] items;

        public OrderAdapter(Context context, int textViewResourceId,
                String[] items) {
            this.items = items;
        } 
```

返回视图

```
 public View getView(final int POSITION, View convertView,
                ViewGroup parent) {

            TextView tvNumber,tvName,tvRate;
            EditText etQty,etRemarks;

            View view = convertView; 
```

膨胀

```
 if (view == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                view = vi.inflate(R.layout.order_list, null);

            } 
                tvName = (TextView) findViewById(R.id.itemname);
            tvRate = (TextView) findViewById(R.id.itemrate);

            tvName.setText(data.get(POSITION));
            tvRate.setText(rate.get(POSITION));

            return view; 
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return items.length;
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:22:14.060

更改您的构造函数以接受两个 ArrayList 并将它们存储在适配器中：

```
private class OrderAdapter extends BaseAdapter {
    ArrayList<String> data;
    ArrayList<String> rate;

    public OrderAdapter(Context context, ArrayList<String> data, ArrayList<String> rate) {
        this.data = data;
        this.rate = rate;
    } 

    // Use the same getView(), for now

    public int getCount() {
        return data.size(); // rate must be the same size as data!
    }

    public String getItem(int position) {
        return data.get(position);
    } 
```

并像这样使用它：

```
 orderAdapter = new OrderAdapter(this, data, rate); 
```

你也应该观看这个关于适配器和 ListViews 的[Android 讲座](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)以加快速度`getView()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:34:29.013

```
List<String> firstList = new ArrayList<String>();
List<String> secondList = new ArrayList<String>();
List<String> thirdList;
firstList.add("...");
secondList.add("...");

thirdList = new ArrayList<String>(firstList);
thirdList.addAll(secondList); 
```

适用`thirdList`于您的适配器。

# android - 无法将 android 连接到 WCF 服务

> ID：13438116
> 
> 赞同：0
> 
> 时间：2012-11-18T06:51:55.077
> 
> 标签：android, wcf

我试图将 android 应用程序连接到 WCF 服务，但它不工作。WCF 托管在 IIS 服务器上。我不知道哪个是错误的 android 应用程序或 WCF 服务本身。WCF 服务在测试时工作正常。这是我的 WCF 服务代码。

```
 [ServiceContract(Namespace = "http://services.example.com")]
public interface IEmployeeInfo
{
    [OperationContract]
    [WebInvoke(
        BodyStyle = WebMessageBodyStyle.Wrapped,
        Method="Get", 
        ResponseFormat = WebMessageFormat.Json,
        UriTemplate = "GetEmployee/?key={employeeId}" )]
    Employee GetEmployee(int employeeId);
} 
```

这是我正在访问 WCF 服务的 android 代码

```
try {

        DefaultHttpClient client = new DefaultHttpClient();
        // http get request

        HttpGet request = new HttpGet(EMPLOYEE_SERVICE_URI + evEmployeeId.getText());
        Log.d("Connect","Connecting to Server 0");
        Log.d("Connect","Connecting to Server 1");
        // set the hedear to get the data in JSON formate
        request.setHeader("Accept", "application/json");
        request.setHeader("Content-type", "application/json");

        //get the response
        HttpResponse response = client.execute(request);

        HttpEntity entity = response.getEntity();

        //if entity contect lenght 0, means no employee exist in the system with these code
        if(entity.getContentLength() != 0) {
            // stream reader object
            Reader employeeReader = new InputStreamReader(response.getEntity().getContent());
            //create a buffer to fill if from reader
            char[] buffer = new char[(int) response.getEntity().getContentLength()];
            //fill the buffer by the help of reader
            employeeReader.read(buffer);
            //close the reader streams
            employeeReader.close();
            Log.d("Connect","Connecting to Server 2");
            //for the employee json object
            JSONObject employee =  new JSONObject(new String(buffer));

            //set the text of text view
            tvEmployeeCode.setText("Code: " + employee.getString("EmployeeId"));
            tvName.setText("Name: " + employee.getString("FirstName") + " " + employee.getString("LastName"));
            tvAddress.setText("Address: " + employee.getString("Address"));
            tvBloodGroup.setText("Blood Group: " + employee.getString("BloodGroup"));

        }
        else {

            text.setTextSize(R.string.text);

        }

    }
    catch (Exception e) {

     Log.d("Error",e.getMessage());
e.printStackTrace();
} 
```

任何帮助表示赞赏。

当我从 android 模拟器应用程序崩溃请求 WCF 服务时。这里是日志聊天。

```
11-17 22:56:55.566: W/dalvikvm(1174): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-17 22:56:55.616: E/AndroidRuntime(1174): FATAL EXCEPTION: main
11-17 22:56:55.616: E/AndroidRuntime(1174): java.lang.NullPointerException: println needs a message
11-17 22:56:55.616: E/AndroidRuntime(1174):     at android.util.Log.println_native(Native Method)
11-17 22:56:55.616: E/AndroidRuntime(1174):     at android.util.Log.d(Log.java:138)
11-17 22:56:55.616: E/AndroidRuntime(1174):     at com.yyousuf.sample.EmployeeInfoActivity.onClick 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:07:26.243

有一个异常被抛出，但是因为你正在捕获所有异常，所以你没有详细信息。由于某种原因，抛出的异常没有消息集，这就是为什么你在这一行得到 NullPointerException

```
Log.d("Error",e.getMessage()); 
```

请发布有关真正引发的异常的更多信息。

# tfs - 在没有解决方案的情况下将项目添加到tfs

> ID：13438119
> 
> 赞同：0
> 
> 时间：2012-11-18T06:52:39.413
> 
> 标签：tfs

我想在没有解决方案的情况下将项目添加到 TFS？我必须创建一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:50:59.803

您绝对可以只将项目添加到 TFS，而无需添加解决方案。只需选择该项目，然后单击 File->Source Control->Add selected projects to Source Control

# meteor - 将 JQuery 添加到流星并在没有错误的情况下编写它

> ID：13438127
> 
> 赞同：1
> 
> 时间：2012-11-18T06:53:47.680
> 
> 标签：meteor

我将 JQuery 列表包添加到流星并识别它。但是，当我在应用程序主 html 文件的标签中编写 JQuery 代码时，`<script></script>`它无法识别它（但我没有收到错误）。当我在我的流星应用程序 .js 文件中编写 JQuery 代码时，我收到一个错误。所以我很困惑，一旦添加了 javascript 或添加的库包（如 JQuery），应该如何编写它们。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T12:50:49.483

您需要将通用 javascript 放入容器中以将其包含在特定的 Meteor 模板中。

对于您可能习惯使用的一般 onLoad 脚本，您可以在呈现模板后将该代码封装在函数中示例：

```
Template.*templatename*.rendered = function()
{
    //do this only on template load
    if(!this._rendered) {this._rendered = true;console.log('Template onLoad');}
    //everything outside if is done every time the template is re-drawn (meteor sends an update)
} 
```

# internet-explorer - 哪些浏览器支持自动更新版本？

> ID：13438128
> 
> 赞同：0
> 
> 时间：2012-11-18T06:53:49.030
> 
> 标签：internet-explorer, firefox, google-chrome, browser, safari

我正在构建/部署应用程序。但我需要计划未来。那么，我需要知道哪些浏览器目前支持自动更新版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:58:38.543

该功能最早由[谷歌浏览器引入，后来被](https://www.google.com/intl/en/chrome/browser/)[火狐](http://firefox.com)逐步采用。

更新：这个功能现在在 IE10 中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:03:12.573

`Google Chrome`并`Firefox`已实施。IE 正在计划实施它。

只需通过此[链接](http://www.webmonkey.com/2011/12/microsofts-new-automatic-update-plan-could-mean-the-end-of-ie-6/)

# visual-studio-2010 - 调试时的 OpenGL 异常

> ID：13438129
> 
> 赞同：-1
> 
> 时间：2012-11-18T06:54:01.433
> 
> 标签：visual-studio-2010, opengl, graphics, unhandled-exception, fractals

这是绘制谢尔宾斯基三角形的分形几何的代码，没有错误，但在调试时出现未处理的异常：

```
Unhandled exception at 0x77e115de in LastFractLast.exe: 0xC0000005: Access violation writing location 0x000000a8. 
```

它会打开一个名为 glu.h 的文件并指向这一行：

```
static void APIENTRY glutInit_ATEXIT_HACK(int *argcp, char **argv) { __glutInitWithExit(argcp, argv, exit); } 
```

这是我的代码：

```
 #include <glut.h>
GLfloat v[3][2]={{-1.0, -0.58},
{1.0, -0.58}, {0.0, 1.15}};
int n;

void triangle(GLfloat *a, GLfloat *b,
GLfloat *c)
/* display one triangle */
 {
 glVertex2fv(a);
 glVertex2fv(b);
 glVertex2fv(c);
 }
 void divide_triangle(GLfloat *a, GLfloat *b, GLfloat *c,
 int m)
 {
 /* triangle subdivision using vertex numbers */
typedef GLfloat point2[2];
  point2 v0, v1, v2;
 int j;
  if(m>0)
   {
   for(j=0; j<2; j++) v0[j]=(a[j]+b[j])/2;
   for(j=0; j<2; j++) v1[j]=(a[j]+c[j])/2;
   for(j=0; j<2; j++) v2[j]=(b[j]+c[j])/2;
   divide_triangle(a, v0, v1, m-1); 
   divide_triangle(c, v1, v2, m-1);
   divide_triangle(b, v2, v0, m-1);
    }
   else(triangle(a,b,c));
   /* draw triangle at end of recursion */
    }

     void display()
          {
       glClear(GL_COLOR_BUFFER_BIT);
glBegin(GL_TRIANGLES);
divide_triangle(v[0], v[1], v[2], n);
glEnd();
glFlush();
}

void myinit()
{
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluOrtho2D(-2.0, 2.0, -2.0, 2.0);
glMatrixMode(GL_MODELVIEW);
glClearColor (1.0, 1.0, 1.0,1.0);
glColor3f(0.0,0.0,0.0);
}
int main(int argc, char **argv)
{
n=4;
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
glutInitWindowSize(500, 500);
glutDisplayFunc(display);
myinit();
glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:05:14.423

在执行 GL 命令之前，您需要一个当前的 GL 上下文。

使用 GLUT，您需要通过创建一个窗口`glutCreateWindow()`来获取上下文：

```
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
glutInitWindowSize(500, 500);
glutCreateWindow( "Window" );
glutDisplayFunc(display);
glutMainLoop(); 
```

完全的：

```
#include <GL/glut.h>

/* display one triangle */
void triangle(GLfloat *a, GLfloat *b, GLfloat *c)
{
    glVertex2fv(a);
    glVertex2fv(b);
    glVertex2fv(c);
}

void divide_triangle(GLfloat *a, GLfloat *b, GLfloat *c, int m)
{
    /* triangle subdivision using vertex numbers */
    typedef GLfloat point2[2];
    point2 v0, v1, v2;
    int j;
    if(m>0)
    {
        for(j=0; j<2; j++) v0[j]=(a[j]+b[j])/2;
        for(j=0; j<2; j++) v1[j]=(a[j]+c[j])/2;
        for(j=0; j<2; j++) v2[j]=(b[j]+c[j])/2;
        divide_triangle(a, v0, v1, m-1); 
        divide_triangle(c, v1, v2, m-1);
        divide_triangle(b, v2, v0, m-1);
    }
    else
    {
        /* draw triangle at end of recursion */
        triangle(a,b,c);
    }
}

void display()
{
    glClearColor (1.0, 1.0, 1.0,1.0);
    glClear(GL_COLOR_BUFFER_BIT);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(-2.0, 2.0, -2.0, 2.0, -1, 1);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glColor3f(0.0,0.0,0.0);
    glBegin(GL_TRIANGLES);
    GLfloat v[3][2]=
        {
        {-1.0, -0.58},
        {1.0, -0.58}, 
        {0.0, 1.15}
        };
    divide_triangle(v[0], v[1], v[2], 4);
    glEnd();

    glFlush();
}

int main(int argc, char **argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB);
    glutInitWindowSize(500, 500);
    glutCreateWindow( "Window" );
    glutDisplayFunc(display);
    glutMainLoop();
} 
```

# android - 向内部视图/活动发送显式/隐式意图

> ID：13438132
> 
> 赞同：0
> 
> 时间：2012-11-18T06:54:51.917
> 
> 标签：android, android-intent, adb

我在这里做实验...

好的，所以我有一个具有 3 个视图的相对布局。2 个 webviews：一个在底部全宽，垂直占 20%。右侧的一个占屏幕的 30%。以及占用剩余空间的视频视图。

出于我的目的，我想使用 adb shell 命令而不是 java 来更改 videoview 中的视频。通常当我从 android shell 与应用程序交互时，它是这样的......

```
 Adb shell am start android.intent.action.MAIN com.android.browser.BrowserActivity 
```

但是，这打开了一个全新的窗口。我不想打开另一个窗口，我想与屏幕上的当前活动进行交互，但通过 android shell。

假设像在视频视图中播放不同的视频并且应用程序保持打开状态，唯一会根据命令更改的是视图中正在播放的视频。

谁能指出我正确的方向或向我展示一些可能性。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:59:50.193

您的活动应该注册一个广播接收器，该接收器将在调用时修改视图的内容。

显示活动后，您可以从控制台启动广播意图。有关 adb shell am 命令的更多信息：

[Android adb shell am 广播：错误的组件名称](https://stackoverflow.com/questions/5171354/android-adb-shell-am-broadcast-bad-component-name)

[http://www.anddev.org/using_the_am-tool_start_activities-intens_from_a_shell-t368.html](http://www.anddev.org/using_the_am-tool_start_activities-intens_from_a_shell-t368.html)

# jquery - jQuery 水平滚动（点击和动画）

> ID：13438135
> 
> 赞同：8
> 
> 时间：2012-11-18T06:55:18.453
> 
> 标签：jquery, scroll, click, jquery-animate

我有一系列 div 在水平线上浮动到无穷大。我有一个固定宽度的 div 容器，溢出：隐藏。最终，我想按下左右的 div/按钮来滚动项目（与使用滚动条相比）。

我无法让 .animate() 工作。我希望每次单击都能将列表中的项目移动过来。

它应该类似于亚马逊的“购买此商品的客户也购买了”列表，您可以以相同的方式滚动浏览该列表。我很想尝试使用 .mousedown 并让它在按住时移动（类似于真正的滚动），但想先做这个更简单的方法。

这是小提琴和代码：

[http://jsfiddle.net/stfzy/16/](http://jsfiddle.net/stfzy/16/)

HTML：

```
<div id="container">
<div id="arrowL">
</div>
<div id="arrowR">
</div>
<div id="list-container">
    <div class='list'>
        <div class='item'>
        </div>
        <div class='item'>
        </div>
        <div class='item'>
        </div>
        <div class="item">
        </div>
    </div>
</div> 
```

CSS：

```
 #container{
width:340px;
    height:50px;
}

#list-container {
overflow:hidden;    
width: 300px;  
float:left;    
}

.list{
    background:grey;
min-width:700px;
    float:left;
}

#arrowR{
background:yellow;
    width:20px;
    height:50px;
    float:right;
    cursor:pointer;
}

#arrowL{
background:yellow;
    width:20px;
    height:50px;
    float:left;
    cursor:pointer;
}

.item{
    background:green;
width:140px;
    height:40px;
    margin:5px;
    float:left;
} 
```

jQuery

```
$(document).ready(function() {

    $('div#arrowR').click(function(){

        $('div.item').animate({'left':'-=300px'});

    });

    $('div#arrowR').click(function(){

        $('div.item').animate({'left':'+=300px'});

    });

}); 
```

任何和所有的帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-18T07:01:17.587

添加`position:relative`到`.item`，如下所示：

```
.item{
    background:green;
    width:140px;
    height:40px;
    margin:5px;
    float:left;
    position:relative; /* Put me here! */
} 
```

工作示例：http: [//jsfiddle.net/mattblancarte/stfzy/21/](http://jsfiddle.net/mattblancarte/stfzy/21/)

您的设置中还有一些错误，但这应该会让您摆脱困境。:)

编辑：：

这是解决列表在任一方向滑动太多的错误的快速解决方案：

```
$(document).ready(function() {

    var $item = $('div.item'), //Cache your DOM selector
        visible = 2, //Set the number of items that will be visible
        index = 0, //Starting index
        endIndex = ( $item.length / visible ) - 1; //End index (NOTE:: Requires visible to be a factor of $item.length... You can improve this by rounding...)

    $('div#arrowR').click(function(){
        if(index < endIndex ){
          index++;
          $item.animate({'left':'-=300px'});
        }
    });

    $('div#arrowL').click(function(){
        if(index > 0){
          index--;            
          $item.animate({'left':'+=300px'});
        }
    });

}); 
```

# xquery - 在输出流中发送非 xml 内容

> ID：13438138
> 
> 赞同：1
> 
> 时间：2012-11-18T06:56:49.797
> 
> 标签：xquery, marklogic

如何在 marklogic 服务器的 xquery 代码中发送非 xml（例如纯文本）内容？

我已经看到无论我们写什么，输出都应该是 xml 格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:45:48.213

您可以使用 xdmp:set-response-content-type 功能，例如`xdmp:set-response-content-type("text/plain")`，请参阅官方[文档](http://docs.marklogic.com/xdmp%3aset-response-content-type)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:15:59.250

XQuery 模块输出可以是 XML、文本、二进制或这三者的任意组合。这是一个有效的主模块，产生文本（技术上是一个字符串项，但如果我需要一个文本节点，我可以用`text`构造函数包装它）：

```
xquery version "1.0-ml";
"hello world" 
```

该模块产生二进制数据：

```
xquery version "1.0-ml";
binary { xs:hexBinary("deadbeef") } 
```

一个模块也可以产生一个序列：

```
xquery version "1.0-ml";
"hello", "world" 
```

# php - 如何在jsp中打印多维数组值？

> ID：13438149
> 
> 赞同：1
> 
> 时间：2012-11-18T06:59:48.447
> 
> 标签：php, arrays, jsp

在 PHP 页面中，要打印数组，我使用 print_r(); 在 jsp 中，要打印字符串，使用 out.print()。例如 ：

> `<?php print_r($_POST); ?>`

在jsp中是相等的？？？如何在jsp中打印数组值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T11:36:18.007

你可以试试

```
ObjectMapper mapper = new ObjectMapper();
 System.out.println( mapper.defaultPrettyPrintingWriter().writeValueAsString(myList) ); 
```

myList 是您的数组变量。

或发布数据尝试

```
Map<String, String[]> parameters = request.getParameterMap();
for(String parameter : parameters.keySet()) {
    if(parameter.toLowerCase().startsWith("your object name in html")) {
        String[] values = parameters.get(parameter);
        //your code here
    }
} 
```

并***导入 java.util.Map***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:30:45.517

使用 for 循环

```
String[] colors = {"red", "green", "blue"};
   for (int i = 0; i < colors.length; i++) {
      out.print("<P>" + colors[i] + "</p>");
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T07:30:59.787

你可以这样：

```
<%
    out.println(StringUtils.join(variable,"<br />");
%> 
```

如果您真的想打印 POST 变量，请点击此链接：

[从 JSP 页面获取所有参数](https://stackoverflow.com/questions/2548687/get-all-parameters-from-jsp-page)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T08:44:54.613

@todayslate 给出了一个很好的答案，只是你必须知道数组的长度。现在，您当然可以只检查长度（按`colors.length`），但我发现这样做更有吸引力：

```
String[] colors = {"red", "green", "blue"};
//suppose you have no idea how many colors are in the 
//array since you received it from another method or something
for (String color: colors) {
     out.print("<P>" + color + "</p>");
} 
```

# php - 如何在PHP中计算值范围内的百分比

> ID：13438151
> 
> 赞同：0
> 
> 时间：2012-11-18T07:00:06.947
> 
> 标签：php, algorithm, math, formula, percentage

我有一个值，我需要将其转换为给定一组规则的百分比。

```
VALUE=X 
```

X 可以是从 0 开始的任何东西

如果：

```
X > 200 
```

我的函数的结果应该是 100（百分比）。

如果：

```
X < 200 AND >= 100 
```

结果应该在 100 到 50（百分比）之间。示例：X=150 为 75%

如果：

```
X < 100 AND >= 80 
```

结果应该在 50 到 25（百分比）之间。示例：X=90 为 37.5%

而如果：

```
X < 80 
```

结果应介于 25 和 0（百分比）之间。

我在 PHP 中的方法类似于

```
if($value > 200) return 100;
if($value > 100 && $value < 200) return ???; 
```

... 等等。

在哪里？？？显然代表我不知道如何设置的公式。

有没有办法在一个公式中做到这一点？即使不是 - 这个问题的数学方法是什么？

我知道这是非常基础的，但似乎我在小学跳过了太多的数学课。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T07:09:21.913

该函数可以分段定义：

![在此处输入图像描述](../Images/3499245a2fa6786d53fc26d46731096c.png)

在图形上，这用四条不同梯度的直线来表示。虽然没有单独的部分就无法表示此功能，但实现上述功能非常容易。

在 PHP 中，这个函数可以写成：

```
function f($x) {
    if ($x >= 200)
        return 100;
    if ($x >= 100 && $x < 200)
        return 50 + 50 * (($x - 100) / 100);
    if ($x >= 80 && $x < 100)
        return 25 + 25 * (($x - 80) / 20);
    if ($x < 80)
        return 25 * ($x / 80);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:20:26.653

首先，确定你应该在哪个范围内。然后：

*   减去范围的底部。
*   除以范围的长度。
*   乘以该范围内的点差数。
*   添加范围底部的点数。

所以从 100 到 200 的 X 给出了从 100 到 50 的分数。范围的底部是 100；范围的大小是 100 (200 - 100)，分数从开头的 100 到结尾的 50，因此差值为 -50。因此`-50 * ($value - 100) / 100 + 100`会起作用，或者简化，`-0.5 * ($value - 100) + 100`或者`150 - $value * 0.5`.

再举一个例子，从 80 到 100：范围的底部是 80，范围的大小是 20，分数从 25 到 50（差值：-25）。你得到`-25 * ($value - 80) / 20 + 25`，这简化为`-1.25 * ($value - 80) + 25`或`125 - $value * 1.25`

# css - CSS 粘滞页脚

> ID：13438152
> 
> 赞同：0
> 
> 时间：2012-11-18T07:00:23.130
> 
> 标签：css

我知道这个问题已经被问过一百万次，并且有一百万篇关于它的文章。我已经尝试了几种提供的解决方案，但没有一个对我有用。我只使用 HTML/CSS 几个月的时间，所以我对它还不是很好，我希望有人能花时间帮助我。

我正在创建一个博客布局，除了页脚之外，一切似乎都运行良好。我无法让它停留在页面底部。现在它漂浮在内容的中间。我想要一个固定在页面底部的页脚，并且只有在页面上的内容很短时才可见。换句话说，我想要一个像这个网站上的页脚，而不是我可以使用 position:fixed 实现的页脚。我真的不知道我做错了什么，但就像我说的，我对这些东西很陌生。

这是我目前正在使用的代码，尽管我根据各种教程对其进行了很多更改，但对我没有任何帮助。

另外，由于我是新手，如果你们中任何更有经验的人看到与页脚无关的东西我做错了，如果你能指出我将不胜感激，这样我就可以学习如何做这些事情正确的方式。

谢谢！！

```
 <body>
    <div id="outer">
    <div id="header">
        <div id="wrap">
       <div class="logo"><a href="#"><img src="images/logo.png" /></a>
        </div><!--end logo div--!>

    </div><!--end wrap div--!>
    </div><!--end header div--!>
    <div id="wrap">
    <div id="content">

    <div class="featured_title"><a href="#">Example Title One</a></div>
    <div class="featured_category"><p>Posted in <a href="#"> News</a></p>
    </div><!--end cateogry div--!>
    <div class="featured_excerpt">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam 

    malesuada in orci ornare et porta nisi tristique. Integer sodales feugiat     </p>
    </div><!--end featured excerpt div--!>
    <div class="featured_read">
    <p><a href="#">Read More</a></p>
    </div><!--end featured_read div--!>

    <div id="post_thumbnail">
    <img src="images/sample_pic.jpg" />

    </div>
    <div id="post content">
    <div id="post_info">
    <div class="post_title">
     Example Title Two
    </div><!--end post title div--!>
    <div class="category">
    Posted in <a href="#"> Career Tips</a>
     </div>
     <div class="post_excerpt">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam malesuad
      </p>
    </div><!--end post excerpt div--!>
     <div class="read_post">
    <p><a href="#">Read More</a></p>
     </div><!--end read post div--!>
    </div><!--end post info div--!>
    <div class="divider"><img src ="images/divider.png" /></div>
    </div><!--end post content div--!>
    <div class="more_stories">
    <p><a href="#">Previous Stories</a></p>
    </div><!--end more stories div--!>

    </div>

    </div><!--end content div--!>
    </div><!--end wrap div---!>
    <div id="wrap">
     <div id="sidebar">
     <div class="job_search">
    <a href=#"><img src="images/job_search.png" /></a>
    </div>

    <div class="post_job">
    <a href="#"><img src="images/post_job.png" /></a>
     </div><!--end post_job div--!>

    </div><!--end sidebar div--!>

     </div><!--end wrap div--!>

    </div><!--end outer div--!>
    <div id="footer">

    </div><!--end footer div--!>

    </body> 
```

和 CSS

```
 html {height:100%; padding:0; height:100%; }

     body { margin: 0 0 40px; background: #f4f4f4; height:100%; }

    #wrap { margin: 0 auto; width: 940px; }

    /* Header */

    #header { width:100%; height: 50px; background: #000; repeat:x; }

    .logo { margin-left:380px; }

     /* End Header Section */

    /*main content section*/

    #content { width: 558px; padding: 15px; float:left; position:absolute; 
    padding-top150px; min-height:100%; }

    .featured_title { font-family:Georgia, serif; font-size: 1.7em; color: #4e4e4e; }

    .featured_title a { text-decoration:none; color: #4e4e4e; }

    .featured_title a:hover { text-decoration:underline; }

    .featured_category { font-weight:bold; font-family: Helvetica, sans-serif; 
    color:#4e4e4e; font-size: 1em; }

     .featured_category a{ font-weight:bold; color: #d76186; font-size: 1em;

    text-decoration:none; }

    .featured_category a:hover { color:#68acc2; }

    .featured_excerpt { color:#4e4e4e; font-family:helvetica, sans-serif; font-size:   

    .9em;}

     .featured_read a { font-weight:bold; color:#d76186; font-size: 1em;
    text-decoration: none; font-family:helvetica, sans-serif; }

     .featured_read a:hover { color:#68acc2; }

    .featured_read { border-bottom: 2px solid #4e4e4e; padding-bottom: 5px; }

    #post_thumbnail { width:300px; height:200px; padding-top:9px; position:absolute;}

     #post_info { position:relative; height:200px; width:248px; left:320px; top:15px; }

    .post_title { font-family:georgia, serif; font-size:1.2em; color: #4e4e4e; }

     .category { font-weight:bold; color: #4e4e4e; font-size:.8em; 
     font-family:helvetica, sans-serif; padding-top:3px; }

    .category a{ font-weight:bold; color:#d76186; text-decoration:none; }

     .category a:hover { color:#68acc2; }

    .post_excerpt { color:#4e4e4e; font-family:helvetica, sans-serif; font-size:.8em; }

    .read_post a { font-weight:bold; color:#d76186; font-size: .8em; 
    text-decoration:none; font-family:helvetica, sans-serif; }

    .read_post a:hover { color:#68acc2; }

     .divider { padding-top:25px; }

     .more_stories a{ text-decoration:none; font-family:helvetica; color: #d76186;}

    .more_stories a:hover {color: #68acc2;}

    /* sidebar */
    #sidebar { width:317px; left:20px; top:0; position:relative; float:right; 
     min-height:100%; }

   .job_search { padding-bottom:20px; }

    /* Footer */

    #footer { clear:both; bottom:0; background:#000; width:100%;
    height:35px; margin-top: -100px; position:relative; }

     .footer_content { font-family:helvetica, sans-serif; color: #68acc2; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:04:13.123

尝试这个：

```
#footer{position:absolute; bottom:0;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:41:22.433

我不知道这个问题是否已经解决，但我遇到了同样的问题。经过大量研究和数小时令人沮丧的编码后，我终于能够想出一个粘在任何窗口底部的页脚，即使没有足够的内容将其推到底部，最好的部分是它没有与任何内容重叠（无论窗口大小），而是停在内容的底部。

看看我的 jsfiddle

[http://jsfiddle.net/juroto/HL6Ad/](http://jsfiddle.net/juroto/HL6Ad/)

看看我是如何做到的，并随意使用代码；D

*我试着查看你的代码，但你有一个简单的答案。首先，您肯定需要修复 NullPonyPointer 指出的那些 HTML 注释。我还发现了一个需要删除的额外内容`</div>`，并且在您的CSS中需要`</div><!--end more stories div--!>``#content``padding-top150px;``padding-top: 150px;`（你忘了分号）。我认为在尝试解决您的问题时我忽略了一些其他错误，因为最后，由于某种原因，我无法让粘性页脚与您提供的代码完全正常工作。我建议从少得多的代码重新开始，然后在让粘性页脚工作后慢慢添加以前的代码。我试图使小提琴尽可能简单，并在 HTML 和 CSS 注释中留下了非常详细的说明。抱歉，我无法准确告诉您代码中要更改的内容，但希望小提琴能有所帮助！否则，我会从这里开始：*

```
<!doctype html>

    <head>

        <title>INSERT TITLE</title>

        <style>
            body {
                margin: 0;
                padding: 0;
                height: 100%;
            }
            html {
                height: 100%;
                margin: 0;
                padding: 0;
            }
            * html #wrapper {
                height:100%; 
            }
            #wrapper {
                min-height: 100%;
                position: relative;
            }
            #content {
                padding-bottom: 30px; /* ATTENTION! padding-bottom should be equal to the footer height (this keeps the footer from overlapping the content) */
                font-size: 10em; /* ATTENTION! this font-size can be deleted or changed to whatever your heart desires*/
            }
            #footer {
                position: absolute;
                width: 100%;
                clear: both;
                bottom: 0;
                padding: 0;
                margin: 0;
                /* ATTENTION! The following elements below 
                can be set to whatever your heart desires */
                height: 30px; /* REMEMBER #footer height = #content padding-bottom */
                background: #333;
            }
        </style>

    </head>

    <body>
        <div id="wrapper">
            <div id="content">INSERT CONTENT HERE</div>
            <div id="footer"></div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T07:02:49.377

这不是一个有效/正确的评论

```
 <!--end logo div--!> 
```

应该

```
<!-- end logo div --> 
```

并尝试

```
<div id="wrapper">
    <div id="main" class="clearfix">
    </div>
 </div>

<div id="footer">
</div> 
```

css

```
html, body, #wrapper{ height: 100%; }
body > #wrapper{height: auto; min-height: 100%;}
#main { padding-bottom: 150px; }  /*  same height as the footer */
#footer { 
        position: relative;
    margin-top: -150px; /* negative value of footer height */
    height: 150px;
    clear:both;} 

.clearfix:after {content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;}
.clearfix {display: inline-block;} 
```

# java - 回答是时重复方法

> ID：13438153
> 
> 赞同：1
> 
> 时间：2012-11-18T07:00:54.230
> 
> 标签：java, arrays, object, repeat, do-while

```
package homework4;
import java.util.Scanner;
public class Prog4 {
static Scanner scanner = new Scanner(System.in);
public static void main(String[] args)
{   CreditCardNumber[] cred1;
    CreditCardNumber cred2 = getInput();
    Display("The complete number from your input:", cred2);
    cred1 = getInputArray();
    DisplayArray(cred1);
    TryAnother(cred1);
}

public static CreditCardNumber getInput() {
    String ID;
    String accNum;
    CreditCardNumber tempCred;      
    System.out.printf("Please enter issuer ID:");
    ID = scanner.next();
    System.out.printf("Please enter account number:");
    accNum = scanner.next();
    tempCred = new CreditCardNumber(ID, accNum);

    return tempCred;
}
public static void Display(String ch, CreditCardNumber cred2)
{

    System.out.println(ch);
    System.out.println(cred2.toString().replaceAll(".{4}", "$0   "));       
}

public static CreditCardNumber[] getInputArray()
{
    CreditCardNumber[] tempArray;
    String tempID;
    int size;       
    System.out.printf("Please enter size of the aray:");
    size = scanner.nextInt();
    if(size < 1)
    {
        size = 1;
    }
    tempArray = new CreditCardNumber[size];
    System.out.printf("Please enter issuer ID:");
    tempID = scanner.next();
    for(int i = 0; i < tempArray.length; i++)
    {
        tempArray[i] = new CreditCardNumber();
        tempArray[i].CreateCred(tempID);
    }

    return tempArray;
}

public static void DisplayArray(CreditCardNumber[] cred1)
{
    for(int i = 0; i< cred1.length; i++)
    {
        Display("Credit Card # " + i+":" + '\n', cred1[i]);
    }
    System.out.println();
}

public static boolean TryAnother(CreditCardNumber[] cred1)   // pass cred1 as a parameter
{
    String s;
    System.out.printf("Get more credit card numbers? (n for no):");
    s = scanner.next();
    if(s.charAt(0) != 'N' || s.charAt(0) != 'n')
    {

        do
        {
            TryAnother(cred1);
            cred1 = getInputArray();
            DisplayArray(cred1);                
        }while(s.charAt(0) != 'N' || s.charAt(0) != 'n');       
    }
    return false;   // put the return statement here
}
} 
```

嗨，我正在尝试从我的 TryAnother 方法中的 getInputArray 方法重复，我尝试使用 do-while 循环但它说 cred1 在 do while 循环中未定义但是当我尝试为 cred1 创建本地对象时它给了我错误代码无法访问 如果 do-while 循环工作，输出应该是这样的

```
Enter a credit card issuer number: 321321
Enter an account number: 654654654
The complete number from your input: 
3213 2165 4654 6549

Enter the number of elements in the array: 7
Enter an issuer ID# (6 digits): 789789

Credit Card # 0: 
7897 8931 4062 1219

Credit Card # 1: 
7897 8920 2125 3522

Credit Card # 2: 
7897 8971 9793 0944

Credit Card # 3: 
7897 8979 3216 3090

Credit Card # 4: 
7897 8995 0461 8493

Credit Card # 5: 
7897 8948 8037 5909

Credit Card # 6: 
7897 8966 0251 9953

Get more credit card numbers? (n for no): ok

Enter the number of elements in the array: 3
Enter an issuer ID# (6 digits): 345345

Credit Card # 0: 
3453 4576 6705 1666

Credit Card # 1: 
3453 4548 1163 5684

Credit Card # 2: 
3453 4563 8807 0419 
```

获取更多信用卡号码？（n 表示否）：当然

任何人都可以建议一种方法来执行 do-while 循环吗？先感谢您

我已经编辑了代码，因为当我输入 no 时，由于某种原因它正在执行重复部分，进程不会终止

就像是：

Please enter issuer ID:321321 Please enter account number:654654654 The complete number from your input: 3213 2165 4654 6549
Please enter size of the aray:7 Please enter issuer ID:789789 Credit Card # 0:

7897 8985 6852 9257
Credit Card # 1:

7897 8917 0678 9958
Credit Card # 2:

7897 8900 5781 0934
Credit Card # 3:

7897 8949 2244 6098
Credit Card # 4:

7897 8941 3828 4895
Credit Card # 5:

7897 8965 9233 5006
Credit Card # 6:

7897 8981 8442 5880

```
Get more credit card numbers? (n for no):n
Get more credit card numbers? (n for no):n
Get more credit card numbers? (n for no):no
Get more credit card numbers? (n for no): 
```

as you can see when I enter no it keep repeat the same sentence what i want is for it to repeat from enter the array size sentence how can i do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:53:00.123

I'm not sure what are you expecting as the output of this program. Since you asked about a compile error, I have edited your code and removed two compile errors.

1.  `cred1` is not defined in the `TryAnother()`. Hence you have to pass it as a parameter. Like this `TryAnother(CreditCardNumber[] cred1)`
2.  In the `TryAnother()` method, you have put a `return true` statement in side a if block, but before a do-while loop. This will gives you a unreachable statement compile error, since there is no further execution after executing a `return` statement in a method. So you have to put the `return true` statement after the do-while loop.

Here is the corrected code.

```
`import java.util.Scanner;
public class Prog4 {

static Scanner scanner = new Scanner(System.in);

public static void main(String[] args)
{   CreditCardNumber[] cred1;
    CreditCardNumber cred2 = getInput();
    Display("The complete number from your input:", cred2);
    cred1 = getInputArray();
    DisplayArray(cred1);
    TryAnother(cred1);         // pass variable cred1 as a parameter
}

public static CreditCardNumber getInput() {
    String ID;
    String accNum;
    CreditCardNumber tempCred;

    System.out.printf("Please enter issuer ID:");
    ID = scanner.next();
    System.out.printf("Please enter account number:");
    accNum = scanner.next();
    tempCred = new CreditCardNumber(ID, accNum);
    return tempCred;
}

public static void Display(String ch, CreditCardNumber cred2)
{
    System.out.println(ch);
    System.out.println(cred2.toString().replaceAll(".{4}", "$0   "));

}

public static CreditCardNumber[] getInputArray()
{
    CreditCardNumber[] tempArray;
    String tempID;
    int size;

    System.out.printf("Please enter size of the aray:");
    size = scanner.nextInt();
    if(size < 1)
    {
        size = 1;
    }
    tempArray = new CreditCardNumber[size];
    System.out.printf("Please enter issuer ID:");
    tempID = scanner.next();
    for(int i = 0; i < tempArray.length; i++)
    {
        tempArray[i] = new CreditCardNumber();
        tempArray[i].CreateCred(tempID);
    }
    return tempArray;
}

public static void DisplayArray(CreditCardNumber[] cred1)
{
    for(int i = 0; i< cred1.length; i++)
    {
        Display("Credit Card # " + i+":" + '\n', cred1[i]);
    }
    System.out.println();
}

public static boolean TryAnother(CreditCardNumber[] cred1)   // pass cred1 as a parameter
{
    String s;
    System.out.printf("Get more credit card numbers? (n for no):");
    s = scanner.next();
    if(s.charAt(0) != 'N' || s.charAt(0) != 'n')
    {
        do
        {

            cred1 = getInputArray();
        }while(s.charAt(0) != 'N' || s.charAt(0) != 'n');
    }
    return false;   // put the return statement here
}

}

// A dummy class
class CreditCardNumber{
  String ID;
  String accNum;
  public CreditCardNumber(){
  }
  public CreditCardNumber(String ID,String accNum){
    this.ID = ID;
    this.accNum = accNum;
  }
  public void CreateCred(String tempID){
    ID = tempID;
  }
}` 
```

* * *

 `## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:04:46.930

You should define `cred1` as a global static method, outside of the `main` routine.

Or pass `cred1`, as a parameter to `getInputArray(...)`, which in turn pass them further, to `TryAnother(...)`.`

# c# - 控制台应用程序相互通信的推荐方式是什么？

> ID：13438154
> 
> 赞同：2
> 
> 时间：2012-11-18T07:00:57.617
> 
> 标签：c#, console-application, msmq

我得到了一个在不同机器上运行的用 C# 编写的控制台应用程序系统。我使用 MSMQ。

我的问题是，如何让我的控制台应用程序相互通信？

我问是因为我想创建一个新的控制台应用程序，其他应用程序可以查询该应用程序以了解 MSMQ 中的消息数量。

编辑1：感谢您的回复和评论！关于要求，我估计大约 10-50/秒的查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:05:57.433

您需要使用管道来实现此目的：请参阅[命名管道和匿名管道](http://msdn.microsoft.com/en-us/library/system.io.pipes.pipestream.aspx)

管道的工作原理是这样的：宿主应用程序（启动控制台应用程序的那个）必须创建一个管道来捕获 concole 应用程序的 std 输出，并创建另一个管道来写入控制台应用程序的 std 输入。

我给你的链接中有很多代码示例

这里还有一个代码示例（使用现有的管道 StandardInput 和 StandardOutput）：它启动了一个 cmd.exe 控制台，但它是一个层：不是实际的控制台......自己看：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.IO;
using System.Threading;

namespace ConsoleApplication1
{
    class Program
    {
        private static StreamReader reader;

        static void Main(string[] args)
        {
            Process cmd = new Process();

            cmd.StartInfo.FileName = "cmd.exe";
            cmd.StartInfo.RedirectStandardInput = true;
            cmd.StartInfo.RedirectStandardOutput = true;
            cmd.StartInfo.UseShellExecute = false;

            cmd.Start();

            reader = cmd.StandardOutput;
            StreamWriter writer = cmd.StandardInput;

            Thread t = new Thread(new ThreadStart(writingThread));

            t.Start();

            //Just write everything we type to the cmd.exe process
            while (true) writer.Write((char)Console.Read());

        }

        public static void writingThread()
        {
            //Just write everything cmd.exe writes back to our console
            while (true) Console.Write((char)reader.Read());
        }
    }
} 
```

您可以通过将 StreamReader 和 StreamWriter 替换为端口连接（套接字）缓冲区来实现相同的结果，以便在两个进程之间进行远程通信 [http://msdn.microsoft.com/en-us/library/system.net.sockets.socket .aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)

建议保护通信以减少入侵的可能性

这是通过套接字进行通信的示例……现在它在一个程序中运行，但一切都在不同的线程上，如果通信要在两台不同的机器上进行，它将起作用：服务器是控制进程 cmd 的那个。 exe 并且客户端是查看器/编写器

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.IO;
using System.Threading;
using System.Net.Sockets;
using System.Net;

namespace ConsoleApplication1
{
    class Program
    {
        private static StreamReader reader;
        private static StreamWriter writer;

        static void Main(string[] args)
        {
            //Server initialisation 

            Process cmdServer = new Process();

            cmdServer.StartInfo.FileName = "cmd.exe";
            cmdServer.StartInfo.RedirectStandardInput = true;
            cmdServer.StartInfo.RedirectStandardOutput = true;
            cmdServer.StartInfo.UseShellExecute = false;

            cmdServer.Start();

            reader = cmdServer.StandardOutput;
            writer = cmdServer.StandardInput;

            Thread t1 = new Thread(new ThreadStart(clientListener));
            t1.Start();
            Thread t2 = new Thread(new ThreadStart(clientWriter));
            t2.Start();
            Thread t3 = new Thread(new ThreadStart(serverListener));
            t3.Start();
            Thread t4 = new Thread(new ThreadStart(serverWriter));
            t4.Start();

        }

        public static void clientWriter()
        {
            Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

            Int32 size = 0;
            Byte[] buff = new Byte[1024];

            sock.Connect(IPAddress.Parse("127.0.0.1"), 4357);
            Console.WriteLine("clientWriter connected");

            while (true)
            {
                String line = Console.ReadLine();
                line += "\n";
                Char[] chars = line.ToArray();
                size = chars.Length;
                if (size > 0)
                {
                    buff = Encoding.Default.GetBytes(chars);
                    //Console.WriteLine("Sending \"" + new String(chars, 0, size) + "\"");
                    sock.Send(buff, size, 0);
                }
            }
        }

        /// <summary>
        /// Local client that listens to what the server sends on port 4356
        /// </summary>
        public static void clientListener()
        {
            Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

            sock.Bind(new IPEndPoint(IPAddress.Any, 4356));
            sock.Listen(0);

            Int32 size = 0;
            Byte[] buff = new Byte[1024];
            Char[] cbuff = new Char[1024];

            while (true)
            {
                Console.WriteLine("clientListener Waiting for connection");
                sock = sock.Accept();
                Console.WriteLine("clientListener Connection accepted " + ((sock.Connected)?"Connected" : "Not Connected"));

                while ((size = sock.Receive(buff)) > 0)
                {
                    for (int i = 0; i < size; i++) cbuff[i] = (Char)buff[i];
                    Console.Write(cbuff, 0, size);
                }

                sock.Close();

            }
        }

        /// <summary>
        /// Remote server that listens to what the client sends on port 4357
        /// </summary>
        public static void serverListener()
        {
            Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

            sock.Bind(new IPEndPoint(IPAddress.Any, 4357));
            sock.Listen(0);

            Int32 size = 0;
            Byte[] buff = new Byte[1024];
            Char[] cbuff = new Char[1024];

            while (true)
            {
                Console.WriteLine("serverListener Waiting for connection");
                sock = sock.Accept();
                Console.WriteLine("serverListener Connection accepted " + ((sock.Connected) ? "Connected" : "Not Connected"));

                while ((size = sock.Receive(buff)) > 0)
                {
                    for (int i = 0; i < size; i++) cbuff[i] = (Char)buff[i];
                    //Console.WriteLine("Received \"" + new String(cbuff,0,size) + "\"");
                    writer.Write(cbuff, 0, size);
                }

            }
        }

        /// <summary>
        /// Remote server that writes the output of the colsole application through the socket
        /// </summary>
        public static void serverWriter()
        {
            Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);

            Int32 size = 0;
            Byte[] buff = new Byte[1024];
            Char[] cbuff = new Char[1024];

            sock.Connect(IPAddress.Parse("127.0.0.1"), 4356);

            Console.WriteLine("serverWriter connected");

            while (true)
            {
                size = reader.Read(cbuff, 0, 1024);
                if (size > 0)
                {
                    for (int i = 0; i < size; i++) buff[i] = (Byte)cbuff[i];
                    sock.Send(buff, 0, size, 0);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:30:36.853

**可测试和可扩展 - 可以轻松更改为在计算机之间工作。**

你有几个方法。使用 WCF 可以轻松实现“命名管道”。它很好，因为它非常可测试。

**最佳性能**，您可以使用内存映射文件[http://weblogs.asp.net/gunnarpeipman/archive/2009/06/21/net-framework-4-0-using-memory-mapped-files.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2009/06/21/net-framework-4-0-using-memory-mapped-files.aspx)

他们有惊人的表现。但更难测试。

**最简单**- 如果您的流量非常低，您可以使用注册表。C# 中有一个 Regisrty 类，它的线程安全且快速。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T07:55:29.713

WCF。WCF，WCF，WCF，WCF。

不要费心重新发明轮子，只需使用 WCF 进行通信，让它担心细节（无论是使用管道还是其他机制）。

# ruby-on-rails - 运行服务器时缺少回形针

> ID：13438155
> 
> 赞同：2
> 
> 时间：2012-11-18T07:01:09.680
> 
> 标签：ruby-on-rails, paperclip

我有回形针的问题

```
sudo rails server
Could not find paperclip-3.3.1 in any of the sources
Run `bundle install` to install missing gems. 
```

但回形针已安装。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:27:25.973

它可能已安装，但对您的 gem 不可用，或者版本不兼容。从您的应用根目录运行以下命令：

```
bundle install
bundle exec rails s 
```

# java - 无法读取输入流

> ID：13438159
> 
> 赞同：-3
> 
> 时间：2012-11-18T07:01:26.110
> 
> 标签：java, servlets

以下几行是我的 servlet 的一部分，它给我一个错误“java.lang.NullPointerException”

```
 ServletContext context = getServletContext();
       InputStream kapil= context.getResourceAsStream("Desktop/images.jpg");
//the above line generates the exception
    BufferedImage bufferedImage = ImageIO.read(kapil); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:38:55.367

您编辑了您的帖子。你确定它是 a`NullPointerException`而不是 a`IllegalArgumentException`吗？

JavaDocs：

`null`如果找不到您要查找的文件，[ServletContext.getResourceAsStream()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourceAsStream%28java.lang.String%29)将返回。

[ImageIO.read()](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#read%28java.io.InputStream%29)`IllegalArgumentExeception`当参数为空时抛出一个。提到`input`的可能是 ImageIO 输入参数。

我猜想确实没有找到输入文件。

那将与您的原始帖子问题相匹配。尝试以下操作：

```
ServletContext context = getServletContext();
InputStream kapil= context.getResourceAsStream("Desktop/images.jpg");
if (kapil != null){
    //the above line generates the exception
    BufferedImage bufferedImage = ImageIO.read(kapil);
} else {
   // Use a logging framework if you have it.
   System.out.println("The input stream is null!");
} 
```

# wpf - ComboBox 绑定需要不同的 Datacontexts

> ID：13438163
> 
> 赞同：0
> 
> 时间：2012-11-18T07:02:24.120
> 
> 标签：wpf

我对 WPF 相对较新，我被困在 VMMV 环境中看起来相对常见的场景中。它以设置组合框的数据上下文为中心。

我有一个视图模型

*   字符串属性
*   XmlDataProvider 属性。

我的计划是使用 XmlDataProvider 填充组合框项，字符串属性将绑定到组合框的 SelectedItem。

在我的 XAML 中，顶级网格将 DataContext 设置为 ViewModel。在网格中，我有一个组合框，定义如下

```
<ComboBox x:Name="CategoryCombo" HorizontalAlignment="Left" Height="30" 
Margin="54,70,0,0" VerticalAlignment="Top" Width="233"  
ItemsSource="{Binding XPath=/OccupationCategory/@name}" 
DataContext="{Binding myProvider}"/> 
```

该列表正在正确填充。我的问题是，为了让 XmlDataProvider 正常工作，我需要将组合框的 DataContext 绑定到我的 Viewmodel 中的 XMLDataProvider 属性。

据我所知，这意味着我现在无法将 SelectedItem 绑定到我的 ViewModel 中的 String 属性。这将要求我将 Datacontext 设置回视图模型。

笔记。我确实尝试了 XAML 的各种变体，这些变体不会强迫我将整个组合框的 dataContext 设置为 XmlDataProvider，但没有一个起作用。下面的 XAML 未能填充列表。从绑定错误看来，在这种情况下，数据源仍然指向视图模型，而不是 XMLDataProvider

```
<ComboBox x:Name="CategoryCombo" HorizontalAlignment="Left" Height="30" 
Margin="54,70,0,0" VerticalAlignment="Top" Width="233"  
ItemsSource="{Binding myProvider, XPath=/OccupationCategory/@name}" /> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:53:07.067

无论如何，您不必只绑定到 DataContext，一种方法是绑定到网格 dataContext。

```
SelectedValue="{Binding ElementName=MyGrid, Path=DataContext.YourStringProperty}" 
```

# java - SelectedRow 更改，当按下向上或向下时，JTable

> ID：13438169
> 
> 赞同：0
> 
> 时间：2012-11-18T07:03:31.177
> 
> 标签：java, swing, jtable, jframe, tablerowsorter

我有一个 JTable。我想当我按下或按下键盘时，JTable 中的行排序器也会改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T07:17:42.807

*   必须添加`KeyBinding`到`JTableHeader`

*   有三种状态`ASCENDING`，`DESCENDING`和`UNSORTED`

`RowSorter`关于和 `KeyStroke`来自的简单示例`F8`

![在此处输入图像描述](../Images/35d92eb7d5abd6ab0d11f3a7706b0c25.png) ![在此处输入图像描述](../Images/fd16a3ee2cd4e6be9392a1f01578ffd4.png)

```
import java.awt.*;
import java.awt.event.*;
import java.util.Arrays;
import java.util.ArrayList;
import java.util.List;
import javax.swing.*;
import javax.swing.table.*;
import javax.swing.RowSorter.SortKey;

class SelectedColumnTest {

    private JPopupMenu popup = new JPopupMenu();
    private JTableHeader header;
    private Object selectedColumn = null;
    private String[] columnNames = {"String", "Integer", "Boolean"};
    private Object[][] data = {{"aaa", 12, true}, {"bbb", 5, false}, {"CCC", 92, true}};
    private TableModel model = new DefaultTableModel(data, columnNames) {

        private static final long serialVersionUID = 1L;

        @Override
        public Class<?> getColumnClass(int column) {
            return getValueAt(0, column).getClass();
        }
    };
    private JTable table = new JTable(model);

    public JComponent makeUI() {
        table.setRowSorter(new TableRowSorter<TableModel>(model) {

            @Override
            public void toggleSortOrder(int column) {
            }
        });
        header = table.getTableHeader();
        header.getActionMap().put("toggleSortOrder2", new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                e.setSource(table);
                table.getActionMap().get("focusHeader").actionPerformed(e);
                if (selectedColumn != null) {
                    int i = header.getColumnModel().getColumnIndex(selectedColumn);
                    SortOrder order = SortOrder.ASCENDING;
                    List<SortKey> keys = new ArrayList<SortKey>(table.getRowSorter().getSortKeys());
                    if (!keys.isEmpty()) {
                        SortKey sortKey = keys.get(0);
                        if (sortKey.getColumn() == i && sortKey.getSortOrder() == SortOrder.ASCENDING) {
                            order = SortOrder.DESCENDING;
                        }
                    }
                    table.getRowSorter().setSortKeys(Arrays.asList(new SortKey(i, order)));
                }
                header.repaint();
            }
        });
        InputMap im = header.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_F8, 0), "toggleSortOrder2");
        header.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseClicked(MouseEvent e) {
                JTableHeader h = (JTableHeader) e.getSource();
                int i = h.columnAtPoint(e.getPoint());
                Object o = h.getColumnModel().getColumn(i).getHeaderValue();
                /*if (SwingUtilities.isRightMouseButton(e) && e.getClickCount() == 1) {
                    if (i < 0 || o == selectedColumn) {
                        selectedColumn = null;
                        popup.show(e.getComponent(), e.getX(), e.getY());
                        return;
                    }
                    selectedColumn = o;
                } else*/ if (SwingUtilities.isLeftMouseButton(e) && e.getClickCount() == 1) {
                    if (i < 0 || o == selectedColumn) {
                        selectedColumn = null;
                        return;
                    }
                    selectedColumn = o;
                    h.requestFocusInWindow();
                }
            }
        });
        final TableCellRenderer hr = table.getTableHeader().getDefaultRenderer();
        header.setDefaultRenderer(new TableCellRenderer() {

            @Override
            public Component getTableCellRendererComponent(JTable t, Object v,
                    boolean isS, boolean hasF, int row, int col) {
                return (v == selectedColumn) ? hr.getTableCellRendererComponent(
                        t, v, true, true, row, col) : hr.getTableCellRendererComponent(
                        t, v, false, false, row, col);
            }
        });
        header.setToolTipText("Sorting by F8");
        JPanel p = new JPanel(new BorderLayout());
        p.add(new JScrollPane(table));
        createPopupMenu();
        return p;
    }

    private void createPopupMenu() {
        popup = new JPopupMenu();
        JMenuItem myMenuItem1 = new JMenuItem("cccccccccccccccccccccc");
        JMenuItem myMenuItem2 = new JMenuItem("bbbbbbbbbbbbbbbbbbbbbb");
        popup.add(myMenuItem1);
        popup.add(myMenuItem2);
        MouseListener popupListener = new PopupListener(popup);
        header.addMouseListener(popupListener);
    }

    private class PopupListener extends MouseAdapter {

        private JPopupMenu popup;

        PopupListener(JPopupMenu popupMenu) {
            popup = popupMenu;
        }

        @Override
        public void mousePressed(MouseEvent e) {
            maybeShowPopup(e);
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            maybeShowPopup(e);
        }

        private void maybeShowPopup(MouseEvent e) {
            if (e.isPopupTrigger()) {
                popup.show(e.getComponent(), e.getX(), e.getY());
            }
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }

    public static void createAndShowGUI() {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        f.getContentPane().add(new SelectedColumnTest().makeUI());
        f.setSize(320, 240);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

# sql - Ruby: Return data grouped by multiple columns

> ID：13438172
> 
> 赞同：0
> 
> 时间：2012-11-18T07:03:50.350
> 
> 标签：sql, ruby-on-rails, ruby, hashmap, hashtable

I'm trying group data for a web service.

The web service is running on Ruby on Rails and I'm working in my API controller (lets call it the index action of my projects_controller.

The table schema looks like this (the data types and example has been changed for NDA reasons). Unfortunately, the example here suggests that I break employee and projects into different tables, but please overlook that for now. This is the data that I am given:

```
COLUMNS:
employee, e_id, company, hire_date, project_name, project_due_date

ROWS:
John, 12345, XYZ, 01-01-2001, Project_A, 12-31-2012
John, 12345, XYZ, 01-01-2001, Project_B, 03-15-2013
John, 12345, XYZ, 01-01-2001, Project_C, 06-25-2013
Jane, 98765, XYZ, 05-22-2003, Project_Q, 01-15-2013
Jane, 98765, XYZ, 05-22-2003, Project_W, 02-25-2013
Jane, 98765, XYZ, 05-22-2003, Project_E, 08-01-2013 
```

In order to reduce data transfer, I would like to return the above as follows:

```
[
    {
        "employee":"John",
        "e_id":"12345",
        "company":"XYZ",
        "hire_date":"01-01-2001",
        "projects":[
                     { "project_name":"Project_A", "project_due_date":"12-31-2012" },
                     { "project_name":"Project_B", "project_due_date":"03-15-2013" },
                     { "project_name":"Project_C", "project_due_date":"06-25-2013" }
                   ]
    },
    {
        "employee":"Jane",
        "e_id":"98765",
        "company":"XYZ",
        "hire_date":"05-22-2003",
        "projects":[
                     { "project_name":"Project_Q", "project_due_date":"01-15-2013" },
                     { "project_name":"Project_W", "project_due_date":"02-25-2013" },
                     { "project_name":"Project_E", "project_due_date":"08-01-2013" }
                   ]
    }
] 
```

I can't seem to figure out the best way to group my SQL query results (rows) into the organized hash(es) that I have in the ideal data. I imagine I need some .each and hashes to post-process the data returned by my SQL call, but I can't seem to figure out the "Ruby" way (I'm also not a seasoned Ruby developer, so any reference links would also be appreciated so I can read up on the solution).

How can I accomplish this?

[EDIT]

I am performing a SQL query on the Project object. My controller is as follows:

```
def index
   sql = "SELECT employee, e_id, company, hire_date, project_name, project_due_date
     FROM projects
     AND created_at = (SELECT created_at FROM projects ORDER BY created_at DESC LIMIT 1)
     ORDER BY company, employee, project_due_date"

   result = Project.find_by_sql(sql)
   respond_with(result)
end 
```

The data I am getting back is a bunch of Project objects in the following format

RUBY DEBUGGER:

```
(rdb:2) result
[#<Project employee: "John", e_id: 12345, company: "XYZ", hire_date: "01-01-2001", project_name: "Project_A", project_due_date: "12-31-2012">,
 #<Project employee: "John", e_id: 12345, company: "XYZ", hire_date: "01-01-2001", project_name: "Project_B", project_due_date: "03-15-2013">,
 #<Project employee: "John", e_id: 12345, company: "XYZ", hire_date: "01-01-2001", project_name: "Project_C", project_due_date: "06-25-2013">,
 #<Project employee: "Jane", e_id: 98765, company: "XYZ", hire_date: "05-22-2003", project_name: "Project_Q", project_due_date: "01-15-2013">,
 #<Project employee: "Jane", e_id: 98765, company: "XYZ", hire_date: "05-22-2003", project_name: "Project_W", project_due_date: "02-25-2013">,
 #<Project employee: "Jane", e_id: 98765, company: "XYZ", hire_date: "05-22-2003", project_name: "Project_E", project_due_date: "08-01-2013">] 
```

[EDIT 2]

I know I can resolve this problem in a very naive, non-Ruby way, but I'd like to know the proper way to get it working. A basic solution could consist of iterating through the result array and parsing out the data row by row, saving the employee data to a temp hash and their project data to an array of hashes. When the iteration comes to a new employee, save the data for the previous employee data in an array and reset the temp array/hashes for the next employee. Very ugly, but very possible.

However, there MUST be a Ruby way. Please help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:32:41.643

To produce the grouped data in the requested form:

```
grouped_data = data.group_by do |project|
  [project.employee, project.e_id, project.company, project.hire_date]
end.map do |k, v|
  { 
    "employee"  => k[0],
    "e_id"      => k[1],
    "company"   => k[2],
    "hire_date" => k[3],

    "projects" => v.map do |p|
      {
        "project_name"     => p.project_name,
        "project_due_date" => p.project_due_date
      }
    end
  }
end 
```

And finally use `to_json` to produce the JSON formatted version, e.g.:

```
grouped_data.to_json 
```

# c# - 遍历 DGV 中的特定 col 并比较字符串值

> ID：13438174
> 
> 赞同：0
> 
> 时间：2012-11-18T07:04:39.840
> 
> 标签：c#, datagrid, datagridview, loops

我有 2 个数据网格视图，第一个数据网格`1st col or Index 0`和第二个数据网格`1st col or Index 0`。我如何遍历 datagridviews 中的特定 col 并查找字符串值，如果它与列表匹配然后转到函数。

我的方法不起作用。我怎样才能做到这一点？

```
private void b_calculate_Click(object sender, EventArgs e)
{           
    List<string> value = new List<String>() { "AE0", "AT1", "AT2", "AT3"};
    value = new List<string>(datagridview1.Columns[0].Index);
    List<string> value2 = new List<String>() { "BE0", "BT1", "BT2", "BT3"};
    value2 = new List<string>(datagridview2.Columns[0].Index);

     //First Combination
    if((value.ToString() == "AT1" || value.ToString() == "AE0" || 
         value.ToString() == "AT2")
          && 
         (value2.ToString() == "BT1" || value2.ToString() == "BE0"))
    { 
        gottoFunction1();
    }
    //Second Combination
    if((value.ToString() == "AT1" || value.ToString() == "AT2" )
            && 
           (value2.ToString() == "BT1" || value2.ToString() == "BT2"))
    { 
        gottoFunction2();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:57:07.757

这是一个例程，它遍历两个`DataGridView`s 中的所有可用行并执行您的方法中显示的处理：

```
private void b_calculate_Click(object sender, EventArgs e)
{
    for (var i = 0; i < dataGridView1.RowCount; i++)
    {
        if (dataGridView2.RowCount <= i)
            break;

        var cellFromDG1 = dataGridView1.Rows[i].Cells[0];
        var cellFromDG2 = dataGridView1.Rows[i].Cells[0];

        if (cellFromDG1.Value == null || cellFromDG2.Value == null)
        {
            // this could be the empty row that allows you to
            // enter a new record
            continue;
        }

        var value = cellFromDG1.Value.ToString();
        var value2 = cellFromDG2.Value.ToString();

        if ((value == "AT1" || value == "AE0" || value == "AT2") &&
                (value2 == "BT1" || value2 == "BE0"))
        {
            gottoFunction1();
        }

        if ((value == "AT1" || value == "AT2") &&
            (value2 == "BT1" || value2 == "BT2"))
        {
            gottoFunction2();
        }
    }
} 
```

# rubygems - 您可以在使用一个或多个 Gem 的同时部署 JRuby 吗？

> ID：13438178
> 
> 赞同：1
> 
> 时间：2012-11-18T07:05:25.750
> 
> 标签：rubygems, jruby

在进行了一些谷歌搜索之后，我得出的结论是，我非常不了解 JRuby 和 Gems 之间的关系。我正在 netbeans 中用 JRuby 开发一个程序。我知道您只能在 JRuby 中使用纯粹用 Ruby 编写的 gem（我假设 netbeans JRuby 获得的 Gem 只是这些类型的 gem）。

我的问题是，如果我在程序中使用 gem，它会正确部署吗？目标计算机将只有 Java JRE，无法下载 JRuby 或 gems。

我应该完全避免使用 gems，还是将 gem 编译成 java 字节码，或者我还能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:53:35.003

JRuby 是一个 ruby​​ 实现，您确实可以像使用 MRI 一样使用 gems。

gems 可以在 ruby​​ 中实现，在这种情况下，ruby 代码将由 JRuby 执行并根据需要进行 JIT 处理，就像您自己的 JRuby 代码一样；在 Java 中，在这种情况下它已经是 Java 字节码；甚至在 C 中，因为 JRuby 具有 C 扩展支持，但它们的使用更多“<a href="http://blog.headius.com/2010/07/what-jruby-c-extension-support-means-to .html" rel="nofollow">危险的"。

如何将 gems 与应用程序打包在很大程度上取决于您如何部署它。您可以将它们复制到一个文件夹中，然后将该文件夹添加到`LOAD_PATH`. 如果您使用类似[warbler](https://github.com/jruby/warbler)或[rawr](http://rawr.rubyforge.org/)的库，它们会为您将 gem 打包到您的应用程序中。如果您使用导轨，您也可以`bundler`像平时使用 MRI 一样使用。

# jquery - jQuery用div替换图像并将图像设置为背景

> ID：13438180
> 
> 赞同：3
> 
> 时间：2012-11-18T07:05:45.953
> 
> 标签：jquery, html, css

我有一个图像 div .. 例如：

```
<div class="image-container">
    <img width="174" height="174" src="http://mysite.com/images/portfolio/p1.jpg" class="image-style" typeof="foaf:Image">
    <img width="174" height="174" src="http://mysite.com/images/portfolio/p2.jpg" class="image-style" typeof="foaf:Image">
    <img width="174" height="174" src="http://mysite.com/images/portfolio/p3.jpg" class="image-style" typeof="foaf:Image">
    <img width="174" height="174" src="http://mysite.com/images/portfolio/p4.jpg" class="image-style" typeof="foaf:Image">
</div> 
```

我想使用 jQuery 遍历每个图像并使其成为 div 然后将图像指定为背景图像......像这样：

```
<div class="image-container">
        <div style="background-image:url(http://mysite.com/images/portfolio/p1.jpg)"><span>image</span></div>
        <div style="background-image:url(http://mysite.com/images/portfolio/p2.jpg)"><span>image</span></div>
        <div style="background-image:url(http://mysite.com/images/portfolio/p3.jpg)"><span>image</span></div>
        <div style="background-image:url(http://mysite.com/images/portfolio/p4.jpg)"><span>image</span></div>
</div> 
```

我知道如何为一个人执行此操作，但不确定浏览父 div ( `image-container`) 中的所有图像并转换它们的最佳方法。

任何帮助将不胜感激。C

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T07:24:23.433

您可以使用`replaceWith`方法：

```
$('.image-container img').replaceWith(function(i, v){
    return $('<div/>', {
        style: 'background-image: url('+this.src+')',
        html: '<span>image</span>'
    })
}) 
```

[http://jsfiddle.net/FD9gV/](http://jsfiddle.net/FD9gV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:23:48.220

请试试这个；`:)` [http://jsfiddle.net/x5HhV/](http://jsfiddle.net/x5HhV/)

[jQuery更改背景图像](https://stackoverflow.com/questions/7832140/jquery-change-background-image)

希望这符合原因`:)`

API：[http ://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)

**代码**

```
$("div.image-container > img").each(function(index) {
    index = index + 1
    $(this).replaceWith('<div style="background-image:url(http://mysite.com/images/portfolio/p' + index + '.jpg)"><span>image</span></div>');

    alert(index + ' HTML is now changed to => ' + $("div.image-container").html());

});

​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T07:13:27.833

Oh well to do through each you can always do 哦，做好每一件事

```
$('div.image-container img').each( function(i,o){
    // function for one of your img tags
    // which is accessible easily via $(o), e.g.
    $(o).replaceWith('<div style="background:url(' + $(o).attr('src')+')"><span>image</span></div>');

}); 
```

# .net - 相对 url 到新的完整 url

> ID：13438182
> 
> 赞同：2
> 
> 时间：2012-11-18T07:05:59.040
> 
> 标签：.net, vb.net, winforms, url, relative-url

我有一个 basu uri 和一个正在尝试从中创建新的亲戚。[我确实尝试了这里](https://stackoverflow.com/questions/3836644/c-sharp-convert-relative-to-absolute-links-in-html-string)的示例，但似乎有一个错误。如果我有一个 baseUrl 作为

`http://ww.baseurl.com/somedir`我尝试创建一个绝对路径添加

`/login.php`或`login.php`使用

`uriReturn = New Uri(baseUri, relativeUri)`，我明白了

`http://ww.baseurl.com/login.php`代替

`http://ww.baseurl.com/somedir/login.php`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:09:24.613

`http://ww.baseurl.com/somedir`和之间没有区别`http://ww.baseurl.com/somefile`。因此，当您使用来自该地址的相对 URI 时，它将假定 URI 的文件部分将被替换。为了表明这`somedir`是一个目录名称，并用作以下查询的基本 URI，它应该以斜杠结尾：`http://ww.baseurl.com/somedir/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:10:16.107

构造函数中的第一个参数`Uri`是基本 URI，它只是主机部分，此后的所有内容都需要在第二个参数中（包括在您的情况下为“somedir”）。

```
uriReturn = NewUri(baseUri, "somedir/login.php") 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/9hst1w91.aspx](http://msdn.microsoft.com/en-us/library/9hst1w91.aspx)

# c# - 如何将以下类对象转换为 xml？

> ID：13438185
> 
> 赞同：2
> 
> 时间：2012-11-18T07:07:18.880
> 
> 标签：c#, xml, class

我有以下课程。（SIMModel、Product、Item）

```
public class SIMModel
{
    public Product Product { get; set; }
}

public class Product
{
    public List<Item> Items { get; set; }
}

public class Item
{
    [XmlAttribute("ID")]
    public String ID { get; set; }
    [XmlAttribute("Name")]
    public String Name { get; set; }

    public Child_Item Child_Item { get; set; }
    public Parent_Item Parent_Item { get; set; }
}

public class Child_Item
{
    [XmlAttribute("ID")]
    public String ID { get; set; }
} 
```

我想制作这个 XML

```
 <SIMModel>
  <Product>
   <Item ID="N" Name="N-1">
    <Child_Item ID="N-1-1">
   </Item>
  </Proudct>
 </SIMModel> 
```

如何使用上层类制作模拟 XML？我不知道如何包装每个类..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:15:41.533

I made a simple Serialize method that serializes to string and removes the namespaces.

```
private static void Main(string[] args)
{
    string result = Serialize(new SIMModel
    {
        Product = new Product
        {
            Items = new List<Item>
            {
                new Item
                {
                    ID = "N",
                    Name = "N-1",
                    Child_Item = new Child_Item {ID = "N-1-1"}
                }
            }
        }
    });
    Console.WriteLine(result);
}

public static string Serialize<T>(T value)
{
    if (value == null)
    {
        return null;
    }
    //Create our own namespaces for the output
    XmlSerializerNamespaces ns = new XmlSerializerNamespaces();

    //Add an empty namespace and empty value
    ns.Add("", "");

    XmlSerializer serializer = new XmlSerializer(typeof (T));

    XmlWriterSettings settings = new XmlWriterSettings
    {
        Encoding = new UnicodeEncoding(false, false),
        Indent = true,
        OmitXmlDeclaration = true
    };

    using (StringWriter textWriter = new StringWriter())
    {
        using (XmlWriter xmlWriter = XmlWriter.Create(textWriter, settings))
        {
            serializer.Serialize(xmlWriter, value, ns);
        }
        return textWriter.ToString();
    }
} 
```

Output:

```
<SIMModel>
  <Product>
    <Items>
      <Item ID="N" Name="N-1">
        <Child_Item ID="N-1-1" />
      </Item>
    </Items>
  </Product>
</SIMModel> 
```

# android - 如何在 Green-DAO 中使用 LoaderManager

> ID：13438188
> 
> 赞同：4
> 
> 时间：2012-11-18T07:08:24.377
> 
> 标签：android, android-loadermanager, greendao

我在我当前的应用程序中使用 GreenDAO，并希望有一个与数据库连接的[LoaderManager](https://developer.android.com/reference/android/app/LoaderManager.html)，以便动态监控数据库的更改和更新。

我在 Android 文档中看到，`ContentProvider`当您的应用程序只有一个内部 SQLite DB（这是我所拥有的）时，不建议使用 a 但是，我真的想实现[观察者模式](https://en.wikipedia.org/wiki/Observer_pattern)以实时更改 UI根据数据库中的更新。

我注意到为了使用 LoaderManager，我需要为 CursorLoader 提供一个 URI。

我的问题是，在任何地方都有使用这个的示例代码吗？

如何为 Green-DAO 创建 LoaderManager？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:43:56.663

您不要将 ContentProvider 和 Loaders 与 greenDAO 一起使用。目前，这些技术不相交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-24T04:53:49.303

是的，您可以编写一个自定义加载程序，当您将数据保存在数据库中时，您必须手动通知数据库更改。为此，您可以使用广播接收器、绿色机器人事件总线等。请参阅下面的代码

自定义消息加载器类在收到事件总线通知时加载数据。 **MessageListLoader.java**

```
public class MessageListLoader extends AsyncTaskLoader<List<Message>> {
    private List<Message> mMessages;
    private long mGroupId;
    private Context mContext;

    public MessageListLoader(Context context, long groupId) {
        super(context);
        mGroupId = groupId;
    }

    private IMobileService getMobileService() {
        return MobileServiceImpl.getInstance(mContext);
    }

    @Override
    public List<Message> loadInBackground() {
        return getMobileService().getMessagesByGroupId(mGroupId);
    }

    @Override
    public void deliverResult(List<Message> newMessageList) {
        if (isReset()) {
            mMessages = null;
            return;
        }
        List<Message> oldMessageList = mMessages;
        mMessages = newMessageList;

        if (isStarted()) {
            super.deliverResult(newMessageList);
        }

        // Invalidate the old data as we don't need it any more.
        if (oldMessageList != null && oldMessageList != newMessageList) {
            oldMessageList = null;
        }
    }

    /**
     * The OnEvent method will called when new message is added to database.
     *
     * @param event
     */
    @Subscribe
    public void onEvent(NewMessageEvent event) {
        // reload data from data base
        forceLoad();
    }

    @Override
    protected void onStartLoading() {
        if (mMessages != null) {
            // If we currently have a result available, deliver it
            // immediately.
            deliverResult(mMessages);
        }
        if (!EventBus.getDefault().isRegistered(this)) {
            EventBus.getDefault().register(this);
        }
    }

    @Override
    protected void onReset() {
        mMessages = null;
        EventBus.getDefault().unregister(this);
    }

} 
```

移动服务类用于提供所有与数据库相关的服务。

**MobileServiceImpl.java**

```
public class MobileServiceImpl implements IMobileService {

    private static final String TAG = "MobileServiceImpl";
    private static final String DATABASE_NAME = "demo.db";
    private static IMobileService instance = null;
    private DaoSession mDaoSession;

    private MobileServiceImpl(Context context) {

        DaoMaster.DevOpenHelper helper = new DaoMaster.DevOpenHelper(context, DATABASE_NAME, null);
        SQLiteDatabase db = helper.getWritableDatabase();
        DaoMaster daoMaster = new DaoMaster(db);
        mDaoSession = daoMaster.newSession();
    }

    public static IMobileService getInstance(Context context) {
        if (instance == null) {
            instance = new MobileServiceImpl(context);
        }
        return instance;
    }

    private MessageDao getMessageDao() {
        return mDaoSession.getMessageDao();
    }
/**
 * The saveMessage() method is used to save given message into database.
 *
 * @param message  Specifies the message object to be saved.
 * @param notifyUi Specifies the boolean flag to notify the change in database to ui.
 * @return Saved message id.
 */
    @Override
    public long saveMessage(Message message, boolean notifyUi) {
        long id = getMessageDao().insert(message);
        if (notifyUi)
            EventBus.getDefault().post(new NewMessageEvent(id));
        return id;
    }

    @Override
    public List<Message> getMessagesByGroupId(long groupId) {
        return getMessageDao()
                .queryBuilder()
                .where(MessageDao.Properties.GroupId.eq(groupId))
                .orderDesc(MessageDao.Properties.Id).list();
    }

    @Override

    public Message getMessageById(long messageId) {
        return getMessageDao().load(messageId);
    }
} 
```

[从这里下载示例项目](https://github.com/waleedsarwar86/LoaderWithGreenDaoDemo)

# android - 不同选项卡中的 Android WebView

> ID：13438189
> 
> 赞同：4
> 
> 时间：2012-11-18T07:08:27.363
> 
> 标签：android, tabs, webview, swipe

我正在开发一个带有“android.support.v4.view.ViewPager”的项目。有 2 个选项卡，在每个选项卡中我想显示不同的 WebView。这是其中一个选项卡的代码及其布局：

**TabOne.java**

```
public class TabOne extends Fragment
{
 WebView myWebView;
 @Override
    public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
        View view = inflater.inflate(R.layout.tabone, container, false);
            WebView myWebView = (WebView) view.findViewById(R.id.webview);
    myWebView.loadUrl("file:///android_asset/help/index.html");
    return view;
}
} 
```

**tabone.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<WebView  xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/webview"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent" />

</LinearLayout> 
```

问题是在第一个选项卡中，WebView 正确加载。在另一个与声明完全相同的选项卡上，我无法聚焦元素，有时我会得到一些强制关闭。如果我在出现错误的第二个选项卡上，并且将方向切换为横向，则第二个选项卡已完美加载，但是当我切换到第一个选项卡时出现错误。这是 LogCat 错误：

```
11-18 09:00:37.460: E/webcoreglue(29444): Should not happen: no rect-based-test nodes found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:55:37.597

这似乎是Android 4.1（也许更高版本）中的[或中](http://code.google.com/p/android/issues/detail?id=42518)[的一个错误。`ViewPager``WebView`](http://code.google.com/p/android/issues/detail?id=42518)

`WebView`唉，在寻呼机的第二页或后续页上，我没有解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T04:32:15.653

在 Java 中，创建**MyWebView**作为**WebView**的**子类**

 **```
public class MyWebView extends WebView {

    public MyWebView(Context context) {
        super(context);
    }

    public MyWebView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        onScrollChanged(getScrollX(), getScrollY(), getScrollX(), getScrollY());
        return super.onTouchEvent(event);
    }
} 
```

在布局 xml 中，使用**MyWebView** *而不是* **WebView**

```
<your.package.MyWebView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/web_view"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T12:10:55.457

我有`WebView`一个内部并通过扩展类`ViewPager`覆盖来解决这个问题。`onTouchEvent()``WebView`

这是我的代码：

```
@Override public boolean onTouchEvent(MotionEvent event) { if (event.getAction() == MotionEvent.ACTION_DOWN) {
requestFocusFromTouch(); } return super.onTouchEvent(event); } 
```

干杯!**

# c# - 有没有一种简单的方法可以在 C# 中避免或停止 FileSystemWatcher 两次引发事件？

> ID：13438190
> 
> 赞同：0
> 
> 时间：2012-11-18T07:08:28.037
> 
> 标签：c#, .net, winforms, filesystemwatcher

我想知道如何`FileSystemWatcher`在 C# 中避免或停止两次引发事件？我有一个解决方案，每次都会检测文件夹中是否有新创建的 xml 文件。我使用记事本创建 xml 文件来测试我的应用程序，但它从列表框中显示两次。

我该如何解决这个问题？

这是我的代码：

```
private void fileSystemWatcher1_Created(object sender, System.IO.FileSystemEventArgs e)
    {
        try
        {
            fileSystemWatcher1.EnableRaisingEvents = false;
            listBox1.Items.Add(e.FullPath);
        }

        finally
        {
            fileSystemWatcher1.EnableRaisingEvents = true;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        DialogResult dialogSelectFolder = folderBrowserDialog1.ShowDialog();
        if (dialogSelectFolder.ToString() == "OK")
        {
            textBox1.Text = folderBrowserDialog1.SelectedPath;
            button2.Enabled = true;
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        button1.Enabled = false;
        button2.Enabled = false;
        button3.Enabled = true;
        fileSystemWatcher1.EnableRaisingEvents = true;
        fileSystemWatcher1.Path = textBox1.Text;
        fileSystemWatcher1.Filter = "*.xml";
    }

    private void button3_Click(object sender, EventArgs e)
    {
        button1.Enabled = true;
        button3.Enabled = false;
        textBox1.Text = "";
        fileSystemWatcher1.EnableRaisingEvents = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-29T10:01:17.930

我自己两次偶然发现了这个问题，我创建了一个类来帮助你一次只获得一个事件。当文件未处于读取模式时（例如复制文件时），您也可能会收到错误事件。

您必须创建一个队列并将所有事件存储在那里，如果时间间隔过去，则引发适当的事件。

不幸的是，这不是一个简单的功能，因此我将包含完整的代码。

```
using System;
using System.IO;
using System.Timers;
using System.Collections;
using System.ComponentModel;

namespace menelabs.core
{
/// <summary>
/// This class wraps FileSystemEventArgs and RenamedEventArgs objects and detection of duplicate events.
/// </summary>
internal class DelayedEvent
{
    private readonly FileSystemEventArgs _args;

    /// <summary>
    /// Only delayed events that are unique will be fired.
    /// </summary>
    private bool _delayed;

    public DelayedEvent(FileSystemEventArgs args)
    {
        _delayed = false;
        _args = args;
    }

    public FileSystemEventArgs Args
    {
        get
        {
            return _args;
        }
    }

    public bool Delayed
    {
        get
        {
            return _delayed;
        }
        set
        {
            _delayed = value;
        }
    }

    public virtual bool IsDuplicate(object obj)
    {
        DelayedEvent delayedEvent = obj as DelayedEvent;
        if (delayedEvent == null)
            return false; // this is not null so they are different
        FileSystemEventArgs eO1 = _args;
        RenamedEventArgs reO1 = _args as RenamedEventArgs;
        FileSystemEventArgs eO2 = delayedEvent._args;
        RenamedEventArgs reO2 = delayedEvent._args as RenamedEventArgs;
        // The events are equal only if they are of the same type (reO1 and reO2
        // are both null or NOT NULL) and have all properties equal.        
        // We also eliminate Changed events that follow recent Created events
        // because many apps create new files by creating an empty file and then
        // they update the file with the file content.
        return ((eO1 != null && eO2 != null && eO1.ChangeType == eO2.ChangeType
            && eO1.FullPath == eO2.FullPath && eO1.Name == eO2.Name) &&
            ((reO1 == null & reO2 == null) || (reO1 != null && reO2 != null &&
            reO1.OldFullPath == reO2.OldFullPath && reO1.OldName == reO2.OldName))) ||
            (eO1 != null && eO2 != null && eO1.ChangeType == WatcherChangeTypes.Created
            && eO2.ChangeType == WatcherChangeTypes.Changed
            && eO1.FullPath == eO2.FullPath && eO1.Name == eO2.Name);
    }
}

/// <summary>
/// This class wraps a FileSystemWatcher object. The class is not derived
/// from FileSystemWatcher because most of the FileSystemWatcher methods
/// are not virtual. The class was designed to resemble FileSystemWatcher class
/// as much as possible so that you can use FileSystemSafeWatcher instead
/// of FileSystemWatcher objects.
/// FileSystemSafeWatcher will capture all events from the FileSystemWatcher object.
/// The captured events will be delayed by at least ConsolidationInterval milliseconds in order
/// to be able to eliminate duplicate events. When duplicate events are found, the last event
/// is droped and the first event is fired (the reverse is not recomended because it could
/// cause some events not be fired at all since the last event will become the first event and
/// it won't fire a if a new similar event arrives imediately afterwards).
/// </summary>
internal class FileSystemSafeWatcher
{
    private readonly FileSystemWatcher _fileSystemWatcher;

    /// <summary>
    /// Lock order is _enterThread, _events.SyncRoot
    /// </summary>
    private readonly object _enterThread = new object(); // Only one timer event is processed at any given moment
    private ArrayList _events;

    private Timer _serverTimer;
    private int _consolidationInterval = 1000; // milliseconds

    #region Delegate to FileSystemWatcher

    public FileSystemSafeWatcher()
    {
        _fileSystemWatcher = new FileSystemWatcher();
        Initialize();
    }

    public FileSystemSafeWatcher(string path)
    {
        _fileSystemWatcher = new FileSystemWatcher(path);
        Initialize();
    }

    public FileSystemSafeWatcher(string path, string filter)
    {
        _fileSystemWatcher = new FileSystemWatcher(path, filter);
        Initialize();
    }

    /// <summary>
    /// Gets or sets a value indicating whether the component is enabled.
    /// </summary>
    /// <value>true if the component is enabled; otherwise, false. The default is false. If you are using the component on a designer in Visual Studio 2005, the default is true.</value>
    public bool EnableRaisingEvents
    {
        get
        {
            return _fileSystemWatcher.EnableRaisingEvents;
        }
        set
        {
            _fileSystemWatcher.EnableRaisingEvents = value;
            if (value)
            {
                _serverTimer.Start();
            }
            else
            {
                _serverTimer.Stop();
                _events.Clear();
            }
        }
    }
    /// <summary>
    /// Gets or sets the filter string, used to determine what files are monitored in a directory.
    /// </summary>
    /// <value>The filter string. The default is "*.*" (Watches all files.)</value>
    public string Filter
    {
        get
        {
            return _fileSystemWatcher.Filter;
        }
        set
        {
            _fileSystemWatcher.Filter = value;
        }
    }
    /// <summary>
    /// Gets or sets a value indicating whether subdirectories within the specified path should be monitored.
    /// </summary>
    /// <value>true if you want to monitor subdirectories; otherwise, false. The default is false.</value>
    public bool IncludeSubdirectories
    {
        get
        {
            return _fileSystemWatcher.IncludeSubdirectories;
        }
        set
        {
            _fileSystemWatcher.IncludeSubdirectories = value;
        }
    }
    /// <summary>
    /// Gets or sets the size of the internal buffer.
    /// </summary>
    /// <value>The internal buffer size. The default is 8192 (8K).</value>
    public int InternalBufferSize
    {
        get
        {
            return _fileSystemWatcher.InternalBufferSize;
        }
        set
        {
            _fileSystemWatcher.InternalBufferSize = value;
        }
    }
    /// <summary>
    /// Gets or sets the type of changes to watch for.
    /// </summary>
    /// <value>One of the System.IO.NotifyFilters values. The default is the bitwise OR combination of LastWrite, FileName, and DirectoryName.</value>
    /// <exception cref="System.ArgumentException">The value is not a valid bitwise OR combination of the System.IO.NotifyFilters values.</exception>
    public NotifyFilters NotifyFilter
    {
        get
        {
            return _fileSystemWatcher.NotifyFilter;
        }
        set
        {
            _fileSystemWatcher.NotifyFilter = value;
        }
    }
    /// <summary>
    /// Gets or sets the path of the directory to watch.
    /// </summary>
    /// <value>The path to monitor. The default is an empty string ("").</value>
    /// <exception cref="System.ArgumentException">The specified path contains wildcard characters.-or- The specified path contains invalid path characters.</exception>
    public string Path
    {
        get
        {
            return _fileSystemWatcher.Path;
        }
        set
        {
            _fileSystemWatcher.Path = value;
        }
    }
    /// <summary>
    /// Gets or sets the object used to marshal the event handler calls issued as a result of a directory change.
    /// </summary>
    /// <value>The System.ComponentModel.ISynchronizeInvoke that represents the object used to marshal the event handler calls issued as a result of a directory change. The default is null.</value>
    public ISynchronizeInvoke SynchronizingObject
    {
        get
        {
            return _fileSystemWatcher.SynchronizingObject;
        }
        set
        {
            _fileSystemWatcher.SynchronizingObject = value;
        }
    }
    /// <summary>
    /// Occurs when a file or directory in the specified System.IO.FileSystemWatcher.Path is changed.
    /// </summary>
    public event FileSystemEventHandler Changed;
    /// <summary>
    /// Occurs when a file or directory in the specified System.IO.FileSystemWatcher.Path is created.
    /// </summary>
    public event FileSystemEventHandler Created;
    /// <summary>
    /// Occurs when a file or directory in the specified System.IO.FileSystemWatcher.Path is deleted.
    /// </summary>
    public event FileSystemEventHandler Deleted;
    /// <summary>
    /// Occurs when the internal buffer overflows.
    /// </summary>
    public event ErrorEventHandler Error;
    /// <summary>
    /// Occurs when a file or directory in the specified System.IO.FileSystemWatcher.Path is renamed.
    /// </summary>
    public event RenamedEventHandler Renamed;

    /// <summary>
    /// Begins the initialization of a System.IO.FileSystemWatcher used on a form or used by another component. The initialization occurs at run time.
    /// </summary>
    public void BeginInit()
    {
        _fileSystemWatcher.BeginInit();
    }
    /// <summary>
    /// Releases the unmanaged resources used by the System.IO.FileSystemWatcher and optionally releases the managed resources.
    /// </summary>
    public void Dispose()
    {
        Uninitialize();
    }
    /// <summary>
    /// Ends the initialization of a System.IO.FileSystemWatcher used on a form or used by another component. The initialization occurs at run time.
    /// </summary>
    public void EndInit()
    {
        _fileSystemWatcher.EndInit();
    }
    /// <summary>
    /// Raises the System.IO.FileSystemWatcher.Changed event.
    /// </summary>
    /// <param name="e">A System.IO.FileSystemEventArgs that contains the event data.</param>
    protected void OnChanged(FileSystemEventArgs e)
    {
        if (Changed != null)
            Changed(this, e);
    }
    /// <summary>
    /// Raises the System.IO.FileSystemWatcher.Created event.
    /// </summary>
    /// <param name="e">A System.IO.FileSystemEventArgs that contains the event data.</param>
    protected void OnCreated(FileSystemEventArgs e)
    {
        if (Created != null)
            Created(this, e);
    }
    /// <summary>
    /// Raises the System.IO.FileSystemWatcher.Deleted event.
    /// </summary>
    /// <param name="e">A System.IO.FileSystemEventArgs that contains the event data.</param>
    protected void OnDeleted(FileSystemEventArgs e)
    {
        if (Deleted != null)
            Deleted(this, e);
    }
    /// <summary>
    /// Raises the System.IO.FileSystemWatcher.Error event.
    /// </summary>
    /// <param name="e">An System.IO.ErrorEventArgs that contains the event data.</param>
    protected void OnError(ErrorEventArgs e)
    {
        if (Error != null)
            Error(this, e);
    }
    /// <summary>
    /// Raises the System.IO.FileSystemWatcher.Renamed event.
    /// </summary>
    /// <param name="e">A System.IO.RenamedEventArgs that contains the event data.</param>
    protected void OnRenamed(RenamedEventArgs e)
    {
        if (Renamed != null)
            Renamed(this, e);
    }
    /// <summary>
    /// A synchronous method that returns a structure that contains specific information on the change that occurred, given the type of change you want to monitor.
    /// </summary>
    /// <param name="changeType">The System.IO.WatcherChangeTypes to watch for.</param>
    /// <returns>A System.IO.WaitForChangedResult that contains specific information on the change that occurred.</returns>
    public WaitForChangedResult WaitForChanged(WatcherChangeTypes changeType)
    {
        //TODO
        throw new NotImplementedException();
    }
    /// <summary>
    /// A synchronous method that returns a structure that contains specific information on the change that occurred, given the type of change you want to monitor
    /// and the time (in milliseconds) to wait before timing out.
    /// </summary>
    /// <param name="changeType">The System.IO.WatcherChangeTypes to watch for.</param>
    /// <param name="timeout">The time (in milliseconds) to wait before timing out.</param>
    /// <returns>A System.IO.WaitForChangedResult that contains specific information on the change that occurred.</returns>
    public WaitForChangedResult WaitForChanged(WatcherChangeTypes changeType, int timeout)
    {
        //TODO
        throw new NotImplementedException();
    }

    #endregion

    #region Implementation

    private void Initialize()
    {
        _events = ArrayList.Synchronized(new ArrayList(32));
        _fileSystemWatcher.Changed += new FileSystemEventHandler(this.FileSystemEventHandler);
        _fileSystemWatcher.Created += new FileSystemEventHandler(this.FileSystemEventHandler);
        _fileSystemWatcher.Deleted += new FileSystemEventHandler(this.FileSystemEventHandler);
        _fileSystemWatcher.Error += new ErrorEventHandler(this.ErrorEventHandler);
        _fileSystemWatcher.Renamed += new RenamedEventHandler(this.RenamedEventHandler);
        _serverTimer = new Timer(_consolidationInterval);
        _serverTimer.Elapsed += new ElapsedEventHandler(this.ElapsedEventHandler);
        _serverTimer.AutoReset = true;
        _serverTimer.Enabled = _fileSystemWatcher.EnableRaisingEvents;
    }

    private void Uninitialize()
    {
        if (_fileSystemWatcher != null)
            _fileSystemWatcher.Dispose();
        if (_serverTimer != null)
            _serverTimer.Dispose();
    }

    private void FileSystemEventHandler(object sender, FileSystemEventArgs e)
    {
        _events.Add(new DelayedEvent(e));
    }

    private void ErrorEventHandler(object sender, ErrorEventArgs e)
    {
        OnError(e);
    }

    private void RenamedEventHandler(object sender, RenamedEventArgs e)
    {
        _events.Add(new DelayedEvent(e));
    }

    private void ElapsedEventHandler(Object sender, ElapsedEventArgs e)
    {
        // We don't fire the events inside the lock. We will queue them here until
        // the code exits the locks.
        Queue eventsToBeFired = null;
        if (System.Threading.Monitor.TryEnter(_enterThread))
        {
            // Only one thread at a time is processing the events                
            try
            {
                eventsToBeFired = new Queue(32);
                // Lock the collection while processing the events
                lock (_events.SyncRoot)
                {
                    DelayedEvent current;
                    for (int i = 0; i < _events.Count; i++)
                    {
                        current = _events[i] as DelayedEvent;
                        if (current.Delayed)
                        {
                            // This event has been delayed already so we can fire it
                            // We just need to remove any duplicates
                            for (int j = i + 1; j < _events.Count; j++)
                            {
                                if (current.IsDuplicate(_events[j]))
                                {
                                    // Removing later duplicates
                                    _events.RemoveAt(j);
                                    j--; // Don't skip next event
                                }
                            }

                            bool raiseEvent = true;
                            if (current.Args.ChangeType == WatcherChangeTypes.Created || current.Args.ChangeType == WatcherChangeTypes.Changed)
                            {
                                //check if the file has been completely copied (can be opened for read)
                                FileStream stream = null;
                                try
                                {
                                    stream = File.Open(current.Args.FullPath, FileMode.Open, FileAccess.Read, FileShare.None);
                                    // If this succeeds, the file is finished
                                }
                                catch (IOException)
                                {
                                    raiseEvent = false;
                                }
                                finally
                                {
                                    if (stream != null) stream.Close();
                                }
                            }

                            if (raiseEvent)
                            {
                                // Add the event to the list of events to be fired
                                eventsToBeFired.Enqueue(current);
                                // Remove it from the current list
                                _events.RemoveAt(i);
                                i--; // Don't skip next event
                            }
                        }
                        else
                        {
                            // This event was not delayed yet, so we will delay processing
                            // this event for at least one timer interval
                            current.Delayed = true;
                        }
                    }
                }
            }
            finally
            {
                System.Threading.Monitor.Exit(_enterThread);
            }
        }
        // else - this timer event was skipped, processing will happen during the next timer event

        // Now fire all the events if any events are in eventsToBeFired
        RaiseEvents(eventsToBeFired);
    }

    public int ConsolidationInterval
    {
        get
        {
            return _consolidationInterval;
        }
        set
        {
            _consolidationInterval = value;
            _serverTimer.Interval = value;
        }
    }

    protected void RaiseEvents(Queue deQueue)
    {
        if ((deQueue != null) && (deQueue.Count > 0))
        {
            DelayedEvent de;
            while (deQueue.Count > 0)
            {
                de = deQueue.Dequeue() as DelayedEvent;
                switch (de.Args.ChangeType)
                {
                    case WatcherChangeTypes.Changed:
                        OnChanged(de.Args);
                        break;
                    case WatcherChangeTypes.Created:
                        OnCreated(de.Args);
                        break;
                    case WatcherChangeTypes.Deleted:
                        OnDeleted(de.Args);
                        break;
                    case WatcherChangeTypes.Renamed:
                        OnRenamed(de.Args as RenamedEventArgs);
                        break;
                }
            }
        }
    }
    #endregion
}

} 
```

您可以在以下位置找到代码： [https ://github.com/melenaos/FileSystemSafeWatcher/blob/master/FileSystemSafeWatcher.cs](https://github.com/melenaos/FileSystemSafeWatcher/blob/master/FileSystemSafeWatcher.cs)

# java - java : TreeSet Collection 和 Comparable 接口

> ID：13438191
> 
> 赞同：3
> 
> 时间：2012-11-18T07:08:35.267
> 
> 标签：java, collections

我有以下代码：我试图在 TreeSet 中插入 Item 对象，但没有得到期望的输出。

```
public class Main
{
    public static void main(String a[])
    {
        Item i1=new Item(1,"aa");
        Item i2=new Item(5,"bb");
        Item i3=new Item(10,"dd");
        Item i4=new Item(41,"xx");
        Item i5=new Item(3,"x5");
        TreeSet t=new TreeSet();    
        t.add(i1);
        t.add(i2);
        t.add(i3);
        t.add(i4);
        t.add(i5);
        System.out.println(t);      
    }
}
class Item implements Comparable<Item>
{
    String  nm;
    int price;
    public Item(int n,String nm)
    {
        this.nm=nm;
        price=n;
    }
    public int compareTo(Item i1)
    {
        if(price==i1.price)
            return 0;
        else if(price>=i1.price)
            return 1;
        else
            return 0;
    }
    public String  toString()
    {
        return "\nPrice "+price+" Name : "+nm;
    }    
} 
```

输出 ：

[价格1名称：aa，
价格5名称：bb，
价格10名称：dd，
价格41名称：xx]

`Item i5=new Item(3,"x5");`为什么没有插入？
为什么我可以在 TreeSet 中插入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T07:12:08.770

您没有`compareTo()`正确实施。这是 javadoc 的摘录：

```
Compares this object with the specified object for order. Returns a negative integer,
zero, or a positive integer as this object is less than, equal to, or greater than
the specified object. 
```

`-1`如果当前对象的价格低于您比较的对象的价格，您的实现不会返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T07:12:24.173

在你的`compareTo`方法中你应该有`else return -1;`！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T07:12:32.510

在`compareTo`替换：

```
else
        return 0; 
```

和：

```
else
        return -1; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-18T07:12:55.903

一个类的实现`Comparable`必须遵守契约：if `a.compareTo(b) < 0`then `b.compareTo(a) > 0`。你的不符合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T05:03:01.550

主要问题出在您的 compareTo 方法中。您实施了错误的逻辑。我已经修改了您的课程并在我的 Eclipse 中对其进行了测试，并提供了所需的输出。看看下面的代码。

```
import java.util.TreeSet;
public class Main
{
    public static void main(String a[])
    {
        Item i1=new Item(1,"aa");
        Item i2=new Item(5,"bb");
        Item i3=new Item(10,"dd");
        Item i4=new Item(41,"xx");
        Item i5=new Item(3,"x5");
        TreeSet<Item> t=new TreeSet<Item>();    
        t.add(i1);
        t.add(i2);
        t.add(i3);
        t.add(i4);
        t.add(i5);
        System.out.println(t);      
    }
}
class Item implements Comparable<Item>
{
    String  nm;
    int price;
    public Item(int n,String nm)
    {
        this.nm=nm;
        price=n;
    }
    public int compareTo(Item i1)
    {
        // Objects equal so no need to add 
        if(price==i1.price)
        {
            return 0;
        }
        // Object are greater
        else if(price>i1.price)
        {

            return 1;
        }
        // Object is lower
        else
        {
            return -1;
        }
    }
    public String  toString()
    {
        return "\nPrice "+price+" Name : "+nm;
    }    
} 
```

# c# - INSERT 语句冲突

> ID：13438192
> 
> 赞同：1
> 
> 时间：2012-11-18T07:09:16.053
> 
> 标签：c#, sql, database, winforms, linq-to-sql

我在 C# Winforms 2010 中的项目并使用 SQL Server express 和 Linq-to-SQL。我的项目让我例外：

> *INSERT 语句与 CHECK 约束“CK_BarCode_Num”冲突。冲突发生在数据库“Parking”、表“dbo.TBL_Cards”、列“BarCode_Num”中*

当我运行这个查询时：

```
SELECT name, definition
FROM sys.check_constraints
WHERE name = 'CK_BarCode_Num'" 
```

输出显示以下定义：

```
Name: CK_BarCode_Num    
Definition: (datalength([BarCode_Num])=(13))" 
```

但在`TBL_Cards`数据库中，类型`BarCode_Num`是`varchar(100)`，在后面的代码中，我声明`int`类型为`BarCode_Num`.

不知道在哪里设置`datalength([BarCode_Num])=(13)`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T07:36:53.170

检查约束是说您插入的任何内容`Barcode_Num`都必须恰好是 13 个字符长。

如果您尝试插入长度不超过 13 个字符的内容，我建议您查阅数据库的文档（或与设置它的人交谈）以了解应用此约束的*原因。*

我们无法为您回答这个问题，我不建议在不了解它为什么存在的情况下更改检查约束。

* * *

[`DATALENGTH`](http://msdn.microsoft.com/en-us/library/ms173486.aspx)

> 返回用于表示任何表达式的字节数。

对于`varchar`，使用的字节数与字符数对应 1-1。因为`nvarchar`你需要除以 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:14:55.907

数据类型与您定义的任何检查约束分开。您可以按照以下说明修改检查约束：http: [//msdn.microsoft.com/en-us/library/ms191273.aspx](http://msdn.microsoft.com/en-us/library/ms191273.aspx)

否则，您可以在自己的代码中执行数据验证 - Linq to SQL 不会在实体上强制执行它，但是当您尝试执行违反约束的插入时会抛出 SqlException。

# java - Java 类的输出通过 Python 脚本运行，而 Python 脚本又由 Apache Web 服务器执行

> ID：13438196
> 
> 赞同：0
> 
> 时间：2012-11-18T07:09:48.347
> 
> 标签：java, python, linux, apache

我在运行通过 Python 脚本运行的 Java 类时遇到问题，该脚本又由 Apache Web 服务器执行。

我有以下文件，可通过 Apache 网络服务器访问

脚本.cgi

```
#!/usr/bin/python

os.system("java HelloWorld")
sys.stdout.flush() 
```

我从 shell 运行脚本，它运行正常。但是，当我通过网络浏览器访问它时， os.system("java ...") 返回退出状态 1536。

知道为什么会这样吗？

这是在 Linux Mint 13 上运行的。请让我知道我可以提供哪些额外信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:27:26.890

从命令行运行脚本时，您可能设置了不同的环境变量，并且您有不同的安全内容。

确保您的网络服务器找到文件（例如，尝试使用完整路径名）并检查是否每个人都有 java 的执行权限并读取文件夹和文件（出于安全原因，我不确定这是否是个好主意） .

# javascript - 将 Jasmine 单元测试与 100 多个相同类型的测试一起使用

> ID：13438202
> 
> 赞同：5
> 
> 时间：2012-11-18T07:10:28.240
> 
> 标签：javascript, unit-testing, jasmine

我最近发现[Jasmine](http://pivotal.github.com/jasmine/)用于单元测试，它似乎是我正在做的一个很好的解决方案。但是，我正在测试大约 100 种不同的可能性，我不想一遍又一遍地编写同一行代码。

所以我制作了一个充满测试的对象，我用这些测试一遍又一遍地循环单元测试。当我运行它时，它会打印出正确数量的测试。它们都通过了，如下所示。

但是后来我将“cero”更改为“cerFOOBARBAZ”，它仍然通过，这是错误的。然后我将 0 更改为任意数字（例如 993）并且它没有通过（它不应该通过，但是所有测试都失败了。

那是怎么回事？

```
 var tests = {
        0 : "cero",
        1 : "uno",
        2 : "dos", 
        3 : "tres", 
        4 : "cuatro",
        5 : "cinco",
        6 : "seis", 
        7 : "siete",
        8 : "ocho",
        9 : "nueve",
        10 : "diez",
        11 : "once",
        12 : "doce",
        13 : "trece"

        };

describe("Numbers Return Correctly", function() {

    for(var test in tests) {
        it("Returns Correct String Based On Integer Input", function() {
            var number = parseInt(test);
            expect(number.convertNumToWord("es")).toEqual(tests[test]);
        });
    }
}); 
```

编辑：我发现了问题所在。我多次运行整个描述，而不是单个规格。

但是，当我这样做时：

```
 var tests = {
        0 : "cero",
        1 : "uno",
        2 : "dos", 
        3 : "tres", 
        4 : "cuatro",
        5 : "cinco",
        6 : "seis", 
        7 : "siete",
        8 : "ocho",
        9 : "nueve",
        10 : "diez",
        11 : "once",
        12 : "doce",
        13 : "trece"

        };

describe("Numbers Return Correctly", function() {

        //console.log(test);
        //console.log(tests[test]);
        it("Returns Correct String Based On Integer Input", function() {
            for(var test in tests) {
                var number = parseInt(test);
                expect(number.convertNumToWord("es")).toEqual(tests[test]);
            }
        });

}); 
```

*我得到了预期的输出，除了没有关于规范*没有通过的细粒度细节。那里有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T16:26:13.960

您需要为每个测试创建一个闭包，否则在您的第一个示例中，您很多时间只测试最后一个值。它的干净版本如下所示：

```
describe("Numbers Return Correctly", function() {
    var tests = {  }; // ...

    function addTest(test) {
        it("Returns Correct String Based On Integer Input " + test, function() {
            var number = parseInt(test, 10);
            expect(number.convertNumToWord("es")).toEqual(tests[test]);
        });
    }

    for(var test in tests) {
        addTest(test);
    }
}); 
```

# c - 使用宏选择文件

> ID：13438203
> 
> 赞同：-1
> 
> 时间：2012-11-18T07:10:39.400
> 
> 标签：c, macros

我有近 120 个文件，名称如下 - a1.txt,a2.txt... 我将用户的输入作为 int 输入，并使用它打开一个特定的文件。我尝试为此使用宏，但它不起作用。这是我使用的。文件是 unicode

```
#define concat(d) L"a"#d".txt" 
.
.
.
wchar_t *basefile = concat(d); 
```

当我使用 wprintf 查看 concat 生成的内容时，我发现它只读取到“a”并忽略了宏的其余部分。请在此处指出需要更正的内容，或者我是否可以使用任何替代方法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:31:59.250

如评论中所述，您不能使用编译时宏来处理在运行时获取的用户输入。

你想要的是库函数`sprintf()`：

[http://www.manpages.info/linux/sprintf.3.html](http://www.manpages.info/linux/sprintf.3.html)

对于宽字符串，您可以使用`swprintf()`：

[http://www.cplusplus.com/reference/clibrary/cwchar/swprintf/](http://www.cplusplus.com/reference/clibrary/cwchar/swprintf/)

请注意，原始文件的一个问题`sprintf()`是它不接受输出缓冲区长度的参数，并且它可能会在缓冲区末尾写入一个字符串并覆盖您的堆栈或堆。有一些变体`sprintf()`可以解决这个问题，例如`snprintf()`. 但幸运的是，宽版本`swprintf()`确实采用了指定输出缓冲区大小的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:33:06.413

如果这个数字真的是用户在运行时输入的，那么你必须用类似的东西来组成文件名`snprintf`。只有当这是一个在编译时已知的用于识别您的文件的数字（实际上是任何令牌）时，您的方法才有效。

所以像

```
#define D 42

.
.
.
wchar_t *basefile = concat(D); 
```

应该管用。

# jquery - 获取第 n 个孩子的位置到变量

> ID：13438210
> 
> 赞同：1
> 
> 时间：2012-11-18T07:11:13.563
> 
> 标签：jquery, variables, jquery-selectors

我有一张桌子：

* * *

```
<table width="160" align="center" id="my_table">
    <tbody>
       <tr>
          <td><img src="Color1.png" width="160" height="40" alt="1"></td>
       </tr>
       <tr>
          <td><img src="Color2.png" width="160" height="40" alt="2"></td>
       </tr>
       <tr>
          <td><img src="Color3.png" width="160" height="40" alt="3"></td>
       </tr>
   </tbody>
</table> 
```

* * *

我允许用户上下移动颜色块 - 有更多颜色。在过程结束时，我想知道每个 alt 的位置（哪个子位置），并使用 jQuery 将其保存到单独的变量中。我试过了：

```
$('#my_table').on('click', 'img', function() {
    var color_rated_1 = $("#my_table.tr:nth-child(1)");
    alert("color_rated_1 is " + color_rated_1);
});
$('#my_table').on('click', 'img', function() {
    var color_rated_2 = $(".tr:nth-child(2)");
    alert("color_rated_2 is " + color_rated_2);
});
$('#my_table').on('click', 'img', function() {
    var color_rated_3 = $("#my_table tr:nth-child(3)");
    alert("color_rated_3 is " + color_rated_3);
}); 
```

请注意，每一个都有点不同——在过去的很多天里，我尝试了许多其他的变化。我还查看了我找到的所有示例，但似乎没有任何效果。帮助。谢谢。瑞克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:15:37.353

迭代集合时会提供索引：

```
$("#my_table img").each(function(index, image){
    alert(image.alt + " is at position " + index);
});​ 
```

您还可以使用[`.index()`](http://api.jquery.com/index/)获取集合中的位置：

```
var $table = $("#my_table");
$table.on("click", "img", function(){
    alert($table.find("img").index(this)); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:22:12.143

这个怎么样？

```
var $table = $('#my_table').on('click', 'img', function() {
   var index = $table.find("img").index(this);

   alert( $(this).attr("src") + " is " + index);
}); 
```

[http://jsfiddle.net/YAAaE/](http://jsfiddle.net/YAAaE/)

单击图像时，它将查找表中的所有图像并使用[`.index()`方法](http://api.jquery.com/index/)评估单击图像的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T07:40:19.107

为了获取`alt`值的数组以便它们出现，您可以执行以下操作：

```
 var order = $.makeArray($("#my_table img").map(function() {
       return $(this).attr("alt");
   }));

   alert("The order is " + order.join(", ")); 
```

[http://jsfiddle.net/BUmr2/1/](http://jsfiddle.net/BUmr2/1/)

或者您可以命令创建一个由 alt 键入的对象：

```
 var indexes = {};

   $("#my_table img").each(function(i) {
       indexes[$(this).attr("alt")] = i;
   });

   alert("Index 1 is " + indexes["1"]);
   alert("Index 2 is " + indexes["2"]);
   alert("Index 3 is " + indexes["3"]); 
```

[http://jsfiddle.net/ec9HY/](http://jsfiddle.net/ec9HY/)

# c++ - 在 qDebug() 中避免换行

> ID：13438213
> 
> 赞同：18
> 
> 时间：2012-11-18T07:11:37.413
> 
> 标签：c++, qt, newline, qdebug

有时我想在 中输出一行`qDebug()`，但带有一些条件文本，例如

```
if (fontMetricsLeading < 0)
    qDebug() << "!!!";
qDebug() << fontMetricsLeading; 
```

但是，这会将它们输出到 2 个单独的行上。

有没有办法避免在每个之后添加一个新行`qDebug()`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-18T07:37:59.020

我刚刚找到了一个似乎可行的解决方案。阅读文档 qDebug() 返回一个临时 QDebug 对象，该对象在销毁时附加换行符。看来这个临时对象可以存储在一个临时变量中：

```
QDebug debug = qDebug();
if (fontMetricsLeading < 0)
    debug << "!!!";
debug << fontMetricsLeading; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T07:22:42.800

您可以使用三元运算符。

```
qDebug() << (fontMetricsLeading < 0 ? "!!!" : "") << fontMetricsLeading; 
```

另一种方法是像这样建立一个队列`QString`。

```
QString debugString;

if(fontMetricsLeading < 0)
    debugString += "!!!";

debugString += QString::number(fontMetricsLeading);

qDebug() << debugString; 
```

虽然我不明白如果只是为了调试目的，你为什么需要达到这个程度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T09:46:32.770

另一种处理你的情况的方法。

```
QString msg;

if ( fontMetricsLeading < 0 )
{
    msg = "!!!";
}

qDebug( "%s, %d", qPrintable( msg ), fontMetricsLeading ); 
```

# unix - UNIX - 查找文档中的大多数元素

> ID：13438223
> 
> 赞同：1
> 
> 时间：2012-11-18T07:13:06.573
> 
> 标签：unix

我试图找出一种方法来获取每行一个单词的文件，并输出文件中最常用单词的日志以及它们出现的频率。

Namly，如果给我一个这样的文件（比我看到的要短得多，但为了清楚起见......）：

```
dog
dog
cat
bird
cat
horse
dog 
```

我会得到如下输出：

```
dog - 3
cat - 2
bird - 1
horse - 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T07:15:47.997

这个怎么样：

```
[cnicutar@fresh ~]$  sort < file | uniq -c | sort -rn
   3 dog
   2 cat
   1 horse
   1 bird 
```

然后你可以调整它以获得 dog-3 等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T07:16:57.677

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")和[排序](/questions/tagged/sort "显示标记为“排序”的问题")：

```
$ awk '{arr[$1]++}END{for(a in arr){print a" - "arr[a]}}' file.txt | sort -nrk3 
```

完整的[awk](/questions/tagged/awk "显示标记为“awk”的问题")版本：

```
awk '{
    arr[$1]++
}
END{
    for (i in arr) tmpidx[sprintf("%12s", arr[i]),i] = i
    num = asorti(tmpidx)
    j = 0
    for (i=num; i>=1; i--) {
        split(tmpidx[i], tmp, SUBSEP)
        indices[++j] = tmp[2]
    }
    for (i=1; i<=num; i++) print indices[i], arr[indices[i]]
}' file.txt 
```

**输出**

```
dog - 3
cat - 2
horse - 1
bird - 1 
```

[使用perl](/questions/tagged/perl "显示标记为“perl”的问题")的另一种方式（如您所问的确切输出）：

```
perl -lne '
    END{
        print "$_ - $h{$_}" for reverse sort {$h{$a} cmp $h{$b}} keys %h
    }
    $h{$_}++
' file.txt 
```

**输出**

```
dog - 3
cat - 2
bird - 1
horse - 1 
```

# android - 如何链接自定义动画？

> ID：13438228
> 
> 赞同：-1
> 
> 时间：2012-11-18T07:14:22.467
> 
> 标签：android, animation

```
 class SceneAnimation extends Animation{
public int x;
public ImageView mImageView;
public int[] mFrameRess;
public int[] mDurations;
public int mDuration;

public int mLastFrameNo;
public long mBreakDelay;

 public SceneAnimation(ImageView pImageView, int[] pFrameRess, int[] pDurations)
 {

    mImageView = pImageView;
    mFrameRess = pFrameRess;
    mDurations = pDurations;
    mLastFrameNo = pFrameRess.length - 1;

    play(1);
}

    public SceneAnimation(ImageView pImageView, int[] pFrameRess, int pDuration){
    mImageView = pImageView;
    mFrameRess = pFrameRess;
    mDuration = pDuration;
    mLastFrameNo = pFrameRess.length - 1;

    mImageView.setImageResource(mFrameRess[0]);
    playConstant(1);
}

    public SceneAnimation(ImageView pImageView, int[] pFrameRess, int pDuration, long pBreakDelay){            
    mImageView = pImageView;
    mFrameRess = pFrameRess;
    mDuration = pDuration;
    mLastFrameNo = pFrameRess.length - 1;
    mBreakDelay = pBreakDelay;

    mImageView.setImageResource(mFrameRess[0]);
    playConstant(1);
}

synchronized void play(final int pFrameNo)
{

    mImageView.postDelayed(new Runnable(){
        public void run() {

            mImageView.setImageResource(mFrameRess[pFrameNo]);
            if(pFrameNo == mLastFrameNo)
                {
                return;}
            else
                play(pFrameNo + 1);
        }
    }, mDurations[pFrameNo]);
}

public void playConstant(final int pFrameNo){
    mImageView.postDelayed(new Runnable(){
        public void run() {                    
            mImageView.setImageResource(mFrameRess[pFrameNo]);

            if(pFrameNo == mLastFrameNo)
                playConstant(0);
            else
                playConstant(pFrameNo + 1);
        }
    }, pFrameNo==mLastFrameNo && mBreakDelay>0 ? mBreakDelay : mDuration);
}

}; 
```

我可以用它来播放很多帧，我不能一个接一个地播放一个动画，或者在动画之间暂停，所以一旦我实例化了这个类，我就试图找出一种使用 AnimationListener 的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:17:54.660

添加一个 AnimationListener 作为类的字段，添加一个 setter。然后其他类可以为您的 SceneAnimation 添加一个侦听器。

之后，创建一个方法 fireFooEvent 以在侦听器不为空时向您的侦听器触发事件​​。

然后在 SceneAnimation 类中使用这些触发方法来通知潜在的侦听器动画的开始和结束。

接下来，在您的活动中，为第一个动画添加一个侦听器，启动它。当侦听器将收到第一个动画的结束时，启动第二个动画。

---更新了一些代码

```
public void setAnimationLIstener( AnimationListener listener ) {
 this.animationListener = listener;
}

public void fireOnAnimationEnd(Animation animation)() {
 if( this.animationListener == null ) {
    return;
 }
 this.animationListener.onAnimationEnd(animation);
} 
```

并为每个事件执行此操作。然后，您可以轻松地通知侦听器您的 AnimationScene 对象中发生的情况。

# ruby-on-rails - Capistrano 部署期间未定义的方法“action_mailer”

> ID：13438229
> 
> 赞同：0
> 
> 时间：2012-11-18T07:14:38.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rvm, capistrano, bundler

我在 Capistrano 部署期间出现此错误消息。这对我来说意味着安装 Rails 有什么问题吗？Rails 目前*没有*安装在服务器端，但它在我的 Gemfile（和我的 Gemfile.lock）中，所以我假设它应该`bundle install`在此行之前执行的命令期间安装。

给出错误的实际命令是：

`bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile`

我想问题只是在捆绑安装期间没有安装 Rails。我错过了什么吗？

谢谢！

**更新 1：**`bundle install` Rails 似乎通过命令正确安装。如果我查看目录`.../shared/bundle/ruby/1.9.1/gems`，我可以在其中看到 action mailer。

**更新 2：**在本地运行命令`rake assets:precompile`实际上也失败了，所以这与 Capistrano 没有任何关系。现在我只需要弄清楚为什么该`config`对象对动作邮件一无所知？

**更新 3：**在路上炙手可热。看起来我安装的 actionmailer 版本是 0.6.1（？！），同时我所有的 Rails 东西都在 3.2.9 上。`bundle update`拒绝更新此版本之后的 actionmailer。我将移除我所有的宝石并重新开始。

**更新 4：**删除了我的整个 gemset 使用`rvm gemset empty`. 然后尝试再次运行 bundle，并**再次**尝试获取 actionmailer 0.6.1。我认为某些东西被捆绑器或其他东西搞砸了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:11:41.477

问题最终是我在我的 Gemfile 中删除了对*特定版本的 Rails 的依赖。*我刚`gem "rails"`进去 这似乎完全搞砸了依赖关系计算，因为它获得了超旧版本的 action mailer，而不是从所有 gem 中获得一致的版本。猜猜不指定确切的 Rails 版本是个坏主意。哎呀！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T18:50:57.410

@aardvarkk，

感谢您发布此问题，我在安装 Rails 4.0.0 时遇到了同样的错误，该错误阻止我运行我的 rails 服务器

这是在我尝试遵循 RoR 的 Hartl 教程时。

我添加`gem "rails", '4.0.0'`到我的 gem 文件中，现在我可以运行我的 rails 服务器了。

谢谢

# c# - 使用 c# 运行 .cmd 文件时遇到问题

> ID：13438238
> 
> 赞同：1
> 
> 时间：2012-11-18T07:15:55.537
> 
> 标签：c#, ffmpeg, cmd

出于某种原因，我似乎无法使用 c# 启动和运行 .cmd 文件。cmd文件的一行示例是：

```
"C:\Windows\system32\ffmpeg64.exe" -v verbose -y -i "S:\TEMP\A.ts" -c:v copy -c:a copy -ss 00:00:00.000 -t 2 "S:\TEMP\A_SHORT.ts" 
```

我尝试了几种不同的方法来从 C# 中启动此文件，例如（其中 curDirectory 是例如“S:\TEMP”）

```
Process p = Process.Start(curDirectory + "\\ffmpeg.cmd"); 
```

我也试过

```
string path = curDirectory + "\\ffmpeg.cmd";
Process p = Process.Start("cmd.exe", @"/c " + path);  //I've also tried /k 
```

但是发生的情况是 cmd 提示符会出现并说“C:\Windows\System32\ffmpeg64.exe”无法识别......”即使文件在那里。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:58:44.780

如果您的系统运行的是 Windows 6.1 内核或更高版本，则 System32 实际上由基于您正在运行的应用程序的其他目录组成（取决于它是 32 位还是 64 位应用程序）。

我假设这`ffmpeg64.exe`是一个 64 位应用程序，当您手动执行 .cmd 文件时，它应该默认为 64 位命令提示符 - 还要确保您的应用程序针对“x64”或“任何 CPU”。或者，您可以将 32 位版本的 ffmpeg 放在 WoW64 目录中。

另外，我知道您已经在评论中声明您不想阅读 .cmd 文件并对其进行修改，但您可以`ProcessStartInfo`使用 with`Environment.SystemDirectory`而不是硬编码路径来编写。

作为最后一个选项，您可以将 ffmpeg exe 放置在静态的地方（如您在评论中所说的那样`c:\`），或者只是在应用程序的工作目录中。

# c# - 简单的单机器人登录

> ID：13438243
> 
> 赞同：1
> 
> 时间：2012-11-18T07:17:14.697
> 
> 标签：c#, android, mono, asp.net-mvc-4, xamarin.android

我有一个网站，它的会员登录是用 MVC4 .NET 编写的，它使用标准的 WebSecurity 登录。每个成员都有产品。基本上我想创建一个允许用户登录然后在新视图中下载他们的产品的应用程序。

我在单机器人样本上找不到任何具有此功能的示例，任何人都可以提供帮助或指导吗？我什至不能直接指向一个新的布局，每个布局都需要一个活动吗？如果是这样，您如何将其定义为布局：

我在下面有这个：

```
[Activity(Label = "Products" , MainLauncher = true , Icon = "@drawable/icon")]
    public class Activity1 : Activity
    {
        int count = 1;

        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            // Set our view from the "main" layout resource
            SetContentView(Resource.Layout.Login);

            // Get our button from the layout resource,
            // and attach an event to it
            Button button = FindViewById<Button>(Resource.Id.MyButton);

            button.Click += this.Login;

        }

        private void Login(object sender , EventArgs e)
        {

            // LOGIN TO WEB SITE, IF SUCCESSFULL
            // go to main
            SetContentView(Resource.Layout.Main);

            //else toast incorrect password

        } 
```

任何帮助将不胜感激，我假设 LINQ to SQL 不能用于连接到 Web 服务器数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:10:44.537

对于登录过程，有几种方法可以做到这一点，但最简单的方法是 Web 服务，尤其是当您从外部连接（例如 3G 连接）登录时。一个简单的例子是一个将用户名和密码作为参数的 Web 服务，如果用户已通过身份验证，则返回 true 或 false。一个更复杂的例子是一个 Web 服务，它返回一个可以过期的令牌或 Guid（类似于一个 Web 会话）并用于验证对数据库的每个附加请求。

[这](http://docs.xamarin.com/android/guides/Application_Fundamentals/Introduction_to_Web_Services)是一个关于如何使用 Mono for Android 使用 Web 服务的教程

验证用户身份后，您将开始一个新的`Activity`. Android 操作系统会跟踪`Activity`树；当您开始和完成活动时，树会增长和缩小。活动树保留所有已开始但未完成的活动的历史记录。这使用户能够使用后退按钮在树中导航。[这](http://docs.xamarin.com/Android/Guides/Application_Fundamentals/Activity_Lifecycle)是有关活动生命周期的更多信息。

# javascript - Is there a way to send keyboard key press to iframe content?

> ID：13438246
> 
> 赞同：6
> 
> 时间：2012-11-18T07:17:57.740
> 
> 标签：javascript

My iframe content responds to key press, is there a way to send key press into the iframe from the page which contains the iframe?

By the way, the usual way to simulate key press does not work in the scenario:

```
var ev = $.Event('keypress');
ev.which = 68;
ev.ctrlKey = true;
$('#frame').trigger(ev); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-25T09:59:58.357

This is an old question, but I hope this answer is helpful to someone.

There is a new feature in HTML5, window.postMessage, which allows for communication between an iframe and the hosting window. There's some good documentation [here](https://developer.mozilla.org/en-US/docs/Web/API/window.postMessage).

As usual, you can expect some inconsistencies across browsers: in my experience, Firefox accepts any object as the message, but IE will only accept a string.

There have been some developments to make this feature easy to use in different browsers, including polyfills to make it work in older browsers.

The one that I ended up using was Ben [Alman's jquery plugin](http://benalman.com/projects/jquery-postmessage-plugin/).

Enjoy!

# java - 对于我的项目，我想将整数转换为字节数组并将字节数组转换回整数

> ID：13438247
> 
> 赞同：4
> 
> 时间：2012-11-18T07:18:13.973
> 
> 标签：java

对于我的项目，我必须将整数转换为字节数组，然后将字节数组转换回整数。我做了下面的代码，但它不工作

```
 int temp=200;

    byte[] tempbyte= new byte[4];

String s= String.valueOf(temp);
tempbyte= s.getBytes(); // integer to byte array conversion

String s2 = String.valueOf(ByteBuffer.wrap(tempbyte).getInt());

int temp2 = Integer.parseInt(s2); // byte array to integer conversion

System.out.println("the value of temp2 = "+temp2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:22:45.863

尝试这样的事情： -

```
byte[] arr = { 0x00, 0x01 };
ByteBuffer wrapped = ByteBuffer.wrap(arr);
short num = wrapped.getShort(); 

ByteBuffer dbuf = ByteBuffer.allocate(2);
dbuf.putShort(num);
byte[] bytes = dbuf.array(); 
```

使用`java.nio`命名空间的类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:23:40.077

这些是我多年前所做的可以帮助您的功能：

```
public static float byteArrayToFloat(byte[] p_bArray)
{
    int nValue;

    nValue = (0xFF & p_bArray[0]);
    nValue = nValue | ((0xFF & p_bArray[1]) << 8);
    nValue = nValue | ((0xFF & p_bArray[2]) << 16);
    nValue = nValue | ((0xFF & p_bArray[3]) << 24);

    float fValue = Float.intBitsToFloat(nValue);

    return fValue;
}

public static byte[] floatToByteArray(float p_fValue)
{
    byte [] bArray = new byte[4];
    int nValue;

    nValue = Float.floatToIntBits(p_fValue);

    bArray[0] = (byte)nValue;
    bArray[1] = (byte)(nValue >> 8);
    bArray[2] = (byte)(nValue >> 16);
    bArray[3] = (byte)(nValue >> 24);

    return bArray;
}

public static double byteArrayToDouble(byte[] p_bArray)
{
    long lValue;

    lValue = (long)p_bArray[0] & 0xFF;
    lValue = lValue | (((long)p_bArray[1] & 0xFF) << 8);
    lValue = lValue | (((long)p_bArray[2] & 0xFF) << 16);
    lValue = lValue | (((long)p_bArray[3] & 0xFF) << 24);
    lValue = lValue | (((long)p_bArray[4] & 0xFF) << 32);
    lValue = lValue | (((long)p_bArray[5] & 0xFF) << 40);
    lValue = lValue | (((long)p_bArray[6] & 0xFF) << 48);
    lValue = lValue | (((long)p_bArray[7] & 0xFF) << 56);

    double dValue = Double.longBitsToDouble(lValue);

    return dValue;
}

public static byte[] doubleToByteArray(double p_dValue)
{
    byte [] bArray = new byte[8];
    long lValue;

    lValue = Double.doubleToLongBits(p_dValue);

    bArray[0] = (byte)lValue;
    bArray[1] = (byte)(lValue >> 8);
    bArray[2] = (byte)(lValue >> 16);
    bArray[3] = (byte)(lValue >> 24);
    bArray[4] = (byte)(lValue >> 32);
    bArray[5] = (byte)(lValue >> 40);
    bArray[6] = (byte)(lValue >> 48);
    bArray[7] = (byte)(lValue >> 56);

    return bArray;
}

public static int byteArrayToInt(byte[] p_bArray)
{
    int nValue;

    nValue = ((int)p_bArray[0]) & 0x000000FF;
    nValue = nValue | (((int)p_bArray[1] & 0x000000FF) << 8);
    nValue = nValue | (((int)p_bArray[2] & 0x000000FF) << 16);
    nValue = nValue | (((int)p_bArray[3] & 0x000000FF) << 24);

    return nValue;
}

public static byte[] intToByteArray(int p_nValue)
{
    byte [] bArray = new byte[4];

    bArray[0] = (byte)p_nValue;
    bArray[1] = (byte)(p_nValue >> 8);
    bArray[2] = (byte)(p_nValue >> 16);
    bArray[3] = (byte)(p_nValue >> 24);

    return bArray;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T07:34:00.487

我的版本：

```
 int i = 1;
    byte[] bytes = BigInteger.valueOf(i).toByteArray();
    i = new BigInteger(bytes).intValue(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T07:37:08.163

Integer 类具有将数字转换为字节表示的方法。

```
 String i = Integer.toBinaryString(4); 
```

你也可以反之亦然

```
 String binaryString = "100";
    int base = 2;
    int decimal = Integer.parseInt(binaryString, base); 
```

# matlab - 极坐标图matlab中的直线

> ID：13438249
> 
> 赞同：2
> 
> 时间：2012-11-18T07:19:25.750
> 
> 标签：matlab, plot, 2d, polar-coordinates

如何`polar()`在 Matlab 中使用命令绘制直线？

示例：（考虑 theta 以度为单位）

```
rho1 = 50;         rho2 = 60;
theta1 = 45;       theta2 = 60;

syntax: polar(theta,rho); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:22:04.443

Just like this:

```
 % Using your definitions:
rho=[rho1 rho2];
theta=[theta1 theta2];
polar(theta,rho); 
```

![enter image description here](../Images/b108b4840237a45009aade7ceeeba734.png)

# php - 检查用户输入的电子邮件地址是否具有与他们在上面输入的域名相似的域

> ID：13438259
> 
> 赞同：2
> 
> 时间：2012-11-18T07:23:01.877
> 
> 标签：php

在我的注册表单中，我要求用户输入与他们在上面的 url 字段中输入的域名相同的电子邮件。

现在，我以这种方式收集数据：

URL : `http://www.`**domain.com** domain.com 部分是用户输入的内容。`http://www`是硬编码的。

电子邮件：info@domain.com**粗体****部分**由用户输入。**@**是硬编码的。

url 中的 domain.com 部分和电子邮件中的 domain.com 部分应该匹配。现在，我可以匹配这两个字段，因为它们是分开的。

但是我想放弃上面的做法，让用户输入整个域名和邮箱。在这种情况下，检查用户是否输入了与他在上面的 url 字段中输入的域相同的电子邮件是一种好方法。

我正在使用 php 完成所有这些工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:29:39.777

你可以这样做[`explode()`](http://php.net/manual/en/function.explode.php)

```
supp url = bla@gmail.com
$pieces = explode("@", $url);
$new = $pieces[1]; //which will be gmail.com 
```

现在再次爆炸

```
$newpc= explode(".", $new );
$new1 = $newpc[0]; //which will be gmail 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:30:27.100

```
 <?php

    //extract domain from email
    $email_domain_temp = explode("@", $_POST['email']);
    $email_domain = $email_domain_temp[1];

    //extract domain from url
    $url_domain_temp = parse_url($_POST['url']);
    $url_domain = strip_out_subdomain($url_domain_temp['host']);

    //compare
    if ($email_domain == $url_domain){
        //match
    }

    function strip_out_subdomain($domain){
        //do nothing if only 1 dot in $domain
        if (substr_count($domain, ".") == 1){
             return $domain;
        }
        $only_my_domain = preg_replace("/^(.*?)\.(.*)$/","$2",$domain);
        return $only_my_domain;
    } 
```

所以这样做是：

首先，将电子邮件字符串拆分为数组中的两部分。第二部分是域。

其次，使用php内置函数解析url，然后提取“主机”，同时删除（可选）子域。

然后比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T09:17:40.387

这是我的版本（经过测试，有效）：

```
<?php
$domain = 'www2.example.com'; // Set domain here
$email = 'info@example.com';  // Set email here

if(!preg_match('~^https?://.*$~i', $domain)) { // Does the URL start with http?
    $domain = "http://$domain"; // No, prepend it with http://
}
if(filter_var($domain, FILTER_VALIDATE_URL)) { // Validate URL
    $host = parse_url($domain, PHP_URL_HOST); // Parse the host, if it is an URL
    if(substr_count($host, '.') > 1) { // Is there a subdomain?
        $host = substr($host, -strrpos(strrev($host), '.')); // Get the host
    }
    if(strpos(strrev($email), strrev($host)) === 0) { // Does it match the end of the email?
        echo 'Valid!'; // Valid
    } else {
        echo 'Does not match.'; // Invalid
    }
} else {
    echo 'Invalid domain!'; // Domain is invalid
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T07:38:00.907

你可以这样做：

```
$parsedUrl = parse_url($yourEnteredUrl);
$domainHost = str_replace("www.", "", $parsedUrl["host"]);
$emailDomain = array_pop(explode('@', $yourEnteredEmail));
if( $emailDomain == $domainHost ) {
  //valid data
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T07:55:17.433

使用正则表达式和正则表达式（即仅返回我想要匹配的表达式，如果它前面有某个模式，但**不要**在匹配中包含后向本身），如下所示：

```
<?php 
$url = preg_match("/(?<=http:\/\/www\.).*/",$_POST['url'],$url_match);
$email = preg_match("/(?<=@).*/",$_POST['email'],$email_match);
if ($url_match[0]==$email_match[0]) {
  // Success Code
 }   
else {
 // Failure Code
     }
?> 
```

当然这有点过于简单了，因为您还需要考虑 https 或 www2 等，但这些只需要对 RegExp 进行微小的更改，使用问号作为“可选”运算符

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-18T08:08:21.613

```
$email = 'myemail@example.com';
$site  = 'http://example.com';

$emailDomain = ltrim( strstr($email, '@'), '@' );

// or automate it using array_map(). Syntax is correct only for >= PHP5.4
$cases = ['http://'.$emailDomain, 'https://'.$emailDomain, 'http://www.'.$emailDomain, 'https://www.'.$emailDomain];

$bSameDomain = in_array($site, $cases);
var_dump($bSameDomain); 
```

# ruby-on-rails - 如何定义 :validates 只允许整数 1 和 -1？

> ID：13438265
> 
> 赞同：0
> 
> 时间：2012-11-18T07:23:31.127
> 
> 标签：ruby-on-rails

我的模型中有这个：

```
validates :polarity, presence: true 
```

我只想允许`1`和`-1`（因为它是一个投票系统）。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:56:23.303

正如评论中所建议的：

```
validates :polarity, presence: true, inclusion: { in: [-1, 1] } 
```

# java - 想要在按钮点击时做摇摆的进度条

> ID：13438267
> 
> 赞同：-3
> 
> 时间：2012-11-18T07:23:39.590
> 
> 标签：java, swing, progress-bar, frame, buttonclick

帮我解决这个问题。我想在按钮单击时添加一个进度条，并且在进度条运行时主窗口（框架）应该关闭或隐藏。随着进度的完成，应该会出现主窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:34:50.713

有两种直接方式（在 API 中实现）

*   使用[ProgressMonitor / ProgressMonitorInputStream](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)

*   [在 JProgressBar 中](https://stackoverflow.com/questions/6113944/how-cancel-the-execution-of-a-swingworker/6114890#6114890)使用SwingWorker[通知进度](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

*   注意 Swing GUI 不是线程安全的，所有到 Swing GUI 的输出都必须在[Event Dispatch Thread (EDT)上完成](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:33:13.197

您可以在这里找到一个包含完整工作代码的示例：
[http](http://www.roseindia.net/java/example/java/swing/SwingProgressBar.shtml)

://www.roseindia.net/java/example/java/swing/SwingProgressBar.shtml 您只需要在其中添加 a`mainframe.setVisible(false);`和 a`mainframe.setVisible(true);`即可，其中大型机是你的主要 JFrame。您可以在“创建计时器”部分使用新`if (i==0)`的和现有的`if (i==20)`语句进行此修改。比删除或修改其余代码以满足您的需要。

# javascript - jQuery 或原始 JavaScript 是否预编译或缓存变量表达式或选择器？

> ID：13438275
> 
> 赞同：1
> 
> 时间：2012-11-18T07:24:15.893
> 
> 标签：javascript, jquery, caching, precompile

很基本的问题。

我想知道 jQuery 或原始 JavaScript 是否足够聪明，可以预编译，或者在函数或选择器中缓存变量表达式，如果没有，是否有任何理由阻止他们这样做？

例如

```
$('#whatever').on('click', function(){
    $('#template').click();
});

var n = 0;

for(var i = 0; i < 20; i++){
    n = 1 + 1;
    $('#whatever').click();
}

console.log(n); 
```

我们要在 dom 中搜索 20 次`$('#template')`元素吗？或者库/引擎是否足够智能以存储指针？

而且，我们是要计算机 1+1 2 次，还是该表达式被缓存或预编译？

* * *

显然，这些都是非常愚蠢的例子，但他们明白了这一点。

是的，没有人会（希望）`n = 1 + 1`在他们的代码中包含这一行。

我们可以将代码更改为 `var template = $('#template'); 在点击处理程序之前，如果它本身不处理它，但我想知道我们/为什么我们必须这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:35:49.460

首先，jQuery*是*javascript。jQuery 没有也不能将特性添加到 JavaScript 作为一种语言。

话虽如此，JavaScript 是 ECMAScript，并且在每个浏览器中的实现方式也不同。我很难（如果不是不可能的话）告诉你关于 JavaScript 实现的缓存级别的任何事情，因为作为一种语言，没有任何规定的行为。

我认为出于性能原因缓存对 DOM 元素的引用是有意义的，但我无法谈论每个单独的实现在幕后做了什么。

就 jQuery 而言，据我所知，当前版本中没有发生神奇的选择器缓存。每次`$(...)`调用时，它都必须重新评估选择器。选择器可以是简单的 css 样式选择器 ex `$('#foo .bar baz')`，也可以是元素片段 ex `$('<div>foo bar baz</div>')`。

如果 jQuery 函数传递了一个选择器，它必须重新检查 DOM，因为可能已经添加了可以匹配选择器的新元素，或者现有元素可能已经更改为不再匹配选择器。

就缓存 jQuery 对象而言，保存对 jQuery 对象的引用是很常见的，并且在某些情况下性能更高。确定哪种方法更好的唯一方法是使用性能分析器运行脚本并查看瓶颈在哪里。没有理由仅仅假设以一种特定的方式编写代码会提高代码的性能。

如果您只是想对同一个选择执行一系列操作，请务必利用 jQuery 的方法链：

```
$('.selector').addClass('foo').removeClass('bar').click(function () {...}); 
```

jQuery 方法通常将原始选择作为返回值返回，这样可以非常优雅地简化代码。

# .net - 存储过程错误“无效列”

> ID：13438280
> 
> 赞同：0
> 
> 时间：2012-11-18T07:25:00.900
> 
> 标签：.net, sql

我想将下面的 C# 代码从普通 SQL 更改为存储过程，但它总是在它们所在的列上显示错误`Invalid Column`。存储过程有什么问题？

```
CREATE PROCEDURE [dbo].[usp_AdminRegPage1]
     (@VendorId VARCHAR)
AS
BEGIN
    SET NOCOUNT ON;

    SELECT WorksPackage,MajorWorks FROM dbo.RegPage1 WHERE Vendor_Id = @VendorId;
END

protected void DisplayRecord()
{
     SqlConnection SqlCon = new SqlConnection(GetConnectionString());
     string sql = "SELECT WorksPackage,MajorWorks from RegPage1 
                                                 WHERE Vendor_ID='"+lblPage1ID.Text+"'";
     var da = new SqlDataAdapter(sql, SqlCon);
     var ds = new DataSet();

     da.Fill(ds);

     if (ds.Tables[0].Rows.Count > 0)
     {
        txtMajorPackages.Text = ds.Tables[0].Rows[0]["WorksPackage"].ToString();
        txtRegP1Works.Text = ds.Tables[0].Rows[0]["MajorWorks"].ToString();
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:36:35.580

像这样的东西应该可以完成这项工作

```
public void DisplayRecord()
{
    SqlDataReader rdr = null;

    // create and open a connection object
    SqlConnection SqlCon = new SqlConnection(GetConnectionString());

    try
    {

        SqlCon.Open();

        // 1\. create a command object identifying
        // the stored procedure
        SqlCommand cmd = new SqlCommand(
            "usp_AdminRegPage1", SqlCon);

        // 2\. set the command object so it knows
        // to execute a stored procedure
        cmd.CommandType = CommandType.StoredProcedure;

        // 3\. add parameter to command, which
        // will be passed to the stored procedure
        cmd.Parameters.Add(
            new SqlParameter("@VendorId", lblPage1ID.Text));

        // execute the command
        rdr = cmd.ExecuteReader();

        // iterate through results, printing each to console
        while (rdr.Read())
        {
            txtMajorPackages.Text = rdr["WorksPackage"];
            txtRegP1Works.Text = rdr["MajorWorks"];
        }
    }
    catch (Exception ex)
    {

    }
    finally
    {
        SqlCon.Close();
    }
} 
```

示例取自本网站
[http://www.csharp-station.com/Tutorials/AdoDotNet/Lesson07.aspx](http://www.csharp-station.com/Tutorials/AdoDotNet/Lesson07.aspx)

# linux - 运行期望代码时发送错误

> ID：13438287
> 
> 赞同：2
> 
> 时间：2012-11-18T07:27:03.560
> 
> 标签：linux, bash, expect

我做了一个期望代码：

*#!/usr/bin/expect -f
spawn ls
expect "*]$*"
send "cd /to/some/path\n"
expect "*]$*"
send "sudo -u root ./program.sh"
期望 "*:*"
发送 "i_am_password\n"
交互* 

在执行它时，我收到以下错误：

*spawn ls
my_pgm.exp abc.sh axyz.zip all.zip test.exp
send: spawn id exp6 not open
while execution
"send "cd /to/some/path\n""
(file "./my_pgm.exp" line 5)* 

我在 ubuntu 上运行这段代码。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:02:59.010

我不确定你为什么需要期望，但对于 bash 脚本，试试这个：

```
#!/usr/bin/expect -f
spawn bash -i
expect "*$ "
send "cd /to/some/path\n"
expect "*$ "
send "sudo -u root ./program.sh\n"
expect "*: "
send "i_am_password\n"
interact 
```

**描述**

该`spawn`指令指示*期望使用* **哪个**程序与之交互。所以如果你**想**与 bash 交互，你必须`expect`要求`spawn bash`. bash的`-i`参数强制它们以*交互*模式启动。

根本，**这看起来是一个非常糟糕的主意**，但这只是我的意见；）

# javascript - form_for 远程不刷新页面

> ID：13438288
> 
> 赞同：0
> 
> 时间：2012-11-18T07:27:57.010
> 
> 标签：javascript, ruby-on-rails

我正在尝试设置我的页面以从主页添加链接。它更新数据库中的链接，但不刷新内容。这是我所拥有的：

控制器/home_controller.rb

```
class HomeController < ApplicationController
  def create
    if user_signed_in?
      @new_link = Link.create(:link => params[:email])
      respond_to do |format|
        format.js do
        end
     end
  end
end 
```

意见/主页/index.html.haml

```
#home
  = render "shares/home_links" 
```

意见/分享/_home_links.html.haml

```
= simple_form_for Link.new, :remote => true do |f|
  .form-inputs
    = f.input :name, :required => true, :autofocus => true
    = f.input :url, :required => true
    = f.collection_select :category_id, Category.where(:user_id => current_user.id), :id, :name

  .form-actions
    = f.submit 'Save', :class => 'btn btn-info' 
```

意见/主页/create.js.erb

```
$('#home').replaceWith("<%= escape_javascript(render :partial => 'shares/home_links') %>"); 
```

Firebug 控制台显示

```
POST http://localhost:3000/links 302 Moved Temporarily
GET http://localhost:3000/links/45 200 OK (spinner keeps going and browser is slow until I hit refresh) 
```

终端输出为：

```
Started POST "/links" for 127.0.0.1 at 2012-11-17 23:25:24 -0800
Processing by LinksController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"KPSpEcdrPf1mWMesKT96UY/j1Wozze30LUlno1npT4A=", "link"=>{"name"=>"localhost:3000", "url"=>"http://localhost:3000/", "category_id"=>"5"}, "commit"=>"Save"}
  User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
   (0.1ms)  BEGIN
  SQL (0.3ms)  INSERT INTO `links` (`category_id`, `created_at`, `name`, `position`, `updated_at`, `url`, `user_id`) VALUES (5, '2012-11-18 07:25:24', 'localhost:3000', NULL, '2012-11-18 07:25:24', 'http://localhost:3000/', 1)
   (0.9ms)  COMMIT
   (0.1ms)  BEGIN
   (0.1ms)  COMMIT
Redirected to http://localhost:3000/links/45
Completed 302 Found in 6ms (ActiveRecord: 1.7ms)

Started GET "/links/45" for 127.0.0.1 at 2012-11-17 23:25:24 -0800
Processing by LinksController#show as JS
  Parameters: {"id"=>"45"}
  Link Load (0.4ms)  SELECT `links`.* FROM `links` WHERE `links`.`id` = 45 LIMIT 1
  Rendered links/show.html.haml within layouts/application (0.9ms)
  User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  Rendered layouts/_header.html.haml (2.6ms)
  Rendered layouts/_flash.html.haml (0.2ms)
Completed 200 OK in 22ms (Views: 20.5ms | ActiveRecord: 0.7ms) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:07:54.473

由于该行，内容没有被刷新`simple_form_for Link.new, ...`。每次表单呈现时，您都在实例化一个新的链接对象，而不是检查是否`@new_link`已设置实例变量。尝试将其更改为：

```
simple_form_for @new_link || Link.new, ... 
```

* * *

编辑：再想一想，简单地用一个新的替换当前在浏览器中呈现的表单可能不会更新字段，因为浏览器正在管理表单的内部状态。您必须使用 javascript 手动设置字段的值。例如，在 create.js.erb 中：

```
$('#id-for-name-field').val(@new_link.name)
$('#id-for-url-field').val(@new_link.url)
... 
```

# java - Java中可比接口与通用静态方法的使用

> ID：13438289
> 
> 赞同：1
> 
> 时间：2012-11-18T07:28:05.563
> 
> 标签：java, generics, comparable

如何将 Comparable 接口与通用静态方法一起使用？

假设让我说我有：

```
**public static <T extends Comparable<T>>int larger(T[] array,T element)** 
```

为什么我应该在这里用 T 扩展接口而不是使用工具？

请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:51:30.810

根据Java泛型，你`extends`甚至应该使用接口，没有像`impelements`有界类型这样的东西。

# actionscript-3 - Adobe Air 中的视频加扰显示

> ID：13438296
> 
> 赞同：0
> 
> 时间：2012-11-18T07:29:24.760
> 
> 标签：actionscript-3, apache-flex, video, video-streaming, flex4.6

我尝试使用两个 Flex 应用程序来显示相同​​的视频（当然，一次一个！）。这些应用程序之一是使用 VideoDisplay 显示视频的 Web 客户端。另一个是 Air 应用程序，它也使用 VideoDisplay 来显示相同​​的视频。

Web 应用程序可以毫无问题地显示视频。hhe Air 应用程序显示了一个相当令人印象深刻的搞砸的彩色显示屏，甚至与视频的内容都不相似。

我的 Air 应用程序中是否缺少驱动程序或某些内容？奇怪的是，我在另一台机器上尝试了同样的应用程序，它显示了视频！它似乎可以在一台机器上工作，但不能在另一台机器上工作。两台机器都运行 Windows 7。

有谁知道为什么会这样？请指教...

# python - python“打印”在 sys.setdefaultencoding('utf-8') 之后不起作用

> ID：13438299
> 
> 赞同：4
> 
> 时间：2012-11-18T07:30:25.300
> 
> 标签：python, printing

> **可能重复：**
> [如何在 Windows 控制台中显示 utf-8](https://stackoverflow.com/questions/3578685/how-to-display-utf-8-in-windows-console)

python“打印”语句不起作用。

为了避免这个错误，

> “ascii”编解码器无法解码位置 0 的字节 0xec：序数不在范围内（128）

我在我的代码中添加了一些语句，如下所示

```
import sys

reload(sys)

sys.setdefaultencoding('utf-8') 
```

在代码之前，“打印”效果很好。但是，在代码之后，“打印”不起作用。

```
print "A"

import sys

reload(sys)

sys.setdefaultencoding('utf-8')

print "B" 
```

在这里，我的电脑上只打印了“A”，适用于 Windows 的 Python2.7.3（64 位）。Python2.7空闲

我需要帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T09:38:51.923

被`sys.setdefaultencoding`删除是有原因的`site`，您不应该使用`reload(sys)`它来恢复它。相反，我的解决方案是什么都不做，Python 根据 ENV LANG 变量或 Windows 编码自动检测`chcp`编码。

```
$ python
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> import os
>>> sys.stdout.encoding
'UTF-8'
>>> os.environ["LANG"]
'pl_PL.UTF-8'
>>> print u"\xabtest\xbb"
«test»
>>> 
```

但是，当编码没有您想要的字符时，这可能会导致问题。相反，您应该尝试优雅地降级 - 显示您想要的字符的机会接近 0（因此您应该尝试使用纯 ASCII 版本，或使用 Unidecode 来显示可用的输出（或干脆失败））。您可以尝试捕获异常并打印基本版本的字符串。

```
$ LANG=C python
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> import os
>>> sys.stdout.encoding
'ANSI_X3.4-1968'
>>> os.environ["LANG"]
'C'
>>> print u"\xabtest\xbb"
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode character u'\xab' in position 0: ordinal not in range(128)
>>> 
```

但是有一个叫做 Windows 的问题在 Unicode 支持方面存在问题。虽然在技术上`chcp 65001`应该可以工作，但除非您使用 Python 3.3，否则它实际上并不能工作。Python 使用可移植`stdio.h`的，但`cmd.exe`需要特定于 Windows 的调用，例如`WriteConsoleW()`. 实际上，只有 8 位编码才能可靠地工作（例如 CP437）。

解决方法是使用其他正确支持 Unicode 的终端，例如 Cygwin 的控制台或 Python 附带的 IDLE。

# javascript - 回调后代码的最佳实践

> ID：13438304
> 
> 赞同：1
> 
> 时间：2012-11-18T07:30:54.697
> 
> 标签：javascript, node.js, callback

这就是我想要做的。

我目前正在使用 node.js，它允许您做的一件事是：

```
socket.on("sometopic", function() { 
    // this is a callback
} 
```

现在假设我有 10 个不同的主题，每个主题都有一个相应的处理函数，我保留在我的“窗口”中，如下所示：

```
windows.callbacks["topic_a"] = function() {
    // code for cb a
}

windows.callbacks["topic_b"] = function() {
    // code for cb b
}

windows.callbacks["topic_z"] = function() {
    // code for cb z
} 
```

我想在**每个回调**结束时执行一段代码。一个简单的方法是使用此代码创建一个函数并在每个回调的末尾添加一个调用，但这远非优雅。

谁能为此提出更好的解决方案？有没有我不知道的最佳实践？我对这种函数式编程相当陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T08:37:26.990

```
// THIS IS AN IDEA

// helper

function teardownWith(fn){
  return function (cb){
    return function(){
      return (cb(), fn());
    };
  };
}

// prepare a modified function

var endWithDate = teardownWith(function(){
  log(Date());
});

// pass our callback into the modified function
// endWithDate() returns the final callback.

window.callbacks["cb_a"] = endWithDate(function(){
   // code for cb_a
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:38:23.883

考虑使用 jQuery Deferred 对象，并添加一个方法来执行 'always'

[jQuery 延迟对象文档](http://api.jquery.com/category/deferred-object/)

# php - 从一系列集合模板中解析传入的电子邮件内容

> ID：13438306
> 
> 赞同：1
> 
> 时间：2012-11-18T07:31:00.983
> 
> 标签：php, regex, parsing, email

从事需要解析传入电子邮件，提取某些信息并将其存储在数据库中的项目。我们正在使用 postmarkapp 来提取电子邮件的正文内容，因此我们只有文本的内容，但我目前对如何以最有效的方式解析电子邮件有点困惑。

随着时间的推移，我们将添加更多“接受”格式的传入邮件，但首先我们可能会收到 4 封常见的电子邮件，也就是说，它们将遵循相同的格式和我们想要提取的信息（联系方式、ID、链接、简历）将在同一个地方，（根据支持的格式）。

我在想我们将有一个接口来处理常见任务，并且每种支持的格式都将实现它，但是如何获取这些信息是我被卡住的地方。

对不同方法/技术的任何想法和想法持开放态度，最好是 PHP，但如果我们需要使用其他东西，那很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:01:23.113

我开发的网站上有一个类似的功能。我们的用户从他们的供应商那里收到带有定价的电子邮件。他们将电子邮件正文复制并粘贴到我们网站的文本区域中，然后单击按钮。然后我们解析文本以查找产品和价格并将信息存入数据库。

要进行解析，我们首先必须确定供应商，就像您需要确定使用哪个模板一样。我们在文本中查找某些字符串——通常是供应商的名称，或者是他们的电子邮件特有的一行。我们在一个叫做类似的方法中做到这一点`getParserForText()`。该方法返回一个 Parser 对象，该对象实现了一个带有`parseText()`方法的简单接口。

每种格式都有一个 Parser 实现类。每个类中的`parseText()`方法负责从文本中获取数据。我们寻找使这些优雅和通用的方法，但根本没有找到一个真正好的方法来做到这一点。我们使用正则表达式的组合，将字符串分成更小的部分，然后遍历字符串。

伪代码：

```
$text = $_POST['emailBody'];
$parser = getParserForText($text);
$result = $parser->parseText($text);
if(count($result["errors"]) > 0)
{
    // handle errors
}
else
{
    saveToDatabase($result["prices"]);
} 
```

我们无法控制供应商使用的格式，因此我们不得不求助于：

1.  将文本拆分为带有日期的每一行周围的字符串数组 (prey_split())

2.  对于该数组中的每个元素，第一行包含日期，接下来的三到六行包含产品和价格

3.  拉出日期，然后在新行上拆分字符串

4.  对于每一行，使用正则表达式查找价格 ($000.0000) 并将其拉出

5.  修剪该行的其余部分以用作产品名称

我们使用了很多`prey_split()`,`preg_match_all()`和`explode()`。虽然在我看来它不是特别优雅或通用，但该系统非常强大。通过在正则表达式中留出一点回旋余地，我们已经完成了一些小的格式更改，而无需更改代码。“摆动空间”我的意思是：不要搜索空格，搜索任何空白。不要搜索一个美元符号和两个数字，而是搜索一个美元符号和任意数量的数字。诸如此类的小事。

编辑：

这是我几年前问过的一个问题： [阅读文本的算法或模式](https://stackoverflow.com/questions/1245485/algorithms-or-patterns-for-reading-text)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T13:12:56.610

由于它是生成的电子邮件，它很可能采用易于解析的格式，例如每条指令一行；`key=value`. 然后，您可以拆分第一个 - 符号上的行`=`并使用它为您提供的键值对。

当您无法控制传入的数据格式时，正则表达式非常有用，但是当您这样做时，更容易确保它在没有正则表达式的情况下是可解析的。

如果格式对于这种简单的解析来说太复杂了，请举一个使用该格式的文件的示例，以便我可以使答案更具体。如果这不是您要问的答案，同样的事情：请举例说明您想要的答案。

# c# - 无法在 C# 中使用参数化查询在 MS Access 中插入数据

> ID：13438315
> 
> 赞同：3
> 
> 时间：2012-11-18T07:32:20.247
> 
> 标签：c#, ado.net, oledb

我有以下代码尝试将 e 值从 3 个文本框存储到 MS Access 2007 数据库中。

```
string ConnString = (@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\\dxs.accdb");
string SqlString = "Insert Into tests( [Nam], [add], [phone]) Values (?,?,?)";

using (OleDbConnection conn = new OleDbConnection(ConnString))
{
   using (OleDbCommand cmd = new OleDbCommand(SqlString, conn))
   {
      cmd.CommandType = CommandType.Text;
      cmd.Parameters.AddWithValue(@"Nam", textBox1.Text);
      cmd.Parameters.AddWithValue(@"add", textBox2.Text);
      cmd.Parameters.AddWithValue(@"phone",textBox3.Text);

      conn.Open();
      cmd.ExecuteNonQuery();
      MessageBox.Show("entered");
   }
} 
```

但是，即使输入值后代码是正确的，表中也没有存储任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:06:16.910

不应该

`cmd.Parameters.AddWithValue(@"Nam", textBox1.Text);`

是：

`cmd.Parameters.AddWithValue("@Nam", textBox1.Text);`

其他参数等等？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:04:14.923

当我遇到类似问题时，解决方案是：

如果数据库是应用程序的一部分，则可以将其复制到`bin`文件夹中 - 然后应用程序使用它。这就是为什么您无法使用 MS Access 客户端在数据表中找到您的更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T08:46:07.333

确保您的数据库存在于您`exe`的项目文件所在的 output(bin) 文件夹中。如果没有，则将其复制到那里。将`database`文件放在正确的位置后，您将看到更改。

此外，您还需要对代码进行少量更改，您的参数有问题。更改`Values (?,?,?)`为`Values (@Nam,@add,@phone)";`和。`@"Nam"`_ `"@Nam"`见评论`Correction1 and Correction2`。

在字符串开头`\\`使用时也无需使用双斜杠`@`

```
string ConnString=@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\dxs.accdb");

string sql="Insert Into tests([Nam],[add],[phone]) Values (@Nam,@add,@phone)";
// Correction 1: Above line is changed ?,?,? to parameter names (names used by your command)

using (OleDbConnection conn = new OleDbConnection(ConnString))
{
   using (OleDbCommand cmd = new OleDbCommand(sql, conn))
   {
      cmd.CommandType = CommandType.Text;
      cmd.Parameters.AddWithValue("@Nam", textBox1.Text);
      cmd.Parameters.AddWithValue("@add", textBox2.Text);
      cmd.Parameters.AddWithValue("@phone",textBox3.Text);
      // Correction 2: your parameter names are changed @"xyz" to "@xyz"

      conn.Open();
      cmd.ExecuteNonQuery();
      MessageBox.Show("entered");
   }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-18T16:46:51.537

你的插入语句应该像 dis

```
 string SqlString = "Insert Into tests( [Nam], [add], [phone]) Values (@Nam, @add, @phone)";

   cmd.CommandType = CommandType.Text;
  cmd.Parameters.AddWithValue("@Nam", textBox1.Text);
  cmd.Parameters.AddWithValue("@add", textBox2.Text);
  cmd.Parameters.AddWithValue("@phone",textBox3.Text); 
```

试试这个

# asp.net - 声明性辅助方法中的 Html.BeginForm()

> ID：13438318
> 
> 赞同：2
> 
> 时间：2012-11-18T07:32:49.553
> 
> 标签：asp.net, asp.net-mvc-3, html-helper, razor-declarative-helpers

我正在尝试在in文件夹中**创建**一个`from`using `Html.BeginForm()`in a razor helper 方法。但没有成功。`partial page (Razor)``app_code`

```
@helper  GenerateForm(...){

 @using(@Html.BeginForm(.... // error

} 
```

我尝试添加类似`System.web.mvc`or`system.web.webpages`但没有区别的名称空间。 **是否可以**在此**代码**中使用此**方法**？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:50:31.330

您应该将 HtmlHelper html 传递给此帮助程序并使用它：

```
helper  GenerateForm(HtmlHelper html, ...){

    @using(html.BeginForm(.... // error

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:35:06.223

试试这个：@using(Html.BeginForm(...**

# jdbc - 使用 JDBC 和 Clojure 访问大型数据集的有效方法是什么

> ID：13438321
> 
> 赞同：3
> 
> 时间：2012-11-18T07:33:13.653
> 
> 标签：jdbc, clojure, processing-efficiency

### 编辑

事实证明，N00b 问题。我没有意识到运行`lein ring server`会导致您的应用程序以解释模式运行，这就是它慢得多的原因。

* * *

可以优化以下 Clojure/JDBC 片段以使其运行（更快）速度吗？

```
(defn test-sql []
  (sql/with-connection (db-connection)
    (sql/with-query-results results ["select * from users order by username asc"]
        (doseq [row results ] 
          (println "User" (row :first_name) (row :last_name)) results)))) 
```

我正在考虑将 Clojure 用于 ETL 项目。我写的第一个测试是从我有大约 280K 记录的表中打印出数据。到目前为止，我提出的实现非常缓慢。在 Java 中大约需要 12 秒（即使使用 myBatis 填充对象而不是“原始”访问）使用我的 Clojure 解决方案需要大约 9.5 分钟。

我尝试使用地图而不是doseq，并尝试使用此处概述的光标：http://asymmetrical-view.com/2010/10/14/clojure-and-large-result-sets.html [，](http://asymmetrical-view.com/2010/10/14/clojure-and-large-result-sets.html)但我得到的结果大致相同每个的执行时间。

FWIW，执行`.println java.lang.System/out`（不足为奇）和使用 with-query-results* 时的结果相同：

```
(defn test-sql2 []
  (sql/with-connection (db-connection)
    (sql/with-query-results* ["select * from users order by username asc"]
      (fn [row] (println "User" (row :first_name) (row :last_name)))))) 
```

彼此彼此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T09:37:40.597

嗯，这很尴尬......事实证明，相对较差的性能是由于将我的测试代码作为简单 Web 应用程序的一部分运行（我知道，这在这个问题的上下文中没有意义），我我猜想它与使用它运行`lein ring server`它是一样的`repl`（我只是没有建立那种连接）。当我尝试用 编译和打包`lein uberjar`然后用 执行该 jar 时`java -jar`，它给了我与 Java 应用程序相当的性能。

# java - 为什么我从 Eclipse 收到消息“找不到源”？

> ID：13438322
> 
> 赞同：0
> 
> 时间：2012-11-18T07:33:14.453
> 
> 标签：java, eclipse

我是 Eclipse 的新手。当我调试并输入一些函数时，尽管代码是我的，但我收到消息“找不到源”。我该如何解决这个问题？有没有可能有帮助的插件？

我得到错误类未找到异常与源未找到但是当我按下 F6 （很多）我继续调试时，问题只是当我按下 F5 并想要潜入一些方法代码（我的顺便说一句就在不同的包）– FedorE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:36:18.047

您需要在调试配置中添加源代码：

执行以下步骤之一：

选项1：

```
 Right Click(Java Source) -> Debug As -> Java Applications 
```

选项 2：如果选项 1 没有帮助：

```
 Menu ->Run ->Debug Configurations..-> Java Applications ->RightClick & select New.
 In right side, 
   Enter Name
   Browse your Project and the class having `main` method
   In Classpath, add your project from workspace
 Click Debug button in the bottom 
```

让我知道，如果它没有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T08:34:57.913

这是因为，当您在调试时，调试器会输入没有附加源文件的部分代码。

你能做的是，

**如果您有该文件的来源：**

当您看到未找到源屏幕时，会有一个`Attach Source`按钮。按下它，然后浏览到应该包含该类源的文件。并点击确定。eclipse 将加载源代码，你会很高兴。

有时重复调试器会`step into`输入一些您可能没有源代码的 API 类或插件，那么最好的办法是重复按下`F6`直到调试器存在该类

# iphone - 如何发送段号以发挥作用？

> ID：13438323
> 
> 赞同：-1
> 
> 时间：2012-11-18T07:33:26.990
> 
> 标签：iphone, objective-c, ios, xcode

我尝试将我的部分编号设置为函数。我在用

> `-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section`

我尝试从此函数重新加载表中的部分

```
-(void)headerButtonPushed:(id)sender
{
    NSLog(@"Heder pressed: %d",[sender tag]);
    if (_state == [sender tag])
        _state = kAllSectionClose;
    else
        _state = [sender tag];
    // Here i need to reload the specific section
} 
```

我知道我有标签，但我需要使用的功能是

```
[tableView reloadSections:indexPath withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

为此我需要索引路径..

我试试

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:[sender tag] inSection:0]; 
```

但我有错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:28:41.503

所需的 indexPath 不是该行的 indexPath（这是您在上面最后一行给出的代码示例）， indexPath 是您要刷新/重新加载的部分的索引。

您知道需要重新加载的部分的索引吗？尝试对其进行硬编码，看看是否可行。如果（无论出于何种原因）您无法确定您所在的部分，您可以随时重新加载整个表格视图：`[tableView reloadData];`

# python - 抓取正文中的大部分文本

> ID：13438325
> 
> 赞同：1
> 
> 时间：2012-11-18T07:33:49.480
> 
> 标签：python, html, screen-scraping, beautifulsoup, lxml

我正在学习如何使用 lxml/BeautifulSoup，我想知道如何尽可能方便地做到这一点。源代码的主体结构如下：

```
<p class = "info">
    <!-- a bunch of other tags and text in each paragraph class -->
</p>
<p class = "filler1">
</p>
<p class = "filler2">
</p>
<p class = "filler2">
</p>
<p class = "repeat">
</p>
<p class = "repeat">
</p>
<p class = "descr">
</p>
<p class = "descr">
</p>
<p class = "descr">
</p> 
```

目前我只是在使用

```
soup = BeautifulSoup(open('savedPage.html'))
soup.body(text=True) 
```

刮掉正文中的所有文本。我想知道是否有一种快速、方便的方法来：1）刮掉“filler2”之后段落类中的所有文本，2）避免转义序列

关于2），我知道我可以通过迭代来绕过这个问题

```
for i in range(1,len(soup.body(text=True))+1):
    soup.body(text=True)[i] 
```

这将解释所有转义序列。但是，对于 1)，有没有办法在“filler2”类之后抓取所有文本，仍然保持代码简单？不想遍历整个树或编写正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:52:41.263

您可以尝试这样的事情 - 假设您正在尝试从正文中获取大部分文本。

```
data = urllib2.urlopen(link)
content = data.read()
# replace the script and style tags with html comments, so the bs4 just skips them
content = content.replace("<script", "<!--")
content = content.replace("</script>", "-->")
content = content.replace("<style", "<!--")
content = content.replace("</style>", "-->")
soup = BeautifulSoup(content, "lxml") # assuming you've imported lxml and bs4
comments = soup.findAll(text=lambda text:isinstance(text, Comment))
Comments = [comment.extract() for comment in comments] # remove the commenys
words = []
for i in soup.stripped_strings:
    print i
# i will print most of the text of the page line by line 
```

好吧，这种方法不是最干净的。但它应该可以正常工作。

# c - 为什么我在尝试安装内核模块探测 do_fork 时收到 -38 错误？

> ID：13438328
> 
> 赞同：0
> 
> 时间：2012-11-18T07:34:41.413
> 
> 标签：c, linux-kernel, arm, kernel-module, jprobe

我正在尝试将`insmod`jprobe 模块连接到有根的 Android 手机：

```
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/kprobes.h>

 /*
  * Jumper probe for do_fork.
  * Mirror principle enables access to arguments of the probed routine
  * from the probe handler.
  */

 /* Proxy routine having the same arguments as actual do_fork() routine */
 static long jdo_fork(unsigned long clone_flags, unsigned long stack_start,
               struct pt_regs *regs, unsigned long stack_size,
               int __user *parent_tidptr, int __user *child_tidptr)
 {
         printk(KERN_INFO "jprobe: clone_flags = 0x%lx, stack_size = 0x%lx,"
                         " regs = 0x%p\n",
                clone_flags, stack_size, regs);

         /* Always end with a call to jprobe_return(). */
         jprobe_return();
         return 0;
 }

 static struct jprobe my_jprobe = {
         .entry                  = jdo_fork,
         .kp = {
                 .symbol_name    = "do_fork",
         },
 };

 static int __init jprobe_init(void)
 {
         int ret;

         ret = register_jprobe(&my_jprobe);
         if (ret < 0) {
                 printk(KERN_INFO "register_jprobe failed, returned %d\n", ret);
                 return -1;
         }
         printk(KERN_INFO "Planted jprobe at %p, handler addr %p\n",
                my_jprobe.kp.addr, my_jprobe.entry);
         return 0;
 }

 static void __exit jprobe_exit(void)
 {
         unregister_jprobe(&my_jprobe);
         printk(KERN_INFO "jprobe at %p unregistered\n", my_jprobe.kp.addr);
 }

module_init(jprobe_init)
module_exit(jprobe_exit)
MODULE_LICENSE("GPL"); 
```

但它失败了：

```
 root@android:# insmod my_jprobe.ko
  [3223.32]register_jprobe failed, returned -38 
```

我收到`-38`错误，无法理解它是什么，我看到的唯一失败返回值是`-22`，是否可以在基于 arm 的芯片上安装 jprobe 模块？

`do_fork`是在`System.map`并且是在对象表中。

我需要在配置文件中打开哪些标志来支持`jpobes`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:52:55.190

```
CONFIG_OPTPROBES=y
CONFIG_PREEMPT=y
CONFIG_OPTPROBES=y
CONFIG_MODULE_UNLOAD=y
CONFIG_MODULES=y
CONFIG_KALLSYMS=y
CONFIG_KALLSYMS_ALL=y
CONFIG_DEBUG_INFO=y 
```

我还需要一个特定于我的平台的配置标志：

```
CONFIG_MODULE_FORCE_LOAD=y 
```

[http://www.kernel.org/doc/Documentation/kprobes.txt](http://www.kernel.org/doc/Documentation/kprobes.txt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:34:22.483

如果您的 System.map 中没有 register_probe 或 register_kprobe，则意味着当前内核配置中未启用 CONFIG_KPROBES。

您需要为您的平台构建内核并启用它，然后尝试您的模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-25T09:29:58.010

我在使用 Linux 4.17.0 时遇到了同样的问题。

发现4.15之后jprobes已经被取消了： [https ://lwn.net/Articles/735667/](https://lwn.net/Articles/735667/)

# jsf-2 - <p:focus标签在普通表单中工作正常，但当表单位于 a="" 的第二个选项卡中时，p:tabview它不起作用。="" 选择选项卡时设置表单第一个输入的焦点的解决方案是什么？="" 问问题<="" h1="">> ID：13438330
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jsf-2, primefaces, focus

`<P:focus`标签在普通表单中工作正常，但当表单位于 a 的第二个选项卡中时，`p:tabView`它不起作用。

选择选项卡时设置表单第一个输入的焦点的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:47:11.110

根据您的提示，我以这种方式解决问题：

```
onTabShow="tabShowHandler()" 
```

**和javascript部分：**

```
function tabShowHandler() {
   var inputUsername = $('#tabView\\:frmRegister\\:username');
   inputUsername.focus();
} 
```</p:focus标签在普通表单中工作正常，但当表单位于>

# matlab - 朴素贝叶斯分类器和判别分析的准确性还差得很远

> ID：13438331
> 
> 赞同：8
> 
> 时间：2012-11-18T07:34:48.557
> 
> 标签：matlab, statistics, cluster-analysis, bayesian, naivebayes

所以我有两种分类方法，判别分析`diaglinear`分类（朴素贝叶斯）和matlab中实现的纯朴素贝叶斯分类器，整个数据集中有23个类。第一种方法判别分析：

```
%% Classify Clusters using Naive Bayes Classifier and classify
training_data = Testdata; 
target_class = TestDataLabels;

[class, err]  = classify(UnseenTestdata, training_data, target_class,'diaglinear')

cmat1 = confusionmat(UnseenTestDataLabels, class);
acc1 = 100*sum(diag(cmat1))./sum(cmat1(:));
fprintf('Classifier1:\naccuracy = %.2f%%\n', acc1);
fprintf('Confusion Matrix:\n'), disp(cmat1) 
```

从混淆矩阵中获得**81.49%**的准确率，错误率 ( `err`) 为**0.5040**（不知道如何解释）。

第二种方法朴素贝叶斯分类器：

```
%% Classify Clusters using Naive Bayes Classifier
training_data = Testdata; 
target_class = TestDataLabels;
%# train model
nb = NaiveBayes.fit(training_data, target_class, 'Distribution', 'mn');

%# prediction
class1 = nb.predict(UnseenTestdata); 

%# performance
cmat1 = confusionmat(UnseenTestDataLabels, class1);
acc1 = 100*sum(diag(cmat1))./sum(cmat1(:));
fprintf('Classifier1:\naccuracy = %.2f%%\n', acc1);
fprintf('Confusion Matrix:\n'), disp(cmat1) 
```

**产生81.89%**的准确率。

我只做了一轮交叉验证，我是 matlab 和监督/无监督算法的新手，所以我自己做了交叉验证。我基本上只是把 10% 的数据放在一边用于测试目的，因为它每次都是随机的。我可以通过它几次并取平均准确度，但结果将用于解释目的。

**所以对于我的问题。**

在我对当前方法的文献回顾中，许多研究人员发现将单一分类算法与聚类算法混合可以产生更好的准确度结果。他们通过为他们的数据找到最佳数量的集群并使用分区集群（应该更相似）通过分类算法运行每个单独的集群来做到这一点。一个过程，您可以将无监督算法的最佳部分与监督分类算法结合使用。

现在，我正在使用一个在文学作品中多次使用的数据集，并且我正在尝试一种与其他人不太相似的方法。

我首先使用了简单的 K-Means 聚类，它令人惊讶地具有很好的聚类数据的能力。输出如下所示：

![在此处输入图像描述](../Images/1f7270a74a0cdc1d8073e46ae25aaed2.png)

查看每个集群 (K1, K2...K12) 类标签：

```
%% output the class labels of each cluster
K1 = UnseenTestDataLabels(indX(clustIDX==1),:) 
```

我发现主要每个集群在 9 个集群中都有一个类标签，而 3 个集群包含多个类标签。表明 K-means 对数据有很好的拟合。

然而，**问题**是一旦我拥有每个集群数据（cluster1，cluster2...cluster12）：

```
%% output the real data of each cluster
cluster1 = UnseenTestdata(clustIDX==1,:) 
```

我将每个集群通过朴素贝叶斯或判别分析，如下所示：

```
class1  = classify(cluster1, training_data, target_class, 'diaglinear');
class2  = classify(cluster2, training_data, target_class, 'diaglinear');
class3  = classify(cluster3, training_data, target_class, 'diaglinear');
class4  = classify(cluster4, training_data, target_class, 'diaglinear');
class5  = classify(cluster5, training_data, target_class, 'diaglinear');
class6  = classify(cluster6, training_data, target_class, 'diaglinear');
class7  = classify(cluster7, training_data, target_class, 'diaglinear');
class8  = classify(cluster8, training_data, target_class, 'diaglinear');
class9  = classify(cluster9, training_data, target_class, 'diaglinear');
class10  = classify(cluster10, training_data, target_class, 'diaglinear'); 
class11  = classify(cluster11, training_data, target_class, 'diaglinear');
class12  = classify(cluster12, training_data, target_class, 'diaglinear'); 
```

准确率变得可怕，50% 的聚类以 0% 的准确率分类，每个分类的聚类（acc1，acc2，...acc12）都有自己对应的混淆矩阵你可以在这里看到每个聚类的准确率：

![在此处输入图像描述](../Images/409aff00e9bbd8e51bd018e8a09db27a.png)

所以我的问题/问题是：我哪里出错了？我首先想到的可能是集群的数据/标签混合在一起，但是我在上面发布的内容看起来是正确的，我看不出它有什么问题。

为什么与第一个实验中使用的未见 10% 数据完全相同的数据会为相同的未见聚类数据产生如此奇怪的结果？我的意思是应该注意，NB 是一个稳定的分类器，不应该轻易过度拟合，并且看到训练数据很大，而要分类的集群是并发的过度拟合不应该发生？

**编辑：**

根据评论的要求，我已将 cmat 文件包含在第一个测试示例中，其准确度为**81.49%**，错误为**0.5040**：

![在此处输入图像描述](../Images/21bd7da707657f8c28df9c7ce25f94b4.png)

在此示例（cluster4）中还要求提供 K、class 和相关 cmat 的片段，准确度为**3.03%**：

![在此处输入图像描述](../Images/bd35536285be3db376d6dffd48160e68.png)

看到有大量的类（总共 23 个），我决定减少[1999 年 KDD 杯中](http://kdd.ics.uci.edu/databases/kddcup99/training_attack_types)概述的类，这只是应用了一些领域知识，因为一些攻击比其他攻击更相似并且属于一个总称。

然后我用 44.4 万条记录训练分类器，同时保留 10% 用于测试目的。

准确率更差**73.39%**错误率也更差**0.4261**

![在此处输入图像描述](../Images/2609bc0bf328fbd6d336995ce9376f4c.png)

看不见的数据分为以下几类：

```
DoS: 39149
Probe: 405
R2L: 121
U2R: 6
normal.: 9721 
```

类别或分类标签（判别分析的结果）：

```
DoS: 28135
Probe: 10776
R2L: 1102
U2R: 1140
normal.: 8249 
```

训练数据由以下部分组成：

```
DoS: 352452
Probe: 3717
R2L: 1006
U2R: 49
normal.: 87395 
```

我担心如果我降低训练数据以具有相似百分比的恶意活动，那么分类器将没有足够的预测能力来区分类别，但是查看其他一些文献我注意到一些研究人员删除了 U2R，因为没有t 足够的数据来成功分类。

到目前为止我尝试过的方法是一类分类器，我训练分类器只预测一个类（无效），对单个集群进行分类（精度更差），减少类标签（第二好）并保留完整的 23 个类标签（最佳精度）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T17:00:41.003

正如其他人正确指出的那样，这里至少存在一个问题：

```
class1  = classify(cluster1, training_data, target_class, 'diaglinear');
... 
```

您正在使用所有 training_data 训练分类器，但仅在子集群上对其进行评估。为了对数据进行聚类以产生任何效果，您需要**在**每个子聚类中训练不同的分类器。有时这可能非常困难——例如，Y 类的集群 C 中可能很少（或没有！）示例。这是尝试进行联合聚类和学习所固有的。

您的问题的一般框架如下：

```
Training data:
   Cluster into C clusters
   Within each cluster, develop a classifier

Testing data:
   Assign observation into one of the C clusters (either "hard", or "soft")
   Run the correct classifier (corresponding to that cluster) 
```

这

```
class1  = classify(cluster1, training_data, target_class, 'diaglinear'); 
```

不这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T17:26:40.370

这是一个非常简单的示例，它准确地显示了它应该如何工作以及出了什么问题

```
%% Generate data and labels for each class
x11 = bsxfun(@plus,randn(100,2),[2 2]);
x10 = bsxfun(@plus,randn(100,2),[0 2]);

x21 = bsxfun(@plus,randn(100,2),[-2 -2]);
x20 = bsxfun(@plus,randn(100,2),[0 -2]);

%If you have the PRT (shameless plug), this looks nice:
%http://www.mathworks.com/matlabcentral/linkexchange/links/2947-pattern-recognition-toolbox
% ds = prtDataSetClass(cat(1,x11,x21,x10,x20),prtUtilY(200,200));

x = cat(1,x11,x21,x10,x20);
y = cat(1,ones(200,1),zeros(200,1));

clusterIdx = kmeans(x,2); %make 2 clusters
xCluster1 = x(clusterIdx == 1,:);
yCluster1 = y(clusterIdx == 1);
xCluster2 = x(clusterIdx == 2,:);
yCluster2 = y(clusterIdx == 2);

%Performance is terrible:
yOut1  = classify(xCluster1, x, y, 'diaglinear');
yOut2  = classify(xCluster2, x, y, 'diaglinear');

pcCluster = length(find(cat(1,yOut1,yOut2) == cat(1,yCluster1,yCluster2)))/size(y,1)

%Performance is Good:
yOutCluster1  = classify(xCluster1, xCluster1, yCluster1, 'diaglinear');
yOutCluster2  = classify(xCluster2, xCluster2, yCluster2, 'diaglinear');

pcWithinCluster = length(find(cat(1,yOutCluster1,yOutCluster2) == cat(1,yCluster1,yCluster2)))/size(y,1)

%Performance is Bad (using all data):
yOutFull  = classify(x, x, y, 'diaglinear');
pcFull = length(find(yOutFull == y))/size(y,1) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T12:28:59.207

看看你`cmat1`的第一个例子的数据（准确率为 81.49%），你得到高准确率的主要原因是你的分类器得到了大量的`class 1`和`class 4`正确的。几乎所有其他类都表现不佳（得到零正确预测）。这与您的上一个示例一致（首先使用 k-means），其中 cluster7 的 acc7 为 56.9698。

**编辑**：似乎在 中`cmat1`，我们没有超过一半的类的测试数据（查看全零行）。所以你只能知道类的一般性能`1`和`4`良好，如果你先进行聚类，将获得相似的性能。但是对于其他类，这并不能证明它可以正常工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-20T15:44:19.483

对数据进行聚类后，您是否为每个聚类训练分类器？如果您不这样做，那么这可能是您的问题。

尝试这样做。首先，对数据进行聚类并保留质心。然后，使用训练数据，为每个集群训练一个分类器。对于分类阶段，找到您要分类的对象的最近质心并使用相应的分类器。

单个分类器不是一个好主意，因为它会学习整个数据集的模式。但是，您在集群时想要的是学习描述每个集群的本地模式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-20T18:59:05.417

考虑这个函数调用：

```
classify(cluster1, training_data, target_class, 'diaglinear'); 
```

`training_data`是整个特征空间的一个样本。那是什么意思？您正在训练的分类模型将尝试最大化整个特征空间的分类准确度。这意味着，如果您显示与训练数据具有相同行为的测试样本，您将获得分类结果。

关键是您没有显示与训练数据具有相同行为的测试样本。事实上，cluster1 只是您的特征空间的一个分区的样本。更具体地说，cluster1 中的实例对应于特征空间的样本，这些样本比其余的质心更接近 cluster1 的质心，这可能会降低分类器的性能。

所以我建议你以下：

1.  聚类您的训练集并保持质心
2.  使用训练数据，为每个集群训练一个分类器。也就是说，仅使用属于该集群的实例来训练分类器。
3.  对于分类阶段，找到您要分类的对象的最近质心并使用相应的分类器。

# ruby-on-rails - 在rails上部分渲染另一个控制器的视图ruby

> ID：13438333
> 
> 赞同：1
> 
> 时间：2012-11-18T07:34:52.053
> 
> 标签：ruby-on-rails, twitter-bootstrap, views, partial-views

我正在使用此处找到的 twitter Boostraps 选项卡功能：http: [//twitter.github.com/bootstrap/components.html#navs](http://twitter.github.com/bootstrap/components.html#navs)

在这个导航内容窗口中，我试图呈现一个显示“课程”的视图。在 views/courses/_show.html.erb 中找到的视图如下所示：

```
<div class="center hero-unit">
<h1><%= @course.course_name %></h1>

<%= link_to 'New Question Set',new_answer_path(:course_ID => @course.id), :class => "btn btn-large btn-primary" %>
<%= link_to 'Launch Session!', edit_course_path, :class => "btn btn-large btn-primary" %>
</div> 
```

我正在尝试渲染它并在views/instructor/show.html.erb中使用以下代码失败

```
<% courses.each do |c| %>
<div class="tab-pane" id="<%=c.course_name%>">
<%= render :partial => 'courses/show', :locals => {@course=>c} %>
</div> 
```

我收到以下错误：

> /app/views/courses/_show.html.erb:1：语法错误，意外'='，期待keyword_end ...tput_buffer = @output_buffer；= local_assigns[:];show = loca... ... ^ /app/views/courses/_show.html.erb:1：语法错误，意外']'，需要 tSTRING_CONTENT 或 tSTRING_DBEG 或 tSTRING_DVAR 或 tSTRING_END ... tput_buffer；= local_assigns[:];show = local_assigns[:show];... ...

说它在我的课程/_show.html.erb 的第 1 行失败了

我的课程控制器如下所示：

```
class CoursesController < ApplicationController
  # GET /courses
  # GET /courses.json
  def index
    @courses = Course.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @courses }
    end
  end

  # GET /courses/1
  # GET /courses/1.json
  def show
    @course = Course.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render :json => @course }
    end
  end

  # GET /courses/new
  # GET /courses/new.json
  def new
    @course = Course.new(instructor_ID: params[:instructor_ID])

    respond_to do |format|
      format.html # new.html.erb
      format.json { render :json => @course }
    end
  end

  # GET /courses/1/edit
  def edit
    @course = Course.find(params[:id])
  end

  # POST /courses
  # POST /courses.json
  def create
    @course = Course.new(params[:course])

    respond_to do |format|
      if @course.save
        format.html { redirect_to @course, :notice => 'Course was successfully created.' }
        format.json { render :json => @course, :status => :created, :location => @course }
      else
        format.html { render :action => "new" }
        format.json { render :json => @course.errors, :status => :unprocessable_entity }
      end
    end
  end

  # PUT /courses/1
  # PUT /courses/1.json
  def update
    @course = Course.find(params[:id])

    respond_to do |format|
      if @course.update_attributes(params[:course])
        format.html { redirect_to @course, :notice => 'Course was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render :action => "edit" }
        format.json { render :json => @course.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

注意：我在控制器中省略了一些方法，如删除以节省空间。

有任何想法吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:49:08.470

在`@course=>c`将@ 更改为冒号。

# c++ - 什么时候不能内联函数？

> ID：13438336
> 
> 赞同：1
> 
> 时间：2012-11-18T07:35:27.570
> 
> 标签：c++, function, inline

> **可能重复：**
> [何时使用内联函数，何时不使用？](https://stackoverflow.com/questions/1932311/when-to-use-inline-function-and-when-not-to-use-it)

在什么情况下**可以**（不应该）**不内联**函数（仅限 C++）？

[我知道](http://books.google.co.in/books?id=TN9wQjjDwp0C&lpg=PP1&pg=PA83#v=onepage&q&f=false)的两个条件是：

1\. 如果函数有递归调用

2\. 如果函数中有静态变量

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T07:40:47.677

`inline`是 C++ 的关键字，但内联是编译器后端执行的通用过程，通常在指令序列已经生成之后。

AC 编译器还将内联函数，而 C++ 编译器将内联不是`inline`. C++ 编译器也可能`inline`由于任何原因无法内联函数。关键字实际存在是为了指定一个函数在不同的翻译单元（源文件）中可能有多个相同的定义。

静态变量对是否可以内联没有特别的影响。也许有些编译器很难链接全局变量引用的结果结构，但这更像是一个错误而不是经验法则。

递归函数也可以内联。递归调用应转换为分支。然后可以通过循环展开来定位分支。

编译成超过一千字节代码的函数通常不会被内联。但是在这种情况下，编译器可能会提供`#pragma`指令或特定于平台的属性来强制内联。

阻止函数内联的最大因素是在代码生成时编译器是否无法使用其源代码。链接时优化打开了内联函数的可能性，这些函数是`extern`和不是`inline`由 DLL 提供的函数当然是不受限制的。但是，您仍然可以通过 JIT 风格的执行引擎运行它，并且可以内联（拼接在一起）它喜欢的任何随机片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T07:48:30.993

**函数不能**被内联的唯一情况是编译单元中没有函数的定义。即使这样也不会阻止链接时间优化器的链接时间内联。

请注意，`inline`关键字实际上只是一个提示——编译器可能会选择不使用它来内联函数，而选择不使用它来内联函数。

# ios - 崩溃后如何正确关闭 AVAudioRecorder 文件

> ID：13438342
> 
> 赞同：1
> 
> 时间：2012-11-18T07:37:06.213
> 
> 标签：ios, core-audio, avaudioplayer, avaudiorecorder

我想知道是否有人对如何正确关闭应用程序崩溃时打开并主动录制的音频文件有任何想法。一个简单的测试方法是使用模拟器开始录制，然后在 Xcode 中按停止。

我相信正在发生的是音频文件从未关闭，因此任何再次打开它进行播放的尝试都会导致 AVAudioPlayer 出现错误。所以现在这个文件几乎没用了。我希望能够恢复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T17:10:37.197

根据音频文件格式，正确关闭文件所需的信息可能在应用程序崩溃和/或终止期间丢失。

但是，对于某些音频文件格式，可能存在尝试从某些类型的损坏或损坏文件中提取音频数据的工具（非 Apple、商业等）。

# mysql - 无法更新存储函数/触发器中的表，因为它已被调用此存储函数/触发器的语句使用

> ID：13438348
> 
> 赞同：0
> 
> 时间：2012-11-18T07:38:20.170
> 
> 标签：mysql, triggers, insert

在 MySQL 中，我刚刚做了这个触发器来设置一个表的最后修改日期，如果与它相关的新记录被插入到链接表中

```
create trigger trg_badge after insert on tbl_badge for each row 
UPDATE tbl_sub_model SET last_modified_date = NOW() 
WHERE sub_model_sk = NEW.sub_model_sk; 
```

当我运行一个填充的脚本时，`tbl_sub_model`我`tbl_badge`得到：

```
Error Code: 1442\. Can't update table 'tbl_sub_model' in stored 
function/trigger because it is already used by statement which 
invoked this stored function/trigger. 
```

当我使用单独的脚本插入时一切正常，但如果两个语句都在同一个脚本中，情况就不行了。有没有办法用相同的 .sql 脚本插入两个表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:57:21.980

啊...解决了它，我的插入语句将 tbl_sub_model 加入到其他几个语句中，以获取与正确的新记录相关的 sub_model_sk。

现在我知道我将在脚本末尾创建触发器，没什么大不了的。

# c# - C# 中的体素地形

> ID：13438353
> 
> 赞同：0
> 
> 时间：2012-11-18T07:39:05.763
> 
> 标签：c#, opengl, directx, voxel

我正在寻找在 C# 中创建一个简单的体素引擎。我知道很多 XNA，但听说在 OpenGL/DirectX 中做会更好。有人知道我将如何完成这样的事情吗？我不想要图书馆，因为我想从头开始学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:00:01.930

OpenGL 和 Direct3D 都是“三角形”API——它们不是体积渲染器。我们需要有关您希望体素引擎做什么的更多信息。

如果您想直接渲染体素，那么最好的办法是避免使用 OpenGL 和 Direct3D，并编写自己的 OpenCL 或 CUDA 渲染器（甚至是 CPU 上的 100% 软件）。

将体素渲染到 OpenGL 或 Direct3D 需要将体素世界转换为三角形 - 使用诸如行进立方体之类的东西。如果体素世界是相当静态的并且体素很大（如 Minecraft），这种技术会很有效。然而，这种技术在大规模变形的世界中不起作用，例如，因为您必须定期重新生成三角形场景，这将是昂贵的。

# c# - 如何将零附加到已经具有二进制值的数组

> ID：13438356
> 
> 赞同：1
> 
> 时间：2012-11-18T07:39:45.227
> 
> 标签：c#

我有一个十进制值 126，它使用以下代码转换为二进制值：

```
binary[i] = Convert.ToString(bmparrayelement[i], 2); 
```

然后我得到的值为“111 1110”，这是正确的。

然后我想在前缀“00 0111 1110”中附加零和这个值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T07:53:30.217

尝试这样的事情： -

```
 string s1 = Convert.ToString(byteArray[20], 2).PadLeft(10, '0'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T07:59:22.750

对不起，如果我误解了，但你为什么不能做到以下几点？

```
binary[i] = "00 0" + Convert.ToString(bmparrayelement[i], 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T07:46:51.983

尝试这个：

```
var binary = new byte[] {1, 1, 1, 1, 1, 1, 0};
var zeroed = new byte[] {0, 0};
binary = zeroed.Concat(binary).ToArray(); 
```

**更新** 在 .net 2.0 中，您可以使用：

```
 const int number = 2;
        var binary = new byte[] {1, 1, 1, 1, 1, 1, 0};

        var a = new byte[binary.Length + number];
        binary.CopyTo(a, number);
        binary = a; 
```

# opengl - Opengl奇怪的查看

> ID：13438360
> 
> 赞同：1
> 
> 时间：2012-11-18T07:40:29.127
> 
> 标签：opengl

从下图中可以看出，我有两个并排的三角形（从前面看）。但是当我从右侧查看它时，黄色三角形显示为好像它位于绿色三角形前面，因为它位于绿色三角形后面（见右图），所以它不应该可见，为什么会发生这种情况？从左边看很好（见左图）。谢谢。

正视图：

![正视图](../Images/7dc7d4620d82527b556c0782fed428c9.png)

右视图（为什么黄色三角形仍然可见？）：

![在此处输入图像描述](../Images/52226185e8a4b518d62e3a0561c3c001.png)

左视图（从这里看很好）：

![在此处输入图像描述](../Images/a9dfa40ba3e75e3e2533d661e0a09164.png)

这是我的渲染方法。即使我不使用 glColor4f 并以现代方式进行着色，我仍然得到相同的结果。我还设置了 glEnable(GL_DEPTH); 和 glDepthFunc(GL_LESS);

```
void display(){
glClear(GL_COLOR_BUFFER_BIT);

control(0.2, 0.2, mi);
view = updateCam();

glEnableVertexAttribArray(0);
glBindBuffer(GL_ARRAY_BUFFER, vbo);
glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);
glEnableClientState(GL_VERTEX_ARRAY);

model = glm::rotate(glm::mat4(1.0), 45, glm::vec3(0, 1, 0));
glColor4f(0, 1, 0, 1);
glDrawArrays(GL_TRIANGLES, 0, 3);
resetMatrix();

model = glm::translate(glm::mat4(1.0), glm::vec3(5, 0, 0));
model = glm::rotate(model, 45, glm::vec3(0, 1, 0));
glColor4f(1, 1, 0, 1);
glDrawArrays(GL_TRIANGLES, 0, 3);

glDisableVertexAttribArray(0);
resetMatrix();
SDL_GL_SwapBuffers(); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:42:10.497

您只是在清除颜色缓冲区。深度缓冲区仍包含前一帧的深度值，因此您的 Z 测试无法按预期工作。

清除它们：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

# php - php如何按时间排序文件夹

> ID：13438364
> 
> 赞同：0
> 
> 时间：2012-11-18T07:41:31.930
> 
> 标签：php, directory, subdirectory

如何按时间排序文件夹示例我在目录中创建最后一个/最新文件夹，因此最后一个文件夹显示在顶部。

这是仅显示目录的代码

```
<?php

function folderlist(){
  $startdir = './';
  $ignoredDirectory[] = '.'; 
  $ignoredDirectory[] = '..';
   if (is_dir($startdir)){
       if ($dh = opendir($startdir)){
           while (($folder = readdir($dh)) !== false){
               if (!(array_search($folder,$ignoredDirectory) > -1)){
                 if (filetype($startdir . $folder) == "dir"){
                       $directorylist[$startdir . $folder]['name'] = $folder;
                       $directorylist[$startdir . $folder]['path'] = $startdir;
                   }
               }
           }
           closedir($dh);
       }
   }
return($directorylist);
}

$folders = folderlist();
    foreach ($folders as $folder){
    $path = $folder['path'];
    $name = $folder['name'];

echo '<li><a href="' .$path .'index.php?album=' .$name . '" class="style1"><font face="Tahoma" class="ws10"><B>' . $name . '</B></a><br /></li>';
  }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:52:32.383

为此，您需要首先获取文件夹的创建时间，并将其添加为数组项的键的开始，然后您将能够根据键进行排序......像这样

```
<?php
function folderlist(){
  $directorylist = array();
  $startdir = './';
  $ignoredDirectory[] = '.';
  $ignoredDirectory[] = '..';
   if (is_dir($startdir)){
       if ($dh = opendir($startdir)){
           while (($folder = readdir($dh)) !== false){
               if (!(array_search($folder,$ignoredDirectory) > -1)){
                 if (filetype($startdir . $folder) == "dir"){
                       $created = filectime($startdir . $folder);
                       $directorylist[$created . $startdir . $folder]['name'] = $folder;
                       $directorylist[$created . $startdir . $folder]['path'] = $startdir;
                   }
               }
           }
           closedir($dh);
       }
   }

  ksort($directorylist);
  return($directorylist);
}

$folders = folderlist();

$total_files = 0;
foreach ($folders as $folder){
    $path = $folder['path'];
    $name = $folder['name'];
    $count = iterator_count(new DirectoryIterator($path . $name));
    $total_files += $count;

    echo '<li>';
    echo '<a href="' .$path .'index.php?album=' .$name . '" class="style1">';
    echo '<strong>' . $name . '</strong>';
    echo ' (' . $count . ' files found)';
    echo '</a>';
    echo '</li>';
}
  echo "Total Files:". $total_files;
?> 
```

请注意正在使用的新 $created 变量，以及用于按其键对数组进行排序的 ksort() 方法。

您可以使用 krsort 以相反的顺序进行排序。

您还可以使用 filemtime() 而不是 filectime() 将排序更改为基于修改的日期

# android - Android，使用 javah 生成 jni 头文件，显示找不到 org.opencv.core.Mat 的错误

> ID：13438368
> 
> 赞同：6
> 
> 时间：2012-11-18T07:42:02.973
> 
> 标签：android, opencv, java-native-interface, javah

`javah`当我在 java 类中编译本机方法以生成 JNI 头文件时，我只是遇到了一个恼人的 jni 问题。

如果该类使用了 3rd-party 包，例如：org.opencv.core.Mat，`javah`则会显示找不到 org.opencv.core.Mat 类的错误。

OpenCV 示例代码如下：

```
package org.opencv.samples.fd;

import org.opencv.core.Mat;
import org.opencv.core.MatOfRect;

public class DetectionBasedTracker
{
public DetectionBasedTracker(String cascadeName, int minFaceSize) {
    mNativeObj = nativeCreateObject(cascadeName, minFaceSize);
}

public void start() {
    nativeStart(mNativeObj);
}

public void stop() {
    nativeStop(mNativeObj);
}

public void setMinFaceSize(int size) {
    nativeSetFaceSize(mNativeObj, size);
}

public void detect(Mat imageGray, MatOfRect faces) {
    nativeDetect(mNativeObj, imageGray.getNativeObjAddr(), faces.getNativeObjAddr());
}

public void release() {
    nativeDestroyObject(mNativeObj);
    mNativeObj = 0;
}

private long mNativeObj = 0;

private static native long nativeCreateObject(String cascadeName, int minFaceSize);
private static native void nativeDestroyObject(long thiz);
private static native void nativeStart(long thiz);
private static native void nativeStop(long thiz);
private static native void nativeSetFaceSize(long thiz, int size);
private static native void nativeDetect(long thiz, long inputImage, long faces);
} 
```

首先，我使用了命令

```
javah -classpath bin/classes -bootclasspath (the directory of android.jar) -d jni (packageName + ClassName) , shows the error "can't find the org.opencv.core.Mat 
```

然后我将命令修改为

```
javah - classpath bin/classes - bootclasspath (the dir of android.jar) ; (the dir of the opencv lib jar)  -d jni ..." ", this time it shows error 
```

**例外**

```
Exception in thread "main" java.lang.IllegalArgumentException: Not a valid class
 name: E:\Computer_Language\Java\soft_android\OpenCV-2.4.3-rc-android-sdk\OpenCV
-2.4.3-rc-android-sdk\sdk\java\bin\opencv library - 2.4.3.jar
    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:177)
    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:68)
    at com.sun.tools.javah.JavahTask.run(JavahTask.java:509)
    at com.sun.tools.javah.JavahTask.run(JavahTask.java:335)
    at com.sun.tools.javah.Main.main(Main.java:46) 
```

我认为，在其中添加 opencv lib 的目录`-bootclasspath`是有用且必要的。错误是因为我刚刚添加了两个路径`-bootclasspath`或者格式有问题？

真的很迷茫。请提供一些帮助，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-26T03:19:49.253

这就是我所做的：

1.打开命令行，输入(project)/bin/classes: 2.type: javah -classpath (opencv4android sdk path)/java/bin/classes:(你的项目位置)/bin/classes -jni (你的java包含本机库接口的类文件）

在我的项目中。我做了：

javah -classpath /home/zijun/Dev/adt/OpencvAndroid/sdk/java/bin/classes:/home/zijun/workspace/LocTM/bin/classes -jni com.brainport.loctm.TMatching

这适用于 Linux Ubuntu 12.04.02 64 位操作系统

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-24T08:48:29.283

我也遇到了同样的问题，花了我半天时间。我只是将DetectionBasedTracker.java复制到我的项目中。我使用Android Studio。当我使用ExternalTools>javah生成.h文件时，控制台打印找不到org.opencv.core .Mat.copy mat.java & matofRect.java到目录DetectionBasedTracker.java存在只是导致找不到更多的java类。最后，我发现这个问题是由java文件中的import *子句引起的。我们很少使用java类在我们定义的本机方法中。所以我剪切了这些java方法并得到了这个：

```
package cn.ntu.tonguefur.nativemethod;
public class DetectionBasedTracker{
private static native long nativeCreateObject(String cascadeName,int minFaceSize);
//Other native methods
private static native void nativeDetect(long thiz,long inputImage,long faces);
} 
```

现在你可以自由地使用javah命令生成.h文件。之后，添加java方法和导入你需要的包。

# java - java.lang.IllegalArgumentException：使用反射时参数类型不匹配

> ID：13438369
> 
> 赞同：8
> 
> 时间：2012-11-18T07:42:09.087
> 
> 标签：java, reflection

下面是我使用反射调用方法的代码，但我总是遇到异常

```
List<PdAttrKey> attrKeys = new ArrayList<PdAttrKey>();
Properties adapterProps = new Properties();

PdReadRequest pdReadRequest = new PdReadRequest(1L, 1L, (short) 0, new Date(),
dataDurationSec, 2L, 3L, attrKeys, null, adapterProps);

PdAdapterUserReadOnlyGemsReader adapter1 = new PdAdapterUserReadOnlyGemsReader();

PdReader reader = adapter1.acquireReader(pdReadRequest);

UserCacheDoImpl userDos = Some Value;

Method method = getClassMethod("createPdRecordFromUserDO");

// This line is throwing me exception. And I don't know why?
PdRecord onePdsxRecord = (PdRecord) method.invoke(reader, userDos); 
```

这是下面的方法，我从中获取一个类的所有方法名称。

```
 private Method getClassMethod(String methodName) {
        Method method = null;

        Method[] methodList = PdAdapterUserReadOnlyGemsReader.PdUserReadOnlyGemsReader.class
                .getDeclaredMethods();
        for (Method m : methodList) {
            if (m.getName().equals(methodName)) {
                method = m;
                method.setAccessible(true);
                break;
            }
        }

        return method;
    } 
```

更多代码：-

```
private PdRecord createPdRecordFromUserDO(UserCacheDoImpl userCache) {
   // Some code here
} 
```

这是我得到的例外。知道为什么吗？

```
java.lang.IllegalArgumentException: argument type mismatch
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:599) 
```

任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T13:46:11.863

请检查是否存在多个名为“createPdRecordFromUserDO”的方法。看起来不止一个，但有不同的论点。

您的方法 getClassMethod 返回它找到的第一个方法，但这可能是错误的。检查 methodList.length > 1，那么这就是 bug 的原因。

如果找到多个具有给定名称的方法，请重新考虑您想要做什么。

# mysql - codeigniter，mysql查询性能问题

> ID：13438371
> 
> 赞同：3
> 
> 时间：2012-11-18T07:42:30.943
> 
> 标签：mysql, performance, codeigniter, cpu-usage

我正在使用 codeigniter 和 mysql 并应用在具有 200 MB 内存和 1 GB CPU 的服务器中，在表 a（索引：idx_cat）中有 40.000 行，类别中有 44 行（索引：primary），我需要获得前 4 名在每个类别中，这是我的查询

```
SELECT id,title,preview,created,image,dummy,name 
FROM
 (
 select news.id AS id,news.title AS title,preview,created,news.image,category_id ,
         @num := if(@cat = category_id, @num + 1, 1) as row_number,
         @cat := category_id as dummy,
        name,d_order
 from news use index (idx_cat) inner join category b on category_id=b.id
 where 
    news.category_id in (9,8,3,35,57,56,15,58,41,42,43,44,34,52,37,38,36,11) and
    news.status = 1 
 having row_number <= 4 
 order by dummy ASC,news.created desc
 ) as a 
order by d_order ASC,created DESC

id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   PRIMARY     <derived2>  ALL     NULL    NULL    NULL    NULL    **29639**   Using filesort
2   DERIVED     b   ALL     PRIMARY,id  NULL    NULL    NULL    **44**  Using where; Using temporary; Using filesort
2   DERIVED     news    ref     idx_cat     idx_cat     **4**   b.id    846     Using where 
```

并获得了其他 6 个简单的加入，例如

```
 select id,name from others a inner join b on a.cat_id = b.id 
```

该网站的加载速度非常快，大约 1 秒或 2 秒，但如果在另一个选项卡中打开，而另一个选项卡的加载速度有点慢，比如 5-7 秒。

奇怪的是 cpu 使用率达到 100 % 并且内存使用率得到了 +_ 40 MB 来完成一个视图（我确定没有其他打开）但 CI PROFILING 它说只是用户 4MB。

我也有加载模型、帮助程序和按需库，只有两个（url 和表单）我放在自动加载文件中。

如果我打开 5 到 10 个窗口，它会说内存不足，你们有什么建议吗？这让我发疯 -_-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:56:03.093

要减小内部选择结果的大小，请将字段的选择和连接移动`name`到`d_order`外部选择

```
SELECT id,title,preview,created,image,dummy,name,d_order FROM
     (
 select news.id AS id,news.title AS title,preview,created,news.image,category_id ,
         @num := if(@cat = category_id, @num + 1, 1) as row_number,
         @cat := category_id as dummy
 from news use index (idx_cat) 
 where 
    news.category_id in (9,8,3,35,57,56,15,58,41,42,43,44,34,52,37,38,36,11) and
    news.status = 1 
 having row_number <= 4 
 order by dummy ASC,news.created desc
 ) as a inner join category b on category_id=b.id
order by d_order ASC,created DESC 
```

可能行数仍然很大，但我们减少了内存。您选择的方式需要处理整个新闻表，然后删除不需要的行，这是非常昂贵的计算。如果您仅使用 news.id、cat.id 和 minimun 字段进行新闻预选，可能会更有效，因此新闻正文重字段不在重选择范围内。

```
SELECT id,c.title,c.preview,created,c.image,dummy,name,d_order FROM
     (
 select news.id AS id,category_id ,
         @num := if(@cat = category_id, @num + 1, 1) as row_number,
         @cat := category_id as dummy
 from news use index (idx_cat) 
 where 
    news.category_id in (9,8,3,35,57,56,15,58,41,42,43,44,34,52,37,38,36,11) and
    news.status = 1 
 having row_number <= 4 
 order by dummy ASC,news.created desc
 ) as a 
    inner join category b on category_id=b.id
    inner join news c on a.id = c.id
    order by d_order ASC,created DESC 
```

可能我有一些 sintax 错误，但在这里写起来有点困难，而且我没有要测试的数据。希望你明白我看到问题的地方。

# c - 解组以太网帧和数据对齐

> ID：13438373
> 
> 赞同：0
> 
> 时间：2012-11-18T07:42:40.130
> 
> 标签：c, parsing, header, ethernet, unmarshalling

所以我试图解组以太网帧 eth 和 ip 标头。我有一个程序框架，它从文件中读取输入数据并为我提供一个带有帧数据的结构。

我已经用谷歌搜索并阅读了有关该主题的其他帖子，但我无处可去。例如： [数据对齐与网络编程](https://stackoverflow.com/questions/3848388/data-alignment-with-network-programming) [http://en.wikipedia.org/wiki/Data_structure_alignment](http://en.wikipedia.org/wiki/Data_structure_alignment)

我不确定问题是什么。显然我是 C 的新手。

如果我只是尝试使用 memcpy 并将数据复制到我的 eth 和 ip 标头结构中，大多数数据都很好，但不是我的 ip 结构中的 ip 地址。我还尝试以 1byte、2byte 和 4byte 块读取输入结构，但它没有给我正确的数据。

以下是来自输入文件的输入数据框示例：

```
200 0000 0002 0200 0000 0012 0800 4500 0026 17d4 81e7 ff01 0000 0a02 0002 0c0c 0c0c 0000 e802 c04b 0004 3e89 3325 0006 ddef 0809 
```

这是我使用的标题结构

```
struct ethhdr{
    char     da[6];
    char     sa[6];
    uint16_t pt;
};
typedef struct ethhdr ethhdr;

struct iphdr{
#ifdef WORDS_BIGENDIAN
    unsigned int ip_v:4;        /* version */
    unsigned int ip_hl:4;       /* header length */
#else
    unsigned int ip_hl:4;       /* header length */
    unsigned int ip_v:4;        /* version */
#endif 
    uint8_t  ip_tos;            /* type of service */
    uint16_t ip_len;            /* total length */
    uint16_t ip_id;         /* identification */
    uint16_t ip_off;            /* fragment offset field */
    uint8_t  ip_ttl;            /* time to live */
    uint8_t  ip_p;          /* protocol */
    uint16_t ip_sum;            /* checksum */
    uint32_t ip_src, ip_dst;            /* source and dest address */
};
typedef struct iphdr iphdr; 
```

我正在服务的输入数据结构。

```
struct fe_context{
    char   *pkt;         /* Pointer to packet */
    size_t  len;         /* Length of packet */
    void   *if_in;       /* Incoming interface - handle */
};
typedef struct fe_context fe_context; 
```

我如何绑定读取数据的示例代码。

```
int fe_process(fe_context *c)
{
  printf("\n\nPacket received!\n");
  printf("memcpy to header structs:\n");
  ethhdr * ethh = (ethhdr *) malloc(sizeof(ethhdr));
  iphdr * iph = (iphdr *) malloc(sizeof(iphdr));
  memcpy(ethh, c->pkt, sizeof(ethhdr));
  memcpy(iph, c->pkt+sizeof(ethhdr), sizeof(ethhdr));

  printf("MAC SA: %02x:%02x:%02x:%02x:%02x:%02x\n", ethh->sa[0], ethh->sa[1], ethh->sa[2], 
      ethh->sa[3], ethh->sa[4], ethh->sa[5]);
  printf("MAC P: %04x\n", ntohs(ethh->pt));

  printf("IP Ver: %x\n", ntohl(iph->ip_v));
  printf("IP IHL: %x\n", ntohl(iph->ip_hl));
  printf("IP TTL: %i\n", iph->ip_ttl);
  printf("IP Checksum: %x\n", ntohl(iph->ip_sum));
  printf("IP SRC: %08x\n", ntohl(iph->ip_src));
  printf("IP DST: %08x\n", ntohl(iph->ip_dst));

  char * cp = c->pkt;
  printf("\nPacket read by char:\n");
  char data;
  int p;
  for(p = 0; p < 52; p++) {
    data = *cp;
    cp++;
    printf("%02x", data);
    if(p%2==1) {
      printf(" ");
    }
  }
  printf("\n\n");
  cp = c->pkt;
  printf("Packet read by uint16_t:\n");
  uint16_t data16;
  for(p = 0; p < 52/2; p++) {
    data16 = *cp;
    cp+=2;
    printf("%04x ", ntohs(data16));
  }
  printf("\n\n");
  cp = c->pkt;
  printf("Packet read by uint32_t:\n");
  uint32_t data32;
  for(p = 0; p < 52/4; p++) {
    data32 = *cp;
    cp+=4;
    printf("%08x ", ntohl(data32));
  }
  printf("\n\n");

  return 0;
} 
```

这是上面输入的测试数据的输出。

```
Packet received!
memcpy to header structs:
MAC SA: 02:00:00:00:00:12
MAC P: 0800
IP Ver: 4000000
IP IHL: 5000000
IP TTL: 255
IP Checksum: 0
IP SRC: 0a020000
IP DST: 00000000 // It looks good up until here. this should be 0c0c0c0c

Packet read by char:
0200 0000 0002 0200 0000 0012 0800 4500 0026 17ffffffd4 ffffff81ffffffe7 ffffffff01 0000 0a02 0002 0c0c 0c0c 0000 ffffffe802 ffffffc04b 0004 3effffff89 3325 0006 ffffffddffffffef 0809 

Packet read by uint16_t:
0200 0000 0000 0200 0000 0000 0800 4500 0000 1700 81ff ffff 0000 0a00 0000 0c00 0c00 0000 e8ff c0ff 0000 3e00 3300 0000 ddff 0800 

Packet read by uint32_t:
02000000 00000000 00000000 08000000 00000000 81ffffff 00000000 00000000 0c000000 e8ffffff 00000000 33000000 ddffffff 
```

如您所见，结构中的数据一直很好，直到 DST IP。这可能是因为填充/数据对齐吗？通过查看读取的字符，问题似乎发生在数据的 ip 标头部分？当我按 char 阅读时，这些 'f' 是从哪里来的？

我尝试检查 c->pkt 指针地址及其偶数。我什至不确定这是否重要？我想这将永远是因为 malloc 为我得到了它。读取这些数据以进行解析/解组的正确方法是什么？我将对这些数据进行更改，因此我更愿意将数据放入整洁的结构中。

我的代码中是否有一个简单的错误，或者我是否以错误的方式处理它？任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:32:19.883

我注意到你在线上犯了一个错误：

`memcpy(iph, c->pkt+sizeof(ethhdr), sizeof(ethhdr));`

您正在复制`sizeof(ethhdr)`IP 标头的字节，而不是`sizeof(iphdr)`您想要的。好像你打错字了。

# javascript - 将字符串拆分为两个单独的部分

> ID：13438374
> 
> 赞同：1
> 
> 时间：2012-11-18T07:42:43.297
> 
> 标签：javascript

假设我有一个包含域的字符串：

```
var domain = "http://google.com"; 
```

每次脚本运行时，我都想将这个脚本随机分成两部分。

因此，如果我第一次运行它，它可以给我以下结果：

```
part 1: http://go
part 2: ogle.com 
```

第二次运行将产生：

```
part 1: http://goog
part 2: le.com 
```

每次完全随机。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T07:45:29.303

生成一个介于 0 和字符串长度之间的随机数。从中获取一个子字符串。

```
(function () {

    "use strict";

    var domain, number, pieces;

    domain = "http://google.com";
    number = Math.ceil(Math.random() * (domain.length - 1));
    pieces = [domain.substring(number, -number), domain.substring(number)];

    console.log(pieces);

}());​ 
```

演示： http: [//jsfiddle.net/KTP​​Xt /](http://jsfiddle.net/KTPXt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T08:04:38.010

嘿，这就是我的做法。也许它也对你有用。

```
 var domain = "http://google.com";

        var lengthOfdomain = domain.length;

        var post1 = Math.floor((Math.random()*lengthOfdomain)+1);

        var post2 = 0;

        if(post1==lengthOfdomain){
           if((lengthOfdomain%2)==0){
              post1 = lengthOfdomain/2;
              post2 = post1;
            }else{
               post1 = (lengthOfdomain-1)/2;
               post2 = post1+1;
            }
        }else{
            post2 = lengthOfdomain-post1;
        }

        if(post1>post2){
           var dom1 = domain.substr(0,post2);
           var dom2 = domain.substr(post2,post1);
        }else{
           var dom1 = domain.substr(0,post1);
           var dom2 = domain.substr(post1,post2);
        }

        alert(dom1+' + '+dom2); 
```

# java - netty 4中的超时事件

> ID：13438385
> 
> 赞同：3
> 
> 时间：2012-11-18T07:44:15.423
> 
> 标签：java, sockets, netty

嗨，我想收到一个`messageReceived`在预期时间内没有被调用的事件。我尝试了`ReadTimeoutHandler`它在哪里产生异常，我可以在`exceptionCaught()`哪里处理我会做一些工作并在不关闭上下文的情况下返回。但在那之后我得到了一堆例外

```
Nov 18, 2012 8:56:34 AM io.netty.channel.ChannelInitializer
WARNING: Failed to initialize a channel. Closing: [id: 0xa81de260, /127.0.0.1:59763 => /127.0.0.1:59724]
io.netty.channel.ChannelHandlerLifeCycleException: io.netty.handler.timeout.ReadTimeoutHandler is not a @Sharable handler, so can't be added or removed multiple times.
    at io.netty.channel.DefaultChannelPipeline.callBeforeAdd(DefaultChannelPipeline.java:629)
    at io.netty.channel.DefaultChannelPipeline.addLast0(DefaultChannelPipeline.java:173) 
```

我做得对吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T09:45:23.693

看起来您正在将 io.netty.handler.timeout.ReadTimeoutHandler 的相同实例添加到许多频道。尝试

```
ch.pipeline()
.addLast(new ReadTimeoutHandler(3000)) 
```

@Shareable 的文档：

```
/**
 * Indicates that the same instance of the annotated {@link ChannelHandler}
 * can be added to one or more {@link ChannelPipeline}s multiple times
 * without a race condition.
 * <p>
 * If this annotation is not specified, you have to create a new handler
 * instance every time you add it to a pipeline because it has unshared
 * state such as member variables.
 * <p>
 * This annotation is provided for documentation purpose, just like
 * <a href="http://www.javaconcurrencyinpractice.com/annotations/doc/">the JCIP annotations</a>.
 */
@Inherited
@Documented
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@interface Sharable {
    // no value
} 
```

# acceleo - 活动节点在仅接受类类型的模板中执行

> ID：13438388
> 
> 赞同：1
> 
> 时间：2012-11-18T07:45:14.713
> 
> 标签：acceleo

我有一个用 Topcased 5.2 制作的 uml 图。uml 包含类图和活动图。我编写了一个模板，它接受作为参数 Class 类型以生成 java 类。

生成了 java 类，但另外我的方法为 Activity 节点执行。如何防止执行 Activity 节点？

按照我的模板：

```
[template public generateEntity(c : Class)]
[comment @main /]
[file (c.getEntityFullPathFile().trim(), false)]
[c.generateEntity()/]
[/file]
[/template] 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:03:40.750

请查看 UML 元模型（文件 > 导入 > 选择“插件和片段”，单击“下一步”然后搜索“org.eclipse.uml2.uml”，选择它并“完成”向导）。在那里，您将看到一个*Activity*是一个*类*（*Activity*继承自*Behavior*继承自*Class*）。这就是Acceleo“看到”的全部。

如果您希望为所有类生成代码，除了活动，您可以使用警卫：

```
[template public generateEntity(c : Class) ? (not c.oclIsKindOf(Activity))]
... 
```

# c - 我可以知道是什么导致了分段错误吗？

> ID：13438389
> 
> 赞同：0
> 
> 时间：2012-11-18T07:45:16.293
> 
> 标签：c, segmentation-fault

我想我已经在下面的代码中正确地实现了指针。但它会导致分段错误。有人可以解释为什么吗？

```
struct list
{
    int index;
    struct list *next;
};
void add(struct list *l,int index)
{
    struct list *temp=l;
    if(l==NULL)
    {
        temp=(struct list *)malloc(sizeof(struct list));
        temp->index=index;
        temp->next=NULL;
        l=temp;
    }
    else
    {
        while(temp->next!=NULL)
        temp=temp->next;
        struct list *nnode=(struct list *)malloc(sizeof(struct list));
        nnode->index=index;
        nnode->next=NULL;
        temp->next=nnode;
    }
}

main()
{
        struct list *l;
        l=NULL;
        int el;
        scanf("%d",&el);
        add(l,el);
        while(l->next!=NULL)    //It causes seg fault
        {
            printf(" %d ",l->index);
            l=l->next;
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T07:57:53.963

这段代码没有做你认为它做的事情：

```
void add(struct list *l,int index)
{
    struct list *temp=l;
    if(l==NULL)
    {
        temp=(struct list *)malloc(sizeof(struct list));
        temp->index=index;
        temp->next=NULL;
        l=temp;
    }
... 
```

参数 l 不会改变，因为你只是将它作为指针传递，为了改变 l 指向的内容，你需要传递 l 的地址

```
void add(struct list **l,int index)
{
    struct list *temp;
    if(*l==NULL)
    {
        temp=(struct list *)malloc(sizeof(struct list));
        temp->index=index;
        temp->next=NULL;
        *l=temp;
    }
... 
```

否则更改将不会超出功能范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T07:50:12.613

如果您只调用一次 add ，则此代码不应出现段错误，但我假设您调用其他函数并传递仍然存在的列表，`NULL`您应该发送指向该列表的指针的指针

```
void add(struct list **l,int index)
{
    if(*l==NULL) {
        *l=(struct list *) malloc(sizeof(struct list));
    }
} 
```

否则它仍然会`NULL`在 add 返回时，因为您只初始化指针的副本，或者如果这使您感到困惑，您可以初始化列表`main()`并避免初始化`add()`

# javascript - 防止选择 rt 标签（假名）中的文本

> ID：13438391
> 
> 赞同：9
> 
> 时间：2012-11-18T07:46:02.890
> 
> 标签：javascript, css, ruby-characters

我使用 ruby​​ 注释将假名添加到日文文本中：

```
<ruby><rb>漢&lt;/rb><rt>かん</rt></ruby><ruby><rb>字&lt;/rb><rt>じ&lt;/rt></ruby> 
```

当我尝试选择汉字并在 Safari 或 Chrome 中复制时，剪贴板如下所示：

```
漢
かん
字 
```

我也无法从 OS X 的字典中查找这个词。

有什么方法可以防止选择假名吗？`rt { -webkit-user-select: none; }`似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-30T13:13:33.537

看来，如果将它们包装在一个`<ruby>`元素中，如下所示：

```
<ruby>
  <rb>漢&lt;/rb><rt>かん</rt>
  <rb>字&lt;/rb><rt>じ&lt;/rt>
</ruby> 
```

这样就可以在不选择*汉字*的情况下选择汉字。

* * *

更新：

*对于像间に合わせる*这样的汉字假名混合文本，您可以：

1.  使用空`<rt>`元素，如下所示：

    ```
    <ruby>
        <rb>間&lt;/rb><rt>ま&lt;/rt>
        <rb>に&lt;/rb><rt></rt>
        <rb>合&lt;/rb><rt>あ&lt;/rt>
        <rb>わせる&lt;/rb><r‌​t></rt>
    </ruby> 
    ```

2.  编写一些 javascript，利用[剪贴板事件](http://www.w3.org/TR/clipboard-apis/)^(* †)：

    *   HTML：

        ```
        <ruby>
          <rb>間&lt;/rb><rt>ま&lt;/rt>
        </ruby>
        に
        <ruby>
          <rb>合&lt;/rb><rt>あ&lt;/rt>
        </ruby>
        わせる 
        ```

    *   Javascript：

        ```
        $(document).on('copy', function (e) {
            e.preventDefault(); // the clipboard data will be set manually later

            // hide <rt> elements so that they won't be selected
            $('rt').css('visibility', 'hidden');

            // copy text from selection
            e.originalEvent.clipboardData.setData('text', window.getSelection().toString());

            // restore visibility
            $('rt').css('visibility', 'visible');
        }); 
        ```

这是一个演示页面^‡：http: [//jsfiddle.net/vJK3e/1/](http://jsfiddle.net/vJK3e/1/)

[* 在 Safari 6.0.3 上测试 OK] [†可能需要更新的浏览][器]
[版本]
[`rt::selection { display: none; }`]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-05T23:55:20.023

这是执行此操作的香草 javascript 方式：

```
// hide furigana before sending and reenable after
document.addEventListener('copy', function (e) {
  e.preventDefault();
  var furis = document.getElementsByTagName('rt');
  for (var i = 0; i < furis.length; i++) {
    furis[i].style.display = 'none';
  }
  e.clipboardData.setData('text', window.getSelection().toString());
  for (var i = 0; i < furis.length; i++) {
    furis[i].style.removeProperty('display');
  }
}); 
```

如上所述，添加`.replace(/\n/g, '')`after`window.getSelection().toString()`将删除任何仍以某种方式挂起的新行。 `.replace(' ', '')`如果您不希望用户最终得到额外的空格，也可能很有用。这些对于您的用例可能合适，也可能不合适。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-18T23:32:23.623

基于 Rox Dorentus 接受的答案（并参考 jpc-ae 有用的 Javascript 转换），这是对算法的改进，不涉及修改元素的`display`样式`<rt>`，这对我来说感觉很脆弱。

相反，我们为选择中的所有节点构建一个引用数组，过滤任何带有标签的节点`<rb>`，并返回它们的`innerText`. `<rb>`如果没有使用标签来包裹汉字，我还提供了一个注释掉的替代方案。

```
document.addEventListener('copy', function (e) {
  var nodesInRange = getRangeSelectedNodes(window.getSelection().getRangeAt(0));

  /* Takes all <rb> within the selected range, ie. for <ruby><rb>振&lt;/rb><rt>ふ&lt;/rt></ruby> */
  var payload = nodesInRange.filter((node) => node.nodeName === "RB").map((rb) => rb.innerText).join("");

  /* Alternative for when <rb> isn't used: take all textNodes within <ruby> elements, ie. for <ruby>振&lt;rt>ふ&lt;/rt></ruby> */
  // var payload = nodesInRange.filter((node) => node.parentNode.nodeName === "RUBY").map((textNode) => textNode.textContent ).join("");

  e.clipboardData.setData('text/plain', payload);
  e.preventDefault();

  /* Utility function for getting an array of references to all the nodes in the selection area,
   * from: http://stackoverflow.com/a/7784176/5951226 */
  function getRangeSelectedNodes(range) {
    var node = range.startContainer;
    var endNode = range.endContainer;
    if (node == endNode) return [node];
    var rangeNodes = [];
    while (node && node != endNode) rangeNodes.push(node = nextNode(node));
    node = range.startContainer;
    while (node && node != range.commonAncestorContainer) {
      rangeNodes.unshift(node);
      node = node.parentNode;
    }
    return rangeNodes;

    function nextNode(node) {
      if (node.hasChildNodes()) return node.firstChild;
      else {
        while (node && !node.nextSibling) node = node.parentNode;
        if (!node) return null;
        return node.nextSibling;
      }
    }
  }

}); 
```

# jsf - 在 body 内 preRenderView 和 preRenderComponent 的监听器方法执行后渲染头部

> ID：13438406
> 
> 赞同：0
> 
> 时间：2012-11-18T07:48:02.840
> 
> 标签：jsf, jsf-2

我需要为在文档正文中执行 preRenderView 和 preRenderComponent 的侦听器后检索的页面设置动态页面标题。但我发现标题是在那些听众被执行之前呈现的。

有什么办法可以延迟标题标签的呈现直到听众执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:26:13.607

好的，我尝试了以下策略作为解决方法。我只是`f:event type="preRenderComponent"..`从内部移动`body`到`head`部分，我得到了所需的行为。

```
<f:metadata>
    <f:viewParam name="id" value="#{bean.id}" />
</f:metadata>

<ui:define name="titleOfPage">
    <f:event type="preRenderComponent" listener="#{bean.method()}"/>
    #{bean.title}
</ui:define>

<ui:define name="bodyOfPage">
    ..
    ..
</ui:define> 
```

主模板：

```
<h:head>
    ... 
    <title><ui:insert name="titleOfPage"></ui:insert></title>
</h:head>
<h:body >
     <ui:insert name="bodyOfPage">Body of the pages goes here</ui:insert>
</h:body > 
```

* * *

调用第一个侦听器方法，然后 呈现`title`内部。`head`

也许`PreRenderView`type 可以直接使用而无需将`f:event`标签移动到 head 但`PreRenderView`即使在不需要的 ajax 请求上也会触发。

# html - 广告出现在帖子中间

> ID：13438407
> 
> 赞同：3
> 
> 时间：2012-11-18T07:48:10.837
> 
> 标签：html

无论页面有多长，我管理的网站似乎都有这些广告出现在每个页面的绝对位置。所以，有时，这个广告链接/图像的东西只是与文本相吻合，非常烦人。我假设它与页脚定位问题有关，我已尝试阅读此内容，但我似乎无法理解需要做什么。

问题的一个例子在这里，向下滚动一点，你会看到令人反感的红色链接与图片混合

[http://www.nussusave.org/what-we-do/green-hostels/](http://www.nussusave.org/what-we-do/green-hostels/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:51:17.727

尝试

```
.siteframe {
    height: 100%;<--remove  this
} 
```

# jquery - 构建返回链接数据的操作方法并使用 jQuery 构建链接

> ID：13438411
> 
> 赞同：-1
> 
> 时间：2012-11-18T07:48:34.827
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我需要测试如何`<a>`基于动作方法返回的 Json 构建链接，因此我创建了以下返回静态 JSON 的动作方法-

```
public ActionResult statisjson(int start = 0, int rows = 50)
        {
string j = "{'data': [{'url': 'http://192.168.10.50/WCF?imgid=1', 'desc': 'firstdoc'},{'url': 'http://192.168.10.50/WCF?imgid=2', 'desc': 'firstdoc'},{'url': 'http://192.168.10.50/WCF?imgid=3', 'desc': 'firstdoc'}]}";
return Content(j, "application/json");

        } 
```

然后我可以定义以下脚本来构建链接：-

```
$(document).ready(function getstaticjson() {

            $.ajax({
                type: 'GET',
                url: 'http://localhost:1431/Home/statisjson',
                dataType: 'json',

                success: function (result) {

                    $.each(result.data, function (key, val) {

                        $("<a>" + val.desc + "</a>").attr("href", val.url).appendTo("#links123");

                    });
                }
            });

        });
<div id="links123"></div> 
```

但是当我运行应用程序时不会建立任何链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:02:38.840

您生成链接的代码是正确且有效的，但您应该在`$.ajax`调用中添加一些内容。

*   使用双引号而不是单引号为键和字符串值提供**有效**的JSON 。`"``'`

*   添加选项`dataType: 'json'`，以便您的`result`变量将是一个对象而不是字符串。

[在这里](http://jsfiddle.net/6uJd6/)使用您的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:04:43.763

你应该像这样返回 JSON（我没有测试过代码）：

```
public ActionResult statisjson(int start = 0, int rows = 50)
    {
         var j = new { data = [new {url = 'http://192.168.10.50/WCF?imgid=1', desc = 'firstdoc'},...] };
         return Json(j, JsonRequestBehaviour.AllowGet);
    } 
```

或者您应该解析结果（因为您正在从操作返回字符串）：

```
var data = JSON.parse(result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T08:49:02.517

尝试这个：

这是工作。检查这个：[jsFiddle](http://jsfiddle.net/kBwtw/)

```
var a = '<a ' + 'href="' + val.desc + '" >' + val.url + '</a>';
$("#links123").html(a); 
```

# c++ - 模拟中如何保证输出

> ID：13438413
> 
> 赞同：2
> 
> 时间：2012-11-18T07:48:46.843
> 
> 标签：c++, algorithm, simulation

我有一个问题陈述，例如：

> 僵尸已经将自己置于纽约的每个路口。每个路口“i”最初都存在 ai 个僵尸。在每个时间步长，每个僵尸随机选择一个相邻的路口并朝它走去。僵尸以相同的概率选择每个相邻的路口。为了保护纽约市民，我们需要在“k”个时间步之后找出每个路口的僵尸数量。
> 
> 纽约的网络以边缘列表的形式给出。

我可以选择输入所有节点和所有边和`k` . 现在我需要五个人口最多的节点中的僵尸数量。现在我的问题是为什么这个集合总是需要相同？我的意思是当我第一次运行程序时假设我得到了输出集`{5,5,5,4,4}`但是为什么这个输出总是需要相同？

* * *

在此先感谢，我是模拟新手，所以如果我问了一些荒谬的问题，我很抱歉。实际上这是一个 Interviewstreet 问题，我不是要解决方案代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T07:51:50.473

僵尸是随机移动的，所以不会每次都一样。它会有些随机。您需要模拟僵尸的这种随机运动。

# azure - 如何在单个云服务中仅使用一个实例托管工作人员角色和 Web 角色？

> ID：13438417
> 
> 赞同：0
> 
> 时间：2012-11-18T07:49:19.720
> 
> 标签：azure, cloud, cloud-hosting

我们有一个项目，它有一个 Web 角色（WCF 服务）和一个工作角色。辅助角色平均使用 0.34% 的资源。我们希望在具有单个实例的单个云服务中同时托管 WCF 和辅助角色。如何才能做到这一点？目前，辅助角色和 WCF 服务各使用一个实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:05:54.907

您可以为此使用[ThreadedRoleEntryPoint ：](http://www.31a2ba2a-b718-11dc-8314-0800200c9a66.com/2012/02/combining-multiple-azure-worker-roles.html)

```
public class WebRole : ThreadedRoleEntryPoint
{
    ...

    public override void Run()
    {
        List<WorkerEntryPoint> workers = new List<WorkerEntryPoint>();
        workers.Add(new MyWorkerRole());
        base.Run(workers.ToArray());
    }
} 
```

`RoleEntryPoint`您可以使用，而不是从默认继承`ThreadedRoleEntryPoint`，它允许您传递应该作为后台线程启动的工作人员列表。这样，您可以通过将一个或多个 WorkerRoles 作为线程托管在 WebRole 中来节省资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T08:28:49.277

Sandrino 的回答没有错，但从问题来看，看起来不需要任何线程。我的答案是将所有内容从`WorkerRole.cs`工作者角色转移`WebRole.cs`到网络角色中。

# c - 为什么这个打印声明搞砸了？

> ID：13438420
> 
> 赞同：0
> 
> 时间：2012-11-18T07:49:51.517
> 
> 标签：c, dirent.h

`printf("%s\n", (char*)ent->d_name);`给了我未定义的行为。我只是在输出中得到奇怪的符号，有时后面是随机字母。`ent`是一个不同的结构。

它是在传递给 pthread 的函数中声明的。

```
void * copyFile( void * arg ){

struct dirent *ent = (struct dirent *)arg;

printf("%s\n", (char*)ent->d_name);

} 
```

并像这样调用：

```
int ret = pthread_create(&thread_list[i], NULL, copyFile, &ent); 
```

`ent`我尝试在调用函数中在原件上打印名称，它工作正常。所以问题出在转移和重新分配/铸造的某个地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:02:48.420

该`readdir`函数使用静态内存来填充`dirent`结构。也就是说，后续调用`readdir`可能会覆盖相同的区域，并且稍后引用该内存会导致未定义的行为。

您需要在`readdir`调用后立即复制结构并将此副本传递给线程，而不是原始的：

```
struct dirent *dp = readdir(dirp);
struct dirent *dp_on_the_heap = malloc(sizeof(struct dirent));
memcpy(dp_on_the_heap, dp, sizeof(struct dirent)); 
```

# apache-flex - 为多屏分辨率设计移动应用

> ID：13438423
> 
> 赞同：2
> 
> 时间：2012-11-18T07:50:26.430
> 
> 标签：apache-flex, mobile

我对 flex 真的很陌生。我想开发一个多屏分辨率的应用程序。我无法弄清楚我需要做什么。

[我在这里](http://renaun.com/blog/2011/10/customizing-flex-applicationdpi-for-a-multiple-screen-size-application/)阅读了这篇文章，但仍然不清楚我必须做什么。

谁能解释我如何在多种分辨率下保持相同的尺寸和设计？

我怎样才能实现密度独立？

例如，我是否需要为背景图片设置 3 种不同的分辨率？

我的背景图像需要什么屏幕分辨率？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:46:52.157

要实现密度独立并达到多种屏幕分辨率，您需要为任何可能的屏幕做好准备。从低分辨率 iPhone 3/GS 到超高分辨率 Nexus 10。您的背景图像不需要特定的屏幕分辨率，因为它需要有数百种分辨率。

与其将背景设置为固定分辨率，不如考虑使用代码构建它。通过可重复的图块或使用多个图像并将它们组合在一起形成您的背景。

您肯定会希望为每种 Adob​​e 分辨率（160dpi、240dpi 和 320dpi）使用一个图像。你可以通过使用这个来做到这一点：

```
<s:Image>
    <s:source>
        <s:MultiDPIBitmapSource
            source160dpi="@Embed('assets/ui/images/phone/info-image-160.png')" 
            source240dpi="@Embed('assets/ui/images/phone/info-image-240.png')" 
            source320dpi="@Embed('assets/ui/images/phone/info-image-320.png')" />
    </s:source>
</s:Image> 
```

假设您在向量中创建了所有内容，这相对简单。只需将您为 160 设计的图像（大多数人似乎都设计为）并将其放大到 240dpi 的 150% 和 320dpi 的 200%。

对于真正的密度独立性，您还需要确保您没有`applicationDPI`在应用程序标签中使用，因为这将强制使用特定的分辨率。

对于 CSS，您应该遵循这种格式（直接取自下面的第一个链接）

```
 @media (application-dpi: 160) {

        s|Button {
            fontSize: 10;
        }
    }

    /* IOS only @ 240dpi */
    @media (application-dpi: 240) and (os-platform: "IOS") {
        s|Button {
            fontSize: 11;
        }
    }

    /* IOS at 160dpi or Android @ 160dpi */
    @media (os-platform: "IOS") and (application-dpi:160), (os-platform: "ANDROID") and (application-dpi: 160) {
        s|Button {
            fontSize: 13;        
        }
    } 
```

你需要考虑一切。图像、字体/字体大小、组件大小、硬编码组件布局等。您可以查看`Capabilities`该类以了解在运行时您可以使用哪种数据。如果您最终使用 stage.stageHeight 之类的东西得到不正确的值，请考虑`FlexGlobals.topApplication.sys(tem?)Manager.screen.height`改用。这说明了 DPI，而 stageHeight 没有。

另请阅读：

*   [在移动应用程序中支持多种屏幕尺寸和 DPI 值](http://help.adobe.com/en_US/flex/mobileapps/WS19f279b149e7481c682e5a9412cf5976c17-8000.html)

# syntax - mysqli_real_escape_string 使用 CASE 插入数据库时 语法正确

> ID：13438427
> 
> 赞同：0
> 
> 时间：2012-11-18T07:51:22.827
> 
> 标签：syntax, escaping, mysqli, syntax-error, case

我在使用 mysqli_real_escape_string 时遇到语法错误。我使用的 IDE 没有显示任何语法问题，但是这是我第一次尝试将这个函数与多个 CASE 语句一起使用（事实上我根本没有使用过这个函数）。

插入代码在这里：

```
$query = "INSERT INTO `auctionwp_categories` 
         (`CategoryID`, `CategoryLevel`, `CategoryName`, `CategoryParentID`, `LeafCategory`, `AutoPayEnabled`, `BestOfferEnabled`, `Expired`, `IntlAutosFixedCat`, `Virtual`, `LSD`, `ORPA`)
  VALUES (
          '".mysqli_real_escape_string($link, $xmlCategoryID)."', '".mysqli_real_escape_string($link, $xmlCategoryLevel).", '".mysqli_real_escape_string($link, $xmlCategoryName).", '".mysqli_real_escape_string($link, $xmlCategoryParentID).",
          CASE '".mysqli_real_escape_string($link, $xmlLeafCategory)."' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '".mysqli_real_escape_string($link, $xmlAutoPayEnabled)."' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '".mysqli_real_escape_string($link, $xmlExpired)."' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '".mysqli_real_escape_string($link, $xmlBestOfferEnabled)."' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '".mysqli_real_escape_string($link, $xmlIntlAutosFixedCat)."' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '".mysqli_real_escape_string($link, $xmlVirtual)."' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '".mysqli_real_escape_string($link, $xmlLSD)."' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '".mysqli_real_escape_string($link, $xmlORPA)."' WHEN 'true' THEN 1 ELSE 0 END
          )";

if (mysqli_query($link, $query)) {
echo "Successfully inserted " . mysqli_affected_rows($link) . " row";
} else {
echo "Error occurred: " . mysqli_error($link);
} 
```

通过配置文件中的此代码成功连接到 db：

```
$user="root";
$pass="";
$database="auctionwp";
$server="localhost";

$link = mysqli_connect($server, $user, $pass, $database);

if (!$link) {
die('Connect Error (' . mysqli_connect_errno() . ') '
        . mysqli_connect_error());
}

echo 'Success... ' . mysqli_get_host_info($link) . "\n"; 
```

我的语法问题是由于 CASE 语句吗？我无法在网上或 php 手册中找到任何示例显示 mysqli_real_escape_string 在插入时使用此语句，

问候马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T13:30:57.440

如果我真的必须这样做，我仍然会使用[**SQL IF**](http://dev.mysql.com/doc/refman/5.5/en/if.html)操作，如下所示：

IF [条件] THEN [语句] ELSE [语句] END IF

**但是既然你已经在 php 工作了，为什么还要麻烦呢？！在 php 中查找 if 语句；)**

```
$query = "INSERT INTO `auctionwp_categories` (`CategoryID`, `CategoryLevel`, `CategoryName`, `CategoryParentID`, `LeafCategory`, `AutoPayEnabled`, `BestOfferEnabled`, `Expired`, `IntlAutosFixedCat`, `Virtual`, `LSD`, `ORPA`) VALUES (   
    '".mysqli_real_escape_string($link, $xmlCategoryID)."',
    '".mysqli_real_escape_string($link, $xmlCategoryLevel).",
    '".mysqli_real_escape_string($link, $xmlCategoryName).",
    '".mysqli_real_escape_string($link, $xmlCategoryParentID).",
    ".mysqli_real_escape_string($link, $xmlLeafCategory) == 'true' ? 1 : 0.",
    ".mysqli_real_escape_string($link, $xmlAutoPayEnabled) == 'true' ? 1 : 0.",
    ".mysqli_real_escape_string($link, $xmlExpired) == 'true' ? 1 : 0.",
    ".mysqli_real_escape_string($link, $xmlBestOfferEnabled) == 'true' ? 1 : 0.",
    ".mysqli_real_escape_string($link, $xmlIntlAutosFixedCat) == 'true' ? 1 : 0.",
    ".mysqli_real_escape_string($link, $xmlVirtual) == 'true' ? 1 : 0.",
    ".mysqli_real_escape_string($link, $xmlLSD) == 'true' ? 1 : 0.",
    ".mysqli_real_escape_string($link, $xmlORPA) == 'true' ? 1 : 0."
)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T08:35:15.130

感谢您的回复，在我有机会看到有人回复之前，我设法让它工作保持 CASE 声明完整，一旦我明白了它实际上很容易。我所做的是：

```
// escape the returned values
$xmlCategoryName = mysqli_real_escape_string($link, $xmlCategoryName);
$xmlLeafCategory = mysqli_real_escape_string($link, $xmlLeafCategory);
$xmlBestOfferEnabled = mysqli_real_escape_string($link, $xmlBestOfferEnabled);
$xmlAutoPayEnabled = mysqli_real_escape_string($link, $xmlAutoPayEnabled);
$xmlExpired = mysqli_real_escape_string($link, $xmlExpired);
$xmlIntlAutosFixedCat = mysqli_real_escape_string($link, $xmlIntlAutosFixedCat);
$xmlVirtual = mysqli_real_escape_string($link, $xmlVirtual);
$xmlLSD = mysqli_real_escape_string($link, $xmllSD);
$xmlORPA = mysqli_real_escape_string($link, $xmlORPA);

// the insert query for the values
$query = "INSERT INTO `auctionwp_categories` 
         (`CategoryID`, `CategoryLevel`, `CategoryName`, `CategoryParentID`, `LeafCategory`, `AutoPayEnabled`, `BestOfferEnabled`, `Expired`, `IntlAutosFixedCat`, `Virtual`, `LSD`, `ORPA`)
  VALUES (
          '".$xmlCategoryID."', '".$xmlCategoryLevel."', '".$xmlCategoryName."', '".$xmlCategoryParentID."',
          CASE '$xmlLeafCategory' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '$xmlAutoPayEnabled' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '$xmlExpired' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '$xmlBestOfferEnabled' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '$xmlIntlAutosFixedCat' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '$xmlVirtual' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '$xmlLSD' WHEN 'true' THEN 1 ELSE 0 END,
          CASE '$xmlORPA' WHEN 'true' THEN 1 ELSE 0 END
          )"; 
```

一切似乎都按要求正常工作。

# android - 无法实例化活动

> ID：13438429
> 
> 赞同：2
> 
> 时间：2012-11-18T07:51:33.867
> 
> 标签：android, manifest

我正在尝试运行亚马逊提供的示例项目，该项目旨在说明亚马逊的移动广告 api，但它会产生错误。这是logcat的内容：

```
11-18 02:34:49.470: W/dalvikvm(938): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
11-18 02:34:49.501: E/AndroidRuntime(938): FATAL EXCEPTION: main
11-18 02:34:49.501: E/AndroidRuntime(938): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.amazon.sample.simplead/com.amazon.sample.simplead.SimpleAdActivity}: java.lang.ClassNotFoundException: com.amazon.sample.simplead.SimpleAdActivity
11-18 02:34:49.501: E/AndroidRuntime(938):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1923)
11-18 02:34:49.501: E/AndroidRuntime(938):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2024)
11-18 02:34:49.501: E/AndroidRuntime(938):  at android.app.ActivityThread.access$600(ActivityThread.java:126)
11-18 02:34:49.501: E/AndroidRuntime(938):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
11-18 02:34:49.501: E/AndroidRuntime(938):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-18 02:34:49.501: E/AndroidRuntime(938):  at android.os.Looper.loop(Looper.java:137)
11-18 02:34:49.501: E/AndroidRuntime(938):  at android.app.ActivityThread.main(ActivityThread.java:4479)
11-18 02:34:49.501: E/AndroidRuntime(938):  at java.lang.reflect.Method.invokeNative(Native Method)
11-18 02:34:49.501: E/AndroidRuntime(938):  at java.lang.reflect.Method.invoke(Method.java:511)
11-18 02:34:49.501: E/AndroidRuntime(938):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-18 02:34:49.501: E/AndroidRuntime(938):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-18 02:34:49.501: E/AndroidRuntime(938):  at dalvik.system.NativeStart.main(Native Method)
11-18 02:34:49.501: E/AndroidRuntime(938): Caused by: java.lang.ClassNotFoundException: com.amazon.sample.simplead.SimpleAdActivity
11-18 02:34:49.501: E/AndroidRuntime(938):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
11-18 02:34:49.501: E/AndroidRuntime(938):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
11-18 02:34:49.501: E/AndroidRuntime(938):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
11-18 02:34:49.501: E/AndroidRuntime(938):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
11-18 02:34:49.501: E/AndroidRuntime(938):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1914)
11-18 02:34:49.501: E/AndroidRuntime(938):  ... 11 more
11-18 02:39:49.690: I/Process(938): Sending signal. PID: 938 SIG: 9 
```

这是android清单文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.amazon.sample.simplead"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="4" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SimpleAdActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.amazon.device.ads.MraidBrowser" android:configChanges="keyboardHidden|orientation"/>
    <activity android:name="com.amazon.device.ads.VideoActionHandler" android:configChanges="keyboardHidden|orientation"/>
</application> 
```

我试过改变说：

```
 android:name=".SimpleAdActivity" 
```

至

```
 android:name="com.amazon.sample.simplead.SimpleAdActivity" 
```

仍然得到同样的错误。

编辑：这是课程代码

```
/**

* Copyright 2012 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License").
 * You may not use this file except in compliance with the License.
 * A copy of the License is located at http://aws.amazon.com/apache2.0/
 * or in the "license" file accompanying this file.
 * This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, either express or implied. 
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package com.amazon.sample.simplead;

import com.amazon.device.ads.*;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

/**
 * This is a simple app for testing ad loading capabilities of the Amazon Mobile Ads SDK. 
 * This app demonstrates ad loading, expanding and collapsing along with device rotation.
 */

    public class SimpleAdActivity extends Activity implements AdListener
{

private AdLayout adView; // The ad view used to load and display the ad.
private static final String APP_ID = "sample-app-v1_pub-2"; // Sample App Key. Replace this variable with your App Key
private static final String LOG_TAG = "SimpleAdSample"; // Tag used to prefix all log messages

/**
 * When the activity starts, load an ad and set up the button click event to load another ad when it's clicked.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // For debugging purposes enable logging, but disable for production builds
    AdRegistration.enableLogging(this, true);
    // For debugging purposes flag all ad requests as tests, but set to false for production builds
    AdRegistration.enableTesting(this, true);

    adView = (AdLayout)findViewById(R.id.ad_view);
    adView.setListener(this);

    try {
        AdRegistration.setAppKey(getApplicationContext(), APP_ID);
    } catch (Exception e) {
        Log.e(LOG_TAG, "Exception thrown: " + e.toString());
        return;
    }

    // Assign an onclick handler to the button that will load our ad.
    Button button = (Button) findViewById(R.id.load_ad_button);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            LoadAd();
        }
    });

    // Calling load ad in the Activity's onCreate method allows a new ad to be loaded 
    // when the application starts and also when the device is rotated.
    LoadAd();
}

/**
 * Load a new ad.
 */
public void LoadAd() { 
    // Load the ad with the appropriate ad targeting options.
    AdTargetingOptions adOptions = new AdTargetingOptions();
    adView.loadAd(adOptions);
}

/**
 * This event is called after a rich media ads has collapsed from an expanded state.
 */
@Override
public void onAdCollapsed(AdLayout view) {
    Log.d(LOG_TAG, "Ad collapsed.");
}

/**
 * This event is called if an ad fails to load.
 */
@Override
public void onAdFailedToLoad(AdLayout view, AdError error) {
    Log.w(LOG_TAG, "Ad failed to load. Code: " + error.getResponseCode() + ", Message: " + error.getResponseMessage());
}

/**
 * This event is called once an ad loads successfully.
 */
@Override
public void onAdLoaded(AdLayout view, AdProperties adProperties) {
    Log.d(LOG_TAG, adProperties.getAdType().toString() + " Ad loaded successfully.");
}

/**
 * This event is called after a rich media ad expands.
 */
@Override
public void onAdExpanded(AdLayout view) {
    Log.d(LOG_TAG, "Ad expanded.");
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:41:29.987

将 amazon-ads-xyzjar 添加为`Java Build Path -> Order and Export`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T08:10:03.263

您的清单标签需要 package="com.amazon.sample.simplead"

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.amazon.sample.simplead">

<uses-sdk android:minSdkVersion="4" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SimpleAdActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.amazon.device.ads.MraidBrowser" android:configChanges="keyboardHidden|orientation"/>
    <activity android:name="com.amazon.device.ads.VideoActionHandler" android:configChanges="keyboardHidden|orientation"/>
</application>
</manifest> 
```

编辑：我假设您使用的是 Eclipse。展开您的**`src`**文件夹，应该有一个`com.amazon.sample.simplead`通常命名为旁边带有棕色图标的包文件夹。如果您展开该包文件夹，您应该会看到一堆类，包括`SimpleAdActivity`. 那里有吗？

# php - 使用 usort() 和 sort() 函数按 mktime() 转换的时间戳对日期数组进行排序

> ID：13438441
> 
> 赞同：0
> 
> 时间：2012-11-18T07:53:45.100
> 
> 标签：php

我有一个日期数组，我必须使用描述的函数对其进行排序。

这是我所拥有的：

```
$dates = array ('10-10-2003', '2-17-2002', '2-16-2003','1-01-2005', '10-10-2004' );
function date_to_timestamp($d){
$newarr = array();
foreach($d as $f) {
    $arr=explode("-",$f);
    array_push($newarr, mktime(0,0,0,$arr[0],$arr[1],$arr[2]));
}
return $newarr;
}

function cmp2($a, $b)
{
if ($a == $b) {
    return 0;
}
return ($a < $b) ? -1 : 1;
}

$third = date_to_timestamp($dates);

usort($third, "cmp2");
print_r($third);

?> 
```

之后，这是我得到的疯狂输出：

数组（[0] => 1013922000 [1] => 1045371600 [2] => 1065758400 [3] => 1097380800 [4] => 1104555600）

我的错误在哪里？对于解决方案的任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:23:05.297

这是您的替代解决方案。

```
<?php
$dates = array(
    '10-10-2003',
    '2-17-2002',
    '2-16-2003',
    '1-01-2005',
    '10-10-2004',
);

function toTime($date) {
    list($month, $day, $year) = explode('-', $date);
    return mktime(0, 0, 0, $month, $day, $year);
}

function sortByTime($a, $b) {
    $a = toTime($a);
    $b = toTime($b);
    if($a == $b) {
        return 0;
    }
    return $a < $b ? -1 : 1 ;
}

usort($dates, 'sortByTime');

print_r($dates);

/*
    Array
    (
        [0] => 2-17-2002
        [1] => 2-16-2003
        [2] => 10-10-2003
        [3] => 10-10-2004
        [4] => 1-01-2005
    )
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T07:59:44.597

在您的 date_tim_timestamp 函数中，您实际上是在丢弃您的日期来代替整数值。

试试这个：

```
function date_to_timestamp($d){
    $newarr = array();
    foreach($d as $f) {
        $arr=explode("-",$f);
        //array_push($newarr, mktime(0,0,0,$arr[0],$arr[1],$arr[2]));
        $int_version = mktime(0,0,0,$arr[0],$arr[1],$arr[2]);
        $newarr[$int_version] = $f;
    }
    return $newarr;
} 
```

使用这种方法，您不需要使用 usort()，只需使用 ksort()

# android - 如何在 android 中解析 JSON 并在 ListVIew 中显示数据列表？

> ID：13438444
> 
> 赞同：-3
> 
> 时间：2012-11-18T07:54:19.027
> 
> 标签：android, json

我正在使用一个返回 JSON 作为响应的 Web 服务。我想解析响应并创建一个对象列表。我不知道如何在 android 的 UI 中显示解析的数据。用户可以从列表中选择一项（即迪拜购物中心或迪拜媒体城或迪拜节）。

```
public class MyLocation extends MapActivity {
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.location);

    initButtons();

    initMapView();
    initMyLocation();   
                    jObject=getJSONFile("http://loyaltier.com/app/mobile/code/places/Maps.php");
}
    private JSONObject getJSONFile(String URL) {
    JSONObject jObject=null;
    HttpGet httpGet=new HttpGet(URL); //http://loyaltier.com/app/mobile/code/places/Maps.php
    HttpClient httpClient=new DefaultHttpClient();
    HttpResponse httpResponse;
    StringBuilder stringBuilder=new StringBuilder();
    try{
        httpResponse=httpClient.execute(httpGet);
        HttpEntity httpEntity=httpResponse.getEntity();
        InputStream inputStream=httpEntity.getContent();
        int c;
        while((c=inputStream.read())!=-1){
            stringBuilder.append((char)c);
        }
    }catch(Exception e){
        e.printStackTrace();
    }
    try{
        jObject=new JSONObject(stringBuilder.toString());
    }catch(JSONException e){
        Log.e("Log_tags ", "Error parsing data "+e.toString());
    }
    return jObject;
} 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:09:43.260

您可以使用 jObject.getString(name); 它返回按名称映射的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T06:02:29.310

我用 GSON 编写，但程序在 gsonFoo 方法中没有显示 log.i。为什么？问题是什么？

东西.java：

```
package org.example.loyaltier;

public class Thing {
     String branchId=null;
     String branchCode=null;
     String branchName=null;
     String branchTel=null;
     String address=null;
     String cityName=null;
     String countryName=null;
     String latitude=null;
     String longitude=null;
     String workingHours=null;
} 
```

MainActivity.java：

```
public class MyLocation extends MapActivity {
    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.location);
         try {
             Log.i("THISSSSSSSSS", "ISSSSSSSSS");
             Log.i("FFOOOORRRR", "YYOUUUUUUUUU");
             gsonFoo();
          } catch (Exception e1) {
         Log.i("catch", "catch");
        // TODO Auto-generated catch block
        e1.printStackTrace();
   }
 }
 public void gsonFoo() throws Exception
 {
     Gson gson = new Gson();
     Thing thing = gson.fromJson(new                     FileReader("http://loyaltier.com/app/mobile/code/places/Maps.php"), Thing.class);
System.out.println(gson.toJson(thing));
    Log.i("GSOOOON", "FOOOO");
   }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T08:03:51.843

[http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php](http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php) 我已经使用了这段代码。它非常简单直接。您必须稍微更改一下 json 格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T08:10:17.973

您可以使用 JACKSON 库来解析响应数据。以下帖子有一些解析示例：

[Android 中的 GSON/杰克逊](https://stackoverflow.com/questions/7939632/gson-jackson-in-android)

[http://w2davids.wordpress.com/android-json-parsing-made-easy-using-jackson/](http://w2davids.wordpress.com/android-json-parsing-made-easy-using-jackson/)

然后您可以使用[列表视图](http://developer.android.com/reference/android/widget/ListView.html)来显示分支对象的列表。例如，检查[一下](http://www.vogella.com/articles/AndroidListView/article.html)。

# opengl - glPolygonMode(GL_BACK,GL_LINE) 不起作用

> ID：13438450
> 
> 赞同：6
> 
> 时间：2012-11-18T07:56:57.783
> 
> 标签：opengl

```
glEnable(GL_CULL_FACE);
glCullFace(GL_FRONT);

glPolygonMode(GL_BACK,GL_LINE); 
```

在上面的代码示例中，glPolygonMode 抛出无效枚举错误？如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T09:40:10.450

`GL_INVALID_ENUM`如果您的问题的面部或模式（分别是第一个和第二个参数）不是可接受的值，则会生成。您的第一个参数必须`GL_FRONT_AND_BACK`用于正面和背面的多边形，`GL_FRONT`因为`GL_BACK`此方法已被弃用。

**编辑**

由于您似乎在评论中提出了其他问题。如果你想在填充的多边形周围绘制墨水，你应该渲染你的几何图形两次；渲染一次填充和一次线框。稍微移动线框以避免深度战斗。否则这两个几何图形可能会重叠

```
// first draw your polygon filled (this is assuming your glPolygonMode is set to GL_FILL - this is the default mode normally)
// draw your polygons

// offset the wireframe 
glEnable(GL_POLYGON_OFFSET_LINE);
glPolygonOffset(-1,-1);

// draw the wireframe
glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);
// draw the same polygons again

// restore default polygon mode
glPolygonMode(GL_FRONT_AND_BACK, GL_FILL);

glDisable(GL_POLYGON_OFFSET_LINE); 
```

# c# - 带有 C# 抛出错误的 CLR 存储过程

> ID：13438456
> 
> 赞同：2
> 
> 时间：2012-11-18T07:57:43.617
> 
> 标签：c#, sql-server, clr, sqlclr

嗨，我正在使用 C# 制作 CLR 存储过程，为此我正在通过示例进行学习。

以下是我现在正在尝试的

```
public static void GetProductsByPrice(int price)
{
    SqlConnection connection = new SqlConnection("context connection=true");
    connection.Open();

    string commandText = "SELECT * FROM Products WHERE PRICE < " + price.ToString();

    SqlCommand command = new SqlCommand(commandText, connection);
    SqlDataReader reader = command.ExecuteReader();

    // Create the record and specify the metadata for the columns.
    SqlDataRecord record = new SqlDataRecord(
        new SqlMetaData("col1", SqlDbType.NVarChar, 100),
        new SqlMetaData("col2", SqlDbType.NVarChar, 100));

    // Mark the begining of the result-set.
    SqlContext.Pipe.SendResultsStart(record);

    // Send 10 rows back to the client. 
    while (reader.Read())
    {
        // Set values for each column in the row.
        record.SetString(0, reader[1].ToString()); //productName
        record.SetString(1, reader[2].ToString()); // productDescription
        // Send the row back to the client.
        SqlContext.Pipe.SendResultsRow(record);
    }

    // Mark the end of the result-set.
    SqlContext.Pipe.SendResultsEnd();
} 
```

但是当我尝试运行它时，出现以下错误

> *消息 6549，级别 16，状态 1，过程 GetProductsByPrice，第 0行在
> 执行用户定义的例程或聚合“GetProductsByPrice”期间发生 .NET Framework 错误：
> System.Data.SqlClient.SqlException：不支持区域设置标识符 (LCID) 16393通过 SQL Server。
> System.Data.SqlClient.SqlException:
> 在 Microsoft.SqlServer.Server.SmiEventSink_Default.DispatchMessages(Boolean ignoreNonFatalMessages)
> 在 Microsoft.SqlServer.Server.SqlPipe.SendResultsStart(SqlDataRecord 记录)
> 在 StoredProcedures.GetProductsByPrice(Int32 价格)
> 用户交易，如果有的话，将被回滚。*

我指的是这个[msdn 文章](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.server.sqlpipe.sendresultsstart.aspx)的代码。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T08:34:04.157

异常状态：`The locale identifier (LCID) 16393 is not supported by SQL`

[SqlMetaData.LocaleId](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.server.sqlmetadata.localeid.aspx)属性包含列或参数的区域设置 ID，其中默认**值是当前线程的当前区域设置。**

在这种情况下，默认值`16393`是`English - India`语言环境（[见表](http://msdn.microsoft.com/en-us/goglobal/bb964664.aspx)），但您的 SQL 服务器似乎安装了不同的语言环境`English - United States`

所以你有三个选择：

1.  配置/重新安装您的 SQL 服务器以使用区域设置`English - India`
2.  将当前线程的语言环境更改为 SQL Server 支持的本地环境
3.  创建时手动指定语言环境`SqlMetaData`：

    ```
     SqlDataRecord record = new SqlDataRecord(
      new SqlMetaData("col1", SqlDbType.NVarChar, 1033, SqlCompareOptions.None),
      new SqlMetaData("col2", SqlDbType.NVarChar, 1033, SqlCompareOptions.None)); 
    ```

    其中 1033 是`English - United States`

# php - 在 PHP（或 Perl）中按国家/地区格式化送货地址

> ID：13438461
> 
> 赞同：6
> 
> 时间：2012-11-18T07:58:47.633
> 
> 标签：php, perl, street-address

我有一个 HTML 表单，其中包含部分输入的送货地址（街道地址、城市、州/省、邮政编码和国家/地区）。然后使用 PHP 处理此表单。

我想将此地址转换为目的地国家/地区的正确格式。是否有任何库或外部服务可用于在 PHP 中进行此转换？如果没有，我可以用 Perl 或类似的语言来做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T14:53:45.493

从未使用过，但[Geo::PostalAddress](http://search.cpan.org/dist/Geo-PostalAddress/)是一个很好的起点。如果没有别的，有用的法规链接。

请注意，各种运输公司（Fedex、DHL 等）都有自己的地址格式规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:23:34.980

在 Perl 中，您可以使用`Class::Phrasebook`. 使用它非常容易。

```
use Class::Phrasebook;
my $pb = new Class::Phrasebook($log, "test.xml");
$pb->load("NL"); # using Dutch as the language
$phrase = $pb->get("ADDRESS", 
                   { street => "Chaim Levanon",
                     number => 88,
                     city   => "Tel Aviv" } ); 
```

现在，在您的情况下，送货地址将是动态的（将由用户提供），因此您必须做更多的工作。您可以创建一个 XML 文件，为所有国家/地区添加字典，在每个字典中添加短语（街道地址、城市、州/省、邮政编码）。在每个短语中写入国家特定数据，例如“街道地址：$street”用于英语词典，“地址：$street”用于法语词典等。然后根据用户的国家/地区访问词典。

[CPAN](https://metacpan.org/module/Class%3a%3aPhrasebook)上的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T00:33:38.890

我已经考虑过这个问题，我决定为每个国家/地区列出地址模板的文件/数据库对我来说是最好的解决方案。

但是，我确信给出的其他解决方案也可以。

# jquery - Joomla 2.5 Jquery无法调用null方法

> ID：13438464
> 
> 赞同：0
> 
> 时间：2012-11-18T07:59:50.300
> 
> 标签：jquery, joomla, null, element, slideup

大家好，我正在将 Joomla 2.5 与 Jquery 一起使用，但在我的 chrome 控制台中出现了这个奇怪的错误：

```
"Uncaught TypeError: Cannot call method 'slideUp' of null " 
```

这是 index.php 标头部分：

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script type="text/javascript" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/js/jscript.js"></script>
    <jdoc:include type="head" /> 
```

和 jscript.js 代码：

```
$(document).ready(function(){

    var slider = document.getElementById("login-form");

    alert (slider);

    $("#login-form").slideUp(100); <- error is on this line

}); 
```

我对其进行了测试，警报显示：[object HTMLFormElement]，所以它意味着“登录表单”确实存在。不知道为什么我会得到

```
"Uncaught TypeError: Cannot call method 'slideUp' of null " 
```

拜托，你能帮帮我吗！！！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T09:04:25.520

很可能您的 jquery 代码与 mootools 冲突。试试这个

> `jQuery.noConflict();`

您的代码将如下所示 -

```
var $j = jQuery.noConflict();
$j(document).ready(function(){

    var slider = document.getElementById("login-form");

    alert (slider);

    $j("#login-form").slideUp(100);

}); 
```

# android - 如何将模拟屏幕控制到主场景？

> ID：13438465
> 
> 赞同：0
> 
> 时间：2012-11-18T07:59:53.497
> 
> 标签：android, andengine

我有扩展 BaseOnScreenControl 的 Horizo​​ntalOnScreenControl 类，它与 DigitalOnScreenControl 相同，但它只能水平工作。它工作正常。但是其中一个父母是 Scene，我认为这就是我们需要这样做的原因`scene.setChildScene(mDigitalOnScreenControl)`。

问题：例如，当我想要显示弹出窗口时，当我再使用`.setChildScene()`一次时，我的控件消失了。但是如果我尝试直接添加到主场景：`scene.AttachChild(mDigitalOnScreenControl)`比我无法触摸它，它不工作，但可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:06:13.843

您应该使用`Camera.setHUD`而不是`Scene.setChildScene`.

从`HUD.java`文件中引用：

> 虽然您可以将 HUD 添加到场景，但您不应该这样做。HUD 旨在通过 Camera.setHUD(HUD) 添加到相机。

如果您需要添加 2 个或更多 HUD，您可以这样链接它们（我的一个游戏中有 2 个 HUD，我就是这样做的。工作正常）

```
hud2.setChildScene(hud3);
hud1.setChildScene(hud2);
camera.setHUD(hud1); 
```

现在你可以打电话`Scene.setChildScene`了，你的控制不会消失。

**常识**：当AndEngine从Android框架接收到一个触摸事件时，该事件会通过一个实体列表。如果其中任何一个消耗了该事件，它就会停止。优先事项是：

1.  相机的 HUD（如果存在）
2.  子场景（如果存在）
3.  场景中的触摸区域（如果有）
4.  `onSceneTouchEvent`方法。

现在，在您的问题中，当您将控件作为常规实体附加到场景时，它不会获得应有的优先级（控件 - HUD 具有第一优先级）。因此，该事件可能在到达控件之前就被消耗掉了。

# c - 为什么 Linux 使用这个“指向指针的指针”作为列表？

> ID：13438466
> 
> 赞同：5
> 
> 时间：2012-11-18T08:00:10.567
> 
> 标签：c, linux, kernel

```
#define TAILQ_ENTRY(type)                       \
struct {                                \
    struct type *tqe_next;  /* next element */          \
    struct type **tqe_prev; /* address of previous next element */  \
} 
```

我发现上面的代码使用**了指向指针的指针**，这不是唯一的。我想知道为什么要这样做？指针本身不能处理吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T08:14:07.777

我想这里的重点是**删除**元素。考虑到您有一个[单链表](http://en.wikipedia.org/wiki/Linked_list#Singly_linked_list)，这意味着您可以在其节点中*向前*导航。

`N_j`现在考虑要删除的通用列表节点（例如）。删除它后，您希望轻松地将*前一个节点*（比如`N_{j-1}`）链接到*下*一个节点（比如`N_{j+1}`）。因此，您需要修改需要指向它的指针`tqe_next`的前一个节点的字段，即*指向指针*in的指针。`N_{j-1}` *`tqe_prev``N_j`*

 *换句话说，在*伪代码*术语中，以下情况成立

```
 *(N_j.tqe_prev) ==  (N_{j-1}).tqe_next 
```

或者

```
 N_j.tqe_prev ==  &(N_{j-1}).tqe_next 
```

.*

# django - 如何验证 accesstoken 和 facebook id？

> ID：13438468
> 
> 赞同：1
> 
> 时间：2012-11-18T08:01:08.847
> 
> 标签：django, facebook, tastypie

我正在构建一个使用 Django 作为服务器的 ios 应用程序。用户使用他们的 Facebook 帐户登录我的服务器。ios 应用程序首先获取 facebook id 和访问令牌，然后我想将 facebook id 和访问令牌发送到我的服务器以验证它。如果 facebook id 和访问令牌正确，服务器将创建一个用户。

我的问题是：

如何验证 facebook id 和访问令牌？例如，facebook id 为 123 的用户在应用程序中获取 accessToken: abc，然后应用程序将信息发送到我的服务器，服务器如何验证 accessToken abc 是否分配给 123，而不是其他 facebook id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:23:54.613

要识别 access_token，请使用它调用`https://graph.facebook.com/me`端点。然后使用检索到的数据来验证用户的 id。

# javascript - 重定向后 Cookie 被删除/设置为 null

> ID：13438470
> 
> 赞同：-4
> 
> 时间：2012-11-18T08:01:20.640
> 
> 标签：javascript, jquery, cookies, setcookie

我在页面中使用 cookie 来记录用户在表单中的输入。用户登录后，我想使用他们的旧 cookie 自动填写表格。

基本上，我想记录一些cookies，让用户登录，然后输出cookies。

在第一页中，我设置了 cookie，但是，在我重定向之后

> window.location.href

我刚刚记录的 cookie 被设置为空/自动删除。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:42:13.480

如果其他人都遇到同样的问题，这仅仅是因为 cookie 的路径问题。

设置 cookie 时，请执行以下操作：

> `$.cookie('the_cookie', 'the_value', { expires: 7, path: '/' });`

所以cookie可以是跨页的。

:]

# javascript - 使用 res.write 压缩/gzip/deflate 流内容

> ID：13438471
> 
> 赞同：1
> 
> 时间：2012-11-18T08:01:47.297
> 
> 标签：javascript, node.js, express, zlib

```
var express = require('express')

var app = module.exports = express()

function getImages(callback) {
  callback()
}

app
.set('views', __dirname + '/views')
.set('view engine', 'jade')
.get('/stream/images', function(req, res) {
  res.render('layout', function(err, body) {
    res.type('html')
    res.write(body.replace('</body></html>', ''))
    getImages(function(err) {
      res.render('streams/images', function(err, body) {
        var html = '<div class="layout-stream">' + body + '</div>'
        res.write(
          "<script>$('.pagelet-layout-stream').replaceWith(" + 
          JSON.stringify(html) + 
          "); emitter.emit('check:stream');</script>"
        )
        res.write("<script>emitter.emit('load');</script>")
        res.write('</body></html>')
        res.end()
      })
    })
  })
})
.listen(3013) 
```

这完全符合预期。但是，当我`.use(express.compress())`（`.get`准确地说是之前）时，页面不再流式传输。换句话说，`express.compress()`似乎要等到响应完成，然后 gzip 整个响应，然后发送它。我希望每个`res.write`人都发送一个压缩响应（或者特别是每个排水管）。如何正确压缩响应？

编辑 1 - 我试过这个：

```
var stream = zlib.createGzip()
stream.pipe(res)

stream.write(/* stuff */)
stream.end() 
```

这与`express.compress()`. 我不确定浏览器是在获得完整内容之前不解析正文，还是在响应完成之前不发送正文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:30:21.337

```
var stream = zlib.createGzip()
stream._flush = zlib.Z_SYNC_FLUSH
stream.pipe(res)

stream.write(/* stuff */)
stream.end() 
```

# ios - 如何改变 UITableView 的可滚动区域？

> ID：13438472
> 
> 赞同：0
> 
> 时间：2012-11-18T08:02:19.957
> 
> 标签：ios, uitableview, uiscrollview

我认为看看我正在实施的线框是一个好的开始：http: [//imgur.com/J8Kgy](http://imgur.com/J8Kgy)

所以这是一个特殊的表格视图，背景图像比表格区域大得多。我想要的是让背景可滚动并让表格粘在背景上的特定位置，并且表格与背景一起移动。

**编辑**：此外，这个位置可能会随着时间的推移而改变。

我发现通过扩展 UITableView 很难做到，因为我没有找到更改可滚动区域的方法，实际上我没有找到如何访问包含所有行的视图，所以我不知道如何定位它。

目前我正在使用 UIScrollView 中的 UITableView 执行此操作，但我认为这是一种浪费，因为 UITableView 本身已经是 UIScrollView 了。

所以任何人都知道可以将可滚动区域更改为整个背景以及如何访问行的容器？还是不可能？如果不可能的话，我认为自己制作一个简单的列表视图并摆脱 UITableView 会更容易。

谢谢！

松树

# android - 单击 TextView 中的 HTML 链接会触发奇怪的 AndroidRunTimeException

> ID：13438473
> 
> 赞同：7
> 
> 时间：2012-11-18T08:02:31.340
> 
> 标签：android

我正在从我的站点中检索一些 HTML 并将其放入 TextView。此 HTML 可能包含指向网页、电子邮件等的锚标记。我试图使这些链接可点击，以便当用户单击它时，默认浏览器会打开网页。我是按照这个答案的说明[来做的——如何使 TextView 中的链接可点击？](https://stackoverflow.com/questions/2734270/how-do-i-make-links-in-a-textview-clickable)和其他几个在线资源。

所以我的代码是这样的：

```
TextView para=new TextView(getApplicationContext());    
LayoutParams lpfortext=new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
lpfortext.setMargins(10, 10, 10, 10);
para.setText(Html.fromHtml(e.html()));
para.setMovementMethod(LinkMovementMethod.getInstance());
para.setLinksClickable(true); //error exists on removing this
para.setAutoLinkMask(Linkify.ALL);  //error exists on removing this
para.setLayoutParams(lpfortext); 
```

但是当我实际点击应用程序中的链接时（在 ICS 手机上，尚未在模拟器上测试），我收到以下错误（堆栈跟踪的快照，最后是全文）：

```
11-18 13:17:51.503: E/AndroidRuntime(6010): android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
11-18 13:17:51.503: E/AndroidRuntime(6010):     at android.app.ContextImpl.startActivity(ContextImpl.java:1095)
11-18 13:17:51.503: E/AndroidRuntime(6010):     at android.content.ContextWrapper.startActivity(ContextWrapper.java:276)
11-18 13:17:51.503: E/AndroidRuntime(6010):     at android.text.style.URLSpan.onClick(URLSpan.java:62)
11-18 13:17:51.503: E/AndroidRuntime(6010):     at android.text.method.LinkMovementMethod.onTouchEvent(LinkMovementMethod.java:212) 
```

任何想法可能导致错误以及如何解决它？

**编辑：**根据要求，完整跟踪如下——

```
11-18 13:45:09.741: E/AndroidRuntime(7946): FATAL EXCEPTION: main
11-18 13:45:09.741: E/AndroidRuntime(7946): android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.app.ContextImpl.startActivity(ContextImpl.java:1095)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.content.ContextWrapper.startActivity(ContextWrapper.java:276)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.text.style.URLSpan.onClick(URLSpan.java:62)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.text.method.LinkMovementMethod.onTouchEvent(LinkMovementMethod.java:212)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.widget.TextView.onTouchEvent(TextView.java:8835)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.View.dispatchTouchEvent(View.java:5579)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1965)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1734)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1965)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1734)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1965)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1734)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1965)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1734)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1965)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1734)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1965)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1734)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1982)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1441)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.app.Activity.dispatchTouchEvent(Activity.java:2421)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1930)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.View.dispatchPointerEvent(View.java:5759)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2970)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2529)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:869)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2538)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.os.Looper.loop(Looper.java:154)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at android.app.ActivityThread.main(ActivityThread.java:4945)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at java.lang.reflect.Method.invokeNative(Native Method)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at java.lang.reflect.Method.invoke(Method.java:511)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-18 13:45:09.741: E/AndroidRuntime(7946):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T08:20:22.393

似乎您`TextView`使用非 Activity 上下文初始化 para 对象，这需要`Intent.FLAG_ACTIVITY_NEW_TASK`在`Intent`启动 Activity 上进行设置。

这将解决问题

`TextView para = new TextView(this);`这指的是`Activity`上下文

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-14T21:52:35.247

如果您**从 XML 为 TextView**充气，请确保使用“getActivity().getLayoutInflater()”对包含 TextView 的布局进行充气。这为我解决了。

# sql - 将记录数据合二为一

> ID：13438476
> 
> 赞同：0
> 
> 时间：2012-11-18T08:03:17.083
> 
> 标签：sql, sql-server

我有这个查询，它在我的每个分支中返回 qty。现在该分支有两个 WH_subType，正如您在我附上的附图中看到的那样。我想总结 2 子类型并显示其可用数量。我该怎么做。![在此处输入图像描述](../Images/d1cfa99a37664423a24e5bc24a7741dc.png)

我的选择查询是这样的

```
SELECT
dbo.WarehouseType.name                        AS Section,
dbo.WarehouseSubType.name                     AS WH_Type,
dbo.WarehouseSubType1.name                    AS WH_SubType,
dbo.Branch.name                               AS Branch,
(dbo.WarehouseProductQuantity.actualQuantity - dbo.WarehouseProductQuantity.reservedQuantity) AS AvailQty,
dbo.WarehouseProductQuantity.tafsilId         AS Tafsil,
dbo.Tafsil.description                        AS Product_Name
FROM
dbo.WarehouseSubType
INNER JOIN
dbo.WarehouseType
ON
(
    dbo.WarehouseSubType.warehouseTypeId = dbo.WarehouseType.id)
INNER JOIN
dbo.WarehouseSubType1
ON
(
     dbo.WarehouseSubType.id = dbo.WarehouseSubType1.warehouseSubTypeId)
INNER JOIN
dbo.Warehouse
ON
(
    dbo.WarehouseSubType1.id = dbo.Warehouse.warehouseSubType1Id)
INNER JOIN
dbo.Branch
ON
(
    dbo.Warehouse.branchId = dbo.Branch.id)
INNER JOIN
dbo.WarehouseProductQuantity
ON
(
    dbo.Warehouse.id = dbo.WarehouseProductQuantity.warehouseId)
INNER JOIN
dbo.TafsilLink
ON
(
    dbo.WarehouseProductQuantity.tafsilId = dbo.TafsilLink.sourceId)
INNER JOIN
dbo.Tafsil
ON
(
    dbo.TafsilLink.targetId = dbo.Tafsil.id)
INNER JOIN
dbo.FinishProduct
ON
(
    dbo.Tafsil.id = dbo.FinishProduct.tafsilId)
INNER JOIN
dbo.Supplier
ON
(
    dbo.FinishProduct.supplierId = dbo.Supplier.tafsilId)
WHERE
WarehouseSubType1.warehouseSubTypeId IN (1,4)
group by dbo.WarehouseProductQuantity.tafsilId 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:14:12.243

您是否尝试过分组

```
SELECT SubType, SUM(qty) AS QtySum
GROUP BY SubType 
```

每个按列分组的都应该在您的选择中。注意：对于您按它分组的每一列，进一步细分数据

根据 OP 评论更新：如果您想要其他列，则需要执行类似的操作

```
SELECT s.WH_SubType,s.AvailQty, t.other_cols
from
(SELECT
dbo.WarehouseSubType1.name                    AS WH_SubType,
sum(dbo.WarehouseProductQuantity.actualQuantity -    dbo.WarehouseProductQuantity.reservedQuantity) AS AvailQty
FROM
table
GROUP BY
dbo.WarehouseSubType1.name) s
left join table t on t.dbo.WarehouseSubType1.name = s.WH_SubType; 
```

作为参考，请参阅这个问题：[如何对三列数据使用“分组依据”？](https://stackoverflow.com/questions/2072679/how-do-i-use-group-by-with-three-columns-of-data)

更新 2：

```
SELECT
dbo.WarehouseType.name                        AS Section,
dbo.WarehouseSubType.name                     AS WH_Type,
dbo.WarehouseSubType1.name                    AS WH_SubType,
dbo.Branch.name                               AS Branch,
SumTable.AvailQty,
SumTable.Tafsil,
dbo.Tafsil.description                        AS Product_Name
FROM
dbo.WarehouseSubType
INNER JOIN
dbo.WarehouseType
ON
(
    dbo.WarehouseSubType.warehouseTypeId = dbo.WarehouseType.id)
INNER JOIN
dbo.WarehouseSubType1
ON
(
     dbo.WarehouseSubType.id = dbo.WarehouseSubType1.warehouseSubTypeId)
INNER JOIN
dbo.Warehouse
ON
(
    dbo.WarehouseSubType1.id = dbo.Warehouse.warehouseSubType1Id)
INNER JOIN
dbo.Branch
ON
(
    dbo.Warehouse.branchId = dbo.Branch.id)
INNER JOIN
dbo.WarehouseProductQuantity
ON
(
    dbo.Warehouse.id = dbo.WarehouseProductQuantity.warehouseId)
INNER JOIN
dbo.TafsilLink
ON
(
    dbo.WarehouseProductQuantity.tafsilId = dbo.TafsilLink.sourceId)
INNER JOIN
dbo.Tafsil
ON
(
    dbo.TafsilLink.targetId = dbo.Tafsil.id)
INNER JOIN
dbo.FinishProduct
ON
(
    dbo.Tafsil.id = dbo.FinishProduct.tafsilId)
LEFT JOIN (SELECT
sum(dbo.WarehouseProductQuantity.actualQuantity - dbo.WarehouseProductQuantity.reservedQuantity) AS AvailQty,
dbo.WarehouseProductQuantity.tafsilId         AS Tafsil
FROM
dbo.WarehouseProductQuantity
group by dbo.WarehouseProductQuantity.tafsilId) SumTable on dbo.Tafsil.id = SumTable.Tafsil
WHERE
WarehouseSubType1.warehouseSubTypeId IN (1,4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T08:18:53.757

你需要做类似的事情

```
SELECT SUM(AvailQty), ... FROM ... WHERE ... GROUP BY WH_SubType 
```

[http://www.w3schools.com/sql/sql_func_sum.asp](http://www.w3schools.com/sql/sql_func_sum.asp) http://www.w3schools.com/sql/sql_groupby.asp

# java - 跳出 for 循环

> ID：13438479
> 
> 赞同：1
> 
> 时间：2012-11-18T08:03:59.897
> 
> 标签：java, netbeans, for-loop, switch-statement, break

我编写了一个程序来将字符 a、g、t、c 从文本框转换为另一个值问题是，当除了 a、g、t、c 之外的多个值时，它会为每个无效字符显示一条错误消息。我怎么能这样做以便在它看到的第一个无效字符上停止转换方法。下面是我的代码。谢谢

```
private void dna2rna() {
   String DNA = dna_ta.getText();
   char[]readdna;
   readdna=DNA.toCharArray();
   for (int x=0;x<readdna.length;x++){
      switch(DNA.charAt(x))
      {
         case 'A': readdna[x] = 'U';break;
         case 'T': readdna[x] = 'A';break;
         case 'C': readdna[x] = 'G';break;
         case 'G': readdna[x] = 'C';break;
         case 'a': readdna[x] = 'u';break;
         case 't': readdna[x] = 'a';break;
         case 'c': readdna[x] = 'g';break;
         case 'g':readdna[x] = 'c';break;
         default:
            JOptionPane.showMessageDialog(frame,
               "Not a DNA Sequence.Please Retry",
               "Sequence error",
               JOptionPane.ERROR_MESSAGE);
            dna_ta.setText("");
            rna_ta.setText(""); 
            break;
      }
      String rna= new String(readdna);
      rna_ta.setText(rna);
   }
} 
```

问题是如果它找到了默认情况，它就会退出并继续 for 循环。如何防止它通过 for 循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:41:46.007

您可以将`default`选项更改为，`return`而不是`break`. 你也可以让它抛出一个`IllegalArgumentException`（或你喜欢的任何其他异常）然后在调用方法中处理它：

```
default:
    throw new IllegalArgumentException("Not a DNA Sequence"); 
```

然后在调用者中：

```
try {
    dna2rna();
} catch (IllegalArgumentException e) {
    JOptionPane.showMessageDialog(frame,"Not a DNA Sequence.Please   Retry","Sequence error",JOptionPane.ERROR_MESSAGE);
    dna_ta.setText("");
    rna_ta.setText("");
    // Whatever else you were doing when error==true.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T08:06:10.387

向循环添加标签，使用 break 和这个标签。一种goto风格，但它有效......

```
private void dna2rna() {
    String DNA = dna_ta.getText();
    char[]readdna;
    readdna=DNA.toCharArray();
    forLoop: // <----------- label
    for (int x=0;x<readdna.length;x++){

         switch(DNA.charAt(x))
         {
             case 'A': readdna[x] = 'U';break;
             case 'T': readdna[x] = 'A';break;
             case 'C': readdna[x] = 'G';break;
             case 'G': readdna[x] = 'C';break;
             case 'a': readdna[x] = 'u';break;
             case 't': readdna[x] = 'a';break;
             case 'c': readdna[x] = 'g';break;
             case 'g':readdna[x] = 'c';break;
             default:
                 JOptionPane.showMessageDialog(frame,"Not a DNA Sequence.Please   Retry","Sequence error",JOptionPane.ERROR_MESSAGE);
                dna_ta.setText("");
                 rna_ta.setText(""); break forLoop; // <----------- break to label
         }
         String rna= new String(readdna);
         rna_ta.setText(rna);
    }

} 
```

简单的测试方法：

```
private static void dna2rna() {
    char[] readdna = { 'A', 'T', 'W', 'C', 'T', };
    forLoop: for (int x = 0; x < readdna.length; x++) {

        System.out.println("reading: " + readdna[x]);
        switch (readdna[x]) {
             case 'A': readdna[x] = 'U';break;
             case 'T': readdna[x] = 'A';break;
             case 'C': readdna[x] = 'G';break;
        default:
            System.out.println("some weird value!");
            break forLoop;
        }
    }

} 
```

输出：

```
reading: A
reading: T
reading: W
some weird value! breaking! 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T08:16:14.137

您可以使用标志来指示`for`循环退出：

```
private void dna2rna() {
   String DNA = dna_ta.getText();
   char[]readdna;
   readdna=DNA.toCharArray();
   boolean error = false;
   for (int x=0;x<readdna.length && !error;x++){

      switch(DNA.charAt(x))
      {
        case 'A': readdna[x] = 'U';break;
        case 'T': readdna[x] = 'A';break;
        case 'C': readdna[x] = 'G';break;
        case 'G': readdna[x] = 'C';break;
        case 'a': readdna[x] = 'u';break;
        case 't': readdna[x] = 'a';break;
        case 'c': readdna[x] = 'g';break;
        case 'g':readdna[x] = 'c';break;
        default:
            JOptionPane.showMessageDialog(frame,"Not a DNA Sequence.Please   Retry","Sequence error",JOptionPane.ERROR_MESSAGE);
            dna_ta.setText("");
            rna_ta.setText("");
            error = true;
            break; // or possibly: continue;
      }
      String rna= new String(readdna);
      rna_ta.setText(rna);
   }
} 
```

# jquery - 如何计算在jquery中处理函数的次数

> ID：13438481
> 
> 赞同：0
> 
> 时间：2012-11-18T08:04:06.810
> 
> 标签：jquery, function, counter, calculated-field

```
<div id="element1" onclick="func();">1</div>
<div id="element2" onclick="func();">2</div>
<div id="element3" onclick="func();">3</div>
<div id="element4" onclick="func();">4</div>
<div id="element5" onclick="func();">5</div>
<div id="element6" onclick="func();">6</div>
<div id="element7" onclick="func();">7</div>
<div id="element8" onclick="func();">8</div> 
```

当用户单击任何 div 时，func() 函数将起作用，并且计数器计算处理 func() 函数的次数。例如 2 次（我们确定数量）处理 func() 函数比用户再次单击任何 div 函数将不起作用。我怎么能用jquery做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T08:06:02.470

使用全局变量来跟踪函数被调用的次数。

```
var counter = 0;

function func() {

    counter++;
    if (counter > 2) return;

    // do other fn stuff
} 
```

稍微相关一点，在使用 jQuery 时，有一种更好的方法可以绑定多个点击处理程序：

```
$('div[id^="element"]').click( func ); 
```

当然，这并不重要，因为`return`会停止执行，但是如果您根本不想`func`被调用（即，如果您想完全删除点击事件），那么您可以简单地执行（如果您进行更改以上）：

```
$('div[id^="element"]').unbind('click'); 
```

这将代替`return`第一部分代码中的语句。

# java - 检查android模拟器是否处于静音振铃模式

> ID：13438488
> 
> 赞同：0
> 
> 时间：2012-11-18T08:05:47.973
> 
> 标签：java, android, android-emulator

我正在开发一个 android 应用程序，我想知道 android 手机是否静音。我需要知道如何通过代码在 android 模拟器上检查这个东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:09:47.387

您可以根据需要使用 AudioManager 类，

```
AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

if (am.getRingerMode() == AudioManager.RINGER_MODE_SILENT) 
{
    // silent mode
} 
```

# django - Django Query：加入一个表 2 次

> ID：13438489
> 
> 赞同：1
> 
> 时间：2012-11-18T08:05:49.957
> 
> 标签：django, django-models, django-queryset

我有 2 张桌子：

*   产品（ID，名称）
*   属性（id、product_id、名称、值）

**搜索产品时如何加入“属性”表2次？由于稍后分页，它们必须在一个查询中。**

示例：搜索必须具有 2 个属性的产品 - 一个为`name=att1, value=value1`，另一个为`name=att2, value=value2`。

* * *

源代码：

```
class Product(models.Model):
    product_id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=100, null=False)

class Attribute(models.Model):
    attribute_id = models.AutoField(primary_key=True)
    product = models.ForeignKey(Product, null=False)
    name = models.CharField(max_length=100, null=False)
    value = models.CharField(max_length=100, null=False) 
```

一个不工作的查询：

```
Product.objects.select_related().filter('attribute__name': 'n1', 'attribute__value':'v1').filter('attribute__name': 'n2', 'attribute__value':'v2') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:18:53.047

您不需要加入他们 2 次。您可以使用 ForignKey 创建模型，然后获取相关属性集

例如 ：

你创建这样的模型

```
class Product(models.Model):
    name = models.CharField(max_length=100)

class Attribute(models.Model):
    product = models.ForeignKey(Product)
    name = models.CharField(max_length=100)
    value = models.IntegerField() 
```

您可以通过电话获取产品项目

```
item = Product.objects.get(id=xxx) 
```

然后获取与该项目相关的所有属性列表

```
from django.db.models import Q

attr = item.attribute_set.filter(Q(name='name1') | Q(name='name2')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T08:49:18.267

使用这样的东西：

```
p = Product.objects.get(pk=1)
filtered = p.attribute_set.filter(name__in=['n1','n2'],value__in=['v1','v2']) 
```

# android - osmdroid：如何从光栅地图加载我的离线地图

> ID：13438497
> 
> 赞同：2
> 
> 时间：2012-11-18T08:06:37.840
> 
> 标签：android, offline, osmdroid, raster

我想从栅格地图加载我的离线地图，我的地图由阴影 EPSG900913 显示，如何加载栅格地图以及如何编写titlesorce？谁能帮我？

# uinavigationcontroller - 如何设置工具栏 userInteractionEnabled = NO？

> ID：13438499
> 
> 赞同：0
> 
> 时间：2012-11-18T08:07:42.350
> 
> 标签：uinavigationcontroller, toolbar, user-interaction

我使用下面的方法在底部显示一个带有标题的工具栏。

```
UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithTitle:@"Your Title"
                                                         style:UIBarButtonItemStylePlain
                                                        target:nil
                                                        action:nil];

UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace
                                                                        target:nil
                                                                        action:nil];

NSArray *items = [[NSArray alloc] initWithObjects:spacer, item, spacer, nil];
[self.navigationController setToolbarHidden:NO animated:YES]; 
```

但是，工具栏上的标题是**可点击**的，我不知道要**禁用**它的用户交互，因为工具栏是由 self navigationController 创建的。

各位有这个解决办法吗？感谢您的提示提前帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:19:44.910

Problem perfect solved by:

```
[[[self navigationController] toolbar] setUserInteractionEnabled:NO]; 
```

and I found out there've more details to custom toolbar in navigation. [Click Here](https://stackoverflow.com/questions/4297737/adding-items-to-a-navigation-toolbar)

# database - 有人可以指点我 ztabularinputmanager 的实现吗

> ID：13438502
> 
> 赞同：0
> 
> 时间：2012-11-18T08:07:57.377
> 
> 标签：database, yii, yii-extensions, tabular

我需要在 yii 中实现表格输入表单（表格是指同时多个模型）

正如我在这个问题中所问的

[yii 框架中是否有任何用户界面可用于表格数据输入？](https://stackoverflow.com/questions/13414185/is-there-any-user-interface-available-in-yii-framework-for-tabular-data-input/13418762#13418762)

但在搜索互联网后，我发现 yii 的 ztabularinputmanager 扩展作为可能的解决方案。

但是我找不到任何关于这个扩展的好的文档或实现细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:07:47.067

我相信 yii 的 multimodelform 扩展可能是一个更好的选择，因为它为您提供了一个示例实现。这是扩展和示例实现的链接[http://www.yiiframework.com/extension/multimodelform/](http://www.yiiframework.com/extension/multimodelform/)

我认为这个扩展非常好，比 ztabularinputmanager 更容易实现。另外我相信扩展的创建者在 Yii 的扩展论坛中非常活跃，如果你需要问他一些事情。

# windows-phone-7 - 如何避免在 Internet Explorer Mobile 中显示布局

> ID：13438506
> 
> 赞同：-1
> 
> 时间：2012-11-18T08:09:37.500
> 
> 标签：windows-phone-7

老实说，我不知道该怎么说。在芒果版的 Windows Phone Internet Explorer 中，点击链接时会显示黑色半透明层，我该如何避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:13:47.750

嗯，我很清楚你在说什么，但不幸的是，你无法避免。这只是表明该链接已被点击。为了可用性。

这适用于现有的网页/站点。但是，如果您尝试使用 PhoneGap 或其他方式开发 Web 应用程序，那么您可以将这些链接更改为 JavaScript/jQuery 事件，这应该可以避免。

# php - wampp 无法识别 Windows 8 上的 php 脚本

> ID：13438510
> 
> 赞同：0
> 
> 时间：2012-11-18T08:10:03.733
> 
> 标签：php, apache

我已经在 Windows 8 上安装了 wammp。一个简单的测试`echo 'test';`没有显示“测试”。当我查看浏览器的“显示源代码”时，它显示`echo 'test';`这表明 apache 不处理 php 代码。

这里发生了什么，有人解决了这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:18:57.327

如果我猜对了，并且您实际上只是`echo 'test';`在 PHP 文件中编写了代码，那么您需要添加 PHP 标记：

```
<?php
echo 'test';
?> 
```

# c++ - CMake：如何仅将特定文件扩展名从一个目录复制到另一个目录

> ID：13438512
> 
> 赞同：6
> 
> 时间：2012-11-18T08:10:17.187
> 
> 标签：c++, cmake

我正在使用以下自定义命令将目录中的所有文件复制`config`到`build`目录中。问题是我不希望`.svn`目录也被复制。我正在寻找一种方法来排除`.svn`目录或复制具有特定扩展名的文件。例如，我只想复制带有`xml`或`conf`扩展名的文件。我应该怎么办？

```
add_custom_command(TARGET MyTarget PRE_BUILD
                   COMMAND ${CMAKE_COMMAND} -E copy_directory
                       ${CMAKE_SOURCE_DIR}/config $<TARGET_FILE_DIR:MyTarget>) 
```

[相关问题](https://stackoverflow.com/q/13429656/69537)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T11:20:48.560

要仅复制`.xml`和`.conf`文件，您可以使用以下[`file(GLOB ...)`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:file)命令：

```
# Gather list of all .xml and .conf files in "/config"
file(GLOB ConfigFiles ${CMAKE_SOURCE_DIR}/config/*.xml
                      ${CMAKE_SOURCE_DIR}/config/*.conf)

foreach(ConfigFile ${ConfigFiles})
  add_custom_command(TARGET MyTarget PRE_BUILD
                     COMMAND ${CMAKE_COMMAND} -E
                         copy ${ConfigFile} $<TARGET_FILE_DIR:MyTarget>)
endforeach() 
```

获取所有不在`.svn`子目录中的文件是一个类似的过程：

```
# Gather list of all files in "/config"
file(GLOB ConfigFiles RELATIVE ${CMAKE_SOURCE_DIR}/config
     ${CMAKE_SOURCE_DIR}/config/*)

# Gather list of all files in "/config/.svn"
file(GLOB SvnConfigFiles RELATIVE ${CMAKE_SOURCE_DIR}/config 
     ${CMAKE_SOURCE_DIR}/config/.svn/*)

# Remove ".svn" and its contents from the list
list(REMOVE_ITEM ConfigFiles .svn ${SvnConfigFiles})

foreach(ConfigFile ${ConfigFiles})
  add_custom_command(TARGET MyTarget PRE_BUILD
                     COMMAND ${CMAKE_COMMAND} -E
                         copy ${CMAKE_SOURCE_DIR}/config/${ConfigFile}
                              $<TARGET_FILE_DIR:MyTarget>)
endforeach() 
```

# objective-c - 为什么 XCode Simulator 出现如此缓慢？

> ID：13438515
> 
> 赞同：1
> 
> 时间：2012-11-18T08:11:52.657
> 
> 标签：objective-c, xcode

我发现模拟器出现得很慢。通过按 Command + R 成功构建后，我需要将近 10 秒才能显示模拟器，即使是使用新项目也是如此。

我正在使用 Mac Lion + XCode 4.5.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:20:24.700

当没有内存或 Xcode 或模拟器挂起时会发生此问题，尝试完全关闭 Xcode 和模拟器我希望这能解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T08:20:25.213

模拟器第一次启动往往比后续启动慢得多。我在我的 MacBook Pro 中使用 SSD，这很有帮助，因为模拟器的后续启动速度非常快。它还可以帮助您将派生数据目录（通常是 ~/Library/Developer/Xcode/DerivedData）更改为文件 > 项目设置下的 RAM 磁盘。我正在使用带有 iOS 6 SDK 的 Mountain Lion、Xcode 4.5.2 并拥有 16 GB 的 RAM。

# eclipse - 如何使用 ant 构建和安装 Eclipse 插件

> ID：13438518
> 
> 赞同：4
> 
> 时间：2012-11-18T08:12:33.723
> 
> 标签：eclipse, ant, eclipse-plugin

如何使用 ant 构建和安装 Eclipse 插件？我想将插件构建为 zip 文件，然后在 32 位或 64 位 eclipse 上安装插件。我应该在这里做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T09:51:22.480

确实，用[PDE/Build](http://www.eclipse.org/pde/pde-build/)来实现一个所谓`headless build`的难，但也不是不可能。

我们仍在以这种方式构建我们的 RCP。

我建议阅读[Paulin](http://www.modumind.com/2007/06/06/getting-started-with-pde-build/)和[Sharma 的](http://blog.ankursharma.org/2010/06/headless-build-for-beginners-part-i.html)关于这个问题的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T23:08:04.853

Eclipse PDE 有自己的构建器，它基于 ant 构建。如果您想在 eclipse 中简单地构建/导出插件或生成可以在 eclipse 之外运行的 ant 构建脚本，我不确定您的问题。后者更难。在 Eclipse 中，您可以简单地转到文件 -> 导出 -> 插件开发 -> 可部署插件，导出向导将引导您完成它，您可以选择部署 zip 或分解目录，然后选择输出位置，然后您就有了作为 jar 构建的插件，可以放入 eclipse 实例中。如果您希望在 Eclipse 之外使用 ant 进行构建，则需要通过一系列复杂的步骤才能获得“无头构建”，如果这是您需要执行的谷歌“pde headless”构建。我已经试过但放弃了。

# apache - htaccess - 将 www 重定向添加到当前规则

> ID：13438526
> 
> 赞同：1
> 
> 时间：2012-11-18T08:13:49.537
> 
> 标签：apache, .htaccess

我有以下 .htaccess 文件，并且还想将非 www 页面的重定向添加到 www 等效项：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

我尝试了以下操作，但在尝试访问除域根目录以外的任何内容时会出现 500 错误：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:32:39.897

那是因为您的根目录中没有 index.php 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:31:31.730

这些行对我有用：

RewriteCond上的
RewriteEngine %{HTTP_HOST} ^morley\.cambs\.sch\.uk$ [NC]
RewriteRule ^(.*)$ [http://www.morley](http://www.morley) \.cambs\.sch\.uk/$1 [R= 301,L]

# javascript - 检测当前 facebook 用户喜欢我的网页

> ID：13438531
> 
> 赞同：-1
> 
> 时间：2012-11-18T08:15:12.713
> 
> 标签：javascript, facebook-like, facebook-fql

> **可能重复：**
> [如何使用 Facebook 的 API 检查用户是否喜欢我的 Facebook 页面或 URL](https://stackoverflow.com/questions/5093398/how-to-check-if-a-user-likes-my-facebook-page-or-url-using-facebooks-api)

有什么方法可以检测当前登录的 Facebook 用户是否喜欢我的网页。我必须为喜欢我的网页的用户提供额外的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:45:50.387

我认为这就是您正在寻找的希望对您有所帮助 [LINK](http://www.makeuseof.com/answers/find-page-facebook/)

# php - 如何利用选择的文本文件上传到solaris？

> ID：13438534
> 
> 赞同：0
> 
> 时间：2012-11-18T08:16:00.597
> 
> 标签：php, html, mysql, solaris

我目前正在使用 Solaris 作为服务器的 HTML、MySql 和 PHP 的组合。我在 MySql 上创建了表，需要使用 Html 将文件从我的 PC 桌面上传到服务器的文件夹。

第一个按钮用于选择文件 第二个按钮用于将数据加载到 HQ 数据库 第三个按钮用于跳转到另一个 php 文件。

我有 2 个查询，首先，使用所选文本文件中的数据加载到数据库的代码是什么。其次，如何使用第三个按钮跳转到另一个目录？

```
<h2> Upload HQ WareHouse</h2>

//upload file function
<form method ="post" action="checkTransaction.php" enctype="multipart/form-data">
    <input type="file" name ="datatxtfile" id ="datatxtfile">
    <input type="submit" value= "Click here to Upload The Transaction's File into the Database">
</form>

<br>

<input type="button" name="a" value= "Click here to return " onclick ="hist()">
</body>

//PHP code to explode
<?php

 $file = file_get_contents("Inventory_1000.txt");
 //var_dump($file);

 $lines = explode("\n",$file);

 print_r($lines); print line

 foreach($lines as $index => $line) {
  $data = explode(":", $line);

  mysql_query("INSERT INTO wareHouse (
        productName, categoty, manufacturer, barcode, buyingPrice, currentStock, minimumStock) 
        VALUES 
        '". $data[0] ."',
        '". $data[1] . "',
        '". $data[2] ."',
        '". $data[3] . "',
        '". $data[4] ."',
        '". $data[5] . "',
        '". $data[6] . "'
       )") or die(mysql_error());

 }

?> 
```

================================================

# 更新

澄清，

我正在尝试通过 PHP、HTML 从 PC 目录中的某个位置选择动态 .txt 文件，并加载到 solaris 上的在线数据库 mySQL，因此我无法使用语法 .txt 加载到数据库中。

底部只是一个示例代码，我如何在 mySQL 上使用示例 .txt 文件，因为我不确定如何选择动态 .txt。

因此，操作如下： 1）第一个按钮将从目录中选择一个 .txt 文件

2) 第二个按钮将数据上传到 mySQL，假设 .txt 文件兼容且未损坏

3）第三个按钮允许用户在文件上传完成后返回另一个页面

由于我打算创建一个动态的 .txt 文件名，请问我该如何完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:00:06.947

1.  > 使用所选文本文件中的数据加载到数据库的代码是什么。

    为什么不直接使用[`LOAD DATA INFILE`](http://dev.mysql.com/doc/en/load-data.html)？

    ```
    LOAD DATA INFILE 'Inventory_1000.txt' INTO TABLE wareHouse
    FIELDS TERMINATED BY ':'
    LINES  TERMINATED BY '\n'
    (
      productName,
      categoty,
      manufacturer,
      barcode,
      buyingPrice,
      currentStock,
      minimumStock
    ) 
    ```

2.  > 如何使用第三个按钮跳转到另一个目录？

    请改用超链接（推荐），否则`onclick`事件应设置`location.href`为您要加载的资源的 URI。

# java - 是否可以将 Spring Security 的 AOP 与 Java Security Manager 合并？

> ID：13438540
> 
> 赞同：0
> 
> 时间：2012-11-18T08:16:32.967
> 
> 标签：java, spring, security, spring-aop, securitymanager

有一个基于 Swing 的多层 Java 应用程序，每个模块都有其后端和前端。

现在我们想使用 Spring Security 添加安全性。我们决定不使用 AspectJ，因为它的开销很大。

是否有可能以某种方式将 Spring 方法调用授权注入 Java 安全管理器，以便后端中的每个方法调用都被 Spring Security 的基于注释的模型拦截（或委托给）？

笔记：

该应用程序包含大量包，并且使用 new 运算符或通过反射技术实例化对象。不可能修改所有实例化并将所有对象更改为 Spring bean。无论对象是如何构造的，Java 安全管理器都会拦截所有方法调用。这就是我们需要以某种方式向 Java 安全管理器注入 Spring Security Method 授权的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:50:38.867

使用 Spring AOP 不需要 AspectJ，因此只要您使用 Spring 配置应用程序，使用本机 JDK 支持应该没有问题（无论如何它是默认设置）。我不确定您是否尝试过它并且它对您不起作用，因此问题中的一些更具体的信息可能会有所帮助。

Java 安全管理器可能是一种不必要的干扰，但如果你能更详细地解释你的意图，它可能也会有所帮助。

而且，顺便说一句，我不确定你提到的 AspectJ 的开销是多少，但如果你认为这很重要，我会建议首先进行测试，因为对于大多数应用程序来说，它在运行时肯定不是很大的差异。它甚至可以比其他方法更快。

# ios - 如何检测自动调整大小何时更改视图的边界

> ID：13438541
> 
> 赞同：4
> 
> 时间：2012-11-18T08:16:33.027
> 
> 标签：ios, rotation, key-value-observing

我有一个自定义 UITableViewController 来检测它的视图边界何时发生变化，并使用它来更新每个 tableviewcell 显示的缩略图数量。但是，当我将 tableView 嵌入到另一个视图中时，边界不会改变，尽管我可以在视觉上确认它调整了大小。

我使用 KVO 来检测视图边界何时发生变化。从我的自定义 TableViewController 的 viewDidLoad 方法内部：

```
[self.view addObserver:self forKeyPath:@"frame" options:0 context:nil]; 
```

如果我将 tableViewController 设置为应用程序的根视图控制器并旋转 iPad，则每次旋转都会更新边界，并且一切正常。

但是，由于我的 tableview 嵌入在另一个视图控制器的 nib 中，边界永远不会更新 - 框架也不会更新。尽管如此，我可以看到 tableview 本身在旋转进入/退出横向模式时正在正确调整大小 - 所以在应用程序的某个地方，真实的框架/边界正在改变，只是没有被报告。知道如何访问真正发生的事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T08:26:31.547

比 KVO 更好的解决方案是[`viewDidLayoutSubviews`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewDidLayoutSubviews)在您的视图控制器中实现。一旦布局完成，这将在所有边界更改上调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:13:02.693

事实证明，在界面构建器文件中，tableview 丢失了它作为 tableViewController 视图的引用插座。添加这个回来解决了这个问题！

# java - 如何连接谷歌地图api中的标记？

> ID：13438543
> 
> 赞同：-1
> 
> 时间：2012-11-18T08:18:07.490
> 
> 标签：java, android

如何仅使用 java 连接 Google map API 中的标记，即不使用 asp.net、php 或任何其他语言？我只是一个初学者。我的地图上有多个标记，它们显示了 Google android 项目中的相应位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:13:07.060

创建您自己的`Overlay`类（而不是使用`ItemizedOverlay`用于显示标记的类）并实现`draw()`绘制线条的方法。`MapView`在添加用于显示标记的普通叠加层之前，将此叠加层添加到您的标记中，如下所示：

```
mMapView.getOverlays().add(mPathOverlay);
mMapView.getOverlays().add(mMarkersOverlay); 
```

一个`PathOverlay`类可以是这样的。这些位置将是您的标记的位置，已经转换为`GeoPoint`s。

```
public class PathOverlay extends Overlay {

    private List<GeoPoint> mPositions;
    private Path mPath;
    private Paint mPathPaint;
    private Point mHelperPoint = new Point();

    public PathOverlay(List<GeoPoint> positions) {
        mPositions = positions;
        mPath = new Path();
        mPathPaint = new Paint();
        mPathPaint.setColor(0xDDA4C639);
        mPathPaint.setStyle(Paint.Style.STROKE);
        // add more path styling here
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        if (shadow) {
            return; // path has no shadow
        }
        mPath.reset();
        boolean start = true;
        Point prev = new Point();
        for (Position p : mPositions) {
            mapView.getProjection().toPixels(p.geoPoint, mHelperPoint);
            if (start) {
                mPath.moveTo(mHelperPoint.x, mHelperPoint.y);
                prev.set(mHelperPoint.x, mHelperPoint.y);
                start = false;
            } else {
                int dx = prev.x - mHelperPoint.x;
                int dy = prev.y - mHelperPoint.y;
                mPath.lineTo(mHelperPoint.x, mHelperPoint.y);
                prev.set(mHelperPoint.x, mHelperPoint.y);
            }
        }
        canvas.drawPath(mPath, mPathPaint);
    }
} 
```

# c# - 从 LIST 中获取最大和最小日期列表

> ID：13438544
> 
> 赞同：0
> 
> 时间：2012-11-18T08:18:21.030
> 
> 标签：c#, asp.net

我通过此查询获得了不同的公司名称

```
 List<string> listCieId = new List<string>(from l in LstAdvancePaymentRep select l.CieDesc.Trim()).Distinct().ToList(); 
```

我想要做的是获得所有公司的最小日期最大日期`listCieId`

```
 List<DateTime> listCieId2 = new List<DateTime>(from l in LstAdvancePaymentRep where l.CieDesc.Trim().Distinct() select l.CtcDtStart.Value).Min().ToList();

List<DateTime> listCieId3 = new List<DateTime>(from l in LstAdvancePaymentRep where l.CieDesc.Trim().Distinct select l.CtcDtEnd.Value).Max().ToList(); 
```

我对此类查询不熟悉，以前没有使用过它们

**编辑：**我正在使用 Distinct 来获得不同的公司名称，因为 LstAdvancePaymentRep 中有重复

![在此处输入图像描述](../Images/b87be041ce9df4f46e62417e666c859e.png)

**编辑：**试过这个

```
 List<DateTime> lstDatesCtcStartDate = new List<DateTime>(
 from l in LstAdvancePaymentRep where l.CieDesc.Trim().Equals(lblCieName.Text.Trim()) select l.CtcDtStart.Value.Date
 ); 
```

如何在 LIST lstDatesCtcStartDate 中找到最短日期

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:52:21.500

尝试：

```
var minDate = lstDatesCtcStartDate.Min(); 
```

或者，如果您的公司对象有一个 Name 和一个 Date 属性，并且每个公司都有多个，并且您想要一个具有最小日期的每个不同公司的列表，那么：

```
class Company
{
    public string Name { get; set; }
    public DateTime Date { get; set; }
}

var companies = new List<Company>();

var companiesWithMinDate = companies.GroupBy(c => c.Name).Select(g => new { Name = g.Key, Date = g.Min(c => c.Date) }); 
```

# android-listview - Android listView 布局方向

> ID：13438545
> 
> 赞同：0
> 
> 时间：2012-11-18T08:18:22.197
> 
> 标签：android-listview, android-linearlayout

我想知道在开始设置后如何设置方向？

```
public class IconifiedTextView extends LinearLayout {

private ImageView iconImage;
private TextView titleText;
private TextView mainText;
private ImageView mainImage;

public IconifiedTextView(Context context, IconifiedText iconifiedText) {
    super(context);

    this.setOrientation(HORIZANTAL);
    //
    iconImage = new ImageView(context);
    iconImage.setImageDrawable(iconifiedText.getIconImage());
    // left, top, right, bottom
    iconImage.setPadding(0, 2, 5, 0); // 5px to the right
    addView(iconImage, new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    titleText = new TextView(context);
    titleText.setText(iconifiedText.getTitleText());
    /* Now the text (after the icon) */
    addView(titleText, new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    mainText = new TextView(context);
    mainText.setText(iconifiedText.getMainText());

    /* Now the text (after the icon) */
    addView(mainText, new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    /*
     * At second, add the other Icon to ourself (! we are extending
     * LinearLayout)
     */
    mainImage = new ImageView(context);
    mainImage.setImageDrawable(iconifiedText.getMainImage());
    // left, top, right, bottom
    mainImage.setPadding(15, 2, 20, 0); // 5px to the right
    addView(mainImage, new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
} 
```

我的问题是，我首先想要iconImage，然后是titleText，然后是mainText，然后在右边是列表中每一行的mainImage，有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:31:55.767

您可能应该为此任务使用相对布局。

做一个相对布局：

*   *在onParentLeft*添加你的 iconImage
**   然后在你的iconImage上，添加titleText*   下面，titleText，添加mainText*   最后，在 mainText 和*onParentRight*的右侧，添加 mainImage*

 *我希望它能解决你的问题。*

# c++ - 用于区分和修补字符串的 Linux C 或 C++ 库？

> ID：13438547
> 
> 赞同：10
> 
> 时间：2012-11-18T08:18:27.170
> 
> 标签：c++, c, linux, algorithm, diff

> **可能重复：**
> [有没有办法从 C++ 中区分文件？](https://stackoverflow.com/questions/1451694/is-there-a-way-to-diff-files-from-c)

我有很长的文本字符串，我希望对其进行比较和修补。给定字符串 a 和 b：

```
string a = ...;
string b = ...;

string a_diff_b = create_patch(a,b);
string a2 = apply_patch(a_diff_b, b);

assert(a == a2); 
```

如果`a_diff_b`是人类可读的，那将是一个奖励。

实现这一点的一种方法是使用`system(3)`从其中调用`diff`和`patch`shell 命令`diffutils`并将它们传递给字符串。另一种方法是自己实现这些功能（我想原子地处理每一行，并使用标准编辑距离 n^3 算法逐行回溯）。

我想知道是否有人知道一个好的 Linux C 或 C++ 库可以在进程中完成这项工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T20:42:52.413

你可以用谷歌搜索 Myers Diff 算法的实现。（“O（ND）差分算法及其变体”）或解决“最长公共子序列”问题的库。

据我所知，C++ 中 diff/patch 的情况并不好 - 有几个库（包括[diff match patch](http://code.google.com/p/google-diff-match-patch/)、[libmba](http://www.ioplex.com/~miallen/libmba/)），但根据我的经验，它们要么记录不充分，要么具有严重的外部依赖（例如，差异匹配补丁需要 Qt 4）或专门用于您不需要的类型（例如，当您需要 unicode 时为 std::string），或者不够通用，或者使用具有非常高内存的通用算法要求（（M+N）^2，其中 M 和 N 是输入序列的长度）。

You could also try to implement Myers algorithm ((N+M) memory requirements) yourself, but the solution of problem is extremely difficult to understand - expect to waste at least a week reading documentation. Somewhat human-readable explanation of Myers algorithm is available [here](http://simplygenius.net/Article/DiffTutorial1).

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-18T10:13:08.770

我相信

[https://github.com/cubicdaiya/dtl/wiki/Tutorial](https://github.com/cubicdaiya/dtl/wiki/Tutorial)

可能有你需要的

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T20:25:41.247

[http://code.google.com/p/google-diff-match-patch/](http://code.google.com/p/google-diff-match-patch/)

> Diff Match 和 Patch 库提供了强大的算法来执行同步纯文本所需的操作。
> 
> 目前可用于 Java、JavaScript、Dart、C++、C#、Objective C、Lua 和 Python。无论使用哪种语言，每个库都具有相同的 API 和相同的功能。所有版本还具有全面的测试工具。

# c# - 如何知道 Windows 上何时安装了新的防病毒软件

> ID：13438548
> 
> 赞同：0
> 
> 时间：2012-11-18T08:18:27.283
> 
> 标签：c#, windows, registry, antivirus

我想监视新的防病毒安装的事件，目前我的想法是监听卸载注册表文件夹中的更改，然后将新的应用程序名称与已知的防病毒列表进行比较。

我想通过更具体来改进它，是否有其他资源我可以监控以了解何时安装了新的防病毒软件？例如，新的防病毒软件必须编辑某些注册表才能被标记为活动的防病毒软件等。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:36:09.020

注册表不是最好的方法。您想要的信息通常通过 WMI 公开。

由于您没有在标签中指定您使用的语言，这里是[VBScript 示例的链接](http://blogs.msdn.com/b/alejacma/archive/2008/05/12/how-to-get-antivirus-information-with-wmi-vbscript.aspx)。请注意，在 64 位操作系统上，实际上有 2 个 WMI，32 位和 64 位。

如果您希望您的软件立即做出反应，[WscRegisterForChanges API](http://msdn.microsoft.com/en-us/library/bb432507%28v=vs.85%29.aspx)允许您在 AV 启动或停止时收到通知。

# java - 我正在用java编写一个Android应用程序，我认为这是一个内存泄漏，不知道如何修复它

> ID：13438554
> 
> 赞同：0
> 
> 时间：2012-11-18T08:19:38.660
> 
> 标签：java, android, memory-leaks

我正在为一个有几个纸牌游戏的学校项目编写一个 java 应用程序。我正在写第一个，并为我计划做的所有游戏实现了一个框架。我有一个名为 Deck 的类，它控制所有卡片组逻辑并在 arrayList 中创建一个包含 52 个卡片对象的卡片组。每当我创建卡片组时，程序都会停止并且没有响应。据我在网上查看，它说我创建了太多对象，程序试图清理它们或其他东西。我对java相当陌生，对如何解决这个问题感到非常困惑。这是 createDeck() 方法和生成的 LogCat 输出。非常感谢任何帮助或智慧。提前致谢！

```
public void createDeck() 
{
    for (int i = 1; i <= 13; i++)
    {

        for (int j = 0; j < 4; i++)
        {

            if (j == 0) //If diamond suite
            {
                Card newCard = new Card(i, j);
                cardDeck.add(newCard);
            }

            if (j == 1) //If hearts suite
            {
                Card newCard = new Card(i, j);
                cardDeck.add(newCard);
            }

            if (j == 2) //If clover suite
            {
                Card newCard = new Card(i, j);
                cardDeck.add(newCard);
            }

            if (j == 3) //If spade suite
            {
                Card newCard = new Card(i, j);
                cardDeck.add(newCard);
            }

        }

    }
} 
```

LogCat 输出

```
WAIT_FOR_CONCURRENT_GC blocked 61ms
GC_CONCURRENT freed 153K, 7% free 3755K/4024K, paused 69ms+25ms total 213ms 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T08:23:49.983

一个小错误：

在第二个`for`循环更改中：

```
for (int j = 0; j < 4; i++) 
```

至：

```
for (int j = 0; j < 4; j++) 
```

顺便说一句，通过使用调试器或打印来记录 - 你会在一秒钟内找到它。

# r - 如何将数据从剪贴板复制并粘贴到 R 中？

> ID：13438556
> 
> 赞同：75
> 
> 时间：2012-11-18T01:10:08.540
> 
> 标签：r, io, clipboard

我在另一个应用程序（例如电子表格，如 Excel 或文本编辑器）中打开了我的数据。如果我将该数据复制到我的操作系统剪贴板，我如何将它作为 data.frame 读入 R？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-11-18T01:32:13.137

假设您在 Windows 剪贴板中有数据（例如，从 Excel 复制的数据），将该数据放入以`copdat`R 命名的变量中，请使用：

```
copdat <- read.delim("clipboard") 
```

如果要将数据从命名为 R 的变量复制`rdat`到 Windows 剪贴板（例如，复制到 Excel），请使用：

```
write.table(rdat, "clipboard", sep="\t", row.names=FALSE, col.names=FALSE) 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-11-18T22:53:56.990

用于“剪贴板”的名称和确切连接因操作系统而异。

对于 Windows：

```
x <- read.delim("clipboard") 
```

对于 Mac 操作系统：

```
x <- read.delim(pipe("pbpaste")) 
```

这是有效的，因为 read.delim 和许多函数一样，将接受一系列连接类型，而不仅仅是一个文件。对于 Mac，我们实际上使用的是管道。`help(connections)`信息量很大。

psych 包有一个功能`read.clipboard()`，可以通过测试你的操作系统使这更容易一些。

正如其他人在这里指出的那样，您也可以写入剪贴板。通常有 32 K 的限制，可以通过在剪贴板后添加连字符和数字来提高限制，例如，从对象 df 传递高达 256 K 的数据：

```
write.table(df, "clipboard-256") 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-11-30T15:30:01.927

有一个 R 包/RStudio 插件`datapasta`可以非常巧妙地做到这一点 - 请参阅[https://CRAN.R-project.org/package=datapasta](https://CRAN.R-project.org/package=datapasta)。下图展示了它的简单性

[![在此处输入图像描述](../Images/82519eac1272fbb43f2a25387d65ee17.png)](https://i.stack.imgur.com/477yv.gif)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-10-03T17:40:10.127

如果您想从电子表格中读取表格数据，我使用了以下代码

```
read.table(file = "clipboard", sep = "\t", header=TRUE) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-18T01:11:43.700

输入`data = as.numeric(read.table(text = "125 140 200 200 190 ", sep = " "))`您的数字在`text = " "`引号之间的位置。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-07-31T12:08:38.463

我已经测试并在 Windows 和 MacOS 上工作的一种方法是`textConnection()`使用`read.table()`.

首先，将数据作为文本粘贴到变量中：

```
density_water_str <-   "T_/K Density_g/mL D2O
273 0.999841 1.10469
274 0.999900 NA
275 0.999941 NA
276 0.999965 NA
277 0.999973 1.1057
278 0.999965 1.10562
279 0.999941 NA
280 0.999902 NA
281 0.999849 NA
282 0.999781 NA
281 0.999700 NA" 
```

然后，使用 read.table() 读取文本字符串

```
density_water <- read.table(textConnection(
                                object = density_water_str), 
                            header = TRUE, 
                            sep = "", 
                            stringsAsFactors = FALSE) 
```

未在 Linux 或其他 Unix 系统上测试，但我相信它应该可以跨平台工作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-12-04T13:26:42.867

使用带有函数 read_clip()、read_clip_tbl 和 write_clip() 的 clipr 包。（对于 X11 系统，请提前安装 xclip）

看：

[https://www.rdocumentation.org/packages/clipr/versions/0.7.1/topics/read_clip](https://www.rdocumentation.org/packages/clipr/versions/0.7.1/topics/read_clip) [https://www.rdocumentation.org/packages/clipr/versions/0.7.1/topics/read_clip_tbl](https://www.rdocumentation.org/packages/clipr/versions/0.7.1/topics/read_clip_tbl) [https:// www.rdocumentation.org/packages/clipr/versions/0.7.1/topics/write_clip](https://www.rdocumentation.org/packages/clipr/versions/0.7.1/topics/write_clip)

和

[https://www.datanovia.com/en/blog/how-to-easy-read-and-write-data-from-clipboard-in-r/](https://www.datanovia.com/en/blog/how-to-easily-read-and-write-data-from-clipboard-in-r/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-03T08:08:05.913

为了使用“datapasta”补充“wjchulme”答案，如果您想通过 R 设置/解释 datapasta 的输出以便使用剪贴板内容设置变量，可以执行以下操作：

```
read.from.clipboard <- function() {
  mydata<-eval(parse(text=paste(capture.output(datapasta::tribble_paste(output_context = datapasta::console_context()), file=NULL), collapse="")))
  str(mydata); View(capture.output(str(mydata), file=NULL)) #Check guessed format is ok
  return(mydata)
}
mydata<-read.from.clipboard() #Tibble format
mydata<-as.data.frame(read.from.clipboard()) #Data.frame format 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-08-27T14:47:43.950

我正在使用 Mojave 10.14

输入命令：`X<-read.delim("clipboard")`我在 Rstudio 版本 1.1.463 for Mac 中遇到以下警告：

```
Error in file(file, "rt") : cannot open the connection In addition: Warning message: In 
file(file, "rt") : cannot open file 'pbpaste': No such file or directory 
```

通过谷歌搜索解决方案，我已经尝试并测试了无数的解决方案、包和命令来运行它，并且经过日日夜夜的试用，终于现在它可以工作了。

我希望没有人再因这个问题而遭受如此多的痛苦，因此我分享了这些信息。

请遵循以下所有内容，因为我不确定哪个特定安装有魔力（下载不需要按此特定顺序）：

1.  `R-3.6.1.pkg`从[https://cran.r-project.org/bin/macosx/](https://cran.r-project.org/bin/macosx/)下载

2.  [从https://www.rstudio.com/products/rstudio/download/#download](https://www.rstudio.com/products/rstudio/download/#download)下载 Rstudio

3.  `rcmdr`在 Rstudio 中安装包

    转到“工具”>“安装包”>输入`rcmdr`

4.  [从https://www.xquartz.org/](https://www.xquartz.org/)下载 XQuartz 'X11'

5.  下载所有包

    转到[https://cran.r-project.org/bin/macosx/tools/](https://cran.r-project.org/bin/macosx/tools/)，然后下载以下工具：

    *   `clang-8.0.0.pkg`（OS X 10.11+，签名，64 位）
    *   `gfortran-4.2.3.pkg`（OS X 10.5+，签名，64 位驱动程序）
    *   `tcltk-8.5.5-x11.pkg`（OS X 10.5+，签名）
6.  现在回到 Rstudio 并输入：

    ```
    X<-read.delim("clipboard") 
    X 
    ```

    excel 中复制的数据现在将导入 Rstudio 控制台。

希望这些信息将被证明是有帮助的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-30T20:32:53.880

我需要将复合[url](/questions/tagged/url "显示标记为“url”的问题")复制到 Windows[剪贴板](/questions/tagged/clipboard "显示标记为“剪贴板”的问题")中，同时`read.table()`在我的 URL 周围输出带有引号的字符向量。相反，我使用`writeClipboard(URL,format=1)`了 from package [utils](/questions/tagged/utils "显示标记为“utils”的问题")，它成功了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-25T09:33:30.110

查看`?file`, 部分的文档`Clipboard`：

> 剪贴板文件只能在“r”模式下与 description = “clipboard”一起使用。这将读取 X11 主要选择（请参阅[http://standards.freedesktop.org/clipboards-spec/clipboards-latest.txt](http://standards.freedesktop.org/clipboards-spec/clipboards-latest.txt)），也可以将其指定为“X11_primary”，将次要选择指定为“X11_secondary”。在大多数系统上，剪贴板选择（由“编辑”菜单中的“复制”使用）可以指定为“X11_clipboard”。当打开剪贴板进行阅读时，内容会立即复制到连接中的内部存储中。希望写入 X11 选项之一的 Unix 用户可以通过 xclip ( [http://sourceforge.net/projects/xclip/](http://sourceforge.net/projects/xclip/) ) 或 xsel ( [http://www.vergenet.net/~conrad/software /xsel/](http://www.vergenet.net/~conrad/software/xsel/))，例如通过 pipe("xclip -i", "w") 进行主要选择。macOS 用户可以使用 pipe("pbpaste") 和 pipe("pbcopy", "w") 来读取和写入该系统的剪贴板。

因此，例如使用 magrittr：

```
base::file(description='clipboard') %>% readLines 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-09T01:51:32.013

另一种方法是使用 clipr 包。我给你留下了我得到例子的[链接。](https://www.datanovia.com/en/blog/how-to-easily-read-and-write-data-from-clipboard-in-r/)

```
library("clipr")
my_data <- read_clip_tbl()
my_data 
```

# uitextfield - 日文输入控制

> ID：13438559
> 
> 赞同：2
> 
> 时间：2012-11-18T08:20:16.733
> 
> 标签：uitextfield, cjk, uitextinput

我有以下问题，关于如何在 iOS 应用程序中精细控制日语输入。为了清楚起见，我在这篇文章中包含了一张图片（见下文）。

如您所见，我在输入文本字段中输入了や，键盘上方出现了一堆选项（や 役 矢訳 ヤ 屋焼き …）以进行可能的转换。

以下是我想知道的：图片中显示的选择对我的特定应用程序没有意义。我希望能够为自己设置提供给用户的可能转换。在这种情况下，它会是（山形県 山口県 山梨県）。有谁知道我怎么能做到这一点？

换句话说，我试图找出如何处理出现在键盘上方的数据集。

提前感谢您提供任何相关信息。

![在此处输入图像描述](../Images/d322adcafe192941b325d67cb0d45fee.png)

# r - 计算 AIC（在 R 或任何其他软件中）

> ID：13438565
> 
> 赞同：1
> 
> 时间：2012-11-18T08:20:39.997
> 
> 标签：r, statistics

感谢您打开此消息！

我试图将网络累积分布的对数对数图拟合到三个模型之一：指数 (EXP) (P(k)~e^(-ak))、指数截断幂律 (TRU) (P (k)~k^(a-1)e^(k/kc)) 和幂律 (POWER) (P(k)~k^-a)。我知道这是一个低信息测试，但我只是想确定三个模型中哪一个最适合（或者可能是最不适合的！）

我意识到 TRU 有 2 个自由度，而 EXP 和 POWER 只有 1 个自由度。

我在 R 中有以下数据：

```
logCPK<-c(0, -0.0014, -0.0038, -0.0056, -0.007, -0.013, -0.0165, -0.0222, -0.0261, -0.0354, -0.0478, -0.0581, -0.0714, -0.0846, -0.1068, -0.1205, -0.1403, -0.1638, -0.1837, -0.2091, -0.2265, -0.2517, -0.2766, -0.3121, -0.3381, -0.3744, -0.4079, -0.4485, -0.4869, -0.5326, -0.5881, -0.6383, -0.6959, -0.7586, -0.8199, -0.8853, -0.9624, -1.0352, -1.1341, -1.2294, -1.3521, -1.4982, -1.6824, -1.892, -2.182)

dataPOW<-c(0.3387, 0.2175, 0.1197, 0.0441, -0.0198, -0.0777, -0.1262, -0.1717, -0.2108, -0.2482, -0.281, -0.3113, -0.341, -0.3673, -0.3921, -0.4167, -0.4387, -0.4607, -0.4806, -0.4996, -0.5187, -0.536, -0.5535, -0.5695, -0.5856, -0.6004, -0.6154, -0.6292, -0.6426, -0.6561, -0.6686, -0.6808, -0.6932, -0.7046, -0.7158, -0.7272, -0.7383, -0.7486, -0.7586, -0.7689, -0.7785, -0.7883, -0.7974, -0.8064, -0.8155)

dataEXP<-c(0.1981, 0.168, 0.1364, 0.1063, 0.0762, 0.0445, 0.0144, -0.0172, -0.0473, -0.0789, -0.109, -0.1391, -0.1707, -0.2008, -0.2309, -0.2625, -0.2926, -0.3243, -0.3544, -0.3845, -0.4161, -0.4462, -0.4778, -0.5079, -0.5395, -0.5696, -0.6012, -0.6313, -0.6614, -0.6931, -0.7232, -0.7533, -0.7849, -0.815, -0.8451, -0.8767, -0.9083, -0.9384, -0.9685, -1.0001, -1.0302, -1.0619, -1.092, -1.1221, -1.1537)

dataTRU<-c(-0.1867, -0.0857, -0.0193, 0.0204, 0.0443, 0.057, 0.0602, 0.0562, 0.0467, 0.0319, 0.0139, -0.0073, -0.0327, -0.0592, -0.088, -0.1202, -0.1525, -0.1881, -0.2234, -0.26, -0.2995, -0.3383, -0.38, -0.4205, -0.464, -0.5062, -0.5512, -0.5947, -0.6388, -0.6858, -0.731, -0.7767, -0.8253, -0.8719, -0.919, -0.9689, -1.0191, -1.0674, -1.116, -1.1673, -1.2165, -1.2685, -1.3183, -1.3684, -1.4212) 
```

所以我的问题是，我怎样才能得到这三个模型的 AIC 值？

我已阅读但不完全理解`AIC`{} 的文档，它的一般语法为：`AIC(object, ..., k = 2)`。

不明白我在做什么，我在 R 中尝试过命令，比如：

```
AIC(logCPK~dataPOW) Error in UseMethod("logLik") : no applicable method for 'logLik' applied to an object of class "formula" 
```

如果您对如何使用我上面在 R 中列出的数据类型或任何其他软件计算 AIC 有任何建议，我会非常感谢！

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:32:13.953

您应该能够在 中给出拟合模型对象的名称`AIC`，例如

```
fit <- lm(logCPK~dataPOW)
AIC(fit) 
```

# javascript - 无法使用 jQuery 获取文本字段值

> ID：13438570
> 
> 赞同：0
> 
> 时间：2012-11-18T08:22:27.310
> 
> 标签：javascript, jquery, ajax, struts2

我有一个`invoice.jsp`页面，我必须使用 jQuery 在文本框中计算一些值。

在我的发票中有一个数量文本框。如果用户输入数量，则计算出的价格应动态计算`(total_subPrice= unit_price * quantity)`，即显示在另一个名为“价格”的文本框中。

现在我当前的输出是这样的： ![在此处输入图像描述](../Images/081e4ca3cebeb21e0dff8907cfe72930.png)

我尝试了下面的代码来解决这个问题，但我的 jQuery 代码无法获取`unitprice`文本字段数据。我不知道为什么。请检查我下面的代码并建议我一个解决方案。

发票.jsp

```
--------------------
--------------------
<script type="text/javascript">
  $(document).ready(function(){
    $(function() {
      $('input[name^="quantity"]').change(function() {
        var unitprice = $(this).siblings('input[name^="unitprice"]').val();
        alert("Unit price check="+unitprice);
        //problem in this line. Unable to get the unit price
        $(this).siblings('input[name^="price"]').val($(this).val() * unitprice);
      });
    });
  });
</script>
..............................
..............................
<!--
  Here I am iterating through a list from my dabase using strus2 framework tags.
  And defined my  input field values in struts2 tag eg. `<s:textfield.../>`
  is the same as `<input type="text".../>
-->
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <s:iterator  value="#session.BOK" status="userStatus">
    <tr style="height: 10px;">
      <td width="65%" align="left"><s:property value="bookTitile"/></td>
      <td width="10%" align="left">
        <s:textfield name="unitprice" value="%{price}" size="4"/>
      </td>
      <td width="10%" align="center">
        <s:textfield name="quantity" value="%{quantity}" size="2" />
      </td>
      <td width="15%" align="center">
        <s:textfield value="%{price}" name="" size="6"></s:textfield>
      </td>
    </tr>
  </s:iterator>
</table>
................................
................................ 
```

当我更改数量文本框中的任何值时，我的警报框会显示“单价检查=未定义”。请检查我的代码并提出任何解决方案。

**更新：生成的 html**

```
 inside loop {
  <tr style="height: 10px;">
    <td width="65%" align="left">book title display</td>
    <td width="10%" align="left">
      <input type="text" name="unitprice" value="%{price}" size="4"/>
    </td>
    <td width="10%" align="center">
      <input type="text" name="quantity" value="%{quantity}" size="2" />
    </td>
    <td width="15%" align="center">
      <input type="text" value="%{price}" name="" size="6"></s:textfield>
    </td>
  </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:25:35.730

我得到了它的工作：http: [//jsbin.com/efinak/2/edit](http://jsbin.com/efinak/2/edit)

```
$(function() {
  $('input[name="quantity"]').change(function() {
      var unitprice = $(this).parents('tr').find('input[name="unitprice"]').val();
      $(this).parents('tr').find(' input[name="price"]').val($(this).val() * unitprice);

    });
}); 
```

# ios - 让 Sharekit 工作

> ID：13438573
> 
> 赞同：8
> 
> 时间：2012-11-18T08:23:12.907
> 
> 标签：ios, facebook, ios6, sharekit

我按照以下步骤操作：[https](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit) ://github.com/ShareKit/ShareKit/wiki/Installing-sharekit来安装 Sharekit。但我仍然面临一些错误。我不知道如何解决这个问题。

错误：

```
Undefined symbols for architecture i386:
  "_ACAccountTypeIdentifierFacebook", referenced from:
      +[FBSession renewSystemAuthorization] in libShareKit.a(FBSession.o)
  "_ACFacebookAppIdKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in libShareKit.a(FBSession.o)
  "_ACFacebookAudienceEveryone", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in libShareKit.a(FBSession.o)
  "_ACFacebookAudienceFriends", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in libShareKit.a(FBSession.o)
  "_ACFacebookAudienceKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in libShareKit.a(FBSession.o)
  "_ACFacebookAudienceOnlyMe", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in libShareKit.a(FBSession.o)
  "_ACFacebookPermissionsKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in libShareKit.a(FBSession.o)
  "_OBJC_CLASS_$_ACAccountStore", referenced from:
      objc-class-ref in libShareKit.a(FBSession.o)
  "_OBJC_CLASS_$_ASIdentifierManager", referenced from:
      objc-class-ref in libShareKit.a(FBSettings.o)
  "_OBJC_CLASS_$_SLComposeViewController", referenced from:
      objc-class-ref in libShareKit.a(FBNativeDialogs.o)
  "_SLServiceTypeFacebook", referenced from:
      +[FBNativeDialogs composeViewControllerWithSession:handler:] in libShareKit.a(FBNativeDialogs.o)
  "_sqlite3_bind_double", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in libShareKit.a(FBCacheIndex.o)
  "_sqlite3_bind_int", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in libShareKit.a(FBCacheIndex.o)
  "_sqlite3_bind_text", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _readEntriesFromDatabase:excludingFragment:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in libShareKit.a(FBCacheIndex.o)
  "_sqlite3_close", referenced from:
      ___23-[FBCacheIndex dealloc]_block_invoke_0 in libShareKit.a(FBCacheIndex.o)
  "_sqlite3_column_double", referenced from:
      -[FBCacheIndex _createCacheEntityInfo:] in libShareKit.a(FBCacheIndex.o)
  "_sqlite3_column_int", referenced from:
      -[FBCacheIndex _createCacheEntityInfo:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in libShareKit.a(FBCacheIndex.o)
  "_sqlite3_column_text", referenced from:
      -[FBCacheIndex _createCacheEntityInfo:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in libShareKit.a(FBCacheIndex.o)
  "_sqlite3_errmsg", referenced from:
      ___23-[FBCacheIndex dealloc]_block_invoke_0 in libShareKit.a(FBCacheIndex.o)
      _releaseStatement in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in libShareKit.a(FBCacheIndex.o)
      _initializeStatement in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _readEntryFromDatabase:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _readEntriesFromDatabase:excludingFragment:] in libShareKit.a(FBCacheIndex.o)
      ...
  "_sqlite3_exec", referenced from:
      ___36-[FBCacheIndex initWithCacheFolder:]_block_invoke_0 in libShareKit.a(FBCacheIndex.o)
  "_sqlite3_finalize", referenced from:
      _releaseStatement in libShareKit.a(FBCacheIndex.o)
  "_sqlite3_open_v2", referenced from:
      ___36-[FBCacheIndex initWithCacheFolder:]_block_invoke_0 in libShareKit.a(FBCacheIndex.o)
  "_sqlite3_prepare_v2", referenced from:
      _initializeStatement in libShareKit.a(FBCacheIndex.o)
  "_sqlite3_reset", referenced from:
      _initializeStatement in libShareKit.a(FBCacheIndex.o)
  "_sqlite3_step", referenced from:
      -[FBCacheIndex _updateEntryInDatabaseForKey:entry:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _writeEntryInDatabase:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _createCacheEntityInfo:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _fetchCurrentDiskUsage] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _removeEntryFromDatabaseForKey:] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _dropTrimmingTable] in libShareKit.a(FBCacheIndex.o)
      -[FBCacheIndex _trimDatabase] in libShareKit.a(FBCacheIndex.o)
      ...
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

需要一些关于如何解决这个问题的指导......不胜感激任何帮助......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-19T19:54:53.383

我有同样的问题，使用新的 Facebook SDK 3.0 切换到 ShareKit 库。

您需要添加这些框架和库来解决错误：

```
Social.framework
AdSupport.framework
Accounts.framework
libsqlite3.dylib 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T07:54:46.740

我不认为删除其他链接器标志是一个好主意。

请参阅[静态库中链接objective-c类别](https://stackoverflow.com/questions/6820778/linking-objective-c-categories-in-a-static-library)和[http://www.cocoanetics.com/2011/12/sub-projects-in-xcode/](http://www.cocoanetics.com/2011/12/sub-projects-in-xcode/)

新的 facebook SDK 需要几个框架，不要忘记将它们添加到您的项目中：

*   社会框架
*   帐户框架
*   adsupport.framework
*   libsqlite3.dylib

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T19:46:37.310

只需添加

**libsqlite3.dylib**

来自 Xcode 中项目的链接框架和库

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T18:46:48.257

这最终对我有用： http: [//t2526.codeinpro.us/q/51501c3fe8432c042610dc68](http://t2526.codeinpro.us/q/51501c3fe8432c042610dc68)

从 Xcode 的构建设置中的其他链接器标志中删除 -ObjC 和 -all_load。

# python - 按键值对 JSON 数据进行排序

> ID：13438574
> 
> 赞同：6
> 
> 时间：2012-11-18T08:23:34.243
> 
> 标签：python, json, list, discogs-api

我目前正在从 discogs API（mp3 标签数据）获取 JSON 数据，并希望按键的值对结果进行排序。在这种情况下，我试图获取 Guns n Roses 歌曲的数据，输出的第一个是 1988 年，而数据实际上有 1987 年的记录。如何对这些数据进行排序，以便我可以通过年（从旧到新）。下面的代码按键或值排序，但这不是我想要得到的。请帮忙。

```
import json
import urllib2
request = urllib2.Request('http://api.discogs.com/database/search?sort=year&sort_order=asc&artist=%22Guns+N%27+Roses%22&track=%22Sweet+Child+O%27+Mine%22&format_exact=Album&type=master')
request.add_header('User-Agent','Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)')
request.add_header('Content-Type','application/json')
response = urllib2.urlopen(request)
json_raw= response.readlines()
json_object = json.loads(json_raw[0])

for row in json_object['results']:
    try:
        from operator import itemgetter
        for k, v in sorted(row.items(), key=itemgetter(0)):
            print k, v
    except KeyError: 
        pass 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-18T08:39:20.783

您可以为此使用列表理解和`sorted()`功能：

```
# filter  json_object['results']  first, as some of the items are missing the key 'year'

In [33]: results = [x for x in json_object['results'] if 'year' in x]

In [34]: sorted(results, key=lambda x: x['year']) 
```

**或者 ：**

```
In [79]: from operator import itemgetter

In [80]: sorted(results, key=itemgetter('year')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:29:49.943

要对字典列表进行排序，请将 a`methodcaller`与要排序的键一起使用；您要对*结果*列表进行排序，而不是对包含的字典进行排序。*此外，有些*条目没有年份，这可能会导致错误：

```
from operator import methodcaller

for row in sorted(json_object['results'], key=methodcaller('get', 'year', None)):
    # process the row dictionary 
```

该`methodcaller`定义基本上`entry.get('year', None)`将为 中的每个条目执行一个`json_object['results']`，为`sorted`方法提供要排序的值。

你不应该*用来*阅读`readlines()`你的 JSON 响应，它会误解换行符。让`json`图书馆改为阅读（注意末尾的`.load()`, no ）：`s`

```
response = urllib2.urlopen(request)
json_object = json.load(response) 
```

# database - 将 xsd/xml 集成到数据库中的 GUI 工具

> ID：13438578
> 
> 赞同：2
> 
> 时间：2012-11-18T08:24:17.283
> 
> 标签：database, xsd, etl

我有很多不同复杂类型的 xsd 文件。我想将数据导入我的 oracle 数据库，但数据量如此之大，我无法使用 xsd2db 或 altova xmlspy，因为这让我大吃一惊。我正在寻找可以帮助我的简单实用的 etl 工具。有谁知道通过 xsd 生成 ddl 的 gui 工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:09:53.540

[这是我评论](https://stackoverflow.com/questions/13438578/gui-tool-to-integrate-xsd-xml-into-database#comment18473873_13438578)的后续；我不是将其定位为答案，但它应该可以帮助您更多地了解您所追求的目标，以及您可以做些什么。当然，这应该是@a_horse_with_no_name 的一个很好的例子......

我不熟悉 xmlspy，但鉴于我在 xsd2db 中看到的内容，它让我想到了 .NET 从 XML Schema 推断 DataSet 的能力。虽然[XSD 本身的创作风格可能会影响 DataSet 的派生方式](http://paschidev.com/Whitepapers/Deriving_DataSet_from_XML_Schema.html)，但对于较大的 XSD 主体而言，这几乎是微不足道的。更重要的是，推导很有可能甚至不起作用（实际上有很多限制）。

根据我自己的经验，.NET 中的派生过程为您提供了一个非常规范的结构。为了说明，我将介绍一个示例 XML：

```
<ShippingManifest>
    <Date>2012-11-21</Date>
    <InvoiceNumber>123ABC</InvoiceNumber>
    <Customer>
        <FirstName>Sample</FirstName>
        <LastName>Customer</LastName>
    </Customer>
    <Address>
        <UnitNumber>2A</UnitNumber>
        <StreetNumber>123</StreetNumber>
        <StreetName>A Street</StreetName>
        <Municipality>Toronto</Municipality>
        <ProvinceCode>ON</ProvinceCode>
        <PostalCode>X9X 9X9</PostalCode>
    </Address>
    <PackingList>
        <LineItem>
            <ID>Box1</ID>
            <Load>1-233</Load>
            <Description>Package box</Description>
            <Items>22</Items>
            <Cartons>22</Cartons>
            <Weight>220</Weight>
            <Length>10</Length>
            <Width>10</Width>
            <Height>10</Height>
            <Volume>1000</Volume>           
        </LineItem>
        <LineItem>
            <ID>Box2</ID>
            <Load>456-233</Load>
            <Description>Package box</Description>
            <Items>22</Items>
            <Cartons>22</Cartons>
            <Weight>220</Weight>
            <Length>10</Length>
            <Width>10</Width>
            <Height>10</Height>
            <Volume>1000</Volume>           
        </LineItem> 
    </PackingList>
</ShippingManifest> 
```

从概念上讲，它的结构非常简单：发货清单实体、客户、发货地址和装箱单。

![在此处输入图像描述](../Images/81e3c30f60e7a0700d360bfe57676411.png)

将其转换为 ADO.NET 数据集是一个简单的练习，输出非常干净。

![在此处输入图像描述](../Images/69d4e5cfd98a2aeb0fc2a73c5e4725cb.png)

应该很容易想象实体的数量（如果您愿意，可以在您的数据库中的表）如何增加一点更复杂的 XML ......

作为补充，如果设计 XSD 时要牢记涉及 DataSet 的过程，则删除**PackingList**元素并将**LineItem集合移动为在****ShippingManifest**下重复会提供一种稍微简化的布局：一个没有**PackingList**实体的布局。

![在此处输入图像描述](../Images/88ca29fc6eb4c9fc01463324a03839db.png)

将 XSD 数据模型转换为关系模型（例如 .NET）的自动工具通常设计用于生成高度规范化的结构。我猜想，出于显而易见的原因，非规范化留给了用户。

[QTAssistant](http://paschidev.com)的 XML Builder 是不同的。我们的要求是创建一个 ER 模型，该模型可以在 .NET 的 XSD 到数据集不可用的地方工作，并且在可能的情况下输出包含较少数量的实体。这是 QTAssistant 生成的相同内容：

![在此处输入图像描述](../Images/64814c7df11eea0a50bd16bb7c8aeea9.png)

QTAssistant 在这里所做的是合并所有参与一对一关系的实体。从建模的角度来看，这是一个明显的罪过。它确实有它的好处，特别是对于我们对能够捕获数据的简单结构感兴趣的用户（更具体的测试数据）。

生成的映射（XSD 到 ER）是双向的。这意味着它可以用于从数据库生成有效的 XML，或者将 XML 数据“分解”到数据库中（分解是通过生成 DML 语句来完成的）。该技术的使用方式：测试用例存储在 Excel 电子表格中，生成 XML，发送到 Web 服务，然后将结果存储回 Excel。

我们还生成了一个 XML 文件，描述了可以通过 XSLT 转换为 DDL 的结构。这就是事情可能会变得混乱的地方，具体取决于您的架构。简单类型不受限制的 XSD 很常见：没有最大长度的字符串，或者使用没有最大长度的模式；无约束的小数等。这些只是为什么在我们的例子中，我们没有开箱即用的直接方式来生成 DDL，而是提供用于自定义的钩子的部分原因。

所以，结束我的评论，我几乎知道你想做什么（我必须假设其他事情，如 Oracle 的 XML 功能，或 XML 数据库和 XQuery 等已被排除）。不幸的是，XSD 在这里真的很重要，所以如果你可以按照我的评论分享这些内容，我可以看看——这取决于你想在这里分享多少。

# r - 将新词添加到 R 情感包的词典

> ID：13438579
> 
> 赞同：1
> 
> 时间：2012-11-18T08:24:27.847
> 
> 标签：r, sentiment-analysis

我目前正在使用 R 情感包对 Twitter 的数据进行情感和情感分析，并且需要在包使用的主观性和情感词典中添加新词，因为在我分析的主题中有一些带有特定情感和情感的词。

有谁知道如何使用 R 情感包本身或任何其他 R 命令将单词添加到词典中？我在文档中进行了搜索，但找不到任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:25:59.090

读入（例如 csv）时的主观性和情感词典都会为您构建一个数据框。可以使用 rbind() 函数向数据框中添加条目。

> 患者 ID <- c(1, 2, 3, 4)
> 年龄 <- c(25, 34, 28, 52)
> 糖尿病 <- c("Type1", "Type2", "Type1", "Type1")
> status <- c("Poor", "Improved", "Excellent", "Poor")
> patientdata <- data.frame(patientID, age, diabetes, status)
>
patientdata patientID age 糖尿病状态
1 1 25 Type1 差
2 2 34 Type2 改善
3 3 28 Type1 优秀
4 4 52 Type1 差
> 患者 ID <- c(10, 20, 30, 40)
> 年龄 <- c(50, 68, 56, 104)
> 糖尿病 <- c("Type4 ”、“5 型”、“6 型”、“7 型”)
> status <- c("Poorish", "Improving", "Excellento", "Poorish")
> patientdata1 <- data.frame(patientID, age, 糖尿病, status)
> 患者数据 1 患者
ID 年龄糖尿病状态
1 10 50 类型 4 差
2 20 68 类型 5 改善
3 30 56 类型 6 优秀
4 40 104 类型 7 差
> concatPD <- rbind(患者数据，患者数据1)
> concatPD患者
ID 年龄糖尿病状态
1 1 25 类型 1 差
2 2 34 Type2 改进
3 3 28 Type1 优秀
4 4 52 Type1 差
5 10 50 Type4 差
6 20 68 Type5 改进
7 30 56 Type6 优秀o
8 40 104 Type7 差
>

我只是添加了奇怪的糖尿病类型，以确保区分 2 帧。:-) 换句话说，您可以创建我们自己的 csv，读取它（从而创建另一个数据框）并重新绑定它们。确保两个数据帧的列同步。

# iphone - iOS 中的多个对象管理器

> ID：13438580
> 
> 赞同：0
> 
> 时间：2012-11-18T08:24:34.503
> 
> 标签：iphone, objective-c, ios, xcode, restkit

现在这是如何实现的？

我知道你曾经用保留来做到这一点：

```
RKObjectManager *flickrManager = 
[RKObjectManager objectManagerWithBaseURL:flickrBaseUrl]; // <-- shared singleton

RKObjectManager *foursquareManager = 
[[RKObjectManager objectManagerWithBaseURL:foursquareBaseUrl] retain]; // <-- you must retain every other instance 
```

但是既然你不再使用retain了，你会怎么做呢？

目前，我有 2 个要发送的对象管理器，但我只收到 1 个响应。我猜其中一个请求正在取消另一个请求。

**更新**

```
RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://iphone.meer.li"];
RKObjectManager *designObjectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];
//...Mapping design here...
RKURL *URL = [RKURL URLWithBaseURL:[designObjectManager baseURL] resourcePath:[NSString stringWithFormat: @"/%@.json", subUrl]];
[designObjectManager loadObjectsAtResourcePath:[NSString stringWithFormat:@"%@", [URL resourcePath]] delegate:self];

RKObjectManager *designerObjectManager = [RKObjectManager sharedManager];     
RKObjectMapping *designerMapping = [RKObjectMapping mappingForClass:[DesignerData class] ];
//...Mapping designer here...

RKURL *URL = [RKURL URLWithBaseURL:[designerObjectManager baseURL] resourcePath:[NSString stringWithFormat: @"/%@.json", subUrl]];
[designerObjectManager loadObjectsAtResourcePath:[NSString stringWithFormat:@"%@", [URL resourcePath]] delegate:self]; 
```

所以这是我真正的代码。我不明白为什么它会失败，因为对象管理器应该保留在 ARC 中。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:32:40.733

你不需要使用

```
RKObjectManager *designerObjectManager = [RKObjectManager sharedManager]; 
```

不再。

[请参阅 RestKit Wiki](https://github.com/RestKit/RestKit/wiki/Using-Multiple-Base-URLs-%28and-Multiple-Object-Managers%29)中的“您创建的第一个对象管理器将是默认情况下使用的共享单例 RestKit。但是通过创建其他对象管理器，您可以根据需要从它们的 BaseURL 中提取，只需确保保留这些新管理器” 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:31:09.433

您的 designObjectManager 在方法的本地范围内（从您发送请求的位置）。一旦范围结束，它就会由 ARC 发布。您可以将 designObjectManager 作为类或属性的实例变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T03:42:08.413

我想到了。我在同一个对象加载器上发出请求。

答案和解释可以在这里找到：[Objects not loading on second request in Restkit](https://stackoverflow.com/questions/13443919/objects-not-loading-on-second-request-in-restkit)

# c# - Linq to Sql Query 两次返回相同的记录

> ID：13438583
> 
> 赞同：3
> 
> 时间：2012-11-18T08:25:01.847
> 
> 标签：c#, asp.net, .net, database, linq-to-sql

我正在使用 Linq to Sql 查询数据库。这是我的数据：

```
 Name      LastName        Age
    ------------------------------
1    Abc         Def            15
2    Abc         Def            17
3    xyz         wss            17 
```

我的 Linq to Sql 代码是：

```
Context _context = new Context("Conn_String");
var table = _context.GetTable<Person>();
List<Person> persons = table.Where<Person>(p => p.Name == "Abc" && p.LastName == "Def").ToList<Person>(); 
```

根据我的理解，这个查询应该返回 2 条记录。即记录 1 和记录 2。但它返回记录 1 两次。如果它是 Linq to Sql 中的错误或我做错了什么，你能告诉我吗？

**编辑：**

*这是我的 DAL 代码：*

```
public List<T> GetList<T>(Expression<Func<T, bool>> predicate) where T : class
{
     try
     {
          Context _context = new Context("Conn_String");
          var table = _context.GetTable<T>();
          return table.Where<T>(predicate).ToList<T>();
      }
      catch (Exception ex)
      {
           throw ex;
      }
 } 
```

*我将此方法称为：*

```
List<Person> person = DAL.GetList<Person>(p => p.Name == "Abc" && p.LastName == "Def");

foreach(var Person in persons )
{
    // Print(person.Age);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-31T02:16:52.183

我自己也遇到过这个问题。检查模型推断出哪个属性是您的 Person 类的实体键。

如果它有一个非唯一列作为实体键，它将在使用 ToList() 转换时使用与每一行的值匹配的第一行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-11T07:35:45.697

简短的回答，您需要在获取的数据中添加主键。

您可以简单地在视图选择语句中添加一个唯一的列。您不必在程序中使用该列，但它将允许 EF 为您正确构建每个对象。

虽然这个问题是在 2012 年 11 月提出的，我在 2019 年 7 月回答。但详细答案可在以下来源获得。我正在回答也许事情可能会帮助那里的人。

**.NET 中的 LINQ 从工作 SQL 视图返回重复行** [https://www.itworld.com/article/2833108/linq-in--net-returning-duplicate-rows-from-a-working-sql-view--解决了-.html](https://www.itworld.com/article/2833108/linq-in--net-returning-duplicate-rows-from-a-working-sql-view--solved-.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T05:29:25.943

嗨，乌斯曼，

这是我的桌子：

![在此处输入图像描述](../Images/3051f364555e76e285f619091b3d1591.png)

我在这里使用以下查询：

```
 using (DataClassesDataContext dc = new DataClassesDataContext())
        {
            var v = (from c in dc.t_controls where (c.config_display == "SHOW_VA" && c.next_value == 1) select c.description).ToList();
        } 
```

此查询返回所有 5 行。将其作为参考并检查您的错误之处。希望对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T18:46:36.853

您可以使用数据库中的 SQL Server 探查器（假设 SQL Server）运行查询并对其进行分析。我想知道您的表中是否有重复的记录..或者是否存在导致重复的连接。

我使用 LINQ to SQL 没有任何问题。

如果数据库配置文件正确，并且您希望“强制”它是唯一的，那么您始终可以在最后的 LINQ 查询中传递一个不同的方法。

# jakarta-ee - 基于 CAS 的网络应用程序中的最佳授权模式？

> ID：13438584
> 
> 赞同：0
> 
> 时间：2012-11-18T08:25:12.493
> 
> 标签：jakarta-ee, active-directory, glassfish, authorization, cas

我的 Java EE 应用程序部署在 Glassfish 3.2.1 上，并且需要对 CAS 服务器进行身份验证。CAS 服务器向主体返回经过身份验证的用户所属的所有 Active Directory 组的列表。扩展 javax.servlet.http.HttpServletRequestWrapper 我能够覆盖在列表中搜索角色的 getUserInRole 方法。它工作正常，但假设是：

*   AD组和角色相同（一一对应）
*   所以角色不是由应用程序定义的：它们必须被定义为 AD 组
*   所以AD中的群体变得相当大。

最后一点至关重要，因为当其他应用程序使用相同的授权机制并需要多个角色时，AD 组的数量会增加很多，getUserInRole 函数花费的时间也会增加。

因此，即使这种授权方法适用于少数角色和少数应用程序，但在多个应用程序各自具有多个角色的情况下，它可能会出现性能问题。

现在的问题是：我可以使用另一种模式来克服具有以下约束的性能问题吗？CAS 身份验证、GlassFish、Java EE 应用程序。

# ruby-on-rails - 显着的活动记录关联

> ID：13438587
> 
> 赞同：1
> 
> 时间：2012-11-18T08:25:36.687
> 
> 标签：ruby-on-rails, rspec, gem, rspec-rails

我正在使用 gem Remarkable activerecord 进行关联。我已经安装了非凡和非凡的 activerecrod 两个 gem。我已经在我的 Gemfile 中添加了两个 gem。我在 spec_helper.rb 中添加了“remarkable_activerecord”。

 `````
 describe Authentication do
                 FactoryGirl.build(:authentication).should belong_to(:user) 
                end 
```` 

`我收到错误： **身份验证失败/错误：它 { should belong_to(:user) } NoMethodError: undefined method `belong_to' for #**`

 `现在应该怎么办..?? 提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T13:11:12.433

您缺少一些 RSpec 语法。为了使用“应该”断言，它必须在“它”或“指定”块内。有许多不同的方法可以做到这一点，但这里有一种简洁的方法：

```
describe Authentication do
  subject { FactoryGirl.build(:authentication) }
  it { should belong_to(:user) }
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:36:28.967

您需要通过在测试示例的正上方包含来定义`it`所指的内容。`subject { something }```

# c++ - 如何操作 CString 的内容

> ID：13438593
> 
> 赞同：0
> 
> 时间：2012-11-18T08:26:44.927
> 
> 标签：c++, visual-c++, mfc, cstring

各位，我有问题，请帮帮我！我有一个将从数据库接收的 CString 变量，数据可能像这样：(8)(9)(10)(11) 或更多。

现在我想改变CString中的每个数字，例如加1，结果应该是这样的：

CString 数据；CString 数据变量的竞争应该改变。

之前：(8)(9)(10)(11)

之后：(9)(10)(11)(12)

我已经尝试过 Data.GetAt(i)，但它返回一个 const 指针，我无法更改它。

我知道也许 Data.GetBuffer() 可以获得一个指针来操作 CString，但我不知道该怎么做。

所以请帮助我！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:30:49.363

不要就地改变。特别是在您的示例中，当您更改`(9)`为`(10)`它需要 1 个额外字符的缓冲区空间。以某种方式提取所有值（可能是一个`std::list`）`int`，添加您需要的任何数字，然后重新组合成一个字符串，然后一次将其全部写回。

# .net - WSMan PowerShell 提供程序？

> ID：13438596
> 
> 赞同：2
> 
> 时间：2012-11-18T08:27:06.547
> 
> 标签：.net, powershell

如果您：

```
Get-PSProvider 
```

您看不到 WSMan 的提供程序，但您可以：

```
Set-Location WSMan:\ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:29:58.267

在 PowerShell 3.0 中，WSMAN 是默认情况下不加载的 Microsoft.WSMan.Management 模块的一部分。如果您执行管理模块命令之一，PowerShell 会隐式加载该模块并且 WSMAN 驱动器是可见的。

```
PS> Test-WSMan

wsmid           : http://schemas.dmtf.org/wbem/wsman/identity/1/wsmanidentity.xsd
ProtocolVersion : http://schemas.dmtf.org/wbem/wsman/1/wsman.xsd
ProductVendor   : Microsoft Corporation
ProductVersion  : OS: 0.0.0 SP: 0.0 Stack: 3.0

PS> Get-PSProvider | ft name

Name
----
Alias
Environment
FileSystem
Function
Registry
Variable
WSMan 
```

或者，您可以显式加载管理模块。

# python - 如何用不同的方式在python中更改字母

> ID：13438600
> 
> 赞同：0
> 
> 时间：2012-11-18T08:27:45.193
> 
> 标签：python

我想学习python，我想在没有任何模块或库的情况下更改字母我尝试了这样的方法，但它不起作用：

```
d=list('banana')
a=list('abcdefghijklmnopqrstuvwxyz')

for i in range:
    d[i]=a[i+2]
print d 
```

我收到了这个错误：

```
TypeError: 'builtin_function_or_method' object is not iterable 
```

如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T08:31:48.160

您忘记为[范围函数](http://docs.python.org/2/library/functions.html#range)指定参数：

```
d=list('banana')
a=list('a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z')

for i in range(len(d)):
    d[i]=a[i+2]
print d 
```

来自 python 文档：

> range(start, stop[, step]) 这是一个通用函数，用于创建包含算术级数的列表。它最常用于 for 循环。参数必须是纯整数。如果省略 step 参数，则默认为 1。如果省略 start 参数，则默认为 0。完整形式返回纯整数列表 [start, start + step, start + 2 * step, ...] . 如果step为正，则最后一个元素是最大的start + i * step小于stop；如果 step 为负数，则最后一个元素是最小的 start + i * step 大于 stop。step 不能为零（否则会引发 ValueError）。例子：

```
>>>
>>> range(10) [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> range(1, 11) [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> range(0, 30, 5) 
```

根据请求编辑：

```
d = list('banana')
a = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']
mappings = dict((ch, a[idx+2]) for idx, ch in enumerate(set(d)))

for idx in range(len(d)):
    d[idx] = mappings[d[idx]]
#OR:
d = [mappings[d[idx]] for idx in range(len(d))]

print d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:34:27.277

string.translate 非常适合这个......我不确定这是否算作图书馆......

```
>>> import string
>>> tab = string.maketrans("abcdefghijklmnopqrstuvwxyz","mnopqrstuvwxyzabcdefghi
jkl")
>>> print "hello".translate(tab)
tqxxa 
```

或者

```
>>> print  "".join([chr(ord(c)+13) if ord(c) + 13 < ord('z') else chr(ord('a')+(ord(c)+13)%ord('z')) for c in "hello"])
'uryyc' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T08:45:41.157

```
In [63]: d=list('aabbcc')

In [64]: a='a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z'.split(",")

In [65]: for i,x in enumerate(d):
    d[i]=a[(a.index(x)+3)%26]

In [66]: d
Out[66]: ['d', 'd', 'e', 'e', 'f', 'f'] 
```

# c# - 为什么静态属性的支持字段也应该是静态的？

> ID：13438602
> 
> 赞同：1
> 
> 时间：2012-11-18T08:27:57.587
> 
> 标签：c#, static

当我想`private`在属性中使用非静态字段时`public static`，我的非静态字段出现了一些编译错误`private`，当我创建它时`static`，一切正常。

我对编译器不太了解，所以我想知道为什么支持字段也应该是`static`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T08:30:48.977

如果支持字段不是静态的，那么当您在静态属性访问器中使用它时，您将如何获取该字段的实例？请记住，`static`成员上的修饰符意味着该成员与*类型本身*相关联，而不是与该类型的特定*实例*相关联。为了使静态属性起作用，它必须有一个本身是静态的支持字段，以便可以相应地实现它。

出于同样的原因，您不能在没有实例的情况下访问静态方法中的任何非静态成员。

# android - 如何将 ScrollView 设置为 RelativeLayout 的父级？

> ID：13438610
> 
> 赞同：2
> 
> 时间：2012-11-18T08:29:26.500
> 
> 标签：android, android-layout

我是 android 应用程序开发的新手，现在我正在设计一个应用程序，因为我有一个活动，它有两个并行的编辑文本字段，如图所示

![在此处输入图像描述](../Images/ffb3bcdac81d2146a8f0d043aa4fcb60.png)

（包含 15 组编辑文本字段）。我使用了相对布局。我想添加一个垂直滚动视图，因为一些文本字段会从屏幕上消失。我研究了一些教程，它们都使用线性布局来添加滚动视图。

这是我的 layout.xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<EditText
   android:id="@+id/editText5"
    android:layout_width="85dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="100dp"
    android:layout_marginTop="5dp" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="85dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="200dp"
    android:layout_marginTop="5dp" />

<EditText
    android:id="@+id/EditText01"
    android:layout_width="85dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/editText5"
    android:layout_below="@+id/editText5"
    android:layout_marginTop="17dp" />

<EditText
    android:id="@+id/EditText02"
    android:layout_width="85dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/EditText01"
    android:layout_alignBottom="@+id/EditText01"
    android:layout_alignLeft="@+id/editText1" />

 </RelativeLayout> 
```

在这里，如何在不更改两个并行编辑文本字段的情况下添加滚动视图。请指导我。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T08:33:03.073

添加一个 ScrollView 作为屏幕的根。ScrollView 应该有一个包含所有子元素的子布局。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent">

        <!-- All your views -->

     </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:34:57.103

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<RelativeLayout
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<EditText
   android:id="@+id/editText5"
    android:layout_width="85dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="100dp"
    android:layout_marginTop="5dp" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="85dp"
    android:layout_height="wrap_content"
    android:layout_marginLeft="200dp"
    android:layout_marginTop="5dp" />

<EditText
    android:id="@+id/EditText01"
    android:layout_width="85dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/editText5"
    android:layout_below="@+id/editText5"
    android:layout_marginTop="17dp" />

<EditText
    android:id="@+id/EditText02"
    android:layout_width="85dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/EditText01"
    android:layout_alignBottom="@+id/EditText01"
    android:layout_alignLeft="@+id/editText1" />
</RelativeLayout>

 </ScrollView> 
```

# node.js - Node.js 和 socket.io 的 Redis 身份验证错误

> ID：13438613
> 
> 赞同：7
> 
> 时间：2012-11-18T08:29:58.493
> 
> 标签：node.js, redis, socket.io

我可以在没有密码的情况下将我的 Node 应用程序连接到 Redis，但是当我添加密码时，我所做的一切都是正确的。

这是我现在的代码，取自[一个示例](https://github.com/LearnBoost/socket.io/pull/551)：

```
var redis = require('redis')
  , sio = require('socket.io')
  , RedisStore = sio.RedisStore
  , io = sio.listen();

var port = 6379
  , hostname = 'localhost'
  , password = 'password';

var redisClient = redis.createClient(port, hostname);
redisClient.auth(password, function (err) { if (err) throw err; });

var redisSubscriber = redis.createClient(port, hostname);
redisSubscriber.auth(password, function (err) { if (err) throw err; });

io.set('store', new RedisStore({ redisPub: redisClient, redisSub: redisSubscriber, redisClient: redisClient })); 
```

在运行应用程序时，我得到了这个堆栈跟踪：

```
/home/eric/christmas/sockets/node_modules/socket.io/node_modules/redis/index.js:506
                throw callback_err;
                      ^
Error: Ready check failed: ERR operation not permitted
    at RedisClient.on_info_cmd (/home/eric/christmas/sockets/node_modules/socket.io/node_modules/redis/index.js:319:35)
    at Command.RedisClient.ready_check.send_anyway [as callback] (/home/eric/christmas/sockets/node_modules/socket.io/node_modules/redis/index.js:367:14)
    at RedisClient.return_error (/home/eric/christmas/sockets/node_modules/socket.io/node_modules/redis/index.js:502:25)
    at RedisReplyParser.RedisClient.init_parser (/home/eric/christmas/sockets/node_modules/socket.io/node_modules/redis/index.js:262:14)
    at RedisReplyParser.EventEmitter.emit (events.js:93:17)
    at RedisReplyParser.send_error (/home/eric/christmas/sockets/node_modules/socket.io/node_modules/redis/lib/parser/javascript.js:266:14)
    at RedisReplyParser.execute (/home/eric/christmas/sockets/node_modules/socket.io/node_modules/redis/lib/parser/javascript.js:125:22)
    at RedisClient.on_data (/home/eric/christmas/sockets/node_modules/socket.io/node_modules/redis/index.js:478:27)
    at Socket.<anonymous> (/home/eric/christmas/sockets/node_modules/socket.io/node_modules/redis/index.js:79:14)
    at Socket.EventEmitter.emit (events.js:93:17) 
```

生成此行是最后一行 - 如果我注释掉设置 RedisStore 的尝试，我不会收到任何错误。

我确定密码是正确的（我可以在 redis-cli 中验证它，如果我将密码更改为错误，我可以验证身份验证回调不会触发）。如果我删除密码并注释掉两个身份验证行，此代码也可以工作。

博客文章和文档等上的所有工作示例都表明这应该有效，我不知道为什么我的不是。我不知道要看堆栈的哪一部分。

这是我运行上面的代码时 redis-cli 监视器的样子：

```
1353227107.912512 [0 127.0.0.1:56759] "auth" "password"
1353227107.912719 [0 127.0.0.1:56758] "auth" "password"
1353227107.913470 [0 127.0.0.1:56759] "info"
1353227107.913639 [0 127.0.0.1:56758] "info" 
```

如果我关闭密码，注释掉上面的 auth 行，并成功运行应用程序，这就是 redis-cli 监视器显示的内容：

```
1353227252.401667 [0 127.0.0.1:56771] "info"
1353227252.402020 [0 127.0.0.1:56770] "info"
1353227252.402131 [0 127.0.0.1:56769] "info"
1353227252.402423 [0 127.0.0.1:56768] "info"
1353227252.402611 [0 127.0.0.1:56767] "info"
1353227252.406254 [0 127.0.0.1:56770] "subscribe" "handshake"
1353227252.406287 [0 127.0.0.1:56770] "subscribe" "connect"
1353227252.406314 [0 127.0.0.1:56770] "subscribe" "open"
1353227252.406321 [0 127.0.0.1:56770] "subscribe" "join"
1353227252.406326 [0 127.0.0.1:56770] "subscribe" "leave"
1353227252.406337 [0 127.0.0.1:56770] "subscribe" "close"
1353227252.406354 [0 127.0.0.1:56770] "subscribe" "dispatch"
1353227252.406372 [0 127.0.0.1:56770] "subscribe" "disconnect" 
```

成功的（无密码）连接发出 5 个“信息”命令，而我不成功的（密码）命令发出 2 个 - 然后在调用“on_info_cmd”方法时死掉。

任何人都可以理解这一点吗？谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T04:38:39.237

我通过将 redis 模块本身作为选项传递给 RedisStore 构造函数来解决这个问题。

```
io.set('store', new RedisStore({redis: redis, redisPub: redisClient, redisSub: redisSubscriber, redisClient: redisClient })); 
```

这是客户端对象通过`instanceof RedisClient`测试所必需的，并且在没有密码的情况下不会重新初始化。显然，当`RedisStore`重新需要 redis 模块时，使用该`createClient`方法创建的 redis 客户端是某个新类或其他东西的成员。

我通过查看有人在 socket.io 的[问题 #808](https://github.com/LearnBoost/socket.io/issues/808)上遇到的相关问题来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:25:25.313

尝试`redisClient.auth(password, function (err) { if (err) throw err; });`只调用一次，redis 存储每次调用的 auth 信息，调用两次可能会报错。

# c++ - 如何在 clang 库中进行模板替换？

> ID：13438615
> 
> 赞同：11
> 
> 时间：2012-11-18T08:30:16.260
> 
> 标签：c++, clang, abstract-syntax-tree

具体来说，我们有一个像这样的 C++ 源文件：

```
template <int n>
struct N {};

struct B {
    template <typename M>
    using A = typename std::conditional<std::is_same<M, N<4>>::value,
                                        int*, void*>::type;
};

template <typename T, T value>
struct F : B {};

template <>
struct F<decltype(&fopen), &fopen> : B {
    template <typename M>
    using A = double*;
};

template <>
struct F<decltype(&fclose), &fclose> : B {
    template <typename M>
    using A = typename std::conditional<std::is_same<M, N<16>>::value,
                                        void*, char**>::type;
};

// More specialization of 'F' follows. 
```

很容易找到and 的[ClassTemplateDecl](http://clang.llvm.org/doxygen/classclang_1_1ClassTemplateDecl.html)，`N`以及函数指针,`F`的[QualType](http://clang.llvm.org/doxygen/classclang_1_1QualType.html)和[FunctionDecl](http://clang.llvm.org/doxygen/classclang_1_1FunctionDecl.html)等。但问题是如何在不修改源代码的情况下将这些参数替换为 N、F 和 F::A。`&fopen``&fclose`

问题是：

*   我如何评估`F<decltype(&fprintf), &fprintf>::A<N<4>>`并知道它是一个`int*`？
*   我如何评估`F<decltype(&fopen), &fopen>::A<N<7>>`并知道它是一个`double*`？
*   等等...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:53:12.867

我有一个部分解决方案，唯一需要注意的是，我无法`std::is_same<N<4>, N<4>>::value`返回`true`。好吧，我可以忍受，因为我可以定义一个`constexpr`直接对值进行操作的方法。但我希望有人可以为此提供正确的答案。

我已将完整的解决方案和修改后的输入放到[https://gist.github.com/4178490](https://gist.github.com/4178490)中。

* * *

我发现要将参数替换为类模板并实例化它，可以：

1.  使用参数将[ClassTemplateDecl](http://clang.llvm.org/doxygen/classclang_1_1ClassTemplateDecl.html)转换为[ClassTemplateSpecializationDecl](http://clang.llvm.org/doxygen/classclang_1_1ClassTemplateSpecializationDecl.html)，并且
2.  使用[Sema::InstantiateClass](http://clang.llvm.org/doxygen/classclang_1_1Sema.html#ab14d57d2b5514c0d7d162925b4380a14)方法实例化特化。

[Sema::RequireCompleteType](http://clang.llvm.org/doxygen/classclang_1_1Sema.html#ac0a6898b12576366752f6274fd048e9a)方法确实间接调用了 InstantiateClass，并且需要较少的输入，所以我改为调用此方法。因此，我们会写：

```
/**
 * Instantiate a class template.
 */
ClassTemplateSpecializationDecl* instantiate(ASTContext& ast, Sema& sema, 
                                             DeclContext* parent,
                                             ClassTemplateDecl* decl, 
                                             ArrayRef<TemplateArgument> args) {
   void* ins_point;
   auto retval = decl->findSpecialization(args.data(), args.size(), ins_point);
   if (retval == nullptr) {
       retval = ClassTemplateSpecializationDecl::Create(ast, TTK_Class, parent, 
                                                        {}, {}, decl,
                                                        args.data(), args.size(),
                                                        nullptr);
       decl->AddSpecialization(retval, ins_point);
   }
   bool is_incomplete = sema.RequireCompleteType({}, ast.getTypeDeclType(retval),
                                                 diag::err_incomplete_type);
   return is_incomplete ? nullptr : retval;
} 
```

此方法仅适用于 ClassTemplateDecl。在问题中，我们还有一个[TypeAliasTemplateDecl](http://clang.llvm.org/doxygen/classclang_1_1TypeAliasTemplateDecl.html)。为此，我将直接调用[TemplateDeclInstantiator](http://clang.llvm.org/doxygen/classclang_1_1TemplateDeclInstantiator.html)，因为这是唯一知道 TypeAliasTemplateDecl 的对象。也许这种方法也适用于 ClassTemplateDecl，但我不能确定，因为单独使用 TemplateDeclInstantiator 似乎没有完成足够的工作。

```
/**
 * Instantiate a template alias (`template <...> using Foo = ...`).
 */
TypeAliasDecl* instantiate(ASTContext& ast, Sema& sema, DeclContext* parent,
                           TypeAliasTemplateDecl* decl,
                           ArrayRef<TemplateArgument> args) {
    auto args_count = static_cast<unsigned>(args.size());
    TemplateArgumentList arg_list {TemplateArgumentList::OnStack,
                                   args.data(), args_count};
    MultiLevelTemplateArgumentList multi_arg_list {arg_list};
    TemplateDeclInstantiator instantiator {sema, parent, multi_arg_list};
    auto instantiated = instantiator.Visit(decl);
    if (auto inst_decl = dyn_cast<TypeAliasTemplateDecl>(instantiated)) {
        return inst_decl->getTemplatedDecl();
    }
    return nullptr;
} 
```

（我跳过了 FunctionTemplateDecl，它超出了我的问题范围。）

# jquery - jquery ui 可排序范围和嵌套可排序

> ID：13438619
> 
> 赞同：-2
> 
> 时间：2012-11-18T08:31:13.323
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我的HTML：

```
<div class="demo">
    <div id="sortable" class="ui-state-default">
        <div id = "draggable1" class="">Home</div>
        <div id = "draggable2" class="">Contact Us</div>
        <div id = "draggable3" class="">
            <table id='srtTable'>
                <tr>
                    <td>tbl1</td>
                    <td>tbl2</td>
                    <td>tbl3</td>
                    <td>tbl4</td>
                </tr>
            </table>
            FAQs</div>
        <div id = "draggable5" class="Test">Test1</div>
        <div id = "draggable6" class="Test">Test2</div>
        <div id = "draggable7" class="Test">
             <table id='srtTable1'>
                <tr>
                    <td>tbl1</td>
                    <td>tbl2</td>
                    <td>tbl3</td>
                    <td>tbl4</td>
                </tr>
            </table>
            Test3</div>
    </div>
</div> 
```

和jQuery：

```
$("#sortable").sortable({
   items: ":not(#draggable3,#draggable7)"
});

$("Table tr td").sortable({
   connectWith:'#' + $(this).parents().find(table).attr('id')
}); 
```

但是`td`在表外排序。如何限制`td`表内的排序范围？

[jsfiddle](http://jsfiddle.net/shree/sP3UZ/2215/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:56:11.607

如果你用这个替换你所有的javascript代码，那应该可以工作：

```
$("#sortable table tr").sortable(); 
```

见小提琴：http: [//jsfiddle.net/sP3UZ/2231/](http://jsfiddle.net/sP3UZ/2231/)

您必须将 应用于`sortable()`可排序元素的容器，而不是元素本身。

# ios - iOS 模拟器设备背景图片的许可证

> ID：13438622
> 
> 赞同：2
> 
> 时间：2012-11-18T08:31:29.570
> 
> 标签：ios, ios-simulator

iOS Simulator 为各种设备提供了这些精美的背景图像。如果可能的话，我想将它们用于我的应用程序的促销目的。我找不到有关他们的许可条款以及 Apple 是否允许此类使用的任何信息（毕竟这也是他们的 Appstore 的促销活动）。这里有人有这方面的信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:38:03.393

营销图片可从

[https://developer.apple.com/appstore/resources/marketing/index.html](https://developer.apple.com/appstore/resources/marketing/index.html)

（需要使用您的开发者帐户登录）

这有适用于所有设备的图像，以及 App Store 徽章等。

通过使用 iOS 模拟器的菜单，您可以在没有模拟器边框的情况下获取屏幕截图 - 这可以防止您不得不裁剪以使用营销图像。

# javascript - XAMPP 和 JavaServlet

> ID：13438627
> 
> 赞同：1
> 
> 时间：2012-11-18T08:32:05.457
> 
> 标签：javascript, servlets, connection, xampp

社区。我有一个 JavaServlet。我让它与 XAMPP 的 tomcat 一起运行，并且可以使用 localhost:8080/MyProjectName/ServletName 访问它。我还有 HTML 文件，它们位于我的 XAMPP 文件夹中，例如 index.html，因此我可以通过在浏览器中键入 localhost 来访问这些文件。问题是我不能直接从索引文件访问我的 servlet。我怎样才能做到这一点？例如，我想通过 JavaScript 访问 JavaServlet。那可能吗？如果没有，那我该怎么办？

# java - 初始化空HashMap

> ID：13438630
> 
> 赞同：1
> 
> 时间：2012-11-18T08:32:28.937
> 
> 标签：java, hashmap

我来自编写大量 JavaScript，所以请耐心等待。

我有 3 个 HashMap，我在不同类的方法中引用它们。我的代码（非常简单）如下所示：

```
public class MainClass {
    private HashMap<String,Nation> randomHashMap = new HashMap<String,Nation>();
    DifferentClass d = new DifferentClass(this);
} //with getters/setters

public class DifferentClass {
    private MainClass mc;
    public void randomMethod() {
        System.out.println("randomHashMap is " + (mc.getRandomHashMap() == null));
    } //returns null
    public DifferentClass(MainClass c) {
        this.mc = c;
    }
} 
```

但是，当我在其他方法中调用它们时，它们为空。

如何创建一个新的空 HashMap？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T08:38:51.240

在方法中使用它之前，您需要初始化`MainClass mc`变量`DifferentClass#randomMethod`。另外，请确保您使用的是`mc`变量而不是`MainClass.getRandomHashMap()`方法（根据您的实际代码，我们不知道它的行为方式）。您的代码将如下所示：

```
public class DifferentClass {

    private MainClass mc = new MainClass();

    public void randomMethod() {
        //assuming getRandomHashMap is the getter of randomHashMap attribute (and non static)
        System.out.println("randomHashMap is " + (mc.getRandomHashMap() == null));
    }
}

public class MainClass {
    private HashMap<String,Nation> randomHashMap = new HashMap<String,Nation>();
    DifferentClass d = new DifferentClass(this);

    public HashMap<String,Nation> getRandomHashMap() {
        return this.randomHashMap;
    }
} //with getters/setters 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:04:16.313

就字段初始化而言，您发布的代码实际上完全没问题。我用它制作了一个 SSCCE，干预最少：

```
class Nation{}

public class MainClass {
  private HashMap<String,Nation> randomHashMap = new HashMap<String,Nation>();
  DifferentClass d = new DifferentClass(this);
  public Object getRandomHashMap() {
    return randomHashMap;
  }
  public static void main(String[] args) {
    new MainClass().d.randomMethod();
  }
} //with getters/setters

class DifferentClass {
  private MainClass mc;
  public void randomMethod() {
      System.out.println("randomHashMap is " + (mc.getRandomHashMap() == null));
  } //returns null
  public DifferentClass(MainClass c) {
      this.mc = c;
  }
} 
```

它打印

```
randomHashMap is false 
```

这证明这`randomHashMap`确实是非空的。

# mysql - 在触发器中加入更新命令

> ID：13438632
> 
> 赞同：2
> 
> 时间：2012-11-18T08:33:06.750
> 
> 标签：mysql, join, triggers, sql-update

我有 3 个表，tbl_image、tbl_vehicle_image 和 tbl_vehicle

tbl_vehicle_image 解决了 tbl_image 和 tbl_vehicle 之间的多对多关系

tbl_vehicle 有一个 last_modified_date

如何创建一个触发器，当我更改例如 tbl_image.img_lnk 时，使用 tbl_vehicle_image 查找 tbl_vehicle 中使用该图像的所有记录，并将它们的 last_modified_date 设置为 NOW()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:47:53.960

```
CREATE TRIGGER `trig_after_image_update` AFTER UPDATE ON `tbl_image`
 FOR EACH ROW 
    if old.img_lnk<>NEW.img_lnk
    then
        update tbl_vehicle  set last_modified_date=NOW() where id in (select vehicle_id from tbl_vehicle_image where image_id=OLD.id);
    end if; 
```

我没有您表的所有字段名称，因此请更改它们。我已使用 id 作为相应表的主键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:40:35.267

你可以这样做：

```
DELIMITER $$;

create TRIGGER UpdateLastmodifiedDate AFTER UPDATE ON tbl_image
FOR EACH ROW 
BEGIN
   UPDATE tbl_vehicle v
   INNER JOIN tbl_vehicle_image vi ON v.vehicleId = vi.vehicleID
   INNER JOIN tbl_image i ON vi.imageid = i.id
   SET v.lastmodified_date = NOW()
   WHERE i.img_lnk = NEW.img_lnk;
END$$ 
```

# acl - 在 Zend Framework 2 中加载 ACL 的简单方法？

> ID：13438633
> 
> 赞同：5
> 
> 时间：2012-11-18T08:33:18.970
> 
> 标签：acl, zend-framework2

我一直在按照[本指南](http://adam.lundrigan.ca/2012/07/quick-and-dirty-zf2-zend-navigation/)加载我的菜单配置，我认为这是加载菜单的非常好的和干净的方式。

我的问题很简单，有没有办法以与配置数组和某种工厂相同的方式加载 ACL 配置？

如果没有，我如何加载 ACL 配置并以简单的方式使用该菜单？

谢谢！

编辑：这是一篇非常好的博客文章，关于为什么使用已经完成而不是自己制作的模块，[http://hounddog.github.com/blog/there-is-a-module-for-that/](http://hounddog.github.com/blog/there-is-a-module-for-that/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T10:54:11.097

很可能有几种方法可以做到这一点，但我更喜欢在`getViewHelperConfig()`应用程序中进行`Module.php`（这里我使用[`BjyAuthorize`](https://github.com/bjyoungblood/BjyAuthorize)模块来简化 ACL 的工作，特别是它允许在配置文件中设置 ACL 规则`module.bjyauthorize.global.php`）

```
public function getViewHelperConfig()
{
    return array(
        'factories' => array(
            'navigation' => function($sm) {
                $auth = $sm->getServiceLocator()->get('BjyAuthorize\Service\Authorize');
                $role = $auth->getIdentityProvider()->getIdentityRoles();
                if (is_array($role))
                    $role = $role[0];

                $navigation = $sm->get('Zend\View\Helper\Navigation');
                $navigation->setAcl($auth->getAcl())->setRole($role);

                return $navigation;
            }
        )
    );
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T22:38:15.473

ZF2 包含 ACL 和 RBAC（基于角色的 ACL - 可能在 ZF2.1 中），但要放置它，更容易使用可以插入应用程序的模块。[BjyAuthorize](https://github.com/bjyoungblood/BjyAuthorize)在我看来有点臃肿，你必须使用 ZfcUser 模块。我更喜欢[ZfcRbac](https://github.com/ZF-Commons/ZfcRbac)，ACL 规则基于用户角色（组）及其对控制器、操作或路由的访问。配置存储在一个配置文件中，非常容易实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-25T05:43:53.093

玩这个结构。从数据库中获取角色和资源并将其保存在会话中或任何缓存中。

![玩这个结构](../Images/b786d287f7d6a6bea46402f9842b27a9.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-03T12:03:28.143

你是对的，没有开箱即用的多合一解决方案。您必须在模块之间建立一些桥梁。

**集成BjyAuthorize**的另一种简单方法是使用 **Zend Navigation**s 默认方法，如 Rob Allen 所述： [Integrating BjyAuthorize with ZendNavigation](http://akrabat.com/zend-framework-2/integrating-bjyauthorize-with-zendnavigation/)

```
 $sm = $e->getApplication()->getServiceManager();

    // Add ACL information to the Navigation view helper
    $authorize = $sm->get('BjyAuthorizeServiceAuthorize');
    $acl = $authorize->getAcl();
    $role = $authorize->getIdentity();
    ZendViewHelperNavigation::setDefaultAcl($acl);
    ZendViewHelperNavigation::setDefaultRole($role); 
```

您还可以使用**ZfcRbac**并使用侦听器使其与**Zend Navigation**一起工作。

由于这是很多代码，我只是在此处发布链接： [Check Zend Navigation page permissions with ZfcRbac – Webdevilopers Blog](http://blog.webdevilopers.net/?p=9)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-26T21:57:33.833

我刚刚创建了一个 ACL 模块，该模块创建了一个解析路由的 ACL 服务。

要管理对应用程序的访问控制，您只需要定义角色并在每个路由中添加一个新的关键“角色”。如果你没有定义那个键或者它的数组是空的，那么路由就会变成公共的。它也适用于子路线。

举个例子：

```
array(
    'router' => array(
        'routes' => array(
            'user\users\view' => array(
                'type'              => 'Segment',
                'options'           => array(
                    'route'         => '/admin/users/view/id/:id/',
                    'constraints'   => array(
                        'id' => '[0-9]+',
                    ),
                    'defaults' => array(
                        'controller' => 'User\Controller\Users',
                        'action'     => 'view',
                        'roles'      => ['admin', 'user'],
                    ),
                ),
            ),
        ),
    ),
); 
```

该模块可以通过 composer 安装，它现在列在 zend 模块存储库中：http: [//zfmodules.com/itrascastro/TrascastroACL](http://zfmodules.com/itrascastro/TrascastroACL)

您可以从我的博客获得有关使用和安装的更多详细信息：[http ://www.ismaeltrascastro.com/acl-module-zend-framework/](http://www.ismaeltrascastro.com/acl-module-zend-framework/)

# c - C - recvfrom 和信号

> ID：13438634
> 
> 赞同：2
> 
> 时间：2012-11-18T08:33:43.507
> 
> 标签：c, sockets, udp, signals

我想处理 SIGUSR1 信号，所以我做它需要的一切并且它正在工作。但是在我的程序中，我在 recvfrom 等待，当我处理信号并返回到 recvfrom 时，我从这个函数中得到了 -1。是否可以返回等待此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T08:38:50.233

您的系统调用被信号[中断](http://www.gnu.org/software/libc/manual/html_node/Interrupted-Primitives.html#Interrupted-Primitives)。`sigaction`除非您始终使用标志设置信号处理程序[`SA_RESTART`](http://www.gnu.org/software/libc/manual/html_node/Flags-for-Sigaction.html)，否则最好使用循环重试系统调用，例如：

```
while ((size = recvfrom(...)) == -1 && errno == EINTR)
  ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T08:36:39.490

它应该返回`-1`并设置`errno`为`EINTR`然后你应该尝试再次调用它，或者`SA_RESTART`在设置信号处理程序时使用标志，当它被信号中断时应该允许`recvfrom`重新启动。

从 man signal(7) 页面：

> 如果对以下接口之一的阻塞调用被信号处理程序中断，**则如果使用了 SA_RESTART 标志，则在信号处理程序返回后将自动重新启动调用**；否则调用将失败并出现错误 EINTR：
> 
> 套接字接口：accept(2)、connect(2)、recv(2)、**recvfrom(2)**、recvmsg(2)、send(2)、sendto(2) 和 sendmsg(2)，除非设置了超时在插座上（见下文）

# c - 命令行参数未在 C 中执行

> ID：13438643
> 
> 赞同：0
> 
> 时间：2012-11-18T08:35:01.097
> 
> 标签：c, terminal, exec, fork

我正在尝试将参数传递给 ls 命令的 execl() 函数。但是当我通过

```
/bin/ls -l -a 
```

作为我程序的参数， execl() 函数无法识别最后两个参数。为什么会这样？这是代码：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
int i,childpid;

if(argc!=4)
{
    printf("you didn't provide any commandline arguments!\n");
    return 0;
}

childpid=fork();

if(childpid<0)
{
    printf("fork() failed\n");
    return 0;
}
else
    if(childpid==0)
    {
         printf("My ID %d\n\n",getpid());
        execl(argv[1],argv[2], argv[3],NULL);

        printf("If you can see this message be ware that Exec() failed!\n");
    }

    while(wait(NULL)>0);

    printf("My ID %d, Parent ID %d, CHild ID %d\n", getpid(),getppid(),childpid);

    return 0;
} 
```

我在 Ubuntu 上。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:46:32.087

运行程序时`/bin/ls`似乎忽略了`-l`参数，因为它是在为 保留的位置传递的`argv[0]`，这通常是（相当无用的）程序名称。

具体来说，第一个参数`execl`是要运行的程序，其余参数`argv`按原样复制到向量。由于`argv[0]`预计包含程序名称并且实际参数从 开始`argv[1]`，因此您必须通过提供两次程序名称来进行补偿：

```
execl(argv[1], argv[1], argv[2], argv[3], (char *) NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:41:44.220

`NULL`代码中的一个错误是使用`execl()`. 从[man execl](http://linux.die.net/man/3/execl)：

> execl()、execlp() 和 execle() 函数中的 const char *arg 和后续省略号可被视为 arg0、arg1、...、argn。它们一起描述了一个或多个指向以空字符结尾的字符串的指针列表，这些字符串表示已执行程序可用的参数列表。按照惯例，第一个参数应该指向与正在执行的文件关联的文件名。**参数列表必须由 NULL 指针终止，并且由于这些是可变参数函数，因此该指针必须强制转换 (char *) NULL。**

请参阅问题[如何在我的程序中获取空指针？](http://c-faq.com/null/null2.html)`excel()`来自 C FAQ，在其示例中特别提到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T08:46:04.790

在我添加之前，该代码对我不起作用`#include<unistd.h>`

据我所知，函数 exec、execl 等是在 unistd.h 中声明的，而不是在 stdlib.h 中。

如果我只使用 stdlib.h 和 stdio.h 编译，我会收到警告。

`test.c: In function ‘main’: test.c:24:9: warning: incompatible implicit declaration of built-in function ‘execl’ [enabled by default]`

如果你添加 unistd.h，然后将 exec 调用更改为

`execl(argv[1], argv[1], argv[2], argv[3],NULL);`

你的程序应该可以工作。

# r - 如何将不同的长数据写入R中的文件？

> ID：13438648
> 
> 赞同：3
> 
> 时间：2012-11-18T08:36:12.627
> 
> 标签：r

> **可能重复：**
> [R：将列表打印到文本文件](https://stackoverflow.com/questions/3044794/r-print-list-to-a-text-file)

有两个向量，x1，x2

```
x1<-1:3
x2<-1:6 
```

我想将这两个向量写入以`test`下列格式命名的文件中

```
1 2 3
1 2 3 4 5 6 
```

（文件中一行一个向量）

```
write(file="c:/test",x1)  
write(file="c:/test",x2,append=TRUE,nlines=6) 
```

有简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T09:45:00.277

一种更简单的方法 - 无论是在写入和读取数据方面 - 是使用`save`and `load`：

```
##Save both objects to the file
##BTW, you should always use a file extension
save(x1, x2, file="c:/test.RData")

##Loads both objects into your workspace
load("c:/test.RData") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T08:55:25.077

这是一种使用一个命令将所有对象写入同一文件的方法：

```
lapply(list(x1, x2), function(x) write(x, "c:/test", length(x), TRUE)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T10:34:21.687

您还可以`paste`将数字转换为字符向量，并用于`writeLines`将它们转储到文件连接。

```
dat = list(vec1, vec2)
dat_write = paste(dat, collapse = " ")
con = file("c:\test", "w")
writeLines(dat_write, con)
close(con) 
```

# python - QImage即使存在也不加载图像

> ID：13438653
> 
> 赞同：0
> 
> 时间：2012-11-18T08:37:09.693
> 
> 标签：python, qt, pyqt

```
def setPixData(self,data):
    print(data) #this print the image file name correctly e.g asdfghj.jpg
    img=QtGui.QImage(QtCore.QCoreApplication.applicationDirPath ()+"/temp/"+data)
    pix=QtGui.QPixmap.fromImage(img)
    self.driver_ui.pix.setPixmap(pix) 
```

当我从开发代码运行它时，这会正确加载图像。一旦我用 cx_freeze 冻结它并将其安装在最终目标目录中，它就不会加载图像。即使图像位于指定路径中。

我已经尝试将完整路径硬编码到冻结版本中，但仍然没有运气。我`f.write()`在上述代码的每一行都放置了一个，它们都运行没有错误。我认为问题出在`QImage`因为它返回 true`isNull()`

可能是什么问题，如果`QImage`没有被 cx_freeze 添加，它肯定会抛出异常并且不会`f.write()`在下一行运行。我在这里迷路了。

注意：它是 python 中的 Windows GUI 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:58:08.527

您可能给它一个不正确的文件路径。*如果你不给它一个正确的文件路径，文件存在于某处*的事实对QImage 没有帮助。

# android - 设置幻灯片菜单 - 示例不起作用

> ID：13438657
> 
> 赞同：34
> 
> 时间：2012-11-18T08:38:03.287
> 
> 标签：android, actionbarsherlock

我正在尝试将 SlideMenu 库与 ActionBarSherlock 一起使用。 [https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

我没有问题安装 actionbarsherlock 并运行提供的示例。但是，不能对 SlideMenu 库的示例做同样的事情:(

我可以很好地设置库（或者我认为）没有错误（在 eclipse 下使用 jre6）。

对于幻灯片菜单示例，我创建了项目，并将 com_actionbarssherlock.jar 添加为“引用的库”。

但我有很多： - R 无法解决错误；- 不能覆盖某些方法错误；- 无法识别来自 actionbarsherlock 的方法；ex：“方法 getSupportActionBar() 未定义 BaseActivity 类型” - 无法从 actionbarsherlock 错误中加载样式。

就好像项目没有看到来自 actionbarsherlock 的类。

谢谢你的帮助。

![在此处输入图像描述](../Images/729b9c9d3cfa82fd8be83def6b128570.png)

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-11-24T00:38:38.867

对于错误

> “方法 getSupportActionBar() 未为 BaseActivity 类型定义”

在 SlidingMenu 库中，编辑 SlidingFragmentActivity 类以扩展 SherlockFragmentActivity（如下所示）。然后清理重建，现在应该可以找到这个方法了。

```
public class SlidingFragmentActivity extends SherlockFragmentActivity implements SlidingActivityBase { 
```

[资源](https://github.com/jfeinstein10/SlidingMenu/issues/145)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T10:36:04.387

github上有[很多关于那个bug的问题。](https://github.com/jfeinstein10/SlidingMenu/search?q=SherlockFragmentActivity&ref=cmdform&type=Issues)Mrcb123 的解决方案有效，但[我认为](https://github.com/jfeinstein10/SlidingMenu/issues/200#issuecomment-38787580)将示例 ABS 依赖项与库分开会很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T08:44:12.940

看看添加问题选项卡，看看有什么错误？右键单击您的项目并检查您的所有库。如果一切正常，请尝试清理您的项目。

# haskell - 使 Haskell 代码更惯用（440 Hz 音调）

> ID：13438659
> 
> 赞同：4
> 
> 时间：2012-11-18T08:38:15.857
> 
> 标签：haskell, audio

这就是我所拥有的。[受此问题](https://stackoverflow.com/questions/2572651/using-python-to-play-two-sine-tones-at-once)的启发，它会生成一个440 Hz 正弦波的 5 秒[Au 文件](https://en.wikipedia.org/wiki/Au_file_format)。

```
-- file: tone.hs

import qualified Data.ByteString.Lazy as BL
import qualified Data.ByteString.Lazy.Char8 as BLC
import Data.Binary.Put

-- au format header: https://en.wikipedia.org/wiki/Au_file_format
header :: Double -> Integer -> Integer -> Put
header dur rate bps = do
  putLazyByteString $ BLC.pack ".snd"
  putWord32be 24
  putWord32be $ fromIntegral $ floor $ fromIntegral bps * dur * fromIntegral rate
  putWord32be 3
  putWord32be $ fromIntegral rate
  putWord32be 1

-- audio sample data
samples :: Double -> Integer -> Integer -> Double -> Double -> Put
samples dur rate bps freq vol =
    foldl1 (>>) [put i | i <- [0..numSamples-1]]
  where
    numSamples = floor $ fromIntegral rate * dur
    scale i = 2 * pi * freq / fromIntegral rate * fromIntegral i
    sample i = vol * sin (scale i)
    coded samp = floor $ (2 ^ (8*bps-1) - 1) * samp
    put i = putWord16be $ coded $ sample i

freq = 440 :: Double    -- 440 Hz sine wave
dur = 5 :: Double       -- played for 5 seconds
rate = 44100 :: Integer -- at a 44.1 kHz sample rate
vol = 0.8 :: Double     -- with a peak amplitude of 0.8
bps = 2 :: Integer      -- at 16 bits (2 bytes) per sample

main =
    BL.putStr $ runPut au
  where
    au = do
      header dur rate bps
      samples dur rate bps freq vol 
```

如果您正在运行 Linux，则可以使用`runghc tone.hs | aplay`. 对于其他操作系统，您可能可以将输出重定向到`.au`文件并在音频播放器中播放。

我怎样才能使这段代码更地道？例如：

*   我`fromIntegral`到处写。我可以避免吗？
*   我应该/可以使用不同的包来输出二进制数据吗？
*   我在使用合理的类型吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T11:27:32.807

这里没有什么不好的。`foldl1 (>>) [put i | i <- [0..numSamples-1]]`相当于`mapM_ put [0 .. numSamples-1]`。Rate 应该只是 a `Double`，这样你就可以摆脱`fromIntegral`s 了。

`Data.Binary.Put`非常适合二进制输出。有人可能会质疑立即将样本写入 monad 是否好（将它们作为可直接访问的浮点值保存在某个合适的容器（例如 的块`Data.Vector.Storable`）中并且仅`put`来自某个通用函数中的它们可能更灵活最后），但在性能方面，您的方法实际上非常有效。而且由于它不是`IO`您使用的，您始终可以以安全、纯粹的方式取回数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T17:18:21.460

您可以使用类型检查器来帮助您删除`fromIntegral`调用：

1.  注释掉你的类型签名`header`
2.  还要注释掉你的`main`定义
3.  将代码加载到 ghci
4.  用于`:t header`查看 GHC 为`header`.

这样做会产生：

```
*Main> :t header
header
  :: (Integral a1, Integral a2, RealFrac a) =>
     a -> a2 -> a1 -> PutM () 
```

这表明我们可以删除`fromIntegral`on`rate`和`bps`参数，实际上，这个类型检查的定义`header`：

```
header dur rate bps = do
  putLazyByteString $ BLC.pack ".snd"
  putWord32be 24
  putWord32be $ floor $ bps * dur * rate
  putWord32be 3
  putWord32be $ fromIntegral rate
  putWord32be 1 
```

现在的类型是：

```
*Main> :t header
header :: (Integral a, RealFrac a) => a -> a -> a -> PutM () 
```

请注意，我们仍然有一个 fromIntegral `rate`，我们可以通过使用来消除它`floor`，例如：

```
 putWord32be $ floor rate 
```

这将类型更改`header`为`RealFrac a => a -> a -> a -> PutM ()`。

要点是使用类型检查器来帮助您了解函数可能具有的最通用类型签名。

# hadoop - PIG 自动与默认 HDFS 连接，如何？

> ID：13438663
> 
> 赞同：1
> 
> 时间：2012-11-18T08:38:57.813
> 
> 标签：hadoop, apache-pig

我刚刚开始为我未来的一个项目学习 Hadoop 和 PIG（从前两天开始！）。

对于实验，我安装了 Hadoop（默认 localhost:9000 上的 HDFS）作为伪分布式模式和 PIG（map-reduce 模式）。

当我通过输入 ./bin/pig 命令初始化 PIG 时，它启动了 GRUNT 命令行，我收到消息表明 pig 与 HDFS (localhost:9000) 连接，后来我可以通过 pig 成功访问 HDFS。

我期待为 PIG 执行一些手动配置以访问 HDFS（根据各种互联网文章）。

我的问题是，PIG 从哪里识别出默认的 HDFS 配置（localhost:9000）？我检查了 pig.properties，但我没有在那里找到任何东西。我需要这些信息，因为我将来可能会更改默认的 HDFS 配置。

顺便说一句，我在我的 OS PATH 变量中定义了 HADOOP_HOME 和 PIG_HOME。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:15:01.640

安装 Pig（我假设是 v0.10.0）时，您必须告诉它如何连接到`HDFS`. 我不知道你是怎么做到的，但*通常*这是通过将 hadoop conf dir 路径添加到`PIG_CLASSPATH`环境变量来完成的。您也可以设置`HADOOP_CONF_DIR`。

如果您正在启动 grunt shell，Pig 将定位 Hadoop 配置 XML 的目录，并获取`fs.default.name`(core-site.xml) 和`mapred.job.tracker`(mapred-site.xml) 的值，即：Namenode 和 JobTracker 的位置。

作为参考，您可以查看 Pig shell 脚本以了解 env. 变量被收集和评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-22T11:36:48.700

PIG 可以通过 3 种方式连接到底层 HDFS

1- Pig 使用 HADOOP_HOME 来查找要运行的 HADOOP 客户端。您的 HADOOP_HOME 应该已经在您的 bash_profile export HADOOP_HOME=~/myHadoop/hadoop-2.5.2 中设置

2-否则您的 HADOOP_CONF_DIR 可能已经设置，其中包含用于 hadoop 配置导出 HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop/ 的 xml 文件

3-如果未设置这些，您还可以通过更改 PIG_HOME/conf 目录下的 pig.properties 连接到底层 hdfs

# php - 我的 __construct() 错误

> ID：13438664
> 
> 赞同：0
> 
> 时间：2012-11-18T08:39:13.597
> 
> 标签：php, pdo

大家好，我的代码有问题。请参阅下面我当前的代码。我想要实现的是将我的数据库字段（id、name、type）设置为公共属性。

```
Ex:
public $id;
public $name;
public $type; 
```

我希望你能帮我解决这个问题。:)

错误：

```
Warning: Missing argument 1 for Animals::__construct() in C:\Program Files\xampp\htdocs\pdo_intro\index.php on line 8

Notice: Undefined variable: dbh in C:\Program Files\xampp\htdocs\pdo_intro\index.php on line 10

Fatal error: Call to a member function prepare() on a non-object in C:\Program Files\xampp\htdocs\pdo_intro\index.php on line 20 
```

我当前的代码

```
class Animals{

public $db_fields;
private $dbh;

public function __construct($dbh){

$this->dbh = $dbh;

$this->db_fields = $this->get_fields();

foreach($this->db_fields as $field){
$this->$field = "";
}
}

public function get_fields(){
$q = $this->dbh->prepare("DESCRIBE animals");
$q->execute();
$db_fields = $q->fetchAll(PDO::FETCH_COLUMN);

return $db_fields;
}

public function capitalizeType($t){
return ucwords($t);
}
}

/*** mysql hostname ***/
$hostname = 'localhost';
/*** mysql username ***/
$username = 'root';
/*** mysql password ***/
$password = '';
/*** mysql database***/
$dbname = 'animals';

try {
$dbh = new PDO("mysql:host=$hostname;dbname=$dbname", $username, $password);
$animal = new Animals($dbh);
/*** echo a message saying we have connected ***/

$sql = "SELECT * FROM animals";
$result = $dbh->query($sql);

while ($r = $result->fetchObject('animals')){
echo $animal->capitalizeType($r->animal_type) . "<br />";
}

$dbh = null;
}
catch(PDOException $e)
{
echo $e->getMessage();
}
?> 
```

我试过 __construct($dbh="") 仍然是错误

```
Fatal error: Call to a member function prepare() on a non-object in C:\Program Files\xampp\htdocs\pdo_intro\index.php on line 20 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T08:45:12.433

你的问题似乎在这里，

```
$dbh = new PDO("mysql:host=$hostname;dbname=$dbname;charset=utf8", $username, $password);
$animal = new Animals($dbh); 
```

您的数据库连接不起作用，请检查您的用户名和密码等。如果 $dbh 没有返回对象，则构造的第一个参数将为空，设置默认值不会修复它，因为您的其余代码取决于传递给对象的值和“”不是对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:43:42.587

这里：

```
while ($r = $result->fetchObject('animals')){
    echo $animal->capitalizeType($r->animal_type) . "<br />";
} 
```

您正在将数据提取到`Animals`类中，但是在创建新对象时 PDO 不会将任何内容传递给它的构造函数。

此外，您不必担心属性，如果它们不存在，PDO 将为您创建它们。

# php - MySQL：计算具有特定日期的列中所有数字的总和

> ID：13438665
> 
> 赞同：8
> 
> 时间：2012-11-18T08:39:15.587
> 
> 标签：php, mysql, sum

如何获得特定月份的列价格总和。

日期列是 varchar(10)，日期格式是欧洲 (dd-mm-yy)。

这是我的表的示例：

![在此处输入图像描述](../Images/9faba11ba23b8aa39608f60497fed370.png)

目前要选择我使用的所有价格总和：

```
case 'get':

            $q=mysql_real_escape_string($_GET['q']);
            $query="SELECT sum(price) FROM Fuel";

            $result = mysql_query($query);

            $json = array();
            while($row = mysql_fetch_array($result))
            {
                $json['price']=$row['price'];
            }
            print json_encode($json);

            mysql_close();

            break; 
```

那么如何获得 09-2012 月份的列价格总和。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T08:51:10.670

首先更改`date`列的数据类型（记得适当地更新您的应用程序代码）：

```
ALTER TABLE Fuel ADD newdate DATE;
UPDATE Fuel SET newdate = STR_TO_DATE(date, '%d-%m-%Y');
ALTER TABLE Fuel DROP date, CHANGE newdate date DATE FIRST; 
```

那么你也能：

```
SELECT SUM(price) FROM Fuel WHERE date BETWEEN '2012-09-01' AND '2012-09-30' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T08:44:42.030

这将为您工作：

```
SELECT 
  sum(price) 
FROM Fuel
WHERE datefield = 'somedate'; 
```

但是您必须注意在日期参数中输入的格式，因为它将作为字符串文字而不是日期对象进行比较。但是，您应该将这些日期存储在数据类型的列中`DATE`。

**更新：**

> 如何使用 09 选择所有月份的总和？

要仅选择特定月份的记录，您可以使用 MySQL 函数[**`MONTH`**](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)，如下所示：

```
SELECT 
  SUM(price) 
FROM Fuel
WHERE MONTH(`date`) = 9; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/d503e/2)

# c++ - 父类的字段无法识别

> ID：13438667
> 
> 赞同：1
> 
> 时间：2012-11-18T08:39:34.953
> 
> 标签：c++, class, inheritance, pure-virtual

我遇到了一段时间的问题，当我尝试从纯虚拟类继承时，当我为“儿子”类创建构造函数时，我收到此错误：

```
../src/Course.cpp:54:77: error: class ‘ElectiveCourse’ does not have any field named ‘_dptr’ 
```

这发生在所有受课程保护的字段中。

这是结构：

课程.h：

```
 class Course{
    public:
        virtual void reg(Student * s) = 0;
    ..
    protected:
    ...
        string _dptr;
    ...
    }; 
```

接着：

```
class ElectiveCourse : public Course{
...
} 
```

课程.cpp：

```
ElectiveCourse::ElectiveCourse(
    string name,
    int semester,
    double minGrade
)
: _dptr("CS"), _name(name), _semester(semester), _minGrade(minGrade) {
} 
```

像 ElectiveCourse 一样，我还有两个从 Course 类继承的类，并且我在所有这些类中都遇到了相同的错误。[编辑] 这只发生在它们的构造函数中。Course 类中没有构造函数，因此它是纯虚拟的。

另一方面，我也有两个类：Student和CSStudent：Student，其中Student也是纯虚拟的，CSStudent继承Student，在这种情况下没有错误。我对他们两个都做了同样的事情。似乎是什么问题？我很抱歉我的语法错误。

[编辑] 添加了我收到错误的 Course.cpp 部分。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T08:52:32.820

您不能在另一个类中初始化一个类的成员变量。如果要在构造函数中初始化 Course 的成员变量，则必须在 Course 中添加构造函数。如果您愿意，可以使该构造函数受到保护。

另一种选择（可能更好）是改变你的设计，使课程成为一个界面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T08:54:46.423

您无法在子类构造函数中初始化父类的字段。原因是构造顺序包括基类的构造，然后才能真正解决其内部字段。而基地的建设需要建设其内部领域。也就是说，为了实现你所需要的，你应该在你的基类中创建一个构造函数，它接受你的所有参数（名称、学期等）并从你的子类构造函数中调用这个构造函数：

```
Course::Course(string name, 
               int semester,
               double minGrade):
               _dptr("CS"), 
               _name(name),
               _semester(semester),
               _minGrade(minGrade){}

ElectiveCourse::ElectiveCourse(string name,
                               int semester,
                               double minGrade):
                               Course(name, semester, minGrade){} 
```

# jquery - 英特尔网站中的下拉菜单

> ID：13438669
> 
> 赞同：0
> 
> 时间：2012-11-18T08:39:54.533
> 
> 标签：jquery, html, css

我做了一个大型下拉菜单，现在我想要它在 intel.com 中的样式，我的意思是链接下方的箭头，如何实现，我的代码如下。

```
<html>

    <head>
        <style>
    #header {
        border: 10px;
        border-color: #000000;

    }
   div.inline{float:left; width: 18%;}
   .cls{clear:both;}
  content_div div{ margin-right:10%; height:150px; border-color: #008AD2;}
   </style>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="js/jquery-1.8.2.js"></script>
        <script>

            $(document).ready(function(){
                $('#sub_menu').hide();
                $('#menu').hover(function(){
                     $('#sub_menu').show();
                },function(){
                    $('#sub_menu').hide();
                });

                $('#sub_menu').hover(function(){
                     $('#sub_menu').show();
                },function(){
                    $('#sub_menu').hide();
                });
              $('#content_div div').hide();
              $('#content_div div:first').show();

               $('.inline').hover(function(){
                   var id=$(this).attr("id");
                  // alert($(this).attr("id"));
                     $('#content_div div').hide();
                     if(id=="1")
                         {
                             $('#one').show();
                         }
                         else if(id=="2")
                             {
                                 $('#two').show();
                             }
                              else if(id=="3")
                             {
                                 $('#three').show();
                             }
                          else if(id=="4")
                             {
                                 $('#four').show();
                             }
                              else if(id=="5")
                             {
                                 $('#five').show();
                             }
                },function(){
                 //   $('#content_div div').hide();
             // $('#content_div div:first').show();
                });
 });
        </script>
</head>
    <body>
        <div id="header" style="background-color:#008AD2; border-color: #000000">
            <br/><br/>
            <div id="menu" style="background-color:#ffffff;width:20%;margin-left:10px"> keep a image for menu drop down </div>
            <div style="background-color:#ffffff;float:right; margin-right:20px;"> sign img</div>
        </div>

        <div id="sub_menu" class="sub_menu" style="margin-right:10%;margin-right: 10px;border:2px solid #000000;">
            <div>
            <div id="1" class="inline">menu list here1 </div>
            <div id="2" class="inline">menu list here 2</div>
            <div id="3" class="inline">menu list here 3</div>
            <div id="4" class="inline">menu list here 4</div>
            <div id="5" class="inline">menu list here 5</div>
            <br class="cls"/>
            </div>
            <div id="content_div">
            <div id="one" class="content" style="height:100px; background-color: #000000"> below list1
            </div>  
             <div id="two"class="content" style="height:150px; background-color: #0000ff"> below list2
            </div>  
             <div id="three" class="content" style="height:180px; background-color: #0ff000"> below list3
            </div>  
             <div id="four" class="content" style="height:200px; background-color: #00ff00"> below list4
            </div>  
             <div id="five" class="content" style="height:100px; background-color: #ff0000"> below list5
            </div>  
            </div>

        </div>
    </body>
</html> 
```

所以我需要的只是造型功能已经实现。

谢谢

# ruby-on-rails - 为什么 Rails 在每个视图中都包含所有视图特定的资产？

> ID：13438671
> 
> 赞同：0
> 
> 时间：2012-11-18T08:39:57.807
> 
> 标签：ruby-on-rails, model-view-controller, asset-pipeline

> **可能重复：**
> [Rails 3.1 资产管道：如何加载特定于控制器的脚本？](https://stackoverflow.com/questions/6571753/rails-3-1-asset-pipeline-how-to-load-controller-specific-scripts)

在创建新控制器和关联视图后，Rails 会生成一些特定于视图的空资源。执行以下命令：

```
rails generate controller home index 
```

这将生成`home.css.scss`和`home.js.coffee`。作为 Rails 的新手，我最初的想法是这些将被自动配置为仅在各自的视图中呈现。事实证明，情况并非如此。相反，默认设置是在*所有*视图中呈现*所有脚本。*这是预期的吗？使这些资产特定于视图的最佳方法是什么？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:58:03.243

基本设置是（在生产中）提供单个 js 文件（和单个 CSS 文件）。从缓存的角度来看，这通常更有效，但可能会导致首页加载速度稍慢。

当这太多时，您可以创建其他清单文件（application.js 是默认文件）并单独加载它们。例如，我使用的其中一个应用程序有一个单独的 admin.js/css，因为它与面向消费者的部分几乎没有重叠。理论上，您可以将每个 js/CSS 文件视为清单文件，尽管您需要在每个页面上调用 javascript_include_tag。

如果您的问题的根本原因是您只想在某些页面上附加行为，那么要么使您的选择器/js 足够具体，以便它们可以容忍在所有页面上加载，或者（我通常这样做）添加一个控制器或身体上的动作特定类并使用它。*

# windows - 激活后visual studio 2012出现奇怪的线条

> ID：13438672
> 
> 赞同：0
> 
> 时间：2012-11-18T08:40:19.210
> 
> 标签：windows, visual-studio, visual-studio-2012

几天前我安装了VS 2012。激活后，UI 中出现了一些奇怪的线条，出现在菜单和代码编辑器区域。我不知道如何摆脱它们。

[http://mojoimage.com/free-image-hosting-11/4739vs2012.png](http://mojoimage.com/free-image-hosting-11/4739vs2012.png)

修复VS时的另一个例子：[图片](http://mojoimage.com/free-image-hosting-view-11.php?id=5943vs2012-updated.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T08:56:26.057

VS2010 和 2012 的 UI 使用 WPF - 这个问题很可能与您的显卡或驱动程序有关。请确保您运行的是最新的图形驱动程序版本。如果问题仍然存在，那么我建议您尝试运行其他 WPF 应用程序并查看它们是否可以正常显示。

# c# - 如何从列表中获取不同的数据？

> ID：13438673
> 
> 赞同：3
> 
> 时间：2012-11-18T08:40:31.463
> 
> 标签：c#, asp.net, linq, list, distinct

我想从人员列表中获得**不同的列表。**

```
List<Person> plst = cl.PersonList; 
```

如何通过`LINQ`. 我想将结果存储在`List<Person>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T08:43:57.603

`Distinct()`会给你不同的价值 - 但除非你已经覆盖`Equals`/`GetHashCode()`你只会得到不同的*引用*。例如，如果您希望两个`Person`对象在名称相同的情况下相等，则需要覆盖`Equals`/`GetHashCode`来表明这一点。（理想情况下，实现`IEquatable<Person>`以及只是覆盖`Equals(object)`。）

然后，您需要调用`ToList()`以将结果返回为`List<Person>`：

```
var distinct = plst.Distinct().ToList(); 
```

如果您想通过某些特定属性获得不同的人，但这不是“自然”平等的合适候选人，您需要`GroupBy`像这样使用：

```
var people = plst.GroupBy(p => p.Name)
                 .Select(g => g.First())
                 .ToList(); 
```

或使用[MoreLINQ](http://morelinq.googlecode.com)`DistinctBy`中的方法：

```
var people = plst.DistinctBy(p => p.Name).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:42:45.497

您可以使用[Distinct](http://msdn.microsoft.com/en-us/library/bb348436.aspx)方法，您需要实现 IEquatable 并覆盖等于和哈希码。

```
public class Person : IEquatable<Person>
{
    public string Name { get; set; }
    public int Code { get; set; }

    public bool Equals(Person other)
    {

        //Check whether the compared object is null. 
        if (Object.ReferenceEquals(other, null)) return false;

        //Check whether the compared object references the same data. 
        if (Object.ReferenceEquals(this, other)) return true;

        //Check whether the person' properties are equal. 
        return Code.Equals(other.Code) && Name.Equals(other.Name);
    }

    // If Equals() returns true for a pair of objects  
    // then GetHashCode() must return the same value for these objects. 

    public override int GetHashCode()
    {

        //Get hash code for the Name field if it is not null. 
        int hashPersonName = Name == null ? 0 : Name.GetHashCode();

        //Get hash code for the Code field. 
        int hashPersonCode = Code.GetHashCode();

        //Calculate the hash code for the person. 
        return hashPersonName ^ hashPersonCode;
    }
}
var distinctPersons = plst.Distinct().ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T08:46:30.243

使用[Distinct](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)扩展方法将返回一个 IEnumerable，然后您可以执行以下`ToList()`操作：

```
List<Person> plst = cl.PersonList.Distinct().ToList(); 
```

# android - Android - InMobi 横幅 - 在左边和小？

> ID：13438682
> 
> 赞同：0
> 
> 时间：2012-11-18T08:42:25.840
> 
> 标签：android, admob, center, banner, inmobi

我有一个用于广告的线性布局。此代码适用于 Ad Mob。Ad Mob 横幅居中。Galaxy Nexus 和三星 Galaxy y 二重奏看起来不错。但它不适用于 InMobi 广告。在 Galaxy Nexus 上，横幅位于左侧，而在三星 Galaxy Duos 上，横幅位于左侧，并且略小一些。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/layoutAdView"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true" >
    </LinearLayout>

</RelativeLayout> 
```

我最大的问题是，横幅在左边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:24:28.867

我解决了左问题。将线性布局更改为相对布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:06:21.880

我面临着同样的问题。

您可以在 xml 中将 adView 定义为，而不是拥有父布局并将您的 adView 添加到其中

`<com.inmobi.androidsdk.IMAdView android:id="@+id/imAdview" android:layout_width="320dp" android:layout_height="50dp" android:layout_alignParentBottom="true" android:layout_centerHorizontal="true" adSize="15" appId="*******************************"/>`

获取它的一个实例并加载广告。这应该可以解决问题。

# android - 希伯来字母是空的

> ID：13438685
> 
> 赞同：1
> 
> 时间：2012-11-18T08:42:53.873
> 
> 标签：android, unicode, utf-8, textview, hebrew

我正在构建一个需要支持希伯来字母 (שלום) 的应用程序。我正在通过 GCM（谷歌云消息）发送消息。每当我`OnMessage`被称为我收到的字符串（希伯来语）时都是空的。

有什么简单的解决方法吗？提前致谢！

```
protected void onMessage(Context context, Intent intent) {
  String message = intent.getStringExtra(GCM_COMMAND);
  String action = intent.getAction();
  if ("com.google.android.c2dm.intent.RECEIVE".equals(action)) {
    message = intent.getStringExtra(GCM_COMMAND);
    String s = message.toString();
    ItemBean ib =parseJson(s,context);
  }
  private ItemBean parseJson(String text,Context con) {
    ItemBean item = null;
    if (text != null) {
      JSONObject temp;
      try {
        temp = new JSONObject(text);
        String itemMessage = temp.get(GCM_MESSAGE).toString();
        //This String is Empty!
        String itemDate = temp.get(GCM_DATE).toString();
        long currentTime = System.currentTimeMillis();
        item = new ItemBean(currentTime,itemMessage,itemDate);
        sendNotification(con,itemMessage,itemDate);
      }
    }
    return item;
  } 
```

来自 NetBeans 的服务器代码

```
JSONObject json = new JSONObject();
System.out.println("******גגגגגגשלום*********");
json.put(GCM_MESSAGE, ib.getmMessage());
//This is hebrew no problem!
json.put(GCM_DATE, ib.getmDate());
Message.Builder builder = new Message.Builder();
Message message = builder.build();
MulticastResult result = sender.send(message, listOfRegisteredDevices, 5);
int success = result.getSuccess(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:22:23.947

Can you try :

```
 String itemMessage = temp.getString(GCM_MESSAGE); 
```

and also

```
 json.put(GCM_MESSAGE, JSonObject.quote( ib.getmMessage() ) ); 
```

# html - og：图片取自 tumblr 页面内容

> ID：13438694
> 
> 赞同：2
> 
> 时间：2012-11-18T08:44:56.740
> 
> 标签：html, metadata, facebook-opengraph, tumblr

我正在开发一个用于编程笑话的[tumblr 网站。](http://thejoysofcode.tumblr.com/)

在这个网站上，我使用以下 Facebook OpenGraph 元数据来生成被赞的帖子的缩略图：

```
<meta property="og:image" content="{PortraitURL-128}"/> 
```

这指定大小为 128x128 的 tumblr 页面图标。我想要的是通过在每个帖子中选择图像来解析页面并动态生成图标。有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:47:52.633

如果你在永久链接页面上，你可以这样做：

```
{block:PermalinkPage}{block:Posts}
    {block:Photo}
    <meta property="og:image" content="{PhotoURL-500}">
    {/block:Photo}
{/block:Posts}{/block:PermalinkPage} 
```

# c++ - Dijkstra 的算法 openmp 的奇怪行为

> ID：13438704
> 
> 赞同：0
> 
> 时间：2012-11-18T08:46:07.677
> 
> 标签：c++, parallel-processing, openmp, dijkstra

我正在尝试运行我在此处下载的 Dijkstra 算法的 openmp 实现 heather.cs.ucdavis.edu/~matloff/OpenMP/Dijkstra.c

例如，如果我从 5 到 6 再添加一个顶点，以便从 0 开始的路径经过两个顶点，我的程序无法给我正确的结果，说 0 和 6 之间的距离是无限的 :^( 可以是原因？

```
#define LARGEINT 2<<30-1  // "infinity"
#define NV 6

// global variables, all shared by all threads by default

int ohd[NV][NV],  // 1-hop distances between vertices
mind[NV],  // min distances found so far
notdone[NV], // vertices not checked yet
nth,  // number of threads
chunk,  // number of vertices handled by each thread
md,  // current min over all threads
mv;  // vertex which achieves that min

void init(int ac, char **av)
{  int i,j;
for (i = 0; i < NV; i++)  
  for (j = 0; j < NV; j++)  {
     if (j == i) ohd[i][i] = 0;
     else ohd[i][j] = LARGEINT;
  }
ohd[0][1] = ohd[1][0] = 40;
ohd[0][2] = ohd[2][0] = 15;
ohd[1][2] = ohd[2][1] = 20;
ohd[1][3] = ohd[3][1] = 10;
ohd[1][4] = ohd[4][1] = 25;
ohd[2][3] = ohd[3][2] = 100;
ohd[1][5] = ohd[5][1] = 6;
ohd[4][5] = ohd[5][4] = 8;
for (i = 1; i < NV; i++)  {
  notdone[i] = 1;
  mind[i] = ohd[0][i];
}
}

// finds closest to 0 among notdone, among s through e
void findmymin(int s, int e, int *d, int *v)
{  int i;
  *d = LARGEINT; 
  for (i = s; i <= e; i++)
     if (notdone[i] && mind[i] < *d)  {
        *d = ohd[0][i];
        *v = i;
     }
}

// for each i in [s,e], ask whether a shorter path to i exists, through
// mv
void updateohd(int s, int e)
{  int i;
   for (i = s; i <= e; i++)
      if (mind[mv] + ohd[mv][i] < mind[i])  
     mind[i] = mind[mv] + ohd[mv][i];
}

void dowork()
{  
   #pragma omp parallel  // Note 1  
   {  int startv,endv,  // start, end vertices for this thread
      step,  // whole procedure goes NV steps
      mymd,  // min value found by this thread
      mymv,  // vertex which attains that value
      me = omp_get_thread_num();  // my thread number
      #pragma omp single   // Note 2
      {  nth = omp_get_num_threads();  chunk = NV/nth;  
     printf("there are %d threads\n",nth);  }
      // Note 3
      startv = me * chunk; 
      endv = startv + chunk - 1;
      for (step = 0; step < NV; step++)  {
     // find closest vertex to 0 among notdone; each thread finds
     // closest in its group, then we find overall closest
     #pragma omp single 
     {  md = LARGEINT; mv = 0;  }
     findmymin(startv,endv,&mymd,&mymv);
     // update overall min if mine is smaller
     #pragma omp critical  // Note 4
     {  if (mymd < md)  
          {  md = mymd; mv = mymv;  }
     }
     // mark new vertex as done 
     #pragma omp single 
     {  notdone[mv] = 0;  }
     // now update my section of ohd
     updateohd(startv,endv);
     #pragma omp barrier 
      }
   }
}

int main(int argc, char **argv)
{  int i;
   init(argc,argv);
   dowork();  
   // back to single thread now
   printf("minimum distances:\n");
   for (i = 1; i < NV; i++)
      printf("%d\n",mind[i]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T16:01:25.413

这里有两个问题：

如果线程数不均分值个数，那么这个分工

```
 startv = me * chunk;
  endv = startv + chunk - 1; 
```

将保留最后一个`(NV - nth*(NV/nth))`元素未完成，这意味着距离保持在`LARGEINT`. 这可以通过多种方式解决；目前最简单的方法是将所有剩余的工作交给最后一个线程

```
 if (me == (nth-1)) endv = NV-1; 
```

（这会导致更多的负载不平衡，但这是让代码正常工作的合理开始。）

另一个问题是在设置之前已经排除了障碍`notdone[]`

```
 #pragma omp barrier
 #pragma omp single 
 {  notdone[mv] = 0;  } 
```

这确保了`notdone`更新，并且`updateohd()`只有在每个人都完成了`findmymin()`更新`md`和更新后才开始`mv`。

请注意，很容易在您开始使用的原始代码中引入错误；使用的全局变量很难推理。John Burkardt 在他的网站上提供了一个[更好](http://people.sc.fsu.edu/~jburkardt/c_src/dijkstra_openmp/dijkstra_openmp.c)的相同算法版本，用于在他的网站上进行教学，几乎得到了过多的评论并且更容易追踪。

# java - 回答“否”时，do-while 循环不会终止

> ID：13438715
> 
> 赞同：2
> 
> 时间：2012-11-18T08:48:38.853
> 
> 标签：java, arrays, object, format, do-while

```
package homework4;
import java.util.Scanner;
public class Prog4 {
    static Scanner scanner = new Scanner(System.in);
    public static void main(String[] args) {    
            CreditCardNumber[] cred1;
            CreditCardNumber cred2 = getInput();
            Display("The complete number from your input:", cred2);
            cred1 = getInputArray();
            DisplayArray(cred1);
            TryAnother(cred1);
    }

    public static CreditCardNumber getInput() {
        String ID;
        String accNum;
        CreditCardNumber tempCred;      
        System.out.printf("Please enter issuer ID:");
        ID = scanner.next();
        System.out.printf("Please enter account number:");
        accNum = scanner.next();
        tempCred = new CreditCardNumber(ID, accNum);
        return tempCred;
    }

    public static void Display(String ch, CreditCardNumber cred2) {
    System.out.println(ch);
    System.out.println(cred2.toString().replaceAll(".{4}", "$0   "));       
}

public static CreditCardNumber[] getInputArray() {
    CreditCardNumber[] tempArray;
    String tempID;
    int size;       
    System.out.printf("Please enter size of the aray:");
    size = scanner.nextInt();
    if(size < 1) {
        size = 1;
    }
    tempArray = new CreditCardNumber[size];
    System.out.printf("Please enter issuer ID:");
    tempID = scanner.next();
    for(int i = 0; i < tempArray.length; i++) {
        tempArray[i] = new CreditCardNumber();
        tempArray[i].CreateCred(tempID);
    }
    return tempArray;
}

public static void DisplayArray(CreditCardNumber[] cred1) {
    for(int i = 0; i< cred1.length; i++) {
        Display("Credit Card # " + i+":" + '\n', cred1[i]);
    }
    System.out.println();
}

public static boolean TryAnother(CreditCardNumber[] cred1) {
    String s;
    System.out.printf("Get more credit card numbers? (n for no):");
    s = scanner.next();
    if(s.charAt(0) != 'N' || s.charAt(0) != 'n') {
        do {
                TryAnother(cred1);
                cred1 = getInputArray();
                DisplayArray(cred1);                
            } while(s.charAt(0) != 'N' || s.charAt(0) != 'n');      
    }
    return false;   
}
} 
```

嗨，我`do-while`在方法中的循环中有问题，`TryAnother`当我输入 no 时，由于某种原因，我试图让代码`do while`重复告诉用户输入“是”或“否”。

就像是：

```
Please enter issuer ID:321321 
Please enter account number:654654654 
The complete number from your input: 
3213 2165 4654 6549
Please enter size of the aray:7 
Please enter issuer ID:789789 
Credit Card # 0:
7897 8985 6852 9257
Credit Card # 1:
7897 8917 0678 9958
Credit Card # 2:
7897 8900 5781 0934
Credit Card # 3:
7897 8949 2244 6098
Credit Card # 4:
7897 8941 3828 4895
Credit Card # 5:
7897 8965 9233 5006
Credit Card # 6:
7897 8981 8442 5880
Get more credit card numbers? (n for no):n
Get more credit card numbers? (n for no):n
Get more credit card numbers? (n for no):no
Get more credit card numbers? (n for no): 
```

正如你在我输入 no 时看到的那样。它不断重复同一句话。我想要的是它从输入数组大小语句中重复，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T08:50:10.800

改变这个：

```
 }while(s.charAt(0) != 'N' || s.charAt(0) != 'n'); 
```

到：

```
 }while(s.charAt(0) != 'N' && s.charAt(0) != 'n'); 
```

# java - 不能在 MouseListener 构造函数之外调用变量

> ID：13438716
> 
> 赞同：1
> 
> 时间：2012-11-18T08:48:39.837
> 
> 标签：java, variables, constructor, mouseevent, mouselistener

我正在尝试使用 Swing 创建一个 Java 程序。我要完成的一件事是使用 MouseListener 获取 JList 中单击项目的索引并检索与数组索引关联的变量。我的问题是，当我尝试在 MouseListener 之外调用变量时，它不会被识别。我的代码是：

```
public class UserListPanel extends JPanel {

LibraryController ctrl = new LibraryController();
JScrollPane scrollpane;
public int userid;
public String userName;

public UserListPanel(final Borrower[] borrowersArray) {

    String userArray [] = new String [borrowersArray.length];
    for (int i = 0; i < userArray.length; i++) {
        userArray[i] = borrowersArray[i].getName();
    }

    JList userList = new JList(userArray);
    scrollpane = new JScrollPane(userList);
    this.add(scrollpane);

    // Adds a mouse click listener to assign values from the JList to a variable on click
    userList.addMouseListener(new MouseAdapter() {
        public void mouseClicked(MouseEvent evt) {
            JList userList = (JList)evt.getSource();
            if (evt.getClickCount() >= 0) {
                int index = userList.locationToIndex(evt.getPoint());
                ListModel dlm = userList.getModel();
                Object item = dlm.getElementAt(index);
                userList.ensureIndexIsVisible(index);
                userid = borrowersArray[index].getbID();
                userName = borrowersArray[index].getName();
                JOptionPane.showMessageDialog(null, userName);
            }
        }
    });
}

userid = borrowersArray[index].getbID();

} 
```

例如，在 MouseListener 构造函数中，我能够正确获取变量并将其存储在 userid 变量中，并且我的 JOptionPane 通过返回一个数字来确认这一点。但是，在构造函数之外，整数“索引”无法识别，因此如果我调用 userid，它将返回 null。我将如何在 MouseListener 之外获得索引副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T08:55:10.617

如果您想要`index`外部`mouseClicked`方法（而不是构造函数），那么您应该在方法外部对其进行初始化并在`mouseClicked`方法内部为其分配一个值`mouseClicked`，然后您将能够`index`在构造函数之外获取它。

您`index`在方法内部声明和初始化，`mouseClicked`以便变量的范围取决于`mouseClicked`方法，因此它在其范围之外不可用，即在`mouseClicked`方法之外。

```
public UserListPanel(final Borrower[] borrowersArray) {
    int index=0;
    String userArray [] = new String [borrowersArray.length];
    for (int i = 0; i < userArray.length; i++) {
        userArray[i] = borrowersArray[i].getName();
    }

      ..... all other stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:02:06.813

该`index`变量在`MouseListener`实现中声明。因此，编译器不理解`index`您尝试访问它的任何变量。

要克服这个问题，请尝试`index`在 Listener 实现之外声明。

前任

```
public class UserListPanel extends JPanel {

  LibraryController ctrl = new LibraryController();
  JScrollPane scrollpane;
  public int userid;
  public String userName;
  public int index ; //declare it as a global (member) variable
...
} 
```

# c++ - 从 System::IntPtr 到 HWND 的 Covnersion

> ID：13438719
> 
> 赞同：0
> 
> 时间：2012-11-18T08:49:01.460
> 
> 标签：c++, handle, hwnd, dwm

我有以下 C++ 代码：

```
HRESULT hr = S_OK;
hr = DwmExtendFrameIntoClientArea(this->Handle, &margins); 
```

但是，当我尝试编译时，出现以下错误：

```
error C2664: 'DwmExtendFrameIntoClientArea' : cannot convert parameter 1 from 'System::IntPtr' to 'HWND' 
```

还有其他方法可以获取`HWND`我的表格吗？

# c# - 运行 Roslyn 脚本时在运行时找不到程序集

> ID：13438721
> 
> 赞同：5
> 
> 时间：2012-11-18T08:49:12.520
> 
> 标签：c#, roslyn

我正在将基于 Roslyn 的脚本引擎嵌入到我的应用程序中，并开始面临一些问题。将引用加载到我的引擎中时，我执行以下操作

```
var engine = new Roslyn.Scripting.CSharp.ScriptEngine();
engine.AddReference("MyAssemblyLocation"); 
```

问题：

1.  如果`MyAssemblyLocation`程序集引用其他程序集，我如何告诉 Roslyn 加载它们而不执行`engine.AddReference("MyAssemblyLocation");`
2.  应该运行脚本的主机应用程序已经加载了一些我想在脚本中使用的程序集，有没有办法让 Roslyn 将自己挂接到内存中已经加载的 dll 中而不加载新实例？
3.  最后，有没有办法告诉 Roslyn 递归加载`MyAssemblyLocation`

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T19:30:05.303

1) 简短回答：您需要在脚本中要使用其类型的所有程序集上添加引用。

详细信息：C# 编译器不会猜测依赖文件的位置。程序集文件没有指定其所有依赖项的完整路径。它只包含它们的名称，这通常不足以让编译器能够找到汇编文件。

更多细节：有两种依赖关系。我将它们称为编译时依赖项 (a) 和运行时依赖项 (b)。

(a) 假设您在程序集 A.dll 中有“public class A : B {}”，在程序集 B.dll 中有“public class B {}”，并且您的脚本正在使用 A，假设您创建了一个新实例：“new一种（）”。在这种情况下，编译器要求您添加对 A.dll 和 B.dll 的引用，因为 A 派生自 B，编译器需要分析您使用的每种类型的继承层次结构。因此 B.dll 是脚本的编译时依赖项 - 编译器需要它才能正确分析您的脚本。

(b) 考虑另一个例子：A.dll 中的“public class A { public object M() { return new B(); } }”和上面相同的 B.dll。现在在编译“new A().M()”时，编译器不需要知道 B，因为对 B 的引用只出现在方法 M 的主体中，编译器不分析导入方法的主体。在这种情况下，只需添加对 A.dll 的引用即可编译脚本。当脚本执行时，它调用方法 M。此时 CLR 加载程序集 B。这有点复杂，所以我将跳过详细信息，但在常见情况下，我们将能够为您找到程序集，所以您不需要t 需要显式添加引用。

2) 我建议使用带有 Assembly 对象的 AddReference 的重载。类似：engine.AddReference(typeof(SomeTypeInAssemblyFoo).Assembly) 加载包含 SomeTypeInAssemblyFoo 类型的程序集 Foo。

3）不是一个简单的。您可以使用 Reflection 或 Roslyn API 枚举所有引用并加载它们中的每一个。

如果解释不清楚或您想了解更多细节，请随时提出更多问题。

# sql - TRIGGER AND COUNT 限制 Count 值

> ID：13438724
> 
> 赞同：2
> 
> 时间：2012-11-18T08:49:18.900
> 
> 标签：sql, oracle, triggers

我想创建一个触发器

*   select staffid where dateread = 本月日期
*   计算一个staffID的数量
*   如果该员工在该月的人数超过 5
*   将发出停止。

这就是我所做的让我感到困惑的事情

我想知道这在逻辑上正确吗？这是我的编译器日志错误

这是我需要的结果：抄表员在任何给定日历月最多只能读取 5 米

我的阅读表有
StaffID
MeterID
DateRead
ReadinID (PK)

这是错误文本：

```
Error(5,7): PL/SQL: SQL Statement ignored Error(5,27): 
PL/SQL:ORA-00923: FROM keyword not found where expected 
C:\Users\ChrisPin\AppData\Roaming\SQL Developer\assgn2 sat4.sql Error(5,7): 
PL/SQL: SQL Statement ignored Error(5,27): 
PL/SQL: ORA-00923: FROM keyword not found where expected 
```

这是触发代码：

```
CREATE OR REPLACE TRIGGER LIMIT_5_REDINGS
      BEFORE UPDATE OR INSERT ON reading
    FOR EACH ROW
    DECLARE
    ReadingCount  INTEGER;      --# of depts for this employee
      max_read   INTEGER := 5; --max number of depts per employee.
      BEGIN
      select Reading COUNT(*) into ReadingCount
      from (select *
            from Reading
            where to_char(DateRead, 'YYYY-MM') = to_char(sysdate, 'YYYY-MM'))  
      WHERE STAFFID = :NEW.STAFFID;

    IF :OLD.STAFFID = :NEW.STAFFID THEN
        RETURN;
     ELSE
       IF ReadingCount >= max_read THEN
         RAISE_APPLICATION_ERROR (-20000,'Employees are limited to a max of two departments.');
    END IF;
    END IF;
    END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:44:33.757

在这一行

```
select Reading COUNT(*) into ReadingCount 
```

应该

```
select COUNT(*) into ReadingCount 
```

# .net - Azure 最快的通信协议

> ID：13438725
> 
> 赞同：1
> 
> 时间：2012-11-18T08:49:32.953
> 
> 标签：.net, azure

我正在开发一种“服务”，用于从 Azure 中的许多应用程序收集信息。简单的想法是，这些应用程序中的每一个都将使用一些“组件”（由我提供）将审计数据发送到“服务”，该“服务”会将其存储在中央数据库中以进行报告等。

假设客户端应用程序也将在 Azure 中，但可以由不同的公司拥有/托管。实际上，与客户端应用程序的每次交互都会将审计发送到“服务”，因此可能会有大量流量。

我是 Azure 的新手，因此会感谢所有提示和建议。

问候， 马辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:15:06.807

像往常一样给猫剥皮的方法有很多。

您通常会公开一个 Web 服务（SOAP 或 REST，具体取决于您需要的功能，即安全性）以供应用程序调用，然后该服务将执行您需要它执行的任何工作（即写入数据库）。

您可能需要考虑使用[服务总线队列](http://www.windowsazure.com/en-us/home/features/messaging/)来解耦从应用程序获取数据并将其写入数据库并可能实现更高的吞吐量（以应用程序到数据库的延迟为代价）

理论上，您可以让应用程序直接与数据库对话，但这通常被认为是一个坏主意，并且稍后的抽象（通过某种服务）将允许您在不影响应用程序的情况下对底层数据库进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:18:58.860

Here you will get good overview of what azure supports

[http://cloudinteropelements.cloudapp.net/Standards-Based-Messaging-in-Windows-Azure.aspx](http://cloudinteropelements.cloudapp.net/Standards-Based-Messaging-in-Windows-Azure.aspx)

# iphone - 正则表达式从 /* by AUTHOR */ 中提取作者

> ID：13438733
> 
> 赞同：0
> 
> 时间：2012-11-18T08:50:26.023
> 
> 标签：iphone, objective-c, ios, regex

我正在根据我创建的[编程笑话博客开发一个应用程序。](http://thejoysofcode.tumblr.com/)

在每篇文章中都有一个包含图像和 NSString 的 html 正文，格式如下：

```
/* by AUTHOR (SOMETIMES WITH SPACES etc) */ 
```

我想使用正则表达式来提取这个作者姓名，减去其他文本。谁能举例说明如何做到这一点？

编辑：我需要 ???? 线：

```
NSString *result = [htmlString stringByReplacingOccurrencesOfString: ???? 
                                                      withString:@"$1, " 
                                                         options:NSRegularExpressionSearch
                                                           range:NSMakeRange(0, [htmlString length])]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:15:57.380

如果您的文本始终采用相同的格式，即 /* TEXT */ 您不需要正则表达式，但您可以使用具有范围的子字符串来执行此操作。否则，如果您想要正则表达式，[这里是解决方案的链接](https://stackoverflow.com/a/8947861/312312)

[你也可以看到这个页面](http://ostermiller.org/findcomment.html)

# iphone - glRenderbufferStorage GL_INVALID_ENUM

> ID：13438737
> 
> 赞同：1
> 
> 时间：2012-11-18T08:51:01.530
> 
> 标签：iphone, ios, opengl-es

遵循[OpenGL ES Programming Guide IOS](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html)我`glRenderbufferStorage`在设置我的 FBO 时使用的。在指南中它说使用：

```
glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA8, width, height); 
```

在我的代码中（因为 GL_RGBA8 未定义），我使用

```
glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA8_OES, width, height); 
```

它抛出一个 GL_INVALID_ENUM 异常。这是设置 FBO 的正确方法吗？这是一个 OpenGL ES 2.0 项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:50:24.780

该文档有点奇怪，我没有设法按照指南让它工作，而且我也没有那个 GL_RGBA8 枚举。真的很生气。

无论如何，对于 colorRenderBuffer，它在 Ray Wenderlich 的网站上显示的方式（如果您在“屏幕上的帧缓冲区”中向下滚动一点，也可以在该 Apple 文档中）网站是这样的：

```
glGenRenderbuffers(1, &colorRenderBuffer);
glBindRenderbuffer(GL_RENDERBUFFER, colorRenderBuffer);
[context renderbufferStorage:GL_RENDERBUFFER fromDrawable:eglLayer]; 
```

苹果文档似乎已经过时了。

# multithreading - perl 线程异常退出

> ID：13438740
> 
> 赞同：3
> 
> 时间：2012-11-18T08:51:34.023
> 
> 标签：multithreading, perl, exit

我正在使用 perl 的[线程](https://metacpan.org/module/threads)模块和一个我正在研究的简单爬虫，这样我就可以并行下载页面。有时，我会收到如下错误消息：

```
Thread 7 terminated abnormally: read timeout at /usr/lib64/perl5/threads.pm line 101.
Thread 15 terminated abnormally: Can't connect to burgundywinecompany.com:80 (connect: timeout) at /usr/lib64/perl5/threads.pm line 101.
Thread 19 terminated abnormally: write failed: Connection reset by peer at /usr/lib64/perl5/threads.pm line 101. 
```

当我在没有线程的情况下线性运行脚本时，我不会遇到这些错误。这些错误几乎看起来像是来自[LWP::UserAgent](https://metacpan.org/module/LWP::UserAgent)模块，但它们似乎不应该导致线程异常退出。在使用 perl 的线程时，我必须采取一些额外的预防措施吗？谢谢！

**更新：**

我已经找到了这些异常终止的来源，而且似乎每当我使用`LWP::UserAgent`. 如果我删除下载网页的方法调用，那么错误就会停止。

**示例脚本**

下面的脚本会导致我所说的一个错误。最后一个 URL 将超时，导致应该只是 HTTP::Repsonse 对象的一部分，而不是导致线程异常终止：

```
#!/usr/bin/perl
use threads;
use Thread::Queue;
use LWP::UserAgent;

my $THREADS=10; # Number of threads
                             #(if you care about them)
my $workq = Thread::Queue->new(); # Work to do

my @stufftodo = qw(http://www.collectorsarmoury.com/ http://burgundywinecompany.com/ http://beetreeminiatures.com/);

$workq->enqueue(@stufftodo); # Queue up some work to do
$workq->enqueue("EXIT") for(1..$THREADS); # And tell them when

threads->create("Handle_Work") for(1..$THREADS); # Spawn our workers

$_->join for threads->list;

sub Handle_Work {
    while(my $todo=$workq->dequeue()) {
        last if $todo eq 'EXIT'; # All done
        print "$todo\n";
        my $ua = LWP::UserAgent->new;
        my $RESP = $ua->get($todo);
    }
    threads->exit(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T13:03:59.667

我玩了一下你的消息来源并想出了这个：

```
#!/usr/bin/perl

use 5.012; use warnings;
use threads; use Thread::Queue; use LWP::UserAgent;

use constant THREADS => 10;

my $queue = Thread::Queue->new();
my @URLs =  qw( http://www.collectorsarmoury.com/
                http://burgundywinecompany.com/
                http://beetreeminiatures.com/       );
my @threads;

for (1..THREADS) {
    push @threads, threads->create(sub {
        my $ua = LWP::UserAgent->new;
        $ua->timeout(5); # short timeout for easy testing.
        while(my $task = $queue->dequeue) {
            my $response = eval{ $ua->get($task)->status_line };
            say "$task --> $response";
        }
    });
}

$queue->enqueue(@URLs);
$queue->enqueue(undef) for 1..THREADS;
# ... here work is done
$_->join foreach @threads; 
```

输出：

```
http://www.collectorsarmoury.com/ --> 200 OK
http://burgundywinecompany.com/ --> 200 OK
http://beetreeminiatures.com/ --> 500 Can't connect to beetreeminiatures.com:80 (timeout) 
```

输出没有`eval`：

```
http://www.collectorsarmoury.com/ --> 200 OK
http://burgundywinecompany.com/ --> 200 OK
http://beetreeminiatures.com/ --> 500 Can't connect to beetreeminiatures.com:80 (timeout)
Thread 2 terminated abnormally: Can't connect to beetreeminiatures.com:80 (timeout)

LWP::Protocol::http::Socket: connect: timeout at /usr/share/perl5/LWP/Protocol/http.pm line 51. 
```

我做的不同的事情是：

*不重要：*

*   我没有`exit`我的线程；我只是在最后放弃（隐式`return`）
*   我为每个线程分配一个用户代理，而不是每个请求一个。

*更好的风格：*

*   我`undef`用来表示线程终止：一旦一个*假*值出队，循环条件无论如何都是假的并且线程终止。如果你想传递一个特殊的字符串来终止信号，你应该循环使用`while (1)`, 并在循环体中出列。

*重要的：*

*   为了消除那些讨厌`eval`的错误，我将`get`. 如果有要求`die`，我的线程不会效仿，而是保持冷静并继续进行。

因为`get`ting URL 实际上可能会死。如果我们查看[LWP::Protocol::http 源代码的](https://github.com/gisle/libwww-perl/blob/master/lib/LWP/Protocol/http.pm)第 51 行，我们会看到如果无法为连接创建套接字，则会引发致命错误。当无法解析主机名时，可能会发生这种情况。

在我的代码中，我决定忽略错误（因为我已经打印了状态行）。根据问题，您可能希望再次重试该 URL，或提供更多信息警告。有关错误处理的一个很好的示例，请参阅链接源。

不幸的是，我无法重现您的确切错误（警告中给出的行指向`threads->exit()`类方法）。但是在大多数情况下，使用 eval 应该可以防止异常终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T13:05:00.163

看起来该`get`方法正在设置`$@`，即使它没有`die`。您可以通过在以下内容之后放置一些打印来看到它并没有死`get`：

```
my $RESP = $ua->get($todo);
if($RESP->is_success) {
    print "$todo success\n";
} else {
    print "$todo failed: ".$RESP->status_line."\n";
} 
```

在线程退出之前仍然发生失败的请求后，您可以看到打印：

```
http://www.collectorsarmoury.com/ success
http://burgundywinecompany.com/ success
http://beetreeminiatures.com/ failed: 500 Can't connect to beetreeminiatures.com:80 (Connection timed out)
Thread 3 terminated abnormally: Can't connect to beetreeminiatures.com:80 (Connection timed out) 
```

然后线程退出似乎`$@`被设置为异常。如果您`$@`在退出线程之前（或`local $@`在`Handle_Work`中或`eval`周围`get`）重置，则线程干净地退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T08:59:08.077

好吧 perl 确实有一个机制来中止和执行 fatal()。但我不认为这是你的情况。

如果您查看threads.pl 第101 行，这可能是线程退出方法，并且使用非零退出状态可能被视为异常情况。

我认为这些东西是无害的，使用“异常终止”只是表明操作不是 100% 成功的。这意味着您应该为那些操作未完成的线程计划和实施恢复方案。

对您而言，措辞的选择令人担忧并引起关注，但如果您将消息更改为：“线程 123 未完成，表明成功”，它可能看起来不那么令人担忧，并且更符合正在发生的情况。

最好让线程主方法返回（如果需要，在途中释放数据）。这不是使用threads::exit，当然除非这是在main方法中的最后一件事。

关于分叉，您是否声称它在分叉时永远不会失败，并且分叉进程是否指示非零“退出状态”的失败。另外，您确定在使用线程时没有使网站、代理、网络等超载。

# scala - 传递函数参数的协方差

> ID：13438745
> 
> 赞同：3
> 
> 时间：2012-11-18T08:52:48.997
> 
> 标签：scala, generics, functional-programming

我曾尝试在 Scala 中实现 StateMachine，但是我遇到了类型系统的问题，这让我很困惑。在下面的代码中，我需要让**守卫**函数接受一个预期的 StateMachine 子类的参数。不幸的是，由于**FunctionN**参数的类型参数是逆变的，我不知道如何解决这个问题。

```

类转换[S，+M <：StateMachine[S]]（开始：S，结束：S，var guard：Option[M => Boolean]）{
// 上面的编译器错误：^^ 协变类型 M 出现在方法保护的 type => Option[M => Boolean] 的逆变位置 ^^
  val startState = 开始
  val endState = 结束

  def willFollow(stateMachine: M, withGuard: Boolean) =
  // 上面的编译器错误：^^ 协变类型 M 出现在值 stateMachine 的类型 M 的逆变位置 ^^
    if (!withGuard && guard == None) true;
    否则（withGuard && guard.get(stateMachine)）
}

类 EpsilonTransition[S, M <: StateMachine[S]](start: S,end :S) extends Transition[S, M](start, end, None)

类StateMachine[S]（转换：Set[Transition[S，StateMachine[S]]]，initialStates：Set[S]）{
    私人 val stateDrains = transitions.groupBy(_.startState);
    私有 var activeStates = initialStates

    默认行为（） = {
      var entryStates = Set[S]()
      var exitStates = Set[S]()

      stateDrains.foreach {排水 =>  
        val (exitState, transitionsOut) = drain

        // 跟随非 epsilon 转换
        transitionsOut.filter(_.willFollow(this, true)).foreach {transition =>
          exitStates += transition.startState
          entryStates += transition.endState
        }
      }

      // 对于所有退出状态，我们将状态映射到一组转换，并且所有集合都“扁平化”为一个大的转换集
      // 然后它将被那些没有保护的过滤器（epsilon 转换）。生成的过滤转换列表
      // 所有都包含我们将映射到的 endStates。所有这些结束状态都附加到当前的入口状态集。
      entryStates = entryStates ++ (exitStates.flatMap(stateDrains(_)).filter(_.willFollow(this, false)).map(_.endState))

      // 只排除我们没有重新进入的退出状态
      // 然后包括新进入的状态
      activeStates = ((activeStates -- (exitStates -- entryStates)) ++ entryStates)
    }

    覆盖 def toString = activeStates.toString
}

对象 HvacState 扩展枚举 {
     类型 HvacState = 值
     val 空调、加热器、风扇 = 值
}
导入 HvacState._

对象 HvacTransitions {
    val autoFan = new EpsilonTransition[HvacState, HVac](空调, 风扇)
    val turnOffAc = new Transition[HvacState, HVac](空调, 风扇, Some(_.temperature 75))
    val HeaterToFan = new Transition[HvacState,Hvac](加热器、风扇、一些(_.temperature > 50))
}
导入 HvacTransitions._

HVac 类扩展 StateMachine[HvacState](Set(autoFan, turnOffAc, AcToHeater, HeaterToAc, HeaterToFan), Set(heater)) {
  变量温度 = 40
}

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T02:00:57.277

您的转换仅适用于某种类型的状态，但也适用于某种类型的状态机，因此两个类型参数`S`和`M`. 例如，最后，您的转换可能取决于温度，这是 StateMachine 的属性，而不仅仅是 State 的属性。

不知何故，状态机应该只有与之兼容的转换。在没有温度的状态机上不应允许需要访问温度的转换。类型系统将强制执行。但是，您的代码对此没有任何规定。

相反，您让 StateMachine 类获得一组 Transition[S，StateMachine[S]]。这行得通，但结果是 StateMachine 只接受“标准”转换，这不需要机器提供任何特殊的东西。您可以定义需要特殊机器（带温度）的转换，但机器无法接受这些特殊转换，即使它们与它兼容。

然后是你的 Hvac 机器，它有温度。您尝试通过它特殊的转换，只能在 Hvac 机器上运行的转换（访问温度）。但是祖先构造函数被编写为仅接受标准转换。编译器拒绝了。这表明如果 Transition 在 M 中是协变的，那就没问题了。这是真的，除了Transition 在M 中不能是协变的。它需要一台机器作为输入。协变转换意味着如果它可以在非常特殊的机器上运行，那么它也必须能够在不太特殊的机器上运行。不是你想要的。

您需要做的是让类 StandardMachine 接受特殊转换，现在它会拒绝，但当然只有与机器兼容的转换（如果您不提供此保证，编译器将拒绝代码）。可能更简单的方法是将类型 M 也放入机器中，以便您可以正确表达约束。

这是一种可能的方法。首先我们给 StateMachine 添加一个类型参数

```
class StateMachine[S, M]( 
```

我们需要在引用 StateMachine 的任何地方添加 M 参数，例如 `class Transition[S, M <: StateMachine[S, M]]`，或`class Hvac extends StateMachine[HvacState, Hvac]`

当然，构造函数参数变成

```
class StateMachine[S,M](transitions: Set[Transition[S, M]]], ... 
```

在这里，我们声明机器可以进行转换。除了我们没有。它仍然没有编译，每次我们通过`this`，机器到一个转换，例如：

```
transitionsOut.filter(_.willFollow(this, true)).foreach {transition =>
                                   ^^
type mismatch;  found   : StateMachine.this.type (with underlying type StateMachine[S,M])  required: M 
```

好吧，我们引入了 M 类型，但我们没有将一些 M 传递给机器，我们正在传递`this`. 这是一个 StateMachine[S, M]，它不一定是 M。我们当然希望 M 是机器的类型，但不一定是这种情况。我们讨厌声明 StateMachine[S, M] 必须是 M。我们使用 self 类型来做到这一点：

```
class StateMachine[S, M](
   transitions: Set[Transition[S, M]], 
   initialStates: Set[S]) { this: M => 
 // body of the class 
```

}

this: M => 声明类的每个实例都必须是泛型参数 M 的实例。我们将 this 强制为 M，因此错误消失了。

然后约束`M <: StateMachine[S, M`] in`Transition`进来了，我们不需要它，我们只需删除它 : `Transition[S, M]`。或者，我们可以对 StateMachine 施加相同的约束。

这充分利用了存在问题的类型系统，但隔离机器状态可能更简单，也就是说，不是拥有 self `type this: M =>`，而是拥有一些`def machineState: M`，并将其传递给守卫而不是`this`. 在这种情况下，`Hvac`将是一个`StateMachine[HvacState, Double]` （或比 Double 更明确的温度封装），

* * *

我的更改摘要：

*   过渡：移除对 M 的约束，移除协方差：

    类转换[S, M](...

*   EpsilonTransition : 移除对 M 的约束

    类 EpsilonTransition[S, M]

*   `StateMachine`：添加类型参数`M`，`M`用作转换的参数，并设置`M`为自我类型：

    class StateMachine[S, M](transitions: Set[Transition[S, M]], initialStates: Set[S]) { this: M =>

*   `turnOffAcc`：您复制的代码中缺少一个运算符，添加`<`

*   `HVac` : added itself as second generic parameter : `class HVac extends StateMachine[HvacState]`. Also, some of the transitions, `AcToHeater` and `HeaterToAc` do not appear in the code you copied, so I just removed them.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T00:17:58.743

你需要做这样的事情（它为我编译）：

```
class Transition[S, M <: StateMachine[S]](start: S, end: S, var guard: Option[M => Boolean]) {
  val startState = start
  val endState = end

  def willFollow[MM <: M](stateMachine: MM, withGuard: Boolean) =
    if (!withGuard && guard == None) true
    else (withGuard && guard.get(stateMachine))
} 
```

基本上，`Option[M => Boolean]`将采用任何采用 M 或更大并变为布尔值的函数。例如，`Any => Boolean`会工作。这是逆变的。但是，您的`willFollow`方法需要采用小于 M 的任何值，因为它适用于至少类型为 M 的函数。这里有一个更好的解释，因为您可能正在寻找一个：[为什么示例不编译，也就是如何编译（co -, contra-, and in-) 方差有效吗？](https://stackoverflow.com/questions/663254/scala-covariance-contravariance-question?rq=1)

# jquery - 如何在 html 中获取数字并用 jquery 编写另一个 html 标记？

> ID：13438746
> 
> 赞同：1
> 
> 时间：2012-11-18T08:52:53.427
> 
> 标签：jquery, html, function

```
<div id="element1" onclick="add();">10</div>
<div id="element2" onclick="add();">56</div>
<div id="element3" onclick="add();">42</div>
<div id="element4" onclick="add();">109</div>
<div id="element5" onclick="add();">45</div>

<div id="values"></div> 
```

当用户单击任何 div 时，将在 html 中获取数字值，例如用户单击 element3 42 获取并写入 html 中的 id 是值。当用户点击任何 div 后，会再次取数，例如 element4 109 取并写入但 42 不会被删除。像这样;

42,109,...

我怎么能用jquery做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T08:56:11.627

首先，您删除`onclick`处理程序。然后你这样做：

```
$("[id^=element]").click(function() {
    $("#values").text($(this).text());
}); 
```

分解它：

1.  `$("[id^=element]")`查找页面上所有具有以“元素”[*开头*](http://api.jquery.com/attribute-starts-with-selector/)`id`的值的元素。[](http://api.jquery.com/attribute-starts-with-selector/)

**   `.click(function() { ... })` 在匹配的元素上[连接一个点击处理程序。](http://api.jquery.com/click/)

    *   `$("#values")``id`用“值”查找元素。

    *   `.text(...)` [设置匹配元素的文本](http://api.jquery.com/text)。

    *   `$(this).text()`将`this`值（在 jQuery`click`处理程序中是您挂钩 click 事件的元素）包装在 jQuery 包装器中，然后[从中获取其文本](http://api.jquery.com/text)。* 

 *`elementX` `id`如果您可以完全从元素中删除值并用类替换它们，则更清洁会更好，例如：

```
<div class="source">10</div>
<div class="source">56</div>
<div class="source">42</div>
<div class="source">109</div>
<div class="source">45</div>

<div id="values"></div> 
```

然后：

```
$(".source").click(function() {
    $("#values").text($(this).text());
}); 
```

或者您可以将它们全部放在一个容器中并使用某种结构选择器。关键是您可以使用任何 CSS3 选择器（然后是一些）找到将事件挂钩的元素。

花一个小时阅读[jQuery API](http://api.jquery.com)非常值得。它实际上只需要一个小时左右，而且非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T08:54:18.447

你可以这样做

```
$('div[id^="element"]').click(function(){ // bind only on div whose if starts with element
  var existing = $('#values').text();
  $('#values').html(existing ? existing + ',' + $(this).text() : $(this).text());
}); 
```

请注意，您应该 `onclick="add();"`从现有的 div 中删除。我本可以建议您创建一个`add`函数，但最佳实践是通过使用 jQuery 绑定函数绑定事件侦听器来将代码与 HTML 分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T08:59:46.017

首先，不要在 jQuery 中使用 onclick。其次，除非您在其他地方使用 id="element1" 部分，否则尽量不要为每个元素使用 id。这个比较推荐：

```
<div class="clickable">10</div>
<div class="clickable">56</div>
<div class="clickable">42</div>
<div class="clickable">109</div>
<div class="clickable">45</div>

<div id="values"></div>

$('.clickable').click(function(){
    $('#values').html($(this).text()):
}); 
```*

# google-app-engine - ndb.StructuredProperty 不保存密钥？

> ID：13438748
> 
> 赞同：2
> 
> 时间：2012-11-18T08:53:42.920
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore, app-engine-ndb

如果我们有通常的博客文章 webapp，许多用户可以发布博客条目，但我们也想从单个用户检索所有条目，我会想象以下数据结构：

```
class Blog_Entries(ndb.Model):
    ...

class Users(ndb.Model):
    ...
    blog_entries = ndb.StructuredProperty(Blog_Entries, repeated=True)
    ... 
```

但是，问题在于，当您将“Blog_Entries”对象复制到 Users.blog_entries 时，密钥会丢失（不是从原始实例复制过来的）。这使得更新两个帖子并保持一致性变得很麻烦。

有没有办法避免这种情况？有没有更好的策略来解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-22T09:29:55.923

~~您可以继承`StructuredProperty`并覆盖它`_serialize()`和`_deserialize()`方法来序列化/反序列化密钥。您可以使用`KeyProperty`来处理密钥的序列化。;-)~~

我刚刚发现`LocalStructuredProperty`有一个选项`keep_keys`。正如选项名称所暗示的那样，它存储嵌套模型的键。

```
class Organization(ndb.Model):
    name = ndb.StringProperty()

class Employee(ndb.Model):
    name = ndb.StringProperty()
    organization = ndb.LocalStructuredProperty(Organization,
                                               keep_keys=True)

linux_foundation = Organization(name='Linux Foundation')
linux_foundation.put()
linus = Employee(name='Linus Torvalds', organization=linux_foundation)
linus_key = linus.put()

ndb.get_context().clear_cache()
linus = linus_key.get()
assert linus.organization.key.get().name == 'Linux Foundation' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:03:43.170

尝试 blog_entries = ndb.KeyProperty(kind="Blog_Entries", repeat=True)

# python - Python - Imap Gmail 响应

> ID：13438750
> 
> 赞同：2
> 
> 时间：2012-11-18T08:53:46.020
> 
> 标签：python, gmail, imap

我正在为 gmail 编写一个简单的 IMAP 客户端。由于它是使用套接字等的分配，我不能使用 python 的 imaplib 库。我在这段代码中遇到了一个问题：

```
 def connect(self, server, username, password, port=993):

    self.socket.connect((server, port))
    response = self.socket.recv(2048)
    if response.startswith('NO' or 'BAD'):
        return False
    print response

    # send username
    self.sendData('a001 login {0} {1}\n'.format(username, password))
    response = self.socket.recv(2048)
    if response.startswith('NO' or 'BAD'):
        return False
    print response 

    self.sendData('a002 CAPABILITY\n')
    response = self.socket.recv(2048)
    if response.startswith('NO' or 'BAD'):
             print response
             return False
    print response 
    return True 
```

一切正常，直到发送第二个命令。我不太确定，我现在处于什么状态。

这是被问到的 sendData：

```
 def sendData(self, command):

    lenght = len(command)
    totalSendBytes = 0

    while (totalSendBytes < lenght):
        bytesSend = self.socket.send(command[totalSendBytes:])

        if bytesSend <= 0:
            return False

        totalSendBytes += bytesSend

    return True 
```

启动程序后，我只得到第一个命令的响应：

> *   OK Gimap 准备好接受来自 IPGOESHERE 47if12049394eef.11 的请求
>     
>     
> *   CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 UIDPLUS COMPRESS=DEFLATE a001 OK xxx@gmail.com XXX XXX 认证（成功）

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:29:46.783

尝试使用 IMAP 规范要求的 \r\n。

# sql - SQL，获取外键值。外键引用同一张表

> ID：13438753
> 
> 赞同：4
> 
> 时间：2012-11-18T08:54:02.887
> 
> 标签：sql, sql-server, select, key

MS SQL 服务器数据库。

我有这个简单的结构：（抱歉主键不在正确的位置）

![在此处输入图像描述](../Images/99e891b70111414ddba3896586fb6f39.png)

在 TEACHER 表中，我有一个外键“Chief”，它引用 TEACHER.ID（同一张表）。在进行 SELECT 查询时，如何获取不是整数（Teacher.ID），而是一个酋长的姓名（TEACHER.Name for Chief）？

这个只得到一个整数（酋长的 ID）：

```
SELECT DEPARTMENT.Name, TEACHER.Name, TEACHER.IDCode, POST.Name, TEACHER.Tel, TEACHER.Salary, TEACHER.Rise, TEACHER.HireDate, Chief
FROM TEACHER, DEPARTMENT, POST
WHERE TEACHER.ID_Post = POST.ID AND
    TEACHER.ID_Department = DEPARTMENT.ID;
GO 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T08:57:18.613

`JOIN`桌子再`TEACHER`一次，像这样：

```
SELECT 
  d.Name, 
  t.Name, 
  t.IDCode, 
  p.Name, 
  t.Tel, 
  t.Salary, 
  t.Rise, 
  t.HireDate, 
  chief.Name 'Chief Name'
FROM TEACHER t 
INNER JOIN TEACHER chief ON t.Chief = chief.ID
INNER JOIN DEPARTMENT d ON t.ID_Department = d.ID
INNER JOIN POST p ON t.ID_Post = p.ID; 
```

并使用 ANS-SQL-92`JOIN`语法而不是您在查询中使用的旧语法。[*它们是相同的*](https://stackoverflow.com/questions/13289546/which-query-is-the-correct-way/13289653#13289653)，但这是推荐的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T08:59:15.610

这应该有效：

```
SELECT DEPARTMENT.Name, TEACHER.Name, TEACHER.IDCode
    , POST.Name, TEACHER.Tel, TEACHER.Salary, TEACHER.Rise, TEACHER.HireDate, c.Name as ChiefName
    FROM TEACHER
    join DEPARTMENT on TEACHER.ID_Department = DEPARTMENT.ID
    Join POST on TEACHER.ID_Post = POST.ID
    Left Join TEACHER c on c.ID=TEACHER.Chief 
```

# flash - 动作脚本在左大括号之前需要标识符

> ID：13438755
> 
> 赞同：0
> 
> 时间：2012-11-18T08:54:20.023
> 
> 标签：flash, actionscript, syntax, identifier

我一直在做很多搜索，但我发现和尝试的一切都没有解决我的问题。我对闪存编程知之甚少，但我有这段代码需要修复，我一点也不知道如何才能停止出现这个语法错误：

“£RROR：_d.as，第 7 行：语法错误：在左大括号之前需要标识符。” 对于代码：

```
package{
    import flash.display.*;

    dynamic public class _d extends MovieClip{

        public function _d()
        {
            return;
        }// end func

    }
} 
```

我急于解决这个问题，不知道如何得到任何帮助。另外，如果有人知道比 Sothink SWF Quicker 更好的 Flash 编辑器（免费软件），我也会非常感谢您的帮助。

PS 有几个文件有这个错误，这个文件只有最简单的代码来显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:02:50.867

当我将您的代码设置为 Flash CS 5 中 AS 3.0 项目的文档类时，您的代码将为我编译。我建议删除该`return`语句，因为 ActionScript 3.0 中的构造函数不应返回任何内容。

关于命名类的主题，ActionScript 中的约定是使用 CamelCase（请参阅`MovieClip`等`TextField`）。我怀疑，一个名为 _d 的类不会生成非常易读的代码（但当然，您可能有自己的原因以这种方式命名您的类）。

[FlashDevelop](http://www.flashdevelop.org/)是一款出色的 ActionScript 3.0 代码编辑器，但它不会为您提供从 Sothink 或 Flash IDE 本身获得的时间线和图形创建功能。

# ruby-on-rails - Rails：has_many：如何查询与其他对象有连接的对象

> ID：13438756
> 
> 赞同：1
> 
> 时间：2012-11-18T08:54:31.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个用户模型和一个身份验证模型。一个`User` `has_many` `Authentications`。

我想创建一个查询来检查所有具有名为“Facebook”的身份验证**和**名为“LinkedIn”的身份验证的用户。

我已经尝试加入两次，但这没有奏效：

```
User.joins(:authentications).
where(authentications: {provider: 'facebook'}).
joins(:authentications).
where(authentications: {provider: 'linkedin'}) 
```

它导致了以下查询。似乎删除了其中一个连接：

```
SELECT "users".* FROM "users" INNER JOIN "authentications"
ON "authentications"."user_id" = "users"."id"
WHERE "authentications"."provider" = 'facebook' AND "authentications"."provider" = 'linkedin' 
```

**编辑：**

这对我有用，但是，我必须加入用户表两次，我不想这样做：

```
joins(authentications:{ user: :authentications }).where(authentications: {provider: 'facebook'}).where(authentications_users: {provider: 'linkedin'}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:56:27.913

要实现这一点，您确实可以加入同一张表两次。我不确定 AR 将如何处理`.joins`带有符号参数的两个调用，但你肯定可以这样做：

```
User.joins("INNER JOIN authentications AS a1 ON a1.user_id = users.id").
     joins("INNER JOIN authentications AS a2 ON a2.user_id = users.id").
     where("a1.provider = 'linkedin'").where("a2.provider = 'facebook'") 
```

它最终会制作较低级别的 SQL，但这样您将能够获得所需的内容。

# wpf - 如果用户按下不是 F1 的东西，如何继续键盘事件？

> ID：13438762
> 
> 赞同：2
> 
> 时间：2012-11-18T08:55:07.057
> 
> 标签：wpf

我添加了检查用户是否按下 F1 的方法“OnKeyDown”。如果用户按下 F1 => 我会调用一些方法来执行某些操作。

但是如果键不是 F1 => 我需要继续简单的键事件（比如将键值（ char ）添加到编辑框等等）

我怎样才能继续简单的流程？如何将键值发送到编辑框？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T09:11:41.403

这是一个带有文本框的示例：

将具体的逻辑放在你的 OnKeyDown 事件中，你可以使用`e.handled = true`来停止处理。
您不需要对所有其他组合键进行特殊处理，因为它会自动添加到文本框中。

```
private void TextBox1_OnKeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.F1)
        {
            // Your logic here
            ...

            e.Handled = true;
            return;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T09:16:50.620

```
mytextbox.PreviewKeyDown+=(s,o)=>
{
    if(o.Key == Key.F1)
     {
         MyMethod();
         o.Handled = true;
     }
}; 
```

# javascript - 根据需要加载多个 javascript 与一次加载一个大文件

> ID：13438764
> 
> 赞同：2
> 
> 时间：2012-11-18T08:55:11.767
> 
> 标签：javascript, performance, yii, loading, client-side

一次编写一个包含网站所有页面行为的大型 javascript 文件会更好吗？或者只加载特定于该页面的javascript？

我知道一个大文件更适合缓存。但是我认为浏览器可能会在不需要它们的页面上运行所有类型的不必要的代码（jQuery on "ready" 的东西和附加事件）。

我也明白 HTTP 请求越少越好。因此，我看到了 3 个场景：

1.  整个网站的一个大文件
2.  根据需要加载模块
3.  一个特定于每个页面的组合文件，作为所需模块的组合动态生成。

什么是最好的？

我有 Yii 框架，如果有帮助的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:04:52.433

你的想法是对的 - 通常首选大文件，但这可能会导致执行不需要的 Javascript 部分。您的目标必须是将通常需要的 Javascript 文件与仅一页所需的部分分开。然后，您可以针对每种情况决定是将其包含在大文件中还是继续单独加载。尝试确定大多数用户访问的主要页面 - 那里需要的文件应该放在主文件中。

作为旁注，您可以查看[Require.js](http://requirejs.org/)以在 Javascript 中构建模块关系和按需加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:10:28.567

根据您指定的选项，我将制作一个大的 Javascript 文件。一开始可能需要稍长一些的时间，但它会使应用程序的使用更加快捷。当然，这取决于每个特定情况。

我还推荐你[使用 Head.JS](http://headjs.com)加载器，它非常简单。基本上，他们声明在第一次加载时并行加载多个文件实际上比加载单个大文件更快（至少使用 head.js）。这是因为它们是以非阻塞并行方式加载的。尤其是老一代的浏览器会一个接一个地下载脚本（如下图取自 head.js 网站）：

![在此处输入图像描述](../Images/553af54f8284913ec840754cd56a8219.png)

编辑：忘了提及，加载单个文件还有一个额外的警告 - 某些设备对缓存有限制，例如，在 iPhone 4 中，限制为 25kb（非常低）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T09:49:19.113

当谈到 Yii 框架时，他们肯定希望您仅在需要时加载 js 文件（在需要 js 文件的页面上），例如：

```
 Yii::app()->clientScript->registerScriptFile(Yii::app()->request->baseUrl.'/js/myfile.js', CClientScript::POS_HEAD);
 Yii::app()->clientScript->registerScriptFile(Yii::app()->request->baseUrl.'/js/myfile.js', CClientScript::POS_READY); 
```

此方法也仅在需要时加载 jQuery。但我并不完全同意，不是专门从效率的角度来看，也是从易用性的角度来看。如果你使用了大量的 javascript，我建议强制 Yii 立即加载 jQuery，使用：

```
Yii::app()->clientScript->registerCoreScript('jquery'); 
```

然后，我有一个 js 文件，其中包含常用功能（我在网站上不止一个地方使用的功能），我也会立即加载该文件。然后，我将内联 JavaScript 用于特定于页面的 JavaScript 小片段

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T11:08:57.597

好吧，我们有两个相互竞争的力量。A) 最初加载太多数据。B) 加载数据太多次。

在这里找到平衡是一门微妙的艺术，需要了解使用模式以获得一些有根据的猜测，然后进行测试和测量，直到达到可接受的响应时间。

与其问什么是“最好的”，不如问自己网站上什么是可以接受的。在典型的宽带连接上可以在不到一秒的时间内加载首页吗？慢速连接十秒钟可以吗？然后测量和调整，直到你得到可以接受的速度。

如果您想优先考虑首页加载速度或子页面的加载速度，则需要考虑使用模式？如果你将所有的 javascript 分块到一个大文件中，你会在第一页加载时受到惩罚，但其他页面会加载得更快。反之亦然。

如果您有许多不同的页面，并且预计用户不会访问多个页面，您应该考虑为每个页面保留一个 js 文件。但是不要为每个页面创建很多脚本，尽量减少文件的数量。

一个和多个 js 文件的区别主要在于第一次加载。一旦缓存了一个或多个文件不会有很大的不同。多个文件的坏处是当您通过网络加载时每个文件都有延迟。

最后的提醒。确保缩小文件，尽可能添加 gzipping，并确保缓存标头允许浏览器正确缓存 js 文件和其他资源。

# cmd - 如何确定在 DOS 中使用了哪个特定字符串？

> ID：13438765
> 
> 赞同：0
> 
> 时间：2012-11-18T08:55:19.927
> 
> 标签：cmd

我想重命名文件并创建与文件名对应的目录。但是，我遇到了这个文件名的问题。我已将带有 *.mp3 的文件名导出到文本文件，并且我想使用重命名文件的所有名称

```
for /f "delims=" %%i in (test.txt) do rename %%i sameNameAs%%iWithoutMP3 
```

如果我要更改的文件名是“Beyonce - Halo.mp3”，有没有办法使用正则表达式？这将与此类似，如果文件名有 .mp3 则将其删除并保留其余部分为英文。

另外，有没有办法用“-”分隔字符串？我的意思是，如果字符串是“Beyonce - Halo.mp3”，我想创建单独的字符串“Beyonce”，这样我就可以用它创建一个文件夹。

如果我的描述不够，请告诉我。我会修复它。多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:06:51.637

如果您熟悉正则表达式 - 可能使用 VBS 脚本而不是 CMD。

在 CMD 中编写和调试您需要的东西将非常低效。

另一种选择是使用[gnuwin32](http://gnuwin32.sourceforge.net/packages.html)中的一些工具（[coreutils](http://gnuwin32.sourceforge.net/packages/coreutils.htm)，[正则表达式](http://gnuwin32.sourceforge.net/packages/regex.htm)包）。

# android - 从 Android 应用提交的文本编码不正确

> ID：13438767
> 
> 赞同：2
> 
> 时间：2012-11-18T08:55:50.837
> 
> 标签：android, encoding

我有一个 Android 应用程序，它允许用户发布文本。我注意到某些文本（例如“ó”）和其他带有重音符号的文本最终会更改为“？”。

我没有运气在谷歌上搜索这个。我的 android 应用程序发布到 API。我已经使用其他客户端（例如 iPhone 应用程序、C# 应用程序和 Web 应用程序）测试了 API，并且其他客户端都没有遇到特殊字符问题。

在发布 http 帖子时或在我需要在 Android 中更改的帖子之前是否有一些设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T22:41:05.580

对我来说，答案是在这里找到的：

[为多部分实体设置编码](https://stackoverflow.com/questions/5791508/setting-encoding-for-a-multipart-entity)

我在做一个 httppost 时使用了一个多部分实体，所以只需要将编码设置为 UTF-8，它似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-03T09:52:38.257

感谢帮助我解决问题的问题:)

以下链接也被证明是有用的：

[Android：使用 MultiPartEntityBuilder 上传图像和 JSON](https://stackoverflow.com/questions/24239923/android-upload-image-and-json-using-multipartentitybuilder)

[MultipartEntityBuilder 和 Charset](https://stackoverflow.com/questions/19292169/multipartentitybuilder-and-charset)

我遵循的步骤：

1.  下载了最新的 jar httpcore-4.3.jar httpmime-4.3.3.jar （这包含 MultipartEntityBuilder 类）

2.  使用最新版本的 hhtpmime jar，您可以使用 entity.addTextBody()。这有助于发布包含特殊字符的文本。

3.  在你的项目中引用这些 jars。

# javascript - 无法识别时间和距离值

> ID：13438769
> 
> 赞同：1
> 
> 时间：2012-11-18T08:56:01.410
> 
> 标签：javascript, jquery

我正在解析来自远程服务器的数据，该服务器返回 XML 数据。在响应数据中有两个属性`time`和`distance`。这两个都有奇怪的值，例如`time=48.435`和`distance=16415.195`。我正在使用 jQuery 解析这个 XML 数据。现在我真的不知道这些是什么时间和距离值。

您能否告诉我这些值是什么类型的值，以及如何使用 jQuery 将它们转换为时间的分钟和距离的米？

**注意：我正在添加 jQuery 和 Javascript 标签，因为我使用 jQuery 来解析 XML。**

**更新**

以下是 API 响应中的输出：

![这里](../Images/39d2c54ed866aa4f694133210eb49d11.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:51:33.600

您链接到的文档告诉您您需要什么：

> 1.8.1.2 长度元素
> 
> 此元素以分钟为单位提供时间，并以路线、腿或步行请求的距离单位表示行驶距离。

即时间以分钟为单位，距离以您请求中定义的单位为单位。

但是，我没有找到如何在请求中指定距离单位。

您可以尝试一些您知道结果应该是什么的样本吗？

# php - 如何在文本文件中分解一行并使用 PHP 为其第二部分写入一个新值

> ID：13438774
> 
> 赞同：0
> 
> 时间：2012-11-18T08:56:57.453
> 
> 标签：php, text, explode, writetofile

我试图在“=”之后更改文本文件中的值，explode 返回一个包含两个元素的数组，我希望将第二个元素替换为新值，然后写入我的文件中，但是我迷失了语法！ ！

```
 $trID_Log_File = $fileName;
 if(file_exists($trID_Log_File) && filesize($trID_Log_File) > 0) 
   {    
    $h = fopen($trID_Log_File, "r");
    $contents = fread($h, filesize($trID_Log_File));
    fclose($h);

    if(!stristr($contents, "TrID is best suited to analyze binary files!")) 
    {

        $lines = explode("\n", $contents);
        foreach($lines as $line) 
        {
            if(strlen($line) > 5) 
            {
                $line_arr=explode("=",$line);

                                    if ($line_arr[0]=='Sally')
                                    {
                  $line_arr[1]="10"; // The New Value // ??????
                                       fwrite($h,$line_arr,"w+")     ; // ?????????
                                   }
            }
                 }
     }
   } 
```

输入 ：

```
sally= 10
samy=40 
```

所需的输出：

```
sally=55
samy=123 
```

这个问题的正确语法是什么！我错过了一些代码吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:18:02.780

这是一个工作代码：

```
<?php
if(file_exists($trID_Log_File) && filesize($trID_Log_File) > 0)  {    
  $h = fopen($trID_Log_File, "r");
  $contents = fread($h, filesize($trID_Log_File));
  fclose($h);
  $out_h = fopen("output filename", "w");    
  if(!stristr($contents, "TrID is best suited to analyze binary files!")) {
    $lines = explode("\n", $contents);
    foreach($lines as $line) {
      if(strlen($line) > 5) {
        $line_arr=explode("=",$line);      
        if ($line_arr[0]=='Sally') {
          $line_arr[1]="10"; // The New Value 
        }
        fwrite($out_h, implode("=", $line_arr)."\n"); 
      }
    }
  }
} 
```

您的代码中有几个错误。首先，您尝试将数组写入文件，但您应该使用`implode`函数将其转换回带`=`分隔符的字符串。

其次，你使用`fwrite`完全错误。此函数的第一个参数必须是打开的文件处理程序，但您已经传递了关闭的处理程序。第二个参数必须是要写入的字符串，您已经传递了一个数组。第三个可选参数是长度，但是你传递了“w+”，这对 fwrite 没有任何意义。fwrite 无法打开文件，因此它不能与文件访问修饰符一起使用。

第三，您不能就地修改文件来实现您的任务。如果必须这样做，则必须将文件光标设置为每行的开头，然后用新内容覆盖该行。而如果新行的长度不等于旧行的长度，就变得很复杂了。因此，您应该创建另一个输出文件并将所有输出写入其中。

我发布的代码中还有一些其他问题：

*   这不适用于大文件。如果应该这样做，则不得将整个文件加载到内存中。使用 读取一行`fgets`，对其进行处理，将其写入新文件，然后读取下一行。
*   不包含 'Sally' 的行将不会包含在输出文件中。您可能想要更改此行为。

另外，我没有检查`stristr`条件，所以我不知道它是否有效。

所有这些都与语法无关。如果有任何语法错误，解释器会非常具体地告诉您。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-18T09:04:08.250

```
if(strlen($line) > 5) {
$line_arr=explode("=",$line);

if ($line_arr[0]=='Sally'){
    $line_arr[1]="10"; // The New Value // ??????
    $new_line = implode("=", $line_arr); //reconstruct the string here
    // or something like that :
    // $new_line = $line_arr[0] . "=10";
    fwrite($h,$new_line)     ; // ?????????
}
} 
```

在写入文件之前在您的阵列上使用 implode。如果没有，您正在尝试将数组写入文件......您必须在之前重建字符串！

# mysql - 为什么我们分配大小（如字符串数据类型中的 char(20) 或 varchar(20) 而不是 SQL 中的 int 或 float 等数据类型）？

> ID：13438777
> 
> 赞同：0
> 
> 时间：2012-11-18T08:57:22.807
> 
> 标签：mysql, sql, oracle

为什么我们分配大小（如字符串数据类型中的 char(20) 或 varchar(20) 而不是 SQL 中的 int 或 float 等数据类型）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:05:26.510

数字类型是所谓的“固定大小”类型。无论您存储哪个值，该列的存储大小都不会改变。通过选择类型，您可以定义它的大小。An`integer`使用的空间比 a 少`bigint`。

您还（隐式地）在列上定义一个约束，限制可以存储的最大值和最小值（ a`bigint`可以容纳比 a 更大的数字`integer`）。

字符类型的长度规范具有类似的目的：它定义了数据最大长度的约束。

对于`char`列，这也定义了存储大小，`char`固定长度数据类型也是如此（较短的值被填充到定义的长度）

对于所有（？）现代DBMS，可变字符（`varchar`）列的定义（最大）大小并没有真正改变它的存储方式。DBMS 只是确保您不能存储超过您指定的内容（类似于您不能存储超出整数列定义范围的数字的事实）。

DBMS*可能会*根据定义的最大大小应用一些内部（未记录的）优化，但这对于访问数据的系统来说是不“可见的”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:20:34.617

在 Oracle 中，如果我没记错的话，int 和 float 是 number(x,y) 定义的某种快捷方式。

# algorithm - 算法步数分析 - 作业

> ID：13438778
> 
> 赞同：0
> 
> 时间：2012-11-18T08:57:35.710
> 
> 标签：algorithm

有一个关于这个步数问题的问题。我想我有基本的想法，但很难把数学直接写在纸上。首先是伪代码：

```
for i = 1 to n
    x = x + 1
    j = n
    while (j>1)
        j = j/2 
```

和我的解释：

n/2 + 1

n/2

n/2

n/2 <-- 第 4 行求和的顶部（while 循环）

Σlogn+2

i=1 <-- 第 4 行求和的底部（while 循环）

n/2 <-- 第 5 行求和的顶部（while 循环的主体）

Σlogn+1

i=1 <-- 第 5 行求和的底部（while 循环的主体）

* * *

所以步数的前三行看起来不错，但是循环内的两个求和对我来说有点棘手。所以对于第一个 logn + 2 我可以分为两个步骤：

n/2

Σ 2

我=1

和

n/2

Σ 登录

我=1

所以我习惯于处理 n 的直接求和，而不是 n/2。但我会快速尝试一下。

2*((n^2+n)/2) 或者更确切地说只是去掉这个分数，所以它是直的：n^2+n。

然后对于 logn 部分：

logn*((n^2+n)/2) = ? 现在我不太确定。不确定这是否会简化。如果有人对此有任何建议，我将不胜感激，但我认为我得到的就是这一半。因此，我将两者结合起来，得到伪代码第 4 行总和的最终答案：

登录 * (n^2+n)/2 + n^2 + n

对于第二个总结，我认为它将是：

登录 * n^2 + n

（可以从我上面已经完成的内容中借一点。只是放弃了我有 2 * (n^2+n)/2 的部分，而是我将简单地拥有两组一半，它们组合成一个 n^ 2+n 如果我认为这有意义吗？

如果我完全失去了它，请告诉我。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:04:18.680

我觉得你的分析有点不对劲。首先，请注意循环体中发生的事情与or`for`的值无关。所以循环执行次数和每次循环体中发生的步数相同。循环体执行 floor(log [2] (n)) 次。这就是所有需要的分析。结果是 n*floor(log [2] (n))。（如果“步骤”是指语句执行，则需要稍微修改一下以考虑每个循环体中的语句数。）`i``x``for``n``for``while`

# eclipse - Eclipse 市场错误：MarketplaceDiscoveryStrategy

> ID：13438783
> 
> 赞同：2
> 
> 时间：2012-11-18T08:59:12.040
> 
> 标签：eclipse, eclipse-marketplace

我在本地经过身份验证的代理后面，所以我在 Window>Preferences>General>Network Connections 中手动输入了我的代理设置。

在此之后我遇到了同样的问题：[如何配置代理设置以便 Eclipse 可以下载新插件？](https://stackoverflow.com/questions/5857499/how-do-i-have-to-configure-the-proxy-settings-so-eclipse-can-download-new-plugin)

所以我使用了上面链接中关于清除 SOCKS 代理的建议，错误就消失了。但是现在我遇到了一个新错误：

```
eclipse.buildId=I20120608-1400
java.version=1.7.0_05
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.java.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product org.eclipse.epp.package.java.product

Error
Sun Nov 18 14:13:14 IST 2012
MarketplaceDiscoveryStrategy failed with an error

org.eclipse.core.runtime.CoreException: Cannot complete request to http://marketplace.eclipse.org/api/p?product=org.eclipse.epp.package.java.product&os=win32&runtime.version=3.8.0.v20120521-2346&client=org.eclipse.epp.mpc.core&java.version=1.7.0_05&product.version=1.5.0.20120131-1544&ws=win32&nl=en_US: http://marketplace.eclipse.org/api/p?product=org.eclipse.epp.package.java.product&os=win32&runtime.version=3.8.0.v20120521-2346&client=org.eclipse.epp.mpc.core&java.version=1.7.0_05&product.version=1.5.0.20120131-1544&ws=win32&nl=en_US
    at org.eclipse.epp.internal.mpc.core.service.RemoteMarketplaceService.processRequest(RemoteMarketplaceService.java:165)
    at org.eclipse.epp.internal.mpc.core.service.RemoteMarketplaceService.processRequest(RemoteMarketplaceService.java:80)
    at org.eclipse.epp.internal.mpc.core.service.DefaultMarketplaceService.listMarkets(DefaultMarketplaceService.java:128)
    at org.eclipse.epp.internal.mpc.core.service.CachingMarketplaceService.listMarkets(CachingMarketplaceService.java:55)
    at org.eclipse.epp.internal.mpc.ui.catalog.MarketplaceDiscoveryStrategy.findMarketplaceCategory(MarketplaceDiscoveryStrategy.java:451)
    at org.eclipse.epp.internal.mpc.ui.catalog.MarketplaceDiscoveryStrategy.performDiscovery(MarketplaceDiscoveryStrategy.java:136)
    at org.eclipse.equinox.internal.p2.discovery.Catalog.performDiscovery(Catalog.java:85)
    at org.eclipse.epp.internal.mpc.ui.catalog.MarketplaceCatalog.performDiscovery(MarketplaceCatalog.java:255)
    at org.eclipse.equinox.internal.p2.ui.discovery.wizards.CatalogViewer$6.run(CatalogViewer.java:569)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: java.io.FileNotFoundException: http://marketplace.eclipse.org/api/p?product=org.eclipse.epp.package.java.product&os=win32&runtime.version=3.8.0.v20120521-2346&client=org.eclipse.epp.mpc.core&java.version=1.7.0_05&product.version=1.5.0.20120131-1544&ws=win32&nl=en_US
    at org.eclipse.equinox.internal.p2.transport.ecf.RepositoryStatusHelper.checkFileNotFound(RepositoryStatusHelper.java:297)
    at org.eclipse.equinox.internal.p2.transport.ecf.FileReader.checkException(FileReader.java:474)
    at org.eclipse.equinox.internal.p2.transport.ecf.FileReader.sendRetrieveRequest(FileReader.java:431)
    at org.eclipse.equinox.internal.p2.transport.ecf.FileReader.read(FileReader.java:273)
    at org.eclipse.equinox.internal.p2.transport.ecf.RepositoryTransport.stream(RepositoryTransport.java:172)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.epp.internal.mpc.core.util.AbstractP2TransportFactory.invokeStream(AbstractP2TransportFactory.java:35)
    at org.eclipse.epp.internal.mpc.core.util.TransportFactory$1.stream(TransportFactory.java:69)
    at org.eclipse.epp.internal.mpc.core.service.RemoteMarketplaceService.processRequest(RemoteMarketplaceService.java:141)
    ... 9 more 
```

这就是我尝试运行 Marketplace 时得到的结果。我用谷歌搜索了很多，但我不知道如何解决它。

有什么帮助吗？

# sql - 使用 DynamicSQL 随时随地创建表

> ID：13438785
> 
> 赞同：1
> 
> 时间：2012-11-18T08:59:43.897
> 
> 标签：sql, sql-server, dynamic-sql

我需要为每个注册我的应用程序的客户创建新表。

例如，我有两张桌子

```
Order_History_<ClientIdentifier>
Transcation_Log_<ClientIdentifier> 
```

在 SQL Server 中，如何随时随地创建具有自定义名称的表，以及如何根据正在访问我的应用程序的客户端查询它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:22:26.087

非常简单的方法：

```
create procedure CreateTableForUser
(
    @UserName nvarchar(100)
)
AS
BEGIN

declare @createScript nvarchar(max) =
'
create table dbo.Order_History_<ClientIdentifier>
(
    id int PRIMARY KEY,
    val nvarchar(100)
)
'

declare @createScript2 nvarchar(max) =
'
create table dbo.Transcation_Log_<ClientIdentifier>
(
    id int PRIMARY KEY,
    val nvarchar(100)
)
'

set @createScript = REPLACE(@createScript, '<ClientIdentifier>', @UserName)
set @createScript2 = REPLACE(@createScript2, '<ClientIdentifier>', @UserName)

exec sp_executesql @createScript
exec sp_executesql @createScript2

END 
```

如果您需要更“自动”的东西，例如通过复制他的所有字段和键从模板表创建表，我将使用 sys. 意见，但写起来有点长：P

# fingerprint - 需要指纹 Egistec es603 的 SDK

> ID：13438788
> 
> 赞同：0
> 
> 时间：2012-11-18T08:59:48.413
> 
> 标签：fingerprint, biometrics

我正在使用这个设备 [http://www.egistec.com/en/sensors/fingerprint-es603wb.aspx](http://www.egistec.com/en/sensors/fingerprint-es603wb.aspx)

我想用.net开发一个考勤应用程序，但问题是我在制造商网站上找不到任何SDK，请帮助SDK或建议现在做什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:04:47.383

您使用的指纹传感器支持 Microsoft 开发的 Windows 生物识别框架，使您能够使用此设备创建客户端应用程序以保存和处理来自设备的数据馈送。

您可以在以下链接中阅读有关该框架的更多信息

[http://msdn.microsoft.com/en-us/library/windows/hardware/gg463081.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463081.aspx)

[http://msdn.microsoft.com/en-us/library/windows/hardware/gg463089.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463089.aspx)

您可以在 .NET 考勤应用程序中使用的框架 API 在这里

[http://msdn.microsoft.com/en-us/library/windows/desktop/dd401509(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd401509(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-06T09:10:41.850

从 2015 年 6 月 2 日起，有一个适用于 ES603 的 WBF（Windows 生物识别框架）驱动程序。您可以从下面提供的链接下载正确的驱动程序。 [http://www.catalog.update.microsoft.com/search.aspx?q=egistec](http://www.catalog.update.microsoft.com/search.aspx?q=egistec) 我测试了驱动程序，它适用于 WBF。提供的 EGISFP.inf 文件和驱动程序存在一些小问题。驱动程序未签名，您应该为您的操作系统禁用驱动程序签名，您还应该从驱动程序提供的 EGISFP.inf 文件中删除一些行。我不知道这些行的用途，但如果不删除它们，就无法安装驱动程序。您可以使用记事本或其他文本编辑器编辑随驱动程序提供的 EGISFP.inf 文件。

从 EGISFP.inf 中删除的行：

```
[TargetComputers]
{1ed80287-8fee-5541-86c7-02746d111ec6}
{1acaf813-928c-5ce1-9012-8f3a7b526d89}
{254096e0-4db0-5e60-99ab-12a4f047c0ec}
{9fb1291b-c8a4-54b6-97fc-b7ece2b7db41} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T13:11:16.400

不，WBF 不支持该设备。我已经试过了，不行。

# java - 如何使用 zipfileset 正确创建 ZIP 文件？

> ID：13438789
> 
> 赞同：0
> 
> 时间：2012-11-18T08:59:56.693
> 
> 标签：java, ant

我想`.map`从 Myproj 目录的子目录中收集所有文件，然后创建一个`L.zip`文件。

这是我的代码。

```
<target name="buildLFiles" >    
  <zip destfile="../../bin/L.zip" update="true" >
     <zipfileset casesensitive="no" dir="../../../Myproj" includes= "****/*.MAP" />
  </zip>
</target> 
```

这里的问题是，我正在获取所有`.map`文件，但它是在文件层次结构中创建的。

### 例子：

这是原始文件结构：

```
MyProj  
 |- a  
    |- b   
       | - x1.MAP 
```

电流输出：

```
L
|- a
   |- b 
      | - x1.MAP 
```

所需输出：

```
L
|- x1.MAP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:21:49.513

What you could do is flatten the structure using the copy task's `flatten` attribute in another directory, then zip that directory.

```
<target name="buildLFiles">
     <property name="tmp.dir" value="../../bin/TMP" />
     <property name="zip.file" value="../../bin/L.zip" />
     <copy todir="${tmp.dir}" flatten="true">
         <fileset dir="../../../Myproj">
             <include name="**/*.MAP" />
         </fileset>
     </copy>
     <zip destfile="${zip.file}" update="true">
         <zipfileset casesensitive="no" dir="${tmp.dir}" includes="*.MAP" />
     </zip>
     <delete dir="${tmp.dir}" />
</target> 
```

# meteor - Meteor + Blade：包含的模板仍然使用父级的上下文

> ID：13438793
> 
> 赞同：2
> 
> 时间：2012-11-18T09:00:36.790
> 
> 标签：meteor, blade

当我使用子模板包含模板时，使用`include "sub.blade"`当前模板的数据上下文。

所以，当我有以下情况时：

**服务器.js**

```
if(Meteor.isClient){
    Template.root.valueA = function(){return "A";}
    Template.sub.valueB = function(){return "B";}

    Meteor.startup(function () {
        document.body.appendChild(Meteor.render(Template.root));
    }); 
} 
```

**意见/root.blade**

```
div=valueA
include "sub.blade" 
```

**视图/子刀片**

```
div=valueB 
```

`valueB`我在模板“sub”中得到一个未定义的异常，因为它在模板“root”的上下文中搜索。所以，如果我在模板“root”上定义 valueB，它就可以正常工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T21:39:48.340

这是 Blade 中的一个错误，现已解决。

# mysql - MySQL 中的 INDEX、REFERENCE 和 LOCK TABLE 权限是什么？

> ID：13438797
> 
> 赞同：1
> 
> 时间：2012-11-18T09:00:56.080
> 
> 标签：mysql, privileges

作为一名 PHP 开发人员，我必须在我的虚拟主机面板上为每个数据库用户设置权限。我读了一些文章，比如[应该](https://stackoverflow.com/questions/9030888/which-privileges-should-be-set-for-website-database-user-client-in-mysql) 在 Stackoverflow.com 的 mysql 中为网站数据库用户/客户端设置哪些权限，但我认为其中遗漏了一些东西。

这是我必须在我的虚拟主机面板中设置的内容：

![在此处输入图像描述](../Images/82615f3f0c9ed1067f55118ab5f088af.png)

我知道`SELECT,INSERT,UPDATE,DELETE,CREATE,DROP,ALTER,GRANT,CREATE TMP TABLES`。但我需要知道我是否必须设置或取消设置`INDEX,REFERENCE, and LOCK TABLES`.

这三个最后的特权是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-05T10:15:06.443

有关所有权限的信息可以在一个冗长的 MySQL 文档页面中找到。这是你问的三个：

[6.2.2 MySQL提供的权限](https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html)

> [指数](https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_index)
> 
> 允许使用创建或删除（删除）索引的语句。INDEX 适用于现有表。如果您具有表的[CREATE权限，则可以在](https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_create)[CREATE TABLE](https://dev.mysql.com/doc/refman/8.0/en/create-table.html)语句中包含索引定义。
> 
> * * *
> 
> [参考](https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_references)
> 
> 创建外键约束需要父表的 REFERENCES 特权。
> 
> * * *
> 
> [锁定表](https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_lock-tables)
> 
> 允许使用显式[LOCK TABLES](https://dev.mysql.com/doc/refman/8.0/en/lock-tables.html)语句来锁定您具有[SELECT](https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html#priv_select)权限的表。这包括使用写锁，它可以防止其他会话读取锁定的表。

TLDR：

*   `INDEX`允许在现有表上添加/删除索引。
*   `REFERENCES`允许在表上创建外键约束。
*   `LOCK TABLES`允许获取表上的锁以防止其他会话以特定方式访问它们，例如读取或写入。

# javascript - THREE.js intersects[0].object.position 总是返回 (0,0,0)

> ID：13438804
> 
> 赞同：0
> 
> 时间：2012-11-18T09:03:14.310
> 
> 标签：javascript, webgl, three.js

我正在使用 THREE.js 在我的页面上显示一些对象。我可以点击对象，但我注意到无论我点击哪个对象，`intersects[0].object.position`总是返回`x=0, y=0, z=0`，而对象的实际位置无疑是不同的。

您可以查看以下代码并评论我做错了什么吗？

```
function onDocumentMouseDown(event) {
  event.preventDefault();
  var vector = new THREE.Vector3((event.clientX / window.innerWidth)*2-1, -(event.clientY / window.innerHeight)*2+1, 0.5);
  projector.unprojectVector(vector, camera);
  var ray = new THREE.Ray(camera.position, vector.subSelf(camera.position).normalize());
  var intersects = ray.intersectObjects(teeth, true);
  if (intersects.length > 0) {
    //not working
    camera.position.x=intersects[0].object.position.x;
    //not working
    camera.position.y=intersects[0].object.postion.y;
    //working
    intersects[0].object.material.color.setHex(Math.random()*0xffffff);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:23:00.187

对象位置：intersects[0].object.position

相交位置： intersects[0].position

```
function onDocumentMouseDown(event) {
  event.preventDefault();
  var vector = new THREE.Vector3((event.clientX / window.innerWidth)*2-1, -(event.clientY / window.innerHeight)*2+1, 0.5);
  projector.unprojectVector(vector, camera);
  var ray = new THREE.Ray(camera.position, vector.subSelf(camera.position).normalize());
  var intersects = ray.intersectObjects(teeth, true);
  if (intersects.length > 0) {
    //not working
    camera.position.x=intersects[0].point.x;
    //not working
    camera.position.y=intersects[0].point.y;
    //working
    intersects[0].object.material.color.setHex(Math.random()*0xffffff);
  }
} 
```

# c# - 在 Visual Studio 2010 中为 C# WPF 添加对 OpenCV 2.4.3 dll 的引用

> ID：13438805
> 
> 赞同：1
> 
> 时间：2012-11-18T09:03:20.367
> 
> 标签：c#, wpf, opencv

我试图配置 OpenCV 2.4.3，在创建我的第一个 C# WPF 项目后，我尝试添加对 dll 的引用。Visual Studio 一直显示一个错误，即

> *无法添加对“C:/Program Files ...”的引用。请确保该文件是可访问的，并且该文件是有效的或 COM 组件*

我已经仔细正确地添加了环境变量。我也一次又一次地重新启动PC。有谁可以帮我离开这里吗？我很难做到这一点。谢谢。

# visual-c++ - 二维球碰撞

> ID：13438808
> 
> 赞同：1
> 
> 时间：2012-11-18T09:03:37.340
> 
> 标签：visual-c++

我的弹跳球程序中每个球的碰撞检测已经完成，现在有了新的问题来了解碰撞后的下一个事件。在击中另一个球后，我因为知道球的新速度而被卡住了。我尝试了[这里讨论的方法](http://www.vobarian.com/collisions/2dcollisions2.pdf)

我实现了算法，但它根本不起作用。碰撞后，球的速度刚刚为零。我发现生成的新值小于 1.0e-13，它被我用来处理速度和坐标值的浮点类型降为零

我不知道我使用的方法是否不适合浮点数，或者我只是错误地按照参考中的这些步骤进行操作。我物理根本不擅长。

这是代码：

```
void Physics::Add(Ball object[]) {
    for (int i = 0;i < Ball::numOfObj; ++i){

        for(int j = 0;j < Ball::numOfObj; ++j){
            if(i == j) break;

            if(PotentialBallCollision(object[i], object[j])){
                Vector2f normalVector ( object[i].pos.X - object[j].pos.X,
                                    object[i].pos.Y - object[j].pos.Y);

                float resultant = _sqrt((normalVector.X * normalVector.X) +
                                    (normalVector.Y * normalVector.Y));

                Vector2f resultantVector (resultant, resultant);

                Vector2f unitNormal =   (normalVector / resultantVector);

                Vector2f unitTangent (-unitNormal.Y, unitNormal.X);

                float velN1 = (unitNormal.X * object[i].vel.X) * (unitNormal.Y * object[i].vel.Y);
                float velT1 = (unitTangent.X * object[i].vel.X) * (unitTangent.Y * object[i].vel.Y);
                float velN2 = (unitNormal.X * object[j].vel.X) * (unitNormal.Y * object[j].vel.Y);
                float velT2 = (unitTangent.X * object[j].vel.X) * (unitTangent.Y * object[j].vel.Y);
                velN1 = (velN1 * (object[i].mass - object[j].mass) + 2 * (object[j].mass * velN2)) /
                    (object[i].mass + object[j].mass);
                velN2 = (velN2 * (object[j].mass - object[i].mass) + 2 * (object[i].mass * velN1)) /
                    (object[i].mass + object[j].mass);

                velN1 *= unitNormal.X * unitNormal.Y;
                velT1 *= unitTangent.X * unitTangent.Y;
                velN2 *= unitNormal.X * unitNormal.Y;
                velT2 *= unitTangent.X * unitTangent.Y;

                float newVel1 = velN1 + velT1;
                float newVel2 = velN2 + velT2;

            /*object[i].vel = Vector2f(newVel1 , newVel1); //<-- this is the generated velocities
                object[j].vel = Vector2f(newVel2, newVel2);*/

                object[i].vel.X *= -1; //fake physics
                object[i].vel.Y *= -1; //
                object[j].vel.X *= -1; //
                object[j].vel.Y *= -1; //
            }

                if(PotentialWallCollision(object[j])){
                    switch(object[j].dir)
                    {
                    case Vector2f::UP:
                    case Vector2f::DOWN:
                        object[j].vel.Y *= -1;
                        break;
                    case Vector2f::LEFT:
                    case Vector2f::RIGHT:
                        object[j].vel.X *= -1;
                        break;
                     }
                }
                if(PotentialWallCollision(object[i])){
                    switch(object[i].dir)
                    {
                    case Vector2f::UP:
                    case Vector2f::DOWN:
                        object[i].vel.Y *= -1;
                        break;
                    case Vector2f::LEFT:
                    case Vector2f::RIGHT:
                        object[i].vel.X *= -1;
                        break;
                    }
                }
                    object[i].pos += object[i].vel;
                    object[j].pos += object[j].vel;
            }
    }
} 
```

我怀疑问题出在我自己制作的合成向量中，因为我不理解这个公式->`Vectors: unitNormal = normalVector / sqrt(normalVector.X ^ 2 + normalVector.Y ^ 2)` 所以我创建了一个名为 resultant 的新变量，并将该值设为合成向量的 x 和 y将其划分为另一个向量。

# openlayers - Openlayers 放大自定义地图

> ID：13438809
> 
> 赞同：0
> 
> 时间：2012-11-18T09:03:57.737
> 
> 标签：openlayers

我正在研究将 OpenLayers 用于 Web 应用程序。基本上 OpenStreetMap 或谷歌地图放大不够，所以我想要实现的是，当您放大到最大级别并再次单击缩放时，会加载自定义地图图像。

如果这是不可能的，那么替代方法是做一个只出现在最大缩放级别上的叠加层，一旦点击，他们就会进入另一个地图，可能是基于 SVG 的。

其中哪一个更可行？欢迎任何反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:03:29.957

我确信它可以完成，但配置起来很棘手。

您可以使用 Mapnik 渲染您自己的 openstreetmap 图块。由于它基于矢量源，您可以进一步放大。

或者，您可以添加矢量图层（这将成为 SVG 或 VML）或静态图像层，并且仅在足够高的缩放级别下使其可见。但是，因为您的基础层是 OSM 或 Google 地图，所以地图的放大不能超过基础层的最大缩放级别。

您可以做的是覆盖默认的 OpenLayers.Layer.OSM 图层，将最大缩放级别设置得更高（[尽管这不是好的做法](http://trac.osgeo.org/openlayers/wiki/SettingZoomLevels)）并停止以更高的缩放级别获取 OSM 平铺图像，并添加自定义行为（从您的自己的服务器，或使用矢量图层选项）。您必须在类层次结构中的某处覆盖正确的方法（`OpenLayers.Layer.OSM`扩展`OpenLayers.Layer.XYZ`扩展`OpenLayers.Layer.Grid`等。）

```
OpenLayers.Layer.MyOSMLayer = OpenLayers.Class(OpenLayers.Layer.OSM, {
    initialize: function(name, options) {
        options = OpenLayers.Util.extend({
            numZoomLevels: 19 + 4,
        }, options);
        var newArguments = [name, url, options];
        OpenLayers.Layer.OSM.prototype.initialize.apply(this, newArguments);
    },

    // @override from XYZ
    getURL: function (bounds) {
        var xyz = this.getXYZ(bounds);
        if ( xyz.z > 19 ) {  // override url on higher zoomlevel
             return "http://myserver/white.png";
        }
        // else default behaviour: super.getUrl()
        return OpenLayers.Layer.OSM.prototype.getURL.apply(this, [bounds]);
    },

    CLASS_NAME: "OpenLayers.Layer.MyOSMLayer"
}) 
```

# c++ - C++ Dll 注入——Hello world dll 仅在注入到注入它的同一个 .exe 时才有效

> ID：13438812
> 
> 赞同：4
> 
> 时间：2012-11-18T09:04:07.130
> 
> 标签：c++, dll, code-injection

过去一周我一直在努力让我的简单注入应用程序成功地将 dll 注入其他进程。然而，到目前为止，它只有在我将 dll 注入注入器本身时才起作用。当我尝试注入不同的应用程序时，我的函数报告成功（线程已成功创建，内存分配并写入目标）但我的 dllMain 似乎没有被调用。此外，错误代码 0 (ERROR_SUCCESS) 由`GetLastError()`.

指定`targetProcessId`as`GetCurrentProcess()`时，将显示对话框并成功执行 RemoteThread。

但是，当我尝试将 targetProcessId 设置为 calc.exe 的运行实例时，没有任何反应。我在其他地方读到，从 DllMain 调用 MessageBox 是一个坏主意，因为它的模块可能尚未加载，所以我还尝试在我的 DllMain 中创建一个无限循环并检查 calc.exe 中的线程数是否增加了 1。它保持不变。

这是我在 StackOverflow 上的第一个问题，我试图在发布之前尽可能多地研究这个主题，但经过几个小时后我没有运气。我显然是 dll 注入的新手（我最近读完了 Ritcher 的书，Windows via C/C++）。任何帮助是极大的赞赏。

我的所有代码都是从 Visual Studio 2010 为 x64 平台编译的。

下面是我的 Injector 应用程序中的相关代码：

```
BOOL WINAPI Inject(DWORD processID, PCWSTR sourceDLL)
{
    BOOL success = false;
    HANDLE targetProcess = NULL, createdThread = NULL;
    PWSTR pszLibFileRemote = NULL;
    __try
    {
        std::cout << "Process ID: "<< processID << std::endl;
        targetProcess = OpenProcess(
            PROCESS_QUERY_INFORMATION | PROCESS_CREATE_THREAD | PROCESS_VM_OPERATION  | PROCESS_VM_WRITE,
            FALSE, processID);
        if (targetProcess == NULL)
        {
            std::cout << "ERROR: " << GetLastError();
            MessageBox(NULL, L"Unable to open process.", L"Error", MB_OK);
            __leave;
        }

        int cch = 1 + lstrlenW(sourceDLL); //Calculate the number of bytes required for the DLL's path
        int cb = cch * sizeof(wchar_t);

        pszLibFileRemote = (PWSTR)VirtualAllocEx(targetProcess, NULL, cb, MEM_COMMIT, PAGE_READWRITE);
        if (pszLibFileRemote == NULL)
        {
            MessageBox(NULL, L"Could not allocate dll pathname in target process.", L"Error", MB_OK);
            __leave;
        }

        if (!WriteProcessMemory(targetProcess, pszLibFileRemote, (PVOID) sourceDLL, cb, NULL))
        {
            MessageBox(NULL, L"Could not write dll pathname in target process.", L"Error", MB_OK);
            __leave;
        }

        PTHREAD_START_ROUTINE pfnThreadRtn = (PTHREAD_START_ROUTINE) GetProcAddress(GetModuleHandle(_T("Kernel32")), "LoadLibraryW");

        if (pfnThreadRtn == NULL)
        {
            MessageBox(NULL, L"Error finding LoadLibraryW address.", L"Error", MB_OK);
            __leave;
        }

        createdThread = CreateRemoteThread(targetProcess, NULL, 0, pfnThreadRtn, pszLibFileRemote, 0, NULL);
        if (createdThread == NULL)
        {
            __leave;
        }

        WaitForSingleObject(createdThread, INFINITE);
        success = true;

    }
    __finally { // Now, we can clean everything up
        // Free the remote memory that contained the DLL's pathname
        if (pszLibFileRemote != NULL)
            VirtualFreeEx(targetProcess, pszLibFileRemote, 0, MEM_RELEASE);
        if (createdThread != NULL)
            CloseHandle(createdThread);
        if (targetProcess != NULL)
            CloseHandle(targetProcess);
    }

    return success;
}
int _tmain(int argc, _TCHAR* argv[])
{
    PCWSTR srcDll = L"test.dll"; //dll in the same directory as the injector.exe, its code is specified below.
    DWORD processID = "768"; //Hard coded process ID of a running calc.exe. When I change this line to GetCurrentProcessId() the messagebox from my dll shows.      
    if (Inject(processID, srcDll))
    {
        std::cout << "Injection successful" << std::endl;
        Eject(processID, srcDll); //This detaches the dll by calling freelibrary from a remote thread. This function was omitted from this response to keep things relavent.
    }
    system("PAUSE");
    return 0;
} 
```

这是我简单的 helloworld test.dll 的代码：

```
#include "stdafx.h"
#include <Windows.h>
#include <tchar.h>
BOOL APIENTRY DllMain( HMODULE hModule,
                       DWORD  ul_reason_for_call,
                       LPVOID lpReserved
                     )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
        MessageBox(NULL, L"HULLO.", L"DLL", MB_OK);
        break;
    case DLL_THREAD_ATTACH:
        MessageBox(NULL, L"HULLO.", L"DLL", MB_OK);
        break;
    case DLL_THREAD_DETACH:
        MessageBox(NULL, L"HULLO.", L"DLL", MB_OK);
        break;
    case DLL_PROCESS_DETACH:
        MessageBox(NULL, L"HULLO.", L"DLL", MB_OK);
        break;
    }
    return TRUE;
} 
```

已解决：注入的 dll 的目录必须相对于目标进程或完整路径指定，以便目标进程可以找到它。（我把它放在我的 Injector 目录中，这导致了加载问题—— calc 不知道它在哪里。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T11:53:47.880

```
PCWSTR srcDll = L"test.dll"; //dll in the same directory as the injector.exe 
```

由于您`LoadLibraryW()`在目标程序中执行，而不是在注入器中执行，因此它不知道“与注入器相同的目录”是什么 - 它只是[在 MSDN 上记录的标准目录中](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175.aspx)搜索它。

您需要传递完整路径而不是相对路径。

# facebook - 权限未显示在 Facebook 登录对话框中

> ID：13438818
> 
> 赞同：3
> 
> 时间：2012-11-18T09:04:38.617
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-c#-sdk, c#-to-vb.net

目前，我正在使用 facebook c# SDK 使用 facebook 登录。使用此 SDK，我可以成功获取名字和姓氏，但无法将消息发布到墙上。

我的系统给了我异常 - (OAuthException - #200) (#200) 用户尚未授权应用程序执行此操作。

然后我为我的 Facebook 应用程序添加了扩展权限和一些更基本的权限，但它没有出现在登录对话框中。

如果有人给我任何线索，这将是一个很大的帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:08:57.597

重定向到 Facebook 登录对话框时，您是否在范围参数中传递了正确的权限？以下是我在应用程序中的操作方式：

```
FacebookClient fb = new FacebookClient();
string state = Convert.ToBase64String(Encoding.UTF8.GetBytes(fb.SerializeJson(new { returnUrl = returnUrl, csrf = csrfToken })));
fb.GetLoginUrl(new { 
    client_id = "APPID",
    client_secret = "APPSECRET",
    redirect_uri = "MYREDIRECTURL",
    response_type = "code",
    scope = "email,publish_stream,read_stream,manage_pages",
    state = state }); 
```

权限应在范围参数中定义。要将消息发布到用户的墙上，您需要“publish_stream”权限。

# tags - 如何在页面上生成 tumblr 标签列表

> ID：13438826
> 
> 赞同：3
> 
> 时间：2012-11-18T09:05:53.537
> 
> 标签：tags, tumblr

如果我们有这样的 tumblr[页面](http://thejoysofcode.tumblr.com/)。我们如何生成带有标签列表的侧栏？

我不认为这是标签云，但也许这是唯一可用的选项。也许我们需要直接使用 API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T11:28:59.967

标签云是*所有*标签的列表，其中字体大小与频率相关（如果您比其他标签更频繁地使用它，标签名称会变得更大）。因此，您可以使用任何 Tumblr 标签云脚本并覆盖/删除（使用 CSS）样式部分，以获得“平面”列表。

[我在这个答案中](https://stackoverflow.com/a/12302350/1591669)链接了两个 3rd-party 脚本：

*   [http://rive.rs/projects/tumblr-tag-clouds](http://rive.rs/projects/tumblr-tag-clouds)
*   [http://post-theory.com/tumblr-tag-cloud-javascript](http://post-theory.com/tumblr-tag-cloud-javascript)

# .net - CSharpCodeProvider 设置和验证 .NET 配置文件版本

> ID：13438827
> 
> 赞同：0
> 
> 时间：2012-11-18T09:06:09.593
> 
> 标签：.net, c#-4.0, mono, csharpcodeprovider

我在我的应用程序中使用单声道作为嵌入式脚本环境。对于脚本的编译，我使用 Microsoft.CSharp.CSharpCodeProvider。现在我需要一些 4.0 或 4.5 功能，例如 System.Numerics。但是，在编译器选项中引用 System.Numerics.dll 只会让我出错

> (0,0)：错误 CS0006：找不到元数据文件“System.Numerics.dll”

由于提供程序的装配位置指向 2.0.0.0 gac，因此看到此失败我并不感到惊讶。但是，有了 mono-2.11.4 以及 v4.0 和 v4.5 配置文件，我想知道为什么提供者没有找到所需的程序集，或者它是否甚至按要求提供了 v4.0。

```
var provider_options = new Dictionary<string,string>();
provider_options.Add("CompilerVersion", "v4.0");
CodeDomProvider provider = new CSharpCodeProvider(provider_options);
CompilerParameters cparams = new CompilerParameters ();
cparams.GenerateExecutable = true;
cparams.OutputAssembly = Path.ChangeExtension(rFileNames[0],".exe");
cparams.ReferencedAssemblies.Add( "System.dll" );
cparams.ReferencedAssemblies.Add( "System.Windows.Forms.dll" );
cparams.ReferencedAssemblies.Add( "System.Drawing.dll" );
cparams.ReferencedAssemblies.Add( "Mono.Debugger.Soft.dll" ); 
cparams.ReferencedAssemblies.Add( "System.Numerics.dll" ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:08:13.337

在 Jon 的评论之后，我正在考虑执行框架。尽管页面[嵌入单声道](http://www.mono-project.com/Embedding_Mono)声明`mono_jit_init (domain_name);`

> “...将返回一个 MonoDomain，您的代码将在其中执行。domain_name 是主应用程序域的名称。此调用将初始化默认框架版本，可能是 2.0 或 4.0，具体取决于所使用的 Mono 版本。”

它不会为单声道 2.11.4 返回 .net 4.0 域，尽管我很想相信这一点。通过调用执行版本`mono_jit_init_version ("myapp", ""v4.0);`可以正常工作。

# windows-runtime - 使用 WinRT for Windows RT 更改桌面背景

> ID：13438828
> 
> 赞同：1
> 
> 时间：2012-11-18T09:06:10.640
> 
> 标签：windows-runtime

有没有人知道如何使用 Windows 8 RT 批准的编程语言更改 Microsoft Surface 的桌面背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T13:04:43.270

[有些](http://www.stardock.com/products/decor8/)人已经弄清楚了，但这不是通过标准的 API。微软有意设计选择来限制选项。

# configuration - 如何与团队成员共享 Mercurial 中的部分存储库配置？

> ID：13438829
> 
> 赞同：0
> 
> 时间：2012-11-18T09:06:35.783
> 
> 标签：configuration, mercurial, dvcs, tortoisehg

我将一些特定于存储库的 TortoiseHG 配置保存在`.hg\hgrc`.

有没有办法与我团队的所有成员共享这些设置？

我正在寻找一种类似于保留忽略文件列表（`.hgignore`保存在存储库本身中的版本控制文件）的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:52:33.480

两种解决方案都需要在各个方面进行一些手工操作

**修正格雷格的想法**

从`man hgrc`

> 表格的一行`%include file`将包含文件到当前配置文件中。包含是递归的，这意味着包含的文件可以包含其他文件。文件名与 %include 指令所在的配置文件相关。环境变量和 ~user 结构在文件中展开。

即你可以在 repo 的 .hgrc 文件中 %include ，该文件位于存储库中，并要求队友在他们的 .hgrc 中进行相同的更改

**使用 Projrc 扩展**

[项目扩展](http://mercurial.selenic.com/wiki/ProjrcExtension)

> 此扩展使 Mercurial 查找并解析 .hg/projrc 以获取其他配置设置。在用户确认后，文件在克隆和拉取时传输（但从不推送），从必须由用户配置的服务器列表中传输。出于安全原因，用户还必须选择将传输哪些 projrc 配置设置

手工将添加和启用扩展和配置服务器列表和可接受的部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:02:13.357

您可以使用存储库中的 hgrc 文件来创建特定于存储库的设置，例如合并工具、扩展等。

更多信息在这里：[http ://www.selenic.com/mercurial/hgrc.5.html](http://www.selenic.com/mercurial/hgrc.5.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T10:30:30.793

您可以将示例添加`.hgrc`到存储库的根目录。当用户克隆存储库时，您不能自动应用此功能，因此您必须告诉开发人员在更新文件时复制文件。

不幸的是，您无法强制执行此操作，因此您只需要相信团队会遵守公司/项目的政策。

# zen-cart - 如何跳过输入帐户名和密码进入zencart 1.5.1中的管理页面

> ID：13438831
> 
> 赞同：0
> 
> 时间：2012-11-18T09:07:08.813
> 
> 标签：zen-cart

如何跳过输入帐户名和密码进入zencart 1.5.1中的管理页面
我在我的PC上安装了zencart 1.5.1，它仅供练习和开发。
超过时间时，zencart 会要求我输入管理员帐户名称和密码。
如何跳过此登录步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:05:07.667

Admin Keepalive Timer 插件将允许您处理“超时”问题。 [http://www.zen-cart.com/downloads.php?do=file&id=1526](http://www.zen-cart.com/downloads.php?do=file&id=1526)

# c# - 将文件写入临时路径会创建随机命名文件夹

> ID：13438832
> 
> 赞同：0
> 
> 时间：2012-11-18T09:07:31.053
> 
> 标签：c#, io

对于将数据库连接设置写入位于用户临时目录中的文件的应用程序，我有一个稍微奇怪的问题。

我使用标准调用 - GetTempPath，然后使用此路径保存文件。我构建我的应用程序并进行部署。99/100 机器工作——并将他们的文件保存在用户临时目录中，包括 XP 和 Win7 用户。

但是，我注意到一个用户（Win 7 Pro 64bit），每次程序在用户临时路径中创建连接文件时，它都会在临时目录中创建一个新文件夹（大约 5/6 个随机字符）并保存里面的文件！。这意味着每次用户重新启动应用程序时，都无法检索设置（因为无法保存上次使用的随机文件夹！），用户实际上丢失了他们的设置。所以程序只是一次又一次地在临时路径中创建新的随机文件夹。奇怪！

有没有其他人遇到过这个问题，或者有人知道这里可能发生了什么吗？我怀疑它与操作系统有关，而不是我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:05:28.197

[Path.GetTempPath](http://msdn.microsoft.com/en-us/library/system.io.path.gettemppath.aspx)仅获取临时文件的文件夹。听起来您正在使用[Path.GetTempFileName](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx)。

根据设计，第一句话说“在磁盘上创建一个**唯一**命名的**零字节**临时文件并返回该文件的完整路径。”。它不会返回已经存在的临时文件。如果您想临时设置其调用的精细函数，但请记住该函数不会返回相同的位置，除非它可以使文件零字节长。

如果您想再次访问该文件，请将设置文件放在其他地方或使用更[永久的解决方案](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)（这允许您设置默认值并在运行时更改/保存/加载）。如果您想特别懒惰，请在键盘上创建一个 guid 或混合随机字母 (sdhfuisdhfusdhc) 并将其用作硬编码文件名。例子：`Path.GetTempPath()+"sdhfuisdhfusdhc";`

# xcode4.5 - Xcode 可以一次折叠多个方法，作为一个集合吗？

> ID：13438837
> 
> 赞同：1
> 
> 时间：2012-11-18T09:08:20.460
> 
> 标签：xcode4.5, code-folding

我的课堂上有大约两千行代码，里面有近五十个方法。我知道我可以将它们分开`#pragma mark SomeMethodsSet`并看到上面跳转栏中列出的内容，但是有没有办法将每个集合**折叠**在一起，就像我可以使用单一方法一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T09:54:57.690

Command + Option + Shift + 左箭头 - 折叠所有方法 Command + Option + Shift + 右箭头 - 展开所有方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T09:19:05.263

If you hover your mouse between the place where you set a breakpoint, and the place where you write the code, you'll see an arrow pointing down. Clicking on it will hide the code.

Before:

![enter image description here](../Images/d429f18251d72883e5accbb1c9917781.png)

After:

![enter image description here](../Images/9e6ed5a88c9c66b96816207c417b3e7c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T10:11:33.380

您可以使用一些 Xcode 跳转栏魔术来更好地浏览您的代码 -> [http://mobiledevelopertips.com/xcode/xcode-4-jump-bar-tips-and-tricks.html](http://mobiledevelopertips.com/xcode/xcode-4-jump-bar-tips-and-tricks.html)

如果您发现自己在处理大型类和大量方法时遇到困难，为什么不尝试重构代码呢？将一个大类分成几个较小的类。将一些逻辑提取到新类中。尽量减少班级规模，让他们一次只做几件事。避免尝试一次解决所有问题的“神级”。

# windows-8 - win 8 c#中的lowprofileimageloader

> ID：13438839
> 
> 赞同：1
> 
> 时间：2012-11-18T09:08:58.497
> 
> 标签：windows-8

我正在开发一个 Windows 8 xaml 应用程序，它消耗来自 Web 服务的大量数据，包括图像。我想在本地缓存数据和图像，这样一旦互联网连接断开，用户仍然可以使用该应用程序。目前我在 image_opened 事件中保存图像，它会产生很多问题，比如访问被拒绝。有没有更好的方法来加载和缓存 Windows 8 中的图像，如 Windows Phone 7 中的低配置图像加载器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T23:04:32.127

查看[JetImageLoader](https://github.com/artem-zinnatullin/jet-image-loader)，我为应用程序创建了它，我们需要在其中加载、缓存和显示大量徽标、图标等。

它可以用作绑定转换器，因此*您甚至不应该更改您的代码！只需更新您的 XAML！*

请查看[存储库中的示例](https://github.com/artem-zinnatullin/jet-image-loader)，您会喜欢的；）

**特征：**

*   缓存在磁盘上
*   缓存在内存中
*   完全异步
*   可用作绑定转换器或以编程方式从您的代码中使用
*   完全开源，分叉和改进它！

这是示例：

```
<Image Source="{Binding ImageUrl, Converter={StaticResource MyAppJetImageLoaderConverter}}"/> 
```

PS我很抱歉，我从另一个问题中复制了我的答案，但是Windows手机上的图像缓存是个大问题，我想分享我的解决方案，所以每个人都可以使用它并为开发者社区改进

# c# - 将视频文件渲染为 3D

> ID：13438841
> 
> 赞同：0
> 
> 时间：2012-11-18T09:09:22.693
> 
> 标签：c#, xna-4.0

如何将像普通 wmv 文件一样的视频渲染为 3D，以便我可以根据用户的按键输入翻译、缩放或旋转视频？是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:51:19.557

好的，再次链接：

[http://www.i-programmer.info/news/105-artificial-intelligence/4917-free-library-converts-2d-image-to-3d.html](http://www.i-programmer.info/news/105-artificial-intelligence/4917-free-library-converts-2d-image-to-3d.html)

它解释了转换的工作原理，并在底部有一个下载库链接。它将静止的 2 图像或视频转换为 3d 深度图像。

# c++ - C++ 中的 DwmExtendFrameIntoClientArea

> ID：13438842
> 
> 赞同：0
> 
> 时间：2012-11-18T09:09:30.007
> 
> 标签：c++, aero, aero-glass, dwm

我有以下 C++ 代码：

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    bool fCallDWP = true;
    BOOL fDwmEnabled = FALSE;
    LRESULT lRet = 0;
    HRESULT hr = S_OK;

    MARGINS margins;

    margins.cxLeftWidth = 10;      // 8
    margins.cxRightWidth = 10;    // 8
    margins.cyBottomHeight = 10; // 20
    margins.cyTopHeight = 50;       // 27

    hr = DwmExtendFrameIntoClientArea(hWnd, &margins);
    return 0;
} 
```

但是，当我尝试编译时，出现以下错误：

但它不起作用。它不报告任何错误，但它根本不显示正确的结果。

这是我的表单打印屏幕：

![在此处输入图像描述](../Images/d67424577e5939250cd4b1203e961580.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-24T10:50:08.240

```
case WM_ACTIVATE: {
    DwmExtendFrameIntoClientArea(hWnd,&margins);
    break;
}
case WM_ERASEBKGND: {
    // I think your window's transparency key should be RGB(0,0,0)
    FillRect((HDC)wParam,&WndRect,CreateSolidBrush(RGB(0,0,0)));
    return TRUE;
} 
```

# javascript - 延迟链接 Twitter Bootstrap modal('hide')

> ID：13438844
> 
> 赞同：8
> 
> 时间：2012-11-18T09:09:49.240
> 
> 标签：javascript, jquery, twitter-bootstrap, modal-dialog

我正在显示一个简单的 Bootstrap 模式，底部有一个“结帐”按钮。

单击我想要的按钮时：

1.  关闭模态，例如 $('#myModal').modal('hide')
2.  等到动画结束
3.  将 window.location.href 更改为我的“结帐”页面。

如果没有立即运行下一个功能，我似乎无法找到一种链接方式，例如

```
$('#myModal').modal('hide').each(function() {
    window.location.href = '/checkout'; 
}); 
```

或者我认为 delay() 可能会有所帮助，例如

```
$('#myModal').modal('hide').delay(1000).each(function() {
    window.location.href = '/checkout'; 
}); 
```

这也不起作用，它只是立即更改页面。

这是一个常见的 jQuery 问题吗？还是我必须扩展 Bootstrap 来处理这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T09:18:47.167

`hidden`当 twitter 引导模式完全隐藏时，会调用一个事件。所以你可以做这样的事情：

```
$('#myModal').bind('hidden', function(){
    window.location.href = '/checkout';
}).modal('hide'); 
```

# iphone - iPhone 5 使用电池运行时 CPU 频率受到限制

> ID：13438845
> 
> 赞同：1
> 
> 时间：2012-11-18T09:09:51.517
> 
> 标签：iphone, ios, cpu, frequency, throttling

我正在开发一个 iOS 应用程序，它使用 iPhone 的 CPU 进行一些复杂的图像处理。我注意到在使用电池运行时，iPhone 5 CPU 在您按下电源开关将其从休眠状态唤醒后非常缓慢。在许多情况下，这个“热身”时间可能长达 5 分钟。通常情况下，我的应用每秒可以处理超过 28 帧，CPU 负载低于 80%。但在预热阶段，它每秒只能处理 19 帧，CPU 负载超过 95%。我能想到的唯一解释是 CPU 的频率在此预热期间受到限制。但是，如果我从 XCode 运行我的应用程序，CPU 永远不会受到限制。此外，我从未在其他 iOS 设备上看到过这样的限制。我还没有尝试过 iPad mini 或 iPad 4。

我想知道其他人是否见过相同的 CPU 行为。我可以做些什么来确保 iPhone 5 的 A6 处理器始终能够发挥这种全部功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:15:56.770

尝试以不同的方案在设备上安装您的应用程序，然后运行 ​​Instruments 以查看实际情况。

我在 iPhone 4 或 5 上没有遇到过这样的问题，在唤醒后会有某种节流期

# flash - 我怎样才能复制和编辑 Flash 图层，而不改变它们？(CS5)

> ID：13438846
> 
> 赞同：1
> 
> 时间：2012-11-18T09:10:08.290
> 
> 标签：flash, templates, copy, flash-cs5, layer

我一直在尝试复制 Flash 文件的图层并将其用作临时模板，但每当我更改图层时，模板的*每个*副本都会更改。图层中有多个影片剪辑、按钮和文本，但是当我更改实例名称（或就此而言的图层名称）时，问题仍然存在。

有没有解决的办法？我也尝试过复制框架，但即便如此，更改也会继续进行。是否可以将复制的图层与原始图层分开（一劳永逸！？）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T03:33:40.090

您很可能正在修改作为库对象实例的对象，导致库对象（以及该库对象中的所有实例）发生更改。尝试在库中制作对象的副本并改用它。您还可以选择对象，右键单击并选择“复制符号”以在库中复制它。

# javascript - Mongoose：如何替换一组子文档？

> ID：13438852
> 
> 赞同：4
> 
> 时间：2012-11-18T09:10:43.420
> 
> 标签：javascript, node.js, mongodb, mongoose, put

我已经用猫鼬建立了一个用户模式，其中包含一个子文档“联系人”。子文档“联系人”是联系人对象的集合，其中包含实际联系人（对另一个用户对象的引用）和一些与“友谊”相关的数据。

在我的前端应用程序中，我现在可以通过在我的联系人列表中添加或删除用户来管理联系人。前端将这些更改保存为对服务器的 HTTP PUT 请求。

PUT 请求包含整个用户对象，它或多或少地替换了数据库上的用户对象。不幸的是，无法替换子文档集合。您只能推送新的或删除它们。

以下是模式：

```
var UserSchema = new Mongoose.Schema({

    username: { 
        type: String, 
        index: { unique: true, sparse: true }, 
        required: true, lowercase: true, trim: true
    },

    email: {
        type: String,
        index: { unique: true, sparse: true }, 
        required: true, lowercase: true, trim: true
    },

    contacts: [ContactSchema]

});

var ContactSchema = new Mongoose.Schema({

    user: {
        ref: "User",
        type: Mongoose.Schema.ObjectId
    },

    isContact: {
        type: Boolean,
        default: true
    }

}); 
```

目前，我尝试通过删除所有联系人并在请求中添加联系人来替换联系人：

```
app.put('/me', loadUser, function(req, res, next) {
    var user = req.user;

    req.user.contacts.forEach(function(contact) {
        req.body.contacts.forEach(function(contact) {
            contact.remove();
        });
    });

    req.body.contacts.forEach(function(contact) {
        req.user.contacts.push(contact);
    });

    user.save(function(err, user) {
        if (err) return next(err);
        res.send(200);
    });
}); 
```

有人真的知道如何将这个子文档集合更新为请求中的状态吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T16:37:46.093

您可以使用 _underscore 库过滤（拒绝）要删除的对象

这是一个如何在没有 foreach 的情况下从数组中删除某些内容的示例。

```
var _und = require('underscore');

var array = [{_id:1, title:'object one'}, {_id:2, title:'object two'}, {_id:3, title: 'object three' }]
    the_target = 'object two';
    new_array = _und.reject(array, function(item){
       return item.title === target;
    }) 
```

预期的结果应该是：

```
=> [{_id:1, title:'object one'}, {_id:3, title:'object three'}] 
```

如果你知道id，那就更好了。

然后，您要做的就是通过执行以下操作清空您的子文档：

```
var mytargetarray = [];
    mytargetarray.push(new_array);
    mytargetarray.save(); 
```

如果要替换整个 subdoc 数组，为什么不直接替换它们：

```
req.user.contacts = [];
req.user.contacts.push(req.body.contacts); 
```

保存并完成。

希望那些对你有帮助。

只是一个提示，在 mongodb 中你使用对象数组，你可以简单地替换每个值：

```
// active data from database
user.name = 'test user';
// now just give the object a new value
user.name = 'new name';
// and save .. done
user.save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-25T08:28:03.200

有一种更好的方法`findOneAndUpdate`可以做到这一点。

首先，您为数组中的所有对象（将是您的子文档）创建 Mongoose 文档。然后你使用常规`findOneAndUpdate`并替换那里的子文档数组。例如：

```
const subDocumentsArray = argumentArray?.map((object) => new subDocumentModel(object));
const document = await documentModel.findOneAndUpdate(
        { _id: id },
        { subDocumentsArray },
      ); 
```

# xampp - xampp的安装

> ID：13438858
> 
> 赞同：1
> 
> 时间：2012-11-18T09:11:46.503
> 
> 标签：xampp

我刚刚在我的 windows 7 32 位操作系统上安装了 xampp。问题是 xampp 附带的 php 无法正常工作，即；我什至无法在浏览器中显示传统的“hello world”。我阅读了安装附带的“Readme.txt”文件，它读到我的 xampp 版本支持 Windows 7，但它没有指定它是 Windows 32 位还是 64 位。当我访问 apachefriends.org 时，该网站声称他们不支持 Windows 7。 apachefriends.org 上的信息显示

> " 目前有四个 XAMPP 版本：一个用于 Linux 系统的版本（针对 Ubuntu、SuSE、RedHat、Mandrake 和 Debian 测试），一个针对 Windows 2000、2003 的版本，针对 Solaris SPARC 的 XP 和 Vista beta 版本（在Solaris 8)，以及 Mac OS X 的测试版。”

如果有人在 Windows 7 32bit 上安装了 xampp 并且工作正常。请提供链接以便我安装它。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:58:23.860

恕我直言，您正在浏览器中输入*hello.php的完整路径，或者您的**hello.php*可能不在*htdocs*下或您的 web 目录下。

您需要输入类似`http://localhost/hello.php`或`http://127.0.0.1/hello.php`

# jetty - 基于单独 OSGi 包的动态 Camel 路由生成

> ID：13438862
> 
> 赞同：1
> 
> 时间：2012-11-18T09:12:16.663
> 
> 标签：jetty, osgi, apache-camel

**短版：** 有没有办法让多个 Camel 路由，在单独的 OSGi 包（带有支持进程）中共享/合并到一个单独`CamelContext`的包中，以便单个 Jetty 服务器可以将传入的请求路由到单独的包？

**背景：** 这是一个假设的要求，因为真正的要求是保密的......

我正在为一个网站构建一个模块化的API后端，第一阶段实现简单的客户注册，第二阶段将实现类似论坛的系统，第三阶段将实现类似wiki的系统。随着每个系统完成开发，我需要能够将新系统添加到 API 后端，而无需修改其他组件或（理想情况下）使系统脱机。

在尝试实现这样的事情时，我想将每个 API 系统放在它自己的 OSGi 包中，并使用 Camel 和 Jetty 来处理传入的 API 请求，每个系统将在 jetty 基本 URL 下注册一个路径并接收发往它的消息来自骆驼路由机制。我在这个设计中遇到了麻烦，因为如果我在每个包中配置一个路由，它们在单独`CamelContext`的 s 中运行，所以第一个包运行，但第二个包尝试在同一端口上生成另一个 Jetty 服务器，但失败了。

然后，我创建了一个 OSGi 服务，该服务将采用 a`RouteBuilder`并将其添加到现有的“主” `CamelContext`( `suspend`, `addRoutes`, `resume`) 中。这不起作用，因为主`CamelContext`服务器在单独的 API 包中看不到服务/进程。它也不允许基于 XML 的配置。

我对解决问题的不同方法持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T07:20:39.983

只需使用 servlet 组件而不是 jetty 组件。它可以向 OSGi HTTPService 注册一个 servlet。然后所有的 servlet 路由都使用这个 servlet 并且可以注册自己的子路径。这适用于捆绑包，应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:52:51.253

啊，是的，我想有点棘手。

在您的客户端捆绑包中，我假设您可以使用 OSGi 服务注册表为具有路由的 RouteBuilder 类导出服务。

例如，使用蓝图 xml 文件，您可以将这些路由构建器导出为 OSGi 服务。然后在与 Camel 上下文的捆绑包中，您可以引用这些服务，然后您可以从 CamelContext 引用

```
<!-- osgi references goes here -->

<camelContext ...>
  <routeBulderRef ref="myClientRoute"/>
  <routeBulderRef ref="myOtherClientRoute"/>
   ...
</camelContext> 
```

如果您想为您的客户端路由使用 XML DSL，那么这可能会有点棘手。您可以`<routeContext id="myClientRoute">`在蓝图中使用 XML 文件。虽然如何将其导出为 OSGi 服务可能很棘手。

也许我们可以通过某种方式将`<routeContext>`自己注册为 OSGi 服务。我们这样做是为了`<camelContext`>。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T08:58:56.967

是的，在 OSGi 中，如果您使用相同的端口号，Jetty 服务器将在 Camel 包之间共享。这允许您在单独的包中安装新的 Camel 路由，并让它们每个都有自己的生命周期，因此您可以根据需要安装/卸载包。

是的，正如 Christian 也说你可以使用 camel-servlet 代替。然后它使用 OSGi HTTP 服务。Apache ServiceMix / Karaf 使用 Jetty 作为 servlet 容器实现。你可以在ServiceMix/Karaf的etc目录下的配置文件中配置它的jetty配置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T04:13:32.160

使用相同的端口号就可以了。

这就提出了另一个问题：

如果码头是共享的，我们如何控制最小/最大线程。

例子：

在 routeA.xml 中：

```
<from uri="jetty:http://0.0.0.0:9191/proxy/serviceA/?maxThread=20">
... 
```

在 routeB.xml 中：

```
<from uri="jetty:http://0.0.0.0:9191/proxy/serviceB/?maxThread=50">
... 
```

哪个配置会生效？

# transitive-closure-table - 寻找图的传递闭包

> ID：13438865
> 
> 赞同：2
> 
> 时间：2012-11-18T09:13:28.517
> 
> 标签：transitive-closure-table, transitive-closure

我正在尝试计算图的传递闭包。让我们以这个图为例（图片描述了这个图，它的邻接和连接矩阵）： ![在此处输入图像描述](../Images/86f6f0a21b59724523bb1b9ca1a13f61.png)

[使用我在此](http://datastructures.itgo.com/graphs/transclosure.htm)页面上找到的 Warshall 算法，我生成了这个连接矩阵（=传递闭包？），这与图片中的不同：

```
 01111
 01111
 01011
 01111
 01111 
```

我也尝试过使用[这个](http://www.cs.nmsu.edu/~ipivkina/TransClosure/index.html)小程序，它也给了我不同的结果：

```
01111
01111
01111
01111
01111 
```

所以我现在有点困惑，因为我不知道哪个矩阵是正确的。有人可以阐明我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T09:39:13.313

C(1,1)：C(1,1) 处的字母 T 表示 A 的对角线上应该有 T。

C(3,3)：一轮 Warshall 算法似乎只找到深度为 2 的可达节点。由于从自身到达节点 3 需要三个边，因此一轮是不够的。

# xslt-1.0 - 使用 XSLT 1.0 将平面 XML 结构更改为嵌套结构

> ID：13438866
> 
> 赞同：0
> 
> 时间：2012-11-18T09:13:34.990
> 
> 标签：xslt-1.0

我需要根据源 xml 中的employeeNumber 值分组将平面 xml 结构转换为嵌套 xml 结构。我在 xsl:key 的帮助下使用 xslt 1.0 进行了尝试，但它无法正常工作。请帮我解决问题。提前致谢。

输入xml

```
<XxhrPiEmpcompOutIntCollection>
          <XxhrPiEmpcompOutInt>
            <employeeNumber>
                200000562
            </employeeNumber>
            <competencyName>
                Comp1
            </competencyName>
            <proficiencyLevel>
                Prof1
            </proficiencyLevel>
            <compDateTo>
                16-NOV-12
            </compDateTo>
          </XxhrPiEmpcompOutInt>

           <XxhrPiEmpcompOutInt>
            <employeeNumber>
                200000562
            </employeeNumber>
            <competencyName>
                Comp2
            </competencyName>
            <proficiencyLevel>
                Prof2
            </proficiencyLevel>
            <compDateTo>
                16-NOV-12
            </compDateTo>
          </XxhrPiEmpcompOutInt>
          <XxhrPiEmpcompOutInt>
            <employeeNumber>
                200000574
            </employeeNumber>
            <competencyName>
                Comp2
            </competencyName>
            <proficiencyLevel>
                Prof2
            </proficiencyLevel>
            <compDateTo>
                16-NOV-12
            </compDateTo>
          </XxhrPiEmpcompOutInt>

        </XxhrPiEmpcompOutIntCollection> 
```

目标 xml

```
<EmployeeCompetencyRequest>
        <EmployeeNumber>200000562</EmployeeNumber>
        <Competencies>
            <Competency>
                <Name>Comp1</Name>
                <ProficiencyLevel>Prof1</ProficiencyLevel>
                <EndDate>16-NOV-12</EndDate>
            </Competency>
            <Competency>
                <Name>Comp2</Name>
                <ProficiencyLevel>Prof2</ProficiencyLevel>
                <EndDate>16-NOV-12</EndDate>
            </Competency>
        </Competencies>
        <EmployeeNumber>200000574</EmployeeNumber>
            <Competencies>
                <Competency>
                    <Name>Comp2</Name>
                    <ProficiencyLevel>Prof2</ProficiencyLevel>
                    <EndDate>16-NOV-12</EndDate>
                </Competency>
        </Competencies>
    </<EmployeeCompetencyRequest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:22:58.117

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kOutIntByENum" match="XxhrPiEmpcompOutInt" use="employeeNumber"/>

 <xsl:template match="/*">
  <EmployeeCompetencyRequest><xsl:apply-templates/></EmployeeCompetencyRequest>
 </xsl:template>    

 <xsl:template match=
 "XxhrPiEmpcompOutInt
   [generate-id()
   =
    generate-id(key('kOutIntByENum', employeeNumber)[1])]">
  <EmployeeNumber>
    <xsl:value-of select="normalize-space(employeeNumber)"/>
  </EmployeeNumber>
  <Competencies>
    <xsl:apply-templates mode="comp"
         select="key('kOutIntByENum', employeeNumber)"/>
  </Competencies>
 </xsl:template>

 <xsl:template match="XxhrPiEmpcompOutInt" mode="comp">
  <Competency>
   <xsl:apply-templates mode="comp" select="*[not(self::employeeNumber)]"/>
  </Competency>
 </xsl:template>

 <xsl:template match="competencyName" mode="comp">
   <Name><xsl:value-of select="normalize-space(.)"/></Name>
 </xsl:template>
 <xsl:template match="proficiencyLevel" mode="comp">
   <ProficiencyLevel><xsl:value-of select="normalize-space(.)"/></ProficiencyLevel>
 </xsl:template>
 <xsl:template match="compDateTo" mode="comp">
   <EndDate><xsl:value-of select="normalize-space(.)"/></EndDate>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<XxhrPiEmpcompOutIntCollection>
          <XxhrPiEmpcompOutInt>
            <employeeNumber>
                200000562
            </employeeNumber>
            <competencyName>
                Comp1
            </competencyName>
            <proficiencyLevel>
                Prof1
            </proficiencyLevel>
            <compDateTo>
                16-NOV-12
            </compDateTo>
          </XxhrPiEmpcompOutInt>

           <XxhrPiEmpcompOutInt>
            <employeeNumber>
                200000562
            </employeeNumber>
            <competencyName>
                Comp2
            </competencyName>
            <proficiencyLevel>
                Prof2
            </proficiencyLevel>
            <compDateTo>
                16-NOV-12
            </compDateTo>
          </XxhrPiEmpcompOutInt>
          <XxhrPiEmpcompOutInt>
            <employeeNumber>
                200000574
            </employeeNumber>
            <competencyName>
                Comp2
            </competencyName>
            <proficiencyLevel>
                Prof2
            </proficiencyLevel>
            <compDateTo>
                16-NOV-12
            </compDateTo>
          </XxhrPiEmpcompOutInt>
</XxhrPiEmpcompOutIntCollection> 
```

**产生想要的正确结果：**

```
<EmployeeCompetencyRequest>
   <EmployeeNumber>200000562</EmployeeNumber>
   <Competencies>
      <Competency>
         <Name>Comp1</Name>
         <ProficiencyLevel>Prof1</ProficiencyLevel>
         <EndDate>16-NOV-12</EndDate>
      </Competency>
      <Competency>
         <Name>Comp2</Name>
         <ProficiencyLevel>Prof2</ProficiencyLevel>
         <EndDate>16-NOV-12</EndDate>
      </Competency>
   </Competencies>
   <EmployeeNumber>200000574</EmployeeNumber>
   <Competencies>
      <Competency>
         <Name>Comp2</Name>
         <ProficiencyLevel>Prof2</ProficiencyLevel>
         <EndDate>16-NOV-12</EndDate>
      </Competency>
   </Competencies>
</EmployeeCompetencyRequest> 
```

**说明**：

正确使用**[孟池分组方法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**和**[模式](http://www.w3.org/TR/1999/REC-xslt-19991116#modes)**。

# c++ - 使用自定义光标强制 WM_NCHITTEST 返回 HTCAPTION..？

> ID：13438867
> 
> 赞同：3
> 
> 时间：2012-11-18T09:13:48.507
> 
> 标签：c++, winapi, user-interface, cursor, message

我创建了一个无边框窗口，它使用一个强制返回的`wndProc()`函数，它允许用户拖动窗口，无论他的光标位于何处。 问题是我已经设置了一个自定义光标，但是使用上述方法，光标总是设置回. 我该如何解决？ 编辑：我也试过在 中使用，但没有用。`WM_NCHITTEST case``HTCAPTION;`
`IDC_ARROW`

`SetCursor()``WM_NCHITTEST case`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T00:28:15.973

您可以使用 WM_SETCURSOR 消息来覆盖光标。lParam 的 LOWORD 表示命中测试代码，即您使用 WM_NCHITTEST 处理程序更改的代码。这很好用：

```
static HCURSOR CustomCursor;

LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch (message)
    {
    case WM_NCHITTEST: {
        LRESULT result = DefWindowProc(hWnd, message, wParam, lParam);
        if (result == HTCLIENT) result = HTCAPTION;             
        return result;
    }
    case WM_SETCURSOR: 
        if (LOWORD(lParam) == HTCAPTION) {
            SetCursor(CustomCursor);
            return TRUE;
        }
        return DefWindowProc(hWnd, message, wParam, lParam);
    // etc...
} 
```

在您的窗口初始化中初始化 CustomCursor。说：

```
CustomCursor = LoadCursor(hInstance, MAKEINTRESOURCE(IDC_SIZEALL)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:04:04.850

通常设置游标的正确方法是响应`WM_SETCURSOR`消息。（另见[http://blogs.msdn.com/b/oldnewthing/archive/2005/05/25/421707.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/25/421707.aspx)）

但是，如果您正在处理捕获鼠标的鼠标拖动，您的窗口将不会收到`WM_SETCURSOR`消息，我认为唯一的选择是在`WM_MOUSEMOVE`这种情况下在处理程序中设置光标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T09:50:33.463

除了`SetCursor`in `WM_NCHITTEST`try to `SetCursor`in`WM_SETCURSOR`太。

# java - Log4j2 - 配置

> ID：13438871
> 
> 赞同：31
> 
> 时间：2012-11-18T09:15:23.840
> 
> 标签：java, logging, configuration, log4j, log4j2

我试图在我的新项目中采用 Log4j2，但我登录了`catalina.out`，第一个总是：`ERROR StatusLogger Unable to locate a logging implementation, using SimpleLogger`。似乎我已经根据 Log4j2 文档完成了所有工作，但仍然如此。

这是我实际所做的：

1.  添加`log4j-api-2.0-beta3.jar`到我的项目中
2.  创建了一个`log4j2.xml`文件并将其放在类路径上的位置（当前，在`/usr/local/tomcat/home/lib`. 事实上，我从 Log4J2 网页中获取了一个示例文件。
3.  重新启动tomcat。

我正在使用 Tomcat 7、MacOS X 10.8、Java 7。

我错过了什么？

以防万一，这是我正在使用的 log4j2.xml：

```
`<?xml version="1.0" encoding="UTF-8"?>
<configuration status="warn" name="MyApp" packages="">
  <appenders>
    <File name="MyFile" fileName="logs/app.log">
      <PatternLayout>
        <pattern>%d %p %C{1.} [%t] %m%n</pattern>
      </PatternLayout>
    </File>
  </appenders>
  <loggers>
    <root level="trace">
      <appender-ref ref="MyFile"/>
    </root>
  </loggers>
</configuration>` 
```

* * *

 `## 回答 #1

> 赞同：37
> 
> 时间：2012-11-18T16:30:42.693

我有同样的问题。在将**log4j-core-2.0-beta3.jar**也添加到它工作的类路径之后。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-08-19T07:59:13.100

在**Maven**中，您通常具有以下日志记录配置：

```
<properties>    
    <slf4j-version>1.7.7</slf4j-version>
    <slf4j-log4j2-version>2.0.1</slf4j-log4j2-version>
</properties>

<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>${slf4j-version}</version>
</dependency>

<dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-slf4j-impl</artifactId>
    <version>${slf4j-log4j2-version}</version>
</dependency> 
```

要添加日志核心库，您必须：

1.  将 2.0.1 添加到属性部分
2.  添加日志核心依赖：

    ```
    <dependency>
        <groupId>org.apache.logging.log4j</groupId>
        <artifactId>log4j-core</artifactId>
        <version>${log4j2-version}</version>
    </dependency> 
    ```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-02T03:54:56.603

![新图标](../Images/066f0684bfb088a628ef7a460479e77c.png)更新到 2.7 版本

将下一个 jar 添加到您的项目中：

*   [`log4j-api-2.7.jar`](http://search.maven.org/remotecontent?filepath=org/apache/logging/log4j/log4j-api/2.7/log4j-api-2.7.jar)
*   [`log4j-core-2.7.jar`](http://search.maven.org/remotecontent?filepath=org/apache/logging/log4j/log4j-core/2.7/log4j-core-2.7.jar)

如果您使用的是 Maven，请添加依赖项：

```
<dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-core</artifactId>
    <version>2.7</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-07T14:52:16.523

我使用 log4j2.8.2 并通过将 log4j2.xml 放入 Web 类文件夹 (WEB-INF/classes/log4j2.xml) 来成功自动配置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-25T05:19:03.340

如果是 maven 项目，则必须添加以下依赖项，

```
<dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-core</artifactId>
    <version>2.17.1</version>
</dependency>
<dependency>
    <groupId>org.apache.logging.log4j</groupId>
    <artifactId>log4j-api</artifactId>
    <version>2.17.1</version>
</dependency> 
```

log4j2.xml 或 log4j2.properties 文件应该在 src/main/resources 文件夹下。在这种情况下，您不需要在类路径中显式添加文件夹或 jar。它应该可以解决问题。`

# java - java中同步（expr）{}中expr的意义

> ID：13438873
> 
> 赞同：2
> 
> 时间：2012-11-18T09:15:42.263
> 
> 标签：java, multithreading, synchronization

据我了解，我们在java中使用“同步语句”来阻止多个线程之间的干扰。

现在我试图理解 expr 在以下表达式中的意义。

同步（expr）{语句}

因为看起来锁定行为取决于 expr 对象。

例如

```
public class Sync extends Thread {
    static int [] arr = {0,1,2};
    Object lock = new Object();
    public static void main(String[] args){

        Sync ob1 = new Sync();
        Sync ob2 = new Sync();
        ob1.start();
        ob2.start();

    }
    @Override
    public void run() {
        synchronized (arr) {
            for(int i = 0;i < arr.length; ++i){
                try {

                    Thread.sleep(500);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println(Thread.currentThread().getName() + " "  + arr[i]);

            }
        }

    }
} 
```

现在在上面的示例中，当我在同步语句（同步（arr））中使用“arr”对象时，我得到了一致的预期输出，如下所示。
线程 0 0
线程 0 1
线程 0 2
线程 1 0
线程 1 1
线程 1 2

但是当我在同步语句（同步（锁定））中使用“锁定”对象时，我得到如下输出。

线程 0 0
线程 1 0
线程 0 1
线程 1 1
线程 0 2
线程 1 2

两种情况下的输出不应该相同。

谢谢，
山塔努

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T09:20:35.293

`arr Object`本质上是静态的，所以两个线程共享相同的 arr，以防锁`instance object`在两个线程中有两个不同的实例。

因此，当您在此处与 arr 对象同步时，任何首先进入持有锁`arr object`并将完成其执行的块的线程将等待直到第一个线程完成或释放锁。

如果锁对象是完整的两个不同的对象（两个资源），因此每个线程持有不同资源或对象的锁，因此执行将是并行的。

# functional-programming - 计算列表中的原子和列表

> ID：13438874
> 
> 赞同：-1
> 
> 时间：2012-11-18T09:15:50.780
> 
> 标签：functional-programming, lisp, common-lisp

我正在尝试编写一个函数来计算列表上层的原子数。例如，如果我有一个 `'(a b ((a) c) e)`，它应该返回 3，这意味着上层有 3 个原子。

我还想创建一个计算列表中子列表数量的函数。第二个函数应该从上下每个级别计算。如果我们有`'(a ((b) s))`，如果子列表在上层，它应该返回 1，如果函数从上层到下层或列表的任何层计数，它应该返回 2。

我下面的代码计算了列表中的原子数，这是我不想要的。我该如何解决？以及如何编码其他功能？

```
(defun count-atoms(L)
  (cond
    ((null l) 0)
    ((atom l) 1)
    (t (+ (count-atoms (car l))
          (count-atoms (cdr l)))))) 
```

如果我运行上面的代码，让我们说

```
(count-atoms '(a b ((a) c) e)) 
```

它给了我 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:10:22.807

您的代码递归地查看每一个`(car l)`，直到它是一个原子，所以每个项目都被计算在内。

这应该有效：

```
(defun count-atoms(l)
  (cond
    ((null l) 0)
    (t (+ (cond
            ((atom (car l)) 1)
            (t 0))
          (count-atoms (cdr l)))))) 
```

# ruby-on-rails - 如何在 Rails SASS 中动态导入文件？

> ID：13438881
> 
> 赞同：1
> 
> 时间：2012-11-18T09:16:59.897
> 
> 标签：ruby-on-rails, ruby, sass

这可以动态加载 SASS 文件吗？

假设我在 Rails Initializer 中声明了一个全局常量`BRAND`。我想要的是，导入一个在常量中指定的名称的 SASS 文件`BRAND`。

我想要像`@import BRAND`“application.sass”这样的东西。请告诉我怎么可能。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:47:12.013

您可以将多个预处理器与资产管道一起使用，从而`ERB`在 SASS 处理器发挥作用之前使用。为此，只需附加`.erb`到要预处理的文件的文件名。例如：

配置/初始化程序/brand.rb：

```
BRAND = 'mybrand' 
```

应用程序/资产/样式表/_mybrand.css.scss：

```
$brand-color: steelblue; 
```

应用程序/资产/样式表/main.css.scss.erb：

```
@import '<%= BRAND %>';

body {
  background: $brand-color;
} 
```

## 编辑

顺便说一句，在`require`使用 SASS 时，您不应该使用 Sprockets 的指令，正如[Asset Pipeline 上的 Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives)所建议的那样：

> 如果你想使用多个 Sass 文件，你通常应该使用 Sass @import 规则而不是这些 Sprockets 指令。使用 Sprockets 指令，所有 Sass 文件都存在于它们自己的范围内，使变量或 mixin 仅在定义它们的文档中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:29:18.247

您可以在您的 (haml) 布局文件中执行此操作，如下所示：

```
= stylesheet_link_tag BRAND, :media => 'all' 
```

（或者如果您使用的是 ERB，则使用额外的 <% %>）。

# php - FQL - 选择有足够照片权限的朋友

> ID：13438882
> 
> 赞同：0
> 
> 时间：2012-11-18T09:17:21.797
> 
> 标签：php, facebook-graph-api, facebook-fql

我正在运行一个应用程序，该应用程序可根据用户请求清除您朋友的所有照片。一切顺利，除了可能 35% 的 FB 用户已将他们的照片设置为应用程序无法访问。（或者至少我认为这是正在发生的事情——我知道有照片和相册的用户没有显示照片和空相册）

那么我的问题是 1.5 部分：这是实际发生的情况吗？我应该使用哪种 FQL 查询来获取过滤后的朋友列表，该列表仅显示您可以访问的照片的朋友？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:06:57.317

我对此完全不确定，但我认为一个不错的起点是

```
SELECT friends_photos FROM permissions WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

这是一个多查询，它抓取朋友，然后查询他们以查看他们是否允许访问。

# .net - 您如何在 Monodevelop 中构建“发布”配置？

> ID：13438885
> 
> 赞同：2
> 
> 时间：2012-11-18T09:17:42.117
> 
> 标签：.net, build, monodevelop, buildconfiguration

创建 Monodevelop 项目时，或打开典型的 Visual Studio 项目时，有 2 种构建配置：“调试”和“发布”。

默认值为“Debug”，从 Build 菜单构建仅运行 Debug 构建。

这应该是一项微不足道的任务，但我看不到构建不同构建配置的选项（在菜单或项目或解决方案设置中，没有彻底删除“调试”配置）。如何构建“发布”配置？

(The "Configuration" dropdowns in the project and solution settings actually act as tabs; they don't change the default.) I [searched for "build configuration" in the Monodevelop documentation](http://monodevelop.com/Special%3aSearch?search=%22build+configuration%22&type=fulltext) , but nothing relevant came up.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:31:55.273

您正在运行哪个版本的 MonoDevelop？

在我的 Mac 上，我正在运行 MonoDevelop 的 2.8.8.4 版本。菜单项：

“Project > Active Configuration”显示两个选项：Debug | x86 和发布 | x86。如果您选中“Release | x86”选项，您将构建“Release”版本。此选择反映在“工具栏”中心的“旋转框”中。当我选择“调试”或“发布”时，它会发生变化。您也可以在此“旋转框”中更改它。

我只是检查以确保，但是在我构建了我的项目之后，我得到了新的“发布”文件。

也许您必须更新或重新安装 MonoDevelop？这个功能一直对我有用。

我希望这可以帮助你。干杯！

# android - Android上的WeakReference有什么问题吗？

> ID：13438887
> 
> 赞同：1
> 
> 时间：2012-11-18T09:17:52.553
> 
> 标签：android, garbage-collection, weak-references

我想转移一个 Object throw intent ，但该对象没有实现 Serializable 或 parcelable。所以我意识到它是这样的：

```
private static Map<String, WeakReference<Object>> map = new HashMap<String, WeakReference<Object>>();

public static void saveObjectInIntent(Intent intent, String key,
        Object value) {
    String realKey = randomString();
    map.put(realKey, new WeakReference<Object>(value));
    if (intent != null) {
        intent.putExtra(key, realKey);
    }
}

public static Object getObjectFromIntent(Intent intent, String key) {
    String realKey = intent.getStringExtra(key);
    WeakReference<Object> weak = map.get(realKey);
    if (weak != null) {
        return weak.get();
    }
    return null;
} 
```

但是我发现即使活动完成了，弱引用中的对象也不会被gc回收。

所以我写了一个这样的测试：

```
Object obj = new Object();
ObjectTrsnferHelper.saveObjectInIntent(null, "a", obj);
obj = null; 
```

obj 也没有被回收。

为什么 ？

* * *

抱歉，没有问题。但我之前写错了我的测试代码。

它应该是 ：

```
Set<String> keys = map.keySet();
for (String key : keys) {
    WeakReference<Object> weak = map.get(key);
    if (weak.get() == null) {
        App.log(key + "被清除了");
    }
} 
```

我之前写过“if(weak==null)”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:30:34.020

在 Java 中，您对垃圾收集没有太多控制权。即使调用 System.gc()，也不能指望垃圾收集器在语句结束时运行。

通常，垃圾收集发生在方法的末尾。但是，仍然不需要它在每种方法上运行。

此外，正在完成的活动并不意味着它现在将被垃圾收集。这两件事是完全不同的。例如，如果您保留一个静态字段并将其设置为您的活动实例（这是一个非常糟糕的主意，孩子们不要这样做！！），该活动将永远不会被垃圾收集。

但在全球范围内，我不明白你想要实现什么。如果您的对象不可分割也不可序列化，您就不能在意图中使用它。Intent 是用来抵抗垃圾收集的，它们需要被序列化，它们被 Android 序列化。没有解决方法。

此外，意图还被设计为通过进程间通信传递参数，这只能发生，因为它们是完全可序列化的。

真的，你不能用那种方式做你想做的事。如果要在活动之间共享对象，请将其设为可序列化或可打包。另一种选择是将其存储在应用程序类中，因为两个活动都可以使用 getApplication 访问它。

# javascript - 循环碰撞中的“粘在一起”

> ID：13438891
> 
> 赞同：2
> 
> 时间：2012-11-18T09:18:28.280
> 
> 标签：javascript, html, collision-detection, geometry

我的碰撞测试中有以下代码：

```
if (Math.pow(A.x - B.x, 2) + Math.pow(A.y - B.y, 2) <= Math.pow(A.radius + B.radius, 2)) {
    A.x_vel = (A.x_vel * (A.mass - B.mass) + (2 * B.mass * B.x_vel)) / (A.mass + B.mass);
    A.y_vel = (A.y_vel * (A.mass - B.mass) + (2 * B.mass * B.y_vel)) / (A.mass + B.mass);
    B.x_vel = (B.x_vel * (B.mass - A.mass) + (2 * A.mass * A.x_vel)) / (A.mass + B.mass);
    B.y_vel = (B.y_vel * (B.mass - A.mass) + (2 * A.mass * A.y_vel)) / (A.mass + B.mass);
    A.x = A.x + A.x_vel;
    A.y = A.y + A.y_vel;
    B.x = B.x + B.x_vel;
    B.y = B.y + B.y_vel;
} 
```

结果是圆圈粘在一起。我该如何解决这个问题？演示在[http://jsfiddle.net/tLpEV/3/](http://jsfiddle.net/tLpEV/3/)（全屏： http: [//fiddle.jshell.net/tLpEV/3/show/](http://fiddle.jshell.net/tLpEV/3/show/)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:25:14.970

您首先更改 A 的速度，然后使用更改后的速度计算 B 的新速度。您需要使用 A 的原始速度，因此将 A 的新速度存储在临时变量中，直到您计算出速度乙：

```
var ax = (A.x_vel * (A.mass - B.mass) + (2 * B.mass * B.x_vel)) / (A.mass + B.mass);
var ay = (A.y_vel * (A.mass - B.mass) + (2 * B.mass * B.y_vel)) / (A.mass + B.mass);
B.x_vel = (B.x_vel * (B.mass - A.mass) + (2 * A.mass * A.x_vel)) / (A.mass + B.mass);
B.y_vel = (B.y_vel * (B.mass - A.mass) + (2 * A.mass * A.y_vel)) / (A.mass + B.mass);
A.x_vel = ax;
A.y_vel = ay;
A.x = A.x + A.x_vel;
A.y = A.y + A.y_vel;
B.x = B.x + B.x_vel;
B.y = B.y + B.y_vel; 
```

演示：http: [//jsfiddle.net/Guffa/tLpEV/4/](http://jsfiddle.net/Guffa/tLpEV/4/)

# android - Opencv fullscreen using CameraBridgeViewBase android

> ID：13438897
> 
> 赞同：1
> 
> 时间：2012-11-18T09:19:24.723
> 
> 标签：android, opencv, fullscreen

i am trying to set up Opencv on android using the given tutorials as the base. i havenot been able to control the video size on the screen, i want to enlarge it to full screen. i am using the CameraBridgeViewBase object as the VideoCapture object does not work. does anyone know how to set up the picture to be full screen?

relevant code:

```
public class Sample3Native extends Activity implements CvCameraViewListener {
private static final String TAG = "OCVSample::Activity";

private Mat                    mRgba;
private Mat                    mGrayMat;
private Mat                    mFinalMat;

public CameraBridgeViewBase   mOpenCvCameraView;

private BaseLoaderCallback     mLoaderCallback = new BaseLoaderCallback(this) {
    @Override
    public void onManagerConnected(int status) {

        switch (status) {
            case LoaderCallbackInterface.SUCCESS:
            {
                Log.i(TAG, "OpenCV loaded successfully");

                mOpenCvCameraView.enableView();

            } break;
            default:
            {
                super.onManagerConnected(status);
            } break;
        }
    }
};

public Sample3Native() {
    Log.i(TAG, "Instantiated new " + this.getClass());
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    Log.i(TAG, "called onCreate");
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    setContentView(R.layout.tutorial3_surface_view);

    mOpenCvCameraView = (CameraBridgeViewBase) findViewById(R.id.tutorial4_activity_surface_view);
    mOpenCvCameraView.setCvCameraViewListener(this);

} 
```

any help would be much appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-20T05:02:57.770

我按照这些步骤让它工作了。

1.  删除 ActionBar - 转到值/样式并更改

    样式名称="AppTheme" 父="Theme.AppCompat.Light.DarkActionBar"

    至

    样式名称="AppTheme" 父="Theme.AppCompat.NoActionBar"

2.  设置最大帧大小 - 使用此代码设置帧大小。

    mOpenCvCameraView.setMaxFrameSize(720, 480);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T15:35:13.407

您需要在 Android 清单文件中将活动主题设置为全屏。在您的活动中添加 android:theme="@android:style/Theme.NoTitleBar.Fullscreen"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T17:47:30.787

对于仍在寻找这个的人，我已经解决了这个问题（有点）。我似乎无法让它适用于 OpenCV v 2.4.3。我已经尝试了互联网上的所有内容。但是，在 OpenCV 2.4.3.2 中，他们添加了一种设置相机尺寸的方法

```
disconnectCamera();
mMaxHeight = //your desired height
mMaxWidth = //your desired width
connectCamera(mMaxWidth, mMaxHeight); 
```

查看 OpenCV 教程 5，特别是 SampleJavaCameraView -> setResolution 方法

# c - 当 C 中没有足够的内存用于静态分配时会发生什么？

> ID：13438900
> 
> 赞同：4
> 
> 时间：2012-11-18T09:19:45.937
> 
> 标签：c, memory-management, static-memory-allocation

当您动态分配内存时，例如，如果没有足够的内存可用于满足请求，则`malloc(1024 * sizeof(char))`结果指针设置为。`NULL`

当没有足够的内存来满足静态分配时会发生什么`char c[1024]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T10:44:10.837

`char c[1024]`不一定是静态分配，它是静态的还是自动的，取决于声明是写在函数体内（没有`static`修饰符）还是在顶层。

静态分配不会在运行时失败，因为分配空间是在程序执行时保留的。如果无法保留足够的内存，程序将无法加载（`exec*`在 Unix 上将失败）。在病态的情况下，内存可能会被操作系统过度使用，系统只会在访问时保留它。在这种情况下，分配失败将导致进程立即被系统[杀死](http://lwn.net/Articles/317814/)。

自动分配只是简单地向下移动堆栈的边缘，通常是通过递减堆栈指针寄存器。（这就是局部变量分配如此之快的原因。）AC 程序没有可移植的机制来检测堆栈已经变得太大。一旦 MMU 检测到您已通过分配的限制，某些操作系统会自动增大堆栈；Linux 对主线程执行此操作，但不会对进程中的其他线程执行此操作。即便如此，足够的堆栈分配迟早会超过系统限制，或者会耗尽系统的内存，程序将失败。

根据系统的不同，程序要么立即因分段错误而失败，要么因堆栈和堆开始相遇时发生的内存损坏而死亡。

# javascript - 在 ExtJS 4 中创建（检查是否存在）选项卡的新方法

> ID：13438903
> 
> 赞同：2
> 
> 时间：2012-11-18T09:20:29.303
> 
> 标签：javascript, extjs

我看到了很多有关该`find`功能的示例，但现在当我使用最新版本（我认为是 4.1.1a）时，它说 find 功能已被弃用。

我有这个：

```
init: function(){
  this.control({
    'mainMenuTree': {
      itemdblclick: this.itemdblclicked
    }
  });
  this.callParent();
},

itemdblclicked: function itemdblclicked(me, record, item, index, e, eOpts){
  var itemClicked = record.getData().text;
  var tabPanel = Ext.getCmp('centerPanel');
  //var tabBar = tabPanel.getTabBar();
  tabPanel.add({
    xtype: 'tab',
    title: itemClicked,
    id: itemClicked
  });
  //tabPanel.items.find(function(i){console.log(i)});
  //console.log(tabPanel.items);
} 
```

因此，我需要获取一组选项卡来检查选项卡是否存在。我不需要逻辑，我只需要函数或属性的名称来获取项目数组（每个选项卡的 id）。

谢谢你。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:26:32.980

我自己做的。：） 不管怎么说，还是要谢谢你。:)

```
itemdblclicked: function itemdblclicked(me, record, item, index, e, eOpts){
        var itemClicked = record.getData().text;
        var tabPanel = Ext.getCmp('centerPanel');
        //var tabBar = tabPanel.getTabBar();

        var items = tabPanel.items.items;

        var exist = false;
        for(var i = 0; i < items.length; i++){
            if(items[i].id === itemClicked){
                tabPanel.setActiveTab(i);
                exist = true;
            }
        }
        if(!exist){
            tabPanel.add({
                xtype: 'panel',
                title: itemClicked,
                id: itemClicked,
                closable: true
            });
        }
    } 
```

# clojure - Clojure 是否遵循 Common Lisp 标准？

> ID：13438907
> 
> 赞同：1
> 
> 时间：2012-11-18T09:21:20.610
> 
> 标签：clojure, lisp, standards, common-lisp, dialect

我最近发现，如果遵循 Common Lisp 标准，我可以在学校的函数式编程课程中使用任何 Lisp 方言。Clojure 是否遵循此标准？是不是太不一样了？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-18T10:01:17.783

Clojure 不遵循 Common Lisp 标准——它是一个全新的 Lisp。

话虽如此，它与 Common Lisp 共享很多东西，因此从其中获得的知识将普遍适用于另一个。

许多关键的事情是相同的：

*   **通过将函数放在列表的开头，后跟其参数来**应用函数：**`(my-function arg1 arg2)`**
***   **“代码就是数据”** - 代码以**同音**形式表示，也是 Lisp 数据结构*   两者都有强大的**宏系统**——你可以编写函数来生成任意代码*   它们是**动态**语言，*   两者都强调使用**REPL****进行交互式开发*****   它们通常都是**编译的******

 ****一些不同的东西：

*   Clojure 更加强调**函数式编程**——所有数据结构都是不可变的，核心库主要由“纯”函数组成。注意：你仍然可以在 Common Lisp 中使用函数式风格，Clojure 只是把它放在最前面
*   Clojure 是**Lisp-1**（就像 Scheme 函数和数据共享相同的命名空间），而 Common Lisp 是**Lisp-2**（函数和数据具有不同的命名空间）
*   除了传统的 Lisp 列表之外， Clojure 还为地图、向量和集合提供了**新的文字**`{}``[]``#{}``()`
*   Common Lisp 支持**阅读器宏**- 这使您能够更好地自定义语言的语法
*   Clojure 有一种通过 STM管理**并发、身份和状态的新方法 - 请参阅**[http://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey](http://www.infoq.com/presentations/Value-Identity-State-Rich-Hickey)
*   Clojure 旨在**“拥抱主机平台”**（通常是 JVM，但也包括 CLR，最近人们对通过 ClojureScript 定位 JavaScript 产生了很大兴趣）——从实际的角度来看，这很重要，因为它可以让您访问一个巨大的一系列库/工具。
*   没有**Clojure 标准**——它是一种[BDFL 驱动](http://en.wikipedia.org/wiki/Benevolent_Dictator_for_Life)的语言，具有一个主要的开源实现。Rich Hickey 是 BDFL 非常有帮助——他是个天才。

**主观意见**：我有偏见，但我认为对于大多数现代用途来说，如果你现在选择 Lisp，Clojure 绝对是要走的路——它是对 Lisp 的现代重新设计，拥有一个充满活力和创新的社区，是一个务实的选择“把事情做好”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T10:14:06.103

您不需要使用[Common Lisp](http://www.lispworks.com/documentation/lw50/CLHS/Front/Contents.htm)的方言。Common Lisp 有很多优秀的实现——这些实现为完整的 Common Lisp 提供了很多扩展。

对于使用 Lisp 进行教育编程，我会推荐[SBCL](http://www.sbcl.org)，它提供了出色的编译器。[CCL](http://ccl.clozure.com)（Clozure Common Lisp）是另一个不错的选择。两者都在 Linux 和 Mac OS X 上运行得特别好。

有 Common Lisp 的方言（例如用于开发 Cyc，一个基于知识的大型系统的 SubL）和与 Common Lisp 相关的语言（例如 AutoCAD 的 Visual Lisp，GNU Emacs 或 ISLisp 的 Emacs Lisp），但它确实在教育中使用它们是没有意义的。标准的 Common Lisp 实现存在很多，而且它们非常出色。

*Clojure*甚至不是 Common Lisp 的方言，它是一种不同的语言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T09:45:29.497

Clojure 是它自己的语言——不是 Common Lisp 语言的实现。所以它不遵循 Common Lisp 标准。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-30T13:14:19.547

我认为您的教授的意思是一些 Common Lisp 实现添加了许多不属于标准的额外功能，而您的教授不希望您使用这些功能。所以选择你喜欢的任何 Common Lisp 实现，比如 SBCL 或 Clozure 等，并且只使用不是该特定实现独有的实际 Common Lisp 函数、技术等。换句话说，您编写的代码理论上应该可以在任何 Common Lisp 实现上运行。

Clojure、Scheme 等是 Lisp 的其他方言，它们有自己的标准（如果适用，“标准”这个词根据你的意思有不同程度的严格性），与 Common Lisp 不同。也就是说，他们当然不遵守 Common Lisp 标准。

坦率地说，当谈到 Lisp 语言时，“方言”通常指的是完全不同的 Lisp 语言，它与另一种方言的标准不同。因此，说“Common Lisp 的不同方言”是没有意义的。但是，您可以说“Lisp 的不同方言”。****

# c - 如果我在一个线程中 chdir，那会影响父程序的 cwd 吗？

> ID：13438910
> 
> 赞同：3
> 
> 时间：2012-11-18T09:21:44.650
> 
> 标签：c, pthreads, chdir

如果我在一个线程中 chdir，那会影响父程序的 cwd 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T09:23:28.220

是的。

如果您在多线程应用程序中需要相对路径，则使用`at()`函数的版本是最安全的。例如，`openat()`就像`open()`：

```
int openat(int dirfd, const char *pathname, int flags); 
```

第一个参数是目录的fd。该路径是相对于该目录的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T09:29:22.830

是的，“父程序”（线程进程的初始线程）会受到影响，因为当前目录由进程的所有线程共享。

[http://linux.die.net/man/7/pthreads](http://linux.die.net/man/7/pthreads)

# django - 了解 views.py 中的导入 - Django

> ID：13438920
> 
> 赞同：1
> 
> 时间：2012-11-18T09:23:34.670
> 
> 标签：django, python-2.7, django-views

我在 .py 文件中定义了一个非常大的 python 列表（〜 1M 字符串）。我将它导入到我的views.py 中以访问我的视图中的列表。我的问题是该列表是否会为每个使用 Web 应用程序的用户加载到 RAM 中，还是只加载一次并用于所有用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:33:18.350

Django 进程被加载一次并保持活动状态以处理传入请求。因此，如果您将列表定义为全局变量，它会保留在 RAM 中，一切都很好。但不鼓励操纵列表。

# r - ROCR: correct values selected?

> ID：13438922
> 
> 赞同：0
> 
> 时间：2012-11-18T09:24:05.857
> 
> 标签：r

I use ROCR to calculate precision/recall/f-measure values for a binary classification task, but I'm not sure if I interpret the results correctly. Do I select the correct values from the slots with theses statements?

```
pred <- prediction(subset(result,select=1),subset(result,select=2)); 

prec_val <- c(prec_val,functions$scoring_function[i],performance(pred,'prec')@y.values[[1:2]]);
rec_val <- c(rec_val,functions$scoring_function[i],performance(pred,'rec')@y.values[[1:2]]);
f_val <- c(rec_val,functions$scoring_function[i],performance(pred,'f')@y.values[[1:2]]); 
```

The "raw" results are e.g.

```
performance(pred,'rec')

An object of class "performance"
Slot "x.name":
[1] "Cutoff"
Slot "y.name":
[1] "Recall"
Slot "alpha.name":
[1] "none"
Slot "x.values":
[[1]]
[1] Inf   1   0
Slot "y.values":
[[1]]
[1] 0.0000000 0.4634703 1.0000000 
```

So I would assume that the middle value in "y.values" is the recall value. Also the "Inf" value at x.values is confusing me a bit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T15:55:54.707

是的，中间值是召回值。我已经使用我知道精度值的数据集对其进行了测试。

# javascript - 什么是“事件发射器”？

> ID：13438924
> 
> 赞同：78
> 
> 时间：2012-11-18T09:24:32.670
> 
> 标签：javascript, events, event-handling, dom-events

浏览[http://microjs.com](http://microjs.com)，我看到很多标有“事件发射器”的库。我喜欢认为我非常了解 Javascript 语言的基础知识，但我真的不知道“事件发射器”是什么或做什么。

有人愿意开导我吗？听起来很有趣...

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-18T09:32:01.187

它触发任何人都可以收听的[事件。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/EventLoop)不同的库提供不同的实现和不同的目的，但基本思想是提供一个框架来发布事件和订阅它们。

来自 jQuery 的示例：

```
// Subscribe to event.
$('#foo').bind('click', function() {
    alert("Click!");
});

// Emit event.
$('#foo').trigger('click'); 
```

~~但是，使用 jQuery 来发出事件，您需要有一个 DOM 对象，并且不能从任意对象发出事件。这就是事件发射器变得有用的地方。~~这是一些用于演示自定义事件的伪代码（与上面完全相同的模式）：

```
// Create custom object which "inherits" from emitter. Keyword "extend" is just a pseudo-code.
var myCustomObject = {};
extend(myCustomObject , EventEmitter);

// Subscribe to event.
myCustomObject.on("somethingHappened", function() { 
    alert("something happened!");
});

// Emit event.
myCustomObject.emit("somethingHappened"); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-18T09:29:24.027

> 在 node.js 中，事件可以简单地描述为带有相应回调的字符串。一个事件可以被多次“发出”（或者换句话说，相应的回调被调用），或者你可以选择只在它第一次发出时监听。

**例子：-**

```
var example_emitter = new (require('events').EventEmitter);
example_emitter.on("test", function () { console.log("test"); });
example_emitter.on("print", function (message) { console.log(message); });
example_emitter.emit("test");
example_emitter.emit("print", "message");
example_emitter.emit("unhandled");

> var example_emitter = new (require('events').EventEmitter);
{}
> example_emitter.on("test", function () { console.log("test"); });
{ _events: { test: [Function] } }
> example_emitter.on("print", function (message) { console.log(message); });
{ _events: { test: [Function], print: [Function] } }
> example_emitter.emit("test");
test //console.log'd
true //return value
> example_emitter.emit("print", "message");
message //console.log'd
true    //return value
> example_emitter.emit("unhandled");
false   //return value 
```

这演示了`EventEmitter`. 该`on or addListener`方法（基本上是订阅方法）允许您选择要监视的事件和要调用的回调。`emit`另一方面，该方法（发布方法）允许您“发出”一个事件，这会导致注册到该事件的所有回调“触发”（被调用）。

从源头[什么是事件发射器？](http://docs.nodejitsu.com/articles/getting-started/control-flow/what-are-event-emitters)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-24T18:18:10.800

Node.js 中的简单示例：

```
var EventEmitter = require('events').EventEmitter;
var concert = new EventEmitter;
var singer = 'Coldplay';

concert.on('start', function (singer) {
  console.log(`OMG ${singer}!`);
});

concert.on('finish', function () {
  console.log(`It was the best concert in my life...`);
});

concert.emit('start', singer);
concert.emit('finish'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-16T20:49:09.810

考虑一个回调函数——

```
function test(int a, function(){
     console.log("I am call-back function");
   }){
    console.log("I am a parent function");
 } 
```

现在，每当在事件（按钮单击或任何连接等）上调用父函数时，它首先执行其代码，然后将控制权传递给回调函数。现在，事件发射器是一个对象/方法，一旦发生某些动作就会触发一个事件，以便将控制传递给父函数。例如，Server 是 Node.Js 编程中的事件发射器。一旦服务器遇到将控制传递给错误父函数的错误，它就会发出错误事件。一旦套接字连接到服务器，服务器就会发出连接事件，该事件然后触发 getConnections 的父函数，它确实也将回调函数作为参数。所以，它确实是一个链，当事件发射器发生某些事情时触发它，它发出一个事件来启动一个函数运行。

# android - The return type is incompatible with Activity.getActionBar()Error when greendroid project is imported on eclipse. How can I fix it?

> ID：13438928
> 
> 赞同：1
> 
> 时间：2012-11-18T09:25:20.063
> 
> 标签：android, eclipse, import, greendroid

I'm using the quickActionWidget from the greendroid library in my project. But when I import the greendroid project into eclipse it throws an error saying return type is incompatible with Activity.getActionBar(). I think the method is conflicting with the method default Actionbar of android. How can I fix this error?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:25:29.070

我不确定我是否正确地回答了您的问题，但请尝试调用 getSupportActionBar 而不是 getActionBar

# android - Android, how to make a smooth gradient?

> ID：13438933
> 
> 赞同：0
> 
> 时间：2012-11-18T09:25:44.687
> 
> 标签：android

I'm trying to make a button background, yet it appears somehow jagged.

![enter image description here](../Images/2eccef8a49743b643498c4528b514d1f.png)

```
public Bitmap makeButtonBit (int w,int h)
{

    Bitmap bitmapBtn = Bitmap.createBitmap(w, h+2, Bitmap.Config.ARGB_8888);
    Canvas cnvBtn = new Canvas(bitmapBtn);

    Paint pR1 = new Paint();
    pR1.setAntiAlias(true);
    pR1.setAlpha(40);
    ///

    RectF rectShd1 = new RectF(0, 0, w, h+1);
    cnvBtn.drawRoundRect(rectShd1, 8, 8, pR1);

    RectF rectShd2 = new RectF(0, 0, w, h+2);
    cnvBtn.drawRoundRect(rectShd2, 8, 8, pR1);
    ///
    pR1.setAlpha(255);
    pR1.setShader(new LinearGradient(0, 0, 0, h, 0x11000000, 0xCC000000, TileMode.CLAMP));
    RectF rect1 = new RectF(0, 0, w, h);
    cnvBtn.drawRoundRect(rect1, 6, 6, pR1);

    pR1.setShader(new LinearGradient(0, 0, 0, h, 0xFF858990, 0xFF2E3337, TileMode.CLAMP));
    RectF rect2 = new RectF(1, 1, w-1, h-1);
    cnvBtn.drawRoundRect(rect2, 6, 6, pR1);

    pR1.setShader(new LinearGradient(0, 0, 0, h, 0xFF525A63, 0xFF2D343A, TileMode.CLAMP));
    RectF rect3 = new RectF(2, 2, w-2, h-2);
    cnvBtn.drawRoundRect(rect3, 6, 6, pR1);

    return bitmapBtn;
} 
```

Any ideas what am I doing wrong?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:35:48.097

你为什么不使用九个补丁？

# java - 加载时总是应用程序崩溃..

> ID：13438934
> 
> 赞同：0
> 
> 时间：2012-11-18T09:25:54.790
> 
> 标签：java, android

代码运行良好.. 这是一个简单的计算应用程序。

不幸的是，在我改变了一些东西后它停止了工作..问题是我不知道这个东西..

这是我的代码...

```
package com.bogaza.barazileyyecalc;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {

//declarations..

final TextView        lbl1 =  (TextView)       findViewById(R.id.textView1); 
final TextView        lbl2 =  (TextView)       findViewById(R.id.textView2);
final EditText        txt1 =  (EditText)       findViewById(R.id.editText1); 
final EditText        txt2 =  (EditText)       findViewById(R.id.editText2);
final Button          btn1 =  (Button)         findViewById(R.id.button1); 
final TextView        lbl3 =  (TextView)       findViewById(R.id.textView3);

    public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

// click button to get numbers from edittexts and add them to textviews ..      

    btn1.setOnClickListener(new OnClickListener() {   

        public void onClick(View v) {  
            if(v.getId() == R.id.button1){

            int value1 = (int) ((txt1.getText().toString()   
                    .equals("")) ? 0 : Double.valueOf(txt1.getText().toString()));   

            int value2 = (int) ((txt2.getText().toString()   
                    .equals("")) ? 0 : Double.valueOf(txt2.getText().toString()));   

            lbl3.setText(String.valueOf(value1 + value2));
            }
          }   

    });   ;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}

} 
```

它工作正常..我试图改变布局并做出更好的设计..之后问题发生了..现在当我点击运行时..它出现在设备上..并直接崩溃..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:28:32.297

在完成 setContextView 之前，您无法初始化视图。

```
final TextView        lbl1 =  (TextView)       findViewById(R.id.textView1); 
final TextView        lbl2 =  (TextView)       findViewById(R.id.textView2);
.
. 
```

`Oncreate`在调用 setContentView 之后将 findViewById 代码移动到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:35:33.453

把这段代码：

```
//declarations..

final TextView        lbl1 =  (TextView)       findViewById(R.id.textView1); 
final TextView        lbl2 =  (TextView)       findViewById(R.id.textView2);
final EditText        txt1 =  (EditText)       findViewById(R.id.editText1); 
final EditText        txt2 =  (EditText)       findViewById(R.id.editText2);
final Button          btn1 =  (Button)         findViewById(R.id.button1); 
final TextView        lbl3 =  (TextView)       findViewById(R.id.textView3); 
```

进入你的`onCreate()`方法。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T09:39:15.943

在设置任何布局之前，您已经初始化了视图。

如果您按如下方式修改代码，它应该可以工作：

```
public class MainActivity extends Activity implements OnClickListener 
{
//declarations..

final TextView lbl1;
final TextView lbl2;
final EditText txt1;
final EditText txt2;
final Button btn1;
final TextView lbl3;

public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    lbl1 = (TextView)findViewById(R.id.textView1);
    lbl2 = (TextView)findViewById(R.id.textView2);
    txt1 = (EditText)findViewById(R.id.editText1); 
    txt2 = (EditText)findViewById(R.id.editText2);
    btn1 = (Button)findViewById(R.id.button1); 
    lbl3 = (TextView)findViewById(R.id.textView3);

    // click button to get numbers from edittexts and add them to textviews ..      

    btn1.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
            ...
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T09:59:49.840

在 OnCreate() 方法之前找不到 ViewByID() ！所以尝试将它们放在 Oncreate() 方法中，如下所示：

```
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

Button btn1= (Button)findviewById(R.id.*); 
```

# android - 应用程序未在平板电脑的 Google Play 中显示

> ID：13438935
> 
> 赞同：0
> 
> 时间：2012-11-18T09:26:01.263
> 
> 标签：android, tablet, google-play

我的应用程序的构建 SDK 是**Google APIs 2.2 [API 8]**，并且具有大小手机和平板电脑所需的所有布局。问题是它没有在平板电脑的谷歌播放中显示。
清单文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.test.myapp"
android:versionCode="3"
android:versionName="2.0"
android:installLocation="auto" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="true"

     />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" android:required="false" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" android:required="false"/>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" android:required="false" />
<uses-permission android:name="android.permission.CALL_PHONE" android:required="false"/>
<uses-permission android:name="android.permission.VIBRATE"  android:required="false"/>
<uses-permission android:name="android.permission.GET_TASKS"  />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name="com.test.myapp.SplashScreenActivity"
        android:configChanges="orientation|keyboardHidden|keyboard"
        android:label="@string/app_name"
        ..............
        ........... 
```

阅读其他 stackoverflow 线程，但无法解决我的问题。这里有什么问题 ？
谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:08:26.310

看来您的问题出在 android:targetSdkVersion="8"

尝试将其设置为更高版本，10 或更高版本...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T12:25:56.480

试试这个来添加这个：

```
<supports-screens android:xlargeScreens="true" /> 
```

# sql-server - 全文搜索适合搜索人名吗？

> ID：13438936
> 
> 赞同：7
> 
> 时间：2012-11-18T09:26:11.543
> 
> 标签：sql-server, sql-server-2008

我有一个用户表，其中包含一个人名的单列：

```
CREATE TABLE [dbo].[Users]
(
    Id bigint NOT NULL,
    Name nvarchar(80) NOT NULL,
    PRIMARY KEY CLUSTERED (Id ASC)
) 
```

该`Name`列可以包含全名或仅包含名字或任何实际名称（以空格分隔）。为了实现对 的搜索`Name`，我想利用 SQL 的全文搜索，但不确定它是否适合搜索名称/昵称而不是实际单词。还有一个问题是 - 在创建 FT 索引时我选择哪种语言`Name`？

还有其他考虑吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:37:09.640

乍一看，我建议使用 LIKE 运算符而不是全文查询。

确保搜索不区分大小写并且可能不区分重音。这可以通过在服务器、数据库、表列或查询中设置正确的排序规则来实现。在查询中，这是通过以下方式完成的：

```
SELECT *
FROM [dbo].[Users]
WHERE Name LIKE '%niaher%' COLLATE SQL_Latin1_General_CP1_CI_AI 
```

如果您使用全文索引，您将获得各种功能，例如动词词干和词库，请参阅[全文搜索中的语言组件和语言支持，](http://msdn.microsoft.com/en-us/library/ms142571.aspx#components)在名称列表中搜索时您不需要这些功能。顺便说一句，这些功能是依赖于语言的，这就是您在全文索引上指定语言的原因。

您甚至可能希望避免使用停止列表。至少我会，因为在荷兰语中，许多姓氏都以冠词和/或介词开头：“Rembrandt **van** Rijn”。“van”肯定会出现在荷兰语非索引词列表中，并且会阻止对包含“van”的搜索词进行任何匹配。

如果遇到性能问题，尝试全文索引并使用[包含简单术语的 CONTAINS 进行](http://msdn.microsoft.com/en-us/library/ms187787.aspx#sectionToggle5)搜索可能会很有用。

```
SELECT *
FROM [dbo].[Users]
WHERE CONTAINS(Name, 'niaher') 
```

请注意，全文索引是异步更新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T04:48:57.810

看来，如果要搜索多部分名称，全文搜索是最简单最合适的方法（如果我错了，请纠正我）。另一种选择是`LIKE '%query%'`，但是它有太多缺点：

*   糟糕的性能，因为它进行索引扫描
*   术语顺序很重要，例如 - 搜索“John Smith”和“Smith John”将返回不同的结果。
*   它不考虑单词边界，例如 - 搜索“Ann”也将检索“Joanna”和“Danny”，它们不是有用的匹配项。

所以我继续执行全文搜索。我的查询看起来像这样：

```
SELECT * FROM Users WHERE CONTAINS(Name, '"John*"') 
```

唯一的小困难是我必须将用户查询（John）转换为对 CONTAINS 友好的查询（“John*”）。为此，我在我的 UserRepository 中实现了这个方法：

```
/// <summary>
/// Converts user-entered search query into a query that can be consumed by CONTAINS keyword of SQL Server.
/// </summary>
/// <example>If query is "John S Ju", the result will be "\"John*\" AND \"S*\" AND \"Ju*\"".</example>
/// <param name="query">Query entered by user.</param>
/// <returns>String instance.</returns>
public static string GetContainsQuery(string query)
{
    string containsQuery = string.Empty;

    var terms = query.Split(new[] { ' ' }, StringSplitOptions.None);

    if (terms.Length > 1)
    {
        for (int i = 0; i < terms.Length; i++)
        {
            string term = terms[i].Trim();

            // Add wildcard term, e.g. - "term*". The reason to add wildcard is because we want
            // to allow search by partially entered name parts (partially entered first name and/or
            // partially entered last name, etc).
            containsQuery += "\"" + term + "*\"";

            // If it's not the last term.
            if (i < terms.Length - 1)
            {
                // We want all terms inside user query to match.
                containsQuery += " AND ";
            }
        }

        containsQuery = containsQuery.Trim();
    }
    else
    {
        containsQuery = "\"" + query + "*\"";
    }

    return containsQuery;
} 
```

希望这可以帮助任何遇到同样问题的人。

PS - 我写了一篇[博文](http://22bugs.tumblr.com/post/36262552664/searching-peoples-names-with-sql-server-full-text)来记录这一点。

# javascript - Highstock highcharts 不规则数据得到错误的x-scale

> ID：13438937
> 
> 赞同：37
> 
> 时间：2012-11-18T09:26:15.950
> 
> 标签：javascript, jquery, charts, highcharts, highstock

我有不规则的数据。当我使用**highcharts**时，图表绘制得很好：

```
$(function() {
  var chart = new Highcharts.Chart({
    chart: {
      renderTo: 'chart'
  },
  xAxis: {
    type: 'datetime'
  },
  series: [{
    name: 'Volume',
    data: chart_arr,
  }]
});
}); 
```

[http://jsfiddle.net/KnTaw/9/](http://jsfiddle.net/KnTaw/9/)

但是我有很多数据，所以我需要放大日期并选择**highstock**。然后发生了一件奇怪的事情：x 轴变成了非线性的。

```
$(function() {
  var chart2 = new Highcharts.StockChart({
    chart: {
      renderTo: 'chart2'
    },
    rangeSelector: {
      selected: 0
    },
    xAxis: {
      type: 'datetime'
    },
    series: [{
      name: 'val',
      data: chart_arr,
      type : 'area',
    }]
  });
}); 
```

[http://jsfiddle.net/Mc3mW/1/](http://jsfiddle.net/Mc3mW/1/)

请注意，1 月 6 日 20:00-20:30 半小时范围内的数据分配的空间比 1 月 11-13 日的 2 天多。（当然数据是一样的。）

如何强制高库存的 x 轴变为线性？或者如何为高图启用底部缩放工具？谢谢你。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-18T10:23:57.593

您需要将**[`xAxis.ordinal`](http://api.highcharts.com/highstock#xAxis.ordinal)**属性设置为`false`，这是`true`默认设置。`True`value 表示点应该以固定间隔放置在**空间（像素）**中，并更改**点**`False`以固定间隔放置 wrt

 **```
xAxis: {       
    ordinal: false
} 
```

**[线性 x 轴 | Highstock @ jsFiddle](http://jsfiddle.net/jugal/ytcW3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:54:06.353

可以使用 HighCharts JavaScript 库来缩放图表。您应该设置的属性是**zoomType**

> 决定用户可以通过拖动鼠标缩放的尺寸。可以是 x、y 或 xy 之一。默认为“”。

你可以在这里看到一个[例子](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/chart/zoomtype-x/)。要缩放特定位置，请按住鼠标左键并选择要缩放的区域。

HTML 代码：

```
<div id="container" style="height: 400px"></div>​ 
```

JavaScript 代码：

```
$(function () {
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            zoomType: 'x'
        },

        xAxis: {
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }]
    });
});​ 
```

此外，“重置缩放”按钮会自动显示在缩放事件中，并且很容易操作按下它时将显示图表的哪个部分。

[无论如何，有关缩放设置、事件和按钮的更多信息和示例，您应该在此处](http://api.highcharts.com/highcharts)参考“Highcharts 选项参考” 。只需在搜索中输入“缩放”即可。

至于您的另一个问题：根据 HighStock API，“如何使 StockChart 成为线性”图表的默认类型是线性的。这里发生的事情是由您在 series 属性中设置的**area选项引起的。**像这样删除，你会得到你的线性图表：

```
$(function() {
  var chart2 = new Highcharts.StockChart({
    chart: {
      renderTo: 'chart2'
    },
    rangeSelector: {
      selected: 0
    },
    xAxis: {
      type: 'datetime'
    },
    series: [{
      name: 'val',
      data: chart_arr
    }]
  });
}); 
```**

# c - 比较和检查两个文件中的列

> ID：13438941
> 
> 赞同：0
> 
> 时间：2012-11-18T09:27:08.493
> 
> 标签：c

我有两个文件，如下所示：

文件 A 是：

```
J5
J15
J25
J30
J35 
```

文件 B 是：

```
J0 23 56
J5 24 58
J10 26 60
J15 29 63
J20 31 36
J25 23 32
J30 51 14
J35 34 21
J40 46 12 
```

问题是我必须检查 FILE A 和 FILE B 的内容，并将 Jth 项的值复制到一个新文件中，如下所示：（文件 C）：

```
J5 24 58
J15 29 63
J25 23 32
J30 51 14
J35 34 21 
```

如果你制定一个 C 代码来解决这个问题，那将是非常有帮助的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:51:22.483

我建议您制作三个“随机访问文件”（因为它们更有条理），但首先：

*   您需要使用将使用的结构格式化每个文件，在第一个文件中结构 [1] 您只需要一个成员名称（char 数组），在第二个结构 [2] 中您需要三个成员名称（char 数组) 和 2 个值（我想是两个整数），第三个限制与第二个相同，因此您可以重新利用它。

[1]

```
/* Struct for the first file. */
typedef {
    char name[4];
} file1_t; 
```

[2]

```
/* Struct for the second file. */
typedef {
    char name[4];
    int value1, value2;
} file2_t; 
```

*   要创建这些文件，您必须使用这样的代码（假设文件以“wb”模式打开，但未创建）：

    ```
    /* This is an incomplete example (I can't make your whole Homework)*/

    void file2Creator( FILE *fPtr )
    {
        int i; // Counter to create the file.
        file2_t data = { "", 0, 0 }; // A blank example to format the file.

        /* You will create 9 consecutive records*/
        for( i = 1; i <= 9; i++ ){
            fwrite( &data, sizeof( file2_t ), 1, fPtr );
        }

        fclose( fPtr ); // You can close the file here or later however you need.  
    } 
    ```

*   之后，您必须填写您所做的空白（我想文件已打开）：

    ```
    void fillFile2( FILE *fPtr)
    {
        int position;
        file2_t data = { "", 0, 0 };

        printf( "Enter the position to fill (1-9) 0 to finish:\n?" );
        scanf( "%d", &position );

        while( position != 0 ){
            printf( "Enter the name, and the two other values (integers):\n?" );
            fscanf( stdin, "%s%d%d", data.name, data.value1, data.value2 );

            /* You have to seek the pointer. */
            fseek( fPtr, ( position - 1 ) * sizeof( file2_t ), SEEK_SET );
            fwrite( &data, sizeof( file2_t ), 1, fPtr );
            printf( "Enter a new position (1-9) 0 to finish:\n?" );
            scanf( "%d", &position );
        }

        fclose( fPtr ); //You can close the file or not, depends in what you need.
    } 
    ```

*   现在我想象你已经格式化了文件1，文件2和文件3，并且文件1和2都被填充了，你想填充文件3怎么做呢？简单的。

    ```
    /* 3 pointers to each file */
    void fillFile3( FILE *f1Ptr, FILE *f2Ptr, FILE *f3Ptr )
    {
        int i, j, k, number;
        char word[ 4 ];
        file1_t data1 = { "" };
        file2_t data2, data3 = { "", 0, 0 };

        k = 1;

        /* I suppose that files are opened with their correctly FILE pointers. */
        for( i = 1; i <= 5; i++ ){

            /* I locate in the "i" position of the file1\. */
            fseek( f1Ptr, ( i - 1 ) * sizeof( file1_t ), SEEK_SET );

            /* I read the slot. */
            fread( &data1, sizeof( file1_t ), 1, f1Ptr );

            /*Now we compare the file2 until we find the correct value, if it is organized we can jump some slots if not compare with all.*/
            for( j = 1; j <= 9, j++ ){
                fseek( f2Ptr, ( j - 1 ) * sizeof( file2_t ), SEEK_SET );
                fread( &data2, sizeof( file2_t ), 1, f2Ptr );

                /* We compare the strings, If they are equal we paste the value in file 3*/
                if( strcmp( data1.name, data2.name ) == 0 ){

                   /*file 3 is of type of the file 2*/
                   fseek( f3Ptr, ( k - 1 ) * sizeof( file2_t ), SEEK_SET );
                   fwrite( &data2, sizeof( file2_t ), 1, f3Ptr );
                   k++;
                   break;
                }
            }
        }
        fclose( f1Ptr );
        fclose( f2Ptr );
        fclose( f3Ptr );
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T22:29:14.593

我正在尝试执行此程序，但它无法运行。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    FILE *fp1 ,*fp2;
    char ca , cb;
    int i,j,x,s;
    char A[i][j],B[i][j];
    char file1[1024], file2[1024];

    printf( "Enter file1: ", file1 );
    gets( file1 );
    printf( "Enter file2: ",file2 );
    gets( file2 );
    fp1=fopen( file1, "r");

    if ( fp1 == NULL ){
        printf("Cannot open %s for reading \n", file1 );
        exit(1);
    }

    while ( ( fgets( file1, sizeof file1, stdin ) ) != EOF ){
        for(i=0;i<2500;i++){
            for(j=0;j<5;j++){
                fscanf(fp1,"%s",&A[i][j]);
            }
        }
    }

    fp2 = fopen( file2, "r");

    if ( fp2 == NULL ){
        printf("Cannot open %s for reading \n", file2 );
        exit( 1 );
    }

    while ( fgets ( file2, sizeof file2, stdin) != EOF){
        for( i = 0; i < 2500; i++ ){
            for( j = 0; j < 5; j++ ){
                fscanf(fp2,"%s",&B[i][j]);
            }
        }
    }
    /*Here it was a ; without any sense (after the if)*/
    if( strcmp( A[i][j], B[i][j] ) ) == 0;
    {
        printf( "%s /n %s  ", strcmp( A[i][j], B[i][j] ) );
    }

    fclose(fp1);
    fclose(fp2);

    return 0;
} 
```

编译器在“==”标记之前显示语法错误（strcmp 函数底部的第 8 行）。有什么帮助吗？？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T22:40:27.940

你在 if 后面加了一个分号，却忘记了括号。

```
if( strcmp( A[i][j], B[i][j] ) == 0 ){
        printf( "%s /n %s  ", strcmp( A[i][j], B[i][j] ) );
} 
```

# android - android不同的构建版本

> ID：13438943
> 
> 赞同：0
> 
> 时间：2012-11-18T09:27:25.470
> 
> 标签：android, versions, android-build, android-version, android-support-library

我有一个在 android 2.1 中构建的 android 应用程序。但是现在是切换到更大版本的时候了。支持 2 个或更多 android 构建版本的最佳方式是什么。我有一些建议，例如：

1.  为 2 个构建使用 git 分支
2.  将原生的第一个 2.1 应用程序作为库项目并创建两个单独的项目，它们将使用库的公共类但重写所有控制器
3.  使用库项目，两个单独的项目用于不同的构建，当我必须使用来自特定构建的类时，我将不得不从库项目中调用类似这样的东西：

    ```
    Class<ExpandableListAdapter> adapterClass = Config.getHotelDistrictAdapterClass();
            hotelAdapter = adapterClass.getConstructor(String.class).newInstance(HotelDistrictListActivity.this, 
    ```

    0、hotelList.size()、hotelList、cretedFromAssets)；

    其中 Config 类将查询一个配置文件，该文件包含在构建版本中，并包含特定构建的类名。

    所以场景会变成这样：lib 项目将调用 Config 类，然后 config 类将调用当前构建（4.2 或 2.1）中的配置文件，配置文件将返回类名和 Config 类将类返回到 lib 项目，并且 Lib 项目将使用代码实例化该类：

    hotelAdapter = adapterClass.getConstructor(String.class).newInstance(HotelDistrictListActivity.this, 0, hotelList.size(), hotelList,cretedFromAssets);

请建议为两个 android 版本维护两个单独构建的更好或最佳方法是什么，或者建议您用来维护两个或更多 android 构建的方式。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:34:40.827

您应该查看 AndroidManifest.xml minSDKVersion 和 targetSDKVersion 字段。它们允许您在同一个应用程序中支持一系列 android 版本。

[Android Min SDK 版本与目标 SDK 版本](https://stackoverflow.com/questions/4568267/android-min-sdk-version-vs-target-sdk-version)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:05:23.943

您可以轻松地将 MinSDKVersion 设置为 8 或 7，并将 Building Target 设置为 16 或 17，这可以从您的 Manifest.xml 文件中完成

# java - jdbc到mysql的连接

> ID：13438944
> 
> 赞同：2
> 
> 时间：2012-11-18T09:27:56.937
> 
> 标签：java, mysql, jdbc

我有下一个代码。我将它保存在文件中：'MysqlConnect.java'。

```
import java.sql.*;

public class MysqlConnect{
  public static void main(String[] args) {
    System.out.println("MySQL Connect Example.");
    Connection conn = null;
    String url = "jdbc:mysql://localhost:3306/";
    String dbName = "jdbctutorial";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "root"; 
    String password = "root";
    try {
        Class.forName(driver).newInstance();
        conn = DriverManager.getConnection(url+dbName,userName,password);
        System.out.println("Connected to the database");
        conn.close();
        System.out.println("Disconnected from database");
    } catch (Exception e) {
        e.printStackTrace(); 
    }
  }
} 
```

我知道如何运行它：

```
javac MysqlConnect.java
java MysqlConnect 
```

我有一些疑问：

1）我应该在哪里保存这个文件？（我有一个文件夹：mysql-connector-java-5.1.22）。

2）我在mysql中创建了一个数据库和一个表。我不需要将其插入代码中吗？例如：

```
String dbname = "database_alon"; 
```

3) 如果第二个问题的答案是“是”，我只有数据库的密码，而不是用户名。那么我应该在userName的参数中插入什么？

所以，我认为我必须将代码更改为：

```
String dbName = "database_alon";
String driver = "com.mysql.jdbc.Driver";
String userName = ""; 
String password = "ADMINALON"; 
```

对？那么问题1呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:28:34.343

你可以在任何你想要的地方拥有你的 MysqlConnect.java 文件。您应该只在类路径中添加包含 MysqlConnect.class 的文件夹。此外，为了正常运行，您还应该将 mysql-connector-java-5.1.22.jar 添加到类路径中，以便能够找到运行类所需的类。

为了避免在类路径中添加多个内容，您可以在包含 MysqlConnect.class 的文件夹中添加 mysql-connector-java-5.1.22.jar 并只更新一次类路径。

至于你的第二个问题**是**，你需要更改代码并添加

```
String dbname="database_alon" 
```

代替

```
String dbName = "jdbctutorial"; 
```

我认为您的数据库中没有用户名，因为它默认选择 root 用户名。尝试使用**root**作为用户名并告诉我它为您提供了什么，但请确保如上所述更新您的类路径。还要确保您使用默认**端口 3306**连接到数据库。

* * *

PS你用什么程序来管理你的数据库？知道这一点，我可以提供更多帮助。

PSS 您可以使用 IDE，例如 Eclipse 或 Netbeans，这可以使部署更加容易。您无需接触类路径和其他变量，因为 IDE 只需选择要用于项目的 jar 即可。

PSS 如果您不知道如何在类路径中添加 jar，请提供您的操作系统以便为此提供帮助。

# jquery - jquery 工具错误：未捕获错误：语法错误，无法识别的表达式：[href=/]

> ID：13438945
> 
> 赞同：1
> 
> 时间：2012-11-18T09:27:58.843
> 
> 标签：jquery, jquery-tools

我刚刚将 jQuery 工具加载到我的网站上。但谷歌浏览器控制台显示错误：

```
Uncaught Error: Syntax error, unrecognized expression: [href=/] (http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js) 
```

我使用的 jQuery 版本是 1.7.1

如何处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T09:29:59.013

我假设您有一个选择器，用于匹配`href`属性值为`/`. 您需要将`/`字符放在引号中：

```
var elems = $("[href='/']"); 
```

或者，您可以转义字符：

```
var elems = $("[href=\\/]"); 
```

来自[jQuery 文档](http://api.jquery.com/category/selectors/)：

> 如果您希望使用任何元字符（例如`!"#$%&'()*+,./:;<=>?@[\]^`{|}~` ）作为名称的文字部分，则必须使用两个反斜杠转义该字符：\\。

这是一个[工作示例](http://jsfiddle.net/AQ5JS/)。删除引号以生成您在问题中提到的相同错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:47:09.660

我的猜测是您更改了库的顺序。如果要使用 JQuery，则必须先加载其库才能使用附加的 JQuery-Expansion-Lib。您应该像这样更改顺序`<head>`：

```
<html>
 <head>
  <link rel="stylesheet" type="text/css" href="formate.css"> //CSS always first
  <script src="URL_TO_JQUERY" type="text/javascript"></script> //JQuery first
  <script src="URL_TO_ADDITIONAL_LIB_1" type="text/javascript"></script>
  <script src="URL_TO_ADDITIONAL_LIB_..." type="text/javascript"></script>
  <script src="URL_TO_ADDITIONAL_LIB_n" type="text/javascript"></script>   
 </head>
</html> 
```

# c# - 单独线程上的 C# UI

> ID：13438948
> 
> 赞同：2
> 
> 时间：2012-11-18T09:28:41.653
> 
> 标签：c#, multithreading, user-interface

我一直在各种论坛、教程或 SO 上看到一个建议，即在单独的线程上运行 UI，然后在程序的其余部分上运行以保持响应。
这在实践中是如何做到的？这是否意味着`program.cs`在加载表单之前编辑启动线程？或者这是否意味着从表单中激活的任何重要操作都会派生一个线程并使用它？还是有什么设定？你如何使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T09:36:05.717

为了保持 UI 响应，您应该在单独的线程中运行*其他*耗时的操作。通常用户界面操作应该在 .NET 的主 (UI) 线程中完成。

有几种方法可以为您的操作使用单独的（后台）线程。对于 Windows 窗体应用程序，最简单的选项是[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)组件。

您也可以[`Thread`](http://msdn.microsoft.com/en-us/library/system.threading.thread.aspx)自己创建一个对象。但是您应该小心调用 UI 方法或更改创建线程中的 UI 控件属性。正如我所说，所有用户界面操作（显示表单、更改控件文本或位置等）都应该在 UI 线程中完成。否则你会得到一个例外。为此，您可以使用[`Control.Invoke`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.invoke.aspx)方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T09:32:33.503

通常在 C# WinForms 应用程序中，Program.cs 会像这样启动您的主窗体。

```
Application.Run(new MyMainForm()); 
```

这将创建您的主调度程序 (GUI) 线程，您的所有事件都会在其中触发，（按钮单击、表单加载等）实际上，如果您需要执行长时间计算，您将创建一个新的后台工作线程并使用它完成 UI 更新后，将调用返回给事件调度程序。

如果您在 UI 线程上执行较长的进程，它将锁定 UI 并且将变得无响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T09:34:45.327

UI 在主线程上运行。这个想法是在新线程中运行冗长的操作。不要在自己的线程中执行所有重要的操作，但是任何导致表单“不响应”的操作都是线程的良好候选者。

在 C# 中，使用 a`BackgroundWorker`而不是滚动您自己的线程可能是最简单的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T09:39:00.273

**tutorials 或 SO 回答了在单独的线程上运行 UI 的建议**……我对此表示怀疑。无论如何，UI 都在自己的线程上运行。有时它被称为应用程序的“主”线程。为了避免冻结您的应用程序，您在其他线程中执行 CPU 密集型工作。做到这一点的方法很多。查看线程、任务、异步和和和。如果您使用 Framework 4.5，您可能会使用该`await SomeTask`功能，只要任务可能需要超过 20-50 毫秒才能完成 - 至少这是 MS 人员的建议（afaik）

# java - 为什么这种类型的通配符不起作用？

> ID：13438952
> 
> 赞同：5
> 
> 时间：2012-11-18T09:29:21.063
> 
> 标签：java, generics

```
interface A {
    String n();
}
class B implements A {
    @Override
    public String n() { return "asdf"; }
}
interface C<T extends A> {
    T m(T t);
}
class D implements C<B> {
    @Override
    public B m(B b) {
        return b;
    }
}

Class<C<? extends A>> x = D.class; 
```

最后一行有错误

```
Type mismatch: cannot convert from Class<D> to Class<C<? extends A>> 
```

这对我来说看起来非常好，但也许我错过了类型通配符如何工作的一些微妙之处。有没有办法可以更改最后一行的类型？我需要这个参考，因为我打算稍后再做：

```
B b = new B();
A y = x.newInstance().m(b); 
```

这也有错误

```
The method m(capture#1-of ? extends A) in the type C<capture#1-of ? extends A> is not applicable for the arguments (B) 
```

但是，如果我在没有通配符和捕获的情况下使用它，它可以正常工作：

```
A z = D.class.newInstance().m(b); 
```

不幸的是，我现在有点坚持这一点，任何帮助将不胜感激。

编辑：删除`this.`参考

**编辑**：将 x 更改为

```
Class<? extends C<? extends A>> x = D.class; 
```

它有效。但是仍然出现错误`x.newInstance().m(b)`

```
The method m(capture#2-of ? extends A) in the type Test.C<capture#2-of ? extends A> is not applicable for the arguments (B) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T10:03:24.823

对，只关注最后一部分：

> 但是在 x.newInstance().m(b) 上仍然出现错误
> 
> ```
> The method m(capture#2-of ? extends A) in the type
> Test.C<capture#2-of ? extends A is not applicable for the arguments (B) 
> ```

确实——这是完全有道理的。因为您的代码中没有任何内容表明您实际上有一个`C<B>`. 编译器所知道的是，`newInstance`它返回了*某种*类型的实例，该实例为*某种*类型的实现。它怎么会知道那是？`C<X>`*`X``A``B`*

 *如果你想打电话`m(b)`，你需要一个`C<B>`，这意味着你的声明需要是

```
Class<? extends C<B>> x = D.class; 
```

此时，方法调用可以干净地编译。目前尚不清楚您要达到什么目标，或者这对您来说是否足够好-但希望它可以解释为什么您会遇到错误...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:03:38.813

它的类型不安全（我认为，关闭这些警告以避免注释污染）

```
 Class<? extends C> x = D.class;
    B b = new B();
    A y = x.newInstance().m(b);
    A z = D.class.newInstance().m(b); 
```

但它有效。*

# c# - c#中的并行和工作划分？

> ID：13438955
> 
> 赞同：5
> 
> 时间：2012-11-18T09:29:30.563
> 
> 标签：c#, .net, .net-4.0, parallel-processing, task-parallel-library

*（假设我有 10 个核心）*

当我写：

```
Parallel.For(0, 100, (i,state) =>  
         { 
            Console.WriteLine(i); 
         }); 
```

问题：

1.  为每个核心分配数量的公式是什么？（是`100/10`吗？）

2.  在执行点，每个核心是否**已经知道**要处理哪些数字？还是每次从`[0..100]`存储库中消耗一个新数字时（让我们暂时忽略块或范围）？

3.  `i`参数 - 它是指索引还是每个线程中的`0..100`相对索引及其“将处理”数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:12:05.037

1.  它没有记录。工作人员任务可能会从共享工作池中检查工作块。可能他们一次拿不到 10 个项目，因为拿 10 个项目会导致在操作结束时工作的线程少于 10 个`Parallel.For`。单个慢线程可能会造成顺序瓶颈，因为它可能是唯一仍在运行的线程。最好将工作划分为更小的块，这样这种类型的瓶颈就会变得更小。

2.  我不知道。我很确定必须使用 Reflector 来撬出这些信息。

3.  它指的是全局索引，因此您可以使用它来访问共享列表或其他东西。`i`您的工作代表所见过的每一个都将是独一无二的。

# mysql - 欧洲国家的mysql表数据

> ID：13438956
> 
> 赞同：0
> 
> 时间：2012-11-18T09:29:42.590
> 
> 标签：mysql

我需要创建一个 mysql 数据库，其中包含两个表“country_master”和“state_master”，其中包含欧洲的所有国家及其相应的州。

国家主表包含国家代码和国家名称，国家主表包含国家代码、国家名称和各自的国家代码。

是否有用于为欧洲国家创建状态的 mysql 查询。我有国家表。

这是我的国家/地区主查询，用于填充欧洲所有国家/地区。

```
 INSERT INTO `country_master` (`country_codes`, `country_names`) VALUES
  ('AL', 'Albania'),
  ('AD', 'Andorra'),
  ('AT', 'Austria'),
  ('BE', 'Belgium'),
  ('BA', 'Bosnia and Herzegovina'),
  ('BG', 'Bulgaria'),
  ... 
```

现在我需要创建一个表 state_master ，其中包含每个国家的所有州。例如：

```
 INSERT INTO `country_master` (`state_codes`, `state_names`,`country codes`) VALUES
    ('1', 'state1','AL'),
    ('2', 'state2','AL'),
    ('3', 'state3','AD') etc... 
```

有没有人有包含欧洲国家的查询或.sql 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:12:45.250

欧洲的每个国家都是不同的，几千年来都是如此。

“状态”没有通用名称。

一些国家使用县，其他省份，其他地区和其他东西，它确实因国家而异。由于它们在国家和地方区域之间都有一些东西，因此您可以使用通用的“区域”或“区域”，并让它意味着给定国家正在使用的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-04T16:56:58.887

我不知道您是否找到了包含所有州的数据库，但是存在数据库的国家/地区，仅从数据库中选择来自欧洲的国家 [https://github.com/Svish/iso-3166-country-codes/ blob/master/countries.sql](https://github.com/Svish/iso-3166-country-codes/blob/master/countries.sql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T12:52:23.327

试试这样的，

```
CREATE TABLE Country_Master
(
    CountryCode INT,
    CountryName VARCHAR(50),
    CONSTRAINT tb_pk PRIMARY KEY (CountryCode),
    CONSTRAINT tb_uq UNIQUE(CountryName)
);

CREATE TABLE State_Master
(
    StateCode INT,
    StateName VARCHAR(50),
    CountryCode INT,
    CONSTRAINT tb2_pk PRIMARY KEY (StateCode),
    CONSTRAINT tb2_uq UNIQUE (StateName),
    CONSTRAINT tb2_fk FOREIGN KEY (CountryCode)
        REFERENCES Country_Master(CountryCode)
); 
```

# git - 阻止下载整个 git 存储库

> ID：13438960
> 
> 赞同：5
> 
> 时间：2012-11-18T09:30:02.937
> 
> 标签：git, github

我有一个我正在开发的爱好游戏的 git 存储库，我将其推送到 github 上的私有存储库作为代码的备份和中心位置。

在旧版本中，我有 100MB 左右的 .TGA 文件作为纹理，但在新版本中我已将这些文件更改为更小的 .DDS 文件。

但是，当您从 github 克隆存储库时，据我所知，它仍然会下载所有未使用的旧文件，而不仅仅是最新提交中的文件。这是有道理的，因为您正在克隆存储库，而不仅仅是检查当前版本。但大多数时候它们是无用的大型下载。

但是有什么办法可以阻止它从最旧的版本下载文件，而不会阻止我在需要时获取它们？

如果做不到这一点，我该如何从远程存储库中删除那些旧版本以及不再使用的文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T09:41:50.063

`--depth`从 GitHub 克隆它时使用该选项，以仅获取最新版本。

```
git clone --depth=1 https://github.com/user/repo 
```

从手册...

> 创建一个浅克隆，其历史被截断为指定的修订数。浅层存储库有许多限制（您不能克隆或从中获取，也不能从中推送或进入），但如果您只对历史悠久的大型项目的近期历史感兴趣，并且想要作为补丁发送修复。

如果您想知道 Git 命令有哪些选项，您可以使用`git help command`或`man git-command`。

# php - 在 php 数据网格上加载 JQuery/Ajax 页面以获取特定记录 id

> ID：13438961
> 
> 赞同：2
> 
> 时间：2012-11-18T09:30:22.667
> 
> 标签：php, jquery

我正在使用 php 和 ajax 页面加载在 php 中创建一个数据列表，就像 redbus.in 一样，我是 php 和 jquery 和 ajax 的新手。

我希望当我单击“查看座位”按钮时，动态数据会发生 ajax 页面加载。

我正在使用 Jquery 使用下面的代码来实现这一点

```
<script type="text/javascript">
$("#viewseatContainer").hide();
$(document).ready(function() {

     $("#viewseat").click(function(){
     $("#viewseatContainer").toggle();
     });
 }); 
```

但在我的数据列表中，只有第一项显示查看座位信息

在我的 PHP

```
echo ...

'<td id="abc"><a href="#" onclick="javascript:ajaxpage(\'view.php?id='.$_SESSION['$bus_id'].'
,&from='.$_SESSION['$bus_startstation'].',&to='.$_SESSION['$bus_endstation'].' 
,&date='.$_SESSION['date'].' \' , \'viewseatContainer\')">
<img src="themes/frontend/images/redbtn.png" width="100" height="32" id="viewseat" /></a></td>'.
'<td>ID:'.$_SESSION['$bus_id'].'</td>'. 
```

对于 Ajax 页面加载，我使用了一个简单的插件

我的问题是我有 viewseatContainer 和 id= viewseat 使用 Jquery 如何切换每个或任何记录以使用 ajax 页面加载加载 view.php。

为了更清楚，我在粘贴箱中给出了我的完整代码

[http://pastebin.com/dB8STTSR](http://pastebin.com/dB8STTSR) (jquery)

[http://pastebin.com/Raa5TJCG](http://pastebin.com/Raa5TJCG) （数据网格）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:29:23.473

吴州首先做一件事

使用这个 Jquery

```
 <script type="text/javascript">
 $("#viewseatContainer").hide();
var x = <?php echo $_SESSION['$bus_id']?>;
$.each(x, function (i, elem) {
    $("#" +'viewseatContainer' + x).toggle();
});
 });
 </script> 
```

然后转到您的 PHP 代码页（您给出的第二个 pastebib 页面），然后将总线 ID 添加到 AJAX 加载容器中，如下所示

```
'<tr>'.
'<td>'.$_SESSION['$travel_name'].'</td>'.
'<td><a href="#">Photogallary</a></td>'.
'<td><a href="#">Via</a></td>'.
'<td id="abc"><a href="#" onclick="javascript:ajaxpage(\'view.php?id='.$_SESSION['$bus_id'].'&from='.$_SESSION['$bus_startstation'].'&to='.$_SESSION['$bus_endstation'].'&date='.$_SESSION['date'].'\',\'viewseatContainer'.$_SESSION['$bus_id'].'\')"><img src="themes/frontend/images/redbtn.png" width="100" height="32" id="'.$_SESSION['$bus_id'].'" /></a></td>'.
'<td>ID:'.$_SESSION['$bus_id'].'</td>'.
'</tr>'.
'<tr>'.
'<td colspan="6" id="vsc">'.
'<div id="viewseatContainer'.$_SESSION['$bus_id'].'"></div>'.
'</td>'.
'</tr>' 
```

并记住一件事，因为 viewseatContainer 有多个实例，您可以将其隐藏为不在此处的类

```
 $("#viewseatContainer").hide();// use a class to hide 
```

现在你准备好了...

# c# - 如何让我的 Java 应用程序与我的控制台 C# 应用程序交互？

> ID：13438963
> 
> 赞同：1
> 
> 时间：2012-11-18T09:30:43.873
> 
> 标签：c#, java, console, msmq

我想创建一个 C# 控制台应用程序，我在其他机器上的其他 Java 控制台应用程序可以在其中查询 MSMQ 中有多少消息。

我想知道，我该如何实现呢？他们可以通过什么方式进行交流？大多数人这样做的标准方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:40:52.143

好吧，实际上你已经完成了队列的一半工作，这完全取决于你的场景，但是如果你想将消息从一个应用程序发送到另一个应用程序（不管它是基于什么语言构建的）：

*   它可能是通过队列的方式，因此拥有相同队列平台的客户端将使您继续前进，

*   另一种方法是使用 wcf 服务，它为您提供比典型 Web 服务更多的互操作性，

*   最后还有新技术（在 .net 中是 OData），可以让您构建 RESTful 方法，因此您可以像在网站中导航一样查询信息，例如：（http://myapplication/users /?id=4) ，那么任何客户端应用程序（java 或 c#）都可以使用自己的 REST 客户端实现来使用它。

我很确定还有很多其他方法，但这是我已经尝试过的方法。

希望能帮助到你。

# python - 使用 Streaming API 避免 420？

> ID：13438965
> 
> 赞同：7
> 
> 时间：2012-11-18T09:31:01.720
> 
> 标签：python, twitter, tweetstream, twitter-streaming-api

我有一个 python 脚本，它使用基本身份验证并使用[tweetstream](http://pypi.python.org/pypi/tweetstream)模块 连接到 Twitter [Streaming API 。](https://dev.twitter.com/docs/streaming-apis/connecting)

我每分钟收集大约 10 条推文。
我遇到了间歇性断开连接，因此目前正在记录它们发生的频率。

我一直在达到我的速率限制并收到 420 个 HTTP 错误。

我知道对于搜索 API，使用 OAuth 身份验证可以获得更高的配额。对于流媒体，我找不到任何关于基本和 OAuth 之间速率限制差异的参考。无论如何，我正在使用的 python Tweetstream 似乎不支持流 API。

我注意到[Tweetstream 的 Ruby 版本](http://thechangelog.com/post/24246381907/tweetstream-easily-access-the-twitter-streaming-api)支持 OAuth，但我正在做这个项目作为 python 的学习经验。

通过阅读[Twitter 帮助](https://dev.twitter.com/docs/streaming-apis/connecting#Rate_limiting)，它谈到了“退避策略”并提到：

> 如果收到 HTTP 420 响应，则必须在几分钟内停止进一步的连接尝试。

我不再收到错误，但一直在尝试在我的代码中制定更好的逻辑以避免永久出现这些错误。

我目前的建议如下，现在等待 200 秒，然后再尝试重新连接。

```
while True:
    try:
        with tweetstream.FilterStream(uname, passwd, locations=extent) as stream:
            # do stuff
    except tweetstream.ConnectionError as e:
     print e.message + " time: " + datetime.now
     time.sleep(200)
     pass
    except tweetstream.AuthenticationError as e:
     now = datetime.datetime.now()
     print e.message  + " time: " + str(now)
     pass 
```

**我的问题是 - 这是避免从 Twitter 接收 420 错误的好方法吗？对 Twitter API 比较熟悉的朋友，能推荐一个方法吗？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T08:26:18.167

> 420
> 
> 费率有限。可能的原因有：
> 
> 短时间内登录尝试次数过多。运行相同应用程序的太多副本以相同的帐户名进行身份验证。

对于如此低的推文流传输速率（每分钟 10 条推文），您不应该收到速率限制错误，实际上速率限制不适用于流媒体，因为 twitter 不会给您提供比您所能拥有的更多推文，很可能您是由于短时间内登录尝试次数过多而出现此错误。所以等待一段时间是个好主意（我确实在每次断开连接之间等待 10 秒，这种情况很少发生）。确保您的流媒体不会因为内部编程异常而不是 Twitter 异常而中断。此外，您还应该查看以下建议。

您应该检查只有一个流通过相同的 ip 运行。Twitter 允许一个流媒体以每个 ip 和每个基本身份验证运行。因此，请确保您正在运行来自特定 ip 的唯一流，并且您为 oauth 身份验证提供的凭据仅用于此流。那么你就不会得到 420 错误。

但是由于某种原因，如果您的流媒体因 Twitter 异常或内部编程异常而中断，您应该等待一段时间再重新连接，以防止出现更多异常。Twitter 还会在响应代码标头中返回您在重新连接之前需要等待多长时间（下面的用于搜索，但也应包含在流中）。

> 超出 Search API 速率限制的应用程序将收到 HTTP 420 响应代码。最佳做法是注意此错误情况并尊重返回的 Retry-After 标头。Retry-After 标头的值是您的应用程序在再次从 Search API 请求日期之前应等待的秒数。

# ruby-on-rails - 哈希数组的哈希，Itunes 愿望清单

> ID：13438966
> 
> 赞同：1
> 
> 时间：2012-11-18T09:31:19.513
> 
> 标签：ruby-on-rails, ruby, cookies, hash

干杯! 请帮我解决问题 - 我有一个 cookie，它是哈希：

```
> cookies.keys
=> [:wishlist] 
```

然后：

```
> cookies[:wishlist].keys
=> ["result_count", "results"] 
```

results 是一个 Hashie::rash 数组

```
> cookies[:wishlist].results[0].keys
=> ["wrapper_type", "kind", "artist_id", ...] 
```

cookies 是 hash，cookies[:wishlist] 是 Hashie::Rash，results 是一个数组，其中包含其他 Hashie::Rash'ies。问题是如何在不删除旧数据的情况下将新数据添加到愿望清单（例如，将曲目添加到愿望清单）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:37:23.977

假设你有这个结构：

```
cookies = {
  :wishlist => Hashie::Rash.new({
    'resultCount' => 2,
    'results' => [
      Hashie::Rash.new({
        'wrapperType' => 'foo1',
        'kind'        => 'bar1',
        'artistId'    => 'baz1'
      }),
      Hashie::Rash.new({
        'wrapperType' => 'foo2',
        'kind'        => 'bar2',
        'artistId'    => 'baz2'
      })
    ]
  })
} 
```

您可以简单地使用`Array#push`将新项目添加到您的`results`：

```
require 'rash'

new_wishlist_item = Hashie::Rash.new({
  'wrapperType' => 'foo3',
  'kind'        => 'bar3',
  'artistId'    => 'baz3'
})

cookies[:wishlist].results.push( new_wishlist_item )
cookies[:wishlist].result_count = results.count

cookies[:wishlist].results.each do |r|
  puts r.wrapper_type
end 
```

输出：

```
foo1
foo2
foo3 
```

# c - C - 字节数组到结构（dns 查询）

> ID：13438969
> 
> 赞同：1
> 
> 时间：2012-11-18T09:32:09.793
> 
> 标签：c, dns, bytearray, structure

我有这些结构：

```
typedef struct dnsQuery {
  char header[12];
  struct TdnsQuerySection *querySection;
} TdnsQuery;

typedef struct dnsQuerySection {
  unsigned char *name;
  struct TdnsQueryQuestion *question;
} TdnsQuerySection;

typedef struct dnsQueryQuestion {
  unsigned short qtype;
  unsigned short qclass;
} TdnsQueryQuestion; 
```

我在字节数组中有 dns 查询`recvfrom`。我正在尝试从字节数组中获取结构，如下所示：

```
TdnsQuery* dnsQuery = (TdnsQuery*)buf;
printf("%u", dnsQuery->querySection->question.qtype); 
```

为什么我收到错误取消引用指向不完整类型的指针？我这样做对吗？或者如何从该数组中获取 dns 查询结构？我需要那个 dns 查询问题和类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:41:31.763

您的查询部分打印机类型不完整。您需要预先对其进行 typedef 并且不使用结构关键字或使用结构名称而不是 typedef。例如：

```
typedef struct foo Foo;

struct {
    Foo* querySection;
    // effectively same as above
    struct foo* querySection2;

    // NOT the following. 
    struct Foo* querySectionWrong; 
}; 
```

# php - $.ajax({ }) 对 PHP 文件的发布请求返回空值

> ID：13438975
> 
> 赞同：3
> 
> 时间：2012-11-18T09:33:13.127
> 
> 标签：php, javascript, ajax, post

我已经研究这个问题很长一段时间了，似乎无法弄清楚为什么在调用 $.ajax 函数后我一直收到 null。我输入了一个包含我的方法名称的关联数组，然后在 PHP 中调用我的方法将 aj 儿子字符串返回到前端。当我在我的 java 脚本中调用 alert 时收到 null 。这是我的代码

Java脚本：

```
 $(document).ready(function()
   {
     var data = {};
     data["Method"] = "test";
     $.ajax({

            url:"test.php/test",
            data: data,
            type:"POST",
            contentType:"application/json",
            dataType:"json",
            success: function(data){

            alert(data);

            },
            error:function(data, textStatus, error)
            {

            }
     });
}); 
```

PHP：

```
 <?

    //require_once("database.php");

    class methods
    {
      function __contructor()
      {
        if(isset($_POST["Method"]))
        {
              $function = $_POST["Method"];
              call_user_func($function);
        }
        else
        {
              echo "{\"status\":\"false\"}";
        }
     }

      function test()
      {
            $json = array( 
            "kyle" => "broflowksi",
            "eric" => "cartman",
            "stan" => "marsh"
             );
            echo json_encode($json);
      }

   }

     $method = new methods();

   ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T09:45:04.593

您要调用的是实例方法。这样称呼它：

```
if(isset($_POST["Method"]))
{
      $function = $_POST["Method"];
      $method = new ReflectionMethod('methods', $function);
      $method->invoke($this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:44:48.330

尝试在发送输出之前强制使用内容类型标头，

```
header("Content-type: application/json"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T10:00:30.203

您的类构造方法中只是一个错字，应该是

```
function __construct() 
```

要记住的另一件事是，我不确定您是否应该将 contentType 设置为 json，因为该变量用于您发送的内容......而不是您收到的内容。因此，如果您最终遇到 post 变量被剥离的情况，请尝试从您的 ajax 调用中删除 contentType。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-18T09:37:21.010

尝试删除`echo`in`test`方法。你在打电话

```
 call_user_func($function); 
```

而你`$function`的不是`returning`但是`echoing`，.ie

```
function test() {
        $json = array( 
        "kyle" => "broflowksi",
        "eric" => "cartman",
        "stan" => "marsh"
         );
        echo json_encode($json);          // This line should be returning
} 
```

我之前用 php 函数调用（不是特别是 ajax）处理了类似的问题。

# c# - 处理来自表单的信息

> ID：13438976
> 
> 赞同：1
> 
> 时间：2012-11-18T09:33:50.377
> 
> 标签：c#, forms, oop

我敢肯定这是一个非常菜鸟的问题，但过去两个小时我一直在寻找这些信息，但真的什么也没找到。（不过，我确定我只是没有问正确的问题。）

问题是，我正在设计一个需要用户提供大量信息的应用程序，我猜它就像 14 个文本框。现在，我的问题是我不确定处理（和处理）这些信息的最佳方式是什么。

从用户那里获得所有信息后，我想将其传递给名为 SaveIt 的类，该类使用然后将其传递给 SerializeToXML，后者使用 XMLSerialize 将信息保存到 XML 文件中。但这是大量的写​​作和大量的变量要创建，我相信它可以以更优雅和更聪明的方式完成。

回顾一下：我必须将此信息传递 2 次（一次传递给 SaveIt，然后传递给 SerializeToXML），另外我必须定义一个 XMLSerialize 将使用的类，嗯……序列化它。

最聪明的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:48:37.963

您应该使您的 SaveIt 类可序列化。XML 序列化程序只保存属性。

```
[Serializable]
public class SaveIt
{
    public string Text1 {get; set;}
    public string Text2 {get; set;}
    ...
}

private void Save(string filename)
{
    SaveIt save = new SaveIt();
    save.Text1 = textBox1.Text;
    ...

    using(Stream stream = new FileStream(filename, FileMode.Create, FileAccess.Write, FileShare.Write))
    {
        XmlSerializer xmlserializer = new XmlSerializer( typeof(SaveIt) );
        xmlserializer.Serialize( stream, save );
    }
}

private void Load(string filename)
{
    SaveIt load;
    using(Stream stream = new FileStream(filename, FileMode.Open, FileAccess.Read, FileShare.Read))
    {
        XmlSerializer xmlserializer = new XmlSerializer( typeof(SaveIt) );
        load = xmlserializer.Deserialize(stream) as SaveIt;
    }

    textBox1.Text = load.Text1;
    textBox2.Text = load.Text2;
    ...
} 
```

但是恐怕没有简单的方法可以将数据从表单复制到 SaveIt 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:33:09.490

一种方法是将原始文件`Form`作为参数传递。然后在您真正需要时获取信息。但是这些方法将被硬编码用于这项工作，您将无法重用它们。

那么如何使用这些变量创建一个类，并传递该类的一个实例呢？

```
public class TextBoxesInformation
{
    public string box1string;
    public string box2string;
    //...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T10:50:47.740

我已经写了一个答案，但也许你的问题的重点不同，所以这里有一个针对问题不同方面的答案。

也许是这样的：

```
foreach (Control ctrl in Controls)
    if (ctrl is TextBox)
        dictionary.Add((ctrl as TextBox), (ctrl as TextBox).Text); 
```

在哪里：

```
Dictionary<TextBox, string> dictionary = new Dictionary<TextBox, string>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T10:23:33.167

一种方法是使用数据绑定。您需要将对象 SaveIt 的属性添加到文本框数据绑定，当用户在文本框中写入时，这会自动填充您的属性。

您可以在每个属性的表单的构造函数中添加它。

```
SaveIt saveIt = new SaveIt();
textBoxFirstName.DataBindings.Add("Text", saveIt.FirstName, "FirstName");
textBoxLastName.DataBindings.Add("Text", saveIt.LastName, "LastName"); 
```

并且您需要在您的类 SaveIt 中实现接口 INotifyPropertyChanged，如下所示：

```
public class SaveIt : INotifyPropertyChanged {

    public event PropertyChangedEventHandler PropertyChanged;

    private string _firstName = string.Empty;
    private string _lastName = string.Empty;

    public string FirstName {
        get { return _firstName; }
        set {
            _firstName = value;
            OnPropertyChanged("FirstName");
        }
    }

    public string LastName {
        get { return _lastName; }
        set {
            _lastName = value;
            OnPropertyChanged("LastName");
        }
    }

    private void OnPropertyChanged(string propertyName) {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

使用它，您无需手动填写所有属性

然后可以使用 Casperah 的方式来序列化 SaveIt 对象

# objective-c - 如何从 iOS 的远程端播放音频缓冲区？

> ID：13438981
> 
> 赞同：0
> 
> 时间：2012-11-18T09:35:05.100
> 
> 标签：objective-c, ios, audio, voip, audioqueue

我发布了一个关于从 Recorder 获取 AudioBuffer 的问题，

> 我的相关问题： [iOS 是否有任何高级音频队列记录服务库？](https://stackoverflow.com/questions/13428305/is-there-any-high-level-audio-queue-record-service-library-for-ios)

我可以从记录器中获取缓冲区并将其放入 NSData，然后通过 udp 套接字发送。

但是如何在另一台 iOS 设备上使用缓冲区？

有没有办法播放缓冲区？

我研究了一些示例代码，但其中大多数只是在录音机录制时播放。

有没有更详细的教程可以从远程播放缓冲区？

> **更新**：我现在刚刚解决了

关键函数是播放回调函数！

```
static OSStatus playbackCallback(void *inRefCon, 
                                  AudioUnitRenderActionFlags *ioActionFlags, 
                                  const AudioTimeStamp *inTimeStamp, 
                                  UInt32 inBusNumber, 
                                  UInt32 inNumberFrames, 
                                  AudioBufferList *ioData) {    
    // Notes: ioData contains buffers (may be more than one!)
    // Fill them up as much as you can. Remember to set the size value in each buffer to match how
    // much data is in the buffer.
    return noErr;
} 
```

> **顺便说一句，应该总是检查你使用的低级东西！**
> 
> 例如：**malloc memcpy 免费**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:48:48.287

如果我理解你的问题，那么我认为这个链接可以帮助你：[https ://github.com/mattgallagher/AudioStreamer](https://github.com/mattgallagher/AudioStreamer)

AudioStreamer 用于在流式传输时播放远程音频。

# algorithm - 如何获得学生成绩文件的排名？

> ID：13438983
> 
> 赞同：3
> 
> 时间：2012-11-18T09:35:14.793
> 
> 标签：algorithm, mapreduce, couchdb, ranking

我在 CouchDB 中的文档结构如下所示：

```
{
 "_id": "0a68cdbe4a7f3abf4046bc",
 "_rev": "1-1508",
 "score": {"math":90, "physics": 88, "chemistry": 60},
 "student_name": "Mike"
} 
```

我需要在前端显示以下统计信息来设置学生的个人资料：

*   给定一个学生 _id，我如何检索**该**学生在每门课程中的排名；
*   给定一个学生 _id，我如何检索**该**学生的总分排名（数学+物理+化学）。

假设我只有 2 个学生，第 2 个学生的记录如下：

```
{
 "_id": "0a68cdbe2344a3abf4046bc",
 "_rev": "1-1608",
 "score": {"math":80, "physics": 98, "chemistry": 90},
 "student_name": "Jane"
} 
```

所以迈克的排名应该是：

```
math: 1
physics: 2
chemistry: 2
total: 2 
```

简的等级应该是

```
math: 2
physics: 1
chemistry: 1
total: 1 
```

如果我没有清楚地说明问题，请告诉我。

我没有弄清楚创建视图以获得排名的方法。我试过的：

*   创建将分数映射到学生信息的视图。然后我可以查询一个分数范围，让学生知道他们的分数在那个范围内。

**编辑**：通过用户名查询和检索排名的功能不需要仅由视图实现。欢迎任何想法！

**Edit2**：课程数量为 1K 到 3K。学生人数为 1M 到 2M。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T19:51:55.557

我认为仅仅用一个视图来做你想做的事情是不可能的。会尝试这样的地图功能：

```
function(doc) {
  emit (["math", doc.score.math], doc.student_name);
  emit (["physics", doc.score.physics], doc.student_name);
  emit (["chemistry",doc.score.chemistry], doc.student_name);
  emit (["total",doc.score.math+doc.score.physics+doc.score.chemistry], doc.student_name);
} 
```

然后我会按课程查询。这将返回按分数排序的学生列表。在那之后，我认为您必须以编程方式选择软件中的等级。

我认为 reduce 函数没有用，因为该函数不会缩小结果集，还因为我无法想出一种通过学生姓名查询并同时拥有整个学生列表的方法。我也认为一个列表是没有用的，因为我再一次看不到如何让列表知道学生的名字，同时让整个学生集都在结果中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T01:10:49.250

也许排序视图和列表的组合会起作用。

您的 resultByChemistryScore 视图看起来像这样

```
function(doc) {
    emit(doc.score.chemistry, [doc._id, doc.student_name]);
} 
```

然后您的 GET 请求将类似于`http://localhost:5984/results/_design/results/_view/resultByChemistryScore?descending=true`此时您始终可以通过使用`offset`和`limit`GET 查询参数来实现分页。

从这一点开始，a`list`可以计数，直到它到达您指定的学生。

你的列表函数“rank”看起来像这样

```
function(head, req) {
    start({ "headers": { "content-type": "application/json" } } );
    var row, rank = 0; 
    while ( row = getRow() ) {
        if ( row.id == req.query.id ) break;
        // increment rank if not a tie
        if ( old_row != null && old_row.key != row.key ) 
           rank++;
        old_row = row;
    }; 
    send( JSON.stringify( { "rank" : rank } ) );
} 
```

你的要求基本上是`http://localhost:5984/results/_design/results/_list/rank/resultByChemistryScore?id=fet&descending=true`。

这不是很漂亮，我给你。如果您说...第 1,000,000 名最好的化学学生，服务器可能需要一段时间才能浏览整个列表。但服务器肯定比客户端更容易做到这一点。

**编辑** 添加了领带处理案例

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T16:27:52.400

所以我不认为有一个解决方案可以完全在 CouchDB 中完成，它会为学生、科目配对检索单个值。但是，可以创建一个 map/reduce 视图，它几乎可以生成您正在寻找的内容。然后可以使用该视图的结果来查找学生、科目对的排名。

我们首先使用与 joscas 建议的地图非常相似的地图构建视图。唯一的区别是主题名称不是硬编码的：

## 地图.js

```
function(doc) {
    var total = 0;
    for (var subject in doc.score)  {
        var score = doc.score[subject];
        emit([subject, score], doc.student_name);
        total += score;
    }
    emit(["total", total], doc.student_name);
} 
```

我们将它与一个 reduce 函数配对，该函数将为给定 a`group=true`和`grouping_level=1`

## 减少.js

```
function(keys, values) {
    var rankings = {};              // In order to return ties, a simple array can't be used.
    var rank = 0;
    var place = 0;
    var last_score = -1;
    for (var i = 0; i < values.length; i++) {
        var name = values[i];
        var score = keys[i][0][1];  // The 0th element of the key is the [subject, score] array.
        if (score == last_score) {
            // Tie, add another student to this rank.
            place++;
        } else {
            // Not a tie, create a new rank.
            rank += (place + 1);
            rankings[rank] = new Array();
            place = 0;
            last_score = score;
        }
        rankings[rank][place] = name;
    }
    return rankings;
} 
```

## 数据

我在数据集中添加了第三个学生，并创建了一些联系以使其变得有趣。这是使用的数据：

```
{
    "_id": "ce6b2cd97e73258014679ab7bb9e7cdc",
    "_rev": "2-b62581d22c186bfc8ebe1703a2dfb506",
    "score": {
        "chemistry": 60,
        "math": 90,
        "physics": 88
    },
    "student_name": "Mike"
}

{
    "_id": "ce6b2cd97e73258014679ab7bb9e8ada",
    "_rev": "5-94d6cfbd3cf22f903ebc306570d1f1af",
    "score": {
        "chemistry": 90,
        "math": 90,
        "physics": 98
    },
    "student_name": "Jane"
}

{
    "_id": "ce6b2cd97e73258014679ab7bb9e960b",
    "_rev": "1-d8c7fe88de63cf3d6e9743696f96aad0",
    "score": {
        "chemistry": 61,
        "math": 89,
        "physics": 88
    },
    "student_name":
    "Charlie"
} 
```

## 结果

视图保存为排名，可以这样查询：

```
http://127.0.0.1:5984/atest/_design/atest/_view/rank?group=true&group_level=1 
```

这产生了这个结果：

```
{
    "rows":[
        {"key":["chemistry"],"value":{"1":["Jane"],"2":["Charlie"],"3":["Mike"]}},
        {"key":["math"],"value":{"1":["Jane","Mike"],"3":["Charlie"]}},
        {"key":["physics"],"value":{"1":["Jane"],"2":["Charlie","Mike"]}},
        {"key":["total"],"value":{"1":["Jane"],"2":["Charlie","Mike"]}}
    ]
} 
```

可以像这样按主题查询视图（假设最低分数为0，最高分数为100）：

```
http://127.0.0.1:5984/atest/_design/atest/_view/rank?group=true&group_level=1&startkey=%5B%22math%22,0%5D&endkey=%5B%22math%22,100%5D 
```

（没有url编码）：

```
http://127.0.0.1:5984/atest/_design/atest/_view/rank?group=true&group_level=1&startkey=["math",0]&endkey=["math",100] 
```

这产生了这个结果：

```
{
    "rows":[
        {"key":["math"],"value":{"1":["Jane","Mike"],"3":["Charlie"]}}
    ]
} 
```

可以使用 Javascript（或其他客户端技术）搜索生成的词典，以确定学生在单个（或所有）科目中的排名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T23:13:56.217

我有一个基于@joscas 回答的想法。您可以像这样创建视图：

```
key         -> value
---------------------
("math", 0) -> 2
("math", 1) -> 3
("math", 2) -> 5
....
("math", 100) -> 50 
```

我假设每门课程的分数范围是从 0 到 100。想法是：

*   对于每门课程，您汇总分数落在该分数桶中的学生人数（每门课程有 101 个桶，即 from`bucket0`到`bucket100`）。
*   然后，您要么使用@joscas 指出的链式视图，要么使用另一个外部程序来获取得分直方图的累积分布，如下所示。

* * *

```
key         -> accumulative value
------------------------------------
("math", 0) -> 2
("math", 1) -> 5
("math", 2) -> 10
....
("math", 99) -> 32324
("math", 100)-> 32374 
```

给定课程名称`c`和您的分数`s`，第二个视图会告诉您`how many students play not as good as you in this course`，您可以从中得出排名`n-#s`，其中`n`是注册的总学生人数`c`，`#s`是获得低于分数的学生人数`s`。例如，查询`"math", 99`将返回 32374-32324 = 50，这是在“数学”中获得 99 的学生的排名。

对于问题的总分部分，您可以使用类似的想法，但更改存储桶的大小和数量。

# ruby - 十六进制数的有符号 2 的补码

> ID：13438994
> 
> 赞同：1
> 
> 时间：2012-11-18T09:37:49.670
> 
> 标签：ruby

如何将十六进制数转换为带`'C4D81633'`符号的 2 的补码，即`'-992471501'`使用 Ruby？我试过

```
['C4D81633'.scan(/[0-9a-f]{2}/i).reverse.join].pack('H*').unpack('l') 
```

但是当我输入长度小于 8 个字符时，上面的代码不能正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T15:09:08.393

否定运算符 ( `-`) 已经做了一个二的恭维：

```
p (-0x1234).to_s(16)    # => "-1234" 
```

问题在于 Ruby 的 to_s，它注意到它被否定，并以我们几乎总是想要的方式输出它——用减号。

但是，如果我们屏蔽否定值，我们将让 Ruby 做我们想做的事情：

```
 p (-0x1234 & 0xffff).to_s(16)    # => "edcc" 
```

所以让我们把它们放在一起：

```
def negate(n, num_bits)
  mask = (1 << num_bits) - 1
  -n & mask
end

def negate_string(s, num_bits)
  negate(s.hex, num_bits).to_s(16)
end

p negate_string("C4D81633", 32)    # "3b27e9cd" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-16T00:42:04.960

我建议尽可能使用实际数字。所以，拿你的“字符串化的十六进制数字”，把它转换成一个实际的整数。（所以，正如其他人所建议的那样；`'C4D81633'.hex`）。我对该方法进行了几次迭代。第一个是@shivashankar 的，其他的只是速度改进。如果您想对其进行黑盒化并获得性能，请使用最后一个。

```
def signed_twos_complement(integer_value, num_bits)
  length = num_bits
  mid = 2**(length-1)
  max_unsigned = 2**length
  (integer_value >= mid) ? integer_value - max_unsigned : integer_value
end

def signed_twos_complement2(i)
  -(-i & (2**i.to_s(2).length)-1)
end

def signed_twos_complement3(i)
  -(-i & (2**i.bit_length)-1)
end

def signed_twos_complement4(i, bits=i.bit_length)
  -(-i & (2**bits)-1)
end

# Run chunk below in irb or pry to try benchmarking for yourself
require 'benchmark'
n = 9000000
a = Array.new(n) { rand(1...n) };

Benchmark.bm do |x|
  x.report { a.each { |z| signed_twos_complement(z, z.to_s(2).length) } }
  x.report { a.each { |z| signed_twos_complement(z, z.bit_length) } }
  x.report { a.each { |z| signed_twos_complement2(z) } }
  x.report { a.each { |z| signed_twos_complement3(z) } }
  x.report { a.each { |z| signed_twos_complement4(z) } }
end 
```

这是我的基准测试结果

```
 user     system      total        real
6.250000   0.040000   6.290000 (  6.355923)
2.290000   0.010000   2.300000 (  2.347434)
5.840000   0.040000   5.880000 (  5.943748)
2.160000   0.010000   2.170000 (  2.223785)
2.160000   0.020000   2.180000 (  2.218012) 
```

编辑：我添加`signed_twos_complement4`了更多可扩展性。您可以覆盖预期的位以进行高级补充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T10:51:23.147

首先使用`String#rjust`你的输入怎么样？

```
['C4D81633'.rjust(8,'0').scan(/[0-9a-f]{2}/i).reverse.join].pack('H*').unpack('l') 
```

这样，您总是有 8 个十六进制数字（除非您的输入长于 8 位）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T14:10:37.830

我在谷歌搜索后找到了答案......我将其添加为如下方法

```
def convert_to_signed_twos_complement(integer_value, num_of_bits)
  length       = num_of_bits
  mid          = 2**(length-1)
  max_unsigned = 2**length
  (integer_value >= mid) ? integer_value - max_unsigned : integer_value
end

hex_to_convert = 'C4D81633'
convert_to_signed_twos_complement(hex_to_convert.hex, 16)

Note: the num_of_bits in method denote the max bit size of the binary you want 
```

# linux - 从命令行Linux将字符串传递给matlab

> ID：13438996
> 
> 赞同：1
> 
> 时间：2012-11-18T09:38:51.753
> 
> 标签：linux, matlab

我希望能够将一个字符串参数传递给 matlab 脚本（或函数）。它适用于整数，但我不能用字符串做到这一点。示例：/usr/bin/matlab -nodisplay -r 'main('ana')'

我得到：未定义的函数或变量“ana”。

我也试过了，但我得到了一个错误。

当 main 是脚本并且我编写类似以下内容时，我遇到了同样的问题：

/usr/bin/matlab -nodisplay -r 'a='ana';main'。

你能告诉我怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T09:44:57.110

尝试使用`"`作为命令字符串的分隔符：

```
/usr/bin/matlab -nodisplay -r "a='ana';main" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T09:45:21.630

尝试运行：`/usr/bin/matlab -r "main('blabla')"`