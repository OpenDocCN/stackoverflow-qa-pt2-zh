# StackOverflow 问答 15406000-15406999

# php - php执行编码

> ID：15406001
> 
> 赞同：6
> 
> 时间：2013-03-14T09:55:52.603
> 
> 标签：php, debian, command-line-interface

当我从控制台执行此命令“sendsms XXXXXXXXX 'śćźłóśadad'”时，一切正常。但是当我用 exec("sendsms XXXXXXXXX 'śćźłóśadad'"); 在 php 中执行它时 味精的正文没有波兰字母。Debian 控制台是 UTF-8，php 文件是 UTF-8。当我从 cli 执行这个 php 文件时，一切正常，但问题是当我从浏览器（同一个文件）运行它时。为什么 ？如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T10:47:44.687

当您通过 CLI 接口运行脚本时，子进程会继承其父进程的环境，其中包含变量`LANG`，用于将字节的编码传递给底层 C 运行时。

可能当您通过 mod_php 执行程序时，`LANG`未设置。所以你可以通过自己配置成功：

```
<?php
putenv('LANG=en_US.UTF-8');
exec("sendsms 888888888 cosśźćłó"); 
```

# python - Python 是否与 QML（Qt-Quick）配合得很好？

> ID：15406002
> 
> 赞同：32
> 
> 时间：2013-03-14T09:55:52.267
> 
> 标签：python, qml, qt-quick

我是 Qt-Quick 的初学者。我不知道 Qt 是 QML 的基础。而且我也不熟悉 C++，它又是 Qt 和 QML 的主要支持语言。我知道 JS 可以在 QML 层本身做很多逻辑。但是如果我们需要与操作系统交互，那么我们必须使用一些基础语言。由于我对 Python 很熟悉，我正在计划“ **QML-JS-Python** ”组合。

所以，我的问题：

1.  对于高级应用程序和游戏开发，Python 和 Qt-Quick 是否齐头并进？
2.  我的组合三重奏（QML-JS-Python）是否足够好？
3.  我是否需要学习 Qt 进行应用程序开发才能从 QML 与 Python 耦合？
4.  如果 Qust 3 是，那么我应该学习完整的 Qt 还是只学习作为 Python 和 QML 之间通信门的那几行代码？

对不起，如果我在提出这些问题时很愚蠢。但我愿意接受建议和意见。

*编辑：此组合 QML-JS-Python 的任何限制*

提前致谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-14T10:17:54.430

在概念层面上，它们很好地结合在一起。我编写了一个 python/qml/js/opengl 程序，它很好地结合了所有内容。那是 Qt4.7 和 PySide。

如果您只是使用 QML，您可以最大限度地减少您需要接触的 Qt 数量（尽管一如既往，更多的知识会让您变得更强大）。本质上，一旦你有了一个 qdeclarativeview，你的 Qt 工作就可以在信号/槽处理之外完成，这在 PySide 下是一种乐趣。我建议您可以使用 Python 和 QML 快速提高工作效率，而不必过多担心 Qt 方面的问题，并根据需要选择它。

根据经验，我建议在你自己的脑海中明确 Python 和 QML 之间的界限。我将 QML 限制在 GUI 逻辑上，它做得很好；实际上，QML 处理接口如何响应输入，然后将信号发送回主程序。它的工作方式有点像在 GUI 和程序的其余部分之间创建一个非常基本的、精简的接口，只发出高级逻辑信号（而不是，例如，发回点击，它会发回一个信号，例如“打开处理”，GUI 将处理如何呈现该更改）。就我而言，这只是直接插入到我的 MVC 框架中，但您可以按照自己的喜好进行操作。

尽管如此，有一个很大的警告。PySide 的开发相当停滞，目前不支持 Qt5 及其所有 QML 改进优点。关于应该如何支持它已经有各种讨论，但没有多少实际代码提交。

我相信 PyQt 支持 Qt5，但作为 GPL 或商业双重许可（PySide 是 LGPL，因此可以与封闭源代码一起使用）。我没有 PyQt 的经验，除此之外，PySide 几乎是一个替代品。

好像我在谈论将其用作[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)。

（任何限制问题）：整个 Qt 通过 PySide 和 PyQt 暴露出来。这意味着您可以像在 C 中一样在 Python 中编写扩展。我编写了一个捕获鼠标滚动事件的小部件，因此我可以从 Flickable 中窃取滚动。这是一个用 Python 创建的 QML 元素，尽管我也必须从 Python 加载它；我不太清楚如何创建一个可以从 QML 文档中加载的扩展。当然可以编写一个独立于主代码的 C 扩展，因此您仍然可以选择。

编辑：[PySide2](https://wiki.qt.io/Qt_for_Python)现在是一个东西并支持 Qt5。

Edit2：截至 2021 年，Pyside 现在被称为[QT For Python](https://www.qt.io/qt-for-python)，并且在 QT6 之前得到了极大的支持。请务必记下许可证。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-07T05:22:19.130

截至 2016 年 4 月，PySide[现在](https://groups.google.com/forum/#!topic/pyside-dev/pqwzngAGLWE)得到 Qt 公司的正式支持。

官方主页在[这里](http://wiki.qt.io/PySide)。LGPL 许可是一种选择，这似乎是最初创建该项目的主要原因。

# ios - 弹出视图的坐标计算

> ID：15406009
> 
> 赞同：0
> 
> 时间：2013-03-14T09:56:12.407
> 
> 标签：ios, xcode, ipad, storyboard

在我的应用程序中，一个按钮放置在视图控制器的底部。单击该按钮时，我需要一个弹出视图，其中的表格视图显示在我放置的按钮上方。我的问题是我的弹出视图的起始位置位于我的顶部视图控制器。我需要在该按钮上方有一个小的弹出视图。我使用横向模式。.

```
 UIViewController *popoverContent=[[UIViewController alloc]init];
UIView* popoverView = [[UIView alloc]initWithFrame:CGRectMake( 265,   100,  400 , 800)];
popoverView.backgroundColor = [UIColor clearColor];
// popoverView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"mmf.png"]];

UITableView *table = [[UITableView alloc]initWithFrame:CGRectMake( 0, 0,400,800) style:UITableViewStylePlain];
table.backgroundColor=[UIColor colorWithRed:(107.0/255.0) green: (164.0/255) blue:(183.0/255) alpha:1];
[table setDataSource:self];
[table setDelegate:self];
[table setRowHeight:80];
[popoverView addSubview:table];

popoverContent.view = popoverView;
// popoverContent.contentSizeForViewInPopover =
//CGSizeMake(250, 665);

self.popoverController = [[UIPopoverController alloc]
                          initWithContentViewController:popoverContent];
[self.popoverController presentPopoverFromRect:popoverView.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
[self.popoverController  presentPopoverFromRect:CGRectMake( 265,680,400,800)
                                         inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES]; 
```

我尝试了许多坐标值，但它的起始位置不是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:21:25.083

**编辑**

```
 UIViewController *popoverContent=[[UIViewController alloc]init];
    UIView* popoverView = [[UIView alloc]initWithFrame:CGRectMake( 0,   0,  400 , 400)];
    popoverView.backgroundColor = [UIColor clearColor];
    // popoverView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"mmf.png"]];

    UITableView *table = [[UITableView alloc]initWithFrame:CGRectMake( 0, 0,400,400) style:UITableViewStylePlain];
    table.backgroundColor=[UIColor colorWithRed:(107.0/255.0) green: (164.0/255) blue:(183.0/255) alpha:1];
    [table setRowHeight:80];
    [popoverView addSubview:table];

    popoverContent.view = popoverView;
    popoverContent.contentSizeForViewInPopover = CGSizeMake(popoverView.frame.size.width, popoverView.frame.size.width);

    UIPopoverController *popoverController = [[UIPopoverController alloc]
                                              initWithContentViewController:popoverContent];
    [popoverController  presentPopoverFromRect:btnLogin.frame
                                        inView:btnLogin.superview permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES]; 
```

**注意** 您只需确定`frame of your button`并确保从`view that contains button`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:47:14.383

试试这个对你有帮助

```
UIViewController* popoverContent = [[UIViewController alloc] init];
        UIView*   popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 400, 320, 260)];
        popoverView.backgroundColor = [UIColor whiteColor];

        UITableView *table = [[UITableView alloc]initWithFrame:CGRectMake( 0, 0,320,260) style:UITableViewStylePlain];
    table.backgroundColor=[UIColor colorWithRed:(107.0/255.0) green: (164.0/255) blue:(183.0/255) alpha:1];
    [table setDataSource:self];
    [table setDelegate:self];
    [table setRowHeight:80];
    [popoverView addSubview:table];
        popoverContent.view = popoverView;
        popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
        popoverRect = CGRectMake(100, 200, 1,30);

      //    in the above line change the position of the popover controller 

        popoverController.popoverContentSize = CGSizeMake(320, 260);
        [popoverController 
         presentPopoverFromRect:popoverRect
         inView:self.view
         permittedArrowDirections:UIPopoverArrowDirectionUp
         animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:13:15.780

突然出现 popOver 并不是一个好主意。当它从 UI 控件呈现时，对用户来说更容易。

但是尝试在 UIView 和您的 TableView 的 ViewDidLoad 中设置 contentPopOverSize。

```
[self setContentSizeForViewInPopover:CGSizeMake(width, height)]; 
```

您在 CGRectMake 中给出的框架应该与您的按钮相关。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T10:47:25.820

**presentPopoverFromRect**是弹出框将指向的矩形

```
[self.popoverController presentPopoverFromRect:yourBtn.frame inView:self.view    permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

请记住，yourBtn 的框架是根据 viewcontroller 的视图计算的，如果您的按钮位于任何其他视图内，那么它将根据该视图计算其坐标，并且定位将不正确。

# javascript - 使用 Leaflet.Draw 在单击时删除矩形

> ID：15406020
> 
> 赞同：1
> 
> 时间：2013-03-14T09:56:34.123
> 
> 标签：javascript, leaflet

是否可以在创建矩形后立即删除它我试图这样做：

```
map.on('draw:created', function (e) {
var type = e.layerType,
layer = e.layer;

if (type === 'rectangle') {
  layer.on('click', function (event) {
    alert(event.target.getLatLngs());
    event.target.removeControl();
  });
} 
```

原因是，我喜欢在矩形内获取所有标记。但是在我得到 Lat 和 lng 之后，我只想再次删除/删除它。目前，我在调试时将其用于单击事件。最好的问候莫滕斯塔克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:24:02.950

好的。我找到了解决问题的方法：

```
map.on('draw:created', function (e) {
    var type = e.layerType,
      layer = e.layer;
    drawnItems.clearLayers();
    if (type === 'rectangle') {
      //console.log(layer.getLatLngs());
      //console.log(layer.getBounds());
      //console.log(layer.getBounds().toBBoxString());
      //console.log(layer);
      $.get(ol.url('~/Map/FetchNewMarkers'), { bound: layer.getBounds().toBBoxString() }, function (data) {
        //console.log('From Controller: ' + data);
      });

    }
    //drawnItems.addLayer(layer);
  }); 
```

这是`drawItems.addLayer(layer)` 从事件中删除。

# java - 本地化不支持附加功能

> ID：15406021
> 
> 赞同：0
> 
> 时间：2013-03-14T09:56:34.357
> 
> 标签：java, localization

我的程序将 String 7_example 转换为 Arabic.String 分为两个`s[0]=7`和`s[1]=example`. 字符串 s[1] 被转换为阿拉伯语并存储为字符串缓冲区，然后我的任务是在结束位置附加 7，因为我使用如下的 append 函数 `convertedWord.append(s[0]);`

为什么我在起始位置得到 7？为什么在这种情况下附加功能不同。我也尝试过使用字符串附加，但结果是一样的。

```
public String conversion(String data)
{
ResourceBundle obj1 = ResourceBundle.getBundle("ApplicationResources_ar_AR");
data= obj1.getString(Queries);  
return data;
} 
```

*如果是字母或单词，它最后附加，但对于数字，它首先出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:39:25.100

我猜这是因为阿拉伯语是从右到左的，所以 7 实际上是在字符串的末尾，但它显示在开头的位置。

您可以尝试通过两件事来解决您的问题：

**I - 添加一个额外的虚拟字符，然后检查 7 是否显示在末尾（您可以尝试空格）。**

代码：

```
StringBuffer s = new StringBuffer();
s.append(convertedWord);
s.append("7.");
String result = s.toString(); 
```

**II - 在起始位置附加 7（使用 StringBuffer，检查有无空格）**

代码：

```
StringBuffer s = new StringBuffer();
s.append(convertedWord);
s.insert(0," 7 ");
String result = s.toString(); 
```

# java - 关于 View.onScrollChanged() 的来源

> ID：15406025
> 
> 赞同：1
> 
> 时间：2013-03-14T09:56:39.863
> 
> 标签：java, android, view, android-source

以下是 的来源[`protected void View.onScrollChanged(int l, int t, int oldl, int oldt)`](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/view/View.java)：

```
/**
 * This is called in response to an internal scroll in this view (i.e., the
 * view scrolled its own contents). This is typically as a result of
 * {@link #scrollBy(int, int)} or {@link #scrollTo(int, int)} having been
 * called.
 *
 * @param l Current horizontal scroll origin.
 * @param t Current vertical scroll origin.
 * @param oldl Previous horizontal scroll origin.
 * @param oldt Previous vertical scroll origin.
 */
protected void onScrollChanged(int l, int t, int oldl, int oldt) {
    if (AccessibilityManager.getInstance(mContext).isEnabled()) {
        postSendViewScrolledAccessibilityEventCallback();
    }

    mBackgroundSizeChanged = true;

    final AttachInfo ai = mAttachInfo;
    if (ai != null) {
        ai.mViewScrollChanged = true;
    }
} 
```

问题是关于这一行：`final AttachInfo ai = mAttachInfo;`. 引入的目的`ai`是什么以及为什么要制作它`final`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:22:23.130

最有可能的`mAttachInfo`是`volatile`；那么 的目的`ai`是避免`NullPOinterException`当两个线程访问这个对象并`mAttachInfo`在检查之后`mAttachInfo!=null`但在执行之前写入`mAttachInfo.mViewScrollChanged = true;`

# r - 抑制 Knitr / Rmarkdown 中的消息

> ID：15406028
> 
> 赞同：32
> 
> 时间：2013-03-14T09:56:42.530
> 
> 标签：r, knitr, r-markdown

这是我的 RMarkdown 文件的代码：

```
```{r echo=FALSE, message=FALSE}
opts_chunk$set(comment = NA, echo=FALSE, message = FALSE, warnings = FALSE)
options("getSymbols.warning4.0"=FALSE)
Sys.setenv(TZ = "GMT")
library(quantmod)
library(xtable)
library(PerformanceAnalytics)
```

```{r}
getSymbols("^RUT")
chart.TimeSeries(RUT)
dev.off()
``` 
```

尽管进行了设置`message = FALSE, warnings = FALSE`，但当我运行`getSymbols()`和`dev.off()`. 他们各自的输出是：

```
[1] "RUT" 
```

和

```
null device 
          1 
```

如何抑制这些消息？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-10-17T02:55:24.243

也遇到了这个问题，我想补充一下，应该`warning = FALSE,`不是`warnings = FALSE`

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-03-14T10:08:50.027

`dev.off()`使用时您永远不需要使用`knitr`. 它负责创建绘图的所有设备。

来自包作者一[辉](http://yihui.name/en/2012/06/enjoyable-reproducible-research/)

![只要你 dev.off()，上帝就会杀死一只小猫](../Images/4fbf2b0bda887c288c7ece24fec5c8b8.png)

```
null device 
          1 
```

是 的输出`dev.off()`。

`getSymbols`鉴于您尚未定义，可能会返回某些内容`env`

如果您想隐藏结果 ( `output`)（通常），您可以将`results = 'hide'`其用作选项。无需包裹任何东西`invisible()`

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-14T10:03:58.880

尝试使用`invisible`来抑制这些类型的输出。

```
```{r}
invisible(getSymbols("^RUT"))
chart.TimeSeries(RUT)
invisible(dev.off())
``` 
```

从帮助页面`?invisible`：

> 当希望函数返回可赋值但未赋值时不打印的值时，此函数很有用。

这些都不是“消息”或“警告”，而是实际的输出值。您会看到knitr 在输出中确实抑制了*消息*。`getSymbols`

# android - 三星 Galaxy Tab 2 未显示用于调试 android

> ID：15406032
> 
> 赞同：0
> 
> 时间：2013-03-14T09:56:47.393
> 
> 标签：android, eclipse

我正在使用三星galaxy tab2 gt-p3100在windows上的eclipse上调试android应用程序。我已经安装了 kies 的更新版本。我已经在设置中启用了 USB 调试选项。我也启动了几次 eclipse，而且选项卡仍然没有显示 deivce 在 eclipse 中的调试选项。我有另一部三星手机和我能够调试安卓应用程序。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:43:33.380

它有时会发生。重新启动您的 PC 并检查。您使用的是 Windows 7 吗？如果是，请等到设备找到驱动程序

# php - 如何在 PHP 中附加 JSON 文件？

> ID：15406034
> 
> 赞同：0
> 
> 时间：2013-03-14T09:56:49.220
> 
> 标签：php, ajax, json

```
<?php
if(file_exists("upload.json"))
{

// For GETTING Values as an Associative Array...
$temp_array = array();
$temp_array = json_decode(file_get_contents('upload.json'),true);

 $upload_info = array('media_name'=>'b', 
 'media_category'=>'v','media_info'=>'c','media_location'=>'x','media_artist'=>'z');

 array_push($temp_array, $upload_info);

 file_put_contents('upload.json', json_encode($upload_info));
 }
else
{
$upload_info =array('media_name'=>'b',
'media_category'=>'v','media_info'=>'c','media_location'=>'x','media_artist'=>'z');

$json = json_encode($upload_info);

$file = "upload.json";

file_put_contents($file, json_encode($json));

}
?> 
```

我不能一起附加 JSON 文件：有什么解决方案吗？提前致谢 。

我想要以下顺序的 JSON 文件。

```
{
  "upload":
    {
     "image":[
        {
         "media_name": "b",
         "media_category": "v",
         "media_info": "c",
         "media_location": "x",
          "media_artist": "z"
       },
       {
        "media_name": "b",
        "media_category": "v",
        "media_info": "c",
        "media_location": "x",
        "media_artist": "z"
       }
   ]
  }
} 
```

我该怎么办 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:03:29.997

```
<?php
if(file_exists("upload.json"))
{
    $temp_array = array();
    $temp_array = json_decode(file_get_contents('upload.json'));
    $upload_info = array('media_name'=>'b','media_category'=>'v','media_info'=>'c','media_location'=>'x','media_artist'=>'z');
    array_push($temp_array->upload->image, $upload_info);
    file_put_contents('upload.json', json_encode($temp_array));
}
else
{
    $upload_info = array();
    $upload_info['upload']['image'][] = array('media_name'=>'b','media_category'=>'v','media_info'=>'c','media_location'=>'x','media_artist'=>'z');
    $json = json_encode($upload_info);
    $file = "upload.json";
    file_put_contents($file, $json);
}
?> 
```

这个只为你工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:13:33.523

试试这个：

```
$json_data = json_decode(file_get_contents('data.txt'), true);
for ($i = 0, $len = count($json_data); $i < $len; ++$i) {
    $json_data[$i]['num'] = (string) ($i + 1);
}
file_put_contents('data.txt', json_encode($json_data)); 
```

此处的示例：[使用 PHP 解析 JSON 文件](https://stackoverflow.com/questions/4343596/parsing-json-file-with-php)

# python - python中不同gdal版本的属性错误-gdal.RegisterAll

> ID：15406041
> 
> 赞同：1
> 
> 时间：2013-03-14T09:57:01.813
> 
> 标签：python, gdal, python-import

我编写了一个小型 python 程序，用于不同的操作系统和不同的**gdal**版本。

我正在使用 Debian Linux（Python 2.7.3 和 Gdal 1.9.0），在我的代码开头我通常调用

```
import gdal
gdal.RegisterAll() 
```

但是，我的程序的多个用户报告说，在没有 gdal 版本（例如 1.9.2）的情况下，这会引发一个 AttributeError（AttributeError：'module' 对象没有属性 'AllRegister'”），表示该`RegisterAll()`函数是未知的。Windows 和 Linux 系统都报告了此错误。

任何人都知道发生了什么变化以及是否仍需要在较新的 gdal 版本中注册驱动程序？这可能是开发者邮件列表的问题，但也许有些人正在阅读这篇文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:38:22.453

不要使用它——这是不必要的。来自[GDAL API 教程](http://www.gdal.org/gdal_tutorial.html)：

> 导入 gdal 模块时，Python 会自动调用 GDALAllRegister()。

# matlab - 使用 MATLAB 图形中的数据工具将 XTickLabel 显示为坐标

> ID：15406045
> 
> 赞同：2
> 
> 时间：2013-03-14T09:57:19.800
> 
> 标签：matlab, matlab-figure

我需要在 MATLAB 中显示一个条形图，其中`XTick`s 将由标签的单元格数组标记。截至目前，我`XTickLabel`在图底部沿 x 轴显示 s，但由于图中有大量条形，我想使用数据工具，这样当我选择特定条形时，对应的`XTickLabel`应该显示为它的`X`坐标而不是它的数字索引。

一个简单的例子是：

```
x=[1 2 3];
xd={'a','b','c'};
bar(x);
set(gca,'ylim',[0,5],'xticklabel',xd); 
```

我想要的地方

```
X = a
Y = 1 
```

在结果图中选择第一个栏时显示。

帮助将不胜感激！

PS 默认情况下，我不希望在条形顶部显示标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:35:30.513

进入数据光标模式并选择一个条形图。

现在右键单击数据点，然后从菜单中选择“编辑文本更新功能...”。

![在此处输入图像描述](../Images/7c1c76259ae6aed5f664b3bc281e86ca.png)

修改函数如下：

```
function output_txt = myfunction(obj,event_obj)
    pos = get(event_obj, 'Position');
    lab = get(gca, 'XTickLabel');
    if isa(lab,'double')
        lab = arrayfun(@(x){num2str(x)},lab);
    end
    output_txt = {['X: ', lab{pos(1)}], ['Y: ', num2str(pos(2),4)]};
end 
```

首先，这会获取一组 xticklabels 并将它们存储在`lab`.

然后它检查它们是否实际上是双精度数，而不是字符串单元数组，并在必要时转换它们。

最后它显示正确标签的文本。

将回调另存为`myfunction.m`，您应该是金色的：

![在此处输入图像描述](../Images/85c1521097d717c89e3040aaf9510a4b.png)

如果您想以编程方式执行此操作，则需要获取相关图形的数据游标管理器。像这样的东西应该工作：

```
>> bar([1,2,3])
>> dcm = datacursormode(gcf);
>> set(dcm, 'UpdateFcn', @(a,b) {'Hello', 'World'}) 
```

其中第三个参数`set`是要用于设置文本的函数的句柄（例如，`@myfunction`如果您将前一个函数保存为 ，则可以使用`myfunction.m`）。这给了你这样的东西：

![在此处输入图像描述](../Images/7aecb540ea44fe9b0c6df661d24080a4.png)

# python - 读取多个爆炸文件（biopython）

> ID：15406046
> 
> 赞同：1
> 
> 时间：2013-03-14T09:57:20.597
> 
> 标签：python, biopython

我正在尝试读取通过向 NCBI 爆炸网站提交的多个序列生成的 XML 文件列表。从每个文件中，我想打印某些信息行。我要阅读的文件都以`"_recombination.xml"`.

```
for file in glob.glob("*_recombination.xml"):
    result_handle= open(file)
    blast_record=NCBIXML.read(result_handle)
    for alignment in blast_record.alignments:
        for hsp in alignment.hsps:
            print "*****Alignment****"
            print "sequence:", alignment.title
            print "length:", alignment.length
            print "e-value:", hsp.expect
            print hsp.query
            print hsp.match
            print hsp.sbjct 
```

该脚本首先找到所有带有`"_recombination.xml"`后缀的文件，然后我希望它读取每个文件，并打印某些行（这几乎是 BioPython 食谱的直接副本），这似乎是这样做的。但我收到以下错误：

```
Traceback (most recent call last):
File "Scripts/blast_test.py", line 202, in <module>
blast_record=NCBIXML.read(result_handle)
File "/Library/Python/2.7/site-packages/Bio/Blast/NCBIXML.py", line 576, in read
first = iterator.next()
File "/Library/Python/2.7/site-packages/Bio/Blast/NCBIXML.py", line 643, in parse
expat_parser.Parse("", True) # End of XML record
xml.parsers.expat.ExpatError: no element found: line 3106, column 7594 
```

我不确定问题是什么。我不确定它是否试图循环回它已经读取的文件 - 例如，关闭文件似乎有帮助：

```
for file in glob.glob("*_recombination.xml"):
    result_handle= open(file)
    blast_record=NCBIXML.read(result_handle)
    for alignment in blast_record.alignments:
        for hsp in alignment.hsps:
            print "*****Alignment****"
            print "sequence:", alignment.title
            print "length:", alignment.length
            print "e-value:", hsp.expect
            print hsp.query
            print hsp.match
            print hsp.sbjct
    result_handle.close()
    blast_record.close() 
```

但这也给了我另一个错误：

```
Traceback (most recent call last): 
File "Scripts/blast_test.py", line 213, in <module> blast_record.close() 
AttributeError: 'Blast' object has no attribute 'close' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-13T18:16:18.057

我通常使用**parse**方法而不是**read**，也许它可以帮助你：

```
for blast_record in NCBIXML.parse(open(input_xml)):
    for alignment in blast_record.alignments:
        for hsp in alignment.hsps:
            print "*****Alignment****"
            print "sequence:", alignment.title
            print "length:", alignment.length
            print "e-value:", hsp.expect
            print hsp.query
            print hsp.match
            print hsp.sbjct 
```

并确保在您的查询爆炸中使用**-outfmt 5生成您的 xml**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T13:22:30.330

我会在 Biogeek 答案中添加评论，但我不能（还没有足够的声誉）。事实上他是对的，你应该使用

```
NCBIXML.parse(open(input_xml)) 
```

而不是 NCBIXML.read(open(input_xml)) 因为您正在“尝试读取 XML 文件列表”，而对于您需要**解析**而不是**读取**的 XML 文件列表。它解决了你的问题吗？

# web-services - Web 服务没有以自上而下的方式获取 xsd 文件

> ID：15406047
> 
> 赞同：0
> 
> 时间：2013-03-14T09:57:20.957
> 
> 标签：web-services, jakarta-ee, xsd, wsdl

我正在尝试从需要 xsd 文件的 wsdl 文件（自上而下方法）生成 Web 服务。我已成功创建 Web 服务。当我从 Eclipse 的浏览器测试 web 服务时，它工作正常，但是当我从其他应用程序测试它时（在我的情况下，我正在测试 WSO2 ESB-Try it 部分中生成的服务），它没有给我任何输出。问题是从 Eclipse 外部调用时，服务没有获取 xsd 文件。那么我该如何解决这个与 xsd 相关的问题我的 wsdl：

```
<wsdl:definitions targetNamespace="http://www.openoandm.org/xml/CIR/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://www.openoandm.org/xml/CIR/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/">
  <wsdl:types>
    <xs:schema elementFormDefault="qualified" targetNamespace="http://www.openoandm.org/xml/CIR/" xmlns:cct="urn:un:unece:uncefact:documentation:standard:CoreComponentType:2">
            <xs:import namespace="urn:un:unece:uncefact:documentation:standard:CoreComponentType:2" schemaLocation="CIRService?xsd=CoreComponentType_2p0.xsd"/>
            <xs:include schemaLocation="CIRService?xsd=CommonInteroperabilityRegistry.xsd"/>

                            <xs:element name="GetEquivalentEntriesByCIRID">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="1" minOccurs="1" name="ExistingCIRID" type="cct:IDType"/>
                        <xs:element maxOccurs="unbounded" minOccurs="0" name="TargetSourceID" type="cct:IDType"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
            <xs:element name="GetEquivalentEntriesByCIRIDResponse">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element maxOccurs="1" minOccurs="0" name="Registry" type="tns:Registry"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:schema>
  </wsdl:types>
  <wsdl:message name="DeletePropertiesIn">
    <wsdl:part name="parameters" element="tns:DeleteProperties">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="CreateRegistryOut">
    <wsdl:part name="parameters" element="tns:CreateRegistryResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="DeleteEntriesIn">
    <wsdl:part name="parameters" element="tns:DeleteEntries">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="GetRegistryOut">
    <wsdl:part name="parameters" element="tns:GetRegistryResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="DeleteCategoryOut">
    <wsdl:part name="parameters" element="tns:DeleteCategoryResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="UpdateRegistryIn">
    <wsdl:part name="parameters" element="tns:UpdateRegistry">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="DeleteRegistryIn">
    <wsdl:part name="parameters" element="tns:DeleteRegistry">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="DuplicateEntryFault">
    <wsdl:part name="parameters" element="tns:DuplicateEntryFault">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="DeletePropertiesOut">
    <wsdl:part name="parameters" element="tns:DeletePropertiesResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="DeleteRegistryOut">
    <wsdl:part name="parameters" element="tns:DeleteRegistryResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="RegistryNotFoundFault">
    <wsdl:part name="parameters" element="tns:RegistryNotFoundFault">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="PropertyNotFoundFault">
    <wsdl:part name="parameters" element="tns:PropertyNotFoundFault">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="EntryNotFoundFault">
    <wsdl:part name="parameters" element="tns:EntryNotFoundFault">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="UpdateEntryCIRIDOut">
    <wsdl:part name="parameters" element="tns:UpdateEntryCIRIDResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="GetRegistryIn">
    <wsdl:part name="parameters" element="tns:GetRegistry">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="GetEquivalentEntriesByCIRIDOut">
    <wsdl:part name="parameters" element="tns:GetEquivalentEntriesByCIRIDResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="GetEquivalentEntriesByCIRIDIn">
    <wsdl:part name="parameters" element="tns:GetEquivalentEntriesByCIRID">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="CreateRegistryFault">
    <wsdl:part name="parameters" element="tns:CreateRegistryFault">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="CreateRegistryIn">
    <wsdl:part name="parameters" element="tns:CreateRegistry">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="GetEquivalentEntriesIn">
    <wsdl:part name="parameters" element="tns:GetEquivalentEntries">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="UpdateEntryCIRIDIn">
    <wsdl:part name="parameters" element="tns:UpdateEntryCIRID">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="CreateEquivalentEntryIn">
    <wsdl:part name="parameters" element="tns:CreateEquivalentEntry">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="GetEquivalentEntriesOut">
    <wsdl:part name="parameters" element="tns:GetEquivalentEntriesResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="DeleteCategoryIn">
    <wsdl:part name="parameters" element="tns:DeleteCategory">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="DuplicatePropertyFault">
    <wsdl:part name="parameters" element="tns:DuplicatePropertyFault">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="CategoryNotFoundFault">
    <wsdl:part name="parameters" element="tns:CategoryNotFoundFault">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="CreateCategoryFault">
    <wsdl:part name="parameters" element="tns:CreateCategoryFault">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="DeleteEntriesOut">
    <wsdl:part name="parameters" element="tns:DeleteEntriesResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="CreateEquivalentEntryOut">
    <wsdl:part name="parameters" element="tns:CreateEquivalentEntryResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="UpdateRegistryOut">
    <wsdl:part name="parameters" element="tns:UpdateRegistryResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:portType name="CIRService">
    <wsdl:operation name="CreateRegistry">
<wsdl:documentation>Creates a new Registry, new Category in a
                Registry, new Entries in a Category, and Properties with Values in
                an Entry.</wsdl:documentation>
      <wsdl:input message="tns:CreateRegistryIn">
    </wsdl:input>
      <wsdl:output message="tns:CreateRegistryOut">
    </wsdl:output>
      <wsdl:fault name="DuplicatePropertyFault" message="tns:DuplicatePropertyFault">
    </wsdl:fault>
      <wsdl:fault name="CreateRegistryFault" message="tns:CreateRegistryFault">
    </wsdl:fault>
      <wsdl:fault name="DuplicateEntryFault" message="tns:DuplicateEntryFault">
    </wsdl:fault>
      <wsdl:fault name="CreateCategoryFault" message="tns:CreateCategoryFault">
    </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="CreateEquivalentEntry">
<wsdl:documentation>Creates a single Entry and associated Properties,
                and links the new Entry to an existing equivalent Entry. Returns the
                CIRID of the newly created Entry.</wsdl:documentation>
      <wsdl:input message="tns:CreateEquivalentEntryIn">
    </wsdl:input>
      <wsdl:output message="tns:CreateEquivalentEntryOut">
    </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault" message="tns:CategoryNotFoundFault">
    </wsdl:fault>
      <wsdl:fault name="DuplicateEntryFault" message="tns:DuplicateEntryFault">
    </wsdl:fault>
      <wsdl:fault name="EntryNotFoundFault" message="tns:EntryNotFoundFault">
    </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault" message="tns:RegistryNotFoundFault">
    </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="UpdateRegistry">
<wsdl:documentation>Updates the attributes of existing Registries,
                Categories, Entries or Properties.</wsdl:documentation>
      <wsdl:input message="tns:UpdateRegistryIn">
    </wsdl:input>
      <wsdl:output message="tns:UpdateRegistryOut">
    </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault" message="tns:CategoryNotFoundFault">
    </wsdl:fault>
      <wsdl:fault name="EntryNotFoundFault" message="tns:EntryNotFoundFault">
    </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault" message="tns:RegistryNotFoundFault">
    </wsdl:fault>
      <wsdl:fault name="PropertyNotFoundFault" message="tns:PropertyNotFoundFault">
    </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="UpdateEntryCIRID">
<wsdl:documentation>Replaces the CIRID field on matching Entries with
                a new CIRID value.</wsdl:documentation>
      <wsdl:input message="tns:UpdateEntryCIRIDIn">
    </wsdl:input>
      <wsdl:output message="tns:UpdateEntryCIRIDOut">
    </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="DeleteRegistry">
<wsdl:documentation>Deletes the specified Registry along with its
                Categories, Entries and Properties.</wsdl:documentation>
      <wsdl:input message="tns:DeleteRegistryIn">
    </wsdl:input>
      <wsdl:output message="tns:DeleteRegistryOut">
    </wsdl:output>
      <wsdl:fault name="RegistryNotFoundFault" message="tns:RegistryNotFoundFault">
    </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="DeleteCategory">
<wsdl:documentation>Deletes the specified Category along with its
                Entries and Properties.</wsdl:documentation>
      <wsdl:input message="tns:DeleteCategoryIn">
    </wsdl:input>
      <wsdl:output message="tns:DeleteCategoryOut">
    </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault" message="tns:CategoryNotFoundFault">
    </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault" message="tns:RegistryNotFoundFault">
    </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="DeleteEntries">
<wsdl:documentation>Deletes the specified Entries along with its
                Properties.</wsdl:documentation>
      <wsdl:input message="tns:DeleteEntriesIn">
    </wsdl:input>
      <wsdl:output message="tns:DeleteEntriesOut">
    </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault" message="tns:CategoryNotFoundFault">
    </wsdl:fault>
      <wsdl:fault name="EntryNotFoundFault" message="tns:EntryNotFoundFault">
    </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault" message="tns:RegistryNotFoundFault">
    </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="DeleteProperties">
<wsdl:documentation>Deletes the specified Properties.
            </wsdl:documentation>
      <wsdl:input message="tns:DeletePropertiesIn">
    </wsdl:input>
      <wsdl:output message="tns:DeletePropertiesOut">
    </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault" message="tns:CategoryNotFoundFault">
    </wsdl:fault>
      <wsdl:fault name="EntryNotFoundFault" message="tns:EntryNotFoundFault">
    </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault" message="tns:RegistryNotFoundFault">
    </wsdl:fault>
      <wsdl:fault name="PropertyNotFoundFault" message="tns:PropertyNotFoundFault">
    </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetRegistry">
<wsdl:documentation>Returns all Registries, Categories, Entries and
                Properties filtered by the specified conditions.
            </wsdl:documentation>
      <wsdl:input message="tns:GetRegistryIn">
    </wsdl:input>
      <wsdl:output message="tns:GetRegistryOut">
    </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetEquivalentEntries">
<wsdl:documentation>Returns any equivalent Entries to the specified
                existing Entries (i.e. by identifying all Entries with the same
                CIRID to the existing Entries). Multiple entries are specified by
                IDInSource and SourceID pairs. A TargetSourceID or list of
                TargetSourceIDs can be specified to filter returned Entries.
            </wsdl:documentation>
      <wsdl:input message="tns:GetEquivalentEntriesIn">
    </wsdl:input>
      <wsdl:output message="tns:GetEquivalentEntriesOut">
    </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetEquivalentEntriesByCIRID">
<wsdl:documentation>Returns any equivalent Entries to the specified
                existing Entry (i.e. by identifying all other Entries with the same
                CIRID to the existing Entry). An Entry is specified by CIRID. A
                Target SourceID or list of SourceIDs can be specified to filter
                returned Entries.</wsdl:documentation>
      <wsdl:input message="tns:GetEquivalentEntriesByCIRIDIn">
    </wsdl:input>
      <wsdl:output message="tns:GetEquivalentEntriesByCIRIDOut">
    </wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="CIRServiceSoap12" type="tns:CIRService">
    <soap12:binding transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="CreateRegistry">
      <soap12:operation soapAction="http://www.openoandm.org/xml/CIR/CreateRegistry" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="DuplicatePropertyFault">
        <soap12:fault name="DuplicatePropertyFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="CreateRegistryFault">
        <soap12:fault name="CreateRegistryFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="DuplicateEntryFault">
        <soap12:fault name="DuplicateEntryFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="CreateCategoryFault">
        <soap12:fault name="CreateCategoryFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="CreateEquivalentEntry">
      <soap12:operation soapAction="http://www.openoandm.org/xml/CIR/CreateEquivalentEntry" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault">
        <soap12:fault name="CategoryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="DuplicateEntryFault">
        <soap12:fault name="DuplicateEntryFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="EntryNotFoundFault">
        <soap12:fault name="EntryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault">
        <soap12:fault name="RegistryNotFoundFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="UpdateRegistry">
      <soap12:operation soapAction="http://www.openoandm.org/xml/CIR/UpdateRegistry" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault">
        <soap12:fault name="CategoryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="EntryNotFoundFault">
        <soap12:fault name="EntryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault">
        <soap12:fault name="RegistryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="PropertyNotFoundFault">
        <soap12:fault name="PropertyNotFoundFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="UpdateEntryCIRID">
      <soap12:operation soapAction="http://www.openoandm.org/xml/CIR/UpdateEntryCIRID" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="DeleteRegistry">
      <soap12:operation soapAction="http://www.openoandm.org/xml/CIR/DeleteRegistry" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="RegistryNotFoundFault">
        <soap12:fault name="RegistryNotFoundFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="DeleteCategory">
      <soap12:operation soapAction="http://www.openoandm.org/xml/CIR/DeleteCategory" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault">
        <soap12:fault name="CategoryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault">
        <soap12:fault name="RegistryNotFoundFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="DeleteEntries">
      <soap12:operation soapAction="http://www.openoandm.org/xml/CIR/DeleteEntries" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault">
        <soap12:fault name="CategoryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="EntryNotFoundFault">
        <soap12:fault name="EntryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault">
        <soap12:fault name="RegistryNotFoundFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="DeleteProperties">
      <soap12:operation soapAction="http://www.openoandm.org/xml/CIR/DeleteProperties" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault">
        <soap12:fault name="CategoryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="EntryNotFoundFault">
        <soap12:fault name="EntryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault">
        <soap12:fault name="RegistryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="PropertyNotFoundFault">
        <soap12:fault name="PropertyNotFoundFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetRegistry">
      <soap12:operation soapAction="http://www.openoandm.org/xml/CIR/GetRegistry" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetEquivalentEntries">
      <soap12:operation soapAction="http://www.openoandm.org/xml/CIR/GetEquivalentEntries" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetEquivalentEntriesByCIRID">
      <soap12:operation soapAction="http://www.openoandm.org/xml/CIR/GetEquivalentEntriesByCIRID" style="document"/>
      <wsdl:input>
        <soap12:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap12:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:binding name="CIRServiceSoap" type="tns:CIRService">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="CreateRegistry">
      <soap:operation soapAction="http://www.openoandm.org/xml/CIR/CreateRegistry" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="DuplicatePropertyFault">
        <soap:fault name="DuplicatePropertyFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="CreateRegistryFault">
        <soap:fault name="CreateRegistryFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="DuplicateEntryFault">
        <soap:fault name="DuplicateEntryFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="CreateCategoryFault">
        <soap:fault name="CreateCategoryFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="CreateEquivalentEntry">
      <soap:operation soapAction="http://www.openoandm.org/xml/CIR/CreateEquivalentEntry" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault">
        <soap:fault name="CategoryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="DuplicateEntryFault">
        <soap:fault name="DuplicateEntryFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="EntryNotFoundFault">
        <soap:fault name="EntryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault">
        <soap:fault name="RegistryNotFoundFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="UpdateRegistry">
      <soap:operation soapAction="http://www.openoandm.org/xml/CIR/UpdateRegistry" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault">
        <soap:fault name="CategoryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="EntryNotFoundFault">
        <soap:fault name="EntryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault">
        <soap:fault name="RegistryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="PropertyNotFoundFault">
        <soap:fault name="PropertyNotFoundFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="UpdateEntryCIRID">
      <soap:operation soapAction="http://www.openoandm.org/xml/CIR/UpdateEntryCIRID" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="DeleteRegistry">
      <soap:operation soapAction="http://www.openoandm.org/xml/CIR/DeleteRegistry" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="RegistryNotFoundFault">
        <soap:fault name="RegistryNotFoundFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="DeleteCategory">
      <soap:operation soapAction="http://www.openoandm.org/xml/CIR/DeleteCategory" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault">
        <soap:fault name="CategoryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault">
        <soap:fault name="RegistryNotFoundFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="DeleteEntries">
      <soap:operation soapAction="http://www.openoandm.org/xml/CIR/DeleteEntries" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault">
        <soap:fault name="CategoryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="EntryNotFoundFault">
        <soap:fault name="EntryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault">
        <soap:fault name="RegistryNotFoundFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="DeleteProperties">
      <soap:operation soapAction="http://www.openoandm.org/xml/CIR/DeleteProperties" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="CategoryNotFoundFault">
        <soap:fault name="CategoryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="EntryNotFoundFault">
        <soap:fault name="EntryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="RegistryNotFoundFault">
        <soap:fault name="RegistryNotFoundFault" use="literal"/>
      </wsdl:fault>
      <wsdl:fault name="PropertyNotFoundFault">
        <soap:fault name="PropertyNotFoundFault" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="GetRegistry">
      <soap:operation soapAction="http://www.openoandm.org/xml/CIR/GetRegistry" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetEquivalentEntries">
      <soap:operation soapAction="http://www.openoandm.org/xml/CIR/GetEquivalentEntries" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="GetEquivalentEntriesByCIRID">
      <soap:operation soapAction="http://www.openoandm.org/xml/CIR/GetEquivalentEntriesByCIRID" style="document"/>
      <wsdl:input>
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="CIRService">
    <wsdl:port name="CIRServiceSoap" binding="tns:CIRServiceSoap">
      <soap:address location="http://localhost:8080/CIRService/services/CIRService.CIRServiceSoap/"/>
    </wsdl:port>
    <wsdl:port name="CIRServiceSoap12" binding="tns:CIRServiceSoap12">
      <soap12:address location="http://localhost:8080/CIRService/services/CIRService.CIRServiceSoap12/"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:55:52.030

您可以在您的客户端 JAR 中包含您的原始 WSDL。您`wsimport`的客户应该已经按照以下几行生成了一个客户服务类：

```
@WebServiceClient(name = "TestClient", targetNamespace = "http://namespace", wsdlLocation = "file:/somewhere")
public class TestClient extends Service
{

    private final static URL TESTSERVICE_WSDL_LOCATION;

    static {
        URL url = null;
        try {
            URL baseUrl;
            baseUrl = test.clientTestClient.class.getResource(".");
            url = new URL(baseUrl, "file:/somewhere");
        } catch (MalformedURLException e) {
            logger.warning("Failed to create URL for the wsdl Location: 'file:/somewhere', retrying as a local file");
            logger.warning(e.getMessage());
        }
        TESTSERVICE_WSDL_LOCATION = url;
    }

    public TestClient(URL wsdlLocation, QName serviceName) {
        super(wsdlLocation, serviceName);
    }

    public TestClient() {
        super(TESTSERVICE_WSDL_LOCATION, new QName("http://namespace", "TestClient"));
    }

    /* ... more stuff ... */

} 
```

您现在可以像这样创建服务实例：

```
new TestClient(getClass().getResource("/wsdlthatisincludedinclientjar.wsdl"), new QName("http://namespace", "TestClient")); 
```

现在，您只需将（预先存在的）WSDL（以及所有依赖的 XSD）放在客户端 JAR 的根目录下。唯一剩下的问题是所有依赖的 XSD 都需要由 WSDL 中的相对 URI 引用。但由于这是您预先存在的 WSDL，您可以随时根据自己的喜好对其进行编辑。

# javascript - 在javascript中将字符串放在引号内

> ID：15406049
> 
> 赞同：0
> 
> 时间：2013-03-14T09:57:28.177
> 
> 标签：javascript, html, string, quotation-marks

我试图在一个字符串中获取一个字符串的内容，用双引号 (") 分隔。我的 HTML 如下：

```
<body>
  <div>
    sqlString = "UPDATE galleria SET image_description = @image_description WHERE id = " + image.Id;
  </div>
</body> 
```

我正试图得到

```
UPDATE galleria SET image_description = @image_description WHERE id = 
```

通过我的javascript作为单个字符串。我知道这可能使用 indexOf 或一些相关方法，但我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:01:58.507

在 sqlString 变量上试试这个

```
var lastIndex = sqlString.lastIndexOf("=");
var subString = sqlString.substring(1, lastIndex); 
```

subString 应包含您所需的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:21:59.947

给你 DIV 标签一个 id 属性，并通过该 id 引用 div。

```
<body>
   <div id="div1">
     sqlString = "UPDATE galleria SET image_description = @image_description WHERE id = " + image.Id;
  </div>
</body> 
```

然后使用正则表达式匹配字符串：

```
var $div = document.getElementById('div1');
var matches = $div.innerHTML.match(/(?!")([^"]+)/g);

if(matches!==null) {
    alert(matches[1]); 
} 
```

# jquery - 在提交表单之前验证用户是否选择了 jquery 可折叠部分

> ID：15406053
> 
> 赞同：0
> 
> 时间：2013-03-14T09:57:35.493
> 
> 标签：jquery, codeigniter, validation

我有一个 Codeigniter 表单，我想对其进行一些验证。我的问题是我正在使用 JQuery 可折叠列表视图（不确定技术名称，下图）

![在此处输入图像描述](../Images/44007c548106ade08e725cf2f863af7e.png)

在用户提交表单之前，我想确保他们已经选择了“节标题”，其次他们已经在该节标题中提供了所需的详细信息。

这可以通过codeigniter验证类来完成吗？如果没有，是否有javascript解决方案？

我的问题是没有为选定的标题分配复选框或值，因此没有发布任何信息。不确定是否有在选择时更改的 jQuery 字段？

提前致谢，

# image - 社交网站的博客图片

> ID：15406056
> 
> 赞同：0
> 
> 时间：2013-03-14T09:57:48.303
> 
> 标签：image, wordpress, blogs, social

当我将图片放在我的博客上并且它们被包含在 Google plus 等社交网站中时，Google 似乎只是抓取了它发现的第一张图片以包含在帖子中。但是我希望它在页面上包含一个特定的图像。在图像标签上是否有为此设置的特定属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:26:08.270

首先，确保为您的帖子设置了“特色图片”。您甚至不需要将其包含在帖子正文中，只需通过“添加媒体”按钮设置特色图片即可。

然后，您可以将`og:image`元属性添加到单个帖子标题中，以让其他站点自动获取此图像。

最简单的方法是安装一个 SEO 插件，例如[Yoast 的 WordPress SEO](http://wordpress.org/extend/plugins/wordpress-seo/)，它会自动创建“og:image”属性以及其他一些针对其他社交网络的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T09:32:17.427

社交媒体通常使用 Open Graph 标记来了解您的页面。例如，您可以告诉他们您博客文章的特色图片是什么，不会被截断的简短描述等。

```
<meta property="og:image" content="http://www.yourblog.com/yourimage.jpg" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Your title" />
<meta property="og:url" content="Your canonical URL" />
<meta property="og:description" content="Your description" />
<meta property="og:site_name" content="Your site name" /> 
```

我写了一个简短的指南来控制博客文章在社交媒体上的出现。例如，你知道新的 Twitter Cards 吗？ [如何让您的网站在社交媒体上看起来很棒](http://www.idea-r.it/blog/116/en/how-to-make-website-look-great-on-social-media)

# jquery - jquery.flot IE8 标签

> ID：15406058
> 
> 赞同：1
> 
> 时间：2013-03-14T09:57:54.450
> 
> 标签：jquery, google-chrome, internet-explorer-8, flot

jquery.flot 插件有一些小问题。当我在 IE 8 中测试我的图表时，似乎字体会自动更改。

来自 IE8 的截图 ![截图 IE 8](../Images/a3e6aadd9f881b53d5004ad07a753274.png)

来自 Chrome 的屏幕截图 ![屏幕截图 Chrome](../Images/70b39c218abb12dcb04c9587d16779ce.png)

你们中有人有同样的问题吗？我无法弄清楚问题出在哪里。

谢谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:11:44.910

（答案改编自我的评论）

Flot 0.8 alpha 包含将文本直接渲染到画布的更改。在测试版发布前不久，它被拆分为一个插件，核心功能恢复为使用 HTML 文本，就像在早期版本的库中所做的那样。

然后字体更改似乎是 Excanvas/Flashcanvas 中的一个错误，具体取决于您使用的是哪个，在渲染到画布时它选择了错误的字体。一旦你升级到 0.8 测试版，文本再次留给浏览器，它做了正确的事情。

# node.js - node.js 中存储的模块变量在什么范围内？

> ID：15406062
> 
> 赞同：51
> 
> 时间：2013-03-14T09:58:03.170
> 
> 标签：node.js

当我在我的 node.js 模块中执行此操作时：

```
var abc = '123'; 
```

它去哪儿了？我的意思是：在浏览器中它进入`window.abc`（如果没有在函数中执行或以其他方式执行）

如果我执行这个：

```
abc = '123'; 
```

然后我可以在 中找到它`global.abc`，但这不是我想要的。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-03-14T13:53:17.667

与浏览器不同，默认情况下变量被分配给全局空间（即窗口），在 Node 中，变量的范围是模块（文件）*，除非您明确地*将它们分配给 module.exports。

实际上，当您运行`node myfile.js`或`require('somefile.js')`文件中的代码包装如下：

```
(function (exports, require, module, __filename, __dirname) {
     // your code is here
}); 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2016-02-16T12:48:39.273

所有其他答案都是 100% 正确的，但我想我会在 Node.js 应用程序中添加一个扩展/确定的范围列表，以防有人在开始学习 Node.js 或 JavaScript 时通过 Google 遇到这个问题：

### 全球范围

任何文件中没有关键字声明的`var`任何内容都可以从运行在同一节点服务器实例中的任何地方访问：

```
// foo.js
bar = 'baz';

// qux.js
console.log(bar); // prints 'baz' 
```

请注意，这被广泛认为是一个坏主意，因为它使您的应用程序强“耦合”——这意味着您必须打开 foo.js 才能`bar = 'baz'`在 qux.js 中找出原因

### 模块范围

`var`在 node.js 文件的顶层（不在函数或对象或任何其他块内）使用关键字声明的任何内容都在**模块范围内**，并且可以从同一文件中的任何地方访问，但不会存在于其他任何地方：

```
// foo.js
var bar = 'baz';
console.log(bar); // prints 'baz'

// qux.js
console.log(bar); // prints 'undefined' 
```

### 功能范围

在函数内使用关键字声明的任何内容`var`都只能从该函数内访问，而不能从其他任何地方访问：

```
// foo.js
function myFunction() {
  var bar = 'baz';
  console.log(bar); // prints 'baz'
}

function myOtherFunction() {
  console.log(bar); // prints 'undefined'
}

// qux.js
console.log(bar); // prints 'undefined' 
```

[JavaScript 是*函数作用域*](https://stackoverflow.com/questions/18465211/javascript-loop-variable-scope)的。与其他（*块范围*的）语言不同，在函数内的块中声明的变量*可以从该父函数的任何其他地方访问*。例如，这意味着如果您在循环内声明一个新变量，那么只要您仍在父函数内，它也可以在该循环外访问：

```
function myFunction() {
  while (thing === true) {
  var bar = 'baz';
  thing = false;
  }
  console.log(bar); // prints 'baz'
} 
```

### 阴影

如果您“重新声明”一个现有变量，例如使用`var`已经使用过的变量名的关键字，则与该变量名关联的值*将在新声明的范围内被覆盖*：

```
var bar = 'foo';
console.log(bar) // prints 'foo'

function myFunction() {
  var bar = 'baz';
  console.log(bar);
}
myFunction(); // prints 'baz'
console.log(bar) // prints 'foo' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-14T10:19:07.537

Node 有一个模块作用域，因此`var abc = '123'`在一个模块中将创建一个作用域为该模块的变量（因此，仅对其中的代码可访问）。

另请参阅[http://nodejs.org/api/globals.html#globals_global](http://nodejs.org/api/globals.html#globals_global)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-20T22:38:57.727

很老的问题，如果有人对这个问题的 ECMA 规范感到好奇，这里是[链接](https://tc39.github.io/ecma262/#sec-lexical-environments)

并且无法直接访问模块变量（导入的模块除外）：

> 词法环境和环境记录值纯粹是规范机制，不需要对应于 ECMAScript 实现的任何特定工件。ECMAScript 程序不可能直接访问或操作这些值。

# compoundjs - 我们如何为我们的 shema “compoudjs / jungglingdb”添加约束

> ID：15406065
> 
> 赞同：0
> 
> 时间：2013-03-14T09:58:13.633
> 
> 标签：compoundjs

我是初学者，我开始使用compoudjs，我使用jungglingdb 作为数据库和模块jungglung-postgres。我的问题是，如何向创建的表添加约束？我试试这个 var User = describe('User', function () { property('firstname', String); property('lastname', String); property('password', String,{ limit: 50); property( 'email', String {unique:true}); property('approved', Boolean); set('restPath', pathTo.users); }); 但它不工作

请帮忙。坦克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:30:22.117

好吧，我找到了一个解决方案：

在文件 nodes_modules/jugglingdb-postgres/lib/prostgres.js 中，通过添加约束将“datatype(p)”函数更改为此：

```
 function datatype(p) {
 var q='';
if(p.unique!= undefined && p.unique)
{     q=' unique ';
 console.log(typeof(p.unique));
//
}
if(p.primaryKey!=undefined &&p.primaryKey)
{
    q=' primary key ';
}
if(p.notNull!=undefined &&p.notNull)
{
    q=' not null ';
}
if(p.check!=undefined )
{   //il faut definire manualement la condition de verification 
    q=' check('+p.check+') ';
    console.log(typeof(p.check));
}
if(p.constraintline!= undefined)
    q= ' '+p.constraintline;
if(p.constraint!= undefined)
    q= ' ,constraint '+p.constraint;
switch (p.type.name) {
    default:
    case 'String':
    case 'JSON':
    return 'varchar'+q;
    case 'Text':
    return 'text' +q;
    case 'Number':
    return 'integer' + q;
    case 'Date':
    return 'timestamp' + q;
    case 'Boolean':
    return 'boolean' + q;
}}; 
```

# c++ - 全局（外部）变量的交叉初始化

> ID：15406066
> 
> 赞同：1
> 
> 时间：2013-03-14T09:58:16.910
> 
> 标签：c++, instantiation, extern

在初始化具有跨文件范围（extern）的变量时，我无法理解编译器/链接器如何生成实际代码。我的意思是，这些实例化的顺序是什么？当使用其他变量定义至少一个变量时，这似乎有问题......例如，这按预期工作：

主.cpp：

```
 #include <iostream>
    using namespace std;

    extern int varA;

    int varB=1;

    int main ()
     {
      cout << "varA = " << varA << endl;
      cout << "varB = " << varB << endl;
      system ("pause");
      return 0;
     } 
```

变量A.cpp

```
extern int varB;
int varA=varB; 
```

输出是：

```
varA = 1   --> as expected!!
varB = 1   --> as expected!! 
```

现在，以下稍微复杂一点的结果给出了**意想不到的结果**：

classB.h 文件：

```
#ifndef H_classB
#define H_classB

class classB {
public: 
    classB();
    int varB;
};

#endif 
```

classB.cpp 文件：

```
#include "classB.h"

classB myB;  // defined => cross-file scope by using extern in other files

classB::classB() {
    varB=1; // constructor initialized varB to 1
} 
```

classA.h 文件：

```
#ifndef H_classA
#define H_classA

class classA {
public: 
    classA();
    int varA;
};

#endif 
```

classA.cpp 文件：

```
#include "classA.h"
#include "classB.h"

extern classB myB;

classA myA; // defined => cross-file scope by using extern in other files

classA::classA() {
    varA=myB.varB;  // constructor initialized varA to the value of the instance
                    // variable varB of the pre-instantiated object myB (defined 
                    //in classB.cpp). 
} 
```

主.cpp：

```
#include <iostream>
using namespace std;

#include "classA.h"
#include "classB.h"

extern classA myA;
extern classB myB;

int main ()
{

  cout << "myA.varA = " << myA.varA << endl;
  cout << "myB.varB = " << myB.varB << endl;

  system ("pause");
  return 0;
} 
```

在这种情况下，输出为：

```
myA.varA = 0   --> WHY??? shouldn't it be 1? 
myB.varB = 1   --> as expected! 
```

这种行为背后的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:02:04.747

这是实现定义的，建议尽可能避免。

# javascript - 对除元素之外的整个页面产生影响

> ID：15406067
> 
> 赞同：0
> 
> 时间：2013-03-14T09:58:19.080
> 
> 标签：javascript, jquery, arrays, dom-events

我想将此代码放在我的页面上：

```
function addLink() {  
    var body_element = document.getElementsByTagName('body')[0];  
    var selection; selection = window.getSelection();  
    var pagelink = "<br /><br /> original: <a href='"+document.location.href+"'>"+document.location.href+"</a>";  
    var copytext = selection + pagelink;  
    var newdiv = document.createElement('div'); newdiv.style.position='absolute';  
    newdiv.style.left='-99999px';  
    body_element.appendChild(newdiv);  
    newdiv.innerHTML = copytext;  
    selection.selectAllChildren(newdiv);  
    window.setTimeout(function() {  
        body_element.removeChild(newdiv);  
    }, 0);
} 
document.oncopy = addLink; 
```

但是这个代码操作适用于所有标签，我不想在“textareas”中操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:06:58.333

测试`tagName`前`addlink()`

```
document.body.addEventListener('copy', function (e) {
    if (e.target.tagName === 'textarea') {
        return;
    }
    addlink()
} 
```

# c# - string.substring 与 string.take

> ID：15406072
> 
> 赞同：23
> 
> 时间：2013-03-14T09:58:35.073
> 
> 标签：c#, substring

如果只想取字符串的一部分，则多使用 substring 方法。这有一个缺点，您必须首先测试字符串的长度以避免错误。例如，您要将数据保存到数据库中，并希望将值截取到前 20 个字符。

如果您执行 temp.substring(0,20) 但 temp 仅包含 10 个字符，则会引发异常。

我看到了 2 个解决方案：

1.  测试长度，并在需要时执行子字符串
2.  使用扩展方法**Take**

    ```
     string temp = "1234567890";
        var data= new string( temp.Take(20).ToArray());
        --> data now holds "1234657890" 
    ```

当使用 Take 方法时，在速度或内存使用方面是否有任何劣势。好处是您不必编写所有这些 if 语句。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-14T10:05:57.203

如果你发现自己经常这样做，为什么不写一个扩展方法呢？

例如：

```
using System;

namespace Demo
{
    public static class Program
    {
        public static void Main(string[] args)
        {
            Console.WriteLine("123456789".Left(5));
            Console.WriteLine("123456789".Left(15));
        }
    }

    public static class StringExt
    {
        public static string Left(this string @this, int count)
        {
            if (@this.Length <= count)
            {
                return @this;
            }
            else
            {
                return @this.Substring(0, count);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-14T10:08:02.173

正如 Henk Holtermand 所说，`Take()`创建一个`IEnumerator`然后你需要`ToArray()`调用。

因此，如果**性能**在您的应用程序中很重要，或者您将在进程中多次执行子字符串，则性能可能是个问题。

我编写了一个示例程序来准确地测试该方法的速度有多慢`Take()`，结果如下：

一千万次测试：

*   执行子串的时间：**266 ms**
*   执行 take 操作的时间：**1437 ms**

这是代码：

```
 internal const int RETRIES = 10000000;

    static void Main(string[] args)
    {
        string testString = Guid.NewGuid().ToString();

        long timeSubstring = MeasureSubstring(testString);
        long timeTake = MeasureTake(testString);

        Console.WriteLine("Time substring: {0} ms, Time take: {1} ms",
            timeSubstring, timeTake);
    }

    private static long MeasureSubstring(string test)
    {
        long ini = Environment.TickCount;

        for (int i = 0; i < RETRIES; i++)
        {
            if (test.Length > 4)
            {
                string tmp = test.Substring(4);
            }
        }

        return Environment.TickCount - ini;
    }

    private static long MeasureTake(string test)
    {
        long ini = Environment.TickCount;

        for (int i = 0; i < RETRIES; i++)
        {
            var data = new string(test.Take(4).ToArray());
        }

        return Environment.TickCount - ini;
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-14T10:44:49.767

首先我不想回答（因为已经有有效的答案），但我想添加一些不适合作为评论的内容：

你在谈论性能/内存问题。对。正如其他人所说，`string.SubString`效率更高，因为它是如何在内部优化的，以及 LINQ 的工作方式`string.Take()`（字符枚举等）。

没有人说的是，`Take()`在您的情况下的主要缺点是**它完全破坏了 substring 的简单性**。正如蒂姆所说，要获得您想要的实际字符串，您必须编写：

```
string myString = new string(temp.Take(20).ToArray()); 
```

该死的......这比（参见马修的扩展方法）更难理解：

```
string myString = temp.Left(20); 
```

LINQ 非常适合许多用例，但如果没有必要，则不应使用。即使是一个简单的循环有时也比 LINQ 更好（即更快、更易读/易理解），所以想象一个简单的子字符串......

总结一下您的情况下的LINQ：

*   表现更差
*   可读性较差
*   不太容易理解
*   需要 LINQ（例如，不适用于 .Net 2.0）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-05T03:26:28.837

@Daniel 答案的变体对我来说似乎更准确。
Guid 的长度是 36。我们正在创建一个列表，其中包含从 1 到 36 的可变长度字符串，我们的目标是使用`substring`/`take`方法获取 18，所以大约一半会通过。

我得到的结果**表明**这`Take`将比. **`Substring`**

 **结果示例：

```
Build time: 3812 ms
Time substring: 391 ms, Time take: 1828 ms

Build time: 4172 ms
Time substring: 406 ms, Time take: 2141 ms 
```

因此，对于**500 万个字符串**，大约执行**250 万次操作**，总时间为**2.1 秒**，或大约**0.0008564 毫秒 =**每次操作约 1 微秒。如果你觉得你需要将它削减 5 以获取子字符串，那就去吧，但我怀疑在现实生活中，除了紧身衣循环之外，你会感觉到不同。

```
void Main()
{
    Console.WriteLine("Build time: {0} ms", BuildInput());
    Console.WriteLine("Time substring: {0} ms, Time take: {1} ms", MeasureSubstring(), MeasureTake());
}

internal const int RETRIES = 5000000;
static internal List<string> input;

// Measure substring time
private static long MeasureSubstring()
{
    var v = new List<string>();
    long ini = Environment.TickCount;

    foreach (string test in input)
        if (test.Length > 18)
        {
            v.Add(test.Substring(18));
        }
    //v.Count().Dump("entries with substring");
    //v.Take(5).Dump("entries with Sub");

    return Environment.TickCount - ini;
}

// Measure take time
private static long MeasureTake()
{
    var v = new List<string>();
    long ini = Environment.TickCount;

    foreach (string test in input)
        if (test.Length > 18) v.Add(new string(test.Take(18).ToArray()));

    //v.Count().Dump("entries with Take");
    //v.Take(5).Dump("entries with Take");

    return Environment.TickCount - ini;
}

// Create a list with random strings with random lengths
private static long BuildInput()
{
    long ini = Environment.TickCount;
    Random r = new Random();
    input = new List<string>();

    for (int i = 0; i < RETRIES; i++)
        input.Add(Guid.NewGuid().ToString().Substring(1,r.Next(0,36)));

    return Environment.TickCount - ini;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-14T10:03:03.307

> 当使用 Take 方法时，在速度或内存使用方面是否有任何劣势

是的。`Take()`涉及创建`IEnumerator<char>`第一个，并且对于每个字符，通过等的箍`MoveNext()`。`yield return;`还要注意 ToArray 和字符串构造函数。

对于少量字符串来说不是问题，但在大循环中，专门的字符串函数要好得多。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T10:05:21.523

`Take`扩展方法不创建子字符串，它返回可用于创建`Char[]`(ToArray) 或`List<Char>`(ToList)的查询。但是您实际上想要拥有该子字符串。

然后你还需要其他方法：

```
string  data = new string(temp.Take(20).ToArray()); 
```

这隐含地使用 a`foreach`来枚举字符，创建一个新的 char[] （由于加倍算法，它可能分配过多的大小）。最后从`char[]`.

`Substring`另一方面使用[优化](https://stackoverflow.com/a/895209/284240)的方法。

因此，您可以使用可能微不足道但并非总是如此的内存来支付这个小小的便利。**

# c++ - 我如何找出编译器花费时间的地方？

> ID：15406073
> 
> 赞同：13
> 
> 时间：2013-03-14T09:58:34.497
> 
> 标签：c++, visual-c++, compiler-construction, profiling, build-time

我如何找出**编译器**花费时间的地方？

我的构建太慢了，我已经为 VC++ 临时文件使用了 RAMdisk，它没有任何区别。（我有一个 SSD，所以我预计没有区别。）

该项目中的大多数单个 C++ 文件大约需要 . 2 秒编译，这看起来很糟糕（因为我也没有任何项目内并行化，因为我使用的是 VS2005）。

我该如何优化呢？不要在没有分析的情况下进行优化，但是如何分析编译器？

注意：这些并没有真正的帮助：

*   [分析 C++ 编译过程](https://stackoverflow.com/questions/13559818/profiling-the-c-compilation-process)
*   [在 Visual Studio 中显示构建时间？](https://stackoverflow.com/questions/82128/displaying-build-times-in-visual-studio)（虽然它并非完全没有优点......如果您进行单文件编译，而不是整个项目，它将显示单个文件所花费的时间：这样我看到这里的一些文件需要更多5秒，有些甚至10秒，单机编译）

* * *

让我们添加一个很好的评论：*你有很多模板吗？您的文件平均有多大？您是否检查过仅包含最少的必要标题*

不，我没有。我当然可以（并且pro'lly会）。我也许能找到一些东西，但这都是**猜测**和**反复试验**！

“大家”告诉你，你应该只在测量/分析之后进行优化，但是在优化编译时间时，我们又回到了试错？

* * *

注意：评论中建议的“hack”`__TIME__`不起作用，至少在 Visual-C++ 上不起作用，因为（如*文档*[所述](http://msdn.microsoft.com/en-us/library/b0084kay%28v=vs.80%29.aspx)）：当前源文件*的**最新编译时间**。时间是 hh:mm:ss 形式的字符串文字。*——我想至少可以用这个标记获得单个编译单元的计时，但它无助于深入研究一个编译单元。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:16:22.040

SysInternals ProcMon 将向您显示所选进程完成的所有 I/O，包括发生时的时间戳和完整路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:47:18.670

有几种方法可以优化编译时间：

*   使用预编译的头文件。如果您使用 Visual C++，则使用“stdafx.h”。默认情况下，“stdafx.h”设置为预编译头文件，但我建议您检查它以确保它是。

*   使用 Linux :)。如果您不必使用 Windows 来完成您的工作，我建议您使用 Linux。它的编译时间要好得多。一些原因是： ext4 平均比 NTFS 快约 40%，并且它具有更好的进程调度程序。在处理器操作方面，Linux 通常会快 x1.8 - x2 倍，并且编译取决于处理器。

*   使用另一个编译器。众所周知，Clang/LLVM 具有更好的编译速度，并且还支持预编译头文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-09T10:25:41.730

**TL;DR**：使用 MS [vcperf](https://github.com/microsoft/vcperf)分析您的构建。

注意：这个问题来自 2013 年，工具来自 2019 年，所以，是的，这里有一些等待。:-)

MS 发布了[vcperf](https://github.com/microsoft/vcperf)，它建立在他们的[C++ Build Insights](https://docs.microsoft.com/en-us/cpp/build-insights/get-started-with-cpp-build-insights)之上，它基本上是一个允许您*分析编译过程*的工具链。

[https://devblogs.microsoft.com/cppblog/introducing-c-build-insights/](https://devblogs.microsoft.com/cppblog/introducing-c-build-insights/)

> C++ Build Insights 使用了 vcperf，该工具允许您捕获构建的跟踪并在 Windows 性能分析器 (WPA) 中查看它。

# image - 从像素数据中获取温度

> ID：15406075
> 
> 赞同：1
> 
> 时间：2013-03-14T09:58:47.960
> 
> 标签：image, matlab, pixel, analysis

我有一张红外热像仪的彩色照片。它是不同颜色的温度水平。我想通过 3D 模型传输这张图片中的温度数据。我的问题是找到像素数据（u、v、颜色、..）和温度水平之间的相关性。为此，我使用 Matlab。如果您有任何解决问题的想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:14:23.387

按照李奥的说法：

如果您加载图片（如 jpg、png...），您将拥有一个尺寸为高 x 宽 x 3 的矩阵

这“3”个维度是 RGB 值。

这样，你就会知道你有什么颜色。

要知道它对应的温度，您需要有一个参考数据。例如，如果您有一个显示与 500 到 1500 ºC 温度范围相对应的颜色的颜色条，您可以尝试找到与颜色条的像素颜色最接近的图像像素颜色值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:21:13.753

您可以获取 RGB 图像的第一维，即红色分量： Red = I(:,:,1); 红色分量的强度值应与温度水平密切相关。

# xhtml - IE7 和 HTML 严格的显示块

> ID：15406079
> 
> 赞同：1
> 
> 时间：2013-03-14T09:58:57.290
> 
> 标签：xhtml, internet-explorer-7, block, strict

我在图像占用额外空间时遇到了困难，尽管它设置为显示：css 中的块。这只发生在 IE7 上。当我删除 HTML 代码中标签之间的所有空格时，问题就解决了，但这不是一个合适的解决方案。

我听说过一些 IE7 hack，比如设置固定宽度/高度和以下 css：

```
display:inline-block;
zoom:1;
*display:inline; 
```

但这对我不起作用（可能是因为我使用的是严格的 XHTML）。

我正在处理的页面如下：[http ://www.morgana.nl/slaaptest/afspraak.html](http://www.morgana.nl/slaaptest/afspraak.html)

顶部图像是设置为 display: block 的图像，后面是蓝色背景的 div。

图片链接：[http ://www.morgana.nl/temp/ie7-display-block.png](http://www.morgana.nl/temp/ie7-display-block.png)

希望能得到一些有用的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:04:57.220

由于您使用的是 XHTML，我假设您希望您的标记是语义的。所以从技术上讲，`/siteimages/forms/bottom.jpg`与`/siteimages/forms/top.jpg`人们的照片相比，这些图像没有任何意义。既然它只是一种装饰，那么为什么不使用`background`CSS 属性设置它们的样式并将它们应用到您的`<div>`容器中以达到相同的效果呢？

例如。

```
.roundedTopBar {
    padding-top: 10px;
    background: transparent url('/siteimages/forms/top.jpg') 0 0 no-repeat;
}
.roundedBottomBar {
    padding-bottom: 10px;
    background: transparent url('/siteimages/forms/bottom.jpg') 0 100% no-repeat;
}

<div class="half2 roundedTopBar">
   <div class="roundedBottomBar">
      <div class="formsContainer">
        ...
      </div>
   </div>
</div> 
```

**补充：**如果您确实想知道如何完成您最初要求的问题，解决方案是不要使用`display: inline-block`，因为 IE 7 搞砸了。使用`float: left; clear: both; display: block;`并确保清除父容器中的浮动。

例如。这是您网站的片段，我将我添加`newCSS`的新内容添加到命名空间，您可以使用任何您认为合适的选择器名称

CSS：

```
.newCSS .clearFloat{
    overflow: hidden;
    width: auto;
}
.newCSS .inlineBlock {
    clear: both;
    display: block;
    float: left;
} 
```

标记：

```
<div class="half2 clearFloat newCSS">
    <img src="http://www.morgana.nl/siteimages/forms/top.jpg" width="441"
    height="12" class="block inlineBlock" alt=""/>
    <div class="formsContainer block inlineBlock">
        <div class="formsInnerContainer" style="height:474px">
        form was here
        </div>
    </div>
    <img src="http://www.morgana.nl/siteimages/forms/bottom.jpg" class="block inlineBlock" alt=""/>
</div> 
```

见小提琴：http: [//jsfiddle.net/amyamy86/c34ny/](http://jsfiddle.net/amyamy86/c34ny/)

如果您在 IE7 上查看（它不喜欢 jsFiddle）：http: [//jsfiddle.net/amyamy86/c34ny/embedded/result/](http://jsfiddle.net/amyamy86/c34ny/embedded/result/)

# asp.net - 连接到防火墙后面的 MSSQL 服务器

> ID：15406083
> 
> 赞同：3
> 
> 时间：2013-03-14T09:59:11.510
> 
> 标签：asp.net, sql-server, firewall

所以，我在一家跨国公司工作，他们的防火墙/安全政策基本上是“没有漏洞”。即任何非必要的东西都被锁定了。我无法 ssh 出/入、telnet 出/入等。我们正在尝试构建一个应用程序以允许在异地输入时间表，但本质上，该程序将需要从任何地方连接到 MSSQL 数据库并且由于我无法让 IT 部门打开防火墙端口，我的选择似乎受到严重限制。

应用程序数据库还包含许多其他敏感的内部数据，因此在外部托管它并不是一个真正可行的选择......

目前我真的没有想法。我在想也许隧道或代理选项可能是可行的，但我不是网络专家，所以如果这是一个可行的解决方案，如果有人能指出我更多的信息，那就太好了。

除此之外，我们将不胜感激任何其他有关访问数据库的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:05:14.617

基于 SSL 的 RESTful Web 服务。您可以使用 X509 客户端证书来获得额外的安全性和/或限制您的服务可能会响应的 IP 地址。

第二种选择是智能客户端，它将离线工作，然后在用户进入办公室时同步。[微软同步框架](http://msdn.microsoft.com/en-us/sync/bb887608.aspx)。

# objective-c - Objective-C 如何返回结构数据类型？

> ID：15406086
> 
> 赞同：4
> 
> 时间：2013-03-14T09:59:14.693
> 
> 标签：objective-c

```
struct Line {

    NSUInteger x1;
    NSUInteger x2;
};

// ...

- (Line)visibleLine; 
```

上面的代码显然不起作用，因为 Line 不是有效类型。有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T10:04:50.630

*Objective-C 是基于 C 而不是 C++ 的。在`C`我们需要使用`struct Line`，而在 C++`Line`中很好。*

你可以这样做：

```
struct {
    NSUInteger x1;
    NSUInteger x2;
} Line;

// ...

- (struct Line)visibleLine{

} 
```

* * *

或者

```
struct Line {
    NSUInteger x1;
    NSUInteger x2;
};
typedef struct Line Line;

// ...

- (Line)visibleLine; 
```

> 以上是大多数 C 框架的首选。

还，

```
typedef struct {
    NSUInteger x1;
    NSUInteger x2;
} Line;

// ...

- (Line)visibleLine; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T10:03:21.223

```
typedef struct {
    NSUInteger x1;
    NSUInteger x2;
} Line;

// ...

- (Line)visibleLine; 
```

我最初（在其他答案之前）出于明确的原因提出了上述建议：这就是 Apple 在自己的代码中的做法。这不是唯一的方式，但它是 Apple 的标准方式。它从不将`struct`方法的原型放在其 API 的任何位置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-14T10:27:42.460

在*C*中，`struct Line`和`Line`是不同的。您需要使用别名`struct Line`来引用它`Line`。所以，

```
struct Line { /* ... */ };        // Make a struct.

typedef struct Line       Line;   // Make an alias. 
```

这也可以一次写。

```
typedef struct Line { /* ... */ }        Line; 
```

*C++*自动生成别名，但您应该将*C++视为与**C*完全不同的语言。不要对他们的名字感到困惑。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-14T10:06:56.753

您错过了关键字*struct*。

```
- (struct Line)visibleLine; 
```

# jquery - jQuery Mobile - 页面特定的 JS 仅在页面加载后加载一次，而不是每次页面加载时

> ID：15406089
> 
> 赞同：1
> 
> 时间：2013-03-14T09:59:26.757
> 
> 标签：jquery, jquery-mobile, page-init

我正在使用jQuery Mobile 创建一个应用程序，其中一个导航位于它所控制的页面之外（即导航不在每个页面内复制，只有一个在容器外的实例）。这些页面以“通常”的 data-role = "page1" 传递，其中 data-role = "button" 链接链接到页面 ID。

对于外部 JS 文件中的每个页面，我都有特定于页面的 JS，这些页面设置为一系列 if 语句 - 如果目标 id 是 page1，则运行代码，如果目标 id 是 page2，则运行该代码等。

如果所有页面只加载一次，它就可以完美运行，但是如果我重新加载页面（通过导航点击返回页面），代码不会从一开始就再次触发；它仍然与JS第一次在该页面上完成运行时的状态相同（JS正在控制每个页面上的动画）。

我将整个 JS 绑定到页面，但是我需要将每个页面的 JS 绑定到它的页面吗？我试图研究这个是徒劳的 - 我刚刚开始在 jQ M.

这是我的 JS：

```
$(document).bind('pagecreate', function (e) {
if (e.target.id == 'one') {

    $('#div-one').animate({marginLeft:"500px"});

}

if (e.target.id == 'two') {

    //Perform jQuery .animate function  

}

if (e.target.id == 'three') {

//Perform jQuery .animate function

}

    //etc   

}); 
```

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:23:59.310

在您的示例**`pagecreate`**中，第一次创建页面时，事件只会触发一次。

所以将其更改为**`pagebeforeshow`**事件，如下所示：

```
$(document).bind('pagebeforeshow', function (e) { 
```

如果您不知道要使用什么页面事件，请始终使用**`pagebeforeshow`**.

要了解有关页面事件及其工作原理的更多信息，请查看这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**或在**[此处](https://stackoverflow.com/a/14469041/1848600)**找到它。

还有一件事，这不是错误，但**`bind(..`**已被弃用，切换到**`on(...`**事件绑定：

```
$(document).on('pagebeforeshow', '[data-role="page"]', function (e) { 
```

或者如果您想定位特定页面：

```
$(document).on('pagebeforeshow', '#page-id', function (e) { 
```

# java - (java.net.ConnectException) 处理请求时捕获：连接超时

> ID：15406090
> 
> 赞同：0
> 
> 时间：2013-03-14T09:59:26.943
> 
> 标签：java, web-services, tomcat, httpclient, connection-timeout

我在 tomcat 服务器中部署了两个不同的项目。我从一个项目调用 Web 服务来调用第二个项目。

有时我必须一次调用 Web 服务 200 次。所以这就是我所做的：

```
while(rs.next())
{
    Thread t1 = new Thread(new ClassA(a,b);
    t1.start();
    try {
        t1.join();
    }
    catch (InterruptedException e) 
    {
        e.printStackTrace();
    }
} 
```

在这个 ClassA 中，我从不同的类中调用了另一个方法，该方法实际上是通过 HTTPClient 调用 Web 服务。Web 服务需要一些时间，因为它执行许多功能。

问题是当我多次尝试时，它会给出以下异常：-

```
INFO: I/O exception (java.net.ConnectException) caught when processing request:     Connection timed out
Mar 14, 2013 9:04:47 AM org.apache.commons.httpclient.HttpMethodDirector executeWithRetry 
```

我在这里做错了吗？我是否必须在 ClassA 类中移动调用 Web 服务的代码？

# c# - UI线程需要对绑定属性进行哪些操作？

> ID：15406091
> 
> 赞同：1
> 
> 时间：2013-03-14T09:59:27.737
> 
> 标签：c#, .net, wpf, .net-4.0

我打算在我的 WPF 应用程序中引入线程。我知道 ObservableCollection 上的任何操作（如添加和删除）都需要在 UI 线程上完成。

但是我可以更改 ObservableCollection 中存在的绑定对象的属性值/绑定到后台线程上的 UI 吗？

# safari - Uploadify 导致 Safari 在 javascript 中发出警报时崩溃

> ID：15406092
> 
> 赞同：1
> 
> 时间：2013-03-14T09:59:35.807
> 
> 标签：safari, alert, uploadify

我在 Safari 中使用 Uploadify ( [http://www.uploadify.com/](http://www.uploadify.com/) ) 时遇到问题，当调用 javascript 警报时会导致浏览器崩溃/冻结。

您可以通过简单地访问来复制此问题：[http](http://www.uploadify.com/demos/) ://www.uploadify.com/demos/选择要上传的文件，当此文件正在上传时，再次选择相同的文件进行上传 - 这将导致 Uploadify 引发警报说文件已经在队列中，然后浏览器将冻结并完全无响应。

我只是想知道遇到此问题的其他人是否找到解决方法或解释为什么会发生这种情况？

干杯，

丹尼

# git - Git rebase：合并非后续提交

> ID：15406093
> 
> 赞同：9
> 
> 时间：2013-03-14T09:59:37.367
> 
> 标签：git, git-rebase

到目前为止，我知道有一种很好的方法可以通过使用“git rebase --interactive”来组合提交和更改提交消息

有以下情况：

```
$ git rebase --interactive HEAD^^^^
pick 5b7c140 commitA
pick 40ffd7c commitB
pick 5e7647d commitC
pick 78bea2d commitD

Rebase [...] 
```

是否还有可能处理以下要求：

将 commitA 和 commitC 以及 commitB 和 commitD 结合到新的提交 cAC 和 cBD？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T10:03:33.253

有可能 - 您还可以使用交互式 rebase 重新排列提交的顺序：

```
pick 5b7c140 commitA
squash 5e7647d commitC
pick 40ffd7c commitB
squash 78bea2d commitD 
```

或者

```
pick 5b7c140 commitA
fixup 5e7647d commitC
pick 40ffd7c commitB
fixup 78bea2d commitD 
```

两者之间的区别在于，`squash`允许您编辑新提交的提交消息，而`fixup`只是丢弃第二条提交消息，将前面的`pick`提交消息留在原位以进行组合提交。（如果您的编辑器启动得足够快，那么养成只选择的习惯`squash`会给您一个很好的机会来查看提交消息，即使您认为您可能不需要使用`fixup`提交消息的部分内容。）

如果您更改文件的同一部分`commitB`，则可能会发生 rebase 冲突。`commitC`通常这些可以很容易地整理出来。

# hadoop - hbase put 替换现有的列值

> ID：15406095
> 
> 赞同：2
> 
> 时间：2013-03-14T09:59:40.750
> 
> 标签：hadoop, hbase

我想使用 put 替换行中列的内容，但它正在添加更新版本的数据。尝试添加时间戳，但仍在创建具有不同版本的新值。有什么想法可以替换同一版本的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:35:12.773

您确定您使用了正确的时间戳值吗？

我为你做了一个例子（在 hbase shell 中）：

首先，我们创建一个名为 的表`tmp1`，其中包含一个名为 的列族`f1`，每个单元格可以有三个版本：

```
hbase(main):005:0> create 'tmp1', {NAME => 'f1', VERSIONS => 3}
0 row(s) in 1.1160 seconds 
```

接下来，我们将一行带值`v1`的数据放入表中：

```
hbase(main):007:0> put 'tmp1', 'r1', 'f1:c1', 'v1', 1
0 row(s) in 0.0860 seconds
hbase(main):008:0> scan 'tmp1'
    ROW                                            COLUMN+CELL
    r1                                            column=f1:c1, timestamp=1, value=v1
1 row(s) in 0.0390 seconds 
```

然后，我们`put`使用相同的 rowkey `r1`、 column name`f1:c1`和 timestamp做另一个`1`，但使用不同的 value `v2`：

```
hbase(main):009:0> put 'tmp1', 'r1', 'f1:c1', 'v2', 1
0 row(s) in 0.0060 seconds

hbase(main):008:0> scan 'tmp1'
    ROW                                            COLUMN+CELL
    r1                                            column=f1:c1, timestamp=1, value=v2 
```

如您所见，单元格已替换为新值`v2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:17:36.127

直接出自 HBase[文档](http://hbase.apache.org/book/versions.html)：

```
Put put = new Put( Bytes.toBytes(row)); 
long explicitTimeInMs = 555; // just an example
put.add(Bytes.toBytes("cf"), Bytes.toBytes("attr1"), explicitTimeInMs, Bytes.toBytes(data));
htable.put(put); 
```

# c - 在对等方关闭的 TCP 套接字上写入

> ID：15406097
> 
> 赞同：5
> 
> 时间：2013-03-14T09:59:45.730
> 
> 标签：c, sockets, tcp, sigpipe

我有一个客户端-服务器应用程序，其中每一方都通过 TCP 套接字与另一方通信。

我正确建立了连接，然后在客户端将任何数据写入套接字之前使服务器崩溃。
我看到的是第一次`write()`尝试（客户端）是成功的，它返回实际写入的字节数，而下面的返回（如我所料）`-1`（接收 a `SIGPIPE`）和`errno=EPIPE`.

为什么第一个`write()`成功，即使套接字已经关闭？

**编辑** 有时以下`write()`也有一个正的返回值，好像一切顺利。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T10:32:15.880

您对返回值的`write()`含义感到困惑。这并不意味着“对等方获得了数据并确认了它”。相反，它的意思是，“我缓冲了这么多字节以发送给对等方，现在它们是我的责任，所以你可以忘记它们（而且我没有任何未决错误）”。

也就是说，如果 TCP 堆栈接受写入并返回*n*个字节，这并不意味着它们已经被写入，只是排队等待写入。在堆栈放弃并向您返回错误之前，可能需要一些时间，可能是在它开始发送网络流量后 30 秒。在那段时间里，您可以进行多次调用，这些调用`write()`成功地将数据排队等待发送。（如果peer已经消失，写错误将在c.30s内返回，或者如果可以联系到peer并立即发送RST数据包以指示连接已死，则立即返回。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T10:12:04.140

这与 TCP/IP 的工作方式有关，可以粗略地描述为两个大部分独立的半连接。当您关闭服务器上的套接字时，客户端被告知它将不会从`C<-S`半连接中接收更多数据，立即唤醒`read()`，但与`C->S`方向无关。它仅在尝试发送一些数据后才会收到重置连接的回复。我推荐[TCP/IP 指南](http://www.tcpipguide.com/free/t_TCPBasicOperationConnectionEstablishmentManagement.htm)以获取更多详细信息。

有时你可以两次的原因`write()`是你写得比往返时间快，并且可以`write()`在回复第一个之前挤一秒钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T14:37:36.483

我正在使用以下方法来检测断开连接的服务器状况：

在套接字上获得 select() 超时后（没有收到任何东西，但应该收到），'system("ping -c 1 -w 1 server");' 命令被激活。如果服务器启动并且只是滞后，ping 命令将在不到 0.1 秒内返回。否则（服务器宕机），ping 命令将在 1 秒后返回。

# c# - 如果之前没有调用另一个方法，如何防止调用另一个方法

> ID：15406098
> 
> 赞同：-1
> 
> 时间：2013-03-14T09:59:48.460
> 
> 标签：c#

我现在用 C# 工作了三天，所以请原谅我的菜鸟问题。

我正在尝试构建一个自己的数据库类，其中应包含一种用于发送选择语句的方法。

`connect()`当对象之前未调用此方法时，如何防止调用此方法？我想过一个简单的布尔变量，但在我看来，这是一个非常丑陋的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T10:02:43.643

将“能够连接的东西”与“能够运行查询的实时连接”分开。

让您的`Connect`方法（顺便说一下，您应该*真正*开始遵循[.NET 命名约定](http://msdn.microsoft.com/en-us/library/vstudio/ms229045.aspx)）返回您可以查询的内容。

这样，每个类都负责一项工作，并且您避免了在连接之前尝试查询甚至在代码中*表示的概念。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:06:11.563

你可以有一个 State 字段来存储状态并使用它。在这个简单的例子中，我有一个布尔值**Connected** (True / False)，但你可以有一个`enum`Connected、Disconnected、Faulted 等。

```
private bool _Connected = false;

public bool Connect()
{
    // ...
    if (success)
    {
        _Connected = true;
    }
}

public bool Disconnect()
{
    // ...

    _Connected = false;
}

public IEnumberable<Data> GetData()
{
    if (!_Connected)
    {
        // Handle not connected here...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:10:54.993

不需要布尔值。

只需执行以下操作：

```
if (con == NULL || !con.isOpen())
{
    // throw an exception or return
} 
```

如果出现问题，简单且始终阻止您访问 con 对象。

# wpf - 设计师未能在窗口自定义控件上获得良好的风格

> ID：15406102
> 
> 赞同：3
> 
> 时间：2013-03-14T09:59:59.940
> 
> 标签：wpf, themes, custom-controls, designer

这是我的问题：我创建了一个窗口自定义控件。

```
public class NxChromeWindow : Window 
```

然后我在默认主题中的通用资源中有：

```
<Style TargetType="{x:Type windows:NxChromeWindow}"> 
```

我的应用中有 2 个 Windows 实例：windows:NxChromeWindow 和 Window。

运行时一切正常。我看到 2 种不同的风格，但在使用设计师或混合时。发生了一些非常奇怪的事情：

设计器采用 windows:NxChromeWindow 的样式并将其应用于 windows:NxChromeWindow 和普通窗口。

我不明白这怎么可能。如何将子类样式应用于基类？我清楚地给出了 TargetType="{x:Type windows:NxChromeWindow}" 所以我不明白 Window 如何在设计器中获得相同的样式。

你有想法吗？

若昂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T15:28:09.960

将此添加到 NxChromeWindow 的静态构造函数中：

```
static NxChromeWindow()
{
    DefaultStyleKeyProperty.OverrideMetadata(typeof(NxChromeWindow), new FrameworkPropertyMetadata(typeof(NxChromeWindow)));
} 
```

# android - 无法停止录音，线程无法正常工作，应用程序不幸停止

> ID：15406103
> 
> 赞同：0
> 
> 时间：2013-03-14T10:00:04.273
> 
> 标签：android, multithreading, audio

我正在制作一个用于录制音频的示例程序。我有一个用于开始和停止录制的按钮。我正在运行一个线程，以便我可以录制到 30 秒。我的问题是在达到 30 秒之前，如果我点击停止按钮，不幸的是，我的应用程序停止了。现在我没有遇到问题。以下是我的代码：

```
public class AudioRecordingActivity extends Activity {
private Button RecordButton;
boolean recording;
MediaRecorder recorder ;
Thread RecordThread;
Handler recordHandler;
private TextView timeText;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    timeText=(TextView)findViewById(R.id.textView1);

    RecordButton=(Button)findViewById(R.id.btnRecord);
    RecordButton.setText("Start Recording");
    RecordButton.getBackground().setColorFilter(new LightingColorFilter(-16711936, 0)); 
    recording=false;
    RecordButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            if (recording)
            {

                 recording=false;

                stopRecording();
                RecordButton.setText("Start Recording");
                RecordButton.getBackground().setColorFilter(new LightingColorFilter(-16711936, 0)); 
             // Toast.makeText(getApplicationContext(), "Recording Stopped", Toast.LENGTH_LONG).show();

            }//if(recording)
            else if(!recording) {

                recording=true;
                startRecording();
                RecordButton.setText("Stop Recording");
                RecordButton.getBackground().setColorFilter(new LightingColorFilter(-65536, 0));
            //    Toast.makeText(getApplicationContext(), "Recording started", Toast.LENGTH_LONG).show();

                recordHandler = new Handler();
                  RecordThread=new Thread(new Runnable() {
                      int j;
                    @Override
                    public void run() {
                        // TODO Auto-generated method stub

                        for( j=30;j>=0;j--){
                            if(recording){
                                recordHandler.post(new Runnable() {

                                    @Override
                                    public void run() {
                                        // TODO Auto-generated method stub
                                    setTimer(j);
                                    }//handler run

                                });//post
                                try {
                                    Thread.sleep(1000);
                                } catch (InterruptedException e) {
                                    // TODO Auto-generated catch block
                                    e.printStackTrace();
                                }//catch
                            }else if (!recording)
                            {
                                stopRecording();

                            }
                        }//for
                    }//run  

                });
                RecordThread.start();

            }

        }
    });

}//onCreate
protected void startRecording() {
    // TODO Auto-generated method stub

    Random generator = new Random();
    int n = 1000;
    n = generator.nextInt(n);
     File folder = new File(Environment.getExternalStorageDirectory().toString()+"/AudioRecord");
      if(!folder.exists())
        {
          folder.mkdirs();

        } 
       String path = Environment.getExternalStorageDirectory().getAbsolutePath() +
            "/AudioRecord/audiorecord"+n+".3gp";                  

    recorder = new MediaRecorder();
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setOutputFile(path);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

     Toast.makeText(getApplicationContext(),"Saving Audio as"+ path,
            Toast.LENGTH_LONG).show();
      try {
        recorder.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), "IllegalStateException called", Toast.LENGTH_LONG).show();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), "prepare() failed", Toast.LENGTH_LONG).show();

    }

      recorder.start();

}

 private void stopRecording() {

     recorder.stop();
     recorder.release();
     recorder = null;

    }

    private void setTimer(int j) {
        // TODO Auto-generated method stub
         ((TextView)findViewById(R.id.textView1)).setText(String.valueOf(j) + "sec");
        if(j==0){
            recording=false;

        }

    }
}//class end 
```

音频已完美录制。我想问题在于停止音频和线程。我不知道要在哪里进行更正。我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:24:18.637

问题已解决：进行了以下更正..

```
 @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            if (recording)
            {
                if(recorder!=null){
                     recorder.stop();
                     recorder.release();
                     recorder = null;
                }

                recording=false;
                RecordButton.setText("Start Recording");
                RecordButton.getBackground().setColorFilter(new LightingColorFilter(-16711936, 0)); 
             // Toast.makeText(getApplicationContext(), "Recording Stopped", Toast.LENGTH_LONG).show();

            } 
```

...

```
private void setTimer(int j) {
        // TODO Auto-generated method stub
         timeText.setText(String.valueOf(j) + "sec"); 
         if ((recording) && (j==1)){

                recorder.stop();
                recorder.release();
                recorder = null;
                recording=false;
                RecordButton.setText("Start Recording");
                RecordButton.getBackground().setColorFilter(new LightingColorFilter(-16711936, 0)); 

            }

    } 
```

# serial-port - 串行接口永久拒绝请求

> ID：15406105
> 
> 赞同：4
> 
> 时间：2013-03-14T10:00:06.740
> 
> 标签：serial-port

我的实际问题是，每次我想访问我的串行接口（Arduino）时，系统都会返回**Permission denied**。

```
root@laptop:/home/user #> cu -l /dev/ttyACM0 -s 115200
/usr/bin/cu: open (/dev/ttyACM0): Permission denied
/usr/bin/cu: /dev/ttyACM0: Line in Use

root@laptop:/home/user #> ls -la /dev/ttyACM*
crw-rw---- 1 root dialout 166, 0 Mär 14 10:37 /dev/ttyACM0
crw-rw---- 1 root dialout 166, 0 Mär 14 10:37 /dev/ttyACM1
crw-rw---- 1 root dialout 166, 0 Mär 14 10:37 /dev/ttyACM2
crw-rw---- 1 root dialout 166, 0 Mär 14 10:37 /dev/ttyACM3 
```

由于此错误，要寻找的另一个位置是什么？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T11:09:53.570

我从未使用过 Arduino，所以我认为您的方法是正确的。我会尝试的第一件事是`sudo`执行第一个命令：

```
sudo cu -l /dev/ttyACM0 -s 115200 
```

但是，由于第二条消息是`Line in Use`，它也可能`/dev/ttyACM0`实际上已经被占用/锁定。换句话说，是否有任何进程使用该端口？我无法在串行端口上对其进行测试，但我会尝试将[list open files](http://linux.die.net/man/8/lsof)命令的输出通过[管道传输到](https://stackoverflow.com/a/1072135/679982)[grep](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)命令：

```
lsof | grep ACM 
```

它**应该**列出锁定在端口上的进程的[进程标识符。](http://en.wikipedia.org/wiki/Process_identifier)然后您可以使用[kill](http://linux.die.net/man/1/kill)命令停止该进程：

```
kill <PID_FROM_OUTPUT_OF_UPPER_COMMAND> 
```

要验证您是否已成功停止该进程，您可以将[list all active processes](http://unixhelp.ed.ac.uk/CGI/man-cgi?ps)命令的输出通过管道传输到 grep 命令：

```
ps x | grep <PID_FROM_OUTPUT_OF_UPPER_COMMAND> 
```

如果进程成功停止，它应该不返回任何输出。如果没有，它将输出该行，因此您可以尝试使用 -9 标志，如下所示：

```
kill -9 <PID_FROM_OUTPUT_OF_UPPER_COMMAND> 
```

它最终会停止。

未经测试，我不确定`lsof`以当前形式编写的命令是否会列出所使用的`tty`设备。如果是这种情况，那么必须有一些标志组合可以列出它们，因为 Unix 中的所有内容都是一个文件。

因此，原则必须有效：找出哪个进程正在使用该设备并停止它（一旦您拥有正确的进程标识符， `ps`and命令将起作用）。`kill`

如果以上所有情况都不是，那么您的方法**可能**是错误的。在这种情况下，我会先仔细重新阅读 Arduino 文档 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-06T19:04:39.860

正如 HappyHacking 提到的，您需要执行以下命令：

`sudo adduser [user] dialout`

然后注销用户并重新登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-01T17:37:27.540

我在 /etc/udev/rules.d/51-arduino.rule 中创建了具有以下内容的新文件：

```
SUBSYSTEMS=="usb", KERNEL=="ttyACM0", ATTRS{idVendor}=="2341", ATTRS{idProduct}=="0043", GROUP="dialout", MODE="0666" 
```

注意正确设置 idVendor 和 idProduct。重新启动后设置设备权限。

# unit-testing - 对编译器进行单元测试

> ID：15406116
> 
> 赞同：8
> 
> 时间：2013-03-14T10:00:31.203
> 
> 标签：unit-testing, parsing, tdd, compiler-theory, abstract-syntax-tree

什么被认为是对复杂单元（如编译器）进行单元测试的最佳方法？

多年来，我编写了一些编译器和解释器，我确实发现这种代码很难以一种好的方式进行测试。

如果我们采用抽象语法树生成之类的东西。您将如何使用 TDD 进行测试？

小型结构可能很容易测试。例如：

```
string code = @"public class Foo {}";
AST ast = compiler.Parse(code); 
```

因为这不会产生很多 ast 节点。

但是，如果我真的想测试编译器是否可以为类似方法的东西生成 AST：

```
[TestMethod]
public void Can_parse_integer_instance_method_in_class ()
{
   string code = @"public class Foo {  public int method(){ return 0;}}";
   AST ast = compiler.Parse(code); 
```

你会断言什么？手动定义一个表示给定代码的 AST 并断言生成的 AST 符合手动定义的 AST 似乎非常麻烦，甚至可能容易出错。

那么对于这样的复杂场景进行 TDD 处理的最佳策略是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:08:50.067

首先，如果您测试编译器，您将无法获得足够的测试！用户真的依赖编译器生成的输出，就好像它是一个永远的黄金标准，所以要真正注意质量。所以如果可以的话，用你能想到的每一个测试来测试！

其次，使用所有可用的测试方法，但在适当的时候使用它们。实际上，您也许能够在数学上证明某个变换是正确的。如果你能够这样做，你应该这样做。

但我见过的每个编译器都涉及启发式和大量优化的、手工编写的内部代码。因此，辅助证明方法通常不再适用。在这里，测试已经到位，我的意思是很多！

在收集测试时，请考虑不同的情况：

1.  积极的标准一致性：您的前端应该接受某些代码模式，并且编译器必须生成正确运行的程序。此类测试要么需要黄金参考编译器，要么需要生成测试程序正确输出的生成器；或者它涉及手写程序，其中包括对人类推理提供的值的检查。
2.  负面测试：每个编译器都必须拒绝错误代码，例如语法错误、类型不匹配等。它必须产生某些类型的错误和警告消息。我不知道任何自动生成此类测试的方法。所以这些也需要人工编写。
3.  转换测试：每当您在编译器（中端）中提出花哨的优化时，您可能会想到一些演示优化的示例代码。请注意此类模块之前和之后的转换，它们可能需要为您的编译器或仅插入该模块的准系统编译器提供特殊选项。也测试一组合理的周边模块组合。我通常在特定转换之前和之后对中间表示进行回归测试，通过与同事的深入推理来定义参考。尝试在转换的两侧编写代码，即您想要转换的代码片段和不能转换的稍微不同的代码片段。

现在，这听起来像是一项非常艰巨的工作！是的，但有帮助：世界上有几个用于 (C-) 编译器的商业测试套件和专家可以帮助您应用它们。这是我所知道的一小部分：

*   [ACE：SuperTest 编译器测试和验证套件](http://www.ace.nl/compiler/supertest-compiler-test-and-validation-suite)
*   Perennial C 编译器验证套件
*   [虫虫：ECLAIR](http://bugseng.com/products/eclair)
*   GCC 和 LLVM 环境中的测试
*   你的名字！或谷歌“编译器测试套件”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:01:21.963

首先，解析通常是编译器项目的一个微不足道的部分。根据我的经验，它永远不会花费超过 10% 的时间（除非我们谈论的是 C++，但如果你正在设计它，你就不会在这里问问题），所以你宁愿不要将大量时间投入到解析器测试上。

尽管如此，TDD（或者不管你怎么称呼它）在开发中端中占有一席之地，你经常想要验证你刚刚添加的优化是否确实导致了预期的代码转换。根据我的经验，这样的测试通常是通过为编译器提供特制的测试程序并为预期的模式搜索输出程序集来实现的（这个循环是否展开了四次？我们是否设法避免内存写入是这个函数吗？等等）。Grepping 程序集不如分析结构化表示（S-exprs 或 XML），但它便宜且在大多数情况下工作正常。但是，随着编译器的增长，很难支持它。

# image - Actionscript：使用平滑调整位图数据的大小

> ID：15406117
> 
> 赞同：0
> 
> 时间：2013-03-14T10:00:33.967
> 
> 标签：image, actionscript, bitmap

```
var bd:BitmapData=new BitmapData(file.width,file.height);
bd.setPixels(new Rectangle(0,0,file.width,file.height),file.raw);

var scale_x_percents:Number = (w / bd.width);
var scale_y_percents:Number = (h / bd.height);
if(!stretch) {
    if(bd.width*scale_y_percents>=w) {
        scale_x_percents=scale_y_percents;
    }
    else if(bd.height*scale_x_percents>=h) {
        scale_y_percents=scale_x_percents;
    }
}
var matrix:Matrix = new Matrix();
matrix.scale(scale_x_percents,scale_y_percents);

var resizedBd:BitmapData = new BitmapData(Math.floor(bd.width*scale_x_percents), Math.floor(bd.height*scale_y_percents), true, 0x000000);
resizedBd.draw(bd, matrix, null, null, null, true); // true is smoothing option, it will blur sharpened pixels 
```

图像大小调整有问题。看起来平滑不起作用或代码中缺少某些内容。也许矩阵应该有更多的东西？

原图：

[http://imageshack.us/a/img28/4784/dc7f2ec4b0f3323cdc4e01e.jpg](http://imageshack.us/a/img28/4784/dc7f2ec4b0f3323cdc4e01e.jpg)

结果是：

[http://imageshack.us/a/img855/4784/dc7f2ec4b0f3323cdc4e01e.jpg](http://imageshack.us/a/img855/4784/dc7f2ec4b0f3323cdc4e01e.jpg)

我可以链接一堆其他图像。存在一些奇怪的像素配置。它可以以某种方式修复吗？

我已经测试了 jpeg 质量 100% 和 stage.quality='best'，但它们都没有提供所需的质量结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T11:41:41.593

在 BitmapData 上绘制 BitmapData 时，您的问题似乎是“最近”采样模式。也许以下内容可能会有所帮助：

```
var sh:Shape=new Shape();
sh.graphics.beginBitmapFill(bd,matrix,false,true);
sh.graphics.lineStyle(0,0,0); // no lines border this shape
sh.graphics.drawRect(0,0,resizedBD.width,resizedBD.height);
sh.graphics.endFill();
resizedBD.draw(sh); // or with smoothing on 
```

使用 Flash 的本机图形渲染器很可能至少会在绘制的位图上执行双线性插值，这似乎是您想要的结果。此外，`stage.quality`如果将该形状添加到舞台上也适用（顺便说一句，您可以使用该形状来显示上传的图片，然后在 BitmapData 上绘制以保存。）但是，这可能行不通 - 我现在无法测试这个.

# c++ - linux下使用mingw交叉编译器声明“参数”中的两种或多种数据类型

> ID：15406119
> 
> 赞同：1
> 
> 时间：2013-03-14T10:00:36.510
> 
> 标签：c++, qt, cross-platform, mingw

我正在尝试使用 MinGw 交叉编译一些 Windows 代码。代码相当简单：

标题：

```
 class DragLabel : public QLabel
    {

        Q_OBJECT

            public:
                DragLabel();
                void fn(QString path, int id, bool small);
    }; 
```

cpp: #include "draglabel.h"

```
 DragLabel::DragLabel()
    {
       /* Snip ... */
    };

    void DragLabel::fn(QString path, int id, bool small)
    {
        (void)d;
    }; 
```

示例函数无法编译给我：

> > 错误：“参数”声明中有两种或多种数据类型

对于 fn(QString...) 的声明。[编辑：]对不起，我忘了提到这个错误只有在声明了 bool 变量时才会发生，所以这个函数没有：

```
void fn(QString path, int id); 
```

工作得很好。

它在 debian linux 下使用 qmake 和 make 编译得很好。

有谁知道这里会发生什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:11:06.533

这似乎`small`是 MinGW 的一些扩展关键字（我在标准中找不到它）。根据

> 当我将所有内容更改为 int 时，它可以工作

`small`是一些限定词，例如`long`or `signed`，它扩展了`int`声明。

尝试将变量名称从更改`small`为其他任何名称。

# c# - 每次将项目添加到集合时执行方法

> ID：15406120
> 
> 赞同：2
> 
> 时间：2013-03-14T10:00:36.913
> 
> 标签：c#, asp.net, collections

每次将项目添加到 DbSet 时，我都想执行一个方法。

如果不每次都单独调用此方法，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:06:19.150

DbSet 有一个属性“ `Local`”，它是一个`ObservableCollection`. 您可以订阅`CollectionChanged`此内容以查看添加内容的时间。

所以像：

```
this.ttActivities.Local.CollectionChanged += ttActivitiesChanged;

public void ttActivitiesChanged(object sender, NotifyCollectionChangedEventArgs args) 
{
  if (args.Action == NotifyCollectionChangedAction.Add)
  {
    // Something has been added
  }
} 
```

# windows - DLLMain lpReserved 参数的真正含义是什么？

> ID：15406126
> 
> 赞同：2
> 
> 时间：2013-03-14T10:01:09.037
> 
> 标签：windows, winapi, dll, internals

众所周知的[DLLMain](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx)函数参数之一是*LPVOID lpvReserved*。从 MSDN 文档：

> 如果 fdwReason 为 DLL_PROCESS_ATTACH，则 lpvReserved 对于动态加载为 NULL，对于静态加载为非 NULL。

但 lpReserved 的真正含义是什么？是指向某物的指针吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T13:45:28.603

问题中的引用包含允许您依赖的所有信息：

> 如果 fdwReason 为 DLL_PROCESS_ATTACH，则 lpvReserved 对于动态加载为 NULL，对于静态加载为非 NULL。

您有权做的只是将`lpvReserved`其视为一个布尔值，它发出有关负载是动态还是静态（也称为隐式）的信息。

完全合理的是，有些版本的 Windows 可以`lpvReserved`携带比普通布尔值更多的信息。但是，这是一个私有的实现细节，你不应该依赖它。

# jsf-2 - commandLink 不调用动作侦听器，但 commandButton 工作正常

> ID：15406132
> 
> 赞同：9
> 
> 时间：2013-03-14T10:01:31.807
> 
> 标签：jsf-2, commandlink

我想通过 Facelets 中的链接调用一种方法：

我的 Facelets 代码如下：

```
<h:commandButton value="A" actionListener="#{customerData.searchedCustomerListA}" />

<h:commandLink value="A" actionListener="#{customerData.searchedCustomerListA}"/> 
```

支持 bean 代码如下：

```
public void searchedCustomerListA(ActionEvent ae){
    customerName = "A";
    leftCustomerListAvailable.clear();
    if(customerDataBean.getSearchedCustomerList(customerName)!= null)
        leftCustomerListAvailable =customerDataBean.getSearchedCustomerList("A");
} 
```

相同的代码适用于`<h:commandButton>`但不适用于`<h:commandLink>`. 这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:42:36.933

`<h:commandLink>`和之间的技术区别在于`<h:commandButton>`链接使用 JavaScript 提交父表单。因此，如果在语法等效的按钮正常工作时它不起作用，那么这只能意味着 JavaScript 在浏览器中被禁用，或者`jsf.js`包含强制帮助函数的文件不包含在页面中（你应该很容易拥有通过在浏览器内置开发人员工具集的 JS 控制台中看到 JS 错误而注意到）。

因此，要解决此问题，您需要验证是否在浏览器中启用了 JS，并且您的模板中有一个`<h:head>`组件而不是纯 HTML `<head>`，以便 JSF 能够自动包含该`jsf.js`文件。

或者，如果您的应用程序的业务需求要求应用程序在禁用 JS 的情况下按设计运行，那么您应该坚持`<h:commandButton>`并添加一些 CSS 使其看起来像一个链接（例如，删除背景、填充、边框、插图等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T06:54:54.577

我的情况是这个问题的原因是配置不当的 url 重写过滤器。无意匹配的过滤器模式之一`http://localhost:8080/mysite/javax.faces.resource/jsf.js.xhtml?ln=javax.faces`阻止了 jsf.js 被加载。检查这个答案：[单击 h:commandLink 会导致 Uncaught ReferenceError: mojarra is not defined](https://stackoverflow.com/questions/9248047/mojarra-is-not-defined-commandlink-not-making-a-request/9263184#9263184)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:40:17.367

试试这个，这个灵魂的工作。

```
 <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">

<h:form>

    <h:commandLink type="button" action="#{testBean.tsetLink}"> 
          <h:outputText value="A" />
    </h:commandLink>

</h:form>
</html> 
```

# 托管豆

```
@ManagedBean
@RequestScoped
public class TestBean {

    public void tsetLink(){
    System.out.println("Link clicked!!!!!!!!!!!!");
    }
} 
```

# php - 页面加载时间过长

> ID：15406136
> 
> 赞同：0
> 
> 时间：2013-03-14T10:01:45.307
> 
> 标签：php

我发现很难理解为什么我的一个页面在显示其内容之前需要很长时间。页面上的代码如下。

请告知可能出现的问题以及代码是否安全。如果不是如何解决它。

```
<?php

//open database
    include("includes/db_connect.php");
//require("includes/mysql_conn.php");

    // Check to see if the type of file uploaded is a valid image type .........................
function is_valid_type($file)
{
    // This is an array that holds all the valid image MIME types
    // These are the same for all file upload boxes
    $valid_types = array("image/jpg", "image/jpeg", "image/bmp", "image/gif");

    // This is an array that holds all valid image extensions
    // These are the same for all file upload boxes
    $valid_exts = array('jpg', 'jpeg', 'bmp', 'gif');

    // This check is optional
    if(!in_array($file['type'], $valid_types))
        return 0;

    // Get the extension from the uploaded filename
    $upload_ext = pathinfo($file['name'], PATHINFO_EXTENSION);

    // This check is essential for security
    if(!in_array($upload_ext, $valid_exts))
        return 0;

    return 1;
}  
//...................................................................................................    
    // Just a short function that prints out the contents of an array in a manner that's easy to read
    // I used this function during debugging but it serves no purpose at run time for this example
    function showContents($array)
    {
        echo "<pre>";
        print_r($array);
        echo "</pre>";
    }

    // Set some constants

    // This variable is the path to the image folder where all the images are going to be stored
    // Note that there is a trailing forward slash
    $TARGET_PATH = "images/";

    // Get our POSTed variables
    $ctitle = $_POST['ctitle'];
    $csubject = $_POST['csubject'];
    $creference = $_POST['creference'];
    $cyear = $_POST['cyear'];
    $cobjecttype = $_POST['cobjecttype'];
    $cmaterial = $_POST['cmaterial'];
    $ctechnic = $_POST['ctechnic'];
    $cwidth = $_POST['cwidth'];
    $cheight = $_POST['cheight'];
    $cperiod = $_POST['cperiod'];
    $cmarkings = $_POST['cmarkings'];
    $cdescription = $_POST['cdescription'];
    $csource = $_POST['csource'];
    $cartist = $_POST['cartist'];
    $image = $_FILES['image'];

// Build our target path full string. This is where the file will be moved do
// i.e. images/picture.jpg
$target_path_1 = $TARGET_PATH . $image['name'];

    // Sanitize our inputs
    $ctitle = mysql_real_escape_string($ctitle);
    $csubject= mysql_real_escape_string($csubject);
    $creference = mysql_real_escape_string($creference);
    $cyear = mysql_real_escape_string($cyear);
    $cobjecttype = mysql_real_escape_string($cobjecttype);
    $cmaterial = mysql_real_escape_string($cmaterial);  
    $ctechnic = mysql_real_escape_string($ctechnic);
    $cwidth = mysql_real_escape_string($cwidth);    
    $cheight = mysql_real_escape_string($cheight);
    $cperiod = mysql_real_escape_string($cperiod);
    $cmarkings = mysql_real_escape_string($cmarkings);  
    $cdescription = mysql_real_escape_string($cdescription);
    $csource = mysql_real_escape_string($csource);
    $cartist = mysql_real_escape_string($cartist);
    $image['name'] = mysql_real_escape_string($image['name']);

    // Make sure all the fields from the form have inputs
    if ( $ctitle == "" || $csubject == "" || $creference == "" || $cyear == "" || $cobjecttype == "" || $cmaterial == "" || $ctechnic == "" || $cwidth == "" || $cheight == "" || $cperiod == "" || $cmarkings == "" || $cdescription == "" || $csource == "" || $cartist == "" || $image['name'] == "")
    {
        echo "All fields are required";

        exit;
    }

// Check to make sure that our file is actually an image
// You check the file type instead of the extension because the extension can easily be faked
if (!is_valid_type($image))
{
         echo "You must upload a jpeg, gif, or bmp";

         exit;
}  

// Here we check to see if a file with that name already exists
// You could get past filename problems by appending a timestamp to the filename and then continuing
if (file_exists($target_path_1))
{
        echo "A file with that name already exists";

        exit;
}  

// Lets attempt to move the file from its temporary directory to its new home
if (
    move_uploaded_file($image['tmp_name'], $target_path_1)
)
{
         // NOTE: This is where a lot of people make mistakes.
         // We are *not* putting the image into the database; we are putting a reference to the file's location on the server
         $sql = "insert into collections (ctitle, csubject, creference, cyear, cobjecttype, cmaterial, ctechnic, cwidth, cheight, cperiod, cmarkings, cdescription, csource, cartist, cfilename) values ('$ctitle', '$csubject', '$creference', '$cyear', '$cobjecttype', '$cmaterial', '$ctechnic', '$cwidth', '$cheight', '$cperiod', '$cmarkings', '$cdescription', '$csource', '$cartist', '" . $image['name'] . "')";
         $result = mysql_query($sql) or die ("Could not insert data into DataBase: " . mysql_error());

         exit;
}
else
{
         // A common cause of file moving failures is because of bad permissions on the directory attempting to be written to
         // Make sure you chmod the directory to be writeable

       echo "Could not upload file. Check read/write persmissions on the directory";

         exit;
}  
    ?> 
```

还有我的数据库连接代码：

```
<?php
//set connection variables
$host = "localhost";
$username = "joseph";
$password = "";
$db_name = "collectionsdb"; //database name

//connect to mysql server
$mysqli = new mysqli($host, $username, $password, $db_name);

//check if any connection error was encountered
if(mysqli_connect_errno()) {
    echo "Error: Could not connect to database.";
    exit;
}
?> 
```

谢谢。

约瑟夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:16:07.430

对我来说似乎很好。

分为三个阶段。

*   上传数据的时间（取决于文件大小和连接速度）
*   连接到数据库（取决于数据库服务器上的负载）
*   以及文件在服务器上的移动（取决于服务器的负载）......

如果您在本地测试系统上，也可能会受到病毒扫描的干扰。首先过滤帖子数据，然后扫描文件并在移动时再次扫描文件（是的，它们可能非常偏执......）。

建议：放一些“print_r(microtime());” 进去看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:14:23.667

代码不一定是安全的。Sql 注入是我很容易发现的事情。不要像这样将变量传递到查询字符串中。尽管您正在使用`mysql_real_escape_string()`，但在某些情况下这还不够。

请使用参数化查询。您还应该担心插入到您的数据库中的 html 标记可用于 XSS。

要记住的另一点是您上传文件夹的权限。确保你没有让每个人都阅读和写作。

希望能帮助到你。

有关加载缓慢的根本原因的更多信息，请参阅我的评论。

# vim - 是否可以在 Vim 中 grep 快速修复窗口？

> ID：15406138
> 
> 赞同：13
> 
> 时间：2013-03-14T10:01:54.747
> 
> 标签：vim, grep

假设我使用 ag.vim 插件`disabled`通过多个文件搜索字符串。它在 quickfix 窗口中返回了一些结果：

```
1 first_file.rb|1 col 1| disabled something something
2 second_file.rb|1 col 2| disabled another something 
```

是否可以选择快速修复结果作为输入，通过它们 grep 并在新的快速修复窗口中打开结果？换句话说，如果我输入`:quickfix_grep first_file`，新的 quickfix 只会弹出一个条目：

```
1 first_file.rb|1 col 1| disabled something something 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-14T12:20:12.017

## 更新

为此要求编写了一个 vim 插件：[https ://github.com/sk1418/QFGrep](https://github.com/sk1418/QFGrep)

* * *

### 原答案：

我对您的目标的理解是：

> 您的 grep 结果在您的快速修复中不知何故很大，您想缩小对它的看法。通过输入带有正则表达式的命令，过滤 grep 结果。过滤后的结果也应该显示在 QuickFix 窗口中，以便您可以打开/跳转到文件。

如果以上是您想要的，请查看以下内容：

源这个函数和命令行：

```
function! GrepQuickFix(pat)
  let all = getqflist()
  for d in all
    if bufname(d['bufnr']) !~ a:pat && d['text'] !~ a:pat
        call remove(all, index(all,d))
    endif
  endfor
  call setqflist(all)
endfunction
command! -nargs=* GrepQF call GrepQuickFix(<q-args>) 
```

然后在您的快速修复中的 grep/ack/whatever 显示内容之后，您可以键入

```
:GrepQF <regex> 
```

在您的快速修复中进行过滤。

这里我添加了一个 GIF 动画。我正在使用`Ack`而不是`grep`，但这没有区别。给定的正则表达式将匹配文件名和 quickfix 中显示的文本。我做了两次过滤来证明这一点。

![在此处输入图像描述](../Images/ceeb240684655b53e3dd28032e605d1a.png)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-08-22T07:55:32.537

## 新的官方 vim 插件[*cfilter*](https://github.com/vim/vim/blob/master/runtime/pack/dist/opt/cfilter/plugin/cfilter.vim)

自[21.8.2018（补丁：8.1.0311）](https://github.com/vim/vim/commit/8c5e0093c9badced73e382915fb024a5c3ea463b)以来，插件*cfilter*与 vim 在`$VIMRUNTIME`. 它记录在 下`:h cfilter-plugin`。

在需要时加载插件*cfilter*或总是在你的 vimrc 中加载它

```
:packadd cfilter 
```

过滤快速修复列表

```
:Cfilter DPUST 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-14T21:20:23.683

我对这个问题的解决方案一直是让 quickfix 缓冲区*默认*可修改：

```
:autocmd BufReadPost quickfix set modifiable 
```

（上面的命令要放在`.vimrc`文件中。）

这样做为对 grepping 结果的任何适当编辑打开了一系列可能性，例如手动删除不相关的条目或使用`:global`and`:vglobal`命令过滤（免费提供问题中所需的功能）；对相关条目进行分组和重新排序；以自由形式添加空行或注释；等等

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-16T07:33:35.593

这是@Kent 答案的更短更简洁的版本：

```
function! GrepQuickFix(pat)
  call setqflist(filter(getqflist(), "bufname(v:val['bufnr']) !~# a:pat"))
endfunction
command! -nargs=* GrepQF call GrepQuickFix(<q-args>) 
```

它是相同的代码，只是更简洁更短，我不认为它值得一个单独的插件。

# c# - 如何强制 CLR 展示操作系统线程切换？

> ID：15406144
> 
> 赞同：-1
> 
> 时间：2013-03-14T10:02:18.163
> 
> 标签：c#, clr, pinvoke

与这些问题相关：

> [如何以 CLR“友好”的方式获取 _real_ 线程 ID？](https://stackoverflow.com/questions/5624128/how-do-i-get-the-real-thread-id-in-a-clr-friendly-way)
> 
> [托管线程多久切换一次操作系统线程？](https://stackoverflow.com/questions/1979210/how-often-does-a-managed-thread-switch-os-threads)

我希望能够实际测试 Thread.BeginThreadAffinity() 方法并验证它们是如何工作的以及它们是如何工作的。

是否有一些 .NET 功能会强制操作系统线程切换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:33:35.343

用 Thread.BeginThreadAffinity() 测试的东西不多。我调用 CLR 主机中的一个函数[IHostTaskManager::BeginThreadAffinity()](http://msdn.microsoft.com/en-us/library/ms164564.aspx)。IHostTaskManager 是自定义 CLR 主机可以实现以提供自定义线程实现的可选接口，它不一定使用操作系统线程。ICLRTaskManager 和 ICLRTask 接口为此类自定义线程提供核心服务。

应 SQL Server 团队的要求，这些接口是在 .NET 2.0 中添加的。SQL Server 长期以来一直有一个基于 Fiber 的自定义线程*选项*。光纤在过去很流行，当时具有多个处理器内核的机器仍然很少见。纤维的其他名称是“绿色线程”和“协同程序”。过去十年的多核革命已经将它们放牧。

SQL Server 项目失败了。他们无法获得足够的可靠性并放弃了该项目。不幸的是，我们留下了后果，没有简单的方法可以将 .NET 线程映射到 OS 线程，这是您第一个链接的主题。以及接受的答案中显示的大量 FUD。

虽然 CLR 仍然对这个特性有基本的支持，但我不知道有一个例子是自定义主机实现了自己的线程。SQL Server 团队项目的大规模失败无疑是一个主要的迹象，表明这很难实施，考虑到团队可以访问的资源来完成这项工作。而且一般来说，将单个线程映射到单个处理器内核（默认情况下由操作系统完成并由默认 CLR 主机使用）是没有意义的，在效率方面很难被击败。如今，处理器内核的价格非常便宜。

长话短说： Thread.BeginThreadAffinity()**什么都不**做。默认情况下，CLR 线程已经与 OS 线程相似。您遇到自定义 CLR 主机的几率几乎为零，足以忽略该方法。

调用 OS 线程上下文切换的一种简单方法是使用 WaitHandle.WaitXxx() 方法之一或 Thread.Sleep() 和非零等待。

# android - 在android webview中加载网页的划分

> ID：15406145
> 
> 赞同：1
> 
> 时间：2013-03-14T10:02:22.140
> 
> 标签：android, android-webview

我的网页分为多个部分，而不是加载整页，我想加载该页面的一部分`div id = map_canvas`。

下面的代码给了我整页，但我只想要一部分 map_canvas

```
public class Jetbill extends Activity {

    public WebView myWebView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.jetbill);
         myWebView = (WebView) findViewById(R.id.webview);
         myWebView.getSettings().setJavaScriptEnabled(true);
         myWebView.loadUrl("http://jetbill.biz/users/login.php");
    }

} 
```

# sql-server - 锁分区死锁

> ID：15406146
> 
> 赞同：3
> 
> 时间：2013-03-14T10:02:23.630
> 
> 标签：sql-server, deadlock

我有一张大约有 350 万行的表格。数据库上启用了锁定分区 [1]。该表在白天进行了很多插入，并且我在锁定分区上遇到了很多死锁。这些类型的死锁在[http://sqlindian.com/2012/07/07/deadlocks-involving-lock-partitions/](http://sqlindian.com/2012/07/07/deadlocks-involving-lock-partitions/)中有很好的描述，但作者说这些类型的死锁非常罕见。在我们的例子中，它们似乎并不罕见！

我可以使用跟踪标志 1229 禁用锁定分区，但不建议这样做。有没有人对如何避免这些类型的死锁有一些建议，或者我如何进一步分析情况以了解为什么我们会遇到这么多这些“罕见”类型的死锁？

[1] [http://msdn.microsoft.com/en-us/library/ms187504(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms187504(v=sql.105).aspx)

更新：添加示例死锁图

```
<deadlock>
  <victim-list>
    <victimProcess id="process5004748" />
  </victim-list>
  <process-list>
    <process id="process5004748" taskpriority="0" logused="0" waitresource="OBJECT: 5:1423344135:0 " waittime="3008" ownerId="2379819613" transactionname="user_transaction" lasttranstarted="2013-03-14T09:28:55.803" XDES="0x77ab8f950" lockMode="X" schedulerid="11" kpid="5416" status="suspended" spid="507" sbid="0" ecid="0" priority="0" trancount="2" lastbatchstarted="2013-03-14T09:28:55.817" lastbatchcompleted="2013-03-14T09:28:55.807" clientapp=".Net SqlClient Data Provider" hostname="ExampleHost" hostpid="8664" loginname="ExampleUser" isolationlevel="read uncommitted (1)" xactid="2379819613" currentdb="5" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
      <executionStack>
        <frame procname="" line="1" stmtstart="616" stmtend="1504" sqlhandle="0x020000002468011b993c824e2e0ce3fd2783a30e8e591641" />
        <frame procname="" line="1" sqlhandle="0x000000000000000000000000000000000000000000000000" />
      </executionStack>
      <inputbuf>
(@p0 datetime,@p1 bigint ...) INSERT INTO tblExample (Column1, Column2, ...); select SCOPE_IDENTITY()   
      </inputbuf>
    </process>
    <process id="processd4a988" taskpriority="0" logused="0" waitresource="OBJECT: 5:1423344135:10 " waittime="3008" ownerId="2379819595" transactionname="user_transaction" lasttranstarted="2013-03-14T09:28:55.663" XDES="0x2fe4323b0" lockMode="X" schedulerid="2" kpid="6756" status="suspended" spid="473" sbid="0" ecid="0" priority="0" trancount="2" lastbatchstarted="2013-03-14T09:28:55.677" lastbatchcompleted="2013-03-14T09:28:55.667" clientapp=".Net SqlClient Data Provider" hostname="ExampleHost" hostpid="8664" loginname="ExampleUser" isolationlevel="read uncommitted (1)" xactid="2379819595" currentdb="5" lockTimeout="4294967295" clientoption1="671088672" clientoption2="128056">
      <executionStack>
        <frame procname="" line="1" stmtstart="616" stmtend="1504" sqlhandle="0x020000002468011b993c824e2e0ce3fd2783a30e8e591641" />
        <frame procname="" line="1" sqlhandle="0x000000000000000000000000000000000000000000000000" />
      </executionStack>
      <inputbuf>
        (@p0 datetime,@p1 bigint ...) INSERT INTO tblExample (Column1, Column2, ...); select SCOPE_IDENTITY()
      </process>
  </process-list>
  <resource-list>
    <objectlock lockPartition="0" objid="1423344135" subresource="FULL" dbid="5" objectname="" id="lock5d745ae00" mode="X" associatedObjectId="1423344135">
      <owner-list>
        <owner id="processd4a988" mode="X" />
      </owner-list>
      <waiter-list>
        <waiter id="process5004748" mode="X" requestType="wait" />
      </waiter-list>
    </objectlock>
    <objectlock lockPartition="10" objid="1423344135" subresource="FULL" dbid="5" objectname="" id="lock55da8ea00" mode="IX" associatedObjectId="1423344135">
      <owner-list>
        <owner id="process5004748" mode="IX" />
      </owner-list>
      <waiter-list>
        <waiter id="processd4a988" mode="X" requestType="wait" />
      </waiter-list>
    </objectlock>
  </resource-list>
</deadlock> 
```

更新 2：添加 NHibernate 生成的 INSERT

```
begin transaction with isolation level: ReadUncommitted

INSERT INTO tblExample
            (Column1,
             Column2,
             Column2,
             Column3,
             Column4,
             Column5,
             Column6,
             Column7,
             Column8,
             Column9,
             Column10,
             Column11,
             Column12,
             Column13,
             Column14,
             Column15,
             Column16,
             Column17,
             Column18,
             Column19,
             Column20,
             Column21)
VALUES      ('2013-03-14T12:47:26.00' /* @p0 */,
             NULL /* @p1 */,
             75 /* @p2 */,
             'Test Text with some characters' /* @p3 */,
             'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22' /* @p4 */,
             2130706433 /* @p5 */,
             NULL /* @p6 */,
             NULL /* @p7 */,
             0 /* @p8 */,
             'Test Title' /* @p9 */,
             '11223344' /* @p10 */,
             0 /* @p11 */,
             '2013-03-14T12:47:26.00' /* @p12 */,
             0 /* @p13 */,
             '2013-03-14T12:47:26.00' /* @p14 */,
             'en' /* @p15 */,
             '2013-03-14T12:47:26.00' /* @p16 */,
             0 /* @p17 */,
             'SomeName' /* @p18 */,
             NULL /* @p19 */,
             917278 /* @p20 */,
             2805683 /* @p21 */);

select SCOPE_IDENTITY()

commit transaction 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:14:34.960

假设尽职调查（即您正确地进行了调查），并明确表示我们正在谈论[lock partitioning](http://msdn.microsoft.com/en-us/library/ms187504.aspx)，而不是[partition locking](http://www.sqlskills.com/blogs/paul/sql-server-2008-partition-level-lock-escalation-details-and-examples/)。

不幸的是，除了确保您运行的是最新的 SP 和最新的 CU 之外，您无能为力。最好在最新的产品版本上。这方面有很多修复。*如果*您为该SP应用了最新的SP和最新的CU，问题仍然存在，请联系产品支持。

> 我可以使用跟踪标志 1229 禁用锁定分区，但不建议这样做

你有几个核心？您可以随时尝试和测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-04T11:33:27.737

我们遇到了类似的问题，经过适当的调查，发现主要问题是创建的一些索引没有启用 row_lock 和 page_lock。因此，任何影响索引的插入、更新、删除操作都会在表级别生成 X 锁。并发操作以死锁结束。

```
SELECT name indexname,allow_row_locks,allow_page_locks
FROM sys.indexes
WHERE 1=1 
--and object_id = object_id('tablename') 
AND allow_row_locks = 0 
AND allow_page_locks = 0 
```

# c#-4.0 - 带有 Windows 7 的快速书 2006

> ID：15406147
> 
> 赞同：2
> 
> 时间：2013-03-14T10:02:25.510
> 
> 标签：c#-4.0, quickbooks

我正在使用带有 Windows 7 的 quickbook 2006 高级版。现在，当我尝试将 quickbook 与 c#.net 连接时，我在 QBSessionManager 上收到以下错误。

由于以下错误，检索具有 CLSID {178AACCA-9DCE-42A0-A193-CF4985B930E5} 的组件的 COM 类工厂失败：80070005 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）。

我的代码是这样的：

```
public test()
{
InitializeComponent();
sessionManager = new QBSessionManager();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:40:27.773

QuickBooks 2006 不能在 Windows 7 上运行。它不是 Intuit 支持的配置，根据我们的经验，它根本不起作用。

请参考 Intuit 的支持平台列表。 [http://support.quickbooks.intuit.com/support/articles/INF12783](http://support.quickbooks.intuit.com/support/articles/INF12783)

# mysql - 时间戳中两个表的mysql重叠

> ID：15406149
> 
> 赞同：2
> 
> 时间：2013-03-14T10:02:31.257
> 
> 标签：mysql, sql, sqlite, timestamp

我在 MySQL 中有两个表。在这些表中的每一个中，都保存了设备及其 MAC 地址和状态区域信息。

这些状态确实在某些时间戳（startTime，endTime）及其持续时间（endTime-startTime）开始和结束，并且是由某些 id 引起的。

现在我想找到以天分隔的某些事件“移动”和“加载”之间的重叠，如下所示：

```
sum of time, when movement took place (value in the fiddle: 421)
sum of time, when load took place (value in the fiddle: 520)
sum of time, when movement and load took place (value in the fiddle: 391) 
```

查询结果应如下所示：

```
ID                  DATE                            ALL_MOVEMENT    ALL_LOAD    LOAD_MOVEMENT
00:50:c2:63:10:1a   October, 29 2012 00:00:00+0000  421             520         391
00:50:c2:63:10:1a   February, 22 2013 00:00:00+0000 421             520         391
00:50:c2:63:10:1b   February, 22 2013 00:00:00+0000 181             220         181 
```

我在这里准备了一个小提琴：[http ://sqlfiddle.com/#!2/c210c](http://sqlfiddle.com/#!2/c210c)

更新：在这里可以看到在不同的表结构中提供我想要的东西的小提琴：

[http://sqlfiddle.com/#!2/31b94/1](http://sqlfiddle.com/#!2/31b94/1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:05:26.980

我真的不明白数据集与结果集的相关性，但在我看来，你或多或少想要这样的东西......

```
 SELECT m.id
      , DATE(FROM_UNIXTIME(m.starttime))Date,SUM(m.duration) all_movement
      , SUM(l.duration) all_load
   FROM move_table m
   JOIN load_table l
     ON l.id = m.id
    AND l.endtime > m.starttime
    AND l.starttime < m.endtime
  GROUP 
     BY m.id
      , DATE(FROM_UNIXTIME(m.starttime));
 +-------------------+------------+--------------+----------+
 | id                | Date       | all_movement | all_load |
 +-------------------+------------+--------------+----------+
 | 00:50:c2:63:10:1a | 2012-10-29 |          391 |      520 |
 | 00:50:c2:63:10:1a | 2013-02-22 |          391 |      520 |
 | 00:50:c2:63:10:1b | 2013-02-22 |          181 |      220 |
 +-------------------+------------+--------------+----------+ 
```

顺便说一句，`duration`在这种情况下似乎是多余的，因为（例如） SUM(m.endtime-m.starttime) 会得到相同的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T11:55:58.643

我不知道如何解决“加载”和“无加载”之间的区别，因为数据库中没有关于它的真实信息 - 但也许这是您尝试的起点。

```
SELECT a.ID, a.D, SUM(a.MOVETIME) AS ALL_MOVEMENT, SUM(a.LOADTIME) AS ALL_LOAD
FROM (
SELECT ID, DATE(FROM_UNIXTIME(startTime)) AS d, SUM(duration) AS MOVETIME, 0 AS LOADTIME
FROM move_table
GROUP BY ID, DATE(FROM_UNIXTIME(startTime))
UNION
SELECT ID, DATE(FROM_UNIXTIME(startTime)) AS d, 0 AS MOVETIME, SUM(duration) AS LOADTIME
FROM load_table
GROUP BY ID, DATE(FROM_UNIXTIME(startTime))) AS a
GROUP BY a.ID, a.D 
```

# android - Android：带有取消按钮的日期选择器对话框

> ID：15406152
> 
> 赞同：1
> 
> 时间：2013-03-14T10:02:35.177
> 
> 标签：android, android-4.2-jelly-bean

我正在处理`datepicker`对话框，我面临的一个问题是选择器上有取消按钮（android jelly bean 没有取消按钮）。现在问题还在于我的日期选择器对话框在按钮（在`listview`适配器类中）按下时被调用。在适配器类中，我正在使用 date_picker_id 概念。任何帮助将不胜感激。

```
((Activity) LessonListViewAdapter.this.context).showDialog(DATE_DIALOG_ID); 
```

这会调用中的 createddialog 函数`Activity`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:12:58.120

[Jelly Bean DatePickerDialog --- 有没有办法取消？](https://stackoverflow.com/questions/11444238/jelly-bean-datepickerdialog-is-there-a-way-to-cancel.The)链接中的答案为您提供了解决方法。我发现此链接试图回答有关数据选择器的问题之一。

看起来这是一个错误，其他人已经填充了它。[http://code.google.com/p/android/issues/detail?id=34833](http://code.google.com/p/android/issues/detail?id=34833)。链接中的答案为您提供了解决方法。

编辑1

```
public static final int TIME_DIALOG_ID = 1;
public static final int DATE_DIALOG_ID = 2;

@Override
protected Dialog onCreateDialog(int id) {

switch (id) {
case DATE_DIALOG_ID:
// set date picker as current date
myDialog = new DatePickerDialog(this, datePickerListener, year, month,day);
break;

case TIME_DIALOG_ID:
//set time picker as current time
myDialog = new TimePickerDialog(this, timePickerListener, hour, minute,false);
break;

}

return myDialog;       
} 
```

# android - 使用 webview 登录 android facebook

> ID：15406153
> 
> 赞同：2
> 
> 时间：2013-03-14T10:02:34.973
> 
> 标签：android, facebook, login, webview

我有一个使用 Facebook 登录的 android 应用程序。我的问题是：如果我从 ADT 安装应用程序一切正常，我可以通过 Facebook 应用程序和 webview 登录，但如果我从 Playstore 下载应用程序，我将无法通过 Facebook 应用程序登录（虽然我可以如果我卸载 Facebook 应用程序，则通过 webview 登录）。

现在，我想知道即使安装了 Facebook 应用程序，是否可以通过 webview 强制登录。或者如何使它双向工作。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T20:59:11.200

如果您使用`Facebook LoginButton`登录，那么您可以使用网络对话框登录。做这个：

```
LoginButton login = (LoginButton) view.findViewById(R.id.login_button);
login.setLoginBehavior(SessionLoginBehavior.SUPPRESS_SSO); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-15T04:34:56.170

（我试过这段代码，FacebookSDK 4.5 版）
使用自定义登录按钮强制 WebView 登录：

```
LoginManager.getInstance().setLoginBehavior(LoginBehavior.WEB_ONLY) 
```

另外，你可以在下面

```
LoginManager.getInstance().setLoginBehavior(LoginBehavior.NATIVE_ONLY) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:25:06.780

您可以禁用单点登录，然后您将只有 webview 登录。

但你为什么要这样做？SSO 对您的用户来说更容易。

为了使 SSO 工作，您需要使用您在 Play 商店中签署 Android 应用程序的密钥配置您的 Facebook 应用程序。参见例如[Android-Facebook 应用程序的密钥哈希](https://stackoverflow.com/questions/4388992/key-hash-for-android-facebook-app)

# java - 无法更新错误抛出 j2bugzilla

> ID：15406154
> 
> 赞同：0
> 
> 时间：2013-03-14T10:02:36.423
> 
> 标签：java, swing, bugzilla

大家好，

我正在使用 java swing app 自定义 bugzilla throw j2bugzilla。当我尝试更新 bug 时，异常即将到来。下面是代码和异常

`UpdateBug update = new UpdateBug(currentBug); con.executeMethod(update);`

```
 com.j2bugzilla.base.BugzillaException: An unknown error was encountered
    at com.j2bugzilla.base.XmlExceptionHandler.handleFault(XmlExceptionHandler.java:56)
    at com.j2bugzilla.base.BugzillaConnector.executeMethod(BugzillaConnector.java:154)
    at bugzilla.ui.Bugzilla.updateBug(Bugzilla.java:351)
****
****
Caused by: org.apache.xmlrpc.common.XmlRpcExtensionException: Null values aren't supported, if isEnabledForExtensions() == false
    at org.apache.xmlrpc.common.TypeFactoryImpl.getSerializer(TypeFactoryImpl.java:118)
    at org.apache.xmlrpc.serializer.MapSerializer.writeValue(MapSerializer.java:73)
    at org.apache.xmlrpc.serializer.MapSerializer.writeEntry(MapSerializer.java:67) 

```

将 jar 文件从 bugzilla 2.0 更新到支持 xmlrpc-common-3.1.3 的 bugzilla 2.1.1 后清除。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:42:18.117

从您的评论中，听起来您遇到了一个在 2.x 行中修复的已知错误——有关详细信息，请参阅[跟踪器](http://j2bugzilla.com/tracker/show_bug.cgi?id=7)。话虽如此，这里有一个真正的问题吗？正如预期的那样，升级似乎已经为您解决了这个问题。

# android - 对滑动标签有单独的活动

> ID：15406165
> 
> 赞同：0
> 
> 时间：2013-03-14T10:03:03.110
> 
> 标签：android, xml, tabs, android-activity, swipe

我是 android 编程新手，目前我正在做一个带有三个这样的标签的应用程序 -

![在此处输入图像描述](../Images/865edfdb64a2b9f31bbd95ae640d60df.png)

我按照[这个链接](http://www.lucazanini.eu/2012/android/tabs-and-swipe-views/?lang=en)来开发它。

但是我当前的应用程序为每个选项卡调用单独的 XML 文件。我想为每个活动调用单独的活动。

请用一些基本的材料或教程指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:02:38.807

> 我想为每个活动调用单独的活动。

这是不支持的。旧的 Activity-in-tabs 方法已被弃用两年多。欢迎您使用片段或普通`ViewGroups`作为选项卡的内容。

# python - wxPython：如何将网格与 matplotlib 画布同步

> ID：15406173
> 
> 赞同：1
> 
> 时间：2013-03-14T10:03:24.780
> 
> 标签：python, wxpython

我正在尝试构建具有多窗格结构的多窗格 wxAUI 应用程序。

我有两类由 AuiManager (_mgr) 控制的对象，它们是：1) wx.Grid.CSheet 对象插入窗格内的 AuiNotebook 2) Matplotlib.figure 对象也封装到同一 AuiManager 内的另一个 AuiNotebook 中。

这是定义相应对象的两个类。

```
class MySheet(sheet.CSheet):
""" A Copy&Paste enabled grid class"""

def __init__(self, parent,NRows,NCols):
    sheet.CSheet.__init__(self, parent)
    wx.EVT_KEY_DOWN(self, self.OnKey)

    self.SetLabelBackgroundColour('#DBD4D4')
    self.SetNumberRows(NRows)
    self.SetNumberCols(NCols)
          self.NRows = NRows
          self.NCols = NCols

def selection(self):
    MORE CODE HERE
def OnKey(self, event):
    MORE CODE HERE
def copy(self):
    MORE CODE HERE
def paste(self):
    MORE CODE HERE
def delete(self):
    MORE CODE HERE

class Plot(wx.Panel):

def __init__(self, parent, id = -1, dpi = None, **kwargs):
    wx.Panel.__init__(self, parent, id=id, **kwargs)
    self.figure = mpl.figure.Figure(dpi=dpi, figsize=(2,2))
    self.canvas = Canvas(self, -1, self.figure)
    self.toolbar = Toolbar(self.canvas)
    self.toolbar.Realize()

    sizer = wx.BoxSizer(wx.VERTICAL)
    sizer.Add(self.canvas,1,wx.EXPAND)
    sizer.Add(self.toolbar, 0 , wx.LEFT | wx.EXPAND)
    self.SetSizer(sizer)

class PlotNotebook(wx.Panel):

def __init__(self, parent, id = -1):
    wx.Panel.__init__(self, parent, id=id)
    self.nb = wx.aui.AuiNotebook(self)
    sizer = wx.BoxSizer()
    sizer.Add(self.nb, 1, wx.EXPAND)
    self.SetSizer(sizer)

def add(self,name="plot"):
   page = Plot(self.nb)
   self.nb.AddPage(page,name)
   return page.figure 
```

默认情况下，我设置了两个图形和两个网格，其中两列分别对应 X 和 Y 数据。我想将网格中的 X、Y 数据与相应的图形同步，以便在更改这些数据时，图形也会更新。

在创建时，我可以用我的数据内容填充网格和图形，但是在更改事件（例如将新数据粘贴到网格中时）后，我无法更新图形内容。我在更新 figure.canvas.draw() 和 _mgr.Update() 之后尝试过使用，但尽管我没有收到任何错误，但它们似乎不起作用。

# javascript - 为什么我的变量“j”未定义？

> ID：15406175
> 
> 赞同：0
> 
> 时间：2013-03-14T10:03:32.257
> 
> 标签：javascript, three.js

我有一个使用 Three.js 为我的 3D 对象着色的功能。我的变量`j`存在，如果我使用`alert(j)`它可以工作，但是当我使用该变量作为我的数组（颜色图）的索引时，它不会。

```
colormap=[[0,0,0.5625],[0,0,0.625],[0,0,0.6875],[0,0,0.75],[0,0,0.8125],[0,0,0.875],[0,0,0.9375],[0,0,1],[0,0.0625,1],[0,0.125,1],[0,0.1875,1],[0,0.25,1],[0,0.3125,1],[0,0.375,1],[0,0.4375,1],[0,0.5,1],[0,0.5625,1],[0,0.625,1],[0,0.6875,1],[0,0.75,1],[0,0.8125,1],[0,0.875,1],[0,0.9375,1],[0,1,1],[0.0625,1,0.9375],[0.125,1,0.875],[0.1875,1,0.8125],[0.25,1,0.75],[0.3125,1,0.6875],[0.375,1,0.625],[0.4375,1,0.5625],[0.5,1,0.5],[0.5625,1,0.4375],[0.625,1,0.375],[0.6875,1,0.3125],[0.75,1,0.25],[0.8125,1,0.1875],[0.875,1,0.125],[0.9375,1,0.0625],[1,1,0],[1,0.9375,0],[1,0.875,0],[1,0.8125,0],[1,0.75,0],[1,0.6875,0],[1,0.625,0],[1,0.5625,0],[1,0.5,0],[1,0.4375,0],[1,0.375,0],[1,0.3125,0],[1,0.25,0],[1,0.1875,0],[1,0.125,0],[1,0.0625,0],[1,0,0],[0.9375,0,0],[0.875,0,0],[0.8125,0,0],[0.75,0,0],[0.6875,0,0],[0.625,0,0],[0.5625,0,0],[0.5,0,0]];

j = 0;// indice colore nella matrice

var callbackMale = function ( geometry, materials ) 
{
  // surf contain surface
  var cmin=surf.min(), cmax=surf.max(), colorLength=colormap.length;

  for ( var i = 0, l = geometry.vertices.length; i < l; i ++ ) 
  {

     var face = geometry.faces[ i ];
     j = Math.round(((surf[i]-cmin)/(cmax-cmin)*colorLength));

     if(j < 0) 
      j=0;
     else if( j >= colorLength) 
       j=colorLength;
     alert(j)
     var ind = colormap[j]; // j undefined              
     for(var k = 0 ; k < 3 ; k++)
     {              
       face.vertexColors[ k ] = new THREE.Color().setRGB(ind[0],ind[1],ind[2]);                 
     }//fine for interno

  }//fine for esterno
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:10:30.413

j的类型是什么？int 或 float 或其他？我认为您尝试将浮点数放入 int 中，但它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:13:46.047

您的循环将超出数组的范围，导致未定义的值来自`colormap[j]`.

```
else if( j >= colorLength) 
    j=colorLength; 
```

将您的值 jsut 设置为数组的边界，因为数组是从零开始的。将最大值固定为小一：

```
else if( j >= colorLength) 
    j=colorLength-1; 
```

# asp.net-mvc - ASP.net MVC 条件默认路由

> ID：15406176
> 
> 赞同：1
> 
> 时间：2013-03-14T10:03:32.577
> 
> 标签：asp.net-mvc, routing, conditional, default

是否可以创建有条件的默认路由？

我想根据登录的当前用户的权限更改默认路由。

我目前正在像这样创建默认路由

```
routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "ActivityDashboard", action = "Activities", id = UrlParameter.Optional }
        ); 
```

# security - MVC 4 中 ASP.NET Web API 的最简单安全性，可防止外部用户访问

> ID：15406182
> 
> 赞同：1
> 
> 时间：2013-03-14T10:03:42.260
> 
> 标签：security, asp.net-mvc-4, asp.net-web-api, authorization

可以在 MVC 4 中的 ASP.NET Web API 中应用的最简单的安全性是什么，以防止外部用户访问 Web 服务，是否有足够简单的东西，例如可以为每个实例维护的某些令牌的授权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:10:30.590

这取决于，Http Web API 本质上是无状态的。如果您使用 Ajax 从 Web 浏览器调用 Web API，您可能会依赖 cookie 来维护会话中的用户身份。否则，其他传统的 HTTP 身份验证机制（如基本身份验证）在每次调用中都需要用户凭据。您可能想学习 Thinktecture.IdentityModel 库，它为身份验证提供了很多扩展点。

[http://leastprivilege.com/2012/10/23/mixing-mvc-forms-authentication-and-web-api-basic-authentication/](http://leastprivilege.com/2012/10/23/mixing-mvc-forms-authentication-and-web-api-basic-authentication/)

关于授权。该框架已经附带了一些属性，例如 AllowAnonymousAttribute 或 AuthorizeAttribute，您可以使用它们来装饰 Web Api 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:08:51.123

更好的是，您可以搜索 MVC 中的授权。是的，它确实支持它。请检查以下可能有帮助的链接。

[安全 MVC 4](http://blogs.msdn.com/b/rickandy/archive/2012/03/23/securing-your-asp-net-mvc-4-app-and-the-new-allowanonymous-attribute.aspx)

[重定向未经授权的用户](http://blogs.msdn.com/b/rickandy/archive/2012/03/23/securing-your-asp-net-mvc-4-app-and-the-new-allowanonymous-attribute.aspx)

[自定义授权](http://blogs.msdn.com/b/rickandy/archive/2012/03/23/securing-your-asp-net-mvc-4-app-and-the-new-allowanonymous-attribute.aspx)

# php - 产品配对只选择一个复选框 x 3

> ID：15406183
> 
> 赞同：0
> 
> 时间：2013-03-14T10:03:49.767
> 
> 标签：php, jquery

我在表格中显示我的产品数据库中的产品，并带有一个复选框来选择所需的产品。

每个产品都有 3 个变体或价格点选项，作为每个价格点变化的单独项目输入数据库。

```
Code    category Description            Points                Choose your Points
1001-B  Logo    artwork supplied    Basic                 4.00 points
1001-S  Logo    artwork supplied    Standard          6.00 points
1001-P  Logo    artwork supplied    Premium               12.00 points
1002-B  Logo    re-draw to vector   Basic                 6.00 points
1002-S  Logo    re-draw to vector   Standard          8.00 points
1002-P  Logo    re-draw to vector   Premium              14.00 points 
```

每种产品都有 3 个价格点变化：基本、标准和高级。每个“产品”都有相同的产品代码。如上产品：1001-B 是基本款，1001-S 是标准款，1001-P 是高级款。

因此，客户通过选择每个项目旁边的复选框来选择他们想要的价格点选项。

我只想让他们为每个产品配对选择一个价格点/产品（即仅三个价格点之一）。

所以基本上让复选框像单选按钮一样工作。我不能使用单选按钮，因为我对复选框数组中的所有项目使用相同的名称：name="id[]"

```
echo '<input type="checkbox" name="id[]" value="' . $id . '" /></td>'; 
```

我怎样才能做到这一点？

我知道我可以做到以下几点：

```
<input type="checkbox" class="radio" value="1" name="fooby[1][]" />
<input type="checkbox" class="radio" value="1" name="fooby[1][]" />
<input type="checkbox" class="radio" value="1" name="fooby[1][]" />
<p>&nbsp;</p>
<input type="checkbox" class="radio" value="1" name="fooby[2][]" />
<input type="checkbox" class="radio" value="1" name="fooby[2][]" />
<input type="checkbox" class="radio" value="1" name="fooby[2][]" />

$("input:checkbox").click(function() {
    if ($(this).attr("checked") === true) {
        var group = "input:checkbox[name='" + $(this).attr("name") + "']";
        $(group).attr("checked", false);
        $(this).attr("checked", true);
    } else {
        $(this).attr("checked", false);
    }
}); 
```

但这依赖于 name="fooby[1][] name="fooby[2][] 等发生变化的事实。在我的情况下，我不能这样做。

有任何想法吗？

在页面提交解决后，我已经得到了购物车方面的问题，所以我不想对我拥有的复选框格式进行根本性更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:31:46.787

无论您是否在页面中有重复模块，都可以通过遍历实例的主要父级并仅在该父级中搜索来轻松隔离实例。

HTML

```
<div class="product">
   <div class="name"/>
  <div class="description/>
  <div class="choices">
       <input type="checkbox"/>
   </div>   
</div> 
```

JS：

```
$('.product input:checkbox').change(function(){
   if(this.checked){
      $(this).closest('.choices').find('input:checkbox').not(this).prop('checked',false); 
   }
}); 
```

使用这种通用遍历模式不需要了解复选框的任何属性。如果 checkbozes 没有包裹在标签中，则可以缩短为：

```
 $(this).siblings().prop('checked',false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:17:28.200

让我们为每个组添加类属性并处理它：

```
<input type="checkbox" value="1B" name="id[]" class="group1" />
<input type="checkbox" value="1S" name="id[]" class="group1" />
<input type="checkbox" value="1P" name="id[]" class="group1" />
<p>&nbsp;</p>
<input type="checkbox" value="2B" name="id[]" class="group2" />
<input type="checkbox" value="2S" name="id[]" class="group2" />
<input type="checkbox" value="2P" name="id[]" class="group2" />

$("input:checkbox").click(function() {

    $('input:checkbox[class="' + $(this).attr('class') + '"]').prop('checked', false);
    $(this).prop('checked', true);

}); 
```

# asp.net-mvc-4 - 登录页面仅重定向回裸局部视图

> ID：15406184
> 
> 赞同：0
> 
> 时间：2013-03-14T10:03:49.690
> 
> 标签：asp.net-mvc-4, url, asp.net-mvc-partialview

我使用 jquery ajax 来调用（获取）一个操作，该操作呈现用于创建（输入）新产品的局部视图。此部分视图的内容被插入到具有基本 _layout 的完整页面中的 vid 标记中。下面的ajax代码：

```
 $("#Create").on('click', function (e) {
    //debugger;
    e.preventDefault();
    $.ajax({
        type: "GET",               
        data: { returnUrl: String(window.location) },  <-- passing in the Url
        url: "/CreateGroup/CreateGroup",
        dataType: 'html',
        success: function (data) {
            $("#group-list").html(data);
        },
    });
})
.....
<div id="group-list">
    @Html.Partial("PagedGroupList")
</div> 
```

那个行动：

```
// GET: /Create/
[Authorize]
public PartialViewResult CreateGroup(string returnUrl)
{
    ViewBag.ReturnUrl = returnUrl;
    CreateGroupModel cgm = new CreateGroupModel();
    cgm.ReturnUrl = returnUrl;
    cgm.group = new Static_Group();
    return PartialView("CreateGroup", cgm);
} 
```

现在，如果我在单击 CREATE 按钮之前先登录，一切都按预期进行。问题是在没有先登录的情况下单击 CREATE 按钮。由于[Authorize]，登录页面将首先出现，登录后，预计会一起重定向回我在整个页面内的CREATE部分视图。问题是登录页面重定向回 NAKED 创建部分视图，而没有任何父视图的元素。如果 CREATE 页面不是部分视图，则登录页面将完美地重定向回整个页面。

我使用 MVC4 默认登录。我试图将登录页面变成ajax表单提交并使用OnSuccess在登录页面和创建partialview中调用document.location，但我发现这是partialview的returnUrl问题。我也尝试过 Request.UrlReferrer.AbsoluteUri，但它给出了相同的 URL，即“/CreateGroup/CreateGroup?returnUrl=http%3A%2F%2Fwww.dev.com%3A22531%2F”或完整的：[http://www .dev.com:22531/CreateGroup/CreateGroup?returnUrl=http://www.dev.com:22531/](http://www.dev.com:22531/CreateGroup/CreateGroup?returnUrl=http://www.dev.com:22531/)。如果将 Url 放入浏览器，它也会显示纯局部视图。

我相信我一定错过了一些明显的事情，因为这应该是一种常见的情况，但我无法从谷歌搜索中找到任何线索。是否有一个 URL 在其父视图中一起显示部分视图？如果没有，那么可以从部分视图重定向回以前的视图吗？

* * *

看起来没有带有其主机页面的部分视图的 URL。目前我能想到的解决方案是将登录重定向到主机页面，并在 Model 或 viewbag 或 session temp 中传入部分视图名称，以在其中使用正确的部分视图再次呈现整个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:44:59.540

这是我解决此问题的方法。不要觉得很舒服。如果有人有更好的解决方案，请帮助。

我在 LoginModel 中添加了两个字符串变量：
public string RetUrl { get; 放; } 公共字符串 UrlReferrer { 获取；放; }

在获取登录操作中：

```
 public PartialViewResult Login(string returnUrl)
    {
        ViewBag.ReturnUrl = Request.UrlReferrer.AbsolutePath;
        LoginModel lgm = new LoginModel();
        lgm.UrlReferrer = Request.UrlReferrer.AbsoluteUri;
        lgm.RetUrl = returnUrl;
        return PartialView(lgm);
    } 
```

在登录后操作中：

```
 public ActionResult Login(LoginModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
            {
                model.IsLoggedIn = true;
                if (string.IsNullOrEmpty(model.RetUrl))
                {
                    model.RetUrl = Url.Action("Index", "Home"); 
                }
            }
            else
            {
                // If we got this far, something failed, redisplay form
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }
        return PartialView("Login", model);
    } 
```

在 Login.cshtml 中：放置两个隐藏字段以保留 Model 预设值：

```
 @Html.HiddenFor(m => m.RetUrl)
             @Html.HiddenFor(m => m.UrlReferrer) 
```

在 ajax OnSuccess 事件处理程序中，在 returnUrl 的末尾附加一个 CallPartial 查询字符串并重定向到此 returnUrl：

```
 <script type="text/javascript"> 
function logInComplete() {
    //debugger;
    if ('@Model.IsLoggedIn' == 'True' && '@Model.UrlReferrer' != '') {
        //debugger;
        var returnUrl = '@Model.UrlReferrer';
        if ('@Model.RetUrl' != '@Model.UrlReferrer') {
            if (returnUrl.indexOf('?') == -1) {
                returnUrl = returnUrl + "?CallPartial=True";
            }
            else {
                returnUrl = returnUrl + "&CallPartial=True";
            }
        }
        document.location = returnUrl;
    } 
} 
```

现在回到 CREATE partialview 主机页面：

```
 $('.ifCallPartial').each(function () {
        //debugger;
        if ('@Request["CallPartial"]' == "True") {
            $(document).ready(function () {
                CallCreate();
            });
        }
    });

    function CallCreate() {
        //debugger;
        //e.preventDefault();
        var returl = String(window.location);
        var n = returl.indexOf("?CallPartial");
        if (n >= 1) {
            returl = returl.substring(0, n);
        }
        else {
            n = returl.indexOf("CallPartial");
            if (n >= 1) {
                returl = returl.substring(0, n);
            }
        }
        $.ajax({                
            type: "GET",
            data: { returnUrl: returl },
            url: "/CreateGroup/CreateGroup",
            dataType: 'html',
            success: function (data) {
                $("#group-list").html(data);
            },
            error: function (xhr, status, error) {
                alert(error);
            }
        });
    } 
```

# javascript - 像javascript这样的简单jquery警报框可以选择编辑标题？

> ID：15406185
> 
> 赞同：1
> 
> 时间：2013-03-14T10:03:54.957
> 
> 标签：javascript, jquery

我正在使用 Javascript 警报框：

```
function shareConfirm() {
    if(!confirm('Are you sure want to unshare?')) return false;
} 
```

但是，标题给出了 URL 和警告框，但我想编辑标题。事实证明无法编辑javascript标题。所以我最好的选择是使用与自定义 javascript 警报框具有相同 css 的 jquery 简单警报框。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:53:39.987

你介意使用 jQueryUI 吗？然后解决您的问题将像黄油一样容易:)

第 1 步：在您的页面中包含 jQueryUI。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

第 2 步：创建一个 div。此 div 中的文本将显示为警报。你需要隐藏这个div`$(document).ready()`

```
<div id='myAlertbox'></div> 
```

第3步：给你：

```
$("#myAlertbox").html('Are you sure want to unshare?');
$("#myAlertbox").dialog({
    title: "yourRequiredTitleHere",
modal: true,
buttons : [{
    text : "Ok",
    click : function() {
            $(this).dialog("close");
            //You can do whatever you want here.
    }
    }],
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:51:22.683

正如您所说，从安全的角度来看，这是不可能的。您可以模拟它的唯一方法是创建一个无模式的对话窗口。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T10:09:18.890

Confirm() 和 alert() 框的样式取决于浏览器和操作系统。因此，几乎不可能为 jquery 警报框创建一个 CSS 以匹配每个浏览器/操作系统组合

# matlab - equationsToMatrix：如何获取变量的值？

> ID：15406191
> 
> 赞同：1
> 
> 时间：2013-03-14T10:04:07.193
> 
> 标签：matlab, matrix, equations

使用 equationsToMatrix 时，您可以解决示例中的一组线性方程（包括解决方案）

```
syms x y z;
[A, b] = equationsToMatrix([x + y - 2*z == 0, x + y + z == 1, 2*y - z + 5 == 0], [x, y, z])

%solution of the equation set

A =
[ 1, 1, -2]
[ 1, 1,  1]
[ 0, 2, -1]

b =
  0
  1
 -5 
```

向量 b 返回相关变量的值：x、y 和 z。但是，如果我键入 x，则 MATLAB 返回 x 而不是 0，这是本例中方程的解。在不添加 syms 选项的情况下也会发生这种情况。

另一个问题是，如果我输入 b(1) 或 b(2)，我不会得到任何值：我希望 b 包含 x、y 和 z 的值。我需要的是最终得到这样的东西

```
b(1) = 0 
```

或者

```
x = 0 
```

我应该怎么做才能通过输入 x,y,z 来获取 x,y,z 的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:26:39.627

您所拥有的是一种通过提取系数矩阵将符号线性方程转换为数值系统的方法。要解决您需要做的系统

```
sol = A\b; 
```

现在您可以使用另一个表达式中的值

`subst(expr, {x,y,z}, {sol(1),sol(2),sol(3));`

例如

```
A =

 1     1    -2
 1     1     1
 0     2    -1

b =

 0
 1
-5

>> A\b

ans =

3.0000
-2.3333
0.3333 
```

# javascript - 通过 Ajax 请求 html 的恰当术语是什么？

> ID：15406195
> 
> 赞同：-5
> 
> 时间：2013-03-14T10:04:12.140
> 
> 标签：javascript, jquery, html, ajax

我正在尝试为“通过 Ajax 请求 html”的活动找到合适的术语。有吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:05:14.033

这通常被称为“通过 ajax 请求 HTML”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:11:24.610

Ajax 只是您可能已经知道的“异步 JavaScript 和 XML”的首字母缩写词。

所以它真的应该是“使用 Ajax 请求 HTML”。或者更技术性，因为 HTML5 不是 xml，你可以说：“通过 XHR 请求 HTML”

[http://en.wikipedia.org/wiki/Ajax_（编程）](http://en.wikipedia.org/wiki/Ajax_(programming))

[http://en.wikipedia.org/wiki/XMLHttpRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)

# c# - 向 FTP 客户端中的命令添加超时

> ID：15406197
> 
> 赞同：0
> 
> 时间：2013-03-14T10:04:25.260
> 
> 标签：c#, ftp

我有这段代码：

```
string test_dir = ftp.GetCurrentDirectory() + "/test";

if (!ftp.DirectoryExists(test_dir))
{
    ftp.CreateDirectory(test_dir);
} 
```

其中 ftp 是 FtpConnection 类的实例。但是它崩溃了，我得到 421 空闲超时（600 秒）关闭控制连接错误。为什么会这样？在某些情况下它不会发生，而在某些情况下会发生。如何解决？

如何为命令添加超时？

# javascript - node.js 中的一般保护错误

> ID：15406199
> 
> 赞同：0
> 
> 时间：2013-03-14T10:04:33.563
> 
> 标签：javascript, node.js, general-protection-fault

节点因[一般保护故障](http://en.wikipedia.org/wiki/General_protection_fault)而崩溃。从系统日志：

```
Mar 12 23:51:01 ip-10-159-31-166 kernel: [136874.501802] node[28987] general protection ip:8902a8 sp:7fffe8326820 error:0 in node[400000+786000] 
```

我假设 Node 本身是原因，因为 JS 是内存管理的 - 如果这不正确，请告诉我。

```
> process.version
'v0.8.19' 
```

节点 0.8.19 中是否存在导致此问题的已知问题？

如何使节点不崩溃？

# javascript - 调用返回 JSON 的操作方法时，Ajax 和 getJSON 有什么区别

> ID：15406200
> 
> 赞同：1
> 
> 时间：2013-03-14T10:04:36.527
> 
> 标签：javascript, asp.net-mvc

我正在阅读一本关于 asp.net MVC 的书，我发现了调用返回 JSON 的 Action 方法的不同方法：，使用 Ajax 或 getJSOn，这两种方法是否等同于：-

```
$.ajax({
type: "GET",
url: "http://localhost:11279/test/testcall",
dataType: "json",
success: function (result) {
var message = result.Title + ": $" + result.CurrentPrice;
$('#Result').html(message);
},
error: function (XMLHttpRequest, textStatus, errorThrown) {
alert("Error: " + errorThrown);
}
}); 
```

getJSON 是：-

```
<script type="text/javascript">
$(function () {
$.getJSON("http://localhost:11279/test/testcall",
function (data) {
$.each(data, function (key, val) {
var str = val.Description;
$('<li/>', { html: str }).appendTo($('#auctions'));
});
});
});
</script> 
```

**第二个问题**

如果我想从控制器类调用上述操作方法或外部 Web 服务而不是使用 javaScript，那么我应该使用哪些 c-sharp 方法？以及我将如何将返回的 JSON 从控制器类传递给看法。BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:06:16.433

**getJson** - 方法允许通过对页面进行 ajax 调用来获取 json 数据。该方法只允许通过get方法传递参数，不允许发布参数。

**Ajax()** - 这个方法比我们看到的所有其他方法提供更多的控制。您可以通过检查参数列表找出差异

*   对数据发送和响应数据提供更多控制。
*   允许处理调用过程中发生的错误。
*   如果对 ajax 页面的调用成功，则允许处理数据。

回答 2

您可以利用`jquery + Ajax()`函数在您的 html 页面中使用它。

这是给你的文章：[使用 jQuery 调用 WCF 服务的步骤](http://pranayamr.blogspot.ca/2010/12/steps-to-call-wcf-service-using-jquery.html)。

像这样的东西

```
function WCFJSON() {
             var userid = "1";
             Type = "POST";
             Url = "Service.svc/GetUser";
             Data = '{"Id": "' + userid + '"}';
             ContentType = "application/json; charset=utf-8";
             DataType = "json"; varProcessData = true; 
             CallService();
         }

//function to call WCF  Service       
         function CallService() {
             $.ajax({
                 type: Type, //GET or POST or PUT or DELETE verb
                 url: Url, // Location of the service
                 data: Data, //Data sent to server
                 contentType: ContentType, // content type sent to server
                 dataType: DataType, //Expected data format from server
                 processdata: ProcessData, //True or False
                 success: function(msg) {//On Successfull service call
                     ServiceSucceeded(msg);
                 },
                 error: ServiceFailed// When Service call fails
             });
         } 
```

# actionscript-3 - Flash 中的内存有效声音管理

> ID：15406202
> 
> 赞同：1
> 
> 时间：2013-03-14T10:04:40.180
> 
> 标签：actionscript-3, audio, memory-management

据我在手册中阅读，当您必须播放声音时，您需要一个`Sound`对象，并制作一个临时`SoundChannel`对象来控制实际播放。我想知道是否有一种内存有效的方式来管理这些`SoundChannel`对象。到目前为止，这些似乎是“即发即弃”类型的对象，使它们半持久化的唯一方法是调用`Sound.play()`大量的播放。但是这种方法不适用于一次性声音，例如箭头或按钮点击。如果我打电话`SoundChannel.stop()`，我也可以丢弃该对象，因为没有办法让它恢复播放。有没有什么解决方案可以不疯狂地生成`SoundChannel`对象，并且能够同时处理一次性声音播放和无限时间声音（即背景音乐）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:42:59.777

`SoundChannel`确实意味着要被丢弃，这种堆使用伴随着使用像 ActionScript 这样的语言的领域。

你不应该担心声音中的 GC 使用 - 过早的优化是邪恶的！您能做的最好的事情就是重复使用您的`Sound`对象，而不是每次播放都创建一个新对象。如果您在每帧播放合理数量的声音，例如在游戏中，则应该不会有太多的 GC 问题。`SoundChannel`s 是轻量级的，并且引用了音频数据的单个副本，因此它们并不是什么大问题。可能会有更重的分配需要担心，例如游戏对象或位图。

您*可以通过使用*[SampleDataEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/SampleDataEvent.html)`SoundChannel`动态混合音频来避免使用，但这肯定会产生相反的效果，并且处理器密集度更高，更不用说更难编码了。

如果你真的担心 GC，你可以使用[System.pauseForGCIfCollectionImminent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/System.html#pauseForGCIfCollectionImminent%28%29%20System.pauseForGCIfCollectionImminent)方法来提示 GC 在非侵入性时间运行，例如在游戏过渡期间。

# c# - C# 使用 LINQ 限制递归列表

> ID：15406203
> 
> 赞同：4
> 
> 时间：2013-03-14T10:04:49.087
> 
> 标签：c#, linq

我试图弄清楚如何使用 LINQ 来限制递归调用。

我使用以下代码的目的是遍历数字列表 ( `num`)，并为每个数字递归地计数/打印到设定的数量 ( `6`)。

`newnum`我想要得到的顺序是：3 4 5 1 2 3 4 5 5 2 3 4 5

但我自然而然地陷入了无限循环。谓词并没有像我想象的`.Where`那样停止循环，很可能我的基本情况已经关闭。关于设置它的正确方法的任何见解？谢谢你。

```
var num = new[] {3, 1, 8, 5, 2};

    Func<int, int> writeString = delegate(int count)
                        {                       
                            Func<int, int> recursiveWrite = null;
                            recursiveWrite = n => 
                                                {
                                                    Console.WriteLine("string " + n); 

                                                    recursiveWrite(n+1);
                                                    return n;
                                                };
                            return recursiveWrite(count);
                        };

    var newnum = num.Where(n => writeString(n) < 6);   // is this possible?
    newnum.ToList().ForEach( w => Console.WriteLine(w)); 
```

我注意到下面的示例代码中出现了类似的停止模式，`.Where`它只包括小于 7 的阶乘，我错过了什么？

```
var numbers = new[] { 5,1,3,7,2,6,4};

Func<int, int> factorial = delegate(int num) {
        Func<int, int> locFactorial = null;
        locFactorial = n => n == 1 ? 1 : n * locFactorial(n - 1);
        return locFactorial(num);
};

var smallnums = numbers.Where(n => factorial(n) < 7); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:26:28.773

答案是您没有*基本*案例。一旦执行了递归函数，就没有什么可以阻止它了——LINQ 不会执行任何可以修改另一个函数的内部逻辑的魔法。

在示例中，您缺少将停止递归的关键代码位 - 基本情况：

```
locFactorial = n => n == 1 ? 1 : n * locFactorial(n - 1); 
```

三元运算符检查是否`n==1`- 如果是，则**返回 1**。这是您的功能缺乏的基本情况。

仅通过 LINQ 无法为您的函数提供基本案例。您需要将其构建到递归函数中。

此外，如果要从单个数字返回**数字列表，**`Factorial`则从递归函数返回错误的类型：这与在给定单个数字的情况下返回**单个数字**的函数根本不同。

这是一个无需使用递归即可完成您需要的功能：

```
void Main()
{
    var numbers = new[] {3, 1, 8, 5, 2};

    numbers.SelectMany(x => GetIncreasing(x).TakeWhile(y => y < 6));
}

IEnumerable<int> GetIncreasing(int x)
{
   while (true)
       yield return x++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:41:26.880

您可以坚持生成符合您要求的序列，例如：

```
var num = new[] { 3, 1, 8, 5, 2 };
var limit = 6;

var query = from n in num
            where n < limit // sanity check
            from pn in Enumerable.Range(n, limit - n)
            select pn; 
```

体面的性能和干净的代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:28:04.410

与阶乘样本的不同之处在于结束条件的放置。这是你应该做的：

```
recursiveWrite = n => 
                    {
                        Console.WriteLine("string " + n);
                        if (n < 6)
                            recursiveWrite(n+1);
                        return n;
                    }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T10:34:31.783

不完全确定您要达到的目标，但我希望这会有所帮助。您需要递归 lambda 中的停止条件（如阶乘中的 n==1）。使用嵌套函数，您可以“动态地”注入此限制。

```
class Program
{
    static void Main(string[] args)
    {
        var num = new[] { 3, 1, 8, 5, 2 };
        Func<int, Func<int, IEnumerable<int>>> writeString = 
            delegate(int maxcount)
            {
                Func<int, IEnumerable<int>> recursiveWrite = null;
                recursiveWrite = (n) =>
                    {
                        if (n < maxcount)
                        {
                            Console.WriteLine("string " + n);
                            var rec = recursiveWrite(n + 1);
                            return new List<int>(){n}.Concat(rec);
                        }
                        return new List<int>();
                    };
                return recursiveWrite;
            };

        var newnum = num.SelectMany(n => writeString(6)(n));   // is this possible?
        newnum.ToList().ForEach(w => Console.WriteLine(w));
        Console.ReadLine();
    }
} 
```

# apache - 如何将所有内容重定向到 SSL https，除了几个 url

> ID：15406205
> 
> 赞同：0
> 
> 时间：2013-03-14T10:04:51.637
> 
> 标签：apache, .htaccess, url-rewriting

在我的 htaccess 中，我使用以下规则重定向 SSL 下的所有内容，现在我需要添加一些例外，例如 [http://www.mysite/blog-feed.html](http://www.mysite/blog-feed.html)必须可访问 http 协议。

```
#ALWAYS REDIRECT TO SSL
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T01:19:21.837

可以试试：

```
RewriteCond %{HTTPS} !=on
RewriteCond %{REQUEST_URI} !^/blog-feed.html
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

# ios - 赋值是垃圾或未定义

> ID：15406208
> 
> 赞同：5
> 
> 时间：2013-03-14T10:05:16.620
> 
> 标签：ios, objective-c, memory-management, undefined, garbage

我已经发布了我的错误代码的屏幕截图。 ![在此处输入图像描述](../Images/a9faa361740c826f5e2addb69b3d1b7a.png)

`heights`输出

![在此处输入图像描述](../Images/e61468bf54327024823e17e93260e03f.png)

请问有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:47:09.080

我认为静态分析器没有看到如何`_numberOfColumns`变为非零，因此它坚持分配垃圾。你需要检查你是否真的提供了一些方法`_numberOfColumns`来变得非零。

通常，当我编写想要找到最大或最小值的循环时，我会将*size*变量初始化为最大（如果我想要最小）或最小（如果我想要最大）量，我认为这将解决大多数问题你的问题：

```
float shortestHeight = FLT_MAX;
for (unsigned i = 0; i < _numberOfColumns; i++)
{
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:32:57.660

分析仪是正确的。如果为 0，您的代码将访问垃圾内存`_numberOfColumns`，从而为 分配 0 个字节`heights`，从而产生`heights[0]`垃圾。分析器不知道`_numberOfColumns`可以有什么值，但您可以使用`assert(_numberOfColumns>0)`.

以这个 C 程序为例：

```
int main(int argc, const char * argv[])
{
    int n = argc-1;
    int *a = malloc(n*sizeof(int));
    for (int i=0; i<n; i++) {
        a[i] = i;
    }
    int foo = a[0];
    free(a);
    return foo;
} 
```

的大小`a`由参数的数量决定。如果你没有论据`n == 0`。如果您确定您的程序（或只是程序的那一部分）将始终将大于 0 的值分配给`a`，则可以使用断言。添加`assert(n>0)`将准确地告诉分析器。

# java - 有符号字节奇怪行为的位移

> ID：15406209
> 
> 赞同：1
> 
> 时间：2013-03-14T10:05:21.033
> 
> 标签：java, byte, bit-manipulation

我写了一个函数来打印一个字节的位。这是通过将最高有效位设置为 1 将其与输入字节进行比较，如果它也是 1，则打印“1”，否则为“0”。然后将比较字节右移。

我如何实现从 10000000 开始并转移到 01000000 然后 00100000 ......

我相信我的问题是由提升到 int 然后重铸引起的，但我没有看到解决方案。

```
package errorreporting;

public class ErrorReporting {

ErrorReporting() {
}

public static void main(String[] args) {

    ErrorReporting myError = new ErrorReporting();
    byte myByte = 16;
    myError.printByteArray(myByte);

}

public void printByteArray(byte inputByte) {
    // print out 1 or 0
    byte comparison = -128;
    for (int x = 0; x < 8; x++) {
        if ((inputByte & comparison) != 0) {
            System.out.print("1");
        } else {
            System.out.print("0");
        }
        //       System.out.print(" comparison : " + comparison);
        comparison = (byte) (comparison >>> 1);

    }
    System.out.println(" : " + inputByte);
} 
```

}

这篇文章有一些信息：[Java bitshift陌生](https://stackoverflow.com/questions/2173205/java-bitshift-strangeness)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:20:42.823

> 我相信我的问题是由提升到 int 然后重铸引起的

是的，它是一些隐式和显式转换和符号扩展的组合：

1.  在移位操作发生之前，所有参数首先被提升为 int，另请参见[https://stackoverflow.com/a/3948303/1611055](https://stackoverflow.com/a/3948303/1611055)

2.  由于 1.，您的无符号移位运算符`>>>`没有帮助 - 它正确地将 a`0`移到最左边的位置，但是由于在应用移位**之前**`-128`源参数已提升为 int （导致），因此您在第一次移位之后结束.**`0xffffff80``0x7fffffc0`**

 **最简单的解决方案是使用`int`你的面具：

```
int comparison = 0x80;  // -128; 
```

*从理论上讲*，您仍然可以使用一个字节作为掩码，但是您需要`int`在应用移位运算符之前将其显式转换为同时丢弃符号位，如下所示：

```
byte comparison = -128;
...
comparison = (byte)( (((int) comparison) & 0xff) >>> 1); 
```

`((int) comparison) & 0xff)`假定该字节确实应该是“无符号”并将其转换为相应的“无符号”int 值。然后，您可以应用移位运算符（`>>`或`>>>`无关紧要，因为我们`int`在任何情况下都有一个正值）并将其转换回 a `byte`。**

# android - 无法支持比 Android 4.2 jellybeans 更早版本的 Android 锁屏小部件

> ID：15406212
> 
> 赞同：-1
> 
> 时间：2013-03-14T10:05:30.303
> 
> 标签：android, android-4.2-jelly-bean

朋友们，我想支持Android锁屏小部件。它适用于Android jellybeans 4.2。但我也想支持冰淇淋三明治。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:06:29.633

锁屏小部件仅[在 Android 4.2 中引入](http://developer.android.com/about/versions/android-4.2.html#Lockscreen)。在以前的 Android 版本中没有 API 或对它们的支持。你不能这样做。

# java - 在java中使用http客户端发送字节数组作为文件

> ID：15406213
> 
> 赞同：6
> 
> 时间：2013-03-14T10:05:30.380
> 
> 标签：java, bytearray, httpclient

我们有文件的字节数组，我们想将它作为文件上传。 `FileBody`仅`File`作为参数获取，但我们有一个字节数组。

一种解决方案是将字节数组保存到文件中然后发送，但它不适合我。

```
byte b[]= new byte[1000];
//fill b
MultipartEntity form = new MultipartEntity();
form.addPart("file", new FileBody(/* b? */)); 
```

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T10:11:11.730

你可以做类似的事情

```
HttpClient client=null;
byte b[]= new byte[1000];
MultipartEntity form = new MultipartEntity();
ContentBody cd = new InputStreamBody(new ByteArrayInputStream(b), "my-file.txt");
form.addPart("file", cd);

HttpEntityEnclosingRequestBase post = new HttpPost("");//If a PUT request then `new HttpPut("");`
post.setEntity(form);
client.execute(post); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-13T19:47:38.217

您可以使用[ByteArrayBody](https://hc.apache.org/httpcomponents-client-ga/httpmime/apidocs/org/apache/http/entity/mime/content/ByteArrayBody.html)代替 InputStreamBody 或 FileBody。

```
HttpClient client=null;
byte b[]= new byte[1000];
MultipartEntity form = new MultipartEntity();
ContentBody cd = new ByteArrayBody(b, "my-file.txt");
form.addPart("file", cd);

HttpEntityEnclosingRequestBase post = new HttpPost("");
post.setEntity(form);
client.execute(post); 
```

# visual-studio-2012 - 在 VisualStudio 中运行的单元测试的输出

> ID：15406216
> 
> 赞同：13
> 
> 时间：2013-03-14T10:05:36.490
> 
> 标签：visual-studio-2012, mstest

我想要实现的目标非常简单，但我可能遗漏了一些东西。我只想在控制台窗口中看到我的测试记录，我已经尝试过

```
Console.WriteLine(...) 
```

我努力了

```
Trace.WriteLine(...) 
```

我努力了

```
Trace.Listeners.Add(new TextWriterTraceListener(Console.Out));
Trace.WriteLine(...) 
```

这一切仅在测试完成后才显示输出（而不是在输出控制台中，而是作为“测试输出”），我想要的是看到这些日志记录发生时。我运行测试的方式是使用 VS 主菜单中的“测试-> 运行-> 所有测试”。

我可以在某种程度上实现我想要的唯一方法是使用

```
Debug.WriteLine(...) 
```

但为此我必须在调试“测试->调试->所有测试”中运行测试，这有点烦人......

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-05T19:41:16.673

除了您已经知道的方法之外，没有其他方法可以实现这一目标。MSTest 适配器不断缓存跟踪输出，一旦测试完成，它就会在测试输出窗口中发出它。

这是一个有用的问题，我会将这个请求传递给 Visual Studio 团队中的 mstest 产品负责人。

# c# - 生成一个不偏向正真分数的随机数

> ID：15406218
> 
> 赞同：0
> 
> 时间：2013-03-14T10:05:41.953
> 
> 标签：c#, math, probability

对于这个问题的简单性，我深表歉意，现在刚刚过了凌晨 3 点，我想不出来:)

我需要得到一个`n`介于 0.25 和 10.0 之间的随机数，但是我需要`P( 0.25 <= n < 1.0 ) == P( 1.0 < n <= 10.0 ) && n != 1.0`.

现在我当前的代码倾向于`1.0 <= n <= 10.0`这样：

```
Double n = new Random().NextDouble(); // 0 <= n <= 1.0
n = 0.25 + (10.0 * n); 
```

当然，这也有一个错误，`n == 10.25`如果`n = 1.0`最初。

塔！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:12:25.913

如果我理解正确，你想要这个：

```
var random = new Random();
Double n1 = random.NextDouble(); // 0 <= n < 1.0
Double n = random.NextDouble(); // 0 <= n < 1.0
if (n1 < 0.5)
    n = 0.25 + 0.75 * n; // 0.25 <= n < 1.0
else
    n = 10.0 - 9.0 * n; // 1 < n <= 10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:20:12.507

此功能应该起作用：

```
double GetRandomValue(Random rand)
{
    return rand.Next(0, 2) == 0 
           ? 0.25 + 0.75 * rand.NextDouble() 
           : 10.0 - 9.0 * rand.NextDouble();
} 
```

第一个随机值选择您是否应该使用低于或高于 1 的值。对于高于 1 的值，您希望在范围内包括 10.0，因此需要减法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:14:00.093

```
Double n = new Random().NextDouble(); // 0 <= n <= 1.0
Double extremlySmallValue = 0.00000001;
n *= 9.75; // 0 <= n <= 9.75
n += 0.25; // 0.25 <= n <= 10.0
//few ifs now:
if(n == 10.0)
    n -= extremlySmallValue;
else if (n==1.0)
    n += extremlySmallValue; 
```

它不是完美的线性分布，但我认为它可以接受，因为`Random`它也不提供完美的线性分布。你也可以`NextDouble()`在获得 1.0 或 10.0 时制作另一个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T10:16:28.947

我觉得这就是。

```
Double n = new Random().NextDouble();
n = n < 0.5? (0.25 + (0.75 * n * 2)) : 1.0 + double.Epsilon + (9.0 * n * 2); 
```

`double.Epsilon`确保您不会因为NextDouble `n=1.0`() 产生`0 <= n < 1.0`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T10:20:02.950

您没有说在每个范围内您想要什么分布，但是，假设您想要均匀性，只需将`NextDouble`' 范围的下半部分线性映射到您的较低范围，并将上半部分映射到顶部范围。

但是，要正确设置目标间隔的半开度，需要稍加思考。`NextDouble`返回一个双精度值`[0, 1)`（即包含下限和上互斥）。我们可以将其分成两半`[0, 0.5)`，`[0.5, 1)`但是由于您需要的上限是`(1, 10]`，我们应该在转换期间翻转上限。

```
var n = myRandom.NextDouble();
if (n < 0.5)
{
    // Map from [0, 0.5) to [0.25, 1.0)
    return 0.25 + (n * 1.5);
}
else
{
    // Map from [0.5, 1.0) to (1.0, 10] by reversing the input range
    var flipped = 1.0 - n;
    // Now flipped is in [0.5, 0), which is to say (0, 0.5]
    // So scale up by 18 times to get a value in (0, 9], and shift
    return 1 + (flipped * 18);
} 
```

# wcf - WCF 流无法传输大文件

> ID：15406223
> 
> 赞同：2
> 
> 时间：2013-03-14T10:05:48.800
> 
> 标签：wcf, streaming, file-transfer

我正在制作用于传输文件的 WCF 服务。我只有基本的 WCF 理解并遵循 MSDN 教程：[WCF 教程](http://msdn.microsoft.com/en-us/library/ms734712%28v=vs.90%29.aspx) 我开始使用字节数组来传输文件，但是一旦文件变得有点大（100kb 就足够了），它就会因错误请求而失败。我按照另一个指南更改为使用消息进行流式传输，它也适用于小文件，但不适用于像旧版本这样的大文件。我怀疑问题出在我的配置文件中，因为 svcutil.exe 生成的配置文件没有说明流式传输。这是我的客户 app.config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_IDocPublisher" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="200000000" maxReceivedMessageSize="200000000"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="200000000" maxStringContentLength="200000000" maxArrayLength="200000000"
                    maxBytesPerRead="200000000" maxNameTableCharCount="200000000" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Message">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true"
                        algorithmSuite="Default" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:8000/ServiceModelSamples/docPublisherWebService/docPublisher"
            binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IDocPublisher"
            contract="IDocPublisher" name="WSHttpBinding_IDocPublisher">
            <identity>
                <userPrincipalName value="Emil-PC\Emil" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel>
</configuration> 
```

这是服务器 app.config

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="serviceBehavior">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"
                          httpHelpPageEnabled="true" />
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<services>
  <service behaviorConfiguration="serviceBehavior"
              name="DocPublisher">
    <endpoint address="http://localhost:8000/ServiceModelSamples/docPublisherWebService"
              name="basicHttpStream"
              binding="basicHttpBinding"
              bindingConfiguration="httpLargeMessageStream"
              contract="IDocPublisher" />
    <endpoint address="mex"
                  binding="mexHttpBinding"
                  contract="IMetadataExchange"/>
  </service>
</services>
<bindings>
  <basicHttpBinding>
    <binding name="httpLargeMessageStream"
                maxReceivedMessageSize="200000000"
                maxBufferSize="200000000"
                transferMode="Streamed"
                messageEncoding="Mtom" />
  </basicHttpBinding>
</bindings>
</system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:02:24.637

尝试在客户端增加发送超时和读取器配额，在服务器端设置缓冲区大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T10:44:30.027

原来配置文件不是真正的问题，问题是服务器 app.config 从未使用过，因为 msdn 教程不使用 app.config 而是在 main 方法中创建端点。

# c# - 更改 POCO 类名而不导致大量迁移

> ID：15406225
> 
> 赞同：0
> 
> 时间：2013-03-14T10:05:48.897
> 
> 标签：c#, entity-framework, ef-code-first, code-first, entity-framework-migrations

这是我们继承的实体的示例：

```
[Table("Vehicles")]
public partial class Car
{
    [Key]
    public int Id { get; set; }

    [Required]
    public Make Make { get; set; }

    [Required]
    public Model Model { get; set; }
} 
```

我们想重构我们的代码，将这个表重命名为“Vehicle”。我们可以更改该`[Table]`属性以生成一个迁移文件`RenameTable(name: "dbo.Cars", newName: "Vehicles")`，一切都很好。

但是，如果我们尝试更改类名，迁移脚手架会尝试创建然后删除同一个表。这是一个例子：

```
public override void Up()
{
    DropForeignKey("dbo.Vehicles", "Make_Id", "dbo.Makes");
    DropForeignKey("dbo.Vehicles", "Model_Id", "dbo.Models");
    DropIndex("dbo.Vehicles", new[] { "Make_Id" });
    DropIndex("dbo.Vehicles", new[] { "Model_Id" });
    CreateTable(
        "dbo.Vehicles",
        c => new
            {
                Id = c.Int(nullable: false, identity: true),
                Make_Id = c.Int(nullable: false),
                Model_Id = c.Int(nullable: false),
            })
        .PrimaryKey(t => t.Id)
        .ForeignKey("dbo.Makes", t => t.Make_Id)
        .ForeignKey("dbo.Models", t => t.Model_Id)
        .Index(t => t.Make_Id)
        .Index(t => t.Model_Id);

    DropTable("dbo.Vehicles");
} 
```

有没有办法只在代码中更改类名（保持`[Table]`属性相同），而不会导致这种行为？或者这只是我不应该做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:13:26.413

您不必使用正在生成的迁移。它试图了解您所做的更改并创建适合您工作的迁移，但显然在这种情况下算法会混淆。

您可以更改迁移以执行该`RenameTable`方法。这应该有效。

[不过，请通过http://entityframework.codeplex.com](http://entityframework.codeplex.com)向 EF 团队提交错误报告

# ms-access - 如何在插入新记录、VBA、MS ACCESS 后重新排序记录

> ID：15406228
> 
> 赞同：1
> 
> 时间：2013-03-14T10:05:54.587
> 
> 标签：ms-access, vba

我目前有一个表单，它按每条记录的递增数字的降序显示记录。虽然在我插入一条新记录后，记录顺序是这样的：

```
4, 3, 2, 1, 5 
```

但我需要它在插入后看起来像这样：

```
5, 4, 3, 2, 1 
```

我有以下代码 onLoad 对问题进行排序，但我想在输入新记录后对记录进行排序。

```
Me.OrderBy = "Table1.Field1 DESC"
Me.OrderByOn = True 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:29:47.953

您可以重新查询：

```
Private Sub Form_AfterInsert()
    Me.Requery
End Sub 
```

# ruby-on-rails-3 - 如何实现下一个和上一个链接及其永久链接

> ID：15406230
> 
> 赞同：0
> 
> 时间：2013-03-14T10:06:01.950
> 
> 标签：ruby-on-rails-3, pagination

我有一个简单的博客应用程序。在我的索引页面上，所有帖子都显示在这里。我想要做的是在一页上只显示一篇文章，并有下一个和上一个链接。单击下一步时，它应该根据创建日期转到下一个帖子，并且浏览器中的 url 应该是实际链接`/problems/:id`。

任何建议的帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:00:06.060

[Stack Overflow 另一个问题](https://stackoverflow.com/questions/1275963/rails-next-post-and-previous-post-links-in-my-show-view-how-to)的重复答案

如果每个标题都是唯一的并且您需要按字母顺序排列，请在您的 Post 模型中尝试此操作。

```
def previous_post
  self.class.first(:conditions => ["title < ?", title], :order => "title desc")
end

def next_post
  self.class.first(:conditions => ["title > ?", title], :order => "title asc")
end 
```

然后，您可以链接到视图中的那些。

```
<%= link_to("Previous Post", @post.previous_post) if @post.previous_post %>
<%= link_to("Next Post", @post.next_post) if @post.next_post %> 
```

未经测试，但它应该让你接近。`(created_at, id, etc.)`如果您需要不同的排序顺序，您可以将标题更改为任何唯一属性。

# java - 找不到元素“mvc:annotation-driven”的声明

> ID：15406231
> 
> 赞同：22
> 
> 时间：2013-03-14T10:06:06.700
> 
> 标签：java, xml, spring-mvc, annotations, spring-3

我需要从我的控制器返回 JSON/XML 数据。根据我的发现，我需要`@ResponseBody`在我的方法中，为此我需要`<mvc:annotation-driven>`启用。我尝试了各种 RnD，但仍然卡住了！:(

显然我的问题在于我的 servlet.xml 文件（架构没有得到验证！）我正在使用 Spring 3.1.1 并且在我的类路径中明确放入 spring-mvc-3.1.1.jar 。

这是我的 servlet 上下文文件 sample-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/tx                      http://www.springframework.org/schema/tx/spring-tx.xsd
         http://www.springframework.org/schema/mvc-3.1  http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
         http://www.springframework.org/schema/beans    http://www.springframework.org/schema/beans/spring-beans.xsd
         http://www.springframework.org/schema/context  http://www.springframework.org/schema/context/spring-context.xsd">

  <context:component-scan base-package="com.sample.controller"/>
  <mvc:annotation-driven/>  

  <!--Use JAXB OXM marshaller to marshall/unmarshall following class-->
  <bean class="org.springframework.web.servlet.view.BeanNameViewResolver" />

  <bean id="xmlViewer" 
        class="org.springframework.web.servlet.view.xml.MarshallingView">
    <constructor-arg>
      <bean class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="classesToBeBound">
          <list>
            <value>com.sample.model.SampleClass</value>
          </list>
        </property>
      </bean>
    </constructor-arg>
  </bean>

  <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">

  <property name="viewResolvers">
    <list>
      <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
      </bean>
    </list>
  </property>
</bean> 
```

我的控制器类如下所示：

```
@Controller
public class XmlController {

  @RequestMapping(value="/getXml",method = RequestMethod.POST)
  public @ResponseBody AssociateDetail getXml(){
    System.out.println("inside xml controller.....");
    AssociateDetail assoBean=null;

    try{
      AssociateService add=new AssociateService();
      assoBean=add.selectAssociateBean();
    }catch(Exception e){
      e.printStackTrace();
    }

    return assoBean;    
  }
} 
```

现在问题是`<mvc:annotation-driven />`给出错误：

> cvc-complex-type.2.4.c：匹配通配符是严格的，但找不到元素“mvc:annotation-driven”的声明。

我已经尝试了本网站及其他网站上建议的所有解决方法。已使用 Spring 3.1.1 和`@ResponseBody`.

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-14T16:24:08.737

正如错误表明架构声明有问题。您没有`xsd`声明 s 。改用这个。

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
                    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd     
                    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-10T17:15:50.883

将以下模式添加到顶部的 schemaLocation 声明中：

[http://www.springframework.org/schema/mvc](http://www.springframework.org/schema/mvc) [http://www.springframework.org/schema/mvc/spring-mvc-4.2.xsd](http://www.springframework.org/schema/mvc/spring-mvc-4.2.xsd)

# c# - 将 EmguCV 图像转换为系统绘图位图

> ID：15406235
> 
> 赞同：5
> 
> 时间：2013-03-14T10:06:14.477
> 
> 标签：c#, winforms, emgucv

我正在用 emgucv 库编写 ac# 程序。我使用 emgucv 中的图像框从网络摄像头捕获图像。我想通过鼠标单击图像框使用 bitmap.Getpixel() 来获取图像的颜色像素。但是，它包含错误错误是..它无法将类型“Emgu.CV.IImage”隐式转换为“System.Drawing.Bitmap”

谁能给我解决这个问题的想法？

```
 Bitmap bitmap = newdetectimageBox.Image; //error 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-25T09:00:07.990

请使用此代码

```
 Image<Bgr, Byte> ImageFrame = newdetectimageBox.Image ; //Capture the cam Image 
 Bitmap BmpInput = ImageFrame.ToBitmap(); //Convert the emgu Image to BitmapImage 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T15:25:03.717

这是您的操作方法（图像数据不与位图共享） - 请参阅 emgu 网站上有关[IImage](http://www.emgu.com/wiki/files/2.4.2/document/Index.html)的文档：

```
Bitmap bitmap = new Bitmap(newdetectimageBox.Image.Bitmap); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:23:41.593

IImage 接口包含属性 Bitmap。

但是，如果您使用的是 Image 类，那么您应该使用 ToBitmap 方法。

# xslt - 基于子节点属性值过滤节点的最简单 XSLT

> ID：15406237
> 
> 赞同：2
> 
> 时间：2013-03-14T10:06:17.443
> 
> 标签：xslt, xpath

我想使用 XSLT 复制 mrss xml，但使用 XSLT 过滤属性中没有`test`值的项目。`label`

这是我到目前为止所做的：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:media="http://search.yahoo.com/mrss/"> 
    <xsl:template match="/">
        <rss xmlns:media="http://search.yahoo.com/mrss/" version="2.0">
            <channel><xsl:apply-templates/></channel>
        </rss>      
    </xsl:template>

   <xsl:template match="channel/item[contains(media:category/@label,'test')] | channel/*[not(self::item)]">
        <xsl:copy-of select="."/>
   </xsl:template>

   <xsl:template match="channel/item[not(contains(media:category/@label,'test'))]">
   </xsl:template>
</xsl:stylesheet> 
```

我不喜欢其中的三件事：

*   空模板过滤不匹配的项目，
*   `rss`，并且`channel`元素已经存在于源 XML 中，但我仍然需要将其放入 XSL 文件中
*   我认为有些事情可以用单个 XPath 表达式来完成，但我对 XPath 和 XSLT 的了解还不够。

有人可以提出更好/更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:49:37.883

是的，更好的方法是从身份模板开始，然后从那里开始。以下应该是您所需要的：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                              xmlns:media="http://search.yahoo.com/mrss/">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="channel/item[not(contains(media:category/@label,'test'))]" />
</xsl:stylesheet> 
```

# highcharts - 可以在highcharts内进行自己的样条计算吗？

> ID：15406239
> 
> 赞同：0
> 
> 时间：2013-03-14T10:06:20.227
> 
> 标签：highcharts

Highcharts 中有没有办法添加自己的样条计算，或者我必须计算几个点并将其作为值添加到常规样条计算中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:01:41.467

您必须首先计算您的积分，然后将它们添加到图表中。

# java - 如何在一段时间后重复运行线程

> ID：15406240
> 
> 赞同：5
> 
> 时间：2013-03-14T10:06:20.490
> 
> 标签：java, android, multithreading, scheduler

我想运行一个线程（它在后台执行一些耗时的任务并且不更新 UI）它只是从 Internet 下载一些文件并且它独立于 UI。

我想在一段时间后重复运行这个线程。

我该怎么做，我有类似下面的线程：

```
boolean mResult =false;

void onCreate()
{
    DownloadThread mDownloadThread = new DownloadThread();
    mDownloadThread.start();
}

class DownloadThread extends Thread implements Runnable
{
    public void run() 
    {
       // My download code 
       mResult  = result;
    }
} 
```

我需要`Handler`用来实现这个吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-14T10:28:18.663

**选项1：**

```
volatile boolean flag = true;

public void run() 
{
    while(flag)
    {    
       // Do your task
        try{
            Thread.Sleep(interval);
        } catch(Exception e){

        }

    }
} 
```

**选项 2：**

```
Timer timer = new Timer();
timer.scheduleAtFixedRate(new TimerTask() {

    @Override
    public void run() {
        // Do your task
    }

}, 0, interval); 
```

**选项 3：**

```
volatile boolean flag = true;

public void someMethod(){
     // Do your task
     try{
         Thread.Sleep(interval);
     } catch(Exception e){

     }
     if(flag)
        return;
     else
        someMethod();     
} 
```

**选项 4：**

```
final Handler handler = new Handler();
volatile boolean flag = true;

Class A implements Runnable{
    public void run(){
        // Do your Task
    }
    if(!flag)
       handler.postDelayed(a, interval);
}

A a = new A();

handler.postDelayed(a); 
```

会有更多的选择。我从未尝试过选项 3 和 4。我突然想到并写了。如果我是你，我会使用 1 或 2 中的任何一个。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-14T10:28:03.180

首选是

```
java.util.concurrent.ScheduledExecutorService 
```

更新和健壮的实现，这里有更多[ScheduledExecutorService](http://developer.android.com/reference/java/util/concurrent/ScheduledExecutorService.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-14T10:16:40.830

我会使用[计时器](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html)来实现这一点。尝试这个：

```
void onCreate()
{
    Timer t = new Timer();
    t.scheduleAtFixedRate(new TimerTask() {

        @Override
        public void run() {
            // Download your stuff
        }

    }, 0, 1000);
} 
```

它立即启动，并且每秒调用一次 run 方法。

# android - 是否有任何工具可用于设计 3D、2D 对象并获取 OPENGL ES 的顶点和索引详细信息

> ID：15406244
> 
> 赞同：1
> 
> 时间：2013-03-14T10:06:32.707
> 
> 标签：android, opengl-es

如果我们绘制 2D 或 3D 对象，我正在寻找能够在顶点和索引方面为 OPENGL ES 生成结果的工具。是否有任何工具可用于创建 3D 对象并生成顶点来为 android 创建 3D 对象。

我想将这些对象映射到 android 增强现实中。我们如何将这些 OpenGL ES 对象映射到 AR。

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:38:18.557

不是要劝阻你，而是没有你想的那么简单。当然不难，只是你需要做的几件事。

有许多工具可以让您创建图形对象。示例包括[Blender](http://www.blender.org/)和[Maya](http://usa.autodesk.com/maya/)

这些不是唯一的工具，但问题是这些工具中表示的对象并不完全可以在您的项目中使用，因为这些工具可能（而且确实***是***）使用 OpelGLES 以外的其他方法来表示对象。

您要做的是将使用某些 3D 工具创建的对象*导出*为您可以*解析*的文件格式。然后您可以使用解析的信息以您的程序可以使用的某种*格式*（不是文件格式）获取数据。

例如，考虑*[波前 obj](http://en.wikipedia.org/wiki/Wavefront_.obj_file)*文件格式。一个典型的 obj 文件如下所示：

```
# ('#' is for comments, just ignore it)
# PURELY USELESS .obj file
v 0.123 0.234 0.345  # 'v' represents vertex
v 0.122 1.034 3.042
vt 0.500 1           # 'vt' represents texture/uv
vt 0.042 0.889
vn 0.707 0.000 0.707 # 'vn' stands for normal
vn 0.367 0.367 0.000
f 6/4/1 3/5/3 7/6/5  # 'f' stands for face
# there are other things too, like material ('usemtl') etc 
```

考虑到您想在项目中使用表示为上述文件的对象，您将不得不解析文件以获取信息，例如数组。顶点、法线、纹理/uv 和面各有一个数组（可能有更多，您可能需要更少）。

所以，有几个步骤：

1.  使用一些工具创建一个对象，你会更喜欢 Blender，因为它是 FOSS。
2.  将其导出为您可以解析的某种格式，例如 Obj 或 Collada。
3.  *将导出*的文件解析为您希望使用的方式（很可能就像您正在关注的一些 Android OpenGL 示例中一样）
4.  将此数据放入缓冲区并进行渲染。

* * *

如果我是你，我会按照他们在示例中的方式开始。从立方体或其他一些简单的形状开始。IIRC 立方体是搅拌机中的默认形状，因此导出就像遵循一些基本的搅拌机教程一样简单。然后你可以从那里成长。

此外，创建对象并向它们应用图像（*纹理*）并不是您在编写*循环*时可以掌握的技能，而且速度也不快，因此您可能希望从一些设计师/3D 艺术家那里获得帮助或免费在线东西之类的

# groovy - 通过 REST API 进行 Artifactory Search 导致“错误请求”错误

> ID：15406248
> 
> 赞同：2
> 
> 时间：2013-03-14T10:06:52.173
> 
> 标签：groovy, artifactory, httpbuilder

我正在尝试使用 groovy 脚本和 REST API 搜索工件：

```
def query = ‘artifactory/api/search/artifact?name=at.mic.all.feature&repos=features-qa-test-snapshot’
def server = new RESTClient(‘http://mic-build2.mic.co.at:8081’)
server.parser.'application/vnd.org.jfrog.artifactory.search.ArtifactSearchResult+json' = server.parser.'application/json'
def resp = server.get(path: query) 
```

这会导致异常：

```
groovyx.net.http.HttpResponseException: Bad Request
    at groovyx.net.http.RESTClient.defaultFailureHandler(RESTClient.java:240)
    at groovyx.net.http.HTTPBuilder.doRequest(HTTPBuilder.java:508)
    at groovyx.net.http.RESTClient.get(RESTClient.java:118)
    at groovyx.net.http.RESTClient$get.call(Unknown Source)
    at Artifactory.getArtifacts(artifactory.groovy:157)
… 
```

只是为了查看服务器和查询是否正确，我尝试了 url = server + '/' + query (= [http://mic-build2.mic.co.at:8081/artifactory/api/search/artifact?name= at.mic.all.feature&repos=features-qa-test-snapshot](http://mic-build2.mic.co.at:8081/artifactory/api/search/artifact?name=at.mic.all.feature&repos=features-qa-test-snapshot)）在浏览器中，这会产生一个包含我的搜索结果的文件：

{“结果”：[{“uri”：” [http://mic-build2.mic.co.at:8081/artifactory/api/storage/features-qa-test-snapshot/at/mic/all/feature/ at.mic.all.feature/20130313002236/at.mic.all.feature-20130313002236-win32.win32.x86.zip](http://mic-build2.mic.co.at:8081/artifactory/api/storage/features-qa-test-snapshot/at/mic/all/feature/at.mic.all.feature/20130313002236/at.mic.all.feature-20130313002236-win32.win32.x86.zip) "},…..}

所以，我的服务器和查询似乎没问题，但在我的 groovy 脚本中不起作用。

在此先感谢您的帮助，亲切的问候！坦率

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:18:26.620

uri 路径应该以“/”开头，HTTP 客户端不会为您附加它。

```
def query = ‘/artifactory/api/search/artifact?name=at.mic.all.feature&repos=features-qa-test-snapshot’ 
```

这应该有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-21T14:32:16.407

我在搜索工件时遇到了类似的问题（导致“错误请求”或“未找到”异常）。问题的原因是使用您的方法创建的 HTTP 请求格式不正确：在工件中，`request.log`我看到该请求

```
/api/search/artifact?name=test 
```

变成

```
/api/search/artifact%3Fname=test 
```

这显然是不正确的 HTTP 请求。在研究了 RESTClient[文档](http://groovy.codehaus.org/modules/http-builder/doc/get.html)后，我找到了正确的解决方案：使用提供的 API 形成 HTTP 请求，而不是自己将整个请求连接为字符串。

```
def queryPath = '/api/search/artifact'
def server = new RESTClient('http://mic-build2.mic.co.at:8081')
server.parser.'application/vnd.org.jfrog.artifactory.search.ArtifactSearchResult+json' = server.parser.'application/json'
def resp = server.get(path: queryPath, query: [name: 'test', repos: 'your-repo']) 
```

这样，您可以将任何参数链接到查询，而无需使用适当的分隔符手动形成 HTTP 请求。希望这会有所帮助

# android - 在 android 2.3 上在线播放 mp3 文件时 MediaPlayer 错误 -2147483648

> ID：15406253
> 
> 赞同：0
> 
> 时间：2013-03-14T10:06:57.660
> 
> 标签：android, media-player

想在线播放音频/mp3 文件但无法准备 medplayer。下面给出的代码，

```
MediaPlayer mediaPlayer1 = new MediaPlayer();
mediaPlayer1.setAudioStreamType(AudioManager.STREAM_MUSIC);
                String p=URL+"/"+ AudioFile_Name;
                mediaPlayer1.setDataSource(p);
                mediaPlayer1.prepareAsync();
                mediaPlayer1.setOnPreparedListener(new OnPreparedListener() {
                        @Override
                        public void onPrepared(MediaPlayer mp) {
                            //Now dismis progress dialog, Media palyer will start playing
                            mp.start();
                        }
                    });
mediaPlayer1.setOnErrorListener(new OnErrorListener() {
                        @Override
                        public boolean onError(MediaPlayer mp, int what, int extra) {
                            // dissmiss progress bar here. It will come here when MediaPlayer
                            //  is not able to play file. You can show error message to user
                            return false;
                        }
                    }); 
```

请指教解决方案，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T21:57:09.430

我遇到了这个问题，因为我已经将我的文件存储在 Dropbox 中，并且它的共享地址是安全的网站，这意味着 Https 在 androd 2.3 中不受支持，现在改为 http 并且可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:19:50.200

确保您在清单中使用了 Internet 权限：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

# gnuplot - 没有文本文件的 Gnuplotting 多图数据

> ID：15406255
> 
> 赞同：4
> 
> 时间：2013-03-14T10:07:00.673
> 
> 标签：gnuplot, inlining

我刚刚阅读[了没有 textfile 的 Gnuplotting 数据](https://stackoverflow.com/questions/3318228/gnuplotting-data-without-a-textfile)，我想做同样的事情，但使用“多图”。我目前有：

```
plot 'data.csv' using 1:3:2:6:5:7:xticlabels(8) with candlesticks title 'Quartiles' whiskerbars, \
  ''         using 1:4:4:4:4:4 with candlesticks lt -1 notitle 
```

我想将数据内联到`data.csv`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T13:06:53.453

这很容易：

```
set multiplot layout 1,2
plot '-' u 1:2
1 2
2 3
3 4  
e

plot '-' u 1:2
2 3
3 4
4 5
e 
```

请注意，内联数据对伪文件并不是特别满意`''`。那时您实际上需要再次包含整个数据。所以，如果你想在多图的同一个子图上有 2 条轨迹：

```
set multiplot layout 1,2
plot '-' u 1:2, '-' u 1:3
1 2 3
4 5 6
7 8 9
e
1 2 3
4 5 6
7 8 9
e

plot '-' u 1:($2*$3)
1 2 3
4 5 6
7 8 9
e 
```

这最终就像你有一个数据文件一样`data.txt`：

```
#data.txt
1 2 3
4 5 6
7 8 9 
```

并用这个（更简单的）脚本绘制它：

```
set multiplot layout 1,2
plot 'data.txt' u 1:2, '' u 1:3
plot '' u 1:($2*$3) 
```

# objective-c - Objective-C：自变量理解问题

> ID：15406256
> 
> 赞同：1
> 
> 时间：2013-03-14T10:07:06.323
> 
> 标签：objective-c, self

我想知道关于`self`.

1.  哪个上下文`self`在类方法中有变量？
2.  为什么`self.self`在方法中允许`init`？

第一的：

我们有一堂课`ExampleClass`

```
@interface ExampleClass:NSObject
@property (nonatomic,strong) NSString* a;

+(ExampleClass*)createExampleClass;

@end

@implementation ExampleClass

-(id)init{
    self = [super init];
    if(self){
        [self.self init]; #Allowed
        [self init]; #Not Allowed ?
    }

}

+(ExampleClass*)createExampleClass{
    /*do work here*/
    NSLog(@"Self: %@ \n Class: %@",self,[self class]);
}
@end 
```

在此示例中，我们将看到如下内容：

```
Self: ExampleClass
Class: ExampleClass 
```

但为什么？！

并且在`init`方法中`[self.self init]`允许，但不允许'[self init]'。

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:18:26.630

在一个类方法中，`self`就是类。对于类`[self class]`只是返回`self`，所以`self`和`[self class]`那里基本上是一样的。

调用`[self init]`该`init`方法没有任何意义，它会导致无限递归。但是，您得到的编译器错误是 ARC 的限制，如果您使用`self = [self init]`，错误会消失，但仍然没有任何意义。不过，您可以在不同的初始化方法中执行此操作，以调用指定的初始化程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:17:19.687

1.  `self`在类方法中是类对象本身。

2.  `NSObject`具有`self`返回自身的方法。

        见这里：   [https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/self](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/self)

    Self: ExampleClass // 类的名称。Class: ExampleClass // 与类对象相同的元类对象的名称。

如果你打印指针地址，你会看到两个对象是不同的。

这是很好的插图和描述。 [http://www.sealiesoftware.com/blog/archive/2009/04/14/objc_explain_Classes_and_metaclasses.html](http://www.sealiesoftware.com/blog/archive/2009/04/14/objc_explain_Classes_and_metaclasses.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:20:07.130

`self.self``[self self]`是返回的缩写`self`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-02T19:30:53.897

`self.self.self.self.self.self`也是有效的 :) 或 [[self self].self self].self.self

# jqplot - 条形图的 jqplot 帮助

> ID：15406258
> 
> 赞同：-2
> 
> 时间：2013-03-14T10:07:09.850
> 
> 标签：jqplot

hFollowing 是 barclustered jqplot 的代码。谁能指导我在下面的代码中动态创建一个突出显示的数组

```
$(document).ready(function(){
// For horizontal bar charts, x an y values must will be "flipped"
// from their vertical bar counterpart.
var plot2 = $.jqplot('chart2', [
    [[2,1], [4,2], [6,3], [3,4]], 
    [[5,1], [1,2], [3,3], [4,4]], 
    [[4,1], [7,2], [1,3], [2,4]]], {
       seriesDefaults: {
           renderer:$.jqplot.BarRenderer,
           // Show point labels to the right ('e'ast) of each bar.
           // edgeTolerance of -15 allows labels flow outside the grid
           // up to 15 pixels.  If they flow out more than that, they 
           // will be hidden.
           pointLabels: { show: true, location: 'e', edgeTolerance: -15 },
           // Rotate the bar shadow as if bar is lit from top right.
           shadowAngle: 135,
           // Here's where we tell the chart it is oriented horizontally.
           rendererOptions: {
               barDirection: 'horizontal'
           }
       },
       axes: {
           yaxis: {
            renderer: $.jqplot.CategoryAxisRenderer
           }
       }
   });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:25:16.777

您的 Javascript 语法和算法有问题。循环应如下所示：

```
VData="9,453,470,232|488,378,375,142|365,275,255,434|217,317,479,89";
var a = new Array();
var split_fst = VData.split("|")
for(m=0;m<split_fst.length;m++) { 
  var split_snd = split_fst[m].split(",");
  a[m] = new Array();
  for(j=0;j<split_snd.length;j++){ 
     a[m][j]=split_snd[j];
  }
} 
```

你的`a`变量现在看起来像：`[["9","453","470","232"],["488","378","375","142"],["365"," 275","255","434"],["217","317","479","89"]]

# sql-server - 从 sql 中具有 csv 值的列中查找

> ID：15406271
> 
> 赞同：2
> 
> 时间：2013-03-14T10:07:41.037
> 
> 标签：sql-server, csv

我在数据库中有一个列（数据），其值如下

```
id     name     data
1     jatin    1,11,15
2     harsh     3,5,11 
```

如果我想获取数据列中包含 11 的人的姓名，我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T08:22:33.257

在 MS SQL Server 上，您不能使用 FIND_IN_SET 函数，而必须这样做：

```
SELECT * FROM MyTable
WHERE ',' + Data + ',' LIKE '%,11,%' 
```

我在 Data 列的前面和末尾添加了逗号，以确保 LIKE 运算符有效，即使“11”位于字符串的开头或结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T13:48:13.140

您可以使用此功能：

```
CREATE FUNCTION CSV2Table (@var VARCHAR(max))
RETURNS TABLE
AS
RETURN (
        -- Recursive CTE
        WITH CSV(pop, variable) AS (
                -- Base case
                SELECT CASE 
                        WHEN charindex(',', @var) > 0
                            THEN substring(@var, 1, charindex(',', @var) - 1)
                        ELSE @var
                        END,
                    CASE 
                        WHEN charindex(',', @var) > 0
                            THEN substring(@var, charindex(',', @var) + 1, len(@var) - charindex(',', @var) + 1)
                        ELSE ''
                        END

                UNION ALL

                -- Recursive
                SELECT CASE 
                        WHEN charindex(',', CSV.variable) > 0
                            THEN substring(CSV.variable, 1, charindex(',', CSV.variable) - 1)
                        ELSE CSV.variable
                        END,
                    CASE 
                        WHEN charindex(',', CSV.variable) > 0
                            THEN substring(CSV.variable, charindex(',', CSV.variable) + 1, len(CSV.variable) - charindex(',', CSV.variable) + 1)
                        ELSE ''
                        END
                FROM CSV
                WHERE len(CSV.variable) > 0
                )
        SELECT pop
        FROM CSV
        )
GO 
```

并执行以下操作：

```
SELECT * FROM <TABLE> WHERE EXISTS(SELECT TOP 1 1 FROM dbo.CSV2Table(data) WHERE POP = '11') 
```

# git - 更改 git 中的存储库描述

> ID：15406274
> 
> 赞同：9
> 
> 时间：2013-03-14T10:07:47.583
> 
> 标签：git, github, github-for-windows

我想更改我正在处理的项目的存储库描述，但 GitHub 网站中没有出现“编辑”按钮。

我使用 GitHub for Windows 并提供了 shell。

尽管网站上存在描述，但`.git\description`文件具有默认内容，并且`\description`文件夹中不存在`root`文件。项目的描述存储在哪里，如果它存在于 GitHub 上？

我更改了`.git\description`，但更改对 git 状态不可见。

如何更改项目描述而不`\description`在`root`文件夹中创建文件或创建指向其`.git\description`版本的链接？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T10:20:19.290

该`.git\description`文件仅用于 Git-Web 程序。Github 甚至都不关心它，您在本地 git 存储库中输入的描述对您来说仍然是本地的，并且永远不会传输到远程存储库。

要更改 Github 上的项目描述，请看这里：[如何更改 GitHub 上的存储库描述？](https://stackoverflow.com/questions/7757751/how-do-you-change-a-repository-description-on-github)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-14T10:27:34.430

您只能更改您*拥有*的项目的 GitHub 存储库描述。简单的读/写访问不足以改变这一点。您基本上需要与访问项目管理部分所需的权限相同的权限。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T10:16:34.853

当您将鼠标移到将显示描述的区域上时，应该会显示编辑按钮。

来自链接 manojlds 的评论粘贴：

> 显然，如果项目不为空，则描述仅出现在项目的详细信息中！我必须先提交一些东西才能改变它

# java - 使用 Swing 创建列表项的列表和操作

> ID：15406275
> 
> 赞同：1
> 
> 时间：2013-03-14T10:07:51.393
> 
> 标签：java, swing, list, using

下面是我在 Swing 中创建列表的代码。当我单击列表时，它会更改其颜色，但我需要显示文本而不是背景颜色更改；或者当我单击列表项时，它需要在单独的窗口/该窗口内显示一些文本。请帮助我解决这个问题。下面是我的代码，它在点击时改变颜色。

```
import javax.swing.*;
import javax.swing.event.ListSelectionEvent;
import javax.swing.event.ListSelectionListener;
import java.awt.*;
import java.awt.event.*;

public class JListDemo extends JFrame {

    JList list;
    String[] listColorNames = {"black", "blue", "green", "yellow",
        "white"};
    Color[] listColorValues = {Color.BLACK, Color.BLUE, Color.GREEN,
        Color.YELLOW, Color.WHITE};
    Container contentpane;

    public JListDemo() {
        super("List Source Demo");
        contentpane = getContentPane();
        contentpane.setLayout(new FlowLayout());
        list = new JList(listColorNames);
        list.setSelectedIndex(0);
        list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        contentpane.add(new JScrollPane(list));
        list.addListSelectionListener(new ListSelectionListener() {
            public void valueChanged(ListSelectionEvent e) {
                contentpane.setBackground(listColorValues[list
                    .getSelectedIndex()]);
            }
        });
        setSize(200, 200);
        setVisible(true);
    }

    public static void main(String[] args) {
        JListDemo test = new JListDemo();
        test.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-18T18:23:06.837

我认为下面的代码片段会产生预期的效果。您应该放大框架以查看效果。

```
contentpane.add(new JLabel(listColorNames[list.getSelectedIndex()]),BorderLayout.WEST); 
```

您可以添加 JPanel 以查看更灵活的结果。

# nservicebus - 使用 NServiceBus 远程公开消息队列

> ID：15406276
> 
> 赞同：2
> 
> 时间：2013-03-14T10:07:55.313
> 
> 标签：nservicebus, polling

我有一个场景，我需要通过一个简单的经过身份验证的 REST API 向第三方公开一堆在 NServiceBus 中创建的事件消息。第三方可能使用也可能不使用 .NET（它们甚至可能是浏览器中的 JavaScript）。

我知道发布/订阅是一种推送机制，但我正在寻找一种轮询机制。这在 NServiceBus 中是否可行？这是适配器的用途，还是接受入站消息的用途？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:42:42.383

通常，您不希望将您的服务总线暴露给第三方。您可以设法将一些传输交付给订阅者，但随后您将向外部世界发送内部结构。您还提到您需要通过 REST 接口的拉机制。

我的建议是在您的服务总线中有一个订阅者来监听相关消息，然后将它们以序列化形式保存在“事件存储”类型中，或者将它们反规范化为 REST 接口将公开的资源. 这些消息/资源将包含相关的日期/时间戳。

REST API 的使用者可以指定某个时间点以从中检索资源。因此，第三方只需跟踪他们上次检索数据的时间。当然，他们可以根据需要检索尽可能多的内容，如果需要，新的“订阅者”将能够检索整个历史记录。每个消息/资源还应该有一个 GUID 来帮助幂等性。

# java - Eclipse RCP - 如何以编程方式创建和打开视图？

> ID：15406277
> 
> 赞同：0
> 
> 时间：2013-03-14T10:07:55.060
> 
> 标签：java, view, eclipse-plugin, swt, eclipse-rcp

我想在执行操作时打开一个包含表格的视图。

我可以通过该代码通过 viewId 打开视图：

```
 display.asyncExec(new Runnable(){

        public void run() {
        ApplicationGIS.getView(true, viewId);

    }}); 
```

此视图的 id 在 plugin.xml 上定义，但我必须将一些参数传递给此视图上的表。我可以以编程方式创建我的自定义视图，但这次我无法打开它，因为我没有它的 ID。这是我的视图类：

```
public class MyCustomView extends ViewPart {

    private Text text;
    private Table table;
    private TableViewer tableViewer;

    @Override
    public void createPartControl(Composite parent) {
        // TODO Auto-generated method stub
        parent.setLayout(new GridLayout(4, false));

        Composite composite = new Composite(parent, SWT.NONE);
        composite.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 4, 1));
        composite.setLayout(new GridLayout(2, false));

        text = new Text(composite, SWT.BORDER);
        text.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 1, 1));

        Composite composite_1 = new Composite(composite, SWT.NONE);
        composite_1.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 2, 1));
        GridLayout gl_composite_1 = new GridLayout(1, false);
        gl_composite_1.horizontalSpacing = 0;
        gl_composite_1.marginHeight = 0;
        gl_composite_1.marginWidth = 0;
        gl_composite_1.verticalSpacing = 0;
        composite_1.setLayout(gl_composite_1);

        tableViewer = new TableViewer(composite_1, SWT.BORDER | SWT.FULL_SELECTION);

        table = tableViewer.getTable();
        table.setHeaderVisible(true);
        table.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));
    }

    @Override
    public void setFocus() {
        // TODO Auto-generated method stub

    }
} 
```

那么如何访问这个以编程方式创建的视图并打开它呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T11:00:49.350

在 Eclipse 3.x 中，您可以像这样打开一个视图：

```
MyView view = (MyView) PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().showView(viewer_ID); 
```

或者，如果您正在实现命令处理程序，您可以调用：

```
HandlerUtil.getActiveWorkbenchWindow(event).getActivePage().showView(viewId); 
```

要设置一些内容，您只需`void setInput(MyContent input)`在 ViewPart 中添加一个方法，然后在打开它后将所需的参数传递给此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:21:28.460

我有同样的问题。我想从插件中注册的视图创建额外的视图。这些 URL 将为您提供您想要的：

[http://wiki.eclipse.org/FAQ_How_do_I_open_multiple_instances_of_the_same_view](http://wiki.eclipse.org/FAQ_How_do_I_open_multiple_instances_of_the_same_view)

[http://www.java-tips.org/other-api-tips/eclipse/how-to-create-multiple-instances-of-one-viewpart.html](http://www.java-tips.org/other-api-tips/eclipse/how-to-create-multiple-instances-of-one-viewpart.html)

```
PlatformUI.getWorkbench().getActiveWorkbenchWindow().
getActivePage().showView(String viewID,String secondaryID,int Mode); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:57:03.960

来自@Chriss 的回答；

我在我的视图中添加了一个方法`setInput(parameter)`，然后我可以像这样将我的值传递给我的自定义视图

```
 MyCustomView view = new MyCustomView();     
    view.setInput(parameter);
    display.asyncExec(new Runnable(){

        public void run() {
        ApplicationGIS.getView(true, viewId);

    }}); 
```

这有效。

# .htaccess - mod_rewrite 强制尾部斜杠，除非 url 具有 .html 扩展名

> ID：15406279
> 
> 赞同：0
> 
> 时间：2013-03-14T10:08:02.493
> 
> 标签：.htaccess, mod-rewrite

我这里有问题..

我有一个像这样的htaccess

```
Options +FollowSymLinks  
RewriteEngine On  
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f
# Rewrite cuiy  
RewriteEngine On
# Ensure all URLs have a trailing slash.
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$ 
RewriteRule ^(.*)$ http://store.kiosban.com/$1/ [L,R=301]
RewriteRule ^produk/([^/]*)/([^/]*)\.html$ /template/single-product.php?produk=$1&slug=$2 [L] #single produk
RewriteRule ^produk/([^/]*)$ /template/product.php?produk=$1 [L] #archive produk
RewriteRule ^produk/$ http://www.store.kiosban.com/produk/all [R=301,L]
RewriteRule ^produk/([^/]*)/([^/]*)$ /template/product.php?produk=$1&page=$2 [L] #archive produk
RewriteRule ^filter/([^/]*)/ukuran/([^/]*)$ /template/search.php?filter=$1&ukuran=$2 [L] #search by size
RewriteRule ^filter/([^/]*)/ukuran/([^/]*)/([^/]*)$ /template/search.php?filter=$1&ukuran=$2&page=$3 [L] #search by size
RewriteRule ^filter/([^/]*)/oem/([^/]*)$ /template/search.php?filter=$1&oem=$2 [L] #search by oem
RewriteRule ^filter/([^/]*)/oem/([^/]*)/([^/]*)$ /template/search.php?filter=$1&oem=$2&page=$3
RewriteRule ^checkout/$ /template/checkout.php
RewriteRule ^checkout/2/ /template/product.php
RewriteRule ^login/$ /template/mlebu.php
RewriteRule ^daftar/$ /template/register.php 
```

如果我插入这样的网址，它会起作用

```
http://store.kiosban.com/produk 
```

会变成这样

```
http://store.kiosban.com/produk/ 
```

但是问题是当网址是这样的时候

```
http://store.kiosban.com/produk/accesories/accesories.html 
```

也会变成这个样子

```
http://store.kiosban.com/produk/accesories/accesories.html/ 
```

我的问题是.. 当 url 不是 .html 文件时如何添加斜杠...

```
http://store.kiosban.com/produk 
```

变得

```
http://store.kiosban.com/produk/ 
```

和

```
http://store.kiosban.com/produk/accesories/accesories.html 
```

还在

```
http://store.kiosban.com/produk/accesories/accesories.html 
```

有什么建议吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:29:43.073

您需要将其添加到您的条件集中：

```
RewriteCond %{REQUEST_URI} !\.html$ 
```

如果 URL 以`.html`.

# asp.net - 创建 Windows 8 应用程序时使用 ASP.NET

> ID：15406282
> 
> 赞同：1
> 
> 时间：2013-03-14T10:08:12.830
> 
> 标签：asp.net

嗨，我只是想知道我是否可以使用 ASP.NET 来创建 Windows 8 应用程序，还是 ASP.NET 仅用于主页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:44:09.537

ASP.NET 用于创建 Web 应用程序。

要创建 win 8 应用程序，您可以使用 Microsoft 支持的任何语言（vb.net、c++、c#、javascript 等）以及 XAML（可扩展应用程序标记语言）或纯 HTML。

尽管我认为您可以在 asp.net 中创建一个 Web 应用程序，然后在浏览器模式下在 win 8 应用程序中打开（太疯狂了！）。

# performance - Talend Open Studio 解决 ESB 5.2 工作优化/性能问题的路径

> ID：15406289
> 
> 赞同：0
> 
> 时间：2013-03-14T10:08:47.813
> 
> 标签：performance, xml-parsing, esb, talend

使用 Talend ESB 5.2.0，我想创建一个中介路由，该路由将在入站请求的负载上调用处理作业到 CXF 消息传递端点，但是我当前的实现遇到了一些大型负载的性能问题。

我调查了这个问题，发现瓶颈在于使用 tXMLMap 将我的入站 XML 有效负载从 tRouteInput 组件编组到内部行结构进行处理。

是否有可能在路由中使用内置类型转换器，从路由中编组内部行结构并通过 POJO 或传输在作业中处理成本更低的对象进行流式传输？或者有没有更好的方法将 XML 编组到 Talend 的内部行结构，使用成本较低的转换？

任何想法都会受到欢迎。干杯，中号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:21:35.207

事实证明，该问题是由入站 XML 有效负载的格式引起的——具有多个循环元素映射以将输出流与 tXMLMap 分开，从而为每个输出流的每个项目生成相对链接，从而启用涉及循环的更高级处理，如果必需的。

这导致了导致吞吐量不佳的大量内存开销。

不需要在 XML 到 Talend 行转换中进行任何更高级的处理，我们通过使用 tReplicate 和 tExtractXMLField 组件将有效负载拆分为其不同的循环元素，然后在单独的 tXMLMaps 中映射出 XML 以避免自动生成这些链接，从而克服了这个问题.

- 中频

# apache - xampp apache端口更改/扫描

> ID：15406293
> 
> 赞同：2
> 
> 时间：2013-03-14T10:09:05.637
> 
> 标签：apache, xampp, port, moodle, port-scanning

我在面向外部的服务器上运行 xampp（我知道人们建议不要这样做，我们已经对其进行了非常严格的配置 [我认为！]）。我们正在使用控制面板 v3.1.0，它有一个名为 Port(s) 的列。显示的 apache 端口不断变化，并通过 udp 端口​​循环，以及列出标准 apache 端口：

```
Port(s)
80, 443

80, 443, 1245

80, 443

80, 443, 1246

80, 443, 1247 
```

这是什么意思？我们是否被扫描（我不控制我们的防火墙，但他们说端口被锁定为 80 和 443）？

httpd.conf

```
 #Listen 0.0.0.0:80
 #Listen [::]:80
 Listen 80 
```

httpd-ssl.conf

```
 #Listen 0.0.0.0:443
 #Listen [::]:443
 Listen 443 
```

可能还值得注意的是，这台机器运行的是 moodle 2.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-15T13:18:16.280

这些是 MySQL 与 Apache 讨论的端口。3306 <-> 1245 等

没什么可担心的。

# javascript - Prestashop 产品图像交换缩略图点击

> ID：15406296
> 
> 赞同：0
> 
> 时间：2013-03-14T10:09:07.533
> 
> 标签：javascript, jquery, html, css, prestashop

每个产品都有可能有多个图像，这些图像被列为主要产品图像左侧的列表。

我遇到的问题是，当用户单击任何拇指时，它会得到图像，但在模态框上，而不是交换主图像。就像这个[例子](http://shop.garancedore.fr/collections/art-prints/products/early-winter-1)

任何指南/想法如何在 Prestashop 上实现这一目标？

我已经在 Prestashop 论坛上问过这个问题，但没有运气......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:08:55.767

问题是大图像块位于缩略图图像上，因此脚本无法在缩略图上注册悬停事件。修复很简单，将 theme/default/css product.css line 15 代码更改为

```
#pb-right-column #image-block {
    position: relative;
    float: left;
} 
```

# mysql - MySQL 存储长字符串的最佳方式

> ID：15406299
> 
> 赞同：27
> 
> 时间：2013-03-14T10:09:09.847
> 
> 标签：mysql

我正在从 mySQL 专家那里寻找一些关于存储长字符串数据的最佳方法的建议。

我有一个通用表，用于存储任何类型的数据，我的意思是它应该能够保存字母数字和数字数据。目前，表结构很简单，只有一个 ID，实际数据存储在一个列中，如下所示：

```
id INT(11)
data VARCHAR(128) 
```

我现在需要存储大量数据（最多 500 个字符），我想知道最好的方法是简单地增加 varchar 列的大小，还是应该添加一个新列（TEXT 类型的列？）有时我需要存储更长的字符串。

如果有任何专家有任何建议，我会全力以赴！我首选的方法是简单地增加 varchar 列，但那是因为我很懒。我正在运行的 mySQL 版本是 5.0.77。

我应该提一下，新的 500 个字符要求仅适用于奇数记录；表中的大多数记录不会超过 50 个字符。我以为我会通过制作第 128 列来适应未来。显示我知道多少！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-14T11:31:01.820

一般来说，这不是一个有“正确”答案的问题。MySQL 中没有“无限长”文本存储类型。您可以使用`LONGTEXT`，但这仍然有一个（高得离谱的）上限。然而，如果你这样做了，你的 DBMS 就会因为不得不为你的 50 个字符的文本处理一列荒谬的 blob 而大吃一惊。更不用说你几乎没有用它做任何事情的事实。

因此，大多数 futureproofness(TM) 可能由`LONGTEXT`. 但这也是解决问题的一种非常糟糕的方法。老实说，我会重新审视申请要求。存储没有“域”（如在其应用程序中定义良好）和任意长度的字符串不是 RDBMS 的优势之一。

如果我想在“应用程序设计”级别解决这个问题，我会为此使用 NoSQL 键值存储（而且我和他们一样反对 NoSQL 炒作，所以你知道这很严重），甚至虽然我承认对于这样一个微小的变化来说这是一个相当昂贵的变化。但是，如果这表明您的 DBMS 最终将持有什么，那么现在切换以在将来避免同样的问题数百次可能会更谨慎。数据域在 RDBMS 中非常重要，而在非关系解决方案中它被明确地排除在外，这似乎是您在这里要解决的问题。

坚持使用 MySQL？只需将其增加到`VARCHAR(1000)`. 如果您对数据没有要求，那么无论如何您所做的一切都无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-04T10:18:57.217

使用文本时要小心。TEXT 数据不存储在数据库服务器的内存中，因此，每当您查询 TEXT 数据时，MySQL 都必须从磁盘中读取，这与 CHAR 和 VARCHAR 相比要慢得多，因为它不能使用索引。更好的方法存储长字符串将是 nosql 数据库

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-28T17:40:28.733

我们可以使用`varchar(<maximum_limit>)`. 我们可以通过的最大限制是 65535 字节。

注意：VARCHAR 的最大长度在除 TEXT/BLOB 列和使用的字符集之外的所有列之间共享。

# backbone.js - YII HTML 渲染

> ID：15406300
> 
> 赞同：1
> 
> 时间：2013-03-14T10:09:11.937
> 
> 标签：backbone.js, mvvm, knockout.js, yii, ember.js

我使用 YII 小部件来制作我的视图并依赖 CGridView、CLiStData、CHtml 类。我经常在网上看到客户端 MV* 框架之间的比较，例如 Ember、主干……然后我在 YII 中使用 jquery 来添加所有交互性。但是，视图是由小部件制成的。

那么，我的问题是 YII 是一个服务器端 HTML 渲染框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:59:13.200

是的。真的，问题是什么？

如果你问 Yii 是否可以与一些 MVVM (Model-View-View-Model) 库合作，比如淘汰赛或骨干网，那么答案是肯定的和否定的。通常 Yii 将小部件生成为静态 HMTL，在某种程度上通过 jQuery 进行了增强。对于真正的 MVVM 小部件，您必须自己制作它们。最常见的情况是`CActiveForm`，使表单可绑定到视图模型。

就我个人而言，我使用 knockoutjs wih yii 并制作了快速而肮脏的补丁版本`CActiveFrom`（严格我使用`TbActiveForm`from `YiiBooster`，但这在这里并不重要）来添加绑定并且它工作正常。

这不是和[Yii 和 Knockout Together 类似的问题吗？](https://stackoverflow.com/questions/11449417/yii-and-knockout-together)

# xml-parsing - 清理 SAX 处理程序

> ID：15406302
> 
> 赞同：0
> 
> 时间：2013-03-14T10:09:13.857
> 
> 标签：xml-parsing, refactoring, sax

我制作了一个 SAX 解析器，用于解析带有许多不同标签的 XML 文件。出于性能原因，我选择了 SAX 而不是 DOM。我很高兴我做到了，因为它运行得又快又好。我目前唯一的问题是主类（它扩展了 DefaultHandler）有点大，而且看起来不太容易。它包含一个巨大的 if/elseif 块，我在其中检查标签名称，并带有一些嵌套的 if 用于读取特定属性。此块位于 StartElement 方法中。

有什么好干净的方法来拆分它吗？我想要一个读取文件的主类，然后是每个标签的处理程序。在这个标记处理程序中，我想读取该标记的属性，对它们进行处理，然后返回主处理程序读取下一个标记，该标记再次被重定向到适当的处理程序。

我的主处理程序还有一些全局 Collection 变量，它们收集有关我用它解析的所有文档的信息。理想情况下，我可以从标签处理程序向这些集合中添加一些东西。

如果可能的话，一个代码示例将非常有帮助。我在此站点上阅读了有关处理程序堆栈的内容，但没有代码示例，我无法重现它。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:10:03.763

我建议设置一个 SAX 过滤器链。SAX 过滤器与任何其他 SAX 处理程序一样，只是它有另一个 SAX 处理程序在完成时将事件传递给它。它们经常用于对 XML 流执行一系列转换，但它们也可用于以您想要的方式分解事物。

你没有提到你正在使用的语言，但你提到了 DefaultHandler 所以我假设是 Java。首先要做的是编写过滤器。在 Java 中，您可以通过实现 XMLFilter（或者，更简单地，通过继承 XMLFilterImpl）来做到这一点

```
import java.util.Collection;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.XMLFilterImpl;

public class TagOneFilter extends XMLFilterImpl {

    private Collection<Object> collectionOfStuff;

    public TagOneFilter(Collection<Object> collectionOfStuff) {
        this.collectionOfStuff = collectionOfStuff;
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes atts) throws SAXException {
        if ("tagOne".equals(qName)) {
            // Interrogate the parameters and update collectionOfStuff
        }

        // Pass the event to downstream filters.
        if (getContentHandler() != null)
            getContentHandler().startElement(uri, localName, qName, atts);
    }
} 
```

接下来是您的主类，它实例化所有过滤器并将它们链接在一起。

```
import java.util.ArrayList;
import java.util.Collection;

import org.xml.sax.XMLReader;
import org.xml.sax.helpers.XMLReaderFactory;

public class Driver {

    public static void main(String[] args) throws Exception {
        Collection<Object> collectionOfStuff = new ArrayList<Object>();
        XMLReader parser = XMLReaderFactory.createXMLReader();

        TagOneFilter tagOneFilter = new TagOneFilter(collectionOfStuff);
        tagOneFilter.setParent(parser);

        TagTwoFilter tagTwoFilter = new TagTwoFilter(collectionOfStuff);
        tagTwoFilter.setParent(tagOneFilter);

        // Call parse() on the tail of the filter chain. This will finish
        // tying the filters together before executing the parse at the
        // XMLReader at the beginning.
        tagTwoFilter.parse(args[0]);

        // Now do something interesting with your collectionOfStuff.
    }
} 
```

# c# - 时间覆盖 (2013-03-13T18:30:00 CET)

> ID：15406306
> 
> 赞同：0
> 
> 时间：2013-03-14T10:09:27.643
> 
> 标签：c#

无论如何要将此“2013-03-13T18:30:00 CET”保存到 DateTime 中而不重构整个字符串？

无论如何要使用 Convert.ToDatetime 进行转换？

# iphone - 将设备更改为 ipad 视网膜时如何解决 Exe Bad access

> ID：15406307
> 
> 赞同：0
> 
> 时间：2013-03-14T10:09:29.530
> 
> 标签：iphone, ios, objective-c, ipad, uiimage

我们正在开发 ipad 应用程序，我正在通过此代码比较两个图像：

```
-(BOOL) compareTwoImages:(UIImage *) firstImage SecondImage:(UIImage *) secondImage
{

    int count=0;
    int match=0;
    int mismatch=0;

    //  UIColor* color = nil;
    CGImageRef inImage = [firstImage CGImage];
    CGImageRef outImage =[secondImage CGImage];

    // Create off screen bitmap context to draw the image into. Format ARGB is 4 bytes for each pixel: Alpa, Red, Green, Blue
    CGContextRef cgctx = [self createARGBBitmapContextFromImage:inImage];//this method creates context

    CGContextRef cgctx1 = [self createARGBBitmapContextFromImage:outImage];
    if (cgctx == NULL) { return NO; /* error */ }
    else if (cgctx1 == NULL) { return NO; /* error */ }

    size_t w = CGImageGetWidth(inImage);
    size_t h = CGImageGetHeight(inImage);
    CGRect rect = {{0,0},{w,h}};

    // Draw the image to the bitmap context. Once we draw, the memory
    // allocated for the context for rendering will then contain the
    // raw image data in the specified color space.

    CGContextFlush(cgctx);
    CGContextFlush(cgctx1);

    CGContextDrawImage(cgctx, rect, inImage);
    CGContextDrawImage(cgctx1, rect, outImage);

    CGContextFlush(cgctx);
    CGContextFlush(cgctx1);

    CGContextFlush(cgctx);
    CGContextFlush(cgctx1);

    // Now we can get a pointer to the image data associated with the bitmap
    // context.
    unsigned char* data = CGBitmapContextGetData (cgctx);
    unsigned char* data1 = CGBitmapContextGetData (cgctx1);

    if ((data != NULL)&&(data1 != NULL))
    {
        //offset locates the pixel in the data from x,y.
        //4 for 4 bytes of data per pixel, w is width of one row of data.

        for( int yy=0;yy<h;yy++)
        {
            for (int xx=0; xx<w; xx++)
            {
                int offset = 4*((w*round(yy))+round(xx));
                int alpha =  data[offset];
                int alpha1 =  data1[offset];**//it is giving bad access here and finally crashing** 

                if( alpha >1 )
                {
                    count++;

                    if( alpha1 > 1 )
                    {
                        match++;

                    }

                }

                if( (alpha1 >1 )&& (alpha < 1))
                {

                    mismatch++;

                }

                //      NSLog(@"offset: %i colors: RGB A %i %i %i  %i",offset,red,green,blue,alpha);

            }
        }

    }

    // When finished, release the context
    CGContextRelease(cgctx);
    CGContextRelease(cgctx1);
    // Free image data memory for the context
    if (data) { free(data); }
    if (data1) { free(data1); }

    int matchPer =(int) (( (float) match/count)*100);
    int misMatchPer =(int) (( (float) mismatch/count)*100);

    NSLog(@"number of match px :%d  mismatch px :%d total count :%d  precntage %d mismathc per %d",match,mismatch,count,matchPer,misMatchPer);

    if(( matchPer>70)&&(misMatchPer <2000)) {//do anything} 
```

当我通过此代码比较图像时，它在 ipad 中运行良好，但是当我选择模拟器硬件 >>ipad 视网膜时出现问题。

我试图通过仪器>>僵尸捕捉这种糟糕的访问，但无法理解它崩溃的原因......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:14:23.953

*只是一个想法：*当应用程序已经在模拟器中运行时，您是否将模拟器更改为 iPad Retina？如果是这种情况，您不必担心崩溃。发生这种情况是因为您突然尝试停止应用程序的执行（当您更改模拟器版本时，任何正在运行的应用程序都会退出），而不是从 Xcode 正确停止它。

# mysql - 如果存在，如何进行 MySQL 查询以获取其他表字段值？

> ID：15406308
> 
> 赞同：1
> 
> 时间：2013-03-14T10:09:34.843
> 
> 标签：mysql, sql, join

假设我们有这个模型：

![在此处输入图像描述](../Images/6b6f6a11c701f5ecb9e17226ffefb0e4.png)

如您所见，行业 ID 可以为空。我可以在拥有 user.id 的同时通过单个 MySQL 查询获取他/她拥有的行业名称（如果有的话）、用户描述、配置文件名称和项目名称（所有项目标题）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:12:18.323

是`JOIN`的，两张表：

```
SELECT
  i.name,
  u.id
FROM Industry AS i
LEFT JOIN `User` AS u ON u.industry_id = i.industry_id; 
```

* * *

## 更新：

对于多个表：

```
SELECT 
  i.Name  AS InustryName,
  p.Name  AS UserName,
  u.Description,
  j.title AS ProjectTitle
FROM Industry AS i
INNER JOIN User    AS u ON i.id      = u.id
INNER JOIN Profile AS p ON p.user_id = u.id
INNER JOIN Project AS j ON u.id      = j.user_id; 
```

**请注意：**我`INNER JOIN`在表之间使用，这将只为您提供连接表中的匹配行，您可能需要使用 LEFT JOIN 而不是内部连接来包含不匹配的行，即获取那些没有条目的行业其他表。请参阅此博客文章：

*   [**SQL 连接的可视化解释**](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# android - Android：如何处理 SSL 错误？

> ID：15406310
> 
> 赞同：0
> 
> 时间：2013-03-14T10:09:35.800
> 
> 标签：android, android-intent, android-service

我是android新手..我创建了一个应用程序（服务不是活动），它将用户位置发送到服务器..它在后台运行，因此应用程序对用户隐藏......我使用了异步任务（doInBackground和onPostExecute 方法）...在编码中我使用 Thread.sleep(300000) 间隔 5 分钟，但我希望这个应用程序应该在启动时运行，因为我使用了 BroadCast Receiver..但它没有运行..

签到任务：`SSL error, attempting time correction:javax.net.ssl.SSLException: Not trusted server certificates`

这是服务：

```
 @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // TODO Auto-generated method stub
        super.onStartCommand(intent, flags, startId);       

        Log.d("prakaash", "helllllooo");
        while(done) 
        {
            Log.i("hiiiii","hellllo");
            getLocation();
            gpsTraking();
            passing();
            try 
            {
                Thread.sleep(30000);
            }
            catch (InterruptedException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        return Service.START_NOT_STICKY;
    }

    @Override
    public void onCreate() {

        Log.d("YASARKHAN", "ABHISHEKRAI");
        super.onCreate();

    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.d("distrroy","destry");

    }

    public void gpsTraking() {

        // check if GPS enabled
        if (true) {
            stAdd = "";
            double latitude = getLatitude();
            double longitude = getLongitude();
            Geocoder gc = new Geocoder(getBaseContext());
            try
            {
                List<Address> list = gc.getFromLocation(latitude, longitude, 2);
                Address a = list.get(0);
                for (int i = 0; i <= a.getMaxAddressLineIndex(); i++) {
                    stAdd = stAdd + "\n " + a.getAddressLine(i);
                }
                stAdd = stAdd + " " + a.getLocality() + "\n"
                        + a.getFeatureName();

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            // \n is for new line
            CharSequence d = DateFormat.format("dd-MM-yyyy hh:mm:ss",
                    new Date());
            currentTime = d.toString();
            Log.d("currentTime", currentTime);

            TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
            // get IMEI
            imei = tm.getDeviceId();
            // get SimSerialNumber
            simSerialNumber = tm.getSimSerialNumber();
        }

    }

    /**
     * Function to show settings alert dialog On pressing Settings button will
     * launch Settings Options
     * */
    public void showSettingsAlert() {
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

        // Setting Dialog Title
        alertDialog.setTitle("GPS is settings");

        // Setting Dialog Message
        alertDialog
                .setMessage("GPS is not enabled. Do you want to go to settings menu?");

        // On pressing Settings button
        alertDialog.setPositiveButton("Settings",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        Intent intent = new Intent(
                                Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                        mContext.startActivity(intent);
                    }
                });

        // on pressing cancel button
        alertDialog.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                    }
                });

        // Showing Alert Message
        alertDialog.show();
    }

    @Override
    public void onLocationChanged(Location location) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }
    class SendFeedback extends AsyncTask<String, Void, String> 
    {
        @Override
        protected String doInBackground(String... paramArrayOfParams) 
        {
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("strIMEINumber", paramArrayOfParams[0]);
            request.addProperty("strSIMNumber", paramArrayOfParams[1]);     
            request.addProperty("strAddress", paramArrayOfParams[2]);
            request.addProperty("strTime", paramArrayOfParams[3]);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.encodingStyle = SoapSerializationEnvelope.ENC;
            envelope.setOutputSoapObject(request);
            System.setProperty("http.keepAlive", "false");

            try 
            {
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                androidHttpTransport.call(SOAP_ACTION, envelope);
                // SoapObject result = (SoapObject) envelope.getResponse();
                SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
                String resultData = response.toString();
                Log.d("response", resultData);
                return resultData;              
            } 
            catch (Exception e) 
            {
                Log.d("My Error", "" + e.getMessage());

            }
            return resultData;
        }

        @Override
        protected void onPostExecute(String result) 
        {
            Log.d("mayuuuur","mayureshh");
            Log.d("strResult", result);
            super.onPostExecute(result);
        }
    }
} 
```

日志猫：

```
 03-15 11:37:39.761: D/AndroidRuntime(284): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
03-15 11:37:39.761: D/AndroidRuntime(284): CheckJNI is ON
03-15 11:37:39.881: D/AndroidRuntime(284): --- registering native functions ---
03-15 11:37:40.402: I/ActivityManager(58): Start proc com.android.defcontainer for service com.android.defcontainer/.DefaultContainerService: pid=290 uid=10027 gids={1015, 2001}
03-15 11:37:40.702: D/dalvikvm(290): GC_EXPLICIT freed 788 objects / 56280 bytes in 117ms
03-15 11:37:40.761: D/PackageParser(58): Scanning package: /data/app/vmdl43820.tmp
03-15 11:37:40.761: W/PackageParser(58): Unknown element under <application>: intent-filter at /data/app/vmdl43820.tmp Binary XML file line #33
03-15 11:37:40.852: D/dalvikvm(58): GC_FOR_MALLOC freed 1647 objects / 85064 bytes in 71ms
03-15 11:37:40.852: I/dalvikvm-heap(58): Grow heap (frag case) to 4.995MB for 16400-byte allocation
03-15 11:37:40.931: D/dalvikvm(58): GC_FOR_MALLOC freed 168 objects / 8904 bytes in 72ms
03-15 11:37:41.091: I/PackageManager(58): Removing non-system package:com.example.yayaa
03-15 11:37:41.091: I/ActivityManager(58): Force stopping package com.example.yayaa uid=10040
03-15 11:37:41.211: D/PackageManager(58): Scanning package com.example.yayaa
03-15 11:37:41.211: I/PackageManager(58): Package com.example.yayaa codePath changed from /data/app/com.example.yayaa-2.apk to /data/app/com.example.yayaa-1.apk; Retaining data and using new
03-15 11:37:41.221: I/PackageManager(58): /data/app/com.example.yayaa-1.apk changed; unpacking
03-15 11:37:41.232: D/installd(34): DexInv: --- BEGIN '/data/app/com.example.yayaa-1.apk' ---
03-15 11:37:41.642: D/dalvikvm(299): DexOpt: 'Lorg/kxml2/kdom/Node;' has an earlier definition; blocking out
03-15 11:37:41.652: D/dalvikvm(299): DexOpt: 'Lorg/xmlpull/v1/XmlPullParser;' has an earlier definition; blocking out
03-15 11:37:41.652: D/dalvikvm(299): DexOpt: 'Lorg/xmlpull/v1/XmlPullParserException;' has an earlier definition; blocking out
03-15 11:37:41.652: D/dalvikvm(299): DexOpt: 'Lorg/xmlpull/v1/XmlPullParserFactory;' has an earlier definition; blocking out
03-15 11:37:41.652: D/dalvikvm(299): DexOpt: 'Lorg/xmlpull/v1/XmlSerializer;' has an earlier definition; blocking out
03-15 11:37:41.671: D/dalvikvm(299): DexOpt: 'Lorg/kxml2/io/KXmlParser;' has an earlier definition; blocking out
03-15 11:37:41.682: D/dalvikvm(299): DexOpt: 'Lorg/kxml2/io/KXmlSerializer;' has an earlier definition; blocking out
03-15 11:37:41.682: D/dalvikvm(299): DexOpt: 'Lorg/kxml2/kdom/Document;' has an earlier definition; blocking out
03-15 11:37:41.682: D/dalvikvm(299): DexOpt: 'Lorg/kxml2/kdom/Element;' has an earlier definition; blocking out
03-15 11:37:42.072: I/dalvikvm(299): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
03-15 11:37:42.072: I/dalvikvm(299): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
03-15 11:37:42.081: I/dalvikvm(299): DexOpt: not resolving ambiguous class 'Lorg/kxml2/io/KXmlSerializer;'
03-15 11:37:42.081: D/dalvikvm(299): DexOpt: not verifying 'Lorg/kxml2/kdom/Node;': multiple definitions
03-15 11:37:42.091: D/dalvikvm(299): DexOpt: not verifying 'Lorg/xmlpull/v1/XmlPullParser;': multiple definitions
03-15 11:37:42.091: D/dalvikvm(299): DexOpt: not verifying 'Lorg/xmlpull/v1/XmlPullParserException;': multiple definitions
03-15 11:37:42.091: D/dalvikvm(299): DexOpt: not verifying 'Lorg/xmlpull/v1/XmlPullParserFactory;': multiple definitions
03-15 11:37:42.091: D/dalvikvm(299): DexOpt: not verifying 'Lorg/xmlpull/v1/XmlSerializer;': multiple definitions
03-15 11:37:42.243: I/dalvikvm(299): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
03-15 11:37:42.243: I/dalvikvm(299): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
03-15 11:37:42.243: I/dalvikvm(299): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
03-15 11:37:42.251: I/dalvikvm(299): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
03-15 11:37:42.251: I/dalvikvm(299): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
03-15 11:37:42.261: I/dalvikvm(299): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
03-15 11:37:42.282: D/dalvikvm(299): DexOpt: not verifying 'Lorg/kxml2/io/KXmlParser;': multiple definitions
03-15 11:37:42.282: D/dalvikvm(299): DexOpt: not verifying 'Lorg/kxml2/io/KXmlSerializer;': multiple definitions
03-15 11:37:42.282: D/dalvikvm(299): DexOpt: not verifying 'Lorg/kxml2/kdom/Document;': multiple definitions
03-15 11:37:42.282: D/dalvikvm(299): DexOpt: not verifying 'Lorg/kxml2/kdom/Element;': multiple definitions
03-15 11:37:42.291: I/dalvikvm(299): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParserException;'
03-15 11:37:42.362: D/dalvikvm(299): DexOpt: load 159ms, verify 638ms, opt 26ms
03-15 11:37:42.392: D/installd(34): DexInv: --- END '/data/app/com.example.yayaa-1.apk' (success) ---
03-15 11:37:42.392: W/PackageManager(58): Code path for pkg : com.example.yayaa changing from /data/app/com.example.yayaa-2.apk to /data/app/com.example.yayaa-1.apk
03-15 11:37:42.402: W/PackageManager(58): Resource path for pkg : com.example.yayaa changing from /data/app/com.example.yayaa-2.apk to /data/app/com.example.yayaa-1.apk
03-15 11:37:42.402: D/PackageManager(58):   Services: com.example.yayaa.babaa
03-15 11:37:42.402: D/PackageManager(58):   Receivers: com.example.yayaa.ByReceiver
03-15 11:37:42.411: I/ActivityManager(58): Force stopping package com.example.yayaa uid=10040
03-15 11:37:42.522: I/installd(34): move /data/dalvik-cache/data@app@com.example.yayaa-1.apk@classes.dex -> /data/dalvik-cache/data@app@com.example.yayaa-1.apk@classes.dex
03-15 11:37:42.532: D/PackageManager(58): New package installed in /data/app/com.example.yayaa-1.apk
03-15 11:37:42.532: W/PackageManager(58): Unknown permission android.intent.action.USER_PRESENT in package com.example.yayaa
03-15 11:37:42.652: I/ActivityManager(58): Force stopping package com.example.yayaa uid=10040
03-15 11:37:42.751: I/ActivityManager(58): Start proc com.svox.pico for broadcast com.svox.pico/.VoiceDataInstallerReceiver: pid=300 uid=10010 gids={}
03-15 11:37:42.841: W/RecognitionManagerService(58): no available voice recognition services found
03-15 11:37:43.032: D/dalvikvm(58): GC_FOR_MALLOC freed 5455 objects / 375128 bytes in 180ms
03-15 11:37:43.182: D/dalvikvm(58): GC_EXPLICIT freed 618 objects / 32776 bytes in 150ms
03-15 11:37:43.182: I/installd(34): unlink /data/dalvik-cache/data@app@com.example.yayaa-2.apk@classes.dex
03-15 11:37:43.201: D/AndroidRuntime(284): Shutting down VM
03-15 11:37:43.243: D/dalvikvm(284): Debugger has detached; object registry had 1 entries
03-15 11:37:43.312: I/ActivityThread(300): Publishing provider com.svox.pico.providers.SettingsProvider: com.svox.pico.providers.SettingsProvider
03-15 11:37:43.862: D/dalvikvm(152): GC_FOR_MALLOC freed 3958 objects / 239232 bytes in 59ms
03-15 11:37:48.602: D/dalvikvm(246): GC_EXPLICIT freed 1948 objects / 141368 bytes in 126ms
03-15 11:37:51.301: D/KeyguardViewMediator(58): pokeWakelock(5000)
03-15 11:37:51.541: D/KeyguardViewMediator(58): pokeWakelock(5000)
03-15 11:37:53.581: D/KeyguardViewMediator(58): pokeWakelock(5000)
03-15 11:37:53.951: D/KeyguardViewMediator(58): pokeWakelock(5000)
03-15 11:37:54.111: I/ARMAssembler(58): generated scanline__00000177:03515104_00001001_00000000 [ 91 ipp] (114 ins) at [0x34ba58:0x34bc20] in 1018044 ns
03-15 11:39:30.771: I/CheckinService(169): Preparing to send checkin request
03-15 11:39:30.771: I/EventLogService(169): Accumulating logs since 1363327374579
03-15 11:39:30.891: V/CheckinRequestBuilder(169): pre-froyo android id is 0
03-15 11:39:31.052: I/CheckinTask(169): Sending checkin request (1372 bytes)
03-15 11:39:32.141: E/CheckinTask(169): SSL error, attempting time correction: javax.net.ssl.SSLException: Not trusted server certificate
03-15 11:39:32.632: I/CheckinTask(169): Server time agrees: delta 389 msec
03-15 11:39:32.702: D/NativeCrypto(169): Freeing OpenSSL session
03-15 11:39:32.702: D/dalvikvm(169): GC_FOR_MALLOC freed 4789 objects / 513296 bytes in 61ms
03-15 11:39:32.722: E/CheckinTask(169): Checkin failed: https://android.clients.google.com/checkin (request #0)
03-15 11:39:32.722: E/CheckinTask(169): javax.net.ssl.SSLException: Not trusted server certificate
03-15 11:39:32.722: E/CheckinTask(169):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:371)
03-15 11:39:32.722: E/CheckinTask(169):     at android.net.SSLCertificateSocketFactory.verifyHostname(SSLCertificateSocketFactory.java:199)
03-15 11:39:32.722: E/CheckinTask(169):     at android.net.SSLCertificateSocketFactory.createSocket(SSLCertificateSocketFactory.java:256)
03-15 11:39:32.722: E/CheckinTask(169):     at org.apache.http.conn.ssl.SSLSocketFactory.createSocket(SSLSocketFactory.java:375)
03-15 11:39:32.722: E/CheckinTask(169):     at com.google.android.common.http.GoogleHttpClient$WrappedLayeredSocketFactory.createSocket(GoogleHttpClient.java:160)
03-15 11:39:32.722: E/CheckinTask(169):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:164)
03-15 11:39:32.722: E/CheckinTask(169):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-15 11:39:32.722: E/CheckinTask(169):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-15 11:39:32.722: E/CheckinTask(169):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:348)
03-15 11:39:32.722: E/CheckinTask(169):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-15 11:39:32.722: E/CheckinTask(169):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-15 11:39:32.722: E/CheckinTask(169):     at android.net.http.AndroidHttpClient.execute(AndroidHttpClient.java:248)
03-15 11:39:32.722: E/CheckinTask(169):     at com.google.android.common.http.GoogleHttpClient.executeWithoutRewriting(GoogleHttpClient.java:203)
03-15 11:39:32.722: E/CheckinTask(169):     at com.google.android.common.http.GoogleHttpClient.execute(GoogleHttpClient.java:245)
03-15 11:39:32.722: E/CheckinTask(169):     at com.google.android.common.http.GoogleHttpClient.execute(GoogleHttpClient.java:313)
03-15 11:39:32.722: E/CheckinTask(169):     at com.google.android.gsf.checkin.CheckinTask.sendRequest(CheckinTask.java:239)
03-15 11:39:32.722: E/CheckinTask(169):     at com.google.android.gsf.checkin.CheckinTask.doInBackground(CheckinTask.java:146)
03-15 11:39:32.722: E/CheckinTask(169):     at com.google.android.gsf.checkin.CheckinService$1.doInBackground(CheckinService.java:221)
03-15 11:39:32.722: E/CheckinTask(169):     at com.google.android.gsf.checkin.CheckinService$1.doInBackground(CheckinService.java:228)
03-15 11:39:32.722: E/CheckinTask(169):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-15 11:39:32.722: E/CheckinTask(169):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-15 11:39:32.722: E/CheckinTask(169):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-15 11:39:32.722: E/CheckinTask(169):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
03-15 11:39:32.722: E/CheckinTask(169):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
03-15 11:39:32.722: E/CheckinTask(169):     at java.lang.Thread.run(Thread.java:1096)
03-15 11:39:32.722: E/CheckinTask(169): Caused by: java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: TrustAnchor for CertPath not found.
03-15 11:39:32.722: E/CheckinTask(169):     at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:168)
03-15 11:39:32.722: E/CheckinTask(169):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:366)
03-15 11:39:32.722: E/CheckinTask(169):     ... 24 more
03-15 11:39:32.722: E/CheckinTask(169): Caused by: java.security.cert.CertPathValidatorException: TrustAnchor for CertPath not found.
03-15 11:39:32.722: E/CheckinTask(169):     at org.bouncycastle.jce.provider.PKIXCertPathValidatorSpi.engineValidate(PKIXCertPathValidatorSpi.java:149)
03-15 11:39:32.722: E/CheckinTask(169):     at java.security.cert.CertPathValidator.validate(CertPathValidator.java:202)
03-15 11:39:32.722: E/CheckinTask(169):     at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:164)
03-15 11:39:32.722: E/CheckinTask(169):     ... 25 more
03-15 11:40:55.501: D/SntpClient(58): request time failed: java.net.SocketException: Address family not supported by protocol 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:10:11.010

查看 logcat 异常堆栈跟踪时，原因通常在“由：”字段中。

在这里，它是由以下原因引起的：

```
Caused by: java.security.cert.CertPathValidatorException: TrustAnchor for CertPath not found 
```

您可能需要为您的 http 请求设置自定义信任管理器，如这篇非常好的帖子所示：

[通过 HTTPS 使用 HttpClient 信任所有证书](https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https/6378872#6378872)

# java - 创建一个包含 '&' 的 url

> ID：15406312
> 
> 赞同：2
> 
> 时间：2013-03-14T10:09:49.067
> 
> 标签：java, android, url

当我调用网络服务时，我会在该 url 中传递某些值。

例子：

```
https://website.com/webserviceName/login?userName=user&password=pass 
```

但是如果这些值中包含“&”怎么办。当我形成这样一个包含带有“&”的项目的 url 时，该 url 在该点中断会返回一个错误代码。我该如何解决这个问题。

例子：

```
https://website.com/webserviceName/login?userName=user&user&password=pass 
```

这个网址的问题是它在第一个'&'处中断

该问题可以通过使用`URLEncoder.encode(urlXml)` [http://www.tutorialspoint.com/html/html_url_encoding.htm来解决](http://www.tutorialspoint.com/html/html_url_encoding.htm)

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:12:04.673

您必须使用 对& 符号进行[编码](http://en.wikipedia.org/wiki/Percent-encoding)。所以你的网址会变成`&``%26`

```
https://website.com/webserviceName/login?userName=user%26user&password=pass 
```

如果您的用户名不固定并且您想[`URLEncoder.encode`](http://developer.android.com/reference/java/net/URLEncoder.html#encode%28java.lang.String,%20java.lang.String%29)按照@SudhanshuUmalkar 的建议使用，您应该只对参数进行编码

```
String url = "https://website.com/webserviceName/login?userName="
             + URLEncoder.encode(userName, "UTF-8") + "&password="
             + URLEncoder.encode(password, "UTF-8"); 
```

由于`encode(String)`已弃用，您应该使用`encode(String, "UTF-8")`或任何您的字符集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:11:48.013

使用 URLEncoder.encode() 方法。

url = " [https://website.com/webserviceName/login](https://website.com/webserviceName/login) ?" + URLEncoder.encode("userName=user&user&password=pass", "UTF-8");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:14:59.323

我有使用文字和符号的代码。您的代码可能会因为您没有提供有效的键值参数对而中断：

```
https://website.com/webserviceName/login?userName=user&user&password=pass
                                                       ^ this shouldn't be like this 
```

下面的代码在生产中工作：

```
public static final String DATA_URL = "http://www.example.com/sub/folder/api.php?time=%s&lang=%s&action=test";
String.format (API.DATA_URL, "" + now, language) 
```

# jquery - 当我们单击它时，如何突出显示图像库的选定拇指图像？

> ID：15406313
> 
> 赞同：0
> 
> 时间：2013-03-14T10:09:50.190
> 
> 标签：jquery

我是 jquery 的初学者，我创建了一个简单的图像滑块。代码是这样的

```
 $(function() {
        $(".specialimage").click(function() {

        var image = $(this).attr("rel");
        $('#specialimage').hide();
        $('#specialimage').fadeIn('slow');
        $('#specialimage').html('<img src="' + image + '"/>');
        return false;
        });
        }); 
```

网址是：http: [//ymaclub.com/test/special.html](http://ymaclub.com/test/special.html)

图片库工作正常，但是当我们单击图库的特定拇指图像时，它没有突出显示选定的拇指图像。

当我们点击它时，任何人都可以帮助我**如何突出显示图像库的选定拇指图像吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:17:59.550

为选定的拇指创建一个 CSS 类说**thumbSelected** .. 并在单击拇指时添加该类...

尝试这个

**更新的jQuery**

```
 $(".specialimage").click(function() {
      $(".specialimage img").removeClass('thumbSelected'); //first remove existing thumbSelected class
      $(this).find('img').addClass('thumbSelected'); // add class to clicked thumb
      var image = $(this).attr("rel");
      $('#specialimage').hide().fadeIn('slow').html('<img src="' + image + '"/>');
      return false;
    }); 
```

**CSS**

```
 .thumbSelected{
    border:1px solid red;  //this is just an example.. you can use any css properties here
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:13:22.343

是拇指`$(".specialimage")`，如果是这样，您可以在单击功能中添加一个新类：

```
$(document).ready(function() {
    var thumbs = $(".specialimage");

    thumbs.click(function() {
      thumbs.removeClass('selected');
      $(this).addClass('selected');

      var imageUrl = $(this).attr("rel");
      $('#specialimage').hide('fast', function() {
        $(this).html('<img src="' + imageUrl + '"/>').fadeIn('slow');
      });

      return false;
    });
}); 
```

然后为班级添加您的突出显示CSS`selected`

# c# - 单击后如何更改用户控件的外观

> ID：15406314
> 
> 赞同：0
> 
> 时间：2013-03-14T10:09:51.603
> 
> 标签：c#, .net, xaml

我是一个初学者程序设计师，所以请放轻松！

我想在点击事件触发时更改用户控件的外观。这是一个自定义用户控件，旨在显示绿色的“登录”状态或红色的“注销”状态。单击时，我需要笔触和填充从红色变为绿色，反之亦然，以及红十字图标或绿色勾号图标。

我可以在 xaml 中手动完成，但不确定如何在后面的代码中触发它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:27:37.893

首选的解决方案是将视觉与逻辑分开。[在这种情况下，使用visual state](http://msdn.microsoft.com/en-us/library/system.windows.visualstate.aspx "视觉状态")在 xaml 中为您的控件创建适当的状态，并使用[此方法](http://msdn.microsoft.com/en-us/library/system.windows.visualstatemanager.gotostate%28v=vs.95%29.aspx)更改控件的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:13:42.340

在事件处理程序上（如果你知道它是什么），创建用户控件的实例并更改属性。

# c# - BitmapImage 为 PixelWidth 和 PixelHeight 返回 0

> ID：15406315
> 
> 赞同：8
> 
> 时间：2013-03-14T10:09:53.493
> 
> 标签：c#, .net, windows-runtime, winrt-xaml, bitmapimage

我正在尝试做一件超级简单的事情：获取图像的大小。

所以我创建了 my`BitmapImage`但当我尝试访问`PixelWidth`and时得到 0 `PixelHeight`。

请问我该怎么做？

编辑：（添加示例代码）

我只是在做：

```
var baseUri = new Uri("ms-appx:///");
var bitmapImage = new BitmapImage(new Uri(baseUri, "Assets/Logo.png"));

MyImage.Source = bitmapImage;

Debug.WriteLine("Width: " + bitmapImage.PixelWidth + " Height: " + bitmapImage.PixelHeight); 
```

在控制台中，我得到：

```
Width: 0 Height: 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:12:24.800

当您想在为您的 设置源之后使用图像属性时[`BitmapImage`](http://msdn.microsoft.com/en-us/library/windows/apps/br243235.aspx)，您通常必须编写一个将在 上执行的事件处理程序[`ImageOpened`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.bitmapimage.imageopened.aspx)。

还要记住，`ImageOpened`只有在图像被下载和解码（即使用[`Image.Source`](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.image.source)）时才会触发。

```
var bitmapImage = new BitmapImage(uri);
bitmapImage.ImageOpened += (sender, e) => 
{
    Debug.WriteLine("Width: {0}, Height: {1}",
        bitmapImage.PixelWidth, bitmapImage.PixelHeight);
};
image.Source = bitmapImage; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-14T10:24:22.663

您可以尝试以不同的方式对其进行初始化。试试这个：

```
BitmapImage myBitmapImage = new BitmapImage();

// BitmapImage.UriSource must be in a BeginInit/EndInit block
myBitmapImage.BeginInit();
myBitmapImage.UriSource = new Uri(@"C:\pics\Water_Lilies.jpg");
myBitmapImage.EndInit();
int w = myBitmapImage.PixelWidth; 
```

# svn - 重新集成分支后合并时的SVN树冲突

> ID：15406317
> 
> 赞同：2
> 
> 时间：2013-03-14T10:09:57.150
> 
> 标签：svn, version-control, tortoisesvn, versioning

我有个问题。通常我使用 Tortoise SVN 工作，并且每个月都在开发代码，我使用如下所示的分支结构：

```
trunk ----- b1
|           |
| --------->|
|           |----- b2
|           |       |
| --------->|       |
| <----[1]--|       |
|           X       |
| -----[2]--------> |
|                   |
|                   | 
```

在步骤 [1]（将分支重新集成到主干）之后，我删除了不必要的分支 b1。然后我尝试将当前主干的更改合并到 b2。不幸的是，当您尝试合并主干版本[2] 时，在集成树建立之后会遇到很多冲突。当您尝试从分支而不是主干创建新分支时，原因是什么？正确的顺序应该是什么？

# php - C++ 头文件包含

> ID：15406319
> 
> 赞同：0
> 
> 时间：2013-03-14T10:10:07.477
> 
> 标签：php, g++, php-extension

我是编码 PHP 扩展的新手。我正在尝试在 .cpp 文件中使用以下代码段

```
#include <iostream>
#include "Zend/zend.h"

using namespace std;

void describe_zval(zval *foo)
{
    if (foo->type == IS_NULL)
    {
        php_printf("The variable is NULL");
    }
    else
    {
        php_printf("The variable is of type %d", foo->type);
    }
}

int main(void)
{
    return 0;
} 
```

变量`zval`（它是一个 struct ）存在于`/usr/local/src/php-5.4.11/Zend/zend.h`

汇编

```
g++ -I /usr/local/src/php-5.4.11 -I /usr/local/src/php-5.4.11/Zend try.cpp 
```

这给出了错误

```
In file included from /usr/local/src/php-5.4.11/Zend/zend_alloc.h:27:0,
                 from /usr/local/src/php-5.4.11/Zend/zend.h:237,
                 from try.c:2:
/usr/local/src/php-5.4.11/Zend/../TSRM/TSRM.h:20:26: fatal error: tsrm_config.h: No such file or directory
compilation terminated. 
```

tsrm_config.h 存在于`/usr/local/src/php-5.4.11/`

我如何包含子目录，`/usr/local/src/php-5.4.11/`因为编译过程需要位于以下几个子目录中的许多文件`/usr/local/src/php-5.4.11/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:24:03.257

在 php-5.4.11 目录中，您还应该包括 Zend、main、TSRM（如果您想在线程安全服务器上开发您的扩展）。我的意思是你应该有：`-I /usr/local/src/php-5.4.11/main` `I /usr/local/src/php-5.4.11/Zend` `I /usr/local/src/php-5.4.11/TSRM`，你可以创建一个包含这些目录的makefile。顺便说一句，你为什么不使用 SWIG 来创建你的包装器代码？你应该试试。

# java - 如何解决“不能从静态上下文引用非静态类 T”？

> ID：15406321
> 
> 赞同：4
> 
> 时间：2013-03-14T10:10:08.897
> 
> 标签：java

如何编写一个简单地接受任何类型的参数、打印并返回它的 Java 函数？

在 Scheme 中，我习惯于编写以下宏：

```
(define-syntax dump
  (syntax-rules ()
    ((_ arg) (let ((value arg))
               (display 'arg)
               (display " -> ")
               (display value)
               (newline)
               arg)))) 
```

调用它`(+ 1 (dump (* 2 3)))`会返回 7 和 print `(* 2 3) -> 6`。

我在Java中尝试过类似的东西：

```
public class Debug<T>
{
    public static T dump (T arg)
    {
        System.err.println (arg);
        return arg;
    }
} 
```

但我得到了错误：

```
non-static class T cannot be referenced from a static context 
```

如何解决这个问题？

**编辑** 谢谢我明白了：

```
import java.util.Arrays;

public class Debug
{
    public static <T> T dump (T arg)
    {
        System.err.println(arg instanceof Object[] ? 
                           Arrays.toString((Object[])arg) : arg);
        return arg;
    }
} 
```

可爱的计划我为你感到悲伤......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T10:14:07.600

您将您的类实现为其他内部类。在这种情况下，您必须将类标记为`static`。

但是，真正的答案是：你根本不需要类，你只需要方法：

```
public static <T> T dump(T arg) { ... } 
```

作为旁注，我在我的代码中使用了相同的技巧，但我总是包含一个 msg 参数以便于转储读取/grepping：

```
public static <T> T dump(String msg, T arg) { ... } 
```

# c# - Windows 窗体 - 将 NumericUpDown 自定义为可为空

> ID：15406322
> 
> 赞同：1
> 
> 时间：2013-03-14T10:10:20.703
> 
> 标签：c#, winforms, numericupdown

我发现这个自定义类允许`NumericUpDown`接收可为空的值。我在编辑表单中使用它，该表单可以为空，也可以填充来自需要可空值的数据库中的数据。

这是当前代码：

```
public partial class NullableNumericUpDown : NumericUpDown
    {
        public NullableNumericUpDown()
        {
            InitializeComponent();
        }

        public NullableNumericUpDown(IContainer container)
        {
            container.Add(this);

            InitializeComponent();
        }

        private int? _value;

        [Bindable(true)]
        public new int? Value
        {
            get
            {
                return _value;
            }
            set
            {
                _value = value;
                if (value != null)
                {
                    base.Value = (int)value;
                    Text = Value.ToString();
                }
                else
                {
                    Text = "";
                }
            }
        }

        private void NullableNumericUpDown_ValueChanged(object sender, EventArgs e)
        {
            _value = (int)base.Value;
        }

        void NullableNumericUpDown_TextChanged(object sender, System.EventArgs e)
        {
            if (Text == "")
            {
                _value = null;
            }
        }
    } 
```

我对 C# 还很陌生，所以我不能说我完全理解代码，但是我遇到的问题是当我用数据库中的数据填充表单时，并且确切地说，当它`NullableNumericUpDown`具有一些价值时，比如说 - `3`。当我改变这个值`5`时，我从表单中的字段中收集数据时的最终结果是`53`。此外，如果我删除`3`然后点击递增箭头，我会得到`4`. 似乎初始数据在这个控件的整个生命周期中都保存了，我试图`0`在一些当前的地方设置我认为它可能会有所帮助，但它不会而且除了我需要摆脱这个初始的事实value 如果控件的值发生了变化，实际上仅仅做到这一点是不够的`0`因为如果我有空控件，这必须没问题并将其记录`null`为`0`。

在这里要完整的是我如何为`NullableNumericUpDown`控件设置数据：

```
numUpDnAreas.Value = entity.AreasCnt; 
```

这发生在我的`form_load`活动中。当我点击`Save`按钮时，我用这个收集数据：

```
entity.AreasCnt = numUpDnAreas.Value; 
```

是否可以重构此代码以满足我的需求，或者我应该保留它并只使用类似`MaskedTextBox`或其他的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:41:37.083

您能否尝试使用扩展 WPF 工具包中的 UpDown 控件。[http://wpftoolkit.codeplex.com/wikipage?title=DecimalUpDown&referringTitle=Home](http://wpftoolkit.codeplex.com/wikipage?title=DecimalUpDown&referringTitle=Home) 它可以解决您的问题并且是开源的。

我们在项目中有类似的需求，最终通过创建一个包含文本框的自定义控件并设置 Binding 来编写自己的需求。AllowNullValue 到 string.empty

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-10T23:45:28.960

有工作示例：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Runtime.InteropServices;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace NumericUpDownNullableProj
{
    /// <summary>
    /// Represents a Windows spin box (also known as an up-down control) that displays numeric values.
    /// </summary>
    [ClassInterface(ClassInterfaceType.AutoDispatch)]
    [ComVisible(true)]
    [DefaultBindingProperty("Value")]
    [DefaultEvent("ValueChanged")]
    [DefaultProperty("Value")]
    //[SRDescriptionAttribute("DescriptionNumericUpDown")]
    public class NumericUpDownNullable : NumericUpDown
    {
        public NumericUpDownNullable() : base()
        {
            Text = "";

            ValueChanged += NumericUpDownNullable_ValueChanged;
            TextChanged += NumericUpDownNullable_TextChanged;
        }

        public NumericUpDownNullable(IContainer container) : this()
        {
            container.Add(this);
        }

        private void NumericUpDownNullable_TextChanged(object sender, EventArgs e)
        {
            if (Text == "")
            {
                Value = null;
            }
        }

        private void NumericUpDownNullable_ValueChanged(object sender, EventArgs e)
        {
            if (Value != base.Value)
            {
                Value = base.Value;
            }
        }

        private decimal? _value;
        /// <summary>
        /// Gets or sets the value assigned to the spin box (also known as an up-down control).
        /// 
        /// Returns:
        ///      The numeric value of the System.Windows.Forms.NumericUpDown control.
        /// Exceptions:
        ///    T:System.ArgumentOutOfRangeException:
        ///       The assigned value is less than the System.Windows.Forms.NumericUpDown.Minimum
        ///       property value.-or- The assigned value is greater than the System.Windows.Forms.NumericUpDown.Maximum property value.
        /// </summary>
        [Bindable(true)]
        public new decimal? Value
        {
            get
            {
                return _value;
            }
            set
            {
                _value = value;

                if (base.Value != value.GetValueOrDefault())
                {
                    base.Value = value.GetValueOrDefault();
                }

                Text = value?.ToString();
            }
        }
    }
} 
```

# html - 小屏幕上的 CSS Width 奇怪行为

> ID：15406324
> 
> 赞同：0
> 
> 时间：2013-03-14T10:10:29.160
> 
> 标签：html, css, width

在移动设备或小屏幕上访问时，我的容器宽度显然有一个简单的问题

我花了 3 个小时想知道为什么但是......我找不到路

这是网址 >> [http://goo.gl/ZlLn3](http://goo.gl/ZlLn3)

您可以看到页眉、内容和页脚在被 ipad/iphone 访问时是如何受到限制的，或者您在桌面上调整浏览器的大小......我不需要响应，我只希望设计在每台设备上都显示完整！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:20:33.710

尝试使用 CSS 媒体查询

[使用 CSS3 媒体查询定位 iPhone 和 iPad](http://perishablepress.com/target-iphone-and-ipad-with-css3-media-queries/)

[标准设备的媒体查询](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:23:01.463

它是由您的 和 的组合引起`width: 100%`的`overflow: hidden`。

元素并不比浏览器视口更宽（100%），它们会溢出并隐藏它们；）

# c - 为什么 setTimer 不起作用？

> ID：15406326
> 
> 赞同：1
> 
> 时间：2013-03-14T10:10:39.627
> 
> 标签：c, visual-studio-2010, winapi, timer

我有以下程序。我想知道如何`setTimer`工作。所以，我写了一个程序，但无法理解为什么 TimerProc 函数没有被调用。为什么？还需要做什么来触发 setTimer/TimerProc。请帮忙。

```
#include <windows.h>
#include <stdio.h>

VOID CALLBACK TimerProc(
    HWND hwnd,  // handle of window for timer messages 
    UINT uMsg,  // WM_TIMER message
    UINT idEvent,   // timer identifier
    DWORD dwTime    // current system time
   ) {
      printf("from callback\n");

   }
int main(int argc, char *argv[])
{
   UINT timerid = SetTimer(NULL,1,1000,TimerProc);/*changed the time from 1 to 1000, but no effect*/
   printf("timerid %d\n",timerid); 
   int i,j;

      //delay loop, waiting for the callback function to be called
   for(j=0;j<0xffffffff;j++);
   /*{
   printf("%d\n", j);
   }*/

   printf("done \n");
  system("PAUSE");  
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:14:08.227

计时器通过 Windows 消息队列工作，并且您有一个控制台应用程序。

如果您创建一个基本的 Win32 应用程序以便获得一个窗口和一个消息循环，那么当 DefWndProc() 调用捕获到 WM_TIMER 消息时，它将在那里进行回调。当然你也可以自己捕获 WM_TIMER。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T10:18:07.673

您需要学习消息循环范例。您正在尝试使用 Win32 api 而没有实际执行正确的 Win32 初始化和操作。

如果您来自 Posix，则可以使用 SIGALRM 和警报。

在windows上，恐怕你还有更多工作要做（比如启动一个消息循环，因为即使你提供了一个回调函数，你也需要一个消息循环泵，它调用默认的消息循环处理函数将调用你的计时器回调，检查这个： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms644906 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644906(v=vs.85).aspx)

> 应用程序可以通过在窗口过程中包含 WM_TIMER case 语句或在创建计时器时指定 TimerProc 回调函数来处理 WM_TIMER 消息。当您指定 TimerProc 回调函数时，默认窗口过程在处理 WM_TIMER 时会调用该回调函数。因此，您需要在调用线程中调度消息，即使您使用 TimerProc 而不是处理 WM_TIMER。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T10:20:25.457

SetTimer 文档说： *当您指定 TimerProc 回调函数时，默认窗口过程在处理 WM_TIMER 时调用回调函数。因此，您需要在调用线程中调度消息，即使您使用 TimerProc 而不是处理 WM_TIMER。*

相反，您需要延迟循环：

```
bool bStillBusy = false;

int main()
{

MSG msg;

bStillBusy  = true;

id = SetTimer(NULL, 0, 3000, (TIMERPROC) TimerProc);

while(bStillBusy) 
{
  GetMessage(&msg, NULL, 0, 0);
  DispatchMessage(&msg);
}
...
etc.
} 
```

然后在回调中将 bStillBusy 设置为“false”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T10:15:41.257

计时器是使用普通的 Windows 事件系统处理的，因此您需要一个普通的事件循环。

# android - 如何在android 4.0及更高版本中播放视频

> ID：15406327
> 
> 赞同：1
> 
> 时间：2013-03-14T10:10:40.330
> 
> 标签：android

Bs"d 大家好，我需要播放一个
视频

```
 video=new VideoView(this);
 MediaController mc = new MediaController(this);
 video.setMediaController(mc);
   Uri uri = Uri.parse(url);    
     video.setVideoURI(uri);
     video.requestFocus();
     setContentView(video);
     video.start(); 
```

# c# - 在 XAML\Windows 8 商店应用程序中绑定一个可为空的类型

> ID：15406336
> 
> 赞同：2
> 
> 时间：2013-03-14T10:11:07.957
> 
> 标签：c#, data-binding, windows-store-apps, winrt-xaml, ivalueconverter

我在 XAML 中有一个 TextBox，我试图将它数据绑定到一个可为空的 int。这是我的文本框和链接转换器的代码：

```
<TextBox x:Name="textArea" InputScope="Number" Text="{Binding Area, Mode=TwoWay, Converter={StaticResource NullableValueConverter}}" />

public class NullableValueConverter:IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        return value;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        if (String.IsNullOrEmpty(value.ToString()))
        {
            return null;
        }

        return value;
    }
} 
```

当我每次在此文本框中输入一个数字时，数据绑定似乎不起作用，并且数据源始终保留为空。我怎样才能绕过这个？

我正在使用 XAML 和 C# 来设计一个 Windows 商店应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T10:33:39.873

我同意 Sacha 的回答，但是如果您需要 NullableValueConverter，则可以进行改进

```
public class NullableValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, 
                          CultureInfo culture)
    {
        return value == null ? string.Empty : value.ToString();
    }

    public object ConvertBack(object value, Type targetType, object parameter, 
                              CultureInfo culture)
    {
        string s = value as string;

        int result;
        if (!string.IsNullOrWhiteSpace(s) && int.TryParse(s, out result))
        {
            return result;
        }

        return null;
    }
} 
```

请注意，这是使用 WPF 测试的，因此方法签名可能与 WinRT 不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:24:02.300

在您的绑定句柄 TargetNullValue 中。有点像：

您需要添加 mscorlib：

```
 xmlns:sys="clr-namespace:System;assembly=mscorlib" 
```

并像这样更新您的绑定：

```
 Source="{Binding Area,
          TargetNullValue={x:Static sys:String.Empty},
          Converter={StaticResource NullableValueConverter}}" 
```

实际上，如果您在 XAML 中检查空值，则不需要 NullableValueConverter。这当然取决于您的转换器可能还应该处理什么。

或者，您可以实现[IDataErrorInfo](http://www.arrangeactassert.com/using-idataerrorinfo-for-validation-in-mvvm-with-silverlight-and-wpf/)。这有点复杂。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T06:05:45.107

Windows 应用商店应用程序的类没有`TargetNullValue`属性。[`Binding`](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.data.binding.aspx)

Phil 的方法是有效的并且工作正常，只要确保您按照他的建议使用正确的方法签名（并且您已经在自己的版本中使用了`NullableValueConverter`）：

```
public class NullableValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        return value == null ? string.Empty : value.ToString();
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        string s = value as string;

        int result;
        if (!string.IsNullOrWhiteSpace(s) && int.TryParse(s, out result))
        {
            return result;
        }

        return null;
    }
} 
```

# php - 验证数组值的有效方法

> ID：15406337
> 
> 赞同：2
> 
> 时间：2013-03-14T10:11:09.493
> 
> 标签：php, arrays, csv

我正在将 CSV 文件的某些值读入一个数组，并且我想在将每一行插入 MySQL 数据库之前对每个值运行一些基本的验证检查。我想知道如何使用某种规则数组有效地做到这一点。

例如，我只想要 CSV 每一行中某些位置的值

```
$while ($data = fgetcsv....)

$val1 = $data[2];
$val2 = $data[9];
$val3 = $data[11]; 
```

我想验证每个 val - 如果任何 val 没有验证，将中止插入

```
if (ctype_alnum($val1) AND ctype_alnum($val2) AND is_numeric($val3)) 
```

上面的方法在处理大约 30 个值时开始看起来效率很低，所以我想知道是否有一种方法可以通过创建一个存储所需值位置和验证规则的数组来改进它。像下面这样的东西......

```
$vals = array(
'val1' => array('pos' => 2, 'rule' => 'ctype_alphanum')
) 
```

对此的任何指示都会很棒..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:28:00.910

我不知道您需要`pos`数组中的元素，但对于另一部分，您可以查看此内容。如果需要更复杂，请相应更改

```
$vals = array(
   'val1' => array(
       'rule' => 'ctype_alnum',
   ),
   'val2' => array(
       'rule' => 'ctype_digit',
   ),
);

function print_out( $val )
{
    echo '<pre>';
    var_dump( $val );
    echo '</pre>';
}

print_out( $vals );

array_walk( $vals, function( &$value, $key ){
    $result          = call_user_func( $value['rule'], $value['value'] );
    $value['result'] = $result;
});

print_out( $vals ); 
```

**更新**

`$var = fgetcsv(...);`在这里你从 csv 得到一行。
`$neededRange = array_slice( $var, $x[, $n] );`这样你就可以得到你需要的部分。既然我看到你只需要一个规则来处理所有元素，那么。

```
array_walk( $array, function( &$value, $key ){
    $value = array(
        'value' => $value,
        'rule'  => 'ctype_alnum',
    );
 }); 
```

还更新了验证算法。

# eclipse - 如何在 Eclipse Juno 中创建 Jetty 服务器？

> ID：15406342
> 
> 赞同：2
> 
> 时间：2013-03-14T10:11:14.360
> 
> 标签：eclipse, jetty

这是我到目前为止所做的：

1.  从“**安装新软件**”中，我选择了站点：“ [http://eclipse-jetty.sourceforge.net/update/](http://eclipse-jetty.sourceforge.net/update/) ”
2.  安装了“ **Eclipse Jetty Feature** ”。
3.  安装后重启 Eclipse。

但是，Jetty 不会出现在`New Server`向导的服务器列表中。

有什么想法我在这里做错了吗？我是 Java 的完全新手。我是一名 C# 程序员，我正在学习使用 Eclipse 等。抱歉，如果我遗漏了一些明显的东西。

**更新 1**

新服务器的屏幕截图**> 下载其他服务器适配器**

![下载其他服务器适配器](../Images/23f601c01e3010655402f21709eb977b.png)

**如果我尝试安装服务器适配器，我会在安装过程中看到以下错误消息：**

![安装错误](../Images/60cb3fc29051780ea4fc8b72c9d185bb.png)

**更新 2**

**已安装软件**的屏幕截图

 **![安装的软件*](../Images/9c9218b9eef65d38f3d7a405d515b914.png)

**新建服务器向导**的屏幕截图

 **![定义新服务器窗口](../Images/3548624c7a3f5477c2e1a21a53358f4e.png)

**运行配置**的屏幕截图 **![这是我的运行配置窗口列出的内容：](../Images/584ee30915037eb65bff5ff70b7da15e.png)**

 ****Preferences > Run/Debug > Perspectives**的屏幕截图 **![观点](../Images/700acb055dcca2b045e0463094bf4744.png)**

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:40:43.057

你能确认`Eclipse Jetty Feature`安装了吗？

```
 Help -> Install New Software > what is already installed? 
```

![Eclipse 安装详细信息](../Images/fe1684619e47f1dd2c95c105c2ac4ac0.png)然后要运行 Jetty ， 您可以将其添加`Run Configurations`到`Debug Configurations``Jetty Webapp`

![调试配置 Jetty Webapp](../Images/de55d594ddaa114dcd53a3c687500c3e.png)

[快速教程](http://java.dzone.com/articles/jetty-and-eclipse-integration-0)（您不需要“Run Jetty Run”插件）********

# javascript - 我可以获取访问者的路由器名称或 MAC 地址吗？

> ID：15406344
> 
> 赞同：0
> 
> 时间：2013-03-14T10:11:18.373
> 
> 标签：javascript, html, browser

我可以获取访问者的路由器名称或 MAC 地址吗？这样我就可以在街上搜索他的位置？

编辑：Java 或 Flash 会帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:17:04.977

不，网络浏览器不会公开该信息。

如果您想要位置信息，则必须基于以下任一条件：

*   [地理定位 API](http://en.wikipedia.org/wiki/W3C_Geolocation_API)
*   请求（由浏览器向您的服务器或第三方地理位置服务的服务器发出）来自的 IP 地址

# android - 在 Android 4.1+ 中更改区域设置后 Activity 闪烁

> ID：15406345
> 
> 赞同：4
> 
> 时间：2013-03-14T10:11:18.983
> 
> 标签：android, configuration, android-activity, locale, blink

大约一年前，我已经实现了自定义区域设置选择，但在 4.1 版本之后，用户开始抱怨不断闪烁的活动。这是我正在使用的代码（从不同的 SO 答案编译）：

```
public final class TestApplication extends Application
{
    private Locale desiredLocale = new Locale("ru-RU");

    @Override
    public void onCreate() {
        super.onCreate();
        updateLocale(new Configuration());
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig)
    {
        super.onConfigurationChanged(newConfig);
        updateLocale(newConfig);
    }

    private void updateLocale(Configuration newConfig) {
        newConfig.locale = desiredLocale;
        Locale.setDefault(desiredLocale);
        getBaseContext().getResources().updateConfiguration(newConfig, getBaseContext().getResources().getDisplayMetrics());        
    }    
} 
```

应用程序仅包含一个空活动，在我更改设备方向后，Android 每秒都会重新创建该活动。[这](https://docs.google.com/file/d/0Bxtnvl856FZ_UnFfLThXVTNsS3c/edit?usp=sharing)是样本的来源。

看起来所有使用这种技术的应用程序都变得无效了。什么是正确的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T03:49:57.473

此行导致解决方案失败：

```
getBaseContext().getResources().updateConfiguration(newConfig, getBaseContext().getResources().getDisplayMetrics()); 
```

正确的（至少它有效）实现在这里定义 [https://stackoverflow.com/a/14010044/554336](https://stackoverflow.com/a/14010044/554336)：

```
Configuration config = new Configuration();
config.locale = locale;
getResources().updateConfiguration(config, getResources().getDisplayMetrics()); 
```

所以每次都应该创建新的配置实例。

# objective-c - Xcode 如何将数据从一个 UIviewController 传递到另一个 UIview 子视图

> ID：15406348
> 
> 赞同：0
> 
> 时间：2013-03-14T10:11:38.900
> 
> 标签：objective-c, ios6, xcode4.5

我有一个`UIViewController`（主 VC），`UIView`当点击按钮时，另一个作为子视图加载到其中`MainViewController`。实际上我在主视图控制器中加载了一个地图视图作为子视图。为此，我需要将坐标传递`MainViewController`给子视图（地图视图）以创建`annotation`那里然后加载到`MainViewController`.

在`MainViewController`以下方法中正确加载子视图：

```
-(IBAction)showUserLocation{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"UserCurrentLocationView" owner:self options:nil];
    UIView *currentLocationView = [nib objectAtIndex:0];

    currentLocationView.frame = CGRectMake(8, 10, currentLocationView.frame.size.width, currentLocationView.frame.size.height);

    [thirdPortion addSubview:currentLocationView]; // thirdPortion is a View Outlet in the Main VC wh
} 
```

在这里，我想将坐标（纬度/经度）传递给`UserCurrentLocationView`'s 类，以便它可以准备地图，并且我可以在按钮调用`MainViewController`when`showUserLocation`方法中看到指向的地图。

`UIView`设置保留在（子视图）上的属性值的方法是什么`MainViewController`。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:38:15.080

您必须继承`UIView`（我将调用它）并为和`YourView`添加两个属性。然后将其作为您的 .xib 的类 - 名为 UserCurrentLocationView 的文件。`long``lat`

然后执行以下操作来设置变量。

```
-(IBAction)showUserLocation{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"UserCurrentLocationView" owner:self options:nil];
    YourView *currentLocationView = (YourView *)[nib objectAtIndex:0];

    currentLocationView.lon = self.fooValue;
    currentLocationView.lat = self.fooValue2;

    currentLocationView.frame = CGRectMake(8, 10, currentLocationView.frame.size.width, currentLocationView.frame.size.height);

    [thirdPortion addSubview:currentLocationView]; // thirdPortion is a View Outlet in the Main VC wh
} 
```

# selenium-webdriver - 如何从java中的WebElement对象获取By对象

> ID：15406349
> 
> 赞同：1
> 
> 时间：2013-03-14T10:11:40.440
> 
> 标签：selenium-webdriver

Java中如何`By`从对象中获取对象。`WebElement`

我`WebElement`在不同的类中定义了一个，在测试计划中我想检查`WebElement`页面中是否可用。为了有一个更好的编码约定，我想避免硬编码`By`.

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-20T18:02:01.003

如果您**必须**在另一个类中使用 WebElement，则重用该元素的一种方法是将自身声明为静态元素：

```
public static WebElement element = driver.findElement(By.id("someId")); 
```

# php - 在动态创建的 div 标签 php javascript 中回显

> ID：15406350
> 
> 赞同：1
> 
> 时间：2013-03-14T10:11:43.003
> 
> 标签：php, javascript, xml, ajax

我试图将 xml 值回显到动态创建的 div 标签，但我似乎找不到任何有关它的信息。

DOM 树是用 JavaScript 创建的

```
textArea = document.createElement('textarea'); 
```

输出在这里变成`<textarea></textarea>`没问题......然后我用简单的php从一个xml文件中获取值。

```
<?php
foreach($xml->sticker as $sticker ){
$post = $sticker->text . "</br>";
$post;

echo $post;
}
?> 
```

回声返回“Hello World”

现在到了这个问题，我如何在动态创建的文本区域内回显输出应该是 `<textarea>Hello world</textarea>`

有任何想法吗 ？或者一个链接？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:20:26.810

您的应用程序应该如何工作还不是很清楚。是否要使用 ajax 获取数据。这里有些人似乎是这样认为的，尽管你没有这么说。我会假设情况并非如此。如果是解决方案，很可能是让您的`PHP`脚本返回`JSON`编码数据，使用解码`Javascript`并将其插入到`textarea`.

由于您是动态创建的，因此`textarea`您还必须使用`Javascript`. 只需将文本添加到文本`.innerHTML`区域。

一些`if`检查 PHP 以确保应该打印文本并且`textarea`存在，然后使用 PHP 将其添加到 Javascript。

```
echo 'textArea.innerHTML = "' . $post; 
```

如果您应该以`posts`相同的方式打印所有内容，则`textarea`可以执行类似的操作

```
<?php
  echo '<script>';
  echo 'textArea = document.createElement(\'textarea\');';
  foreach($xml->sticker as $sticker ){
    $posts .= $sticker->text . "\n\r";
    echo $post;
  }

  echo 'textArea.innerHTML = "' . $posts;
  echo '</script>';
?> 
```

`textarea's`如果您愿意，您也可以检查是否存在 Javascript。您可能不想对放入其中的文本进行一些过滤`textarea`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:14:53.190

如果您使用 XHR 成功加载了 xml，那么您可以将您的响应放入您的 textarea 中：

```
textArea.innerHTML = responseFromXHR; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:15:04.887

您如何从 XML 文件中获取值？

在 PHP 中，返回一个字符串或 JSON 对象，然后在 AJAX 回调中，将数据插入所需的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T10:24:03.377

您返回“Hello World”的 php 脚本必须通过 AJAX 调用，并且成功回答，就像 'apelsinapa' 说的：

```
textArea.innerHTML = responseFromAjaxCall; 
```

否则 - 在 JavaScript 创建 textarea 节点之前，服务器会解析 PHP 代码。

# wordpress - 如何仅在 wordpress 中调用选定插件页面上的注册 javascript？

> ID：15406357
> 
> 赞同：1
> 
> 时间：2013-03-14T10:12:06.207
> 
> 标签：wordpress

我想要的只是将我的自定义 javascript 添加到我的插件主页。

这是我所做的：

**1.首先注册我的脚本，**

```
function register_my_plugin_script() {
        /* Register our script. */
        wp_register_script( 'my-plugin-script', plugins_url('/script.js', __FILE__), array('jquery'));
    }
add_action( 'admin_init', 'register_my_plugin_script' ); 
```

**2.然后打电话给它，**

```
function call_my_script(){
  wp_enqueue_script( 'my-plugin-script' );
} 
```

**3.然后尝试只在我的主页中调用它，如下所示：**

```
function my_home_page(){
   add_action('admin_enqueue_scripts', 'call_my_script');
} 
```

**但它没有添加脚本。**

添加菜单页面的进一步代码：

```
function my_menu_pages(){
  add_menu_page('some title', 'some menu', 'manage_options', 'my-plugin-homepage', 'my_home_page');
}
add_action('admin_menu', 'my_menu_pages'); 
```

**注意：** 如果我直接在函数中包含我的脚本`my_home_page`而不像这样注册或调用，那么它可以工作。

```
function my_home_page(){
   wp_enqueue_script( 'my-plugin-script', plugins_url('/script.js', __FILE__), array('jquery'));
} 
```

**做这个的最好方式是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:36:24.117

管理区域中的插件页面有一个挂钩 - 但可能很难准确计算出它的名称。

先试试这个：

```
add_action('admin_enqueue_scripts', 'my_plugin_enqueue_scripts' );
function my_plugin_enqueue_scripts($hook) 
{
    echo "<!-- Hook = {$hook} -->" . PHP_EOL;
} 
```

...然后访问管理区域中的插件页面并查看 HTML 源代码以查找该变量的输出。或者，设置断点并在调试器中查看它。

找到挂钩名称后，您可以在插件代码中执行以下操作：

```
add_action('admin_enqueue_scripts', 'my_plugin_enqueue_scripts' );
function my_plugin_enqueue_scripts($hook) 
{
    if ($hook == 'my_plugin_page_hook-location')
    {
        wp_register_script(...);
        wp_enqueue_script(...);

        wp_register_style(...);
        wp_enqueue_style(...);      
    }
} 
```

# mysql - 转换变量

> ID：15406365
> 
> 赞同：0
> 
> 时间：2013-03-14T10:12:25.057
> 
> 标签：mysql

```
DROP FUNCTION IF EXISTS hello_world;
DELIMITER $$
CREATE FUNCTION hello_world()
  RETURNS int
  LANGUAGE SQL
BEGIN
    declare coba int;
    select ISNULL(MAX(convert(RIGHT(kode_bahan,3),int)),0) from bahan into coba;
    return coba;
END;$$
DELIMITER ; 
```

> 错误代码 1064，SQL 状态 42000：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'int)),0) 附近从 bahan 到 coba 使用的正确语法；返回科巴；END' 在第 6 行第 3 行第 1 列

我找不到解决方案。请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:23:33.673

特别是关于错误代码 1064，[CONVERT()](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_convert)的 MySQL 手册页没有`int`列为可识别的类型之一。尝试`SIGNED`或（如果您愿意`UNSIGNED`，后跟可选关键字）。`INTEGER`

# windows - win apache svn 提交后更新挂起

> ID：15406371
> 
> 赞同：1
> 
> 时间：2013-03-14T10:12:37.910
> 
> 标签：windows, svn, post-commit

我正在使用 svn apache 模块来管理我在网络服务器上的存储库，并使用 tartoise svn 与它进行交互。

每当我提交某些内容时，我想自动更新服务器上的工作副本，这样我就不必在服务器上手动远程桌面并手动运行更新。

为此，我在 repo 上创建了一个简单的提交后挂钩

```
echo %username% >> C:\debug.txt
svn update F:\wampserver64\www\netcity\maintenance\ >> C:\debug.txt 
```

问题是我不能再对 repo 进行任何更改。提交在达到 100% 后挂起，确定按钮显示为灰色。之后提交的文件在客户端和服务器上都处于锁定状态，我必须在两个站上手动清理和更新。echo %username% 用于调试目的。我怀疑这可能是权限问题，所以我将用户名 svn 运行为。这是输出：

```
XIBM$ 
Updating 'F:\wampserver64\www\netcity\maintenance': 
```

XIBM$ 甚至不是用户名。它是服务器的名称。如果手动运行，.bat 钩子运行正常并返回一个合理的输出：

```
liviu.gelea 
Updating 'F:\wampserver64\www\netcity\maintenance':
At revision 19. 
```

我尝试为 XIBM/用户、经过身份验证的用户、管理员、来宾以及几乎所有在服务器上移动但没有运气的东西设置完全权限。因此，我们非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:47:12.990

正如我多次提到的，不要使用提交后脚本来执行此操作。在该提交后脚本运行时，用户被锁定并等待该提交完成。在这段时间里，他们对他们的电脑、Subversion 和你很生气。

相反，使用像[Jenkins](http://jenkins-ci.org)这样的持续集成引擎来处理这个问题。Jenkins 易于设置，并且会消除提交后脚本的痛苦。

另外，Jenkins 可以保留所有提交的完整历史记录，以及服务器更新发生的情况，如果出现问题，可以通过电子邮件发送给您。更好的是，您可以使用诸如*Promotion Build*插件之类的东西来挑选您真正想要部署到服务器的提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:07:43.387

svn 运行的帐户是什么？我会推荐一些东西

1.  在更新中指定`--username`，您可能不想添加 svn 正在运行的本地服务帐户以访问 repo
2.  添加`--accept theirs-full`以在发生冲突时始终获取服务器副本
3.  一旦你被拨入，你可能也会`--quiet`想要

# javascript - 如何使用 Bootstrap 为单击的元素创建带有滚动和溢出的 Facebook 固定侧边栏？

> ID：15406372
> 
> 赞同：3
> 
> 时间：2013-03-14T10:12:41.633
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我遇到了一个问题。我正在创建一个简单的固定侧边栏（类似于右侧的 Facebook 侧边栏）

在 Facebook 中，当您与侧边栏交互时会发生 2 件事

1.  需要滚动内容时会出现滚动条
2.  当您悬停或单击名称时，左侧会出现一个弹出框

我遇到了与溢出冲突的问题。据我了解，要让侧边栏滚动溢出必须设置为在父 div 上滚动，这隐藏了出现在它之外的任何元素。

我正在使用 Twitter Bootstrap 来构建我的侧边栏，并在这里创建了一个工作示例的 JSFiddle

[http://jsfiddle.net/bNFAf/5/](http://jsfiddle.net/bNFAf/5/)

我的示例的问题是，当我单击图标`<i class="icon-cog icon-white"></i>`以激活 时，由于div`dropdown-menu`上设置的溢出，它被切断。`#sidebar`

有人对如何使它工作有任何建议吗？如果可以不使用 jQuery 而只使用 CSS，那就太好了！否则，jQuery 可以工作。

演示 - [http://jsfiddle.net/bNFAf/5/](http://jsfiddle.net/bNFAf/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:18:20.987

[小提琴](http://jsfiddle.net/bNFAf/10/)

这使用引导弹出框，它允许向左定位，以便选项飞出菜单。

```
$(document).ready(function(){

$('.icon-cog').popover({
    placement: 'left',
    html: 'true',
    trigger: 'click',
    container: 'body'    
});

}); 
```

您可以使用[JQuery Drill Down Ipod Menu](http://www.designchemical.com/blog/index.php/wordpress-plugins/wordpress-plugin-jquery-drill-down-ipod-menu-widget/)

# jquery - 几个具有相同类的表，只有第一个表中的行受到影响，为什么？

> ID：15406375
> 
> 赞同：1
> 
> 时间：2013-03-14T10:12:48.290
> 
> 标签：jquery

我有几个具有相同类的表，每个表有 2 行。我想给第二行每个表中的 td 元素一个特定的类，但我这样做的方式只对第一个表有用，我不知道为什么。

```
$('#main table.asseenin_table tr:eq(1) td').addClass('asi_second'); 
```

只有 FIRST 表第二行中的 td 元素获得类，其他表没有。

```
<table class="asseenin_table">

                <tr>
                    <td><a href="#"><img src="images/asseenin/1.jpg" /></a></td>
                    <td><a href="#"><img src="images/asseenin/2.jpg" /></a></td>
                    <td><a href="#"><img src="images/asseenin/3.jpg" /></a></td>
                    <td><a href="#"><img src="images/asseenin/4.jpg" /></a></td>
                    <td><a href="#"><img src="images/asseenin/5.jpg" /></a></td>
                </tr>

                <tr>
                    <td>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    </td>

                    <td>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    </td>

                    <td>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    </td>

                    <td>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    </td>

                    <td>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    </td>
                </tr>

            </table>

            <table class="asseenin_table">

                <tr>
                    <td><a href="#"><img src="images/asseenin/6.jpg" /></a></td>
                    <td><a href="#"><img src="images/asseenin/7.jpg" /></a></td>
                    <td><a href="#"><img src="images/asseenin/8.jpg" /></a></td>
                    <td><a href="#"><img src="images/asseenin/9.jpg" /></a></td>
                    <td><a href="#"><img src="images/asseenin/10.jpg" /></a></td>
                </tr>

                <tr>
                    <td>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    </td>

                    <td>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    </td>

                    <td>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    </td>

                    <td>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    </td>

                    <td>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    <a href="#"><img src="images/asseenin/thumbs/thumb.jpg" /></a>
                    </td>
                </tr>

            </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:17:40.363

尝试使用`:last-child`而不是`eq`

```
$('#main table.asseenin_table tr:first-child td').addClass('asi_second'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:19:01.250

正如[http://api.jquery.com/eq/](http://api.jquery.com/eq/)上的文档所说：`Description: Reduce the set of matched elements to the one at the specified index.`所以在`:eq(1)`你只有一个元素之后。

要解决您的问题，请使用`:nth-child()`（[http://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)）：

```
$('#main table.asseenin_table tr:nth-child(1) td').addClass('asi_second'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-14T10:19:21.853

也许像这样：（将“#”更改为“。” - 当然将类添加到表并删除 id）

```
$('.main table.asseenin_table tr:eq(1) td').addClass('asi_second'); 
```

# uiscrollview - Vfr-Reader UIScrollView 从左到右

> ID：15406385
> 
> 赞同：1
> 
> 时间：2013-03-14T10:13:23.807
> 
> 标签：uiscrollview

我正在使用 Vfr-Reader 源代码，在这里我无法从左到右滚动滚动视图，默认情况下它是从右到左。我怎样才能实现这一点我尝试了很多设置偏移量，还尝试将条件与原点放在一起。

```
- (void)showDocumentPage:(NSInteger)page
{
if (page != currentPage) // Only if different
{
NSInteger minValue; NSInteger maxValue;
NSInteger maxPage = [document.pageCount integerValue];
NSInteger minPage = 1;

if ((page < minPage) || (page > maxPage)) return;

if (maxPage <= PAGING_VIEWS) // Few pages
{
minValue = minPage;
maxValue = maxPage;
}
else // Handle more pages
{
minValue = (page - 1);
maxValue = (page + 1);

if (minValue < minPage)
{minValue++; maxValue++;}
else
if (maxValue > maxPage)
{minValue--; maxValue--;}
}

NSMutableIndexSet *newPageSet = [NSMutableIndexSet new];

NSMutableDictionary *unusedViews = [contentViews mutableCopy];

CGRect viewRect = CGRectZero; viewRect.size = theScrollView.bounds.size;

for (NSInteger number = minValue; number <= maxValue; number++)
{
NSNumber *key = [NSNumber numberWithInteger:number]; // # key

ReaderContentView *contentView = [contentViews objectForKey:key];

if (contentView == nil) // Create a brand new document content view
{
NSURL *fileURL = document.fileURL; NSString *phrase = document.password; // Document properties

contentView = [[ReaderContentView alloc] initWithFrame:viewRect fileURL:fileURL page:number password:phrase];

[theScrollView addSubview:contentView]; [contentViews setObject:contentView forKey:key];

contentView.message = self; [newPageSet addIndex:number];
}
else // Reposition the existing content view
{
contentView.frame = viewRect; [contentView zoomReset];

[unusedViews removeObjectForKey:key];
}

viewRect.origin.x += viewRect.size.width;
}

[unusedViews enumerateKeysAndObjectsUsingBlock: // Remove unused views
^(id key, id object, BOOL *stop)
{
[contentViews removeObjectForKey:key];

ReaderContentView *contentView = object;

[contentView removeFromSuperview];
}
];

unusedViews = nil; // Release unused views

CGFloat viewWidthX1 = viewRect.size.width;
CGFloat viewWidthX2 = (viewWidthX1 * 2.0f);

CGPoint contentOffset = CGPointZero;

if (maxPage >= PAGING_VIEWS)
{
if (page == maxPage)
contentOffset.x = viewWidthX2;
else
if (page != minPage)
contentOffset.x = viewWidthX1;
}
else
if (page == (PAGING_VIEWS - 1))
contentOffset.x = viewWidthX1;

if (CGPointEqualToPoint(theScrollView.contentOffset, contentOffset) == false)
{
theScrollView.contentOffset = contentOffset; // Update content offset
}

if ([document.pageNumber integerValue] != page) // Only if different
{
document.pageNumber = [NSNumber numberWithInteger:page]; // Update page number
}

NSURL *fileURL = document.fileURL; NSString *phrase = document.password; NSString *guid = document.guid;

if ([newPageSet containsIndex:page] == YES) // Preview visible page first
{
NSNumber *key = [NSNumber numberWithInteger:page]; // # key

ReaderContentView *targetView = [contentViews objectForKey:key];

[targetView showPageThumb:fileURL page:page password:phrase guid:guid];

[newPageSet removeIndex:page]; // Remove visible page from set
}

[newPageSet enumerateIndexesWithOptions:NSEnumerationReverse usingBlock: // Show previews
^(NSUInteger number, BOOL *stop)
{
NSNumber *key = [NSNumber numberWithInteger:number]; // # key

ReaderContentView *targetView = [contentViews objectForKey:key];

[targetView showPageThumb:fileURL page:number password:phrase guid:guid];
}
];

newPageSet = nil; // Release new page set

[mainPagebar updatePagebar]; // Update the pagebar display

[self updateToolbarBookmarkIcon]; // Update bookmark

currentPage = page; // Track current page number
} 
```

}

我改变了这个

```
if (maxPage <= PAGING_VIEWS) // Few pages
{
minValue = minPage;
maxValue = maxPage;
}
else // Handle more pages
{
minValue = (page - 1);
maxValue = (page + 1);

if (minValue < minPage)
{minValue++; maxValue++;}
else
if (maxValue > maxPage)
{minValue--; maxValue--;}
}
</pre> 
```

一旦你在当前页面上，我得到了正确的 minValue 和 max 值来加载左页和右页，例如，如果我在第 3 页，那么左边应该是 4，右边应该是 2但它没有加载这些，而是​​加载左侧 2 和右侧 5。我缺少的东西可以帮助我。

# java - Java 中 Cipher 对象的初始化

> ID：15406388
> 
> 赞同：1
> 
> 时间：2013-03-14T10:13:37.367
> 
> 标签：java, encryption, des

在java中加密数据时如下：

```
 SecureRandom sr = new SecureRandom();  
    DESKeySpec dks = new DESKeySpec(rawKeyData);

    SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("DES");  
    SecretKey key = keyFactory.generateSecret(dks);  
    Cipher cipher = Cipher.getInstance("DES");  
    cipher.init(Cipher.ENCRYPT_MODE, key, sr);  
    // why the sr is necessary to init a Cipher object?
    byte data[] = str.getBytes();  
    byte[] encryptedData = cipher.doFinal(data); 
```

为什么需要 a`SecureRandom`对象`sr`来初始化 Cipher 对象？至于解密方面，也需要一个`SecureRandom`与加密大小生成的对象不同的对象。这些`SecureRandom`对象仅用于奇偶校验位吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:25:52.793

该`SecureRandom`对象是可选的。如果您不选择一个，Java 将使用默认的随机源。[请参阅此方法](http://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html#init%28int,%20java.security.Key%29)的文档以了解如何选择一个。

[`Cipher`Javadocs](http://docs.oracle.com/javase/7/docs/api/javax/crypto/Cipher.html#init%28int,%20java.security.Key,%20java.security.SecureRandom%29)解释了这个论点的目的：

> 如果此密码（包括其底层反馈或填充方案）需要任何随机字节（例如，用于参数生成），它将从随机中获取它们。

因此，在您的特定情况下，您可能根本没有使用此项目。DES 使用中的任何内容都不需要随机数据（因为您似乎正在使用 ECB 模式）。如果您使用的是 CBC 模式，那么我假设 IV 将从`SecureRandom`对象中随机生成。

# ibm-mobilefirst - 如何在 IBM Worklight 中从本机代码查询或访问 JSONStore 数据？

> ID：15406390
> 
> 赞同：0
> 
> 时间：2013-03-14T10:13:41.577
> 
> 标签：ibm-mobilefirst, jsonstore

我的应用程序 (iOS) 将有一个内置本机代码的浏览器，其余部分使用 Worklight 在 Javascript 中构建，并且需要有一个共享的持久数据库，并且两者都具有加密功能。

JSONStore 似乎具有我需要的所有功能，但它仅适用于 Javascript。有什么办法可以在本机代码中访问它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:51:21.043

正确，JSONStore 仅在混合 (JavaScript) API 中可用。我无法在即将发布的版本中承诺任何功能，但我可以说有很多人要求 JSONStore 提供纯原生支持。我将确保您的请求也被捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T10:47:13.873

该功能将在 Worklight 6.2 中提供，该版本现已发布...

# java - Java迭代器中的强制执行顺序

> ID：15406395
> 
> 赞同：2
> 
> 时间：2013-03-14T10:13:48.377
> 
> 标签：java, oop, iterator

我正在为不同的团队提供一个库。我提供的一种方法接收一个迭代器作为参数。我想以某种方式要求一定的迭代顺序。有没有办法通过扩展迭代器在代码中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:18:54.277

不是直接的。迭代器只是为了给你一个项目，避免存储在内存中并传递一个完整的值列表，这有时是不可行的。

除非您对如何生成值以及必须将哪些边界应用于数据排序有更多了解，否则唯一的方法是从迭代器中获取所有元素，将它们存储在某个列表/向量/数据库中，对它们进行排序并返回另一个使用排序列表的迭代器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:18:51.043

作为参数，你被传递了一个实现迭代器的具体类的实例。您不能扩展它的类，因为它的类是由实例化决定的，这是由调用您的方法的代码完成的。

如果您想在不遵守所需顺序时快速失败，请尝试[Guava 的 Ordering.isOrdered() 方法。](https://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/collect/Ordering.html#isOrdered-java.lang.Iterable-)

注意这仅在您的参数是 Iterable 而不是 Iterator 时才有效。您需要它是可迭代的（一个允许您检索迭代器的接口），以便您可以迭代两次：一次检查订单，一次进行处理。

# regex - 正则表达式提取所有内容，直到在斜杠后遇到一个数字

> ID：15406400
> 
> 赞同：2
> 
> 时间：2013-03-14T10:14:14.687
> 
> 标签：regex

我希望从字符串中提取所有内容，但在遇到斜杠后的数字后忽略所有内容（允许使用字母数字）

例子：

```
http://www.test.com/products/cards/product_code100/12345/something_else
http://www.test.com/products/123abc/45678/ 
```

所需的输出 -

```
http://www.test.com/products/cards/product_code100/
http://www.test.com/products/123abc/ 
```

以下正则表达式为我提供了反向引用中的所有内容，但如果我可以在斜线后摆脱数字，那就太好了 -

```
 ^(.*:)//([a-z\-.]+)(:[0-9]+)?(.*) 
```

附加信息 - 需要语言独立的正则表达式。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:18:32.400

Perl 中的示例：

```
echo "http://...." | perl -pe 's/(.*\/)\d+\/.*/$1/' 
```

或者：

```
echo "http://...." | perl -ne 'print "$1\n" if /(.*\/)\d+\/.*/' 
```

**编辑：** @creinig 在他的评论中指出的是真实的 - 没有通用正则表达式之类的东西。尽管如此，Perl 被广泛使用，因此它是一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:21:52.810

这应该适用于大多数语言，并且应该产生所需的输出

```
(http://.*)(?=/\d+(?!\w+)) 
```

它需要每个字符，直到找到（前瞻）\ 后跟一个数字。

如果你尝试匹配

```
http://www.test.com/products/123abc/
or
http://www.test.com/products/123abc 
```

它只是找不到匹配项，您可以确定检查的字符串在斜杠后没有遇到纯数字

# ajax - Wordpress 发送 WP_Ajax_Response 时未收到响应

> ID：15406406
> 
> 赞同：0
> 
> 时间：2013-03-14T10:14:45.690
> 
> 标签：ajax, wordpress, response

我正在寻找几天来解决我的问题。当我发送 WP_Ajax_Response 时，客户端没有收到它。我检查了互联网上所有可能的提示，但仍然无法正常工作。有人可以帮助我吗？

我注册了javascript文件：

```
wp_register_script('test-ajax-js',get_template_directory_uri() . '/library/script/ajax.test.js', array( 'jquery', 'wp-ajax-response' ), '1.0' );
wp_enqueue_script( 'test-ajax-js');
wp_localize_script( 'test-ajax-js', 'ajaxtest', 
                    array( 
                        'Ajax_Url' => admin_url( 'admin-ajax.php' ),
                        'deshopNonce' => wp_create_nonce( 'deshop-ajax-test-nonce' )
                    ) 
            ); 
```

这是PHP代码：

```
add_action('wp_ajax_shop_ajax_test', 'test_function');
add_action('wp_ajax_nopriv_shop_ajax_test', 'test_function');

function test_function() {
check_ajax_referer( 'deshop-ajax-test-nonce' );

$response = array( 'what'=>'validate_user_login',
            'action'=>'validate_user_login_results',
            'id'=>'1',
            'data'=>'OK' 
            );

$xmlResponse = new WP_Ajax_Response($response);
$xmlResponse->send();

exit();
} 
```

这是javascript文件：

```
jQuery(document).ready(function(event) {
var post = {
                action: 'shop_ajax_test',
                _ajax_nonce: ajaxtest.deshopNonce
            };

jQuery.post( ajaxtest.Ajax_Url, post, function(response){
                var res = wpAjax.parseAjaxResponse(response, 'ajax-response');
                jQuery.each( res.responses, function() {
                    var a = 0;
                });
            });

}); 
```

调试 res 内容时显示响应 = [0]。在 jQuery.each 函数中没有响应被处理！

非常感谢您提供的任何可能对我有所帮助的提示！

马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T09:32:31.147

域、子域或协议是否有可能不同？这将杀死 Ajax 响应，因为浏览器不会发送它。

此外，您是否使用过 Firefox 的 firebug 或 Chrome 的检查器，显然它们会向您显示请求和响应（或者为什么它没有到达那里）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:35:12.830

我遇到了同样的问题，但我通过使用 jQuery.ajax() 而不是 post() 解决了这里的链接可能

# java - 从另一个 html 页面 GWT 获取参数

> ID：15406408
> 
> 赞同：0
> 
> 时间：2013-03-14T10:14:51.577
> 
> 标签：java, gwt

如何从 url 分配和获取参数 像这样

```
simple.com?userId=123456 
```

我已经尝试`Window.Location.replace(url)`分配参数

那么我可以用什么来获取 userId

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:42:04.793

你有没有尝试过 ？？

```
com.google.gwt.user.client.Window.Location.getParameter("userId");//fetch parameter

com.google.gwt.user.client.Window.Location.assign(newURL);  //assign new url 
```

在将 URL 分配给位置之前，使用`query parameters`

# php - Zend Db 更新删除方法及引用

> ID：15406409
> 
> 赞同：0
> 
> 时间：2013-03-14T10:14:51.640
> 
> 标签：php, zend-framework, zend-db, zend-db-table

在文档中

> 由于表 update() 方法代理数据库适配器 update() 方法，因此第二个参数可以是 SQL 表达式数组。表达式使用 AND 运算符组合为布尔项。注意：SQL 表达式中的值和标识符没有为您引用。如果您有需要引用的值或标识符，则您有责任这样做。使用数据库适配器的 quote()、quoteInto() 和 quoteIdentifier() 方法。

但是当我检查源更新方法时，我看到了一些奇怪的东西（方法链执行）：

*   Zend_Db_Table_Abstract::update()
*   Zend_Db_Adapter_Abstract::update()
*   Zend_Db_Adapter_Abstract::_whereExpr()
*   Zend_Db_Adapter_Abstract::quoteInto()

在 Zend_Db_Adapter_Abstract::quoteInto() 中有引用。有人可以解释一下吗？也许文档已经过时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:36:43.440

引用的值，文档中的注释是指您传入的 WHERE 子句，您需要自己引用。典型用法是：

```
$table->update(array(
    'name' => $name, // this gets quoted
    'email' => $email // as does this
), $db->quoteInto('id = ?', $id)); 
```

# google-maps-api-3 - 关于标记 Google API v3？

> ID：15406412
> 
> 赞同：0
> 
> 时间：2013-03-14T10:14:54.577
> 
> 标签：google-maps-api-3

我的想法是使用处理地图的点击事件来创建标记。然后处理标记的单击事件以显示该标记的 lat()。但是，它总是在数组中显示最终标记的 lat()。我无法解决这个错误。请帮我解决这个问题。谢谢大家

```
function addMarker(location){
var goldStar = {
    path: google.maps.SymbolPath.CIRCLE,
    fillColor: "yellow",
    fillOpacity: 0.8,
    scale: 1,
    strokeColor: "gold",
    strokeWeight: 14
};      
mar = new google.maps.Marker({
    position: location,
    animation: google.maps.Animation.DROP,
    icon: goldStar, //or use image
    title: "Hello",
    map: map
});
makerArray.push(mar);
//console.log(makerArray.length);
//click_Marker(mar);
google.maps.event.addListener(mar, 'click', function(){
        alert(mar.getPosition().lat());
});}

function initialize(){
var mapOptions = {
    zoom: 12,
    overviewMapControl: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP,   
};
map = new google.maps.Map(document.getElementById("map"), mapOptions);;
GetCurrentLocation(map);

//Hướng dẫn đi
directionDisplay.setMap(map);
directionDisplay.setPanel(document.getElementById("direction"));

getData();
showListRestaurant();
//Thêm địa điểm vào bản đồ
google.maps.event.addListener(map, 'click', function(event){
        addMarker(event.latLng);    
    }); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:31:14.010

如果那是您的完整代码，那么您缺少`var`对`mar`变量的声明。

```
mar = new google.maps.Marker({
    position: location,
    animation: google.maps.Animation.DROP,
    icon: goldStar, //or use image
    title: "Hello",
    map: map
}); 
```

应该在开头有一个 var

```
var mar = new google.maps.Marker({
    position: location,
    animation: google.maps.Animation.DROP,
    icon: goldStar, //or use image
    title: "Hello",
    map: map
}); 
```

这可以解释您的问题，因为您添加的每个标记都是对同一对象的引用，因此每次您向 中添加新的点击事件时`mar`，实际上都是在更新同一对象的点击事件。结果是所有点击事件都具有相同的值。

这是一个有效的jsfiddle：

[http://jsfiddle.net/NGja4/50/](http://jsfiddle.net/NGja4/50/)

# asp.net-mvc - 初始化 Web API 控制器时，如何配置 autofac 为接口注入类型？

> ID：15406415
> 
> 赞同：2
> 
> 时间：2013-03-14T10:15:00.980
> 
> 标签：asp.net-mvc, asp.net-web-api, inversion-of-control, autofac

我有一个依赖于另一个类的 WebAPI 控制器：

```
 public class HealthCheckController : System.Web.Http.ApiController
    {
        private readonly IHealthCheckReport _healthCheckReport;

        public HealthCheckController(IHealthCheckReport healthCheckReport)
        {
            this._healthCheckReport = healthCheckReport;
        }
} 
```

我正在使用 Autofac，在我的 WebApiConfig 类的 Register 方法中，我添加了：

```
 var builder = new ContainerBuilder();
 builder.RegisterType<HealthCheckReport>().As<IHealthCheckReport>();
 var container = builder.Build();

 // Set the dependency resolver for Web API.
 var webApiResolver = new AutofacWebApiDependencyResolver(container);
 GlobalConfiguration.Configuration.DependencyResolver = webApiResolver; 
```

但是当我调用 Index() 操作时，它抱怨我的控制器没有默认构造函数。然而，我预计 Autofac 只是神奇地注入了我在上面注册的类型。

这应该如何配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:19:40.243

您还需要注册 api 控制器。

```
 builder.RegisterApiControllers(Assembly.GetExecutingAssembly()); 
```

来源：[http ://code.google.com/p/autofac/wiki/WebApiIntegration](http://code.google.com/p/autofac/wiki/WebApiIntegration)

# solr - solr 中的异常

> ID：15406422
> 
> 赞同：0
> 
> 时间：2013-03-14T10:15:09.360
> 
> 标签：solr

我是 Solr 的新手。我尝试按照访问[http://www.beingjavaguys.com/2013/01/introduction-to-apache-solr-40-with.html](http://www.beingjavaguys.com/2013/01/introduction-to-apache-solr-40-with.html)给出的说明安装 solr 在运行时出现类似错误

```
collection1: org.apache.solr.common.SolrException:org.apache.solr.common.SolrException:
RequestHandler init failure 
```

有人请帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T05:56:19.370

这是因为..您的 tomcat 服务器没有正确获取 collection1 文件夹的内容。

请从 solr 4 和 tomcat 的新副本开始，然后再次配置整个设置...我遵循了同一个站点，并且能够正确集成。

仔细检查那里提到的每一步。

# c# - DevExpress WindowUIView 后退按钮事件

> ID：15406423
> 
> 赞同：1
> 
> 时间：2013-03-14T10:15:22.313
> 
> 标签：c#, winforms, devexpress, devexpress-windows-ui

我正在使用 DevExpress12.2 为 Windows 7 开发一个 MetroUI 喜欢的应用程序。但是，我面临一个似乎无法靠自己解决的问题。

我正在使用 DocumentManager 创建一个 Tile Container Page。因此，DevExpress 会自动为我们生成一个返回按钮。

用户可以随时单击返回按钮返回到磁贴菜单。但是，在某些情况下，比如数据录入，我们需要强制用户在用户完成操作之前不要返回？

当用户单击后退按钮时，我可以捕捉到任何事件吗？或者有什么方法可以在某些情况下隐藏后退按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:27:00.917

没有处理“后退”按钮单击的嵌入式功能，因为[Windows UI 导航概念](http://help.devexpress.com/#WindowsForms/CustomDocument11769)不接受根据在这些操作已显示后更改的条件执行或不执行的操作。所有动作（导航栏动作和嵌入式动作，如“后退”按钮）是否显示或不基于其*CanExecute()*方法实现。

换句话说，**如果您需要取消“返回”操作，则根本不应该显示此操作**（要删除“返回”导航元素，您应该清除特定容器的 Parent 属性）。

因此，为防止用户使用“返回”或“主页”导航操作停用页面内容容器，您不应将此页面内容容器包含到[导航层次结构](http://help.devexpress.com/#WindowsForms/CustomDocument11770)中，并使用 WindowsUIView.Controller 手动导航到此容器并从该容器返回方法和[自定义按钮](http://help.devexpress.com/#WindowsForms/CustomDocument12241)：

```
WindowsUIButton customBackButton;
public Form1() {
    InitializeComponent();

    // add custom button on 'page1' container
    customBackButton = new DevExpress.XtraBars.Docking2010.WindowsUIButton();
    customBackButton.Caption = "Back to Main Tile Container";
    customBackButton.Image = ContentContainerAction.Back.Image;
    page1.Buttons.Add(customBackButton);

    page1.ButtonClick += Page_ButtonClick;
    tileContainer1.Click += TileContainer_Click;
}
void TileContainer_Click(object sender, TileClickEventArgs e) {
    page1.Document = ((Tile)e.Tile).Document;
    page1.Subtitle = ((Tile)e.Tile).Document.Caption;
    // handle 'tileContainer1' click to activate 'page1' manually
    e.Handled = windowsUIView1.Controller.Activate(page1); 
}
const string messageText = "Do you want to navigate back in Main Tile Container?";
void Page_ButtonClick(object sender, ButtonEventArgs e) {
    if(e.Button == customBackButton) {
        if(MessageBox.Show(messageText, "Back", MessageBoxButtons.YesNo) == DialogResult.Yes)
            windowsUIView1.Controller.Activate(tileContainer1); // activate container
    }
} 
```

# sql-server - 如何从 SSIS 包中的“执行 Sql 任务”加载变量

> ID：15406424
> 
> 赞同：1
> 
> 时间：2013-03-14T10:15:23.203
> 
> 标签：sql-server, visual-studio, ssis

我有一些变量（在包级别，在数据流级别，没关系），我需要通过运行`Execute Sql Task`. 我添加了一个`Execute Sql Task`，我已经在归档中写了我的 sql 语句`SqlStatement`，我已经将其更改`ForcedExecutionValueType`为`string`. 现在我希望在`Execute Sql Task`执行时选择返回的返回值是我的变量的确切值。

```
 example: 

 Select employer_name from employers where id=1
 Returs="John Doe"

 value for @employer_name must be "John Doe" 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:23:28.470

您对该问题的更详细讨论有点难以理解，因此，如果我的以下步骤涵盖了您已经熟悉的项目，我深表歉意。

脚步：

1.  在 Control Flow 选项卡下，拖动一个 Execute SQL Task 并将其打开。
2.  选择左侧的常规。
3.  定义连接（基于在下面的连接管理器中创建的数据库源）。
4.  定义 SQL 语句。
5.  对于结果集，选择单行。
6.  选择左侧的结果集。
7.  选择添加按钮并注意上面添加了一条新记录。
8.  在新记录的结果名称列标题下，将“NewResultname”更改为“0”。
9.  在新记录的变量名称列标题下，选择您已经创建的现有用户变量或滚动到顶部并创建一个新变量。
10.  选择确定，您就完成了。

现在单独运行 Execute SQL Task 将填充该变量。确保您已验证 SQL 将只返回一个值而不会返回更多值。否则，为了安全起见，您需要修改您的 SQL 并在其中添加“TOP 1”。当需要多个值时，您可以应用使用“对象”数据类型定义的变量，并在执行 SQL 任务中使用“完整结果集”而不是“单行”。

希望这可以帮助。

# windows - 如何在 Windows xp 中检索 DEVPKEY_Device_BusReportedDeviceDesc 的值？

> ID：15406425
> 
> 赞同：0
> 
> 时间：2013-03-14T10:15:28.853
> 
> 标签：windows, windows-xp, driver, device-driver

[我可以根据 msdn 文档http://msdn.microsoft.com/en-us/library/windows/hardware/ff542369(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff542369(v=vs.85).aspx)调用 SetupDiGetDeviceProperty 来检索 DEVPKEY_Device_BusReportedDeviceDesc 的值。但此值仅在 Windows 7 和更高版本的 Windows 中可用。如何在 Windows xp 中检索 DEVPKEY_Device_BusReportedDeviceDesc 的值？该应用程序是一个win32服务，不是设备驱动程序。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:43:12.153

在 Windows 2000 和 XP 中等效的是[SetupDiGetDeviceRegistryProperty](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551967%28v=vs.85%29.aspx)。

# sql - 如何在存储过程中使用 WHILE？

> ID：15406426
> 
> 赞同：0
> 
> 时间：2013-03-14T10:15:30.197
> 
> 标签：sql, sql-server, tsql

我创建了这个脚本，允许在表中插入一些转储数据。当我执行这个 SPROC 并插入 @N 时，SPROC 会无限运行。

知道我做错了什么。

```
CREATE PROCEDURE CreateSampleData
    @N INT 
AS 
    DECLARE @row INT 
    SET @row = 1 

    DECLARE @randomGuid VARCHAR(36) 
    DECLARE @randomText VARCHAR 

    WHILE @row <= @N
      BEGIN 
      -- Set Random Values 
      SET @randomText = (SELECT LEFT(Cast(Newid() AS VARCHAR(36)), 20)) 
      SET @randomGuid = Newid()

      INSERT INTO [XXX].[dbo].[YYY] 
                  ([Id],
                   [eventid], 
                   [eventtitle], 
                   [day number], 
                   [day], 
                   [datetimestart], 
                   [datetimeend], 
                   [location], 
                   [staff], 
                   [uniquestudentreference], 
                   [reminder]) 
      VALUES      ( @randomGuid,
                    @randomText, 
                    @randomText, 
                    '2', 
                    'Monday', 
                    '08:50:00', 
                    '10:50:00', 
                    @randomText, 
                    @randomText, 
                    'Silvia', 
                    'n' ) 
  END 
GO 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T10:22:06.117

为什么要循环？一次性完成

```
 INSERT INTO [XXX].[dbo].[YYY] 
              ([Id],
               [eventid], 
               [eventtitle], 
               [day number], 
               [day], 
               [datetimestart], 
               [datetimeend], 
               [location], 
               [staff], 
               [uniquestudentreference], 
               [reminder]) 
  SELECT TOP (1000)
    NEWID(),
    randomText, 
    randomText, 
    '2', 
    'Monday', 
    '08:50:00', 
    '10:50:00', 
    randomText, 
    randomText, 
    'Silvia', 
    'n'
  FROM
     (SELECT LEFT(Cast(Newid() AS VARCHAR(36)), 20) AS randomText) X
     CROSS JOIN
     sys.columns c1
     CROSS JOIN
     sys.columns c2
     CROSS JOIN
     sys.columns c3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:17:17.317

你需要增加`@row`. 在你的`WHILE`陈述结束时，你应该写：

```
SET @row = @row+1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:19:40.697

你没有增加你的计数器变量，你应该添加：

`SET @row = @row + 1`

就在 END 子句之前

# symfony - symfony 2中的BaseURL

> ID：15406432
> 
> 赞同：1
> 
> 时间：2013-03-14T10:15:42.480
> 
> 标签：symfony, routes

我在 Symfony 2 中有一个应用程序。它部署在 IIS 服务器上。

问题是，我需要让它在多个 URL 上工作：

*   www.somedomain.com/myapp/app.php - 用于生产
*   www.somedomain.com/myappdev/app.php - 用于测试
*   myapp.localhost/app.php - 用于开发

我怎样才能做到这一点？我需要为资源（js、css 文件）正确生成 URL。同样在部署之后，生成的 URL 缺少 /myapp/ (/myappdev/) 段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:19:40.303

您可以通过将 /myappdev 添加到您的 app/config/routing.yml 文件中的前缀键为您的路由添加前缀。

如果您对资源使用相对 URL，那么您所在的域就不会出现问题，并且它可以在您放置的任何地方工作。

# android - Android：接近警报和电池消耗

> ID：15406435
> 
> 赞同：4
> 
> 时间：2013-03-14T10:15:49.227
> 
> 标签：android, android-location, proximity

根据与所需位置的距离，我可以自己实现一个接近警报，它将使用 requestSingleUpdate 并在请求另一个更新之前休眠一段时间。

我希望操作系统在接近警报机制中实现这种确切的行为，但我没有找到关于它的文档，我害怕按原样使用它，因为我需要长时间运行我的应用程序并节省电池是至关重要的。

您有什么有用的知识或建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:13:31.323

来自Greg Milette、Adam Stroud 的 **Professional Android Sensor Programming ：**![图书截图](../Images/69e95f41146c366d4a948695e91d9aa9.png)

我一次将执行上述模型：检查当前位置，根据与目的地的距离睡眠，直到当前位置足够近。

# gdb - 如何在调试器下列出在 boost::asio::io_service 中注册的处理程序？

> ID：15406446
> 
> 赞同：7
> 
> 时间：2013-03-14T10:16:17.800
> 
> 标签：gdb, boost-asio

给定正在运行的应用程序，我想提取有关当前注册的完整处理程序的信息。

Handler已经被A类注册。例如：

```
boost::asio::async_read(s, b, boost::bind(&A::F, this->shared_from_this(), boost::asio::placeholders::error, boost::asio::placeholders::bytes_transferred)); 
```

在调试器下，我可以访问适当的 io_service 变量。对于尚未完成的操作，如何计算 (A::F, this, s, b)。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-14T19:03:59.870

我想稍微扩大问题的范围，以涵盖我认为最终目标的替代方案：调试异步处理程序。

* * *

### 示例程序

为了通过示例显示调试，让我们从一个侦听端口 4321 的基本 UDP 回显服务器开始：

```
#include <boost/array.hpp>
#include <boost/asio.hpp>
#include <boost/bind.hpp>

using boost::asio::ip::udp;

class udp_echo
{
public:
  udp_echo(boost::asio::io_service& service,
           unsigned int port)
    : socket_(service, udp::endpoint(udp::v4(), port))
  {
    socket_.async_receive_from(
      boost::asio::buffer(buffer_), sender_,
      boost::bind(&udp_echo::handle_receive, this,
                  boost::asio::placeholders::error,
                  boost::asio::placeholders::bytes_transferred));
  }

  void handle_receive(const boost::system::error_code& error,
                      std::size_t bytes_transferred)
  {
    socket_.async_send_to(
      boost::asio::buffer(buffer_, bytes_transferred), sender_,
      boost::bind(&udp_echo::handle_send, this,
                  boost::asio::placeholders::error,
                  boost::asio::placeholders::bytes_transferred));
  }

  void handle_send(const boost::system::error_code& error,
                   std::size_t bytes_transferred)
  {
    socket_.close();  
  }

private:
  udp::socket socket_;
  boost::array<char, 128> buffer_;
  udp::endpoint sender_;
};

int main()
{
  boost::asio::io_service service;
  udp_echo echo(service, 4321);
  service.run();
} 
```

这个简单的程序有一个异步调用链：

```
udp_echo::udp_echo()
{
  socket_.async_receive_from(...); --.
}                                    |
             .-----------------------'
             v
void udp_echo::handle_receive(...)
{
  socket_.async_send_to(...);  ------.
}                                    |
             .-----------------------'
             v
void udp_echo::handle_send()
{
  socket_.close(); 
} 
```

* * *

### 处理程序跟踪

Boost 1.47 引入了[处理程序跟踪](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/overview/core/handler_tracking.html)。只需定义`BOOST_ASIO_ENABLE_HANDLER_TRACKING`，Boost.Asio 就会将调试输出（包括时间戳）写入标准错误流。运行程序，并通过 UDP 发送“hello world”产生以下输出：

```
@asio|1363273821.846895|0*1|socket@0xbf8c4e3c.async_receive_from // 1
@asio|1363273829.288883|>1|ec=system:0,bytes_transferred=12      // 2
@asio|1363273829.288931|1*2|socket@0xbf8c4e3c.async_send_to      // 3
@asio|1363273829.289013|<1|                                      // 4
@asio|1363273829.289026|>2|ec=system:0,bytes_transferred=12      // 5
@asio|1363273829.289035|2|socket@0xbf8c4e3c.close                // 6
@asio|1363273829.289075|<2|                                      // 7 
```

它可以逐行读取为：

1.  调用非处理程序 (0) `socket.async_receive_from()`，创建处理程序 1。
2.  输入处理程序 1`socket.async_receive_from()`没有错误并且已收到 12 个字节。
3.  处理程序 1`socket.async_receive_from()`调用`socket.async_send_to()`，创建处理程序 2。
4.  退出处理程序 1 `socket.async_receive_from()`。
5.  输入处理程序 2 `socket.async_send_to()`，没有错误，已发送 12 个字节。
6.  处理程序 2 调用`socket.close()`。
7.  退出处理程序 2 `socket.async_send_to()`。

并在视觉上映射到以下内容：

```
udp_echo::udp_echo()
{
  socket_.async_receive_from(...); --. // 1
}                                    |
             .-----------------------'
             v
void udp_echo::handle_receive(...)
{                                      // 2
  socket_.async_send_to(...);  ------. // 3
}                                    | // 4
             .-----------------------'
             v
void udp_echo::handle_send()
{                                      // 5
  socket_.close();                     // 6
}                                      // 7 
```

* * *

## 广发银行

通过 GDB 进行调试将需要挖掘多个层。它有助于了解 Boost.Asio 的一些实现细节。这里有几个概念：

*   `io_service`仅包含准备运行的处理程序。
*   通常`reactor`将包含工作操作，以及尚未准备好运行的完成处理程序的句柄。
*   `reactor`将向`io_service`. _

这是一个调试会话：

```
(gdb) bt
#0  0x00ab1402 in __kernel_vsyscall ()
#1  0x00237ab8 in __epoll_wait_nocancel () from /lib/libc.so.6
#2  0x080519c3 in boost::asio::detail::epoll_reactor::run (this=0x80560b0, 
    block=true, ops=...)
    at /opt/boost/include/boost/asio/detail/impl/epoll_reactor.ipp:392
#3  0x08051c2d in boost::asio::detail::task_io_service::do_run_one (
    this=0x8056030, lock=..., this_thread=..., ec=...)
    at /opt/boost/include/boost/asio/detail/impl/task_io_service.ipp:396
#4  0x08051e8a in boost::asio::detail::task_io_service::run (this=0x8056030, 
    ec=...)
    at /opt/boost/include/boost/asio/detail/impl/task_io_service.ipp:153
#5  0x08051f50 in boost::asio::io_service::run (this=0xbfffe818)
    at /opt/boost/include/boost/asio/impl/io_service.ipp:59
#6  0x08049a44 in main () at example.cpp:48
(gdb) frame 6
#6  0x08049a44 in main () at example.cpp:48
48        service.run(); 
```

首先，需要定位反应堆服务。向下转换需要发生，所以让我们使用调试器来定位一些类型：

```
(gdb) p service.service_registry_.init_keytab
init_key
init_key<boost::asio::datagram_socket_service<boost::asio::ip::udp> >
init_key< boost::asio::detail::epoll_reactor >
init_key<boost::asio::detail::task_io_service>
```

每个键都与一个特定的服务相关联，所有服务都维护在一个链表中`service.service_registry_`。类型信息与它们相关联，使我们能够识别所需的服务。

```
(gdb) set $service = service.service_registry_.first_service_
(gdb) p $service.key_.type_info_.__name
$1 = 0x8052b60
"N5boost4asio6detail14typeid_wrapperINS0_23datagram_socket_serviceINS0_2ip3udpEEEEE" 
```

那就是`boost::asio::datagram_socket_service<boost::asio::ip::udp>`，所以继续下一个：

```
(gdb) set $service = $service.next_
(gdb) p $service.key_.type_info_.__name
$2 = 0x8052cc0 "N5boost4asio6detail14typeid_wrapperINS1_13epoll_reactorEEE" 
```

`$service`现在指向反应堆服务。根据`init_key`type 参数向下转换服务：

```
(gdb) 设置 $service = *(' boost::asio::detail::epoll_reactor '*) $service
```

有工作的优秀处理程序位于反应器内的操作链接列表中：

```
(gdb) 设置 $ops = $service.registered_descriptors_.live_list_.op_queue_
(gdb) 设置 $op = $ops.front_
(gdb) p *$op
$3 = {<boost::asio::detail::task_io_service_operation> = {next_ = 0x0,
    func_ = 0x804c256
    < boost::asio::detail::reactive_socket_recvfrom_op<
    boost::asio::mutable_buffers_1, boost::asio::ip::basic_endpoint<
    boost::asio::ip::udp>, boost::_bi::bind_t<void,
    boost::_mfi::mf2<void, udp_echo, boost::system::error_code const&,
    unsigned int>, boost::_bi::list3<boost::_bi::value<udp_echo*>,
    boost::arg<1> (*)(), boost::arg<2> (*)()> > > ::
    do_complete(boost::asio::io_service::io_service_impl*,
    boost::asio::detail::epoll_reactor::descriptor_state::operation*,
    boost::system::error_code const&, size_t)>, task_result_ = 0}, ec_ = {
    m_val = 11, m_cat = 0x13b2c8}, bytes_transferred_ = 0, perform_func_ =
    0x80514c8 <boost::asio::detail::reactive_socket_recvfrom_op_base<
    boost::asio::mutable_buffers_1,  
    boost::asio::ip::basic_endpoint<boost::asio::ip::udp>
    >::do_perform(boost::asio::detail::reactor_op*)>}
```

需要另一个沮丧。强制`$op`转换为`func_`成员函数指针所属的类。

```
(gdb) 设置 $op = *(' boost::asio::detail::reactive_socket_recvfrom_op<
boost::asio::mutable_buffers_1, boost::asio::ip::basic_endpoint<
boost::asio::ip::udp>, boost::_bi::bind_t<void, boost::_mfi::mf2<
无效，udp_echo，boost::system::error_code const&，无符号整数>，
 boost::_bi::list3<boost::_bi::value<udp_echo*>,
 boost::arg<1> (*)(), boost::arg<2> (*)()> > > '*) $op
```

此操作包含所需的信息。

缓冲区：

```
(gdb) p $op.buffers_ 
$4 = {<boost::asio::mutable_buffer> = {data_ = 0xbfffe77c, 
    size_ = 128}, <No data fields>}
(gdb) p &echo.buffer_
$5 = (boost::array<char, 128u> *) 0xbfffe77c 
```

`this`实例：

```
(gdb) p $op.handler_.l_.a1_.t_ 
$6 = (udp_echo *) 0xbfffe768
(gdb) p &echo
$7 = (udp_echo *) 0xbfffe768 
```

成员函数指针：

```
(gdb) p $op.handler_.f_.f_
$8 = (void (udp_echo::*)(udp_echo *, const boost::system::error_code &, 
    unsigned int)) 0x80505b0 <
    udp_echo::handle_receive(boost::system::error_code const&, size_t)> 
```

套接字信息：

```
(gdb) p $op.socket_ 
$9 = 10
(gdb) p echo.socket_.implementation.socket_ 
$10 = 10 
```

在这种情况下，操作只知道本机套接字表示（文件描述符）。确定它是什么套接字的一种有用方法是查询 lsof。

```
$/usr/sbin/lsof -i -P | grep a.out 
a.out     4265 ghost   10u  IPv4 1166143       UDP *:4321 
```

因此，文件描述符 10 正在侦听 UDP 4321。

# jquery - Jquery，将元素聚焦一次，然后滚动到下一个&下一个&下一个

> ID：15406449
> 
> 赞同：2
> 
> 时间：2013-03-14T10:16:23.767
> 
> 标签：jquery, scroll

我在一个页面上显示许多图片。我想创建一个动画，将用户刚刚看到的图片放在屏幕中间`click`。然后，在任何`click`事件之后，我想显示下一张图片，直到用户离开这个演示模式。注意：我将 jquery scrollTo 脚本添加到我的代码中。

这是我到目前为止所做的：http: [//jsfiddle.net/qnQSP/3/](http://jsfiddle.net/qnQSP/3/)

HTML

```
<div id="galleries">

    <div id="pictures-content" class="1"><img src="http://www.sb-designs.co.uk/ckfinder/userfiles/images/free%20web%20hosting.jpg"></div>
    <div id="pictures-content" class="2"><img src="http://www.mastercreations.net/wp-content/uploads/2012/10/5.jpg"></div>
    <div id="pictures-content" class="3"><img src="http://www.sb-designs.co.uk/ckfinder/userfiles/images/free%20web%20hosting.jpg"></div>
    <div id="pictures-content" class="4"><img src="http://www.webdesign4essex.co.uk/images/essex_website_design.jpg"></div>
    <div id="pictures-content" class="5"><img src="http://www.mastercreations.net/wp-content/uploads/2012/10/5.jpg"></div>

</div> 
```

jQuery

```
 var next;
        var element_already_focus = 0;
        var oldcurrent = "";        

        $("#galleries #pictures-content").unbind("click");
        $("#galleries #pictures-content").bind("click", function(event) {
            // Count the number of pictures
            var max_number_of_pictures= $('#galleries #pictures-content').length;
    //          console.log("max_number_of_pictures: "+max_number_of_pictures); 

            // Get the binding element class number 
                var picture_number = $(this).attr('class');
    //          console.log("picture_number: "+picture_number);

            // Save the element inside the current variable
                current=$(this);

            // Do a loop to go to the top picture when  
            if(picture_number==max_number_of_pictures)
            {
                next = $("#galleries .1");
            } else 
            { 
                next = $(this).next();
            }

            // Do a loop to go to the bottom picture    
            if(picture_number==1){
                previous = $("#galleries ."+max_number_of_pictures);
            } else { previous = $(this).prev();}

    //      console.log("current: "+$(this).attr("class"));
            if(oldcurrent != "")
            {   
                console.log("old: "+oldcurrent.attr("class"));
// Doing some test
                class_test = parseInt(oldcurrent.attr("class"));
                class_test = parseInt(class_test)+parseInt(1);
                console.log("old: "+class_test);
            }

            console.log("previous: "+previous.attr("class"));
            console.log("current: "+current.attr("class"));
            console.log("next: "+next.attr("class"));

    if(oldcurrent == "")
    {
        $("body").scrollTo(current, 800);
        next = 0;
        console.log("What we do:"+next);
    }
    else{
    // If the element that we are binding have the same class as the old binding element (previous)
    // We are redirecting the user to the next picture
            console.log("oldcurrent "+oldcurrent.attr("class"));
            console.log("current: "+current.attr("class"));
            console.log("next: "+next.attr("class"));

    //   if((oldcurrent.attr("class"))==($(this).attr("class"))||(class_test)==(next.attr("class"))) {
       if((oldcurrent.attr("class"))==(current.attr("class"))||(class_test)==(next.attr("class"))) {   
          $("body").scrollTo(next, 800);    
          next = 1;
          console.log("What we do:"+next);
      }else{
          $("body").scrollTo(current, 800);
          next = 0;
          console.log("What we do:"+next);
      }     
    }

      oldcurrent=current;

        }); 
```

我的问题：我必须在一张图片上单击两次才能转到下一张。如果我删除了条件，当我离开演示模式时，我将无法对焦另一张照片。

我想我必须在用户处于演示模式（已经单击图片）时定义一个状态，并在他通过移动停止演示模式时删除此状态。

有人有任何想法或解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:52:30.677

单击时只需验证图像是否在渲染视图内。如果是，那么您可以假设单击是滚动到下一个图像。

您可以使用`$(yourImage).position().top`来了解图像的开始位置。并`$(yourImage).height()`知道它的高度。

```
var imageTop =  $(yourImage).position().top,
    imageHeight = $(yourImage).height(),
    windowTop = $(yourImage).height(),
    windowHeight = $(window).height();

if(imageTop>windowTop && top+height < windowTop+windowHeight){
   Scroll to the next one
} 
```

或者，如果您希望图像始终贴在顶部：

```
if(imageTop==windowTop){
   Scroll to the next one
} 
```

+1 用于链接小提琴

# grails - Activiti BPM 初学者指南？

> ID：15406455
> 
> 赞同：3
> 
> 时间：2013-03-14T10:16:39.377
> 
> 标签：grails, business-process-management, activiti, workflow-engine

我是 Activiti BPM 的初学者，谁能推荐一个好的网站（/视频）来配置和学习它..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:19:15.053

我记得我记得曼宁有一本书。

是的，这是一个 [Activity in Action](http://www.manning.com/rademakers2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-10T06:19:56.020

你也可以查看这本书《Activiti 5.x Business Process Management Beginner's Guide》。

# extjs - 当 ExtJS 文档说一个特性“需要 core.css”时，这是什么意思？

> ID：15406465
> 
> 赞同：0
> 
> 时间：2013-03-14T10:17:05.293
> 
> 标签：extjs

当 ExtJS 文档说一个特性“需要 core.css”时，这是什么意思？

`core.css`我在 ExtJS 发行版中找不到任何地方。

在 Google 上搜索将我指向另一个名为 GXT 的库。这是我应该去`core.css`的地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:04:17.267

Ext 使用预处理器从多个源文件编译 .css 文件。他们所指的“核心” css 规则是从`path_to_extjs/resources/themes/stylesheets/ext4/default/core/_core.scss`

更多信息[在](http://docs.sencha.com/ext-js/4-1/#!/guide/theming)文档中。

# delphi - 为什么我在 GetExtendedTcpTable 中的连接状态为 0

> ID：15406467
> 
> 赞同：2
> 
> 时间：2013-03-14T10:17:17.363
> 
> 标签：delphi

我想在 Delphi 7 中通过 GetExtendedTcpTable 查看 TCP 和 UDP 协议的 IPV6 连接。我已经编写了代码来显示连接信息。问题是我的连接状态为 "0" 。据我阅读，有效状态为 1-12。下面是我的代码，谁能指出错误。

```
const
  ANY_SIZE    = 1;

type
  PTMib_TCP6Row = ^TMib_TCP6Row;
  TMib_TCP6Row = packed record
    dwState         : DWORD ;
    LocalAddr       : IN6_ADDR    ;
    dwLocalScopeId  : DWORD       ;
    dwLocalPort     : DWORD       ;
    RemoteAddr      : IN6_ADDR    ;
    dwRemoteScopeId : DWORD       ;
    dwRemotePort    : DWORD       ;
    dwProcessId     : DWORD       ;
  end;

  PTMIB_TCP6TABLE = ^TMIB_TCP6TABLE;
  TMIB_TCP6TABLE = packed record
    dwNumEntries : DWORD;
    Table: array[0..ANY_SIZE - 1] of TMib_TCP6Row;
  end;

function GetTCPEntries: Boolean;
var
  tcpTable1: PTMIB_TCP6TABLE;
  dwSize1, dwSize2, dwSize3, I: DWORD;             
begin
  Result := False;
  dwSize1 := 0;
  dwSize2 := 0;
  dwSize3 := 0;
  if GetExtendedTcpTable(nil, @dwSize1, False, AF_INET6, TCP_TABLE_OWNER_PID_ALL, 0) = ERROR_INSUFFICIENT_BUFFER then
  begin
    GetMem(tcpTable1, dwSize1);
    GetExtendedTcpTable(tcpTable1, @dwSize1, False, AF_INET6, TCP_TABLE_OWNER_PID_ALL, 0);
    dwSize2 := tcpTable1^.dwNumEntries;
    for i := 0 to dwSize2-1 do
    begin            
      //Form1.UpdateLog('State of connection = ' + IntTostr(tcpTable1.Table[i].dwState)  + #13#10);
    end;
    FreeMem(tcpTable1, dwSize1);
  end;
end; 
```

dwState 在我的例子中是 0。

我已经看到了 sysinternals 程序“TCPView.exe”的输出，它将连接状态显示为“正在侦听”，所以我的机器没有任何问题。

帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:42:49.143

`AF_INET6`根据文档，您通过时返回的结构似乎`TCP_TABLE_OWNER_PID_ALL`是[`MIB_TCP6ROW_OWNER_PID`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa366896.aspx).

但是该结构看起来与您的`TMib_TCP6Row`. 这就是为什么您从`TMib_TCP6Row`记录中读出的值不是您所期望的。

阅读[`GetExtendedTcpTable`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365928.aspx). 在`AF_INET6`表中，它[`MIB_TCP6TABLE_OWNER_PID`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa366905.aspx)列为与关联的结构`TCP_TABLE_OWNER_PID_ALL`。并且`MIB_TCP6TABLE_OWNER_PID`有一个数组`MIB_TCP6ROW_OWNER_PID`。

底线是您在界面一侧使用的记录与另一侧使用的结构不匹配。

* * *

其他一些评论：

*   打包这些记录是不正确的。C++ 头文件不这样做，而是使用对齐的结构。对齐的结构是常态。在与 Windows API 交互时，结构将被对齐通常是一个安全的选择。
*   您也忽略了`GetExtendedTcpTable`在您进行的第二次调用中检查的返回值。

# html - 如何使用 Gradle FindBugs 插件生成 HTML 输出

> ID：15406469
> 
> 赞同：50
> 
> 时间：2013-03-14T10:17:26.990
> 
> 标签：html, gradle, findbugs

使用[Gradle FindBugs 插件](http://www.gradle.org/docs/current/userguide/findbugs_plugin.html)，如何生成 HTML 格式的输出？

[FindBugsExtension](http://www.gradle.org/docs/current/dsl/org.gradle.api.plugins.quality.FindBugsExtension.html)确实需要设置一些配置。

```
findbugs {
    toolVersion = "2.0.1"
    sourceSets = [sourceSets.main]
    ignoreFailures = true
    reportsDir = file("$project.buildDir/findbugsReports")
    effort = "max"
    reportLevel = "high"
    visitors = ["FindSqlInjection", "SwitchFallthrough"]
    omitVisitors = ["FindNonShortCircuit"]
    includeFilter = file("$rootProject.projectDir/config/findbugs/includeFilter.xml")
    excludeFilter = file("$rootProject.projectDir/config/findbugs/excludeFilter.xml")
} 
```

但是没有**输出**属性设置为 findbugs anttask。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-03-14T11:44:13.293

只能在`FindBugs` *任务*上配置报告。例如：

```
tasks.withType(FindBugs) {
    reports {
        xml.enabled = false
        html.enabled = true
    }
} 
```

其他代码质量插件（Checkstyle、PMD 等）也是如此。

# css - 在 magento 管理面板中添加新字体

> ID：15406472
> 
> 赞同：0
> 
> 时间：2013-03-14T10:17:34.787
> 
> 标签：css, magento, content-management-system, magento-1.7

我们在magento的文本编辑器中有可用的字体列表，我们可以使用它来创建cms页面。我需要添加一个新字体，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:43:33.720

您可以通过 tiny_mce editor_template.js 文件添加字体选项：

文件：js\tiny_mce\themes\advanced\editor_template.js

变量：theme_advanced_fonts

[Tinymce 配置](http://www.tinymce.com/wiki.php/Configuration%3atheme_advanced_fonts)

# linux - 使用 awk 从两个文件写入一个两列文件

> ID：15406475
> 
> 赞同：4
> 
> 时间：2013-03-14T10:17:49.583
> 
> 标签：linux, bash, shell, unix, awk

我有两个文件，每个文件一列

```
1
2
3 
```

和

```
4
5
6 
```

我想编写一个包含两个元素的唯一文件

```
1 4
2 5
3 6 
```

我认为使用 awk 应该非常简单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T10:22:40.460

你可以试试`paste -d ' ' <file1> <file2>`。（没有`-d ' '`分隔符将是制表符。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T10:50:48.383

`paste`对于给出的示例可以正常工作，但它不能很好地处理可变长度的行。一个很好的鲜为人知的 core-util`pr`提供了一个更灵活的解决方案：

```
$ pr -mtw 4 file1 file2
1 4
2 5
3 6 
```

可变长度示例：

```
$ pr -mtw 22 file1 file2
10         4
200        5
300,000,00 6 
```

* * *

既然你问`awk`这里是一种方式：

```
$ awk '{a[FNR]=a[FNR]$0" "}END{for(i=1;i<=length(a);i++)print a[i]}' file1 file2
1 4 
2 5 
3 6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T11:27:20.680

使用`awk`

```
awk 'NR==FNR { a[FNR]=$0;next } { print a[FNR],$0 }' file{1,2} 
```

### 解释：

*   `NR==FNR`将确保我们的第一个操作语句仅针对第一个文件运行。
*   `a[FNR]=$0`有了这个，我们将第一个文件插入到以行号为索引的数组中
*   一旦第一个文件完成，我们将进行第二个动作
*   在这里，我们打印第一个文件的每一行以及第二个文件

# c# - 在 Windows XP 上部署 ClickOnce

> ID：15406483
> 
> 赞同：1
> 
> 时间：2013-03-14T10:18:05.573
> 
> 标签：c#, visual-studio, windows-xp, clickonce

我正在尝试在干净的 Windows XP 机器上安装我的 C# 应用程序。该程序需要 .NET Framework 3.5，所以我在`prerequisites`. 该应用程序在 Windows 7 机器上运行良好，但在 Windows XP 上运行失败并出现以下错误：

```
ERROR DETAILS
    Following errors were detected during this operation.
    * [3/14/2013 11:11:26 AM] System.Deployment.Application.InvalidDeploymentException (ManifestParse)
        - Exception reading manifest from file://tsclient/D/publish/Application%20Files/LivePigeonClient_1_0_0_16/LivePigeonClient.application: the manifest may not be valid or the file could not be opened.
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Application.ManifestReader.FromDocument(String localPath, ManifestType manifestType, Uri sourceUri)
            at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestDirectBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options, ServerInformation& serverInformation)
            at System.Deployment.Application.DownloadManager.DownloadDeploymentManifestBypass(SubscriptionStore subStore, Uri& sourceUri, TempFile& tempFile, SubscriptionState& subState, IDownloadNotification notification, DownloadOptions options)
            at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
            at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)
        --- Inner Exception ---
        System.Deployment.Application.InvalidDeploymentException (SignatureValidation)
        - Manifest XML signature is not valid.
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Application.Manifest.AssemblyManifest.ValidateSignature(Stream s)
            at System.Deployment.Application.ManifestReader.FromDocument(String localPath, ManifestType manifestType, Uri sourceUri)
        --- Inner Exception ---
        System.Security.Cryptography.CryptographicException
        - SignatureDescription could not be created for the signature algorithm supplied.
        - Source: System.Security
        - Stack trace:
            at System.Security.Cryptography.Xml.SignedXml.CheckSignedInfo(AsymmetricAlgorithm key)
            at System.Security.Cryptography.Xml.SignedXml.CheckSignatureReturningKey(AsymmetricAlgorithm& signingKey)
            at System.Deployment.Internal.CodeSigning.SignedCmiManifest.Verify(CmiManifestVerifyFlags verifyFlags)
            at System.Deployment.Application.Manifest.AssemblyManifest.ValidateSignature(Stream s) 
```

一个`InvalidDeploymentException (SignatureValidation)`

是什么导致了这个问题？

### 应用清单

```
<?xml version="1.0" encoding="utf-8"?>
<asmv1:assembly xsi:schemaLocation="urn:schemas-microsoft-com:asm.v1 assembly.adaptive.xsd" manifestVersion="1.0" xmlns:asmv1="urn:schemas-microsoft-com:asm.v1" xmlns="urn:schemas-microsoft-com:asm.v2" xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:xrml="urn:mpeg:mpeg21:2003:01-REL-R-NS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:asmv3="urn:schemas-microsoft-com:asm.v3" xmlns:dsig="http://www.w3.org/2000/09/xmldsig#" xmlns:co.v1="urn:schemas-microsoft-com:clickonce.v1" xmlns:co.v2="urn:schemas-microsoft-com:clickonce.v2">
  <assemblyIdentity name="LivePigeonClient.application" version="1.0.0.16" publicKeyToken="9c18f07266746296" language="neutral" processorArchitecture="x86" xmlns="urn:schemas-microsoft-com:asm.v1" />
  <description asmv2:publisher="LivePigeonClient" asmv2:product="LivePigeonClient" xmlns="urn:schemas-microsoft-com:asm.v1" />
  <deployment install="true" mapFileExtensions="true" co.v1:createDesktopShortcut="true">
    <deploymentProvider codebase="http://nb-stage/LivePigeonClient/LivePigeonClient.application" />
  </deployment>
  <dependency>
    <dependentAssembly dependencyType="install" codebase="Application Files\LivePigeonClient_1_0_0_16\LivePigeonClient.exe.manifest" size="19770">
      <assemblyIdentity name="LivePigeonClient.exe" version="1.0.0.16" publicKeyToken="9c18f07266746296" language="neutral" processorArchitecture="x86" type="win32" />
      <hash>
        <dsig:Transforms>
          <dsig:Transform Algorithm="urn:schemas-microsoft-com:HashTransforms.Identity" />
        </dsig:Transforms>
        <dsig:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
        <dsig:DigestValue>YcOGziTuwXQ5l5/mkvEF3puhg/M=</dsig:DigestValue>
      </hash>
    </dependentAssembly>
  </dependency>
<publisherIdentity name="CN=VANHULTEN\max" issuerKeyHash="ba68cf2261b7dec8653727cbceeb3f0f3817bb37" /><Signature Id="StrongNameSignature" xmlns="http://www.w3.org/2000/09/xmldsig#"><SignedInfo><CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" /><SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha256" /><Reference URI=""><Transforms><Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" /><Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" /></Transforms><DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha256" /><DigestValue>aYws5APsQnYt1TNpwaT6ZcoySBiM+HBSH7d0l8/FEmE=</DigestValue></Reference></SignedInfo><SignatureValue>vm7Tjd/SFZK0WT1YGgEqWP6QOgJ3U26D/+32LrxmjMysNlfuJ21MjAmjiP3Hcd4fuDX6QJ7ctH4+Vrlx+kXrrfnVcceBbhAAph4uosfo8qKpwCHbfp/J0leQ3DzT61Sd4EE//wZW6qJcpgW8qqn/id7AH/jAcCbrpOIufLXc7yU=</SignatureValue><KeyInfo Id="StrongNameKeyInfo"><KeyValue><RSAKeyValue><Modulus>wj4ZM4ud3sPlAxopNQiYHeg4fg+3TSEHWIWrjNV47F3KePb+nOtYblz7nEzplq5HPmX5gyoauqpmelyB453l5N6Hd6WfHuyZpQB6ESxVuiI9XS3L/WXMrazRj2EeExnpEdslVJx32lInreg/rwDHz59fOP1G+hKnzgoO8ViAgGU=</Modulus><Exponent>AQAB</Exponent></RSAKeyValue></KeyValue><msrel:RelData xmlns:msrel="http://schemas.microsoft.com/windows/rel/2005/reldata"><r:license xmlns:r="urn:mpeg:mpeg21:2003:01-REL-R-NS" xmlns:as="http://schemas.microsoft.com/windows/pki/2005/Authenticode"><r:grant><as:ManifestInformation Hash="6112c5cf9774b71f5270f88c184832ca65faa4c16933d52d7642ec03e42c8c69" Description="" Url=""><as:assemblyIdentity name="LivePigeonClient.application" version="1.0.0.16" publicKeyToken="9c18f07266746296" language="neutral" processorArchitecture="x86" xmlns="urn:schemas-microsoft-com:asm.v1" /></as:ManifestInformation><as:SignedBy /><as:AuthenticodePublisher><as:X509SubjectName>CN=VANHULTEN\max</as:X509SubjectName></as:AuthenticodePublisher></r:grant><r:issuer><Signature Id="AuthenticodeSignature" xmlns="http://www.w3.org/2000/09/xmldsig#"><SignedInfo><CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" /><SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha256" /><Reference URI=""><Transforms><Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" /><Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" /></Transforms><DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha256" /><DigestValue>CdT1rv1rwUXqtJn0L3bDBoocdBFyTmyn0kcJMsw0Ioo=</DigestValue></Reference></SignedInfo><SignatureValue>d/fsB1cfPn+29iEB3ltgkoQ4HE2T/wxQzJAhKIxCDM6oZLjNnvATM2stOvWs8nvdINFQEtef19aMjaYIAu9E00oncYvy+Sxv+qtNM2AEpTkRKQTrWHCR7DymiK4JPRmT+ixKwNCWwxMIl6LL/12f7o57COd+5cM1+FfgC6ew5TU=</SignatureValue><KeyInfo><KeyValue><RSAKeyValue><Modulus>wj4ZM4ud3sPlAxopNQiYHeg4fg+3TSEHWIWrjNV47F3KePb+nOtYblz7nEzplq5HPmX5gyoauqpmelyB453l5N6Hd6WfHuyZpQB6ESxVuiI9XS3L/WXMrazRj2EeExnpEdslVJx32lInreg/rwDHz59fOP1G+hKnzgoO8ViAgGU=</Modulus><Exponent>AQAB</Exponent></RSAKeyValue></KeyValue><X509Data><X509Certificate>MIIBzTCCATagAwIBAgIQHYBpoynYcYpB1zAtPuky+zANBgkqhkiG9w0BAQsFADAlMSMwIQYDVQQDHhoAVgBBAE4ASABVAEwAVABFAE4AXABtAGEAeDAeFw0xMzAyMjgxMDAyNThaFw0xNDAyMjgxNjAyNThaMCUxIzAhBgNVBAMeGgBWAEEATgBIAFUATABUAEUATgBcAG0AYQB4MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCPhkzi53ew+UDGik1CJgd6Dh+D7dNIQdYhauM1XjsXcp49v6c61huXPucTOmWrkc+ZfmDKhq6qmZ6XIHjneXk3od3pZ8e7JmlAHoRLFW6Ij1dLcv9ZcytrNGPYR4TGekR2yVUnHfaUiet6D+vAMfPn184/Ub6EqfOCg7xWICAZQIDAQABMA0GCSqGSIb3DQEBCwUAA4GBAGIPyDRw+3ORyEMFenNwwOKY2pb5XJ4+VfWZ1qsajyvEOxhQRIsQc04XhSeTLqa2hWumXHSQ/GgKMf4cR03cMBRwIVQxY03YmnoiLxqfkbzSAQMLrSKp7jychp+oODkuIKBruLdNLB/xlAv09dJac28sUG6p+8uAObL9HZDkhgr6</X509Certificate></X509Data></KeyInfo></Signature></r:issuer></r:license></msrel:RelData></KeyInfo></Signature></asmv1:assembly> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T01:28:49.913

Windows XP 机器是否安装了 SP-3，并且所有的 Windows 更新？另外，是否安装了 .NET 3.5？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T17:23:05.073

更改签名算法。右键项目->属性->签名，重新选择或重新创建证书。之后，签名算法将更改为 sha1RSA。

[http://social.msdn.microsoft.com/Forums/windows/en-US/f5b934d2-e8b9-4401-b038-b84aefbdf836/clickonce-exception-reading-manifest?forum=winformssetup](http://social.msdn.microsoft.com/Forums/windows/en-US/f5b934d2-e8b9-4401-b038-b84aefbdf836/clickonce-exception-reading-manifest?forum=winformssetup)

# java - 尝试在 tomcat 中进行数据源 JNDI 查找时出现空指针异常

> ID：15406486
> 
> 赞同：0
> 
> 时间：2013-03-14T10:18:14.470
> 
> 标签：java, jakarta-ee

我尝试通过 DatabaseSource JNDI 查找建立数据库连接。我按照 Tomcat 网站中的说明进行了如下操作

我将资源添加到 server.xml

```
 <Resource name="jdbc/myDB" auth="Container"
              type="javax.sql.DataSource"/> 
<ResourceParams name="jdbc/myDB">
  <parameter>
    <name>factory</name>
    <value>org.apache.commons.dbcp.BasicDataSourceFactory</value>
  </parameter>
  <parameter>
    <name>driverClassName</name>
    <value>oracle.jdbc.OracleDriver</value>
  </parameter>
  <parameter>
    <name>url</name>
    <value>jdbc:oracle:thin:@111.111.111.111:1234:DBNME</value>
  </parameter>
  <parameter>
    <name>username</name>
    <value>Dobby</value>
  </parameter>
  <parameter>
    <name>password</name>
    <value>pwd</value>
  </parameter>
  <parameter>
    <name>maxActive</name>
    <value>20</value>
  </parameter>
  <parameter>
    <name>maxIdle</name>
    <value>10</value>
  </parameter>
  <parameter>
    <name>maxWait</name>
    <value>-1</value>
  </parameter>
</ResourceParams> 
```

web.xml

```
 <resource-ref>
    <description>MY DataBase</description>
    <res-ref-name>jdbc/myDB</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
    </resource-ref> 
```

在代码中

```
Context initContext = new  InitialContext();
            DataSource ds = (DataSource)initContext.lookup("java:/comp/env/jdbc/myDB");
            Connection con =  ds.getConnection(); 
```

我收到此错误

```
org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for connect URL 'null'
    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1452)
    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createDataSource(BasicDataSource.java:1371)
    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
    at com.sample.XML.doGet(XML.java:39)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException
    at sun.jdbc.odbc.JdbcOdbcDriver.getProtocol(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcDriver.knownURL(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcDriver.acceptsURL(Unknown Source)
    at java.sql.DriverManager.getDriver(Unknown Source)
    at org.apache.tomcat.dbcp.dbcp.BasicDataSource.createConnectionFactory(BasicDataSource.java:1437)
    ... 21 more 
```

我的 tomcat 库中有 OJDBC14.jar。

我在stackoverflow中发现了同样的问题，但那里提供的解决方案对我不起作用。这就是我再次发布它的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:23:18.620

尝试：

```
datasource = (DataSource) initialContext.lookup( "java:/comp/env/jdbc/myDB" ); 
```

正如您资源名称所述`jdbc/myDB`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:37:00.550

你可以尝试把xml

```
 <resource-ref>     
    <description>     
     </description>     
    <res-ref-name></res-ref-name>     
    <res-type></res-type>     
    <res-auth></res-auth>     
  </resource-ref> 
```

在 tomcat Server.xml 中标记并重新启动服务器，看看这是否解决了您的问题？

# xml - 如何还原 XML 转义字符（XML unescape）？

> ID：15406487
> 
> 赞同：5
> 
> 时间：2013-03-14T10:18:19.547
> 
> 标签：xml, scala

我希望 Scala 函数`&`在给定 input 时返回 String `&amp;`，对于所有其他 XML 转义字符也是如此。

我尝试使用`xml.Unparsed`，可能以错误的方式使用，它没有给出我想要的输出：

```
scala> val amp = '&'
amp: Char = &

scala> <a>{amp}</a>.toString
res0: String = <a>&amp;</a>

scala> import scala.xml._
import scala.xml._

scala> <a>{amp}</a>.child(0)
res1: scala.xml.Node = &amp;

scala> xml.Unparsed(<a>{amp}</a>.child(0).toString)
res2: scala.xml.Unparsed = &amp; 
```

我也尝试过使用`xml.Utility.unescape`，但它根本没有给出任何输出：

```
scala> val sb = new StringBuilder
sb: StringBuilder = 

scala> xml.Utility.unescape("&amp;", sb)
res0: StringBuilder = null

scala> sb.toString
res1: String = ""

scala> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T11:10:35.393

如果您只想从 XML 对象中获取`text`未转义的字符串，您的朋友是：

```
scala> val el = <a>{amp}</a>
el: scala.xml.Elem = <a>&amp;</a>
scala> el.child(0)
res4: scala.xml.Node = &amp;
scala> el.child(0).text
res5: String = & 
```

这个的实现在[`scala.xml.EntityRef`](http://www.scala-lang.org/api/current/index.html#scala.xml.EntityRef). 获得一个完全符合您要求的函数并不是非常简单，因为该库不进行文本解析（它由 Java SAX 解析器完成），因此您首先需要将您的`"&amp;"`变成一个`EntityRef`以便您可以调用它，考虑到实现的简单程度，这似乎是一种巨大的浪费`text`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T10:19:16.933

我在 scala.xml.Utility 中没有找到任何东西......我用这个快速而肮脏地做到了：

```
def unescape(text: String): String = {
  def recUnescape(textList: List[Char], acc: String, escapeFlag: Boolean): String = {
    textList match {
      case Nil => acc
      case '&' :: tail => recUnescape(tail, acc, true)
      case ';' :: tail if (escapeFlag) => recUnescape(tail, acc, false)
      case 'a' :: 'm' :: 'p' :: tail if (escapeFlag) => recUnescape(tail, acc + "&", true)
      case 'q' :: 'u' :: 'o' :: 't' :: tail if (escapeFlag) => recUnescape(tail, acc + "\"", true)
      case 'l' :: 't' :: tail if (escapeFlag) => recUnescape(tail, acc + "<", true)
      case 'g' :: 't' :: tail if (escapeFlag) => recUnescape(tail, acc + ">", true)
      case x :: tail => recUnescape(tail, acc + x, true)
      case _ => acc
    }
  }
  recUnescape(text.toList, "", false)
} 
```

# android - 处理程序不将数据发送回 onActivityResult

> ID：15406489
> 
> 赞同：1
> 
> 时间：2013-03-14T10:18:22.507
> 
> 标签：android, android-intent, android-activity, handler, activity-finish

现在我已经尝试了 2 个功能第一个（如下），工作并且我在启动此活动的活动中获取数据：

```
private void updateView() {
    Session session = Session.getActiveSession();
    if (session.isOpened()) {
        if (first) {
            if (session.getAccessToken() != null) {
                LogService.log("session", "session.getAccessToken(): " + session.getAccessToken());
            }
            Intent result = new Intent();
            result.putExtra("FB_DATA", new String[] { "1", "2", "userNume", "userPrenume" });
            FacebookLoginPage.this.setResult(Activity.RESULT_OK, result);
            FacebookLoginPage.this.finish()
            first = false;
        }
    }
} 
```

现在是几秒钟，从 facebook 获取数据，然后将其发送到调用意图的处理程序。这总是关闭应用程序。正在等待结果的活动的 onDestroy 方法已关闭，我不明白为什么：

```
 private void updateView() {
    Session session = Session.getActiveSession();
    if (session.isOpened()) {
        if (first) {
            if (session.getAccessToken() != null) {
                LogService.log("session", "session.getAccessToken(): " + session.getAccessToken());
            }
            Request.executeMeRequestAsync(session, new GraphUserCallback() {
                @Override
                public void onCompleted(final GraphUser user, Response response) {
                    handler.sendMessage(handler.obtainMessage(1, user));
                }
            });
            first = false;
        }
    }
}

Handler handler = new Handler() {

    @Override
    public void handleMessage(Message msg) {
        GraphUser user = (GraphUser) msg.obj;
        if (user != null) {
            LogService.log("user email", "User=" + user);
            String userEmail = (String) user.getProperty("email");
            String id = (String) user.getId();
            String userNume = (String) user.getLastName();
            String userPrenume = (String) user.getFirstName();
            LogService.log("user email", userEmail + "||name: " + userNume + "|| prenume: " + userPrenume + "|| password: " + id);
            Intent result = new Intent();
            result.putExtra("FB_DATA", new String[] { id, userEmail, userNume, userPrenume });
            FacebookLoginPage.this.setResult(Activity.RESULT_OK, result);
        } else {
            FacebookLoginPage.this.setResult(Activity.RESULT_CANCELED);
        }
        System.out.println("----------------1");
        FacebookLoginPage.this.finish();
        System.out.println("----------------2");

    }
}; 
```

现在 logcat 会这样说（我已经更改了电子邮件、姓名、名字和密码）：

```
03-14 12:11:29.301: I/user email(7119): email@yahoo.com||name: Name|| prenume: FirstName|| password: PASSWORD
03-14 12:11:29.301: I/System.out(7119): ----------------1
03-14 12:11:29.305: I/System.out(7119): ----------------2
03-14 12:11:29.313: I/Launcher(2610): onResume(). mIsNewIntent : false
03-14 12:11:29.313: I/Launcher(2610): onResume() ended
03-14 12:11:29.321: I/Launcher(2610): onWindowFocusChanged(true)
03-14 12:11:29.395: I/System.out(7119): ---------------LoginActivity.onDestroy() 
```

我不明白 logcat 的最后 4 行是什么。带有 I/Launcher 的不是我的代码。最后一行，是调用此活动的活动的 ondestroy 方法，`StartActivityForResult`它不应该关闭，至少在进入`OnActivityResult`函数之前不应该关闭。

# jmeter - 使用 Jmeter 进行耐久性测试

> ID：15406499
> 
> 赞同：0
> 
> 时间：2013-03-14T10:19:06.460
> 
> 标签：jmeter, performance-testing

我是 Jmeter 的新手，并试图了解使用 Jmeter 可以实现的一切。我想使用 Jmeter 对应用程序执行耐久性或浸泡测试，即我想为特定数量的用户运行特定脚本 3 小时。我可以使用哪些所有选项以及监视结果的最佳可用侦听器是什么？

请帮忙。如果我在开始浸泡测试之前遗漏了我应该知道的任何事情，请补充一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:54:45.530

要设置用户数量和测试的运行时间，您可以使用*Thread Group*。通过选中*Scheduler*复选框并指定*Duration*来设置运行时。

在 JMeter 的原始听众中，我发现自己最常使用简单的*Summary Report*。但是[JMeter Plugins](https://code.google.com/p/jmeter-plugins/)提供了额外的侦听器，这可能会更好，这取决于您要测量的内容。JMeter 插件还提供了额外的线程组，您可以在其中指定例如随时间增加的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:14:46.587

使用线程组来设置您的用户数量和测试的持续时间（使用线程组的调度程序）。

然后添加执行测试所需的所有采样器和逻辑控制器。接下来，添加一个摘要报告侦听器以获取您的结果的概述（最小/最大/平均值等），并添加一个查看结果树侦听器以获取您的测试计划所采取的每个步骤的概述。这个 Tree 监听器非常适合实际查看 jmeter 在做什么，并调试您的测试计划。

顺便说一句：如果你添加一个 HTTP Request Defaults 对象，你可以在那里设置你的 URL 和选项，并且不需要再次将它添加到每个采样器。如果您开始使用正则表达式提取器等，尤其是它的魅力。

# android - 在按钮上显示图像（或媒体）单击随机更改布局

> ID：15406504
> 
> 赞同：0
> 
> 时间：2013-03-14T10:19:21.120
> 
> 标签：android, android-layout, random

我想随机显示 5 个 xml 布局，并且我会在单击每个出现的 xml 文件的相应按钮时将它们随机播放。到目前为止，下面的代码工作得非常好。---- *****我在 xml 文件的每次随机播放上都设置了 0.75 秒的延迟。在这个延迟中，我有声音可以播放。我真的不知道如何实现这一点.在下面的代码中，我使用了 Switch-Case ，但它不起作用。我的要求是如果我单击 xml file1 上的按钮，我想播放 Sound1，如果 Button 来自 Xml 文件 5，我想播放相应的 Sound5 等等....像这样持续 0.75 秒并移动到下一个 XML 文件并重复循环。**** ----

```
public class ReceivingActivity extends Activity{

    Random random = new Random();
    Handler handler = new Handler();
    private int mPosition = 0;
    private Handler mHandler = new Handler();
    private List<Integer> mLayouts;
    private Button mButton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
                mLayouts = new ArrayList<Integer>();
                mLayouts.add(R.layout.first);
                mLayouts.add(R.layout.second);
                mLayouts.add(R.layout.third);
                mLayouts.add(R.layout.fourth);
                mLayouts.add(R.layout.fifth);

                Collections.shuffle(mLayouts);
                setContentView(mLayouts.get(mPosition));

                mButton = (Button)findViewById(R.id.btnid);
                mButton.setOnClickListener(mListener);
                mPosition++;
    }

    private OnClickListener mListener = new OnClickListener() {

        @Override
        public void onClick(View v) {

            // TODO Auto-generated method stub
            mHandler.postDelayed(new Runnable() {

                @Override
                public void run() {
                    Toast.makeText(getApplicationContext(), "WTH is happening", Toast.LENGTH_SHORT).show();
                    // TODO Auto-generated method stub
                    if(mPosition >= mLayouts.size()){
                        int lastId = mLayouts.get(mLayouts.size() - 1);
                        Collections.shuffle(mLayouts);
                        while (lastId == mLayouts.get(0)) {
                            Collections.shuffle(mLayouts);
                        }
                        mPosition = 0;
                    }
                    setContentView(mLayouts.get(mPosition));

                switch (mLayouts.get(mPosition)) {
                    case R.layout.first:
                        Toast.makeText(getApplicationContext(), "First", Toast.LENGTH_SHORT).show();

                        iv1.setBackgroundResource(R.drawable.ic_launcher);
                        break;

                    case R.layout.second:
                        Toast.makeText(getApplicationContext(), "second", Toast.LENGTH_SHORT).show();
    //Some sound                     
                        iv2.setBackgroundResource(R.drawable.ic_launcher);

                        break;

                    case R.layout.third:
                        Toast.makeText(getApplicationContext(), "third", Toast.LENGTH_SHORT).show();
    //Some media , Different for each Layout.. 

                        iv3.setBackgroundResource(R.drawable.ic_launcher);

                        break;  

                    case R.layout.fourth:
                        Toast.makeText(getApplicationContext(), "fourth", Toast.LENGTH_SHORT).show();
                        iv4.setBackgroundResource(R.drawable.ic_launcher);

                        break;

                    case R.layout.fifth:
                        Toast.makeText(getApplicationContext(), "fifth", Toast.LENGTH_SHORT).show();

                        iv5.setBackgroundResource(R.drawable.ic_launcher);

                        break;  
                    default:
                        break;
                    }

                    mPosition++;
                    mButton = (Button)findViewById(R.id.btnid);
                    mButton.setOnClickListener(mListener);
                }

            }, 2050);
        }
    };

                    mPosition++;
                    mButton = (Button)findViewById(R.id.btnid);
                    mButton.setOnClickListener(mListener);
                }
            }, 750);
        }
    };
} 
```

任何形式的帮助都非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:32:29.913

您可以使用 android:tag 来区分按钮。

```
<Button
    ...
    android:tag="1"/> 
```

然后在代码中检索标签

```
mButton = (Button)findViewById(R.id.btnid);
int id = Integer.parseInt(mButton.getTag());

switch(id) {
    ...
} 
```

# .net - 主机特定在 t4 模板中表示什么？

> ID：15406506
> 
> 赞同：12
> 
> 时间：2013-03-14T10:19:26.087
> 
> 标签：.net, code-generation, t4

```
<#@ template debug="false" hostspecific="false" language="C#" #> 
```

hostspecific 属性在这里表示什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T12:54:51.740

hostspecific 设置为“true”的模板可以访问`this.Host`类型`ITextTemplatingEngineHost`( [MSDN](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.texttemplating.itexttemplatingenginehost.aspx) ) 的成员。然后，您可以使用例如它的方法“ResolvePath”来定位模板中输入所需的文件。

当您使用自定义模板引擎时，这更加有用。请在此处查看 Oleg 的博客：[http ://www.olegsych.com/2008/02/t4-template-directive/](http://www.olegsych.com/2008/02/t4-template-directive/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T20:04:46.457

设置 HostSpecific 标志后，您可以使用“this.Host”属性，该标志的类型为 ITextTemplatingEngineHost，并允许您进行文件路径解析等。

但是，在 Visual Studio 中使用时（不是在构建时或从命令行），您还可以将主机强制转换为 IServiceProvider 并连接到 Visual Studio 的全局服务提供程序。

这允许您使用任何 Visual Studio 的 API 来为您的模板查找数据，或操作您包含的项目或类似操作。

这实现的一个关键场景是使用 CodeModel（或很快的 Roslyn）来解析项目中的实时源代码，并将其用作生成元数据的源。

# python - 如何在 django 中自定义找不到页面（404）？

> ID：15406507
> 
> 赞同：5
> 
> 时间：2013-03-14T10:19:28.047
> 
> 标签：python, html, django, templates

我如何在 Django 中自定义错误页面，以及我在哪里放置该页面的 html。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T10:21:26.597

`404.html`只需在项目的根目录中创建一个文件`templates`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T14:20:12.577

首先，您需要编辑 settings.py 以指向模板文件夹： [Django 模板路径](https://stackoverflow.com/questions/3038459/django-template-path)

将 404.htm 放入模板文件夹后，您可以按照以下说明进行操作：

通知搜索引擎当前页面是 404 很重要。您可以通过更改 http 标头来做到这一点。所以这是一个很好的方法：

在您的应用程序的 urls.py 中添加：

```
# Imports
from django.conf.urls.static import static
from django.conf.urls import handler404
from django.conf.urls import patterns, include, url
from yourapplication import views

##
# Handles the URLS calls
urlpatterns = patterns('',
    # url(r'^$', include('app.homepage.urls')),
)

handler404 = views.error404 
```

在您的应用程序的 views.py 中添加：

```
# Imports
from django.shortcuts import render
from django.http import HttpResponse
from django.template import Context, loader

##
# Handle 404 Errors
# @param request WSGIRequest list with all HTTP Request
def error404(request):

    # 1\. Load models for this view
    #from idgsupply.models import My404Method

    # 2\. Generate Content for this view
    template = loader.get_template('404.htm')
    context = Context({
        'message': 'All: %s' % request,
        })

    # 3\. Return Template for this view + Data
    return HttpResponse(content=template.render(context), content_type='text/html; charset=utf-8', status=404) 
```

秘密在最后一行：status=404

希望它有所帮助！

我期待看到社区对这种方法的投入。=)

# c# - 具有 2 个共享相同信息的操作的多个提交按钮

> ID：15406510
> 
> 赞同：0
> 
> 时间：2013-03-14T10:19:40.320
> 
> 标签：c#, asp.net-mvc, linq

我有一个关于如何使用 2 个动作的问题，这些动作必须在包含 2 个提交按钮的视图中共享一个值。在“删除”视图中，我想必须采取行动：删除此人或停用此人（停用意味着为其合同分配结束日期）。

这是我的提交按钮：

```
@using (Html.BeginForm()) {
<p>
    <input type="submit" value="Delete"/> 
    <input type="submit" value="Desactivate" />

</p>

@Html.ActionLink("Back to List", "Index") 
```

}

还有我的行动：

```
 public ActionResult Delete(long id = 0)
    {
        Person person = db.Persons.Single(p => p.Id_Person == id);
        if (person == null)
        {
            return HttpNotFound();
        }

        return View(person);
    }

    //
    // POST: /Person/Delete/5

    [HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed(long id)
    {
        Person person = db.Persons.Single(p => p.Id_Person == id);
        db.Persons.DeleteObject(person);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    [HttpPost]
    public ActionResult Desactivate(long id)
    {
        Person person = db.Persons.Single(p => p.Id_Person == id);

        person.EndDate = DateTime.Now;

        db.Persons.Attach(person);
        db.ObjectStateManager.ChangeObjectState(person, EntityState.Modified);
        db.SaveChanges();

        return RedirectToAction("Index", "Person");
    } 
```

我试图将我的提交按钮分成不同的表单，但它不起作用，这很正常，因为我需要为删除操作和停用操作使用相同的 id。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:25:38.753

尝试这个

```
@using (Html.BeginForm()) {
<p>
    <input type="submit" class="delete" value="Delete"/> 
    <input type="submit" class="deactivate" value="Desactivate" />

</p>

   @Html.ActionLink("Back to List", "Index")
  }  
<scirpt type="text/javascript">
$(function(){
 $(".delete").click(function (){
   $(this).parents("form").action = "ControllerName/DeleteConfirmed";
   return true;
});

$(".deactivate").click(function (){
   $(this).parents("form").action = "ControllerName/Desactivate";
   return true;
});

});
</script> 
```

# mercurial - 新的主存储库

> ID：15406512
> 
> 赞同：1
> 
> 时间：2013-03-14T10:19:43.570
> 
> 标签：mercurial

我有一个使用了一段时间的存储库。现在我需要创建一个新的主存储库，我想在其中推送我当前的存储库。我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:32:27.023

你没有提供很多细节，但我希望我能提供帮助。

创建新的主存储库后（使用`hg clone`），您可以通过编辑本地存储库的文件并将当前存储库指向它`.hg/hgrc`并设置新存储库的路径。

我希望这有帮助。

# asp.net-mvc-4 - 将 posixAccount 写入 LDAP 不起作用

> ID：15406516
> 
> 赞同：1
> 
> 时间：2013-03-14T10:19:59.250
> 
> 标签：asp.net-mvc-4, ldap

我尝试将 LDAP 上的 PosixAccount 写入现有用户。我没有收到错误，但是在检查 LDAP 时，新条目尚未写入。

我首先添加了一个新用户，效果很好！=>

```
 public bool RegisterUser(UserObject userObj, HttpContext httpContext){
        bool success = false;

        //create a directory entry
        using (DirectoryEntry de = new DirectoryEntry())
        {
            try
            {
                InitializeCommonDataForDirectoryEntry(
                    de,
                    String.Format("{0}/{1}",
                        GetConfigEntry(Common.CommonDefinitions.CE_LDAP_CONFIG_SERVER, httpContext),
                        GetConfigEntry(Common.CommonDefinitions.CE_LDAP_CONFIG_DIRECTORY_ENTRY_ROOT, httpContext)),
                        httpContext);

                DirectorySearcher ds = new DirectorySearcher(de);
                ds.SearchScope = System.DirectoryServices.SearchScope.Subtree;
                ds.Filter = "(&(objectClass=organizationalUnit)(ou=people))";

                SearchResult result = ds.FindOne();
                if (result != null)
                {
                    DirectoryEntry myDirectoryEntry = result.GetDirectoryEntry();
                    DirectoryEntry newEntry = myDirectoryEntry.Children.Add(String.Format("cn={0}", userObj.userName), "inetOrgPerson");

                    if (userObj.company != null && !userObj.company.Equals(String.Empty))
                        newEntry.Properties["businessCategory"].Add(String.Format("{0}", userObj.company));
                    newEntry.Properties["givenName"].Add(String.Format("{0}", userObj.firstName));
                    newEntry.Properties["sn"].Add(String.Format("{0}", userObj.lastName));
                    newEntry.Properties["uid"].Add(String.Format("{0}", userObj.userName));
                    newEntry.Properties["mail"].Add(String.Format("{0}", userObj.email));
                    userObj.password = GenerateSaltedSHA1(userObj.password);
                    newEntry.Properties["userPassword"].Add(String.Format("{0}", userObj.password));
                    newEntry.Properties["pager"].Add(String.Format("{0}", userObj.newsletter));
                    newEntry.Properties["initials"].Add(String.Format("{0}", GetConfigEntry(Common.CommonDefinitions.CE_MOWEE_PACKAGE_1, httpContext)));

                    newEntry.CommitChanges();
                    newEntry.RefreshCache();
                    success = true;
                }
            }
            catch (Exception ex)
            {
                Trace.Write("Exception : RegisterUser: " + ex);
                GeneralUtils.SendBugMail(ex, httpContext);
            }
        }
        return success;
    } 
```

之后，我想为该用户编写 posixAccount，这不起作用也许有人可以帮助我，请检查我做错了什么！？

=>

```
 public bool WritePosixAccountDataForRegisteredUser(UserObject userObj, HttpContext httpContext)
    {
        bool success = false;

        //create a directory entry
        using (DirectoryEntry de = new DirectoryEntry())
        {
            try
            {
                InitializeCommonDataForDirectoryEntry(
                    de,
                    String.Format("{0}/ou=people,{1}",
                        GetConfigEntry(Common.CommonDefinitions.CE_LDAP_CONFIG_SERVER, httpContext),
                        GetConfigEntry(Common.CommonDefinitions.CE_LDAP_CONFIG_DIRECTORY_ENTRY_ROOT, httpContext)),
                        httpContext);

                DirectorySearcher ds = new DirectorySearcher(de);
                ds.SearchScope = System.DirectoryServices.SearchScope.Subtree;
                ds.Filter = String.Format("(&(objectClass=*)(cn={0}))", userObj.userName);

                SearchResult result = ds.FindOne();
                if (result != null)
                {
                    DirectoryEntry userEntry = result.GetDirectoryEntry();

                    //mandatory attributes
                    /*
                     *      cn
                            gidNumber
                            homeDirectory
                            uid
                            uidNumber
                     * */

                    IADsPropertyList propList = (IADsPropertyList)userEntry.NativeObject;

                    ActiveDs.PropertyEntry myNewEntry1 = new ActiveDs.PropertyEntry();
                    ActiveDs.IADsPropertyValue propVal1 = new ActiveDs.PropertyValue();
                    propVal1.CaseIgnoreString = "posixAccount";
                    propVal1.ADsType = (int)ADSTYPEENUM.ADSTYPE_CASE_IGNORE_STRING;
                    myNewEntry1.Name = "objectClass";
                    myNewEntry1.Values = new object[] { propVal1 };
                    myNewEntry1.ControlCode = (int)ADS_PROPERTY_OPERATION_ENUM.ADS_PROPERTY_APPEND;
                    myNewEntry1.ADsType = (int)ADSTYPEENUM.ADSTYPE_CASE_IGNORE_STRING;
                    propList.PutPropertyItem(myNewEntry1);

                    ActiveDs.PropertyEntry myNewEntry2 = new ActiveDs.PropertyEntry();
                    ActiveDs.IADsPropertyValue propVal2 = new ActiveDs.PropertyValue();
                    propVal2.CaseIgnoreString = "504";
                    propVal2.ADsType = (int)ADSTYPEENUM.ADSTYPE_CASE_IGNORE_STRING;
                    myNewEntry2.Name = "gidNumber";
                    myNewEntry2.Values = new object[] { propVal2 };
                    myNewEntry2.ControlCode = (int)ADS_PROPERTY_OPERATION_ENUM.ADS_PROPERTY_APPEND;
                    myNewEntry2.ADsType = (int)ADSTYPEENUM.ADSTYPE_CASE_IGNORE_STRING;
                    propList.PutPropertyItem(myNewEntry2);

                    ActiveDs.PropertyEntry myNewEntry3 = new ActiveDs.PropertyEntry();
                    ActiveDs.IADsPropertyValue propVal3 = new ActiveDs.PropertyValue();
                    propVal3.CaseIgnoreString = "/data/WowzaMediaServer-3.0.3/content/mowee/" + userObj.userName;
                    propVal3.ADsType = (int)ADSTYPEENUM.ADSTYPE_CASE_IGNORE_STRING;
                    myNewEntry3.Name = "homeDirectory";
                    myNewEntry3.Values = new object[] { propVal3 };
                    myNewEntry3.ControlCode = (int)ADS_PROPERTY_OPERATION_ENUM.ADS_PROPERTY_APPEND;
                    myNewEntry3.ADsType = (int)ADSTYPEENUM.ADSTYPE_CASE_IGNORE_STRING;
                    propList.PutPropertyItem(myNewEntry3);

                    ActiveDs.PropertyEntry myNewEntry4 = new ActiveDs.PropertyEntry();
                    ActiveDs.IADsPropertyValue propVal4 = new ActiveDs.PropertyValue();
                    propVal4.CaseIgnoreString = "1100";
                    propVal4.ADsType = (int)ADSTYPEENUM.ADSTYPE_CASE_IGNORE_STRING;
                    myNewEntry4.Name = "uidNumber";
                    myNewEntry4.Values = new object[] { propVal4 };
                    myNewEntry4.ControlCode = (int)ADS_PROPERTY_OPERATION_ENUM.ADS_PROPERTY_APPEND;
                    myNewEntry4.ADsType = (int)ADSTYPEENUM.ADSTYPE_CASE_IGNORE_STRING;
                    propList.PutPropertyItem(myNewEntry4);

                    ActiveDs.PropertyEntry myNewEntry5 = new ActiveDs.PropertyEntry();
                    ActiveDs.IADsPropertyValue propVal5 = new ActiveDs.PropertyValue();
                    propVal5.CaseIgnoreString = userObj.userName;
                    propVal5.ADsType = (int)ADSTYPEENUM.ADSTYPE_CASE_IGNORE_STRING;
                    myNewEntry5.Name = "cn";
                    myNewEntry5.Values = new object[] { propVal5 };
                    myNewEntry5.ControlCode = (int)ADS_PROPERTY_OPERATION_ENUM.ADS_PROPERTY_APPEND;
                    myNewEntry5.ADsType = (int)ADSTYPEENUM.ADSTYPE_CASE_IGNORE_STRING;
                    propList.PutPropertyItem(myNewEntry5);

                    ActiveDs.PropertyEntry myNewEntry6 = new ActiveDs.PropertyEntry();
                    ActiveDs.IADsPropertyValue propVal6 = new ActiveDs.PropertyValue();
                    propVal6.CaseIgnoreString = userObj.userName;
                    propVal6.ADsType = (int)ADSTYPEENUM.ADSTYPE_CASE_IGNORE_STRING;
                    myNewEntry6.Name = "uid";
                    myNewEntry6.Values = new object[] { propVal6 };
                    myNewEntry6.ControlCode = (int)ADS_PROPERTY_OPERATION_ENUM.ADS_PROPERTY_APPEND;
                    myNewEntry6.ADsType = (int)ADSTYPEENUM.ADSTYPE_CASE_IGNORE_STRING;
                    propList.PutPropertyItem(myNewEntry6);

                    de.RefreshCache(new String[] { "objectClass" });
                    de.RefreshCache(new String[] { "gidNumber" });
                    de.RefreshCache(new String[] { "homeDirectory" });
                    de.RefreshCache(new String[] { "uidNumber" });
                    de.RefreshCache(new String[] { "cn" });
                    de.RefreshCache(new String[] { "uid" });

                    de.CommitChanges();
                    success = true;
                }
            }
            catch (Exception ex)
            {
                Trace.Write("Exception : RegisterUser: " + ex);
                GeneralUtils.SendBugMail(ex, httpContext);
            }
        }
        return success;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:24:29.640

我认为您得到的错误将为进一步诊断提供信息。

当您在 AD 中创建对象时，我很确定即使您没有指定 CN，您也会获得 CN 集的默认命名属性。所以这个设置 cn 的 posixAccount create 可能与现有的 cn 值冲突。我忘记了 CN 在 AD 中是多值还是单值，但如果它是单值，这将更有意义。

# c# - sqlite c#：数据库连接无效

> ID：15406521
> 
> 赞同：0
> 
> 时间：2013-03-14T10:20:14.667
> 
> 标签：c#, sqlite, database-connection

我有一个 sqlite 数据库文件`.s3db`，其中已经填充了所有表和数据。我正在尝试连接到数据库使用`sqliteConnection`。但它似乎不起作用..我添加了 sqlite.dll 的引用，c# 是否需要其他一些引用来建立连接？如果我制作了一个新的 sqlite db，它会被制作为`xyz.sqlite`，可能它无法识别数据库扩展名。

这就是我建立连接的方式：

```
// Creates a connection with our database file.
        public void connectToDatabase()
        {
            //this.dbConnection = new SQLiteConnection(@"data source=Fut_Autobuyer_2012.s3db;version=3;");
            string dbConnectionString = @"Data Source=Fut_Autobuyer_2012.s3db";
            this.dbConnection = new SQLiteConnection(dbConnectionString);
        } 
```

这是建立连接时得到的：

```
Database connection not valid for getting number of changes.
Database connection not valid for getting last insert rowid.
Database connection not valid for getting maximum memory used.
Database connection not valid for getting memory used. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T10:35:50.520

看起来您必须打开数据库连接：

```
using (var connection = SQLiteFactory.Instance.CreateConnection())
{
  Debug.Assert(connection != null, "connection != null");
  connection.ConnectionString = connectionString;
  connection.Open();

  try
  {
    using (var command = connection.CreateCommand())
    {
      // Execute connection
    }
  }
  finally
  {
    connection.Close();
  }
} 
```

# perl - 使用 Perl LWP::UserAgent 我在端口 443 上得到响应，但不是来自端口 8443

> ID：15406522
> 
> 赞同：-1
> 
> 时间：2013-03-14T10:20:16.467
> 
> 标签：perl, user-agent, lwp

我正在使用 LWP::UserAgent 检查来自服务器的响应。我从端口 443 得到响应，但我无法从端口 8443 得到任何响应。

当我在 Windows 上使用 cURL 时，我从两个端口都得到了响应代码。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:03:55.380

这个示例程序（改编自 perldoc lwpcook）展示了如何连接不同的端口

它还允许关闭 SSL 验证，以防您有导致问题的自制证书

```
#!/usr/bin/perl
$port = $ARGV[1] || 443;
$host = $ARGV[0] || 'pause.perl.org';
$verify =$ARGV[2] || 0;
use LWP::UserAgent;
$ua = LWP::UserAgent->new(ssl_opts => { verify_hostname => $verify});;

#$ua->agent("$0/0.1 " . $ua->agent);
$ua->agent("Mozilla/8.0");    # pretend we are very capable browser

$req = HTTP::Request->new( GET => "https://$host:$port" );
$req->header( 'Accept' => 'text/html' );

# send request
$res = $ua->request($req);

# check the outcome
if ( $res->is_success ) {
    print $res->decoded_content;
}
else {
    print "Error: " . $res->status_line . "\n";
} 
```

# visual-studio-2010 - Visual Studio 可扩展性：拦截文件粘贴事件

> ID：15406523
> 
> 赞同：1
> 
> 时间：2013-03-14T10:20:17.903
> 
> 标签：visual-studio-2010, visual-studio-extensions

如何在我的 Visual Studio 扩展中拦截文件粘贴事件？
文件粘贴 = 在解决方案资源管理器中粘贴整个文件。

我的目标是对复制的文件应用某些替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:20:40.537

可以使用`DTE.Events.CommandEvents`( [MSDN](http://msdn.microsoft.com/en-us/library/vstudio/envdte.commandevents.aspx) )`typeof(VSConstants.VSStd97CmdID).GUID`作为命令 guid 和`VSConstants.VSStd97CmdID.Paste`命令 id 来拦截它。

例子：

```
protected override void Initialize() {
    var dte = (DTE)GetService(typeof(DTE));

    var pasteGuid = typeof(VSConstants.VSStd97CmdID).GUID.ToString("B");
    var pasteID = (int)VSConstants.VSStd97CmdID.Paste;

    _pasteEvent = dte.Events.CommandEvents[pasteGuid, pasteID];
    _pasteEvent.BeforeExecute += delegate { Trace.WriteLine("Before paste."); };
    _pasteEvent.AfterExecute += delegate { Trace.WriteLine("After paste."); };
} 
```

这并不完美，因为它也可能在其他情况下拦截粘贴，但这是一个很好的第一步。也可以`ItemAdded`在粘贴期间观看事件以获取粘贴的项目。

# paypal-sandbox - 在某些计算机上看不到沙盒测试帐户“个人资料”

> ID：15406524
> 
> 赞同：0
> 
> 时间：2013-03-14T10:20:17.763
> 
> 标签：paypal-sandbox

登录到 developer.paypal.com 后，我可以看到我的测试帐户，并进入沙箱并查看通知，但是当我点击“个人资料”时，我的浏览器变为灰色，没有其他任何反应。

这发生在我的两台台式计算机上，但奇怪的是，它不会发生在我的笔记本电脑上。在该机器上，浏览器变为灰色，然后出现一个带有“个人资料”、“API 凭据”、“资金”和“设置”选项卡的插入。

什么可能会阻止我的台式计算机上的配置文件插入？浏览器 (Internet Explorer) 第三方 cookie 设置在两台机器上看起来相同。

这似乎不是 Firefox 的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:39:00.847

这是 PayPal 正在努力解决的 developer.paypal.com 的一个已知问题。一些用户已经能够通过清除缓存和 cookie 来解决问题。

注意：对于 IE8 – 删除 cookie 不会删除永久 cookie，需要您手动删除存储在文件系统中的 cookie。

计划于 3/19 进行修复以解决此问题。一旦问题得到解决，我一定会跟进这个答案。

谢谢！

# php - Magento - 产品页面上的库存不足通知

> ID：15406526
> 
> 赞同：3
> 
> 时间：2013-03-14T10:20:21.803
> 
> 标签：php, magento, notifications, e-commerce

我正在使用 Magento 1.7.0.2。在产品页面上，如果客户尝试添加的数量大于我们的库存数量，他们会收到一条消息，指出“.. 请求的数量不可用”。

发生这种情况时，magento 有什么方法可以通过电子邮件发送或记录？即我收到一封自动电子邮件，说明客户已尝试添加 X 个项目 X？这将使我能够确定由于我们没有足够的特定商品库存而导致的销售损失？

以前有没有人遇到过这样的事情，或者这甚至可能吗？

先感谢您

迈克·普伦蒂斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:31:24.163

没有通过电子邮件通知少量产品的标准功能。
但是有 RSS 通知 [http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/system_config/edit/cataloginventory](http://www.magentocommerce.com/wiki/modules_reference/english/mage_adminhtml/system_config/edit/cataloginventory)

扩展此功能以满足您的需求。
您可以编写一些脚本来解析 RSS，并发送电子邮件等。

编辑

这是您可能喜欢的一些扩展[http://www.magentocommerce.com/magento-connect/low-stock-email-notification.html](http://www.magentocommerce.com/magento-connect/low-stock-email-notification.html)
但它不是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:41:56.930

是的，这是可能的，您必须为此编写代码。我曾经遇到过这个问题，我在下面做了这样的事情。

我已经做了一个观察者事件来检查客户是否要求数量超过可用数量，如果我向管理员发送了电子邮件。

你可以做的是`chekout_cart_add_before`在这个事件中为事件创建一个观察者，你可以把你的逻辑。

或者，您可以使用 magento 功能**延期**交货，您可以在库存选项卡中找到它，如果启用此功能，那么客户甚至可以订购请求数量 > 可用数量，客户可以在购物车页面中看到一条关于延期交货的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T14:27:39.793

以下是我的做法，每当客户尝试订购超过可用库存水平时，它就会发送谷歌分析跟踪事件。

第一份：**app/code/core/Mage/CatalogInventory/Model/Stock/Item.php**

至：**app/code/local/Mage/CatalogInventory/Model/Stock/Item.php**

这样您就不会修改核心文件。

在**app/code/local/Mage/CatalogInventory/Model/Stock/Item.php**添加这个函数

```
public function notifyOutOfStock($productId){
    $session = Mage::getSingleton('checkout/session');

    //Initialise as empty array, or use existing session data
    $outOfStockItems = array();
    if ($session->getOutOfStock()){
        $outOfStockItems = $session->getOutOfStock();
    }

    try {
        $product = Mage::getModel('catalog/product')->load($productId);
        $sku = $product->getSKu();

        if($sku){
            //Add the current sku to our out of stock items (if not already there)
            if(! isset($outOfStockItems[$sku]) ) {
                $outOfStockItems[$sku] = 0;
            }
        }

    } catch (Exception $e){
        //Log your error
    }

    Mage::getSingleton('checkout/session')->setOutOfStock($outOfStockItems);

} 
```

在同一个文件中是另一个名为**checkQuoteItemQty**的函数。在该函数内部，您需要使用**$this->notifyOutOfStock($this->getProductId());调用新函数** 在它设置每个错误消息之后和 return 语句之前。

所以：

```
 public function checkQuoteItemQty($qty, $summaryQty, $origQty = 0)
 {
     ....
     if ($this->getMinSaleQty() && ($qty) < $this->getMinSaleQty()) {
        $result->setHasError(true)
            ->setMessage(
                $_helper->__('The minimum quantity allowed for purchase is %s.', $this->getMinSaleQty() * 1)
            )
            ->setQuoteMessage($_helper->__('Some of the products cannot be ordered in requested quantity.'))
            ->setQuoteMessageIndex('qty');

            //** Call to new function ** 
            $this->notifyOutOfStock($this->getProductId()); 

        return $result;
    }
    .....
        ->setQuoteMessageIndex('qty');

            //** Call to new function ** 
            $this->notifyOutOfStock($this->getProductId()); 

        return $result;
    ..... 
```

这样做是将您的产品 sku 添加到结帐会话中的数组中。这意味着您可以在页面加载显示“库存不足”通知后立即访问模板文件中的该信息。

因此，您可以在其中一个模板文件中添加一些代码来呈现必要的 JavaScript。我选择了 header.phtml，因为它会在每个页面上加载。（用户可以在购物车页面以及产品查看页面中将商品数量添加到购物车中）。

**app/design/frontend/CUSTOMNAME/default/template/page/html/header.phtml**

在代码底部的某处添加以下内容：

```
<!-- GA tracking for out of stock items -->
<script>
    try {
    <?php 
        $session = Mage::getSingleton('checkout/session');
        if ($session->getOutOfStock()){
            $outOfStockItems = $session->getOutOfStock();
            foreach($outOfStockItems as $sku=>$value) {
                if($value==0){
                  //Render the GA tracking code
                    echo "_gaq.push(['_trackEvent', 'AddToCart', 'ProductQtyNotAvailable', '".$sku."']); \r\n";
                 //Set it to 1 so we know not to track it again this session
                    $outOfStockItems[$sku] = 1; 
                }
            }
            //Update the main session
            Mage::getSingleton('checkout/session')->setOutOfStock($outOfStockItems);
        }
    ?>
    }
    catch(err) {
        //console.log(err.message);
    }
</script> 
```

可以确认这很有效，并且在我看来比电子邮件或 RSS 提要更好，因为您可以将其与其他分析一起分析。

# java - 如何从 jar 中运行特定的 Main 类

> ID：15406532
> 
> 赞同：7
> 
> 时间：2013-03-14T10:20:36.217
> 
> 标签：java, jar, main

我有一个 jar 文件，其中有 2 个 java 类，它们都有 Main 方法。有没有一种方法可以在运行 jar 文件时指定调用哪个类？我知道可以修改清单文件以指定 Main 类，但由于只能提及一个类，这无济于事。我检查了以下链接，但那些力图解决了问题：

[https://stackoverflow.com/questions/5474666/how-to-run-a-class-from-jar-which-is-not-the-main-class-in-its-manifest-file](https://stackoverflow.com/questions/5474666/how-to-run-a-class-from-jar-which-is-not-the-main-class-in-its-)

清单文件 [从 jar 执行主类](https://stackoverflow.com/questions/5070100/execute-a-main-class-from-a-jar)

它给出了 NoClassDefFoundError。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-09-06T20:12:01.863

```
java -cp target/your_file.jar your.package.name.YourClass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:22:34.070

有一个充当控制器的类。在其 main() 中，根据传递的参数调用其他类。将此添加为清单中的主类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:36:46.150

编写一个 Main 类，其中 main 方法根据传递的命令行参数调用实际方法。在清单中添加这个 Main 类。

# gtk - 如何使用 Glade 创建 GtkApplicationWindow 小部件？

> ID：15406533
> 
> 赞同：2
> 
> 时间：2013-03-14T10:20:36.887
> 
> 标签：gtk, glade

从我的代码中访问[GtkApplicationWindow](https://developer.gnome.org/gtk3/stable/GtkApplicationWindow.html)对象对我很有用，但我想使用 Glade 来初始化它的属性。

如何在 Glade 中创建 GtkApplicationWindow 小部件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T06:21:14.230

在您的 ui xml 更改中

```
<object class="GtkWindow" id="foo"> 
```

到

```
<object class="GtkApplicationWindow" id="foo"> 
```

并通过 gtk builder 检索窗口后设置应用程序属性：

```
GTK_WINDOW (gtk_builder_get_object (xml, "foo"));
g_object_set(main_window, "application", application, NULL); 
```

# android - AccountManager：如何让用户使用对话框选择帐户

> ID：15406535
> 
> 赞同：3
> 
> 时间：2013-03-14T10:20:41.980
> 
> 标签：android, accountmanager

在 AccountManager 教程[记住您的用户](http://developer.android.com/training/id-auth/identify.html)中，建议：

> 如果数组中有多个`Account`，您应该显示一个对话框，要求用户选择一个。

最好的方法是什么？我有一个解决方案，但如果社区还有其他好的例子，这似乎是一种可以被其他人共享和轻松重用的样板代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-06T13:25:51.243

从 Android 4.0（API 级别 14）开始，启动具有如下所示意图的活动时，会显示帐户选择器。

```
Intent intent = AccountManager.newChooseAccountIntent(null, null,
        new String[] { acc_type }, true, null, null,
        null, null);
startActivityForResult(intent, CHOOSE_ACCOUNT); 
```

对于 4.0 之前的设备，请
使用[https://github.com/frakbot/Android-AccountChooser](https://github.com/frakbot/Android-AccountChooser)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T13:43:43.070

我使用此代码。它显示一个对话框，因此最终用户可以选择其中一个 google 帐户。

```
ArrayList<String> gUsernameList = new ArrayList<String>();
AccountManager accountManager = AccountManager.get(this);
Account[] accounts = accountManager.getAccountsByType("com.google");

gUsernameList.clear();
//loop
for (Account account : accounts) {
    gUsernameList.add(account.name);
}

AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Choose you gmail-account");

ListView lv = new ListView(this);

ArrayAdapter<String> adapter = new ArrayAdapter<String> 
(this,android.R.layout.simple_list_item_1, android.R.id.text1, 
gUsernameList);

lv.setAdapter(adapter);
lv.setOnItemClickListener(new OnItemClickListener() {    

public void onItemClick(AdapterView<?> parent,View view,int position,long 
id) 
{
    Log.d("You-select-gmail-account", gUsernameList.get(position)) );
}
});

builder.setView(lv);
builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        dialog.dismiss();
    }
});

final Dialog dialog = builder.create();
dialog.show(); 
```

# javascript - 在传单中双击 CircleMarker 禁用地图缩放

> ID：15406537
> 
> 赞同：18
> 
> 时间：2013-03-14T10:20:47.903
> 
> 标签：javascript, leaflet

当我单击 CircleMarker 对象时，我试图禁用地图上的缩放，但直到现在，还没有成功。

这是我的代码：

```
var myCircle = new L.CircleMarker(new L.LatLng(50.924480, 10.758276), 10).addTo(map);
myCircle.on("click", function () {
    //my click stuff
});
myCircle.on("dblclick", function () {
    //my dblclick stuff
}); 
```

每次触发 dblclick 事件时，地图都会缩放，如何禁用它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-14T10:59:40.600

尝试

```
var myCircle = new L.CircleMarker(new L.LatLng(50.924480, 10.758276), 10).addTo(map);
map.doubleClickZoom.disable(); 
```

参考[这个文件](http://leafletjs.com/reference.html#ihandler)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-17T07:37:18.970

以下解决方案似乎对我有用：

```
myCircle.ondblclick = function (event) {
    event.stopPropagation();
    return false;
}; 
```

我还尝试了另一种方法，它在实践中也很有效，但我觉得它有点 hacky：

```
myCircle.on("click", function () {
  map.doubleClickZoom.disable();
  setTimeout(function(){map.doubleClickZoom.enable();}, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-23T13:20:39.753

如果有人在这里寻找用例的解决方案“我想在双击时放大地图，但如果双击发生在实体上则不是”，这就是我解决它的方法：

```
const circle = new L.circlemarker(...).addTo(map);
circle.on("dblclick", () => {
  map.doubleClickZoom.disable();

  doSomething();

  setTimeout(() => {
    map.doubleClickZoom.enable();
  }, 1); // Without the timeout the map will still zoom in on entity double-click
}); 
```

仅供参考`event.preventDefault();` `event.stopPropagation();`，并且`return false;`在“dblclick”处理程序内部对我不起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-07T01:55:55.940

这里的所有答案都是在初始化 Leaflet 地图对象之后。

我想说明您也可以在地图对象初始化期间禁用 doubleClickZoom。

注意：这将禁用 doubleClickZoom 到整个地图，而不仅仅是 circleMarkers。

```
map = L.map('map', {
      center: [39.8282, -98.5795],
      zoom: 5,
      doubleClickZoom: false
    }); 
```

PS我正在运行传单版本1.7.1

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-03T02:30:59.827

您可以`return false`从您的 dblclick 处理程序中阻止事件传播，例如

```
myCircle.on("dblclick", function () {
    //my dblclick stuff
    return false;
}); 
```

现在其他元素（例如地图）将无法处理该事件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-11T15:07:36.987

试试这个...当您将鼠标悬停在圆圈上时禁用 map.doubleClickZoom 并在您离开时启用

```
var myCircle = new L.CircleMarker(new L.LatLng(50.924480, 10.758276), 10).addTo(map);

myCircle
    .on("click", function () {
        //my click stuff
    })
    .on("dblclick", function () {
        //my dblclick stuff
    })
    .on('mouseover', function () {
        map.doubleClickZoom.disable();
    })
    .on('mouseout', function () {
        map.doubleClickZoom.enable();
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-06T15:17:33.430

上面的答案都不适合我：

*   调用本机`ev.originalEvent.preventDefault()`什么也没做
*   `false`既不返回
*   我不太喜欢这种`doubleClickZoom`解决方法（尽管……它有效！）

使用[Leaflet DomEvent](https://leafletjs.com/reference-1.7.1.html#domevent)为我完成了这项工作：

```
 import { DomEvent } from 'leaflet';

myFeature.on("dblclick", function (ev) {
  DomEvent.stopPropagation(ev)
}); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-11-08T19:48:38.343

首先，您需要禁用地图双击缩放，然后在地图点击事件中再次启用它。因此，当您在双击标记后双击地图时，它会再次缩放；）我试过了，它对我来说非常有用！享受！

```
map.doubleClickZoom.disable();

map.on('click', function (e) { 
  map.doubleClickZoom.enable();
 }); 
```

# snmp - SNMP 编程-单 API 线程自

> ID：15406538
> 
> 赞同：1
> 
> 时间：2013-03-14T10:20:49.043
> 
> 标签：snmp

我在使用 NET_SNMP**单 API 线程 self**时遇到问题；所以我使用此链接[http://www.net-snmp.org/docs/README.thread.html](http://www.net-snmp.org/docs/README.thread.html)成功解决了我的问题以从 MIB 获取 OID 的值，但我不知道是否有预定义的**函数****自动增加这个值**？

任何帮助将不胜感激。

# web-services - 在测试和生产中使用具有不同端点的 Maven 和 Apache CXF 代码生成

> ID：15406540
> 
> 赞同：0
> 
> 时间：2013-03-14T10:20:50.260
> 
> 标签：web-services, maven, code-generation, cxf, wsdl2java

我有一个使用 Web 服务的 Java Web 项目，使用 Apache CXF 根据服务发布的 WSDL 生成底层代码。

我有一个用于开发的服务的测试版本和一个生产版本。这两个服务的端点位于不同的 URL 上，虽然它们的公共接口几乎相同，但我在将项目推广到生产环境时重新生成了 CXF 代码（使用 cxf-codegen-plugin）。

配置 Maven 以执行此操作的最佳方法是什么？

目前我在被`pom.xml`调用中设置了一个属性`ws_status`

```
<properties>
    <ws_status>test</ws_status>
</properties> 
```

我随后用它来调整 codegen 插件使用的 WSDL 文件的路径：

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>${cxf.version}</version>
    <configuration>
    <fork>once</fork>
    <encoding>UTF-8</encoding>
    <additionalJvmArgs>-Djava.endorsed.dirs=${project.build.directory}/endorsed</additionalJvmArgs>
    <!-- rest of the normal codegen configuration options -->
    </configuration>
    <dependencies>
    <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.2</version>
    </dependency>
    <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-xjc</artifactId>
        <version>2.2</version>
    </dependency>
    </dependencies>
    <executions>
    <execution>
        <id>generate-sources</id>
        <phase>generate-sources</phase>
        <goals>
        <goal>wsdl2java</goal>
        </goals>
        <configuration>
        <wsdlOptions>
            <wsdlOption>
            <wsdl>${basedir}/src/main/resources/wsdl/${ws_status}/Cmis.wsdl</wsdl>
            <wsdlLocation>classpath:wsdl/${ws_status}/Cmis.wsdl</wsdlLocation>
            <extraargs>
                <extraarg>-client</extraarg>
                <extraarg>-verbose</extraarg>
                <extraarg>-compile</extraarg>
            </extraargs>
            </wsdlOption>
        </wsdlOptions>
        </configuration>
    </execution>
    </executions>
</plugin> 
```

这工作正常，但让我很恼火的是，每次发布生产版本时我都需要更改`ws_status`内部，因为 pom 文件由 git 跟踪。`pom.xml`

我想要的是一个 Maven 命令行开关，告诉它引用一个 WSDL 文件或另一个，这样我就可以为测试或生产环境生成源代码，而无需更改项目内的代码。这是 Maven 中的“构建配置文件”吗？

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:31:39.587

您应该删除 POM 顶部的属性。您可以按如下方式调用 Maven 命令行：

```
mvn goal -Dws_status=your_status_value 
```

它应该没问题。

# javascript - 如何使用 jQuery 或 javascript 获取 tabcontainer 的高度？

> ID：15406542
> 
> 赞同：2
> 
> 时间：2013-03-14T10:20:51.727
> 
> 标签：javascript, jquery, asp.net, tabcontainer

我在手风琴中有一个标签容器。

如果我所在的选项卡比我切换到的选项卡短，我必须滚动才能查看新选项卡上的内容。

当我切换到 tabcontainer 并调整包含它的 div 的大小时，我希望能够“捕捉”它的高度。

我想：

```
 function clientActiveTabChanged(sender, args) {

         alert(sender.height());
        }; 
```

会告诉我高度，但它不起作用。

TabContainer 是：

```
 <ajaxToolkit:TabContainer ID="projTabContainer" OnClientActiveTabChanged="clientActiveTabChanged"  runat="server" CssClass="ajax__tab_red-theme"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:27:47.617

`sender`传递给 的不是`clientActiveTabChanged`jQuery 对象，而是 DOMElement。尝试以下操作：

```
function clientActiveTabChanged(sender, args) {
  var height = $(sender).height();
  console.log('height is: ' + height);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:28:57.140

我认为这会对你有所帮助：[这里](https://stackoverflow.com/questions/15372333/how-can-i-get-a-tabcontainer-id-using-jquery-or-javascript)

```
$(myJquerySelector).attr('id'); 
```

你只需`"id"`要将`"height"`

编辑：您可以使用以下方法获取事件目标：[event_target](http://api.jquery.com/event.target/)

并选择 id ：

```
 $('TabContainer').change(function(event) {
  var tabContainerID = $(event.target).attr('id');
  alert(tabContainerID);
}); 
```

现在，当您单击选项卡时，您就有了 id。使用此 id，您可以轻松找到高度。我希望这会对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:58:48.507

您可以自动重新调整选项卡容器的大小 - *（参考：[Auto Resize TabContainer](http://www.codeproject.com/Articles/25568/Auto-Resize-TabContainer)）*

```
function clientActiveTabChanged() {
    //get the tabContainer for later reference
    var tc = document.getElementById("<%=tabContainer.ClientId%>");

    //get the index of the tab you just clicked.
    var tabIndex = 
         parseInt($find("<%=tabContainer.ClientId%>").get_activeTabIndex(), 10);

    //set the tabcontainer height to the tab panel height.
    tc.childNodes[1].style.height = 
         tc.childNodes[1].childNodes[tabIndex].clientHeight;
}; 
```

根据需要对上述函数进行更改。

# automapper - 需要 AutoMapper 建议

> ID：15406543
> 
> 赞同：0
> 
> 时间：2013-03-14T10:20:58.763
> 
> 标签：automapper, automapper-2

我有以下课程

```
class Contact  
{  
  string FirstName;  
  string LastName;  
  List<Phone> ContactNumbers;  
}

class Phone  
{  
  string Number;  
  PhoneType Type;  
}  

enum PhoneType  
{  
  Home, Work, Fax
}  

class Source
{
  Contact Agent;
  Contact Customer;
}

class Destination  
{  
  string AgentFirstName;  
  string AgentLastName;  
  string AgentPhoneNumber1;  
  string AgentPhoneNumber2;  
  string AgentPhoneNumber3;  
  PhoneType AgentPhoneType1;  
  PhoneType AgentPhoneType2;  
  PhoneType AgentPhoneType3; 

  string CustomerFirstName;  
  string CustomerLastName;  
  string CustomerPhoneNumber1;  
  string CustomerPhoneNumber2;  
  string CustomerPhoneNumber3;  
  PhoneType CustomerPhoneType1;  
  PhoneType CustomerPhoneType2;  
  PhoneType CustomerPhoneType3;  

} 
```

我想做从**源**到**目标**类的自动映射。我看到的挑战是将联系人号码列表转换为目标类中的独立字段。有人可以建议方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:02:34.417

做一个自定义映射函数可能是最简单的，它使事情变得简单易读：

```
CreateMap<Contact, Destination>().ConvertUsing(c => MapContactToDestination(c));

Destination MapContactToDestination(Contact c)
{
    //logic here for handling conversion
} 
```

# php - 使用带有 curl 函数的 PHP 调用 SOAP 方法

> ID：15406551
> 
> 赞同：0
> 
> 时间：2013-03-14T10:21:36.147
> 
> 标签：php, curl

我想尝试使用 curl 函数在 php 中调用soap方法，但它显示一个警告

> 警告：curl_setopt() [function.curl-setopt]：第 26 行 /home/bestbus/public_html/apitest.php 中的 curl 配置选项无效

```
<? 

$xml_data ='<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:rsr="http://webservices.foxfireindia.com/RSRSAPI">
   <soap:Header>
  <rsr:LinkCredentials>
     <!--Optional:-->
     <rsr:Login>***main</rsr:Login>
     <!--Optional:-->
     <rsr:Password>****@3api</rsr:Password>
  </rsr:LinkCredentials>
 </soap:Header>
  <soap:Body>
  <rsr:Login>
       <!--Optional:-->
       <rsr:userName>***main</rsr:userName>
     <!--Optional:-->
     <rsr:password>****@3api</rsr:password>
  </rsr:Login>
  </soap:Body>
 </soap:Envelope>';

$URL = "http://115.254.89.1:8090/RSRS_APITest/RSRSAPI.asmx?wsdl";

$ch = curl_init($URL);
curl_setopt($ch, CURLOPT_MUTE, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
curl_setopt($ch, CURLOPT_POSTFIELDS, "$xml_data");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);

print_r($output);
curl_close($ch);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:27:21.783

根据[手册](http://php.net/manual/en/function.curl-setopt.php)，CURLOPT_SSL_VERIFYHOST 的唯一有效值是 1 或 2，并且在 cURL 7.28.1 中删除了 1 的使用

*   1 检查 SSL 对等证书中是否存在通用名称。
*   2 检查公用名是否存在，并验证它是否与提供的主机名匹配。在生产环境中，此选项的值应保持为 2（默认值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:37:42.133

尝试更换

```
 curl_setopt($ch, CURLOPT_MUTE, 1); 
```

和

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
```

因为截至文档[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php) CURLOPT_MUTE 在 cURL 7.15.5 中被删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:32:42.337

试试这个：

```
<?php
    $xml_data = '<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:rsr="http://webservices.foxfireindia.com/RSRSAPI">
   <soap:Header>
  <rsr:LinkCredentials>
     <!--Optional:-->
     <rsr:Login>***main</rsr:Login>
     <!--Optional:-->
     <rsr:Password>****@3api</rsr:Password>
  </rsr:LinkCredentials>
 </soap:Header>
  <soap:Body>
  <rsr:Login>
       <!--Optional:-->
       <rsr:userName>***main</rsr:userName>
     <!--Optional:-->
     <rsr:password>****@3api</rsr:password>
  </rsr:Login>
  </soap:Body>
 </soap:Envelope>';

    $URL = "http://115.254.89.1:8090/RSRS_APITest/RSRSAPI.asmx?wsdl";
    $header = array(
                    "Content-type: text/xml;charset=\"utf-8\"",
                    "Accept: text/xml",
                    "Cache-Control: no-cache",
                    "Pragma: no-cache",
                    "SOAPAction: \"run\"",
                    "Content-length: ".strlen($tresc),
                    );

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,            $URL);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 10);
    curl_setopt($ch, CURLOPT_TIMEOUT,        10);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true );
    curl_setopt($ch, CURLOPT_POST,           true );
    curl_setopt($ch, CURLOPT_POSTFIELDS,     $xml_data);
    curl_setopt($ch, CURLOPT_HTTPHEADER,     $header);

    $output = curl_exec($ch);
    print_r($output);
    curl_close($ch);
?> 
```

# jquery - iPad 上的 jQuery 工具提示 mouseout 修复

> ID：15406556
> 
> 赞同：1
> 
> 时间：2013-03-14T10:21:51.287
> 
> 标签：jquery, ipad, tooltip

我使用 jQuery 工具提示，它可以正常工作但在 iPad 上不行，当我单击链接时会显示工具提示，然后我无法摆脱它！

我包括了这个插件

`<script src="js/jquery.ui.touch-punch.min.js"></script>`

例如，它适用于拖动，但不处理工具提示的鼠标移出，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-24T18:00:50.760

在这里的答案中可以找到各种建议：[Closing jQuery Tools tooltip on iphone/ipad with touchstart](https://stackoverflow.com/questions/10977400/closing-jquery-tools-tooltip-on-iphone-ipad-with-touchstart?rq=1)

我最终切换到 Bootstrap 工具提示并使用以下内容：

```
 $('#myButton').tooltip().click(function(e) {
                    $(this).tooltip('toggle');
                }); 
```

根据您的要求，类似的东西可能适用于 jQuery。

# java - 在 Java 企业应用程序中使用翻译映射时，如何获得良好的编码风格和易于维护？

> ID：15406558
> 
> 赞同：3
> 
> 时间：2013-03-14T10:21:56.297
> 
> 标签：java, coding-style, code-formatting

想象一下，您正在编辑一个大型的后台企业 Java 应用程序，其他人可能会在几年后在该应用程序中闲逛。这意味着您必须保持代码干净且易于理解，性能可能不是第一要务。

有一个模块需要

1.  从对象中提取数据
2.  地图数据参数，例如 SE -> Sweden [目前仅适用于本模块并在此模块中使用]
3.  将这些新参数发送到某个地方（例如通过电子邮件/xml）

对于一小组数据，我会使用一个小的 HashMap，但是必须转换的自定义数据表已经增长到 3 个 HashMap，其中一些元素大约有 100 个。我将它们放在一个名为 Translator.Java 的文件中

我有一个方法：

```
public String getCountryCode(String country) {
    return countryCodes.get(country);
} 
```

这是由

```
countryCodes = new HashMap<String, String>() {{
    put("Andorra", "AD");
    put("Afghanistan", "AF");
    ...
}}; 
```

它看起来很丑！但我的选择似乎是：

1.  在新数据库中创建一个数据库表，当编码人员只想查看什么映射到什么时，这会增加另一层混淆。也不需要更改这些数据，如果是这样，最好作为代码更改完成，因为数据库不受源代码控制！（我们使用休眠）
2.  将此静态数据存储为配置文件，应用程序使用数据库表进行配置选项，这将增加维护。
3.  使用配置数据库表来存储它，这会起作用，但也可能使其余配置选项更难找到，因为配置表中的其他类型的数据相对较小且具有凝聚力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T19:09:37.710

尝试使用简单的枚举，这是非常有效且易于维护的。

例子：

```
public enum Country {
    ANDORRA("AD"),
    AFGHANISTAN("AF"),
    ...;

    private String code;

    private Country(String code) {
        this.code = code;
    }

    public static String findCountryCode(String country) {
        return valueOf(country.toUpperCase()).getCode();
    }

    public String getCode() {
        return code;
    }
}

public class CountryTest {
    @Test
    public void testGetCode() throws Exception {
        assertThat(Country.findCountryCode("Andorra")).isEqualTo("AD");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T12:34:08.810

**编辑：**我不能从你的问题中完全确定映射应该走哪条路，或者你是否需要能够以两种方式进行查找。以下假设您正在通过国家名称的键查找国家代码作为值。

根据我的经验，3 号是最好的选择。在许多系统架构中，如果您需要更改硬编码映射，则必须重新部署应用程序。

我从您对第一个答案的评论中看到，您的映射可能每 3 年左右更改一次。但是，您不能保证；需求会发生变化，国际关系也会发生变化。

您对 3 号的保留意见是

> 这会起作用，但也可能使其余配置选项更难找到，因为配置表中的其他类型的数据相对较小且具有凝聚力。

解决这一点的方法是为配置数据库中的键设置一个定义明确且清晰的命名约定。例如，您可以在键名中使用多个级别的前缀来缩小配置值的预期使用范围/位置。例如：

```
general.translation.countrycodes.Andorra 
```

# c# - 在 TextBox 中显示来自 dataGridView 的数据？

> ID：15406560
> 
> 赞同：2
> 
> 时间：2013-03-14T10:22:05.177
> 
> 标签：c#

当我在行中单击时，`dataGridView`我喜欢用该行中的数据填充文本框？我怎样才能做到这一点 ？

![示例 ID、姓名、姓氏 ... 现在在 TextBox 中显示](../Images/6a68eb3084c123185458d90ffea85bb5.png)

`dataGridView`（例如`ID=1, Name=s`...）中的此数据显示在`Textbox`Up ??

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T10:30:04.207

您必须实现`SelectionChanged`您的事件`DataGridView`，然后检查选择了哪一行。

```
private void dataGridView_SelectionChanged(object sender, EventArgs e)
{
    DataGridViewCell cell = null;
    foreach (DataGridViewCell selectedCell in dataGridView.SelectedCells)
    {
        cell = selectedCell;
        break;
    }
    if (cell != null)
    {
        DataGridViewRow row = cell.OwningRow;
        idTextBox.Text = row.Cells["ID"].Value.ToString();
        nameTextBox.Text = row.Cells["Name"].Value.ToString();
        // etc.
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-12T18:47:23.270

注册网格的 MouseClick 事件并使用以下代码。

```
private void dataGridView1_MouseClick(object sender, MouseEventArgs e)
{
    DataGridViewRow dr = dataGridView1.SelectedRows[0];
    textBox1.Text = dr.Cells[0].Value.ToString();
     // or simply use column name instead of index
    //dr.Cells["id"].Value.ToString();
    textBox2.Text = dr.Cells[1].Value.ToString();
    textBox3.Text = dr.Cells[2].Value.ToString();
    textBox4.Text = dr.Cells[3].Value.ToString();
} 
```

并在您的加载事件中添加以下行

```
dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-14T17:09:29.727

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    //it checks if the row index of the cell is greater than or equal to zero
    if (e.RowIndex >= 0)
    {
        //gets a collection that contains all the rows
        DataGridViewRow row = this.dataGridView1.Rows[e.RowIndex];
        //populate the textbox from specific value of the coordinates of column and row.
        txtid.Text = row.Cells[0].Value.ToString();
        txtname.Text = row.Cells[1].Value.ToString();
        txtsurname.Text = row.Cells[2].Value.ToString();
        txtcity.Text = row.Cells[3].Value.ToString();
        txtmobile.Text = row.Cells[4].Value.ToString();

    }

} 
```

# asp.net - 如何确认？在 shopify 中安装应用程序之前

> ID：15406562
> 
> 赞同：2
> 
> 时间：2013-03-14T10:22:08.547
> 
> 标签：asp.net, .net, ruby-on-rails, shopify

我创建了一个 shopify 应用程序。当我从 shopify 的应用程序商店单击“安装应用程序”按钮时，它会在回调 URL 中直接重定向到我。但我想要的是：当点击“安装应用程序”按钮时，我需要在安装前显示一个确认屏幕。

请参阅此供参考：（我想做[这样](http://apps.shopify.com/fliptabify)的）。

供参考[.jpg。](http://i.imgur.com/AY14GsL.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:05:46.703

Shopify 会在首次安装应用程序时为您执行此操作。这与 Facebook 和 Twitter 应用程序的工作方式类似。第一次尝试使用它时，会弹出权限屏幕+确认按钮。由于商店已经授权该应用程序，因此后续安装不会这样做。

# matlab - matlab如何建立db2连接？

> ID：15406563
> 
> 赞同：-2
> 
> 时间：2013-03-14T10:22:19.643
> 
> 标签：matlab, db2

matlab如何建立db2连接？我正在运行以下脚本..

```
conn = database('db2','kshitiz','database','COM.ibm.db2os390.sqlj.jdbc.DB2SQLJDriver','jdbc:db2:sample');

ping(conn); 
```

它给了我无效的连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:29:00.677

没有太多数据库或 ping 经验，但来自：[MathWorks 文档上的数据库](http://www.mathworks.com.au/help/database/ug/database.html)

> `conn = database(instance,username,password,Name,Value)` 通过 JDBC 驱动程序连接到数据库实例，连接属性由一个或多个名称、值对参数指定

并从[MathWorks 文档上 ping](http://www.mathworks.com.au/help/database/ug/ping.html)

> 在此示例中，数据库连接 conn 已终止或不成功。
> 
> ```
> ping(conn)
> Cannot Ping the Database Connection 
> ```

我不知道在不了解有关您的数据库的更具体信息的情况下是否有任何人可以提供很多帮助。但我怀疑您错误地使用了该`database`命令 - 仔细检查您的数据库名称（它应该是第一个参数）、您的用户名和密码（第二个和第三个参数）以及您的驱动程序和 url（第四个和第五个参数）都是正确的。

# asp.net-mvc - 需要建议 - 使用第 3 方 UI 网格或从头开始构建自己的网格？

> ID：15406567
> 
> 赞同：0
> 
> 时间：2013-03-14T10:22:29.680
> 
> 标签：asp.net-mvc, jqgrid, kendo-ui, nuget, telerik-mvc

该项目将使用实体框架在 MVC4 中构建。

首先，目标网格应该是这样的（这只是我以图形方式制作的草图，但最终应该是这样的）：

![网格 UI 和功能说明](../Images/6c51b1adb1f2eb98e3bece5b999849e5.png)

它将包含什么，我在质疑什么以及到目前为止我做了什么：

*这些是我到目前为止创建的所有步骤，没有任何网格/第 3 方网格/帮助程序，以避免在接收项目的实际 HTML 时受到限制。

1.  通过动态分组检索的数据 -（完成）
2.  数据是可排序的（ViewBag 排序）并且有分页（IPagedList）（完成）
3.  过滤具有不同值的每一行，如图片示例中的运行范围/搜索范围内 - 不确定如何在不使用 UI 网格的情况下植入它 - 尚未完成。
4.  导出网格，从列表中的网格内动态添加行并按需更新它 - 也是 UI 网格可以以更简单的方式提出的建议，尚未完成。

所以从你到目前为止所了解的情况来看，我应该工作吗？我是否可以使用可以不受限制地处理所有这些选项的第 3 方网格，或者我应该像我迄今为止构建排序/分页一样手动构建所有这些选项？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:34:08.227

首先，您需要记下您的要求，如果您无法在 Grid 中实现它的关键部分，那么选择 3rd 方控件将是更好的选择。

MVC Grid请查看Telerik、Syncfusion等领先产品的demo链接。

[Syncfusion MVC 网格演示](http://mvc.syncfusion.com/demos/ui/grid)

[Telerik MVC 网格](http://demos.telerik.com/aspnet-mvc/razor/grid)

您可以在一段时间内评估这些控件，如果它满足您的需求，您可以继续使用一种产品。

大多数产品供应商都会提供将网格导出为 PDF/Excel/Word 的选项。

**更新：**

我猜 Syncfusion MVC Grid 将满足您的要求。它们具有基本功能的过滤。

*   它将在过滤器选择列表中加载不同的值。

*   您可以过滤区分大小写的字符串值，反之亦然。

*   可以根据其数据类型过滤值。

*   可以使用客户过滤器过滤值。

*   可以使用过滤器令牌进行过滤。

最好检查以下链接。

[http://mvc.syncfusion.com/demos/ui/grid/Filtering/ServerFiltering](http://mvc.syncfusion.com/demos/ui/grid/Filtering/ServerFiltering)

[http://help.syncfusion.com/ug/asp.net%20mvc/grid/default.htm#!documents/howtofilterdatausingfiltertokensinthefilterbar.htm](http://help.syncfusion.com/ug/asp.net%20mvc/grid/default.htm#!documents/howtofilterdatausingfiltertokensinthefilterbar.htm)

# javascript - 在 IBM Worklight 中从服务器数据库检索数据

> ID：15406571
> 
> 赞同：-2
> 
> 时间：2013-03-14T10:22:36.753
> 
> 标签：javascript, ajax, ibm-mobilefirst

我正在 IBM worklight 中开发一个应用程序。通过 Ajax，我必须连接到网站并从中检索数据，但它给出了 thisd 错误：

> 未捕获的类型错误：无法在 file:///data/data/com.Test/files/www/default/Test.html:80 处调用 null 的方法“getElementsByTagName”

我该如何解决？我的代码是这个

```
<!DOCTYPE HTML>

<html>
<head>
<script>window.$ = window.jQuery = WLJQ;</script>
<title>Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
<link rel="stylesheet" href="css/Test.css">
<script>
function loadXMLDoc()
{
var xmlhttp;
var txt,x,i;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    xmlDoc=xmlhttp.responseXML;
    txt="";
   // x=xmlDoc.getElementsByTagName("Id");

var table = xmlDoc.getElementsByTagName("table");
var tds = table.getElementsByTagName("td");
alert(tds);
for (var i = 0; i < tds.length; i++) {
  alert(tds[i].innerHTML);
}

  /*    for (i=0;i<x.length;i++)
      {
      txt=txt + x[i].childNodes[0].nodeValue + "<br>";
      }  */
    document.getElementById("myDiv").innerHTML=txt;
    }
  }
xmlhttp.open("GET","http://www.marketing.com/msb_en.html",true);
xmlhttp.send();
}
</script>
</head>
<body id="content" style="display: none;">

<h2>MCollection:</h2>
<div id="myDiv"></div>
<button type="button" onclick="loadXMLDoc()">collection</button>
<!--<input type="button" value="button name" onclick="window.open('https://www.google.com.pk')" />  -->
    <!--application UI goes here-->
    <script src="js/initOptions.js"></script>
    <script src="js/Test.js"></script>
    <script src="js/messages.js"></script>
</body>
</html> 
```

我的第 80 行是

```
var table = xmlDoc.getElementsByTagName("table"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:18:21.663

当您尝试使用时，看起来 xmlDoc 为空。确保您的服务器正在返回您所期望的内容，并且您正在正确访问响应中的数据。

一些与您的问题没有直接关系的建议。jQuery 已经加载到您的应用程序中。您可能要考虑使用它的 AJAX 功能而不是直接使用 XMLHttpRequest。

此外，如果您使用 Worklight，您可以考虑同时使用 HTTPAdapter 而不是 AJAX。如果您没有利用 Worklight 提供的功能，而不仅仅是浏览器来编写代码，那么也许您应该为您的平台寻找其他选项。

# nlp - 实时解析自然语言问题的工具

> ID：15406585
> 
> 赞同：0
> 
> 时间：2013-03-14T10:23:34.163
> 
> 标签：nlp, stanford-nlp, opennlp

```
photos in washington VS show me photos in washington VS I wanna see all my photos in washington taken day before yesterday

what:photos
entities:washington (dont want to be too assuming)
when: 2013-03-14 
```

我想将预设查询解析为条件（如上）。我想要这些品质：

1.  即使存在绒毛（“我想看到”）和小写名词，我也可以提取相关术语
2.  温暖的程序可以接受通过 HTTP 的请求或允许我添加一些网络通信
3.  温暖的程序在 50ms 内响应，并且需要最多 500Mb 的内存用于合理的句子
4.  我在 Python 方面更有经验，在 Java 方面经验较少
5.  解析器数据结构易于处理

我使用 NLTK，但速度很慢。我认为 StanfordNLP 和 OpenNLP 是可行的替代方案，但我发现程序启动延迟太高。如果我别无选择，我不介意将它们集成到 servlet 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:27:02.007

斯坦福解析器是一个可靠的选择，并且得到了很好的支持（正如研究代码一样）。但听起来低延迟对你来说是一个重要的要求，所以我也建议你看看[BUBS Parser](https://code.google.com/p/bubs-parser/)（完全披露——我是研究 BUBS 的主要研究人员之一）。

我没有直接与 NLTK 进行比较，但我想您可能会发现 Stanford Parser 无法满足您的性能需求。[本文](http://nlp.stanford.edu/pubs/lrecstanforddeps_final_final.pdf)发现总吞吐量约为 60 字/秒（约 2-3 句/秒）。这些时间已经很老了，所以更新的硬件肯定会改善这一点，但可能仍然不会接近 50 毫秒的延迟。

正如您所注意到的，启动时间对于任何解析器都是一个问题 - 高精度模型必然非常大。而且 500 MB 可能也很紧凑（我通常运行 1-1.2 GB 的 BUBS）。但是一旦加载，BUBS 延迟通常在每个句子 10 毫秒左右（对于大约 20-25 个单词的句子），我们可以在准确度开始下降之前将总吞吐量提高到 2500 单词/秒左右。我认为这些数字可能满足您的性能需求，而且我不知道有任何其他速度接近的高精度 (F1 >= 88-89) 解析器。

注意：最快的结果是使用尚未发布到网站上的最新修剪模型，但如果您需要，我可以为您提供模型。希望对您有所帮助，如果您有更多问题，请随时提问。

# javascript - 如何推送页面而不是覆盖它

> ID：15406592
> 
> 赞同：0
> 
> 时间：2013-03-14T10:23:59.960
> 
> 标签：javascript, css, iframe, user-interface, overlay

我不知道要在这里实现什么的技术术语。我会用外行的方式来解释它，并希望学习：

我创建了一个浏览器扩展，它根据满足的某些条件覆盖浏览器左侧的页面。现在我想推送页面而不是覆盖，这样现有的浏览器页面就会被推送页面的大小缩短。

（PS：这个术语对我来说是全新的，所以如果你觉得可以随时编辑问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:44:16.480

一种方法是在页面上注入 iframe 并在此 iframe 内显示覆盖页面。将 iframe 设为绝对。将边距添加到应该等于 iframe 宽度的 body 标签。那会满足你的要求。

HTML：

```
<h1>Sample</h1>
<p>test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test test </p>
<iframe id="iframex" src="http://vivekgupta.com"></iframe> 
```

CSS：

```
body{
margin-right:200px;
}
#iframex {
    border:0;
    margin:0
    padding:0;
    display: inline-block;
    position:absolute;
    width:200px;
    height:100%;
    right:0;
    top:0;
    bottom:0;
} 
```

这是小提琴：http: [//jsfiddle.net/YLMWe/](http://jsfiddle.net/YLMWe/)

# asp.net-mvc-3 - 访问控制器中的图像

> ID：15406597
> 
> 赞同：0
> 
> 时间：2013-03-14T10:24:03.100
> 
> 标签：asp.net-mvc-3, image

我可以创建一个只返回图像的控制器吗？

`[LOGO]`每当请求这样的变量时，我想通过控制器路由此逻辑，

控制器将查找`logo.png`图像并将其替换为变量`[LOGO]`。

我不想使用视图。我想只用控制器来完成这一切。

这可能吗？

我通过以下代码尝试了某种方式，

```
EmailHelper.SendEmail(
    Constants.EmailSender.CandidateSupport,
    candidate.Email,
    Constants.EmailSubject.CandidateUpdateProfile,
    Constants.EmailBody.CandidateUpdateProfile
    .Replace("[LOGO]", Url.Content("~/Content/Images/logo_small2.png")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:08:18.323

我不完全确定您需要什么，但回答“我可以创建一个仅返回图像的控制器吗？” 你可以这样做：

```
public FileResult Image(string filePath)
{
    //get your stream
    return File(stream, "image/png");
} 
```

显然，鉴于您要从文件系统返回项目，您需要考虑安全性。

# cross-browser - 与浏览器兼容的画布绘图

> ID：15406601
> 
> 赞同：0
> 
> 时间：2013-03-14T10:24:18.077
> 
> 标签：cross-browser, html5-canvas, internet-explorer-10

在我的应用程序中，我创建了 Canvas 并开始用铅笔绘制线条、矩形和绘图。在 Firefox 和 Chrome（最新版本）上一切正常。仅 IE 的问题。当我用铅笔在画布上绘制时，它不是在鼠标指向点绘制（绘制在光标点的一点顶部）。我 `IE version 10`只用过。需要为 IE 10 上的浏览​​器兼容性问题添加任何代码？

**注意：**它在 IE 9 上运行，但是，如果我将浏览器版本更改为 IE 10 兼容性视图，它会显示`This Browser doesn't support Html 5\. Try with higher version`

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:16:08.720

IE-10 兼容性视图使 IE-10 与早期版本的 IE 兼容。Canvas 不适用于 IE-9 之前的版本。[使用http://code.google.com/p/explorercanvas/downloads/list](http://code.google.com/p/explorercanvas/downloads/list)上的 explorercanvas可以让画布与早期版本一起使用。

您的脚本在 IE-10 中是否可以在未打开兼容性的情况下工作？它应该做。

# c# - EF嵌套表急于加载？

> ID：15406603
> 
> 赞同：0
> 
> 时间：2013-03-14T10:24:24.217
> 
> 标签：c#, entity-framework, lambda, eager-loading

我的表关系：

`Categories`有很多`Posts`有很多`PostImages`

我想检索类别>LastPost>FirstPostImage。我尝试了以下类似的方法：

```
var categories = entity.Categories
                 .Where(x => x.PositionId == 2)
                 .Include(x => x.Posts.Last())
                 .Include(x => x.Posts.Last().PostImages.First())
                 .Take(5)
                 .ToList(); 
```

问题：有没有一种优雅的方式来实现这一点？嵌套关系表是否经常使用急切加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:41:47.857

EF 不支持对包含表的查询，但您可以`Select`对子查询使用子句：

```
var categories = entity.Categories
  .Where(x => x.PositionId == 2)
  .Select( x => new {
    Category = x,
    LastPost = x.Posts.Last(),
    FirstImage = x.Posts.Last().PostImages.First(),
  })
  .Take(5)
  .ToList(); 
```

你最终会得到一个`List<anonymous>`，但它会得到（只是）你需要的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T11:59:22.267

我建议您使用数据传输对象（DTO）。只需创建新类：

```
public class CategoriesPostPostImagesDto
{
     public Categories Category {get;set;}
     public Posts Post {get;set;}
     public PostImages PostImage {get;set;}

} 
```

然后从数据库中选择数据给它。

```
List<CategoriesPostPostImagesDto> data = entity.Categories
  .Where(x => x.PositionId == 2)
  .Select( x => new CategoriesPostPostImagesDto(){
    Category = x,
    Post = x.Posts.Last(),
    PostImage = x.Posts.Last().PostImages.First(),
  })
  .Take(5)
  .ToList(); 
```

网上有很多关于 DTO 的资料：

像这样： [ADO.NET EF - 当我们有外键时填充 DataGridView](https://stackoverflow.com/questions/14960982/ado-net-ef-populate-datagridview-when-we-have-foreign-key/14961428#14961428)

# google-play - 谷歌play账号，意外删除

> ID：15406604
> 
> 赞同：3
> 
> 时间：2013-03-14T10:24:26.867
> 
> 标签：google-play

我在谷歌上托管我的电子邮件域。我已经使用其中一封电子邮件在 google play 中注册（支付 25 美元的费用）。不幸的是，我不小心删除了这个电子邮件帐户。恢复并登录到 google play 后，它告诉我，我没有注册为开发者，必须再次支付 25 美元的费用。

我用[这个表格](https://support.google.com/googleplay/android-developer/contact/dev_registration?rd=1)联系谷歌没有运气（2天过去了）。可能，谷歌只是忽略了电子邮件，因为我不知道“开发者帐户注册的结帐订单号”。它在已删除的电子邮件帐户中。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:57:49.287

我已经设法恢复我的帐户。4 天后，谷歌支持回复了我的电子邮件。我告诉他们我的订单号，所以他们只寄回了 25 美元，然后我再次注册了帐户（幸运的是，我的帐户中没有任何已发布的应用程序）

# c# - 从集合类 c# 中删除项目

> ID：15406608
> 
> 赞同：0
> 
> 时间：2013-03-14T10:24:48.207
> 
> 标签：c#

我有一个书籍收藏课。我有一个我想使用的删除方法，那是在我添加书籍之后。这是我的书：

```
myList<Book> lst = new myList<Book>();
        lst.addItem(new Book("Dumas", "Alexandre", "The Count Of Monte Cristo", 1844));
        lst.addItem(new Book ("Clark", "Arthur C",  "Rendezvous with Rama", 1972 ));
        lst.addItem(new Book("Dumas", "Alexandre", "The Three Musketeers", 1844)); ;
        lst.addItem((new Book ("Defoe",  "Daniel",  "Robinson Cruise",  1719)));
        lst.addItem(new Book ("Clark",  "Arthur C",  "2001: A space Odyssey",  1968 )); 
```

我的删除方法如下所示：

```
public void removeItem(T item)
{
    Array.Resize(ref items, items.Count() -2);
} 
```

因此，如果我想从列表中删除例如第一本书，我尝试这样做：

```
lst.removeItem(0); 
```

但是我收到一条错误消息，说“方法'removeItem'没有重载需要0个参数”

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:36:04.913

> 但是我收到一条错误消息，说“方法'removeItem'没有重载需要0个参数”
> 
> 我做错了什么？

```
public void removeItem(T item) // <-- code within brackets is the "overload"
{
    Array.Resize(ref items, items.Count() -2);
} 
```

由于您为方法创建的构造函数只接受一个参数，因此您只能通过将单个参数传递给该方法来使用该方法。

如果它确实接受“0 个参数”，它将需要一个如下所示的构造函数：

```
public void RemoveItem()
{
    // your code here
} 
```

但是，由于您**需要**将至少一个参数传递到您的方法中，因此这不会解决您的问题。

要收到错误“方法 'removeItem' 没有重载需要 0 个参数”，您必须`removeItem`像这样调用：

```
RemoveItem(); 
```

所以我建议按 CTRL+F 并搜索`RemoveItem();`以找到它在您的项目中的位置。

你所做的这个方法需要一个“T”类型的参数`removeItem(T item)`

因此，您应该收到一条错误（无法转换为类型）消息，因为您将整数传递给`0`不接受整数的方法，它接受您的“T”类型。

正如许多人在评论中已经指出的那样，您应该为此使用 .NET 提供的[List 类。](http://msdn.microsoft.com/en-gb/library/6sh2ey19.aspx)当微软已经创建并微调它时，重新发明轮子是没有意义的。

另一个提示，虽然这不会影响您的代码，但命名方法的标准是 Pascal Case。所以你应该调用它`RemoveItem`而不是`removeItem`

# c++ - 从二值图像中检索的绘制轮廓

> ID：15406609
> 
> 赞同：1
> 
> 时间：2013-03-14T10:24:53.917
> 
> 标签：c++, visual-c++, opencv, drawing, contour

我想`findContours`与二进制图像一起使用，但回调函数会导致错误：

> 指定给 RtlFreeHeap 的地址无效

返回时。

当我想使用`clear()`释放`vector<vector<Point> >`值时，它会导致相同的异常，并且代码在 free.c 中的行中崩溃：

```
if (retval == 0) errno = _get_errno_from_oserr(GetLastError()); 
```

例如：

```
void onChangeContourMode(int, void *)
{
    Mat m_frB = imread("3.jpg", 0);
    vector<vector<Point>> contours
    vector<Vec4i> hierarchy;
    findContours(m_frB, contours, hierarchy, g_contour_mode, CV_CHAIN_APPROX_SIMPLE);
    for( int idx = 0 ; idx >= 0; idx = hierarchy[idx][0] )
    drawContours( m_frB, contours, idx, Scalar(255,255,255), 
    CV_FILLED, 8, hierarchy );
    imshow( "Contours", m_frB );
} 
```

谁能帮我？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:41:44.673

```
Mat m_frB = imread("3.jpg", CV_LOAD_IMAGE_GRAYSCALE); 
```

加载`3.jpg`为 8bpp 灰度图像，因此它不是二进制图像。特定于[`findContours`](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#findcontours)“*非零像素被视为1。零像素保持0，因此图像被视为二进制”的功能*。另请注意，此*“功能在提取轮廓的同时修改图像”*。

`CV_8UC3`这里的实际问题是，虽然目标图像是 8bpp，但在将 RGB 轮廓绘制到其中之前，您应该确保它具有 3 个通道。试试这个：

```
// find contours:
vector<vector<Point> > contours;
vector<Vec4i> hierarchy;
findContours(m_frB, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE);

// draw contours:
Mat imgWithContours = Mat::zeros(m_frB.rows, m_frB.cols, CV_8UC3);
RNG rng(12345);
for (int i = 0; i < contours.size(); i++)
{
    Scalar color = Scalar(rng.uniform(50, 255), rng.uniform(50,255), rng.uniform(50,255));
    drawContours(imgWithContours, contours, i, color, 1, 8, hierarchy, 0);
}
imshow("Contours", imgWithContours); 
```

# jquery - span:contains() 找到许多数字

> ID：15406612
> 
> 赞同：1
> 
> 时间：2013-03-14T10:25:08.710
> 
> 标签：jquery, selector, contain

这段代码：

```
if( $('span:contains("'+user_choice+'")').length == 0 ) 
```

使用[包含](http://api.jquery.com/contains-selector/)选择器查找`<span>`包含用户输入的 。用户输入`user_choice`是一个数字，比如`1`or `23`or`31`等​​。

但是代码无法找到具体的`<span>`，因为例如用户输入`user_choice = 1`会同时找到`1`and`21`和and*包含*`31`的所有数字。我只需要找到*确切*的具体内容。 *`1``<span>` *`1`**

 **为此目的选择器是否`contain`错误，我该如何纠正它以使其工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:30:01.797

你可以使用`filter`方法。

```
var len = $('span').filter(function(){
     return $(this).text() == user_choice;
}).length; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T10:30:09.987

是的，`contains`选择器不符合您的目的。顾名思义，它匹配包含指定文本作为子字符串的任何元素，而不仅仅是那些完全匹配的元素。

您可以尝试使用[`.filter()`](http://api.jquery.com/filter/)：

```
var matchingElements = $('span').filter(function(index) {
    return $(this).text() === user_choice;
});
if(matchingElements.length === 0) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:29:24.557

这样的事情怎么样？

```
$('span').each(function(){
  if ($(this).html() == user_choice){
   return true;
  }
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T10:31:00.297

尝试每个功能，它将比较“span”的所有标签

```
$('span').each(function(){
  if ($(this).text() == "my_choosen_var"){
    return true;
  }
}); 
```**

# android - 安卓手机屏幕定位

> ID：15406613
> 
> 赞同：2
> 
> 时间：2013-03-14T10:25:10.287
> 
> 标签：android, android-screen

我的新应用程序面临挑战，我想找到面向天花板或地板的 android 手机屏幕。我能用 android 传感器做到这一点。如果有人尝试过这个，请分享您的宝贵想法和教程（如果有）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:43:46.593

您可以使用`SensorEventListener`来实现这一点。请查看我的以下代码以更好地理解。您还可以[在](http://developer.android.com/guide/topics/sensors/sensors_overview.html)开发人员文档中查看有关传感器的更多信息。

```
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;

public class SensorClass implements SensorEventListener {
    private float   mInR[];
    private float   mI[];
    private float   mGravity[];
    private float   mGeomag[];
    private float   mOrientVals[];

    final float rad2deg = 180/((float) Math.PI);

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // Do something here when accuracy changed
    }

    @Override
    public void onSensorChanged(SensorEvent event) {
        float azimuth = 0f;
        float pitch = 0f;
        float roll = 0f;

        // If the sensor data is unreliable return
        if (event.accuracy == SensorManager.SENSOR_STATUS_UNRELIABLE)
            return;

        // Gets the value of the sensor that has been changed
        switch (event.sensor.getType()){  
        case Sensor.TYPE_ACCELEROMETER:
            mGravity = event.values.clone();
            break;
        case Sensor.TYPE_MAGNETIC_FIELD:
            mGeomag = event.values.clone();
            break;
        }

         if (mGravity != null && mGeomag != null){
            // checks that the rotation matrix is found
            if (SensorManager.getRotationMatrix(mInR, mI, mGravity, mGeomag)){

                // magnetic north and the horizon respectively
                SensorManager.getOrientation(mInR, mOrientVals);

                azimuth = mOrientVals[0]*rad2deg;
                pitch = mOrientVals[1]*rad2deg;
                roll = mOrientVals[2]*rad2deg;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:51:01.387

在`oncreate`

```
 sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
    List<Sensor> sensorList = sensorManager
            .getSensorList(Sensor.TYPE_ACCELEROMETER);
    if (sensorList.size() > 0) {
        accelerometerPresent = true;
        accelerometerSensor = sensorList.get(0);
    } 
```

注册`SensorEventListener`

```
 sensorManager.registerListener(accelerometerListener,
                accelerometerSensor, SensorManager.SENSOR_DELAY_NORMAL); 
```

和`SensorEventListener`实施

```
private SensorEventListener accelerometerListener = new SensorEventListener() {

    public void onAccuracyChanged(Sensor sensor, int accuracy) {            
    }

    public void onSensorChanged(SensorEvent event) {
        float z_value = event.values[2];
        if (z_value == 10) {
            // up facing
        } else if(z_value == -10)
            // down facing
        }           
    }
}; 
```

在我的两个设备中，当它朝上和水平时它显示 z_values = 10，而在相反的情况下它显示 - 10。检查你的案例。

# objective-c - 如何调试从主线程以外的线程获取网络锁？

> ID：15406618
> 
> 赞同：0
> 
> 时间：2013-03-14T10:25:37.027
> 
> 标签：objective-c, xcode4.5

```
void _WebThreadLockFromAnyThread(bool), 0x205acdf0: Obtaining the web lock from a thread other than the main thread or the web thread. UIKit should not be called from a secondary thread. 
```

这看起来很严重。我希望程序在那时中断。我不觉得我可以从主线程之外的任何地方访问 UIKit。

但是，警告就在那里，我不知道在我的代码中发生了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:42:40.813

这意味着您的代码在某个时候从非主线程调用。问题是你不记得或不知道在哪里。你只是觉得你没有，但实际上你的代码确实如此。

我的建议是重动态断言。**在每个可疑的方法和函数**上安装线程检查断言。例如，

```
- (void)test
{
   NSAssert([[NSThread currentThread] isMainThread], @"This code is expected to be called from main thread!");
} 
```

然后断言最终会使您的应用程序在无效的线程上下文中崩溃。如果你不是那么幸运，你可以在每个方法上安装断言。

无论如何，一旦断言失败，您就可以从那里开始。如果你发现了不好的地方，下面的步骤只是微不足道的。

# web-services - Fiddler 阻止了一些 HTTPS 连接，例如 Dropbox

> ID：15406622
> 
> 赞同：7
> 
> 时间：2013-03-14T10:25:40.397
> 
> 标签：web-services, dropbox, fiddler

我从事一个对 web 服务进行 ajax 查询的项目，所以我使用 fiddler 来查看 JSON 响应。

但是我在使用 Fiddler 时遇到了麻烦。当我在笔记本电脑上启动它时，Dropbox 无法再同步我的文件，但我可以调试我的 ajax 请求。真正的问题是当我在台式计算机上使用 Fiddler 时，我对 WebService 的所有请求都被阻止了。我的 WebService 在本地主机上运行。

我不明白它是如何工作的，你能帮我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T16:51:39.463

Dropbox 连接不起作用，因为该应用程序使用了一种名为“Certificate Pinning”的功能，该功能拒绝 Fiddler 的 HTTPS 拦截证书。Fiddler 书中讨论了为什么会发生这种情况，但[您可以将 Fiddler 配置为不解密 dropbox.exe 的连接](https://groups.google.com/forum/#!msg/httpfiddler/1A8Aks8ymPY/ZalTbWW0DV4J)，从而解决该问题。

> 为避免在 Fiddler 运行时阻止 DropBox 应用程序流量，您可以使用工具 > Fiddler 选项 > HTTPS 来仅解密浏览器流量，或者您可以将 Fiddler 配置为不解密到 *.dropbox.com 的流量。

![在此处输入图像描述](../Images/e210285160468b498d6fba44c2bf216e.png)

您的“WebService”问题几乎可以肯定是完全不相关的。您需要更具体地为任何人提供帮助：客户是什么？服务是用什么写的？发生这种情况时，您在 Fiddler 中看到了什么？

# python - flask-sqlalchemy 从数据库视图中给出空结果

> ID：15406623
> 
> 赞同：3
> 
> 时间：2013-03-14T10:25:43.443
> 
> 标签：python, sqlalchemy, flask

我有模型：

```
from flask.ext.sqlalchemy import SQLAlchemy 
db = SQLAlchemy()
class Graph(db.Model):
    __tablename__ = 'graph_view'
    group = Column(Unicode(250), primary_key=True)
    port_id1 = Column('portid1', Integer)
    port_id2 = Column('portid2', Integer)
    equipment_id1 = Column('equipmentid1', Integer)
    equipment_id2 = Column('equipmentid2', Integer) 
```

其中 graph_view 是数据库视图。连接后我正在做 SELECT：

```
 Graph.query.all() 
```

我什么也没得到。查询没有错我能做些什么来解决这个问题？

# android - 大实数的和是整数而不是实数

> ID：15406630
> 
> 赞同：2
> 
> 时间：2013-03-14T10:25:54.837
> 
> 标签：android, sqlite, floating-point, sum

我创建了一个包含一些值的表：

```
db.execSQL("create table table_test ("
                + "id integer primary key autoincrement," 
                + "money real not null" + ");");

ContentValues cv;
cv = new ContentValues();
cv.put("money", "137.38");
db.insert("table_test", null, cv);

cv = new ContentValues();
cv.put("money", "136975.00");
db.insert("table_test", null, cv); 
```

然后我试图得到一笔钱：

```
cursor = db.query("table_test", new String[] { "total(money) as money" }, null, null, null, null, null);
    if (cursor.moveToFirst()) {
      do {
        String money = cursor.getString(cursor.getColumnIndex("money"));
        Log.d(tag, "money=" + money);
      } while (cursor.moveToNext());
    }
cursor.close(); 
```

答案应该是 137112.38，但它四舍五入到 137112 - 我不明白为什么。

如果我不输入大数字，它可以正常工作，但是对于大数字，我只能得到结果的整数部分。

# tomcat - BIRT 报告临时文件在 GBs tomcats birt-viewer/documents 中立即增长

> ID：15406632
> 
> 赞同：1
> 
> 时间：2013-03-14T10:26:03.033
> 
> 标签：tomcat, birt

我们的服务器硬盘被 tomcats birt-viewer 临时文件填充。它会立即以令人难以置信的方式填充 GB（10GB-100GB）并且 tomcat 被击中。需要始终删除 tomcat/webapp/birt-viewer/documents 中的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T08:23:53.517

*   您使用的是哪个 BIRT 版本？
*   临时目录中留下了哪些文件/文件夹？

旧 BIRT 版本中的临时文件存在一些问题，但应从 4.2.2 版本开始修复： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=401068](https://bugs.eclipse.org/bugs/show_bug.cgi?id=401068)

# java - 如何按原样将文本 HTTP 响应读入字符串？

> ID：15406634
> 
> 赞同：1
> 
> 时间：2013-03-14T10:26:05.607
> 
> 标签：java, bufferedreader, readline, eof, carriage-return

以下代码使用 BufferedReader 从 HTTP 响应流中读取：

```
final StringBuilder responseBuilder = new StringBuilder();
String line = bufferedReader.readLine();
while (line != null) {
    responseBuilder.append(line);
    responseBuilder.append('\n');
    line = bufferedReader.readLine();
}
response = responseBuilder.toString(); 
```

但是附加`'\n'`到每一行似乎有点缺陷。我想完全按原样返回 HTTP 响应，那么如果它在最后一行之后没有返回字符怎么办？无论如何都会使用上面的代码添加一个 - 有没有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:29:28.263

> 我想按原样返回 HTTP 响应

那就不要使用`readLine()`了——就这么简单。我建议使用 a`StringWriter`代替：

```
StringWriter writer = new StringWriter();
char[] buffer = new char[8192];
int charsRead;
while ((charsRead = bufferedReader.read(buffer)) > 0) {
    writer.write(buffer, 0, charsRead);
}
response = writer.toString(); 
```

请注意，如果编码错误，即使这样也不起作用。要保留*准确的*HTTP 响应，您需要将其作为*二进制*流读取（和写入）。

# coding-style - IController、IObserver 等类名前的前缀“I”是什么？

> ID：15406635
> 
> 赞同：0
> 
> 时间：2013-03-14T10:26:11.253
> 
> 标签：coding-style, code-conversion

我正在学习MVP模式。在一些例子中，我看到了这个！任何人都可以证明为什么程序员使用这种命名约定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:28:36.397

通常我在那里表示一个接口。没有 I 是一个类。我个人不是这个的粉丝。我认为它在点网中更常见。我在Java中没有看到太多

不喜欢的理由：

*   IDE 现在显示指示类是否为接口的图标。
*   如果我想将接口更改为抽象类，则必须重命名该类
*   它损害了可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:28:02.790

“I”代表接口。将接口与类/结构区分开来是一种常见的命名约定。

接口*不是*类——它们定义行为，类提供实现。

阅读 MSDN 上的这篇文章以获取更多信息：[在类和接口之间选择](http://msdn.microsoft.com/en-gb/library/vstudio/ms229013%28v=vs.100%29.aspx)

> 接口定义了实现者必须提供的一组成员的签名。接口不能为成员提供实现细节。例如，ICollection 接口定义了与使用集合相关的成员。每个实现接口的类都必须为这些成员提供实现细节。类可以实现多个接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T19:13:02.023

[当匈牙利符号](http://en.wikipedia.org/wiki/Hungarian_notation)被认为是一个好主意时，它是一个人工制品。它让用户知道该名称是用于接口的。

而且，这是一种极其愚蠢的做法。

接口的名称应该反映它所表示的类之间的契约类型。它不应该**告诉**您它与哪个类相关联。

应该是`class PDF extends Document implements Printable`因为它让您知道类`print()`出于某种原因实现了方法*（在现实世界中，这实际上是一个糟糕的 API 设计，但这是一个示例）*而不是`class PDF extends Document implements IDocument`.. 因为这什么也没告诉**您**。

# sbt - 有没有办法使用 sbt 对 android-scala 项目执行 robolectric 测试？

> ID：15406636
> 
> 赞同：2
> 
> 时间：2013-03-14T10:26:13.700
> 
> 标签：sbt, robolectric

阅读[roboletric 文档](http://pivotal.github.com/robolectric/)，我看到它使用 maven，它希望看到一个基于 java 的项目，而不是一个 scala 项目。

但是，我正在使用 intellij + scala + android，如本文[所述](http://i-apply.blogspot.gr/2012/09/android-scala-intellij-on-ubuntu-for.html)。

你怎么能在像上面这样的 android-scala 项目上执行 robolectric 测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-10T23:54:16.187

到目前为止，似乎有两个主要选择：

*   [RoboTest](https://github.com/zbsz/robotest) - 将 RoboElectric 与 ScalaTest 测试库集成
*   [RoboSpecs](https://github.com/jbrechtel/robospecs) - 将 RoboElectric 与 Specs2 测试库集成

它们似乎都易于使用。并且两者**都不**支持在同一个 JVM 中并行执行测试。RoboTest 似乎能够通过为每个测试分叉进程来并行运行测试。

# java - 访问属性文件：Java 和 Linux

> ID：15406637
> 
> 赞同：0
> 
> 时间：2013-03-14T10:26:16.523
> 
> 标签：java, linux, log4j

这是我的文件夹结构

```
proj    
   --src   
   --config    
   --bin 
```

在linux它的

```
/home/proj/src
/home/proj/config 
```

我的配置文件夹包含 log4j 属性文件。

我正在尝试在 linux 中执行我的 java 类。

这就是我在我的 java 类中访问它的方式（这肯定是错误的）

```
String propFile = "/../config/Log4jprop.properties";
ClassLoader systemClassLoader = ClassLoader.getSystemClassLoader();
URL logPropFile = systemClassLoader.getResource(propFile);
PropertyConfigurator.configure(logPropFile); 
```

我需要能够从我在 linux 中的类访问我的属性文件。

我的部分命令如下

```
java -classpath /home/proj/config/Log4jprop.properties:./ Start 
```

如何确保读取日志属性文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:29:20.997

如果您要传递属性文件的路径，那么这是选项：

```
props.load(new FileReader("/home/whatever/config.properties")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:33:33.690

您可以在将类路径设置为“proj”文件夹后执行此操作。

```
 FileInputStream str = null;
    Properties prop = new Properties();
    try 
    {
        str = new FileInputStream("config/Log4jprop.properties");
        prop.load(str);
        PropertyConfigurator.configure(prop);
    }catch( IOException ex ) {
        ex.printStackTrace();
    }finally {
        if( str != null ) {
            try {
                str.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:40:06.150

解决方案之一可能是：

1.  完全删除您的“属性文件读取代码”
2.  运行你的命令

    java -Dlog4j.configuration=/home/proj/config/Log4jprop.properties:./开始

或者：

1.  将您的属性文件重命名为 log4j.properties
2.  将其添加到您的类路径中

# html - 如何在 HTML 中使用双十字

> ID：15406638
> 
> 赞同：0
> 
> 时间：2013-03-14T10:26:16.900
> 
> 标签：html

我应该像下图那样输入什么代码？

![在此处输入图像描述](../Images/b8df26c90c04ffac50612936aa4b79f2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:34:30.320

您可以使用删除线和下划线-

```
.line-through{
text-decoration:line-through;
}

.underline
{
text-decoration:underline;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:25:09.857

您的用法表明您应该使用`<del>`and`<ins>`标签。这实际上赋予了您的标记*意义*，而不仅仅是装饰。

```
I use <del>MAC</del> <ins>Microsoft</ins>! 
```

这些标签也会添加您想要的开箱即用的样式。

资料来源：

*   [`<del>`元素 - Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/HTML/Element/del)
*   [`<ins>`元素 - Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/HTML/Element/ins)

# tridion - 从 LinkInfo 表中获取数据的内容交付标准

> ID：15406645
> 
> 赞同：0
> 
> 时间：2013-03-14T10:26:35.737
> 
> 标签：tridion

我需要根据 url 字段与某个值匹配的位置从链接信息表中获取组件 ID。是否有任何标准可以使用内容交付 api 从 tridion 中的 link_info 表中获取数据。例如

问候， 拉金德拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:22:41.533

组件没有 URL，因此实现起来可能有点棘手。

页面确实有 URL，您可以使用`PageFactory`该类来查找它们，大致如下：

```
PageMetaFactory factory = new PageMetaFactory(publicationId);
PageMeta meta = factory.getMetaByUrl(publicationId, "/my/url");
List<ComponentPresentationMeta> cpMetas = meta.getComponentPresentationMetas(); 
```

这将包含给定页面的所有组件演示的列表。您可以使用`cpMeta.getComponentId()`获取相关组件表示的组件 ID。

您可能想在这里开始询问 Tridion 问题：http: [//tridion.stackexchange.com](http://tridion.stackexchange.com)

# java - Ant Input Task中如何检查输入是否为空？

> ID：15406649
> 
> 赞同：3
> 
> 时间：2013-03-14T10:26:45.943
> 
> 标签：java, ant, build

我有一个需要用户输入的 ant 脚本。我想确保用户输入了正确的输入类型，如果没有，提示他们输入正确的内容。

```
<input message="secure-input:" addproperty="the.password" >
</input> 
```

我必须检查输入是否为空白，然后我会提示他们重新输入。

蚂蚁输入任务有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:48:55.030

如果不满足某些条件，大多数条件子句最多允许您使脚本[失败。](http://ant.apache.org/manual/Tasks/fail.html "失败")我想象你正在从用户那里收集一些输入，所以如果用户提供空密码失败可能不是最好的可用性体验，因为他必须重新输入所有内容......

此外，仅仅测试一个空字符串似乎是一个糟糕的验证，如果用户提交了一堆空格怎么办？

我的（诚然是骇人听闻的）建议如下：

```
<target name="askPassword">
    <local name="passwordToValidate"/>
    <input message="secure-input:" addproperty="passwordToValidate"/>

    <script language="javascript">
        <![CDATA[   
            passwordToValidate = project.getProperty("passwordToValidate");

            //You can add more validations here...
            if(passwordToValidate.isEmpty()){
                println("The password cannot be empty.");
                project.executeTarget('askPassword');
            }
        ]]>
    </script>   

    <property name="the.password" value="${passwordToValidate}"/>       
</target> 
```

所以亮点：

1.  使用[本地任务](http://ant.apache.org/manual/Tasks/local.html "本地任务")为“passwordToValidate”属性设置本地范围（请记住，一旦您在 ant 脚本上设置了属性，大多数任务都不允许您重写它，因此递归会出现问题）
2.  使用脚本测试您的输入（也许添加更多验证）
3.  如果测试失败，再次调用目标
4.  如果测试成功，则将本地范围属性分配给全局范围属性

我的 2 美分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:25:46.323

您可以使用条件任务检查输入是否不为空，但您也可以使用 antcontrib 添加 if/else 并显示用户适当的消息：

```
<if>
    <not>
        <length string="${the.password}" trim="true" when="greater" length="0" />
    </not>
</if>
<then>
    <echo>Your password is empty!</echo>
</then> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:07:00.243

看看[条件](http://ant.apache.org/manual/Tasks/conditions.html)-`condition`任务。

# android - 如何将一个布局的多个“实例”添加到另一个布局中？

> ID：15406650
> 
> 赞同：0
> 
> 时间：2013-03-14T10:26:57.333
> 
> 标签：android, android-layout

我有一个`activity_main.xml`包含以下内容的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/container"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    tools:context=".MainActivity" >
</LinearLayout> 
```

我有一个布局，new_bucket.xml，其中包含以下代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/newEntry"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    tools:context=".MainActivity" >

    <LinearLayout
        android:id="@+id/main"
        android:layout_width="fill_parent"
        android:layout_height="100dp"
        android:background="#253514"
        android:clickable="true"
        android:onClick="toggleAmagar" 
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="text1"
            android:textColor="#ffffff" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/child"
        android:layout_width="fill_parent"
        android:layout_height="150dp"
        android:layout_below="@id/main"
        android:background="#666666"
        android:clickable="true"
        android:onClick="toggleAmagar" 
        android:orientation="vertical">
        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="text2" />

    </LinearLayout>
</LinearLayout> 
```

我想要实现的是以编程方式将几个“实例”添加`new_bucket.xml`到 activity_main.xml 中的主布局。这些实例应该出现在`activity_main.xml`.

我现在有点卡住了。我试图只添加一个 TextView`activity_main.xml`但我什至无法处理......

```
LinearLayout my_root = (LinearLayout) getLayoutInflater().inflate(R.layout.activity_main, null);
LinearLayout A = new LinearLayout(this);
A.setOrientation(LinearLayout.HORIZONTAL);
TextView tv = new TextView(this);
tv.setText("This text should appear somewhere");
A.addView(tv);
my_root.addView(A); 
```

但是那个 TextView 从来没有显示出来。

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:33:01.837

你的意思是这样吗？

```
LinearLayout container = (LinearLayout)findViewById(R.id.container);
View child = getLayoutInflater().inflate(R.layout.new_bucket, container);
container.addView(child); 
```

请参阅[文档](http://developer.android.com/reference/android/view/LayoutInflater.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:38:00.710

```
LinearLayout container = (LinearLayout)findViewById(R.id.container);  
View child = getLayoutInflater().inflate(R.layout.new_bucket, container, false);  
child.setId(0);  
container.addView(child);

if u want to inflate multiple layout use for loop for this. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:59:20.133

layout activity_main.xml // 我为 LinearLayout 添加了一个 Id

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
            android:id="@+id/container"
            android:layout_width="match_parent"
            android:layout_height="match_parent" 
            tools:context=".MainActivity"
             >
        </LinearLayout> 
```

此代码会将您的 new_bucket 添加到您的主 LinearLayout

```
 LinearLayout my_root = (LinearLayout) findViewById(R.id.container, null);
    LayoutInflater mInflater = (LayoutInflater) getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
            View bucket= (View) mInflater.inflate(R.layout.new_bucket, null);
    my_root.addView(bucket); 
```

希望这对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T11:05:31.343

在这么多好人的帮助下，我设法做到了。

我没有改变主要问题的任何布局。

但是java代码现在是这样的：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LinearLayout my_root = (LinearLayout) findViewById(R.id.container);
    LayoutInflater mInflater = (LayoutInflater) getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
    View bucket= (View) mInflater.inflate(R.layout.new_bucket, null);
    my_root.addView(bucket);
} 
```

# mysql - 无法在 MAMP 上具有 2 列的 MySQL 表上应用 WHERE/AND

> ID：15406653
> 
> 赞同：0
> 
> 时间：2013-03-14T10:27:12.607
> 
> 标签：mysql, mamp

我以为我有一个非常简单的查询要执行，但我似乎无法让它工作。

我有这个有 2 列的表：

```
version_id       trim_id
    1               15
    1               25
    1               28
    1               30
    1               35
    2               12
    2               25
    2               33
    2               48
    3               11
    3               25
    3               30
    3               32 
```

我正在尝试获取任何包含 trim_id 子集的版本 ID。假设所有具有 trim_id 25 和 30 的 version_id。我明显的尝试是：

```
SELECT * FROM table WHERE trim_id=25 AND trim_id=30 
```

结果，我期望获得 version_id 1 和 3，但我什么也没得到。

我正在使用最新版本的 MAMP，它有一些奇怪的行为，就像在这种情况下它只是告诉我它的“正在加载”并且从不给我错误消息或其他东西。但这通常是没有数据要返回的情况。

这是 InnoDB，如果有帮助的话。

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:37:17.453

您的查询不起作用，因为您正在使用`AND`并且`trim_id`不能同时具有两个不同的值，因此您需要应用[关系除法](https://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)来获得结果。

您将需要使用类似于以下内容的内容：

```
SELECT version_id
FROM yourtable 
WHERE trim_id in (25, 30)
group by version_id
having count(distinct trim_id) = 2 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/c91b7/3)。

这将返回`version_id`同时具有`25`和的值`30`。然后，如果您想在最终结果中包含其他列，可以将查询扩展为：

```
select t1.version_id, t1.trim_id
from yourtable t1
where exists (SELECT t2.version_id
              FROM yourtable  t2
              WHERE t2.trim_id in (25, 30)
                and t1.version_id = t2.version_id
              group by t2.version_id
              having count(distinct t2.trim_id) = 2); 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/c91b7/8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:29:34.107

```
SELECT *
FROM table
WHERE trim_id IN(25,30) 
```

# web - Struts2 简单的应用程序抛出 HTTP 404 异常

> ID：15406654
> 
> 赞同：0
> 
> 时间：2013-03-14T10:27:14.450
> 
> 标签：web, struts2

我正在运行“Hello World”struts 2 示例。我已将所有必需的依赖项放在“/WEB-INF/lib”位置。我的库位置中有以下罐子：

```
commons.io_2.0.1.jar 
commons-collections-3.2.1.jar 
commons-fileupload-1.2.2.jar 
commons-logging-1.1.1.jar 
freemarker-2.3.16.jar 
ognl-2.6.11.jar 
struts2-core-2.2.3.jar 
xwork-2.0.4.jar 
```

我需要任何其他 jar 文件来运行简单的 Struts2 应用程序吗？

我在运行我的应用程序时收到“HTTP 状态 404 - 请求的资源不可用”异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:05:37.693

检查 web.xml 以及 Eclipse 创建的部署描述符，以了解它是否指向正确的 JSP。即如果jsp在JSP文件夹下，欢迎文件应该是/JSP/welcome.jsp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:11:47.440

仅供参考：过滤器调度程序已在 struts2 中被弃用，我必须建议您使用

org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter 总是最好从更新的开始

并尝试添加 commons-lang3-3.x 文件。它可能会起作用。

# java - 测试通过但没有采取行动 selenium webdriver + testng

> ID：15406655
> 
> 赞同：0
> 
> 时间：2013-03-14T10:27:17.197
> 
> 标签：java, selenium, webdriver, testng

我是 selenium webdriver 的新手，我正在使用 2.31 版本、testng 6.8 和 IE 8 上的防火测试。我正在这个方案中编写我的测试：我有测试类，其中我有带有 testng @Test 注释的方法。它看起来像这样：

```
@Test(description="click Save Button ", dependsOnMethods = { "edit form" })
public void clickSaveButton(ITestContext context) {
    page.clickSaveButton(driver);

} 
```

然后，如您所见，我有一个页面类，我在其中存储元素 id、xpath 等。它像这样：

```
public void clickSaveButton(WebDriver driver){
    Configuration.clickfoundElement(By.id(conf.get("saveButton")), driver);
} 
```

conf 是表示属性文件的对象。最后我有配置类，我会这样想：

```
public static void clickfoundElement(By by, WebDriver driver){
    int attempts = 0;

    while(attempts < 10) {
        try {

            driver.findElement(by).click();
            break;
        } catch(NoSuchElementException e) {
            System.out.println("NoSuchElementException");
            Reporter.log("NoSuchElementException<br/>");
            if(attempts==9){
                throw(e);

            }
        }
        catch(StaleElementReferenceException e) {
            System.out.println("StaleElementReferenceException");
            Reporter.log("StaleElementReferenceException<br/>");
            if(attempts==9){
                throw(e);
            }
        }} 
```

这使我无法拥有 NoSuchElementException 和 StaleElementReferenceException 并且工作得很好。

我的第一个问题是这种方法是否正确？第二个也是最重要的问题是，我有时会遇到以下问题：

Testng 说“clickSaveButton”（在最终报告中）已通过，但实际上 clickSaveButton 操作没有发生（我可以看到它在测试期间看着我的浏览器）。在下一个测试的最后，我有“NoSuchElementException”（特别是当下一个测试不是点击某些东西而只是从 html 组件获取文本时）。当然这个 NoSuchElementException 发生是因为我真的没有要寻找的元素（因为最后一个测试操作没有发生所以我仍然在上一个站点，没有这个元素）你能告诉我为什么会发生这种情况（重要的并不总是但只是有时）以及如何预防？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:08:47.727

我建议您使用显式等待来等待元素可见。这是通过 WebDriverWait 完成的，这将更改您的代码：

```
public void clickSaveButton(WebDriver driver){
    Configuration.clickfoundElement(By.id(conf.get("saveButton")), driver);
} 
```

对此：

```
public void clickSaveButton(WebDriver driver) {
    WebDriverWait doWait = new WebDriverWait(driver, 15 , 100);
    WebElement elementToClick = wait.until(ExpectedConditions.visibilityOfElementLocated(By.id(conf.get("saveButton"))));
    elementToClick.click();
} 
```

它还完全摆脱了您的 clickfoundElement() 方法。这不会阻止 StaleElementExceptions 的发生。StaleElementException 是由正在修改的 DOM 以及要与之交互的元素被销毁然后重新创建引起的。

为了避免 StaleElementExceptions 你有几个选择：

1.  每次使用时始终使用定位器找到元素。
2.  在支持中使用 PageFactory 类。

我个人在所有测试代码中都使用 PageFactories，一个基本示例如下所示：

```
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.FindBy;
import org.openqa.selenium.support.How;
import org.openqa.selenium.support.PageFactory;

public class LoginExample {

  @FindBy(how = How.ID, using = "username")
  private WebElement usernameField;
  @FindBy(how = How.ID, using = "password")
  private WebElement passwordField;
  @FindBy(how = How.ID, using = "login")
  private WebElement submitButton;

  public LoginExample(WebDriver driver) {
    PageFactory.initElements(driver, this);
  }

  public void enterCredentialsAndSubmitForm(String username, String password) {
    usernameField.clear();
    usernameField.sendKeys(username);
    passwordField.clear();
    passwordField.sendKeys(password);
    submitButton.click();
  }
} 
```

@FindBy 注解有效地创建了一个代理 WebElement，每次使用此 WebElement 时，注解中指定的定位器将用于再次找到它，因此不会再出现 StaleElementException 错误（除非您很不幸，元素在几毫秒之间发生了变化Selenium 找到它，然后对其执行操作）。

在上面的示例中，我通过在构造函数中初始化页面工厂有点作弊，您不必这样做，但我发现它通常是一种很好且简单的方法。

有关页面工厂的更多信息，请查看[Selenium Wiki](https://code.google.com/p/selenium/wiki/PageFactory)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:58:22.093

谢谢大家的时间。事实证明，我的问题出现了，因为我正在测试的应用程序中有类似弹出窗口的东西（确切地说是richFaces rich:modalPanel）。这导致该弹出窗口“后面”的 DOM 仍然可见，但无法单击其中的元素。解决我的问题的方法是稍等片刻，让元素可以通过 ExpectedConditions.elementToBeClickable(By by) 进行点击，这确保了我的弹出窗口在关闭它并单击另一个元素后消失了。这使得 Ardesco 做出了最好的回答。多谢一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T07:59:07.877

您没有在 while 循环中增加尝试变量。我不知道正确的方法，但我不会使用 while 循环来搜索元素。也许您应该尝试使用`driver.findElements()`而不是`driver.findElement()`使用一些断言。例如，尝试检查按钮是否真的存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:37:19.737

我可能会通过创建一个 By 变量来解决这个问题，然后将该变量传递给页面对象中的以下方法，如下所示：

```
By saveButton = By.id("saveButton");

public By getSaveButton() {
  waitForElementPresent(saveButton, 15);
  return driver.findElement(saveButton);
}

public void waitForElementPresent(final By locator, int timeout) {
  ExpectedCondition e = new ExpectedCondition<Boolean>() {
    public Boolean apply(WebDriver driver) {
      return driver.findElements(locator).size() > 0;
    }
  };

  WebDriverWait wait = new WebDriverWait(driver, timeout);
  wait.until(e);

} 
```

可以将预期条件更改为所需条件。然后在您的测试中，单击保存按钮：

```
page.getSaveButton().click(); 
```

至于在 IE8 上没有发生 click()，我在 RemoteWebDriver 上看到过类似的行为。确保您的网络驱动程序中有正确的缩放设置，因为这似乎是 click() 未正确触发的原因之一。有些人似乎已经通过点击几次来解决这个问题，这似乎是一个肮脏的解决方案。我对 IE7,8 & 9 click() 的解决方案是执行实际的 onclick javascript 函数 `((JavaScriptExecutor)driver).executeScript("onclickFunction();");`

这只是可接受的，因为测试的主要断言不是应该调用 javascript 函数 onclick 而是测试 javascript 函数是否动态地将元素添加到页面。

关于 StaleElementReferenceException，我会在每个测试中实例化一个新的页面对象，这样你就不会得到陈旧的元素，并且你从一个干净的状态开始。在 JUnit4 中，这将在您的 @Before 方法中。

# c++ - 用于 AVX 和 SSE 的 Visual Studio 的 CPU 调度程序

> ID：15406658
> 
> 赞同：8
> 
> 时间：2013-03-14T10:27:30.847
> 
> 标签：c++, visual-studio, sse, avx

我用两台电脑工作。一种不支持 AVX，一种支持 AVX。让我的代码在运行时找到我的 CPU 支持的指令集并选择适当的代码路径会很方便。我已经按照 Agner Fog 的建议制作了一个 CPU 调度程序（[http://www.agner.org/optimize/#vectorclass](http://www.agner.org/optimize/#vectorclass)）。但是，在我没有 AVX 编译和与 Visual Studio 链接的情况下，启用 AVX 的代码会导致代码在我运行时崩溃。

我的意思是，例如，我有两个源文件，一个是 SSE2 指令集，其中定义了一些 SSE2 指令，另一个是定义了 AVX 指令集和一些 AVX 指令。在我的主函数中，如果我只引用 SSE2 函数，代码仍然会由于启用了 AVX 和 AVX 指令的任何源代码而崩溃。关于如何解决这个问题的任何线索？

编辑：好的，我想我隔离了这个问题。我正在使用 Agner Fog 的矢量类，并将三个源文件定义为：

```
//file sse2.cpp - compiled with /arch:SSE2
#include "vectorclass.h"
float func_sse2(const float* a) {
    Vec8f v1 = Vec8f().load(a);
    float sum = horizontal_add(v1);
    return sum;
}
//file avx.cpp - compiled with /arch:AVX
#include "vectorclass.h"
float func_avx(const float* a) {
    Vec8f v1 = Vec8f().load(a);
    float sum = horizontal_add(v1);
    return sum;
}
//file foo.cpp - compiled with /arch:SSE2
#include <stdio.h>
extern float func_sse2(const float* a);
extern float func_avx(const float* a);
int main() {
    float (*fp)(const float*a); 
    float a[] = {1,2,3,4,5,6,7,8};
    int iset = 6;
    if(iset>=7) { 
        fp = func_avx;  
    }
    else { 
        fp = func_sse2;
    }
    float sum = (*fp)(a);
    printf("sum %f\n", sum);
} 
```

这崩溃了。如果我改为在 func_SSE2 中使用 Vec4f 它不会崩溃。我不明白这一点。只要我没有另一个带有 AVX 的源文件，我就可以单独使用 Vec8f 和 SSE2。阿格纳雾的手册说

“除非指定了 AVX 指令集，否则使用 256 位浮点向量类（Vec8f、Vec4d）没有任何优势，但如果在有和没有 AVX 的情况下使用相同的源代码，则无论如何使用这些类会很方便。在没有 AVX 的情况下编译时，每个 256 位向量将简单地分成两个 128 位向量。”

但是，当我有两个使用 Vec8f 的源文件时，一个使用 SSE2 编译，一个使用 AVX 编译，然后我会崩溃。

Edit2：我可以从命令行让它工作

```
>cl -c sse2.cpp
>cl -c /arch:AVX avx.cpp
>cl foo.cpp sse2.obj avx.obj
>foo.exe 
```

Edit3：但是，这会崩溃

```
>cl -c sse2.cpp
>cl -c /arch:AVX avx.cpp
>cl foo.cpp avx.obj sse2.obj
>foo.exe 
```

另一个线索。显然，链接的顺序很重要。如果 avx.obj 在 sse2.obj 之前它会崩溃，但如果 sse2.obj 在 avx.obj 之前它不会崩溃。我不确定它是否选择了正确的代码路径（我现在无法访问我的 AVX 系统），但至少它不会崩溃。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-17T07:38:32.617

我意识到这是一个老问题，提出这个问题的人似乎已经不在了，但我昨天遇到了同样的问题。这是我的工作。

编译后，您的 sse2.cpp 和 avx.cpp 文件都会生成目标文件，其中不仅包含您的函数，还包含任何所需的模板函数。（例如`Vec8f::load`）这些模板函数也是使用请求的指令集编译的。

这意味着您的 sse2.obj 和 avx.obj 目标文件都将包含`Vec8f::load`使用各自指令集编译的每个定义。

但是，由于编译器将`Vec8f::load`其视为外部可见的，因此它会将其置于目标文件的“COMDAT”部分，并带有“selectany”（又名“pick any”）标签。这告诉链接器，如果它看到这个符号的多个定义，例如在 2 个不同的目标文件中，那么它可以选择它喜欢的任何一个。（这样做是为了减少最终可执行文件中的重复代码，否则这些重复代码会因模板和内联函数的多个定义而膨胀。）

您遇到的问题与此直接相关，因为传递给链接器的目标文件的顺序会影响它选择的文件。具体来说，它似乎选择了它看到的第一个定义。

如果这是 avx.obj，`Vec8F::load`则将始终使用 AVX 编译版本。这将在不支持该指令集的机器上崩溃。另一方面，如果首先使用 sse2.obj，则将始终使用 SSE2 编译版本。这不会崩溃，但即使支持 AVX，它也只会使用 SSE2 指令。

如果您查看链接器“映射”文件输出（使用 /map 选项生成），就可以看到这种情况。以下是相关（编辑）摘录 -

```
//
// link with sse2.obj before avx.obj
//
0001:00000080  _main                             foo.obj
0001:00000330  func_sse2@@YAMPBM@Z               sse2.obj
0001:00000420  ??0Vec256fe@@QAE@XZ               sse2.obj
0001:00000440  ??0Vec4f@@QAE@ABT__m128@@@Z       sse2.obj
0001:00000470  ??0Vec8f@@QAE@XZ                  sse2.obj <-- sse2 version used
0001:00000490  ??BVec4f@@QBE?AT__m128@@XZ        sse2.obj
0001:000004c0  ?get_high@Vec8f@@QBE?AVVec4f@@XZ  sse2.obj
0001:000004f0  ?get_low@Vec8f@@QBE?AVVec4f@@XZ   sse2.obj
0001:00000520  ?load@Vec8f@@QAEAAV1@PBM@Z        sse2.obj <-- sse2 version used
0001:00000680  ?func_avx@@YAMPBM@Z               avx.obj
0001:00000740  ??BVec8f@@QBE?AT__m256@@XZ        avx.obj

//
// link with avx.obj before sse2.obj
//
0001:00000080  _main                             foo.obj
0001:00000270  ?func_avx@@YAMPBM@Z               avx.obj
0001:00000330  ??0Vec8f@@QAE@XZ                  avx.obj <-- avx version used
0001:00000350  ??BVec8f@@QBE?AT__m256@@XZ        avx.obj
0001:00000380  ?load@Vec8f@@QAEAAV1@PBM@Z        avx.obj <-- avx version used
0001:00000580  ?func_sse2@@YAMPBM@Z              sse2.obj
0001:00000670  ??0Vec256fe@@QAE@XZ               sse2.obj
0001:00000690  ??0Vec4f@@QAE@ABT__m128@@@Z       sse2.obj
0001:000006c0  ??BVec4f@@QBE?AT__m128@@XZ        sse2.obj
0001:000006f0  ?get_high@Vec8f@@QBE?AVVec4f@@XZ  sse2.obj
0001:00000720  ?get_low@Vec8f@@QBE?AVVec4f@@XZ   sse2.obj 
```

至于修复它，那是另一回事。在这种情况下，以下直截了当的 hack 应该通过强制 avx 版本拥有自己不同命名的模板函数版本来工作。这将增加生成的可执行文件大小，因为即使 sse2 和 avx 版本相同，它也会包含同一函数的多个版本。

```
// avx.cpp
namespace AVXWrapper {
\#include "vectorclass.h"
}
using namespace AVXWrapper;

float func_avx(const float* a)
{
    ...
} 
```

但是有一些重要的限制 - (a) 如果包含的文件管理任何形式的全局状态，它将不再是真正的全局状态，因为您将拥有 2 个“半全局”版本，并且 (b) 您将无法在 avx.cpp 中定义的其他代码和函数之间传递向量类变量作为参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T11:58:07.380

链接顺序很重要的事实使我认为 obj 文件中可能存在某种初始化代码。如果初始化代码是公用的，则只采用第一个。我无法重现它，但您应该能够在程序集列表中看到它（使用 /c /Ftestavx.asm 编译）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:55:12.820

将 SSE 和 AVX 函数放在不同的 CPP 文件中，并确保编译 SSE 版本 wihout `/arch:AVX`。

# apache - 即使明确设置，Apache 也不会发送 Last-Modified 标头

> ID：15406667
> 
> 赞同：7
> 
> 时间：2013-03-14T10:27:45.817
> 
> 标签：apache

我对 Last-Modified 标头有疑问。

我创建了一个简单的测试页面：

```
<?
header('Last-Modified: Thu, 14 Feb 2013 12:41:31 GMT');
?> 
```

当我使用浏览器打开此测试页面时，如果我检查标题，则没有 Last-Modified 标题。所有其他标准标题设置正确。无论如何，如果我使用 https 访问测试页面，则会设置 Last-Modified 标头。

我还在另一台服务器上尝试了相同的测试，即使没有 https，我也可以看到正确设置的标头。

那么，什么可以阻止/取消设置第一台服务器上的标头？我不包括 httpd.conf 文件，因为它很长。我将只包括缓存部分，即使我没有看到任何错误或与此问题相关的内容：

```
ServerSignature Off
ServerTokens Prod

Header unset ETag
FileETag None
<FilesMatch "(?i)^.*\.(ico|flv|jpe?g|png|gif|js|css).*$">
    Header set Cache-Control "public, no-transform"
    Header unset Vary:
</FilesMatch>
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault A2592000
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType text/plain "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType application/x-javascript "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType image/x-icon "access plus 1 year"
</IfModule> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-16T15:53:17.513

尝试

```
ssi off; 
```

在该域的 nginx 配置中

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-06-22T12:22:59.353

标头似乎没有任何问题，但使用`<? ?>`代替`<?php ?>`可能会导致某些服务器出现问题。

# java - 是否可以在 Netbeans 的项目视图中显示一个类是公共的还是包私有的？

> ID：15406668
> 
> 赞同：5
> 
> 时间：2013-03-14T10:27:47.210
> 
> 标签：java, netbeans, dependency-management, netbeans-plugins, class-visibility

我的团队希望能够清楚地看到包中的哪些类是公开的。不幸的是，在 Netbeans 项目视图中似乎没有任何视觉指示。有什么方法可以添加我们想要的行为吗？如果没有，插件 API 是否允许我自己编写一个添加此行为的插件？

或者，还有哪些其他解决方案可以对包中类的可见性和依赖项进行基本的高级查看？进入每个班级，检查其可见性并进行“查找用法”并不方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:07:12.563

我想，你想检查你的类定义，公共的或私有的。您可以使用查找窗口、搜索“public class”、“private class”关键字、匹配大小写、整个单词，并使用文件模式“*.java”。也许您想使用 UML 图，有一个插件可以做到这一点。

# ruby-on-rails-3 - 升级到 rails 3.2 后，我看到 ActiveRecord::Fixture::FormatError: a YAML error occurred parsing

> ID：15406670
> 
> 赞同：0
> 
> 时间：2013-03-14T10:27:55.043
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, yaml

使用 ruby​​ 1.9.2 升级到 rails 3.2.12 后，我看到以下错误。

> ActiveRecord::Fixture::FormatError：解析 /SampelRails/user_properties.yml 时发生 YAML 错误。请注意，YAML 必须始终使用空格缩进。不允许使用标签。请查看[http://www.yaml.org/faq.html](http://www.yaml.org/faq.html) 确切的错误是：Psych::SyntaxError: could't parse YAML at line 1 column 0

我已经仔细检查了 yml 文件，它们似乎被正确缩进了。

根据[https://github.com/rails/rails/issues/2731](https://github.com/rails/rails/issues/2731) ，这个问题似乎在rails 3.1.1中得到修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-20T23:39:28.883

刚刚遇到同样的问题，但问题是我将[VCR](https://github.com/vcr/vcr)磁带保存在`test/fixtures/vcr_cassettes/*.yml`.
`ActiveRecord::Fixture`被包含 AR 夹具数据以外的内容的 yml 文件弄糊涂了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:00:33.347

nathanvda 发布的链接确实有效。

> 尝试在 config/boot.rb 的开头添加它

```
require 'yaml'
YAML::ENGINE.yamler= 'syck' 
```

[Rails 3 - '无法解析 Yaml'](https://stackoverflow.com/questions/5843104/rails-3-couldnt-parse-yaml?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T14:07:18.763

我只是有同样的问题。通过从夹具目录中删除一个虚拟夹具文件来解决它。那个文件里面除了评论什么都没有。

# c# - 在 lambda 表达式中检查 null - linq

> ID：15406679
> 
> 赞同：4
> 
> 时间：2013-03-14T10:28:09.113
> 
> 标签：c#, asp.net-mvc, linq, jquery-datatables

我正在尝试为高级搜索编写表达式。但是，我需要检查每个属性是否为`null`，否则会抛出错误。

我在下面包含了没有空检查的表达式。

结果使用 jQuery dataTables 输出。

```
filteredPeople = unitOfWork.PeopleRepository.Get().Where(c =>
   IdSearchable && c.personID.ToString().Contains(param.sSearch.ToLower())
   || surnameSearchable && c.Surname.ToLower().Contains(param.sSearch.ToLower())
   || firstNameSearchable && c.FirstName.ToLower().Contains(param.sSearch.ToLower())
   || genderSearchable && c.Gender.ToLower().Contains(param.sSearch.ToLower())
)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T10:33:54.893

试试下面，我基本上把你所有的单独条件检查都放在括号内，以进一步提高可读性，并确保编译器对这个*巨大*逻辑的解释不会得到任何奇怪的结果。

```
filteredPeople = unitOfWork.PeopleRepository.Get()
                .Where(c => (IdSearchable
                        && c.personID != null
                        && c.personID.ToString().Contains(param.sSearch.ToLower()))
                    || (surnameSearchable 
                        && c.Surname != null
                        && c.Surname.ToLower().Contains(param.sSearch.ToLower()))
                    || (firstNameSearchable 
                        && c.FirstName != null
                        && c.FirstName.ToLower().Contains(param.sSearch.ToLower()))
                    || (genderSearchable 
                        && c.Gender != null
                        && c.Gender.ToLower().Contains(param.sSearch.ToLower()))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:32:13.413

试试这个：

```
filteredPeople = unitOfWork.PeopleRepository.Get()
                .Where(c => (IdSearchable
                     && c.personID != null
                     && c.personID.ToString().Contains(param.sSearch.ToLower()))
                   ||
                     .... 
```

来自**[MSDN](http://msdn.microsoft.com/en-us/library/2a723cdk%28v=vs.71%29.aspx)**

条件与运算符 (&&) 对其布尔操作数执行逻辑与，但仅在必要时评估其第二个操作数。

# asp.net - 从 Web 应用程序调用 Windows 应用程序

> ID：15406684
> 
> 赞同：1
> 
> 时间：2013-03-14T10:28:27.680
> 
> 标签：asp.net, c#-4.0, web-applications, desktop-application

我想从 Web 应用程序调用 Windows 应用程序。我试过下面的代码：

这里的“AppA_VB”是我正在运行的桌面应用程序。我有另一个网络应用程序，我在其中添加了桌面应用程序的引用。当我在本地电脑上运行网络应用程序时它工作正常，但不是在发布之后。

AppA_VB.Form1 appAform = new AppA_VB.Form1(); appAform.Show();

```
 var c = GetAll(appAform, typeof(System.Windows.Forms.TextBox));

        foreach (System.Windows.Forms.TextBox t in c)
        {
            if (t.TabIndex == 1)
            {
                t.Text = TxtName.Text;
            }
            if (t.TabIndex == 2)
            {
                t.Text = TxtAddress.Text;
            }

            if (t.TabIndex == 3)
            {
                t.Text = TxtStandards.Text;
            }
        }

        var b = GetAll(appAform, typeof(System.Windows.Forms.Button));

        foreach (System.Windows.Forms.Button btn in b)
        {
            if (btn.Text.ToString().ToLower() == "save")
            {
                btn.PerformClick();
            }
        } 
```

我也试过这个，

System.Diagnostics.Process process1 = new System.Diagnostics.Process();

```
 process1.StartInfo.FileName = Convert.ToString(ConfigurationManager.AppSettings["ExePath"]);

        // Start the process 

        process1.Start(); 
```

发布后它也不起作用。

我在其中缺少什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:07:39.173

它是（安装的应用程序文件夹）缺少正确的权限。我给了它，它工作正常。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T03:57:59.037

您应该尝试 ClickOnce 部署，它允许您将基于 Windows 的应用程序发布到服务器。

试试这个：

```
System.Diagnostics.Process process1 = new System.Diagnostics.Process();
process1.StartInfo.FileName = Request.MApPath("yourFilePath.application");
process1.Start(); 
```

# python - Python noob for 循环？

> ID：15406686
> 
> 赞同：1
> 
> 时间：2013-03-14T10:28:30.407
> 
> 标签：python, for-loop

我有以下变量`request.FILES`，其中包含以下内容：

```
<MultiValueDict: {
    u'uploadedFile': [
        <InMemoryUploadedFile: angularjs1.png (image/png)>,
        <InMemoryUploadedFile: angularjs2.png (image/png)>,
        <InMemoryUploadedFile: angularjs3.png (image/png)>]}> 
```

如果我打电话或打印`request.FILES['uploadedFile']`我只会得到`angularjs3.png`，我需要一个类似`angularjs1.png, angularjs2.png, angularjs3.png`或类似的列表。我想我需要一个 for 循环，但我没有成功如何正确地制作它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:31:56.053

你有一种特殊类型的字典，a `MultiValueDict`。使用该`.get()`方法或`[...]`索引只会让您获得*第一个*值。

您需要改用该[`.getlist()`方法](https://docs.djangoproject.com/en/stable/ref/request-response/#django.http.QueryDict.getlist)：

```
request.FILES.getlist('uploadedFile') 
```

# css - 拆分 Twitter Bootstrap 标签

> ID：15406690
> 
> 赞同：2
> 
> 时间：2013-03-14T10:28:45.417
> 
> 标签：css, twitter-bootstrap, tags, label, padding

我正在使用引导程序的标签来显示我博客的标签。我想做的是将标签“拆分”为两部分：

1.  BG1 颜色的第一部分包含标签字符串
2.  BG2 颜色的第二部分包含标签计数

由于引导程序为每个标签定义的所有填充，这可能并不容易和棘手。
例如，更改第二部分文本背景的简单解决方案将不起作用，因为它只会扩展到字符串的长度而不考虑填充。

您可以在下面找到我想要完成的视觉帮助。

![标签](../Images/e3492e8aedc316d0d9656a75b2aee5ee.png)

所以基本上我需要处理以下 span 标签。

```
<li>
    <a class="label label-info" href="">
        <i class="icon-tag icon-white"></i> 
        another tag
        <span class="tagCountInfo">4</span>
    </a>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:00:28.637

尝试：

```
<li>
    <a class="label label-info" href="">
        <i class="icon-tag icon-white"></i>
        tagName
        <span class="count">4</span>
    </a>
</li> 
```

和

```
.count {
    background-color: #000000;
    border-radius: 0 3px 3px 0;
    margin-right: -4px;
    padding: 2px 4px 3px;
} 
```

当心：这是hacky...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-29T23:08:32.800

关于加入两个彩色徽章/标签，我发现只使用现有的引导类作为徽章，然后只修改匹配角上的边框半径对我有用。

```
<span class="badge-container">
    <span class="badge-1">Another Tag</span>
    <span class="badge-2">4</span>
</span> 
```

CSS（需要字体大小 0 来消除跨度之间的间隙）

```
.badge-container {
    font-size: 0;
    .badge-1 {
        border-radius: 10px 0px 0px 10px;
    }
    .badge-2 {
        border-radius: 0px 10px 10px 0px;
    }
} 
```

# c# - KeyDown KeySuppress 是否取消 KeyUp 事件？

> ID：15406691
> 
> 赞同：4
> 
> 时间：2013-03-14T10:28:50.893
> 
> 标签：c#, .net, winforms, events, keyboard-events

假设我有这个：

```
 private void txtAnalogValue_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {
            //Non-numeric key pressed => prevent this from being input into the Textbox
            e.SuppressKeyPress = true;
        }
    } 
```

还有这个：

```
 private void txtAnalogValue_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {
            try
            {
                UpdateState(double.Parse(((TextBox)sender).Text));
            }
            catch (Exception ex)
            {
                ((TextBox)sender).Text = ioElement.StateVal.ToString("0.00");
            }
        }
    } 
```

我知道这段代码没有多大意义，它只是测试。问题是：KeyDown 事件中的 e.SuppressKeyPress = true 是否会影响 KeyUp 事件，所以不会接受 Enter 键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:37:51.373

不，`e.SuppressKeyPress = true`只会忽略该`Enter`键（它不会转到下一行，并且文本框的 Text 属性不会更改）并且 e.Keycode 将在`KeyUp`. 因此，抑制 中的键`KeyDown`不会影响`KeyUp`事件，并且您的代码应该可以工作。将`UpdateState`在您点击`Enter`中的按钮时调用`TextBox`。您可以尝试使用此代码进行检查：

```
 private void txtAnalogValue_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.A)
            {
                e.SuppressKeyPress = true;
            }
        }

        private void txtAnalogValue_KeyUp(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.A)
            {
                MessageBox.Show("Up");
            }
        } 
```

# c++ - QcustomPlot 不想绘制图形

> ID：15406694
> 
> 赞同：1
> 
> 时间：2013-03-14T10:29:00.090
> 
> 标签：c++, visual-studio-2010, qt, qcustomplot

我是 QCustomPlot 的新手，想开始 QCustomPlot 的第一个示例，它是关于基本用法的。在以下代码中：我总是有一个断点，它在程序即将调试时停止程序（没有错误并且构建成功完成）

```
QCustomPlot *customPlot;

QVector<double> x(101), y(101); 
for (int i=0; i<101; ++i) {
  x[i] = i/50.0 - 1; // x goes from -1 to 1
  y[i] = x[i]*x[i]; // let's plot a quadratic function
}
customPlot->addGraph();
customPlot->graph(0)->setData(x, y);
customPlot->xAxis->setLabel("x");
customPlot->yAxis->setLabel("y");
customPlot->xAxis->setRange(-1, 1);
customPlot->yAxis->setRange(0, 1);
customPlot->replot(); 
```

}

显示的错误是：

```
Unhandled exception at 0x58e828f1 (QtCored4.dll) in ex4.exe: 0xC0000005: 
Access violation reading location 0x00000050. 
```

断点在这里（QList.h 文件）：

```
inline int size() const { return d->end - d->begin; } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-02-21T08:25:27.043

请试试：

```
x[i] = i/50 - 1; 
```

它工作正常

# c# - 在 XAML 中放大图像并保持分离的像素

> ID：15406695
> 
> 赞同：1
> 
> 时间：2013-03-14T10:29:08.537
> 
> 标签：c#, image, xaml, windows-store-apps

在 Windows 应用商店应用程序 (C#/XAML) 中，我想显示一个 10x7 像素的灰度图像，但被放大了，因此可以看到像素。不幸的是，默认情况下，XAML 会混合相邻像素，如下所示，但我希望每个像素都有清晰的边缘，这样我就可以看到像素从哪里开始和在哪里结束。我怎样才能做到这一点？ ![在此处输入图像描述](../Images/6770293cb98405df67600f86632c77c2.png)

# eclipse - 在 Eclipse 中查找未使用的资源文件（.jsp、.xhtml、图像）

> ID：15406696
> 
> 赞同：9
> 
> 时间：2013-03-14T10:29:17.407
> 
> 标签：eclipse, file

我正在**Eclipse**中开发一个大型 Web 应用程序，并且一些资源（我说的是文件，而**不是代码**）正在被弃用，但是，我不知道哪些是，我将它们包含在我的结束战争文件中.

我知道 Eclipse 可以识别进入其目录的文件路径，因为我可以在编辑其中一个*xhtml*页面（使用`Control`）时访问图像或其他页面的链接。但是有没有办法本地化未使用的资源以删除它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:54:23.377

遵循这 3 个步骤将适用于动态页面数量相对有限的网站：

1.  将您的站点安装在`mount`带有`atime`（访问时间）的文件系统上。

2.  尝试使用`wget`.

3.  用于`find`查看最近未访问的文件。

完毕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T17:05:14.823

据我所知，Eclipse 没有这个（也需要这个）。

我将 grep 与 bash 脚本结合使用 - shell 脚本在我的资源文件夹中获取文件，将文件名放入列表中，通过源代码查找列表中的每条记录，如果 grep 找到它，则将其删除。

最后列表打印在控制台上 - 只有未使用的资源保留在列表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:57:48.983

[UCDetector](http://www.ucdetector.org/)可能是您最好的选择，特别是该工具的[自定义](http://www.ucdetector.org/custom.html)标记方面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-27T20:39:25.787

在 Eclipse 中我还没有找到方法。我使用了以下 shell 命令脚本。

**查找 .java 文件中未引用的 .ftl 模板文件**

```
cd myfolder
find . -name "*.ftl" -printf "%f\n" |while read fname; do  grep --include \*.java -rl "$fname" . > /dev/null || echo "${fname} not referenced" ;  done; 
```

或者

**查找 .java、.ftl、.inc 文件中未引用的所有 .ftl 模板文件**

```
cd myfolder
find . -name "*.ftl" -printf "%f\n" |while read fname; do  grep --include \*.java --include \*.ftl --include \*.inc -rl "$fname" . > /dev/null || echo "${fname} not referenced" ;  done; 
```

注意：在 MacOSX 上，您可以使用`gfind`，`find`以防万一`-printf`不工作。

**示例输出**

```
productIndex2.ftl not referenced
showTestpage.ftl not referenced 
```

# image - 生成带有内嵌图像的电子邮件

> ID：15406702
> 
> 赞同：1
> 
> 时间：2013-03-14T10:29:26.423
> 
> 标签：image, email, email-attachments

我正在尝试生成其中插入图像的电子邮件文本。我知道我应该使用语法`<img src="cid:image-id" />`并将图像添加为附件。我试图这样做，结果如下：

```
--===============6239034322813840804==
Content-Type: multipart/alternative;
 boundary="===============6051774682785554910=="
MIME-Version: 1.0

--===============6051774682785554910==
Content-Type: text/plain; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: base64

my email in base64 with text only

--===============6051774682785554910==
Content-Type: text/html; charset="utf-8"
MIME-Version: 1.0
Content-Transfer-Encoding: base64

my email in base64 with html
...
<img src="cid:my-image.png" alt="My Image">
...

--===============6051774682785554910==--
--===============6239034322813840804==
MIME-Version: 1.0
Content-Type: image/png; name="badge-img.png"
Content-Disposition: inline; filename="badge-img.png"
Content-ID: <badge-img.png>
Content-Transfer-Encoding: base64

iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABmJLR0QA/wD/AP+gvaeTAAAACXBI
... 
```

发送时，图片在附件中（可以打开，有效图片）。但在显示的电子邮件内容中，我只看到替代文本“我的图像”，而不是图像。

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:29:13.300

你用的是什么语言？在 C# 中，你需要尝试这样的事情：

[使用 asp.net 发送邮件和嵌入的图像](https://stackoverflow.com/questions/1113345/sending-mail-along-with-embedded-image-using-asp-net)

或者

[在 C# 的邮件正文中附加图像](https://stackoverflow.com/questions/2317012/attaching-image-in-the-body-of-mail-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:21:05.390

好的，我想我找到了问题所在。我必须使用[多部分/相关](https://en.wikipedia.org/wiki/MIME#Related)内容类型并更改结构。我目前有这样的东西

```
<email>
    <part1 content-type=multipart/alternative>
        <subpart1>plain text</subpart1>
        <subpart2>html text</subpart2>
    </part1>
    <part2>
        attachments
    </part2>
</email> 
```

应该有类似的东西

```
<email>
    <part content-type=multipart/alternative>
        <subpart1>plain text</subpart1>
        <subpart2 content-type=multipart/related>
            <subsubpart1>html text</subsubpart1>
            <subsubpart2>attachments</subsubpart2>
        </subpart2>
    </part>
</email> 
```

我仍然需要更改我的代码以适应，但这似乎是问题所在。

# google-analytics - Google Analytics 指标和维度排除组

> ID：15406704
> 
> 赞同：2
> 
> 时间：2013-03-14T10:29:32.263
> 
> 标签：google-analytics, google-analytics-api

有一组 Google Analytics Dimension and Metrics [https://developers.google.com/analytics/devguides/reporting/core/dimsmets](https://developers.google.com/analytics/devguides/reporting/core/dimsmets)其中一些相互不兼容。

需要获取不兼容项目的完整列表。即`ga:visitorType`排除`ga:impressions`, `ga:adClicks`, `ga:adCost`...

我一直在分析页面（网址在上面几行），发现了一个[https://developers.google.com/apps/js/analytics_dm/analytics_dm_js-bundle.js](https://developers.google.com/apps/js/analytics_dm/analytics_dm_js-bundle.js)，最后声明了一些“Cubes” ，但仍然无法获得哪些维度和指标相互排斥的明确列表。

如果有的话，有人可以分享这个列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-04-15T23:38:06.703

我认为这可能是您正在寻找的：

[https://developers.google.com/analytics/ga_cubes.json](https://developers.google.com/analytics/ga_cubes.json)

它在[ga-dev-tools 存储库](https://github.com/googleanalytics/ga-dev-tools/blob/master/lib/handlers/ga_cubes.py)中被引用，它包含一个 9000 多行 JSON 对象，其中包含与特定多维数据集兼容的 Google Analytics 指标和维度的所有分组。

据我所知，这在 Google 的 API 文档中并未公开提及。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-07T14:08:03.923

没有具体的清单。要找出特定列表可能的组合，请单击页面上的全部展开复选框[https://developers.google.com/analytics/devguides/reporting/core/dimsmets#cats=visitor](https://developers.google.com/analytics/devguides/reporting/core/dimsmets#cats=visitor) 然后当您将鼠标悬停在任何特定维度/指标上时复选框出现。检查它并查看变灰的项目[那些是该特定维度/指标不允许的] 这就是我们如何找到所需字段的相关信息

# ant - 覆盖属性文件中的一个值

> ID：15406712
> 
> 赞同：0
> 
> 时间：2013-03-14T10:30:00.750
> 
> 标签：ant, replace

我有一个**属性**文件：

***自定义属性***

此属性文件的内容是：

```
id=sf2j2345kkklljhlaasfsdfafsf543
name=SOME_NAME 
```

的值`id`是一个长的随机字符串。

我想制作一个**Ant**脚本来**替换/覆盖**另一个脚本的值`id`，我尝试使用 Ant`<replace>`语法：

```
<target name="change-id">
      <replace file="custom.properties" token="id" value="aaa" />
</target> 
```

我运行 ant change-id ，属性文件的内容变为：

```
aaa=sf2j2345kkklljhlaasfsdfafsf543
name=SOME_NAME 
```

那是关键“ `id`”被替换而不是它的值。但是我需要将值替换为 " **aaa** " ，如何在 Ant 中实现这一点？

**请不要建议我**设置`token`为`id`' 的随机值，因为该值是随机生成并放在那里的。我只想`id`通过Ant脚本覆盖“”的随机值，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:47:13.057

您可以使用`replaceregexp`任务来完成。尝试像在这个例子中那样做

conf.ini (utf-8)

```
aaa=sf2j2345kkklljhlaasfsdfafsf543
name=SOME_NAME 
```

构建.xml

```
<project name="regexp.replace.test" default="test">

    <target name="test">
        <replaceregexp file="conf.ini" match="^aaa=.*" replace="aaa=newId" encoding="UTF-8" />
    </target>

</project> 
```

我不确切知道这个正则表达式是否正确，但这是你可以做到的方式。

# python - 比较python中两个列表中的单词

> ID：15406716
> 
> 赞同：2
> 
> 时间：2013-03-14T10:30:05.663
> 
> 标签：python, list, compare, words

我会感谢有人在这个可能很简单的问题上提供帮助：我有一长串表格中的单词`['word', 'another', 'word', 'and', 'yet', 'another']`。我想将这些单词与我指定的列表进行比较，从而查找目标单词是否包含在第一个列表中。

我想输出我的哪些“搜索”词包含在第一个列表中以及它们出现的次数。我尝试了类似的东西`list(set(a).intersection(set(b)))`- 但它拆分了单词并比较了字母。

我如何写一个单词列表以与现有的长列表进行比较？以及如何输出共现及其频率？非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T10:33:54.907

```
>>> lst = ['word', 'another', 'word', 'and', 'yet', 'another']
>>> search = ['word', 'and', 'but']
>>> [(w, lst.count(w)) for w in set(lst) if w in search]
[('and', 1), ('word', 2)] 
```

这段代码基本上遍历 的唯一元素`lst`，如果元素在`search`列表中，它会将单词连同出现次数一起添加到结果列表中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T10:32:03.800

使用 预处理您的单词列表`Counter`：

```
from collections import Counter
a = ['word', 'another', 'word', 'and', 'yet', 'another']
c = Counter(a)
# c == Counter({'word': 2, 'another': 2, 'and': 1, 'yet': 1}) 
```

现在您可以遍历新的单词列表并检查它们是否包含在此 Counter-dictionary 中，并且该值会为您提供它们在原始列表中的出现次数：

```
words = ['word', 'no', 'another']

for w in words:
    print w, c.get(w, 0) 
```

打印：

```
word 2
no 0
another 2 
```

或将其输出到列表中：

```
[(w, c.get(w, 0)) for w in words]
# returns [('word', 2), ('no', 0), ('another', 2)] 
```

# java - 我可以在 Java 枚举上使用构建器模式吗

> ID：15406717
> 
> 赞同：17
> 
> 时间：2013-03-14T10:30:08.720
> 
> 标签：java, enums, builder

我正在重写一些代码，并且我已经决定了重新创建类的方式，因为有固定数量的工作表，我将它们创建为枚举。这是基于构建器模式与伸缩式构造器的可读性的决定。

我正在抓取一些 .xls 文件的代码，添加标题（并从其他 .xls 文件中读取一些），也许还有一些子表。然后，它以特定方式将各种这些工作表合并在一起，以在主 Excel 工作簿上制作选项卡。我的问题是某些工作簿选项卡采用不同数量的工作表是参数。我正在尝试应用构建器模式。这是我正在尝试编写的那种代码：

```
public enum workBookSheet {
    mySheet1("Name1","mainSheet1.xls",true,1).addSubSheet("pathToSubSheet1.xls"),
    mySheet2("Name2","mainSheet2.xls",true,2).addHeaderSheet("pathToHeaders.xls").addSubsheet("pathtoSubSheet2.xls");

    private String tabName;
    private String mainSheetName;
    private Boolean available;
    private Integer order;
    private String subSheetName;
    private String headerSheetName;

    private workBookSheet(String tabName, String mainSheetName, Boolean available, Integer order){
        this.tabName = tabName;
        this.mainSheetName = mainSheetName;
        this.available = available;
        this.order = order;
    }
    public workBookSheet addSubSheet(String subSheetName){
        this.subSheetName = subSheetName;
        return this;
    }
    public workBookSheet addHeaderSheet(String headerSheetName){
        this.headerSheetName = headerSheetName;
        return this;
    }

} 
```

java给我的错误似乎是说Java希望我的枚举声明（顶部的“枚举构造函数”的逗号分隔列表）只有构造函数，而不是其他方法。我可以毫无怨言地将这些方法移到下面的“构建器”方法中。

```
public void buildSheets(){
    mySheet1.addSubSheet("pathToSubSheet1.xls");
    mySheet2.addHeaderSheet("pathToHeaders.xls").addSubSheet("pathtoSubSheet2.xls");
} 
```

这是在枚举上实现构建器模式的唯一方法吗？它确实需要我运行一个单独的方法，这并不太麻烦。不过，它确实感觉我正在打破这种模式（我想，如果这行得通，那并不是一件坏事。）

注意，我环顾四周，看看是否有其他人在 SO 或网络上的其他地方问过这个问题。我发现的最接近的是关于枚举和工厂的问题，但这并不能完全回答我的问题。另外我知道这不是构建器模式，因为我没有一个单独的类，然后接受一个创建新枚举的 build() 方法。我想这是我最初设计中问题的根源，但我对 Java 还比较陌生。

那么有没有更好的方法在 Java 枚举上使用构建器模式？还是我“足够接近”？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-29T18:56:58.023

尽管它并不严格符合构建器模式，但简短的回答是肯定的。有点。

缺少的部分无法调用`.build()`以实例化枚举常量，因为 build() 不能使用`new`. 但是您可以获得构建器模式的许多好处。让我们面对现实吧，你不能使用静态工厂方法，枚举常量的内联子类化很奇怪。

这是一个使用 Country 枚举的示例。

```
package app;

import org.apache.commons.lang.StringUtils;
import javax.annotation.Nullable;
import java.util.EnumSet;
import java.util.Set;
import static app.Language.*;
import static com.google.common.base.Preconditions.*;

enum Language {
    ITALIAN,
    ENGLISH,
    MALTESE
}

public enum Country {

    ITALY(new Builder(1, "Italy").addLanguage(ITALIAN)),
    MALTA(new Builder(2, "Malta").addLanguages(MALTESE, ENGLISH, ITALIAN).setPopulation(450_000));

    final private int id;
    final private String name;
    final private Integer population;
    final private Set<Language> languages;

    private static class Builder {

        private int id;
        private String name;
        private Integer population;
        private Set<Language> languages = EnumSet.noneOf(Language.class);

        public Builder(int id, String name) {
            checkArgument(!StringUtils.isBlank(name));

            this.id = id;
            this.name = name;
        }

        public Builder setPopulation(int population) {
            checkArgument(population > 0);

            this.population = population;
            return this;
        }

        public Builder addLanguage(Language language) {
            checkNotNull(language);

            this.languages.add(language);
            return this;
        }

        public Builder addLanguages(Language... language) {
            checkNotNull(language);

            this.languages.addAll(languages);
            return this;
        }
    }

    private Country(Builder builder) {

        this.id = builder.id;
        this.name = builder.name;
        this.population = builder.population;
        this.languages = builder.languages;

        checkState(!this.languages.isEmpty());
    }

    public int getId() {
        return id;
    }

    public String getName() {
        return name;
    }

    @Nullable
    public Integer getPopulation() {
        return population;
    }

    public Set<Language> getLanguages() {
        return languages;
    }
} 
```

如果您有构建常量的常用方法，您甚至可以将静态工厂方法放入构建器中。

所以它不是 Bloch 的构建器，但它非常接近。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T12:07:04.913

您可以使用实例块（通常被*错误地*称为“双括号初始值设定项”）使用任意代码自定义构造：

```
public enum workBookSheet {

    mySheet1("Name1", "mainSheet1.xls", true, 1) {{
        addSubSheet("pathToSubSheet1.xls");
    }},
    mySheet2("Name2", "mainSheet2.xls", true, 2) {{
        // you can use the fluent interface:
        addHeaderSheet("pathToHeaders.xls").addSubSheet("pathtoSubSheet2.xls");
        // but I would prefer coding separate statements:
        addHeaderSheet("pathToHeaders.xls");
        addSubSheet("pathtoSubSheet2.xls");
    }};

    // rest of your class the same...
} 
```

使用这种语法可以让您解决由 builder/fluent 模式施加的限制，`enum`但仍然具有 builder/fluent 模式的简洁性、便利性和灵活性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:49:08.277

`mySheet1, mySheet2`等是遵循第[8.9.1节中定义的 JLS 语法的枚举常量](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.1)

> EnumConstant: Annotationsopt Identifier Argumentsopt ClassBodyopt

因此，您可以通过参数列表（传递给构造函数的参数）跟随枚举常量，但在声明枚举常量时不能调用该枚举常量的方法。最多可以为它添加一个类体。

除此之外，您使用构建器模式构建枚举实例是有问题的，因为通常当您拥有大量实例（字段值的组合）时使用构建器模式，而不是用于少数实例的枚举概念。

# java - 使用 http post 将数据发布到服务器并在 android 中获取响应 true 或 false

> ID：15406720
> 
> 赞同：0
> 
> 时间：2013-03-14T10:30:13.587
> 
> 标签：java, android, json, http-post

我想发布`EmailID`并`Password`使用`AsyncTask`并获得响应 True 或 false，如何做到这一点。我们正在使用`json`. 我看过一些链接，但无法理解。下面是我的代码。提前致谢。

```
private class GetLoginDataTask extends AsyncTask<Void, Void, String[]> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        m_ProgressDialog = ProgressDialog.show(Login.this, "Please wait..", "Retrieving data ...", true);
        m_ProgressDialog.setContentView(R.layout.progress);
        m_ProgressDialog.show();
    }

    @Override
    protected String[] doInBackground(Void... params) {
        // Simulates a background job.
        String mStrings[] = { "" };
        try {
            HttpClient client = new DefaultHttpClient();
            String postURL = "http://192.168.0.126/MeritServices/MeritService.svc/Login";
            HttpPost post = new HttpPost(postURL);
            List<NameValuePair> param = new ArrayList<NameValuePair>();
            param.add(new BasicNameValuePair("EmailID", strEmail));
            param.add(new BasicNameValuePair("Password", strPassword));
            UrlEncodedFormEntity ent = new UrlEncodedFormEntity(param, HTTP.UTF_8);
            post.setEntity(ent);
            HttpResponse responsePOST = client.execute(post);
            HttpEntity resEntity = responsePOST.getEntity();
            if (resEntity != null) {
                Log.i("RESPONSE :::: ", EntityUtils.toString(resEntity));
            }
        } catch (Exception e) {
            e.printStackTrace();
            Log.i("ERROR ::: ", e.toString());
        }
        return mStrings;

    }

    @Override
    protected void onProgressUpdate(Void... values) {
        super.onProgressUpdate(values);
    }

    @Override
    protected void onPostExecute(String[] result) {
        System.out.println("ProgressBar Dismiss");
        super.onPostExecute(result);
        m_ProgressDialog.dismiss();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:08:17.973

在您的代码中，`resEntity`包含您要查找的内容，即您的 JSON 字符串。您可以通过以下方式访问它

```
InputStream inputStream = resEntity.getContent(); 
```

然后读取字符串。这是如何完成的一个例子：http:
[//misha.beshkin.lv/httpresponse-entity-to-string/](http://misha.beshkin.lv/httpresponse-entity-to-string/)

但是，如果服务器端发生了任何意外情况，因此它不会返回 JSON，您需要在访问实体的内容之前找出它。您可以通过检查状态码来做到这一点：

```
Integer responseCode = responsePOST.getStatusLine().getStatusCode(); 
```

然后，您可以检查响应代码。如果是 200，则“OK”，一切顺利。404 是找不到页面，500 是内部服务器错误，还有更多。当然这也取决于你的服务器的实现。
你可以在这里查看所有状态码的定义：http:
[//www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

如果您只想知道您的帖子成功并且服务器回复“OK”，那么处理状态代码可能就足够了。

# twitter-bootstrap - Twitter Bootstrap - 背景颜色淡出

> ID：15406721
> 
> 赞同：0
> 
> 时间：2013-03-14T10:30:14.630
> 
> 标签：twitter-bootstrap, fade

我正在使用 Twitter Bootstrap 来构建我的网站，但是`well`课程有问题。随之而来的灰色背景颜色`div class="well"`逐渐消失，几秒钟后变为白色。

有人有线索可以防止这种情况吗？

# xml-signature - 使用先前嵌入的 xades 消息验证 xades 消息

> ID：15406726
> 
> 赞同：0
> 
> 时间：2013-03-14T10:30:39.450
> 
> 标签：xml-signature, xades4j

我们正在验证嵌入了多个嵌入式 xades (BES) 消息的消息。以前已被验证为有效。（也嵌入了签名。）

```
<Messsage1>
    <OtherTags>
    ...Change location A...
    </OtherTags>
    <PreDocument>
        <Messsage2>
        <OtherTags>
        ...Change location B...
        </OtherTags>
        <PreDocument>
            <Messsage3>
            <OtherTags>
            ...Change location C...
            </OtherTags>
            <Signature>
            ...
            </Signature>
            </Messsage3>
        </PreDocument>
        <Signature>
        ...
        </Signature>
        </Messsage2>
    </PreDocument>
    <Signature>
    ...
    </Signature>
</Messsage1> 
```

目前，只有在“更改位置 C”所做的更改才会使消息无效。“更改位置 A”和“更改位置 B”的更改不会影响消息的有效性，甚至可以删除整个结构。

这是预期的行为吗？有可能改变行为吗？（这样每次更改都会使消息无效）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:31:42.757

更改 XML 对签名有效性的影响取决于两个事实：

*   引用中的 URI：如果您更改受引用保护的 XML blob 中的某些内容，这将（并且必须）使您的签名无效。

*   您在参考中使用的转换以及您为它们和 ds:SignedInfo 使用的规范化算法。例如，如果您使用独占规范化算法，则在封装 XML blob 中的某处添加名称空间不会使您的签名无效。希望这可以帮助。

# types - 可以检索到 class.tupleof() 项目的名称吗？

> ID：15406727
> 
> 赞同：1
> 
> 时间：2013-03-14T10:30:40.017
> 
> 标签：types, tuples, d

在循环**AnObject.tupleof**的结果时，我可以将*大小*或*值*作为字符串获取，但我是否可以通过元组项（编辑）获得更高级的信息，尤其是原始数据名称（如源类中所写）？背景想法是将此属性用作一种*RTTI*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:06:47.093

`.tupleof`返回**值元组**不足以获取字段名称。也没有“数据名称”之类的东西，因为 D 在数据（== 值）和字段名称之间没有任何关系，它仅以其他方式存在。

不过，一些内置特征可能会有所帮助：

```
module test;

class Experiment
{
    class Nested
    {
    }

    Nested nested;
    int plain;
    void delegate() skipped;
}

import std.traits : isCallable, fullyQualifiedName;
import std.typetuple : Filter;

template allFields(alias T)
{
    private template combinedFilter(string name)
    {
        // filter out nested type definitions and methods
        // side effect: will filter out delegate/function pointer fields, don't know if listing those makes sense
        mixin("alias field = " ~ fullyQualifiedName!T ~ "." ~ name ~ ";"); 
        enum combinedFilter = !is(field) && !isCallable!field;
    }

    alias allFields = Filter!(combinedFilter, __traits(allMembers, T));
}

void main()
{   
    pragma(msg, allFields!Experiment);
} 
```

您可以使用此[DPaste](http://dpaste.1azy.net/652d19de)即时试验此代码。

可能有一个更简单的解决方案，但考虑到您的问题措辞，最通用的方法和 D 静态自省能力的小样本可能会更好用。

希望这次我已经理解了这个问题。

# solr - 如何在单个查询中对两个方面查询的结果进行分组..？

> ID：15406730
> 
> 赞同：2
> 
> 时间：2013-03-14T10:30:49.653
> 
> 标签：solr, facet, solr-query-syntax

我有一组文档，其中包含发件人邮件 ID 和收件人邮件 ID。

当我使用诸如`facet.field=senderemailid&facet.limit=10&facet.offset=0`. 这样我就可以获得相应邮件ID发送的邮件总数

结果是

<int name="xxx@e.com" > 157 <int>

<int name="x11@e.com" > 141 <int>

<int name="x22@e.com" > 32 <int>

* * *

同样，当我使用 时`facet.field=recipientmailid&facet.limit=10&facet.offset=0`，我可以获得相应邮件 ID 收到的邮件总数。

结果是

<int name="x1x@e.com" > 4​​1 <int>

<int name="x22@e.com" > 132 <int>

<int name="x2y@e.com" > 92 <int>

一旦我得到结果，我使用java代码对结果进行分组，每个电子邮件ID收到多少封电子邮件并发送多少封电子邮件。这样我无法实现分页。因为两个结果在某些电子邮件ID上不同。

我的期望是，

<int name="x22@e.com" >

```
 < int >  32  < int >

           < int >  132 < int > 
```

<int name="x22@e.com" >

因此，我可以一口气收到发送的电子邮件和收到的电子邮件计数。我不需要使用 java 代码对结果进行分组。

solr 中是否存在将结果分组到 solr 本身的任何方法，这样我就可以避免 java 代码对结果进行分组，并且可以实现分页

**[注意：recipientmailid 和 senderemailid 都是多值的。如果以后有需要我可以将 senderemailid 更改为单值。但是收件人邮件 ID 应该是多值的。]**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:42:15.630

您可以多次使用 facet.field，您将获得两者的方面结果，但它将是两个独立的对象。这样您就可以减少对 solr 的查询。o/p 如下所示

```
 "facet_counts":{
    "facet_queries":{},
    "facet_fields":{
      "sender":[
        "xyz@ghh.com",21,
        "xyz2@ghh.com",11,
        "xyz3@ghh.com",15,
        "xyz4@ghh.com",2],
      "reciever":[
        "xyz3@ghh.com",21,
        "xyz2@ghh.com",12,
        "xyz1@ghh.com",13,
        "xyz9@ghh.com",4], 
```

是的，您需要至少循环一次结果集！！。尝试 facet.pivot 。[这](http://wiki.apache.org/solr/SimpleFacetParameters#facet.pivot)可能会帮助你。这是 solr4.0 的功能

# ios - 如何从 alertview 获取 textview 的值

> ID：15406731
> 
> 赞同：0
> 
> 时间：2013-03-14T10:30:50.250
> 
> 标签：ios, textview, alertview

我无法从我的 alertView 获取 textView 的值

```
UITextView *textView = [[UITextView alloc]initWithFrame:CGRectMake(12, 50, 260, 100)];

    [textView setText:@""];

    UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"put text\n\n\n\n\n\n" message:@"" delegate:self cancelButtonTitle:@"Annuler" otherButtonTitles:@"Envoyer",nil];
    av.alertViewStyle = UIAlertViewStyleDefault;
    [av addSubview:textView];
    [av show]; 
```

它显示带有textview的alertview视图，它很好，我想获得textview的值

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {        
} 
```

你能帮我吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:34:21.887

声明 textView 以供整个班级使用

```
@implementation objectTables
{
    UITextView *textView;
} 
```

然后在你的

```
textView = [[UITextView alloc]initWithFrame:CGRectMake(12, 50, 260, 100)];

    [textView setText:@""];

    UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"Push Notification\n\n\n\n\n\n" message:@"" delegate:self cancelButtonTitle:@"Annuler" otherButtonTitles:@"Envoyer",nil];
    av.alertViewStyle = UIAlertViewStyleDefault;
    [av addSubview:textView];
    [av show]; 
```

和

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {     

   NSString *textViewText = [textView text];

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:32:12.403

您可以使用**- (UITextField *)textFieldAtIndex:(NSInteger)textFieldIndex** ，它将返回**UITextField**的对象。

并从**UITextField**中获取文本。

或者另一种方式是

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

UITextField *TextField = (UITextField *)[alertView viewWithTag:YOURTAG];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:49:03.997

你可以试试这个：

```
UITextView *textView = [[UITextView alloc]initWithFrame:CGRectMake(12, 50, 260, 100)];
[textView setText:@""];
textView.tag = 10;
UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"put text\n\n\n\n\n\n" message:@"" delegate:self cancelButtonTitle:@"Annuler" otherButtonTitles:@"Envoyer",nil];
av.alertViewStyle = UIAlertViewStyleDefault;
[av addSubview:textView];
[av show]; 
```

在代表

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
      UITextView *textView = (UITextView *) [alertView viewWithTag:10];
      NSString *yourText = textView.text;       
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T10:39:56.387

只需`UITextView`在 .h 文件中声明您的

```
UITextView *textView; 
```

并在 .m 文件中

```
textView = [[UITextView alloc]initWithFrame:CGRectMake(12, 50, 260, 100)];

    [textView setText:@""];

    UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"put text\n\n\n\n\n\n" message:@"" delegate:self cancelButtonTitle:@"Annuler" otherButtonTitles:@"Envoyer",nil];
    av.alertViewStyle = UIAlertViewStyleDefault;
    [av addSubview:textView];
    [av show];

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
{
//Gives you the Value of UITextView
        NSLog(@"%@",[textView text]); 
} 
```

或者您可以将其定义为`Extended class`（.m 文件）中的属性并访问它。

```
@Interface yourINterfaceName()
{
@property(nonatomic , retain ) UITextView *textView;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T10:40:50.813

试试这个

```
UITextView *textView = [[UITextView alloc]initWithFrame:CGRectMake(12, 50, 260, 100)];

[textView setText:@""];
textView.tag =10;
UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"put text\n\n\n\n\n\n" message:@"" delegate:self cancelButtonTitle:@"Annuler" otherButtonTitles:@"Envoyer",nil];
av.alertViewStyle = UIAlertViewStyleDefault;
[av addSubview:textView];
[av show];

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

 UITextView *textView = (UITextView *)[alertView viewWithTag:10];
  NSLog(@"%@",[textView text]); 

} 
```

# javascript - 使用 KineticJS 时画布图像不会持续存在？

> ID：15406736
> 
> 赞同：0
> 
> 时间：2013-03-14T10:31:14.930
> 
> 标签：javascript, performance, canvas, html5-canvas, kineticjs

我正在使用 Kinetic JS 构建一个小游戏，其中汽车在赛道上运行。我使用了草的图像，但试图自己建造道路。我的问题是，每当我运行项目时，道路的黑色补丁会闪烁然后消失并且草会出现，而我需要将道路建在草地上。请帮忙。我分享了小提琴。

[http://jsfiddle.net/shivkumarganesh/aKh7V/embedded/result/](http://jsfiddle.net/shivkumarganesh/aKh7V/embedded/result/)

我还提到了以下代码：-

```
/*
Declaration of Road,Since the Road will be in 
both the directions I would be making an algorithm 
to get the road on the canvas and
the the car onto it.
*/
function Car(){}

Car.prototype={
    x:0,
    y:0,
    position:0,
    driver:0,
    booster:true,
    positionNext:0,
    getPosition : function(){return this.position;},
    setPosition : function(position){this.position=position;},
    getDriver : function(){return this.driver;},
    setDriver : function(driver){this.driver},
    getBooster : function(){return this.booster;},
    setBooster : function(booster){this.booster=booster;},
    getPositionNext : function(){return this.positionNext;},
    setPositionNext : function(positionNext){this.positionNext=positionNext;},
    drive : function(newPosition){
        /*Code to steer the car to the new box. Either Animate or keep Dynamic*/}
};

/*Making the Booster Class with Appropriate Getters and Setters*/
function Booster(){}
Booster.prototype={
    position:0,
    x:0,
    y:0,
    getX : function(){return this.x;},
    setX : function(x){this.x=x;},
    getY : function(){return this.y;},
    setY : function(y){this.y=y;},
    getPosition : function(){return this.position;},
    setPosition : function(position){this.position=position;}  
};

/*Road Block Class*/
function Road(){}
Road.prototype={
    x:0,
    y:0,
    bomb:false,
    booster:false,
    position:0,
    getX : function(){return this.x;},
    setX : function(x){this.x=x;},
    getBomb : function(){return this.bomb;},
    setBomb : function(bomb){this.bomb=bomb;},
    getBooster : function(){return this.booster;},
    setBooster : function(booster){this.booster=booster;},
    getPosition : function(){return this.position;},
    drawRoadPatch : function(roadLayer,stage){
        var rect = new Kinetic.Rect({
            x:0,
            y:0,
            width:100,
            height:100,
            fill:'black'
        });
        roadLayer.add(rect);
        stage.add(roadLayer);
    }
};

/*Grass For Background*/
function Grass(){}
Grass.prototype={
    grassImage:'',
    grassX:0,
    grassY:0,
    grassWidth:1000,
    grassHeight:500,
    getGrassX : function(){return this.grassX;},
    setGrassX : function(x){this.grassX=x;},
    getGrassY : function(){return this.grassY},
    setGrassY : function(y){this.grassY=y},
    getWidth : function(){return this.grassWidth;},
    setWidth : function(width){this.grassWidth=width;},
    getHeight : function(){return this.grassHeight;},
    setHeight : function(height){this.grassHeight=height;},

    /*Grass Utility Functions*/
    drawGrass : function(background,stage,image){
        image.onload=function(){
        var grass = new Kinetic.Image({
            x:this.grassX,
            y:this.grassY,
            image:image,
            width:this.grassWidth,
            height:this.grassHeight
            });
        background.add(grass);
        stage.add(background);
        }
    },
    changeBackgroud : function(background,stage,image){
      //This can be used to change the backgroud of page  
    }

};

/*Declaring the Stage*/
var stage = new Kinetic.Stage({
    width:1000,
    height:500,
    container:'container'
    });

/*Defining the assets (Images)*/
var backgroundImage = new Image();
var roadImage = new Image();
/*Defining the Layer (Layers)*/
var background = new Kinetic.Layer();
var roadLayer = new Kinetic.Layer();

var backgrass = new Grass();
var road = new Road();
/*Drawing Functions*/
backgrass.drawGrass(background,stage,backgroundImage);
road.drawRoadPatch(roadLayer,stage);

/*Image for Backgroud*/
backgroundImage.src='https://c9.io/shivkumarganesh/kiectcars/workspace/images/grass.jpg'; 
```

只要运行上面的代码，你就会明白问题所在。有一个黑色闪烁，我希望在草地上作为道路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:46:03.273

**固定的...**

您的 backgroundImage 在被 backgroundImage.src 完全加载之前已在 drawGrass() 中使用。

我将您所有的场景设置移到了 backgroundImage.onload 回调函数中，一切都已修复。

这是重新编写的代码和小提琴：http: [//jsfiddle.net/m1erickson/GyrXr/](http://jsfiddle.net/m1erickson/GyrXr/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript" src="kinetic-v4.3.3.min.js"></script>

<style>
    body{ background-color: ivory; }
</style>

<script>
    $(function(){

/*Road Block Class*/
function Road(){}
Road.prototype={
    x:0,
    y:0,
    bomb:false,
    booster:false,
    position:0,
    getX : function(){return this.x;},
    setX : function(x){this.x=x;},
    getBomb : function(){return this.bomb;},
    setBomb : function(bomb){this.bomb=bomb;},
    getBooster : function(){return this.booster;},
    setBooster : function(booster){this.booster=booster;},
    getPosition : function(){return this.position;},
    drawRoadPatch : function(roadLayer,stage){
        var rect = new Kinetic.Rect({
            x:0,
            y:0,
            width:100,
            height:100,
            fill:'black'
        });
        roadLayer.add(rect);
        stage.add(roadLayer);
    }
};

/*Grass For Background*/
function Grass(){}
Grass.prototype={
    grassImage:'',
    grassX:0,
    grassY:0,
    grassWidth:1000,
    grassHeight:500,
    getGrassX : function(){return this.grassX;},
    setGrassX : function(x){this.grassX=x;},
    getGrassY : function(){return this.grassY},
    setGrassY : function(y){this.grassY=y},
    getWidth : function(){return this.grassWidth;},
    setWidth : function(width){this.grassWidth=width;},
    getHeight : function(){return this.grassHeight;},
    setHeight : function(height){this.grassHeight=height;},

    /*Grass Utility Functions*/
    drawGrass : function(background,stage,image){
        var grass = new Kinetic.Image({
            x:this.grassX,
            y:this.grassY,
            image:image,
            width:this.grassWidth,
            height:this.grassHeight
            });
        background.add(grass);
        stage.add(background);
    },
    changeBackgroud : function(background,stage,image){
      //This can be used to change the backgroud of page  
    }

};

/*Declaring the Stage*/
var stage = new Kinetic.Stage({
    width:1000,
    height:500,
    container:'container'
    });

/*Defining the assets (Images)*/
// after waiting for the backgroundImage to load...!
var backgroundImage = new Image();
backgroundImage.onload=function(){
    var roadImage = new Image();
    /*Defining the Layer (Layers)*/
    var background = new Kinetic.Layer();
    var roadLayer = new Kinetic.Layer();

    var backgrass = new Grass();
    var road = new Road();
    /*Drawing Functions*/
    backgrass.drawGrass(background,stage,backgroundImage);
    road.drawRoadPatch(roadLayer,stage);
}
backgroundImage.src='http://c9.io/shivkumarganesh/kiectcars/workspace/images/grass.jpg';

    }); // end $(function(){});
</script>

</head>

<body>
<div id="container"></div>
</body>
</html> 
```

# python - Python NaiveBayes：为什么我会收到 ZeroDivisionError

> ID：15406737
> 
> 赞同：2
> 
> 时间：2013-03-14T10:31:15.443
> 
> 标签：python, python-2.7, bayesian

我正在尝试`NaiveBayes`Python 库（python 2.7）

我想知道为什么运行这段代码会给我一个`ZeroDivisionError`.

```
#!/usr/bin/env python
import NaiveBayes

model = NaiveBayes.NaiveBayes()

model.set_real(['Height'])
model.set_real(['Weight'])
model.add_instances({'attributes':
                         {'Height': 239,
                          'Weight': 231,
                          },
                     'cases': 32,
                     'label':  'Sex=M'})

model.add_instances({'attributes':
                         {'Height': 190,
                          'Weight': 152
                          },
                     'cases': 58,
                     'label': 'Sex=F'
                     })

model.train()
result = model.predict({'attributes': {'Height': 212, 'Weight': 200}})

print("The result is %s" % (result)) 
```

这是输出：

```
Traceback (most recent call last):
  File "/tmp/py4127eDT", line 24, in <module>
    result = model.predict({'attributes': {'Height': 212, 'Weight': 200}})
  File "/usr/local/lib/python2.7/dist-packages/NaiveBayes.py", line 152, in predict
    scores[label] /= sumPx
ZeroDivisionError: float division by zero 
```

我是贝叶斯分类器的新手，所以我的输入有问题（即：数字的分布，还是没有足够的样本？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:49:05.273

有两个问题：

首先，您使用的是 python 2.7，而[NaiveBayes](https://pypi.python.org/pypi/NaiveBayes)需要 python 3。使用 python 2，它使用的除法转换为整数除法并返回零。

其次，每个标签的每个属性只有一个实例，因此 sigmas 为零。

为您的真实属性添加更多变化：

```
import NaiveBayes

model = NaiveBayes.NaiveBayes()

model.set_real(['Height'])
model.set_real(['Weight'])
model.add_instances({'attributes':
                         {'Height': 239,
                          'Weight': 231,
                          },
                     'cases': 32,
                     'label':  'Sex=M'})

model.add_instances({'attributes':
                         {'Height': 233,
                          'Weight': 234,
                          },
                     'cases': 32,
                     'label':  'Sex=M'})
model.add_instances({'attributes':
                         {'Height': 190,
                          'Weight': 152
                          },
                     'cases': 58,
                     'label': 'Sex=F'
                     })
model.add_instances({'attributes':
                         {'Height': 191,
                          'Weight': 153
                          },
                     'cases': 58,
                     'label': 'Sex=F'
                     })

model.train()
result = model.predict({'attributes': {'Height': 212, 'Weight': 200}})

print ("The result is %s" % (result)) 
```

并使用python3：

```
$ python3 bayes.py
The result is {'Sex=M': 1.0, 'Sex=F': 0.0} 
```

# ajax - @ViewScope 中未调用嵌套的 jsf 侦听器

> ID：15406739
> 
> 赞同：0
> 
> 时间：2013-03-14T10:31:22.633
> 
> 标签：ajax, jsf, listener

目前我有一个类似于 [jsf listener not called inside nested ui:repeat](https://stackoverflow.com/questions/14975758/jsf-listener-not-called-inside-nested-uirepeat)
的问题在我得到这个问题的解决方案后，我将 Mojarra 升级到了 2.1.16 版。
一切正常，直到我实现下面提到的视图。
代码被简化为基础。

xhtml:

```
<form>
  <div>
    // listener is called
    <h:commandLink value="test1">
      <f:ajax event="click" listener="#{testBean.testListener}" />
    </h:commandLink>
    <ui:repeat var="testList" value="#{testBean.testList}">
      // listener is not called !
      <h:commandLink value="test2">
        <f:ajax event="click" listener="#{testBean.testListener}" />
      </h:commandLink>          
    </ui:repeat>
  </div>
</form> 
```

豆：

```
@ManagedBean(name="testBean")
@ViewScoped
public class TestBean {
  private Collection<TestObj> testList;
  public Collection<TestObj> getTestList() {
    return this.testList;
  }

  // the listener
  public void testListener() {
    ...
  }
} 
```

即使我更改`ui:repeat`为`c:forEach`，问题也是一样的！
就像我使用`@SessionScope`而不是`@ViewScope`第二个 commandLink （在迭代内）调用侦听器一样。但我想避免`@SessionScope`吃这个豆子。

关于这个问题的原因以及如何处理，你有什么提示吗？

# mysql - Mysql备份错误

> ID：15406742
> 
> 赞同：0
> 
> 时间：2013-03-14T10:31:34.887
> 
> 标签：mysql, backup

我写了下面的行来创建一个mysql备份，由于某些原因我得到了 Errcode 13 。

```
 E:\Xampp\xampp\mysql\bin\\mysqldump -u root --add-drop-database -B project_db -r C:\Documents and Settings\Administrator\My Documents\a.sql 
```

为什么上面的行无法执行？我正在尝试使用上述行创建数据库备份？请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:37:34.040

尝试这个

E:\Xampp\xampp\mysql\bin\mysqldump -u root --add-drop-database -B project_db > "C:\Documents and Settings\Administrator\My Documents\a.sql"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:34:01.497

这可能是因为文件“C:\Documents”不存在。你可能想要这个：

```
-r "C:\Documents and Settings\Administrator\My Documents\a.sql"
   ^                                                          ^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-31T10:19:10.687

" " 不见了

E:\Xampp\xampp\mysql\bin\mysqldump -u root --add-drop-database -B project_db -r "C:\Documents and Settings\Administrator\My Documents\a.sql"

上面的命令可能有效

# facebook - Facebook sdk 如何从照片 ID 中获取 url

> ID：15406745
> 
> 赞同：0
> 
> 时间：2013-03-14T10:31:43.457
> 
> 标签：facebook, facebook-ios-sdk

我使用 FBRequestConnection 来获取照片的 id 和 post id

但我想知道照片的网址

我能怎么做 ？

我确实使用了 [FBRequest requestForGraphPath:id] ，但没有返回 URL

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:16:45.567

通常每个图形对象都会返回图片帖子的 url，但如果你想获取个人资料图片

" [http://graph.facebook.com/](http://graph.facebook.com/) " + id + "/图片"

其中 id 可以是个人资料 ID 或用户名。例如

[http://graph.facebook.com/jansharkhan/picture](http://graph.facebook.com/jansharkhan/picture)

# macos - mac上的svn - 全局忽略目录

> ID：15406750
> 
> 赞同：0
> 
> 时间：2013-03-14T10:32:00.303
> 
> 标签：macos, svn, directory, ignore

在 mac os x 10.6.8 上运行 svn 版本 1.6.17，命令行 - 我有我希望 svn 忽略的缓存目录。

每次我访问 cackephp 站点时，它都会在几个“缓存”和“缓存”文件夹中创建缓存 .jpg 和其他多达五级的文件。我需要 svn 来忽略这些文件夹以及其中的所有内容，因此不能在每个目录上使用 svn propset。

为了解决这个问题，我编辑了文件 ~/.subversion/config，并在 global-ignores 下添加了 cache、cache*、cached*、cache/、cached/，但这些都不起作用。我测试了向这个项目添加通配符文件名的工作，但我需要递归地忽略目录而不是文件。

[SVN 书](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.ignore.html)只解释了在global-ignores 设置中使用单个目录特定的 svn propset 和通配符文件名。有任何想法吗？

# qt - Qt GLWidget + 树 = 崩溃

> ID：15406754
> 
> 赞同：2
> 
> 时间：2013-03-14T10:32:11.823
> 
> 标签：qt, crash, qtreeview, qglwidget

我是一个 Qt 新手，我正在尝试使用 QGLWidget 和其他一些 UI 控件创建一个 Qt 应用程序。它在启动后短时间内崩溃。

以下是重现问题的步骤。

Mac 上的 Qt 5.0.1。

1.  打开 QTCreator。基于 QMainWindow 类创建新项目。
2.  将 opengl 添加到 .pro 文件：

    ```
    QT       += core gui opengl 
    ```

3.  创建从 QGLWidget 继承的简单 GLWidget 类（它什么都不做）

    ```
    #pragma once

    #include <QGLWidget>

    class GLWidget : public QGLWidget 
    {
        Q_OBJECT
    public:
        GLWidget() {};
    }; 
    ```

4.  在 Designer 中做一些事情：

    *   在主窗口上放置三个垂直布局。
    *   将它们组织在垂直拆分器中。
    *   将 CentralWidget 布局设置为水平。 ![QT Creator 截图](../Images/e0f6feebce23805be7f7109abcdcf7c8.png)
    *   将 GLWidget 添加到窗口的 mainwindow.cpp 代码中的 MainWindow 构造函数中：

        ```
        ui->verticalLayout_2->addWidget(new GLWidget); 
        ```

5.  跑。好的！ ![应用截图](../Images/444f1a885e21b96a4c6f0bef98914f96.png)

6.  将 QTreeView 小部件拖放到设计器的左侧布局中。

7.  再次运行...崩溃！

    ```
    0   __pthread_kill          0x7fff83e5d212  
    1   pthread_kill            0x7fff8b77caf4  
    2   abort           0x7fff8b7c0dce  
    3   qt_message_fatal    qlogging.cpp    868 0x101711a88 
    4   QMessageLogger::fatal   qlogging.cpp    356 0x1017122ae 
    5   qt_assert_x qglobal.cpp 1959    0x10170ba5a 
    6   QWidget::mapTo  qwidget.cpp 3866    0x10019dfb8 
    7   QFocusFramePrivate::updateSize  qfocusframe.cpp 95  0x1003b5785 
    8   QFocusFrame::eventFilter    qfocusframe.cpp 282 0x1003b6173 
    9   QCoreApplicationPrivate::sendThroughObjectEventFilters  qcoreapplication.cpp    863 0x10198103c 
    10  QApplicationPrivate::notify_helper  qapplication.cpp    3390    0x10015affb 
    11  QApplication::notify    qapplication.cpp    3359    0x10015fb49 
    12  QCoreApplication::notifyInternal    qcoreapplication.cpp    767 0x101980baf 
    13  QCoreApplication::sendSpontaneousEvent  qcoreapplication.h  206 0x10016329f 
    14  QWidgetWindow::handleResizeEvent    qwidgetwindow.cpp   448 0x1001e1ef5 
    15  QWidgetWindow::event    qwidgetwindow.cpp   160 0x1001e0e18 
    16  QApplicationPrivate::notify_helper  qapplication.cpp    3394    0x10015b025 
    17  QApplication::notify    qapplication.cpp    2825    0x10015cb3f 
    18  QCoreApplication::notifyInternal    qcoreapplication.cpp    767 0x101980baf 
    19  QCoreApplication::sendSpontaneousEvent  qcoreapplication.h  206 0x100dfc6ff 
    20  QGuiApplicationPrivate::processExposeEvent  qguiapplication.cpp 2169    0x100df8870 
    ... <More> 
    ```

这是 QWidget::mapTo 函数中的断言：

```
 QPoint QWidget::mapTo(const QWidget * parent, const QPoint & pos) const
    {
        QPoint p = pos;
        if (parent) {
            const QWidget * w = this;
            while (w != parent) {
                Q_ASSERT_X(w, "QWidget::mapTo(const QWidget *parent, const QPoint &pos)",
                   "parent must be in parent hierarchy");
                p = w->mapToParent(p);
                w = w->parentWidget();
            }
        }
        return p;
    } 
```

**我该如何解决这个问题？**

# jquery - 从 ajax 获取 json 时显示/隐藏跨度

> ID：15406760
> 
> 赞同：0
> 
> 时间：2013-03-14T10:32:18.043
> 
> 标签：jquery, ajax, getjson, imageicon

我必须显示我使用谷歌分析所做的综合浏览量。下面是我将在其中显示页面视图的 html

```
Pageviews: <span id="pageViews"></span>
           <span id="loadingGA">
                 <img height="12" alt="Loading..." src="../jsonData/images/waiting_icon.gif">
           </span> 
```

如您所见，我有两个跨度，一个将显示页面浏览量，另一个用于显示加载图标，直到获取页面浏览量。我使用的方法是：

```
$("#loadingGA").hide()
    .ajaxStart(function() {
        $(this).show();
    }).ajaxStop(function() {
        $(this).hide();
        $("#pageViews").show();
    }); 
```

以下是我获取页面浏览量的方式

```
function setPageviewsCount(url, displayId) {
var pageViews = "0";
$.getJSON(url, function(googleAnaltyicsData) {
    $.each(googleAnaltyicsData, function(i, gaData) {
        if(!jQuery.isEmptyObject(gaData)) {
            pageViews = gaData.PageViews;
        }
    });
    $(displayId).html(pageViews);
});} 
```

问题是，一切正常，但即使在页面视图加载后加载图标也不会消失。尝试了所有可能的事情。请指导。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:37:17.530

阅读[`.ajaxStop()`](http://api.jquery.com/ajaxStop/)和[`.ajaxStart()`](http://api.jquery.com/ajaxStart/)文档

*引用*

> **然而，从 jQuery 1.8 开始，该`.ajaxStop()`方法只能附加到`document`.**

和

> **然而，从 jQuery 1.8 开始，该`.ajaxStart()`方法只能附加到`document`.**

```
$("#loadingGA").hide();

$(document).ajaxStart(function () {
    $('#loadingGA').show();
}).ajaxStop(function () {
    $('#loadingGA').hide();
    $("#pageViews").show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:37:34.940

根据[jQuery 规范](http://api.jquery.com/ajaxStart/)`.ajaxStart`，您应该`.ajaxStop`仅从`document`jQuery 1.8.0 开始附加。

试试这个：

```
$(document).ajaxStart(function () {
    $("#loadingGA").show();
});

$(document).ajaxStop(function () {
    $("#loadingGA").hide();
}); 
```

# scheme - [SCHEME][GIMP] 如何新建目录/文件夹？

> ID：15406765
> 
> 赞同：2
> 
> 时间：2013-03-14T10:32:26.510
> 
> 标签：scheme, directory, gimp, script-fu

我用方案语言在 Gimp 中编写了一个脚本，我正在寻找一种方法，它允许我创建一个新文件夹而无需通过“SF-DIRNAME”命令。

提前谢谢。

# java - 如何模拟未作为参数传递的对象

> ID：15406769
> 
> 赞同：2
> 
> 时间：2013-03-14T10:32:32.370
> 
> 标签：java, testing, mocking, mockito

想象下面的课

```
public class ClassToBeTested{

  private AnotherClass otherClass;

  public void methodToBeTested(){
     otherClass = new AnotherClass();
     String temp = otherClass.someMethod()

    // ...some other code that depends on temp

  }

} 
```

现在，如果`methodToBeTested`被设计为接受 I 的实例，`AnotherClass`我可以轻松地创建一个模拟`AnotherClass`并告诉 Mockito 在`someMethod()`被调用时返回一个我更喜欢的值。但是，由于上述代码是按照 AFAIK 设计的，因此无法模拟`AnotherClass`和测试此方法将取决于`someMethod()`返回的内容。

无论如何我可以测试上面的代码而不依赖于`someMethod()`使用 Mockito 或任何其他框架返回的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:36:32.700

如果可用，您可以使用 Spring`ReflectionTestUtils` `setField`方法：

[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/test/util/ReflectionTestUtils.html#setField%28java.lang.Object,%20java.lang.String,%20java。 lang.Object%29](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/test/util/ReflectionTestUtils.html#setField%28java.lang.Object,%20java.lang.String,%20java.lang.Object%29)

如果不使用反射编写你自己的非常简单的，这里有一些信息：

[http://www.java2s.com/Code/Java/Reflection/Setprivatefieldvalue.htm](http://www.java2s.com/Code/Java/Reflection/Setprivatefieldvalue.htm)

如下所示，您将需要额外的错误处理才能使其正常工作：

```
public void setField(Object obj, String fieldName, Object value) {
    Field f = obj.getDeclaredField(fieldName);
    f.setAccessible(true);
    f.set(obj, value);
} 
```

然后可以这样调用它：

```
setField(objUnderTest, "fieldToSet", mockObject); 
```

* * *

## 编辑

我刚刚注意到您正在方法中实例化它。如果这是绝对必要的，那么您应该遵循 cyroxx 发布的可能重复的链接。虽然这种做法通常是糟糕设计的标志，所以如果你能把它拿出来，我会的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:02:01.763

按照其他答案中的建议通过反射设置字段将起作用。

但是，如果您经常做这种事情，我会推荐 PowerMock（与 Mockito 一起使用）或 JMockIt 来实现这一点。两者都允许你模拟构造函数、静态变量、最终字段……简而言之，几乎任何东西。对遗留代码非常有用。

但是，当您编写新代码时，并且您的类依赖于您希望以这种方式隔离的另一个类时，您应该考虑更改设计，以便将另一个对象传递给您的类，而不是由它。搜索“依赖注入”，你会发现很多......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:04:37.517

作为快速修复，我通常将调用包装到`new`：

```
protected newAnotherClass() { return new AnotherClass(); } 
```

这样，我可以从单元测试中覆盖这个方法。它很脏但很快:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T16:05:01.540

这是一个[JMockit](http://jmockit.org)测试，它可以满足您的要求，非常简单：

```
@Test
public void testTheMethodToBeTested(@Mocked final AnotherClass dep)
{
    new NonStrictExpectations() {{ dep.someMethod(); result = "whatever"; }};

    new ClassToBeTested().methodToBeTested();

    new Verifications() {{
        // verify other calls to `dep`, if applicable...
    }};
} 
```

# single-sign-on - 使用 LinkedIn 作为 SP 的单点登录 (SSO)。如何让用户自动登录领英？

> ID：15406773
> 
> 赞同：1
> 
> 时间：2013-03-14T10:32:51.753
> 
> 标签：single-sign-on, linkedin, saml, saml-2.0

我的问题涉及如何从我正在制作的公司门户网站自动将用户登录到 LinkedIn (SP)。（与如何在我的网站上使用链接作为 IdP 对用户进行身份验证相反）。

我需要我的网站用户能够配置他们的 LinkedIn 帐户用户名，并在他们单击 LinkedIn 图标时自动登录到 LinkedIn。我通过 Sales Force 使用上传的证书和 SAML 令牌实现了这一点，理想情况下，我可以在 LinkedIn 中使用类似的方法。

这可能吗？有没有其他人设法实现这一目标，最好的方法是什么？

# xslt - Umbraco NiceUrl ToLower

> ID：15406779
> 
> 赞同：1
> 
> 时间：2013-03-14T10:33:00.467
> 
> 标签：xslt, umbraco, tolower

我正在尝试在我的 href 标记中将 URL 更改为更低，这是我的代码：

```
<a href="{$url}{umbraco.library:NiceUrl(@id)}/{$AppendedID}/"> 
```

我已经尝试过使用`Exslt.ExsltStrings:lowercase(node-set)`，因为这会引发错误。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:29:24.913

以下表达式应该有效：

```
Exslt.ExsltStrings:lowercase(concat($url, umbraco.library:NiceUrl(@id), '/', $AppendedID, '/')) 
```

使用以下代码进行测试....

```
<xsl:for-each select="$currentPage">
    <xsl:variable name="url" select="'http://www.EXAMPLE.com'" />
    <xsl:variable name="AppendedID" select="123" />
    <a href="{Exslt.ExsltStrings:lowercase(concat($url, umbraco.library:NiceUrl(@id), '/', $AppendedID, '/'))}">
        <xsl:value-of select="@nodeName" />
    </a>
</xsl:for-each> 
```

.... 呈现的 HTML 应符合 ....

```
<a href="http://www.example.com/some-page.aspx/123/">Some Page</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:39:42.190

我不知道解决这个问题的直接方法，除了使用`Exslt.ExsltStrings:lowercase(node-set)`

但是当你使用它时是否会抛出错误，`umbraco.library:NiceUrl`那么你可以尝试降低字符串并将其存储在临时变量中，然后直接使用这个临时变量。

# php - 如何在没有 php 函数 ceil 的情况下四舍五入一个数字

> ID：15406783
> 
> 赞同：1
> 
> 时间：2013-03-14T10:33:08.937
> 
> 标签：php

我正在尝试构建一个输出将被四舍五入的函数。我知道有一个 php 函数，但我想让这个函数用于另一个目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:35:50.687

你想要天花板而不使用天花板......

```
intval($number + .5) 
```

这是同一件事，但您仍在使用内置函数。

编辑：显然，上面的解决方案不像**我**在 PHP 中想要的那样工作。你可以使用round函数来达到类似的效果

```
round($number + .5) 
```

或类似于另一个答案的东西：

```
$n = intval($number + .5);
if($n < $number){
    $n++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:39:07.670

这个可以吗？

```
function newceil($num)
{
    $re=intval($num);
    if($re<$num) $re++;
    return $re
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T10:41:18.800

您可以通过将小数部分转换为整数来切断小数部分，然后检查如此派生的值是否更小甚至初始值。

```
$input = 3.141592653;
$intVersion = (int) $input;
if($intVersion<$input) $intVersion++;
return $intVersion 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T10:39:50.607

如果你想向上/向下四舍五入你可以使用`round`方法

```
/* Using PHP_ROUND_HALF_UP with 1 decimal digit precision */
 echo round( 1.55, 1, PHP_ROUND_HALF_UP);   //  1.6
 echo round( 1.54, 1, PHP_ROUND_HALF_UP);   //  1.5
 echo round(-1.55, 1, PHP_ROUND_HALF_UP);   // -1.6
 echo round(-1.54, 1, PHP_ROUND_HALF_UP);   // -1.5

 /* Using PHP_ROUND_HALF_DOWN with 1 decimal digit precision */
 echo round( 1.55, 1, PHP_ROUND_HALF_DOWN); //  1.5
 echo round( 1.54, 1, PHP_ROUND_HALF_DOWN); //  1.5
 echo round(-1.55, 1, PHP_ROUND_HALF_DOWN); // -1.5
 echo round(-1.54, 1, PHP_ROUND_HALF_DOWN); // -1.5

 /* Using PHP_ROUND_HALF_EVEN with 1 decimal digit precision */
echo round( 1.55, 1, PHP_ROUND_HALF_EVEN); //  1.6
echo round( 1.54, 1, PHP_ROUND_HALF_EVEN); //  1.5
echo round(-1.55, 1, PHP_ROUND_HALF_EVEN); // -1.6
echo round(-1.54, 1, PHP_ROUND_HALF_EVEN); // -1.5

/* Using PHP_ROUND_HALF_ODD with 1 decimal digit precision */
echo round( 1.55, 1, PHP_ROUND_HALF_ODD);  //  1.5
echo round( 1.54, 1, PHP_ROUND_HALF_ODD);  //  1.5
echo round(-1.55, 1, PHP_ROUND_HALF_ODD);  // -1.5
echo round(-1.54, 1, PHP_ROUND_HALF_ODD);  // -1.5
?> 
```

**注意： ceil 向上取整**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T10:42:21.507

您可以使用`round()`and`floor()`和`number_format()`来向上取整数字。

```
echo round(153.751);     // 154
echo floor(153.751); // 153
echo number_format(153.751); // 154 
```

# iphone - 如何在 Xcode 中获取 HTML 元素？

> ID：15406784
> 
> 赞同：1
> 
> 时间：2013-03-14T10:33:11.253
> 
> 标签：iphone, html, xcode, radio

我有一个我无法解决的问题。

这里是：
我正在尝试为 iPhone 制作一个收音机应用程序。我正在使用在线流，所以我想在标签中显示当前歌曲。
怎么做？
这是当天的歌曲和当前歌曲的列表： http: [//live.radioeuphoria.bg](http://live.radioeuphoria.bg:41232/played.html?sid=1) :41232/played.html?sid=1 。

那么，如何获取显示当前歌曲的 HTML 元素呢？
如何在 Xcode 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:39:15.383

您可以使用`NSURLConnection`将 html 作为字符串获取。然后用于`NSXMLParser`获取标签和值。

`NSURLConnection`： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)

`NSXMLParser`：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)

# javascript - Javascript 为两个表单域设置动画，只需要一个

> ID：15406790
> 
> 赞同：0
> 
> 时间：2013-03-14T10:33:34.497
> 
> 标签：javascript, forms, onclick, this

我有一个搜索和一个订阅字段。我希望它们看起来和感觉都一样，所以我将工作代码从搜索字段复制到订阅字段。当您单击它们时，这些字段应该会展开，并且值会消失，以便用户可以输入自己的值。唯一的问题是，现在当您单击其中一个字段时，两个字段都会出现动画。我认为问题可能出在我对javascript中“this”的理解上，但也许不是。任何帮助将不胜感激。

```
<br />
<form target="_blank" id="subscribe" method="post" action="https://www.myaction.com">
<p>
<input type="hidden" name="username" value="myusername">
<input type="text" name="email" value="Email Address" id="subscribe" onfocus="javascript:if(this.value=='Email Address')this.value='';"   onblur="this.value=!this.value?'Email Address':this.value;" maxlength="100">
</p>
<br />
<input type="submit" value="Subscribe" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:29:29.650

问题最终出现在我的 HTML 中。愚蠢的错误。谢谢你的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:47:14.180

```
<input type="text" name="email" value="Email Address" id="subscribe" onfocus="this.value = this.value ==='Email Address' ? '' : this.value;"   onblur="this.value = this.value || 'Email Address';" maxlength="100"> 
```

# c++ - System V IPC 和新的

> ID：15406793
> 
> 赞同：1
> 
> 时间：2013-03-14T10:33:41.940
> 
> 标签：c++, linux, new-operator

我是 Linux C 和 C++ 编程的新手。我正在尝试为系统 v ipc 消息队列创建一个 C++ 类，但我遇到了 1 个问题。我为这样的消息写了类：

```
class message
{
    friend class queue;
private:
    typedef struct
    {
        long mtype;
    char mdata[maxmsg_buf];
    }msgbuf_t, *msgbuf_ptr_t;

    msgbuf_ptr_t msgbuf_ptr;
public:
    message(void):msgbuf_ptr(NULL)
    {
        msgbuf_ptr = new msgbuf_t;
    }
    ipc::message::message(const long& type, const std::string& data):msgbuf_ptr(NULL)
    {
    msgbuf_ptr = new msgbuf_t;

    msgbuf_ptr->mtype = type;
    if(data.length() <= maxmsg_buf)
    {
    strncpy(msgbuf_ptr->mdata, data.c_str(), data.length());
    }
    }
};

class queue
{
private:
    mutable qid_t qid;
public:
    queue(const key_t& qkey = unique, const perm_t& qperm = usr_rw, const flag_t& qflag = none)
    {
         qid = msgget(qkey, qperm | qflag);
    if(qid == -1)
    {
    throw errno;                //specify exception for queue  
    }
    }
    void send(const ipc::message& msg, const int& sflag) const
    {
    if((msgsnd(qid, &msg.msgbuf_ptr, sizeof(msg.msgbuf_ptr->mdata), sflag)) == -1)
    {
    throw errno;                //specify exception for queue 
    }
    }
};

//Usage:
ipc::queue q(0x0000FFFF, ipc::usr_rw, ipc::create);
ipc::message msg(10L, "First test message for sysVipc queue");

q.send(msg);   //throws EFAULT from here 
```

当我将 msgbuf_ptr 发送到 msgsnd 系统调用时，它返回 EFAULT(Bad address) 错误。所以我的问题是：我可以使用 operator new 分配 msgbuf 吗？PS对不起，如果我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:53:56.430

问题出在您的 queue::send 方法中。 `&msg.msgbuf_ptr`是指向指针的指针。省略地址运算符`&`，你应该没问题。

编辑：没有等待 `msg.msgbuf_ptr->mdata`是你的消息。所以，你应该这样称呼它： `msgsnd(qid, &msg.msgbuf_ptr + sizeof(msg.msgbuf.mtype), sizeof(msg.msgbuf_ptr->mdata), sflag)`

# highstock - Highstock：导出按钮

> ID：15406806
> 
> 赞同：0
> 
> 时间：2013-03-14T10:34:13.093
> 
> 标签：highstock

我遵循了在我的 Highstock 对象中添加导出的简单步骤：

```
 exporting: {
            enabled: true
        } 
```

它没有显示任何按钮。

我还在页面的开头包含了这个：

```
<script src="http://code.highcharts.com/2.2.4/modules/exporting.js" rel="text/javascript"></script> 
```

还有什么我需要做的吗？谢谢

更新：

```
<script src="http://code.highcharts.com/stock/1.2.5/modules/exporting.js" rel="text/javascript"></script>
<script src="http://code.highcharts.com/stock/1.2.5/highstock.js" type="text/javascript"></script> 
```

# java - 如何将 CSV 字符串转换为整数并添加它。存储 txt 文件

> ID：15406807
> 
> 赞同：-2
> 
> 时间：2013-03-14T10:34:13.707
> 
> 标签：java, string, csv, integer

你能帮我解决这个问题吗，我想添加来自 CSV 的 2 个整数并将其存储在 txtfile 中，但问题是它是字符串，如果我将其转换为整数，我会遇到很多错误。谢谢你们。 .

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.FileWriter;
import java.util.ArrayList;
import java.util.List;

public class CSVReader {
public static void main (String[]arg)throws Exception {

    String readFile = "C:/Users/user/Desktop/student.csv";
    String writeFile = "C:/Users/user/Desktop/data.txt";

    // Read a comma-separated values (CSV) file.
    BufferedReader CSVFile = new BufferedReader (new FileReader(readFile));

    // Read line.
    String dataRow = CSVFile.readLine();

    // Create an array of student
    List<Student> students = new ArrayList <Student> ();

    // The while checks to see if the data is null. If
    // it is, we’ve hit the end of the file. If not,
    // process the data.
    while (dataRow !=null){
        String [] dataArray = dataRow.split(",");
        System.out.println(dataRow);
        Student student = new Student();
        student.setStudentName(dataArray[0]);
        student.setScore1(dataArray[1]);
        student.setScore2(dataArray[2]);
        students.add(student);
        dataRow = CSVFile.readLine();
        }

    // Close the file once all data has been read.
    CSVFile.close();

    StringBuilder sb = new StringBuilder();

    FileWriter fw = new FileWriter(writeFile);
    for (Student s : students){
        sb.append(s.studentName);
        System.out.println(s.studentName + " - " + (s.score1 + s.score2));

        // Writing to a text file.
        fw.write(sb.toString());
    }

    // Close the file once all data has been written.
    fw.close(); 
}

} 
```

输出：

```
 che,cheche,chet
  100,100,100
  100,100,100
  null - 0
  null - 0
  null - 0 
```

它应该是：

```
 che,cheche,chet
  100,100,100
  100,100,100
  che - 200
  cheche -200
  chet - 200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:02:33.397

如果您提供的信息是正确的，那么您遇到的主要问题是 CSV 数据是列格式，而不是典型的行格式。我的意思是第一行是名称，下一行是分数。数据的每个“列”都与同一索引处的“标题”匹配。

**您的示例数据：**

```
che, cheche, chet    -- row[0]
100, 100,    100     -- row[1]
100, 100,    100     -- row[2] 
```

所以 row[0] 是名称，但是您正在解析数据，就好像一行的第一项是名称，第二项和第三项是分数 - 根据此示例数据，情况并非如此。

如果你想要分数，你需要为每一行获取正确的索引 - 所以 che 将是 row[1][0] 和 row[2][0]。

如果确实如此，那么您将需要处理第一行以获取名称，然后您将需要处理剩余的行以获取分数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:37:08.203

你可以试试

```
int number = Integer.parseInt("your string here"); 
```

例子：

```
 String one = "1";
   String two = "2";
   System.out.println(Integer.parseInt(one) + Integer.parseInt(two)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:49:58.767

您在代码中犯了一些错误。

1.  学生班级中的分数变量应该是整数。
2.  要将字符串转换为 Integer，您需要使用 Integer.parseInt 方法。理想情况下，您的转换应该在您设置分值的阶段。
3.  为什么要将学生对象添加到 ArrayList。不能直接写入文本文件吗？

# matlab - 找到第一个红色（255,0,0）像素位置？使用matlab

> ID：15406816
> 
> 赞同：0
> 
> 时间：2013-03-14T10:34:31.877
> 
> 标签：matlab

我试图使用matlab在图像中找到第一个红色的像素位置。

我所做的

```
I = imread('test.jpg');

row = size(I,1);
col = size(I,2);

for rr = 1:row
    for cc = 1:col
        if [rr cc :] = [ 255 0 0 ]
            flag =1;
            break;
        end
     end
end 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:37:41.433

你的`if`说法有问题。首先，运算符和运算符
之间存在根本区别（不仅在matlab中）。虽然第一个 ( ) 是一个 **assignment 运算符，但第二个 ( ) 是一个布尔测试 - 这就是您想要的。 其次，您需要比较位置的图像值，而不是位置本身。`=``==``=``==`
`rr,cc`

```
if squeeze( I(rr,cc,:) ) == [255;0;0] 
```

更有可能做你所期望的。

虽然我们正在这样做，但将 matlab 语句向量化是一种更好的做法。就像是：

```
[rr cc] = find( I(:,:,1) == 255 & I(:,:,2) == 0 & I(:,:,3) == 0 , 1, 'first' ); 
```

**编辑：**有关矢量化方法
的更多详细信息：表达式

```
 I(:,:,1) == 255 & I(:,:,2) == 0 & I(:,:,3) == 3 
```

为每个红色像素创建一个 2D 布尔矩阵，其大小与`I`（除了第三维）相同，否则。返回布尔表达式条目 的索引。`true``false`
[`find`](http://www.mathworks.com/help/matlab/ref/find.html)`true`

# security - 在 Firefox 插件中使用 setInterval 的潜在漏洞？

> ID：15406819
> 
> 赞同：1
> 
> 时间：2013-03-14T10:34:39.873
> 
> 标签：security, firefox, firefox-addon, setinterval, add-on

我第一次写了一个 Firefox 插件，几个月前它被审查并接受了。此插件经常调用第三方 API。同时它再次被审查，现在它调用 setInterval 的方式受到批评：

> `setInterval`以潜在危险的方式调用。为了防止漏洞，setTimeout 和 setInterval 函数只能以函数表达式作为它们的第一个参数来调用。引用函数名称的变量是可接受的，但不推荐使用，因为它们不适合静态源代码验证。

这里有一些关于我的插件的»架构«的背景。它使用一个全局对象，它只不过是一个命名空间：

```
if ( 'undefined' == typeof myPlugin ) {
    var myPlugin = {
        //settings
        settings : {},

        intervalID : null,

        //called once on window.addEventlistener( 'load' )
        init : function() {
            //load settings
            //load remote data from cache (file)

        },

        //get the data from the API
        getRemoteData : function() {
            // XMLHttpRequest to the API
            // retreve data (application/json)
            // write it to a cache file
        }
    }

    //start 
    window.addEventListener(
    'load',
    function load( event ) {
        window.removeEventListener( 'load', load, false ); needed
        myPlugin.init();
    },
    false
);
} 
```

所以这可能不是最好的做法，但我一直在学习。间隔本身在`init()`方法内部被调用，如下所示：

```
myPlugin.intervalID = window.setInterval(
    myPlugin.getRemoteData,
    myPlugin.settings.updateMinInterval * 1000 //milliseconds!
); 
```

还有一点设置间隔：设置（首选项）的观察者清除当前间隔，并在 updateMinInterval 设置发生更改时以与上面提到的完全相同的方式设置它。

当我做[对](https://stackoverflow.com/questions/1013385/what-is-the-difference-between-a-function-expression-vs-declaration-in-javascrip)了，使用»函数表达式«的解决方案应该如下所示：

```
myPlugin.intervalID = window.setInterval(
    function() {
        myPlugin.getRemoteData();
    },
    myPlugin.settings.updateMinInterval * 1000 //milliseconds!
); 
```

我对吗？

到目前为止，我忽略了“攻击”此代码的可能场景是什么？

应该`setInterval`并且`setTimeout`基本上以另一种方式在 Firefox 插件中使用，然后在 »normal« 前端 javascripts 中使用？因为[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)的文档在某些示例中准确地显示了使用声明函数的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:40:37.250

> 我对吗？

是的，虽然我想现在你已经尝试过了，发现它有效。

至于为什么要求您更改代码，这是因为警告消息的一部分说“**引用函数名称的变量是可以接受的，但不推荐使用，因为它们不适合静态源代码验证**”。

这意味着除非您遵循第一个参数的推荐模式，否则不可能自动计算执行 setInterval 调用的结果。

由于 setInterval 容易受到与 eval() 相同类型的安全风险的影响，因此检查调用是否安全非常重要，在附加组件等特权代码中更是如此，因此此警告可作为附加组件的危险信号-审阅者以确保他们仔细评估这行代码的安全性。

您的初始代码应该被接受并且不会导致安全问题，但附加审阅者会喜欢少考虑一个危险信号。

鉴于自动确定执行 JavaScript 的结果的能力对于性能优化以及自动安全检查很有用，我敢打赌，函数表达式也将执行得更快。

# ruby-on-rails - Mongoid 多个 has_one 关系

> ID：15406822
> 
> 赞同：0
> 
> 时间：2013-03-14T10:34:51.793
> 
> 标签：ruby-on-rails, ruby, mongoid, has-one

我努力让这些关系发挥作用。我有以下类 FlowContainer

```
class FlowContainer
  include Mongoid::Document
  has_one :production_flow, class_name: Flow
  has_one :test_flow, class_name: Flow
  has_one :design_flow, class_name: Flow
end 
```

正如你所看到的，我希望它有 3 个特定的流程。我在 Flow 中设置了这样的关系：

```
class Flow
  include Mongoid::Document
  belongs_to :flow_container
end 
```

我不认为这有什么特别之处，在我看来应该可以工作，但是当我尝试将流分配给上述特定流之一时，我收到以下错误消息：

> NoMethodError：Flow:Class 的未定义方法“sub”

我也可以为通用流程和 3 个子类进行继承设置，但目前我不赞成该解决方案，因为我觉得这应该可行。如果有人可以就此事分享他的意见，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:52:21.753

`class_name`必须作为一个传递`string`，试试这个：

```
has_one :test_flow, class_name: "Flow" 
```

# windows - 如何将打开的 TCP 套接字从 Perl 传递到 Windows 应用程序作为标准输入和标准输出

> ID：15406830
> 
> 赞同：1
> 
> 时间：2013-03-14T10:35:12.700
> 
> 标签：windows, perl, sockets, strawberry-perl

我正在尝试将来自 Perl 程序的开放 TCP 套接字连接作为标准输入和标准输出传递到 Windows 上的外部应用程序，类似于 Unix 世界中的 inetd 所做的。

我试过的：

1.  `open`使用or`POSIX::dup2`并调用 exec通过套接字“替换”标准输入和标准输出：

    ```
    # $socket is an open TCP socket
    open STDIN,  '<&', $socket or die "Unable to dup stdin: $^E";
    open STDOUT, '>&', $socket or die "Unable to dup stdout: $^E";
    close $socket;
    exec($program) or die "Unable to exec $command: $^E"; 
    ```

2.  使用`IPC::open3`：

    ```
    my $pid = open3(
        '>&'.$socket->fileno, 
        '<&'.$socket->fileno, 
        '<&'.fileno(STDERR), 
        $program);
    waitpid $pid, 0; 
    ```

在这两种情况下，执行的程序都会收到不是套接字的东西（也许是管道？），这是一个问题，因为它想使用`select`. 在 Windows`select`上仅适用于套接字。

我该怎么做才能将套接字传递给外部应用程序？

顺便说一句，我使用的是草莓 Perl，而不是 ActiveState。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:50:16.737

可悲的是，在 Windows 上你不能总是这样做。经过巨大的痛苦，我们放弃了能够做到这一点。请参阅此问题（[TCP SOCKET 句柄是否可继承？](https://stackoverflow.com/questions/11847793/are-tcp-socket-handles-inheritable)）以获得解释。

在普通的 Windows 安装上*是*可能的：您必须确保创建的 TCP 套接字不重叠，这不是 WinSock 函数的默认设置。然后可以将其标记为可继承并设置为子进程的标准输入/标准输出。

但是，在安装了某些著名的安全产品（防火墙、AV）后，这是不可能的，因为它们以一种阻止 TCP 套接字被正确继承的方式挂钩 TCP 堆栈。

您只能安全地真正继承 Windows 管道、文件句柄等。要给孩子一个套接字，它必须与父母合作，而不是默默地接受它作为标准输入。父母可以启动孩子，用于[`WSADuplicateSocket`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms741565%28v=vs.85%29.aspx)将套接字提供给孩子的PID，将有关套接字的数据传递给孩子（可能通过命名管道传递给孩子的标准输入）。然后，孩子使用传递的数据重构套接字。因此，如果您愿意对客户端进行重新编程以了解其父级，则可以这样做。

我不确定如何在 Perl 上完成此操作，但请参阅[这个有趣的示例](http://www.perlmonks.org/?node_id=881897)作为入门。我想你必须导入本机`WSADuplicateSocket`函数并自己做。

# wpf - 棱镜模块依赖

> ID：15406833
> 
> 赞同：0
> 
> 时间：2013-03-14T10:35:27.613
> 
> 标签：wpf, prism

我正在使用 prism 开发一个应用程序，在该应用程序中我可以使用模块类。然后我有其他模块需要使用此类模块。我遇到的问题是我的消费者模块在它需要的模块类之前被初始化，所以 UnityContainer 中还不存在类型注册。

我发现这篇文章[Module dependencies in InitializeShell with Prism](https://stackoverflow.com/questions/11203866/module-dependencies-in-initializeshell-with-prism)表明我可以使用 ModuleDependency 属性来设置这种链接，但它似乎不起作用。

所以我的存储类为：

```
[Module(ModuleName = "StorageModule")]
public class UserStorageModule : IModule
{
   //code here
} 
```

然后消费者为：

```
[ModuleDependency("StorageModule")]
public class EntryModule : IModule
{
   //code here
} 
```

但是，仍然首先调用 EntryModule.Initialize() 方法。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:58:48.593

过早放弃搜索的教训。更多搜索揭示了这个解决方案

[Prism中如何控制模块初始化的顺序](https://stackoverflow.com/questions/1296642/how-to-control-the-order-of-module-initialization-in-prism)

这似乎很好地解决了我的问题。

# javascript - Ipad：当使用滑动事件时，整个页面都在移动

> ID：15406835
> 
> 赞同：1
> 
> 时间：2013-03-14T10:35:29.277
> 
> 标签：javascript, html, jquery-mobile, knockout.js

我有一本类似应用程序的书，用户可以通过滑动来翻转“页面”，问题是当用户滑动页面时，整个视口都在移动，有没有办法阻止它？

**HTML 摘录：**

```
 <div data-title="Strategy" data-role="page" role="main" tabindex="0" class="ui-page ui-body-c ui-page-active" style="min-height: 545px;">
  <div data-role="content" class="caspBookCon ui-content" role="main">

    <div class="caspBookWrapper">
      <div class="caspBookLeft" data-bind="event: { swiperight: prevPage },visible:true" style="display: block;">
<div data-title="Home" role="main" data-cafevm="sp/book/strategy">
  <!-- ko if: isEditable() -->
  <a href="#" class="caspEdit" data-bind="visible: !editMode(), click:setEditMode" title="Edit"></a>
  <!-- /ko -->
  <div class="caspBtnGrayOverlay" data-bind="visible: editMode()" style="display: none;">
    <a href="#" class="caspButton caspBtnGray" data-bind="click:saveEdit">Done</a>
  </div> 
```

**JS：**

```
/**
         * Move to next page.
         * @param  {[type]} d [description]
         * @param  {[type]} e [description]
         * @return {[type]}   [description]
         */
        var nextPage = function(d, e) {
            var chapter = ca.sp.book.currentChapter;

            if(chapter.isEnd()) {
                $.when(changeChapter(true)).then(function(chapter){
                    showPage(chapter);
                });
            } else {
                chapter.changePage(true);
                showPage(chapter);
            }
        };

        /**
         * Move to previous page
         * @param  {[type]} d [description]
         * @param  {[type]} e [description]
         * @return {[type]}   [description]
         */
        var prevPage = function(d, e) {
            var chapter = ca.sp.book.currentChapter;

            if(chapter.isStart()) {
                $.when(changeChapter(false)).then(function(chapter){
                    showPage(chapter);
                });
            } else {
                chapter.changePage(false);
                showPage(chapter);
            }
        }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:44:12.243

也许有点 hacky，但您可以尝试挂钩标签的`ontouchmove`事件`<body>`并通过 jQuery 阻止它，如下所示：

```
$("body").on({
    ontouchmove : function(e) {
        e.preventDefault(); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:45:01.810

只需禁用以下`touchmove`事件`document`：

```
document.touchmove = function(e)
{ 
    e.preventDefault(); 
}; 
```

# python - 在django中获取当前域名

> ID：15406837
> 
> 赞同：0
> 
> 时间：2013-03-14T10:35:33.140
> 
> 标签：python, django

我想在 Django.Earlier 我得到这个使用当前的域名

```
site_name = RequestSite(request).domain 
```

但是现在我想获取没有请求参数的域名。之所以如此，是因为我在我的项目中使用了一个 twitter 包，而我想要使用的函数没有请求参数，因此我不能在那里使用上面提到的代码。

那么是否有在没有请求参数的情况下获取当前域的方法。我也使用了“get_current_site”，但它总是给出 .com 域名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:52:29.250

Site.object.get_current 为您提供“默认”站点（看看[它是如何实现的](https://github.com/django/django/blob/master/django/contrib/sites/models.py#L28 "Site.object.get_current() 的实现")）。如果无法访问 Request 对象，您必须找到另一种方法来查找或构建您的域。

# php - 在控制器中获取滚动分页值

> ID：15406838
> 
> 赞同：1
> 
> 时间：2013-03-14T10:35:33.737
> 
> 标签：php, jquery, codeigniter

我想将我的**page_num**的值从 jQuery 获取到我的控制器，但我无法获得更新的值，我只获得了第一次传递的值。当我向下滚动时，我的滚动连续显示结果，它不会停止，也没有显示所有结果，它只显示前 6 个，然后连续重复。

我正在使用 jQuery ScrollPagination，但无法解决问题 - 请帮助我。

这是我的看法：

```
<div id="main" style="width:760px">
    <div id='friend_display'>
    <?php if($list->num_rows() > 0  ){
     foreach($list->result() as $show){     ?>
            <!-- image box -->
            <div class="image-box" style="margin-left:30px" id='image-holder' >

              <div class="photo-cover">
                <img width="160px" height="117px" src="<?=base_url()?>uploads/user_images/friends/<?php echo $show->user_image;?>" alt="" />
                    </div>

                    <p class="photo-name"><b><?php echo $show->user_name;?></b></p>
                    <!-- end photo name -->

            </div>
    <?php } } else { echo '<div align="center" style="color:#FF0000; font-size:17px; font-weight:bold">You have no Friends yet</div>';}?>
            <!-- end image-box -->
            <div class="cl">&nbsp;</div>
    </div>
    <!-- end main -->
    </div>

 <div class="loading1" id="loading1">Wait a moment... it's loading!</div>
 <div class="loading1" id="nomoreresults">Sorry, no more results....!</div> 
```

这是我的控制器：

```
 <?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
  class Friends extends CI_Controller {

    function __construct()
    {
            parent::__construct();
            $this->load->model('friends_model');
    }

    function find_friends($offset=0)
    {
            $friend['list']         =       $this->friends_model->find($offset);
            $this->load->view('friends_find_view',$friend);
    }

    function display_friends()
    {
            $offset =       $this->input->post('page_num');     
            $find   =       $this->friends_model->find($offset);

            if($find->num_rows() > 0        )
            {
                    foreach($find->result() as $show)
                    {       ?>

            <div class="image-box" style="margin-left:30px" id='image-holder' >
                    <div class="photo-cover">
                            <img width="160px" height="117px" src="<?=base_url()?>uploads/user_images/friends/<?php echo $show->user_image;?>" alt="" />
                    </div>

                    <p class="photo-name"><b><?php echo $show->user_name;?></b></p>
                    <!-- end photo name -->

            </div>
    <?php } } else { exit; }?>
            <!-- end image-box -->
            <div class="cl">&nbsp;</div>
            <?php          
    }
  } 
```

如果我**回显 $offset**则每次 bt 在脚本中显示 6 **page_num**值正在正确更改。这是主要问题。

这是**型号**代码

```
 function find($offset)
         {
            $this->db->select('*');
            $this->db->from('users');

            $this->db->limit(6,$offset);
            $result = $this->db->get();
            return $result;        
          } 
```

最后这是我的**脚本**

```
 <script type="text/javascript">
    var page_num = 1;
    $(function(){
    $('#friend_display').scrollPagination({
            'contentPage': '<?=base_url()?>friends/display_friends', // the url you are fetching the results
            'contentData': {page_num:$('.image-box').size()}, // these are the variables you can pass to the request, for example: children().size() to know which page you are
            'scrollTarget': $(window), // who gonna scroll? in this example, the full window
            'heightOffset': 10, // it gonna request when scroll is 10 pixels before the page ends
            'beforeLoad': function(){ // before load function, you can display a preloader div
                    $('#loading1').fadeIn();       
            },
            'afterLoad': function(elementsLoaded){ // after loading content, you can use this function to animate your new elements
                     $('#loading1').fadeOut();
                     $(elementsLoaded).fadeInWithDelay();
                     page_num:$('.image-box').size();
            }
    });

    // code for fade in element by element
    $.fn.fadeInWithDelay = function(){
            var delay = 0;
            return this.each(function(){
                    $(this).delay(delay).animate({opacity:1}, 200);
                    delay += 100;
            });
    };
});    

</script> 
```

我第二次问这个问题，希望这次我能得到我的解决方案，谢谢。您还可以在此处查看完整代码[滚动分页代码](http://pastebin.com/MC1KZm8y)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:41:26.320

好吧，首先我要给你一个关于你的控制器的建议，你不应该把 html 和 php 混在一起

所以这段代码

```
function display_friends()
    {
            $offset =       $this->input->post('page_num');     
            $find   =       $this->friends_model->find($offset);

            if($find->num_rows() > 0        )
            {
                    foreach($find->result() as $show)
                    {       ?>

            <div class="image-box" style="margin-left:30px" id='image-holder' >
                    <div class="photo-cover">
                            <img width="160px" height="117px" src="<?=base_url()?>uploads/user_images/friends/<?php echo $show->user_image;?>" alt="" />
                    </div>

                    <p class="photo-name"><b><?php echo $show->user_name;?></b></p>
                    <!-- end photo name -->

            </div>
    <?php } } else { exit; }?>
            <!-- end image-box -->
            <div class="cl">&nbsp;</div>
            <?php          
    } 
```

我们将把它分成两部分，为这个方法创建一个特定的视图：

```
function display_friends(){
    $offset = $this->input->get('page_num');//notice that we changed this to get     
    $find   = $this->friends_model->find($offset);

    if($find->num_rows() > 0)
    {
        $data['rows'] = $find->result();
        $this->load->view('new_view', $data);
    } 
    echo '<div class="cl">&nbsp;</div>'
} 
```

new_view 文件将是这样的

```
 <?php foreach($rows as $show):?>

    <div class="image-box" style="margin-left:30px" id='image-holder' >
    <div class="photo-cover">
        <img width="160px" height="117px" src="<?=base_url()?>uploads/user_images/friends/<?php echo $show->user_image;?>" alt="" />
    </div>
    <p class="photo-name"><b><?php echo $show->user_name;?></b></p>
    <!-- end photo name -->
    </div>
<?php endforeach;?> 
```

**编辑** 传递给插件的数据它只是传递了一次，当它被实例化时，所以`{page_num:$('.image-box').size()}`是六，当它被实例化时，所以偏移量总是六

```
'contentPage': '<?=base_url()?>friends/display_friends', // the url you are fetching the results
        'contentData': {page_num:$('.image-box').size()}, // these are the variables you can pass to the request, for example: children().size() to know which page you are
        'scrollTarget': $(window), // who gonna scroll? in this example, the full window
        'heightOffset': 10, 
```

一种解决方案是编辑滚动分页并为发布数据或内部计数器创建一个设置器。

# spring - Spring roo，apache tile 显示在控制器中设置的模型属性

> ID：15406841
> 
> 赞同：3
> 
> 时间：2013-03-14T10:35:45.497
> 
> 标签：spring, spring-roo, apache-tiles

我正在使用 Spring roo，在其中一个控制器中，我使用如下字符串设置模型属性“error”：

```
//uiModel.addAttribute("error", "Duplicate name for Vendor");

@RequestMapping(method = RequestMethod.POST)
public String create(@Valid Vendor vendor, BindingResult bindingResult, Model uiModel, HttpServletRequest httpServletRequest) {
    if (bindingResult.hasErrors()) {
        uiModel.addAttribute("vendor", vendor);
        addDateTimeFormatPatterns(uiModel);
        return "vendors/create";
    }

    try {
        vendorService.saveVendor(vendor);
        uiModel.asMap().clear();
    } catch(Exception e) {
        uiModel.addAttribute("vendor", vendor);
        uiModel.addAttribute("error", "Duplicate name for Vendor");
        addDateTimeFormatPatterns(uiModel);
        return "vendors/create";
    }
    return "redirect:/vendors/" + encodeUrlPathSegment(vendor.getId().toString(), httpServletRequest);
} 
```

现在我的问题是如何在创建页面中显示错误（如果不是 null），现在如下所示。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<div xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:field="urn:jsptagdir:/WEB-INF/tags/form/fields" xmlns:form="urn:jsptagdir:/WEB-INF/tags/form" xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:spring="http://www.springframework.org/tags" version="2.0">
    <jsp:directive.page contentType="text/html;charset=UTF-8"/>
    <jsp:output omit-xml-declaration="yes"/>
    <form:create id="fc_domain_Vendor" modelAttribute="vendor" path="/vendors" render="${empty dependencies}" z="MGZPL+gO+CDX6M4iRO/z/qRfnJI=">
        <field:input field="name" id="c_domain_Vendor_name" required="true" z="s+3hs8xXpSZ71RoD0ktXy0BnjS0="/>
        <field:input field="email" id="c_domain_Vendor_email" validationMessageCode="field_invalid_email" z="+4rIdPGArWhHQlrFG/1N6yrKKno="/>
        <field:input field="mobile" id="c_domain_Vendor_mobile" max="16" z="kgM5Z9jJ6xW9BxiPPB4Ipz0TUKg="/>
    </form:create>
    <form:dependency dependencies="${dependencies}" id="d_domain_Vendor" render="${not empty dependencies}" z="hLv7c7K8OOSRrBJKgKuw9H1+GvA="/>
</div> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T09:45:49.560

Spring roo 使用 spring 标记 form:errors 将打印与该字段关联的任何错误消息。

因此，您需要做的就是生成错误消息，它会被 spring form:errors 标记拾取。

有很多方法可以进行验证，最简单的方法是在控制器本身中进行。

因此，您的代码将更改为：

```
try {
    vendorService.saveVendor(vendor);
    uiModel.asMap().clear();
} catch(Exception e) {
    uiModel.addAttribute("vendor", vendor);
    bindingResult.rejectValue("name", "vendor.name.duplicate");
    addDateTimeFormatPatterns(uiModel);
    return "vendors/create";
} 
```

注意：vendor.name.duplicate 是一个消息属性，您必须在 WEB-INF/i18n/messages.properties 中定义它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T13:53:12.743

您可以使用以下代码段获取错误字符串，然后使用警报机制显示错误消息：

```
 <c:if test="${not empty error}">
           <c:out value="${error}"/>
    </c:if> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:01:41.877

有几种方法可以解决这个问题，但我相信我会在您实体的供应商属性上放置一个 @UNIQUE 验证器。我相信您可以通过发出另一个 jpa 命令来添加约束，该命令与最初用于创建 vendor 字段的命令相同，但添加了 --unique 选项。

[http://static.springsource.org/spring-roo/reference/html/command-index.html#command-index-field-commands](http://static.springsource.org/spring-roo/reference/html/command-index.html#command-index-field-commands)

# java - Tomcat 中的 JaxWS 应用程序 URL

> ID：15406842
> 
> 赞同：0
> 
> 时间：2013-03-14T10:35:49.680
> 
> 标签：java, tomcat, jax-ws

我不知道如何在 Tomcat 上更改我的 JAX-WS WebService 的 URL。

localhost:8080/WSCalc/WSCalc?wsdl 运行正常，但我想将 URL 更改为 localhost:8080/ws/WSCalc/WSCalc?wsdl

通过下面的配置，我可以运行 localhost:8080/ws/WSCalc/（它是 index.jsp），但我不能运行 WebService localhost:8080/ws/WSCalc/WSCalc?wsdl（它返回 404）

目录 webapps/ 包括：

```
WSCalc.war
WSCalc/
-index.jsp
-META-INF/context.xml
-WEB-INF/web.xml
-WEB-INF/sun-jaxws.xml
-WEB-INF/classes/*
-WEB-INF/lib/* 
```

网页.xml：

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <listener>
        <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>WSCalc</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>WSCalc</servlet-name>
        <url-pattern>/WSCalc</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

太阳jaxws.xml：

```
<endpoints version="2.0" xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime">
  <endpoint implementation="cz.vrana.WSCalc" name="WSCalc" url-pattern="/WSCalc"/>
</endpoints> 
```

服务器.xml：

```
<Host name="localhost" appBase="webapps" unpackWars="true" autodeploy=""true">
     <Context path="/ws" docBase="." />
</Host> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:28:11.897

您需要做的第一件事是更改应用程序部署的上下文。为此，请参阅[上下文容器](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)。

另一方面，对于模式映射，您可以在`web.xml`for all 路径中更改以`/WSCalc/`

```
<servlet-mapping>
    <servlet-name>WSCalc</servlet-name>
    <url-pattern>/WSCalc/*</url-pattern>
</servlet-mapping> 
```

或者如果你想要一个单一的模式

```
<servlet-mapping>
    <servlet-name>WSCalc</servlet-name>
    <url-pattern>/WSCalc/WSCalc</url-pattern>
</servlet-mapping> 
```

在 sun-jaxws.xml 中更改为

```
<endpoint ... url-pattern="/WSCalc/WSCalc" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:40:21.430

你试过`<url-pattern>/ws/WSCalc</url-pattern>`吗？

您得到的是 404，因为在 web.xml 中没有到 /ws/WSCalc 的 servlet 映射。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-02T00:55:44.133

如上修改 web.xml 使 sun-jaxws.xml 为

```
<endpoint ... url-pattern="/WSCalc" /> 
```

# jquery - jquery validate 远程验证仅在字段更改时才有效

> ID：15406843
> 
> 赞同：0
> 
> 时间：2013-03-14T10:35:50.060
> 
> 标签：jquery, codeigniter, validation, remote-validation

```
<?PHP
$attributes = array('class' => "profile_form", 'id' => "profile_form",'name'=>"profile_form");
echo form_open_multipart("$form_action",$attributes);
?>
<LABEL for='email'>E-Mail</LABEL>
<INPUT type='text' id='email' name="email" class="w200" value='<?PHP echo $email;?>' remote="<?PHP echo base_url()."php/unique_email.php?id=$id"; ?>">
<DIV class='ca clr-lr'>
<input type="submit" id="submitbutton" name="submitbutton" value="<?PHP echo $title;?>" class="pr mbutton"/>
</DIV>
</FORM> 
```

和

```
 rules: {
        email: {
            required:true,
            email:true
        }
    } 
```

这是我用来验证电子邮件字段的代码。如果我更改电子邮件字段或输入新值，它工作正常，但如果我只是提交表单，它会给我一个错误。经过短暂检查后，我发现如果我不编辑电子邮件字段，则提交按钮不包含在帖子数据中。

我做错了什么，请帮忙。

这是我的控制器代码，它可能有助于扩大调试范围。我正在检查提交按钮是否是发布数据的一部分。

```
if($this->input->post('submitbutton') !== false){
        if ($this->form_validation->run('admin_profile_form') == FALSE){
            $form=(array)$this->input->post();
            $data=array_merge($form,$data);
        }else{
            //database fields
            $database = array(
                'first_name' => $this->input->post('first_name'),
                'last_name' => $this->input->post('last_name'),
                'email' => $this->input->post('email'),
                'phone' => $this->input->post('mobile')
            );
            $user_id=$user->id;
            $this->db->where('id',$user_id);
            $this->db->update('users',$database);
            $this->session->set_flashdata('message_type', 'info');
            $this->session->set_flashdata('message', 'Profile updated');
            redirect($this->homepage);
            return;
        }
    } 
```

最后，Fabio Antunes 建议的解决方案奏效了。

我更改了以下规则并从输入字段中删除了内联遥控器

```
 email: {
            required:true,
            email:true,
            remote: {
                url: "php/unique_email.php",
                async: false,
                type: "post",
                data: { id: $('#edit_id').val() }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:54:25.667

**编辑**

正如您所说，您的代码已经在运行，您可以将其放在您的 js 文件中，您必须使用此函数`$("#profile_form").validate({})`，以便在提交和 keyup 事件上进行验证

```
<script>
$().ready(function() {

        // validate signup form on keyup and submit
        $("#profile_form").validate({
    rules: {
        email: {
            email: true
        }
    },
    messages: {
        email: {
            email: "Please provide a valid email"
        }
    }
}); 
}); 
```

我注意到在你看来你有这个

```
<INPUT type='text' id='email' name="email" class="w200" value='<?PHP echo $email;?>' remote="<?PHP echo base_url()."php/unique_email.php?id=$id"; ?>"> 
```

而是把这个

```
<INPUT type='text' id='email' name="email" class="w200" value='<?PHP echo $email;?>' remote="<?PHP echo base_url()."php/unique_email.php?id=".$id; ?>"> 
```

如果您注意到您的 $id 在字符串内

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T10:40:51.370

试试这个设置

```
$(/*your form*/).validate({  
    onsubmit: true
}) 
```

# c++ - 向量 在公差范围内找到双精度

> ID：15406846
> 
> 赞同：2
> 
> 时间：2013-03-14T10:35:52.507
> 
> 标签：c++, vector, stl, find

我有一个

```
std::vector<double> v; 
```

我正在寻找检测其中是否存在真实值，最高可以说是容错水平

```
 1e-6; 
```

[文档](http://www.cplusplus.com/reference/algorithm/find/)表明`operator==`用于查找容器中是否存在值。

如何生成我需要的双打行为？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T10:43:24.257

您不能使用 plain`find`与自定义比较器进行搜索 - 您需要`find_if`改用。您已经有了 C++11 的答案，这里有一个与 C++03 一起使用的答案：

```
struct dbl_cmp {
    dbl_cmp(double v, double d) : val(v), delta(d) { }
    inline bool operator()(const double &x) const {
        return abs(x-val) < delta;
    }
private:
    double val, delta;
};
...
find_if(v.begin(), v.end(), dbl_cmp(10.5, 1E-8)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T10:39:47.057

你可以像这样接近它。

```
double a=3.14;  // The value you seek
std::find_if(v.begin(),v.end(),[a](double b) { return abs(a - b) < epsilon; }); 
```

浮点人员可能会比我在这里提供的更好的等价比较方法。

# android - 在 android 上使用航点绘制行车路线（谷歌地图、谷歌方向 API、json 解析、解码谷歌折线）

> ID：15406847
> 
> 赞同：8
> 
> 时间：2013-03-14T10:36:02.583
> 
> 标签：android, json, google-maps, google-maps-android-api-2

drawPath() 用于在地图上绘制折线。

```
public void drawPath(String result){
        try {
            final JSONObject jsonObject = new JSONObject(result);

            JSONArray routeArray = jsonObject.getJSONArray("routes");
            JSONObject routes = routeArray.getJSONObject(0);

            JSONObject overviewPolylines = routes.getJSONObject("overview_polyline");
            String encodedString = overviewPolylines.getString("points");

            String statusString = jsonObject.getString("status");

            Log.d("test: ", encodedString);
            List<LatLng> list = decodePoly(encodedString);

            LatLng last = null;
            for (int i = 0; i < list.size()-1; i++) {
                LatLng src = list.get(i);
                LatLng dest = list.get(i+1);
                last = dest;
                Log.d("Last latLng:", last.latitude + ", " + last.longitude );
                Polyline line = mMap.addPolyline(new PolylineOptions()
                .add(new LatLng(src.latitude, src.longitude), new LatLng(dest.latitude, dest.longitude))
                .width(4)
                .color(Color.GREEN));
            }

            Log.d("Last latLng:", last.latitude + ", " + last.longitude );
        }catch (JSONException e){
            e.printStackTrace();
        }
        catch(ArrayIndexOutOfBoundsException e) {
            System.err.println("Caught ArrayIndexOutOfBoundsException: "+ e.getMessage());
        }
    }

    private List<LatLng> decodePoly(String encoded){

        List<LatLng> poly = new ArrayList<LatLng>();
        int index = 0;
        int length = encoded.length();

        int latitude = 0;
        int longitude = 0;

        while(index < length){
            int b;
            int shift = 0;
            int result = 0;

            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);

            int destLat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            latitude += destLat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b > 0x20);

            int destLong = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            longitude += destLong;

            poly.add(new LatLng((latitude / 1E5),(longitude / 1E5) ));
        }
        return poly;
    } 
```

现在我的问题是路线在地图中没有正确显示，因为它在链接中有航点。我在 android 4.2 上使用它

我的链接是 [http://maps.googleapis.com/maps/api/directions/json?origin=18.XXX,73.XXXdestination=18.XXX,73.XXX&sensor=false&units=metric&mode=driving&waypoints=via:18.XXX ,73.XXX](http://maps.googleapis.com/maps/api/directions/json?origin=18.XXX,73.XXXdestination=18.XXX,73.XXX&sensor=false&units=metric&mode=driving&waypoints=via:18.XXX,73.XXX)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:03:10.513

我已经测试了你的 decodePoly 部分。那里似乎没有问题。您可以使用步骤和腿更精确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T23:53:59.040

@Zeratul 感谢您对`overview_polyline.points`. 这很好用。顺便说一句，在获取 LatLng 列表后，您不需要遍历列表。只需使用 PolylineOptions 的 addAll 方法。

```
List<LatLng> list = decodePoly(encodedString);
PolylineOptions po = new PolylineOptions();
po.addAll(list);
po.width(2).color(Color.BLUE);
Polyline line = getMap().addPolyline(po); 
```

# c++ - 素数生成器中的 sigabrt 和 sigsegv 错误

> ID：15406848
> 
> 赞同：0
> 
> 时间：2013-03-14T10:36:03.647
> 
> 标签：c++

```
#include<iostream>
#include<cmath>
#include<vector>
using namespace std;

int main()
{
int n1;
cin>>n1;
long long int MAX,n;
while(n1--)
{
int* primes = new int[1000000000];
//vector<int> v[10000000];
//int primes[100000]={1};
cin>>n;
cin>>MAX;      
   int i,j; 
   for(i=2;i<=MAX;i++) primes[i] = 1; 
   for(i=2;i<=(int)sqrt(MAX);i++)
   {
   // cout<<"primes[i]\t"<<i<<" "<<primes[i]<<endl;
     if (primes[i]) 
     {
       for(j=i;j*i<=MAX;j++)
       {
        primes[i*j] = 0;
       // cout<<"primes[i*j]\t"<<i*j<<" "<<primes[i*j]<<endl;;
    }
    }
}
       primes[0]=0;
       primes[1]=0; 
        for(int i=n;i<=MAX;i++)
        {
            if(primes[i])
            cout<<i<<" "<<endl;
        }
        delete[] primes;
}
cout<<endl;

} 
```

这是素数范围的程序，即查找两个数之间的素数我正在使用 erthenses 筛选算法我的问题是大输入和更多测试用例它在在线判断中显示 SIGABRT 和有时 SIGSEGV 我无法计算了解如何做到这一点任何帮助表示感谢谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:39:57.813

以下：

```
int* primes = new int[1000000000]; 
```

将尝试分配 4GB 的 RAM（假设`int`是 32 位）。

在线法官会允许您的进程分配那么多 RAM 吗？我对此表示怀疑。

严格来说，每个元素只需要一个位（因为它要么是 0 要么是 1），因此剩余的 31 位（或您分配的内存的 97%）被浪费了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:37:16.137

的溢出`i*j`会导致不正确的内存访问（负索引）。

乘法的结果是整数。您应该进行演员表`i`和`j`to `unsigned long`。

# asp.net-mvc - DBML 文件，拖放表 - 覆盖

> ID：15406851
> 
> 赞同：2
> 
> 时间：2013-03-14T10:36:11.220
> 
> 标签：asp.net-mvc, linq-to-sql, dynamic-data

`DBML`只是关于我项目中文件的一般问题。

说，例如，我的 DBML 文件显示了`r/ships`30 个表之间。为了节省我在整个文档中查看特定表格的时间，是否有任何“ `quick find`”解决方案。我试过这个`CTRL + F`按钮，但它似乎没有注册 DBML 文档。

我还尝试将表格拖到文档上，希望收到某种消息：“这个表格已经存在，你想重写它吗”，但该表格只是将其自身从“说”重命名`dogs`为“ `dogs1`” .

简而言之，是否有某种方法可以相对容易地找到特定的表？

谢谢

# java - Android HTML 解析和查找

> ID：15406863
> 
> 赞同：1
> 
> 时间：2013-03-14T10:36:38.963
> 
> 标签：java, android, android-intent

我有一个这样的 HTML 内容，我想从这个内容中解析并提取一个特定城市的 XML 链接，例如我想获取城市 Acton 的 XML 链接，MA 任何人都可以帮助我

```
<table class="area_links">
<tr>
    <td ><a type="application/rss+xml" target="_blank" href="http://test.com/cache/rss/tx-abilene.xml" title="Abilene, TX RSS Feed">Abilene, TX</a></td>
    <td ><a type="application/rss+xml" target="_blank" href="http://test.com/cache/rss/mi-garden-city.xml" title="Garden City, MI RSS Feed">Garden City, MI</a></td>
    <td class="neighborhood"><a type="application/rss+xml" target="_blank" href="http://test.com/cache/rss/orlando-lake-cherokee.xml" title="Lake Cherokee, Orlando RSS Feed">Lake Cherokee, Orlando</a></td>
</tr>
<tr>
   <td ><a type="application/rss+xml" target="_blank" href="http://test.com/cache/rss/ma-abington.xml" title="Abington, MA RSS Feed">Abington, MA</a></td>
   <td ><a type="application/rss+xml" target="_blank" href="http://test.com/cache/rss/ca-garden-grove.xml" title="Garden Grove, CA RSS Feed">Garden Grove, CA</a></td>
   <td class="neighborhood"><a type="application/rss+xml" target="_blank" href="http://test.com/cache/rss/orlando-lake-dot.xml" title="Lake Dot, Orlando RSS Feed">Lake Dot, Orlando</a></td>
</tr>
<tr>
   <td ><a type="application/rss+xml" target="_blank" href="http://test.com/cache/rss/ma-acton.xml" title="Acton, MA RSS Feed">Acton, MA</a></td>
   <td ><a type="application/rss+xml" target="_blank" href="http://test.com/cache/rss/co-garfield-county.xml" title="Garfield County, CO RSS Feed">Garfield County, CO</a></td>
    <td class="neighborhood"><a type="application/rss+xml" target="_blank" href="http://test.com/cache/rss/orlando-orlando-executive.xml" title="Orlando Executive, Orlando RSS Feed">Orlando Executive, Orlando</a></td>
</tr>
<tr>
   <td ><a type="application/rss+xml" target="_blank" href="http://test.com/cache/rss/co-adams-county.xml" title="Adams County, CO RSS Feed">Adams County, CO</a></td>
   <td ><a type="application/rss+xml" target="_blank" href="http://test.com/cache/rss/garland.xml" title="Garland, TX RSS Feed">Garland, TX</a></td>
   <td class="neighborhood"><a type="application/rss+xml" target="_blank" href="http://test.com/cache/rss/orlando-windhover.xml" title="Windhover, Orlando RSS Feed">Windhover, Orlando</a></td>
 </tr>
</table> 
```

# c# - 定义事件处理程序 在 XAML 中

> ID：15406877
> 
> 赞同：1
> 
> 时间：2013-03-14T10:37:03.840
> 
> 标签：c#, wpf, xaml, wpf-controls

我在 XAML 中定义 EventHandler 时遇到问题。请查看代码，您将了解我正在尝试做什么以及我如何尝试在 XAML 中分配方法，或者更好地说明我如何在 XAML 中定义 EventHandler。

这是代码：

```
public static EventHandler<EventArgs> GetResetValue(DependencyObject obj)
{ 
   return (EventHandler<EventArgs>)obj.GetValue(ResetValueProperty);
}

public static void SetResetValue(DependencyObject obj, EventHandler<EventArgs> value)
{
    obj.SetValue(ResetValueProperty, value);
}

// Using a DependencyProperty as the backing store for ResetValue.  This enables animation, styling, binding, etc...
public static readonly DependencyProperty ResetValueProperty =
    DependencyProperty.RegisterAttached("ResetValue", typeof(EventHandler<EventArgs>), typeof(Extension), new UIPropertyMetadata(null, OnResetValue));

private static void OnResetValue(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
{
    DependencyObject obj = dependencyObject;
    for (; obj != null && !(obj is TextBox); obj = VisualTreeHelper.GetParent(obj)) ;

    TextBoxtbx = obj as TextBox;
    if (tbx != null)
    {
        tbx.TextChanged += (EventHandler<EventArgs>)dependencyPropertyChangedEventArgs.NewValue;
    }
} 
```

XAML 看起来像这样：

```
<TextBox>
 <Button>
  <Label ext:Extension.ResetValue=".. here i want to assign the handler, as examle DoSomething" >
 </Button>
</TextBox> 
```

我希望分配给附加处理程序的方法在 Window.cs 中，例如：

```
public void DoSomething(object sender, EventArgs e)
{
  ....
} 
```

正如您在 OnResetValue 方法中看到的那样，我沿着 VisualTree 向上移动，直到找到 TextBox 并将处理程序添加到 TextBox.TextChanged 事件。

当 TextChanged 时，将调用附加的处理程序方法，该方法将调用分配的方法

问题是如何使用 DoSomething 方法在 XAML 中定义附加的处理程序？请不要替代解决方案。如果可能的话，我想用事件来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:08:36.490

看起来您正在尝试使用普通的 XAML 机制来附加事件处理程序：

```
<Button Click="OnButtonClick"/> 
```

但在您的情况下，您尝试分配的东西不是事件，而是一个普通属性，其类型恰好是 EventHandler 委托。如果您要将 ResetValue 的类型更改为使用`Action<object, EventArgs>`功能相同的类型，这可能会更清楚。

要以可以分配给 ResetValue 属性的形式公开您的处理程序方法，您可以执行以下操作：

```
public EventHandler<EventArgs> DoSomethingMethod
{
    get { return new EventHandler<EventArgs>(DoSomething); }
} 
```

现在您有了一个与您要设置的 DP 类型匹配的属性，您可以使用普通的绑定：

```
<Label ext:Extension.ResetValue="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}, Path=DoSomethingMethod}" > 
```

# python - AttributeError：“Sheet”对象没有属性“row_len”

> ID：15406882
> 
> 赞同：1
> 
> 时间：2013-03-14T10:37:17.710
> 
> 标签：python, python-2.7, xlrd, xlwt, xlutils

我正在尝试运行[此](http://codepad.org/LwgZco0K)脚本并收到错误：

```
Traceback (most recent call last):
  File "nimeKoostaja.py", line 19, in <module>
    wb = copy(book)
  File "/usr/local/lib/python2.7/dist-packages/xlutils/copy.py", line 13, in copy
    w
  File "/usr/local/lib/python2.7/dist-packages/xlutils/filter.py", line 827, in process
    reader(chain[0])
  File "/usr/local/lib/python2.7/dist-packages/xlutils/filter.py", line 66, in __call__
    for col_x in xrange(sheet.row_len(row_x)):
AttributeError: 'Sheet' object has no attribute 'row_len' 
```

我正在使用 xubuntu 12.10。有趣的是，同样的代码在 Windows 7 中并没有发生。我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:49:13.640

在我看来，您正在运行旧版本，`xlrd`因为这就是提供工作表的原因。你在 xubunut 上使用的是什么版本的 xlrd？（或者是*xubuntu*）

使用这个测试程序：

```
import os
import xlrd
print 'xlrd:   ', xlrd.__VERSION__
import xlwt
print 'xlwt:   ', xlwt.__VERSION__
import xlutils.copy
print 'xlutils:', open(os.path.join(os.path.dirname(
    xlutils.copy.__file__), 'version.txt')).read()

from xlrd import open_workbook, cellname, XL_CELL_TEXT
from xlwt import Workbook
from xlutils.copy import copy

# open fail
book = open_workbook('name.xls')
# make copy
wb = copy(book)

print 'finished' 
```

和不同版本的 xlrd，我得到以下输出：

```
2013-03-14 18:33:30.201494 ['python2.7', 'test.py']
xlrd:    0.9.0
xlwt:    0.7.4
xlutils: 1.5.2

finished 
```

和

```
2013-03-14 18:35:40.241518 ['python2.7', 'test.py']
xlrd:    0.7.3
xlwt:    0.7.4
xlutils: 1.5.2

finished 
```

和

```
2013-03-14 18:42:06.703188 ['python2.7', 'test.py']
xlrd:    0.6.1
xlwt:    0.7.4
xlutils: 1.5.2

Traceback (most recent call last):
  File "test.py", line 19, in <module>
    wb = copy(book)
  File "/usr/lib/python2.7/dist-packages/xlutils/copy.py", line 13, in copy
    w
  File "/usr/lib/python2.7/dist-packages/xlutils/filter.py", line 827, in process
    reader(chain[0])
  File "/usr/lib/python2.7/dist-packages/xlutils/filter.py", line 66, in __call__
    for col_x in xrange(sheet.row_len(row_x)):
AttributeError: 'Sheet' object has no attribute 'row_len' 
```

# ios - UIDocumentInteractionController 旋转后消失

> ID：15406885
> 
> 赞同：5
> 
> 时间：2013-03-14T10:37:25.553
> 
> 标签：ios, objective-c, uidocumentinteraction

我用来`UIDocumentInteractionController`与设备上的其他应用程序共享数据

```
 self.docInteraction = [UIDocumentInteractionController interactionControllerWithURL:imageAttachFile];
 self.docInteraction.delegate = self;
 [self.docInteraction presentOpenInMenuFromRect:CGRectZero inView: self.view animated: YES ]; 
```

它工作得很好，但它在设备旋转后消失。它的原因是什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T09:03:49.780

这似乎是*UIDocumentInteractionController*的默认行为，我也在寻找如何覆盖它。但我所做的一项工作是通过此处列出的方法之一检测设备的方向变化： [立即检测 iOS 方向变化](https://stackoverflow.com/questions/12085990/detecting-ios-orientation-change-instantly) 并再次在旋转时显示您的 self.docInteraction。

此外，如果您打算在将来的某一天使用**presentOptionsMenuFromRect**而不是**presentOpenInMenuFromRect**，您还必须使用**[UIPrintInteractionController sharedPrintController]**单独处理相同的定位问题。

不知道这是否是正确的解决方案，但至少它会为您服务:)

# database - 以打为单位计算

> ID：15406886
> 
> 赞同：0
> 
> 时间：2013-03-14T10:37:27.797
> 
> 标签：database, database-design, relational-database, inventory, inventory-management

有一些产品在一箱中的数量从一种产品到另一种不同，
如下面给出的一箱中三种产品的数量

```
SKU     QUANTIT_SPECIFICATION (IN ONE CARTON)
4545     7 DOZENS
3455     9 DOZENS
7856     2 DOZENS 
```

通过 Stock Keeper 将在界面下方给出库存数量

```
SKU      NAME            U1 - U2 - U3      
4545     DISPRINE         2 -  3 - 4
3455     strepsils        0 -  4 - 5
7856     Detoll           9 -  4 - 0 
```

在哪里

```
u1 is the number of carton 
u2 is the number of dozens
u3 is the number of pisces 
```

**注意**用户可以输入任何格式
的数量，例如用户像这样输入 4545 的数量

```
SKU      NAME            U1 - U2 - U3      
4545     DISPRINE         0 -  0 - 84 
```

或者用户可以输入数量为

```
SKU      NAME            U1 - U2 - U3      
4545     DISPRINE         0 -  7 - 0 
```

或者用户可以输入

```
SKU      NAME            U1 - U2 - U3      
4545     DISPRINE         1 -  0 - 0 
```

在所有情况下，当审计官想要审计时，用户都想输入一箱 4545 **BUTT**，他只生成关于可用库存量的报告，报告必须遵循与 u1 u2 u3 相同的数量格式，但报告顺序始终遵循从 u1 到 u3

库存 4545 sku 的可用项目是 99 然后报告必须是这样的

```
SKU      NAME            U1 - U2 - U3      
4545     DISPRINE         1 -  1 - 3 
```

**如何在数据库中实现它**

在 sku 表规范中，一个纸箱可以包含多少个这样的提及

```
sku(id, name , quantity_specification) 
```

所以当库存管理员输入数量软件逻辑应该是这样的

```
first get the specification then match it with u1 u2 u3 multiply/ subtract and commit it to warehouse table 
```

**实现这个的任何其他快捷方式**

**为此提供机制**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:32:29.950

**数量计算**

您已经有一个纸箱规格表，其中列出了多少个纸箱组成一个纸箱。

你知道一打是12个项目。

该机制非常简单。

**纸箱规格表**

让我们定义您的纸箱规格表。

```
Carton Specification
--------------------
Carton Specification ID
SKU
Carton quantity (in dozens) 
```

**库存数量表**

假设我们有一个这样的库存数量表。

```
Stock Quantity
--------------
Stock Quantity ID
SKU
Quantity (in units) 
```

**计算**

从您的一个示例中，我们在 SKU 4545 的库存数量表中读取了一行，我们得到了数量。99个单位。

现在，我们读取了您的 SKU 4545 的纸箱规格表行，我们得到了纸箱数量。7打。(7 * 12) = 84。因此，我们在一个纸箱中有 84 个单位。

将 84 除以 99 (99 / 84)。答案是 1。我们有一箱单位。

现在，乘以 1 乘以 84，然后从 99 中减去该数值 (99 - (84 * 1))。答案是 15。

将 12 分成 15 (15 / 12)。答案是 1。我们有十几个单位。

新，乘以 1 乘以 12 并从 15 中减去该数量 (15 - (12 * 1))。答案是3。

因此，我们有 1 箱、1 打和 3 个单位的 SKU 4545，这就是您要展示的。

# arrays - vhdl：将向量转换为字符串

> ID：15406887
> 
> 赞同：4
> 
> 时间：2013-03-14T10:37:30.457
> 
> 标签：arrays, string, vector, type-conversion, vhdl

如何将 std_logic 向量、bit_vector 或任何其他向量转换为字符串？

```
Signal a,b          : UNSIGNED(7 DOWNTO 0);
SIGNAL x,y,z    : BIT_VECTOR(7 DOWNTO 0);

...

report "value: " & BIT_VECTOR'Image(x) severity note;
report "and this one: " & to_string(a) severity note; 
```

这不起作用，那么如何将向量转换为字符串？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-03-17T18:39:35.440

VHDL-2008 标准定义`to_string`了`std_logic_vector`和`std_ulogic_vector`以及各种其他类型。使用 VHDL-2008 模式可能是最简单的（现在大多数模拟器都支持 2008）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T12:56:19.713

正如您所发现的，'image 属性仅针对标量类型声明，而不是数组或记录：通常的方法是在设计开始时创建自己的测试实用程序库，包括`to_string`或`image`函数包中的函数，并在整个过程中使用它.

将这些库标准化是完全可能的，您可能会发现许多潜在的“测试实用程序”包，但没有一个真正流行到足以成为标准的程度。

话虽如此，您可能会发现以下软件包是一个有用的起点。

它封装了几个自定义数据类型，并对它们进行操作。没有泛型，但由于重载，您可以像使用泛型一样使用包。（你会注意到函数体是不完整的！）扩展它并添加类型在大多数情况下很容易剪切和粘贴；它使主要设计变得混乱。

最好将 declns 类型和（仅限 testbench）函数分离到两个单独的包中；`Types`和`Types_Test_Utils`。然后在整个设计中使用类型，而测试实用程序只暴露给测试台。

```
library IEEE;
use IEEE.numeric_std.all;

package Types is
  subtype SmallNum is UNSIGNED(7 DOWNTO 0);
  subtype BiggerNum is UNSIGNED(19 DOWNTO 0);
  subtype Bits is BIT_VECTOR(7 DOWNTO 0);

  -- and operations on these types
  -- Simulate generic procedures using overloading

  function to_string(N : Unsigned) return String;
  function to_string(N : Bits) return String;  

  procedure eq_checker (name : string; sig,should : SmallNum; at : time);
  procedure eq_checker (name : string; sig,should : Bits; at : time);

end Types;

package body Types is

function to_string(N : Unsigned) return String is
variable temp : string(1 to (N'length + 3)/4) := (others => 'x');
begin
   -- not finished!
   return temp;
end to_string;

function to_string(N : Bits) return String is
begin
   return "hello";
end to_string;

procedure eq_checker(name : string; sig,should : SmallNum; at : time) is
begin
  if (at = now) then
    if sig = should then
      report to_string(sig) & "has same value" severity note;
    else
      report to_string(sig) & "has not same value as " & to_string(should) severity note;
    end if;
  end if;
end procedure eq_checker;

procedure eq_checker(name : string; sig,should : Bits; at : time) is
begin
   null;
end procedure eq_checker;

end Types; 
```

还有一个简单的测试器......

```
 use Work.Types.all;

  ENTITY tester IS
  END tester;

  ARCHITECTURE behavior OF tester IS 

  Signal a,b      : SmallNum := X"AA";
  Signal c        : BiggerNum := X"ABCDE";
  SIGNAL x,y      : Bits := X"BB";

  BEGIN

  process(a,x) is
  begin
     report "value: " & to_string(X) severity note;
     report "and this one: " & to_string(a) severity note;
     report "this one too: " & to_string(c) severity note;
  end process;

  END; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-09T11:54:39.943

这是一个解决方案，其中 std_logic_vector 类型变量的范围对返回值没有影响：

```
function to_string ( a: std_logic_vector) return string is
variable b : string (1 to a'length) := (others => NUL);
variable stri : integer := 1; 
begin
    for i in a'range loop
        b(stri) := std_logic'image(a((i)))(2);
    stri := stri+1;
    end loop;
return b;
end function; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-17T14:42:40.623

```
function slv_to_string ( a: std_logic_vector) return string is
    variable b : string (a'length-1 downto 1) := (others => NUL);
begin
        for i in a'length-1 downto 1 loop
        b(i) := std_logic'image(a((i-1)))(2);
        end loop;
    return b;
end function; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T11:12:58.433

```
package package_x is 
  subtype any_type is UNSIGNED(7 DOWNTO 0);

...
end package_x;

package body package_x is

  procedure someprocedure (signal sig: in any_type) is

  VARIABLE li   : line;
  file output : text open write_mode is "output";

  begin
    write(li, std_logic_vector(sig));
    writeline(output, li);
  end;
end package_x; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-11T13:36:56.090

这是我的解决方案：

```
function to_string (arg : std_logic_vector) return string is
     variable L : line;
     variable result : string(1 to arg'length);
begin
    write(L, arg);
    read(L, result);
    return result;
end function; 
```

请查看它，这只是一个概念验证。也许这就是@PlayDough 的意思。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-11-20T11:25:05.503

我最终编写了将 std_logic_vector 转换为字符串的函数。

它们可以[在这个 gist](https://gist.github.com/mathieucaroff/3132c36ff21b63a72c8c0574998859ee)或下面找到。

### util_str.vhd

```
-- Mathieu CAROFF
-- 2018-11-20
-- util_str.vhd
-- Utilitary functions to convert vectors to strings

-- Test:
-- ```bash
-- ghdl -a util_str.vhd
-- ghdl -r util_str_tb
-- ```

-- The answer from Jonathan Bromley to the toopic "std_logic_vector to string in hex format"
-- asked by Mad I.D. helped to write the functions below.
-- https://groups.google.com/forum/#!topic/comp.lang.vhdl/1RiLjbgoPy0

library ieee;
use ieee.std_logic_1164.all;

package util_str is

function bin (lvec: in std_logic_vector) return string;
function hex (lvec: in std_logic_vector) return string;

end package;

package body util_str is

    function bin (lvec: in std_logic_vector) return string is
        variable text: string(lvec'length-1 downto 0) := (others => '9');
    begin
        for k in lvec'range loop
            case lvec(k) is
                when '0' => text(k) := '0';
                when '1' => text(k) := '1';
                when 'U' => text(k) := 'U';
                when 'X' => text(k) := 'X';
                when 'Z' => text(k) := 'Z';
                when '-' => text(k) := '-';
                when others => text(k) := '?';
            end case;
        end loop;
        return text;
    end function;

    function hex (lvec: in std_logic_vector) return string is
        variable text: string(lvec'length / 4 - 1 downto 0) := (others => '9');
        subtype halfbyte is std_logic_vector(4-1 downto 0);
    begin
        assert lvec'length mod 4 = 0
            report "hex() works only with vectors whose length is a multiple of 4"
            severity FAILURE;
        for k in text'range loop
            case halfbyte'(lvec(4 * k + 3 downto 4 * k)) is
                when "0000" => text(k) := '0';
                when "0001" => text(k) := '1';
                when "0010" => text(k) := '2';
                when "0011" => text(k) := '3';
                when "0100" => text(k) := '4';
                when "0101" => text(k) := '5';
                when "0110" => text(k) := '6';
                when "0111" => text(k) := '7';
                when "1000" => text(k) := '8';
                when "1001" => text(k) := '9';
                when "1010" => text(k) := 'A';
                when "1011" => text(k) := 'B';
                when "1100" => text(k) := 'C';
                when "1101" => text(k) := 'D';
                when "1110" => text(k) := 'E';
                when "1111" => text(k) := 'F';
                when others => text(k) := '!';
            end case;
        end loop;
        return text;
    end function;

end package body;

library ieee;

use ieee.std_logic_1164.all;
use work.util_str.all;

entity util_str_tb is
end entity;

architecture util_str_tb_arch of util_str_tb is
begin
    process is
        variable byte: std_logic_vector(12-1 downto 0) := "000001001111";
    begin
        report "bin " & bin(byte);
        report "hex " & hex(byte);
        wait;
    end process;
end architecture; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-09-14T14:48:57.690

```
function slv_to_string ( a: std_logic_vector) return string is
    variable b : string (a'length downto 1) := (others => NUL);
    variable c : integer := 1;
begin
        for i in a'range loop
        b(c) := std_logic'image(a((i-1)))(2);
        c := c + 1;
        end loop;
    return b;
end function; 
```

[Jason 函数的](https://stackoverflow.com/a/36063837/2180363)小修复，这个确实打印了整个 std_logic_vector，而不是除了最后一个元素 a(a'length'-1) 之外的所有内容。

# jinja2 - 使用 Jinja2 计算列表中具有特定值的元素

> ID：15406894
> 
> 赞同：4
> 
> 时间：2013-03-14T10:37:44.200
> 
> 标签：jinja2

假设我有一个对象或字典数组，我想计算数组中具有特定值的属性的对象数。

Jinja 已经提供了一种迭代具有特定值的元素的机制：

```
{% set list = [dict(a=1),dict(a=2),dict(a=1)] %}
{{ list }}<br/>
{% for e in list if e.a == 1 %}
   ...
{% endfor %} 
```

我只是想知道 for 循环将被评估多少次。

我能想到的最好的方法是`loop.last`在上述循环的最后一次迭代中使用变量来评估我的表达式

```
{% set list = [dict(a=1),dict(a=2),dict(a=1)] %}
{{ list }}<br/>
{% for e in list if e.a == 1 %}
  {% if loop.last %}
    list contains {{ loop.index }} elements with a=1
  {% endif %}
{% endfor %} 
```

但是，如果匹配项的数量为零，这将不起作用。我显然可以将条件放入循环中以解决该问题

```
{% set list = [dict(a=1),dict(a=2),dict(a=1)] %}
{{ list }}<br/>
{% for e in list %}
  {% if e.a == 1 %}
    {% set count = count|d(0) + 1 %}
  {% endif %}
  {% if loop.last %}
    list contains {{ count }} elements with a=1
  {% endif %}
{% endfor %} 
```

只要列表不为空（在我的情况下，列表永远不会为空），现在就可以了。

另一个明显的答案是向全局上下文添加一个可用于执行此计算的函数，但我很惊讶这样的功能还不存在。

我的目标是在表格中存在特定值时更改某些表格标题的样式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-12-07T14:22:16.360

您可以使用 jinja 的功能以简洁的方式实现您的目标，而无需使用循环：

```
{{ yourlist | selectattr("a", "equalto", 1) | list | count }} 
```

请注意，您必须使用*列表*过滤器才能计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T11:27:09.953

还有`loop.length`，你有没有看过使用它？

# sql - isql 不适用于复杂的行类型

> ID：15406896
> 
> 赞同：1
> 
> 时间：2013-03-14T10:37:47.770
> 
> 标签：sql, informix

我在 Informix 中创建了一个表：

```
create table tab_unmrow
(
   area integer,
   rectangle row(
            x integer,
            y integer,
            length integer,
            width integer)
); 
```

现在，当我`select first 1 * from tab_unmrow`使用时`dbaccess`，它工作正常。但是在使用时`isql`，我收到了这个错误：

> ```
> 1820: Host variable type has been changed between fetches or puts.
> Error in line 1 
> ```

有人可以建议我如何解决这个问题以及为什么会出现这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:08:39.823

除了向 IBM 报告错误外，您可能无法直接对此做任何事情。

最终，在 ESQL/C 中存在一个错误，即 CQ idsdb00247065，它给出了错误 -1820。除非将 LVARCHAR 变量的大小设置为原始大小，否则在重新打开游标时不能对 LVARCHAR 变量重用 SQL 描述符。这很烦人，因为改变大小的是 ESQL/C 本身。

应用程序可以使用一种解决方法，即存储每个 LVARCHAR 的原始大小，并在第一个 FETCH 之前（实际上是在 OPEN 之后）在 SQL 描述符中恢复该大小。但这需要 ISQL 的源代码。此问题与 LVARCHAR 相关，即使在您显示的 SQL 中没有直接提及它，因为 Informix SQL ( `isql`) 和 DB-Access ( `dbaccess`) 等客户端程序处理复杂类型（例如 ROW 类型）的方式是将LVARCHAR 的值。

该修复将需要 (a) Informix ClientSDK (CSDK) 的固定版本和 (b) 使用固定 CSDK 构建的 ISQL 版本。

在短期内，您将不得不使用 DB-Access 而不是 ISQL 来处理 SQL 脚本，因为您说 DB-Access 可以处理它。尽管 DB-Access 是 20 年前从 ISQL 中分离出来的，但从那时起它们就独立开发了。

如果这个诊断有缺陷，那就是它适用于 SQL 描述符，而不是`sqlda`结构（你不需要了解细节；处理动态 SQL 的机制只有两种，错误报告严格适用于一个, 但可能适用于另一个，因为它可能`isql`使用`sqlda`而不是 SQL 描述符）。然而，这两个问题很有可能是密切相关的，即使它不是很明确。

# javascript - 使用 HTML5/JQuery 播放视频

> ID：15406897
> 
> 赞同：1
> 
> 时间：2013-03-14T10:37:49.850
> 
> 标签：javascript, jquery, html, custom-controls, html5-video

我的 HTML5 视频代码：

```
<video id="myVideo">
<source src="Some source" type="some type" \>
</video> 
```

我的播放按钮点击功能：

```
$("#myVideo").play(); 
```

该代码对我不起作用。我使用默认浏览器控件检查了代码的视频 - 它工作正常。唯一的问题是当我尝试制作自定义控件播放按钮时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:40:36.317

尝试`$('#myVideo').get(0).play();`改用。

并不是说您甚至需要使用 jQuery 来执行此操作：

```
document.getElementById('myVideo').play(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-29T10:42:04.543

您可以通过自动播放或在使用 .click() 方法单击按钮后使用 HTML。正如上面提到的用户，您可以使用#myVideo，它还可以让您在 css 中格式化和定位视频.. 如下所示：

```
#myVideo {
margin-left: auto;
margin-right: auto;
top : auto;
display: block;
width: 50%;
} 
```

# android - Ormlite：FieldType 是原始类型，但标记为外来类型

> ID：15406903
> 
> 赞同：1
> 
> 时间：2013-03-14T10:38:03.110
> 
> 标签：android, ormlite

我想知道，标题中的错误是什么意思-它在我的项目中经常发生，但绝对没有意义（显然，相关的类是神经元的原始类型）。

在我看来，如果某些关系配置错误（如注释中拼写错误的外部字段名称），则会引发此错误 - 但该错误未提供有关它的信息。找到那些错误的关系非常耗时，以至于我本可以花时间在没有任何 orm 的普通 sql 中编写我的模型！

我也遇到了一个奇怪的情况，在这种情况下我没有发现任何问题——但是再次抛出了“标记为外来的原始类型”异常。下面是这种情况。

沿着模型中的许多表（大约 50 个类），我创建了这两个：Tab1：

```
@DatabaseTable()
public class Tab1 {
    @DatabaseField(generatedId = true)
    int id;

    @ForeignCollectionField(eager = false, foreignFieldName = "tab1")
    Collection<Tab2> tab2;

    public Tab1() {
    }

    public int getId() {
            return id;
    }

    public void setId(int id) {
            this.id = id;
    }

    public Collection<Tab2> getTab2() {
            return tab2;
    }
} 
```

表 2：

```
@DatabaseTable()
public class Tab2 {
    @DatabaseField(generatedId = true)
    int id;

    @DatabaseField(foreign = true)
    Tab1 tab1;

    public Tab2() {
    }

    public Tab2(Tab1 tab1) {
            super();
            this.tab1 = tab1;
    }

    public int getId() {
            return id;
    }

    public void setId(int id) {
            this.id = id;
    }

    public Tab1 getTab1() {
            return tab1;
    }

    public void setTab1(Tab1 tab1) {
            this.tab1 = tab1;
    }
} 
```

在 DatabaseHelper 中，我创建了 daos：

```
public class DatabaseHelper extends OrmLiteSqliteOpenHelper {

    private static final String DATABASE_NAME = "samplename.db";
    private static final String BACKUP_DATABASE_NAME = "samplename_bak.db";
    private static final int DATABASE_VERSION = 2;
    private static String DB_PATH = "/data/data/com.samplepath/databases/";

// DAOs

Dao<Tab1, Integer> tab1Dao;
Dao<Tab2, Integer> tab2Dao;
    // many other daos

    public Dao<Tab1, Integer> getTab1Dao() {
            try {
                    if (tab1Dao == null) {
                            tab1Dao = DaoManager.createDao(connectionSource, Tab1.class);
                    }
                    return tab1Dao;
            } catch (SQLException e) {
                    return null;
            }
    }

    public Dao<Tab2, Integer> getTab2Dao() {
            try {
                    if (tab2Dao == null) {
                            tab2Dao = DaoManager.createDao(connectionSource, Tab2.class);
                    }
                    return tab2Dao;
            } catch (SQLException e) {
                    return null;
            }
    }
    //many other dao getters

    public DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION, R.raw.ormlite_config);
            Log.i("dbTag", "Creating database from file...");
            SQLiteDatabase db = this.getWritableDatabase();
    }

    @Override
    public void onCreate(SQLiteDatabase sqLiteDatabase, ConnectionSource connectionSource) {
            try {
                    Log.i("dbTag", "Creating database....");
                    TableUtils.createTable(connectionSource, Tab1.class);
                    TableUtils.createTable(connectionSource, Tab2.class);
                    //other create tables
                    Log.i("Exception", "inserted");
            } catch (SQLException e) {
                    Log.i("Exception", "error - could not create database.");
                    Log.i("Exception", e.getMessage());
                    Log.e("Exception", "", e);
            }
    }

    @Override
    public void onUpgrade(SQLiteDatabase sqLiteDatabase, ConnectionSource connectionSource, int oldVersion,
                    int newVersion) {
            try {
                    Log.i("dbTag", "onUpgrade");
                    Log.i("dbTag", "Dropping database....");
                    TableUtils.dropTable(connectionSource, Tab1.class, true);
                    TableUtils.dropTable(connectionSource, Tab2.class, true);
                    //other drops
                    Log.i("dbTag", "Creating database....");
                    onCreate(sqLiteDatabase, connectionSource);
            } catch (SQLException e) {
                    Log.e(DatabaseHelper.class.getName(), "Can't drop databases", e);
                    throw new RuntimeException(e);
            }
    }
} 
```

我还在 config util 中包含这两个类并创建 ormlite_config.txt 文件。我在基本活动中与 roboguice 一起管理数据库助手：

```
public class BaseActivity<T extends OrmLiteSqliteOpenHelper, E extends BaseErrorHandler> extends OrmLiteBaseActivity<T> implements RoboContext, IErrorHandler {

    protected EventManager eventManager;
    protected HashMap<Key<?>,Object> scopedObjects = new HashMap<Key<?>,Object>();
    protected E errorHandler;
    public static final DefaultHttpClient httpclient = new DefaultHttpClient();
    public static Map<String,String> args = null;

    @Inject
    ContentViewListener ignored; // do not use?

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        final RoboInjector injector = RoboGuice.getInjector(this);
        eventManager = injector.getInstance(EventManager.class);
        injector.injectMembersWithoutViews(this);
        super.onCreate(savedInstanceState);
        eventManager.fire(new OnCreateEvent(savedInstanceState));
    }

    @Override
    protected void onRestart() {
        super.onRestart();
        eventManager.fire(new OnRestartEvent());
    }

    @Override
    protected void onStart() {
        super.onStart();
        eventManager.fire(new OnStartEvent());
    }

    @Override
    protected void onResume() {
        super.onResume();
        eventManager.fire(new OnResumeEvent());
    }

    @Override
    protected void onPause() {
        super.onPause();
        eventManager.fire(new OnPauseEvent());
    }

    @Override
    protected void onNewIntent( Intent intent ) {
        super.onNewIntent(intent);
        eventManager.fire(new OnNewIntentEvent());
    }

    @Override
    protected void onStop() {
        try {
            eventManager.fire(new OnStopEvent());
        } finally {
            super.onStop();
        }
    }

    @Override
    protected void onDestroy() {
        try {
            eventManager.fire(new OnDestroyEvent());
        } finally {
            try {
                RoboGuice.destroyInjector(this);
            } finally {
                super.onDestroy();
            }
        }
    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        final Configuration currentConfig = getResources().getConfiguration();
        super.onConfigurationChanged(newConfig);
        eventManager.fire(new OnConfigurationChangedEvent(currentConfig, newConfig));
    }

    @Override
    public void onContentChanged() {
        super.onContentChanged();
        RoboGuice.getInjector(this).injectViewMembers(this);
        eventManager.fire(new OnContentChangedEvent());
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        eventManager.fire(new OnActivityResultEvent(requestCode, resultCode, data));
    }

    public Map<Key<?>, Object> getScopedObjectMap() {
        return scopedObjects;
    }

    @Override
    public void handleError(int resId) {
        errorHandler.exceptionHandler(getString(resId), this);
    }

} 
```

在午餐活动中，我运行代码：

```
Log.i("Tab1", "creating tab1");
getHelper().getTab1Dao();
Log.i("Tab1", "created tab1");
Log.i("Tab1", "creating tab2");
getHelper().getTab2Dao();
Log.i("Tab1", "created tab2"); 
```

该应用程序首先从设备上卸载，然后安装并再次运行。这是我在日志中看到的：

```
03-14 11:22:54.400: I/DaoManager(31657): Loaded configuration for class com.xxx.xxx.model.Tab1
03-14 11:22:54.400: I/DaoManager(31657): Loaded configuration for class com.xxx.xxx.model.Tab2
03-14 11:22:54.423: I/dbTag(31657): Creating database from file...
03-14 11:22:54.486: I/dbTag(31657): Creating database....
03-14 11:22:54.494: I/TableUtils(31657): creating table 'tab1'
03-14 11:22:54.494: I/TableUtils(31657): executed create table statement changed 1 rows: CREATE TABLE `tab1` (`id` INTEGER PRIMARY KEY AUTOINCREMENT ) 
03-14 11:22:54.494: I/TableUtils(31657): creating table 'tab2'
03-14 11:22:54.501: I/TableUtils(31657): executed create table statement changed 1 rows: CREATE TABLE `tab2` (`id` INTEGER PRIMARY KEY AUTOINCREMENT , `tab1_id` INTEGER ) 
[...]
03-14 11:22:55.283: I/Tab1(31657): creating tab1
03-14 11:22:55.291: E/Tab1(31657): java.lang.IllegalArgumentException: Field FieldType:name=tab1,class=Tab2 is a primitive class class com.xxx.xxx.model.Tab1 but marked as foreign
03-14 11:22:55.291: E/Tab1(31657):  at com.j256.ormlite.field.FieldType.configDaoInformation(FieldType.java:315)
03-14 11:22:55.291: E/Tab1(31657):  at com.j256.ormlite.dao.BaseDaoImpl.initialize(BaseDaoImpl.java:200)
03-14 11:22:55.291: E/Tab1(31657):  at com.j256.ormlite.dao.BaseDaoImpl.<init>(BaseDaoImpl.java:126)
03-14 11:22:55.291: E/Tab1(31657):  at com.j256.ormlite.dao.BaseDaoImpl.<init>(BaseDaoImpl.java:117)
03-14 11:22:55.291: E/Tab1(31657):  at com.j256.ormlite.dao.BaseDaoImpl$5.<init>(BaseDaoImpl.java:911)
03-14 11:22:55.291: E/Tab1(31657):  at com.j256.ormlite.dao.BaseDaoImpl.createDao(BaseDaoImpl.java:911)
03-14 11:22:55.291: E/Tab1(31657):  at com.j256.ormlite.dao.DaoManager.doCreateDao(DaoManager.java:359)
03-14 11:22:55.291: E/Tab1(31657):  at com.j256.ormlite.dao.DaoManager.createDaoFromConfig(DaoManager.java:326)
03-14 11:22:55.291: E/Tab1(31657):  at com.j256.ormlite.dao.DaoManager.createDao(DaoManager.java:55)
03-14 11:22:55.291: E/Tab1(31657):  at com.j256.ormlite.android.apptools.OrmLiteSqliteOpenHelper.getDao(OrmLiteSqliteOpenHelper.java:239)
03-14 11:22:55.291: E/Tab1(31657):  at com.xxx.xxx.xxx.onCreate(XXX.java:43)
03-14 11:22:55.291: E/Tab1(31657):  at android.app.Activity.performCreate(Activity.java:4465)
03-14 11:22:55.291: E/Tab1(31657):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
03-14 11:22:55.291: E/Tab1(31657):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
03-14 11:22:55.291: E/Tab1(31657):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
03-14 11:22:55.291: E/Tab1(31657):  at android.app.ActivityThread.access$600(ActivityThread.java:128)
03-14 11:22:55.291: E/Tab1(31657):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
03-14 11:22:55.291: E/Tab1(31657):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-14 11:22:55.291: E/Tab1(31657):  at android.os.Looper.loop(Looper.java:137)
03-14 11:22:55.291: E/Tab1(31657):  at android.app.ActivityThread.main(ActivityThread.java:4514)
03-14 11:22:55.291: E/Tab1(31657):  at java.lang.reflect.Method.invokeNative(Native Method)
03-14 11:22:55.291: E/Tab1(31657):  at java.lang.reflect.Method.invoke(Method.java:511)
03-14 11:22:55.291: E/Tab1(31657):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
03-14 11:22:55.291: E/Tab1(31657):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
03-14 11:22:55.291: E/Tab1(31657):  at dalvik.system.NativeStart.main(Native Method) 
```

此外，我对模型中的所有其他类都有自定义 daos，但我不将它们用于这两个类。我还为模型中的所有其他类提供了接口（我知道这很奇怪，但出于某些目的我必须拥有它）。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:57:52.053

嗯。好吧，错误*应该*是不言自明的

```
Field FieldType:name=tab1,class=Tab2 is a primitive class 
    class com.xxx.xxx.model.Tab1 but marked as foreign 
```

由于某种原因，该`Tab2`类型将`tab1`字段标记为原始类。但是，在您的课程中，该`tab1`字段定义为：

```
@DatabaseField(foreign = true)
Tab1 tab1; 
```

您是否有可能没有更新与此类关联的数据库配置文件？也许它*曾经*是一个`int`，现在它是一个`Tab1`？更改架构时，您需要重新生成配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T07:49:32.120

我遇到了同样的问题，虽然我不知道到底是什么问题，但我确定它是由 ormlite_config.txt 文件引起的。一旦我删除了文件，并将数据库助手类的构造函数更改为不使用 ormlite_config.txt 版本。一切正常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T09:57:25.310

如果有人遇到类似问题：不要在 DatabaseHelper 的构造函数中调用 this.getWritableDatabase()。当我删除它时，代码神奇地开始工作 - 不知道为什么会发生，但它可以工作。

# javascript - Javascript变量范围，存储内容以在回调中使用它

> ID：15406910
> 
> 赞同：1
> 
> 时间：2013-03-14T10:38:23.517
> 
> 标签：javascript, asynchronous, scope

我对变量的范围有疑问。我调用一个 Web 服务（异步）并且在回调中我想使用这个变量。问题是变量同时发生了变化，所以我想存储它的内容，但它没有按我的意愿工作。

```
var requiredFiles = ['config.json','resa.json', 'customers.json'];

retrieveAndStoreFiles(requiredFiles);

...

function retrieveAndStoreFiles(requiredFiles){

    for (var i= 0; i < requiredFiles.length; i++) {

         //I want to store the content of requiredFile in order to use it below
         retrieveFileOnServer(requiredFiles[i], function(response){

            if (response.items.length == 0 ) {

           //I have tried several things but requiredFile is always equal to 'customers.json'
           console.log(requiredFiles[i]);
           createNewFile(requiredFile[i], function(response){   

        });
    }
 } 
```

如您所见，我有一个包含 3 个文件名的数组。我尝试在服务器上检索它们，如果它们不存在，它们就会被创建。var requiredFile 被修改，因为它是异步的。我想在函数“retrieveAndStoreFiles”中保留自己的值

提前谢谢

**编辑**：根据 Romain 的回答更新代码

**编辑2**

```
for (var i = 0; i < requiredFiles.length; i++) {

        retrieveFile(requiredFiles[i], (function (index) { 

            console.log(index); //works
            var index = index; // index is still not accessible with that
            return function (response) { // function(response, index) is not possible, i must have only one parameter
            console.log(index); // index is not defined
            if (response.items.length == 0) {
                console.log(response);
                createNewFile(requiredFiles[index], function (response) {

                });
            }

        }

    })(i));
} 
```

我试图结合你的解决方案，但它仍然不起作用，有人能告诉我我错过了什么吗？（对不起，我是 javascript 新手）

**编辑3**

```
function retrieveFile(fileName, callback) {

var request = gapi.client.request({
    'path': '/drive/v2/files',
    'method': 'GET',
    'params': {
        q : "title='"+fileName+"'"
    }           
}); 

request.execute(function(resp) {
    callback(resp);
});
} 
```

当我尝试：

```
for(var i = 0; i < requiredFiles.length; i++) {
     window.setTimeout(
        ( function(arg1) {

            return function() {

               console.log(requiredFiles[arg1]);
            };
        } ) ( i ),
    1000
    );
} 
```

它可以工作，但是这段代码不起作用：

```
for(var i = 0; i < requiredFiles.length; i++) {
    retrieveFile(requiredFiles[i],
        ( function(arg1) {

            return function(reponse) {

               console.log(requiredFiles[arg1]); //arg1 is undefined
            };
        } ) ( i )
    );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:02:16.060

```
function retrieveAndStoreFiles(requiredFiles) {

    for (var i = 0; i < requiredFiles.length; i++) {

        (function (index) {
            //I want to store the content of requiredFile in order to use it below
            retrieveFileOnServer(requiredFiles[index], function (response) {

                if (response.items.length == 0) {

                    console.log(requiredFiles[index]);
                    createNewFile(requiredFile[index], function (response) {

                    });
                }

            });

        })(i);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:54:02.163

```
retrieveFileOnServer(requiredFile, (function(requiredFile) {return function(response){
    if (response.items.length == 0 ) {

        //I have tried several things but requiredFile is always equal to 'customers.json'
        console.log(requiredFile);
        createNewFile(requiredFile, function(response){ 
            //...
        });
    }
}})(requiredFile)); 
```

问题是`requiredFile`它只存在一次，在`retrieveAndStoreFiles`. 因此将始终采用最后看到的值。如果我有正确的左括号和右括号的数量以及正确的内容，则应该在范围链中为函数创建一个新条目，该函数`function(response)`将其中的变量`requiredFile`设置为正确的值。

有关黑魔法的更多信息，请参阅[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:41:49.497

您不应该在循环中调用retrieveAndStoreFiles 函数。

你应该让函数调用自己，增加“i”。

这样，您可以确定在下一个元素上运行函数之前请求已经完成。

# actionscript-3 - 动作脚本 3 图像加载

> ID：15406912
> 
> 赞同：0
> 
> 时间：2013-03-14T10:38:30.570
> 
> 标签：actionscript-3

我正在尝试使用 URLLoader 从服务器加载 1*1 图像，有时它会加载，有时它会给我类似 408（请求超时）的错误。

当我尝试使用 javascript 时，同样的事情总是会加载图像。所以请指导我，我应该使用 AS3 的哪个变量，以便始终加载图像。

# android - SAP connectvitiy通过android中的JDBC

> ID：15406916
> 
> 赞同：1
> 
> 时间：2013-03-14T10:38:38.193
> 
> 标签：android

我正在尝试通过 JDBC 连接连接到 SAP 数据库。我收到以下异常

> com.sap.db.jdbc.exceptions.JDBCDriverException：SAP DBTech JDBC：无法连接到 db url

但是，如果我尝试与普通 java 应用程序相同的代码，它就可以正常工作。我正在使用模拟器进行测试。

请建议我解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:48:00.477

> com.sap.db.jdbc.exceptions.JDBCDriverException：SAP DBTech JDBC：无法连接到 db url

当您连接到数据库服务器的 url 中有错误时，会发生此异常。检查它的名称和端口号，并且必须在 AndroidManifest.xml 文件中具有 Internet 权限。

# django - 在 Django 1.5 中使用通用视图在模板中添加 url 参数

> ID：15406917
> 
> 赞同：3
> 
> 时间：2013-03-14T10:38:38.277
> 
> 标签：django, django-views, url-routing, django-1.5

我正在学习 Django，目前我正在一个项目中松散地遵循[民意调查](https://docs.djangoproject.com/en/1.5/intro/tutorial04/)教程。

现在我正在尝试转换为通用视图，这就是我遇到问题的地方：

**新闻/models.py**

```
[...]
class News(models.Model):
  id = models.IntegerField(primary_key=True, editable=False)
  category = models.CharField(max_length=50L)
  title = models.CharField(max_length=200L)
  #rss_summary = models.CharField(max_length=2000L)
  rss_summary = models.TextField(max_length=2000L)
  #body_text = models.CharField(max_length=5000L)
  body_text = models.TextField(max_length=5000L)
  post_date = models.DateTimeField()
  class Meta:
      db_table = 'news'
  def __unicode__(self):
      return self.title 
```

**新闻/urls.py**

```
from django.conf.urls import patterns, url, include
from django.views.generic import DetailView, ListView

from news import views
from news.models import News

urlpatterns = patterns('',
    url(r'^$',
        ListView.as_view(
            queryset=News.objects.order_by('-post_date'),
            context_object_name='allnews',
            template_name='news/news.html'),
        name='news_index'),
[...] 
```

**新闻/模板/新闻/news.html**

```
[...]
{% for item in allnews %}
  <h1 class="news"><a href="{% url 'news_index' item.id %}">{{item.title}}</a></h1>
  [...]
{% endfor %} 
```

**现在我的问题是：**我想使用*ListView*或*DetailView*`{% url 'foo' id %}`等通用视图的语法链接到特定的新闻项目（通过 ID） 。我怎样才能做到这一点？我为 ListView 声明了一个名称，但我无法弄清楚如何指定.**`allnews.id`**

 **使用上面的代码，我得到了错误

> NoReverseMatch at /news/ 未找到带有参数“(7L,)”和关键字参数“{}”的“news_index”的反向。

有趣的是，“7L”是最新消息的id……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:39:15.780

您应该有 2 个视图，一个用于列表，另一个用于详细信息，因此当您单击列表页面中的项目链接时，它将带您到详细信息视图和模板：

**新闻/urls.py**

```
from django.conf.urls import patterns, url, include
from django.views.generic import DetailView, ListView

from news import views
from news.models import News

urlpatterns = patterns('',
    url(r'^$',
        ListView.as_view(
            queryset=News.objects.order_by('-post_date'),
            context_object_name='allnews',
            template_name='news/news.html'),
        name='news_index'),

    url(r'^(?P<id>\d+)/$',
        DetailView.as_view(
            model=News,
            context_object_name='item',
            template_name='news/news_item.html'),
        name='news_detail'),
[...] 
```

**新闻/模板/新闻/news.html**

```
[...]
{% for item in allnews %}
  <h1 class="news"><a href="{% url 'news_detail' item.id %}">{{item.title}}</a></h1>
  [...]
{% endfor %} 
```

**新闻/模板/新闻/news_item.html**

```
<a href="{% url 'news_index' %}">Back</a>

<h1 class="news">{{item.title}}</h1>
<p>{{ item.body_text }}</p> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:55:29.157

您正在使用错误的视图获取详细信息。你定义`news_index`的是一个`ListView`，你需要执行`DetailView`。在 django 文档[的通用视图](https://docs.djangoproject.com/en/1.5/intro/tutorial04/#amend-urlconf)中查看更多有关Urls 的信息。

```
url(r'^(?P<id>\d+)/$',
        DetailView.as_view(
            model=News,
            template_name='news/detail.html'),
        name='news_detail'), 
```

然后在模板中

```
{% for item in allnews %}
  <h1 class="news"><a href="{% url 'news_detail' item.id %}">{{item.title}}</a></h1>
  [...]
{% endfor %} 
```**

# symfony - HTML2PDF“错误 no6 无法加载图片”

> ID：15406921
> 
> 赞同：2
> 
> 时间：2013-03-14T10:39:03.650
> 
> 标签：symfony, html2pdf

我的 HTML2PDF 有问题，放图片时无法成功生成 PDF。我有这样一条消息：“错误号 6 无法加载图片 /Symfony/images/logo.png” 源代码：

```
 <img src=" {{ asset('logo.png' }} "> 
```

我还用外部图像进行了测试，问题是一样的。

```
 <img src="http://www.ringencentrum.se/Images/Logos/JC_logo_CMYK.jpg"> 
```

我通过将图像放在同一个模板文件夹中来测试“src=./logo.png”。

你能帮助我吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-17T05:28:21.780

我在使用 .png 时遇到过这种情况。如果我使用 .jpg 它的工作。问题是 pathtohtml2pdf/_tcpdf_5.0.022/ 中缓存和图像文件夹的文件权限。它应该有写权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T17:00:56.470

这是我学到的，我希望这个解决方案还不算太晚：html2pdf 不知道如何解释图像路径中的空格。诀窍是删除路径中的所有空格并对其进行编码。

例如。路径[http://example.com/images/This](http://example.com/images/This) - is - my - Photo.jpeg 将产生“错误 no6 无法加载图片”错误

在这种情况下，html2pdf 正在寻找 [http://example.com/images/This%20-%20is%20-%20my%20-%20Photo.jpeg](http://example.com/images/This%20-%20is%20-%20my%20-%20Photo.jpeg)

摆脱空格，使用过滤器对空格进行编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T08:21:52.093

您可以使用我的技巧：您必须添加一个“。” 在url之前，并删除assetic生成的路径中的一些目录。对我来说，我用切片 7 来无限。

```
 <img src=".{{asset('img/'~dossier.pageg.chemin)|slice(7,200) }}"  alt='image' /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-28T19:26:38.060

这个答案可能为时已晚，但我遇到了同样的问题，解决方案是......

**不要使用PNG图像！**

是的， **HTML2PDF**应该支持 PNG 图像，但由于某种原因，当您使用 PNG（至少在我的测试中）时，它总是会使脚本崩溃。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-03T13:24:05.183

首先，请确保您提供的是 URL，而不是文件路径；例如，如果您尝试使用来自 c:\foo\bar\baz.gif 的图像，则需要使用以下 URL：file:///C:/foo/bar/baz.gif。

来源：[html2ps/常见问题](http://www.tufat.com/docs/html2ps/faq.html)

# mysql - 如何在 MySQL 中选择不同的行？

> ID：15406922
> 
> 赞同：0
> 
> 时间：2013-03-14T10:39:07.237
> 
> 标签：mysql

当我执行：

```
SELECT t.testname , r.testrange 
FROM test as t 
LEFT JOIN range r ON t.test_id = r.test_id  
WHERE  r.test_id = 25; 
```

我得到如下结果：-

```
 +-----------+---------------------+
    | testname  | testrange           |
    +-----------+---------------------+
    | A:G RATIO | 15-20 for children  |
    | A:G RATIO | 30-60 for adults    |
    | A:G RATIO | 100 - 200 for women |
    +-----------+---------------------+ 
```

如您所见， testname 在第一列中重复。那么我怎么能得到这样的结果 -

```
 +-----------+---------------------+
    | testname  | testrange           |
    +-----------+---------------------+
    | A:G RATIO | 15-20 for children  |
    |    --     | 30-60 for adults    |
    |    --     | 100 - 200 for women |
    +-----------+---------------------+ 
```

即只有唯一的 testname 应该与 testrange 列中的所有 testrange 一起出现在 testname 列中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:49:57.217

您可以使用用户定义的变量为每一行分配一个行号值，因此您的代码将类似于以下内容：

```
select 
  case when rn = 1 then testname else '' end testname,
  testrange
from
(
  select t.testname,
    r.testrange,
    @row:=case when @prev=t.testname then @row else 0 end +1 rn,
    @prev:=testname
  FROM test as t 
  LEFT JOIN `range` r ON t.test_id = r.test_id  
  cross join (select @row:=0, @prev:=null) c
  WHERE  r.test_id = 25
  order by t.testname
) src
order by rn 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/2c2e5/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:22:24.280

如果你需要一行，你应该在得到结果后使用 group concat 你可以分解列。

```
SELECT
  t.testname,
  GROUP_CONCAT(r.testrange) AS testrange
FROM test as t
  LEFT JOIN range r
    ON t.test_id = r.test_id
WHERE r.test_id = 25
GROUP BY r.testrange; 
```

你想要的输出看起来很奇怪。[在此处](http://www.sqlfiddle.com/#!2/2c2e5/11)查看演示。

# python - Python：如何实现 MVC。是不是矫枉过正？甚至可能？

> ID：15406926
> 
> 赞同：0
> 
> 时间：2013-03-14T10:39:17.067
> 
> 标签：python, model-view-controller

在桌面应用程序中，我正在为城市开发一个模型。

```
class City(object):

    def __init__(self, name, population):
        self._name = name
        self._population = population 
```

我想实现一个编辑方法来改变它的私有属性。这个想法是打开一个带有文本输入字段的窗口，以便用户可以编写新值。为了使其可测试和解耦，我这样做了：

```
# Within City class
def edit(self, get_properties_function=None):
    """
    Edit properties. Don't pass get_properties_function except for testing
    """

    if get_properties_function is None:
        get_properties_function = self._get_city_properties

    new_name, new_population = get_new_properties()

    self._name = new_name
    self._population = new_population

def _get_city_properties(self):

    # launch GUI and get the new values

    return new_name, new_population 
```

现在的问题：

*   询问信息的对话框是视图，对吗？这引出了下一个问题
*   如果我有看法，我想我应该更进一步，考虑实现一个控制器。那么，**这里如何实现 MVC 呢？**

我的想法是拥有三个类（MVC），每次我实例化我的“城市概念”时，我都会实例化模型，但也会实例化视图和控制器。而Controller变成了“City”的公共接口这听起来有点矫枉过正，过于复杂了。

由于网络编程，我觉得我误解了真正的 MVC 模式。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T11:49:52.473

-----更新----
正如tereško所说，控制器没有从模型中读取。此处定义维基百科的关系[http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

----- 原创 ---
您`class City`是模型，对话框是视图，所以控制器是什么。

我认为您需要另一个类来处理“模型编辑”。

控制器提供的所有对话数据并远离`class city`.

我尝试通过数据流来描述我的观点。

启动，显示窗口（对话框？）
视图->（获取数据）控制器->（读取属性）模型
视图<-控制器<-模型（返回数据）

您要修改数据
视图 ->（将修改后的数据发送到）控制器 ->（更新模型数据）-> 模型
视图 <- 控制器 <- 模型（您的对话框显示已更新）

# sql - MS SQL 中 CASE 列上的 MAX 语句问题

> ID：15406929
> 
> 赞同：2
> 
> 时间：2013-03-14T10:39:28.820
> 
> 标签：sql, sql-server

我无法让下面查询中的第二个 MAX 语句按我的意愿工作，举一个我目前得到的输出示例；

```
PART                    FREE_STOCK      BIN             ME_BIN
01TSC7EM                21.0000         A1E             NULL
01TSC7EM010MLG           7.0000         A1E             NULL
01TSC7EM010MME           7.0000         218             218         
01TSC7EM010MSM           3.0000         407             NULL
01TSC7EM010MXL           4.0000         407             NULL 
```

该`BIN`列的第一个 MAX 正在按我所期望的分组工作，这意味着短部分获得`BIN`最多的位置`FREE_STOCK`，我希望通过使用 case 语句并遵循类似的逻辑，我也可以返回`BIN`部分结尾的位置`'%ME'`并使用相同的 MAX 行为来为短部分设置它。

这是因为我使用 case 语句来提供值而不是针对列执行吗？关于如何让它发挥作用的任何建议？

```
SELECT dbo.part_bins.part, SUM(dbo.part_bins.free_stock) AS FREE_STOCK, MAX(PART_BINS.BIN) AS Bin, 
       MAX(CASE WHEN part_bins.part like '%ME' then PART_BINS.BIN END) AS ME_Bin
FROM   dbo.part_bins 
WHERE  dbo.part_bins.free_stock > 0 
GROUP BY dbo.part_bins.part
UNION
SELECT part.master_part AS part, SUM(dbo.part_bins.free_stock) AS FREE_STOCK,     MAX(PART_BINS.BIN) AS Bin, 
       MAX(CASE WHEN part.master_part like '%ME' THEN PART_BINS.BIN END) AS ME_Bin
FROM   dbo.part_bins 
WHERE  dbo.part_bins.free_stock > 0                   
GROUP BY part.master_part 
```

我希望我能得到最终的结果是：

```
PART                    FREE_STOCK      BIN             ME_BIN
01TSC7EM                21.0000         A1E             218
01TSC7EM010MLG           7.0000         A1E             NULL
01TSC7EM010MME           7.0000         218             218         
01TSC7EM010MSM           3.0000         407             NULL
01TSC7EM010MXL           4.0000         407             NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T09:04:15.043

它不漂亮，但这是我的最终解决方案。我发现我需要在第一个选择中删除 MAX CASE 语句：

```
MAX(CASE WHEN part_bins.part like '%ME' then PART_BINS.BIN END) AS ME_Bin 
```

而是将其保留为空白列：

```
'' AS ME_Bin 
```

这使得 group by part.master_part 可以按照我的预期与第二个 SELECT 中的 MAX CASE 语句一起工作。其他变化是考虑到男性和女性产品尺寸之间的一些差异，以及考虑是否有免费库存，这些都与解决方案无关。

```
SELECT     dbo.part_bins.part, SUM(dbo.part_bins.free_stock) AS FREE_STOCK, MAX(PART_BINS.BIN) AS Bin, '' as ME_bin

FROM         dbo.part_bins LEFT OUTER JOIN
                      dbo.part ON dbo.part_bins.part = dbo.part.part LEFT OUTER JOIN
                      dbo.stor ON dbo.part_bins.store = dbo.stor.store LEFT OUTER JOIN
                      dbo.stor_bdtl ON dbo.part_bins.store = dbo.stor_bdtl.store AND dbo.part_bins.bin = dbo.stor_bdtl.bin
WHERE     (dbo.stor.on_hand = 1) AND (dbo.part_bins.free_stock > 0) AND (dbo.stor.sales = 1) OR
                      (dbo.stor.on_hand = 1) AND (dbo.part_bins.free_stock > 0) AND (dbo.stor.production = 1)
GROUP BY dbo.part_bins.part
UNION
SELECT     part.master_part AS part, SUM(dbo.part_bins.free_stock) AS FREE_STOCK, MAX(PART_BINS.BIN) AS Bin, 
        MAX (case 
            when part.prod_group like 'ME%' AND part_bins.part like '%ME' then part_bins.bin
            when part.prod_group like 'ME%' AND part_bins.part like '%32' then part_bins.bin
            when part.prod_group like 'LA%' AND part_bins.part like '%08' then part_bins.bin
            when part.prod_group like 'LA%' AND part_bins.part like '%XS' then part_bins.bin
        end) as ME_bin

FROM         dbo.part_bins LEFT OUTER JOIN
                      dbo.part ON dbo.part_bins.part = dbo.part.part LEFT OUTER JOIN
                      dbo.stor ON dbo.part_bins.store = dbo.stor.store LEFT OUTER JOIN
                      dbo.stor_bdtl ON dbo.part_bins.store = dbo.stor_bdtl.store AND dbo.part_bins.bin = dbo.stor_bdtl.bin
WHERE     (dbo.stor.on_hand = 1) AND (dbo.part_bins.free_stock > 0) AND (dbo.stor.sales = 1) OR
                      (dbo.stor.on_hand = 1) AND (dbo.part_bins.free_stock > 0) AND (dbo.stor.production = 1)
GROUP BY part.master_part 
```

# html - Twitter 引导图标不可见

> ID：15406932
> 
> 赞同：0
> 
> 时间：2013-03-14T10:39:43.290
> 
> 标签：html, css, twitter-bootstrap, font-awesome

使用 twitter bootstrap 我设计了这两个页面，奇怪的是图标仅在一个页面上可见，而在其他页面上不可见。

[https://music-cloud.ap01.aws.af.cm/index.html](https://music-cloud.ap01.aws.af.cm/index.html)

```
<ul class="nav">
  <li class="active"><a href="#"><i class="icon-home"></i>&nbsp;Home</a></li>
  <li ><a href="login.html"><i class="icon-signin"></i>&nbsp;Login</a></li>
  <li ><a href="register.html"><i class="icon-group"></i>&nbsp;Register</a></li>
</ul> 
```

[https://music-cloud.ap01.aws.af.cm/login.html](https://music-cloud.ap01.aws.af.cm/login.html)

```
<ul class="nav">
  <li ><a href="index.html"><i class="icon-home"></i>&nbsp;Home</a></li>
  <li class="active"><a href="#"><i class="icon-signin"></i>&nbsp;Login</a></li>
  <li ><a href="register.html"><i class="icon-group"></i>&nbsp;Register</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:42:22.863

你错过了这个css文件..`font-awesome.css`

图标样式在 font-awesome.css 中定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:55:18.360

正如已经指出的那样，查看两个页面的源代码，只有一个包含对[font-awesome](http://fortawesome.github.com/Font-Awesome/)的引用：

```
 <link rel=StyleSheet href="css/font-awesome.css" type="text/css" media=all> 
```

即：[https ://music-cloud.ap01.aws.af.cm/login.html](https://music-cloud.ap01.aws.af.cm/login.html)

使用通用头文件并使用绝对 URL 将有助于确保在移动内容或目录时不会丢失或中断任何必需的包含：

```
 <link rel=StyleSheet href="/css/font-awesome.css" type="text/css" media=all>
                             ^ 
```

# android - 恢复 ActionBar 样式或主题

> ID：15406937
> 
> 赞同：2
> 
> 时间：2013-03-14T10:40:02.153
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock, android-theme

如果我在 FragmentActivity 中的 Fragment 中这样做：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    //inflate menu

    //change actionBar
    getSupportActionBar().setLogo(R.drawable.menu_icons_alerts);
    getSupportActionBar().setBackgroundDrawable(new ColorDrawable(Color.BLUE));
    super.onCreateOptionsMenu(menu, inflater);
} 
```

如何恢复 actionBar 的默认样式/主题？

谢谢先进！

# javascript - Javascript函数创建

> ID：15406939
> 
> 赞同：0
> 
> 时间：2013-03-14T10:40:12.613
> 
> 标签：javascript, function

我有一个代码，当点击时会在气泡弹出效果中显示信息片段，并且效果很好，但我想将下面的点击代码更改为我可以从另一个 javascript 调用的函数？任何人都可以帮助新手使用javascript吗？高度赞赏。

```
dot[0].onclick = function (e) {

    locX = e.pageX - 250;
    locY = e.pageY - 300;

    if (!isPopup) {

        isPopup = true;
        popup = r.rect(locX, locY, 50, 50, 5)
           .attr({ fill: "#66000000" });
        text = r.text(locX + 20, locY + 20, lbl.node.textContent).attr(txt)
            .attr({ fill: "#eee" });

    }
    else {
        popup.hide();
        text.hide();
        popup = r.rect(locX, locY, 50, 50, 5)
           .attr({ fill: "#66000000" });
        text = r.text(locX + 20, locY + 20, lbl.node.textContent).attr(txt)
            .attr({ fill: "#eee" });

    }
    e.stopPropagation();

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:43:34.150

```
function yourOnclickFunction(e) {
    // ...
}
dot[0].onclick = yourOnclickFunction; 
```

# php - 如何使用 date("F j, Y, "); 回显默认日期 0000-00-00；如果日期没有更新？

> ID：15406940
> 
> 赞同：0
> 
> 时间：2013-03-14T10:40:16.410
> 
> 标签：php, mysql, date, datetime, strtotime

在我的数据库中，日期的默认值设置为`not null 0000-00-00`，我使用日期格式`date("F j, Y, ");`打印出日期。

`strtotime`如果我以下列方式使用函数回显日期，

```
echo date("F j, Y", strtotime($row_schedule['meeting_date'])); 
```

它`November 30, -0001`根据设置的默认日期返回`0000-00-00`

而如果我将日期的默认值从更新为`0000-00-00`实时日期，`2013-02-28`它会给出适当的输出，因为它应该是这样的，

`February 28, 2013`

我的问题是如何打印默认日期`0000-00-00`但不`November 30, -0001`使用我当前的输出方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:46:12.520

你总是可以编写自己的函数

```
function myDate($time){
  if($time == '0000-00-00')
     return $time;
  return date("F j, Y", strtotime($time));
} 
```

然后只是`echo myDate($row_schedule['meeting_date']);`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T10:48:32.740

[`strtotime`](http://php.net/manual/en/function.strtotime.php)对于无效日期返回 false - 这是您应该进行完整性检查的地方。

```
$time = strtotime($var_from_db);
if($time!==false)
  echo date("F j, Y", $time); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T11:00:13.087

添加条件，

```
echo $row_schedule['meeting_date'] == '0000-00-00'?
'your default time/string':
date("F j, Y", strtotime($row_schedule['meeting_date'])); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T12:06:05.280

另一个简单的方法是

```
if ($row_schedule['meeting_date'] == '0000-00-00') {
echo '0000-00-00';
}else{
echo
date("F j, Y g:i A", strtotime($row_schedule['meeting_date']));
} 
```

谢谢，

# ios - 核心数据，循环 VS 搜索

> ID：15406945
> 
> 赞同：0
> 
> 时间：2013-03-14T10:40:36.490
> 
> 标签：ios, core-data, nspredicate

我在应用程序中使用核心数据，基本上想知道是否有人知道这两个过程中的哪一个会更快......

我有一个表视图，需要将核心数据中的条目与行匹配，此时我将所有核心数据类放在一个数组中，使用：

```
NSArray *classArray = (NSArray *)[currentUser myCDClasses];

for(myCDClasses *class in classArray)
{
  if([class class_id] == theIDINeedToMatch)
  {
    myCDClasses *classForThisRow = class;
    break;
  }
} 
```

我想知道的是，根据我需要检索的 ID 进行谓词搜索是否会更快？

我认为通常它必须循环通过的最大项目约为 40。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:32:18.130

我怀疑你会注意到 40 件商品有什么不同。对于大型数据集，使用谓词可能更快，因为搜索是在 SQLite 级别完成的，并且只有结果加载到内存中，而“循环解决方案”要求您比较的所有对象都是“故障输入” " 并从存储文件中读取。

# ruby - 如何判断服务器状态？

> ID：15406946
> 
> 赞同：0
> 
> 时间：2013-03-14T10:40:41.200
> 
> 标签：ruby, shell, architecture

我有以下设置。

一个用于游戏菜单的 webserver，一个游戏 websocket 客户端。用于跟踪已启动游戏和用户统计数据等的数据库。将网络客户端连接到不同游戏服务器的代理。控制游戏动态的服务器应用程序。

这些东西位于不同的服务器上。

有时游戏服务器由于未知原因而宕机。我想编写一个脚本或类似的脚本来尝试连接到代理以查看服务器是否响应。我将使用此脚本在游戏菜单中显示服务器状态。我应该如何编写这个脚本 有什么我应该注意的注意事项吗？将其编写为脚本是否是个好主意，例如将服务器状态写入文件，然后允许从 http 请求中读取该文件？有没有首选的语言来做这种事情？

我要找的不是软件。我正在寻找有关如何编写此类软件的想法或意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T11:48:37.983

这个问题应该在 serverfault 上，在*监督*标签下。看看 Nagios，你可以满足大部分需求

# node.js - nodejs中的压缩json

> ID：15406949
> 
> 赞同：1
> 
> 时间：2013-03-14T10:40:46.230
> 
> 标签：node.js, compression, connect

我有一个使用connect编写的nodejs服务器。我将一些数据公开为 json。我必须在发送前压缩数据。我在连接中使用了压缩功能，但我不确定如何检查数据是否压缩。下面是我的代码：

```
var connect = require('connect')
 , http = require('http');

var app = connect()

 .use(connect.compress(console.log("I have compressed data")))

.use(function(req, res){
res.setHeader('Content-Type', 'application/json');
//res.end("store_id: 'S3000981'");

res.end('{"store_id": "S3000990"}');
});
http.createServer(app).listen(3000); 
```

任何关于此的想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:51:11.593

运行你的服务器，然后试试这个：

```
curl -H 'Accept-Encoding: gzip' -v localhost:3000 
```

如果您看到以下内容，则表示响应已压缩：

```
< Content-Encoding: gzip 
```

此外，这不会像您认为的那样做，并且可能会产生副作用：

```
.use(connect.compress(console.log("I have compressed data"))) 
```

如果您想在响应数据被压缩时记录来自服务器的消息，请尝试以下操作：

```
.use(connect.compress())
.use(function(req, res, next) {
  res.on('header', function() {
    var encoding = res.getHeader('Content-Encoding') || '';
    if (encoding.indexOf('gzip') != -1 || encoding.indexOf('deflate') != -1)
    {
      console.log("I have compressed data");
    }
  });
  next();
}) 
```

# algorithm - 决定“跳跃杰克”的算法

> ID：15406950
> 
> 赞同：10
> 
> 时间：2013-03-14T10:40:49.853
> 
> 标签：algorithm

前段时间在一次编程比赛中，我遇到了一个令人费解的问题，从那以后就一直困扰着我。虽然我没有逐字记住它，但我会尽力重现它：

> 杰克从数轴上的 0 开始，向任一方向跳跃一个单位。他的每一次连续跳跃都比前一次长 1 个单位，并且可以在任一方向进行。编写一个程序，接受一个数字并返回 Jack 为达到该数字所进行的最小跳跃次数。

如果这不是一个好问题，或者如果标题被认为具有误导性，我提前道歉。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T18:12:08.660

对于任意数量的跳跃，可以轻松计算出千斤顶可以行进的最大正距离。翻转正跳的极性总计任何特定值*k*将导致千斤顶最终比其他情况低 2k 计数。对于任何最大距离*t*和任何小于或等于该距离的相同奇偶校验的非负*n*（即使*t*为偶数；如果*t*为奇数则为奇数）小于或等于该距离，将有可能找到总和为*n*的跳跃组合. 因此，人们不必担心树木、背包或任何其他类似的东西——只要一定数量的跳跃就足够了，以及它是否会产生正确的“奇偶性”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T00:04:45.037

我想详细说明@supercat 正确且快速的解决方案，并描述一种算法，该算法除了计算这样一个总和的长度外，还计算一个最小长度总和。

## 算法

找到最小整数 k 使得 t_k := 1 + 2 + 3 + ... + k >= |n| 并且 t_k 与 |n| 具有相同的奇偶性。然后以系统的方式将 t_k 的和的符号翻转为总 n。

这是详细信息。请注意，t_k = k(k + 1)/2，一个三角形数。设置 t_k = |n| 求解 k 给出 (-1 + sqrt(1 + 8|n|))/2 的上限。所以 k 等于上限或 1 或 2 加上它，这三个数字中的任何一个与 n 具有相同的奇偶性并且最小。这里我们使用的事实是，三个连续三角形数的集合 {t, t + s, t + s + (s + 1)} 对于任何正整数 t, s 都包含偶数和奇数。（只需检查 t 和 s 的所有四种奇偶校验可能性。）

要找到 n 的最小长度和，首先计算 d := (t_k - n)/2。因为 t_k >= |n| 并且 t_k 和 n 具有相同的奇偶性，d 在集合 {0, 1, 2, ..., t_k} 中。现在反复减去：d = a_k (k) + r_k, r_k = a_{k-1} (k-1) + r_{k-1}, ..., r_2 = a_1 (1) + r_1，选择每个 a_i最大在 {0, 1}。根据下面的引理，r_1 = 0。所以 d = sum_{i=1}^k a_i i。因此 n = t_k - 2d = sum_{i=1}^ki - sum_{i=1}^k 2a_i i = sum_{i=1}^k (1 - 2a_i) i 和 1 - 2a_i 位于 {-1 , 1}。所以序列 b_i := 1 - 2a_i 是一条路径，根据 k 的极小性，b_i 是一条最小路径。

## 算法示例

考虑目标数 n=12。根据算法 3，k 的可能性是 5、6 或 7。t_k 的对应值是 15、21 和 28。由于 28 是其中与 n 相同奇偶性的最小的值，因此我们看到 k=7 . 所以 d = (t_k - n)/2 = 8，根据算法我们写成 1 + 7。因此到 12 的最短路径是 -1 + 2 + 3 + 4 + 5 + 6 - 7。

我说最短路径，因为最短路径通常不是唯一的*。*例如，1 + 2 -3 + 4 - 5 + 6 + 7 也可以。

## 算法正确性

引理：令 A_k = {0, 1, 2, ..., t_k}。那么一个数在 A_k 中当且仅当它可以表示为 {0, 1} 中的某个序列 a_i 的和 sum_{i=1}^k a_i i 。

证明：通过对 k 的归纳。首先，0 = sum_{i=1}^0 1，空和。现在假设结果对所有 k - 1 >= 0 都成立，并且假设 A_k 中有一个数 d。反复减去：d = a_k (k) + r_k, r_k = a_{k-1} (k-1) + r_{k-1}, ...，在{0, 1中最大选择每个a_i = 0或1 } 并在第一个 r_j 位于 A_j 中某个 j < k 时停止。然后通过归纳假设，对于 {0, 1} 中的一些 b_i，r_j = sum_{i=0}^j b_i i。然后 d = r_j + sum_{i=j+1}^k a_k i，根据需要。相反，对于 a_i 在 {0,1} 中的和 s := sum_{i=1}^k a_i i 满足 0 <= s <= sum_{i}^ki = t_k，因此 s 在 A_k 中。

## 算法时间复杂度

假设算术运算是常数时间，从 n 计算 k 需要 O(1) 时间，因此计算到 n 的最小路径的长度。然后需要 O(k) 时间来找到 d 的最小长度和，然后使用 O(k) 时间来使用该和来产生 n 的最小长度和。所以 O(k) = O(sqrt(n)) 时间全部结束。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T19:03:57.023

**n**个连续整数之和的公式是`n(n+1)/2`。例如`1+2+3+4=10`= `4*5/2=10`。这是达到目标数量所需的最少步数。但可能有过冲。说目标是`11`。四跳会让你到达`10`（我们刚刚计算过），但`5`会让你到达`5*6/2=15`。现在我们只注意到在 11 的情况下，当步长为 时我们跳回`2`，并且我们正确到达`11`。稍后我们将更详细地处理超调。回到最开始如何计算跳跃次数。我们的公式是目标数字`n(n+1)/2 = x`在哪里。[二次方程](http://en.wikipedia.org/wiki/Quadratic_equation)`x`告诉我们这个问题的解是

```
(-1+/-sqrt(-1+8x)))/2 
```

或者

```
(-1-/+(sqrt(9x))/2 
```

负的“版本”总是会产生一个虚数，这在这里无关紧要，所以我们有

```
(sqrt(9x) + 1)/2 
```

取该数字的上限，您就有了必要的初始跳跃次数。

过冲有点复杂。在我们到达的`11`例子中，超调是`4`( `15-11=4`)，所以我们只需要将`+2`跳跃变成`-2`跳跃，这就是“存放”4 个超调的地方。然而，事情并不总是那么简单：`12`可以通过`-1-2+3+4-5+6+7`: 它需要一些`7`步骤，而不是`5`像预期的那样。基本观察是超调必须是**偶数**，否则没有超调/2 步可采取。这是我们如何找到步骤数的方法`12`

1.  使用上述算法，我们发现最小步数是`5`，这让我们`15`
2.  计算超调：我们有`3`.
3.  如果超调是奇数（在这种情况下是这样），请尝试下一个步骤并返回第 2 步，直到找到偶数超调。这是您的步数

因此，对于 12，我们尝试`5`步骤、屈服`15`和超调`3`。然后我们尝试六步屈服`21`和`9`. 最后，我们尝试`7`让步`28`和超调`16`. 这是我们的最小步数。但是，这可能可以通过公式计算。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T17:53:47.710

您可以将 Jack 的进度建模为二叉树，其中左节点表示向后跳转，右节点表示向前跳转。

每个节点的值就是杰克的当前位置。

节点的深度对应于当前的跳跃长度。

**编辑**- 您不能修剪与树中较高节点具有相同值的节点，因为它的子节点的值会不同，因为它处于不同的深度。

~~为了防止搜索空间增长过快，您需要积极修剪其值与前一个节点重复的任何节点。~~

此外，可以修剪根下方的整个左子树，因为所有值都是右子树中相应值的否定。例如：

右子树：0 + 1 + 2 + 3 - 4 = 2

左子树中的镜像：0 - 1 - 2 - 3 + 4 = -2

幸运的是，这棵树似乎生成了很多重复项。例如，在 depth = 7 时，而不是 32 个节点（64/2，因为我们只处理右子树），似乎只有 6 个不同的节点：

```
4 = 0 + 1 + 2 + 3 + 4 - 5 + 6 - 7
14 = 0 + 1 + 2 + 3 + 4 + 5 + 6 - 7
16 = 0 + 1 + 2 + 3 + 4 + 5 - 6 + 7 
18 = 0 + 1 + 2 + 3 + 4 - 5 + 6 + 7
20 = 0 + 1 + 2 + 3 - 4 + 5 + 6 + 7
28 = 0 + 1 + 2 + 3 + 4 + 5 + 6 + 7 
```

~~32 种可能的组合中的所有其余部分似乎要么是已经在树上更高的正数，要么是来自镜像左子树的负数。~~

所以我会进行广度优先搜索，直到找到我要找的号码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T19:57:19.287

问题如下：

`k`找到满足 $k(k+1)/2 = a + b$的第一个正自然数之和的最小值`k`，其中 $n = a - b$。

我们有一个方程组：

*   `k(k+1)/2 = a + b`
*   `n = a - b`
*   `a, b, k`是正整数

有三个未知数，只有两个方程。我们可以结合得到一个目标方程来满足：

*   k(k+1) + 2n = 4a

我们需要找到最小的正数`k`，使得这个解决方案可以满足给定的整数`n`，假设它`a`必须是某个正整数。让我们注意一些事情：

1.  如果`n`是偶数，则要么 要么`k`必须`k+1`能被 4 整除；即，`k = 0 or 3 mod 4`。
2.  如果`n`是奇数，则既不能被 4 整除，也不能被 4 整除`k`；`k+1`即，`k = 1 or 2 mod 4`。

这处理了关于所有数字都是整数的部分。为了处理关于`k`和`a`积极的部分，我们需要规定

*   `k >= floor(sqrt(2n))`

呸。现在，举个例子：

假设 n = 7。那么我们既不知道也`k`不可`k+1`被 4 整除。类似地，我们知道`k >= 4`。我们可以立即跳过`k = 4`，因为我们知道`k`不能被 4 整除。我们可以尝试`k = 5`；我们进入我们的系统：

```
n = 7
k = 5
a = 11
b = 4 
```

这些数字都有效，所以我们有一个有效的解决方案。我们以这样一种方式选择解决方案，即我们必须首先找到最小的解决方案`k`。如果你愿意，你甚至可以重建 Jack 使用的跳跃顺序。在这种情况下，这很简单：杰克向右跳 11 次，向左跳 4 次。向左跳 4 的唯一方法是向左跳 1 和向左跳 3。所以杰克跳如下：

```
----------J------N---
---------J-------N--- -1
-----------J-----N--- +2
--------J--------N--- -3
------------J----N--- +4
-----------------J--- +5 
```

但是，对于您的问题，一旦找到`k`可行的方法，您就完成了。`k`在找到一个有效的值之前，您不需要尝试许多值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-24T00:39:40.730

我们正在寻找所需的 j 数量，以便从 1 到 j 的总和大于目标数并且具有相同的奇偶性。

这是 python 2.7 中的一个简单的工作代码：

```
def numberOfJumps(n):
    n = abs(n)
    j = 0
    while True:
        s = j*(j+1)/2
        if s >= n and not (s - n)%2:
            break
        j += 1
    return j

for i in range(10):
    print i, numberOfJumps(i) 
```

问题可以简化为正数，只是因为 -n 和 n 需要相同数量的跳转。对于序列中的每个数字，我们只需要朝相反的方向跳跃即可。

然后，为了达到 n，我们必须确保只有正跳跃的总和达到 n 或更多。

我们还必须使和的奇偶性与目标数相同，因为在负方向上跳跃会在和上产生偶数差异，因此不会改变其奇偶性。

假设您跳 1+2+3+4+5 = 15，将序列中的任何数字组合反转都会产生一个奇数，因此差是偶数。

# jquery - 仅在 1 div 中拖动

> ID：15406955
> 
> 赞同：0
> 
> 时间：2013-03-14T10:40:54.993
> 
> 标签：jquery, html

我有 2 个 div，1 个带有图像列表，1 个带有 div 板。使用以下方法使图像可拖动：

```
 $('.image').draggable({ opacity: 0.9}).resizable(); 
```

div 板在左侧（固定宽度 80%） 图片在右侧（固定宽度 20%）

我想这样做，所以如果我将图像放在 div 板中，它会进入 div 板。并且不维护 div 图像。如果它在 div 板中，则只能将其拖入板中，而不能返回到图像。

我试过

```
$('#board').droppable(); 
```

和

```
$( "#board" ).droppable({accept: "#draggable}); 
```

我已经阅读了不同的页面，但我无法让它工作

编辑：我有一个打印 div 板内容的按钮，所以它必须在 div 中！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:44:56.440

像这样试试

```
$( "#droppable" ).droppable({
  drop: function( event, ui ) {
    $( this )
      .addClass( "ui-state-highlight" )
      .find( "#draggable" );
  }
}); 
```

或者你可以这样尝试

```
$('#droppable').droppable({ drop: Drop });

 function Drop(event, ui) {
     var draggableId = ui.draggable.attr("id");
     var droppableId = $(this).attr("id");
 } 
```

# asp.net-mvc - 为什么我的 ASP.NET MVC 应用程序试图导航到 login.aspx？

> ID：15406956
> 
> 赞同：6
> 
> 时间：2013-03-14T10:40:58.143
> 
> 标签：asp.net-mvc, asp.net-mvc-4, iis-7

我有一个非常简单的“Hello World”级应用程序，它是在 ASP.NET MVC 4 / Razor 中构建的。它在调试模式下工作正常。没有认证；它直接进入主页/索引。

现在我将它发布到 IIS。但是当我通过 IIS 查看它时，由于某种原因它试图加载一个“login.aspx”表单。我没有定义任何这样的表单，不在 web.config 中，也没有在系统的其他任何地方定义。而且无论我在 URL 中输入什么路径，它总是重定向到不存在的 login.apsx。

为什么？我如何解决它？

**编辑：**根据评论者的要求，这是我的 Web.config：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <sectionGroup name="dotNetOpenAuth" type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection, DotNetOpenAuth.Core">
      <section name="messaging" type="DotNetOpenAuth.Configuration.MessagingElement, DotNetOpenAuth.Core" requirePermission="false" allowLocation="true" />
      <section name="reporting" type="DotNetOpenAuth.Configuration.ReportingElement, DotNetOpenAuth.Core" requirePermission="false" allowLocation="true" />
      <section name="openid" type="DotNetOpenAuth.Configuration.OpenIdElement, DotNetOpenAuth.OpenId" requirePermission="false" allowLocation="true" />
      <section name="oauth" type="DotNetOpenAuth.Configuration.OAuthElement, DotNetOpenAuth.OAuth" requirePermission="false" allowLocation="true" />
    </sectionGroup>
  </configSections>
  <connectionStrings>
    <add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-AdminBackdoor-20130314103822;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-AdminBackdoor-20130314103822.mdf" providerName="System.Data.SqlClient" />
    <add name="MyProjectEntities" connectionString="metadata=res://*/MyProjectEntities.csdl|res://*/MyProjectEntities.ssdl|res://*/MyProjectEntities.msl;provider=System.Data.SqlClient;provider connection string='data source=localhost;initial catalog=MyProject;Integrated Security=True; ;MultipleActiveResultSets=True;App=EntityFramework'" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
    <authentication mode="None">
      <!--<forms loginUrl="~/Account/Login" timeout="2880" />-->
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-1.3.0.0" newVersion="1.3.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.AspNet" publicKeyToken="2780ccd10d57b246" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.2.0.0" newVersion="4.2.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="DotNetOpenAuth.Core" publicKeyToken="2780ccd10d57b246" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.2.0.0" newVersion="4.2.0.0" />
      </dependentAssembly>
    </assemblyBinding>
    <legacyHMACWarning enabled="0" />
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
  <system.net>
    <defaultProxy enabled="true" />
    <settings>
      <!-- This setting causes .NET to check certificate revocation lists (CRL) 
                 before trusting HTTPS certificates.  But this setting tends to not 
                 be allowed in shared hosting environments. -->
      <!--<servicePointManager checkCertificateRevocationList="true"/>-->
    </settings>
  </system.net>
  <dotNetOpenAuth>
    <messaging>
      <untrustedWebRequest>
        <whitelistHosts>
          <!-- Uncomment to enable communication with localhost (should generally not activate in production!) -->
          <!--<add name="localhost" />-->
        </whitelistHosts>
      </untrustedWebRequest>
    </messaging>
    <!-- Allow DotNetOpenAuth to publish usage statistics to library authors to improve the library. -->
    <reporting enabled="true" />
    <openid>
      <relyingParty>
        <security requireSsl="false">
          <!-- Uncomment the trustedProviders tag if your relying party should only accept positive assertions from a closed set of OpenID Providers. -->
          <!--<trustedProviders rejectAssertionsFromUntrustedProviders="true">
                        <add endpoint="https://www.google.com/accounts/o8/ud" />
                    </trustedProviders>-->
        </security>
        <behaviors>
          <!-- The following OPTIONAL behavior allows RPs to use SREG only, but be compatible
                         with OPs that use Attribute Exchange (in various formats). -->
          <add type="DotNetOpenAuth.OpenId.RelyingParty.Behaviors.AXFetchAsSregTransform, DotNetOpenAuth.OpenId.RelyingParty" />
        </behaviors>
      </relyingParty>
    </openid>
  </dotNetOpenAuth>
  <uri>
    <!-- The uri section is necessary to turn on .NET 3.5 support for IDN (international domain names),
             which is necessary for OpenID urls with unicode characters in the domain/host name.
             It is also required to put the Uri class into RFC 3986 escaping mode, which OpenID and OAuth require. -->
    <idn enabled="All" />
    <iriParsing enabled="true" />
  </uri>
</configuration> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-24T22:14:34.463

如果其他人遇到这个问题，那么还有另一个潜在的解决方案，如[另一个 SO question](https://stackoverflow.com/questions/10285186/acs-installed-but-mvc-4-0-app-still-redirects-and-fails-to-find-login-aspx)中所述。从 bin 目录中删除 WebMatrix DLL。

如果您使用 VS 2010 中的“添加可部署依赖项”，则可能会出现此问题。这包括 WebMatrix 的东西，这反过来会在某些情况下破坏您的身份验证。在这种情况下，请从 _bin_deployableAssemblies 目录中删除 WebMatrix，这反过来又会在您构建或部署时将其保留在 bin 之外。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T12:24:33.807

哦，恐惧和耻辱。在“授权规则”下的 IIS 中允许“匿名用户”......但在“身份验证”下禁用了“匿名身份验证”。

为了将来可能从中受益的程序员，我会克服我的尴尬并且不会删除这个问题......

# c# - 访问 Win32_OperatingSystem 的属性

> ID：15406957
> 
> 赞同：2
> 
> 时间：2013-03-14T10:41:01.153
> 
> 标签：c#, .net, winforms, wmi

我正在尝试使用存储在 Win32_OperatingSystem 的属性中的值在 Windows 窗体中填充一些文本框。我正在使用Windows 7。

以下是我正在使用的代码

```
 ArrayList prName = new ArrayList();
        ArrayList prValue = new ArrayList();
        int i = 0;
        ManagementClass msClassOS = new ManagementClass("Win32_OperatingSystem");
        msClassOS.Options.UseAmendedQualifiers = true;
        PropertyDataCollection properties = msClassOS.Properties;
        foreach (PropertyData property in properties)
        {
            prName.Add(property.Name);
        }

        foreach (PropertyData property in properties)
        {
            prValue.Add(new string[] { msClassOS.GetPropertyValue("Value").ToString() });
         } 
```

以下是我得到的例外 -

```
System.Management.ManagementException: Not found 
at System.Management.ManagementException.ThrowWithExtendedInfo(ManagementStatus errorCode)
at System.Management.PropertyData.RefreshPropertyInfo()
at System.Management.PropertyDataCollection.get_Item(String propertyName)
at System.Management.ManagementBaseObject.GetPropertyValue(String propertyName)
at NetworkMonitoringSoftware.Form1.tabControl1_Selected(Object sender, TabControlEventArgs e) in C:\Users\OWNER\Documents\Visual Studio 2010\Projects\NetworkMonitoringSoftware\NetworkMonitoringSoftware\Form1.cs:line 
```

你能告诉我例外是什么以及我如何克服它吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T11:36:28.110

你可以试试下面的代码：

```
using System;
using System.Management;
namespace WMISample
{
    public class MyWMIQuery
    {
        public static void Main()
        {             
            try
            {
                ManagementClass osClass = new ManagementClass("Win32_OperatingSystem");
                foreach (ManagementObject queryObj in osClass.GetInstances())
                {
                    foreach (PropertyData prop in queryObj.Properties)
                    {
                        //add these to your arraylist or dictionary 
                      Console.WriteLine("{0}: {1}", prop.Name, prop.Value);
                    }                    
                }
            }
            catch (ManagementException e)
            {
                //MessageBox.Show("An error occurred while querying for WMI data: " + e.Message);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T11:09:06.263

您不使用*属性*在 foreach*循环*中获取*值*。请记住，*property.Value*可以为空。*property.Value*是一个可以是字符串或数组的对象。这是我制作的代码摘录，可以帮助您：

 ***```
mo  //ManagementObject
    .Properties
    .OfType<PropertyData>()
    .ToList()
    .ForEach(p =>
    {
        String str = String.Empty;
        if (p.Value != null)
             if (p.Value.GetType().BaseType == typeof(Array)) // Value is a array, special string creation
             {
                 Array list = (p.Value as Array);
                 foreach (object o in list)
                      str += o.ToString() + "-";
                 if (list.Length > 0)
                      str = str.Substring(0, str.Length - 1);
             }
             else // value is already a string
                 str = p.Value.ToString();

         this.ListDuet
             .Add(new Duet()
             {
                 Key = Convert.ToString(p.Name),
                 Value = str
             });
     }); 
```

Duet 是我为轻松管理数据而设计的一个类。***

# jquery - 根据 JSON 数组中的匹配值隐藏/显示 HTML 选择选项

> ID：15406960
> 
> 赞同：1
> 
> 时间：2013-03-14T10:41:21.170
> 
> 标签：jquery, html, json

我有一个`<select?`包含各种`<option>`元素的元素。上面有一个文本输入，它通过 Ajax 向 PHP 脚本提交数据，并根据 MySQL 查询的结果返回一个 JSON 数组。数据库查询的结果对应于`<select>`选项的值。

我想要做的只是显示`<option>`可以在 JSON 数组中找到其值的元素。以下是我迄今为止一直在使用的代码。我一直在尝试不同的方法来让它发挥作用，但很难弄清楚。

任何人都可以帮忙吗？

编码：

**jQuery（到目前为止）**

```
 var uploadname;
  $('.modpick').hide();

  $("#uploadname").focus(function(){
   uploadname = $(this).val();
   $.ajax({
            url: "uploadnames.php",
            type: "POST",
            data: {uploadname: uploadname},
                   dataType: 'json',
            success: function(data){
                     //Here is where I want to put the code to show the relevant <option> elements
                     console.log(data);
            }
           });
        }); 
```

**的HTML**

```
<select id="uploadmoduleselect">
         <option value="choose" class="choosemod">Select Module</option>
         <option value="401" id="m401" class="modpick">4.01 Introduction to Facilities Management</option>
         <option value="402" id="m402" class="modpick">4.02 CSR &amp; Sustainability in FM</option>
         <option value="403" id="m403" class="modpick">4.03 Customer &amp; Stakeholder Relations in FM</option>
         <option value="404" id="m404" class="modpick">4.04 FM Specification &amp; Procurement</option>
         <option value="405" id="m405" class="modpick">4.05 Health &amp; Safety Responsibilities</option>
         <option value="406" id="m406" class="modpick">4.06 Project Management within FM Operations</option>
         <option value="407" id="m407" class="modpick">4.07 FM Budget Management</option>
         <option value="409" id="m409" class="modpick">4.09 FM within the context of an organisation</option>
         <option value="411" id="m411" class="modpick">4.11 Building Maintenance in FM</option>
         <option value="413" id="m413" class="modpick">4.13 Distaster Recovery &amp; Contingency Plans</option>
</select> 
```

**`console.log(data)`返回这个（“模块”来自 PHP 脚本）：**

```
Object {modules: Array[3]}
modules: Array[3]
0: "401"
1: "402"
2: "409"
length: 3 
```

**我正在寻找的结果（注意“选项值”对应于 JSON 数组）：**

```
 <select id="uploadmoduleselect">
  <option value="choose" class="choosemod">Select Module</option>
  <option value="401" id="m401" class="modpick">4.01 Introduction to Facilities Management</option>
  <option value="402" id="m402" class="modpick">4.02 CSR &amp; Sustainability in FM</option>
  <option value="409" id="m409" class="modpick">4.09 FM within the context of an organisation</option>
 </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:49:21.713

尝试这个..

```
 success: function(data){
             $('#uploadmoduleselect > option').hide();
             $.each(data.modules,function(i,v){
                  $('#uploadmoduleselect > option[value="'+ v+'"]').show();
             });
        } 
```

[在这里摆弄](http://jsfiddle.net/Xwyp9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:57:02.037

怎么样（未测试）

```
var list = {
         "m401":"4.01 Introduction to Facilities Management",
         "m402":"4.02 CSR &amp; Sustainability in FM",
         "m403":"4.03 Customer &amp; Stakeholder Relations in FM",
         "m404":"4.04 FM Specification &amp; Procurement",
         "m405":"4.05 Health &amp; Safety Responsibilities",
         "m406":"4.06 Project Management within FM Operations",
         "m407":"4.07 FM Budget Management",
         "m409":"4.09 FM within the context of an organisation",
         "m411":"4.11 Building Maintenance in FM",
         "m413":"4.13 Distaster Recovery &amp; Contingency Plans",
}
modules = ["401","402""409"]
$("#selectDiv").empty();
var sel = $("<select/>',{id:"uploadmoduleselect"});
sel.append($('<option/>',{class:"choosemod"}).html("Select Module"));
$.each(modules,function(i, mod) {
    sel.append($('<option/>',{class:"modpick",value:mod}).html(list["m"+mod]);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T10:47:54.123

你需要的是：

```
var modules = ["401", "402", "409"];
$().ready(function () {    
    $("#uploadmoduleselect option").hide();
    modules.forEach(function (item) {
        $("#uploadmoduleselect option[value='" + item +"']").show();
    });
}); 
```

这是[JSFiddle](http://jsfiddle.net/WAzFb/)

# iphone - 如何实现“What's the Pic”iPhone 应用程序，如砖块动画？

> ID：15406961
> 
> 赞同：0
> 
> 时间：2013-03-14T10:41:22.230
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我想知道谁来实现落块动画，他们在 What Pic 应用程序中的方式 [https://itunes.apple.com/au/app/whats-pic-guess-word-hiding/id600716806?mt=8](https://itunes.apple.com/au/app/whats-pic-guess-word-hiding/id600716806?mt=8)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:38:58.010

如果你的意思是动画，当块落下并旋转时，你可以使用这样的[变换](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/transform)属性`UIView`：

```
CGAffineTransform transform = CGAffineTransformMakeTranslation(0, 200);
transform = CGAffineTransformRotate(transform, 20);
[UIView animateWithDuration:10
             animations:^{
                 view.transform = transform;
             }]; 
```

如果你想拥有完全相同的动画，你可以使用[animateWithDuration:delay:options:animations:completion:](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3adelay%3aoptions%3aanimations%3acompletion%3a)为你的动画添加一些选项

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-30T09:51:45.803

..or you can save your effort altogether and get a ready-made starter kit from others who did the same thing such as yourself

[http://www.sellmyapplication.com/source-code/whats-the-pic-starter-kit/](http://www.sellmyapplication.com/source-code/whats-the-pic-starter-kit/)

# sql - Oracle 游标没有从 SELECT 语句中填充？

> ID：15406966
> 
> 赞同：0
> 
> 时间：2013-03-14T10:41:36.900
> 
> 标签：sql, oracle, stored-procedures

我一直在编写一个存储过程来从表中选择一堆 ID，将结果集保存到游标中，然后遍历游标，根据游标中关注的任何 ID 更新表中的行。计划添加更多的条件语句，但到目前为止..

```
CREATE OR REPLACE PROCEDURE CHANGE_PESONAL_DETAILS
AS

CURSOR
person_cur
IS

select b.id
    from blah1 b
        inner join blah2 b2 on b.id = b2.fkid;
person_rec person_cur%ROWTYPE;

BEGIN
FOR person_rec in person_cur

LOOP

dbms_output.put_line
(
person_rec.id
);

UPDATE blah1 set Details = DetailsLineOne || ' ' || DetailsLineTwo WHERE id = person_rec.id;

END LOOP;
COMMIT;

END; 
```

我在这里编译得很好，但在执行时，更新永远不会发生。我已在输出行中添加以查看光标中的内容，但没有打印任何内容。

我的用于填充光标的 Select 语句本身运行良好，返回了我期望它返回的所有数据，尽管在上面执行时，什么也没有。好像 Begin 之后的所有内容都没有执行，尽管我不明白为什么如前所述，我的 Select 会自行返回结果。

也许在填充游标的情况下，某些行为会有所不同？任何建议都会很棒..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:52:00.700

请检查没有光标和循环的过程。

```
CREATE OR REPLACE PROCEDURE CHANGE_PESONAL_DETAILS
AS
BEGIN
UPDATE blah1 set Details = DetailsLineOne || ' ' || DetailsLineTwo WHERE id IN (select b.id
    from blah1 b inner join blah2 b2 on b.id = b2.fkid);
END; 
```

使用循环检查

```
CREATE OR REPLACE PROCEDURE CHANGE_PESONAL_DETAILS
AS
CURSOR person_cur IS
  select b.id
    from blah1 b
        inner join blah2 b2 on b.id = b2.fkid;

  person_rec person_cur%ROWTYPE;
BEGIN
    OPEN person_cur;
    LOOP
      FETCH person_cur INTO person_rec;
      EXIT WHEN person_cur%NOTFOUND;

      UPDATE blah1 set Details = DetailsLineOne || ' ' || DetailsLineTwo WHERE id = person_rec.id;
    END LOOP;
    CLOSE person_cur;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:49:35.010

如果我们在变量中使用`rowtype`游标，我们不能声明一个游标，用于访问游标中的列。`for loop``for loop`

因此，删除`rowtype`声明并尝试类似，此外`SET SERVEROUT ON`在执行过程之前包含命令以查看结果（可打印的语句）

```
CREATE OR REPLACE PROCEDURE CHANGE_PESONAL_DETAILS
AS

CURSOR person_cur IS
     select b.id from blah1 b inner join blah2 b2 on b.id = b2.fkid;
BEGIN
     FOR person_rec in person_cur LOOP
          dbms_output.put_line(person_rec.id);
          UPDATE blah1 set Details = DetailsLineOne || ' ' || DetailsLineTwo WHERE id = person_rec.id;
     END LOOP;
     COMMIT;
END; 
```

# php - 为我的程序制定条件

> ID：15406968
> 
> 赞同：0
> 
> 时间：2013-03-14T10:41:40.743
> 
> 标签：php

我需要一些关于我正在为老虎机风格游戏制作的程序/脚本的帮助，想法是随机生成 3 个数字，每个数字对应于您可以赢得的奖品，奖品数量有限，所以必须检查每个代码（将作为奖品发送）以确保它有库存，如果它没有库存，则不会添加到抽奖中。

到目前为止，我有我的脚本检查代码是否有库存，如果有，它会将数字添加到数组中，然后我将通过开关和大小写进行检查

但我不知道如何设置开关和外壳，我想在“锅”中添加一个设定的数字，然后将其与 3 个随机生成的数字一起使用

```
$number1 = rand(0,$pot); 
```

但是这样做我将不得不设置一个语句，我将检查每个数字以及它是否在某个范围内，即

```
if (($number1 > 150) && ($number1 < 349)){
// You win this prize
}
else if (($number 1 > 350) && ($number1 < 499)){
// You win this prize
}
else {
//You win this prize
} 
```

但显然，这种方法只有在所有代码都有库存的情况下才有效，因为如果没有，我会发放我没有的奖品

```
function generate_numbers(){
global $numbers;
$numbers = array(
    '0' => rand(1,4),
    '1' => rand(1,4),
    '2' => rand(1,4)
);
display_numbers();
} 
```

这会生成当前的数字，但仅适用于 4 个变量，因此代码 a = 1 的值 代码 b = 2 的值等

```
//SETUP VARIABLES
$num1; $num2; $num3;
//SET VARIABLE VALUES
function setup_variables(){
global $num1, $num2, $num3, $numbers;
    $num1 = $numbers[0];
    $num2 = $numbers[1];
    $num3 = $numbers[2];
    result();
} 
```

这会将数组转换为单个变量，它可能不是建议的方法，但如果需要我可以更改它

```
function result(){
global $num1, $num2, $num3;
    if ($num1 == $num2 && $num1 == $num3){
        if ($num1 == 1){
            $_SESSION['prize'] = 1;
            header("Location: win.php");
        }
        else if ($num1 == 2){
            $_SESSION['prize'] = 2;
            header("Location: win.php");
        }
        else if ($num1 == 3){
            $_SESSION['prize'] = 3;
            header("Location: win.php");
        }
        else{
            $_SESSION['prize'] = 0;
        }
    }

    else{
        $_SESSION['prize'] = 0;
    }
} 
```

这将检查号码是否匹配，如果匹配，则检查 $num1 是哪个号码，并将其传递给可以使用的奖品`$_SESSION['prize']`

但正如您所看到的，它适用于单个数字

在下一页上，它只是根据通过 $_SESSION['prize'] 提供的数据查询数据库，该数据等于数据库中的 ItemID，并在屏幕上显示代码 + 通过电子邮件将其发送给获胜者

TLDR：

基本上我想要一种基于代码是否可用（布尔数据库值）来显示书面代码的方法我不想显示不可用的代码，因此它们应该完全从脚本中排除，每个代码应该有不同的获胜的机会，更有价值的代码出现的机会较低，价值较低的代码出现的机会更高。

基本上这是 Slots 的 php 版本，但插槽基于当前库存

# r - 添加表格（对齐的文本块）以在 R 中绘图

> ID：15406969
> 
> 赞同：12
> 
> 时间：2013-03-14T10:41:40.810
> 
> 标签：r, plot, legend

我想在**R**中的绘图中添加一个小表格（例如作为图例） 。我想到了类似的东西：

```
t <- wantedTableMethod(
  row("param1", "param2", "param3", "param4")
  , row(value11, value12, value13, cell(value14, adj=0))
  , row(value21, value22, value23, value24)
  , row(value31, value32, value33, cell(value34, adj=1))
  border = F
)
plot(1,1)
legend("topleft", t) 
```

列的所有值都应具有相同的偏移量。**在R**中是否有可能发生这样的事情，还是我需要手动对齐每个值？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T11:22:14.413

该`plotrix`包有一个`addtable2plot`功能，您可以传递`data.frame`或传递`matrix`给

使用帮助页面中的示例

```
library(plotrix)
testdf<-data.frame(Before=c(10,7,5,9),During=c(8,6,2,5),After=c(5,3,4,3))
 rownames(testdf)<-c("Red","Green","Blue","Lightblue")
 barp(testdf,main="Test addtable2plot",ylab="Value",
  names.arg=colnames(testdf),col=2:5)
 # show most of the options
 addtable2plot(0.7 ,8,testdf,bty="o",display.rownames=TRUE,hlines=TRUE,
  vlines=TRUE,title="The table") 
```

![在此处输入图像描述](../Images/4a73bb189f55d9f1cc908d0cbdd9e616.png)

它的设计目的是尽可能地相似`legend`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-04-22T03:49:57.150

如果你真的不喜欢外部包，你也可以在`base`R 中完成这个版本：

```
plot(1, 1)
v = 1:9
legend(
  'topright', ncol = 4L, title = 'Table',
  legend = c(
    '', 'Row1', 'Row2', 'Row3',
    'Col1', v[1:3], 
    'Col2', v[4:6], 
    'Col3', v[7:9]
  )
) 
```

[![显示一个简单绘图有一个图例表的输出。 传说的标题是](../Images/b9460043787803345853ab72885e1716.png)](https://i.stack.imgur.com/37Ok4.png)

*警告编码器*，由于`v`将被强制转换为`character`，因此您必须小心浮点格式（`sprintf`是您的朋友）。`text.col`如果您愿意，还有其他一些花里胡哨的东西可以帮助您增加情节。

# php - 仅使用 .htaccess 解析第一个变量 $ _GET

> ID：15406971
> 
> 赞同：0
> 
> 时间：2013-03-14T10:41:45.383
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

搜索者的网址是：

```
http://www.domain.com/index.php?category=search&customsearch=true&group=2&ref=&guests=1&rooms=1&city=6265&arrival=1363215600000&departure=1363474800000 
```

但是，我需要将页面翻译成其他语言，并同意 url 中的“lang”参数。

```
..://www.domain.com/index.php?category=search&customsearch=true&group=2&ref=&guests=1&rooms=1&city=6265&arrival=1363215600000&departure=1363474800000**&lang=it** 
```

我希望我可以调用此表单的 url：

```
..://www.domain.com/**it**/index.php?category=search&customsearch=true&group=2&ref=&guests=1&rooms=1&city=6265&arrival=1363215600000&departure=1363474800000 
```

...并且参数不会丢失。

可以帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:01:03.863

试试这个

```
RewriteEngine on
RewriteRule ^index.php?category=(.+)&customsearch=(.+)&group=(.+)&.......&lang=(.+)?$ http://www.domain.com/(LAST $ VALUE)/index.php?category=$1&customsearch=$2&group=$3&.......... 
```

类似这样，lang 的最后一个索引号将放在 ( `LAST $ VALUE`)

# wpf - 加载Window WPF之前的白屏

> ID：15406975
> 
> 赞同：1
> 
> 时间：2013-03-14T10:41:55.880
> 
> 标签：wpf

为什么当我尝试从一个窗口加载其他窗口时会出现**白屏**

```
window.show() 
```

方法。是**WPF**的固有属性还是有办法让烦人的**白色闪光**消失？

**更多信息**

在 window_loaded 我有一些计算要做，但即使在计算之后

**BackgroundWorker**和“ **ExtendedWPF 工具包**中的忙碌指示器”也无济于事，因为只有在加载所有 UI 并且白屏问题仍然存在后才会显示忙碌指示器？

微软不应该在加载之前不显示白屏吗？

# maven - Javascript Web 应用程序和 Java 服务器，全部在 Maven 中构建或使用 Grunt for Web 应用程序？

> ID：15406977
> 
> 赞同：97
> 
> 时间：2013-03-14T10:42:01.847
> 
> 标签：maven, build, angularjs, build-automation, gruntjs

我们正在使用 AngularJS 做一个 Web 应用程序，我们喜欢使用 Bower 进行依赖管理和使用 Grunt 来构建、运行测试等的想法。（[Yeoman](http://yeoman.io/)）

服务器是使用 Maven 用 Ja​​va 完成的，所以我们当然想要一个简单的`mvn install`构建一切（Web 应用程序 + 服务器）

那么你采取了什么方法，为什么？

1）将它们视为两个不同的应用程序，实际上它们是。所以使用不同的构建方法/工具是可以接受的。

2) 忘记 Grunt Bower，使用 Maven 插件来构建、运行测试、管理 Web 应用程序的依赖项。如果是这样，是哪些？

3）使用Maven exec插件调用Grunt构建前端webapp。我认为这更像是一种技巧，而不是一种解决方案。

4) 其他。

更容易与 Jenkins 集成的方法是一个优点。

提前致谢！

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-04-12T06:44:40.463

在使用 Java 工具包中的每个资产管道工具一段时间后，我得出了一些结论：

### 基于 Java 的工具

那里有一些工具，但最受欢迎的是 JAWR 和 Wro4J。这两者最大的问题是它们大多是基于[Rhino](https://developer.mozilla.org/en-US/docs/Rhino)的（WRO4J 现在有一些 Node 支持），与基于 Node 的工具相比，Rhino 的速度很慢。您还必须考虑到 JavaScript 工具正在迅速成熟，因此您应该寻找可以快速移动的工具。

*   [WRO4J](https://github.com/wro4j/wro4j) - 支持很棒，Maven 和 Eclipse 集成很棒，插件列表很广泛，而且框架足够灵活，你可以用一些肘部油脂编写一个插件来满足你的任何需要。如果您仅限于基于 Java 的资产管道，那么这肯定是要走的路。Wro4j 的问题在于它相对于基于 Node 的工具来说很慢（即使它启动了 Node 进程）。
    为了给出一些真实世界的数字，编译和连接 25 个包含 LESS、CSS CoffeeScript 和 JavaScript 的资产包在使用 Rhino 时大约需要 35 秒，而在 2013 年具有 16G RAM 的 iMac 上使用 Wro4j 的 Node 支持大约需要 15 秒。在我的 MacBook Air 上使用[Grunt](http://gruntjs.com/) +Node 大约需要 2 秒。

*   [JAWR](http://jawr.java.net/) - 集成和功能列表非常好，但文档不是很好，编写自己的插件可能有点棘手。当我最初写这篇文章时，JAWR 处于 4 年的中断期，但截至 2014 年 1 月，它现在正处于积极开发中。如果您选择研究 Java 工具，那么这值得研究。

### 基于节点的工具（与 Ant/Maven 构建集成）

*   [Grunt](http://gruntjs.com/) - 很简单，有一个很棒的插件生态系统，社区很大。如果你需要做一些事情，你可以打赌它有一个插件——甚至可能是由 grunt 的创建者编写的。Grunt 的主要批评是它是配置驱动的，这使得设置非常容易，但不是“节点方式”。还值得一提的是，Grunt 任务不容易组合，因此对于复杂的 JavaScript 构建管道，Grunt 可能并不理想。

*   [Gulp](http://gulpjs.com/) - Gulp 是 Grunt 的快速增长替代品。默认情况下它是并发的，并使用流来避免临时写入文件系统，这可以大大加快您的构建速度。Gulp 非常惯用并且强调代码 > 配置，虽然这给了你很大的力量，但对于没有 JavaScript 核心能力的团队来说并不理想。

基于 JavaScript 的工具的唯一潜在问题是，您必须在任何需要进行编译的机器上安装[Node](http://nodejs.org/)、[npm](https://npmjs.org/)和[grunt-cli](https://npmjs.org/package/grunt-cli) / [gulp 。](https://www.npmjs.org/package/gulp)如果您无权访问您的 CI 机器或不使用基于工件的部署，这可能很难卖。

将它集成到您​​的 Maven 项目中非常容易，并且您有很多选择。您可以使用 Maven [ant-run 插件](https://gist.github.com/nadavdav/5308453)，您可以运行[ant exec 任务](http://ant.apache.org/manual/Tasks/exec.html)并从 Maven 调用它，或者最重要的是您可以使用[maven exec 任务](http://mojo.codehaus.org/exec-maven-plugin/usage.html)。
如果这对任何人有帮助，下面是使用 exec 插件将其集成到 Maven 生命周期中的代码。

```
 <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>exec-maven-plugin</artifactId>
      <version>1.2.1</version>
      <executions>
        <execution>
          <phase>prepare-package</phase>
          <goals>
            <goal>exec</goal>
          </goals>
        </execution>
      </executions>
      <configuration>
        <executable>grunt</executable>
      </configuration>
    </plugin> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-08-23T18:11:08.713

对于仍在寻找有关此主题的更多信息的任何人，Yeoman 的创建者之一有一篇很好的文章（在最初提出这个问题几个月后写），它以更详细的方式扩展了原始答案：

*   [让 Maven 咕噜咕噜](http://addyosmani.com/blog/making-maven-grunt/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-10-27T21:16:28.357

然后还有前端 maven 插件：[https](https://stackoverflow.com/a/19600777/320399) ://stackoverflow.com/a/19600777/320399 它为您下载 Node 和 NPM（本地到您的项目），通过该 NPM 下载 Grunt（由该节点运行）然后运行 Grunt（通过该节点）。它是自引导的，您不需要在机器上安装 Node 来构建项目。只有一个命令；mvn 安装。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-12-02T15:43:34.577

你可能想查看[http://jhipster.github.io/](http://jhipster.github.io/)：它是一个 Yeoman 生成器，它生成一个应用程序，它让 Maven、Grunt 和 Bower 一起工作。

这有点像您的第三个选项，但一切都是为您配置的，这并不容易。它还为您生成基本的 AngularJS 和 Java REST 服务。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-04T07:17:12.373

在花了几个小时解决这个问题后，我可以这样说：

maven 和 grunt 玩的不好，但是可以强制执行。。

这是通过 Maven 构建[运行**Grunt的插件描述**](https://gist.github.com/nadavdav/5308453)

我希望这有帮助 ：）

# web-services - web服务响应json序列化列表 unable to deserialize i'm trying to transfer a list of objects from a server to a client using a web service. The data should be transfered in json format. I'm using jersey for the JAX-RS implementation and gson 问问题 问问题 2013-03-14T10:42:24.790 2910 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. i'm trying to transfer a list of objects from a server to a client using a web service. The data should be transfered in json format. I'm using jersey for the JAX-RS implementation and gson to deserialise the json string on the client side. I kept getting a parse error, even though i was using the recommended practice for list deserilization with gson (see below). I have found out that the json string which i am getting in the response is different than the one which i should receive in order for the gson deserilizer to work. This is the reponse i'm getting from the web service: {"activity":[{"activityName":"c","id":"3"},{"activityName":"c","id":"3"},{"activityName":"c","id":"3"}]} But this is the correct response i should receive in order for the gson to deserialize the string to a List: [{"id":3,"activityName":"c"},{"id":3,"activityName":"c"},{"id":3,"activityName":"c"}] You can see the added header/wrapper "activity" in the begining of the first string. Here is the web service code: @Path("ws") public class IiwsServices { @POST @Path("/listActivities") @Produces(MediaType.APPLICATION_JSON) public List <activity>listActivities() { List <activity>list = new ArrayList<activity>(); Activity act = new Activity(); act.setId(1); act.setActivityName("a"); list.add(act); act.setId(2); act.setActivityName("b"); list.add(act); act.setId(3); act.setActivityName("c"); list.add(act); return list; } This is the client code: public class Main { public static void main(String[] args) { try { Client client = Client.create(); WebResource webResource = client .resource("http://localhost:8080/iiws.ws.test/ws/listActivities"); ClientResponse response = webResource.accept(MediaType.APPLICATION_JSON) .post(ClientResponse.class); if (response.getStatus() != 200) { throw new RuntimeException("Failed : HTTP error code : " + response.getStatus()); } String output = response.getEntity(String.class); System.out.println(output); List <activity>list = new ArrayList<activity>(); Activity act = new Activity(); act.setId(1); act.setActivityName("a"); list.add(act); act.setId(2); act.setActivityName("b"); list.add(act); act.setId(3); act.setActivityName("c"); list.add(act); Gson gson = new GsonBuilder().create(); String jsonString = gson.toJson(list); System.out.println(jsonString); List <activity>list = gson.fromJson(output, new TypeToken<list<activity>>(){}.getType()); // <-- Deserialize exception here for (int i = 0; i < list.size(); i++) { Activity x = list.get(i); System.out.println(x); } } catch (Exception e) { e.printStackTrace(); } } ****OK I believe I have found the answer**** OK finally found solution Here i found a similar question after googling for jersey and jackson : Jersey client can not deserializable json services And this helps as well: JSON POJO support Button line is that if not explicitely defined in the web.xml, jersey+jaxb is used instead of jersey+jackson Replace and extract matches with regex How can I get all matches with for example preg_match_all() and also replace the results with an empty string? I've tried stuff like this: (?:(?>([^*]+))|\*(?!\/))*)\*~', function ($match) { $comments[] = $match[0]; return ''; }, $input); ?> But that doesn't work very well since the $comment variable doesn't seem to be accessable from the anonymous function. I guess I can make global variables, but I really don't want to mess up the namespace like that web-servicesrestgsonjson 4 1 回答 1 This answer is useful 0 从 web 服务器返回的 json 字符串，很明显响应有一个对象，该对象的名称是 activity，它有一个活动数组。 因此，如果您尝试使用此结构来读取响应。 公共类活动{ 私人 int id； 私人字符串活动名称； 公共 int getId() { 返回标识； } 公共无效setId（int id）{ 这个.id = id; } 公共字符串 getActivityName() { 返回活动名称； } 公共无效 setActivityName（字符串活动名称）{ this.activityName = 活动名称； } } 公共类响应{ 私人名单活动； 公共列表 getActivity() { 返回活动； } 公共无效setActivity（列表活动）{ this.activity = 活动； } } 并使用 gson Library 阅读 Gson gson = 新 Gson(); 响应响应 = gson.fromJson(json, Response.class); 于 2013-05-17T12:06:40.397 回答 Related 1 javascript - 如何使用 jQuery 1.5.2 (Drupal7) 获取表 TD-offset()？ 5 c# - 当我尝试访问任务的 Result 属性时，为什么这个异步操作会挂起？ 2 c# - 如何在将 web.response 流保存到文本文件之前对其进行格式化 1 spring - 如何在我的 spring webapp 中从命令行覆盖一个属性 1 asp.net - 在调用成员资格的方法上创建 MSTest 单元测试 - ASP.NET 应用程序 2 ruby-on-rails - 有没有一种 DRY 方法可以将绑定变量传递给 AR 关系？ 1 algorithm - 最佳优先搜索如何受到高原和局部最大值的影响？ 1 vim - Vim：提取文本文档中括号括起来的引用 1 3d - XNA/Monogame，绘制多个剪切/倾斜精灵的最快方法 2 c# - 针对客户不同收费类型的设计模式/架构 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</list<activity></activity></activity></activity></activity></activity></activity>

> ID：15406984
> 
> 赞同：1
> 
> 时间：
> 
> 标签：web-services, rest, gson, json

i'm trying to transfer a list of objects from a server to a client using a web service. The data should be transfered in json format. I'm using jersey for the JAX-RS implementation and gson to deserialise the json string on the client side. I kept getting a parse error, even though i was using the recommended practice for list deserilization with gson (see below). I have found out that the json string which i am getting in the response is different than the one which i should receive in order for the gson deserilizer to work.

This is the reponse i'm getting from the web service:

`{"activity":[{"activityName":"c","id":"3"},{"activityName":"c","id":"3"},{"activityName":"c","id":"3"}]}`

But this is the correct response i should receive in order for the gson to deserialize the string to a List: `[{"id":3,"activityName":"c"},{"id":3,"activityName":"c"},{"id":3,"activityName":"c"}]`

You can see the added header/wrapper "activity" in the begining of the first string.

Here is the web service code:

```
@Path("ws")
public class IiwsServices {

@POST
@Path("/listActivities")
@Produces(MediaType.APPLICATION_JSON)
public List<Activity> listActivities() {

    List<Activity> list = new ArrayList<Activity>();

    Activity act = new Activity();
    act.setId(1);
    act.setActivityName("a");
    list.add(act);

    act.setId(2);
    act.setActivityName("b");
    list.add(act);

    act.setId(3);
    act.setActivityName("c");
    list.add(act);
    return list;
} 
```

This is the client code:

```
public class Main {
public static void main(String[] args) {
    try {

        Client client = Client.create();

        WebResource webResource = client
           .resource("http://localhost:8080/iiws.ws.test/ws/listActivities");

        ClientResponse response = webResource.accept(MediaType.APPLICATION_JSON)
                   .post(ClientResponse.class);

        if (response.getStatus() != 200) {
           throw new RuntimeException("Failed : HTTP error code : "
            + response.getStatus());
        }

        String output = response.getEntity(String.class);

        System.out.println(output);

        List<Activity> list = new ArrayList<Activity>();

        Activity act = new Activity();
        act.setId(1);
        act.setActivityName("a");
        list.add(act);

        act.setId(2);
        act.setActivityName("b");
        list.add(act);

        act.setId(3);
        act.setActivityName("c");
        list.add(act);

        Gson gson = new GsonBuilder().create();
        String jsonString = gson.toJson(list);

        System.out.println(jsonString);

        List<Activity> list = gson.fromJson(output, new   TypeToken<List<Activity>>(){}.getType()); // <-- Deserialize exception here

        for (int i = 0; i < list.size(); i++) {
            Activity x = list.get(i);
            System.out.println(x);
        }

      } catch (Exception e) {

        e.printStackTrace();

      }

} 
```

****OK I believe I have found the answer****

OK finally found solution Here i found a similar question after googling for jersey and jackson : [Jersey client can not deserializable json services](https://stackoverflow.com/questions/13775881/jersey-client-can-not-deserializable-json-services-exceptioncan-not-deseriali)

And this helps as well: [JSON POJO support](http://jersey.java.net/nonav/documentation/latest/json.html)

**Button line is that if not explicitely defined in the web.xml, jersey+jaxb is used instead of jersey+jackson**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T12:06:40.397

从 web 服务器返回的 json 字符串，很明显响应有一个对象，该对象的名称是 activity，它有一个活动数组。

因此，如果您尝试使用此结构来读取响应。

```
    公共类活动{
        私人 int id；
        私人字符串活动名称；
        公共 int getId() {
            返回标识；
        }
        公共无效setId（int id）{
            这个.id = id;
        }
        公共字符串 getActivityName() {
            返回活动名称；
        }
        公共无效 setActivityName（字符串活动名称）{
            this.activityName = 活动名称；
        }
   }

    公共类响应{
        私人名单活动；

        公共列表 getActivity() {
            返回活动；
        }

        公共无效setActivity（列表活动）{
            this.activity = 活动；
        }

    }

```

并使用 gson Library 阅读

```
    Gson gson = 新 Gson();
    响应响应 = gson.fromJson(json, Response.class);

```

# php - 尝试打开 phpmyadmin 时出现错误 403。我该怎么做才能纠正它？

> ID：15406985
> 
> 赞同：0
> 
> 时间：2013-03-14T10:42:24.867
> 
> 标签：php, linux, phpmyadmin, xampp

当我尝试打开`localhost/phpmyadmin/`时，我收到以下错误：

```
Access forbidden!

New XAMPP security concept:

Access to the requested directory is only available from the local network.

This setting can be configured in the file "httpd-xampp.conf".

If you think this is a server error, please contact the webmaster.

Error 403 
```

这是为什么 ？我打开了`httpd-xampp.conf`文件，但我不知道该怎么做。

这是完整的`httpd-xampp.conf`文件：

```
<IfDefine PHP4>
LoadModule php4_module        modules/libphp4.so
</IfDefine>
<IfDefine PHP5>
LoadModule php5_module        modules/libphp5.so
</IfDefine>
# Disabled in XAMPP 1.8.0-beta2 because of current incompatibilities with Apache 2.4
# LoadModule perl_module        modules/mod_perl.so

Alias /phpmyadmin "/opt/lampp/phpmyadmin"
Alias /phpsqliteadmin "/opt/lampp/phpsqliteadmin"

# since XAMPP 1.4.3
<Directory "/opt/lampp/phpmyadmin">
    AllowOverride AuthConfig Limit
    Order allow,deny
    Allow from all
</Directory>

<Directory "/opt/lampp/phpsqliteadmin">
    AllowOverride AuthConfig Limit
    Order allow,deny
    Allow from all
</Directory>

# since LAMPP 1.0RC1
AddType application/x-httpd-php .php .php3 .php4

XBitHack on

# since 0.9.8 we've mod_perl
<IfModule mod_perl.c>
    AddHandler perl-script .pl
    PerlHandler ModPerl::PerlRunPrefork
    PerlOptions +ParseHeaders
    PerlSendHeader On
</IfModule>

# demo for mod_perl responsehandler
#PerlModule Apache::CurrentTime
#<Location /time>
#      SetHandler modperl
#      PerlResponseHandler Apache::CurrentTime
#</Location>

# AcceptMutex sysvsem is default but on some systems we need this
# thanks to jeff ort for this hint
#AcceptMutex flock
#LockFile /opt/lampp/logs/accept.lock

# this makes mod_dbd happy - oswald, 02aug06
# mod_dbd doesn't work in Apache 2.2.3: getting always heaps of "glibc detected *** corrupted double-linked list" on shutdown - oswald, 10sep06
#DBDriver sqlite3

#
# New XAMPP security concept
#
<LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-status|server-info))">
    Order deny,allow
    Deny from all
    Allow from ::1 127.0.0.0/8 \
        fc00::/7 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 \
        fe80::/10 169.254.0.0/16

    ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
</LocationMatch> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T11:11:59.143

看起来这部分是你的问题，你的 IP 地址/IP 范围不能在允许的 IP 列表中

```
# New XAMPP security concept
#
<LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-status|server-info))">
    Order deny,allow
    Deny from all
    # The line below this comment!
    Allow from ::1 127.0.0.0/8 \
        fc00::/7 10.0.0.0/8 172.16.0.0/12 192.168.0.0/16 \
        fe80::/10 169.254.0.0/16

    ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
</LocationMatch> 
```

如果这是一个开发环境，那么以下内容就足够了：

```
# New XAMPP security concept
#
<LocationMatch "^/(?i:(?:xampp|security|licenses|phpmyadmin|webalizer|server-status|server-info))">
    Order deny,allow
    Allow from all

    ErrorDocument 403 /error/XAMPP_FORBIDDEN.html.var
</LocationMatch> 
```

否则，只需将您的 IP 范围添加到允许的部分:)

编辑：我应该把评论中的答案放在这里，这样人们就可以更容易地看到它：

> “好的，请尝试在该部分的 Allow from all 行之后的行中添加 Require allgranted 。”

# mediaelement.js - mediaelement.js 进度消失了

> ID：15406988
> 
> 赞同：0
> 
> 时间：2013-03-14T10:42:34.320
> 
> 标签：mediaelement.js

我刚刚将我的 mediaelement-and-player.min.js、jquery.js 和 flashmediaelement.swf 更新为当前在 github 上的文件，以尝试解决我在 IE9 上遇到的问题。问题确实消失了，但我的进度条和总时间也消失了。当我用 firebug 查看 css 时，我看到：

```
<span class="mejs-time-total" style="width: 0px;"> 
```

为什么这个元素突然宽度为 0？禁用它可以让我恢复我的进度条。但我似乎无法从我的代码中找到能够做到这一点的方法。

# javascript - 表格中的 jQuery 手风琴

> ID：15406992
> 
> 赞同：4
> 
> 时间：2013-03-14T10:42:42.157
> 
> 标签：javascript, jquery, css, twitter-bootstrap, accordion

我有一个表，其行被声明为手风琴，每一行都有自己的子行。所以情况是，如果您单击一行，它将展开并显示其子行内容。如果单击其他行，手风琴将显示当前行的子行并切换其他行。这些工作正常。

我希望如果您单击一行，则该行将变为活动状态，其子行将显示，其他行将折叠，同时所有其他手风琴行的不透明度必须变为 0.33，以便唯一的活动行成为焦点。这是第一次按照需要顺利进行。现在一行是活动的，它的内容被显示出来，而其他的则是模糊的。现在，如果我想单击其他行，我必须对其他行进行悬停效果，以便在悬停时可以看到那些模糊的行（0.33）。所以这也很好用。现在问题从这里开始：如果我单击任何其他行，那么它的子行将变得可见，而其他行将变得模糊，奇怪的是活动行（手风琴）也变得像其他行（模糊）。我的意思是只有手风琴的子行的不透明度为 1，而不是手风琴+子行变得模糊（这是理想的）。

悬停时第一行中第一个单元格的边框顶部还有一个问题。不知道为什么它要应用自己的边框。

我浪费了一整天，但这些仍然让我头疼。

问题仅在第一次迭代后开始。我猜我的 jquery 代码有问题。你可以在这个 jsfiddle 中看到它（我想我写的任何东西都可能不是每个人都清楚：P 所以在这里看到它）[http://jsfiddle.net/alok108/EfeTN/35/](http://jsfiddle.net/alok108/EfeTN/35/)

```
<table class="table list" id="table">
            <thead>
               <tr>
                    <th>A</th>
                    <th>B</th>
                    <th>C</th>
                    <th>D</th>
                    <th>E</th>                    
                </tr>
            </thead>
            <tbody class="">
                <tr class="accordion">
                    <td>1</td>
                    <td>2</td>                 
                    <td>3</td>
                    <td>4</td>
                    <td>5</td>
                </tr>
                <tr class="" style="border-left: 5px solid #000;"> 
                    <td colspan="5">>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque vitae diam vitae nisl euismod posuere ut sit amet lectus. Mauris sit amet pharetra augue. Integer dapibus quam in nisi tempor ac egestas velit sollicitudin. Pellentesque ac diam eros. Morbi at tellus eu ipsum lobortis posuere eu eget erat.</td>
                </tr>
            </tbody>

            <tbody>
                <tr class="accordion">
                    <td>1</td>
                    <td>2</td>                 
                    <td>3</td>
                    <td>4</td>
                    <td>5</td>
                </tr>
                <tr class="" style="border-left: 5px solid #000;"> 
                    <td colspan="5">>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque vitae diam vitae nisl euismod posuere ut sit amet lectus. Mauris sit amet pharetra augue. Integer dapibus quam in nisi tempor ac egestas velit sollicitudin. Pellentesque ac diam eros. Morbi at tellus eu ipsum lobortis posuere eu eget erat.</td>
                </tr>
            </tbody>
            <tbody>
                <tr class="accordion">
                    <td>1</td>
                    <td>2</td>                 
                    <td>3</td>
                    <td>4</td>
                    <td>5</td>
                </tr>
                <tr class="" style="border-left: 5px solid #000;"> 
                    <td colspan="5">>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque vitae diam vitae nisl euismod posuere ut sit amet lectus. Mauris sit amet pharetra augue. Integer dapibus quam in nisi tempor ac egestas velit sollicitudin. Pellentesque ac diam eros. Morbi at tellus eu ipsum lobortis posuere eu eget erat.</td>
                </tr>
            </tbody>

            <tbody>
                <tr class="accordion">
                    <td>1</td>
                    <td>2</td>                 
                    <td>3</td>
                    <td>4</td>
                    <td>5</td>
                </tr>
                <tr class="" style="border-left: 5px solid #000;"> 
                    <td colspan="5">>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque vitae diam vitae nisl euismod posuere ut sit amet lectus. Mauris sit amet pharetra augue. Integer dapibus quam in nisi tempor ac egestas velit sollicitudin. Pellentesque ac diam eros. Morbi at tellus eu ipsum lobortis posuere eu eget erat.</td>
                </tr>
            </tbody>
        </table> 
```

Java脚本：

```
<script>
$(function() {
var $list = $('.list');    
$list.find("tr").not('.accordion').hide();
$list.find("tr").eq(0).show();
$list.find(".accordion").click(function(){ 
    $(this).fadeTo("fast", 1) ;    
    $list.find('.accordion').not(this).siblings().fadeOut(500);
    $(this).siblings().fadeToggle(500);
    $(this).addClass('active');
    $list.find('.accordion').not(this).removeClass('active');
    $list.find('.accordion').not(this).css("opacity", 0.33);
        $list.find('.accordion').not(this).hover(function(){
            $(this).fadeTo("fast", 1);},
            function(){$(this).fadeTo("fast", 0.33);
        });
  });    
});
</script> 
```

CSS：

```
 #table tbody .accordion:hover td:first-child, 
 #applicantTable tbody .accordion.active td:first-child{ 
            border-left:3px solid #000; border-top:none; float:left;  
            overflow: hidden; padding-left: 5px; width:100%;
        }
 #table tbody tr td{
          background-color:#ccc;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:08:29.207

好的，我在 FB 小组中的某个人的帮助下得到了它。

该问题的解决方案是为 .active 包含一个 css 属性，并具有 opacity:1 和 !important。我从不关心！important，今天我要了解它的重要性:)

所以要引入的新 css 行是`.active{ opacity:1!important; }` 并且解决了这个问题。

我虽然对第一个单元格的边界问题一无所知，但这并不严重，因为这只发生在我的 jsfiddle 演示中，而不是实际代码中。

更新和更正的 jsfiddle 链接是[http://jsfiddle.net/alok108/EfeTN/40/](http://jsfiddle.net/alok108/EfeTN/40/)

将结果与上一个结果进行比较，您就会知道“！important”的重要性。

# c# - C# 显示 6 位小数返回错误值

> ID：15406996
> 
> 赞同：2
> 
> 时间：2013-03-14T10:42:50.423
> 
> 标签：c#

C# 控制台应用程序。我有以下代码：

```
next = 758550
next = (double)next / Math.Pow(10, 6);
file.WriteLine(next); 
```

即使我将其指定为双精度，它也不会返回 0.758550，而是返回 0.75855（末尾没有零）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T10:45:00.833

是的，`double`不保留尾随零。它应该是一种关于值大小的类型，而不是精确的十进制数字。

但是，`decimal` *确实*保留尾随零，所以如果你写：

```
decimal next = 758550m;
next = next * 0.000001m;
file.WriteLine(next); 
```

...这会告诉你你想要什么。有趣的是，除以 1000000在这里*不起作用*。我怀疑该算法*类似于*“保留与任一操作数中一样多的微不足道的十进制数字”，但这并不完全清楚。

`double`或者，您可以为您的值指定自定义格式：

```
file.WriteLine(next.ToString("0.000000")); 
```

或者：

```
file.WriteLine("{0:0.000000}", next); 
```

您应该真正确定哪种类型最适合您。根据经验，“人为”价值——尤其是货币——最恰当地表示为`decimal`. “自然”值（例如距离、权重等）最合适地表示为`double`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T10:44:17.010

`0.758550`因为和没有区别`0.75855`，所以最后一个`0`无关紧要。您指定格式以获取最后一个零。

```
string strForDisplay = next.ToString("0.0000000"); 
```

以上将给你最后`0`