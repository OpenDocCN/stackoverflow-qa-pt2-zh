# StackOverflow 问答 14389000-14389999

# jquery - 隐藏的 HTML 元素不会消失

> ID：14389001
> 
> 赞同：3
> 
> 时间：2013-01-17T22:07:04.203
> 
> 标签：jquery, html, css, google-chrome

在我的网站上，我通过将`display`css 属性设置为`none`. 但是在最新版本的谷歌浏览器中它不再工作了（但它在早期版本上工作）。

[您可以通过访问此页面](http://xandaro.com/en/s/p/demo)并单击`Contact`然后单击来复制它`Team`。联系人选项卡仍显示为`display: none`

![图片](../Images/acfbd8310a4068f8ff80532c80e57119.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:40:47.130

这可能是 Chrome 中的一个错误。

您的问题似乎与3 天前打开的[这个](http://code.google.com/p/chromium/issues/detail?id=169779)问题非常相似。`display:none;`不起作用，并且被`display:block;`.

到目前为止，Chromium 团队尚未做出回应，但您可以跟踪该票，以防发布解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:42:06.977

我不是 CSS 专家，但我认为问题源于您在其中浮动`div`标签`.employees`而不是清除它们的事实。

如果我`<div class="clear"></div>`在`div`标签之后添加`div class="employees"`并且`div class="contact-information"`还添加一个`height`属性，`employees`那么它似乎已经解决了。

在 Firefox 中很好（Windows 7 64bit，但对我来说不是 Chrome）。以上为我在 Chrome 中修复了它。

# c++ - 可变大小数组的范围

> ID：14389006
> 
> 赞同：1
> 
> 时间：2013-01-17T22:07:32.657
> 
> 标签：c++, c, gcc

这总是会按预期运行吗？

```
char *x;
if (...) {
    int len = dynamic_function();
    char x2[len];

    sprintf(x2, "hello %s", ...);

    x = x2;
}

printf("%s\n", x);
// prints hello 
```

编译器（在我的例子中是 GCC）如何在 C 和 C++ 中实现可变大小的数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T22:12:23.643

No.在语句的范围内`x2`是本地`if`的，您可以使用指针在它之外访问它。这会导致未定义的行为。

顺便说一句，VLA 在 C11 中是可选的，并且从未成为 C++ 的一部分。所以最好避免它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T22:11:31.093

范围在[这里](http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html)解释：

> 跳出或超出数组名称的范围会释放存储空间。不允许跳入范围；您会收到一条错误消息。

在您的情况下，数组超出范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T22:14:34.567

不，有两个不同的原因：

*C++：*代码不是有效的 C++。C++ 中的数组必须具有编译时常量大小。

*C：*不，因为数组只存在于声明它的块的末尾，因此取消引用`x`是未定义的行为。

从 C11，6.2.4/2 开始：

> 如果对象在其生命周期之外被引用，则行为未定义。

并且 6.2.4/7 说可变长度数组从它的声明到它的封闭范围结束：

> 对于这种具有可变长度数组类型的对象，它的生命周期从对象的声明开始，直到程序的执行离开声明的范围。

# python - Python：列表中的完整字符串与部分字符串的交集

> ID：14389010
> 
> 赞同：4
> 
> 时间：2013-01-17T22:07:42.710
> 
> 标签：python, list, intersection

假设我有一个字符串和一个字符串列表：

```
a = 'ABCDEFG'

b = ['ABC', 'QRS', 'AHQ'] 
```

如何提取列表 b 中与字符串 a 的一部分完全匹配的字符串？所以会返回就像`['ABC']`

最重要的问题是我有几千万的字符串，所以时间效率是必不可少的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T22:14:13.503

如果您只想要 b 中的第一个匹配项：

```
next((s for s in b if s in a), None) 
```

这具有在找到匹配项后立即短路的优点，而其他列表解决方案将继续运行。如果没有找到匹配项，它将返回`None`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:19:19.560

请记住，Python 的子字符串搜索`x in a`已经针对一般情况进行了很好的优化（并且用 C 编码，用于 CPython），因此一般情况下您不太可能击败它，尤其是使用纯 Python 代码。

但是，如果您有更专业的案例，则可以做得更好。

例如，如果您有一个包含数百万个字符串的任意列表`b`，所有这些字符串都需要在一个`a`永远不会改变的巨大静态字符串中进行搜索，那么预处理`a`可以产生*巨大*的影响。（请注意，这与通常情况相反，其中预处理*模式*是关键。）

另一方面，如果您预计匹配的可能性不大，并且您已经`b`提前获得了整个列表，那么通过`b`某种方式组织您可能会获得一些巨大的收益。例如，`"ABCD"`如果`"ABC"`已经失败，则搜索没有意义；如果你需要同时搜索`"ABC"`，`"ABD"`你可以`"AB"`先搜索，然后检查它是否在后面，`"C"`所以`"D"`你不必重复自己；等等（甚至可以将所有内容合并`b`到一个足够接近最佳值的单个正则表达式中……尽管有数百万个元素，但这可能不是答案。）

但是很难提前猜测，没有比你给我们更多的信息，你想要什么算法。

[维基百科](http://en.wikipedia.org/wiki/String_searching_algorithm)对字符串搜索算法有很好的高级概述。还有一个专门用于一般模式匹配的[网站](http://www.cs.ucr.edu/~stelo/pattern.html)，这似乎有点过时了，但我怀疑你是否会需要在过去 3 年中发明的算法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T22:10:16.350

回答：

```
(x for x in b if x in a ) 
```

这将返回一个生成器，该生成器将是匹配的列表。采取第一个或循环它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T22:42:51.163

您可能想看看以下算法：

[Boyer-Moore 字符串搜索算法](http://en.literateprograms.org/Boyer-Moore_string_search_algorithm_%28Python%29) 和[维基百科](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)

但如果不知道更多，这可能是矫枉过正！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T22:10:29.173

```
In [3]: [s for s in b if s in a]
Out[3]: ['ABC'] 
```

`b`在我的机器上，当包含 20,000,000 个元素（测试`a`并`b`包含与问题中的字符串类似的字符串）时，这大约需要 3 秒。

# javascript - 如何在Javascript中合并两个不同的数组？

> ID：14389012
> 
> 赞同：2
> 
> 时间：2013-01-17T22:07:47.393
> 
> 标签：javascript, arrays

我有这个数组，

```
var arr1 = [19, 1, 1, 1, 1]; 
```

和另一个数组，

```
var arr2 = ["Default", "Dynamic", "Assessment", "Risk", "Privacy"]; 
```

我想要的是以某种方式合并它们，使其看起来像这样，

```
var merged_array = [ ["Default", 19], ["Dynamic", 1], ["Assessment", 1], ["Risk", 3], ["Privacy", 2] ]; 
```

我该怎么做？我尝试过`join`，但没有达到我想要的。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:11:03.947

如果您有 jquery 或等效项：

```
var merged_array = $.map(arr1, function(e, i) {
    return [arr2[i], e];
}); 
```

如果没有，那么只需使用`for`循环，同样的想法。

```
var merged_array = []
for (var i = 0; i < arr1.length && i < arr2.length; i++) {
    merged_array[i] = [arr2[i], arr1[i]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:11:58.447

```
var result = new Array();
for (var i=0; i<arr1 .length && i<arr2.length ; i++) {
    result[i] = new Array();
    result[i][0] = arr1[i];
    result[i][1] = arr2[i];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T22:12:35.887

使用 for 循环：

```
var merged_array = new Array(arr1.length);
for (var i = 0; i < arr1.length; i++) {
  merged_array[i] = new Array(arr2[i], arr1[i]);
} 
```

这假设 arr1 和 arr2 具有相同的长度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T22:15:07.927

我可能会扩展`array`对象，特别是如果这是一项常见任务。像这样的东西：

```
Array.prototype.myMerge = function(arr){
    var returnArr = [];
    for(var i = 0, len = this.length; i < len; i++){
        returnArr[i] = [this[i], arr[i]];
    }
    return returnArr;
}; 
```

那么你可以这样称呼它：

```
var merged_array = arr1.myMerge(arr2) 
```

当然，您必须对数组的长度添加一些错误检查，此函数假定 arr1 更长或与 arr2 长度相同。但这取决于如果 arr1 和 arr2 的长度不同，您要做什么，您的问题似乎假设它们的长度相同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T22:24:30.427

如果你包含库 underscore.js（prototype.js 也有类似的东西），你可以使用 _.zip(array1,array2)。它们提供了 3 个数组的示例用法。

来自[http://underscorejs.org/#zip](http://underscorejs.org/#zip)：

> zip_.zip(*arrays) 将每个数组的值与相应位置的值合并在一起。当您有通过匹配数组索引进行协调的单独数据源时很有用。如果您正在使用嵌套数组的矩阵，则 zip.apply 可以以类似的方式转置矩阵。

```
_.zip(['moe', 'larry', 'curly'], [30, 40, 50], [true, false, false]);
=> [["moe", 30, true], ["larry", 40, false], ["curly", 50, false]] 
```

# import - 为什么 Compass 在尝试导入部分时给我一个导入错误

> ID：14389013
> 
> 赞同：3
> 
> 时间：2013-01-17T22:07:48.687
> 
> 标签：import, sass, compass-sass, partials

我的指南针项目目录结构如下

```
s3z@s3z:~/Desktop/compass_project$ tree
.
├── basic.html
├── config.rb
├── css
│   ├── ie.css
│   ├── print.css
│   └── screen.css
├── index.html
├── partials
│   └── _normalize.scss
└── sass
    ├── ie.scss
    ├── print.scss
    └── screen.scss 
```

我的 screen.scss 文件看起来像这样

```
@import "compass";
@import "partials/normalize"; 
```

当我添加`@import "partials/normalize";`并保存它时，指南针向我吐出以下错误

```
>>> Compass is watching for changes. Press Ctrl-C to Stop.
>>> Change detected at 22:58:53 to: screen.scss
    error sass/screen.scss (Line 2: File to import not found or unreadable: partials/normalize.
Load paths:
  /home/max/Desktop/nettut_compass_tut/sass
  /home/max/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/frameworks/blueprint/stylesheets
  /home/max/.rvm/gems/ruby-1.9.3-p194/gems/compass-0.12.2/frameworks/compass/stylesheets
  Compass::SpriteImporter)
overwrite ./css/screen.css 
```

以防万一我的事情很`config.rb`重要

```
http_path = "/"
css_dir = "css"
sass_dir = "sass"
images_dir = "images"
javascripts_dir = "javascripts" 
```

**有想法该怎么解决这个吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T23:23:14.953

你已经定义了你`sass_dir`的`sass`指南针正在寻找那个重置文件：`sass/partials/normalize`如果你想在你`sass_dir`的 .

```
@import "../partials/normalize"; 
```

就个人而言，我更喜欢将部分目录放在 sass 目录中，或者只是让它们排序到顶部松散。

# iphone - iOS音乐播放器的公共API？

> ID：14389014
> 
> 赞同：2
> 
> 时间：2013-01-17T22:07:56.293
> 
> 标签：iphone, ios, audio, mpmusicplayercontroller

有什么方法可以访问在原生 iOS 音乐应用中播放的音乐？例如，在*我的*应用程序中按下按钮时，它会暂停内置的音乐应用程序。我试过 MPMusicPlayerController 但这似乎不是我想要的；或者我没有正确使用它。

这是我尝试过的。

```
 if ([musicPlayer playbackState] == MPMusicPlaybackStatePlaying) {
            [musicPlayer pause];
    } else {
            [musicPlayer play];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:16:26.100

取决于你如何实例化你的音乐播放器。要访问系统全局付款人，您应该使用：

```
MPMusicPlayerController *musicPlayer = [MPMusicPlayerController iPodMusicPlayer]; 
```

请注意，如果您正在使用`applicationMusicPlayer`它，它将仅适用于您的应用程序，暂停音乐不会影响 Music.app 中播放的音乐。

请参阅[MPMusicPlayerController 文档](http://developer.apple.com/library/ios/documentation/mediaplayer/reference/MPMusicPlayerController_ClassReference/Reference/Reference.html#//apple_ref/doc/uid/TP40008221-CH1-DontLinkElementID_1)概述部分以获取对两者的更广泛描述。

# oauth-2.0 - 从 Google 小工具执行 Fusion Tables INSERT 时获取“无效凭据”

> ID：14389030
> 
> 赞同：0
> 
> 时间：2013-01-17T22:09:14.993
> 
> 标签：oauth-2.0, google-apps, google-fusion-tables

我们有一个 Google 小工具，它通过 Fusion Table API 与用户的 Google 帐户连接到 Fusion Tables。它执行 SELECT 和 INSERT。

我们使用 OAuth1（opensocial 的 shindig 库）构建了这个小工具。它适用于已弃用的 Fusion Table API 版本。当我们将它迁移到新的 PAPI 时，选择 q 可以正常工作，因为不需要使用 OAuth2 进行身份验证。但是，对于 INSERT，这是必要的。opensocial 的文档尚未完全更新：http://docs.opensocial.org/display/OSREF/OpenSocial+Specification+Considerations

我无法弄清楚如何成功使用 OAuth2 执行插入。我们拥有在域级别读取/写入的 API 权限，并且用户拥有 Fusion 表的所有者权限。

我得到的错误是说“无效的凭据”非常模糊，我不知道为什么。

这是我们的小工具标题：

```
<OAuth>
    <Service name="google">
    <Access url="https://www.google.com/accounts/OAuthGetAccessToken" method="GET" />
    <Request url="https://www.google.com/accounts/OAuthGetRequestToken?scope=https://www.googleapis.com/auth/fusiontables%20https://docs.google.com/feeds/default/private"
         method="GET" />
    <Authorization url="https://www.google.com/accounts/OAuthAuthorizeToken?oauth_callback=http://oauth.gmodules.com/gadgets/oauthcallback" />
    </Service>
</OAuth> 
```

我不确定如何更新，所以我添加了另一个标题：

```
<OAuth2>
    <Service name="google">
    <Authorization url="https://www.google.com/accounts/OAuthAuthorizeToken?oauth_callback=http://oauth.gmodules.com/gadgets/oauth2callback" />
    </Service>
</OAuth2> 
```

当我们拨打电话时，我们执行以下操作：

```
options = {};
options[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.TEXT;
options[gadgets.io.RequestParameters.METHOD] = gadgets.io.MethodType.POST;
options[gadgets.io.RequestParameters.POST_DATA] = postData;
options[gadgets.io.RequestParameters.AUTHORIZATION] = gadgets.io.AuthorizationType.OAUTH2;
options[gadgets.io.RequestParameters.HEADERS] = {'Authorization':'{encrypted fusiontable key}'};  //not sure if this helps but its extra
options[gadgets.io.RequestParameters.OAUTH_SERVICE_NAME] = "google";
options[gadgets.io.RequestParameters.OAUTH_USE_TOKEN] = "always";

URL = https://www.googleapis.com/fusiontables/v1/query?key={encrypted fusiontable key} &client_id={id number}”;
postData=”sql=INSERT…”;
gadgets.io.makeRequest(URL, handlerWrapper, options); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T18:14:29.297

如果您正在执行写入请求，则需要提供对用户访问表的权限进行编码的 oauth 令牌。看起来这可能在 gadgets.io.RequestParameters.OAUTH_REQUEST_TOKEN 中。密钥用于从公共表进行读取访问。此外，您可能需要将 OAUTH_SERVICE_NAME 设置为“fusiontables”。

# linux - Linux：仅为当前用户安装的应用程序的安装目录

> ID：14389035
> 
> 赞同：1
> 
> 时间：2013-01-17T22:09:37.427
> 
> 标签：linux, fhs

我有一个 Python 应用程序，当前安装在 Linux **Filesystem Standard Hierarchy (FHS)**之后。它安装在：

*   /usr/bin/（可执行文件）
*   /usr/lib/python2.x/site-packages/{appname}/（Python 库）
*   /etc/{appname}/（配置文件）
*   /usr/share/man/（手册文件）

现在，希望安装此应用程序的非 root 用户可以在没有 root 权限的情况下安装它，并且只有该用户可以运行该应用程序。我们认为最好的办法是将应用程序安装在用户主目录中。
我们已经`.{appname}`在用户主目录中有一个目录来保存每个用户的配置文件，因为应用程序将配置文件安装在`/etc`.
我认为使用`.{appname}`dir 保存所有应用程序文件不是一个好主意，因为目录预先附加了 . 只保留配置文件。可能我会删除该`.{appname}`目录，因为现在将按用户安装整个应用程序。

2个想法：

*   创建一个`{appname}`目录并创建子目录 bin 等，lib 和 share/man。
*   `{app-name}`在home下复制Linux FHS并在lib等下 创建子目录
    *   〜/斌/
    *   ~/lib/{appname}
    *   〜/分享/人/
    *   ~/etc/{appname}

其中哪一种更常用和更推荐？欢迎每种替代方案的利弊。也许是第三种选择？

我见过人们推荐`/home/usr/bin`and `/home/usr/local/bin`，但我不明白需要在`usr`此处包含，因为不需要区分基本和非基本二进制文件/库。我更喜欢极简主义。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:26:34.587

第一个选项是最常见的。第三种选择是创建（或填写）已经被许多应用程序使用的结构`~/.local/`（反映） 。`/usr``share/`

# c# - 有没有办法优化这个 LINQ to Entities 查询？

> ID：14389036
> 
> 赞同：5
> 
> 时间：2013-01-17T22:09:42.197
> 
> 标签：c#, linq, entity-framework, optimization, linq-to-entities

我被要求生成一份报告，该报告由针对 SQL Server 数据库的相当复杂的 SQL 查询驱动。由于报告的站点已经在使用 Entity Framework 4.1，我想我会尝试使用 EF 和 LINQ 编写查询：

```
var q = from r in ctx.Responses
                    .Where(x => ctx.Responses.Where(u => u.UserId == x.UserId).Count() >= VALID_RESPONSES)
                    .GroupBy(x => new { x.User.AwardCity, x.Category.Label, x.ResponseText })
         orderby r.FirstOrDefault().User.AwardCity, r.FirstOrDefault().Category.Label, r.Count() descending
         select new
         {
             City = r.FirstOrDefault().User.AwardCity,
             Category = r.FirstOrDefault().Category.Label,
             Response = r.FirstOrDefault().ResponseText,
             Votes = r.Count()
         }; 
```

此查询统计投票，但仅来自已提交一定数量的所需最低投票的用户。

从性能的角度来看，这种方法完全是一场灾难，因此我们切换到 ADO.NET 并且查询运行得非常快。我确实使用 SQL Profiler 查看了 LINQ 生成的 SQL，虽然它看起来像往常一样糟糕，但我没有看到任何关于如何优化 LINQ 语句以使其更高效的线索。

这是直接的 TSQL 版本：

```
WITH ValidUsers(UserId)
AS
(
    SELECT UserId
    FROM Responses
    GROUP BY UserId
    HAVING COUNT(*) >= 103
)
SELECT d.AwardCity
    , c.Label
    , r.ResponseText
    , COUNT(*) AS Votes
FROM ValidUsers u
JOIN Responses r ON r.UserId = u.UserId
JOIN Categories c ON r.CategoryId = c.CategoryId
JOIN Demographics d ON r.UserId = d.Id
GROUP BY d.AwardCity, c.Label, r.ResponseText
ORDER BY d.AwardCity, s.SectionName, COUNT(*) DESC 
```

我想知道的是：这个查询对于 EF 和 LINQ 来说是否太复杂而无法有效处理，还是我错过了一个技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T01:23:25.573

使用 let 减少 r.First() 的数量可能会提高性能。这可能还不够。

```
 var q = from r in ctx.Responses
                .Where()
                .GroupBy()
     let response = r.First()
     orderby response.User.AwardCity, response.Category.Label, r.Count() descending
     select new
     {
         City = response.User.AwardCity,
         Category = response.Category.Label,
         Response = response.ResponseText,
         Votes = r.Count()
     }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T01:01:06.277

也许这个改变提高了性能，删除了 where 子句中生成的嵌套 sql select

首先获取每个用户的选票，并将其放入一个`Dictionary`

```
var userVotes = ctx.Responses.GroupBy(x => x.UserId )
                             .ToDictionary(a => a.Key.UserId,  b => b.Count());

var cityQuery = ctx.Responses.ToList().Where(x => userVotes[x.UserId] >= VALID_RESPONSES)
               .GroupBy(x => new { x.User.AwardCity, x.Category.Label, x.ResponseText })
               .Select(r => new
                       {
                           City = r.First().User.AwardCity,
                           Category = r.First().Category.Label,
                           Response = r.First().ResponseText,
                           Votes = r.Count()
                       })
               .OrderByDescending(r => r.City, r.Category, r.Votes()); 
```

# c# - 在一个控制器中比较来自两个模型的数据

> ID：14389038
> 
> 赞同：0
> 
> 时间：2013-01-17T22:09:49.470
> 
> 标签：c#, asp.net-mvc

我有两个模型：

```
public class Resort
{
    public int ID { get; set; }
    public String Name { get; set; }
    public int BlackDiamond { get; set; }
    public int BlueSquare { get; set; }
    public int GreenCircle { get; set; }
    public int TerrainPark { get; set; }
} 
```

和

```
public class Input
{
    public int ID { get; set; }
    public string Name { get; set; }
    public bool GreenCircle { get; set; }
    public bool BlueSquare { get; set; }
    public bool BlackDiamond { get; set; }
    public bool TerrainPark { get; set; }
} 
```

这里的想法是创建一个控制器，它允许我访问来自两个模型的数据，因为我的逻辑基本上允许我搜索所有度假村，寻找具有最高数量的首选经验级别的度假村。例如，假设我更喜欢 BlackDiamonds，所以我想搜索 BlackDiamonds 数量最多的度假村。所以我需要知道哪个经验级别是首选的，哪个度假村的首选经验级别最多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:16:19.153

您可以定义聚合这两个模型的视图模型：

```
public class MyViewModel
{
    public Input Input { get; set; }
    public Resort Resort { get; set; }
} 
```

现在，控制器操作可以将这个视图模型从/传递到视图，这些视图将被强类型化到视图模型。现在您将拥有所有必要的数据。

# jquery - Ajax 发布两次但只需要一次

> ID：14389041
> 
> 赞同：0
> 
> 时间：2013-01-17T22:09:57.270
> 
> 标签：jquery, ajax

我正在使用以下（添加到 DOM 代码）来更新具有类似数据的 MySQL 数据库，但是，它发布了两次，我不知道为什么。

我有几乎相同的代码，它也发布了两次，所以它会自行抵消，但数据库点击次数比需要的多两倍从来都不是好事。

```
html += '<script type="text/javascript">';
     html += '$(function()';
     html += '{';
     html += '$(".like").click(function(){';
     html += 'var element = $(this);';
     html += 'var I = element.attr("id");';
     html += 'var info = \'article_id=\' + I;';
     html += '$.ajax({';
     html += 'type: "POST",';
     html += 'url: "/pages/includes/ajax/like.php",';
     html += 'data: info,';
     html += 'success: function(){';
     html += '$(\'#like\'+I).fadeOut("fast");';
     html += '$(\'#unlike\'+I).fadeIn("slow");';
     html += '}';
     html += '});';
     html += 'return false;';
     html += '});';
     html += '});';
 html += '</script>'; 
```

如何避免发两次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:53:01.867

如果将代码添加到 dom 的多个位置，您的 click 事件将多次执行相同的匿名函数。因此，请确保此代码不会在您的页面源代码中多次出现。

# mysql - 连接表上的多个 WHERE 子句

> ID：14389043
> 
> 赞同：1
> 
> 时间：2013-01-17T22:10:11.440
> 
> 标签：mysql, sql, join

我有一个简单的应用程序可以跟踪食客以及他们最喜欢的口味和甜点。该`records`表只是用餐者的姓名和 ID，该`mid`表跟踪甜点和口味（同样通过链接到另一个值表的 ID）。

```
CREATE TABLE IF NOT EXISTS `records` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

INSERT INTO `records` (`id`, `name`) VALUES
(1, 'Jimmy Jones'),
(2, 'William Henry');

CREATE TABLE IF NOT EXISTS `mid` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `diner` int(11) NOT NULL,
  `dessert` int(11) NOT NULL DEFAULT '0',
  `flavor` int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=11 ;

INSERT INTO `mid` (`id`, `diner`, `dessert`, `flavor`) VALUES
(1, 1, 3, 0),
(2, 1, 2, 0),
(3, 1, 15, 0),
(4, 1, 0, 1),
(5, 2, 3, 0),
(6, 2, 6, 0),
(7, 2, 0, 4),
(8, 1, 34, 0),
(9, 2, 0, 4),
(10, 2, 0, 22); 
```

我对应该是一个简单的查询感到有些困惑——我想从满足`records`某些甜点或风味要求的表中获取所有 ID：

```
SELECT a.id 
FROM records AS a
JOIN mid AS b ON a.id = b.diner
WHERE b.dessert IN (3,2,6)
AND b.flavor IN (4,22) 
```

此查询不返回任何行，即使存在与 where 子句匹配的记录。我很确定我错过了一些明显的东西，`JOIN`但是我尝试了 INNER、OUTER、LEFT 和 RIGHT，但没有成功。

有人可以让我走上正轨并解释我缺少什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:18:00.377

您的 SQL 语句很好，但您的示例记录不符合您的条件，匹配的记录应如下所示

```
dessert  flavor
3        4
3        22
2        4
2        33
6        4
6        22 
```

您的输入记录中没有任何这些组合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:18:27.427

你似乎想要有组合的食客。这是一种方法：

```
select diner
from records
group by diner
having max(b.dessert = 3) = 1 and
       max(b.dessert = 2) = 1 and
       max(b.dessert = 6) = 1 and
       max(b.flavor = 4) = 1 and
       max(b.flavor = 22) = 1 
```

这回答了您的评论：

```
select diner
from records
group by diner
having max(case when b.dessert in (2, 3, 6) then 1 esle 0 end) = 1 and
       max(case when b.dessert in (4, 22) then 1 else 0 end) = 1 
```

如果您只是在 a 中查找符合条件的记录，请使用：

```
select r.*, d.name
from records r join
     diner d
     on r.diner = d.id
where b.dessert IN (3,2,6) AND b.flavor IN (4,22) 
```

如果这是您想要的，那么您的查询中的连接条件是错误的（a.id 应该是 a.diner）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T22:19:12.327

您的 WHERE 条件不适合“中间”表中的任何记录。

没有记录在 (3, 2, 6) 中有甜点并且在 (4, 22) 中有风味，因此查询（正确）不返回任何结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T22:19:58.450

您没有任何与 where 条件都匹配的记录。

```
( 1, 1,  3,  0) - Matches dessert IN (3,2,6)
( 2, 1,  2,  0) - Matches dessert IN (3,2,6)
( 3, 1, 15,  0)
( 4, 1,  0,  1)
( 5, 2,  3,  0) - Matches dessert IN (3,2,6)
( 6, 2,  6,  0) - Matches dessert IN (3,2,6)
( 7, 2,  0,  4) - Matches flavor IN (4,22)
( 8, 1, 34,  0)
( 9, 2,  0,  4) - Matches flavor IN (4,22)
(10, 2,  0, 22) - Matches flavor IN (4,22) 
```

也许你的意思是OR？

```
SELECT a.id 
FROM records AS a
JOIN mid AS b ON a.id = b.diner
WHERE b.dessert IN (3,2,6)
OR b.flavor IN (4,22) 
```

应该返回 7 个结果。

此外，您对 JOIN 的想法是一个红鲱鱼。LEFT 和 RIGHT 之间的区别只是当连接子句与它们之间的记录不匹配时，哪个表具有优先权。INNER 和 OUTER 之间的区别只是当两个表之间没有匹配的记录时会发生什么。试试[这篇来自编码恐怖的解释性文章，](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)了解有关连接的更多详细信息（在另一个 SO 问题中向我指出，嘿嘿）。

# facebook-fql - FQL 多查询返回信息

> ID：14389046
> 
> 赞同：1
> 
> 时间：2013-01-17T22:10:21.440
> 
> 标签：facebook-fql, fql.multiquery

我正在尝试使用 FQL 多查询来获取我最近的 Facebook 问题和使用 http 请求的一个查询的选项。

到目前为止，我尝试使用的查询是：

```
SELECT name, votes FROM question_option WHERE question_id IN 
   (SELECT id, question FROM question WHERE owner = me() 
   ORDER BY created_time DESC LIMIT 1) 
```

不幸的是，这只返回外部查询的名称和投票，而不是内部查询的问题文本。有没有办法在不进行 2 个查询的情况下检索所有 3 个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:55:17.077

您发布的不是多查询。一个适当的多查询应该得到你想要的：

```
{
'question_detail':
  'SELECT id, question FROM question WHERE owner = me() 
     ORDER BY created_time DESC LIMIT 1',
'question_answers':
   'SELECT name, votes FROM question_option WHERE question_id IN
      (SELECT id FROM #question_detail)'
 } 
```

您需要去掉空格才能正确执行。

# angularjs - 改进这个 AngularJS 工厂以与 socket.io 一起使用

> ID：14389049
> 
> 赞同：52
> 
> 时间：2013-01-17T22:10:28.070
> 
> 标签：angularjs, socket.io

我想在 AngularJS 中使用 socket.io。我找到了以下工厂：

```
app.factory('socket', function ($rootScope) {
    var socket = io.connect();
    return {
        on: function (eventName, callback) {
            socket.on(eventName, function () {
                var args = arguments;
                $rootScope.$apply(function () {
                    callback.apply(socket, args);
                });
            });
        },
        emit: function (eventName, data, callback) {
            socket.emit(eventName, data, function () {
                var args = arguments;
                $rootScope.$apply(function () {
                    if (callback) {
                        callback.apply(socket, args);
                    }
                });
            })
        }
    }; 
```

它在控制器中使用，如：

```
function MyCtrl($scope, socket) {
    socket.on('message', function(data) {
        ...
    });
}; 
```

问题是每次访问控制器时都会添加另一个侦听器，因此当收到一条消息时，它会被处理多次。

将 socket.io 与 AngularJS 集成的更好策略是什么？

编辑：我知道我不能在工厂返回任何内容并在那里进行监听，然后在控制器中使用 $rootScope.$broadcast 和 $scope.$on ，但这看起来不是一个好的解决方案。

EDIT2：添加到工厂

```
init: function() {
            socket.removeAllListeners();
} 
```

并在每个使用 socket.io 的控制器的开头调用它。

仍然感觉不是最好的解决方案。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-17T23:26:12.793

每当控制器被销毁时删除套接字侦听器。您将需要`$destroy`像这样绑定事件：

```
function MyCtrl($scope, socket) {
    socket.on('message', function(data) {
        ...
    });

    $scope.$on('$destroy', function (event) {
        socket.removeAllListeners();
        // or something like
        // socket.removeListener(this);
    });
}; 
```

有关更多信息，请查看[angularjs 文档](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24destroy)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-18T06:29:15.557

您可以通过包装一个 Scope 并监视要广播的工作量来处理这个问题`$destroy`，并且当它是时，只从套接字中删除在该 Scope 的上下文中添加的侦听器。请注意：以下内容尚未经过测试——我将其视为伪代码而不是实际代码。:)

```
// A ScopedSocket is an object that provides `on` and `emit` methods,
// but keeps track of all listeners it registers on the socket.
// A call to `removeAllListeners` will remove all listeners on the
// socket that were created via this particular instance of ScopedSocket.

var ScopedSocket = function(socket, $rootScope) {
  this.socket = socket;
  this.$rootScope = $rootScope;
  this.listeners = [];
};

ScopedSocket.prototype.removeAllListeners = function() {
  // Remove each of the stored listeners
  for(var i = 0; i < this.listeners.length; i++) {
    var details = this.listeners[i];
    this.socket.removeListener(details.event, details.fn);
  };
};

ScopedSocket.prototype.on = function(event, callback) {
  var socket = this.socket;
  var $rootScope = this.$rootScope;

  var wrappedCallback = function() {
    var args = arguments;
    $rootScope.$apply(function() {
      callback.apply(socket, args);
    });
  };

  // Store the event name and callback so we can remove it later
  this.listeners.push({event: event, fn: wrappedCallback});

  socket.on(event, wrappedCallback);
};

ScopedSocket.prototype.emit = function(event, data, callback) {
  var socket = this.socket;
  var $rootScope = this.$rootScope;

  socket.emit(event, data, function() {
    var args = arguments;
    $rootScope.$apply(function() {
      if (callback) {
        callback.apply(socket, args);
      }
    });
  });
};

app.factory('Socket', function($rootScope) {
  var socket = io.connect();

  // When injected into controllers, etc., Socket is a function
  // that takes a Scope and returns a ScopedSocket wrapping the
  // global Socket.IO `socket` object. When the scope is destroyed,
  // it will call `removeAllListeners` on that ScopedSocket.
  return function(scope) {
    var scopedSocket = new ScopedSocket(socket, $rootScope);
    scope.$on('$destroy', function() {
      scopedSocket.removeAllListeners();
    });
    return scopedSocket;
  };
});

function MyController($scope, Socket) {
  var socket = Socket($scope);

  socket.on('message', function(data) {
     ...
  });
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-23T13:48:53.460

我会在接受的答案中添加评论，但我不能。所以，我会写一个回复。我遇到了同样的问题，我找到的最简单最简单的答案是您可以在[michaeljoser](https://stackoverflow.com/users/3422332/michaeljoser)提供的[另一篇文章](https://stackoverflow.com/a/22424757/1094045)中找到的答案。

为方便起见，我将其复制如下：

您必须将 removeAllListeners 添加到您的工厂（见下文），并在每个控制器中包含以下代码：

```
$scope.$on('$destroy', function (event) {
socket.removeAllListeners();
}); 
```

更新的套接字工厂：

```
var socket = io.connect('url');
    return {
        on: function (eventName, callback) {
            socket.on(eventName, function () {
                var args = arguments;
                $rootScope.$apply(function () {
                    callback.apply(socket, args);
                });
            });
        },
        emit: function (eventName, data, callback) {
            socket.emit(eventName, data, function () {
                var args = arguments;
                $rootScope.$apply(function () {
                    if (callback) {
                        callback.apply(socket, args);
                    }
                });
            })
        },
      removeAllListeners: function (eventName, callback) {
          socket.removeAllListeners(eventName, function() {
              var args = arguments;
              $rootScope.$apply(function () {
                callback.apply(socket, args);
              });
          }); 
      }
    };
}); 
```

它拯救了我的一天，我希望它对其他人有用！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-22T17:28:38.313

*在您的服务或工厂*中创建功能，如下所示。

```
unSubscribe: function(listener) {
    socket.removeAllListeners(listener);
} 
```

然后在“$destroy”事件下调用你的控制器，如下所示。

```
$scope.$on('$destroy', function() {
    yourServiceName.unSubscribe('eventName');
}); 
```

那解决了

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-06T20:48:08.843

在阅读本文之前，我刚刚解决了一个类似的问题。我在服务中完成了这一切。

```
.controller('AlertCtrl', ["$scope", "$rootScope", "Socket", function($scope, $rootScope, Socket) {
    $scope.Socket = Socket;
}])

// this is where the alerts are received and passed to the controller then to the view
.factory('Socket', ["$rootScope", function($rootScope) {
    var Socket = {
        alerts: [],
        url: location.protocol+'//'+location.hostname+(location.port ? ':'+location.port: ''),
        // io is coming from socket.io.js which is coming from Node.js
        socket: io.connect(this.url)
    };
    // set up the listener once
    // having this in the controller was creating a
    // new listener every time the contoller ran/view loaded
    // has to run after Socket is created since it refers to itself
    (function() {
        Socket.socket.on('get msg', function(data) {
            if (data.alert) {
                Socket.alerts.push(data.alert);
                $rootScope.$digest();
            }
        });
    }());
    return Socket;
}]) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-10T12:46:17.507

我尝试了不同的方法，但没有按预期工作。在我的应用程序中，我`socket`在. 当用户切换到不同的视图时，我只想删除由 生成的重复事件并保持运行，因此我无法使用函数。相反，我发现了一种更好的方法来避免在我的工厂内创建重复项：`MainController``GameController``GameController``MainController``removeAllListeners``socket`

```
app.factory('socket', function ($rootScope) {
  var socket = io.connect();

  function on(eventName, callback) {
    socket.on(eventName, function () {
      var args = arguments;

      $rootScope.$apply(function () {
        callback.apply(socket, args);
      });
    });

    // Remove duplicate listeners
    socket.removeListener(eventName, callback);
  }

  function emit(eventName, data, callback) {
    socket.emit(eventName, data, function () {
      var args = arguments;

      $rootScope.$apply(function () {
        if (callback) {
          callback.apply(socket, args);
        }
      });
    });

    // Remove duplicate listeners
    socket.removeListener(eventName, callback);
  }

  return {
    on: on,
    emit: emit
  };
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T01:29:29.100

扩展上面 Brandon 的回答，我创建了一个服务，该服务还应该 1）剥离像 .$$hashKey 这样留在元素上的角度标签，2）允许像 socketsof('..').on(' 这样的命名空间套接字..'

```
(function (window, app, undefined) {
    'use strict';

    var ScopedSocket = function (socket, $rootScope) {
        this.socket = socket;
        this.$rootScope = $rootScope;
        this.listeners = [];
        this.childSockets = [];
    };

    ScopedSocket.prototype.removeAllListeners = function () {
        var i;

        for (i = 0; i < this.listeners.length; i++) {
            var details = this.listeners[i];
            this.socket.removeListener(details.event, details.fn);
        }

        for (i = 0; i < this.childSockets.length; i++) {
            this.childSockets[i].removeAllListeners();
        }
    };

    ScopedSocket.prototype.on = function (event, callback) {
        var socket = this.socket;
        var $rootScope = this.$rootScope;

        this.listeners.push({event: event, fn: callback});

        socket.on(event, function () {
            var args = arguments;
            $rootScope.$apply(function () {
                callback.apply(socket, args);
            });
        });
    };

    ScopedSocket.prototype.emit = function (event, data, callback) {
        var socket = this.socket;
        var $rootScope = this.$rootScope;

        socket.emit(event, angular.fromJson(angular.toJson(data)), function () {
            var args = arguments;
            $rootScope.$apply(function () {
                if (callback) {
                    callback.apply(socket, args);
                }
            });
        });
    };

    ScopedSocket.prototype.of = function (channel) {
        var childSocket = new ScopedSocket(this.socket.of(channel), this.$rootScope);

        this.childSockets.push(childSocket);

        return childSocket;
    };

    app.factory('Socket', ['$rootScope', function ($rootScope) {
        var socket = $rootScope.socket;

        return function(scope) {
            var scopedSocket = new ScopedSocket(socket, $rootScope);
            scope.$on('$destroy', function() {
                scopedSocket.removeAllListeners();
            });
            return scopedSocket;
        };
    }]);
})(window, window.app); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-15T17:22:46.167

我通过检查监听器是否已经存在来解决这个问题。如果您有多个同时加载的控制器（想想都使用 socketIO 的不同页面模块），删除所有已注册的侦听`$destroy`器将破坏已销毁的控制器和仍然加载的所有控制器的功能。

```
app.factory("SocketIoFactory", function ($rootScope) {
    var socket = null;
    var nodePath = "http://localhost:12345/";

    function listenerExists(eventName) {
        return socket.hasOwnProperty("$events") && socket.$events.hasOwnProperty(eventName);
    }

    return {
        connect: function () {
            socket = io.connect(nodePath);
        },
        connected: function () {
            return socket != null;
        },
        on: function (eventName, callback) {
            if (!listenerExists(eventName)) {
                socket.on(eventName, function () {
                    var args = arguments;
                    $rootScope.$apply(function () {
                        callback.apply(socket, args);
                    });
                });
            }
        },
        emit: function (eventName, data, callback) {
            socket.emit(eventName, data, function () {
                var args = arguments;
                $rootScope.$apply(function () {
                    if (callback) {
                        callback.apply(socket, args);
                    }
                });
            })
        }
    };
}); 
```

这可以通过跟踪哪个控制器注册了哪些侦听器并仅删除属于已销毁控制器的侦听器以清理内存来进一步改进。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-09T21:28:49.310

我使用类似下面的代码。socketsService 只实例化一次，我相信 Angular 会处理 $on 的 GC

如果您不喜欢 $broadcast/$on，可以使用一些更可靠的 Angular 消息总线实现......

```
app.service('socketsService', ['$rootScope', function ($rootScope) {
    var socket = window.io.connect();

    socket.on('info', function(data) {
        $rootScope.$broadcast("info_received", data);
    });

    socket.emit('ready', "Hello");
}]);

app.controller("infoController",['$scope',
    function ($scope) {
        $scope.$root.$on("info_received", function(e,data){
            console.log(data);
        });
        //...
    }]);

app.run(
    ['socketsService',
        function (socketsService) {
        //...
    }]); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-17T23:06:05.083

不要做 app.factory，而是像这样创建一个[服务](http://docs.angularjs.org/guide/dev_guide.services.creating_services)（单例）：

```
var service = angular.module('socketService', []);
service.factory('$socket', function() {
    // Your factory logic
}); 
```

然后，您可以简单地将服务注入您的应用程序并在控制器中使用它，就像 $rootScope 一样。

这是我如何进行此设置的更完整示例：

```
// App module
var app = angular.module('app', ['app.services']);

// services
var services = angular.module('app.services', []);

// Socket service
services.factory('$socket', ['$rootScope', function(rootScope) {

    // Factory logic here

}]);

// Controller
app.controller('someController', ['$scope', '$socket', function(scope, socket) {

    // Controller logic here

}]); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-22T13:23:23.433

我在 AngularApp 中尝试使用上述代码，发现事件重复。使用来自@pootzko 的相同示例，使用 SocketIoFactory

我在控制器`unSubscribe(even_name)`内部添加了一个`$destroy`，它将删除/清除**socketEventListner**

```
var app = angular.module("app", []);
..
..
..
//Create a SocketIoFactory
app.service('SocketIoFactory', function($rootScope){

    console.log("SocketIoFactory....");
    //Creating connection with server
    var protocol = 'ws:',//window.location.protocol,
        host = window.location.host,
        port = 80,
        socket = null;
    var nodePath = protocol+'//'+host+':'+port+'/';

    function listenerExists(eventName) {
        return socket.hasOwnProperty("$events") && socket.$events.hasOwnProperty(eventName);
    }

    return {
        connect: function () {
            socket = io.connect(nodePath);
            console.log('SOCKET CONNECTION ... ',nodePath);
        },
        connected: function () {
            return socket != null;
        },
        on: function (eventName, callback) {
            if (!listenerExists(eventName)) {
                socket.on(eventName, function () {
                    var args = arguments;
                    $rootScope.$apply(function () {
                        callback.apply(socket, args);
                    });
                });
            }
        },
        emit: function (eventName, data, callback) {
            socket.emit(eventName, data, function () {
                var args = arguments;
                $rootScope.$apply(function () {
                    if (callback) {
                        callback.apply(socket, args);
                    }
                });
            })
        },
        unSubscribe: function(listener) {
            socket.removeAllListeners(listener);
        }
    };
});

..
..
..

//Use in a controller
app.controller("homeControl", ['$scope', 'SocketIoFactory', function ($scope, SocketIoFactory) {

  //Bind the events
  SocketIoFactory.on('<event_name>', function (data) {

  });

  //On destroy remove the eventListner on socketConnection
   $scope.$on('$destroy', function (event) {
        console.log('[homeControl] destroy...');
        SocketIoFactory.unSubscribe('<event_name>');
    });
}]); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-07-22T00:47:48.607

我这样做是为了避免重复的听众并且效果很好。

```
 on: function (eventName, callback) {
  //avoid duplicated listeners
  if (listeners[eventName] != undefined) return;

  socket.on(eventName, function () {
     var args = arguments;
     $rootScope.$apply(function () {
        callback.apply(socket, args);
     });
     listeners[eventName] = true;
  });
}, 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-09-02T20:52:19.563

浏览器刷新后，我遇到了完全相同的重复事件问题。我使用的是“工厂”，但改用了“服务”。这是我的 socket.io 包装器：

```
myApp.service('mysocketio',['$rootScope', function($rootScope)
{
    var socket = io.connect();

    return {

        on: function(eventName, callback )
        {
            socket.on(eventName, function()
            {
                var args=arguments;
                $rootScope.$apply(function()
                {
                    callback.apply(socket,args);
                });
            });
        },

        emit: function(eventName,data,callback)
        {
            socket.emit(eventName,data,function()
            {
                var args=arguments;
                $rootScope.$apply(function()
                {
                    if(callback)
                    {
                        callback.apply(socket,args);
                    }
                });
            });
        }
    }

}]); 
```

我在控制器中使用此服务并监听事件：

```
myApp.controller('myController', ['mysocketio', function(mysocketio)
{
    mysocketio.on( 'myevent', function(msg)
    {
        console.log('received event: ' + msg );
    }
}]); 
```

一旦我从使用工厂切换到使用服务，在浏览器刷新后我不会收到重复。

# sql-server - 法语字符

> ID：14389051
> 
> 赞同：-1
> 
> 时间：2013-01-17T22:10:29.893
> 
> 标签：sql-server

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-26T14:22:56.740

我在`nvarchar`->`varchar`转换出错时看到了类似的情况。特别是在连接并执行此操作时：

```
e.FirstName + ' ' + e.LastName 
```

而不是这样做：

```
e.FirstName + N' ' + e.LastName 
```

根据需要执行`cast(nvarchar_field AS varchar(50))`- 或相反的操作。将所有内容带到 NVARCHAR，因为它支持支持 UTF-8 的 Unicode。

如果字段是 varchar 而不是 nvarchar，则可能需要修改实际表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-20T14:22:26.193

我不认为“É”被编码为“Ã‰”，使用其他特殊字符对字符进行编码是一种非常奇怪的方式。

似乎恰恰相反：

我注意到“É”有时显示为“Ã©”。这是一个编码字符错误，因为字符编码不适合该语言。

如果您尝试从错误显示字符中更正正确的法语字符，我不知道是否存在这样的列表。您首先需要知道您在编码字符中犯了什么样的错误，才能找到错误显示的列表。

所以我建议的解决方案在这里：找到正确的字符编码来解决这个问题。更改编码通常会修复显示。

对于法语字符，正确的是**iso-8859-1**和**utf-8**。一旦你有正确的编码，你可以找到一个转换列表，将你的源代码翻译成显示的字符。

例如，这个列表：[http ://www.fileformat.info/info/charset/ISO-8859-1/list.htm](http://www.fileformat.info/info/charset/ISO-8859-1/list.htm)

# r - 绘制地图时不显示 scale_gradient 的中断

> ID：14389054
> 
> 赞同：1
> 
> 时间：2013-01-17T22:10:35.467
> 
> 标签：r, ggplot2, ggmap

我想我有一个非常简单的问题。如果我画一个像这样的散点图：

```
 data <- data.frame(lon=runif(100)*3+10, lat=runif(100)*5+42, value=rnorm(100)*100)
 ggplot() + geom_point(aes(x=lon, y=lat,  color=value), data=data) 
```

图例正确显示并指定了中断。

![适当的传说](../Images/87d0d4a58bd78c5b6aa72efb3ec24f63.png)

但是当我使用地图作为背景时：

```
 SHmap <- qmap(c(lon=mean(data[,'lon'], na.rm=TRUE), lat=mean(data$lat, na.rm=TRUE)), zoom=7)
 SHmap <- SHmap + geom_point(aes(x=lon, y=lat,  color=value), data=data)
 SHmap 
```

![此处未指定休息时间](../Images/953ddf4233165e56790652fc9454f11d.png)

我做错了什么还是这种行为是有意的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:32:57.477

尝试添加`extent="panel"`到您的`qmap`通话中。默认值 ,`extent="device"`将 a`theme_nothing`放到图上，从而摆脱刻度标签。

```
SHmap <- qmap(c(lon=mean(data[,'lon'], na.rm=TRUE), lat=mean(data$lat, na.rm=TRUE)), 
              zoom=7, extent="panel")
SHmap <- SHmap + geom_point(aes(x=lon, y=lat,  color=value), data=data)
SHmap 
```

![在此处输入图像描述](../Images/4479e52fdbf8445afd59ca4729748bbb.png)

或者只是覆盖控制图例的主题部分，以便它们显示出来。

# visual-studio-2010 - 未解决的循环引用

> ID：14389057
> 
> 赞同：1
> 
> 时间：2013-01-17T22:10:42.627
> 
> 标签：visual-studio-2010, database-project

我在一个解决方案中有两个数据库项目，数据库 A 和数据库 B。它们都有像这样指向彼此的查询

```
Select * FROM [Database A].dbo.Table 
```

Visual Studio 会给你一个类似 SQL04151 的警告：Procedure xyz contains an unresolved reference to an object……如果你添加一个对数据库 A 的数据库引用，这个警告会在数据库 B 中得到解决。

但是，仍然有来自数据库 A 的警告，抱怨对数据库 B 中某些内容的未解决引用。

如果我尝试从数据库 A 添加对数据库 B 的引用，它不会让我这样做，因为它说“无法添加对库“数据库 B”的引用。将此项目添加为引用会导致循环依赖。

所以我想我的问题是如何解决参考，以便停止显示警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T14:22:18.720

在 VS2010 DB 项目中，您希望为引用的数据库生成 *.DBSchema 文件。将该 DBSchema 文件添加为项目内的数据库引用。这将避免尝试指向另一个项目并创建循环引用。您可以使用带有“导入”选项的 VSDBCMD.exe 生成 DBSchema 文件，以从数据库创建文件。

您可能希望在构建时注意错误。由于这些循环引用，我们不得不多次构建/部署数据库以进行“新”构建。第一次为 DB A 删除/创建，然后创建 DB B，然后更新 DB A。如果我们不这样做，则不会创建依赖于其他数据库的对象。

# c++ - 有没有办法知道激活的 QAction 是什么？

> ID：14389058
> 
> 赞同：2
> 
> 时间：2013-01-17T22:10:56.957
> 
> 标签：c++, qt, qt4, signals-slots

`QAction`我已经创建了内部子类的实例`QGraphicsView`并将其连接到同一类中的插槽。

```
QAction *action   = new QAction(tr("New"), this);
action->setObjectName("addStopAction");
action->setShortcut(QKeySequence(Qt::ControlModifier | Qt::Key_N));
connect(action, SIGNAL(triggered()), this, SLOT(addNew()));
addAction(action); 
```

Slot 是一个`QGraphicsItem`在场景中创建新实例的函数，分配给`QGraphicsView`.

```
void MyGraphicsView::addNew() {
    // Insert new item at cursor position
} 
```

我还将此操作添加到`QMenu`用作我的类上下文菜单的 a 中。

```
QMenu *contextMenu = new QMenu(this);
contextMenu->addAction(action); 
```

一切正常。当我按 Command/Ctrl + N 时，会在光标位置创建新项目。但是当我右键单击并从上下文菜单中选择操作时，我希望在菜单位置创建新项目。

当然，如果 SLOT 被调用`contextMenuEvent`或类似的东西，我可以做一些小技巧来标记，但我想知道的是：

有什么方法可以找出是什么在连接的 SLOT 内`QAction`发出信号？`triggered()`这样，当我应该将新项目放置在光标位置以及在 SLOT 实现内的上下文菜单位置时，我可以处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T17:21:57.813

当然，您可以找出连接的 SLOT 内发出的信号。

只需使用 QObject::sender()。在你的情况下：

```
void MyGraphicsView::addNew() {
    QAction* pAction = qobject_cast<QAction*>(sender());
    Q_ASSERT(pAction);
    // do something with pAction
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:01:42.703

我通过将菜单连接到类似的功能来管理类似的东西`connect (menu, SIGNAL( triggered(QAction*) ), this, SLOT( menuAction_triggered(QAction*) ));`

当您执行上下文菜单时，`QMenu::exec(QPoint)`将返回指向操作的指针，因此您可能不需要额外的功能/插槽。

您可以检查动作的名称及其文本`QAction::text()`，或者通过比较地址是否将指针存储在某处。

苏龙仔

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T12:43:36.003

我认为您可以使用 QAction 对象可以包含的自定义数据。您可以在创建上下文菜单时设置它：

```
void showContextMenu(const QPoint &pos)
{
    ...
    action->setData(pos);
    ...
} 
```

在`addNew()`函数中，您检查数据是否存在并最终将其重置：

```
void addNew()
{
    QPoint pos;
    QPoint posFromAction = action->data()->toPoint();
    if (posFromAction.isNull())
    {
        pos = QCursor::pos(); ///< pos will be current cursor's position
    }
    else
    {
        pos = posFromAction; ///< pos will be menu's position
    }

    doYourStuffAt(pos)

    action->setData(QPoint()); ///< reset action's data
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-19T00:36:24.073

您可以在 customContextMenuRequested 信号调用的函数中引用 self.sender() 。

```
self.tree1.customContextMenuRequested.connect(self.menu1pop)  # rightclick menu signal

...

def menu1pop(self, pos):

    widget = self.sender()

    item = widget.itemAt(pos)
    if item is None: return            # only show contextmenu if on an item
    self.setProperty("mywidget", widget)  # pass current widget 
    self.menu1.popup(QCursor.pos())    # show menu at right click cursor position 
```

self.sender() 将返回您的小部件对象，然后您可以在属性中设置小部件对象。

然后，当您的操作函数被调用时，您可以通过读取属性来调用小部件对象。

```
widget = self.property("mywidget") 
```

这有点小技巧，但是一种简单而可靠的方法可以知道您的操作是从哪个小部件调用的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-17T22:20:30.390

您可能能够在接收呼叫的插槽中使用 QObject::sender() 。虽然没有尝试过这个动作。它可能比您提出的“hack”（您实际上可以使用作用域类很好地实现它）更难看。

# r - ggplot2堆积条形图顺序在更新后中断

> ID：14389061
> 
> 赞同：4
> 
> 时间：2013-01-17T22:11:10.640
> 
> 标签：r, ggplot2

我刚刚更新了我的 ggplot2 包，并开始在我的条形图中收到以下警告消息：

> 将变量映射到 y 并使用 stat="bin"。使用 stat="bin"，它将尝试将 y 值设置为每组中的案例数。这可能会导致意外行为，并且不会在未来版本的 ggplot2 中被允许。如果您希望 y 表示案例计数，请使用 stat="bin" 并且不要将变量映射到 y。如果您希望 y 表示数据中的值，请使用 stat="identity"。

我将 stat='identity' 添加到我的代码中。现在堆积条形图中的顺序是错误的（顺序由因子水平定义）。我真的不知道如何解决它。我现在可以离开它 - 但警告消息说将来不会被允许，所以我想现在解决它。有什么解决办法吗？

这是数据和代码示例：

```
data.set <- structure(list(Date = structure(c(15675, 15676, 15677, 15678, 
15679, 15680, 15681, 15682, 15683, 15684, 15685, 15686, 15687, 
15688, 15689, 15690, 15691, 15692, 15693, 15694, 15695, 15696, 
15697, 15698, 15699, 15700, 15701, 15702, 15703, 15704, 15705, 
15675, 15676, 15677, 15678, 15679, 15680, 15681, 15682, 15683, 
15684, 15685, 15686, 15687, 15688, 15689, 15690, 15691, 15692, 
15693, 15694, 15695, 15696, 15697, 15698, 15699, 15700, 15701, 
15702, 15703, 15704, 15705, 15675, 15676, 15677, 15678, 15679, 
15680, 15681, 15682, 15683, 15684, 15685, 15686, 15687, 15688, 
15689, 15690, 15691, 15692, 15693, 15694, 15695, 15696, 15697, 
15698, 15699, 15700, 15701, 15702, 15703, 15704, 15705, 15675, 
15676, 15677, 15678, 15679, 15680, 15681, 15682, 15683, 15684, 
15685, 15686, 15687, 15688, 15689, 15690, 15691, 15692, 15693, 
15694, 15695, 15696, 15697, 15698, 15699, 15700, 15701, 15702, 
15703, 15704, 15705), class = "Date"), year.month = structure(c(12L, 
12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 
12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 
12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 
12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 
12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 
12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 
12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 
12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 
12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 
12L, 12L, 12L, 12L, 12L, 12L), .Label = c("Jan 2012", "Feb 2012", 
"Mar 2012", "Apr 2012", "May 2012", "Jun 2012", "Jul 2012", "Aug 2012", 
"Sep 2012", "Oct 2012", "Nov 2012", "Dec 2012"), class = "factor"), 
    DOW = structure(c(7L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 1L, 2L, 
    3L, 4L, 5L, 6L, 7L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 1L, 2L, 3L, 
    4L, 5L, 6L, 7L, 1L, 2L, 7L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 1L, 
    2L, 3L, 4L, 5L, 6L, 7L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 1L, 2L, 
    3L, 4L, 5L, 6L, 7L, 1L, 2L, 7L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 
    1L, 2L, 3L, 4L, 5L, 6L, 7L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 1L, 
    2L, 3L, 4L, 5L, 6L, 7L, 1L, 2L, 7L, 1L, 2L, 3L, 4L, 5L, 6L, 
    7L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 
    1L, 2L, 3L, 4L, 5L, 6L, 7L, 1L, 2L), .Label = c("Sun", "Mon", 
    "Tue", "Wed", "Thu", "Fri", "Sat"), class = "factor"), variable = structure(c(1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
    3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
    3L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
    4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 
    4L, 4L, 4L), .Label = c("On Duty to Departure", "Departure to Arrival", 
    "Arrival to Off Duty", "Departure to Off Duty"), class = "factor"), 
    value = c(NA, 1, 1.83333333333333, 3, 2, 1.38333333333333, 
    NA, NA, 1, 1.61666666666667, 1.1, 3.5, 1.53333333333333, 
    NA, NA, 5.5, 3, 1.35, 3.5, 3.5, NA, NA, 1.78333333333333, 
    NA, NA, 0.75, 1.45, NA, NA, 1.13333333333333, NA, NA, NA, 
    0.0666666666666667, 0.0833333333333333, NA, 0.183333333333333, 
    NA, NA, NA, 0.466666666666667, 0.2, 0.35, 0.383333333333333, 
    NA, NA, 0.133333333333333, 0.0166666666666667, NA, 0.0166666666666667, 
    0.183333333333333, NA, NA, 0.2, NA, NA, 0.0166666666666667, 
    0.75, NA, NA, 0.1, NA, NA, NA, 9.41666666666667, 7.83333333333333, 
    NA, 7.61666666666667, NA, NA, NA, 9.3, 7.98333333333333, 
    7.25, 7.8, NA, NA, 4.41666666666667, 8, NA, 6.5, 4.08333333333333, 
    NA, NA, 3.71666666666667, NA, NA, 10.1666666666667, 9.46666666666667, 
    NA, NA, 6.7, NA, NA, 10.4666666666667, NA, NA, 7.95, NA, 
    NA, NA, 6.06666666666667, NA, NA, NA, NA, NA, NA, NA, NA, 
    6.23333333333333, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
    NA, NA, NA), day = c("01", "02", "03", "04", "05", "06", 
    "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", 
    "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", 
    "27", "28", "29", "30", "31", "01", "02", "03", "04", "05", 
    "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", 
    "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", 
    "26", "27", "28", "29", "30", "31", "01", "02", "03", "04", 
    "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", 
    "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", 
    "25", "26", "27", "28", "29", "30", "31", "01", "02", "03", 
    "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", 
    "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", 
    "24", "25", "26", "27", "28", "29", "30", "31")), .Names = c("Date", 
"year.month", "DOW", "variable", "value", "day"), row.names = c(336L, 
337L, 338L, 339L, 340L, 341L, 342L, 343L, 344L, 345L, 346L, 347L, 
348L, 349L, 350L, 351L, 352L, 353L, 354L, 355L, 356L, 357L, 358L, 
359L, 360L, 361L, 362L, 363L, 364L, 365L, 366L, 702L, 703L, 704L, 
705L, 706L, 707L, 708L, 709L, 710L, 711L, 712L, 713L, 714L, 715L, 
716L, 717L, 718L, 719L, 720L, 721L, 722L, 723L, 724L, 725L, 726L, 
727L, 728L, 729L, 730L, 731L, 732L, 1068L, 1069L, 1070L, 1071L, 
1072L, 1073L, 1074L, 1075L, 1076L, 1077L, 1078L, 1079L, 1080L, 
1081L, 1082L, 1083L, 1084L, 1085L, 1086L, 1087L, 1088L, 1089L, 
1090L, 1091L, 1092L, 1093L, 1094L, 1095L, 1096L, 1097L, 1098L, 
1434L, 1435L, 1436L, 1437L, 1438L, 1439L, 1440L, 1441L, 1442L, 
1443L, 1444L, 1445L, 1446L, 1447L, 1448L, 1449L, 1450L, 1451L, 
1452L, 1453L, 1454L, 1455L, 1456L, 1457L, 1458L, 1459L, 1460L, 
1461L, 1462L, 1463L, 1464L), class = "data.frame")

## Old code - Correct order + warning
ggplot(data = data.set,
       aes(x = day,
           y = value,
           fill = variable)) +
    geom_bar(colour = 'black') +
    ylab('Avg Time (hrs)') +
    xlab('Day of the Month') +
    guides(fill = guide_legend(title = ""))

## Order is now broken
ggplot(data = data.set,
       aes(x = day,
           y = value,
           fill = variable)) +
    geom_bar(colour = 'black', stat='identity') +
    ylab('Avg Time (hrs)') +
    xlab('Day of the Month')

## Error with position='fill'
ggplot(data = data.set,
       aes(x = day,
           y = value,
           fill = variable)) +
    geom_bar(colour = 'black', stat='identity', position='fill') +
    ylab('Avg Time (hrs)') +
    xlab('Day of the Month') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T22:22:51.187

我认为这是一个已知错误的示例： [https ://github.com/hadley/ggplot2/issues/721](https://github.com/hadley/ggplot2/issues/721)

要解决它并获得原始排序，请添加`order`美学：

```
ggplot(data = data.set,
       aes(x = day,
           y = value,
           fill = variable,
           order = variable)) +
    geom_bar(colour = 'black', stat='identity') +
    ylab('Avg Time (hrs)') +
    xlab('Day of the Month') 
```

# java - java中是否可以嵌套单例？

> ID：14389065
> 
> 赞同：2
> 
> 时间：2013-01-17T22:11:28.117
> 
> 标签：java, singleton, nested-class

我惊讶地发现嵌套类的私有构造函数仍然可以从嵌套类中调用。例如：

```
 public class A{
      public void foo(){
           //private constructor of B
           //can be called from A
           B b = new B();
      }

      //nested class
      public static class B{
          private B(){
          }
      }
 } 
```

这是否意味着没有办法在嵌套类上强制执行单例模式？还是我在这里遗漏了一些基本的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:19:15.743

不仅仅是构造函数，任何私有字段或方法都可以访问：

```
public class Main {

    public static void main(final String[] args) {
        final B b = new B();
        b.whut();
    }

    public static class B {
        private B() {
            System.out.println("hey");
        }

        private void whut() {
            System.out.println("wut?");
        }
    }

} 
```

外部类可以访问其嵌套类的私有字段：

[http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:22:26.200

> 这是否意味着没有办法在嵌套类上强制执行单例模式？

无论如何，在 Java 中实现单例（反）模式是很困难的。`enums`提供了一个好方法，它们也可以使用嵌套：

这是否意味着没有办法在嵌套类上强制执行单例模式？

```
enum Outer {
    O;
    enum Inner { I }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T22:26:14.237

> 这是否意味着没有办法在嵌套类上强制执行单例模式？

这取决于您所说的“强制执行”是什么意思。

如果您的意思是，您能否让编译器防止`foo`破坏您的“单例”不变量 - 然后“否”。（或者至少，除非您首先将“B”设为非嵌套类......）

但是，外部类和嵌套类都定义在同一个源文件中，应该被视为同一个抽象单元的一部分。（事实上​​，`A.foo()`can call的事实`A.B.B`意味着后者在非常真实的意义上是正确的。）因此，`A`维护整个抽象的不变量是 off 和其中的一切的责任……包括`B`.

从*这个*角度来看，打破不变量的`foo`方法与打破不变量的非嵌套“单例”类的假设方法没有什么不同。例如

```
public Single {
    private static Single s = new Single();
    public static Single getInstance() { return s; }
    private Single() { ... }

    public void foo() {
        Single ss = new Single();  // breaks the invariant!!
        ...
    }
} 
```

请注意问题......在这两种情况下......抽象正在破坏*它自己的*不变量。

# linux - 使用 crontab 执行时，Ruby 脚本提取错误的值

> ID：14389069
> 
> 赞同：1
> 
> 时间：2013-01-17T20:56:43.103
> 
> 标签：linux, ruby, crontab

操作系统：亚马逊 Linux

我有一个连接到站点的 Ruby 脚本，然后它使用 XPath 请求搜索**div**块，我要解析的统计计数器在哪里。

然后它将来自站点的数字与数据库中的当前值进行比较，如果数字增加，它会向我发送一封电子邮件。

问题是，然后我从它工作的当前目录运行脚本。

1.  该脚本解析包含值的文本块。
2.  我用这样的正则表达式提取值 (/\d/) ...

But when it the script executes by crontab it gets some strange value like **...041704300440043504330438044104420440043804400430432043004304304304304304404370430432043004420435043043504390447043504400435043704320430044804430430...**

我不知道如何调试它，因为当我手动运行脚本时它可以工作，但是当由 crontab 执行时会失败并出现奇怪的值。

该站点中的文本是俄语，使用*Windows-1251*编码。也许这有什么问题。我`# encoding: utf-8`在 .rb 文件中设置了 , 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T04:17:14.143

这可能是环境问题，可能包括错误的路径等。您可以将命令行中的 ENV 与 crontab 启动时的环境进行比较。

尝试：

```
ruby -rpp -e 'pp ENV' > /tmp/crontab_env.out 
```

从 crontab，然后：

```
ruby -rpp -e 'pp ENV' > /tmp/cmd_env.out 
```

从命令行，然后：

```
vimdiff /tmp/*env.out 
```

或使用常规编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:31:15.190

cron 作业的问题通常是由错误的环境引起的。该脚本可能取决于在您启动交互式 shell（通过 或类似方式）时设置的环境变量`~/.profile`，`~/.bashrc`而不是在您的程序直接启动时（通过 cron）设置的环境变量。

通过键入获取环境变量及其当前值的列表`env`。添加一个简单运行的 cron 作业`env`。比较输出并消除，直到找到罪魁祸首。

我想说`LANG`和朋友是一个很好的起点。通过键入获取与语言和编码相关的环境变量列表`locale`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T22:07:53.827

如果您使用的是 RVM，请注意它通常仅适用于交互式 shell。RVM 手册中有一整节专门讨论了这个主题：[RVM: Ruby Version Manager - Using Cron with RVM](https://rvm.io/integration/cron/)

这可能只是使用了错误的 Ruby 版本（包括其 Gems）的问题。尝试删除脚本中的 hashbang 行，并在 crontab 中这样调用它：

```
1 0  * * * /usr/local/rvm/bin/ruby-1.9.3-p362 /path/to/script.rb 
```

这应该确保使用 Ruby 二进制文件加载了正确的环境。

如果实际的问题是 RVM 甚至不能用于非交互式脚本，你还可以更进一步，做你的 shell 在加载 RVM 时所做的事情——向右滚动，这是一条大线：

```
1 0 * * * /bin/bash -l -c 'source "$HOME/.rvm/scripts/rvm" && rvm use 1.9.3-p362 && ruby /path/to/script.rb 
```

# php - 计算用户输入的长度以防止在div中输出时溢出

> ID：14389082
> 
> 赞同：0
> 
> 时间：2013-01-17T22:12:31.707
> 
> 标签：php

我正在读取我的用户通过 PHP 输入的字符串，我需要将它吐回到 div 标签中。此 div 标签的宽度为 500 像素。如果用户输入的单词过长，该单词会溢出容器。如果用户输入两个几乎是两个长的单词，它将分成两行。

我的问题是如何确定一个单词是否太长？我尝试过设置字符数，这不是长度的准确表示，因为某些字符（即 W 和 I）具有不同的宽度。有解决办法吗？

我当前的算法是将用户输入分成块，每块 40 个字符，然后输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:15:47.887

通常你不应该将 PHP 用于这样的事情。改用 CSS：

```
.break { word-wrap: break-word; } 
```

会成功的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T22:17:51.797

如果你仍然想实现你的字符计数机制，你可以；你只需要确保你的文本是等距的（相同的宽度）。为此，您只需`<pre></pre>`在文本块周围添加；这也可以通过`<code></code>`and来完成，`<tt></tt>`但是如果你想要一个简单的 CSS 解决方案，你可以使用。

```
<style>
.myclass { word-wrap:break-word; }
</style>
<p class="myclass">some text</p> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-17T22:16:51.723

您可以使用 <wbr> 标记简单地将大于 20 个字符的单词分解成块。这里有更多信息： http: [//motyar.blogspot.co.il/2011/07/tell-browser-they-may-break-your.html](http://motyar.blogspot.co.il/2011/07/tell-browser-they-may-break-your.html)

# sql - 立即执行 PL/SQL

> ID：14389083
> 
> 赞同：0
> 
> 时间：2013-01-17T22:12:34.077
> 
> 标签：sql, plsql

假设 sStorecode 是：00020

以下只是执行 select 语句以获取表 STOREINFO 中另一个数据库 STORE 的 accountid，例如连接到 p008081（其中 008 是 sStorecode 的子字符串，081 是我在下面加入的内容），但我收到错误某种原因（无效的 SQL 语句），有人可以帮忙吗？

```
EXECUTE IMMEDIATE 'select AccountID from STOREINFO@STORE.p'||substr(sSTORECODE,3,3)||'081'; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:38:15.713

EXECUTE IMMEDIATE 是一个 PL/SQL 命令。在 PL/SQL 中，SELECT 语句的结果需要到某个地方。但它是你的声明，你没有指定它应该去哪里。

因此，如果您期望单行，您可以编写：

```
EXECUTE IMMEDIATE 'select AccountID from STOREINFO@STORE.p'||substr(sSTORECODE,3,3)||'081'
    INTO l_account_id; 
```

`l_account_id`是一个本地 PL/SQL 变量。

如果你期望多行，你可以使用

```
EXECUTE IMMEDATE ... BULK COLLECT INTO l_account_tab; 
```

`l_account_tab`是一个 PL/SQL 集合变量。

或者，如果您想使用游标，您可以编写：

```
 OPEN account_id_cv FOR 'select AccountID from STOREINFO@STORE.p'||substr(sSTORECODE,3,3)||'081'; 
```

`account_id_cv`是一个 REF CURSOR 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:31:05.830

似乎应该是这样的：

```
'select AccountID from STORE.STOREINFO WHERE sStorecode = ''p'||substr(sSTORECODE,3,3)||'081'''; 
```

# asp.net - asp.net 4 c# 视频

> ID：14389087
> 
> 赞同：-3
> 
> 时间：2013-01-17T22:12:47.347
> 
> 标签：asp.net

嘿，我在 youtube 上环顾四周，试图找到关于 asp.net 4 c # 网站教程的好剪辑，但不幸的是我没有找到任何好的视频，所有视频都大约 1-2 岁。请需要帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:21:01.453

ASP.NET 网站有大量免费视频：

[http://www.asp.net/web-forms/videos/net-4](http://www.asp.net/web-forms/videos/net-4)

（您也可以浏览其他类别）

付费 - Multiplesight 有一些很棒的视频：

[http://www.pluralsight.com/training/Courses](http://www.pluralsight.com/training/Courses)

# android - 一般的android布局问题

> ID：14389092
> 
> 赞同：1
> 
> 时间：2013-01-17T22:12:58.480
> 
> 标签：android, android-layout

我应该首先说我是 android 开发的新手，尽管我对 java 的基础知识有很好的理解。话虽如此，我通常通过实践来学得最好，所以我正在为我工​​作的校园杂志编写一个应用程序，并尝试通过制作过程来学习。

屏幕顶部是一个带有两个标记为“问题”和“部分”的微调器的栏，允许用户过滤显示的文章仅显示相应问题/部分中的文章。屏幕的其余部分由我将描述为垂直方向的画廊占据，它在与之关联的图像下方显示每个故事的标题。然后，用户可以通过滚动“图库”来“翻阅”杂志中的故事。选择其中一个故事将在 ViewPager 中打开完整的故事。

在这一点上，我有两个主要问题：

1) 最初，我计划将“问题”和“部分”微调器放在 ActionBar 中。但是，据我了解，ActionBars 不会显示给使用 Android 2.x 的用户。鉴于这些元素对于导航应用程序至关重要，并且大多数 android 用户仍在使用 2.x，这似乎是不可接受的。结果，我使用了一个无 ActionBar 的主题，并且基本上通过我的主要活动顶部的线性布局来绘制我自己的操作栏。我对 ActionBars 不显示在 Android 2.x 设备上的理解是否正确？如果是这样，我将我的“工具栏”作为主要活动的一部分是否正确，还是有更好的方法来实现它？（也许作为一个片段？我还不太明白它们是如何适应的......）。

2）我知道画廊小部件已被弃用，所以显然我不会使用它。哪些替代小部件最能实现相同的视觉目标，即让用户通过滚动小部件来“翻阅”杂志中的故事？有没有办法为 ListView 设置动画以实现这一目标？

再次，任何帮助 - 特别是帮助我理解这里涉及的更广泛问题的帮助 - 将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:16:37.710

1.  您可以使用 ActionBarSherlock - 它与 Android v 1.6 兼容。
2.  ViewPager 可能会帮助你

# iphone - 为什么我的方法会收到“'NSDecimalNumber' 的不可见 @interface 消息声明选择器”？

> ID：14389097
> 
> 赞同：0
> 
> 时间：2013-01-17T22:13:17.637
> 
> 标签：iphone, objective-c, xcode, class-method

我必须在这里遗漏一些简单的东西。无论如何，我一开始只是制作一个常规函数，

```
NSDecimalNumber* aa(NSMutableString *string)
{code} 
```

然后我会通过按下这样的按钮来调用它：

```
- (IBAction)parse:(id)sender {
string1=[NSMutableString stringWithFormat:@"%@", screen.text];
NSDecimalNumber *output=aa(string1);} 
```

（screen.text 来自标签）但是，在它的中途，我意识到该函数不能使用我的 viewcontroller.m 类的其余部分中的变量（反之亦然），所以我决定将该函数实现为代替方法。这就是我所做的。首先，我将它添加到 viewcontroller.h，

```
+ (NSDecimalNumber*) aa:(NSMutableString*) string;
@property (nonatomic, strong) NSDecimalNumber *number; //the number I'm working with 
```

合成了我的属性，将我的函数声明更改为这个，

```
+ (NSDecimalNumber*) aa:(NSMutableString*) string 
```

并试图这样称呼它，

```
NSDecimalNumber *output=[[NSDecimalNumber alloc] aa:string1]; 
```

通过这种尝试，我得到了两个错误——“没有可见的@interface for 'NSDecimalNumber' 声明了选择器'aa，'”和“在类方法中访问的实例变量'number'”。

所以我再次尝试了一个实例方法。将 +'s 更改为 -'s 并改为使用

```
NSDecimalNumber *output;
[output aa:string1]; 
```

这纠正了第二个错误，但没有纠正第一个错误。我无法弄清楚为什么它无法识别@interface 中的方法。此外，这些并不是我尝试更改的唯一内容——我一直在尝试多种方法来调用该方法，但似乎没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:15:53.347

这个函数调用：

```
NSDecimalNumber *output=[[NSDecimalNumber alloc] aa:string1]; 
```

..正在尝试`aa`调用`NSDecimalNumber`. 我认为这不是您想要的，您的`aa`方法不是*您*班级的成员吗？此外，您没有调用类初始化程序（尽管您不需要，因为您的方法是静态的，只要它的定义以 开头`+`）：

```
// MyClass method definition
+ (NSDecimalNumber*) aa:(NSMutableString*) string

// Called with
NSDecimalNumber *output=[MyClass aa:string1]; 
```

**- 更新 -**

要解决“实例变量”错误，您需要将该方法设为实例方法。将定义更改`+`为`-`并这样称呼它：

```
// MyClass method definition
- (NSDecimalNumber*) aa:(NSMutableString*) string

// Call it like this _if calling from within MyClass only_ (hence, "self")
NSDecimalNumber *output = [self aa:string]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:17:40.127

如果要向其中添加方法`NSDecimalNumber`，则需要使用[类别](http://en.wikipedia.org/wiki/Objective-C#Categories)。您的代码向视图控制器子类添加了一个方法。

# c - 是否有一个示例说明何时需要空指针才能在 C 中正确执行程序？

> ID：14389100
> 
> 赞同：-4
> 
> 时间：2013-01-17T22:13:34.473
> 
> 标签：c, pointers

什么是需要使用空指针才能正确执行的应用程序示例？简单地检查空指针并进行测试不算数。这个例子应该是 C 程序员“常用的”。

经过一番思考，我有一个可能的例子，但我不想影响反应（还）。

编辑：这个问题是一个编程工作的面试，需要知识，但不需要 C 中的上帝般的技能。答案不会是该语言的一些深奥方面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T22:18:41.197

`execvp`系列函数期望参数列表以空指针终止。例如，

```
 execvp("/bin/ls", arguments); 
```

这里`arguments`应该以NULL结尾。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T22:20:34.873

该函数`strtok()`在第二次和后续迭代中依赖于 NULL；其表现较好的亲戚`strtok_r()`和`strtok_s()`.

* * *

重点稍有不同：

*   字符串搜索函数，例如`strchr()`和`strstr()`在找不到您要求他们查找的内容时返回 NULL 指针。

*   当分配失败时，内存分配函数返回 NULL 指针。

*   该`fopen()`函数在打开文件失败时返回一个 NULL 指针。

*   该`opendir()`函数在打开目录失败时返回一个 NULL 指针。

注意到这里的主题了吗？NULL 指针通常作为错误指示返回。这是否算作“只是检查”也许更值得商榷。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T22:32:48.520

链接列表。

```
struct node
{
   int data;
   node* next;
} 
```

最后一个指针总是必须是`NULL`，对吧？如果不是，程序将无法正确执行。这仍然可以算作测试，但它是正确执行程序所必需的。想法？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T22:23:41.717

NULL 值显然对于指示某个值的“结束”或“不存在”非常有用。例如，函数中的可选参数由 NULL 表示。或“尚未分配...”。

但是 NULL 值作为参考没有用，除了比较之外，在不需要指针时使用 NULL 值或赋值是不正确的[显然，假设它已被正确释放]。

我正在处理一段在操作系统启动早期运行的代码 - 在代码的后期运行中，它需要在某些地方具有当前任务。但在系统正常启动之前，没有当前任务。所以我需要指出“没有当前任务”。我使用 NULL 指针 [然后如果指针为 NULL 则访问相关的“保留”数据结构] 和一个变量来检查是否已创建任务。[这很简单，但概念适用]。

从技术上讲，在 MS-DOS（或“实模式”中的其他 8086）中，NULL 指针也将用于设置除以零的向量 [这是“向量零”，向量表位于地址零 - 所以空值]。但是由于现代操作系统[通常]在其他地方有中断向量表，并且零地址通常受到读/写操作的保护，这不再是指针的“有效使用”。当然，其他一些嵌入式系统可能仍然使用地址零来表示“有意义”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T22:34:14.373

在我的头顶上：

*   使用 in`strtok`获取第一个令牌之后的连续令牌；
*   终止`exec*`函数中的参数列表
*   用于`realloc`初始分配

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T22:40:29.223

`NULL`可以安全地传递给`free()`，因此在以下代码`NULL`中可能会或可能不会获得 -ed 的情况下，初始化指针通常很有用。`malloc()`然后，您可以安全地调用`free()`，例如在函数的末尾，无论指针是否实际使用，例如

```
int * p = NULL; // NB: without this initialisation we would need additional logic
                //     to know whether to call free(p) or not later...
...

if (...)
{
    ...
    if (...)
    {
       ...
       p = malloc(42);
       ...
    }
    ...
}

...

free(p);         // free allocated memory, or no-op if p == NULL 
```

# javascript - 本地加载 JSON 和使用 coffeescript 和 jquery 在服务器上加载 JSON 时数据对象不同

> ID：14389102
> 
> 赞同：0
> 
> 时间：2013-01-17T22:13:50.563
> 
> 标签：javascript, jquery, coffeescript

我使用以下咖啡脚本加载 json

```
 $.ajax jsonPath,
        success  : (data, status, xhr) =>

            console.log("yea "+data)
            this.currentIndex = 0;
            this.imagesVO = data.images
            this.imageManager = new ImageManager(data.images)
            this.imagesCount = this.imagesVO.length
            this.switchToImage(this.currentIndex)

        error    : (xhr, status, err) ->
            $('#imageHolder').html("problem loading the json file, </br>make sure you are running this on your local server")
        complete : (xhr, status) ->
            #cconsole.log("comp") 
```

json就是这样

```
 {
   "showName": "aaa", 
   "galleryName": "Season 3 Preview", 

   "images": [
    {
       "title": "Les goes shopping for a new car",
       "url": "images/hcp_stills-0.jpeg",  
       "description": "Sailboats on the Charles River" 
   }, 
   {
       "title": "Les goes shopping for a new car",
       "url": "images/hcp_stills-1.jpeg",    
       "description": "Sailboats on the Charles River" 
    },
   {
       "title": "Les goes shopping for a new car",
       "url": "images/hcp_stills-2.jpeg",   
       "description": "Sailboats on the Charles River" 
    }]
 } 
```

在本地测试时，我像这样从 json 中获取图像数组，它可以工作 this.imageManager = new ImageManager(data.images)

但是，在服务器上进行测试时，chrome 抱怨 data.images 未定义，即使 json 加载正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:16:00.553

您需要指定您期望 json 返回。

```
 success  : (data, status, xhr) =>

        console.log("yea "+data)
        this.currentIndex = 0;
        this.imagesVO = data.images
        this.imageManager = new ImageManager(data.images)
        this.imagesCount = this.imagesVO.length
        this.switchToImage(this.currentIndex)

    dataType: "json"

    error    : (xhr, status, err) -> 
```

如果服务器以正确的标头响应，它可能会检测到它是 json 并为您解析它，但是直接指定它会更安全。

# joomla - Joomla >1.7 从浏览器隐藏日志消息

> ID：14389103
> 
> 赞同：3
> 
> 时间：2013-01-17T22:13:52.863
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla3.0

我正在为 Joomla 开发一个扩展！目前我正在尝试使其与 3.0 兼容 - 与 3.0 一样，日志记录发生了一些变化（*）。基于[这个相关问题](https://stackoverflow.com/questions/7586142/logging-in-joomla-platform-11-jlog)的答案，我当前的代码如下所示：

```
JLog::addLogger(array(
    'text_file' => 'plg_system_myplg.log.php'
)); 
JLog::add('blah blah log msg'); 
```

问题是日志也会转到显示给用户的消息 - 我想防止这种情况，我希望日志消息只转到日志文件。我认为这与`JLog::add`作为第三个（可选）参数的“类别”有关，但我不知道要传递什么？

任何人都可以告诉我如何隐藏消息/或告诉我我是否在正确的类别中以及我应该使用什么值？

谢谢！

(*) 到目前为止，它实际上已经在 1.7 中发生了变化，但是在返回时调用 addEntry 的旧方法`JLog::getInstance(...)`似乎已从 2.5 删除到 3.0。

编辑：认为我现在找到了方法；使用：

```
JLog::addLogger(array(
    'text_file' => 'plg_system_myplg.log.php',
    JLog::ALL,
    'myplg'
)); 

JLog::add('blah blah log msg', JLog::INFO, 'myplg'); 
```

我所有的日志条目只进入我的日志文件（而不是显示给用户的消息）。但是，我也收到了一些弃用警告——一个关于我的代码，还有一些不相关的警告：

```
WARNING deprecated  JAccess::getActions is deprecated. Use JAccess::getActionsFromFile or JAcces::getActionsFromData instead.
WARNING deprecated  JSubMenuHelper::getEntries() is deprecated. Use JHtmlSidebar::getEntries() instead.
WARNING deprecated  JSubMenuHelper::getFilters() is deprecated. Use JHtmlSidebar::getFilters() instead.
WARNING deprecated  JSubMenuHelper::getAction() is deprecated. Use JHtmlSidebar::getAction() instead. 
```

不知道该怎么做-为什么它们会出现在我的日志文件中，它们不应该转到默认的 error.log 文件而不是我的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T11:18:10.967

这就是我正在使用的，适用于 Joomla 1.5 - 3.2：

```
if(version_compare(JVERSION,'1.7.0','ge')) {
   jimport('joomla.log.log'); // Include the log library (J1.7+)   
   $priorities = JLog::ALL ^ JLog::WARNING; // exclude warning (because of deprecated)
   // In J3.0 we need to ensure that log messages only go to our file, thus use the categories (already supported in J2.5)      
   if(version_compare(JVERSION,'2.5.0','ge')) {
      $logCategory = 'com_mycomponent';
      JLog::addLogger(array('text_file' => $logFileName), $priorities, $logCategory);
      JLog::add($msg, JLog::INFO, $logCategory);
   }else{
      JLog::addLogger(array('text_file' => $logFileName), $priorities);
      JLog::add($msg, JLog::INFO);
   }
} else {
   // Joomla! 1.6 and 1.5
   jimport('joomla.error.log'); // Include the log library
   $log = &JLog::getInstance($logFileName);
   $log->addEntry(array('comment' => $msg, 'level' => 'INFO'));   
} 
```

这显示了获取已弃用消息的技巧。

是的，您必须为您的消息添加一个类别，以确保它们不会显示为系统消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:29:14.890

采用

```
 new JException('Something happened'); 
```

这只会将其添加到调试日志中，但不会显示任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:56:35.440

看来，Joomla 3.0 没有启用默认记录器。在 Joomla 3.0.3 中也是如此。默认情况下，没有任何东西打开登录 - 甚至是调试模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T00:16:20.310

最后，我想我已经解决了我的问题，出现了不相关的日志条目。

仔细查看[addLogger 函数的 API 文档后](http://api.joomla.org/cms-2.5/classes/JLog.html)发现，第三个参数`$categories`应该是一个类别数组，将使用该日志。

[这与撰写本文时最新的http://docs.joomla.org/Using_JLog](http://docs.joomla.org/Using_JLog)版本相矛盾，其中给出了单个类别而不是数组。

将我的调用更改`addLogger`为使用数组，如下所示：

```
JLog::addLogger(array(
    'text_file' => 'plg_system_myplg.log.php',
    JLog::ALL,
    array('myplg')
)); 
```

并保持我的手指交叉，这将解决问题！

编辑：不幸的是，即使这仍然不能解决我的问题 - 仍然有不相关的条目:(。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-26T15:27:00.670

我找到了答案..希望这个脚本能让你理解..我已经构建为 function 。此代码适用于 joomla 3。希望适用于 joomla 2

```
<?php 
function logWrite($level, $values, $file='%s.php',$path='',$showOnTop=0,
$option='',$component=''){
/****
jlog Joomla 3.4
created by:gundambison (2015.04.26). 
THX: hbit@stackoverflow
****/
    jimport('joomla.log.log'); 
    $level=strtoupper($level);  
//You can change this com_name
    $component= $component==''? 'com_gundambison': $component;
    $date= date("Ymd");
    $filename= sprintf($file, $date);
    $format= $option=='' ?"{TIME}\t{CLIENTIP}\t{CATEGORY}\t{MESSAGE}": $option;

// create options and text
    $txt = is_array($values)? json_encode($values): $values;
    $options = array('text_file' => $filename,'text_entry_format'=>$format );
    $options['text_file_path']=$path==''?'logs': $path; 
    JLog::addLogger ($options);
/*
if you want the error to show in your page. just see the different 
*/  
    if($showOnTop==1){
        JLog::add("$txt");
    }
    else{ 
        JLog::add("$level\t$txt",$level,$component);
    }
} 
```

# ruby - 没有表格的 Rails 模型

> ID：14389105
> 
> 赞同：40
> 
> 时间：2013-01-17T22:14:01.250
> 
> 标签：ruby, ruby-on-rails-3, model

我想为让我们说颜色创建一个选择列表，但不想为颜色创建一个表。我在任何地方都看到过，但在谷歌上找不到。

我的问题是：如何在没有数据库表的情况下将颜色放入模型中？

还是有更好的rails方式来做到这一点？

我见过有人直接在模型中放置了一个数组或一个哈希，但现在我找不到了。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-01-17T22:21:45.713

```
class Model

  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Naming

  attr_accessor :whatever

  validates :whatever, :presence => true

  def initialize(attributes = {})
    attributes.each do |name, value|
      send("#{name}=", value)
    end
  end

  def persisted?
    false
  end

end 
```

attr_accessor 将创建您的属性，您将使用 initialize() 创建对象并设置属性。

持久化的方法将告诉没有与数据库的链接。你可以找到这样的例子： [http ://railscasts.com/episodes/219-active-model?language=en&view=asciicast](http://railscasts.com/episodes/219-active-model?language=en&view=asciicast)

这将解释你的逻辑。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-01-20T07:32:47.033

2013 年的答案很好，但**自从 Rails 4 以来**，所有与数据库无关的特性`ActiveRecord`都被提取到`ActiveModel`. 此外，还有一个很棒的[官方指南](http://guides.rubyonrails.org/active_model_basics.html#model)。

您可以根据需要包含任意数量的模块，也可以包含尽可能少的模块。

例如，您只需要`include ActiveModel::Model`并且可以放弃这样的`initialize`方法：

```
def initialize(attributes = {})
  attributes.each do |name, value|
    send("#{name}=", value)
  end
end 
```

只需使用：

```
attr_accessor :name, :age 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-17T22:19:56.793

最简单的答案就是不要从 ActiveRecord::Base 子类化。然后你就可以编写你的目标代码了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-05-04T15:41:59.797

在 Rails 6 中对我有用的是：

```
class MyClass
  include ActiveModel::Model

  attr_accessor :my_property
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-12T16:46:22.473

如果您需要一个没有关联表的模型的原因是创建一个抽象类，真实模型继承自 -*`ActiveRecord`*支持：

```
class ModelBase < ActiveRecord::Base
  self.abstract_class = true
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T22:20:16.003

如果您想要一个选择列表（它不会演变），您可以在您的方法中定义一个`ApplicationHelper`返回列表的方法，例如：

```
 def my_color_list
   [
     "red",
     "green",
     "blue"
   ]
 end 
```

# java - 使用 CSV 更新 TableView

> ID：14389109
> 
> 赞同：0
> 
> 时间：2013-01-17T22:14:11.627
> 
> 标签：java, javafx-2, scenebuilder

很像[这个问题](https://stackoverflow.com/questions/13332212/javafx-tableview-dynamic-column-and-data-values)，我正在尝试更新一个`TableView`in `JavaFX`。我采用了解决方案，使用`DataFX`.

我的代码：

```
File file = new File(path);
if(file.exists() && file.canRead()) {
    DataSourceReader dsr1 = new FileSource(file);
    String[] columnsArray = {"firstName", "lastName"}; 
    CSVDataSource ds1 = new CSVDataSource(dsr1, columnsArray);
    System.out.println("CSV : " + ds1.getData().size());  // outputs 0

    //Below is commented out since I don't have data : source of the error
    //tblAthleteList.setItems(ds1.getData());
    //tblAthleteList.getColumns().addAll(ds1.getColumns());
} 
```

这是我的测试`.csv`文件的视图：

```
firstName, lastName
first, last
test, tester 
```

**我正在使用`JavaFX 2`和`DataFX 1.0`构建`e(fx)clipse`**

### 编辑

稍微更改了代码以使用`FileSource(File f)`构造函数来查看这是否会改变任何内容。原来我正在尝试从 CSVDataSource 打印一些东西，但我总是得到一个`NullPointerException`. 因此假设`CSVDataSource`没有得到任何数据。从示例中我可以发现这是正确完成的。我可以使用简单`BufferedReader`的循环读取文件。

### 编辑 2

编辑了问题...我现在指定错误在于没有数据被`CSVDataSource`从`.csv`文件中提取。该行`ds1.getData().size()`返回`0`。发布了一个`.csv`我正在使用的非常简单的文件。 `EOL`由`CR`+`LF`和编辑组成`Notepad++`（没有`Excel`多余的字符）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:13:25.360

确保列名`columnsArray`与 CSV 文件中的列名完全相同（区分大小写）。

当我将列名`year`放在代码中但在我的 csv 文件中时，我得到了类似的异常`Year`。

**根据问题中的编辑更新：**

删除文件之间`,`和`lastName`文件中的空格或`" lastName"`作为列名放在代码中:)

# javascript - 是否可以从 javascript 调用 iOS UIAlertView？

> ID：14389114
> 
> 赞同：0
> 
> 时间：2013-01-17T22:14:20.693
> 
> 标签：javascript, iphone, ios, uialertview

同样的老故事......设计师想要一个与标准javascript确认略有不同的对话框。在这种情况下，观众只有 iOS，所以我想知道我是否可以使用 javascript 来调用本机 UIAlertView 框（并相应地对其进行自定义）。如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:22:03.070

在您的 html 页面中使用自定义 URL 方案，例如 alertview://somemessage。使用 href 或 javascript 在 Web 视图中打开该 URL，就像打开任何其他链接一样。

现在在您的 UIWebView 委托中，添加以下方法：

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if ([[[request URL] scheme] isEqualToString:@"alertview"]) {
         // display UIAlertView here
    }
    return YES;
} 
```

您可以通过查看 NSURL 的 path 属性来访问消息（如果需要）。

# android - 使 ADT Code Assist 像 Xcode 自动完成一样工作

> ID：14389116
> 
> 赞同：5
> 
> 时间：2013-01-17T22:14:28.433
> 
> 标签：android, eclipse, autocomplete, adt, code-assist

有没有办法设置 ADT，以便在我开始输入后立即启动“代码辅助”/自动完成功能，而无需按 Ctrl + 空格键？

基本上，我是一名开始使用 Android 的 iOS 开发人员，而且我已经非常习惯 Xcode 自动完成功能在您开始输入后立即启动的方式。

使用 ADT，似乎一旦我键入一个“对象”，代码辅助就会启动，但如果我想使用它来节省键入类变量的时间，我必须实际按下 Ctrl+空格键，这很烦人。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T19:50:01.517

通过这个问题找到了答案：[Eclipse 上的自动代码完成](https://stackoverflow.com/questions/6202223/auto-code-completion-on-eclipse)

基本上，默认情况下自动完成的自动激活触发器仅设置为字符“.”。

要始终使代码辅助/自动完成触发，您必须将字符串更改为：

```
.abcdefghijklmnopqrstuvwxyz 
```

在 ADT v21.xx 版本中，它位于 Preferences -> Java --> Editor --> Content Assist。

# internet-explorer-7 - JQueryUI 手风琴在嵌入父容器时在 IE7 中损坏并溢出：自动设置

> ID：14389119
> 
> 赞同：1
> 
> 时间：2013-01-17T22:14:45.887
> 
> 标签：internet-explorer-7, jquery-ui-accordion, css

**当设置了任何**父容器 div时，JQuery UI Accordion 小部件不适用于 IE7 中较长的可滚动内容`overflow:auto;`。我尝试将 Accordion 的最里面的子 div 设置为，`overflow:visible !important;`但它没有用。在 IE8、IE9、IE9 兼容模式、Chrome、FF、Opera 和 Safari 中运行良好。

在 IE7 中[测试这个小提琴。](http://jsfiddle.net/johntrepreneur/wPTRC/10/)请务必明确设置 IE 以使用“浏览器模式：IE7”和“文档模式：IE7 标准”。

怎么修？

```
<div style="overflow:auto;">
  <div id="accordion" style="overflow:visible;float:right;height:400px;width:500px;border:2px solid red;float:right;">
    <h3>Section 1</h3>
    <div>
      <script type="text/javascript">
        for (var i=0; i<10; i++)
        {
        document.write("<p>Nam enim risus, molestie et, porta ac, aliquam ac, risus. Quisque lobortis. Phasellus pellentesque purus in massa. Aenean in pede. Phasellus ac libero ac tellus pellentesque semper. Sed ac felis. Sed commodo, magna quis lacinia ornare, quam ante aliquam nisi, eu iaculis leo purus venenatis dui. </p>");
        document.write("<ul>");
        document.write("<li>List item one</li>");
        document.write("<li>List item two</li>");
        document.write("<li>List item three</li>");
        document.write("</ul>");
        }
      </script>
        </div>
        <h3>Section 2</h3>
        <div>
          <p>Cras dictum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Aenean lacinia mauris vel est. </p><p>Suspendisse eu nisl. Nullam ut libero. Integer dignissim consequat lectus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. </p>
        </div>
      </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:29:57.550

所以事实证明这是当前版本的 jqueryui 手风琴中的一个错误。
请参阅[此处的 jqueryui 错误报告](http://bugs.jqueryui.com/ticket/8977)。

# java - JTextField 数组无法编译

> ID：14389121
> 
> 赞同：0
> 
> 时间：2013-01-17T22:14:50.240
> 
> 标签：java, swing, compiler-errors, jtextfield

我正在尝试创建大量 JTextField 对象，但由于某种原因，我的代码无法编译。我已经玩了太久了，我找不到任何让编译器生气的好理由；这是我的代码，只有一个长度为 2 的数组：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

public class SUDOKU_temp extends JApplet
{
    //declare fields

    public JTextField[] fields = new JTextField[2];
    fields[0] = new JTextField();
    fields[1] = new JTextField();

    //other stuff happens down here that the compiler is ok with
} 
```

如果我只运行长度为 1 的数组的代码，我会得到完全相同的错误，它们是：

```
linux63:~demo$ ./compile
SUDOKU_temp.java:11: ']' expected
    fields[0] = new JTextField();
           ^
SUDOKU_temp.java:11: ';' expected
    fields[0] = new JTextField();
            ^
SUDOKU_temp.java:11: illegal start of type
    fields[0] = new JTextField();
              ^
SUDOKU_temp.java:11: <identifier> expected
    fields[0] = new JTextField();
               ^
SUDOKU_temp.java:11: ';' expected
    fields[0] = new JTextField();
                   ^
SUDOKU_temp.java:11: illegal start of type
    fields[0] = new JTextField();
                              ^
SUDOKU_temp.java:11: <identifier> expected
    fields[0] = new JTextField();
                               ^ 
```

我觉得这是编译器的问题，而不是代码的问题，任何有关如何调试的帮助将不胜感激。提前致谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T22:16:03.230

非声明性语句不能位于类块中。你需要放置

```
fields[0] = new JTextField();
fields[1] = new JTextField(); 
```

在构造函数、方法或静态初始化程序块内。对于这个小程序，您可以使用：

```
public void init() {
   for (int i=0; i < fields.length; i++ ) {
      fields[i] = new JTextField();
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T22:16:15.183

您不能在方法之外运行代码（除非它是声明）。您需要以某种方法或使用数组文字初始化它们。

数组字面量：

```
public JTextField[] fields ={ new JTextField(),new JTextField()}; 
```

在一个方法内：

```
public JTextField[] fields=new JTextField[2];
public void method(){
    fields[0]=new JTextField();
    fields[1]=new JTextField();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T22:20:26.893

要添加到上述内容，您可以在声明时初始化数组中的对象，如下所示：

```
public class SUDOKU_temp {

  private JTextField[] fields = {new JTextField(), new JTextField()}; 
```

# c# - C#如何获取当前类实例等价于self php

> ID：14389123
> 
> 赞同：0
> 
> 时间：2013-01-17T22:14:54.113
> 
> 标签：c#, oop, inheritance, polymorphism

假设我们有这些类：

```
class A {
    public string attr = "Class A";

    public static void getAttribute(){
         self currentClass = new self(); // equivalent to php
         Console.Write("Attribute : " + currentClass.attr);
    }
}

Class B : A {
    public string attr = "Class B";
}

B = new B();
B.getAttribute(); 
```

我想`B.getAttribute();`打印`Attribute: Class B`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:16:54.167

这基本上是不可能的。

`B.getAttribute()`编译为`A.getAttribute()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:16:23.047

我可能知道您要做什么，但我必须告诉您，这种 PHP 方法在 C# 中毫无意义。我不鼓励你使用它。

```
public class A
{
    private String attr = "Class A";

    public static String getAttribute()
    {
        return (new A()).attr;
    }
}

public class B : A
{
    private String attr = "Class B";

    public static String getAttribute()
    {
        return (new B()).attr;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T22:21:48.940

如果你问如何在 C# 中做类似的事情，我认为答案将是这样的：

```
public class A
{
    public virtual string attr 
    {       
        get { return "Class A" }
    }

    public void getAttribute(){
         Console.Write("Attribute : " + attr);
    }
}

public class B : A
{
    public override string attr 
    {       
        get { return "Class B"; }
    }
}

var b = new B();

b.getAttribute(); 
```

关于我在另一个答案中的评论，如果您需要 getAttribute 是静态的，您可以这样实现：

```
public static void getAttribute(A obj){
     Console.Write("Attribute : " + obj.attr);
} 
```

然后你会这样称呼它：

```
var b = new B();
A.getAttribute(b); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T22:27:24.593

您可以通过“this”关键字获取当前类实例。显然，您不能在静态方法中访问它，因为根据定义，静态方法在没有特定实例的上下文的情况下执行。

另一方面，要从同一个类中访问成员变量/属性/方法，您根本不需要 'this' 关键字，因为它是隐式的。

# mysql - XAMPP 的 phpMyAdmin 错误

> ID：14389124
> 
> 赞同：0
> 
> 时间：2013-01-17T22:14:55.360
> 
> 标签：mysql, sql, phpmyadmin

在使用 XAMPP for Mac 的最初几天，我成功地通过 phpMyAdmin 开始学习 MySQL。然后，它随机停止让我登录，显示以下错误：

phpMyAdmin - 错误

无法在没有错误的情况下启动会话，请检查您的 PHP 和/或网络服务器日志文件中给出的错误并正确配置您的 PHP 安装。

我检查了其他论坛，他们根本没有帮助。我对这一切都很陌生，所以我对此一无所知，我只使用了该程序大约一天。请帮忙！提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:25:32.123

首先你应该检查mysql是否正在运行。如果是，请发布您的服务器日志，没有它我们无法以任何方式帮助您。

# sql - SQL查询的多个过滤器

> ID：14389125
> 
> 赞同：1
> 
> 时间：2013-01-17T22:14:58.770
> 
> 标签：sql, sql-server, filter, max

我一直在阅读许多关于过滤 SQL 查询的主题，但似乎没有一个适用于我的案例，所以我需要一些帮助。我在 SQL 表上有以下数据。

```
Date                    item     quantity moved   quantity in stock sequence

13-03-2012 16:51:00    xpto         2                      2           1 
13-03-2012 16:51:00    xpto        -2                      0           2
21-03-2012 15:31:21    zyx          4                      6           1
21-03-2012 16:20:11    zyx          6                      12          2
22-03-2012 12:51:12    zyx         -3                      9           1 
```

所以这是在仓库中移动的数量，问题出在前两行同时是接收和返回，因为我正在尝试进行查询，以在给定时间为我提供所有物品的库存. 我使用`max(date)`但我没有得到正确的结果数量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T22:24:17.593

```
SELECT  item, qty_in_stock
FROM    (
        SELECT  *,
                ROW_NUMBER() OVER (PARTITION BY item ORDER BY item_date DESC, sequence DESC) rn
        FROM    mytable
        WHERE   item_date <= @date_of_stock
        ) q
WHERE   rn = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T23:12:12.390

如果您使用的是 SQL-Server 2012，这些是添加的几个不错的功能。

您可以将**[`LAST_VALUE`](http://msdn.microsoft.com/en-us/library/hh213234.aspx)**- 或`FIRST_VALUE()`- 函数与`ROWS`或`RANGE`窗口框架结合使用（参见**[`OVER`](http://msdn.microsoft.com/en-us/library/ms189461.aspx)**子句）：

```
SELECT DISTINCT
   item,
   LAST_VALUE(quantity_in_stock) OVER (PARTITION BY item 
                                       ORDER BY date, sequence
                                       ROWS BETWEEN UNBOUNDED PRECEDING 
                                                AND UNBOUNDED FOLLOWING) 
           AS quantity_in_stock
FROM  tableX
WHERE date <= @date_of_stock 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T22:34:42.947

添加一个`where`子句并进行求和：

```
select item, sum([quantity moved])
from t
group by item
where t.date <= @DESIREDDATETIME 
```

如果您为所需的日期时间输入一个日期，请记住当一天开始时该日期为午夜。

# c# - Linq 从相邻列返回值

> ID：14389126
> 
> 赞同：2
> 
> 时间：2013-01-17T22:15:04.843
> 
> 标签：c#, linq

我有一个格式如下的表格：

```
Type   Date   Code
 1   01/01/13  AA
 1   01/01/13  AB
 1   01/01/13  FV
 1   02/01/13  AE 
```

对另一个表使用连接，我可以通过以下方式恢复最高日期：-

```
g.Max(d => f.Field<DateTime>("End Date")) 
```

返回 02/01/13。我想知道的是如何返回“AE”，即：相邻列中的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T22:16:52.547

如果您正在使用 LINQ to Objects （看起来，已经获取了 a `DataTable`），您可以使用[MoreLINQ](http://morelinq.googlecode.com)它有一个[`MaxBy`](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs)方法：

```
var code = g.MaxBy(f => f.Field<DateTime>("End Date"))
            .Field<string>("Code"); 
```

（免责声明：我不久前开始使用 MoreLINQ，尽管其他人现在比我更活跃。）

# jquery - 使用 jQuery 在单独的 DIV 中包装任意内容（H2、H3、P 等）

> ID：14389129
> 
> 赞同：4
> 
> 时间：2013-01-17T22:15:07.590
> 
> 标签：jquery, css, dom, jquery-selectors

希望使用 jQuery 将任意数量的用户提供的内容包装到有效的三列中。初始 HTML 如下所示：

```
<div#content>
    <h2>Page Title</h2>
    <p>Some arbitrary number of paragraphs followed by some arbitrary number of biographies, with an arbitrary number of paragraphs.</p>
    <p>Paragraph.</p>
    <h3>First Person</h3>
    <p>Paragraph.</p>
    <p>Paragraph.</p>
    <h3>Second Person</h3>
    <p>Paragraph.</p>
    <h3>Person Three</h3>
    <p>Paragraph.</p>
    <h3>Person Four</h3>
    <p>Paragraph.</p>
    <h3>Person Five</h3>
    <p>Paragraph.</p>
</div> 
```

目标是将内容包装成三列：

*   第一个 H2 和后续段落将在第一列中。
*   接下来的两个 H3 和后续段落将在第二列中。
*   剩余的 H3（在这种情况下是三个，可能更多）将在第三列中。

所以...

```
<div#content>
    <div.col1>
        <h2>Page Title</h2>
        <p>Paragraph.</p>
        <p>Paragraph.</p>
    </div>
    <div.col2>
        <h3>First Person</h3>
        <p>Paragraph.</p>
        <p>Paragraph.</p>
        <h3>Second Person</h3>
        <p>Paragraph.</p>
    </div>
    <div.col3>
        <h3>Person Three</h3>
        <p>Paragraph.</p>
        <h3>Person Four</h3>
        <p>Paragraph.</p>
        <h3>Person Five</h3>
        <p>Paragraph.</p>
        <!-- etc. -->
    </div>
</div> 
```

我在这里设置了 CodePen：http: [//codepen.io/ian-pvd/pen/GKryq](http://codepen.io/ian-pvd/pen/GKryq)

它使用以下方法：

```
jQuery('h2').nextUntil('h3').andSelf().wrapAll('<div class="col1" />'); 

jQuery('h3:nth-of-type(1)').nextUntil('h3:nth-of-type(3)').andSelf().wrapAll('<div class="col2" />');

jQuery('h3:nth-of-type(3)').nextUntil('p:last-of-type').wrapAll('<div class="col3" />'); 
```

这一直有效，直到第三列，我无法包装第三列中剩余的任何内容。

我检查了这些其他问题，这些问题提供了一些帮助：

*   [将多个 <p> 元素包装到 <h3> 之间的 <div> 中](https://stackoverflow.com/questions/4794705/wrap-multiple-p-elements-into-div-between-h3)
*   [需要用 jquery 将 h3 和 div 包装在包装器 div 中](https://stackoverflow.com/questions/6103176/need-to-wrap-h3-and-div-in-wrapper-div-with-jquery)
*   [jQuery从H2包装一个div直到最后一段](https://stackoverflow.com/questions/7628339/jquery-wrap-a-div-from-h2-until-last-paragraph)

但是解决方案更具体地是从 H2 包装到 H2，而不是在 H2 和 H3 标签之间切换，或者在一组中包含两个 H3 标签。

我已经排除了试图说服用户以不同方式/分别输入内容的可能性。

有没有一种简单的方法可以做到这一点？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:27:46.433

最后一个选择器`h3:nth-of-type(3)`没有按预期匹配，因为您已经完成了第一个和第二个 h3；曾经是第三的 h3 现在是第一类型。

尝试以相反的顺序包装列：

```
jQuery('#content>h3:nth-of-type(3)').nextUntil('div').andSelf().wrapAll('<div class="col3" />');

jQuery('#content>h3:nth-of-type(1)').nextUntil('div').andSelf().wrapAll('<div class="col2" />');

jQuery('#content>h2').nextUntil('div').andSelf().wrapAll('<div class="col1" />'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T22:35:10.687

我想我得到了您正在寻找的答案，只是将最后一个选择器调整为：

```
jQuery('h3:eq(2)').nextUntil('p:last').andSelf().wrapAll('<div class="col3" />'); 
```

见[http://codepen.io/ian-pvd/pen/GKryq](http://codepen.io/ian-pvd/pen/GKryq)

# ios - 使用 NSDictionary 填充 UITableView，其中包含来自 mysql db 的已解析 JSON 数据

> ID：14389131
> 
> 赞同：1
> 
> 时间：2013-01-17T22:15:29.430
> 
> 标签：ios, objective-c, json, uitableview, nsdictionary

非常熟悉 Android 编程，但对 iOS（和 Objective-C）非常陌生。

我在我的应用程序中调用了一个远程 php 文件，并且（我相信）根据我的 NSLOG 结果成功解析了 JSON 结果。例子：

```
2013-01-17 14:24:30.611 JSON TESTING 4[1309:1b03] Deserialized JSON Dictionary = {
products =     (
            {
        BF = "";
        EN = "2342";
        Measure = ft;
        Name = "Brian";
        "Name_id" = 1;
        Home = "New York";
        "DB_id" = 1;
    },
            {
        BF = "";
        EN = "2123";
        Measure = ft;
        Name = "Rex";
        "Name_id" = 3;
        Home = "New York";
        "DB_id" = 5;
    }
);
success = 1; 
```

}

我的问题在于如何将这些信息填充到表格视图中。我可以定制一个原型单元，但我该去哪里呢？

编辑：

这是我的视图设置代码：

```
#pragma mark - Table View

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return productArray.count;
    NSLog(@"Number of arrays %u", productArray.count);
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

    NSDictionary *productDictionary = [productArray objectAtIndex:indexPath.row];
    cell.textLabel.text = [productDictionary objectForKey:@"BF"];

    return cell;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self launchTest];
} 
```

和我的 .h 文件

```
@interface tpbaMasterViewController : UITableViewController 
{
    NSDictionary *lists;
    NSArray *productArray;
}

- (void) launchTest;

@property (strong, nonatomic) IBOutlet UITableView *tableView;

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T22:39:47.447

`NSDictionary`您在using`objectForKey`方法中访问对象。例如，要获取`NSArray`字典中的产品：

```
NSArray *productArray = [myDictionary objectForKey:@"products"]; 
```

现在你有一个包含两个字典对象的数组。对于各种`UITableViewDataSource`方法，您可以查询数组。几个例子：

对于`– tableView:numberOfRowsInSection:`，返回数组中的对象数：

```
`return productArray.count;` 
```

对于`tableView:cellForRowAtIndexPath:`：

```
NSDictionary *productDictionary = [productArray objectAtIndex:indexPath.row];
    myCell.bfLabel.text = [productDictionary objectForKey:@"BF"];
    myCell.enLabel.text = [productDictionary objectForKey:@"EN"];
   //  continue doing the same for the other product information 
```

在 .m 文件中声明`productArray`如下所示，使其在您的视图控制器中可见（假设`productDictionary`是一个属性：

```
@interface MyCollectionViewController () {
    NSArray *productArray;
}
@end
...
@implementation MyCollectionViewController

    -(void)viewDidLoad{
        [super viewDidLoad];

        productArray = [self.myDictionary objectForKey:@"products"];
    }
...
@end 
```

# facebook - 奇怪的 fb sdk 行为

> ID：14389133
> 
> 赞同：1
> 
> 时间：2013-01-17T22:15:36.980
> 
> 标签：facebook, sdk, behavior, facebook-sdk-3.1

在 PHP 脚本中，我使用 FB SDK 放置了 Facebook 登录按钮。前几天发现有时候登录显示下移，页面链接无法点击。很奇怪，它并不总是出现，但有时会出现在所有浏览器中。

如何解决这个问题？

# eval - 在 sh 中获取 eval 命令的退出代码

> ID：14389137
> 
> 赞同：11
> 
> 时间：2013-01-17T22:15:49.510
> 
> 标签：eval, sh, exit, xcodebuild

我正在尝试在 shell 脚本中创建一个函数，该函数接受一个命令并使用 eval 执行它，然后根据命令的成功进行一些后处理。不幸的是，代码的行为不像我预期的那样。这是我所拥有的：

```
#!/bin/sh

...

function run_cmd()
{
        # $1 = build cmd

        typeset cmd="$1"
        typeset ret_code

        eval $cmd
        ret_code=$?

        if [ $ret_code == 0 ]
        then
                # Process Success
        else
                # Process Failure
        fi

}

run_cmd "xcodebuild -target \"blah\" -configuration Debug" 
```

当命令 ( `$cmd`) 成功时，它工作正常。当命令失败（例如编译错误）时，脚本会在我处理失败之前自动退出。有没有办法可以防止 eval 退出，或者我可以采取不同的方法来实现我想要的行为？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-17T22:56:05.153

如果脚本中有`set -e`某个地方，脚本应该只退出，所以我假设是这种情况。编写防止`set -e`触发自动退出的函数的更简单方法是：

```
run_cmd() {
        if eval "$@"; then
                # Process Success
        else
                # Process Failure
        fi
} 
```

注意`function`在定义函数时是不可移植的，如果`()`也使用了冗余。

# php - 尝试使用“heroku run”运行 php 文件，我得到“bash 权限被拒绝”

> ID：14389140
> 
> 赞同：1
> 
> 时间：2013-01-17T22:15:54.450
> 
> 标签：php, bash, heroku, chmod

我正在尝试运行一个文件，`heroku run path/to/file.php`但我得到了回复：

> bash：路径/到/file.php：权限被拒绝

我已经尝试`chmod 755`过文件和目录，但似乎heroku将其更改回600 ...运行`chmod 755`后显示755，但是当我退出bash然后回来时，权限被重置为600。

我错过了什么？

也有人建议

```
heroku run php path/to/file.php 
```

但我收到一条错误消息

> bash：php：找不到命令

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T00:17:46.750

您需要做几件事。

*   创建 Heroku 应用程序时，您必须确保使用了 PHP buildpack。这就是将 PHP 运行时注入您的应用程序 slug 的内容。添加一个`index.php`文件（这是检测 PHP 的方式）或像这样对其进行硬编码：`heroku config:add BUILDPACK_URL=https://github.com/heroku/heroku-buildpack-php.git`
*   [按照这个问题](https://stackoverflow.com/questions/10614454/php-heroku-background-workers)的详细信息设置库路径：heroku config:add LD_LIBRARY_PATH=/app/php/ext:/app/apache/lib
*   运行你的东西：`heroku run ./php/bin/php --version`

总结一下：

```
heroku config:add BUILDPACK_URL=https://github.com/heroku/heroku-buildpack-php.git
heroku config:add LD_LIBRARY_PATH=/app/php/ext:/app/apache/lib
heroku run ./php/bin/php --version 
```

一个有用的调试方法是 bash 进入正在运行的 Heroku dyno: `heroku run bash`。这会让你四处闲逛，看看事情在哪里并进行实验。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T22:20:01.347

您是否尝试过使用[`sudo`](http://linux.about.com/od/commands/l/blcmdl8_sudo.htm)特权运行命令：

```
sudo heroku run path/to/file.php 
```

如果您的 shell 不能使用该`php`命令（即它的别名），您将需要提供绝对路径：

```
sudo /usr/bin/php path/to/file.php 
```

这就是它通常所在的位置。要找到您的 PHP bin 位置，请尝试：

```
whereis php 
```

# sed - sed - 用冒号替换文本

> ID：14389141
> 
> 赞同：7
> 
> 时间：2013-01-17T22:15:59.573
> 
> 标签：sed

我有这个命令：

```
sed -i  "s/a:b/b:c/g" file.txt 
```

（英文：将file.txt中的“a:b”替换为“b:c”）

由于替换文本中的冒号，这不起作用。我应该如何重新编写命令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T01:22:44.990

如果你想安全，你可以避开`:`冒号

`sed -re "s/a\:b/b\:c/g" temp.txt`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T22:19:34.537

这对我有用：

```
-->cat 1
a:bLINE1
a:bLINE2

-->cat 1 | sed 's/a:b/b:c/g'
b:cLINE1
b:cLINE2 
```

# python - 如何使用 Python 在 Excel 2003 中绘制两个 y 轴

> ID：14389143
> 
> 赞同：0
> 
> 时间：2013-01-17T22:16:02.690
> 
> 标签：python, excel-2003

我正在尝试使用 Python 和 win32com.client 在 Excel 2003 中的同一图中绘制两个具有不同 y 轴的数据系列。我从 VBA 开始尝试获取我需要的代码。这是到目前为止的样子：

```
chart = xlApp.Charts.Add()

# This part successfully creates the first series I want

series = chart.SeriesCollection(1)
series.XValues = xlSheet.Range("L13:L200")
series.Values = xlSheet.Range("M13:M200")

# This is what I added to try to plot the second series

series.AxisGroup = xlPrimary
series2 = chart.SeriesCollection(2)
series2.XValues = xlSheet.Range("L13:L200")
series2.Values = xlSheet.Range("N13:N200")
series2.AxisGroup = xlSecondary

# The rest is for formatting it the way I want, but it doesn't work now that I'm
# to plot the second series. (It stops working when I add the last five lines of code).

chart.Legend.Delete() # Delete legend; MUST BE DONE BEFORE CHART IS MOVED
series.Name = file
chart.Location(2, xlSheet.Name) # Copy chart to active worksheet
chart = xlSheet.Shapes(1)
chart.Top = 51
chart.Left = 240
chart.Width = 500
chart.Height = 350 
```

这绘制了第一个系列，但如评论中所述，不再添加标题、移动图表、删除图例或调整图表大小。它与第二个系列无关。它也不会产生错误。

# javascript - 将滚轮移动添加到网页

> ID：14389147
> 
> 赞同：0
> 
> 时间：2013-01-17T22:16:16.787
> 
> 标签：javascript

在下面的演示文稿中，我可以使用滚轮滚动幻灯片。

[http://dimroc.github.com/reveal.js-threejs/#/](http://dimroc.github.com/reveal.js-threejs/#/)

这是下面演示文稿的源代码演示。滚轮无法通过幻灯片。

我的问题是**如何使滚轮在我的演示文稿中用作箭头键？**

[http://lab.hakim.se/reveal-js/#/](http://lab.hakim.se/reveal-js/#/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:54:13.233

你`mouseWheel: true`在你的`Reveal.initialize`方法中丢失了。

# python - 定时鼻子测试没有正确失败

> ID：14389154
> 
> 赞同：1
> 
> 时间：2013-01-17T22:16:32.193
> 
> 标签：python, unit-testing, nose

我有以下测试在运行特别长的 fib 断言时不会失败。

## 没有正确失败的测试

```
#!/usr/env/bin python2.7

import unittest
from fib import fib
from nose.tools import timed

def test_gen(expected, actual):
    @timed(.001)
    def test_method(self):
        return self.assertEqual(expected, actual)
    return test_method

if __name__ == '__main__':
    all_cases = {
        'user': ((fib(40), 102334155), (fib(2), 1), (fib(5), 5)),
    }
    fails = {}
    for username, cases in all_cases.items():
        class FibTests(unittest.TestCase):
            pass

        for index, case in enumerate(cases):
            test_name = 'test_{0}_{1}'.format(username, index)
            test = test_gen(case[1], case[0])
            setattr(FibTests, test_name, test)

        suite = unittest.TestLoader().loadTestsFromTestCase(FibTests)
        result = unittest.TextTestRunner(verbosity=2).run(suite)
        fails[username] = len(result.failures)
    print fails 
```

## （慢）Fib.py 实现

```
def fib(x):
    if x == 0:
        return 0
    elif x == 1:
        return 1

    return fib(x - 2) + fib(x - 1) 
```

## 正确失败的测试

```
import unittest
from fib import fib
from nose.tools import timed

def test_gen(expected, actual):
    @timed(.001)
    def test_method(self):
        time.sleep(.2)
        return self.assertEqual(expected, actual)
    return test_method 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:06:16.570

您正在计时错误的事情，并且从未真正调用您的测试方法。当鼻子支持生成器测试用例时，您还将花费大量精力来动态创建案例并将其添加到您的类中，除了充当测试容器之外什么都不做，这将比您拥有的更容易阅读和遵循这里。另外，这是一个测试文件还是一段产品代码？如果它是一个测试文件，那么包含所有这些代码`if __name__ == '__main__'`有点奇怪，如果它是一个产品代码文件，那么在非编码运行部分中包含`test_gen`函数`unittest`和`nose`导入语句就没有多大意义了。我建议按照以下方式进行，而不是尝试使测试脚本自运行；用鼻子发射它。

```
from fib import fib
from nose.tools import timed

fib = timed(.001)(fib)

def execute(username, fib_arg, expected_output):
    result = fib(fib_arg)
    assert result == expected_output, ('%s fib(%d) got %d, expected %d'
                                       % (username, fib_arg, result, expected_output))

def test_fib():
    for name, datasets in (('user', ((40, 102334155), (2, 1), (5, 5))),):
        for arg, expected in datasets:
            yield execute, name, arg, expected 
```

# regex - 使用正则表达式解析可变长度的以书本结尾的字符分隔字符串

> ID：14389155
> 
> 赞同：0
> 
> 时间：2013-01-17T22:16:32.937
> 
> 标签：regex

我有一个包含许多评论标签的文本块：

`Lorem ipsum dolor sit amet<--this is a comment-->, consectetur adipiscing<--replace=>with this--> elit. Maecenas massa ip<---123=<--=>+456>=->-->sum, ultrices quis semper porttitor, cursus at lectus.`

我想编写一个正则表达式来捕获所有`<--xxx=>yyy-->`标签实例的内容。从上面的文本中，这将返回`[('replace', 'with this'), ('-123=<--', '+456>=->')]`. 问题是文本和注释可以包含任意数量的任意字符组合（注释标记分隔符`<--`,`-->`和`=>`除外）。

是否可以使用单个正则表达式来完成此操作？我正在使用 Python 进行测试，但正则表达式应该可以在多个平台上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:46:23.500

根据您更新的匹配要求，这应该是一个有效的正则表达式：

```
/<--((?:[^=-]|(?:=(?!>)|-(?!->)))+)=>((?:[^=-]|(?:=(?!>)|-(?!->)))+)-->/g 
```

这会过滤捕获组中不允许的分隔符, `-->`。注意全局匹配的修饰符。为每个匹配提取两个组以获得所需的结果。`<--``=>``g`

([正则表达式](http://regexr.com?33erj))

# spring - Spring Managed JSF beans 上的 AOP

> ID：14389163
> 
> 赞同：1
> 
> 时间：2013-01-17T22:17:19.223
> 
> 标签：spring, jsf, aop

我正在尝试在 Spring 托管的 JSF Bean 上应用 AOP，但由于某种原因，一旦我应用 AOP，JSF 就会抛出 MethodNotFoundException。

这是我的代码： **Web.xml**

```
<application>
<default-render-kit-id>org.apache.myfaces.trinidad.core</default-render-kit-id>
<el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>    
</application> 
```

**应用程序上下文.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
 <beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:security="http://www.springframework.org/schema/security"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:aop="http://www.springframework.org/schema/aop"
 xmlns:tx="http://www.springframework.org/schema/tx"
 xsi:schemaLocation="http://www.springframework.org/schema/beans    
 http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
 http://www.springframework.org/schema/aop  
 http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
 http://www.springframework.org/schema/tx  
 http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">

<aop:aspectj-autoproxy/>
 <bean id="loginAuditAspect" class="com.test.mobile.service.LoginAuditManagementAspect">
 <constructor-arg index="0">
<list>
<bean class="com.test.mobile.service.LoginAuditableResourceResolver" />
<bean class="com.test.mobile.service.LoggedInAuditableResourceResolver" />
<bean class="com.test.mobile.service.NavigationAuditableResourceResolver" />
</list>
</constructor-arg>
</bean>

   <bean id="loginService" class="com.test.mobile.service.MLoginServiceImpl" />  
   <bean id="memberService" class="com.test.mobile.service.MMemberServiceImpl" 
         scope="session">
    <property name="thpContext" ref="thpContext"></property>
    </bean> 

  <bean id="mMemberProfileBean" class="com.test.mobile.service.MMemberProfileBean" 
        scope="session">
  <property name="memberService" ref="memberService"></property>
  </bean>

  <bean id="testBean" class="com.test.mobile.service.TestBean" scope="session">
  </bean>
  </beans> 
```

**支持豆：**

```
 public class TestBean extends BaseBackingBean {
   private static final long serialVersionUID = 1L; 

   @Auditable(resourceName="LoggedIn",      
 resourceResolverClass=com.test.mobile.service.LoggedInAuditableResourceResolver.class)
public String getXxx() {

    return null;
} 
```

}

有人可以帮我在 Spring 管理的 JSF bean 上应用 AOP 逻辑吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:24:44.310

您应该至少发布一些有关堆栈跟踪和方面的信息。但是，如果您正在丢失方法，只需应用 aspetct 尝试：

```
<aop:aspectj-autoproxy proxy-target-class="true"/> 
```

它使用 CGLIB 来代理类而不是 jdk 代理（仅代理接口）。

# page-refresh - 将窗口大小调整到特定高度时刷新浏览器窗口

> ID：14389165
> 
> 赞同：0
> 
> 时间：2013-01-17T22:17:23.830
> 
> 标签：page-refresh

任何人都可以建议一些javascript代码，当窗口调整到特定高度时，这些代码会刷新浏览器窗口。类似于 CSS 媒体查询。

即，如果浏览器最大高度为 700 像素，则刷新。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:21:01.243

我最近一直在做类似的事情，我正在使用一个很好的 JavaScript 函数：

```
var viewportwidth;
var viewportheight;

function resize() {
    // the more standards compliant browsers (mozilla/netscape/opera/IE7) use window.innerWidth and window.innerHeight

    if (typeof window.innerWidth != 'undefined') {
        viewportwidth = window.innerWidth,
        viewportheight = window.innerHeight
    }

    // IE6 in standards compliant mode (i.e. with a valid doctype as the first line in the document)

    else if (typeof document.documentElement != 'undefined' && typeof document.documentElement.clientWidth != 'undefined' && document.documentElement.clientWidth != 0) {
        viewportwidth = document.documentElement.clientWidth,
        viewportheight = document.documentElement.clientHeight
    }

    // older versions of IE

    else {
        viewportwidth = document.getElementsByTagName('body')[0].clientWidth,
        viewportheight = document.getElementsByTagName('body')[0].clientHeight
    }
} 
```

这将获得浏览器的当前高度和宽度。如果您想检查用户何时调整页面大小并调用该`resize()`函数，只需使用一个简单的 JavaScript 命令`window.onresize=resize();`

这是基本功能。从这里开始对代码进行一些更改应该很容易。例如，如果您希望仅在宽度大于或等于 700 时刷新页面，请在`resize()`函数中添加如下内容：

```
if(viewportwidth >= 700) {
    window.reload();
} 
```

# html - 我有一个水平 三到四个 s。我的 li 项目的总宽度是 100px 但 ul 占用 100% 空间

> ID：14389166
> 
> 赞同：-1
> 
> 时间：2013-01-17T22:17:26.243
> 
> 标签：html, css

我有一个`<ul>`三到四个`<li>`s 的水平我的 li 项目的总宽度是 100px 但 ul 占用 100% 宽度：我需要 UL 只占用 lis 所需的空间。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:21:41.320

尝试添加内联 css：

```
ul, li {
  display: inline;
} 
```

如果您希望您的 ul 有一个边距/填充顶部/底部并充当内联元素，请使用内联块。

```
ul, li {
  display: inline-block;
  *display: inline; // hack that makes inline block work in ie7.
  *zoom: 1; // hack that makes inline block work in ie7.
  float: none; // those elements must not be floated.
} 
```

不要使用黑客，而是尝试 Paul Irish 的这种方法：http:
[//paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

```
ul, li {
  display: inline-block;
}

.ie7 ul, .ie7 li {
  display: inline; 
  zoom: 1; 

} 
```

# sql - 使用多个外键连接两个表

> ID：14389170
> 
> 赞同：7
> 
> 时间：2013-01-17T22:17:50.770
> 
> 标签：sql

桌子`Trips`

```
TripId_PK
StartLocationId_FK
EndLocationId_FK 
```

桌子`Locations`

```
LocationId_PK
Name 
```

如何将这两个表加入两次，以便获得如下数据集：

```
TripId_PK
StartLocationName
EndLocationName 
```

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T22:20:45.933

```
SELECT  t.TripId_PK, ls.name StartLocationName, le.name EndLocationName
FROM    trips t
JOIN    locations ls
ON      ls.LocationId_PK = t.StartLocationId_FK
JOIN    locations le
ON      le.LocationId_PK = t.EndLocationId_FK 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T22:21:07.617

你可以试试这个

```
SELECT t.TripId_PK, ls.StartLocationName, le.EndLocationName
FROM Trips t
JOIN Locations ls ON t.StartLocationId_FK = ls.LocationId_PK
JOIN Locations le ON t.EndLocationId_FK = le.LocationId_PK 
```

# javascript - 没有对话窗口的保存

> ID：14389175
> 
> 赞同：0
> 
> 时间：2013-01-17T22:18:02.833
> 
> 标签：javascript, photoshop

我正在尝试编写一个脚本来自动化 Photoshop CS5 的一堆东西。其中一部分涉及保存一堆文件。有没有办法以不打开对话框窗口的方式保存文件？我一直在查看[JavaScript Tools Guide](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/products/indesign/pdfs/JavaScriptToolsGuide_CS5.pdf)，但我没有看到这样做的方法。[这](http://macscripter.net/viewtopic.php?id=15520)表明我使用了一个动作来处理它，但我真的不想这样做。

**编辑：**具体来说，我想将文件保存为 crytiff 格式，但我只想知道如何使用我想要的任何扩展名保存文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:38:07.573

下面将活动文档保存为 PNG。您可以更改类型以将其另存为。

```
// reference open doc
var doc = app.activeDocument;

// set save options
var opts = new ExportOptionsSaveForWeb();

opts.PNG8 = false;
opts.transparency = true;
opts.interlaced = false;
opts.quality = 100;
opts.includeProfile = false;
opts.format = SaveDocumentType.PNG; // Document Type

// save png file in same folder as open doc
activeDocument.exportDocument(doc.path, ExportType.SAVEFORWEB, opts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:41:39.827

尝试使用`Document.saveAs()`. 但是，就像 El Cas 所说，您仍然必须传入某种 SaveOptions 对象。如果您不想，您不必指定所有选项。您可以像这样使用通用对象：

```
app.activeDocument.saveAs(new File(doc.path + "/myDocument"), TiffSaveOptions);
// or BMPSaveOptions or GIFSaveOptions or JPEGSaveOptions... 
```

这是更完整的[Photoshop CS5 Javascript 参考](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/photoshop/pdfs/photoshop_cs5_javascript_ref.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-08T10:22:19.700

打开：Windows > Actions 您会在每个操作之前找到 Toggle Dialog On/Off 复选框。把它关掉。

# php - 循环随机排序数组时的概率算法

> ID：14389180
> 
> 赞同：5
> 
> 时间：2013-01-17T22:18:09.880
> 
> 标签：php, math, random, probability

我认为，通过查看代码，问题非常简单。我有一个随机数组（数组**必须**是随机的，一些代码已被排除，因为它与实际问题无关，但确实需要随机化）。对于数组中的每个元素，都有一个“概率”索引（此处描述为值本身，在 中`$rules`）假设暗示，如果满足其他条件（为了不相关而在此处删除），数组元素将被“触发”的概率（在这种情况下，数组元素的分数将增加 1）

考虑代码：

```
<?php
  // Taken from php.net/shuffle user notes
  // Shuffles an array order for the sake of foreach while maintaining
  // key => value associations
  function shuffle_assoc(&$array) {
    $keys = array_keys($array);
    shuffle($keys);
    foreach($keys as $key) {
      $new[$key] = $array[$key];
    }
    return $new;
  }

  $i = 1000000; // How many tests to perform

  // This is my rule list.  Each key is a simple color
  // and each value is a probability represented as a percent
  $rules = array(
    'black' => 20,
    'white' => 10,
    'red' => 40,
    'green' => 5,
    'blue' => 25,
  );

  // Initialize the scores array with all 0's
  // The "outs" will be used when the probability does not
  // occur in any of the rules
  $scores = array('outs' => 0);
  foreach($rules as $k => $v) { 
    $scores[$k] = 0;
  }

  $count = count($rules);

  for($x = 0; $x < $i; $x++) { 
    $rules = shuffle_assoc($rules);

    foreach($rules as $k => $probability) {
      $rand = mt_rand(1,100);
      //$probability = ??; I've tried applying many different operations here to "correct" the probability

      if($rand > $probability) { 
        continue; 
      } else {
        $scores[$k]++;
        continue 2;
      }
    }
    $scores['outs']++;
  }

  foreach($scores as $k => $v) { 
    echo "$k: " . (($v/$i)*100) . "% ($v/$i)\n";
  }

?> 
```

预期输出（伪）。注意百分比对应的值`$rules`

```
outs: less than 1% (.../1000000)
black: 20% (.../1000000)
white: 10% (.../1000000)
red: 40% (.../1000000)
green: 5% (.../1000000)
blue: 25% (.../1000000) 
```

示例输出：

```
outs: 30.7128% (307128/1000000)
black: 13.2114% (132114/1000000)
white: 6.3381% (63381/1000000)
red: 29.5247% (295247/1000000)
green: 3.1585% (31585/1000000)
blue: 17.0545% (170545/1000000) 
```

我尝试过的事情和注意事项：

*   如您所见，在循环中，我有一个注释掉的部分`$probability = ??`，我尝试了各种对我来说显而易见的方法来计算在每个元素中使用的实际概率，包括玩`$count`（规则计数），这就是为什么变量存在且未使用。

*   它不必很明显，但最好在一组较小的数字（例如 1,000 次迭代）上具有稳定的结果。

*   它可能非常模糊。+/- 5% 的差异不会伤害我的感受，尤其是在迭代次数较少的情况下，我知道大数理论在这里发挥作用。

*   只要低于 1%-2%，出局的数量并不是什么大问题。我还尝试使用各种方法消除补牌，看看单独的补牌是否倾斜，有趣的是，当我有一次这样做时，我得到了 20% 的平分（即偶数）。

*   此外，在“出局”上，我能够通过`$rules`从 100 向后开始强制概率“数字”（即找出一个精确的、最佳的方法。每次，我都会更接近一种颜色的结果，这会使其他颜色在一个很小但很明显的范围内倾斜。在这些数字中没有容易掌握的相关性，并且似乎是随机的，尽管很明显，结果与概率与大数字相比表现得很好。

告诉我有一个精确的方法来计算这个。它快把我逼疯了。

> **编辑：**我有我的代码的最终版本，在下面两个答案的帮助下，这样做不需要在循环开始之前知道概率百分比，也不需要额外或嵌套循环（这是我特别需要的，我我想我应该在那部分更直接）..从某种意义上说，每次迭代，您都可以根据该特定迭代的属性动态拉动概率..这里的所有答案都是无价的，这是我的最终代码版本: [http://pastebin.com/eB3TVP1E](http://pastebin.com/eB3TVP1E)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T22:27:51.630

只需标准化结果，累积它们，然后你就完成了。

我的意思是：

*   对数组的每个项目给出的所有概率求和以获得总数（`100`在你的情况下，但它很容易推广）
*   将每个概率除以总数

例如：

```
$rules = array(
    'black' => 20,
    'white' => 10,
    'red' => 40,
    'green' => 5,
    'blue' => 25,
  ); 
```

将归一化为：

```
$rules_norm = array(
    'black' => 0.2,
    'white' => 0.1,
    'red' => 0.4,
    'green' => 0.05,
    'blue' => 0.25,
  ); 
```

*   现在累积结果，以便为`$rules_norm`您中的每个元素计算所有先前元素的总和加上当前元素。

所以：

```
$rules_norm = array(
    'black' => 0.2,
    'white' => 0.3,
    'red' => 0.7,
    'green' => 0.75,
    'blue' => 1.0,
  ); 
```

现在有了这个，您可以在范围内提取一个随机浮点数，`[0,1)`并根据结果选择增加哪些元素：要增加一个元素的分数，只需从数组中的第一个元素开始，然后增加一个元素，使得`$rand > $rules_norm[k]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T22:47:25.233

Jack 在您的代码中实现的想法（如果概率总和 > 100 这将不起作用）：

[php小提琴](http://phpfiddle.org/main/code/4h7-6fn)

```
<?php
  // Taken from php.net/shuffle user notes
  // Shuffles an array order for the sake of foreach while maintaining
  // key => value associations
  function shuffle_assoc(&$array) {
    $keys = array_keys($array);
    shuffle($keys);
    foreach($keys as $key) {
      $new[$key] = $array[$key];
    }
    return $new;
  }

  $i = 1000000; // How many tests to perform

  // This is my rule list.  Each key is a simple color
  // and each value is a probability represented as a percent
  $rules = array(
    'black' => 20,
    'white' => 10,
    'red' => 40,
    'green' => 5,
    'blue' => 25,
  );

  // Initialize the scores array with all 0's
  // The "outs" will be used when the probability does not
  // occur in any of the rules
  $scores = array('outs' => 0);
  foreach($rules as $k => $v) { 
    $scores[$k] = 0;
  }

  $count = count($rules);
//$limits is what Jack called $rules_norm
$limits=array();
$limit=0;
foreach($rules as $k=>$v)
{
    $limit+=$v;
    $limits[$k]=$limit;
}
  for($x = 0; $x < $i; $x++) { 
      $rand = mt_rand(1,100);
foreach($limits as $k=>$v)
{
    if($v>=$rand)
    {
        $scores[$k]++;
        continue(2);
    }

}
    $scores['outs']++;
  }

  foreach($scores as $k => $v) { 
    echo "$k: " . (($v/$i)*100) . "% ($v/$i)\n";
  }

?> 
```

# git - git log 奇怪的行为

> ID：14389184
> 
> 赞同：0
> 
> 时间：2013-01-17T22:18:45.070
> 
> 标签：git

我只是得到了非常奇怪的结果，我无法解释

我想确定两个分支之间的区别

所以我输入

```
git log master..release1 
```

而且我有多个提交，包括假设**aa11bb22cc33**

但后来我打电话

```
git branch --contains aa11bb22cc33 
```

我有

```
release1
* master 
```

怎么会这样？！

根据定义，我的 git log 命令应该只显示那些在 release1 中可访问但在 master 中不可访问的提交？

我也试过等效的

```
git log ^master release1 
```

同样奇怪的结果。

如果可以，请解释这怎么可能。

PS 混帐 1.8.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:10:57.137

浏览一些手册页，我认为它是这样的：即使[`man gitrevisions`](http://git-scm.com/docs/gitrevisions.html)说这`<A>..<B>`是“从 B 可到达但从 A 不可到达的任何东西”，就像您引用的那样，这个“可到达”是指严格的 DAG（有*向无环图*) 意义（即“可达”意味着“是祖先”）。

实际上，[`git log`手册页](http://git-scm.com/docs/git-log)指出`<A>..<B>`“仅显示两个提交**之间的提交”。**后者也同意点点运算符是如何向我解释的：“B 中不在 A 中的所有内容”（暗示 A 和 B 类似于分支，可以“包含”提交）。

然而，在 DAG 意义上，没有分支，只有提交（任何分支都只是对提交的引用）。因此，如果提交 X “包含在 B 中”，它实际上是 B 的某个祖先，或者换句话说：它可以从 B 访问——因为在 Git 历史图表中，每个提交都有关系（“指针”，或绘制的图形）到它的祖先。

希望这可以帮助。

**编辑：**我忘记提及的是为什么您的提交显示在日志中，但分支 --contains 显示主分支和另一个分支。我只是以为我知道，但事实证明我根本不知道。如果您发布`git log --oneline --decorate --all`显示相关分支的输出，我也许可以用更具体的解释来更新我的答案:)

# android - 如何使用特定目录 Audio.Media.EXTERNAL_CONTENT_URI (android)

> ID：14389187
> 
> 赞同：2
> 
> 时间：2013-01-17T22:18:53.230
> 
> 标签：android, url, media-player, uri

我想使用我在 sdcard 上创建的特定文件夹中的音乐文件来制作播放列表。但我不知道如何`Audio.Media.EXTERNAL_CONTENT_URI` 用我的曲目 URL替换

```
audioCursor = this.managedQuery(Audio.Media.EXTERNAL_CONTENT_URI, null, null, null, null); 
```

的`MediaStore.audio。

你认为这可能吗？如果是，如何？谢谢你！

# android - Android 开发工具无法通过 adb 识别华硕 Nexus 7

> ID：14389194
> 
> 赞同：38
> 
> 时间：2013-01-17T22:19:17.273
> 
> 标签：android, adb, nexus-7

问题：正确安装和连接时，adb 无法识别 Asus Nexus 7

设置：华硕 Nexus 7 平板电脑 Windows 7 64 位操作系统

采取的步骤：

1.  安装了 64 位 Java JDK (http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)
2.  安装 Android SDK (http://developer.android.com/sdk/index.html)
3.  已安装 Google USB 驱动程序 (http://developer.android.com/tools/extras/oem-usb.html)
4.  将平板电脑设置为 USB 调试模式

在 Windows 设备管理器中，Nexus 通过 Android Composite ADB Interface 被识别为 Android 设备。设备状态表明它已连接并正常工作，正在运行来自 Google 的驱动程序版本 7.0.0.1（2012 年 8 月 27 日更新）。

但是，当我`adb devices`在命令提示符下运行时（在 sdk/platform-tools 目录中），Nexus 没有作为附加设备出现 - 列表为空。

有没有人知道问题可能是什么？我试过卸载并重新安装所有驱动程序，每次都重新启动计算机。我尝试了各种 USB 端口和电缆，以及在 MTP 和 PTP 连接之间切换，但均未成功。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-29T23:07:09.210

嘿，我通过 https://groups.google.com/forum/?fromgroups=#!topic/android-developers/0-RzE0v-G3k 找到了`mkh`解决 [方案](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/0-RzE0v-G3k)

试试这个（从上面的来源引用）

> 当 Nexus 7 插入时，会持续显示“连接 AS/媒体设备 (MTP)”的通知。在这种状态下，adb devices 不会显示 Nexus。不完全清楚为什么，但我选择第二个选项“相机（PTP）”该设备可用于调试。这个选择是持久的，我猜想用一个带新设备它将作为 MTP 连接，直到另有通知

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-02-14T17:23:10.597

关于 Nexus 7 的重要说明：4.2 的设备设置中没有现成的 USB 调试选项。

[http://forum.xda-developers.com/showthread.php?t=1989777](http://forum.xda-developers.com/showthread.php?t=1989777)

“打开设置，然后转到手机详细信息（您可以在其中看到内核、Android 版本等），然后只需点击您的内部版本号 'JOP40C' 7 次！”

这听起来很可笑，但是在我这样做之后，开发人员选项解锁并且我能够在 Eclipse（mac、Mountain Lion）中看到我的 nexus 7 进行调试。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-02-12T10:32:12.270

在我的情况下，当我使用“adb devices”获得一个空列表时，我发现设备管理器在“其他设备”下显示了 Nexus 7 平板电脑，并带有可怕的黄色感叹号，表明驱动程序未正确安装。为什么 Windows 会识别平板电脑文件系统的一部分，我不知道。无论如何，我手动将驱动程序更新为 android-sdks\extras\google 中的 google usb 驱动程序。

然后 adb 给了我以下信息：

C:\Users\Brian\android-sdks\platform-tools>adb 设备

附加设备列表

015d25785b601611 装置

而不是空白。我希望这不会弄乱其他任何事情，但我现在可以与设备交谈。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-06-06T16:11:35.080

有同样的问题，Windows 7 32 位；访问了格雷厄姆在他的回答中链接的网站，但对运行 PTP 并不满意（尽管它确实有效）。按照属于同一线程的另一个帖子上的步骤对其进行排序（我现在可以连接为 MTP）；再次，来自[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/0-RzE0v-G3k](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/0-RzE0v-G3k)的直接引用（感谢 sfoucher！）：

> 1.  在设备管理器中使用“删除此设备的驱动程序软件”选项卸载驱动程序
> 2.  重新连接 Nexus 平板电脑
> 3.  让 windows 安装一个默认驱动程序，这将是不够的
> 4.  在设备管理器中使用“删除此设备的驱动程序软件”选项再次卸载设备
> 5.  让windows尝试查找驱动，这个过程会失败
> 6.  返回设备管理器并右键单击失败的设备并更新驱动程序
> 7.  选择android sdk目录中的驱动位置（android/extra/google/usb_driver）

我应该补充一点，在第 5 步之后，我在便携式设备下列出了 Nexus 7，看起来不错，但在我应用驱动程序的其他设备下有另一个 Nexus 7 条目。我的 Nexus 7 现在在 ADB 和 Eclipse 中显示正常。在设备管理器中，我在便携式设备下有 Nexus 7，在 Android 设备下有 Android Composite ADB Interface。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-07-31T03:57:49.393

我在 Windows 7 64 位上也遇到了同样的问题。

以下事情解决了我的问题。

1.  连接Nexus 7，点击设置-关于平板-构建版本7次！
2.  这将为 Windows 安装基本驱动程序
3.  现在，点击已连接为媒体设备（MTP）图标，但您需要将其更改为相机设备
4.  转到 Windows 上的设备管理器，选择 Nexus 7，然后使用此链接[http://developer.android.com/sdk/win-usb.html](http://developer.android.com/sdk/win-usb.html)上提供的驱动程序更新驱动程序- 这将安装驱动程序（您可以使用它用这个）
5.  现在点击 Connected as Camera device 并将其更改为媒体设备 - 这将再安装一个驱动程序，您就可以开始了。！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-05-04T22:44:33.980

我遇到了同样的问题，我的解决方案是从华硕下载设备驱动程序。下面是链接。

[http://support.asus.com/Download.aspx?SLanguage=en&m=Nexus+7&p=28&s=2](http://support.asus.com/Download.aspx?SLanguage=en&m=Nexus+7&p=28&s=2)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-11T12:58:09.673

这就是我用不同的设备解决这个问题的方法。

*   下载驱动，解压到文件夹[https://developer.android.com/sdk/win-usb.html#top](https://developer.android.com/sdk/win-usb.html#top)
*   插入平板电脑后，转到系统 -> 设备管理 -> Android 设备 -> 属性 -> 详细信息 -> 硬件 ID
*   你会发现类似 USB/VID_XXXX&PID_YYYY 的东西，我们稍后会需要这些 XXXX 和 YYYY。
*   转到放置驱动程序的文件夹并手动编辑文件**android_winusb.inf 。**
*   添加这个：

    ;我的手机
    %SingleBootLoaderInterface% = USB_Install, USB\VID_XXXX&PID_YYYY
    %CompositeAdbInterface% = USB_Install, USB\VID_XXXX&PID_YYYY&MI_01

*   保存文件

*   返回设备管理器并尝试使用此更新驱动程序。（驱动程序 -> 更新驱动程序 -> 在我的计算机中搜索 -> 从列表中选择 -> 使用磁盘）。

这在[盖丘亚电话](http://www.quechuaphone.com/)上对我有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-08-06T07:04:36.780

我有同样的问题。对我来说，需要更新版本的 adb 才能连接到 Nexus 7，即让 Nexus 7 要求我“允许 USB 调试？”

简而言之：

Android 调试桥版本 1.0.31 - 工作

Android 调试桥版本 1.0.29 - 不起作用

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-04T07:05:03.767

对我有用的是从华硕网站下载 USB 驱动程序：

[http://support.asus.com/Download.aspx?SLanguage=en&m=Nexus+7&p=28&s=2](http://support.asus.com/Download.aspx?SLanguage=en&m=Nexus+7&p=28&s=2)

（您必须选择有时不起作用的操作系统，例如在 Google 搜索“nexus 7 驱动程序”时返回的链接上）。在这种情况下，单击“驱动程序和下载”并搜索“Nexus 7”。这让我得到了一个包含工作操作系统选择的页面。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-18T16:00:04.243

我正在使用 Windows 8，唯一对我有用的是 Nexus Root Toolkit 1.6.3，我在其中完成了完整的驱动程序配置指南......但我没有按照那里的说明进行操作，我去了第 2 步，只安装了签约司机。

[http://forum.xda-developers.com/showthread.php?t=1766475](http://forum.xda-developers.com/showthread.php?t=1766475)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-02-11T12:47:29.850

从以下位置下载最新的 android usb 驱动程序

[http://developer.android.com/sdk/win-usb.html#top](http://developer.android.com/sdk/win-usb.html#top)

然后使用设备管理器手动安装这些驱动程序。希望能帮助到你！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-04-29T19:50:01.073

另一种选择是，如果您的 PC 上的 Windows 更新完全关闭。在这种情况下，即使您下载了 USB 驱动程序并尝试如上所述手动更新它，它也不起作用。在这种情况下，唯一的方法是启用 Windows 自动更新驱动程序。启用此功能后，请从设备管理器中删除不工作的驱动程序并通过 USB 电缆将平板电脑连接到 PC。驱动程序将由 Windows 自动下载和安装。这种方式适用于我的 Windows 7 PC。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-04-29T19:09:18.957

从 SDK 管理器安装 Google USB 驱动程序。稍后转到设备管理器，在“其他设备”下，您会看到带有黄色感叹号的“Nexus”。右键单击>更新驱动程序>让我选择>让我从计算机上的设备驱动程序中选择。选择 android-sdk 文件夹，然后单击确定。这解决了我的问题

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-03-13T11:33:37.000

我遇到了两个问题：

1.  使用最新的 Jelly Bean sdk 在 Windows 7 64 位上通过 USB 连接时，Eclipse/adb 看不到 Nexus 7
2.  它没有显示在“我的电脑”>>“便携式设备”列表中。

最后，我发现这是驱动程序的问题。解决问题的步骤 - 打开设备管理器，卸载当前驱动程序（连同删除选项设置为是），断开设备，重新连接，让 windows 安装它想要的默认驱动程序，然后再次安装 google sdk 驱动程序。这次奏效了。

上面告诉我默认驱动程序存在一些问题，因此，您必须将其删除并重新安装。现在，它在 eclipse/adb 中可见，并且也显示在“我的电脑”中。

./hemant.virmani

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-10-08T18:50:07.963

使用 SDK 管理器下载 USB 驱动程序后，您可以通过告诉 Windows 查看 C:\Users\jdaehn\AppData\Local\Android\android-studio\sdk\extras\ 文件夹来加快搜索新驱动程序（和子文件夹，在我的情况下，驱动程序位于 C:\Users\jdaehn\AppData\Local\Android\android-studio\sdk\extras\google\usb_driver）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-02-15T09:10:21.387

从下面的网站

[http://www.asus.com/Tablets_Mobile/Nexus_7/HelpDesk_Download/](http://www.asus.com/Tablets_Mobile/Nexus_7/HelpDesk_Download/)

下载 USB -> 适用于 Windows 的 Nexus 7 USB 驱动程序

![在此处输入图像描述](../Images/ad82e71ffd50e3008271bc9ed16a1f23.png)

解压

然后按照以下网站上的说明进行操作：

[http://www.theandroidsoul.com/nexus-7-2013-drivers-installation-guide/](http://www.theandroidsoul.com/nexus-7-2013-drivers-installation-guide/)

步骤 #5 的示例，将其指向此位置：

C:\Users\Gene\Documents\Computer Setup（已安装程序）\Asus Nexus Device Drivers\usb_driver

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-05-10T19:22:17.483

下载通用 windows adb 驱动程序(Koush)。为我的 Windows 电脑工作。[http://www.koushikdutta.com/post/universal-adb-driver](http://www.koushikdutta.com/post/universal-adb-driver)

# r - R真的很慢矩阵/数据帧索引选择

> ID：14389196
> 
> 赞同：3
> 
> 时间：2013-01-17T22:19:19.643
> 
> 标签：r, matrix, dataframe

我正在选择一个 data.frame 的子集`g.raw`，如下所示：

```
g.raw <- read.table(gfile,sep=',', header=F, row.names=1) 
snps = intersect(row.names(na.omit(csnp.raw)),row.names(na.omit(esnp.raw))) 
g = g.raw[snps,] 
```

有用。但是，最后一行非常慢。

`g.raw`大约18M行，`snps`大约1M。我意识到这些是相当大的数字，但这似乎是一个简单的操作，将 g 读入内存中的 matrix/data.frame 不是问题（花了几分钟），而我上面描述的这个操作需要小时。

我该如何加快速度？我想要的只是缩小 g.raw 很多。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T23:59:22.967

似乎是`data.table`可以发光的情况。

复制`data.frame`：

```
set.seed(1)
N <- 1e6    # total number of rows
M <- 1e5    # number of rows to subset

g.raw <- data.frame(sample(1:N, N), sample(1:N, N), sample(1:N, N))
rownames(g.raw) <- sapply(1:N, function(x) paste(sample(letters, 50, replace=T), collapse=""))
snps <- sample(rownames(g.raw), M)

head(g.raw) # looking into newly created data.frame
head(snps)  # and rows for subsetting 
```

`data.frame`方法：

```
system.time(g <- g.raw[snps,])
# >    user  system elapsed 
# > 881.039   0.388 884.821 
```

`data.table`方法：

```
require(data.table)
dt.raw <- as.data.table(g.raw, keep.rownames=T)
# rn is a column with rownames(g.raw)
system.time(setkey(dt.raw, rn))
# >  user  system elapsed 
# > 8.029   0.004   8.046 

system.time(dt <- dt.raw[snps,])
# >  user  system elapsed 
# > 0.428   0.000   0.429 
```

`N`好吧，使用这些和100 倍快`M`（并且使用更大的 甚至可以更好地加速`N`）。

您可以比较结果：

```
head(g)
head(dt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:30:10.633

预分配，如果数据是统一类型，则使用矩阵进行构建。请参阅[R 中迭代构建的数据框以](https://stackoverflow.com/questions/4034059/iteratively-constructed-dataframe-in-r)获得更漂亮的答案。

**更新**

你是对的——瓶颈在于选择。解决方案是查找 snps 的数字索引一次，然后只选择这些行，如下所示：

`g <- g.raw[match(snps, rownames(g.raw)),]`

我是 R 新手 - 谢谢，这是一个内容丰富的练习。FWIW，我看到其他人评论说他们从不使用行名——可能是因为这样的事情。

**更新 2**

另请参阅[R 中的快速子集](https://stackoverflow.com/questions/8936525/fast-subsetting-in-r)，这或多或少是重复的。最重要的是，请注意第一个答案和对[Extract.data.frame](http://stat.ethz.ch/R-manual/R-devel/library/base/html/Extract.data.frame.html)的引用，我们发现行名匹配是部分的，行名上有一个哈希表，而且我在这里建议的解决方案是规范的。但是，考虑到所有这些和实验，我现在不明白为什么它这么慢。部分匹配算法应该首先在哈希表中查找精确匹配，在我们的例子中应该总是成功的。

# java - 为什么 JRuby 为我的 ruby 脚本提供的全局变量为空？

> ID：14389197
> 
> 赞同：0
> 
> 时间：2013-01-17T22:19:26.640
> 
> 标签：java, ruby, jruby

我的 Ruby 脚本：

```
def start
    print "Global variable: #{$globalVariable}"
end 
```

执行它的Java代码：

```
 jruby = new ScriptEngineManager().getEngineByName("jruby"); // Create engine
    jruby.eval(myRubyScriptContents);   // Evaluate my ruby script
    jruby.put("$globalVariable", this);  // Give it a global variable
    Invocable invocable = (Invocable) jruby;
    invocable.invokeFunction("start");    // Call the start method to print my variable 
```

输出是这样的：

> 全局变量：

为什么我的变量是空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:54:49.510

如果您可以在发布时提供一个工作示例来说明您的问题，那将会很有帮助。

这是一个可行的解决方案（注意引擎中没有美元符号`put`）。

```
import javax.script.*;
class TesterApp {
    public static void main(String[] args) throws Exception {
        ScriptEngine jruby = new ScriptEngineManager().getEngineByName("jruby");
        jruby.eval("def start;print \"Global variable: #{$globalVariable}\";end");
        jruby.put("globalVariable", "This is a working example.");
        Invocable invocable = (Invocable) jruby;
        invocable.invokeFunction("start"); 
    }
} 
```

# json - Jackson Mapper 序列化/反序列化 ObjectId

> ID：14389198
> 
> 赞同：12
> 
> 时间：2013-01-17T22:19:30.997
> 
> 标签：json, jackson

我的 POJO 是：

```
import org.jongo.marshall.jackson.id.Id;

public class User {    

    @Id
    private String id;
    private String name;
    private int age;

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
} 
```

我从 mongo 数据库中获取用户并希望将他输出到带有 jackson mapper 的文件中

```
ObjectMapper mapper = new ObjectMapper();
mapper.writerWithDefaultPrettyPrinter().writeValue(new File("c:/user.txt"), user); 
```

我在我的文件中得到了类似的东西

```
{
    "name" : "John",
    "age" : 23,
    "_id" : {
      "time" : 1358443593000,
      "inc" : 660831772,
      "machine" : 2028353122,
      "new" : false,
      "timeSecond" : 1358443593
    }
} 
```

我需要将 id 字段作为字符串存储到文件中，因为当我反序列化此对象时，pojo 中的 id 字段看起来像这样

{"time":1358443593000,"inc":660831772,"machine":2028353122,"new":false,"timeSecond":1358443593}

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-18T13:16:41.707

回答我自己的问题。在这里找到解决方案[Spring 3.2 和 Jackson 2：添加自定义对象映射器](https://stackoverflow.com/questions/14363555/spring-3-2-and-jackson-2-add-custom-object-mapper)

我需要自定义对象映射器和 ObjectId 序列化器。

```
public class ObjectIdSerializer extends JsonSerializer<ObjectId> {

    @Override
    public void serialize(ObjectId value, JsonGenerator jgen, SerializerProvider provider) throws IOException, JsonProcessingException {
        jgen.writeString(value.toString());
    }
}

public class CustomObjectMapper extends ObjectMapper {

    public CustomObjectMapper() {
        SimpleModule module = new SimpleModule("ObjectIdmodule");
        module.addSerializer(ObjectId.class, new ObjectIdSerializer());
        this.registerModule(module);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-02T15:25:56.633

我发现了一个使用 springboot 2.5.4 的简单尝试。

只需添加一个`Jackson2ObjectMapperBuilderCustomizer`bean 就可以了。

```
@Configuration
public class JacksonMapperConfiguration
{   
    @Bean
    public Jackson2ObjectMapperBuilderCustomizer jsonCustomizer() {
        return builder -> builder.serializerByType(ObjectId.class, new ToStringSerializer());
    }
} 
```

# c++ - 为快速查找优化的有序关联数据结构？

> ID：14389200
> 
> 赞同：0
> 
> 时间：2013-01-17T22:19:36.423
> 
> 标签：c++, stl

我正在寻找一种为**快速查找**`std::map`而优化的-esque 数据结构。

 **一种方法是使用 sorted`std::vector`作为底层存储来实现 map 的接口 -`binary_search`由于随机访问迭代器和缓存局部性，这将提供快速。

然而，这听起来像是对轮子的重新发明。肯定已经存在这样的东西了？

是否有使用 std::vector 进行存储的开源有序关联数据结构？

**编辑：**

针对建议*仅使用 std::map*的评论- 请在此处阅读：http: [//lafstern.org/matt/col1.pdf](http://lafstern.org/matt/col1.pdf)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:05:04.327

Boost.Containers 库有一个有序的地图容器，其存储由一个名为[`boost::flat_map`](http://www.boost.org/doc/html/container/non_standard_containers.html#container.non_standard_containers.flat_xxx). 但是请注意，渐近的理论复杂度与标准`map`（对数）相同，更好的选择取决于用例的许多*细节*：插入与查找、迭代、迭代器失效要求。

由于接口非常相似，因此应该可以通过 typedef 逐个替换并分析相关性能，这是您绝对必须做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:25:54.580

> 是否有使用 std::vector 进行存储的开源有序关联数据结构？

维护一个**sorted`vector`**怎么样？这样查找可以很快（二进制搜索，没有指针遍历）。**

# javascript - Facebook 登录窗口出现和消失

> ID：14389203
> 
> 赞同：4
> 
> 时间：2013-01-17T22:19:59.657
> 
> 标签：javascript, facebook

我正在使用 js sdk 使用`<fb:login-button></fb:login-button>`按钮登录

当我点击页面上的“登录”按钮时，弹出框出现并迅速消失。

我发现这里的另一个线程 [Facebook 登录窗口出现并很快消失](https://stackoverflow.com/questions/11646494/facebook-login-window-appears-and-disappears-very-quickly)

这解释了它的发生是因为用户已经登录到 facebook。我的问题是，我该如何解决这个问题？如果他们已经登录到 facebook，我如何确保弹出窗口不只是出现和消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:30:24.203

您可以使用 FB.getLoginStatus 检查用户的登录状态。

[https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

如果用户未登录，您可以显示（自定义）登录按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T15:42:10.820

我想用实际代码补充 FWrnr 的答案，因为这确实很有帮助。

正如他所说，解决方案是 FB.getLoginStatus 函数：

```
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        window.location = //redirect to page with logged user (you have the response token in response)
    } else {
      //Show the login popup
      FB.login(function(response) {
        if (response.authResponse) {
          window.location = //redirect to location after correct login
        }
      }, { scope: '<scopes>', state: '<state>' });
    }
  }); 
```

这样，如果用户“已连接”（已登录并获得应用授权），您将不会调用 FB.login 方法，因此登录窗口不会闪烁。在任何其他情况下，它将显示登录窗口，这是预期的结果。

# google-apps-script - 使用 FORMATTING 合并表格的 Google Apps 脚本

> ID：14389205
> 
> 赞同：1
> 
> 时间：2013-01-17T22:20:04.303
> 
> 标签：google-apps-script, google-sheets, formula, custom-function

有谁知道那里是否有一个谷歌应用程序脚本可以做 VMerge 所做的但保持表格的格式合并在一起？（在 Google 电子表格中）

VMerge 是一个可以用作自定义公式的脚本，但我可以自己触发的脚本也可以。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:30:35.457

VMerge 期望值数组作为参数，因此不知道创建这些数组时引用了哪些单元格。当用作自定义公式时，工作表解析器将所有范围参数解析为它们的值，然后再将它们传递给 VMerge。此外，参数可能是硬编码的，或者是查询或其他返回范围的函数的结果。正因为如此，修改 Vmerge 以将单元格格式复制到新的合并表是不可行的。

更复杂的是，自定义函数不能修改它们所附加的单元格之外的单元格，它们只能返回值或值数组。来自[第 37 期](http://code.google.com/p/google-apps-script-issues/issues/detail?id=37)的评论：

> 2) 用作单元格函数的脚本不允许做复杂的事情，例如连接到其他 API 或设置其他单元格的值。用作单元函数的脚本只允许返回一个值。

因此，您将不得不接受从脚本调用的函数。以下函数将在给定锚点处将多个范围连接到一个新表中。因为我开始尝试使它成为可从工作表调用的自定义函数，所以参数是范围的字符串表达式，在 a1Notation 中。（它可以很容易地重构为直接处理 Range 对象。）

新范围的“锚”应该是一个单元格。可以连接一个或多个任意大小的范围 - 每个范围将直接位于前一个范围的下方。

例子：

*   `VJoin("D1","A1:B");`- 所有列 A 和 B 都在列 D 和 E 中重复
*   `VJoin("Sheet2!A1","Sheet1!C9:E10","Sheet1!A14:B15");`- 表 1 中的两个不同范围连接并复制到表 2。

这是代码：

```
/*
 * Vertically join the ranges from multiple sources into a new table
 * starting at the given anchor point. Values and formatting are copied.
 *
 * @param {a1Notation} anchorA1 Anchor for joined table.
 * @param {a1Notation} sources One or more source ranges.
*/
function VJoin(anchorA1,sources) {
  var sheet = SpreadsheetApp.getActiveSheet();
  var anchor = sheet.getRange(anchorA1);
  var anchorSheet = anchor.getSheet();  // in case anchorA1 is not on the "active sheet"
  var nextAnchor = anchor;

  for (var i in arguments) {
    // Arguments are expected to be Strings, containing a1Notation.
    if (i == 0) continue; // First argument was anchorA1, skip it.
    if (arguments[i].constructor == String) {
      var source = sheet.getRange(arguments[i]);
      var destination = anchorSheet.getRange(nextAnchor.getRow(), nextAnchor.getColumn(),
                                       source.getNumRows(), source.getNumColumns() );
      // Copy all values & formatting to new location.
      source.copyTo(destination);
      // Prepare for next range by moving our anchor
      nextAnchor = sheet.getRange(nextAnchor.getRow() + source.getNumRows(), 
                                  nextAnchor.getColumn());
    }
    else {
      throw new Error ("Expected String containing a1Notation.")
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T05:19:21.627

如果您需要一个单独的脚本来转换格式...

```
function myFunction() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var s = ss.getSheetByName('Sheet1');
  s.getRange('A1').copyFormatToRange(sheet, column, columnEnd, row, rowEnd);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-30T18:16:08.260

我发现以下内置函数可以很好地从不同的 Google Sheet 文件中提取信息。我已经定义了命名范围来定义要拉入 Master 的列，并且还知道我遇到了 2 月的问题。

```
=sort(arrayformula({
importrange("1sTS3AUfoXqXYrMYJrro9pGEKwqVL_k854yhniNOHNWc","JCJan");
importrange("1ETSD4J-8AI-7pVK0hXJKaWtG3RlHKpnco88Yj8sqNN8","JCFeb")}),1,True) 
```

# jquery - 自定义 jQuery wordpress 导航 - 显示孙子和孩子？

> ID：14389213
> 
> 赞同：0
> 
> 时间：2013-01-17T22:20:31.297
> 
> 标签：jquery, wordpress

我的公司有一个自定义构建的 wordpress 子主题，它使用一个小的 jquery 脚本来显示子导航，然后在一两秒后淡出。目前它只会显示水平列出的子导航，但我会将它转换为更传统的导航，允许第三级菜单。

[您可以在此处](http://www.gwca.org)查看我们当前的导航

我已经成功地将我的 css 转换为在我的测试站点上垂直列出，但是当主导航的父级悬停时，jQuery 脚本错误地显示了第三级导航（孙子）和子导航（子）。

任何人都知道我需要更改/添加到此脚本以仅在指定的孩子悬停后才显示孙子？

```
 <script type='text/javascript'>
        jQuery(document).ready(function($){
            var lastopen = null;
            var timeout = null;

            jQuery("#access ul li ul").show();
            jQuery("#access ul li ul li").hide();

            function showmenu(element)
            {
                element.css("background","url('/var/www/wp-content/themes/GreatWall/images/arrow.png') no-repeat bottom");
                var children = element.find("ul li");
                children.show();
            }

            function hidemenu(element, fade)
            {
                element.css("background","transparent");
                var children = element.find("ul li");
                fade = typeof(fade) != 'undefined' ? fade : false;
                if(fade)
                {
                    children.fadeOut(300);
                }
                else
                {
                    children.hide();
                }
            }

            jQuery("#access ul li").each(function(i,v){
            jQuery(v).mouseover(function(e){if(timeout != null){clearTimeout(timeout); timeout = null;} if(lastopen != null){hidemenu(lastopen);} lastopen = jQuery(this); showmenu(lastopen);});
            jQuery(v).mouseout(function(e){if(timeout != null){clearTimeout(timeout); timeout = null;} timeout=setTimeout(function(){hidemenu(lastopen, true); lastopen = null;},1500);});
            });

            //jQuery("#access ul li ul").css("display", "block");
            //jQuery("#access ul li").each(function(i,v){var width = 0; jQuery(v).find("ul li").each(function(ii,vv){width += jQuery(vv).width();}); var mid = jQuery(v).position().left+jQuery(v).width()/2-width/2; jQuery(v).find("ul li:first").css("margin-left", Math.min(Math.max(0, mid), 940-width));});
            //jQuery("#access ul li").each(function(i,v){var width = 0; jQuery(v).find("ul li").each(function(ii,vv){width += jQuery(vv).width();}); var mid = jQuery(v).position().left; jQuery(v).find("ul li:first").css("margin-left", Math.min(Math.max(0, mid), 940-width));});
            //jQuery("#access ul li ul").css("display", "none");
        });

        </script> 
```

这是用于导航的子主题的CSS：

```
#access ul li:hover > ul {
    display: none;
}  

ul#menu-nav li a:hover{
    background:transparent;
}

#access{
    background:#FFF;
    -webkit-box-shadow:none;
    -moz-box-shadow:none;
    box-shadow:none;
    margin:0 auto;
    background:#081B39;
    background-image: linear-gradient(bottom, #081B39 48%, #183563 100%);
    background-image: -o-linear-gradient(bottom, #081B39 48%, #183563 100%);
    background-image: -moz-linear-gradient(bottom, #081B39 48%, #183563 100%);
    background-image: -webkit-linear-gradient(bottom, #081B39 48%, #183563 100%);
    background-image: -ms-linear-gradient(bottom, #081B39 48%, #183563 100%);
    background-image: -webkit-gradient(
    linear,
    left bottom,
    left top,
    color-stop(0.48, #081B39),
    color-stop(1, #183563));
    -moz-box-shadow:none;
    -webkit-box-shadow:none;
    box-shadow:none;
}

#access ul{
    margin:0;
}

#access li{
    position:relative;
}

#access div{
    margin:0;
}

#access a{
    color:white;
    font-family:Verdana, Geneva, sans-serif;
    font-size:12px;
    padding:0 12px;
    cursor:pointer;
}

#access li:hover > a, #access a:focus{
    background:none;
    color:#4bb96a;
}

#menu-nav li.current-menu-item a{
    font-weight:normal;
    color:#4bb96a;
}

#access .current_page_item > a, #access .current_page_ancestor > a {
    font-weight:normal;
}

/*-------------------------------------  SUB-NAV STYLING  -----------------------------------------------------*/

/*li#menu-item-185 ul.sub-menu > :first-child{
    margin-left:20px;
}*/

ul.sub-menu{
    margin: 0;
    padding: 0;
    text-align: center;
}

/*ul#menu-nav li a:hover{
    background:url(images/arrow.png) no-repeat bottom;
}*/

ul#menu-nav li#menu-item-144 > a:hover, ul#menu-nav li:hover#menu-item-144 > a{
    background:none;
}

.sub-menu li{
    display:block;
}

.sub-menu li a{
    color:#FFF !important;
}

ul.sub-menu li.current_page_item a{
    color:#FFF !important;
    font-style:italic !important;
}

#access ul ul{
top:38px;

    background:#081B39;
    background-image: linear-gradient(bottom, #081B39 48%, #183563 100%);
    background-image: -o-linear-gradient(bottom, #081B39 48%, #183563 100%);
    background-image: -moz-linear-gradient(bottom, #081B39 48%, #183563 100%);
    background-image: -webkit-linear-gradient(bottom, #081B39 48%, #183563 100%);
    background-image: -ms-linear-gradient(bottom, #081B39 48%, #183563 100%);
    background-image: -webkit-gradient(
    linear,
    left bottom,
    left top,
    color-stop(0.48, #081B39),
    color-stop(1, #183563));
    -moz-box-shadow:none;
    -webkit-box-shadow:none;
    box-shadow:none;
}

#access ul ul a {
    border-bottom:none;
    color:#FFF;
    padding: 10px 8px;
    text-align:left;
    background:transparent;

    font-size: 12px;
}

#access ul ul :hover > a {
    background:transparent;
    text-decoration:underline;
    color:#4bb96a !important;
} 
```

谢谢参观！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:26:18.410

您的孩子只是当前元素的任何直系后代（孩子）的 li 。因此，在 jquery 长格式中，您的`var children`查询`showmenu`将是：`var children = element.children('ul').children('li')` 这应该可以得到您想要的 - 或者至少让您走上正轨！您的查询是查找当前元素的所有后代，而不仅仅是直接后代，这就是显示您的第三级菜单项的原因。

如果您可以在某处发布实时示例（jsfiddle 或实时演示链接），那么为您提供更多支持会更容易。但我认为应该这样做。

# php - 从数据库中的 json 加载数据 + Zend Framework

> ID：14389218
> 
> 赞同：0
> 
> 时间：2013-01-17T22:20:46.523
> 
> 标签：php, database, json, zend-framework

我想将 JSON 文件中的数据加载到表中。（使用 Zend 框架）

这是我的 JSON 文件标记：

```
{
    "wijken": {
        "11": {
            "coords": "3.79073170001967,51.1717753664505,0 3.79020920176376,51.1723018883706,0 3.78989543642226,51.1729670713336,0 3.78983091856725,51.1736482209016,0 3.79035112720225,51.174896701853",
            "id": "kml_1",
            "fid": "0",
            "wijziging": "Ja",
            "nieuwnr": "11",
            "naam": "Noordoost",
            "wijk": "Kanaaldorpen en -zone",
            "wijknr": "11",
            "objectid": "1",
            "area": "0",
            "len": "0"
        }
} 
```

我知道如何使用 clear php 来做到这一点：（并且它有效）

```
<?php
            //connection to database
            $$connect = mysql_connect('localhost', 'root', 'root');
            $db = mysql_select_db('testdatabase');

            // ALLE VELDEN LEEGMAKEN
            mysql_query("TRUNCATE TABLE wijken");

            // url from json file
            $url = "http://data.appsforghent.be/poi/wijken.json";

            //get content from json file
            $json = file_get_contents($url);

            // OM ALLES VAN IN DE JSON FILE TE TONENE
            //var_dump(json_decode($json));
            //var_dump(json_decode($json, true));

            $out = json_decode($json, true);

            foreach($out["wijken"] as $wijk) 
            {
                // ID + NAAM + WIJK + WIJKNR + COORDINATEN
                $coords = addslashes($wijk[coords]);
                $id = addslashes($wijk[id]);
                $fid = addslashes($wijk[fid]);
                $wijziging = addslashes($wijk[wijziging]);
                $nieuwnr = addslashes($wijk[nieuwnr]);
                $naam = addslashes($wijk[naam]);
                $wijk = addslashes($wijk[wijk]);
                $wijknr = addslashes($wijk[wijknr]);
                $objectid = addslashes($wijk[objectid]);
                $area = addslashes($wijk[area]);
                $len = addslashes($wijk[len]);

                mysql_query("INSERT INTO wijken (coords, id, fid, wijziging, nieuwnr, naam, wijk, wijknr, objectid, area, len) 
                             VALUES('$coords', '$id', '$fid', '$wijziging', '$nieuwnr', '$naam', '$wijk', '$wijknr', '$objectid', '$area', '$len')") or die (mysql_error());
            } 
        ?> 
```

但是如何在 Zend Framework 中实现呢？到目前为止，我在 Zend Framework 中的模型映射中拥有的内容：

在其中映射带有 Districts.php 的“DbTable”：

```
 class Backoffice_Model_DbTable_Districts extends Zend_Db_Table_Abstract
{
    protected $_name = 'Wijken';
} 
```

带有 getter 和 setter 的 District.php：

```
class Backoffice_Model_District extends Ahs_Model_Abstract
{
    protected $coords;

    protected $id;

    protected $fid;

    protected $wijziging;

    protected $nieuwnr;

    protected $naam;

    protected $wijk;

    protected $wijknr;

    protected $objectid;

    protected $area;

    protected $len;

    public function getCoords()
    {
        return $this->coords;
    }

    public function setCoords($coords)
    {
        $this->coords = $coords;
    }

    public function getId()
    {
        return $this->id;
    }

    public function setId($id)
    {
        $this->id = $id;
    }

    public function getFid()
    {
        return $this->fidid;
    }

    public function setFid($fid)
    {
        $this->fid = $fid;
    }

    public function getWijziging()
    {
        return $this->wijziging;
    }

    public function setWijziging($wijziging)
    {
        $this->wijziging = $wijziging;
    }

    public function getNieuwnr()
    {
        return $this->nieuwnr;
    }

    public function setNieuwnr($nieuwnr)
    {
        $this->nieuwnr = $nieuwnr;
    }

    public function getNaam()
    {
        return $this->naam;
    }

    public function setNaam($naam)
    {
        $this->naam = $naam;
    }

    public function getWijk()
    {
        return $this->wijk;
    }

    public function setWijk($wijk)
    {
        $this->wijk = $wijk;
    }

    public function getObjectid()
    {
        return $this->objectid;
    }

    public function setObjectid($objectid)
    {
        $this->objectid = $objectid;
    }

    public function getArea()
    {
        return $this->area;
    }

    public function setArea($area)
    {
        $this->area = $area;
    }

    public function getLen()
    {
        return $this->len;
    }

    public function setLen($len)
    {
        $this->len = $len;
    }

} 
```

现在我有一个 DistrictMapper.php，但是如何实现代码以从数据库中的 json 加载所有内容？

到目前为止我所拥有的：

```
protected $_dbTable;

public function __construct()
{
    $this->_dbTable = new Backoffice_Model_DbTable_Districts();
}

public function fetchAll()
{
    $rowset = $this->_dbTable->fetchAll();

    $districts = $this->_toObjects($rowset);

    return $districts;
} 
```

现在我需要进行保存和反对。

```
public function save(Backoffice_Model_Admin $admin)
    {
        $data = array('coords'  => $district->getCoords(),
                  'id' => $district->getId(),
                  'fid'      => $district->getFid(),
                  'wijziging'   => $district->getWijziging(),
                  'nieuwnr'   => $district->getNieuwnr(),
                  'naam'   => $district->getNaam(),
                  'wijk'   => $district->getWijk(),
                  'wijknr'   => $district->getWijknr(),
                  'objectid'   => $district->getObjectid(),
                  'area'   => $district->getArea(),
                  'len'   => $district->getLen(),
    );
    }

    protected function _toObject(Zend_Db_Table_Row_Abstract $row = null)
    {

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T22:05:57.807

来自 Zend 文档[Zend_DbTable::insert()](http://framework.zend.com/manual/1.12/en/zend.db.table.html#zend.db.table.insert)，并适应了您发布的其他表信息：

```
public function save(Backoffice_Model_Admin $admin){ 
  $data = array(
    "fid": "0",
    "wijziging": "Ja",
    "nieuwnr": "11",
    // other data from $admin...
  );
  $table = new Backoffice_Model_DbTable_Districts();
  $table->insert($data);
} 
```

构造你的数组；传进去。

# objective-c - iOS 6 方向在 MoviePlayer 上按下完成后自动旋转回纵向

> ID：14389227
> 
> 赞同：3
> 
> 时间：2013-01-17T22:21:10.823
> 
> 标签：objective-c, ios6, storyboard, orientation

我正在使用 MoviePlayer 控制器在我的 iOS 应用程序中播放视频。我正在使用这样的方向通知

```
if(deviceOrientation ==UIDeviceOrientationLandscapeLeft)

{
     NSLog(@"Replay is in Landscape");

     self.fullScreenFlag = YES;

     [self.moviePlayer setFullscreen:YES animated:NO];

} 
```

当用户将手机转为横向时，这会使我的视频屏幕全屏播放。但是当我按下moviePlayer控件上的完成按钮时，我进入以下方法

```
- (void)movieWillExitFullscreen:(NSNotification*)notification
{

 UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;

if(deviceOrientation ==UIDeviceOrientationLandscapeLeft)  {
    NSLog(@"Pressed Done in Landscape");
    //Problem: Here I want to force my VideoViewController to rotate back to portrait  Mode
  }
} 
```

不知道如何让 VC 在用户按下完成按钮或视频停止播放后立即返回纵向。我知道moviePlayerNotificationMethods，但我应该在这些方法中调用什么来进行定位尚不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:47:38.477

我通过为视频播放设置一个单独的视图控制器解决了这个问题。

所以，你会有两个视图控制器

*   一些视图控制器
*   电影播放器​​视图控制器

在您的 SomeViewController 中，当您想要播放电影时：

```
MoviePlayerViewController *vc = [[MoviePlayerViewController alloc] initWithNibName:@"MoviePlayerViewController" bundle:nil];
[vc setPathToMovie:path];
[self.navigationController pushViewController:vc animated:YES];
[vc release]; 
```

然后在你的 MoviePlayerViewController

```
- (void) moviePlayBackDidFinish:(NSNotification*)notification
{
    [[self navigationController] popViewControllerAnimated:YES];    
} 
```

然后，您可以将 SomeViewController 锁定为纵向，如果用户在观看视频时处于横向状态，则在弹回 SomeViewController 时将返回纵向。

我从未找到使用 deviceOrientation 方法和模态 MPMoviePlayerController 的解决方案。虽然可能有一个！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T12:22:28.747

根据您是在 ViewController 中使用 MPMoviePlayerController 还是作为单独的 ViewController 使用，答案如下：-

首先 :- 这个[链接](https://stackoverflow.com/questions/12630359/ios-6-how-do-i-restrict-some-views-to-portrait-and-allow-others-to-rotate/13194720#13194720)将向您解释如何将某些视图限制为纵向并允许其他视图旋转？

在该链接中，您将看到，在您所做的 NavigationViewController 中，进行了以下更改：-

```
-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}

-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
} 
```

它的作用是让孩子自己决定是否要自动旋转。

接下来包含您的 MoviePlayer 的 ViewController 应该这样做：-

```
-(BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

完成此操作后，它会将 AutoRotation 的功能提供给您的 ViewController。

现在这是棘手的部分，请参阅我假设您可能已将 ViewController 限制为纵向，并且由于电影播放器​​允许您在旋转屏幕时全屏和全屏，它会变成横向，现在如果您按下完成按钮，它就赢了不要转向纵向，它会以横向本身退出全屏。在这种情况下，您应该做的是，在您的：-

```
- (BOOL)shouldAutorotate
{

    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];

    if (orientation == UIInterfaceOrientationLandscapeRight || orientation == UIInterfaceOrientationLandscapeLeft) {
            if ([[[self.navigationViewController.viewControllers] lastObject] class] == [MoviePlayerViewController class] ) {
                return YES;
            }
            return NO;
        }

        return NO;
} 
```

因此，它的作用是，您应该仅在方向为横向而不是纵向时自动旋转。

到目前为止一切顺利，接下来是 MoviePlayer，考虑到您已经播放了视频，而您唯一感兴趣的是当我们单击“完成”按钮时，它应该会自动旋转到纵向。

注册通知您的 MoviePlayer

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerWillExitFullScreen:) name:MPMoviePlayerWillExitFullscreenNotification object:_moviePlayer]; 
```

然后在选择器中：

```
- (void) moviePlayerWillExitFullScreen:(NSNotification*)notification{

    NSNumber *value = [NSNumber numberWithInt:UIInterfaceOrientationPortrait];
    [[UIDevice currentDevice] setValue:value forKey:@"orientation"];

    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerWillExitFullscreenNotification object:_moviePlayer];
} 
```

多田！魔法完成了！试试让我知道;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T10:38:32.823

我通过在“moviePlayBackDidFinish”中执行此操作解决了这个问题

```
 UIViewController* forcePortrait = [[UIViewController alloc] init];
  [self presentViewController:forcePortrait animated:NO completion:^{
  [forcePortrait dismissViewControllerAnimated:NO completion:nil];
  }]; 
```

它并不漂亮，但它就像一个魅力:-)

# javascript - Google Maps API V3 更新前清除标记

> ID：14389228
> 
> 赞同：0
> 
> 时间：2013-01-17T22:21:12.017
> 
> 标签：javascript, google-maps

我已经搜索并搜索了没有运气的答案。我可以让 xml 数据正常显示，而且我的标记似乎刷新了，但不会删除前一个，所以它们会堆积起来。任何帮助都会很棒！我只需要在新标记出现之前删除标记。谢谢！

```
 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

    <script type="text/javascript">
    //<![CDATA[
var markersArray = [];
    var customIcons = {
      restaurant: {
        icon: 'pin.png',
        shadow: ''
      },
      bar: {
        icon: 'loc1.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      },
airport: {
        icon: 'loc2.png',
        shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
      }
    };

    function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(37.0923204, -95.9042496),
        zoom: 5,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      // Change this depending on the name of your PHP file
setInterval(function() {

      downloadUrl("phpsqlajax_genxmlall.php", function(data) {

        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
resetMarkers(markersArray)
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");
          var address = markers[i].getAttribute("address");
var amount = markers[i].getAttribute("amount");
var time = markers[i].getAttribute("time");
          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" + address + "<br/>$" + amount + " at " + time;
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infoWindow, html);

        }

      });
}, 5000);
    }
function resetMarkers(arr){
    for (var i=0;i<arr.length; i++){
        arr[i].setMap(null);
    }
    //reset the main marker array for the next call
    arr=[];
}
    function bindInfoWindow(marker, map, infoWindow, html) {
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(html);
        infoWindow.open(map, marker);
      });
    }

    function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
          new ActiveXObject('Microsoft.XMLHTTP') :
          new XMLHttpRequest;

      request.onreadystatechange = function() {
        if (request.readyState == 4) {
          request.onreadystatechange = doNothing;
          callback(request, request.status);
        }
      };

      request.open('GET', url, true);
      request.send(null);
    }

    function doNothing() {}

    //]]>

  </script>

  </head>

  <body onload="load()">

    <div id="map" style="width: 1400px; height: 800px"></div>
  </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:35:10.640

问题是，您没有将标记添加到`markerArray`，它保持为空，因此当您调用时没有什么可删除的`resetMarkers`

创建标记后，将其添加到 markerArray：

```
var marker = new google.maps.Marker({
  map: map,
  position: point,
  icon: icon.icon,
  shadow: icon.shadow
});
markerArray.push(marker); 
```

# java - 如何以毫秒为单位将日期转换为数据库中的日期？

> ID：14389230
> 
> 赞同：-2
> 
> 时间：2013-01-17T22:21:41.037
> 
> 标签：java, date, timestamp

我有一个`@Entity`with 字段

```
 @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "created_on", nullable = false)
    private Date createdOn; 
```

将时间戳保存为

```
+----+------+------------+-------+--------------------------+---------------------+---------------------+------+
| id | name | type       | units | description              | created_on          | retired_on          | core |
+----+------+------------+-------+--------------------------+---------------------+---------------------+------+
|  1 | v1   | Double     | u1    | created via migration    | 2013-01-14 13:15:19 | NULL                |    1 |
|  2 | v2   | String     | u2    | created via migration    | 2013-01-14 13:15:19 | NULL                |    1 |
|  3 | v3   | BigDecimal | u3    | created via migration    | 2013-01-14 13:15:19 | NULL                |    0 |
| 27 | v4   | String     | u4    | created with web service | 2013-01-15 10:37:30 | 2013-01-15 11:27:48 |    1 |
+----+------+------------+-------+--------------------------+---------------------+---------------------+------+ 
```

当我检索数据时，我得到 Date 对象，其值如下

```
"createdOn": 1358198119000,
"createdOn": 1358198119000,
"createdOn": 1358198119000,
"createdOn": 1358275050000, 
```

如何将它们转换回带有时间戳`'2013-01-15 10:37:30'`的日期，而不是数字`1358198119000`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:30:50.913

这个值只是自纪元以来的毫秒数，它们仍然代表正确的`Date`对象。你的“时间戳”意味着什么？作为`Timestamp`java 类实例或只是有效格式化？

像这样的东西可以帮助回答*是*的第一个问题：

```
java.sql.Timestamp timestamp = new java.sql.Timestamp(createdOn.getTime()); 
```

像这样的东西可以帮助回答“是”的第二个问题：

```
SimpleDateFormat formater = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String timestampedDate = formater.format(createdOn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:38:07.560

将您的 TemporalType 更改为 DATE

```
@Temporal(TemporalType.DATE)
@Column(name = "created_on", nullable = false)
private Date createdOn; 
```

# resteasy - 当 xxx 成为 Tapestry 服务时，类 xxx 不包含自动构建所需的公共构造函数

> ID：14389232
> 
> 赞同：0
> 
> 时间：2013-01-17T22:21:42.163
> 
> 标签：resteasy, tapestry, tynamo

我发现了 Tynamo 团队在 Tapestry 和 Resteasy 之间所做的精彩整合工作。

我正在尝试在 Web 服务上激活 Liveclass Reloading。根据文档说：

## 文档

> 要为 REST 服务启用实时类重新加载，您唯一需要做的就是将它们绑定为常规 Tapestry IoC 服务并将它们贡献给 javax.ws.rs.core.Application.class。阅读更多关于服务实现重新加载如何工作的信息：http: [//tapestry.apache.org/reload.html](http://tapestry.apache.org/reload.html)
> 
> 这是来自tapestry-resteasy 测试套件的示例。

```
public static void bind(ServiceBinder binder)
{
    binder.bind(ReloadableEchoResource.class, ReloadableEchoResourceImpl.class);
}

@Contribute(javax.ws.rs.core.Application.class)
public static void configureRestResources(Configuration<Object> singletons, ReloadableEchoResource reloadableEchoResource)
{
    singletons.add(reloadableEchoResource);
} 
```

## 我自己的作品

这正是我正在做的（嗯......嗯至少我相信它是;D）：

### 我的绑定

```
public static void bind(ServiceBinder binder)
{
    binder.bind(PushMessageService.class, GCMPushMessageServiceImpl.class);
    binder.bind(UserService.class, HibernateUserServiceImpl.class);
    binder.bind(IUserResource.class, UserResourceImpl.class);

}

/**
 * Contributions to the RESTeasy main Application, insert all your RESTeasy singletons services here.
 */
@Contribute(javax.ws.rs.core.Application.class)
public static void configureRestResources(Configuration<Object> singletons, IUserResource userResource)
{
    singletons.add(userResource);
} 
```

### 我的界面

```
@Path("/user")
public interface IUserResource {

    /**
     * Lecture de tous les utilisateurs
     * 
     * @return une List des utilisateurs existants
     */
    @GET
    @Produces("application/json")
    public abstract List<User> getAllDomains(); 
```

## 错误

但是当我启动我的应用程序时，我会收到以下消息：

```
HTTP ERROR 500

Problem accessing /user. Reason:

Exception constructing service 'ResteasyRequestFilter': Error building service proxy for service 'Application' (at org.tynamo.resteasy.Application(Collection) (at Application.java:14) via org.tynamo.resteasy.ResteasyModule.bind(ServiceBinder) (at ResteasyModule.java:31)): Error invoking service contribution method org.tynamo.resteasy.ResteasyModule.javaxWsRsCoreApplication(Configuration, ObjectLocator, ResteasyPackageManager, ClassNameLocator): Class com.sopragroup.ecommerce.mobile.rest.IUserResource does not contain a public constructor needed to autobuild.

Caused by:

java.lang.RuntimeException: Exception constructing service 'ResteasyRequestFilter': Error building service proxy for service 'Application' (at org.tynamo.resteasy.Application(Collection) (at Application.java:14) via org.tynamo.resteasy.ResteasyModule.bind(ServiceBinder) (at ResteasyModule.java:31)): Error invoking service contribution method org.tynamo.resteasy.ResteasyModule.javaxWsRsCoreApplication(Configuration, ObjectLocator, ResteasyPackageManager, ClassNameLocator): Class com.sopragroup.ecommerce.mobile.rest.IUserResource does not contain a public constructor needed to autobuild.
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.obtainObjectFromCreator(JustInTimeObjectCreator.java:75)
    at org.apache.tapestry5.ioc.internal.services.JustInTimeObjectCreator.createObject(JustInTimeObjectCreator.java:54) 
```

这就像自动绑定不起作用（确实我认为它是）。显然，当我尝试不创建界面和绑定时，它就像一个魅力。

有人可以给我一个线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T09:21:07.787

我认为问题在于*tapestry-resteasy*正在尝试自动*构建IUserResource*，因为它位于“rest”包中。

这是您可能错过的非常重要的文档行：

> 还有一件事：不要将此服务放在自动发现包中。

这是一条重要的线，它以某种方式隐藏在文档中，所以我添加了一个警告，以使其对未来的用户更加可见：[http ://docs.codehaus.org/pages/diffpagesbyversion.action?pageId=151847035&selectedPageVersions=24&selectedPageVersions=23](http://docs.codehaus.org/pages/diffpagesbyversion.action?pageId=151847035&selectedPageVersions=24&selectedPageVersions=23)

# javascript - Javascript添加

> ID：14389240
> 
> 赞同：0
> 
> 时间：2013-01-17T22:22:29.257
> 
> 标签：javascript

> **可能重复：**
> [加法在 JavaScript 中不起作用](https://stackoverflow.com/questions/8377410/addition-is-not-working-in-javascript)

为了学习一些java脚本，我正在尝试构建一个简单的系统，在单击按钮时添加值..

以下代码有效，但只会添加 的硬编码值`+100`，谁能帮我更改此代码，以便添加嵌套在`id="add"`按钮中的值？

```
<html>
  <head>
        <title>Input tutorial</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script language="javascript">
               $(function () {
    $("#add").click(function() {
    $("#total").val(parseInt($("#total").val()) + 100)
});
});
        </script>
  </head>
  <body>
     <input type="button" value="12" id="add">
     <input type="button" value="14" id="total">

  </body>
</html> 
```

任何帮助都会很棒！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:27:19.333

只需将硬编码`100`的值替换为您想要的值：

```
$("#total").val(parseInt($("#total").val()) + parseInt($("#add").val()) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:31:59.193

```
<html>
<head>
    <title>Input tutorial</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script language="javascript">
        window.onload = function() {
            $('#add').bind('click', function () {
                $("#total").val(parseInt($("#total").val()) + parseInt($("#add").val()) + 100);
        });
    }
    </script>
</head>
<body>
<input type="button" value="12" id="add">
<input type="button" value="0" id="total">
</body>
</html> 
```

# ruby - 正则表达式在“q”之后查找辅音和任何“u”（在 Ruby 中）

> ID：14389241
> 
> 赞同：0
> 
> 时间：2013-01-17T22:22:30.187
> 
> 标签：ruby, regex

我认为这很简单，但我是正则表达式的新手，我无法解决。

我想将一个单词作为字符串，例如“temple”、“quiet”或“square”，并在元音之前找到所有开头的辅音，但如果它跟在“q”之后，则包括一个“u”。

我可以很好地找到所有开头的辅音（没有'qu'规则）：

```
s = 'trouble'
s.match(/\b[bcdfghjklmnpqrstvwxyz]+/) # I assume I could replace '\b' with '^' 
```

`tr`正如预期的那样，这将返回。

要添加“qu”的功能，我想我可以这样做：

```
/\b([bcdfghjklmnprstvwxyz]|qu)+/ 
```

但这根本没有帮助。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:28:57.613

嗯，对我有用：

```
def beg_con(str)
  m = str.match(/\b([bcdfghjklmnprstvwxyz]|qu)+/)
  m ? m[0] : nil
end
beg_con('trouble') # => "tr"
beg_con('quiet')   # => "qu"
beg_con('square')  # => "squ" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:29:09.820

如果要匹配以多个*q*开头的单词：

```
^(?:[bcdfghjklmnprstvwxyz]|qu?)+) 
```

然而，这样的“词”可能不存在于任何已知的语言中（可能除了克林贡语）。

# php - 自动将新消息加载到页面上

> ID：14389243
> 
> 赞同：0
> 
> 时间：2013-01-17T22:22:32.643
> 
> 标签：php, ajax

我有一个消息表，其中包含一些列，例如`id`, `to_id`, `from_id`,`is_read`等。我正在寻找最可靠的方法来检查是否有任何新电子邮件，如果有，用 jquery 加载它们并将它们显示到登录用户。我正在考虑使用该`is_read`列，如果它没有被阅读，那么将其拉入，但有时用户只是不会打开该消息，所以我不想再次将其拉入。检查新消息的最佳方法是什么？如果用户坐在收件箱页面上，我只想将新消息加载到收件箱中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:30:33.767

自动呼叫不是一个好主意。它会产生很多您不需要的开销。

如果你有心，

```
<script>
    setInterval(function(){ <code here> }, 50);
</script> 
```

[来源](http://www.w3schools.com/jsref/met_win_setinterval.asp)

否则，请查看[Pusher](http://pusher.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:38:50.437

您的 API 应该接受 a`last_message_id`或`last_checked_at`参数，并且只返回比该 id/timestamp 更新的消息。客户端，您应该询问比最新消息更新的消息，或列表“顶部”的消息。

# image - CodeIgniter 不保存图像

> ID：14389245
> 
> 赞同：0
> 
> 时间：2013-01-17T22:22:35.957
> 
> 标签：image, codeigniter

我正在尝试从 URL 中获取熊的图片并将其另存为`aabear.jpg`. 但是，我的代码失败了。怎么了？

```
$config['image_library'] = 'gd2';
$config['source_image'] = 'http://thejuxtapositionape.blog.com/files/2012/03/polar-bear-pup.jpg';
$config['create_thumb'] = TRUE;
$config['maintain_ratio'] = TRUE;
$config['width']     = 75;
$config['height']   = 50;
$config['new_image'] = 'aabear.jpg';

$this->load->library('image_lib', $config); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:02:44.987

似乎图像库仅将本地文件作为输入。

使用`polar-bear-pup.jpg`制定

# php - 当 POST 数组 *not* 为空时，RESTful 服务出错

> ID：14389249
> 
> 赞同：3
> 
> 时间：2013-01-17T22:23:12.780
> 
> 标签：php, codeigniter, rest, curl, codeigniter-2

我正试图卷入我对 RESTful 服务的第一次真正尝试。
（我正在使用 @Phil-Sturgeon 放在一起的 codeigniter-restserver 库。）

该服务适用于 GET 请求。
另一方面，POST 正在向我扔一个曲线球。**使用空**POST 数组的尝试是成功的……所有其他的似乎都失败了。

**代码：**

```
/*** sandbox  ***/
...
$curl_handle = curl_init();
curl_setopt($curl_handle, CURLOPT_URL, 'http://localhost/project/api/companies');
curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl_handle, CURLOPT_POST, 1);

// This works.
curl_setopt($curl_handle, CURLOPT_POSTFIELDS, array());

// This throws the error
//curl_setopt($curl_handle, CURLOPT_POSTFIELDS, array('chicken'=>'licken'));

$buffer = curl_exec($curl_handle);
curl_close($curl_handle);
var_export($buffer);
...

/*** RESTful controller ***/
...
function companies_post(){
    $this->response('It Works!', 200);
}  // end method: companies_post()
... 
```

**错误：**
当我的`CURLOPT_POSTFIELDS`数组*不是*空的时候，我得到：

> 遇到错误
> 不允许您请求的操作。

**目标：**
我的*直接目标*是简单地在响应中返回 POST 有效负载，这样我就可以证明往返是有效的。
不过，在这一点上，我会满足于简单地将*任何*实质内容发布到 API 而不会引发错误:)

有人听说过这样的事吗？
我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T05:35:50.497

我认为 CSRF 保护设置`TRUE`在 REST 应用程序的配置文件中。您要么需要在 curl POST 请求数组中传递 CSRF 令牌名称和 CSRF 哈希作为其值，要么通过将其值更改为来关闭它`FALSE`

```
$config['csrf_protection'] = FALSE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-05T12:41:02.533

您也可以仅为 api 请求禁用 csrf。
示例：编辑 config.php 并将 $config['csrf_protection'] 行更改为

```
$config['csrf_protection'] = TRUE;
if (isset($_SERVER["REQUEST_URI"]) 
      && stripos($_SERVER["REQUEST_URI"],'/api') !== FALSE) {
  $config['csrf_protection'] = FALSE;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T13:34:11.343

CSRF 是个婊子。把它关掉：

```
$config['csrf_protection'] = FALSE; 
```

在以后的版本中，您可以添加白名单 IP/域，您的客户端将是其中之一。

# php - Check if MySQL column contains characters

> ID：14389250
> 
> 赞同：3
> 
> 时间：2013-01-17T22:23:14.817
> 
> 标签：php, mysql, sql

I have a search page on my website where you can type in the username of a person to bring up their profile although it only works when you type in their full username. I want to check if a rows username column contains a sequence of characters that the user types in so that when they type in: 'Mr' it will bring up the result 'MrDare360' and so on.

This is the code I have at the moment: [http://pastebin.com/68dgLZf8](http://pastebin.com/68dgLZf8)

What would be the easiest or best way of doing this?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T22:24:53.847

Use LIKE. Contrived example query:

```
SELECT name FROM users WHERE name LIKE 'Mr%'; 
```

The `%` character is a wildcard. The above example would match a string *starting* with `Mr` (as your question states). You could also do `%Mr%` to find `Mr` in the middle of a string or `%Mr` to find `Mr` at the end of a string.

[Docs here](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:24:35.620

Try:

```
$query = $sqli_con->query("SELECT id, username, avatar, first_name, last_name, country, gender, user_level FROM members WHERE username LIKE '%$search_query%'"); 
```

# restlet - org.restlet.Context 超时值

> ID：14389253
> 
> 赞同：1
> 
> 时间：2013-01-17T22:23:28.783
> 
> 标签：restlet

当 org.restlet.Context 使用 Apache HttpClient 建立连接时，我如何指定客户端应该等待服务器响应的超时时间。这是我到目前为止所拥有的

```
 final Context context = new Context();
    context.getParameters().add("socketTimeout", "10000");
    context.getParameters().add("", "10000"); //?? connectionTimeout

    ClientResource clientResource = new ClientResource(context, ss.getUrl()); 
```

是否有可能的参数值及其含义的文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:05:51.263

事实上，HttpClient 扩展的所有支持参数都在这个页面中描述： [http ://www.restlet.org/documentation/snapshot/jee/ext/org/restlet/ext/httpclient/HttpClientHelper.html](http://www.restlet.org/documentation/snapshot/jee/ext/org/restlet/ext/httpclient/HttpClientHelper.html)

在您的情况下，该`idleTimeout`参数似乎应该打扰。

# forms - Web2py：SQLForm 标签选项不会覆盖视图中的标签

> ID：14389254
> 
> 赞同：0
> 
> 时间：2013-01-17T22:23:31.873
> 
> 标签：forms, web2py

我有一个简单的 SQLform，我试图覆盖标签，以便它们对用户更有意义：

> form = SQLFORM(db.UserData, submit_button='立即报告！', **labels** = {'title':'文章标题', 'link':'链接到文章', 'htmlcontent':'HTML 格式的内容', ' textcontent':'文本格式的内容','source':'你的名字','imageurl':'文章图片','briefdescription':'简要文章摘录','iscontentavailable':'忽略这个'})

**htmlContent**、**imageurl**、**briefdescription**和**textcontent**的标签不会被替换。

知道我应该检查什么或我可能会出错的地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:00:38.677

在定义表格时，您可以使用标签为字段取一个简单的名称：

```
db.define_table('system',
            Field('version', label='System Version', length=4),
            Field('db', label='System Database', length=10),
            Field('modules', label='Modules loaded', length=50)
            ) 
```

并使用带有自定义表单的占位符 HTML5 属性，您可以在文本框中输入提示：

```
{{=form.custom.begin}}
{{form.custom.widget.title['_placeholder']='Article Title'}}
{{form.custom.widget.link['_placeholder']='Link to article'}}
....
{{=form.custom.end}} 
```

要添加标签，您可以使用 jquery：

```
$('#title').val($('#title').val() + 'Article Title'); 
```

# cookies - 在进行与模型相关的休息调用时，如何让主干.js 发送 cookie？

> ID：14389257
> 
> 赞同：3
> 
> 时间：2013-01-17T22:23:52.273
> 
> 标签：cookies, backbone.js

我正在使用主干与我在 Google App 引擎中运行的应用程序交谈，并且我想利用 google 的内置身份验证。不幸的是，这需要我发送所有请求的身份验证 cookie。默认情况下，Backbone 似乎不会发送 cookie。

有没有办法让骨干做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:43:24.653

Backbone 只是使用 jQuery 的`ajax`函数来完成所有的 AJAX 工作，所有涉及的方法都采用选项，然后将它们传递给`$.ajax`. 所以，我不知道你`use the Google App engine cookie`具体是如何指定的，但是如果你阅读了应用引擎文档和 jQuery`$.ajax`文档，应该不难弄清楚。

一旦你确定了你，你只需将选项传递给你的方法。例如，如果您正在执行 fetch 操作，则类似于：

```
someModel.fetch({cookies: ['appengine.google.com']}); 
```

应该做的伎俩。

老实说，cookie 发送通常由浏览器处理，我什至在 jQuery 页面上都看不到任何 cookie 选项......你确定这是 Backbone 的问题，而不是首先设置 cookie 的问题吗?

# git - 合并没有“同时”更改的分支并保持分支结构

> ID：14389259
> 
> 赞同：1
> 
> 时间：2013-01-17T22:24:10.313
> 
> 标签：git, git-branch, git-merge

当我有这样的分支时：

```
 A---B---C topic
     /
D---E---F---G master 
```

并将主题合并回master，我会得到这个：

```
 A---B---C topic
     /         \
D---E---F---G---H master 
```

现在，即使我删除了`topic`分支（假设它只是一个本地开发分支并且我只 push `master`）我仍然会得到信息，即有一个从 开始`E`并完成的功能`H`。

即使在分支上没有同时提交的情况下`master`，当我在`topic`分支上工作时，是否有可能保持相同的信息？例如：

```
 A---B---C topic
     /
D---E master 
```

如果我现在合并，我会得到这个：

```
D---E---A---B---C master/topic 
```

如果我删除主题分支，将来我将没有任何信息，`topic`分支中实现的功能在哪里完成。即使我保留分支，我也不知道它从哪里开始。

我宁愿保留父母双方并拥有这样的东西：

```
 A---B---C topic
     /         \
D---E-----------F master 
```

我认为这是 svn 的默认行为。我可以用 git 达到同样的效果吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T22:25:44.493

`--no-ff`是的，即使合并解析为快进情况，使用该标志也会创建合并提交。示例（假设您从 开始`C`）：

```
git checkout E
git merge --no-ff C 
```

文档中提供了更多信息[`git-merge(1)`](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)。

# c# - 使用 monomac/c# 实例化一个附加窗口

> ID：14389263
> 
> 赞同：3
> 
> 时间：2013-01-17T22:24:30.300
> 
> 标签：c#, objective-c, xcode, mono, monomac

我一直在寻找这个问题的答案，虽然我意识到这可能非常微不足道，但不知怎的，答案却让我难以捉摸。

我需要显示第二个窗口（从单击菜单项启动，如果这很重要）。我非常清楚如何使用 winforms 执行此操作，但我不确定 monomac/NSWindow 等效项是什么。我需要这样做：

```
MyWindowClass myWindow = new MyWindowClass();
myWindow.Show(); 
```

我能找到的关于该主题的最佳信息表明以下内容应该有效：

```
MyWindowClass myWindow = new MyWindowClass();
myWindow.MakeKeyAndOrderFront(this); 
```

但是当我尝试这样做时，它告诉我 MyWindowClass() 需要一个重载，所以我查看了构造函数，发现它正在请求一个 IntPtr。不知道更好，我试试这个：

```
MyWindowClass myWindow = new MyWindowClass(new IntPtr());
myWindow.MakeKeyAndOrderFront(this); 
```

此代码将毫无错误地运行，但当我尝试启动窗口时没有任何反应。

我确定我只是犯了一个愚蠢的错误，但我只是无法找到有关该主题的任何内容。任何帮助将不胜感激。

编辑：作为参考，这里是构造函数的相关部分：

```
public MyWindowClass (IntPtr handle) : base (handle)
    {
        Initialize ();
    } 
```

附加信息：我正在尝试通过以下方法从 AppDelegate.cs 中运行上面的代码：

```
partial void showWindow (MonoMac.Foundation.NSObject sender){
        MyWindowClass myWindow = new MyWindowClass(new IntPtr());
        myWindow.MakeKeyAndOrderFront(this);
    } 
```

更多代码啊霍伊：

```
public partial class ViewPaths : MonoMac.AppKit.NSWindow
{
    #region Constructors
    public ViewPaths ()
    {
        Initialize();
    }

    // Called when created from unmanaged code
    public ViewPaths (IntPtr handle) : base (handle)
    {
        Initialize ();
    }

    // Called when created directly from a XIB file
    [Export ("initWithCoder:")]
    public ViewPaths (NSCoder coder) : base (coder)
    {
        Initialize ();
    }

    // Shared initialization code
    void Initialize ()
    {
    }

    #endregion
} 
```

然后是实际的实例化：

```
public partial class AppDelegate : NSApplicationDelegate
{
    MainWindowController mainWindowController;
    ViewPaths display;
    public AppDelegate ()
    {
    }

    public override void FinishedLaunching (NSObject notification)
    {
        mainWindowController = new MainWindowController ();
        mainWindowController.Window.MakeKeyAndOrderFront (this);
    }

    partial void viewPaths (MonoMac.Foundation.NSObject sender){
        display = new ViewPaths();
        display.MakeKeyAndOrderFront(this);
    }

} 
```

}

这显示了一个没有任何类型的 UI 元素的窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:09:47.917

只需添加一个没有句柄参数的默认构造函数。确保 MyWindowClass 子类 NSWindow 并且它应该可以工作。

此外，您可能需要保留对 myWindow 的引用 - 这样它就不会被垃圾收集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T00:59:08.630

为清楚起见，这是解决问题的最终代码，如果其他人曾经谷歌这个：

因为我用控制器创建了一个新的 monomac 窗口，所以我需要创建该控制器的一个实例，并显示控制器的窗口：

```
MyWindowController myWindow = new MyWindowController();
myWindow.Window.MakeKeyAndOrderFront(this); 
```

这不需要一个没有实现句柄参数的新构造函数 - 该解决方案正在解决我通过实例化不正确的东西而创建的问题。

# c++ - 实现层次结构中的冗余私有成员数据复制

> ID：14389268
> 
> 赞同：0
> 
> 时间：2013-01-17T22:24:53.403
> 
> 标签：c++, design-patterns

我的问题涉及公共继承和私有继承的组合作为在 C++ 类中分离接口和实现的工具。在这种模式下，接口基类声明了公共函数（`class Base0`）。通用实现是在从接口基 ( `class Impl0 : virtual public Base0`) 虚拟派生的类中执行的。此类包含任何公共数据成员。扩展类分两步编写。首先，扩展接口由接口基（`class Base1 : virtual public Base0`）的虚拟继承定义。其次，扩展实现是通过公开派生自`Base1`（用于接口）和私有派生自（`Impl0`用于实现）`class Impl1 : public virtual Base1, private Impl0`：. 我的问题如下：

(1) 如果扩展类中的函数定义了需要公共数据的函数，`Impl0`我是否必须在“Impl1”中复制该数据？

（2）有没有办法避免这种复制？

作为一个最小的例子，考虑一个用于实现四个基本算术函数的类层次结构：add()、substr()、mult() 和 div()。基本版本`MathOps`包含 add() 和 subtr() 函数。扩展版本`MathOps_Extn`包含 mult() 和 div()。上述技术给出了以下类层次结构。

```
#include<iostream>

using std::cout;
using std::endl;

class MathOps {
public:
  virtual int add(int x) = 0;
  virtual int subtr(int x) = 0;
};

class MathOps_Impl : public virtual MathOps {
private:
  int m_y;
public:
  MathOps_Impl(int y) : m_y(y) {
    cout << "MathOps_Impl initialized with value: " << m_y << endl;
  }

  virtual int add(int x) { return x + m_y;}
  virtual int subtr (int x) { return m_y - x;}
};

class MathOps_Extn  : public virtual MathOps {
  // Extends MathOps by adding mult() and div()                                                                                                                                 
public:
  virtual int mult(int x) = 0;
  virtual int div(int x) = 0;
};

class MathOps_Extn_Impl : public    virtual MathOps_Extn, private MathOps_Impl {
private:
  int m_y; // Have to replicate member data m_y here.                                                                                                                           
public:
  MathOps_Extn_Impl(int y) : MathOps_Impl(y), m_y(y) {
    cout << "MathOps_Extn_Impl initialized with value: " << m_y << endl;
  }

  virtual int mult(int x) {
    return x * m_y;
  }
  virtual int div(int x) {
    int quotient = x == 0? 0 : m_y/x;
    return quotient;
  }
};

int main() {                                                                                                                                           
  MathOps_Extn* B =  new MathOps_Extn_Impl(10);
  cout << "add 20: " << B->add(20) << endl;
  cout << "subtr 20: " << B->subtr(20) << endl;
  cout << "mult 2: " << B->mult(2) << endl;
  cout << "div 5: " << B->div(5) << endl; 
```

`m_y`注意in的复制`MathOps_Extn_Impl`。有没有办法避免这种复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:41:22.833

> 请注意 MathOps_Extn_Impl 中 m_y 的复制。有没有办法避免这种复制？

是的。授予`MathOps_Impl::m_y` `protected`访问权限而不是`private`.

您明确询问为什么派生类无法访问私有数据。这是设计使然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T02:08:11.193

通过公共实现类中的受保护成员函数，您可以在不破坏封装的情况下访问公共数据。

无偿的例子如下:)

```
#include <cstdio>

class Math
{
public:
    virtual ~Math() {}
    virtual int add(int b) const = 0;
};

class MoreMath : public virtual Math
{
public:
    virtual ~MoreMath() {}
    virtual int subtract(int b) const = 0;
};

class MathImpl : public virtual Math
{
private:
    int m_a;

public:
    MathImpl(int a) : m_a(a) {}
    virtual ~MathImpl() {}
    int add(int b) const { return m_a + b; }

protected:
    int value() const { return m_a; }
};

class MoreMathImpl : public virtual MoreMath, private MathImpl
{
public:
    MoreMathImpl(int a) : MathImpl(a) {}
    int subtract(int b) const { return value() - b; }
};

int main()
{
    MoreMath* one = new MoreMathImpl(1);
    printf("1 + 2 = %d\n", one->add(2));
    printf("1 - 2 = %d\n", one->subtract(2));
    delete one;

    return 0;
} 
```

# zend-framework - 在 Zend Framework Select 中修改列

> ID：14389270
> 
> 赞同：0
> 
> 时间：2013-01-17T22:25:12.637
> 
> 标签：zend-framework

在 Zend_Db_Select 对象中，我正在执行连接以获取某些数据记录的用户信息。因为加入是在用户 ID 上，我想将用户的名字和姓氏组合成一个名称列。

基本上我希望有类似的东西：

```
$table = array('u' => 'User');
$condition = 'u.id = t.id';
$columns = array('UserName' => 'u.FirstName + " " + u.LastName')
$select->joinLeft($table, $condition, $columns); 
```

我试过使用 Zend_Db_Expr 没有运气，上面的方法不起作用。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:56:59.487

`Zend_Db_Expr`是要走的路，但如果你使用数据库的连接功能，你会有更好的运气。假设 MySQL：

```
$columns = new Zend_Db_Expr("CONCAT(u.FirstName, ' ', u.LastName') AS name") 
```

# php - 如何获取 Joomla 文章的标题？

> ID：14389272
> 
> 赞同：0
> 
> 时间：2013-01-17T22:25:31.327
> 
> 标签：php, mysql, joomla

我设计了一个 Joomla 模板。我想把我的文章放在我的模板上，我已经编写了代码，将文章正文放在我的模板上，但图像和标题都没有出现。任何人都可以帮忙吗？

```
$query = "select * from jh7na_content order by id desc limit 2";
$sql = mysql_query($query) or die(mysql_error());
while($row=mysql_fetch_array($sql)){
    echo "<div id='div1' style='border='2px';'>".html_entity_decode($row['introtext'])."</div>";             
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T05:13:52.147

你应该知道的几件事。首先，如果你想展示一篇文章，为什么不创建一个菜单项，并在 Joomla 后端为它分配一篇文章呢？其次，您的查询仅显示文章文本，因为您已经告诉它并且没有调用标题。第三，您应该使用 Joomla 编码标准，尤其是在进行数据库查询时，如下所示：

```
$db = JFactory::getDBO();
$query = $db->getQuery(true);
$query->select('*')
 ->from('#__content')
 ->order('id DESC');
$db->setQuery($query,0,2);
$rows = $db->loadObjectList();

foreach($rows as $row){
    echo "<div class='title'>" . $row['title']. "</div>"; 
    echo "<div class='introtext'>" . $row['introtext']. "</div>"; 
} 
```

但是，如前所述，您应该将文章分配给菜单项。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T05:10:23.440

好吧，既然您只是在呼应介绍文本而不是标题或图像，这可以解释为什么显示的是介绍文本而不是标题或图像。查看核心布局以了解如何呈现文章的每个部分。

但是，如果您的意思是您编写了一个实际模板，在 Joomla 中用于设计目的，您不应该在其中放置任何特定代码，您只是使用 jdoc 语句来包含您的文章。

不要重新发明轮子。Joomla 是一个内容管理系统，使用它进行内容管理。它会自动为您加载您的内容。这就是它的全部设计目的——在您担心内容和设计的同时照顾那部分。如果您想制作与核心不同的页面，您可以进行布局覆盖（搜索有关如何执行此操作的答案）。但我建议您首先了解一下 Joomla 的工作原理。打开核心代码并研究它，然后您将知道如何使用它。

# php - 同一控制器中两个不同动作的分页

> ID：14389275
> 
> 赞同：0
> 
> 时间：2013-01-17T22:25:45.023
> 
> 标签：php, cakephp, pagination

我有一个动作调用`index`和另一个动作调用`manage`，两者都在`PostsController`. 我想为两者实现分页，并且我已经设置了这个类属性：

```
public $paginate = array(
    'limit' => 10,
    'order' => array(
        'Post.created' => 'desc'
    )
); 
```

然后我在我的`index`动作中使用分页，如下所示：`$this->set('posts', $this->paginate('Post'));`

这会产生一个这样的 URL：`http://dev/posts/page:2`这很好。

但是，当我尝试`manage`像使用`index`( `$this->set('posts', $this->paginate('Post'));`) 一样在操作中使用分页时，视图上的分页链接会重定向到上面的 URL，而不是管理操作。

基本上，Cake 很困惑，因为我在同一个控制器中使用了两次分页，并且将两者都重定向到同一个 URL。如何确保`manage`操作的分页正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T04:06:37.123

执行以下操作。

```
<?php
class PostsController extends AppController
{
    var $name = 'Posts';
    public $paginate = array
    (
        'limit' => 10,
        'order' => array
        (
            'Post.created' => 'desc'
        )
    );

    function index()
    {
        $this->Post->recursive = 0;
        $this->set('posts', $this->paginate('Post'));
    }

    function manage()
    {
        $this->Post->recursive = 0;
        $this->set('posts', $this->paginate('Post'));
    }
}
```

在视图文件中进行如下定义的更改。

**索引.ctp**

```
$options = array
(
    'url'=> array
    (
        'controller' => 'posts', 
        'action' => 'index'
     )
);
$paginator->options($options);
```

**管理.ctp**

```
$options = array
(
    'url'=> array
    (
        'controller' => 'posts', 
        'action' => 'manage'
     )
);
$paginator->options($options);
```

你完成了。

# python - 压缩大型python对象

> ID：14389279
> 
> 赞同：1
> 
> 时间：2013-01-17T22:26:17.183
> 
> 标签：python, memory, numpy, compression

我正在尝试压缩一个巨大的 python 对象 ~15G，并将其保存在磁盘上。由于要求限制，我需要尽可能地压缩这个文件。我目前正在使用 zlib.compress(9)。我主要担心的是在压缩期间占用的内存超过了我在系统 32g 上可用的内存，并且预计对象的大小会增加。有没有更有效/更好的方法来实现这一点。谢谢。

更新：还要注意我要保存的对象是一个稀疏的 numpy 矩阵，并且我在压缩之前对数据进行了序列化，这也增加了内存消耗。由于序列化后我不需要 python 对象，gc.collect() 有帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T22:31:21.050

应该进行增量（去）压缩，`zlib.{de,}compressobj()`以便最大限度地减少内存消耗。此外，对于大多数数据，可以通过使用`bz2`来获得更高的压缩比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:41:31.827

的 memLevel 参数`deflateInit2 ()`指定应该为内部压缩状态分配多少内存。默认值为`8`，最大值为`9`，最小值为`1`（参见[zlib 手册](http://www.zlib.net/manual.html)）。如果您已经尝试过或者它对您的帮助不够，则可能需要查看另一种压缩算法或库。

# java - Eclipse快捷键：这个类是什么包？

> ID：14389280
> 
> 赞同：0
> 
> 时间：2013-01-17T22:26:17.907
> 
> 标签：java, eclipse, keyboard-shortcuts

当光标在一个类的包上时，是否有一个热键来显示一个类的包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:29:43.650

只需将鼠标移到类上，Eclipse 就会显示完整的包以及 Javadocs（如果可用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:40:22.083

实际上，我刚刚测试了这个。“F2”是显示窗口的热键。我再次推荐使用 Javadoc 视图。

# assembly - CPU之间的汇编语言是否不同？

> ID：14389284
> 
> 赞同：1
> 
> 时间：2013-01-17T22:26:21.637
> 
> 标签：assembly, cpu

我有兴趣学习汇编。基本上我想知道不同 CPU 之间是否有不同的语言（汇编）。如果我有一个现代的 Intel x86 处理器和一年前的 Intel x86 处理器，汇编代码会在这两台机器上兼容吗？我可以在两台机器上运行该代码而无需学习整本其他汇编指令书吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T22:37:00.713

> 如果我有一个现代的 Intel x86 处理器和一年前的 Intel x86 处理器，汇编代码会在这两台机器上兼容吗？

是的，几乎可以肯定。芯片供应商试图保持他们的指令集相对稳定，以使编译器编写者和软件开发人员的生活更轻松。每隔一段时间就会出现一些新指令，或者一些旧指令停止工作。但这并不经常发生，尤其是在英特尔上。

> 我可以在两台机器上运行该代码而无需学习整本其他汇编指令书吗？

同样，几乎可以肯定是的。但总有例外。您可能会发现阅读[英特尔软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-16T02:41:07.160

是和不是。

用于不同处理器的 Linux 操作系统的汇编程序都依赖于 GNU 约定，因此是相同的。它们“仅”在实际 CPU 指令上有所不同。它们在标签、注释和指令方面具有相同的约定。

现在相反的观点是，实际的 CPU 指令是汇编语言之间的本质区别。这取决于 CPU 的属性，例如寄存器的名称和提供的操作。现代英特尔处理器的描述是一本多部书籍，总共运行了数千页。同样，Risc V 的描述也有数百页，并且没有与 Intel 协调。对于其他处理器，您可以期待不相关的观点，甚至是相互冲突的术语。

如果您认为这很愚蠢，我可以告诉您，将 Linux 的汇编程序从 i86 改写为 arm，而不是将 Linux i86 (gas) 的汇编程序改写为 MS-Windows i86 (masm ）。[另请参阅https://github.com/albertvanderhorst/ciforth](https://github.com/albertvanderhorst/ciforth)中的一系列重要程序 。

# objective-c - 可可。如何仅在托盘应用程序中显示窗口

> ID：14389291
> 
> 赞同：1
> 
> 时间：2013-01-17T22:27:18.203
> 
> 标签：objective-c, macos, cocoa, statusbar

我为 Mac OS X 创建了一个只有状态栏的应用程序。类似[http://d.pr/i/Covi](http://d.pr/i/Covi)的东西。我通过本教程[http://cocoatutorial.grapewave.com/2010/01/creating-a-status-bar-application/](http://cocoatutorial.grapewave.com/2010/01/creating-a-status-bar-application/)创建了它。现在我有一个问题：如何通过单击“关于”菜单项来显示窗口？我尝试这样做：

```
#import "IGAppDelegate.h"
#import "IGAboutWindowController.h"

@implementation IGAppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
}

- (void)awakeFromNib {
    _statusItem = [[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength];
    [_statusItem setMenu:_menu];
    [_statusItem setTitle:@"LeoHelper"];
    [_statusItem setHighlightMode:YES];
}

#pragma mark - Actions

- (IBAction)quit:(id)sender {
    [NSApp terminate:self];
}

- (IBAction)about:(id)sender {
    IGAboutWindowController *aboutController = [[IGAboutWindowController alloc] init];
    [aboutController showWindow:self];
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:51:36.727

我将猜测您正在使用自动引用计数（ARC）。如果你是，那么这就是方法中将发生的事情`about:`：

你首先创建一个本地实例`IGAboutWindowController`，然后告诉它显示它的窗口。这将在屏幕上显示窗口，但是，如果您的项目使用 ARC，则该窗口将立即消失。这样做的原因是，一旦`about:`方法结束，您的本地实例`IGAboutWindowController`将被自动释放，结果，它的窗口将从屏幕上删除。

`about:`要在 ARC 管理的项目中成功实现此方法，您应该将 定义`aboutController`为类的实例变量，`IGAppDelegate`如下所示：

```
@class IGAboutWindowController;

@interface IGAppDelegate : NSObject <...>

@property (nonatomic, strong) IGAboutWindowController *aboutController;

@end 
```

然后`about:`像这样实现你的方法：

```
- (IBAction)about:(id)sender {
    if (self.aboutController == nil)
       self.aboutController = [[IGAboutWindowController alloc] init];
    [aboutController showWindow:self];
} 
```

# c# - RichTextBlock 在使用双新行但不是三倍时截断内容

> ID：14389296
> 
> 赞同：0
> 
> 时间：2013-01-17T22:27:35.530
> 
> 标签：c#, xaml, windows-8

我有一些 XML ......

```
...
<body>
    <p>blah blah blah blah blah blah </p>
    <p>blah blah blah blah blah blah </p>
    ...
</body>
... 
```

我将 XML 解析为一个字符串，以便在将每个 P 元素附加到字符串之后插入一个双换行符......

```
foreach (XElement e in element.Element("body").Descendants("p"))
{
    try
    {
        item.Content += e.Value + Environment.NewLine + Environment.NewLine;
    }
    catch { }
} 
```

项目的 Content 属性稍后绑定到 Visual Studio 2012 中可用的项目详细信息页面模板的 RichTextBlock 元素中的 Content Run。此时我注意到一些奇怪的行为。

有些项目会在第一列的末尾截断它们的文本，并在我希望文本溢出到新列的地方添加省略号。当我更改模拟器的分辨率时，先前被截断的项目会正确显示，而另一个项目将被截断。如果我切换分辨率，那么前一个项目会再次截断。

截图：http: [//i.stack.imgur.com/qrTqP.png](http://i.stack.imgur.com/qrTqP.png)

更奇怪的是，如果我更改解析代码以插入三个换行符，一切都会像我预期的那样溢出。

最初我假设 RichTextBlock 错误地计算了溢出到新列的需要，但这并不能解释它添加的省略号，也不能解释它总是在单词末尾截断的事实。

这是我的 RichTextBox 的 XAML ......

```
<RichTextBlock x:Name="richTextBlock" Width="560" Style="{StaticResource ItemRichTextStyle}" IsTextSelectionEnabled="False">

    <Paragraph>
        <Run FontSize="26.667" FontWeight="Light" Text="{Binding Title}"/>
        <LineBreak/>
        <LineBreak/>
        <Run FontWeight="Normal" Text="{Binding PublicationDate, Converter={StaticResource DateTimeString}}"/>
    </Paragraph>

    <Paragraph LineStackingStrategy="MaxHeight">
        <InlineUIContainer>
            <Image x:Name="image" MaxHeight="480" Margin="0,20,0,10" Stretch="Uniform" Source="{Binding LargeImage, Converter={StaticResource ImageLocation}, ConverterParameter=news}" AutomationProperties.Name="{Binding Title}"/>
        </InlineUIContainer>
    </Paragraph>

    <Paragraph>
        <Run FontWeight="SemiLight" Text="{Binding Content}"/>
    </Paragraph>

</RichTextBlock> 
```

有谁知道为什么会发生这种情况以及如何防止 RichTextBlock 自动截断其内容？

# c# - c# 中的字符串方法是否有空处理程序

> ID：14389302
> 
> 赞同：0
> 
> 时间：2013-01-17T22:27:55.187
> 
> 标签：c#, string, c#-4.0, null, isnull

我可以分配如下变量：

```
if (Session["myVariable"] != null)
{
    string variAble = Session["myVariable"].ToString();
} 
```

有没有一种方法可以检查一个对象是否为空，如果它不为空则赋值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T22:30:42.720

`string variAble = Session["myVariable"] ?? "";`

**编辑**@hatchet 建议的稍微更健壮的形式是：

`string variAble = (Session["myVariable"] ?? "").ToString();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T22:30:38.697

虽然这不是什么新鲜事，但您可以使用[条件运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)来潜在地简化它：

```
string variable = Session["myVariable"] != null ? Session["myVariable"].ToString() : "Fallback"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T22:36:50.953

您可以编写一个扩展方法，因为它们仍然适用于空对象。

```
public static class StringExtensions
{
    public static String ToNullString(this object o)
    {
        return o == null ? "" : o.ToString();
    }
} 
```

不过，我会认为它的形式很糟糕——它会让在你之后支持代码的人感到困惑，甚至会让你在接下来的几个月里感到困惑。最好只做空检查。

# java - 如何创建一个可以被程序的不同部分重用的硬编码查找？

> ID：14389303
> 
> 赞同：1
> 
> 时间：2013-01-17T22:28:07.207
> 
> 标签：java

我有一个在我看来让我困惑的基本问题。

现在我有以下糟糕的设计（在我看来这是糟糕的设计）。我有一个 util 类，它看起来像这样：

```
public class Countries 
{
    public boolean isCountryPresent ( String c )
    {
        //public static final http://en.wikipedia.org/wiki/ISO_3166-1 
        Set<String> myStrings = new HashSet<String>();
        myStrings.add("us"); // Afghanistan
        myStrings.add("af"); // Afghanistan
        myStrings.add("dz"); // Algeria
        myStrings.add("ao"); // Angola
        myStrings.add("az"); // Azerbiajan
        ...

    if ( myStrings.contains(c))
        return true;
    else
        return false;
} 
```

然后我检查是否存在这样的项目：

```
Countries co = new Countries ( );
boolean isPresent = co.isCountryPresent( countryISOCode ); 
```

但我认为每次实例化对象都会浪费资源，不是吗？鉴于国家数据不需要多次编译且不会更改，是否有更有效的方法来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:32:11.127

我通常会这样做：

```
public class Countries 
{
     private static Set<String> myStrings = null
     public static boolean isCountryPresent ( String c )
     {
        if (myStrings == null) {
            myStrings = initializeSet();
        }

        if ( myStrings.contains(c))
            return true;
        else
            return false;
    }
    private static Set<String> initializeSet() 
    {
        //public static final http://en.wikipedia.org/wiki/ISO_3166-1 
        Set<String> countrySet = new HashSet<String>();
        myStrings.add("us"); // Afghanistan
        myStrings.add("af"); // Afghanistan
        myStrings.add("dz"); // Algeria
        myStrings.add("ao"); // Angola
        myStrings.add("az"); // Azerbiajan
        ...
        return countrySet;
    }
} 
```

这样，它会在第一次调用该方法时初始化集合，但对于所有后续调用，旧的初始化被缓存。

您也可以在构造函数中声明它，但我倾向于使用延迟加载方法，因此应用程序不会在启动时等待所有这些内容正确加载，而是在您实际需要时*按需*加载.

同样正如评论中提到的，这可能都是静态的，除非您始终在`Countries`整个代码中重用同一个对象，否则它将为`Countries`您实例化的每个新对象重做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:30:14.623

您可以使用[`enum`](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)或声明在启动时初始化的 Country 的单个静态实例，例如：

```
class Countries {
  public final static Countries instance = new Countries();

  private Set<String> myStrings;
  private Countries() {
    myStrings = new HashSet<String>();
    myStrings.add("us");
    ..
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T22:32:23.670

最简单的转换是将集合移动到类变量，并在构造函数中实例化它：

```
public class Countries 
{
    private Set<String myStrings = new HashSet<String();

    public Countries() {
        //public static final http://en.wikipedia.org/wiki/ISO_3166-1 
        Set<String> myStrings = new HashSet<String>();
        myStrings.add("us"); // Afghanistan
        myStrings.add("af"); // Afghanistan
        myStrings.add("dz"); // Algeria
        myStrings.add("ao"); // Angola
        myStrings.add("az"); // Azerbiajan
        ...
    }

    public boolean isCountryPresent ( String c )
    {
        return myStrings.contains(c);
    }
} 
```

这样，当您第一次构造国家对象时，它只被调用一次。

另请注意，您不需要`if`声明：`contains`返回布尔值，因此您可以直接返回。

编辑：刚刚注意到你的第二个代码段。`Countries`不要每次都创建一个新对象，只需创建一次，然后持久化它。

或者，您可以将此设为静态 ( `private static Set...`,`static {`而不是`public Countries() {`and `public static boolean...`)

然后你就像调用它`Countries.isCountryPresent(SomeCountry);`而不实例化一个新对象。

# php - 服务器接收文件的响应是自动的还是必须手动编码？

> ID：14389305
> 
> 赞同：0
> 
> 时间：2013-01-17T22:28:23.147
> 
> 标签：php, ios, xml

我正在开发一个 iPhone 应用程序，它通过 HTTP 请求将 XML 文件发送到我的 PHP 服务器。
我已经对我的服务器进行了编码并获得了 XML 文件并将其存储在数据库中。现在我想从我的 iPhone 上查看服务器是否获取了我的 XML 文件。
服务器的这个响应，我必须编码还是自动的？
如果它不是自动的，我该怎么做？我必须让服务器向我的 iPhone 发回一个简单的 XML，说明一切都“正常”，并且还要对我的 iPhone 应用程序进行编程以获取 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:36:09.537

假设您已经为您的应用程序设置了一些适当的 API 来查询，只需使用[HTTP Status Codes](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。如果一切正常并且数据已成功插入，请回复回复`200`。如果出现错误，还有许多其他状态代码要发送，例如`500`内部服务器错误。然后，您的客户端应用程序可以解析这些响应并做出适当的反应。

# ruby-on-rails - 将多条记录发布到 rails，wrap_parameters 行为

> ID：14389309
> 
> 赞同：4
> 
> 时间：2013-01-17T22:28:42.477
> 
> 标签：ruby-on-rails, json

我有一个 JSON API。例如，如果我发布像 {"A":"1"} 这样的单个 json 记录，启用 wrap_parameters 的 rails 会将其变为：{"model" => {"A":"1"}}。

我希望用户能够一次提交多条记录，以提高效率，因此他们不必有多个请求。我认为做到这一点的方法是将其简单地包装在这样的数组中：[{"A":"1"},{"B":"2"}]。但是在rails中我得到了这样的结果：

```
"_json"=>[{"A"=>"1"},{"B"=>"2"}]
"model"=>{} 
```

有什么办法可以让rails查看数组并正确解释它？还是我应该只使用_json？

# asp.net-mvc-4 - MVC Grid 删除记录操作执行全页加载，如何停止？

> ID：14389312
> 
> 赞同：0
> 
> 时间：2013-01-17T22:29:07.927
> 
> 标签：asp.net-mvc-4, devexpress

我有一个 mvc 网格。

每条记录旁边都有一个删除按钮。

这个删除按钮对应于一个动作 DeleteRecord。该操作删除此记录并执行 RedirectToAction("MyGrid");。

这很好用，但令人讨厌的是我的重定向操作会导致整个页面重新加载。这是我试图远离的事情，但似乎无法解决这个问题。

我是这样开始的。

```
/MyApp/MyGrid  => click delete
/MyApp/DeleteRecord => redirect
/MyApp/MyGrid => full reload of page 
```

也许这是不可能的，但我尝试通过使用覆盖操作和具有不同操作名称的操作来做到这一点，但这并没有解决我的完全重新加载问题。我是 MVC 的新手，所以也许这甚至是不可能的。我在想，如果我只是在客户端做了一个 ajax.post，我可以摆脱这个问题，但我想得越多，它就越有可能最终以相同的动作执行相同的重定向。

关于如何解决这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T22:41:41.730

实际上，我最终只是绑定了网格的回调函数和网格函数的内联删除，并且它起作用了。虽然，非常骇人听闻，它通过希望进入内联网格删除代码来阻止完整的帖子。虽然，您不能指望回调 javascript 例程按顺序运行，因为这正是 javascript 正常工作的方式。; ○

```
s.SettingsEditing.DeleteRowRouteValues = new { Controller = "Home", Action = "DeleteRecordGrid" };

s.ClientSideEvents.EndCallback = "function(s,e) { OnEndCallback(s, e, 'delete') }";

<script type="text/javascript">

    function deleteWithoutPostback(eVisibleIndex) {
        var okToDelete = confirm("Do you really want to delete this record?");
        if (okToDelete == true) {
            myGrid.DeleteRow(eVisibleIndex);
            myGrid.ClearFilter();
        } else {
            return;
        }
    }

    function OnEndCallback(s, e, callType) {
        if (typeof callType == 'undefined') {
            if (callType == 'delete') {
                myGrid.Refresh();
            }
        }
    }

</script> 
```

# solr - Solr 4.0，TextField 查询给出 NullPointerException

> ID：14389315
> 
> 赞同：2
> 
> 时间：2013-01-17T22:29:15.847
> 
> 标签：solr, solrj, solr-query-syntax

我有我`Solr schema`喜欢的领域-

```
Type - <fieldType name="text" class="solr.TextField" positionIncrementGap="100"/>
Declaration - <field name="description" type="text" indexed="true" stored="true"/> 
```

该`description`字段具有某些文档的值，而其余文档则没有数据。当该字段没有数据时，我没有明确设置任何内容，`description`因为它不是一个`required`字段。

问题是当我使用 - 查询时`description:*`。我得到一个`NullPointerException`.

我没有更改`schema`. 同样，当我查询`description:abc`它时，它仍然适用，`description:*`并且`description:abc*`它给出了一个`NullPointerException`.

*   这是正确的行为吗？
*   `text`当我们不必设置时，是否需要为字段赋予“”值？

例外 -

```
"error":{
   "trace":"java.lang.NullPointerException\n\tat 
        org.apache.solr.schema.TextField.analyzeMultiTerm(TextField.java:139)\n\tat org.apache.solr.search.SolrQueryParser.analyzeIfMultitermTermText(SolrQueryParser.java:147)\n\tat 
    org.apache.solr.search.SolrQueryParser.getWildcardQuery(SolrQueryParser.java:203)\n\tat 
    org.apache.lucene.queryparser.classic.QueryParserBase.handleBareTokenQuery(QueryParserBase.java:1049)\n\tat 
    org.apache.lucene.queryparser.classic.QueryParser.Term(QueryParser.java:358)\n\tat 
    org.apache.lucene.queryparser.classic.QueryParser.Clause(QueryParser.java:257)\n\tat 
    org.apache.lucene.queryparser.classic.QueryParser.Query(QueryParser.java:181)\n\tat 
    org.apache.lucene.queryparser.classic.QueryParser.TopLevelQuery(QueryParser.java:170)\n\tat 
    org.apache.lucene.queryparser.classic.QueryParserBase.parse(QueryParserBase.java:120)\n\tat
     org.apache.solr.search.LuceneQParser.parse(LuceneQParserPlugin.java:72)\n\tat 
    org.apache.solr.search.QParser.getQuery(QParser.java:143)\n\tat 
    org.apache.solr.handler.component.QueryComponent.prepare(QueryComponent.java:118)\n\tat 
    org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:185)\n\tat 
    org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)\n\tat
     org.apache.solr.core.SolrCore.execute(SolrCore.java:1699)\n\tat 
    org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:455)\n\tat 
    org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:276)\n\tat 
    org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1337)\n\tat 
    org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:484)\n\tat 
    org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)\n\tat 
    org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:524)\n\tat 
    org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:233)\n\tat 
    org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)\n\tat 
    org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:413)\n\tat 
    org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)\n\tat 
    org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)\n\tat 
    org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)\n\tat 
    org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)\n\tat 
    org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)\n\tat
     org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)\n\tat 
    org.eclipse.jetty.server.Server.handle(Server.java:351)\n\tat 
    org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)\n\tat 
    org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:47)\n\tat 
    org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890)\n\tat 
    org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944)\n\tat 
    org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:634)\n\tat 
    org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)\n\tat 
    org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:66)\n\tat
     org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:254)\n\tat 
    org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)\n\tat 
    org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)\n\tat 
    java.lang.Thread.run(Thread.java:679)\n",
            "code":500}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:55:10.010

A field of type `solr.TextField` has to have a `Tokenizer` associated with it otherwise it fails for wild character search.

I created a `Jira` bug for the same [here](https://issues.apache.org/jira/browse/SOLR-4318).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:13:15.153

它应该工作并且正常工作。

您是否偶然更改了字段类型定义，然后没有进行完整的重新索引（删除旧索引等）？

I have seen this before but it seemed to have gone away after the index was fully rebuilt. May be something to do with left-over definitions on Lucene level.

# php - mysqli bind_result 和 fetch

> ID：14389317
> 
> 赞同：0
> 
> 时间：2013-01-17T22:29:25.023
> 
> 标签：php, mysqli

我为正在开发的应用程序上的用户创建了一个任意登录系统，并且我正在使用 mysqli 从 MySQL 切换。但是，我遇到了一些问题，因为无论您输入什么数据，它都会成功登录。显然这是错误的，我认为这与我的 fetch 语句有关。这是代码：

```
$sid = /* arbitrary value */
$con = new mysqli($mysql_host,$mysql_user,$mysql_password,$mysql_database);

$stmt = $con->prepare("SELECT uid, pwd FROM schools WHERE uid=?");

$stmt->bind_param("i", $sid);
$stmt->execute();

$stmt->bind_result($schoolid, $password);
$stmt->fetch();

$stmt->close(); 
```

任何人都知道这里发生了什么并且能够用简单的英语向相关的编码新手描述它吗？

编辑：检查系统的其余代码是这样的。输入的用户 ID 是`$sid`，输入和加密的密码是`$cleanpwd`。

```
if ($sid == $schoolid and $cleanpwd == $password) {
    header('Location: loginsuccess.php');
    }

else {
    header('Location: login.php?error=1'); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:38:21.233

看来，如果这是一个登录表单，您是否首先获取数据，然后处理是否正确？或者您是否尝试处理它是否正确（SQL 中的用户名和密码组合）？因为从这里你只是输入一个用户标识并取回一个用户标识和密码，而不检查任何输入的密码是否与与该用户标识关联的数据库密码匹配。

如果您想查看 SQL 中的密码和用户名是否匹配，您应该尝试以下操作：

```
$stmt = $con->prepare("SELECT uid, pwd FROM schools WHERE uid=? AND pass=?");
$stmt->bind_param("is", $sid,$form_password);
$stmt->execute(); 
```

否则您需要稍后检查数据是否匹配。

```
if($_POST['form_pass'] == $password){
//log the user in
} 
```

# java - 文本字段不适用于 BasicGameState

> ID：14389319
> 
> 赞同：0
> 
> 时间：2013-01-17T22:29:27.143
> 
> 标签：java, textfield, lwjgl, slick2d

我已经在一个干净的 BasicGame 上测试了 TextField 并且它有效。（我看到了边框，我可以打字了。）

编码：

```
 TextField lanText;  
            TrueTypeFont font;

            public void init(........)
        {
            font = new TrueTypeFont(new java.awt.Font(java.awt.Font.SERIF,java.awt.Font.BOLD,8),false);
            lanText = new TextField(gc, font, 50, 100, 350, 25);

}

    public void render(.....)
        {  
            lanText.render(gc, g);
        } 
```

但是当我用 BasicGameState 在我的游戏上尝试它时它不起作用。怎么了？（我可以看到边框，但我不能打字）

我有4个州。菜单 0\. 游戏 1\. 合作 2\. 选项 3.

我试图将其添加到状态 2（Coop）。

```
public class Game
extends StateBasedGame
{
    public final int menu = 0;
    public final int game = 1;
    public final int option = 2;
    public final int coop = 3;

    public Game(String gamename)
    {
        super(gamename);
        this.addState(new Menu(menu));
        this.addState(new Game(game));
        this.addState(new Option(option));
        this.addState(new Coop(coop));
    }

public void initStatesList(GameContainer gc)
    throws SlickException
    {
    this.getState(menu).init(gc, this);
    this.getState(game).init(gc, this);
    this.getState(option).init(gc, this);
    this.getState(coop).init(gc, this);
    this.enterState(menu);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:01:55.597

好的，我想通了。这是任何有同样问题的人的代码。

```
import java.awt.Font;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.UnicodeFont;
import org.newdawn.slick.font.effects.ColorEffect;
import org.newdawn.slick.gui.ComponentListener;
import org.newdawn.slick.gui.TextField;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;

public class Coop
        extends BasicGameState
{
    TextField text;
    UnicodeFont font;

    public Coop(int state)
    {
    }

    public void init(GameContainer gc , StateBasedGame sbg)
            throws SlickException
    {
        font = getNewFont("Arial" , 16);
    }

    public void render(GameContainer gc , StateBasedGame sbg , Graphics g)
            throws SlickException
    {
        text.render(gc , g);
        g.setFont(font);
    }

    public void update(GameContainer gc , StateBasedGame sbg , int delta)
            throws SlickException
    {
        font.loadGlyphs();
    }

    public int getID()
    {
        return 3;
    }

    public void enter(GameContainer gc , StateBasedGame sbg)
            throws SlickException
    {
        text = new TextField(gc , font , 150 , 270 , 200 , 35);
    }

    public UnicodeFont getNewFont(String fontName , int fontSize)
    {
        font = new UnicodeFont(new Font(fontName , Font.PLAIN , fontSize));
        font.addGlyphs("@");
        font.getEffects().add(new ColorEffect(java.awt.Color.white));
        return (font);
    }
} 
```

我不知道为什么它需要使用 font.loadGlyphs(); 但没有它，它就行不通。

# active-directory - IIS 7.5 需要将 windows 身份验证连接到我的活动目录

> ID：14389325
> 
> 赞同：1
> 
> 时间：2013-01-17T22:29:52.300
> 
> 标签：active-directory, spring-security, iis-7.5, jboss7.x

我正在使用 iis 7.5，我需要通过我的活动目录使用 Windows 身份验证用户将身份验证连接到 jboss 7.1.1 上的 spring 应用程序。

它应该检查 windows 用户在广告中是否有效。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:38:04.010

如果你想要以下场景：

*   用户在 Windows 中通过身份验证
*   当用户打开 Web 应用程序时，它将自动进行身份验证（**无需输入两次 windows 登录名/密码**）。

那么 Spring Security KERBEROS/SPNEGO 扩展是可行的。有关详细信息，请参阅[此](http://blog.springsource.com/2009/09/28/spring-security-kerberos/)博客条目。

如果您想要一个登录页面（您的用户可以在其中**重新输入他们的 Windows 凭据**），那么您可以在 Spring Security 配置中设置并使用特殊的[ActiveDirectoryLdapAuthenticationProvider](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#ldap-active-directory)。

# android - 无法在 Android JellyBean 上构建 hello world 内核模块

> ID：14389326
> 
> 赞同：2
> 
> 时间：2013-01-17T22:29:58.273
> 
> 标签：android, linux, android-4.2-jelly-bean

我正在尝试在 Android JellyBean 上构建一个简单的内核模块。

代码：

```
#include <linux/module.h>  /* Needed by all modules */
#include <linux/kernel.h>  /* Needed for KERN_ALERT */

MODULE_LICENSE("GPL");
MODULE_AUTHOR("test");
MODULE_DESCRIPTION("Android ko test");

int init_module(void)
{
   printk(KERN_ALERT, "Hello world\n");

   // A non 0 return means init_module failed; module can't be loaded.
   return 0;
}

void cleanup_module(void)
{
  printk(KERN_ALERT "Goodbye world 1.\n");
} 
```

生成文件：

```
obj-m +=hello.o

KERNELDIR ?= ~/android/kernel
PWD := $(shell pwd)
CROSS_COMPILE=~/android/prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin/arm-eabi-
ARCH=arm

default:
    $(MAKE) -C $(KERNELDIR) M=$(PWD) ARCH=arm CROSS_COMPILE=$(CROSS_COMPILE) modules

clean:
    $(MAKE) -C $(KERNELDIR) M=$(PWD) clean 
```

输出：

```
make -C ~/android/kernel M=/home/test/testmod ARCH=arm CROSS_COMPILE=~/android/prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin/arm-eabi- modules
make[1]: Entering directory `/home/test/android/kernel'

  ERROR: Kernel configuration is invalid.
         include/generated/autoconf.h or include/config/auto.conf are missing.
         Run 'make oldconfig && make prepare' on kernel src to fix it.

  WARNING: Symbol version dump /home/test/android/kernel/Module.symvers
           is missing; modules will have no dependencies and modversions.

  CC [M]  /home/test/testmod/hello.o
In file included from <command-line>:0:
/home/test/android/kernel/include/linux/kconfig.h:4:32: error: generated/autoconf.h: No such file or directory
In file included from /home/test/android/kernel/arch/arm/include/asm/types.h:4,
                 from include/linux/types.h:4,
                 from include/linux/list.h:4,
                 from include/linux/module.h:9,
                 from /home/test/testmod/hello.c:1:
include/asm-generic/int-ll64.h:11:29: error: asm/bitsperlong.h: No such file or directory
In file included from /home/test/android/kernel/arch/arm/include/asm/posix_types.h:38,
                 from include/linux/posix_types.h:47,
                 from include/linux/types.h:17,
                 from include/linux/list.h:4,
                 from include/linux/module.h:9,
                 from /home/test/testmod/hello.c:1:
include/asm-generic/posix_types.h:70:5: warning: "__BITS_PER_LONG" is not defined
error, forbidden warning: posix_types.h:70
make[2]: *** [/home/test/testmod/hello.o] Error 1
make[1]: *** [_module_/home/test/testmod] Error 2
make[1]: Leaving directory `/home/test/android/kernel'
make: *** [default] Error 2 
```

如果我按照输出中的建议，在内核上运行“make oldconfig && make prepare”，它会引导我完成几十个内核配置是/否问题。在那之后，编译仍然失败，下一个错误是关于 bitsperlong.h 的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T15:19:44.987

Android 将输出二进制文件放在 out 目录下。因此，例如一个可以拥有`out/target/product/<target name>/obj/KERNEL_OBJ/`或`$ANDROID_PRODUCT_OUT/obj/KERNEL_OBJ/`如果`$ANDROID_PRODUCT_OUT`被定义。该目录的名称可能与不同的供应商不同，但就是包含`vmlinux`.

`make`因此，当您在 Android repo 下编译内核模块时，您应该在模块目录中提交如下命令。

```
make -C $ANDROID_PRODUCT_OUT/obj/KERNEL_OBJ/ M=`pwd` ARCH=arm CROSS_COMPILE=arm-eabi- modules 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T04:28:53.290

Make modules 应该在编译内核至少一次之后完成。您还没有编译内核，这就是 Module.symvers 缺失的原因。在编译过程中，会创建某些头文件，例如 asm/bitsperlong.h。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:37:41.747

首先确保您已在指定路径中编译内核。那是

```
" /home/test/android/kernel" but you are using 
" /home/android/kernel "     during compilation of module
KERNELDIR ?= ~/android/kernel has to be KERNELDIR ?= ~/test/android/kernel 
```

如果没有，则在`~/android/kernel`目录中运行以下命令来编译内核。

```
make ARCH=arm CROSS_COMPILE=~/test/android/prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin/arm-eabi 
```

编译内核后，您将在内核的 System.map 文件中定义此“__BITS_PER_LONG”变量，即

```
~/test/android/kernel/System.map 
```

在此之后，您将能够毫无障碍地编译您的模块

# widget - 一个覆盖 GTK 工具栏/小部件

> ID：14389328
> 
> 赞同：4
> 
> 时间：2013-01-17T22:30:14.330
> 
> 标签：widget, gtk, overlay, cairo, gtk2

我正在使用 GTK+2.0 和 Cairo 在 C 中编写自定义应用程序。仅出于学习目的（如果成功，则用于部署），我希望重新创建类似于当鼠标移动到窗口上的给定区域时出现的覆盖工具栏/小部件（如果术语不正确，我很抱歉） , 并在鼠标移开时消失。正如我想象的那样，工具栏应该出现在现有小部件的顶部，而不会取代它们或以任何方式改变小部件包装。有没有可能实现？如果是，您能否指出相关的教程/示例和/或概述一种方法来做同样的事情？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T09:42:54.417

不确定这在 GTK2 中是否容易实现。但是，我最近了解到，有一个 GtkLayout 小部件允许小部件的像素精确渲染，因此您甚至可以将一些小部件显示在其他小部件之上。或者您可以实现自己的容器小部件。

请注意，从 GTK3 开始，GtkOverlay 似乎可以满足您的需求。

你也可以看看 Clutter，它可能允许这样做。此外，还有为 GTK 4 合并 GTK 和 Clutter 的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T01:06:12.840

鲜为人知的[GtkHandleBox](http://developer.gnome.org/gtk3/stable/GtkHandleBox.html)能够做你想做的事。我必须警告你它在 GTK+3 中已被弃用，因为它违背了通常的 UI 方向。此外，正确的定位将受制于 Windows 管理器的怪癖，所以我预计在这方面会出现一些问题。

# c#-4.0 - 更改位于另一个域中的 Active Directory 计算机中的用户密码

> ID：14389330
> 
> 赞同：1
> 
> 时间：2013-01-17T22:30:15.890
> 
> 标签：c#-4.0, active-directory

我有这个代码来更改活动目录中用户的密码：

```
 DirectoryEntry directoryEntry = new DirectoryEntry("LDAP://0.0.0.0/CN=John Smith,OU=12345,OU=Project,DC=mysite,DC=local");

 directoryEntry.AuthenticationType = AuthenticationTypes.Secure;
 directoryEntry.Username = "adminusername";
 directoryEntry.Password = "adminpassword";

 directoryEntry.Invoke("SetPassword", new object[] { "newPassword" });
 directoryEntry.Properties["LockOutTime"].Value = 0; //unlock account 
```

当我尝试将此代码直接执行到直接位于活动的服务器中时，这可以完美地工作，但是当我尝试使用位于另一个域中的机器执行它时，我收到此错误：

```
System.Reflection.TargetInvocationException: Exception has been thrown by the ta
rget of an invocation. ---> System.Runtime.InteropServices.COMException: The RPC
 server is unavailable. (Exception from HRESULT: 0x800706BA) 
```

这是我唯一的一个限制，因为使用相同的管理员用户和其他凭据，我可以添加用户、删除用户、添加组、重命名任何对象等......但不能更改密码。

并不是说我尝试使用此代码并且它也不起作用：

```
 public bool SetPassword(string userName, string newPassword, Domain.ActiveDirectory.Credentials credentials)
  {
     try
     {
        using (var pc = new PrincipalContext(ContextType.Domain, credentials.ServerName, credentials.OrganizationalUnitsDn + "," + credentials.DomainControllerName))
        {
           using (var user = UserPrincipal.FindByIdentity(pc, IdentityType.SamAccountName, userName))
           {
              if (user == null)
              {
                 return false;
              }

              user.SetPassword(newPassword);

              return true;
           }
        }
     }
     catch (Exception e)
     {
        return false;
     }
  } 
```

有人有想法吗？

谢谢你。

# c# - 尝试从 C# 查询 SQL Server 2008，程序似乎遇到了我无法解释的无限循环

> ID：14389332
> 
> 赞同：0
> 
> 时间：2013-01-17T22:30:18.330
> 
> 标签：c#, sql, sql-server-2008, sqlcommand

我有一个 SQL Server 数据库，我正在尝试查询它。首先，我从名为 的表中检索所有名称和 id `Firms`，用它来填充`ListBox`. 当我单击该列表框中的一个项目时，我想`ListBox`用为该公司工作的员工填充另一个项目。

我使用这个查询（在 SQL Server 2008 中测试）

```
SELECT
    employee.Name
From
    employee, Firm
WHERE
    Firm.Name = 'Some Firm' AND
    Firm.F_Id = employee.F_Id 
```

这是单击列表框项的代码：

```
private void Firm_ListBox_SelectedIndexChanged(object sender, EventArgs e)
{
        String Name = "";
        Int32 F_Id = -1;

        // This for would be useful later on in the program
        // For now it can be ignored
        for (int i = 0; i < Firms.Count(); i++)
        {
            if (Firms.ElementAt(i).GetFirmName().Equals(Firm_ListBox.SelectedItem.ToString()))
            {
                Name = Firms.ElementAt(i).GetFirmName();
                F_Id = Firms.ElementAt(i).GetF_Id();
            }
        }

        MessageBox.Show(Name.ToString() + "\n\t" + F_Id.ToString()); // first message box

        SqlCommand SqlCommand = new SqlCommand(
            "SELECT employee.Name From employee, Firm WHERE Firm.Name = " + "'" + 
             Name + "'" + " AND Firm.F_Id = employee.F_Id", SqlConnection);
        SqlDataReader SqlDataReader = SqlCommand.ExecuteReader();

        MessageBox.Show("Test: " + SqlDataReader.GetString(1)); // second message box

        Employee_ListBox.Items.Clear();
        while (SqlDataReader.Read())
        {
            Employee_ListBox.Items.Add(SqlDataReader.GetString(1));
            MessageBox.Show(SqlDataReader.GetString(1));
        }

        SqlDataReader.Close();
    } 
```

第一个`MessageBox`有效，但第二个没有出现。我不知道这里发生了什么（更不用说我`ListBox`的没有被填充）。

**编辑**在调试时，我意识到在读取操作之后，当我尝试获取字符串时，我得到了一个可怕的异常（我添加了一个 try-catch 块）。我什至无法开始阅读它，除了这个

> *不存在数据时尝试读取无效。*

吸引住了我的眼球。然而我无法解释。连接有效，我测试过的查询。即使它没有返回任何东西......它不应该什么都不打印**并**移动一个吗？

**EDIT2**似乎我得到了一个无效的操作异常，不是在阅读器上，而是在消息框上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:18:45.043

在第二个消息框中，您已将其作为消息的一部分：

```
SqlDataReader.GetString(1) 
```

因为您还没有从数据阅读器中读取任何内容，所以此命令将抛出您看到的异常。

命令

```
SqlDataReader.Read() 
```

需要在尝试 GetString 方法之前出现。此外，您应该在执行 GetString 方法之前验证是否已读取数据。

# apache - Apache Rewrite 添加 html 扩展

> ID：14389333
> 
> 赞同：0
> 
> 时间：2013-01-17T22:30:19.397
> 
> 标签：apache, mod-rewrite

我正在尝试让 apache RewriteRule 获取 url 并返回 url + .html

例如：“www.domain.com/about”应该服务于页面“www.domain.com/about.html”

我已经尝试过 SO 的许多解决方案，但我相信由于站点布局会出现一些复杂情况。

我在 Network Solutions 上托管，所以它是共享托管，这是一个开发站点，所以我目前将 dev.domain.com 指向 /htdocs/dev

目录结构

```
-htdocs
--(contains existing sites files)
--.htaccess

----dev
------(contains dev site files)
------.htaccess 
```

所以你可以看到有一个现有的 .htaccess 文件可能在做某事并且可能存在子域问题，我不完全确定，这是我第一次使用 Apache。

这是我现有的 .htaccess，它位于 /htdocs/dev 文件夹中

```
RewriteEngine On
RewriteBase /dev
RewriteCond %{REQUEST_URI}.html -f [NC]
RewriteRule ^ %{REQUEST_URI}.html [L] 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T00:23:13.297

您正在指示 Apache 进行文件检查 ( `-f`)，但它不知道在哪里查找。只是改变

```
RewriteCond %{REQUEST_URI}.html -f [NC] 
```

至

```
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI}.html -f [NC] 
```

这样，Apache 就有了来自文件系统根目录的完全限定路径。

# c++ - 重载的缺点是什么？

> ID：14389334
> 
> 赞同：1
> 
> 时间：2013-01-17T22:30:20.507
> 
> 标签：c++, performance, overloading

不是专业的程序员，但偶尔会写程序，最近我听到一个人给我们讲了一些编程技巧，他说的一件事是，一个称为运算符和函数重载的 C++ 特性会损害程序的性能。

然后我做了一些测试，在执行速度方面，我发现一些程序与函数和运算符重载没有区别，那么函数/运算符重载的真正缺点是什么，如果有的话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:35:53.307

无论如何，函数重载对性能没有影响。重载解决是在编译时完成的。以不同的方式命名你的函数而不是重载相同的名称并不重要。

在某种程度上，运算符重载同上。运算符重载的潜在问题是您可能不太清楚自己正在使用它们，因此您可能会在没有意识到的情况下使用昂贵的操作。使用常规函数而不是重载运算符可以使这一点更加明显。但我认为这充其量只是一个薄弱的论点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T22:34:23.287

重载不会导致执行速度下降。这个人可能混淆了虚函数，这些虚函数通常是用指针间接实现的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-25T04:23:24.910

过载不会影响性能的速度。相反，它降低了文档的复杂性。程序员以更好的方式使用内存，并且更容易通过函数名称来跟踪函数。程序员获得了使用相同名称定义近乎相似的功能的优势。

# python - 为什么 PyCrypto 不使用默认的 IV？

> ID：14389336
> 
> 赞同：13
> 
> 时间：2013-01-17T22:30:24.950
> 
> 标签：python, aes, pycrypto

我试图弄清楚为什么我的 Python 客户端和 Ruby 服务器在如何加密数据方面存在分歧。我在 Ruby 代码和我的代码中看到的唯一区别是它们没有指定初始化向量，因此它回退到所有 \x0 的默认值

当我尝试在没有 iv 的情况下实例化 PyCrypto 时，它给了我一个错误。这是一个例子：

```
from Crypto.Cipher import AES
test = "Very, very confidential data"
key = b'Thirty Two Byte key, made Beef y' 

gryp = AES.new(key, AES.MODE_CBC) 
```

（这个例子本质上是来自 PyCrypto 文档的示例代码，没有指定 IV）文档说 w/r/t IV“它是可选的，当不存在时，它将被赋予全零的默认值。” 但是我收到错误“ValueError: IV must be 16 bytes long”。

所以我可以指定IV，这不是问题本身，但我试图弄清楚它是否认为它不能使用默认值，如果我使用库的方式有其他问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-17T23:49:30.120

这似乎是 Pycrypto 的[AES](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Cipher.AES-module.html)的类文档中的一个错误，因为 AES 实现已更改，因此 IV对于那些需要 1 的模式**不是**可选的（即，您必须自己传递 16 个字节的零，如果是你想怎么做）。

有关某人未指定 IV 并查找在线文档的相同问题，请参阅此[错误报告。](https://bugs.launchpad.net/pycrypto/+bug/1018283)有一个明确需要 IV 的更改，基本上，没有人更新在线文档来反映这一点。Pycrypto 源中的类文档已更新，但需要重新生成在线文档以反映这一点。

来源的新文档指出：

> 对于所有其他模式，它必须是`block_size`字节长。

而不是旧版本的

> 对于所有其他模式，它必须是`block_size`字节长。它是可选的，当不存在时，它将被赋予全零的默认值。

源中指定 iv 的更新示例是：

```
from Crypto.Cipher import AES
from Crypto import Random

key = b'Sixteen byte key'
iv = Random.new().read(AES.block_size)
cipher = AES.new(key, AES.MODE_CFB, iv)
msg = iv + cipher.encrypt(b'Attack at dawn') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-21T08:03:40.660

这是一个对我有用的实现，有一些修复：

```
class AESCipher:

    def __init__(self, key):
        self.bs = 32
        if len(key) >= 32:
            self.key = key[:32]
        else:
            self.key = self._pad(key)

    def encrypt(self, raw):
        raw = self._pad(raw)
        iv = Random.new().read(AES.block_size)
        cipher = AES.new(self.key, AES.MODE_CBC, iv)
        return base64.b64encode(iv + cipher.encrypt(raw))

    def decrypt(self, enc):
        enc = base64.b64decode(enc)
        iv = enc[:AES.block_size]
        cipher = AES.new(self.key, AES.MODE_CBC, iv)
        return self._unpad(cipher.decrypt(enc[AES.block_size:]))

    def _pad(self, s):
        return s + (self.bs - len(s) % self.bs) * chr(self.bs - len(s) % self.bs)

    def _unpad(self, s):
        return s[:-ord(s[len(s)-1:])] 
```

# verilog - verilog：如何操作参数化大小的数组

> ID：14389346
> 
> 赞同：0
> 
> 时间：2013-01-17T22:31:06.933
> 
> 标签：verilog

我对多个数组的操作有疑问。下面的代码适用于固定数量的数组

```
wire [size-1:0] data [0:3];
wire [size-1:0] result;

assign result = data[0]&data[1]&data[2]&data[3]; 
```

但是对于像这样的参数化数字数组，我该如何处理

```
wire [size-1:0] data [0:num-1];
wire [size-1:0] result;

assign result = ???? 
```

任何想法或建议，希望你们有一些简单的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T05:02:20.137

```
wire [size-1:0] data[0:num-1];
wire [size-1:0] data_tmp[0:num-1];
wire [size-1:0] result;

generate
    genvar i;
    for (i=0; i < num; i=i+1) begin
        if (i == 0)
            assign data_tmp[i] = data[i];
        else if (i == num-1)
            assign result = data_tmp[i-1] & data[i];
        else
            assign data_tmp[i] = data_tmp[i-1] & data[i];
    end
endgenerate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T07:41:37.027

我能想到的最好的方法如下：

```
always @* begin
  result = 0;
  for (i=0; i<num; i=i+1) begin
    result = result & data[i];
  end    
end 
```

然而，这有两个潜在的问题：

1.  在 verilog 的敏感度列表中使用数组在技术上是不合法的。我读过*大多数*模拟器/综合工具会按照您对敏感度列表的期望进行操作，但其中一些可能不会。

2.  根据阵列的大小，这可能是可合成的，也可能是不可合成的。大型数组通常被实现为 RAM，并且您通常每个时钟周期只能读取数组的一个值，因此您无法将`and`它们全部放在一起。

# android - Android获取当前区域设置，而不是默认设置

> ID：14389349
> 
> 赞同：347
> 
> 时间：2013-01-17T22:31:25.793
> 
> 标签：android, locale

如何在 Android 中获取用户当前的语言环境？

我可以得到默认的，但这可能不是当前的正确的？

基本上我想要来自当前语言环境的两个字母的语言代码。不是默认的。没有`Locale.current()`

* * *

## 回答 #1

> 赞同：542
> 
> 时间：2013-01-17T22:53:10.567

默认值`Locale`是在运行时从系统属性设置为您的应用程序进程静态构建的，因此它将表示**应用程序启动时**`Locale`在该设备上选择的。通常，这很好，但这确实意味着如果用户在您的应用程序进程运行后更改他们的设置，可能不会立即更新的值。**`Locale``getDefaultLocale()`**

 **如果您出于某种原因需要在应用程序中捕获此类事件，则可以尝试`Locale`从资源`Configuration`对象中获取可用的事件，即

```
Locale current = getResources().getConfiguration().locale; 
```

如果您的应用程序需要更改设置，您可能会发现此值更新得更快。

* * *

## 回答 #2

> 赞同：212
> 
> 时间：2016-09-22T12:29:24.070

Android N（Api 级别 24）更新（无警告）：

```
 Locale getCurrentLocale(Context context){
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N){
            return context.getResources().getConfiguration().getLocales().get(0);
        } else{
            //noinspection deprecation
            return context.getResources().getConfiguration().locale;
        }
    } 
```

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2018-03-13T12:55:18.167

如果您使用的是 Android 支持库，则可以使用`ConfigurationCompat`而不是 @Makalele 的方法来摆脱弃用警告：

```
Locale current = ConfigurationCompat.getLocales(getResources().getConfiguration()).get(0); 
```

或在 Kotlin 中：

```
val currentLocale = ConfigurationCompat.getLocales(resources.configuration)[0] 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-01-17T22:46:53.910

来自[`getDefault`](http://developer.android.com/reference/java/util/Locale.html#getDefault%28%29)的文档：

> 返回用户的首选语言环境。对于此进程，这可能已被 setDefault(Locale) 覆盖。

同样来自`Locale`文档：

> 默认语言环境适用于涉及向用户呈现数据的任务。

看来您应该只使用它。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-12-06T09:09:11.370

以上所有答案 - 不起作用。所以我会在这里放一个适用于 4 和 9 android 的函数

```
private String getCurrentLanguage(){
   if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N){
      return LocaleList.getDefault().get(0).getLanguage();
   } else{
      return Locale.getDefault().getLanguage();
   }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-01-22T15:24:03.300

根据官方[文档](https://developer.android.com/reference/android/support/v4/os/ConfigurationCompat) **ConfigurationCompat**在支持库中已弃用

你可以考虑使用

`LocaleListCompat.getDefault()[0].toLanguageTag()`第 0 位将是用户首选的语言环境

要在第 0 位获得默认语言环境将是 `LocaleListCompat.getAdjustedDefault()`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-24T12:16:21.053

我用过这个：

```
String currentLanguage = Locale.getDefault().getDisplayLanguage();
if (currentLanguage.toLowerCase().contains("en")) {
   //do something
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-05-24T05:42:13.193

就目前而言，我们可以使用`ConfigurationCompat`类来避免警告和不必要的样板。

```
Locale current = ConfigurationCompat.getLocales(getResources().getConfiguration()).get(0); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-25T07:20:57.587

我使用了这个简单的代码：

```
if(getResources().getConfiguration().locale.getLanguage().equalsIgnoreCase("en"))
{
   //do something
} 
```**

# javascript - 我应该如何清理 KnockoutJS ViewModels？

> ID：14389351
> 
> 赞同：11
> 
> 时间：2013-01-17T22:31:33.080
> 
> 标签：javascript, knockout.js

我有一个单页应用程序，用户在其中浏览项目列表。反过来，每个项目都有一个项目列表。

通过 AJAX 请求检索到的来自服务器的新项目会更新可观察数组。这一切都很好。

不幸的是，在几页之后，执行的操作数量（以及在 FireFox 和 IE8 等浏览器中使用的内存量）不断增加。我已经追踪到我的可观察数组中的元素没有被正确清理并且实际上仍在内存中的事实，即使我已经用新数据替换了我的可观察数组中的项目。

我创建了一个[小例子](http://jsfiddle.net/gWVDu/6/)来复制我看到的问题：

**HTML：**

```
<p data-bind="text: timesComputed"></p>
<button data-bind="click: more">MORE</button>
<ul data-bind="template: { name: 'items-template', foreach: items }">
</ul>

<script id="items-template">
    <li>
        <p data-bind="text: text"></p>
        <ul data-bind="template: { name: 'subitems-template', foreach: subItems }"></ul>
    </li>
</script>

<script id="subitems-template">
    <li>
        <p data-bind="text: text"></p>
    </li>
</script> 
```

**JavaScript/KnockoutJS 视图模型：**

```
var subItemIndex = 0;

$("#clear").on("click", function () {
  $("#log").empty();
});

function log(msg) {
  $("#log").text(function (_, current) {
    return current + "\n" + msg;
  });
}
function Item(num, root) {
  var idx = 0;

  this.text = ko.observable("Item " + num);
  this.subItems = ko.observableArray([]);
  this.addSubItem = function () {
    this.subItems.push(new SubItem(++subItemIndex, root));
  }.bind(this);

  this.addSubItem();
  this.addSubItem();
  this.addSubItem();
}

function SubItem(num, root) {
  this.text = ko.observable("SubItem " + num);
  this.computed = ko.computed(function () {
    log("computing for " + this.text());
    return root.text();
  }, this);

  this.computed.subscribe(function () {
    root.timesComputed(root.timesComputed() + 1);
  }, this);
}

function Root() {
  var i = 0;

  this.items = ko.observableArray([]);
  this.addItem = function () {
    this.items.push(new Item(++i, this));
  }.bind(this);

  this.text = ko.observable("More clicked: ");
  this.timesComputed = ko.observable(0);

  this.more = function () {
    this.items.removeAll();
    this.addItem();
    this.addItem();
    this.addItem();    
    this.timesComputed(0);
    this.text("More clicked " + i);
  }.bind(this);

  this.more();
}

var vm = new Root();

ko.applyBindings(vm); 
```

[如果您查看 fiddle](http://jsfiddle.net/gWVDu/6/)，您会注意到“日志”包含*每个已创建的 ViewModel*的条目。`SubItem.computed`即使在我预计这些项目中的每一个都早已不复存在之后，计算的属性也会运行。这导致我的应用程序性能严重下降。

**所以我的问题是**：

*   我在这里做错了什么？我是否期望 KnockoutJS 处理我实际上需要手动处理的 ViewModel？
*   我使用`ko.computed`on`SubItem`会导致问题吗？
*   如果 KnockoutJS 不打算处理这些视图模型，我应该如何自己处理它们？

**更新：**经过进一步挖掘，我很确定 in 的计算属性`SubItem`是罪魁祸首。但是，我仍然不明白为什么仍在评估该属性。`SubItem`更新可观察数组时不应该销毁吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T00:40:04.770

JavaScript 垃圾收集器只能在删除所有对它的引用及其依赖项后处理计算的 observable。这是因为 observables 保留了对任何依赖于它们的计算 observables 的引用（反之亦然）。

一种解决方案是在计算出的 observable 不再具有任何依赖项时自行处置。这可以使用这样的辅助函数轻松完成。

```
function autoDisposeComputed(readFunc) {
    var computed = ko.computed({
        read: readFunc,
        deferEvaluation: true,
        disposeWhen: function() {
            return !computed.getSubscriptionsCount();
        }
    });
    return computed;
} 
```

# php - Magento MySQL - 两个 addAttributeToFilter() 的“或”条件

> ID：14389352
> 
> 赞同：0
> 
> 时间：2013-01-17T22:31:35.793
> 
> 标签：php, mysql, magento, conditional

在 Magento 中，我需要在特定类别中获得**没有**特价的产品。

这是我想出的：

```
<?php
$dateYesterday = date( 'm/d/y', mktime( 0, 0, 0, date( 'm' ), date( 'd' ) - 1, date( 'y' ) ) );

$catagoryModel = Mage::getModel( 'catalog/category' )->load( $currentCategoryId );

$productCollection = Mage::getResourceModel( 'catalog/product_collection' );

$productCollection->addAttributeToSelect( 'name' );

$productCollection->addCategoryFilter( $catagoryModel );

$productCollection->addAttributeToFilter( 'special_price', 
    array( 'eq' => '' ) 
);

$productCollection->addAttributeToFilter( 'special_to_date', 
    array( 'date' => true, 'to' => $dateYesterday ) 
);

?> 
```

在上面的查询中，我需要在最后两个过滤器之间使用“OR”条件，语义如下：

```
$productCollection->addAttributeToFilter( 'special_price', 
array( 'eq' => '' ) );

// OR

$productCollection->addAttributeToFilter( 'special_to_date', 
array( 'date' => true, 'to' => $dateYesterday ) ); 
```

换句话说：

```
( special_price = '' OR special_to_date <= $dateYesterday ) 
```

你能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:40:43.010

如果我没记错的话，您需要使用一组条件来创建 OR。
查看[此链接](http://www.magthemes.com/magento-blog/filter-magento-product-collection-using-addattributetofilter-to-create-sql-ors/)以了解我的意思。
在您的情况下，您应该将两个条件合二为一，如下所示

```
$productCollection->addAttributeToFilter(
                array(
                    array('attribute'=>'special_price', 'eq'=>''),
                    array('attribute'=>'special_to_date', 'date' => true, 'to' => $dateYesterday )
                )
            ); 
```

我没有安装 Magento 来试试这个。
也许第二个条件应该略有不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:41:43.697

看看这里（使用 Magento 集合的官方文档）

[http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento)

在您的示例中：

```
$productCollection->addAttributeToFilter(array(
    array(
        'attribute' => 'special_price',
        'eq'        => '',
        ),
    array(
        'attribute' => 'special_to_date',
        'date' => true,
        'to'      => $dateYesterday,
        ),
)); 
```

# java - 如何创建 JavaFX 纹理

> ID：14389354
> 
> 赞同：2
> 
> 时间：2013-01-17T22:31:51.940
> 
> 标签：java, javafx-2, javafx

我可以像这样用 JavFX 制作一个矩形：

```
Rectangle node2 = RectangleBuilder.create()
            .x(-100)
            .y(-100)
            .width(200)
            .height(200)
            .fill(Color.GREEN)
            .build(); 
```

但是我怎样才能让它使用纹理而不仅仅是颜色呢？

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:45:10.010

将填充设置为`ImagePattern`

```
Rectangle node2 = 
  RectangleBuilder.create()
    .x(-100)
    .y(-100)
    .width(200)
    .height(200)
    .fill(
      new ImagePattern(
        new Image("file:flower.png"), 0, 0, 1, 1, true
      )
    )
    .build(); 
```

[ImagePattern javadoc](http://docs.oracle.com/javafx/2/api/javafx/scene/paint/ImagePattern.html)中有其他示例。

对于 JavaFX8，您还可以[通过 css](http://javafx-jira.kenai.com/browse/RT-19455)执行此操作。

# spring - 使用 Spring jdbcTemplate 时的 ConnectionPooling 配置

> ID：14389358
> 
> 赞同：4
> 
> 时间：2013-01-17T22:32:09.897
> 
> 标签：spring, db2, datasource, connection-pooling, jdbctemplate

我正在开发一个需要调用大型机上的 DB2 函数来获取 ID 的应用程序。

在我的 spring 应用程序上下文中，我已经定义了我的 jdbc 模板来查询 zOS 上的 DB2：

```
 <bean id="jdbcTemplateDB2"
       class="org.springframework.jdbc.core.JdbcTemplate">
         <property name="dataSource" ref="dataSourceDB2"/>
    </bean> 
```

然后我定义数据源如下：

```
 <bean id="dataSourceDB2" 
    class="com.ibm.db2.jcc.DB2DataSource">
        <property name="serverName" value="hostname" />
        <property name="portNumber" value="portno"/>
        <property name="databaseName" value="dbname"/>
        <property name="driverType" value="4"/>
        <property name="user" value="userid"/>
        <property name="password" value="password"/>
 </bean> 
```

以上工作。但是，查看 ibm 的 db2jcc.jar 文件，我看到了一个带有连接池的数据源类 - com.ibm.db2.jcc.DB2ConnectionPoolDataSource。所以我尝试使用它而不是上面的那个 - 就像这样：

```
 <bean id="dataSourceDB2"
    class="com.ibm.db2.jcc.DB2ConnectionPoolDataSource">
        <property name="serverName" value="hostname" />
        <property name="portNumber" value="portno"/>
        <property name="databaseName" value="dbname"/>
        <property name="driverType" value="4"/>
        <property name="user" value="userid"/>
        <property name="password" value="password"/>
 </bean> 
```

但是，使用 DB2ConnectionPoolDataSource 会给我以下错误。

```
Cannot convert value of type [com.ibm.db2.jcc.DB2ConnectionPoolDataSource] to required type [javax.sql.DataSource] for property 'dataSource': no matching editors or conversion strategy found 
```

完整的堆栈跟踪如下

```
 Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'classUniqueIdDaoImpl_v2': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jdbcTemplateDB2' defined in class path resource [META-INF/spring/applicationContext-db2.xml]: Initialization of bean failed; nested exception is org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'com.ibm.db2.jcc.DB2ConnectionPoolDataSource' to required type 'javax.sql.DataSource' for property 'dataSource'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [com.ibm.db2.jcc.DB2ConnectionPoolDataSource] to required type [javax.sql.DataSource] for property 'dataSource': no matching editors or conversion strategy found
        at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:307)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
        at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
        at com.slma.euclid.core.dao.MainDB2.main(MainDB2.java:18)
    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jdbcTemplateDB2' defined in class path resource [META-INF/spring/applicationContext-db2.xml]: Initialization of bean failed; nested exception is org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'com.ibm.db2.jcc.DB2ConnectionPoolDataSource' to required type 'javax.sql.DataSource' for property 'dataSource'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [com.ibm.db2.jcc.DB2ConnectionPoolDataSource] to required type [javax.sql.DataSource] for property 'dataSource': no matching editors or conversion strategy found
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:876)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:818)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
        at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:439)
        at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:417)
        at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:559)
        at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:150)
        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
        at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:304)
        ... 13 more
    Caused by: org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'com.ibm.db2.jcc.DB2ConnectionPoolDataSource' to required type 'javax.sql.DataSource' for property 'dataSource'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [com.ibm.db2.jcc.DB2ConnectionPoolDataSource] to required type [javax.sql.DataSource] for property 'dataSource': no matching editors or conversion strategy found
        at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:485)
        at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:516)
        at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:510)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.convertForProperty(AbstractAutowireCapableBeanFactory.java:1406)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1365)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        ... 27 more
    Caused by: java.lang.IllegalStateException: Cannot convert value of type [com.ibm.db2.jcc.DB2ConnectionPoolDataSource] to required type [javax.sql.DataSource] for property 'dataSource': no matching editors or conversion strategy found
        at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:241)
        at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:470)
        ... 33 more 
```

我究竟做错了什么？在实例化 Spring JdbcTemplate 时使用连接池数据源的正确方法是什么？

任何帮助表示赞赏。

-SGB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T06:42:06.123

你读过这个：http: [//forum.springsource.org/showthread.php?66142-How-to-use-javax-sql-datasource-with-a-ConnectionPoolDataSource](http://forum.springsource.org/showthread.php?66142-How-to-use-javax-sql-datasource-with-a-ConnectionPoolDataSource)

它说如果使用正确，com.ibm.db2.jcc.DB2DataSource 已经是一个连接池。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-21T17:04:49.900

**使用Spring**和**DB2ConnectionPoolDataSource**的基于注释的方法：

**应用程序属性**

```
spring.datasource.url=jdbc:db2://DBHOST:50000/DB:currentSchema=MYSCHEMA;currentFunctionPath=MYSCHEMA;\
    clientProgramName=APPNAME-MYSCHEMA;\
    progressiveStreaming=2;retrieveMessagesFromServerOnGetMessage=true;fullyMaterializeLobData=true;\
    clientApplcompat=V12R1M500;jdbcCollection=NULLIDV12R1M500;currentPackageSet=NULLIDV12R1M500;
spring.datasource.username=USER
spring.datasource.password=PWD 
```

**ApplicationConfig.java**

```
@Configuration
@PropertySource("classpath:application.properties")
public class ApplicationConfig {
    private static final Logger LOGGER = LoggerFactory.getLogger(ApplicationConfig.class);

    @Value("${spring.datasource.url}")
    private String url;

    @Value("${spring.datasource.username}")
    private String username;

    @Value("${spring.datasource.password}")
    private String password;

    @Bean
    public DB2ConnectionPoolDataSource dataSource() {
        LOGGER.info("DATASOURCE: " + url);
        DB2ConnectionPoolDataSource ds = new DB2ConnectionPoolDataSource();
        ds.setDriverType(4);
        Properties hostPortDb = splitUrlHostPortDb(url);
        ds.setServerName(hostPortDb.getProperty("server"));
        ds.setPortNumber(Integer.parseInt(hostPortDb.getProperty("port")));
        ds.setDatabaseName(hostPortDb.getProperty("db"));
        Properties paramValuePairs = splitUrlParamValuePairs(url);
        setParamValuePairs(ds, paramValuePairs);
        ds.setUser(username);
        ds.setPassword(password);
        return ds;
    }

    private Properties splitUrlHostPortDb(String url) {
        Properties properties = new Properties();
        int hostIndex = url.indexOf("//");
        int lastColonIndex = url.lastIndexOf(":");
        String hostPortDb = url.substring(hostIndex, lastColonIndex);
        URI uri = URI.create(hostPortDb);
        properties.put("server", uri.getHost());
        properties.put("port", uri.getPort() + "");
        properties.put("db", uri.getPath().substring(1));
        return properties;
    }

    private Properties splitUrlParamValuePairs(String url) {
        Properties properties = new Properties();
        int lastColonIndex = url.lastIndexOf(":");
        String paramValues = url.substring(lastColonIndex + 1);
        paramValues = paramValues.replaceAll(";", "\n");
        try {
            properties.load(new StringReader(paramValues));
        } catch (IOException ex) {
            String msg = "DATASOURCE: " + paramValues;
            LOGGER.error(msg, ex);
            throw new RuntimeException(msg, ex);
        }
        return properties;
    }

    private void setParamValuePairs(DB2ConnectionPoolDataSource ds, Properties properties) {
        for (Object key : properties.keySet()) {
            String value = (String) properties.get(key);
            setter(ds, (String) key, value);
        }
    }

    private void setter(DB2ConnectionPoolDataSource ds, String key, String value) {
        boolean invoked = false;
        String setterName = "set" + StringUtils.capitalize(key);
        try {
            Method[] methods = DB2ConnectionPoolDataSource.class.getMethods();
            for (Method method : methods) {
                if (method.getName().equals(setterName)) {
                    method.setAccessible(true);
                    if (method.getParameterTypes()[0] == String.class) {
                        method.invoke(ds, value);
                        invoked = true;
                    } else if (method.getParameterTypes()[0] == short.class) {
                        method.invoke(ds, Short.parseShort(value));
                        invoked = true;
                    } else if (method.getParameterTypes()[0] == int.class) {
                        method.invoke(ds, Integer.parseInt(value));
                        invoked = true;
                    } else if (method.getParameterTypes()[0] == long.class) {
                        method.invoke(ds, Long.parseLong(value));
                        invoked = true;
                    } else if (method.getParameterTypes()[0] == boolean.class) {
                        method.invoke(ds, Boolean.parseBoolean(value));
                        invoked = true;
                    }
                    LOGGER.info("DATASOURCE: " + method.getParameterTypes()[0] + " " + method + "=" + value);
                }
            }
        } catch (Exception ex) {
            String msg = "DATASOURCE: Assignment " + setterName + "=" + value + " failure - check type of argument.";
            LOGGER.error(msg, ex);
            throw new RuntimeException(msg, ex);
        }
        if (!invoked) {
            String msg = "DATASOURCE: Method " + setterName + " not found - typo in DB URL.";
            LOGGER.error(msg);
            throw new RuntimeException(msg);
        }
    }

} 
```

在 Spring Bean 中使用 DataSource：

```
@Autowired
private DB2ConnectionPoolDataSource dataSource; 
```

和：

```
connection = dataSource.getPooledConnection().getConnection(); 
```

# entity-framework - 使 EntityFramework 先设置一个属性，然后再设置其他属性

> ID：14389365
> 
> 赞同：1
> 
> 时间：2013-01-17T22:32:43.690
> 
> 标签：entity-framework, properties

使用代码优先的 EntityFramework 时，我需要在其他属性之前设置一个属性 - 当它从数据库创建对象时，如何指定它调用属性集的顺序？

例如

```
public class Person
{
    public string Name { get; set; }
    public string Something 
    { 
        get { return something; } 
        set
        {
             something = value + " for " + Name;
        }
    }

    private string something;
} 
```

在上面的代码中，我需要在设置 Something 属性时已经设置 Name 属性。

这不是实际的例子——我知道还有其他方法可以从字面上实现这一点，但我不是在追求这些，只是我如何告诉 EF 在某事之前设置名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:18:42.360

我正在尝试了解您的问题的背景。我将做出以下假设：

1.  传递给 setter 的值不是另一个计算属性
2.  传递给 setter 的值旨在存储在数据库中
3.  如果名称已更新，您是否希望更新某些内容以反映新名称？

我认为您在这里的错误是尝试将派生部分添加到您要存储的值中。在另一个属性中或在 get 上计算漂亮的名称：

**UPDATE**有一个示例覆盖了Something 属性上的get，但由于我认为这是不好的做法，所以将其删除。

```
public class Person
{
public string Name { get; set; }

public string Something { get; set; }

public string getFancySomething { 
    { return Something + " for " + Name; } 
}
} 
```

最后 - （在这里我可以使用一些帮助，因为我没有遇到需要做这样的事情的情况）我的猜测是你不需要以`Something`你尝试的方式存储部分计算的属性，但如果您确实需要，我认为其他详细信息可能会帮助某人为您提供更好的答案。

**更新 2** 如我的评论中所述 - 不确定这是否可行，感觉非常错误，但您可以尝试以下操作：

```
modelBuilder.Entity<Person>().Ignore(x => x.Something); 
```

然后在二传手：

```
public class Person
{
public string Name { 
   get { return Name; }
   set { 
       Name = value;

       Something = lookup();
    }
}
} 
```

同样，这将取决于您的需要，并且不会满足传递此值的任何需要，而且我不确定这是一个好主意。

# shell - 如何从 shell 以交互方式将参数传递给 cURL？

> ID：14389366
> 
> 赞同：2
> 
> 时间：2013-01-17T22:32:46.947
> 
> 标签：shell, curl, arguments, interactive, hardcode

我想创建一个别名以使用 cURL 获取文件，该文件提示：

*   网址
*   输出路径
*   代理的用户名和密码

我如何能够以交互方式执行此操作，而不是对所有内容进行硬编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:32:46.947

以下按预期工作：

```
alias proxyget='read userid?"Userid: "; read passwd?"Password: "; read url?"URL: "; read local?"Local: "; curl -x 1.2.3.4:8080 -U $userid:$passwd  $url -o $local;' 
```

**参考**

*   [使用 cURL 自动化 HTTP 作业](http://curl.haxx.se/docs/httpscripting.html)

*   [卷曲 - 手动](https://curl.haxx.se/docs/manual.html)

*   [阅读手册页 - Bash - SS64.com](https://ss64.com/bash/read.html)

# c# - C# 忽略异常的最佳方法

> ID：14389371
> 
> 赞同：16
> 
> 时间：2013-01-17T22:33:07.933
> 
> 标签：c#, exception

> **可能重复：**
> [忽略 C# 中的异常](https://stackoverflow.com/questions/4913159/ignore-exception-in-c-sharp)

有时在极少数情况下，您真的只想忽略异常。做这个的最好方式是什么？我的方法是捕获异常但不做任何事情。其他的？

```
 try
                        {
                            blah
                        }
                        catch (Exception e)
                        {
                            <nothing here>
                        } 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-17T22:34:42.660

如果您只想捕获，而不是处理异常并忽略它，您可以稍微简化您拥有的内容。

```
try
{
   // code
}
catch
{ } 
```

以上是针对任何异常，如果你只想忽略某个异常却让其他异常冒出来，你可以这样做

```
try
{
   // code
}
catch (SpecificException)
{ } 
```

如果您确实忽略了这样的异常，最好在 catch 块中包含一些注释，说明您为什么忽略这样的异常。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T22:34:40.857

```
try
{
    DoBlah();
}
catch { } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T22:34:43.030

它可能是这样的

```
try
{
    //blah
}
catch{} 
```

如果要忽略特定异常

```
try
{
    //blah
}catch(YourException){} 
```

# c++ - Bullet 碰撞检测库是否提供对世界对象几何图形的布尔运算？

> ID：14389372
> 
> 赞同：2
> 
> 时间：2013-01-17T22:33:09.537
> 
> 标签：c++, bullet

我需要类似[CGAL 在 3d 网格之上](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Nef_3/Chapter_main.html)但在 lib Bullet 中提供的简单布尔运算。所以我想知道 Bullet 中的网格是否有 3D 布尔运算？[（在手册](http://www.bulletphysics.com/ftp/pub/test/physics/Bullet_User_Manual.pdf)中找不到任何专门的章节，我是瞎了吗？）

# java - 获取strings.xml中的所有字符串

> ID：14389373
> 
> 赞同：4
> 
> 时间：2013-01-17T22:33:14.063
> 
> 标签：java, android, string, localization, iteration

在我的应用程序中，为了进行本地化，我有一个`values-ar`用于存放阿拉伯语字符串的文件夹。问题是在没有安装阿拉伯语的手机中，阿拉伯语字母似乎没有连接。我正在使用[ArabicReshape 类](https://github.com/AZIZHUSS/Arabic-Reshaper/blob/master/src/com/AzizHuss/ArabicRehaper/ArabicReshape.java)来加入阿拉伯字母，但由于我的字符串太多，我无法手动继续一个一个地应用 reshaper 类。

我想知道我是否可以从文件中获取**所有**`strings.xml`字符串，并通过循环将类一次性应用于字符串。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T22:57:42.967

我不明白为什么您需要遍历所有字符串而不是在需要一个特定字符串时调用该类。

但正如你所问...

我想这可能会对你有所帮助;-)

```
Field[] fields = R.string.class.getFields();
    for(final Field field : fields) {
       String name = field.getName(); //name of string
       try{
           int id = field.getInt(R.string.class); //id of string
       }catch (Exception ex) {
           //do smth
       }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T23:13:13.587

您需要做的是将您的**LOCALE**设置为*AR*，以便资源管理器让您从 values-ar/strings.xml 中提取字符串，然后使用反射[R.string.class.getFields()获取](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getFields%28%29)[Field](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Field.html)的列表. 然后遍历你的字符串并进行重塑。

尝试类似下面的代码片段：

```
Resources resources = getResources();
int resourceId = 0;
String resourceString;
Field[] stringFields = R.string.class.getFields();
for(Field stringField : stringFields) {

    try {
        resourceId = stringField.getInt(R.string.class);
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
        continue;
    } catch (IllegalAccessException e) {
        e.printStackTrace();
        continue;
    }

    resourceString = resources.getString(resourceId);
    if(resourceString != null && resourceString.length() > 0) {
        // do your reshaping on the resoureString
    }
} 
```

# android - 在应用程序中删除哪些不必要的 Phonegap 插件？

> ID：14389377
> 
> 赞同：9
> 
> 时间：2013-01-17T22:33:52.140
> 
> 标签：android, performance, cordova, phonegap-plugins

**设想**

我有一个小的 Android Phonegap/Cordova 2.3.0 应用程序，我查看了 /res/xml/config.xml 文件，发现那里有很多插件。

这是一个非常小的应用程序，我想，我使用的只是通知和 ChildBrowser 插件。

**问题：**我想知道删除所有其他插件条目是否安全。如果是，那么：

1）仅从 /res/xml/config.xml 中删除它们就足够了吗？

2) 哪些插件是强制性的（没有它，任何基本应用程序都无法工作）？例如，第一个（“App”插件），我认为它是必需的？

3) 删除插件会提高我的应用程序的速度吗？或者更小的安装大小或 .apk 大小。

有关详细信息，这是我的 XML 文件的一部分：

```
<plugins>
    <plugin name="App" value="org.apache.cordova.App"/>
    <plugin name="Geolocation" value="org.apache.cordova.GeoBroker"/>
    <plugin name="Device" value="org.apache.cordova.Device"/>
    <plugin name="Accelerometer" value="org.apache.cordova.AccelListener"/>
    <plugin name="Compass" value="org.apache.cordova.CompassListener"/>
    <plugin name="Media" value="org.apache.cordova.AudioHandler"/>
    <plugin name="Camera" value="org.apache.cordova.CameraLauncher"/>
    <plugin name="Contacts" value="org.apache.cordova.ContactManager"/>
    <plugin name="File" value="org.apache.cordova.FileUtils"/>
    <plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/>
    <plugin name="Notification" value="org.apache.cordova.Notification"/>
    <plugin name="Storage" value="org.apache.cordova.Storage"/>
    <plugin name="Temperature" value="org.apache.cordova.TempListener"/>
    <plugin name="FileTransfer" value="org.apache.cordova.FileTransfer"/>
    <plugin name="Capture" value="org.apache.cordova.Capture"/>
    <plugin name="Battery" value="org.apache.cordova.BatteryListener"/>
    <plugin name="SplashScreen" value="org.apache.cordova.SplashScreen"/>
    <plugin name="Echo" value="org.apache.cordova.Echo" />
    <plugin name="StatusBarNotification" value="com.phonegap.plugins.statusBarNotification.StatusBarNotification"/>
    <plugin name="InAppBrowser" value="org.apache.cordova.InAppBrowser"/>
    <plugin name="ChildBrowser" value="com.phonegap.plugins.childBrowser.ChildBrowser"/>
    <plugin name="PushNotification" value="com.pushwoosh.plugin.pushnotifications.PushNotifications" onload="true">
</plugin> 
```

PS：我搜索了整个互联网，没有任何关于Android的有用信息，所以问。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T02:40:06.977

在回答您的问题时：

1）从 config.xml 中删除它们不会将它们从您的应用程序中删除，它只会使调用该功能变得不可能。

2) 你不应该删除 App、Device 或 NetworkStatus。没有它们，您将不会获得“设备就绪”事件。

3）它不会使您的应用程序更快。这些类是延迟加载的，即仅在首次使用时实例化。它不会使您的 .apk 变得更小，因为这些类都在您的应用程序中包含的 cordova.jar 文件中。

# multithreading - 是否存在任何基于数组的有界无等待堆栈？

> ID：14389378
> 
> 赞同：8
> 
> 时间：2013-01-17T22:33:59.677
> 
> 标签：multithreading, algorithm, data-structures, stack, lockless

我有一个问题需要我使用高并发、无等待的堆栈实现。我必须提前预分配所有内存（没有垃圾收集或 malloc），并且堆栈的大小是可以接受的（如果堆栈已满，则推送可能返回 false）。

我熟悉 Nir ​​Shavit 的堆栈实现：[http](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.156.8728) ://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.156.8728 ...但这依赖于链表和垃圾收集。我需要基于数组的东西。

看起来 ACM 上有一个：http: //dl.acm.org/citation.cfm?id= [1532611](http://dl.acm.org/citation.cfm?id=1532611)虽然我对低下载率和引用持怀疑态度。

理想的答案是参考代码（在 C/C++ 中）我可以简单地窃取:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:00:14.440

你看过windows DDI InterlockedPushEntrySList() 和InterlockedPopEntrySList() 吗？它们不是基于数组的，但它们是无锁的，并使用处理器原子指令从堆栈中添加和删除项目。它不是免费等待，但也许它对你有用......

# c# - 如何使用浏览器探索 WCF 方法？

> ID：14389385
> 
> 赞同：0
> 
> 时间：2013-01-17T22:34:36.307
> 
> 标签：c#, .net, wcf, webhttpbinding

我有一个 net.tcp 服务，我想让其他平台（特别是 PHP）可以访问它。为此，我正在使用 http 绑定。

我正在创建一个 http 端点：

```
ServiceHost svh = new ServiceHost(typeof(MyService));
var httpLocation = "http://" + address + ":4041";
svh.AddServiceEndpoint(typeof(IMyService), new WebHttpBinding(WebHttpSecurityMode.None), 
                                   httpLocation);

svh.AddServiceEndpoint(
                    ServiceMetadataBehavior.MexContractName,
                    MetadataExchangeBindings.CreateMexHttpBinding(),
                    httpLocation + "/mex"
                    );

svh.Open(); 
```

现在，当我尝试通过浏览器浏览服务时`http://localhost:4041`，我得到：

```
<Fault xmlns="http://schemas.microsoft.com/ws/2005/05/envelope/none">
<Code>
<Value>Sender</Value>
<Subcode>
<Value xmlns:a="http://schemas.microsoft.com/ws/2005/05/addressing/none">a:ActionNotSupported</Value>
</Subcode>
</Code>
<Reason>
<Text xml:lang="en-US">
The message with Action '' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver. Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).
</Text>
</Reason> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T06:11:33.623

您是否尝试过访问`http://localhost:4041/MyService.svc?wsdl`？

不确定您的服务在设计上是否符合 REST，这就是您使用 WebHttpBinding 的原因。如果您的服务实际上是 REST-ful，那么它的格式应该是 `http://localhost:4041/MyService.svc/MyMethod/MyData`，您应该在浏览器上看到结果。基于[此](http://forums.asp.net/t/1786951.aspx/1)ASP.NET 线程，您需要附加一个`WebHttpBehavior`.

如果您的服务不是 REST-ful，则应`BasicHttpBinding`根据您的要求考虑（使用常规 SOAP 消息）或其表亲（请参阅[此](https://stackoverflow.com/questions/2650785/basichttpbinding-vs-wshttpbinding-vs-webhttpbinding)SO 线程）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:43:35.430

When browsing, make sure to include the full path to the `.svc` or `.asmx` along with a trailing `?wsdl`.

```
localhost:4041/ServiceVirtualDirectory/Service.svc?wsdl 
```

# vb.net - 在 VB 2010 中将二进制值从注册表转换为字符串

> ID：14389393
> 
> 赞同：1
> 
> 时间：2013-01-17T22:34:47.540
> 
> 标签：vb.net, visual-studio-2010

我正在尝试从注册表中提取一个二进制格式的值并将其转换为字符串并将其输入到文本框中。当我运行我的代码时，文本框是空的。我检查了注册表，那里有一个二进制值，并检查了 VB 中的代码。下面是我获取值并将其转换并将其添加到文本框中的代码。

```
 Dim LANDeskVirus As String = CStr(My.Computer.Registry.GetValue _
        ("HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\LANDesk\ManagementSuite\WinClient\Antivirus", _
        "PatternFileDate", Nothing))

    Dim LANDeskVirusDefintion As String = Convert.ToString(LANDeskVirus)
    Dim BinaryText As String = LANDeskVirusDefintion
    Dim Characters As String = Regex.Replace(BinaryText, "[^01]", "")
    Dim ByteArray((Characters.Length / 8) - 1) As Byte
    For Index As Integer = 0 To ByteArray.Length - 1
        ByteArray(Index) = Convert.ToByte(Characters.Substring(Index * 8, 8), 2)
    Next
    TextBox1.Text = (ASCIIEncoding.ASCII.GetString(ByteArray)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:59:03.783

使用 Regedt32.exe 查看注册表。如果该键值的类型是 REG_SZ，那么它是一个字符串，您可以直接将其分配给文本框。

```
TextBox1.Text = My.Computer.Registry.GetValue _
    ("HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\LANDesk\ManagementSuite\WinClient\Antivirus", _
    "PatternFileDate", Nothing) 
```

如果它类似于 REG_DWORD，那么您可以将其转换为字符串，然后将其分配给文本框，如下所示：

```
TextBox1.Text = CStr(My.Computer.Registry.GetValue _
    ("HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\LANDesk\ManagementSuite\WinClient\Antivirus", _
    "PatternFileDate", Nothing)) 
```

使用 8 个字节的 REG_BINARY 值，您可能可以获得这样的日期。（您可能需要使用 .FromBinary 而不是 .FromFileTime）

```
dim b() as byte
b = CStr(My.Computer.Registry.GetValue _
        ("HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\LANDesk\ManagementSuite\WinClient\Antivirus", _
        "PatternFileDate", Nothing))
TextBox1.Text = DateTime.FromFileTime(BitConverter.ToUInt64(b, 0)).ToString 
```

# powershell - 使用 PowerShell get-eventlog 查询多个日志时在表中显示 LogName

> ID：14389400
> 
> 赞同：1
> 
> 时间：2013-01-17T22:35:33.227
> 
> 标签：powershell

我是 PowerShell 的新手，我正在尝试获取一组日志的最近事件（现在用于测试目的的应用程序和系统）。
缺少的是最终输出中的一列，显示了事件来自的日志。
我尝试在格式表之前通过管道输出输出以获取成员以查看是否存在包含日志名的属性，并且似乎没有。
有解决方法吗？

我现在拥有的是：

```
"application", "system" | foreach { Get-EventLog -LogName $_ -Newest 10 } | sort time -Descending | ft timegenerated, LogName, source, message -wrap -AutoSize 
```

这就是我想要的，但是 LogName 列是空白的，因为没有这样的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:43:44.267

有人可以稍微清理一下，但你可以试试这个：

```
"application", "system" | foreach { $events = Get-EventLog -LogName $_ -Newest 10; $events | Add-Member -MemberType NoteProperty -Name LogName -Value (Get-Culture).TextInfo.ToTitleCase($_); $events } | sort timegenerated -Descending | ft timegenerated, LogName, source, message -wrap -AutoSize 
```

我修复了排序命令（错字）并将日志名格式化为正确的（大写第一个字母）以清理它。

# c++ - 带有模板类成员的 C++ 模板类

> ID：14389401
> 
> 赞同：-3
> 
> 时间：2013-01-17T22:35:40.880
> 
> 标签：c++, class, templates

在模板类中编写模板成员类参数的当前语法是什么。

这就是我一直在尝试做的事情：

```
template <class T>
    class Node
    {
    public:
        Node(); // constructor 
        Node(const Node<T> &);           // copy constructor 
        ~Node();             // destructor
        T value;
        Node *next;
    };

template <class T> 
class Linked_list
{
public:
    Linked_list(); // constructor 
    Linked_list(const Linked_list<T> &); // copy constructor 
    ~Linked_list();             // destructor
    T pop();
    void push(T value);
    T top();
    bool is_empty();
    void clear();

private:
    Node<T> *head; // COMPILER ERROR
}; 
```

为什么这是编译器错误？

```
Node<T> *head; // COMPILER ERROR 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:14:11.703

也许当你打电话时：

```
Node<T> *head; 
```

T 不是对象类型，它不知道如何构造它。尝试：

```
Node<std::string> *head; 
```

或类似的东西。T 不是对象类型，它就像一个变量名，只是它实际上是类 Node 和 LinkedList 中的变量类型。

# lotus-notes - 如何将视图复制到多个 Notes 数据库？

> ID：14389411
> 
> 赞同：0
> 
> 时间：2013-01-17T22:36:21.577
> 
> 标签：lotus-notes

我们有一堆设计相似的数据库。它们都有一些继承自各种模板的设计元素。其中许多具有需要更新的特定视图，但未标记为从模板继承。

虽然我知道我可以从数据库中删除视图，但我不确定如何在不手动操作的情况下将模板中的视图添加到每个数据库中。

如何以编程方式将设计元素从一个数据库复制到另一个数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T07:57:56.433

我不确定为什么你不能仅仅将这些视图标记为从模板继承。无论如何，视图也是注释，您应该能够以这种方式复制视图：

```
lotus.domino.Database db = session.getCurrentDatabase();
db.getDocumentByUNID(db.getView("myview").getUniversalID()).copyToDatabase(dbTarget); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T04:53:34.810

您不能直接复制 NotesView。但是你可以通过 DXLExporter 和 DXLImporter 来完成。这只是复杂且浪费时间。

我们有另一种方法可以做到这一点。而不是复制视图。我们可以复制 viewColumn 并在所有其他数据库中创建一个新视图。将这些列粘贴到其中。

```
Set notesViewColumn = notesView.CopyColumn( sourceColumn [ , destinationIndex& ] ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T06:02:12.297

我知道它不能完全回答您的问题，但我想提出一种不同的方法。

您可以在模板和所有数据库中拥有视图。然后您可以在配置文件中添加一个选项来启用或禁用该视图。在大纲中，您可以根据配置文件设置隐藏或显示视图。

# visual-c++ - 以下代码中的一些疑问

> ID：14389413
> 
> 赞同：0
> 
> 时间：2013-01-17T22:36:27.523
> 
> 标签：visual-c++

看看下面的代码一次，通过澄清我的疑问来帮助我。我已经对我有疑问的每一行发表了我的疑问。此外，它是一个巨大代码的一部分。所以请忽略变量声明和所有。

整个代码运行完美，编译时没有错误。

```
double Graph::Dijkstra( path_t& path )
{
    int* paths = new int[_size];
    double min = dijkstra(paths); // **is a function call or not? bcz i didn't found any function in the code**
   if(min < 0) { delete[] paths; return -1;}

    int i = _size - 1;  
    while(i>=0)
    {       
        path.push(i);   // **when will the program come out of this while loop, i'm wondering how does it breaks?** 
        i=paths[i];         
    }

    path.push(0); 

    delete[] paths;
    return min;
} 
```

[此处](http://read.pudn.com/downloads155/sourcecode/others/689480/ksp/Graph.cpp__.htm)提供了完整的编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:39:23.937

```
 double min = dijkstra(paths); // **is a function call or not? bcz i didn't found any function in the code** 
```

几乎可以肯定是。但是，它可以是自由函数、成员函数、宏调用的函数或其他东西。没有看到其余的代码，我们只能猜测。

```
while(i>=0)
{       
    path.push(i);   // **when will the program come out of this while loop, i'm wondering how does it breaks?** 
    i=paths[i];         
} 
```

The program will come out of the loop as a soon as `i` is less than zero. If I had to guess, I'd say the each node in the path contains a link to the previous node's index with the last node in a path returning `-1` or some other negative number.

# sql-server-2008 - 在多个 SQL Server 2008 数据库上自动执行任务

> ID：14389414
> 
> 赞同：0
> 
> 时间：2013-01-17T22:36:41.680
> 
> 标签：sql-server-2008, automation, database-restore

我们托管由另一个组提供的多个 SQL Server 2008 数据库。每隔一段时间，他们会提供其中一个数据库的新版本的备份，我们会执行删除旧数据库、恢复新数据库、然后进入新恢复的数据库并添加现有 SQL 登录的例程该数据库中的用户并为其分配所有这些数据库中都存在的标准角色。

该例程是相同的，只是每个数据库的数据和日志文件具有不同的名称以及不同的逻辑和操作系统名称。我的倾向是建立一个辅助数据库，其中包含一个定义与每个数据库关联的名称集的表，然后创建一个存储过程，接受要替换的数据库的名称和备份文件的名称作为参数。SP 会查找相关的逻辑和操作系统文件名，然后进行工作。

这需要将命令构建为字符串，然后执行它们，这很好。但是，存储过程在恢复数据库之后，必须先使用它，然后才能将 SQL 登录作为用户添加到数据库并将其分配给数据库角色。存储过程不能做到这一点。

有什么替代方法可以创建一个动态填充的自动化过程，并且可以像这样操作跨数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T21:27:56.263

我想出了自己的解决方案。

1.  创建一个作业来完成这项工作，指定该作业应该在主数据库之外运行，并为其定义一个包含要执行的代码的 Transact-SQL 步骤。

2.  在仅为托管作业使用的对象而创建的实用程序数据库中，创建一个最多包含一行的表，其数据将作为作业的参数。

3.  在该数据库中，创建一个可以使用应存储以供作业使用的参数调用的存储过程（包括要替换的数据库的名称）。SP 应验证参数，报告任何错误，如果成功，将它们写入参数表并使用 msdb..sp_start_job 启动作业。

4.  在作业中，对于作业需要引用要替换的数据库的任何语句，将语句构建为字符串并执行它。

5.  对于需要在已重新创建的数据库中运行的任何语句，请双引号将该语句用作该数据库中 sp_executesql 实例的参数，并使用 EXECUTE 运行整个内容：

    SET @statement = @dbName + '..sp_executesql ''[要在数据库中执行的语句@dbName]''';

    执行（@语句）；

6.  配置作业以将输出写入日志文件。

# jquery - 复制 chrome 选项卡并根据 document.ready 事件执行 jquery 代码

> ID：14389415
> 
> 赞同：0
> 
> 时间：2013-01-17T22:36:43.680
> 
> 标签：jquery, google-chrome

我有一个大的 div 标签，它使用 jquery 在屏幕中间居中，
到目前为止一切都很完美！ 但是当我右键单击当前选项卡并选择“重复选项卡”时，我
注意到了一个大问题，我得到了一个新选项卡。但是 div 标签并没有真正居中，所以我有这个理论： 因为我的标签居中基于document.ready事件..所以div只有在加载整个页面后才居中..当我复制标签时，女巫不是这种情况..chrome不会重新加载它..它只是克隆它而不重新加载它 和然后 div 向左而不是居中，看起来很糟糕，它的一半没有显示！ 有什么办法可以修复这个错误？我应该复制相同的 jquery 代码，但使用另一个事件 .. 除了 document.ready 吗？

非常感谢您的任何建议

# mysql - 按最接近的日期排序，然后是过去

> ID：14389418
> 
> 赞同：1
> 
> 时间：2013-01-17T22:37:02.783
> 
> 标签：mysql, sql

我有一个艺术画廊页面，其中包含一个面板，其中显示多达 5 个展览“在这个画廊”。有时可能会有很多，它应该首先展示当前或即将到来的，然后诉诸过去的展览。

是否可以在一个查询中完成？

以下将给我那些在日期差异方面最接近的，但我最终可以在列表顶部获得过去的事件（因为如果它是过去一天，它显然少于 5 天内即将发生的事件）

```
SELECT   DATEDIFF(date_start, NOW()) as date_diff, exhibitions.*
FROM     events 
WHERE    event.gallery_id = XX
ORDER BY date_diff asc
LIMIT    5 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T22:39:22.877

date_diff 返回过去事件的负值。这是一个修复：

```
SELECT   DATEDIFF(date_start, NOW()) as date_diff, exhibitions.*
FROM     events 
WHERE    event.gallery_id = XX
ORDER BY (case when date_diff < 0 then 1 else 0 end),
         abs(date_diff) asc
LIMIT    5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T03:21:57.297

您可以订购`date_start < CURDATE()`将返回 0 或 1，0 表示未来，1 表示过去，如果您订购结果 ASC，那么它将确保未来的总是出现在过去的之前

例如：

```
ORDER BY
  (date_start < CURDATE()) ASC,
  (greatest(date_start, CURDATE()) ASC,
  (least(date_start, CURDATE()) DESC 
```

第一个将未来排在过去之前，第二个排序未来 ASC（最接近的第一），第三个排序过去 DESC（最旧的在前）

（第二个和第三个是互换的）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-16T10:28:51.533

通常你不能在两个方向上对一列进行排序。如果您想通过即将到来的 ASC 订购过去的 DESC，您可以使用以下技巧：

```
SELECT yourDateColumn,IF(yourDateColumn)<NOW(),DATEDIFF(yourDateColumn),NOW()) * -1000000000,UNIX_TIMESTAMP(STR_TO_DATE(CONVERT_TZ(e.startDate,e.timeZone,'Europe/Paris'), '%Y-%m-%d'))) AS diff FROM yourTable ORDER BY DIFF ASC; 
```

# javascript - 如何使用 UML 为 Backbone.js 应用程序建模？

> ID：14389420
> 
> 赞同：2
> 
> 时间：2013-01-17T22:37:04.520
> 
> 标签：javascript, backbone.js, uml

我有一个使用 Backbone.js 框架（基于原型）的 Web 应用程序。但是，有些面向对象的代码不是 Backbone.js 代码。我的问题是：如果不是所有代码都是面向对象的，我如何用 UML 记录应用程序建模？如何基于样式原型建模并将其与 OO 结合？这可能和/或正确吗？谁能指点我一些文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:18:33.007

您可能会争辩说，只要您简单地使用 Backbone 中的`*.extend({...})`样式类定义，那么您的 Backbone 类模型将是一个标准。面向对象的类模型。

考虑：

```
//a base class
var ViewBase = Backbone.View.extend({
  //constructor
  initialize: function() {
    //instance field
    this.someProp = "value";
  },

  //overrides a superclass method
  remove: function() {
     this.cleanup();
     //call superclass method
     Backbone.View.prototype.remove.apply(this, arguments);
  },

  //overrideable method
  cleanup: function() { ... },

  //an abstract method that must be implemented. It's not a compile
  //time contract, but will crash in runtime if you don't implement it
  getContext: function() { throw new Error("NotImplemented"); }
});

//derives a new class, doesn't affect the base class implementation
var ListItemView = ViewBase.extend({
  //constructor
  initialize: function() {
    //instance field
    this.someOtherProp = "value";

    //constructor chaining
    ViewBase.prototype.initialize.apply(this, arguments);
  },

  //add new method
  filterUsers: function() { ... },

  //hides a superclass method
  cleanup: function() { ... },

  //implement an abstract method
  getContext: function() { ... }

}, {
  //a static (class) method
  create: function() { ... }
}); 

//instantiates a class
var view = new ListItemView();

//modifies the instance, but does not modify the prototype
//i.e. class definition
view.foo = 'bar'; 
```

虽然 Backbone 内部确实使用了原型继承链，但这里没有使用“原型特征”。该`extend`函数不会修改现有对象的原型，除非您稍后修改超类原型，否则`ViewBase.prototype.something = 'foo'`超类原型将在应用程序的整个生命周期内保持不变。

当然缺少的是私有/受保护的属性，但是 Backbone 类模型与 Java 或 C# 没有什么不同，所以我不明白为什么标准的 UML 类图无法描述它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:06:06.897

您不能从字面上为无类语言的代码绘制类图。

您可以做的是绘制原型或对象而不是类。

# php - 带有验证的服务器端脚本...我没搞定

> ID：14389423
> 
> 赞同：0
> 
> 时间：2013-01-17T22:37:18.903
> 
> 标签：php, javascript, validation, variables, server-side-scripting

```
<?php
if(isset($_POST['Submit'])){

$name=trim($_POST["name"]);

if($name == "" ) {
$error= "error : You did not enter a name.";
$code= "1" ;
}

?> 
```

我的 html 表单不完全是这样。在这部分中，我没有得到什么是意思`<?php if(isset($code) && $code == 1)`

```
<html>
<?php if (isset($error)) { echo "<p class='message'>" .$error. "</p>" ;} ?>
<style type="text/css" >
.error{border:1px solid red; }
.message{color: red; font-weight:bold; 
}
</style>
<tr>
<td width= "82" >Name: </td>
<td width= "238" ><input name= "name" type= "text" <?php if(isset($code) && $code == 1){echo "class=error" ;} ?> ></td>
</tr>
<tr> 
```

并且还需要帮助：当在客户端禁用 javascript 时，是否可以在一页中同时使用 js 和服务器端验证（此脚本）..??? 怎么样??...建议总是欢迎...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:51:27.157

我不是 100% 理解你的问题，但会尽力回答。我相信您指的是如何通过 PHP 验证表单提交的值。

您可以使用标准的 POST 或 GET 以不使用 jQuery 的旧方式执行此操作

表单.html

```
<html>
<head>
   <title>Form Page</title>
</head>
<body>
  <form action="validation.php" method="POST">
     <input type="text" name="email" />
  </form>
</body>
</html> 
```

验证.php

```
 <?php

  $email = $_POST['email'];

  //any validation here (this validates if email has @ sign)
  $is_valid = strpos($email, "@");
  if($is_valid === false){
         //@ sign is not in string thus email is invalid, send message
        echo "Error";
   } else{
       //is valid
       echo "Valid";
   }

   ?> 
```

$_POST 用于接收已发布的变量。$_GET 用于接收通过 GET 方法发送的变量。GET 方法通过 url 作为查询字符串发送数据。因此，它不应该用于敏感信息，因为这会带来安全风险。

您还可以使用使用 AJAX 的更新的 jQuery 方法，这样它就不会重新加载整个页面来进行验证。

form_jquery.html

```
<html>
<head>
   <title>Form Page</title>
   <script src="http://code.jquery.com/jquery-1.9.0.min.js" type="text/javascript"></script>
   <script type="text/javascript">
       $(document).ready(function(){
           $("form").submit(function(){
                   //do javascript validation here

                   //do php validation here
                   $.post("validation.php", {email: $("#email").val()}, function(data){
                          alert(data); //validation msg
                   }, "text");
            });
       });
   </script>
</head>
<body>
  <form>
     <input id="email" type="text" name="email" />
  </form>
</body>
</html> 
```

如果客户端禁用了 JavaScript，则无法使用 JavaScript 客户端验证或 jQuery（jQuery 是一个 JavaScript 框架）。您只能使用服务器端。

响应此代码：

```
if(isset($code) && $code == 1) 
```

isset 检查 $code 是否有值（即不为空）， $code == 1 检查 $code 是否等于 1。如果满足该条件，它将 CSS 类“错误”分配给输入文本框给它一个红色边框。

应用您的示例，jQuery 将最适合您。

name_jquery.html

```
<html>
<head>
   <title>Form Page</title>
   <script src="http://code.jquery.com/jquery-1.9.0.min.js" type="text/javascript"></script>
   <style type="text/css">
      .error{border:1px solid red; }
   </style>
   <script type="text/javascript">
        $(document).ready(function(){
           $("form").submit(function(){
                   //do javascript validation here

                   //do php validation here
                   $.post("validation.php", {email: $("#name").val()}, function(data){
                         if(data.error == "1"){ //1 means error
                              $("#name").addClass("error");
                              $("body").append("<p id=\"error\">"+data.message+"</p>");
                         } else{
                              alert('your form is valid');
                              //clear css error class in case was invalid before
                              $("#name").removeClass("error");
                              $("#error").remove();
                         }
                   }, "json");
            });
       });
   </script>
</head>
<body>
  <form>
     <input id="name" type="text" name="name" />
  </form>
</body>
</html> 
```

验证.php

```
<?php

  $name=trim($_POST["name"]);

  if(empty($name)) {
      $error= "error : You did not enter a name.";
      $code= "1" ;
  } else{
      $code = "0";
  }

  echo json_encode("error"=> $code, "message"=>$error); 

   ?> 
```

# zend-framework2 - zf2 - 在“ActionController”中检索“ApplicationConfig”

> ID：14389425
> 
> 赞同：1
> 
> 时间：2013-01-17T22:37:34.383
> 
> 标签：zend-framework2

我意识到我们不应该有太多理由`ApplicationConfig`从控制器访问。但我仍然在问..有没有办法做到这一点？

我真正想做的是抓住
`module_listener_options`->`config_glob_paths`键......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:41:57.400

我认为@timdev 没有明白你的意思，你的问题可以通过以下方式解决：

```
$applicationConfig = $this->getServiceLocator()->get('ApplicationConfig'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:56:15.967

```
<?php
// in a controller (or anything that is ServiceLocatorAware)
$config = $this->getServiceLocator()->get('Config'); 
```

将为您提供应用程序的合并配置数据数组。

# windows-phone-8 - 如何知道第一次操作 Map 控件的时间？

> ID：14389426
> 
> 赞同：1
> 
> 时间：2013-01-17T22:37:41.460
> 
> 标签：windows-phone-8, windows-phone

我在 Windows Phone 8 中使用地图控件。

我需要实现一个页面，用户可以使用地图控件选择他的位置。我想知道用户首次操作该应用程序的时间。

一些背景信息：我看到当控件显示时，它会自动将世界地图居中，并引发 CenterChanged 事件。我无法理解 ManipulationStarted、ManipulationDelta 和 ManipulationCompleted 是如何工作的。我第一次拖动时，没有调用 ManipulationStarted，只有 ManipulationCompleted。

我可以将用户的第一次操作视为第二次触发 CenterChanged。但这是一个 hack 或猜测，我不高兴没有很好地理解它是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T00:57:30.197

Map 控件拦截并处理 Manipulation 事件，因此您不会获得所有这些事件。请记住，一旦路由事件被标记为 e.Handled=true，它们就不再冒泡。

根据您的场景，WP8 公开了可能有用的[UseOptimizedManipulationRouting属性。](http://msdn.microsoft.com/en-US/library/windowsphone/develop/system.windows.frameworkelement.useoptimizedmanipulationrouting%28v=vs.105%29.aspx)设置 UseOptimizedManipulationRouting=false 会导致 Map、Pivo​​t 和其他控件不会吞下嵌套控件的事件。

如果这没有帮助，请查看以下诺基亚 Wiki 文章，其中作者遇到了与您相同的问题并使用 Touch.FrameReported 摆脱它@http [://www.developer.nokia.com/社区/Wiki/Real-time_rotation_of_the_Windows_Phone_8_Map_Control](http://www.developer.nokia.com/Community/Wiki/Real-time_rotation_of_the_Windows_Phone_8_Map_Control)

# c# - 从字符串中提取 SQL 参数名称

> ID：14389427
> 
> 赞同：1
> 
> 时间：2013-01-17T22:37:52.973
> 
> 标签：c#, regex

我正在为我们的专有数据库实现我自己的 DBCommand 之类的包装器，我们只能通过 API 和使用字符串来访问它。嘘

我希望能够通过正则表达式找到我的正常参数，而不是选择 @@IDENTITY 字段（或其他类似的字段）。然后，我将用该参数的实际值等替换参数`NULL`名称`'Some Value'`。

目前我有

```
@\w{1,} 
```

给定一个字符串

```
INSERT INTO MYTABLE(VALUE1, VALUE2) VALUES (@MyValue1, @MyValue2); SELECT @@IDENTITY 
```

我正在匹配

```
@MyValue1
@MyValue2
@IDENTITY 
```

我也试过`[^@]@\w{1,}`，但它匹配`(@MyValue1`和`_@MyValue2`（下划线代表空格）

我怎么能不匹配@@Identity？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:47:51.673

您可以添加括号，标记您实际要使用其匹配字符串的子表达式：`[^@](@\w{1,})`，然后`Match.Groups(1)`仅用于检索该部分。

另一个变体是否定的后视断言：`(?<!@)@\w{1,}`，在字符串的开头有额外的匹配奖励`@name`（好吧，它可能不会发生）。

更新：它不会帮助你`'@quoted @string @literals'`，这是*合法的 SQL*，但不是*参数*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T22:47:46.977

试试这个，我假设这是你想要的。

```
(?<!@)@\w+ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T22:48:21.687

您可以使用[lookbehind](http://www.regular-expressions.info/lookaround.html)来确保它不以 2 开头`@`：

```
(?<!@)@\w{1,} 
```

# c++ - 为什么 Boost MPL 有积分常数？

> ID：14389429
> 
> 赞同：11
> 
> 时间：2013-01-17T22:37:57.857
> 
> 标签：c++, boost, c++11, metaprogramming, boost-mpl

既然您可以将整数值作为模板参数并对其进行算术运算，那么 boost::mpl::int_<> 和其他整数常量背后的动机是什么？这种动机是否仍然适用于 C++11？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-18T00:21:58.533

tldr; 将值编码为类型允许它在比简单值更多的地方使用。您可以重载类型，但不能重载值。

K-Ballo 的回答很棒。

我认为还有其他一些相关的东西。整数常量类型不仅可用作模板参数，它们还可用作函数参数和函数返回类型（在我的示例中使用 C++11 类型，但相同的参数适用于早于它们的 Boost 类型）：

```
template<typename R, typename... Args>
  std::integral_constant<std::size_t, sizeof...(Args)> 
  arity(R (*)(Args...))
  { return {}; } 
```

这个函数接受一个函数指针并返回一个类型，告诉你函数接受的参数数量。在我们有`constexpr`函数之前，没有办法在常量表达式中调用函数，所以要问诸如“这个函数类型需要多少个参数？”之类的问题。您需要返回一个*type*，并从中提取整数值。

即使`constexpr`在语言中（这意味着上面的函数可以，`return sizeof...(Args);`并且整数值在编译时可用），整数常量类型仍然有很好的用途，例如标签调度：

```
template<typename T>
  void frobnicate(T&& t)
  {
    frob_impl(std::forward<T>(t), std::is_copy_constructible<T>{});
  } 
```

此`frob_impl`函数可以根据`integer_constant<bool, b>`作为其第二个参数传递的类型进行重载：

```
template<typename T>
  void frob_impl(T&& t, std::true_type)
  {
    // do something
  }

template<typename T>
  void frob_impl(T&& t, std::false_type)
  {
    // do something else
  } 
```

您可以尝试通过将布尔值设为模板参数来做类似的事情：

```
frob_impl<std::is_copy_constructible<T>::value>(std::forward<T>(t)); 
```

但是不可能部分地专门化一个函数模板，所以你不能制作`frob_impl<true, T>`和`frob_impl<false, T>`做不同的事情。重载布尔常量的*类型*可以让您轻松地根据“可复制构造”特征的*值做不同的事情，**这*在 C++11 中仍然非常有用。

常量有用的另一个地方是使用 SFINAE 实现特征。在 C++03 中，传统方法是使用重载函数返回两种不同大小的类型（例如，一个`int`和一个包含两个`int`s 的结构）并使用`sizeof`. 在 C++11 中，函数可以返回`true_type`并且`false_type`更具表现力，例如测试“这种类型是否有一个名为的成员`foo`？”的特征。可以让表示肯定结果的函数返回，也可以`true_type`让表示否定结果的函数返回`false_type`，还有什么比这更清楚的呢？

作为标准库的实现者，我**经常**使用`true_type`and `false_type`，因为很多编译时“问题”都有真/假答案，但是当我想测试可能有两个以上不同结果的东西时，我会使用其他专业化`integral_constant`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-17T22:43:30.810

You can take integral values as template parameters, but you cannot take both *types* and *non-type template parameters* with a single template. Long story short, treating *non-type template parameters* as *types* allows for them to be used with a myriad of things within *MPL*.

For instance, consider a metafunction `find` that works with types and looks for an equal type within a sequence. If you wished to use it with *non-type template parameters* you would need to reimplement new algorithms 'overloads', a `find_c` for which you have to manually specify the *type* of the integral value. Now imagine you want it to work with mixed integral *types* as the rest of the language does, or that you want to mix *types* and *non-types*, you get an explosion of 'overloads' that also happen to be harder to use as you have to specify the type of each non-type parameter everywhere.

This motivation does still apply in *C++11*.

This motivation will still apply to *C++y* and any other version, unless we have some new rule that allows conversion from *non-type template parameters* to *type* template parameters. For instance, whenever you use `5` and the template requests a type instantiate it with `std::integral_constant< int, 5 >` instead.

# windows-8 - QtDesktop 组件在鼠标移动时崩溃

> ID：14389431
> 
> 赞同：1
> 
> 时间：2013-01-17T22:38:00.570
> 
> 标签：windows-8, qt5

我正在尝试在 Windows 8 x64 中将 Qt 5 与 QtDesktop 组件一起使用，当我构建和运行应用程序并移动鼠标时，应用程序崩溃并在日志中显示以下消息：

```
QPainter::begin: A paint device can only be painted by one painter at a time. 
```

仅当鼠标在任何组件中移动时才会发生，如果我有这样的 qml：

```
import QtQuick 2.0
import QtDesktop 1.0

Rectangle {
    width: 360
    height: 360
    Button {
        text: "testButton"
    }

    Text {
        text: qsTr("Hello World")
        anchors.centerIn: parent
    }
    MouseArea {
        anchors.fill: parent
        onClicked: {
            Qt.quit();
        }
    }
} 
```

在我将光标移动到按钮之前，一切都会好起来的。有人知道它是什么以及我该如何解决这个问题？这不是我的代码中的错误，因为构建测试/tableviewmodels 和示例/ApplicationTemplate 给出了相同的结果

如果它很重要，我使用 Visual Studio 2010 Express + Qt Creator 2.6.1

PS不确定，但我想我大约两周前在这台PC上构建并运行QtDesktopComponents并且没有这个错误，之后是Windows更新

**UPD**

这是 Qt Quick Components 错误，已在[https://bugreports.qt-project.org/browse/QTCOMPONENTS-1287中修复](https://bugreports.qt-project.org/browse/QTCOMPONENTS-1287)

# c# - ReportExecutionService.Render 方法是否在后台运行？

> ID：14389437
> 
> 赞同：0
> 
> 时间：2013-01-17T22:38:23.460
> 
> 标签：c#, asp.net, sql-server-2008, reporting-services

如果我使用 ReportViewer 处理报告并且需要 5 分钟来处理报告，我会盯着旋转的绿色圆圈 5 分钟，无法做任何其他事情。

理想情况下，我想将应用程序的控制权交还给用户，以便在处理报告时做其他事情，所以我想使用 ReportExecutionService.Render 方法，但我想确保我不这样做必须等待报告完成处理才能重新控制应用程序。（我知道我必须创建另一个屏幕，他们可以在其中选择要查看的已完成报告。）

**有人可以确认 ReportExecutionService.Render 方法是一个后台进程，并且控制权立即返回给用户。**

[完美的解决方案是使用报告订阅，但我遇到了麻烦。如果上述方法没有成功，那将是我的下一篇文章。]

# ios - XCode - 编写静态分析友好的代码

> ID：14389438
> 
> 赞同：0
> 
> 时间：2013-01-17T22:38:24.057
> 
> 标签：ios, objective-c, xcode

我开始使用静态代码分析来查找代码中的内存管理问题。我发现它非常有用，但是我编写的一些代码肯定不会导致内存泄漏（仪器不报告任何内容），但分析器正在报告。我认为这是我以不友好的方式编写代码的问题。这是一个例子

```
for (glyphUnit *ellipsisDot in ellipsisArray) {
    CGPathRef newDot = CGPathCreateCopyByTransformingPath(ellipsisDot.glyphPath, &ellipsisTransform);
    CGPathRelease(ellipsisDot.glyphPath);  // Incorrect decrement of the reference count of an object that is not owned at this point by the caller
    ellipsisDot.glyphPath = newDot;
} 
```

where`glyphUnit`是一个简单的自定义类，它具有 a`GCPathRef`作为属性，自定义类在其`dealloc`方法中释放它。所以在这个循环中，我正在转换路径并将其存储在一个`newDot`然后释放原始 glyphPath 以便我可以将新创建​​的一个分配给它。我可以看到这是如何让代码分析器感到困惑，它给出了一条消息，我正在递减一个我不拥有的对象。是否有另一种方法可以在不混淆新路径的情况下进行交换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:42:27.283

它应该是，

```
for (glyphUnit *ellipsisDot in ellipsisArray) {
    CGPathRef newDot = CGPathCreateCopyByTransformingPath(ellipsisDot.glyphPath, &ellipsisTransform);
    ellipsisDot.glyphPath = newDot;
    CGPathRelease(newDot); 
} 
```

您是`newDot`通过执行 CG CreateCopy 操作来创建的，并且您需要对该变量进行释放。所以分析器警告你没有`ellipsisDot.glyphPath`释放它的参数。您试图在这里释放错误的参数。当您将该发布声明放在第二行时，`ellipsisDot.glyphPath`并且`newDot`指向两个单独的实例。仅在第三行，您分配`newDot`给`ellipsisDot.glyphPath`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T22:57:05.087

事实证明，我忘记了在我的自定义`glyphUnit`类中定义 setter。在对象的 ARC 世界中并习惯于综合我的方法，我忘记了管理核心基础引用的保留计数的需要。我一直在我的 .glyphPath 中发布`dealloc`，但没有使用 setter 方法。正如@Sven 所怀疑的那样，我只是`assign`在上面的代码片段中进行了一些不太直观的发布，从而弥补了我缺乏setter 方法的不足。我现在添加了如下的 setter 方法`glyphUnit`

```
- (void)setGlyphPath:(CGPathRef)newPath
{
    if (_glyphPath != newPath)
    {
        CGPathRelease(_glyphPath);
        _glyphPath = CGPathRetain(newPath);
    }
} 
```

添加后，我现在有了必要的保留，将我的代码片段更改为@ACB 描述的那个，并且我的代码运行良好（没有它，它显然会导致 EXC_BAD_ACCESS）。

感谢@Sven 推断我的错误并让我朝着正确的方向前进……没有双关语的意思。

# github - 具有自定义域的 GitHub 页面是否有第二个 DNS 服务器？

> ID：14389439
> 
> 赞同：2
> 
> 时间：2013-01-17T22:38:34.877
> 
> 标签：github, dns

[使用页面设置自定义域](https://help.github.com/articles/setting-up-a-custom-domain-with-pages)会指示用户设置 DNS A 记录以指向 204.232.175.78，以便在其 GitHub 页面中使用自定义域。

但是，在 101domain.com，它告诉我：您需要指定至少 2 个名称服务器。101domain 不允许我两次指定相同的名称服务器。

因此，对于具有自定义域的 GitHub 页面，是否有第二个 DNS 服务器？大多数主机提供 4 或 6 个 DNS 服务器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T22:42:31.153

你指定了错误的东西。

您需要使用现有的 DNS 提供商设置**A 记录；**GitHub 没有给你一个域名服务器。

# jsf-2 - 添加 inputText 时未调用 Action 和 actionlistener

> ID：14389441
> 
> 赞同：0
> 
> 时间：2013-01-17T22:38:56.333
> 
> 标签：jsf-2, primefaces, action

添加时不会调用`action`and `actionlistener`of 。`<p:commandButton>``<p:inputText>`

这是我的看法：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"      
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:body>    
        <h:form>    
            <h:outputText value="Respuesta" />
                <p:inputText                
                    required="true"
                    value=" #{respuestaOficioBean.mrString}"/>
                <p:commandButton          
                    action="#{respuestaOficioBean.clearRespuesta}"
                    actionListener= "#{respuestaOficioBean.listener}"
                    update="growl"
                    value="s ss ssssssss ss ssszzs #{respuestaOficioBean.respuesta}"/>              
            <p:growl id="growl" showDetail="false" sticky="true" />  
        </h:form>
    </h:body>
</html> 
```

这是我的豆子：

```
private String mrString;

public String getMrString() {
    return mrString;
}

public void setMrString(String mrString) {
    this.mrString = mrString;
}

public String clearRespuesta() {
    setRespuesta(new RespuestaOficio());
    return null;
}

public void listener (ActionEvent event) {
    System.out.println("uuu");
} 
```

如果我`<p:inputText>`从视图中删除，则打印“uuu”并`clearRespuesta()`调用断点。但是，如果我离开`<p:inputText>`，则不会发生前者。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:50:34.730

我没有立即看到您的问题的原因，所以我将您的代码复制粘贴到我的环境中（其中配置了 OmniFaces [`FullAjaxExceptionHandler`](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)）并且我得到了一个错误页面，其中包含以下相当不言自明的堆栈跟踪：

```
javax.el.PropertyNotWritableException: /index.xhtml @30,44 value=" #{respuestaOficioBean.mrString}": Illegal Syntax for Set Operation
    at com.sun.faces.facelets.el.TagValueExpression.setValue(TagValueExpression.java:136)
    at javax.faces.component.UIInput.updateModel(UIInput.java:818)
    at javax.faces.component.UIInput.processUpdates(UIInput.java:735)
    at javax.faces.component.UIForm.processUpdates(UIForm.java:281)
    at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
    at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1242)
    at javax.faces.component.UIViewRoot.processUpdates(UIViewRoot.java:1232)
    at com.sun.faces.lifecycle.UpdateModelValuesPhase.execute(UpdateModelValuesPhase.java:78)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) 
```

这在服务器日志中也可见。

您的问题的原因`value`是`<p:inputText>`. 这是 setter 方法调用的无效语法。

去掉它：

```
<p:inputText                
    required="true"
    value="#{respuestaOficioBean.mrString}"/> 
```

以后多注意服务器日志和 ajax 请求的响应主体（您可以在 webbrowser 的开发人员工具集的 HTTP 流量监视器中看到）。错误信息在那里可见。

# javascript - 替换jQuery克隆对象中html元素的ID

> ID：14389442
> 
> 赞同：0
> 
> 时间：2013-01-17T22:39:10.807
> 
> 标签：javascript, jquery

所以我有一些 HTML，我想克隆几次并附加到文档中。这只是典型的 HTML 表单内容。但是，由于诸如`<label for="something">`基于元素 ID 的工作，如果 jquery `clone()`'d 元素中的每个 HTML 元素都可以具有唯一的 ID，那将是很好的，除了它们的所有克隆对应物。就像我如何做到这一点的猜测一样，我想知道是否有可能使我的初始元素中的 ID 都包含一些唯一的字符串。然后我可以以某种方式遍历元素并将该字符串替换为 _1,_2,_3 等。

我还没有走得很远，但似乎这样的事情应该可行。

```
$(document).ready(function(){
  var toReplace = "containerUniqueCharacterString1234";
  var copy = $('#containerUniqueCharacterString1234').clone(true);

  copy[0].style.display = "block"; //so i can reference the first element like this

  console.log(copy[0]); //[object HTMLDivElement] 

  $('body').append(copy);

  $.each(copy, function(index, value){

    var children = copy[index].childNodes;
    console.log(children); //[object NodeList] 

    var len = children.length;

    if (copy[index].childNodes.length > 0){
      if (copy[index].childNodes.hasOwnProperty('id')){

        //replace the toReplace string with an incremented number here(?)
        //annnnd this is where i've gotten in too deep and made this overly complex

       }
    }

    $('#otherResults').append(len);

  });
}); 
```

[http://jsbin.com/ecojub/1/edit](http://jsbin.com/ecojub/1/edit)

或者也许有一个更简单的方法来做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:46:46.560

如果您多次复制 HTML 元素仅用于显示，也许您应该考虑使用模板引擎而不是复制 DOM 元素，因为后者成本高昂且不易维护。underscore 有一个非常易于使用的功能，[http://documentcloud.github.com/underscore/#template](http://documentcloud.github.com/underscore/#template)

# java - 在 MiG 布局中将默认间隙设置为 0

> ID：14389447
> 
> 赞同：2
> 
> 时间：2013-01-17T22:39:32.797
> 
> 标签：java, swing, layout, miglayout

有没有办法使在特定程序中创建的所有布局的组件之间的默认间隙为 0？

有什么办法吗？如果没有，是否至少有一种方法可以在布局级别（new MigLayout（“gaptozero”）；）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:35:32.840

尝试设置`MigLayout("insets 0");`

编辑：

要修复差距（见评论），你可以简单地写：`MigLayout("gap 0");`或者，gapx 和 gapy。

这一切都来自： http: [//migcalendar.com/miglayout/cheatsheet.html](http://migcalendar.com/miglayout/cheatsheet.html)

# sql - HierarchyId 有后代查询

> ID：14389452
> 
> 赞同：2
> 
> 时间：2013-01-17T22:40:01.560
> 
> 标签：sql, sql-server-2008, tsql, hierarchyid

给定以下架构和数据：

```
CREATE TABLE ##Nodes
(
    NodeCode hierarchyid,
    NodeName varchar(10)

)

INSERT INTO ##Nodes VALUES ('/','RootNode')
INSERT INTO ##Nodes VALUES ('/1/','Node1')
INSERT INTO ##Nodes VALUES ('/1/1/','Node1.1')
INSERT INTO ##Nodes VALUES ('/2/','Node2')
INSERT INTO ##Nodes VALUES ('/3/','Node3')
INSERT INTO ##Nodes VALUES ('/3/1/','Node3.1')
INSERT INTO ##Nodes VALUES ('/4/','Node4') 
```

我怎样才能得到以下结果：

```
NodeCode | NodeName | HasDescendants
/, RootNode, true
/1/, Node1, true,
/1/1/, Node1.1, false
/2/, Node2, false
/3/, Node3, true
/3/1/, Node3.1, false
/4/, Node4, false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:51:24.243

```
SELECT NodeCode.ToString() AS NodeCode, NodeName,     
       CASE WHEN (SELECT TOP 1 n.NodeCode 
                  FROM ##Nodes 
                  WHERE NodeCode.GetAncestor(1) = n.NodeCode) IS NULL THEN 'false'
            ELSE 'true' END AS HasDescendants       
FROM ##Nodes n 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d2dd7/23/0)上的演示[](http://sqlfiddle.com/#!3/d2dd7/23/0)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:48:17.757

**更新**以产生正确的结果：

```
SELECT DISTINCT
    n1.NodeCode.ToString()
   ,n1.NodeName
   ,(CASE WHEN n2.NodeCode IS NULL THEN 'false' ELSE 'true' END)
FROM 
    Nodes n1 
LEFT OUTER JOIN 
    Nodes n2 
    ON 
    n1.NodeCode = n2.NodeCode.GetAncestor(1) 
```

这几乎是我[在这里找到](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/783c1bcd-a133-4612-8417-98f12af799ca)的答案的直接副本。**

# python - 如何在python中导入wave库？

> ID：14389455
> 
> 赞同：2
> 
> 时间：2013-01-17T22:40:24.450
> 
> 标签：python, python-import

我试图像这样在我的代码库 wave （由 pip 安装）中导入：

```
import wave 
```

接下来我在我的程序中使用的是

```
raw = wave.open('file.wav', 'rb') 
```

在控制台中运行我的程序后，我遇到了这个奇怪的问题：

```
AttributeError: 'module' object has no attribute 'open' 
```

问题是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T22:43:55.687

您可能有一个名为的本地文件`wave.py`正在被导入。

检查：

```
import wave

print wave.__file__ 
```

并重命名或删除该文件。

# php - 通过两个多维数组中的键/值合并

> ID：14389458
> 
> 赞同：0
> 
> 时间：2013-01-17T22:40:30.123
> 
> 标签：php, arrays, multidimensional-array, merge

数组 #1 看起来像这样（简化）：

```
Array
(
    [Appetizers] => Array
        (
            [0] => Array
                (
                    [category] => Appetizers
                    [name] => Beef Tenderloin Carpaccio
                )

            [1] => Array
                (
                    [category] => Appetizers
                    [name] => Calamari Fritto Misto
                )    
        )

    [Flatbreads] => Array
        (
            [0] => Array
                (
                    [category] => Flatbreads
                    [name] => Quattro Formaggi
                )

            [1] => Array
                (
                    [category] => Flatbreads
                    [name] => Tomato & Burrata
                )

        )
) 
```

数组 #2 如下所示：

```
Array
(
    [0] => Array
        (
            [category] => Appetizers
            [note] => Choose One Item From Each Category
        )

    [1] => Array
        (
            [category] => Flatbreads
            [note] => with Shoestring or Wedge Potatoes
        )

) 
```

基于数组#1 的类别键与数组#2 的“类别”值的匹配，我如何能够将数组#2 中的['note'] 合并到数组#1 中？所以结果是这样的：

```
Array
(
    [Appetizers] => Array
        (
            [0] => Array
                (
                    [category] => Appetizers
                    [name] => Beef Tenderloin Carpaccio
                    [note] => Choose One Item From Each Category
                )

            [1] => Array
                (
                    [category] => Appetizers
                    [name] => Calamari Fritto Misto
                    [note] => Choose One Item From Each Category
                )    
        )

    [Flatbreads] => Array
        (
            [0] => Array
                (
                    [category] => Flatbreads
                    [name] => Quattro Formaggi
                    [note] => with Shoestring or Wedge Potatoes
               )

            [1] => Array
                (
                    [category] => Flatbreads
                    [name] => Tomato & Burrata
                    [note] => with Shoestring or Wedge Potatoes
                )

        )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:20:43.377

尝试这个

```
$courses = array( 'Appetizers' => array( array( 'category' => 'Appetizers', 'name' => 'Beef Tenderloin' ), array( 'category' => 'Appetizers', 'name' => 'Calamari' ) ) );

$notes = array( array( 'category' => 'Appetizers', 'note' => 'Choose One Item From Each Category' ) );

function note( $key, $array ) {
    foreach( $array as $element )
        if( $element['category']  == $key )
            return $element['note'];
    return '';
}

foreach( $courses as $key => &$course ) {
    $course = array_map( function( $el ) use( $notes ) {
        $el['note'] = note( $el['category'], $notes );
        return $el;
    }, $course );
}
print_r( $courses ); 
```

它生成

```
Array
(
    [Appetizers] => Array
        (
            [0] => Array
                (
                    [category] => Appetizers
                    [name] => Beef Tenderloin
                    [note] => Choose One Item From Each Category
                )

            [1] => Array
                (
                    [category] => Appetizers
                    [name] => Calamari
                    [note] => Choose One Item From Each Category
                )

        )

) 
```

# c# - C# + mysql 我想选择 1000 行然后更新这些选定的行

> ID：14389460
> 
> 赞同：0
> 
> 时间：2013-01-17T22:40:38.903
> 
> 标签：c#, mysql, select

我将同时运行多个进程，所以我在这里尝试做的是获取 1000 行，然后更新我选择的行。下面是我的选择和更新函数注意我在关闭连接后立即调用更新函数在选择功能中

```
 public List<string> Select()
    {
        string set;
        string query = "SELECT * FROM master WHERE attempted='0' LIMIT 1000";
        List<string> list = new List<string>();
        if (this.OpenConnection() == true)
        {
            MySqlCommand cmd = new MySqlCommand(query, connection);
            MySqlDataReader dataReader = cmd.ExecuteReader();
            while (list.Count() < 1000)
            {
                dataReader.Read();
                string email = dataReader["email"].ToString();              
                var m = dataReader["attempted"];
                if (m.ToString() == "0")
                {
                    list.Add(email);

                }                  
            }
            dataReader.Close();
            this.CloseConnection();
            Update();
            return list;
        }
        else
        {
            return list;
        }
    }

    public void Update()
    {
        if (this.OpenConnection() == true)
        {
                string query = "UPDATE master SET attempted='1' WHERE ( SELECT * FROM master WHERE attempted='0' LIMIT 1000 )";              
                MySqlCommand cmd = new MySqlCommand(query, connection);
                cmd.CommandText = query;
                cmd.ExecuteNonQuery();
            this.CloseConnection();
        }
    } 
```

我得到它的异常操作数必须包含1列..

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:21:04.733

为什么不能只创建一个单独的列，甚至是一个表？然后在SQL级别写一个基本的Query或者一个Procedure来修改值？然后其他应用程序可以只测试列或表的值。

例子：

```
UPDATE [dbo].[Customer]
SET [GotEmail] = 1
WHERE (
       SELECT [Email]
       FROM [dbo].[Customer]
       ); 
```

或者类似的基本东西？另一个例子是：

```
UPDATE accounts 
SET (contact_last_name, contact_first_name) = 
    (SELECT last_name, first_name FROM salesmen
WHERE salesmen.id = accounts.sales_id); 
```

像这样的简单查询不能解决您的问题吗？

如果我的回答不清楚……我会试着澄清我的思考过程。

# vb.net - 用 vb.net 在 word 中添加超链接

> ID：14389464
> 
> 赞同：4
> 
> 时间：2013-01-17T22:40:48.923
> 
> 标签：vb.net, hyperlink, word-2010

我目前正在尝试通过 VB 程序在 word 中添加指向 web url 的超链接。我正在跌跌撞撞地尝试找到正确的语法以及完成此操作所需的内容，因为我得到了很多无用的 VBA 示例，这根本不是我需要的。

我的代码如下所示：

```
sPara2 = oDoc.Content.Paragraphs.Add
sPara2.Range.Text = attachmentRdr("attachmentName")
sPara2.Range.Hyperlinks.Add(attachmentRdr("attachmentPath"))
sPara2.Format.SpaceAfter = 24    '24 pt spacing after paragraph.
sPara2.Range.InsertParagraphAfter() 
```

where`attachmentRdr`是`sqlDatareader`从数据库中读取的文本字符串（附件名称和路径）。如果我运行它，我会收到错误参数的错误（从`hyperlinks.add()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T12:49:13.297

将 range 作为第一个参数传递给 Add 函数，然后是您的 URL：

```
Dim range As Microsoft.Office.Interop.Word.Range
range = Me.Application.Selection.Range
range.Hyperlinks.Add(range, "http://www.microsoft.com") 
```

# jquery - 不使用 JQuery-Mobile CSS 可能吗？

> ID：14389466
> 
> 赞同：1
> 
> 时间：2013-01-17T22:41:17.233
> 
> 标签：jquery, jquery-mobile

添加 jquery mobile 后，每次加载我的网站时，我都会得到以下边框和以下“正在加载...”标题标签，如下图所示。

知道为什么会发生这种情况以及我能做些什么来避免它吗？它永远不会消失，即使我希望它完成加载。

下图中显示的元素中的一些 css 是动态添加的：

```
<div class="ui-loader ui-corner-all ui-body-a ui-loader-default">
   <span class="ui-icon ui-icon-loading"></span>
   <h1>loading</h1>
</div> 
```

[http://i46.tinypic.com/2rrp3yp.png](http://i46.tinypic.com/2rrp3yp.png)

更新：刚刚发现添加jquery mobile css，解决了上面列出的问题，但是，我只使用jquery mobile 进行一次滑动事件。有没有办法不使用jquery mobile的css？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T23:41:02.893

尝试构建一个只有 Touch 的 jQuery Mobile 版本。

[http://jquerymobile.com/download-builder/](http://jquerymobile.com/download-builder/)

*   注意：此下载构建器目前是测试版软件，因此使用风险自负。

# c++ - 如何纹理 Opengl glut 对象（C++）

> ID：14389472
> 
> 赞同：0
> 
> 时间：2013-01-17T22:41:39.643
> 
> 标签：c++, opengl, textures, glut

我已经尝试并成功地从 bmp 文件加载纹理，并使用纹理绘制四边形和三角形。但是我需要将加载的纹理应用于使用 glutSolidDodecahedron 和 glutSolidSphere 绘制的对象。我怎样才能做到这一点？如果可能，请包含一些代码

注意：我必须使用这些功能，我不允许从头开始绘制它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:49:05.980

既不`glutSolidDodecahedron`也不`glutSolidSphere`指定纹理坐标，至少根据快速网络搜索出现的任何文档都没有。我快速浏览了 FreeGLUT 的实现，它们确实没有指定纹理坐标。

如果可以使用着色器，则可以从顶点的 3D 位置导出 2D 纹理坐标。球体和十二面体是非常规则的形状，因此您可以简单地进行球面投影（将顶点位置转换为球面坐标并丢弃半径分量）。

# javascript - 如何从 .load()'ed 页面访问 css 属性？

> ID：14389477
> 
> 赞同：0
> 
> 时间：2013-01-17T22:42:15.090
> 
> 标签：javascript, jquery

我想将整个网站加载到我的网站中。我已经能够在`$(#preview).load("index.php")`我的`<div id="preview"></div>`. 我在这里访问时遇到的麻烦是背景图像，它是身体的一个属性。我尝试使用 background-image 属性制作一个 div 标签，但是当我从我的 body 标签中删除图像时，它的行为不像我想要的那样（没有填充整个空间）。

我的问题是这个。**我如何从 index.php 访问一些内容，可以让我正确预览站点或将属性从某处复制到预览背景图像属性中？**

我的代码现在看起来像这样，经过一些广泛的尝试和错误（更像是错误和错误，它变得越来越混乱）

```
 $(document).ready(
        function() {    
            $("#check").click(
                function() {
                    var bgd;
                    $("#preview").load("index.php", 
                        function () {
                            bgd = $("#bg").css("background-image");
                        }
                    );
                    $("#preview").style.backgroundImage(bgd);
                }
            );
        }
    ); 
```

其中 bg 是 div 的 id，它在 index.php 中用作“替代”body 标签（又名与 body 具有相同的属性）

我要么离它很远，要么离得很近。感谢我能得到的每一条建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:46:42.127

```
 $(document).ready(
        function() {    
            $("#check").click(
                function() {
                    $.ajax({
                             url: 'index.php',
                             success: function(data){
                                 data = $('data').html();
                                 $('#preview').html(data);
                                 bg = $('data').find('#bg').css('background-image');
                                 $('#preview').css('background-image',bg);
                             }
                        });

                }
            );
        }
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:58:35.883

这里有两个问题。一个与您如何访问样式属性有关，另一个与`load()`.

### 风格问题

您将需要使用`$("#preview").css('background-image',bgd)`. 您使用的第一种方法仍然可以通过访问非 jQuery 包装元素来保留，如下所示：

```
$("#preview")[0].style.backgroundImage(bgd); 
```

### 异步问题

第二个问题是 .load() 是一个*立即返回*的异步调用。下一行代码被执行并且`bdg`（很可能）仍然未定义。然后`load()`完成后，成功处理程序被执行并`bdg`设置为加载页面的背景，但为时已晚！

将 移动`$("#preview").css('background-image',bgd)`到成功处理程序将纠正该问题：

```
 $(document).ready(
        function() {    
            $("#check").click(
                function() {
                    var bgd;
                    $("#preview").load("index.php", 
                        function () {
                            bgd = $("#bg").css("background-image");
                            $("#preview").css('background-image',bgd);
                        }
                    );
                }
            );
        }
    ); 
```

# javascript - 在 superscrollorama 视差效果中间运行函数

> ID：14389478
> 
> 赞同：0
> 
> 时间：2013-01-17T22:42:19.067
> 
> 标签：javascript, events, animation, scroll, parallax

我正在使用[superscrollorama](http://johnpolacek.github.com/superscrollorama/)，需要在视差期间播放一次动画，然后再播放一次。我可以创建一个函数来播放动画，但似乎它只在视差完成时才起作用。任何想法或想法都会有所帮助。

```
 controller.addTween('.div', (new TimelineLite()).append([
              TweenMax.from( $('.div .hero'), 1, 
                {css:{left:'1500', top:'-200'}, ease:Quad.easeInOut}),
              TweenMax.fromTo($('.div .background'), 1, 
                {css:{left: -40}, immediateRender:true}, 
                {css:{left: -45}})
            ]),
          100 // scroll duration of tween
        );

        var oneTime = function(!firstime) {
            var firstime;
            TweenMax.from( $('.football'), .50, {
                css:{left:'1500', top:'-300'}, ease:Quad.easeInOut})
            ), 500, 500 ;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T15:23:03.577

在我的脑海中，TweenMax 有一个 onUpdate 方法，它会在每次属性之一有效时触发，你甚至可以补间任何非标准属性，因此，你可以调用你的函数，检查一个值, 并在它解析为 true 时触发 oneTime 函数，并且永远不要再这样做..

它看起来像这样：

```
TweenMax.fromTo($('.div .background'), 1, 
            {css:{left: -40}, immediateRender:true}, 
            {css:{left: -45}, onUpdate:oneTime,onUpdateParams: $(this).css('left')}) 
```

它对你有帮助吗？

# css - css下拉菜单消失在内容后面

> ID：14389482
> 
> 赞同：0
> 
> 时间：2013-01-17T22:42:42.820
> 
> 标签：css, drop-down-menu

在此页面[http://www.futureworkinstitute.com/2013/](http://www.futureworkinstitute.com/2013/)我正在使用此处的下拉菜单[http://www.kriesi.at/archives/create-a-multilevel-dropdown-menu-with-css -and-improve-it-via-jquery/](http://www.kriesi.at/archives/create-a-multilevel-dropdown-menu-with-css-and-improve-it-via-jquery/)但正如您所见，菜单一离开#navbar div 就会消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:50:36.260

问题是您已设置`overflow`为：`hidden``navbar`

```
#navbar {
    ...
    overflow: hidden; //remove this line
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:58:06.880

看起来你的 jQuery 可能是个麻烦。悬停在主菜单项的第一个 UL 子元素上将可见性设置为隐藏。试着去掉这个悬停，看看你的菜单是否还在？

```
$(" #nav li").hover(function(){
$(this).find('ul:first').css({visibility: "visible",display: "none"}).show(400);
},function(){
$(this).find('ul:first').css({visibility: "hidden"});
}); 
```

# tsql - 不能删除索引约束

> ID：14389485
> 
> 赞同：1
> 
> 时间：2013-01-17T22:42:56.207
> 
> 标签：tsql

我试图先删除索引，然后删除 PK（因为最终我需要在此表上进行截断）。

这是此表和约束的屏幕截图：

![在此处输入图像描述](../Images/b3d12dfef5ef31df9ab746fbd5569177.png)

这是 2 个约束（在我右键单击它们并在 SQL 2008 中创建到剪贴板后从剪贴板获得的代码）：

（主键）

```
ALTER TABLE [dbo].[Entry] ADD  CONSTRAINT [PK_Entry_Id] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

（假设这是创建索引代码，在我右键单击创建到剪贴板之后..但它是完全相同的代码！不知道为什么）：

```
ALTER TABLE [dbo].[Entry] ADD  CONSTRAINT [PK_Entry_Id] PRIMARY KEY CLUSTERED 
(
    [Id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:53:30.933

删除主键应该删除索引以及创建主键时自动创建的索引。

只需要在需要截断表时删除外键约束。这是为了确保没有依赖于它的表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:49:32.657

您不需要也不能删除与主键关联的索引。您需要做的就是删除主键，索引将被删除。

如果要截断数据，则不必删除主键。

如果您无法截断该表，则应删除引用该表的外键。我假设您删除了该表引用其他表的外键，因为我们在您的数据中看不到任何外键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T23:01:05.967

常量和索引不一样。
但在某些语法中，索引被称为约束。
您有 5 个约束和一个索引。
您不喜欢注意到它在两个点**PK_Entry_ID**中具有相同的名称。
PK 是一个索引。

并且索引不会阻止截断。

FK 防止截断。

如果您要删除索引，那么为什么要创建要创建的脚本。
创建一个脚本来删除它。

# php - 未在子类中继承的静态变量

> ID：14389486
> 
> 赞同：1
> 
> 时间：2013-01-17T22:43:01.493
> 
> 标签：php, oop, static, isset, defined

出于某种原因，我无法在子类中继承静态变量。以下代码段似乎没问题，但不起作用。

```
abstract class UserAbstract {
    // Class variables
    protected $type;
    protected $opts;
    protected static $isLoaded = false;
    protected static $uid = NULL;

    abstract protected function load();
    abstract protected function isLoaded();
}

class TrexUserActor extends TrexUserAbstract {
    // protected static $uid;  // All is well if I redefine here, but I want inheritance
    /**
     * Constructor
     */
    public function __construct() {
        $this->load();  
    }

    protected function load() {
        if (!$this->isLoaded()) {
            // The following does NOT work. I expected self::$uid to be available...
            if (defined(static::$uid)) echo "$uid is defined";
            else echo self::$uid . " is not defined";  

            echo self::$uid;
            exit;

            // Get uid of newly created user
            self::$uid = get_last_inserted_uid();

            drupal_set_message("Created new actor", "notice");
            // Flag actor as loaded
            self::$isLoaded = true;

            variable_set("trex_actor_loaded", self::$uid);
        } else {
            $actor_uid = variable_set("trex_actor_uid", self::$uid);
            kpr($actor_uid);
            exit;
            $actor = user_load($actor_uid);
            drupal_set_message("Using configured trex actor ($actor->name)", "notice");  
        }
    }
} 
```

除了可能的复制粘贴/重新格式化错误之外，上面的代码没有父级的静态变量，所以我想我在某处遗漏了一个细节。

任何有关正在发生的事情的线索都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:55:08.290

[`defined`](http://php.net/manual/en/function.defined.php)仅适用于常量。你应该使用[`isset`](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:56:45.807

我看到几个错误。你的意思是？

```
if (isset(self::$uid))
    echo "\$uid: " . self::$uid . " is defined";
else
    echo "\$uid is not defined"; 
```

**更新**：

需要明确的是，正如@stefgosselin 和@supericy 所说，该错误是由 use `defined`instead引起的`isset`。在 php5.3+ 中添加了[Late Static Bindings](http://php.net/manual/en/language.oop5.late-static-bindings.php)。

**所以在 php5.3+ 这将起作用：**

```
if (isset(static::$uid))
    echo "\$uid: " . static::$uid . " is defined";
else
    echo "\$uid is not defined"; 
```

从`TrexUserActor`课外这也将起作用：

```
if (isset(TrexUserActor::$uid))
    echo "\$uid: " . TrexUserActor::$uid . " is defined";
else
    echo "\$uid is not defined"; 
```

# apache - Apache Solr下载3.6.2还是4.0哪个版本，主要区别是什么

> ID：14389487
> 
> 赞同：0
> 
> 时间：2013-01-17T22:43:15.457
> 
> 标签：apache, solr

Apache Solr 官网有 3.6.2 和 4.0 两个版本：

[http://lucene.apache.org/solr/downloads.html](http://lucene.apache.org/solr/downloads.html)

主要区别是什么，如何选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:24:13.270

只需获得 4.0。这是对 3.6.2 的重大改进，具有新的管理 UI、对许多新选项的支持和全新的 SolrCloud 分布式搜索机制。

如果您刚开始，那么与旧的一起去是没有意义的。

唯一的问题是，4.1 即将发布。还有一些改进。所以，今天下载 4.0，下周下载 4.1。或者只是等待几天然后得到它。

# android - 应用程序尝试在欢迎屏幕上创建文件之前读取文件

> ID：14389494
> 
> 赞同：0
> 
> 时间：2013-01-17T22:43:36.623
> 
> 标签：android, file-io

很抱歉给你们带来了很多麻烦。

我的应用程序现已完成。现在唯一的问题是我的第一次显示欢迎屏幕是要创建新文件的位置。此欢迎屏幕的共享首选项位于文件也被读取的 main_activity 中。

结果，它甚至在创建文件之前就尝试读取文件！那么它的解决方案是什么？

主要活动代码：

```
package com.omm.easybalancerecharge;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.net.Uri;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {
    SharedPreferences mPrefs;
    final String welcomeScreenShownPref = "welcomeScreenShown";

    EditText num;
    Button ch;
    TelephonyManager operator;
    String opname;
    TextView status;
    TextView setID;
    String myID;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        initialize();
        setstatus();
        setIDNO();
//Checks and displays Welcome Screen
        mPrefs = PreferenceManager.getDefaultSharedPreferences(this);
        Boolean welcomeScreenShown = mPrefs.getBoolean(welcomeScreenShownPref,
                false);

        if (!welcomeScreenShown) {
            Intent welcome = new Intent("android.intent.action.WELCOME");
            startActivity(welcome);
            SharedPreferences.Editor editor = mPrefs.edit();
            editor.putBoolean(welcomeScreenShownPref, true);
            editor.commit();
        }
    //Reading Data from the file to be created at welcome screen for the first time.
        myID = readData();
        recharge();
    }

    //readData method
    protected String readData() {
        // TODO Auto-generated method stub
        String ret = "";
        try {
            FileInputStream fIN = openFileInput("iqid");
            InputStreamReader in = new InputStreamReader(fIN);
            BufferedReader br = new BufferedReader(in);
            ret = br.readLine();
        } catch (FileNotFoundException e) {
            Log.e("ID ACTIVITY", "File Not Found");
        } catch (IOException e) {
            Log.e("ID ACTIVITY", "Cannot Read From File");
        }
        return ret;
    }

} 
```

第一次欢迎屏幕的代码：

```
package com.omm.easybalancerecharge;

import java.io.FileOutputStream;
import java.io.IOException;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class FirstTime extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_first_time);

        final EditText ID = (EditText) findViewById(R.id.IDNO);
        Button save = (Button) findViewById(R.id.sButton);
        save.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                try {
                    String myFile = ID.getText().toString();
                    FileOutputStream fOS = openFileOutput("iqid", Context.MODE_PRIVATE);
                    fOS.write(myFile.getBytes());
                    Toast.makeText(getBaseContext(), "ID Saved",
                            Toast.LENGTH_SHORT).show();
                } catch (IOException e) {
                    Log.e("Exception", "Save Failed");
                } finally {
                    finish();
                }
            }
        });
    }
} 
```

这个问题是唯一阻止我的应用程序在没有任何 FC 的情况下成功运行的问题。当然，所有权限都在清单中设置。

编辑：显然该文件根本没有被创建：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:51:10.547

您应该使用 startActivityForResult：

```
Intent i = new Intent(this, FirstTime.class);
startActivityForResult(i, 1); 
```

在您的 FirstTime 中设置要返回到 MainActivity 的数据，如果您不想返回，请不要设置任何数据。

例如：在 FirstTime 中，如果您想发回数据

```
 Intent returnIntent = new Intent();
 returnIntent.putExtra("result",result);
 setResult(RESULT_OK,returnIntent);     
 finish(); 
```

如果您不想返回数据

```
Intent returnIntent = new Intent();
setResult(RESULT_CANCELED, returnIntent);        
finish(); 
```

现在在您的 MainActivity 类中为 onActivityResult() 方法编写以下代码

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
if (resultCode == Activity.RESULT_OK) {  
    //Reading Data from the file to be created at welcome screen for the first time.
    myID = readData();
    recharge(); 
```

这应该可以解决问题。

# java - Firebug disabled in WebDriver after adding to profile

> ID：14389496
> 
> 赞同：3
> 
> 时间：2013-01-17T22:43:39.570
> 
> 标签：java, firefox, selenium-webdriver

I can't seem to figure out why my Firebug extension shows that its disabled when I try to click on it within the Firefox WebDriver.

Here's what my code looks like, I got some of the code from this [SO answer](https://stackoverflow.com/a/4980226/1393002):

```
private final String firefoxExtPath = "/Users/[NAME]/Library/Application Support/Firefox/Profiles/4izeq9he.default/extensions/";
private final String firebugPath = firefoxExtPath + "firebug@software.joehewitt.com.xpi";
private final String firepathPath = firefoxExtPath + "FireXPath@pierre.tholence.com.xpi";

private WebDriver dummy;
private WebDriver driver;
...

@BeforeClass
public void addFirefoxExt() {
    // Add extensions to FirefoxDriver
    FirefoxProfile profile = new FirefoxProfile();
    try {
        profile.addExtension(new File(firebugPath));
        profile.addExtension(new File(firepathPath));

        profile.setPreference("extensions.firebug.currentVersion", "1.11.1");
        profile.setPreference("extensions.firebug.onByDefault", true);
        profile.setPreference("extensions.firebug.defaultPanelName", "net");
        profile.setPreference("extensions.firebug.net.enableSites", true);
    } catch (IOException e) {
        e.printStackTrace();
    }

    dummy = new FirefoxDriver(profile);
    driver = new FirefoxDriver(profile);
}

@BeforeClass
public void setup() {
    dummy.get(BASE_URL);
    dummy.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T06:32:52.907

这就是我可以从[https://code.google.com/p/selenium/wiki/FirefoxDriver](https://code.google.com/p/selenium/wiki/FirefoxDriver)得到的。他们工作得很好。

与萤火虫一起运行

```
Download the firebug xpi file from mozilla and start the profile as follows:

File file = new File("firebug-1.8.1.xpi");
FirefoxProfile firefoxProfile = new FirefoxProfile();
firefoxProfile.addExtension(file);
firefoxProfile.setPreference("extensions.firebug.currentVersion", "1.8.1"); 
// Avoid startup screen

WebDriver driver = new FirefoxDriver(firefoxProfile); 
```

# c++ - 在 C++ 中使用 for 循环操作数组

> ID：14389499
> 
> 赞同：0
> 
> 时间：2013-01-17T22:43:45.450
> 
> 标签：c++, arrays, for-loop

我正在尝试编写一个选择排序算法（随机输入十个数字，由用户输入，并按升序输出列表）。我了解该算法应该如何工作，并认为我已经弄清楚了，但是 for 循环中的某些东西并没有按照我期望的方式工作，而且我终其一生都无法弄清楚它是什么.

这是我遇到的问题的示例：输入 {9, 8, 7, 6, 5, 4, 3, 2, 1, 0}，输出 {0, 1, 2, 3, 4, 9, 6 , 7, 8, 9}

无论我输入什么数字，第五个索引似乎总是关闭。但是，如果原始数字集具有任何给定数字的倍数，那么就会出现其他难以查明的错误。我希望在解决第五个索引问题后，其他问题将得到解决，或者至少更容易查明。

下面是我的主要功能的全部（减去它实际说的主要部分）。

```
int arr[10];//array of integers input by user
int num;    //smallest number in array
int temp;   //temp variable for swapping numbers
int ind;    //index of where temp was found

cout << "Enter ten random integers: " << endl;
for(int i=0; i<10; i++)
{
    cout << "[" << i << "] = ";
    cin >> arr[i];
}

cout << endl;

for (int j=0; j<10; j++)
{
    num = arr[j];
    temp = arr[j];

    for (int k=j; k<10; k++) /*after this loop, temp should have lowest int and ind
                               should have its location*/
    {
        if(temp > arr[k])
        {
            temp = arr[k];
            ind = k;
        }
    }
    arr[j] = temp;
    arr[ind] = num;
}

for(int l = 0; l<10; l++)
{
    cout << arr[l] << " ";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:47:29.723

```
temp = arr[0]; // You need to set it to sth diferent then 0

for(int i=0; i<10; i++)
{
    if(arr[k] < temp)
    {
           temp = arr[k];
           ind = k;
    }
} 
```

并做了。

对于排序（123）：

```
 for (i = 10; i > 0; i--)
  {
    for (j = 1; j <= i; j++)
    {
      if (numbers[j-1] > numbers[j])
      {
        temp = numbers[j-1];
        numbers[j-1] = numbers[j];
        numbers[j] = temp;
      }
    }
  } 
```

和反向 (321)

```
 for (i = 10; i > 0; i--)
  {
    for (j = 1; j <= i; j++)
    {
      if (numbers[j-1] < numbers[j])
      {
        temp = numbers[j-1];
        numbers[j-1] = numbers[j];
        numbers[j] = temp;
      }
    }
  } 
```

# c# - 删除可部署的依赖项

> ID：14389500
> 
> 赞同：0
> 
> 时间：2013-01-17T22:43:51.340
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, deployment

添加`"Deployable Dependencies"`到我的`ASP MVC3`项目后，我在寻找`/Account/Login`我的网站没有的页面时遇到 404 错误。

在做了一些研究之后，我发现这是添加的 ASP.NET Razor 依赖项的问题。但是，在搜索了互联网之后，我找不到一个资源来告诉我如何删除这些依赖项。

是像删除`dlls`存储在其中的 bin 文件夹一样简单，还是有其他过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:12:42.267

这是 MVC 3 中的一个已知问题，通常在您部署（并添加可部署的依赖项）后立即出现。我们最近处理了它。

答案是添加以下应用设置

```
<add key="autoFormsAuthentication" value="false" /
<add key="loginUrl" value="~/LogOn" /> 
```

# objective-c - 单个字符串中的程序化 NSLayoutConstraints

> ID：14389503
> 
> 赞同：1
> 
> 时间：2013-01-17T22:43:57.390
> 
> 标签：objective-c, nslayoutconstraint

有没有一种方法可以将以下 3 个语法行组合成一个语句，例如（不起作用）：

```
[_cardsContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[cardContainer1]|[cardContainer2]|[cardContainer3]|" options:0 metrics:nil views:viewsDictionary]];

1\. [_cardsContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[cardContainer1]|" options:0 metrics:nil views:viewsDictionary]];
2\. [_cardsContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[cardContainer2]|" options:0 metrics:nil views:viewsDictionary]];
3\. [_cardsContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[cardContainer3]|" options:0 metrics:nil views:viewsDictionary]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:17:54.117

不，但您可以分两行完成：

```
[_cardsContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[cardContainer1]|" options:0 metrics:nil views:viewsDictionary]]; 
```

这将卡片容器 1 固定到 superview 的顶部和底部。然后：

```
[_cardsContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[cardContainer1][cardContainer2][cardContainer3]|"  options:NSLayoutFormatAlignAllTop | NSLayoutFormatAlignAllBottom metrics:nil views:viewsDictionary]]; 
```

对齐剩余卡片容器的顶部和底部。

这假设您希望视图彼此相邻布置，您实际上并没有指定任何水平布局细节。

当使用可视化格式来考虑每一行可视化格式语言代表视图中的单行或单列布局时，它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:51:14.527

据我所知，没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T23:39:57.433

这不是真正的单行，但您可以通过循环执行来减少三行的重复：

```
for (NSView *view in @[cardContainer1, cardContainer2, cardContainer3]) {
    [_cardsContainer addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[view]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(view)]];
} 
```

# sendmail - 发送 PHP 邮件时“$to”参数中使用的最大电子邮件地址数？

> ID：14389504
> 
> 赞同：0
> 
> 时间：2013-01-17T22:43:57.807
> 
> 标签：sendmail, phpmailer, php

虽然我相信没有实际声明的限制，并且 php mail() 函数的邮件收件人数量理论上是无限的，但我也相信，根据您的经验，不应该忽略一些最大数量，以便发送不会在垃圾文件夹中结束的 php 邮件。

那个号码是多少？

*我的任务是向组织的合作伙伴发送大约 2000 封重要通知电子邮件。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:05:10.553

1.  每个收件人发送一封电子邮件，这就是他们无论如何都会发送的方式。除非您已专门配置此特定邮件服务器以在单个邮件中接受 squillion 收件人，否则您很可能会被服务器拒绝该邮件。此外，收件人太多的邮件只是乞求被过滤为垃圾邮件。

2.  正如@relentless 所提到的，您还应该与您的房东核实他们的批量邮寄政策是什么。我工作的最后一家托管公司将邮寄频率限制为每 5 分钟 100 封，或每 3 秒一封。

3.  另外，捕捉你的邮件函数的返回值，看看邮件是否提交成功。我不知道我和多少愤怒的人谈论过他们可怕的批量邮件脚本，因为他们从不费心去看`mail()`函数的返回。

4.  设置标题`Return-Path: <bounced@yourdomain.com>`并实际检查您的退回邮件并删除地址。如果不这样做，您将被标记为垃圾邮件发送者。

5.  包括*一些*请求从邮件列表中删除的选项，并尊重所有请求。如果您不这样做，您将被标记为垃圾邮件发送者，并且有人会向abuse@yourhostingcompany.com 发送一封愤怒的电子邮件，这可能会导致您的帐户被暂停/终止，具体取决于他们对电子邮件系统声誉的关心程度。

6.  [检查主机的出站邮件服务器的信誉](http://multirbl.valli.org)。如果它在太多大列表中，您的电子邮件将无法通过。

7.  不要发送包含垃圾邮件关键字的电子邮件，例如“购买”、“付款”、“便宜”、“阴茎溢出”等。我见过许多出于好意的时事通讯/通知电子邮件，这些电子邮件只是因为内容而被过滤作者无法客观地看待他们使用的词语。

或者只是考虑使用像 ConstantContact 这样信誉良好的邮件服务来为您处理*所有这些*垃圾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:45:57.887

大多数网络托管公司会将您限制在大约 100 个（我相信每小时）。请与您的主人确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T22:48:16.557

[Cron](http://www.thegeekstuff.com/2011/07/php-cron-job/)在这里是一个更好的主意，因为 max_script_exec_time 在这里也可能会妨碍您。更好的方法是制作收件人列表，然后使用 Cron 和 PHP 脚本来处理它们，直到列表为空。看看[这里](http://www.sitepoint.com/forums/showthread.php?652247-How-to-send-large-%2810-000-%29-number-of-emails-via-Php-MySQL)

# windows-8 - 如何在 Windows 8 应用商店应用开发中模拟应用购买？

> ID：14389511
> 
> 赞同：0
> 
> 时间：2013-01-17T22:44:23.887
> 
> 标签：windows-8, windows-store-apps

我正在尝试使用以下代码为我的单元测试模拟应用程序购买：

```
currentApp.requestAppPurchaseAsync(false); 
```

它确实返回了表明购买成功的 S_OK 代码，但我的单元测试失败了，因为`licenseInformation.isTrial`它返回为真。

我的印象是它应该将 isTrial 更改为 false，因为我刚刚购买了它。

想法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T04:15:36.770

试着打电话

```
await currentApp.requestAppPurchaseAsync(false); 
```

我的猜测是，在异步方法完成并且实际购买许可证之前，您的单元测试仍在继续。

# objective-c - 如何正确显示货币 iPhone/Objective-C

> ID：14389512
> 
> 赞同：3
> 
> 时间：2013-01-17T22:44:27.937
> 
> 标签：objective-c, cocoa, currency

我正在尝试从长值正确显示格式正确的货币。我正在使用 NSNumberFormatter 但它似乎切断了美分所在的小数位。

例如，如果我有一个 1203（美分）的长值，我希望它具有定点格式（如 12.03）。这是我所做的：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
formatter.numberStyle = NSNumberFormatterCurrencyStyle;
formatter.currencyCode = "USD";
formatter.multiplier = [NSNumber numberWithDouble:0.01];
long currencyAmount = 1203;
NSNumber *number = [NSNumber numberWithLongLong:currencyAmount];
[label setText:[formatter stringFromNumber:number]]; 
```

我得到这个输出 12.00 美元，但我想要 12.03 美元

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:16:17.197

想到其中的整数截止错误`NSNumberFormatter`是疯狂的猜测，但是您是否尝试过默认乘数 1 并将转换后的货币金额除以 100 自己？

**编辑**：对于这种解决方法，以下帖子建议使用`NSDecimalNumber`以避免舍入问题。[NSNumberFormatter 格式化货币不适用于浮点数](https://stackoverflow.com/questions/10545290/nsnumberformatter-to-format-currency-not-working-for-floats)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T23:46:07.187

我想出了答案。这将正确地将 long/long long 值格式化为货币。

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
formatter.numberStyle = NSNumberFormatterCurrencyStyle;
formatter.currencyCode = "USD";
long currencyAmount = 1203;
NSDecimalNumber *wrappedCurrencyAmount = [NSDecimalNumber decimalNumberWithMantissa:currencyAmount exponent:-2 isNegative:NO];
[label setText:[formatter stringFromNumber:wrappedCurrencyAmount]]; 
```

# python - 在 Python 中使用 LXML 解析 HTML 表

> ID：14389513
> 
> 赞同：1
> 
> 时间：2013-01-17T22:44:28.257
> 
> 标签：python, parsing, lxml

我需要解析以下结构的html表：

```
<table class="table1" width="620" cellspacing="0" cellpadding="0" border="0">
 <tbody>
   <tr width="620">
     <th width="620">Smth1</th>
     ...
   </tr>
   <tr bgcolor="ffffff" width="620">
     <td width="620">Smth2</td>
     ...
   </tr>
   <tr bgcolor="E4E4E4" width="620">
     <td width="620">Smth3</td>
     ...
   </tr>
   <tr bgcolor="ffffff" width="620">
     <td width="620">Smth4</td>
     ...
   </tr>
 </tbody>
</table> 
```

Python代码：

```
r = requests.post(url,data)
html = lxml.html.document_fromstring(r.text)
rows = html.xpath(xpath1)[0].findall("tr")
#Getting Xpath with FireBug
data = list()
for row in rows:
    data.append([c.text for c in row.getchildren()]) 
```

但我在第三行得到了这个：

```
IndexError: list index out of range 
```

任务是由此形成python dict。行数可能不同。

**UPD。** 更改了获取 html 代码的方式，以避免请求库可能出现的问题。现在它是一个简单的网址：

```
html = lxml.html.parse(test_url) 
```

这证明使用 html 一切正常：

```
lxml.html.open_in_browser(html) 
```

但还是同样的问题：

```
rows = html.xpath(xpath1)[0].findall('tr')
data = list()
for row in rows:
    data.append([c.text for c in row.getchildren()]) 
```

这是xpath1：

```
'/html/body/table/tbody/tr[5]/td/table/tbody/tr/td[2]/table/tbody/tr/td/center/table' 
```

**UPD2。**通过实验发现，xpath 在以下情况下崩溃：

```
xpath1 = '/html/body/table/tbody'
print html.xpath(xpath1)
#print returns [] 
```

如果 xpath1 更短，那么它似乎运行良好并`[<Element table at 0x2cbadb0>]`返回`xpath1 = '/html/body/table'`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T00:20:01.363

您没有包含 XPath，所以我不确定您要做什么，但如果我理解正确，这应该可以

```
xpath1 = "tbody/tr"
r = requests.post(url,data)
html = lxml.html.fromstring(r.text)
rows = html.xpath(xpath1)
data = list()
for row in rows:
    data.append([c.text for c in row.getchildren()]) 
```

这是制作一个项目列表的列表，如下所示：

```
[['Smth1'], ['Smth2'], ['Smth3'], ['Smth4']] 
```

要获得一个简单的值列表，您可以使用此代码

```
xpath1 = "tbody/tr/*/text()"
r = requests.post(url,data)
html = lxml.html.fromstring(r.text)
data = html.xpath(xpath1) 
```

这一切都假设 r.text 正是您在那里发布的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:45:47.523

您的`.xpath(xpath1)`XPath 表达式找不到任何元素。检查该表达式是否有错误。

# javascript - $.getJSON() 脚本第一次运行时无法正常运行，但第二次运行时会正常运行。如何让它第一次运行？

> ID：14389514
> 
> 赞同：2
> 
> 时间：2013-01-17T22:44:31.697
> 
> 标签：javascript, jquery, json

这是我在 Firebug 中输入的脚本：

```
var jsonData;

$.getJSON("./js/ohno.JSON",function(data){
    jsonData = data;
});

console.log(jsonData); 
```

这是 .JSON 文件的内容：

```
{"oh":"no"} 
```

我第一次在 Firebug 中运行脚本时，它返回“未定义”

我第二次运行它（不刷新页面）它返回对象。

如果我刷新，同样的事情会发生——第一次运行返回“未定义”，第二次运行返回对象。

.JSON 文件是

如何使它在我第一次运行脚本时返回对象？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T22:47:02.753

getJSON 是异步的；这意味着脚本将继续执行，同时仍会加载数据。

你必须等到它完成。

```
var jsonData;

$.getJSON("./js/ohno.JSON",function(data){
    jsonData = data;
    console.log(jsonData);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T22:47:07.400

您需要将`console.log`（以及您要在其上运行的任何其他代码`data`）放置在回调函数中：

```
$.getJSON("./js/ohno.JSON",function(data){
    jsonData = data;
    console.log(jsonData);
}); 
```

[`.ajaxComplete`](http://api.jquery.com/ajaxComplete/)如果您觉得需要将其分开，您也可以使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T22:47:17.493

`getJSON`是异步的，这就是为什么你必须提供一个回调来处理数据。该请求已被触发，但在您到达时尚未完成`console.log`，因此该值未定义。它会在短时间内完成并设置变量。

将您的`console.log`处理程序移动到您的回调中，一切都应该按预期工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T22:48:49.990

匿名`function`是一个异步回调，所以它**在**你的`console.log`. 这是正确的方法：

```
var jsonData;

$.getJSON("./js/ohno.JSON",function(data){
    jsonData = data;
    console.log(jsonData);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T22:50:32.493

The getJSON function is asynchronous, so the success callback function only gets executed once the request finishes. Your console.dir() is initially executing before the response happens.

Put the console.dir() inside your getJson handler function.

# iphone - UITableView 刷新崩溃

> ID：14389515
> 
> 赞同：0
> 
> 时间：2013-01-17T22:44:39.337
> 
> 标签：iphone, ios, xcode, uitableview, timer

我有一个从 Twitter 搜索中获取 JSON 数据的 UITableView。我正在使用轮询来自动刷新视图。

在我的 viewDidLoad 中，我有：

```
[NSTimer scheduledTimerWithTimeInterval:10.0 target:self selector:@selector(autoTweets:) userInfo:nil repeats:YES]; 
```

然后我有：

```
-(void) autoTweets : (NSTimer *)theTweets
{
    NSURL *url = [NSURL URLWithString:@"http://search.twitter.com/search.json?q=%23hatlive%20-%22RT%20%40%22"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    connection = [NSURLConnection connectionWithRequest:request delegate:self];

    if (connection)
    {
        webData = [[NSMutableData alloc] init];
    }

    [[self myTableView]setDelegate:self];
    [[self myTableView]setDataSource:self];
    array = [[NSMutableArray alloc] init];
} 
```

这样做会每 10 秒刷新一次数据。问题是，如果我在代码执行的第 10 秒滚动，应用程序就会崩溃。如果我不滚动，它会更新得很好。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:49:30.550

尝试`[self.tableView beginUpdates];`并`[self.tableView endUpdates];`同时更新您的数据。此外，您不必一直重置数据源和委托。您甚至可以调用`[self.tableView reloadData];`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:49:40.360

Assuming `array` is the data used by the table view's data source, then the problem is that you change the contents of the array at the start of the connection. Then the contents get updated as the connection completes in the background. Meanwhile, as the table is scrolling, it is still trying to access the old contents of the array.

One solution is to setup a temporary array used to deal with the new connection. Don't update the old array with the new array until just before you call `reloadData` on the table.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T16:22:36.213

您可以在刷新之前禁用表格视图的触摸，然后在设置数据后启用。

```
self.myTableView.userInteractionEnabled = YES; // before refresh
self.myTableView.userInteractionEnabled = NO;  // after 
```

# parsing - Xtext：生产和数据类型规则之间的区别

> ID：14389516
> 
> 赞同：1
> 
> 时间：2013-01-17T22:44:40.647
> 
> 标签：parsing, xtext

有人可以向我解释 xtext 中生产规则和数据类型规则之间的区别吗？到目前为止，我知道两者都是解析器规则，Datatype Rule 返回一个原始 EDataype，生产规则在 AST 中创建一个 EObject。但我看不出它们的语法定义有什么不同：

数据类型规则：十进制：INT '.' 整数；

生产规则：模型：（stats += Statement）*；

解析器如何知道哪个是什么规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T09:39:33.183

解析器使用解析器规则的（推断的）返回类型来区分产生式和数据类型。如果返回的类型是 EMF EDataType，则该规则为数据类型规则，否则为生产规则。

这篇[博](http://zarnekow.blogspot.de/2012/11/xtext-corner-6-data-types-terminals-why.html)文试图强调 Xtext 中各种规则之间的一些差异。

# c++ - const char * 在循环期间改变值

> ID：14389518
> 
> 赞同：1
> 
> 时间：2013-01-17T22:44:45.860
> 
> 标签：c++, pointers, c-strings, const-char

我有一个函数，它遍历 a`const char *`并使用该字符将对象添加到一个实例中，`std::map`如果它是一系列可识别字符之一。

```
#define CHARSEQ const char*

void compile(CHARSEQ s) throw (BFCompilationError)
{
     std::cout << "@Receive call " << s << std::endl;

     for(int i = 0; s[i] != '\0'; i++)
     {
         if (std::string("<>-+.,[]").find_first_of(s[i]) == std::string::npos)
         {
             throw BFCompilationError("Unknown operator",*s,i);
         }
         std::cout << "@Compiling: " << s[i] << std::endl;
         std::cout << "@address s " << (void*)s << std::endl;
         std::cout << "@var s " << s << std::endl;
         controlstack.top().push_back(opmap[s[i]]);
     }
 } 
```

传递的字符序列是`"++++++++++."` 前3次迭代，print语句显示'+'、'+'和'+'的期望值，并且的值`s`继续为“++++++++++” +。”。但是，在第四次迭代中，它变得混乱，产生了奇怪的值，`s`例如`'Ð'`、`'öê'`、和许多其他字符序列。如果抛出异常的行被删除，并且允许循环继续，那么之后的值不会再改变。`'cR '``'œk'``s`

其他函数可以访问，`s`但由于这不是一个多线程程序，我不明白为什么这很重要。我对为什么`s`会发生变化并不感到困惑，而是为什么它只在第四次迭代时发生变化。

我已经搜索过，唯一看起来完全相关的帖子就是[这个，](https://stackoverflow.com/questions/10249750/const-char-changed)但它仍然没有回答我的问题。（研究一直很困难，因为搜索“const char* 改变值”或类似术语只会出现数百[篇关于 is 的部分是 const](https://stackoverflow.com/questions/13378099/const-char-allowing-to-change-the-character-value-why)的帖子）。

最后，我知道我可能应该使用`std::string`，如果没有答案，我会使用它，但我仍然想了解这种行为。

编辑：

这是调用此函数的代码。

```
CHARSEQ text = load(s);

std::cout << "@Receive load " << text << std::endl;

try
{
    compile(text);
}
catch(BFCompilationError& err)
{
    std::cerr << "\nError in bf code: caught BFCompilationError @" << err.getIndex() << " in file " << s << ":\n";
    std::cerr << text << '\n';
    for(int i = 0; i < err.getIndex(); i++)
    {
        std::cerr << " ";
    }
    std::cerr << "^\n";
    std::cerr << err.what() << err.getProblemChar() << std::endl;
    return 1;
} 
```

在哪里`load`：

```
CHARSEQ load(CHARSEQ fname)
{
    std::ifstream infile (fname);
    std::string data(""), line;
    if (infile.is_open())
    {
    while(infile.good())
    {
        std::getline(infile,line);
        std::cout << "@loading: "<< line << '\n';
        data += line;
    }
    infile.close();
}
else
{
    std::cerr << "Error: unable to open file: " << fname << std::endl;
}

return std::trim(data).c_str(); 
```

}

并且文件`fname`被`++++++++++.`传播，使得每行有一个字符。

编辑2：

这是控制台输出的示例：

```
@loading: +
@loading: +
@loading: +
@loading: +
@loading: + 
@loading: +
@loading: +
@loading: +
@loading: +
@loading: +
@loading: .
@Receive load ++++++++++.
@Receive call ++++++++++.
@Compiling: +
@address s 0x7513e4
@var s ++++++++++.
@Compiling: +
@address s 0x7513e4
@var s ++++++++++.
@Compiling: +
@address s 0x7513e4
@var s ++++++++++.
@Compiling: 
@address s 0x7513e4
@var s ßu

Error in bf code: caught BFCompilationError @4 in file bf_src/Hello.txt:
ßu
^
Unknown operatorß 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T22:57:00.053

你的`load`功能有缺陷。由返回的`const char*`指针`c_str()`仅在底层`std::string`对象存在之前有效。但是`data`是一个局部变量，`load`并且在返回后被清除。它的缓冲区不会被零覆盖，而是保留为空闲内存。因此，在返回后立即打印出值可能会起作用，但您的程序可能会在那里放置新值，并且指针指向的值会改变。

我建议使用`std::string`作为负载的返回值作为一种解决方法。

# kendo-ui - 剑道移动模板样式/格式不起作用

> ID：14389522
> 
> 赞同：1
> 
> 时间：2013-01-17T22:45:21.303
> 
> 标签：kendo-ui

我正在尝试使用如下所示的模板，结果是一个视图，其中包含模板中的所有元素在一行上，即使我正在使用

分离元素。为什么这不能正确显示？似乎无论我做什么样式，它仍然以单线视图结束。

更新罪魁祸首是剑道样式表 - kendo.mobile.all.min.css -

所以剑道专家的新问题是，为什么剑道通过模板出现在列表视图中时处理输入字段的方式与出现在模板外部时不同？

列表视图模板之外的输入字段获取此类

```
.km-ios .km-list input:not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="image"]):not([type="checkbox"]):not([type="radio"]):not(.k-input):not(.k-button), .km-ios .km-list select:not([multiple]), .km-ios .km-list .k-dropdown-wrap, .km-ios .km-list textarea 
```

这导致没有奇怪的样式规则:) 普通文本字段视图

模板内的输入字段获取此类

```
.km-root input:not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="image"]):not([type="checkbox"]):not([type="radio"]):not(.k-input):not(.k-button), .km-root select:not([multiple]), .km-root .k-dropdown, .km-root textarea 
```

这导致将这些规则应用于它（使该字段位于一个奇怪的位置并松散所有正常的字段，即边框背景等）我不能 100% 确定哪个包装器导致了这种情况

```
appearance: none;
-moz-appearance: none;
-webkit-appearance: none;
font-size: 1.1rem;
color: #385487;
min-width: 6em;
border: 0;
padding: .4em;
outline: 0;
background: 
transparent; 
```

我的解决方法是为列表视图模板中的任何文本字段提供 class="k-input" ，这显然将它们排除在上述 css 之外 -

```
<script src="kendo/js/jquery.min.js"></script>
    <script src="kendo/js/kendo.mobile.min.js"></script>

    <link href="kendo/styles/kendo.mobile.all.min.css" rel="stylesheet" />

<!-- eventDetail view -------------------------------------------------------------------------------------------------->
    <div data-role="view" id="view-eventDetail" data-show="getEventDetailData" data-title="eventDetail">
        <header data-role="header">
            <div data-role="navbar">
                <span data-role="view-title"></span>
                <a data-align="right" data-role="button" class="nav-button" href="#view-myEvents">Back</a>
            </div>
        </header>
        <form id="updateEventForm">
            <div id="updateEvent">
                <div id="eventDetail"></div>
                <p>
                    <input type="button" id="eventUpdateCancelButton" style="width:30%" data-role="button" data-min="true" value="Back" />
                    <input type="submit" id="eventUpdateSaveButton" style="width:30%" data-role="button"  data-min="true" value="Save" />
                </p>
                <div id="eventResult"></div>
            </div>

        </form>

    </div>

    <script id="eventDetail-template" type="text/x-kendo-template">

        <p>
        <input name="event_type" id="event_type" data-min="true" type="text" value="#= type #" />
        </p>
        <p>

        <input name="event_loc" id="event_loc" data-min="true" type="text" value="#= type #" />
        </p>
        <p>

        <input name="event_date_time" id="event_date_time" data-min="true" type="datetime" value="#= stamp #" />
        </p>
        <p>
        Share this
        <input data-role="switch" id="event_share" data-min="true" checked="checked" value="#= share #"/>
        </p>
        <input name="userID" id="userID" type="hidden" value="#= user_id #" />
        <input name="eventID" id="eventID" type="hidden" value="#= event_id #" />

    </script>

    <script>        
        function getEventDetailData(e) {

            var dataSource = new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "http://localhost/mpt/website/api/event_details.php",
                        dataType: "jsonp",
                        type: "GET",
                        data: { userID: e.view.params.user_id, eventID: e.view.params.event_id },
                        cache: false
                    },
                    parameterMap: function(options) {
                        return {
                            userID: options.userID,
                            eventID: options.eventID

                        };
                    }
                },
                schema: { // describe the result format
                    data: "results" // the data which the data source will be bound to is in the "results" field
                }
            });           

            console.log(e);

            $("#eventDetail").kendoMobileListView({
                dataSource: dataSource,
                template: kendo.template($("#eventDetail-template").html())

            }).data("kendoMobileListView");

        }           

        //update event          
        function sendUpdateEvent() {

            var siteURI = "http://localhost/mpt/website/api/update_event.php?";

            app.showLoading();

            var user_id = $('#userID').val();
            var event_id = $('#eventID').val();
            var event_type = $('#event_type').val();
            var event_loc = $('#event_loc').val();
            var event_date_time = $('#event_date_time').val();
            var event_share = $('#event_share').val();

            var formVals = 'eventID=' + event_id + '&userID=' + user_id + '&event_type=' + event_type + '&event_loc=' + event_loc + '&event_date_time=' + event_date_time + '&event_share=' + event_share;
            var fullURI = siteURI + formVals;

            $.ajax({
                url: fullURI, dataType: 'json', success: function (data) {
                    $('#eventResult').html(data.results);
                    app.hideLoading();
                    app.navigate("#view-myEvents");

                }
            });
        }

        $('#eventUpdateCancelButton').click(function () {

            app.navigate("#view-myEvents");
        });

        $('#eventUpdateSaveButton').click(function () {

            sendUpdateEvent();
        });

        $('#updateEventForm').submit(function () {

            sendUpdateEvent();

            return false;
        });

    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T00:17:00.063

ListView 小部件应该应用于`<ul>`元素。尝试改变：

```
<div id="eventDetail"></div> 
```

到：

```
<ul id="eventDetail"></ul> 
```

* * *

还有这段代码：

```
 $("#eventDetail").kendoMobileListView({
            dataSource: dataSource,
            template: kendo.template($("#eventDetail-template").html())
        }).data("kendoMobileListView"); 
```

最后的`.data()`调用在这里没有做任何事情并且可以被删除，您也可以只传递文本字符串作为模板。你不需要给`kendo.template()`自己打电话。因此，您可以将其更改为：

```
 $("#eventDetail").kendoMobileListView({
            dataSource: dataSource,
            template: $("#eventDetail-template").html()
        }); 
```

# ruby-on-rails - 自定义 url_for 为模型返回的内容？

> ID：14389524
> 
> 赞同：0
> 
> 时间：2013-01-17T22:45:30.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, actionview

我有一个`post`模型有很多`comments`. 现在评论链接实际上是这样的 url `/post/1?page=3#26`。

我想要做的是调用`link_to "foobar", @comment`并让它生成正确的 url。我已经知道如何计算评论所在的页面，因此您可以假设`@comment.page_num`将返回正确的整数。

我认为这将需要以[`polymorphic_url`](http://api.rubyonrails.org/classes/ActionDispatch/Routing/PolymorphicRoutes.html)某种方式自定义。

如果它不能轻易完成，也许我需要一个辅助函数`link_to_comment`，但我希望它能够做所有`link_to`可以做的事情，即传递块等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:54:03.217

我认为这样的事情会起作用：

```
link_to "foobar", @post, href: "#{url_for(@post)}?page=#{@comment.page_num}" 
```

这是假设`page_num`回报`3#26`，这是一个我不是非常有信心的假设，但我认为你可以从那里弄清楚。

还有一条要考虑的评论。真的是类`page_num`的重要属性`Comment`吗？在我看来，这是一个格式问题，可能属于辅助函数而不是`Model`. 只是想一想。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:52:09.140

所以这就是我最终做的。它非常简单，但正是我需要的。我最初的范围可能过于雄心勃勃。*保持简单愚蠢*的经典案例。

```
module CommentsHelper

  def comment_page_url(comment)
    post_url(comment.post, page: comment.page_num, anchor: comment.id)
  end

end 
```

# linux - 堆栈展开后未回收 Linux 堆栈常驻内存

> ID：14389525
> 
> 赞同：2
> 
> 时间：2013-01-17T22:45:45.233
> 
> 标签：linux, unix, memory-management, linux-kernel, mmap

如果在堆栈上分配，Linux 在不再使用时不会回收内存。

## 堆

我在堆上动态分配（malloc/mmap）1GB。

*   分配前：

> $顶部
> 
> 虚拟内存 1GB
> 
> 常驻内存 ~ 0

*   内存集 1GB

> $顶部
> 
> 虚拟内存 1GB
> 
> 常驻内存 1GB

*   1GB 的 deallocate (free/munmap) - 按预期回收

> $顶部
> 
> 虚拟内存 1GB
> 
> 常驻内存 ~ 0

## 堆

我在堆栈上动态分配 1GB。

*   前：

> $顶部
> 
> 虚拟内存 1GB
> 
> 常驻内存 ~ 0

*   内存集 1GB

> $顶部
> 
> 虚拟内存 1GB
> 
> 常驻内存 1GB

*   解除分配（堆栈展开） 1GB - 常驻内存仍然是 1GB，即使在解除分配之后！为什么？

> $顶部
> 
> 虚拟内存 1GB
> 
> 常驻内存 1GB

为什么，当堆栈展开驻留内存时（物理页面仍在使用中）？

堆段分配是用 mmap 完成的，而堆栈段分配是用 mmap 完成的——那么为什么回收的行为会有所不同呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:40:33.337

因为操作系统认为一旦你使用了那么多堆栈，你可能会再次这样做。操作系统无法[从您的应用程序外部]真正知道您的应用程序将来要做什么。很难弄清楚什么时候可以释放一些堆栈，并且您在操作系统中会遇到各种有趣的竞争条件，您必须停止应用程序运行只是为了减少它的堆栈 - 然后它突然再次需要它，所以它需要被分配。

`mmap`另一方面，使用`munmap`可以告诉操作系统“我对这个内存没有兴趣”。所以它在那时被释放[作为 munmap 调用本身的一部分 - 具体来说，在`zap_pte_range`页面本身被释放并返回给操作系统。

除非满足以下条件，否则这应该不是什么大问题： 1\. 您在没有交换的嵌入式系统上运行。2.您的应用程序在使用大量堆栈返回后运行了很长时间（假设您实际上确实需要这么多内存作为堆栈，您必须在需要时让该内存可用，所以它显然只是一个如果应用程序稍后不需要堆栈并且该时间段很长 - 无论您对 long 的定义是什么，都会出现问题。3\. 您的系统没有足够的 RAM 来满足其他应用程序中的其他 RAM 需求。

我这么说的原因是，虽然堆栈使用了那么多内存，但如果应用程序长时间不使用内存，并且系统内存不足，它会将其交换到磁盘 - 进行交换如果需要，在稍后阶段。

我还要说，使用如此大量的堆栈空间通常被认为是一个坏主意。堆栈空间不足[达到限制或“没有足够的可用内存”]几乎总是致命的。

所以虽然我经常建议使用堆栈空间来存储临时变量，但我认为 1GB 的堆栈是相当多的。几兆字节应该是可以接受的，但数百兆字节或更多可能是“您可能应该以另一种方式存储东西”的标志。

# javascript - Datepicker - 如果选择的日期是一个月的第一天，则更改日期格式

> ID：14389530
> 
> 赞同：0
> 
> 时间：2013-01-17T22:46:27.980
> 
> 标签：javascript, jquery, jquery-ui-datepicker

我正在使用 jQuery datepicker，但我希望能够根据选择的日期是否是该月的第一天来更改日期的格式。

我知道我需要使用`onSelect: function() { ... }`，但我真的不确定如何根据选择的内容将 if 语句插入此处以更改日期格式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:59:15.113

它会是这样的：

```
onSelect: function(dateText, inst) {
    if( dateText.substring(0,2) == "01" ){  //first two characters of the string
        //change format
    }
} 
```

# java - 带有自签名证书的 Java SSL 连接，无需将完整的密钥库复制到客户端

> ID：14389537
> 
> 赞同：0
> 
> 时间：2013-01-17T22:46:59.740
> 
> 标签：java, servlets, ssl, https, keytool

我正在用 Java 设置一个许可 servlet 以及一个客户端应用程序，该应用程序将发布新许可请求并验证该服务器上的现有许可。servlet 在 Tomcat 中运行。我已经配置了 Tomcat，以便它只允许通过 https 连接到 servlet，这工作得很好。

我创建了一个自签名证书，使用`'keytool -genkey -alias www.mysite.com -keyalg RSA -keystore license.store'`它创建一个文件`license.store`并将 tomcat 指向这个 keystoreFile 及其密码`asdf1234`。

当我尝试通过 Java 中的 https 从客户端连接到 servlet 时，我收到了熟悉`PKIX path building failed`的信息，因为证书不在信任库中。我尝试使用[此](https://stackoverflow.com/a/859271)建议解决此问题，导致以下代码：

```
private SSLSocketFactory getSSLFactory() throws Exception {

    KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
    InputStream is = this.getClass().getResourceAsStream("license.store");

    if(is ==null) {
        return null;
    }

    keyStore.load(is, "asdf1234".toCharArray());
    is.close();

    TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
    tmf.init(keyStore);

    SSLContext ctx = SSLContext.getInstance("TLS");
    ctx.init(null, tmf.getTrustManagers(), null);

    return ctx.getSocketFactory();
} 
```

之后我打电话：

```
HttpsURLConnection con = (HttpsURLConnection)url.openConnection();
con.setSSLSocketFactory(getSSLFactory()); 
```

这导致成功的连接。

现在的问题是，只有当我将它复制`license.store`到客户端并将其加载到`KeyStore.load()`. 将服务器使用的私钥及其密码复制到客户端并不是很安全。有没有办法只从 license.store 中提取公钥并使用它？我已经在这个论坛和其他论坛上搜索了一天，但似乎无法得到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:02:03.350

您不应该生成公私密钥对，而是将服务器的证书导入（客户端的）Java 信任库。证书不是机密，因此不会在客户端提供安全风险。请参阅`-import`keytool 的选项。这是一个[例子](http://www.chrissearle.org/blog/technical/adding_self_signed_https_certificates_java_keystore)。

# android - 获取 Intent 中的活动名称

> ID：14389538
> 
> 赞同：4
> 
> 时间：2013-01-17T22:47:00.927
> 
> 标签：android, android-intent, ads, start-activity

我正在使用一些不同的广告网络，它们都需要将自己的活动名称添加到清单中。

我想知道用户何时单击它们，所以我设置了一个覆盖，`startActivity(Intent intent)`但我需要检查意图对象以有条件地设置一些值。

例如，使用 tap 的网络，它将从类中启动一个活动`com.ads.TapForTap`.. 单击这将调用 startActivity(Intent intent) 我如何从意图中获取类的名称？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-07-07T19:06:14.677

您可以使用给定的意图参数的组件类名称。记住类名可能是空的！

[`intent.getComponent().getClassName()`](http://developer.android.com/reference/android/content/ComponentName.html#getClassName())

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T22:56:13.843

try below line to get current activity name,

```
this.getClass().getSimpleName() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T23:01:18.593

如果您有以下行，则应返回要启动的 Activity 的完全限定名称：

*   启动 Activity 的 Intent
*   一个 Context 实例（因此您可以调用`getPackageManager()`）。

* * *

```
String className = myIntent.resolveActivity (myContext.getPackageManager()).getClassName(); 
```

有关详细信息，请`Intent`参阅[`resolveActivity()`](http://developer.android.com/reference/android/content/Intent.html#resolveActivity%28android.content.pm.PackageManager%29).

# database - ADP 文件中的数据库连接信息在哪里？

> ID：14389543
> 
> 赞同：6
> 
> 时间：2013-01-17T22:47:19.133
> 
> 标签：database, forms, ms-access, adp

用户输入了他们每天使用的 OLD Access 数据库和表单项目的票证。他们说使用时找不到数据库。自大学以来我就没有使用 MS Access 来设计数据库或界面，所以我不知道在哪里可以找到它正在尝试访问的数据库。

我想尝试定位数据库以查看 1）它是否存在并且 2）是否未损坏

主界面是通过 *.adp 文件完成的。文件中存储的连接字符串信息在哪里？

我已经在 MS Access 2007 中打开了它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T22:57:19.240

使用 ADP，SQL Server 用于所有数据存储。

在立即窗口中（使用`Ctrl`+去那里`g`），检查`ConnectionString`和`Provider`属性：

```
? CurrentProject.Connection.ConnectionString
? CurrentProject.Connection.Provider 
```

# php - 使用 MVC 框架进行开发的源代码管理

> ID：14389547
> 
> 赞同：0
> 
> 时间：2013-01-17T22:47:34.110
> 
> 标签：php, git, version-control, laravel

我正在开发一个小型 Web 项目，使用 PHP 框架，我想将我的开发检查到一些源代码管理中，以便轻松部署到不同的环境。我选择了 Laravel 和 Git，但我想确切的系统对于这个问题并不重要。

我不确定哪个确切的文件夹结构最适合提交给源代码管理。我是不是该：

1.  检查整个框架，包括配置文件？
2.  将“应用程序”和“公共”部分签入单独的存储库，但将配置和系统文件置于源代码控制之外？

如果`1.`是，我如何确保在执行提交/推送/拉取时不会覆盖特定于部署的配置（即 dev、qa、prod）。

如果`2.`是，我如何确保我保持应用程序的未提交部分同步。

任何帮助/指南/最佳实践将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:51:09.987

我会检查所有内容并使用 Laravel 的[环境支持](http://laravel.com/docs/install#environments)。听起来好像您正在为单独的环境维护单独的配置，而不是使用内置功能。

或者，您可以尝试为应用程序创建一个存储库，并为每个配置创建一个存储库，并在测试时拉动应用程序和相关配置。

# symfony - 如何在 Symfony2 中使用 TrSteelCkEditorBundle？

> ID：14389548
> 
> 赞同：0
> 
> 时间：2013-01-17T22:47:33.750
> 
> 标签：symfony, ckeditor, bundle

我是世界的新手，`sf2`我正在努力学习它。我安装`TrSteelCkEditorBundle`了作曲家，现在我试图让编辑器出现在视图中。我的捆绑包在`AppKernel`.

作为初学者，我的问题是：我必须做些什么才能让它发挥作用？我把这段代码粘贴到渲染中

```
$form = $this->createFormBuilder()
        ->add('title', 'text')
        ->add('content', 'ckeditor', array(
            'transformers' => array(),
        ))
        ->getForm(); 
```

在树枝视图中，我有第 6 行：

```
{{ form_widget(form) }} 
```

但我收到一个错误：

```
An exception has been thrown during the rendering of a template ("Catchable Fatal Error: 
Argument 1 passed to Symfony\Component\Form\FormRenderer::searchAndRenderBlock() 
must be an instance of Symfony\Component\Form\FormView, 
instance of Symfony\Component\Form\Form given, called in 
/Applications/mamp/htdocs/Sf2/app/cache/dev/twig/5c/eb/e10823d760716de7f56b39640e79.php 
on line 29 and defined in 
/Applications/mamp/htdocs/Sf2/vendor/symfony/symfony/src/Symfony/Component/Form/FormRenderer.php
line 131") in amTestBundle:Default:index.html.twig at line 6. 
```

如果有人有解决这个问题的线索，那将对我有很大帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:55:46.947

`{{ form_widget(form) }}`不起作用，因为您的变量`$form`是表单本身。为了让 Twig 为其创建小部件，您必须将其发送到 Twig 模板：

```
$form->createView() 
```

以下是您在 controllerAction 中返回时的示例：

```
return $this->render(
        'AcmeFooBundle:Acme:template.html.twig',
        array('form' => $form->createView()) //Here you see the createView()
    ); 
```

# perl - 如何在 Perl 中索引 MongoDB 集合？

> ID：14389550
> 
> 赞同：1
> 
> 时间：2013-01-17T22:47:45.747
> 
> 标签：perl, mongodb

我在 Mongo 命令提示符中使用以下命令按字段名称索引了我的 MongoDB 集合。

```
db.mycollection.ensureIndex({"name" : 1}) 
```

现在我正在尝试在 Perl 中执行完全相同的命令。我试过了

```
$mycollection->ensureIndex({"name" : 1}); 
```

不工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:48:48.663

我在这里找到了答案：[MongoDB::Examples](https://metacpan.org/module/MongoDB%3a%3aExamples)。另一个查找 MongoDB 驱动程序的好地方是：[MongoDB::Tutorial](https://metacpan.org/module/MongoDB%3a%3aTutorial)。

这 2 页似乎有我在 MongoDB Perl 驱动程序上寻找的最多示例。

这是下面的正确语法

```
$mycollection->ensure_index({"name" => 1}); 
```

顺便说一句，索引加快了我的发现速度。索引后从几百万条记录中检索一条记录需要 1 秒钟，从几百万条记录中读取 10K 条记录需要 1 秒钟。所以这对我来说是巨大的进步。

# javascript - 如何用jquery处理两个不相关的事件

> ID：14389556
> 
> 赞同：0
> 
> 时间：2013-01-17T22:48:06.773
> 
> 标签：javascript, jquery, html

我想知道我是否可以同时触发这两个事件：

```
$("input[type=checkbox]").click(function(){
   if($(this).is(":checked"))
   {
       //Value of checkbox
       alert(this.value);
   }
}); 
```

和

```
$("input[type= 'text']").keyup(function(){
   alert(this.value);
}); 
```

我查看了 .bind，但这似乎只适用于一个选定的元素（即 .bind）`$(p).bind("mouseout mouseenter).doSomething())`。

我遇到的情况是，我有一个功能需要在任何这些事情发生时触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:51:10.107

尝试

```
$("input[type=checkbox],input[type='text']").on('click keyup', function(){
   // code
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:51:54.963

如果您仍然需要额外的 if，您可以使用：

```
$("input[type=checkbox]").click(function(){
   if($(this).is(":checked"))
   {
       //Value of checkbox
       alert(this.value);
       somethingHappened();
   }
});

$("input[type= 'text']").keyup(function(){
   alert(this.value);
   somethingHappened();
});

function somethingHappened() {
   // Do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T22:52:34.653

有两种方法可以实现这一点，如下所示：

1.  使用“开”方法：

    ```
    $(document).on('keyup click',"input[type=checkbox],input[type='text']", function(){
       // Do stuff here..
    }) 
    ```

2.  事件后调用函数。

    ```
    $("input[type=checkbox]").click(doSomething);
    $("input[type= 'text']").keyup(doSomething);

    function doSomething() {

    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T22:55:05.667

也许您只需要一个通用功能？

```
$("input[type=checkbox]").click(function(){
   if($(this).is(":checked")) {
       special(this.value);
   }
});

$("input[type= 'text']").keyup(function(){
   special(this.value);
});

function special(val) {
   alert(val);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T22:57:42.220

如果您的意图确实是在整个页面中的任何复选框/文本字段发生更改时调用一个函数，您可能想要这样的东西：

```
$('body').on('change', ':checkbox,:text', function () {

}); 
```

请注意，`:checkbox`and`:text`选择器比`input[type=checkbox]`etc更好。

# php - PHP json_decode 数组无法检索数字索引？

> ID：14389557
> 
> 赞同：1
> 
> 时间：2013-01-17T22:48:15.263
> 
> 标签：php, json, phpunit

我有一个关联数组，我从 json 解码出来`json_decode second value true`，看起来像

```
Array (
    [test] => Array
        (
            [start] => 1358766000
            [end] => 1358775000
            [start_day] => 21
            [end_day] => 21
        )

) 
```

但是由于某种原因，当我执行 $array[0] 时，我得到了空值？如何按索引获取数组？不是键名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:52:21.873

数组的第一级不是数字，它是一个关联数组。你需要做：

```
$array['test']['start'] 
```

或者，要获取第一个元素：

```
reset($array);
$first_key = key($array);
print_r($array[$first_key]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T22:53:01.880

[`array_values()`](http://php.net/manual/en/function.array-values.php)将为您提供数组中的所有值，其中键重新编号为`0`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T22:52:41.763

这是设计使然。. . 您的 JSON 使用了一个密钥（显然`test`），其中包含一个 JSON 对象。执行`json_decode`. 您不能按索引访问，尽管您可以使用`foreach`.

从您的评论中，听起来您想从关联数组中访问上一个和下一个元素。我不知道直接执行此操作的方法，但一种骇人听闻的方法如下：

```
$testArr = array('a'=>'10', 'b'=>'2', 'c'=>'4');
// get numeric index of the element of interest
$keys = array_keys($testArr);
$i = array_search('b', $keys);
// get key of next element
$nextElementKey = $keys[$i+1];
// next element value
$nextElementValue = $testArry[$nextElementKey];
// get key of previous element
$prevElementKey = $keys[$i-1];
// prev value
$[prevElementValue = $testArry[$prevElementKey]; 
```

您可能希望围绕上一个和下一个键计算添加一些错误检查，以处理第一个和最后一个值。

如果您不关心密钥中的数据，Ignacio 的解决方案使用`array_keys`效率更高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T22:51:03.257

You could use [`current`](http://php.net/manual/en/function.current.php).

```
$first = current($array); // get the first element (in your case, 'test')

var_dump($first); 
```

# c++ - 包含 iostream 和包含 iostream.h 有什么区别？

> ID：14389561
> 
> 赞同：0
> 
> 时间：2013-01-17T22:48:24.480
> 
> 标签：c++

> **可能重复：**
> [iostream 和 iostream.h 之间的区别](https://stackoverflow.com/questions/2976477/difference-between-iostream-and-iostream-h)

我的教授说：

```
#include <iostream.h> 
```

是相同的：

```
#include <iostream>
using namespace std; 
```

我有点困惑。`iostream`和 和有什么不一样`iostream.h`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T22:49:12.377

`iostream.h`不是标准 C++ 库的一部分，而`iostream`它是。in`iostream.h`中的名称不在`std`命名空间中，而in 在名称空间`iostream`中。`using namespace std`通过在 include之后发出指令，在`iostream`那里（以及在任何其他标准库包含中）定义的所有名称都被带入全局命名空间。这通常不是一件好事，但它确实在标准版本和非标准版本或预标准版本之间提供了某种程度的等效性。

就声称它们彼此“相同”而言，这是不可能的。`iostream`遵守标准，并且会进化 wrt `iostream.h`。如果您考虑 C++11 标准，则尤其如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:50:20.203

Some very old compilers have used `iostream.h`, but it's not part of the standard. Only the extensionless header files are. It won't even be recognized by modern standard-compliant compilers.

# html - 阻止 CSS 转换在页面加载时触发

> ID：14389566
> 
> 赞同：96
> 
> 时间：2013-01-17T22:48:57.510
> 
> 标签：html, css, google-chrome

我遇到了`transition`在页面加载时触发 CSS 属性的问题。

问题是，当我将 a`color` `transition`应用于一个元素时，（例如：）`transition: color .2s`然后当页面第一次加载我的元素时，我的元素会从黑色闪烁到它自己指定的颜色。

假设我有以下代码：

## CSS

```
p.green {
   color: green;
   transition: color .2s;
   -moz-transition: color .2s;
   -webkit-transition: color .2s;
   -o-transition: color .2s;
}

p.green:hover {
   color: yellow;
} 
```

## HTML

```
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script src="js/main.js"></script>
    <link href="css/main.css" rel="stylesheet" />
</head>
<body>
    <p class="green">The Flashing Text</p>
</body>
</html> 
```

在页面加载时，我的`p.green`将从淡入淡出`black`到`green`.

我不想将颜色转换应用于`:hover`伪类，因为它不会应用转换*onMouseLeave*。

让文字在网页上闪烁真的很烦人。到目前为止，我一直在避免使用过渡，除非我真的需要它们，即使如此我也要小心使用。如果有一些我没有看到的非常明显的解决方案，那就太好了！

这发生在谷歌浏览器上。我没有在其他浏览器中测试过。

[jsfiddle.net/ShyZp/2](http://jsfiddle.net/ShyZp/2/) *（感谢@Shmiddty）*

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2017-03-23T07:23:25.530

如果页面包含元素，Chrome 中有一个**[错误](https://lab.laukstein.com/bug/input)**会导致 CSS 转换触发。`<form>`

一个简单的解决方法是将包含单个空格的脚本标记添加到页面的页脚。

```
<script> </script> 
```

[您可以在https://crbug.com/332189](https://crbug.com/332189)和[https://crbug.com/167083](https://crbug.com/167083)关注该错误。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-01-19T15:52:54.050

@Shmiddty 对这个问题的评论让我思考，所以我一直在玩代码并找到了解决方案。

问题在于`header`声明。通过反转 CSS 和 JS 外部文件调用的顺序 - 即将 CSS 放在 JS 之前 - 颜色转换在页面加载时停止触发：

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="css/main.css" rel="stylesheet" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script src="js/main.js"></script>
</head> 
```

我的猜测是 JS 加载将 CSS 的加载延迟到 DOM 准备好之后。到那时（正如@Shmiddty 建议的那样），文本已经被分配了默认的浏览器颜色，然后使用我的 CSS`transition`声明淡入其样式颜色。

** 我仍然不确定这是最合适的方法，但它确实有效。如果有人有更好的解决方案，请随时添加或编辑。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-11-15T13:59:35.883

添加到您的 CSS：

```
.css-transitions-only-after-page-load * {
  -webkit-transition: none !important;
  -moz-transition: none !important;
  -ms-transition: none !important;
  -o-transition: none !important;
  transition: none !important;
} 
```

并将一些代码添加到您的全局 JavaScript 文件中：

```
$(document).ready(function () {
    $(".css-transitions-only-after-page-load").each(function (index, element) {
        setTimeout(function () { $(element).removeClass("css-transitions-only-after-page-load") }, 10);
    });
}); 
```

*现在，您可以使用css-transitions-only-after-page-load*类标记页面上的任何元素：

```
<div class="container css-transitions-only-after-page-load">
...
</div> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-06-02T21:17:03.390

nienn[发布解决方案](https://stackoverflow.com/a/14416030/1709587)。问题在于文档头，以及您加载样式表的位置/方式。它类似于 PHP 中的“无法修改标头，它们已经发送”，除了 HTML/CSS/webkit 不会引发错误。

我遇到了这个确切的问题，阅读了 nienn 的帖子，然后我检查了我的头。这是我之前的内容。

```
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <html lang="en">
    <meta name="description" content="A website for me to do whatever I want with." >
    <title>My title</title>
    <link rel="stylesheet" type="text/css" href="/mD/media/foot.css">
    <link rel="stylesheet" href="mD/media/head.css" type="text/css">
</head> 
```

请注意，我没有加载任何 JS，还请注意在指定标题后我是如何加载样式表页面的。将样式表引用移到“后面”后，它就像一个魅力。最终结果如下所示：

```
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <html lang="en">
    <meta name="description" content="A website for me to do whatever I want with." >
    <link rel="stylesheet" type="text/css" href="/mD/media/foot.css">
    <link rel="stylesheet" href="mD/media/head.css" type="text/css">
    <title>My title</title>
</head> 
```

不仅 javascript 会导致此问题，而且网站标题也会导致此问题。我想一个好的经验法则是 css > js > 网站标题。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-10-17T21:21:39.030

接受的答案对我没有帮助。谷歌浏览器中有一个[错误，只需](https://bugs.chromium.org/p/chromium/issues/detail?id=332189)**在页面中添加脚本**即可避免。即使是空脚本也能解决问题。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-04-08T15:08:00.793

解决此问题的最佳方法是使用`<script>`本页答案中的单个空格、空白修复。但是我发现了另外两种解决这个问题的方法。

1.  将违规元素的 CSS 放置在`<style>`HTML 文件标题中的标记内。该错误仅在从外部样式表调用 CSS 时发生。
2.  将有问题的元素放入`flexbox`容器中。这也修复了错误。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-10-07T20:33:10.387

您可以在 html 文件中添加一个空的脚本标签。

像这样：

```
<script type="text/javascript"></script> 
```

但它应该至少包含一个字符。空格或换行符 (\n) 或注释 (//) 或其他

```
<script type="text/javascript"> </script>

<script type="text/javascript">
</script>

<script type="text/javascript">//</script> 
```

或者只是将 js 文件链接到您的 html 文件

```
<script type="text/javascript" src="js/script.js"></script> 
```

您可以将脚本标签放置在您想要的任何地方。在**头部**或**身体**标签中。

这个问题只发生在开发过程中，因为在一个网站的最终情况下，它肯定会有一个js文件

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-01-17T22:56:18.973

Have you tried using different transition properties? Such as:

```
-moz-transition: color .2s; /* Firefox 4 */
-webkit-transition: color .2s; /* Safari and Chrome */
-o-transition: color .2s; /* Opera */ 
```

Worked just fine for me in Chrome.

EDIT: You answered the question about browsers already. You should try using -webkit-transform

# perl - 这个命令在内部做什么？openssl pkcs8 -inform DER -in file.key？

> ID：14389570
> 
> 赞同：1
> 
> 时间：2013-01-17T22:49:12.577
> 
> 标签：perl, openssl, rsa

如果我运行命令： `openssl pkcs8 -inform DER -in file.key`

然后我得到这个输出：

```
-----BEGIN PRIVATE KEY-----
MIICdQIBADANBgkqhkiG9w0BAQEFAASCAl8wggJbAgEAAoGBAJymFcYButtSdq6a
. . .
ROHl3KioElE/sRvPEHxJp5Bqlr2UmWSs4oMcDBVLfY609YKZTeKw6NuqH4xzd81F
7Rj3Gr6eyKeC
-----END PRIVATE KEY----- 
```

我需要在我的 PERL 脚本上生成相同的输出，以便将其传递给：

```
Crypt::OpenSSL::RSA->new_private_key($key_string); 
```

并签署我的数据。

所以我问：这个命令在内部做什么？

```
openssl pkcs8 -inform DER -in file.key 
```

所以我可以把这个过程翻译成perl。

这是我到目前为止所拥有的：

我加载了 pkcs8 的 ASN.1 语法，现在我可以通过引用获取数据块：

```
$pkcs8 = Convert::ASN1->new(encoding => 'DER');
$pkcs8->prepare(q<
--PrivateKey 
            EncryptedPrivateKeyInfo ::= SEQUENCE {
                encryptionAlgorithm  EncryptionAlgorithmIdentifier,
                encryptedData        EncryptedData 
                }

            EncryptionAlgorithmIdentifier ::= AlgorithmIdentifier

            EncryptedData ::= OCTET STRING

            AlgorithmIdentifier ::= SEQUENCE {
                algorithm OBJECT IDENTIFIER,
                parameters ANY DEFINED BY algorithm OPTIONAL }
            >); 
```

加载 .key 文件并进行转储的结果是：

```
$VAR1 = {
          'encryptionAlgorithm' => {
binary data                 'parameters' => binary data¸
                                     'algorithm' => '1.2.840.113549.1.5.13'
                                   },
          'encryptedData' => ' . . . .  binary data . . . .  . '
        }; 
```

我相信**encryptedData**是根据 OID **1.2.840.113549.1.5.13使用 pkcs5 编码的**

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:37:54.070

该`openssl pkcs8 -inform DER -in file.key`命令只是将输入从 DER 转换为 PEM 并将其打印出来。PEM 编码只是二进制 DER 的 base64 编码，添加了 BEGIN 和 END 行。

```
use File::Slurp;
use MIME::Base64;

$der = read_file('file.key');

$pem = "-----BEGIN PRIVATE KEY-----\n"
     . encode_base64($der)
     . "-----END PRIVATE KEY-----\n"

print $pem; 
```

这应该为您提供与 openssl 命令基本相同的输出（除了 MIME::Base64 默认使用 76 个字符的输出行，而标准 PEM 编码使用 64 个字符的行......但我怀疑这对您的目的很重要)

# installation - 尝试执行单节点 Cloud Foundry VCAP 部署时出错

> ID：14389572
> 
> 赞同：1
> 
> 时间：2013-01-17T22:49:19.410
> 
> 标签：installation, cloud-foundry

我正在尝试使用[此处](http://support.cloudfoundry.com/entries/20407923-single-multi-node-vcap-deployment-using-dev-setup)提供的说明将其安装`Cloud Foundry VCAP`为单个节点。我以 root 身份登录。`Ubutnu 10.04.4 VM`

我毫无问题地完成了常见任务，但是当我在单节点部署下尝试选项 2 时，我执行脚本`bin/vcap_dev_setup`时没有得到预期的结果。首先，它不会提示我输入 sudo 密码（也许是因为我以 root 身份登录？）然后它似乎运行良好，直到它到达它尝试下载但无法下载的文件......

```
root@cloudlg187220:~/cloudfoundry/vcap/dev_setup/bin# ./vcap_dev_setup
Hit http://us.archive.ubuntu.com lucid Release.gpg
Ign http://us.archive.ubuntu.com/ubuntu/ lucid/main Translation-en_US                                  
Ign http://us.archive.ubuntu.com/ubuntu/ lucid/restricted Translation-en_US                             
Ign http://us.archive.ubuntu.com/ubuntu/ lucid/universe Translation-en_US                               
Ign http://us.archive.ubuntu.com/ubuntu/ lucid/multiverse Translation-en_US                             
Get:1 http://us.archive.ubuntu.com lucid-updates Release.gpg [198B]                                     
Ign http://us.archive.ubuntu.com/ubuntu/ lucid-updates/main Translation-en_US                               
Ign http://us.archive.ubuntu.com/ubuntu/ lucid-updates/restricted Translation-en_US                     
Ign http://us.archive.ubuntu.com/ubuntu/ lucid-updates/universe Translation-en_US                       
Ign http://us.archive.ubuntu.com/ubuntu/ lucid-updates/multiverse Translation-en_US                     
Hit http://us.archive.ubuntu.com lucid Release                                                          
Get:2 http://us.archive.ubuntu.com lucid-updates Release [58.3kB]                                       
Ign http://ppa.launchpad.net lucid Release.gpg                             
Ign http://ppa.launchpad.net/swift-core/ppa/ubuntu/ lucid/main Translation-en_US
Get:3 http://security.ubuntu.com lucid-security Release.gpg [198B]         
Ign http://security.ubuntu.com/ubuntu/ lucid-security/main Translation-en_US
Ign http://security.ubuntu.com/ubuntu/ lucid-security/restricted Translation-en_US
Ign http://security.ubuntu.com/ubuntu/ lucid-security/universe Translation-en_US
Ign http://security.ubuntu.com/ubuntu/ lucid-security/multiverse Translation-en_US
Ign http://ppa.launchpad.net lucid Release                             
Hit http://us.archive.ubuntu.com lucid/main Packages                 
Hit http://us.archive.ubuntu.com lucid/restricted Packages           
Hit http://us.archive.ubuntu.com lucid/main Sources                  
Hit http://us.archive.ubuntu.com lucid/restricted Sources            
Hit http://us.archive.ubuntu.com lucid/universe Packages             
Hit http://us.archive.ubuntu.com lucid/universe Sources              
Get:4 http://security.ubuntu.com lucid-security Release [57.3kB]     
Hit http://us.archive.ubuntu.com lucid/multiverse Packages                   
Hit http://us.archive.ubuntu.com lucid/multiverse Sources                    
Get:5 http://us.archive.ubuntu.com lucid-updates/main Packages [663kB]       
Ign http://ppa.launchpad.net lucid/main Packages                                    
Ign http://ppa.launchpad.net lucid/main Packages                                    
Err http://ppa.launchpad.net lucid/main Packages              
  404  Not Found
Get:6 http://us.archive.ubuntu.com lucid-updates/restricted Packages [4,624B]
Get:7 http://us.archive.ubuntu.com lucid-updates/main Sources [233kB]
Get:8 http://security.ubuntu.com lucid-security/main Packages [474kB]
Get:9 http://us.archive.ubuntu.com lucid-updates/restricted Sources [2,196B]       
Get:10 http://us.archive.ubuntu.com lucid-updates/universe Packages [317kB]         
Get:11 http://us.archive.ubuntu.com lucid-updates/universe Sources [106kB]          
Get:12 http://us.archive.ubuntu.com lucid-updates/multiverse Packages [11.5kB]      
Get:13 http://us.archive.ubuntu.com lucid-updates/multiverse Sources [5,823B]     
Get:14 http://security.ubuntu.com lucid-security/restricted Packages [2,829B]           
Get:15 http://security.ubuntu.com lucid-security/main Sources [134kB]
Get:16 http://security.ubuntu.com lucid-security/restricted Sources [1,267B]
Get:17 http://security.ubuntu.com lucid-security/universe Packages [168kB]
Get:18 http://security.ubuntu.com lucid-security/universe Sources [43.8kB]
Get:19 http://security.ubuntu.com lucid-security/multiverse Packages [5,343B]
Get:20 http://security.ubuntu.com lucid-security/multiverse Sources [2,337B]
Fetched 2,290kB in 4s (553kB/s)                
W: Failed to fetch http://ppa.launchpad.net/swift-core/ppa/ubuntu/dists/lucid/main/binary-amd64/Packages.gz  404  Not Found

E: Some index files failed to download, they have been ignored, or old ones used instead. 
```

我在网上找到的每个对这个错误的引用都没有答案。有没有人有想法或建议？谢谢你尽你所能的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:24:40.627

您想用来在单个 VM/机器上安装 vcap 的文章如下：

[https://github.com/cloudfoundry/vcap/tree/master/dev_setup](https://github.com/cloudfoundry/vcap/tree/master/dev_setup)

您提供的链接已过期

# erlang - Erlang：两个节点中的一个第一次不ping，从第二个节点ping后，ping开始在两个节点上工作

> ID：14389573
> 
> 赞同：1
> 
> 时间：2013-01-17T22:49:22.953
> 
> 标签：erlang, freebsd, ping

我有两台机器：在局域网上`192.168.0.1`。`192.168.0.2`第一次 ping 到第一个节点时不起作用：

```
192.168.0.2> net_adm:ping('name@192.168.0.1').
pang
192.168.0.1> net_adm:ping('name@192.168.0.2').
pong
192.168.0.2> net_adm:ping('name@192.168.0.1').
pong 
```

但是，在我执行从`192.168.0.1`节点到`192.168.0.2`节点的 ping 之后，会出现 ping。告诉我为什么会这样？

> 没有ipfw。所有机器都有“~/.erlang.cookie”。FreeBSD 9.0
> 
> Erlang R15B03 (erts-5.9.3.1) [source] [64-bit] [smp:8:8] [async-threads:0] [kernel-poll:false]
> 
> erlang-15.b.03.1,3
> 
> Eshell V5.9.3.1

**我决定了问题**并写了文章[http://adw0rd.com/2013/2/11/erlang-epmd-pang/en/](http://adw0rd.com/2013/2/11/erlang-epmd-pang/en/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:28:15.173

很可能是防火墙问题。主机 192.168.0.1 可能已阻止来自 192.168.0.2 的连接请求。

尝试在 Linux 上禁用 192.168.0.1 上的防火墙：

```
iptables -F INPUT
iptables -P INPUT ACCEPT 
```

# javascript - 在另一个元素的鼠标悬停时更改 span 元素的 CSS 类

> ID：14389582
> 
> 赞同：1
> 
> 时间：2013-01-17T22:49:49.630
> 
> 标签：javascript, css, onmouseover, onmouseout

当另一个元素悬停时，我正在尝试更改 span 元素的 css 类。明白我的意思。加载您的 Facebook 并将鼠标悬停在主要新闻源帖子上，右上角会出现小向下箭头。

这就是我想要创造的效果。到目前为止，我有：

```
<li id="unique" class="message"><a href="javascript:void(0)" onMouseOver="(MC.className='messageControls')" onMouseOut="(MC.className='hidden')" onclick="callTheFunction();"></li>

<span id="MC" class="hidden">hksdjhkjsdhfkjhsdkjh</span> 
```

但这不起作用。任何指针？我不想使用任何框架/库，例如 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:52:30.203

您的`on..`事件处理程序不知道`MC`是什么。试试这样：

```
... onMouseOver="document.getElementById('MC').className='messageControls'" ... 
```

这样，您“查找”具有`id`值为 的属性的元素`MC`，然后对该元素进行操作。提醒一下，元素必须具有唯一的 ID。

# ruby-on-rails-3 - Search Ruby on Rails Database for Key Value Pair

> ID：14389585
> 
> 赞同：0
> 
> 时间：2013-01-17T22:50:02.563
> 
> 标签：ruby-on-rails-3, activerecord, associations

Hey all i'm getting hung up on how to search a database for a specific key pair. What i'm doing is sending a combine array of objects that represent data not sent for that user for the day. Here is the basic logic

Unless the database contains the object_id and user_id insert it into the array

The association is many objects to many users.

Is their a way to search the table cases_users so that it is a query like this

unless cases_users.contains? {object_id, user_id} objectarray.push(object_id)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:58:18.003

我想你想要

```
objectarray.push(object_id) unless User.find_by_object_id_and_user_id(object_id, user_id) 
```

# sql - 链接不同类型的产品表

> ID：14389588
> 
> 赞同：1
> 
> 时间：2013-01-17T22:50:16.760
> 
> 标签：sql, database

我有一个问题，我正在设计一个存储不同产品的数据库，每个产品可能有不同的细节。例如，它将需要存储具有多个作者的书籍并存储具有不同类型描述的软件。这是我目前的设计：

```
Product_table

|ID|TYPE|COMPANY|

|1|1|1|

attr_table

|ID|NAME|
|1|ISBN10|
|2|ISBN13|
|3|Title|
|4|Author|

details_table

|ID|attr_id|value

|1|3|Book of adventures|

Connector_table

|id|pro_id|detail_id|
|1|1|1| 
```

所以产品表将只存储主要产品 id、它所属的公司和产品类型。然后我会有一个属性表，其中列出了产品可能具有的每个属性，这将使添加新类型的产品变得更加容易。详细信息表将保存所有值，例如不同的作者，标题是bn10s 等。然后连接器表将连接产品表和详细信息表。

我主要担心的是详细信息表会变得非常大，并且会存储许多不同的数据类型。我想要将所有不同类型的表拆分为 ISBN 表和作者表等表。

如果是这种情况，我如何将这些表链接到 attr_table

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:55:49.613

不要打扰。你不说你用的是什么数据库，但是任何合理的数据库都可以处理明细表。数据库旨在有效地处理大表。

如果它真的很大，您可能需要考虑按某种主题对表进行*分区。*

否则，只需确保您在表中的 id 上有一个索引，也可能在 attr_id 上有一个索引。该结构应该可以正常工作。

# java - While accessing JNI interface why does C requires an extra level of indirection while C++ doesn't?

> ID：14389590
> 
> 赞同：1
> 
> 时间：2013-01-17T22:50:23.700
> 
> 标签：java, c++, c, java-native-interface

In the code [sample](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html#wp186) for accessing via "C", the env pointer is used like:

```
const char *str = (*env)->GetStringUTFChars(env, s, 0); 
```

While for C++, the [sample](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html#wp224) makes the same call:

```
const char *str = env->GetStringUTFChars(s, 0); 
```

The document goes on to say:

> With C++, the extra level of indirection and the interface pointer argument disappear from the source code. However, the underlying mechanism is exactly the same as with C. In C++, JNI functions are defined as inline member functions that expand to their C counterparts.

Does that statement mean that the C++ version would eventually expand to the C version and have the same level of indirection?

I haven't looked at the header files, but I'm puzzled. Can someone explain this difference?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T22:59:36.387

问题中引用的解释解释了它。C++ 支持内联成员函数，但 C 不支持。的 C++ 定义`JNIEnv`包括 C 定义不包含的函数定义。C++ 定义如下所示：

```
char const* JNIEnv::GetStringUTFChars(jstring s, jint i)
{
  return (*this)->GetStringUTFChars(this, s, i);
} 
```

C 版本中调用的函数实际上是一个函数指针。本质上，a`JNIEnv*`是一个 vptr，指向一个带有一堆 JNI 提供的函数指针的结构。为了方便， C++ 中直接提供了额外的定义`JNIEnv`，以避免重复`this`函数调用的参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T22:55:43.207

我还没有检查他们是如何实现它的，但我很有信心它是这样的：

*   在 C++ 中，JNIEnv* 将是方法的“this”，这使得方法也可以使用 env 指针
*   在 C 中，函数（结构中的函数指针指向的）可以使用它的唯一方法是，如果有人将它作为参数传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T00:21:21.157

因此，查看[OpenJDK 源代码](http://hg.openjdk.java.net/jdk7/jdk7-gate/jdk/file/9b8c96f96a0f/src/share/javavm/export/jni.h)，jni.h 在标头中有以下内容：

```
770 /*
771  * We use inlined functions for C++ so that programmers can write:
772  *
773  *    env->FindClass("java/lang/String")
774  *
775  * in C++ rather than:
776  *
777  *    (*env)->FindClass(env, "java/lang/String")
778  *
779  * in C.
780  */
781 
782 struct JNIEnv_ {
783     const struct JNINativeInterface_ *functions;
784 #ifdef __cplusplus
785 
786     jint GetVersion() {
787         return functions->GetVersion(this);
788     } 
```

感谢大家澄清这一点。

# jenkins - Single, Concurrent Job Spanning Multiple Nodes

> ID：14389591
> 
> 赞同：1
> 
> 时间：2013-01-17T22:50:27.677
> 
> 标签：jenkins

Given several nodes available Jenkins nodes (NodeA, NodeB, ...), is there a way to define a job such that it gets 2 nodes?

For example, Job1 gets assigned to NodeA & NodeD.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:40:30.140

要使作业运行两次 - 在节点 A 和节点 D 上，使用 Matrix-build 插件（请注意，配置和监控有点棘手）。

要使作业运行一次 - 在节点 A 或节点 D 上，给这两个节点相同的标签，并限制作业在该标签上运行。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T22:31:34.247

您需要提交两次作业并使用[NodeLabel 参数插件](https://wiki.jenkins-ci.org/display/JENKINS/NodeLabel+Parameter+Plugin)来选择在哪个节点上执行每个作业。要同时提交这两个作业，您可以尝试使用[Build Flow 插件](https://wiki.jenkins-ci.org/display/JENKINS/Build+Flow+Plugin)

你为什么要这样做？您是否正在尝试使用从代理来安装软件？也许你可以考虑使用像[rundeck](http://rundeck.org/)这样的编排工具（它也有一个[Jenkins 插件](https://wiki.jenkins-ci.org/display/JENKINS/RunDeck+Plugin)）

# c++ - 打印 char 时 printf 的奇怪行为 - LLDB 调试器

> ID：14389595
> 
> 赞同：1
> 
> 时间：2013-01-17T22:50:55.523
> 
> 标签：c++, printf, lldb

在为我的 iOS Xcode 项目使用静态 C++ 库时，我遇到了 printf 和 Xcode LLDB 调试器的奇怪行为，有时我的打印结果`printf("%s", char*)`是 char 与数字或垃圾字符连接。所附图像不言自明。任何的想法？

![在此处输入图像描述](../Images/cfc0cc2ac560e3ebea2aaf6705ff58d3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:54:56.150

似乎按预期工作。`%s`需要以 NUL 结尾的字符串，也就是说，对于给定的`char*`，打印任何内容，直到第一个`'\0'`。您必须分配 5 个字节并分配`a[4]=0;`是否希望您的数组适合`%s`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:54:21.753

如果您使用格式说明符打印字符数组，则`a`需要以 a 终止：`'\0'``%s`

```
char * a = new char[5];

a[0] = 'i';
a[1] = 'p';
a[2] = 'o';
a[3] = 'd';
a[4] = '\0';

printf("word: %s\n", a); 
```

# java - Java web service externalization

> ID：14389605
> 
> 赞同：0
> 
> 时间：2013-01-17T22:51:20.580
> 
> 标签：java, externalizing

I am working on a bug for a web service externalization. But I am not sure how to test it. I changed the system locale in windows and also added other languages in IE. But I continue to see the web service in English.

Am I missing something?

# python - 在 RQ 中重试失败的作业

> ID：14389609
> 
> 赞同：11
> 
> 时间：2013-01-17T22:51:31.237
> 
> 标签：python, web-applications, asynchronous, wsgi

我们在 WSGI 应用程序中使用[RQ](http://python-rq.org/)。我们所做的是在运行任务的不同后端服务器中有几个不同的进程，连接到（可能）几个不同的任务服务器。为了更好地配置这个设置，我们在系统中使用了一个自定义管理层，它负责运行工作人员、设置任务队列等。

当作业失败时，我们希望实现重试，在延迟增加后重试作业几次，最终要么完成它，要么让它失败并在我们的日志系统中记录一个错误条目。但是，我不确定应该如何实施。我已经创建了一个自定义工作脚本，它允许我们将错误记录到我们的数据库中，我第一次重试的尝试是这样的：

```
# This handler would ideally wait some time, then requeue the job.
def worker_retry_handler(job, exc_type, exc_value, tb):
    print 'Doing retry handler.'
    current_retry = job.meta[attr.retry] or 2

    if current_retry >= 129600:
        log_error_message('Job catastrophic failure.', ...)
    else:
        current_retry *= 2

        log_retry_notification(current_retry)
        job.meta[attr.retry] = current_retry
        job.save()
        time.sleep(current_retry)

        job.perform()

return False 
```

正如我所提到的，我们在工作文件中也有一个函数，它可以正确解析它应该连接的服务器，并可以发布作业。问题不一定是*如何*发布作业，而是*如何*处理您在异常处理程序中获得的作业实例。

任何帮助将不胜感激。如果有关于更好的方法的建议或指示，这也很好。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:11:02.780

我看到两个可能的问题：

1.  你应该有一个返回值。False 可防止作业发生默认异常处理（请参阅本页最后一部分：http: [//python-rq.org/docs/exceptions/](http://python-rq.org/docs/exceptions/)）

2.  我认为当您的处理程序被调用时，该作业不再排队。我不是 100% 肯定的（特别是考虑到我上面提到的文档），但如果它在失败的队列中，你可以调用 requeue_job(job.id) 重试它。如果不是（听起来好像不是），您可能可以获取正确的队列并直接加入队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-23T16:06:34.063

**强文本**我有一个更漂亮的解决方案

```
from rq import Queue, Worker
from redis import Redis

redis_conn = Redis(host=REDIS_HOST, health_check_interval=30)
queues = [
    Queue(queue_name, connection=redis_conn, result_ttl=0) 
    for queue_name in ["Low", "Fast"]
]
worker = Worker(queues, connection=redis, exception_handlers=[retry_handler])

def retry_handler(job, exc_type, exception, traceback):
    if isinstance(exception, RetryException):
        sleep(RetryException.sleep_time)
        job.requeue()
        return False 
```

处理程序本身负责决定异常处理是否完成，或者是否应该落入堆栈中的下一个处理程序。处理程序可以通过返回一个布尔值来表明这一点。**False**表示停止处理异常，**True**表示继续并下降到堆栈上的下一个异常处理程序。

重要的是要知道，默认情况下，当处理程序没有明确的返回值（因此**None**）时，这将被解释为**True**（即继续下一个处理程序）。

要防止处理程序链中的下一个异常处理程序执行，请使用不会失败的自定义异常处理程序，例如：

# language-agnostic - 绘制矢量（使用点、角度和长度进行分段）

> ID：14389614
> 
> 赞同：0
> 
> 时间：2013-01-17T22:51:42.407
> 
> 标签：language-agnostic, trigonometry

我正在尝试绘制一条线段，但只知道线的原点、角度和长度。我已经有了一些工作，但它没有以正确的角度显示线条，而是大约 105 度（我的三角很可怕）。伪代码：

```
Vector2 pos1 = new Vector2(10, 10);
double ang = 270;
double len = 20;
double adj = cos(ang) * len;
double opp = sqrt(len * len - adj * adj);
Vector2 pos2 = new Vector2(pos1.x + adj, pos1.y + opp);

drawLine(pos1, pos2); 
```

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:55:27.773

大多数编程语言都会以弧度而不是度数进行触发。使用前转换角度。

# javascript - JavaScript 字符串问题

> ID：14389622
> 
> 赞同：0
> 
> 时间：2013-01-17T22:52:10.433
> 
> 标签：javascript, jquery, string, where-clause

我有一组复选框，选中后，应填充地图上的关联点。

这很好用：

```
var type_column = "FastFood";
var searchType = type_column + " IN (-1,";
if ( $("#divType1").is(':checked')) searchType += "1,";
if ( $("#divType2").is(':checked')) searchType += "2,";
if ( $("#divType3").is(':checked')) searchType += "3,";
if ( $("#divType4").is(':checked')) searchType += "4,";
whereClause += " AND " + searchType.slice(0, searchType.length - 1) + ")"; 
```

但这不会：

```
var type_column = "FastFood";
var searchType = type_column + " IN (-1,";
if ( $("#divType1").is(':checked')) searchType += "Arbys,";
if ( $("#divType2").is(':checked')) searchType += "Burgerking,";
if ( $("#divType3").is(':checked')) searchType += "Checkers,";
if ( $("#divType4").is(':checked')) searchType += "Dairyqueen,";
whereClause += " AND " + searchType.slice(0, searchType.length - 1) + ")"; 
```

将“Arbys”更改为“a”（等等）也不起作用，所以这与字符数无关。我还尝试在不包含逗号的字符串周围加上一组单引号。（遗憾的是，由于其他不相关的原因，仅使用数字并不是一种选择。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:02:27.063

您可能想使用`substring`而不是`slice`. `slice`适用于数组，不适用于字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:04:48.157

总之，您的解决方案非常老套。**您应该不在**客户端构建查询。除此之外，以下代码可能是您*更好*的解决方案：

```
var type_column = "FastFood";
var whereClause = [];
if ( $("#divType1").is(':checked')) whereClause.push("Arbys");
if ( $("#divType2").is(':checked')) whereClause.push("Burgerking");
if ( $("#divType3").is(':checked')) whereClause.push("Checkers");
if ( $("#divType4").is(':checked')) whereClause.push("Dairyqueen");

whereClause += " AND " + type_column + " IN ('" + whereClause.join('\',\'') + "')"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T23:06:27.563

您可能希望将搜索字符串添加到数组中。这样你就不必担心有一个像“Arbys”这样的字符串，末尾有一个逗号，然后去掉最后一个字符，而是可以使用逗号作为分隔符加入数组：

```
var type_column = "FastFood";
var searchType = type_column + " IN (-1,";
var search_array = [];
if ( $("#divType1").is(':checked')) searchArray.push("Arbys");
if ( $("#divType2").is(':checked')) searchArray.push("Burgerking");
if ( $("#divType3").is(':checked')) searchArray.push("Checkers");
if ( $("#divType4").is(':checked')) searchArray.push("Dairyqueen");
whereClause += " AND " + searchType + searchArray.join(',') + ")"; 
```

# objective-c - 关闭视图控制器动画后的 EXC_BAD_ACCESS：完成：

> ID：14389624
> 
> 赞同：1
> 
> 时间：2013-01-17T22:52:16.647
> 
> 标签：objective-c, ipad, uiviewcontroller, uitableview

我正在努力找出我的代码出了什么问题。我正在尝试使用委托解除 UITableViewController 但获得 EXC_BAD_ACCESS。

UITableViewController 从我的应用程序的根视图控制器被调用（模态segue）。当 rootViewController 尝试关闭 UITableViewController 时，一切似乎都很好，因为显示了 rootViewController 视图，但在一毫秒后出现错误。

```
- (void) dismissFormAViewController: (FormAViewController*) vc{

[vc dismissViewControllerAnimated:YES completion:^{
    NSLog(@"complete.");
}]; 
```

}

*   我可以在控制台上看到字符串 Complete。

![在此处输入图像描述](../Images/85c73e01314bae2f5f4fdd4de6bd65e8.png)

![在此处输入图像描述](../Images/067f880e4a853d36e6573825071a9029.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:02:39.700

通常这意味着您正在访问一些不再是有效对象的内存，以调试在您的运行方案中打开[僵尸](http://cocoadev.com/wiki/NSZombie)，这将至少为您提供正在访问的类......
然后如果它不明显，您可以使用[malloc 日志记录](http://www.friday.com/bbum/2010/01/10/using-malloc-to-debug-memory-misuse-in-cocoa/)回溯

# java - 使用自定义字体绘制字符串会绘制各种破折号

> ID：14389629
> 
> 赞同：3
> 
> 时间：2013-01-17T22:52:30.893
> 
> 标签：java, swing, fonts, awt

我正在尝试使用 TTF 将自定义字体添加到我的 Java 程序中，但无论出于何种原因，我的字符串都被简单地绘制为各种破折号，偶尔还有点。例如，如果我使用此代码来定义我的字体：

```
font = Font.createFont(Font.TRUETYPE_FONT, 
         ac.class.getResourceAsStream("/fonts/verdana.TTF")); 
```

然后主菜单如下所示：

![](../Images/82cd05701618b70d4d9b0653c4fee1fa.png)

而不是这样：

![](../Images/5c97581d45b77cc0656a9ddc806611e6.png)

注意：我正在使用代码

```
Font font = new Font("Verdana", Font.BOLD, 30); 
```

在第二个屏幕截图中定义字体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T01:48:41.753

使用方法[derivedFont](http://docs.oracle.com/javase/7/docs/api/java/awt/Font.html#deriveFont%28float%29)来调整你刚刚加载的字体：

```
font = Font.createFont(Font.TRUETYPE_FONT, 
     ac.class.getResourceAsStream("/fonts/verdana.TTF")).deriveFont(30f); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T01:49:55.310

[API规范](http://docs.oracle.com/javase/7/docs/api/java/awt/Font.html#createFont(int%2C%20java.io.InputStream))说：

> `Font`使用指定的字体类型和输入数据返回一个新的。新`Font`创建的***点大小为 1***，样式为 PLAIN。然后可以将此基本字体与`deriveFont`此类中的方法一起使用，以派生具有不同大小、样式、转换和字体特征的新 Font 对象。此方法不会关闭`InputStream`.
> 
> 为了使构造函数`Font`可用，`Font`返回的`Font`必须`GraphicsEnviroment`通过调用注册`registerFont(Font)`。

# css - 如何正确清除浮动

> ID：14389637
> 
> 赞同：0
> 
> 时间：2013-01-17T22:53:01.007
> 
> 标签：css

Css noob 这里需要一些建议。

我有一个有时并排有 2 个 div 的表单（其中包含输入/标签/验证器）。在此之后的任何其他 div 格式都不正确，即使使用 clearfix 也是如此。

```
[div] [div]
--> clear div goes here
[   div   ] 
```

我已经用另一个带有 css {clear:both;} 的 Div 修复了它，但这是多余的。更重要的是，我发现 IE 需要在清晰的 div 上设置一个高度来尊重较低 div 上的任何边距。

有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:09:21.977

如果不看代码，很难确切地看到你遇到了什么问题，但希望这会有所帮助。

```
<div class="one" style="float: left;"> This div is floated left </div>

<div class="example1" style="clear: left;">this is text in example 1</div> <!-- notice clear left means this dive will appear after the float, no matter how much stuff is in the float --> 
```

如果第一类向左浮动，则示例 1 将出现在它旁边，但在这种情况下，您清除了左侧的浮动（即第一类），因此示例 1 出现在您的浮动对象下方。

# javascript - 如果 ID 部分匹配，则选择一个元素

> ID：14389648
> 
> 赞同：0
> 
> 时间：2013-01-17T22:53:58.077
> 
> 标签：javascript, jquery

我有以下 HTML：

```
<header>
  <nav>
    <ul>
        <li id="menu-item-1"><a href="javascript:void(0)">Lien 1</a></li>
        <li id="menu-item-2"><a href="javascript:void(0)">Lien 2</a></li>
        <li id="menu-item-3"><a href="javascript:void(0)">Lien 3</a></li>
    </ul>
  </nav>
</header>

<article id="content">
  <div id="post-1" class="page">
    <p>content post 1</p>
  </div>
  <div id="post-2" class="page">
    <p>content post 2</p>
  </div>
  <div id="post-3" class="page">
    <p>content post 3</p>
  </div>
</article> 
```

想法如下：如果**menu-item-之后的数字与****post-**之后的数字匹配，则执行某些操作。

我怎么做？

最终目标是当我点击相应的菜单链接时显示每个 div

```
menu-item-1 -> display post-1
menu-item-2 -> display post-2
menu-item-3 -> display post-3 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:56:37.677

```
$('nav li').click(function() {
   // Optional: hide other posts 
   $('.page').hide();

   // Show the correct post
   var id = this.id.replace('menu-item-', '');
   $('#post-' + id).show();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T22:57:56.597

```
$('nav').on('click', 'li', function(e) {
    $('#post-' + this.id.replace('menu-item-', '')).show().siblings().hide();
}); 
```

演示：http: [//jsfiddle.net/fKgdL/1](http://jsfiddle.net/fKgdL/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T22:57:33.853

你可以这样做：

```
$('a').click(function(){
    $id = $(this).closest('li').prop('id'); // Get the id
    $("#post-"+id.split("-")[2]).show();     // show the post
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T22:59:34.793

```
$('nav li').click(function() {
   var id = this.value.split('-')[1];
   var ele = $('#post-' + id);
   ele.show();
   $('.page').not(ele).hide();   
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T23:08:45.897

```
$('li').click(function(){

  var pID= $(this).attr('id').split('-')[2];
  $('#content').find('div').each(function(){

    if(pID==$(this).attr('id').split('-')[1]){

      //DO SOMETHING HERE...
    }
  });
}); 
```

# java - Apache Tika：解析 visio 文件 (.vsd)

> ID：14389649
> 
> 赞同：0
> 
> 时间：2013-01-17T22:53:59.493
> 
> 标签：java, apache, visio, apache-tika

我目前正在用 Java 编写一个程序来从多种文档类型中提取元数据。目前我正在尝试使用 Apache Tika 从 .vsd 文件中提取元数据。我之前尝试过直接使用 Apache POI，但事实上很难找到关于库中这个未使用部分的任何文档，所以我决定使用 Tika。

好的，这是我崩溃的代码示例（在第 7 行崩溃）：

```
 ParseContext context = new ParseContext();
        Metadata metadata = new Metadata();
        WriteOutContentHandler handler = new WriteOutContentHandler(10 * 1024 * 1024);
try {
            FileInputStream fis = new FileInputStream(fileName);
            OfficeParser officeParser = new OfficeParser();
            officeParser.parse(fis, handler, metadata, context);
            String[] metadataNames = metadata.names();

            // Display all metadata
            for (String name : metadataNames) {
                System.out.println(name + ": " + metadata.get(name));
            }
        } catch (FileNotFoundException E) {
            System.out.println("No such files : " + fileName);
        } 
```

这是堆栈跟踪：

> 线程“main”中的异常 java.lang.RuntimeException: TODO at org.apache.poi.hdgf.HDGFDiagram.(HDGFDiagram.java: 99) 在 org.apache.tika.parser.microsoft.OfficeParser.parse(OfficeParser.java:200) 在 org.apache.tika 的 org.apache.poi.hdgf.extractor.VisioTextExtractor.(VisioTextExtractor.java:55)。 parser.microsoft.OfficeParser.parse(OfficeParser.java:161) 在 VsdFile.displayMetadata(VsdFile.java:43) 在 main.main(main.java:26) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun .reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)

我对 Java 很生疏，所以我希望我的问题不是太明显而无法回答。

谢谢你。

问候，

布卢尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T04:40:19.293

所以问题是一个坏的 vsd 文件。

# javascript - 将 div 和值从一个页面传递到另一个页面

> ID：14389652
> 
> 赞同：0
> 
> 时间：2013-01-17T22:54:22.233
> 
> 标签：javascript

我已经为循环生成的每个 div 分配了用户名的 id。这可以。每个 div/button 都有用户名作为它的标识。但是，使用此处的示例[Load content of a div on another page](https://stackoverflow.com/questions/4101770/load-content-of-a-div-on-another-page)和在其他帖子中，我试图将该 div 及其内容发送到另一个页面，并与它一起传递名称值。尽管警报正在提醒名称，但我的尝试不起作用。我是否正确传递了价值？如何在下一页重新创建 div？最后，这甚至是正确的方法吗，因为最终我想给这个人附加一张桌子。够啰嗦吗？

```
 identity = results.rows.item(i).username;
        userDiv.id = identity;
        console.log(identity);
        (function (identity) {
            userDiv.addEventListener("click",

            function () {
                window.open("whatever.html");
                $('#singleUser').load('index.html #userDiv');
                //var singleUser = document.getElementById("singleUser");
                //singleUser.appendChild(userDiv);
                alert(identity);
                console.log(identity);
            }, false);
        })(identity); 
```

# java - 将字符串转换为浮点 java 时出错

> ID：14389655
> 
> 赞同：-1
> 
> 时间：2013-01-17T22:54:52.180
> 
> 标签：java, servlets, floating-point

```
String initial_price = request.getParameter("initial_price");
    float initial_price_float = 0;
    try {
        initial_price_float = Float.parseFloat(initial_price);
    } catch (NumberFormatException e) {
                session.setAttribute("message", "Wrong input");
    } 
```

上面写的代码给了我这个错误，但我很确定我写的数字是正确的。我该如何解决？

```
java.lang.NullPointerException
sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1008)
java.lang.Float.parseFloat(Float.java:452)
servlet.AddProduct.doPost(AddProduct.java:114)
javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:57:29.117

不要将`null`字符串传递到`parseFloat`.

Per`parseFloat`的[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html#parseFloat%28java.lang.String%29)：

```
@throws NullPointerException  if the string is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:57:38.037

根据[FloatingDecimal.readJavaFormatString(..)](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/misc/FloatingDecimal.java)代码：

`in = in.trim();`// 不要在空白处胡闹。`null` // 如果确保输入不是，则抛出 NullPointerException `null`。

# jquery - 在兄弟之后移动元素

> ID：14389664
> 
> 赞同：3
> 
> 时间：2013-01-17T22:55:21.477
> 
> 标签：jquery, dom, element, siblings

我有数百个

```
<div class="post"> 
```

彼此相邻。

新元素通过 AJAX 更新并放在现有元素之上。

现在有一个特殊的

```
<div id="ad1"> 
```

我想一直保持在第 n 位。

所以我做了这个功能：

```
$(".post").each(function() {
    if(cnt>2){
        $('#ad1').after(this);
    }
    cnt++;
}); 
```

它几乎可以工作，但是，#ad1 之后移动的元素顺序相反，因为循环从 1 到 n，但元素总是直接附加在 #ad1 之后。

非常欢迎任何意见。

谢谢拉斐尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T22:58:01.810

跳过循环。只需一行代码（在顶部添加任何新元素后运行它）：

```
$('.post').eq(n).before($('#ad1')); // don't forget .eq is zero-based 
```

[http://jsfiddle.net/mblase75/MD4b2/2/](http://jsfiddle.net/mblase75/MD4b2/2/)

或者将其余部分移到广告下方：

```
$('.post').eq(n-1).nextUntil('#ad1').insertAfter($('#ad1')); 
```

[http://jsfiddle.net/mblase75/MD4b2/](http://jsfiddle.net/mblase75/MD4b2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:03:24.803

你也可以在这里使用 nth-child：

```
$("div.post:nth-child("+n+")").before($('#ad1')); 
```

# python - 通过管道将电子邮件发送到 python 脚本

> ID：14389667
> 
> 赞同：2
> 
> 时间：2013-01-17T22:55:32.530
> 
> 标签：python, email, pipe, cpanel

我已经在我的 CPanel 内部设置了将所有发送到 x@x.com 的电子邮件通过管道传输到我的 python 脚本中。我将如何将任何附件保存到服务器上的特定目录中，并可能查看电子邮件本身的主题/消息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T23:03:51.307

您可以使用该[`email`](http://docs.python.org/2/library/email.html#module-email)包来处理 MIME 格式的电子邮件。用于[`email.parser.FeedParser`](http://docs.python.org/2/library/email.parser.html#feedparser-api)解析消息并取回一个[`email.message.Message`](http://docs.python.org/2/library/email.message.html)对象：

*   把它当作字典来获取像`Subject`.
*   用于`is_multipart()`检查它是否是多部分的，因此可能有附件（或者它可能只是纯文本 + HTML 消息）。
*   使用该`walk()`方法递归遍历所有多部分子消息。以`Content-Disposition`标题开头的子消息`attachment`是附件，您可以使用`get_payload()`.

# iphone - 依次异步调用MFMailComposeViewController

> ID：14389668
> 
> 赞同：1
> 
> 时间：2013-01-17T22:55:38.113
> 
> 标签：iphone, ios, ipad

我必须循环调用 MFMailComposeViewController 3 次，例如

```
for (int i=0; i<4; i++ {
   [self presentMyMFMailComposeViewController];
} 
```

问题在于，呈现 MFMailComposeViewController 本身就是一个异步任务，一旦循环第一次调用控制器，它就不会等待电子邮件发送，而是第二次调用，然后第三次调用。

如何让它等待电子邮件发送？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:58:46.147

需要实现MFMailComposeViewControllerDelegate，具体如下方法

```
– mailComposeController:didFinishWithResult:error: 
```

当邮件视图控制器完成时调用此方法，从这里您可以呈现一个新的邮件视图控制器。数一数你用实例变量等显示了多少。

在您的 presentMyMFMailComposeViewController 方法中，您按如下方式设置委托。

```
MFMailComposeViewController *myMailViewController = ...
myMailViewController.delegate = self; 
```

# vb.net - 在 .NET 中调用 SmtpClient.Dispose() 是否安全？

> ID：14389673
> 
> 赞同：2
> 
> 时间：2013-01-17T22:56:11.750
> 
> 标签：vb.net, email, smtp

我有一个场景，我需要一次发送 100 封电子邮件（使用循环），但我也不允许每个 SMTP 会话发送 1 封电子邮件。

现在所有 100 封电子邮件都共享同一个 SMTP 会话。

我在想调用 SmtpClient.Dispose() 会照顾我需要的东西。如果我错了，请纠正我。

所以，基本上3个问题：

1.  **SmtpClient.Dispose() 会照顾我需要的东西吗？**
2.  **如果是，在不影响服务器上其他服务的情况下 Dispose() SmtpClient 是否安全？**
3.  **如果否，实现我想要的正确方法是什么？**

**示例代码：**

```
Private Shared Sub SendMail(ByVal MailServer As SmtpClient, ByVal body As String, ByVal Subject As String, ByVal FromEmail As String, _
                               ByVal ToEmailList As String, Optional ByVal AttFile As Attachment = Nothing)

    Dim message As New MailMessage

    Try
        message.From = New MailAddress(FromEmail)

        message.Subject = Subject
        message.IsBodyHtml = False
        message.Body = body
        message.Priority = MailPriority.High

        If Not AttFile Is Nothing Then
            message.Attachments.Add(AttFile)
        Else
            message.Attachments.Add(AttFile)
        End If

        MailServer.Send(message)
    Catch ex As Exception
        Throw New ApplicationException("SERVICE1.SendMail ERROR -- Error sending email [ERROR]:[" & ex.Message.ToString & "] " & vbCrLf & "To:" & ToEmailList & vbCrLf & "From:" & FromEmail & vbCrLf & "Subject: " & Subject & vbCrLf & "Body: " & body)
    End Try
    message.Dispose()
End Sub 
```

这就是该方法的执行方式：

```
 For Each Item In ItemListCollection
 m_MailServer = New SmtpClient(MailServerName)
 MailServer.Credentials = New System.Net.NetworkCredential(MailServerUserName, MailServerPassword)
 SendMail(WeeklyMailServer, msgBody, msgSubject, MsgFromEmail, "xyz@abc.com", rptAttachment)
 Next 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:01:54.233

您可以将其包装在 using 语句中，并确保在执行离开块时将其处理掉。您可以使用同一个 SmtpClient 在一个循环中多次调用 Send。

```
Using client = New SmtpClient()

    For i As Integer = 0 To 99
        Dim message = New MailMessage()
        'initialization of whatever is needed
        ' message creation

        client.Send(message)

    Next
End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T23:47:15.803

在执行循环内部，您可以将代码包含在一个`Using`块中。这将为每封电子邮件使用单独`smtpclient`的电子邮件，并正确处理/关闭它。

```
 For Each Item In ItemListCollection
   using m_MailServer as New SmtpClient(MailServerName)
     MailServer.Credentials = New System.Net.NetworkCredential(MailServerUserName, MailServerPassword)
     SendMail(WeeklyMailServer, msgBody, msgSubject, MsgFromEmail, "xyz@abc.com", rptAttachment)
   end using
   Next 
```

# java - Android - 使用方法设置字符串变量

> ID：14389674
> 
> 赞同：0
> 
> 时间：2013-01-17T22:56:11.690
> 
> 标签：java, android

我是 Android 开发和这些论坛的新手，如果您能提供帮助，我将不胜感激。我环顾四周并尝试了其他一些答案，但无处可去。

我编写了一个从 ArrayList 返回随机字符串的 Java 方法。我在主活动布局 XML 上有三个 TextView 元素，我想在按下按钮时设置它们（运行该方法以生成三个随机字符串）。

我该怎么做，每当我在手机上运行该应用程序时，它就会崩溃，所以显然存在一个重大缺陷。

这是我正在调用的方法

```
public void generateExercises() {

    Exercise e1 = new Exercise();
    Exercise e2 = new Exercise();
    Exercise e3 = new Exercise();

    e1.generateExercise();
    e2.generateExercise();
    e3.generateExercise();

    RelativeLayout lView = new RelativeLayout(this);

    myText1 = (TextView)findViewById(R.id.myText1);
    myText1.setText(e1.getName());

    myText2 = (TextView)findViewById(R.id.myText2);
    myText2.setText(e2.getName());

    myText3 = (TextView)findViewById(R.id.myText3);
    myText3.setText(e3.getName());

    lView.addView(myText1);
    lView.addView(myText2);
    lView.addView(myText3);     

    setContentView(lView);
}
//XML File

<TextView
    android:id="@+id/myText2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/exercise2title"
    android:layout_alignBottom="@+id/exercise2title"
    android:layout_alignLeft="@+id/textView1"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/myText3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/exercise3title"
    android:layout_alignBottom="@+id/exercise3title"
    android:layout_alignLeft="@+id/TextView01"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/exercise1title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/title"
    android:layout_marginLeft="39dp"
    android:layout_marginTop="64dp"
    android:text="@string/exercisetitle_one"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

谢谢

编辑：错过了带有“myText1”的 XML 部分

```
 <TextView
    android:id="@+id/myText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/exercise1title"
    android:layout_alignBottom="@+id/exercise1title"
    android:layout_alignRight="@+id/title"
    android:layout_marginRight="24dp"
    android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

编辑：感谢您的所有帮助，代码现在按预期工作。我还必须用自定义的 onClick 侦听器替换 XML onclick 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:00:57.937

我猜你需要在将文本添加到 TextView 之前将其设置为 Contentview。您尝试将文本添加到尚未创建的 TextView 中。

只需在向其添加文本之前尝试设置 contentView。如果我知道正确，您不需要将 TextViews 添加到 lView，因为您实际上是在 XML 文件中完成的。您实际上确实在 XML 中定义了布局，因此您不需要再次在代码中创建它。只需在 XML 中创建布局并像现在一样填充它。

```
public void generateExercises() {

Exercise e1 = new Exercise();
Exercise e2 = new Exercise();
Exercise e3 = new Exercise();

e1.generateExercise();
e2.generateExercise();
e3.generateExercise();

setContentView(R.layout.*****); //putyour layoutname here
myText1 = (TextView)findViewById(R.id.myText1);
myText1.setText(e1.getName());

myText2 = (TextView)findViewById(R.id.myText2);
myText2.setText(e2.getName());

myText3 = (TextView)findViewById(R.id.myText3);
myText3.setText(e3.getName());
} 
```

这应该做你想做的事

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:06:11.417

```
public void generateExercises() {
   setContentView(R.layout.xml_file_name);

    Exercise e1 = new Exercise();
    Exercise e2 = new Exercise();
    Exercise e3 = new Exercise();

    e1.generateExercise();
    e2.generateExercise();
    e3.generateExercise();

    myText1 = (TextView)findViewById(R.id.myText1);
    myText1.setText(e1.getName());

    myText2 = (TextView)findViewById(R.id.myText2);
    myText2.setText(e2.getName());

    myText3 = (TextView)findViewById(R.id.myText3);
    myText3.setText(e3.getName());

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T23:06:29.873

从您的 onCreate 方法调用 setContentView(lView)。

之后，您可以获取/设置您的 textViews：

```
myText1 = (TextView)findViewById(R.id.myText1);
myText1.setText(e1.getName()); 
```

您不需要使用 addView，因为视图已经存在于 lView 中（您已经在 xml 中设置了它们）。

所以基本上，

将 contentView 设置为 lView 将采用您的 xml 布局并使用所有视图创建它。之后，您找到 textview ，`myText1 = (TextView)findViewById(R.id.myText1);`然后设置文本`myText1.setText(e1.getName());`

查看 logcat 输出以了解发生了什么问题，并尝试 eclipse 的“调试”功能，在“nullPointerException”上设置断点也很有用。在此处发布 logcat 输出可以使我们找出问题所在的速度提高 100 倍！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T23:11:51.067

XML 中的 myText1 在哪里？

```
myText1 = (TextView)findViewById(R.id.myText1);
myText1.setText(e1.getName()); //NPE here? 
```

# php - cURL API Extremely Slow

> ID：14389677
> 
> 赞同：0
> 
> 时间：2013-01-17T22:56:21.000
> 
> 标签：php, mysql, performance, api, curl

I have created many websites that get all there data from a API. (located on the same server on most cases).

The websites are operation really slow, of all the curl requests.

I first thought it was our mysql server (sepparate server) but now we implemented caching it's still slow.

Is there a good way to find out why it takes so long to do the curl requests. And what would be a good way to go?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:06:01.777

可以使用浏览器休息客户端指向您的 API 并使用分析工具 (xdebug/xhprof) 来查找瓶颈的来源。可能确保 api 调用在本地解析，并且在回来之前不要一直到互联网（但可能不会节省太多时间）。建议从 API 代码开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:22:05.763

问题不在于 cURL 请求。

# php - 字符串中的数字或字符

> ID：14389679
> 
> 赞同：0
> 
> 时间：2013-01-17T22:56:37.137
> 
> 标签：php

我正在尝试输入并验证输入是城镇还是英国邮政编码。如果是城镇（所有字母），则通过 if，如果是邮政编码，我需要去掉最后两个字符。

这适用于邮政编码：

```
if (preg_match('/[^0-9]+$/',$keyword)) {
    //SEE IF LAST 2 CHARS ARE LETTERS
    $last3chars = substr($keyword, -2);
    if (!preg_match('/[^A-Za-z]/', $last3chars)) {
        $keyword = substr($keyword,0,-2);
    }
} 
```

这适用于城镇：

```
if(preg_match('/[^0-9A-Za-z]+$/',$keyword)) {
    //SEE IF LAST 2 CHARS ARE LETTERS
    $last3chars = substr($keyword, -2);
    if (!preg_match('/[^A-Za-z]/', $last3chars)) {
        $keyword = substr($keyword,0,-2);
    }
} 
```

但我不能让它为两者都做。任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:06:38.843

考虑使用

```
is_int(substr($keyword, -2)) 
```

检查邮政编码

# spring-mvc - 具有相同参数的 @RequestBody 和 @ModelAttribute 的 Spring 控制器

> ID：14389683
> 
> 赞同：0
> 
> 时间：2013-01-17T22:56:48.197
> 
> 标签：spring-mvc, rest-client

我想创建一个控制器方法，可以从 html 表单或使用 resttemplate 的独立客户端调用。

该方法具有以下签名：

```
@RequestMapping(method = RequestMethod.POST)
public ModelAndView save(@RequestBody @ModelAttribute(value = "itemCreateRequest")
    ItemCreateRequest request, Model model) throws NoSuchMethodException,
    SecurityException, InstantiationException, IllegalAccessException,
    IllegalArgumentException, InvocationTargetException {
...
} 
```

问题是，如果我使用 HTML 表单，一切正常，但是当我尝试使用独立客户端时，请求参数中的值为空。

```
ItemCreateRequest icr = new ItemCreateRequest();
icr.setItem(new ItemDTO(null, "23", "bla", "bla bla"));
restTemplate.postForLocation("http://localhost:8080/ims_ui/items.xml", icr); 
```

**如果我尝试没有 @ModelAttribute 的方法，则独立客户端可以工作，但 HTML 表单不能。**

这是我的 servlet-context.xml 的配置

```
 <beans:bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping"/>
  <beans:bean id="handlerAdapter" class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter">
        <beans:property name="messageConverters">
            <beans:list>
                <beans:bean class="org.springframework.http.converter.xml.MarshallingHttpMessageConverter">
                    <beans:property name="marshaller" ref="marshaller"/>
                    <beans:property name="unmarshaller" ref="marshaller"/>
                </beans:bean>
                <beans:bean class="org.springframework.http.converter.StringHttpMessageConverter"/>
                <beans:bean class="org.springframework.http.converter.FormHttpMessageConverter"/>
            </beans:list>
        </beans:property>
    </beans:bean>

  <beans:bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <beans:property name="order" value="0" />
    <beans:property name="mediaTypes">
      <beans:map>
        <beans:entry key="jsp" value="application/html" />
        <beans:entry key="xml" value="application/xml" />
      </beans:map>
    </beans:property>

    <beans:property name="defaultViews">
      <beans:list>
        <!-- XML View -->
        <beans:bean class="org.springframework.web.servlet.view.xml.MarshallingView">
          <beans:constructor-arg ref="marshaller" />
        </beans:bean>
      </beans:list>
    </beans:property>
  </beans:bean>

  <beans:bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <beans:property name="contextPaths">
            <beans:array>
                <beans:value>net.franciscovillegas.summa.ims.dto</beans:value>
                <beans:value>net.franciscovillegas.summa.ims.service.requests</beans:value>
            </beans:array>
        </beans:property>
  </beans:bean> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:46:55.347

答案在你的帖子中：

> 如果我尝试没有 @ModelAttribute 的方法，则独立客户端可以工作，但 HTML 表单不能。

我认为，当您使用**html 应用程序**时，您使用地图向服务器发送请求，其中所有键都以**itemCreateRequest.VARIABLE_NAME 开头**，但是当您使用独立应用程序时，您发送的请求没有声明的 @ModelAttribute。

声明的 ModelAttribute，在您的情况下为“ **itemCreateRequest** ”，应该位于发送到该控制器的每个信息的前面。

你可以尝试这样的事情：

```
restTemplate.postForLocation("http://localhost:8080/ims_ui/items.xml", new HashMap<String, Object>(){
            {
                put("itemCreateRequest", icr);
            }
        }); 
```

# linux - 在 bash 中执行“[]”会给出一个奇怪的错误消息。为什么？

> ID：14389684
> 
> 赞同：1
> 
> 时间：2013-01-17T22:56:52.890
> 
> 标签：linux, bash, shell, unix

一个普通的命令未找到错误说：

`bash: sadfasdf: command not found...`

但是，如果`[]`在 bash 中执行，它会给出两条错误消息，而不是一条：

`bash: []: command not found... Failed to search for file: GDBus.Error:org.gtk.GDBus.UnmappedGError.Quark._pk_5ftransaction_5ferror.Code14: Invalid input passed to daemon: char '[' in text!`

第二条错误消息是什么意思，是如何`[]`导致错误发生的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:48:13.937

您似乎在 PackageKit 邮件列表中遇到[了同样的问题。](http://markmail.org/thread/wje6bqhdntmcr6we#query%3a+page:1+mid%3apc2car2eu4przycx+state%3aresults)如果您使用的是 PackageKit，那可能是您的问题。

更一般地说，您应该检查似乎通过 BASH`command_not_found_handle`函数运行的任何内容。

来自`man bash`：

> "如果搜索不成功，shell 会搜索一个已定义的名为 command_not_found_handle 的 shell 函数。如果该函数存在，则以原始命令和原始命令的参数作为其参数调用它，函数的退出状态变为贝壳。”

简单地说，它是一个在 BASH 找不到您输入的命令时调用的函数。

似乎某些东西正在定义该功能，并且不喜欢方括号！

`grep`在你`/etc/profile`和 bash 配置文件周围，它会在某个地方:)

# javascript - 原生 JavaScript 中的 $(window).scroll

> ID：14389687
> 
> 赞同：44
> 
> 时间：2013-01-17T22:56:58.037
> 
> 标签：javascript, scroll, requestanimationframe

1.  普通JS中的以下内容是什么？

    `$(window).scroll(function() { });`

2.  我也在寻找动画滚动，例如：

    `$('html, body').animate({scrollTop:1750}, 'slow');`

我应该使用`requestAnimationFrame`吗？

[http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

是否有任何示例在单击时触发动画而不是连续渲染？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-17T23:10:43.380

## 问题 1

```
window.onscroll = function() {
    console.log('scrolling');
}; 
```

或者如果您的[目标浏览器支持](http://caniuse.com/#feat=addeventlistener) `addEventListener`：

```
window.addEventListener('scroll', function() {
        console.log('scrolling');
}); 
```

## 问题2

在我看来，如果您只是从页面的一个部分滚动到另一个部分，并且没有某种持续运行的滚动运动，那么不使用 requestAnimationFrame 就可以了。

您可以在纯 javascript 中找到滚动到窗口特定部分的良好实现，我建议您查看它们的源代码（甚至使用它们）。

# c++ - C++：在 Xcode 中创建相当于 Arduino 'byte' 的方法

> ID：14389690
> 
> 赞同：2
> 
> 时间：2013-01-17T22:57:03.277
> 
> 标签：c++, xcode, class, arduino

背景：

我正在编写[ATmega328](http://www.atmel.com/devices/atmega328.aspx)。我受不了 Arduino IDE，所以我更喜欢使用[Xcode](http://en.wikipedia.org/wiki/Xcode)来编写代码。但是，我发现使用 Xcode 将草图实际上传到 Arduino 的所有在线选项充其量都是令人费解的，并且在尝试实现它们方面没有成功。

当前方法：

目前对我有用的是严格使用 Xcode 作为调试器，并在我需要它们时“创建”精简版本的 Arduino 类，这样当我输入特定于 Arduino 的代码行时，调试器就不会崩溃。例如，我的 Xcode 项目中有一个 Serial 类，它具有以下功能，可以正常工作：

```
void Serial::print(int myInt)
{
    cout << myInt;
}

void Serial::println(int myInt)
{
    cout << myInt << endl;
} 
```

我对字符串以及我可能需要打印的任何其他标准[C++数据类型执行相同的操作。](http://en.wikipedia.org/wiki/C++)

这样，任何时候我想将`Serial.print`一个函数放入我正在处理的另一个类中，我都可以在 Xcode 中严格调试，而无需打开 Arduino IDE。我还可以为 等创建一个“假”类`pinMode`。

问题：

我想`byte`用 Arduino 环境中使用的数据类型来做到这一点。我正在对这个程序采用面向对象的方法，它可能会耗尽我的小 Arduino 上宝贵的 RAM。所以，为了节省空间，我将我所有`int`的 s 转换为`byte`s 等等。

但是，我假设（并且我的编译器告诉我）我不能继承`char`, or `int`, 或任何其他基本类型。我不知道如何开始使用诸如“ `byte a = 2`”之类的语句或与我当前的（有些复杂的）解决方法类似的语句。

本质上，我想诱使 Xcode 认为所有意图和目的都是`byte`一样的`int`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T22:58:55.770

您正在寻找`typedef`关键字：

```
typedef int byte; 
```

但是`int`类型通常大于单个字节。你*真正*想要的是：

```
typedef unsigned char byte; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T22:59:42.683

类型定义。（顺便说一句，**你要愚弄的不是 Xcode，而是编译器。**）

```
typedef int byte; 
```

或者

```
typedef uint8_t byte; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T13:12:42.780

通过重用为 Mac 实现 Arduino 硬件抽象层的[ncore](https://github.com/maniacbug/ncore) ，您可能会节省很多精力。

即使您想手动执行此操作，也值得一看 ncore。它使用以下方式定义字节：

```
typedef uint8_t byte; 
```

（事实上​​，这正是与 Arduino IDE 捆绑在一起的库的定义方式！）

# c# - 根据列中的值获取行号 - WPF C#

> ID：14389702
> 
> 赞同：0
> 
> 时间：2013-01-17T22:57:56.900
> 
> 标签：c#, wpf

我在 wpf 中有一个数据网格，例如：

年龄 姓名 姓氏

23 托尼·库珀

28 约翰·道尔

35 詹姆斯·莫里森

我知道那个名字是托尼，姓库珀，现在我想知道他的年龄。在我的场景中，我无法从数据源中找到它，我需要从显示的表中找到它。

怎么做到呢？

谢谢

# wordpress - 是否可以提供条件来检查目录并在此基础上提供代码？

> ID：14389703
> 
> 赞同：0
> 
> 时间：2013-01-17T22:57:58.847
> 
> 标签：wordpress, if-statement, conditional-statements

我会尽量说清楚，因为很难写下来……情况：使用 WordPress 时出现问题。我安装了 WPML（多语言站点）插件，它运行良好，但问题是我使用的这个主题有自定义帖子，如主页文本和主页框，而出现在我主页上的那两个帖子没有翻译的可能性将内容转换为其他语言以具有不同语言的主页文本和框（WPML 插件的那部分只是没有出现在那里）。主页文本和主页框，这两个出现在 wordpress 的左侧 - 它是菜单的一部分，就像链接、页面或评论...

我想出了一种解决这个问题的方法。

我创建了更多这些自定义帖子。我现在有：

```
Homepage Text (home_text) 
Homepage Boxes (home_boxes)

Homepage Text English (home_text_en)
Homepage Boxes English (home_boxes_en)

Homepage Text Russian (home_text_ru)
Homepage Boxes Russian (home_boxes_ru) 
```

这两个自定义帖子的 index.php 中有两段代码。我给你看一个：

```
<div id="homepage-text">
<?php query_posts(array(
        'post_type'=>'home_text',
        'orderby' => 'ASC'
        ));
?>
<?php if ( have_posts() ) while ( have_posts() ) : the_post();?>
<h2><?php the_title() ?></h2>
<?php the_content(); ?>
<?php endwhile; ?>
</div><!-- /homepage-text --> 
```

在此之后，主页框有类似的代码......

解决方法：编写一段代码：“如果您来自的地址是[http://www.website.eu](http://www.website.eu) - 使用主页文本和 home_text 和 home_boxes 框；如果是[http://www.website。 com/EN](http://www.website.com/EN) - 使用 home_text_en，等等……我希望你明白我在说什么……

这里有没有人有足够的时间阅读所有这些并且会如此友善并给我写一段将我的话翻译成php的代码？

这是我对它的外观的猜测，但我正在纠结于写作条件。

```
 if (condition that it's the main language directory)
{
register_post_type( 'home_text',
array(
  'labels' => array(
    'name' => __( 'Homepage Text' ),
    'singular_name' => __( 'Homepage Text' )
  ),
  'public' => true,
  'supports' => array('title','editor')

)
);
}
elseif (condition that it's english language directory .com/en)
{
register_post_type( 'home_text_en',
array(
  'labels' => array(
    'name' => __( 'Homepage Text English' ),
    'singular_name' => __( 'Homepage Text English' )
  ),
  'public' => true,
  'supports' => array('title','editor')

)
);
}
else
{
register_post_type( 'home_text_ru',
array(
  'labels' => array(
    'name' => __( 'Homepage Text Russian' ),
    'singular_name' => __( 'Homepage Text Russian' )
  ),
  'public' => true,
  'supports' => array('title','editor')

  )
 );
 } 
```

提前致谢。

多曼塔斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:01:53.153

您可以使用 WordPress [http://codex.wordpress.org/Function_Reference/wp_get_referer](http://codex.wordpress.org/Function_Reference/wp_get_referer)的 Page Referer 功能来执行以下操作：

```
$page_referer_url = wp_get_referer();
if(strpos($page_referer_url,'.com/en')!==FALSE) { // Check if the text '.com/en' is part of the referer URL
    // code for english
}
else {
    // code for non english
} 
```

您可以在这里找到 strpos() 的工作原理[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

# c# - 不同频率的数据表数据

> ID：14389705
> 
> 赞同：0
> 
> 时间：2013-01-17T22:58:03.650
> 
> 标签：c#, datatable

我的数据表有 19 列，第一列都以毫秒为单位填充时间戳：
18491
18591
18691
...

在时间戳列中，时间会随机从+100增量变为+50增量：
20291
20341
20391
20441
...

然后再回来，多次。

其他列具有以不同频率分布的不同数据值，例如 1 Hz、5Hz、10Hz，值之间有 double.NaN。

将这些列平均为 1Hz 数据的最佳方法是什么，同时忽略 NaN 单元并创建一个只有 1Hz 数据且没有空白的新数据表？
IE：

来自：
时间Col1中col2的COL3 COL4 COL5
18491 4.0 2.2 NaN的1.0的NaN
18591楠楠1.0 1.0 NaN
的18691的NaN 3.2的NaN 2.0的NaN
18791的NaN楠楠3.0的NaN
18891的NaN 4.4的NaN 1.0的NaN
18991的NaN楠楠4.0的NaN
19091的NaN 1.4 6.0 4.0的NaN
19191的NaN楠楠3.0的NaN
19291的NaN 3.2的NaN 2.0的NaN
19341楠楠楠楠2.0
19391的NaN楠楠3.0的NaN
19441 6.0 3.4楠楠1.0
19491的NaN楠楠2.0的NaN
19541楠楠楠楠3.0
19591楠楠3.0 4.0 NaN
的19641的NaN 5.2 NaN NaN 1.0
19691 NaN NaN NaN 2.0 NaN
19791 NaN NaN NaN 1.0 NaN
19891 NaN 4.1 NaN 0.0 NaN 19991 NaN
NaN NaN 2.0 NaN
20091 NaN 2.2 4.0 1.0 NaN
20191 NaN NaN NaN 1.0 NaN
20291 NaN 5.1 NaN 1.0 NaN
20391 NaN NaN NaN 1.0 NaN
20491 5.0 3.3 NaN 2.0 NaN

至：
时间 Col1 Col2 Col3 Col4 Col5
18491 4.0 2.2 NaN 1.0 NaN
19491 6.0 3.21 3.5 2.5 1.5
20491 5.0 3.98 3.5 1.5 2.0

感谢任何帮助，我对 C# 和数据表还是新手，所以提前谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:09:11.790

```
With Rounded as
(
   Select ROUND(SomeColumn, -3) as RoundedToThousands From SomeTable
)
Select RoundedToThousands, Count(*) from Rounded 
Group By RoundedToThousands 
```

您将需要修改舍入逻辑以符合您对如何决定 491 与 441 作为舍入数的要求。可能是地板而不是圆形的某种组合，然后是 + 491。

# c++ - OpenCV 开发运动检测软件

> ID：14389707
> 
> 赞同：0
> 
> 时间：2013-01-17T22:58:13.000
> 
> 标签：c++, opencv

我正在开始使用 Microsoft Visual 2010 Express 中的 OpenCV 开发软件。现在，在我开始编码之前，我需要知道的是我必须遵循的程序。

概述：我想开发检测简单的拳击动作，如（左拳，右拳）并输出结果的软件。

现在我在苦苦挣扎的地方是我应该采取什么方法我应该如何应对这种发展，即

1.  捕获视频片段并能够提取让我们说每 5 帧进行处理。
2.  我是否必须提取并存储此帧可能有一个参考图像以从中减去捕获帧。
3.  一旦我捕获一帧，处理它的最佳方法是什么：

    ```
     * Threshold it, then
      * Detect the edges, then 
      * Smooth the edges using some filter, then
      * Draw some BOUNDING boxes....? 
    ```

你对这些家伙有什么看法，或者我错过了什么，或者有更好更简单的方法......？有什么建议么...？

任何答案将不胜感激 Ps ...这不是我的作业:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T00:38:41.680

您正在寻找的是动作识别的研究领域，例如 www.nada.kth.se/cvap/actions/ 或者可能的解决方案是例如 STIP（时空兴趣点）方法 www.di.ens.fr/~ laptev/动作/。但最后，如果您必须处理遮挡或不同的观点，这是一项艰巨的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:08:43.753

我不确定是否只分析每 5 帧就足够了，因为通常出拳速度非常快，以至于它们可能会被忽略。

我假设您真正想要找到的是拳头的快进（朝向相机）运动。

在 OpenCV 的情况下，我会首先从面部的这种运动开始，因为已经在软件包中提供了一些关于如何做到这一点的示例。

要检测和跟踪人脸，您可以使用 CvHaarClassifierCascade，但由于这对于运行时检测来说不够快，请继续使用 Lukas-Kanade 跟踪找到的人脸。只需在先前找到的人脸中选择一些易于跟踪的点，记住它们与任意人脸中间的距离，并在每一帧更新它。看到这个家伙[http://www.youtube.com/watch?v=zNqCNMefyV8](http://www.youtube.com/watch?v=zNqCNMefyV8) - 使用 Lukas-Kanade 跟踪的一些随机点的示例。请注意，与面部不同，拳头可能不太容易追踪，因为它们的表面相当均匀，最好查看 OpenCV 中的 Lukas-Kanade 演示。

当然，每一帧实际的人脸都会漂移，偶尔重新运行 CvHaarClassifierCascade 并插入你当前持有的人脸位置。

您也应该能够对拳头进行上述操作，但这需要使用拳头图片训练分类器（OpenCV 中已经提供了用人脸训练的分类器）。

现在跟踪拳头/面部，您可以尝试观察这些点发生了什么——当有人出拳时，他们会迅速向某个方向移动，而在保持静止的拳头上，他们不会移动太多。因此，当您计算最近帧中单个点的平均移动时，该值越高，出现一拳的机会就越大。或者，如果您以某种方式设法准确地跟踪它们，如果它们之间的距离增加，则意味着物体更靠近相机 - 因此可能是一拳。

请注意，在至少不知道图片中拳头大小变化的情况下，可能很难区分手的移动是向前还是向后，或者用户是通过向左还是向右移动拳头来假装它。您可能必须想出一些专门的算法（可能需要反复试验）来检测，例如，在以前发现拳头的位置增加一些屏幕颜色像素。

# delphi - 在 Delphi 中连接到 Windows Media Player

> ID：14389709
> 
> 赞同：1
> 
> 时间：2013-01-17T22:58:22.050
> 
> 标签：delphi, media-player

我想编写一个应用程序来启动/停止，并淡入/淡出正在运行的`Windows Media Player`. 我只有`Delphi`知识，无法转换与此主题有关的所有内容`c++`和示例。`c#`有人可以帮我得到这个 `IServiceProvider`并`IWMPRemoteMediaServices`实施吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T23:09:34.520

您可以在 Delphi 中轻松使用这些接口。

为类型库创建一个新的包装器：

*   文件->新建->VCL 表单应用程序
*   组件->安装组件->导入类型库
*   选择 Windows Media Player, v1.0（指向 WMP.DLL 的那个）
*   点击`Finish`

明确要导入的类型库：

![导入类型库对话框](../Images/17ec7852808899db0c8817dfcfac9776.png)

将生成的`WMPLib_TLB.pas`单元添加到应用程序的 uses 子句中。你会在你的`$(DELPHI)\Imports`文件夹中找到它。

导入的类型库包括您提到的两个 Windows Media Player 接口。

使用导入的类型库中的接口，按照您在其他地方找到的任何示例进行操作。（您可以将使用它们的努力发布为您在此处无法弄清楚的新的特定问题，其中包括您无法使用的代码。）

# c++ - 使用 "cout" 时使用 "<<" 或 "+" 将字符串放在一起

> ID：14389710
> 
> 赞同：15
> 
> 时间：2013-01-17T22:58:29.380
> 
> 标签：c++, console, cout

我见过人们同时使用“<<”和“+”来输出不同的字符串。

```
cout << firstname << lastname << endl; 
```

相对：

```
cout << firstname + lastname << endl; 
```

使用“<<”更好还是没有太大区别？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-17T22:59:15.310

`<<`我会说在这种特殊情况下使用它更好。否则，连接会导致一个临时的，它*可能会*无缘无故地分配内存。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-17T23:10:03.193

当然，使用`<<`- 连接字符串将创建粘贴在一起的两个字符串的副本。它是否还在顶部分配额外的内存取决于字符串在 C++ 库中是如何实现的，但如果名字和姓氏“足够长”（大于 8-16 个字符），那么它很可能会分配内存（然后在不再需要临时副本时再次释放它）。

相比之下，运营商的`<<`开销很小，所以毫无疑问它更好。

当然，除非你做了成千上万这样的事情，否则你不太可能有可测量的差异。但是最好不要浪费 CPU 周期，你永远不知道它们在其他地方有什么用处……；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T23:20:47.640

级联`<<`是更好的选择。

为了性能，正如其他主题所提到的，操作员`<<`不一定会引入任何临时对象。级联`<<`可以视为管道。

有时，`+`如果您的左操作数不是用户定义的类型，则不能使用，除非您提供相应的`operator+`. 例如，

```
cout << "Hello, " << lastname << endl;// Works
cout << "Hello, " + lastname << endl; // This won't work 
```

# c# - 如何在 sharepoint 2010 Web 部件中创建计时器作业

> ID：14389712
> 
> 赞同：0
> 
> 时间：2013-01-17T22:58:37.860
> 
> 标签：c#, sharepoint

我正在做一个项目，客户希望他们的 sharepoint 2010 webpart 中的数据根据​​现在的时间自动更新。我们使用 C# 编写代码。

我已经尝试了互联网的四个角落提供的几乎所有方法来想出一个好的方法来做到这一点，但是，我很难过。我知道 Visual Studio 2010 附带了三个不同的计时器（这是我正在使用的）。有没有办法做到这一点？

以下是我尝试过的一些方法：

-创建一个在中央管理员上运行的计时器作业（此方法在几个 Web 教程中都有介绍），我让计时器作业工作，但我不知道是否有办法用新信息。我基本上使用的是 SPJobDefiniton 类和一个特性。

-尝试使用内置的系统计时器，如下所述：

[http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

试图使其适应 Web 部件，但无济于事。Web 部件已构建，但计时器从未运行。

- 使用 System.Threading.Timer 进行了尝试，但也没有任何进展。

有人知道有什么方法可以得到我想要的功能吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:29:09.753

对我来说似乎与 SharePoint 无关......

您可能需要 JavaScript 中的客户端计时器`window.setTimeout`并强制更新整个页面（简单，只需更改 window.location）或部分更新（需要一些服务来从中提取数据，更新页面的一部分 - 更难，但更好看）。

服务器端只是根据当前时间渲染数据...

# jquery - jquery增量旋转按钮

> ID：14389716
> 
> 赞同：1
> 
> 时间：2013-01-17T22:58:58.000
> 
> 标签：jquery, css, rotatetransform

嘿，我正在尝试每次单击按钮时将其旋转 45 度设置动画，但我无法让我的功能正常工作，这就是我目前所拥有的：

```
function increaseAngle(elem) {
    var oldAngle = $(elem).data('angle');
    var newAngle = oldAngle + 45;
    $(elem)
        .css("-webkit-transform", "rotateZ(" + newAngle + "deg)")
        .data('angle', newAngle);
}

$(".info_btn")
    .css("-webkit-transition", "-webkit-transform 0.25s ease-in-out")
    .data('angle', 0);
    .toggle(function() {
        increaseAngle(this);
    }, function() {
        increaseAngle(this);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:01:09.367

```
 .data('angle', 0);
    .toggle(function() { 
```

如果你试图链接你的函数，那个分号不应该在那里。

您的代码[工作正常](http://jsfiddle.net/yJQp5/2/)，您只需要对调用它的方式进行细微调整。Toggle 将隐藏元素，因此请改用 click 事件。

```
$(".info_btn")
  .css("-webkit-transition", "-webkit-transform 0.25s ease-in-out")
  .data('angle', 0)
  .click(function() {
      increaseAngle(this);
}); 
```

# javascript - 使用更少的 javascript 进行拖放上传

> ID：14389717
> 
> 赞同：1
> 
> 时间：2013-01-17T22:58:58.703
> 
> 标签：javascript, jquery, html, css, browser

我正在尝试为我的网站制作一个上传支架，以便用户可以轻松地将文件拖放到上面。

有很多库和事件可以做到这一点，但我需要一个简单的方法。

这个（[想法](http://jsfiddle.net/skcQG/)）出现在我的脑海中......

我把 a`file input`放到页面上并设置`width`and `height`。

现在，当我的用户在其上拖动文件时，`onchange`事件将起作用。

但我想隐藏浏览按钮，有两种方法：

设置`0 opacity`。（它在某些浏览器中不起作用）

设置`hidden visibility`。（这个想法不起作用）

帮帮我，我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:07:06.947

将表单放在隐藏的 iframe 上。使用普通的 div 作为目标。当文件被删除时，捕获事件并更新输入，然后作为 post 提交。结果是通过文件拖放进行类似 ajax 的上传。

# networking - Hyper V：网络适配器驱动程序

> ID：14389722
> 
> 赞同：2
> 
> 时间：2013-01-17T22:59:28.453
> 
> 标签：networking, windows-xp, hyper-v

似乎我需要使用旧版适配器驱动程序来获得与旧版本的 windows 和 fedora（fedora 14 和 windows xp）的网络连接，但对于较新的版本，我可以使用常规网络适配器。有没有一种方法可以安装常规网络适配器所需的正确驱动程序以连接旧客户操作系统，或者是否需要连接不兼容的 windows xp 和 fedora 14 的驱动程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T11:45:58.637

Hyper-V 有两种 NIC：模拟的和合成的。 *模拟*对应于您所说的“遗留”。 *合成*对应于您所说的“常规网络适配器”。

要操作合成 NIC，来宾操作系统需要额外的驱动程序。这些称为*集成服务*

AFAIK，Hyper-V 附带适用于 WindowsXP 的驱动程序。它们以 ISO 的形式出现，您可以将其添加到 VM 的 DVD 驱动器。在 Hyper-V 管理器下，连接到 VM（选择 VM，然后使用 Action -> Connect...），然后在弹出的窗口中使用 Action -> Insert Integration Services Setup Disk。您从 Guest O/S 内部安装驱动程序。

对于 Linux 操作系统，您应该下载[*Linux Integration Services 3.4*](http://www.microsoft.com/en-gb/download/details.aspx?id=34603)，这是撰写本文时的最新版本。不幸的是，只有 CentOS 和 RHEL 被明确支持。您可以尝试安装 Linux 集成服务附带的 RPM，但不清楚它们是否能正常工作。

祝你好运！

**更新：**

Hyper-V 驱动程序已添加到 linux 内核中。[我在我的博客](http://dlafferty.blogspot.co.uk/2013/07/installing-hyper-v-pv-drivers-for-linux.html)上发布了有关如何确定它们是否可用于您的发行版的详细信息。

# ruby-on-rails - Rails 将自己的网站、Facebook 和 Twitter 帐户合二为一

> ID：14389729
> 
> 赞同：0
> 
> 时间：2013-01-17T22:59:54.280
> 
> 标签：ruby-on-rails, ruby

我是 Rails 的新手。目前，我正在构建一个能够使用 facebook、twitter 以及我自己的网站帐户登录的应用程序。
我正在考虑像 Pinterest 一样做一个用户，但我不知道如何将它们集成为一个帐户。
有人对此有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:02:23.773

OmniAuth 可能是您想要的。

[http://railscasts.com/episodes/241-simple-omniauth](http://railscasts.com/episodes/241-simple-omniauth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:30:04.603

你需要这样的东西吗？？ [http://openid.net/developers/](http://openid.net/developers/)

但实际上，当您尝试访问用户的帐户（例如 google、facebook、twitter）时，您也必须获得用户的许可，因此也需要将两者集成一次。

# java - 如何使用 Java getResource() 从父目录获取资源？

> ID：14389731
> 
> 赞同：16
> 
> 时间：2013-01-17T23:00:05.740
> 
> 标签：java, path

我现在尝试了很多方法，包括来自 commons IO 的 FilenameUtils.normalize()，但我似乎无法在另一个文件夹中获取资源来获取 Java FXML 文件。

代码如下

```
 try {
     root = FXMLLoader.load(getClass().getResource("../plugin/PluginSelection.fxml"));
  } catch (IOException ex) {
     Logger.getLogger(QueueOperationsController.class.getName()).log(Level.SEVERE, null, ex);
  } 
```

所需的 FXML 文件在哪里：

```
gui
   dialogues
      plugins
         PluginSelection.fxml // desired file
      dataset
         QueueOperationsController // current class 
```

如何最好地获取所需文件的 URL？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T23:19:06.477

您可以获得相对于`Class`或上下文根的资源。在您的示例`/`中，如果那是您的应用程序中的包结构，则将其放在字符串的开头。尝试

```
getClass().getResource("/gui/dialogues/plugins/PluginSelection.fxml") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-25T00:50:32.837

在我看来，如果我们仅在标记为资源文件夹中搜索时使用 .getResource 。否则，即使文件夹路径正确，但没有标记为资源文件夹，也会出错。所以，我这样做：

```
FileInputStream fileInputStream = new FileInputStream(new File("src/main/java/CRUD/bnkseekCRUD.fxml"));
    Parent root = loader.load(fileInputStream); 
```

# java - Eclipse中自动生成序列版UID

> ID：14389733
> 
> 赞同：13
> 
> 时间：2013-01-17T23:00:27.017
> 
> 标签：java, eclipse

我经常使用 Eclipse 快速修复为可序列化的类生成序列版本 UID。

默认情况下有什么方法可以做到这一点？

这是一个额外的点击，但使用 Eclipse 选择快速修复通常很慢，而且当我实现可序列化时，我总是生成序列版本 UID:s。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T00:26:35.717

这可能不是您正在寻找的答案。假设您使用 Eclipse 生成相同的特殊值，如果您没有明确指定它，Java 会自动为您的类计算它，例如：

```
 private static final long serialVersionUID = 4125965356358329466L; 
```

但是对于新创建的类没有充分的理由依赖这个相同的算法。重要的是您指定一个值，任何值。那么为什么不简单地做以下事情呢？

```
 private static final long serialVersionUID = 1L; 
```

然后，您可以将此代码放入 Eclipse 的新类模板中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-01-15T10:31:22.630

不知道你是否有答案。但是 Eclipse 确实允许`serialVersionUID`一次性创建所有实现`Serializable`. 虽然，它与您想要的并不完全相同。但是，它将以更少的点击次数达到目的。

右键单击***项目 -> 源 -> 清理...***

*   选择*使用自定义配置文件*。然后点击*配置*

[![清理屏幕 1](../Images/0096452e7358392b38d6e4bd014b846d.png)](https://i.stack.imgur.com/OAuZH.png)

*   单击*缺少代码*选项卡。在*潜在的编程问题*下，选择*Add serial cersion ID*。点击*确定*

[![清理屏幕 2](../Images/b722a2bd20e5324a0392e3a87293a99f.png)](https://i.stack.imgur.com/W1HFO.png)

*   现在您将看到一个步骤被添加为突出显示

[![清理屏幕 3](../Images/aa464c29ab56661dfdbb167467bbfa7c.png)](https://i.stack.imgur.com/xB8a2.png)

单击*Finish*后，Eclipse 将生成`serialVersionUID`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-29T10:33:43.987

在埃克利斯

从您的班级中删除该行

```
private static final long serialVersionUID = 123456789L; 
```

将鼠标放在实现 Serializable 的方法名称（例如：XxxMethod）上

点击“添加生成的序列号”

# java - 如何逐步修补war文件

> ID：14389734
> 
> 赞同：1
> 
> 时间：2013-01-17T23:00:36.923
> 
> 标签：java, web-applications, deployment

我正在客户站点部署战争文件。War 文件包含 lib 文件夹，其中包含依赖的 jar，例如

/lib/app-01.jar /lib/spring-2.5.1.jar /lib/somefile-1.2.jar ... ...

如果我们需要更新让我们说 app-01.jar 到 app-02.jar，有什么优雅的解决方案吗？这些依赖的 jar 是如何作为行业标准打包到 WAR 文件中的？

打包那些没有版本号的依赖jar是个好主意吗？例如

/lib/app.jar /lib/spring.jar /lib/somefile.jar ... ...

编辑说明：实际上，War 被部署到 Windows 或 Linux 平台上的 Webshpere、WebLogic、Tomcat 上。客户的 IT 部门参与部署

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T00:20:33.717

可能最优雅的解决方案就是生成一场新战争并部署它。

以下是原因：

*   如果您担心正常运行时间，一些应用程序服务器支持并行部署。这意味着您可以部署新版本并在旧版本的同时启动它。并在没有人使用时停止旧的。（我在 WebLogic 上使用过它，就像 5 年前一样，所以我想这是一个常见的功能）。但这种功能只有在您部署新的 .WAR 版本时才有效。

*   WAR 可能是使用 Maven、Ant 或 Gradle 生成的，因此更改依赖版本并执行 a`mvn package`通常比解压缩 WAR、更改它并再次压缩它更快且更不容易出错。

*   所有应用程序服务器都提供“热替换”功能，通过刷新类加载器来工作。它适合开发，但在生产中可能会出现问题（类加载器泄漏可能很常见，由不正确的初始化或不良编程实践引起的问题可能会给您带来意想不到的错误，例如拥有两个版本的类）

关于 JAR 文件名：我建议保留文件名上的版本。大多数 JAR 包含 META-INF/Manifest.mf 中的版本信息。但是，如果由于某种原因您必须知道哪些版本正在使用您的应用程序...打开每个 JAR 文件以查看清单中的版本是很多工作。

作为最后的建议。如果您不使用任何自动构建工具...采用一个（看看[Gradle](http://www.gradle.org/)，这很好）。更新库版本，通常包括更改构建文件上的版本号并执行类似`gradle deploy`. 即使您不是开发人员，而是负责 devops 的人，拥有自动化构建也将帮助您进行部署和更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:37:22.073

在 Tomcat 中，我认为文件解压缩后的战争无关紧要。您可以忽略战争并将新/更改的文件提取到正确的 webapp 目录中（与战争同名的目录。）

# javascript - 为 jquery 对话框创建按钮数组

> ID：14389735
> 
> 赞同：1
> 
> 时间：2013-01-17T23:00:40.847
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog

是否可以创建一个按钮数组然后将其附加到一个 jQuery 对话框？

沿着这些思路。请原谅我在 for 循环中的错误代码，只是根本不知道该怎么做。

```
function setAutoDialog()
{
    var testArray = ["T1", "T2"];
    $('#autoDialog').dialog({
        autoOpen: false,
        width: 'auto',
    });
    var buttons = {};
    for(var i=0; i<testArray.length; i++){
        buttons += [testArray[ix] : Test()]
    }
    $('#autoDialog').dialog('option', 'buttons', buttons);
}

function Test()
{
    alert("worked");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:15:46.317

像这样的东西应该工作：

```
function setAutoDialog(){
    var testArray = ["T1", "T2"];

    var testFunction = function () {
        alert("worked");
    }

    var myButtons = {};

    for(var i = 0; i < testArray.length; i++){
        myButtons[testArray[i]] = testFunction;
    }

    $('#autoDialog').dialog({
        autoOpen: false,
        width: 'auto',
        buttons : myButtons
    }); 
} 
```

“例如点击而不是警报（工作）我想获得警报（buttonClicked.val（））？” 它会是这样的：

```
function setAutoDialog(){
    var testArray = ["T1", "T2"];

    var myButtons = {};

    for(var i = 0; i < testArray.length; i++){
        var testFunction = function () {
            alert(testArray[i]);
        }

        myButtons[testArray[i]] = testFunction;
    }

    $('#autoDialog').dialog({
        autoOpen: false,
        width: 'auto',
        buttons : myButtons
    }); 
} 
```

# android - Google Maps Android API v2 创建新的 LocationSource

> ID：14389736
> 
> 赞同：8
> 
> 时间：2013-01-17T23:00:45.170
> 
> 标签：android, google-maps-android-api-2

A`LocationSource`在[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/LocationSource)中定义。

它用于 googlemap 作为位置提供者。默认情况下，位置源由手机上的 gps 模块提供。

但现在我想用另一个`Location source`，位置数据会定期发送到安卓设备。

我不知道如何实现这个接口。有什么例子吗？有人可以帮我吗？该文件没有说明任何内容。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T23:22:28.037

这是一个简单的`LocationSource`接口实现。就我而言，我正在注册 GPS 和网络位置提供商。正如@CommonsWare 所提到的，实施可能很大程度上取决于您的需求。我建议阅读有关定位服务的[官方文档](http://developer.android.com/guide/topics/location/index.html)，以便更好地了解如何利用您的需求并节省一些电池电量

```
public class CurrentLocationProvider implements LocationSource, LocationListener
{
    private OnLocationChangedListener listener;
    private LocationManager locationManager;

    public CurrentLocationProvider(Context context)
    {
        locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    }

    @Override
    public void activate(OnLocationChangedListener listener)
    {
        this.listener = listener;
        LocationProvider gpsProvider = locationManager.getProvider(LocationManager.GPS_PROVIDER);
        if(gpsProvider != null)
        {
            locationManager.requestLocationUpdates(gpsProvider.getName(), 0, 10, this);
        }

        LocationProvider networkProvider = locationManager.getProvider(LocationManager.NETWORK_PROVIDER);;
        if(networkProvider != null) {
            locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000 * 60 * 5, 0, this);
        }
    }

    @Override
    public void deactivate()
    {
        locationManager.removeUpdates(this);
    }

    @Override
    public void onLocationChanged(Location location)
    {
        if(listener != null)
        {
            listener.onLocationChanged(location);
        }
    }

    @Override
    public void onProviderDisabled(String provider)
    {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider)
    {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras)
    {
        // TODO Auto-generated method stub

    }
} 
```

这是我将如何使用这个类：

```
protected void setUpMap() {
    //init routine
    .......

    this.map.setLocationSource(new CurrentLocationProvider(this));
    .......       
} 
```

**编辑**请不要说这个解决方案已经过时了！您需要结合使用[FusedLocationProviderApi和](https://developer.android.com/reference/com/google/android/gms/location/FusedLocationProviderApi.html)[GoogleApiClient](https://developer.android.com/reference/com/google/android/gms/common/api/GoogleApiClient.html)来跟踪当前位置

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T23:11:28.480

> 有什么例子吗？

界面没有太多内容，它的实现非常依赖于您的应用程序。

[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/Location)在主要活动上实现了`LocationSource`接口：

```
 @Override
  public void activate(OnLocationChangedListener listener) {
    this.mapLocationListener=listener;
  }

  @Override
  public void deactivate() {
    this.mapLocationListener=null;
  } 
```

我所做的就是抓住`OnLocationChangedListener`我们交上来的那个`activate()`。然后，当您有想要提供给地图的位置修复时，调用`onLocationChanged()`该侦听器，提供一个`Location`对象（`Location`您可能会从该对象返回相同的对象`LocationManager`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-26T19:52:13.273

这是使用的解决方案`FusedLocationProviderApi`：

[Android：谷歌地图位置电池使用率低](https://stackoverflow.com/questions/28108326/android-google-maps-location-with-low-battery-usage)

# java - 如何防止 STRUTS 持久化选择？

> ID：14389739
> 
> 赞同：1
> 
> 时间：2013-01-17T23:00:58.890
> 
> 标签：java, struts, struts-1, struts1

我正在使用 JAVA STRUTS。我有一个带有与之关联的 ActionForm 类的 html 表单，并且控件是使用标签创建的。据我了解，即使表单被刷新，STRUTS 也会在 html 表单上保留选择。我需要防止这种行为并强制它重新绑定来自 ActionForm 对象的值。

基本上，我有一个带有单选按钮组的表单，允许用户选择 A、B 或 C。我有一个 ActionForm，它在加载表单时设置了属性“selection = A”。如果用户选择 B 并提交，则表单正确设置为“selection = B”，一切正常。但是，当我刷新页面时，ActionForm 被重置为“selection = A”（通过调试确认），但单选按钮已选择 B！

有谁知道这是为什么或我如何防止它发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:19:02.433

关于你的帖子，我认为它属于`struts2`so，

`According to struts2 it is not possible means, you have to give the static value or you have to make in programmatic manner through JPA (or)your java code`.

[对于 JPA，您可以参考此链接，这对JPA 方式](http://struts.apache.org/2.3.4.1/docs/33168.html)很有帮助

```
This explanation is refer to static way 
```

首先在 jsp 页面中您必须`import struts2 tags`通过，`taglib uri`然后它会在您必须选择的标签中显示可用的 struts2 标签`<s:radio></s:radio> tag`

```
eg:
<s:radio label="Selections" name="your name" list="#{'A':'A','B':'B'}" value="2" /> 
```

在此代码中，我将值键入为 2，因此，如果删除该值，它将选择 B 作为默认值，它不会选择任何默认值。

```
Basically what i am trying to say here is without value it won't select any radio buttons 

you have to give value through static way or dynamic way. 
```

对于动态方式，您可以参考此链接[动态单选按钮](http://www.mkyong.com/struts2/struts-2-sradio-radio-button-example/)

# java - 创建 JAX-WS 客户端以利用 .NET Web 服务（需要身份验证）

> ID：14389748
> 
> 赞同：0
> 
> 时间：2013-01-17T23:01:43.350
> 
> 标签：java, web-services, jax-ws, endpoint

正如我在标题中所说，我正在尝试将 JAVA 应用程序连接到远程 Web 服务。我对 JAVA 和 Web 服务还很陌生。我正在使用 Eclipse IDE。

我做的第一件事是在命令窗口中运行**wsimport 。**提供了 WSDL url，但出现错误：**FAILED，找不到 WSDL**。我检查了多次以确保 url 是正确的。

为了解决这个问题，我在本地保存了 WSDL，并且 wsimport 没有任何问题。将所有生成的代码移到我的项目中，一切似乎都很好。

这是我的测试代码

```
// HAVE TO USE PROXY
final String authUser = "xxxxxx";
final String authPassword = "xxxxxx";
String proxyServer = "proxy1.xxxxx.com";
String proxyPort = "99999";

System.setProperty("http.proxyHost", proxyServer);
System.setProperty("http.proxyPort", proxyPort);
System.setProperty("http.proxyUser", authUser);
System.setProperty("http.proxyPassword", authPassword);

Authenticator.setDefault(
   new Authenticator() {
      public PasswordAuthentication getPasswordAuthentication() {
          return new PasswordAuthentication(authUser, authPassword.toCharArray());
      }
   }
);

WebServiceXX client = new WebServiceXX();
WebServiceXXSoap port = client.getPort(WebServiceXXSoap.class);

BindingProvider bp = (BindingProvider)port;
Map<String, Object> req_ctx = bp.getRequestContext();

req_ctx.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, "https://domain.com/WebService/WebServiceXX.asmx");
req_ctx.put(BindingProvider.USERNAME_PROPERTY, "user");
req_ctx.put(BindingProvider.PASSWORD_PROPERTY, "password");

//HERE, TRYING TO CALL SERVICE. GETTING TIMEOUT ERROR IN 2nd LINE
WebServiceXXSoap service = client.getWebServiceXXSoap();
OperationStatusCodesResp StatusCodes = service.GetOperationStatusCodes(); 
```

简而言之，我不得不使用代理服务器。我测试了那部分，似乎没问题。由于我使用了本地 WSDL，我假设我必须手动设置 ENDPOINT URL，并且由于需要身份验证，因此我必须设置用户名和密码，正如您在代码中看到的那样。

我得到的错误是**Time Out Error**。我在想，也许我没有正确设置此 ENDPOINT，并且由于没有提供正确的 Web 服务 URL，因此无法发出该请求。

我尝试在生成的 java 文件之一中编辑 wsdlLocation，以用真实的 WSDL url 替换本地路径，但我收到错误，即找不到 WSDL。JAX-WS 要么讨厌这个 WSDL，要么就是其他问题。作为说明，我在 .NET (C#) 应用程序中使用此服务没有任何问题（Web 服务本身在 .NET、WSE 2.0 中完成）

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:44:33.243

您可以尝试将注释和变量更改`wsdlLocation`为。`@WebServiceClient``baseUrl`

```
https://domain.com/WebService/WebServiceXX.asmx?WSDL 
```

对于身份验证（基本），您可以在[使用 JAX-WS (Client) 的 HTTP 基本身份验证](http://etfdevlab.blogspot.mx/2009/12/http-basic-authentication-with-jax-ws.html)中找到一个很好的指南。

### 编辑

您可以尝试在项目中本地存储 WSDL。要生成客户端，您可以将 WSDL 文件放在一个文件夹中，然后使用终端 o 符号系统导航到该文件夹​​，将`PATH`for 指向`bin`JDK 的文件夹，并`wsimport`与本地 wsdl 文件一起使用。

[请参阅使用 Java 6 和 JAX-WS](http://shrubbery.mynetgear.net/c/display/W/Consuming+a+Web+Service+with+Java+6+and+JAX-WS) - Wiki - Confluence使用 Web 服务中的示例。

然后您可以使用*指定端点地址和 HTTP 基本授权*部分中的方式。

# jquery - jGestures点击事件未注册

> ID：14389750
> 
> 赞同：0
> 
> 时间：2013-01-17T23:01:55.810
> 
> 标签：jquery, mobile, jgestures

我正在为我的移动网站使用 jQuery mobile。我正在尝试在我创建的按钮上实现点击。

我将插件上传到服务器，我没有收到控制台错误，但由于某种原因它无法正常工作。这是代码

```
 jQuery('a#nextq').bind('tapone',function(e) { alert("hi");}); 
```

起初我使用的是点击功能，但后来我发现有时点击功能在移动设备上不起作用。有没有其他插件对新手用户来说并不复杂？

这是[http://jgestures.codeplex.com/中插件的链接](http://jgestures.codeplex.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T12:00:45.830

您可以尝试“打开”而不是绑定。此外，如果您使用的是 jquery.mobile 库，则可以调用“tap”事件而不是 tapone。

# java - 求二次方程的根

> ID：14389751
> 
> 赞同：1
> 
> 时间：2013-01-17T23:01:57.447
> 
> 标签：java

到目前为止我有这段代码，但是每次我运行并将三个数字放入一个 get 的根是 NaN 时，有人可以帮助或指出我出错的地方。

```
 import java.util.Scanner;

 class Quadratic {
   public static void main(String[] args) {

   System.out.println("Enter three coefficients");
   Scanner sc = new Scanner(System.in);
   double a = sc.nextDouble();
   double b = sc.nextDouble();
   double c = sc.nextDouble();
   double root1= (-b + Math.sqrt( b*b - 4*a*c ) )/ (2*a);
   double root2= (-b - Math.sqrt( b*b - 4*a*c ) )/ (2*a);
   System.out.println("The roots1 are: "+ root1);
   System.out.println("The roots2 are: " + root2);

     } 
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T23:06:30.660

您必须记住，并非每个二次方程都有可以用实数表示的根。更具体地说，如果`b*b - 4*a*c < 0`，则根将具有虚部`NaN`并将被返回，因为`Math.sqrt`负数返回`NaN`，如[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#sqrt%28double%29)中所述。这适用于这样的系数`b*b - 4*a*c >= 0`，但是：

```
输入三个系数
*1* 
*5* 
*6*
根 1 是：-2.0
根 2 是：-3.0

```

* * *

如果您也想考虑非实根，您可以执行类似的操作

```
double d = (b * b - 4 * a * c);
double re = -b / (2 * a);

if (d >= 0) {  // i.e. "if roots are real"
    System.out.println(Math.sqrt(d) / (2 * a) + re);
    System.out.println(-Math.sqrt(d) / (2 * a) + re);
} else {
    System.out.println(re + " + " + (Math.sqrt(-d) / (2 * a)) + "i");
    System.out.println(re + " - " + (Math.sqrt(-d) / (2 * a)) + "i");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T09:58:44.300

希望这可以帮助 -

```
import java.util.Scanner;  
class QuadraticCalculator  
{   
public static void main(String args[])  
{

    Scanner s=new Scanner(System.in);  
    double a,b,c,quad_dis,quad_11,quad_1,quad_21,quad_2;  
    System.out.println("Enter the value of A");  
    a=s.nextDouble();  
    System.out.println("\nEnter the value of B");  
    b=s.nextDouble();
    System.out.println("\nEnter the value of C");
    c=s.nextDouble();
    quad_dis=b*b-4*a*c;
    quad_11=(-1*b)+(Math.sqrt(quad_dis));
    quad_1=quad_11/(2*a);
    quad_21=(-1*b)-(Math.sqrt(quad_dis));
    quad_2=quad_21/(2*a);
    int choice;
    System.out.println("\n\nWhat do you want to do with the numbers you entered ?\n(1) Calculate Discriminant\n(2) Calculate the values\n(3) Find the nature of roots\n(4) All of the above");
    choice=s.nextInt();
    switch(choice)
    {
        case 1: System.out.println("\nDiscriminant: "+quad_dis);
                break;
        case 2: System.out.println("\nValues are: "+quad_1+", "+quad_2);
                break;
        case 3: if(quad_dis>0)
                {
                    System.out.println("\nThe roots are REAL and DISTINCT");
                }
                else if(quad_dis==0)
                {
                    System.out.println("\nThe roots are REAL and EQUAL");
                }
                else
                {
                    System.out.println("\nThe roots are IMAGINARY");
                }
                break;
        case 4: System.out.println("\nDiscriminant: "+quad_dis);
                System.out.println("\nValues are: "+quad_1+", "+quad_2);
                if(quad_dis>0)
                {
                    System.out.println("\nThe roots are REAL and DISTINCT");
                }
                else if(quad_dis==0)
                {
                    System.out.println("\nThe roots are REAL and EQUAL");
                }
                else
                {
                    System.out.println("\nThe roots are IMAGINARY");
                }
                break;

    }
    System.out.println("\n\nThank You for using this Calculator");
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-23T16:25:50.437

您可以使用以下代码。首先，它会检查输入方程是否是二次的。如果输入方程是二次的，那么它将找到根。此代码也能够找到复杂的根。

公共静态无效主要（字符串[]参数）{

```
 // Declaration of variables
    float a = 0, b = 0, c = 0, disc, sq_dis;
    float[] root = new float[2];
    StringBuffer number;
    Scanner scan = new Scanner(System.in);

    // Input equation from user
    System.out.println("Enter Equation in form of ax2+bx+c");
    String equation = scan.nextLine();

    // Regex for quadratic equation
    Pattern quadPattern = Pattern.compile("(([+-]?\\d*)[Xx]2)+((([+-]?\\d*)[Xx]2)*([+-]\\d*[Xx])*([+-]\\d+)*)*|((([+-]?\\d*)[Xx]2)*([+-]\\d*[Xx])*([+-]\\d+)*)*(([+-]?\\d*)[Xx]2)+|((([+-]?\\d*)[Xx]2)*([+-]\\d*[Xx])*([+-]\\d+)*)*(([+-]?\\d*)[Xx]2)+((([+-]?\\d*)[Xx]2)*([+-]\\d*[Xx])*([+-]\\d+)*)*");
    Matcher quadMatcher = quadPattern.matcher(equation);
    scan.close();

    // Checking if given equation is quadratic or not
    if (!(quadMatcher.matches())) { 
        System.out.println("Not a quadratic equation");
    } 

    // If input equation is quadratic find roots
    else { 

        // Splitting equation on basis of sign
        String[] array = equation.split("(?=[+-])");
        for (String term : array) {
            int len = term.length();
            StringBuffer newTerm = new StringBuffer(term);

            // If term ends with x2, then delete x2 and convert remaining term into integer
            if (term.endsWith("X2") || (term.endsWith("x2"))) {
                number = newTerm.delete(len - 2, len);
                a += Integer.parseInt(number.toString());
            }
            // If term ends with x, then delete x and convert remaining term into integer
            else if (term.endsWith("X") || (term.endsWith("x"))) {
                number = newTerm.deleteCharAt(len - 1);
                b += Integer.parseInt(number.toString());
            }
            // If constant,then convert it into integer
            else {
                c += Integer.parseInt(term);
            }
        }
        // Display value of a,b,c and complete equation
        System.out.println("Coefficient of x2: " + a);
        System.out.println("Coefficient of x: " + b);
        System.out.println("Constent term: " + c);
        System.out.println("The given equation is: " + a + "x2+(" + b + ")x+(" + c + ")=0");

        // Calculate discriminant
        disc = (b * b) - (4 * a * c);
        System.out.println(" Discriminant= " + disc);

        // square root of discriminant
        sq_dis = (float) Math.sqrt(Math.abs(disc));

        // conditions to find roots

        if (disc > 0) {
            root[0] = (-b + sq_dis) / (2 * a);
            root[1] = (-b - sq_dis) / (2 * a);
            System.out.println("Roots are real and unequal");
            System.out.println("Root1= " + root[0]);
            System.out.println("Root2= " + root[1]);
        } 
        else if (disc == 0) {
            root[0] = ((-b) / (2 * a));
            System.out.println("Roots are real and equal");
            System.out.println("Root1=Root2= " + root[0]);
        } 
        else {

             root[0] = -b / (2 * a);
             root[1] = Math.abs((sq_dis) / (2 * a));

            System.out.println("Roots are complex");
            System.out.println("ROOT1= " + root[0] + "+" + root[1] + "+i");
            System.out.println("ROOT2= " + root[0] + "-" + root[1] + "+i");
        }
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-01-08T19:53:36.673

```
else {
    if ((Math.sqrt(-d) / (2*a)) > 0) {
        System.out.println(r + " + " + (Math.sqrt(-d) / (2*a)) + " i");
        System.out.println(r + " - " + (Math.sqrt(-d) / (2*a)) + " i");
    }
    else if ((Math.sqrt(-d) / (2*a)) == 0){
        System.out.println(r);
    }
    else {
        System.out.println(r + " - " + (Math.sqrt(-d) / (2*a)) + " i");
        System.out.println(r + " + " + (Math.sqrt(-d) / (2*a)) + " i");
    } 
```

# optimization - 一个 prolog 程序优化与绿色削减和削减

> ID：14389752
> 
> 赞同：3
> 
> 时间：2013-01-17T23:01:58.150
> 
> 标签：optimization, prolog

## 我有一个序言程序。但现在我对prolog不是很熟悉。所以从这里寻求帮助。

下面的 Prolog 程序确定了汽车保险的保险费。保险费取决于车辆的马力和驾驶员的年龄。

```
calculateCarInsurance(PS,Insurance) :-
   PS < 60 , Insurance = 100.
calculateCarInsurance(PS,Insurance) :-
   PS >= 60 , PS < 100 , Insurance = 200.
calculateCarInsurance(PS,Insurance) :-
   PS >= 100 , Insurance = 300.
isInRiskyGroup(Age) :- Age < 25.
calculateCarInsurance(PS,Age,_) :- Age < 18 , fail.
calculateCarInsurance(PS,Age,Insurance) :-
   Age >= 18 , isInRiskyGroup(Age) ,
   calculateCarInsurance(PS,I2) ,
   Insurance is I2 * 2.
calculateCarInsurance(PS,Age,Insurance) :-
   not(isInRiskyGroup(Age)) ,
   calculateCarInsurance(PS,Insurance). 
```

* * *

现在需要 a) 使用 Green Cuts 优化程序。b) 通过删除不需要的谓词，将 Green Cuts 更改为 Red Cuts。程序的行为应该是相同的。

我已经了解序言程序，但可以通过绿色切割进行优化。谢谢，谁能详细解释a，b。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T04:30:37.050

让我们从基础开始。cut 运算符是`!`并且总是成功的。切口不能回溯过去——它就像一扇单向门。另一种看待它的方式是，它让您致力于您迄今为止所做的决定。

剪辑的用法分为几类。根据定义，绿色剪辑是完全不改变程序运行时语义的剪辑。绿切只是程序员告诉 Prolog 你已经知道你没有解决方案的一种方式。如果 Prolog 不知道没有更多的解决方案，它会询问您是否需要另一个解决方案，然后每次都失败。例如，看看这个实现`min/3`：

```
min1(X, Y, X) :- X < Y.
min1(X, Y, Y) :- Y <= X.

?- min1(3, 4, X).
X = 3 ;
false. 
```

看看 Prolog 是如何问我是否需要另一个解决方案，然后失败了？这证明堆栈上有一个额外的选择点。我们可以通过削减来消除它：

```
min2(X, Y, X) :- X < Y, !.
min2(X, Y, Y) :- Y =< X. 
```

现在，当我们询问 Prolog 时，`min2/3`我们只会得到一个答案：

```
?- min2(3, 4, X).
X = 3. 
```

看，没有提示，只有一个解决方案。

现在，与红色切割相比，绿色切割的原因在于行为或推理没有真正的变化。只是 Prolog 无法知道这一点`X < Y`并且`Y =< X`是相互排斥的——绿色切割是我们告诉 Prolog 的方式，一旦你确定 X 小于 Y，检查 Y 是否小于 X 就没有意义了。这会从堆栈中删除选择点，以获得技术性。这有时是一个重要的优化，因为 Prolog 花费大量时间回溯，而花费在尝试不可能的情况上的时间被浪费了。

红色切割是一种有些不同的动物。红色切割是任何确实以超逻辑方式改变行为的切割。为了向您展示红色切割的示例，您可以尝试完全消除第二个测试`min/3`：

```
min3(X, Y, X) :- X < Y, !.
min3(_, Y, Y). 
```

你可能会这样想，“当我们到达第二个子句时，我们知道 X 不小于 Y，所以没有必要检查 Y 是否小于或等于 X。” 乍一看这似乎是合理的，您会发现它似乎具有与 相同的行为`min2/3`，知道有一个像以前一样的解决方案：

```
?- min3(3, 4, X).
X = 3.

?- min3(4, 3, X).
X = 3. 
```

*然而*，因为我们已经消除了一些逻辑，所以我们向涉及回溯的细微错误敞开了大门。将`min/3`其视为三个实体之间的关系，我们可以用来`min3/3`制造虚假信息：`min1/3``min2/3`

```
?- min1(3, 100, 100).
false.

?- min2(3, 100, 100).
false.

?- min3(3, 100, 100).
true. 
```

100 不是 3 和 100 中的最小值，但`min3/3`如果第三个不是变量，则可以肯定具有相同第二个两个值的任何内容。换句话说，我们在使用红色剪辑时`min3/3`假设我们永远不会在第三个位置出现值。我们假设我们将使用第三个参数作为“out”参数。

让我们利用这些知识来看看你的家庭作业。我首先想到的是，前两条规则中存在同样的重叠条件逻辑：

```
calculateCarInsurance(PS,Insurance) :-
   PS < 60, ...
calculateCarInsurance(PS,Insurance) :-
   PS >= 60, ... 
```

最起码，我们可以在`PS < 60`commit之后加上一个绿切：如果PS小于60，那真的不可能也超过60，所以那里的绿切是绝对无害的。

我会提醒人们永远*不想*添加红色削减。当您需要使用 Prolog 的推理使其按您想要的方式工作时，它们有时是必要的。在这种情况下，您可能会注意到`calculateCarInsurance`可能会返回多个解决方案。你可能不想要这种行为，你可能想要承诺你得到的第一个行为。在这种情况下，您可以在所有规则主体的末尾添加一个切口`calculateCarInsurance`。然后，无论 Prolog 能找到多少解决方案，您都会得到一个解决方案。这会改变程序的逻辑行为，但根据您的要求可能是可取的。这也可能产生同样的负面影响`min3/3`，如果我们想验证保险结果，`calculateCarInsurance`可能会确认它永远不会产生的计算。

我希望这足以让你走上正轨。

# ios - 使用 heightForRowAtIndexPath 设置 UITableViewCell 高度 *without*

> ID：14389753
> 
> 赞同：2
> 
> 时间：2013-01-17T23:02:01.037
> 
> 标签：ios, uitableview, height

我正在尝试根据一些动态内容设置 UITableViewCell 的高度。我知道您可以通过视图控制器中的 heightForRowAtIndexPath 委托方法“设置”高度，但是……我不能这样做！

问题是在调用 cellForRowAtIndexPath 之前不知道单元格的高度，并且在调用cellForRowAtIndexPath*之前*调用 heightForRowAtIndexPath 。

因此，我需要以某种方式颠倒调用这两种方法的顺序，或者找到另一种设置单元格高度的方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:16:42.310

抱歉 - 没有内置方法可以反转这些方法或类似方法。原因之一是表格视图可能出于多种原因想要知道行的高度，并非所有原因都包括显示单元格 -`-tableView:heightForRowAtIndexPath:`可能会被多次调用，或者`-tableView:cellForRowAtIndexPath:`在调用高度法。

您*可以*做的是找到另一种方法来提前计算适当的高度，将其缓存，并依赖于`-tableView:heightForRowAtIndexPath:`. 我已经设法通过构建一个“虚拟” UITableViewCell 实例来做类似的事情，将其排除在正常的重用队列之外，并将其仅用于布局和高度确定目的。这样的解决方案将是这样的：

1.  得到`-tableView:heightForRowAtIndexPath:`。
2.  在高度缓存中查找索引路径。如果你有一个值，返回它。
3.  否则，请使用您的虚拟单元格来布置将出现在该索引路径上的内容。测量单元格的高度并将其缓存。
4.  可能会重复步骤 1-3 几次，具体取决于`-tableView:heightForRowAtIndexPath:`调用的次数。
5.  得到`-tableView:cellForRowAtIndexPath:`。
6.  从正常的重用队列中取出一个单元格，填充它，布置它，然后返回它。（您可以选择验证其高度是否与您预先计算的高度相匹配，以便表格视图的行为符合您的预期。）

根据您的单元格内容和用例中“lay it out”短语的复杂性，当您计算前几个高度或用户快速滚动表格视图时，这可能会导致合理的性能损失。但是，随着您的缓存升温，随着应用程序继续运行，您应该计算越来越少的高度。

最后一点：请记住，对于具有默认高度的单元格（可能会或可能不会出现在您的表格中），您可以通过返回提前退出`tableView.rowHeight`，而不是每次出现时都计算默认高度。这可以在一定程度上减轻上述方法的计算负担。

# c++ - 如何从 QLineEdit 小部件中获取文本并在状态机中使用它？

> ID：14389754
> 
> 赞同：1
> 
> 时间：2013-01-17T23:02:01.550
> 
> 标签：c++, qt, qt4, qt-creator

我正在尝试创建一个程序，等待用户将某些内容输入到行编辑小部件中，当他们按下回车键时，我想将该值与某个预定义的值（例如“1”）进行比较。我似乎遇到的问题是我找不到使用 QStateMachine 进行这项工作的方法。目前，它会等待用户按下回车键，它只是切换到下一个状态，但我希望它只有在输入为“1”时才进入下一个状态。这是我正在使用的代码，感谢您提供的任何帮助。

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    connect(ui->lineEdit, SIGNAL(editingFinished()), this, SLOT(someSlot()));
    setupStateMachine();
}

...

void MainWindow::setupStateMachine()
{
    QStateMachine *machine = new QStateMachine(this);
    QState *s1 = new QState();
    QState *s2 = new QState();
    QState *s3 = new QState();

    s1->assignProperty(ui->label, "text", readFile("intro.txt"));
    s2->assignProperty(ui->label, "text", "In state s2");
    s3->assignProperty(ui->label, "text", "In state s3");

    s1->addTransition(this, SIGNAL(editing()), s2);
    s2->addTransition(this->ui->pushButton, SIGNAL(clicked()), s3);
    s3->addTransition(this->ui->pushButton, SIGNAL(clicked()), s1);

    machine->addState(s1);
    machine->addState(s2);
    machine->addState(s3);
    machine->setInitialState(s1);

    machine->start();

    qDebug() << "State Machine Created";
}

...

void MainWindow::someSlot()
{
    if(ui->lineEdit->text() == "1")
    {
        emit editing();
    }
} 
```

在头文件中：

```
{
...
signals:
    void editing();
...
private slots:
    void someSlot();
...
}; 
```

PS：我意识到信号没有做我想要的，但我不知道使用哪个信号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:21:09.630

也许您可以连接`editingFinished`到自己的插槽。在该插槽中，检查输入是否为“1”。如果是这样，发出一个你传入的新信号，`addTransition`而不是`editingFinished`

要将信号添加到类，请像这样更改类（确保`Q_OBJECT`在类的最顶部声明​​了一个）：

```
signals:
    void mySignalName(); 
```

保证信号受到保护。您不编写函数的主体。这就是 MOC 所做的。因此，当您想在课堂上调用信号时，只需调用：

```
emit mySignalName(); 
```

emit 仅用于代码文档。它的#defined 什么都没有。MOC 将生成的主体`mySignalName`并归结为对您使用 QObject::connect 连接到的插槽的调用。

要为您的班级添加新插槽，请添加以下内容：

```
private slots:
    void mySlotName(); 
```

请注意，您必须编写插槽的主体。

```
void MainWindow::mySlotName()
{
    if(myLineEdit->text() == "1")
        emit mySignalName();
} 
```

# php - Zorba PHP 扩展导致 PHP 崩溃

> ID：14389756
> 
> 赞同：0
> 
> 时间：2013-01-17T23:02:11.183
> 
> 标签：php, zorba

我正在使用[教程](http://www.zorba-xquery.com/html/documentation/2.7.0/zorba/php_windows_tutorial)在我的 Windows 7 系统上试用 Zorba XQuery 处理器，但是当我将此行添加到我的**php.ini**时；

```
extension = zorba_api.dll 
```

并尝试启动 PHP，它会抛出此错误；

![在此处输入图像描述](../Images/0afb3a67350cd5165afd70aadd73e275.png)

我将**zorba_api.dll**从**C:\Program Files\Zorba XQuery Processor 2.7.0\share\php**复制到**C:\Program Files\PHP\ext**文件夹。我需要复制更多文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T15:52:32.180

此错误可能意味着 zorba 扩展已使用与编译 PHP 的版本不同的 Visual Studio 版本进行编译。是否可以让 pecl.net 编译 zorba 扩展？

# php - 需要帮助在 PHP 中格式化目录列表的结果，javascript 树控件

> ID：14389757
> 
> 赞同：2
> 
> 时间：2013-01-17T23:02:12.627
> 
> 标签：php, javascript, jquery, html

我正在尝试使用 PHP 列出一个特定文件夹中的所有文件夹和文件。使用下面的代码，我设法在一个长列表中列出了所有文件和文件夹。现在我真正想做的是列出它们，以便我可以使用 HTML/jquery 将目录结果显示为带有 + 标记的文件夹，以便它们可以展开，但我不知道如何格式化结果PHP 为了做到这一点。

```
 include('include/class.dirlist.php');
 $resources = "/Inetpub/companyweb/resources";
 $dir = getDirectoryListing($resources,"a",1,1,"all",1);

 $i = 0; //for illustrative purposes only 
 foreach ($dir as $item) {
     echo "<b><a href='resources/".$dir[$i]."'>".$dir[$i]."</a></b><br>";
     $i++;
 } 
```

上面的代码将输出如下内容：

FOLDER1
FOLDER1/FILE1.PDF
FOLDER1/FILE2.PDF
FOLDER2
FOLDER2/FILE1.PDF
FOLDER2/FILE2.PDF

以下是我对以下评论的回复：@hek2mgl 这正是我想要做的。我想要一个树型视图。

@popnoodles 如果我能把它变成“ul li”格式，我相信我可以使用它。问题是，我是一个初学者 PHPer ......所以在这里寻找一个可行的解决方案。

@Bjørne Malmanger 这是包含类的内容：

```
function getDirectoryListing($dirname, $sortorder = "a", $show_subdirs = 1,         $show_subdirfiles = 0, $exts = "all", $ext_save = 1) {
// This function will return an array with filenames based on the criteria you can set in the variables
// @sortorder : a for ascending (the standard) or d for descending (you can use the "r" for reverse as well, works the same)
// @show_subdirs : 0 for NO, 1 for YES - meaning it will show the names of subdirectories if there are any
// Logically subdirnames will not be checked for the required extentions
// @show_subdirfiles : 0 for NO, 1 for YES - meaning it will show files from the subdirs
// Files from subdirs will be prefixed with the subdir name and checked for the required extentions.
// @exts can be either a string or an array, if not passed to the function, then the default will be a check for common image files
// If exts is set to "all" then all extentions are allowed
// @ext_save : 1 for YES, 0 for NO - meaning it will filter out system files or not (such as .htaccess)

if (!$exts || empty($exts) || $exts == "") {
   $exts = array("jpg", "gif", "jpeg", "png", "doc", "xls", "pdf", "tif");
}
if ($handle = opendir($dirname)) {
   $filelist = array();
   while (false !== ($file = readdir($handle))) {

       // Filter out higher directory references
       if ($file != "." && $file != "..") {
           // Only look at directories or files, filter out symbolic links
           if ( filetype ($dirname."/".$file) != "link") {
               // If it's a file, check against valid extentions and add to the list
               if ( filetype ($dirname."/".$file) == "file" ) {
                   if (checkFileExtention($file, $exts, $ext_save)) {
                                   $filelist[] = $file;
                   }
               }
               // If it's a directory and either subdirs should be listed or files from subdirs add relevant names to the list
               else if ( filetype ($dirname."/".$file) == "dir" && ($show_subdirs == 1 || $show_subdirfiles == 1)) {
                   if ($show_subdirs == 1) {
                       $filelist[] = $file;
                   }
                   if ($show_subdirfiles == 1) {
                       $subdirname = $file;
                       $subdirfilelist = getDirectoryListing($dirname."/".$subdirname."/", $sortorder, $show_subdirs, $show_subdirfiles, $exts, $ext_save);
                       for ($i = 0 ; $i < count($subdirfilelist) ; $i++) {
                           $subdirfilelist[$i] = $subdirname."/".$subdirfilelist[$i];
                       }
                       $filelist = array_merge($filelist, $subdirfilelist);
                   }

               }

           }
       }
   }
   closedir($handle);

   // Sort the results
   if (count($filelist) > 1) {
       natcasesort($filelist);
       if ($sortorder == "d" || $sortorder == "r" ) {
           $filelist = array_reverse($filelist, TRUE);
       }
   }
   return $filelist;
  }
  else {
    return false;
 }
 }

 function checkFileExtention($filename, $exts, $ext_save = 1) {
 $passed = FALSE;
 if ($ext_save == 1) {
   if (preg_match("/^\./", $filename)) {
       return $passed;
   }
 }
 if ($exts == "all") {
               $passed = TRUE;
   return $passed;
 }
 if (is_string($exts)) {
   if (eregi("\.". $exts ."$", $filename)) {
                   $passed = TRUE;
       return $passed;
   }
  } else if (is_array($exts)) {
   foreach ($exts as $theExt) {
       if (eregi("\.". $theExt ."$", $filename)) {
           $passed = TRUE;
           return $passed;
        }
    }
  }
  return $passed;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:16:18.667

看看[jstree](http://www.jstree.com/)。我想这就是你想要的。（我使用 jstree 完成了它）。Jstree 是一个 javascript 库，可用于控制将 HTML 列表`<ul>, <ol>`（

当然 jstree 只是 javascript 部分。您必须将您的输出`getDirectoryListing()`格式化为 jstree 支持的格式之一。这是目前

*   json
*   XML
*   html

这是一个基本的例子。完成后它将如下所示：

![在浏览器中完成示例](../Images/f759ef9546929572fa58aff4b1dd07e2.png)

您可以玩弄树的打开和关闭节点。

我已将您的目录列表功能更改为为 jstree 生成 JSON 的功能。它实际上来自这个[SO 帖子](https://stackoverflow.com/questions/4987551/parse-directory-structure-strings-to-json-using-php)，以使事情快速工作。谢谢！:) 这里是 php。将其放在您的网络服务器的文件夹中并命名`tree.php`

```
<?php

header('Content-Type: application/json');
echo json_encode(dir_to_jstree_array(__DIR__));

function dir_to_jstree_array($dir, $order = "a", $ext = array()) {

    if(empty($ext)) {
        $ext = array (
            "jpg", "gif", "jpeg", "png", "doc", "xls", "pdf", "tif"
        );
    }

    $listDir = array(
        'data' => basename($dir),
        'attr' => array (
            'rel' => 'folder'
        ),
        'metadata' => array (
            'id' => $dir
        ),
        'children' => array()
    );

    $files = array();
    $dirs = array();

    if($handler = opendir($dir))
    {
        while (($sub = readdir($handler)) !== FALSE)
        {
            if ($sub != "." && $sub != "..")
            {
                if(is_file($dir."/".$sub))
                {
                    $extension = pathinfo($dir."/".$sub, PATHINFO_EXTENSION);
                    if(in_array($extension, $ext)) {
                        $files []= $sub;
                    }
                }elseif(is_dir($dir."/".$sub))
                {
                    $dirs []= $dir."/".$sub;
                }
            }
        }

        if($order === "a") {
            asort($dirs);
        } else {
            arsort($dirs);
        }

        foreach($dirs as $d) {
            $listDir['children'][]= dir_to_jstree_array($d);
        }

        if($order === "a") {
            asort($files);
        } else {
            arsort($files);
        }

        foreach($files as $file) {
            $listDir['children'][]= $file;
        }

        closedir($handler);
    }
    return $listDir;
} 
```

这是基本的 HTML 和 javascript。给它一个正确的名称并将其放在`tree.php`. 我将 jstree 的 json_data 插件与 ajax 一起使用。此外，我正在使用 types 插件为文件夹和文件呈现不同类型的图标。（如果您愿意，也可以为每种文件类型设置一个自定义图标）。您必须在 html 文件旁边放置一个适当的 folder.png 和 image.png。

```
<html>
  <head>
    <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="jstree-v.pre1.0/jquery.jstree.js"></script>
    <script type="text/javascript">

        $(function() {
          $('#dirtree').jstree({
            plugins : ["json_data", "themes", "types"],

            json_data : {
              ajax : {
                'url' : 'tree.php'
              }
            },

            'types': {
              'types' : {

                'folder' : {
                  'icon' : {
                    'image' : 'folder.png'
                  }
                },

                'default' : {
                  'icon' : {
                    'image' : 'image.png'
                  },
                }
              }
            }
          });
        }); 

    </script>
 </head>
 <body>
   <div id="dirtree"></div>
 </body>
</html> 
```

而已！:) 请注意，您有许多配置选项、样式选项和 jstree 插件。你当然会扩展我的例子。

有关 jstree 的安装和文档的信息，请参阅上面的 jstree 项目页面链接。

# actionscript-3 - 如何为 ...params 函数参数设置默认值？

> ID：14389760
> 
> 赞同：0
> 
> 时间：2013-01-17T23:02:27.657
> 
> 标签：actionscript-3, function, parameters, default-value

我有一些实现这个接口的类：

```
function execute(entity:Entity, ...params):void; 
```

没关系，但是，我想要这个：

```
function execute(entity:Entity, ...params = null):void; 
```

因为，不是每个类都需要参数。

它会引发编译错误。

好像我不能在 AS3 中为 ...params 设置默认值。有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:16:12.200

我不知道有什么方法可以在`params`声明时将默认值设置为空数组以外的东西，但解决方法是：

```
 function exec(entity:Entity, ... extraParams)
    {

        // EDIT: strange that you are getting null, 
        // double check your variable names and if needed you can add:
        if(extraParams == null)
        {
            extraParams = new Array();
        }

        if(extraParams.length == 0) // If none are specified
        {
            // Add default params
            extraParams[0] = "dude";
            extraParams[1] = "man";
        }

        // the rest of the function
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:25:20.733

```
function exec(entity:Entity, ...params){
    // Set default values if no params passed:
    params = arguments.length > 1
                 ? params
                 : {foo:'defaultFooVal', bar:'defaultBarVal'};
    // ...
} 
```

# prolog - Prolog - 从嵌套列表中提取数字

> ID：14389764
> 
> 赞同：2
> 
> 时间：2013-01-17T23:02:45.097
> 
> 标签：prolog

我试图编写一个函数`getNumbers(List,Result)`，它`List`是一个列表，他的元素可以是整数或列表列表，例如 -

```
List = [1,[1,2,[3],[4]],2,[4,5]]
List = [1,[1,1,[1],[1]],1,[1,1,[[[[[1]]]]]]]
List = [[4,[[]],2],[[1],[],[1]]]
etc.. 
```

并且输出应该是存储在其中的所有数字`List`，例如 -

```
?- getNumbers([1,[1,2,[3],[4]],2,[4,5]],R).
R = [1,2,3,4,5].
?- getNumbers([1,[1,1,[1],[1]],1,[1,1,[[[[[1]]]]]]],R).
R = [1].
?- getNumbers([],R).
R = [].
?- getNumbers([[4,[[]],2],[[1],[],[1]]],R).
R = [1,2,4]. 
```

到目前为止，我尝试了以下代码 -

```
getNumbers([],Result) :- Result=[],!.
getNumbers([H|Rest],Result) :- getNumbers(Rest,NewResultRest),
    ( atomic(H) ->  
      Result = [H|NewResultRest]    
    ; getNumbers(H,NewResultHead),Result = [NewResultHead|NewResultRest]    ). 
```

但它给出了错误的结果，比如 -

```
 getNumbers([[2],5,7,[3,6,5]],Result).
Result = [[2], 5, 7, [3, 6, 5]]. 
```

似乎该函数不排除`2`或`[2]`任何其他存储在嵌套列表中的数字。

我该如何修复我的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T00:10:05.830

您需要附加嵌套列表：

```
getNumbers([],Result) :- Result=[],!.
getNumbers([H|Rest],Result) :-
    getNumbers(Rest,NewResultRest),
    (  atomic(H)
    -> Result = [H|NewResultRest]
    ;  getNumbers(H,NewResultHead),
       append(NewResultHead, NewResultRest, Result) % only this change
    ). 
```

注意这`[]`是原子的：因此

```
?- getNumbers([[4,[[]],2],[[1],[],[1]]],R).
R = [4, [], 2, 1, [], 1]. 
```

根据您的描述，您应该使用 number/1 来测试元素的类型。改变后

```
?- getNumbers([[4,[[]],2],[[1],[],[1]]],R).
R = [4, 2, 1, 1]. 
```

# tfs - 协助建立团队城市

> ID：14389765
> 
> 赞同：-1
> 
> 时间：2013-01-17T23:02:50.097
> 
> 标签：tfs, continuous-integration, teamcity, teamcity-7.0

这是一个非常初学者的问题。我对团队城市非常陌生，需要帮助来设置它并与 TFS 源代码控制集成以实现 .net c# 解决方案。

我使用 TFS 进行源代码控制，现在正在寻找团队城市来处理持续集成。对于初学者，我只想在用户签入 TFS 时进行基本设置，在团队城市上触发 CI 构建，如果它或相关测试失败，则会发送电子邮件警报。

团队城市服务器和 TFS 服务器可以在同一网络上相互通信。我已经安装了团队城市，但没有进行任何配置。

任何关于如何完成上述建议的基础设置的正确指导的帮助都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:28:49.743

您的要求是 TeamCity 为您服务的基础。要开始配置 TeamCity，请从页面顶部的链接跳转到管理部分，用户界面将指导您很好地创建一个新项目并在该项目中创建一个新的构建配置。

有关更多详细信息，请参阅[TeamCity 官方文档](http://confluence.jetbrains.net/display/TCD7/TeamCity+Documentation)，其中包含[有关在 TeamCity 中配置 TFS 的详细信息](http://confluence.jetbrains.net/display/TCD7/Team+Foundation+Server)。

# javascript - Meteor JS：使用外部脚本

> ID：14389766
> 
> 赞同：47
> 
> 时间：2013-01-17T23:02:55.947
> 
> 标签：javascript, meteor

有一些服务（如 FB like 或 AddThis）提供代码片段。看起来像

```
<div class="service-name" data-something="x"></div>
<script type="text/javascript" src="http://service-domain.com/service-name.js"></script> 
```

好的，很酷，所以通常你将它粘贴到你的 HTML 中并且它可以工作。不是流星。

这是我看到的：

*   `<script>`模板/正文**内部没有加载**——我在资源中没有看到它，Meteor 中的某些东西实际上阻止了浏览器将其识别为 JS 文件
*   它的工作原理`<head>`

现在这里有问题和疑问：

1.  我不想加载它`<head>`——因为速度
2.  即使我从那里加载它——我们也有 QA 和 PROD 环境。他们**必须**从不同的域（如 service-domain-qa.com 与 service-domain.com）加载此脚本

令人惊讶的是，您**不能**在`<head>`.

使用传统框架，这根本不是问题——你可以在任何地方包含脚本，它们只是加载；您可以在*服务器*模板的任何部分使用逻辑/变量。

那么，我应该如何在 Meteor 中做到这一点？让我重复一遍：

*   我需要将一些外部脚本（托管在第 3 方域上）加载到我的应用页面中
*   将此脚本保存到我的项目文件夹中**不是一种选择**
*   脚本路径取决于环境（我们已经有设置系统），所以渲染它的模板的位置应该从代码中传递一些数据

我知道如何通过 Template.created 上的代码（使用 LAB.js 或其他）加载动态脚本来实现这一点，但这太过分了......

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-07-06T19:27:16.533

My solution is use packages. See [https://github.com/meteor/meteor/tree/master/packages/spiderable](https://github.com/meteor/meteor/tree/master/packages/spiderable) for more details.

```
Package.describe({
  summary: "External script"
});

Package.on_use(function (api) {
  api.use(['templating'], 'client');

  api.add_files('external_script.html', 'client');
});

<head><script type="text/javascript" src=""//mc.yandex.ru/metrika/watch.js""></script></head> 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-17T23:10:26.463

`<script>`正文或模板中的标签不由 Meteor 执行，它们被解析然后由 Meteor 的模板系统处理。您不能期望其中任何一个中的脚本标记都能像普通 HTML 页面那样工作。

解决方案是使用模板事件（您可以手动将脚本标签附加到正文或其他内容）或像您说的那样动态加载它。这不是矫枉过正，这就是 Meteor 的工作方式——记住，没有传统的 HTML 页面或正文，只有 Meteor API，而且 Meteor API 规定，为了加载和执行外部脚本，您必须使用适当的 API 方法。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-11-06T18:49:30.910

如果您使用 IronRouter，您可以使用此包加载外部 scipt： [https ://github.com/DerMambo/wait-on-lib](https://github.com/DerMambo/wait-on-lib)

```
Router.map( function () {
  this.route('codeEditor',{
    waitOn: IRLibLoader.load('https://some-external.com/javascript.js')
  });
}); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-01-06T08:13:34.910

为什么不使用 jQuery 的 getscript？

[http://api.jquery.com/jquery.getscript/](http://api.jquery.com/jquery.getscript/)

您可以添加回调函数

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-14T01:48:26.230

您可以使用类似[yepnope](http://yepnopejs.com/)的东西 来异步加载脚本。我在需要时使用它来加载传单。我开始转向通过 yepnope 加载更多脚本，以便我的应用程序在初始页面加载时呈现最低限度。我将 yepnope 的东西放在 Template.created 中。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-20T19:07:09.297

使用 iframe 和公共目录是我用来嵌入脚本代码的一种技巧。这是针对谷歌广告代码的，我这样做是我的主要 html 模板：

```
<iframe src="/gads.html?v={{{unique}}}" seamless width="160" height="600"
 scrolling="no" frameborder="0" marginheight="0" marginwidth="0"
 style="margin:0;padding:0;border:none;width:160px;height:600px"></iframe> 
```

然后在公共目录中放置一个带有我的 google adwords 代码的 gads.html 文件，如下所示：

```
<html>
<head>
<style type="text/css">
* {
margin: 0;
padding: 0;
}
</style>
</head>
<body>
<div>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-54*********";
google_ad_slot = "66******";
google_ad_width = 160;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
</body>
</html> 
```

这有助于在页面上获取代码，尽管它远非理想（一方面，我认为它违反了谷歌的服务条款）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-31T16:25:09.237

我正在使用流星 1.0。我已将所有外部 SCRIPT 标签放在布局模板中标签之前的 DIV 元素中。Meteor 可以毫无问题地识别它们，并且它们是由浏览器加载的。

# c++ - 是否有 O(1) 方法来转换 std::map 进入 std::set

> ID：14389767
> 
> 赞同：1
> 
> 时间：2013-01-17T23:03:01.057
> 
> 标签：c++, stdmap, stdset

我想对 std::map<> 实例的键进行一些设置交集操作，而无需事先将键复制到 std::set<> 中。

它没有记录在 API 中，但是有什么方法可以在 O(1) 时间内从 std::map<> 中提取密钥并将它们放入 std::set<> 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T23:34:08.127

创建一个迭代器适配器，它首先为地图返回并将其与`set_intersection`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T00:14:28.783

首先不，没有`O(1)`从地图中获取一组键的操作。构造集合必须是`Omega(n)`.

但是，您可以`set_intersection`直接在地图和其他范围上执行您想要的操作，无论是什么。未经测试的代码：

```
template <typename InputIterator, typename Map, typename OutputIterator>
void map_set_intersection(InputIterator first, InputIterator last, const Map &m, OutputIterator o) {
    std::set_intersection(
        first, last, 
        m.begin(), m.end(), 
        o, 
        KeyCompare<typename Map::value_type, typename std::iterator_traits<InputIterator>::value_type>()
    );
} 
```

所有的魔法都在 KeyCompare 类型中：

```
template <typename MapValue, typename SetValue>
struct KeyCompare {
    bool operator()(const MapValue &lhs, const SetValue &rhs) {
        return lhs.first < rhs;
    }
    bool operator()(const SetValue &lhs, const MapValue &rhs) {
        return lhs < rhs.first;
    }
}; 
```

`std::set_difference`*被定义为从指定的第一个*范围复制值，在本例中是迭代器定义的范围。它可以做到这一点，前提是它可以按任意顺序将第一个范围内的值与第二个范围内的值进行比较（它可以，这要归功于`KeyCompare`）。这两个范围不需要具有相同的类型，因此您不需要地图中的一组键。

如果您已经在使用 6 参数形式`set_intersection`，那么您需要进行更改`KeyCompare`，以便在将键从映射条目中取出后，它使用您的比较器而不是`<`.

如果您正在使用自定义比较器或重载`operator<` *并且*迭代器范围的值类型与映射的值类型相同，那么这不起作用。`KeyCompare`不能再使用这些类型来计算提供参数的顺序，因此它应该从哪一个中提取`first`。我不认为这是一个非常常见的场景，但我也没有看到使用这种方法来逃避它。您需要 Crazy Eddie 的解决方案，调整地图迭代器。这相当于这个问题：[Iterate keys in a C++ map](https://stackoverflow.com/questions/1443793/iterate-keys-in-a-c-map)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T23:07:41.447

你可以在你的地图上做一个 O(N) 集合的交叉点。请记住，当您遍历映射时，键是按顺序排列的，因此您可以使用非常类似于合并操作的算法...

您所做的就是在每个映射中维护一个迭代器，并递增键最小的那个。如果键相等，您可以添加到 a`deque`或`list`（`vector`在这种情况下，您将增加两个迭代器）。一旦其中一个迭代器到达其映射的末尾，您就完成了。

# c# - 从 ASP.NET WebForms 到 ASP.NET MVC 时维护 URL

> ID：14389771
> 
> 赞同：1
> 
> 时间：2013-01-17T23:03:17.673
> 
> 标签：c#, asp.net-mvc, url-rewriting, asp.net-mvc-routing, url-routing

我正在将旧的 ASP.NET WebForms 应用程序转换为 ASP.NET MVC 4。一切都很好，除了我需要保持与特定 URL 的向后兼容性。我发现[这篇关于使用 UrlRewrite 的好帖子](http://weblogs.asp.net/jgalloway/archive/2010/02/05/using-iis-rewriting-with-mvc-routes-to-keep-your-routes-simple.aspx)，但遗憾的是这不是我可以指望的（这个应用程序被部署到很多服务器上）。在底部，他提到如果您只有一小部分 URL 需要处理，则使用路由，但没有提供任何示例。

由于我只有一个 url 要处理，我认为路由将是一种简单的方法，但我从未处理过除了默认路由之外的任何东西，`/Controller/Action/{id}`所以我正在寻找一种解决方案

1.  没有外部依赖
2.  将适用于旧的蹩脚浏览器
3.  我的应用是否知道这个旧网址并不重要

旧 URI

[https://www.mysite.com/default.aspx?parm1=p1&parm2=p2&etc=soforth](https://www.mysite.com/default.aspx?parm1=p1&parm2=p2&etc=soforth)

新的 URI

[https://www.mysite.com/Home/Index/?parm1=p1&parm2=p2&etc=soforth](https://www.mysite.com/Home/Index/?parm1=p1&parm2=p2&etc=soforth)

背景：这个应用程序被部署到不同位置的许多服务器上。还有其他应用程序（我无法更新）在 Web 浏览器控件中显示“旧 URI”，因此我需要它们在应用程序更新到 asp.net mvc 后继续工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T23:18:10.087

类似以下的东西应该可以工作（未经测试，可能需要使这条路线成为第一条路线之一）：

```
routes.MapRoute(
   "legacyDefaultPage",
   "default.aspx",
   new {Controller = "Legacy", Action="Default"});

class LegacyController {
  ActionResult Default (string param1,...){}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T04:31:09.257

您可以尝试创建一个 httpModule，这将在您的 MVC 应用程序中点击任何路由之前执行。

在您的 http 模块中，如果 seo 很重要，您可以执行[301 或 302 重定向](http://en.wikipedia.org/wiki/URL_redirection)，这将使您更灵活地将所有参数从旧应用程序转换为新应用程序。

```
public class RecirectionModule :IHttpModule{
    public void Init(HttpApplication context)
    {
        _context = context;
        context.BeginRequest += OnBeginRequest;
    }

    public void OnBeginRequest(object sender, EventArgs e)
    {
        string currentUrl = HttpContext.Current.Request.Url.AbsoluteUri;
        string fileExtention = Path.GetExtension(currentUrl);
        string[] fileList= new[]{".jpg",".css",".gif",".png",".js"};

        if (fileList.Contains(fileExtention)) return;

        currentUrl = DoAnyTranformation(currentUrl);
        Redirect(currentUrl);

    }

    private void Redirect(string virtualPath)
    {
        if (string.IsNullOrEmpty(virtualPath)) return;
        _context.Context.Response.Status = "301 Moved Permanently";
        _context.Context.Response.StatusCode = 301;
        _context.Context.Response.AppendHeader("Location", virtualPath);
        _context.Context.Response.End();
    }

    public void Dispose()
    {

    }

} 
```

我认为，如果您需要更改新应用程序中的参数列表并且处理大量路由很快就会变得丑陋，那么进行重定向可能是一种更简洁的解决方案。

# javascript - Jquery / Phonegap / IOS - 声音反应

> ID：14389773
> 
> 赞同：1
> 
> 时间：2013-01-17T23:03:32.600
> 
> 标签：javascript, jquery, ios, html

我们有一个客户要求我们（在短时间内）为音乐艺术家构建一个应用程序 - 通常是基本的东西 - 除了一个功能......

他们希望它能够“收听”并在音乐会上的某些歌曲之间进行检测，以便我们可以触发 jQuery/Javascript 函数，使手机在某首歌曲期间显示某种颜色。它不必实际检测歌曲 - BPM 可能会出现。

更复杂的是，我是一名前端开发人员 - 所以应用程序需要是 HTML5 并使用 Phonegap 编写，应用程序需要是 IOS。

我不知道如何解决这个问题，或者它是否可能——但如果有人有任何想法——请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:17:56.770

使用 Web 工具实现 BPM 分析听起来很可怕......
看看这个库：[https](https://github.com/corbanbrook/dsp.js/) ://github.com/corbanbrook/dsp.js/和这里：http: [//sourceforge.net/projects/beatdetektor/](http://sourceforge.net/projects/beatdetektor/)
不是确定您是否可以实时执行此操作

# expressionengine - 如何在表达式引擎分页链接中包含查询字符串？

> ID：14389774
> 
> 赞同：0
> 
> 时间：2013-01-17T23:03:33.287
> 
> 标签：expressionengine

我正在开发一个表达式引擎站点，并正在尝试修复分页错误。用户执行显示分页结果的搜索。搜索词在查询字符串中，所以我需要做的就是在分页链接中包含查询字符串。但是，我不知道如何在表达式引擎中进行配置。这就是我必须使用的全部内容：

```
{paginate}
  <div class="results-pager">
    Page {current_page} of {total_pages} pages {pagination_links}
  </div>
{/paginate} 
```

我可以通过某种选项`{pagination_links}`将查询字符串包含在它生成的链接中吗？还是我需要自己编写这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:46:18.367

我找到了一种方法。如果您在模板中启用 PHP 代码，您可以手动重新创建 pagination_links 功能并将查询字符串包含在生成的链接中。

替换这个：

```
{pagination_links} 
```

有了这个：

```
{if total_pages > 1}
  <div class="pagination">
    {pagination_links}
      {first_page}<a href="{pagination_url}?<?php echo $_SERVER['QUERY_STRING'] ?>">&lsaquo; First</a>{/first_page}
      {previous_page}<a href="{pagination_url}?<?php echo $_SERVER['QUERY_STRING'] ?>">&lsaquo; Prev</a>{/previous_page}
      {page}
        {if current_page}
          <strong>{pagination_page_number}</strong>
        {if:else}
          <a href="{pagination_url}?<?php echo $_SERVER['QUERY_STRING'] ?>">{pagination_page_number}</a>
        {/if}
      {/page}
      {next_page}<a href="{pagination_url}?<?php echo $_SERVER['QUERY_STRING'] ?>">Next &rsaquo;</a>{/next_page}
      {last_page}<a href="{pagination_url}?<?php echo $_SERVER['QUERY_STRING'] ?>">Last &rsaquo;</a>{/last_page}
    {/pagination_links}
  </div>
{/if} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T06:30:26.720

你可以看看这个免费的附加组件：

[http://devot-ee.com/add-ons/better-pagination](http://devot-ee.com/add-ons/better-pagination)

不确定它是否完全适合您正在做的事情，它可能允许您在不打开 PHP 的情况下做您想做的事情。

# c# - 枚举应包含的项目数量的最佳做法是什么？

> ID：14389775
> 
> 赞同：-2
> 
> 时间：2013-01-17T23:03:34.623
> 
> 标签：c#, enums

我正在开发一个实现工厂模式的项目。工厂使用枚举作为 switch 语句。

枚举中的值对应于数据库表中的 id。表中的项目数 > 30 项，并且还在增长。该表不应增长到超过 100 个项目。

我应该在这种情况下使用枚举吗？我的替代方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:07:54.783

具有不同值的枚举成员的数量受枚举的基础类型（默认为 Int32）限制。无论如何...使用 Int32 枚举，您最多可以有 2^32 个不同的值。例子：

```
public enum MyEnum : byte { /* 256 Distinct Members */ } 
```

但是您可以拥有任意数量的成员，前提是它们都具有相同的值：

```
public enum MyEnum : byte { A, B = A, C = B, ... } 
```

C# 编译器中可能存在一些实现定义的限制，但我希望它依赖于内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:09:07.170

这将成为一个相当长的 switch 语句，但在枚举中使用 100 个元素本身并没有错，而且速度会相当快。

另一种方法可能是填充一个`Dictionary<int, Func<TFactoryResult>>`，但如果不了解您的工厂实现的更多信息，就很难给出建议。枚举很可能总是最快的选择，但不提供最易读的代码。

# r - R在发生状态转换的数据框中找到行？

> ID：14389776
> 
> 赞同：-1
> 
> 时间：2013-01-17T23:03:39.200
> 
> 标签：r, plyr

我有以下数据框，

```
id, date, state
1   2012-01-01 a
1   2012-01-02 a
1   2012-01-03 a
1   2012-01-04 b
1   2012-01-05 b
2   2013-01-01 a
2   2013-01-02 a
2   2013-01-03 b
2   2013-01-04 b 
```

对于每个 id，我想找到状态从 a 变为 b 的日期，然后我希望它作为该 id 的列插入。所以上面的例子会产生

```
id, date, state, changedate
1   2012-01-01 a 2012-01-03
1   2012-01-02 a 2012-01-03
1   2012-01-03 a 2012-01-03
1   2012-01-04 b 2012-01-03
1   2012-01-05 b 2012-01-03
2   2013-01-01 a 2013-01-02
2   2013-01-02 a 2013-01-02
2   2013-01-03 b 2013-01-02
2   2013-01-04 b 2013-01-02 
```

有没有办法通过 plyr 函数甚至在基础 R 中优雅地做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:21:09.670

编辑：正如塞巴斯蒂安提到的，我假设 data.frame 是按 column 排序的`date`。

众多解决方案之一。可能棘手的一点是找到过渡期。这可以在 的帮助下完成`rle`。

```
rle.df <- rle(df$state)
# get indices of a-to-b transition -> 3,7
idx <- cumsum(rle.df$lengths)[c(TRUE, FALSE)]
# get indices of b-to-a transition -> 5,9
idx2 <- cumsum(rle.df$lengths)[c(FALSE, TRUE)]
# construct appropriate lengths -> 5,4
idx2 <- c(idx2[1], diff(idx2))
# do a rep with idx2 fro times and df$date[idx] for value
df$changedate <- unlist(lapply(1:length(idx2), function(vv) {
    rep(df$date[idx[vv]], idx2[vv])
}))

> df
  id.      date. state changedate
1   1 2012-01-01     a 2012-01-03
2   1 2012-01-02     a 2012-01-03
3   1 2012-01-03     a 2012-01-03
4   1 2012-01-04     b 2012-01-03
5   1 2012-01-05     b 2012-01-03
6   2 2013-01-01     a 2013-01-02
7   2 2013-01-02     a 2013-01-02
8   2 2013-01-03     b 2013-01-02
9   2 2013-01-04     b 2013-01-02 
```

使用替代解决方案`data.table`（我刚刚注意到您还有一个`.id.`列，我们可以使用它拆分并应用通过找到的转换索引的日期`rle`）。

```
require(data.table)
rle.df <- rle(df$state)
idx  <- cumsum(rle.df$lengths)[c(TRUE, FALSE)]
idx2 <- cumsum(rle.df$lengths)[c(FALSE, TRUE)]
idx  <- c(idx[1], tail(idx, -1) - head(idx2, -1))

dt <- data.table(df, key="id.")
out <- dt[, `:=`(changedate=date.[idx[id.]]), by=id.]

> out
    id.      date. state changedate
 1:   1 2012-01-01     a 2012-01-03
 2:   1 2012-01-02     a 2012-01-03
 3:   1 2012-01-03     a 2012-01-03
 4:   1 2012-01-04     b 2012-01-03
 5:   1 2012-01-05     b 2012-01-03
 6:   2 2013-01-01     a 2013-01-02
 7:   2 2013-01-02     a 2013-01-02
 8:   2 2013-01-03     b 2013-01-02
 9:   2 2013-01-04     b 2013-01-02 
```

# matlab - 在 MATLAB 中更改极坐标图刻度/径向线的颜色？

> ID：14389777
> 
> 赞同：1
> 
> 时间：2013-01-17T23:03:41.807
> 
> 标签：matlab, plot, polar-coordinates

令人惊讶的是，我无法确定我如何准确地更改刻度线的颜色和/或极坐标图的径向线，请参见下图：

![在此处输入图像描述](../Images/0cc9df143957957454bb08eaac1b2c0b.png)

很简单，我想改变你在这里看到的径向虚线的颜色，比如蓝色或其他东西。我还想更改数字的颜色和您在此处看到的边缘的颜色，即红色。这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T00:12:37.147

在此链接[http://www.mathworks.com/matlabcentral/answers/67](http://www.mathworks.com/matlabcentral/answers/67)中，他们展示了如何删除极坐标图中的每条网格线。

我认为你可以尝试类似的东西，但要删除你只会改变颜色。

我用下面的代码实现了结果：

```
p = polar(1);   % plot a circle with radius = 1;
h = findall(gcf, 'type', 'line'); % find all lines in the current figure
h(h==p) = []; % remove the line you ploted from the list.
set(h, 'Color', 'g'); % make all of them green
T = findall(gcf, 'type', 'text'); % find all text
set(T, 'Color', 'r'); % change its color 
```

请注意，它会更改不是您绘制的每条线的颜色（在示例中，只有 r=1 的圆圈保持不变）。如果您只需要更改网格，则需要细化“findall”函数所做的搜索。有关它的更多信息，请参阅“doc findall”。

# mc - Midnight Commander：如何启用按你输入的过滤行为

> ID：14389781
> 
> 赞同：15
> 
> 时间：2013-01-17T23:04:18.257
> 
> 标签：mc

基本上是在寻找类似于 Total Commander filter-as-you-type 的功能。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-22T22:08:47.477

快速搜索不适合您的需要吗？如果我没记错的话，alt+s 会在 Midnight Commander 中显示“快速搜索”，但现在无法检查。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-22T01:46:08.463

从选项菜单中隐藏命令行（选项 > 布局 > 其他选项 > 命令提示符）。然后`Alt + S`自动显示是否输入任何字符。

[![截屏](../Images/64b499d84cb357672918b21d5fb6552e.png)](https://i.stack.imgur.com/9HIIG.png)

# java - 将字符串列表作为参数传递，更新其所有内容并将其数据保留到 Java 中的主程序

> ID：14389786
> 
> 赞同：0
> 
> 时间：2013-01-17T23:04:48.903
> 
> 标签：java, string, list, parameters, copy

我有一个函数，它接受一个字符串列表作为参数，在函数结束时，我想用新值进行更新，但将其内容保留到主程序中。更具体地说，我创建了另一个字符串列表，并在函数的末尾将所有内容从第二个列表复制到第一个列表，并且我希望第一个列表将新数据“携带”到主程序。Java 是否让我有能力做到这一点？如果没有，还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:13:54.867

答案是肯定的，Java 为您提供了一种方法来做到这一点。

如果您有一个接受字符串列表作为参数的方法，它可能会执行以下操作：

```
public List<String> muckWithStrings(List<String> original)
{
    List<String> newstrings = muckWithTheOriginalStrings(original);
    // You now have your new list of modified Strings
    original.addAll(newstrings);
    return newstrings;
} 
```

这将创建修改后的字符串的新列表，将它们附加到原始列表（调用者将看到），并单独返回新的字符串列表。如果需要，您可以跳过返回列表。

# php - XSS 和 SQLI 中的通用语法

> ID：14389791
> 
> 赞同：0
> 
> 时间：2013-01-17T23:05:21.633
> 
> 标签：php, xss, sql-injection, protection

我正在创建一个函数，它将检查一个字符串（一旦通过该函数发送字符串）以了解 SQLI 和 XSS 攻击中使用的常见语法；问题是，我只知道一些.. 但不是全部，所以我想知道这里的人是否能够给我一些关于这些类型攻击的常见用途的信息/语法。

我的代码如下：

```
function CleanInput ($Arg)
{
    foreach (array("@", "<", ">", "'", "|", "/", "\\", "-", "+", "-", "_", "'") as $value)
    {
        $check = strpos($Arg, $value);
        if ($check !== false)
        {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:50:28.867

输入本身并不是“干净”或“不干净”的。像对待它一样对待它（就像你在这里所做的那样）是解决奇怪的功能问题和安全漏洞的捷径。

相反，请始终牢记发送数据的位置（无论是否是用户输入！），并确保以适合输出的方式修改数据。例如：

*   向 SQL 发送数据时，尽可能使用绑定参数。如果不是，请在将数据插入查询之前应用 SQL 转义。
*   `htmlspecialchars()`输出 HTML 时，在您的数据与其他 HTML 组合的位置使用适当的 HTML 转义函数（如）。
*   生成 JSON 时，使用`json_encode()`. 没有例外。
*   创建 shell 命令时，使用 shell 转义函数来包含非常量数据。

一般来说：在输出上转义数据，而不是在输入上。

# php - 使用 ReflectionClass 的受保护变量

> ID：14389793
> 
> 赞同：0
> 
> 时间：2013-01-17T23:05:52.750
> 
> 标签：php, reflection

我正在尝试通过调用类读取受保护的变量。我受保护的 $test 和新的 ReflectionClass 的问题在哪里？

```
<?PHP
class foo
{
    protected $test = ['foo' => 'foo'];
    public function __construct()
    {
        $class = get_called_class();

        do
        {
            foreach((new \ReflectionClass($class))->getDefaultProperties() as $property => $value)
                var_dump([$class.'::'.$property => $value]);
        }
        while($class = get_parent_class($class));
    }
}

class baz extends foo
{
    protected $test = ['baz' => 'baz'];
}

new baz; 
```

实际的：

```
 ["baz::test"]=>
    ["baz"]=> "baz"
  ["foo::test"]=>
    ["baz"]=> "baz" 
```

预期的：

```
 ["baz::test"]=>
    ["baz"]=> "baz"
  ["foo::test"]=>
    ["foo"]=> "foo" 
```

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:11:14.003

没有问题。父类中的`$test`类变量设置为：

```
array
(
   'foo' => 'foo'
) 
```

继承它的子类会覆盖数组的值（它不会添加到数组中，而是替换所有现有的键/值）：

```
array
(
   'baz' => 'baz'
) 
```

# java - ActionBarSherlock、ViewPager、TabsAdapter 嵌套选项卡片段

> ID：14389796
> 
> 赞同：9
> 
> 时间：2013-01-17T23:06:10.597
> 
> 标签：java, android, actionbarsherlock, fragment

我用 ViewPager 和 TabsAdapter 实现了一个 ActionBarSherlock。它运行良好，但现在我试图从加载到“Tab 1”中的框架中“推送”另一个片段。

行为应该是这样的：

*   我的应用程序中有 3 个选项卡，启动时我看到第一个选项卡，其中有一个带有按钮的片段
*   按下第一个选项卡上的按钮，应替换第一个选项卡上的片段并显示另一个片段

我试图实现这一点，但更换时我有一个黑色片段。

编码：

**FragmentDemoActivity.java**

```
public class FragmentDemoActivity extends SherlockFragmentActivity {
    CustomViewPager  mViewPager;
    TabsAdapter mTabsAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ActionBar bar = getSupportActionBar();
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

        mViewPager = (CustomViewPager)findViewById(R.id.pager);
        mViewPager.setSwipingEnabled(false);

        mTabsAdapter = new TabsAdapter(this, bar, mViewPager);
        mTabsAdapter.addTab(bar.newTab().setText("tab1"),
                FragmentA.class, null);
        mTabsAdapter.addTab(bar.newTab().setText("tab2"),
                FragmentB.class, null);

   setTitle(R.string.app_name);

        if (savedInstanceState != null) {
            bar.setSelectedNavigationItem(savedInstanceState.getInt("tab"));
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("tab", getSupportActionBar().getSelectedNavigationIndex());
    }

    public static class TabsAdapter extends FragmentPagerAdapter
            implements ViewPager.OnPageChangeListener, ActionBar.TabListener {
        private final Context mContext;
        private final ActionBar mBar;
        private final ViewPager mViewPager;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

        static final class TabInfo {
            private final Class<?> clss;
            private final Bundle args;

            TabInfo(Class<?> _class, Bundle _args) {
                clss = _class;
                args = _args;
            }
        }

        public TabsAdapter(FragmentActivity activity, ActionBar bar, ViewPager pager) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
            mBar = bar;
            mViewPager = pager;
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        public void addTab(ActionBar.Tab tab, Class<? extends Fragment> clss, Bundle args) {
            TabInfo info = new TabInfo(clss, args);
            tab.setTag(info);
            tab.setTabListener(this);
            mTabs.add(info);
            mBar.addTab(tab);
            notifyDataSetChanged();
        }

        @Override
        public int getCount() {
            return mTabs.size();
        }

        @Override
        public Fragment getItem(int position) {
            TabInfo info = mTabs.get(position);
            return Fragment.instantiate(mContext, info.clss.getName(), info.args);
        }

        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        }

        @Override
        public void onPageSelected(int position) {
            mBar.setSelectedNavigationItem(position);
        }

        @Override
        public void onPageScrollStateChanged(int state) {
        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            Object tag = tab.getTag();
            for (int i=0; i<mTabs.size(); i++) {
                if (mTabs.get(i) == tag) {
                    mViewPager.setCurrentItem(i,false);
                }
            }
        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {

        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {

        }
    }

} 
```

**片段A.java**

```
public class FragmentA extends Fragment {
    Button button;
    int num;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup group, Bundle saved)
    {
        return inflater.inflate(R.layout.frag_a, group, false);
    }

    @Override
    public void onActivityCreated (Bundle savedInstanceState)
    {
        super.onActivityCreated(savedInstanceState);
        num = 0;
        button = (Button) getActivity().findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                FragmentB f1 = new FragmentB();
                FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
                ft.replace(R.id.pager, f1,"newTag");
                ft.show(f1);
                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
                ft.addToBackStack(null);
                ft.commit();    

            }
        });
    }
} 
```

我是 Android 开发的新手，所以如果有人能够帮助我，我会很高兴。我已经调查了很多时间来寻找解决方案，但结果并不像我预期的那样。

我目前的项目：[http ://cl.ly/3q1f2t1O2Y3j](http://cl.ly/3q1f2t1O2Y3j)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T23:15:57.763

我明白了！

让我解释一下，您需要在要替换的布局上放置一个 id，我的示例：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Framelay"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/txtSearchTopic"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:text="TextView" />

</FrameLayout> 
```

所以我只是把我的： android:id="@+id/Framelay" 然后我可以用这个Id来替换新的Fragment，我的意思是这个Layout里面的所有内容都会被新的Fragment替换，如我打电话给DetailFragment。

```
FragmentManager fragmentManager = getFragmentManager();  
FragmentTransaction fragmentTransaction = fragmentManager  
        .beginTransaction();  
DetailFragment fragment3 = new DetailFragment();  
fragmentTransaction.replace(R.id.Framelay, fragment3);  
fragmentTransaction.commit(); 
```

# java - main() 如何在 Java 中调用非静态网络？

> ID：14389802
> 
> 赞同：1
> 
> 时间：2013-01-17T23:06:31.073
> 
> 标签：java, oop, static

出色地。我是 Java 新手。我知道 main 需要是静态方法。但是我读过静态方法只能调用其他静态方法？那我们怎么可以调用非静态方法呢？它是一个困惑而不是一个问题。例如

```
 public class Function
    {
    public static int side = 10,area,vol;

    public static void main(String args[])
    {
        System.out.println("programme to find area and volume");
        Function fu = new Function();
        fu.calarea();
    }
    public void calarea()
    {
        area = side*side;
        System.out.println("finished calculating area now calling volume");
        calvol();
    }
    public void calvol()
    {
        vol = area*side;
        System.out.println("finished calculating volume now calling display");
        display();
    }
    public void display()
    {
        System.out.println("side of a square ==>"+side);
        System.out.println("area of a square ==>"+area);
        System.out.println("volume of a square ==>"+vol);
    }
    } 
```

在这里， main() 是一个静态方法。那么，它必须只调用静态方法吗？怎么会调用 calarea() 呢？如果我通过创建一个对象是对的？

编辑：

我也是这么想的。而且我知道如何调用静态方法。我只想知道如果可以调用非静态方法（以任何方式），那为什么说静态方法只能调用其他静态方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T23:11:20.970

> 但是我读过静态方法只能调用其他静态方法？

这要么是错误陈述，要么是误读。

“规则”的一个更正确的说法是静态方法不能在没有特定（非空）实例引用的情况下调用实例方法。或者换句话说，`this`在静态方法中无效，因此不能显式或隐式使用它来进行方法调用。

你的例子并没有打破规则......在任何一种形式。它正在使用非空对象引用，并且没有`this`显式或隐式使用。

* * *

大多数其他子问题都由上述“讨论”，但是......

> 如果我通过创建一个对象是对的？

是的。有必要创建对象以获得可用于调用实例方法的对象引用。没有其他方法可以调用实例方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T23:08:20.153

是的，通过使用实例，您可以调用实例方法。

```
calarea() 
```

是实例方法，因此，您需要创建`Function`类的实例并调用`calarea()`该实例引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T23:17:02.517

还有其他口味，但这个应该可以理解。

如果您有一个混合了静态方法和实例方法的类，则静态方法不能调用实例方法。例如

在伪代码中

```
class SomeClass
{
static void IDoSomething()
{
   UDoSomething();  
}

void UDosomething
{
}
} 
```

会给你一个错误但是

```
class SomeClass
{
static void IDoSomething(SomeClass argSomeClass)
{
   argSomeClass.UDoSomething();  
}

void UDosomething
{
}
} 
```

会好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T23:10:54.207

你说的对。您需要创建类函数的实例（对象）。所以正确的代码是：

```
Function f = new Function();
f.calvol(); 
```

# api - Coldfusion Tumblr oAuth 受挫

> ID：14389806
> 
> 赞同：7
> 
> 时间：2013-01-17T23:06:46.417
> 
> 标签：api, coldfusion, oauth, tumblr

我意识到这并不是什么新鲜事，并且已经有很多关于这个主题的帖子。但是，与我正在寻找的内容不完全相关......所以，这里是：

我已经查看了有关此主题的所有其他帖子，但似乎没有什么对我有用。这是我正在做的事情的快速总结：

***我已经在这很长时间了，以至于我忘记了我在哪里 - 我刚刚意识到我的 oauth_signature 现在从我的授权标头中丢失了。我知道它以前在那里...

顺便说一句-我正在使用 Harry Klein 的 CF oauth 应用程序（[http://oauth.riaforge.org/](http://oauth.riaforge.org/)）：

```
<!--- set up the parameters --->
<cfset sConsumerKey = 'xxx'> <!--- Got these from Tumblr for my app --->
<cfset sConsumerSecret = 'xxx'> <!--- Got these from Tumblr for my app --->     
<cfset OAUTH_VERIFIER = 'xxx' /> <!--- Got these when doing oauth registration with tumblr for account --->
<cfset token = 'xxx' /> <!--- Got these when doing oauth registration with tumblr for account --->
<cfset tokenSecret = 'xxx' /> <!--- Got these when doing oauth registration with tumblr for account --->

<!--- set up the required objects including signature method--->
<cfset oReqSigMethodSHA = CreateObject("component", "oauth.oauthsignaturemethod_hmac_sha1")>
<cfset oToken = CreateObject("component", "oauth.oauthtoken").init(sKey = token, sSecret = tokenSecret)>
<cfset oConsumer = CreateObject("component", "oauth.oauthconsumer").init(sKey = sConsumerKey, sSecret = sConsumerSecret)>

<cfset oReq = CreateObject("component", "oauth.oauthrequest").fromConsumerAndToken(
    oConsumer = oConsumer,
    oToken = oToken,
    sHttpMethod = "GET",
    sHttpURL = 'http://api.tumblr.com/v2/user/info')> <!--- For now, just trying to get the user info --->
    <!--- The ultimate goal is to post to differnent blog accounts on tumblr --->

<cfset oReq.setParameter('oauth_verifier',oauth_verifier) /> <!--- Had to manually add in oauth_verifier if it is even needed --->

<cfset oReq.signRequest(
    oSignatureMethod = oReqSigMethodSHA,
    oConsumer = oConsumer,
    oToken = oToken)> <!--- Sign the request --->

<cfhttp url="#oReq.GETNORMALIZEDHTTPURL()#" method="get">
    <cfhttpparam type="header" name="authorization" value="#oReq.TOHEADER()#" />
</cfhttp>

<cfdump var="#cfhttp#" /> 
```

这是我得到的一些内容（我添加了换行符以使其更清晰）：

```
SIGNATUREBASESTRING:
    GET&
    http%3A%2F%2Fapi.tumblr.com%2Fv2%2Fuser%2Finfo&
    oauth_consumer_key%3xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx%26
    oauth_nonce%3D96A76129198ADF9B60874521D3FB718256B2D093%26
    oauth_timestamp%3D1358463090%26
    oauth_token%3Dxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx%26
    oauth_verifier%3xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx%26
    oauth_version%3D1.0 

AUTHORIZATION HEADER:
    OAuth oauth_consumer_key="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    oauth_timestamp="1358463090",
    oauth_version="1.0",
    oauth_nonce="96A76129198ADF9B60874521D3FB718256B2D093",
    oauth_token="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    oauth_verifier="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" 
```

每次我尝试修改任何东西时，它都无法正常工作。我总是从 Tumblr 收到 401 Not Authorized 回复，但没有解释我做错了什么。

我已经在这几天了：请帮忙

* ***2013 年 1 月 24 日编辑*****

```
 1\. Getting the access_token:
    response from Tumblr to auth_token request (Success):
    oauth_token=XXX&
    oauth_token_secret=XXX&
    oauth_callback_confirmed=true

    2\. Using access token to get user info:
    sConsumerKey:
    xxx

    sConsumerSecret:
    yyy

    EndPoint:
    http://api.tumblr.com/v2/user/info

    COMMETHOD:
    get

    token:
    XXX

    tokenSecret:
    XXX

    Signature base string:
    GET&
    http%3A%2F%2Fapi.tumblr.com%2Fv2%2Fuser%2Finfo&
    oauth_consumer_key%3Dxxx&
    oauth_nonce%3DDED2857752C210C71D81DFD549B7B13113DCA50F&
    oauth_signature_method%3DHMAC-SHA1&
    oauth_timestamp%3D1358993908&
    oauth_token%XXX&
    oauth_version%3D1.0

    Signature:
    emffJ8+2QvExJzRH0fgDM8l3jDQ=

    Authorization Header:
    OAuth oauth_consumer_key="xxx"&
    oauth_nonce="DED2857752C210C71D81DFD549B7B13113DCA50F"&
    oauth_signature="emffJ8%2B2QvExJzRH0fgDM8l3jDQ%3D"&
    oauth_signature_method="HMAC-SHA1"&
    oauth_timestamp="1358993908"&
    oauth_token="XXX"&
    oauth_version="1.0" 
```

验证： 1\. OAuth_token 正确。2\. oAuth Header 按字母顺序排序。3\. 签名基本字符串不包含参数，因为没有。4.方法是get。5\. OAuth Header 包含 oauth_signature。

一些问题是： 1\. 我是否需要包含任何其他标头（不确定 CF 是否自动添加任何标头） 2\. 任何人都可以验证我的签名基本字符串吗？3\. 签名基串是否有区分大小写的问题？（或其他任何地方）

***编辑- 2013 年***1 月 27 日 任何人都可以确认此信息（我使用的是真实值，因为在包括应用程序本身后一切都会被重置）：

```
Given:
1\. Signature Base String:

GET&
http%3A%2F%2Fapi.tumblr.com%2Fv2%2Fuser%2Finfo&
oauth_consumer_key%XXX%26
oauth_nonce%3DOAUTH7DC9F837D60483B9D10389C9BB0AEAF9%26
oauth_signature_method%3DHMAC-SHA1%26
oauth_timestamp%3D1359320053%26
oauth_token%XXX%26
oauth_version%3D1.0

2\. Signing Key (consumer secret & auth_token_secret):
XXX&
XXX

Is this signature correct?

3\. Signature:
2n+xbj9gbOrADeaQ3nORKNhOTUg=    

Is this Authorization Header correct:

4\. Authorization header (FYI- there is a space after each comma- is that ok?
And- is the encoding on the Signature ok?):
(Also, I've tried this in alphabetical order and not- same result)

OAuth oauth_signature="2n%2Bxbj9gbOrADeaQ3nORKNhOTUg%3D", 
oauth_token="XXX", 
oauth_consumer_key="XXX", 
oauth_nonce="OAUTH7DC9F837D60483B9D10389C9BB0AEAF9", 
oauth_signature_method="HMAC-SHA1", 
oauth_timestamp="1359320053", 
oauth_version="1.0" 
```

我希望有人可以确认这是否正确。在后一种情况下，我会稍微调整一下，并希望再次检查。提前谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:06:39.153

我没有专门使用 Tumblr API，但对您的问题有一些想法。

你没有说你到底想做什么。您是否成功收到访问令牌？或者您正在尝试使用请求令牌来获取用户信息？- 这行不通。

oauth_verifier 仅在获取访问令牌的过程中需要 - 在使用普通 API 功能（如获取用户信息）时不需要。

在我看来，您似乎正在尝试使用请求令牌来访问用户信息，并且还不必要地将 oauth_verifier 添加到 url。您可能需要阅读 OAuth 1.0a 流程。

希望这可以帮助。

更新：

这是 OAuth 1.0a 流程的示意图。![在此处输入图像描述](../Images/724d685d101f97df2c25e1406d113042.png)

[原始图表图像在这里](http://s3.pixane.com/Oauth_diagram.png)

更新后更新

你说你正在使用这里的库[http://oauth.riaforge.org/](http://oauth.riaforge.org/)但我没有在你的代码中看到它。再一次 - 我没有专门使用 Tumblr API，但使用上述库最简单的调用我喜欢这样：

```
<cfscript>
    consumerKey = 'xxx';
    consumerSecret = 'yyy';
    accessToken = 'xxxyyy';
    accessSecret = 'yyyxxx';

    //consumber object
    oauthConsumerCFC = CreateObject("component", "OAuth.oauthconsumer");
    oTumblrConsumer = oauthConsumerCFC.init(sKey = consumerKey, sSecret = consumerSecret);

    //token object
    oauthTokenCFC = CreateObject("component", "OAuth.oauthtoken");
    oTumblrAccessToken = oauthTokenCFC.init(sKey = accessToken, sSecret = accessSecret);

    //request object
    oauthRequestCFC = CreateObject("component", "OAuth.oauthrequest");
    oTumblrReqest = oauthRequestCFC.fromConsumerAndToken(
        oConsumer   : oTumblrConsumer,
        oToken      : oTumblrAccessToken,
        sHttpMethod : "GET",
        sHttpURL    : "http://api.tumblr.com/v2/user/info"
    );

    //signature method
    oauthSigMethodSHA = CreateObject("component", "OAuth.oauthsignaturemethod_hmac_sha1")

    //sign request
    oTumblrReqest.signRequest(
        oSignatureMethod    : oauthSigMethodSHA,
        oConsumer           : oTumblrConsumer,
        oToken              : oTumblrAccessToken
    );

    //signed url
    signedURL = oTumblrReqest.getString();
</cfscript>

<cfhttp method="get" url="#signedURL#" result="requestResult" charset="utf-8" redirect="no" />

<cfdump var="#requestResult#"> 
```

您可以查看 OAuth 库存档中的其他示例。

希望这可以帮助。

# asp.net-mvc - 用于 MVC 站点的面包屑和导航的站点地图

> ID：14389807
> 
> 赞同：2
> 
> 时间：2013-01-17T23:06:47.703
> 
> 标签：asp.net-mvc, asp.net-mvc-4, navigation, sitemap, breadcrumbs

我正在为一个既有产品、类别又有传统页面的电子商务网站创建一个 mvc 4 c# web 应用程序。

该站点具有全局和本地导航以及面包屑导航。

为了帮助管理导航，我正在考虑使用可以填充并用于驱动导航和面包屑的站点地图提供程序。

是否有任何简单的方法可以做到这一点，使用站点地图，自定义填充来管理站点的导航和面包屑。可以通过 url 了解用户在网站上的位置。其他解决方案中的任何示例，说明它们是如何实现的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T00:28:59.240

查看 nuget 包 mvc 站点地图提供程序。它开箱即用。教程在这里[http://edspencer.me.uk/2011/02/10/mvc-sitemap-provider-tutorial/](http://edspencer.me.uk/2011/02/10/mvc-sitemap-provider-tutorial/)

我们将它用于我们所有 MVC 站点的菜单和面包屑

# c# - 从 View First 更改为 ViewModel First - 如何处理构造函数依赖注入

> ID：14389816
> 
> 赞同：1
> 
> 时间：2013-01-17T23:08:09.580
> 
> 标签：c#, ninject, mvvm-light

我们的新项目从 View first 模式开始，使用 ViewModelLocator 将视图与视图模型结合起来。

我想更改为 ViewModel 第一模式。

这是我的视图模型构造函数：

```
public DeviceSelectionViewModel(IDataModel dataModel, IMessenger messenger)
{
    if (dataModel == null) throw new ArgumentNullException("dataModel");
    if (messenger == null) throw new ArgumentNullException("messenger");

    Selector = new PlantDataTemplateSelector();
    PlantSelector = new PlantNodesSelector();
    Plants = new List<Plant>(0);

    messenger = messenger;
    messenger.Register<PlantDataLoadedMessage>(this, m => DispatcherHelper.CheckBeginInvokeOnUI(() => OnPlantDataLoaded(m.Plants)));

    RefreshData(_dataModel);
} 
```

下面是我现在如何首先使用 ViewModel 选择合适的 ViewModel。

```
public class MainViewModel : Module
{

    public MainViewModel()
    {
        SelectedView = new DeviceSelectionViewModel();
    }

    public ViewModelBase SelectedView { get; set; }

} 
```

首先使用 View，我从未通过代码直接调用 ViewModel，因此构造函数依赖注入工作正常。

现在我通过控制器 ViewModel 调用 ViewModel，它需要 ViewModel 构造函数的 2 个参数。

在控制器视图模型中保存引用并将它们传递给构造函数是否正确？我在这里遗漏了一些关于 DI 在这种情况下如何工作的东西？

我仍然将这些部分与 DI(Ninject) 和 MVVM 放在一起，所以请善待:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:17:31.860

我们有同样的问题。

您有以下选择：

*   `MainViewModel`创建`DeviceViewModel`提供所需参数的值

*   `MainViewModel`已经解决了`DeviceViewModel`

`DeviceViewModel`第一个变体在仅针对 View 绑定公开的情况下增加耦合。如果`MainViewModel`与之通信，`DeviceViewModel`那么耦合已经隐含，除非通过某个接口`MainViewModel`看到`DeviceViewModel`不可避免地需要第二个选项。

第一种方法的另一个问题是，在某些情况下，嵌套 VM 可能需要更多值来创建它，因为父 VM 需要。
这可以通过扩展父 VM 构造函数以包含这些附加参数来解决。但是当（尽管从未在实践中）构建复杂的虚拟机图时，根虚拟机的构造函数可能会变得臃肿。

我们现在有两种选择。

我们所有的 ViewModel 都继承自`ViewModelBase`抽象类。它有几个重载的构造函数，其中大多数`IViewModelFactory`作为输入。所以我们可以要求工厂创造我们的`ViewModel`需求。Wee 决定不担心返回的类型，只返回创建的 ViewModel 的类型，只封装它的创建。所以这不是真正的DI。

我们也使用 Messanger，但我们的 ViewModel 不能显式发送消息，只能订阅消息。我们故意这样做是为了限制特定 VM 可以发送（甚至订阅）的一组消息。

# list - 函数式编程中的部分求和（递归）

> ID：14389822
> 
> 赞同：0
> 
> 时间：2013-01-17T23:09:03.670
> 
> 标签：list, recursion, functional-programming, ml

> **可能重复：**
> [标准 ML 中的部分总和？](https://stackoverflow.com/questions/14388412/partial-sum-in-standard-ml)

我是函数式编程的新手，我有一个任务来计算列表的部分总和。例如 - psum [1,1,1,1,1]；val it = [1,2,3,4,5]：int 列表

到目前为止，这是我的代码。但是我的函数只是按原样返回列表。

```
 fun ppsum2([])=[]
| ppsum2(x::L) = x::ppsum2(L);

 exception Empty_List;

fun psum(L) : int list = 
if L=nil then raise Empty_List
else psum2(L);

psum([2,3,4]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T01:53:44.187

您可以查找 Haskells`scanl1`函数的源代码，并将其转换为 ML。

这样，你就不用学习函数式编程，而是学习媒体能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T20:37:48.360

由于这看起来像家庭作业，我希望这很简单：

```
 fun psum2 [] total = []  
   | psum2 (h::t) total = (total+h) :: psum2 t (total+h)

 fun psum lst = psum2 lst 0 
```

# c++ - 合并两个二叉搜索树

> ID：14389825
> 
> 赞同：0
> 
> 时间：2013-01-17T23:09:10.233
> 
> 标签：c++, data-structures, merge, binary-search-tree

> **可能重复：**
> [我如何合并两个二叉树](https://stackoverflow.com/questions/7152470/how-i-can-merge-two-binary-trees)

我是树代码的新手，有人要求我编写一个代码，通过编写一个函数来合并两个二叉搜索树

```
void mergeBst (BST & othertree) 
```

此函数将接收另一个 Bst 并将该树中的所有非冗余值插入到当前树中，您能告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:36:55.083

使用两棵树创建两个排序列表。这将是 O(m+n)。然后合并两个保持顺序的排序列表。(O(m+n)) 使用合并的列表创建组合树。(O(m+n))

或者简单地为输入树中的每个节点，找到将节点插入源树的位置。然后插入它。

[我如何合并两个二叉树](https://stackoverflow.com/questions/7152470/how-i-can-merge-two-binary-trees)

[如何有效地合并两个 BST？](https://stackoverflow.com/questions/1008513/how-to-merge-two-bsts-efficiently)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T23:19:01.490

将树 B 合并到树 A ( `A.mergeBst(B)`)：

比较 B 的根和 A 的根。
如果 B 的根更大，则合并`B.left`到 A，其余的 B 到`A.right`。
如果小于，则合并`B.right`到 A 中，将 B 的其余部分合并到`A.left`.
如果它们相等，则合并`B.left`到`A.left`，`B.right`到`A.right`，并丢弃 B 的根。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T23:24:37.583

考虑两个二叉搜索树：

1.  **Source** - 您将在其上迭代的 BST
2.  **Target** - 您希望添加源值的 BST

有一个非常简单的算法。

**对于源**搜索中的每个“值”，如果它们在**目标**中，则丢弃它们，如果不插入它们。

编辑：“迭代”我的意思是：[http ://en.wikipedia.org/wiki/Tree_traversal](http://en.wikipedia.org/wiki/Tree_traversal)

预购迭代：

1.  访问根。
2.  遍历左子树。
3.  遍历右子树。

# mysql - 如何在我的 Ruby on Rails 网站中使用此搜索功能避免 SQL 注入？

> ID：14389827
> 
> 赞同：0
> 
> 时间：2013-01-17T23:09:15.247
> 
> 标签：mysql, ruby-on-rails, sql-injection

提前感谢您提供的任何帮助！我已经查看了有关 Stack Overflow 的类似文章以及这些文章：

*   [http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)
*   [这容易发生SQL注入吗？](https://stackoverflow.com/questions/12127496/is-this-prone-to-sql-injection)
*   [http://www.codeproject.com/Articles/16994/Use-SQL-Parameters-to-Overcome-Ad-Hoc-Performance](http://www.codeproject.com/Articles/16994/Use-SQL-Parameters-to-Overcome-Ad-Hoc-Performance)

但是，我对 MySQL 非常陌生，并且正在使用由另一个开发团队创建的 Ruby on Rails 网站。我只是无法根据我的情况拼凑不同的文章。

我知道我的代码中存在 SQL 注入漏洞，我需要使用参数。我只是不确定如何使用我的代码来做到这一点。我在下面包含了它的一部分：

从我的 search.html.erb 中，SELECT 语句读取：

```
@office_matches = Masterlocation.paginate_by_sql("select * from mylocations where #      {search_string} order by nickname asc",  :page => params[:page], :per_page => 20) 
```

然后，在 search_controller.rb 中，它显示：

```
def results
@search_string = ""

@first_term = 'y'
      params[:search_terms_new] = "something in here so loop works"
    if params[:search_terms_new] != ""

# debugger

if params[:city] != ""
  @search_string << "and city like '%#{params[:city]}%' "
  if @first_term == 'y'
    @search_string = @search_string.gsub('and ', " ")
    @first_term = 'n'
  end
end

if params[:search][:state] != ""
  @search_string << "and state = '#{params[:search][:state]}' "
  if @first_term == 'y'
    @search_string = @search_string.gsub('and ', " ")
    @first_term = 'n'
  end
end 
```

我应该如何更改此代码以防止 SQL 注入攻击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:41:02.167

我认为您应该重构使用模型范围的方法。

首先将基于作用域的函数或作用域放入模型中。这是我的模型之一，我排除了一些与此示例无关的位。下面你会看到我有两个功能；一种按 account_grouping 搜索，另一种按帐户搜索。

account_grouping 函数与下拉框一起使用，其中下拉框中的第一项是“全部”，而帐户搜索是文本搜索字段。

```
class CostTypeAllocation < ActiveRecord::Base

  attr_accessible :fiscal_year_id, :fiscal_period_id, :cost_centre_id, :account_grouping, :account_code, :account, :fixed_percentage,
    :marginal_percentage, :incremental_percentage,  :non_applicable_percentage

  scope :in_sort_order, order("fiscal_year_id DESC, fiscal_period_id DESC, account_code")

  # Allow for searching by Account Grouping
  def self.search_account_grouping(account_grouping)
    if account_grouping
      case account_grouping
      when 'all'
        scoped
      else
        where("account_grouping = ?", account_grouping)
      end
    else
      scoped
    end

  end

  # Search the text of the account
  def self.search_account(account)
    if account
      where("account LIKE ?", "%#{account.downcase}%")
    else
      scoped
    end
  end
end 
```

现在我的控制器中处理搜索的功能。

```
class Admin::CostTypeAllocationsController < ApplicationController
  before_filter :authenticate_user!
  def index
    @search_account_grouping = params[:search_account_grouping] || 'all'
    @search_account = params[:search_account]
    @cost_type_allocations = CostTypeAllocation.search_account_grouping(@search_account_grouping).search_account(@search_account).in_sort_order.paginate(:page => params[:page], :per_page => 10)

  end
end 
```

所以控制器或参数中没有 SQL。一切都封装在模型中应有的位置。分页由 will_paginate gem 处理。

* * *

回复您的评论代码在哪里并不重要，但是最好将所有数据访问保留在模型层中。

您的主要问题是在字符串中使用 #{params[:city]} 。用户在参数中输入的任何内容都将放入您的 SQL 中，因此允许 SQL 注入攻击。where('city like ?', "%#{params[:city]}%") 是安全的，因为 rails 会在构造 where 子句之前过滤掉参数中的任何 SQL。

为 where 城市和 where 州设置一个范围，就像我为 where 帐户设置的那样；一旦你有了这些，你就可以去 model.cityscope(params[:city]).statescope(params[:state]) 并且rails会根据需要将它们链接在一起。

我想您需要将范围放在具有城市和州的任何模型中。

[请参阅http://guides.rubyonrails.org/security.html](http://guides.rubyonrails.org/security.html)上的安全指南

根据您的评论，我认为这就是您可能正在寻找的。

在你的模型中

```
def self.search_city(city)
    if city
        where ("city LIKE ?", "%#{city}%")
    else
        scoped
    end
end

def self.search_state(state)
    if state
        where ("state LIKE ?", "%#{state}%")
    else
        scoped
    end
end 
```

在你的控制器中

```
@collection_for_view = Model.search_city(params[:city]).search_state(params[:state]) 
```

在每种情况下，如果参数已设置，搜索函数将返回 where 过滤器，如果参数为空，则返回所有记录。

# html - 控制特定元素布局的正确方法？

> ID：14389833
> 
> 赞同：0
> 
> 时间：2013-01-17T23:09:42.487
> 
> 标签：html, css

我正在设计一个特定的表单，左侧的字段集与右侧的三个字段集一样高。

我用不同的方法创建了 3 个 jsfiddles：

黑客攻击：http `<br>`: [//jsfiddle.net/pdgreen/GjdRj/](http://jsfiddle.net/pdgreen/GjdRj/)

CSS 兄弟选择器：http: [//jsfiddle.net/pdgreen/GjdRj/1/](http://jsfiddle.net/pdgreen/GjdRj/1/)

ID：http: [//jsfiddle.net/pdgreen/GjdRj/3/](http://jsfiddle.net/pdgreen/GjdRj/3/)

解决办法是`<br>`充当稻草人。不应该认真对待。我喜欢 CSS 兄弟选择器解决方案，因为它不需要 HTML 中的任何特殊内容，但在复杂性方面它很快就会失控。使用 ID 是否正确？我想这是最直接的，但感觉不对。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:19:39.090

为什么不使用`nth-child(n)`？[我的你的 jsFiddle 的叉子](http://jsfiddle.net/TCLaW/1/)

基本思想是：

```
.container > fieldset.fsGroup:first-child {
height:20em;
}

.container > fieldset.fsGroup:nth-child(2) {
    height:5em;
}
... 
```

# c# - 处理即发即弃电子邮件中发生的错误

> ID：14389838
> 
> 赞同：0
> 
> 时间：2013-01-17T23:10:00.393
> 
> 标签：c#, exception, asynchronous, exception-handling

这更像是一个基于意见的问题。我有这样的情况，我在服务器上运行 WCF 应用程序，该服务器定期以防火方式发送一系列电子邮件。换句话说，用户点击客户端发送，然后他可以关闭客户端并回家。让服务器端应用程序自动发送所有电子邮件。我的问题是处理发送这些电子邮件时发生的错误的最佳方法是什么？
我一直在考虑实施的方法是将所有错误存储在数据库中，然后在用户下次登录时检查错误并返回一个列表（如果有）。

这个问题有点开放式抱歉。但我希望有人可以就如何处理这个问题给我任何其他想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:39:46.857

您将不得不为用户维护某种逻辑会话，这或多或少是您打算做的。如果您的数据库中有一个一流的交付失败实体，您以后可以使用该数据库进行分析，或者您可以将会话错误聚合到一个 XML 块中，这将很容易发送到客户端应用程序进行解释。XML 的无定形 blob 方法的优点是，一旦系统投入生产并且 IT 对数据库模式更改感到厌烦，您可以修改 XML 的模式而无需咨询它们。

# ruby-on-rails - 设计管理员角色：PG::Error：错误：关系“管理员”已经存在

> ID：14389841
> 
> 赞同：4
> 
> 时间：2013-01-17T23:10:17.853
> 
> 标签：ruby-on-rails, postgresql, devise

在使用用户成功配置设计后，我现在尝试添加管理员角色以准备使用 rails_admin。

我按照这些说明（https://github.com/plataformatec/devise/wiki/How-To:-Add-an-Admin-role）添加了要设计的管理员角色，即使生成的迁移看起来与说明。然后我运行“bundle exec rake db:migrate”只是为了得到错误：

```
PG::Error: ERROR:  relation "admins" already exists 
```

在这一点上，我还没有尝试安装 rails_admin，因为我想首先让设计完全工作。

当我以前没有管理员模型时，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T23:46:59.823

感谢 wildplasser 的解决方案：运行 db:drop -> db:create -> db:migrate 重置数据库！

# php - 爆炸后字符编码变化

> ID：14389843
> 
> 赞同：2
> 
> 时间：2013-01-17T23:10:28.990
> 
> 标签：php, utf-8, character-encoding, ascii, explode

我正在尝试这个脚本，但字符编码不断变化：

```
 $v1 = "text1";
    $v2 = "text2";
    $v3 = "text3";

    $result = encrypt($v1 . ":" . $v2 . ":" . $v3, SALT);
    $result = decrypt($result , SALT);
    list($v1, $v2, $v3) = explode(":", $result);
    echo mb_detect_encoding($v1); // gives ASCII
    echo mb_detect_encoding($v2); // gives ASCII
    echo mb_detect_encoding($v3); // gives UTF-8 <<<< 
```

但是通过添加另一个 var 它给出：

```
 $v1 = "text1";
    $v2 = "text2";
    $v3 = "text3";
    $result = encrypt($v1 . ":" . $v2 . ":" . $v3\. ":COTROLFLAG", SALT);
    $result = decrypt($result , SALT);
    list($v1, $v2, $v3, $v4) = explode(":", $result);
    echo mb_detect_encoding($v1); // gives ASCII
    echo mb_detect_encoding($v2); // gives ASCII
    echo mb_detect_encoding($v3); // gives ASCII <<<<
    echo mb_detect_encoding($v4); // gives ASCII 
```

谁能帮我？

这些是加密和解密函数：

```
 function encrypt($str, $key)
    {
        $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
        $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
        $block = mcrypt_get_block_size('des', 'ecb');
        if (($pad = $block - (strlen($str) % $block)) < $block) {
            $str .= str_repeat(chr($pad), $pad);
        }
        $result = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $str, MCRYPT_MODE_ECB, $iv));
        return $result;
    }
    function decrypt($str, $key)
    {
        $str = base64_decode($str);
        $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
        $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
        $str = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $str, MCRYPT_MODE_ECB, $iv);
        $block = mcrypt_get_block_size('des', 'ecb');
        $pad = ord($str[($len = strlen($str)) - 1]);
        if ($pad && $pad < $block && preg_match('/' . chr($pad) . '{' . $pad . '}$/i', $str)) {
            return substr($str, 0, strlen($str) - $pad);
        }
        return $str;
    } 
```

* * *

在第一个答案之后，我知道我应该在哪里寻找解决方案..

我发现这是垫和剥离：

```
function addpadding($string, $blocksize = 32){
    $len = strlen($string);
    $pad = $blocksize - ($len % $blocksize);
    $string .= str_repeat(chr($pad), $pad);
    return $string;
}
function strippadding($string){
    $slast = ord(substr($string, -1));
    $slastc = chr($slast);
    $pcheck = substr($string, -$slast);
    if(preg_match("/$slastc{".$slast."}/", $string)){
        $string = substr($string, 0, strlen($string)-$slast);
        return $string;
    } else {
        return false;
    }
} 
```

修改后的加解密函数：

```
function encrypt($str, $key)
{   
    global $domain;
    $key = base64_decode($key);
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    setcookie("IV_CODE", $iv, time()+86400, "/", $domain);//more security

    $enc = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, addpadding($str), MCRYPT_MODE_CBC, $iv));
    return $enc;
}
function decrypt($str, $key)
{
    $str = base64_decode($str);
    $iv = (isset($_COOKIE['IV_CODE'])) ? base64_decode($_COOKIE['IV_CODE']) : 0;
    if ($iv != 0) {
        $key = base64_decode($key);
        $dec = strippadding(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $str, MCRYPT_MODE_CBC, $iv));    
        return $dec;
    }
    return false;
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:46:37.417

这与爆炸无关，这是您的加密和解密功能。我会冒险猜测并说这个

```
if (($pad = $block - (strlen($str) % $block)) < $block) {
    $str .= str_repeat(chr($pad), $pad);
} 
```

[**与php.net 上这篇文章**](http://php.net/manual/en/function.mcrypt-decrypt.php#105985)`AES_256`中提到的内容有关。（您可能也应该记住它所说的内容）[](http://php.net/manual/en/function.mcrypt-decrypt.php#105985)**`MCRYPT_RIJNDAEL_128`**

 **但是，函数中的代码有很多错误`decrypt()`。例如，如果填充长度为 ，则您的正则表达式模式很容易被破坏`27`。它也不应该是不区分大小写的。但是，仅提取子字符串并使用`==`like进行比较可能更容易而且肯定更快

```
$substr = substr($str, -$pad);
if ($pad && $pad < $block && $substr == str_repeat(chr($pad), $pad)) {
    return substr($str, 0, -$pad);
} 
```**

# xaml - 将不在列表中的对象绑定到 Telerik RadCartesianChart

> ID：14389845
> 
> 赞同：0
> 
> 时间：2013-01-17T23:10:43.437
> 
> 标签：xaml, mvvm, binding, telerik-charting

我在尝试将 RadCartesianChart 绑定到不同对象时遇到问题。我正在尝试创建一个简单的条形图，显示 3 个对象中每个对象的贷款金额。我正在使用 MVVM 模式，并且 DataContext 确实有我的 3 个对象（Current、Proposed、PayDown）可用。我想在 XAML 中设置绑定。这是我目前拥有的：

```
 <telerikChart:RadCartesianChart Width="500" >

                            <chartView:BarSeries ItemsSource="{Binding CurrentLoan}" ValueBinding="LoanAmount" CategoryBinding="Name"/>
                            <chartView:BarSeries ItemsSource="{Binding Proposed}" ValueBinding="LoanAmount" CategoryBinding="Name"/>
                            <chartView:BarSeries ItemsSource="{Binding PayDown}" ValueBinding="LoanAmount" CategoryBinding="Name"/>

                            <telerikChart:RadCartesianChart.HorizontalAxis>
                                <chartView:CategoricalAxis/>
                            </telerikChart:RadCartesianChart.HorizontalAxis>

                            <telerikChart:RadCartesianChart.VerticalAxis>
                                <chartView:LinearAxis/>
                            </telerikChart:RadCartesianChart.VerticalAxis>

                        </telerikChart:RadCartesianChart> 
```

加载应用程序后，它显示添加了“无数据系列”。如果我将对象扔到一个列表中，并将每个 BarSeries 的项目源设置为该列表中的一个对象，它就没有问题。关于我做错了什么的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:49:13.693

BarSeries.ItemsSource 属性的类型为 IEnumerable（请参见[此处](http://www.telerik.com/help/wpf/p_telerik_windows_controls_chartview_chartseries_itemssource.html)）。这就是为什么当您将项目放入列表时它会起作用的原因。您没有显示您的视图模型，但看起来它公开了您的三个业务模型对象（Current、Proposed、PayDown），并且假设这些对象没有实现 IEnumerable。

您可能想要执行类似于[此处](http://www.telerik.com/help/wpf/radchartingkit-series-barseries.html)示例中的操作，使用三个 CategoricalDataPoint 项设置 BarSeries 的 DataPoints 属性，这些项的值绑定到视图模型中的三个对象。

或者，您可以将三个视图模型属性放入 xaml 中的 CompositeCollection 作为 ItemsSource。

# javascript - 使用对象在 JavaScript 中添加多个“公共函数”

> ID：14389846
> 
> 赞同：2
> 
> 时间：2013-01-17T23:10:45.463
> 
> 标签：javascript, class

众所周知，在 JavaScript 中没有实际的`Classes`.

但是，您可以使用一个简单的函数来创建一个类似于 setup 的类。

前任：

```
var Person = function(name){//class like function
    this.name = name;//public 

    var display = function(text){//private
        return text;
    }

    this.getDressed = function(){//public
        return display(this.name + " needs to get dressed.");
    }

};
var person = new Person("John"),
    name = person.name,//returns "John"
    dressed = person.getDressed();//returns "John needs to get dressed",
    show = person.display("Hello");//throws error "Uncaught TypeError: Object [object Object] has no method 'display'" because there is no such function because it was private. 
```

我的“类”将有很多功能，我想知道是否有办法做类似的事情（我知道这不起作用）：

```
this = {
  fun1: function () {},
  fun2: function () {},
  fun3: function () {}
} 
```

因为我发现这样做：

```
this.fun1 = function(){};
this.fun2 = function(){};
this.fun3 = function(){}; 
```

是相当丑陋的。有没有办法将我的所有功能保存在一个对象中并附加到`this`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:43:29.050

如果您不需要访问私人成员，您可以这样做：

```
function Person(){
    //stuff
}

Person.prototype = {
    fun1:function(){},
    fun2:function(){},
    //etc
}; 
```

您仍然可以`this`从原型函数中访问。

或者，您可以执行以下操作：

```
function Person(name){
   var display = function(){//stuff};

   return {
       name: name,
       fun1: function(){},
       fun2: function(){}
   };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T23:18:54.420

你可以这样做：

```
var funcs = {
  fun1: function () {},
  fun2: function () {},
  fun3: function () {}
}

// Simple combiner
for (var f in funcs) {
  if (funcs.hasOwnProperty(f)) {
    this[f] = funcs[f];
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T23:16:42.110

你基本上已经明白了。

在您的 Person 示例中，只需将正确的上下文应用于您的`getDressed`函数：

```
var that;
var Person = function(name){//class like function
    that = this; 
};
show = person.prototype.display.call(that, "Hello"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T23:19:55.523

`$.extend(Person.prototype, yourthisobject);`如果您想保留**this**对象中包含的所有内容，则可以使用。

# actionscript-3 - 错误 1067：无效的隐式强制转换为类？

> ID：14389853
> 
> 赞同：0
> 
> 时间：2013-01-17T23:11:21.800
> 
> 标签：actionscript-3, implicit, coercion

我有一段代码创建了一个我称之为 Line 的对象的实例。

```
var velLine:Line;
if(/*some conditions*/)
    velLine = new Line(0, 0, x, y); 
```

x 和 y 取自程序中代表玩家的对象（它应该是视频游戏）。它们是 Number 类型。

显示的第三行抛出错误：1067：将 Line 类型的值隐式强制转换为不相关的类型 Class

知道是什么原因造成的吗？顺便说一句，Line 构造函数的参数都是 Number 类型

编辑：更多代码，希望这会有所帮助

```
//point for the center of the player
            var pCenter:Point = new Point(p.x + 38, p.y + 38);

            //First bounds check the endpoints
            //If you're hitting an endpoint, bounce off like it's a circle
            //return false in this case so that the program doesn't trigger 2 simultaneous collisions
            var velLine:Line, perpenLine:Line;
            if(distBetweenPoints(pCenter, new Point(l.x1, l.y1))){
                velLine:Line = new Line(0, 0, p.velVector.x, p.velVector.y);
                perpenLine:Line = new Line(l.x1 - 10, l.y1 - (-1 / velLine.m) * 10, l.x1 + 10, l.y1 + (-1 / velLine.m) * 10);
                operateCollision(p, perpenLine);
                trace("hit an end point");
                return false;
            }else if(distBetweenPoints(pCenter, new Point(l.x2, l.y2))){
                velLine:Line = new Line(0, 0, p.velVector.x, p.velVector.y);
                perpenLine:Line = new Line(l.x2 - 10, l.y2 - (-1 / velLine.m) * 10, l.x2 + 10, l.y2 + (-1 / velLine.m) * 10);
                operateCollision(p, perpenLine);
                trace("hit an end point");
                return false;
            } 
```

# c# - 从 MemoryStream 打印 pdf 文档

> ID：14389855
> 
> 赞同：0
> 
> 时间：2013-01-17T23:11:26.570
> 
> 标签：c#, pdf, itextsharp

我需要打印一个我已更改的 pdf 文档，而不将其保存为新的 pdf 文档。下面的代码可以正常工作。但是，我想以完全不同的方式做到这一点，并且我同时有大脑滞后并且看不到解决方案。

**我的代码示例**

```
byte[] result;

using (MemoryStream ms = new MemoryStream())
{
    PdfReader pdfReader = new PdfReader("c:\\templatePdf.pdf");
    PdfStamper pdfStamper = new PdfStamper(pdfReader, ms);

    /* abbreviated but here I alter the template pdf */

    pdfStamper.FormFlattening = true;
    pdfStamper.Close();
    result = ms.GetBuffer();
}

/* Instead of saving a new file I would rather like to print
   the altered template pdf in memory and then discard it */
using (FileStream fs = File.Create("C:\\Test.pdf"))
{
    fs.Write(result, 0, (int)result.Length);
}

Process process = new Process();
process.StartInfo.FileName = "C:\\Test.pdf";
process.StartInfo.Verb = "printto";
process.StartInfo.Arguments = "\"" + ppr_PrinterDropDown.Text + "\"";
process.Start();
File.Delete("C:\\Test.pdf"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:18:36.317

如果您使用的是基于文件的 API，那么在没有文件的情况下您将很难做到。您*也许*可以设置一个命名管道服务器，但坦率地说，这是一个巨大的小提琴。但是，我很想四处寻找具有打印支持的完全托管的 PDF 库。*但最终......文件系统真的*有什么危害？可能不会很多。不过，我*可能会*建议一些调整：

1.  使用临时区域 ( `Path.GetTempPath()`)，而不是`C:\Test`
2.  在删除文件之前等待该过程完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T17:08:25.317

首先我们需要写入我们的内存流，然后在内存流方法“WriteTo”的帮助下，我们可以写入页面的响应，如下面的代码所示。

```
 MemoryStream filecontent = null;
   filecontent =//CommonUtility.ExportToPdf(inputXMLtoXSLT);(This will be your MemeoryStream Content)
   Response.ContentType = "image/pdf";
   string headerValue = string.Format("attachment; filename={0}", formName.ToUpper() + ".pdf");
   Response.AppendHeader("Content-Disposition", headerValue);

   filecontent.WriteTo(Response.OutputStream);

   Response.End(); 
```

FormName 是给定的文件名，此代码将通过调用 PopUp 使生成的 PDF 文件可下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T19:34:52.990

这很简单。困难的部分是获取有关打印状态完成和总页码的有用信息。

```
var pq = LocalPrintServer.GetDefaultPrintQueue();
var theJob = pq.AddJob();
try{
    using(var js = theJob.JobStream){
        var buffer = File.ReadAllBytes("yourPathToPdf");
        js.Write(buffer,0,buffer.Length);
    }
    var done=false;
    while(!done)
    {
        pq.Refresh();
        theJob.Refresh();
        done = theJob.IsCompleted || theJob.IsDeleted || theJob.IsPrinted;
    }
}
catch(Exception ex){
    //handle this
}
finally{
    theJob?.Dispose();
    pq?.Dispose();
} 
```

当然，这是假设您的打印机具有原生 PDF 支持。否则，您将不得不自己在客户端上完成渲染工作，并且不能将其作为原始流发送。

# firefox - Firefox 中奇怪的“加载”错误（Drupal 站点在浏览器顶部显示加载栏）

> ID：14389857
> 
> 赞同：1
> 
> 时间：2013-01-17T23:11:46.743
> 
> 标签：firefox, drupal, progress-bar, loading

我希望有人可以帮我解决这个奇怪的错误。我不知道这可能是什么。

我们有一个用 PHP 构建的[站点，它使用 Drupal 作为 CMS。](http://www.lambdalegal.org)（更多[信息](http://builtwith.com/lambdalegal.org)）。

我办公室的某个人遇到了这个问题：当她使用 Firefox ESR 导航到我们的主页时，她在浏览器顶部看到一个蓝色/灰色的加载栏，并且页面每秒开始重新加载。它会不断重新加载，直到您关闭浏览器。加载栏似乎从未取得任何进展。

当她导航到其他网站时，她似乎没有遇到这个问题。

她正在运行 Windows Vista。

![加载条](../Images/7b64e24a0199c816f166968f2e8c2df4.png)

我无法在我们办公室的任何其他机器上使用 Firefox 重现该问题。我也无法在她的计算机上用 Internet Explorer 或 Chrome 重现这个问题，尽管她声称她在 IE 和家里的 MacBook 上遇到了同样的事情。

我们尝试禁用她的浏览器插件，但似乎没有帮助。这可能与她的浏览器设置有关，但我想在我注销之前排除任何潜在的网络问题。

我尝试使用 Inspect Element，但页面重新加载太快，所以我无法让它工作。错误控制台非常快地滚动了一堆错误，但我抓住了它们的屏幕截图。不断重复的错误是：“未捕获的异常：错误：http://static.ak.facebook.com 获取属性 Proxy.InstallTrigger 的权限被拒绝[。](http://static.ak.facebook.com) ”

![在此处输入图像描述](../Images/f38132fe756620d9a616a8a2e5c2e94f.png)

谢谢你的帮助！如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:17:08.217

看起来像是第 3 方 cookie 问题之类的，不完全确定。在右侧的 National Sponsors 框下方，应该有一个“在 Facebook 上查找我们”框，其中包含其他喜欢该页面的人。你必须做一些研究，但从消息来看，她的浏览器似乎阻止了 Facebook 做某事。我“认为”这与 cookie 有关，但我不确定。但是，看到该框不在您的屏幕截图中，并且错误来自 static.ak.facebook.com，几乎可以肯定是问题所在。

在我的窗口中，我得到以下信息：

```
FB.getLoginStatus() called before calling FB.init().
FB.init has already been called - this could indicate a problem 
```

我从未使用过 Facebook 插件，所以我不知道，但我猜它可能在页面上设置不正确。我想这个用户有一个问题，因为 Firefox 处理 cookie 或 facebook 访问的方式。我正在尝试重现该问题。

编辑：我还注意到你有两个`<div id="fb-root"></div>`元素。我知道这是一个糟糕的 HTML，不知道它会如何影响您的 Facebook 插件。这个 forge.typo3.org/issues/36363 页面描述了一个处理元素定位方式的问题，你的看起来不错，但它引导我检查你的页面并找到这两个元素。显然 fb-root div 是敏感的。无论哪种方式`javascript + two elements with the same id = disaster.` 虽然，屏幕顶部的栏很奇怪，但仍然可能与这个 facebook 问题无关。具有相同问题的其他用途并未描述页面重新加载或类似情况。

# c# - 为什么要在存储库中包含 Repo.SaveChanges() 方法？

> ID：14389858
> 
> 赞同：4
> 
> 时间：2013-01-17T23:11:48.337
> 
> 标签：c#, entity-framework, repository-pattern

我正在与另一位开发人员讨论是否要`repo.SaveChanges()`在我们的 Entity Framework 5 存储库中公开一个方法。

我们正在考虑有一个自动保存这样的更改的仓库（快速而肮脏的例子）：

```
public class Repo {
    private OurEfContext _context = new OurEfContext();

    public void PersistCustomer(Customer cust)
    {
        // update customer code here
        _context.SaveChanges(); //  <-- is this okay?
    }
} 
```

我们正在考虑的另一个选项是公开一个单独的 Repo.PersistChanges() 方法，如下所示：

```
public class Repo {
    private OurEfContext _context = new OurEfContext();

    public void PersistCustomer(Customer cust)
    {
        // update customer code here
        // no call to _context.SaveChanges();
    }

    public void PersistChanges()
    {
        _context.SaveChanges();
    }
} 
```

我见过的大多数例子都使用第二种模式。一种模式比另一种更“正确”吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T23:15:02.183

每次更改后保存会阻止您保存批量实体。在某些图形结构中，这可能是一个正确性问题，在其他情况下，它只会增加 CPU 负载。的成本`SaveChanges`不仅仅是写作，还包括遍历加载到上下文中的实体。

为什么要*针对*实体框架工作？做，它想让你做的事：保存批次并`SaveChanges`在对实体进行所有更改后最后调用。

该方法`PersistCustomer`被错误地命名为：它持久化所有内容，而不仅仅是客户。您不能使用 EF 持久化单个实体。您的抽象（存储库）已损坏。

人们经常将 EF 包装在一个不添加任何功能但删除功能的通用存储库中。这对我来说从来没有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T23:38:00.497

我倾向于支持第二种方法。

第一个可能会“隐藏”保存操作，并且对用户来说看起来更好，但不要忘记您正在失去对保存操作的控制。如果您发现自己更新了多个实体，这将导致多个单独更改的开销，而不是让它们一次执行——这意味着更多的执行时间。

尽管它可能感觉像冗余地调用“SaveChanges”，但第二种方法将允许您一次保存多个更改**= 没有开销。**

我发现通过消除作为不必要的行为来提高性能的能力来限制自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-02T19:05:05.877

我转向第一种方法有两个原因：

1）有时（不经常）我忘记调用`SaveChanges()`方法。例如，当我还必须提交一个事务（或者我保存了更改但忘记提交事务）并且我不理想的测试没有捕捉到这种错误时（类似于你不`Validate()`每次都调用函数的方法您更改了业务实体中的某些内容，因为您可能忘记调用它（即使这不是唯一的原因））。

2）存储库接口可以在内存存储库中转换（用于测试目的）并且没有任何调用意义`SaveChanges()`，这可能会造成混淆，因为标准集合没有这种方法并且应该为用户隐藏实现。

如果我需要添加一个集合，我可以在存储库中添加另一个方法`Import(List<Customer> customers)`执行`foreach`并在此之后调用`SaveChanges()`。这对用户来说也很清楚，存在一些优化的方法。

如果我需要对多个存储库执行多个操作，我可以将所有操作包装在一个事务中（每个微小的更改都可以锁定在关系数据库中以避免不一致或死锁，直到事务没有作为一个整体提交）。

但我不认为第一种或第二种方法更好，两者都有权衡，可能是个人喜好问题？

# c# - 从 Form 轴转换为 Picturebox 轴

> ID：14389863
> 
> 赞同：0
> 
> 时间：2013-01-17T23:12:12.640
> 
> 标签：c#, picturebox, converters

[![图片](../Images/ad590f97ba078863bd989c4ef178761b.png)](https://i.stack.imgur.com/ZdN9g.png)

我需要将轴从默认轴（黑色）转换为位于 panel1（AutoSize）上的图片框轴（红色）。任务是在世界和窗口屏幕中显示光标位置。我尝试了很多与`PictureBox.Location`/ `Cursor.Position`/ `Panel.Location`etc的组合，但无法获得红色轴值。希望你能帮我解决这个问题。

到目前为止的代码：

```
 private void pictureBox1_MouseMove_1(object sender, MouseEventArgs e)
    {
        corX = panel1.Location.X + Cursor.Position.X - 1000;
        corY = -panel1.Location.Y - pictureBox1.Size.Height + Cursor.Position.Y + 1000;
        mousePositionX.Text = "Window Position:{X=" +corX.ToString()+'}' + ' '+"{Y="+corY.ToString()+'}';
        screen.Text = "World Postion:" + Form1.MousePosition.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:35:00.080

两个窗口的左上角为 0,0，右下角宽度 -1，高度 - 1

所以缩放将是答案

如果您希望两个窗口中的位置是相同的屏幕坐标，windows 已经为您做到了...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:28:35.367

对于 y 它是

```
 -y+pictureBox1.Bottom 
```

其中 y 是鼠标在该黑色窗口内的 y 坐标。对于 x 它是：-x+pictureBox1.Left

# javascript - Javascript/HTML5 - 使用 WASD 制作画布动画以围绕矩形移动。无法实现 A 和 W 键

> ID：14389864
> 
> 赞同：2
> 
> 时间：2013-01-17T23:12:17.927
> 
> 标签：javascript, html5-canvas, dom-events

我正在制作一个简单的画布，用户使用 WASD 分别向上、向左、向下、向右移动一个矩形。动画适用于 S 和 D 键，但是当我尝试使用 a 键时它不起作用，我不知道为什么。下面是我的代码。

```
//event listener
window.addEventListener("keydown", onKeyDown, false);
window.addEventListener("keyup", onKeyUp, false);

function onKeyDown(event){
  var keyCode = event.keyCode;
  switch(keyCode){
    case 68:  //d
        keyD = true;
    break;
    case 83:  //s
        keyS = true;
    break;
    case 63:  //a
        keyA = true;
    break;
  }
}
function onKeyUp(event){
  var keyCode = event.keyCode;
  switch(keyCode){
    case 68:  //d
        keyD = false;
    break;
    case 83:  //s
        keyS = false;
    break;
    case 63: //a
        keyA = false;
    break;
  }
}

//neccessary variables
var tickX = 10;
var tickY = 10;

var keyW = false;
var keyA = false;
var keyS = false;
var keyD = false;

//main animation function
function drawStuff(){
window.requestAnimationFrame(drawStuff);
var canvas = document.getElementById("myCanvas");
var c = canvas.getContext("2d");

c.clearRect(0,0,500,500);
c.fillStyle = "blue";
c.fillRect(tickX,tickY,100,100);

if(keyD == true){
    tickX+=5;
}
if(keyS == true){
    tickY+=5;
}
if(keyA == true){
    tickX--;
}
  }
  window.requestAnimationFrame(drawStuff); 
```

这是递减tickX的问题吗？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T23:33:55.980

您缺少一些您需要的案例陈述。我相信你的一些案例编号也不正确。试试这个可运行的片段：

```
(function() {
  var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
    window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
  window.requestAnimationFrame = requestAnimationFrame;
})();

//event listener
window.addEventListener("keydown", onKeyDown, false);
window.addEventListener("keyup", onKeyUp, false);

function onKeyDown(event) {
  var keyCode = event.keyCode;
  switch (keyCode) {
    case 68: //d
      keyD = true;
      break;
    case 83: //s
      keyS = true;
      break;
    case 65: //a
      keyA = true;
      break;
    case 87: //w
      keyW = true;
      break;
  }
}

function onKeyUp(event) {
  var keyCode = event.keyCode;

  switch (keyCode) {
    case 68: //d
      keyD = false;
      break;
    case 83: //s
      keyS = false;
      break;
    case 65: //a
      keyA = false;
      break;
    case 87: //w
      keyW = false;
      break;
  }
}

//neccessary variables
var tickX = 10;
var tickY = 10;

var keyW = false;
var keyA = false;
var keyS = false;
var keyD = false;

//main animation function
function drawStuff() {
  window.requestAnimationFrame(drawStuff);
  var canvas = document.getElementById("myCanvas");
  var c = canvas.getContext("2d");

  c.clearRect(0, 0, 800, 800);
  c.fillStyle = "blue";
  c.fillRect(tickX, tickY, 100, 100);

  if (keyD == true) {
    tickX += 1;
  }
  if (keyS == true) {
    tickY += 1;
  }
  if (keyA == true) {
    tickX--;
  }
  if (keyW == true) {
    tickY--;
  }
}
window.requestAnimationFrame(drawStuff);
```

```
<!DOCTYPE html>
<html>
<head></head>
<body>
  <canvas id="myCanvas" width='800' height='800'></canvas>
</body>
</html>
```

# linux - 检查特定用户名密码过期脚本

> ID：14389867
> 
> 赞同：0
> 
> 时间：2013-01-17T23:13:08.907
> 
> 标签：linux, shell, unix, ksh

我以前从未发布过，但我经常在这里搜索，你们通常都非常有帮助。

我遇到了用户密码过期的问题，并且由于我不定期检查 /var/cron/log，我从不知道这些用户即将过期，从而导致某些夜间作业无法运行。

使用此脚本，我希望能够检查这些特定用户的密码是否过期并向我们自己发送邮件提醒。

我在网上看到了很多例子，但是我有一个借用或编辑我看不懂的代码的事情，因为我想了解我在写什么，以及代码在做什么，可以帮助我更好地学习。

下面是我以一种我可以理解和使用的方式编写的一些代码，但它似乎不起作用，因为我仍然会收到一封电子邮件给每个管理员用户，说用户名将过期，即使我知道这不是真的。

有什么建议么？对不起，如果这很长

代码：

```
#Author:Emmanuel Iroanya Jr
#Edited: 
#Date:December 20th, 2012
#Purpose: The purpose of this is to check the Shadow table for the epoch value and warn the users / Email of Password Expiration  seven days in advance
ID=`id | cut -d ' ' -f 1`
if [[ "${ID}" != "uid=0(root)" ]]
then
   echo "You Need To Be Root To Run This Script, Please and Thank You"
   exit 1
fi
export Shadow=/etc/shadow
EpochSh=`perl -e 'print time, "\n"'`
export Hostname=`hostname`
#Our SSE Email Address that will get notification
export Email="emmanuel@mycompany.com"
for line in `cat $Shadow | grep adm`
do
 echo $line
done >passFile.txt
for i in `cat passFile.txt`
do
User=`echo $i |cut -d ':' -f 1`
MaxDay=`echo $i | cut -d ':' -f 5`
echo "$MaxDay"
Epoch=`echo $i |cut -d ':' -f 3`
Eval=`$MaxDay+$Epoch-$EpochSh`
echo "$Eval"
                 if [[ $Eval -lt 7 ]]
                 then
                 echo "Password for unix user $User on `hostname` is going to expire in less than a week. Please change it ASAP" | mailx -s 'Password Expiration ' $Email
                 elif [[ $Eval -le 0 ]]
                 then
                 echo "PASSWORD FOR USER $User HAS EXPIRED.PLEASE CHANGE IT ASAP TO AVOID PRODUCTION CRON JOBS FROM FAILING AND THE RESULTING LATE NIGHT CALLS" | mailx -s 'Password Expiration ' $Email
                 fi
done 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:29:59.300

@ZaSter 感谢您的帮助，我最终拆分了表达式，请参阅下面的完整代码：

```
#!/bin/ksh -x
#Author:Emmanuel Iroanya Jr
#Date:December 20th, 2012
#Purpose: The purpose of this is to check the Shadow table for the epoch value and warn the users / Email of Password Expiration  seven days in advance
ID=`id | cut -d ' ' -f 1`
if [[ "${ID}" != "uid=0(root)" ]]
   then
   echo "You Need To Be Root To Run This Script, Please and Thank You"
   exit 1
fi
export Shadow=/etc/shadow
export EpochSh=`perl -e 'print time, "\n"'`
export Hostname=`hostname`
#Our SSE Email Address that will get notification
export Email="mygroup@mycompany.com"
for line in `cat $Shadow | grep adm`
do
 echo $line
done >passFile.txt
for i in `cat passFile.txt`
do
User=`echo $i |cut -d ':' -f 1`
MaxDay=`echo $i | cut -d ':' -f 5`
echo "$MaxDay"
Epoch=`echo $i |cut -d ':' -f 3`
echo "$Epoch"
Eval1=`expr $MaxDay + $Epoch`
Eval2=`expr $EpochSh / 86400`
Eval=`expr $Eval1 - $Eval2`
#export Eval=$(echo '( $MaxDay + $Epoch ) - ( $EpochSh / 86400 ) ' | bc)
echo "$Eval"
             if [[ $Eval -lt 7 ]]
             then
             echo "Password for unix user $User on `hostname` is going to expire in less than a week. Please change it ASAP" | mailx -s 'Password Expiration ' $Email
             elif [[ $Eval -le 0 ]]
             then
             echo "PASSWORD FOR USER $User HAS EXPIRED.PLEASE CHANGE IT ASAP TO AVOID PRODUCTION CRON JOBS FROM FAILING AND THE RESULTING LATE NIGHT CALLS" | mailx -s 'Password Expiration ' $Email
             fi
done 
```

但是，我的最后一个也是最后一个问题是如何处理如下用户名，其中使用 passwd -x -1 将密码设置为永不过期。所以 MaxDay 变量是空白的，这就是导致它们都发出警报的原因，它得到一个空白值传递它，并且数字显然会低于 7 或 0 并导致电子邮件

例子：

```
+ + cut -d : -f 1
+ echo testingadm:.ezNz7T6WZLK.:15730::::::
User=newadm
+ + cut -d : -f 5
+ echo testingadm:.ezNz7T6WZLK.:15730::::::
MaxDay=
+ echo
+ + cut -d : -f 3
+ echo testingadm:.ezNz7T6WZLK.:15730::::::
Epoch=15730
+ echo 15730
15730
+ + expr + 15730
expr: syntax error
Eval1=
+ + expr 1359133813 / 86400
Eval2=15730
+ + expr - 15730
expr: syntax error
Eval=
+ echo
+ [[  -lt 7 ]]
+ mailx -s Password Expiration  mygroup@mycompany.com
+ hostname
 + echo Password for unix user newadm on cmap01 is going to expire in less than a week. Please change it ASAP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T21:11:26.527

您收到每个管理员的电子邮件的原因是线路中存在问题：

```
Eval=`$MaxDay+$Epoch-$EpochSh` 
```

这是试图将“Eval”变量转换为由变量 $MaxDay、$Epoch 和 $EpochSh 恰好是所形成的命令的结果。在我的情况下，结果证明`99999+13937-1358541158`这不是一个命令，因此 Eval 设置为 null 始终小于 7。因此始终发送有关密码在不到一周内到期的电子邮件。

这里有更多改进脚本的建议。如果这是一个 Linux 系统，那么从影子文件中解析记录是不正确的。“MaxDay”，即必须更改密码的天数，应从字段编号 4 而不是 5 开始设置。请注意，如果 MaxDay 为 99999 或 0，则密码不会过期。“Epoch”，表示上次更改密码的日期和时间，应取自字段编号 2 而不是 3。计算“Eval”变量的等式也应更改为：

```
eval Eval=`echo '( $MaxDay + $Epoch ) - ( $EpochSh / 86400 ) ' | bc` 
```

这将返回密码过期的天数。

# php - php 回显文件 url 并从结果中删除破折号和 .php

> ID：14389870
> 
> 赞同：1
> 
> 时间：2013-01-17T23:13:22.250
> 
> 标签：php, arrays, strip

我有一个 php 脚本，它将回显文件夹中的文件列表并在我的页面上随机显示它们。

目前它显示文件的网址，例如：what-c​​an-cause-tooth-decay.php

Qusetion：有没有办法从结果中删除破折号 - 和 .php 以便显示：

**什么会导致蛀牙**而不是**what-c​​an-cause-tooth-decay.php**

```
<?php 

if ($handle = opendir('health')) {
    $fileTab = array();
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != "..") {
            $fileTab[] = $file; 
        }
    }
    closedir($handle);
    shuffle($fileTab);
    foreach($fileTab as $file) {
        $thelist .= '<p><a href="../health/'.$file.'">'.$file.'</a></p>';
    }
}
?>
<?=$thelist?> 
```

谢谢

```
<?php 

if ($handle = opendir('health')) {
    $fileTab = array();
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != "..") {
            $fileTab[$file] = strtr(pathinfo($file, PATHINFO_FILENAME), '-', ' '); 
        }
    }
    closedir($handle);
    shuffle($fileTab);
    foreach(array_slice($fileTab, 0, 10) as $file) {
        $thelist .= '<p><a href="../health/'.$file.'">'.$file.'</a></p>';
    }
}
?>
<?=$thelist?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:32:13.993

问题有两个方面：

1.  从文件中删除扩展名，
2.  用空格替换破折号。

以下内容对您来说应该很好：

```
$fileTab[] = strtr(pathinfo($file, PATHINFO_FILENAME), '-', ' '); 
```

也可以看看：[`strtr()`](http://www.php.net/strtr) [`pathinfo()`](http://www.php.net/pathinfo)

**更新**

从我收集的另一个答案中，您还希望选择一组随机的 10 个文件来显示；下面的代码应该做到这一点：

```
foreach(array_slice($fileTab, 0, 10) as $file) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:15:51.477

这是你要找的吗？

```
$str = 'what-can-cause-tooth-decay.php';
$str = str_replace('.php', '', str_replace('-', ' ', $str));
echo $str;
//what can cause tooth decay 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T23:16:55.420

```
<?php 

if ($handle = opendir('health')) {
    $fileTab = array();
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != "..") {
            $fileTab[] = preg_replace('/\.php/', '', preg_replace('/-/i', ' ', $file));
        }
    }
    closedir($handle);
    shuffle($fileTab);
    foreach($fileTab as $file) {
        $thelist .= '<p><a href="../health/'.$file.'">'.$file.'</a></p>';
    }
}
?>
<?=$thelist?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T23:20:06.230

你可以试试：

```
$string = 'what-can-cause-tooth-decay.php';
$rep = array('-','.php');
$res = str_replace($rep,' ', $string); 

var_dump($res); 
```

输出：

```
string 'what can cause tooth decay ' (length=27) 
```

# java - User 对象或 java 对象的变化以及对 Redis 缓存数据的影响

> ID：14389871
> 
> 赞同：0
> 
> 时间：2013-01-17T23:13:37.163
> 
> 标签：java, redis

我有当前存储在 Redis 中的用户对象的数据。

我向 User 对象添加了更多属性。

我想将更改部署到 Web 应用程序服务器。

Redis 会移除旧对象并构建新对象吗？

我可以采取哪些步骤使当前的用户对象不受影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T02:35:54.167

所以我吸取了教训。我有两个正在访问 redis 缓存的应用服务器。当我部署更改时。在部署过程中，一台服务器获得了新代码，而另一台服务器获得了旧代码。所以对于一些用户对象存在不匹配并且用户对象完全从缓存中删除。如果 redis 缓存被多于一台服务器使用，则所有服务器都需要首先关闭。更新所有这些，然后再次将它们全部带回来。

# batch-file - 批处理：获取上一个目录中文件夹的完整路径？

> ID：14389872
> 
> 赞同：2
> 
> 时间：2013-01-17T23:13:39.190
> 
> 标签：batch-file, directory

我正在尝试获取目录层次结构中上一级的文件夹的路径并将其设置为变量。

我现在有：

```
set LOCALFOLDER=%project.root%\builds\%BUILDFOLDER% 
```

其中 %project.root% 是项目目录的完整路径（在批处理字符串中？）。

让我们说`%project.root%`是`"C:\Hardware\project"`。

我想回到`%project.root%`(ie `C:\Hardwre`) 的一级并将该路径存储在一个变量中。有办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T08:26:57.607

路径操作变得有点混乱。一种选择如下：

```
set "project.root=C:\Hardware\project"
set "X=%project.root%"
:l
if "%X:~-1%"=="\" goto al
set "X=%X:~0,-1%"
goto l
:al
set "X=%X:~0,-1%"
set "project.parent=%X%"
echo %project.parent% 
```

依次删除最后一个字符，直到`\`删除 a。

如果您正在处理文件系统中的实际路径，我会说您使用以下`pushd`方法：

```
pushd %project.root%
cd ..
set project.parent=%CD%
popd 
```

这会临时设置您的当前目录，存储路径并返回。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-18T01:15:19.647

这很简单：

要在变量中获取当前目录，只需说 set /a VARIABLE=cd 要返回一个级别说： cd ..

现在如果你说 "set /a VARIABLE=cd" 它被设置到上一个目录

# css - li.current-menu-item 的 Wordpress 菜单类未应用

> ID：14389879
> 
> 赞同：0
> 
> 时间：2013-01-17T23:14:00.277
> 
> 标签：css, wordpress, menu

我正在为[http://digitaldemo.net/vintage/about/](http://digitaldemo.net/vintage/about/)上的客户创建一个 Wordpress 网站，我即将完成。我遇到的唯一问题是当我在给定页面上时没有应用 li.current-menu-item 类。

例如，在上面的 URL 上，关于菜单项应该有一个深灰色的背景，而不是图标后面的白色“聚光灯”。

这是我的导航的 CSS：

```
/* Navigation */

.topnav {
    width:960px ;
    position:absolute ;
    top:0 ;
    left:0 ;
    z-index:5000 ;
    text-align:center ;
}

ul.menu {
    margin-left:0 ;
    padding-left:0 ;
    list-style-type:none ;
}

.menu li {
    display:inline-block ;
}

.menu li {
    margin:0px 12px 12px 12px ;
    height:130px ;
    width:130px ;
}

.menu li a {
    font-family:ParkLaneNF ;
    color:#000000 ;
    font-size:20px ;
    font-weight:normal ;
    text-align:center ;
    text-decoration:none ;
    text-shadow:1px 1px 3px #333333 ;
    display:inline-block ;
    line-height:130px ;
    height:76px ;
    width:130px ;
    padding-top:54px ;
}

.menu li.home {
    background:url("images/homepage-icon.png") no-repeat center ;
}

.menu li.home:hover, .menu li.home .current_page_item {
    background:url("images/homepage-icon-over.png") no-repeat center ;
}

.menu li.blog {
    background:url("images/blog-icon.png") no-repeat center ;
}

.menu li.blog:hover, .menu li.blog .current-menu-item {
    background:url("images/blog-icon-over.png") no-repeat center ;
}

.menu li.store {
    background:url("images/store-icon.png") no-repeat center ;
}

.menu li.store:hover, .menu li.store .current_page_item {
    background:url("images/store-icon-over.png") no-repeat center ;
}

.menu li.about {
    background:url("images/about-icon.png") no-repeat center ;
}

.menu li.about:hover, .menu li.about .current-page-item {
    background:url("images/about-icon-over.png") no-repeat center ;
}

.menu li.contact {
    background:url("images/contact-icon.png") no-repeat center ;
}

.menu li.contact:hover, .menu li.contact current-menu-item {
    background:url("images/contact-icon-over.png") no-repeat center ;
} 
```

每个 li 都有一个独特的背景图片（例如 li.blog 有博客图标和聚光灯，li.about 有关于图标和聚光灯等...）

如果有人能帮我解决这个问题，我将不胜感激。

最好的，

辛西娅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:25:55.380

你的选择器是错误的。

要选择带类的 LI，`current-menu-item`您需要不带空格：

```
li.about.current-menu-item { ... } 
```

它的名称也很混乱

```
current-page-item 
```

和

```
current_page_item 
```

为了你自己的利益改变这些。

# google-chrome - FDF 不适用于 Google Chrome

> ID：14389880
> 
> 赞同：3
> 
> 时间：2013-01-17T23:14:03.263
> 
> 标签：google-chrome, pdf, fdf

[http://www.frostjedi.com/terra/dev/fdf.php](http://www.frostjedi.com/terra/dev/fdf.php)

这会生成一个 PDF，其中包含已在 Firefox 中填充的字段，但在 Google Chrome 中它不执行任何操作。假设我没有做错什么，那么我的假设是这意味着 Chrome 根本不支持 FDF？如果没有，是否有解决方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:03:39.700

我认为这是#FDF 功能成为 Adob​​e 阅读器特定功能的结果。Chrome 有自己的内置 pdf 查看器，不知道在哪里“找到” FDF 文件。

这个猜测完全是基于[以下到 adobe 社区论坛的帖子](http://forums.adobe.com/message/3878224#3878224)。

我正在继续使用 pdf_tk，它似乎确实可以很好地合并服务器端......我希望有人能尽快提出更好的答案......

HTH, -FT

# html - 应该是简单的Ajax使用

> ID：14389884
> 
> 赞同：0
> 
> 时间：2013-01-17T23:14:20.993
> 
> 标签：html, ajax

以下html无法正确输出是否有原因？

```
<html>
<script src="jquery_v1.9.js" style="text/javascript" />
<script style="text/javascript"> $("#container").load('partial.html')</script>

<body>
<h1>Partial Rendering Demo</h1>
<div id="container"></div>
</body>
</html> 
```

我在 ASP.net MVC 4 书中使用了一个示例，jquery 文件只是最新版本的复制/粘贴，所有文件都在同一目录中，并且 'partial.html' 文件夹simple 包含一个 h2 元素。但是，当我运行主 html 时，永远不会显示 h2 元素。

我忽略了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:21:28.843

尝试这个：

```
<script src="jquery_v1.9.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function{
        $("#container").load('partial.html')
    });
</script> 
```

# c# - C# asp.net System.Net.Mail 未收到外发电子邮件

> ID：14389885
> 
> 赞同：1
> 
> 时间：2013-01-17T23:14:21.977
> 
> 标签：c#, .net, system.net.mail

我正在使用`System.Net.Mail`并且我正在尝试向某个地址发送一封电子邮件（实际上是给我自己）。我相信我设置正确并且没有抛出异常但邮件没有送达？！我不知道发生了什么。我没有消息、错误，也没有任何问题的迹象。这是我的代码：

```
using System.Net.Mail;

EmailSender email = new EmailSender();

email.From = "steve_kershaw@yahoo.com";
email.Subject = "Test email!";
email.To = "Steve.Kershaw@securitynational.com";
email.Body = "An event just occured.";
email.SendMail(); 
```

在一个单独的课程中，我有：

```
mMailMessage.Subject = strSubject;
mMailMessage.Body = strBody;
mMailMessage.IsBodyHtml = true;
mMailMessage.Priority = MailPriority.Normal;

// Send the message.
SmtpClient mSmtpClient = new SmtpClient(strHost);
mSmtpClient.Send(mMailMessage); 
```

我已经无数次地浏览了这段代码，但一切似乎都很正常。有人可以帮忙吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:22:43.513

你的代码对我来说看起来不错。检查您的`SmtpClient`配置。

有一篇很酷的博客文章关于[`Sending Email with System.Net.Mail`](http://weblogs.asp.net/scottgu/archive/2005/12/10/432854.aspx). 你`SmtpClient`应该看起来像这样；

```
<system.net>
    <mailSettings>
      <smtp from="steve_kershaw@yahoo.com">
        <network host="smtpserver1" port="25" userName="username" password="secret" defaultCredentials="true" />
      </smtp>
    </mailSettings>
  </system.net> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:20:26.583

我遇到了一个问题，一切看起来都正确，但邮件没有发送。没有错误或异常。问题是我的“发件人地址”。我选择了一个虚构的地址，例如：'do-not-reply@ThisAppsName.com' 结果，服务器意识到这不是地址并且没有发送邮件。我将其更改为应用程序所有者列表的电子邮件地址，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T23:40:06.520

这可能是基本的，但也要确保 smtp 服务正在运行。有几次代码是正确的，但由于这个非常简单的事情，电子邮件没有送达。

重新启动 smtp 服务也可能是值得的

# entity-framework - 如何仅使用实体框架属性实现 TPH 映射

> ID：14389886
> 
> 赞同：1
> 
> 时间：2013-01-17T23:14:43.623
> 
> 标签：entity-framework, orm, data-annotations, entity-framework-5, entity-framework-4.3

我需要使用 Entity Framework Code First 将遗留数据库表映射到多态层次结构。不幸的是，我有一些荒谬的限制，我不确定这是否可能。这些约束要求：

1.  我无法使用流畅的界面定义映射。我必须使用实体框架映射属性。

2.  我无法将自定义约定添加到`DbModelBuilder`.

3.  我无法修改表结构。

反正有没有直接用EF来完成这个？如果不是，那么使用这样的桌子我最好的选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T06:12:57.327

我相信你会遇到的问题是做更复杂的事情（比如在 Code-First TPH 中定义鉴别器）需要流利的。也许其他人可以评论更多细节？这家伙得到了相同的答案，但仍然没有引用：[Entity Framework 4, TPH (Table Per Hierarchy) and annotation](https://stackoverflow.com/questions/10014410/entity-framework-4-tph-table-per-hierarchy-and-annotation)

取决于您将如何使用这些数据（这是只读的吗？）我认为您有很多选项可以加载它并与之交互。在从表中提取整个记录之后，您只需要做额外的工作将对象映射到它们的类上，而不是让 EF 为您完成所有工作......

同样，其他人可能有更好的建议。

# iphone - 引用出口现在显示我的自定义视图 (IBOutlet)

> ID：14389888
> 
> 赞同：-2
> 
> 时间：2013-01-17T23:14:51.030
> 
> 标签：iphone, objective-c, xcode4.5

我正在尝试做一个简单的任务，但我不知道我错过了什么。我只想使用我为视图控制器定制的 IBOutlet 链接一个引用出口。但是当我尝试做链接时，我的自定义`viewLabel`没有出现。这是一些图像：

代码：http: [//i.imgur.com/uEwUl.jpg](http://i.imgur.com/uEwUl.jpg)

标签类：http: [//i.imgur.com/pTcMz.jpg](http://i.imgur.com/pTcMz.jpg)

不带 viewLabel 的链接：http: [//i.imgur.com/kqSdl.jpg](http://i.imgur.com/kqSdl.jpg)

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:32:02.997

很难正确理解您的问题，但我的猜测是您没有将视图控制器的类设置为您的自定义视图控制器子类.....您在类检查器窗格中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T03:56:33.090

我有同样的问题。幸运的是，这只是一个简单的教程示例。我知道我做的一切都是对的！但我最终放弃了整个小项目并从头开始重新创建它并且它有效。Ctrl-Drag 从 Reference 链接到 View Controller 列出了 @IBOutlet 变量。

# php - 在另一个表上使用 `where` 子句从特定表中选择一个值

> ID：14389891
> 
> 赞同：0
> 
> 时间：2013-01-17T23:15:09.220
> 
> 标签：php, mysql, codeigniter

如何在单个 MySQL 查询中执行此类操作？

```
select `value_a` 
from `table_1` 
where `value_b` = (select `value_b` from `table_2` where `value_c` = `x`); 
```

我使用 CodeIgniter，所以我可以使用 Active Records。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T23:19:14.693

您也可以`JOIN`为此使用 a：

```
select t1.value_a
from table_1 t1
inner join table_2 t2
  on t1.value_b = t2.value_b
where t2.value_c = 'x' 
```

您也可以使用现有的查询，但`x`被反引号而不是单引号包围：

```
select `value_a` 
from `table_1` 
where `value_b` = (select `value_b` from `table_2` where `value_c` = 'x); 
```

# python - IPython Notebook：用 LaTeX 绘图？

> ID：14389892
> 
> 赞同：1
> 
> 时间：2013-01-17T23:15:08.830
> 
> 标签：python, matplotlib, latex, ipython, ipython-notebook

在 IPython Notebook 中显示 LaTeX 行之前已经回答过，但是，例如，在 IPython Notebook 中绘图时，如何用 LaTeX 字符串标记绘图的轴？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T23:28:26.123

它在 IPython 中的工作方式与在独立脚本中的工作方式相同。这个例子来自[文档](http://matplotlib.sourceforge.net/users/usetex.html)：

```
import matplotlib as mpl
import matplotlib.pyplot as plt
mpl.rc('text', usetex = True)
mpl.rc('font', family = 'serif')
plt.figure(1, figsize = (6, 4))
ax = plt.axes([0.1, 0.1, 0.8, 0.7])
t = np.arange(0.0, 1.0+0.01, 0.01)
s = cos(2*2*pi*t)+2
plt.plot(t, s)

plt.xlabel(r'\textbf{time (s)}')
plt.ylabel(r'\textit{voltage (mV)}', fontsize = 16)
plt.title(r"\TeX\ is Number $\displaystyle\sum_{n=1}^\infty\frac{-e^{i\pi}}{2^n}$!",
      fontsize = 16, color = 'r')
plt.grid(True)
plt.savefig('tex_demo')
plt.show() 
```

![在此处输入图像描述](../Images/ac736abab39dad5ba03708cf552cec46.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-09T20:27:53.090

我遇到了评论中发布的问题：`! LaTeX Error: File 'type1cm.sty' not found.`

问题是我的默认 tex 命令没有指向我最新的 MacTex 发行版，而是指向我几年前使用 macports 安装的旧发行版，并且自从我切换后没有更新使用 MacTex。

我通过`which tex`在命令行上键入并获取`/opt/local/bin/tex`不是 MacTex 的默认安装位置来诊断这一点。

解决方案是我必须编辑我的 $PATH 变量，以便 matplotlib 调用正确版本的 tex。

我`export PATH="/usr/local/texlive/2019/bin/x86_64-darwin:$PATH"`在我的*最后*一行添加了`~/.bash_profile`.

`echo $PATH`现在，当我在命令行上编写时，我得到：

`/usr/local/texlive/2019/bin/x86_64-darwin:blah:blah:blah...`

之后不要忘记重新启动终端和 jupyter 服务器以使更改生效。

# sql - 改进 t-sql 视图

> ID：14389893
> 
> 赞同：0
> 
> 时间：2013-01-17T23:15:19.770
> 
> 标签：sql, sql-server, performance, sql-server-2008, tsql

我正在编写一个基本上从多个视图中提取多个列的查询。索引每个视图以获得更快的性能更好吗？

查询即 A 到 G 是视图

```
SELECT A.C1, B.C1
FROM A INNER JOIN B on A.C3=B.C3 
Inner join C on C.C2 = B.C2
inner join D on D.C4 = C.C4
...
Inner join H ON H.C5 = G.C5
where <some condition> 
```

每个视图（A 到 H）都从不同的表中提取数据。没有视图被索引（当我在视图树中展开 INDEX 文件夹时，我什么也看不到）。我应该在每个视图中添加索引以获得更快的性能吗？如果是这样，我应该在我用于 ON JOIN 子句的列上添加索引吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T13:57:24.583

首先，启用“包括实际执行计划”并运行查询以查看性能影响在哪里。寻找“表扫描”作为可能的罪魁祸首。

如果没有发现任何明显的问题，请尝试 Query -> "Analyze query in database engine tune advisor"。SQL 服务器会建议添加一些索引。不要只应用它们，而是与现有查询进行比较，以确保您没有添加太多重叠。

正如 nkj 所说，在索引视图之前优化表上的查询。

# uipangesturerecognizer - 如何确定 UIPanGesture 的方向（向上或向下）？

> ID：14389894
> 
> 赞同：2
> 
> 时间：2013-01-17T23:15:30.570
> 
> 标签：uipangesturerecognizer, screen-brightness

我的目标是通过向上或向下平移手势来设置 iPhone 的亮度。如果有一个简单的方法来确定平底锅的方向，我想不通。我添加了一个滑动手势识别器，然后是以下代码：

```
- (BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer           shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer     *)otherGestureRecognizer
{
    return YES;
} 
```

但我的 pan: 方法似乎永远无法确定 pan 的方向。我已将“self”设置为两个手势识别器的代表。下面的代码是我最近的许多不同尝试。（向下平移时效果很好 - 屏幕变暗缓慢或快速，具体取决于向下平移的速度。）

```
- (IBAction)downSwipe:(UISwipeGestureRecognizer *)recognizer // 1/16/13
{
    NSLog (@"downSwipe");
    if ((recognizer.state == UIGestureRecognizerStateChanged) ||
    (recognizer.state == UIGestureRecognizerStateEnded))
  {
    NSLog (@"downSwipe in downSwipe");
    self.brightness = self.brightness -.1;
    NSLog (@"Going Down");
  }
}

- (IBAction)upSwipe:(UISwipeGestureRecognizer *)recognizer  // 1/16/13
{
    NSLog (@"upSwipe");
    if ((recognizer.state == UIGestureRecognizerStateChanged) ||
    (recognizer.state == UIGestureRecognizerStateEnded))
  {
        NSLog (@"upSwipe in upSwipe");
        self.brightness = self.brightness +.1;
        NSLog (@"Going UP");
  }
}

- (void)pan:(UIPanGestureRecognizer *)recognizer // 1/12/13
{

if ((recognizer.state == UIGestureRecognizerStateChanged) ||
    (recognizer.state == UIGestureRecognizerStateEnded))
   {
    if (UISwipeGestureRecognizerDirectionDown)
    {
        NSLog (@"downSwipe in pan");
        self.brightness = self.brightness -.005;
        NSLog (@"Going DOWN in pan");
    }
     else if (UISwipeGestureRecognizerDirectionUp)
    {
        NSLog (@"upSwipe in pan");
        self.brightness = self.brightness +.005;
        NSLog (@"Going UP in pan");
    }
   } 
} 
```

下面的输出表示大约半英寸的连续向上平移。（pan：错误地认为它是一个向下的pan。）

```
2013-01-17 17:49:57.774 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:57.783 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:57.794 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:57.801 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:57.811 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:57.818 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:57.832 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:57.839 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:57.848 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:57.855 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:57.864 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:57.871 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:57.881 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:57.887 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:57.896 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:57.903 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:57.910 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:57.919 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:57.929 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:57.935 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:57.945 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:57.951 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:57.960 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:57.966 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:57.998 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:58.004 SeriousPanicButton[9426:707] Going DOWN in pan
2013-01-17 17:49:58.022 SeriousPanicButton[9426:707] downSwipe in pan
2013-01-17 17:49:58.030 SeriousPanicButton[9426:707] Going DOWN in pan

Obviously this if statement is not working:

if (UISwipeGestureRecognizerDirectionDown) 
```

我希望我不会让这件事变得比实际更难。以某种方式能够确定平移手势的方向（向上或向下）会更干净，甚至不必费心滑动手势。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-19T03:21:52.467

坚持是有回报的。我自己找到了答案。这是确定是向上还是向下平移的代码。如果您想知道方向是左还是右，只需将 if 语句更改为测试 velocity.x。

```
- (void)pan:(UIPanGestureRecognizer *)recognizer // 1/18/13
{
if ((recognizer.state == UIGestureRecognizerStateChanged) ||
    (recognizer.state == UIGestureRecognizerStateEnded))
{
    CGPoint velocity = [recognizer velocityInView:self.view];

    if (velocity.y >0)   // panning down
    {
        self.brightness = self.brightness -.02;
   //     NSLog (@"Decreasing brigntness in pan");
    }
    else                // panning up
    {
    self.brightness = self.brightness +.02;
  //  NSLog (@"Increasing brigntness in pan");
    }
}
} 
```

# javascript - javascript和图像预加载

> ID：14389904
> 
> 赞同：1
> 
> 时间：2013-01-17T23:16:06.057
> 
> 标签：javascript, jquery

我需要了解图像预加载在浏览器中是如何工作的。可以说我有这段代码：

```
<script type="text/javascript" language="JavaScript">
    companyLogo = new Image();
    companyLogo.src = "/images/image1.jpg"
</script> 
```

然后在我的页面下方的某个地方我有以下内容。

```
<img src= "/images/image1.jpg" /> 
```

现在如您所见，首先我预加载了图像**/images/image1.jpg**然后我在我的图像标签中使用它。

我的网站有非常高清的产品图片，我的整个页面有时会在加载主图片时挂起。我不介意我的图片尺寸太大，我想做的是....继续加载包含内容和其他元素的页面，并在加载后立即显示图片（但是不要仅仅因为图片而挂起/暂停页面尚未加载）。

现在上面的方法，它到底是做什么的？它是否将图像预加载到缓存中并等待并挂起页面？或者它正是我想要做的？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T23:21:46.607

虽然听起来您应该优化图像，但我很高兴向您展示我将如何做到这一点。

不要包含图像 src，将其隐藏在数据中。（使用正确的宽度和高度，这样您的页面在最终加载时不会跳转。）

```
<img src="1px.gif" data-src="http://the.real.src" class="justyouwait" style="width:10000000px; height:1000000px;" /> 
```

然后在dom准备好，即当你的页面加载后，加载它们

```
$(function(){
    $('img.justyouwait').each(function(){
        $(this).attr('src', $(this).data('src'));
    });
}); 
```

或者添加一点温馨

```
$('img.justyouwait').each(function(){
    $(this).css({opacity:0}).load(function(){
        $(this).animate({opacity:1},1000); // fade them in
    }).attr('src', $(this).data('src'));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T23:19:36.547

我会在 DOMReady 上做。但它本质上是在页面加载的同时尝试加载文件，应该没有挂起。但是它不会“延迟”加载图像。通常这种技术用于加载可能需要的图像。我会先在 HTML 中加载一个低分辨率，然后在高分辨率图像准备好后通过 javascript 更新图像。或者更好的是，只需加载 Web 安全图像，并在用户需要时为他们提供指向高分辨率的链接。

强迫人们下载高分辨率图像的坏主意。这是让人们避开您的网站的好方法。

编辑：

因此，您可以执行以下操作：

```
<img src="src/to/placeholder.jpg" data-path="path/to/high/res.jpg" class="lazyload"/> 
```

然后有一个javascript函数：

```
$('.lazyload').each(function(){
    $(this).attr('src',$(this).data('path'));
}); 
```

不确定我的代码是否准确，但你明白了。

编辑：加载 DOM 时，您实际上是在为所有产品图像加载相同的占位符图像。在后台，javascript 根据 data-path 中的路径请求真实图像。然后，当图像完成加载时，占位符源会更新为更好的图像。添加一些淡入淡出或任何你喜欢的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T23:45:06.753

我编写了这个简单的 jQuery 插件来帮助解决这个问题。

**imgur.js**

```
/*
    Plugin: IMGUR
    Author: Drew Dahlman ( www.drewdahlman.com )
    Version: 0.0.2
*/

    (function($) {

        $.fn.imgur = function(options,loaded) {
            var defaults = {
                img: '',
            }

            if(loaded){
                var callback = {
                    loaded: loaded
                }
            }

            return this.each(function() {

                var settings = $.extend(defaults,options);
                var callbacks = $.extend(callback,loaded);
                var _image;

                var $this = $(this);

                function init(){
                    if(callbacks.loaded != null){
                        _image = new Image();
                        _image.onLoad = loaded();
                        _image.src = settings.img;
                    }
                }
                function loaded(){
                    if(callbacks.loaded != null){
                        callbacks.loaded($this,settings.img);
                    }
                }
                init();
        });
        };

    })(jQuery); 
```

**如何使用**

如果要加载多个图像，请在 html 中分配一个类。

```
<img src='' data-image='images/image1.jpg' class='preload'/> 
```

然后在您的 javascript 调用中（假设您使用的是 jQuery）

```
<script>
$(".preload").each(function(){
 var $this = $(this);
 $this.imgur({
  img: $this.data('image') // in your case
 },function(el,data){
   el.attr('src',data);
 });
});
</script> 
```

这将使用数据图像来加载图像，然后在加载图像时将该数据添加到您提供给它的元素中。

干杯！

# mysql - 使用索引列更改此 DB Schema 以进行二进制过滤以提高查询性能是否有意义？

> ID：14389907
> 
> 赞同：0
> 
> 时间：2013-01-17T23:16:17.223
> 
> 标签：mysql, database-schema, database-performance

在具有 4GB 内存的运行 Windows7-Home 的笔记本电脑上（没有研究预算的大学教授）在具有 12+ 百万行的数据库上编写一些查询。我正在考虑将以 utf8_bin 的形式添加到架构中并在其上放置索引。这会给我更好的查询性能吗？像下面这样的简单查询需要 100 多秒：

```
SELECT 'Aug' as Month, 
        SUM(volume) AS Volume 
FROM    moving_avgs
WHERE   data_date between 20120801 
        AND 20120831; 
```

*   我要添加和索引的列：
    *   年
    *   周一，周二，周三，周四，周五
    *   一月、二月、三月、四月 ... 十二月
    *   运营商

我当前的表结构：

```
CREATE TABLE `moving_avgs` (
  `symbol` varchar(8) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `data_date` date NOT NULL DEFAULT '0000-00-00',
  `openprice` double(13,2) DEFAULT NULL,
  `highprice` double(13,2) DEFAULT NULL,
  `lowprice` double(13,2) DEFAULT NULL,
  `closeprice` double(13,2) DEFAULT NULL,
  `prior_close` double(13,2) DEFAULT NULL,
  `pror_e` double(8,4) DEFAULT NULL,
  `pror_l` double(8,4) DEFAULT NULL,
  `volume` bigint(20) DEFAULT NULL,
  `exchange` varchar(10) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `ma5_open` double(13,2) DEFAULT NULL,
  `ma10_open` double(13,2) DEFAULT NULL,
  `ma20_open` double(13,2) DEFAULT NULL,
  `ma30_open` double(13,2) DEFAULT NULL,
  `ma50_open` double(13,2) DEFAULT NULL,
  `ma90_open` double(13,2) DEFAULT NULL,
  `ma200_open` double(13,2) DEFAULT NULL,
  `ma5_high` double(13,2) DEFAULT NULL,
  `ma10_high` double(13,2) DEFAULT NULL,
  `ma20_high` double(13,2) DEFAULT NULL,
  `ma30_high` double(13,2) DEFAULT NULL,
  `ma50_high` double(13,2) DEFAULT NULL,
  `ma90_high` double(13,2) DEFAULT NULL,
  `ma200_high` double(13,2) DEFAULT NULL,
  `ma5_low` double(13,2) DEFAULT NULL,
  `ma10_low` double(13,2) DEFAULT NULL,
  `ma20_low` double(13,2) DEFAULT NULL,
  `ma30_low` double(13,2) DEFAULT NULL,
  `ma50_low` double(13,2) DEFAULT NULL,
  `ma90_low` double(13,2) DEFAULT NULL,
  `ma200_low` double(13,2) DEFAULT NULL,
  `ma5_close` double(13,2) DEFAULT NULL,
  `ma10_close` double(13,2) DEFAULT NULL,
  `ma20_close` double(13,2) DEFAULT NULL,
  `ma30_close` double(13,2) DEFAULT NULL,
  `ma50_close` double(13,2) DEFAULT NULL,
  `ma90_close` double(13,2) DEFAULT NULL,
  `ma200_close` double(13,2) DEFAULT NULL,
  `ma5_volume` int(15) DEFAULT NULL,
  `ma10_volume` int(15) DEFAULT NULL,
  `ma20_volume` int(15) DEFAULT NULL,
  `ma30_volume` int(15) DEFAULT NULL,
  `ma50_volume` int(15) DEFAULT NULL,
  `ma90_volume` int(15) DEFAULT NULL,
  `ma200_volume` int(15) DEFAULT NULL,
  `volt5_l` double(8,4) DEFAULT NULL,
  `volt10_l` double(8,4) DEFAULT NULL,
  `volt20_l` double(8,4) DEFAULT NULL,
  `volt30_l` double(8,4) DEFAULT NULL,
  `volt50_l` double(8,4) DEFAULT NULL,
  `volt90_l` double(8,4) DEFAULT NULL,
  `volt200_l` double(8,4) DEFAULT NULL,
  `volt5_e` double(8,4) DEFAULT NULL,
  `volt10_e` double(8,4) DEFAULT NULL,
  `volt20_e` double(8,4) DEFAULT NULL,
  `volt30_e` double(8,4) DEFAULT NULL,
  `volt50_e` double(8,4) DEFAULT NULL,
  `volt90_e` double(8,4) DEFAULT NULL,
  `volt200_e` double(8,4) DEFAULT NULL,
  PRIMARY KEY (`data_date`,`symbol`,`exchange`),
  KEY `symbol` (`symbol`),
  KEY `data_date` (`data_date`),
  KEY `exchange` (`exchange`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

我可以用 my.ini 做些什么吗？

```
[mysqld]
port        = 3306
socket      = /tmp/mysql.sock
skip-external-locking
key_buffer_size = 128M
max_allowed_packet = 20M
table_open_cache = 256
max_heap_table_size = 128M
tmp_table_size = 512M
sort_buffer_size = 512M
read_buffer_size = 32M
read_rnd_buffer_size = 16M
myisam_sort_buffer_size = 128M
thread_cache_size = 8
query_cache_size= 64M
basedir=c:/wamp/bin/mysql/mysql5.5.24
log-error=c:/wamp/logs/mysql.log
datadir=c:/wamp/bin/mysql/mysql5.5.24/data
# Try number of CPU's*2 for thread_concurrency
thread_concurrency = 8 
```

以下是 EXPLAIN 的结果：

```
explain select 'Aug' as Month, sum(volume) as Volume from moving_avgs
where data_date between '2012-08-01' and '2012-08-31';

id select_type table       type  possible_keys     key     key_len ref  rows   extra
-- ----------- ----------- ----- ----------------- ------- ------- ---- ------ -----------
1  SIMPLE      moving_avgs range PRIMARY,data_date PRIMARY 3       NULL 110906 Using where 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T06:17:29.893

从您的表定义来看，您的表上没有任何二级索引。由于您的查询使用日期范围来确定要返回的记录并且没有索引，因此查询将执行表扫描。

添加其他索引和列可能会在插入和更新期间减慢速度，因此不要添加它们。

只需在 data_date 列上添加一个索引，这样查询就可以使用这个索引来加快读取速度。我建议您是否可以在您的问题中发布以下语句的结果：

```
EXPLAIN SELECT 'Aug' as Month, 
        SUM(volume) AS Volume 
FROM    moving_avgs
WHERE   data_date between 20120801 
    AND 20120831; 
```

这将向我显示查询计划，我将能够确认它是表扫描而不是使用索引。能够读取解释语句的输出是查询优化的一个非常重要的部分。

# url - Umbraco XSLTsearch 如何将查询字符串添加到搜索结果 URL

> ID：14389909
> 
> 赞同：0
> 
> 时间：2013-01-17T23:16:22.037
> 
> 标签：url, search, xslt, query-string, umbraco

如何将查询字符串添加到 XSLTsearch 结果 URL？

当我单击提交按钮时，我希望查询字符串显示在 URL 中：

例如**/search-results.aspx?search=red**

```
<xsl:if test="$searchBoxLocation='TOP' or $searchBoxLocation='BOTH'">
  <div class="xsltsearch_form">
    <input name="search" type="text" class="input">
      <xsl:attribute name="value">
        <xsl:value-of select="$unescapedSearch"/>
      </xsl:attribute>
    </input>
    <xsl:text>&nbsp;</xsl:text>
    <input type="submit" class="submit">
      <xsl:attribute name="value">
        <xsl:value-of select="$dictionaryButton-Search"/>
      </xsl:attribute>
    </input>
  </div>
</xsl:if> 
```

谁能帮我吗？

干杯，合资企业

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T11:44:48.310

你的表格需要像：

```
<form action="?">
    <!--You macro here-->
</form> 
```

要不就

```
<form>
    <!--You macro here-->
</form> 
```

假设您已删除母版页中的表单标签

# php - 如何通过在每组三位数之间插入空格来格式化数字？

> ID：14389912
> 
> 赞同：1
> 
> 时间：2013-01-17T23:16:52.643
> 
> 标签：php

我使用 preg replace 通过在每组三位数之间插入一个空格来分隔数字：

```
$alexa_rank_raw = 8389876;

$alexa_rank = preg_replace("/(\d{3})/", '$1.', $alexa_rank_raw);

// alexa rank becomes: 838.987.6 
```

如何进行替换，以便最终数字如下所示：

**8.389.876**

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T23:20:13.073

您正在寻找[`number_format`](http://php.net/manual/en/function.number-format.php).

```
$rank = number_format($alexa_rank_raw, 0, ",", "."); 
```

但这里也是一个正则表达式版本，因为为什么不呢？

```
$rank = preg_replace('/(\d{1,3})(?=(\d{3})+$)/', '$1.', $alexa_rank_raw); 
```

它是如何工作的：它贪婪地匹配最多三个数字的组（尽可能多到三个），但使用正向前瞻来断言从匹配组结束的位置开始有精确的三个数字的倍数直到输入结束。

**[看到它在行动](http://ideone.com/SBDoqa)**。

# wordpress - WordPress 二十十二的粘性页脚

> ID：14389914
> 
> 赞同：0
> 
> 时间：2013-01-17T23:16:55.517
> 
> 标签：wordpress, footer, sticky

我试图让[我的网站](http://cresun.is-great.net)的页脚粘在页面的底部。我已经对 Firebug 进行了一些检查，发现页脚当前正在与网站的其他内容一起包装。

在这一点上，我的理论是，如果定义页面高度的组件设置为 100%，页脚应该贴在页面底部，将页脚留在该元素下方。

如果有人可以检查代码并给我一些编辑内容的说明，我将不胜感激，因为我完全不知道从哪里继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:25:39.607

您需要在 .css 中添加/修改 #footer，因为这需要设置为 position:fixed; 为了将其“粘贴”到底部，值得添加 margin-bottom:0px; 或底部：0px；这样它就会触及页面的最底部，并将宽度设置为 width:100%; ...如果您可以检查您的 .css 中的#footer，或者将其添加如下，看看会发生什么，那么我们可以从那里开始..

```
#footer {position:fixed; margin-bottom:0px; width:100%;} 
```

您还应该真正添加 height:***px; 根据页脚需要有多“高”，您可以使用它，直到该行与页脚顶部相遇，这样当您上下滚动时，您的页面文本与该行完美相遇

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T20:43:11.520

根据[此处](http://www.cssstickyfooter.com/using-sticky-footer-code.html)的粘性页脚代码示例，您需要从重新组织页面布局开始。

您网站上的代码是：

```
<div id="page" class="hfeed site">
    <header id="masthead">Header code</header>
    <div id="main">page body code</div>
    <footer id="colophon">footer code</footer>
</div> 
```

为了使用我发送的示例链接让粘性页脚工作，您需要使用类似这样的方式重构您的网站代码（注意页脚在 DIV 之外）：

```
<div id="page" class="hfeed site">
    <header id="masthead">Header code</header>
    <div id="main">page body code</div>
</div>
<footer id="colophon">footer code</footer> 
```

随之而来的 CSS 代码如下所示：

```
<style type="text/css">
html, body {height: 100%;}

#page {min-height: 100%;}

#main {overflow:auto;
    padding-bottom: 150px;}  /* must be same height as the footer */

#colophon {
    position: relative;
    margin-top: -150px; /* negative value of footer height */
    height: 150px;
    clear:both;} 

/*Opera Fix*/
body:before {
    content:"";
    height:100%;
    float:left;
    width:0;
    margin-top:-32767px;/
}
</style> 
```

我之前使用过粘性页脚，效果很好，但我没有在 WordPress 网站中使用过它，所以你必须使用它。重新组织主要的 HTML WordPress 元素可能是一个挑战，但希望这会让您指向正确的方向。

# php - 使用 XSL 删除 XML 开头（声明前）的空行以进行解析

> ID：14389917
> 
> 赞同：1
> 
> 时间：2013-01-17T23:17:05.213
> 
> 标签：php, xml, xslt, xml-parsing

这是我的问题。我正在构建一个 Web 应用程序，它将 xml 数据提交给一个 govt 应用程序，该应用程序返回 xml 数据，然后我通过 xslt 将其解析为 html 以供查看。问题是返回的 xml 在声明之前有 2（两）个空行

```
<?xml version='1.0' standalone='yes'?> 
```

好吧，xslt 不喜欢这样，也不会将 xml 解析为 html。我知道这是问题所在，因为如果我通过记事本等编辑程序手动删除 2（两）个空白行，则转换效果很好。我无法控制返回的 xml 数据的格式，因此我需要找到一种方法，在继续解析之前先删除这 2（两）个空白行。

所以这是我的 xml（想象开头有 2 个空行）：

```
<?xml version='1.0' standalone='yes'?>
<FHAENTITYDATA FHAVersionID = '1.0'>  
<PROCESSSTATUS>
<ProcessStatusCode>Success</ProcessStatusCode>
<ProcessStatusMessage sCode = '1'>Returned 1 zip code record(s)</ProcessStatusMessage>
</PROCESSSTATUS> 
</FHAENTITYDATA> 
```

这是我的 xsl：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html>
<head>
<link rel="stylesheet" href="../css/fhac.css" type="text/css"/>
</head>
<body style="font-family:verdana;">
<div id="content">
<div id="fieldset">
<xsl:for-each select="//ProcessStatusCode">
  <tr><td><b><xsl:value-of select="."/></b></td></tr>
</xsl:for-each>
<xsl:for-each select="//ProcessStatusMessage">
  <tr><td><b><xsl:value-of select="."/></b></td></tr>
</xsl:for-each>
</table>
</div></div>
</body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

我的问题是，有没有办法在 xslt 之前或期间删除这些引导线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T09:19:05.547

你的问题的答案是“不”。XML 声明必须是 XML 解析器读取的第一件事，解析器没有 XML 声明比在其他地方但在文件的第一行（/string/buffer/whatever）中拥有它更令人不安。

你的问题的答案确实是一个修剪。确切的实现取决于您可以使用的其他内容（在这种情况下为 php）。我建议您只删除 XML 声明之前的空行，而不是删除所有空行，因为您可能希望保留文本元素中的空行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:21:19.623

这应该工作：

```
preg_replace("/(^[\r\n]*|[\r\n]+)[\s\t]*[\r\n]+/", "", $string); 
```

它只会删除所有完全空白的行。您只需将文件的内容从[此处](https://stackoverflow.com/questions/709669/how-do-i-remove-blank-lines-from-text-in-php)`$string`
获取到 Taken

# python - 从 Tkinter.Canvas 继承 - 调用 super 会导致错误

> ID：14389918
> 
> 赞同：1
> 
> 时间：2013-01-17T23:17:05.280
> 
> 标签：python, inheritance, canvas, tkinter, super

我想问一个关于使用 Canvas 作为容器的聪明问题，但是在编写示例代码时我偶然发现了一些奇怪的东西。这是到目前为止的代码：

```
import Tkinter as tk

class CCanvas(tk.Canvas):

    def __init__(self,master,*args,**kwargs):
        super(CCanvas,self).__init__(master=master,*args,**kwargs)

if __name__ == '__main__':
    root= tk.Tk()
    cc = CCanvas(root)
    cc.pack()
    root.mainloop() 
```

现在这段代码应该做的不多。CCanvas 类只是继承自 Canvas，没有实现任何东西，只是调用了超类的构造函数。我看不出这不起作用的任何理由。然而，当我运行它时，我收到以下错误：

```
super(CCanvas,self).__init__(master=master,*args,**kwargs)
TypeError: must be type, not classobj 
```

谁能向我解释这种行为，也许可以告诉我如何解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T23:33:35.667

这里的问题是 TkInter 类（在 2.x 中）是旧式类。[数据模型](http://docs.python.org/2/reference/datamodel.html)文档中详细描述了这些差异，但您无需了解详细信息；所有你需要知道的是[你不能使用`super`](https://stackoverflow.com/questions/3694371/how-do-i-initialize-the-base-super-class-in-python/3694393#3694393)（以及如何通过显式调用来解决这个问题`__init__`）。而且，正如 Steven Rumbalski 指出的那样，[super() 失败并出现错误：TypeError “argument 1 must be type, not classobj”</a> 解释了为什么当您尝试`super`使用旧的基类时会收到此错误消息风格的类。](https://stackoverflow.com/questions/1713038/super-fails-with-error-typeerror-argument-1-must-be-type-not-classobj)

 [这在文档中没有提到，除非你去寻找它，否则它并不是很明显，但如果你知道如何区分这两者，这并不难。](https://stackoverflow.com/questions/1713038/super-fails-with-error-typeerror-argument-1-must-be-type-not-classobj) 

[正如在 python-list 上的一个线程中](http://code.activestate.com/lists/python-list/590352/)[所指出的那样](https://stackoverflow.com/questions/1713038/super-fails-with-error-typeerror-argument-1-must-be-type-not-classobj)，这通常不是问题，因为如果您需要新样式的类行为，您总是可以只做`class CCanvas(tk.Canvas, object):`.

但是有一些事情没有处理，其中之一就是`super`对基类的能力。相反，您必须以老式的方式做事并通过名称显式引用基类（这也意味着您必须`self`显式传递）：

```
def __init__(self,master,*args,**kwargs):
    TkInter.Canvas.__init__(self, master=master, *args, **kwargs) 
```

（当然另一种解决方案是已经迁移到 Python 3，那里没有旧式类……）

（为了完整起见，90% 的`super`旧式课程都可以伪造，并且在 2.x 的早期有一些食谱在流传……但你不想那样做。）

# c# - 如何检查 MySQL 连接是否经过 SSL 加密？

> ID：14389921
> 
> 赞同：3
> 
> 时间：2013-01-17T23:17:42.453
> 
> 标签：c#, mysql, ssl, connection

我正在使用来自 MySQL 官方网站的 MySQL .NET 连接器。我正在尝试建立从我的 C# 程序到 Mysql 数据库的安全 SSL 连接。Mysql 服务器允许使用 SSL 连接。`have_ssl`变量被设置为`yes`和`ca-cert`，`server-cert`并且`server-key`被指定。

用户的权限是：

```
'GRANT USAGE ON *.* TO \'logowanie\'@\'%\' IDENTIFIED BY PASSWORD \'*...\' REQUIRE SSL'
'GRANT SELECT ON `db`.`table1` TO \'logowanie\'@\'%\'' 
```

所以我假设，这个用户在没有 SSL 的情况下无法登录？我对吗？

我在 C# 程序中的连接字符串如下所示：

```
"server=127.0.0.1;uid=logowanie;pwd=log1;database=ewidencja;SslMode=Required"; 
```

看到这个连接字符串没有任何证书文件的路径！它只有“SSLMode=Required”选项。是否可以在没有任何其他 SSL 选项的情况下进行 SSL 加密连接？

并且用户能够登录并在`table1`. 所以我假设这个连接是 SSL 加密的？如何检查此连接是否经过 SSL 加密以 100% 确定？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-10-06T22:00:57.103

[从https://stackoverflow.com/a/46609559/492336](https://stackoverflow.com/a/46609559/492336)发布我的答案：

您可以从 MySqlConnection: 内部执行此 SQL 语句`SHOW SESSION STATUS LIKE 'Ssl_cipher'`，它会显示连接是否已加密。

示例代码：

```
var connection = new MySqlConnection(ConfigurationManager.AppSettings["Test"]);
connection.Open();
var command = new MySqlCommand("SHOW SESSION STATUS LIKE \'Ssl_cipher\'", connection);
MySqlDataReader reader = command.ExecuteReader();
while (reader.Read())
{
    Console.WriteLine($"{reader.GetString(0)}: {reader.GetString(1)}");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T07:30:47.010

> 如何检查此连接是否经过 SSL 加密以 100% 确定？

安装[Wireshark](http://www.wireshark.org/)，捕获流量，您将 100% 确定它是否已加密。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-30T13:27:36.967

Openssl [https://www.openssl.org/](https://www.openssl.org/)附带一个名为“s_client”的工具，可用于测试 SSL 服务器。这适用于 *nix、cygwin 和 Win32。

示例使用

$ openssl s_client -connect servername:port -CAfile /path/to/ca.pem -debug -showcerts

有无数的选项，例如 -pause、-state 等，您可能会发现它们对通过设置和拆卸跟踪 SSL 很有用。

安全

正如 Miljen 指出的那样，使用 Wireshark。

以下是wireshark的一些技巧

1.  使用 Wireshark 收集流量
2.  验证数据包的内容看起来像随机噪声（随机字节）。
3.  此输出应该足以检查您是否已打开 SSL。

如果您要测试您的 SSL 代码是否正常工作，您还可以检查您是否可以与其他 SSL 实现互操作。

您是否正确地对服务器的公钥进行了硬编码，或者正确地检查了服务器证书以确保它与您的服务器相对应而不是冒名顶替者？您是否启用了客户端身份验证？您是否以合理的方式设置了可接受的密码套件列表？你用过 TLS 1.2 吗？您是否知道 TLS 仅保护通信通道，但您仍需要确保端点是安全的，例如免受各种恶意攻击？

这可能会让你开始测试这里有一些提示

测试见[https://www.owasp.org/index.php/Testing_for_SSL-TLS_%28OWASP-CM-001%29](https://www.owasp.org/index.php/Testing_for_SSL-TLS_%28OWASP-CM-001%29)

此链接包含很棒的东西，但绝不是详尽无遗的。这些测试适用于 HTTPS，但它们应该适用于任何 SSL 实现，因为它正在分析 SSL 协议，而不是顶部的应用程序级协议。

# android - android布局长度没有被高度完全拉伸

> ID：14389922
> 
> 赞同：0
> 
> 时间：2013-01-17T23:17:54.013
> 
> 标签：android, android-layout

我有以下 XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="match_parent">

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@android:color/white" >
        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/CanLogoImageView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:layout_margin="30dp"
                android:src="@drawable/can__logo" />

                <LinearLayout android:layout_width="fill_parent" 
                          android:layout_height="fill_parent" 
                          android:orientation="vertical" >

                          <RelativeLayout android:layout_width="fill_parent"
                                            android:layout_height="fill_parent">

                                         <EditText android:id="@+id/emailEditText"
                                                    android:layout_width="300dp"
                                                    android:layout_height="50dp"
                                                    android:layout_centerHorizontal="true"
                                                    android:hint="@string/email_hint"
                                                    android:inputType="textEmailAddress"
                                                    android:textColor="@color/black" />

                                          <EditText android:id="@+id/passwordEditText"
                                                    android:layout_width="300dp"
                                                    android:layout_height="50dp"
                                                    android:layout_marginTop="15dp"
                                                    android:layout_below="@+id/emailEditText"
                                                    android:layout_centerHorizontal="true"
                                                    android:hint="@string/password_hint"
                                                    android:inputType="textPassword"
                                                    android:textColor="@color/black" />

                                          <Button android:id="@+id/loginButton"
                                                    android:layout_width="300dp"
                                                    android:layout_height="wrap_content"
                                                    android:layout_below="@+id/passwordEditText"
                                                    android:layout_centerHorizontal="true"
                                                    android:layout_marginTop="30dp"
                                                    android:text="@string/login_button_text" />

                                          <!-- Forgot Password? TextView -->
                                          <TextView android:id="@+id/forgot_password_textView"
                                                    android:layout_width="wrap_content"
                                                    android:layout_height="wrap_content"
                                                    android:layout_marginTop="5dp"
                                                    android:layout_marginLeft="15dp"
                                                    android:gravity="center"
                                                    android:layout_below="@+id/loginButton"
                                                    android:text="@string/forgot_password_textview"
                                                    android:textColor="@color/blue"  />

                                          <!-- My payment methods test textView  - TO BE REMOVED LATER! USED THIS FOR TESTING -->
                                          <!--  <TextView android:id="@+id/paymentmethodstest_textView"
                                                    android:layout_width="wrap_content"
                                                    android:layout_height="wrap_content"
                                                    android:text="@string/payment_methods_test_textView"
                                                    android:layout_below="@+id/loginButton"
                                                    android:layout_marginTop="5dp"
                                                    android:layout_marginLeft="40dp"
                                                    android:layout_toRightOf="@+id/forgot_password_textView"
                                                    android:textStyle="bold"
                                                    android:textColor="@color/red"/>    -->

                                          <!-- Don't have an account TextView -->
                                          <TextView android:id="@+id/dontHaveAccountTextView"
                                                    android:layout_width="wrap_content"
                                                    android:layout_height="wrap_content"
                                                    android:layout_marginTop="30dp"
                                                    android:layout_marginLeft="15dp"
                                                    android:layout_below= "@+id/forgot_password_textView"
                                                    android:text="@string/donthave_account_textview"
                                                    android:textColor="@color/black" />

                                          <!-- Sign up now TextView -->
                                          <TextView android:id="@+id/signup_now_textView"
                                                    android:layout_width="wrap_content"
                                                    android:layout_height="wrap_content"
                                                    android:layout_marginTop="30dp"
                                                    android:layout_toRightOf="@+id/dontHaveAccountTextView"
                                                    android:layout_below= "@+id/forgot_password_textView"
                                                    android:text="@string/signup_now_textview"
                                                    android:textColor="@color/blue" />

                            </RelativeLayout>
</LinearLayout>
        </LinearLayout>
    </LinearLayout>
</ScrollView> 
```

屏幕显示如下。

![在此处输入图像描述](../Images/742d1119c05c944b3b0b0916ad1760b4.png)

屏幕没有完全纵向拉伸。如您所见，屏幕截图底部有黑色补丁。

**谁能让我知道我哪里出错了？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T00:17:29.733

添加`android:fillViewport="true"`到您的`ScrollView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:22:02.550

第一个线性布局的高度不是 "match_parent" 。

这取决于它的孩子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T23:26:13.963

应该：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@android:color/white" > 
```

并删除 ScrollView

# windows - 如何创建 Visual Studio 2012 聊天框控件？

> ID：14389935
> 
> 赞同：1
> 
> 时间：2013-01-17T23:19:03.827
> 
> 标签：windows, windows-8, visual-studio-2012, chat

我正在使用visual studio 2012制作一个应用程序，它可以是metro风格或windows形式我只需要一个控件，它的行为就像你发送消息后出现的地方......就像windows上的消息应用程序中的那个8和iphone一样...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:45:34.920

只需对列表项进行一些自定义的标准 WPF 列表框即可。[就像在这个问题中所做的那样](https://stackoverflow.com/q/1113548/736079)。

无需任何第三方控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T23:21:12.597

有三种方式：

1.  一种是使用富文本框->更难，但看起来更好
2.  或者普通的文本框
3.  或者制作自己的文本框元素

# php - 在命令行中获取 PHP 中的 ini 设置

> ID：14389938
> 
> 赞同：29
> 
> 时间：2013-01-17T23:19:06.603
> 
> 标签：php, linux

在 Linux 命令行上，是否可以运行命令来获取 PHP ini 设置值？

我知道我可以回显[phpinfo()](https://www.php.net/manual/en/function.phpinfo.php)或者只是去检查 .ini 文件，但是我看不到要运行的命令会直接在命令行上显示该值。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-17T23:21:11.490

```
php -i | grep 'my_value' 
```

或者

```
php -r "echo ini_get('my_value');" 
```

或者

```
grep 'my_value' /path/to/php.ini 
```

# javascript - 如何暂停对计算属性的订阅？

> ID：14389940
> 
> 赞同：0
> 
> 时间：2013-01-17T23:19:16.263
> 
> 标签：javascript, knockout.js

KnockoutJS 中有没有办法暂停对读/写计算的 observable 的订阅？我的意思是我不希望在特定情况下它受到其他属性变化的影响。

我的具体情况是我有属性：

*   `.Total`
*   `.Discount`
*   `.FinalTotal`

用户可以`Discount`在`FinalTotal`输入中写入新值。如果用户改变`Discount`了，`FinalTotal`就会重新计算（就是`Total`-`Discount`计算就可以了）。

如果用户更改`FinalTotal`，`Discount`将重新计算。因此，如果我将它们创建为计算值，我会得到这个无穷无尽的事件序列：

1.  用户变更`Discount`
2.  淘汰赛重新计算`FinalTotal`
3.  因为`Discount`依赖`FinalTotal`这个会重新计算`Discount`

...等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T00:32:53.490

我不确定你的公式是什么，但这里有一个使用两个计算得很好的 observables 的例子：

```
function ViewModel() {
    var self = this;
    self.Total = ko.observable();
    self.Discount = ko.computed(function() {
        return self.Total() * .1;
    });
    self.FinalTotal = ko.computed(function() {
        return self.Total() - self.Discount();
    });
} 
```

# sas - 使用 ODS 和 Proc Print 突出显示 SAS 条件行

> ID：14389941
> 
> 赞同：1
> 
> 时间：2013-01-17T23:19:20.823
> 
> 标签：sas, sas-ods

对于名字以“J”开头的人，我想将**整行变为红色。**这可以使用`proc print`吗？

```
ods html file=odsout style=htmlblue ;

proc print data=sashelp.class noobs label;  
  var name age;
run;

ods html close; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T14:45:48.593

我不相信使用 PROC PRINT 是可能的。PROC REPORT 可以生成相同的输出，但是行是红色的。

完全相同的：

```
proc report data=sashelp.class nowd;
columns name age;
run; 
```

用红色：

```
proc report data=sashelp.class nowd;
columns name age;
compute name;
 if substr(name,1,1)='J' then
     call define(_row_, "style", "style=[backgroundcolor=red]");
endcomp;
run; 
```

当然，我认为使用样式定义会更简洁一些，但对于一次性的事情来说，这很容易。

# android - 使用 setRetainInstance(true) 时更新的 Fragment 视图状态丢失

> ID：14389943
> 
> 赞同：0
> 
> 时间：2013-01-17T23:19:32.353
> 
> 标签：android, view, android-fragments, state

我正在尝试保存片段状态。我有一个活动和几个片段。操作顺序：添加第一个片段，手动更改视图（使第一个 LinearLayout GONE 和第二个 LinearLayout VISIBLE 可见），分离片段，添加另一个片段，分离它并再次附加第一个片段。

*添加/附加/分离效果很好，但 setRetainInstanse(true) 仅保存初始片段状态。*

最后，我在我的片段（而不是第二个）上看到了第一个 LinearLayout，所以我尝试用手制作它，但它不起作用：

```
@Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

if (savedInstanceState != null) {
            if (savedInstanceState.containsKey(BUNDLE_IS_LOADING)) {
                if (savedInstanceState.getBoolean(BUNDLE_IS_LOADING)) {
                    mBlockContent.setVisibility(View.GONE);
                    mBlockProgress.setVisibility(View.VISIBLE);

                } else {
                    mBlockContent.setVisibility(View.VISIBLE);
                    mBlockProgress.setVisibility(View.GONE);
                }
            }
        }
        }

        setRetainInstance(true);
}

@Override
public void onSaveInstanceState(Bundle b) {
    super.onSaveInstanceState(b);
    b.putBoolean(BUNDLE_IS_LOADING,
            mBlockProgress.getVisibility() == View.VISIBLE);
} 
```

我使用兼容性库 rev。11.

**我的解决方案：**

```
 private boolean isProgressing;

private void saveViewsState() {
    isProgressing = mBlockProgress.getVisibility() == View.VISIBLE;
}

private void switchToProgress() {
    mBlockContent.setVisibility(View.GONE);
    mBlockProgress.setVisibility(View.VISIBLE);
}

private void switchToContent() {
    mBlockContent.setVisibility(View.VISIBLE);
    mBlockProgress.setVisibility(View.GONE);
}

@Override
public void onSaveInstanceState(Bundle b) {
    super.onSaveInstanceState(b);
    saveViewsState();
}

@Override
public void onPause() {
    super.onPause();
    saveViewsState();
}

@Override
public void onResume() {
    super.onResume();
    if (isProgressing) {
        switchToProgress();
    } else {
        switchToContent();
    }
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    if (isProgressing) {
        switchToProgress();
    } else {
        switchToContent();
    }
} 
```

# java - 尝试通过将“=sxx”附加到 URL 来从应用引擎获取调整大小的图像

> ID：14389945
> 
> 赞同：0
> 
> 时间：2013-01-17T23:19:37.133
> 
> 标签：java, android, google-app-engine, resize, blobstore

我正在尝试通过将“=sxx”附加到 URL 来从应用引擎获取调整大小的图像，如[图像应用引擎文档中所述](https://developers.google.com/appengine/docs/java/images/overview)。我正在从 Android 客户端执行此操作。

在获得我的图像的 blob 密钥后，我有这个 URL：

```
https://myapp.appspot.com/mobile/serve_image?blob-key=1233xblabla 
```

这一切都有效，但是一旦我告诉应用引擎通过附加“= s70”来给我那个最长边为 70 像素的图片，BitmapFactory 告诉我，该 URL 无效。所以我这样做的 URL 是（这是它应该如何工作的？）：

```
https://myapp.appspot.com/mobile/serve_image?blob-key=1233xblabla=s70 
```

我正在使用的代码是这样的：

> URL url = 新 URL(SERVER_URL + "/serve_image?blob-key=" + photo + "=s70"); bm = BitmapFactory.decodeStream(url.openConnection() .getInputStream());

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:31:19.223

您不使用获取服务网址。获取服务 url 如下所示。试试看 ：

```
https://lh6.ggpht.com/lOghqU2JrYk8M-Aoio8WjMM6mstgZcTP0VzJk79HteVLhnwZy0kqbgVGQZYP8YsoqVNzsu0EBysX16qMJe7H2BsOAr4j=s70 
```

HTML：

```
<img  alt="image" src="https://lh6.ggpht.com/lOghqU2JrYk8M-Aoio8WjMM6mstgZcTP0VzJk79HteVLhnwZy0kqbgVGQZYP8YsoqVNzsu0EBysX16qMJe7H2BsOAr4j=s70"/></a> 
```

# asp.net - asp.net 模式 - 域模型

> ID：14389952
> 
> 赞同：0
> 
> 时间：2013-01-17T23:20:14.110
> 
> 标签：asp.net, design-patterns, domain-model

我正在阅读[Scott Millet 的专业 asp.net 设计模式](https://rads.stackoverflow.com/amzn/click/com/0470292784)。我在第 68 页 - 阅读领域模型。

我真的很喜欢领域模型的工作方式。但我需要更简单的例子来告诉我它是如何工作的。

你知道我可以阅读的任何资源吗？甚至有一个实验室我可以尝试继续前进？我不需要 MVC 的东西，因为我还没有。我的域模型将适用于不同的平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T05:01:34.897

您说您不需要 MVC，因为您“还没有”。根据我自己的经验，我的观点是，培养你的技能的一个好方法是在介绍 MVC 的同时进行更多的 DDD 阅读。Jimmy Nilsson 的书“应用领域驱动设计和模式”很有名，内容全面，但也非常平易近人。我会阅读它，同时在以下位置逐步浏览 29 个视频：[http ://www.asp.net/mvc/videos/mvc-2/how-do-i/creating-a-tasklist-application-与-aspnet-mvc](http://www.asp.net/mvc/videos/mvc-2/how-do-i/creating-a-tasklist-application-with-aspnet-mvc)。

此外，您会注意到 Scott Millet 在致谢中感谢 Rob Conery。我认为 Rob 在 TekPub 上的一些免费视频可能会对您有所帮助。特别是，我正在考虑名为“概念”[http://tekpub.com/products/concepts] 的免费五部分系列，其中涵盖 DI、IoC、“带有接口的松散设计”、“带有 Specflow 的行为驱动设计” “， 和更多。

# scala - 不符合 lambda 类型的种类

> ID：14389972
> 
> 赞同：5
> 
> 时间：2013-01-17T23:22:16.993
> 
> 标签：scala, types, existential-type, type-kinds, partially-applied-type

“种类”类型有问题：

```
trait Sys[ S <: Sys[S]]
trait Expr[S <: Sys[S], A]
trait Attr[S <: Sys[S], A[_]]
def test[  S <: Sys[S]]: Attr[S, ({type l[x<:Sys[x]]=Expr[x,Int]})#l] = ??? 
```

这失败了

```
error: kinds of the type arguments (S,[x <: Sys[x]]Expr[x,Int]) do not conform
to the expected kinds of the type parameters (type S,type A) in trait Attr.
[x <: Sys[x]]Expr[x,Int]'s type parameters do not match type A's expected parameters:
type x's bounds <: Sys[x] are stricter than type _'s declared bounds >: Nothing <: Any
           def test[S <: Sys[S]]: Attr[S, ({type l[x<:Sys[x]]=Expr[x,Int]})#l] = ???
                                  ^ 
```

声明的界限有什么问题？我是否需要将该 cr*ppy 部分应用的类型携带到的类型构造函数中`trait Attr`？为什么？我可以在不触及 的定义的情况下解决这个问题`Attr`吗？

我确实需要函数边界`test`才能使实现工作，但我*不想*将这些边界扩散到公共接口`Attr`。

* * *

**注意**：如果我使用类型*成员*（我不想要的），它可以工作：

```
trait Attr[S <: Sys[S]] { type A[_]}
def test[  S <: Sys[S]]: Attr[S] { type A[S <: Sys[S]] = Expr[S, Int]} = ??? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T02:39:42.810

正如您所观察到的，在提供更高种类的类型参数时，您不能总是不匹配边界。有趣的是，这实际上是一个方差问题：

```
class A
class B extends A
trait NeedsNeedsA[T[S <: A]]
trait NeedsNeedsB[T[S <: B]]
trait NeedsA[S <: A]
trait NeedsB[S <: B]

def x: NeedsNeedsA[NeedsB] // fails
def y: NeedsNeedsB[NeedsA] // works 
```

如果您将更高种类的类型视为类型上的函数，这是有道理的，在其参数的范围内是逆变的。

有趣的是，在表面上很像子类型的结构类型中，Scala 并没有给出相同的错误：

```
def t: MemberNeedsA { type T[S <: B] }
def u: MemberNeedsB { type T[S <: A] } 
```

原因是结构类型有点像交集：

```
def s: MemberNeedsA with MemberNeedsB 
```

并且可能该交集实际上并不存在于自然界中，但 Scala 并没有对此进行检查。

好的，但这与您的问题无关。回到你的问题：我认为你有一个差异问题。你想`test`给调用者一个`Attr`，并且 an`Attr`拥有一个类型函数 ( `A[_]`)，你想说，*这* `Attr`有一个需要*更具体*参数的类型函数。我想你可以明白为什么你不应该被允许这样做——这与你不能用一个需要更具体参数的函数来代替需要更一般参数的函数的原因是一样的。

在这一点上，恐怕解决方案将不得不取决于您希望`Attr`能够完成什么。您需要弄清楚为什么在某些情况下比其他情况更需要限制类型参数。如果“某些`Attr`s 比其他 s 更具限制性”在您的程序中具有概念意义，您可以定义：

```
trait Attr[S <: Sys[S], B[Y <: B[Y]], A[X <: B[X]]]
def test[S <: Sys[S]]: Attr[S, Sys, L] = ... 
```

但是解决方案将取决于对`A[_]`' 论点的限制是什么意思。

# mysql - mysql存储过程，使用列名作为参数

> ID：14389973
> 
> 赞同：0
> 
> 时间：2013-01-17T23:22:19.623
> 
> 标签：mysql, select, stored-procedures, prepared-statement

我这里有一个包含 3 个字段的磁带表：

磁带

```
 TapesID      Title       Qty

     T1     BatDog         3

     T2    UnderCat        2

     T3    IronMouse       1

     T4    Boys Zone       1

     T5    RoboCat         1 
```

我想创建一个存储过程，通过输入磁带标题作为过程的参数来提取和显示磁带的特定 ID。该过程应称为 list_tspec_id。

你能帮帮我吗？我很难解决这个问题......

这是我的代码，但它不正确：

```
create procedure tapesid
@columnname varchar
AS
begin
select @columnname from tapes
end 
exec tapesid 'title' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:40:39.127

您已将其标记为[MySQL](http://dev.mysql.com/doc/refman/5.5/en/create-procedure.html)，所以......这是一个存储过程，尽管从您的示例中不清楚您真正想要它做什么或为什么。

作为参数传递给存储过程的变量不要在它们前面使用'@'。

```
DELIMITER $$

CREATE PROCEDURE list_tspec_id (IN my_title VARCHAR(254))
BEGIN

  SELECT TapesID, Title, Qty FROM Tapes WHERE Title = my_title;

END $$
DELIMITER ; 
```

然后...

```
mysql> CALL list_tspec_id('BatDog'); 
```

# javascript - 如何让不同的选项卡加载单独的 javascript 文件？

> ID：14389974
> 
> 赞同：0
> 
> 时间：2013-01-17T23:22:22.297
> 
> 标签：javascript, jquery, d3.js

我的代码如下：

```
<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <title>Demo</title>
    <link href="assets/bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">
    </head>
    <body>

        <div class="tabbable">
            <ul class="nav nav-tabs">
                <li class="active"><a class="atab" href="#a_tab" data-toggle="tab">A</a></li>
                <li><a class="btab" href="#b_tab" data-toggle="tab">B</a></li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane active" id="a_tab">
                    <h1>A</h1>
                    <acontent></acontent>
                </div>
                <div class="tab-pane" id="b_tab">
                    <h1>B</h1>
                    <bcontent></bcontent>
                </div>
            </div>
        </div>

        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
        <script src="http://d3js.org/d3.v3.js"></script>
        <script src="assets/bootstrap/js/bootstrap.js"></script>

        <script>
            $(".atab").click(function() {
                $.getScript("assets/a.js");
            })
        </script>
        <script>
            $(".btab").click(function() {
                $.getScript("assets/b.js");
            })
        </script>
    </body>
</html> 
```

我想做的是当我切换标签时，使用 D3.js 库加载不同的图表。

a.js 和 b.js 本质上是相同的，除了我选择特定元素（“acontent”或“bcontent”）：

```
var margin = {top: 20, right: 20, bottom: 30, left: 50},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var parseDate = d3.time.format("%d-%b-%y").parse;

var x = d3.time.scale()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

var line = d3.svg.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.val); });

var svg = d3.select("acontent").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.tsv("data.tsv", function(error, data) {
  data.forEach(function(d) {
    d.date = parseDate(d.date);
    d.val = +d.val;
  });

  x.domain(d3.extent(data, function(d) { return d.date; }));
  y.domain(d3.extent(data, function(d) { return d.val; }));

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Price ($)");

  svg.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line);
}); 
```

问题是，我似乎无法隔离这两个脚本。一旦我加载了 A，当我切换到 B 时，我会得到与 A 相同的图表。有没有办法让我设置它，以便我可以在两个不同的选项卡下显示两个不同的图表?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:09:33.260

当 a.js 和 b.js 的代码被封装在一个自执行函数中以避免可能的变量名冲突时，显示的代码似乎可以工作。

```
!(function (d3) {
   ... a.js code shown above ...
})(d3); 
```

演示和代码：[http ://bl.ocks.org/4561185](http://bl.ocks.org/4561185)

# jquery - 将值添加到 jquery 数据表中的隐藏列

> ID：14389978
> 
> 赞同：1
> 
> 时间：2013-01-17T23:23:04.013
> 
> 标签：jquery, datatables

我正在尝试为隐藏列添加价值。但它不起作用。有人可以告诉我我在这里缺少什么。

[http://live.datatables.net/ijotap/10/edit#javascript,html](http://live.datatables.net/ijotap/10/edit#javascript,html)

```
$(document).ready(function() {
  var oTable = $('#example').dataTable({
        bSortClasses: false, 
        "sRowSelect": "single",
        bFilter: false,
        bLengthChange : false,
        aoColumns: [ 
        /* Name */   null,
        /* IP */  null,
        /* Username */ null ,
        /* Password */  { "bVisible":    false }
        ]
  });
  $('#example').dataTable().fnAddData([ "name", "1.1.1.3", "username", "password" ]);
  var rows = $('#example').dataTable().fnGetNodes();
  for(var i=0;i<rows.length;i++) {
    console.log("name=" + $(rows[i]).find("td:eq(0)").html());  
    console.log("ip=" + $(rows[i]).find("td:eq(1)").html());
    console.log("username=" + $(rows[i]).find("td:eq(2)").html());
    console.log("pwd=" + $(rows[i]).find("td:eq(3)").html());
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:52:21.420

我不确定，但可能是图形表示不包括隐藏的 TD，所以只有 3 个 TD 而不是 4 个（在 firebug 上检查）。

您应该检索内部数据而不是图形 HTMLElement 节点。

尝试使用该方法`fnGetData()`。

从文档中阅读：

“根据提供的参数获取整个表格、单个行或单个单元格的数据”。

看看[http://www.datatables.net/api](http://www.datatables.net/api)

# android - Android 和触控笔检测

> ID：14389981
> 
> 赞同：2
> 
> 时间：2013-01-17T23:23:15.907
> 
> 标签：android, hardware

我在玩弄`MotionEvent.getToolType()`。
此功能应该能够区分手指和手写笔，但它似乎不适用于我的测试手写笔和终端。

那么，这里的这个功能是只允许将来支持基于手写笔的数字化仪平板电脑，还是可以用任何 4.x+ 平板电脑检测手写笔？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T14:24:47.580

我认为这仅适用于带有特殊驱动程序的特殊触控笔，并且可能不适用于适用于所有触摸屏设备的标准电容式触控笔。

# javascript - angularJS - 从 div 中的鼠标单击获取 x 和 y 位置

> ID：14389986
> 
> 赞同：37
> 
> 时间：2013-01-17T23:23:43.973
> 
> 标签：javascript, position, angularjs

我做了一个函数，应该在我在 div 内单击的位置添加一个项目。现在这个函数的问题是，每次我点击时，它都会获取文档的 x & y 位置，而不是 div 内的 x & y 位置。所以我真正想要的是，我的 div 的左上角应该给 x=0 & y=0，但我不知道这是否可能？我想还有另一种方法可以做到这一点..

```
$scope.addOnClick = function(event) {
        $scope.items.push( {
            "label": "Click",
            "value": 100,
            "x": event.x-50,
            "y": event.y-50,
        })
} 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-01-17T23:33:07.853

你需要改变`event.x`to`event.offsetX`和`event.y`to`event.offsetY`

您没有添加模板定义，但我会添加它以防万一：

```
<div ng-click="addOnClick($event)"></div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-08-06T22:57:15.813

在 html 文件中，使用：

```
<div (click)="test($event)"></div> 
```

并在 ts 文件中的函数中::

```
function test(e){
 console.log(e.clientX);
 console.log(e.clientY);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-29T12:58:06.463

对于那些使用拖动库并想要拖动元素的位置的 Angular 用户：

```
<div ng-click="OnDrag($event)"></div> 
```

并在控制器中

```
$scope.onDrag($event){
      console.log("X ->",$event.originalEvent.pageX,"Y ->",$event.originalEvent.pageY)

 } 
```

# android - 是否应该在较新的 android 平台上检查文本转语音引擎的存在？

> ID：14389988
> 
> 赞同：4
> 
> 时间：2013-01-17T23:23:58.717
> 
> 标签：android

在 Android Froyo-api8 到 Gingerbread api-10 中，文本转语音并不总是安装在系统上。前段时间听说，从某个 API 开始，**TTS**将成为 Android 不可或缺的一部分。

我想阻止在新平台上运行的代码中进行**TTS**可用性检查。有人对这个有经验么？

是否有任何关于文本转语音引擎的官方文档表明它将在某些平台上可用？

只是为了详细说明，我使用此代码来检查 TTS 是否存在。

```
 final Intent checkIntent = new Intent();
        checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        sourceActivity.startActivityForResult(checkIntent, TTS_CHECK_REQ); 
```

在 onActicityResult 我将结果代码与 CHECK_VOICE_DATA_PASS 匹配以考虑成功否则失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:11:36.970

来自[Android 开发者博客](http://android-developers.blogspot.fr/2009/09/introduction-to-text-to-speech-in.html)：

> 尽管所有支持 TTS 功能的 Android 设备都附带该引擎，但某些设备的存储空间有限，并且可能缺少特定于语言的资源文件。如果用户想要安装这些资源，TTS API 使应用程序能够查询平台以了解语言文件的可用性，并可以启动它们的下载和安装。因此，在创建您的活动时，第一步是检查是否存在具有相应意图的 TTS 资源：（您的示例意图如下）

我从中得到的是*引擎*是平台的核心部分。但是，*语音数据*不是，这就是您的意图实际检查的内容。不过，我不会禁用此检查，因为并非所有设备都保证在发货时安装了数据。

当然，最新的 Galaxy 或 Nexus 会，但更便宜的手机呢？*真正*便宜的呢？他们可能正在运行 ICS 或 JB，但制造商可能已经吝啬，或者只是想节省磁盘空间。自定义 ROM 呢？有些人以摆脱 Android 的“臃肿”而自豪。我几乎可以保证至少有一个删除语音数据。

# jsf - 单击提交时，JSF 页面在主模板中丢失 CSS 样式

> ID：14389991
> 
> 赞同：1
> 
> 时间：2013-01-17T23:24:14.513
> 
> 标签：jsf, commandbutton

我是 StackOverflow 的新手，虽然我已经关注了很长一段时间了。问题是：我有一个 JSF 页面，比如用户从不同页面登陆的确认页面。现在确认页面包含很多模板（其中有一些页眉和页脚图块以及 CSS、JS），当我到达那里时，它们会很好地显示出来。

确认页面中有一个表单，其中包含几个要提交的属性。当出现错误并单击提交时，所有模板都丢失了，我只得到带有错误消息的 /faces/confPage.xhtml。

下面是我的代码和结果：

`

```
 <h:form id="configForm" >

     ------
     ------
             <h:commandButton type="submit" id="xxxButton" value="Click here to           
                 Apply Changes" action="#{xxxBean.saveDataListTest}"          
                styleClass="applybutton" >

             </h:commandButton>
          </div>

     </h:form> 
```

`

这只是我展示的 xhtml 的一部分。我所有页面指向的常规 url 是 localhost:7001/XXX_GUI/faces/ ，这是样式显示所有模板的属性的时候。但是当我点击提交并且页面上有错误时，网址会变为：localhost:7001/XXX_GUI/faces/configPage.xhtml 而不是前者。

仅供参考 - 我在 faces-config.xml 中使用了结果。但是看起来当页面出现错误时，根本不会调用导航规则。

请原谅我的措辞和格式，因为这是我的第一篇文章。

任何帮助将不胜感激。

# sql-server - 如何检测实体是否已过时并需要重新加载

> ID：14389992
> 
> 赞同：1
> 
> 时间：2013-01-17T23:24:25.900
> 
> 标签：sql-server, entity-framework-5

假设我对我的上下文进行查询以检索特定实体。

现在我想找到最好的方法来了解数据库中的相应行（让我们保持简单，实体和 SQL 表之间的 1-1 映射）自创建我的实体以来发生了变化。

我考虑过使用 TimeStamp 列并执行一个简单的查询，每个我想知道实体是否已过时，例如：

```
var uptodate = (from e in context.mySet
                where e.TimeStamp == entityTimeStamp
                select e).Any(); 
```

通过索引 TimeStamp 列，我认为这将是一个快速的方法，但不幸的是我没有在互联网上找到任何确认......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:38:07.767

如果您正在寻找一种无需修改表即可执行此操作的方法，您可以使用该`CHECKSUM`命令并在映射中添加一个附加列（大概是一个视图）。这样您就不必担心向数据库添加新列。

像这样的东西应该工作：

```
select *, 
    BINARY_CHECKSUM(*) as CheckSumValue
from test WITH (NOLOCK); 
```

这是一些示例[小提琴](http://sqlfiddle.com/#!3/16179/2)。

话虽如此，有时最好在表中有一个 ModifiedDate 字段。如果是这种情况，那么这肯定是您检查更改的最佳方式。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T03:30:48.703

如果乐观锁没问题，那么在你的数据类的字段中添加 [ConcurrencyCheck] 属性怎么样。如果记录已被修改，这将导致更新失败。

该属性来自 System.ComponentModel.DataAnnotations

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T10:16:55.917

在使用 TimeStamp 进行进一步测试和调查后，通过查询了解它是否仍然相同（更准确地说，如果给定值仍在表中）似乎是最好的方法。

这种机制需要 TimeStamp 列上的索引以确保最佳性能（大约 O(Log(n) 而不是 (O(n))）。

# java - @PropertySource 中的类路径通配符

> ID：14389995
> 
> 赞同：11
> 
> 时间：2013-01-17T23:25:11.317
> 
> 标签：java, spring, config

我正在使用 Spring Java 配置来创建我的 bean。但是这个 bean 对 2 个应用程序是通用的。两者都有一个属性文件 abc.properties 但具有不同的类路径位置。当我把明确的类路径像

```
@PropertySource("classpath:/app1/abc.properties") 
```

然后它可以工作但是当我尝试使用通配符时

```
@PropertySource("classpath:/**/abc.properties") 
```

然后它不起作用。我尝试了许多通配符组合，但仍然无法正常工作。通配符是否有效`@ProeprtySource` 是否有任何其他方法可以读取标记为 的类中的属性`@Configurations`。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-18T04:51:45.887

@PropertySource API：`Resource location wildcards (e.g. **/*.properties) are not permitted; each location must evaluate to exactly one .properties resource.`

解决方法：试试

```
@Configuration
public class Test {

    @Bean
    public PropertyPlaceholderConfigurer getPropertyPlaceholderConfigurer()
            throws IOException {
        PropertyPlaceholderConfigurer ppc = new PropertyPlaceholderConfigurer();
        ppc.setLocations(new PathMatchingResourcePatternResolver().getResources("classpath:/**/abc.properties"));
        return ppc;
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-01T16:19:54.423

除了**dmay**解决方法：

由于 Spring 3.1 PropertySourcesPlaceholderConfigurer 应该优先于 PropertyPlaceholderConfigurer 使用，并且 bean 应该是静态的。

```
@Configuration
public class PropertiesConfig {

  @Bean
  public static PropertySourcesPlaceholderConfigurer placeHolderConfigurer() {
    PropertySourcesPlaceholderConfigurer propertyConfigurer = new PropertySourcesPlaceholderConfigurer();
    propertyConfigurer.setLocations(new PathMatchingResourcePatternResolver().getResources("classpath:/**/abc.properties"));
    return propertyConfigurer;
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-17T06:43:27.510

If you're using YAML properties, this can be achieved using a custom `PropertySourceFactory`:

```
public class YamlPropertySourceFactory implements PropertySourceFactory {

    private static final Logger logger = LoggerFactory.getLogger(YamlPropertySourceFactory.class);

    @Override
    @NonNull
    public PropertySource<?> createPropertySource(
            @Nullable String name,
            @NonNull EncodedResource encodedResource
    ) {
        YamlPropertiesFactoryBean factory = new YamlPropertiesFactoryBean();
        String path = ((ClassPathResource) encodedResource.getResource()).getPath();
        String filename = encodedResource.getResource().getFilename();
        Properties properties;
        try {
            factory.setResources(
                    new PathMatchingResourcePatternResolver().getResources(path)
            );
            properties = Optional.ofNullable(factory.getObject()).orElseGet(Properties::new);
            return new PropertiesPropertySource(filename, properties);
        } catch (Exception e) {
            logger.error("Properties not configured correctly for {}", path, e);
            return new PropertiesPropertySource(filename, new Properties());
        }
    }
} 
```

Usage:

```
@PropertySource(value = "classpath:**/props.yaml", factory = YamlPropertySourceFactory.class)
@SpringBootApplication
public class MyApplication {
    // ...
} 
```

# c# - 让 Ninject 工作

> ID：14389999
> 
> 赞同：0
> 
> 时间：2013-01-17T23:25:35.853
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, ninject, ninject-extensions

显然，我错过了一些东西。我有一个 MVC 应用程序并安装了 Ninject 3 和 MVC3 扩展（尽管我正在运行 MVC4）。我有一个`SiteSettings`在整个项目中引用的类，如下所示：

```
public class SiteSettings
{
    private static readonly Common.Logging.ILog Logger = Common.Logging.LogManager.GetCurrentClassLogger();
    private static ObservableDictionary<string, string> settings;
    private static bool Initialized = false;
    private static DataPersister persister;

    public static void Initialize()
    {
        if (Initialized) throw new InvalidOperationException("The SiteSettings object has already been initialized.");
        persister = new DataPersister();
        using (var u = persister.UnitOfWorkFactory.GetUnitOfWork())
        {
            var settingsList = u.SiteSettings.GetAll();
            settings = new ObservableDictionary<string, string>(settingsList.ToDictionary(key => key.SiteSettingName, value => value.SiteSettingValue));
            settings.OnChange += new kvpChangeEvent<string, string>(settings_OnChange);
        }
        Initialized = true;
    }

    static void settings_OnChange(object sender, odKVPChangeEventArgs<string, string> e)
    {
        using (var u = persister.UnitOfWorkFactory.GetUnitOfWork())
        {
            var setting = u.SiteSettings.GetByName(e.Key);
            setting.SiteSettingValue = e.Value;
            u.SiteSettings.Update(setting);
            u.Save();
            Logger.Info(i => i("Changed the '{0}' site setting from '{1}' to '{2}'.", e.Key, e.OldValue, e.Value));
        }
    }

    private static int _ItemsPerPage;
    public static int ItemsPerPage
    {
        get
        {
            return _ItemsPerPage;
        }
        set
        {
            _ItemsPerPage = value;
            settings["itemsPerPage"] = value.ToString();
        }
    }

    private static int _SessionLifeInMinutes;
    public static int SessionLifeInMinutes
    {
        get
        {
            return _SessionLifeInMinutes;
        }
        set
        {
            _SessionLifeInMinutes = value;
            settings["sessionLifeInMinutes"] = value.ToString();
        }
    }

    private static string _DateFormat;
    public static string DateFormat
    {
        get
        {
            return _DateFormat;
        }
        set
        {
            _DateFormat = value;
            settings["defaultDateFormat"] = value;
        }
    }
} 
```

我像这样构建了一个数据持久性对象：

```
public class DataPersister
{
    public IUnitOfWorkFactory UnitOfWorkFactory { get; set; }
} 
```

...我的`NinjectWebCommon.cs`长相是这样的：

```
public static class NinjectWebCommon
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start()
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IUnitOfWork>().To<NHUnitOfWork>();
        kernel.Bind<IUnitOfWorkFactory>().To<NHUnitOfWorkFactory>();
    }
} 
```

在我看来，我已经满足了依赖注入的所有要求。我的`Global.asax.cs` `Application_Start()`样子是这样的：

```
protected void Application_Start()
{
    ViewEngines.Engines.Clear();
    ViewEngines.Engines.Add(new MonoRazorViewEngine());

    AreaRegistration.RegisterAllAreas();
    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);
    ControllerBuilder.Current.DefaultNamespaces.Add("MyApplication.Application.Controllers");
    Initialize.Security();
    SiteSettings.Initialize();
} 
```

...然而，当我尝试收集我需要的数据时，我的`SiteSettings`班级总是有一个空值。`IUnitOfWorkFactory`

我究竟做错了什么？一切似乎都像所有例子所暗示的那样，但我没有得到爱。

**更新**

使用 Bassam Mehanni 的建议，我将我的`DataPersister`课程改写为如下所示：

```
public class DataPersister
{
    private IUnitOfWorkFactory UnitOfWorkFactory;
    public DataPersister(IUnitOfWorkFactory unitOfWorkFactory)
    {
        UnitOfWorkFactory = unitOfWorkFactory;
    }
    public IUnitOfWork GetUnitOfWork()
    {
        return UnitOfWorkFactory.GetUnitOfWork();
    }
} 
```

...但当然现在我的`SiteSettings`班级抱怨我的无参数构造函数。我该怎么办？

**更新 2**

好的，继续，我`DataPersister`像这样重写了我的课程：

```
public class DataPersister
{
    private static readonly Common.Logging.ILog Logger = Common.Logging.LogManager.GetCurrentClassLogger();

    private IUnitOfWorkFactory UnitOfWorkFactory { get; set; }
    public IUnitOfWork GetUnitOfWork()
    {
        return UnitOfWorkFactory.GetUnitOfWork();
    }
    [Inject]
    public DataPersister(IUnitOfWorkFactory factory)
    {
        Logger.Info("Injected constructor called");
        UnitOfWorkFactory = factory;
    }
    public DataPersister()
    {
        Logger.Info("Parameterless constructor called");
    }
} 
```

然后我`SiteSettings`像这样重写了我的课程：

```
public class SiteSettings
{
    private static readonly Common.Logging.ILog Logger = Common.Logging.LogManager.GetCurrentClassLogger();
    private ObservableDictionary<string, string> settings;
    private DataPersister persister;
    private SiteSettings()
    {
        persister = new DataPersister();
        using (var u = persister.GetUnitOfWork())
        {
            var settingsList = u.SiteSettings.GetAll();
            settings = new ObservableDictionary<string, string>(settingsList.ToDictionary(key => key.SiteSettingName, value => value.SiteSettingValue));
            settings.OnChange += new kvpChangeEvent<string, string>(settings_OnChange);
        }
    }
    private static SiteSettings instance;

    public static SiteSettings Instance
    {
        get
        {
            if (instance == null)
            {
                instance = new SiteSettings();
            }
            return instance;
        }
    }

    private void settings_OnChange(object sender, odKVPChangeEventArgs<string, string> e)
    {
        using (var u = persister.GetUnitOfWork())
        {
            var setting = u.SiteSettings.GetByName(e.Key);
            setting.SiteSettingValue = e.Value;
            u.SiteSettings.Update(setting);
            u.Save();
            Logger.Info(i => i("Changed the '{0}' site setting from '{1}' to '{2}'.", e.Key, e.OldValue, e.Value));
        }
    }

    private int _ItemsPerPage;
    public int ItemsPerPage
    {
        get
        {
            return _ItemsPerPage;
        }
        set
        {
            _ItemsPerPage = value;
            settings["itemsPerPage"] = value.ToString();
        }
    }

    private int _SessionLifeInMinutes;
    public int SessionLifeInMinutes
    {
        get
        {
            return _SessionLifeInMinutes;
        }
        set
        {
            _SessionLifeInMinutes = value;
            settings["sessionLifeInMinutes"] = value.ToString();
        }
    }

    private string _DateFormat;
    public string DateFormat
    {
        get
        {
            return _DateFormat;
        }
        set
        {
            _DateFormat = value;
            settings["defaultDateFormat"] = value;
        }
    }
} 
```

这不应该工作吗？因为它没有。该类`DataPersister`始终使用无参数构造函数调用。我的内核绑定如下所示：

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind<IUnitOfWork>().To<NHUnitOfWork>();
    kernel.Bind<IUnitOfWorkFactory>().To<NHUnitOfWorkFactory>();
} 
```

还有什么我想念的吗？这变得非常令人沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T23:45:37.410

通常 ninject 会在构造函数或其他东西中注入您的服务，它不会在运行时神奇地将所有接口转换为对象实例

例如：

```
public class MyController : Controller
{
   private IServiceThatINeed _serviceThatINeed;
   public MyController(IServiceThatINeed serviceThatINeed)
   { 
       _serviceThatINeed = _serviceThatINeed;
   }
} 
```

在这种情况下，由于您注册了内核实例，mvc 知道如何解决这种依赖关系，并将传递一个实现的对象的实例`IServiceThatINeed`（假设您告诉 ninject 如何解决这种依赖关系。

现在可能会有一个实例，您需要在不通过 mvc 框架将其注入构造函数的情况下获取服务，在这些实例中（就像您在此处所拥有的实例一样），您将需要使用`ServiceLocator`

例如：

```
var myService = ServiceLocator.Current.GetInstance<IServiceThatINeed>() 
```

要使用`ServiceLocator`，您需要添加对`Microsoft.Practices.ServiceLocation`

希望有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T11:56:44.770

在使用 IoC 容器时，不应该依赖非静态类的静态类。相反，您应该创建一个具有单例生命周期的非静态类。

1.  使您的 SiteSettings 类不是静态的。
2.  使用构造函数注入将所有依赖项（例如 IUnitOfWorkFactory）注入 SiteSettings
3.  在单例范围内为 SiteSettings 创建绑定
4.  在需要访问 unsing 构造函数注入的任何地方获取 SiteSettings 的实例。

例子：

```
public class SiteSettings {
    public SiteSettings(IUnitOfWorkFactory uowFactory) { .... }

    ....
}

public class INeedToAccessSiteSettings
{
    public INeedToAccessSiteSettings(SiteSettings siteSettings) { .... }
}

kenrel.Bind<SiteSettings>().ToSelf().InSingletonScope(); 
```