# StackOverflow 问答 14998000-14998999

# java - 仅编组了一个 XMLElementRef

> ID：14998000
> 
> 赞同：2
> 
> 时间：2013-02-21T08:50:05.670
> 
> 标签：java, jaxb, moxy

我有以下课程

```
@XmlRootElement(name = "entity")
public class Entity {

    @XmlElementRef
    protected AtomLink first;
    @XmlElementRef
    protected AtomLink second;

    public Entity() {
    }

    public Entity(AtomLink first, AtomLink second) {
        this.first = first;
    this.second = second;
    }
} 
```

这是我的测试代码：

```
Entity entity = new Entity(new AtomLink("first", "http://test/first"), new AtomLink("second", "http://test/second"));
JAXBContext context;
try {
    context = JAXBContextFactory.createContext(new Class[] { Entity.class } , null);
    Marshaller marshaller = context.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
    marshaller.marshal(entity, System.out);
} catch (JAXBException e) {
    e.printStackTrace();
} 
```

MOXy 的输出是错误的，因为缺少第一个链接：

```
<entity xmlns:atom="http://www.w3.org/2005/Atom">
    <atom:link rel="second" href="http://test/second"/>
</entity> 
```

Java JAXB RI 的输出是正确的：

```
<entity xmlns:atom="http://www.w3.org/2005/Atom">
    <atom:link rel="first" href="http://test/first"/>
    <atom:link rel="second" href="http://test/second"/>
</entity> 
```

它是 MOXy 中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:54:29.467

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

> 它是 MOXy 中的错误吗？

不，不是。问题是同一类型的两个属性都用 注释是无效的`@XmlElementRef`。如果您使用 JAXB RI 解组：

```
<entity xmlns:atom="http://www.w3.org/2005/Atom">
    <atom:link rel="first" href="http://test/first"/>
    <atom:link rel="second" href="http://test/second"/>
</entity> 
```

然后将其编组回来，就像 MOXy 你会得到：

```
<entity xmlns:atom="http://www.w3.org/2005/Atom">
    <atom:link rel="second" href="http://test/second"/>
</entity> 
```

* * *

**解决方法 - 任何 JAXB (JSR-222) 实现**

在 JAXB 中，重复元素应在集合属性中表示：

```
@XmlRootElement
public class Entity {

    @XmlElementRef
    protected List<AtomLink> first;

    public Entity() {
    }

} 
```

* * *

**使用 MOXy 的`@XmlPath`**

下面是一个示例，说明如何利用 MOXy 的`@XmlPath`扩展来支持此用例。

***包信息***

假设您在`@XmlSchema`注释中指定了以下命名空间信息。

```
@XmlSchema(
    xmlns={
       @XmlNs(prefix="atom", namespaceURI="http://www.w3.org/2005/Atom")
    }
)
package forum14998000;

import javax.xml.bind.annotation.*; 
```

***实体***

然后，您可以使用`@XmlPath`将字段映射到具有特定属性值的元素。由于我们匹配的不仅仅是元素名称/URI，因此我们不会遇到原始问题。

```
package forum14998000;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement(name = "entity")
public class Entity {

    @XmlPath("atom:link[@rel='first']")
    protected AtomLink first;

    @XmlPath("atom:link[@rel='second']")
    protected AtomLink second;

    public Entity() {
    }

    public Entity(AtomLink first, AtomLink second) {
        this.first = first;
    this.second = second;
    }

} 
```

***原子链接***

现在该`rel`属性已包含在`@XmlPath`注释中，我们不将其作为字段包含在`AtomLink`类中。

```
import javax.xml.bind.annotation.*;

@XmlRootElement(namespace="http://www.w3.org/2005/Atom", name="link")
@XmlAccessorType(XmlAccessType.FIELD)
public class AtomLink {

    @XmlAttribute
    private String href;

} 
```

***了解更多信息***

*   [http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html](http://blog.bdoughan.com/2011/03/map-to-element-based-on-attribute-value.html)
*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

# python - 通过 SOCKs 代理请求

> ID：14998006
> 
> 赞同：3
> 
> 时间：2013-02-21T08:50:11.353
> 
> 标签：python, python-requests

如何通过 SOCKs 代理发出 HTTP 请求（仅用`ssh -D`作代理）？我尝试过使用 SOCK 代理的请求，但它似乎不起作用（我看到了这个[拉取请求](https://github.com/kennethreitz/requests/pull/478)）。例如：

```
proxies = { "http": "socks5://localhost:9999/" }
r = requests.post( endpoint, data=request, proxies=proxies ) 
```

继续使用 requests 库会很方便，但如果知道它可以工作，我也可以切换到 urllib2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-06-03T11:08:32.283

由于[SOCKS 支持已添加到 requests 2.10.0](http://docs.python-requests.org/en/master/user/advanced/?highlight=socks#socks)，它非常简单，并且非常接近您所拥有的

1.  安装`requests[socks]`：

    ```
    $ pip install requests[socks] 
    ```

2.  设置您的代理变量，并使用它：

    ```
    >>> import requests
    >>> proxies = {
            "http":"socks5://localhost:9999",
            "https":"socks5://localhost:9999"
        }
    >>> requests.get(
            "https://api.ipify.org?format=json",
            proxies=proxies
        ).json()
    {u'ip': u'123.xxx.xxx.xxx'} 
    ```

需要注意的几点是不要在代理 URL 的末尾使用 a ，如果 SOCKS 服务器不支持 SOCKS5 `/`，您也可以将其用作方案。`socks4://`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T08:54:48.567

SOCKS 对请求的支持仍在等待中。如果你愿意，你可以在这里查看我的 Github 存储库以查看我的 Socksipy 库分支。这是当前正在集成到请求中的分支；不过，在 requests 完全支持它之前还需要一段时间。

[https://github.com/Anorov/PySocks/](https://github.com/Anorov/PySocks/)

它应该可以与 urllib2 一起使用。导入`sockshandler`您的文件，并按照其中的示例进行操作。你会想要像这样创建一个开瓶器：

```
opener = urllib2.build_opener(SocksiPyHandler(socks.PROXY_TYPE_SOCKS5, "localhost", 9050)) 
```

然后你可以使用`opener.open(url)`它应该通过代理隧道。

# embed - 在自定义 portlet 中嵌入 outofbox portlet

> ID：14998013
> 
> 赞同：1
> 
> 时间：2013-02-21T08:50:52.797
> 
> 标签：embed, liferay, portlet

我正在尝试在我的自定义 portlet 中嵌入日历 portlet。但无法做到这一点。我收到以下错误：

```
javax.servlet.ServletException: javax.servlet.jsp.JspException:
    ServletException in '/html/common/themes/portlet.jsp': 

File &quot;/html/common/themes/portlet.jsp&quot; not found
    at org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:911) 
```

这是我的课：

```
public class Hello extends MVCPortlet {

    public void doView(RenderRequest request, RenderResponse response) 
                    throws IOException, PortletException {

        final String portletId = "47"; //hello world portlet id

        final ThemeDisplay themeDisplay = (ThemeDisplay) request.getAttribute(WebKeys.THEME_DISPLAY);
        HttpServletRequest req = PortalUtil.getHttpServletRequest(request);

        HttpServletResponse res = (HttpServletResponse) request.getAttribute(PortletServlet.PORTLET_SERVLET_RESPONSE);

        ServletContext servletContext = req.getSession().getServletContext();

        PortletPreferences prefs = null;

        try {
            // get the portlet preferences
            prefs = PortletPreferencesFactoryUtil.getPortletPreferences(req, portletId);
        } catch (PortalException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SystemException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println("portlet preferences are " + prefs.toString());

        //method 3
        PortletPreferences originalPrefs = null;

        try {
            originalPrefs = PortletPreferencesFactoryUtil.getStrictLayoutPortletSetup(
            themeDisplay.getLayout(), portletId);
        } catch (SystemException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        PortletPreferences targetPrefs = null;

        try {
            targetPrefs = PortletPreferencesFactoryUtil.getStrictLayoutPortletSetup(
            themeDisplay.getLayout(), portletId);
        } catch (SystemException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        for (java.util.Map.Entry<String, String[]> entry : targetPrefs.getMap().entrySet()) {
            targetPrefs.reset(entry.getKey());
        }

        for (java.util.Map.Entry<String, String[]> entry : originalPrefs.getMap().entrySet()) {
            targetPrefs.setValues(entry.getKey(), entry.getValue());
        }

        // Store preferencec.
        targetPrefs.store();

        try {
            //finally render the portlet
            final String portletHtml = RuntimePortletEmbedUtil.renderPortlet(request, response, portletId, "");
        } catch (SystemException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ServletException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

关于 portlet 嵌入的任何见解，我已经尝试过处理[此博客](http://www.devatwork.nl/2011/07/liferay-embedding-portlets-in-your-portlet/ "Liferay：在您的 Portlet 中嵌入 Portlet")中的建议，但没有任何帮助。

有什么建议或方法可以做到这一点？

我猜想获得正确的 portlet 首选项和在目标 portlet 上添加 portlet 的权限存在问题。

如果您找到问题的一些解决方案，请更新。

# ssl - 与 HTTPS Web 代理的通信如何工作？

> ID：14998025
> 
> 赞同：3
> 
> 时间：2013-02-21T08:51:53.257
> 
> 标签：ssl, https, proxy, squid

我希望设置一个 HTTPS 代理并让 HTTP 客户端安全地将请求发送到代理。例如，浏览器可以发起 HTTP GET 请求，该请求应该是对代理的加密请求，然后代理删除加密，然后将请求传递给终端站点。Squid 代理可以设置为像这样工作（信息[在这里](http://wiki.squid-cache.org/Features/HTTPS#Encrypted_browser-Squid_connection)）。

我已经设置了这样一个启用了 HTTPS 的代理。但我无法编写自己的 HTTP 客户端来使用它。上面的同一个链接提到 chrome 是唯一支持这种代理的浏览器。我测试了 Chrome，它能够使用这样的 HTTPS 代理。

我希望了解这种代理是如何工作的，以便我可以编写自己的 HTTP 客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:59:39.937

据我了解，它是与常规 HTTP 代理的连接，但此连接是通过 TLS 建立的。客户端确实需要明确支持此方案，并且无法调整现有客户端（无需额外编码）。

# mysql - 有没有什么hibernate方言支持Mysql UTF-8 National Character Type？

> ID：14998027
> 
> 赞同：0
> 
> 时间：2013-02-21T08:52:03.030
> 
> 标签：mysql, hibernate, utf-8, hibernate3, dialect

我正在使用 NCHAR、NVARCHAR 和 NATIONAL VARCHAR。

[http://dev.mysql.com/doc/refman/5.0/en/charset-national.html](http://dev.mysql.com/doc/refman/5.0/en/charset-national.html)

MySqlDialect、MySql5INNODBDialect 中没有找到对上述数据类型的支持。

```
public MySQLDialect() {
    super();
    registerColumnType( Types.BIT, "bit" );
    registerColumnType( Types.BIGINT, "bigint" );
    registerColumnType( Types.SMALLINT, "smallint" );
    registerColumnType( Types.TINYINT, "tinyint" );
    registerColumnType( Types.INTEGER, "integer" );
    registerColumnType( Types.CHAR, "char(1)" );
    registerColumnType( Types.FLOAT, "float" );
    registerColumnType( Types.DOUBLE, "double precision" );
    registerColumnType( Types.DATE, "date" );
    registerColumnType( Types.TIME, "time" );
    registerColumnType( Types.TIMESTAMP, "datetime" );
    registerColumnType( Types.VARBINARY, "longblob" );
    registerColumnType( Types.VARBINARY, 16777215, "mediumblob" );
    registerColumnType( Types.VARBINARY, 65535, "blob" );
    registerColumnType( Types.VARBINARY, 255, "tinyblob" );
    registerColumnType( Types.LONGVARBINARY, "longblob" );
    registerColumnType( Types.LONGVARBINARY, 16777215, "mediumblob" );
    registerColumnType( Types.NUMERIC, "decimal($p,$s)" );
    registerColumnType( Types.BLOB, "longblob" );
//      registerColumnType( Types.BLOB, 16777215, "mediumblob" );
//      registerColumnType( Types.BLOB, 65535, "blob" );
    registerColumnType( Types.CLOB, "longtext" );
//      registerColumnType( Types.CLOB, 16777215, "mediumtext" );
//      registerColumnType( Types.CLOB, 65535, "text" );
    ........
} 
```

有没有什么hibernate方言支持Mysql UTF-8 National Character Type？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T07:22:44.367

MySQL 中没有这种类型，它只是应用的简写`CHARACTER SET 'utf8'`。

例如 writing`NCHAR(10)`与 writing 相同`CHAR(10) CHARACTER SET 'utf8'`，它不是真正的类型。

您可以轻松地配置您的连接和表以`utf8`开始使用，然后它不会产生任何影响。

# css - 嵌入带有页眉和页脚的 SWF

> ID：14998036
> 
> 赞同：1
> 
> 时间：2013-02-21T08:52:32.817
> 
> 标签：css, html

我无法让我的网站有页眉、中间嵌入的 swf 和页脚。每次它最终使我的页面必须按页眉+页脚的大小进行垂直滚动。我正在使用 swfObject 并将 swf 嵌入 100% 宽度和 100% 高度。

有谁知道如何设置 div 和 css 的正确顺序以使 swf 缩放到页眉和页脚之间的空白空间？

我正在尝试使用以下格式

```
<div id="container">
    <div id="header">
    <div id="content"> SWF would go here
    <div id="footer">
</div> end container 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:12:11.463

这就是你要找的……？:O

```
<div id="container">
<div id="header"> <p align="center"> Header</p>  </div>

<div id="content"> 
        <object width="400" height="80%"
            classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
            codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0">
            <param name="SRC" value="bookmark.swf">
            <embed src="bookmark.swf" width="100%" height="80%"></embed>
        </object>
</div>

<div id="footer"> <p align="center"> Footer</p>  </div> 
```

* * *

## 或者

你可以使用`javascript`方法。首先找出页眉和页脚之间的间距，然后调整 Flash 的大小。以下脚本可能会对您有所帮助。

```
 <script>
  function myFunction()
    {
      // get the heights //
      var containerHeight = document.getElementById("container").offsetHeight;
      var headerHeight = document.getElementById("header").offsetHeight;
      var footerHeight = document.getElementById("footer").offsetHeight;

      // get the vertical spacing //      
      var height_of_flash = containerHeight-(headerHeight+footerHeight);

      // set the heights //
      var e1 = document.getElementById("object_swf");
      e1.style.height =  height_of_flash;
   }
   </script> 
```

# c# - 当前使用的 SQLite 数据库？

> ID：14998038
> 
> 赞同：2
> 
> 时间：2013-02-21T08:52:46.063
> 
> 标签：c#, database, sqlite

我正在编写一个访问数据库的 C# 程序，但网络中的其他人也访问数据库。它是一个 SQLite 数据库。现在我想问一下*，如果有人在里面写，是否可以检查 SQLite 数据库？*

我原以为我的程序可以尝试写入 SQLite DB，如果其他人在 DB 中写入，我会收到警告“拒绝访问”。

但是我怎么能在 C# 中实现它呢？

我很抱歉英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:54:14.387

您需要一个不同的数据库：SQLite 无法处理并发写入连接。只有并发读取。

SQLite 作为本地/客户端存储的嵌入式数据库是一个不错的选择，但如果您需要来自不同线程/pc 的连接，则需要与[Sql Server Express](https://www.microsoft.com/en-us/sqlserver/editions/2012-editions/express.aspx)不同的解决方案。

如果您必须使用 SQLite，那么您应该设置一种机制，在编写时捕获访问拒绝异常并自动检索，直到可配置的超时到期。

如[SQLite 文档中所述](http://www.sqlite.org/faq.html#q5)

> 当 SQLite 尝试访问被另一个进程锁定的文件时，默认行为是返回 SQLITE_BUSY

测试 SQLITE_BUSY。这里有一些伪代码来说明一个解决方案：

```
while (continueTrying) {
   retval = sqlite_exec(db, sqlQuery, callback, 0, &msg);
switch (retval) {
  case SQLITE_BUSY:
    Log("[%s] SQLITE_BUSY: sleeping fow a while...", threadName);
    sleep a bit... (use something like sleep(), for example)
    break;
  case SQLITE_OK:
    continueTrying = NO; // We're done
    break;
  default:
    Log("[%s] Can't execute \"%s\": %s\n", threadName, sqlQuery, msg);
    continueTrying = NO;
    break;
}
}
return retval; 
```

[SQLite 多线程参考](http://www.sqlite.org/cvstrac/wiki?p=MultiThreading)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:00:58.907

SQLite 是基于文件的，因此它不支持同时多个连接。

您可以做的是尝试获取文件的锁定，如果失败，您知道其他人正在使用它，然后您可以向用户显示一条消息，或者可能实施暂停几秒钟并尝试的重试机制再等等。

底线，Sqlite db 文件的并发使用是不可能的。

# events - 如何在道场日历中显示装饰而不是事件名称？

> ID：14998043
> 
> 赞同：3
> 
> 时间：2013-02-21T08:52:52.140
> 
> 标签：events, dojo, calendar

我们在 Web 应用程序中使用 dojo 日历。我们还在日历上显示事件。

在矩阵视图中，我们不需要显示事件名称。但只是一些迹象表明那天有一些事件。例如，如果 1 月 15 日有 5 个事件，则当前它在矩阵视图的 1 月 15 日单元格上显示 5 个事件名称。

见下文

![在此处输入图像描述](../Images/7f26a1f92dce99321535b2ccef719c2a.png)

我们现在想要代替 5 个事件名称，我们可以显示一些指示符，比如可能是一些不同的颜色或垂直线来表示 1 月 15 日有事件，当您单击单元格时，您将获得详细信息日期的所有事件。

见下文

![在此处输入图像描述](../Images/2b46325c3b53045cfa90ef375d47350a.png)

道场日历中是否有任何设置可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T03:47:01.407

我相信你应该首先这样做：http: [//livedocs.dojotoolkit.org/dojox/calendar#grid-cell-styling](http://livedocs.dojotoolkit.org/dojox/calendar#grid-cell-styling)，这样你就可以将css更改为你想要的单元格。

# android - 多个布局文件Android

> ID：14998055
> 
> 赞同：0
> 
> 时间：2013-02-21T08:53:19.450
> 
> 标签：android, android-layout

我的布局有两个 XML 文件 - main.xml 和 test.xml。下面是 test.xml 中的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView xmlns:android="http://schemas.android.com/apk/res/android"  
        android:id="@+id/menu_objoptions"   
        android:layout_width="fill_parent"   
        android:layout_height="fill_parent"  
        android:padding="10dp"  >  
    </ListView>  

</LinearLayout> 
```

当我尝试获取 ListView 的实例时

> findViewById(R.id.menu_objoptions)

它返回空值。这是为什么？

编辑：这是相关的java代码：

```
public void objClick(String objid, long X, long Y) {

        final String objID = objid;
        final long x = X;
        final long y = Y;

        try {
            mHandle.runOnUiThread(new Runnable() {

                @Override
                public void run() {

                    PopupWindow popUp;
                    LinearLayout layout;

                    ListView mainListView;  
                    ArrayAdapter<String> listAdapter;  
                    String[] planets = new String[] { "Mercury", "Venus", "Earth", "Mars",  
                            "Jupiter", "Saturn", "Uranus", "Neptune"};    

                    ArrayList<String> planetList = new ArrayList<String>();  
                    planetList.addAll( Arrays.asList(planets) );  

                    listAdapter = new ArrayAdapter<String>(mHandle, R.layout.menu_objoptions_row, planetList);  

                    listAdapter.add( "Ceres" );  
                    listAdapter.add( "Pluto" );  
                    listAdapter.add( "Haumea" );  
                    listAdapter.add( "Makemake" );  
                    listAdapter.add( "Eris" );  

                    popUp   = new PopupWindow(mHandle);
                    layout  = new LinearLayout(mHandle);

                    layout.setOrientation(LinearLayout.VERTICAL);

                    mainListView = (ListView) mHandle.findViewById( R.id.menu_objoptions );  
                    mainListView.setAdapter( listAdapter );     
                    layout.addView(mainListView);

                    popUp.setContentView(layout);
                    popUp.setOutsideTouchable(true);
                    popUp.showAtLocation(rlmain, Gravity.NO_GRAVITY, 10, 10);
                    popUp.update((int)x,(int)y, 300, 80);

                }
            });

        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```

NullPointerException 在这一行被抛出：

```
mainListView.setAdapter( listAdapter ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:56:12.187

> 它返回空值。这是为什么？

可能你打电话太早了。你需要在之后调用它

```
setContentView(R.layout.someLayout); 
```

叫做。`setContentView`方法应该在你开始初始化另一个小部件之前调用，在你调用父构造函数之后立即调用。

## 更新：

因此，在您的情况下，您需要在要初始化任何小部件之前将您的设置`LinearLayout`为**contentView**`ListView`。

我的建议是初始化你的`LinearLayout`in`onCreate()`方法。

```
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.yourLinearLayout); // this must be called first
   ListView list = findViewById(R.id.menu_objoptions); // now it should works.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:02:50.560

在 Oncreate() 方法中设置 contentViewById (.....) 后，您应该初始化 LinearLayout。

守则应该是

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
               setContentView(R.layout.test);

        LinearLayout layout = (LinearLayout)findViewById(R.id.menu_objoptions); 
```

确保您使用 **LinearLayout**参考进行初始化。

# css - 文本框的 MVC4 图形验证

> ID：14998057
> 
> 赞同：0
> 
> 时间：2013-02-21T08:53:22.427
> 
> 标签：css, asp.net-mvc, jquery-validate, unobtrusive-validation

我在 MVC4 验证中遇到问题。目前，我使用 validationMessageFor 获取错误消息。它不是那么漂亮，所以我想改变我的验证。我想做图形验证。例如，我想验证输入表单中的电子邮件。如果电子邮件有效，我的文本框将如下所示。 ![在此处输入图像描述](../Images/3f58d926ef03010838b03c7599953de1.png)

如果电子邮件错误，我想向用户展示关注。 ![在此处输入图像描述](../Images/0b118d6c9953fd5b902278d03bae2f76.png)

在MVC4中，有可能做到吗？我应该如何设计我的文本框以根据图片获得？如何在文本框中添加刻度图标和十字图标以及信封图标？如果电子邮件格式错误，如何填充红色？

感谢您的帮助，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T09:19:10.990

这是可能的，尽管它与 ASP.NET MVC 几乎没有关系。让您的网页看起来漂亮是 CSS（位于客户端）的工作，而不是 MVC（位于服务器上）的工作。

你的 CSS 看起来像这样：

```
input[type="email"] {
    background: url('images/envelope.png') no-repeat center left 5px;
    padding-left: 50px; /* depends on width of envelope image */
}
input[type="email"].input-validation-error {
    background: url('images/envelope.png') no-repeat center left 5px, url('images/cross.png') no-repeat center right 5px;
} 
```

还有你的 HTML：

```
<input type="email" /> 
```

您自己必须将元素标记为无效。在我看来，我相信 MVC4 附带的 jQuery Validation 插件使用了开箱即用的`.input-validation-error`类。如果您已经完成了这项工作，那么再次将其应用于有效状态应该不会花费太多精力。

还有一件事。请注意，此示例在一个元素上使用了多个背景。这是一项 CSS3 功能，旧版浏览器不支持此功能。

***更新**

具体到 ASP.NET MVC，这里是如何生成字段：

```
@Html.TextBoxFor(model => model.Email, new { @class = "email" }) 
```

这是使它看起来漂亮的CSS：

```
input.email {
    background: url('images/envelope.png') no-repeat center left 5px;
    padding-left: 50px; /* depends on width of envelope image */
}
input.email.input-validation-error {
    background: url('images/envelope.png') no-repeat center left 5px, url('images/cross.png') no-repeat center right 5px;
} 
```

# c# - 在 asp.net 中创建动态子域

> ID：14998063
> 
> 赞同：0
> 
> 时间：2013-02-21T08:53:45.120
> 
> 标签：c#, asp.net, iis, shared-hosting

我需要以这样的方式进行 URL 重写

如果我的请求是 abc.domain.com，则应处理请求，例如

domain.com/default.aspx?cid=abc

例如，如果我提供*.domain.com，则请求应假定为 domain.com/default.aspx?cid=*

我不需要单独给 abc 子域可以是任何.. 但我的请求应该被处理，假设它是查询字符串值。

我的域在共享主机中...

任何人都可以在这个中发光..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:05:59.897

必须在 DNS 服务器和 IIS 上创建和配置子域。

设置站点以接受该子域后，您可以直接使用 将 `RewritePath`子域映射到具有不同参数的特定文件。

从`Application_BeginRequest`您开始检查并找到子域并将路径重写为：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{   
    var SubDomain = GetSubDomain(HttpContext.Current.Request.Host);
    // this is a simple example, you can place your variables base on subdomain
    if(!String.IsNullOrEmpty(SubDomain))
       RewritePath(HttpContext.Current.Request.Path + SubDomain + "/", false);  
}

// from : http://madskristensen.net/post/Retrieve-the-subdomain-from-a-URL-in-C.aspx
private static string GetSubDomain(Uri url)
{
  string host = url.Host;
  if (host.Split('.').Length > 1)
  {
    int index = host.IndexOf(".");
    return host.Substring(0, index);
  }

  return null;
} 
```

类似：
[如何将所有对特定域的请求重新映射到 ASP.NET 中的子目录](https://stackoverflow.com/questions/11491454/how-to-remap-all-the-request-to-a-specific-domain-to-subdirectory-in-asp-net/11492451#11492451)
[将网页请求重定向到默认子文件夹](https://stackoverflow.com/questions/11393441/redirect-web-page-requests-to-a-default-sub-folder/11393756#11393756)
[从 C# 中的 URL 检索子域](http://madskristensen.net/post/Retrieve-the-subdomain-from-a-URL-in-C.aspx)

# caching - HTML META 重定向到旧 URL

> ID：14998067
> 
> 赞同：0
> 
> 时间：2013-02-21T08:53:49.567
> 
> 标签：caching, redirect, meta, http-redirect

我只是想从例如 www.example.com/example 重定向到另一个 URL。
我在 example.com/example 中使用这个 index.html 对其进行了测试，它看起来像这样：

```
<html>
<head>
<title>TITLE</title>
<meta http-equiv="refresh" content="0; url=http://sample.org/sample">
</head>
Goto to URL <a href="http://sample.org/">http://sample.org/sample</a>
manually.
</html> 
```

它工作得很好。然后我将“ [http://sample.org/sample](http://sample.org/sample) ” URL 更改为我想要重定向到的 URL。但是问题就出现了。它仍然将 example.com/example 重定向到 sample.org/sample 而不是实际的。

我试图清除 Firefox 中的现金、历史记录和 cookie，并使用“ipconfig /flushdns”进行 DNS-Flush。我还删除了文件夹示例并新建了它。但没有任何帮助。

当我访问 example.com/example/index.html 时，它会重定向到我想要的 URL。但是，如果我正在访问 example.com/example，它仍然会重定向到不需要的 sample.org/sample。

任何胶水如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:38:30.047

我刚刚发现我们公司的代理也有缓存。我在公司网络之外对其进行了测试，效果很好。所以这是固定的；）

# ios - 在 UITabBar 级别拆分 Storyboard

> ID：14998069
> 
> 赞同：0
> 
> 时间：2013-02-21T08:54:00.253
> 
> 标签：ios, storyboard, split

我正在寻找在 UITabBar 级别拆分 Storyboard 的解决方案。我有一个带有 5 个选项卡的应用程序，我想用不同的故事板管理每个选项卡。该结构将是一个简单的最小故事板，带有标签栏控制器和 5 个更大的故事板，每个标签视图控制器（和 segues）都必须继承标签栏。每个人都曾这样拆分故事板吗？有什么线索吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:05:05.840

我认为这是可能的，这应该进入您自定义的“viewDidLoad” `UITabBarController`......

```
NSMutableArray *controllersArray = [[NSMutableArray alloc] init];

// Load the initial UIViewController from every Storyboard
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"Storyboard1" bundle:nil];
UIViewController *first = [sb instantiateViewControllerWithIdentifier:@"firstViewController"];
[controllersArray addObject:first];

// Repeat the process with the rest
...

// Set your controllers
self.viewControllers = [controllersArray copy]; 
```

请记住为每个 main 设置 Storyboard ID `UIViewController`，在示例中为“firstViewController”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T06:55:31.590

我们使用来自：[http](http://robsprogramknowledge.blogspot.co.il/search/label/UIStoryboard) ://robsprogramknowledge.blogspot.co.il/search/label/UIStoryboard 的 RBStoryboardLink 来解决这个问题

# android - 在 Android 中创建与三星相同的默认联系人应用程序视图

> ID：14998070
> 
> 赞同：-4
> 
> 时间：2013-02-21T08:54:02.483
> 
> 标签：android, contacts, expandablelistview

我正在 Android 中创建应用程序。我们需要创建与三星默认联系人应用程序相同的视图。我需要的是，我必须提到标题假设在此列表下具有名称 A 将包含从 A 开始的名称，然后在具有 B 的标题和在此列表下将包含从 B 开始的名称。除此之外，在右侧，我们有从 A、B、C、D....... 到 Z 开始的垂直列表。单击此将打开与该字符列表相关的列表。

请给我您的建议，我该如何实现该功能。

这是图像！![像这样创建视图](../Images/5aaba6222f70a70ec25a5d6efc292f1a.png)

任何形式的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:02:32.973

您可以使用 Hierarchy Viewer 工具来调查它是如何完成的。有很多关于如何使用它的教程，但它真的很简单。

**编辑：**

> Michal 我所知道的所有这一切，我需要的是，我必须提到标题假设在此列表下具有名称 A 将包含从 A 开始的名称，在该标题具有 B 之后，在此列表下将包含从 B 开始的名称。从这里，在右侧，我们有从 A 、 B、 C、 D....... 到 Z 的垂直列表。单击此将打开与该字符列表相关的列表。我正在改变上面的图像。

你的问题什么都没说，它不准确。你应该编辑它。它是一个 AlphabetIndexer/SectionIndexer。

看：

[右侧有字母的 ListView，如 iPhone。是否可以？](https://stackoverflow.com/questions/6475410/listview-with-alphabets-on-the-right-like-the-iphone-is-it-possible)

或在这里：

[http://twistbyte.com/tutorial/android-listview-with-fast-scroll-and-section-index#codesyntax_1](http://twistbyte.com/tutorial/android-listview-with-fast-scroll-and-section-index#codesyntax_1)

或在这里：

[http://vardhan-justlikethat.blogspot.in/2012/06/android-android-listview.html](http://vardhan-justlikethat.blogspot.in/2012/06/android-android-listview.html)

网上有很多例子。此示例使用的是 fastScroller，但如果您希望此栏右侧有字母，这里有示例：

[http://www.codeproject.com/Tips/548592/Android-Alphabetic-IndexBar-Scroller?display=Print](http://www.codeproject.com/Tips/548592/Android-Alphabetic-IndexBar-Scroller?display=Print)

# sql - 在 tsql 中对行进行分组

> ID：14998071
> 
> 赞同：-3
> 
> 时间：2013-02-21T08:54:09.793
> 
> 标签：sql, sql-server, tsql

如下所示，如果campaignIds 相等，我想让它们分组。但我不知道该怎么做。按 CampaignId 分组不起作用。

![在此处输入图像描述](../Images/5f2587e020fc6909a3bba860c353e081.png)

现场示例：[http ://www.sqlfiddle.com/#!3/cb1dd/2](http://www.sqlfiddle.com/#!3/cb1dd/2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:12:49.050

它应该得到每个费率数字的评级总和吗？您可以通过使用`Group By`CampaignID 和`SUM()`函数来做到这一点。

```
select CampaignId,
    sum(case when RateNumber = 1 then RateValue else null end) as Rate1,
    sum(case when RateNumber = 2 then RateValue else null end) as Rate2,
    sum(case when RateNumber = 3 then RateValue else null end) as Rate3,
    sum(case when RateNumber = 4 then RateValue else null end) as Rate4,
    sum(case when RateNumber = 5 then RateValue else null end) as Rate5,
    sum(case when RateNumber = 6 then RateValue else null end) as Rate6,
    sum(case when RateNumber = 7 then RateValue else null end) as Rate7,
    sum(case when RateNumber = 8 then RateValue else null end) as Rate8,
    sum(case when RateNumber = 9 then RateValue else null end) as Rate9,
    sum(case when RateNumber = 10 then RateValue else null end) as Rate10,
    sum(case when RateNumber = 11 then RateValue else null end) as Rate11,
    sum(case when RateNumber = 12 then RateValue else null end) as Rate12,
    sum(case when RateNumber = 13 then RateValue else null end) as Rate13,
    sum(case when RateNumber = 14 then RateValue else null end) as Rate14,
    sum(case when RateNumber = 15 then RateValue else null end) as Rate15,
    sum(case when RateNumber = 16 then RateValue else null end) as Rate16,
    sum(case when RateNumber = 17 then RateValue else null end) as Rate17,
    sum(case when RateNumber = 18 then RateValue else null end) as Rate18,
    sum(case when RateNumber = 19 then RateValue else null end) as Rate19,
    sum(case when RateNumber = 20 then RateValue else null end) as Rate20,
    sum(case when RateNumber = 21 then RateValue else null end) as Rate21,
    sum(case when RateNumber = 22 then RateValue else null end) as Rate22,
    sum(case when RateNumber = 23 then RateValue else null end) as Rate23,
    sum(case when RateNumber = 24 then RateValue else null end) as Rate24
    from CampaignRate
group by CampaignId; 
```

看看[小提琴](http://www.sqlfiddle.com/#!3/f3715/1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:27:00.630

研究在 SQL Server 中使用**数据透视**功能，它可能会产生更具可读性的 SQL [http://msdn.microsoft.com/en-gb/library/ms177410(v=sql.105).aspx](http://msdn.microsoft.com/en-gb/library/ms177410%28v=sql.105%29.aspx)

```
SELECT CampaignId, [1] AS Rate1, [2] AS Rate2, [3] AS Rate3
FROM 
(SELECT CampaignId, RateNumber, RateValue
FROM CampaignRate) p
PIVOT
(
SUM (RateValue)
FOR RateNumber IN
( [1], [2], [3] )
) AS pvt
ORDER BY pvt.CampaignId;
    GO 
```

# html - 如何在 HTML5 中创建一个看起来像窗口的画布

> ID：14998078
> 
> 赞同：0
> 
> 时间：2013-02-21T08:54:35.367
> 
> 标签：html, canvas

我想创建一个 HTML 页面，其中单击按钮将打开一个窗口对话框（一个看起来像带有关闭和调整大小选项的窗口的画布）。我如何继续创建这个设计。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T09:40:32.407

根据我的要求，我找到了具有重新调整大小和拖动的[JQueryUI 模式对话框的解决方案。](http://jqueryui.com/dialog/)

特别感谢 @wisdom 和 @Jarrod 帮助我找到解决方案。

# php - 使用 LIKE%% 在 Mysql 中搜索最后两个不同的值

> ID：14998093
> 
> 赞同：0
> 
> 时间：2013-02-21T08:55:32.637
> 
> 标签：php, mysql, sql-like

我有一个带有一些记录的 mysql 数据库。我想获得这种类型的最后两条记录：

注意：id 字段是自动递增的，但我的记录可能不会相互跟随。它看起来像这样：

```
ID MYVALUE
1  42-K0000001
2  42-K0000002
3  42-B0000001
4  42-B0000002 
```

我希望有 42-KXXXXXXX 和 42-BXXXXXX 的最后一条记录，以将其传递给 php 变量。

我试过这个：

```
mysql_query("SELECT myvalue from mydatabase WHERE myvalue LIKE %42-K% and myvalue LIKE %42-B% ORDER BY id DESC"); 
```

这会起作用吗：

```
 SELECT myvalue 
    FROM mydatabase 
    WHERE myvalue LIKE "k%" 
    ORDER BY id DESC 
    LIMIT x
UNION
SELECT myvalue 
    FROM mydatabase 
    WHERE myvalue 
    LIKE "b%" 
    ORDER BY id DESC 
    LIMIT x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:57:03.153

你必须使用 OR not AND 像这样

```
SELECT * myvalue from mydatabase WHERE myvalue LIKE '42-K%' OR myvalue LIKE '42-B%' ORDER BY id DESC 
```

或使用 MID 和 IN LIKE THIS

```
SELECT *
FROM x
WHERE MID(myvalue, 4, 1) IN ('K', 'B')
ORDER BY id DESC 
```

`MID(myvalue, 4, 1)`从位置 4创建一个`myvalue`字段的子字符串，包含 1 个字符！

它更容易阅读和更好地扩展

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T08:57:06.743

将您`AND`的替换为`OR`：

```
SELECT * myvalue 
FROM mydatabase 
WHERE myvalue LIKE %42-K% 
    OR myvalue LIKE %42-B% 
ORDER BY id DESC 
```

# winapi - 当使用 MsgWaitForMultipleObjectsEx 进行检查时，带有 WM_USER 的 PostMessage 似乎没有到达

> ID：14998094
> 
> 赞同：2
> 
> 时间：2013-02-21T08:55:42.387
> 
> 标签：winapi, sendmessage, waitformultipleobjects

我有一个带有几个线程循环的程序，您可以将任务发布到其中。这些线程循环之一是 UI 线程循环。它必须处理窗口消息以及发布的任务，所以我发送 WM_USER 消息来唤醒调度循环中的线程。

问题是有时（特别是当有很多其他窗口消息时`WM_PAINT`）`WM_RESIZE`我的`WM_USER`消息不会唤醒线程。似乎该`PostMessage`函数没有从`MsgWaitForMultipleObjectsEx`调用中唤醒线程，但我不知道为什么。

这就是它的样子（为简单起见，有些解释）：

```
#define HaveWorkMessage (WM_USER + 100)

class ThreadLoopUI {
public:
    ThreadLoopUI()
        : myHaveWork(0) {}

    void PostTask(Task& aTask) {
        {
            ScopedLock lock(myMutex);
            myTaskQueue.push_back(aTask);
        }

        ScheduleWork();
    }

    void ScheduleWork() {
        if (InterlockedExchange(&myHaveWork, 1)) {
            // No need to spam the message queue
            return;
        }

        if (!PostMessage(myHWnd, HaveWorkMessage, reinterpret_cast<WPARAM>(this), 0)) {
            std::cerr << "Oh noes! Could not post!" << std::endl;
        }
    }

    void Run() {
        for (;;) {
             // SIMPLIFICATION, SEE EDIT BELOW
             DWORD waitResult = MsgWaitForMultipleObjectsEx(0, NULL, (DWORD)INFINITE, QS_ALLINPUT, MWMO_INPUTAVAILABLE);

             if (waitResult == WAIT_FAILED) {
                  std::cerr << "Well, that was unexpected..." << std::endl;
                  continue;
             }

             bool doWork = false;

             MSG message;
             if (PeekMessage(&message, NULL, 0, 0, PM_REMOVE)) {

                   if (message == HaveWorkMessage) {
                        doWork = true;
                        InterlockedExchange(&myHaveWork, 0);
                   }

                   // Send the message on to the window procedure
                   TranslateMessage(&message);
                   DispatchMessage(&message);
             }

             if (doWork) {
                 // Process all tasks in work queue
             }
        }
    }
private:
    HWND                 myHwnd;
    Mutex               myMutex;
    std::vector<Task>   myTaskQueue;
    LONG volatile       myHaveWork;
} 
```

**编辑**：对上面的直接调用`MsgWaitForMultipleObjectsEx`是一种简化。我实际上调用了一个看起来像这样的函数：

```
void WaitForMessages() {
    DWORD waitResult = MsgWaitForMultipleObjectsEx(0, NULL, (DWORD)INFINITE, QS_ALLINPUT, MWMO_INPUTAVAILABLE);

    if (waitResult == WAIT_OBJECT_O) {
        // Comment from the Chromium source:
        // A WM_* message is available.
        // If a parent child relationship exists between windows across threads
        // then their thread inputs are implicitly attached.
        // This causes the MsgWaitForMultipleObjectsEx API to return indicating
        // that messages are ready for processing (Specifically, mouse messages
        // intended for the child window may appear if the child window has
        // capture).
        // The subsequent PeekMessages call may fail to return any messages thus
        // causing us to enter a tight loop at times.
        // The WaitMessage call below is a workaround to give the child window
        // some time to process its input messages.
        MSG message = {0};
        DWORD queueStatus = GetQueueStatus(QS_MOUSE);
        if (HIWORD(queueStatus) & QS_MOUSE &&
            !PeekMessage(&message, NULL, WM_MOUSEFIRST, WM_MOUSELAST, PM_NOREMOVE)) 
        {
            WaitMessage();
        }               
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:24:18.027

当`MsgWaitForMultipleObjects[Ex]`说它由于一条或多条消息而返回时，您必须[进入一个循环处理所有这些](http://blogs.msdn.com/b/oldnewthing/archive/2005/02/17/375307.aspx)消息。您的代码只处理一条消息，这意味着第二条消息仍未处理。这就是为什么你永远不会得到你的`WM_USER`信息：你在有机会看到它之前就放弃了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:41:07.647

不确定它是否是您的罪魁祸首，但您应该组织代码，以便`PostMessage()`保证在目标线程已经具有其消息循环之后使用。

新线程最初没有任何消息队列，并且仅在第一次尝试从中获取消息的调用后创建。我不确定`MsgWaitForMultipleObjectsEx()`这里是否重要，所以我建议通过调用来开始线程`PeekMessage()`，只是为了创建队列。

你的应用程序应该保证它在`PeekMessage()`返回之前永远不会向线程发布/发送消息，否则消息可能会丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:20:03.223

我现在找到了罪魁祸首，似乎在某些情况下，消息是由 Windows 在消息循环之外从队列中分派的（即它们是`WindowProcedure`自动发送的）。为了解决这个问题，我将我的更改`WindowProcedure`为：

```
LRESULT CALLBACK 
ThreadLoopUI::WindowProcedure( 
    HWND    aWindowHandle, 
    UINT    aMessage, 
    WPARAM  aWParam, 
    LPARAM  aLParam )
{
    switch (aMessage)
    {
    case HaveWorkMessage:
        // This might happen if windows decides to start dispatch messages from our queue
        ThreadLoopUI* threadLoop = reinterpret_cast<ThreadLoopUI*>(aWParam);

        InterlockedExchange(&threadLoop->myHaveWork, 0);

        // Read the next WM_ message from the queue and dispatch it
        threadLoop->PrivProcessNextWindowMessage();

        if (threadLoop->DoWork())
        {
            threadLoop->ScheduleWork();
        }

        break;
    }

    return DefWindowProc(aWindowHandle, aMessage, aWParam, aLParam); 
```

感谢大家的帮助和建议！

# xml - 使用 xslt 提取和列出一组值

> ID：14998095
> 
> 赞同：0
> 
> 时间：2013-02-21T08:55:42.963
> 
> 标签：xml, xslt

我有一个要求，我必须从不同的层次结构中提取和列出 id。下面是示例 XML：（我提供了 3 级层次结构来反映肤色）

**输入 XML：**

```
<Wrapper>
    <A Id="A@1">
        <B Id="B#1">
            <C Id="C$1"/>
            <C Id="C$2"/>
        </B>
        <B Id="B#2">
            <C Id="C$3"/>
            <C Id="C$4"/>
        </B>
        <B Id="B#3">
            <C Id="C$5"/>
            <C Id="C$6"/>
        </B>
        <B Id="B#4>
            <C Id="C$7"/>
            <C Id="C$8"/>
        </B>
    </A>
</Wrapper> 
```

**期望的输出：**

```
A Ids:
A@1

B Ids:
B#1
B#2
B#3
B#4

C Ids:
C$1
C$2
C$3
C$4
C$5
C$6
C$7
C$8 
```

**输入 XSL：**原理很简单：我遇到根元素“\”写入文本和 for-each 层次结构我提供**绝对 XPath** 和访问 Id .. 下面是代码：

```
<?xml version ="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>
  <xsl:variable name="linefeed" select="'&#10;'"/>  

  <xsl:template match="/">

    <!--List of A Ids-->
      <xsl:text>A Ids:</xsl:text>
      <xsl:value-of select="$linefeed"/>

      <xsl:for-each select="/Wrapper/A/@Id">
        <xsl:value-of select="concat(.,$linefeed)"/>
      </xsl:for-each>

      <xsl:value-of select="$linefeed"/>

    <!--List of B Ids-->
      <xsl:text>B Ids:</xsl:text>
      <xsl:value-of select="$linefeed"/>

      <xsl:for-each select="/Wrapper/A/B/@Id">
        <xsl:value-of select="concat(.,$linefeed)"/>
      </xsl:for-each>

      <xsl:value-of select="$linefeed"/>

    <!--List of C Ids-->
      <xsl:text>C Ids:</xsl:text>
      <xsl:value-of select="$linefeed"/>

      <xsl:for-each select="/Wrapper/A/B/C/@Id">
        <xsl:value-of select="concat(.,$linefeed)"/>
      </xsl:for-each>

      <xsl:value-of select="$linefeed"/>

  </xsl:template>
 </xsl:stylesheet> 
```

**有没有更好的办法？？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:30:42.477

以下解决方案基于按名称对元素进行分组，而不是按它们在层次结构中的位置。所以这个解决方案即使在

*   节点没有按名称分组，例如，C 元素可能位于 A 元素的根而不是 B 元素的子元素。
*   当您在层次结构中的任何位置添加与 A、B、C 不同的节点时（但是，它们必须是 Wrapper 的子节点），它们的 @Id 将由 XSLT 样式表自动列出。

如果您想要一个基于文档中节点位置的通用解决方案，而不是使用它们的名称对它们进行分组，请告诉我，我会尝试调整解决方案。同时，这是我基于“Muenchian Grouping”的解决方案

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text" indent="yes"/>

    <xsl:variable name="linefeed" select="'&#10;'"/>  

    <!-- Use key to group elements by local-name -->
    <xsl:key name="name-key" match="/Wrapper//*" use="local-name()"/>

    <xsl:template match="Wrapper">
        <!-- Obtain the first element for each group, where a group is
             the set of elements sharing a name -->
        <xsl:for-each select="//*[generate-id(.) = generate-id(key('name-key', local-name())[1])]">
            <!-- Print header -->
            <xsl:value-of select="concat(local-name(), ' Ids:', $linefeed)" />
            <!-- Obtain all the nodes (children of Wrapper) with the local-name of
                 the current node using the previous key -->
            <xsl:apply-templates select="key('name-key', local-name())" />
            <!-- Print line feed at the end of each different group -->
            <xsl:value-of select="$linefeed" />
        </xsl:for-each>
    </xsl:template>

    <!-- Print the information for each element -->
    <xsl:template match="*">
        <xsl:value-of select="@Id" />
        <xsl:value-of select="$linefeed" />
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:08:11.770

一种解决方案可能是：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>
    <xsl:variable name="linefeed" select="'&#10;'"/>

    <xsl:template match="/">
        <!--List of A Ids-->
        <xsl:text>A Ids:</xsl:text>
        <xsl:value-of select="$linefeed"/>
        <xsl:apply-templates select="//A" />

        <!--List of B Ids-->
        <xsl:text>B Ids:</xsl:text>
        <xsl:value-of select="$linefeed"/>
        <xsl:apply-templates select="//B" />

        <!--List of C Ids-->
        <xsl:text>C Ids:</xsl:text>
        <xsl:value-of select="$linefeed"/>
        <xsl:apply-templates select="//C" />
    </xsl:template>

    <xsl:template match="*">
        <xsl:value-of select="@Id" />
        <xsl:value-of select="$linefeed"/>
    </xsl:template>
</xsl:stylesheet> 
```

# c - 检测 FFmpeg 是否正在运行或已停止运行

> ID：14998096
> 
> 赞同：0
> 
> 时间：2013-02-21T08:55:43.280
> 
> 标签：c, process, ffmpeg

我正在使用**C**来扫描包含由 ffmpeg 提取的帧的目录。现在，如果在扫描期间到达最后一个文件，我需要检查两个条件：

1.  这是视频持续时间结束时的最后一个文件。
2.  这是最后一个文件，因为 ffmpeg 突然终止并且不再能够填充目录

我的**C**程序工作流程如下：

```
while(<there exists files in the directory>)
{
   // iterate over them and do something with each frame
}

// coming out of the loop means no more files available...so I need a if condition
if(<check if ffmpeg is stopped>) // <-- need to know what to put inside the condition
{
   // start it again
}
else
{
  // video is over, nothing more left to do
} 
```

我想我可以使用`Process ID`ffmpeg 来做到这一点，但我将如何获得这些信息？检查是否`ffpmeg`已停止的任何其他替代方法？

### 一些元数据

操作系统：**Windows 7**
IDE：**Dev C++**
使用的语言：**C**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:16:37.040

不确定这是否适合您的情况，但是...在 unix 世界中，在后台运行的程序通常会创建一个带有进程 ID 的公开可读文件。然后在完成后将其删除。

您可以从批处理脚本创建此文件，然后在您的 C 程序中检查该文件中的 pid 是否正在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:37:41.920

您绝对可以等待`FFmpeg`过程完成。您通常获取`ffmpeg.exe`进程句柄并使用[等待函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687069%28v=vs.85%29.aspx)等待它，检查它`GetExitCodeProcess`或两者兼而有之。

如果您没有句柄，但您有进程标识符，`OpenProcess`则会为您提供句柄。

当然，如果您使用本地 Windows API，您将直接处理帧，而不是通过文件和外部进程，那么您就不必遇到这种麻烦。

# ruby-on-rails - Rails 导入 CSV 记录 全部删除并重新创建

> ID：14998097
> 
> 赞同：1
> 
> 时间：2013-02-21T08:55:45.930
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, csv, import

我尝试基于以下实现 CSV 导入功能： [Rails Cast Import CSV](http://railscasts.com/episodes/396-importing-csv-and-excel)

它非常适合通过根据 ID 查找记录并编辑或创建记录来更新和插入新记录。

但是，它不考虑从 CSV 文件中删除的记录。

我没有经验，我认为可能解决这个问题的方法是删除所有记录并重建它们。但显然，这样做会出现性能问题。

所以，我想请教你们如何解决这样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:21:47.103

看起来您需要排除查询。

您可以将 row_ids 收集到一个数组中，然后删除所有记录

```
ids = []
CSV.foreach(file.path, headers: true) do |row|
 ids << row["id"]
end

Topic.where('id not in (?)',ids).delete_all 
```

仅供参考：[如何使用 ActiveRecord/Rails 表达 NOT IN 查询？](https://stackoverflow.com/questions/4307411/how-to-express-a-not-in-query-with-activerecord-rails)

在此之后，您可以运行正常的 csv 导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:18:01.863

@Jethroo 的建议非常好。您也可以在处理它们时将要添加的项目的 ID 添加到数组中，然后遍历现有记录，如果不在已处理的数组中，则删除。FE：

```
processed_ids = []
@csv_row.each do |r|
  process r
  processed_ids << r[:id]
end

Object.all.each do |o|
  next if processed_ids.include? o.id
  o.destroy
end 
```

不确定这是否是最有效的方法，因为您必须直接遍历所有对象：/。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T11:18:18.277

如果您基于 CSV 文件更新记录（您只想让记录出现在 CSV 文件中），您可以先删除所有记录，然后从 CSV 文件插入记录。您可以使用[smarter_csv](https://github.com/tilo/smarter_csv) gem 允许后台处理。

# android - 将视图保存到图像 - 位置或不工作

> ID：14998103
> 
> 赞同：1
> 
> 时间：2013-02-21T08:56:03.620
> 
> 标签：android, android-canvas, android-image, android-file, save-image

我正在尝试将我的视图保存为图像。我做了一些工作，没有显示任何错误，但我可以找到保存图像的位置（或在图库中）。图像是完全创建的，还是我有其他问题？从选项菜单中按红色时应保存图像：

```
case R.id.red:
                DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
                Date date = new Date();
                String FILENAME="Boenka";
                FileOutputStream fos = null;
                try {
                    fos = openFileOutput(FILENAME, Context.MODE_WORLD_READABLE);
                } catch (FileNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                parent.setDrawingCacheEnabled(true);
                Bitmap  bitmap = Bitmap.createBitmap( parent.getWidth(), parent.getHeight(), Bitmap.Config.ARGB_8888);
                Canvas canvas = new Canvas(bitmap);
                parent.draw(canvas); 
                bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos); 
                return true; 
```

这是我的主要 - 绘图类

```
public class Draw extends Activity {
    DrawView drawView;
    SignatureView signature;
    private RelativeLayout parent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        parent = (RelativeLayout) findViewById(R.id.signImageParent);
        signature = new SignatureView(getApplicationContext(), null);
        signature.setColor(Color.MAGENTA);
        parent.addView(signature);

    }

    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.my_options_menu, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.clear:
            signature.clear();
            return true;

        case R.id.red:
            DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
            Date date = new Date();
            String FILENAME="Boenka";
            FileOutputStream fos = null;
            try {
                fos = openFileOutput(FILENAME, Context.MODE_WORLD_READABLE);
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            parent.setDrawingCacheEnabled(true);
            Bitmap  bitmap = Bitmap.createBitmap( parent.getWidth(), parent.getHeight(), Bitmap.Config.ARGB_8888);
            Canvas canvas = new Canvas(bitmap);
            parent.draw(canvas); 
            bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos); 
            return true;

        case R.id.blue:
            signature.setColor(Color.BLUE);
            return true;
        case R.id.yellow:
            signature.setColor(Color.YELLOW);
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }

    @Override
    public void onBackPressed() {
        this.finish();
        super.onBackPressed();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:24:01.503

```
public void saveImage(Bitmap b,int count) throws Exception
    {

        String path = Environment.getExternalStorageDirectory().toString();
        OutputStream fOut = null;

        String s=at.getText().toString();
        String alphaAndDigits = s.replaceAll("[^a-zA-Z0-9]+","_");

        String fileName = alphaAndDigits+"_"+wr.name+"_"+count;
        File file = new File(path, fileName+".jpg");
        newFile=Uri.fromFile(file);
        uris.add(newFile);
        fOut = new FileOutputStream(file);

        b.compress(Bitmap.CompressFormat.JPEG, 85, fOut);
        fOut.flush();
        fOut.close();

        MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName());
    } 
```

试试这个功能，它对我来说效果很好，这是为了保存位图，请确保绘图缓存对你来说工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T12:37:47.110

**试试下面的代码，它可以工作**

**在清单中添加以下权限**

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

**MainActivity.java**

```
public class MainActivity extends Activity implements OnClickListener{
private DrawableView drawableView;   //here I have taken customview, it is optional, I am saving this view as image. You can take any layout or view
private Button saveBtn;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    drawableView = (DrawableView) findViewById(R.id.drawable_view);
    saveBtn = (Button) findViewById(R.id.save_btn);
    saveBtn.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    int id = v.getId();
    switch (id) {
    case R.id.save_btn:
        File file = saveBitMap(this, drawableView);    //which view you want to pass that view as parameter
        if (file != null) {
            Log.i("TAG", "Drawing saved to the gallery!");
        } else {
            Log.i("TAG", "Oops! Image could not be saved.");
        }
        break;
    default:
        break;
    }

private File saveBitMap(Context context, View drawView){
    File pictureFileDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),"Handcare");
    if (!pictureFileDir.exists()) {
        boolean isDirectoryCreated = pictureFileDir.mkdirs();
        if(!isDirectoryCreated)
            Log.i("ATG", "Can't create directory to save the image");
        return null;
    }
    String filename = pictureFileDir.getPath() +File.separator+ System.currentTimeMillis()+".jpg";
    File pictureFile = new File(filename);
    Bitmap bitmap =getBitmapFromView(drawView);
    try {
        pictureFile.createNewFile();
        FileOutputStream oStream = new FileOutputStream(pictureFile);
        bitmap.compress(CompressFormat.PNG, 100, oStream);
        oStream.flush();
        oStream.close();
    } catch (IOException e) {
        e.printStackTrace();
        Log.i("TAG", "There was an issue saving the image.");
    }       
        scanGallery(pictureFile.getAbsolutePath(), context);
    return pictureFile;
}
//create bitmap from view and returns it
private Bitmap getBitmapFromView(View view) {
    //Define a bitmap with the same size as the view
    Bitmap returnedBitmap = Bitmap.createBitmap(view.getWidth(), view.getHeight(),Bitmap.Config.ARGB_8888);
    //Bind a canvas to it
    Canvas canvas = new Canvas(returnedBitmap);
    //Get the view's background
    Drawable bgDrawable =view.getBackground();
    if (bgDrawable!=null) {
        //has background drawable, then draw it on the canvas
        bgDrawable.draw(canvas);
    }   else{
        //does not have background drawable, then draw white background on the canvas
        canvas.drawColor(Color.WHITE);
    }
    // draw the view on the canvas
    view.draw(canvas);
    //return the bitmap
    return returnedBitmap;
}
// used for scanning gallery
private void scanGallery(Context cntx, String path) {
    try {
        MediaScannerConnection.scanFile(cntx, new String[] { path },null, new MediaScannerConnection.OnScanCompletedListener() {
            public void onScanCompleted(String path, Uri uri) {
            }
        });
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

# dynamics-crm - Microsoft Dynamics CRM 服务器的 URL 是什么？

> ID：14998105
> 
> 赞同：1
> 
> 时间：2013-02-21T08:56:03.527
> 
> 标签：dynamics-crm, crm, microsoft-dynamics

今天我在我的 Windows Server 2008 r2 上安装了 Microsoft Dynamics CRM。

一切都很好，但现在我找不到指向我的主页的链接。

谁能告诉我 Microsoft Dynamics CRM 的默认 URL？我刚刚安装了它的 90 天免费试用版。

当我在浏览器中输入：`http://localhost/`然后我得到错误：

> HTTP 错误 401.2 - 未经授权 由于身份验证标头无效，您无权查看此页面。以下是关于我的服务器的一些信息： 详细的错误信息模块 IIS Web 核心通知 AuthenticateRequest 处理程序 StaticFile 错误代码 0x80070005 请求的 URL `http://localhost:80/` 物理路径 C:\inetpub\wwwroot 登录方法尚未确定登录用户尚未确定

我该如何解决？

如果可以的话，我想，我可以在我的网络浏览器中输入 URL，然后来自 CRM 的典型页面会出现吗？

我使用 Internet Explorer。而且我已经在我的服务器上拥有管理员权限。

编辑：好的，本地主机的问题发生了变化。当我现在输入 Localhost 时，我来到了 IIS 网站。但这对我帮助不大。所以，我所做的是：我`Windows authentication`从 IIS 服务器添加到服务器角色。我在安全部分找到了它。

但是来自 CRM 的 URL 的问题已经出现了。

编辑编辑：我发现，我有 CRM 的端口 5555。所以，当我在 Internet Explorer 中写：`http://localhost:5555/`然后出现了一个很长很复杂的错误。

```
 Server Error in '/' Application.
--------------------------------------------------------------------------------

Caller does not have enough privilege to set CallerOriginToken to the specified value. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: Microsoft.Crm.CrmException: Caller does not have enough privilege to set CallerOriginToken to the specified value.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[CrmException: Caller does not have enough privilege to set CallerOriginToken to the specified value.]
   Microsoft.Crm.Extensibility.ExternalMessageDispatcher.VerifyCallerOrigin(ExecutionContext context) +260
   Microsoft.Crm.Extensibility.ExternalMessageDispatcher.Execute(String messageName, Int32 primaryObjectTypeCode, Int32 secondaryObjectTypeCode, PropertyBag fields, CorrelationToken correlationToken, CallerOriginToken originToken, UserAuth userAuth, Guid callerId) +724
   Microsoft.Crm.Sdk.RequestBase.Process(Int32 primaryObjectTypeCode, Int32 secondaryObjectTypeCode, CorrelationToken correlationToken, CallerOriginToken originToken, UserAuth userAuth, Guid callerId) +149
   Microsoft.Crm.Sdk.RequestBase.Process(CorrelationToken correlationToken, CallerOriginToken originToken, UserAuth userAuth, Guid callerId) +183
   Microsoft.Crm.Sdk.CrmServiceInternal.Execute(RequestBase request, CorrelationToken correlationToken, CallerOriginToken originToken, UserAuth userAuth, Guid callerId) +465
   Microsoft.Crm.Sdk.InProcessCrmService.Execute(Object request) +2688
   Microsoft.Crm.Application.Platform.ServiceCommands.PlatformCommand.ExecuteInternal() +368
   Microsoft.Crm.Application.Platform.DataSource.RetrieveAvailableLanguages() +40
   Microsoft.Crm.Application.Utility.ApplicationLanguage.get_AvailableLanguages() +220
   Microsoft.Crm.Application.Controls.AppUIPage.get_AvailableLanguages() +9
   Microsoft.Crm.Application.Controls.AnonymousPage.OnInit(EventArgs e) +25
   Microsoft.Crm.Application.Web.Pages.ErrorHandlerPage.OnInit(EventArgs e) +211
   System.Web.UI.Control.InitRecursive(Control namingContainer) +143
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1477

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:2.0.50727.5466; ASP.NET Version:2.0.50727.5456 
```

编辑：现在它终于可以工作了。问题是，我的帐户不在隐私用户组中。我在这个非常有用的博客上找到了它：

[链接 1](http://support.cryptzone.com/cryptzone/topics/i_receive_the_error_mmc_could_not_create_the_snap_in_on_my_my_win2008_server/)
[链接 2](http://mscrm4humans.wordpress.com/2010/04/19/microsoft-crm-crmexception-caller-does-not-have-enough-privilege-to-set-callerorigintoken-to-the-specified-value/)
[链接 3](http://blogs.msdn.com/b/jonasd/archive/2008/01/11/caller-does-not-have-enough-privilege-to-set-callerorigintoken-to-the-specified-value.aspx/)

抱歉，我不能发布超过 1 个链接。所以我不得不在代码中做到这一点。希望这可以帮助有同样问题的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:35:49.093

网址很好，检查端口 80 中是否有其他应用程序。尝试在 iis 中设置 Windows 身份验证，请参阅[此](http://technet.microsoft.com/pt-pt/library/cc754628%28v=ws.10%29.aspx)。还要验证对 AD 的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:49:44.237

您可能希望在不同的端口上注册 CRM 服务器（例如，我们使用 5555），特别是如果它用于开发而不是暴露给客户。

并回答你的问题。地址如下。假设您注册了两个组织：*monkey*和*donkey*。

```
http://localhost:5555/monkey  
http://localhost:5555/donkey 
```

并且发现等服务如下（对于默认端口上的*猴子）。*

```
http://localhost:80/XRMServices/2011/Discovery.svc  
http://localhost:80/CRM-Konsulterna/XRMServices/2011/Organization.svc  
http://localhost:80/CRM-Konsulterna/XRMServices/2011/OrganizationData.svc 
```

你需要记住两件事（你可能已经知道了）。
1\. 80端口不需要明确指定，协议也不需要。
2\. *localhost*仅在您实际上在服务器上时才有效（否则，请指定 IP）。

# java - 设计可中断的 Runnable

> ID：14998109
> 
> 赞同：2
> 
> 时间：2013-02-21T08:56:08.770
> 
> 标签：java, multithreading

将 run 方法的内容包装在 while 循环中是否足以检查 THread 是否被中断以使任何线程可中断

```
public void run () {
  while (!Thread.interrupted()) {
     do something.
  }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:00:50.120

> 线程如何支持自己的中断？这取决于它目前在做什么。如果线程频繁调用抛出 InterruptedException 的方法，它会在捕获该异常后简单地从 run 方法返回。

[参考文档](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)

例如，如果您的线程在工作之间进入睡眠状态，那么最好 catch `InterruptedException`。

```
public void run(){
 while(true)
    try {
        Thread.sleep(4000);
    } catch (InterruptedException e) {
        // We've been interrupted: no more messages.
        return;
    }
} 
```

如果您的线程运行很长时间，您可以定期检查调用 Thread.interrupted，如果收到中断，则返回 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:12:45.927

interrupted() 是检查当前线程是否被中断的静态方法。isInterrupted() 是检查调用的 Thread 对象的实例。对于当前线程使用

```
if(!(Thread.interrupted())){//do something} 
```

当调用 Thread 对象时使用`if(myThread.isInterrupted()){//do something }`

# associations - CakePHP 2.x - 从表中获取数据而不创建模型

> ID：14998110
> 
> 赞同：0
> 
> 时间：2013-02-21T08:56:10.813
> 
> 标签：associations, cakephp-2.0

我刚刚开始学习 CakePHP，在这种情况下需要帮助。

我有一个表（学生）和相应的模型（学生），它有一个名为“教育资格”的属性，它可以有多个值（MBA、MCA、BCA、BA、PHD），所以我创建了一个包含所有列表的主表度。

现在，当学生要注册自己/她自己时，他必须在资格中选择多个选项。

我想在我的视图中从数据库中获取 DegreeMst 数据作为多个选项。我的问题是，在这种多对多关系中，我是否必须创建一个新模型 DegreeMst 然后创建与 Student 模型的多对多关系。

或者我可以在不创建新的 Model DegreeMst 的情况下做到这一点吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:47:18.537

首先，如果您发现自己需要在未在 MVC 框架中创建模型的情况下从表中获取数据，那么您很可能做错了什么。

如果您真的只有 5 个可能的值（MBA、MCA、BCA、BA、PHD），我可能只会在您的表中将它们设为 5 个单独的 tinyint(1) 字段，例如 has_mba、has_mca 等。然后只显示每个在您的视图中作为一个单独的复选框。这可能是最简单的方法。

如果您不想这样做，并且您肯定想要一个单独的 DegreeMst 表，那么您需要的是 [hasAndBelongsToMany 关系](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasandbelongstomany-habtm)。

您需要一个单独的连接表，例如 students_degreemsts，其中包含一个 student_id 和一个 degreemst_id 列。您不需要为连接表创建模型。

设置完成后，您视图中输出复选框的代码将类似于：

```
echo $this->Form->input('Student.DegreeMst',array('label'=>'Select your degrees','multiple'=>'true')); 
```

更新

您将需要 3 个数据库表和 2 个模型。您知道多对多（即 Cake 称之为 hasAndBelongsToMany）的关系和[连接表](http://en.wikipedia.org/wiki/Junction_table)吗？

在您的数据库中，您需要 3 个根据 CakePHP 约定命名的表：

学生 (id, name, address, other_field)
学位 (id, name, another_field)
students_degrees (id, student_id, degree_id)

最后一张表是您的连接表，它应该包含学生和学位表的这两个外键。在 CakePHP 中，连接表不需要模型或控制器。

您显然确实需要为 Students 表创建一个模型，您将在其中定义 hasAndBelongsToMany 关系：

```
public $hasAndBelongsToMany = array(
    'Degree' => array(
        'className' => 'Degree',
        'joinTable' => 'students_degrees',
        'foreignKey' => 'student_id',
        'associationForeignKey' => 'degree_id',
    ),
); 
```

您的学位表还需要一个模型，但您不必在该模型中再次定义 hasAndBelongsToMany 关系，除非您需要它。

# vb.net - Vb.Net调用方法时在参数中写一个sub

> ID：14998117
> 
> 赞同：1
> 
> 时间：2013-02-21T08:56:26.023
> 
> 标签：vb.net

我已经编写了一些代码，在我的方法参数中执行一个操作：

```
_myService.MyMethod(userId, profileId, Sub(message As EventArgs) _eventAggregator.SendMessage(message)) 
```

这是被调用的方法：

```
Public Sub MyMethod(userId As Guid, profileId As Guid, ByVal action As Action(Of EventArgs))
    Dim proxy = BuildProxy()

    AddHandler proxy.MyMethodCompleted, Sub(o, e) action(e)

    Using New OperationContextScope(proxy.InnerChannel)
        Dim request = New MyMethodRequest() With {.gebruikerId = userId, .omgevingsId = omgevingId}
        proxy.MyMethodAsync(request)
    End Using
End Sub 
```

现在我想扩展传递给我的服务方法的 Sub 以包括：

```
_myService.MyMethod(userId, profileId, Sub(message As EventArgs) _eventAggregator.SendMessage(message)
_localVariable = e.Result
End Sub) 
```

这显然是行不通的。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:06:08.510

已经找到了。从 c# 切换到 vb.net 并不总是那么容易；）

```
_myService.MyMethod(userId, profileId, Sub(message As EventArgs) 
    _eventAggregator.SendMessage(message)
    _localVariable = e.Result
    End Sub) 
```

只需要在我的子之后打下一行....

# android - Android 可扩展 GridView 类似于 Google 图片

> ID：14998125
> 
> 赞同：7
> 
> 时间：2013-02-21T08:57:10.607
> 
> 标签：android, android-gridview

我想创建可扩展的 GridView，其行为类似于 Google 图片页面。我想知道如何实现这样的功能：当我单击其中一张图片时，页面会展开并显示图片的详细信息。是否可以在 Android 中做类似的事情？

图像网格： ![谷歌图片](../Images/766f5775d54147fe6a2eb253aaaac41c.png)

扩展图像网格： ![谷歌图片展开](../Images/efc2e9a96dd90692560c325f950b3531.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T15:26:30.750

我认为您没有收到任何回复的原因是问题的措辞。当我第一次看到它时，我想，类似于可扩展列表视图。请参阅本[教程](http://www.androidhive.info/2013/07/android-expandable-list-view-tutorial/)。

但无论如何，要实现你想要的，你需要在你的GridView的OnClickListener中设置*“扩展”*功能。我建议使用您需要的布局进行对话活动（带有文本/链接/等的图像），然后在每个项目上单击，弹出对话框。它看起来与谷歌图像非常相似。

# gwt - Maps V3 的叠加面板

> ID：14998128
> 
> 赞同：0
> 
> 时间：2013-02-21T08:57:17.957
> 
> 标签：gwt, google-maps-api-3

在谷歌地图 V3 中，我需要覆盖一个面板而不是标记。我在 V2 中通过使用 addControlWidget() 方法来做到这一点。这是与css一起的代码。请帮助我在 V3 中实现相同的功能。

```
ContentPanel panel = new ContentPanel();
     FlexTable fTable = new FlexTable();
     fTable.setWidget(0, 1, new HTML("TEST1"));
     fTable.setWidget(1, 1, new HTML("TEST2"));
     panel.add(fTable);
     panel.setStyleName("cssstyle");
     MapWidget map = new MapWidget();
      map.addControlWidget(panel); 
```

CSS 代码：

```
.cssstyle {
         z-index: 1;
         float: right;
         position: absolute;} 
```

试图在地图顶部覆盖自定义小部件或面板（即，如在图表中显示图例）..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:16:22.003

使用 CustomControls 我可以在 GWT Maps V3 中添加（覆盖）面板。[这](http://ameenit.blogspot.in/2013/02/overlay-panel-to-maps-v3.html)是代码...

# jquery - JQGrid 列选择器格式

> ID：14998134
> 
> 赞同：1
> 
> 时间：2013-02-21T08:57:35.303
> 
> 标签：jquery, asp.net-mvc-3, jqgrid, jqgrid-asp.net

使用的插件 - jquery.jqGrid-4.4.4 和使用的自定义主题 - jquery-ui-1.9.2.custom.css

我需要格式化 JQGrid 列选择器的显示，使其看起来像[这个示例](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithColumnChooser5.htm)

但我似乎没有得到类似的选项来选择列，而是显示一个列表框来选择行，如下图所示![选择](../Images/40721e072986b7cbb6f23e6501a4e5fc.png)，通过为用户按下“Ctrl”键。同样在单击“确定”或“取消”时，jquery.1.9.0.js 会引发异常，如图所示![ColumnChooserError.png](../Images/f004648047f8765fc5f959d50ae5658d.png)

我的文件和链接的参考顺序如下：-

JS引用顺序

```
<link href="../../Content/jquery-ui/jquery.multiselect.css" rel="stylesheet" type="text/css" />

<script src="../../Scripts/jquery-grid/jquery.multiselect.js" type="text/javascript"></script>

<script src="../../Scripts/jqueryui/1.10.1/jquery-ui.min.js" language="javascript" type="text/javascript"></script>

<script src="../../Scripts/20110223/json2.js" language="javascript" type="text/javascript"></script>

<link rel="stylesheet" href="../../Content/jquery-grid/ui.jqgrid.css" type="text/css" />
<script src="../../Scripts/jquery-grid/grid.locale-en.js" type="text/javascript"></script>

<script src="../../Scripts/jquery-grid/jquery.jqGrid.min.js" type="text/javascript"></script>

<script src="../../Scripts/Custom_Scripts/list.js" type="text/javascript"></script> 
```

JQGrid 函数的 JS 存储在文件“list.js”中，最后引用。

其中的JS如下：-

```
$("#jqTable").GridUnload();
var mydata = { id: 1, name: 'abc' };
var mygrid = jQuery("#jqTable").jqGrid({
    url: perfectmspURL,
    mtype: 'POST',
    postdata: { 'mydata1': function () { return JSON.stringify(mydata); } },
    datatype: "json",
    colNames: data.colNames,
    colModel: data.colModel,
    multiselect: false,
    pgbuttons: true,
    rowNum: 25,
    //scroll:true,
    //rowList: [5, 10, 20, 50, 100],
           autowidth:true,
        //    width: 1100,
    height: "98%",
    //scrollOffset: 0,
    //forcefit: true,
    shrinktofit: false,     
    altRows: true,
    altclass: 'myAltRowClass',
    //pginput:false, 
    sortname : 'CompanyName',
    sortorder : 'desc',
    pager: jQuery('#jqTablePager'),
    sortorder: "asc",
    viewrecords: true
});

// appending the pager
jQuery("#jqTable").jqGrid('navGrid', '#jqTablePager', { del: false, add: false, edit:     false, search: false }, {}, {}, {}, { multipleSearch: true });

// for showing show/hide column
var width = parseInt($('#gridcontainer').width()-5);
var grid = $('#jqTable');
grid.jqGrid('navButtonAdd', '#jqTablePager',{ caption: "", buttonicon: "ui-icon-calculator",
             title: "Choose Columns",
             onClickButton: function () {
                 grid.jqGrid('columnChooser', {
                                        done : function (perm) {
                                               // alert("width " + width + "perm : " + perm);
                                                    if (perm) {
                                                        // "OK" button are clicked
                                                        //this.jqGrid("remapColumns", perm, true);
                                                        // the grid width is probably changed co we can get new width
                                                        // and adjust the width of other elements on the page
                                                        //var gwdth = this.jqGrid("getGridParam","width");
                                                        grid.jqGrid("setGridWidth",width);
                                                    } 
                                                    else {
                                                        // we can do some action in case of "Cancel" button clicked
                                                        this.jqGrid("setGridWidth",width);
                                                    }       
                                            }   // done function ends here 
                                        }); 
                                   }   // onClickButton function ends here.
         });      // navButtonAdd ends here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:32:43.393

js文件顺序似乎有问题。尝试更改脚本文件导入顺序

首先添加jquery，然后多选

改变

```
<script src="../../Scripts/jquery-grid/jquery.multiselect.js" type="text/javascript"></script>
<script src="../../Scripts/jqueryui/1.10.1/jquery-ui.min.js" language="javascript" type="text/javascript"></script> 
```

至

```
<script src="../../Scripts/jqueryui/1.10.1/jquery-ui.min.js" language="javascript" type="text/javascript"></script>
<script src="../../Scripts/jquery-grid/jquery.multiselect.js" type="text/javascript"></script> 
```

# javascript - 适合包含两个图像的框

> ID：14998137
> 
> 赞同：1
> 
> 时间：2013-02-21T08:57:44.793
> 
> 标签：javascript, jquery, html

我正在使用 jquery 调整大小效果（无 css）

我遇到的问题是调整图像的大小可以正常工作，但我不能让它将两个图像放在同一行，就像设计一样。如果图像是水平的，它将是每行一个，但如果它是垂直的，它应该每行安排两个，并且调整大小对两者都起作用，知道如何实现这一点吗？

这是我的脚本：

```
 $('.gallery_item').each(function(){
        $('.gallery_img').each(function(){
            var ww = $(window).width() - 60 - 230;
            var wh = $(window).height() - 60;
            var iar = $(this).attr('height') / $(this).attr('width');
            var war = wh / ww;
            if(iar <= war){
                $(this).attr("width" , ww);
                $(this).attr("height" , ww * iar);
            }else{
                $(this).attr("height" , wh);
                $(this).attr("width" , wh / iar);
            }
            $('.gallery_item').css({
                'width' : $(this).attr('width'),
                'height' : $(this).attr('height'),
                'padding-bottom' : 0
            });
        });
    })

    $(window).bind('resize' , function(){

    $('.gallery_item').each(function(){
        $('.gallery_img').each(function(){
            var ww = $(window).width() - 60 - 230;
            var wh = $(window).height() - 60;
            var iar = $(this).attr('height') / $(this).attr('width');
            var war = wh / ww;
            if(iar <= war){
                $(this).attr("width" , ww);
                $(this).attr("height" , ww * iar);
            }else{
                $(this).attr("height" , wh);
                $(this).attr("width" , wh / iar);
            }
            $('.gallery_item').css({
                'width' : $(this).attr('width'),
                'height' : $(this).attr('height'),
                'padding-bottom' : 0
            });
        });
    })

    }); 
```

和我的标记：

```
 <div class="gallery_item">
                        <img class="gallery_img" src="img/gallery0.jpg" alt="gallery0" width="850" height="567">
                        <img class="gallery_img vertical_img" src="img/gallery1.jpg" alt="gallery1" width="380" height="570">
                        <img class="gallery_img vertical_img" src="img/gallery2.jpg" alt="gallery2" width="382" height="570">
                    </div> 
```

我试过在 .vertical_img 上使用 float:left ，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:20:44.160

使用`display:inline;`on`.vertical_img`应该将这两个图像放在同一行。但是，如果它们的组合宽度大于其容器的宽度，那么它们将出现在不同的行上。

您的容器 ( `div.gallery_item`) 只有 250 像素宽，这无法正常工作。您的大图像实际上超出了此容器的边界。此容器需要是两个图像组合的[externalWidth](http://docs.jquery.com/CSS/outerWidth)的宽度（或更大）。

# jquery - 如果我使用模板，Kendo ui 图标不显示

> ID：14998139
> 
> 赞同：-1
> 
> 时间：2013-02-21T08:57:49.083
> 
> 标签：jquery, icons, kendo-ui

我是 Kendo UI 的新手，正在尝试使用 kendo mobile 构建小型应用程序。我有列表并想为每个项目放置图标，但如果此列表在模板中，则图标不显示

```
 <div data-role="view" data-title="" id="side-root">
   <ul data-role="listview" data-style="inset" data-source="splitViewCategories" data-template="categoriesTemplate">
   </ul>
 </div>
 <script id="categoriesTemplate" type="text/x-kendo-template">
   <a data-icon="about" href="">Category</a>
 </script> 
```

如果我使用这样的就绪列表

```
<ul data-role="listview" data-style="inset">
 <li data-icon="about"><a>about</a></li>
 <li data-icon="action"><a>action</a></li>
 <li data-icon="add"><a>add</a></li>                    
</ul> 
```

我可以看到图标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:36:13.967

而不是`data-icon`您应该添加一个带有您要添加的图标的`span`元素。`class`例如：

```
<script id="categoriesTemplate" type="text/x-kendo-template">
    <a href="\\#"><span class="km-icon km-about"></span>Category</a>
</script> 
```

# android - 是否有任何开源库或代码项目可以在android中实现airplay？

> ID：14998142
> 
> 赞同：-4
> 
> 时间：2013-02-21T08:57:53.727
> 
> 标签：android, iphone, airplay

是否有任何开源库或代码项目可以在 android 中实现 airplay？我想将 android 作为服务器（Airplay 接收器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:46:41.290

这取决于您要在哪个设备上共享。

您可以在 Android 应用程序中使用[Anymote 库，以使用](http://code.google.com/p/googletv-android-samples/source/browse/#git%2FAnymoteLibrary)[Anymote 协议](https://developers.google.com/tv/remote/docs/anymote)与 Google TV 连接和通信。

# android - 如何使用 Android 中自定义适配器类中的 OnLongClickListener 突出显示 ListView 项

> ID：14998149
> 
> 赞同：1
> 
> 时间：2013-02-21T08:58:21.247
> 
> 标签：android, listview, adapter, highlight, onlongclicklistener

这是我想要做的：

在我的主要活动中，我有一个带有自定义适配器的 ListView，因为我的 ListView 项目应该包含一个 TextView 和一个 CheckBox。当我长按某个项目时，我想在 ActionBar 中使用上下文操作模式并突出显示选定的 ListView 项目。

这是我所做的：

我遵循了自定义适配器的[教程和动作模式的](http://www.vogella.com/articles/AndroidListView/article.html#listadvanced_interactive)[教程](http://www.vogella.com/articles/AndroidActionBar/article.html#tutorial_contextualmenu)。两者都工作正常。我能够与我的适配器和 ListView 底层的数据库进行交互。我应该提到，我在自定义适配器类中实现了 ActionMode 的所有内容。

这是不起作用的：

尽管我能够删除与 ListView 项中 TextView 的内容相对应的数据库条目，但我无法弄清楚如何突出显示选定的 ListView 项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:28:42.097

我终于设法自己找到了解决方案。我采取了几个不同的步骤：

代码相关步骤：

1.  我将所有与 ActionMode 相关的代码从我的适配器类移到了我的活动类。在此之前，我通过在 ListView 项目中的 TextView 上使用 OnLongClickListener 触发了操作模式，因为那时我不知道如何使 TextView 的文本可用于 ActionMode（我希望能够通过单击图标将其删除在操作栏中）。当您在其中一个 ListView 项目上使用 CLickListener 时，它有点“阻止”您在 Activity 中设置的 ListView 项目的 OnClickListener。不要那样做！！！

2.  我在我的活动中为我的 ListView 设置了一个 OnItemLongClickListener。从那里我触发 ActionMode 并像这样从项目的 TextView 保存文本（`itemNames`是`List<String>`我的适配器的集合，`deleteString`是我的 Activity 的类属性）：

    `deleteString = itemNames.get(_postion);`

但这些步骤只是为了让我的代码按预期工作，因为我必须通过 XML 进行更改。

XML相关步骤：

1.  我必须从我的 ListView 项目主布局中删除背景属性
2.  我必须在我的外行布局中添加以下属性：`android:clickable="true"`并且`android:longClickable="true"`（也许 longClickable 已经足够了，只是为了确定 ;-)）
3.  我必须创建一个自己的可绘制选择器并将其设置为我的 ListView 项目布局的背景：`android:background="@drawable/my_selector"`

通过这种方式，我实现了以下目标：

*   我的 Activity 中有一个带有自定义布局（TextView + CheckBox）和自定义适配器的 ListView
*   我可以在 CheckBox 上使用 OnCheckedChangeListener
*   我可以通过长按我的 ListView 项目来激活 ActionMode 并到达 TextView 的内容以进行进一步处理
*   当我单击它时，我在我的 ListView 项目上获得了默认的 holo_blue_light 背景突出显示（我在我的应用程序中使用带有深色操作栏的 Holo 主题灯）

我没有通过 XML 工作的唯一一件事是在 ActionMode 处于活动状态时保持我的 ListView 项目突出显示，所以我这样做了

```
_view.setBackgroundResource(android.R.color.holo_blue_dark); 
```

在我的 Activity 类中我的 ListView 的 OnItemLongClickListener 中（不要忘记重绘或刷新你的`onDestroyActionMode(ActionMode _mode)`ListView `ActionMode.Callback`）

瞧！我希望这可能对你们中的一些人有所帮助！花了我几天的时间和大量的研究。

这是我的 ListView 项目布局和选择器布局的代码示例：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/my_selector"
    android:clickable="true"
    android:longClickable="true" >

    <CheckBox
        android:id="@+id/checkBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="6dp" >
    </CheckBox>

    <TextView
        android:id="@+id/shoppingListItemName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="10dp"
        android:layout_toLeftOf="@id/checkBox"
        android:gravity="center_vertical"
        android:minHeight="?android:attr/listPreferredItemHeightSmall"
        android:textAppearance="?android:attr/textAppearanceListItemSmall"
        android:textIsSelectable="true" >
    </TextView>

</RelativeLayout> 
```

我的选择器：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true">
        <layer-list>
            <item>
                <shape android:shape="rectangle">
                    <solid android:color="@android:color/holo_blue_light" />
                </shape>
            </item>
        </layer-list>
    </item>
    <item>
        <color android:color="#00000000" />
    </item>

</selector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:10:49.653

您可以在列表行布局的背景可绘制对象中设置 android:state_activated=true

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:state_activated="true">
    <layer-list >
        <!-- <item >
            <color android:color="#ff00aa00"/>
        </item> -->

        <item>
            <shape android:shape="rectangle">
                <solid android:color="#aa58BAED"/>
                <corners android:radius="3px"/>
            </shape>
        </item>
    </layer-list>
</item>
<item >
    <color android:color="#00000000"/>
</item>
</selector> 
```

但它仅适用于 android api > Api 11

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T13:37:44.713

我遇到了这个问题，因为我遇到了同样的问题，即想在单击和长按时突出显示我的列表视图项目。这对我有用。 [带有自定义适配器的 Android 多选模式侦听器](https://stackoverflow.com/questions/18235805/android-multi-choice-mode-listener-with-custom-adapter)

# python - 如何在表单有效失败后刷新登录页面而没有 django 中的确认框？

> ID：14998153
> 
> 赞同：0
> 
> 时间：2013-02-21T08:58:35.390
> 
> 标签：python, django, http, django-forms, post-redirect-get

这是我在 view.py 中的登录功能

```
def login_user(request):
    form = LoginForm(request.POST or None )
    if request.method == 'POST':
        if form.is_valid():
            username = form.cleaned_data['username']
            password = form.cleaned_data['password']
            user = authenticate(username=username, password=password)
            if user is not None:
                if user.is_active:
                    login(request, user)
                    # Redirect to a success page.
                    userprofile = UserProfile.objects.get(user = user)
                    request.session['userprofile'] = userprofile
                    request.session['familymembers'] = UserProfile.objects.filter(family = userprofile.family)

                    return redirect('/profile')
                else:
                # Return a 'disabled account' error message
                    messages.add_message(request, messages.ERROR, '.')
                    return redirect('/profile')

            else:
                messages.add_message(request, messages.ERROR, '.')
                return render_to_response('registration/login.html',{'form':form},RequestContext(request))

        return render_to_response('registration/login.html', {'form': form},RequestContext(request))
    elif request.method == 'GET':
        return render_to_response('registration/login.html',{'form':form},context_instance = RequestContext(request)) 
```

当表单`is_valid()`失败时，相同的登录页面显示错误消息，现在当我刷新页面时，弹出一个确认框说重新提交表单确认，

我的问题是：是否可以避免这个确认框，我试过了

```
 return redirect('/', {'form': form},RequestContext(request)) 
```

这将避免确认框，但有效的错误消息消失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:00:05.433

重定向响应本身不包含额外信息，您可以`session`通过序列化存储表单`form.data`并稍后在视图中检索它。
或者使用Ajax提交，不刷新整个页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-29T07:25:35.717

> 我遇到了同样的问题，我用这个小逻辑解决了这个问题

```
login(request, user)
reverse_lazy('index') # here the tiny logic works 
return redirect('index') 
```

**解释**

如果我们第一次按刷新时在同一页面上发生登录，它会返回该表单确认框，但在第二次重新加载时它不会显示

逻辑是使用 reverse_lazy 我已经第一次刷新，第二次页面再次返回，所以我们已经解决了问题

***我的问题***

但我不知道为什么在提交表单后显示确认框我需要那个答案朋友我正在等待那个

# php - php json操作，统计子节点，获取子节点

> ID：14998154
> 
> 赞同：1
> 
> 时间：2013-02-21T08:58:36.967
> 
> 标签：php, json

我有一些这样的 json 数据，现在我想计算所有节点“b”，如果给它们编号，如何获取指定的节点。

```
[
   {
      "a":[
         {
            "b":"aaa" //in case this is the first node "b", definition number 1
         },
         {
            "b":"bbb" //this is the second node "b", definition number 2
         }
      ]
   },
   {
      "a":[
         {
            "b":"ccc" //this is the third node "b", definition number 3
         },
         {
            "b":"ddd" //this is the forth node "b", definition number 4
         }
      ]
   },
   {
      "c":"eee"
   }，
] 
```

现在在示例中，有 4 个节点“b”，如何计算它们？以及如何在 php 代码中获取第三个节点“b”？

```
$json=json_decode($txt);
foreach($json as $data){
    if($data->a){
        foreach($data->a as $row){
            echo $row->b.'<br />';
                    //count($row->b);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:04:17.123

要计算它们，您必须保留一个计数器，如下所示：

```
$counter = 0;
$json = json_decode($txt);
foreach ($json as $data) {
    if ($data->a) {
        foreach($data->a as $row){
            $counter++;
            if ($counter == 3) {
                echo 'Third "b": ' . $row->b . '<br />';
            }
        }
    }
} 
echo 'Number of "b"s: ' . $counter . '<br />'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:08:14.197

按照您的代码，您可以使用 isset 运算符完成它：

```
$json=json_decode($txt);
$count = 0;
foreach($json as $data){
if($data->a){
    foreach($data->a as $row){
        if (isset($row->b))
            ++$count;
        }
    }
}
echo $count; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:37:24.630

```
 $json = json_decode($txt); echo count($json, COUNT_RECURSIVE); 
```

# css - 如何在使用 data-role 属性时在 jquery mobile 中显示 div 内的图像

> ID：14998158
> 
> 赞同：2
> 
> 时间：2013-02-21T08:59:05.483
> 
> 标签：css, jquery-mobile

需要：在 Jquery 移动中使用“data-role='header'/data-role='footer'”时，将图像显示为 Div 标签内的背景。

代码：（示例）

```
 <link type="text/css" rel="stylesheet" href="jquery.mobile-1.2.0.css"/>

<script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery-1.8.2.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery.mobile-1.2.0.js"></script>

<style type="text/css">
    #main_logo{     
        background:url(img/logo.png) no-repeat 0 0 #fff;
        background-attachment:fixed;
        background-position:center;
        color: #000;
        font-family: Arial, Verdana, sans-serif;
        margin: 0;
        padding: 0;
}
</style>
</head>

<body>
<div id="page" data-role="page" data-theme="c">

    <div id="header" **data-role="header"** data-theme="c">
        <div id="nav" data-role="navbar">
            <div id="nav_menu" data-role="none">
                Header
            </div>
        </div>  <!--- Nav Bar--->
    </div>  <!---header-->

    <div id="content" data-role="content" data-theme="c">
            Content Area.
        <div id="main_logo"> 

        </div>
    </div>  <!--content-->

    <div id="footer"  data-role="footer" data-theme="c">
        footer
    </div>  <!--footer-->
</div> <!--pageX-->

</body> 
```

问题：没有显示！

替代方式：如果我忽略这些属性，那么它可以正常工作，就像

代码：（示例）

```
<link type="text/css" rel="stylesheet" href="jquery.mobile-1.2.0.css"/>
<script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery-1.8.2.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery.mobile-1.2.0.js"></script>

<style type="text/css">
    #**page**{      
        background:url(img/logo.png) no-repeat 0 0 #fff;
        background-attachment:fixed;
        background-position:center;
        color: #000;
        font-family: Arial, Verdana, sans-serif;
        margin: 0;
        padding: 0;
}
</style>
</head>

<body>
<div id="page" data-role="page" data-theme="c">

    <div id="header" >
        <div id="nav" data-role="navbar">
            <div id="nav_menu" data-role="none">
                Header
            </div>
        </div>  <!--- Nav Bar--->
    </div>  <!---header-->

    <div id="content" >
            Content Area.
        <div id="main_logo"> 

        </div>
    </div>  <!--content-->

    <div id="footer" >
        footer
    </div>  <!--footer-->
</div> <!--pageX-->

</body> 
```

如果有人有答案，请发布！谢谢 ！！

注：文件夹结构：

```
 root/
  ../index.php
  ../[all .css files]
  ../[all .js files]
  ../img/logo.png 
```

[和] 在模拟器中编译

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:15:41.893

您的 div 容器必须具有宽度和高度尺寸：

```
#main_logo{     
    background:url('http://puppy-training-classes.com/wp-content/uploads/2013/01/golden_retriever_puppy_cute_dog_muzzle_16591_256x256.jpg') no-repeat 0 0 #fff;
    background-attachment:fixed;
    background-position:center;
    color: #000;
    font-family: Arial, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    width: 500px;
    height: 500px;
} 
```

现场示例：http: [//jsfiddle.net/Gajotres/fFyF2/](http://jsfiddle.net/Gajotres/fFyF2/)

# asp.net-mvc-3 - asp.net mvc 没有找到默认动作

> ID：14998163
> 
> 赞同：0
> 
> 时间：2013-02-21T08:59:27.877
> 
> 标签：asp.net-mvc-3

如果不是这样的话，对不起我的英语，我希望你能理解我。

有一个问题，在 Asp.Net MVC 3 中找不到默认动作项目。我有包含动作索引的 ContestController。在 global.asax 拼写标准代码中

```
routes.MapRoute (

"Default", / / ​​Route name

"{controller} / {action} / {id}", / / ​​URL with parameters

new {controller = "Home", action = "Index", id = UrlParameter.Optional} / / Parameter defaults

); 
```

在 HomeController 我执行以下操作

```
return RedirectToAction ("index", "contest"); 
```

比赛控制器

```
public class ContestController : BaseController 
{ 
public ActionResult Index()
{ 
   // Code 
   return View(); 
} 
public ActionResult VoteFor(int id)
 { 
   //code 
   return View();
 } 
[HttpPost] 
public ActionResult SaveContest(int id)
{ 
  // code 
  return RedirectToAction("Index"); 
} 

public ActionResult ResultVoting()
{ 
   //code 
   return View(); 
} 
```

}

在地址栏中只出现***localhost / 竞赛*** 并最终落下 404 错误页面未找到。如果手动附加*本地主机/竞赛/**索引*** 一切正常。虽然最近，一切正常，旧的回滚更改不起作用=（你能告诉我可能是什么问题吗？

我在家庭控制器的动作中调用重定向

```
[HttpPost]
        public ActionResult SetLocale()
        {
            int localeId;
            if(int.TryParse(Request.Params["fieldId"], out localeId))
            {
                this.UserResults.SetLocaleId(localeId);
            }
            return RedirectToAction("index", "contest");
        } 
```

# ios - 如何使用 RestKit 在 XCode 中使用 CoreData 管理 Mongo 数据库

> ID：14998166
> 
> 赞同：2
> 
> 时间：2013-02-21T08:59:37.790
> 
> 标签：ios, xcode, mongodb, core-data, restkit

我正在使用带有 CoreData 的 RestKit 来管理 Mongo 数据库。Rest Service 收到的 JSON 是这样的：

```
{
    "_id": {
        "$id": "511bc374a8af9ba27b597633"
    },
    "name": "javi",
    "email": "javi@email123",
    "passwordSHA1": 1234,
    "nationality": "Brasil",
    "gender": 0,
    "borndate": 1360686828,
    "filephoto_id": 1234567,
    "pi_selected": 1,
    "profile_interest": [{
        "name": "perfil prueba1",
        "tourism": ["Cinemas", "Concerts"],
        "leisure": ["NightLife", "Bars"],
        "foodtype": ["African", "American"]
    }, {
        "name": "perfil prueba2",
        "tourism": ["Theathers", "Concerts"],
        "leisure": ["NightLife", "Bars"],
        "foodtype": ["African", "American"]
    }],
    "accesibility": ["Blind", "Deaf"],
    "plans": [{
        "name": "plan prueba 1",
        "location_ids": [10001, 10002, 10003]
    }, {
        "name": "plan prueba 2",
        "locations_ids": [10002, 10003, 10004]
    }]
} 
```

我有两个问题：

1.  我如何在 Coredata 中管理这些信息（如果你知道任何解释这一点的教程）。到目前为止，当我调用 Rest Service 时，我只能填写“用户”表（不是个人资料兴趣、可访问性和计划），但我想用相同的调用填写其他表。

2.  我可以在“用户”表中添加属性“id”吗？（如果我收到上面显示的 JSON，如何通过映射提供程序获取它？

# php - 如何在没有 shell 访问权限的情况下启动 PHP 脚本？

> ID：14998179
> 
> 赞同：0
> 
> 时间：2013-02-21T09:00:42.180
> 
> 标签：php, sockets, shell

我想开始一个使用 websockets 进行自定义聊天的项目。当然，我已经有一个简单的 PHP + MySQL 服务器，我想从这个开始。所以我发现了这个：[https ://github.com/Flynsarmy/PHPWebSocket-Chat](https://github.com/Flynsarmy/PHPWebSocket-Chat)

在 php.ini 之上运行 websocket 服务器。在我的本地（Mac）机器上，它已经在运行了。但我不知道如何在服务器上启动这个脚本。因为我没有任何 Shell 访问权限？

这是我正在使用的服务器： [http ://www.1blu.de/webhosting/homepagepakete/power/](http://www.1blu.de/webhosting/homepagepakete/power/)

谢谢你的帮助！

菲利克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:31:01.983

您将需要 shell 访问权限。与您的托管服务联系并询问他们是否提供 shell 访问权限（尽管他们似乎不允许这样做，或者他们可能会提前说）。如果没有，您将不得不寻找新的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:34:27.700

WebSocket 是一种使用自定义协议将初始的符合 HTTP 的连接转换为全双工套接字的协议。

有两种方法可以做到这一点。选项 1 是使用像 Apache 这样的标准 HTTP 服务器来接受初始 HTTP 连接。然后，您可以使用此 HTTP 服务器中的 Websocket 支持从业务代码升级到 Websocket。这是在 Tomcat 或 JBoss 等服务器中完成的。

选项 2 是打开您自己的服务器套接字，本质上是从 PHP 中创建您自己的 HTTP 服务器。您自己实现了一个非常有限的 HTTP 子集，并尝试将每个连接升级到 WebSocket。这就是 PHPWebsocket 库所做的。

选项 1 与 PHP 不兼容。每个网络服务器都使用 PHP 来生成 HTML 内容。目前没有任何网络服务器支持将当前的 HTTP 连接升级到 Websocket。

选项 2 与 GoDaddy 或 1Blu 等托管服务提供商不兼容。这没有任何意义：您正在尝试实现自己的网络服务器，但这些机器上已经有一个网络服务器在运行！

长话短说：只要 Apache 中不存在可以将控制权转发给 PHP 的本机 WebSocket 支持，您就会陷入困境。有关解决问题的不同方法，请参阅[websockets apache 服务器兼容性](https://stackoverflow.com/questions/8804313/websockets-apache-server-compatibility/8809793#8809793)。

# c# - C# 程序错误

> ID：14998187
> 
> 赞同：-3
> 
> 时间：2013-02-21T09:01:03.070
> 
> 标签：c#, compiler-errors

这是我的代码：

```
using System.Runtime.InteropServices;
using System;

class Program
{
    static void Main(string[] args)
    {
        int processId;
        Console.WriteLine(PlatformInvokeTest.LaunchApp(@"1f0f1577-bc5a-4c10-9a06-f939dc76a130_9tzsbvskx44gy!App", out processId));
        Console.WriteLine(processId);    
    }
}

public class PlatformInvokeTest
{
    [DllImport("MAF32.dll")]
    public static extern int LaunchApp(
        [In, MarshalAs(UnmanagedType.LPWStr)]string processIdentifier,
        [Out, MarshalAs(UnmanagedType.U4)] out int processId);
} 
```

即使我包含了“使用系统；”，我仍然收到以下错误：

`The name 'Console' does not exist in the current context.`

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T09:02:49.073

你 `using System.Runtime.InteropServices;` 没有写`using System;`哪个是不同的命名空间（根命名空间）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T09:03:05.467

我只能看到一个 using 语句：

```
using System.Runtime.InteropServices; 
```

如果在现有语句之后添加以下 using 语句，则控制台引用会自行解析：

```
using System; 
```

如果您查看[Console](http://msdn.microsoft.com/en-us/library/43zwz7ys%28v=vs.100%29.aspx)类的文档，您会发现它使用了[System](http://msdn.microsoft.com/en-us/library/yxcx7skw%28v=vs.100%29.aspx)命名空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T09:04:27.283

您有`using System.Runtime.InteropServices;`，但要使用`Console`该类，您需要添加`using System;`到代码的开头。

# entity-framework - EF 代码中的对称关系优先

> ID：14998188
> 
> 赞同：3
> 
> 时间：2013-02-21T09:01:07.327
> 
> 标签：entity-framework, ef-code-first, code-first, poco, self-reference

我不确定我的措辞是否正确（这可能是我努力寻找结果的原因）。

这是我想要实现的目标：

我希望能够将相关产品（产品 B、产品 C）的集合添加到产品 A。我希望这样当您查看产品 B 时，相关产品会反映已添加的内容在 A 上（如您会看到产品 A 和产品 C）。是否必须为“相关”关系提供单独的表？我猜有一个简单的方法可以做到这一点。

```
public class Product
{
    public int ProductId { get; set; }
    public string DefinitionUri { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }

    public virtual ICollection<Product> RelatedProducts { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T07:44:23.650

您可以按照定义的方式使用该属性，但您应该告诉 EF 它是多对多关联，例如：

```
entry.HasMany(p => p.RelatedProducts)
     .WithMany()
     .Map(m => m.MapLeftKey("ProductId")
                .MapRightKey("ProductIdReleated")); 
```

现在 Ef 将创建一个带有两个 FK 的联结表`Product`。如果没有这个映射，它将创建一个`Product`带有自身 FK 的表，即`1-n`关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T00:28:38.077

我猜你正在尝试做的事情类似于你在 amazon.com 上看到的内容，例如，如果你打开一本书，它会给你相关的书籍供你查阅。如果我猜对了，那么这是您尝试配置的多对多关系，因为每个产品都可能与许多其他产品相关，现在 Entity Framework Code First 通过约定支持多对多关系并创建一个连接表自动地。现在我还没有尝试过两个相关对象的类型相同（在你的情况下是“产品”），所以你必须检查这是否可行。附带说明一下，我认为这不是应该实现此功能的方式，我认为您必须使用某种数据挖掘技术，我会为此谷歌并看看专业人员如何实现此功能。

# ios - 如何从 NSArray 获取 imageUrlString

> ID：14998194
> 
> 赞同：1
> 
> 时间：2013-02-21T09:01:40.810
> 
> 标签：ios, ios6

从远程 XML 文件中解析元素后，我在`NSArray`. 由于数组包含更多这样的元素和值，

```
success; products=<AGSProducts 0x7189020; name='category1';imageIdentifier='1'; imageUrlString='http://myimage.com/images/img1.png'; subProducts=> 
```

我需要`imageUrlString`从这个 NSArarray 中获取。如何从这些数组中单独获取这个特定的 imageUrlString。

**我的视图控制器**

```
@property(nonatomic,strong) NSMutableArray *xmlProductsResults;

[super viewDidLoad];
NSURL *url = [NSURL URLWithString:@"http://myxml.com/Category.xml"];
EGSParser *parser = [[EGSParser alloc] init];
if ([parser loadXMLByURL:url]){
  self.xmlProductsResults = parser.products;
  NSArray *myArray = [_xmlProductsResults objectAtIndex:0];
  NSLog(@"success; products=%@", myArray);
} 
```

请给我一个想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:27:27.800

希望这可以帮助。

**编辑 2**

```
NSString *string = [myArray description];
NSString *url = nil;
NSScanner *parser = [NSScanner scannerWithString:string];
[parser scanUpToString:@"imageUrlString" intoString:nil];

if (![parser isAtEnd]) {
    [parser scanUpToString:@"=" intoString:nil];
    NSCharacterSet *charset = [NSCharacterSet characterSetWithCharactersInString:@"\"'"];
    [parser scanUpToCharactersFromSet:charset intoString:nil];
    [parser scanCharactersFromSet:charset intoString:nil];
    [parser scanUpToCharactersFromSet:charset intoString:&url];

}

NSLog(@"URL: %@", url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:11:56.003

在字典中转换您的回复

```
NSMutableDictionary *dic = [myString JSONValue]; 
```

从 dic 你可以得到`imageUrlString`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T09:19:13.090

**警告：**这不是最佳实践，但可以解决问题并且效率很高......

```
NSString *result = @"";
NSRange r1 = [myString rangeOfString:@"imageUrlString='"];
if(r1.location != NSNotFound)
{
    result = [myString substringFromIndex:r1.location+r1.length];
    NSRange r2 = [result rangeOfString:@"'"];
    if(r2.location != NSNotFound)
    {
        result = [result substringToIndex:r2.location];
    }
    else
    {
        result = @"";
    }
}

NSLog(@"%@", result); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T09:37:22.493

试试这个。

```
 //NSArray *arr = [NSArray arrayWithObjects:@"<AGSProducts 0x7189020; name='category1';imageIdentifier='1'; imageUrlString='http://myimage.com/images/img1.png'; subProducts=>", nil];
    //NSString *imgURL= [arr objectAtIndex:0];

    NSString *imgURL=[_xmlProductsResults objectAtIndex:0];

    imgURL = [imgURL substringFromIndex:[imgURL rangeOfString:@"imageUrlString="].location+[@"imageUrlString=" length]+1];
    imgURL = [imgURL substringToIndex:[imgURL rangeOfString:@";"].location-1];
    NSLog(@"%@",imgURL); 
```

# .net - 无法从 Web 应用程序的证书存储中读取 X509 证书

> ID：14998198
> 
> 赞同：1
> 
> 时间：2013-02-21T09:01:52.507
> 
> 标签：.net, security, cryptography

从 Web 应用程序运行此代码时，我看不到任何 X509 证书：

```
var store = new X509Store(StoreName.Root, StoreLocation.LocalMachine);
            store.Open(OpenFlags.ReadOnly);

            string thumbprint = WebConfigurationManager.AppSettings["CertificateThumbprint"];

            if (string.IsNullOrWhiteSpace(thumbprint))
            {
                throw new ArgumentException("Please specify the X509 certificate thumbprint in the web configuration file.");
            }

            Certificate = store.Certificates
                .Find(X509FindType.FindByThumbprint, thumbprint, true)
                .OfType<X509Certificate2>()
                .FirstOrDefault();

            store.Close();

            if (Certificate == null)
            {
                throw new ArgumentException("The specified X509 certificate has not been installed on this server.");
            } 
```

调试时，我可以看到它`store.Certificates`是空的。但是，它在控制台应用程序中运行得非常好。这很奇怪，因为我在网上看到了在 Web 应用程序中使用上述代码的示例。

如果代码会从网络应用程序中抛出某种权限异常或某些东西来告诉我为什么我无法阅读它们，那将会很有帮助，但事实并非如此。那么，我需要在某处设置一些权限还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:06:15.930

我将证书放在 TrustedPeople 存储中，它工作正常：

`var store = new X509Store(StoreName.TrustedPeople, StoreLocation.LocalMachine);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T10:10:09.897

要解决权限问题，请将证书导出到 .pfx 文件（受密码保护）。要使用 mmc 导出：添加管理单元 -> 证书，然后将证书导出（并设置密码）到方便的位置。然后

```
var certF = new X509Certificate2(
                    @"D:\somedir\withaccess\exported.pfx", "password!"); 
```

为什么要从`StoreName.Root`受信任的根证书颁发机构移动证书？

`StoreName enums`如果权限允许，可以按名称访问不在 中的存储，例如“WebHosting”：

```
var store = new X509Store( "WebHosting", StoreLocation.LocalMachine); 
```

# c++ - C ++填充双端队列错误分配

> ID：14998202
> 
> 赞同：1
> 
> 时间：2013-02-21T09:02:09.027
> 
> 标签：c++, deque, bad-alloc

我正在尝试收集大量随机数来进行算法分析。然后我遇到了这个我无法解释的问题。考虑以下代码：

```
#include <exception>
#include <iostream>
#include <deque>

typedef unsigned long long mytype;

const mytype SIZE = 150000000;

int main()
{
    std::deque<mytype> rand;

    try 
    {
        for (mytype i = 0; i< SIZE; i++)
        {
            rand.push_back(1); //Just push a dummy number into the deque
        }

    }
    catch (std::exception& e)
    {
        {
           std::cout << e.what() << std::endl;
        }
    }

    return 0;
} 
```

这将导致错误的分配异常。问题是如果我使用 vector 和 reserve() 它将起作用。如果我没有正确理解，请纠正我，deque 不是那种容量更大的数据结构，因为它不像向量那样连续分配内存吗？

我在 Win8 x64、Visual Studio 2012、带有 8G RAM 的英特尔 i7 上运行它。感谢您分享您的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:25:01.190

该问题是由内存碎片引起的。

如果直接使用vector.reserve，一开始你会得到一大块内存。应用程序启动时内存碎片较低，因此此时分配巨大内存的机会很高。

当你在循环中使用 deque.push_back 时，deque 将首先保留一小块内存（例如大小为 A 字节），随着循环运行，deque 达到其内存限制，然后它会分配 2*A字节，然后将数据复制到新内存中；然后是 4*A 字节，然后是 8*A 字节....我很久以前读过 deque 的代码，所以细节可能有问题，这里的想法是这个循环会导致大量内存分配/释放，这会导致高内存碎片，如果内存碎片高，分配巨大内存的机会就低。

有关内存碎片的详细信息，请参阅[此](https://stackoverflow.com/questions/3770457/what-is-memory-fragmentation)。

# iphone - 如何设置 UIButton 图像？

> ID：14998203
> 
> 赞同：-2
> 
> 时间：2013-02-21T09:02:09.260
> 
> 标签：iphone, button, imagebutton

我是 iPhone 的新手。目前我正在开发一个应用程序，在该应用程序中，我必须将图像添加到按钮。我用透明背景制作了图像，但它显示的是白色区域而不是透明的。它怎么会显示为透明的。我正在通过-(IBAction) 创建按钮。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:16:07.130

首先，您需要将 png 图像添加到要添加为按钮图像的项目中。然后选择按钮>转到界面构建器>选择类型为“自定义”

> 从图像/背景选项中选择合适的图像

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:09:19.303

非常**简单**的Viveka :- 按照这些步骤

1）为**Button**创建一个**IBAction**并将其与**your.h 文件**中提到的**元素****链接**。2) 转到viewController 的**xib**并选择按钮并转到**Attribute Inspector (左起第 4 个)**。3）转到它的**Type**属性并将其设置为**Custom**而不是**RoundRectButton**。

 ********注意：- 如果您的图像是透明的，那么您不必做任何额外的事情来使其透明**

如果您遇到任何问题请回复，我很乐意帮助它。******

# java - 如何以编程方式在 Android 中打开下载的文件？

> ID：14998212
> 
> 赞同：0
> 
> 时间：2013-02-21T09:02:33.957
> 
> 标签：java, android, file

使用此代码，我可以从 Android 中的 URL 下载文件并将其保存到 SDCard，有没有办法以编程方式打开此文件？

Intent 可以在这方面提供帮助吗？

```
private static class Task extends AsyncTask<Void, Void, Void> {

    static String DownloadUrl = "http://00.00.00.00/abc.crt";
    static String fileName = "def.crt"; 
```

异步任务下载

```
@Override
protected Void doInBackground(Void... arg0) {
    DownloadFromUrl();
    return null;
}

public static void DownloadFromUrl() {

   try {
           File root = android.os.Environment.getExternalStorageDirectory();               

           File dir = new File (root.getAbsolutePath() + "/SDCard");
           if(dir.exists()==false) {
                dir.mkdirs();
           }

           URL url = new URL(DownloadUrl); //you can write here any link
           File file = new File(dir, fileName);

           long startTime = System.currentTimeMillis();
           Log.d("DownloadManager", "download begining");
           Log.d("DownloadManager", "download url:" + url);
           Log.d("DownloadManager", "downloaded file name:" + fileName);

           /* Open a connection to that URL. */
           URLConnection ucon = url.openConnection();

           /*
            * Define InputStreams to read from the URLConnection.
            */
           InputStream is = ucon.getInputStream();
           BufferedInputStream bis = new BufferedInputStream(is);

           /*
            * Read bytes to the Buffer until there is nothing more to read(-1).
            */
           ByteArrayBuffer baf = new ByteArrayBuffer(5000);
           int current = 0;
           while ((current = bis.read()) != -1) {
              baf.append((byte) current);
           }

           /* Convert the Bytes read to a String. */
           FileOutputStream fos = new FileOutputStream(file);
           fos.write(baf.toByteArray());
           fos.flush();
           fos.close();
           Log.d("DownloadManager", "download ready in" + ((System.currentTimeMillis() - startTime) / 1000) + " sec");

   } catch (IOException e) {
       Log.d("DownloadManager", "Error: " + e);
   }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:05:57.910

使用 FileInputStream 并将下载的文件加载到内存 [http://developer.android.com/reference/java/io/FileInputStream.html](http://developer.android.com/reference/java/io/FileInputStream.html)

如果文件具有特定扩展名，则可能有其他加载方法，不涉及将其解析为字节数组

# ruby - 为什么 Array#shuffle! 不适用于嵌套数组？

> ID：14998223
> 
> 赞同：0
> 
> 时间：2013-02-21T09:03:13.390
> 
> 标签：ruby, ruby-1.9.3

在这里，我试图了解如何`Array#shuffle!`处理数组对象。所以我开始在我的*`IRB`*：

```
[1,2,3]
#=> [1, 2, 3]
[1,2,3].shuffle!
#=> [3, 1, 2] 
```

在上面的代码中，我理解了它是如何工作的。下面我试图用更难的方式从每个角落看到它。

```
[1,2,5]
#=> [1, 2, 5]
[1,2,5]<<[1,2,5]
#=> [1, 2, 5, [1, 2, 5]] 
```

直到现在我都很好。

```
[1, 2, 5, [1, 2, 5]].shuffle!
#=> [5, 1, 2, [1, 2, 5]] 
```

使用上面的代码，我感到困惑。所以下面的问题出现在我的脑海中：

*   (a) 为什么`shuffle!`不递归工作？正如我所料，内部数组的输出`[1, 2, 5]`也将被洗牌。但没有发生。

*   (b) 为什么`shuffle!`不对元素数组进行洗牌`[1, 2, 5]`，而只`1, 2, 5,`对数组的元素有效`[1, 2, 5, [1, 2, 5]]`？我认为输出会是`[[1, 2, 5],5, 1, 2]`. 那么为什么元素数组没有改变它的位置，而普通元素只改变了它的位置呢？

***编辑：***

它显示的非常有趣的行为：

```
a=[1,2,4]
#=> [1, 2, 4]
a<<[7,8]
#=> [1, 2, 4, [7, 8]]
a.shuffle!
#=> [[7, 8], 1, 4, 2]
a.shuffle!
#=> [4, 1, [7, 8], 2]
a.shuffle!
#=> [[7, 8], 2, 1, 4]
irb(main):006:0> 
```

洗牌真的遵循任何顺序还是随机洗牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:09:34.573

a)`shuffle!`改变数组中对象的顺序，这可以是任何东西的集合，所以该方法不能假设里面的东西也可以或应该被打乱。

b）我真的不明白这个问题与 a）有何不同。你能解释更多你认为令人困惑的地方吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:09:44.210

a) 为什么会`shuffle!`递归执行？它作用于它传递的对象，在您的示例中，它是一个包含 4 个项目的数组——它将它们打乱。其中一个是数组的事实既不存在也不存在，其中一个可能是一头驴子。

b）它确实对数组元素进行了洗牌，你应该不止一次地尝试过你的小 IRB 测试，你会发现数组只是没有机会移动。

关于您的编辑，您到底想在这里展示什么，我根本没有看到任何有趣的行为？没有模式，随机播放是伪随机的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T17:44:14.417

我敢肯定你可以想象这样一种情况，你需要打乱一组顺序很重要的数组的顺序。在这种情况下，shuffle 非常方便，如果您的需求发生变化，使用 shuffle 方法很容易实现递归 shuffle。但是，如果 Ruby 仅包含递归 shuffle，您将不得不编写原始的非递归 shuffle 方法的逻辑，并且无法使用递归 shuffle 方法优雅地实现解决方案。我认为大多数语言更喜欢使用简单、通用的方法而不是更复杂的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T10:54:39.573

If you indeed want arrays to be shuffled recursively, there is no problem:

```
# encoding: utf-8

a = [1,2,3]
a << [6,7,8]

class Array
  alias shuffle_orig shuffle
  def shuffle
    self.shuffle_orig.map { |e| e.respond_to?(:shuffle) ? e.shuffle : e }
  end
end

3.times do
  p a.shuffle
end 
```

Which results in:

```
#⇒ [2, [8, 6, 7], 3, 1]
#⇒ [3, 1, [7, 6, 8], 2]
#⇒ [1, [8, 7, 6], 3, 2] 
```

The bang version may be monckey-patched as well.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T14:15:10.013

```
a=[1,2,4]
#=> [1, 2, 4]
a<<[7,8]

a.each_with_index do |element, index|

  puts "Index: #{index} element: #{element}"
end 
```

随着`a<<[7,8]`您将新对象附加到`a`数组中。该对象将具有唯一索引。Shuffle 方法使用这个索引来达到它的目的。

```
Index: 0 element: 1
Index: 1 element: 2
Index: 2 element: 4
Index: 3 element: [7, 8] 
```

附加的数组`[7,8]`被视为 1 个对象，因此其内部的元素不会像数组中的元素一样被洗牌`a`。

# sql - sum() 与 count()

> ID：14998225
> 
> 赞同：12
> 
> 时间：2013-02-21T09:03:17.290
> 
> 标签：sql, postgresql, aggregate-functions

考虑一个在 PostgreSQL 中实现的投票系统，每个用户都可以对“foo”进行投票。有一个`foo`存储所有“foo 信息”的`votes`表，以及一个存储`user_id`、`foo_id`和的表`vote`，其中`vote`+1 或 -1。

要获得每个 foo 的投票数，可以使用以下查询：

```
SELECT sum(vote) FROM votes WHERE foo.foo_id = votes.foo_id; 
```

但是，以下内容也同样有效：

```
(SELECT count(vote) FROM votes 
 WHERE foo.foo_id = votes.foo_id 
 AND votes.vote = 1)
- (SELECT count(vote) FROM votes 
   WHERE foo.foo_id = votes.foo_id 
   AND votes.vote = (-1)) 
```

我目前有一个关于`votes.foo_id`.

哪种方法更有效？（换句话说，哪个运行得更快？）我对 PostgreSQL 特定的答案和一般的 SQL 答案都感兴趣。

**编辑**

很多答案都考虑到了`vote`null 的情况。我忘了提到`NOT NULL`投票列有一个限制。

此外，许多人指出第一个更容易阅读。是的，这绝对是真的，如果一个同事写了第二个，我会气得要爆炸，除非有表演的必要性。无论如何，问题仍然在于两人的表现。*（从技术上讲*，如果第一个查询慢得多，那么编写第二个查询就不是犯罪了。）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T12:24:45.783

当然，第一个例子更快、更简单、更容易阅读。[甚至在被水生生物打耳光](https://stackoverflow.com/questions/14998225/sum-vs-count/15002223#comment21066909_14998225)之前就应该很明显。虽然`sum()`比 略贵`count()`，但更重要的是第二个示例需要两次扫描。

但也有一个**实际的区别**：`sum()`可以返回不返回的`NULL`地方。`count()`我引用了[关于聚合函数的手册](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)：

> 需要注意的是，除了count之外，这些函数在没有选择行时返回一个空值。特别是，没有行的总和返回空值，而不是人们可能期望的零，

由于您似乎有一个性能优化的弱点，这里有一个您可能喜欢的细节：**`count(*)`**比`count(vote)`. 只有当 vote 是 时才等效`NOT NULL`。用 测试性能[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)。

### 仔细检查

这两个查询都是语法上的废话，单独存在。`SELECT`只有从更大的查询列表中复制它们才有意义，例如：

```
SELECT *, (SELECT sum(vote) FROM votes WHERE votes.foo_id = foo.foo_id)
FROM   foo; 
```

这里的重点是相关子查询 - 如果您只阅读查询中的一**小部分**，这可能没`votes`问题。我们会看到其他`WHERE`条件，并且您应该有匹配的索引。

在 Postgres 9.3 或更高版本中，替代的、更清洁的、100% 等效的解决方案是`LEFT JOIN LATERAL ... ON true`：

```
SELECT *
FROM   foo f
LEFT   JOIN LATERAL (
   SELECT sum(vote) FROM votes WHERE foo_id = f.foo_id
   ) v ON true; 
```

通常类似的性能。细节：

*   [LATERAL 和 PostgreSQL 中的子查询有什么区别？](https://stackoverflow.com/questions/28550679/what-is-the-difference-between-lateral-and-a-subquery-in-postgresql/28557803#28557803)

**但是**，在从 table读取**大部分或全部**`votes`内容时，这将（快得多）：

```
SELECT f.*, v.score
FROM   foo f
JOIN   (
   SELECT foo_id, sum(vote) AS score
   FROM   votes
   GROUP  BY 1
   ) v USING (foo_id); 
```

首先在子查询中聚合值，然后加入结果。
关于`USING`：

*   [SQL查询后删除重复列](https://stackoverflow.com/questions/27326723/remove-duplicate-column-after-sql-query/27326787#27326787)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T12:45:10.607

第一个会更快。你可以用一个简单的方法试试。

生成一些数据：

```
CREATE TABLE votes(foo_id integer, vote integer);
-- Insert 1000000 rows into 100 foos (1 to 100)
INSERT INTO votes SELECT round(random()*99)+1, CASE round(random()) WHEN 0 THEN -1 ELSE 1 END FROM generate_series(1, 1000000);
CREATE INDEX idx_votes_id ON votes (foo_id); 
```

检查两者

```
EXPLAIN ANALYZE SELECT SUM(vote) FROM votes WHERE foo_id = 5;
EXPLAIN ANALYZE SELECT (SELECT COUNT(*) AS count FROM votes WHERE foo_id=5 AND vote=1) - (SELECT COUNT(*)*-1 AS count FROM votes WHERE foo_id=5 AND vote=-1); 
```

但事实是它们并不等价，为了确保第一个可以作为第二个，您需要针对这种`null`情况进行处理：

```
SELECT COALESCE(SUM(vote), 0) FROM votes WHERE foo_id = 5; 
```

还有一件事。如果您使用的是 PostgreSQL 9.2，您可以创建包含两列的索引，这样您就有机会使用仅索引扫描：

```
CREATE INDEX idx_votes_id ON votes (foo_id, vote); 
```

但！在某些情况下，这个索引可能是最差的，所以你应该尝试两者并运行`EXPLAIN ANALYZE`以查看哪个是最好的，或者甚至创建两者并检查哪个 PostgreSQL 使用最多（并排除另一个）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T09:42:50.910

我希望第一个查询能够更快地工作，因为这是一个单一的查询并且它更具可读性（方便您在一段时间后必须回到这个查询）。

第二个查询由两个查询组成。您只会得到一个结果，就好像它是一个查询一样。

也就是说，为了绝对确定其中哪一个更适合您，我将使用大量虚拟数据填充两个表并检查查询执行时间。

# powershell - LocalDb 和 SMO - 如何选择放置数据库文件的位置？

> ID：14998233
> 
> 赞同：0
> 
> 时间：2013-02-21T09:04:01.563
> 
> 标签：powershell, smo, localdb

我已经开始尝试使用 SQL Server 2012 功能 LocalDb。我正在针对我创建的实例使用 SMO 执行一些 powershell 脚本，例如创建数据库。为此，我有这个功能：

```
Function New-Database {
    Param(
        $server,
        $databaseName
    )
    $serverHandle = New-Object Microsoft.SqlServer.Management.Smo.Server($server)
    if($serverHandle.Databases.Name.Contains($databaseName)) {
        throw "Database $databaseName already exists"
    }

    $databaseHandle = New-Object Microsoft.SqlServer.Management.Smo.Database($serverHandle, $databaseName)
    $databaseHandle.Create()
} 
```

使用 LocalDb 时，mdf 和 ldf 文件在`C:\Users\<username>\`. 我想覆盖它，但我不知道如何。该`$databaseHandle`对象有一个属性`PrimaryFilePath`，但它是只读的。这似乎应该是非常简单的事情，但我就是不知道如何......

**解决方案** 以下面的答案为主导，这是我需要的 Powershell 调用：

```
$fileGroup = New-Object Microsoft.SqlServer.Management.Smo.FileGroup($databaseHandle, "PRIMARY")
$dataFile = New-Object Microsoft.SqlServer.Management.Smo.DataFile($fileGroup, "DataFile", $filePath)
$fileGroup.Files.Add($dataFile)
$databaseHandle.FileGroups.Add($fileGroup) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:36:13.920

我认为[来自 SMO 论坛的这个帖子](http://social.msdn.microsoft.com/Forums/en-US/sqlsmoanddmo/thread/fc95664a-9c16-47d0-b7d4-325db0e4d95d/)包含了答案。您只需要将其转换为 SQL PowerShell 语法（我相信此时它只是 SMO 的包装器）。

这是 VBScript 片段：

```
databaseHandle.FileGroups.Add(New FileGroup(db, "PRIMARY"))
databaseHandle.FileGroups(0).Files.Add(
    New DataFile(db.FileGroups(0), "TestName", "D:\SqlBancos\Teste\Teste1.mdf")) 
```

# ruby-on-rails - 覆盖不能分配大规模保护的属性

> ID：14998234
> 
> 赞同：0
> 
> 时间：2013-02-21T09:04:08.350
> 
> 标签：ruby-on-rails, ruby, activeadmin

我有任何人都不能访问的字段，所以我不能只将这些字段添加到 attr_accessible。但我也有活跃的管理员，应该有权访问这些字段。到目前为止，我尝试了下一个：

```
controller do
  def update
    org = Organization.find_by_id(params[:id])
    org.subscription.plan_id = params[:organization][:subscription_attributes][:plan_id]
    org.subscription.expires_at = params[:organization][:subscription_attributes][:expires_at]
    org.save
    super
  end
end 
```

但`super`仍然在所有参数上调用更新属性，而不仅仅是更改的参数。如何排除要在 super 中更新的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:33:32.240

根据活动管理员的消息来源，我在超级方法上调用了一个块，并在那里传递了所需的参数。结果代码如下所示

```
def update
      plan_id = params[:organization][:subscription_attributes].delete(:plan_id)
      expires_at = params[:organization][:subscription_attributes].delete(:expires_at)
      update! do
          resource.subscription.plan_id = plan_id
          resource.subscription.expires_at  = expires_at
          resource.subscription.save if resource.valid?
      end
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:31:57.957

我建议对 rails 3 使用 strong_parameters gem。

验证是否必须在模型或控制器级别运行一直是一个相当大的讨论。

通过使用强参数，您可以轻松地在控制器操作中设置允许的参数：

```
params.permit(:name, {:emails => []}, :friends => [ :name, { :family => [ :name ], :hobbies => [] }]) 
```

同样在 Rails 4 中，这将成为默认设置。

# java - 一次性在所有类中添加覆盖方法

> ID：14998237
> 
> 赞同：3
> 
> 时间：2013-02-21T09:04:13.277
> 
> 标签：java, eclipse

我有一个项目，其中近 50 个类扩展了同一个父类。现在我在父类中添加一个抽象方法。因此，所有类都会产生编译时错误。在这种情况下，有没有办法在eclipse IDE中一次性在所有子类中添加这个方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T09:08:16.467

您不需要在这 50 个课程中的每一个课程中做一些有意义的（和不同的）事情吗？如果没有，那么您应该将实现放在父类中。如果是这样，那么在这种情况下，任何类型的“快速修复所有”都会适得其反。基本上，如果 eclipse 或任何其他 IDE 满足您的要求，它基本上会鼓励将小型编程任务更改为大型测试/QA 任务。

作为记录，我认为[这个其他答案](https://stackoverflow.com/a/14998560/122207)更优雅。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T09:24:07.847

Eclipse 不支持这一点的简单答案。

为了补充[Tim Bender 的答案](https://stackoverflow.com/a/14998303/122207)，这样的功能会适得其反的原因是您无论如何都需要访问所有这些类以将主体添加到方法中。如果您要自动生成存根方法，那么您很可能会错过一个（或多个）。因此，您的简单编码任务将变成更具挑战性的调试任务……或者更糟糕的是，如果您没有像样的单元和系统测试程序。

最好一次添加一个方法，并*使用*编译器错误列表来提醒您还需要处理哪些类。（我也发现自己处于这种情况......而且这种方法*有效*。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T06:20:40.443

“在包资源管理器中选择顶级包。转到“问题”视图。应该有“Foo 类型必须实现继承的抽象方法 Parent.foo()”的错误列表（对于给定的类/方法名称）。右键单击错误，选择“快速修复”。您可以选择“添加未实现的方法”选项，然后单击“全选按钮”以选择所有子类。编辑：这甚至适用于每个父类的多个方法。” 从下面的链接复制，它的工作原理

[如何在eclipse中对所有子类实现未实现的方法](https://stackoverflow.com/questions/8099969/how-to-implement-unimplemented-methods-to-all-child-classes-in-eclipse)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:22:56.603

1.  向父类添加一个简单的方法

    /** 这应该在父类中被覆盖！！*/ @Deprecated public void foo() { }

2.  在子类中实现方法。测试方法。

3.  重复步骤 2，直到每个子类中都存在方法实现。
4.  将父类中的原始方法抽象化

    公共抽象 void foo();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T09:27:37.370

我认为如果你有 50 种不同的实现，你可能会遇到一些严重的设计问题。

如果您想在所有类中放置相同的代码，您应该只在抽象类中提供一个实现，这样编译器就不会抱怨。否则不要期望 Eclipse 知道您计划在所有类中编写什么实现。

如果您的方法最初什么都不做（您无法提供有意义的实现），您可以在抽象类中执行此操作：

```
void myMethod() {
    // does nothing yet
} 
```

# spring - 如何设置 hbm2ddl 在某些变量/列中不允许 null？

> ID：14998244
> 
> 赞同：0
> 
> 时间：2013-02-21T09:04:45.490
> 
> 标签：spring, hibernate, hbm2ddl

我在调试阶段使用 Spring 和 hibernate 进行项目。有两个实体的表由 hbm2ddl 自动创建。这通常可以正常工作，但架构表明除了主 ID 之外的所有列都允许为空。我想告诉 hbm2ddl 创建其中一些不允许空值的列。这怎么可能实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:09:19.133

您需要在映射中指定这些约束，无论是 hbm 文件还是注释。

对于 hbm 文件：

```
<property type="string" name="label" column="M_LABEL" not-null="true"/> 
```

对于注释：

```
@Column(name = "M_LABEL", nullable = false)
private String label; 
```

# c++ - 即使选择了调试构建，Qt Creator 的智能感知也会灰显 #ifdef _DEBUG 块

> ID：14998247
> 
> 赞同：7
> 
> 时间：2013-02-21T09:05:03.950
> 
> 标签：c++, qt, qt-creator, conditional-compilation

当我的代码中有`#ifdef`这样的

```
#ifdef _DEBUG
    printf("This is a debug build");
#endif 
```

Qt Creator`printf`尽管它是一个调试版本，但它会变灰，并且当我运行它时它`"This is a debug build"`会被打印出来。

似乎智能感知没有看到将通过命令行（即`-D_DEBUG`）传递给编译器的预处理器定义，而不是在头文件/源文件中定义。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T10:06:41.327

以下在我的`*.pro`文件中工作得很好：

```
CONFIG(debug, release|debug):DEFINES += _DEBUG 
```

然后切换构建类型也会交换灰色区域。不过，我正在使用 Qt5。

# vim - 如何 = 在 vi m 中工作

> ID：14998248
> 
> 赞同：0
> 
> 时间：2013-02-21T09:05:04.653
> 
> 标签：vim

在 vimrc 中添加代码导致

```
"E488: Trailing characters: <c-r>=12+34<cr>" 
```

总是出现

```
<c-r>=12+34<cr> 
```

那里发生了什么事？

我的原始代码：

```
function! CleverTab()
    if strpart( getline('.'), 0, col('.')-1 ) =~ '^\s*$'
        return "\<Tab>"
    endif
    if pumvisible()
        return "\<C-N>"
    endif
    let s:codecompl = CodeComplete()
    "<c-r>=s:codecompl<cr>
    <c-r>=12+34<cr>
    "exec " " .s:codecompl. "\<enter>"."."
    "if g:swith_region_flag == 1
    "    return SwitchRegion()
    "else return s:codecompl
    return ''
endfunction 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:16:00.010

这`<C-R>`是一个插入模式命令，你不能简单地将它放在执行 Ex 命令的 Vimscript 函数中。相反，您必须使用`:normal! i`发出正常模式命令`i`才能重新进入插入模式。使用`:execute`能够使用`<...>`关键符号，你得到：

```
:execute "normal! i\<c-r>=12+34\<cr>" 
```

也就是说，当您处于返回键的映射表达式中时（您似乎在这里），您不能使用`:normal`（文本被锁定），您应该只`:return`使用键：

```
:return "\<c-r>=12+34\<cr>" 
```

# java - 简单的 Mahout 分类示例

> ID：14998250
> 
> 赞同：2
> 
> 时间：2013-02-21T09:05:08.637
> 
> 标签：java, mahout, document-classification

我想训练 mahout 进行分类。对我来说，这个文本来自数据库，我真的不想将它们存储到文件中以进行 mahout 培训。我检查了 MIA 源代码并更改了以下代码以完成非常基本的培训任务。mahout 示例的常见问题是它们显示如何使用 20 新闻组从 cmd 提示符使用 mahout，或者代码对 Hadoop Zookeeper 等有很大的依赖关系。如果有人可以查看我的代码或指出我，我将不胜感激到一个非常简单的教程，展示如何训练模型然后使用它。

到目前为止，在下面的代码中，我永远不会过去`if (best != null)`，因为`learningAlgorithm.getBest();`总是返回 null！

很抱歉发布整个代码，但没有看到任何其他选项

```
public class Classifier {

    private static final int FEATURES = 10000;
    private static final TextValueEncoder encoder = new TextValueEncoder("body");
    private static final FeatureVectorEncoder bias = new ConstantValueEncoder("Intercept");
    private static final String[] LEAK_LABELS = {"none", "month-year", "day-month-year"};

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws Exception {
        int leakType = 0;
        // TODO code application logic here
        AdaptiveLogisticRegression learningAlgorithm = new AdaptiveLogisticRegression(20, FEATURES, new L1());
        Dictionary newsGroups = new Dictionary();
        //ModelDissector md = new ModelDissector();
        ListMultimap<String, String> noteBySection = LinkedListMultimap.create();
        noteBySection.put("good", "I love this product, the screen is a pleasure to work with and is a great choice for any business");
        noteBySection.put("good", "What a product!! Really amazing clarity and works pretty well");
        noteBySection.put("good", "This product has good battery life and is a little bit heavy but I like it");

        noteBySection.put("bad", "I am really bored with the same UI, this is their 5th version(or fourth or sixth, who knows) and it looks just like the first one");
        noteBySection.put("bad", "The phone is bulky and useless");
        noteBySection.put("bad", "I wish i had never bought this laptop. It died in the first year and now i am not able to return it");

        encoder.setProbes(2);
        double step = 0;
        int[] bumps = {1, 2, 5};
        double averageCorrect = 0;
        double averageLL = 0;
        int k = 0;
        //-------------------------------------
        //notes.keySet()
        for (String key : noteBySection.keySet()) {
            System.out.println(key);
            List<String> notes = noteBySection.get(key);
            for (Iterator<String> it = notes.iterator(); it.hasNext();) {
                String note = it.next();

                int actual = newsGroups.intern(key);
                Vector v = encodeFeatureVector(note);
                learningAlgorithm.train(actual, v);

                k++;
                int bump = bumps[(int) Math.floor(step) % bumps.length];
                int scale = (int) Math.pow(10, Math.floor(step / bumps.length));
                State<AdaptiveLogisticRegression.Wrapper, CrossFoldLearner> best = learningAlgorithm.getBest();
                double maxBeta;
                double nonZeros;
                double positive;
                double norm;

                double lambda = 0;
                double mu = 0;
                if (best != null) {
                    CrossFoldLearner state = best.getPayload().getLearner();
                    averageCorrect = state.percentCorrect();
                    averageLL = state.logLikelihood();

                    OnlineLogisticRegression model = state.getModels().get(0);
                    // finish off pending regularization
                    model.close();

                    Matrix beta = model.getBeta();
                    maxBeta = beta.aggregate(Functions.MAX, Functions.ABS);
                    nonZeros = beta.aggregate(Functions.PLUS, new DoubleFunction() {

                        @Override
                        public double apply(double v) {
                            return Math.abs(v) > 1.0e-6 ? 1 : 0;
                        }
                    });
                    positive = beta.aggregate(Functions.PLUS, new DoubleFunction() {

                        @Override
                        public double apply(double v) {
                            return v > 0 ? 1 : 0;
                        }
                    });
                    norm = beta.aggregate(Functions.PLUS, Functions.ABS);

                    lambda = learningAlgorithm.getBest().getMappedParams()[0];
                    mu = learningAlgorithm.getBest().getMappedParams()[1];
                } else {
                    maxBeta = 0;
                    nonZeros = 0;
                    positive = 0;
                    norm = 0;
                }
                System.out.println(k % (bump * scale));
                if (k % (bump * scale) == 0) {

                    if (learningAlgorithm.getBest() != null) {
                        System.out.println("----------------------------");
                        ModelSerializer.writeBinary("c:/tmp/news-group-" + k + ".model",
                                learningAlgorithm.getBest().getPayload().getLearner().getModels().get(0));
                    }

                    step += 0.25;
                    System.out.printf("%.2f\t%.2f\t%.2f\t%.2f\t%.8g\t%.8g\t", maxBeta, nonZeros, positive, norm, lambda, mu);
                    System.out.printf("%d\t%.3f\t%.2f\t%s\n",
                            k, averageLL, averageCorrect * 100, LEAK_LABELS[leakType % 3]);
                }
            }

        }
         learningAlgorithm.close();
    }

    private static Vector encodeFeatureVector(String text) {
        encoder.addText(text.toLowerCase());
        //System.out.println(encoder.asString(text));
        Vector v = new RandomAccessSparseVector(FEATURES);
        bias.addToVector((byte[]) null, 1, v);
        encoder.flush(1, v);
        return v;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T22:46:01.617

您需要正确地将单词添加到特征向量中。它看起来像下面的代码：

```
 bias.addToVector((byte[]) null, 1, v); 
```

没有做你所期望的。它只是将空字节添加到权重为 1 的特征向量中。

您正在调用该`WordValueEncoder.addToVector(byte[] originalForm, double w, Vector data)`方法的包装器。

确保遍历笔记映射值中的单词值，并将它们相应地添加到特征向量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:34:04.477

我强烈建议您也将您的问题直接发送给 Mahout 邮件列表中非常好的人[https://mahout.apache.org/general/mailing-lists,-irc-and-archives.html](https://mahout.apache.org/general/mailing-lists,-irc-and-archives.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-29T23:57:58.427

这发生在我今天早些时候。我看到您的初始示例很少，因为您也像我一样使用代码。我的问题是，由于该算法是一种自适应算法，因此我需要将“适应”的间隔和窗口设置为非常低，否则它将永远找不到新的最佳模型：

```
learningAlgorithm.setInterval(1);
learningAlgorithm.setAveragingWindow(1); 
```

这样，算法可以在它看到的每 1 个向量之后强制“适应”，这将是至关重要的，因为您的示例代码只有 6 个向量。

# performance - Grails 审计日志插件 - 性能

> ID：14998253
> 
> 赞同：1
> 
> 时间：2013-02-21T09:05:23.483
> 
> 标签：performance, grails, logging, grails-orm

我正在使用[Grails 审计日志插件](http://grails.org/plugin/audit-logging)来记录我的 grails 应用程序上的创建/编辑/删除操作。

有谁知道实际的日志记录（将日志保存到数据库）是在单独的线程中执行，还是仅在日志记录完成后才会返回对请求的响应（例如，顺便修改了一些记录）。在他们的文档或外部的任何地方都找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:28:22.400

这个插件[内部](https://github.com/hartsock/grails-audit-logging-plugin/blob/master/src/groovy/org/codehaus/groovy/grails/plugins/orm/auditable/AuditLogListener.groovy#L41)使用了[休眠事件系统。](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/events.html)消息以阻塞方式处理，因此将在日志记录完成**后**收到响应。

 **它很容易重现 - 只需创建一个自定义 Hibernate 侦听器：

```
import org.hibernate.event.PostInsertEvent;
import org.hibernate.event.PostInsertEventListener;
import org.hibernate.event.PostUpdateEvent;
import org.hibernate.event.PostUpdateEventListener;

class HibernateDummyListener implements PostInsertEventListener, PostUpdateEventListener {

    public void onPostInsert(final PostInsertEvent event) {
        println "Hibernate: ON POST INSERT"

        //No delay
    }

    public void onPostUpdate(final PostUpdateEvent event) {
        println "Hibernate: ON POST UPDATE"

        Thread.sleep(10000)
    }
} 
```

...和resources.groovy：

```
beans = {
   hibernateDummyListener(HibernateDummyListener)

   hibernateEventListeners(HibernateEventListeners) {
      listenerMap = ['post-insert':hibernateDummyListener,
                     'post-update':hibernateDummyListener]
   }
} 
```**

# jquery - 未捕获的类型错误：无法调用未定义的方法“包含”

> ID：14998257
> 
> 赞同：0
> 
> 时间：2013-02-21T09:05:40.047
> 
> 标签：jquery

**注意**请参阅[此问题](https://stackoverflow.com/questions/14997313/htmlinputelement-has-no-method-parent#14997331)了解一些背景知识...

所以我的（非常基本的）表单验证正在工作 - 有点。

在检查电子邮件地址字段的输入值时，我想确保电子邮件地址有一个值（即不是空白）并且包含`@`和`.`字符，所以我这样做了......

```
<div width="100%" class="con1">

    <div class="lable">
        <label for="email">Email Address *</label>
    </div>
    <input  type="text" name="email" class="span4">

</div>

<script>

$('input[type=submit]').click(function() {
    var parentname = $(this).parent('div');
    console.log('Form used: ' + parentname);

    var email = 0,

    // Validate email
    if ($('.' + parentname.attr('class') + ' #email').val() == '')
    {
        alert('Please enter a valid email address');
    }
    else
    {
        if (($('.' + parentname.attr('class') + ' #email').val().contains('@')) && ($('.' + parentname.attr('class') + ' #email').val().contains('.')))
        {
            email = 1;
        }
        else
        {
            alert('Please enter a valid email address');
        }
    }
});
</script> 
```

它看起来有点奇怪，但正如上面链接的问题中提到的那样，复杂性要求我对我的选择器进行一些不同的思考。

基本上`$('.' + parentname.attr('class') + ' #email')`与写作相同（在我使用`$('.con1 #email')`作为选择器的情况下，我认为基于我的 HTML 结构是正确的。

我尝试使用，`$('.' + parentname.attr('class').child('#email')`但不断收到错误消息，提示该元素没有“子”方法

我是根据之前创建的表单编写的，在该表单中我实际上使用了相同的原则来阻止来自 yahoo.com 的电子邮件，因为我从那里收到了很多垃圾邮件：

```
if ($("#contact-email").val().contains("yahoo.com")) {
     $(".errmsg").text("Domain yahoo.com has been banned due to excessive spam, please use another domain.");
}
else
{
    email = 1;
} 
```

虽然我在此处粘贴的第二个示例有效，但更彻底地验证电子邮件字段的第一个示例继续返回此错误：

> 未捕获的类型错误：无法调用未定义的方法“包含”

我无法理解这如何在一个站点而不是另一个站点中工作。我觉得我错过了一些东西，所以如果有人能看到那可能是什么，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:22:00.410

元素应该有一个`id="email"`允许选择器：

```
$('.' + parentname.attr('class') + ' #email') 
```

# objective-c - 如果我进行手动内存管理，使用哪个 Json 库

> ID：14998260
> 
> 赞同：1
> 
> 时间：2013-02-21T09:05:51.020
> 
> 标签：objective-c, cocoa, automatic-ref-counting, sbjson

我的代码必须与 10.5 到 10.8 mac os x 兼容。由于 10.5 上缺少 ARC，我正在进行手动内存管理。

我需要在项目中加入一些第三方 json 库才能处理 json。我对 Objective-c 和可可很陌生。我担心我是否应该担心图书馆正在做什么内存管理？

在我看来，我不应该使用做 ARC 的库，对吗？如果是这种情况，我需要您建议我应该使用哪个 json lib 来进行手动内存管理。

似乎有 SBJson 但是 ARC 我猜它不适合我的需要。

请问这个新人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:13:08.517

[https://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit)
非常高性能（通常比其他 JSON 库高一个数量级），易于使用。不需要ARC。
更准确地说，JSONKit 不支持并且可能不会支持 ARC，因此如果您计划将来切换到 ARC，请记住这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-04T11:04:26.953

ARC 在编译时插入保留/释放调用，因此只要您使用支持 ARC 的编译器（例如，您在 10.8 上编译），您应该没问题。（可能有一些功能不受支持，例如弱指针。）

# c - 2路udp聊天应用程序

> ID：14998261
> 
> 赞同：1
> 
> 时间：2013-02-21T09:05:55.493
> 
> 标签：c, sockets, udp

我正在尝试一个 UDP 应用程序，`C`其中应用程序必须同时发送和接收数据。类似于我们的聊天应用程序。当 1 个人输入数据时，他应该能够接收到它。

我正在计划如何实现这一点。如果我的想法是正确的，请帮助我。

1.  同一程序将充当客户端和服务器。
2.  两台服务器都将监听不同的端口
3.  创建一个发送线程和一个接收线程。( pthread )
4.  我在这一步遇到了问题。我希望 recvfrom 是非阻塞的。所以我想我可以设置 E_WOULDBLOK 并且当 errno 设置为 EAGAIN 时，我可以产生接收线程。但是当该套接字可读时会发生什么。我应该如何让发送线程让接收线程读取数据。如果我在用户键入时仅仅因为我的接收套接字是可读的而产生发送线程，它也不会影响用户吗？

否则请建议我实现这一目标的方法。pthread 条件变量是否适合这种情况。也欢迎其他想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T15:13:11.257

使用传输和接收线程的方法应该可以工作，但是您稍后提到您想在线程上使用非阻塞 IO。这很好，但我有点疑惑为什么要同时使用*非阻塞*IO*和*线程。

如果您使用线程，则无需将套接字标记为非阻塞 - 只需使用标准阻塞[`recvfrom()`](http://www.kernel.org/doc/man-pages/online/pages/man2/recvfrom.2.html)和[`read()`](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)调用即可。当您从`read()`发送线程中的标准输入获得输入时，您会发送一条消息，[`sendto()`](http://www.kernel.org/doc/man-pages/online/pages/man2/sendto.2.html)并且当您在接收线程中收到一条消息时，您可以正常将其显示到标准输出。

除非您在线程之间传递信息，否则您不应该需要 pthreads 条件变量 - 如果您想要多于 2 路聊天（即多个用户），那么您可能需要它。

如果您使用的是非阻塞 IO（我认为这是更简洁的解决方案 - 最好尽可能避免使用线程），您通常不需要使用线程 - 您可以使用[`select()`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)和之类的函数[`poll()`](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)来管理文件描述符。我会推荐`poll()`，因为我认为它有一个更方便的界面，但两者都可以。也有潜在的更有效的等价物，例如[`epoll()`](http://www.kernel.org/doc/man-pages/online/pages/man7/epoll.7.html)在 Linux 上，但通常您可以忽略这些，除非您的应用程序将处理大量流量。

您通常有一个带循环的线程。在循环开始时，您调用`poll()`or`select()`并且它将阻塞，直到读取文件描述符之一（可以是套接字）以进行读取或写入。您可以侦听多个文件描述符，但在您的情况下，它也可以与单个文件描述符一起正常工作。

`poll()`一旦函数返回，您可以从套接字中读取信息，如果它被or指示为“read-ready” `select()`，然后根据需要发送信息。如果这是一个面向连接的套接字，您需要缓冲输出并监视套接字是否“可写”，并根据需要从输出缓冲区刷新数据。然而，对于 UDP，“写就绪”的概念并没有真正有意义的概念，因此只要有可用数据，您就可以发送数据。

事实上，如果您正在使用`poll()`或类似这样，您甚至不需要将套接字标记为非阻塞。请参阅下面的示例代码，它实现了一个非常简单的 UDP 聊天客户端。您必须在命令行上手动指定目标 IP 地址和端口，并且一些错误检查非常简单，因为它只是示例代码，但它应该足以适应您自己的目的。

您可以在 Unix 机器上通过编译为名为“chat”的二进制文件然后打开两个终端窗口并在一个运行中进行测试：

```
chat 8888 127.0.0.1 9999 
```

...在另一个运行中：

```
chat 9999 127.0.0.1 8888 
```

请注意，第一个端口是侦听端口，其余两个参数指定要连接到远程对等方的 IP 地址和端口。

代码在这里：

```
#include <sys/types.h>
#include <sys/socket.h>

#include <arpa/inet.h>
#include <errno.h>
#include <fcntl.h>
#include <netinet/in.h>
#include <poll.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

void start_chat(int sock_fd, struct sockaddr_in *peer)
{
  int ret;
  ssize_t bytes;
  char input_buffer[1024];
  char output_buffer[1024];
  struct pollfd fds[2];

  /* Descriptor zero is stdin */
  fds[0].fd = 0;
  fds[1].fd = sock_fd;
  fds[0].events = POLLIN | POLLPRI;
  fds[1].events = POLLIN | POLLPRI;

  /* Normally we'd check an exit condition, but for this example
   * we loop endlessly.
   */
  while (1) {
    /* Call poll() */
    ret = poll(fds, 2, -1);

    if (ret < 0) {
      printf("Error - poll returned error: %s\n", strerror(errno));
      break;
    }
    if (ret > 0) {

      /* Regardless of requested events, poll() can always return these */
      if (fds[0].revents & (POLLERR | POLLHUP | POLLNVAL)) {
        printf("Error - poll indicated stdin error\n");
        break;
      }
      if (fds[1].revents & (POLLERR | POLLHUP | POLLNVAL)) {
        printf("Error - poll indicated socket error\n");
        break;
      }

      /* Check if data to read from stdin */
      if (fds[0].revents & (POLLIN | POLLPRI)) {
        bytes = read(0, output_buffer, sizeof(output_buffer));
        if (bytes < 0) {
          printf("Error - stdin error: %s\n", strerror(errno));
          break;
        }
        printf("Sending: %.*s\n", (int)bytes, output_buffer);
        bytes = sendto(sock_fd, output_buffer, bytes, 0,
                       (struct sockaddr *)peer, sizeof(struct sockaddr_in));
        if (bytes < 0) {
          printf("Error - sendto error: %s\n", strerror(errno));
          break;
        }
      }

      /* Check if data to read from socket */
      if (fds[1].revents & (POLLIN | POLLPRI)) {
        bytes = recvfrom(sock_fd, input_buffer, sizeof(input_buffer),
                         0, NULL, NULL);
        if (bytes < 0) {
          printf("Error - recvfrom error: %s\n", strerror(errno));
          break;
        }
        if (bytes > 0) {
          printf("Received: %.*s\n", (int)bytes, input_buffer);
        }
      }
    }
  }
}

int main(int argc, char *argv[])
{
  unsigned long local_port;
  unsigned long remote_port;
  int sock_fd;
  struct sockaddr_in server_addr;
  struct sockaddr_in peer_addr;

  /* Parse command line arguments for port numbers */
  if (argc < 4) {
    printf("Usage: %s <local port> <remote host> <remote port>\n", argv[0]);
    return 1;
  }
  local_port = strtoul(argv[1], NULL, 0);
  if (local_port < 1 || local_port > 65535) {
    printf("Error - invalid local port '%s'\n", argv[1]);
    return 1;
  }
  remote_port = strtoul(argv[3], NULL, 0);
  if (remote_port < 1 || remote_port > 65535) {
    printf("Error - invalid remote port '%s'\n", argv[3]);
    return 1;
  }

  /* Parse command line argument for remote host address */
  peer_addr.sin_family = AF_INET;
  peer_addr.sin_port = htons(remote_port);
  if (inet_aton(argv[2], &peer_addr.sin_addr) == 0) {
    printf("Error - invalid remote address '%s'\n", argv[2]);
    return 1;
  }

  /* Create UDP socket */
  sock_fd = socket(AF_INET, SOCK_DGRAM, 0);
  if (sock_fd < 0) {
    printf("Error - failed to open socket: %s\n", strerror(errno));
    return 1;
  }

  /* Bind socket */
  server_addr.sin_family = AF_INET;
  server_addr.sin_addr.s_addr = htonl(INADDR_ANY);
  server_addr.sin_port = htons(local_port);
  if (bind(sock_fd, (struct sockaddr *)(&server_addr),
           sizeof(server_addr)) < 0) {
    printf("Error - failed to bind socket: %s\n", strerror(errno));
    return 1;
  }

  /* Call chat handler to loop */
  start_chat(sock_fd, &peer_addr);

  close(sock_fd);

  return 0;
} 
```

# iptables - 启用丢包的命令

> ID：14998268
> 
> 赞同：0
> 
> 时间：2013-02-21T09:06:10.553
> 
> 标签：iptables, packet-loss

我正在寻找一种启用丢包的好方法。我遇到了 ubuntu 的这个命令。该命令应该使接口 wlan11 丢失它接收到的数据包的 10% (0.10)。

```
sudo iptables -A INPUT -i wlan11 -m statistic --mode random --probability 0.10 -j DROP 
```

这个命令好用还是我可以使用更好/简单的命令/方法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:15:04.603

您是否查看[过在 Linux 上模拟延迟和丢弃的数据包](https://stackoverflow.com/questions/614795/simulate-delayed-and-dropped-packets-on-linux)？看起来它获得了大量的选票，并涵盖了您关于使用[netem](http://www.linuxfoundation.org/collaborate/workgroups/networking/netem)模拟数据包丢失的问题。

```
Packet loss

Random packet loss is specified in the 'tc' command in percent. The smallest possible non-zero value is:

2−32 = 0.0000000232%

# tc qdisc change dev eth0 root netem loss 0.1%
This causes 1/10th of a percent (i.e. 1 out of 1000) packets to be randomly dropped.

An optional correlation may also be added. This causes the random number generator to be less random and can be used to emulate packet burst losses.

# tc qdisc change dev eth0 root netem loss 0.3% 25%
This will cause 0.3% of packets to be lost, and each successive probability depends by a quarter on the last one.

Probn = 0.25 × Probn-1 + 0.75 × Random 
```

希望能帮助并提供更好的方法来处理这个问题！

# c - 打破在另一个线程中运行的 do..while 事件循环

> ID：14998271
> 
> 赞同：0
> 
> 时间：2013-02-21T09:06:17.930
> 
> 标签：c, multithreading

```
gcc 4.7.2
c89 
```

你好，

我正在尝试停止在工作线程中运行的事件循环。

我用另一个函数的结构中的条件来控制 while 循环。但是，该值似乎没有改变。它不会进入 switch 语句条件 IMP_STATE_STOPPED 因此不能将条件设置为 false 以停止 do..while 循环。

imp 结构是这样的：

```
enum states_e {IMP_STATE_STARTED, IMP_STATE_STOPPED};
struct imp_t {
    states_e state;
}; 
```

这就是我所拥有的 - 只有必要的片段：带有事件循环的工作线程函数这将只是旋转直到`is_looping`更改为 false

```
static void* g_imp_evt_loop(apr_thread_t *thd, void *data)
{
    imp_t *imp = NULL;
    volatile apr_status_t is_looping = TRUE;

    imp = (imp_t*)data;
    if(!imp) {
        return NULL;
    }

    printf("[ %p ]", imp);

#define SR_TIMEOUT 500

    do {
        if(waitevt(SR_TIMEOUT) >= 0) {
            switch(imp->state) {
            case IMP_STATE_STARTED:
            {
                /* do some work */
            }
            break;

            case IMP_STATE_STOPPED:
                is_looping = FALSE;
                break;
            }

            apr_sleep(250000);
        }
    } while(is_looping);

    return NULL;
} 
```

这是我启动从另一个函数调用的工作线程的片段：

```
void start_working(imp_t *imp)
{
    printf("[ %p ]\n", imp);

    if(apr_thread_pool_schedule(imp->module->thd_pool,
                                g_imp_evt_loop,
                                (void*)imp,
                                0, /* Start now */
                                NULL) != APR_SUCCESS) {
        return FALSE;
    }
} 
```

在我的停止函数中，我将 imp 结构中的条件设置为`IMP_STATE_STOPPED`.

```
void stop_working(imp_t *imp)
{
    printf("[ %p ]\n", imp);
    imp->state = IMP_STATE_STOPPED;
} 
```

难道数据是我无法更改的工作线程函数的本地数据吗？

我打印出每个函数中的地址，所有地址对于imp ie都是相同的`0x923b710`

非常感谢您的任何建议，

# php - 导航复杂的数组

> ID：14998272
> 
> 赞同：0
> 
> 时间：2013-02-21T09:06:23.887
> 
> 标签：php, arrays, object

我正在尝试循环访问并访问此数组中的数据。我似乎收到有关 stdclass 的错误消息。

我将数据分配给 $activites 并且我认为我可以使用类似 $activites[0]->fuel 的东西来获得该值，但似乎不是？

```
object(stdClass)#35 (2) {
  ["data"]=>
  array(25) {
    [0]=>
    object(stdClass)#36 (13) {
      ["activityId"]=>
      string(36) "47d7f2f1-2657-4dca-b30d-54358e251b10"
      ["calories"]=>
      int(171)
      ["fuel"]=>
      int(368)
    }
    [1]=>
    object(stdClass)#37 (13) {
      ["activityId"]=>
      string(36) "b1281a77-13e9-4b2b-96d2-82f390c8969f"
      ["calories"]=>
      int(275)
      ["fuel"]=>
      int(591)
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:08:53.733

尝试`$yourObject->data[0]->fuel`

# javascript - 什么是相当于“window.”的 Windows 8 应用程序？

> ID：14998275
> 
> 赞同：0
> 
> 时间：2013-02-21T09:06:28.150
> 
> 标签：javascript, windows-8

在使用 JavaScript 和 HTML 开发 Windows 8 应用程序时，与传统上等效的全局变量是什么？`window.`

从一个页面上的对象内部的方法，我需要访问存储在单独的 JS 文件中的对象内部的方法。对象被调用`searchAll`，方法是'_clearInput'。所以例如我想打电话给`window.searchAll.clearInput`. `searchAll' 对象被包装在一个匿名函数中。

我该怎么做呢？或者这是接近它的错误方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:08:34.897

如果它是全局的，那么就这样对待它：

```
searchAll.xxx() 
```

只是不要在更窄的范围内用`var searchAll`or掩盖它`function (searchAll) { }`

# .net - 基于 .net 技术的 SharePoint 替代方案

> ID：14998276
> 
> 赞同：0
> 
> 时间：2013-02-21T09:06:31.563
> 
> 标签：.net, sharepoint

我正在寻找一个主要具有以下功能的企业应用程序：-

*   基于 .NET 的可扩展性框架
*   协作设施
*   业务流程管理
*   文档和内容管理

我需要评估 SharePoint 的其他替代方案，但我需要在 asp.net 技术上构建这些企业系统。任何人都可以推荐这样的软件，以便我可以阅读更多关于它们的信息。BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:10:14.057

我相信[Sense/Net](http://www.sensenet.com/)是 SharePoint 的开源替代品。由于没有使用它，我无法评论稳定性、性能或鲁棒性。

您可以在 CodePlex 上找到更多相关信息：http: [//sensenet.codeplex.com/](http://sensenet.codeplex.com/)

# facebook - 谁能帮我处理 Facebook 的 iframe 标签页？

> ID：14998279
> 
> 赞同：-3
> 
> 时间：2013-02-21T09:06:42.230
> 
> 标签：facebook, iframe, facebook-page

任何人都可以帮我编码吗？我真的不知道如何编写这样的东西（我在网络编程方面完全是菜鸟）

我想在我的 facebook 上创建一个带有粉丝和非粉丝内容的欢迎（又名登陆）页面。

非粉丝内容将是 IMG_1.JPG 用户单击“喜欢”并看到下一张图片 (IMG_2.JPG) 几秒钟，然后我的网站出现。IMG_2.jpg 应该只在用户点击“喜欢”按钮后出现一次。下次当他访问我的粉丝页面时，他会查看我的 Facebook 网站。

检查下面的图片：

[http://i.imgur.com/iH8ywjz.jpg](http://i.imgur.com/iH8ywjz.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T04:22:50.263

您要达到的目标称为“Like-gating”或“Fan Gating”。为此，您需要插入 Facebook SDK，这些 SDK 可在此处轻松获得：http: [//developers.facebook.com/docs/sdks/](http://developers.facebook.com/docs/sdks/)
在您开始之前，有一些重要的基础知识需要了解您的建议. 正如你所说，你是一个“完全的菜鸟”，所以其中一些可能对你来说很难工作和排除故障。
1) 您需要对 PHP 有基本的工作理解。
2) 您需要对 javascript 和/或 jQuery 等 js 库有基本的了解。

我也没有得到你的一些问题，所以我将对订单做出以下假设。
1) 非粉丝会显示 IMG_1.jpg
2) 一旦非粉丝喜欢页面，IMG_2.jpg 将显示 3 秒。
3) 非粉丝将被带到您的实际网站（远离 facebook）。
4) 粉丝将自动被引导至您的网站（远离 facebook）。

如果您打算让您的网站显示在选项卡中，那么它的宽度当然必须小于 810 像素，您只需在下面的 else 语句中加载内容。

**首先是创建类似的门：**
我假设您已经知道如何通过访问[https://developers.facebook.com/apps](https://developers.facebook.com/apps)并按照步骤创建选项卡。这超出了问题的范围，所以我不会深入探讨。

创建选项卡后，您将拥有您的应用程序 ID/API 密钥和应用程序密码。

1）您需要在您的应用程序托管的服务器上安装 Facebook PHP SDK，该服务器可从 Facebook SDK Github 获得：[https](https://github.com/facebook/facebook-php-sdk) ://github.com/facebook/facebook-php-sdk - 您需要安装整个 SRC 文件夹。

2) 在您的应用程序中（将基于 php）。您将首先在标头之前调用 Facebook SDK（使用您的应用程序 ID 和 api 密钥）。我在标头之前执行此操作，因为有时如果我使用 CMS，我会遇到 cookie/标头问题。并获得签名的请求。这是该人是否喜欢 Facebook 页面。

这样做是这样的：

```
<?php
require 'facebook-php-sdk/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'xxxYourAppIdInHerexxx',
  'secret' => 'xxxYourSecretInHerexxx',
));

$signed_request = $facebook->getSignedRequest();

?> 
```

我们现在拥有构建页面所需的所有信息。因此，从那里我们可以使用 php if 语句来查看该人是否喜欢该页面并相应地指导他们。

```
<?php
if ( $signed_request['page']['liked'] ) //The user likes your page then:
{
            header( 'Location: http://www.yoursite.com/' ) ;
        //If you wanted the site to appear in the iframe then you would just call your index.html or load the content in here.
}
else  //The user doesn't like your page then:
{
    echo '<img src="IMG_1.jpg">';
    //This will show IMG_1 on the page 

}
?> 
```

这是基本设置。

**二是临时点赞后切换图片**

这稍微困难一些，因为一旦用户喜欢您的页面，那么整个父窗口就会刷新。
要交换图像，您有几个选项：
1) 使用会话和/或 cookie 来计算访问次数，并且仅在第一次访问时显示图像。
2) 插入类似 Javascript 的 SDK 并使用 onClick 函数让用户在您的应用程序中点击一个赞按钮。该功能可以是这样的。

```
 <img src="IMG_1.jpg" class="img1">
    <img src="LikeMe.jpg class="likeme">
    <img src="IMG_2.jpg" class="img2">

.img1 {position:relative; display:block; z-index:0}
.img2 {position:relative; display:none;}
.likeme {position:relative; display:block; z-index:10;} 

/* img 2 is hidden, img 1 is shown, like image is over the top of image 1 */

<script type="text/javascript"> // Using jQuery here
$('likeme').click(function(){

$(this).hide(); // Hide the likeme img
$('.img1').hide(); // Hide img 1
$('.img2').show(); // Show img 2

    setTimeout(function(){
//Run your script to like the page

},3000); //Run the like script after 3 seconds.

});

</script> 
```

这是基本的外线。这并不难，但它不适合一个完整的初学者。我提供的链接上有很多文档。祝你好运。

# android - 如何处理屏幕分辨率和屏幕尺寸，一个应用程序

> ID：14998280
> 
> 赞同：0
> 
> 时间：2013-02-21T09:06:45.640
> 
> 标签：android, nexus-10

我一直在试图弄清楚这一点，但我真的不明白。如果我想创建一个具有一种布局的应用程序，该布局应该适合所有 android 设备（通过缩放）..我怎样才能实现这一点？..例如。 . 我可能有一个 300dp 的 editText，在我的三星 Galaxy S2 上看起来很棒.. 但是如果我在我的 nexus 10 上运行相同的应用程序，它看起来会非常小，然后我希望 editText 在两者上放大宽度和高度适合我的 nexus 10 .. 有没有简单的方法来实现这一点？

我注意到有一种叫做重量的东西..但是如果我创建了三个editText，其中第一个的重量为10，第二个的重量为20，然后第三个的重量为80，最后一个永远不会出现...

无论如何..你如何通过最佳实践处理这些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T10:55:43.313

这是我的做法，

创建一个您可以调用的函数，该函数返回与设备宽度相关的大小。“32”是任意的，它为您提供与屏幕成比例的相对字体大小。

```
textView.setTextSize(getFontSize(activity));

public static int getFontSize (Activity activity) { 

    DisplayMetrics dMetrics = new DisplayMetrics();
    activity.getWindowManager().getDefaultDisplay().getMetrics(dMetrics);

    // lets try to get them back a font size realtive to the pixel width of the screen
    final float WIDE = activity.getResources().getDisplayMetrics().widthPixels;
    int valueWide = (int)(WIDE / 32.0f / (dMetrics.scaledDensity));
    return valueWide;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:30:01.470

这份文件会有很大帮助

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

如果您的布局在手机和平​​板电脑上看起来都很好，您将需要有单独的布局文件，一个在 layout 中，另一个在 layout-xlarge 中（用于 10" 平板电脑），为 edittext 放置不同的大小。

另一种方法是保留单个布局文件，但将所有与大小相关的值提取到单独的 xml 文件中。将它们分别放在 values 和 values-xlarge 文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:17:17.573

一般这种情况可以通过添加来处理

```
<supports-screens android:normalScreens="true"
    android:smallScreens="true" android:largeScreens="true"
    android:anyDensity="true" android:resizeable="true" /> 
```

在 androidmanifest.xml 中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:18:32.743

使用 xhdpi 资源并尝试根据设备使用布局参数在运行时设置所有布局。

或让 android 决定什么最适合设备创建以下文件夹

1.  布局-大
2.  布局小
3.  布局-sw600
4.  布局-sw720

和类似的文件夹来更好地组织您的布局

# redis - 如何在 Redis 中将一个列表中的值复制到另一个列表中？

> ID：14998281
> 
> 赞同：8
> 
> 时间：2013-02-21T09:06:47.400
> 
> 标签：redis

我有一个包含一些值的 Redis 列表

```
LRANGE LIST 0 -1
> 1
> 2
> 3 
```

我想把`RPUSH`这些值放到另一个列表中。如何才能做到这一点？我试过用`MULTI`and来做`EXEC`，但没有结果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T09:26:35.370

服务器端 Lua 脚本比 WATCH/MULTI/EXEC 块更方便地实现这种操作。

下面是一个脚本示例，它采用两个列表（源和目标）作为参数，两个整数在源列表中定义一个范围。然后它将相应的项目推送到目标列表。

```
> rpush foo 1 2 3 4
(integer) 4
> rpush bar x
(integer) 1
> eval "local res = redis.call( 'lrange', KEYS[1], ARGV[1], ARGV[2] ); return redis.call( 'rpush', KEYS[2], unpack(res) ); "  2  foo bar 0 -1
(integer) 5
> lrange bar 0 -1
1) "x"
2) "1"
3) "2"
4) "3"
5) "4" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T09:53:10.683

如果要将密钥移动到新密钥，可以使用 RENAME 命令，只会更改密钥名称[RENAME COMMAND](http://www.redis.io/commands/rename)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-02T08:18:40.537

这种方法

```
> eval "local res = redis.call( 'lrange', KEYS[1], ARGV[1], ARGV[2] ); return redis.call( 'rpush', KEYS[2], unpack(res) ); "  2  foo bar 0 -1 
```

当列表太长时，可能会产生“太多结果无法解包”错误。

这是执行此操作的脚本

```
-- @desc:   copies a list with POP and PUSH
-- @usage:  redis-cli --eval copy_list_with_popnpush.lua <source> <dest>

local s = KEYS[1]
local d = KEYS[2]
local l = redis.call("LLEN", s)
local i = tonumber(l)

while i > 0 do
  local v = redis.call("RPOPLPUSH", s, s)
  redis.call("LPUSH", d, v)
  i = i - 1
end

return l 
```

其他一些很棒的脚本 [https://gist.github.com/itamarhaber/d30b3c40a72a07f23c70](https://gist.github.com/itamarhaber/d30b3c40a72a07f23c70)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-20T10:23:56.157

联合商店

```
SUNIONSTORE new_set old_set 
```

[https://redis.io/commands/sunionstore](https://redis.io/commands/sunionstore)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-01-29T10:39:58.113

您可以将它们从一个列表移动到另一个列表，并且可以多次`LPUSH`使用该命令：`RPOPLPUSH`

```
RPOPLPUSH old_list new_list
RPOPLPUSH old_list new_list
RPOPLPUSH old_list new_list 
```

当然，您可能想在客户端程序或脚本中执行此操作，我无法找到将列表的所有成员移动到另一个列表的方法。

# ruby - 我们如何在 Ruby 中从用户那里获取变量？

> ID：14998283
> 
> 赞同：-4
> 
> 时间：2013-02-21T09:06:55.163
> 
> 标签：ruby

我们如何在 Ruby 中从用户那里获取变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:16:41.390

```
puts "Enter something i will store it"

my_variable = gets.chomp 
```

# php - 如何替换 PHP 中的字符串？

> ID：14998286
> 
> 赞同：4
> 
> 时间：2013-02-21T09:07:01.190
> 
> 标签：php

**我有一个变量，其中包含一个字符串，如下所示：**

```
<p>The post <a href="http://zed1.com/journalized/archives/2012/03/11/wordpress-3-for-business-bloggers/">WordPress 3 for Business Bloggers</a> appeared first on <a href="http://zed1.com/journalized">Mike Little&#039;s Journalized</a>.</p>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Sun, 10 Feb 2013 17:00:13 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:11:"Mike Little";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}i:49;a:6:{s:4:"data";s:13:"

";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:2:{s:0:"";a:5:{s:5:"title";a:1:{i:0;a:5:{s:4:"data";s:85:"WordPress.tv: Cliff Seal: Content Strategy – No one cares about your content (yet.)";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"guid";a:1:{i:0;a:5:{s:4:"data";s:28:"http://wordpress.tv/?p=15209";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:4:"link";a:1:{i:0;a:5:{s:4:"data";s:95:"http://wordpress.tv/2013/02/09/cliff-seal-content-strategy-no-one-cares-about-your-content-yet/";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:11:"description";a:1:{i:0;a:5:{s:4:"data";s:710:"<div id="v-7wXyrfye-1" class="video-player">
</div>
<br />  <a rel="nofollow" href="http://feeds.wordpress.com/1.0/gocomments/wptv.wordpress.com/15209/"><img alt="" border="0" src="http://feeds.wordpress.com/1.0/comments/wptv.wordpress.com/15209/" /></a> <img alt="" border="0" src="http://stats.wordpress.com/b.gif?host=wordpress.tv&blog=5089392&post=15209&subd=wptv&ref=&feed=1" width="1" height="1" /><div><a href="http://wordpress.tv/2013/02/09/cliff-seal-content-strategy-no-one-cares-about-your-content-yet/"><img alt="Cliff Seal: Content Strategy – No one cares about your content yet" src="http://videos.videopress.com/7wXyrfye/video-93ee0cad15_std.original.jpg" width="160" height="120" /></a></div>";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}s:7:"pubDate";a:1:{i:0;a:5:{s:4:"data";s:31:"Sat, 09 Feb 2013 18:29:33 +0000";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}s:32:"http://purl.org/dc/elements/1.1/";a:1:{s:7:"creator";a:1:{i:0;a:5:{s:4:"data";s:12:"WordPress.tv";s:7:"attribs";a:0:{}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";}}}}}}}}}}}}}}}}s:4:"type";i:128;s:7:"headers";a:9:{s:6:"server";s:5:"nginx";s:4:"date";s:29:"Thu, 21 Feb 2013 05:50:08 GMT";s:12:"content-type";s:8:"text/xml";s:14:"content-length";s:5:"72893";s:10:"connection";s:5:"close";s:4:"vary";s:15:"Accept-Encoding";s:13:"last-modified";s:29:"Thu, 21 Feb 2013 05:30:17 GMT";s:4:"x-nc";s:11:"HIT luv 139";s:13:"accept-ranges";s:5:"bytes";}s:5:"build";s:14:"20121202164312";}','no'),(380,'_transient_timeout_feed_mod_867bd5c64f85878d03a060509cd2f92c','1361468731','no'),(381,'_transient_feed_mod_867bd5c64f85878d03a060509cd2f92c','1361425531','no'),(382,'_transient_timeout_dash_aa95765b5cc111c56d5993d476b1c2f0','1361468731','no'),(383,'_transient_dash_aa95765b5cc111c56d5993d476b1c2f0','<div class="rss-widget"><ul><li><a class='rsswidget' href='http://ma.tt/2013/02/new-yahoo-2/' title='Marissa Mayer announces the new Yahoo hompage, on a WordPress-powered blog. [&hellip;]'>Matt: New Yahoo</a></li><li><a class='rsswidget' href='http://ma.tt/2013/02/100-gpl/' title='Creative Market just announced that all of their WordPress Themes are now 100% GPL, meaning to list in their marketplace and reach their users your theme must provide users with the same freedoms that WordPress itself does. They have some great themes already. This is fantastic news and I’m very proud of their team for taking this bold step, and as promised  [&hellip;]'>Matt: 100% GPL</a></li><li><a class='rsswidget' href='http://wordpress.tv/2013/02/20/leslie-hancock-developing-a-distinctive-online-voice/' title=' [&hellip;]'>WordPress.tv: Leslie Hancock: Developing a Distinctive Online Voice</a></li><li><a class='rsswidget' href='http://wordpress.tv/2013/02/20/scott-basgaard-help-yourself-by-helping-others/' title=' [&hellip;]'>WordPress.tv: Scott Basgaard: Help Yourself by Helping Others</a></li><li><a class='rsswidget' href='http://feedproxy.google.com/~r/weblogtoolscollection/UXMP/~3/3tj7MIPbhOc/' title='The new default theme for WordPress 3.6, titled Twenty Thirteen, is making progress. This year’s default theme is overseen by Matt Mullenweg, and built by Joen Asmussen, Konstantin Obenland, and Lance Willett. The goal for Twenty Thirteen is to offer “a focus on blogging, and great support for post formats (which are getting attention on the backend in 3.6 a [&hellip;]'>Weblog Tools Collection: Twenty Thirteen Theme in Progress</a></li></ul></div>','no'),(384,'_transient_timeout_feed_57bc725ad6568758915363af670fd8bc','1361468732','no'),(385,'_transient_feed_57bc725ad6568758915363af670fd8bc','a:4:{s:5:"child";a:1:{s:0:"";a:1:{s:3:"rss";a:1:{i:0;a:6:{s:4:"data";s:3:"

";s:7:"attribs";a:1:{s:0:"";a:1:{s:7:"version";s:3:"2.0";}}s:8:"xml_base";s:0:"";s:17:"xml_base_explicit";b:0;s:8:"xml_lang";s:0:"";s:5:"child";a:1:{s:0:"";a:1:{s:7:"channel";a:1:{i:0;a:6:{s:4:"data";s:72:" 
```

现在我想从中替换一些单词。所以我使用了下面写的代码：

```
 if(strstr($sql, "href='")){
        str_replace("href='", 'href="', $sql);
$data = $sql;
fwrite($handle, $data);
    } 
```

但我没有得到任何结果。所以，如果我做错了什么，请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:08:42.260

```
$sql = str_replace("href='", 'href="', $sql); 
```

尝试这个：

```
echo preg_replace("/(class|href)='([^']*)'/",'$1="$2"', $sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:12:41.123

问题是您没有设置 str_replace() 函数的返回值

```
if(strstr($sql, "href='")){

    $sql=str_replace("href='", 'href="', $sql);

    $data = $sql;
    fwrite($handle, $data);
} 
```

查看[http://www.php.net/manual/en/function.str-replace.php上的 str_replace 文档](http://www.php.net/manual/en/function.str-replace.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:16:56.317

我不完全确定我是否理解正确，但我认为这可能是你想要做的：

```
if(strpos($sql, "href='") !== false) ){
    str_replace("href='", 'href="', $sql);
$data = $sql;
fwrite($handle, $data);
} 
```

# git - 撤消快进合并

> ID：14998288
> 
> 赞同：5
> 
> 时间：2013-02-21T09:07:11.257
> 
> 标签：git, github, git-merge

我有一个糟糕的合并，直到我将它推送到 GitHub 之前我才知道这是一个糟糕的合并，现在我不知道如何撤消/恢复它。

故事是这样的：

我打开了两个不同的分支并对这些分支进行了一些更改。过了一会儿，我决定将这些分支合并回主分支，并`$ git merge branch_name`用于此目的。我合并了第一个分支，然后检查了 master 分支的日志：该分支上的所有提交都在 master 上。然后我继续通过相同的命令合并第二个分支。然后我再次检查了 master 的日志，在那里我看到了我合并的分支上的提交，包括一个带有以下注释的提交：“合并分支分支名称”。当我合并另一个分支时，没有包含这样的评论。

长话短说，问题在于 git 将第一个分支的提交合并到 master 就像它们已经是 master 的提交一样。当您检查来自 'GitHub' 的网络图或来自 'gitg' 的图时，没有留下第一个分支的痕迹，但它的提交显示为 master 分支的提交。第二个分支没有问题：它单独显示并按预期合并。另请注意，在运行合并命令后，我继续删除分支`$ git branch -d branch_name`，不幸的是，这是最紧迫的事情。

现在我想回到我连续两次合并之前的位置。任何帮助表示赞赏。如果您评论为什么会发生这种情况，那也会令人愉快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:13:00.110

1.  找到作为您删除的旧主题分支的头部的提交。他们应该是合并提交的两个父母。让它们再次变成分支（`git branch`或者`git checkout -b`会很好地完成这个技巧）。

2.  用移`master`回原来的位置`git reset`。此时，您回到了合并之前的起点。

3.  下次合并时，使用`git merge --no-ff`. 即使 Git 不需要，这也会创建一个合并提交。

我几乎总是`git merge`与`--ff-only`or一起使用`--no-ff`。

# html - 使用静态导航时如何使 div 居中

> ID：14998290
> 
> 赞同：0
> 
> 时间：2013-02-21T09:07:23.977
> 
> 标签：html, css

每当我在screenfly上恢复窗口或测试屏幕分辨率时。

我的 html5 播放器所在的内容隐藏在导航中。

这是网站 [http://djwckd.com/](http://djwckd.com/)

css

```
 #sidenav {
        background-image:url('http://i1285.photobucket.com/albums/a592/djwckd/wckd-bg2_zps36505f8f.jpg');
        width: 225px;
        position: fixed; /*--Fix the sidenav to stay in one spot--*/
        float: left; /*--Keeps sidenav into place when Fixed positioning fails--*/
        text-align:center;
        height: 100%;   
    }

#content {
    background-image:url('http://i1285.photobucket.com/albums/a592/djwckd/wckd-bg1_zpsf32da4c1.jpg');
    float: right; /*--Keeps content to the right side--*/
    width:85%;
    text-align: center;
    font-family:Trebuchet MS;
    color: #000;
    height: 100%;

}

.bottom {
    background-image:url('http://i1285.photobucket.com/albums/a592/djwckd/wckd-bg3_zps849e973b.png');
    font-family:Trebuchet MS;
    width:400px;
    margin:0 auto 0 auto;
    padding:5px;
    border:1px solid #cccccc;
    font-size:12px;
    color: #777777;
}

.copy {
    background-color: #fff;
    color: #000;
    font-family:Trebuchet MS;
    font-size:14px;
    height: 100%;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:16:54.070

添加`min-width`到侧边栏和内容的容器可以解决问题，但会在宽度小于指定最小宽度的浏览器上添加滚动条。

```
div.container { min-width:1024px; } 
```

这可以防止容器永远小于 1024px。

# android - 在保持中心的同时缩放画布

> ID：14998291
> 
> 赞同：2
> 
> 时间：2013-02-21T09:07:31.970
> 
> 标签：android, android-layout

我正在使用`SurfaceHolder`and`ScaleGestureDetector`让我的缩放工作。在两者之间`SurfaceHolder.lockCanvas()`我`surfaceHolder.unLockCanvasAndPost(canvas)`执行缩放操作。

```
canvas.scale(mScaleFactor, mScaleFactor, scalePointX,scalePointY); 
```

在 onScaleMethod 中，我执行以下操作

```
public boolean onScale(ScaleGestureDetector detector) {

            mScaleFactor *= detector.getScaleFactor();
            // Don't let the object get too small or too large.
            mScaleFactor = Math.max(1.0f, Math.min(mScaleFactor, 35f));
            scalePointX=(detector.getFocusX());
            scalePointY=(detector.getFocusY());
            Log.i("Zoom",mScaleFactor+""); 
         return true; 
} 
```

但是画布不会在两个手指之间的中心缩放。我应该如何调整 scalePointX 和 scalePointY 的值以使代码正常工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T08:27:40.250

我看到这是一个相当古老的问题，但至少让我们回答一下。

您的代码中的问题是焦点坐标基本上是在您的视图上单击的像素坐标。这是您通常从运动事件中获得的。换句话说 - 它不是图像上的坐标（或者你正在缩放的​​任何东西）。

这是我的解决方案：

我不使用比例点，而是分别翻译整个画布。我以 1.0 比例（无缩放）为单位保存平移坐标。如果您想使用比例中心，您只需将起始坐标更改为中心而不是像我一样的左上角。这是我的 onScale 函数的一部分（我还更新了比例因子并添加了更多限制，但这是唯一与维护中心有关的部分）：

```
float sf = mScaleGestureDetector.getScaleFactor();
float x = (mScaleGestureDetector.getFocusX() / mScaleFactor) * (1 - sf);
float y = (mScaleGestureDetector.getFocusY() / mScaleFactor) * (1 - sf);

mTranslateX += x;
mTranslateY += y; 
```

我基本上所做的是将焦点坐标转换为未缩放的单位（除法部分），然后计算每个坐标中有多少已超出屏幕（如果为负数，则进入屏幕）。

# sql - 数字除以 | 的 SQL 通配符

> ID：14998292
> 
> 赞同：0
> 
> 时间：2013-02-21T09:07:36.197
> 
> 标签：sql, sql-server, sql-server-2008, wildcard

我将数据保存在这样的一个字段中：1|3，或 1，或 1|7|12。我需要的是 WHERE 条件，它可以确定我的号码是否存在。此外，如果我的变量“数字”不存在，我必须返回所有结果。我试过这个，但似乎它不起作用。

```
Field LIKE '%number%' AND Field NOT LIKE '_number%' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:12:10.620

好吧，首先，如果您想进行有效的查询，您应该将这些数字放在单独的表中。字段的匹配部分不能使用任何索引，因此无法很好地扩展。

如果您不能这样做，您将检查分隔符包围的值，因此您必须在字段值之前和之后添加分隔符以进行精确匹配：

```
where '|' + Field + '|' like '%|' + @number + '|%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:12:01.827

```
select (case when (Field LIKE '%|' + cast(number as varchar(32)) + '|%' or Field LIKE cast(number as varchar(32)) + '|%' or Field LIKE '%|' + cast(number as varchar(32)) or cast(number as varchar(32)) = Field) then cast(number as varchar(32)) else Field end)
    from ... 
```

# jpa - 如何提交更新的数据（vaadin jpacontainer）

> ID：14998294
> 
> 赞同：0
> 
> 时间：2013-02-21T09:07:51.340
> 
> 标签：jpa, vaadin

我是 vaadin jpacontainer 的新手。我正在使用 vaadin jpacontainer agpl-3.0-2.10。

我制作了一个 Person 类，我的应用程序类如下所示：

```
EntityManager em = JPAContainerFactory.createEntityManagerForPersistenceUnit("book-examples");

JPAContainer<Person> persons = JPAContainerFactory.make(Person.class, "book-examples");
persons.setReadOnly(false);

persons.addEntity(new Person("Marie-Louise Meilleur", 117));
persons.addEntity(new Person("Sarah Knauss", 122));

Table personTable = new Table("person",persons);
personTable.setReadOnly(false);

persons.getItem(1L).getEntity().setName("Me");
persons.commit();
personTable.commit();
layout.addComponent(personTable); 
```

当我运行应用程序时，结果如我所愿：第一项的名称是“我”。但是当我检查数据库时，第一个项目的名称是“Marie-Louise Meil​​leur”。为什么提交方法没有改变数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T15:55:17.320

啊，只是方法不对。它应该是`persons.getItem(1L).getItemProperty("name").setValue("me");`

# sql - 仅打印 Oracle sqlplus 中 ORDER BY 列的第一个唯一值

> ID：14998296
> 
> 赞同：1
> 
> 时间：2013-02-21T09:07:57.647
> 
> 标签：sql, oracle, sqlplus, ddl

这个脚本为 Oracle 转储带有列和注释的表（我所做的：以人类可读的格式转储模式 DDL，而不依赖于任何外部工具，只是`sqlplus`，我想将此脚本提交给 SVN，以便任何团队成员都可以使用它）：

```
选择 dt.table_name、dt.column_name、dt.data_type、dt.data_length、comm.comments
  FROM user_col_comments comm, user_tab_columns dt
  WHERE dt.table_name = comm.table_name
    AND dt.column_name = comm.column_name
  按 dt.table_name 排序；

```

输出看起来像：

```
TBL111 COL11 ...
TBL111 COL22 ...
TBL222 COL11 ...
TBL222 COL22 ...
TBL222 COL33 ...
TBL333 COL11 ...

```

为了使其更具可读性，我寻找跳过不必要`TBLxxx`单词的方法：

```
TBL111 COL11 ...
       COL22 ...
TBL222 COL11 ...
       COL22 ...
       COL33 ...
TBL333 COL11 ...

```

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:14:06.527

当您使用 SQL*Plus 生成报告时，您可以使用它[`BREAK ON columnname`](http://docs.oracle.com/cd/E14072_01/server.112/e10823/ch_six.htm#sthref652)来抑制查询结果中的重复项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:13:50.313

```
SELECT case 
         when row_number() over (partition by dt.table_name order by dt.table_name) = 1 then dt.table_name
         else null
       end as table_name, 
       dt.column_name, 
       dt.data_type, 
       dt.data_length, 
       comm.comments
FROM user_col_comments comm, user_tab_columns dt
WHERE dt.table_name = comm.table_name
  AND dt.column_name = comm.column_name
ORDER BY dt.table_name, dt.column_id; 
```

# python - 如何在 python 和 GTK 3 中编写自定义 Gtk.CellRenderer？

> ID：14998298
> 
> 赞同：6
> 
> 时间：2013-02-21T09:08:00.623
> 
> 标签：python, gtk, pygtk, gtk3, pygobject

我必须用按钮编写自己的单元格渲染器，我想出了这个：

```
#!/usr/bin/env python3
from gi.repository import Gtk

class CellRendererButton(Gtk.CellRenderer):
    def __init__(self):
        Gtk.CellRenderer.__init__(self)

    def get_size(self, widget, cell_area):
        buttonHeight = cell_area.height
        buttonWidth = buttonHeight
        return (0, 0, buttonWidth, buttonHeight)

    def render(self, window, widget, background_area, cell_area, expose_area, flags):
        style = widget.get_style()
        x, y, buttonWidth, buttonHeight = self.get_size()
        style.paint_box(window, widget.get_state(), Gtk.SHADOW_ETCHED_OUT, expose_area, widget, None, 0, 0, buttonWidth, buttonHeight)

class MyWindow(Gtk.Window):
    def __init__(self):
        Gtk.Window.__init__(self, title = 'T', default_width = 200, default_height = 300)
        self.connect('destroy', self.__onDestroy)
        self.__createGUI()
        self.show_all()

    def __createGUI(self):
        box = Gtk.Box(orientation = Gtk.Orientation.VERTICAL)
        listStore = Gtk.ListStore(str, str)
        treeView = Gtk.TreeView(listStore)
        textRenderer = Gtk.CellRendererText()
        textColumnA = Gtk.TreeViewColumn(None, textRenderer)
        textColumnB = Gtk.TreeViewColumn(None, textRenderer)
        buttonRenderer = CellRendererButton()
        buttonColumn = Gtk.TreeViewColumn(None, buttonRenderer)
        textColumnA.add_attribute(textRenderer, 'text', 0)
        textColumnB.add_attribute(textRenderer, 'text', 1)
        treeView.append_column(textColumnA)
        treeView.append_column(textColumnB)
        treeView.append_column(buttonColumn)
        listStore.append(('my string', 'my string'))
        self.add(treeView)

    def __onDestroy(self, e):
        Gtk.main_quit()

t = MyWindow()
Gtk.main() 
```

但它不起作用：/我收到很多错误，例如：

```
(game.py:4736): Gtk-CRITICAL **: gtk_cell_renderer_render: assertion `GTK_CELL_RENDERER_GET_CLASS (cell)->render != NULL' failed 
```

我错过了什么？我还应该做些什么来让它发挥作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T19:43:13.683

你应该命名你的方法`do_get_size()`和`do_render()`. 这些是让 GTK 知道您正在覆盖父类的虚方法的特殊名称。

# java - 在java中填充空数据的oracle数组

> ID：14998299
> 
> 赞同：4
> 
> 时间：2013-02-21T09:08:09.350
> 
> 标签：java, oracle, weblogic

当我尝试将字符串数组扔给 oracle 存储过程时：

```
String arrStr[] ={"val1","val2","val3"};
ArrayDescriptor descriptor = ArrayDescriptor.createDescriptor("STR_ARRAY", connection );

oracle.sql.ARRAY oracleArray = new oracle.sql.ARRAY(descriptor, connection, arrStr); 
```

`oracleArray`保存空数据，oracleArray.datumArray = {???,???,???}

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-16T15:00:32.850

在我的情况下（见我上面的评论），它是由编码问题引起的，但是 - 没有任何异常或调试信息。将 orai18n.jar 包含到项目库中解决了这个问题......真的很伤心，没有例外或表明如何解决问题的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T12:23:05.493

几个小时后我找到了原因，真正的问题是您的数据库的 NLS_CHARACTERSET 使用您的客户端不支持的编码，jdbc 支持其他 NLS_LANG 必须在类路径中添加 orai18n.jar。使用此 sql 查看您的数据库设置：

> 选择 * 从 NLS_DATABASE_PARAMETERS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-09T14:17:39.443

可能您的 STR_ARRAY 是这样定义的：

`create or replace type STR_ARRAY is table of VARCHAR2(20);`

正如托马斯所说，问题在于编码。我的解决方案 - 改用 NVARCHAR2 。

`create or replace type STR_ARRAY is table of NVARCHAR2(20);`

# c# - 如何集成嵌入式 RavenDB 和 CascadeDelete 包？

> ID：14998314
> 
> 赞同：0
> 
> 时间：2013-02-21T09:08:58.470
> 
> 标签：c#, embed, ravendb, cascading-deletes

我正在尝试通过[CascadeDelete](http://ravendb.net/docs/server/bundles/cascade-delete) RavenDB 包在嵌入 RavenDB 的这个应用程序中实现级联删除，但该包似乎没有被激活。我该怎么办？

在下面的代码片段中是一个测试控制台应用程序，它尝试在嵌入式/内存中 RavenDB 数据库中启用级联删除，我已经安装了 NuGet 包 RavenDB.Embedded 2.5.2505-Unstable 和 RavenDB.Bundles.CascadeDelete 2.5.2505-Unstable为了它：

```
using System;
using System.Linq;
using Raven.Client;
using Raven.Client.Embedded;
using Raven.Json.Linq;

namespace ConsoleApplication1
{
    public class Parent
    {
        public string Id { get; set; }
    }

    public class Child
    {
        public string Id { get; set; }
        public string ParentId { get; set; }
    }

    public static class RavenExtensions
    {
        public static void AddCascadeDeleteReference(this IAdvancedDocumentSessionOperations session,
            object entity, params string[] documentKeys)
        {
            var metadata = session.GetMetadataFor(entity);
            if (metadata == null)
                throw new InvalidOperationException(
                  "The entity must be tracked in the session before calling this method.");

            if (documentKeys.Length == 0)
                throw new ArgumentException(
                  "At least one document key must be specified.");

            const string metadataKey = "Raven-Cascade-Delete-Documents";

            RavenJToken token;
            if (!metadata.TryGetValue(metadataKey, out token))
                token = new RavenJArray();

            var list = (RavenJArray)token;
            foreach (var documentKey in documentKeys.Where(key => !list.Contains(key)))
                list.Add(documentKey);

            metadata[metadataKey] = list;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var store = new EmbeddableDocumentStore { RunInMemory = true };
            store.Initialize();
            Parent parent;
            using (var session = store.OpenSession())
            {
                parent = new Parent();
                session.Store(parent);
                session.SaveChanges();

                var child = new Child();
                child.ParentId = parent.Id;
                session.Store(child);
                session.Advanced.AddCascadeDeleteReference(parent, child.Id);
                session.SaveChanges();
            }

            using (var session = store.OpenSession())
            {
                Console.WriteLine("Before deleting parent:");
                foreach (var child in session.Query<Child>())
                {
                    Console.WriteLine("  Child: {0} of parent {1}", child.Id, child.ParentId);
                }

                parent = session.Load<Parent>(parent.Id);
                session.Delete(parent);
                session.SaveChanges();

                Console.WriteLine("After deleting parent:");
                foreach (var child in session.Query<Child>())
                {
                    Console.WriteLine("  Child: {0} of parent {1}", child.Id, child.ParentId);
                }

                Console.WriteLine("Press any key...");
                Console.ReadKey();
            }
        }
    }
} 
```

当您运行此应用程序时，您应该看到子级没有与父级一起删除，即使它被配置为通过级联删除。请指出我如何在这个程序中进行级联删除工作:)

**更新：**

我尝试在 之后添加以下内容`store.Initialize();`，但没有区别：

```
store.DocumentDatabase.Configuration.Catalog.Catalogs.Add(
            new AssemblyCatalog(typeof(CascadeDeleteTrigger).Assembly)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:45:03.510

由于您处于嵌入式模式，因此您有两个选择：

1.  您可以将捆绑 dll 复制到插件目录中。

2.  您可以引用捆绑 dll，然后手动将其添加到目录中：

    ```
    documentStore.DocumentDatabase.Configuration.Catalog.Catalogs
        .Add(new AssemblyCatalog(typeof(CascadeDeleteTrigger).Assembly)); 
    ```

不要两者都做。如果您使用选项 #2，则捆绑 dll 不应位于插件文件夹中，否则它将被拾取两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:54:00.833

这有点违反直觉，但我发现我需要复制并配置 Visual Studio 以将文件复制`packages\RavenDB.Bundles.CascadeDelete.2.5.2505-Unstable\lib\net40\Raven.Bundles.CascadeDelete.dll`到`ConsoleApplication1\Plugins\Raven.Bundles.CascadeDelete.dll`输出目录，以便 RavenDB 拾取它。

现在 CascadeDelete 捆绑包可以工作，并且子级与父级一起删除。

![在此处输入图像描述](../Images/6e1d3723eebff459af1a920547c0d042.png)

# lotus-domino - 使用远程服务器的非邮件数据库的邮件转换实用程序

> ID：14998328
> 
> 赞同：0
> 
> 时间：2013-02-21T09:09:35.783
> 
> 标签：lotus-domino

我想使用邮件转换实用程序将我的服务器上的非邮件数据库设计替换为位于远程服务器上的模板。

我尝试类似：

加载转换 -n mydb.nsf * !!template.ntf

但我总是得到：

邮件升级失败：无法打开设计模板文件......无法找到服务器路径

注意：

*   远程服务器是可访问的，如果我这样做（打开数据库）并且我指定了 IP 和 ServerName（因此，服务器是交叉认证的）
*   如果我使用局域网中的服务器进行相同的转换操作，它可以工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:37:20.270

看起来您在模板的路径中指定了一个空的服务器名称。您是否尝试将缩写名称放在“！！”之前？

```
load convert -n mydb.nsf * removeServerName/OrgUnit/Org!!template.ntf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:45:27.203

我不确定它是否适用于位于另一台服务器上的模板。我建议您将模板复制到您的服务器并像往常一样进行设计替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:51:36.647

所有这些都是基本的管理知识，与“编码”无关。尽管如此：如果您在服务器上运行命令，则该服务器会执行该命令。如果您使用 admin-client 连接到服务器，则执行该命令。

因此，您需要使您的服务器能够：

a) 查找另一台服务器：您创建一个从您的服务器到另一台服务器的连接文档（当然必须配置网络/防火墙）

b）在另一台服务器上进行身份验证：要“证明”您的服务器确实是他假装的那个人，您需要与其他域交换您的服务器的公钥。这样做的过程称为“交叉认证”，可以在 Domino 管理员帮助中找到相关说明。

c) 由其他服务器授权：在证明身份后，您的服务器必须被允许访问服务器并通过在客户服务器的安全选项卡中输入正确的值来执行您想做的事情

d) 被授权使用其他服务器上的相关数据库（通过 ACL）

所有这些都需要在两个方向上进行检查。

# c# - 在代码隐藏中调用 javascript

> ID：14998329
> 
> 赞同：1
> 
> 时间：2013-02-21T09:09:40.480
> 
> 标签：c#, javascript, c, telerik

我通过代码隐藏调用 javascript。给出对象预期的错误。如何通过 ShowDialog() 函数传递一些值？

这是我在代码隐藏中的代码

```
ClientScript.RegisterStartupScript(GetType(), "Call my function", "ShowDialog("Value_here");", true); 
```

在我的 javascript 中

```
 <script type="text/javascript">
    var IRProjectID = 0;

    function ShowDialog(UnitID) {
        radconfirm("Are you sure you want to approve this Help Desk item?", confirmBackChecked);
        IRProjectID = UnitID;
    }

    function confirmBackChecked(arg) {
        if (arg == true) {
            __doPostBack(IRProjectID, 'Approve');
        }
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T03:40:02.533

```
ClientScript.RegisterStartupScript(this.GetType(), "Call My Function", "ShowDialog("Value_here");", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:16:43.187

试试这个

```
ClientScript.RegisterStartupScript(this.GetType(), "Test", "ShowDialog("+Value_here+");", true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:31:21.423

也许您调用 javascript 函数太快了...尝试使用`Page.RegisterClientScriptBlock`

调用javascript函数时要小心。确保它之前存在！！！！

**编辑**：

`Page.RegisterClientScriptBlock`已过时，使用`ClientScriptManager.RegisterClientScriptBlock`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:19:33.747

我认为错误是由您在 Value_here 周围使用的双引号引发的

```
ClientScript.RegisterStartupScript(GetType(), "Call my function", "ShowDialog("Value_here");", true); 
```

试试这个

```
ClientScript.RegisterStartupScript(GetType(), "Call my function", "ShowDialog(\"Value_here\");", true); 
```

或者

```
ClientScript.RegisterStartupScript(GetType(), "Call my function", "ShowDialog('Value_here');", true); 
```

# excel - 用于检查 A 列中的文本是 B 列中文本的开头还是结尾的公式

> ID：14998332
> 
> 赞同：0
> 
> 时间：2013-02-21T09:09:52.430
> 
> 标签：excel, comparison, excel-formula

我在 A 列和 B 列中有值，其中 A 行中的值肯定是 B 行的一部分。现在我想检查 A 列中的值是 B 列的开头还是 B 列的结尾。有什么办法?

数据示例：

```
A列 B列
北京 北京，中国（A是B的开头）
Baslow 英国 英国 Bakewell Baslow (A is end of B)

```

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:14:32.310

当然，这是可能的：

```
=IF(ISERROR(SEARCH(A2,B2)),"不是部分",IF(SEARCH(A2,B2)=1,"开始",IF(SEARCH(A2,B2)=LEN(B2)-LEN(A2 )+1,"结束","中间")))

```

# php - 为什么在编译 PHP 以将其用作共享库时没有将 gmp.so 复制到正确的位置？

> ID：14998338
> 
> 赞同：1
> 
> 时间：2013-02-21T09:10:18.343
> 
> 标签：php, ubuntu, compilation, gmp

我最近重新编译了 PHP CLI 以使用 GMP 扩展作为共享库，并使用`dpkg -i`我使用 Ubuntu 包提供的 PHP5 ( `apt-get source php5`) 源安装它。之后 PHP 无法找到 gmp.so 文件。在我的系统上对该文件执行 a 后`find`，我发现它位于 php5-5.3.2/cli-build/modules/gmp.so 目录中（在我拥有原始 PHP 源的树中）。我很惊讶包安装程序没有将此库复制到指定的安装目录（它为所有其他 PHP 扩展执行此操作）。这是一个错误，还是我错过了编译/安装过程的某些部分？

这是我的配置命令：

```
'../configure'  '--build=i486-linux-gnu' '--host=i486-linux-gnu' '--disable-all' \
     '--prefix=/usr' '--with-config-file-path=/etc/php5/clibare' \ 
     '--with-config-file-scan-dir=/etc/php5/clibare/conf.d' '--with-mysql=shared,/usr/lib' \ 
     '--with-curl=shared,/usr' '--enable-pcntl' '--enable-posix' '--enable-json' \
     '--with-gmp=shared,/usr' '--with-system-tzdata' 
```

# marklogic - Marklogic：查询响应时间非常长

> ID：14998342
> 
> 赞同：2
> 
> 时间：2013-02-21T09:10:33.147
> 
> 标签：marklogic

我在 uri 中有大约 15000 条 xml 格式的记录，比如：“ `documents/products/specs/*.xml`”。每个 xml 的大小约为 25 千字节。我使用一个远程 Apache Tomcat 服务器连接到这个 marklogic 服务器，该服务器有一个`XCC client`（Java），它试图执行一个`AdHocQuery`类似于这样的东西：

```
let $a := cts:uri-match('documents/products/specs/*.xml')
          for $xml in $a
          return fn:doc($a) 
```

（for循环在java中实现）。

这工作正常。但是对于数量较多的记录，比如 15000 条记录，需要 60 分钟，此时所有服务器和互联网速度都非常好。（uri 中所有文档的总大小约为 20 MB，不应超过 20 分钟）。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:02:23.553

尝试这个：

```
cts:search(
    fn:doc(),
    cts:document-query(
        cts:uri-match('documents/products/specs/*.xml')
    ), "unfiltered"
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:57:40.283

您正在做的是请求所有文件的全文。这不是典型的查询，而是数据库转储。您显示的查询将缓冲所有这些数据，然后通过 tomcat 发送它，tomcat 再次缓冲所有数据，然后将其发送给您。这是一个要在一个请求中发送的大型数据集。

您查询的目的是什么？如果您想获取所有文档，您应该使用诸如 mlcp 之类的程序将它们转储出来，或者通过首先收集 URI 然后获取文档来分批获取它们。这可以通过并行获取文档来大大加快速度。您可以在 xmlsh 中查看 Java 源代码示例，该示例展示了如何在 XCC 中并行获取文档

```
http://xmlsh.svn.sourceforge.net/viewvc/xmlsh/extensions/marklogic/src/org/xmlsh/marklogic/get.java?revision=792&view=markup 
```

我的猜测（如果我错了，请纠正我）是您只是在试验，实际上并不需要所有文档。在这种情况下，应该尝试更实际的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:54:37.123

查询花费这么长时间的原因是 Marklogic 服务器正在从磁盘读取大多数这些文件。除非你有一个非常大的树缓存大小。您需要做的是缩小查询范围。也许为文件添加一些索引。

所有这一切，如果你想做的只是 ETL 数据，那么你可能想要批量处理请求。

# c++ - 睡眠限制了线程性能

> ID：14998343
> 
> 赞同：2
> 
> 时间：2013-02-21T09:10:40.737
> 
> 标签：c++, pthreads, sleep

我有一个多线程系统，其中有**x**个线程同时将数据包发送到网络。

这一切都很好，任何花花公子，但是一些线程我想限制它们的速度以便以一定的速率发送数据包。

所以我在我的数据包注入循环中加入了睡眠，它很好地减慢了小速度（1 Mbps 到 70Mbps 左右）的线程，但是如果我想将其限制为 1Gbps，那么我就无法通过睡眠达到那个速度到位。现在我知道它可以达到这个速度，因为如果我从所有线程中移除睡眠，它们可以以每个接近 2Gbps 的速度注入。

所以作为一个测试，我把我的睡眠换成了

```
usleep(0); 
```

我相信这应该可以让速度再次回到全速，但它仍然有限（仅达到最大速度的 1/20 左右）。所以我目前唯一的解释是，即使是 sleep(0)，线程也会产生，因此没有线程获得足够的执行时间。

所以，对于冗长的解释感到抱歉，但是有没有更好的方法让我的线程休眠而不会造成这样的性能损失？

我已经尝试过，usleep 和 nanosleep 并且两者的结果相同。所有测试的设置相同，即线程数

系统：CentOS、pthreads、g++ 4.4.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:17:53.570

考虑在每个注入的数据包中添加`sleep`调用，而不是简单地在每次迭代中添加。`n`这样，您不会在每个注入的数据包上产生线程切换惩罚，并且您可以以相当细粒度的方式控制完成的睡眠量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:16:25.983

很可能是函数调用本身减慢了速度（要么是因为函数调用的建立和拆除，要么是因为调用中的某些东西正在做其他让你慢下来的事情）。

您可能需要考虑如下一行：

```
if (delay > 0) usleep (delay); 
```

因此，如果不需要延迟，则*根本*不会调用该函数。

您甚至可以将其封装成：

```
#define usleepIfNonZero(n) { if (n > 0) usleep (n); } 
```

当然，通常的警告适用于宏参数（不要传递类似的东西，`x++`否则你会发现它增加了两次）。

* * *

或者，只需维护数据包计数和用于计算的基本时间并计算出*平均速度*。例如：

```
#define PACKETS_PER_SEC 25

baseTime = now() - 1; // prevent divide by zero later on 
packetCount = 0;
while (1) {
    sendPacket (nextPacket());
    packetCount++;
    secondCount = now() - baseTime;
    while (packetCount / secondCount > PACKETS_PER_SEC) {
        sleep (1);
        secondCount = now() - baseTime;
    }
} 
```

这将自动收敛到每秒数据包达到 25 个的点，但当然您可能*仍然*会发现处理不允许您达到全速。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:34:06.707

您说“所以我目前唯一的解释是，即使对于 sleep(0)，线程也会产生，因此没有线程获得足够的执行时间。”

根据[http://pubs.opengroup.org/onlinepubs/7908799/xsh/usleep.html](http://pubs.opengroup.org/onlinepubs/7908799/xsh/usleep.html)如果 usleep(...) 得到 0，那么它没有影响，因此，如果我们将它传递 0，则不会发生线程上下文切换！

你是否验证过usleep(0)；真正引起问题，如果您注释掉这个电话，一切都按预期工作吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:45:49.937

不要以这种方式依靠睡眠来进行节流。您不在实时系统上。

而是在您想要发送 X 数据/时间单位的地方发送 X 数据突发，其中时间单位可能是毫秒或类似的东西。然后在发送每个突发后计算出你需要多长时间才能达到你想要的平均带宽并睡那么多。不要对最后一个突发进行此计算，而是以高精度计时记录每个突发的开始时间，并计算在更大的一组突发上摊销，比如最后 100 个突发或类似的东西。这样，您可以平均化上下文切换、系统调用、主发送循环之外的任何开销，以及返回运行进程的延迟。

当您使用睡眠（x）（x ！= 0）时，您正在让步并且将简单地添加到运行队列中的某个位置，无法保证您在非实时系统上再次成为运行进程的速度有多快。因此，您必须随着时间的推移摊销此类开销差异。

# asp.net - 为什么在默认 MVC3 项目 web.config 的“编译”部分中添加了 System.Web.Routing？

> ID：14998345
> 
> 赞同：0
> 
> 时间：2013-02-21T09:10:51.763
> 
> 标签：asp.net, .net, asp.net-mvc, iis, web-config

当我在 Visual Studio 2010 中使用“ASP.NET MVC3 Web 应用程序”模板创建一个新项目时，我得到一个带有 web.config 的项目，其中包含这个`<system.web><compilation><assemblies>`

```
<add assembly="System.Web.Routing, Version=4.0.0.0,
      Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

现在，此部分控制在 ASP.NET 预编译期间引用的程序集列表 - 将 .aspx、.ascx 和 .cshtml 文件转换为 .NET 程序集的过程。

这些文件用于“视图”，通常包含用于显示网页元素的代码。我仔细查看了`System.Web.Routing`命名空间的内容，但在“视图”中找不到任何有用的东西。

`System.Web.Routing`在`<compilation>`web.config 部分中引用的目的是什么？

# javascript - 从 fullcalendar 重用 dateformat

> ID：14998349
> 
> 赞同：0
> 
> 时间：2013-02-21T09:10:59.397
> 
> 标签：javascript, fullcalendar

我正在使用 fullcalendar 插件来显示周视图。是否可以重用 fullcalendar 用于格式化不同元素中的日期的 dateformatter？我该怎么做呢？

示例：将当前日期显示为 ('short day name' 'monthnumber'/'day of month number') (="Thu 2/21") 就像在周视图中一样。但这在 div 标签或类似的东西中。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:12:10.230

是的 - FullCalendar 提供了一个名为`formatDate`. 检查这个文档 - [formatDate](http://arshaw.com/fullcalendar/docs/utilities/formatDate/)

让我知道这是否有帮助！

# sql - 如何将日期时间字段显示为浮点数？

> ID：14998350
> 
> 赞同：0
> 
> 时间：2013-02-21T09:10:58.980
> 
> 标签：sql, sql-server-2005, stored-procedures

我有一个日期时间类型的列。日期部分始终为 1899-12-30。我对时间部分很感兴趣。

这里有些例子：

```
Original field data:          Desired return value:
1899-12-30 07:45:00.000       7,75 or 7,45
1899-12-30 13:00:00.000       1 or 13 
1899-12-30 08:00:00.000       8
1899-12-30 13:30:00.000       13,5 or 13,30
1899-12-30 18:15:00.000       18,25  or 18,15 
```

获得所需输出的最佳方式是什么？

** 我使用的是 sql server 2005。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:16:14.977

```
select  1.0 * datepart(hour, yourDateColumn) + 0.01 * datepart(minute, yourDateColumn)
from    yourTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:17:39.777

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/9fcb0/6)**

```
SELECT t.dt,
       CAST(DATEPART(hour, t.dt) AS NVARCHAR(2)) +
       CASE WHEN DATEPART(minute, t.dt) = 0 THEN ''
       ELSE ',' END + 
       CASE WHEN DATEPART(minute, t.dt) = 0 THEN ''
       ELSE CAST(DATEPART(minute, t.dt) AS NVARCHAR(2)) END AS rr
FROM Table1 t 
```

结果：

```
|                              DT |    RR |
-------------------------------------------
| December, 30 1899 07:45:00+0000 |  7,45 |
| December, 30 1899 13:00:00+0000 |    13 |
| December, 30 1899 08:00:00+0000 |     8 |
| December, 30 1899 13:30:00+0000 | 13,30 |
| December, 30 1899 18:15:00+0000 | 18,15 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:18:49.200

一种选择是用于`DATEDIFF`查找自 1899 年 12 月 31 日午夜以来的毫秒数，然后除以一小时内的毫秒数：

```
SELECT DATEDIFF("ms", ColumnName, '1899-12-31 00:00:00') / 3600000.0 FROM Foo 
```

或者，如果您的数据仅精确到最接近的秒数：

```
SELECT DATEDIFF("s", ColumnName, '1899-12-31 00:00:00') / 3600.0 FROM Foo 
```

# php - 使用 vb.net 通过 php 获取 MySQL 信息

> ID：14998351
> 
> 赞同：0
> 
> 时间：2013-02-21T09:11:19.723
> 
> 标签：php, mysql, vb.net

我需要一点帮助，因为我卡住了，而且我对 php 和 vB.net 连接不太好......所以这是问题所在，我设法连接到 db 和 php 脚本显示我是否连接，如果用户获取/pw 是正确的，一切正常，但现在我不知道如何在显示新表单时获取该用户的数据并将其显示在标签中，就像在 db 中它有注册日期、上次登录和电子邮件一样，我想要让它们出现在我的第二个表格中。所以如果有人可以帮助我整理这些东西并设法完成目标，我将非常感激！

用户检查.php

```
<?php
if($_POST)
{
    if(isset($_POST["username"]) && isset($_POST["password"]))
    {
        $connect = mysql_pconnect("localhost","username","password");
        if($connect)
        {
            $select = mysql_select_db("mydatabase",$connect);
            if($select)
            {
                $user = mysql_escape_string($_POST["username"]);
                $pwd = mysql_escape_string($_POST["password"]);
                $GetRows = mysql_query("SELECT * FROM MyTableHere WHERE username='$user' AND password='$pwd'");
                $RowCount=mysql_num_rows($GetRows);
                if($RowCount>0)
                {
                    die("Correct !");
                }
                else
                {
                    die("Incorrect !");
                }
            }
            else
            {
                die("Unable to select database." . mysql_error());
            }
        }
        else
        {
            die("Unable connect to database." . mysql_error());
        }
    }
    else
    {
        die("Access Denied!");
    }
}
else
{
    die("Access Denied!");
}
?> 
```

来自 Form1.vb 的片段

```
Function AuthUser(ByVal AuthenticationPage As String, ByVal Username As String, ByVal Password As String) As Boolean
        Dim wc As New WebClient()
        wc.Headers.Add("Content-Type", "application/x-www-form-urlencoded")
        Dim Data As String = String.Format("username={0}&password={1}", HttpUtility.UrlEncode(Username), HttpUtility.UrlEncode(Password))
        Dim ResponseBytes() As Byte = wc.UploadData(AuthenticationPage, "POST", Encoding.ASCII.GetBytes(Data))
        Dim Response As String = Encoding.ASCII.GetString(ResponseBytes)
        If Response.Contains("Correct") Then
            Return True
        Else
            Return False
        End If
    End Function
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        If AuthUser("http://127.0.0.1/Usercheck.php", TextBox1.Text, TextBox2.Text) Then
            Me.Hide()
            Form2.Show()
        Else
            MsgBox("You have provided invalid username or password. Unable to login.")
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:15:04.250

这可能有助于 [http://www.aspfree.com/c/a/vb-net/bridging-the-gap-talking-to-mysql-from-vb-net-through-php-and-xml/](http://www.aspfree.com/c/a/vb-net/bridging-the-gap-talking-to-mysql-from-vb-net-through-php-and-xml/)

它显示了如何通过 php 生成的 xml 显示来自 mysql 的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T19:00:59.250

尝试在 vb.net 中将值声明为全局变量。然后，您可以在整个项目中访问所述变量，甚至可以以其他形式访问。

# c++ - 客户端控制台显示收到的消息并接受消息

> ID：14998352
> 
> 赞同：0
> 
> 时间：2013-02-21T09:11:31.163
> 
> 标签：c++, loops, client, client-server, client-side

我有一个服务器多客户端程序。服务器需要（并且可以）随时向客户端发送消息，因此客户端需要不断准备好接收（并在其控制台上显示）服务器发送的所有消息。

同时，客户端控制台需要接受输入发送到服务器进行处理（服务器充当客户端之间的中介）。

我怎样才能做到这一点？我正在使用取自[http://www.codeproject.com/Articles/7785/Single-Server-With-Multiple-Clients-a-Simple-C-Imp](http://www.codeproject.com/Articles/7785/Single-Server-With-Multiple-Clients-a-Simple-C-Imp)的一段代码和客户端代码（我附上下面）通过接受来自服务器的消息，在它准备好接收消息之前将其发送到服务器来工作。我如何调整它来做我需要的？

我只包括客户端代码的主体，因为我认为这可能只是使用循环的问题——尽管我不知道是什么循环——所以如果我应该附加任何其他代码，请告诉我。

```
#include "stdafx.h"
#include "mySocket.h"
#include "myLog.h"
#include "myException.h"
#include "myHostInfo.h"

myLog winLog;
void readServerConfig(string&);
void checkFileExistence(const string&);

int main()
{
//initialize the winsock library
myTcpSocket::initialize();

//get client's information (assume neither the name nor the address is given)
winLog << endl;
winLog << "retrieve the localHost [CLIENT] name and address:" << endl;
myHostInfo clientInfo;
string clientName = clientInfo.getHostName();
string clientIPAddress = clientInfo.getHostIPAddress();
cout << "name: " << clientName << endl;
cout << "address: " << clientIPAddress << endl;
winLog << "     ==> name: " << clientName << endl;
winLog << "     ==> address: " << clientIPAddress << endl;

//get server's IP address and name
string serverIPAddress = "";
readServerConfig(serverIPAddress);
winLog << endl;
winLog << "retrieve the remoteHost [SERVER] name and address:" << endl;
winLog << "     ==> the given address is " << serverIPAddress << endl;

myHostInfo serverInfo(serverIPAddress,ADDRESS);
string serverName = serverInfo.getHostName();
cout << "name: " << serverName << endl;
cout << "address: " << serverIPAddress << endl;
winLog << "     ==> name: " << serverName << endl;
winLog << "     ==> address: " << serverIPAddress << endl;

//create the socket for client
myTcpSocket myClient(PORTNUM);
cout << myClient;
winLog << "client configuation: " << endl;
winLog << myClient;

// connect to the server.
cout   << "connecting to the server [" << serverName << "] ... " << endl;
winLog << "connecting to the server [" << serverName << "] ... " << endl;
myClient.connectToServer(serverIPAddress, ADDRESS);

int recvBytes = 0;
while (1)
{
    // send message to server
    char messageToServer[MAX_MSG_LEN+1];
    memset(messageToServer, 0, sizeof(messageToServer));
    cout << "[SEND] ";
    cin.getline(messageToServer,MAX_MSG_LEN);

    winLog << "[SEND] " << messageToServer << endl;
    myClient.sendMessage(string(messageToServer));

    if ( !string(messageToServer).compare("Quit") || !string(messageToServer).compare("quit") ) 
        break;

    // receive message from server
/*  string messageFromServer = "";
    recvBytes = myClient.receiveMessage(messageFromServer);
    if ( recvBytes == -99 ) break;

    cout   << "[RECV:" << serverName << "]: " << messageFromServer << endl;
    winLog << "[RECV:" << serverName << "]: " << messageFromServer << endl;*/

}

return 1; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:34:16.187

如果您熟悉线程编程，我建议分配一个单独的线程来处理传入流量，另一个线程处理传出流量。

另一种选择是使用异步套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T08:18:48.573

1.客户端连接服务器后`client1`，不要关闭连接等待`client2``client3``read()`

2.在服务器端你可能想看看`pselect`和`&timeout`。

3.建立连接后，将 session_fd 存储到数组中`clientId[3]`

4.现在你可以写到`write(client[0-2], , ...)`

逻辑 -

```
int socks[10] = {... some client sockets...}

while(1)
{
   fd_set readSet, writeSet;
   FD_ZERO(&readSet);
   FD_ZERO(&writeSet);

   int maxSock = -1;
   for (int i=0; i<10; i++)
   {
     FD_SET(socks[i], &readSet);
     if (socks[i] > maxSock) maxSock = socks[i];

     if (IHaveDataToSendToThisSocket(i))  // implement this function as appropriate to your program
      {
        FD_SET(socks[i], &writeSet);
        if (socks[i] > maxSock) maxSock = socks[i];
      }
}

int ret = select(maxSock+1, &readSet, &writeSet, NULL, NULL);
if (ret < 0)
{
  perror("select() failed");
  break;
}

// Do I/O for sockets that are ready
for (int i=0; i<10; i++)
{
  if (FD_ISSET(socks[i], &readSet))
  {
     // there is data to read on this socket, so call recv() on it
  }

  if (FD_ISSET(socks[i], &writeSet))
  {
     // this socket has space available to write data to, so call send() on it
  }
 }
} 
```

# jsf-2 - h:inputText 在更改 h:selectOneMenu 值时未重新呈现，未按预期工作

> ID：14998354
> 
> 赞同：0
> 
> 时间：2013-02-21T09:11:41.937
> 
> 标签：jsf-2, rendering, show-hide

我有 ah:selectOneMenu，当它的值更改为特定值（比如“2”）时，它应该显示隐藏字段（尚未呈现）。请注意，它们链接到托管 bean 中属性的相同值。

```
<h:outputText value="Function:"></h:outputText>
<h:selectOneMenu id="funDrp" converter="FunctionConv" value="#{cardBean.card.functionId}">
    <f:selectItems value="#{commonData.functions}" var="c" itemLabel="#{c.description}" itemValue="#{c.functionId}" />
    <f:ajax render="@form" execute="@form" event="valueChange" />
</h:selectOneMenu>

<h:outputText value=" Profile Id:" rendered="#{(cardBean.card.functionId.functionId==2)}"></h:outputText>
<h:inputText id="card_refillProfileId"rendered="#{(cardBean.card.functionId.functionId==2)}" label="Refill Profile Id" required="true" value="#{cardBean.card.refillProfileId}"></h:inputText>

<h:outputText value="Origin Type:" rendered="#{(cardBean.card.functionId.functionId==2)}"></h:outputText>
<h:inputText id="card_originType" rendered="#{(cardBean.card.functionId.functionId==2)}" label="Origin Node Type" required="true" value="#{cardBean.card.originType}"></h:inputText> 
```

如果将“卡片”对象分配给现有实体，它们可以正常工作，但如果它是新实体 - 它不会按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:58:15.760

这是完全预期的行为。使用`<f:ajax>`您可以重新呈现存在于您的 DOM 中的 HTML 元素，但通过`rendered="false"`在您的 JSF 组件中指定它们不会出现在您的 DOM 中。而且，由于 ajax 需要通过它的 id*找到*元素，然后替换它，这个工作显然无法完成。

但是，您的工作可以通过`rendered`在容器中包含您的组件（所有组件都使用该属性）来处理，例如 in `<h:panelGroup id="to-be-rerendered">`，它总是被渲染，但它的孩子 - 不是。`rendered="true"`因此，如果满足条件，ajax 将能够重新渲染包含所有组件的面板，并且它们将出现在您的视图中。

作为旁注，如果您的视图/表单增长，您的 ajax 行为可能会非常昂贵。因此，如果您只想重新渲染*某些*组件，请在您的`<f:ajax>`标签中指定它：（`<f:ajax render="to-be-rerendered" />`要渲染的组件的空格分隔 ID 列表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T23:13:14.907

问题是附加到选择一个菜单的值是空的“card.functionId”。所以在检查它之前初始化它。因为我试图在构造bean之前初始化它，但它没有帮助。

所以要做到这一点，初始化是通过为 selectOneMenu 附加一个“ValueChangeListener”来完成的

```
<h:selectOneMenu id="funDrp" converter="FunctionConv" valueChangeListener="#     {cardBean.changeCardFunc}"
                                            value="#{cardBean.card.functionId}">
                                            <f:selectItems value="#{commonData.functions}" var="c"
                                            itemLabel="#{c.description}" itemValue="#{c.functionId}" />
                                            <f:ajax render="@form" execute="funDrp" event="change" />
                                          </h:selectOneMenu> 
```

在托管 Bean 中：

```
public void changeCardFunc(ValueChangeEvent e) {
//  object newFunc= e.

    if(card!=null){
    card.setFunctionId((Function)e.getNewValue());
    }else {
        card= new Card();
        card.setFunctionId((Function)e.getNewValue());
        System.err.println(e.getNewValue());
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T09:40:20.280

尝试

```
<f:ajax render="card_refillProfileId card_originType" execute="@form" event="valueChange" /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-21T09:45:22.617

您的

```
<f:ajax render="@form" execute="@form" event="valueChange" /> 
```

应该是（事件可以省略）

```
<f:ajax render="@form" execute="@form" event="change" /> 
```

selectOneMenu.value、您的转换器和渲染的 EL 之间似乎存在不匹配。有两次`functionId.functionId`。并且`selectOneMenu.value`绑定到`cardBean.card.functionId`. `functionId`如果是一个函数，我可能是错的。

# javascript - 学习如何用该语言编写大型程序需要查看哪些开源 javascript 项目

> ID：14998357
> 
> 赞同：5
> 
> 时间：2013-02-21T09:11:59.300
> 
> 标签：javascript, architecture

我在 Java 的大规模开发方面有相当多的经验。但是，我想学习如何在 JavaScript 中这样做。谁能指出我可以学习的 JavaScript 中一些很棒的大型（> 20KLOC，甚至> 100KLOC）开源项目。

我特别想学习：

*   如何构建 JS 项目
*   如何测试它们
*   如何重构它们

PS 我读了几本很好的 JS 书籍，包括 JS Good Parts，但都没有满足我的需求。它们中的大多数都很小（< 20k 行代码）。我也知道 Closure 编译器，但发现它的方法并不令人满意。对我来说，这类似于使用一些注释手动将代码从 Java 转换为 JavaScript，并使用检查器来确保类型正确。我宁愿使用 GWT（我目前正在使用）。

# javascript - android中焦点文本区域上的虚拟键盘弹出窗口不起作用

> ID：14998360
> 
> 赞同：2
> 
> 时间：2013-02-21T09:12:09.830
> 
> 标签：javascript, android, html

当我调用 textarea.focus() 时，虚拟键盘不会出现。它仅在某些事件处理程序调用 textarea.focus() 时出现。如何在不产生任何事件的情况下显示软键盘？

# java - 如何在itext中使用签名pdf上的注释添加用户定义的外观图标？或者有可能吗？

> ID：14998365
> 
> 赞同：0
> 
> 时间：2013-02-21T09:12:38.200
> 
> 标签：java, pdf, annotations, itext

我正在尝试在签名的 pdf 上添加“用户定义的外观图标”。如何实施问题？请帮我修复它。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:15:37.853

使用预定义图标创建注释很容易。[只需在关键字列表](http://itextpdf.com/themes/keywords.php)中查找“注释 > 注释图标” ：http : [//itextpdf.com/themes/keyword.php ?id=294](http://itextpdf.com/themes/keyword.php?id=294)

将这些注释添加到签名的 PDF 是棘手的部分。在某些情况下，如果不破坏签名，这是不可能的，更具体地说，当签名的 MDP 设置阻止添加注释时。在这种情况下，你的问题是无法回答的。

但是，如果 MDP 设置允许添加注释，那么您需要使用`PdfStamper`附加模式添加注释。[在PDF 和数字签名](http://itextpdf.com/book/digitalsignatures)手册中搜索关键字“附加模式”。

```
public void addAnnotation(String src, String dest)
    throws IOException, DocumentException {
    PdfReader reader = new PdfReader(src);
    PdfStamper stamper =
        new PdfStamper(reader, new FileOutputStream(dest), '\0', true);
    PdfAnnotation comment = PdfAnnotation.createText(stamper.getWriter(),
       new Rectangle(200, 800, 250, 820), "Finally Signed!",
       "Bruno Specimen has finally signed the document", true, "Comment");
    stamper.addAnnotation(comment, 1);
    stamper.close();
} 
```

“Comment”的可能替代值是“Key”、“Note”、“Help”、“NewParagraph”、“Paragraph”和“Insert”。

# ldap - LDAP 中的别名条目和获取别名数据

> ID：14998369
> 
> 赞同：0
> 
> 时间：2013-02-21T09:12:41.547
> 
> 标签：ldap, spring-ldap

我是 LDAP 的新手。我不知道如何在 LDAP 中创建别名。我在我的项目中使用 Spring-LDAP 模板。我的情况是：Imran Khan 可以在 Sports 和 Politics 下找到。我想针对“Imran Khan”与体育的政治联系创建别名条目。单个 LDAP 查询服务器可以同时查询普通条目和别名条目。或者我必须为此目的编写两个不同的查询。如果是其中任何一个，请帮助我进行正确的查询。同样在从别名条目中获取结果的情况下，查询将是什么。欢迎任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T23:45:23.390

> 单个 LDAP 查询能否同时服务于普通条目和别名条目。

是的，如果它的范围和搜索参数足以访问这两个地方的条目。但是别名通常会自动解析，因此结果应该是同一条目的两个副本，原始（非别名）一个。

> 或者我必须为此目的编写两个不同的查询。

不。

> 同样在从别名条目中获取结果的情况下，查询将是什么。

根本不返回别名条目。原来的是。你不必担心它。

# javascript - 根据 iframe 的大小动态更改 iframe 页面缩放

> ID：14998372
> 
> 赞同：1
> 
> 时间：2013-02-21T09:12:50.593
> 
> 标签：javascript, jquery, html, css

是否可以从框架页面检测 iframe 的高度和宽度，并基于它设置缩放，以便页面适合 iframe 的内容 100 宽度。

例如，我有一个页面，其分钟。宽度为 960 像素，但有人想在 690 像素宽度的 iframe 中显示我的页面，没有滚动条。

我将如何检测并基于此缩放内容，以便人们可以看到整个页面但缩小了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:38:32.943

元概念可能如下：

```
// Check if window is inside of an iframe
if (window.self !== window.top) {
    var optimalSize = 500; // desired width of the page
    document.body.style.zoom = optimalSize / window.innerWidth;
} 
```

另一种选择可能是使用媒体查询来应用适当的样式 - 我认为这对您的情况是最好的。

# php - 调试 MySQL

> ID：14998376
> 
> 赞同：1
> 
> 时间：2013-02-21T09:13:00.643
> 
> 标签：php, mysql, debugging

故事是这样的，我们有一个名为 syslog 的 MySQL 数据库，有以下几个表：

```
Tables_in_syslog            |
+-----------------------------+
| plugin_camm_syslog          |
| plugin_camm_syslog_MonthDec |
| plugin_camm_syslog_MonthJan |
| plugin_camm_syslog_incoming 
```

表`plugin_camm_syslog_incoming`有存储引擎 MEMORY，其他的是`MyISAM`.

这是每月第一天从 cron 运行的脚本：

```
<?php
# This script rotates the mysql syslog-ng database
# on a monthly basis.   Place in "/etc/cron.monthly".
# To change to weekly/daily, adjust "$date" and place
# in the appropriate cron folder.

$link = mysql_connect("localhost", "syslogadmin", "sysadmin");
if (!$link) {
    die("Could not connect: " . mysql_error());
}
echo "Connected successfully\n";

// make syslog the current db
$db_selected = mysql_select_db("syslog", $link);
if (!$db_selected) {
    die ("Can\"t use syslog : " . mysql_error());
}

// Rename the table, appending short month
$last= mktime(0, 0, 0, date("m")-1, date("d"), date("Y"));
$drop= mktime(0, 0, 0, date("m")-3, date("d"), date("Y"));
$d=date("M", $last); $dd=date("M", $drop);
$date="Month$d"; $dropdate="Month$dd";

// drop old table
// drop 2 month old table
$result=mysql_query("DROP TABLE `plugin_camm_syslog_$dropdate`");
//$result=mysql_query("DROP TABLE `plugin_camm_syslog_$date`");

//make new date
$last= mktime(0, 0, 0, date("m")-1, date("d"), date("Y")); $d=date("M", $last);
$date="Month$d";
#echo "XX $date\n";
#die ("test $result:".mysql_error());

$result = mysql_query("ALTER TABLE `plugin_camm_syslog` RENAME `plugin_camm_syslog_$date`");
if (!$result) { die("Invalid query: " . mysql_error()); }

// Recreate the original table
$result="
    CREATE TABLE `plugin_camm_syslog` (
        `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
        `host` varchar(128) DEFAULT NULL,
        `sourceip` varchar(45) NOT NULL,
        `facility` varchar(10) DEFAULT NULL,  
        `priority` varchar(10) DEFAULT NULL,
        `sys_date` datetime DEFAULT NULL,
        `message` text,
        `status` tinyint(4) NOT NULL DEFAULT '0', 
        `alert` smallint(3) unsigned NOT NULL DEFAULT '0',
        PRIMARY KEY (`id`,`sys_date` ),
        KEY `facility` (`facility`),
        KEY `priority` (`priority`),
        KEY `sourceip` (`sourceip`),
        KEY `status` (`status`),
        KEY `alert` (`alert`),
        KEY `status_date` (`status`,`sys_date`),
        KEY `sys_date` (`sys_date`)
    ) ENGINE=MyISAM 
    DEFAULT CHARSET=latin1
    COMMENT='camm plugin SYSLOG Data' 
    PARTITION BY RANGE ( dayofyear(sys_date)) (
        PARTITION syslog_day0 VALUES LESS THAN (0) ENGINE = MyISAM,
        PARTITION syslog_day14 VALUES LESS THAN (14) ENGINE = MyISAM,
        PARTITION syslog_day28 VALUES LESS THAN (28) ENGINE = MyISAM,
        PARTITION syslog_day42 VALUES LESS THAN (42) ENGINE = MyISAM,
        PARTITION syslog_day56 VALUES LESS THAN (56) ENGINE = MyISAM,
        PARTITION syslog_day70 VALUES LESS THAN (70) ENGINE = MyISAM, 
        PARTITION syslog_day84 VALUES LESS THAN (84) ENGINE = MyISAM, 
        PARTITION syslog_day98 VALUES LESS THAN (98) ENGINE = MyISAM, 
        PARTITION syslog_day112 VALUES LESS THAN (112) ENGINE = MyISAM, 
        PARTITION syslog_day126 VALUES LESS THAN (126) ENGINE = MyISAM, 
        PARTITION syslog_day140 VALUES LESS THAN (140) ENGINE = MyISAM, 
        PARTITION syslog_day154 VALUES LESS THAN (154) ENGINE = MyISAM, 
        PARTITION syslog_day168 VALUES LESS THAN (168) ENGINE = MyISAM, 
        PARTITION syslog_day182 VALUES LESS THAN (182) ENGINE = MyISAM, 
        PARTITION syslog_day196 VALUES LESS THAN (196) ENGINE = MyISAM, 
        PARTITION syslog_day210 VALUES LESS THAN (210) ENGINE = MyISAM, 
        PARTITION syslog_day224 VALUES LESS THAN (224) ENGINE = MyISAM, 
        PARTITION syslog_day238 VALUES LESS THAN (238) ENGINE = MyISAM, 
        PARTITION syslog_day252 VALUES LESS THAN (252) ENGINE = MyISAM, 
        PARTITION syslog_day266 VALUES LESS THAN (266) ENGINE = MyISAM, 
        PARTITION syslog_day280 VALUES LESS THAN (280) ENGINE = MyISAM, 
        PARTITION syslog_day294 VALUES LESS THAN (294) ENGINE = MyISAM, 
        PARTITION syslog_day308 VALUES LESS THAN (308) ENGINE = MyISAM, 
        PARTITION syslog_day322 VALUES LESS THAN (322) ENGINE = MyISAM, 
        PARTITION syslog_day336 VALUES LESS THAN (336) ENGINE = MyISAM, 
        PARTITION syslog_day350 VALUES LESS THAN (350) ENGINE = MyISAM, 
        PARTITION syslog_day364 VALUES LESS THAN (364) ENGINE = MyISAM, 
        PARTITION syslog_day369 VALUES LESS THAN (369) ENGINE = MyISAM
    )
";

if (mysql_query($result)) {
    echo "success in plugin-camm table creation.\n";
}
else {
    echo "no table created.\n";
}

if ( mysql_query($result)) {
    echo "success in table creation.\n";
} else {
    echo "no table created.\n";
}

mysql_close($link);

$link = mysql_connect("localhost", "cacxt", "cacxt");
if (!$link) {
    die("Could not connect: " . mysql_error());
}
echo "Connected successfully\n";

$db_selected = mysql_select_db("cacti", $link);
if (!$db_selected) {
    die ("Can\"t use cacti : " . mysql_error());
}

$result=mysql_query("TRUNCATE TABLE `plugin_camm_tree2`");
$result=mysql_query("TRUNCATE TABLE `plugin_camm_temp`");
$result=mysql_query("TRUNCATE TABLE `plugin_camm_keys`");
$result=mysql_query("UPDATE `plugin_camm_rule` SET `actual_triggered` = '0';");
mysql_close($link);
?> 
```

问题是服务器无法再处理这么多的数据，并且每个月大约有 20 天服务器面临性能问题。我不是 MySQL 忍者，但试图了解发生了什么，似乎索引填充太大 [服务器可以处理的更大]

看：

```
:/var/lib/mysql/syslog# ls -lh | grep G total 21G
-rw-rw---- 1 mysql mysql 2,8G 2012-12-15 00:50 plugin_camm_syslog_MonthDec#P#syslog_day350.MYD
-rw-rw---- 1 mysql mysql 1,5G 2013-01-31 14:12 plugin_camm_syslog_MonthDec#P#syslog_day350.MYI
-rw-rw---- 1 mysql mysql 1,6G 2012-12-29 00:46 plugin_camm_syslog_MonthDec#P#syslog_day364.MYD
-rw-rw---- 1 mysql mysql 2,0G 2013-01-14 00:46 plugin_camm_syslog_MonthJan#P#syslog_day14.MYD
-rw-rw---- 1 mysql mysql 1,1G 2013-01-28 08:01 plugin_camm_syslog_MonthJan#P#syslog_day14.MYI
-rw-rw---- 1 mysql mysql 2,1G 2013-01-28 05:41 plugin_camm_syslog_MonthJan#P#syslog_day28.MYD
-rw-rw---- 1 mysql mysql 1,1G 2013-01-28 08:01 plugin_camm_syslog_MonthJan#P#syslog_day28.MYI
-rw-rw---- 1 mysql mysql 1,7G 2013-02-11 00:46 plugin_camm_syslog#P#syslog_day42.MYD
-rw-rw---- 1 mysql mysql 1,7G 2013-02-21 07:29 plugin_camm_syslog#P#syslog_day56.MYD 
```

今天我需要运行脚本来轮换系统日志，我的问题是它会保留我 1 月 / 2 月的数据吗？

或者有人可以建议如何减少索引使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:40:11.930

也不是 mysql 忍者，但您的代码为我提出了一些标志：

*   您使用所有这些索引的频率如何，您可以减少索引的数量吗？

    *   sourceip、facility 和priority 可以放在一个单独的表中，并且只将ids 存储在plugin_camm_syslog 表中吗？（我相信这会节省很多空间）

    *   [使用如何在 MySQL 中处理大表](https://stackoverflow.com/questions/2899161/how-to-handle-large-table-in-mysql)的建议 怎么样？, 将数据拆分到多个表中，例如每日表

关于操作的日志记录请看这里：[https ://serverfault.com/questions/71071/how-to-enable-mysql-logging](https://serverfault.com/questions/71071/how-to-enable-mysql-logging)

# ios - 获取并组合属于特定实体的两个属性

> ID：14998378
> 
> 赞同：1
> 
> 时间：2013-02-21T09:13:23.313
> 
> 标签：ios, objective-c, core-data, nsmanagedobject

我有一个`User`实体。它有许多属性，例如`firstName`和`lastName`。我必须获取用户的全名 ( `firstName`+ `lastName`)。我需要它作为一个单一的`NSString`.

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:39:56.027

恕我直言，最干净的方法如下。

创建一个`User`类，它的子类`NSManagedObject`。

在您的实体中创建`fullName`属性（类型）作为**瞬态**（它不会存储在磁盘上）。`NSString`

 **然后覆盖`awakeFromFetch`方法以将其设置`fullName`为的串联，`firstName`如下`lastName`所示：

```
self.fullName = [NSString stringWithFormat:@"%@ %@",
                            self.firstName, self.lastName]; 
```

这里是[核心数据文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdManagedObjects.html)的链接。特别是，看看*对象生命周期——初始化和释放*。

希望有帮助。**

# css - 如何在 CSS 中更改我的下拉列表的设计

> ID：14998381
> 
> 赞同：2
> 
> 时间：2013-02-21T09:13:37.973
> 
> 标签：css, yii

是否可以在 CSS 中更改组合框的设计？

我改变了组合的设计，但是当我在下拉列表中单击它时，滚动条很丑，我可以以某种方式改变他吗？我不使用 JavaScript，只使用 CSS。

这是我的 CSS 和 HTML：

```
.dropDownList {
    background: white;
    width: 300px;
    line-height: 1;
    border: 1px;
    border-color: whitesmoke;
    border-radius: 4px;
    -webkit-appearance: none;
    background: url(arrow1.png) no-repeat right #fff;
    border-style: outset;
    padding: 2px 0;
}

<select onchange="document.location.href = &quot;/pepa/index.php?r=WppActs/create&amp;idp=1830&amp;ida=1&amp;idg=11&amp;idpod=-1&amp;result=arhiva&amp;idgod=&quot;+this.value+&quot;&amp;idbroja=-1&amp;idar=-1&amp;idgr=-1&amp;idvs=-1&amp;ids=-1&amp;idpo=-1&amp;idpm=-1&amp;idakta=-1&quot;" class="dropDownList" name="ID" id="ID">
    <option value="">Година</option>
    <option value="97">1945</option>
    <option value="163">1946</option>
    <option value="224">1947</option>
    <option value="283">1948</option>
    <option value="339">1949</option>
    <option value="375">1950</option>
    <option value="414">1951</option>
    <option value="452">1952</option>
    <option value="499">1953</option>
    <option value="565">1954</option>
    <option value="9974">1955</option>
    <!-- lots more options -->
</select> 
```

用于生成列表的 PHP 是：

```
<?php
    $m = OgNumbers::model()->getYear();
    $list = CHtml::listData($m, 'ID', 'og_year');
    $select = $idGodine;

    echo CHtml::dropDownList('ID', $select, $list, array('empty' => 'Година','onchange' => 'document.location.href = "/pepa/index.php?r=WppActs/create&idp='.$idPaketa.'&ida='.$idOblast.'&idg='.$idG‌​rupa.'&idpod='.$idPodgrupe.'&result='.$result.'&idgod="+this.value+"&idbroja='.$i‌​dBroja.'&idar='.$idaRegistra.'&idgr='.$idgRegistra.'&idvs='.$idVrstaSuda.'&ids='.‌​$idSuda'"','class'=>'dropDownList','size'=>5));
<?php> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:20:47.770

您可以使用 ajax [DropDown](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/DropDown/DropDown.aspx)或[ComboBox](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx)控件。它支持你可以修改的css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:21:30.583

由于看起来您的目标是 Webkit 浏览器，因此有一些伪类可用于自定义滚动条 - 请参阅[http://css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/)以获得一个很好的示例。

伪类是：

```
::-webkit-scrollbar
::-webkit-scrollbar-button
::-webkit-scrollbar-track
::-webkit-scrollbar-track-piece
::-webkit-scrollbar-thumb
::-webkit-scrollbar-corner
::-webkit-resizer 
```

一个非常简单的样式可能是[**这样的演示**](http://jsfiddle.net/umjmW/)，使用以下伪类：

```
::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background-color:lightblue;
}

::-webkit-scrollbar-thumb {
    background-color:blue;
} 
```

**编辑：**使用容器的更新[**演示**](http://jsfiddle.net/umjmW/1/)`<ul>`（代码现在从答案中删除，因为事实证明容器是`<select>`- 请参阅编辑的问题）。

# c++ - protobuf 生成的文件中缺少函数

> ID：14998385
> 
> 赞同：1
> 
> 时间：2013-02-21T09:13:52.953
> 
> 标签：c++, protocol-buffers

我编译了以下文件 lsp.proto

```
message LSPMessage
{
required uint32 connid=1; // Connection ID
required uint32 seqnum=2; // Sequence Num
required bytes payload=3; // Payload
} 
```

在另一个文件中，我包含了 lsp.pb.h。但是，当我编译时，它说 LSPMESSAGE_ *INIT 未声明，无法找到 lspmessage* _pack()。这些函数也不在生成的文件中。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:02:55.120

正在使用带有 C++ API 的 protobuf-c 编译器。

# sms - 级联 SMS PDU 的问题

> ID：14998386
> 
> 赞同：3
> 
> 时间：2013-02-21T09:13:54.940
> 
> 标签：sms, gsm, pdu

我正在使用 SMS 和 PDU 并创建连接消息以使用 GSM 调制解调器 (Cinterion MC35i) 发送，但是当我发送连接消息时，它永远不会出现在另一端。这是与调制解调器的通讯记录：

```
at
OK
at+cmgf=0
OK
at+cmgs=153
> 0041B60A9174742906290000A1050003B60201A8E8F41CD42ECFE7E17319949E83CAF8F098CECE8362B618688C0ECBC3637A593E07B1DFEEB30B04A2A2CBA0783D3D5E83C4F2F7DD0D32BFF12075BD0D9F83DEF6B21C44479741ECB03E0F22BFCF2E10E8890691CB6139E88E0ED341E3B01B44479741ED309D5E9683C46517282C1E93CBE6333AAD5EB3DBEE373C2E9FD3EBF63B3EAF8FC96634
+CMGS: 108

OK
at+cmgs=25
> 0041B60A91747429062900000E050003B602026AB61B2E070B01
+CMGS: 109

OK 
```

我已经使用此[SMS PDU Decoder](http://www.diafaan.com/sms-tutorials/gsm-modem-tutorial/online-sms-pdu-decoder/)验证了 PDU ，但消息从未到达。我也试过发送到另一部手机，同样的结果。如果我发送正常消息（即非级联 PDU 消息），则可以正常接收消息。测试的手机包括 HTC Desire Z 和 iPhone 4。

有人知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:48:18.760

TP-DA 似乎不正确。你要删除 + 吗？

将 0A917474290629 替换为 0A817474290629 并再次检查。

# svn - SVN：依赖于平台的外部，有可能吗？

> ID：14998387
> 
> 赞同：0
> 
> 时间：2013-02-21T09:13:55.107
> 
> 标签：svn

我有一些我想在 Windows 和 Linux 平台上构建的代码。构建工具也在 SVN 中，并使用外部链接到主存储库。

目前的结构是：

```
Top -+- Tools -+- Linux (external)
     |         |
     |         +- Windows (external)
     |
     +- Other Directories 
```

我可以设置在两个平台上检查 Windows 和 Linux 工具的系统，但是我更愿意只在 Linux 上检查 Linux 工具，而只在 Windows 上检查 Windows 工具。理想情况下，我会有一个外部（称为工具），其中 Linux 工具将在 Linux 上检查，Windows 工具在 Windows 上检查，只是为了保持两个平台上的开发环境相同。

```
Top -+- Tools (external, pointing to Linux or Windows repo)
     |
     +- Other Directories 
```

这可能吗？我试图找到解决方案，但我的印象是不可能的，这是正确的吗？

问候，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:27:31.097

我怀疑 SVN 有这个选项，但你可以用你的 HTTP 服务器来模拟它。

假设您的存储库的结构是

```
Top -+- Linux
     |
     +- Windows 
```

然后，您可以使用 Apache 中的 Redirect 指令将对 Top->Tools 的访问重定向到两者中的任何一个，具体取决于 HTTP 请求来自的操作系统。

最好的，圭多

# ruby-on-rails - 如何测试 mongoid 范围？

> ID：14998388
> 
> 赞同：0
> 
> 时间：2013-02-21T09:13:59.573
> 
> 标签：ruby-on-rails, rspec, mongoid

我用范围定义了以下用户类：

```
class User
  include Mongoid::Document
  include Mongoid::Timestamps
  include Mongoid::Search

  # SCOPES
  scope :all_admins, where( role: :admin)
  scope :recents, order_by(created_at: :desc)
  scope :olders, order_by(created_at: :asc)

  field :role, type: Symbol
end 
```

如果我使用以下 rspec 测试：

```
describe 'scopes' do
  let(:admin1)            { Fabricate(:admin) }
  let(:admin2)               { Fabricate(:admin) }

  describe 'recents' do
    it 'should return the admins from most recent to older' do
      User.all_admins.recents.should eq([admin1, admin2])
    end
  end
end 
```

我收到以下失败消息：

```
got: #<Mongoid::Criteria
  selector: {"role"=>:admin},
  options:  {:sort=>{"created_at"=>-1}},
  class:    User,
  embedded: false> 
```

那么我该如何测试这个范围呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:21:11.763

Mongoid 延迟加载，执行：

```
User.all_admins.recents.to_a.should eq([admin1, admin2]) 
```

旁注：

*   你应该将你的作用域创建为 lambdas，它很快就会成为 Rails4 的规范

*   我在 mongo 中遇到了符号类型的问题（在迁移期间），我宁愿使用字符串

*   我很确定您的测试将失败，因为您的对象不是在 db 中创建的（在`let`调用它之前不会评估，替换为`let!`）

# python - 如何将变量传递给Python中的输入请求？

> ID：14998391
> 
> 赞同：0
> 
> 时间：2013-02-21T09:14:18.820
> 
> 标签：python

我是 Python 新手，也是编程新手。
谁能告诉我如何正确编码以下内容？

```
name=raw_input("What is your name?  ")
age=raw_input(" How old are you",name) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:16:20.767

```
name = raw_input('What is your name? ')
age = raw_input('How old are you, %s? ' % name) 
```

或者：

```
name = raw_input('What is your name? ')
age = raw_input('How old are you, {}? '.format(name)) 
```

该`raw_input`函数不能接收超过 1 个参数。我们可以通过使用字符串格式化来克服这个问题（有关不同类型格式化的信息，请参见[此处](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)和[此处](http://docs.python.org/2/library/stdtypes.html#str.format)）。

此外，根据您想要执行的操作，您可能还希望转换`age`为整数。我们做得到：

```
age = int(age) 
```

但如果用户输入了其他内容，比如`'foobar'`，那么你会得到一个错误。您可以使用`try/except`块绕过它，并使用`while`循环，这样您就可以循环直到获得有效数字。

```
name = raw_input('What is your name? ')
while True:
    age = raw_input('How old are you, {}? '.format(name))
    try:
        age = int(age)
        break
    except ValueError:
        print 'You entered an invalid age. Please try again.' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:22:20.247

始终使用类型转换。无论如何，下面的代码应该做到这一点：

```
name = str(raw_input('Enter your name:'))

string1 = 'Enter your age,' + name + ':'

age = int(raw_input(string1)) 
```

正如你所看到的，我已经将我想要提示的任何内容存储到一个名为 string1 的字符串中，然后我将它用作 raw_input 的参数。

raw_input 只接受一个参数。所以，你可以这样做。

我为此使用了python 2.7。如果您正在使用

# c# - 合并两个字典的值

> ID：14998394
> 
> 赞同：0
> 
> 时间：2013-02-21T09:14:39.990
> 
> 标签：c#, dictionary

希望我可以征求意见。

我有两本词典

```
Dictionary<string, List<string>> dict = new Dictionary<string, List<string>>();
Dictionary<string, List<string>> dictFinal = new Dictionary<string, List<string>>(); 
```

在这两种情况下，键值都是相同的，但都表示不同的字符串值列表。

![在此处输入图像描述](../Images/f6ae24ae40c00881155b03385407ea26.png)

我想要的是拥有一个具有相同键值的字典，并且将字符串值列表合并到一个字典中

![在此处输入图像描述](../Images/6f6501bd1710afa8acdf59dd5239c2ea.png)

我确实从一个严重的循环开始，但很快意识到这可能不是最好的解决方案

```
foreach (var fin in dictFinal)
            {
                foreach (var valFin in fin.Value)
                {
                    foreach (var kvp in dict)
                    {
                        foreach (var v in kvp.Value)
                        {

                        }
                    }

                }

            } 
```

有没有更好的方法将这两个字典“放在一起”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:21:02.193

```
Dictionary<string, List<string>> d1 = new Dictionary<string, List<string>>();
Dictionary<string, List<string>> d2 = new Dictionary<string, List<string>>();
d2.ToList().ForEach(x =>
                         {
                           if (d1.ContainsKey(x.Key))
                             d1[x.Key].AddRange(x.Value);
                           else
                             d1.Add(x.Key, x.Value);
                         }); 
```

这会将两个字典合并到`d1`.

没有`ToList()`

```
foreach(var x in d1)
{
  if (d1.ContainsKey(x.Key))
    d1[x.Key].AddRange(x.Value);
  else
    d1.Add(x.Key, x.Value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:31:04.090

我会使用循环。假设合并意味着列表应该包含唯一的字符串：

```
foreach (var kvp in dict)
{
    List<string> listInDict2;
    if (dictFinal.TryGetValue(kvp.Key, out listInDict2))
        dictFinal[kvp.Key] = kvp.Value.Union(listInDict2).ToList();
    else
        dictFinal.Add(kvp.Key, kvp.Value);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T09:31:13.030

你可以试试

UNION 或 JOIN 方法来合并结果

dictFinal.union 或 dictFinal.join

# python - 如何在 Python 中用一个正则表达式解析这个字符串

> ID：14998399
> 
> 赞同：1
> 
> 时间：2013-02-21T09:15:03.783
> 
> 标签：python, regex

我需要解析这个字符串，在 Python 中只有一个正则表达式。对于每个组，我需要将值保存在特定字段中。**问题是一个或多个参数可能丢失或顺序不同。**（即`domain 66666 ip nonce`，缺少中间部分）

`3249dsf 2013-02-10T06:44:30.666821+00:00 domain constant 66666 sync:[127.0.0.1] Request: pubvalue=kjiduensofksidoposiw&change=09872534&value2=jdmcnhj&counter=232&value3=2&nonce=7896089hujoiuhiuh098h`

我需要分配：

*   `time=2013-02-10T06:45:30.666821+00:00`（常量格式）
*   `domain=domain`（细绳）
*   `code=66666`（整数）
*   `ip=127.0.0.1`（细绳）
*   `pubvalue=kjiduensofksidoposiw`（固定长度的字符串）
*   `nonce=7896089hujoiuhiuh098h`（细绳）

**编辑**

这是字符串如何变化的示例： *123dsf 2014-01-11T06:49:30.666821+00:00 google constant 12356 sync:[192.168.0.1] Request: pubvalue=fggggggeesidoposiw&nonce=7896089hujoiuhiuh098h*

提前谢谢你给我指路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:32:07.943

使用一个正则表达式来解析整个字符串可能不是一个好主意。但我认为解决方案是使用`named groups`（请参阅：[Regex Tutorial 上的命名组](http://www.regular-expressions.info/named.html)。 `Named groups`可以通过以下方式捕获`(?P<nameofgroup>bla)`

因此，您可以将例如 ip 与：

```
import re
str = "3249dsf 2013-02-10T06:44:30.666821+00:00 domain constant 66666 sync:[127.0.0.1] Request: pubvalue=kjiduensofksidoposiw&change=09872534&value2=jdmcnhj&counter=232&value3=2&nonce=7896089hujoiuhiuh098h"
print re.search("\[(?P<ip>\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\]", str).groupdict() 
```

只需使用匹配其他内容所需的模式扩展此正则表达式即可。

并且您可以通过`?`在组的括号后面放置 a 来使组成为可选的，例如：`(?P<ip>pattern)?`。如果无法匹配模式，则 dict 中的元素将为`None`.

**但请注意：**仅在**一个**Regex中执行此操作**并不是**一个好主意。它会很慢（因为回溯和其他东西）并且正则表达式会很长而且维护起来很复杂！

# image - 使用带有 OpenGL 的 SOIL 显示图像

> ID：14998400
> 
> 赞同：2
> 
> 时间：2013-02-21T09:15:12.593
> 
> 标签：image, opengl, textures, soil

我有一个应该显示图像但图像永远不会出现的以下代码。

```
GLuint tex_2d = SOIL_load_OGL_texture (
    "ImageName.tga",
    SOIL_LOAD_AUTO,
    SOIL_CREATE_NEW_ID,
    SOIL_FLAG_MIPMAPS | SOIL_FLAG_INVERT_Y | SOIL_FLAG_NTSC_SAFE_RGB | SOIL_FLAG_COMPRESS_TO_DXT
);
glColor3f(0.0f,1.0f,.50f);
glBindTexture(GL_TEXTURE_2D, tex_2d);
glEnable(GL_TEXTURE_2D);
glBegin(GL_QUADS);
    glTexCoord2d(0,0);        glVertex3f(factor*BOARD_BREADTH/2,-factor*BOARD_LENGTH/2,0);
    glTexCoord2d(0,1);        glVertex3f(factor*BOARD_BREADTH/2,factor*BOARD_LENGTH/2,0);
    glTexCoord2d(1,1);        glVertex3f(-factor*BOARD_BREADTH/2,factor*BOARD_LENGTH/2,0);
    glTexCoord2d(1,0);        glVertex3f(-factor*BOARD_BREADTH/2,-factor*BOARD_LENGTH/2,0);

glEnd(); 
```

但我只得到一个绿色矩形作为输出。没有编译错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:04:39.403

`SOIL_load_OGL_texture`如果加载成功，则返回正确的 OpenGL 纹理标识符，如果加载`0`失败。你应该经常检查！

在您的情况下，如果错误的路径导致问题，请使用相对路径。这是示例文件夹结构：

```
root/
--- data/
-------- music/
-------- images/
------------ texture.tga
--- bin/
-------- debug/
------------ program.exe 
```

在这种情况下，相对路径将是`"../../data/images/texture.tga"`. 注意我们如何上升两次（通过`..`，到达`root/`，然后进入`data/images/`。

`root/`这样，如果您保留文件夹结构，则驻留在磁盘上的位置无关紧要。

# iphone - 使用 -openWithBehavior:completionHandler 获取 iOS 版 Facebook 应用的发布权限：

> ID：14998402
> 
> 赞同：2
> 
> 时间：2013-02-21T09:15:26.200
> 
> 标签：iphone, ios, facebook, facebook-graph-api, facebook-fql

在我的应用程序中，我需要用户登录 Facebook，在我的表格视图中获取朋友列表并在提要上发布，但我不想将用户重定向到任何地方。所以我使用了 -openWithBehavior:completionHandler: ... 这是我的代码。

```
-(IBAction)loginAction:(id)sender {
[self deleteCookies];
// get the app delegate so that we can access the session property
DLAppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];

// this button's job is to flip-flop the session from open to closed
if (appDelegate.session.isOpen) {
    // if a user logs out explicitly, we delete any cached token information, and next
    // time they run the applicaiton they will be presented with log in UX again; most
    // users will simply close the app or switch away, without logging out; this will
    // cause the implicit cached-token login to occur on next launch of the application
    [appDelegate.session closeAndClearTokenInformation];

} else {
    if (appDelegate.session.state != FBSessionStateCreated) {
        // Create a new, logged out session.
        appDelegate.session = [[FBSession alloc] init];
        [self updateView];
    }

    // if the session isn't open, let's open it now and present the login UX to the user
    [appDelegate.session openWithBehavior:FBSessionLoginBehaviorForcingWebView completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        switch (status) {
            case FBSessionStateOpen:
                // call the legacy session delegate
                //Now the session is open do corresponding UI changes
            {
                FBCacheDescriptor *cacheDescriptor = [FBFriendPickerViewController cacheDescriptor];
                [cacheDescriptor prefetchAndCacheForSession:session];
                [FBSession openActiveSessionWithAllowLoginUI:NO];
                [FBSession openActiveSessionWithPublishPermissions:[NSArray arrayWithObjects:@"publish_stream",@"publish_actions", nil] defaultAudience:FBSessionDefaultAudienceFriends allowLoginUI:NO completionHandler:nil];
            }
                break;
            case FBSessionStateClosedLoginFailed:
            { // prefer to keep decls near to their use                    
                // unpack the error code and reason in order to compute cancel bool
                // call the legacy session delegate if needed
                //[[delegate facebook] fbDialogNotLogin:userDidCancel];
            }
                break;
                // presently extension, log-out and invalidation are being implemented in the Facebook class
            default:
                break; // so we do nothing in response to those state transitions
        }
        [self updateView];
    }];
}
} 
```

用户已成功登录，我可以使用 FQL 检索好友列表。问题是在发布到提要时。我知道我需要获得发布权限才能做到这一点。但是当我使用以下代码发布...

```
- (IBAction)postAction:(id)sender {
DLAppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];
if (appDelegate.session.isOpen) {
    [FBSession openActiveSessionWithAllowLoginUI:NO];
    NSMutableDictionary *postParams = [[NSMutableDictionary alloc] initWithObjectsAndKeys:
                                       @"https://developers.facebook.com/ios", @"link",
                                       @"https://developers.facebook.com/attachment/iossdk_logo.png", @"picture",
                                       @"Facebook SDK for iOS", @"name",
                                       @"Build great social apps and get more installs.", @"caption",
                                       @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
                                       nil];
    if ([_postText.text length]>0) {
        [postParams setObject:[_postText text] forKey:@"message"];
    }
    if (([FBSession.activeSession.permissions
          indexOfObject:@"publish_actions"] == NSNotFound) ||
        ([FBSession.activeSession.permissions
          indexOfObject:@"publish_stream"] == NSNotFound)) {

        // No permissions found in session, ask for it
        [FBSession.activeSession
         reauthorizeWithPublishPermissions:
         [NSArray arrayWithObjects:@"publish_stream",@"publish_actions",nil]
         defaultAudience:FBSessionDefaultAudienceFriends
         completionHandler:^(FBSession *session, NSError *error) {
             if (!error) {
                 // If permissions granted, publish the story
                 [self publishStory:postParams];
             }
         }];
    } else {
        // If permissions present, publish the story
        [self publishStory:postParams];
    }
}    
}

-(void)publishStory:(NSDictionary *)postParams {
[FBRequestConnection startWithGraphPath:
                             @"me/feed" parameters:postParams HTTPMethod:@"POST"
                      completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
 {
     if (!error) {
         //Tell the user that it worked.
         UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Shared:"
                                                             message:[NSString stringWithFormat:@"Sucessfully posted to your wall."]
                                                            delegate:self
                                                   cancelButtonTitle:@"OK"
                                                   otherButtonTitles:nil];
         alertView.tag = 101;
         [alertView show];
     }
     else {
         UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error:"
                                                             message:error.localizedDescription
                                                            delegate:nil
                                                   cancelButtonTitle:@"OK"
                                                   otherButtonTitles:nil];
         [alertView show];
         NSLog(@"%@",error);
     }
 }
 ];    
} 
```

此代码将用户重定向到 Safari 或 Facebook 应用程序。这是我不想发生的。

当然我需要在登录时获得发布权限。问题是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T14:34:53.590

You have to set FBSessionLoginBehavior, to change it the only way is to use:

```
[session openWithBehavior:FBSessionLoginBehaviorWithNoFallbackToWebView
    completionHandler:^(FBSession *session,
                        FBSessionState status,
                        NSError *error) {
        // Respond to session state changes, 
        // ex: updating the view
    }]; 
```

I see you use `FBSessionLoginBehaviorForcingWebView`, so to get what you want you have to choose from this enum:

```
typedef enum {
/*! Attempt Facebook Login, ask user for credentials if necessary */
FBSessionLoginBehaviorWithFallbackToWebView      = 0,
/*! Attempt Facebook Login, no direct request for credentials will be made */
FBSessionLoginBehaviorWithNoFallbackToWebView    = 1,
/*! Only attempt WebView Login; ask user for credentials */
FBSessionLoginBehaviorForcingWebView             = 2,
/*! Attempt Facebook Login, prefering system account and falling back to fast app switch if necessary */
FBSessionLoginBehaviorUseSystemAccountIfPresent  = 3,
} FBSessionLoginBehavior; 
```

Now to solve this "Definitely I need to get publish permissions while logging in. the question is HOW?" you may `- (id)initWithPermissions:(NSArray*)permissions;` your `Session` :

```
NSArray *permissions = @[@"publish_stream", @"publish_actions"];
appDelegate.session = [[FBSession alloc] initWithPermissions:permissions]; 
```

# uml - 活动节点与合并节点的许多输入

> ID：14998408
> 
> 赞同：3
> 
> 时间：2013-02-21T09:15:46.187
> 
> 标签：uml, modeling

将 n 个活动加入一个活动与将 n 个活动加入合并节点然后将合并节点加入一个活动有什么区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:56:44.020

据我了解UML规范：

> 合并节点是汇集多个备用流的控制节点。它不用于同步并发流，而是接受多个备用流中的一个。传入边缘上提供的所有令牌都提供给传出边缘。没有流同步或令牌加入。

另一方面，

> ...一个动作只有在所有传入控制流上都提供了控制令牌并且其所有输入引脚都提供了足以满足其多重性的对象令牌时才能开始执行。该动作通过接受输入引脚多重性允许的所有控制和对象令牌的提议开始执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-02T03:43:30.463

**合并节点** [![在此处输入图像描述](../Images/952c44ee0f75af2be1595530d6b92416.png)](https://i.stack.imgur.com/EDxI4.png)

这将多个交替流结合在一起。
如果合并符号接收到两个或更多流入，则执行流出。

**加入节点** [![在此处输入图像描述](../Images/af61f310026945dfebc16b6b6654b249.png)](https://i.stack.imgur.com/FqHsu.png)

这会同步两个或更多流入并产生单个流。
在收到所有流入之前，无法执行来自连接的流出。

# c# - 在多页上打印一封信

> ID：14998411
> 
> 赞同：2
> 
> 时间：2013-02-21T09:15:57.807
> 
> 标签：c#, silverlight, printing, silverlight-4.0

我有一个打印按钮，必须打印两个文件： -此人写的一封信 其次，在第二次打印中，我必须处理可能是多页的信件。我怎样才能做到这一点？

这封信在我的页面上的文本框中。

这是我的代码：

```
void btPrint_Click(object sender, RoutedEventArgs e)
        {

            if (itmCandidatSelect.LettreMotiv != null || itmCandidatSelect.LettreMotiv != "")
            {
                _lineIndex = 0;
                _documentBodyLines = new List<string>();
                string[] lines = tbLettreMotiv.Text.Split(new char[] { '\r' }, StringSplitOptions.None);
                _documentBodyLines.AddRange(lines);

                PrintDocument maLettreMotiv = new PrintDocument();
                //maLettreMotiv.BeginPrint += new EventHandler<BeginPrintEventArgs>(maLettreMotiv_BeginPrint);
                //maLettreMotiv.EndPrint += new EventHandler<EndPrintEventArgs>(maLettreMotiv_EndPrint);
                maLettreMotiv.PrintPage += new EventHandler<PrintPageEventArgs>(maLettreMotiv_PrintPage);

                maLettreMotiv.Print("LettreMotivation_" + itmCandidatSelect.NomCandidat + "_" + itmCandidatSelect.PrenomCandidat);

            } 
```

}

```
 int _lineIndex;
        List<string> _documentBodyLines;

void maLettreMotiv_PrintPage(object sender, PrintPageEventArgs e)
        {
            PrintLettreMotivTemplate page = new PrintLettreMotivTemplate();
            page.SetHeaderAndFooterText("Lettre de motivation", "");
            int numberOfLinesAdded = 0;
            while (_lineIndex < _documentBodyLines.Count)
            {
                page.AddLine(_documentBodyLines[_lineIndex]);
                page.Measure(new Size(e.PrintableArea.Width, double.PositiveInfinity));
                if (page.DesiredSize.Height > e.PrintableArea.Height && numberOfLinesAdded > 1)
                {
                    page.RemoveLastLine();
                    e.HasMorePages = true;
                    break;
                }
                _lineIndex++;
                numberOfLinesAdded++;

            }
             e.PageVisual = page;
        } 
```

我的模板：

```
<UserControl x:Class="erecrutement_procclass.Views.PrintLettreMotivTemplate"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             Width="815" 
             Height="1024"
             mc:Ignorable="d"    
             d:DesignHeight="300" 
             d:DesignWidth="400">
<Grid x:Name="documentRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="25"/>
        <RowDefinition />
        <RowDefinition Height="25"/>
    </Grid.RowDefinitions>
    <TextBlock x:Name="headerTextBlock" HorizontalAlignment="Center" />
    <TextBlock x:Name="bodyTextBlock" Grid.Row="1" TextWrapping="Wrap" Margin="5,5,5,5"/>
    <TextBlock x:Name="footerTextBlock" HorizontalAlignment="Center" Grid.Row="2"/>
</Grid>

 public partial class PrintLettreMotivTemplate : UserControl
    {
        public PrintLettreMotivTemplate()
        {
            InitializeComponent();
        }

        public void SetHeaderAndFooterText(string header, string footer)
        {
            headerTextBlock.Text = header;
            footerTextBlock.Text = footer;
        }

        public void AddLine(string line)
        {
            bodyTextBlock.Inlines.Add(line);
            bodyTextBlock.Inlines.Add(new LineBreak());
        }

        public void RemoveLastLine()
        {
            for (int index = 0; index < 2; index++)
            {
                bodyTextBlock.Inlines.RemoveAt(bodyTextBlock.Inlines.Count - 1);
            }
        }
    } 
```

但是，当它应该翻过一页时，它停了下来，我只有一页，并且缺少了一封信。

我怎样才能解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:26:02.807

原因是这样的。在 PrintLettreMotivTemplate.xaml

```
<UserControl x:Class="DelmePrint.PrintLettreMotivTemplate"
             Width="815" 
             Height="1024"
             >
    <Grid x:Name="documentRoot">
        ...
    </Grid>
</UserControl> 
```

您已将可打印区域的高度设置为 1024。当我单步执行代码时，

```
/* DesiredSize always (793, 1024)
   PrintableArea always (793, 1122) */
if (page.DesiredSize.Height > e.PrintableArea.Height) 
```

所以代码不断在页面的中间部分添加行。

要解决此问题，您需要将 PrintLettreMotivTemplate 中的 Height 更改为 MinHeight。这样，当行数过多时，字母就会溢出。

```
<UserControl x:Class="DelmePrint.PrintLettreMotivTemplate"
             Width="815" 
             MinHeight="1024"
             >
    <Grid x:Name="documentRoot">
        ...
    </Grid>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T12:29:22.433

尝试以下属性；

```
maLettreMotiv.PrintPage += (s, args) =>
            {
                Candidat monCandidat = this.itmCandidatSelect;

                PrintLettreMotivTemplate monTemplatePrint = PrintableAreaLettreMotiv.printTemplateLettreMotiv(monCandidat);
                monTemplatePrint.Width = args.PrintableArea.Width;
                monTemplatePrint.Height = args.PrintableArea.Height;
                args.HasMorePages = true;
                args.PageVisual = monTemplatePrint;
            }; 
```

# c++ - 调试窗口立即关闭

> ID：14998413
> 
> 赞同：2
> 
> 时间：2013-02-21T09:16:03.247
> 
> 标签：c++, visual-c++

当我尝试调试我的小程序时，它会立即关闭。这是我正在使用的代码。

```
#include <iostream>

using namespace std;

int main()
{
    int gt1, gt2;
    cout << "Hello World!" << endl;
    return 0;
} 
```

仅 0.5 秒，一个黑框出现并关闭。

我能做些什么来防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:25:46.180

在您的代码中设置一个断点，以便您可以对其进行调试。只需单击源左侧的栏。

![断点](../Images/5f28d9727a09d7fb6218fa36016fb2eb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:27:15.350

您的函数完成并将控制权返回给调试器。这就是你看到屏幕关闭的原因。这种行为（调试）与从 Visual 运行程序不同（最后会看到“按任意键...”行。

出于调试目的，您可以在“return”之前添加以下两行：

```
char ch;
cin.get(&ch); 
```

这将等待在终止之前按下任何键。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T09:22:26.060

添加`cin.get();`到代码末尾之前`return 0`。

# javascript - 如何在 ios 中停止自动化测试

> ID：14998421
> 
> 赞同：0
> 
> 时间：2013-02-21T09:16:20.490
> 
> 标签：javascript, ios, button, ui-automation, ios-ui-automation

有没有办法停止自动化测试？实际上我正在使用自动化 javascript 测试我的应用程序。我的脚本中有两个测试。如果第一次测试失败我不想继续我的脚本..我的代码：

```
var target = UIATarget.localTarget();
var testname = "Test1";
UIALogger.logStart(testname);
target.frontMostApp().mainWindow().buttons()[0].tap();
UIALogger.logPass(testname);
target.delay(2);

var testname = "Test2";
UIALogger.logStart(testname);
target.frontMostApp().mainWindow().buttons()[1].tap();
target.frontMostApp().mainWindow().buttons()[0].tap();
UIALogger.logPass(testname); 
```

在这里，如果 test1 失败，我必须说脚本来停止该过程。请告诉我对这个问题的任何建议。谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-27T15:25:02.403

你真的应该考虑抽象出你的测试。你可以使用类似的东西：

```
function test(description, steps) {
    try{
        UIALogger.logStart(description);
        steps();
        UIALogger.logPass("Test Passed");
    } catch (exception) {
        UIALogger.logError(exception.message);
        UIATarget.localTarget().logElementTree();
        UIALogger.logFail("Test Failed");
        throw exception;
    }
} 
```

作为一个函数，您可以将测试包装进去。如您所见，它将开始测试，完成测试步骤（如果可能）。如果失败，测试将记录元素树（非常方便），然后再次抛出相同的错误，停止测试继续，并提供有关您遇到的错误的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:03:22.523

我强烈推荐使用[tuneup_js](https://github.com/alexvollmer/tuneup_js "这个")来运行 UIAutomation。`Instruments`如果一个测试使用GUI失败，我认为你不能停止测试运​​行，但是当使用`tuneup_js`库并从命令行运行测试时它会停止

# javascript - 使用 jquery/javascript 在 URL 中将数组作为参数传递？

> ID：14998424
> 
> 赞同：0
> 
> 时间：2013-02-21T09:16:28.303
> 
> 标签：javascript, jquery, url, struts2

我正在我的 CustomerList.jsp 中制作 url（用于查看特定客户），如下所示，其中`customer_message`是一个请求属性，它是一个数组。当我`customer_message`在 CustomerList 中检查时，我看到它包含两个 Float 值的数组

```
var custURL="<s:url namespace="/customer action="view-customer" method="viewCustomer"/>?customer_message=<s:property value="#request['customer_message']"/>"; 
```

但是，当我在 view-customer 操作中收到请求时`request.getParameter("customer_message")`，我看到它只包含一个值。

我在`customer_message`作为数组传递时犯了一些错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:40:38.197

在 Struts2 中使用`<s:param>`tag inside `<s:url>`tag 来添加参数。

```
<s:url namespace="/customer" action="view-customer" method="viewCustomer">
  <s:param name="customer_message" value="#request['customer_message']"/>
</s:url> 
```

从[`<s:url>`](http://struts.apache.org/development/2.x/docs/url.html)标签文档：

> 您可以使用`<param>`正文中的标签来提供额外的请求参数。如果参数的值是 Array 或 Iterable，则所有值都将添加到 URL。

# javascript - 如何使用 codebird.js 推特库？

> ID：14998429
> 
> 赞同：8
> 
> 时间：2013-02-21T09:16:41.553
> 
> 标签：javascript, twitter

我想使用 codebird.js twitter 库通过新的 Twitter API1.1 获取特定作者的最新推文

[https://github.com/mynetx/codebird-js](https://github.com/mynetx/codebird-js)

我没有找到任何使用它的教程或入门指南..

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:50:58.413

您在这里有足够的文档：

[https://code.google.com/p/codebird/wiki/GettingStarted](https://code.google.com/p/codebird/wiki/GettingStarted)

由@Jublo 评论

该项目已移至 GitHub，并在此处记录：github.com/jublonet/codebird-js。

# mysql - MySQL查询随机缓慢

> ID：14998440
> 
> 赞同：1
> 
> 时间：2013-02-21T09:17:24.313
> 
> 标签：mysql, vbulletin

我有一个在 vBulletin 系统中运行的查询，它获取具有图像附件的最新线程以及它们的第一个附件 ID。

这是查询：

```
SELECT  thread.threadid, 
          thread.title, 
          thread.postuserid, 
          thread.postusername,
          thread.dateline, 
          thread.replycount, 
          post.pagetext,
          (
            SELECT attachment.attachmentid
            FROM `vb_attachment` AS attachment
                LEFT JOIN `vb_filedata` AS data 
                    ON data.filedataid=attachment.filedataid
            WHERE attachment.contentid=thread.firstpostid
                AND attachment.contenttypeid=1
                AND data.extension IN('jpg','gif','png')
                AND data.thumbnail_filesize>0
            ORDER BY attachmentid ASC
            LIMIT 1
          ) AS firstattachmentid
FROM `vb_thread` AS thread
   LEFT JOIN `vb_post` AS post 
        ON post.postid=thread.firstpostid
WHERE thread.forumid IN(331, 318)
        HAVING firstattachmentid>0
ORDER BY thread.dateline DESC
LIMIT 0, 5 
```

您可以在此处看到查询的解释结果：

![在此处输入图像描述](../Images/cdf5bc8b6206d1b274fa6c193a7d966d.png)

问题：通常查询在 0.00001 秒内运行，所以几乎是立即运行，因为它是整体优化的查询，但是，在创建新线程后（**即使线程不是来自论坛 ID 331、318**），它需要 40 多秒（直接从MySQL GUI），**甚至解释查询需要 2+ 秒！**. 解释查询缓慢显示有关索引使用的相同结果。

运行相同的查询两到三遍后，它又恢复了正常速度。

如果有人能解释发生了什么，以及如何解决问题，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:24:13.447

MySQL 缓存查询的结果以允许它稍后更快地返回相同查询的结果。

添加新线程导致 MySQL 必须在下次运行查询时重建查询缓存。

我发现 MySQL 子查询表现不佳。我用来避免子查询的一些策略：

1.  将查询重组为没有子查询的连接。
2.  将查询重组为多个查询。
3.  返回更多您需要的数据，然后在您的应用程序中处理这些数据。

# java - 忽略java日期比较中的任何空格或新行

> ID：14998442
> 
> 赞同：0
> 
> 时间：2013-02-21T09:17:28.370
> 
> 标签：java, datetime, compare

我正在尝试比较 java 中的两个日期。虽然以下代码可以正常工作，但我想处理输入日期的日期格式可能发生一些变化的情况。

例如，在下面的代码中，两个日期的日期格式为 yyyy/mm/dd hh:mm:ss am。但有时在输入日期中会发现一些额外的空格/换行符，这会导致异常。

```
java.text.ParseException: Unparseable date: "02/14/2013
    07:00:00 AM" 
```

以下是我试图执行的代码。

```
 try 
        {
            Date date1 = (Date)DATE_FORMAT_yyyy_mm_dd_hh_mm_ss.parse(slaTime); // usually the data comes as 2013/02/03 09:09:09 AM
            Date date2 = (Date)DATE_FORMAT_yyyy_mm_dd_hh_mm_ss.parse(actualTime);// usually the data comes as 2013/02/03  09:06:09 AM

            // a error occurs
            if(date1.before(date2))
            {
                return "True";
            }
            else
            {
                return "False";
            }
        } 
        catch (ParseException e) 
        {
        e.printStackTrace();

        } 
```

如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:20:41.687

对于一年中的月份，使用 M 而不是 m

正确的日期格式是`yyyy/MM/dd hh:mm:ss aaa`. 如果有任何额外的空格或新行，那么您必须将其删除，否则它将无法解析您的字符串，您应该与 format 完全匹配。

我建议您删除所有空格和换行符然后解析它。

您可以使用格式，例如 -`yyyy/MM/ddhh:mm:ssaaa`没有空格的地方。并用空字符串替换所有空间和新行。

```
Date date = new SimpleDateFormat("yyyy/MM/ddhh:mm:ssaaa").parse("2013/02/1407:00:00AM"); 
```

你的实际代码可能是 -

```
dateString = dateString.replaceAll("\\s","");
SimpleDateFormat("yyyy/MM/ddhh:mm:ssaaa").parse(dateString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:23:21.050

最简单的解决方案之一是在解析日期之前[从日期的字符串版本中去除所有空格。](https://stackoverflow.com/questions/5455794/removing-whitespace-from-strings-in-java)更改您的日期格式以不包含任何空格（yyyy/MM/ddhh:mm:ssaaa），并使用它来解析剥离的字符串。

```
 final DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/ddhh:mm:ssaaa");
        final String dateStr = "02/14/2013    07:00:00" +
                                "\n AM";
        Date failingDate = dateFormat.parse(dateStr);
        Date passingDate = dateFormat.parse(dateStr.replaceAll("\\s","")); 
```

# ftp - 打开存档下载它

> ID：14998443
> 
> 赞同：0
> 
> 时间：2013-02-21T09:17:29.607
> 
> 标签：ftp, download, archive

我有一个简单的问题，但找不到简单的解决方案下载而不是直接通过浏览器打开，我的链接如下所示：

```
<a href="http://ftp.micae.com/micae/dvr/yazilimlar/IMS_200.rar" target="_blank">IMS 200 Client V1.29 (06.02.13)</a> 
```

我通过使用定义文件类型的php页面解决了这个问题，以便浏览器可以理解它是存档，然后下载它，而不是尝试直接通过浏览器打开它，有没有更简单的方法来实现它？！

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T07:14:00.460

希望我的案例对您有所帮助。我有一个网站，允许用户查看新闻和下载文件。有一天，我发现如果我直接显示 .rar 文件的下载链接，例如。[http://www.somenet.com/myfile.rar](http://www.somenet.com/myfile.rar)，然后它会在浏览器中自动打开，而不是询问用户是否要保存/打开它。如果我编写一些代码来读取文件并将其传输到浏览器，例如。[http://www.somenet.com/download?fileid=123](http://www.somenet.com/download?fileid=123)，然后要求浏览器保存/打开。

谷歌搜索了一会儿后，我在我的 Apache Tomcat web.xml（通常在 CATALINA_HOME/conf/web.xml）中插入了一段配置，如下所示：

```
<mime-mapping>
        <extension>rar</extension>
        <mime-type>application/x-rar-compressed</mime-type>
</mime-mapping> 
```

然后重启 Apache Tomcat 服务器生效。

现在我可以点击 direft rar 链接下载文件。

我还必须重新启动 IE（FF 立即生效）。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:31:12.470

如果您可以使用 HTML5，您可以尝试使用：

```
<a href="path/to/file/file.png" download="a-nice-image.png">Download this file</a> 
```

摘自：[HTML5链接下载](http://drublic.de/blog/offer-files-as-download-with-adownload/)

# ruby-on-rails - 脸书实时更新

> ID：14998445
> 
> 赞同：0
> 
> 时间：2013-02-21T09:17:36.883
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api

我正在尝试在我的 rails 应用程序中使用 facebook 实时更新。我在 facebook 设置页面中为“用户”和“电子邮件”对象添加了实时更新字段，参数如下：

```
 Object: user
    Fields: email, likes
    Callback: http://fb-realtime-test.herokuapp.com/facebook/subscription
    Verify Token: stringToken 
```

我还可以订阅我订阅的字段。

网址 [https://graph.facebook.com/141213822708267/subscriptions?access_token=141213822708267|-drf6Izviu3BSJ1YgU-Dx5Wi0GY&method=get](https://graph.facebook.com/141213822708267/subscriptions?access_token=141213822708267|-drf6Izviu3BSJ1YgU-Dx5Wi0GY&method=get)

退货

```
{
   "data": [
      {
         "object": "user",
         "callback_url": "http://fb-realtime-test.herokuapp.com/facebook/subscription",
         "fields": [
            "email",
            "likes"
         ],
         "active": true
      }
   ]
} 
```

当用户登录时，我还添加了“ **user_likes** ”和“ **email ”的权限。**但是，如果修改了任何喜欢或电子邮件，我将无法看到来自 Facebook 的 POST 电话。

请指导我做错了什么。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:00:38.750

问题已解决。我无法从 facebook 获得 POST 回调，因为我托管了我的 rails app n heroku。使用 Heroku，它限制了单个进程，因此我只从 facebook 获得了 GET 而不是 POST。Heroku 使用单个测功机阻止其他进程。为了支持这一点，我们需要两个测功机来从 Facebook 获取帖子回调。

# xcode - 在 Phonegap-2.3.0 中调用 EmailComposerwithattachments 插件时出现“FAILED pluginJSON”错误

> ID：14998455
> 
> 赞同：0
> 
> 时间：2013-02-21T09:18:25.677
> 
> 标签：xcode, cordova, ios6, phonegap-plugins

嗨，我正在使用 phonegap 插件中的 EmailcomposerWithAttachments 插件。我正在使用 Phonegap-2.3.0 和 ios6 模拟器和最新的 Xcode。

我已将 .m、.h 文件放在项目的 Plugins 文件夹中，并将 Js 文件放在 WWW 文件夹中，并使用调用插件

```
window.plugins.emailComposer.showEmailComposer("Look at this photo","Take a look at <b>this<b/>:",["the.das@gmail.com", "dasthe@gmail.com"],[],[],true,[]); 
```

readme.md 文件中给出的 Node.js 代码。[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/EmailComposerWithAttachments](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/EmailComposerWithAttachments)

当我运行它时，我在日志中遇到错误。

```
-[CDVCommandQueue executePending] [Line 103] FAILED pluginJSON = ["INVALID","EmailComposer","showEmailComposer",[{"subject":"Look at this photo","bIsHTML":true,"ccRecipients":[],"attachments":[],"bccRecipients":[],"toRecipients":["the.das@gmail.com","dasthe@gmail.com"],"body":"Take a look at <b>this<b/>:"}]] 
```

请让我知道我在哪里做错了。

在 config.xml 文件`<plugin name="EmailComposer" value="EmailComposer" />`中，我将其添加到插件中

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T00:36:05.797

您的插件似乎已正确添加，但插件文件中出现了一些错误。我认为您可以在 xcode 中创建另一个项目并编译以检查插件中是否存在错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T22:38:08.997

尝试像这样使用“”而不是[]

```
window.plugins.emailComposer.showEmailComposer(
"Look at this photo", // subject
"Take a look at <b>this<b/>:", // body
"the.das@gmail.com,dasthe@gmail.com", // toRecipients
"", // toRecipients
"", // bccRecipients
true, // bIsHTML
); 
```

在代码中，我们期望字符串由 @"," 分隔

```
...
[picker setToRecipients:[ toRecipientsString componentsSeparatedByString:@","]];
... 
```

我希望这有帮助

# java - 使用 Class.getResource() 时如何防止路径遍历攻击

> ID：14998457
> 
> 赞同：4
> 
> 时间：2013-02-21T09:18:29.937
> 
> 标签：java, security, jar, static-resource

我希望为我的网站用户提供对 JAR 文件中提供的一些静态资源的访问权限。

我无法提供用户应该能够访问的所有文件的列表，但我可以确保它们都包含在 JAR 的子目录中，例如：

```
public-access/file-1
public-access/file-2
public-access/sub-dir/file-3 
```

然后将通过以下方式访问这些文件：

```
this.getClass().getResource("/public-access/" + requestedFile); 
```

有没有推荐的方法来防止路径遍历攻击？这是为了防止恶意用户请求名为 eg 的文件`../secret`，或`sub-dir/../../secret`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:43:52.873

您需要通过覆盖 [SecurityManager](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/SecurityManager.html)来定义自定义安全策略。查看本教程，它很好地解释了如何创建和注册。

[提供您自己的安全管理器](http://journals.ecs.soton.ac.uk/java/tutorial/networking/security/index.html)

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:21:49.277

看看安全管理器：[http ://docs.oracle.com/javase/tutorial/essential/environment/security.html](http://docs.oracle.com/javase/tutorial/essential/environment/security.html)

我认为它完全支持您所需要的，只需指定不允许打开给定路径的资源即可。

# java - 英国邮政编码的正则表达式

> ID：14998459
> 
> 赞同：2
> 
> 时间：2013-02-21T09:18:34.150
> 
> 标签：java, regex, postal-code

我正在制作一个应用程序，要求用户输入邮政编码并在邮政编码有效时输出。

我发现了以下模式，它可以正常工作：

```
String pattern = "^([A-PR-UWYZ](([0-9](([0-9]|[A-HJKSTUW])?)?)|([A-HK-Y][0-9]([0-9]|[ABEHMNPRVWXY])?)) [0-9][ABD-HJLNP-UW-Z]{2})"; 
```

我对正则表达式知之甚少，如果有人能通过这个声明告诉我，那就太好了。我主要不明白`?`.`()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:25:12.673

这 ？mean 出现 0 次或 1 次，并且括号会按照您的预期进行分组，修饰符将在组上起作用。正则表达式教程可能是这里最好的东西

[http://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

我看了一眼，这对于练习/游戏来说似乎也是合理的，请参阅这个小程序

[http://www.cis.upenn.edu/~matuszek/General/RegexTester/regex-tester.html](http://www.cis.upenn.edu/~matuszek/General/RegexTester/regex-tester.html)

简单的例子（ab）？

表示“ab”一次或根本不表示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:42:21.677

您的正则表达式具有以下内容：

*   `^`和`$`- 用于指示匹配输入的开始和结束的锚。
*   `[A-PR-UWYZ]`- A 到 P 或 R 到 U 或 W,Y,Z 之间的任何字符。用方括号括起来的字符形成一个字符类，它允许任何被括起来的字符，并`-`用于指示一个字符序列，如 [AD] 允许 A、B、C 或 D。
*   `([0-9]|[A-HJKSTUW])?`- 0-9 中的任意一个可选字符或由 [A-HJKSTUW] 指示的字符。`?`使前面的部分成为可选的。`|`是为了一个`OR`。`()`结合了要`OR`编辑的两个部分。在这里你可以用`[0-9A-HJKSTUW]`这个来代替。
*   `[ABD-HJLNP-UW-Z]{2}`- 由字符类允许的字符组成的长度为 2 的序列。`{2}`表示长度为2。所以`[ABD-HJLNP-UW-Z]{2}`等价于`[ABD-HJLNP-UW-Z][ABD-HJLNP-UW-Z]`

# php - 为 opencart 中的自定义 textarea 表单字段启用 WYSIWYG

> ID：14998465
> 
> 赞同：0
> 
> 时间：2013-02-21T09:18:58.643
> 
> 标签：php, wysiwyg, opencart, custom-fields

这是一个 opencart 管理问题。

我在“常规选项卡”中为产品创建了一个自定义字段（文本区域）。是否有任何机构可以快速修复将其转换为“描述”字段中使用的所见即所得编辑器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T13:55:11.393

在页脚之前添加 ckeditor.js 文件和以下代码：

```
<script type="text/javascript"><!--
<?php foreach ($languages as $language) { ?>
CKEDITOR.replace('description<?php echo $language['language_id']; ?>', {
    filebrowserBrowseUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
    filebrowserImageBrowseUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
    filebrowserFlashBrowseUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
    filebrowserUploadUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
    filebrowserImageUploadUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>',
    filebrowserFlashUploadUrl: 'index.php?route=common/filemanager&token=<?php echo $token; ?>'
}); 
<?php } ?>
//--></script> 
```

代替：

```
 description<?php echo $language['language_id']; 
```

带有文本区域的 id。

# hibernate - 带有版本控制的休眠合并（）

> ID：14998466
> 
> 赞同：0
> 
> 时间：2013-02-21T09:19:00.007
> 
> 标签：hibernate, hibernate-search

我正在使用 hibernate 3.6，XML 中的映射。

从以下架构开始。

```
public class Card {
  @IndexedEmbedded
  private CardType cardType;

  private User user;//many-to-one
  ...
}

public class User {
  ...
  private int version;//Need to be strict about version on this table
  private Set<Card> cards = new HashSet<Card>();//cascade="all-delete-orphan"
  ...
} 
```

如果我执行以下操作：
1：加载现有用户
2：关闭会话，在分离状态客户端工作。添加临时标签。
3：将用户返回给服务器，openSession()、beginTransaction()、saveOrUpdate(user)、commit()。

我收到以下错误“在 Hibernate Search 中编制索引时出错（在事务完成之前）”... 原因：org.hibernate.LazyInitializationException：无法初始化代理 - 没有会话

到目前为止，这对我来说很有意义。CardType & Card 需要更新它们的索引。所以我希望在 saveOrUpdate() 之前将我的第 3 步更改为 merge()。

如果我这样做，它会将 detached 中的所有属性（包括版本）复制到会话感知对象中。这当然意味着我的乐观锁定策略失败了——没有警告版本问题。

在这种情况下应该采取什么策略？

--发布更新以显示一些会话处理代码--

```
public synchronized static SessionFactory getSessionFactory() {
  if (sessionFactory == null) {
    final AuditLogInterceptor interceptor = new AuditLogInterceptor();
    Configuration configuration = new Configuration();
    configuration = configuration.configure("hibernate.cfg.xml");
    configuration.setInterceptor(interceptor);
    sessionFactory = configuration.buildSessionFactory();
    AbstractSessionAwareConstraintValidator.setSessionFactory(sessionFactory);
  }
  return sessionFactory;
} 
```

测试代码是这样的

```
sessionFactory = HibernateUtil.getSessionFactory();
sessionFactory.getCurrentSession().beginTransaction();
//Find user here
sessionFactory.getCurrentSession().getTransaction().commit();
sessionFactory.getCurrentSession().close();
//Edit User, add tags out of session. (not using OSIV)
sessionFactory.getCurrentSession().beginTransaction();
user = sessionFactory.getCurrentSession().merge();//Only works if I do this
sessionFactory.getCurrentSession().saveOrUpdate(entity);
sessionFactory.getCurrentSession().getTransaction().commit();
sessionFactory.getCurrentSession().close(); 
```

据我所知，在我的 hibernate.cfg.xml 中没有任何“非标准”，但只是列出这 3 行以防 1 线程 org.hibernate.cache.NoCacheProvider

我希望有足够的代码来演示会话的使用。发布了这个，我想知道拦截器是否可能影响会话管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:28:35.390

你如何处理会话？在索引期间，会话必须仍然打开，以便索引器可以加载延迟加载的关联。在 webapps 中，Open Session In View 模式通常用于在整个请求期间打开一个会话。您需要发布一些更具体的代码以获得更具体的反馈。另一种方法是急切加载关联（可能不是一个好主意）。

# mysql - MySQL错误：将表单数据插入数据库

> ID：14998468
> 
> 赞同：2
> 
> 时间：2013-02-21T09:19:05.817
> 
> 标签：mysql, sql, forms

同时自学 SQL 和 PHP 并收到此错误：

**错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在 'Name, Last Name, Course_id, Professor) VALUES ('duke','john','doe','cpsc','teacher' at line 1 带查询**

我的代码应该从表单中获取信息并将其插入到我已经阅读的数据库中我已经查看了几个小时并在互联网上搜索了一段时间，但仍然找不到导致这种情况的原因。谁能帮我吗？

这是我的带有表格的 test.php 文件：

```
<html>
    <head>
        <title>Insert data into database</title>
    </head>

    <body>
        <form method="post" action="handler.php">
            <p>What is your University:</p>
            <input type="text" name="uni"><br>

            <p>What is your First Name:</p>
            <input type="text" name="f_name"><br>

            <p>What is your Last Name:</p>
            <input type="text" name="l_name"><br>

            <p>What is your Course:</p>
            <input type="text" name="cou_id"><br>
            <p>Who was your Professor for that course?:</p>

            <input type="text" name="pro_id"><br>
            <input type="submit" value="Submit" />
        </form>
    </body>
</html> 
```

这是我的 handler.php 文件，它将表单中的信息存储到数据库中：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Untitled Document</title>
    </head>

    <body>
        <?php
            $uni = $_POST['uni']; 
            $uni= mysql_real_escape_string($uni);
            $f_name = $_POST['f_name'];
            $f_name = mysql_real_escape_string($f_name);
            $l_name = $_POST['l_name'];
            $l_name = mysql_real_escape_string($l_name);
            $cou_id = $_POST['cou_id'];
            $cou_id = mysql_real_escape_string($cou_id);
            $pro_id = $_POST['pro_id'];
            $pro_id = mysql_real_escape_string($pro_id);

            $con = mysql_connect("localhost","root","") or die(mysql_error());
            mysql_select_db("tester") or die(mysql_error()); 

            if (!mysql_query("INSERT INTO my_hw (University, First Name, Last Name, Course_id, Professor) VALUES ('$uni','$f_name','$l_name','$cou_id','$pro_id')"))
              {
              die('Error: ' . mysql_error() . " with query ". $sql);
              }
            echo "1 record added";

            mysql_close($con);
        ?>
    </body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:20:26.547

您的名字和姓氏列中有空格：

```
 INSERT INTO my_hw (University, `First Name`, `Last Name`, Course_id, Professor) VALUES     ('$uni','$f_name','$l_name','$cou_id','$pro_id') 
```

注意添加的反引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:23:08.723

更改您的列名，使它们没有空格。在列名中有空格是不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:23:11.130

由于您使用`mysql`的是 ，因此列名必须用反引号而不是单引号分隔，因为它们之间包含空格，

```
INSERT INTO my_hw (University, `First Name`, `Last Name`,... 
```

# java - 我可以向 jms:listener-container 注入一些东西吗？

> ID：14998471
> 
> 赞同：0
> 
> 时间：2013-02-21T09:19:15.430
> 
> 标签：java, spring, spring-integration, spring-jms

我可以向使用此标记定义的 jms 侦听器容器注入一些其他 bean：

```
<jms:listener-container connection-factory="connectionFactory">...</jms:listener-container> 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T13:57:08.593

`<jms:listener-container/>`只是配置方便；它本身不是一个 bean，它代表一组将应用于子`<jms:listener/>`元素的属性。每个侦听器都有自己的侦听器容器 bean。

您可以`reference`在侦听器中使用其他 bean...

```
<jms:listener-container ... >
    <jms:listener destination="someQueue" ref="foo" />
</jms:listener-container> 
```

# .net - MAC MINI OS X 10.8.1 上的独立存储在哪里

> ID：14998476
> 
> 赞同：0
> 
> 时间：2013-02-21T09:19:24.093
> 
> 标签：.net, macos, silverlight, isolatedstorage

有人知道 MAC MINI OS X 10.8.1 上的独立存储在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:54:27.480

来自：http: [//msdn.microsoft.com/en-us/magazine/dd458794.aspx](http://msdn.microsoft.com/en-us/magazine/dd458794.aspx)

隔离存储位于`/Users/<user>/Library/Application Support/Microsoft/Silverlight/is`Mac OS 和 Silverlight

# jquery - 为jstree中的节点创建多个子节点

> ID：14998478
> 
> 赞同：3
> 
> 时间：2013-02-21T09:19:25.520
> 
> 标签：jquery, jstree

```
self.handleChildNodes = function(pageFileArray) {
    var node = $("#move-folder-list").jstree("get_selected");
    alert(node.attr("id"));
    $.each(pageFileArray, function(index, item) { 
        $("#move-folder-list").jstree("create", node, "inside",
          {attr : {id: index}, data: item.name}, false, true);
    });
} 
```

在上面的代码快照中，当我使用 inside 选项时，我只能创建一个子节点，但是当我使用之后，我能够创建所有子节点，但无法获得树结构。我得到的错误说`li has no addBack method`，我不知道那是什么意思。

# android - 自定义适配器 Listview Android

> ID：14998479
> 
> 赞同：0
> 
> 时间：2013-02-21T09:19:32.780
> 
> 标签：android, multithreading, listview

我把头撞在墙上，试图解决这个问题一段时间。我不是一个有经验的 Android 人，所以它的解决方案可能非常简单。话虽如此，我有以下代码：

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.adminusers);
    super.onCreate(savedInstanceState);

    // set user_type for Viewall
    mUserType = 0;

    lv_adminusersListContent.addFooterView(footerView);
    mUsersAdapter = new AdminUsersAdapter(mUsersList, AdminUsers.this);
    lv_adminusersListContent.setAdapter(mUsersAdapter);

    getUsersList();

}

private void getUsersList() {

    if (UsefulFcts.isOnline(AdminUsers.this)) {

        if (mThread != null && mThread.isAlive()) {
            mThread.interrupt();
        }

        mThread = new Thread() {
            @Override
            public void run() {

                mHandler.post(new Runnable() {

                    @Override
                    public void run() {
                        pDialog = new ProgressDialog(AdminUsers.this);
                        pDialog.setMessage("Loading.. Please wait!");
                        pDialog.setCancelable(false);
                        pDialog.show();
                    }
                });

                mUsersList.clear();
                mUsersList.addAll(mServiceManager.getUsersList(mUserType,
                        0 + "", AdminServiceManager.sHowManyToLoad));
                mArrayLength = mUsersList.size();

                Log.d("arrayLength", String.valueOf(mArrayLength));
                Log.d("total_results",
                        String.valueOf(ParserJSON.total_results));

                mHandler.post(new Runnable() {

                    @Override
                    public void run() {

                        // refresh listview

                        mUsersAdapter.notifyDataSetChanged();

                        if (mArrayLength < ParserJSON.total_results) {

                            lv_adminusersListContent
                                    .addFooterView(footerView);

                        } else if (mArrayLength >= ParserJSON.total_results) {

                            lv_adminusersListContent
                                    .removeFooterView(footerView);
                        }

                        if (0 == mArrayLength) {

                            Toast.makeText(AdminUsers.this,
                                    "No username found!",
                                    Toast.LENGTH_SHORT).show();
                        }

                        pDialog.dismiss();
                    }
                });
            }
        };
        mThread.start();
    } else {
        Toast.makeText(AdminUsers.this, "Internet connection required!",
                Toast.LENGTH_LONG).show();
    }
}

@Override
protected void linkUI() {

    // begin load_more view
    footerView = AdminUsers.this.getLayoutInflater().inflate(
            R.layout.loadmore, null);

    btn_loadmore = (Button) footerView.findViewById(R.id.btn_loadmore);
    // end load_more view

    btn_adminusersViewall = (Button) findViewById(R.id.btn_adminusersViewall);
    btn_adminusersAdmins = (Button) findViewById(R.id.btn_adminusersAdmins);
    btn_adminusersClients = (Button) findViewById(R.id.btn_adminusersClients);
    btn_adminusersDevs = (Button) findViewById(R.id.btn_adminusersDevs);

    btn_adminAdd = (ImageButton) findViewById(R.id.btn_adminAdd);

    lv_adminusersListContent = (ListView) findViewById(R.id.lv_adminusersListContent);
}

@Override
protected void setAction() {

    // begin Buttons UnderHeader

    btn_adminusersViewall.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            UsefulFcts.setButtonClicked(btn_adminusersViewall,
                    btn_adminusersClients, btn_adminusersAdmins,
                    btn_adminusersDevs);

            mUserType = 0;

            mArrayLength = -1;

            lv_adminusersListContent.removeFooterView(footerView);

            getUsersList();

        }
    });

    btn_adminusersClients.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            UsefulFcts.setButtonClicked(btn_adminusersClients,
                    btn_adminusersDevs, btn_adminusersAdmins,
                    btn_adminusersViewall);

            mUserType = 1;

            mArrayLength = -1;

            // view.setVisibility(View.GONE);

            getUsersList();
        }
    });

    btn_adminusersDevs.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            UsefulFcts.setButtonClicked(btn_adminusersDevs,
                    btn_adminusersClients, btn_adminusersAdmins,
                    btn_adminusersViewall);

            mUserType = 2;

            mArrayLength = -1;

            lv_adminusersListContent.removeFooterView(footerView);

            getUsersList();
        }
    });

    btn_adminusersAdmins.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            mUserType = 3;

            mArrayLength = -1;

            lv_adminusersListContent.removeFooterView(footerView);

            getUsersList();
        }
    });

    // end Buttons UnderHeader

    btn_loadmore.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            mThread2 = new Thread() {
                @Override
                public void run() {
                    mHandler.post(new Runnable() {

                        @Override
                        public void run() {

                            progressBar = new ProgressDialog(
                                    AdminUsers.this);
                            progressBar
                                    .setMessage("Loading more projects.. ");
                            progressBar.setCancelable(true);
                            progressBar.show();
                        }
                    });

                    mUsersList.addAll(mServiceManager.getUsersList(
                            mUserType, String.valueOf(mArrayLength),
                            AdminServiceManager.sHowManyToLoad));

                    mArrayLength = mUsersList.size();

                    mHandler.post(new Runnable() {

                        @Override
                        public void run() {

                            mUsersAdapter.notifyDataSetChanged();

                            if (mArrayLength >= ParserJSON.total_results) {
                                lv_adminusersListContent.removeFooterView(footerView);
                            }
                            progressBar.dismiss();
                        }
                    });

                };
            };
            mThread2.start();
        }
    }); 
```

注意：我基本上有一个列表视图，根据我正在按下的按钮（看起来像一个选项卡）（mUserType = 0/1/2/3）从服务器请求内容。我还使用了加载更多按钮（footerView = 带有按钮的简单布局）。一切似乎都工作得很好，但是在“玩”了几次按钮（随机数！）之后，它崩溃了，并引发了以下异常：

```
02-21 11:00:49.252: E/AndroidRuntime(11728): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131296461, class android.widget.ListView) with Adapter(class android.widget.HeaderViewListAdapter)] 
```

因此，我回顾了代码，但看不到任何“不在 UI 线程上”的列表视图通知。

**1.**问题可能是什么？

**2.**是否有必要使用 2 个线程（mThread 和 mThread2），或者我可以使用同一个线程，因为一个人的工作应该在另一个结束时开始（或者不是吗？）我应该将它们声明为静态吗？

还指出我将来可以使用的任何“良好做法”技巧，或我所做的“错误做法”将不胜感激！

PS。linkUI() 和 setAction() 在 super().onCreate() 中调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:30:21.687

错误消息似乎可以理解：您正在从 mThread 修改适配器：

```
mUsersList.clear();
mUsersList.addAll(mServiceManager.getUsersList(mUserType,
                    0 + "", AdminServiceManager.sHowManyToLoad)); 
```

你可以尝试这样的事情：

```
 final List newUserList = mServiceManager.getUsersList(mUserType,
                    0 + "", AdminServiceManager.sHowManyToLoad);

            mArrayLength = newUserList.size();

            Log.d("arrayLength", String.valueOf(mArrayLength));
            Log.d("total_results",
                    String.valueOf(ParserJSON.total_results));

            mHandler.post(new Runnable() {

                @Override
                public void run() {
                    mUsersList.clear();
                    mUsersList.addAll(newUserList);
                    // refresh listview

                    mUsersAdapter.notifyDataSetChanged(); 
```

# javascript - 通过 JavaScript 部分回发期间的 BlockUI

> ID：14998487
> 
> 赞同：1
> 
> 时间：2013-02-21T09:20:13.603
> 
> 标签：javascript, jquery, asp.net, asp.net-ajax, blockui

我有一个 ASP.NET 页面（WebForm1），它打开一个模式对话框 WebForm2（通过 OpenForm2() js 函数）以进行进一步处理。关闭对话框后，我只需通过 JavaScript 更新 UpdatePanel。现在的问题是，**在这个 js 调用期间，它不会阻塞 UI。**

仅当我从服务器端 (Button1_Click) 调用 OpenForm2 js 方法时才会发生这种情况。由于 UI 已经进入阻塞模式，在关闭 WebForm2 时，它不会等待部分回发 (JavaScript) 完成并解除对 UI 的阻塞。

如果我直接在按钮的 OnClientClick 标记（示例中的按钮 2）中调用 OpenForm2 js 函数，它会运行良好并一直阻塞 UI 直到回发完成。

我尝试将部分回发 js 代码包装在 add_endRequest 中，但在这种情况下，它会一直调用 refreshUpdatePanel() js 方法，因此阻止/解除阻止 UI 会继续进行。这可能是由于在这种情况下在页面上使用了两个 add_endRequest 吗？

在这方面的任何帮助都将受到高度赞赏。

注意：我使用 jQuery blockUI 在部分回发期间阻止页面。

WebForm1 页面的代码示例如下。（WebForm2 aspx 页面只有一个关闭对话框的按钮和一个相关的 js 功能）。

**WebForm1.aspx**

```
<head runat="server">
    <title></title>
    <script src="js/jquery-1.6.1.min.js" type="text/javascript"></script>
    <script src="js/jquery.blockUI.js" type="text/javascript"></script>
    <script type="text/javascript">
        function OpenForm2() {
            var url = "WebForm2.aspx";
            var width = 950;
            var height = 455; // screen.availHeight - (120 + 65);

            // open modal dialog
            obj = window.showModalDialog(url, window, "dialogWidth:" + width + "px; dialogHeight:" + height + "px; center:yes");

            // partial postback to reflect the changes made by form2
            refreshUpdatePanel();
            //Sys.WebForms.PageRequestManager.getInstance().add_endRequest(refreshUpdatePanel);
            // ** here it doesn't wait for the completion and unblocks the UI **
        }

        function refreshUpdatePanel() {
            //window.__doPostBack('UpdatePanel1', '1');
            // a timeout/delay before a client side updatepanel postback. That compelled the UI to go in blocking again with a little screen flickering.
            setTimeout('__doPostBack("<%= UpdatePanel1.ClientID %>", "1")', 0);
        }

        $(document).ready(function () {
            var prm = Sys.WebForms.PageRequestManager.getInstance();
            prm.add_initializeRequest(InitializeRequest);
            prm.add_endRequest(EndRequest);

            $.blockUI.defaults.css = {};
            function InitializeRequest(sender, args) {
                // Whatever you want to happen when the async callback starts
                $.blockUI();
            }
            function EndRequest(sender, args) {
                // Whatever you want to happen when async callback ends
                $.unblockUI();
            }
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:Label ID="Label1" runat="server" Text=""></asp:Label>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" OnLoad="UpdatePanel1_Load">
        <ContentTemplate>
            <asp:Label ID="Label2" runat="server" Text=""></asp:Label><br />
            <asp:Button ID="Button1" runat="server" Text="Button 1" OnClick="Button1_Click" />
            <asp:Button ID="Button2" runat="server" Text="Button 2" OnClientClick="OpenForm2();return false;" />
        </ContentTemplate>
    </asp:UpdatePanel>
    </form>
</body> 
```

**WebForm1.aspx.cs**

```
protected void Button1_Click(object sender, EventArgs e)
{
    // some server side processing here
    System.Threading.Thread.Sleep(1000);

    // then calling javascript function to open form2 as modal
    ScriptManager.RegisterClientScriptBlock(UpdatePanel1, UpdatePanel1.GetType(), "Button1Click", "OpenForm2();", true);
}

protected void UpdatePanel1_Load(object sender, EventArgs e)
{
    string parameter = Request["__EVENTARGUMENT"];
    if (parameter == "1")
    {
        System.Threading.Thread.Sleep(3000);
        Label2.Text = DateTime.Now.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:31:40.943

利用

```
 function refreshUpdatePanel() {
        __doPostBack"<%= UpdatePanel1.ClientID %>", '1');
    } 
```

代替

```
 function refreshUpdatePanel() {
        window.__doPostBack('UpdatePanel1', '1');
    } 
```

谢谢你

# java - java.lang.UnsupportedOperationException：不支持的写入变体！在 javax.imageio.ImageWriter.unsupported（未知来源）

> ID：14998489
> 
> 赞同：1
> 
> 时间：2013-02-21T09:20:24.080
> 
> 标签：java, javax.imageio

我一直在尝试使用 javax.imageio 以编程方式从 Java 中的许多其他 png 文件创建一个 png 文件。

特别是我一直在尝试使用[如何将多个 png 图像转换为单个 tiff 文件中概述的答案](https://stackoverflow.com/questions/792255/how-do-i-convert-multiple-png-images-to-a-single-tiff-file/793857#793857)

但是，当我调用该`writeInsert(..)`方法时，我不断收到以下异常。

```
java.lang.UnsupportedOperationException: Unsupported write variant!
at javax.imageio.ImageWriter.unsupported(Unknown Source)
at javax.imageio.ImageWriter.writeInsert(Unknown Source) 
```

我知道`canInsertImage`返回是否可以插入（我可以看到此方法返回 false）但是我不知道如何更改它。

```
import java.awt.image.BufferedImage;
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.Iterator;

import javax.imageio.IIOImage;
import javax.imageio.ImageIO;
import javax.imageio.ImageWriteParam;
import javax.imageio.ImageWriter;
import javax.imageio.stream.ImageOutputStream;

public class ImageTest
{

/**
 * @param args
 * @throws IOException
 */
public static void main(String[] args) throws IOException
{
    ImageOutputStream ios = null;
    ImageWriter writer = null;
    try
    {
        String dirName = "C:/png/test";
        File dir = new File(dirName);
        if (dir.exists() && dir.isDirectory())
        {
            File[] files = dir.listFiles();
            if (null != files && files.length > 0)
            {
                File outFile = new File("C:/png", "output.png");

                ios = ImageIO.createImageOutputStream(outFile);

                Iterator<ImageWriter> writers = ImageIO.getImageWritersByFormatName("png");
                if (null != writers && writers.hasNext())
                {

                    writer = writers.next();
                    writer.setOutput(ios);
                    ImageWriteParam param = writer.getDefaultWriteParam();

                    for (int i = 0; i < files.length; i++)
                    {
                        InputStream fis = null;
                        try
                        {
                            fis = new BufferedInputStream(new FileInputStream(files[i]));
                            BufferedImage image = ImageIO.read(fis);
                            IIOImage img = new IIOImage(image, null, null);

                            if (i == 0)
                            {
                                writer.write(null, img, param);
                            }
                            else
                            {
                                writer.writeInsert(-1, img, param);
                            }
                            image.flush();
                        } finally
                        {
                            if (null != fis)
                            {
                                fis.close();
                            }
                        }
                    }

                }
            }
        }
    } catch (Exception e)
    {
        System.err.println("OOOps: " + e.getMessage() + "\n");
        e.printStackTrace();
    } finally
    {
        if (null != ios)
        {
            ios.close();
        }
        if (null != writer)
        {
            writer.dispose();
        }
    }

} 
```

}

# sql-server - 通过命令行和 Windows 身份验证连接到网络中的 SQL Server

> ID：14998491
> 
> 赞同：1
> 
> 时间：2013-02-21T09:20:30.207
> 
> 标签：sql-server, sqlcmd

在服务器运行的系统中，我可以使用以下命令登录：

```
sqlcmd -S "ComputerName\InstanceName" -d "DatabaseName" -i "sql.txt" -s"," -o "result.csv" 
```

我想从另一台机器连接到这个服务器，所以我尝试了这个

```
sqlcmd -U "UserName" -S "ComputerName\InstanceName" -d "DatabaseName" -i "sql.txt" -s"," -o "result.csv" 
```

上面的“用户名”是具有管理权限的服务器机器的默认用户名。此用户帐户没有任何密码。

发出该命令后，它会要求输入密码。由于没有密码，我按回车。但我收到以下错误：

```
Sqlcmd: Error: Microsoft SQL Server Native Client 11.0 : Login failed for user 'UserName'.. 
```

[SQLCMD 参考](http://msdn.microsoft.com/en-us/library/ms180944.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-30T08:38:23.190

我遇到了这种情况：

```
sqlcmd -S "server" -d "db" -E   -i test.sql 
```

给出“Sqlcmd：错误：Microsoft SQL Server Native Client 11.0：用户'DOMAIN\administrator'登录失败..”

但是当我切换到：

```
sqlcmd -S server -d db -E   -i test.sql 
```

它工作正常。所以请注意你的双引号。希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:24:21.663

`-U UserName`指定 SQL Server 登录名，而不是 Windows 用户名。在我看来，您想使用 Windows 用户。正确的方法是拥有一个域，以域用户身份运行，并在 SQL 中向您所属的域组授予适当的权限。光秃秃的，你可以使用`runas /netonly /user:ComputerName\UserName sqlcmd -E`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-06T13:20:46.170

该问题与 SQL 和 Windows 身份验证之间的差异有关。在 Windows 身份验证的情况下，例如在具有多个不受信任域的域环境中，只能选择`runas.exe /netonly /user:YourTargetDomain\SQLUser`在适当的 SQL 用户下运行 SQLCMD 或 Ssms.exe（SQL 管理工作室）。

sqlcmd 和 ssms 都可以在没有任何凭据`SQLCMD -E`（Studio 中的 UI 选项）的情况下使用 Windows（也是域）身份验证，但进程应该作为在 SQL 中为 NT 身份验证配置的本地或域用户运行。或者提供 SQL 用户凭据（直接在 SQL 服务器上配置，例如 SA）- `SQLCMD -U SQLUserName -P SQLUserPassword`（Studio 中的第二个 UI 选项）。

以下命令可用于从单独的不受信任域中的机器（例如，使用您的办公室域帐户的办公室笔记本电脑 - 未配置为访问 SQL 服务器）连接到配置了 Windows (NT) 身份验证的 SQL 服务器（例如实验室域用户）。

**运行 SSMS**（可以创建一个 windows 桌面快捷方式，ssms 的路径可以不同，取决于使用的版本和安装偏好）：

```
C:\Windows\System32\runas.exe /netonly /user:MyLabDomain\SqlUser "C:\Program Files (x86)\Microsoft SQL Server\120\Tools\Binn\ManagementStudio\Ssms.exe 
```

**使用 SQLCMD 运行查询**（在示例中，它清理表，也可以用作快捷方式）：

```
C:\Windows\System32\runas.exe /netonly /user:MyLabDomain\SqlUser "sqlcmd -S 123.123.12.34 -E -I -Q \"delete FROM TestDB..TestTableToEmpty\"" 
```

*   SSMS 或 SQLCMD 应安装在您连接到 SQL 服务器的计算机上。
*   运行后，您应该输入 SQL 用户的密码。

我想，这些例子可能会对某人有所帮助。

# gwt - 对某些模型类禁用 gwt 混淆

> ID：14998492
> 
> 赞同：7
> 
> 时间：2013-02-21T09:20:33.847
> 
> 标签：gwt, obfuscation, indexeddb

在 GWT 2.4+ 中是否可以禁用某些 java 模型类的混淆？

我问这个问题的原因是我们使用 GWT RPC 与服务器对话，并且需要使用 Indexed DB API 将这些返回的对象等存储在本地存储中，我们目前正在使用 websql api。如果 GWT 混淆/重命名您的属性等，那么这会在您的代码中使用 Indexed DB API 进行渲染。

也许有一种方法可以让 GWT 在您的 Indexed DB api 查询中用混淆版本替换属性字符串？

我可以创建一个使用 javascript 覆盖的全新 Java 模型，以便在 GWT 编译并用 JSON RPC 替换 GWT RPC 时保留这些，但这将是很多工作。

任何其他想法将不胜感激！

我还查看了 AutoBean 框架，它为您的模型接口生成了很好的 JSON 输出，但我认为在底层没有一个很好的简单 javascript 表示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:17:23.887

您可以将 GWT 编译样式属性设置为`PRETTY`或`DETAILED`。这样 GWT 就不会替换类、方法或变量名。有关更多信息，请参阅[此链接](http://css.dzone.com/news/understanding-gwt-compiler)。

# python - Python梯度测量中的错误

> ID：14998497
> 
> 赞同：0
> 
> 时间：2013-02-21T09:20:49.570
> 
> 标签：python, scipy

我需要将一条直线拟合到我的数据中，以确定是否存在渐变。

我目前正在使用 scipy.stats.linregress 执行此操作。

不过我有点困惑，因为 linregress 的输出之一是“标准误差”，但我不确定 linregress 是如何计算的，因为您的数据点的不确定性没有作为输入给出。

数据点的不确定性肯定会影响给定梯度的不确定性吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:09:49.953

线性回归的标准误差是通过将拟合模型减去数据点获得的系列的标准偏差。它表明您的数据点与线性模型的拟合程度。

# plugins - 如何在 rowexpander 插件中使用模板 - Ext JS 4

> ID：14998500
> 
> 赞同：0
> 
> 时间：2013-02-21T09:21:12.150
> 
> 标签：plugins, extjs, extjs4, extjs4.1

我们可以使用模板如下：

```
 plugins: [{
            ptype: 'rowexpander',
            selectRowOnExpand : false,  
            rowBodyTpl: new Ext.XTemplate(
                '<p>Qusetions: {question}</p><p>',
                '<tpl for="option">',
                        '<p>{option[0]}</p>',
                    '</tpl></p>'
                )
            }] 
```

我什么也看不见。我有这个 JSON：

```
 { 
        "total": 2, 
        "data": [   
        {
        "qno":1,
        "question":"What's Your Fav color",
        "option":['red','green','blue']
        },
        {
        "qno":2,
        "question":"What's Your coom color",
        "option":['yellow','red','green','blue']
        }
     ] 
      } 
```

模型文件

```
Ext.define('AM.model.Question', {
     extend: 'Ext.data.Model',
     fields: [
      {name: 'question'},
      {name: 'option'},
      {name: 'images'},
      {name: 'qno'}
]}); 
```

我想看到如下输出：

```
 + Questions: What is your fav color

        <radiobutton> Red
        <radiobutton> Green
        <radiobutton> Blue 
```

我正在使用 Ext JS 4.1 版本

提前感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:06:48.313

当使用 XTemplate 遍历数组时，当前项使用`{.}`. 您的模板应如下所示：

```
'<p>Questions: {question}</p>',
'<p>',
'<tpl for="option">',
    '<p>{.}</p>',
'</tpl>',
'</p>' 
```

但是，如果你想做一个广播组，它会变得有点棘手。XTemplate 提供了`parent`访问当前上下文之外的对象的属性。因此`<p>`，您的广播组可能看起来像这样，而不是中间的标签：

```
'<tpl for="option">',
    '<input type="radio" name="qno_{parent.qno}" value="{.}" />{.}<br/>'
'</tpl>' 
```

# c# - 如何追加到字典？

> ID：14998505
> 
> 赞同：0
> 
> 时间：2013-02-21T09:21:30.310
> 
> 标签：c#

我定义了一本字典。

```
Dictionary<string, string> dataSource; 
```

有一个函数以这样的方式定义，这个字典将被填充至少一个。

```
dataSource = l2ListText
             .Zip(l2ListValue, (lText, lValue) => new { lText, lValue })
             .ToDictionary(x => x.lValue, x => x.lText); 
```

`l2ListText`并且`l2ListValue`是`List<String>` 这个填充的`datasource`字典用作列表框的数据源。

第二轮，它检查一个列表框是否为空，当它不为空时，我想将值附加到它`dataSource`并再次将它作为数据源重新分配给列表框。

我发现很难做到这一点，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:11:38.447

您的代码中的主要问题是您`Dictionary`在每次调用时都进行了初始化。因此，您将永远无法添加项目，只能从`l2Lists`

此行`Dictionary<string, string> dataSource;`应在类级别移动，以确保每次调用该方法都有相同的实例。

修改后的代码如下：

```
if (dataSource != null && lstbx_confiredLevel2List.Items.Count > 0) 
{ 
   dataSource.Add(l2ListValue[0], l2ListText[0]); 
} 
else { 
   dataSource = l2ListText .Zip(l2ListValue, (lText, lValue) => new { lText, lValue }) .ToDictionary(x => x.lValue, x => x.lText); 
} 
lstbx_confiredLevel2List.DataSource = dataSource; 
lstbx_confiredLevel2List.DataTextField = "Value"; 
lstbx_confiredLevel2List.DataValueField = "Key"; 
lstbx_confiredLevel2List.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:14:48.163

如果没有 LINQ`.Zip`扩展，您还可以执行以下操作：

```
dataSource = new Dictionary<string, string>();
int zipCount = Math.Min(l2ListText.Count, l2ListValue.Count);

for (int idx = 0; idx < zipCount; ++idx)
    datasource.Add(l2ListValue[idx], l2ListText[idx]); 
```

`for`循环附加到您的`Dictionary<,>`. 如果您再次运行类似的`for`循环，将附加新值。请注意，如果再次添加相同的“键”（来自 的成员`l2ListValue`），这将失败。如果需要，您可以覆盖现有成员 insted：

```
for (int idx = 0; idx < zipCount; ++idx)
    datasource[l2ListValue[idx]] = l2ListText[idx]; 
```

# java - 当路径/名称包含 Unicode 字符时如何运行可执行 JAR？

> ID：14998507
> 
> 赞同：3
> 
> 时间：2013-02-21T09:21:37.847
> 
> 标签：java, unicode, jar, executable-jar

假设我有一个名为“ascąś©.jar”的可执行 JAR 文件。当我尝试通过双击运行它时，java.exe 进程开始但随后立即结束。当我尝试使用命令从 cmd.exe 运行它时：`java -jar "ascąś©.jar"`它返回：

```
C:\>java -jar "ascąś©.jar"
Error: An unexpected error occurred while trying to open file asc??ę. 
```

或者如果当前目录中没有这样的文件：

```
C:\>java -jar "ascąś©.jar"
Error: Unable to access jarfile asc╣ťę.jar 
```

当目录名称中有 Unicode 字符时，也会发生同样的情况。当名称/路径不包含 Unicode 字符时，JAR 文件可以正常运行。

有没有人有同样的问题？我需要更改 Java 中的一些编码设置吗？我在哪里可以做到这一点？

我的配置：

```
Windows 7 Professional SP1 32-bit EN
Java version: 1.7.0_03 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T11:58:58.090

这似乎是[一个由来已久的问题](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4488646)：Java 启动器无法处理文件名中的 unicode 字符。

您不能重命名 JAR 或临时将其复制到一个全 ASCII 名称的文件中吗？如果您真的坚持（或被迫）在 JAR 的文件名中使用 unicode 字符，您总是可以编写自己的知道如何处理它们的启动器——Eclipse 开发人员为他们的启动器做到了这一点。但似乎太过分了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:30:47.683

**尝试 8.3 名称**

*我无法使用我的 IDE 创建“ascąś©.jar”，但我确实创建了一个名为 Unicode 的文本文件，看起来这可能有效：*

在 Windows 命令提示符处获取 8.3 文件名，然后使用该文件名代替 unicode 名称：

```
dir /x *.jar
java -jar ASC~1.JAR 
```

# java - struts-config 文件的 action 标签中的 scope 属性是什么意思？

> ID：14998510
> 
> 赞同：8
> 
> 时间：2013-02-21T09:21:41.490
> 
> 标签：java, scope, struts, struts-1, struts-config

我正在开发一个 Struts 应用程序。

为了编辑`struts-config.xml`文件，我想我必须`scope`在动作标签中添加一个属性 - 。我不确定它的含义或用法。

```
<action path="/WetsVpnSwapTraffic"
            type="com.kpn.bop.web.action.vpn.wets.WetsVpnSwapTraffic"
            scope="request"
            name="WetsVpnSwapTrafficForm"
            roles="bop_wetsvpn_migrate"
            validate="false">
        <forward name="success" path="/WetsVpnSwapTrafficValidate.do"/>
        <forward name="failure" path="/WetsVpnList.do"/>
</action> 
```

如果我必须放置这个属性，谁能解释我？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T13:30:02.707

该属性`scope`用于定义在该操作配置中使用的对象操作表单的范围（对象的生命周期、表单）。

还有不同的作用域，`page`, `request`, `session`, `application`。这一切都来自 servlet 规范。如果您指定您希望表单对象在 servlet http 请求期间可用的请求范围。

您可以查看此[参考](https://web.archive.org/web/20100215014434/http://www.jajakarta.org/struts/struts1.2/documentation/ja/target/userGuide/building_model.html#javabeans)以确定如何使用范围。

还有指向[动作映射配置](https://web.archive.org/web/20171021062122/http://www.jajakarta.org:80/struts/struts1.2/documentation/ja/target/userGuide/building_controller.html#config)的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T12:28:14.093

它确定是否`ActionForm`在请求或会话中。

# c# - 如何使用复选框和按钮从 GridView 中删除多行？

> ID：14998513
> 
> 赞同：0
> 
> 时间：2013-02-21T09:21:48.930
> 
> 标签：c#, asp.net, sql-server, visual-studio-2010, button

我的代码如下。我没有将我的数据存储在数据库中。我只是从 TextBox 中提取数据，并将其显示在 GridView 中。如何使用复选框和按钮从 GridView 中删除多行？ **//删除行的代码**

**ASPX 代码：**

```
 <asp:TemplateField>
 <ItemTemplate>
 <asp:CheckBox ID="chkdelete" runat="server" />
 </ItemTemplate>
 </asp:TemplateField> 
```

**C#代码：**

```
protected void btnDelete_Click(object sender, EventArgs e)
{
    //Loop through all the rows in gridview
    foreach(GridViewRow gvrow in gvUserDetails.Rows)
    {
        //Finiding checkbox control in gridview for particular row
        CheckBox chkdelete = (CheckBox)gvrow.FindControl("chkdelete");
        //Condition to check checkbox selected or not
        if(chkdelete.Checked)
        {
            //code for deleting the row    (What code do I write here?)
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T20:21:44.373

如果 GridView 像 DataGridView 一样工作，那么简单的`GridView.Rows.RemoveAt(index)`应该做你想要的。

编辑：在这种情况下，您不想执行*foreach*而是执行 a `for(int loop=GridView.Rows.Count - 1; loop>=0; loop--)`，而是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:26:17.013

您必须基本上删除数据库中的行或您绑定网格视图的任何此类内容。所以删除所有行，创建新的 DataSource 并再次绑定 gridview，它应该像一个魅力一样工作。

更新：由于您没有使用任何数据库，因此您仍然肯定会有一些数据源用于绑定您的 gridview，因此请修改它并再次绑定 gridview。

# url - 重定向 http://uwww。http://www

> ID：14998516
> 
> 赞同：1
> 
> 时间：2013-02-21T09:21:54.330
> 
> 标签：url, redirect

我从事 SEO 编程，但其中一个重定向存在问题。我需要将[http://uwww.example.com](http://uwww.example.com)重定向到[http://www.example.com](http://www.example.com)并将 example.com 重定向到 hhh.example.com。那可能吗？我试过了

```
<VirtualHost *:80>
    ServerName example.com
    Redirect permanent / http://www.example.com/
</VirtualHost> 
```

但它显示错误。如果有人可以帮助我，那就太好了。

# sql-server - Sql server的硬件配置

> ID：14998518
> 
> 赞同：-2
> 
> 时间：2013-02-21T09:22:00.497
> 
> 标签：sql-server, tsql

任何人都可以帮助我输出 sql server 的硬件配置的 tsql 脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:24:02.807

这会给你一些东西：

```
exec xp_msver
GO 
```

# hibernate - hibernate：如何在父时获取子集合

> ID：14998520
> 
> 赞同：0
> 
> 时间：2013-02-21T09:22:03.780
> 
> 标签：hibernate

我有 casemaster(DLawCaseMaster - parent) 类和 casemaster history (DLawCaseMasterH - child) 类。我有需要父母和孩子收集的情况。

DLawCaseMaster.java

```
public class DLawCaseMaster implements java.io.Serializable {
    //.....
    private Set<DLawCaseMasterH> DLawCaseMasterHs = new HashSet<DLawCaseMasterH>(0);
    //.....

    public Set<DLawCaseMasterH> getDLawCaseMasterHs() {
        return this.DLawCaseMasterHs;
    }

    public void setDLawCaseMasterHs(Set<DLawCaseMasterH> DLawCaseMasterHs) {
        this.DLawCaseMasterHs = DLawCaseMasterHs;
    }
} 
```

DLawCaseMaster.hbm.xml

```
<set inverse="true" name="DLawCaseMasterHs">
  <key>
    <column name="CASE_ID" not-null="true"/>
  </key>
  <one-to-many class="com.law.beans.DLawCaseMasterH"/>
</set> 
```

DLawCaseMasterH.java

```
public class DLawCaseMasterH  implements java.io.Serializable {
    private DLawCaseMasterHId id;
    private DLawCaseMaster DLawCaseMaster;

    public void setId(DLawCaseMasterHId id) {
        this.id = id;
    }
    public DLawCaseMaster getDLawCaseMaster() {
        return this.DLawCaseMaster;
    }

    public DLawCaseMaster getDLawCaseMaster() {
        return this.DLawCaseMaster;
    }

    public void setDLawCaseMaster(DLawCaseMaster DLawCaseMaster) {
        this.DLawCaseMaster = DLawCaseMaster;
    }
} 
```

DLawCaseMasterH.hbm.xml

```
<composite-id class="com.law.beans.DLawCaseMasterHId" name="id">
  <key-property name="historyId" type="long">
    <column name="HISTORY_ID"/>
  </key-property>
  <key-property name="caseId" type="long">
    <column name="CASE_ID"/>
  </key-property>
</composite-id>
<many-to-one class="com.law.beans.DLawCaseMaster" fetch="select" insert="false" name="DLawCaseMaster" update="false">
  <column name="CASE_ID" not-null="true"/>
</many-to-one> 
```

我尝试过以下策略，但每次它都返回空白列表。

```
public static List<DLawCaseMaster> getCaseListWithHistory(long userID, Date asOnDate, Date fromDate, Date toDate) {
    List<DLawCaseMaster> list = new ArrayList<DLawCaseMaster>();
    Session session = null;
    Transaction tx = null;
    try {
        session = HibernateUtil.getSessionFactory().openSession();
        tx = session.beginTransaction();
        Criteria criteria = session.createCriteria(DLawCaseMaster.class);
        criteria.add(Restrictions.isNull("disposalDate"));

        if (asOnDate == null) {
            criteria.add(Restrictions.between("disposalDate", fromDate, toDate));
        } else {
            criteria.add(Restrictions.eq("disposalDate", asOnDate));
        }
        criteria.setFetchMode("DLawUserMaster", FetchMode.JOIN).add(Restrictions.eq("DLawUserMaster.userId", userID));
        criteria.setFetchMode("DLawAdvocateMaster", FetchMode.JOIN).add(Restrictions.eq("DLawUserMaster.userId", userID));
        criteria.setFetchMode("DLawCourtMaster", FetchMode.JOIN).add(Restrictions.eq("DLawUserMaster.userId", userID));
        criteria.setFetchMode("DLawClientMaster", FetchMode.JOIN).add(Restrictions.eq("DLawUserMaster.userId", userID));
        criteria.setFetchMode("DLawCaseTypeMaster", FetchMode.JOIN).add(Restrictions.eq("DLawUserMaster.userId", userID));
        criteria.setFetchMode("DLawStageMaster", FetchMode.JOIN).add(Restrictions.eq("DLawUserMaster.userId", userID));
        // PROBLEM LINE HERE
criteria.createCriteria("DLawCaseMasterHs").add(Restrictions.eq("DLawUserMaster.userId", userID));
// PROBLEM LINE HERE

        criteria.addOrder(Order.desc("caseId"));

        list = criteria.list();
        tx.commit();
    } catch (Exception e) {
        System.out.println("Exception Message : " + e.getMessage());
        if (tx != null) {
            tx.rollback();
        }
        return list;
    } finally {
        session.close();
    }
    return list;
} 
```

如果我在此处删除**问题**行，它将返回包含 3 条记录的列表，但是在访问 DLawCaseMasterHs 时会引发异常。简而言之，它没有任何数据。

任何人都可以在接父母的同时指导我接孩子...提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:34:41.547

你试过这样吗？？

```
criteria.createAlias("DLawCaseMasterHs", "dlawCase", Criteria.LEFT_JOIN);
criteria.add(Restrictions.like("dlawCase.userId", userID)); 
```

# highcharts - Highcharts：我可以只显示一个系列的一部分吗？

> ID：14998523
> 
> 赞同：0
> 
> 时间：2013-02-21T09:22:10.693
> 
> 标签：highcharts, highstock

我有一个关于在 highstock 中显示股票数据的查询。首先：我想从 60 个月的总数据中隐藏过去 10 个月的价格。我希望显示月份（即 x 轴应该包含全部 60 个月），但希望仅显示前 50 个月的数据。其次：如果触发了一个事件（比如点击），我希望最后 10 个价格也显示出来（除了原来的 50 个）。

Highcharts/Highstock 中是否有逻辑/预处理可以使我的实现高效，这样我就不必分解我的 JSON 数据文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T13:09:51.537

因此，您可以设置 50 个点的系列，并在单击事件操作后，调用[http://api.highcharts.com/highcharts#Series.addPoint()](http://api.highcharts.com/highcharts#Series.addPoint())函数（在迭代中）添加新的点缺失值。

# salesforce - Salesforce如何在没有安全令牌的情况下使用javascript登录

> ID：14998524
> 
> 赞同：1
> 
> 时间：2013-02-21T09:22:13.673
> 
> 标签：salesforce

我已经使用以下资源为我的应用程序设置了自定义登录页面。

[http://brianpeddle.com/2011/06/06/building-a-custom-salesforce-login/](http://brianpeddle.com/2011/06/06/building-a-custom-salesforce-login/)

但是，如果用户处于不受信任的网络中，并且当用户重置密码时安全令牌会更改，则此方法需要每个用户的安全令牌。

如何设置以允许从该页面多用户登录？目前只有我能想到的是有一个额外的输入框，以便用户通过安全令牌以及用户名和密码。我想知道salesforce是否允许javascript为每个用户动态获取安全令牌

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:41:23.097

OAuth2 是一种安全实现，允许用户访问他们的 Salesforce 数据，而无需在不受信任的应用程序中输入他们的用户/密码或自己进行讨厌的令牌管理。

Salesforce 有[关于如何](http://help.salesforce.com/help/doc/en/remoteaccess_oauth_user_agent_flow.htm)为网站实施 OAuth2 的指南。如果您对 OAuth2 没有任何经验，设置起来可能会很困难，但是有很多可用的指南。

我还建议使用 Firefox 的 RESTClient 插件（或类似的插件）来测试 OAuth2 的使用，以感受针对 Salesforce 的身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T09:42:12.887

使用此代码仅登录：

```
https://login.salesforce.com?un="+username+"&pw="+password+"&startURL=/apex/somepage 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T11:36:57.990

您确定您已将 IP 列入白名单吗？

我坚信，如果您获得托管自定义登录页面的服务器 IP 并将其放入白名单 IP 列表中，那么用户将不需要输入他们的安全令牌。

找到您的服务器的 ip（您的页面所在的位置） - 尝试使用您的自定义登录页面登录 - 登录 SFDC 并转到设置 -> 用户配置文件 -> 登录历史

在那里你会看到最后一次从IP登录

复制上面的IP和

再次进入设置 -> 安全控制 -> 远程站点设置

并添加上面复制的IP。

这样，当用户从该 IP 登录时，SF 将不需要安全令牌。

[http://ap1.salesforce.com/help/doc/en/configuring_remoteproxy.htm](http://ap1.salesforce.com/help/doc/en/configuring_remoteproxy.htm)

# xml - 为每个 xml 行循环一个翻译文件

> ID：14998527
> 
> 赞同：0
> 
> 时间：2013-02-21T09:22:16.293
> 
> 标签：xml, xslt

很明显，我对 XML 和 XSLT 的了解相当有限。请有人可以帮助我提供一个翻译文件，该文件将允许传递以下 XML 中的每个 ItemNumber/Sales Order，以便为每个项目生成第二个 XML。换句话说，我需要生成多个输出 xml（每个销售订单一个）。目前，我只为初始 xml 上的最后一个行项目/销售订单获得一个输出 xml。

这是我需要翻译的xml：

```
<?xml version="1.0" encoding="Windows-1252"?>
<postsalesorderssct Language='05' Language2='EN' CssStyle='' DecFormat='1' DateFormat='01' Role='01' Version='6.1.009' OperatorPrimaryRole='   '>
    <Item>
        <Key>
            <SalesOrder>197588</SalesOrder>
            <SourceWarehouse>A3</SourceWarehouse>
            <TargetWarehouse>PV</TargetWarehouse>
            <CustomerPoNumber/>
        </Key>
        <ItemNumber>000001</ItemNumber>
    </Item>
    <Item>
        <Key>
            <SalesOrder>197589</SalesOrder>
            <SourceWarehouse>A3</SourceWarehouse>
            <TargetWarehouse>HI</TargetWarehouse>
            <CustomerPoNumber/>
        </Key>
        <ItemNumber>000002</ItemNumber>
    </Item>
    <Item>
        <Key>
            <SalesOrder>197590</SalesOrder>
            <SourceWarehouse>A3</SourceWarehouse>
            <TargetWarehouse>WS</TargetWarehouse>
            <CustomerPoNumber/>
        </Key>
        <ItemNumber>000003</ItemNumber>
    </Item>
    <Item>
        <Key>
            <SalesOrder>197591</SalesOrder>
            <SourceWarehouse>A4</SourceWarehouse>
            <TargetWarehouse>HI</TargetWarehouse>
            <CustomerPoNumber/>
        </Key>
        <ItemNumber>000004</ItemNumber>
    </Item>
    <Item>
        <Key>
            <SalesOrder>197592</SalesOrder>
            <SourceWarehouse>A4</SourceWarehouse>
            <TargetWarehouse>PV</TargetWarehouse>
            <CustomerPoNumber/>
        </Key>
        <ItemNumber>000005</ItemNumber>
    </Item>
    <Item>
        <Key>
            <SalesOrder>197593</SalesOrder>
            <SourceWarehouse>A4</SourceWarehouse>
            <TargetWarehouse>WS</TargetWarehouse>
            <CustomerPoNumber/>
        </Key>
        <ItemNumber>000006</ItemNumber>
    </Item>
    <StatusOfItems>
        <ItemsProcessed>000006</ItemsProcessed>
        <ItemsInvalid>000000</ItemsInvalid>
    </StatusOfItems>
</postsalesorderssct> 
```

这是我目前使用的翻译文件：

```
 <?xml version="1.0" ?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="xml" encoding="Windows-1252" omit-xml-declaration="yes" />
<xsl:template match="/">
<Query>
 <Key>
  <xsl:for-each select = "postsalesorderssct/Item/Key">
       <SalesOrder><xsl:value-of select="SalesOrder"/></SalesOrder>
  </xsl:for-each>
 </Key>
</Query>
</xsl:template>
</xsl:stylesheet> 
```

这是初始 xml 中每个 ItemNumbers 所需的输出。换句话说，我需要为每个销售订单号生成其中一个：

```
<Query xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance" xsd:noNamespaceSchemaLocation="SORQRY.XSD">
    <Key>
        <SalesOrder>197588</SalesOrder>
        <Invoice/>
    </Key>
    <Option>
        <IncludeStockedLines>Y</IncludeStockedLines>
        <IncludeNonStockedLines>Y</IncludeNonStockedLines>
        <IncludeFreightLines>Y</IncludeFreightLines>
        <IncludeMiscLines>Y</IncludeMiscLines>
        <IncludeCommentLines>Y</IncludeCommentLines>
        <IncludeCompletedLines>Y</IncludeCompletedLines>
        <IncludeSerials>N</IncludeSerials>
        <IncludeLots>Y</IncludeLots>
        <IncludeBins>Y</IncludeBins>
        <IncludeAttachedItems>N</IncludeAttachedItems>
        <IncludeCustomForms>Y</IncludeCustomForms>
        <IncludeDetailLineCustomForms>Y</IncludeDetailLineCustomForms>
        <XslStylesheet/>
    </Option>
</Query> 
```

感谢你在期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:13:10.237

如果您可以使用 XSLT 2.0，以下应该可以工作...

**XML 输入**

```
<postsalesorderssct Language='05' Language2='EN' CssStyle='' DecFormat='1' DateFormat='01' Role='01' Version='6.1.009' OperatorPrimaryRole='   '>
    <Item>
        <Key>
            <SalesOrder>197588</SalesOrder>
            <SourceWarehouse>A3</SourceWarehouse>
            <TargetWarehouse>PV</TargetWarehouse>
            <CustomerPoNumber/>
        </Key>
        <ItemNumber>000001</ItemNumber>
    </Item>
    <Item>
        <Key>
            <SalesOrder>197589</SalesOrder>
            <SourceWarehouse>A3</SourceWarehouse>
            <TargetWarehouse>HI</TargetWarehouse>
            <CustomerPoNumber/>
        </Key>
        <ItemNumber>000002</ItemNumber>
    </Item>
    <Item>
        <Key>
            <SalesOrder>197590</SalesOrder>
            <SourceWarehouse>A3</SourceWarehouse>
            <TargetWarehouse>WS</TargetWarehouse>
            <CustomerPoNumber/>
        </Key>
        <ItemNumber>000003</ItemNumber>
    </Item>
    <Item>
        <Key>
            <SalesOrder>197591</SalesOrder>
            <SourceWarehouse>A4</SourceWarehouse>
            <TargetWarehouse>HI</TargetWarehouse>
            <CustomerPoNumber/>
        </Key>
        <ItemNumber>000004</ItemNumber>
    </Item>
    <Item>
        <Key>
            <SalesOrder>197592</SalesOrder>
            <SourceWarehouse>A4</SourceWarehouse>
            <TargetWarehouse>PV</TargetWarehouse>
            <CustomerPoNumber/>
        </Key>
        <ItemNumber>000005</ItemNumber>
    </Item>
    <Item>
        <Key>
            <SalesOrder>197593</SalesOrder>
            <SourceWarehouse>A4</SourceWarehouse>
            <TargetWarehouse>WS</TargetWarehouse>
            <CustomerPoNumber/>
        </Key>
        <ItemNumber>000006</ItemNumber>
    </Item>
    <StatusOfItems>
        <ItemsProcessed>000006</ItemsProcessed>
        <ItemsInvalid>000000</ItemsInvalid>
    </StatusOfItems>
</postsalesorderssct> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/postsalesorderssct/Item">
        <xsl:result-document href="{Key/SalesOrder}.xml">
            <Query xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance" xsd:noNamespaceSchemaLocation="SORQRY.XSD">
                <Key>
                    <xsl:copy-of select="Key/SalesOrder"/>
                    <Invoice/>
                </Key>
                <Option>
                    <IncludeStockedLines>Y</IncludeStockedLines>
                    <IncludeNonStockedLines>Y</IncludeNonStockedLines>
                    <IncludeFreightLines>Y</IncludeFreightLines>
                    <IncludeMiscLines>Y</IncludeMiscLines>
                    <IncludeCommentLines>Y</IncludeCommentLines>
                    <IncludeCompletedLines>Y</IncludeCompletedLines>
                    <IncludeSerials>N</IncludeSerials>
                    <IncludeLots>Y</IncludeLots>
                    <IncludeBins>Y</IncludeBins>
                    <IncludeAttachedItems>N</IncludeAttachedItems>
                    <IncludeCustomForms>Y</IncludeCustomForms>
                    <IncludeDetailLineCustomForms>Y</IncludeDetailLineCustomForms>
                    <XslStylesheet/>
                </Option>
            </Query>        
        </xsl:result-document>      
    </xsl:template>

</xsl:stylesheet> 
```

这将为您提供每个`Item`. 文件的名称将是`SalesOrder`.

几个例子...

**197588.xml**

```
<Query xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance"
       xsd:noNamespaceSchemaLocation="SORQRY.XSD">
   <Key>
      <SalesOrder>197588</SalesOrder>
      <Invoice/>
   </Key>
   <Option>
      <IncludeStockedLines>Y</IncludeStockedLines>
      <IncludeNonStockedLines>Y</IncludeNonStockedLines>
      <IncludeFreightLines>Y</IncludeFreightLines>
      <IncludeMiscLines>Y</IncludeMiscLines>
      <IncludeCommentLines>Y</IncludeCommentLines>
      <IncludeCompletedLines>Y</IncludeCompletedLines>
      <IncludeSerials>N</IncludeSerials>
      <IncludeLots>Y</IncludeLots>
      <IncludeBins>Y</IncludeBins>
      <IncludeAttachedItems>N</IncludeAttachedItems>
      <IncludeCustomForms>Y</IncludeCustomForms>
      <IncludeDetailLineCustomForms>Y</IncludeDetailLineCustomForms>
      <XslStylesheet/>
   </Option>
</Query> 
```

**197592.xml**

```
<Query xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance"
       xsd:noNamespaceSchemaLocation="SORQRY.XSD">
   <Key>
      <SalesOrder>197592</SalesOrder>
      <Invoice/>
   </Key>
   <Option>
      <IncludeStockedLines>Y</IncludeStockedLines>
      <IncludeNonStockedLines>Y</IncludeNonStockedLines>
      <IncludeFreightLines>Y</IncludeFreightLines>
      <IncludeMiscLines>Y</IncludeMiscLines>
      <IncludeCommentLines>Y</IncludeCommentLines>
      <IncludeCompletedLines>Y</IncludeCompletedLines>
      <IncludeSerials>N</IncludeSerials>
      <IncludeLots>Y</IncludeLots>
      <IncludeBins>Y</IncludeBins>
      <IncludeAttachedItems>N</IncludeAttachedItems>
      <IncludeCustomForms>Y</IncludeCustomForms>
      <IncludeDetailLineCustomForms>Y</IncludeDetailLineCustomForms>
      <XslStylesheet/>
   </Option>
</Query> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T21:39:33.203

正如 Daniel 所演示的，使用 XSLT 2.0 实现这一点相当简单。不幸的是，据我所知，使用纯 XSLT 1.0 是不可能的，但如果您愿意更加努力地工作，您可以达到相同的结果。

（无论如何，我都不会称其为优雅的解决方案，但这是我在没有 XSLT 2.0 的情况下解决此问题的第一种方法。）

我不知道您使用的是哪个 XSLT 处理器，所以我将使用`xsltproc`.

您可以首先使用这样的样式表来创建一个包含所有`<Query>`元素的 XML 文件（用 调用它`xsltproc allQuery.xsl input.xml`）：

```
 <!-- allQuery.xsl -->

    <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
      xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance">
      <xsl:output method="xml" encoding="Windows-1252" omit-xml-declaration="yes" indent="yes"/>

      <xsl:template match="/">
        <Queries>
            <xsl:apply-templates select="postsalesorderssct/Item/Key/SalesOrder"/>
        </Queries>
      </xsl:template>

      <xsl:template match="SalesOrder">
        <xsl:variable name="id" select="."/>
          <Query xsd:noNamespaceSchemaLocation="SORQRY.XSD">
            <Key>
              <xsl:copy>
                <xsl:apply-templates/>
              </xsl:copy>
              <Invoice/>
            </Key>
            <Option>
                <IncludeStockedLines>Y</IncludeStockedLines>
                <IncludeNonStockedLines>Y</IncludeNonStockedLines>
                <IncludeFreightLines>Y</IncludeFreightLines>
                <IncludeMiscLines>Y</IncludeMiscLines>
                <IncludeCommentLines>Y</IncludeCommentLines>
                <IncludeCompletedLines>Y</IncludeCompletedLines>
                <IncludeSerials>N</IncludeSerials>
                <IncludeLots>Y</IncludeLots>
                <IncludeBins>Y</IncludeBins>
                <IncludeAttachedItems>N</IncludeAttachedItems>
                <IncludeCustomForms>Y</IncludeCustomForms>
                <IncludeDetailLineCustomForms>Y</IncludeDetailLineCustomForms>
                <XslStylesheet/>
            </Option>
          </Query>
      </xsl:template>
    </xsl:stylesheet> 
```

然后你可以有另一个像这样的简单样式表：

```
<!-- extractQuery.xsl -->

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance">

  <xsl:output method="xml" encoding="Windows-1252" omit-xml-declaration="yes" indent="yes"/>

  <!-- The sales order number you pass in on the command line. -->
  <xsl:param name="salesOrderNo"/>

  <xsl:template match="/">
    <!--
    Only apply the <Query> element with a <SalesOrder> descendant that has 
    $salesOrderNo as its text content -- in the case of this example, 197593.
    --> 
    <xsl:apply-templates select="Queries/Query[descendant::SalesOrder[. = $salesOrderNo]]"/>
  </xsl:template>

  <!-- Identity template -->
  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

您可以像这样使用此样式表，将您想要获取`xsltproc`的元素的 SalesOrder 编号作为参数传递给样式表：`<Query>`

```
xsltproc --stringparam salesOrderNo 197593 extractQuery.xsl output.xml 
```

这将产生以下输出：

```
<Query xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance" xsd:noNamespaceSchemaLocation="SORQRY.XSD">
  <Key>
    <SalesOrder>197593</SalesOrder>
    <Invoice/>
  </Key>
  <Option>
    <IncludeStockedLines>Y</IncludeStockedLines>
    <IncludeNonStockedLines>Y</IncludeNonStockedLines>
    <IncludeFreightLines>Y</IncludeFreightLines>
    <IncludeMiscLines>Y</IncludeMiscLines>
    <IncludeCommentLines>Y</IncludeCommentLines>
    <IncludeCompletedLines>Y</IncludeCompletedLines>
    <IncludeSerials>N</IncludeSerials>
    <IncludeLots>Y</IncludeLots>
    <IncludeBins>Y</IncludeBins>
    <IncludeAttachedItems>N</IncludeAttachedItems>
    <IncludeCustomForms>Y</IncludeCustomForms>
    <IncludeDetailLineCustomForms>Y</IncludeDetailLineCustomForms>
    <XslStylesheet/>
  </Option>
</Query> 
```

`xsltproc`然后，您需要为要为其创建 XML 文件的每个销售订单号调用一次。一种方法是创建*另一个*XSLT 样式表：

```
<!-- getSalesOrderNos.xsl -->

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance">

  <xsl:output method="text" encoding="Windows-1252" omit-xml-declaration="yes"/>

  <xsl:template match="/">
    <xsl:apply-templates select="Queries/Query/Key/SalesOrder"/>
  </xsl:template>

  <xsl:template match="SalesOrder">
    <xsl:value-of select="."/><xsl:text>
</xsl:text>
  </xsl:template>

</xsl:stylesheet> 
```

这将打印出所有销售订单号的换行符列表。然后，您可以将它与这样的 Bash 脚本一起使用：

```
xsltproc getSalesOrderNos.xsl output.xml | xargs -L1 -I no xsltproc \
-o SalesOrder-no.xml --stringparam salesOrderNo no extractQuery.xsl output.xml 
```

本质上，这将打印出所有销售订单编号的列表，`output.xml`并为每个编号运行`extractQuery.xsl`一次——将编号作为参数传递给`extractQuery.xsl`——并为每次转换的结果创建一个新文件（称为`SalesOrder-<ordernumber>.xml`）。如：

```
<!-- SalesOrder-197588.xml -->

<Query xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance" xsd:noNamespaceSchemaLocation="SORQRY.XSD">
  <Key>
    <SalesOrder>197588</SalesOrder>
    <Invoice/>
  </Key>
  <Option>
    <IncludeStockedLines>Y</IncludeStockedLines>
    <IncludeNonStockedLines>Y</IncludeNonStockedLines>
    <IncludeFreightLines>Y</IncludeFreightLines>
    <IncludeMiscLines>Y</IncludeMiscLines>
    <IncludeCommentLines>Y</IncludeCommentLines>
    <IncludeCompletedLines>Y</IncludeCompletedLines>
    <IncludeSerials>N</IncludeSerials>
    <IncludeLots>Y</IncludeLots>
    <IncludeBins>Y</IncludeBins>
    <IncludeAttachedItems>N</IncludeAttachedItems>
    <IncludeCustomForms>Y</IncludeCustomForms>
    <IncludeDetailLineCustomForms>Y</IncludeDetailLineCustomForms>
    <XslStylesheet/>
  </Option>
</Query> 
```

As I said, it's not pretty by any means. Depending on what tools you have access to, you might simplify this process quite a bit (e.g. use something else than XSLT to extract the list of sales order numbers and proceed from there).

# python - 输出操作数需要归约，但没有启用归约 Python

> ID：14998530
> 
> 赞同：3
> 
> 时间：2013-02-21T09:22:21.463
> 
> 标签：python, arrays, numpy, scipy

```
import numpy as np
from numpy.linalg import solve,norm,cond,inv,pinv
import math
import matplotlib.pyplot as plt
from scipy.linalg import toeplitz
from numpy.random import rand

c = np.zeros(512)
c[0] = 2
c[1] = -1
a = c
A = toeplitz(c,a)

cond_A = cond(A,2)

# creating 10 random vectors 512 x 1
b = rand(10,512)

# making b into unit vector
for i in range (10):
    b[i]= b[i]/norm(b[i],2)

# creating 10 random del_b vectors 
del_b = [rand(10,512), rand(10,512), rand(10,512), rand(10,512), rand(10,512), rand(10,512), rand(10,512), rand(10,512), rand(10,512), rand(10,512)] 

# del_b = 10 sets of 10 vectors (512x1) whose norm is 0.01,0.02 ~0.1
for i in range(10):
    for j in range(10):
        del_b[i][j] = del_b[i][j]/(norm(del_b[i][j],2)/((float(j+1)/100)))

x_in = [np.zeros(512), np.zeros(512), np.zeros(512), np.zeros(512), np.zeros(512), np.zeros(512), np.zeros(512), np.zeros(512), np.zeros(512), np.zeros(512)]

x2 = np.zeros((10,10,512))
for i in range(10):
    x_in[i] =  A.transpose()*b[i]

for i in range(10):
    for j in range(10):
        x2[i][j] = ((A.transpose()*(b[i]+del_b[i][j])) 
```

最后一行给了我错误。（输出操作数需要减少，但未启用减少）我该如何解决？我是 python 新手，如果有更简单的方法，请告诉我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-30T12:16:44.847

您看到的错误是因为您创建的内容的尺寸不匹配，但是您的代码在所有循环中效率也很低，并且没有最佳地利用 Numpy 的自动广播。我已经重写了代码来做你想做的事情：

```
import numpy as np
from numpy.linalg import solve,norm,cond,inv,pinv
import math
import matplotlib.pyplot as plt
from scipy.linalg import toeplitz
from numpy.random import rand

# These should probably get more sensible names
Nvec = 10 # number of vectors in b
Nlevels = 11 # number of perturbation norm levels
Nd = 512 # dimension of the vector space

c = np.zeros(Nd)
c[0] = 2
c[1] = -1
a = c

# NOTE: I'm assuming you want A to be a matrix
A = np.asmatrix(toeplitz(c, a)) 

cond_A = cond(A,2)

# create Nvec random vectors Nd x 1
# Note: packing the vectors in the columns makes the next step easier
b = rand(Nd, Nvec)

# normalise each column of b to be a unit vector
b /= norm(b, axis=0)

# create Nlevels of Nd x Nvec random del_b vectors 
del_b = rand(Nd, Nvec, Nlevels)

# del_b = 10 sets of 10 vectors (512x1) whose norm is 0.01,0.02 ~0.1
targetnorms = np.linspace(0.01, 0.1, Nlevels)
# cause the norms in the Nlevels dimension to be equal to the target norms
del_b /= norm(del_b, axis=0)[None, :, :]/targetnorms[None, None, :]

# Straight linear transformation - make sure you actually want the transpose
x_in = A.T*b

# same linear transformation on perturbed versions of b
x2 = np.zeros((Nd, Nvec, Nlevels))
for i in range(Nlevels):
    x2[:, :, i] = A.T*(b + del_b[:, :, i]) 
```

# javascript - 如何使用 jQuery 的 .each() 获取更多 div？

> ID：14998531
> 
> 赞同：1
> 
> 时间：2013-02-21T09:22:21.747
> 
> 标签：javascript, jquery

```
var selectedElmt=$("#sample1Div"); 
```

我必须`selectedElmt`在 for 循环中使用

```
for(var val in publicationDatesList)
{

//my code

} 
```

如何将此 for 循环应用于更多选择器？

例如，我有更多的选择器，例如`sample2Div`, `sample3Div`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:24:29.287

要组合选择器，您可以在单个选择器中用空格分隔它们：

```
var group = $('#foo, #bar'); 
```

或者您可以使用[`.add`](http://api.jquery.com/add/)将新 jQuery 对象的内容合并到前一个对象中：

```
var group = $('#foo').add('#bar'); 
```

要遍历这些，最简单的解决方案是`.each`：

```
group.each(function() {
   // "this" is now the required element
   // wrap with $(this) if you want to call jQuery functions on it
   ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:24:59.583

全选（用逗号分隔）并使用`.each`，例如：

```
$("#sample1Div, #sample2div, #sample3div").each(function(index, eachObject){
    // do something, example :
    alert($(eachObject).html());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:27:06.137

您可以将**.each**函数与多个元素选择器一起使用。

```
$("#sample1Div, #sample2Div, #sample3Div").each(function(i, k){
    // do something
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:36:13.853

如果你给那个 div 相同的类，例如：class="sampleDiv"，你可以这样做：

```
$.each($(".sampleDiv"), function(index, element){

   //do what you want with each element

}); 
```

# java - Java Swing ActionListener 不工作

> ID：14998534
> 
> 赞同：0
> 
> 时间：2013-02-21T09:22:28.377
> 
> 标签：java, swing, actionlistener

谁能帮助解释为什么这不起作用？

```
 menuItem = new JMenuItem("Document");
                menuItem.addActionListener(new ActionListener()
                        {
                            public void actionPerformed(ActionEvent e)
                            {
                                System.out.println("button clicked!");
                            }
                        });
        submenu.add(menuItem); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:25:23.730

```
menuItem = new JMenuItem("Document");
    menuItem.addActionListener(new ActionListener()
            menuItem.addActionListener(new ActionListener()   //You don't need it again.
                    {
                        public void actionPerformed(ActionEvent e)
                        {
                            System.out.println("button clicked!");
                        }
                    });
    submenu.add(menuItem); 
```

试试这个：

```
menuItem = new JMenuItem("Document");
    menuItem.addActionListener(new ActionListener()
                    {
                        public void actionPerformed(ActionEvent e)
                        {
                            System.out.println("button clicked!");
                        }
                    });
    submenu.add(menuItem); 
```

# facebook - Graph api explorer - 什么是“with”修饰符

> ID：14998535
> 
> 赞同：3
> 
> 时间：2013-02-21T09:22:32.433
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-field-expansion

在[Facebook Graph API explorer](https://developers.facebook.com/tools/explorer)中，有一个“with”修饰符（以及 since、filter、limit 等）。
这有什么用途？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:27:58.557

您可以使用`with`修饰符过滤包含附加位置的帖子。

来自[脸书](https://developers.facebook.com/docs/reference/api/user/#home)：

`You can retrieve only posts with a location attached by adding with=location to the URL parameters:`

[https://graph.facebook.com/me/home?with=location](https://graph.facebook.com/me/home?with=location)

适用于提要（墙帖）、帖子（用户自己的帖子）和主页（新闻提要）。

# c - 替换所有选项卡的代码以及单个空格是否超过 1 个空格？

> ID：14998537
> 
> 赞同：1
> 
> 时间：2013-02-21T09:22:39.710
> 
> 标签：c

这个问题在[K&R](http://www.amazon.co.uk/C-Programming-Language-2nd/dp/0131103628/)的练习 1.9 中。我写了以下代码：

```
#include<stdio.h>
main()
{
    int c,i=0,n=0;
    while((c=getchar())!=EOF)
    {
         if(c!=' '||c!='\t')
         {
             i=0;
             putchar(c);
         }
         else if(c==' '||c=='\t')
         {
              i++
         }
         if((c+1)!=' '||(c+1)!='\t')
               n=i;
         if(n!=0)
        {
               c=' ';
               putchar(c);
        }
    }
} 
```

但我无法获得所需的输出。我在 ubuntu 中使用 gcc。当我输入类似`hello\t\ta`输入的内容时，我的输出是，`hello\_\_a`即选项卡数被空格数替换，当我输入时，`hello\_\_a`我的输出与输入相同。

请帮助我或建议我一些新的东西以获得所需的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:47:30.997

与其给你完整的工作计划，我更愿意引导你走向正确的方向。

首先，`c+1`并不意味着“输入中的下一个字符”。它只会增加`1`的值`c`，从而有效地转换为[ASCII 表](http://web.cs.mun.ca/~michael/c/ascii-table.html)`c`中的下一个字符。例如 if is ，表示，它是[ASCII 表](http://web.cs.mun.ca/~michael/c/ascii-table.html)中的下一个字符，并且 if is （单个空格）在表中具有代码 32，在表中具有代码 33。`c``'a'``c+1``'b'``c``' '``c+1``'!'`

好吧，要获得下一个角色，您需要阅读它！以同样的方式阅读第一个字符。实现这一点的最佳方法是始终保持先前读取的字符，并与当前读取的字符进行检查。

因此，您需要两个变量，例如`c`和`pc`。您读取字符并将其存储在`c`. 起初，`pc`是`'\0'`。如果读取的字符不是空格或制表符，则将其写入输出。如果是制表符，则将其更改为空格。如果是空格，则检查前一个字符 ( `pc`)。如果不是空格，请打印`c`. 在循环结束时，您应该存储`c`into的值`pc`，这意味着您将前一个字符保存在`pc`.

我想我告诉你完整的解决方案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:32:06.460

问题是：你想检查 NEXT 字符，但你检查当前字符的值加一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T10:34:12.110

做法稍有错误，这里提示一下，保持最后一个字符为*state*，如果新输入的字符是空格，最后一个字符是空格，则不输出，直接返回循环等待下一个字符。

如果当前字符不是空格，则输出并更新*状态*...

# c# - 在 3 层架构中放置 try/catch 的位置

> ID：14998539
> 
> 赞同：6
> 
> 时间：2013-02-21T09:22:44.247
> 
> 标签：c#, try-catch, 3-tier

我有一个基于 3 层的 Web 应用程序。我想使用我在业务逻辑层中使用 try catch 块。在业务逻辑中使用 try/catch 块是否正确，或者我需要在我的 UI 层中使用它？

请参阅我的 DAL 代码。

```
Data Access Layer

#region Insert in to Logbook
public int Insert_LogBook(string Vehicle_Number, DateTime Vehicle_Booking_Date, TimeSpan Time_From, TimeSpan Time_To, int KM_Start, int KM_End, string Vehicle_Used_By, string Cost_Code, string Budget_Line, DateTime Entry_Date)
{
    try
    {
        SqlCommand com = new SqlCommand("Insert_LogBook", con);
        com.Parameters.Add("@Vehicle_Number", SqlDbType.NVarChar, 100).Value = Vehicle_Number;
        com.Parameters.Add("@Vehicle_Booking_Date", SqlDbType.DateTime).Value = Vehicle_Booking_Date;
        com.Parameters.Add("@Time_From", SqlDbType.Time).Value = Time_From;
        com.Parameters.Add("@Time_To", SqlDbType.Time).Value = Time_To;
        com.Parameters.Add("@KM_Start", SqlDbType.Int).Value = KM_Start;
        com.Parameters.Add("@KM_End", SqlDbType.Int).Value = KM_End;
        com.Parameters.Add("@Vehicle_Used_Byr", SqlDbType.VarChar, 100).Value = Vehicle_Used_By;
        com.Parameters.Add("@Cost_Code", SqlDbType.NVarChar, 50).Value = Cost_Code;
        com.Parameters.Add("@Budget_Line", SqlDbType.NVarChar, 50).Value = Budget_Line;
        com.Parameters.Add("@Entry_Date", SqlDbType.DateTime).Value = Entry_Date;
        con.Open();
        int res = com.ExecuteNonQuery();

    }
    catch (Exception ex)
    {
        WebMsgBox.Show(ex.Message);
    }
    finally
    {
        con.Close();
        con.Dispose();

    }
    return 1;
}
#endregion 
```

所以我应该在我的 bal 或 UI 层中使用它还是我的代码没问题。因为如果我不在我的 UI 层中使用 try/catch，它将不会捕获异常（如果有的话）并显示错误页面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T10:04:03.413

异常处理和抛出是我一直以来都被我所合作过的大多数开发人员所误解的东西。

*   异常允许您在代码中找到错误。
*   他们停止正在运行的程序以防止对业务造成“伤害”。
*   它们允许您在合理预期的异常（移动应用程序上的网络不可用）和意外的错误异常（如 NullReferenceException）之间进行过滤。
*   他们直截了当地了解为什么会发生错误。
*   它们允许每个组件添加一层关于上下文和状态的信息来帮助调试，这就是 catch、wrap 和 throw 模式。

您可以而且应该在几乎任何地方使用 try/catch/(finally)，但是...

仅当您知道哪些异常可能发生并且可以从中恢复时才使用 catch。您应该很少捕获基本异常类型。允许所有其他错误冒泡并被程序员/测试人员/用户发现。

如果要抛出另一个异常并将原始异常附加为 InnerException，则可能需要捕获基本异常类型。

您不应该三思而后行，也不要懒于创建自己的异常类型。例如，您可能想要编写一个 DataAccessException 并抛出该异常，并在附加在 InnerException 的层中捕获异常。这样，您的日志记录将记录一个异常类型，该类型可以更准确地显示错误发生的位置，并且调用代码可以选择仅捕获 DataAccessException 并执行重试或其他操作。

您还可以考虑将 DataAccessException 抽象化并将更具体的异常子类化，例如 SqlDataAccessException 或 SecurityDataAccessException。

如您所知，当您想确保在发生错误时运行某些代码时使用 finally，即使您不捕获和处理异常本身。在必须始终释放资源的情况下，try/finally 成为标准模式。

此外，如果可能，请将 try/catch 放在您能够处理错误的最具体的代码补丁周围，从而允许周围代码中的编码错误导致应用程序崩溃。

你可能会想，“如果我还不知道会抛出哪些异常，我怎么能捕捉到一个特定的异常呢？” 您应该看到它们记录在 ExecuteNonSql 方法中，这就是为什么记录您自己的 API/组件及其引发的异常如此重要的原因。使用 XML 注释来执行此操作，如果提供公共 DLL，请打开 XML 注释文件生成器。

这似乎需要接受很多，但实际上并非如此。当您投资于日志记录和适当的异常处理/抛出时，您将能够在几分钟内解决错误，您会感觉自己是冠军，并且您很快就会学会对其他人的糟糕代码感到不满 :)

在你编程生涯的这个阶段，我强烈推荐阅读Cwalina 和 Abrams 的**框架设计指南**。它将帮助您针对所有这些类型的问题快速做出正确的选择，并且您会发现使用自己的代码与使用 Microsoft 的 API（大部分情况下）一样令人愉快。

卢克

添加一些关于消息的内容。我在错误消息中使用了这种东西。

“无法{执行某些功能}。发生了{异常类型}。{提供补救建议或错误的常见原因}。请参阅{内部异常|更多日志条目}。”

例如，在应用程序中自动保存状态的组件中：

```
...
catch(FileNotFoundException fnfe)
{
    string m = String.Format("Cannot save changes. A FileNotFoundException occurred. Check the path '{0}' is valid, that your network is up, and any removable media is available. Please see inner exception.", path);

    _log.Error(m, fnfe);

    throw new StorageLifecycleException(m, fnfe);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-21T09:27:31.987

这取决于，您可以`try catch`在两层中使用块。

但问题不在于您在哪里使用异常处理代码；问题是你如何使用。在您提供的示例中，您正在捕获一个泛型`exception`，您不知道它是 SqlException 还是任何其他异常。

一般来说，

1.  仅捕获您可以处理的异常（在示例中 catch `SqlException`，不是所有异常）

2.  显示用户友好的消息（在您的示例中，仅显示错误消息对用户没有意义）

3.  记录异常

4.  处理发生的异常；如果是 DAL 相关异常，则在 DAL 层处理，如果是 UI 相关异常，则在 UI 层处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T09:27:05.087

您应该编写一个 try-catch 块来处理异常。没有“总是把try-catch放在这里或那里”这样的事情。我看到你处理这样的异常：

```
catch (Exception ex)
{
    WebMsgBox.Show(ex.Message);
} 
```

这很糟糕，有几个原因：

1.  你抓住了泛型`Exception`类型。前几天看到一个关于这个的问题：[https ://stackoverflow.com/a/14727026/238682](https://stackoverflow.com/a/14727026/238682)
2.  您尝试`WebMsgBox.Show`在数据访问层内处理异常，这打破了层的边界。

该示例的另一个问题是一个小问题，但我认为从长远来看它很重要（整体代码设计）。您应该将错误处理逻辑与实际应用程序逻辑分开。因此，当您使用 try-catch 块时，请尽量减少其中的逻辑，从而使您的代码变得更具可读性。

```
public int Insert_LogBook(string Vehicle_Number, DateTime Vehicle_Booking_Date, TimeSpan Time_From, TimeSpan Time_To, int KM_Start, int KM_End, string Vehicle_Used_By, string Cost_Code, string Budget_Line, DateTime Entry_Date)
{
    using(SqlCommand com = new SqlCommand("Insert_LogBook", con))
    {
        com.Parameters.Add("@Vehicle_Number", SqlDbType.NVarChar, 100).Value = Vehicle_Number;
        com.Parameters.Add("@Vehicle_Booking_Date", SqlDbType.DateTime).Value = Vehicle_Booking_Date;
        com.Parameters.Add("@Time_From", SqlDbType.Time).Value = Time_From;
        com.Parameters.Add("@Time_To", SqlDbType.Time).Value = Time_To;
        com.Parameters.Add("@KM_Start", SqlDbType.Int).Value = KM_Start;
        com.Parameters.Add("@KM_End", SqlDbType.Int).Value = KM_End;
        com.Parameters.Add("@Vehicle_Used_Byr", SqlDbType.VarChar, 100).Value = Vehicle_Used_By;
        com.Parameters.Add("@Cost_Code", SqlDbType.NVarChar, 50).Value = Cost_Code;
        com.Parameters.Add("@Budget_Line", SqlDbType.NVarChar, 50).Value = Budget_Line;
        com.Parameters.Add("@Entry_Date", SqlDbType.DateTime).Value = Entry_Date;
        con.Open();
        int res = com.ExecuteNonQuery();

        return 1;
    }

}

public void SomeMethodWhichUsesThatInsert()
{
    try
    {
        //call Insert_LogBook
    }
    catch(SomeException e)
    {
        //handle
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:26:57.517

您应该将数据访问和业务逻辑放入类库中。您不应该从 BLL 或 DAL 调用前端组件。在您的 BLL 和 DAL 日志中创建日志记录，使用类似 log4net 的内容将错误数据放在这里。

如果要通知用户错误状态，则向上抛出异常。

# browser - 用不可读的字体替换浏览器字体

> ID：14998544
> 
> 赞同：0
> 
> 时间：2013-02-21T09:23:04.757
> 
> 标签：browser, fonts

我有一个显示很多客户私人信息的网络应用程序。当我在演讲和演示中展示应用程序时，我经常被要求展示真实和实时的应用程序（对实际使用更有信心，比演示拥有更多的用户和真实数据等）。由于前面提到的隐私问题，这让我感到不舒服。任何想法？例如，可以用一些“模糊”字体更改默认浏览器字体吗？或任何其他不涉及应用程序中巨大的全球变化的聪明想法..谢谢

# c# - 测试超过执行超时时间

> ID：14998554
> 
> 赞同：2
> 
> 时间：2013-02-21T09:23:44.780
> 
> 标签：c#, unit-testing

我的 main.cs 代码：

```
 public string Generate(int length)
 {
     char[] chars = "$%#@!*abcdefghijklmnopqrstuvwxyz1234567890?;:ABCDEFGHIJKLMNOPQRSTUVWXYZ^&".ToCharArray();
     string password = string.Empty;
     Random random = new Random();

     for (int i = 0; i < length; i++)
     {
         int x = random.Next(1, chars.Length);

         if (!password.Contains(chars.GetValue(x).ToString()))
             password += chars.GetValue(x);
         else
             i--;
     }
     return password;
 } 
```

我做了一个测试代码

```
[TestMethod]
[Timeout(1000)]
public void RenderingPasswordShouldHaveMaximumSize()
{
    var amountOfCharacters = Int32.MaxValue;
    var generator = new PasswordGenerator();
    var target = generator.Generate(amountOfCharacters);

    Assert.Fail("This method should throw an exception if you try to create a password with too many characters");
} 
```

但它给了我以下错误：

> 消息：测试“RenderingPasswordShouldHaveMaximumSize”超出执行超时期限

有人可以帮我弄这个吗？我的密码需要最大为 74。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T09:27:59.863

我刚刚注意到您实际上希望您的测试花费很长时间，忽略关于`Int32.MaxValue`.

您的循环有点奇怪，您正在递减迭代器以尝试利用所有字母，但这可能会导致问题。这不是花费太长时间的情况，而是它没有真正正确地生成密码。

我会像这样修复*你的版本*：

```
static string Generate(int length)
{
    // also, seed your random so you don't get the same password
    Random random = new Random((int)DateTime.Now.Ticks);

    char[] chars = "$%#@!*abcdefghijklmnopqrstuvwxyz1234567890?;:ABCDEFGHIJKLMNOPQRSTUVWXYZ^&".ToCharArray();
    string password = string.Empty;

    for (int i = 0; i < chars.Length; i++)
    {
        int x = random.Next(0, chars.Length);

        if (!password.Contains(chars.GetValue(x).ToString()))
            password += chars.GetValue(x);
        else
            i--;
    }

    if (length < password.Length) password = password.Substring(0, length);
    return password;
} 
```

我已经对此进行了测试，并且可以正常工作：

测试代码：

```
Debug.WriteLine(Generate(5));
Thread.Sleep(50);

Debug.WriteLine(Generate(10));
Thread.Sleep(50);

Debug.WriteLine(Generate(20));
Thread.Sleep(50);

Debug.WriteLine(Generate(30));
Thread.Sleep(50);

Debug.WriteLine(Generate(40));
Thread.Sleep(50);

Debug.WriteLine(Generate(60));
Thread.Sleep(50); 
```

和结果：

```
SDxF0
i8ZLhm1gxn
@0Ldn7I&1:Kg2x3SYE;m
U?5uO%N4hkpq1*y;9SRVaer^Eij:bT
nvL;E3#D1MQgTicSdojHOwz:VFk2x&94a*PZ@X80
cSm39n:%1sL*lk2B?yVDTPZCA0vGb@udjeW5KoUw6qRNxY^pazH$JXiQ;tFg 
```

另外，请记住，您在密码中添加字符的方式是使用密码中的所有字符，`char[]`但没有重复。这意味着您的密码的最大长度等于您的`char[]`.

我会推荐这样的东西：

```
static string Generate(int length)
{
    Random random = new Random((int)DateTime.Now.Ticks);
    StringBuilder sb = new StringBuilder();

    for (int i = 0; i < length; i++)
    {
        int x = random.Next(33, 123);
        sb.Append((char)x);
    }

    return sb.ToString();
} 
```

这给出了相同的结果，但也可以处理更长的长度，例如 200：

```
t5[5l
WoEZG;8^9<
6(4Q*Y7k>`?ohte6F^pe
DVb\5l^JMKc`q&[#$U4Kq^\OW`JrRi
#iQSq0\WRoDe<]k36nOhNOb-#"Zt!cK8iaR.I>VF
1<%^"B)6bZhWEiazmfmO7Vv*Rw]TbKV+GRJUc%k23Lq/HC.I6Eha6!5V@v-&
jOnV_`(Cf$I\kFr/%%/loG"bx9lV1E?`[A"y1)pF5tA".x?**(E/>kzCN-XGnL2B`c!JEtxw0cXu'zTztcM*z0CkBYK%LIRcbz<Fxo`0*HzU4&=NTXM,z)CP@1)fJtKa2o3'_/#&#=zR1iW<<wLnwFdYXg&hgta0x:C?m6jEVH*])k@QTgKMIXdg,UJr*59)VkUrG8J& 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:38:32.293

添加这个怎么样：

```
if (length > chars.Length) {
    throw new ArgumentException("Password too long", length);
} 
```

在您的测试中，您可以检查它`Exception`是否按预期抛出。

除非您传递的数字小于 ，否则您的代码将**永远不会**`74`完成。

根据您的代码，如果随机选择的字符已经在密码中，您只需再次迭代（递减`i`）。

你有没有想过一旦你使用了所有的角色会发生什么`chars`？

# javascript - 在 JavaScript 中创建“字典”的问题

> ID：14998556
> 
> 赞同：3
> 
> 时间：2013-02-21T09:23:57.860
> 
> 标签：javascript

好的，首先让我告诉你，我在 JavaScript 方面的经验*还*远远不够……（~~也许我什至试图实现该语言实际上不支持的东西？~~）。

所以……我们来了……

**我想创建一个这样的结构**（这只是一个说明性的例子）：

```
Addresses
    --- John
           --- Phone
           --- Address
    --- Peter
           --- Phone
           --- Address 
```

所以，我已经看到（或者我只是在猜测）我可以做这样的事情（我已经在 Chrome 的 JavaScript 控制台中运行了所有测试）：

```
var addresses = [];
addresses["John"] = {};
addresses["John"].Phone = "12312312312";
// And so on... 
```

**然而 ：**

*   如果我这样做，`addresses['123'] = {};`则构造一个适当的 124 条目数组。
*   如果我这样做，`addresses['somestring'] = {};`那么`addresses`仍然是一个空数组`[]`。

* * *

我究竟做错了什么？JavaScript 中是否没有对正确字典（或地图——不管这个东西如何调用）的原生支持？

* * *

**请注意：**我希望能够逐步将条目添加到地址，以及每个地址条目的键（而不仅仅是一次性创建它）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T09:28:46.040

您正在创建一个数组，但随后您将其用作对象（这是可能的，因为数组恰好是一个对象）。要包含属性而不是编号索引，您应该使用一个对象：

```
var addresses = {};
addresses["Holmes"] = { Phone: "14", Address: "Baker street 221b" }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:31:02.747

JavaScript 有对象和数组。

数组是一种对象，它处理具有特殊意义的数字属性。它将具有`length`基于最高值属性名称（即数字）的属性，并且具有诸如 和 等方法`push`来`pop`根据`forEach`其数字操作其数字成员。

> 如果我这样做，`addresses['123'] = {};`则构造一个适当的 124 条目数组。

你已经有一个数组。这只是添加一个调用`123`它的成员并更新它的`length`.

> `If I do addresses['somestring'] = {};`

这会将该成员添加到数组中，但它不会出现在任何访问数组成员的常规方法中。您必须按名称访问它。

不要将命名属性赋予数组。使用普通对象。

> 是否没有对正确词典的本机支持

一个物体尽可能接近。

如果您想要订购的东西，请使用具有数字属性的数组。

如果您想要带有命名键的东西，请使用对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T09:32:22.710

当你这样做时，你会`addresses['somestring'] = {};`得到一个空数组，因为`{}`你正在分配一个空对象。

相反，如果你这样做`addresses["dd"] = {s: "s"}`，`addresses`就会有对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:33:43.113

Javascript 没有*字典*、地图或关联数组。

但是，它确实具有非常相似的对象。（它们也可能完全不同，因此必须了解这一点。）

为了让事情更混乱，数组*是*一个对象。您可以将随机属性放在数组上，它会像对象一样工作。

Javascript 数组采用整数 [*] 索引并调整`.length`属性。

对象采用字符串属性名称。这很重要：如果您使用*的不是*字符串，它将被转换为一个 .. 通常称为`[Object object]`

可能想读这个： [http ://eloquentjavascript.net/chapter4.html](http://eloquentjavascript.net/chapter4.html)

[*] 是的，是的，是的——他们真的是幕后的字符串。将它们视为整数并避免这种悲伤更容易。

# php - Fotorama 插件，只打开一次全屏模式

> ID：14998559
> 
> 赞同：0
> 
> 时间：2013-02-21T09:24:04.977
> 
> 标签：php, jquery, html, photo-gallery, fotorama

我正在为我的图片库使用 jQuery 插件 Fotorama。

当我单击缩略图以全屏打开 Fotorama 画廊时，它只会第一次打开（退出全屏并单击相同的缩略图后不会再次打开）。

这是我的代码jQuery代码：

```
 $(".open_gallery").click(function (){
        $('body').prepend('<div class="close_gallery"> <img src="/images/round_delete.png" width="32" height="32" alt="close"/></div>');
        $('.close_gallery').click(function(){
            $('.my-fotorama').trigger('fullscreenclose');
            $('#foto_gallery').hide();

            //window.location.reload();//reload the page
        });
        $('.my-fotorama').show();
        $('.my-fotorama').fotorama({
            width: '100%',
            height: 'auto',
            aspectRatio: 1.4989293362, // =700/467

            minWidth: null,
            maxWidth: null,
            minHeight: null,
            maxHeight: null,

            transition: 'slide', // or 'fade'
            click: true,
            loop: false, // or true

            autoplay: false,
            stopAutoplayOnAction: true,

            transitionDuration: 333,

            background: '#111',
            // 'black', '#b10000', or url(bg.png)
            margin: 4,
            minPadding: 8,
            alwaysPadding: false,
            zoomToFit: true,
            cropToFit: false,
            cropToFitIfFullscreen: false,

            flexible: false,
            fitToWindowHeight: false,
            fitToWindowHeightMargin: 20,

            fullscreen: true,
            fullscreenIcon: false,

            vertical: false,

            arrows: true,
            arrowsColor: null,
            arrowPrev: null,
            arrowNext: null,

            spinnerColor: '#808080',

            nav: 'thumbs', // or 'dots', or 'none'
            navPosition: 'auto',
            // 'top' | 'right' | 'bottom' || 'left'   
            navBackground: null,
            dotColor: null,
            thumbSize: null, // 36 or 51, whatever :-)
            thumbMargin: 4,
            thumbBorderWidth: 2,
            thumbBorderColor: null,
            // 'white', '#ff9', or even '#00ff84 #00eb89 #00b66f'
            thumbsCentered: true,
            hideNavIfFullscreen: false,

            caption: 'overlay', // 'simple', or 'none'

            preload: 3,
            preloader: 'dark', // or 'white'

            shadows: true,

            data: null,
            // e.g. [{img: 'http://fotoramajs.com/;-)/03.jpg'}, {img: 'broken.jpg'}, {img: 'http://fotoramajs.com/;-)/13.jpg'}]

            html: null,

            hash: false,
            startImg: 0,

            cssTransitions: true,

            onShowImg: null,
            // function(data){alert('Photo #'+(data.index+1)+' is coming!')},
            onClick: null,
            onFullscreenOpen: null,
            onFullscreenClose: function(data){
                $('#foto_gallery').hide();      
                $('.close_gallery').hide(); 
            },
            onTransitionStop: null 
        }); 

    }); 
```

缩略图

```
<div class="photo-section">
<table>
    <td>
        <a class="open_gallery" href="#"> <img border="0" src="<?=$arItem["PICTURE"]["SRC"]?>" width="140px" height="110px" alt="<?=$arItem["NAME"]?>" title="<?=$arItem["NAME"]?>" />
        </a>
    </td>

</table> 
```

主要图片

```
<div id="foto_gallery">
<div class="my-fotorama">           
    <img src="<?=$arItem["PREVIEW_PICTURE"]["SRC"]?>">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:33:33.113

从未使用过 Fotorama，但我注意到您`#foto_gallery`在单击关闭按钮后隐藏了 div。但是您没有在公开活动中显示它，所以也许隐藏是问题所在。

当您使用该`hide();`方法时，jQuery 将该对象的 CSS 设置为`display: none;`，现在如果插件将 CSS 属性`opacity`设置为 1，那么它将在浏览器中不可见，因为`display: none;`.

## 更新

`.my-fotorama`我再次查看了您的代码，每次触发点击事件时，您都会在元素上初始化 FotoRama 库。移动click函数上方的整个block代码，`$('.my-fotorama').fotorama({..`使用plugins方法关闭和打开全屏模式。我将您的代码更新为：

```
// triggers when the DOM is loaded
$(function() {
    $('.my-fotorama').fotorama({
        width: '100%',
        height: 'auto',
        aspectRatio: 1.4989293362, // =700/467

        minWidth: null,
        maxWidth: null,
        minHeight: null,
        maxHeight: null,

        transition: 'slide', // or 'fade'
        click: true,
        loop: false, // or true

        autoplay: false,
        stopAutoplayOnAction: true,

        transitionDuration: 333,

        background: '#111',
        // 'black', '#b10000', or url(bg.png)
        margin: 4,
        minPadding: 8,
        alwaysPadding: false,
        zoomToFit: true,
        cropToFit: false,
        cropToFitIfFullscreen: false,

        flexible: false,
        fitToWindowHeight: false,
        fitToWindowHeightMargin: 20,

        fullscreen: true,
        fullscreenIcon: false,

        vertical: false,

        arrows: true,
        arrowsColor: null,
        arrowPrev: null,
        arrowNext: null,

        spinnerColor: '#808080',

        nav: 'thumbs', // or 'dots', or 'none'
        navPosition: 'auto',
        // 'top' | 'right' | 'bottom' || 'left'   
        navBackground: null,
        dotColor: null,
        thumbSize: null, // 36 or 51, whatever :-)
        thumbMargin: 4,
        thumbBorderWidth: 2,
        thumbBorderColor: null,
        // 'white', '#ff9', or even '#00ff84 #00eb89 #00b66f'
        thumbsCentered: true,
        hideNavIfFullscreen: false,

        caption: 'overlay', // 'simple', or 'none'

        preload: 3,
        preloader: 'dark', // or 'white'

        shadows: true,

        data: null,
        html: null,

        hash: false,
        startImg: 0,

        cssTransitions: true,

        onShowImg: null,
        onClick: null,
        onFullscreenOpen: function() {
            $('#foto_gallery, .my-fotorama').show();
        },
        onFullscreenClose: function(data){
            $('#foto_gallery, .my-fotorama').hide(); 
            $('.close_gallery').remove(); // you need to remove the close element, otherwise it will add and add one every time the click event is triggered.
        },
        onTransitionStop: null 
    }); 

    // add the click event to all open_gallery classes in the DOM
    $(".open_gallery").click(function () {
        $('body').prepend('<div class="close_gallery"> <img src="/images/round_delete.png" width="32" height="32" alt="close"/></div>');

        $('.close_gallery').click(function() {
            $('.my-fotorama').trigger('fullscreenclose');
        });     

        $('.my-fotorama').trigger('fullscreenopen');
    });        
}); 
```

# java - 虚拟分割文本文件的解决方案

> ID：14998562
> 
> 赞同：1
> 
> 时间：2013-02-21T09:24:15.323
> 
> 标签：java, file-io, inputstream, filereader

我需要阅读和处理一个巨大的文本文件。为了提高数据处理时间，我想到了让多个阅读器同时阅读。这个想法是通过记下开始和结束指针来虚拟分割文件。这是由程序开始时的主线程完成的。实际上我的意思是，不创建物理拆分文件。

稍后当并发读取器完成读取和处理时，每个线程可以调用 bufferedReader.skip(long) 并跟踪读取的字符数，以便它们不会越过结束指针边界。

问题是单个线程完成的文件读取是使用 BufferedReader 完成的，因此要跳过我需要知道字符数，而主线程无法确定这一点。要计算开始和结束指针，主线程唯一的数据是以字节为单位的文件长度。

如何根据字符确定开始和结束指针，以便读者可以跳过那么多字符？

笔记 -

1.  输入文本文件可以采用不同的字符编码，例如 ASCII、EBCDIC、UTF-8、UTF-16 等。
2.  逐行读取输入文件以确定开始和结束指针不是一种选择，因为它违背了分割文本文件的目的。

**更新**

注意我只能使用 java 文件 API 而不是像 Hadoop 这样的框架。这是应用程序架构限制

**更新**

这是通过跳过计算的字节数然后逐字节读取输入文件以确定记录分隔符来读取输入文件的代码。如果您发现代码有问题，请回复您的想法（特别是考虑到输入文件可能采用不同的字符编码这一事实）。

```
 {
        CountingInputStream countingInputStream = new CountingInputStream(new FileInputStream(inputFilePath.toFile()));
        long endPointer;
        while(true) {
            long actualSkipped = countingInputStream.skip(skipCount);
            if(actualSkipped == 0) {
                logger.info("Nothing to skip");
                break; //nothing to skip now.
            }

            byte[] inputBytes = new byte[recordDelimiterBytes.length];
            int noOfBytesRead = countingInputStream.read(inputBytes);
            if(noOfBytesRead == -1) {
                //end of file already reached!
                endPointer = countingInputStream.getCount();                    
                break;
            }
            while (!(Arrays.equals(recordDelimiterBytes, inputBytes))) {
                shiftLeft(inputBytes);
                int readByte = countingInputStream.read();

                if(readByte != -1) {
                    inputBytes[inputBytes.length - 1] = (byte) readByte;
                } else {
                    throw new IllegalStateException("EOF reached before getting the delimiter");
                }

            }
            endPointer = countingInputStream.getCount();
    }

    private void shiftLeft(byte[] inputBytes) {
        for(int i=0; i<inputBytes.length - 1; i++) {
            inputBytes[i] = inputBytes[i+1];
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:34:58.113

您的问题中有几点需要回答：

> 为了提高数据处理时间，我想到了让多个阅读器同时阅读。

如果您的处理受 I/O 限制，那么尝试读取具有多个流的单个文件不太可能加快速度。这可能会使事情变得更糟。但是，很难给出明确的答案，因为它取决于操作系统如何处理预读、内存文件系统缓冲、RAID 和其他因素。

另一方面，如果处理受 CPU 限制，适合并行化，并且您有多个可用内核，那么多个流可能是有效的。

> 如何根据字符确定开始和结束指针，以便读者可以跳过那么多字符？

您计算出大概的分区大小和大概的边界。然后你需要做一些工作来找到确切的边界。

*   如果您想在一行或单词的开头开始每个段。选择一个点，一次读取一个字节，直到到达相关边界。

*   如果要从下一个有效字符的开头开始：

    *   对于 8 位编码（如 ASCII、Latin-1 等）来说，这个问题是微不足道的。

    *   使用 UTF-8，您可以跳到最高位为 00、01 或 11 的下一个字节，这就是代码点的开始。[请参阅UTF-8 维基百科页面上](http://en.wikipedia.org/wiki/UTF-8#Description)的表格。

    *   使用 UTF-16，您必须读取字节对。如果您不知道顺序（big-endian 或 little-endian），您可以检查前 2 个字节以查看它们是否为 BOM。确定后，不在 DC00-DFFF 范围内的字节对是代码点的开始。请参阅[UTF-16 上的 Wikipedia 页面](http://en.wikipedia.org/wiki/UTF-16)。

显然，一旦你知道了一个分区的开始，你就会知道前一个分区的结束。

如您所见，您需要*知道*文件的字符编码是什么。但是，如果您确实知道这一点，则可以快速可靠地找到合适的位置来设置分区边界。

* * *

> 唯一的问题是当数据中有文本限定符时，即配置的记录分隔符也可能是数据的一部分。

那么这可能很困难：

*   如果分隔符只在开始处或附近设置一次，那么您只需从头开始阅读，直到弄清楚分隔符是什么。然后进行分区。

*   如果可以在文件中的任何位置更改分隔符，那么使用单个线程读取可能是唯一的选择。（也许您可以在将输入分解为分隔的记录或行或其他内容后并行化处理。）

*   最后一种选择是让线程在*假设*一个分隔符的情况下进行分区和处理，但还要寻找嵌入的“更改分隔符”指令。如果他们确实检测到实际更改，请告诉稍后分区的线程重新启动。这有点复杂...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:27:44.403

你的提议是不可能的。磁盘上的所有 I/O 操作本质上都是串行的。想想普通硬盘的样子。该文件存储在一个带有一个读头的盘片上。您不会从 java 创建更多标题 - 因此即使您创建多个阅读器，它们最终也会互相等待完成阅读。

此外，所有读取都从文件开始处开始。您不能在中间开始读取文件。如果要向前读取，可以使用 skip() 方法，但该方法*读取*那么多字符而不对数据做任何事情。

编辑：您可以将读取线程与处理线程分开。创建一个读取线程从头到尾读取文件。每次完成读取文件的适当部分时，它都会启动一个新线程来处理读取的数据。同时，读取线程将读取一个新的文件块，启动一个线程到该块，等等......当读取线程到达文件末尾时，它终止，已经启动了几个现在正在同时处理各自部分的新线程的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:45:07.097

我认为解决此类问题的最佳方法是让一个读取器负责对数据进行分区，并且当读取器到达每个分区边界时，它将分区提交到处理队列。然后，您可以拥有一个从队列中读取的处理器池。通过这种方式，如果处理一个分区比读取一个分区慢，您将获得并行处理分区的好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:31:55.593

请阅读有关 hadoop 和 HDFS 的信息。它们旨在做同样的事情。网上有很多教程。请更清楚您要进行哪种处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T09:53:14.513

问题是这样的：UTF-8 字符可以有不同的长度。因此，仅以文件长度作为提示，不可能确定 x% 的字符在哪里结束。

# python - Python Tkinter 不创建按钮

> ID：14998566
> 
> 赞同：0
> 
> 时间：2013-02-21T09:24:28.357
> 
> 标签：python, tkinter, restructuredtext

我正在用 Tkinter 开发 reStructuredText 编辑器。如果我运行下面的代码，我得到**IndentationError** ..

```
from Tkinter import *
from tkFileDialog import asksaveasfile as savefile

class RSTkinter:
    def __init__(self):
        self.pencere_load()
        self.araclar()

    def pencere_load(self):
        pencere.resizable(width=FALSE,height=FALSE)
        pencere.title("RSTkinter")

    def araclar(self):
        h1 = Button(text=u"Başlıklar",command=self.h1p)
        h1.place(rely=0.0)

        ..
        ..

        topic = Button(text="Topic",command=self.topic_p) # ..topic:: başlık \n\t içerik
        topic.place(rely=0.0,relx=0.63)

    def topic_p(self):
        topic = Toplevel()
        topic.title("RSTkinter - Not")
        topic.resizable(width=FALSE,height=FALSE)
        topic.geometry("200x140")

        topic_b_l = Label(topic,text=u"Topic başlığı: ")
        topic_b_l.place(relx=0.0,rely=0.0)

        self.topic_b = Text(topic)
        self.topic_b.place(relx=0.3,rely=0.0,width=130)

        topic_i_l = Label(topic,text=u"Topiç içeriği")
        topic_i_l.place(relx=0.0,rely=0.4)

        self.topic_i = Text(topic)
        self.topic_i.place(relx=0.3,rely=0.5,width=130)

        topic_y = Button(topic,text=u"Ekle",command=self.topic_yap)
        topic_y.place(relx=0.0,rely=0.2)

    def topic_yap(self):
        return self.metin.insert(END,"\n.. topic:: %s \n\t%s"%(self.topic_b.get(1.0,END)),self.topic_i.get(1.0,END)))

pencere = Tk()
rst = RSTkinter()

mainloop() 
```

完整错误：

```
File "RSTkinter15.py", line 85
topic = Button(text="Topic",command=self.topic_p) #.. ^
IndentationError: unexpected indent 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:04:20.297

如果错误消息告诉您有缩进错误，则可以安全地假设这是真的。调试时的一个好的经验法则是始终相信编译器/解释器告诉您的内容。

很可能你混合了空格和制表符——这是 python 的弱点之一。仔细检查您在该行和之前的行上使用了相同的空格和制表符组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T14:30:42.253

这通常是一个问题，例如，与几个人一起编写一段代码或使用多个编辑器（具有不同的默认设置）进行编程：一个使用（双/四）间距，其他选项卡。为了解决这个问题，我总是使用编辑器的内置替换功能（带正则表达式）：

```
'    ' => '\t'   # search four spaces, replace with tab
'  ' => '\t'     # search two spaces, replace with tab 
```

“全部替换”非常有用，但要小心：你不想改变太多！并按此顺序（否则您会将所有四倍间距更改为两个制表符）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-21T10:43:25.983

当我编写代码时，修复识别的最佳方法是转到问题上方的行并单击行尾，这样你的光标就在那里。然后按回车键，正确的缩进会出现在下一行。然后我所做的就是继续按 Delete 按钮将代码从下面移动到 python shell 为我制作的新缩进。

# asp.net - 如何在运行时为 asp.net 中的公共变量赋值？

> ID：14998568
> 
> 赞同：1
> 
> 时间：2013-02-21T09:24:33.347
> 
> 标签：asp.net

```
Public Class index
Inherits System.Web.UI.Page
Dim arr(9) As Integer

Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
arr(0) = 23
End Sub

Protected Sub bntInsert_Click(ByVal sender As Object, ByVal e As EventArgs) Handles bntInsert.Click
arr(0) = 999
End Sub   

Protected Sub bntShow_Click(ByVal sender As Object, ByVal e As EventArgs) Handles bntShow.Click
txtid.Text = arr(0).ToString
End Sub
End Class 
```

结果是当我单击 bntInsert 并在 bntShow 之后它仍然在 txtid 中显示值“23”。请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:32:07.057

1：asp.net 是无状态的。2：检查回发事件？

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
 if page.isPostBack then
arr(0) = 23
end if
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:45:22.233

这是因为每个按钮单击最终都会先调用 page_load。我猜您正在尝试使用公共变量来保留值，但您需要了解特定变量仅对特定请求有效。对于每个后续请求，包括按钮点击（这是回发），该变量都将丢失。

您可能希望将 arr 保留在会话变量中以在往返之间保存其值。

# visual-studio-2010 - 使用 Visual Studio 2010 部署到 SFTP

> ID：14998570
> 
> 赞同：3
> 
> 时间：2013-02-21T09:24:35.087
> 
> 标签：visual-studio-2010, visual-studio, sftp, web-deployment

我在尝试使用 SFTP 将我的网站（一个 MVC4 WebApi 服务）部署到我的服务器时遇到了一些麻烦。我正在使用安装了最新 Azure SDK 的 VS2010，因此我得到了新的发布对话框。

我要做的是选择站点，输入地址（请记住，对话框不允许在此处选择端口），设置路径和用户名以及密码，然后单击验证连接，它会滚动一段时间然后告诉我它找不到服务器。

如果我使用端口 (:22) 设置地址，我会收到 Rebex FTP 不支持 SSH 并使用其他 Rebex 工具的错误。我也尝试添加`sftp://`，但在这种情况下，我被要求输入密码，但无论我输入什么都失败了（我尝试了我的域密码、服务器密码、ftp 密码等都无济于事）。

过去使用 SFTP 部署是否有人有任何想法或有任何成功？作为说明，我必须补充一点，与普通 FTP 客户端 (Filezilla) 的连接可以完美运行，因此服务器在那里，可以访问并且密码是正确的，以防您想知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T02:05:33.180

据我所知，Visual Studio 中的发布机制不支持 SFTP。它似乎也不是可扩展的——因此我们无法构建扩展来提供这种支持。

这让我们的团队感到非常沮丧。我目前做的是发布到本地文件夹，然后从那里 SFTP 到服务器。

如果有人知道的话，我会对 [与发布功能相关或替换发布功能] 的 SFTP 解决方案非常感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-19T08:47:58.903

老问题，但我在寻找答案时遇到了它。

答：~~Visual Studio 2010 版本 10.0.40219.1 SP1~~

答：VS 2010没有SFTP，但是VS.php插件在php项目中有一个选项。

*   项目->{应用程序名称}属性
*   配置属性
*   展开以查找部署
*   连接设置 -> 部署模式：设置为 Secure Ftp (SSH)

从那里它只是输入您的 sftp 信息。我个人将我的“生产”配置设置为部署到 SFTP，并将我的本地设置为本地。

SFTP 的可能解决方案是使用 winscp 并创建服务器的本地存储库并将构建传递给它。恐怕我没有例子。 [http://winscp.net/eng/docs/guide_synchronize](http://winscp.net/eng/docs/guide_synchronize)

# java - 关于java类的结果

> ID：14998571
> 
> 赞同：1
> 
> 时间：2013-02-21T09:24:40.330
> 
> 标签：java, constructor-overloading

我正在开发下面的课程，当我执行下面的课程时，我得到以下结果..

```
public class Confusing {    
    private Confusing(Object o) {
        System.out.println("Object");
    }

    private Confusing(double[] dArray) {
        System.out.println("double array");
    }

    public static void main(String[] args) {
        new Confusing(null);
        // new Confusing((Object)null);
    }
} 
```

输出 ：-

```
double array 
```

你能解释一下为什么控制台上的结果是双数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:27:16.280

> 使用最具体的适用过载。

在这种情况下，最具体的是双数组，因此您将“双数组”作为输出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:26:38.870

```
 Confusing(null) 
```

方法调用转到最具体的方法

在这里它

```
private Confusing(double[] dArray) 
```

因为`double[]`参考比通用`Object`参考更具体

# c# - Linq 到完全外部联接数据集中的多个表

> ID：14998572
> 
> 赞同：-2
> 
> 时间：2013-02-21T09:24:48.690
> 
> 标签：c#, linq

我的数据集中有 3 个表

表 0 ,1, 2 分别有 id1 , id2 , id3 列

我怎样才能完全加入他们？

我在堆栈溢出中看到了很多问题，但它们只处理 2 个表。如果我有超过 2 张桌子，我怎么能做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:31:26.907

像这样你可以试试

```
var data= (from t1 in db.table1
           join t2 in db.table2 on t1.ID equals t2.ID into t1t2
           from x in t1t2.DefaultIfEmpty()
           join t3 in db.table3 on t1.ID equals t3.ID into t1t3
           from y in t1t3.DefaultIfEmpty()
           select new { t1.id,  x.id,  y.id}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:04:55.323

```
 var rowData =
                        from row1 in dsResults.Tables[0].AsEnumerable()
                        join row2 in dsResults.Tables[1].AsEnumerable()
                            on row1.Field<decimal>("RecordId") equals row2.Field<decimal>("RecordId2")
                        join row3 in dsResults.Tables[2].AsEnumerable()
                            on row1.Field<decimal>("RecordId") equals row3.Field<decimal>("RecordId3")
                        select row1.ItemArray.Concat(row2.ItemArray).Concat(row3.ItemArray).ToArray(); 
```

# jquery - 分配给 Label 的 Javascript 函数的返回值 Label 的属性正在改变

> ID：14998577
> 
> 赞同：1
> 
> 时间：2013-02-21T09:25:12.190
> 
> 标签：jquery, asp.net

在 Javscript 函数中，我为标签赋值。已分配值，但标签属性正在更改为默认值。

```
document.getElementById("Label1").innerText = dispTime; 
```

dispTime是 javascript 函数中的某个值**。**

```
<asp:Label ID="Label1" runat="server" ToolTip="Current Time" ForeColor="BlueViolet" BorderStyle="Ridge" BackColor="ButtonHighlight"></asp:Label> 
```

这是我的**标签**的定义方式，但在页面加载后标签属性更改为默认值

我的页面加载

```
ClientScript.RegisterStartupScript(GetType(), "Javascript", "javascript:InIt();", true); 
```

我的 javascript 部分

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="head1" runat="server">
<title>Time</title>
<script type="text/javascript">
function InIt() {
    var dateTime = new Date();
    var hours = dateTime.getHours();
    var minutes = dateTime.getMinutes();
    var seconds = dateTime.getSeconds();
    var day;
    if (hours < 11) {
        day = "AM";
    }
    else {
        day = "PM";
    }
    if (minutes < 10) {
        minutes = "0" + minutes;
    }
    if (seconds < 10) {
        seconds = "0" + seconds;
    }
    var dispTime = document.getElementById("time").innerHTML = hours + ":" + minutes + ":" + seconds + " " + day;
    setTimeout("InIt()", 1000);
    var updatetime = document.getElementById("Label1");
    updatetime.innerText = dispTime;
}
InIt();
</script> 
```

```
<form id="form1" runat="server">
<div id="time" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
    <asp:Label ID="Label1" runat="server" ToolTip="Current Time" style="background-color:ButtonHighlight; border-style:ridge;"></asp:Label>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:33:13.267

在 jquery 的 document.ready 上赋值。

如果您在页面的页面加载上写了一些内容，则从`java-script`该值设置的值将再次更改`.cs`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:38:32.053

在 pageload 事件中，您可以使用此代码调用 javascript 函数 AssignvaluetoLabel() 然后在函数中添加脚本

```
 protected void Page_Load(object sender, EventArgs e)
{
    ScriptManager.RegisterStartupScript(Page, this.GetType(),  "Assign", "AssignvaluetoLabel();", true);
}

<html>
<head runat="server">
<title>Untitled Page</title>
<script >
function AssignvaluetoLabel()
{
var dispTime="some value";
document.getElementById("Label1").innerText = dispTime;

}
</script>
</head>

 <body>
<form id="form1" runat="server">
<div>
    <asp:ScriptManager  ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</div>
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:51:33.297

尝试在您的页面中添加 jquery 文件引用下面的代码。

```
<asp:Label ID="Label1" runat="server" ToolTip="Current Time" ForeColor="BlueViolet" BorderStyle="Ridge" BackColor="ButtonHighlight"></asp:Label>
    <script language="javascript" type="text/javascript">
        $(document).ready(function () {
            TestFunction("testvalue");
        });

        function TestFunction(dispTime) {
            $("#<%= Label1.ClientID %>").text(dispTime);
        }
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T04:20:24.453

这是您更新的代码...

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %> 
```

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="head1" runat="server"  >
<title>Time</title>
<script type="text/javascript">

function AssignvaluetoLabel() {
    var dateTime = new Date();
    var hours = dateTime.getHours();
    var minutes = dateTime.getMinutes();
    var seconds = dateTime.getSeconds();
    var day;
    if (hours < 11) {
        day = "AM";
    }
    else {
        day = "PM";
    }
    if (minutes < 10) {
        minutes = "0" + minutes;
    }
    if (seconds < 10) {
        seconds = "0" + seconds;
    }

  document.getElementById("Label1").innerText = hours + ":" + minutes + ":" + seconds + " " + day;

}

</script>
</head>
<body>

   <form id="form1" runat="server">
<div id="time" runat="server">
    <asp:ScriptManager runat="server">
    </asp:ScriptManager>
    <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label>
    <asp:Label ID="Label1" runat="server" ToolTip="Current Time" style="background-color:ButtonHighlight; border-style:ridge;"></asp:Label>
</div>
</form>
</body> 
```

`

```
protected void Page_Load(object sender, EventArgs e)
{
    ScriptManager.RegisterStartupScript(Page, this.GetType(), "Assign", "AssignvaluetoLabel();", true);
} 
```

# xpath - c# Selenium RC "OR" 语句使用 xpath

> ID：14998578
> 
> 赞同：0
> 
> 时间：2013-02-21T09:25:14.700
> 
> 标签：xpath, selenium, rc

我目前正在使用 Selenium RC 开发一些测试。我不得不对带有 xpath 输入和 textareas 的 selenium Xpath“OR”语句提出问题。言归正传。我设计了 2 个 xpath

文本区域：`//span[text()='{0}']/parent::*/following-sibling::*//textarea`

输入：`//span[text()='{0}']/parent::*/following-sibling::*//input`

通常我使用 Selenium.Type(myXpath,"label=myValue"); 并且这两个 xpath 都可以正常工作。问题是当我试图合并它们时。如果它是输入或文本区域，我并没有真正对我产生影响，因为这两种方法完全相同，因此我尝试将它们与 | 合并 （或）声明。

```
//span[text()='{0}']/parent::*/following-sibling::*//textarea|//input 
```

但不幸的是它不起作用。如果顺序是`//textarea|//input`它匹配 textarea 并且如果`//input|//textarea`它匹配输入。我尝试了各种组合，但仍然没有。我是否缺少括号或一些必需的语法？谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:48:36.250

获取所有节点 ( `*`)，然后使用谓词测试您想要的元素名称。

```
//span[text()='{0}']/parent::*/following-sibling::*//*[local-name() = 'textarea' or local-name() = 'input'] 
```

如果您的 XPath 引擎不支持`local-name()`（这似乎是 Selenium 的问题，请参阅评论），您将不得不重复完整的语句：

```
//span[text()='{0}']/parent::*/following-sibling::*//textarea | //span[text()='{0}']/parent::*/following-sibling::*//input 
```

* * *

您一直在尝试使用的查询相当于

```
(//span[text()='{0}']/parent::*/following-sibling::*//textarea) | (//input) 
```

这也解释了切换`textarea`和的结果`input`。

# php - 通过 FTP URL 打开文件

> ID：14998583
> 
> 赞同：3
> 
> 时间：2013-02-21T09:25:29.430
> 
> 标签：php, download, fopen, feof

我正在尝试使用 PHP 从 FTP URL 下载文件，看起来像`ftp://username:password@domain/file.zip`. URL 很好，因为我可以将文件下载并粘贴到任何浏览器中。Fopen 支持这种文件流，在这里看到它：[fopen](http://php.net/manual/en/function.fopen.php)。这是我的代码：

```
[...]
$destination_folder = '../importmlsupload/';    
$url = "ftp://user:password@domain/file.zip";
$newfname = $destination_folder . basename($url);
$file = fopen($url, "rb");
if ($file) {
    $newf = fopen($newfname, "wb");
    while(!feof($file)) {
        $s = fread($file, 1024);
        fwrite($newf, $s, 1024 );
    }
}

if (!empty($file)) {
    fclose($file);
}

if (!empty($newf)) {
    fclose($newf);
} 
```

**问题**是我下载了一个空文件。我做了一些验证，得到以下结果：文件在服务器上创建成功，但是while循环（！feof（...））在第一步之后结束。因此它读取 1024 个字节并退出循环。换句话说，feof 在前 1024 个字节或读取后返回 true。

**尝试使用 HTTP URL 结果导入成功，但 FTP URL 不成功**

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:37:27.353

我没有尝试您的代码，但如果您有 ftp 详细信息，则可以使用[FTP 功能](http://php.net/manual/en/book.ftp.php)。这可能不是我知道的适当答案。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:51:50.090

嗨，欧文，很抱歉回答迟了！

我只是遇到了同样的问题，实际上我找到了两个答案。首先我试过了`file_get_contents`。这像这样工作：

```
$input = file_get_contents($url);
$writtenChars = file_put_contents($newfname, $input); 
```

非常简单且有效，但我猜只是针对 ASCII 并且如果你有相当多的内存，因为它会在写入之前读取整个文件。我喜欢你的缓冲方法。所以我做了以下事情：

```
$source = fopen($url, 'r');
$destination = fopen($newfname, 'w+');
while($data = fread($source, 1024)) {
    fwrite($destination, $data);
} 
```

这适用于我正在下载的 XML 文件。当您`'wb'`在*mode 参数*中执行时，您的二进制文件应该没问题`fopen`。

我不知道为什么你的`feof`不起作用，对不起。但是正如您在我的代码中看到的那样，无论如何您都不需要它。

# outlook - DocumentItem (IMessage) 打开后丢失附件

> ID：14998585
> 
> 赞同：1
> 
> 时间：2013-02-21T09:25:33.253
> 
> 标签：outlook, outlook-addin, mapi

在我们的 MAPI 消息存储提供程序中，我们提供电子邮件和非 Outlook 项目（办公文档等）。从技术上讲，我们将这些文档作为 IMessage 对象提供，带有单个附件和特定的`PR_MESSAGE_CLASS`（例如*IPM.Document.txtfile*）。然后 Outlook 将此对象视为 a `DocumentItem`，而不是`MailItem`。

正如您在下面的屏幕截图中看到的那样，这很好用。预览器按预期工作，双击该项目将在相应的应用程序（例如*记事本*）中打开该项目。

![打开之前 - 预览工作正常](../Images/f02771e18dd73db875944ddfffe48afa.png)

但是，在打开项目后，*一旦外部应用程序关闭*，就会出现问题。预览中断，并且在先选择另一个项目之前无法再次打开该项目。

![开场后 - 预览休息时间、开场休息时间](../Images/69792eda8b05bfd01dd22daa04030cef.png)

根据 Outlook Spy，我们的`IMessage`对象仍然非常好。**现在不知何故缺少附件的**是 OOM`DocumentItem`包装器：

 **![DocumentItem 缺少附件](../Images/edb9445279de077c227ce76e12687f58.png)

什么可能导致这种行为？我们缺少更新吗？Outlook 项目是否显示已损坏的旧 IMessage 对象？我们已经对这个主题进行了相当多的研究，欢迎所有的指点！

**[编辑 1]**

这是 Outlook 间谍，说明我们的`IMessage`对象仍然可以：

![iMessage 还是可以的](../Images/26311fc9a29d12432fb44b0fd66b6ba2.png)

**[编辑 2]**

只要外部应用程序没有关闭，一切都很好。我可以根据需要多次打开文档，但只要我关闭外部查看器的单个实例，Outlook 项目就会“损坏”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:23:00.547

原来答案很简单，

> **PR_MESSAGE_FLAGS**属性需要**包含**MSGFLAG_HASATTACH

 **添加此标志立即解决了问题，并且非常有意义。只是 Outlook 的结果行为（在第一次访问时工作，然后中断）让我们失望了。****

# asp.net - 使用 cookie 存储网页的 PageID（经常更改） - 这合适吗？

> ID：14998587
> 
> 赞同：0
> 
> 时间：2013-02-21T09:25:36.577
> 
> 标签：asp.net, cookies, webpage

`PageID`第一次，当用户访问asp.net网页时，我需要保存一个变量。每次用户选择一个新网页时，该`PageID`变量都会更新。

在这个阶段我不允许使用会话变量——规范不允许。

我的问题：在值没有改变之前，我只使用过 cookie - 例如 UserID 或 ApplicationID。现在我第一次将它用于经常更改的值。这合适吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:39:33.047

只要您保持 cookie 的总大小相对较小，在每次页面加载时更改 cookie 上的变量就不是问题。

关于 cookie 大小：http: [//developer.yahoo.com/performance/rules.html#cookie_size](http://developer.yahoo.com/performance/rules.html#cookie_size)

关于大小限制：[https ://stackoverflow.com/a/6963585/159270](https://stackoverflow.com/a/6963585/159270)

# google-app-engine - Google App Engine 上的最大计算时间

> ID：14998591
> 
> 赞同：1
> 
> 时间：2013-02-21T09:25:49.847
> 
> 标签：google-app-engine

我想在 Google App Engine 上使用 Python 或 Java 开发一个时间表生成器。输入所有数据后，此应用程序最终将需要至少 4 到 5 分钟的时间来计算结果。

我的疑问是如何在 Google App Engine 上运行一个需要很长时间才能处理的复杂进程，因为一个进程允许的最长时间是 60 秒，以及任务队列在这里是否有帮助？

还有我可以用于此目的的任何其他免费云主机吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:09:47.963

[如果您使用的是任务队列](https://developers.google.com/appengine/docs/java/taskqueue/)，那么在 Google App Engine (GAE) 中，您只有 10 分钟的超时时间。您还可以使用[后端](https://developers.google.com/appengine/docs/java/config/backends)（如[文档](https://developers.google.com/appengine/docs/java/backends/overview#Billing_Quotas_and_Limits)中所述：*后端免除用户请求的 60 秒截止日期和任务的 10 分钟截止日期，并且无限期地运行。*）。

也许[亚马逊网络服务（Elastic Beanstalk）](http://aws.amazon.com/elasticbeanstalk/)是满足您需求的更好地方:)。

# jquery - leftoffset 到右侧

> ID：14998592
> 
> 赞同：0
> 
> 时间：2013-02-21T09:25:52.683
> 
> 标签：jquery, css, html, scroll, sticky

我在我的网站上使用粘性。它在 CSS 上完美配置，但是当我开始滚动时，它会转到左侧。我希望它粘在它所在的右侧。我怎样才能做到这一点？

我确定它是 JS 文件的一部分

```
(function($){
$.fn.extend({ 
    //plugin name - jsticky
    jsticky: function(options) {

        //Settings list and the default values
        var defaults = {
            marginTop: 0
        };

        var options = $.extend(defaults, options);

        return this.each(function() {
            var o = options;

            //Assign current element to variable, in this case is UL element
            var obj = $(this);   

var offset = obj.offset();
var topOffset = offset.top;
var marginTop = obj.css("marginTop");
var marginTopNum = parseInt(marginTop);

var diff = topOffset - marginTopNum;

var offset = obj.offset();
            var topOffset = offset.top;
            var leftOffset = offset.left;
            var marginTop = obj.css("marginTop");
            var marginLeft = obj.css("marginLeft");

            $(window).scroll(function() { 
                var WindowScrollTop = $(window).scrollTop();
                var scrollTop = WindowScrollTop + o.marginTop;

                if (scrollTop >= topOffset){

                    obj.css({
                        marginTop: o.marginTop,
                        marginLeft: leftOffset,
                        position: 'fixed'
                    });
                }

                if (scrollTop < topOffset){

                    obj.css({
                        marginTop: marginTop,
                        marginLeft: marginLeft,
                        position: 'fixed'
                    });
                }
            });

        });
    }
});
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:59:54.970

试试这个：

```
if (scrollTop >= topOffset){
    obj.css({
        marginTop: o.marginTop,
        marginLeft: marginLeft, //<----change to this
        position: 'fixed'
    });
} 
```

# performance - 在 32 位和 64 位中使用实体框架的性能差异

> ID：14998593
> 
> 赞同：4
> 
> 时间：2013-02-21T09:25:54.260
> 
> 标签：performance, entity-framework-4, 64-bit, 32-bit

我在应用程序中使用 .NET Framework 4.0 中的实体框架。

将操作系统升级到 64 位版本后，我注意到应用程序中的 CPU 使用率更高。

专门为 x86 编译应用程序（而不是像以前那样使用任何 CPU），应用程序恢复到与操作系统升级之前大致相同的 CPU 使用率。

我使用下面的代码做了一些更详细的测量

*之前运行了一些预热代码，因此不会测量第一次创建上下文和第一次运行查询的开销。这些案例对我的应用程序来说不是很有趣，因为它是一个长时间运行的应用程序*

```
var s = Stopwatch.StartNew();
var name = "name";
for (var i = 0; i < 100000; ++i) {
    using (var context = new MyDatabaseEntities()) {
        var entity = context.MyEntities.FirstOrDefault(e => e.Name == name);
    }
}
s.Stop(); 
```

上面的代码为 x86 或 x64 编译（任何 CPU 给出与 x64 相同的结果）并在 Windows 7 64 位机器上运行。（数据库在不同的机器上运行）

在 x86s 中提供 12% 的性能差异。即如果x86 版本每秒运行100 个查询，那么x64 版本每秒运行88 个查询。

这是 .NET 上 32 位和 64 位之间的预期/正常性能差异吗？

我可以做些什么来在 64 位版本中获得与 32 位版本相同的性能吗？

*在上面的示例中，MyEntity 是一个非常简单的实体，具有 Id 和 Name*

*通常应用程序作为 Windows 服务运行，但在测量时，它作为普通 Windows 应用程序 (WPF) 运行*

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T09:34:12.480

你一遍又一遍地得到同一个实体？你到底想测试什么。实际应用程序的行为往往与您的测试不同。做一个真正的情景，你有不同的实体，你会得到其他的结果。仅当您知道如何使用您的应用程序时才应该对此进行测试。使用更多内存的应用程序通常在 64 位上性能更好。在您的情况下，内存使用率可能会很低，因此您可以获得更好的 32 位性能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T02:00:22.527

在我的情况下，我使用 asp.net 和 x86，因为内存使用量低于 2gb。x64 将使 memorou 使用量翻倍，但您可以分配超过 2gb。这是一个类似的问题： [x64 vs x86 Performance Considerations .Net](https://stackoverflow.com/questions/6512733/x64-vs-x86-performance-considerations-net)

# c# - 需要在c#中的字符串中的“单词”之后获取一个字符串

> ID：14998595
> 
> 赞同：57
> 
> 时间：2013-02-21T09:26:02.473
> 
> 标签：c#, string, substring

我在c#中有一个字符串，我必须在字符串中找到一个特定的单词“code”，并且必须在单词“code”之后获取剩余的字符串。

字符串是

> “错误描述，**代码**：-1”

所以我必须在上面的字符串中找到单词**代码**，我必须得到错误代码。我见过正则表达式，但现在清楚地理解了。有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-02-21T09:27:41.217

```
string toBeSearched = "code : ";
string code = myString.Substring(myString.IndexOf(toBeSearched) + toBeSearched.Length); 
```

像这样的东西？

也许你应该处理失踪的情况`code :`......

```
string toBeSearched = "code : ";
int ix = myString.IndexOf(toBeSearched);

if (ix != -1) 
{
    string code = myString.Substring(ix + toBeSearched.Length);
    // do something here
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-21T09:28:11.277

```
var code = myString.Split(new [] {"code"}, StringSplitOptions.None)[1];
// code = " : -1" 
```

您可以调整字符串以拆分 - 如果您使用`"code : "`，返回数组的第二个成员 ( `[1]`) 将包含`"-1"`，使用您的示例。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-21T09:29:37.500

更简单的方法（如果您唯一的关键字是 "code" ）可能是：

```
string ErrorCode = yourString.Split(new string[]{"code"}, StringSplitOptions.None).Last(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-12-31T20:12:24.187

将此代码添加到您的项目中

```
 public static class Extension {
        public static string TextAfter(this string value ,string search) {
            return  value.Substring(value.IndexOf(search) + search.Length);
        }
  } 
```

然后使用

```
"code : string text ".TextAfter(":") 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-21T09:29:01.127

使用`indexOf()`功能

```
string s = "Error description, code : -1";
int index = s.indexOf("code");
if(index != -1)
{
  //DO YOUR LOGIC
  string errorCode = s.Substring(index+4);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-15T23:28:50.503

```
string founded = FindStringTakeX("UID:   994zxfa6q", "UID:", 9);

string FindStringTakeX(string strValue,string findKey,int take,bool ignoreWhiteSpace = true)
    {
        int index = strValue.IndexOf(findKey) + findKey.Length;

        if (index >= 0)
        {
            if (ignoreWhiteSpace)
            {
                while (strValue[index].ToString() == " ")
                {
                    index++;
                }
            }

            if(strValue.Length >= index + take)
            {
                string result = strValue.Substring(index, take);

                return result;
            }

        }

        return string.Empty;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-07T02:12:51.313

```
string originalSting = "This is my string";
string texttobesearched = "my";
string dataAfterTextTobeSearch= finalCommand.Split(new string[] { texttobesearched     }, StringSplitOptions.None).Last();
if(dataAfterTextobeSearch!=originalSting)
{
    //your action here if data is found
}
else
{
    //action if the data being searched was not found
} 
```

# android - 如何在 Android 应用程序中使用 Soft/WeakReference 类？

> ID：14998596
> 
> 赞同：0
> 
> 时间：2013-02-21T09:26:02.080
> 
> 标签：android, weak-references, soft-references

我正在维护一个包含大量图像的大型应用程序。我的主要问题是应用程序在我使用它时崩溃，因为它会产生内存错误。我正在尝试使用 SoftReferences 和 WeakReferences，我已经阅读过，但我不知道是否必须在 GridView、BaseAdapter 或 ImageView 等 Android 类中使用它们。

我的应用程序有一个带有标记的地图活动，顶部有一个画廊。当我点击一个气球时，第二个活动会出现一个网格视图。

第一个活动，当我移动地图时，活动会重新加载图库中的所有标记和图像并添加新的标记和图像。它具有以下属性：

射击按钮 射击按钮；画廊画廊；列出图像；私有 ImageView mMyLocationImage；

```
Dialog spinnerDialog;

private GoogleMap map;

private HashMap<String, Marker> identified_marker = new HashMap<String, Marker>();
private HashMap<Marker, DavinciImage> identified_XXX_images = new HashMap<Marker, XXXImage>();

private GalleryAdapter gallery_adapter;

private AsyncTask<Poi, Void, Void> refresh_pois_async = null;

@Override
public void onCreate(Bundle savedInstanceState) {
       ----
       new SoftReference<List<Object>>(XXXImages);
       new WeakReference<HashMap<String, Marker>>(identified_marker);
   new WeakReference<HashMap<Marker, XXXImage>>(identified_XXX_images);
    } 
```

我的问题是当我移动地图、销毁或暂停活动时，我必须使用软/弱引用类做任何新的事情来释放内存？我是否必须添加带有软/弱引用类的新属性，例如必须将 GalleryAdapter 添加到软/弱引用类中，或者系统为我释放此内存？

第二个活动有一个包含用户所有图像的网格视图。我在进入活动时加载所有数据，并在活动需要时加载图像。我在这个活动中有以下内容。

```
ImageView                   mUserImage;
public String               myApplicationUserId;
public GridAdapter          imageAdapter    = null;
public GridView             gridview        = null;
public ImageLoader_Profile  mImageLoaderMedium;

---
gridview.setScrollingCacheEnabled(true);
gridview.setFriction(10);

---
new WeakReference<ImageLoader_Profile>(mImageLoaderMedium); 
```

ImageLoader_Profile 管理图像的加载。

```
public class ImageLoader_Profile{

   MemoryCache                     memoryCache = new MemoryCache( );
   private Map< ImageView, String> imageViews  = Collections.synchronizedMap( new WeakHashMap< ImageView, String>( ));

   public ImageLoader_Profile( Context context, Bitmap canvas, int deviceDensity) {

       ....        
       new SoftReference<MemoryCache>(memoryCache);
       new SoftReference<Map<ImageView,String>>(imageViews);
   } 
```

在这种情况下，这是我需要做的全部还是我必须对软引用做任何其他事情？我有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:49:07.673

你不应该再软/弱引用缓存了。

从Android 2.3开始改变垃圾回收过程，软弱引用缓存系统失效。

现在，你应该使用 LruCache，这很好:)

如何使用 LruCache？尝试这个

[缓存位图](http://developer.android.com/intl/ja/training/displaying-bitmaps/cache-bitmap.html)

# sharepoint - BaseTemplateName、BaseTemplateID 和 BaseConfigurationID 的用途是什么？（共享点）

> ID：14998600
> 
> 赞同：0
> 
> 时间：2013-02-21T09:26:14.243
> 
> 标签：sharepoint

BaseTemplateName、BaseTemplateID 和 BaseConfigurationID 的作用是什么？它们在 webtemplate elements.xml 中的用途是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:06:34.393

**BaseTemplateName** - 来自您希望 Web 模板所基于的开箱即用的网站模板（可以是 STS、SRCHCEN、...）

**BaseTemplateID** - 连同缩写名称，您还必须提供基本站点模板 ID（1 - 用于 STS，50 - 用于 SRCHCEN）

**BaseConfigurationID** - 它是配置 ID。每个站点模板可以有多个配置（对于 Web 模板，您只能有一个 - 0）。例如，如果基本模板是 STS，您可以将配置 0、1 或 2 对应于团队站点、空白站点和文档工作区。

检查以下[链接 http://blumenthalit.com/blog/Lists/Posts/Post.aspx?ID=45](http://blumenthalit.com/blog/Lists/Posts/Post.aspx?ID=45)

# php - Yii中如何从模型中选择对象取决于关系表

> ID：14998606
> 
> 赞同：0
> 
> 时间：2013-02-21T09:26:27.030
> 
> 标签：php, activerecord, yii

我是 Yii 新手，对 AR 关系感到困惑 例如，我有两个具有 MANY_MANY 关系的表

```
CREATE TABLE `banner` (
  `banner_id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `banner_action` varchar(255) DEFAULT NULL,
  ...
  PRIMARY KEY (`banner_id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;

CREATE TABLE `position` (
  `position_id` tinyint(3) unsigned NOT NULL AUTO_INCREMENT,
  `position_name` varchar(64) NOT NULL,
  PRIMARY KEY (`position_id`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;

CREATE TABLE `banner_position` (
  `banner_id` int(11) NOT NULL,
  `position_id` tinyint(4) NOT NULL,
  PRIMARY KEY (`banner_id`,`position_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

横幅可以位于一个或多个位置，例如 id 为 1 的横幅可以放置在位置 1 和 2，横幅 2 可以放置在 2 和 3 现在我想抓取位置 2 的所有横幅，预计我现在得到两个横幅我还想检查横幅字段，如果它为空或“测试”，则获取此横幅

在没有像这些 SQL 这样的 ORM id 的简单生活中

```
SELECT b.banner_id FROM banner b
INNER JOIN banner_position bp ON bp.banner_id = b.banner_id AND bp.position_id = 2
WHERE (b.banner_action = 'test' OR b.banner_action IS NULL) 
```

在 Yii 我无法理解如何成为

我写了banner_action的标准

```
$select = new CDbCriteria;
$select->addCondition(array('banner_action = "test" OR banner_action IS NULL')); 
```

并使用模型得到结果

```
$banner = BannerModel::model()->find($select); 
```

我现在如何添加职位标准，我应该使用 $model->with(???) 还是只是将 JOIN 添加到标准中？

```
$select->join = 'INNER JOIN banner_position bp ON bp.position_id = 2 AND bp.banner_id = t.banner_id'; 
```

另外我在 JOIN 中使用相关名称`t`，因为它默认用于 SQL 构建，这是正确的，还是我需要使用方法来获取正确的相关名称，以防在某些情况下已更改？

我也尝试关系方式

```
public function relations()
{
    return array(
        'positions' => array(self::MANY_MANY, 'PositionModel',
            'banner_position(banner_id, position_id)')
    );
} 
```

而这个选择（我不知道如何添加诸如banner_action ='test'或banner_action之类的标准无论如何都是空的）

```
$banner = BannerModel::model()
                ->with('positions')
                ->find('positions.position_id = 2'); 
```

并且 Yii 构建 SQL 看起来不像我预期的那样（我需要 INNER JOIN 并且我不需要`positions`表连接仅banner_positions（这是条件选择））并且似乎连接标准是获得我需要的简单和干净的 sql 的唯一方法我得到了无论如何，结果集中的模型......也许 Yii 没有办法处理条件关系？

```
SELECT `t`.`banner_id` AS `t0_c0`, `t`.`banner_type` AS `t0_c1`, `t`.`banner_content` AS `t0_c2`, `t`.`banner_target` AS `t0_c3`, `t`.`banner_controller` AS `t0_c4`, `t`.`banner_action` AS `t0_c5`, `t`.`banner_param_type` AS `t0_c6`, `t`.`banner_param_direction` AS `t0_c7`, `t`.`banner_param_kind` AS `t0_c8`, `positions`.`position_id` AS `t1_c0`, `positions`.`position_name` AS `t1_c1` FROM `banner` 
`t`  LEFT OUTER JOIN `banner_position` `positions_positions` ON (`t`.`banner_id`=`positions_positions`.`banner_id`) 
LEFT OUTER JOIN `position` `positions` ON (`positions`.`position_id`=`positions_positions`.`position_id`)  
WHERE (positions.position_id = 2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:19:24.017

As you tagged this question active record you should be using [relational Active Records](http://www.yiiframework.com/doc/guide/1.1/en/database.arr).

You have to define a relation between your tables in your models:

for example for `Banner`

```
public function relations()
{
    return array(
        'positions'=>array(self::MANY_MANY, 'Position',
            'banner_position(banner_id, position_id)'),
    );
} 
```

and then it will create an array of all the positions in your `Banner` model.

# json - KendoUI 和 json

> ID：14998612
> 
> 赞同：0
> 
> 时间：2013-02-21T09:26:54.063
> 
> 标签：json, html, kendo-ui

我对 kendoUI 和 json 很陌生，我的问题是数据似乎没有加载，可能是模式不正确或其他什么，没有错误，只是组合框一直在加载。这是我的示例代码：

```
$(document).ready(function () {
    clientDS = new kendo.data.DataSource({
        transport: {
            read: {
                url: "http://localhost/JSON_MP.asmx/GetListCountries?developerId=101&developerHash=9df7273b410761f74331bde746e5c2354b73b487&timestamp=1242207092430",  //Note the URL path!
                dataType: "json",
                contentType: "application/json; charset=utf-8"

            }
        },
        schema: {
            data: "listValues"               
        }
    });

    $("#kendoCboClient").kendoComboBox({
        placeholder: "Select a Country...",
        dataTextField: "name",
        dataValueField: "id",
        dataSource: clientDS
    });
}); 
```

和我的数据堆栈：

{"errorString":"ok","errorCode":0,"listValues":[{"name":"UNKNOWN","id":1},{"name":"南非","id": 2},{"name":"莫桑比克","id":3},{"name":"菲律宾","id":4},{"name":"纳米比亚","id":5} ,{"name":"阿拉伯联合酋长国","id":6},{"name":"England","id":7},{"name":"Swaziland","id":8} ,{"name":"葡萄牙","id":9},{"name":"希腊","id":10},{"name":"毛里求斯","id":11},{ "name":"坦桑尼亚","id":12},{"name":"博茨瓦纳","id":13},{"名称":"西班牙","id":15},{"name":"苏格兰","id":16},{"name":"澳大利亚","id":17},{"name" :"新西兰","id":18},{"name":"塞浦路斯","id":19},{"name":"美国","id":20},{"name" :"德国","id":21},{"name":"","id":22},{"name":"马达加斯加","id":23},{"name":"马来西亚","id":24},{"name":"塞舌尔","id":25}],"listType":"Country"}"新西兰","id":18},{"name":"塞浦路斯","id":19},{"name":"美国","id":20},{"name": "德国","id":21},{"name":"","id":22},{"name":"马达加斯加","id":23},{"name":"马来西亚" ,"id":24},{"name":"塞舌尔","id":25}],"listType":"Country"}"新西兰","id":18},{"name":"塞浦路斯","id":19},{"name":"美国","id":20},{"name": "德国","id":21},{"name":"","id":22},{"name":"马达加斯加","id":23},{"name":"马来西亚" ,"id":24},{"name":"塞舌尔","id":25}],"listType":"Country"}id":24},{"name":"Seychelles","id":25}],"listType":"Country"}id":24},{"name":"Seychelles","id":25}],"listType":"Country"}

如果有人可以将我指向正确的方向或某事，请注意在数据堆栈中我使用“listValues”对象，可能是因为“”errorString“：”ok“，”errorCode“：0，”那是问题的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:29:20.397

我刚刚尝试了您的代码并且运行良好！我只需要更改一行代码：url，因为当然，我没有将文件部署在与您相同的路径中。

我说过了...：

1.  尝试在您的浏览器中打开您`url`在代码中键入的内容，并检查它是否确实返回了您在问题中包含的 JSON。
2.  如果前一点工作正常，那么如果您的浏览器有开发人员工具，请检查浏览器控制台中是否没有错误。
3.  如果您没有开发人员工具或不知道如何使用它们，请尝试：

.

```
var clientDS = new kendo.data.DataSource({
    transport: {
        read: function (options) {
            $.ajax({
                url    : "http://localhost/JSON_MP.asmx/GetListCountries?developerId=101&developerHash=9df7273b410761f74331bde746e5c2354b73b487&timestamp=1242207092430",
                data   : options.data,
                success: function (result) {
                    alert("Good!");
                    options.success(result);
                },
                error  : function (xhr, textStatus, errorThrown) {
                    alert("bad!: " + xhr.status + " - " + textStatus + " - " + errorThrown);
                }
            });
        }
    },
    schema   : {
        data  : "listValues"
    }
});
$("#kendoCboClient").kendoComboBox({
    placeholder   : "Select a Country...",
    dataTextField : "name",
    dataValueField: "id",
    dataSource    : clientDS
}); 
```

并查看是否显示*错误*警报并为您提供一些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T16:19:40.767

我有一个类似的问题 - 没有数据也没有错误。实际问题是返回 json 数据的页面发送的是“html”内容类型标头而不是“application/json”。这个问题实际上在这里得到了解决：[http](http://docs.kendoui.com/tutorials/PHP/build-apps-with-kendo-ui-and-php) ://docs.kendoui.c​​om/tutorials/PHP /build-apps-with-kendo-ui-and-php（向下滚动到“没有数据......”部分）并通过确保您发送正确的内容类型标头来修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T19:53:58.787

就我而言，我有这个：我的测试 html 文件来自本地文件系统，而我从服务器 url 加载的 json 对象。有一次，我将 url 更改为从本地文件系统读取，它解决了问题

# android - SlidingMenu 在方向从横向更改为纵向时损坏

> ID：14998618
> 
> 赞同：3
> 
> 时间：2013-02-21T09:27:02.847
> 
> 标签：android, slidingmenu

对于我的应用程序，我使用来自 jfeinstein10 的 github 库 SlidingMenu。实施并不困难。但是，我遇到了关于方向的问题。因为当应用程序以横向启动并且设备旋转到纵向时，SlidingMenu 会损坏。左侧可见灰色叠加层，当我滑出菜单时，它显示在屏幕右侧而不是左侧，并且没有内容。

我已经在 Github 上报告了这个问题：[https ://github.com/jfeinstein10/SlidingMenu/issues/297](https://github.com/jfeinstein10/SlidingMenu/issues/297)

有人可以帮我解决这个问题吗？

编辑：重要的细节是方向更改由我在 onConfigurationChange 中的 Activity 处理。

截图： ![截图一：灰色叠加](../Images/4b52d459dc903cecd54d93991727b8e4.png) ![屏幕截图 2：右侧而不是左侧的菜单](../Images/e115359225756862766168549ca51b75.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T12:52:23.927

我创建了一个解决方法。这是 Github 上描述的我的解决方法的链接：[https ://github.com/jfeinstein10/SlidingMenu/issues/297#issuecomment-13941430](https://github.com/jfeinstein10/SlidingMenu/issues/297#issuecomment-13941430)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:57:10.607

正如 GitHub 答案之一中所建议的，尝试重新初始化 onConfigurationChanged 中的 SlidingMenu。

也不要忘记`removeAllViews()`在*parent*和*decorView*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T20:19:04.467

我找到了一个可能对你们有用的非常简单的修复：[https ://github.com/jfeinstein10/SlidingMenu/issues/297#issuecomment-21372380](https://github.com/jfeinstein10/SlidingMenu/issues/297#issuecomment-21372380)

# amazon-web-services - AWS EMR 自动扩展

> ID：14998620
> 
> 赞同：0
> 
> 时间：2013-02-21T09:27:05.873
> 
> 标签：amazon-web-services, hive, amazon-emr, autoscaling

我正在研究 AWS 上的 Hive（特别是 EMR）。他们提供了两种选择

1.  生成一个 Ad-hoc 集群，其中在评估执行预先指定的 Hive 查询（在引导程序中）之后拆除 EMR 集群。
2.  以交互模式生成 Hive 集群，可以通过 SSH 连接到主节点并使用`hive`命令行客户端提供 Hive 查询。

显然，在第二个选项中，集群将保持活动状态，直到明确要求终止。

我想修改保持活动蜂巢集群中从节点的数量。[我在emr faq](http://aws.amazon.com/elasticmapreduce/faqs/#cluster-16)中读到它只支持添加和删除，`task-nodes`但仅支持添加（但不删除）`core-nodes`. 核心节点对 HDFS 存储有贡献，但任务节点没有。

我想将更多核心节点添加到正在运行的集群中，并在运行的查询数量较少时缩小它们。有没有办法实现这一点（可能是使用 cloudwatch）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T20:41:19.540

查询数量的增减与任务节点的数量（Hadoop 的计算部分）的相关性更大，而与核心节点的数量（Hadoop 的数据存储部分）的相关性较小，因为数据量没有变化。

当您想要扩大和缩小查询时重新平衡和重新分配数据并不是一个好主意。它太慢太复杂，无法带来任何真正的好处。

“按需付费”和无需配置 EMR 的快速启动应该会鼓励您在不需要时关闭集群，并在需要时启动新集群。您可以在 EMR 上优化 Hive，以便在集群启动之间将表元数据存储在外部 MySQL 数据库中，以避免丢失或重复表定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-27T14:21:38.380

您可以查看[Themis](https://github.com/atlassian/themis)，这是 Atlassian 开发的 EMR 自动缩放框架。当前功能包括主动和被动自动缩放，它带有一个 Web UI，并且该工具非常易于配置。

（很抱歉在旧帖子中发帖，但对于发现此帖子的读者来说，答案可能仍然很有趣。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-24T20:00:38.017

让数据节点也扩大规模是有一些价值的。对于长时间运行的集群，仅使用任务节点扩展太多可能会导致 HDFS 瓶颈（如果有大量中间数据。）

你考虑过看趣博乐吗？Qubole 提供基于负载的自动扩展和缩减。用户配置具有最小和最大从节点的集群。这些将是任务节点和数据节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-21T21:50:35.927

我知道我在这里聚会有点晚了，但我多次遇到类似的问题，我想分享一个可能的替代方案。我编写了一个 Java 工具来在处理过程中动态调整 EMR 集群的大小。它可能会帮助某人。在以下位置查看：

[http://www.lopakalogic.com/articles/hadoop-articles/dynamically-resize-emr/](http://www.lopakalogic.com/articles/hadoop-articles/dynamically-resize-emr/)

源代码在 Github 上可用

# python - 等待 gevent socket 和 redis 阻塞 blpop

> ID：14998623
> 
> 赞同：0
> 
> 时间：2013-02-21T09:27:12.610
> 
> 标签：python, redis, gevent

我正在使用 gevent StreamServer 来处理来自客户端的传入连接。

客户端连接后，客户端会向服务器发送一些消息，服务器会进行处理。这方面一切正常。但有时服务器也会将消息发送回特定的客户端。

我会用redis做到这一点。我创建了一个以特定客户端 ID 作为键的队列。客户端发送消息后，我检查队列，如果有任何消息，我将其发送回客户端。

这种方法的缺点是，服务器只能在客户端发送消息之后发送消息。

有没有一种方法可以同时等待传入数据和redis blpop，这样我就可以在消息准备好后立即将消息发送回客户端，而不是等到客户端发送下一个数据？

```
import gevent
from gevent import socket
from gevent.server import StreamServer
import redis 

r = redis.Redis('localhost')

def handle_echo(sock, address):
    fp = sock.makefile()
    while True:
        line = fp.readline()
        if line:
            client_id = line.split(",")[0]
            if r.llen('%s:servercmds' % client_id) > 0:
                tosend = r.lrange('%s:servercmds' % imei, 0, 0)[0]
                try:        
                    fp.write(tosend)
                    fp.flush()
                    r.lpop('%s:servercmds' % imei)
                except:
                    print('cannot send data to client')
            else:
                break
        sock.shutdown(socket.SHUT_WR)
        sock.close()

server = StreamServer(('', 8045), handle_echo, spawn=10000)
server.serve_forever() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:18:01.893

您需要客户端保持连接打开，以便您可以将消息发送回它，或者自己监听消息。

编辑：这是我脑海中的代码。IMO 像这样拆分阅读和写作是很常见的。不过，这不是您可以使用的唯一模式。

```
import gevent
from gevent import socket
from gevent.server import StreamServer
import redis 

r = redis.Redis('localhost')

def handle_echo(sock, address):
    def read_loop(sock):
        while True:
            try:
                socket.wait_read(sock.fileno())
            except socket.error:
                break
            # read from socket

    def write_loop(sock):
        while True:
            try:
                socket.wait_write(sock.fileno())
            except socket.error:
                break
            # write to socket

    jobs = [gevent.spawn(func, sock) for func in (read_loop, write_loop)]
    gevent.joinall(jobs)

server = StreamServer(('', 8045), handle_echo)
server.serve_forever() 
```

# node.js - Node.js 中的中间件与 OO JavaScript

> ID：14998627
> 
> 赞同：2
> 
> 时间：2013-02-21T09:27:16.333
> 
> 标签：node.js, openshift, passport.js

目前我正在尝试在面向对象的 Node.js 服务器中使用中间件“passport”。重新启动服务器后一切正常。我可以访问不需要身份验证的路由。但是当我尝试通过身份验证访问路由时，我总是得到响应 401（无身份验证）。这似乎没问题，但不幸的是我没有在 LocalStrategy 中输入函数（用户名、密码、完成）。

所以我认为我的问题在于我尝试使用 oo javascript 样式的中间件的方式。我开始使用的模板来自 RedHat OpenShift Cloud，可以在以下位置看到：[https ://github.com/openshift/nodejs-custom-version-openshift/blob/master/server.js](https://github.com/openshift/nodejs-custom-version-openshift/blob/master/server.js)

这是我尝试使用护照中间件的服务器初始化方法：

```
self.initializeServer = function() {

    self.createGetRoutes();
    self.createPostRoutes();

    self.app = express.create();

    passport.use(new LocalStrategy(
        function(username, password, done) {
            console.log("TEST");

            process.nextTick(function () {
                console.log('Here I am!');
                return done(null, user);
            });
        }
    ));

    self.app.configure(function() {
        self.app.use(passport.initialize());
    });

    // Paths without authentication
    self.app.get('/holy', function(req, res) {res.send('SHIT! \n')});

    //  Add GET handlers for the app with authentication (from the getRoutes).
    for (var g in self.getRoutes) {
        self.app.get(g, passport.authenticate('local', { session: false }), self.getRoutes[g]);
    }

    // Add POST handlers for the app with authentication (from the postRoutes).
    for (var p in self.postRoutes) {
        self.app.post(p, passport.authenticate('local', { session: false }), self.postRoutes[p]);
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:00:09.757

您的问题是您没有使用正确的策略。您应该使用 BasicStrategy 来使用 http 身份验证：[Passport-HTTP](https://github.com/jaredhanson/passport-http)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:30:04.623

在我看来，您没有使用`express.router()`中间件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-24T09:22:16.480

您还可以使用[http-auth](http://http-auth.info)进行 HTTP Basic/Digest 身份验证：

```
// Authentication module.
var auth = require('http-auth');
var basic = auth.basic({
    realm: "Simon Area.",
    file: __dirname + "/../data/users.htpasswd" // gevorg:gpass, Sarah:testpass ...
});

// Creating new HTTP server.
http.createServer(basic, function(req, res) {
    res.end("Welcome to private area - " + req.user + "!");
}).listen(1337); 
```

或者您可以将其与[护照](http://passportjs.org)一起使用：

```
// Authentication module.
var auth = require('http-auth');
var basic = auth.basic({
    realm: "Simon Area.",
    file: __dirname + "/../data/users.htpasswd" // gevorg:gpass, Sarah:testpass ...
});

// Application setup.
var app = express();

// Setup strategy.
var passport = require('passport');
passport.use(auth.passport(basic));

// Setup route.
app.get('/', passport.authenticate('http', { session: false }), function(req, res) {
    res.end("Welcome to private area - " + req.user + "!");
}); 
```

# php - 准备好的语句正字法

> ID：14998631
> 
> 赞同：0
> 
> 时间：2013-02-21T09:27:21.860
> 
> 标签：php, mysql, prepared-statement

[与 Tony 一起编程中解释的准备好的语句](http://www.youtube.com/watch?v=nLinqtCfhKY)将参数放在 SQL 字符串之外。

所以我的问题是：

1.  MySQL 中的小写大写有多重要？（选择 v 选择；AND v 和）
2.  “反引号”去掉名字有多重要？(SELECT 'name' FROM 'table' WHERE variable = :variable) [我不知道如何在此处添加反引号]
3.  我应该将整数/数字作为字符串输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:51:53.050

> 1.- MySQL 中小写大写有多重要？（选择 v 选择；AND v 和）

SQL 命令不区分大小写。将它们大写是一种常见的做法，这样它们更容易被发现，但这不是强制性的。

> 2.-“反引号”去掉名字有多重要？（从“表”中选择“名称”WHERE 变量 =：变量）

当对象名称为保留字或包含特殊字符（如空格）时，您必须对其进行转义。否则，它完全是可选的。

反引号语法仅适用于 MySQL。其他数据库使用双引号或方括号。

> [我不知道如何在这里添加反引号]

使用“代码示例”工具栏按钮：

![代码示例](../Images/cfe4302b5a3e6461e36bb9c2c299aafa.png)

> 3.- 我应该将整数/数字作为字符串输入吗？

如果这样做，MySQL 将不得不将它们转换为数字。您不会注意到性能损失，但没有特定理由使用字符串。它与在 PHP 中这样做一样多余：

```
echo "$name"; 
```

此外，您的编辑器的语法高亮不会区分数字：

![数字作为字符串](../Images/b2e221197ef6b412865e138d15aba892.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:34:50.107

1.  使用 UPPER CASE 因为它更容易看出什么是 SQL 关键字，什么不是。
2.  养成始终使用反引号的习惯，例如，如果您有一个名为“Dec”的列并且不在查询中使用反引号，您将收到错误，因为 DEC() 是一个 SQL 函数。
3.  绝对地。SQL 自动将数字字符串转换为数值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:32:28.903

**回答**

1.  是的，您可以同时使用这两种情况（大写，小写）。

2.  当您使用 mysql 的一些保留字作为列名时，您必须使用反引号。

3.  是的，您可以将整数/数字作为字符串放入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:36:12.677

1.  我个人认为大写有助于区分 SQL 关键字与表名和列名。
2.  反引号很有帮助，因为在某些时候，您最终可能会得到一个包含特殊字符或 MySQL 保留关键字的标识符。要使用标识符或特殊字符，您必须用反引号将其引用。
3.  是的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T10:51:46.197

> MySQL 中的小写大写有多重要？（选择 v 选择；AND v 和）

使用大写字母很重要，但仅出于可读性目的。

> “反引号”去掉名字有多重要？

这取决于。
对于硬编码的标识符，它们是可选的，但对于动态标识符，它们是**强制性**的，因为您不知道将传递哪个值。当然，您还必须通过将反引号加倍来逃避传递值内的反引号。

> 我应该将整数/数字作为字符串输入吗？

这取决于。
一般来说没有区别。
如果您使用带有动态绑定的丑陋mysqli，将所有变量绑定为“s”会更容易。
但是在使用 PDO 时，必须小心将 LIMIT 参数设置为字符串 - 模拟模式下的 PDO 会破坏 SQL。

# c# - 如何将加载项迁移到 Office 2013？

> ID：14998641
> 
> 赞同：5
> 
> 时间：2013-02-21T09:27:42.760
> 
> 标签：c#, vsto, office-2010, office-2013

我找到[了这个链接](http://msdn.microsoft.com/en-us/library/office/apps/fp142161%28v=office.15%29)，它的底线预示着我迄今为止用来创建 Office 插件（即好的、旧的、好的 C# 代码）的东西将完全换成 JavaScript。

例如，我们有一个解决方案，将一组按钮放在功能区上，并与 CRM 服务器通信以添加数据（一个在 Outlook 中，一个在 Word 中）。那些需要整体重写吗？！

如果可能，我希望使用 VSTO（显然，据说 AddInExpress 不可靠）。建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T19:22:33.563

我还没有尝试过，但我认为 C# 或 VB.NET 并没有在这种情况下被放弃。这是 VSTO 团队最近的一篇博客，其中包含使用 C# 的 Addin 解决方案的屏幕截图，以及使用 VB.NET 项目模板的另一个屏幕截图。 [http://blogs.msdn.com/b/vsto/archive/2013/03/06/office-developer-tools-for-visual-studio-2012-now-available.aspx](http://blogs.msdn.com/b/vsto/archive/2013/03/06/office-developer-tools-for-visual-studio-2012-now-available.aspx)

# asp.net-mvc - 验证 mvc4 中的下拉菜单？

> ID：14998645
> 
> 赞同：0
> 
> 时间：2013-02-21T09:27:51.900
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我想确保用户在提交表单之前从下拉列表中选择一个值。请在下面查看我的代码。我究竟做错了什么 ？谢谢

**看法**

```
 @model Store.Models.StoreDTO
      List<Store.Models.CountryDTO> countriesList= ViewBag.Countries;
            var countryItems = new SelectList(countriesList, "CId", "CName");

    @Html.DropDownListFor(x => x.Countries.SingleOrDefault().CId, @countryItems )
                     @Html.ValidationMessageFor(x=>x.Countries.SingleOrDefault().CId) 

    <input class="btn btn-info" type="submit" value="Search" /> 
```

**视图模型**

```
public class StoreDTO
{
public IEnumerable<CountryDTO> Countries { get; set;}
}

public class CountryDTO
{
    [DisplayName("CId")]
    [UIHint("DropDownList")]
    [Required(ErrorMessage = "Please select a Country")]
    public string CId { get; set; }
    [Required]
    public string CName { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:35:23.023

助手不支持以下 lambda 表达式：

```
x => x.Countries.SingleOrDefault().CId 
```

仅支持简单的属性访问表达式。

正确的方法是在视图模型上定义一个 Cid 属性，该属性将保存下拉列表中选定的国家 ID：

```
public class MyViewModel
{
    [DisplayName("CId")]
    [Required(ErrorMessage = "Please select a Country")]
    public string CId { get; set; }

    ...
} 
```

然后在您的视图中将下拉列表绑定到此标量属性：

```
@Html.DropDownListFor(
    x => x.CId, 
    new SelectList((IEnumerable<Store.Models.CountryDTO>)ViewBag.Countries, "CId", "CName"),
    "-- SELECT --"
)
@Html.ValidationMessageFor(x => x.CId) 
```

# apache - Apache Allowoverride FileInfo 安全处理

> ID：14998646
> 
> 赞同：1
> 
> 时间：2013-02-21T09:27:58.143
> 
> 标签：apache, security, .htaccess, zend-framework2

我想通过在 httpd.conf 文件中使用“Allowoverride FileInfo”来了解安全问题，它允许 htaccess 文件（我的 htaccess 文件只进行在 zend2 中定义的重定向）。我正在为我的项目使用 zend 框架 2.x（就像一些购物车网站一样）。

```
I have researched and I got the following information.

 1\. Better to place "Allowoverride FileInfo" inside "Directory" directive for better      performance.
 2\. Use "AccessFileName .config" instead of allowing .htaccess we can use .config, which might help some way security.
 3\. Just copiying the htaccess code to httpd.conf file(for which there is no security risk, as "Allowoverride None" is used). 
```

但没有关于安全问题，这是主要问题。

```
Could somebody help me with information if .htaccess file is used.

1\. What are the security measures I have to take care ?.
2\. Is there a chance of intrusion?. 
```

谢谢，迪利普。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-08T16:24:56.380

这是个好问题。作为答案的开始，如[核心文档所述：Apache HTTP Server Version 2.4](https://httpd.apache.org/docs/2.4/mod/core.html)， FileInfo 权限执行以下操作：

> 文件信息
> 
> 允许使用控制文档类型的指令（ErrorDocument、ForceType、LanguagePriority、SetHandler、SetInputFilter、SetOutputFilter 和 mod_mime Add* 和 Remove* 指令）、文档元数据（Header、RequestHeader、SetEnvIf、SetEnvIfNoCase、BrowserMatch、CookieExpires、CookieDomain、CookieStyle 、CookieTracking、CookieName）、mod_rewrite 指令（RewriteEngine、RewriteOptions、RewriteBase、RewriteCond、RewriteRule）、mod_alias 指令（Redirect、RedirectTemp、RedirectPermanent、RedirectMatch）和来自 mod_actions 的 Action。

因此，如果任何可能控制`.htaccess`目录树中文件的人滥用这些指令中的任何一个，那么您可能会遇到问题。例如，如果您将控制权委托给您的目录树的某些部分，您应该相信这些管理员可以使用所有这些指令。

但也要注意，一般来说，从 conf 文件进行配置比使用`.htaccess`.

但是，如果您有充分的理由使用`.htaccess`，并且可以有效控制整个目录树中的所有内容，或者至少是文件，那么只要您使用每个指令，`.htaccess`似乎不应该增加太多安全风险`AllowOverride FileInfo`您选择以安全的方式使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-12T00:39:49.890

您可以使用网页安全脚本（自制或付费（我制作它们）来跟踪页面浏览量以及来自什么 IP 和时间，或者使用您的日志，您还可以制作授权文件（我制作它们并可以帮助您） ) 并使其自动禁止不正确的登录尝试，对于其他事物（网页除外），例如 ftp，您可以使用 ssl 或 rsa 安全证书，每次尝试都会更改，vpn 证书也是如此，但它确实是您需要的，通过默认 .htaccess 文件应设置为只读且从不允许覆盖（使用您的 apache2 conf 文件）。我希望这能回答您的问题，如果不是的话，可能会告诉我更多关于您希望保护的内容，我目前正在制作一个脚本在未经授权的用户泄露或访问某个文件/页面时向您发送电子邮件。

# mysqli - Ubuntu 12.04 LOCAL_INFILE 上的 MySQL 仍然被禁用

> ID：14998647
> 
> 赞同：1
> 
> 时间：2013-02-21T09:27:59.290
> 
> 标签：mysqli, ubuntu-12.04

在 Ubuntu 12.04 64 位 LTS 上，包括 MySQL 版本 5.5.29 - 我正在 mysql 中尝试 LOAD DATA LOCAL INFILE 命令，但它失败了

`DB Error (1148) The used command is not allowed with this MySQL version`

我做了以下事情：

添加`local-infile=1`到/etc/mysql/my.cnf文件的**[mysql]**和**[mysqld]**部分，重启mysql服务；

将行选项 MYSQLI_OPT_LOCAL_INFILE,TRUE 添加到我的 mysqli 启动中：

```
function dbConnect($dbHost, $dbUser, $dbPass, $dbName) {
    $mysqli = new mysqli($dbHost, $dbUser, $dbPass, $dbName);
    $mysqli->options(MYSQLI_OPT_LOCAL_INFILE,TRUE);
    if ($mysqli->connect_error)
        die('DB Connect Error (' . $mysqli->connect_errno . ') '. $mysqli->connect_error);
    return $mysqli;
} 
```

但我仍然收到错误？可能这个mysql版本没有编译Local-infile选项？

# java - Java - 如何在每页上打印行号？

> ID：14998649
> 
> 赞同：3
> 
> 时间：2013-02-21T09:28:01.153
> 
> 标签：java, swing, printing, jtable, awt

我正在努力以自己的方式打印 JTables。这是我在打印时想要获得的：

```
 Page 1        Page 2        Page 3
    |  1  2  3 |  |  4  5  6 |  |  7  8  9 |
    |1         |  |1         |  |1         |
    |2         |  |2         |  |2         |
    |3         |  |3         |  |3         |

       Page 4        Page 5        Page 6
    |  1  2  3 |  |  4  5  6 |  |  7  8  9 |
    |4         |  |4         |  |4         |
    |5         |  |5         |  |5         |
    |6         |  |6         |  |6         | 
```

如您所见，我想在每一页上获取 tableHeader （我成功地得到了！），以及每一页上的行号。有没有人已经做过这样的事情？

这就是我的 JTable 的管理方式：

```
scrollPane = new JScrollPane();
scrollPane.setViewportView(table);     // basic JTable
scrollPane.setRowHeaderView(rowTable); // basic JTable with only 1 column
tableHeader = table.getTableHeader();  //
scrollPane.setColumnHeaderView(tableHeader); 
```

我尝试执行类似 in 的操作`javax.swing.TablePrintable`，即每次计算剪辑在哪里打印表格，但没有成功：行号仅打印在第一页上。我有点绝望，有什么想法吗？

编辑：这里有一些图片（太大，无法在这里发布）来展示我目前获得的内容，以及我想要获得的内容：

*   第 1 页和第 2 页：http: [//i.imgur.com/euzeq70.png](http://i.imgur.com/euzeq70.png)

    如您所见，第二页上的行号应该相同，因为它是表格的左侧（表格的宽度适合 2 页）

*   第 3 页和第 4 页：http: [//i.imgur.com/YCFLu4X.png](http://i.imgur.com/YCFLu4X.png)

    桌子的中间部分。如您所见，现在行号不应该是`1 ... 49`but `50 ... 99`，而且它们仍然不会显示在左页上

*   第 5 页和第 6 页：http: [//i.imgur.com/4xugX4j.png](http://i.imgur.com/4xugX4j.png)

    桌子的底部。行号应该`100`并且也出现在左侧页面上。

我希望这现在更清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T08:08:20.453

我认为最容易获得解决方案是生成类似

```
public class WrapPrintable implements Printable 
```

并覆盖

```
 public int print(final Graphics graphics,
               final PageFormat pageFormat,
               int pageIndex) throws PrinterException { 
```

用于 Paperformat 的设置以添加额外的页眉和/或页脚空间，并编写一些方法，例如

```
Graphics2D g2d = printGraphics(graphics, pageFormat, pageIndex, format); 
```

以及`printGraphics`您需要自己创建的页眉/页脚调整...我已经做过一次了，但是代码很容易爆炸，因此只有小片段。

# c# - 需要逻辑帮助

> ID：14998651
> 
> 赞同：0
> 
> 时间：2013-02-21T09:28:07.557
> 
> 标签：c#, facebook, facebook-c#-sdk

此代码只工作一次，即用户上线和下线时。我想以这样一种方式循环，它总是不断地为我提供信息。如：线上11:00、线下11:30、线上11:45、线下12:00。

我将如何解决这个问题？

```
bool showed =false;
bool nshowd =false;                         
for (; ; )
{
    //chech_online() <- this methods gives true if the person is online on FB

    bool check_online =check_online();                             

    if(check_online ==true && !showed)
    {
        Console.WriteLine("Online !!" +DateTime.Now);
        showed = true;
    } 
    else if(check_online ==false && !nshowd)
    {
        Console.WriteLine("OFFline !!" + DateTime.Now);
        nshowd = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:32:03.850

为什么是`showed`和`nshowed`不同的变量？你不想要一个`is_online`变量然后证明它不同于`check_online`吗？

```
bool is_online = false;
for(;;)
{
    bool check_online = check_online();
    if (check_online != is_online)
    {
        // Online state has changed. Store the new state and log out
        is_online = check_online;
        if (is_online)
        {
            Console.WriteLine("Online !!" +DateTime.Now);
        }
        else
        {
            Console.WriteLine("Offline !!" +DateTime.Now);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:40:26.057

由于`showed`和`nshowd`是互斥的，因此维护它们没有任何意义——这就是布尔变量的全部意义：

```
userShown = false
while true:
    userOnline = check_online()
    if userOnline && !userShown:
        output "User is online"
        userShown = true
    else:
        if !userOnline && userShown:
            output "User is offline"
            userShown = false
    sleep a bit 
```

或者，您可以只保留最后一个状态，并且仅在它更改时显示：

```
isOnline = check_online()
wasOnline = !isOnline
while true:
    if isOnline != wasOnline:
        output "User is ", (isOnline) ? "online" : "offline"
        wasOnline = isOnline
    sleep a bit
    isOnline = check_online() 
```

这种特殊的方法保证了初始消息的输出，而不管用户的状态如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:32:48.347

你可以做一个循环，每次迭代睡十分钟等等？

```
bool toggle = false;
bool exitloop = false;
int checkinterval = 600; // time in seconds between check

while(!exitloop)
{
    bool is_online = check_online();                             

    if (is_online) 
    {
        if (!toggle) 
        {
            Console.WriteLine("Online!" + DateTime.Now.ToString();
            toggle = true;
        }
    }
    else
    {
        if (toggle) 
        {
            Console.WriteLine("Offline!" + DateTime.Now.ToString());
            toggle = false;
        }
    }

    Thread.Sleep(checkinterval * 1000);

    // it would be a good idea to allow a mechanism
    // to exit from the infinite loop.
    if (check_if_we_should_exit_loop()) 
    {
        exitloop = true;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:51:03.590

```
bool status = false;
        bool statusChange = false;
        while (true)
        {
            if (IsOnline())
            {
                if (status == false && statusChange == false)
                    statusChange = status = true;
                else if (status == false && statusChange == true)
                    status = true;
                else if (status == true && statusChange == false) ;
                else if (status == true && statusChange == true)
                    statusChange = false;
            }
            else
            {
                if (status == false && statusChange == false) ;
                else if (status == false && statusChange == true)
                    status = statusChange = false;
                else if (status == true && statusChange == false)
                {
                    status = false;
                    statusChange = true;
                }
                else if (status == true && statusChange == true)
                    statusChange = false;
            }
            if (statusChange)
            {
                UpdateStaus(status);
                statusChange= false;
            }
        } 
```

# dojo - dojo1.8 - 使用 mysql 中的数据填充 dijit/select

> ID：14998657
> 
> 赞同：0
> 
> 时间：2013-02-21T09:28:23.087
> 
> 标签：dojo

嗨，我如何将gathertests.php 中的记录填充到dijit/select 中？我不认为我应该使用innerHTML，因为那样不会构建dijit/select。也许我应该使用该功能。但是怎么做？

```
request.post('gathertests.php',{
    data:{testx : selectX.value},
}).then
    {
    function(response){   dom.byId('line4').innerHTML=response;                         
},
function(error){
    alert(error);
}); 
```

请告知谢谢克莱门特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:58:30.833

创建[`dojo/store/Memory`](http://dojotoolkit.org/reference-guide/1.8/dojo/store/Memory.html)或理想情况下[`dojo/store/JsonRest`](http://dojotoolkit.org/reference-guide/1.8/dojo/store/JsonRest.html)并将商店分配给`dijit/Select`.

不要直接操作 DOM，改变`dojo/store`（即模型）中的数据，dijit 观察它并相应地更新 DOM。

请参阅[我](https://stackoverflow.com/questions/12782976/dojo-declarative-vs-programmatic-creation-of-select-elements-with-stores/12783555#12783555)对*Dojo 声明式与编程式创建 Select 元素与商店*和相关[jsFiddle](http://jsfiddle.net/phusick/ZmsYV/)的回答。

**奖励**：一个更复杂的例子：http: [//jsfiddle.net/phusick/N8DqG/](http://jsfiddle.net/phusick/N8DqG/)

# python - Project Euler 17 错误代码与冗长的测试

> ID：14998659
> 
> 赞同：-1
> 
> 时间：2013-02-21T09:28:23.563
> 
> 标签：python

对不起，长度。用更少的代码做到这一点并不容易。问题描述如下：

*如果数字 1 到 5 用单词写出：一、二、三、四、五，那么总共使用了 3 + 3 + 5 + 4 + 4 = 19 个字母。 **如果用文字写出从 1 到 1000（一千）的所有数字，将使用多少个字母？** 注意：不要计算空格或连字符。例如，342（三百四十二）包含 23 个字母，而 115（一百一十五）包含 20 个字母。在写出数字时使用“and”符合英国的用法。*

```
def buildRef():
    wordRef = {0: 0}
    twentyRefList = [0, 3, 3, 5, 4, 4, 3, 5, 5, 4, 3, 6, 6, 8, 8, 7, 7, 9, 8, 8, 6]
    tensRefList = [6, 5, 5, 5, 7, 6, 6]
    for i in range(1, 21):
        wordRef[i] = twentyRefList[i]
    for i in range(3, 10):
        wordRef[i*10] = tensRefList[i - 3]
    for i in range(1, 10):
        wordRef[i * 100] = twentyRefList[i] + 7
    wordRef[1000] = 11
    return wordRef

def wordSum(num):
    wordSum = 0
    wordRef = buildRef()
    tens, hundreds, tempSum = 0, 0, 0
    for i in range(1, num + 1):
        if i in wordRef:
            tempSum = wordRef[i]
            wordSum += wordRef[i]
        elif i < 100:
            tempSum = wordRef[int(i / 10) * 10] + wordRef[i % 10]
            wordSum += wordRef[int(i / 10) * 10] + wordRef[i % 10]
        else:
            tempSum = wordRef[int(i / 100) * 100] + wordRef[int((i % 100) / 10) * 10] + wordRef[i % 10] + 3
            wordSum += tempSum
        print(i, tempSum, wordSum)
    return wordSum

print(wordSum(1000)) 
```

测试输出：第一列是当前数字，第二列是该数字中的字母数。第三是总字母数。

```
1 3 3
2 3 6
3 5 11
4 4 15
5 4 19
6 3 22
7 5 27
8 5 32
9 4 36
10 3 39
11 6 45
12 6 51
13 8 59
14 8 67
15 7 74
16 7 81
17 9 90
18 8 98
19 8 106
20 6 112
21 9 121
22 9 130
23 11 141
24 10 151
25 10 161
26 9 170
27 11 181
28 11 192
29 10 202
30 6 208
31 9 217
32 9 226
33 11 237
34 10 247
35 10 257
36 9 266
37 11 277
38 11 288
39 10 298
40 5 303
41 8 311
42 8 319
43 10 329
44 9 338
45 9 347
46 8 355
47 10 365
48 10 375
49 9 384
50 5 389
51 8 397
52 8 405
53 10 415
54 9 424
55 9 433
56 8 441
57 10 451
58 10 461
59 9 470
60 5 475
61 8 483
62 8 491
63 10 501
64 9 510
65 9 519
66 8 527
67 10 537
68 10 547
69 9 556
70 7 563
71 10 573
72 10 583
73 12 595
74 11 606
75 11 617
76 10 627
77 12 639
78 12 651
79 11 662
80 6 668
81 9 677
82 9 686
83 11 697
84 10 707
85 10 717
86 9 726
87 11 737
88 11 748
89 10 758
90 6 764
91 9 773
92 9 782
93 11 793
94 10 803
95 10 813
96 9 822
97 11 833
98 11 844
99 10 854
100 10 864
101 16 880
102 16 896
103 18 914
104 17 931
105 17 948
106 16 964
107 18 982
108 18 1000
109 17 1017
110 16 1033
111 19 1052
112 19 1071
113 21 1092
114 20 1112
115 20 1132
116 19 1151
117 21 1172
118 21 1193
119 20 1213
120 19 1232
121 22 1254
122 22 1276
123 24 1300
124 23 1323
125 23 1346
126 22 1368
127 24 1392
128 24 1416
129 23 1439
130 19 1458
131 22 1480
132 22 1502
133 24 1526
134 23 1549
135 23 1572
136 22 1594
137 24 1618
138 24 1642
139 23 1665
140 18 1683
141 21 1704
142 21 1725
143 23 1748
144 22 1770
145 22 1792
146 21 1813
147 23 1836
148 23 1859
149 22 1881
150 18 1899
151 21 1920
152 21 1941
153 23 1964
154 22 1986
155 22 2008
156 21 2029
157 23 2052
158 23 2075
159 22 2097
160 18 2115
161 21 2136
162 21 2157
163 23 2180
164 22 2202
165 22 2224
166 21 2245
167 23 2268
168 23 2291
169 22 2313
170 20 2333
171 23 2356
172 23 2379
173 25 2404
174 24 2428
175 24 2452
176 23 2475
177 25 2500
178 25 2525
179 24 2549
180 19 2568
181 22 2590
182 22 2612
183 24 2636
184 23 2659
185 23 2682
186 22 2704
187 24 2728
188 24 2752
189 23 2775
190 19 2794
191 22 2816
192 22 2838
193 24 2862
194 23 2885
195 23 2908
196 22 2930
197 24 2954
198 24 2978
199 23 3001
200 10 3011
201 16 3027
202 16 3043
203 18 3061
204 17 3078
205 17 3095
206 16 3111
207 18 3129
208 18 3147
209 17 3164
210 16 3180
211 19 3199
212 19 3218
213 21 3239
214 20 3259
215 20 3279
216 19 3298
217 21 3319
218 21 3340
219 20 3360
220 19 3379
221 22 3401
222 22 3423
223 24 3447
224 23 3470
225 23 3493
226 22 3515
227 24 3539
228 24 3563
229 23 3586
230 19 3605
231 22 3627
232 22 3649
233 24 3673
234 23 3696
235 23 3719
236 22 3741
237 24 3765
238 24 3789
239 23 3812
240 18 3830
241 21 3851
242 21 3872
243 23 3895
244 22 3917
245 22 3939
246 21 3960
247 23 3983
248 23 4006
249 22 4028
250 18 4046
251 21 4067
252 21 4088
253 23 4111
254 22 4133
255 22 4155
256 21 4176
257 23 4199
258 23 4222
259 22 4244
260 18 4262
261 21 4283
262 21 4304
263 23 4327
264 22 4349
265 22 4371
266 21 4392
267 23 4415
268 23 4438
269 22 4460
270 20 4480
271 23 4503
272 23 4526
273 25 4551
274 24 4575
275 24 4599
276 23 4622
277 25 4647
278 25 4672
279 24 4696
280 19 4715
281 22 4737
282 22 4759
283 24 4783
284 23 4806
285 23 4829
286 22 4851
287 24 4875
288 24 4899
289 23 4922
290 19 4941
291 22 4963
292 22 4985
293 24 5009
294 23 5032
295 23 5055
296 22 5077
297 24 5101
298 24 5125
299 23 5148
300 12 5160
301 18 5178
302 18 5196
303 20 5216
304 19 5235
305 19 5254
306 18 5272
307 20 5292
308 20 5312
309 19 5331
310 18 5349
311 21 5370
312 21 5391
313 23 5414
314 22 5436
315 22 5458
316 21 5479
317 23 5502
318 23 5525
319 22 5547
320 21 5568
321 24 5592
322 24 5616
323 26 5642
324 25 5667
325 25 5692
326 24 5716
327 26 5742
328 26 5768
329 25 5793
330 21 5814
331 24 5838
332 24 5862
333 26 5888
334 25 5913
335 25 5938
336 24 5962
337 26 5988
338 26 6014
339 25 6039
340 20 6059
341 23 6082
342 23 6105
343 25 6130
344 24 6154
345 24 6178
346 23 6201
347 25 6226
348 25 6251
349 24 6275
350 20 6295
351 23 6318
352 23 6341
353 25 6366
354 24 6390
355 24 6414
356 23 6437
357 25 6462
358 25 6487
359 24 6511
360 20 6531
361 23 6554
362 23 6577
363 25 6602
364 24 6626
365 24 6650
366 23 6673
367 25 6698
368 25 6723
369 24 6747
370 22 6769
371 25 6794
372 25 6819
373 27 6846
374 26 6872
375 26 6898
376 25 6923
377 27 6950
378 27 6977
379 26 7003
380 21 7024
381 24 7048
382 24 7072
383 26 7098
384 25 7123
385 25 7148
386 24 7172
387 26 7198
388 26 7224
389 25 7249
390 21 7270
391 24 7294
392 24 7318
393 26 7344
394 25 7369
395 25 7394
396 24 7418
397 26 7444
398 26 7470
399 25 7495
400 11 7506
401 17 7523
402 17 7540
403 19 7559
404 18 7577
405 18 7595
406 17 7612
407 19 7631
408 19 7650
409 18 7668
410 17 7685
411 20 7705
412 20 7725
413 22 7747
414 21 7768
415 21 7789
416 20 7809
417 22 7831
418 22 7853
419 21 7874
420 20 7894
421 23 7917
422 23 7940
423 25 7965
424 24 7989
425 24 8013
426 23 8036
427 25 8061
428 25 8086
429 24 8110
430 20 8130
431 23 8153
432 23 8176
433 25 8201
434 24 8225
435 24 8249
436 23 8272
437 25 8297
438 25 8322
439 24 8346
440 19 8365
441 22 8387
442 22 8409
443 24 8433
444 23 8456
445 23 8479
446 22 8501
447 24 8525
448 24 8549
449 23 8572
450 19 8591
451 22 8613
452 22 8635
453 24 8659
454 23 8682
455 23 8705
456 22 8727
457 24 8751
458 24 8775
459 23 8798
460 19 8817
461 22 8839
462 22 8861
463 24 8885
464 23 8908
465 23 8931
466 22 8953
467 24 8977
468 24 9001
469 23 9024
470 21 9045
471 24 9069
472 24 9093
473 26 9119
474 25 9144
475 25 9169
476 24 9193
477 26 9219
478 26 9245
479 25 9270
480 20 9290
481 23 9313
482 23 9336
483 25 9361
484 24 9385
485 24 9409
486 23 9432
487 25 9457
488 25 9482
489 24 9506
490 20 9526
491 23 9549
492 23 9572
493 25 9597
494 24 9621
495 24 9645
496 23 9668
497 25 9693
498 25 9718
499 24 9742
500 11 9753
501 17 9770
502 17 9787
503 19 9806
504 18 9824
505 18 9842
506 17 9859
507 19 9878
508 19 9897
509 18 9915
510 17 9932
511 20 9952
512 20 9972
513 22 9994
514 21 10015
515 21 10036
516 20 10056
517 22 10078
518 22 10100
519 21 10121
520 20 10141
521 23 10164
522 23 10187
523 25 10212
524 24 10236
525 24 10260
526 23 10283
527 25 10308
528 25 10333
529 24 10357
530 20 10377
531 23 10400
532 23 10423
533 25 10448
534 24 10472
535 24 10496
536 23 10519
537 25 10544
538 25 10569
539 24 10593
540 19 10612
541 22 10634
542 22 10656
543 24 10680
544 23 10703
545 23 10726
546 22 10748
547 24 10772
548 24 10796
549 23 10819
550 19 10838
551 22 10860
552 22 10882
553 24 10906
554 23 10929
555 23 10952
556 22 10974
557 24 10998
558 24 11022
559 23 11045
560 19 11064
561 22 11086
562 22 11108
563 24 11132
564 23 11155
565 23 11178
566 22 11200
567 24 11224
568 24 11248
569 23 11271
570 21 11292
571 24 11316
572 24 11340
573 26 11366
574 25 11391
575 25 11416
576 24 11440
577 26 11466
578 26 11492
579 25 11517
580 20 11537
581 23 11560
582 23 11583
583 25 11608
584 24 11632
585 24 11656
586 23 11679
587 25 11704
588 25 11729
589 24 11753
590 20 11773
591 23 11796
592 23 11819
593 25 11844
594 24 11868
595 24 11892
596 23 11915
597 25 11940
598 25 11965
599 24 11989
600 10 11999
601 16 12015
602 16 12031
603 18 12049
604 17 12066
605 17 12083
606 16 12099
607 18 12117
608 18 12135
609 17 12152
610 16 12168
611 19 12187
612 19 12206
613 21 12227
614 20 12247
615 20 12267
616 19 12286
617 21 12307
618 21 12328
619 20 12348
620 19 12367
621 22 12389
622 22 12411
623 24 12435
624 23 12458
625 23 12481
626 22 12503
627 24 12527
628 24 12551
629 23 12574
630 19 12593
631 22 12615
632 22 12637
633 24 12661
634 23 12684
635 23 12707
636 22 12729
637 24 12753
638 24 12777
639 23 12800
640 18 12818
641 21 12839
642 21 12860
643 23 12883
644 22 12905
645 22 12927
646 21 12948
647 23 12971
648 23 12994
649 22 13016
650 18 13034
651 21 13055
652 21 13076
653 23 13099
654 22 13121
655 22 13143
656 21 13164
657 23 13187
658 23 13210
659 22 13232
660 18 13250
661 21 13271
662 21 13292
663 23 13315
664 22 13337
665 22 13359
666 21 13380
667 23 13403
668 23 13426
669 22 13448
670 20 13468
671 23 13491
672 23 13514
673 25 13539
674 24 13563
675 24 13587
676 23 13610
677 25 13635
678 25 13660
679 24 13684
680 19 13703
681 22 13725
682 22 13747
683 24 13771
684 23 13794
685 23 13817
686 22 13839
687 24 13863
688 24 13887
689 23 13910
690 19 13929
691 22 13951
692 22 13973
693 24 13997
694 23 14020
695 23 14043
696 22 14065
697 24 14089
698 24 14113
699 23 14136
700 12 14148
701 18 14166
702 18 14184
703 20 14204
704 19 14223
705 19 14242
706 18 14260
707 20 14280
708 20 14300
709 19 14319
710 18 14337
711 21 14358
712 21 14379
713 23 14402
714 22 14424
715 22 14446
716 21 14467
717 23 14490
718 23 14513
719 22 14535
720 21 14556
721 24 14580
722 24 14604
723 26 14630
724 25 14655
725 25 14680
726 24 14704
727 26 14730
728 26 14756
729 25 14781
730 21 14802
731 24 14826
732 24 14850
733 26 14876
734 25 14901
735 25 14926
736 24 14950
737 26 14976
738 26 15002
739 25 15027
740 20 15047
741 23 15070
742 23 15093
743 25 15118
744 24 15142
745 24 15166
746 23 15189
747 25 15214
748 25 15239
749 24 15263
750 20 15283
751 23 15306
752 23 15329
753 25 15354
754 24 15378
755 24 15402
756 23 15425
757 25 15450
758 25 15475
759 24 15499
760 20 15519
761 23 15542
762 23 15565
763 25 15590
764 24 15614
765 24 15638
766 23 15661
767 25 15686
768 25 15711
769 24 15735
770 22 15757
771 25 15782
772 25 15807
773 27 15834
774 26 15860
775 26 15886
776 25 15911
777 27 15938
778 27 15965
779 26 15991
780 21 16012
781 24 16036
782 24 16060
783 26 16086
784 25 16111
785 25 16136
786 24 16160
787 26 16186
788 26 16212
789 25 16237
790 21 16258
791 24 16282
792 24 16306
793 26 16332
794 25 16357
795 25 16382
796 24 16406
797 26 16432
798 26 16458
799 25 16483
800 12 16495
801 18 16513
802 18 16531
803 20 16551
804 19 16570
805 19 16589
806 18 16607
807 20 16627
808 20 16647
809 19 16666
810 18 16684
811 21 16705
812 21 16726
813 23 16749
814 22 16771
815 22 16793
816 21 16814
817 23 16837
818 23 16860
819 22 16882
820 21 16903
821 24 16927
822 24 16951
823 26 16977
824 25 17002
825 25 17027
826 24 17051
827 26 17077
828 26 17103
829 25 17128
830 21 17149
831 24 17173
832 24 17197
833 26 17223
834 25 17248
835 25 17273
836 24 17297
837 26 17323
838 26 17349
839 25 17374
840 20 17394
841 23 17417
842 23 17440
843 25 17465
844 24 17489
845 24 17513
846 23 17536
847 25 17561
848 25 17586
849 24 17610
850 20 17630
851 23 17653
852 23 17676
853 25 17701
854 24 17725
855 24 17749
856 23 17772
857 25 17797
858 25 17822
859 24 17846
860 20 17866
861 23 17889
862 23 17912
863 25 17937
864 24 17961
865 24 17985
866 23 18008
867 25 18033
868 25 18058
869 24 18082
870 22 18104
871 25 18129
872 25 18154
873 27 18181
874 26 18207
875 26 18233
876 25 18258
877 27 18285
878 27 18312
879 26 18338
880 21 18359
881 24 18383
882 24 18407
883 26 18433
884 25 18458
885 25 18483
886 24 18507
887 26 18533
888 26 18559
889 25 18584
890 21 18605
891 24 18629
892 24 18653
893 26 18679
894 25 18704
895 25 18729
896 24 18753
897 26 18779
898 26 18805
899 25 18830
900 11 18841
901 17 18858
902 17 18875
903 19 18894
904 18 18912
905 18 18930
906 17 18947
907 19 18966
908 19 18985
909 18 19003
910 17 19020
911 20 19040
912 20 19060
913 22 19082
914 21 19103
915 21 19124
916 20 19144
917 22 19166
918 22 19188
919 21 19209
920 20 19229
921 23 19252
922 23 19275
923 25 19300
924 24 19324
925 24 19348
926 23 19371
927 25 19396
928 25 19421
929 24 19445
930 20 19465
931 23 19488
932 23 19511
933 25 19536
934 24 19560
935 24 19584
936 23 19607
937 25 19632
938 25 19657
939 24 19681
940 19 19700
941 22 19722
942 22 19744
943 24 19768
944 23 19791
945 23 19814
946 22 19836
947 24 19860
948 24 19884
949 23 19907
950 19 19926
951 22 19948
952 22 19970
953 24 19994
954 23 20017
955 23 20040
956 22 20062
957 24 20086
958 24 20110
959 23 20133
960 19 20152
961 22 20174
962 22 20196
963 24 20220
964 23 20243
965 23 20266
966 22 20288
967 24 20312
968 24 20336
969 23 20359
970 21 20380
971 24 20404
972 24 20428
973 26 20454
974 25 20479
975 25 20504
976 24 20528
977 26 20554
978 26 20580
979 25 20605
980 20 20625
981 23 20648
982 23 20671
983 25 20696
984 24 20720
985 24 20744
986 23 20767
987 25 20792
988 25 20817
989 24 20841
990 20 20861
991 23 20884
992 23 20907
993 25 20932
994 24 20956
995 24 20980
996 23 21003
997 25 21028
998 25 21053
999 24 21077
1000 11 21088 
```

我看过的每个潜在问题编号都检查得很好。也许更有经验的眼睛可以发现我做错了什么。真正的解决方案是 21124，这意味着我在某个地方落后 36 点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:18:37.850

忘记正确计算百位数，我只需要替换：

```
 else:
        tempSum = wordRef[int(i / 100) * 100] + wordRef[int((i % 100) / 10) * 10] + wordRef[i % 10] + 3
        wordSum += tempSum 
```

和：

```
else:
    wordSum += wordRef[int(i / 100) * 100] + 3
    if i % 100 < 20:
        wordSum += wordRef[i % 100]
    else:
        wordSum += wordRef[int((i % 100) / 10) * 10] + wordRef[i % 10] 
```

在替换代码时，我省略了测试，因为不再需要它。

# pdf - PrinterJob 类的 setPageable() 是否接受 PdfDecoder 对象

> ID：14998660
> 
> 赞同：1
> 
> 时间：2013-02-21T09:28:29.523
> 
> 标签：pdf, javafx-2, jpedal

我正在尝试使用 javafx、jpedal 库打印 pdf 文件。我按照以下链接进行参考。

[http://www.wisecodes.com/2009/08/print-pdf-with-jpedal/](http://www.wisecodes.com/2009/08/print-pdf-with-jpedal/)

如果我使用此链接，我会在此行中收到错误

```
pjPrintJob.setPageable(pdfD); 
```

这说明 PrinterJob 的 setPageable 方法不接受 PdfDecoder 对象。

我已经在谷歌上搜索过这个。但我发现很多人都在使用这个。这怎么可能。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:53:55.040

您可能使用的是 LGPL 版本，遗憾的是它不支持打印。

# sql-server - 小数或浮点数的决定

> ID：14998663
> 
> 赞同：1
> 
> 时间：2013-02-21T09:28:43.750
> 
> 标签：sql-server, floating-point, decimal

当您在表中使用小数或浮点数作为数据类型时，您应该做出什么决定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:30:02.040

A`float`更小并且具有更高的性能，因此如果性能是一个问题，您可能想要使用`float`.

A`decimal`更适合准确地表示十进制数字。A`float`以二进制形式存储数字，因此 10.2 这样的数量不能完全存储为 a `float`，但可以完全存储为 a `decimal`。如果精确的十进制表示比性能更重要，那么您应该选择`decimal`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:37:12.833

看看这个。这可能是你要找的。它基本上给你带来了不同。

[浮点数和十进制数据类型之间的区别](https://stackoverflow.com/questions/5150274/difference-between-float-and-decimal-data-type)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T22:03:39.127

对于整数类型，像 57 这样的值正好代表数字 57。毫无疑问，它是否真的代表了稍微大一点的东西，或者更小一点的东西。值 0 表示加法恒等式（任何值加零产生相同的值），值 1 表示乘法恒等式（任何值乘以 1 产生相同的值），任何其他正值表示 1 必须是的次数加到零达到它（例如 2 是 1+1，3 是 1+1+1 等），任何负值表示相应正值的加法逆。

对于二进制浮点类型，值不代表精确的数字。相反，除了一些标记值之外，每个浮点值都有一个数字范围，它应该被认为是最好的表示；该范围内的一个数字被认为是“标称值”。IEEE 标准要求添加两个浮点值应该产生通过添加它们的标称值产生的数字的最佳表示，但这并不意味着`float`其标称值恰好是 2000000.125 实际上*代表*了那个确切的数字数量。它可能同样可能代表计算结果（例如 20000000.0f/10.0f），其结果由该`float`值比任何其他值更好地表示。

尽管该`Decimal`类型提供比`float`or更高的精度`double`，但它的主要用途是表示精确的小数部分（例如 1.37）。该类型的语义实际上更接近于不精确类型 like 的语义，而`double`不是精确类型 like的语义`int`，因为将例如一万亿加到一个数字然后减去一万亿可能会导致一个与起始值不同的数字。如果该类型的目的是识别精确的小数部分，或者如果需要该类型可以提供的额外精度，`Decimal`尽管它有怪癖，但它可能是一个很好的选择。否则，如果显示为 1.37 的值确实表示一个数字，而 1.37 是最方便的表示，但实际上可能更大或更小，请键入`double`将更紧凑，使用起来更快。

# java - 我们可以在同一个应用服务器上部署两个 struts2 应用程序吗？

> ID：14998666
> 
> 赞同：2
> 
> 时间：2013-02-21T09:28:50.293
> 
> 标签：java, deployment, struts2, application-server

我在 Struts2 中有一个在 Eclipse 中配置的应用程序，它运行良好。

现在我想以不同的名称部署该应用程序，因此我创建了新的 Web 应用程序并部署到服务器。

现在我在 Eclipse 控制台上看到了那个异常..

> 严重：异常启动过滤器支柱
> 无法加载配置。- [未知位置] 在 org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:449)

Struts2 中是否有任何错误，不允许您在同一应用服务器中部署两个 Struts2 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:31:36.463

`<context-root>`通过为您的标签中的标签提供不同的名称，可以在同一服务器上部署任意数量的同一应用程序的实例`web.xml`

# android - 带有 PorterDuff.Mode.CLEAR 的橡皮擦总是画一条黑线，我想在哪里删除

> ID：14998667
> 
> 赞同：4
> 
> 时间：2013-02-21T09:28:51.933
> 
> 标签：android, canvas, path, paint, erase

我可以让它绘制路径，我可以在其中移动手指以用透明线删除，还是根本不绘制？

这就是我实例化橡皮擦的方式：

```
 OnClickListener eraseListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            mPaint.setColor(0x00000000);
            mPaint.setXfermode(clear);
            mPaint.setAlpha(0x00);
            myView.setPaint(mPaint);
            LogService.log("PaintActivity", "------in eraseListener");

        }
    }; 
```

这会从包含画布的我的视图中设置绘画。在这里，我有以下运动事件：

```
private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}
private void touch_move(float x, float y) {
    float dx, dy;
        dx = Math.abs(x - mX);
        dy = Math.abs(y - mY);
    if ((dx >= TOUCH_TOLERANCE) || (dy >= TOUCH_TOLERANCE)) {
        undoPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
            mX = x;
            mY = y;
    }
}
private void touch_up() {
    mPath.lineTo(mX, mY);
    mPath.moveTo(mX, mY);
    canvas.drawPath(mPath, paint);
    mPath.reset();
}
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
    }
    return true;
} 
```

现在，如果我想擦除，正如我所说，当我移动手指时，它会在那条路径上画一条黑线。当我在 touch_up 上取下手指时，它会擦除​​它绘制的黑线背面的内容。如果我评论 invalidate(); touch_move 函数中的线，那么它就不会画出那条黑线，而且，它只会在 touch_up 上擦除。我不能让它实时擦除吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-20T02:01:48.647

我是这样解决的：

```
private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);

        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        mPath.reset();
        mPath.moveTo(mX, mY);

        mX = x;
        mY = y;
    }
} 
```

这里我在路径中添加了一条线，绘制路径，重置路径并`moveTo`在`touch_move`方法中使用。

我`touch_up`只使用`mPath.reset()`.

```
private void touch_up() {

    // kill this so we don't double draw
     mPath.reset();

} 
```

这使我的橡皮擦透明——擦除时没有黑线。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-10T09:57:23.083

只需关闭 HWA。

或者你可以在构造函数中添加这一行

```
setLayerType(View.LAYER_TYPE_SOFTWARE, mPaint); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-10T09:52:49.027

要在没有黑线的情况下擦除，请修改 onDraw() 中的代码：

```
@Override
protected void onDraw(Canvas canvas) {
    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
    if (mMode != PAINT_MODE) {
        return;
    }
    canvas.drawPath(mPath, mPaint);
} 
```

如果你想让手指擦除更自然，修改 touch_move() 的代码

```
if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
    mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
    mX = x;
    mY = y;
    if (mMode != PAINT_MODE) {
        mCanvas.drawPath(mPath, mPaint);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-27T12:28:06.050

在画布上绘制原始位图之前，只需再绘制一个相同大小的透明位图。

```
Bitmap b = Bitmap.createBitmap(orgBM.getWidth(), orgBM.getHeight(), Bitmap.Config.ARGB_8888);

Canvas c = new Canvas();
c.setBitmap(b);

c.drawBitmap(orgBM, 0, 0, null); 
```

# php - PHP套接字，发送和接收之间的消息长度不同

> ID：14998673
> 
> 赞同：0
> 
> 时间：2013-02-21T09:29:03.000
> 
> 标签：php, sockets, client-server, php-socket

我正在使用套接字传输压缩文件，但是发送的文件大小与接收的文件大小不同。

这是服务器：

```
<?php
$sock = socket_create(AF_INET, SOCK_STREAM, 0) or die("socket_create() fallito: motivo: " . socket_strerror($this->sock) . "\n");
$ret = socket_bind($sock, "192.168.1.40", "9000") or die("socket_bind() fallito: motivo: " . socket_strerror($ret) . "\n");
$ret = socket_listen($this->sock) or die("socket_listen() fallito: motivo: " . socket_strerror($ret) . "\n");
while(true){
    if($buf = @socket_accept($this->sock)){
        echo "Call incoming\n";
        // Read lenght of file
        $lun = socket_read($buf, 1024);
        // Write ok
        socket_write($buf, "OkContinue", 1024) or die("Could not send data to server\n");
        // Read file of lenght $lun
        $lettura = socket_recv ($buf, $lun);
        // Write dimension
        echo "I need rec file of $lun size, but i rec: ".strlen($lettura)." size";
    }
}
?> 
```

这是客户端：

```
<?php
$socket = socket_create(AF_INET, SOCK_STREAM, 0) or die("Could not create socket\n");
$result = socket_connect($socket, "192.168.1.40", "9000") or die("Could not connect to server\n");  
socket_write($socket, strlen($message), 1024) or die("Could not send data to server\n");
while ($out = socket_read($socket, 1024)) {
    if ($out=="OkContinue"){
        socket_write($socket, $message, strlen($message)) or die("Could not send data to server\n");
        echo "Send text of ".strlen($message)." size";
    }
}
?> 
```

但这是客户端上的 2 条消息：

```
Send text of 3741477 size 
```

这是在服务器上：

```
Call incoming
I need rec file of 3741477 size, but i rec: 82536 size 
```

那么为什么即使协议是 TCP，你也会丢失没有重传的数据呢？怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:05:31.803

查看 PHP 页面`socket_write`

> socket_write() 不一定从给定缓冲区写入所有字节。有效的是，根据网络缓冲区等，尽管您的缓冲区更大，但只会写入一定数量的数据，甚至是一个字节。您必须小心，以免无意中忘记传输其余数据。

关于`socket_read`它可能你必须多次调用它并连接数据块，直到没有更多要读取的数据存在

# php - phpmailer 将外发邮件添加到发件箱

> ID：14998678
> 
> 赞同：0
> 
> 时间：2013-02-21T09:29:30.550
> 
> 标签：php, email

我正在使用以下脚本通过 php 发送邮件

```
$status = $_POST['status'];
$subject = $_POST['subject'];
$from = "info@example.com";
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=utf-8' . "\r\n";
$headers  .= "From: $from\r\n";
$recipment = $_POST['to'];

if (mail($emailTo, $subject, $body, $headers)){

    return 'Email sent!';

} 
```

我想将所有外发邮件的副本保存到使用过的帐户发件箱。可以使用哪些 php 邮件程序功能来实现这一点。

# c# - 使用 RichTextBox 在 Text Appends 中创建延迟

> ID：14998679
> 
> 赞同：2
> 
> 时间：2013-02-21T09:29:33.410
> 
> 标签：c#, richtextbox, delay

我正在尝试使用 C# 创建一个逼真的控制台类型游戏，我需要它做的是附加这样的文本：

> 你好
> 你好
> 棒棒
> 哒

但不是一次全部完成，我希望它这样做：

> 嗨
> （暂停 2 秒）
> 你好
> （暂停 4 秒）
> 很棒
> （暂停 1 秒）
> 很好

我试过这个：

```
delegate void _pause(int time);
    void pause(int time)
    {
        if (txtInput.Text != "")
        {
            txtInput.Clear();
        }

        Stopwatch s = new Stopwatch();
        s.Start();
        while (s.Elapsed < TimeSpan.FromSeconds(time))
        {
        }
        s.Stop();
        return;
    } 
```

然后我可以这样称呼它，`Invoke(new _pause(pause),3);`但这基本上会冻结线程！所以无论如何它都会一次粘贴，只是粘贴蒙太奇之前的延迟！

我怎样才能像我描述的那样做一个平滑的延迟类型系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:31:32.457

您应该避免忙于等待，而应使用计时器，例如[`Task.Delay`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.delay.aspx).

一种可能的方法是利用 C# 4.5 的新异步功能：

```
async void converse() {
    txtInput.Text = "hi\n";
    await Task.Delay(2000);
    txtInput.Append("hello\n");
    await Task.Delay(4000);
    txtInput.Append("awesome\n");
    await Task.Delay(1000);
    txtInput.Append("nice\n");
} 
```

通过使用异步语法，您可以指示机器与其他代码交错运行您的代码 - 例如，它仍然可以同时进行屏幕更新。它会自动返回到相同的 SynchronizationContext，因此在您的情况下，自从您在 GUI 线程上启动以来，您将继续使用它；这很重要，因为只有该线程可能会更改您的文本框。

总结一下为什么要这样做类似于这样：

*   您可以避免占用 CPU 的时间忙于等待浪费能源的事情。
*   您避免阻塞 GUI 线程，以便您的更新按时出现（例如，与 CPU 占用不同，与 Thread.Sleep 不同）
*   您不需要特别担心线程调度，因为异步功能会为您做到这一点。

如果您需要支持 .NET 2.0，您可能需要查看 windows forms [`Timer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)。简而言之，这暴露了您可以挂钩的事件处理程序，该处理程序会在延迟后触发。但是，正如 MSDN 页面上的示例所示，它并不容易使用，并且需要更多的手动编排。

此外，您可以使用线程。如果这样做，您有责任确保线程安全：您不得`txtInput.Append`在除 GUI 线程之外的任何线程上执行：

```
void startConversation() {
    (new Thread(converse) {IsBackground = true}).Start();
}
void converse() { //called a different thread
    UI(() => txtInput.Text = "hi\n");
    Thread.Sleep(2000);
    UI(() => txtInput.Append("hello\n"));
    Thread.Sleep(4000);
    UI(() => txtInput.Append("awesome\n"));
    Thread.Sleep(1000);
    UI(() => txtInput.Append("nice\n"));
}
void UI(Action action) { this.BeginInvoke(action); } 
```

这个模型几乎和异步模型一样简单。两个陷阱是您应该避免忙等待（使用 Thread.Sleep），并且您必须确保正确使用`BeginInvoke`所有影响 UI 的代码。它甚至可能比`async`. 然而，线程有相当大的开销（主要是在内存方面），所以这个解决方案不会扩展到大量的延迟交互。

# 概括

*   `async`如果可以，请使用。
*   或者，使用 windows forms `Timer`，这很麻烦。
*   或者使用后台线程 - 但要注意扩展问题和忙于等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:00:27.017

我通过这种方法解决了这个问题： [暂停执行方法而不锁定 GUI。C＃](https://stackoverflow.com/questions/1419363/pause-execution-of-a-method-without-locking-gui-c-sharp)

它可以通过在单独的线程上运行暂停来轻松修复，因此不会锁定 UI。感谢大家的帮助！

# c - 提高通过 RealTime Workshop 生成的代码的代码可读性

> ID：14998680
> 
> 赞同：0
> 
> 时间：2013-02-21T09:29:34.423
> 
> 标签：c, matlab, simulink

我使用 Matlab/Simulink 对嵌入式软件组件进行建模，并使用 RealTime Workshop 生成 C 代码。我正在尝试提高生成代码的代码可读性和逻辑结构。您对如何指导 Simulink 和/或 RealTime Workshop 生成更好的代码有任何想法吗？是否可以给代码生成任务或类似的东西一些提示？

# symfony-1.4 - 如何过滤管理员中自动生成的选择字段的内容？

> ID：14998683
> 
> 赞同：1
> 
> 时间：2013-02-21T09:29:39.410
> 
> 标签：symfony-1.4

我正在使用 Symfony 1.4 后端使用 sfGuardUser 插件创建/更新用户，该插件包含具有不同权限的用户。

我正在使用另一个表，与 sfGuardUser 具有 1-1 关系。在这个表中，我存储了与特定类型用户相关的信息，这些用户由他的权限区分。

Symfony 已经完成了它的工作，并生成了一个选择字段，其中所有用户都存储在 sfGuardUser 中。

我想过滤此列表，以便仅显示具有特定权限的 sfGuardUsers。

我发现很多文章都是关于如何在后端创建特定过滤器的资源，但没有关于如何解决我的问题的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:15:40.277

[@j0k](https://stackoverflow.com/users/569101/j0k)的问题对于这个问题至关重要。如果您总是需要相同的权限，那么实现您想要的东西是相当容易的。如果您希望权限是动态的，该解决方案会有点棘手。

在前一种情况下，您必须编辑用于与 sgGuardUser 相关的表的后端操作（新建和编辑）的 Form 类。您必须编辑负责检索用户列表的选择小部件：（假设关系列是`user_id`并且您正在使用 Doctrine）：

```
$this->widgetSchema['user_id']->setOption('table_method' => 'retrieveForPermissionX'); 
```

然后，`sfGuardUserTable.class.php`您必须添加准备正确查询的函数：

```
public function retrieveForPermissionX()
{
    return $this->createQuery('u')
        ->innerJoin('u.sfGuardUserPermission up')
        ->innerJoin('u.Permissions p')
        ->where('p.name = "PermissionX"')
        ->orderBy('u.first_name ASC');
} 
```

正如我所说，如果您需要使用不同的权限，它会变得更加棘手。基本原理是相同的——您必须为表单内的小部件选择合适的用户，但您必须以某种方式告诉表单使用哪个权限。

我认为您必须覆盖自动生成的新操作和编辑操作。将所需权限作为 URL 中的参数传递（或使用特定 URL 来获得所需的给定权限）并在操作内部将权限作为选项传递给您的表单：

```
$this->form = new UserInfoForm(null, array('permissions' => $permissions)); 
```

然后，您可以使用此信息在选择小部件上调用适当的 table 方法（或生成查询对象 - 除了 table 方法，您还可以传递一个查询对象，该对象将用于检索小部件的对象）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:14:33.090

正是我想要的。如上所述，我对查询和代码进行了一些修改：

在 lib/model/doctrine/sfDoctrineGuardPlugin/sfGuardUserTable.class.php

```
public function retrieveForPermissionX()
{
     return $this->createQuery('u')
          ->leftJoin('u.sfGuardUserPermission up')
          ->innerJoin('u.Permissions p')
          ->where('p.name = "PermissionX"')
          ->orderBy('u.first_name ASC');             
} 
```

在应用程序/your_app_name/modules/your_module_name/actions/actions.class.php

```
public function executeNew(sfWebRequest $request)
{
    $this->table_client = new tableClient();
    $this->form = new TableClientForm($this->table_client);

    $widgetSchema = $this->form->getWidgetSchema();
    $widgetSchema['sf_guard_user_id']->setOption('table_method', 'retrieveForPermissionX');
} 
```

# php - PHP 类扩展

> ID：14998684
> 
> 赞同：3
> 
> 时间：2013-02-21T09:29:44.037
> 
> 标签：php, class, extend

我有一个问题，了解类扩展的工作原理..

我正在尝试扩展一个类以拆分不同文件中的函数以使其更有条理..

但是我在将主类的变量和函数访问到子类时遇到问题。

这就是我所拥有的：

父类：是uFlex Class v 0.88 我就不全写了，因为太长了..

```
class uFlex {
    //Constants
    const version = 0.88;
    const salt = "";
    //End of constants\\\\
    /**
     * PDO / database credentials
     */
    var $db = array(
        "host" => '',
        "user" => '',
        "pass" => '',
        "name" => '',   //Database name
        "dsn" => '' //Alterntive PDO DSN string
    );

        function connect(){
        if(is_object($this->db)) return true;

        /* Connect to an ODBC database using driver invocation */
        $user = $this->db['user'];
        $pass = $this->db['pass'];
        $host = $this->db['host'];
        $name = $this->db['name'];
        $dsn = $this->db['dsn'];

        if(!$dsn){
            $dsn = "mysql:dbname={$name};host={$host}";
        }

        $this->report("Connecting to database...");

        try{
            $this->db = new PDO($dsn, $user, $pass);
            $this->report("Connected to database.");
        }catch(PDOException $e){
            $this->error("Failed to connect to database, [SQLSTATE] " . $e->getCode());
        }

        if(is_object($this->db)) return true;
        return false;
    }
} 
```

然后：

```
<?php
class admin extends uFlex {

    function adm_getUsers(){
            if(!$this->connect()) return false;

            $sql= "SELECT * from users LIMIT 30";
            $st = $this->db->prepare($sql);
        $out = $st->execute();
            $row = $st->fetchAll(PDO::FETCH_ASSOC);
            return $row;    
    }

    function adm_getSingleUser($id){
            if(!$this->connect()) return false;
        if(is_numeric($id)){
            $sql= "SELECT * from users WHERE id = '$id'";
            }else{
            $sql= "SELECT * from users WHERE username = '$id'";
            }
            $st = $this->db->prepare($sql);
        $out = $st->execute();
            $row = $st->fetch(PDO::FETCH_ASSOC);
            return $row;
    }
}

?> 
```

我在每个页面中包含的配置文件中初始化它们：

```
$user = new uFlex(false);
$admin = new admin(); 
```

但是当使用`$admin->adm_getUsers();`$row 数组时，它是空的。

在尝试在 2 个类之间拆分函数之前，我在主类上使用了相同的函数，并且正在工作。

这是我第一次尝试扩展一个类..我在谷歌上搜索，也在这里阅读了一些问题，但这对我来说太复杂了，因为我还在学习 PHP。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T09:38:00.170

这就是继承并不是最好的答案的地方。相反，您可以放弃继承并改用组合。将您的实例`uFlex`作为依赖项传递`Admin`，如下所示：

```
$user = new uFlex(false);
$admin = new Admin($user); // uFlex is being passed in 
```

您首先需要更新您的 PHP 类，因为有一些更改：

```
class Admin {

    // Added private variable that will hold the uFlex instance
    private $user;

    // Added a class constructor which will be called when we create a new Admin
    function __construct($user) { // Receives an instance of uFlex
        $this->user = $user;
    }

    function adm_getUsers(){
        if(!$this->user->connect()) return false; // Call connect on user
        $sql= "SELECT * from users LIMIT 30";
        $st = $this->user->db->prepare($sql); // Call prepare on db of user
        $out = $st->execute();
        $row = $st->fetchAll(PDO::FETCH_ASSOC);
        return $row;    
    }

    function adm_getSingleUser($id){
        if(!$this->user->connect()) return false; // Same here
        if(is_numeric($id)) {
            $sql= "SELECT * from users WHERE id = '$id'";
        } else {
            $sql= "SELECT * from users WHERE username = '$id'";
        }
        $st = $this->user->db->prepare($sql); // And here
        $out = $st->execute();
        $row = $st->fetch(PDO::FETCH_ASSOC);
        return $row;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:37:39.230

如果你想调用 adm_getUsers()，你应该写 $user = new admin()。您必须*在管理类中创建 _ constuct() 方法，该方法将调用 parent::* _construct($val)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:46:32.670

当你扩展一个类时，你实际上是在访问父类的属性和方法，而不是执行它们。因此，如果您想从父类中的某个方法访问某些数据，则必须在父类中执行该特定方法，然后访问它。

例如：

```
<?php
class parent{

    public function adm_getUsers(){
        //your code to get users
    }
}

class child extends class parent{
    public $adm_getUsers = array();

    public function getUsers(){
        if(!isset($this->adm_getUsers)){
            $this->adm_getUsers = $this->adm_getUsers();
        }
        return $this->adm_getUsers;
    }
}

$childObj = new child();
$users = $childObj->getUsers(); 
```

# android - android - 大图像导致应用程序崩溃

> ID：14998687
> 
> 赞同：1
> 
> 时间：2013-02-21T09:29:54.200
> 
> 标签：android, image, graphics

我正在开发平板电脑应用程序。我尝试使用`Layout.setBackgroundResource(ResId)`. 该应用程序在测试时崩溃了`Nexus 7`，我不会粘贴堆栈跟踪，因为大约有 8 或 9 个异常，其中大约有 300 条红线，`LogCat`我花了一段时间才弄清楚原因。在我注意到`OutOfMemoryException`应用程序使用 1280x800 图像后，我得到了它，该应用程序运行良好，但由于这些图像被设计为高分辨率，因此出现了一些质量损失。

问题：如何在 Android 中处理高分辨率图像以防止这样的崩溃？所有图像都是本地的并存储在`drawable`文件夹中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:36:35.537

您必须使用我在此类**用例**中使用过的相同库，

[这个项目](http://code.google.com/p/android-query/)也将帮助你。因为**您需要在显示图像时压缩图像，**并且如果最终需要，还需要使用延迟加载功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:36:41.993

图像大小在 android 开发中是有限的。您不能使用大于规定图像的图像。有一个关于如何为您的应用程序选择图像的指南。这是指南的[链接](http://developer.android.com/guide/practices/screens_support.html)。

# java - Java：缺少数据库错误

> ID：14998695
> 
> 赞同：6
> 
> 时间：2013-02-21T09:30:15.627
> 
> 标签：java, database, sqlite, sqlexception

我收到以下错误：

```
java.sql.SQLException: [SQLITE_ERROR] SQL error or missing database (no such table: apartments) 
```

实际上，该表确实存在。以下是我的代码：

```
try {
    // load the sqlite-JDBC driver using the current class loader
    Class.forName("org.sqlite.JDBC");
    Connection connection = null;
    // create a database connection
    connection = DriverManager.getConnection("jdbc:sqlite:/Path/To/apartments.db");
    System.out.println(connection.getMetaData());
    Statement statement = connection.createStatement();
    statement.setQueryTimeout(30);

    ResultSet rs = statement.executeQuery("select * from apartments");
    while(rs.next()) {
        // read the result set
        System.out.println("TEXT = " + rs.getString("display_text"));
        System.out.println("X1 = " + rs.getInt("x1"));
    }
} catch (Exception ex) {
    Logger.getLogger(MouseEventDemo.class.getName()).log(Level.SEVERE, null, ex);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T10:16:39.527

可能这可以帮助您找到正确的数据库路径

**如何指定数据库文件**

这是选择文件**C:\work\mydatabase.db 的示例（在 Windows 中）**

```
Connection connection = DriverManager.getConnection("jdbc:sqlite:C:/work/mydatabase.db"); 
```

**UNIX（Linux、Mac OS X 等）文件 /home/leo/work/mydatabase.db**

```
Connection connection = DriverManager.getConnection("jdbc:sqlite:/home/leo/work/mydatabase.db"); 
```

**如何使用内存数据库** SQLite 支持内存数据库管理，它不会创建任何数据库文件。要在 Java 代码中使用内存数据库，请按如下方式获取数据库连接：

```
Connection connection = DriverManager.getConnection("jdbc:sqlite::memory:"); 
```

这也可以帮助

```
String path=this.getClass().getResource("apartments.db").getPath();
            connection = DriverManager.getConnection("jdbc:sqlite:"+path); 
```

假设 apartments.db 放在项目根目录中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:16:36.057

将扩展名更改 `.db` 为`.sqlite`

```
connection = DriverManager.getConnection("jdbc:sqlite:Path\\To\\apartments.sqlite"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T11:53:51.670

在 Android 平台上从 Robolectric 运行单元测试时，我遇到了同样的问题。这个问题原来与在我的 DatabaseHelper 类上使用单例模式有关，我的所有单元测试都在重用它，因为它是由基类为我的所有单元测试创​​建的静态对象。

在我的情况下，解决方法是在每次测试后将缓存 DatabaseHelper 中的单例实例的静态变量设置为 null。所以基类对我来说看起来像这样：

```
import com.foo.app.HomeActivity;
import com.foo.contentProvider.DatabaseHelper;

import org.junit.After;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.runner.RunWith;
import org.robolectric.Robolectric;
import org.robolectric.RobolectricTestRunner;
import org.robolectric.annotation.Config;

import static org.junit.Assert.assertNotNull;

@Config(shadows = {ShadowCaseSensitiveSQLiteCursor.class})
@RunWith(RobolectricTestRunner.class)  // <== REQUIRED for Robolectric!
public class RobolectricTestBase {

    protected HomeActivity activity;
    protected Context context;
    protected DatabaseHelper databaseHelper;

    @BeforeClass
    public static void setupClass() {
        // To redirect Robolectric to stdout
        System.setProperty("robolectric.logging", "stdout");
    }

    @Before
    public void setup() {
        activity = (HomeActivity) Robolectric.buildActivity(HomeActivity.class).create().get();
        assertNotNull(activity);
        context = activity.getApplicationContext();
        assertNotNull(context);
        databaseHelper = DatabaseHelper.getInstance(context);
        assertNotNull(databaseHelper);
    }

    @After
    public void tearDown() {
        databaseHelper.close();  //This is where singleton INSTANCE var is set to null
    }
} 
```

# sql - 提高 SQL Server 存储过程的性能

> ID：14998700
> 
> 赞同：2
> 
> 时间：2013-02-21T09:30:39.643
> 
> 标签：sql, sql-server-2008

我正在使用 Microsoft SQL Server 2008，并且我有这个存储过程：

```
ALTER PROCEDURE [dbo].[getMessagesByDates]
      (@orderdateFirst varchar(50), 
       @orderdateLast varchar(50))      
AS
BEGIN
    SET NOCOUNT ON

    SELECT TOP 100 [RecordID]
      ,[MessageID]
      ,[ProcessName]
      ,[ProcessInstanceID]
      ,[Arrival]
      ,[MessageDateTime]
      ,[RecvFileName]
      ,[ArchivePath]
      ,[SubjectID]
      ,[SrcMessageID]
      ,[SourceSystem]
      ,[SourceLocation]
      ,[MsgKey1]
      ,[MsgKey2]
      ,[MsgKey3]
  FROM [Messages].[dbo].[MessagesLog]
  WHERE 
      [Arrival] BETWEEN CONVERT(datetime, @orderdateFirst) 
                    AND CONVERT(datetime, @orderdateLast)
  ORDER BY
      [Arrival] DESC
END 
```

[Arrival]（日期时间类型）是 [MessagesLog] 表中的聚集唯一索引。[RecordID]（bigint 类型）是我的聚集索引中的第二个索引键列。

如何提高上述程序的性能？我正在处理数千行，这需要很多时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:35:35.883

一项性能改进将是`CONVERT`您`varchar`在声明`datetime`之前`SELECT`。

目前，您正在为每条记录进行 2 次转换。如果您有数千行会导致性能下降。

尝试：

```
DECLARE @orderdateFirstDT DATETIME = CONVERT(DATETIME,@orderdateFirst)
DECLARE @orderdateLastDT DATETIME = CONVERT(DATETIME,@orderdateLast)

SELECT TOP 100 [RecordID]
       ..........
FROM [Messages].[dbo].[MessagesLog]
WHERE [Arrival] BETWEEN @orderdateFirstDT and @orderdateLastDT
ORDER BY [Arrival] DESC 
```

* * *

更好的办法是将存储过程参数更改为`DATETIME`类型，这样甚至不需要这种转换。但这可能需要在此查询范围之外进行更改（例如，如果您`varchar`在调用此存储过程时显式设置类型参数）。

```
ALTER PROCEDURE [dbo].[getMessagesByDates]
      (@orderdateFirst DATETIME, 
       @orderdateLast DATETIME)      
AS
BEGIN 
```

# java - Alfresco 上的文档版本

> ID：14998704
> 
> 赞同：0
> 
> 时间：2013-02-21T09:30:59.567
> 
> 标签：java, alfresco, opencmis

我使用 createfolder 或 streamupdate ，问题是，那是两次版本，我的意思是每次上传都在户外做：

调用uploadFile....返回文档版本版本0.2版本0 1

再次..调用uploadFile..返回文档版本

0.4 版 0.3 版

.... 我怎样才能对上传文件的版本只进行一个版本？

这是创建文档和更新文档的代码。

创建文档...

```
 FileInputStream fis = new FileInputStream(file);
    DataInputStream dis = new DataInputStream(fis);
    byte[] bytes = new byte[(int) file.length()];
    dis.readFully(bytes);

    Map<String, String> newDocProps = new HashMap<String, String>();
    newDocProps.put(PropertyIds.OBJECT_TYPE_ID, "cmis:document");
    newDocProps.put(PropertyIds.NAME, file.getName());
    newDocProps.put(PropertyIds.IS_LATEST_VERSION, "TRUE");
    List<Ace> addAces = new LinkedList<Ace>();
    List<Ace> removeAces = new LinkedList<Ace>();
    List<Policy> policies = new LinkedList<Policy>();
    try {
        ContentStream contentStream = new ContentStreamImpl(file.getName(),  BigInteger.valueOf(bytes.length), fileType, new ByteArrayInputStream(bytes));
        Document doc = folder.createDocument(newDocProps, contentStream, VersioningState.MINOR, policies, removeAces, addAces, session.getDefaultContext());
        AlfrescoDocument alfDoc = (AlfrescoDocument) doc; 
        if(alfDoc.hasAspect("P:cm:versionable")) { 
          Map<String, Object> properties = new HashMap<String, Object>(); 
          properties.put("cm:autoVersion", true); 
          alfDoc.updateProperties(properties); 
        }
    } catch (Exception e) {
        if(e.getMessage().contains("Conflict")){
            Document document = (Document) session.getObject(session.getObjectByPath(".../Space/"+file.getName()).getId());
            ContentStream contentStream = new ContentStreamImpl(file.getName(), BigInteger.valueOf(bytes.length), fileType, new ByteArrayInputStream(bytes));
            updateDcoument(document,contentStream);             

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:07:06.890

在您的代码中，您确实创建了文档的两个版本：

```
Document doc = folder.createDocument(newDocProps, contentStream, VersioningState.MINOR, policies, removeAces, addAces, session.getDefaultContext()); 
```

和

```
alfDoc.updateProperties(properties); 
```

由于默认`cm:versionable`设置为已`cm:autoVersionOnUpdateProps`设置为`true`后者调用发出要创建的新版本。您可以`false`通过更改`cm:versionable`定义将该属性设置为对象或全局。请参阅[文档](http://wiki.alfresco.com/wiki/Versioning_Behaviour#Configuring_the_Auto-Version_Behaviour_for_Property-Only_Updates_.283.2.29)。

# ruby-on-rails - paper_trail 并保持关系不变

> ID：14998706
> 
> 赞同：3
> 
> 时间：2013-02-21T09:31:02.187
> 
> 标签：ruby-on-rails, versioning, relationship, paper-trail-gem

是否有可能强制 paper_trail 在版本更改时不更改关系？

我的应用程序是一个投注软件，我需要让用户投注在他投注时处于活动状态的那个，保留改变赔率的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:55:02.347

你的意思是你想忽略某些属性的更新？因此，如果赔率发生变化，那么什么都不做？

或者你的意思是当相关对象发生变化时它不创建版本？

无论哪种方式，我认为文档中的以下内容都会起作用

[https://github.com/airblade/paper_trail#choosing-attributes-to-monitor](https://github.com/airblade/paper_trail#choosing-attributes-to-monitor)

```
has_paper_trail :skip => [:attribute_or_relationship] 
```

这将停止创建版本，但也会从所有版本中省略上述内容。

# java - 用Java中的等效字符替换HTML代码

> ID：14998726
> 
> 赞同：17
> 
> 时间：2013-02-21T09:31:48.270
> 
> 标签：java, pattern-matching, matcher

目前我正在用java中的等效字符转换HTML代码。我需要将下面的代码转换为字符。

```
&#x00E8; - è
&#xAE;   - ®
&#x0026; - &
&#x00F1; - ñ
&#x26;   - & 
```

我尝试使用正则表达式模式

```
(&#x)([\\d|\\w]*)([\\d|\\w]*)([\\d|\\w]*)([\\d|\\w]*)(;) 
```

当我调试时，`matcher.find()`给了我，`true`但控件跳过了我编写转换代码的循环。不知道那里发生了什么。

另外，有没有办法优化这个正则表达式？

任何帮助表示赞赏。

例外

```
java.lang.NumberFormatException: For input string: "x26"
      at java.lang.NumberFormatException.forInputString(Unknown Source)
      at java.lang.Integer.parseInt(Unknown Source)
      at java.lang.Integer.parseInt(Unknown Source)
      at org.apache.commons.lang.Entities.unescape(Entities.java:683)
      at org.apache.commons.lang.StringEscapeUtils.unescapeHtml(StringEscapeUtils.java:483) 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-21T09:34:20.447

> 另外，有没有办法优化这个正则表达式？

是的，**不要**对这个任务使用正则表达式，使用来自[Apache commons lang的 Apache](http://commons.apache.org/lang/) [StringEscapeUtils](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html)：

```
import org.apache.commons.lang.StringEscapeUtils;
...
String withCharacters = StringEscapeUtils.unescapeHtml(yourString); 
```

JavaDoc 说：

> 将包含实体转义的字符串取消转义为包含与转义对应的实际 Unicode 字符的字符串。支持 HTML 4.0 实体。
> 
> 例如，字符串`"&lt;Fran&ccedil;ais&gt;"`将变为`"<Français>"`
> 
> 如果一个实体无法识别，则将其单独放置，并逐字插入结果字符串中。例如`"&gt;&zzzz;x"`将成为`">&zzzz;x"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-25T19:03:27.187

所有其他可能性或现有*util*方法之一可能是 spring-web 的`org.springframework.web.util.HtmlUtils.htmlUnescape`.

自包含 Groovy 脚本中的示例用法：

```
@Grapes(
    @Grab(group='org.springframework', module='spring-web', version='4.3.0.RELEASE')
)
import org.springframework.web.util.HtmlUtils

println HtmlUtils.htmlUnescape("La &#xE9;lite del tenis no teme al zika y jugar&#xE1; en R&#xED;o") 
```

# css - 哪种方式加载巨大的图像（画布、img 和背景图像）？

> ID：14998727
> 
> 赞同：13
> 
> 时间：2013-02-21T09:31:50.300
> 
> 标签：css, html, canvas, image

## 我想要的是

目前我有一个 png 图像`4000x4000`。使用[tinypng.org](http://tinypng.org/)后，它变成了一个 288KB 的文件。

现在我想要最快的方式来加载图像，将其放置在 DOM 中并能够在其上绘制大量画布。

我测试了一些，结果让我震惊。

## 我测试的

我做了 3 次测试，只检查加载速度。

*   （423 毫秒）`<canvas>`
*   （138 毫秒）`<img>`
*   （501 毫秒）CSS`background-image`

`<img>`标签是最快的。

## 问题

`<img>`那么，使用标签来显示一个巨大的（背景）图像并使用一些肮脏的 CSS 来在其上绘制画布是一种不好的做法吗？

还是在我的情况下使用画布更好，而不用担心更长的加载时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T09:45:44.530

好问题！这是相关的：[何时使用 IMG 与 CSS 背景图像？](https://stackoverflow.com/questions/492809/when-to-use-img-vs-css-background-image)

从那篇文章中，如果人们打算打印您不会使用的页面`<img>`- 因为这会出现在打印件上。这同样适用于`<canvas>`，从而制定`background-image`合乎逻辑的解决方案。

你的背景图片是如何通过 CSS 添加的？它是内联的还是通过它自己的样式表？如果它使用自己的样式表，您是否尝试在测试速度之前[压缩 CSS ？](http://css-tricks.com/snippets/htaccess/active-gzip-compression/)

这也是相关的，我想：[图片在 HTML 或 CSS 中加载速度更快吗？](https://stackoverflow.com/questions/6716262/do-images-load-faster-in-html-or-css)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:56:31.113

我会考虑从语义的角度来看你的情况：你想展示什么？它是您要在其上绘制东西的图像吗？它是游戏板的背景图像吗？

IMHO: 500 ms in case of CSS background is not that slow, it always takes a couple of seconds to load a website. If you care about the loading speed of the image, use `<img>`, but `HTML`ing could be a bit more difficult because you have to fiddle around with `z-index` and `position`.

I would take the CSS background.

# batch-file - CMD 批处理文件调用 cleartool 命令在写入文件时冻结脚本

> ID：14998729
> 
> 赞同：1
> 
> 时间：2013-02-21T09:31:52.280
> 
> 标签：batch-file, triggers, clearcase

在 CMD 批处理触发脚本中，我使用`cleartool`命令将活动信息写入文件：

```
cleartool lsactivity -long  %CLEARCASE_ACTIVITY%>>C:\folder\activityinfo.txt 
```

这几乎每次都有效，但偶尔由于我不知道的原因 cleartool 命令没有将信息正确写入文件，导致我无法删除的 0KB 输出文件。更重要的是，它会阻止触发器在连续尝试中正常运行。

我编写了一些代码来检查输出文件的大小是否为 0KB，但这不起作用，因为 cleartool 命令似乎保持文件打开，即使它没有写入文件。太奇怪了！

几个小时后，触发器再次起作用，因为我假设锁定的进程已解锁。

有什么办法可以避免这种现象？

问候，

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:56:47.157

我所看到的所做的是为每次出现的 写入不同的文件`cleartool lsactivity`，并在完成整个过程后将这些文件聚合为一个。

例如，一种技术是在文件名中使用日期，如“[文件名中的批处理命令日期和时间](https://stackoverflow.com/questions/7727114/batch-command-date-and-time-in-file-name)”。

```
set hr=%time:~0,2%
if "%hr:~0,1%" equ " " set hr=0%hr:~1,1%
cleartool lsactivity -long  %CLEARCASE_ACTIVITY% > C:\folder\activityinfo_%date:~-4,4%%date:~-10,2%%date:~-7,2%_%hr%%time:~3,2%%time:~6,2%.txt 
```

请注意，我只使用 ' `>`'，而不是 ' `>>`'，因为文件 ' `activityinfo_YYYYMMDD_HH:MM:SS`' 在每次 cleartool 调用时总是不同的。

OP [Andrew](https://stackoverflow.com/users/1999794/andrew) [评论](https://stackoverflow.com/users/1999794/andrew)：

> 我已将命令设置为使用“ ”而不是“ ”（附加）`cleartool lsactivity`写入（或覆盖）文件。`>``>>`
> 
> 此外，由于有时系统中会出现故障，因此我在命令后设置了 5 秒的睡眠时间，以防写入和创建文件时出现延迟

但是，从[下面的评论中](https://stackoverflow.com/questions/14998729/cmd-batch-file-calling-cleartool-command-freezes-script-when-writing-to-file/14999239#comment21143310_14999239)，还建议在脚本的*开头*添加一个 sleep ：

> 我在脚本开头添加了 20 秒的初始睡眠，我还没有遇到任何问题。

# javascript - 使 twitter bootstrap 模态完全模态

> ID：14998730
> 
> 赞同：2
> 
> 时间：2013-02-21T09:31:53.323
> 
> 标签：javascript, twitter-bootstrap

我正在使用 twitter 引导模式。但是，我只需单击页面上的任何区域即可关闭它。即使我在做：

```
$("#ajaxModal").modal({keyboard: false, show: true}); 
```

它不会改变这种行为。

如何在无法通过单击页面或按 Esc 或其他方式关闭它的情况下使其完全具有模态意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:37:58.813

你有没有尝试过：

```
$("#ajaxModal").modal({
    keyboard: false,
    show: true,
    backdrop: 'static'
}); 
```

[引导文档](http://twitter.github.com/bootstrap/javascript.html#modals)说明了背景属性：

> 包括一个模态背景元素。或者，为单击时不关闭模式的背景指定静态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:36:48.480

查看[Bootstrap 模态文档](http://twitter.github.com/bootstrap/javascript.html#modals)，您似乎需要将选项添加`backdrop: 'static'`到您的选项对象：

```
 $("#ajaxModal").modal({keyboard: false, show: true, backdrop: 'static' }); 
```

# algorithm - 算法的效率

> ID：14998733
> 
> 赞同：2
> 
> 时间：2013-02-21T09:32:05.633
> 
> 标签：algorithm

我是一名计算机科学专业的学生，​​我对算法不熟悉。我们正在课堂上学习算法设计与分析课程。我想知道为什么算法的时间复杂度是用等来衡量的 `O(n)`，`O(log n)`而不是用秒或毫秒来衡量实际时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:00:46.027

**为什么效率不是以秒/毫秒为单位的实际时间来描述的？**

我们不这样做的原因有很多（其中一些是显而易见的）：

*   实际时间因算法的实现而异。
*   实际时间因编译器生成的代码（以及指定的所有优化选项）而异
*   实际时间因时间共享、通信开销（在分布式算法中）等而有所不同。
*   实际时间因运行程序的系统配置（时钟频率、缓存大小、网络拓扑等）而异
*   我们还想看看算法如何随着问题的大小而扩展。描述算法相对于问题大小的速度的函数更有用。

**为什么效率没有被描述为输入大小的精确函数并且给出了精确的运行时间？**

*   再次，系统配置（系统架构、时钟频率、指令集等）
*   同样，编译器对代码的优化可能会改变一些系数。
*   为复杂算法或精确运行时间取决于输出的某些特征的算法推导出精确公式可能并不容易。

**然后？**

这就是为什么它被描述为属于一类功能。

这样做的好处是我们知道算法的可扩展性（相对于输入大小），而无需深入了解实现或实际系统的细节。我们甚至可以描述一类算法的最佳/最差可能时间复杂度（例如基于比较的排序算法的 Omega(n log n)）。

这样做的缺点是常数是隐藏的，只剩下最强大的项。2 算法可能具有相同的时间复杂度，但一个可能比另一种更快，因为它具有较小的常数（弗洛伊德循环查找算法与布伦特循环查找算法）。一些具有巨大隐藏常数的算法只有在输入非常大时才会有用。因此，不应仅根据时间复杂度来选择算法，还需要考虑最大可接受的输入大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T09:37:29.717

[渐近计算复杂度](http://en.wikipedia.org/wiki/Asymptotic_computational_complexity)对于讨论算法的理论方面很有用。不讨论实际执行时间的主要原因是：

*   实际执行时间因硬件、输入大小和优化而有很大差异。
*   它使我们能够讨论和分析具有高（甚至无限）执行时间的算法。
*   *给定足够长的输入*，类分类，也称为 Big-O 表示法，无论其实现如何，都为我们提供了对算法效率的有用描述。例如，对于足够长的输入，`O(log(n))`算法比`O(n)`算法快，但对于较短的输入，后者可能更快。
*   讨论与语言无关，适用于任何软件架构。

应始终考虑实际考虑，但 Big-O 是每次讨论算法解决方案的基础。如果您不能 Big-O 分析您的算法，您的代码将永远无法扩展。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T09:40:34.393

执行单个指令的时间取决于硬件，并且由于算法是人为的，因此最好以特定格式返回答案。Big O 定义最坏情况 N 代表块代码将执行的次数，其中 n 通常定义数组对象的元素数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T09:50:42.953

需要意识到的关键是，这些复杂性类并非旨在描述算法的实际执行时间，而是描述**最坏情况下**的执行时间。

这很重要，因为一个递归算法，并且具有复杂度等级 O(2^N) 可以执行等效于 O(1) 如果由于传递了一个参数，它实际上不必执行递归，但是Big-O 表示法您没有描述算法的特定执行 - 再次，您描述的是算法的最坏情况执行。

执行时间毫秒测量测量的是不同的东西。Big-O 表示法描述了上述算法的最坏情况，但它的执行方式并不特定于它所运行的特定平台，而毫秒时间测量只能描述单个特定机器上的单个特定执行. 在您的普通桌面系统上，特别是如果您在 C# .NET 或 Java 等托管语言上构建，每次运行算法时都会出现波动，例如垃圾收集 - 测量函数执行所需的时间前一刻可能给出 3 毫秒，下一分钟可能给出 5 毫秒。在速度更快的计算机上，它可能只需要 0.005 毫秒 - 如您所见，

# visual-studio-2010 - 是否可以将从 Visual Studio 2010 解决方案编译的 BizTalk 工件部署到 BizTalk 2006 R2 服务器？

> ID：14998740
> 
> 赞同：0
> 
> 时间：2013-02-21T09:32:30.237
> 
> 标签：visual-studio-2010, biztalk, biztalk-2010, biztalk2006r2, biztalk-deployment

我们目前使用 Visual Studio 2005 编译部署到使用 BizTalk Server 2006 R2 的多个环境的工件。

我们打算迁移到 Visual Studio 和 BizTalk Server 2010。在完全切换到新环境之前，我们必须将旧环境与新环境保持一段时间。

我的问题是：

我们是否能够从 Visual Studio 2010 解决方案生成 BizTalk 工件并能够将它们部署到现有的 BizTalk 2006 R2 服务器和我们新的 BizTalk 2010 服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:39:18.453

Visual Studio 2010 不允许您以开发 BizTalk Server 2006 R2 解决方案所需的 .Net Framework 3.5 为目标 - 您将收到一个很好的错误，指出“项目的重新定位已被取消”。

因此，您的问题的答案是不，您将无法从 Visual Studio 2010 解决方案生成 BizTalk 工件并能够将它们部署到现有的 BizTalk 2006 R2 服务器和新的 BizTalk 2010 服务器 - BTS2010 以 .Net 框架为目标4，而 2006 R2 和 2009 的目标是 .Net Framework 3.5。

如[http://msdn.microsoft.com/en-gb/library/ff629735.aspx](http://msdn.microsoft.com/en-gb/library/ff629735.aspx)所述，您可以使用 VS2010 导入现有的 BizTalk Server 2006 R2 和 BizTalk Server 2009 解决方案，自动将它们转换为 VS2010/BTS2010 解决方案部署到 BTS2010。

# c - 将定义的变量插入数组

> ID：14998742
> 
> 赞同：3
> 
> 时间：2013-02-21T09:32:42.737
> 
> 标签：c, arrays, embedded

我不知道这是否可能，但帮助提出建议。

我有一个变量`unsigned char Var_2_insert;`，我有一个数组`const unsigned char insert_here[4];`。

这个变量在运行时初始化 say `var_2_insert = 225;`。这个想法是数组中的索引 3 应该始终具有 var_2_insert 的值。所以我想尝试类似的东西

```
insert_here[4] = { 0x00, 0x02, 0x03, Var_2_insert}; 
```

这样每当我尝试读取数组`insert here`时，它都会有 var_2_insert 的当前值。现在我知道我是否会这样：

`#define Var_2_insert 225`

这会很顺利，但由于这个变量必须在运行时更新，我试过了

```
#define _VAR Var_2_insert
insert_here[4] = { 0x00, 0x02, 0x03, _VAR}; 
```

但不起作用。那么我该怎么做呢？我希望我的问题足够清楚。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T09:47:40.993

你可以做的是有`Var_2_insert`一个指向数组中第三个索引的指针：

```
unsigned char insert_here[4]; // since it's updating it shouldn't be const
unsigned char *Var_2_insert = &(insert_here[3]);
//you just need to update the use of var_2_insert to dereference..
//  var_2_insert = 225 // <-- before
   *var_2_insert = 225 // <-- after 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T09:48:15.987

如果数组元素在运行时发生变化，那么它们并不是真正的*const*。"#define" 与直接键入硬编码值相同，只是您让预处理器完成工作以及其他好处。但这无助于在此处根据需要动态更改值。

将数组声明为指针数组并引用它而不是像这样使用原始数组：

```
int var = 225;
int insert[4] = { 0x00, 0x02, 0x03, 255};
int *a[4] = { &insert[0], &insert[1], &insert[2], &var}; 
```

从现在开始使用这个指针数组，它将具有 的更新值`var`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T09:35:30.823

数组初始值设定项在编译时定义数组内容，因此您需要在编译时知道要定义的值。但是其中一个值是在运行时定义的变量。

在这种情况下，您需要将数组初始化移至运行时：

```
unsigned char insert_here[4] = { 0x00, 0x02, 0x03};
insert_here[3] = Var_2_insert; 
```

但在这种情况下，您是在声明后修改数组，因此您需要从数组定义中删除 const。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T09:41:55.473

嗯...我不明白你为什么需要#define。如果您需要在运行时修改 var，请使用变量，而不是定义。第一种方法很好用：

```
char Var_2_insert = 225;
const unsigned char insert_here[4] = { 0x00, 0x02, 0x03, Var_2_insert}; 
```

* * *

“#define _VAR Var_2_insert” 这将在编译时将所有“_VAR”替换为“Var_2_insert”，因此您可以直接放入var。

* * *

编辑：好的，所以您随时都希望 insert_here[3] 具有 Var_2_insert 的值。它更复杂，并引入了一些可能产生硬错误的副作用，但如果你知道你在做什么，你可以用这样的指针来做：

```
const unsigned char insert_here[4] = { 0x00, 0x02, 0x03, 0};
unsigned char * Var_2_insert2 = (char*) &insert_here[3]; 
```

然后，如果您想将其用作变量，#define 是唯一（但不好）的解决方案：

```
#define _VAR (*Var_2_insert2) 
```

你把你的 const 放在桌子上，但它只是告诉你的其余代码不可能修改它，而不是它是恒定的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-21T09:44:01.307

如果不是，为什么将其声明为常量？

```
unsigned char insert_here[4] = { 0x00, 0x02, 0x03, 0x00}; /* remove const */
insert_here[3] = Var_2_insert; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-21T20:52:19.597

继@Roee Gavirel 的回答之后，如果您要使用 C++ 而不是 C，则可以通过使用引用变量来稍微清理一下语法：

```
unsigned char insert_here[4] ;
unsigned char& Var_2_insert = insert_here[3];

var_2_insert = 225 // modifies insert_here[3] 
```

除了不需要解引用运算符之外，这里的区别在于引用可以被初始化但不被赋值，所以它总是引用 insert_here[3]，而指针变量可以被重新赋值（除非你声明了它`unsigned char* const Var_2_insert2`，但你会仍然需要取消引用）。

与许多 C++ 功能一样，此实例与等效的 C 代码相比具有零开销。

# .net - 未在 DLL 中调用 VB.NET 静态构造函数

> ID：14998747
> 
> 赞同：2
> 
> 时间：2013-02-21T09:32:51.733
> 
> 标签：.net, vb.net, oop, inheritance

我有一个 VB.NET 项目，它有 2 个这样的类。一个 Base 和一个派生，包含在单独的项目 DLL 中。

```
Public Class BaseClass
    Public Shared label_ As String
End Class

Public Class Derived
    Inherits BaseClass

    Shared Sub New()
        BaseClass.label_ = "Some Label"
    End Sub

    Public Shared Sub Dump()

    End Sub
End Class 
```

为了测试我创建的这段代码

```
Sub Main()

    'Shared label is Nothing here?
    Console.WriteLine(Derived.label_)

    'Shared label is assigned here as shared constructor is called
    Derived.Dump()
    Console.WriteLine(Derived.label_)

End Sub 
```

我发现派生类中的共享构造函数仅在我调用实例方法或调用任何其他静态方法时才被调用？

我的理解是在应用程序运行时调用共享构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:34:52.493

在创建第一个实例或引用任何静态成员之前，会自动调用静态构造函数来初始化类，而不是在应用程序运行时。

您无法知道将调用共享构造函数的确切时刻，并且您不应该对此做出假设，但 MSDN 确保了以下几点：

1.  共享构造函数在创建任何类类型的实例之前运行。
2.  共享构造函数在访问结构类型的任何实例成员之前运行，或者在显式调用结构类型的任何构造函数之前运行。调用为结构创建的隐式无参数构造函数不会导致共享构造函数运行。
3.  共享构造函数在引用任何类型的共享成员之前运行。
4.  共享构造函数在从该类型派生的任何类型加载之前运行。
5.  在程序的单次执行期间，共享构造函数不会运行多次。

# c# - 如何在 C# 中使用 report.ExportToStream 函数

> ID：14998750
> 
> 赞同：2
> 
> 时间：2013-02-21T09:33:10.397
> 
> 标签：c#, crystal-reports, sendmail

我目前正在使用 c#。我需要将报告文件转换为 pdf 格式并通过邮件发送。我编写了编码及其工作。我**`rpt.ExportToDisk(ExportFormatType)`**用于转换。但这需要很长时间。任何人都可以建议我，如何使用**`ExportToStream`**功能，这样我就可以避免前一个，因为我不希望将报告文件存储在我的磁盘中。这是我正在工作的代码

```
 rep1.Load(Server.MapPath("CrystalReport_ModbusNode.rpt"));
 rep1.ExportToDisk(ExportFormatType.PortableDocFormat,Server.MapPath("Modbus.pdf")); 
```

我试过这个：

```
rep1.ExportToStream(ExportFormatType.PortableDocFormat);
rep1.SaveAs(Server.MapPath("Modbus.pdf")); 
```

但如果我使用它，**Modbus.pdf**仍然是`rpt`格式。 `ExportToStream`我没有做任何改变？？如何发送邮件而不将其导出到我的磁盘。谁能帮我解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:35:22.613

ExportToStream 函数返回一个流。然后，您可以使用此流写入文件。有关详细信息，请参阅此答案：[如何将流保存到 C# 中的文件？](https://stackoverflow.com/questions/411592/how-do-i-save-a-stream-to-a-file)

# android - USB断开时的android调试

> ID：14998759
> 
> 赞同：1
> 
> 时间：2013-02-21T09:33:52.240
> 
> 标签：android, debugging, adb, logcat

我有很多`Log.i`，`Log.d`在我的应用程序中。在真实设备上运行时，我看到`DDMS`使用会话过滤器或不使用过滤器的每个日志语句的日志输出。

当我断开 USB 并在我的应用程序中执行操作以生成`debug`日志行时，它不会生成输出行。通过我在运行时没有进入我的应用程序来检查历史`logcat`输出：`adb``logcat -b events -v time -d *:*`

在清单中我有

```
android:debuggable="true" 
```

运行`adb -d shell getprop`包含

```
[ro.debuggable]: [0] 
```

我想类似的问题与我的有关： [如何在三星设备上启用/禁用调试模式？](https://stackoverflow.com/questions/11461001/how-can-i-enable-disable-the-debug-mode-on-my-samsung-device)

在设备 (2.3.6) 上，在设置-应用程序-开发下启用了 USB 调试。

我的目标是在设备未连接到计算机时获取我的应用程序生成的日志条目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-11T15:24:10.763

可以通过logcat进行远程调试，不需要额外的软件。

1.  将真实设备连接到计算机。
2.  运行`adb tcpip 5555`。
3.  断开设备。
4.  找出安卓设备的本地IP地址
5.  运行`adb connect 192.168.*.***`，将 *s 替换为设备的本地 IP。

如果一切顺利，设备现在应该已连接，您可以运行/调试并获取 logcat 消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:06:26.800

我建议使用某种专用软件进行远程日志记录和调试，这样您就可以获得所有日志，而不必担心设备断开连接时会丢失它们。您可以尝试使用[https://www.apphance.com/](https://www.apphance.com/)库。它允许您直接从您的设备记录、抓取屏幕截图、拦截异常和报告问题。是否启用调试并不重要。

# android - 滑动菜单活动中的@ContentView

> ID：14998760
> 
> 赞同：2
> 
> 时间：2013-02-21T09:33:56.457
> 
> 标签：android, roboguice, slidingmenu

我正在尝试从滑动菜单库`contentview`扩展后注入。`SlidingFragmentActivity`但是我遇到了错误

```
 java.lang.IllegalStateException: Both setBehindContentView must be called in onCreate in addition to setContentView". 
```

但如果我在里面设置内容，它工作正常`onCreate`。任何人都可以为此提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T21:27:41.303

`setBehindContentView`即使在使用`@ContentView`. `@ContentView`注释在超类 (RoboActivity) 中需要`setContentView`您，但不是.`onCreate``setBehindContentView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T11:25:43.130

最后我找到了解决方案

```
setContentView(R.layout.activity_main);
setBehindContentView(menu); 
```

试试这个。它对我很有帮助。

# android - Android：使用静态方法获取应用程序

> ID：14998761
> 
> 赞同：0
> 
> 时间：2013-02-21T09:34:03.643
> 
> 标签：android

我正在使用扩展`Application`类的模式来保存我的全局变量（[https://stackoverflow.com/a/708317/1709805](https://stackoverflow.com/a/708317/1709805)）。从我的 Android 组件 ( `Activity`, `Fragment`, `Service`, ecc ) 我使用 ( `(MyApp) getApplicaction()`) 访问它们，但在我的项目中我有很多辅助类我不能（显然）使用该方法。为了解决这个问题，我已经标记了一个返回应用程序的静态方法。这是代码：

```
public class MyApp extends Application{

  private static MyApp app;

  @Override
  public void onCreate(){
      super.onCreate();
      app = this;
  }

  public static MyApp getApp() {
      return app;
  }
} 
```

这是一个好的模式吗？有什么建议可以更好地实现我的目的吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:38:27.283

这是一种不好的做法。

只需`MyApp app = (MyApp)getApplicationContext();`在整个应用程序中使用。

确保您已在**AndroidManifest.xml**文件的标记中声明了**MyApp**`<application>`

 **您要做的是，当您想访问`MyApp app`其他非 Android 组件类中的对象时，然后从 Android 组件类（Activity、Fragment、Service 等）传递`MyApp app`给`argument of Constructor or Method`非 Android 组件类（Helper、Handler 或其他 Java 类） ）。**

# ios - 使用 MPMoviePlayerController 播放音频文件时出现异常

ID：14998765

赞同：1

时间：2013-02-21T09:34:07.190

标签：ios

# sql - 显示“'”符号

> ID：14998768
> 
> 赞同：-1
> 
> 时间：2013-02-21T09:34:12.760
> 
> 标签：sql, sql-server

我的要求是当我使用 F5 按钮执行文本“select asdf'asdf'ddd”时，在 sql Server 中显示“'”符号，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:40:22.990

你问的没有任何意义。

如果此 SQL 语句还有更多内容，并且`asdf'asdf'ddd`是列名，则可以将其括在方括号或双引号中：

```
SELECT [asdf'asdf'ddd]
FROM ... 
```

如果您只是想在控制台中选择该字符串，则需要将所有现有的单引号加倍（因为该符号用于表示字符串）。

您还需要将字符串本身括在这些双引号中，在发布时，其他答案都没有（它们在运行时都会产生语法错误）。

要将示例字符串按原样打印到控制台，您需要：

```
SELECT 'asdf''asdf''ddd' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:35:40.060

你需要逃避它，转义字符是`'`

```
select 'asdf''asdf''ddd' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:35:46.320

加倍。

```
"select asdf''asdf''ddd" 
```

尽管我希望这会失败，但`asdf'asdf'ddd`可能*不是*表或其他数据库对象名称。

如果要选择字符串值，则需要将其括在`'`：

```
select 'asdf''asdf''ddd' 
```

# php - 我在一个存储在变量中的文件中有一个 JSON 对象，但我似乎无法用它做任何我想做的事情，因为它嵌套在数组中

> ID：14998776
> 
> 赞同：0
> 
> 时间：2013-02-21T09:34:37.777
> 
> 标签：php, json, csv

我的 json 文件的内容格式如下：

```
[
  {
    "id": 1,
    "keyword_filter": null,
    "name": "My Name ",
    "type": "some product",
    "sku": "1234567",
    "nested_obj": {
      "url": "http://someurl.com",
      "resource": "/orders"
    }
  }
] 
```

我可以将它读入这样的变量：

```
$json_string = file_get_contents($jsonFile); 
```

最终，我需要从中创建一个制表符分隔的文件，但我什至似乎无法对其进行迭代。这是我尝试过的：

```
foreach($json_string as $item) {
    echo $item;
} 
```

这给了我一个错误，说我在我的 foreach 循环中提供了一个无效的参数。

我尝试将它读入这样的数组：

```
$json_array = file($jsonFile);
foreach($json_array as $item) {
    echo $item;
} 
```

这回显了一个包含 1 个项目的数组，即 JSON 对象。

有人可以告诉我如何进入那个 JSON 对象，以便我可以迭代它吗？将其编码回 JSON 只是双重转义引号并将其解码返回 NULL。

非常感谢这里的任何帮助......并且非常感谢任何关于转换为制表符分隔文件的提示，但我只需第一步就可以了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:43:07.557

试试这个 ：

json_decode ：将 json 字符串转换为数组：[http ://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

```
$array  = json_decode($json_string, true);

echo "<pre>";
print_r($array);

/// write the forech basd on the array out put.    

foreach($array as $item) {
    echo $item['id'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:14:34.687

我试过这个：

```
<?php

$str = '[
  {
    "id": 1,
    "keyword_filter": null,
    "name": "My Name ",
    "type": "some product",
    "sku": "1234567",
    "nested_obj": {
      "url": "http://someurl.com",
      "resource": "/orders"
    }
  }
]';

$array  = json_decode($str, true);

echo "<pre>";
print_r($array);

/// write the forech basd on the array out put.    

foreach($array as $item) {
    echo $item['id'];
}

?> 
```

我得到了输出：

```
Array
(
    [0] => Array
        (
            [id] => 1
            [keyword_filter] => 
            [name] => My Name 
            [type] => some product
            [sku] => 1234567
            [nested_obj] => Array
                (
                    [url] => http://someurl.com
                    [resource] => /orders
                )

        )

)
1 
```

这就是你想要的输出。在数组的末尾，您可以看到`1`它的值`echo $item['id'];`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T10:22:59.803

**您需要从中创建一个制表符分隔的文件**

```
$json_string = json_decode(file_get_contents($jsonFile), true);

foreach ($json_string as $k => $vals){
 // tab delimited header
 if ($k == 0) {
  echo join ("\t", array_keys($vals))."\n";
 }
 // tab delimited row
 echo join ("\t", $vals)."\n";

} 
```

# php - 保留换行符的正则表达式

> ID：14998780
> 
> 赞同：1
> 
> 时间：2013-02-21T09:34:51.840
> 
> 标签：php, regex, line-breaks

我有一个正则表达式，它只允许消息中的某些字符。我想要实现的是**允许换行符**，这将使用**nl2br**函数保留。

这就是我到目前为止所拥有的：

```
preg_replace('/[^a-zA-Z0-9ńśćółęążź\ .,-]/','',$message) 
```

据我检查，以下表达式应保留换行符，但我在将其添加到上述表达式时遇到问题：

```
/(\r|\n|\r\n){2,}/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:39:18.563

您只想将`\r`&添加`\n`到不替换的字符列表中。所以：

```
preg_replace("/[^a-zA-Z0-9ńśćółęążź\ \.,\-\r\n]/",'',$message) 
```

在上面的表达式中，我还必须将 " 更改`'`为 " （以便识别`\r`& `\n`），但还必须转义`.`and`-`字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:56:07.160

我相信这就是您正在寻找的。

*   使用 preg_quote 避免忘记转义某些字符，例如“。” 在你的表达中。我敢肯定，这主要是破坏它。
*   使用不区分大小写的 'i' 修饰符，而不是 a-zA-Z
*   正如罗斯所说，添加 \r 和 \n

> 打印 preg_replace('/' . preg_quote('[^a-z0-9ńśćółęążź\ .,-\r\n])') . '/i','',"test\r\ntest\rtest\ntest");

# javascript - 将数组拆分为多个数组或备用 - Javascript

> ID：14998782
> 
> 赞同：2
> 
> 时间：2013-02-21T09:34:53.617
> 
> 标签：javascript, jquery, arrays, object, var

我有一个数组

```
var array = ['123.456789,123.1','456.7890123,234.1','789.0123456,345.1']; 
```

我正在寻找的结果是

```
var array1 = [123.456789,456.7890123,789.0123456];
var array2 = [123.1,234.1,345.1]; 
```

这样做的最佳做法是什么？我一直在看 .split(""); 但想知道处理它的最佳方法。

提前感谢马赫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T09:37:13.880

我认为您应该使用**拆分**功能。试试这个或看这个[演示](http://jsbin.com/ukoraz/2/edit/)：

```
var array = ['123.456789,123.1','456.7890123,234.1','789.0123456,345.1'];
var array1 = [], array2 = [];

for(var i=0; i<array.length; i++){
   array1[i] = array[i].split(",")[0];
   array2[i] = array[i].split(",")[1];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T09:39:04.940

```
var arr = ["123.456789,123.1","456.7890123,234.1","789.0123456,345.1"];

var array1 = [],
    array2 = arr.map(function(e) {
        e = e.split(",");
        array1.push(+e[0]);
        return +e[1];
    });

console.log(array1, array2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T09:40:24.893

基本上，您应该遍历数组，并根据逗号将字符串分成两部分。每个部分进入各自的数组。

如果[`Array.forEach()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)允许：

```
var a1 = [], a2 = [];

array.forEach(function(item) {
  var parts = item.split(',');
  a1.push(+parts[0]);
  a2.push(+parts[1]);
} 
```

除此以外：

```
var a1 = [], a2 = [];

for (var i = 0, item; item = array[i]; ++i) {
  var parts = item.split(',');
  a1.push(+parts[0]);
  a2.push(+parts[1]);
} 
```

# php - 什么是 php 中的 run_init 和 load::om

> ID：14998783
> 
> 赞同：2
> 
> 时间：2013-02-21T09:34:58.237
> 
> 标签：php, xhprof

在探查器中，我看到以下内容

```
load::om/BaseApplicationsQuery.php  1   0.0%    807 0.5%    807 0.5%    1,250   2.0%    1,250   2.0
load::map/DeviceApplicationsTableMap.php    1   0.0%    2,636   1.8%    2,636   1.8%    0   0.0%    0   0.0% 
```

load::om、load::map、run_init 是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:22:16.470

当调用 zend_compile_file 并且 run_init 是 php require 或 include 时，这些前缀 load:: 与 xhprof 模块一起添加。

# android - 如何在 AndEngine 中同时弹跳、移动和跳跃精灵

> ID：14998787
> 
> 赞同：2
> 
> 时间：2013-02-21T09:35:05.897
> 
> 标签：android, android-layout, box2d, andengine

我希望以与[本视频](https://www.dropbox.com/s/f433futdgy11oxs/expectations.wmv)相同的方式移动精灵。我正在使用AndEngine。如何使用 AndEngine Box2D 物理扩展移动忍者（精灵），完成移动和跳跃。

这是我的 MainActivity1.class：

```
public class MainActivity1 extends BaseGameActivity {

    Scene scene;
    private TiledTextureRegion mPlayerTextureRegion;
    private BoundCamera mBoundChaseCamera;
    private static final int CAMERA_WIDTH = 1024;
    private static final int CAMERA_HEIGHT = 600;
    private BitmapTextureAtlas mBitmapTextureAtlas;
    private BitmapTextureAtlas mBitmapTextureAtlasp;
    private BitmapTextureAtlas mBitmapTextureAtlashm;
    private TextureRegion mhomeTextureRegion;
    private BitmapTextureAtlas mBitmapTextureAtlas1;
    AnimatedSprite player;
    private Body playerBody;
    private PhysicsWorld mPhysicsWorld;
    private BitmapTextureAtlas sheetBitmapTextureAtlas1;
    private BitmapTextureAtlas sheetBitmapTextureAtlasplaybtn1;
    private TiledTextureRegion mTargetTextureRegionplaybtn1;

    public void onLoadComplete() {
        // TODO Auto-generated method stub

    }

    public Engine onLoadEngine() {
        // TODO Auto-generated method stub
        final Display display = getWindowManager().getDefaultDisplay();
        int cameraWidth = display.getWidth();
        int cameraHeight = display.getHeight();
    //      Toast.makeText(this, "The tile the player is walking on will be highlighted.", Toast.LENGTH_LONG).show();
        this.mBoundChaseCamera = new BoundCamera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
        return new Engine(new EngineOptions(true, ScreenOrientation.LANDSCAPE, new RatioResolutionPolicy(cameraWidth, cameraHeight), this.mBoundChaseCamera));
    }

    public void onLoadResources() {
        // TODO Auto-generated method stub

        mBitmapTextureAtlas = new BitmapTextureAtlas(512, 512,
                TextureOptions.BILINEAR_PREMULTIPLYALPHA);

        mBitmapTextureAtlas1 = new BitmapTextureAtlas(1024, 1024,
                TextureOptions.BILINEAR_PREMULTIPLYALPHA);
        this.sheetBitmapTextureAtlasplaybtn1 = new BitmapTextureAtlas(512, 512);
        mTargetTextureRegionplaybtn1 = BitmapTextureAtlasTextureRegionFactory
                .createTiledFromAsset(sheetBitmapTextureAtlasplaybtn1, this,
                        "gfx/gameplay_stormstrike_full.png",  0, 212,1, 1);
    this.mBitmapTextureAtlasp = new BitmapTextureAtlas(512, 512, TextureOptions.DEFAULT);
        this.mPlayerTextureRegion = BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset(this.mBitmapTextureAtlasp, this, "gfx/storm_strike.png", 0, 0, 1, 1); // 72x128

        mTargetTextureRegion1 = BitmapTextureAtlasTextureRegionFactory
                .createTiledFromAsset(sheetBitmapTextureAtlas1, this,
                        "gfx/kolobok_04_walk.png",  0, 212,12, 1);

        this.mEngine.getTextureManager().loadTexture(this.sheetBitmapTextureAtlas);
        this.mEngine.getTextureManager().loadTexture(this.sheetBitmapTextureAtlas1);
        BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlashm, this, "gfx/loading_ipad.png", 0, 0);
        mEngine.getTextureManager().loadTexture(mBitmapTextureAtlas);
        mEngine.getTextureManager().loadTexture(sheetBitmapTextureAtlasplaybtn1);

        mEngine.getTextureManager().loadTexture(mBitmapTextureAtlasp);
        mEngine.getTextureManager().loadTexture(mBitmapTextureAtlas1);
        mEngine.getTextureManager().loadTexture(mBitmapTextureAtlashm);

    }

    public Scene onLoadScene() {
        // TODO Auto-generated method stub
        this.mEngine.registerUpdateHandler(new FPSLogger());

        scene = new Scene();
        scene.setBackground(new ColorBackground(0, 0, 0.8784f));

        this.mPhysicsWorld = new FixedStepPhysicsWorld(30, new Vector2(0, 0), false, 8, 1);
        final Sprite help = new Sprite(50, 70, mProjectileTextureRegionhelp);
        scene.attachChild(help);
        help.setVisible(false);

        player = new AnimatedSprite(100, 200, 150,150,this.mPlayerTextureRegion)
        {
            @Override
            public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
                switch(pSceneTouchEvent.getAction()) {
                    case TouchEvent.ACTION_DOWN:

                     playerBody.setLinearVelocity(10f,-10f);

                        break;
                    case TouchEvent.ACTION_MOVE:

                        break;
                    case TouchEvent.ACTION_UP:

                        break;
                }
                return true;
            }
        };
        scene.attachChild(player);
        scene.registerTouchArea(player);
        projectilesToBeAdded.add(player);

        AnimatedSprite playerbtn = new AnimatedSprite(10, 200, this.mTargetTextureRegionplaybtn1)
        {
            @Override
            public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
                switch(pSceneTouchEvent.getAction()) {
                    case TouchEvent.ACTION_DOWN:

                        playerBody.applyForce(new Vector2(200,-1500), new Vector2(playerBody.getWorldCenter()));

                        break;
                    case TouchEvent.ACTION_MOVE:

                        break;
                }
                return true;
            }
        };
        scene.attachChild(playerbtn);
        scene.registerTouchArea(playerbtn);

        final FixtureDef carFixtureDef = PhysicsFactory.createFixtureDef(10.0f, 0.5f, 0.5f);
        this.playerBody = PhysicsFactory.createBoxBody(this.mPhysicsWorld, this.player, BodyType.DynamicBody, carFixtureDef);

        this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(this.player, this.playerBody, true,false));

        scene.setTouchAreaBindingEnabled(true);

        this.scene.registerUpdateHandler(this.mPhysicsWorld);

        return scene;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T01:01:59.187

The movement taking place in the sample video involves several different concepts. You should be reading through the AndEngine Examples. In particular, take a look at these two:

*   org.andengine.examples.PhysicsExample
*   org.andengine.examples.PhysicsJumpExample

To start the jump you're going to want to call applyForce() on the physics body of the ninja. You'll need friction on the ninja and the surface he's bouncing against to produce the bounce. Per the comments below, I'm going to provide some additional definitions. Incidentally, these didn't come from me, they're from [the manual](http://www.box2d.org/manual.html).

## Density

> The fixture density is used to compute the mass properties of the parent body. The density can be zero or positive. You should generally use similar densities for all your fixtures. This will improve stacking stability. The mass of a body is not adjusted when you set the density. You must call ResetMassData for this to occur.

## Velocity

> In kinematics, velocity is the rate of change of the position of an object, equivalent to a specification of its speed and direction of motion. Speed describes only how fast an object is moving, whereas velocity gives both how fast and in what direction the object is moving.

## Friction

> Friction is used to make objects slide along each other realistically. Box2D supports static and dynamic friction, but uses the same parameter for both. Friction is simulated accurately in Box2D and the friction strength is proportional to the normal force (this is called Coulomb friction). The friction parameter is usually set between 0 and 1, but can be any non-negative value. A friction value of 0 turns off friction and a value of 1 makes the friction strong. When the friction force is computed between two shapes, Box2D must combine the friction parameters of the two parent fixtures. This is done with the geometric mean:

```
float32 friction;

friction = sqrtf(shape1->friction * shape2->friction); 
```

> So if one fixture has zero friction then the contact will have zero friction.

# c# - 更改 Umbraco CMS 主题/样式（免费）

> ID：14998788
> 
> 赞同：0
> 
> 时间：2013-02-21T09:35:07.907
> 
> 标签：c#, asp.net, css, umbraco

有谁知道我可以如何更改 Umbraco CMS 主题。（不适用于网站前端，仅适用于 CMS 前端）

*   有没有免费的模板可供下载？
*   是否有任何简单的方法可以自己设置样式而无需深入研究 Umbraco 的代码？

我想让 GUI 对非管理员用户更友好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:35:02.317

Project Belle 于 2012 年在 Umbraco 英国音乐节上宣布，并在[2012 年 11 月](http://umbraco.cmail5.com/t/ViewEmail/y/D2843F6FAE874C2C/60219303DA496B196E6039C17E42EE19#toc_item_0)的 uNews 杂志上再次宣布。以下是关于它的一些要点：

*   它将于 2013 年春夏发售。
*   这是对 Umbraco 后台用户界面的全面更新，在我看来它看起来很棒。
*   它目前是一个单独的开源项目，可在[Bitbucket](https://bitbucket.org/UmbracoHQ/umbracocms-belleui)上获得。
*   Bluegrass Digital 有一篇很好的[博客文章](http://www.bluegrassdigital.com/blog/2012/november/6/umbraco-uk-festival-meet-project-belle/)，强调了它的主要功能。
*   Brenden Rice 有一个Belle 的[工作演示](https://groups.google.com/forum/#!msg/umbraco-ux/L2MBPNMfatA/dLGazBTDq0AJ)可供任何想要查看它的人使用。

与其尝试自己重新设计 Umbraco 后台，我建议您为该项目做出贡献。如果您不想等待，您甚至可以使用 Belle 的预发布版本。不幸的是，没有其他可用的“主题”。

# mercurial - 如何正确使用 Mercurial 开发功能？

> ID：14998790
> 
> 赞同：1
> 
> 时间：2013-02-21T09:35:20.983
> 
> 标签：mercurial, tortoisehg

我们是两个开发人员，想在我们的小项目中使用 Mercurial。我们都是第一次与 Mercurial 取得联系。我们为我们的存储库打开一个 Bitbucket 帐户。我生成了一个测试项目骨架并将其推送到存储库中。我的同事从存储库中克隆并提交了一些东西进行测试。现在他想将它推送到存储库服务器上。我们得到了类似的东西：

![在此处输入图像描述](../Images/8f9534c13916a2757b88f49077aa7701.png)

我不能合并这两个分支，因为没有头部修订。我只能更新主分支，然后我们得到了类似的东西：

![在此处输入图像描述](../Images/1a65d4f7874b2e7bd2139df7181418f0.png)

有没有办法合并两个分支？管理这样的想法（例如开发功能）的最佳实践是什么？也许我的同事需要克隆并打开一个新的命名分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:40:11.310

mercurial 的底线 - 你总是在本地合并。在您的存储库中并推送回您的父存储库。

您的 bitbucket 存储库只是一个容器。您将其保留为主存储库并在本地完成所有工作。

此外，正如@Boas 建议的那样，请查看[DVCS U](http://www.youtube.com/watch?v=-k2vLKOUb8s)和[hginit](http://hginit.com/)。两者都非常适合初学者（和高级用户），并且可以很好地使用 DVCS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T22:10:00.390

> 我不能合并这两个分支，因为没有头部修订。

您不能出于不同的原因合并 - 根本没有分支。只是活跃的变更集不是头。`hg up`在 CLI 中或更新到 TortoiseHG 中的小费做线性化历史的把戏

![更新](../Images/2051d0a579d87309b9bde8b45dd4e762.png)

# c++ - visual studio 2010 express c++，不显示变量值

> ID：14998795
> 
> 赞同：-2
> 
> 时间：2013-02-21T09:35:29.203
> 
> 标签：c++, visual-studio-2010, variables

我刚开始使用 2010 vc express c++，但我找不到如何以及在哪里配置它以查看变量值，我曾经在 2008 版本中看到的相同变量开箱即用。

![在此处输入图像描述](../Images/4ecae22c36941d565400495ed528c501.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:46:00.887

我假设您指的是它以“原始”格式显示 Qt 数据结构而不是格式良好的事实。您需要下载并安装 Qt VS 插件以启用更好的格式，但这不适用于 VS Express 版本。

我从未使用过 Express，但如果它使用`autoexp.dat`.，您也许可以将 Qt 插件的内容偷运到那里，或者自己编写。[这个问题](https://stackoverflow.com/q/4883238/1782465)及其答案可以提供更多提示。

# javascript - 从一个点获得海拔

> ID：14998803
> 
> 赞同：-1
> 
> 时间：2013-02-21T09:35:48.273
> 
> 标签：javascript, google-maps-api-3, spatial

我正在使用连接到 google map api v3 的 javascript，并且我有以下 2 种方法。现在我的目标是从我给出方法的那一点开始，它会弹出那个特定点的高程。

但由于某种原因，它没有给出任何输出。

我在测试结果时使用硬编码点的原因。实际上，最后我将从数据库中获取它。

有什么建议为什么会发生这种情况？

```
 var elevator;
    var map;

    function InitializeMap() {

        var latlng = new google.maps.LatLng(-34.397, 150.644);
        var myOptions =
            {
                zoom: 8,
                center: latlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

        map = new google.maps.Map(document.getElementById("map"), myOptions);

        elevator = new google.maps.ElevationService();

        google.maps.event.addListener(map, 'click', getElevation);

    }

    function getElevation(event) {

        var locations = [];

        for (var i = 0; i < 1; i++) {

            var location = 'POINT(14.5084692510445, 35.8988013191481)';

            locations.push(location);

            var positionalRequest = { 'locations': locations }

            elevator.getElevationForLocation(positionalRequest, function (results, status) {

                if (status == google.maps.ElevationStauts.OK) {

                    if (results[0]) {

                        alert(results[0].elevation);

                   }

                }

            });

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:51:44.033

1.  该方法的名称是

    ```
    电梯.getElevationForLocation s 
    //------------------^
    ```

2.  一个错字：

    ```
    google.maps.ElevationStats // 
    ---------------------^^
    ```

3.  `positionalRequest.location`必须是`google.maps.LatLng`-objects 数组

    ```
    var location = new google.maps.LatLng(14.5084692510445, 35.8988013191481);
    ```

# hibernate - 休眠多对多映射同一实体

> ID：14998804
> 
> 赞同：0
> 
> 时间：2013-02-21T09:35:48.627
> 
> 标签：hibernate, jpa, many-to-many

当我映射相同的实体时，就像这里回答的那样：

[Hibernate 与同一实体的多对多关联](https://stackoverflow.com/questions/1656113/hibernate-many-to-many-association-with-the-same-entity)

在“tbl_friends”表中，我有相同含义的行。例如，我有 id=1 的用户和 id=2 的用户。在“tbl_friends”表中，当他们作为朋友链接时，我有两行

```
1-2
2-1 
```

是否有可能使用 Hibernate 或 JPA 注释以某种方式在一行（1-2 或 2-1）中建立这种关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:14:20.033

不，你不能，因为那 2 行没有相同的含义。一行是说 PersonA 是 PersonB 的朋友，另一行是 PersonB 是 PersonA 的朋友。从功能上讲，在您的示例中，这两个关系可能具有相同的含义，但在数据库级别并非如此（友谊并不总是相互的……这很可悲）。您唯一能做的就是将其隐藏在您的 API 中：

```
public class Person {

   private Set<Person> friends = new HashSet<Person>();

   public void addFriend(Person person) {
      friends.add(person);
      person.getFriends().add(this);
   }
} 
```

# core-data - 核心数据：多对多谓词不起作用

> ID：14998807
> 
> 赞同：4
> 
> 时间：2013-02-21T09:35:49.860
> 
> 标签：core-data, ios6, nspredicate

我试图为过滤多对多关系创建一个谓词。我有一个带有许多标签作为关系的 Message 对象。

我可以执行以下操作：

```
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"ANY labels.labelId == 4"]; 
```

而且我只会收到带有 labelId 4 的标签的消息。但是如果我这样做了

```
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"NONE labels.labelId == 4"]; 
```

这将给我我拥有的每一个 Message 对象，即使它们与 labelId 为 4 的 Label 有关系。这是为什么呢？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T10:41:42.460

在 Core Data 谓词中，“NONE”或“NOT ANY”似乎无法正常工作。两个谓词

```
 NONE labels.labelId == 4
 NOT (ANY labels.labelId == 4) 
```

实际上返回相同的结果

```
 ANY labels.labelId != 4 
```

这不是我理解文档的方式。作为一种解决方法，您可以使用 SUBQUERY：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(labels, $x, $x.labelId == 4).@count == 0"] 
```

# c# - 后生成事件不适用于 msbuild.exe

> ID：14998809
> 
> 赞同：7
> 
> 时间：2013-02-21T09:35:56.887
> 
> 标签：c#, asp.net, .net, msbuild

我有一个正在写入文本文件的构建后事件。当我从 Visual Studio 构建项目时，它工作正常。但是当我使用 msbuild.exe 时，Post build 事件不会写入文件。我正在使用带有以下参数的 msbuild：

```
msbuild.exe TestProj.Web.csproj /p:Configuration=Release /p:OutDir=C:\TestProj\bin\ /p:WebProjectOutputDir=C:\TestProj\ /p:DebugSymbols=false /p:DebugType=None 
```

构建后事件如下所示：

```
 <PropertyGroup Condition="'$(BUILD_NUMBER)'==''">
    <COMPUTERNAME>None</COMPUTERNAME>
    <BRANCH>None</BRANCH>
    <BUILD_NUMBER>None</BUILD_NUMBER>
  </PropertyGroup>
  <Target Name="AfterBuild">
    <WriteLinesToFile File="$(ProjectDir)$(OutputPath)\VersionInfo.txt" Overwrite="true" Lines="Project&#xD;&#xA;Created On $(COMPUTERNAME)&#xD;&#xA;Branch is $(BRANCH)&#xD;&#xA;Version Is $(BUILD_NUMBER)" />
  </Target> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T11:01:10.820

我已经通过将任务更改为

```
<WriteLinesToFile File="$(OutDir)\VersionInfo.txt" ...... /> 
```

# load - 创建特定的 CPU 负载

> ID：14998810
> 
> 赞同：1
> 
> 时间：2013-02-21T09:36:01.293
> 
> 标签：load, cpu

我正在寻找一种自动化工具，它可以让我在 CPU 上生成特定的负载。例如，给定参数 20，它应该在我的 cpu 上产生 20% 的负载。

我已经尝试过lookbusy、stress等，但效果不佳。我也使用 fork()-exec() 模型编写了自己的 bash 脚本。但是为了验证我正在做的实验，我需要一个自动化工具。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T16:49:09.880

这个脚本应该做你想做的事：[https ://github.com/ajurge/CPU_load.git](https://github.com/ajurge/CPU_load.git)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:24:35.360

你可能想看看这个工具： http: [//krash.ligforge.imag.fr/](http://krash.ligforge.imag.fr/)

# c# - 我想使用图片网址绑定图片

> ID：14998811
> 
> 赞同：-3
> 
> 时间：2013-02-21T09:36:03.760
> 
> 标签：c#, xml, linq, linq-to-xml

我想阅读下面的 XML 并按以下顺序打印输出。你能帮忙查询如何绑定图像吗？

```
<?xml version="1.0" encoding="utf-8"?>
 <Book>
   <L1 id="100">
     <Subjects>
       <subject>
          <thumb_image>
                <image url= url="http://dev2.merceed.jpeg1"/>
          <thumb_image>
         </subject>
       <subject>
         <thumb_image>
                <image url= url="http://dev2.merceed.jpeg2"/>
          <thumb_image>
      </subject>
       <subject>
          <thumb_image>
                <image url= url="http://dev2.merceed.jpeg3"/>
          <thumb_image>
       </subject>
     </Subjects>
   </L1>
  <L2 id="200">
     <Subjects>
       <subject>
         <thumb_image>
                <image url= url="http://dev2.merceed.jpeg"/1>
          <thumb_image>
       </subject>
       <subject>
           <thumb_image>
                <image url= url="http://dev2.merceed.jpeg2"/>
          <thumb_image>
       </subject>
       <subject>
          <thumb_image>
                <image url= url="http://dev2.merceed.jpeg2"/>
          <thumb_image>
       </subject>
     </Subjects>
   </L2>
<Book> 
```

我想要像这样的输出

100

图片1

图片2

图3

......

200

图片11

图12

图13

我正在使用我的代码是

```
 var query = from l in xmlDoc.Descendants("L1")
 from subject in l.Descendants("Subjects")
 select new Notch
 {
     name = (string)l.Attribute("id").Value,
     SubjectName= l.subject("article").Select(a => (string)a.Attribute("SubjectName")).ToList(),
      url = l.Element("article").Elements("thumb_image").Select(x => (string)x.Attribute("url")).ToString()
     };

     foreach (var result in query)
     {
         foreach (var titles in result.SubjectName)
         {
              Console.WriteLine(titles);
         }
         foreach (var image in category.Image)
         {
              Console.WriteLine(image);
         }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:41:33.377

目前尚不清楚您希望当前查询如何工作（例如`l.subject`，以及`article`在您的 XML 中没有出现的使用），但我怀疑您想要类似的东西：

```
var query = from l in xmlDoc.Descendants("Li")
            select new Notch
            {
                name = (string) l.Attribute("id"),
                SubjectName = l.Element("Subjects")
                               .Elements("subject")
                               .Select(x => (string) x.Attribute("SubjectName"))
                               .ToList()
            }; 
```

我还*强烈*建议您仔细查看您的变量和属性名称。调用的属性`SubjectName`具有*集合*值是没有意义的，调用迭代变量`titles`来表示*单个*值也没有意义。关注这类事情可以更容易地维护代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:42:17.863

```
 var query = 
      from l in xmlDoc.Root.Elements()
      select new {
         Id = (int)l.Attribute("id"),
         Subjects = l.Element("Subjects")
                     .Elements("subject")
                     .Select(s => (string)s.Attribute("SubjectName"))
                     .ToList()
      };

   foreach (var item in query)
   {
       Console.WriteLine(item.Id);

       foreach (var name in item.Subjects)
           Console.WriteLine(name);
   } 
```

更新：编辑问题后（您已将 Li 元素更改为 L1 和 L2 元素），您应该使用`xmlDoc.Root.Elements()`而不是`xmlDoc.Root.Elements("Li")`

# android - 如何在自定义列表视图中对单选按钮进行分组

> ID：14998812
> 
> 赞同：3
> 
> 时间：2013-02-21T09:36:08.543
> 
> 标签：android, image, listview, radio-button, custom-lists

我正在使用**带有图像和单选按钮的自定义列表视图**。现在我想对这些单选按钮进行分组。这是我`xml`和java类程序。

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<ImageView
    android:id="@+id/image"
    android:layout_width="55dip"
    android:layout_height="55dip"
    android:scaleType="centerCrop"
    android:src="@drawable/stub" />

<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/text1"
    android:layout_width="208dp"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:layout_weight="0.56"
    android:checkMark="?android:attr/listChoiceIndicatorSingle"
    android:gravity="center_vertical"
    android:paddingLeft="6dip"
    android:paddingRight="6dip"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#000000" />

<RadioButton
    android:id="@+id/radioButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

```
 public class LazyAdapter extends BaseAdapter {

private Activity activity;
private String[] data;
private String[] conditions;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, String[] d, String[] c) {
    activity = a;
    data=d;
    conditions=c;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.item, null);

    TextView text=(TextView)vi.findViewById(R.id.text1);      
    ImageView image=(ImageView)vi.findViewById(R.id.image);
    text.setText(conditions[position]);
    imageLoader.DisplayImage(data[position], image);

    return vi;
} 
```

和第二类java..

```
 public class WeatherCondition extends Activity {

ListView list1;
LazyAdapter adapter;
ImageButton done,cancel;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.weather_conditions);
    done=(ImageButton)findViewById(R.id.imageButton1);
    done.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(WeatherCondition.this, AddWeatherAlarm.class);
                startActivity(intent);

        }

    });

    cancel=(ImageButton)findViewById(R.id.imageButton2);
    cancel.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent = new Intent(WeatherCondition.this, AddWeatherAlarm.class);
            startActivity(intent);
        }

    });       

    list1=(ListView)findViewById(R.id.list);        

    adapter=new LazyAdapter(this, mStrings,conditions);

    list1.setAdapter(adapter);
    list1.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

    list1.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
        Toast.makeText(WeatherCondition.this, ""+conditions[arg2],Toast.LENGTH_SHORT).show();

        }

    });

}

String conditions[]={ "Clear/Sunny","Partly Cloudy","Cloudy","Overcast","Mist","Patchy rain nearby","Patchy snow nearby","Patchy sleet nearby","Patchy freezing drizzle nearby","Thundery outbreaks in nearby","Blowing snow","Blizzard","Fog","Freezing fog","Patchy light drizzle","Light drizzle","Freezing drizzle","Heavy freezing drizzle","Patchy light rain","Light rain","Moderate rain at times","Moderate rain","Heavy rain at times","Heavy rain","Light freezing rain","Moderate or Heavy freezing rain","Light sleet","Moderate or heavy sleet","Patchy light snow","Light snow","Patchy moderate snow","Moderate snow","Patchy heavy snow","Heavy snow","Ice pellets","Light rain shower","Moderate or heavy rain shower","Torrential rain shower","Light sleet showers","Moderate or heavy sleet showers","Light snow showers","Moderate or heavy snow showers","Light showers of ice pellets","Moderate or heavy showers of ice pellets","Patchy light rain in area with thunder","Moderate or heavy rain in area with thunder","Patchy light snow in area with thunder","Moderate or heavy snow in area with thunder"};

   } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:48:28.023

```
Add the radiogroup to your row layout like this I have added 

<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

  <RadioGroup
  android:layout_width="wrap_content"
  android:layout_height="wrap_content">

  <RadioButton
  android:layout_width="wrap_content"
  android:id="@+id/radio1"
  android:text="alpha"
  android:layout_height="wrap_content"/>

    <RadioButton
  android:layout_width="wrap_content"
  android:id="@+id/radio2"
  android:text="beta"
  android:layout_height="wrap_content"/>

  </RadioGroup>
</LinearLayout> 
```

你的适配器应该有这样的东西

```
public class adapter extends ArrayAdapter<String>
    {

        public adapter() {
            super(rtt.this,R.layout.test,arr);
            // TODO Auto-generated constructor stub
        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return arr.length;
        }

        @Override
        public int getPosition(String item) {
            // TODO Auto-generated method stub
            return super.getPosition(item);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub

            LayoutInflater li=getLayoutInflater();
            View row=li.inflate(R.layout.test,parent, false);

            RadioButton a=(RadioButton)row.findViewById(R.id.radio1);
            RadioButton b=(RadioButton)row.findViewById(R.id.radio2);

            return row;
        }

    } 
```

这只是一个例子，请修改它以满足您的需要 CheckedTextView 您可以继续删除它不是必需的。

# android - 显示在列表底部

> ID：14998819
> 
> 赞同：2
> 
> 时间：2013-02-21T09:36:34.820
> 
> 标签：android, gridview

在 Nexus S 和 WildFire 上显示 my 时`ExpandableHeightGridView`，默认情况下`activity`视图位于底部`scrollview`。当我启动应用程序时，`ExpandableHeightGridView`使用不同的视图然后主`layout`自动在底部滚动！！！有没有人遇到过同样的问题？

这是我的`ExpandableHeightGridView`：

```
public class ExpandableHeightGridView extends GridView {

    // Attributes
    private boolean mExpanded = true;

    public ExpandableHeightGridView(Context context) {
        super(context);
    }

    public ExpandableHeightGridView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public ExpandableHeightGridView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        if (isExpanded()) {
            // Calculate entire height by providing a very large height hint.
            // But do not use the highest 2 bits of this integer; those are
            // reserved for the MeasureSpec mode.
            int expandSpec = MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE >> 2, MeasureSpec.AT_MOST);
            super.onMeasure(widthMeasureSpec, expandSpec);
            ViewGroup.LayoutParams params = getLayoutParams();
            params.height = getMeasuredHeight();
        }
        else {
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }
    }

    public void setExpanded(boolean expanded) {
        mExpanded = expanded;
    }

    public boolean isExpanded() {
        return mExpanded;
    }
} 
```

我的主要xml：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="@dimen/program_showview_padding"
        android:paddingTop="@dimen/program_showview_padding_top">

        <TextView
            android:id="@+id/program_category"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/program_vignette"
            android:layout_alignParentRight="true" />
        <TextView
            android:id="@+id/program_sub_category"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/program_category"
            android:layout_toRightOf="@id/program_vignette"
            android:layout_alignParentRight="true" />
        <TextView
            android:id="@+id/program_duration"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/program_sub_category"
            android:layout_toRightOf="@id/program_vignette"
            android:layout_alignParentRight="true" />
        <ImageView
            android:id="@+id/program_csa"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/program_duration"
            android:layout_toRightOf="@id/program_vignette"/>
        <TextView
            android:id="@+id/program_tweets_count"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/program_csa"
            android:layout_toRightOf="@id/program_vignette"
            android:layout_alignParentRight="true" />
        <TextView
            android:id="@+id/program_summary_label"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/program_vignette"
            android:text="@string/program_showview_summary" />
        <TextView
            android:id="@+id/program_summary"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/program_summary_label" />
        <TextView
            android:id="@+id/program_casting_label"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/program_summary"
            android:text="fffffff" />
        <fr.haploid.widget.ExpandableHeightGridView
            android:id="@+id/program_casting"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/program_casting_label"
            android:numColumns="auto_fit" />
    </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T12:59:31.217

尝试将您的滚动视图设置为不可聚焦。我有同样的问题，这解决了它。

```
yourExpandableHeightGridView.setFocusable(false); 
```

或者

```
android:focusable="false" 
```

在 XML 中。

# java - 使用多线程连接到多个串行 COM 端口

> ID：14998822
> 
> 赞同：0
> 
> 时间：2013-02-21T09:36:39.833
> 
> 标签：java, multithreading, serial-port

我们有一项研究要求服务器（使用套接字）具有连接到它的 cisco 设备的 com 端口。问题是我无法初始化多个线程。

这是关于我们如何为 com 端口初始化 Thread 的代码。

```
public CLI(String portName) {    
String driverName = "com.sun.comm.Win32Driver";
try{
    CommDriver commdriver = (CommDriver)Class.forName(driverName).newInstance( );
    commdriver.initialize();
}catch (Exception e2){}
portList = CommPortIdentifier.getPortIdentifiers();

while (portList.hasMoreElements()) {

    portId = (CommPortIdentifier) portList.nextElement();
    if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL) {
        if (portId.getName().equals(portName)) {
            try{
            System.out.println("Welcome to " + portId.getName() + "!!");

            serialPort = (SerialPort) portId.open("COM", 2000);
            inputStream = serialPort.getInputStream();
            outputStream = serialPort.getOutputStream();
            serialPort.addEventListener(this);
            serialPort.notifyOnDataAvailable(true);

            serialPort.setSerialPortParams(9600,
            SerialPort.DATABITS_8,
            SerialPort.STOPBITS_1,
            SerialPort.PARITY_NONE);
            serialPort.setFlowControlMode(1);
            }catch(Exception ex){}

            readThread = new Thread(this);
            readThread.start();
            }
        }
    }
}

 public void run() {
   }

public void send_msg(String line){
        try {
            outputStream.write((line + (char)13).getBytes());
            outputStream.flush();
        } catch (IOException e) {}

}

 public void serialEvent(SerialPortEvent event) {
    switch(event.getEventType()) {
    case SerialPortEvent.BI:
    case SerialPortEvent.OE:
    case SerialPortEvent.FE:
    case SerialPortEvent.PE:
    case SerialPortEvent.CD:
    case SerialPortEvent.CTS:
    case SerialPortEvent.DSR:
    case SerialPortEvent.RI:
    case SerialPortEvent.OUTPUT_BUFFER_EMPTY:
        break;
    case SerialPortEvent.DATA_AVAILABLE:

        byte[] readBuffer = new byte[8];
    try {
        inputStream.reset();
        outputStream.flush();
    } catch (IOException ex) {
    }
        try {
            while (inputStream.available() > 0) {
                int numBytes = inputStream.read(readBuffer);
            }
            Cleaner = new String(readBuffer);

            for(int ctr = 0; ctr < 8; ctr++)
                if((Cleaner.charAt(ctr) >= 32 && Cleaner.charAt(ctr) <= 127))
                {
                    receiver += Cleaner.charAt(ctr);
                    //System.out.print(Cleaner.charAt(ctr));
                }
                else if(Cleaner.charAt(ctr) == (char)13){
                    //test_prov.sendMessage(receiver);
                    test_prov.send_broadcast(receiver);
                    System.out.print(receiver);
                    receiver = "";
                }

        } catch (IOException e) {}
        break;
    }
} 
```

问题是当我初始化其中的 2 个时，它似乎没有读取其中的 1 个。

期待回复:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:20:16.290

`Runnable`您对每个线程都使用相同的。该可运行文件包含用于与一个 COM 端口通信的 IO 流。要处理多个端口，每个线程必须有一组特定的 IO 流，即。每`Runnable`。

处理此问题的正确方法是将处理通信的逻辑与创建线程的逻辑分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T19:52:54.787

如果您不是以兆位速度进行通信，则不需要多线程 - 只需在 10..100 毫秒间隔内轮询所有端口以获取传入数据。

# selenium - 无法使用 selenium 网格从虚拟创建的 testng.xml 并行运行 selenium 测试

> ID：14998824
> 
> 赞同：1
> 
> 时间：2013-02-21T09:36:42.490
> 
> 标签：selenium, webdriver, selenium-webdriver, testng, selenium-grid

我使用 Selenium Web 驱动程序 + TestNG 并行运行我的 selenium 测试。我用了三个类

**一级（主班）：**

从这堂课我要开始考试。我执行的起点。

```
 public class MainClass {

public WebDriver driver = null;

public void gid() {

    try {
        CreateTestngXml.gridHubLaunching();
        Thread.sleep(10000);
    } catch (IOException | InterruptedException e) {
        e.printStackTrace();
    }

    CreateTestngXml.grid("firefox", "chrome");
    driver.close();
}

public static void main(String a[]) {
    MainClass ts = new MainClass();
    try{
    ts.gid();
    }catch(Exception e){
        e.printStackTrace();
    }
}
} 
```

**第二类（CreateTestngXml）：**

公共类 CreateTestngXml {

```
/**
 * 
 * @param Brow
 * @param Brows
 * @code = To create a TestNg XML suite file and run it.
 */
public static void grid(String Brow, String Brows) {

    XmlSuite suite = new XmlSuite();
    suite.setName("Compatability");
    suite.setVerbose(1);
    suite.setPreserveOrder("true");
    suite.setThreadCount(4);
    suite.setParallel("tests");
    suite.setTimeOut("5000");

    // Test
    XmlTest test = new XmlTest(suite);
    test.setName("Browser One");
    test.addParameter("Browser", Brow);

    XmlTest testOne = new XmlTest(suite);
    testOne.setName("Browser Two");
    testOne.addParameter("Browser", Brows);

    List<XmlTest> tests = new ArrayList<XmlTest>();
    tests.add(test);
    tests.add(testOne);

    // Class
    List<XmlClass> classes = new ArrayList<XmlClass>();
    classes.add(new XmlClass("Grid.CheckGridOne"));
    test.setXmlClasses(classes);
    testOne.setXmlClasses(classes);

    suite.setTests(tests);

    // Suite
    List<XmlSuite> suites = new ArrayList<XmlSuite>();
    suites.add(suite);
    TestNG tng = new TestNG();
    tng.setXmlSuites(suites);
    try {
        // Running the Suite file.
        tng.run();
    } catch (Exception e) {
        e.printStackTrace();
    }

}

/**
 * 
 * @throws IOException
 * @throws InterruptedException
 * @code = To launch the Grid Hub and Nodes
 */
public static void gridHubLaunching() throws IOException,
        InterruptedException {

    // Launching nodes for each browser.
    String[] hub = new String[] { "C:\\Windows\\System32\\cmd.exe", "/c",
            "Start", "Grid-BatchFiles\\hub.bat" };
    String[] firefox = new String[] { "C:\\Windows\\System32\\cmd.exe",
            "/c", "Start", "Grid-BatchFiles\\firefox.bat" };
    String[] chrome = new String[] { "C:\\Windows\\System32\\cmd.exe",
            "/c", "Start", "Grid-BatchFiles\\chrome.bat" };
    String[] ie = new String[] { "C:\\Windows\\System32\\cmd.exe", "/c",
            "Start", "Grid-BatchFiles\\IE.bat" };
    Runtime.getRuntime().exec(hub);
    Thread.sleep(3000);
    Runtime.getRuntime().exec(firefox);
    Runtime.getRuntime().exec(chrome);
    Runtime.getRuntime().exec(ie);
}

  } 
```

`gridHubLaunching()`方法用于启动集线器和相应的浏览器节点。创建节点没有问题。我通过使用确保了创作`http://localhost:4444/grid/console`

**第三类（Grid.CheckGridOne）：**

```
 public class CheckGridOne {

MainClass ts = new MainClass();
WebDriver driver = ts.driver;

DesiredCapabilities capability = null;

/**
 * 
 * @param Browser
 * @throws Exception
 * @code = To launch a Browser for Compatibility Testing purpose.
 */

@Test
@Parameters({ "Browser" })
public void browserLaunch(String Browser) throws Exception {

    // Checking condition for a Firefox.
    if (Browser.equalsIgnoreCase("firefox")) {
        System.out.println("Firefox");

        capability = DesiredCapabilities.firefox();
        capability.setBrowserName("firefox");
        capability.setPlatform(org.openqa.selenium.Platform.WINDOWS);

        URL url = new URL(`http://lo***st:4444/wd/hub`);
        System.out.println("testing");
        driver = new RemoteWebDriver(url, capability);

        System.out.println("test");
    }

    // Checking condition for a iexplorer.
    if (Browser.equalsIgnoreCase("iexplorer")) {
        System.out.println("IE");

        System.setProperty(
                "webdriver.ie.driver",
                "E:\\FW\\Test-2.28.0(Feb-18)\\IEDriverServer\\64-Bit\\IEDriverServer.exe");

        capability = DesiredCapabilities.internetExplorer();
        capability.setBrowserName("internet explorer");
        capability.setPlatform(org.openqa.selenium.Platform.ANY);
        System.out.println("testing");
        driver = new RemoteWebDriver(new URL(
                    `http://lo***st:4444/wd/hub`), capability);
        System.out.println("test");
    }

    // Checking condition for a chrome.
    if (Browser.equalsIgnoreCase("chrome")) {
        System.out.println("chrome");

    }   
}
   } 
```

通过使用上述三个类，我尝试并行运行 selenium 测试。我的问题是它在达到`driver = new RemoteWebDriver(url, capability);`第三级之前运行良好。一旦到达该行，它就会终止`TestNG suite file`. 我不知道我的代码有什么问题？

**输出：**

```
 [TestNG] Running:
  Command line suite

 Firefox
 IE
 testing
 testing

 ===============================================
 Compatability
 Total tests run: 0, Failures: 0, Skips: 0
 ===============================================

 test
 test 
```

输出将总测试运行显示为`0`。我不知道为什么会这样显示。

Selenium 服务器 - 2.28.0
TestNG - 6.1.1 和 6.8
IEDriverServer - 2.28.0

我知道这个问题有点大。我认为这是解释清楚的正确方法。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:22:33.967

€DIT：你为什么从三等舱又叫回一等舱？这似乎是一个循环。

只需在您的第三堂课中定义您的 WebDriver。

```
public class CheckGridOne {

@Test
@Parameters({ "Browser" })
public void browserLaunch(String Browser) throws Exception {

WebDriver driver = null;

    // Checking condition for a Firefox.
    if (Browser.equalsIgnoreCase("firefox")) {
        System.out.println("Firefox");

        capability = DesiredCapabilities.firefox();
        capability.setBrowserName("firefox");
        capability.setPlatform(org.openqa.selenium.Platform.WINDOWS);

        URL url = new URL(`http://lo***st:4444/wd/hub`);
        System.out.println("testing");
        driver = new RemoteWebDriver(url, capability);

        System.out.println("test");
    }

    // Checking condition for a iexplorer.
    if (Browser.equalsIgnoreCase("iexplorer")) {
        System.out.println("IE");

        System.setProperty(
                "webdriver.ie.driver",
                "E:\\EproNewFW\\SWIFTest-2.28.0(Feb-18)\\IEDriverServer\\64-Bit\\IEDriverServer.exe");

        capability = DesiredCapabilities.internetExplorer();
        capability.setBrowserName("internet explorer");
        capability.setPlatform(org.openqa.selenium.Platform.ANY);
        System.out.println("testing");
        driver = new RemoteWebDriver(new URL(
                    `http://lo***st:4444/wd/hub`), capability);
        System.out.println("test");
    }

    // Checking condition for a chrome.
    if (Browser.equalsIgnoreCase("chrome")) {
        System.out.println("chrome");

    }   
}
   } 
```

# sql-server-2008 - 避免在 group by 中使用字段

> ID：14998825
> 
> 赞同：0
> 
> 时间：2013-02-21T09:36:44.337
> 
> 标签：sql-server-2008

我试图根据周来计算这个总和，但是当我使用以下代码时，我显然必须将周放在我的组中，这意味着输出每周没有一个代码，它有很多。有没有办法在 group by 中不使用 week 所以看起来像

```
cde  channel  201305   201306   201307
rr1     2       0         0.6      1 
```

现在看起来像：

```
cde  channel  201305   201306   201307
rr1     2       0     null     null
rr1     2     null    0.6      null
rr1     2     null    null      1 
```

这是我的代码

```
select cde,
case when week = '201305' then CAST((SUM(fin_acc_sum))AS FLOAT)/nullif(SUM(total),0) end as [201305],
case when week = '201306' then CAST((SUM(fin_acc_sum))AS FLOAT)/nullif(SUM(total),0) end as [201306],
case when week = '201307' then CAST((SUM(fin_acc_sum))AS FLOAT)/nullif(SUM(total),0) end as [201307],
channel
into #base2
from #acc_ref
group by cde,channel,week
order by channel,cde,week 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:17:28.980

只需在每个 CASE 表达式周围添加 MAX 并从 GROUP BY 中删除 week

```
...
MAX
(case when week = '201305' then CAST((SUM(fin_acc_sum))AS FLOAT)/nullif(SUM(total),0) end
) as [201305],
...
group by cde,channel
order by cde,channel 
```

您有效地将行旋转到列中，因此`week`在 GROUP BY 中没有任何意义

# windows - 如何使用 netsh 设置 SQUID 代理身份验证？

> ID：14998827
> 
> 赞同：0
> 
> 时间：2013-02-21T09:36:59.897
> 
> 标签：windows, proxy, command-prompt, squid, netsh

我在 SQUID 代理后面。我需要为 cmd 设置代理设置。我用的是win7所以proxycfg不能用。我这样使用netsh：netsh winhttp import proxy source=ie

Internet Explorer 已经有了我的代理设置。现在的问题是我的代理需要用户名/密码身份验证。我不知道如何在命令提示符下设置用户名和密码。任何帮助将不胜感激。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T01:32:07.693

这是我朋友的解决方案

安装 CC 代理。该软件在我的 PC 上创建了一个本地代理服务器。我在 LAN 设置中使用自己的 IP 地址作为代理服务器，这使我能够访问互联网而无需每次都请求代理，因为 CCproxy 使用我的校园代理作为级联代理。

在提示符中键入 netsh 命令，以便应用程序开始使用本地代理。（由于 CC 代理，本地代理没有身份验证）

netsh winhttp import proxy source=ie Metro 应用程序被编程为阻止通过本地代理访问 Internet。

另外，设置

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\NlaSvc\Parameters\Internet\EnableActiveProbing 为 0，然后在组策略中启用以下选项：

打开“本地组策略编辑器”(gpedit.msc) 导航到“计算机配置 - 管理模板 - 网络隔离”。启用“代理定义是权威的”和“子网定义是权威的”。

在推特上关注我@smailbelhamidi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:10:21.213

我最近也遇到了类似的问题。我实际上放弃了尝试找出是否可以使用 netsh 为需要身份验证的代理设置用户名/密码，因为我找不到任何说明（这对我来说是不可能的）。

我在其他地方看到的一种选择是使用 Proxifier 等软件通过代理服务器引导所有应用程序的流量。我自己没有尝试过，如果不起作用，我深表歉意。

如果您对 Squid 代理服务器具有管理员访问权限，则可以将其配置为允许访问特定站点*而无需进行*身份验证。这就是我解决问题的方法。可以在下面的 squid wiki 页面上找到有关如何执行此操作的详细信息：

[http://wiki.squid-cache.org/ConfigExamples/Authenticate/Bypass](http://wiki.squid-cache.org/ConfigExamples/Authenticate/Bypass)

# javascript - 为什么 chrome.bookmark.getTree() 不返回值

> ID：14998832
> 
> 赞同：0
> 
> 时间：2013-02-21T09:37:10.233
> 
> 标签：javascript, google-chrome, google-chrome-extension

此功能无法正常工作。如何使这个功能起作用？如何确定这个函数的执行上下文？

```
function getFolderIdByName() {
    var test;
    chrome.bookmarks.getTree(function(bookmarkTreeNodes) {
        test = 123;
    });
    console.log(test); \\ undefined 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:42:29.563

```
function getFolderIdByName() {
        var test;
        chrome.bookmarks.getTree(function(bookmarkTreeNodes) {
            test = 123;
        });
        console.log(test); \\ undefined 
} 
```

是一个异步函数

所以执行顺序是

*   `var test;`
*   `console.log(test);`
*   `chrome.bookmarks.getTree(function(bookmarkTreeNodes) { test = 123; });`

所以`console.log(test);`是未定义的。

# 参考。

*   [Chrome 异步函数](https://developer.chrome.com/extensions/overview.html)

# c++ - 在 Qt 中实现撤消 - 重做功能？

> ID：14998836
> 
> 赞同：9
> 
> 时间：2013-02-21T09:37:15.473
> 
> 标签：c++, qt

我的程序由我的`QLineEdit`多个`QMainWindow`. 用户可以更改任何`QLineEdit`. 目前，我可以在选择各自时通过默认实现为每个执行*撤消重做*。但是我想添加功能，以便当按下我的*undo* *redo* 按钮时，相应地编辑执行*undo/redo*。即说 L1、L2 等是我的。然后用户完成以下操作： 1\. L2->添加文本... 5\. L5->添加文本... 9\. L3->删除文本 10\. L5->撤消（通过选择 L5 & 然后“ ctrl + z")`QLineEdit``QLineEdit`*`QLineEdit`*`QLineEdit`**

 **现在当用户按下撤消/重做按钮如下： 1.撤消 -> 应该撤消在步骤 10 中执行的撤消 2.撤消 -> 应该撤消在步骤 9 中删除的文本 3.重做 -> 应该重做在步骤 9 中删除的文本9 4\. 撤消 -> 应该撤消第 8 步所做的操作

目前我可以模糊地想到一种主线历史的机制，但它会非常乏味。所以我想知道 Qt 是否为我提供了任何内置功能来做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-21T09:46:13.430

Qt 提供了一个[Undo/Redo](http://qt-project.org/doc/qt-5.0/qtdoc/qundo.html)框架。

[`QUndoCommand`](http://qt-project.org/doc/qt-5.0/qtwidgets/qundocommand.html)您基本上为要使可撤消/可重做的每个操作实现一个派生自 的命令，然后将它们推送到[`QUndoStack`](http://qt-project.org/doc/qt-5.0/qtwidgets/qundostack.html). 稍后，可以通过调用`QUndoStack`.

请注意，当将命令压入堆栈时，它会自动*重做*，表示第一次执行。有时这不是您想要的，因为该命令实际上可能已经执行 - 您需要在执行命令时考虑这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T09:49:19.737

实现这一点的一种方法是使用“命令”模式。Qt 提供了一个遵循此模式的撤消框架：http: [//qt-project.org/doc/qt-4.8/tools-undoframework.html](http://qt-project.org/doc/qt-4.8/tools-undoframework.html)

为了促进这一点，您可能需要对程序进行一些更改，使其更像 MVC（模型-视图-控制器）。您将拥有一个代表表单内容的数据模型。表单本身就是视图和控制器——用户对行编辑所做的任何更改都会更新数据模型。数据模型将使用从 Qt 撤消框架推送到 QUndoStack 的 QUndoCommands 对其进行更改。当模型的状态发生变化时（由于撤消/重做），UI 将响应变化并更新以反映模型的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T09:52:32.537

Qt 具有帮助撤消的类，请参阅`QUndoStack`. 每个可撤消的步骤都应该作为`QUndoCommand`.

您要实现的目标并不简单，因为您需要绕过`QLineEdit`s 的内部撤消堆栈。这里有一个建议：收听`focusChanged`来自 的信号`QApplication`。如果您的线路编辑之一具有焦点存储它的内容并连接到`QLineEdit::editingFinished()`信号。收到此消息后，将带有旧文本和新文本的命令放入堆栈。这种方法的缺陷是您不会在单个`QLineEdit`. 例如，如果您想存储 1) 用户选择文本并点击删除，然后 2) 键入一些新文本，作为单独的可撤消步骤，您可能需要开始过滤关键事件，并且逻辑可能会变得相当复杂。但这是一般方法。**

# facebook - 访问 facebook Mobile OAuth 时找不到页面

> ID：14998840
> 
> 赞同：1
> 
> 时间：2013-02-21T09:37:29.513
> 
> 标签：facebook

我正在使用诺基亚 5300。当我尝试访问 facebook 移动 OAuth 时，我发现页面未找到。这以前有效，我不确定facebook是否在他们的OAuth中改变了一些东西。请需要帮助。

# apache-flex - 在 Flex/BlazeDS 中 ChannelFaultEvent 究竟意味着什么？

> ID：14998844
> 
> 赞同：0
> 
> 时间：2013-02-21T09:37:39.473
> 
> 标签：apache-flex, air, blazeds

我有一个使用流式 AMF 的带有 BlazeDS 的 Flex 应用程序。我们有时在生产中看到我们得到一个`ChannelFaultEvent.FAULT`. 在那之后，有时我们会得到`ChannelEvent.CONNECT`一些`Consumer`对象的 a，但不是所有的对象。

这个事件究竟意味着什么？这个事件似乎也有一个`reconnecting`属性。当 true 或 false 时这意味着什么？

我们能否确定如果该`reconnecting`属性为真，将完成重新连接？或者这只是说它可能会尝试重新连接？如果重新连接失败，我们会收到一个事件吗？

# iphone - 无法更新数据库 ios

> ID：14998847
> 
> 赞同：0
> 
> 时间：2013-02-21T09:37:59.217
> 
> 标签：iphone, ios, database, sqlite

当我尝试它时，我无法更新我的数据库名称保持与以前相同并且没有改变。我应该怎么做才能使它起作用，因为我认为查询语句是正确的

这是我的代码：

```
//file path to database
-(NSString*)filePath {
    NSArray*paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[paths objectAtIndex:0]stringByAppendingPathComponent:@"bp.sql"];
}

//open database
-(void)openDB {

    if(sqlite3_open([[self filePath]UTF8String], &db) !=SQLITE_OK) {
        sqlite3_close(db);
        NSAssert(0, @"Databese failed to open");
    }

    else {
        NSLog(@"database opemed");
    }      
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)edit:(id)sender {

    bool text = true;

    editCodeOne = code1Edit.text;
    editCodeTwo = code2Edit.text;
    editCustomer = customerEdit.text;
    editDate = [NSDate date];

    if ([code1Edit.text isEqualToString:@""] && [code2Edit.text isEqualToString:@""] && [customerEdit.text isEqualToString:@""]) {

        text =false;

    }

    if (text ==false) {
          UIAlertView*alert = [[UIAlertView alloc] initWithTitle:@"Edit failed" message:@"The data has not changed " delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
    }

    if(text == true){

        NSString*sql= [NSString stringWithFormat:@"REPLACE summary SET customer = \"'%@'\" WHERE key= \"%@\"", editCustomer,detailController.customerName];
         const char* query_stmt = [sql UTF8String];
        sqlite3_stmt*statement;

        if( sqlite3_prepare_v2(db, query_stmt, -1, &statement, NULL )){
            if (sqlite3_step(statement)!= SQLITE_UPDATE) {

            sqlite3_close(db);
            NSAssert(0, @"Could not update table");
            }

        else {
            NSLog(@"table updated");
            code1Edit.text = @"";
            code2Edit.text = @"";
            customerEdit.text = @"";
        }

        }
        sqlite3_finalize(statement);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:24:06.337

用这个改变你的查询字符串

```
NSString*sql= [NSString stringWithFormat:@"UPDATE summary SET customer = '%@' WHERE key= '%@'", editCustomer,detailController.customerName]; 
```

这可能会解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:10:30.680

试试这个并交叉检查你的数据库是在模拟器中创建的

```
 -(int)update
{
        int i=0;

        @try
        {
            sqlite3_stmt *statement=nil;
            NSString  *sql=nil;

            sql= [NSString stringWithFormat:@"REPLACE summary SET customer = \"'%@'\" WHERE key= \"%@\"", editCustomer,detailController.customerName];;

            if(sqlite3_prepare_v2(database, [sql UTF8String], -1, &statement, NULL)!=SQLITE_OK)
            {
                NSAssert1(0, @"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
            }

            int success=sqlite3_step(statement);

            if (success == SQLITE_ERROR)
            {
                NSAssert1(0, @"Error: failed to insert into the database with message '%s'.", sqlite3_errmsg(database));
            }

            i = sqlite3_last_insert_rowid(database);

            sqlite3_finalize(statement);
        }
        @catch (NSException *e)
        {

            NSLog(@"Insert Show data fail.");
        }

        return i;
    } 
```

# java - 异常只在调试+断点中抛出

> ID：14998849
> 
> 赞同：0
> 
> 时间：2013-02-21T09:38:11.923
> 
> 标签：java, network-programming

所以我有一个线程来接收来自客户端的数据。有一个 ObjectInputReader 来读取这个数据。如果在我的 try-catch 中无法初始化 ObjectInputReader，如果客户端在没有通知服务器的情况下断开连接会发生什么，try-catch 应该调用异常。

所以我在 Catch-Statement 中处理了我的“断开连接客户端”。但它永远不会发生。

但是，如果我在调试时运行服务器并在 Catch-Statement 中设置断点，那么就会发生异常，并且一切都按照我的意愿进行处理。但只有断点，永远不会没有（调试或发布）。

我正在使用eclipse，我认为是最新版本。

有人碰巧有这个“错误”吗？还是我做错了什么？

```
private static Runnable receive = new Runnable(){

    @Override
    public void run() {
        // TODO Auto-generated method stub
        ObjectInputStream ois;

        while(true)
        {
            for(int i = 0; i < listSockets.size();i++){
                try {
                    ois = new ObjectInputStream(listSockets.get(i).getInputStream());
                    int receiveState = (Integer)ois.readObject();

                    DataPackage dp = (DataPackage)ois.readObject();

                    listData.set(i,dp);

                    if(receiveState == 1){ //client disconnected by user
                        disconnectClient(i);
                        i--;
                    }

                    ois.close();
                } catch (IOException | ClassNotFoundException e) {
                    disconnectClient(i);
                    i--;
                }

            }
        }
    }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:22:03.063

始终牢记调试可能会影响您的程序。特别是当您检查变量时，jvm 会导致调用大量的 toString() 方法。如果一个 toString() 方法改变了你的一个对象的状态，结果就会改变。尝试类似的东西

```
} catch (IOException | ClassNotFoundException e) {
      System.out.println("I am here");
      disconnectClient(i);
      i--;
} 
```

看程序是真的跳到catch块还是disconnectClient方法有缺陷。如果再添加几个 System.out。您可能会看到程序停止。

# ios - 列出 iPhone 中 Dropbox 中的所有 CSV 文件

> ID：14998850
> 
> 赞同：0
> 
> 时间：2013-02-21T09:38:12.433
> 
> 标签：ios, objective-c, dropbox

在我的应用程序中，我正在集成下拉框。为此，我想显示任何文件夹中的所有 csv 文件。

现在，我确实喜欢：显示仅在 app 文件夹中的 csv 文件。

```
[[self restClient] loadMetadata:@"/"];

#pragma mark DBRestClientDelegate methods

- (void)restClient:(DBRestClient*)client loadedMetadata:(DBMetadata*)metadata {

    NSArray* validExtensions = [NSArray arrayWithObjects:@"csv",nil];
    NSMutableArray* newPhotoPaths = [NSMutableArray new];
    for (DBMetadata* child in metadata.contents) {
        NSString* extension = [[child.path pathExtension] lowercaseString];
        if (!child.isDirectory && [validExtensions indexOfObject:extension] != NSNotFound) {

            // [files addObject:[child.path lastPathComponent]];
            [files addObject:child.path];
            [newPhotoPaths addObject:child.path];
        }
    }

    NSLog(@"%@",files);
    [tbl reloadData];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:27:30.243

Dropbox 应用程序有一个设置，允许他们只访问应用程序文件夹或访问用户整个 Dropbox。从 API 页面更改此设置，它应该可以工作

# java - 试图在 Java 中显示阿拉伯字符

> ID：14998851
> 
> 赞同：7
> 
> 时间：2013-02-21T09:38:11.900
> 
> 标签：java, utf-8, character-encoding, applet, arabic

我试图在 Java 小程序中显示**阿拉伯字符，但我总是得到****问号**'?????'。

我尝试了许多没有成功的解决方案：

*   [使用 new String(bytes [], charsetName) 到 UTF-8 decode](http://www.philvarner.com/blog/2009/10/26/unicode-in-java-bytes-and-chars-part/)。
*   更改 Netbeans 中的默认字符集：VM 选项中的 -Dfile.encoding=UTF8 和编译选项中的 -encoding UTF8。
*   使用 ByteArrayOutputStream 进行编码。
*   同时使用 UTF8 和 UTF-8 字符集名称。

我在西班牙语环境中使用 Windows 7。

一些解决方案**在运行 Netbeans 时有效，但在此环境之外不起作用**。这是[带有源代码和 .jar 的 Netbeans 项目](http://dl.dropbox.com/u/639494/JavaApplication4.rar)。

这是我正在使用的简单代码：

```
package javaapplication4;

import java.io.ByteArrayOutputStream;
import java.nio.charset.Charset;
import javax.swing.JApplet;
import javax.swing.JOptionPane;

public class JavaApplication4 extends JApplet{

@Override
public void init(){
    try {

        String str1 = new String("تعطي يونيكود رقما فريدا لكل حرف".getBytes(), "UTF-8");
        JOptionPane.showMessageDialog(rootPane, str1);

        String str2 = new String("تعطي يونيكود رقما فر");  
        ByteArrayOutputStream os = new ByteArrayOutputStream();
        os.write(str2.getBytes());
        JOptionPane.showMessageDialog(rootPane, os.toString("UTF-8"));

    } catch (Exception ex) {
        JOptionPane.showMessageDialog(rootPane, ex.toString());
    }
}
} 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-12T14:18:30.733

最**简单的解决方案**是正常使用字符串并更改工作区中的默认编码，例如 eclipse。

Windows-->首选项-->常规-->工作区-->文本文件编码

将编码更改为 UTF-8。

这里没有魔法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T11:39:16.347

我原来的答案是错误的：getBytes() 使用系统的默认编码生成一个字节数组，netbeans 将其设置为 UTF-8。

正确答案：根本不要使用 ByteArrayOutputStream 和 new String(byte[], Charset)。仅使用字符串。应该可以正常工作。

编辑：查看实际问题的评论和解释为什么解决方案不完全可能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T09:58:36.600

os.toString(...) 是错误的方法。它假设 ByteArrayOutputStream 中的字符是 utf-8，这是不正确的，因为 java 使用的是 utf-16。另一方面，该方法的输出是一个有效的 java 字符串，它又是：utf-16。

因此，您使用包含 utf-16 字符的数组将其解释为 utf-8 并将其转换为 utf-16。你有你的问题^^

编辑：与该行相同的问题：

```
new String("تعطي يونيكود رقما فريدا لكل حرف".getBytes(), "UTF-8"); 
```

getBytes() 生成 UTF-16 [这是错误的，请参阅我的其他答案]，您可以使用它创建一个将数组解释为 UTF-8 的字符串

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T11:55:32.663

如果您的源代码是 UTF-8 编码的，则必须`-encoding`在编译时设置该参数。否则编译器将使用系统的默认编码，在您的情况下可能是 cp1252（Windows 7，西班牙语），并且不支持阿拉伯语。

您应该删除所有对字节的转换，它们只会使事情变得更糟。这是它应该如何工作的：

```
String str1 = "تعطي يونيكود رقما فريدا لكل حرف";
JOptionPane.showMessageDialog(rootPane, str1); 
```

如果您无法设置编译器选项，您可以使用转义码将字符编码为 ASCII。`native2ascii`命令行工具可以为您进行这种转换。例如，为上述两行生成的代码将是：

```
String str1 = "\u062a\u0639\u0637\u064a \u064a\u0648\u0646\u064a\u0643\u0648\u062f \u0631\u0642\u0645\u0627 \u0641\u0631\u064a\u062f\u0627 \u0644\u0643\u0644 \u062d\u0631\u0641";
JOptionPane.showMessageDialog(rootPane, str1); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-18T16:30:57.630

从 Eclipse 的编辑菜单中将设置编码更改为 UTF-8

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-21T15:23:47.677

我想向您展示一个非常有用的代码，关于 jOptionPane 消息中的阿拉伯语，我使用 jlabel 来解决这个问题，试试这个：

```
JLabel jlbl1 = new JLabel("الملف غير موجود");
JOptionPane.showMessageDialog(null,jlbl1,"تنبيه", JOptionPane.ERROR_MESSAGE); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-19T10:50:26.940

我在 Windows Server 2016 中遇到了这个问题，我的阿拉伯语字符被传递为“???” 在 Netbeans 中。

解决方案：

1.  转到控制面板-> 区域。
2.  打开管理选项卡。
3.  单击“将系统本地更改为阿拉伯语”。
4.  重新启动服务器。

# python - 播放移动时Python程序没有响应

> ID：14998852
> 
> 赞同：1
> 
> 时间：2013-02-21T09:38:14.037
> 
> 标签：python, libtcod

我正在用 libtcod 在 python 中写一个 roguelike。在我切换到面向对象之前，运动效果很好。当我运行我的 python 游戏时，它会弹出，但一旦我尝试移动播放器，它就会冻结。这是我的代码：

```
import libtcodpy as libtcod;

SCREEN_WIDTH = 80;
SCREEN_HEIGHT = 50;
LIMIT_FPS = 20;

class Object:
    def __init__(self, x, y, char, color):
        self.x = x
        self.y = y
        self.char = char
        self.color = color

    def move(self, dx, dy):
        self.x = dx
        self.y = dy

    def draw(self):
        #libtcod.console_set_default_foreground(con, self.color)
        libtcod.console_put_char(con, self.x, self.y, self.char, libtcod.BKGND_NONE)

    def clear(self):
        libtcod.console_put_char(con, self.x, self.y, ' ', libtcod.BKGND_NONE)

def handle_keys():
    key = libtcod.console_check_for_keypress()
    if key.vk == libtcod.KEY_ENTER and key.lalt:
        libtcod.console_set_fullscreen(not libtcod.console_is_fullscreen())

    elif key.vk == libtcod.KEY_ESCAPE:
        return True  #exit game

    if libtcod.console_is_key_pressed(libtcod.KEY_UP):
        player.move(0, -1)

    elif libtcod.console_is_key_pressed(libtcod.KEY_DOWN):
        player.move(0, 1)

    elif libtcod.console_is_key_pressed(libtcod.KEY_LEFT):
        player.move(-1, 0)

    elif libtcod.console_is_key_pressed(libtcod.KEY_RIGHT):
        player.move(1, 0)

libtcod.console_set_custom_font('arial10x10.png', libtcod.FONT_TYPE_GREYSCALE | libtcod.FONT_LAYOUT_TCOD);
libtcod.console_init_root(SCREEN_WIDTH, SCREEN_HEIGHT, 'Lets Crawl', False);
libtcod.sys_set_fps(LIMIT_FPS);
con = libtcod.console_new(SCREEN_WIDTH, SCREEN_HEIGHT)

player = Object(SCREEN_WIDTH/2, SCREEN_HEIGHT/2, '@', libtcod.white)
#npc = Object(SCREEN_WIDTH/2 - 5, SCREEN_HEIGHT/2, '@', libtcod.yellow)
objects = [player]

while not libtcod.console_is_window_closed():

    for object in objects:
        object.draw()

    #libtcod.console_check_for_keypress()
    libtcod.console_blit(con, 0, 0, SCREEN_WIDTH, SCREEN_HEIGHT, 0, 0, 0)
    libtcod.console_flush();

    for object in objects:
        object.clear()

    exit = handle_keys()
    if exit:
        break 
```

它可能与while循环和运动有关......呃我不知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:46:00.017

也许代替

```
def move(self, dx, dy):
    self.x = dx
    self.y = dy 
```

你要

```
def move(self, dx, dy):
    self.x += dx
    self.y += dy 
```

否则，如果您按下例如，您只需将播放器的位置设置为`(-1, 0)`（屏幕外） 。`KEY_LEFT`也许这就是你认为它被冻结的原因。

除此之外，您的代码对我来说运行良好。

# gwt - GWT：TabPanel 内 FlowPanel 内的 CellTable

> ID：14998854
> 
> 赞同：0
> 
> 时间：2013-02-21T09:38:23.093
> 
> 标签：gwt, size, tabpanel, celltable, flowpanel

我有一个 CellTable 小部件（扩展 Composite 并通过 UiBinder 具有 CellTable + Pager 的项目），它位于 FlowPanel 内，它是 TabPanel 的选项卡的内容。

我已经以编程方式（现在）设置了高度和宽度，以便： CellTable：600px x 500px FlowPanel：650px x 550px TabPanel：700px x 600px

当页面呈现时，我可以检查 HTML 以查看我的 CellTable 的内容和宽度 + 高度设置是否正常，所有其他组件也是如此，但由于某种原因我看不到表格。只有一个空的选项卡面板。任何想法为什么或如何正确调整组件的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:30:06.673

您必须设置选项卡面板的高度。

请参考以下链接

[TabLayoutPanel 仅显示小部件 选项卡项可见](https://stackoverflow.com/questions/13738904/tablayoutpanel-not-showing-widgets-only-tab-items-are-visible/13739312#13739312)

[GWT：如何使 tabPanel 达到 100% 高度](https://stackoverflow.com/questions/12669748/gwthow-to-make-tabpanel-to-100-height)。

# java - eclipse，servlet中的错误

> ID：14998856
> 
> 赞同：2
> 
> 时间：2013-02-21T09:38:25.237
> 
> 标签：java, eclipse, servlets

这是我在 Eclipse 上遇到的一些错误

```
 import javax.servlet.RequestDispatcher;
    import javax.servlet.ServletConfig;
    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    public class HelloServlet extends HttpServlet 
```

它说 HttpServlet 无法解析为类型，请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T09:44:21.047

您需要从应用程序服务器添加运行时库。

例如：

转到项目属性。单击构建路径，然后单击库选项卡。单击添加库，然后选择服务器运行时。选择您的服务器，然后单击确定。

![在此处输入图像描述](../Images/b8593409df769b8bc002cb51a7a46fc8.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:41:15.633

检查项目构建路径是否包含 Servlets api jar 文件。您可以通过两种方式添加它：

1) 将 servlets api .jar 文件添加到构建路径
或
2) 在构建路径中添加服务器运行时（我添加 Tomcat 服务器运行时库）

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-31T14:12:55.510

如果您的项目是 maven，则添加以下依赖项：

```
<!-- https://mvnrepository.com/artifact/javax.servlet/servlet-api -->
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.0.1</version>
    <scope>provided</scope>
</dependency> 
```

[参考](https://www.youtube.com/watch?v=0L9yTE_zFM0)

对于 gradle 项目：

```
dependencies {
providedCompile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.0.1'
} 
```

或下载`javax.servlet.jar`并添加到您的项目中。

脚步：

1.  右键单击项目。
2.  转到属性。
3.  转到 Java 构建路径。
4.  从选项卡中选择添加库选项。
5.  添加 Jar 文件给出 servlet-api.jar 文件的路径。
6.  清理并构建您的项目。

# javascript - 剔除绑定到复选框

> ID：14998859
> 
> 赞同：0
> 
> 时间：2013-02-21T09:38:29.967
> 
> 标签：javascript, jquery, knockout.js

我有一个需要由用户（取消）检查的对象列表：

```
var myList = [
    { id: 1, value: "aaa", checked: true}
    { id: 2, value: "bbb", checked: false}
    { id: 3, value: "ccc", checked: true}
] 
```

根据用户的选择，必须在其余元素上执行一些业务逻辑。它必须在任何（取消）检查操作之后执行，因此我需要知道受影响的确切元素。
我正在使用 knockout.js 并希望使用这种方法显示和绑定值。
复选框“已检查”绑定可以通过两种方式完成：通过传递将根据用户选择自动设置的布尔值，或者通过传递其内容将公开已检查值的数组。我无法获得受影响的列出对象，因此在这两种情况下都无法运行业务逻辑。

1.  当我将布尔值传递给复选框并返回平面布尔值时，我不知道它属于哪个列出的对象
2.  当我传递一个可观察数组时，我只能订阅它的更改，但在处理程序中我只有整个数组并且仍然不知道受影响的元素。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:09:24.173

抱歉，刚刚发现我可以提供带有上下文的订阅。订阅的完整语法类似于

```
observableItem.subscribe(function (newValue) {...}, context, stringVal) 
```

其中 stringVal 可以是“beforeChange”，它将在更改之前为您订阅事件。我不知道，因为他们[没有](http://knockoutjs.com/documentation/observables.html#explicitly_subscribing_to_observables)在官方网站上记录它。顺便说一句，有人知道最新的文档在哪里吗？

# android - Android在片段选项卡键盘内编辑文本没有弹出

> ID：14998864
> 
> 赞同：1
> 
> 时间：2013-02-21T09:38:36.103
> 
> 标签：android, android-edittext

我有一个 Tabview，我在其中加载不同`Fragments`的一个，`Fragment`我有一个`EditText`需要键盘自动弹出的地方，而无需单击`EditText`.

我尝试通过 xml 甚至通过代码手动设置焦点：

```
et.requestFocus();

<requestFocus /> 
```

但没有用：

即使我试过这个：

```
etName.setOnFocusChangeListener(new View.OnFocusChangeListener() {
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if (hasFocus) {
                    ((InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE)).showSoftInput(
                            etName, InputMethodManager.SHOW_FORCED);
                }
            }
        }); 
```

即使我单击 EditText，我第一次在哪里也看不到键盘，但是当我切换选项卡并返回时它可以工作（键盘自动弹出）。

这里有什么问题，我在项目中有一些其他编辑文本框，即使我没有设置焦点，它也会自动显示键盘。但这里很奇怪。和标签有关系吗？！

编辑：

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="4dp" >

        <EditText
            android:id="@+id/editTextName"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:hint="Enter album name..." >
        </EditText>

        <Button
            android:id="@+id/createAlbum"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dp"
            android:text="Create Album" />
    </LinearLayout>

</ScrollView> 
```

# ios - 导航控制器到标签栏控制器

> ID：14998869
> 
> 赞同：0
> 
> 时间：2013-02-21T09:38:48.490
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, uinavigationbar, uitabbar

我正在为我的应用程序编写故事板。该应用程序的结构是一个没有导航栏或标签栏的登录屏幕，它通向应用程序，在所有屏幕上显示导航栏和标签栏。所以导航控制器通向标签栏控制器。

登录成功后我尝试了以下操作：

```
UITabBarController *tabBarController=[[UITabBarController alloc]init];

DiaryViewController *diaryViewController = (DiaryViewController *)[storyboard instantiateViewControllerWithIdentifier:@"diary"];
WhosOutViewController *WOutViewController = (WhosOutViewController *)[storyboard instantiateViewControllerWithIdentifier:@"WhoOut"];
WhatsNearViewController *whatsNearViewController = (WhatsNearViewController *)[storyboard instantiateViewControllerWithIdentifier:@"WhatsNear"];
MoreViewController *moreViewController = (MoreViewController *)[storyboard instantiateViewControllerWithIdentifier:@"More"];
tabBarController.viewControllers=[NSArray arrayWithObjects:diaryViewController,whatsNearViewController, WOutViewController, moreViewController, nil];

[self.navigationController pushViewController:tabBarController animated:YES]; 
```

它确实会显示标签栏，但不显示导航栏。有人可以帮我吗？或者请提出另一种实现方式。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:44:33.930

**建议**。你应该反过来做：

```
self.navigationControllerOne.viewControllers = [NSArray arrayWithObject:diaryViewController];
self.navigationControllerTwo.viewControllers = [NSArray arrayWithObject:whatsNearViewController];
...
tabBarController.viewControllers=[NSArray arrayWithObjects:self.navigationControllerOne ,self.navigationControllerTwo, ... , nil]; 
```

然后愉快地推/解雇

# powershell - 与管理复选框等效的 Nuget 包管理器控制台

> ID：14998870
> 
> 赞同：1
> 
> 时间：2013-02-21T09:38:53.327
> 
> 标签：powershell, versioning, nuget

单击“为解决方案管理 Nuget 包”时，Nuget 包管理器 UI 允许管理已安装的包。选中项目旁边的复选框会在项目中安装与已安装包相同的版本。

是否有与此等效的包管理器控制台命令？

除非您使用 -Version 参数，否则 Install-Package 命令始终查找最新版本。但我通常不知道我已经安装了哪个版本。那么我如何在控制台中说：只需安装已安装在此解决方案的项目之一中的最新版本？

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:01:55.073

没有直接的命令可以这样做，但您可以通过使用 -Source 参数间接实现它。尝试这个：

```
Update-Package <id> -Source <path to the packages folder under solution root> 
```

# algorithm - 在测量列表中发现“大”值变化的算法

> ID：14998871
> 
> 赞同：1
> 
> 时间：2013-02-21T09:38:54.497
> 
> 标签：algorithm, statistics

我有一个测量液体体积的传感器。这种液体会慢慢消耗，并在需要时重新填充。我想检测的是这种液体被“偷走”或填充的次数。被盗是指液体体积突然下降。反之将被视为填充。从传感器获取的值具有较小的尖峰，如果有足够的测量值有助于做到这一点，则应该忽略这些尖峰。

是否有任何统计方法（文档）或编程算法（任何语言）甚至更好的 sql 函数/查询（任何数据库）来完成上述场景？

![在此处输入图像描述](../Images/745cc21d1f43e7d58576eb9381ca8aba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:14:47.187

您通常希望发现[异常值](http://en.wikipedia.org/wiki/Outlier "异常值")。

1.  您是否有想要保留的基线值，或者您想要与当前的运行平均值进行比较？

2.  您认为什么是突然下降 - 它是绝对术语（如 5l）还是相对术语（当前音量的 5%）。

如果您依赖运行平均值，这里是一个大概的描述。

```
on volumeChange do
    calculate new runningAverage
    if (runningAverage outside allowedRange(oldRunningAverage)) then raise warning
    oldRunningAverage := runningAverage 
```

你需要知道的是：

*   测量结果是如何进来的（你能指望他们定期来吗）
*   怎么`allowedRange`定义的

这是 5 次测量（蓝色）的简单移动平均值（红色）的图示：

![SMA(5)](../Images/56753092264cd0163d51a6a7b5d5276b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:35:24.777

也许值得您看看[Microsoft StreamInsight](http://social.technet.microsoft.com/wiki/contents/articles/14437.streaminsight-for-non-programmers.aspx)：

> 正如 Microsoft SQL Server 旨在管理静态数据一样，StreamInsight 旨在**分析动态数据**。对于 StreamInsight，流是具有与其关联的时间的数据序列。示例是提供交易所中不同股票随时间变化的价格的股票代码流，或者提供传感器随时间报告的温度值的温度传感器流。
> 
> **StreamInsight 程序通过一组查询来传递流，这些查询分析数据，观察有趣的信息**。**然后，它会输出从查询中派生的信息，例如由于查询识别出异常而生成的警报。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:29:08.653

计算关于时间的一阶导数应该会给你你正在寻找的东西。使用时间增量 > 1 的样本应该有助于消除小的跳跃。

# php - 实时网站上的白页

> ID：14998873
> 
> 赞同：1
> 
> 时间：2013-02-21T09:39:04.327
> 
> 标签：php

好的 - 这是问题所在：

我有一个完美运行的测试站点。

我有一个页面，它从 mysql 获取许多数据项，并在登录时为任何特定用户显示它们；用户可以选择编辑这些数据项。显示编辑页面并更改数据项。按下按钮时会显示白屏 - 网址正确。

我知道用户已连接到数据库（因为显示了以前的数据，所以在下一页显示数据以供编辑，当显示白页时没有消息说“无法连接”。

我知道该程序可以在我的测试台上运行（并加载、编辑和显示新数据），因此代码不会出现任何打印错误或标点错误——它只是在 Live 站点上运行时才会停止。

它让我很困惑！

相关代码为：

```
$result=mysql_query($sql);
// if successfully updated.
if($result){
echo "Successful";
echo "<BR>";
echo "<a href='xxxxxx.php?view=$email'>View result</a>";
}

else {
ini_set('display_errors',1); 
 error_reporting(E_ALL);
}
?> 
```

错误日志显示：

```
[Thu Feb 21 06:38:17 2013] [error] [client xxxx] File does not exist: xxx_html/robots.txt
[Thu Feb 21 02:48:47 2013] [error] [client xxxx] File does not exist: xxx_html/404.shtml
[Thu Feb 21 02:48:47 2013] [error] [client xxxx] File does not exist: xxx_html/robots.tx 
```

代码正确打开`<?php`

# mysql - row_number 由几列组成

> ID：14998877
> 
> 赞同：1
> 
> 时间：2013-02-21T09:39:07.907
> 
> 标签：mysql, row-number

我有以下数据：

```
type   id    date1   date2   diff
-----------------------------------    
blue   1      x1     xxx      18
blue   1      x2     -         -
red    1      x1     -         -
blue   2      x1     xx       15
blue   2      x2     xx       18
blue   2      x3     -        - 
```

我想添加一个`row_number`来获取这样的数据：

```
type   id    date1   date2   diff  row_number
---------------------------------------------
blue   1      x1     xxx      18      1
blue   1      x2     -         -      2
red    1      x1     -         -      1
blue   2      x1     xx       15      1
blue   2      x2     xx       18      2
blue   2      x3     -        -       3 
```

即首先按类型排序，然后是 id 和最后日期。

我尝试了以下语法：

```
Create table t(type char(7), id int(13), date1 date, date2 date, diff int, row_number int) ;

Insert into t(type, id, date1, date2, diff, row_number)

   (SELECT a.type, a.id, a.date1, a.date2, a.diff
    FROM 
       (Select 
            type, id, date1, date2, diff, row_number() over (order by type, id, date1) as r 
        from table) a 
    order by 
       a.type, a.id, a.date1; 
```

上面的语法不起作用，我收到错误消息：

> *您的 SQL 语法有错误；检查与您的 MYSQL 版本相对应的手册....*

我尝试了一种更简单的语法，只是为了查看命令是否像这样工作：

```
SELECT 
   type,    
   ROW_NUMBER() OVER (PARTITION BY type, id, date1 ORDER By type, lpnr, date1) as t,
   id,
   date1
FROM table; 
```

或者

```
select 
    row_number() over(order by id), 
    id
from table; 
```

并且仍然收到相同的错误消息。

你能告诉我我做错了什么或者row_number在MYSQL版本中不起作用（我有heidi和workbench）吗？如果命令不起作用，还有其他方法可以做我想做的事吗？

非常感谢你的帮助！

琳达

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:04:12.170

不幸的是，我不相信 MySQL 提供了您尝试使用的分析功能，即`ROWNUMBER() OVER PARTITION`；

但是，这并不意味着它不能使用其他方式得出。试一试：

```
create table myTable (type varchar(50) not null,id int(10) unsigned not null,
date1 varchar(10) default null,date2 varchar(10) default null,diff int unsigned default null
);

insert into myTable (type,id,date1,date2,diff) values ('blue',1,'x1','xxx',18);
insert into myTable (type,id,date1,date2,diff) values ('blue',1,'x2',null,null);
insert into myTable (type,id,date1,date2,diff) values ('red',1,'x1',null,null);
insert into myTable (type,id,date1,date2,diff) values ('blue',2,'x1','xx',15);
insert into myTable (type,id,date1,date2,diff) values ('blue',2,'x2','xx',18);
insert into myTable (type,id,date1,date2,diff) values ('blue',2,'x3',null,null);

select t.type,t.id,t.date1,t.date2,t.rownum
from
(
select mt.type,mt.id,mt.date1,mt.date2,mt.diff,
case 
when mt.id = @curId and mt.type = @curType then @curRow := @curRow + 1 
     else @curRow := 1
END as rownum,
@curId := mt.id,
@curType := mt.type
from myTable mt
join (select @curRow := 0, @curId := -1,@curType="") r
order by mt.id,mt.type
) t; 
```

# github - Github - 降价文件有什么作用？

> ID：14998878
> 
> 赞同：0
> 
> 时间：2013-02-21T09:39:09.167
> 
> 标签：github, markdown

一个文件与zip`.md`中的源代码文件一起出现。`github`这个文件有什么作用，我应该如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:41:54.610

Markdown 是一种相对链接。使用 markdown 文件，您可以在不同的文档文件之间直接链接，无论您是在 GitHub 本身上查看文档，还是在本地使用不同的标记渲染器查看文档。

因此，而不是绝对链接：

```
[a link](https://github.com/user/repo/blob/branch/other_file.md) 
```

…您可以使用相对链接：

```
[a relative link](other_file.md) 
```

并确保它链接到 user/repo/blob/branch/other_file.md。

看看：[https ://github.com/blog/1395-relative-links-in-markup-files](https://github.com/blog/1395-relative-links-in-markup-files)

# asp.net-mvc - 向剑道网格的 ForeignKey 列添加箭头

> ID：14998885
> 
> 赞同：1
> 
> 时间：2013-02-21T09:39:43.520
> 
> 标签：asp.net-mvc, razor, kendo-grid

我有一个带有 ForeignKey 列的剑道网格。由于用户可以单击此列来编辑信息并不明显，因此我想在每行的末尾添加一个箭头，如下图所示：

![我想做的事](../Images/80d7698aff62bffefb768e92388eaaea.png)

我尝试更改 GridForeignKey 编辑器模板，但是，这只会影响用户已经单击该行以对其进行编辑时的状态。我需要的是在编辑之前将箭头图标添加到字段的“静态”状态。

我还尝试使用诸如 ki-arrow-s、k-state-selected 和 .k-state-hover 之类的 css 类。但是，看起来我正朝着错误的方向前进，必须有更简单的方法。

Kendo 网格的 API 参考并没有真正的帮助。

除了已经存在的 GridForeignKey 模板之外，也许我可以为默认外观添加一个模板？尽管如此，还是看不到如何使用两个模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:07:16.243

向剑道人问了这个问题，这是答复。他们的解决方案确实对我有用：

我建议您为外键列指定一个 ClientTemplate。在模板中，您可以添加带有 k-icon 和 ki-arrow-s 类的标签以包含箭头。

例如

```
.ClientTemplate("#=data.Employee.EmployeeName# <span class='custom-arrow k-icon k-i-arrow-s'></span>"); 
```

我还包括一个自定义箭头类来定位箭头。

例如

```
<style>
  .custom-arrow.k-icon
  {
      float: right;
  }
</style> 
```

# xaml - 根据从 Binding 接收到的数据，在 XAML 中更改颜色 StackPanel

> ID：14998886
> 
> 赞同：1
> 
> 时间：2013-02-21T09:39:45.707
> 
> 标签：xaml, windows-phone-8

我想根据从 Binding（值）接收到的数据（1、2、3...）更改 StackPanel 的颜色，我应该使用哪个？

```
<StackPanel Grid.Column="1">
   <Border Height="50" Width="Auto" Margin="3" Background="Black">
      <TextBlock FontSize="18" FontWeight="Bold" TextWrapping="Wrap" Foreground="White" 
                 Text="{Binding valor}" VerticalAlignment="Center"
                 HorizontalAlignment="Center"/>
   </Border>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T10:39:09.557

使用转换器： [http ://www.smallandmighty.net/blog/using-value-converters-to-change-the-visibility-of-a-control](http://www.smallandmighty.net/blog/using-value-converters-to-change-the-visibility-of-a-control)

```
<Window.Resources>
    <converters:ColorConverter x:Key="ColorConverter"/>
</Window.Resources> 
```

XAML：

```
 <StackPanel Background="{Binding valor, Converter={StaticResource ColorConverter}}"/> 
```

你的转换器看起来像这样：

```
public class ColorConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter,CultureInfo culture)
    {
        if (value != null)
        {
            int Value = (int)value;

            if(Value == 1)
               return Colors.Green;
             else if(Value == 2)
               return Colors.Red;
[...]
            }

        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:36:28.247

我通过在类中创建一个新变量并在 xaml 中调用这个新变量来修复它（Background="{Binding customBackground}"）

```
public object customBackground
    {
    get
    {
    if (color == "1")//GREEN 
        {
            return new SolidColorBrush(Color.FromArgb(255, 7, 166, 45));
        }
    if (color == "2")//RED
        {
            return new SolidColorBrush(Color.FromArgb(255, 230, 5, 10));
        }
    if (color == "3")//BLUE
    {
        return new SolidColorBrush(Color.FromArgb(255, 6, 102, 210));
    }
    if (color == "4")//YELLOW
    {
        return new SolidColorBrush(Color.FromArgb(255, 189, 211, 3));
    }
    // Color por defecto
    return new SolidColorBrush(Colors.Gray);
    }
    } 
```

# php - 查找在 PHP 中完成的更新数量

> ID：14998889
> 
> 赞同：0
> 
> 时间：2013-02-21T09:40:02.920
> 
> 标签：php, mysql, rows-affected

我正在做的是使用 PHP 使用表单编辑 MySQL 数据的数据。

我有两个文本字段作为姓名和手机号码。当我点击编辑时，我在文本字段中得到相同的数据，下面我有保存按钮。当我进行更改时，我得到了响应，但是当我单击编辑并且不在文本字段中进行任何更改并单击保存时，我得到响应失败。

下面是保存按钮的代码。

```
$sql = mysql_query("
    UPDATE userInfo SET fullName='$fullName', 
    mobileNumber='$mobileNumber' 
    WHERE id=$tagNumberId"
);

if (mysql_affected_rows()==1) {
    echo "done";
} else {
    echo "fail";
} 
```

我很担心`mysql_affected_rows()`。

以上让我认为如果UPDATE语句中的数据相同，`mysql_affected_rows()`将返回0，如果UPDATE语句中的数据不同，`mysql_affected_rows()`将返回1。

这是正确的吗？如果是对的，更新完成与否如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:47:27.483

在执行查询之后使用[mysqli_info](http://www.php.net/manual/en/mysqli.info.php)

```
$string = mysqli_info ( $link ); 
```

返回具有相关信息的字符串，例如 UPDATE

```
Rows matched: 40 Changed: 40 Warnings: 0 
```

在您的情况下，更新了一行但没有更改，您应该得到

```
Rows matched: 1 Changed: 0 Warnings: 0 
```

您可以从中检索值

```
preg_match("/Rows matched: (\d+)/", $string, $matches);
$number_of_rows = intval($matches[1]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:08:40.873

这是正确的mysql行为[UPDATE](http://dev.mysql.com/doc/refman/5.0/en/update.html)。但是如果你真的想要这个，你可以使用一些诡异的技巧。

```
$sql = mysqli_query("UPDATE userInfo SET id=@id:=id
                    fullName='$fullName',
                    mobileNumber='$mobileNumber'
                    WHERE id=$tagNumberId");
$result = mysqli_query($link, 'select @id');
if (array(null)!==mysqli_fetch_row($result)) {
    echo "done";
} else {
    echo "fail";
} 
```

PS 你必须为你的应用程序使用准备好的语句。

使用这种方法的 PPS，您无法识别计数，但如果您对 id 使用更新，则无需。

# asp.net-mvc - 不要序列化 JSON 中的实体框架类引用（ServiceStack.Text 库）

> ID：14998890
> 
> 赞同：3
> 
> 时间：2013-02-21T09:40:04.213
> 
> 标签：asp.net-mvc, json, entity-framework, servicestack

与大多数人一样，在将（可怕的）EF 对象序列化为 JSON 时，我也遇到了循环引用错误的问题。执行 db.Detach(efObject) 会有所帮助-但我仍然会输出像“EntityKey”这样的垃圾。

所以我想知道是否有一个选项（通过 JsConfig？）告诉序列化程序通过名称（EntityKey）或通过类型（EntityReference<T> 或 EntityCollection<T>）忽略属性？

或者我会被迫一起放弃 EF 并切换到更好的东西（我不想手动定义 ORM 类 - 我希望它们自动从 DB 生成）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:31:19.560

您不应该尝试将[实体框架类型重新用作 DTO，](http://www.infoq.com/articles/interview-servicestack)因为它们在设计上是 DTO 的不良替代品。相反，您应该使用 ServiceStack 的内置 TranslateTo/PopulateFrom 映射器（或 AutoMapper）将它们映射到特殊用途的 DTO 类型并返回它们。

话虽如此，请使用[IgnoreDataMember 或](https://stackoverflow.com/a/14859968/85785)在要序列化的属性上指定 DataMembers。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:06:24.797

*免责声明：我目前正在做原型设计，对我来说，方便比解决方案的稳健性更重要。所以，我所做的并不是一个好方法——我在这里复制粘贴它，以防万一其他人处于相同的位置并想要一个简单的（不是最好的）出路。你已经被警告过了。*

1.  我假设您已经在 MVC 项目中使用了 ServiceStack.Text。如果不是这种情况，请按照以下 QA 的说明进行操作：[ASP.NET MVC Json DateTime Serialization conversion to UTC](https://stackoverflow.com/questions/14973286/asp-net-mvc-json-datetime-serialization-conversion-to-utc)

2.  从 GitHub查看[ServiceStack.Text 库，](https://github.com/ServiceStack/ServiceStack.Text)并且（当然）在您的 MVC 项目而不是 DLL 中引用它。

3.  将此添加到 ServiceStack.Text/JsConfig 类：

    ```
    // Added properties for global excluding
    public static Type[] GlobalExcludedBaseTypes;
    public static string[] GlobalExcludedProperties; 
    ```

4.  更改 ServiceStack.Text/TypeConfig 类中的静态 TypeConfig()：

    ```
    static TypeConfig()
    {
        config = new TypeConfig(typeof(T));

        var excludedProperties = JsConfig<T>.ExcludePropertyNames ?? new string[0];
        var excludedGlobalBaseTypes = JsConfig.GlobalExcludedBaseTypes ?? new Type[0];
        var excludedGlobalProperties = JsConfig.GlobalExcludedProperties ?? new string[0];

        IEnumerable<PropertyInfo> properties = null;

        if (excludedProperties.Any() || excludedGlobalBaseTypes.Any() || excludedGlobalProperties.Any())
        {
            properties = config.Type.GetSerializableProperties().
                Where(x => !excludedProperties.Contains(x.Name) && !excludedGlobalProperties.Contains(x.Name) && !excludedGlobalBaseTypes.Contains(x.PropertyType.BaseType));
        }
        else
        {
            properties = config.Type.GetSerializableProperties();
        }

        Properties = properties.Where(x => x.GetIndexParameters().Length == 0).ToArray();
        Fields = config.Type.GetSerializableFields().ToArray();
    } 
    ```

5.  在您的 Global.asax 中，只需添加以下两行：

    ```
    JsConfig.GlobalExcludedProperties = new[] { "EntityKey", "EntityState" };
    JsConfig.GlobalExcludedBaseTypes = new[] { typeof(RelatedEnd), typeof(EntityReference) }; 
    ```

就是这样 - EntityState 和 EntityKey 将不再被序列化，您将不再需要担心循环依赖。

但是，再一次——**这不是最佳实践**——一旦你稳定了你的解决方案，一定要遵循 myz 的建议并迁移到 DTO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:18:31.810

您可以在模型上使用[ScriptIgnore](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.scriptignoreattribute.aspx)属性：

```
public class Item
{
    [ScriptIgnore]
    public Item ParentItem { get; set; }
} 
```

# asp.net - 如何将css应用于gridview内的按钮

> ID：14998891
> 
> 赞同：1
> 
> 时间：2013-02-21T09:40:03.763
> 
> 标签：asp.net, css, button, gridview

如何在不使用 CssClass 的情况下将 CSS 应用于 GridView 内的按钮？我有一个输入 `["type=submit"]`

在我的 CSS 类中，它适用于除 GridView 内的按钮之外的所有按钮。

我试过了

```
.gvwList input["type=submit"]{} 
```

GridView 使用的 CSS 在哪里，`gvwList`但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:43:26.667

你为什么不使用

```
 .gvwList button{} 
```

检查它在浏览器上呈现的内容并`css`相应地制作。
如果它正在渲染，`anchor`那么您可以使用

```
 .gvwList a{color: Blue;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:50:57.277

你可以使用这个：

```
.gvwList input[type="submit"]
{
   color: red;
} 
```

如果还是不行，你也可以试试 color: red !important;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:02:33.780

试试这个

```
.gvwList tr td a, .gvwList tr td input[type="submit"]
{
color: Red;
} 
```

为了

```
<asp:ButtonField Text="save" /> 
```

尝试

```
 .gvwList tr td a
    {
    color: Red;
    } 
```

为了

```
<asp:TemplateField>
                <ItemTemplate>
                <asp:Button ID="btn" runat="server" Text="save" />
                </ItemTemplate>
                </asp:TemplateField> 
```

尝试

```
.gvwList tr td input[type="submit"]
            {
            color: Red;
            } 
```

# android - 2 部手机返回完全相同 GPS 坐标的概率，在 Android 上使用 Network_Provider

> ID：14998895
> 
> 赞同：1
> 
> 时间：2013-02-21T09:40:16.853
> 
> 标签：android, geolocation, gps

2 个不同的 android 设备返回完全相同的 GPS 坐标的概率是多少。根据[wiki](http://wiki.xkcd.com/geohashing/GPS_accuracy)，小数点后5位给出的精度为1.1m，`onLocationChanged`返回到小数点后7位，表示精度为1cm。`GPS`现在我们还必须考虑技术本身会引入一些错误的事实。据我了解（以及我的测试），保持在同一位置的手机返回 0.18143341 米到 22 米之间。

我需要知道这一点才能得出一个现实的算法来通过他们的位置来识别人。问题是，我是否需要在我的等式组合中也关联该人的身份，或者我可以安全地假设完全相同位置的 2 部手机不会返回完全相同`GPS`（永远）。

有人想吗？

下面的示例（相隔 30 秒）

```
02-21 14:18:48.679: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:19:18.678: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:19:48.668: D/Taxeeta:RegularUpdates(5511): Is location changed 0.11805124
02-21 14:20:18.797: D/Taxeeta:RegularUpdates(5511): Is location changed 6.563945
02-21 14:20:48.676: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 14:21:18.725: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:21:48.685: D/Taxeeta:RegularUpdates(5511): Is location changed 2.6022007
02-21 14:22:18.704: D/Taxeeta:RegularUpdates(5511): Is location changed 6.5060697
02-21 14:22:48.703: D/Taxeeta:RegularUpdates(5511): Is location changed 6.572767
02-21 14:23:18.662: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:23:48.772: D/Taxeeta:RegularUpdates(5511): Is location changed 6.563945
02-21 14:24:18.681: D/Taxeeta:RegularUpdates(5511): Is location changed 0.1327054
02-21 14:24:48.720: D/Taxeeta:RegularUpdates(5511): Is location changed 7.176328
02-21 14:25:18.700: D/Taxeeta:RegularUpdates(5511): Is location changed 7.6471653
02-21 14:25:48.609: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:26:18.708: D/Taxeeta:RegularUpdates(5511): Is location changed 7.790146
02-21 14:26:48.717: D/Taxeeta:RegularUpdates(5511): Is location changed 14.501556
02-21 14:27:18.797: D/Taxeeta:RegularUpdates(5511): Is location changed 0.1327054
02-21 14:27:48.676: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:28:18.705: D/Taxeeta:RegularUpdates(5511): Is location changed 0.19548245
02-21 14:28:48.704: D/Taxeeta:RegularUpdates(5511): Is location changed 23.221346
02-21 14:29:18.684: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 14:29:48.723: D/Taxeeta:RegularUpdates(5511): Is location changed 7.176328
02-21 14:30:18.662: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:30:48.752: D/Taxeeta:RegularUpdates(5511): Is location changed 6.3350186
02-21 14:31:18.691: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 14:31:48.670: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 14:32:18.679: D/Taxeeta:RegularUpdates(5511): Is location changed 0.1327054
02-21 14:32:48.699: D/Taxeeta:RegularUpdates(5511): Is location changed 7.411349
02-21 14:33:18.708: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 14:33:48.697: D/Taxeeta:RegularUpdates(5511): Is location changed 22.613928
02-21 14:34:18.666: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:34:48.686: D/Taxeeta:RegularUpdates(5511): Is location changed 0.11805124
02-21 14:35:18.675: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 14:35:48.664: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:36:18.663: D/Taxeeta:RegularUpdates(5511): Is location changed 0.19548245
02-21 14:36:48.693: D/Taxeeta:RegularUpdates(5511): Is location changed 22.190514
02-21 14:37:18.782: D/Taxeeta:RegularUpdates(5511): Is location changed 7.2989116
02-21 14:37:48.701: D/Taxeeta:RegularUpdates(5511): Is location changed 20.302017
02-21 14:38:18.721: D/Taxeeta:RegularUpdates(5511): Is location changed 22.503975
02-21 14:38:48.670: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:39:18.699: D/Taxeeta:RegularUpdates(5511): Is location changed 0.11805124
02-21 14:39:48.648: D/Taxeeta:RegularUpdates(5511): Is location changed 0.0
02-21 14:40:18.668: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:40:48.787: D/Taxeeta:RegularUpdates(5511): Is location changed 0.1327054
02-21 14:41:18.876: D/Taxeeta:RegularUpdates(5511): Is location changed 0.11805124
02-21 14:41:48.705: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18583706
02-21 14:42:18.705: D/Taxeeta:RegularUpdates(5511): Is location changed 7.411349
02-21 14:42:48.664: D/Taxeeta:RegularUpdates(5511): Is location changed 0.0
02-21 14:43:18.703: D/Taxeeta:RegularUpdates(5511): Is location changed 0.11805124
02-21 14:43:48.692: D/Taxeeta:RegularUpdates(5511): Is location changed 15.474865
02-21 14:44:18.772: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 14:44:48.671: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:45:18.700: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:45:48.700: D/Taxeeta:RegularUpdates(5511): Is location changed 7.176328
02-21 14:46:18.699: D/Taxeeta:RegularUpdates(5511): Is location changed 22.503975
02-21 14:46:48.738: D/Taxeeta:RegularUpdates(5511): Is location changed 7.176328
02-21 14:47:18.677: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:47:48.677: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:48:18.676: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:48:48.885: D/Taxeeta:RegularUpdates(5511): Is location changed 0.19548245
02-21 14:49:18.674: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 14:49:48.694: D/Taxeeta:RegularUpdates(5511): Is location changed 6.524145
02-21 14:50:18.763: D/Taxeeta:RegularUpdates(5511): Is location changed 0.1327054
02-21 14:50:48.702: D/Taxeeta:RegularUpdates(5511): Is location changed 6.4802594
02-21 14:51:18.712: D/Taxeeta:RegularUpdates(5511): Is location changed 6.4802594
02-21 14:51:48.671: D/Taxeeta:RegularUpdates(5511): Is location changed 0.19548245
02-21 14:52:18.690: D/Taxeeta:RegularUpdates(5511): Is location changed 7.790146
02-21 14:52:48.689: D/Taxeeta:RegularUpdates(5511): Is location changed 4.656421
02-21 14:53:18.689: D/Taxeeta:RegularUpdates(5511): Is location changed 6.563945
02-21 14:53:48.768: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:54:18.667: D/Taxeeta:RegularUpdates(5511): Is location changed 0.11805124
02-21 14:54:48.726: D/Taxeeta:RegularUpdates(5511): Is location changed 6.524145
02-21 14:55:18.696: D/Taxeeta:RegularUpdates(5511): Is location changed 6.7189484
02-21 14:55:48.685: D/Taxeeta:RegularUpdates(5511): Is location changed 0.11805124
02-21 14:56:18.854: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 14:56:48.713: D/Taxeeta:RegularUpdates(5511): Is location changed 6.4802594
02-21 14:57:18.813: D/Taxeeta:RegularUpdates(5511): Is location changed 6.6248784
02-21 14:57:48.692: D/Taxeeta:RegularUpdates(5511): Is location changed 7.176328
02-21 14:58:18.731: D/Taxeeta:RegularUpdates(5511): Is location changed 6.524145
02-21 14:58:48.691: D/Taxeeta:RegularUpdates(5511): Is location changed 0.13724314
02-21 14:59:18.670: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 14:59:48.749: D/Taxeeta:RegularUpdates(5511): Is location changed 7.176328
02-21 15:00:18.688: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 15:00:48.748: D/Taxeeta:RegularUpdates(5511): Is location changed 0.22683989
02-21 15:01:18.797: D/Taxeeta:RegularUpdates(5511): Is location changed 0.22683989
02-21 15:01:48.716: D/Taxeeta:RegularUpdates(5511): Is location changed 21.353783
02-21 15:02:18.745: D/Taxeeta:RegularUpdates(5511): Is location changed 0.1327054
02-21 15:02:48.695: D/Taxeeta:RegularUpdates(5511): Is location changed 0.11805124
02-21 15:03:18.684: D/Taxeeta:RegularUpdates(5511): Is location changed 0.1327054
02-21 15:03:48.723: D/Taxeeta:RegularUpdates(5511): Is location changed 6.0702796
02-21 15:04:18.783: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 15:04:48.682: D/Taxeeta:RegularUpdates(5511): Is location changed 0.11805124
02-21 15:05:18.671: D/Taxeeta:RegularUpdates(5511): Is location changed 0.11805124
02-21 15:05:48.780: D/Taxeeta:RegularUpdates(5511): Is location changed 0.1327054
02-21 15:06:18.710: D/Taxeeta:RegularUpdates(5511): Is location changed 4.9840126
02-21 15:06:48.689: D/Taxeeta:RegularUpdates(5511): Is location changed 0.201804
02-21 15:07:18.728: D/Taxeeta:RegularUpdates(5511): Is location changed 0.18143341
02-21 15:07:48.687: D/Taxeeta:RegularUpdates(5511): Is location changed 0.11805124 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:57:03.537

GPS灵敏度和准确性是两个不同的东西。此处也应考虑的敏感性。使用硬件的 GPS 往往会出现故障（在长时间运行和变化的温度之后），并且精度可能会丢失高达 20 米（就像你说的那样）。一般来说，GPS 有自己的精度，最高可达 5 米（通常）。

我最近使用通过 GPS 跟踪用户的应用程序的经验让我决定：

**您肯定需要一个身份来分隔两个设备**

因为他们可以返回相同的坐标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T10:02:28.990

我相信通过配对一些独特的设备 id + 坐标，你几乎肯定会更好。因为您在手机中获得的坐标可以是基于 WLAN 和手机信号塔的计算，而不仅仅是 GPS 信号（例如当用户在室内时），因此您获得相同坐标的机会更大。还要考虑恶意用户可能会使用某些实用程序伪造他们的位置，这是否可以用来破坏您的用户帐户和/或特定用例？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T10:12:09.910

您混淆了准确性和精确度。

厘米级精度实际上仅在专业测量 GPS 单元中可用，并且通常是在对数据进行后处理之后。即使是半昂贵的商业模型，一般也只能在 10-20m 范围内精确，虽然它们可以精确到 1m，但这取决于很多外部因素，例如[GDOP](http://en.wikipedia.org/wiki/Dilution_of_precision_%28GPS%29)和您周围的障碍物。我没有做任何分析来验证，但手机 GPS 通常会在相同的准确度范围内。

该`onLocationChanged`方法可能有 7 个小数位的**精度**，但它不会更准确，它只是意味着他们为您提供了 7 个小数位。我上面提到的相同的半昂贵的商用手持 GPS 型号通常只有 5 个小数位的精度，但它不会改变结果的准确性。

话虽如此，在过去几年中，我花费了大量时间查看在实地调查中完成的 GPS 记录，我发现虽然同一个 GPS 不太可能多次返回完全相同的坐标短暂的连续，它确实发生了。同样，当您考虑处理多个设备和未知时间段时，您很可能会有多个设备返回相同的精确坐标。

您应始终包含标识以识别特定设备，而不是仅依靠 GPS 坐标来识别特定用户或设备。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T03:05:21.780

我在 GPS 应用程序开发方面拥有多年经验，我所看到的是两个不同的设备不太可能发送完全相同的 GPS 位置（与 7 位相关）。但它可能发生。我没有做这个具体的评估（只是一个类似的评估），但我的感觉是这种情况在大约一万例中发生不超过1次。
您可能可以忍受发生这种情况的最小机会。
许多人将不得不购买可能发生这种情况的应用程序。;-)
您还可以比较以下两个位置，而不是一个。（您可以将这两个组合成一个长值）
但是要考虑位置也可以由信号塔位置计算的论点。在我的应用程序中，我忽略了手机信号塔的位置，我只使用 GPS。

# java - 维生素服务

> ID：14998899
> 
> 赞同：0
> 
> 时间：2013-02-21T09:40:24.073
> 
> 标签：java, android, sdk, ffmpeg, vitamio

我知道如果没有以下条件，Vitamio 将无法工作：

```
 if (! io.vov.vitamio.LibsChecker.checkVitamioLibs (this))
    return; 
```

但它如何添加到`Service`. 我运行了演示，一切正常，但如何在 Servais 中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T03:14:25.003

1.  您必须将 InitActivity 添加到 AndroidManifest

2.  它会检查是否安装了 vitamio lib...如果没有，它将安装

# asp.net - 新版本的 System.Web.WebPages dll

> ID：14998907
> 
> 赞同：3
> 
> 时间：2013-02-21T09:40:43.580
> 
> 标签：asp.net, .net

最近我注意到安装 VS 2012 后，我有 2.0 版的“ASP.NET 网页”程序集，如 System.Web.WebPages.dll、System.Web.Razor.dll、System.Web.Helpers.dll 等。我记得有1.0版本。当我将 Web 应用程序部署到生产服务器时，这会导致很多问题，因为我只有 1.0 版本并且 csproj 文件包含对 . 所以在 Dev Visual Studio 中有一个指向 C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v2.0\Assemblies\System.Web.Helpers.dll 的引用，它在 PROD 中不存在。

问题：不过，我想知道“ASP.NET 网页”程序集升级的原因是什么？是因为 .NET 4.5 中的异步支持还是有其他原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:47:06.233

是的，并且包含许多 MVC 功能、新的辅助方法、更好的验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:40:26.163

MVC3 使用 Web Pages 1 作为 Razor 视图引擎。

同样，MVC4 将 Web Pages 2 用于更新的 Razor 视图引擎，其中包括一些新的语法功能，例如自动 URL 解析和可选的 HTML 属性。

在所有新的 MVC 项目中，引用应指向在创建项目时创建的 NuGet 包依赖项。这会导致所有引用的 DLL 都包含在应用程序的“bin”目录中。然后，当您部署应用程序时，所有引用都是自包含的，并且不应包含额外的程序集。

# excel - 删除 Excel 文档中的空格和“pt”

> ID：14998909
> 
> 赞同：0
> 
> 时间：2013-02-21T09:40:48.223
> 
> 标签：excel, excel-2010

我的excel表目前是这样的：

```
Start        End           Speed
-------------------------------------
504 pt       1263,357  pt  21,03  pt 
538,391  pt  1223,015  pt  1,987 pt
579,486 pt   619,829  pt   235,003 pt 
```

我希望将格式更改为：

```
Start    End        Speed
-------------------------------------
504      1263,357   21,03  pt 
538,391  1223,015   1,987 pt
579,486  619,829    235,003 pt 
```

如何删除每个单元格中包含 1 个空格的“pt”？

我正在使用 Excel 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:18:42.233

使用这个（如果您不介意公式解决方案）：`=TRIM(SUBSTITUTE(C1,"pt",""))`- 这将处理任意数量的空格（您的输入在某些情况下有 2 个空格）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:47:47.687

请使用以下步骤：

1.  如果按此键`<ctrl> + F`，将打开查找窗口。
2.  然后在查找中输入“pt”并将替换留空。
3.  然后按全部替换。

**笔记：**

如果您想在选定区域执行此操作，只需先选择这些并重复。

# java - newCachedThreadPool() 中的线程始终处于等待状态，并且线程数始终在增加

> ID：14998910
> 
> 赞同：1
> 
> 时间：2013-02-21T09:40:55.353
> 
> 标签：java, threadpool, nio, out-of-memory

我遇到了tomcat抛出的问题`OutOfMemoryError`：

```
SEVERE: Servlet.service() for servlet DataPortServlet threw exception
java.lang.OutOfMemoryError: unable to create new native thread
    at java.lang.Thread.start0(Native Method)
    at java.lang.Thread.start(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.addIfUnderMaximumPoolSize(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.execute(Unknown Source)
    at java.util.concurrent.AbstractExecutorService.submit(Unknown Source)
    ... 
```

我要做的是：当在servlet中接收到数据时，将接收到的数据通过`HttpClient`相关代码发送到另一台服务器：

小服务程序：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException {
    ...
    byte[] data = getDataFromRequest(request); // pseudo code, get data
    CallableLogSender sender = new CallableLogSender(data);
    pool.submit(sender); // here the pool is the one instantiated at the start of application, singleton
    ...
} 
```

类实现`Callable`接口：

```
public class CallableLogSender implements Callable<Integer> {
    private byte[] content;

    public CallableLogSender(byte[] content) {
        this.content = content;
    }

    @Override
    public Integer call() {
        try {
            String uri = getRemoteServerUri(); // pseudo code, get uri here
            HttpPost request = new HttpPost(uri);
            request.setHeader("Content-Type", "application/x-www-form-urlencoded");
            request.setEntity(new ByteArrayEntity(content));

            HttpClient httpClient = getHttpClient(); // pseudo code, get cached http client, it is a singleton instance
            HttpResponse response = httpClient.execute(request);
            statusCode = response.getStatusLine().getStatusCode();
            EntityUtils.consume(response.getEntity());
        } catch(Exception e) {
            // log error here...
        } finally {
            request.releaseConnection();
        }
        return statusCode;
    }
} 
```

如代码所示，`submit`每次有客户端连接时，我对线程池进行了一个任务，然后我使用jProfiler监控tomcat，它显示池中的线程数一直在增加！并且所有线程都处于`waiting`状态，所以当线程数超过阈值时，`OutOfMemoryError`就会发生。

在我看来，线程应该重用，线程数应该稳定，至少不会一直增加，不知道是不是因为`waiting`状态让池认为线程都“忙”了，所以new thread需要创建。

那么关于如何使池重用线程而不总是创建新线程的任何建议？

提前致谢， 开尔文

* * *

编辑：最后我找到根本原因是因为http请求响应时间太长，所以如果任务是突发提交的，线程数会一直在增加，因为一个任务完成时间太长。

# erlang - 在erlang中按id排序表的记录

> ID：14998911
> 
> 赞同：0
> 
> 时间：2013-02-21T09:40:57.007
> 
> 标签：erlang

我有这个餐桌人

```
-record(person, {id, firstname, lastname, phone}). 
```

它包含以下值：

```
12  alen     dumas        97888888
15  franco   mocci      55522225
13  ali      othmani    44444449 
```

**我想按 id 订购这张桌子** ，它应该变成这样：

```
 12  alen     dumas        97888888
  13  ali      othmani    44444449
  15  franco   mocci      55522225 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:18:13.050

要订购存储在其中的元组，`mnesia`您需要：

*   创建一个具有类型的表`ordered_set`（参见mnesia `type`: [create_table](http://www.erlang.org/doc/man/mnesia.html#create_table-2)中的选项），然后使用[mnesia:last](http://www.erlang.org/doc/man/mnesia.html#last-1)或[mnesia:dirty_last](http://www.erlang.org/doc/man/mnesia.html#dirty_last-1)

或者

*   读取所有记录并将它们排序在`mnesia`,

例如：

```
Select = [{#person{_ = '_'}, [], ['$_']}],
Sorted = lists:sort(mnesia:dirty_select(person, Select)),
erlang:hd(lists:reverse(Sorted)). 
```

这将获取所有记录，将它们排序为元组（考虑到记录中的第一个元素应该足够了`id`，如果不使用[lists:sort/2](http://www.erlang.org/doc/man/lists.html#sort-2)并指定排序函数），然后反转列表并返回第一个元素（在 Erlang 中，反转并获取第一个元素比返回列表的最后一个元素更快）。

# jquery - 将 1 个 div 拆分为 2 个单独的 div？

> ID：14998915
> 
> 赞同：1
> 
> 时间：2013-02-21T09:41:13.487
> 
> 标签：jquery

jQuery 是否可以在标有标签的指定点将 1 个 Div 拆分为 2 个 Div

在这个代码示例中，我在想是否可以在“em 标签”处拆分 div 以制作 2 个 div

```
<div>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,</p>
    <em></em>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,</p>
</div> 
```

至

```
<div>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,</p>
</div>
<div>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,</p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:07:21.667

您可以使用以下代码来解决您的问题。为此，为父 div 分配一个 id，并在保留其内部 html 后删除其 html。我们可以在将其 html 存储在变量中后删除父 div，但我不这样做，因为我们必须将修改后的 html 放在同一个地方。

```
var divhtml = $("#divId").html();
var myps = divhtml.split("<em></em>");
var myhtml = "<div>"+myps[0]+"</div><div>"+myps[1]+"</div>";
$("#divId").html(myhtml); 
```

如果您必须删除父标签，您可以获取最后一个元素 id，在将其 html 存储在变量中后删除主 div，并将修改后的 html 放在最后一个元素之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:07:00.593

不是很漂亮，但会起作用：

```
$('div').after(function() {
    return $('<div>').append($(this).find('.break').nextAll());
}).find('.break').remove(); 
```

前提是您的制动元件具有`.break`( `<em class="break"></em>`) 类。

[http://jsfiddle.net/U3p3e/](http://jsfiddle.net/U3p3e/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:48:56.457

您可以创建一个主 div 并使用 append() 函数将任何 HTML 附加到其中。例如：

```
 <div id='main'>

  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,  </p>

  <em></em>

  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,  </p>

</div> 
```

在 JQuery 中：

```
varHtml = $('#main').html();

// You can use JS function to split

$('#main').html("");

$('#main').append('<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,</p><em></em>');

$('#main').append('<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,  </p>'); 
```

# php - 如果我在 CodeIgniter 中打开 Colorbox，它会在单击搜索按钮后多次显示

> ID：14998916
> 
> 赞同：1
> 
> 时间：2013-02-21T09:41:13.077
> 
> 标签：php, javascript, jquery

**索引.php**

我在这里打电话`div`：

```
<div id="dd">
 <?php
   $this->load->view('indexresult');
  ?>
</div> 
```

**索引结果.php**

在这里我得到了`id`从`click`。`href`在它之后我有`post`和`put`。`session`回来后我有负载`div`

```
$('#category li a').click(function() 
{
  var SearchId = $(this).attr('id');
  $('#loading-image').show();
  $.post("<?php echo site_url('AllResult');?>",{SearchId:SearchId},function(data)
  {
    $("#dd").load('home/indexresult');       
  });   
});

$(document).ready(function(){
  $(".ajax").colorbox();
  $(".Login").colorbox({innerWidth: "500px",innerHeight: 320px",initialWidth:              false,initialHeight: false});
  $(".mapajax").colorbox({});
  $(".register").colorbox({initialWidth: false,initialHeight: false});
}); 
```

使用 class="Login"，它打开登录颜色框。

```
<a href = "<?php echo site_url('home/loginpopup')?>" class="Login">Login</a> 
```

第一次打开 Colorbox 可以正常工作，但`click`在搜索后打开多个 Colorbox Instace。

# javascript - 如何以最佳方式解析字符串并获得必要的参数

> ID：14998917
> 
> 赞同：0
> 
> 时间：2013-02-21T09:41:13.850
> 
> 标签：javascript, regex, string-parsing

我正在编写一个 Web 应用程序。我正在使用服务器 API 在 UI 级别以字符串形式获取信息。来自服务器端的此类响应是单个字符串。这些字符串的结构如下：

> 响应（**{numberParam}**点）

它总是不变的。获取字符串的示例：

`Response (76 points)`

`Response (5193 points)`

`Response (4 points)`

`Response (21 points)`

**我只需要从获取字符串中检索此数字参数的值**。

我不应该使用任何外部库和框架。只有原生 JavaScript。

我将不胜感激任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:44:04.130

如果你的字符串总是这样，那么你可以简单地做

```
var num = parseInt(str.match(/\d+/)[0], 10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T09:43:50.590

我会使用正则表达式，它非常适合匹配这样的模式。这是一个正则表达式，用于将输入字符串拆分为由一个或多个非数字字符 ( `\D+`) 拆分的部分，以便生成的数组看起来像`['','76','']`，您可以`[1]`从该数组中选择位置 1 ( )。

```
var str = "Response (76 points)"

var num = str.split(/\D+/)[1]
console.log(num) 
```

或者，您可以用任何内容替换所有非数字字符...

```
var num = str.replace(/\D/g,'')
console.log(num) 
```

或者匹配第一个数字字符链......

```
var num = str.match(/\d+/)[0]
console.log(num) 
```

或者可能是最有用的，是用一个或多个非单词字符 ( `\W+`) 分割，它给出了一个单词数组，然后选择你想要的部分。我喜欢这个，因为它能够从错误消息中检索其他有意义的信息，并且可以应用于许多不同的错误消息和情况......

```
var parts = str.split(/\W+/)
// parts is: [ 'Response', '76', 'points', '' ]
var num = parts[1]
console.log(num) 
```

# git - 如何将分支的内容复制到新的本地分支？

> ID：14998923
> 
> 赞同：363
> 
> 时间：2013-02-21T09:41:39.470
> 
> 标签：git, branch

我曾在本地分支上工作，并将更改推送到远程。

我想恢复该分支上的更改并对其执行其他操作，但我不想完全失去工作。我正在考虑在本地创建一个新分支并将旧分支复制到那里，然后我可以还原更改并继续在旧分支上工作。

还有比这更好的方法吗？

* * *

## 回答 #1

> 赞同：575
> 
> 时间：2013-02-21T09:44:37.093

```
git checkout old_branch
git branch new_branch 
```

这将为您提供一个与“old_branch”状态相同的新分支“new_branch”。

该命令可以与以下命令组合：

```
git checkout -b new_branch old_branch 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2017-10-14T23:12:42.117

请参阅第二部分（自 Git 2.23，2019 年第三季度以来）：`git switch -c newBranch oldBranch`

* * *

在 Git 2.15（2017 年第四季度）中，“ `git branch`”学会了“ `-c/-C`”通过复制现有分支来创建新分支。

请参阅[Ævar Arnfjörð Bjarmason ( ) 的](https://github.com/avar)[提交 c8b2cec](https://github.com/git/git/commit/c8b2cec09e548df7c948e5f4453381f0a3b0f6a9)（2017 年 6 月 18 日[）](https://github.com/avar)。 请参阅[Sahil Dua (](https://github.com/sahildua2305) [)的](https://github.com/sahildua2305)[提交 52d59cc](https://github.com/git/git/commit/52d59cc6452ed1aeec91f4c168a853ea8d9d5496)和[提交 5463caa](https://github.com/git/git/commit/5463caab15fb795da2aab01827419b094146d1c4)（2017 年 6 月 18 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 3b48045](https://github.com/git/git/commit/3b48045c6c73a51834a2f83440a30225485ee431))^(中，2017 年 10 月 3 日）)[`avar`](https://github.com/avar)
[`sahildua2305`](https://github.com/sahildua2305)
^([`gitster`](https://github.com/gitster))

> ## `branch`: 添加一个`--copy`( `-c`) 选项来搭配`--move`( `-m`)
> 
> 将功能添加到`--copy`分支及其 reflog 和配置，这使用与`--move`( `-m`) 选项相同的底层机制，除了 reflog 和配置被复制而不是被移动。
> 
> 这对于例如将主题分支复制到新版本很有用，例如在将主题提交到列表之后`work`，同时保留所有跟踪信息和与分支一起使用的其他配置，而不像保留其他已经提交的分支参考。`work-2``work``--move`

注意：复制分支时，您将保留在当前分支上。
正如[Junio C Hamano 解释](https://public-inbox.org/git/874lrpw34z.fsf@evledraar.booking.com/)的那样，这个新功能的初始实现是修改 HEAD，这并不好：

> `B`通过复制`A`恰好是当前分支的分支来创建新分支时，它也会更新`HEAD`以指向新分支。
> 它可能是这样制作的，因为“ `git branch -c A B`”在“”上搭载了它的实现`git branch -m A B`，
> 
> 这与通常的预期不符。
> 如果我坐在蓝色椅子上，有人过来把它重新涂成红色，我会接受最终坐在现在是红色的椅子上（我也可以站着，因为不再有我最喜欢的蓝色椅子）。
> 
> 但是如果有人创造了一把新的红色椅子，模仿我坐的蓝色椅子，我不希望被从蓝色椅子上踢下来，最终坐在新的红色椅子上。

* * *

第二部分：使用 git 2.23（2019 年第三季度），无需使用 git branch 或[旧的令人困惑`git checkout`](https://stackoverflow.com/a/57066202/6309)的：你有[`git switch`](https://git-scm.com/docs/git-switch).

```
git switch -c newBranch oldBranch 
```

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2014-09-27T13:47:42.737

```
git branch copyOfMyBranch MyBranch 
```

这避免了签出分支的潜在耗时和不必要的行为。回想一下，结帐会修改“工作树”，如果它很大或包含大文件（例如图像或视频），这可能需要很长时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-16T11:36:06.187

鉴于您要求更好的方式选择：

复制分支的一个潜在缺陷是，如果您想合并到同一个父级，或者将更改从副本重新引入原始分支，您必须注意 git 的快进行为。

例如，如果您在“原始”分支中恢复了一些提交，但现在您想重新引入您恢复到原始分支的更改，您不能简单地将复制的分支合并到父分支，因为 git 看到这些提交已经存在（甚至认为它们稍后会被还原）。

也许`cherry-pick [commit-range]`会在这种情况下工作并且不关心现有的哈希*耸耸肩*

在我看来，尽管这样做会更好。

1.  从当前分支 HEAD 创建一个新分支`git branch [archive-branch-name]`
2.  找到要回滚的提交`git log`
3.  跑`git reset --head [commit-hash-from-#2]`
4.  `git push -f origin`

请注意，您从“原始”分支开始，并且在这些步骤中不要更改分支。

**或者**更简单地说，您可以完全取消分支，只需还原您想要还原的提交，如果需要，[稍后再还原还原](https://stackoverflow.com/questions/8728093/how-do-i-un-revert-a-reverted-git-commit)

# ios - 如果我有 iPad 的设备 ID，我可以构建并发送此应用程序以供他人远程安装吗？

> ID：14998926
> 
> 赞同：0
> 
> 时间：2013-02-21T09:41:44.677
> 
> 标签：ios, objective-c, distribution, provisioning-profile, ios-provisioning

收到设备 ID 后，我需要执行哪些步骤以确保可以将应用程序发送给我的客户，该客户的 ios 设备具有前面提到的设备 ID。那么客户端是否能够在 Windows PC 上的 iTunes 中安装该应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:45:34.150

您需要使用包含客户端设备 ID 的临时分发证书创建临时构建。然后在 Xcode 中归档构建并在 Organizer 窗口中选择 Distribute 按钮。然后，该向导允许您保存一个独立的包，该包可以邮寄到您的客户端并安装在那里。有关使这更容易的服务，请参阅[试飞](https://testflightapp.com)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:47:25.270

1）登录会员中心（[http://developer.apple.com/membercenter/](http://developer.apple.com/membercenter/)）并添加新设备。

2) 更新您的配置文件，将该设备添加到列表中。

3) 存档您的应用程序以进行 Ad-Hoc 分发并生成 IPA 文件。

正如我在这里指出的（[如何彻底测试发布版本？](https://stackoverflow.com/questions/14976600/how-to-thoroughly-test-a-release-build/14976788#14976788)），我建议您使用 TestFlight，会更容易...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:48:25.327

您必须创建 ipa 文件并上传到[http://www.diawi.com/](http://www.diawi.com/)
以远程安装应用程序。

# php - 它是一个简单的循环，但我不知道该怎么做

> ID：14998932
> 
> 赞同：2
> 
> 时间：2013-02-21T09:41:57.183
> 
> 标签：php, xml-parsing

我需要解析以下 xml，但是当我使用我的代码时，它只读取第一个 p 标签，我知道它是一个简单的循环，但我很困惑。

```
 <s>
 <j u="here1"/>
   <p v="here1_1"/>
   <p v="here1_2"/>
   <p v="here1_3"/>
   <p v="here1_4"/>
   <p v="here1_5"/>
   <p v="here1_6"/>
</s>
<s>
 <j u="here2" />
   <p v="here2_1"/>
   <p v="here2_2"/>
   <p v="here2_3"/>
   <p v="here2_4"/>
   <p v="here2_5"/>
   <p v="here2_6"/>
</s> 
```

我的代码

```
$xml = simplexml_load_string($myXml);
foreach ($xml->s as $tags) {
        echo $tags->j->attributes()->u . " ";
        echo $tags->p->attributes()->v . " ";
    } 
```

结果是 >>> here1 here1_1 here2 here2_1

但结果应该是 here1 here1_1 ..... here1_6 here2 here2_1 ..... here2_6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:50:23.683

也许是这样的？

```
$xml = simplexml_load_string($myXml);
foreach ($xml->s as $tags) foreach ($tags as $tag) {
    echo $tag->attributes()->u . " "; // $tag['u'] you can access attributes like this too
    echo $tag->attributes()->v . " "; // $tag['v']
} 
```

这应该给你

```
here1
here1_1 
here1_2 
here1_3 
here1_4 
here1_5 
here1_6 
here2 
here2_1 
here2_2 
here2_3 
here2_4 
here2_5 
here2_6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:54:11.277

因为有多个 p 标签，您需要遍历 p 标签

```
$xml = simplexml_load_string($myXml);
foreach ($xml->s as $tags) {
        echo $tags->j->attributes()->u . " ";
        foreach($tags->p as $ptags){
            echo $ptags->attributes()->v . " ";
        }
    } 
```

# asp.net - 无法调用函数

> ID：14998934
> 
> 赞同：0
> 
> 时间：2013-02-21T09:42:09.033
> 
> 标签：asp.net, jscript, client-side-scripting

使用下面的代码时，我需要调用 Transmit_SOAP() 函数。但它无法调用。有什么问题吗？

```
function sample()
{
 var xmlSoapTemplate;
 xmlSoapTemplate  = new XMLHttpRequest();
 xmlSoapTemplate.onreadystatechange = function () {
 if (xmlSoapTemplate.readyState == 4) Transmit_SOAP()
 };
}

function Transmit_SOAP()
{
alert("Function calls");      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:51:49.840

你错过了对`open()`and的调用`send()`，你没有告诉它使用什么 URL 等等。

这是一个粗略的例子：

```
request = new XMLHttpRequest();

request.open('GET','http://www.example.com/', true);
request.onreadystatechange = function() {
    if (request.readyState == 4) {
        ...
    }
}
request.send(); 
```

# ios - UIScrollView 不显示所有内容

> ID：14998936
> 
> 赞同：2
> 
> 时间：2013-02-21T09:42:18.857
> 
> 标签：ios, objective-c, cocoa-touch

UIScrollView 不显示所有内容（尤其是底部），如下所示。![UIScrollbar 不工作](../Images/3216d12837d2b30828aa13d44b385c82.png)

我这样设置 UIScrollbar 的 contentSize

```
- (void)readingRoomView:(HJHReadingRoomView *)view preferredSize:(CGSize)size
{
    self.scrollView.contentSize = size;
    view.frame = CGRectMake(0, 0, size.width, size.height);
} 
```

为什么它不起作用:'(？

# android - 通知栏的点击事件

> ID：14998942
> 
> 赞同：0
> 
> 时间：2013-02-21T09:42:34.800
> 
> 标签：android, notifications

当我点击通知栏时，它会跳过`MainActivity.class`界面：

```
Intent notificationIntent = new Intent(context,MainActivity.class); //After click the notification, it will skip to the activity 
PendingIntent contentIntent = PendingIntent.getActivity(context,0,notificationIntent,0);
notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent); 
```

如果`MainActivity.class`本身已经打开，我再次点击通知栏，它显示两个界面。谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:11:50.213

更改您的线路：

```
Intent notificationIntent = new Intent(context,MainActivity.class); 
```

至：

```
Intent notificationIntent = 
    new Intent(context,MainActivity.class).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

正如Android文档中所说：

> **[FLAG_ACTIVITY_SINGLE_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_SINGLE_TOP)**
> 如果设置，如果 Activity 已经在历史堆栈的顶部运行，则不会启动它。

或者，如果这不是预期的行为，请检查此标志：

> **[FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)**
> 如果设置，并且正在启动的 Activity 已经在当前任务中运行，那么不会启动该 Activity 的新实例，而是关闭它上面的所有其他 Activity，并且此 Intent 将被传递到（现在在顶部）旧活动作为新意图。

在尝试了解这些标志将导致什么时，您可能会感兴趣以下文档：

*   [Android 开发者：Tasks 和 Back Stack](http://developer.android.com/guide/components/tasks-and-back-stack.html)（尤其是[本](http://developer.android.com/guide/components/tasks-and-back-stack.html#IntentFlagsForTasks)节）

# macos - 连接到 EAP-TLS wifi 网络 os x 终端

> ID：14998944
> 
> 赞同：5
> 
> 时间：2013-02-21T09:42:36.703
> 
> 标签：macos, bash, terminal, wifi

我目前是一名学校技术人员，我正在编写一个 shell 脚本，它将自动将学校无线配置到 Mac 上，以便为我将要配置的多个 BYOD 和员工 Mac 自动执行此过程。这涉及

1.  将安全证书导入钥匙串

2.  在此处将以下设置插入此对话框以连接到网络

3.  创建一个名为“学校”的新网络位置

4.  通过“自动代理配置”下的 wpad 文件配置代理

5.  如果是老师的笔记本电脑并且他们要求使用，请创建一个名为“YouTube”的新位置，并在“Web Proxy”下设置允许 YouTube 访问的代理设置

我采用的第一种方法是通过 security 命令导入安全证书（根证书颁发机构和中间证书颁发机构）。但是，我意识到在第一次连接到它时，没有办法配置弹出框来配置 WiFi 设置（选择 EAP-TLS 作为连接模式、证书和插入用户名） . 并使用

```
networksetup -setairportnetwork en1 eduSTAR 
```

试图让对话框出现是行不通的。我很清楚隐藏的

```
airport 
```

命令，但没有明显的方法可以通过此命令连接到 wifi 网络。我能想到的唯一另一种方法是通过 AppleScript 使用 GUI 脚本，我试图避免这种方法，因为操作系统版本之间的 UI 更改会导致脚本无法使用。

今天，我发现我可以通过网络设置的 GUI 将 .mobileconfig 文件导入到网络设置中，这样就可以处理所有事情（包括 wdap 代理配置），而且我还发现在此之前，networksetup 命令可以选择导入 802.1x 配置文件。

```
networksetup -import8021xProfiles [service path] 
```

网络设置中的导入选项不允许我直接导入 .mobileconfig 文件，但我可以通过双击文件本身来导入设置。结果实际文件是一个 .networkconnect 文件，但这一点没有实际意义，因为显然，从 10.7 开始，不再支持该命令

```
Use a configuration profile to install 802.1X profiles on the system.
** Error: This command is no longer supported. 
```

所以现在，我的问题如下：

1.  如何在不使用 GUI 脚本的情况下通过 10.7 及更高版本的 OS X 终端将 .networkconnect / .mobileconfig 文件导入网络设置？

2.  通过终端导入后如何连接网络？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:16:31.707

要导入 .mobileconfig 命令，请使用 /usr/bin/profiles 命令。networksetup 仅用于导入 10.6 及更早版本的系统配置文件。

配置文件 -I -F 文件名.mobileconfig

导入 mobileconfig 后，它将自动尝试连接，但配置文件（与 networksetup 不同）AFAIK 无法更改 SSID 的优先级顺序。

这不是您想要的，但如果您的 Mac 是您的 AD 域的成员并且具有 AD 集成 CA，您可以使用 mactls shell 脚本自动颁发证书以及连接配置文件。它也可能是一个有用的比较系统配置文件方法在 10.6 和 10.7 之间的差异。

[http://sourceforge.net/p/mactls/](http://sourceforge.net/p/mactls/)

# frama-c - 一个可能无限的 C 函数的 ACSL 规范

> ID：14998947
> 
> 赞同：3
> 
> 时间：2013-02-21T09:42:53.317
> 
> 标签：frama-c, language-specifications, acsl

我试图指定外部函数的行为，更准确地说，它们的终止。ACSL 文档说该`\terminates p;`属性指定如果谓词`p`成立，则保证函数终止，但在`p`不成立时不指定任何内容。它还解释了一个永远不会返回的函数可以通过以下方式指定：

```
//@ ensures \false ; terminates \false ; 
```

此外，ACSL 提供了一个属性`\exits p;`来指定在突然终止的情况下的后置条件。所以我想知道是否：

```
//@ ensures \false ; exits \false; terminates \false ; 
```

会指定函数总是永远循环吗？

此外，规范是什么：

```
//@ ensures p ; exits q; terminates \false ; 
```

意味着关于可能的无限循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T14:36:48.560

您的规范是最接近可以说函数永远循环的规范，但我仍然看到两个极端情况：

1.  *运行时错误*：您总是可以说它们在其他地方得到处理（`WP`+`genassigns`或`Value`）
2.  *longjmp*：恐怕目前 ACSL 中没有任何内容可以指定类似的内容。

# android - 如何发布和订阅多个移动平台的通知：Android、Iphone 无需轮询

> ID：14998952
> 
> 赞同：2
> 
> 时间：2013-02-21T09:43:10.277
> 
> 标签：android, iphone, cordova, messaging, polling

我正在寻找在一个场景中开发移动应用程序的最佳方法，基本上用户可以订阅任何主题，当有人使用网络应用程序发布该主题的任何消息时，移动用户将收到通知，而不是轮询服务器。

客户端应用程序需要在多个平台上运行：iPhone、Android、..
服务器应用程序可能会使用 PHP (Symfony2) 开发。

我读过选项是：

*   **(GCM)** Google Cloud Message -**限制**：仅适用于 Android 设备
*   **(APN)** Apple Publish Notification Services -**限制**：只有**IOS**使用**XMPP**协议来实现服务器/客户端之间的通信

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:42:11.453

可能是PHP？[您可以使用PushSharp](https://github.com/Redth/PushSharp)库和所有通道/端点 ID 的数据库创建一个 ASP.NET 项目。关于它的功能有一个[很好的图表。](https://github.com/Redth/PushSharp/raw/master/Resources/PushSharp-Diagram.png)

> PushSharp：用于向 iOS（iPhone/iPad APNS）、Android（C2DM 和 GCM - Google Cloud Message）、Windows Phone、Windows 8 和 Blackberry 设备发送推送通知的服务器端库！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:48:56.467

你已经有了正确的学习，基本上推送通知服务是基于平台的，所以你必须在**IOS上使用****GCM**和**APN**。

 **这将使您对具有特定平台的设备进行更强大的控制。

> 如果您不想使用**这两个通知，**那么您将继续**从服务器轮询**，这将消耗电池和网络带宽。**

# android - android屏幕调整在横向模式下不起作用

> ID：14998954
> 
> 赞同：0
> 
> 时间：2013-02-21T09:43:25.810
> 
> 标签：android, listview, resize, android-edittext, screen-orientation

我在横向模式下发现了一个问题。为什么屏幕调整在横向模式下不起作用？软键盘将覆盖 EditText 输入。

它也把这条线表现出来了。

> android:windowSoftInputMode="adjustResize"

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="200dip"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/android:list"
        android:layout_width="match_parent"
        android:layout_height="10dip"
        android:layout_weight="1" >
    </ListView>
</LinearLayout>

<TextView
    android:id="@+id/android:empty"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="1"
    android:text="Empty"
    android:textColor="#FFFFFF"
    android:textSize="16dp" />

<LinearLayout
    android:id="@+id/linearLayout2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:hint="please input"
        android:imeOptions="flagNoExtractUi"
        android:singleLine="true" >

        <requestFocus />
    </EditText>

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="50dp"
        android:layout_height="wrap_content"
        android:src="@android:drawable/ic_menu_search" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:02:57.790

尝试使用`RelativeLayout`它更好，更可调！

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/android:empty"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/android:list"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1" >
        </ListView>
    </LinearLayout>

    <TextView
        android:id="@+id/android:empty"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/linearLayout2"
        android:textColor="#FFFFFF"
        android:textSize="16dp" />

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_weight="1" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:hint="please input"
            android:imeOptions="flagNoExtractUi"
            android:singleLine="true" >

            <requestFocus />
        </EditText>
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:50:10.933

尝试将`LinearLayout`其`listView`放在`ScrollView`. 这将解决您的问题。

# android - AndEngine 使用 Timer 时出错

> ID：14998956
> 
> 赞同：1
> 
> 时间：2013-02-21T09:43:30.797
> 
> 标签：android, andengine

我在 AndEngine 中使用了一个计时器，但它向我抛出了这个错误。

这是引发错误的方法：

```
public void onPopulateScene(Scene pScene,
        OnPopulateSceneCallback pOnPopulateSceneCallback) throws Exception {
    mEngine.registerUpdateHandler(new TimerHandler(3f,
            new ITimerCallback() {
                @Override
                public void onTimePassed(final TimerHandler pTimerHandler) {
                    SceneManager.getInstance().createMenuScene();
                    mEngine.unregisterUpdateHandler(pTimerHandler);
                }
            }));
    pOnPopulateSceneCallback.onPopulateSceneFinished();
} 
```

我在 Engine 类中将它跟踪到这一行：

```
 } finally {
            this.mEngineLock.unlock();
        } 
```

任何人都可以帮忙吗？

```
02-21 03:39:55.056: E/AndroidRuntime(27796): FATAL EXCEPTION: UpdateThread
02-21 03:39:55.056: E/AndroidRuntime(27796): java.lang.NullPointerException
02-21 03:39:55.056: E/AndroidRuntime(27796):    at edu.ian.andenginetest.SceneManager.disposeSplashScene(SceneManager.java:50)
02-21 03:39:55.056: E/AndroidRuntime(27796):    at edu.ian.andenginetest.SceneManager.createMenuScene(SceneManager.java:57)
02-21 03:39:55.056: E/AndroidRuntime(27796):    at edu.ian.andenginetest.MainActivity$1.onTimePassed(MainActivity.java:73)
02-21 03:39:55.056: E/AndroidRuntime(27796):    at org.andengine.engine.handler.timer.TimerHandler.onUpdate(TimerHandler.java:98)
02-21 03:39:55.056: E/AndroidRuntime(27796):    at org.andengine.engine.handler.UpdateHandlerList.onUpdate(UpdateHandlerList.java:47)
02-21 03:39:55.056: E/AndroidRuntime(27796):    at org.andengine.engine.Engine.onUpdateUpdateHandlers(Engine.java:597)
02-21 03:39:55.056: E/AndroidRuntime(27796):    at org.andengine.engine.Engine.onUpdate(Engine.java:585)
02-21 03:39:55.056: E/AndroidRuntime(27796):    at org.andengine.engine.LimitedFPSEngine.onUpdate(LimitedFPSEngine.java:56)
02-21 03:39:55.056: E/AndroidRuntime(27796):    at org.andengine.engine.Engine.onTickUpdate(Engine.java:548)
02-21 03:39:55.056: E/AndroidRuntime(27796):    at org.andengine.engine.Engine$UpdateThread.run(Engine.java:820) 
```

这是我的代码到 github 提交的链接：[https ://github.com/mkaziz/EECS-499---Android-Shooter/commit/63dab77fe43f70543b06ea6436249c8401b339bc](https://github.com/mkaziz/EECS-499---Android-Shooter/commit/63dab77fe43f70543b06ea6436249c8401b339bc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:40:11.483

好的，我放弃了我原来的大部分答案。我仍然认为正在发生的事情是在它自己的回调中取消注册 TimerHandler 导致空指针通过在它（在某种意义上）“完成”之前取消它对引擎的引用。换句话说，TimerHandler 似乎在调用 onTimePassed()*后在引擎上进行了解锁。*

其他需要考虑/尝试的事情：这是否发生在您的主更新线程中？如果没有，请考虑将其移至主线程。例如，

```
runOnUpdateThread(new Runnable() {

    @Override
    public void run() {
          // put it here.

}}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:21:35.547

根据您[在 github 上的代码](https://github.com/mkaziz/EECS-499---Android-Shooter)（您离开[AndEngine 论坛](http://www.andengine.org/forums/gles2/thread-locking-error-of-some-variety-in-engine-class-t11063.html)，但不在此处）：
在您的`MainActivity`类`onCreateScene()`函数中，
您调用`SceneManager`'s`createSplashScene()`执行`onCreateSceneFinished()`一次 AndEngine 回调。
并且，在返回`OnCreateScene()`in之后`MainActivity`，您再次执行相同的回调。
如果你跟踪到 AndEngine 代码，你会知道这也会导致`onPopulateScene()`in`MainActivity`执行两次。因此，您将创建两个计时器实例，并在第二个计时器处理启动画面时获得 NPE。

# jquery - 在多个实例中应用 Jquery

> ID：14998959
> 
> 赞同：0
> 
> 时间：2013-02-21T09:43:37.650
> 
> 标签：jquery, css, hover

我有一个悬停功能（见下面的代码），它在我应用的类上提供了一个下拉文本段落。这在指定的类上运行良好。

```
$('.job_container').hover(function(){
   $(".job_subheading").animate({top: "30px }, 200);},
      function(){
            $(".job_subheading").animate({
        top: "0px" }, 200);
      }); 
```

但是，我想用不同的下拉段落添加更多这些类的实例。当我这样做然后将鼠标悬停在一个上时，下拉菜单将应用于所有人，因为它们具有相同的类。

我应该将类更改为 id 并为我希望使用的每个实例重新编写代码吗？在多个实例中应用代码的最简洁方法是什么？

谢谢你的帮助，加文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:47:31.283

您应该使用子选择器：

```
$('.job_container').hover(function(){
$(this).children(".job_subheading").animate({
top: "30px }, 200);},
                      function(){
$(this).children(".job_subheading").animate({
top: "0px" }, 200); 
```

所以，你的 html 必须是这样的：

```
<div class="job_container"><div class="job_subheading"></div>something else</div>
<div class="job_container"><div class="job_subheading"></div>something else</div>
<div class="job_container"><div class="job_subheading"></div>something else</div> 
```

# java - 如何在wave文件编辑器中面对java heap outofmemory错误

> ID：14998960
> 
> 赞同：3
> 
> 时间：2013-02-21T09:43:42.877
> 
> 标签：java, out-of-memory

我正在使用 java 制作一个波形文件编辑器，我们可以在其中使用波形频谱剪切复制粘贴波形文件。为此，我以字节为单位读取波形文件并将它们转换为双数组。它适用于小文件。但是当我一次加载大型波形文件它会引发堆内存不足错误，因为它必须创建该特定文件的大小帧长度的双数组。有没有其他选择，比如将波形文件加载到除了一次加载完整文件之外的部分中。我已经试过了，但是当我加载下一部分时，我无法编辑或播放上一部分。

请帮助我如何将波形文件加载到内存不足错误的编辑器中，以及如何在没有内存问题的情况下进行操作（剪切、复制、粘贴）。请给我示例代码提前谢谢..等待回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:07:17.443

您可以加载文件的块。也许看看java.nio。但是，如果保存时波形的顺序或文件大小会发生变化，则您必须随时写入完整的文件来保存更改。然后你可以重新加载你想要编辑的块（文件中的位置可能已经改变，你需要跟踪它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:53:33.447

从你问的内容很难知道你的意思。一个字节是 8 位，而双精度是 64 位，因此请考虑使用字节数组而不是双精度数组，还可以考虑在调用应用程序时增加 JVM 的内存大小......

如需更多帮助，请发布一些代码...

# php - PHP将文件从输入写入txt

> ID：14998961
> 
> 赞同：16
> 
> 时间：2013-02-21T09:43:43.770
> 
> 标签：php

我在这个网站上搜索了一个答案，但找不到任何答案。

我有一个表格，我想将输入的内容写入一个 txt 文件。为了简单起见，我只写了一个简单的表单和一个脚本，但它总是让我看到一个空白页。这是我得到的

```
<html>
<head>
    <title></title>
</head>
<body>
    <form>
        <form action="myprocessingscript.php" method="post">
        <input name="field1" type="text" />
        <input name="field2" type="text" />
        <input type="submit" name="submit" value="Save Data">
    </form>
    <a href='data.txt'>Text file</a>
</body> 
```

这是我的 PHP 文件

```
<?php
$txt = "data.txt"; 
$fh = fopen($txt, 'w+'); 
if (isset($_POST['field1']) && isset($_POST['field2'])) { // check if both fields are set
   $txt=$_POST['field1'].' - '.$_POST['field2']; 
   file_put_contents('data.txt',$txt."\n",FILE_APPEND); // log to data.txt 
   exit();
}
    fwrite($fh,$txt); // Write information to the file
    fclose($fh); // Close the file
    ?> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-21T10:06:04.010

您的表单应如下所示：

```
<form action="myprocessingscript.php" method="POST">
    <input name="field1" type="text" />
    <input name="field2" type="text" />
    <input type="submit" name="submit" value="Save Data">
</form> 
```

和 PHP

```
<?php
if(isset($_POST['field1']) && isset($_POST['field2'])) {
    $data = $_POST['field1'] . '-' . $_POST['field2'] . "\r\n";
    $ret = file_put_contents('/tmp/mydata.txt', $data, FILE_APPEND | LOCK_EX);
    if($ret === false) {
        die('There was an error writing this file');
    }
    else {
        echo "$ret bytes written to file";
    }
}
else {
   die('no post data to process');
} 
```

我写信是`/tmp/mydata.txt`因为这样我就可以确切地知道它在哪里。使用`data.txt`写入当前工作目录中的该文件，在您的示例中我一无所知。

`file_put_contents`为您打开、写入和关闭文件。不要惹它。

进一步阅读： [file_put_contents](http://php.net/manual/en/function.file-put-contents.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T09:47:20.107

您遇到的问题是因为`<form>`您拥有额外的数据，您的数据进入`GET`方法，并且您正在`PHP`使用`POST`.

```
<body>
<!--<form>-->
    <form action="myprocessingscript.php" method="POST"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:47:32.767

一个可能的解决方案：

```
<?php
$txt = "data.txt"; 
if (isset($_POST['field1']) && isset($_POST['field2'])) { // check if both fields are set
    $fh = fopen($txt, 'a'); 
    $txt=$_POST['field1'].' - '.$_POST['field2']; 
    fwrite($fh,$txt); // Write information to the file
    fclose($fh); // Close the file
}
?> 
```

您在关闭 de 文件之前关闭了脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T09:48:25.660

如果您使用 file_put_contents，则无需执行 fopen -> fwrite -> fclose，file_put_contents 将为您完成所有这些。您还应该检查网络服务器是否在您尝试写入“data.txt”文件的目录中具有写入权限。

根据您的 PHP 版本（如果它是旧的），您可能没有 file_get/put_contents 函数。检查您的网络服务器日志以查看执行脚本时是否出现任何错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T09:48:38.187

使用[fwrite()](http://www.php.net/manual/en/function.fwrite.php)而不是 file_put_contents()

# xamarin.ios - MonoDroid 和 MonoTouch 的可移植类库

> ID：14998973
> 
> 赞同：12
> 
> 时间：2013-02-21T09:44:13.927
> 
> 标签：xamarin.ios, xamarin.android, portable-class-library

我想为 MonoDroid 和 MonoTouch 创建 PCL，以共享代码 AES 加密（RijndaelManaged），但 Visual Studio 不允许我这样做，而是强制我添加所有其他框架，消息如下：

> 将自动选择以下框架，因为它们支持在您选择的其他框架之间可移植的所有可用功能：适用于 Windows 应用商店应用的 .NET、.NET Framework 4.5、Windows Phone 8。

并且这些框架不支持 System.Security.Cryptography 命名空间。

MonoDroid 和 MonoTouch 的文件放在 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETPortable\v4.5\Profile\Profile78\SupportedFrameworks 中，其中已经包含 .NET for Windows Store apps.xml、.NET框架 4.5.xml、Windows Phone 8.xml。

有人可以建议如何将 Mono 框架与其他框架隔离，我是否需要新的配置文件或其他东西。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T14:12:00.897

编辑

这现在由安装程序自动完成。您还需要最新版本的 nuget。

* * *

事实上，您需要做的就是将一个 xml 文件添加到正确的文件夹中。神奇的是，会出现一个名为“Mono for Android”的 PCL 配置文件。

文件名：

```
MonoAndroid,Version=v1.6+.xml 
```

放入文件夹：

```
C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETPortable\v4.0\Profile\Profile104\SupportedFrameworks 
```

文件内容：

```
<?xml version="1.0" encoding="utf-8"?>
<Framework DisplayName="Mono for Android"
  Identifier="MonoAndroid"
  Profile="*"
  MinimumVersion="1.6"
  MaximumVersion="*" /> 
```

有关更多信息，请查看 mvvmcross 项目[https://github.com/slodge/MvvmCross](https://github.com/slodge/MvvmCross)

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2013-02-21T16:41:50.870

Afaik 的 Xamarin 产品没有 Visual Studio 的 PCL 配置文件。所以你不能选择它。

您可能想要尝试启用：.NET >= 4.0.3 和 Silverlight 5 以获得应该与 Xamarin 产品兼容的配置文件。

# twitter-bootstrap - 如何在 twitter bootstrap 的 span9 类 div 中设置 2 个相同宽度的 div

> ID：14998986
> 
> 赞同：1
> 
> 时间：2013-02-21T09:44:53.453
> 
> 标签：twitter-bootstrap

我想在 span9 类 div 中设置 2 个相同宽度的 div，如下所示：

```
<div class="span9">

<!--i want these 2 div with same width -->
<div>
Content goes here
</div>

<div>
Content goes here
</div>

</div>
<!--span9 ends --> 
```

实现这一目标的最佳实践是什么。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:47:50.020

使用`row-fluid.`我们可以在里面嵌套等宽的列`span9`

[带有嵌套 div 的 Jsfiddle](http://jsfiddle.net/shail/HpmHZ/4/show)

```
<div class="row-fluid ">
<div class="span9">Span9
    <div class="row-fluid ">
        <div class="span6">Span 6</div>
        <div class="span6">Span 6</div>
    </div>
</div>
<div class="span3">Span 3</div>
</div> 
```

# android - 限制`adb shell dumpsys alarm`的输出

> ID：14998988
> 
> 赞同：9
> 
> 时间：2013-02-21T09:44:57.187
> 
> 标签：android, adb, alarmmanager

我想使用`adb shell dumpsys alarm`调试我正在设置的一些警报，但它会产生大量数据有没有办法将输出限制为某个应用程序？

我试过这个无济于事：`adb shell dumpsys com.mypackage`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T13:00:53.060

> 我想使用 adb shell dumpsys 警报来调试我正在设置的一些警报，但它会产生大量数据有没有办法将输出限制为某个应用程序？

不，但是命令行实用程序喜欢`grep`并且`fgrep`可以向您显示引用某些字符串的输出片段，例如您的包名称。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-01T15:42:24.443

对我来说，将整个 shell 命令放在引号中是这样的：

```
adb shell "dumpsys alarm | grep my.packagename" 
```

或者

```
adb shell "dumpsys alarm | fgrep my.packagename" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T16:57:16.123

`dumpsys`命令仅适用于已`.Dump()`实施的“服务”。您可以使用`service list`命令查看服务列表。您也可以检查是否`adb logcat -s -b events <NameOfYourApp>:*`产生了您正在寻找的数据。如果没有其他适合您的方法 - 那么有`grep`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-24T17:17:31.360

这可能会迟到，但它可能会在未来帮助某人。你可以使用这个命令：

```
adb shell dumpsys alarm | find "zima" 
```

哪个 zima 是我的包名的一部分。因此，只需将其替换为您自己的包名称即可。

# javascript - Java Script：在函数中分配 var 并在该函数中使用 var

> ID：14998989
> 
> 赞同：2
> 
> 时间：2013-02-21T09:45:00.903
> 
> 标签：javascript, function, variables

```
<script type="text/javascript">
var statustext="test";
$zack(function() {
  $zack.setOnStatus(changelable);
});
function changelable(status) {
  if (status=='A')
    statustext="OK";
  else if (status=='B')
    statustext="Ready";
  else if (status=='C')
    statustext="Go";
  document.getElementById('title').innerHTML = statustext; // OK, Ready or Go
}
</script> 
```

`document.getElementById('title').innerHTML`显示*OK、Ready 或 Go*。

但是，当我在上述脚本下方的某处使用此脚本时，该`statustext`变量包含预先分配的*测试文本：*

```
<script type="text/javascript">
document.getElementById('title2').innerHTML = statustext; // test
</script> 
```

我想多次`statustext`使用*OK、Ready 或 Go文本。*这该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T09:48:45.253

您的`title2`代码在页面加载后*立即*运行，但您的其他代码运行以响应事件（状态更改事件或任何调用的事件`changelable`）。

如果要设置`title2`为相同的设置`title`，请移动此行：

```
document.getElementById('title2').innerHTML = statustext; 
```

...*进入*`changelable`函数，就在这一行之后：

```
document.getElementById('title').innerHTML = statustext; 
```

例如：

```
document.getElementById('title').innerHTML = statustext;
document.getElementById('title2').innerHTML = statustext; 
```

或者如果你喜欢：

```
document.getElementById('title').innerHTML = document.getElementById('title2').innerHTML = statustext; 
```

* * *

另外，您的`if/else if/else if`序列实际上是该`switch`语句的用途：

```
function changelable(status) {
  switch (status) {
    case 'A':
      statustext="OK";
      break;
    case 'B':
      statustext="Ready";
      break;
    case 'C':
      statustext="Go";
      break;
  }
  document.getElementById('title').innerHTML = statustext;
  document.getElementById('title2').innerHTML = statustext;
} 
```

或者您可以使用查找表：

```
var statustext="test";
var statusLabels = {
    A: "OK",
    B: "Ready",
    C: "GO"
};
$zack(function() {
  $zack.setOnStatus(changelable);
});
function changelable(status) {
  statustext = statusLabels[status] || statustext;
  document.getElementById('title').innerHTML = statustext;
  document.getElementById('title2').innerHTML = statustext;
} 
```

# batch-file - 批处理文件：在使用批处理文件以不同用户身份启动的 cmd.exe 中运行命令

> ID：14998991
> 
> 赞同：2
> 
> 时间：2013-02-21T09:45:05.770
> 
> 标签：batch-file, registry, runas

嗨伙计们，我是批处理文件的新手，我面临着挑战。我必须自动使用批处理文件执行以下步骤。第 1 步和第 3 步我能够弄清楚，但是对于第 2 步，我需要您的帮助：

A. 使用用户运行命令提示符：

评论：我已经想通了，我可以使用：

* * *

```
 @Echo Off               
            runas /profile /savecred /user:xyzasa\asdasq "cmd" 
```

* * *

B. 使用在上一步中打开的命令提示符进行一些注册表更改

评论：我知道这可以使用 reg add 命令来完成，但是当我将此命令放入批处理文件时，它不会被执行。这是我的批处理文件的当前形状：

```
 @echo off
            runas /profile /savecred /user:xyzasa\asdasq "cmd"
            reg add <Machine Name><Registry path and the changes to be made> 
```

C. 启动一个 rdp 文件

评论：我也可以通过在最后一步简单地提及 rdp 文件的名称来做到这一点。

```
 @echo off
            runas /profile /savecred /user:xyzasa\asdasq "cmd"
            reg add <Machine Name><Registry path and the changes to be made>
            asd.rdp 
```

**问题：如何确保在上一步的结果启动 cmd 后，reg add 命令在最近启动的提示符中执行？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:06:53.437

按照您的方式，runas 命令将启动一个以该用户身份运行的*单独*cmd.exe 实例，您无法与原始 cmd.exe 实例以任何实际方式进行交互。

我建议您创建两个脚本：一个仅包含“runas”命令（例如“main.bat”），另一个包含您希望在该用户帐户下完成的所有操作（例如“sub.bat”）。然后在 main.bat 中做这样的事情：

```
runas /profile /savecred /user:xyzasa\asdasq "cmd /c sub.bat" 
```

# asp.net-mvc-3 - 如何在 mvc3 网站中添加 html5 代码？

> ID：14998995
> 
> 赞同：-4
> 
> 时间：2013-02-21T09:45:17.613
> 
> 标签：asp.net-mvc-3, html

我想将一段 html5 代码添加到我的 mvc3 网站，我在下面发布我想添加的代码

```
 <video width="320" height="240" controls autoplay>
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  <source src="movie.webm" type="video/webm">
  Your browser does not support the video tag.
  </video> 
```

但是当我输入视频标签时，我没有在智能感知中得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:56:06.493

如果您使用的是 Visual Studio 2010 SP1，您可以安装[Web Standards Update](http://visualstudiogallery.msdn.microsoft.com/a15c3ce9-f58f-42b7-8668-53f6cdc2cd83?SRC=VSIDE)。

# mysql - Jython 连接到 Mysql 数据库错误

> ID：14998999
> 
> 赞同：0
> 
> 时间：2013-02-21T09:45:22.793
> 
> 标签：mysql, database-connection, jython

在过去的两天里，我一直在用 MYSQL 和 Jython 解决一个问题。

我不断收到错误：

> zxJDBC.DatabaseError：握手过程中通信失败。localhost:3306 上是否有服务器运行？[SQL代码：0]

我尝试了多种解决方案：

> 1.) 更改mysql的端口号
> 
> 2.) 尝试了各种连接方法

然而，到目前为止，没有一个工作。

我的 netstat 显示确实有一个服务器在端口 3306 上运行：

> 0.0.0.0 3306 c:\xampp\mysql\bin\mysqld.exe

我的代码如下：

```
from com.ziclix.python.sql import zxJDBC
userInfo = {'user':'root', 'password':'', 'databaseName':'amda','serverName':'localhost','port':3306}
dbconnection = zxJDBC.connectx("org.gjt.mm.mysql.MysqlDataSource", **userInfo) 
```

如果可以，请帮忙！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:48:45.823

你可能想通过这个线程。
[MySQL论坛](http://forums.mysql.com/read.php?39,6448,6448#msg-6448)
是类似的错误