# StackOverflow 问答 14514000-14514999

# database - Postgres 到 Oracle 的翻译

> ID：14514002
> 
> 赞同：0
> 
> 时间：2013-01-25T01:41:54.200
> 
> 标签：database, oracle, postgresql, syntax

如何让这个 Postgres 语句解析为 Oracle 11g？

```
UPDATE teams as new 
  SET counter=old.counter, 
      task_counter=old.task_counter 
FROM teams as old
WHERE new.is_old=0 
  AND old.is_old=1 
  AND new.name=old.name 
  AND new.county=old.county; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:24:26.553

看来您想使用连接执行更新，即`UPDATE ... FROM`. 这似乎没有直接支持，但可以使用`UPDATE`子查询来完成。

看：

*   [http://geekswithblogs.net/WillSmith/archive/2009/10/22/oracle-update-with-join-ndash-revisited.aspx](http://geekswithblogs.net/WillSmith/archive/2009/10/22/oracle-update-with-join-ndash-revisited.aspx)
*   [http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:556373000346392260](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:556373000346392260)
*   [https://forums.oracle.com/forums/thread.jspa?threadID=399752](https://forums.oracle.com/forums/thread.jspa?threadID=399752)
*   [https://forums.oracle.com/forums/thread.jspa?threadID=399246&tstart=0](https://forums.oracle.com/forums/thread.jspa?threadID=399246&tstart=0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:34:47.530

```
UPDATE teams
  SET (counter, task_counter) = (select counter, task_counter 
                                 FROM teams old
                                 WHERE old.is_old = 1 
                                   AND teams.name = old.name   
                                   AND teams.county = old.county)
where is_old = 0 
```

这假定子选择将只为每个 name/county/is_old 组合返回一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:04:39.490

一种方便的 Oracle 技术是对这些棘手的更新使用 MERGE。

```
Merge into teams new 
From (
  Select counter,
         task_counter
  From   teams 
  Where  is_old = 1) old
On (new.is_old = 0          and
    new.name   = old.name   and
    new.county = old.county   )
when matched then update
set counter      = old.counter and
    task_counter = old.task_counter 
```

# java - spring 集成：服务激活器 requires-reply="false" 用法

> ID：14514003
> 
> 赞同：5
> 
> 时间：2013-01-25T01:42:01.273
> 
> 标签：java, spring, spring-integration

为什么即使在我指定之后我也会收到以下异常`requires-reply="false"`

**例外**

*org.springframework.integration.support.channel.ChannelResolutionException：没有可用的输出通道或replyChannel标头*

**配置**

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:int="http://www.springframework.org/schema/integration"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration-2.1.xsd">

    <int:channel id="inChannel">

    </int:channel>

    <bean id="upperService" class="sipackage.service.UppercaseService"></bean>

    <int:service-activator requires-reply="false" input-channel="inChannel" ref="upperService" method="toUpper"></int:service-activator>
</beans> 
```

**JUnit**

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"/META-INF/spring/integration/sample.xml"})
public class ChannelTest {

    @Autowired MessageChannel inChannel;

    @Test
    public void test() {

        boolean sendOutcome=inChannel.send(MessageBuilder.withPayload("Hello, there 1!").build());
        assertTrue(sendOutcome);

        sendOutcome=inChannel.send(MessageBuilder.withPayload("Hello, there 2!").build());
        assertTrue(sendOutcome);
    }

} 
```

**服务**

```
public class UppercaseService {

public String toUpper(String msg)
{
    return msg.toUpperCase();
}
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T04:20:29.457

根据[“配置服务激活器”](http://static.springsource.org/spring-integration/docs/latest-ga/reference/html/messaging-endpoints-chapter.html#service-activator-namespace)：

> 当服务方法返回非空值时，端点将尝试将回复消息发送到适当的回复通道。要确定回复通道，它将首先检查端点配置中是否提供了“输出通道”......如果没有可用的“输出通道”，它将检查消息的回复通道标头值。

它没有提到的是，任何产生回复的消息处理程序的基本行为是，如果它没有通过这两个检查找到任何东西，它就会抛出一个异常，这可以在[sendReplyMessage() 的方法](https://github.com/SpringSource/spring-integration/blob/master/spring-integration-core/src/main/java/org/springframework/integration/handler/AbstractReplyProducingMessageHandler.java#L188)中看到AbstractReplyProducingMessageHandler，许多此类事物共享的基类。因此，如果您有一个非 void 服务方法，您必须在消息上设置一个 output-channel 或一个 replyChannel 标头。

[SI 人员建议的](http://forum.springsource.org/showthread.php?132455-Override-a-quot-default-quot-reply-channel&p=431269#post431269)一个选项是在您的服务激活器前面放置一个 header-enricher，它将replyChannel 标头设置为“nullChannel”。因为默认情况下不会覆盖标头，所以任何现有的 replyChannel 都将按预期工作，其他所有内容都将转储到 nullChannel。

至于 requires-reply 属性，它用于处理一个完全不同的问题，即您有一个可能会生成`null`而不是有效消息的组件。该标志允许您指示`null`应将响应转换为异常。您可以在[“消息传递网关错误处理”](http://static.springsource.org/spring-integration/docs/latest-ga/reference/html/messaging-endpoints-chapter.html#gateway-error-handling)的注释和[“没有响应到达时的网关行为](http://static.springsource.org/spring-integration/docs/latest-ga/reference/html/messaging-endpoints-chapter.html#d4e3326)”中找到对此的讨论。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T04:17:36.667

`requires-reply="false"`意思是“没有定义返回的方法可以`void`返回`null`”。

如果该方法确实返回了回复，我们需要某个地方来发送它。如前所述`guido`- 如果您想忽略结果，请将其设置`output-channel`为 nullChannel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T16:05:56.307

**属性**：需要-回复

指定服务方法是否必须返回非空值。此值默认为“false”，但如果设置为“true”，则当底层服务方法（或表达式）返回空值时，将引发 ReplyRequiredException。

# cocoa - 如何在基于视图的 NSTableView 上获取editedColumn和editedRow

> ID：14514004
> 
> 赞同：2
> 
> 时间：2013-01-25T01:42:11.923
> 
> 标签：cocoa, nstableview

我想知道在基于视图的 NSTableView 上正在编辑的当前列和行。已编辑的列和已编辑的行属性都返回 -1。谢谢你。

# java - Map.entrySet() 如何遍历一个hashMap

> ID：14514005
> 
> 赞同：0
> 
> 时间：2013-01-25T01:42:21.423
> 
> 标签：java, foreach, hashmap, traversal

假设我有一个`HashMap()`这样定义和分配的：

```
private HashMap<Integer, Integer> rankCombinator=new HashMap<>(); 
```

在访问 HashMap 之前，我总是使用键和值“构建”它，例如，我在其上存储 15 个整数作为键，它们具有我想要的对应值。我正在尝试使用 for-each 循环遍历此地图：

```
for(Map.Entry<Integer, Integer> entry : rankCombinator.entrySet())
{
   // More code here.
} 
```

我想这个循环不会返回按照它们最初输入的方式排序的值。我对吗？如果是，返回的值中是否有任何模式？我试过查看文档，但它似乎没有包含此模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T01:44:20.653

该`HashMap`实现不保证返回项目的顺序，我建议使用`LinkedHashMap`保留顺序。

```
private Map<Integer, Integer> rankCombinator=new LinkedHashMap<Integer, Integer>(); 
```

[API 文档](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T01:47:48.723

简短的回答，不。来自[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)：“此类不保证地图的顺序”

它是任意的，取决于哈希表中的桶数，以及桶中元素的顺序。因此，当重新哈希发生时，它会有所不同。

如果您需要基于插入顺序的可预测顺序，请使用[LinkedHashMap 。](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T01:48:10.100

哈希映射根据键的哈希码将项目存储在“桶”中。“plain”`HashMap`返回条目，因为它在其“哈希桶”中找到它们。它没有可辨别的模式，即使你找到它，它也会严重依赖于实现并且不可靠。

如果您需要可靠的迭代顺序，请使用 a `TreeMap`（您将获得按键排序的条目）或`LinkedHashMap`（您将获得插入顺序）。请注意，它`TreeMap`具有不同的机制来确定其键的相等性，因此您可以使键具有可比性，或者在侧面提供一个比较器来处理键排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T01:49:39.097

顺序是随机的，但由将对象分配到 hashmap 数组存储中的槽的散列函数确定。

更多信息在这里：[哈希表是如何工作的？](https://stackoverflow.com/questions/730620/how-does-a-hash-table-work)

# jquery - 使用幻灯片 jQuery Cycle2 更改背景颜色

> ID：14514007
> 
> 赞同：0
> 
> 时间：2013-01-25T01:42:24.400
> 
> 标签：jquery, background, styles, cycle, attr

我正在为网站上的某些滑块使用 Cycle2 插件 (http://jquery.malsup.com/cycle2/)，并且需要从当前幻灯片中包含的每个图像中检测内联样式，然后将其传递给父级div 以随每张幻灯片更改滑块周围区域的背景颜色。

滑块的输出如下所示：

```
<div class="cycle-slideshow" data-cycle-fx="fade" data-cycle-timeout="0" data-cycle-slides="div" data-cycle-prev="#previous" data-cycle-next="#next" data-cycle-swipe="true" data-cycle-pager="#no-template-pager" data-cycle-pager-template="" style="position: relative;">
<div class="cycle-sentinel cycle-slide" style="position: static; top: 0px; left: 0px; z-index: 100; opacity: 1; visibility: hidden; display: block;">
    <a href="#"><img style="background-color: #ff0000;" src="http://cambelt.co/1070x400/Rotator1?color=cccccc,ffffff" alt="fsadfsdfas"></a>
</div>
<div class="slide cycle-slide cycle-slide-active" style="position: absolute; top: 0px; left: 0px; z-index: 100; opacity: 1;">
    <a href="#"><img style="background-color: #ff0000;" src="http://cambelt.co/1070x400/Rotator1?color=cccccc,ffffff" alt="fsadfsdfas"></a>
</div>
<div class="slide cycle-slide" style="position: absolute; top: 0px; left: 0px; z-index: 99; display: none;">
    <a href="#"><img src="http://cambelt.co/1070x400/Rotator2?color=cccccc,ffffff" alt=""></a>
</div>
<div class="slide cycle-slide" style="position: absolute; top: 0px; left: 0px; z-index: 97; display: none;">
    <a href="#"><img src="http://cambelt.co/1070x400/Rotator3?color=cccccc,ffffff" alt=""></a></div>
<div class="slide cycle-slide" style="position: absolute; top: 0px; left: 0px; z-index: 96; display: none;"><a href="#"><img src="http://cambelt.co/1070x400/Rotator4?color=cccccc,ffffff" alt=""></a>
</div>
</div> 
```

我的父 div 位于滑块 (.home-rotator-wrap) 上方并跨越窗口的宽度。到目前为止，我有这个，但我很确定我已经很远了。

```
$('.home-rotator-wrap > .cycle-slide-active > img').cycle(function() {
    var slideBG = $(this).attr('style');
    $('.home-rotator-wrap').attr('style', slideBG);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:39:48.070

首先，您需要将 'data-cycle-timeout' 设置为 0 以外的值，图像根本不显示。这是代码：

```
$('.cycle-slideshow').on('cycle-before', function (event, optionHash, outgoingSlideEl, incomingSlideEl, forwardFlag) {
    var bg = $(incomingSlideEl).find('img').css('backgroundColor'); // get background style from each image
    $('body').css('background', bg); // set background color from var
}); 
```

[演示，JSFiddle](http://jsfiddle.net/7VzaQ/)

# facebook - App Access Token.....如何正确使用

> ID：14514010
> 
> 赞同：-2
> 
> 时间：2013-01-25T01:43:06.973
> 
> 标签：facebook, api, action, token

我对开发比较陌生，所以一些技术指南对我来说有点难以理解（比如如何使用开放图形“动作”代码进行 curl 等）。我创建了一个小应用程序，它的行为类似于 facebook 之类的（并充当各种民意调查......但还没有到那部分，可能会在回答时将其作为一个单独的问题发布）。我的问题是应用程序访问令牌。我不知道如何将它与操作一起传递到 html/php 页面（使用页面选项卡）。我可以使用手动 url 字符串为自己获取应用程序访问令牌以及测试用户，您可以在其中将 app_id 和 app_secret 替换为必要的信息，并获得对应用程序的访问权限。但是对于其他用户，我总是收到此错误

```
{"error":{"message":"(#200) Requires extended permission: publish_actions","type":"OAuthException","code":200}} 
```

下面是动作的代码

```
FB.init({
  appId      : '446224932099458', // App ID from the App Dashboard
  status     : true, // check the login status upon init?
  cookie     : true, // set sessions cookies to allow your server to access the session?
  xfbml      : true  // parse XFBML tags on this page?
});

FB.getLoginStatus(function (response) {
    if (response.status === 'connected') {
        // connected
        testAPI();
    } else if (response.status === 'not_authorized') {
        // not_authorized
        login();
    } else {
        // not_logged_in
        login();
    }

function login() {
    FB.login(function (response) {
        if (response.authResponse) {
            // connected
        } else {
            // cancelled
        }
    }, {scope: 'publish_actions,publish_stream'});
}

function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function (response) {
        console.log('Good to see you, ' + response.name + '.');
    });
} 
```

请注意，FB.getLoginStatus 嵌套在 FB.init 中。FB.login 在 FB.init 之外。

我已经在代码中加入了 FB.init、FB.getLoginStatus 和 FB.login。用户被要求登录到应用程序并让它允许权限，但问题仍然存在。

这是应用程序的链接 [http://www.facebook.com/TechOnePhilippines/app_446224932099458](http://www.facebook.com/TechOnePhilippines/app_446224932099458)

非常感谢任何帮助！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:55:59.250

您可以发布您的登录代码吗？很难看出这些代码有什么问题..该错误消息可能与发布权限高度相关。

```
FB.login(function(response) {
    if (response.authResponse) {
        //your code
    }else {
      //error code
    }
},{scope:'email,user_photos,publish_stream'}); 
```

尝试在 FB.login 调用时设置范围..

# python - 无法导入 site.views。错误是：没有名为视图的模块

> ID：14514019
> 
> 赞同：0
> 
> 时间：2013-01-25T01:43:51.980
> 
> 标签：python

目录

**./ksp**

```
__init__.py
jquery.pngFix.js
manage.py
passenger_wsgi.py
settings.py
site/
site_media/
templates/
tmp/
urls.py 
```

**./ksp/网站**

```
__init__.py
models.py
models_.py
myforms.py
urls.py
views.py
views_back.py 
```

文件

**./ksp/passenger_wsgi.py：**

```
import os, sys
sys.path.insert(0,'/usr/lib/python2.7/site-packages/django-1.3')
sys.path.append('/home/p/pravicom/ksp/')
os.environ['DJANGO_SETTINGS_MODULE'] = 'settings'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

**./ksp/urls.py：**

```
from django.conf.urls.defaults import *
urlpatterns = patterns('',
    ('', include('site.urls')),
) 
```

**./ksp/site/urls.py：**

```
import views
from django.conf.urls.defaults import *
from django.conf import settings
from django.contrib.auth.views import login, logout

urlpatterns = patterns('',
    (r'^$', 'views.ShowMain'),
#....
)

urlpatterns += patterns('',
    (r'^site_media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT}),
) 
```

**./ksp/site/views.py：**

```
from django.shortcuts import render_to_response
from models import *
from myforms import *
from django.http import HttpResponseRedirect, HttpRequest
from django import forms
from django.template import RequestContext
from django.contrib.auth.models import User
from django.contrib import auth
from django.contrib.auth.decorators import login_required
import os, urlparse, Image, sys
from django.core.paginator import Paginator, InvalidPage, EmptyPage

def custom_proc(request):
    return{
        'user': request.user
    }

def ShowMain(request):
    all_posts = Posts.objects.all().order_by('-id')

    return render_to_response("index.html", {'all_posts':all_posts}, context_instance=RequestContext(request, processors=[custom_proc])) 
```

**./ksp/settings.py：**

```
...
ROOT_URLCONF = 'urls'
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
#    'django.contrib.sites',
#    'django.contrib.flatpages',
    'django.contrib.comments',
    'site',
)
... 
```

结果：

异常类型：ViewDoesNotExist 异常值：
无法导入 site.views。错误是：没有名为视图的模块

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:58:40.360

`site`将您的模块称为与 Python 的`site`模块发生冲突的名称很糟糕。您应该将其重命名为不会发生冲突的其他名称。您也可以通过将路径添加到`sys.path`：

```
import os, sys
sys.path.insert(0,'/usr/lib/python2.7/site-packages/django-1.3')
sys.path.insert(0, '/home/p/pravicom/ksp/') 
```

然而，这充其量是骇人听闻的，并且可能会以其他方式咬你。最好的答案是重命名你的包。

# windows - 通过 Windows 批处理文件确定 Intel 或 AMD

> ID：14514021
> 
> 赞同：0
> 
> 时间：2013-01-25T01:44:04.133
> 
> 标签：windows, architecture, batch-file, command, cmd

有没有办法通过 Windows 命令行确定机器是在运行 Intel 还是 AMD 处理器（因此可以将它放在批处理文件中）？我正在尝试为某些驱动程序制作安装脚本，并决定使用“Devcon”是最好的方法，但它需要正确的架构才能运行。

此外，除了检查“程序文件（x86）”是否存在之外，是否有更好的方法来确定计算机是否运行 32 位或 64 位版本的 Windows？这就是我迄今为止所采取的方法。

我对编程或脚本并不陌生，但我对 Windows CMD 很陌生（我主要是 Linux 用户）。

多谢你们！如果您需要，我可以提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:36:09.633

我认为下面的批处理文件可以获得您想要的信息：

```
@echo off
for /F "skip=1 delims=" %%a in ('wmic cpu get name') do set cpu=%%a
for /F "skip=1 delims=^|" %%a in ('wmic os get name') do set os=%%a
echo CPU: "%cpu%
echo OS:  "%os%" 
```

例如，在我的（非常旧的）计算机中，它显示：

```
CPU: "Intel(R) Pentium(R) M processor 1.20GHz
OS:  "Microsoft Windows XP Professional" 
```

我希望它有所帮助。

安东尼奥

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T01:49:47.120

```
wmic cpu get name,CurrentClockSpeed,MaxClockSpeed 
```

来源： http: [//www.windows7hacker.com/index.php/2011/10/how-to-find-out-bios-motherboard-and-cpu-info-from-command-line/](http://www.windows7hacker.com/index.php/2011/10/how-to-find-out-bios-motherboard-and-cpu-info-from-command-line/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T04:44:18.463

这是我的解决方案，虽然它只检查架构：

```
for /f "tokens=* delims=AMDx" %%a in ('"echo %processor_architecture%"') do (set arc=%%a & echo %arc%) 
```

它返回 86 或 64，并将变量“arc”设置为等于各自的架构......

我发现这对于将 Nirsoft 工具集成到我的脚本中特别有用，因为它们中的许多都是为 86 或 64 构建的。

# magento - Magento - 强制管理员用户注销

> ID：14514023
> 
> 赞同：3
> 
> 时间：2013-01-25T01:44:20.803
> 
> 标签：magento, magento-1.7

我正在为 Magento 编写一个只允许用户从特定 IP 地址登录的模块。

我迷上了

```
 admin_session_user_login_success 
```

当我的函数运行时，我正在尝试运行

```
 Mage::getSingleton('admin/session')->logout(); 
```

但是该功能不存在

```
 Invalid method Mage_Admin_Model_Session::logout 
```

我继续阅读

```
http://stackoverflow.com/questions/8455022/how-to-force-magento-to-logout 
```

帐户控制器或会话控制器也可用于注销用户，但我不知道如何注销管理员用户。

非常感谢任何片段或想法！

谢谢！

杰夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T02:06:54.773

我能够使用以下代码段注销管理员用户

```
$adminSession = Mage::getSingleton('admin/session');
$adminSession->unsetAll();
$adminSession->getCookie()->delete($adminSession->getSessionName()); 
```

# c# - 日志解析器 COM API 很慢

> ID：14514027
> 
> 赞同：0
> 
> 时间：2013-01-25T01:44:39.077
> 
> 标签：c#, logparser

我正在使用 LogParser COM API 在我的 WPF .NET 4.0 应用程序中查询事件日志，但现在我面临一个问题，即 ExecuteQuery 运行时间过长。在 Winform + .NET 2.0 的示例代码中，LogQueryClassClass 的 ExecuteQuery api 立即返回。我的参数与示例相同，如下所示

```
var inputFormat = new COMEventLogInputContextClassClass
{
    direction = "FW",
    fullText = true,
    resolveSIDs = false,
    formatMessage = true,
    formatMsg = true,
    msgErrorMode = "MSG",
    fullEventCode = false,
    stringsSep = "|",
    iCheckpoint = string.Empty,
    binaryFormat = "HEX"
}; 
```

现在我只是感到困惑，因为该 API 与 Winform + .NET 2.0 和 WPF + .NET 4.0 的行为不同没有任何意义。有人可以在这里启发我吗？

顺便说一句，我对示例应用程序和我的应用程序之间的远程服务器使用相同的查询和相同的参数。所以理论上性能应该是相同的，但现在通常 ExecuteQuery 在我的应用程序中需要大约 5 秒，但在示例应用程序中它会立即返回。但是，使用本地机器事件查询时，ExecuteQuery 都会在两个应用程序中立即返回。

我的开发环境是 Windows Server 2008 R2 + VS2010

# node.js - 如何在 ODBC 中获取表列表 - 带有 nodejs 的 Excel

> ID：14514032
> 
> 赞同：-1
> 
> 时间：2013-01-25T01:45:01.677
> 
> 标签：node.js, excel, list, odbc

我想在 ODBC 中获取表列表（名称列表）-excel 宽度 nodejs

在 rdb 中，有一个包含已定义表列表的系统表。但是在EXCEL中，没有人。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:55:32.620

据我所知，没有直接的方法可以从 Node 与 ODBC 交互。如果您使用的是 Windows，您可以尝试在子进程中启动 WSH 脚本：

```
child_process.exec('cscript.exe //nologo wsh_script.js', function (error, stdout, stderr) { ... }); 
```

其中 wsh_script.js 将与 Excel 交互并通过标准输出将结果（可能以 JSON 格式）返回给 Node。例如，wsh_script.js 可能看起来像：

```
var objExcel = new ActiveXObject('Excel.Application');
objExcel.Workbooks.Open(xlsFilePath);
var cellValue = objExcel.Cells(row, col).Value;
WScript.stdout.write(cellValue); 
```

有关如何从 WSH 与 Excel/ODBC 交互的更多信息，请参阅[此问题](https://stackoverflow.com/questions/5546345/how-to-read-a-spreadsheet-with-wsh)或[本文。](http://technet.microsoft.com/en-us/library/ee692882.aspx)

# php - Date() 函数的意外结果

> ID：14514034
> 
> 赞同：-1
> 
> 时间：2013-01-25T01:45:05.657
> 
> 标签：php, function, date

任何人都可以向我解释为什么代码行：

```
Date("l F d, Y","2013-01-25T01:42:16.411Z") 
```

正在返回：

```
Wednesday December 31, 1969 
```

并不是：

```
Wednesday January 25, 2013 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T01:46:26.920

第二个参数[`date()`](http://us3.php.net/manual/en/function.date.php)是 Unix 时间戳，而不是格式化字符串：

```
date("l F d, Y",strtotime("2013-01-25T01:42:16.411Z")); 
```

在使用;[`strtotime()`](http://us3.php.net/manual/en/function.strtotime.php)格式化之前，我曾经将其转换为 Unix 时间戳。`date()`

# c - 一次性函数执行

> ID：14514035
> 
> 赞同：-2
> 
> 时间：2013-01-25T01:45:20.963
> 
> 标签：c, linux, linux-kernel, linux-device-driver

从两个不同的文件调用一个函数来加载一些数据，在某些情况下它是从一个文件加载的，而在某些情况下它是从另一个文件加载的。但在极端情况下，它会从两个文件中调用，这应该避免。

我可以使用一个全局变量或使用一个函数来确保数据加载只发生一次。

寻找更优雅的解决方案。

linux是否提供了一些API来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T01:47:46.877

如果您正在谈论多个线程，那么您需要某种围绕静态变量的互斥锁，以表示该函数是否已经运行。

如果你只有一个线程，那么你不需要互斥锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:47:05.017

[如果是多线程的，请按照此答案](https://stackoverflow.com/a/14514054/841108)中的建议在静态变量周围使用互斥锁，或者使用 [pthread_once](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_once.html)。

# mysql - 将旧列添加到替换表

> ID：14514040
> 
> 赞同：0
> 
> 时间：2013-01-25T01:46:05.113
> 
> 标签：mysql

我刚刚在我的数据库中添加了新表来跟踪图像视图.. 像这样

```
viewcount 
DATE 
IMAGE_ID 
NUMVIEWS 
```

我不知道如何添加我之前跟踪的旧视图，这只是图像表中的一列视图，就像这样..

```
imageTable
IMAGE_ID 
NUMVIEWS  // 2654 or whatever 
```

我想将它们全部添加为任意日期。例如：2012年 12 月 21 日
似乎很复杂.. 也许应该重置所有视图并继续使用新表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T01:48:10.053

只有`INSERT`他们来自旧桌子？

```
INSERT INTO viewcount (date, image_id, numviews)
SELECT '2012-12-21' AS date, image_id, numviews FROM imageTable 
```

如果要更新实际`numviews`值，可以尝试：

```
UPDATE viewcount 
LEFT JOIN imageTable ON imageTable.image_id = viewcount.image_id
SET viewcount.numviews = viewcount.numviews + imageTable.numviews 
```

请注意，这将更新*任何*日期的记录。

# android - 解析：从父级检索子级

> ID：14514042
> 
> 赞同：2
> 
> 时间：2013-01-25T01:46:37.330
> 
> 标签：android

我正在使用[Parse](https://www.parse.com/)并在两个模型之间创建了一对一的关系（一个位置有一个队列）。如何仅使用位置来检索队列的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:14:54.473

我刚开始使用 Parse。根据他们的[Android 文档](https://www.parse.com/docs/android_guide)，您需要先将队列 ParseObject 添加到位置 ParseObject，然后再存储它们（反之亦然）。

假设您将两者之间的关系放在 location 对象中，您应该能够使用以下内容拉取队列：

**存储：**

```
// Create location
ParseObject location = new ParseObject("Location");
location.put("foo", "bar");

// Create queue
ParseObject queue = new ParseObject("Queue");
queue.put("name", "Ben");

// Store the queue in the location (location will contain a pointer to queue)
location.put("Queue", queue);

// Save both location and queue
location.saveInBackground(); 
```

**检索：**

```
// Retrieve location using objectId
ParseQuery query = new ParseQuery("Location");
query.getInBackground("QkKt30WhIA", new GetCallback() { // objectId!
    public void done(ParseObject object, ParseException e) {
        if (e == null) {
            // Location found! Query for the queue
            object.getParseObject("Queue").fetchIfNeededInBackground(new GetCallback() {
                public void done(ParseObject object, ParseException e) {
                    // Queue found! Get the name
                    String queueAttr = object.getString("name");
                Log.i("TEST", "name: " + queueAttr);
                }
            });
        }
        else {
            // something went wrong
            Log.e("TEST", "Oops!");
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:40:35.483

这就是我最终做的事情：

```
 // create qLocation
        ParseObject qLocation = new ParseObject("QLocations");
        qLocation.put("name", qname);
        qLocation.put("streetAddress", streetAddress);
        qLocation.put("cityState", cityState);

        // create qLine               
        ParseObject qLine = new ParseObject("Lines");
        Random r = new Random();
        qLine.put("length", r.nextInt(10)); //set line length to a random number between 0-10
        qLine.put("qName",qname);

        // add relationship
        qLine.put("parent", qLocation);

        // save line and location
        qLine.saveInBackground(); 
```

最后，行 qline.put("parent", qLocation); 最终并不重要，因为我不知道如何使用这种关系从给定位置获取队列。所以我最终使用 qLine 中的“qName”列来检查哪个队列与哪个位置相关联。

# javascript - 访问 iframe 中的元素

> ID：14514044
> 
> 赞同：0
> 
> 时间：2013-01-25T01:46:57.457
> 
> 标签：javascript, jquery

> **可能重复：**
> [javascript 可以从父页面访问 iframe 元素吗？](https://stackoverflow.com/questions/729577/can-javascript-access-iframe-elements-from-the-parent-page)

我的文档中有一个 iframe，我想使用 JQuery 获取（并更改）其中的一些属性。这是代码：

```
var iframe = $('iframe');

        $("#id").click(function() {
            var btn = iframe.contents().find('a[href*="script.php"]'); 
            alert(btn);
            for (var i=0, attrs=btn.attributes, l=attrs.length; i<l; i++){
                alert(attrs.item(i).nodeName);
            }
         }); 
```

第一个警报说“[object Object]”，然后我收到错误：

> 不安全的 JavaScript 尝试 从 URL [http://domain.wia-games.net/的框架访问具有 URL](http://domain.wia-games.net/) [http://somedomain.ru/somescript.php](http://somedomain.ru/somescript.php)的框架 。域、协议和端口必须匹配。

和

> 未捕获的类型错误：无法读取未定义的属性“长度”

我应该如何解决问题？

UPD。控制台日志（btn）：

> [prevObject: st.fn.st.init[0], context: document, selector: "a[href*="script.php"]", jquery: "1.9.0", constructor: function...] context: #文档长度：0 prevObject：st.fn.st.init[0] 选择器：“a[href*="script.php"]” **proto**：Object[0]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:50:54.977

这是出于安全原因在浏览器上实施的约束：[**同源策略**](http://en.wikipedia.org/wiki/Same_origin_policy)

存在安全的解决方法：

*   [JSON to JSONP：绕过同源策略](http://www.codeproject.com/Articles/42641/JSON-to-JSONP-Bypass-Same-Origin-Policy)
*   使用标头：[内容安全策略 1.1](https://dvcs.w3.org/hg/content-security-policy/raw-file/tip/csp-specification.dev.html)
*   [YQL](http://developer.yahoo.com/yql/)？！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T01:53:42.797

大多数浏览器作为安全功能禁止跨站点脚本： [http ://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

这意味着两个对象必须具有相同的源域。

作为一种解决方法，您可能希望在服务器端查询外部页面（例如使用 php）

# qt - Qt 程序退出，代码为 -1073741819

> ID：14514045
> 
> 赞同：1
> 
> 时间：2013-01-25T01:46:58.513
> 
> 标签：qt, opencv

我正在使用 Windows 7 中的 Qt 和 Opencv 进行基于人脸识别的项目。我现在遇到了一个真正的死胡同……我需要使用一些图像来训练人脸识别器……但是每当我注释掉火车声明，程序运行良好，但没有放弃我的目的......

```
void Dialog::on_btnAdd_2_clicked()
{
    tmrTimer->stop();

    dir=QDir(directory);
    QFileInfoList files;
    QFileInfo file;
    QString filen;

    dir.setFilter(QDir::Files | QDir::Hidden | QDir::NoSymLinks);
    files=dir.entryInfoList();
    int nofiles;
    nofiles=files.size();
    for(int i=0;i<nofiles;i++)
    {
        file=files.at(i);
        filen=file.absoluteFilePath();

        std::string fname = filen.toStdString();

        filen=file.baseName();
        std::string filename=filen.toStdString();

        char* path = new char [fname.size()+1];
        char name[10];

        strcpy(name,filename.c_str());
        strcpy( path, fname.c_str() );

        name[1]='\0';

        ui->boxConsole->appendPlainText(path);
        ui->boxConsole->appendPlainText(name);

        cv::Mat temp=cv::imread(path,-1);
        newImages.push_back(temp);
        newLabels.push_back(atoi(name));
    }

    ui->boxConsole->appendPlainText("Training Started....!!");

    cv::Ptr<cv::FaceRecognizer> model = cv::createEigenFaceRecognizer();

    model->train(newImages,newLabels);   ///training statement

    //strcat(home,"\\data.xml");

    //model->save(home);

    ui->boxConsole->appendPlainText("Training Completed!!");
    tmrTimer->start();
} 
```

当我运行项目并单击启动上述功能的按钮时，进程崩溃说...

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: QtTracker3.exe
  Application Version:  0.0.0.0
  Application Timestamp:    5101dde0
  Fault Module Name:    libopencv_core242.dll
  Fault Module Version: 0.0.0.0
  Fault Module Timestamp:   50da6896
  Exception Code:   c0000005
  Exception Offset: 000a38f0
  OS Version:   6.1.7600.2.3.0.256.1
  Locale ID:    1033
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789

Read our privacy statement online:
  http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409

If the online privacy statement is not available, please read our privacy statement offline:
  C:\Windows\system32\en-US\erofflps.txt 
```

我按照以下建议修改了代码...并遇到了另一个问题...

```
void Dialog::on_btnAdd_2_clicked()
{
    tmrTimer->stop();

    dir=QDir(directory);
    QFileInfoList files;
    QFileInfo file;
    QString filen;

    char name[10];
    int i,j;
    std::string str;

    dir.setFilter(QDir::Files | QDir::Hidden | QDir::NoSymLinks);
    files=dir.entryInfoList();
    int nofiles;
    nofiles=files.size();

    for(i=0;i<nofiles;i++)
        {
            file=files.at(i);
            filen=file.baseName();
            std::string filename=filen.toStdString();
            strcpy(name,filename.c_str());

            for(j=0;name[j]!='-';j++);
            name[j]='\0';

            filen=file.absoluteFilePath();
            str=filen.toStdString();

            cv::Mat offimage=cv::imread(str.c_str(),-1);

            cv::namedWindow("face",WINDOW_AUTOSIZE);     //show retrieved image in a window
            cv::imshow("face",offimage);
            cvvWaitKey(1000);

            newImages.push_back(offimage);
            newLabels.push_back(atoi(name));

        } 
```

我删除了 for 循环中使用的指针，但同样的问题仍然存在......

我还发现 qt creator 在其问题选项卡中报告了一个问题：

```
:-1: warning: auto-importing has been activated without --enable-auto-import specified on the command line. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:47:09.437

当您的代码崩溃时，请使用调试器找出它崩溃的位置。如果您不明白原因，请将回溯添加到问题中。

我假设您的崩溃是在循环文件时的文件名处理中。您使用 char* 而不是 std::string 或 QString 打开了多罐蠕虫，但没有正确执行。

这一次，这是非常不安全且不安全的（缓冲区溢出）：

```
 char name[10];
    ...
    strcpy(name,filename.c_str()); 
```

如果文件名长于 9，则行为未定义（很可能会崩溃）。

您还泄漏了内存，因为此分配永远不会被释放： char* path = new char [fname.size()+1];

所以我强烈建议使用 QString 而不是摆弄 char*。如果您需要将 char* 传递给 OpenCV，您可以这样做：

```
const QByteArray ba = filename.toLatin1(); //or toUtf8(), toLocal8Bit(), depending on the encoding you need
... functionTakingChar( ba.constData(), -1 ); // or .data(), if imread() takes a non-const char 
```

imread 需要一个 std::string，所以：

```
... imread( filename.toStdString(), -1 ); 
```

# pandas - 将 csv 文件转换为 pandas 数据框

> ID：14514046
> 
> 赞同：3
> 
> 时间：2013-01-25T01:47:05.250
> 
> 标签：pandas

我有以下格式的 CSV 文件：

```
DATES, 01-12-2010, 01-12-2010, 01-12-2010, 02-12-2010, 02-12-2010, 02-12-2010
UNITS, Hz, kV, MW,  Hz, kV, MW
Interval, , , , , ,                                           
00:15, 49.82, 33.73755, 34.65, 49.92, 33.9009, 36.33,
00:30, 49.9, 33.7722, 35.34, 49.89, 33.8382, 37.65,
00:45, 49.94, 33.8316, 33.5, 50.09, 34.07745, 37.41,
01:00, 49.86, 33.94875, 30.91, 50.18,   34.20945, 36.11,
01:15, 49.97, 34.2243,  27.28,  50.11,  34.3596, 33.24,
01:30,  50.02,  34.3332, 26.91, 50.12,  34.452, 31.03,
01:45,  50.01,  34.1286, 31.26, 50, 33.9306, 38.86,
02:00,  50.08,  33.9141, 34.96, 50.14,  33.99165, 38.31,
02:15,  50.07,  33.84975, 35.33, 50.01, 33.9537, 39.78,
02:30,  49.97,  34.0263, 33.63, 50.07,  33.8547, 41.48, 
```

我想将以上内容转换为以下格式的数据框：

```
 Hz      kV          MW
DATES_Interval
01-12-2010 00:15    49.82   33.73755    34.65
01-12-2010 00:30    49.9    33.7722     35.34
01-12-2010 00:45    49.94   33.8316     33.5
01-12-2010 01:00    49.86   33.94875    30.91
01-12-2010 01:15    49.97   34.2243     27.28
01-12-2010 01:30    50.02   34.3332     26.91
01-12-2010 01:45    50.01   34.1286     31.26
01-12-2010 02:00    50.08   33.9141     34.96
01-12-2010 02:15    50.07   33.84975    35.33
01-12-2010 02:30    49.97   34.0263     33.63
02-12-2010 00:15    49.92   33.9009     36.33
02-12-2010 00:30    49.89   33.8382     37.65
02-12-2010 00:45    50.09   34.07745    37.41
02-12-2010 01:00    50.09   34.07745    37.41
02-12-2010 01:15    50.11   34.3596     33.24
02-12-2010 01:30    50.12   34.452      31.03
02-12-2010 01:45    50      33.9306     38.86
02-12-2010 02:00    50.14   33.99165    38.31
02-12-2010 02:15    50.01   33.9537     39.78
02-12-2010 02:30    50.07   33.8547     41.48 
```

我如何用熊猫做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:13:41.580

在 pandas 中做这种事情的关键是[`stack()`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.stack.html#pandas.DataFrame.stack)方法：

```
df.stack(level=0) 
```

但是，我发现到了一个可以使用它的地方，至少特定的 csv 是棘手*的.. 至少可以说*（几乎可以肯定有更好的方法来做到这一点！）：

```
df_data = pd.read_csv('e.csv', sep=',\s+', header=None, skiprows=3)[range(7)].set_index(0)
df_cols = pd.read_csv('e.csv', sep=',\s+', header=None, nrows=2).set_index(0)[:2] #interval causing problems    
df_ = df_cols.append(df_data).T.set_index(['DATES','UNITS','Interval']).T
df = df_.stack(level=0)
df_dates = map(lambda x: pd.to_datetime(' '.join(x[::-1])), df.index)
df.index = df_dates

In [7]: df
Out[7]: 
UNITS                   Hz      MW        kV
2010-01-12 00:15:00  49.82   34.65  33.73755
2010-02-12 00:15:00  49.92  36.33,   33.9009
2010-01-12 00:30:00   49.9   35.34   33.7722
2010-02-12 00:30:00  49.89  37.65,   33.8382
2010-01-12 00:45:00  49.94    33.5   33.8316
2010-02-12 00:45:00  50.09  37.41,  34.07745
2010-01-12 01:00:00  49.86   30.91  33.94875
2010-02-12 01:00:00  50.18  36.11,  34.20945
2010-01-12 01:15:00  49.97   27.28   34.2243
2010-02-12 01:15:00  50.11  33.24,   34.3596
2010-01-12 01:30:00  50.02   26.91   34.3332
2010-02-12 01:30:00  50.12  31.03,    34.452
2010-01-12 01:45:00  50.01   31.26   34.1286
2010-02-12 01:45:00     50  38.86,   33.9306
2010-01-12 02:00:00  50.08   34.96   33.9141
2010-02-12 02:00:00  50.14  38.31,  33.99165
2010-01-12 02:15:00  50.07   35.33  33.84975
2010-02-12 02:15:00  50.01  39.78,   33.9537
2010-01-12 02:30:00  49.97   33.63   34.0263
2010-02-12 02:30:00  50.07  41.48,   33.8547 
```

这有点乱，并且在某些列中有逗号！：

```
def clean(s):
    try: return float(s.strip(','))
    except: return s

In [9]: df.applymap(clean)
Out[9]: 
                        Hz     MW        kV
2010-01-12 00:15:00  49.82  34.65  33.73755
2010-02-12 00:15:00  49.92  36.33  33.90090
2010-01-12 00:30:00  49.90  35.34  33.77220
2010-02-12 00:30:00  49.89  37.65  33.83820
2010-01-12 00:45:00  49.94  33.50  33.83160
2010-02-12 00:45:00  50.09  37.41  34.07745
2010-01-12 01:00:00  49.86  30.91  33.94875
2010-02-12 01:00:00  50.18  36.11  34.20945
2010-01-12 01:15:00  49.97  27.28  34.22430
2010-02-12 01:15:00  50.11  33.24  34.35960
2010-01-12 01:30:00  50.02  26.91  34.33320
2010-02-12 01:30:00  50.12  31.03  34.45200
2010-01-12 01:45:00  50.01  31.26  34.12860
2010-02-12 01:45:00  50.00  38.86  33.93060
2010-01-12 02:00:00  50.08  34.96  33.91410
2010-02-12 02:00:00  50.14  38.31  33.99165
2010-01-12 02:15:00  50.07  35.33  33.84975
2010-02-12 02:15:00  50.01  39.78  33.95370
2010-01-12 02:30:00  49.97  33.63  34.02630
2010-02-12 02:30:00  50.07  41.48  33.85470 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:23:33.733

另一种解决方案是

1.  读取日期（csv 的第一行）
2.  读入其余数据，包括区间
3.  根据需要构建索引并将其应用于数据框

这是一些示例代码：

```
In [1]: from StringIO import StringIO    
In [2]: import pandas as pd
In [3]: pd.__version__
Out[3]: '0.10.1'

In [4]: CSV_SAMPLE = """
DATES, 01-12-2010, 01-12-2010, 01-12-2010, 02-12-2010, 02-12-2010, 02-12-2010
UNITS, Hz, kV, MW,  Hz, kV, MW
Interval, , , , , ,
00:15, 49.82, 33.73755, 34.65, 49.92, 33.9009, 36.33,
00:30, 49.9, 33.7722, 35.34, 49.89, 33.8382, 37.65,
00:45, 49.94, 33.8316, 33.5, 50.09, 34.07745, 37.41,
01:00, 49.86, 33.94875, 30.91, 50.18,   34.20945, 36.11,
01:15, 49.97, 34.2243,  27.28,  50.11,  34.3596, 33.24,
01:30,  50.02,  34.3332, 26.91, 50.12,  34.452, 31.03,
"""

#Create one dataframe from just the dates (and we'll grab the units, too)
In [6]: datesdf = pd.read_csv(StringIO(CSV_SAMPLE), nrows= 2)
In [7]: dates, units = datesdf.index.droplevel()

In [9]: dates, units
Out[9]:
((' 01-12-2010',
  ' 01-12-2010',
  ' 01-12-2010',
  ' 02-12-2010',
  ' 02-12-2010',
  ' 02-12-2010'),
 (' Hz', ' kV', ' MW', '  Hz', ' kV', ' MW'))

#Create a second dataframe from the rest of the data
In [11]: data = pd.read_csv(StringIO(CSV_SAMPLE), skiprows=3)
In [12]: data = data.icol([0,1,2])

#Note: Instead, in pandas 0.10, you can use the usecols paramater in read_csv()
#  to combine the above two steps into one. 

In [14]: data.columns = units[:3]
In [15]: print data
          Hz        kV     MW
00:15  49.82  33.73755  34.65
00:30  49.90  33.77220  35.34
00:45  49.94  33.83160  33.50
01:00  49.86  33.94875  30.91
01:15  49.97  34.22430  27.28
01:30  50.02  34.33320  26.91 
```

现在创建所需的索引并应用它。以下是索引的几种方法。

```
#We'll need to grab the intervals from this data df
In [16]: intervals = data.index.tolist()  

In [17]: index1 = pd.MultiIndex.from_arrays([dates,intervals])

#This is a multi-index
In [18]: print index1
MultiIndex
[( 01-12-2010, 00:15), ( 01-12-2010, 00:30), ( 01-12-2010, 00:45), ( 02-12-2010, 01:00), ( 02-12-2010, 01:15), ( 02-12-2
010, 01:30)]

#This index is a tuple of date,interval
In [21]: index2 = pd.Index(zip(dates, intervals))
In [22]: print index2
Index([( 01-12-2010, 00:15), ( 01-12-2010, 00:30), ( 01-12-2010, 00:45), ( 02-12-2010, 01:00), ( 02-12-2010, 01:15), ( 0
2-12-2010, 01:30)], dtype=object)

#This index is based on a string concat of date and interval
In [23]: def list_join(x,y):
   ....:         joined = x + ' ' + y
   ....:         return joined.strip()
   ....:

In [24]: index3 = pd.Index(map(list_join, dates, intervals))    
In [25]: print index3
Simple index:
Index([01-12-2010 00:15, 01-12-2010 00:30, 01-12-2010 00:45, 02-12-2010 01:00, 02-12-2010 01:15, 02-12-2010 01:30], dtyp
e=object) 
```

由于第三种类型的索引是您在原始请求中所拥有的，我将使用它。

```
In [26]: data.index = index3
In [27]: print data
                     Hz        kV     MW
01-12-2010 00:15  49.82  33.73755  34.65
01-12-2010 00:30  49.90  33.77220  35.34
01-12-2010 00:45  49.94  33.83160  33.50
02-12-2010 01:00  49.86  33.94875  30.91
02-12-2010 01:15  49.97  34.22430  27.28
02-12-2010 01:30  50.02  34.33320  26.91 
```

如果上面的代码抱怨非唯一索引值，您可能必须修改上面的代码来处理完整的数据集。在这种情况下，将 Intervals csv 列作为数据列（不是索引）读取并将其作为数组拉出以创建所需的索引，与上述相同。

# database - 节点的 JPA 或 JDBC 等价物是什么？

> ID：14514048
> 
> 赞同：18
> 
> 时间：2013-01-25T01:47:08.750
> 
> 标签：database, node.js, driver

我对节点很陌生，我想知道是否有任何标准的、开放的 API 可以让我远离所有不同的数据库特性。

任何与教程或文档的链接都会非常受欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T02:13:08.007

Node 没有“标准”数据库抽象层，但请看一下[Node-DBI](https://github.com/DrBenton/Node-DBI)，它是开源的并在 GitHub 上维护。可能还有其他的，但是这个有一个很好的接口和几个适配器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-15T20:23:05.413

我认为[node-jdbc](https://github.com/CraZySacX/node-jdbc)是一个经常更新的综合模块。它的文档也可以在 github 上访问。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T02:05:12.417

我不知道，查看[官方节点文档](https://github.com/joyent/node/wiki/modules#wiki-database)并没有列出任何此类内容，这令人失望。

如果您不反对使用 ORM，那么[Sequelize](http://www.sequelizejs.com/)是一个不错的选择，它只处理 SQL 的一个子集，但它. [这个项目](http://nodejsdb.org/)看起来像是在努力做你描述的事情；但是，该项目看起来像是很久以前上次更新的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-11T22:32:29.927

不完全是，Node.js 的[Loopback](https://loopback.io)框架具有类似 ORM 的数据源连接器，允许您通过通用语法连接到[许多数据源。](https://github.com/pasindud/awesome-loopback)它是一个完整的企业级框架，因此还有许多其他组件。Sails.js 等其他框架也有类似的组件。

[Sequelize](http://docs.sequelizejs.com/)是适用于 PostgreSQL、MySQL、SQLite 和 MSSQL 的出色 ORM。

[TypeORM](https://typeorm.io/)也很棒，支持 MySQL、PostgreSQL、MariaDB、SQLite、MS SQL Server、Oracle、SAP Hana、WebSQL 数据库。适用于 NodeJS、浏览器、Ionic、Cordova 和 Electron 平台。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-18T20:30:46.133

虽然不完全像 JDBC 或 JPA，[但 knex](https://knexjs.org/)似乎是多个数据库之上的一个很好的 SQL 抽象。

> Knex.js 是一个“包含电池”的 SQL 查询构建器，适用于 Postgres、MSSQL、MySQL、> MariaDB、SQLite3、Oracle 和 Amazon Redshift，旨在灵活、便携、> 和有趣的使用。

我还没有真正使用过它，但考虑到荒凉的景观，它似乎是一个不错的选择。

# xml - xs:unique 我如何让它工作

> ID：14514052
> 
> 赞同：0
> 
> 时间：2013-01-25T01:47:36.970
> 
> 标签：xml, xsd

嘿，我想强制一个属性在我的 XML 文档中是唯一的。我刚刚开始使用 XML。我想让每个人都有一个唯一的ID。我看过 xs:unique 但不太清楚它在哪里，每次尝试时都不会解析。架构如下：

```
<?xml version='1.0' encoding='utf-8'?>
<xs:schema xmlns:xs='http://www.w3.org/2001/XMLSchema'>
    <xs:element name='people' type='peopleType' /><!-- Root Element -->

    <xs:complexType name='peopleType'>
        <xs:sequence>
            <xs:element name='person' type='personType' maxOccurs='unbounded'/>
        </xs:sequence>
    </xs:complexType><!-- End peopleType-->

    <xs:complexType name='personType'>

        <xs:sequence>
            <xs:element name='name' type='nameType' maxOccurs='unbounded' />
            <xs:element name='email' minOccurs='1'>
                <xs:simpleType>
                    <xs:restriction base='xs:string'>
                        <xs:pattern value='([a-zA-Z0-9_-])*([.])?([a-zA-Z0-9_-])*([.])?([a-zA-Z0-9_-])*[@]([a-zA-Z0-9_-])*([.])?([a-zA-Z0-9_-])*([.])?([a-zA-Z0-9_-])*' />
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
            <xs:element name='favColour' type='colourType' minOccurs='0' />

        </xs:sequence>

        <xs:attribute name='id' type='xs:integer' />

    </xs:complexType><!--End personType -->

    <xs:complexType name='nameType'>
        <xs:sequence>
            <xs:element name='given' minOccurs='1'>
                <xs:simpleType>
                    <xs:restriction base='xs:string'>
                        <xs:pattern value='[A-Z]([a-z])*' />
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
            <xs:element name='family' minOccurs='1'>
                <xs:simpleType>
                    <xs:restriction base='xs:string'>
                        <xs:pattern value='[A-Z]([a-z])*' />
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
        </xs:sequence>
    </xs:complexType><!-- End nameType -->

    <xs:complexType name='colourType'>
        <xs:sequence>
            <xs:element name='red' minOccurs='1' >
                <xs:simpleType>
                    <xs:restriction base='xs:integer'>
                        <xs:minInclusive value='0' />
                        <xs:maxInclusive value='255' />
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
            <xs:element name='green' minOccurs='1' >
                <xs:simpleType>
                    <xs:restriction base='xs:integer'>
                        <xs:minInclusive value='0' />
                        <xs:maxInclusive value='255' />
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
            <xs:element name='blue' minOccurs='1'>
                <xs:simpleType>
                    <xs:restriction base='xs:integer'>
                        <xs:minInclusive value='0' />
                        <xs:maxInclusive value='255' />
                    </xs:restriction>
                </xs:simpleType>
            </xs:element>
        </xs:sequence>
    </xs:complexType><!-- End colourType -->
</xs:schema> 
```

[编辑] 在听取建议后，我做了以下更改。它可以解析，但不强制执行唯一属性。

```
<xs:complexType name='peopleType'>
        <xs:sequence>
            <xs:element name='person'  type='personType' maxOccurs='unbounded'>
                <xs:unique name="MyUserNameUniqueKey">
            <xs:selector xpath="person" />
            <xs:field xpath="@id" />
            </xs:unique>
            </xs:element>
        </xs:sequence>
    </xs:complexType><!-- End peopleType--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:49:00.267

在人员的元素声明中，添加一个带有选择器 xpath="person"、字段 xpath="@id" 的 xs:unique 声明。如果它不起作用，请告诉我们您尝试了什么。

# oracle - Oracle OPS$ 中的操作系统身份验证

> ID：14514062
> 
> 赞同：0
> 
> 时间：2013-01-25T01:48:32.833
> 
> 标签：oracle, oracle10g

我正在尝试使用此命令能够直接登录sqlplus（无需输入用户名和密码）

sqlplus /@db_name

但我遇到了这个错误

```
ORA-01017: invalid username/password; logon denied 
```

我授予 OPS$ 用户

```
GRANT CONNECT TO ops$user; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:24:06.873

好的，由于数据库在本地计算机上，您不必使用@db_name，“sqlplus /”应该可以正常工作 - 只需确保正确设置环境变量 ORACLE_SID。请注意，请确保在创建用户时指定了“外部识别”。请注意，您必须以“用户”身份登录机器；我记得在 Windows 上是否可能还需要域作为 Oracle 用户名的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:49:57.430

这是我用来以 os 身份验证用户身份登录的脚本。请注意初始化设置“os_authent_prefix”。如果它设置为“OPS$”并且您想保持这种状态，则必须修改脚本，以便您创建的用户名以“OPS$”为前缀。

祝你好运！

```
--------------------------------------------------------------------------------
-- name:    create_os_user.sql
-- purpose:
-- author:  Bjarte Brandt
-- date:    25.10.2010
-- remarks:
--   alter system set os_authent_prefix='' scope=spfile;
--------------------------------------------------------------------------------
set ver off

prompt parameter OS_AUTHENT_PREFIX has to be empty.
prompt

show parameter os_authent_prefix

set term off

column col noprint new_value os_user
select upper(SYS_CONTEXT('USERENV','OS_USER')) col from dual;

set term on

prompt
prompt Create user: "&os_user"
create user "&os_user" identified externally;
grant dba to "&os_user";

set ver on 
```

# c# - C# WCF REST 客户端 JSON 数组

> ID：14514063
> 
> 赞同：0
> 
> 时间：2013-01-25T01:48:40.910
> 
> 标签：c#, json, wcf

此处的示例 (http://stackoverflow.com/questions/835839/client-configuration-to-consume-wcf-json-web-service) 简单明了。我创建了一个返回简单对象数组的 WCF RESTFUL JSON 服务。在 JavaScript 中，我可以毫无问题地处理返回的内容，因此我的 Web 客户端可以正常工作。

我想让这个服务可以从 Web 或 C# 客户端调用，以便公开的数据可以在多个上下文中使用，而不必复制获取数据的代码。

在我的 C# 代码中，我有代理客户端、接口协定和基于配置的绑定定义。我在我的 C# 服务和我的 C# 客户端（用作测试验证工具的简单控制台应用程序）之间共享接口和数据代码模块。

在 C# 客户端上，非数组形式的数据很好地返回。一旦我让我的服务返回一个对象数组，无论是作为裸数组返回还是作为简单对象上的包装属性，客户端的序列化程序都会静默失败并返回一个空数组。

这是我在顶层的客户代码

```
 // for managed code to call our Ajax/Json incident service, we need to reuse the interface contract, 
 // and use the ServiceModel.Channels infra to hand-code a proxy client.
 public class IncidentClient : ClientBase<IIncidentServices.IGetActiveIncidents>, IIncidentServices.IGetActiveIncidents
 {
    public incidents GetActiveIncidents(string environmentAbbreviation)
    {
        return base.Channel.GetActiveIncidents(environmentAbbreviation);
    }
 }

 class Program
 {
    static void Main(string[] args)
    {

        IncidentClient client = new IncidentClient();

        incidents data = client.GetActiveIncidents("prod");
        Console.Write("Call to GetActiveIncidents returned ");
        if (null == data)
        {
            Console.WriteLine("no data (null)");
        }
        else
        {
            Console.WriteLine(data.incidentList.Count.ToString() + " rows of incident data.");
        }
        Console.WriteLine("\nPress any key to continue...");
        Console.ReadLine();
    }
 }
} 
```

当代码运行时，它总是告诉我有零行，并且调试器向我显示一个空数组返回。我通过激活日志记录跟踪到与 WCF 跟踪工具交换的消息，并且我可以看到我的数据返回（数组中的 100 个元素。

棘手的部分是序列化程序只是默默地丢弃数据 - 这让我想知道我是否应该放弃基于 WCF clientBase 的代理并使用原始 HTTP get，以及一个单独的 JSON 解析器来处理数据。

我的数据合约如下所示：

```
using System;
using System.Collections.Generic;
using System.Runtime.Serialization;

namespace Dan.Test.Incident.Data
{

[DataContract(Name="incidents", Namespace="Dan.Test.Incident.Data")]
public class incidents
{
    public incidents()
    {
            data = new List<incidentData>();
    }

    [DataMember(Name="incidentList")]
    private List<incidentData> data;

    [IgnoreDataMember]
    public List<incidentData> incidentList
    {
        get {
            if (null == data)
            {
                data = new List<incidentData>();
            }
            return data;
        }
    }
}

[DataContract(Name="incidentData", Namespace="Dan.Test.Incident.Data")]
[Serializable]
public class incidentData
{
    // define incident members and accessors for read-only get operations

    [DataMember(Name = "irNumber")]
    private string m_irNumber = null;       // the incident identifier as IR12345, etc.

    [DataMember(Name = "title")]
    private string m_title = null;          // the title of the incident

    [DataMember(Name = "devname")]
    private string m_devname = null;      // list of team members who were engaged

    [DataMember(Name = "description")]
    private string m_description = null;    // description of the incident

    [DataMember(Name = "startdate")]
    private DateTime m_startdate;

    [DataMember(Name = "priority")]
    private int m_priority = 0;

    [DataMember(Name = "environmentID")]
    private int m_environmentID = 0;

    [DataMember(Name = "status")]
    private string m_status;

    [DataMember(Name = "enddate")]
    private DateTime m_enddate;

    public incidentData()
    {
    }
}
} 
```

我的接口定义是

```
using Dan.Test.Incident.Data;
using System.Collections.Generic;
using System.ServiceModel;
using System.ServiceModel.Web;

namespace IIncidentServices
{
[ServiceContract(Namespace = "Dan.Test.Incident.Data")]
public interface IGetActiveIncidents
{
    [OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
    incidents GetActiveIncidents(string environmentAbbreviation);
}
} 
```

我的配置很简单：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.diagnostics>
    <sources>
        <source name="System.ServiceModel.MessageLogging" switchValue="Error,ActivityTracing">
            <listeners>
                <add type="System.Diagnostics.DefaultTraceListener" name="Default">
                    <filter type="" />
                </add>
                <add name="ServiceModelMessageLoggingListener">
                    <filter type="" />
                </add>
            </listeners>
        </source>
        <source propagateActivity="true" name="System.ServiceModel" switchValue="Verbose,ActivityTracing">
            <listeners>
                <add type="System.Diagnostics.DefaultTraceListener" name="Default">
                    <filter type="" />
                </add>
                <add name="ServiceModelTraceListener">
                    <filter type="" />
                </add>
            </listeners>
        </source>
    </sources>
    <sharedListeners>
        <add initializeData="c:\users\danro\documents\visual studio 2012\projects\gadgetactiveincidentservice\consoleapplication1\app_messages.svclog"
            type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
            name="ServiceModelMessageLoggingListener" traceOutputOptions="Timestamp">
            <filter type="" />
        </add>
        <add initializeData="c:\users\danro\documents\visual studio 2012\projects\gadgetactiveincidentservice\consoleapplication1\app_tracelog.svclog"
            type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
            name="ServiceModelTraceListener" traceOutputOptions="Timestamp">
            <filter type="" />
        </add>
    </sharedListeners>
</system.diagnostics>
<startup> 
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
</startup>
<system.serviceModel>
<diagnostics>
  <messageLogging logEntireMessage="true" logMalformedMessages="true"
    logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true"
    maxMessagesToLog="3000" maxSizeOfMessageToLog="100000" />
  <endToEndTracing messageFlowTracing="true" />
</diagnostics>
<bindings>
  <webHttpBinding>
    <binding name="NewBinding2" openTimeout="00:05:00" receiveTimeout="00:50:00"
      sendTimeout="00:05:00" hostNameComparisonMode="WeakWildcard"
      maxBufferSize="2000000" maxBufferPoolSize="2000000" maxReceivedMessageSize="2000000"
      useDefaultWebProxy="false" contentTypeMapper="">
      <readerQuotas maxDepth="32" maxStringContentLength="100000" maxArrayLength="10000"
        maxBytesPerRead="2000000" maxNameTableCharCount="100000" />
    </binding>
  </webHttpBinding>
</bindings>
<behaviors>
  <endpointBehaviors>
    <behavior name="webwcf">
      <webHttp defaultBodyStyle="WrappedRequest" defaultOutgoingResponseFormat="Json" 
        automaticFormatSelectionEnabled="true" faultExceptionEnabled="true" />
    </behavior>
  </endpointBehaviors>
</behaviors>
<client>
  <endpoint address="http://localhost/GadgetActiveIncidentService/ActiveIncidentService.svc"
    behaviorConfiguration="webwcf" binding="webHttpBinding" bindingConfiguration="NewBinding2"
    contract="IIncidentServices.IGetActiveIncidents" name="ActiveIncidentService" />
</client>
</system.serviceModel>
</configuration> 
```

查看我的数据，这是返回的一小段内容 - 唯一看起来很奇怪的是数据中的 [d] __type 行......

```
{"d":[{"__type":"incidentData:Dan.Test.Incident.Data",
"description":"My description","devname":"",
"enddate":"\/Date(1357995120000-0800)\/",
"environmentID":10,"irNumber":"IR742989","priority":1,
"startdate":"\/Date(1357973873643-0800)\/",
"status":"closed","title":"A subset of users "},
{"__type":"incidentData:Dan.Test.Incident.Data","description":"second description.",
"devname":"","enddate":"\/Date(1352871180000-0800)\/",
"environmentID":10,"irNumber":"IR595320","priority":2,
"startdate":"\/Date(1352758680000-0800)\/",
"status":"This incident has been downgraded.",
"title":"Users will be unable to upgrade"}]} 
```

希望这里的人可以阐明我需要做些什么来完成这项工作:)

提前致谢

担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T22:35:18.163

WCF 有两种开箱即用的行为来启用 JSON 数据：（`WebScriptEnablingBehavior`或`<enableWebScript/>`，如果通过配置）和`WebHttpBehavior`（等效于`<webHttp/>`）。前者在您使用 ASP.NET AJAX 框架时使用，它在 JS 中为您提供了一个知道如何与服务对话的“代理”。后者用于更通用的 JSON 通信（比 Web 脚本的开销更少）。

根据您的评论，您使用的是第一个。该行为基于 ASP.NET AJAX 框架的要求，必须将响应包装在一个对象（`{"d":...}`您所看到的）中，IIRC 以防止某种 JS 原型劫持数组。因此，如果您想使用来自此类端点的 JSON，您需要“解包”响应，将“d”带走，或者使用实际理解它的行为。

如果您想使用“常规”HTTP 客户端使用服务，然后使用 JSON 序列化程序对响应进行反序列化，最简单的做法是简单地创建一个包装类，然后将该类作为序列化程序，而不是 Incidents 类。如果你只有一个（或几个）类，这是一个简单的解决方案，但如果你有很多，它可能会成为维护问题。

如果要使用基于 WCF 的客户端使用服务，则需要确保使用与服务中使用的行为相同的行为 - WebScriptEnablingBehavior，而不是更常见的 WebHttpBehavior。这也将起作用。

如果您拥有该服务，还有另一种选择。您可以添加另一个端点，这一次使用 WebHttpBehavior，它将返回没有包装“d”的数据。有了它，您应该能够直接使用 HTTP 客户端和反序列化器。

下面的代码显示了前两种选择。

```
public class Post_e5cb2f0a_717d_4255_9142_7c9f7995fa4f
{
    [ServiceContract]
    public interface IGetActiveIncidents
    {
        [OperationContract]
        [WebGet(ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.WrappedRequest)]
        Incidents GetActiveIncidents(string environmentAbbreviation);
    }
    [CollectionDataContract]
    public class Incidents : List<IncidentData>
    {
        public Incidents() { }
        public Incidents(List<IncidentData> incidents) : base(incidents) { }
    }
    public class Service : IGetActiveIncidents
    {
        public Incidents GetActiveIncidents(string environmentAbbreviation)
        {
            Incidents incidents = new Incidents();
            incidents.Add(new IncidentData(
                "IR12345", "Title", "dev engaged", "description", DateTime.UtcNow, 1, 10, "status", DateTime.UtcNow + new TimeSpan(1, 0, 0, 0)));
            return incidents;
        }
    }
    [DataContract]
    public class IncidentData
    {
        public IncidentData(string irNumber, string title, string devName, string description, DateTime startDate, int priority, int envId, string status, DateTime endDate)
        {
            m_irNumber = irNumber;
            m_title = title;
            m_devname = devName;
            m_description = description;
            m_startdate = startDate;
            m_priority = priority;
            m_environmentID = envId;
            m_status = status;
            m_enddate = endDate;
        }

        [DataMember(Name = "irNumber")]
        private string m_irNumber = null;

        [DataMember(Name = "title")]
        private string m_title = null;

        [DataMember(Name = "devname")]
        private string m_devname = null;

        [DataMember(Name = "description")]
        private string m_description = null;

        [DataMember(Name = "startdate")]
        private DateTime m_startdate;

        [DataMember(Name = "priority")]
        private int m_priority = 0;

        [DataMember(Name = "environmentID")]
        private int m_environmentID = 0;

        [DataMember(Name = "status")]
        private string m_status;

        [DataMember(Name = "enddate")]
        private DateTime m_enddate;

        public IncidentData()
        {
        }
    }
    [DataContract]
    class IncidentWrapper
    {
        [DataMember(Name = "d")]
        public Incidents Incidents { get; set; }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        var endpoint = host.AddServiceEndpoint(typeof(IGetActiveIncidents), new WebHttpBinding(), "");
        endpoint.Behaviors.Add(new WebScriptEnablingBehavior());
        host.Open();
        Console.WriteLine("Host opened");

        //Using a "normal" HTTP client
        WebClient c = new WebClient();
        byte[] data = c.DownloadData(baseAddress + "/GetActiveIncidents?environmentAbbreviation=dd");
        MemoryStream ms = new MemoryStream(data);
        DataContractJsonSerializer dcjs = new DataContractJsonSerializer(typeof(IncidentWrapper));
        IncidentWrapper wrapper = (IncidentWrapper)dcjs.ReadObject(ms);
        Console.WriteLine("Using HttpClient/DCJS: {0}", wrapper.Incidents.Count);

        // Using a WCF client (with WebScriptEnablingBehavior
        ChannelFactory<IGetActiveIncidents> factory = new ChannelFactory<IGetActiveIncidents>(new WebHttpBinding(), new EndpointAddress(baseAddress));
        factory.Endpoint.Behaviors.Add(new WebScriptEnablingBehavior());
        IGetActiveIncidents proxy = factory.CreateChannel();

        Console.WriteLine("Using WCF client (with WSEB): {0}", proxy.GetActiveIncidents("dd").Count);
    }
} 
```

# r - R中的多个SVM模型

> ID：14514065
> 
> 赞同：0
> 
> 时间：2013-01-25T01:49:08.437
> 
> 标签：r, svm, statistics

我需要一些帮助来管理 R 中的多个 SVM 模型。我有大约 100 个数据文件，我想读取每个文件，然后使用 e1071 包为该文件训练一个模型。所有文件的名称都包含在一个文件中，因此更容易跟踪每个文件。我使用了以下代码，但无法找到解决方案。

```
x<-read.table("data.dat", header=F)
x=as.vector(t(x))
vectory <- vector(mode="list", length=length(x))
vectorz <- vector(mode="list", length=length(x))

for (i in 1:length(x))
{
x[i] <- substr(x[i], 3, 100)
#assign(gsub("-", "_", x[i]), read.table(x[i], header=T, #sep=","))
val <- gsub("-", "_", x[i])
vectory[[val]] <- read.table(x[i], header=T, sep=",")
data(vectory[[val]])
valmodel <- x[i]
paste(valmodel, "_model", sep="")
vectorz[[valmodel]] <- ksvm(label ~ ., data=vectory[[val]])
} 
```

在调用 ksvm 函数时，我对数据函数调用和数据参数到底需要做什么感到困惑。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:47:24.933

正如斯科特所提到的，您的示例不可重现（并且问题并没有说明您的问题是什么）。我重写了您的代码，以减少混乱。它未经测试，因此您可能需要对其进行调整。

```
file_names <- read.table("data.dat")[[1]]
file_names <- substring(file_names, 3)
file_names <- gsub("-", "_", file_names)
training_data <- lapply(
  file_names,
  read.table,
  header = TRUE,
  sep    = ", "
)
svm_models <- lapply(
  training_data,
  function(data)
  {
    ksvm(label ~ ., data = data)
  }
) 
```

一般原则：

有意义地命名你的变量。调用文件名`file_names`，而不是`x`.

如果您在列表（或向量）上循环，请使用`lapply`（或`llply`from `plyr`），而不是使用`for`循环，因为这涉及额外的样板代码和创建虚拟变量。注意你是如何不需要`vectory`或`vectorz`不再需要的。

将读取数据的代码与运行模型的代码分开。它们是不同的任务，把代码混在一起会混淆你的思维。（此外，当一个模型失败时，您不希望再次读取数据。）

# php - PHP：如何使用 fputcsv 在 csv 文件的顶部新添加一行？

> ID：14514069
> 
> 赞同：1
> 
> 时间：2013-01-25T01:49:30.713
> 
> 标签：php, fputcsv

我想如何在 csv 文件的顶部添加一个新行，因为在我的 csv 文件输出中填充了来自数据库的数据，我想要发生的是我想为每种类型的数据添加相应的列名。

这是我现在的代码：

```
 <?php
include 'database.php';
$db = new database();

$data = $db->exportdatabase();

$file = fopen('php://output', 'w');
foreach ($data as $items)
{
    fputcsv($file, $items, ',');
}

header('Content-Description: File Transfer');
header("Content-Type: application/csv") ;
header("Content-Disposition: attachment; filename=data.csv");
header("Expires: 0");
fclose($file);
exit;
?> 
```

这是我的 csv 数据看起来像

[图片](http://img89.imageshack.us/img89/2546/12641493y.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:58:44.687

您可以在 foreach 设置列名之前尝试

或者使用`fseek`函数

```
fseek($file, 0);
fputcsv($file, $titles, ','); 
```

[fseek](http://php.net/manual/en/function.fseek.php)查找文件指针

# windows - 试图在 Windows 机器上编辑主机文件，试图找出它的位置？

> ID：14514070
> 
> 赞同：0
> 
> 时间：2013-01-25T01:49:31.213
> 
> 标签：windows, host

尝试在我的 Windows 7 机器上编辑主机文件，似乎无法在系统 32 文件夹中找到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:51:25.023

它位于

```
C:\Windows\System32\Drivers\etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T01:57:43.223

该`hosts`文件位于以下`%WINDIR%\system32\drivers\etc`文件夹中：

通常`c:\windows\system32\drivers\etc`.

这适用于自 Windows XP 以来的每个 Windows 版本，无论是 32 位还是 64 位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-23T15:41:17.527

您可能将 Windows 资源管理器文件夹选项设置为“不显示隐藏的文件、文件夹或驱动器”，这会阻止您查看主机文件。

要解决这个问题并显示隐藏文件，请执行以下操作：

1.  打开 Windows 资源管理器。如果看不到，请单击“Alt”按钮以调出“文件”菜单。单击“工具”，然后单击“文件夹选项...”
2.  单击“查看”选项卡并启用单选按钮“显示隐藏的文件、文件夹和驱动器”

![文件夹选项](../Images/af8192817e1cb95218ff37f45db3f57f.png)

之后快速浏览到该位置：开始-> 运行-> %systemroot%\system32\drivers\etc\

![主机文件](../Images/d7d72d452929ec0a0eb96cffabf64062.png)

以管理员身份运行文件编辑器以更改主机文件

![在此处输入图像描述](../Images/83f068f0bc65c3a718efbbbd0fd52696.png)

# php - 如何从php中动态拆分和删除字符串和数字

> ID：14514071
> 
> 赞同：1
> 
> 时间：2013-01-25T01:49:35.313
> 
> 标签：php

嗨，我有一个双引号内有一些数字的 json 字符串：如何拆分它并获得准确的 json 字符串。

```
 $json = "0498[{key:value},{key:value}]" 
```

这很简单，但是在尝试时:(

```
<?php
preg_split('#(?<=\d)(?=[a-z])#i', "0498[{key:value},{key:value}]")
?> 
```

但我的问题是 json 的整数附加是动态的，它会随着时间的推移而改变，所以我该如何拆分它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:50:53.543

```
$json = preg_replace('~^\d*~', '', '0498[{key:value},{key:value}]');
var_dump($json); 
```

# ruby-on-rails - Rails：controller#show link_to root_path 或 :back 的逻辑

> ID：14514077
> 
> 赞同：2
> 
> 时间：2013-01-25T01:50:27.607
> 
> 标签：ruby-on-rails, back, link-to, referrer

如何设置 Controller#show layouts "OK" 按钮，以便`link_to root_path`在用户通过`new`>`create`操作时将其设置

*但*

如果用户正在查看现有资源的列表（实际上是索引），然后单击一个以查看 Controller#show（详细信息），那么“确定”按钮现在会将它们带回上一页（索引）吗？

我正在使用`store_location`和`redirect_back_or(default)`辅助方法来处理`login_required`某些控制器（包括这个控制器）。可以采用这种方法来解决我上面的问题吗？或者，还有更好的方法？

简而言之，我认为按钮想要，`link_to "OK", :back`除非之前的操作是创建（或登录）操作。

我认为我们不需要涉及，`session`因为链接不需要持续存在。如果它来自索引，那只是一回事，如果它来自 create 或 (sign_in)，那只是另一回事......只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T02:01:13.543

因此，在`new`>`create`操作中，用户被重定向到`Controller#Show`. 您可以只传递一个参数。例如，您可以将您的修改`redirect_to`为以下内容：

```
<%= redirect_to show_path(:param1 => "true") %> 
```

然后在您的`#Show`页面中，您可以检查

```
<% if !params[:param1].nil? and params[:param1] == true %>
     <%= link_to "OK", root_path %>
<% else %>
     <%= link_to "OK", :back %>
<% end %> 
```

# .net - 客户端使用使用 Entity Framework 4 连接到 Oracle 11.2.0.3.20 的程序需要安装的最低要求是多少？

> ID：14514082
> 
> 赞同：0
> 
> 时间：2013-01-25T01:50:55.997
> 
> 标签：.net, oracle, oracle11g, installation, entity

我已经完成了一些 DLL，它们是项目的一部分，将安装在我们公司的客户端机器上。这些 DLL 在 .NET 4.0 上编译，并使用 Entity Framework 4 连接 Oracle DB 并在正常处理期间检索数据。我开发和测试 DLL 的机器上安装了 ODAC 11.2.0.3.20，我使用 ODP.NET 和 Oracle Developer Tools for Visual Studio 完成了所有工作。

现在，我想知道的是：**我需要在客户端机器上安装以使其正常工作的最低 Oracle“东西”是什么，我在哪里可以找到这些“东西”？**我不是在问如何处理所有 .NET 依赖项和其他类型的东西，我非常熟悉我需要做什么才能让其他一切正常工作。我只需要 Oracle 方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:07:47.853

您在 .net 项目中引用的托管 Oracle.DataAccess.dll 程序集是 oracle 客户端的一小部分，它是一堆非托管二进制文件。通过多种方法（注册表、oracle_home 环境变量、dllpath 配置参数），托管 dll 搜索客户端安装使用。我知道的最小的客户端足迹是 xcopy 安装，其中包括“即时客户端”： [http ://www.oracle.com/technetwork/database/windows/downloads/utilsoft-087491.html](http://www.oracle.com/technetwork/database/windows/downloads/utilsoft-087491.html)

您可以在此处找到安装指南： [http](http://www.brothersincode.com/post/Oracle-ODPnet-xcopy-deployment-for-aspnet.aspx) ://www.brothersincode.com/post/Oracle-ODPnet-xcopy-deployment-for-aspnet.aspx （为 .net 客户端应用程序安装它与安装它没有太大区别对于一个 asp.net 服务器。

将来，考虑采用 wcf 服务形式的物理中间层。虽然您会失去一些直接查询功能，但您会消除在每台机器上安装 oracle 客户端的麻烦。RIA 服务可能是最重要的一个选项：http: [//msdn.microsoft.com/en-us/library/ee707344 (VS.91).aspx](http://msdn.microsoft.com/en-us/library/ee707344(VS.91).aspx)

# r - “叠加”R中的计数表和百分比表

> ID：14514083
> 
> 赞同：2
> 
> 时间：2013-01-25T01:51:08.503
> 
> 标签：r, frequency

下面的脚本说明了我的问题：

```
library(reshape2)

set.seed(1)
dummy.df <- data.frame(var_a=sample(letters[1:5],200,replace=TRUE),
                       var_b=sample(1:5,200,replace=TRUE),
                       stringsAsFactors=FALSE)

temp1 <- addmargins(table(dummy.df[,c("var_a","var_b")]),1)
temp2 <- formatC(addmargins(prop.table(table(dummy.df[,c("var_a","var_b")]),2),1)*100,digits=2,format="f")

temp1.melt <- melt(temp1,id.vars="var_a")
temp2.melt <- melt(temp2,id.vars="var_a")

temp.output <- merge(temp1.melt,temp2.melt,by=c("var_a","var_b"))
temp.output[,"value"] <- paste(temp.output[,"value.x"]," (",temp.output[,"value.y"],"%)",sep="")
temp.output[,"var_a"] <- factor(temp.output[,"var_a"],levels=c("a","b","c","d","e","Sum"))
temp.output <- dcast(temp.output,formula=var_a~var_b,value.var="value") 
```

我在办公室的一项日常工作是创建列出不同变量之间频率的表格，通常我也会在表格中包含百分比（行/列百分比）。

在我知道函数`addmargins`,`prop.table`和之前`as.data.frame.matrix`，我使用了很多`melt`和`dcast`from`reshape2`包来解决问题（即将表格转换为数据框，`melt`然后进行适当的除法以给出百分比`dcast`）。现在我知道使用三个新的学习函数可以为我节省很多代码。

现在我想知道这是否可以提前一步，而不使用我上面提供的脚本，并创建一个在实际计数旁边显示行/列百分比的表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:25:26.683

如果列数为 N，则这需要两个表并重新排列。既然您已经弄清楚了列的重命名，我不会对此感到厌烦：

```
 temp12 <- cbind(temp1, temp2)
stopifnot( ncol(temp1) == ncol(temp2))
data.frame( var_a=rownames(temp1), temp12[ ,c(t(matrix(1:10, 5,2))) ] )
#----- 
    var_a X1   X1.1 X2   X2.1 X3   X3.1 X4   X4.1 X5   X5.1
a       a  7  15.22  9  18.75  7  17.07  4  14.29  2   5.41
b       b 13  28.26 12  25.00  6  14.63  5  17.86  9  24.32
c       c  9  19.57  9  18.75  9  21.95  3  10.71 13  35.14
d       d  9  19.57  9  18.75  8  19.51 12  42.86 10  27.03
e       e  8  17.39  9  18.75 11  26.83  4  14.29  3   8.11
Sum   Sum 46 100.00 48 100.00 41 100.00 28 100.00 37 100.00 
```

（您可以使用相同的矩阵转置技巧从两个附加的构造列名向量中进行选择。）

# makefile - 制作：*** 多个目标图案。停止

> ID：14514086
> 
> 赞同：2
> 
> 时间：2013-01-25T01:51:12.973
> 
> 标签：makefile, cygwin, eclipse-cdt

我目前正在使用 Eclipse Juno 以及 CDT 和 Cygwin C++ 开发一个介绍性 C++ 项目。我正在使用 MVC 架构，并且刚刚获得了可以运行可执行文件并查看一些结果的代码。当我构建应用程序时，编译器不会抛出任何错误；但是，当我通过 Eclipse 运行应用程序时，应用程序会重新构建并显示以下错误：

```
make: *** multiple target patterns.  Stop.  GasFinderTUI.d KyleGasStationFinder/Debug/src/View  line 1  C/C++ Problem 
```

这是该文件中的代码：

```
src/Controller/GasFinderController.d src/Controller/GasFinderController.o:  \
 ../src/Controller/GasFinderController.cpp \
  ../src/Controller/GasFinderController.h \
  C:/Users/Kyle/Dropbox/Workbench/KyleGasStationFinder/src/Model/LocalGasStations.h \
  C:/Users/Kyle/Dropbox/Workbench/KyleGasStationFinder/src/Model/GasStation.h \
  C:/Users/Kyle/Dropbox/Workbench/KyleGasStationFinder/src/Model/GasPump.h \
  C:/Users/Kyle/Dropbox/Workbench/KyleGasStationFinder/src/Model/Utilities.h

../src/Controller/GasFinderController.h:

C:/Users/Kyle/Dropbox/Workbench/KyleGasStationFinder/src/Model/LocalGasStations.h:

C:/Users/Kyle/Dropbox/Workbench/KyleGasStationFinder/src/Model/GasStation.h:

C:/Users/Kyle/Dropbox/Workbench/KyleGasStationFinder/src/Model/GasPump.h:

C:/Users/Kyle/Dropbox/Workbench/KyleGasStationFinder/src/Model/Utilities.h: 
```

我已经尝试清理和重建，而不使用 run 功能，并且应用程序构建得很干净。我还在没有 Eclipse 的情况下运行了实际的 .exe 文件，并且应用程序按预期运行。尽管与 Eclipse 分开运行应用程序是一种可接受的替代方案，但我将在不久的将来用 C++ 编写几个应用程序，并且希望能够从 Eclipse 中执行。这些应用程序也将使用 Eclipse 进行检查和评分，我相信我的导师也会喜欢这种便利。

我看过[这个问题](https://stackoverflow.com/questions/2401976/very-simple-application-fails-with-multiple-target-patterns-from-eclipse)，它建议将 C:/ 更改为相对路径名或 /cygwin/c/。我的其他 .d 文件以及我的包含路径使用相对路径，这些文件没有问题。尽管我相信这两种解决方案都可以工作，但每次编译都会重新创建 .d 文件。我所做的所有更改都已在每次构建时被覆盖。

Eclipse 和/或 Cygwin C++ 是否包含任何可能允许我防止这种并发症在未来发生的设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T00:06:40.983

我发现我可以在 Eclipse 中运行该项目，前提是我在每次运行之前手动清理它。此外，如果我在每次构建之前手动清理它，构建就会成功。提交此作业后，我将考虑创建用于编译的自定义脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-02T03:59:29.913

使用外部“Gnu Make”构建器时，您还可以删除“多个目标模式”错误。我将 Eclipse Kepler 与 CDT 8.3.0 一起使用，并执行了以下操作：

1.  在所有构建配置的包含路径中，即在项目属性 | C/C++ 构建 | 设置 | Cygwin C [或 C++] 编译器 | 包括，
2.  放置每个所需包含路径的 2 个版本，Cygwin 样式后跟 Windows 样式，例如
    /cygdrive/d/cygwin64/usr/share/whatever/include
    D:/cygwin64/usr/share/whatever/include
3.  这会导致每个构建配置的源目录中的依赖文件 (*.d) 使用依赖项中的 Cygwin 样式路径，从而消除上述错误，因为这些文件中的冒号“：”字符导致它，如@andrewdotn 说。
4.  这也允许 CDT 在 C/C++ 源文件中查找包含文件，因为它通常在搜索 Windows 样式的包含路径时找到它们（注意：我使用 Cygwin 作为我的构建工具链，而不是 MinGW）。

我意识到上述内容特定于特定的工具链设置，但至少它提供了一种可能的替代方法来让托管的 Make 项目正常工作。

顺便说一下，这是我在 StackOverflow 上的第一篇文章，所以如果我犯了任何礼仪错误，那都是无意的 :)

# jquery - 禁用提交按钮

> ID：14514087
> 
> 赞同：0
> 
> 时间：2013-01-25T01:51:13.400
> 
> 标签：jquery

我有几个数组复选框，1个提交按钮和1个下拉菜单，当检查1个或许多复选框时，如何禁用/启用此提交按钮和下拉菜单。当此提交按钮被禁用并且用户单击它时，会出现对话框告诉未选中复选框

像这样的东西：http: [//jsfiddle.net/frantic912/3YbZu/](http://jsfiddle.net/frantic912/3YbZu/)

```
setButton(buttonGroup) {
    var retArr = new Array();
    if (buttonGroup[0]) {
        for (var i = 0; i < buttonGroup.length; i++) {
            if (buttonGroup[i].checked) {
                document.frm_search.send.disabled = true;
                alert('Please check the first checkbox!');
            }
        }
    }
}

<form  method="post" name="frm_search">
    <table>
        <tr>  
            <td align="center">
                <input type="checkbox" name="appr[]" id="appr" value="<?php echo $row['userID']; ?>" onclick="setButton(this);"/>
            </td>
        </tr>
        <tr>
            <td>bla bla bla</td>
        </tr>
        <tr>
            <td>
                <select name="slct_appr" id="slct_appr" >
                    <option value="1">-- Please Choose --</option>
            <option value="2">Approve</option>
                    <option value="3">None</option>
                </select>
            </td>
      </tr>
      <tr>
          <td align="center">
              <input name="submit" class="submit" id="send" type="submit"  value="send" />
              <input name="txt_action" type="hidden" id="txt_action" value="frm_add_submit" />
          </td>
      </tr>
    </table>
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:47:05.403

尝试下面的代码来启用/禁用按钮和下拉菜单。

复选框选中事件。

```
<script> 
function apply(buttonGroup) 
{
    var retArr = new Array();

    if($("#appr:checked").length > 0)
    {
        $('#send').attr('disabled',true);
        $('#slct_appr').attr('disabled',true);
    }

    if($("#appr:checked").length == 0)
    {
        $('#send').attr('disabled',false);
        $('#slct_appr').attr('disabled',false);
    }
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:07:52.803

这对于 jQuery 来说非常简单。我在整个代码中添加了不言自明的注释。

[http://jsfiddle.net/Ljef5/](http://jsfiddle.net/Ljef5/)

```
//monitor inputs of type checkbox for a change
$('input[type=checkbox]').change( function() {
    //how many checkboxes are now checked?
    var numChecked = $("input[type=checkbox]:checked").length;
    if (numChecked == 0) { 
        //disable the send button
        $('#send').prop('disabled', 'disabled'); 
    }
    else {
        //enable the send button
        $('#send').prop('disabled', ''); 
    }
});

//watch for when the form is submitted
$('form').submit(function() {
    var numChecked = $("input[type=checkbox]:checked").length;
    if (numChecked == 0) {
        //warn user that no checkboxes are checked
        alert('Tick a checkbox!');
        //prevent form submission
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:20:25.437

据我了解，您的要求是这样的。请检查**[演示](http://jsfiddle.net/3YbZu/5/)**，让我知道它是否适合您。

**描述**

```
 $( "input[type=checkbox]" ).on( "click",function(){
    var n = $( "input:checked" ).length;
    if(n > 0){
        $("#send, #slct_lulus").attr("disabled",false)
        return true;
        $("#frm_submit").submit();
    }
    else{
        alert('Please Tick a checkbox!');
        //prevent form submission
        $("#send, #slct_lulus").attr("disabled",true)

    }
}); 
```

在上面的代码中，每次点击我都会检查复选框的长度，如果它大于 0，那么我们允许提交来自，否则我们不允许提交来自并同时禁用提交按钮。

HTML标记几乎没有变化，就像这样

```
<td><select name="slct_lulus" id="slct_lulus" disabled=true>
                <option value="1">-- Please Choose --</option>
                <option value="2">Approve</option>
                <option value="3">None</option>
                </select></td>
    <td><input name="submit" id="send" type="submit" disabled=true  value="Send" /></td> 
```

在页面加载时，我禁用了初始页面提交的选择框和按钮。

# asp.net - 动态 DropDownList 设置 Selected = true

> ID：14514089
> 
> 赞同：0
> 
> 时间：2013-01-25T01:51:20.900
> 
> 标签：asp.net, drop-down-menu

```
<asp:DropDownList ID="ddlOptionDependant" runat="server" AutoPostBack="True" 
  DataSourceID="sdsOptionDependant" DataTextField="product_option_name" 
  DataValueField="product_option_id" AppendDataBoundItems="True">
  <asp:ListItem Value="0" Text="None"></asp:ListItem>
</asp:DropDownList> 
```

这个 DropDownList 是从 Query 构建的，我需要动态检查 product_option_id 并且当我找到与 selected= true 匹配的匹配集时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:40:59.183

您可以使用 DropDownList 的 DataBound 事件来实现。这是一个示例。在您的 aspx 页面中，您需要像这样添加 OnDataBound 属性：

```
<asp:DropDownList ID="ddlOptionDependant" runat="server" AutoPostBack="True" 
    DataSourceID="sdsOptionDependant" DataTextField="product_option_name" 
    DataValueField="product_option_id" AppendDataBoundItems="True" 
    OnDataBound="ddlOptionDependant_DataBound">
    <asp:ListItem Value="0" Text="None"></asp:ListItem>
    </asp:DropDownList>
</asp:Content> 
```

在你后面的代码中添加这个：

```
protected void ddlOptionDependant_DataBound(object sender, EventArgs e)
{
    //Get the value of the ID you want to match here:
    int someId = 1;
    foreach(ListItem item in ddlOptionDependant.Items)
            item.Selected = item.Value == someId.ToString();
} 
```

希望这可以帮助你

# cygwin - 编写 perl 脚本以将扩展名为 .ext 的文件名复制到列表中

> ID：14514092
> 
> 赞同：0
> 
> 时间：2013-01-25T01:51:31.327
> 
> 标签：cygwin

我需要搜索目录中的所有文件`C:\vehicles`。我想打开每个文件并复制包含以下任何单词的整行`make`：`model`或`year`.

这就是我所拥有的，但它不起作用。我对这一切还是陌生的。

`$ grep -rE pattern"(make|model|year)" cygdrive/c/vehicles/`

非常感谢您的帮助，因为如果我明天不弄清楚，我将不得不手动完成所有事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:13:35.843

试试这个：

```
grep -rE "make\|model\|year" /Directory/To/Search/ > /Path/To/file_to_save_in.txt 
```

> 会将输出（即匹配行）定向到指定文件。或者，如果您想先对其进行测试，然后将输出定向到命令行：

```
grep -rE "make\|model\|year" /Directory/To/Search/ 
```

# javascript - 如何将动态 javascript 代码注入父页面上已存在的 iframe

> ID：14514099
> 
> 赞同：0
> 
> 时间：2013-01-25T01:52:24.183
> 
> 标签：javascript, jquery, iframe, dynamic, inject

我正在尝试将代码注入 iframe，但我没有任何运气，我不知道为什么。我将我的 js 代码存储到一个变量中，该变量此时可以正常工作，存储到一个名为 pixel_code 的变量中。然后我想将该代码注入 iframe。假设 iframe 的 id 是“iframe_”，我将如何将代码（变量是 pixel_code）注入 iframe 并执行它？我认为 jquery 将是最简单的方法，但我也对常规 JS 持开放态度。

我的许多不成功的尝试之一是：

```
function captureValue(){

pixel_code = document.getElementById("baseText").value;

$('#iframe_').find('body').append(pixel_code);

} 
```

控制台中不会产生任何错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T01:55:40.200

尝试使用`contents`方法：

```
$('#iframe_').contents().find('body').append(pixel_code); 
```

请注意，iframe 的域应与父页面的域匹配，否则 [同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)会阻止访问 iframe 的内容。

# ios - 通过视图控制器访问特定标签

> ID：14514100
> 
> 赞同：0
> 
> 时间：2013-01-25T01:52:42.773
> 
> 标签：ios, interface-builder, uistoryboard

我对 iOS 开发中的工作方式有点困惑。我的故事板中有一个标签，我想在我的视图控制器中访问它。现在，我想我将创建一个属性并访问标签。我的问题是如何创建视图和控制器之间的链接？如果我在情节提要的视图中已经有很多标签，我如何指定它是我想要控制的这个特定标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:00:52.203

尝试这个：

打开你的故事板。单击您的视图控制器。现在单击 xcode 右上角的中间图标，该图标看起来像一个名为 Editor 的“脸”（带有领结眼睛）。这应该会打开您的 ViewController 的 .h 文件。现在右键单击您的标签，然后打开弹出窗口，单击“新引用插座”上的圆圈图标并将其拖到您的 .h 文件中。这将创建一个指向您的标签的 IBOutlet，如下所示：

```
@property (weak, nonatomic) IBOutlet UILabel *myLabel; 
```

现在，只需将其用作 .m 文件中的任何其他变量，即

```
@synthesize myLabel = _myLabel;
......

self.myLabel.text = @"abc"; 
```

希望有帮助。

# bash - 修剪前导标签

> ID：14514101
> 
> 赞同：0
> 
> 时间：2013-01-25T01:52:53.483
> 
> 标签：bash, makefile

我有一个`makefile`所谓的“动作”由`\t`. 当我需要执行这些操作时，shell 当然会抱怨`\tgcc -o a filename.c Coomand not found`. 搜索仅产生如何使用`sed`. 但是，如果不允许使用它，但只能使用`bash`?

这种“规则”的例子是：

```
A : B C D E F G
\tgcc -o a A 
```

`\t`这里只是为了清楚起见，在实际文件中我按 Tab 键。我需要的是能够阅读制表符之后的内容并使用`eval`或反引号执行它。如果我反引号我读到的内容（即没有修剪制表符），shell 会抱怨。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:00:07.023

您不应该在 makefile 的命令部分实际写入 \t 。按 T​​ab 键获得所需的空间。

```
A : B C D E F G
    gcc -o a A 
```

编辑 - 如果您使用 vi/vim，您可能正在使用将 TAB 替换为一定数量的空格（通常为 4 个）的命令。检查那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:04:02.027

如果您只想使用 bash，则需要解析文件，删除`\t`并转储到新文件。

像这样的东西；

```
while -r line; do echo "${line//\t/}" >> new_makefile; done < makefile 
```

# ruby-on-rails - 与数组对象混淆

> ID：14514111
> 
> 赞同：0
> 
> 时间：2013-01-25T01:54:44.937
> 
> 标签：ruby-on-rails, arrays

在我看来，我有以下几点。我试图弄清楚为什么会这样：

```
<% unless @question.answers.empty? %>
  <% @question.answers.each do |answer| %>
    <%= render :partial => '/answers/answer', :locals => { :question => @question, :answer => answer } %>
  <% end %>
<% end %> 
```

问题：在应该`@question.answers.empty?`返回的时候返回。它有一些空对象，并返回而不是`false``true``answer``@question.answers.length``1``0`

例子：`[#<Answer id: nil, body: nil, user_id: nil, created_at: nil, updated_at: nil, question_id: 18>]`

但是，更令人困惑的是，当我在控制台中执行此操作时，@question.answers.empty？返回 true 并且长度应该是 0。为什么会这样？

```
1.9.3-p327 :001 > question = Question.find(18)
  Question Load (12.2ms)  SELECT "questions".* FROM "questions" WHERE "questions"."id" = $1 LIMIT 1  [["id", 18]]
 => #<Question id: 18, body: "sddd", user_id: 7, created_at: "2013-01-25 01:47:06", updated_at: "2013-01-25 01:47:06"> 
1.9.3-p327 :002 > question.answers.length
  Answer Load (0.7ms)  SELECT "answers".* FROM "answers" WHERE "answers"."question_id" = 18
 => 0 
1.9.3-p327 :003 > question.answers
 => [] 
```

此外，特定问题的长度在索引页面上显示为 0，在显示页面上显示为 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:00:39.763

您的控制器中可能有以下内容：

```
@answer = @question.answers.build 
```

这是为新答案创建一个对象并将其添加到`@question.answers`对象中。您可能想尝试`.new`而不是`.build`，这样它就不会在本地包含在`@question.answers`. 请参阅[Rails 3 中的 Build vs new](https://stackoverflow.com/questions/4954313/build-vs-new-in-rails-3)

# actionscript-3 - FDT宽度AirSDK3.6如何使用Inline方法？

> ID：14514116
> 
> 赞同：0
> 
> 时间：2013-01-25T01:55:31.743
> 
> 标签：actionscript-3, actionscript, inline, fdt

在 Air3.6 中，as3 支持内联和线程。在 FlashBuilder 中我设置了“-inline”，项目将编译成功，但在 FDT 中，它不起作用，如何在 FDT 中使用内联方法？谢谢。

# php - WordPress 博客标题中的页面未找到错误

> ID：14514120
> 
> 赞同：1
> 
> 时间：2013-01-25T01:55:45.260
> 
> 标签：php, html, wordpress, http-status-code-404

我正在开发一个 WordPress 网站，标题中发生了一件奇怪的事情。

它在标题和内容上方给了我其中之一：

![在此处输入图像描述](../Images/665c087fdbedd6eb4e9b16d919ad1abb.png)

这是找不到页面时的 GoDaddy 消息（我相信？）。我想，因为这是 WordPress，所以它是一个 PHP 包含，只是不存在或被移动了。这是该区域的源代码。这是一张表（我再次假设它是动态生成的）：

```
<table width="85%" border="1" bordercolor="#000000" cellspacing="0" cellpadding="3">
    <tbody><tr>
        <td bgcolor="#e5dccd">
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tbody><tr>
                    <td width="40%"><img src="http://images.godaddy.com/hosting/hdr_sorry_small.gif" border="1" bordercolor="#000000"></td>
                    <td align="CENTER"><h2 style="font-family: arial, sans-serif">Page Not Found</h2></td>
                </tr>
                </tbody>
             </table>
            </td>
            </tr>
         <tr>
         <td>
             <p style="margin-left: 10px; margin-right: 10px; margin-top: 10px; margin-bottom: 10px; font-size: 10pt; font-family: arial, sans-serif">
             The page you tried to access does not exist on this server. This page may not exist due to the following reasons:
             </p><ol><li style="font-size: 10pt; font-family: arial, sans-serif"><strong>You arethe owner of this web site and you have not uploaded</strong> (or incorrectly uploaded) your web site. For information on uploading your web site using FTP client software or web design software, <a href="http://ftphelp.secureserver.net/index.html">click here for FTP Upload Information</a>. 
             <p>
             </p></li><li style="font-size: 10pt; font-family: arial, sans-serif"><strong>The URL that you have entered in your browser is incorrect.</strong> Please re-enter the URL and try again.<p>
             </p></li><li style="font-size: 10pt; font-family: arial, sans-serif"><strong>The Link that you clicked on incorrectly points to this page.</strong> Please contact the owner of this web site to inform them of this situation.</li></ol>
</td>
</tr>
</tbody></table>
<div id="main"> 
```

我知道这有点乱，但我只是表明它是一个正在生成的表。我展示这个的原因是因为这里是 WordPress 模板中的代码：

```
<body <?php if(function_exists('body_class')) body_class(); ?>>
<div id="main"> 
```

您会看到在 body 和 div id="main" 之间没有内容。不过，该表正在那里生成。所以我不知道哪个链接坏了，也不知道此时如何追踪需要修复的内容。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-08T20:12:17.887

当您点击 Active 时，点击Hosting 下主帐户页面
上的 Active 它将显示暂停选项，如下图所示 [![godaddy hosting error][1]][1]

# html - 环绕浮动时避免悬空文本

> ID：14514121
> 
> 赞同：5
> 
> 时间：2013-01-25T01:55:48.787
> 
> 标签：html, css, css-float, word-wrap

这张图说得最好：

![在此处输入图像描述](../Images/28b0d204b08735ab14ac32eac7823d8b.png)

它只是一张`float: left`图片（[http://jsbin.com/itihes/1](http://jsbin.com/itihes/1)）。有什么办法可以防止纯 CSS 中的动态文本出现这个问题？我确实希望文本换行，但如果它少于一整行（理想情况下是两整行），所有文本都将保留在右侧的同一块中。

图像宽度是固定的，但整个块的宽度是动态的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:23:32.860

DSKrepps 得到了一点：你能做的最接近的事情就是逐段逐句

标签，这样该段落的剩余文本不会换行，但下一段是全宽的。

你要做的就是这样

```
.text-div p:first-child {
    overflow:hidden;
    line-height:(a number matching (img height + bottom margin) divider)
} 
```

这样，您的第一段不会包裹在 .. 但另一段`<p>`会

jsfiddle 为您服务：http: [//jsfiddle.net/6FQuH/](http://jsfiddle.net/6FQuH/)

否则 --> javascript

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:11:17.637

因此，您希望文本仅在其足够长且不会在照片下方显得孤立时才换行。

不幸的是，仅靠 CSS 是不可能的。您可以做的最接近的事情是在每个标签上逐段进行`<p>`，这样该段落的剩余文本不会换行，但下一个段落是全宽的。像这样：http: [//jsbin.com/avogil/1/edit](http://jsbin.com/avogil/1/edit)

当然，也可以使用 Javascript，将浮动图像的大小与段落的大小进行比较，并将差异与字体大小进行比较。您可能想要使用 jQuery。

也许未来的 CSS 规范有一天会解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:14:25.083

在这种情况下，您唯一能做的就是将图像的边缘底部提高到大约。字体大小的两倍。12px 字体大小，24px 底部边距。您仍然可以有一个孤儿，但在上述情况下，文本将保持内联，不会换行，对于更长的文本，它会正确换行。它留下了一个小窗口，您仍然可以在其中有一个单行孤儿。

# glut - 记录 libglut 渲染？

> ID：14514128
> 
> 赞同：0
> 
> 时间：2013-01-25T01:56:43.157
> 
> 标签：glut

我在 [https://github.com/barrycarter/bcapps/blob/master/particleman.c](https://github.com/barrycarter/bcapps/blob/master/particleman.c)创建了一个小型“粒子系统” （使用“gcc -lglutparticleman.c -oparticleman”编译），现在想要记录输出。我该怎么做呢？

我尝试使用 recordmydesktop，但效果不佳，而且本质上似乎是错误的工具。

我可以让 libglut 直接输出 MP4 文件吗？

如果没有，我可以让它将每一帧输出为图像（然后使用其他软件组合这些图像）吗？

这似乎应该很容易，但我很难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T15:11:15.430

您可以使用`glReadPixels`将帧缓冲区的像素读取到数组中。之后您需要将数据存储在图像文件中 - 这里有一些代码：

```
rectangle<int> rect = getViewport();

const int width     = rect.width;
const int height    = rect.height;

const size_t bytesPerPixel = 3; // RGB
const size_t imageSizeInBytes = bytesPerPixel * size_t(width) * size_t(height);

// Allocate data for pixels
uint8_t* pixels = new uint8_t[imageSizeInBytes];

glPixelStorei(GL_PACK_ALIGNMENT, 1);
glReadPixels(0, 0, width, height, GL_RGB, GL_UNSIGNED_BYTE, pixels);

// save data to an image
Image img(width, height, pixels);
buw::saveImage(filename, img); 
```

glut 不能直接输出 MP4。

# c# - Windows 8 应用商店应用程序不支持 System.Threading.Thread

> ID：14514129
> 
> 赞同：4
> 
> 时间：2013-01-25T01:56:45.840
> 
> 标签：c#, multithreading, windows-store-apps

Windows 8 应用商店应用不再支持 Thread：

我在类库中创建一个线程：

```
protected static Thread m_thread = null; 
```

然后在其中一个功能中：

```
m_thread = new Thread(new ParameterizedThreadStart(RunDetection));
m_thread.Start(Something); 
```

我还需要中止该功能：

```
m_thread.Abort(); 
```

如何在 WIN8 商店应用程序中执行此操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T02:01:53.520

您可以在线程池上运行您的线程过程。

*   [在 Windows 应用商店应用程序中使用线程池](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh465290)
*   [线程池类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.threading.threadpool)

中止线程从来都不是一个可行的选择，因为它可能会挂起你的整个进程（废弃的锁，不一致的全局状态）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:12:02.203

手动创建线程通常是一种不好的做法。您应该真正深入了解多线程以获得优势。考虑使用[ThreadPool](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.threading.threadpool)：

```
ThreadPool.QueueUserWorkItem(_ => { RunDetection(); }); 
```

此外，尽可能使用异步方法。即`SomeActionAsync`，`BeginSomeAction`等。如果类没有实现异步方法，则`ThreadPool`用于运行同步方法。

# python - 如何让cronjob每5分钟保存一个excel文件？

> ID：14514130
> 
> 赞同：0
> 
> 时间：2013-01-25T01:56:56.097
> 
> 标签：python, excel, cron

我有一个获取实时股票价格的 excel 表，但是 python 只能读取最后保存的 excel 文件版本，而不是运行时的 excel 文件。因此，我需要知道如何每 5 分钟自动保存文件，以便 python 的 xlrd 可以读取最近保存的 excel 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:59:47.630

我不确定如何使用 cron 作业（或者是否有可能）来做到这一点。我认为您可能想要做的是使用宏来自动保存它。也许[是这样](http://www.ozgrid.com/forum/showthread.php?t=84455)的。

# meteor - 在 Meteor 中使用一个集合的两个数据集

> ID：14514131
> 
> 赞同：0
> 
> 时间：2013-01-25T01:56:57.610
> 
> 标签：meteor

问题是我需要一个 mongodb 集合的两个不同数据集

```
//lib/col.js
Photos = new Meteor.Collection("photos");
lastPhotos = function() {
  return Photos.find({},{sort:{created_time:-1},limit:4});
}
locationPhotos = function(location_id_var) 
{
    //**doesn't return data from server, goes to local cache**
    return Photos.find({location_id: location_id_var});
}
//server
Meteor.publish("lastPhoto", function () 
{
   return lastPhoto();
});

Meteor.publish("locationPhoto", function (location_id) 
{
   return locationPhoto(location_id);
});

//client
Meteor.subscribe("lastPhoto");
Meteor.subscribe("locationPhoto",{location_id:Session.get("location_id")}); 
```

流星合并一个集合的两个数据集的主要问题。

在模板中，我对一个集合有两种不同的演示。收藏量很大（6000 份文件），我无法将其全部发送给客户。

如何在不将所有文档发送给客户端的情况下获取一个集合的两组不同文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:06:07.790

你在正确的轨道上。您需要将您的包装`subscribe`在一个`autorun`中以使其动态*更改*服务器的`publish`方法。

我希望这是有帮助的：

Javascript：

```
var Photos = new Meteor.Collection("Photos");

if (Meteor.isClient) {

  Template.main.photos = function () {
    return Photos.find({location_id: Session.get("location") });
  };

  Meteor.autorun(function() {
    Meteor.subscribe("photos", Session.get("location"));
  });

  Template.main.events({
    'click button' : function (e) {
        Session.set("location", $(e.target).data("locale"));
    }
  });
}

if (Meteor.isServer) {
  Meteor.publish("photos", function(location_id) {
    return Photos.find({location_id: location_id}, {sort: { created_time: -1 }, limit: 4});
  });
} 
```

HTML：

```
<body>
  {{> main}}
</body>

<template name="main">
    {{#each photos}}
        {{location_id}} | {{created_time}} | {{name}} <br/>
     {{/each}}

    <hr/>

    <button type="button" data-locale="MSP">MSP</button>
    &nbsp;
    <button type="button" data-locale="SEA">SEA</button>

</template 
```

# google-apps-script - Google 脚本错误：参数必须是一个范围（第 74 行）

> ID：14514136
> 
> 赞同：-1
> 
> 时间：2013-01-25T01:58:25.477
> 
> 标签：google-apps-script

这是我的功能

```
 function Cool() {   var h = SpreadsheetApp.getActiveSpreadsheet();  
 var range = 0;   var count = 1;   var alph = ["A", "B", "C", "D", "E",
 "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S",
 "T"];   for (i = 0; i < 20; i+=0.5) {
     if (i == 19 && count != 5) {
       i == 0;
       count += 1;
     } else if (i == 1 || 2 || 3 || 4 || 5 || 6 || 7 || 8 || 9 || 10 || 11 || 12 || 13 || 14 || 15 || 16 || 17 || 18) {
       range = h.getSheets()[0].getRange(alph[i] + count + ":" + alph[i] + count);
       SpreadsheetApp.setActiveRange(range);
       randomize();
     }   } } 
```

有一个错误

```
range = h.getSheets()[0].getRange(alph[i] + count + ":" + alph[i] + count); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:16:47.613

你看过你正在使用的数据吗？

这是您的脚本稍作修改的版本，带有一个记录器，可以查看发生了什么以及下面的日志结果。我想您会明白为什么会收到错误消息。看来您的条件简化语法并没有达到您想要的效果，是吗？

顺便说一句，这个脚本的最终目的是什么？你能解释一下这个想法吗？

如果你只想对 i 的整数值做某事，那么使用类似`if(i==parseInt(i))`的东西会更容易......

```
function Cool() {   
  var h = SpreadsheetApp.getActiveSpreadsheet();  
  var range = 0;   var count = 1;   var alph = ["A", "B", "C", "D", "E",
 "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S",
 "T"];   for (i = 0; i < 20; i+=0.5) {
     if (i == 19 && count != 5) {
       i == 0;
       count += 1;
     } else if (i == 1 || 2 || 3 || 4 || 5 || 6 || 7 || 8 || 9 || 10 || 11 || 12 || 13 || 14 || 15 || 16 || 17 || 18) {
//       range = h.getSheets()[0].getRange(alph[i] + count + ":" + alph[i] + count);
//       SpreadsheetApp.setActiveRange(range);
 Logger.log('i='+i+'  '+alph[i] + count + ":" + alph[i] + count);
 //      randomize();
     }  
     }
     } 
```

**记录器结果：**

```
i=0  A1:A1
i=0.5  undefined1:undefined1
i=1  B1:B1
i=1.5  undefined1:undefined1
i=2  C1:C1
i=2.5  undefined1:undefined1
i=3  D1:D1
i=3.5  undefined1:undefined1
i=4  E1:E1
i=4.5  undefined1:undefined1
i=5  F1:F1
i=5.5  undefined1:undefined1
i=6  G1:G1
i=6.5  undefined1:undefined1
i=7  H1:H1
i=7.5  undefined1:undefined1
i=8  I1:I1
i=8.5  undefined1:undefined1
i=9  J1:J1
i=9.5  undefined1:undefined1
i=10  K1:K1
i=10.5  undefined1:undefined1
i=11  L1:L1
i=11.5  undefined1:undefined1
i=12  M1:M1
i=12.5  undefined1:undefined1
i=13  N1:N1
i=13.5  undefined1:undefined1
i=14  O1:O1
i=14.5  undefined1:undefined1
i=15  P1:P1
i=15.5  undefined1:undefined1
i=16  Q1:Q1
i=16.5  undefined1:undefined1
i=17  R1:R1
i=17.5  undefined1:undefined1
i=18  S1:S1
i=18.5  undefined1:undefined1
i=19.5  undefined2:undefined2 
```

**编辑：**出于*好奇，*我确实使用建议的语句尝试了您的代码，`IF`并且得到了以下日志（更好；-）但是毫无用处，带有统一增量的简单 for 循环也会这样做...

```
i=0  A1:A1
i=1  B1:B1
i=2  C1:C1
i=3  D1:D1
i=4  E1:E1
i=5  F1:F1
i=6  G1:G1
i=7  H1:H1
i=8  I1:I1
i=9  J1:J1
i=10  K1:K1
i=11  L1:L1
i=12  M1:M1
i=13  N1:N1
i=14  O1:O1
i=15  P1:P1
i=16  Q1:Q1
i=17  R1:R1
i=18  S1:S1 
```

所以问题仍然存在：*最终目标是什么？*

# python - Python：诅咒和默认黑色

> ID：14514137
> 
> 赞同：2
> 
> 时间：2013-01-25T01:58:33.870
> 
> 标签：python, python-2.7, ncurses, curses

为什么这段 python 代码没有产生正常的`black`背景颜色？

```
import curses

def func(stdscr):      
    c = stdscr.getkey()
curses.wrapper(func) 
```

我真的不明白。我玩了很多东西（`color_pair`，，，`pair_number`等`init_pair`）。这真的不黑。

我正在使用默认的 ubuntu gnome 终端。（但是afaik没有什么区别）。

![诅咒——不是黑色的](../Images/697fb490c829e8fd552b8688aad7379c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T22:15:34.687

除非您手动指定颜色，否则 curses 将尊重您的终端调色板。大多数终端将使用 .Xresources 或 .Xdefaults 文件中的设置（不确定 gnome-terminal）

但是，如果您想手动定义颜色。使用 curses.init_color，这不适用于所有终端，有关其用法的更多信息请参见[python curses 文档](http://docs.python.org/2/library/curses.html)。请记住在退出之前重置颜色（curses.wrapper 应该为您执行此操作）。

```
def func(stdscr):
    if curses.can_change_color():
        # init_color(n, r, g, b)
        # n=0 is background
        curses.init_color(0, 0, 0, 0)
    c = stdscr.getkey() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T02:51:17.087

里面有`gnome-terminal`一个叫`Palette`. 它可以在`Edit Profile -> Colors 下找到。此调色板设置仅适用于终端应用程序。

因此，同一对话框中的其他设置（前景色/背景色）对应用程序毫无用处。

# php - 为什么这个isset返回false？

> ID：14514146
> 
> 赞同：0
> 
> 时间：2013-01-25T01:59:39.060
> 
> 标签：php, forms, select, isset

所以我在表格中有一个选择......

```
<select id="aca" name="aca">
  <option value="2012">2012-2013</option>
  <option value="2011">2011-2012</option>
  <option value="2010">2010-2011</option>
  <option value="2009">2009-2010</option>
  <option value="2008">2008-2009</option>
  <option value="2007">2007-2008</option>
  <option value="2006">2006-2007</option>
  <option value="2005">2005-2006</option>
</select> 
```

看起来不错，对吧？然后我想检查是否设置了整个表单：

```
if(isset($_FILES['fichier']) && isset($_POST['nom']) && isset($_POST['a']) && isset($_POST['c']) && isset($_POST['t']) && isset($_POST['auteur']) && isset($_POST['aca'])) echo 'tout'; 
```

好吧，这总是返回 FALSE，我知道这是由于 'aca'。当我尝试...

```
if(isset($_POST['aca'])) echo 'aca'; 
```

**如果**我在列表中选择了某些内容，它会返回 TRUE ，而另一个条件仍然没有回显“tout”，所以我只看到“aca”。并且这条 js 行似乎不是问题，因为其他选择的返回 TRUE。

```
$("select").prop('selectedIndex', -1); 
```

我真的不明白……哈普^^”

完整的 HTML：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Upload</title>
  <link rel="stylesheet" href="style/upload.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="js/upload.js"></script>
</head>
<body>

<form method="post" action="" enctype="multipart/form-data">

<fieldset>
<legend>Informations d'upload</legend>
<p>Fichier (tous formats | max. 1 Mo):</p>
<input type="file" name="fichier" size="60"/><br/>
<p>Nom du fichier. Caractères utilisables: alphanumériques °*@()-_()</p>
<input type="text" name="nom" size="40"/>
</fieldset>

<fieldset>
<legend>Classification</legend>
<p>Merci d'indiquer où ce fichier devra être classé.</p>
  <select id="a" name="a">
    <option value="0">BA1</option>
  </select>
  <select id="c" name="c" style="display:none"></select>
  <select id="t" name="t" style="display:none"></select>
</fieldset>

<fieldset>
<legend>Détails</legend>
<p>Auteur:</p>
<input type="text" name="auteur" size="40"/>
<p>Année académique:</p>
<select id="aca" name="aca">
  <option value="2012">2012-2013</option>
  <option value="2011">2011-2012</option>
  <option value="2010">2010-2011</option>
  <option value="2009">2009-2010</option>
  <option value="2008">2008-2009</option>
  <option value="2007">2007-2008</option>
  <option value="2006">2006-2007</option>
  <option value="2005">2005-2006</option>
</select>
</fieldset>

<br/>

<div style="width:500px;text-align:center">
<input type="submit" name="submit" value="Envoyer" />
</div>

</form>
</body>
</html> 
```

完整的PHP：

```
<?php
$formats = array('pdf');
echo strtolower(substr(strrchr($_FILES['fichier']['name'],'.'),1)).'<br/>';
if(isset($_POST['aca'])) echo 'aca';
if(isset($_FILES['fichier']) && isset($_POST['nom']) && isset($_POST['a']) && isset($_POST['c']) && isset($_POST['t']) && isset($_POST['auteur']) && isset($_POST['aca'])) echo 'tout';
if(preg_match("#^[a-zA-Z0-9éè°*@ ()_-]{10,50}$#",$_POST['nom']))
{
echo 'OK';
}
else echo 'Nope';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:09:44.690

如果未选择任何内容，则该元素不会 POST 到服务器。您可以通过选择来解决此问题：

```
<select id="aca" name="aca">
  <option value="" selected="selected"> </option>
  <option value="2012">2012-2013</option>
  <option value="2011">2011-2012</option>
  <option value="2010">2010-2011</option>
  <option value="2009">2009-2010</option>
  <option value="2008">2008-2009</option>
  <option value="2007">2007-2008</option>
  <option value="2006">2006-2007</option>
  <option value="2005">2005-2006</option>
</select> 
```

同样，如果您希望其他“选择”元素在不选择某些内容的情况下发布，则必须对它们执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:09:40.750

做一个 print_r($_POST) ，你将能够准确地看到设置了什么......

# c# - ServiceControlHandler 用于 USB 设备通知，OnStop() 不可实现

> ID：14514147
> 
> 赞同：8
> 
> 时间：2013-01-25T01:59:47.273
> 
> 标签：c#, winapi, service, service-control-manager

我想编写一个服务来监听设备通知（USB 媒体插入、移除）。在 C# 服务中侦听设备通知的问题是，这`System.Windows.Forms.Control.WndProc`是不可用的，因为 Windows 服务没有任何窗口。
我[在如何编写这样的服务上找到了这个 HowTo](http://www.codeproject.com/Articles/32026/Capturing-Device-Events-in-a-C-Windows-Service)。那篇文章的作者找到了一种解决方法，它可以让服务侦听设备通知而不是服务控制消息，因此，该服务不再支持 OnStop()。

*（26.01.13 更新：）*
遗憾的是，我并不真正了解服务控制管理器和 Windows API。我想知道是否可以同时注册服务控制消息和 USB 设备通知，或者这是否真的是服务收听设备通知的唯一选择。我还没有找到任何（我可以理解的）信息来解决我的问题。
是否可以在`System.Windows.Forms.Control.WndProc`不生成窗口的情况下使用（我只需要添加 System.Windows.Forms 程序集，对吗？）。

*（更新 27.01.13 :)*
我刚刚发现了这个问题：[无法在 Windows 7 上从 Windows 服务启动桌面应用程序](https://stackoverflow.com/questions/3838418/cannot-start-desktop-application-from-windows-service-on-windows-7?rq=1)
第二个[答案](https://stackoverflow.com/a/4098015/698583)说，Windows 服务在 Windows Vista 中进行了以安全为中心的改造，现在在会话 0 中创建了 GUI 元素即使选中了“允许服务与桌面交互”。这是否意味着，我可以创建一个 Windows 窗体，然后接收 USB 设备事件（因此，我不需要弄乱`ServiceControlHandler`？这样做有什么警告或问题吗？

**简而言之，我需要一个执行以下操作之一的解决方案：**

1.  **使 OnStop 再次可用，或**
2.  **在 Windows C# 服务中提供另一种侦听 USB 设备通知的方法**

* * *

我的源代码目前如下。它与我在第一段中链接的 HowTo 提供的源代码几乎相同。我所做的唯一区别是删除 FileSystemWatcher 私有字段及其所有用法，因为我不需要 FileSystemWatcher。

USBBackup.cs（服务本身 - 使用排除在我的源代码中但完整的语句）：

```
namespace USBBackup
{
    public partial class USBBackup : ServiceBase
    {

        private IntPtr deviceNotifyHandle;
        private IntPtr deviceEventHandle;
        private IntPtr directoryHandle;
        private Win32.ServiceControlHandlerEx myCallback;

        private int ServiceControlHandler(int control, int eventType, IntPtr eventData, IntPtr context)
        {
            if (control == Win32.SERVICE_CONTROL_STOP || control == Win32.SERVICE_CONTROL_SHUTDOWN)
            {
                UnregisterHandles();
                Win32.UnregisterDeviceNotification(deviceEventHandle);

                base.Stop();
            }
            else if (control == Win32.SERVICE_CONTROL_DEVICEEVENT)
            {
                switch (eventType)
                {
                    case Win32.DBT_DEVICEARRIVAL:
                        Win32.DEV_BROADCAST_HDR hdr;
                        hdr = (Win32.DEV_BROADCAST_HDR)Marshal.PtrToStructure(eventData, typeof(Win32.DEV_BROADCAST_HDR));
                        if (hdr.dbcc_devicetype == Win32.DBT_DEVTYP_DEVICEINTERFACE)
                        {
                            Win32.DEV_BROADCAST_DEVICEINTERFACE deviceInterface;
                            deviceInterface = (Win32.DEV_BROADCAST_DEVICEINTERFACE)Marshal.PtrToStructure(eventData, typeof(Win32.DEV_BROADCAST_DEVICEINTERFACE));
                            string name = new string(deviceInterface.dbcc_name);
                            name = name.Substring(0, name.IndexOf('\0')) + "\\";

                            StringBuilder stringBuilder = new StringBuilder();
                            Win32.GetVolumeNameForVolumeMountPoint(name, stringBuilder, 100);

                            uint stringReturnLength = 0;
                            string driveLetter = "";

                            Win32.GetVolumePathNamesForVolumeNameW(stringBuilder.ToString(), driveLetter, (uint)driveLetter.Length, ref stringReturnLength);
                            if (stringReturnLength == 0)
                            {
                                // TODO handle error
                            }

                            driveLetter = new string(new char[stringReturnLength]);

                            if (!Win32.GetVolumePathNamesForVolumeNameW(stringBuilder.ToString(), driveLetter, stringReturnLength, ref stringReturnLength))
                            {
                                // TODO handle error
                            }

                            RegisterForHandle(driveLetter[0]);
                        }
                        break;
                    case Win32.DBT_DEVICEQUERYREMOVE:
                        UnregisterHandles();
                        break;
                }
            }

            return 0;
        }

        private void UnregisterHandles()
        {
            if (directoryHandle != IntPtr.Zero)
            {
                Win32.CloseHandle(directoryHandle);
                directoryHandle = IntPtr.Zero;
            }
            if (deviceNotifyHandle != IntPtr.Zero)
            {
                Win32.UnregisterDeviceNotification(deviceNotifyHandle);
                deviceNotifyHandle = IntPtr.Zero;
            }
        }

        private void RegisterForHandle(char c)
        {
            Win32.DEV_BROADCAST_HANDLE deviceHandle = new Win32.DEV_BROADCAST_HANDLE();
            int size = Marshal.SizeOf(deviceHandle);
            deviceHandle.dbch_size = size;
            deviceHandle.dbch_devicetype = Win32.DBT_DEVTYP_HANDLE;
            directoryHandle = CreateFileHandle(c + ":\\");
            deviceHandle.dbch_handle = directoryHandle;
            IntPtr buffer = Marshal.AllocHGlobal(size);
            Marshal.StructureToPtr(deviceHandle, buffer, true);
            deviceNotifyHandle = Win32.RegisterDeviceNotification(this.ServiceHandle, buffer, Win32.DEVICE_NOTIFY_SERVICE_HANDLE);
            if (deviceNotifyHandle == IntPtr.Zero)
            {
                // TODO handle error
            }
        }

        private void RegisterDeviceNotification()
        {
            myCallback = new Win32.ServiceControlHandlerEx(ServiceControlHandler);
            Win32.RegisterServiceCtrlHandlerEx(this.ServiceName, myCallback, IntPtr.Zero);

            if (this.ServiceHandle == IntPtr.Zero)
            {
                // TODO handle error
            }

            Win32.DEV_BROADCAST_DEVICEINTERFACE deviceInterface = new Win32.DEV_BROADCAST_DEVICEINTERFACE();
            int size = Marshal.SizeOf(deviceInterface);
            deviceInterface.dbcc_size = size;
            deviceInterface.dbcc_devicetype = Win32.DBT_DEVTYP_DEVICEINTERFACE;
            IntPtr buffer = default(IntPtr);
            buffer = Marshal.AllocHGlobal(size);
            Marshal.StructureToPtr(deviceInterface, buffer, true);
            deviceEventHandle = Win32.RegisterDeviceNotification(this.ServiceHandle, buffer, Win32.DEVICE_NOTIFY_SERVICE_HANDLE | Win32.DEVICE_NOTIFY_ALL_INTERFACE_CLASSES);
            if (deviceEventHandle == IntPtr.Zero)
            {
                // TODO handle error
            }
        }

        public USBBackup()
        {
            InitializeComponent();
        }

        public static IntPtr CreateFileHandle(string driveLetter)
        {
            // open the existing file for reading
            IntPtr handle = Win32.CreateFile(
                  driveLetter,
                  Win32.GENERIC_READ,
                  Win32.FILE_SHARE_READ | Win32.FILE_SHARE_WRITE,
                  0,
                  Win32.OPEN_EXISTING,
                  Win32.FILE_FLAG_BACKUP_SEMANTICS | Win32.FILE_ATTRIBUTE_NORMAL,
                  0);

            if (handle == Win32.INVALID_HANDLE_VALUE)
            {
                return IntPtr.Zero;
            }
            else
            {
                return handle;
            }
        }

        protected override void OnStart(string[] args)
        {
            base.OnStart(args);

            RegisterDeviceNotification();
        }
    }
} 
```

Win32.cs：

```
namespace USBBackup
{
    public class Win32
    {
        public const int DEVICE_NOTIFY_SERVICE_HANDLE = 1;
        public const int DEVICE_NOTIFY_ALL_INTERFACE_CLASSES = 4;

        public const int SERVICE_CONTROL_STOP = 1;
        public const int SERVICE_CONTROL_DEVICEEVENT = 11;
        public const int SERVICE_CONTROL_SHUTDOWN = 5;

        public const uint GENERIC_READ = 0x80000000;
        public const uint OPEN_EXISTING = 3;
        public const uint FILE_SHARE_READ = 1;
        public const uint FILE_SHARE_WRITE = 2;
        public const uint FILE_SHARE_DELETE = 4;
        public const uint FILE_ATTRIBUTE_NORMAL = 128;
        public const uint FILE_FLAG_BACKUP_SEMANTICS = 0x02000000;
        public static readonly IntPtr INVALID_HANDLE_VALUE = new IntPtr(-1);

        public const int DBT_DEVTYP_DEVICEINTERFACE = 5;
        public const int DBT_DEVTYP_HANDLE = 6;

        public const int DBT_DEVICEARRIVAL = 0x8000;
        public const int DBT_DEVICEQUERYREMOVE = 0x8001;
        public const int DBT_DEVICEREMOVECOMPLETE = 0x8004;

        public const int WM_DEVICECHANGE = 0x219;

        public delegate int ServiceControlHandlerEx(int control, int eventType, IntPtr eventData, IntPtr context);

        [DllImport("advapi32.dll", SetLastError = true)]
        public static extern IntPtr RegisterServiceCtrlHandlerEx(string lpServiceName, ServiceControlHandlerEx cbex, IntPtr context);

        [DllImport("kernel32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        public static extern bool GetVolumePathNamesForVolumeNameW(
                [MarshalAs(UnmanagedType.LPWStr)]
                    string lpszVolumeName,
                [MarshalAs(UnmanagedType.LPWStr)]
                    string lpszVolumePathNames,
                uint cchBuferLength,
                ref UInt32 lpcchReturnLength);

        [DllImport("kernel32.dll")]
        public static extern bool GetVolumeNameForVolumeMountPoint(string
           lpszVolumeMountPoint, [Out] StringBuilder lpszVolumeName,
           uint cchBufferLength);

        [DllImport("user32.dll", SetLastError = true)]
        public static extern IntPtr RegisterDeviceNotification(IntPtr IntPtr, IntPtr NotificationFilter, Int32 Flags);

        [DllImport("user32.dll", CharSet = CharSet.Auto)]
        public static extern uint UnregisterDeviceNotification(IntPtr hHandle);

        [DllImport("kernel32.dll", SetLastError = true)]
        public static extern IntPtr CreateFile(
              string FileName,                    // file name
              uint DesiredAccess,                 // access mode
              uint ShareMode,                     // share mode
              uint SecurityAttributes,            // Security Attributes
              uint CreationDisposition,           // how to create
              uint FlagsAndAttributes,            // file attributes
              int hTemplateFile                   // handle to template file
              );

        [DllImport("kernel32.dll", SetLastError = true)]
        public static extern bool CloseHandle(IntPtr hObject);

        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
        public struct DEV_BROADCAST_DEVICEINTERFACE
        {
            public int dbcc_size;
            public int dbcc_devicetype;
            public int dbcc_reserved;
            [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.U1, SizeConst = 16)]
            public byte[] dbcc_classguid;
            [MarshalAs(UnmanagedType.ByValArray, SizeConst = 128)]
            public char[] dbcc_name;
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct DEV_BROADCAST_HDR
        {
            public int dbcc_size;
            public int dbcc_devicetype;
            public int dbcc_reserved;
        }

        [StructLayout(LayoutKind.Sequential)]
        public struct DEV_BROADCAST_HANDLE
        {
            public int dbch_size;
            public int dbch_devicetype;
            public int dbch_reserved;
            public IntPtr dbch_handle;
            public IntPtr dbch_hdevnotify;
            public Guid dbch_eventguid;
            public long dbch_nameoffset;
            public byte dbch_data;
            public byte dbch_data1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-10T18:07:31.687

我以前曾研究过相同的主题，我最终采用的路线是简单地构造 a`Window`并转发消息。我确信我从某个第三方那里获得了相关代码，因为我在 2013 年对这个问题发表了评论，引用了一个现已失效的链接。

那么让我们看一下代码。

首先，这是完整的`MessageWindow`实现：

```
using System;
using System.Threading;
using System.Windows.Forms;
using System.ComponentModel;
using System.Collections.Generic;

namespace Foo.Windows {
  public class MessageReceivedEventArgs : EventArgs {
    private readonly Message _message;

    public MessageReceivedEventArgs( Message message ) {
      _message = message;
    }

    public Message Message {
      get { return _message; }
    }
  }

  public static class MessageEvents {
    private static object _lock = new object();
    private static MessageWindow _window;
    private static IntPtr _windowHandle;
    private static SynchronizationContext _context;

    public static event EventHandler<MessageReceivedEventArgs> MessageReceived;

    public static void WatchMessage( int message ) {
      EnsureInitialized();
      _window.RegisterEventForMessage( message );
    }

    public static IntPtr WindowHandle {
      get {
        EnsureInitialized();
        return _windowHandle;
      }
    }

    private static void EnsureInitialized() {
      lock( _lock ) {
        if( _window == null ) {
          _context = AsyncOperationManager.SynchronizationContext;
          using( ManualResetEvent mre = new ManualResetEvent( false ) ) {
            Thread t = new Thread( (ThreadStart) delegate {
                                                   _window = new MessageWindow();
                                                   _windowHandle = _window.Handle;
                                                   mre.Set();
                                                   Application.Run();
                                                 } );
            t.Name = "MessageEvents message loop";
            t.IsBackground = true;
            t.Start();

            mre.WaitOne();
          }
        }
      }
    }

    private class MessageWindow : Form {
      private ReaderWriterLock _lock = new ReaderWriterLock();
      private Dictionary<int, bool> _messageSet = new Dictionary<int, bool>();

      public void RegisterEventForMessage( int messageID ) {
        _lock.AcquireWriterLock( Timeout.Infinite );
        _messageSet[ messageID ] = true;
        _lock.ReleaseWriterLock();
      }

      protected override void WndProc( ref Message m ) {
        _lock.AcquireReaderLock( Timeout.Infinite );
        bool handleMessage = _messageSet.ContainsKey( m.Msg );
        _lock.ReleaseReaderLock();

        if( handleMessage ) {
          MessageEvents._context.Send( delegate( object state ) {
            EventHandler<MessageReceivedEventArgs> handler = MessageEvents.MessageReceived;
            if( handler != null )
              handler( null, new MessageReceivedEventArgs( (Message)state ) );
          }, m );
        }

        base.WndProc( ref m );
      }
    }
  }
} 
```

为了完整起见，这些是与设备更改检测过程相关的常量：

```
using System;
using System.Runtime.InteropServices;

namespace Foo.Windows {
  internal class NativeMethods {
    /// <summary>
    /// Notifies an application of a change to the hardware configuration of a device or the computer.
    /// </summary>
    public static Int32 WM_DEVICECHANGE = 0x0219;

    /// <summary>
    /// The system broadcasts the DBT_DEVICEARRIVAL device event when a device or piece of media has been inserted and becomes available.
    /// </summary>
    public static Int32 DBT_DEVICEARRIVAL = 0x8000;

    /// <summary>
    /// Serves as a standard header for information related to a device event reported through the WM_DEVICECHANGE message.
    /// </summary>
    [StructLayout( LayoutKind.Sequential )]
    public struct DEV_BROADCAST_HDR {
      public Int32 dbch_size;
      public Int32 dbch_devicetype;
      public Int32 dbch_reserved;
    }

    public enum DBT_DEVTYP : uint {
      /// <summary>
      /// OEM- or IHV-defined device type.
      /// </summary>
      DBT_DEVTYP_OEM = 0x0000,

      /// <summary>
      /// Logical volume.
      /// </summary>
      DBT_DEVTYP_VOLUME = 0x0002,

      /// <summary>
      /// Port device (serial or parallel).
      /// </summary>
      DBT_DEVTYP_PORT = 0x0003,

      /// <summary>
      /// Class of devices.
      /// </summary>
      DBT_DEVTYP_DEVICEINTERFACE = 0x0005,

      /// <summary>
      /// File system handle.
      /// </summary>
      DBT_DEVTYP_HANDLE = 0x0006
    }

    /// <summary>
    /// Contains information about a OEM-defined device type.
    /// </summary>
    [StructLayout( LayoutKind.Sequential )]
    public struct DEV_BROADCAST_VOLUME {
      public Int32 dbcv_size;
      public Int32 dbcv_devicetype;
      public Int32 dbcv_reserved;
      public Int32 dbcv_unitmask;
      public Int16 dbcv_flags;
    }
  }
} 
```

现在您所要做的就是注册您感兴趣的消息并在事件发生时处理它。这些应该是该过程的相关部分：

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Security.AccessControl;
using System.Security.Principal;
using System.Text;
using System.Threading;
using Foo.Windows;

namespace Foo.Core {
  class Daemon {

    private static void InternalRun() {
      MessageEvents.WatchMessage( NativeMethods.WM_DEVICECHANGE );
      MessageEvents.MessageReceived += MessageEventsMessageReceived;
    }

    private static void MessageEventsMessageReceived( object sender, MessageReceivedEventArgs e ) {
      // Check if this is a notification regarding a new device.);
      if( e.Message.WParam == (IntPtr)NativeMethods.DBT_DEVICEARRIVAL ) {
        Log.Info( "New device has arrived" );

        // Retrieve the device broadcast header
        NativeMethods.DEV_BROADCAST_HDR deviceBroadcastHeader =
          (NativeMethods.DEV_BROADCAST_HDR)
          Marshal.PtrToStructure( e.Message.LParam, typeof( NativeMethods.DEV_BROADCAST_HDR ) );

        if( (int)NativeMethods.DBT_DEVTYP.DBT_DEVTYP_VOLUME == deviceBroadcastHeader.dbch_devicetype ) {
          Log.Info( "Device type is a volume (good)." );

          NativeMethods.DEV_BROADCAST_VOLUME volumeBroadcast =
            (NativeMethods.DEV_BROADCAST_VOLUME)
            Marshal.PtrToStructure( e.Message.LParam, typeof( NativeMethods.DEV_BROADCAST_VOLUME ) );

          Log.InfoFormat( "Unit masked for new device is: {0}", volumeBroadcast.dbcv_unitmask );

          int driveIndex = 1;
          int bitCount = 1;
          while( bitCount <= 0x2000000 ) {
            driveIndex++;
            bitCount *= 2;

            if( ( bitCount & volumeBroadcast.dbcv_unitmask ) != 0 ) {
              Log.InfoFormat( "Drive index {0} is set in unit mask.", driveIndex );
              Log.InfoFormat( "Device provides drive: {0}:", (char)( driveIndex + 64 ) );

              int index = driveIndex;

              Thread spawnProcessThread = new Thread( () => SpawnDeviceProcess( string.Format( "{0}", (char)( index + 64 ) ) ) );
              spawnProcessThread.Start();
            }
          }

        } else {
          Log.InfoFormat( "Device type is {0} (ignored).", Enum.GetName( typeof( NativeMethods.DBT_DEVTYP ), deviceBroadcastHeader.dbch_devicetype ) );
        }
      }
    }
  }
} 
```

在我的项目中，我只对检索插入的 USB 密钥的驱动器号感兴趣。此代码检索该驱动器号，然后为设备生成一个专用处理程序进程。

这是在 C# 服务中实现的。System.Windows.Forms 必须被引用。应该工作得很好。

我也许可以将整个项目放到 GitHub 上，但正确清理它似乎非常耗时。我希望这是能够复制结果的足够信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-01T16:46:53.050

问题是，由于“聪明的”微软​​软件工程师完成了“巧妙的”.Net Framework API 设计，类中`OnCustomCommand()`的方法`ServiceBase`（理论上你可以在代码中重写以处理任何服务控制代码）只会传递下去`dwControl`参数——它不向下传递`dwEventType`和`lpEventData`来自本机回调的参数，`ServiceControlHandlerEx()`它们都是正确处理`SERVICE_CONTROL_DEVICEEVENT`、`SERVICE_CONTROL_POWEREVENT`、`SERVICE_CONTROL_SESSIONCHANGE`和`SERVICE_CONTROL_TIMECHANGE`服务控制代码所必需的。

正如其他答案中已经展示的一种解决方法是创建一个不可见的窗口，将其注册以获取特定通知，然后将它们转发到您的服务代码。然而，这是一个可怕的杂物，它增加了大量完全不必要的复杂性和额外的故障点。

更好的选择是忘记`ServiceBase`并使用 Winodws API、P/Invoke 和封送处理实现您自己的服务类，但是您可能会问自己“拥有一个框架有什么意义？”

我们是如何到达 .Net Framework 4.8 版，然后到 .Net Core/Standard 一直到 6.0 版而没有纠正这种公然的 API 设计疏忽，当您考虑将自己的职业转变为不那么迟钝和比软件开发压力小。

与本机 Windows API 相比，像这样的 API 设计中明显的遗漏（而且远非唯一）是 .Net Framework/Core/Standard 成为玩具 API 的原因。

# html - 如何在div之外截断元素

> ID：14514149
> 
> 赞同：1
> 
> 时间：2013-01-25T01:59:49.593
> 
> 标签：html, css

我有以下布局：http: [//jsfiddle.net/7C2R8/](http://jsfiddle.net/7C2R8/)

蓝色容器是我的页面。

我用负边距定位我的图像：

```
.image-wrapper {
    float:right;
    margin-top:-250px;
    margin-right:-100px;
} 
```

图像是我想要的位置，整个事情在大屏幕上按照我想要的方式工作。

当视口较小时，问题就来了。例如，如果视口是容器的大小（在我的示例中为 500 像素宽），则 x 轴上会出现一个滚动条以查看图像。这是我不想要的。我希望在没有足够空间时截断我的图像。容器是唯一应该滚动的东西。

![布局问题](../Images/cd259aa9cc491bd5483975d0cd6d4fca.png)

当视口足够大时，图像应该完全可见。

我如何实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:04:01.520

添加`overflow:hidden;`到您的`.container`班级。

更新：您需要监控页面加载时的宽度以及是否调整大小。看看这个[jsfiddle](http://jsfiddle.net/7C2R8/6/)。

```
$('document').ready(function () { 

    MonitorViewportResize();    
    DoImageOverflow();
});

function DoImageOverflow() {

    if ($(window).width() > 500) {
        $('.container').css('overflow','visible');
    } else {
        $('.container').css('overflow','hidden');
    }
}

function MonitorViewportResize() {

    $(window).resize(function() {
        DoImageOverflow();
    });
} 
```

基本上，我们`overflow`根据窗口的宽度设置属性。让我知道这是否是您的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:47:47.513

我设法通过在容器周围添加一个包装器来做到这一点

```
width:100%;
overflow-x:hidden; 
```

现在这可能不适用于所有情况，但在这种情况下，设计是响应式的，x 轴上不应该有任何滚动，所以它工作正常。

这里的工作解决方案：http: [//jsfiddle.net/Z3m7m/1/](http://jsfiddle.net/Z3m7m/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T02:02:13.697

我认为您正在寻找溢出：隐藏；

```
.container {
    overflow:hidden;
} 
```

# codeigniter - array_merge() [function.array-merge]：参数 #1 不是数组

> ID：14514150
> 
> 赞同：1
> 
> 时间：2013-01-25T01:59:54.960
> 
> 标签：codeigniter, xampp, php

我正在尝试使用 Google-API-PHP-Client 并且它的基类抛出以下错误：

```
Severity: Warning

Message: array_merge() [function.array-merge]: Argument #1 is not an array

Filename: libraries/Google_Client.php

Line Number: 107 
```

像 107 这样的代码是这样的：

```
public function __construct($config = array()) {
    global $apiConfig;
    $apiConfig = array_merge($apiConfig, $config);
    self::$cache = new $apiConfig['cacheClass']();
    self::$auth = new $apiConfig['authClass']();
    self::$io = new $apiConfig['ioClass']();
  } 
```

我知道这`global $apiConfig`没有初始化为数组，这就是 array_merge 抛出错误的原因。但是当我将其更改为 时`global $apiConfig = array();`，又出现了一个错误`Parse error: syntax error, unexpected '=', expecting ',' or ';' in C:\Softwares\xampp\htdocs\testsaav\application\libraries\Google_Client.php on line 106`

> 我正在使用带有 PHP 5.3 的 XAMPP 的 Codeigniter 2.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:01:51.650

在函数中初始化数组（如有必要）

```
public function __construct($config = array()) {
    global $apiConfig;
    $apiConfig = (isset($apiConfig) && is_array($apiConfig)) ? $apiConfig : array(); // initialize if necessary
    $apiConfig = array_merge($apiConfig, $config);
    self::$cache = new $apiConfig['cacheClass']();
    self::$auth = new $apiConfig['authClass']();
    self::$io = new $apiConfig['ioClass']();
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T02:22:40.487

检查您的服务器日志，看看是否有与 Google_Client.php 中的 require_once('config.php') 相关的错误（如果未找到该文件，则脚本应该已停止）。

当您执行 require_once('Google_Client.php') 时，将从该文件执行以下代码。完成您的要求后，您的脚本应该可以看到 $apiConfig。

```
// hack around with the include paths a bit so the library 'just works'
set_include_path(dirname(__FILE__) . PATH_SEPARATOR . get_include_path());

require_once "config.php";
// If a local configuration file is found, merge it's values with the default configuration
if (file_exists(dirname(__FILE__)  . '/local_config.php')) {
  $defaultConfig = $apiConfig;
  require_once (dirname(__FILE__)  . '/local_config.php');
  $apiConfig = array_merge($defaultConfig, $apiConfig);
} 
```

请注意，您不要触摸 config.php。如果您需要覆盖其中的任何内容，请创建 local_config.php。

在我的 PHP 5.3 系统中，我使用了这个脚本。如下所示的脚本不会引发错误。取消设置 $apiConfig 会复制您的错误。

```
<?php

require_once('src/Google_Client.php');

print_r($apiConfig);
// uncommenting the next line replicates issue.
//unset($apiConfig);
$api = new Google_Client();

?> 
```

# sql - TSQL 按问题分组

> ID：14514151
> 
> 赞同：-2
> 
> 时间：2013-01-25T02:00:04.997
> 
> 标签：sql, sql-server, tsql, group-by

下图显示了一组带有列标题的结果：

> TotalEnquires Commission TotalBusinessWritten TotalPaidOut1 formname

我需要按分组`formname`并获取`SUM`每个分组列的`totalenquires, commission, totalbusinesswrittenm, totalpaidout1`

有人可以帮忙吗？

[http://www.gumpshen.com/misc/tsql-help.png](http://www.gumpshen.com/misc/tsql-help.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:02:15.690

```
SELECT formname, SUM(totalenquires), SUM(commission), SUM(totalbusinesswrittenm), SUM(totalpaidout)
FROM table
GROUP BY formname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:01:40.900

你有什么问题？

```
SELECT formname, SUM(TotalEntries), SUM(TotalBusinessWritte), SUM(Commission), SUM(TotalPaidOut1)
FROM table
GROUP BY formname 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T02:06:58.690

```
 SELECT formname,
      SUM(TotalEnquires),
      SUM(Commission),
      SUM(TotalBusinessWritten),
      SUM(TotalPaidOut1)
    FROM YourTable
    GROUP BY formname 
```

# java - 用多个元素JAVA实例化一个数组

> ID：14514158
> 
> 赞同：0
> 
> 时间：2013-01-25T02:01:03.153
> 
> 标签：java, arrays

我试图通过从文件中读取对象来实例化一个对象数组（跑步者）。有六个不同的变量可以描述每个人。我试图弄清楚如何创建一个数组，将这些跑步者的所有相同值存储在同一个元素中，同时保持每个跑步者的各个部分。

该文件如下所示：

```
{1,Gebre Gebremariam,2:08:00,,Ethiopia,ETH
2,Emmanuel Mutai,2:06:28,,Kenya,KEN
3,Geoffrey Mutai,2:05:06,,Kenya,KEN
4,Tsegaye Kebede,2:07:14,,Ethiopia,ETH
6,Jaouad Gharib,2:08:26,,Morocco,MAR
7,Meb Keflezighi,2:09:13,CA,United States,USA
8,Mathew Kisorio,2:10:58,,Kenya,KEN
10,Viktor Rothlin,2:12:26,,Switzerland,SUI
11,Bobby Curtis,2:16:44,PA,United States,USA
12,Ed Moran,2:11:47,VA,United States,USA
14,Abdellah Falil,2:10:35,,Morocco,MAR
15,Juan Luis Barrios,2:14:10,,Mexico,MEX
18,Stephen Muzhingi,2:29:10,,Zimbabwe,ZIM} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:04:13.547

创建一个类`Runner`，该类具有构成单个跑步者的六个字段的属性，然后将您的文件读入 a`List<Runner>`或`Runner[]`.

```
// if this is a CSV file
List<Runner> runners = new ArrayList<Runner>();
for (String[] line: csvLines){
   Runner r = new Runner();
   r.setName(line[0]);
   r.setAge(Integer.parseInt(line[1]);
   runners.add(r);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:06:49.897

下面将一个 Runner 的实例添加到一个 ArrayList 中。您可能希望解析字符串以提供适当的构造函数参数。

```
List<Runner> runners = new ArrayList<Runner>();

BufferedReader bufferedReader = new BufferedReader(new FileReader(file));
String currentLine;

for(int index = 0; (currentLine = bufferedReader.readLine()) != null; index++)
{
    runners.add(new Runner(currentLine));
}

bufferedReader.close(); 
```

# c# - 记录用户操作建议 c# winforms app

> ID：14514164
> 
> 赞同：1
> 
> 时间：2013-01-25T02:01:19.690
> 
> 标签：c#, winforms, logging, entity-framework-4, sql-server-2008-r2

我正在做一个将被许多用户使用的商业应用程序。用户必须登录，系统才能获得他可以访问的表格。

现在，我需要记录他所做的每一个动作。当我说每一个动作时，我的意思是在实体中完成的每一个 AMD（添加-修改-删除）。另外，我想记录他更改/添加/删除了哪些字段及其值。（以防万一，我正在使用实体框架 4）

我正在考虑类似于版本控制的实现。

我的想法是这样做：

![在此处输入图像描述](../Images/9bce26ff053853c9fbc1bf0503cd2aab.png)

每当用户在某些重要实体中执行 AMD 时，我都会添加一个日志条目。在该日志条目中，我将拥有 id_entity_type，它与我正在保存的实体类型有关。（例如：客户、贷款、银行等）。每种类型都将保存在 Entity_type 中。我将不得不在 C# 中检查我正在使用哪种实体来寻找正确的实体。id_entity 是该实体的 ID。id_action_type 是用户执行的操作类型（例如“CREATE”/“UPDATE/“DELETE”）id_user 与用户相关。date_time 以日期和时间记录条目。这是重要的事情：

值，是包含当时实体的所有字段和值的文本。这是一个例子：

实体客户：

*   姓名：约翰
*   姓氏：Doe
*   地址：橡树街 123 号
*   城市：布宜诺斯艾利斯
*   国家 : 阿根廷

然后，在另一个日志条目中，另一个用户将国家更新为 USA

*   姓名：约翰
*   姓氏：Doe
*   地址：橡树街 123 号
*   城市：布宜诺斯艾利斯
*   国家 : 美国

然后，当用户想要检查实体的变化时，他可以通过一个TextDiff（类似于版本控制器）看到实体随着时间的变化。

如果这是实现这一目标的好方法，我想得到一些建议。

我知道数据库的触发器可以用来保存这个日志。我对此知之甚少，但我想我需要为我拥有的每个实体创建一个日志表。

请如果有人知道什么是这样做的好方法，我会很棒。

# regex - 解决方法 Perl 正则表达式限制？

> ID：14514166
> 
> 赞同：2
> 
> 时间：2013-01-25T02:01:27.670
> 
> 标签：regex, perl, size

我编写了一个程序来从邮件文件夹（ [GITHUB](https://github.com/barrycarter/bcapps/blob/master/bc-extract-attachments.pl)）中提取附件，但由于 Perl 对正则表达式匹配的 32767 行限制，它失败了。我的程序将每个邮件消息加载为单个字符串，然后尝试将每个 base64 编码文件匹配为单个字符串。

要复制问题，首先执行以下操作：

```
(dd if=/dev/urandom bs=2000 count=1000 | base64 ; echo "\n\n\n" ; dd if=/dev/urandom bs=2000 count=1000 | base64 ) >! /tmp/testfile.txt 
```

这将创建一个 5403516 字节的文件，其中包含两个文件的 base64 编码，它们之间有一个三重换行缓冲区。生产中的情况稍微复杂一些，但这个更简单的案例说明了问题所在。

我们的目标是提取第一个文件的 base64 编码。换句话说，所有 50 个字符或更长且仅包含 base64 字符的连续行，但在我们看到第一个“=”符号（表示 base64 中的文件结束）时停止。

/tmp/testfile.txt 有 70180 行，前 35088 行代表我们要捕获的字符串（第一个文件的 base64 编码）。

我们现在在 Perl 中执行以下操作：

```
# next 4 lines: read the entire file into a single variable 
undef $/; 
open(A,"/tmp/testfile.txt"); 
$all = <A>; 
close(A); 

# the output of base64 consists of these characters (plus "=" and 
# "\n", but those two are special cases) 
my($chars) = "[a-zA-Z0-9\+\/]"; 

# we declare a subroutine for testing 
sub foo {print STDERR length($_[0]),"\n";} 

# this is what I tried to do originally 
$all=~s/(\n($chars{50,}\=*\n)+)($chars+\=*\n)/foo("$1$3")/seg; 
```

以上产生“2523137”，然后是“178467”，然后是“2523137”，然后是“178544”到STDERR。

换句话说，它捕获第一个文件的前 2523137 个字符，然后是第一个文件的下一个 178467 个字符，而不是像我想要的那样捕获第一个文件的所有 2701604 个字符。请注意，2523137 大约为 77*32767（并且 /tmp/testfile.txt 的每一行长度为 77 个字符）。

@ikegami，如果我理解正确，您的方法是：

```
$all=~s/((\n($chars{50,}\=*\n){0,20000})+)($chars+\=*\n)//seg; 
```

换句话说，一次捕获 20000 行（避免 32767 行限制），但捕获多束 20000 行。它是否正确？

由于结果将出现在多个变量中，因此我没有将结果传递给 foo()，而是将结果打印到 STDERR，如下所示：

```
print STDERR "1 is $1\n"; 
print STDERR "2 is $2\n"; 
print STDERR "3 is $3\n"; 
print STDERR "4 is $4\n"; 
print STDERR "5 is $5\n"; 
print STDERR "6 is $6\n"; 
```

这会产生 $1 和 $2 作为相同的 15085 行变量，$3 和 $4 作为不同的单行变量，并且 $5 和 $6 是空的。

因此，我想我误解了你的方法。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:10:46.393

由于您可以通过静态字符串拆分 base64 片段，因此您可以`$/`更有效地拆分文件，然后选择每个片段是否符合您的标准。

```
use strict;
use warnings;
use autodie;

my $is_base64 = qr{^[a-zA-Z0-9\+\/]+\n?$}m;

{
    open(my $fh,"/tmp/testfile.txt");
    local $/ = "=\n";

    while(my $base64 = <$fh>) {
        chomp $base64;
        _strip(\$base64);
        next unless $base64 =~ $is_base64;

        print STDERR length $base64, "\n";
    }
}

sub _strip {
    my $ref = shift;
    $$ref =~ s{^\s+}{};
    $$ref =~ s{\s+$}{};

    return;
} 
```

这对于拆分邮箱也很方便，设置`$/`为`"\n\nFrom "`.

但是建议您应该使用模块执行此操作的评论是正确的。CPAN 上有*很多*邮件模块，因此很难找到合适的。

# html - 如何使用asp/html在本地机器上执行存储在服务器上的批处理文件？

> ID：14514172
> 
> 赞同：0
> 
> 时间：2013-01-25T02:01:56.627
> 
> 标签：html, asp-classic, batch-file

我正在尝试执行一个带有数字参数并执行操作的 EXE 文件。该操作包含从服务器复制文件并在用户机器上执行。我想在用户单击 URL 时执行 EXE 文件，该 URL 会将这个数字参数输入到这个 EXE 文件中。为此，此 EXE 文件首先需要存在于客户端计算机中。为此，当他们单击“准备安装”复制后，我试图将此文件复制到本地用户计算机，我必须使用 MIME 类型来执行带有参数的 EXE 文件以完成任务。

知道我们如何完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:02:45.107

如果没有他们先安装，您将无法将文件复制到用户计算机。当然，您可以使用 java 甚至 activeX 来做一些事情，但这将是一项艰巨的任务。

您可以设置浏览器对某个文件名扩展名执行的操作，但您无法使用 exe 文件执行此操作。

您也许可以创建一种新形式的文件扩展，将其注册到系统和浏览器，以便它执行文件，但您仍然会在某些浏览器上遇到安全问题，并且您必须进行大量测试不同的配置。

我建议您重新考虑您想要做什么或提供更多详细信息，以便人们可以提供替代解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-30T16:32:04.360

也许这有效：

```
<button onclick="RunFile();"> Prepare to install </button>

<script type="text/javascript" language="javascript">

function RunFile() {
    WshShell = new ActiveXObject("WScript.Shell");
    WshShell.Run("myWebSite/MyApplication.exe", 1, false);
    }

</script> 
```

# objective-c - Facebook iOS6 集成将图像添加到相册而不是单独的帖子

> ID：14514179
> 
> 赞同：0
> 
> 时间：2013-01-25T02:02:30.890
> 
> 标签：objective-c, ios6, facebook-ios-sdk, social-framework

我正在尝试使用社交框架从我的 iOS 应用程序发布到 Facebook。使用 SLComposeViewController，我已成功将文本和图像添加到 Facebook 帖子

```
SLComposeViewController *postVC = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
[postVC setInitialText:messageText];
[postVC addImage:[UIImage imageNamed:@"share-this.png"]];
[self presentViewController:composeVC animated:YES completion:nil]; 
```

现在，我的应用程序的用户可以在几分钟内多次发布到他们的时间线。当我尝试这样做时，Facebook 会将所有帖子整理到相册“iOS 照片”中，并且不会将其显示为单独的帖子。这就是它所显示的 - **John Doe 将 3 张照片添加到相册 iOS Photos。**

我想知道是否有一种方法可以将它们作为**单独**的帖子发布，而不是将它们整理到相册中。我可以使用 SLComposeViewController 的方法本身来做到这一点，还是我必须使用社交框架中的各种帐户管理 API 自己管理发布到 Facebook？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:32:48.910

对此你无能为力。您所看到的是 Facebook 为组织目的而开发的新闻提要功能。我的意思是，即使您创建了多个不同的帖子，当需要向用户显示它们时，Facebook 会检测到您在短时间内有多个图像帖子到同一个相册并将它们组合在一起。

唯一可能的解决方法是建议您的用户在每次呈现作曲家时选择不同的专辑。但是，即使那样，我也不确定这会有多大的不同。Facebook 可能会在短时间内注意到该帖子以及所有包含的图像，并且可能会将它们分组为：

> John Doe 上传了 x 张照片

没有指定他们上传到哪些专辑。

# excel - Excel VBA从url获取网站标题

> ID：14514181
> 
> 赞同：0
> 
> 时间：2013-01-25T02:02:49.117
> 
> 标签：excel, vba

[Excel VBA中的HTML页面标题](https://stackoverflow.com/questions/7625316/html-page-title-in-excel-vba/14509576#14509576)

我知道这已经很老了，但我对此有困难。我已经构建了一个浏览器历史解析器，它在我们的用户计算机 (Office) 上处理来自 Firefox、IE、Safari 和 Chrome 的历史数据，然后它获取不使用此代码的页面的标题。

即使它应该被隐藏，我也会从 IE 中获得弹出窗口。你想离开这个页面，下载弹出窗口，安装这个或那个我必须在它们出现时关闭的 ActiveX。

有没有办法抑制这些或从 VBA 自动关闭那些？如果我不手动操作，计算机/Excel 最终会停止工作，因为我最终会出现几个未关闭的 IE 窗口，或者由于无法再打开 IE 实例而出错。

另外，知道 IE 正在打开我一无所知的网站，我感到很恶心。这个办公室里的感染病例比我以前处理过的还要多。我们必须使用 IE 来运行公司软件。

有没有更好的方法来做到这一点，或者我们只是系统的受害者。与 OOo BASIC 相比，在 MS Office VBA 中实际上可以做的事情很少，我对此感到震惊。至少在基本功能方面（重新调整阵列，FTP 支持）。

为了猴子的爱，请有更好的方法。

我也试过了......

```
Function fgetMetaTitle(ByVal strURL) As String

Dim stPnt As Long, x As String
Dim oXH As Object
'Get URL's HTML Source
Set oXH = CreateObject("msxml2.xmlhttp")
With oXH
    .Open "get", strURL, False
    .send
    x = .responseText
End With
Set oXH = Nothing
'Parse HTML Source for Title
If InStr(1, UCase(x), "<TITLE>") Then
    stPnt = InStr(1, UCase(x), "<TITLE>") + Len("<TITLE>")
    fgetMetaTitle = Mid(x, stPnt, InStr(stPnt, UCase(x), "</TITLE>") - stPnt)
Else
    fgetMetaTitle = ""
End If

End Function 
```

和这个.....

```
Function getMetaDescription(ByVal strURL As String) As String

'Requires Early Binding Reference to MSHTML Object Library
Dim html1 As HTMLDocument
Dim html2 As HTMLDocument

Set html1 = New HTMLDocument
Set html2 = html1.createDocumentFromUrl(strURL, "")

Do Until html2.readyState = "complete": DoEvents: Loop

getMetaDescription = html2.getElementsByTagName("meta").Item("Description").Content

Set html2 = Nothing
Set html1 = Nothing

End Function 
```

下界已经奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:29:09.763

试试这个。在 MS Excel 2010 中工作正常

```
Dim title As String
Dim objHttp As Object
Set objHttp = CreateObject("MSXML2.ServerXMLHTTP")
objHttp.Open "GET", "http://www.google.com/", False
objHttp.Send ""

title = objHttp.ResponseText

If InStr(1, UCase(title), "<TITLE>") Then
    title = Mid(title, InStr(1, UCase(title), "<TITLE>") + Len("<TITLE>"))
    title = Mid(title, 1, InStr(1, UCase(title), "</TITLE>") - 1)
Else
    title = ""
End If

MsgBox title 
```

# c++ - x86 汇编比较参数

> ID：14514186
> 
> 赞同：2
> 
> 时间：2013-01-25T02:03:28.453
> 
> 标签：c++, visual-studio, assembly

我正在使用 Visual Studio 并从 C++ 调用程序集。我知道当您将参数传递给程序集时，第一个参数在 ECX 中，第二个在 EDX 中。为什么不先将ECX复制到EAX就不能直接比较两个寄存器？

C++：

```
#include <iostream>

extern "C" int PassingParameters(int a, int b);

int main()
{
    std::cout << "The function returned: " << PassingParameters(5, 10) << std::endl;

    std::cin.get();
    return 0;
} 
```

ASM：直接比较两个寄存器时会给出错误的值。

```
.code
PassingParameters proc
    cmp edx, ecx
    jg ReturnEAX

    mov eax, edx

ReturnEAX:
    ret
PassingParameters endp
end 
```

但是如果我这样写我得到正确的值，并且可以直接比较两个寄存器，这是为什么呢？

```
.code
PassingParameters proc
    mov eax, ecx ; copy ecx to eax.
    cmp edx, ecx ; compare ecx and edx directly like above, but this gives the correct value.
    jg ReturnEAX

    mov eax, edx

ReturnEAX:
    ret
PassingParameters endp
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T04:16:58.667

在您的第一个版本`jg`中，如果使用 ，您将`eax`完全按照进入函数时的状态离开（即，我们几乎不知道）。由于返回值通常在 eax 中，因此无论何时获取它都会给出未定义的返回`jg`值。换句话说，你写的大致是这样的：

```
int PassingParameters(int a, int b) { 
    if (a < b)
        return a;
} 
```

在这种情况下，如果`a==b`，或`a>b`，您的返回值是垃圾。

在第二个代码序列中，您将一个值加载到 eax 中。然后，如果 jg 没有被取走，则将另一个值加载到 eax 中。无论哪种方式，返回值将是一个输入参数或另一个（取决于哪个更大）。换句话说，你所拥有的大致相当于：

```
int PassingParameters(int a, int b) { 
   if (a<b)
       return a;
    return b;
} 
```

PS我还要注意你的代码看起来像x86，根本不是64位代码。对于 64 位代码，您应该使用 RAX、RCX 等，而不是 EAX、ECX 等。

# xcode - Fink 无法解析 xcode 依赖

> ID：14514187
> 
> 赞同：1
> 
> 时间：2013-01-25T02:03:41.810
> 
> 标签：xcode, macos, pygtk, fink

我刚刚将我的 xcode 升级到 4.5.2 并运行

```
xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

但是当我尝试安装 pygtk 时，出现错误：

```
fink install pygtk2-gtk-py27 
```

输出：

```
Information about 6815 packages read in 0 seconds.
Can't resolve dependency "xcode (>= 4.4)" for package "pixman-0.28.2-1" (no
matching packages/versions found)
Exiting with failure. 
```

我该如何纠正？另外，我只是试图以这种方式安装 pygtk，因为我的 mac 的其他方式没有奏效。当我使用 python 运行以下命令时：

```
import gtk 
```

如果我用自制软件安装，我会收到一个错误，说它找不到 gtk。[当我根据where-is-pygtk-for-mac-os-x 中](https://stackoverflow.com/questions/1164949/where-is-pygtk-for-mac-os-x)的第二个答案从 macpkg 安装时，出现分段错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:43:43.640

除了升级我的 Xcode，还需要安装（再次）命令行工具。有关此过程的说明，请参阅[此答案](https://stackoverflow.com/a/9329325/1676002)。

# java - 由于返回类型，我没有通过junit测试（我认为）

> ID：14514192
> 
> 赞同：0
> 
> 时间：2013-01-25T02:04:36.670
> 
> 标签：java, testing, junit

所以我有一个充满junit测试的类和一个充满执行二进制操作的方法的类。测试正在检查我在某些点是否有正确的值。

我没有通过很多测试，因为我认为是返回类型。例如我收到消息

```
junit.framework.ComparisonFailure: null expected:<[000]> but was <[BinaryNumber@4896b555]> 
```

如果我理解这一点，那就是说它正在寻找一个包含 000 的数组，但它得到了一个 BinaryNumber （这是必需的返回类型）。帮助澄清这里的方法之一。

```
 public BinaryADT and(BinaryADT y) {
    int[] homeArr = pad(((BinaryNumber) y).getNumber());
    int[] awayArr = ((BinaryNumber) y).pad(getNumber());

    int[] solution = new int[awayArr.length];
    int i = 0;
    String empty = "";

    while(i < solution.length){
        solution[i] = homeArr[i] & awayArr[i];
        i++;
    }
    for(int indexF = 0; indexF < solution.length; indexF++){
        empty = empty + solution[indexF];
    }
    System.out.println(empty);

    return new BinaryNumber(empty);
} 
```

我理解对了吗？如果没有，有人可以解释一下吗？我还想指出，这是我的家庭作业，但我不是要求答案/有人为我做。最多只是在正确方向上的一点。

如果需要，我很乐意澄清更多（我不想让一切陷入困境）。

这也是我在这里的第一篇文章。我试图遵守格式建议，但如果有任何内容低于标准，我深表歉意。

正如这里所建议的是测试方法

```
public void testAnd1()
{
    BinaryADT x = new BinaryNumber("111");
    BinaryADT y = new BinaryNumber("000");
    BinaryADT z = x.and(y);
    assertNotSame(x,z);
    assertNotSame(y,z);
    assertEquals("000",z.toString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:28:11.127

**每当您看到像ClassName@SomeNumber**这样的“toString()”输出时，您可以确定该类没有实现 toString() 方法（除非 toString() 方法实现本身不是这样）。

在您的情况下，预期值为 [000]，但您得到的是 [BinaryNumber@4896b555]。

尝试在 BinaryNumber 类中实现 toString() 方法，并按照 assertEquals() 的期望从该方法返回值。这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:13:33.417

你能告诉我你的测试代码吗？

1.您的预期类型与实际类型不同。

2.BinaryADT 类没有覆盖 toString 方法。

# c++ - 在 C/C++ 中通过反射调用函数或方法

> ID：14514194
> 
> 赞同：0
> 
> 时间：2013-01-25T02:04:47.103
> 
> 标签：c++, c, reflection

我只是遇到了一个我以前在 C/C++ 中没有遇到过的问题，我不知道如何解决它。反射。我需要通过用户给出的*字符串调用函数或方法。*不仅如此，我还需要给函数或方法一些参数，如果有的话，得到它的结果。

想象一下用户输入了`printSomething`.

我需要评估`"printSomething"(paramA, paramB)`。当然，函数或方法`T printSomething()`是定义好的。

我能做到的最好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:10:38.620

使用从字符串到指向函数或方法（成员函数）的指针的结构映射。

C++ 没有提供这样的结构；您必须自己构建它，传入名称字符串和指针。还需要实现参数和返回值与字符串之间的转换。该语言没有关于如何完成的约定或想法，因此您必须指定它。

# java - Java：int和double用0毫秒做1亿次简单计算

> ID：14514195
> 
> 赞同：1
> 
> 时间：2013-01-25T02:04:59.960
> 
> 标签：java, int, double

我正在用 double 做一些简单的测试，如下所示：

```
startTime = System.currentTimeMillis();

for (int i = 0; i < 100_000_000; i++) 
{
   doubleCalcTest();
}

endTime = System.currentTimeMillis();    
System.out.println("That took " + (endTime - startTime) + " nanoseconds"); 
```

.

```
public static double doubleCalcTest() 
{
    double x = 987.654321;
    double y = 123.456789;

    x = x + y;
    x = x - y;
    x = x * y;
    return x / y;
} 
```

事实证明，输出是 0 毫秒。这对我来说没有意义，因为如果我将 for 循环设置为仅运行 100,000 次，则输出为 3 毫秒。我发现 int 也以同样的方式行事。

任何人都可以帮我解决这个问题吗？谢谢。

我将代码更改为调用“System.nanoTime”时间，并按照建议传入一个按循环索引递增的双精度值。

```
double x = 123.456789
startTime = System.nanoTime();

for (int i = 0; i < 100_000_000; i++) 
{
   x = x + i;
   doubleCalcTest(x);
}

endTime = System.nanoTime();    
System.out.println("That took " + (endTime - startTime) + " nanoseconds"); 
```

.

```
public static double doubleCalcTest(double x) 
{
    double y = 123.456789;

    x = x + y;
    x = x - y;
    x = x * y;
    return x / y;
} 
```

运行 10,000 次耗时 503,200 纳秒

运行 10,000,000 次耗时 3,421 纳秒

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T02:51:46.067

JIT 放弃执行，`DoubleCalcTest`因为它没有任何副作用（纯计算）并且不使用结果。循环本身也可以优化，因为没有效果。

关闭 JIT 试试这个，大约需要 8000 毫秒：

```
java -Xint snippet.Snippet 
```

在 byteocde 级别，没有任何优化。

```
javap -c snippet.Snippet 
```

结果：

```
public class snippet.Snippet {
  public snippet.Snippet();
    Code:
       0: aload_0       
       1: invokespecial #8                  // Method java/lang/Object."<init>":()V
       4: return        

  public static void main(java.lang.String[]);
    Code:
       0: invokestatic  #16                 // Method java/lang/System.currentTimeMillis:()J
       3: lstore_1      
       4: iconst_0      
       5: istore_3      
       6: goto          16
       9: invokestatic  #22                 // Method DoubleCalcTest:()D
      12: pop2          
      13: iinc          3, 1
      16: iload_3       
      17: ldc           #26                 // int 100000000
      19: if_icmplt     9
      22: invokestatic  #16                 // Method java/lang/System.currentTimeMillis:()J
      25: lstore_3      
      26: getstatic     #27                 // Field java/lang/System.out:Ljava/io/PrintStream;
      29: new           #31                 // class java/lang/StringBuilder
      32: dup           
      33: ldc           #33                 // String That took 
      35: invokespecial #35                 // Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
      38: lload_3       
      39: lload_1       
      40: lsub          
      41: invokevirtual #38                 // Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
      44: ldc           #42                 // String  milliseconds
      46: invokevirtual #44                 // Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
      49: invokevirtual #47                 // Method java/lang/StringBuilder.toString:()Ljava/lang/String;
      52: invokevirtual #51                 // Method java/io/PrintStream.println:(Ljava/lang/String;)V
      55: return        

  public static double DoubleCalcTest();
    Code:
       0: ldc2_w        #64                 // double 987.654321d
       3: dstore_0      
       4: ldc2_w        #66                 // double 123.456789d
       7: dstore_2      
       8: dload_0       
       9: dload_2       
      10: dadd          
      11: dstore_0      
      12: dload_0       
      13: dload_2       
      14: dsub          
      15: dstore_0      
      16: dload_0       
      17: dload_2       
      18: dmul          
      19: dstore_0      
      20: dload_0       
      21: dload_2       
      22: ddiv          
      23: dreturn       
} 
```

如果您尝试通过将 DoubleCalc() 的结果分配给一个变量并在之后打印它来使用它。

```
public static void main(String[] args) {
    long startTime = System.currentTimeMillis();

    double res = 0;
    for (int i = 0; i < 100000000; i++) {
        res = DoubleCalcTest();
    }

    System.out.println(res);
    long endTime = System.currentTimeMillis();
    System.out.println("That took " + (endTime - startTime) + " milliseconds");
} 
```

这将需要同样的时间。为什么？JIT 似乎足够聪明，可以理解结果不取决于迭代完成的次数。

但是，如果您将其更改为：

```
public static void main(String[] args) {
    long startTime = System.currentTimeMillis();

    double res = 0;
    for (int i = 0; i < 100000000; i++) {
        res += DoubleCalcTest();
    }

    System.out.println(res);
    long endTime = System.currentTimeMillis();
    System.out.println("That took " + (endTime - startTime) + " milliseconds");
} 
```

结果取决于迭代次数，JIT 不会进一步优化。在这种情况下，大约需要 100 毫秒。如果我将 100000000 更改为 200000000，则需要两倍的时间。

所以结论是 JIT 停在那里。

笔记：

对于给 C 程序：

```
#include <stdio.h>

int main(int argc, char** argv) {

    long x = 0;
    int i;

    for(i=0; i<1000000; i++) {
       x+=i;
    }
    printf("%ld", x);
} 
```

GCC 能够完全优化循环并在编译时计算 x 的值：

```
gcc -O2 -S main.c 
```

电源：

```
 .file   "main.c"
    .section    .rodata.str1.1,"aMS",@progbits,1
.LC0:
    .string "%ld"
    .section    .text.startup,"ax",@progbits
    .p2align 4,,15
    .globl  main
    .type   main, @function
main:
.LFB11:
    .cfi_startproc
    movabsq $499999500000, %rsi   <---- See, this is the pre-computed result
    movl    $.LC0, %edi
    xorl    %eax, %eax
    jmp printf
    .cfi_endproc
.LFE11:
    .size   main, .-main
    .ident  "GCC: (GNU) 4.7.2 20121109 (Red Hat 4.7.2-8)"
    .section    .note.GNU-stack,"",@progbits 
```

很酷吧？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T02:08:57.007

这是因为您编写的不是 value `100000000`，而是由逗号运算符分隔的三个值`100`, `000`, `000`，它计算其两个操作数，并返回右侧一个的值。您的循环永远不会被输入，因为`100,000,000 == (100,0),0 == 0,0 == 0`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T02:08:28.520

可能已经进行了优化，但可以肯定的是，替换`System.currentTimeMillis`为`System.nanoTime`.

`System.nanoTime`以纳秒为单位返回时间，这要精确得多。此外，[Javadocs](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#currentTimeMillis%28%29)建议使用它来测量经过的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T02:15:55.317

戈登的观点很好。您是否在实际代码中留下了逗号？

如果不是，请尝试将参数值传递给该方法，以便 JVM 无法优化整个事物。

例如 ：

```
public static double DoubleCalcTest(double x) 
{

double y = 123.456789;

    x = x + y;
    x = x - y;
    x = x * y;
    return x / y;
} 
```

然后传入一个按循环索引递增的双精度值。JVM 将无法优化，因为它不再是静态计算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T02:22:19.533

好的。我认为编译器发现你从不使用方法的返回值，所以方法根本没有执行。我的结果似乎与您的不同，但更有意义。

```
public static void main (String args[]) {
    long startTime = System.currentTimeMillis();
    double d = 0;

    for (int i = 0; i < 100000000; i++) {
        //DoubleCalcTest();
    }

    long endTime = System.currentTimeMillis();
    System.out.println("That took " + (endTime - startTime) + " milliseconds");
} 
```

如我所说，在循环中取消注释`DoubleCalcTest();`，结果约为 80 毫秒。评论它，结果是一样的。

现在将其更改为`d += DoubleCalcTest();`结果为 844 毫秒。

之前我想在记录 endTime 之后应该使用 d ，例如 call `System.out.println(d);`，但它没有区别，所以我删除了它。

运行 1,000,000 次，`d += DoubleCalcTest()`大约需要 10 毫秒。这大约是运行 100,000,000 次时间的 1/100，考虑到错误，这是正确的。

# php - 将关联数组转换为具有值的多维数组

> ID：14514198
> 
> 赞同：6
> 
> 时间：2013-01-25T02:05:25.790
> 
> 标签：php, arrays, multidimensional-array

这是一个有趣的情况，我为此创建了一个工作函数，但想知道是否有人对此有更简单的方法。

我有以下多维数组：

```
$foo = array(
    [0] => array(
        'keys' => array( 
            'key1' => 1,
            'key2' => a,
            'key3' => 123
        ),
       'values' => array(
            //goodies in here
        )
    )
    [1] => array(
        'keys' => array( 
            'key1' => 1,
            'key2' => b,
            'key3' => 456
        ),
       'values' => array(
            //goodies in here
        )
    )
) 
```

我想要的是根据数组中的**值**将其转换为嵌套的多维数组`keys`，我正在寻找的输出是：

```
$bar = array(
    [1] => array(
        [a] => array(
            [123] => array( //values array from above )
        ),
        [b] => array(
            [456] => array( //values array from above )
        )
    )
) 
```

键始终可以根据它们在`keys`数组中的位置进行嵌套，但键本身并不总是相同的，`keys`处理用户定义的分组，因此顺序和值可以更改。我也不想要重复的键。

`array_merge`我失败了，因为在很多情况下，数组键实际上是数字 id。所以，这个功能有效——但我想知道我是否给自己做了一副新[手套](http://thedailywtf.com/Articles/The_Complicator_0x27_s_Gloves.aspx "手套")。

```
 protected function convertAssociativeToMulti( &$output, $keys, $value )
   {
      $temp = array();
      $v = array_values( $keys );
      $s = sizeof( $v );
      for( $x = 0; $x < $s; $x++ )
      {
         $k = $v[ $x ];
         if ( $x == 0 )
         {
            if ( !array_key_exists( $k, $output ) )
               $output[ $k ] = array();
            $temp =& $output[ $k ];
         }
         if ( $x && ( $x + 1 ) !== $s )
         {
            if( !array_key_exists( $k, $temp ) )
               $temp[ $k ] = array();
            $temp =& $temp[$k];
         }
         if ( ( $x + 1 ) == $s )
            $temp[$k] = $value;
      }
   }

   $baz = array();
   foreach( $foo as $bar )
   {
      $this->convertAssociativeToMulti( $baz, $bar['keys'], $bar['values'] );
   } 
```

那么，您如何更简单地做到这一点/重构我所拥有的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:36:11.363

这更简洁一些（在[此处](http://phpfiddle.org/main/code/5ct-x36)查看实际操作）：

```
$bar=array();
foreach($foo as $item)
{
    $out=&$bar;
    foreach($item['keys'] as $key)
    {
        if(!isset($out[$key])) $out[$key]=array();
        $out=&$out[$key];
    }
    foreach($item['values'] as $k=>$v) $out[$k]=$v;
//    $out=array_merge($out,$item['values']); -- edit - fixed array_merge
}
var_dump($bar); 
```

# apache - Apache 重定向使用 %{QUERY_STRING} 在任何地方匹配字符串

> ID：14514200
> 
> 赞同：0
> 
> 时间：2013-01-25T02:05:29.820
> 
> 标签：apache, mod-rewrite, query-string

我希望使用 %{QUERY_STRING} 进行 Apache 重定向，但它根本不起作用。

我想重定向任何在 URL 中任何位置都有字符串的网页查询。例如：

[http://www.domain.com/328kadf83/dkad83kd/test83283/](http://www.domain.com/328kadf83/dkad83kd/test83283/)

如上所示，该字符串将是“test”。

我试过这个，但它似乎没有工作：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} test
RewriteRule (.*) http://www.other_domain.com/page.html [R=301,L] 
```

在这种情况下我做错了什么？主要的是 - 重定向需要匹配 URL 中出现字符串“test”的任何位置 - 然后它将重定向到特定的网页。

我在这里看到的其他问题专门针对目录或页面名称后带有变量的问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:20:58.490

应该是这样的：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  /test    [NC]
RewriteRule .*  http://www.other_domain.com/page.html [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:10:30.933

您应该能够在 RewriteRule 中简单地匹配它，如下所示：

`RewriteRule .*test.* http://www.other_domain.com/page.html [R=301,L]`

# file-io - 如何在 Go 中读取二进制文件

> ID：14514201
> 
> 赞同：30
> 
> 时间：2013-01-25T02:05:36.783
> 
> 标签：file-io, go

我对 Go 完全陌生，我正在尝试读取一个二进制文件，一次一个字节或几个字节。文档没有多大帮助，我找不到任何教程或简单的例子（顺便说一句，谷歌怎么会给他们的语言起这样一个不可搜索的名字？）。基本上，我怎样才能打开一个文件，然后将一些字节读入缓冲区？有什么建议吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-25T02:55:31.947

对于操作文件，`os`包是你的朋友：

```
f, err := os.Open("myfile")
if err != nil {
   panic(err)
}
defer f.Close() 
```

有关文件打开方式的更多控制，请参阅`os.OpenFile()`( [doc)](http://golang.org/pkg/os/#OpenFile)。

对于读取文件，有很多方法。（上例中的 the ）`os.File`返回的类型实现了接口（它有一个带有正确签名的方法），它可以直接用于读取缓冲区（a ）中的一些数据，也可以包装在缓冲的读取器中（类型）。`os.Open``f``io.Reader``Read()``[]byte``bufio.Reader`

特别是对于二进制数据，该`encoding/binary`包可能很有用，可以将字节序列读取到某种类型的数据结构中。[您可以在此处的 Go 文档](http://golang.org/pkg/encoding/binary/#Read)中查看示例。该`binary.Read()`函数可以与使用该`os.Open()`函数读取的文件一起使用，因为正如我所提到的，它是一个`io.Reader`.

还有一个简单易用的`io/ioutil`包，它允许你在一个字节片中一次读取整个文件（`ioutil.ReadFile()`，它需要一个文件名，所以你甚至不必自己打开/关闭文件），或者`ioutil.ReadAll()`需要a`io.Reader`并返回包含整个文件的字节切片。这是[关于 ioutil 的文档](http://golang.org/pkg/io/ioutil/#ReadAll)。

最后，正如其他人所提到的，您可以使用“golang”搜索 Go 语言，您应该会找到所需的一切。golang [-nuts 邮件列表](https://groups.google.com/forum/#!forum/golang-nuts)也是一个寻找答案的好地方（发帖前一定要先搜索一下，很多东西已经回答过了）。要查找第三方软件包，请查看[godoc.org](http://godoc.org/)网站。

高温高压

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-28T21:43:26.780

这是我用来将整个二进制文件读入内存的方法

```
func RetrieveROM(filename string) ([]byte, error) {
    file, err := os.Open(filename)

    if err != nil {
        return nil, err
    }
    defer file.Close()

    stats, statsErr := file.Stat()
    if statsErr != nil {
        return nil, statsErr
    }

    var size int64 = stats.Size()
    bytes := make([]byte, size)

    bufr := bufio.NewReader(file)
    _,err = bufr.Read(bytes)

    return bytes, err
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-25T07:55:31.657

例如，要计算文件中零字节的数量：

```
package main

import (
    "fmt"
    "io"
    "os"
)

func main() {
    f, err := os.Open("filename")
    if err != nil {
        fmt.Println(err)
        return
    }
    defer f.Close()
    data := make([]byte, 4096)
    zeroes := 0
    for {
        data = data[:cap(data)]
        n, err := f.Read(data)
        if err != nil {
            if err == io.EOF {
                break
            }
            fmt.Println(err)
            return
        }
        data = data[:n]
        for _, b := range data {
            if b == 0 {
                zeroes++
            }
        }
    }
    fmt.Println("zeroes:", zeroes)
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-06T17:54:24.830

您不能像在 C 中那样异想天开地将原始类型转换为 (char*)，因此对于二进制数据的任何类型的（反）序列化，请使用 encoding/binary 包。 [http://golang.org/pkg/encoding/binary](http://golang.org/pkg/encoding/binary)。我无法改进那里的例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-09T04:03:09.887

下面是一个使用`Read`方法的例子：

```
package main

import (
   "io"
   "os"
)

func main() {
   f, e := os.Open("a.go")
   if e != nil {
      panic(e)
   }
   defer f.Close()
   for {
      b := make([]byte, 10)
      _, e = f.Read(b)
      if e == io.EOF {
         break
      } else if e != nil {
         panic(e)
      }
      // do something here
   }
} 
```

[https://golang.org/pkg/os#File.Read](https://golang.org/pkg/os#File.Read)

# c# - Json.Encode() 是否使用 JavaScriptSerializer 类进行序列化

> ID：14514202
> 
> 赞同：5
> 
> 时间：2013-01-25T02:05:46.663
> 
> 标签：c#, json, razor, javascriptserializer

`Json.Encode()`Helper是否使用`JavaScriptSerializer`该类将字符串编码为 json？

`Json.Encode(Model)`即使我正在序列化的类属性具有该属性，我在使用时也会遇到循环引用异常`[ScriptIgnore]`。

我唯一的猜测是，也许`Json.Encode()`助手没有使用 JavaScriptSerializer 序列化为 json，但我在 msdn 上的任何地方都找不到文档。

```
@Html.Raw(Json.Encode(Model)) 
```

这是具有不应序列化的属性的模型之一的示例...

```
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using System.Web.Script.Serialization;

namespace RobotDog.Entities {
    public class Character {
        [Key]
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int Id { get; set; }

        [MaxLength(200)]
        public string Name { get; set; }

        public virtual Person Person { get; set; }

        [ScriptIgnore]
        public virtual Movie Movie { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T05:45:09.543

> Json.Encode() Helper 是否使用 JavaScriptSerializer 类将字符串编码为 json？

是的。

从源代码：

```
private static readonly JavaScriptSerializer _serializer = Json.CreateSerializer();

public static string Encode(object value)
{
  DynamicJsonArray dynamicJsonArray = value as DynamicJsonArray;
  if (dynamicJsonArray != null)
    return Json._serializer.Serialize((object) (object[]) dynamicJsonArray);
  else
    return Json._serializer.Serialize(value);
} 
```

`JavaScriptSerializer`在哪里`System.Web.Script.Serialization.JavaScriptSerializer`

也可以帮助您解决问题，请参阅[此线程](https://stackoverflow.com/questions/9263987/circular-references-and-scriptignore-problems)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:53:47.810

[http://msdn.microsoft.com/en-us/library/system.web.helpers.json.encode(v=vs.111).aspx](http://msdn.microsoft.com/en-us/library/system.web.helpers.json.encode(v=vs.111).aspx)

根据上面的链接 Json.Encode 使用 system.web.helpers。

你的模型包含什么？

另外，您确定 [ScriptIgnore] 会忽略您分配给它的内容吗？

# ajax - AJAX 响应不运行任何脚本

> ID：14514204
> 
> 赞同：0
> 
> 时间：2013-01-25T02:06:12.153
> 
> 标签：ajax

`response_ajax.php`我的页面使用以下代码得到响应：

```
<input class="btn" name="send_button" type="button" value="check"
  onClick=
    "xmlhttpPost('/response_ajax.php',
    'MyForm',
    'MyResult',
    '<img src=/busy.gif>')";
  return false;"
> 
```

我得到回应；但是，jQuery 脚本不适用于到达的代码。我正在尝试添加`script`inside `response_ajax.php`，但没​​有任何反应：

```
<?php

// ... //

echo '

  <div id="whois-response">
    <pre>' .$str. '</pre>
  </div>

  <script>
    (function($){
      $(function(){
        alert("loaded");
      });
    })(jQuery);
  </script>

';  

?> 
```

* * *

`xmlhttpPost`功能：

```
function xmlhttpPost(strURL,formname,responsediv,responsemsg) {

    var xmlHttpReq = false;

    var self = this;

    // Xhr per Mozilla/Safari/Ie7

    if (window.XMLHttpRequest) {

        self.xmlHttpReq = new XMLHttpRequest();

    }

    // per tutte le altre versioni di IE

    else if (window.ActiveXObject) {

        self.xmlHttpReq = new ActiveXObject("Microsoft.XMLHTTP");

    }

    self.xmlHttpReq.open('POST', strURL, true);

    self.xmlHttpReq.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

    self.xmlHttpReq.onreadystatechange = function() {

        if (self.xmlHttpReq.readyState == 4) {

            // Quando pronta, visualizzo la risposta del form

            updatepage(self.xmlHttpReq.responseText,responsediv);

        }

        else{

            // In attesa della risposta del form visualizzo il msg di attesa

            updatepage(responsemsg,responsediv);

        }

    }

    self.xmlHttpReq.send(getquerystring(formname));

}

function getquerystring(formname) {

    var form = document.forms[formname];

    var qstr = "";

    function GetElemValue(name, value) {

        qstr += (qstr.length > 0 ? "&" : "")

            + escape(name).replace(/\+/g, "%2B") + "="

            + escape(value ? value : "").replace(/\+/g, "%2B");

            //+ escape(value ? value : "").replace(/\n/g, "%0D");

    }

    var elemArray = form.elements;

    for (var i = 0; i < elemArray.length; i++) {

        var element = elemArray[i];

        var elemType = element.type.toUpperCase();

        var elemName = element.name;

        if (elemName) {

            if (elemType == "TEXT"

                    || elemType == "TEXTAREA"

                    || elemType == "PASSWORD"

                    || elemType == "BUTTON"

                    || elemType == "RESET"

                    || elemType == "SUBMIT"

                    || elemType == "FILE"

                    || elemType == "IMAGE"

                    || elemType == "HIDDEN")

                GetElemValue(elemName, element.value);

            else if (elemType == "CHECKBOX" && element.checked)

                GetElemValue(elemName, 

                    element.value ? element.value : "On");

            else if (elemType == "RADIO" && element.checked)

                GetElemValue(elemName, element.value);

            else if (elemType.indexOf("SELECT") != -1)

                for (var j = 0; j < element.options.length; j++) {

                    var option = element.options[j];

                    if (option.selected)

                        GetElemValue(elemName,

                            option.value ? option.value : option.text);

                }

        }

    }

    return qstr;

}

function updatepage(str,responsediv){

    document.getElementById(responsediv).innerHTML = str;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:34:10.727

我可能是错的，但我很确定你不能做多行字符串，除非它被配置为这样做（并运行较新版本的 PHP）：

```
echo '

  <div id="whois-response">
    <pre>' .$str. '</pre>
  </div>

  <script>
    (function($){
      $(function(){
        alert("loaded");
      });
    })(jQuery);
  </script>

'; 
```

尝试将其更改为：

```
echo <<<EOD

  <div id="whois-response">
    <pre> $str </pre>
  </div>

  <script>
    (function($){
      $(function(){
        alert("loaded");
      });
    })(jQuery);
  </script>

EOD; 
```

我认为您的 AJAX 响应是 PHP 错误，而不是您认为它正在返回的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:38:55.753

通过将 jQuery 人员添加为函数来使其工作

```
function updatepage(str,responsediv){

    document.getElementById(responsediv).innerHTML = str;

    (function($){
      $(function(){
        $('html').my_jQuery_staff();
      });
    })(jQuery);

} 
```

带有 jQ​​uery 的主要 JavaScript 文件：

```
// ~~ jQuery ~~
$(document).ready(function () {

    $.fn.my_jQuery_staff= function() {   
      return this.each(function() {   

        // Include jQuery staff here.

      });   
    };

    $('html').my_jQuery_staff();

}); 
```

# android - EditText 或 TextView 的 setText 方法在 switch 语句中不起作用

> ID：14514206
> 
> 赞同：2
> 
> 时间：2013-01-25T02:06:15.347
> 
> 标签：android, textview, android-edittext, settext

我有两个类，一个叫做 SQLiteExample，它有一个 switch 语句。在此开关中是一个按钮单击侦听器，我想在其中将生成的 int 读入 TextView，这不起作用。我可以将 int 读入 Toast 消息并正确显示它。但是，当我将它读入文本视图时，我不知道为什么当我这样做时它会在 logcat 中出现错误。TextView 已正确注册。

```
 public class SQLiteExample extends Activity implements OnClickListener {

 case R.id.bSQLnumberofrows:
        PlayGame ec = new PlayGame(this);
        ec.open();
        int x = ec.fetchPlacesCount();
        ec.close();
        showNumbers.setText(x);  // setText not working
                     // Toast message works perfectly and displays value of "x" on screen
        Toast.makeText(SQLiteExample.this, "value of x " + x , Toast.LENGTH_SHORT).show();
        break; 
```

这是logcat错误：

```
01-25 10:52:04.540: E/AndroidRuntime(8449): FATAL EXCEPTION: main
01-25 10:52:04.540: E/AndroidRuntime(8449): android.content.res.Resources$NotFoundException: String resource ID #0x5
01-25 10:52:04.540: E/AndroidRuntime(8449):     at android.content.res.Resources.getText(Resources.java:247)
01-25 10:52:04.540: E/AndroidRuntime(8449):     at android.widget.TextView.setText(TextView.java:3473)
01-25 10:52:04.540: E/AndroidRuntime(8449):     at com.example.dbsample.SQLiteExample.onClick(SQLiteExample.java:127) 
```

第 127 行是异常所在： showNumbers.setText(x);

另一个类是 PlayGame，它有一个方法可以将 SQLite 数据库中的行数作为 int 获取：

```
 public class PlayGame {

 public int fetchPlacesCount() {
        int count = 0;
        Cursor q = ourDatabase.rawQuery("SELECT COUNT(*) from " + DATABASE_TABLE, null);
        q.moveToFirst();
       count = q.getInt(0);
        return count;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:12:21.440

您正在调用的版本`setText()`接受一个`int`参数，该参数应引用 XML 文件中的字符串资源。您需要将您的转换`int`为 a`String`以便在 TextView 中显示其值。请注意，您`"value of x " + x`在使用 Toast 时会隐式执行此操作。您可以通过调用将 a 显式转换`int`为 a 。`String``String.valueOf(x)`

# c++ - 拥有一个动态对象的 std::array 是否安全？

> ID：14514211
> 
> 赞同：1
> 
> 时间：2013-01-25T02:06:55.820
> 
> 标签：c++, arrays, memory-management, stl, c++11

`std::array`例如，拥有一个动态对象`std::array<std::string, 3>`并调整内容（字符串）的大小是否安全？（因为拥有一个原始的 C 字符串数组可能会有问题）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T02:11:57.290

是的，因为`std::array`它只是一个包含底层 C 样式数组的友好模板。你可以把它想象成这样：

```
template <typename T, int size>
class Array {
...
   T vals[size];
} 
```

将 T 更改为上面的字符串，您将很快意识到您可以对字符串数组的内容执行的任何操作都可以`std::array`对字符串执行。这包括调整大小、删除任何你能想象到的东西。

要更深入地思考它，请以这种方式思考。`std::array`持有一个字符串。字符串不知道它被固定在哪里。当数组本身被赋值时，数组可能会告诉字符串复制自己（通过复制构造函数或赋值）。然而，这完全是通过字符串的公共接口实现的。字符串被任何数据结构保存的事实不会限制该字符串的功能，它只会使持有者（在这种情况下）成为公共接口的`std::array`另一个客户端。`string`

由于容器`std::array`需要处理多种类型，因此它们倾向于对`T`传入的类型做出相对较少的典型记录假设。诸如要求 T 可以复制构造、默认构造和分配之类的东西。然后它通常由实施者*`T`来确保这几个假设是有效的。

[*有一个非常高级的主题，称为模板专业化，其中可以编写一个专门的数组版本，只是为了说“字符串”。除了`vector<bool>`这些在标准容器中非常罕见。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:08:40.707

假设您的意思是调整字符串的大小，那么是的。

# php - 算作查询的一部分

> ID：14514217
> 
> 赞同：0
> 
> 时间：2013-01-25T02:07:41.190
> 
> 标签：php, mysql, count

如果我有一个用户表和一个问题表，其中一个用户可以有多个问题，我可以返回，例如，

```
bob | 10 questions
sam | 2 questions 
```

一个查询？

将 php 与 pdo 一起使用以获得它的价值。

```
users table

userID
name
etc.

questions table

questionID
userID
question
flagged
answered
etc. 
```

我想要用户表中的一些字段以及同一行上相关问题的计数。如果无法完成，我将只使用单独的查询，但我只是想我会要求为了有更整洁的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:10:12.123

像这样的东西：

```
SELECT u.*, COUNT(*) questions
FROM users u
JOIN QUESTIONS q ON u.userid = q.userid
GROUP BY u.userid 
```

如果您只想要用户表中的某些列，请替换`u.*`为您关心的列列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:12:13.860

假设您有一个表，其中包含每个用户的一个或多个问题；

```
SELECT Count(DISTINCT id) FROM questions
// or
SELECT Count(id) FROM questions GROUP BY user_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T02:23:45.043

这就是我所说的：

```
 SELECT u.name, COUNT(*) questions
    FROM users u
    JOIN questions q ON u.userID = q.userID
    GROUP BY u.name 
```

# html - 仅将 HTML 文件上传到 appfog

> ID：14514218
> 
> 赞同：2
> 
> 时间：2013-01-25T02:07:43.337
> 
> 标签：html, web, upload, appfog

我是 Appfog 的新手，没有看到任何有关如何仅上传 html 文件的文档。当它询问我正在使用什么代码时，我不确定要选择什么：它列出了 python、flask、java 等作为选项而不是 html。我在哪里放置我的 html 代码以及默认的 wsgi.py 文件应该做什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T04:48:46.843

如果您想创建一个仅 HTML 的应用程序，请使用 PHP 作为运行时，并且即使 af 工具检测到独立，**也不要使用独立：**

```
af push                
Would you like to deploy from the current directory? [Yn]: y
Application Name: [APP NAME]
Detected a Standalone Application, is this correct? [Yn]: n #<< NOPE
1: Rails
2: Spring
3: Grails
4: Lift
5: JavaWeb
6: Standalone
7: Sinatra
8: Node
9: PHP
10: Erlang/OTP Rebar
11: WSGI
12: Django
13: Rack
14: Play
Select Application Type: 9 #<< PHP will do
Selected PHP Application
1: AWS US East - Virginia
2: AWS EU West - Ireland
3: AWS Asia SE - Singapore
4: Rackspace AZ 1 - Dallas
5: HP AZ 2 - Las Vegas
Select Infrastructure: 1
Application Deployed URL [your app name.aws.af.cm]: 
Memory reservation (128M, 256M, 512M, 1G, 2G) [128M]: 
How many instances? [1]: 
Bind existing services to 'app name'? [yN]: n #<< dont need services
Create services to bind to 'app name'? [yN]: n #<< no bindings
Would you like to save this configuration? [yN]: n 
```

确保您的根文件夹有一个 index.html

# oracle - 如何在查询中为返回的值设置别名？

> ID：14514222
> 
> 赞同：1
> 
> 时间：2013-01-25T02:08:18.767
> 
> 标签：oracle

我有一个查询最终将返回一个可能具有值“1”、“2”或“3”的列，其中 1 表示红色，2 表示蓝色，3 表示绿色。

如何修改查询而不是返回 1，而是返回 'RED'，返回 2 'BLUE'，等等

我希望我的结果是这样的：

**颜色**

红色的

红色的

绿色

蓝色的

代替 ：

**颜色**

1

1

3

2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:53:40.410

或者，并且符合更多标准：

```
SELECT CASE WHEN MyField = 1 THEN 'RED'
            WHEN MyField = 2 THEN 'BLUE'
            WHEN MyField = 3 THEN 'GREEN'
            ELSE 'UNDEFINED'
       EMD myfieldColor
FROM myTable; 
```

它也更灵活，因为您可以在 WHEN 子句中使用更广泛的 SQL 分类。例如：

```
WHEN MyField = 2 AND Lang = 'SPANISH' THEN 'AZUL' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T02:15:23.273

```
SELECT Decode(MyField, 1, 'RED'
                       2, 'BLUE'
                       3, 'GREEN'
                          'UNDEFINED' as myfieldColor

FROM myTable 
```

# php - 查找数组中数值最小的节点

> ID：14514223
> 
> 赞同：2
> 
> 时间：2013-01-25T02:08:21.323
> 
> 标签：php

我有以下数组输出：

```
Array ( 
    [0] => SimpleXMLElement Object ( [0] => 32.4 km )
    [1] => SimpleXMLElement Object ( [0] => 10.2 km )
    [2] => SimpleXMLElement Object ( [0] => 205 km )
    [3] => SimpleXMLElement Object ( [0] => 50.8 km ) 
) 
```

我试图从特定地址获得最短距离，从这个结果中最短的是 10.2 公里。如何比较所有公里距离并仅显示数字最小的距离？

我的主要目标是根据这个数组结果获得最短距离。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:27:33.673

[`floatval()`](http://php.net/floatval)使用和从数组中提取数值[`array_map()`](http://php.net/array_map)，然后使用[`min()`](http://php.net/manual/en/function.min.php)查找数组中的最小值：

```
echo min(array_map('floatval', $array)); 
```

演示：[http ://codepad.org/LRNig19H](http://codepad.org/LRNig19H)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:19:58.410

如果您想重新使用`SimpleXMLElement`包含最低距离值的整体而不只是打印距离（假设对象包含的数据不仅仅是距离），您可以根据需要调整此代码段：

```
$lowest_item = NULL; 
$lowest_value = NULL;
// iterate over all SimpleXMLElements as a reference for later re-use
foreach ($array as &$item) {
    // extract number from string -- adjust $item[0] to the real object property
    $numeric_value = floatval($item[0]);
    // check if current item is lower than one of the previous
    if ($lowest_value == NULL || $lowest_value >= $numeric_value) {
        $lowest_item = $item;
        $lowest_value = $numeric_value;
    }
}
var_dump($lowest_item); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T02:14:09.140

```
$min_distance = $array[0][0];

foreach($array as $distance)
  $min_distance = (filter_var($distance[0], FILTER_SANITIZE_NUMBER_FLOAT) < filter_var($min_distance, FILTER_SANITIZE_NUMBER_INT)) ? $distance[0] : $min_distance;

echo $min_distance; 
```

因为我不知道你的数组叫什么，所以我用了`$array`. 希望对你有帮助！

关于我使用的方法的一点解释。

`foreach`遍历数组的每个元素。当前节点将保存在变量 after 中`as`。

`filter_var($var, FILTER_SANITIZE_NUMBER_FLOAT)`正在用字符串制作一个数字，而不是完全由数字组成。表示`"23.5 km"`转换为`23.5`.

`(boolean) ? value1 : value2`只是一个简短的 if 语句。如果`boolean`为真，则表达式 eqauls `value1`，如果不是`value2`。

我希望这会有所帮助。

# ruby - Ruby 中的优雅循环 Elsing

> ID：14514233
> 
> 赞同：5
> 
> 时间：2013-01-25T02:09:26.293
> 
> 标签：ruby, loops

我必须编写一个 Ruby 方法：

1.  遍历一个数组，如果其中一个元素匹配某个条件，则执行 Foo 。

2.  如果没有任何数组元素符合条件，则执行 Bar 操作。

在任何其他语言中，我会在进入循环之前设置一个布尔变量，如果我做了 Foo. 该变量的值会告诉我是否需要 Bar。但这感觉非常不雅。有人可以提出更好的方法吗？

**编辑**一些非常好的答案，但由于我应该提到的一个细节，它们并不能很好地工作。Foo 所做的事情是对匹配条件的数组元素执行的。此外，保证最多有一个元素与条件匹配。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T02:14:06.583

是否有任何项目匹配？如果是，那么做一些事情，不涉及匹配的项目。

```
if items.any? { |item| item.totally_awesome? }
  foo "we're totally awesome!"
else
  bar "not awesome :("
end 
```

抓住第一个匹配的项目。如果它存在，那么对匹配的项目做一些事情。

```
awesome_item = items.find { |item| item.totally_awesome? }
if awesome_item
  foo "#{awesome_item.name} is totally awesome!"
else
  bar "no items are awesome :("
end 
```

抓住所有匹配的项目。如果数组中有任何东西，那么对所有匹配的项目做一些事情。

```
awesome_items = items.find_all { |item| item.totally_awesome? }
if awesome_items.any?
  foo "#{awesome_items.size} totally awesome items!"
else
  bar "no items are awesome :("
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T02:13:43.407

你可以这样做：

```
if array.any? { |elem| elem.condition }
  foo
else
  bar
end 
```

从[doc](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-any)，`Enumerable#any`执行以下操作：

> 将集合的每个元素传递给给定的块。如果块曾经返回 false 或 nil 以外的值，则该方法返回 true。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-25T03:22:22.923

你想要的是[Enumerable#find](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find)

前任：

```
element = array.find { |x| x.passes_requirements? }
element ? element.foo! : bar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T02:14:51.987

编辑：根据新的问题标准进行修改。

```
found_index = nil
my_array.each_with_index.detect { |elem, i| elem.condition? && found_index = i }
if found_index.nil?
  do_not_found_case
else
  my_array[found_index] = some_conversion(elem)
end 
```

这不是那么漂亮，但它完成了工作并且在第一场比赛中仍然短路。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T02:39:17.383

```
idx = the_array.index { |i| conditional(i) }
if idx
  modify_object(the_array[idx])
else
  no_matches
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T05:10:58.590

感谢所有试图回答这个问题的人。你们都没有提供我认为合适的答案，但你们都强迫我思考如何以 Ruby 方式做事（这是本练习的重点！）并帮助我想出了这个答案：

我需要利用 Ruby 中的迭代器只是方法这一事实。所有方法都返回一个值，并且（很奇怪）`each`返回一个*有用*的值。如果迭代完成，它将返回您正在迭代的集合；如果您使用`break`提前终止迭代，它会返回`nil`（或可选参数）。

所以，在布尔上下文中，整个循环是`true`它是否完成并且`false`是否中断。因此

```
bar if array.each do |element|
  if fooable(element) then
    foo(element)
    break
  end
end 
```

# algorithm - 找到 2 个连续的 Array 块，总和最大。返回他们的总和

> ID：14514236
> 
> 赞同：0
> 
> 时间：2013-01-25T02:09:51.483
> 
> 标签：algorithm, max, arrays

块不能重叠。它们也不能相邻。假设 A 的长度 > 2。

我知道这与查找最大子数组的总和非常相似，并且可以在线性时间内完成。

我也很确定该算法的开始与查找最大子数组问题相同。

这是我前几天听到的一个问题，想看看如何解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:11:50.840

你可以做两次 max-subarray-algorithm 。

## 算法

1.  我们定义了一个函数 L[i]，它表示 a[i] 之前的 max-subarray 的总和。它可以从左到右执行最大子数组算法，复杂度为 O(n)。
2.  我们定义了一个函数 R[i]，它表示 a[i] 之后的 max-subarray 的总和。它可以从右到左执行最大子数组算法，复杂度为 O(n)。
3.  从 1 扫描到 n，答案将是最大的 L[i] + R[i+1]。这一步将是 O(n) 复杂度。
4.  简单证明：任何解决方案都将从数组中的一个元素中分割出来，因此我们可以计算每个位置前后的 max-subarray 之和。

## 代码

```
def max_two_sub_array():
    sum = l[0] = ls[0] = 0
    for i = 1 to n:
        sum += a[i]
        if sum < 0: sum = 0
        if l[i - 1] > sum:
            l[i] = l[i - 1]
            ls[i] = ls[i - 1] # endpoint of l[i]
        else
            l[i] = sum
            ls[i] = i

    sum = r[n + 1] = 0
    rs[n + 1] = n + 1
    for i = n to 1:
        sum += a[i]
        if r[i + 1] > sum:
            r[i] = r[i + 1]
            rs[i] = rs[i + 1] # startpoint of r[i]
        else
            r[i] = sum
            rs[i] = i
    ans = 0
    for i = 0 to n:
        ans = max(ans, l[i] + r[i + 1])
    return ans 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T02:17:16.417

2个步骤：

1.  使用 O(n) 找到整个数组中最大和的块。假设块从a[i]开始，以a[j]结束，总和为S1

2.  使用 O(n) 找到前一个块的和最小的块。假设总和为 S2

最终答案是 S1-S2

应考虑一些边界情况：

如果数组是 1,2,3,2,1。第 1 步将整个数组作为块返回。第 2 步将返回 1。但这违反了 2 个块不应相邻的要求。所以对于第 2 步，你应该应用从 a[i+1] 开始并以 a[j-1] 结束的算法

# jquery - 来自 href 的 jQuery 标识符

> ID：14514237
> 
> 赞同：0
> 
> 时间：2013-01-25T02:09:54.480
> 
> 标签：jquery

我想从一系列href中获取id ...我得到了我正在寻找的答案-但是它们在我现有代码的上下文中不起作用-

“删除确认”和“编辑对话框调用”都在 jsFiddle [http://jsfiddle.net/RK4Ye/](http://jsfiddle.net/RK4Ye/)中工作- 但不是当通过 jQuery 生成链接时......我不知道原因是什么...... .但是我已经删除了所有其他js，这些都不起作用...其他信息-页面在jQueryUI选项卡中作为选项卡运行...

帮助PLZ ..我什至不知道如何找到问题，所有代码在添加这两个功能之前都可以工作......并且没有抛出错误......

问题：是编辑链接和删除链接都带你到href，类选择器没有捕获点击事件并停止请求......（我意识到ajax调用将无法完全复制行为- 但相信我的话它正在返回并正常运行 - 但我会包含一个 JSON 数据包以防万一）

```
$( function() {

function loadTable() {
    $.ajax({
        type: 'POST',   
        url: 'list.php',    
        dataType: 'json',   
        success: function ( data ) {                
            var items = [];
            var line = 1;

            // clear the table
            $( '#companies-list' ).html( '' );

            // the real data
            $.each( data.companies, function ( key, value ) {   
                var thisRowClass = 'odd';
                if ( line % 2 ) {
                    thisRowClass = 'even';
                }
                items.push( '<tr class="' + thisRowClass + '"><td nowrap>'  + value.company + 
                            '</td><td>' + value.address + 
                            '</td><td>' + value.city + 
                            '</td><td>' + value.state + 
                            '</td><td>' + value.zip + 
                            '</td><td nowrap>' + value.phone + 
                            '</td><td>' + value.contact + 
                            '</td><td>' + value.email + 
                            '</td><td>' + value.jobscurrent + 
                            '</td><td>' + value.jobsdone + 
                            '</td><td nowrap> <a href="m/company.php"  data-identity="' + value.id + '" class="uLink">edit</a> |  <a href="m/company.php?d=' + value.id + '" class="dLink">delete</a> ' +
                            '</td></tr>' ); 
                line++ ;
            }); 

            $( '#companies-list' ).append( items.join( '' ) );                                 

        },

        error: function () {    
            // there's an error
            $( '#message' ).html( '<p>There was a problem on the server... </p>' ); 
        }
    });
}

// pre load my list when page loads
loadTable();

// DELETE CONFIRM
$( '.dLink' ).click( function( event ) {
    var response = confirm( 'Are you sure you want to delete this item?' );
    //the following is the tertiary version of: if (response) { return true; } else { return false; }
    return( response ) ? true : false;
});

// EDIT DIALOG CALL     
$( '.uLink' ).click( function() {
    var id = $( this ).data( 'identity' );
    alert( id );

    return false;
});

}); 
```

HTML 看起来像这样

```
<div id="companies-container" class="ui-widget">
<h3>List of Companies</h3>
<table id="companies" class="ui-widget ui-widget-content list"> 
<thead>
    <tr class="ui-widget-header ">
        <th>Company</th>
        <th>Address</th>
        <th>City</th>       
        <th>State</th>
        <th>Zip</th>
        <th>Phone</th>
        <th>Contact</th>
        <th>Email</th>      
        <th>Jobs Current</th>
        <th>Jobs Done</th>
        <th>&nbsp;</th>
    </tr>
</thead>

<tbody id="companies-list"> 
</tbody>

<tfoot> 
</tfoot>
</table>
</div> 
```

示例 JSON 数据包：

```
{ "count": "3", "companies": [{ "id":"2", "company":"Main Customer A", "address":"1234 street ", "city":"Gallatin", "state":"TN", "zip":"30766", "phone":"", "contact":"", "email":"", "jobscurrent":"", "jobsdone":"" },{ "id":"3", "company":"Sub Customer B", "address":"232 road ", "city":"Galatan ", "state":"TN", "zip":"60766", "phone":"", "contact":"", "email":"", "jobscurrent":"", "jobsdone":"" },{ "id":"4", "company":"Sub Customer C", "address":"333 pkwy ", "city":"Nashville", "state":"TN", "zip":"37204", "phone":"", "contact":"", "email":"", "jobscurrent":"", "jobsdone":"" } ] } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:15:11.267

这个问题让我很困惑，但我认为这就是你所追求的。您可以使用`data`属性和 jQuery 的相应`data`方法来获取值。

因此，更改您的 html 以获得指向此的链接

```
<a class="e" href="/somelink" data-identity="23">Edit</a> 
```

和你的点击处理程序

```
$('.e').click( function() {
    // notice that you just use the text after the dash to grab the value
    var id = $(this).data('identity');

    // ajax to pull the details

    // populate form

    // open dialog (with form populated
    $('#myForm').dialog('open');
    return false;
}); 
```

这能回答你所有的问题吗？这比尝试从 url 中解析值要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:35:12.497

几件事。您可以将 ID 作为锚链接的 id 传递...

```
thing one <a href="x.php?id=1" class="e" id='edit-1'>edit</a>

$('.e').click(function(event) {
 //prevent the browser from going anywhere
  event.preventDefault();
  var id = this.id.replace('edit-','');

  // NOW YOU HAVE THE ID IN THE VARIABLE > id
  // Do with it as you wish

}); 
```

您在删除功能中也犯了一个错误。你不需要阻止Default()...

```
$('d').click(function() {
   var response = confirm('Do you want to delete this?');
   //the following is the tertiary version of: if (response) { return true; } else { return false; }
   return (response) ? true : false;
} 
```

在您的代码中：

```
<a href="?delete={ID}" class'd'>DELETE</a> 
```

或者你可以这样做：

```
<a href="?delete={ID}" onclick="return confirm('Do you wnat to delete this?')">DELETE</a> 
```

# jquery - 在 ajax 响应中使用 jQuery 设置事件处理程序

> ID：14514242
> 
> 赞同：1
> 
> 时间：2013-01-25T02:10:58.160
> 
> 标签：jquery, jquery-selectors

我有一个 home.php 页面，该页面有一个按钮来调用 ajax 调用来替换元素的内容

```
$(document).ready(function() {
    $("#button").click(function() {
         $ajax(...).done(function(response) { $("#home-cabinet").html(response) });
    });
}); 
```

ajax 响应中有一些 HTML 元素，我还想绑定一些事件处理程序。但问题是我不知道响应的内容，所以我无法将 jQuery 元素选择器代码粘贴在 .done() 中。

如果我可以让响应设置处理程序本身，那就更有意义了。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:13:31.460

添加到响应数据

```
<input type="button" id="newElement" />
...
...
<script>
    $('#newElement').on('something', function(){});
</script> 
```

请注意，DOM 就绪事件不会在 ajax 请求上触发，因此请确保`<script>`在元素之后写入。

> 但问题是我不知道响应的内容

你应该知道你会得到什么，这是你请求的域......无论如何，上面应该可以正常工作。

# javascript - HTML使图像充当按钮而不提交的正确方法

> ID：14514244
> 
> 赞同：0
> 
> 时间：2013-01-25T02:11:13.453
> 
> 标签：javascript, html

我需要放置一个充当按钮的图像，它将带您返回一个屏幕。为了返回上一个屏幕，我编写了以下内容：

```
<input type="image" src="../../img/button_cancel_gray.gif" type="button" onclick="history.go(-1);"/> 
```

哪个有效，除了它也在提交表单。我需要它来防止提交表单。

作为替代方案，我尝试将图像包装在按钮内。

这个也可以，但是现在它在图像外部显示按钮的默认边框，这使它看起来很难看。

那么如何使图像充当一个在单击时运行但不提交表单的按钮呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T02:13:12.187

使 onclick 事件返回 false，这将阻止表单提交。

```
onclick="history.go(-1);return false;" 
```

# php - 从php中的字符串中删除自定义数字

> ID：14514245
> 
> 赞同：-1
> 
> 时间：2013-01-25T02:11:32.453
> 
> 标签：php, string, replace

我有一些字符串，比如

```
$str1 = "Audi-TT-RS-2012-widescreen-77.jpg";
$str2 = "Audi-R8-widescreen-039.jpg";
$str3 = "2008-bmw-6-series-front-and-side.jpg";
$str4 = "Opel_tigra_2-doors-21313.jpg"; //where 21313 is an id that want to be removed also. 
```

我想创建一个函数来删除除年份和汽车“型号”之外的所有数字。我不知道如何准确检测数字是年份、型号还是 ID。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:36:54.813

我想你可以删除所有以 19 和 20 开头的 4 位数字（如果汽车不超过 2000 年，则只有 20）和字符串中最后一个点之前的数字（如果有的话）......但谁知道它是否您提供的信息将 100% 准确（缺乏命名模式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:45:44.977

```
$str1 = "Audi-TT-RS-2012-widescreen-77.jpg";
$str2 = "Audi-R8-widescreen-039.jpg";
$str3 = "2008-bmw-6-series-front-and-side.jpg";
$str4 = "Opel_tigra_2-doors-21313.jpg";
$strs = array($str1, $str2, $str3, $str4);
foreach ($strs as $str) {
    preg_match_all('/(?<!\d)(\d{4})(?!\d)\-*/', $str, $matches);
    foreach ($matches[1] as $year) {
        if (abs($year - date("Y")) < 100) {
            // this is within 100 years
        }
    }
} 
```

删除号码

```
$str1 = "Audi-TT-RS-2012-widescreen-77.jpg";
$str2 = "Audi-R8-widescreen-039.jpg";
$str3 = "2008-bmw-6-series-front-and-side.jpg";
$str4 = "Opel_tigra_2-doors-21313.jpg";
$strs = array($str1, $str2, $str3, $str4);
foreach ($strs as $str) {
    preg_match_all('/(?<!\d)(\d{4})(?!\d)\-*/', $str, $matches);
    foreach ($matches[1] as $year) {
        if (abs($year - date("Y")) < 100) {
            $str =  preg_replace('/(?<!\d)(\d{4})(?!\d)/', '[year]', $str);
        }
    }
    preg_match_all('/(?<!\d)(\d{1})(?!\d)\-*/', $str, $matches);
    foreach ($matches[1] as $model) {
        $str =  preg_replace('/(?<!\d)(\d{1})(?!\d)/', '[model]', $str);
    }

    preg_match_all('/\-*(\d+)\-*/', $str, $matches);
    foreach ($matches[1] as $id) {
        $str =  preg_replace('/\-*(\d+)\-*/', '', $str);
    }
    $str =  preg_replace('/\[year\]/', $year, $str);
    $str =  preg_replace('/\[model\]/', $model, $str);
    echo $str."<br>";
} 
```

# tfs - TFS 持续构建自定义 Drop 文件夹模板

> ID：14514246
> 
> 赞同：0
> 
> 时间：2013-01-25T02:11:34.950
> 
> 标签：tfs

我正在尝试实现连续构建过程，如果我查看顺序放置文件夹中的 XAML，我想指定一个自定义模板

也就是说，我不希望所有文件都放在一个文件夹中，我必须在根文件夹内创建一个文件夹结构，如 Folder1、Folder2。

**基于文件扩展名的文件必须被放到特定的文件夹中**

任何一点如何实现这一点，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:21:05.983

如果您对修改 TFS 构建模板感到满意，那么 Torbjörn 的回答绝对是正确的选择。自定义构建模板将使您可以完全控制输出。然而，这可能是多余的，特别是如果您不熟悉 WF 和 Team Build 的内部结构。另一种方法是编写一些 msbuild，它将作为构建的一部分运行。

为此，创建一个名为“DropTidy.proj”的文件并编辑该文件，使其看起来像这样

```
<Project DefaultTargets="CopySQLReleaseFiles" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">

  <Target Name="CopySQLReleaseFiles">

    <ItemGroup>
      <SqlBuildOutput Include="$(OutDir)\*.sql" />
    </ItemGroup>

    <Copy SourceFiles="@(SqlBuildOutput)" DestinationFolder="$(OutDir)\SQL" />

  </Target>

</Project> 
```

上面的示例将所有扩展名为“sql”的文件复制到名为“SQL”的文件夹中。$(OutDir) 是团队构建使用的工作文件夹，与构建代理的构建工作区中的“二进制”文件夹相关

将文件签入 TFS，然后将其添加到 Team Build Definition 中的“要构建的项目”列表中。确保它是列表中的最后一个“解决方案”，以便它在构建中的其他解决方案之后运行。还要确保将 proj 文件签入的文件夹是构建工作区的一部分。

运行您的构建，您应该会在放置位置看到一个名为 SQL 的新文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:29:33.987

如果您使用的是默认构建过程模板（或其派生模板），则复制到 DropFolder 的操作`Finally`位于`Try Compile, Test and Associate Changesets and Work Items`. 您将不得不`Copy to Drop Location`用您的自定义序列替换该单个操作。可`FindMatchingFiles`用于根据搜索条件选择一组文件。

尝试复制单个项目时会出现一个问题；TFS 构建活动没有针对此的操作；只为`CopyDirectory`。您可以设置一个`InvokeProcess`，或者添加`Community TFS Build Extensions`您将获得的位置`Robocopy`和`Powershell`操作以支持此类任务。

如果您使用的是基本的 DefaultTemplate，我强烈建议您在其副本中进行更改并将其用于您的构建。

# java - 读取文件并放入数组

> ID：14514252
> 
> 赞同：0
> 
> 时间：2013-01-25T02:12:12.713
> 
> 标签：java, arrays, loops, file-io

我在读取文件然后将其内容放入数组时遇到问题。控制台说我的错误在这里：

```
Exception in thread "main" java.lang.NullPointerException
at readFile.readFile(readFile.java:23)
at apples.main(apples.java:6) 
```

但是我现在不知道如何解决它。

```
import java.util.*;
import java.lang.*;
import java.io.*;

public class readFile {
private Scanner x;

public void openfile(){
    try{
        x = new Scanner( new File("/Users/Zachary/Desktop/chinese.txt"));

    }
    catch (IOException e){
        System.out.println("you failed foo");
    }
}
    public void readFile(){
        int y = 0;
        int[] nums = null;
        while(x.hasNext()){
            for(y=0; y<10;y++) {
                nums[y] = x.nextInt();
            }
            System.out.println(nums[y]);
        }
    }
    public void closeFile(){
        x.close();
    }
}

public class apples {
public static void main (String[]args){
    readFile r = new readFile();
    r.openfile();
    r.readFile();
    r.closeFile();

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:14:22.517

你似乎有一个`NullPointerException`在：

```
nums[y] = x.nextInt(); 
```

那是因为这条线：

```
int[] nums = null; 
```

它是空的，所以你不能把东西放进去。这是一个简单的修复：

```
int[] nums = new int[10]; 
```

上面的代码将初始化`nums`，使其成为一个空的（不是真的 - 它实际上是用 0 填充的）数组，如下所示：

```
---------------------
|0|0|0|0|0|0|0|0|0|0|
--------------------- 
```

如果您希望能够添加任意数量的数字，您将需要一个[`ArrayList`(link)](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)。

此外，此代码将引发错误：

```
for(y=0; y<10;y++) {
    nums[y] = x.nextInt();
}
System.out.println(nums[y]); 
```

那是因为你`System.out.println`不知道是什么`y`。只需将其移动`System.out.println`到`for`循环中，以便它可以“看到” `y`。（这称为范围）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:20:08.020

内循环真的有必要吗？您正在循环 x * 10 次，这确实不是分配数据的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T02:17:01.103

编译器错误指出错误发生在“readFile.java:23”。这是文件 readFile.java 的第 23 行。我相信这是这条线：

```
nums[y] = x.nextInt(); 
```

问题是您声明`nums`为：

```
int[] nums = null; 
```

当您尝试访问一个初始化为 的数组时`null`，您应该不会对得到一个`NullPointerException`.

要解决此问题，您需要创建一个数组对象：

```
int[] nums = new int[SOME_SIZE]; 
```

您需要自己提供尺寸，因为您没有提供足够的信息让我猜测值。

# java - Android Eclipse 多个 Dex 文件错误

> ID：14514260
> 
> 赞同：1
> 
> 时间：2013-01-25T02:13:22.140
> 
> 标签：java, android, eclipse, dex

我在尝试启动我的android项目时遇到了这个错误，它以前没有发生过，并且开始随机发生。从它工作到现在，我什至没有更新任何东西。错误是：

```
[2013-01-24 18:06:28 - Dex Loader] Unable to execute dex: Multiple dex files define Lorg/opendatakit/sensors/AbstractSensorDriverDiscovery;
[2013-01-24 18:06:28 - opendatakit.sensors] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lorg/opendatakit/sensors/AbstractSensorDriverDiscovery; 
```

我知道人们以前遇到过这个问题，但我看到的大多数问题都是一年多以前的问题，通常与 ADT r14 相关。我正在使用带有 ADT r17 的 Eclipse 4.3.0。我还没有看到有人用这些版本处理这些问题。有人解决了这个问题吗？

我在 Unable to execute dex 之类的帖子中看到的其他解决方案[： Multiple dex files define Lcom/myapp/R$array;](https://stackoverflow.com/questions/7870265/unable-to-execute-dex-multiple-dex-files-define-lcom-myapp-rarray?rq=1) ，对我没有任何用处。

如果有人对此主题有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:17:22.217

在非常心痛之后，我最终发现了这个问题的错误。出于某种原因，我的项目中包含了一个全局文件夹，并且每次都将其构建到我的项目中。该文件夹包含与我的 libs 文件夹中相同的 jar，这导致了冲突。

如果其他人有这个问题，请确保项目中只有一个 jar 文件。

# iphone - DOM 更改后 iPad 中的 HTML5 视频无法正常工作

> ID：14514271
> 
> 赞同：8
> 
> 时间：2013-01-25T02:14:24.590
> 
> 标签：iphone, ios, html, ipad, html5-video

这是一个将 html5 视频的标记附加到 DOM 的脚本：

```
document.body.innerHTML = '<video id="video" controls="controls" src="http://mirror.cessen.com/blender.org/peach/trailer/trailer_iphone.m4v" type="video/mp4"></video>';
var el = document.getElementById('video');
document.body.removeChild(el);
document.body.appendChild(el); 
```

jsfiddle 演示：http: [//jsfiddle.net/h8RLS/2/](http://jsfiddle.net/h8RLS/2/)

这适用于所有经过测试的浏览器，iOS 上的 Safari 除外。在 iOS 中，当 HTMLVideoElement 重新附加到 DOM 时，它不再可播放。

有没有其他人解决或遇到过这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T18:11:04.010

我没有 iPad，但可以在 iPhone 上重现您的问题。这似乎是一个 Webkit 错误，但可以通过更改`src`视频的属性轻松绕过它 - 我希望这足以满足您的场景。你可以在这里看到一个工作演示：

[http://vidhtml5.appspot.com/jsembed.html](http://vidhtml5.appspot.com/jsembed.html)

这是代码：

```
var el = document.getElementById('video');
el.src= "http://mirror.cessen.com/blender.org/peach/trailer/trailer_iphone.m4v";
el.load(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T12:20:48.620

我遇到了同样的问题，我找到了一个使用计时器的解决方法（我在这里使用 jQuery）。

```
var v = $('#videoID');
v.appendTo( $('#toDivID') );
var timer = setInterval( function() {
    clearInterval( timer );
    v[0].load();
    v[0].play();
}, 200 ); 
```

我只在 iOS 6.1 的 iPad2 上测试过。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T20:09:58.927

您可以为视频添加两个“来源”标签。我在一个网站上做过这个，效果很好。

```
<video class="video" controls="controls" id="video1">
<source type="video/mp4" src="demo.mp4">
<source type="video/webm" src="demo.webm">              
</video> 
```

# php - Mongodb按列聚合/分组并计算特定列

> ID：14514272
> 
> 赞同：0
> 
> 时间：2013-01-25T02:14:38.757
> 
> 标签：php, mongodb, aggregation-framework

我们已经设置了一个将事件写入 mongo 实例的基本应用程序。这是一个示例写入：

```
"_id" : ObjectId("50fee761472870a3d610956e"),
    "user_id" : "pa-XXXXXXXXX",
    "event_id" : 1,
    "date_created" : 1337798856,
    "url" : "http://news.yahoo.com/australian-tycoon-worlds-richest-woman-103810206.html" 
```

我们想做的是检索按 URL 分组的结果和某些 event_id 的计数。像 event_grouping_a 可能由 event_ids 1,6,35 组成，而 event_grouping_b 可能由 2,66,103 组成。示例输出如下所示：

```
{
    url: "http://news.yahoo.com/australian-tycoon-worlds-richest-woman-103810206.html",
    event_grouping_a: 46,
    event_grouping_b: 34
},
{
    url: "http://news.yahoo.com/another-cool-story",
    event_grouping_a: 105,
    event_grouping_b: 59
} 
```

关于如何执行这种类型的聚合/分组的任何想法？最终目标是在 PHP 中使用它，但我在 mongod 控制台中搞砸了，但无济于事。我可以让它按 URL 分组，但我不能让它在单个父 URL 下显示两种事件类型。它吐出这样的东西：

```
{
    url: "http://news.yahoo.com/australian-tycoon-worlds-richest-woman-103810206.html",
    event_grouping_a: 46
    event_grouping_b: 0
},
{
    url: "http://news.yahoo.com/australian-tycoon-worlds-richest-woman-103810206.html",
    event_grouping_a: 0
    event_grouping_b: 34
},
... 
```

以上两个应该合并为1，但我一生都无法弄清楚......有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:13:59.960

我不一定喜欢`$or`使这项工作的语句，但是如果您使用的是 1.3+ mongo 驱动程序，则此查询应该适用于 php：

```
$mongo = new MongoClient('dbinfo');
$collection = $mongo->selectCollection( 'dbName', 'collectionName' );

$pipeline = array(
    array( 
        '$group' => array(
            '_id' => '$url',
            'event_grouping_a' => array( 
                '$sum' => array( 
                    '$cond' => array( 
                        array( '$or' => array(
                            array( '$eq' => array( '$event_id', 1 ) ),
                            array( '$eq' => array( '$event_id', 6 ) ),
                            array( '$eq' => array( '$event_id', 35 ) )
                        ) ), 1, 0 ) 
                )   
            ),
            'event_grouping_b' => array(
                '$sum' => array(
                    '$cond' => array(
                        array( '$or' => array(
                            array( '$eq' => array( '$event_id', 2 ) ),
                            array( '$eq' => array( '$event_id', 66 ) ),
                            array( '$eq' => array( '$event_id', 103 ) )
                        ) ), 1, 0 )
                )
            )
        )
    )
);
$results = $collection->aggregate( $pipeline ); 
```

--

```
var_dump( $results );
array(2) { 
    ["result"]=> array(2) { 
        [0]=> array(3) { 
            ["_id"]=> string(40) "http://news.yahoo.com/another-cool-story" 
            ["event_grouping_a"]=> int(2) 
            ["event_grouping_b"]=> int(1) 
        } 
        [1]=> array(3) { 
            ["_id"]=> string(75) "http://news.yahoo.com/australian-tycoon-worlds-richest-woman-103810206.html" 
            ["event_grouping_a"]=> int(3) 
            ["event_grouping_b"]=> int(4) 
        } 
    } 
    ["ok"]=> float(1) 
} 
```

# svg - 多色谷歌地图 SVG 符号

> ID：14514274
> 
> 赞同：10
> 
> 时间：2013-01-25T02:14:41.593
> 
> 标签：svg, maps

谷歌地图标记可以采用复杂的 svg 路径作为其图标，如下所示：

```
var baseSvg = {
    x1 : "m 0,0 l45,0 l 190,225 l -45,0 l -190,-225 z",
    x2 : "m 225,0 l -45,0 l -190,225 l 45,0 l 190,-225 z"                
};

var baseIcon = {
    path: "M0,0 " + baseSvg["x1"] + baseSvg["x2"],
    fillColor: "#000000",
    fillOpacity: 1,
    scale: .2,
    strokeColor: "black",
    strokeWeight: 0,
    rotation: 15
}; 
```

然后将其送入标记：

```
var marker = new google.maps.Marker({
    position: new google.maps.LatLng(somelat, somelng),
    icon: baseIcon 
}); 
```

都好。但它只绘制单一颜色（本例中为黑色）。**那么，它们可以只有一种颜色，还是有办法拥有多种颜色的符号？**使用示例代码，x1 为红色，x2 为绿色。

请注意，此构造是从此处借用的：[如何在 Google Maps API v3 中指示 SVG 路径的透明度？](https://stackoverflow.com/q/13125289/1828610)它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T12:36:10.590

我只是做了同样的事情，我认为您必须使用基本相同的数据绘制两个标记，但是`path`在这种情况下，`fillColor`属性发生了变化：

```
var baseSvg = {
        x1 : "m 0,0 l45,0 l 190,225 l -45,0 l -190,-225 z",
        x2 : "m 225,0 l -45,0 l -190,225 l 45,0 l 190,-225 z"                
    },
    baseIcon = {
        fillOpacity: 1,
        scale: .2,
        strokeColor: "black",
        strokeWeight: 0,
        rotation: 15
    },
    markerPos = new google.maps.LatLng(somelat, somelng),
    // psuedo code for cloning an object since that 
    // is out of scope for this question
    greenIcon = Object.clone(baseIcon),
    redIcon = Object.clone(baseIcon);

greenIcon.path = baseSvg.x1;
greenIcon.fillColor = "#0f0";
redIcon.path = baseSvg.x2;
redIcon.fillColor = "#f00";

var marker1 = new google.maps.Marker({
    position: markerPos,
    map: map,
    icon: greenIcon
});
var marker2 = new google.maps.Marker({
    position: markerPos, 
    map: map,
    icon: redIcon
}); 
```

显然没有优化 js，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T02:07:54.347

当谈到不透明度时，`strokeOpacity`是你的家伙。检查[maps.Symbol 类](https://developers.google.com/maps/documentation/javascript/reference#Symbol)以获取有关符号属性的更多信息。

# lua - 电晕添加碰撞并播放声音

> ID：14514275
> 
> 赞同：0
> 
> 时间：2013-01-25T02:14:43.213
> 
> 标签：lua, coronasdk

编辑：忽略下面的大部分内容，因为问题似乎是我没有根据调试器加载“movieclip”模块......你到底是如何加载我为两者编写代码的movieclip或物理模块的是问题。包含这个模块吗？我从某个地方下载它吗？是什么赋予了？

我在 Lua 中有以下代码（特别是电晕）

```
function scene:createScene( event )
    local group = self.view
    local bg = display.newImage("stage.png")
    local vio = display.newImage("vio.png")
    vio.x = 150
    vio.y = 180
    local b = display.newImage("b.png")
    b.x = -70
    b.y = 200
end 
```

我需要有一个触摸屏事件，以便向左或向右拖动将对象 B 在水平轴上向左或向右移动..并检测到它穿过屏幕中心并播放声音......

我找到了一些可以作为电影剪辑执行此操作的代码，但示例代码

```
local myAnim = movieclip.newAnim( b.png )
    local function pressFunction()
    myAnim.alpha = 0.7
end
local function releaseFunction()
    myAnim.alpha = 1
end
myAnim:setDrag()
    drag=true,
    onPress=pressFunction,
    onRelease=releaseFunction,
    bounds= { 50,200, 220, 200}
end 
```

此外`local movieclip = requires (movieclip)`，我在代码顶部添加了 ，它删除了我所有的背景图像和 tabBar :(

请帮我弄清楚我是 Corona 和 Lua 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:15:22.170

物理是核心 Corona SDK API 的一部分。您不必包含任何外部文件。只需添加：

```
local physics = require("physics") 
```

在您计划使用物理的模块顶部就足够了。正如@speeder 所说，movieclip.lua 模块已被弃用，取而代之的是使用新的精灵表。就我个人而言，我喜欢使用movieclip，但它在内存上非常浪费，并且不如sprite sheet那么高效或实用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:28:57.623

电影剪辑是一个古老的东西......

它是一个库，使用现在已弃用和过时的 API 部分。

我什至想知道您是如何找到它的（在看到您的问题之前我从未听说过它，并且不得不挖掘一些论坛技巧来弄清楚它是什么）。

所以，是的，movieclip 是一个单独的 .lua 文件，您需要找到并下载它。但我建议你不要这样做，因为它使用了不再存在的东西。

# ios - iOS 音频单元获取当前时间戳

> ID：14514277
> 
> 赞同：0
> 
> 时间：2013-01-25T02:14:48.687
> 
> 标签：ios, timestamp, audio-streaming

我正在使用音频单元（iOS）从文件中播放音乐。如何获取我正在播放的音乐的当前时间戳？

我发现在playbackCallback函数中有一个AudioTimeStamp类型的变量调用“inTimeStamp”。这是我寻找当前时间戳的正确位置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-10T13:40:03.937

这个给你：

```
AudioTimeStamp ts;
UInt32 size = sizeof(ts);

AudioUnitGetProperty(THIS->audioPlayerUnit,
                     kAudioUnitProperty_CurrentPlayTime, 
                     kAudioUnitScope_Global, 
                     0, &ts, &size);

NSLog(@"TS%f", ts.mSampleTime); 
```

获得秒数的更好方法是添加

```
THIS->currentTime = ts.mSampleTime / THIS.streamFormatDescription.mSampleRate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-02T02:55:52.603

loretoparisi 的答案并不适合所有场景。如果您使用的是 kAudioUnitSubType_AudioFilePlayer，请尝试他的回答；但如果您使用其他音频单元类型，例如 RemoteIO 单元，则需要设置一个全局变量来存储音频单元已渲染的帧数，并在每个渲染周期更新该值。

```
player.progress += inNumberFrames/player.canonicalFormat.mSampleRate; 
```

# asp.net - 如何在不是 ListControl 的元素上使用 DataTextField？

> ID：14514278
> 
> 赞同：0
> 
> 时间：2013-01-25T02:14:51.127
> 
> 标签：asp.net, sql, drop-down-menu, datasource

所以这是我的情况：我有一个 DropDownList，当某个事件被触发时我会填充它。为了填充它，我执行了一个返回两列的 SQL 查询：ID 和 Name。我使用 DataSource/DataTextField/DataValueField 将 Name 绑定到 DropDownList，但我也想保存 ID（以在第二个查询中使用）。我怎样才能做到这一点？

我尝试将 ID 保存到隐藏的输入字段，因为我想使用它但不向用户显示它。但是输入不是ListControl，所以它不起作用。如何获取在 DropDownList 中选择的名称的匹配 ID？

```
 string strConn = ConfigurationManager.ConnectionStrings["ConnectionStringName"].ConnectionString;
    SqlConnection con = new SqlConnection(strConn);
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = con;
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "SELECT Id, Name FROM Users WHERE Age > 10";

    DataSet objDs = new DataSet();
    SqlDataAdapter dAdapter = new SqlDataAdapter();
    dAdapter.SelectCommand = cmd;
    con.Open();
    dAdapter.Fill(objDs);
    con.Close();
    if (objDs.Tables[0].Rows.Count > 0)
    {
        NameDropDown.DataSource = objDs.Tables[0];
        NameDropDown.DataTextField = "Name";
        NameDropDown.DataValueField = "Name";
        NameDropDown.DataBind();
        NameDropDown.Items.Insert(0, "--Select--");
    }
    else
    {
        NameDropDown.Items.Clear();
        NameDropDown.Items.Insert(0, "No names found");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:24:57.000

考虑：

```
if (objDs.Tables[0].Rows.Count > 0)
{
    NameDropDown.DataSource = objDs.Tables[0];
    NameDropDown.DataTextField = "Name";
    NameDropDown.DataValueField = "ID"; /*why wouldn't this be ID*/
    NameDropDown.DataBind();
    NameDropDown.Items.Insert(0, "--Select--"); 
```

# ruby-on-rails - Resque 工作人员立即失败：nil:NilClass 的未定义方法“写入”

> ID：14514281
> 
> 赞同：2
> 
> 时间：2013-01-25T02:14:56.277
> 
> 标签：ruby-on-rails, resque

我在我的 Rails 应用程序中使用 Resque（和 resque-scheduler）来运行重复性作业。直到今天，这对我来说都很好。我做了一些我认为不相关的代码更改，但现在每个工作人员甚至在输入 perform 方法之前都失败了（使用调试语句检查）。当我在 Rails 控制台中运行相同的工作方法时，它可以正常工作。它仅通过开发本地主机（Postgres DB）上的 resque 失败。

对于失败的工作人员，resque 控制台中显示的错误是：

```
Exception
    NoMethodError
Error
    undefined method `write' for nil:NilClass 
```

该错误没有额外的堆栈跟踪。知道为什么这会失败吗？

附加信息：

lib/tasks/resque.rake

```
# Resque tasks
require 'resque/tasks'
require 'resque_scheduler/tasks'

namespace :resque do
  task :setup do
    require 'resque'
    require 'resque_scheduler'
    require 'resque/scheduler'

    # you probably already have this somewhere
    Resque.redis = 'localhost:6379'

    # If you want to be able to dynamically change the schedule,
    # uncomment this line.  A dynamic schedule can be updated via the
    # Resque::Scheduler.set_schedule (and remove_schedule) methods.
    # When dynamic is set to true, the scheduler process looks for
    # schedule changes and applies them on the fly.
    # Note: This feature is only available in >=2.0.0.
    #Resque::Scheduler.dynamic = true

    # The schedule doesn't need to be stored in a YAML, it just needs to
    # be a hash.  YAML is usually the easiest.
    Resque.schedule = YAML.load_file("#{Rails.root}/config/resque_schedule.yml")

    # If your schedule already has +queue+ set for each job, you don't
    # need to require your jobs.  This can be an advantage since it's
    # less code that resque-scheduler needs to know about. But in a small
    # project, it's usually easier to just include you job classes here.
    # So, something like this:
    # require 'jobs'
  end
end

task "resque:setup" => :environment do
  #ENV['QUEUE'] = '*'

  Resque.before_fork = Proc.new { ActiveRecord::Base.establish_connection }
end 
```

配置/resque.yml

```
development: localhost:6379
test: localhost:6379:1
staging: redis1.se.github.com:6379
fi: localhost:6379
production: redis1.ae.github.com:6379 
```

初始化程序/resque.rb

```
rails_root = Rails.root || File.dirname(__FILE__) + '/../..'
rails_env = Rails.env || 'development'

resque_config = YAML.load_file(rails_root.to_s + '/config/resque.yml')
Resque.redis = resque_config[rails_env]

# This will make the tabs show up.
require 'resque_scheduler'
require 'resque_scheduler/server' 
```

配置/resque_schedule.yml

```
populate_game_data:
  # you can use rufus-scheduler "every" syntax in place of cron if you prefer
  every: 1m
  # By default the job name (hash key) will be taken as worker class name.
  # If you want to have a different job name and class name, provide the 'class' option
  class: PopulateDataWorker
  queue: high
  args:
  description: "This job populates the game and data" 
```

应该注意，上述文件在工作和非工作状态之间没有变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:42:16.117

今天早上我们遇到了同样的问题，我们将其归结为 New Relic 的 gem 更新。newrelic_rpm 的 3.5.6.46 版本在 ruby​​gems 上被删除，但它是通过捆绑更新以某种方式安装的。

他们仍处于 3.5.6 的测试版轨道上，并且与 Resque 存在一些问题。见[https://github.com/newrelic/rpm/commit/e81889c2bce97574ec682dafee12015e13ccb2e1](https://github.com/newrelic/rpm/commit/e81889c2bce97574ec682dafee12015e13ccb2e1)

解决方法是在我们的 Gemfile 中为 newrelic_rpm 添加 '~> 3.5.5.38'

# html - 背景图像在 IE 8 中的位置不佳

> ID：14514288
> 
> 赞同：0
> 
> 时间：2013-01-25T02:15:30.300
> 
> 标签：html, css, internet-explorer, internet-explorer-8

```
nav li a.home                   { background:url('../img/custom_icons/home.png') no-repeat center; background-size: 30px 30px; background-position: 0px -1px;}

nav li a.contact                { background:url('../img/custom_icons/email.png') no-repeat center; background-size: 32px 35px; background-position: 0px -1px; }

nav li a.show_all               { background:url('../img/custom_icons/slide.png') no-repeat center; background-size: 35px 50px; background-position: -5px -10px; }

#facebook {
    background: url(../img/custom_icons/facebook.png) no-repeat;
    background-size:30px 30px;
}

#sina {
    background: url(../img/custom_icons/sina.png) no-repeat;
    background-size:30px 30px;
} 
```

我发现那些在 chrome / fx 或其他浏览器中的背景图像定位完美，但在 IE 8 中没有，它要么太小/太大，要么只是移动到其他地方。如何解决问题并与其他浏览器一样工作? 谢谢

**更新：添加 ms 过滤器后，仍然无法正常工作？**

```
nav li a.home                   { background:url('../img/custom_icons/home.png') no-repeat center; background-size: 30px 30px; background-position: 0px -1px;}

filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='../img/custom_icons/home.png',
sizingMethod='scale');

-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(
src='../img/custom_icons/home.png',
sizingMethod='scale')"; 
```

这是添加建议的过滤器后的 css 文件。但是，它仍然无法正常工作？像这样放置代码是否正确？这似乎很奇怪，因为有一个 ; 最后和一个 " after ='scale') 。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:26:24.390

“背景大小”不适用于 IE8。

[http://caniuse.com/#feat=background-img-opts](http://caniuse.com/#feat=background-img-opts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:25:16.510

这里的答案[https://stackoverflow.com/a/6353808/358906](https://stackoverflow.com/a/6353808/358906)可能比我下面的原始答案更好。

* * *

在 IE8 中，确保浏览器模式设置为 IE8 标准，如果不是，请更改它，看看它是否能解决您的问题。如果它解决了问题，那么您将需要通过使用元标记或服务器标头来确保 IE8 始终使用 I8 标准模式。

**![IE8 开发者工具](../Images/75d86b42db0646692b0601ef50e14d76.png)**

# ruby-on-rails - 在 Heroku 上的 Rails 应用程序之间共享用户数据和登录信息

> ID：14514291
> 
> 赞同：3
> 
> 时间：2013-01-25T02:15:58.347
> 
> 标签：ruby-on-rails, database, authentication, data-binding, heroku

我计划在 Heroku 上构建一组多个 Rails 应用程序，并且我想在这些应用程序和“主要”Rails 应用程序之间共享帐户、用户数据以及其他一些信息。这样做最简单、最有效的方法是什么？

我听说这样做的一种方法是让所有应用程序共享同一个数据库，但我不确定这是否真的是我的最佳解决方案，因为我只需要在这些应用程序之间共享一些信息。我考虑过的另一件事是使用[CAS](http://en.wikipedia.org/wiki/Central_Authentication_Service)协议，但这似乎只处理身份验证（我不能用它来获取用户的姓名和电子邮件地址）。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T03:59:39.310

这就是我正在考虑这样做的方式。

创建具有用户身份验证的主应用程序。

让每个子应用对主应用进行全方位身份验证。

然后主应用程序将容纳所有用户数据，子应用程序将获取必要的身份验证信息以及用户数据。我还没有弄清楚如何确保新的用户数据将保存在主应用程序中，但似乎您只需将用户发送到主应用程序，然后在他们输入数据后让他们返回。

在我以这种方式投入一周之前，您的 Rails 专家提出的任何建议。

# c# - Facebook API 应用访问令牌无法访问广告数据

> ID：14514292
> 
> 赞同：1
> 
> 时间：2013-01-25T02:16:01.960
> 
> 标签：c#, facebook, api, token

我正在尝试创建一个自动化流程，以每天使用 c# Facebook api (facebook.ddl) 提取 Facebook 广告数据。该过程需要完全自动化，因此不需要人工干预。使用“用户”访问令牌时，我能够提取数据；但是，“用户”访问令牌在短时间内（例如，2 小时）后过期，并要求用户确认对新令牌的请求。换句话说，用户访问令牌的任何实现都会阻止我完全自动化该过程。接下来，我尝试使用“应用”访问令牌提取 Facebook 广告数据，但该过程失败并出现与安全/权限相关的错误消息。目前，据我了解，“应用程序”访问令牌并非旨在访问 Facebook 广告数据。这是正确的吗？如果是，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:19:57.650

您应该将短命的 2 小时代币换成 60 天长命的代币。[此处](http://developers.facebook.com/roadmap/offline-access-removal/#extend_token)概述了过程。

# java - struts2 s:url 与 s:property 值不起作用

> ID：14514295
> 
> 赞同：1
> 
> 时间：2013-01-25T02:16:21.683
> 
> 标签：java, struts2

我正在尝试使用`s:url`并且该值包含一个属性。它不工作。

```
<s:url value='/js/myJS-<s:property value="locale"/>.js'/> 
```

预期输出：

```
....../contextPath/js/myJS-en_US.js 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T02:18:24.683

像这样嵌套 JSP 标记是非法的。

使用普通的 JSP EL（假设您在支持它的容器上）：

```
<s:url value="/js/myJS-${locale}.js"/> 
```

如果您没有运行支持 JSP EL (ew) 的容器，请使用 OGNL：

```
<s:url value="/js/myJS-%{locale}.js"/> 
```

可以说这是首选机制，因为 OGNL 是 S2 的默认 EL。

* * *

当报告“不工作”时，您还应该包括您得到的错误，例如，在这种情况下，JSP 永远不会编译。

# java - 函数返回空（范围问题）

> ID：14514296
> 
> 赞同：0
> 
> 时间：2013-01-25T02:16:31.073
> 
> 标签：java, json

我正在使用 ASyncHttpClient 及其工作进行简单的“获取”，并在 onSuccess() 函数中为我提供正确的 json 响应，但是当我尝试将字符串响应保存到变量并在函数中返回该变量时，它总是返回一个空字符串。

代码：

```
public class HttpRequests 
{   
    public String jsonString = "";

    public String add_guest(String name, String id, String hardware_id) 
    { 
        AsyncHttpClient client = new AsyncHttpClient();
        String url = "http://www.mysite.com/api.php?name="+name+"&id="+id+"&hardware_id="+hardware_id;

        client.get(url, new JsonHttpResponseHandler() 
        {
            @Override
            public void onSuccess(JSONObject response)
            {
                jsonString = response.toString();
            //this successfully ouputs the json response in LogCat
                Log.d("response:",jsonString);
            }

            @Override
            public void onFailure(Throwable e) 
            {
                Log.d("http error:",e.toString());
            }
        });
        //this returns ""
        return jsonString;
    }
} 
```

好像 onSuccess 中的 jsonString 与我返回的 jsonString 不在同一范围内。这背后的原因是我有很多 api 调用并希望将它们全部保存在同一个类中，然后在我需要它们时从其他各种类调用它们并从那里解析 json。我也尝试返回 json 对象而不是字符串，但与此相同..它只是从另一个类中出现空白。（它没有在 onSuccess 中正确设置）

有任何想法吗..？

**编辑：**

对不起，我应该澄清一下。我正在从我的其他班级打电话给 add_guest。这是来自我的另一堂课：

```
String response = "";
HttpRequests myRequest = new HttpRequests();
response = myRequest.add_guest("bob","1","123"); 
```

现在通过调用 add_guest 这应该反过来调用 JsonHttpResponseHandler 它“应该”将 jsonString 设置为响应并返回它..除非我错过了一些东西..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:27:26.370

让我们仔细看看你的代码：

```
public class HttpRequests 
{   
    public String jsonString = ""; 
```

这声明了一个名为的成员变量并将`jsonString`其初始化为一个空字符串。

```
 public String add_guest(String name, String id, String hardware_id) 
    { 
        AsyncHttpClient client = new AsyncHttpClient();
        String url = "http://www.mysite.com/api.php?name="+name+"&id="+id+"&hardware_id="+hardware_id;

        client.get(url, new JsonHttpResponseHandler() 
```

这将创建一个`JsonHttpResponseHandler`对象，当响应可用时将调用该对象。请注意，尚未执行此处理程序中的*任何*代码。仅创建对象。

```
 {
            @Override
            public void onSuccess(JSONObject response)
            {
                jsonString = response.toString();
            //this successfully ouputs the json response in LogCat
                Log.d("response:",jsonString);
            }

            @Override
            public void onFailure(Throwable e) 
            {
                Log.d("http error:",e.toString());
            }
        });
        //this returns ""
        return jsonString; 
```

正如您的评论所述，这会返回，`""`因为没有执行任何处理程序代码。在处理程序完成后，您需要找到一种方法给调用者字符串。

```
 }
} 
```

**进一步的建议：**

在看到调用的代码之后`add_guest()`，想到的一个可能的解决方案是更改`add_guest()`为 return并在调用中`void`添加另一个方法。该方法可以等待响应然后返回。为此，您可能需要声明为成员变量，而不是本地到. 我对这个类不熟悉，但我怀疑它有一个方法会阻塞，直到发生响应。`HttpRequests``getResponse()``jsonString``AsyncHttpClient client``add_guest()``AsyncHttpClient`

另一种可能的解决方案是添加一个`HttpRequests(JsonHttpResponseHandler)`构造函数。然后调用的类就`add_guest()`可以实现`JsonHttpResponseHandler`（假设是接口，不是抽象类），直接得到响应。

# javascript - 通过 AJAX 调用将动态变量传递给 Rails 控制器

> ID：14514302
> 
> 赞同：0
> 
> 时间：2013-01-25T02:16:59.760
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, jquery

我正在开发一个 Rails 应用程序，我想创建动态数量的变量以通过 AJAX 请求传递给我的控制器。也就是说，如果只有 3 个对象，我想创建 3 个变量，如果有 5 个对象，我想创建 5 个变量。

在我的 javascript 文件中，我已经设法创建了动态数量的变量。

```
var count = parseInt("#{@matches.count}");

while(count>0){
  eval("result_" + count + "= $('input:radio[name=result_" + count + "]:checked').val()");
  count -= 1;
} 
```

这会创建`result_1`, `result_2`,`result_3`等。

到目前为止，我的 AJAX 请求是静态的，因为它总是必须有 5 个结果。我希望这是动态的。

```
$.ajax({
  type: 'GET',
  url: '/mt_results/create',
  dataType: 'json',
  data: {
    'result_1' : { matched_id: "#{@matches.first.id}", result: result_1 },                                             
    'result_2' : { matched_id: "#{@matches.second.id}", result: result_2 },
    'result_3' : { matched_id: "#{@matches.third.id}", result: result_3 },
    'result_4' : { matched_id: "#{@matches.fourth.id}", result: result_4 },
    'result_5' : { matched_id: "#{@matches.fifth.id}", result: result_5 }
  },
  success: function(e){
    console.log("AWWWWWWW YEAH!!");
  }
}); 
```

是动态创建 JSON 对象（类似于我创建的方式`results_#`）并将其分配给变量（我们称之为`data_var`）的最佳方法。然后，我可以像下面这样传递 data_var：

```
data: data_var 
```

任何关于如何改进我的代码的提示或反馈将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:04:41.013

在我看来，当你写 JS 时，除非绝对必要，否则你不应该使用 inline ruby​​。大多数情况下，这是糟糕设计的标志，并且会生成与服务器端逻辑紧密耦合的代码。

最好将您需要的数据存储在您的标签属性中——或者使用那些已经存在的数据。

在你的情况下，你可以这样做：

```
<% @matches.each do |match| %>
   <%= check_box_tag :my_button_group, false, value: match.id %>
<% end %> 
```

*（顺便说一句，当您允许多项选择时，您不应该使用单选按钮 - 使用复选框）*

如果您确实需要添加更多数据，可以通过将其添加到选项中以 html5 方式完成：

```
data: {custom-value: "foo", another-one: "bar"}, 
```

这会将这些属性添加到标签中：

```
<input ... data-custom-value="foo" data-another-one="bar" /> 
```

现在 - 你想分析这些盒子并向任何东西发送一个 ajax 请求。为什么还要麻烦分析？Rails 为您提供了一种处理远程表单的简单方法。只需将您的盒子包装在远程表单中，单击提交，然后就可以了 - 它甚至可以优雅地降级！

如果您有更难执行的操作（使用数据属性...），则始终可以自己制作 ajax 调用数据：

```
var boxes = $("input:checkbox[name=my_button_group]:checked");
var data  = boxes.map(function(box, index){ 
                return { matched_id: box.val(), result: box.attr("data-custom") };
            }); 
```

# math - DirectX - 矩阵到四元数

> ID：14514306
> 
> 赞同：1
> 
> 时间：2013-01-25T02:17:07.313
> 
> 标签：math, matrix, directx, quaternions

我正在尝试使用 directX 的 D3DXQuaternionRotationMatrix() 函数从矩阵中检索旋转四元数。该矩阵由 Blender（一种开源 3D 图形环境）生成，用于重新定向网格对象以在 DirectX 中使用。问题是上述函数只返回四元数中的“w”值。这是矩阵，后跟函数：

```
D3DXMATRIX mA;
._11 = 1;
._12 = 0;
._13 = 0;
._14 = 0;
._21 = 0;
._22 = 0;
._23 = 1;
._24 = 0;
._31 = 0;
._32 = 1;
._33 = 0;
._34 = 0;
._41 = 0;
._42 = 0;
._43 = 0;
._44 = 1;

D3DXQUATERNION qA;
D3DXQuaternionRotationMatrix( &qA, &mA );
D3DXQuaternionConjugate( &qA, &qA );

result:

qA.x = 
qA.y = 
qA.z = 0;
qA.w = 0.707 
```

这个四元数不代表任何旋转......但是，矩阵确实有旋转......这个旋转是什么？为什么该函数不能提供准确的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:12:31.250

四元数的 W 以弧度表示旋转。X、Y 和 Z 部分代表旋转所围绕的轴。在您的示例中，矩阵围绕 (0,0,0) 旋转 0.707 弧度或 ~40.5 度。

编辑：

如果您正在寻找 Yaw、Pitch 和 Roll 您可以从四元数中提取它：http: [//sunday-lab.blogspot.com/2008/04/get-pitch-yaw-roll-from-quaternion.html](http://sunday-lab.blogspot.com/2008/04/get-pitch-yaw-roll-from-quaternion.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:16:46.460

你的矩阵：

```
1; 0; 0; 0;
0; 0; 1; 0;
0; 1; 0; 0;
0; 0; 0; 1; 
```

这是 y 和 z 交换的单位矩阵：您的场景是 Y-Up 或 Z-Up，Blender 期望 D3D 是相反的，所以它使用这个矩阵来交换 y 和 z。如果愿意，您可以将其视为轮换，但最终结果是相同的。

# php - 中文字符作为 PHP 中的 mySQL 表名

> ID：14514308
> 
> 赞同：1
> 
> 时间：2013-01-25T02:17:39.727
> 
> 标签：php

如何在使用 PHP 的 mySQL 中使用汉字作为表名。目前它不返回任何错误，而是创建一个名为“???”的表。

知道需要做什么吗？还是做不到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:27:42.907

也许你应该将 MySQL 字符集设置为 UTF-8 或 GBK 或 GB2312，如下所示：

```
CREATE TABLE t (c CHAR(20) CHARACTER SET gbk COLLATE gbk_chinse_ci); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-23T14:45:11.420

几乎每个 SQL 语句都以某种方式使用标识符来引用数据库或其组成元素，例如表、视图、列、索引、存储的例程、触发器或事件。当您引用数据库的元素时，标识符必须符合以下规则。

标识符中的合法字符。不带引号的标识符可以由`a-z`任何字母大小写的拉丁字母、数字、、、`0-9`和`dollar`范围内的字符`underscore`组成。`Unicode extended``U+0080 to U+FFFF`

标识符可以以标识符中合法的任何字符开头，包括数字。但是，未加引号的标识符**不能完全由数字组成，**因为这会使它与数字无法区分。MySQL 对以数字开头的标识符的支持在数据库系统中有些不同寻常。如果您使用这样的标识符，请特别注意它是否包含“ E ”或“ e ”，因为这些字符**可能会导致**模棱两可的表达。

例如，表达式`23e + 14`（'+' 符号周围有空格）表示列`23e`加上数字`14`，但是呢`23e+14`？它的意思是一样的，还是科学计数法中的数字？

标识符可以在`backtick`字符内引用（分隔）（' `'), which permits use of **any character**, except a`NUL `byte or`Unicode 补充`characters (`U+10000 及以上'）。您的操作系统可能会对数据库和表标识符施加额外的限制。

# macos - 适用于 Mac 的免费 ActionScript IDE？

> ID：14514309
> 
> 赞同：3
> 
> 时间：2013-01-25T02:17:53.347
> 
> 标签：macos, actionscript-3, ide

我一直在努力寻找一种在 Mac 上免费编辑/运行 AS3 的好方法。Eclipse 的 AXDT 无法安装，有一段时间我在使用 Sublime text + Terminal，但它导致没有代码完成。有任何想法吗？显然FD是不可能的，只是Windows。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T07:10:28.713

目前，没有适用于 Mac 的完全免费的 ActionScript IDE。但是，您可以使用一些解决方案，具体取决于您的工作内容以及您需要的其他语言支持功能，而不是简单的代码完成：

*   如果你正在研究开源的东西，你应该看看[IntelliJ IDEA](http://www.jetbrains.com/idea/buy/index.jsp)，它对 OSS 项目是免费的。
*   此外，[FDT 有一个免费版本](http://fdt.powerflasher.com/buy-download/)，但它不包括高级重构以及许多其他功能。
*   如果您不需要项目管理、重构等，您可以继续使用文本编辑器并通过命令行进行编译。vim有一个[ActionScript 3 语法文件](http://www.vim.org/scripts/script.php?script_id=1061)[，Emacs](http://www.emacswiki.org/emacs/ActionScriptMode)有一个ActionScript 模式。

不过，如果您打算（半）专业地使用 ActionScript，我强烈建议您重新考虑为一个好的解决方案付费。一个好的 IDE 不仅仅是文本突出显示和代码完成！

例如，IDEA 实际上可以通过多种方式*帮助您编写更好*的代码：通过使您能够直接从编辑器窗口运行单元测试（作为套件、作为单个测试类，甚至作为单个测试方法）；通过包含高级重构功能，例如“更改签名”、“提取接口”或“内联方法”；通过分析你写的东西，并提供替代方案等。

然后，当然，所有的事情都与语言本身无关，但让您作为开发人员的生活更加轻松：版本控制和问题跟踪集成、构建工具、依赖项管理，仅举几例。

如果你打算用你的代码赚钱——我的意思是，任何钱——一个好的 IDE 会很快赚到它的价格，甚至可能在一天的工作中。

# go - 获取已知结构字段的名称

> ID：14514312
> 
> 赞同：2
> 
> 时间：2013-01-25T02:18:22.660
> 
> 标签：go

我有一个表示数据库中对象的结构，例如：

```
type Object struct {
    Id string
    Field1 string
    Field2 int
} 
```

而且我希望有一个函数可以在修改字段时更新数据库中的特定字段，类似于以下内容：

```
func (self *Object) SetField1(value string) {
    self.Field1 = value
    database.Update(self.Id, "Field1", self.Field1) // pseudocode
} 
```

有没有办法替换`"Field1"`硬编码的字符串，以便我的代码能够抵抗结构字段排序和命名的未来变化？

我已经浏览了反射包，如果能够获得代表我正在使用的字段的 StructField 会很好，但它似乎需要通过硬编码字符串的字段名称，或者结构中字段的索引（可能会更改）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T04:30:52.567

不在你所说的上下文中。它不是作为参数传入的，因此您需要一些其他方式来指定要发送的结构的*哪些字段。*这里的心理差距是你试图把这个集合函数当作一个属性来对待，而实际上它不是。如在其他语言中所见，属性之间的主要区别在于属性绑定到特定*字段*，而您的`SetField1`方法绑定到*整个结构*。该方法还不如设置*两个*字段。

一般来说，如果你在做字段反射的东西，并且你想用字段做花哨的动态东西，你想使用结构标签。例如，像这样：

```
type Object struct {
    Id string     `db:"id"`
    Field1 string `db:"field1"`
    Field2 int    `db:"field2"`
} 
```

您可以像这样访问这些标签：

```
package main

import (
    "reflect"
    "fmt"
)

func main() {
    var x struct {
        MyField int `core:"required"`
    }
    t := reflect.TypeOf(x)

    for i := 0; i < t.NumField(); i++ {
        field := t.Field(i)
        fmt.Println(field.Name, ":", field.Tag.Get("core"))
    }
} 
```

这并不是一个真正的完整解决方案，但是......以它的方式提出的问题是不可能的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:00:38.887

您可以通过添加如下方法来验证您的字符串：

```
func (self *Object) verify(field string) string {
    if _, ok := reflect.TypeOf(*self).FieldByName(field); ok {
        return field
    }
    panic("Invalid field name")
} 
```

然后在将字符串传递给数据库更新时使用它

```
func (self *Object) SetField1(value string) {
    self.Field1 = value
    database.Update(self.Id, self.verify("Field1"), self.Field1) // pseudocode
} 
```

* * *

但是我认为，如果您愿意使用反射，最好只创建一个通用`setField`方法，将字段作为字符串接受，并将值作为 a `interface{}`，检查字段和值，设置值和更新数据库。

这样，一切都是使用字符串完成的，所以它要么工作要么恐慌，你不需要记住使用该`.verify()`方法。

像：

```
func (self *Object) SetField(field string, value interface{}) {
    // verify field and value using reflection
    // set the value using reflection
    database.Update(self.Id, field, self.Field1)

} 
```

尽管我认为这不适用于未导出的字段。

# javascript - getElementsByClassName 不返回长度

> ID：14514316
> 
> 赞同：1
> 
> 时间：2013-01-25T02:18:44.657
> 
> 标签：javascript, getelementsbyclassname

我想获取`length`返回的类名

我想向一系列按钮添加事件侦听器，它们都共享相同的类名。

`removeButton = document.getElementsByClassName("removeButton");`

当我这样做时，`removeButton.length`我总是得到`0`，但如果我这样做：

`console.log(removeButton)`我可以在那里看到物品清单。

我需要长度，以便可以遍历 a`for-loop`并分配事件侦听器。

似乎是什么问题？

**解决方案**
在尝试使用 getElementsByClassName 收集元素之前检查元素是否存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T05:59:46.753

如果您的 JavaScript 代码依赖于这些元素，则必须确保这些元素存在。

一种方法是通过将`<script>`标签放在正文的末尾，如下所示：

```
<html>
<head></head>
<body>
<script type="text/javascript">
    // code here
</script>
</body> 
```

您还可以将所有代码放入`window.onload`事件的函数中，或使用提供此功能的库，例如`jQuery`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:44:41.273

正如OP所说，

> 在尝试使用 getElementsByClassName 收集元素之前检查元素是否存在。

# python - 如何在 tkinter 的 matplotlib 图中更新 x 限制

> ID：14514321
> 
> 赞同：1
> 
> 时间：2013-01-25T02:19:14.403
> 
> 标签：python, matplotlib, tkinter

我用 TKinter 制作了一个 GUI，可以从安捷伦示波器读取示波器轨迹。我希望在更改时间/格时更新 x 轴。要更新我使用的 x 和 y 数据`set_xdata`和`set_ydata`. 是否有类似的方法来更新 x 限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:00:10.287

您需要了解一点对象层次结构。您正在调用`set_xdata` 一个`Line2D`对象，该对象`Artist`与一个`Axes`对象相关联（它处理诸如对数与线性、x/y 限制、轴标签、刻度位置和标签之类的事情），该对象与一个`Figure`对象相关联（将一个一堆轴对象，处理窗口管理器（用于 gui）等）和一个`canvas`对象（实际上处理将所有其他对象转换为屏幕上的图片）。

如果您使用的是 Tkinter，我假设您有一个`axes`对象（我将调用它`ax`）。

```
ax = fig.subplot(111) # or where ever you want to get you `Axes` object from.
my_line = ax.plot(data_x, data_y)
# whole bunch of code
#
# more other code

# update your line object
my_line.set_xdata(new_x_data)
my_line.set_ydata(new_y_data)

# update the limits of the axes object that you line is drawn on.
ax.set_xlim([top, bottom])
ax.set_ylim([left, right]) 
```

所以要更新行中的数据，你需要更新`my_line`，要更新轴限制，你需要更新`ax`。

`set_xlim` [医生](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_xlim)和`set_ylim` [医生](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_ylim)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:26:00.113

该[`pyplot.xlim()`函数](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.xlim)更改 x 轴（当前轴）的范围。

Axes的[`set_xticks()`方法](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_xticks)设置刻度。例如，可以使用 获得当前 Axes `gca()`。

# android - 导航回上一个选定项目时，Listview onItemSelected 不会触发

> ID：14514322
> 
> 赞同：1
> 
> 时间：2013-01-25T02:19:22.440
> 
> 标签：android, android-listview, google-tv, android-event

我的活动包括 2 个片段。左边的Fragment 1包含一个ListView，我们叫listView1，右边的Fragment 2包含一个GridView。我实现了一个 onItemSelectedListener 以在每次选择 listView1 中的项目时向远程服务器发送数据（用户使用 D-pad 导航）。监听器如下：

```
listView1.setOnItemSelectedListener(new OnItemSelectedListener(){
    public void onItemSelected(AdapterView<?> parent, View view, 
                                          int position, long id){
        //send data to sever here
        sendData();
    }
}); 
```

当我在 ListView 中导航时没关系。onItemSelected() 中的 sendData() 方法被正常调用。但问题是每次我导航到我的 GridView，然后导航回 listView1 中的上一个选定项目时，onItemSelected 和 sendData() 方法都不再触发。我做了一个搜索，在[android参考](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html)中发现只有当新选择的位置与之前选择的位置不同时才会调用onItemSelected方法。

那么，即使我导航回上一个选定的项目，我如何才能让 onItemSelected 触发呢？

提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:25:33.113

使用 onListItemClick 代替：

```
@Override
public void onListItemClick(ListView parent, View view, int position, long id) {
    sendData();
} 
```

# c - 使用 dll 中导出的函数

> ID：14514323
> 
> 赞同：0
> 
> 时间：2013-01-25T02:19:44.577
> 
> 标签：c, dll

在使用 MSVC（Microsoft Visual C++）创建 dll 时，应该明确导出应该由其他人使用的名称。

我应该明确导入我在文件中使用的名称吗？

例子：

```
/*Math.c  will be compiled to a dll*/
__declspec(dllexport) double Sub( double a, double b )
{
    return a - b;
} 
```

并将 Math.c 编译为 dll

```
cl /LDd Math.c 
```

这会生成 4 个文件 Math.dll Math.obj Math.lib Math.exp

我想在我的程序中使用 Sub() 并且我应该像这样导入 Sub 吗？

```
/*TestMath.c*/
#include <stdio.h>

__declspec(dllimport) double Sub( double a, double b );
//or can I just ignore the __declspec(dllimport) ? 
//I can compile TestMath.c to TestMath.exe without it in Win7 MSVC 2010
//but some books mentioned that you should EXPLICT IMPORT this name like above
int main()
{
    double result = Sub ( 3.0, 2.0 );
    printf( "Result = %f\n", result);
    return 0;
} 
```

我用 Math.lib 将它编译到 TestMath.exe 为：

```
cl /c TestMath.c //TestMath.c->TestMath.obj
link TestMath.obj Math.lib // TestMath.obj->TestMath.exe 
```

__decclspec(dllexport) 或一些 .def 文件显式声明导出名称是必要的，如果没有导出声明，TestMath.exe 将运行错误。

我的问题是： IMPORT 声明是否必要？有些书说是的，但没有它，我可以正确运行我的演示。

# java - 删除 .clone 的反射警告

> ID：14514331
> 
> 赞同：0
> 
> 时间：2013-01-25T02:20:52.617
> 
> 标签：java, reflection, clojure

如何从此尝试调用 Java 克隆方法的 Clojure 代码中删除反射警告：

```
(defn clone-foo [m]
  (.clone m))
=> Reflection warning, NO_SOURCE_PATH:2 - reference to field clone can't be resolved. 
```

当然，如果 m 是它的任何实例，`java.lang.Object`它必须具有该`clone`方法吗？

和`clone`被保护有关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:47:15.387

是的，您不能随意`clone()`调用`Object`. 而且，由于该`clone()`方法没有被 暴露`Cloneable`，因此以“通用”方式克隆事物有些困难。这是 Java 早期遗留下来的部分之一，此时更改为时已晚。如果您控制需要克隆的所有对象，则可以创建自己的`ReallyCloneable`接口来公开该`clone()`方法，或者您可以使用反射玩自己的技巧。

# vim - (g)Vim -> 显示 4 个空格，但节省 2 个空格（制表符）

> ID：14514336
> 
> 赞同：1
> 
> 时间：2013-01-25T02:21:01.763
> 
> 标签：vim, spaces

是否可以打开缩进 2 个空格的文件，但显示 4 个空格缩进，当我创建 4 个空格时，它以 2 个空格格式保存？

**编辑**

事实证明，如果文件混合了制表符、2 个空格和 4 个空格，我还需要能够确保它能够正常工作。

**编辑 2**

所以，这是我目前的解决方案。我必须重新映射我的（最初映射到：w），以便我可以将光标放回原来的位置（并在我进行保存时给我一个“历史记录”，直到光标位置。有没有办法在不影响光标位置的情况下执行此操作（也不将替换添加到历史记录中）？

```
function! s:ShimSpaces()
    nunmap <C-S>
    nmap <C-S> ms``mt:w<Cr>`t`s
    augroup SeoTabs
        autocmd!
        autocmd BufReadPost,BufWritePost * set tabstop=4
        autocmd BufReadPost,BufWritePost * %substitute/^ \+/&&/e
        autocmd BufReadPost              * %substitute/ \+$//e
        autocmd BufWritePre              * %substitute/^\( \+\)\1/\1/e
        autocmd BufWritePre              * set tabstop=2
        autocmd BufWritePre              * retab
    augroup END
endfunction
command! -n=0 -bar ShimSpaces :call s:ShimSpaces() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T07:38:44.630

^([这与这里](https://stackoverflow.com/questions/13849368/can-vim-display-two-spaces-for-indentation-while-keeping-four-spaces-in-the-fil)所问的相反。)

该帮助有一个关于不同选项卡宽度的类似用例的示例，请参阅`:help retab-example`。

使其适应加倍/减半空间：

```
:augroup AdaptIndent
    :autocmd!
    :autocmd BufReadPost,BufWritePost  * %substitute/^ \+/&&/e
    :autocmd BufWritePre               * %substitute/^\( \+\)\1/\1/e
:augroup END 
```

使用`*`，这将影响*所有*打开的文件。要将其限制为某些文件，请参阅`:help autocmd-patterns`。

编辑：使用`:augroup`包装，这可以通过`:autocmd! AdaptIndent`. 这样，您可以轻松地打开/关闭它。为了便于使用，我将它放在一个函数中并定义一个调用它的自定义命令。

# jquery - 如何将 img 类添加到周围的 div

> ID：14514337
> 
> 赞同：0
> 
> 时间：2013-01-25T02:21:04.683
> 
> 标签：jquery, html, image, addclass

我有一个 img，它被包裹在一个 div 容器中。现在我想将 img 类添加到周围的 div 中。我怎样才能用 jQuery 做到这一点？

```
<div class="imagecontainer">
  <div class="imagebackgroud"></div>
  <div class="imageicon"></div>
  <img class="aligncenter">
</div> 
```

可以忽略 .imagebackground 和 .imageicon div，我想将 img 类“.aligncenter”添加到 .imagecontainer div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:34:31.477

试试看:) [http://jsfiddle.net/nlphuong/xm38X/](http://jsfiddle.net/nlphuong/xm38X/)

```
$(document).ready(function(){
    $("img").parent("div").addClass($("img").attr("class"));
}); 
```

ps：首先尝试使用 jsFiddle :))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:24:01.983

尝试这个：

```
$('img.aligncenter').parent().addClass('aligncenter'); 
```

使用 parent() [http://api.jquery.com/parent/](http://api.jquery.com/parent/)

否则：

```
$('.imagecontainer').addClass('aligncenter'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T02:24:48.140

```
$(".imagecontainer").addClass($('.imagecontainer img').attr("class")); 
```

这假设容器中有一个图像。

```
$(".aligncenter").parent().addClass("aligncenter"); 
```

这假设图像具有一个 aligncenter 类，并且只是将相同的已知类放在父级上。

或者您可以使用查找：

```
$(".imagecontainer").addClass($(".imagecontainer").find('img').attr("class")); 
```

编辑好吧，根据你的评论......

```
$("img.aligncenter").parent().addClass("aligncenter") 
```

应该管用。它针对所有具有“aligncenter”类的图像，然后将该类添加到父级。虽然这看起来非常接近示例 2，但它以这种方式专门针对具有 aligncenter 类的图像。

这是一个小提琴工作：http: [//jsfiddle.net/U5vRe/](http://jsfiddle.net/U5vRe/)

# javascript - 如何从 JavaScript 中的字符串中获取所有数字？

> ID：14514338
> 
> 赞同：8
> 
> 时间：2013-01-25T02:21:29.490
> 
> 标签：javascript, regex, numbers, integer

假设我有一个输入字段，并且想要解析提交字符串中的所有数字。例如，它可能是：

```
Hi I'm 12 years old. 
```

如何在没有通用模式的情况下解析所有数字？

我试过了：

```
x.match(/\d+/) 
```

但它只抓取 12 并且不会越过下一个空格，如果用户输入更多数字并且它们之间有空格，这会出现问题。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T02:23:11.580

添加`g`标志以返回数组中的所有匹配项：

```
var matches = x.match(/\d+/g) 
```

但是，这可能无法捕获带有分隔符的数字，例如`1,000`或`0.123`

您可能希望将您的正则表达式更新为：

```
x.match(/[0-9 , \.]+/g) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:26:23.440

```
var words = sentence.split(" ");
var numbers = words.filter(function(w) {
    return w.match(/\d+/);
}) 
```

# php - 使用 SQL 查询中的 json_encode 的 EOF 的 N 个字

> ID：14514339
> 
> 赞同：0
> 
> 时间：2013-01-25T02:21:36.723
> 
> 标签：php, mysql, json

这是一个 php 代码，它从 SQL 查询中检索数据，然后使用 json_encode

```
$app->get('/myapp/data.json', function () use($app) {
    $sql = "SELECT id, name FROM users;";

    try {
        $db = getConnection();
        $stmt = $db->query($sql);
        $results = $stmt->fetchAll(PDO::FETCH_OBJ); 
        $db = null;
        $app->contentType("application/json; charset=utf-8");
        $app->response()->status(200);
        $app->response()->body(json_encode(array('users'=>$results)));
    } catch(PDOException $e) {
        echo '{"error":{"text":'. $e->getMessage() .'}}';
    }
}); 
```

一切正常，但在 EOF 中出现了 N 个单词。

```
{"regiones":[{"id":"13","user":"peter"},
{"id":"14","user":"ben"},
{"id":"15","user":"harry"}]}n 
```

并且不要让我验证 json 数据

我尝试不使用 PDO（mysql_connect、mysql_select_db、mysql_query 等），同样，行尾的 N 字。但我改变了服务器并且工作正常。为什么？？？

# c# - 在 FOREACH 中设置项目的顺序

> ID：14514342
> 
> 赞同：4
> 
> 时间：2013-01-25T02:21:52.830
> 
> 标签：c#, foreach

我的控制器将对象列表传递给我的视图，允许我：

```
 @foreach (var optiongroup in Model)
        { 
```

模型内是一个`IEnumerable<Option>`. 我需要对这个选项列表进行排序，以便当我：

```
@foreach (var option in optiongroup.Options){ 
```

我最终得到一个列表，其中项目在调用的属性上排序，`option.SortOrder`而不是每个项目的序号位置。

那么如何获得在 ? 之前排序的列表`foreach`？我试过了：

```
@foreach (var option in optiongroup.Options.OrderByDescending(o => optiongroup.SortOrder)) 
```

和：

```
IEnumerable<Option> allOptions = optiongroup.Options.OrderByDescending(o => optiongroup.SortOrder); 
// then foreaching the allOptions list 
```

但还没有实现快乐。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T02:25:24.020

这个

```
IEnumerable<Option> allOptions = optiongroup.Options.OrderByDescending(o => optiongroup.SortOrder); 
```

应该

```
IEnumerable<Option> allOptions = optiongroup.Options.OrderByDescending(o => o.SortOrder); 
```

# javascript - 如何迭代一些 JSON 对象键

> ID：14514343
> 
> 赞同：0
> 
> 时间：2013-01-25T02:22:02.497
> 
> 标签：javascript, json

我有一个格式的 JSON 对象：

```
{
    "z061": {
        "status": "restored",
        "time": 135
    },
    "z039": {
        "status": "restored",
        "time": 139
    }, ...
} 
```

其中有 64 个区域，编号为 z001 到 z064。

Javascript 中根据 z001 到 z015 的“状态”填充表格的最佳方法是什么？这是我当前仅评估 z003 区域的代码：

```
 setInterval(function() {
        $.getJSON("http://rackserver.local:8080",function(data) {
          var temp = data.z003.status;
          if (temp != "restored")
            $("#securityTable tr:eq(3)").removeClass("error").addClass("success");
          else
            $("#securityTable tr:eq(3)").removeClass("success").addClass("error");
          });
        }, 1500); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:24:21.113

您可以使用点运算符或索引器运算符访问对象，此任务适用于索引器。

```
for (var i = 1; i <=15; i++){
    // hardcoded the check to make it easier.
    if (i >= 10) 
        var temp = data["z0" + i].status;
    else
        var temp = data["z00" + i].status;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:05:48.913

这是我想出的代码。

```
setInterval(function() {
  $.getJSON("http://rackserver.local:8080",function(data) {
    var i = 1, j;
    for (; i <= 64; i += 1) {
      j = 'z';
      if (i < 10)  j += '0';
      if (i < 100) j += '0';
      if (data[j + i].status !== "restored")
        $("#securityTable tr:eq(" + i + ")").removeClass("error").addClass("success");
      else
        $("#securityTable tr:eq(" + i + ")").removeClass("success").addClass("error");
    }
  }, 1500); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T02:35:55.020

```
 $.getJSON("http://rackserver.local:8080",function(data) {

$.each( data, function( key, value ) {
  if (data[key].status != "restored") {
//do your stuff
} else {
//do more stuff
}
}); 
```

# javascript - javascript创建html for svg i want to do this: but i want to do it in javascript dynamically... i tried: 问问题 问问题 2013-01-25T02:22:35.210 1431 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. i want to do this: but i want to do it in javascript dynamically... i tried: var object2 = document.createElement("object"); object2.type = "image/svg+xml"; object2.data = 'bitmaps/tornado2.svg'; object2.id = "tornado5"; document.getElementById('objLayer').appendChild(object2); // no .onload method var ele=document.getElementById("tornado5"); var links = ele.contentDocument.getElementsByClassName('myClass'); //paths in file use for (var i=0;i <links.length;i++){ 11374059="" links[i].style.fill="#00ff00" ;="" }="" the="" top="" html="" way="" can="" call="" 3-line-js-color-mod="" at="" bottom="" and="" it="" will="" mod="" color="" of="" svg.="" but="" if="" i="" load="" svg="" js="" way,="" loads,="" wont="" work.="" (you="" can't="" contentdocument="" thru="" an="" img,="" only="" object="" i'm="" told).="" question="" asks="" a="" similar="" he="" was="" told="" to="" use="" img.="" no="" good="" here.="" check="" your="" server="" logs="" see="" there="" is="" error="" related="" require_once('config.php')="" in="" google_client.php="" (if="" file="" wasn't="" found,="" script="" should="" have="" stopped).="" when="" you="" do="" require_once('google_client.php'),="" following="" code="" executed="" from="" that="" file.="" after="" require,="" $apiconfig="" be="" visible="" script.="" hack="" around="" with="" include="" paths="" bit="" so="" library="" 'just="" works'="" set_include_path(dirname(__file__)="" .="" path_separator="" get_include_path());="" require_once="" "config.php";="" local="" configuration="" merge="" it's="" values="" default="" (file_exists(dirname(__file__)="" '="" local_config.php'))="" {="" $defaultconfig="$apiConfig;" (dirname(__file__)="" local_config.php');="" $apiconfig);="" note="" not="" touch="" config.php.="" need="" override="" anything="" there,="" create="" local_config.php.="" my="" system="" php="" 5.3="" used="" this="" as="" show="" below="" throws="" errors.="" unsetting="" replicates="" error.="" <?php="" require_once('src="" google_client.php');="" print_r($apiconfig);="" uncommenting="" next="" line="" issue.="" unset($apiconfig);="" $api="new" google_client();="" ?="">javascriptsvgcreateelementgetelementsbyclassname 4 1 回答 1 This answer is useful 1 我建议使用 Object.setAttribute(attr, val); 在对象标签上。IE： var object2 = document.createElement("object"); object2.setAttribute("type", "image/svg+xml"); 于 2013-01-25T02:30:25.800 回答 Related 3 jasper-reports - 如何在 iReport 中绘制垂直线？ 3 ruby-on-rails - 编写关联满足条件的 Rails 查询 0 iphone - Facebook页面喜欢和推特关注 2 c# - 保持缓存与后端同步 2 database - 尝试在 Visual Basic 中使用 DataTable 更改数据库中的数据 0 if-statement - 写一个更好/更干净的 if 语句 2 php - 使用 eclipse、PHP 和 RSE 打开声明 2 php - 如何将图像放入目录 imagejpeg()？ 3 firefox - 如何使用 curl 通过代理模拟来自 Firefox 的请求？ 1 c# - 通过套接字缓慢下载 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</links.length;i++){>

> ID：14514347
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, svg, createelement, getelementsbyclassname

i want to do this:

```
<object type="image/svg+xml" id="tornado5" data="bitmaps/tornado2.svg">
</object> 
```

but i want to do it in javascript dynamically... i tried:

```
var object2 = document.createElement("object");
object2.type = "image/svg+xml";
object2.data = 'bitmaps/tornado2.svg';
object2.id = "tornado5";
document.getElementById('objLayer').appendChild(object2);  // no .onload method

var ele=document.getElementById("tornado5");
var links = ele.contentDocument.getElementsByClassName('myClass'); //paths in file use
for (var i=0;i<links.length;i++){ links[i].style.fill="#00ff00"; } 
```

the top html way can call the 3-line-js-color-mod at bottom and it will mod the color of the svg. But if i load the svg the js way, the svg loads, but the color mod wont work. (you can't mod the contentDocument thru an img, only thru an object i'm told).

question 11374059 asks a similar question and he was told to use img. No good here.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:30:25.800

我建议使用 Object.setAttribute(attr, val); 在对象标签上。IE：

```
var object2 = document.createElement("object");
object2.setAttribute("type", "image/svg+xml"); 
```

# c++ - C++ 有一个嵌套类继承自另一个嵌套类

> ID：14514349
> 
> 赞同：0
> 
> 时间：2013-01-25T02:22:51.737
> 
> 标签：c++, oop, inheritance, nested-class

我正在编写一个跨平台的类层次结构，并希望将依赖于平台的实现保留在它们自己的类中（而不是使用一个类`#ifdefs`）。这是我到目前为止所拥有的，但编译器抱怨这`BaseDef`是私有的。对于如何在编译它的同时保持这个基本结构的任何帮助将不胜感激:-)

**编辑：**从[这里](http://cboard.cprogramming.com/cplusplus-programming/85553-friend-cannot-inherit-private-subclass.html)看来这是不可能的。还有什么其他方法可以保持这个一般结构并仍然编译吗？

根目录

```
class Root {
    private:
        class BaseDef {
            virtual void foo() = 0;
            virtual void bar() = 0;
        };

        #ifdef _WIN32
        class WinImp;
        #else
        class NixImp;
        #endif

        BaseDef* imp;

        BaseDef* getImp();

    public:
        Root() : imp(getImp()) {}
        void foo();
        void bar();
}; 
```

根.cpp

```
#include "Root.h"
void Root::foo() {
    imp->foo();
}

void Root::bar() {
    imp->bar();
} 
```

WinImp.h

```
#ifdef _WIN32
#include "Root.h"
class WinImp : public Root::BaseDef {
    public:
        void foo();
        void bar();
};
#endif 
```

WinImp.cpp

```
#include "WinImp.h"
#ifdef _WIN32
    Root::WinImp::foo() {

    }

    Root::WinImp::bar() {

    }

    Root::BaseDef* Root::getImp() {
        return new Root::WinImp();
    }
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:25:16.237

它抱怨的`BaseDef`是`private`...

```
class Root {
    private:
        class BaseDef {
            virtual void foo() = 0;
            virtual void bar() = 0;
        }; 
```

所以公开...

```
class Root {
    public:
        class BaseDef {
            virtual void foo() = 0;
            virtual void bar() = 0;
        }; 
```

**脚注：**

你试图避免`#ifdef`，所以摆脱这个：

```
#ifdef _WIN32
class WinImp;
#else
class NixImp;
#endif 
```

相反，只需使用一个类：

```
class Imp; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:22:30.867

你的主要问题是这`BaseDef`是私人的。这意味着其他类（除了 Root 本身）无法访问该`BaseDef`名称。一种方法是`BaseDef`公开。或者，您可以使派生类 (`WinImp`和`NixImp`) 成为朋友，`Root`以便他们可以访问该`BaseDef`名称。此外`Root`无法访问 的成员，`BaseDef`因此他们需要公开或成为`Root`的朋友`BaseDef`。

```
class Root {
private:
  class BaseDef {
  public:
    // These need to be public so that Root can see them or Root needs to be a friend. 
    //Nothing else can see BaseDef though so this is safe.
    virtual void foo() = 0;
    virtual void bar() = 0;
  };

  class WinImp; // Forward declare the classes
  friend class WinImp; // And then make them friends
  class NixImp;
  friend class NixImp;

  BaseDef* imp;

  BaseDef* getImp();

public:
  Root() : imp(getImp()) {}
  void foo();
  void bar();
};

void Root::foo() {
  imp->foo();
}

void Root::bar() {
  imp->bar();
}

// Since this is a nested class i made it Root::WinImp
class Root::WinImp : public Root::BaseDef {
public:
  void foo();
  void bar();
};

void Root::WinImp::foo() {}

void Root::WinImp::bar() {}

Root::BaseDef* Root::getImp() {
  return new WinImp();
} 
```

根据 2003 标准 (11.4.p2)，此方法是不允许的，但在 C++11（相同示例）中，它是明确允许的 (11.3.p2)。但是，即使在 2003 模式下，clang（经过 3.1 测试）也接受了这一点。gcc（4.7.2 测试）接受这一点（即使在 2003 模式下），只要派生类嵌套在同一个类内，但如果在类外则不会。

# .net - Chrome 阻止来自相对 URL 的不安全内容

> ID：14514352
> 
> 赞同：0
> 
> 时间：2013-01-25T02:23:26.867
> 
> 标签：.net, url, google-chrome, iis, https

我已经接管了一个网站的开发，Chrome 正在阻止使用相对路径的 URL，并显示当页面为 https 时它们在 http 下提供的消息。

[页面](https://www.universalmetals.com/inventory/bitsnpeices.rails)头部如下：

```
<link rel="stylesheet" type="text/css" href="/web-app/css/main.css">
<link rel="stylesheet" type="text/css" href="/web-app/css/cart.css">
<link rel="stylesheet" type="text/css" href="/web-app/css/inventory.css">

<link rel="stylesheet" type="text/css" href="/web-app/css/jquery-ui-1.8.17.custom.css">
<link rel="stylesheet" type="text/css" href="/web-app/css/jquery.fancybox.css?v=2.0.4" media="screen">
<link rel="stylesheet" type="text/css" href="/web-app/css/jquery.fancybox-buttons.css?v=2.0.4" media="screen">
<link rel="stylesheet" type="text/css" href="/web-app/css/jquery.fancybox-thumbs.css?v=2.0.4" media="screen">

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>

<script type="text/javascript" src="/web-app/js/jquery.mousewheel-3.0.6.pack.js"></script>
<script type="text/javascript" src="/web-app/js/jquery.fancybox.pack.js?v=2.0.4"></script>
<script type="text/javascript" src="/web-app/js/jquery.fancybox-buttons.js?v=2.0.4"></script>
<script type="text/javascript" src="/web-app/js/jquery.fancybox-thumbs.js?v=2.0.4"></script>
<script type="text/javascript" src="/web-app/js/jquery.animate_from_to-1.0.min.js"></script>
<script type="text/javascript" src="/web-app/js/main.js"></script>
<script type="text/javascript" src="/web-app/js/cart.js"></script>
<script type="text/javascript" src="/web-app/js/inventory.js"></script> 
```

相对网址不应该选择https吗？这是缓存问题吗？我的背景是'nix/开源，所以我对 IIS 没有太多经验，是否有服务器设置可以强制所有资源使用 https？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:43:45.973

也许这就是问题所在，Chrome 假设 http：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:22:08.450

答案原来是在 Web.config 中添加路径：

```
<secureWebPages mode="On" ignoreHandlers="withStandardExtensions">
    <directories>
        <add path="web-app/css" secure="Ignore" recurse="True" />
        ... 
```

# opencv - 将 2D 图像点转换为 3D 世界点

> ID：14514357
> 
> 赞同：17
> 
> 时间：2013-01-25T02:23:51.673
> 
> 标签：opencv, computer-vision

我知道在一般情况下，进行这种转换是不可能的，因为从 3d 到 2d 的深度信息丢失了。

但是，我有一个固定的相机，我知道它的相机矩阵。我还有一个**已知尺寸**的平面校准图案——假设在世界坐标中它有角 (0,0,0) (2,0,0) (2,1,0) (0,1,0)。使用 opencv 我可以估计模式的姿势，给出将对象上的点投影到图像中的像素所需的平移和旋转矩阵。

现在：这种 3d 到图像的投影很容易，但是另一种方式呢？如果我在图像中选择一个我**知道是校准图案一部分的**像素，我怎样才能获得相应的 3d 点？

我可以迭代地选择校准图案上的一些随机 3d 点，投影到 2d，并根据误差细化 3d 点。但这似乎很可怕。

鉴于这个未知点的世界坐标类似于 (x,y,0) - 因为它必须位于 z=0 平面上 - 似乎应该有一些我可以应用的转换，而不是做迭代废话. 虽然我的数学不是很好 - 有人可以计算出这个转换并解释你是如何推导出它的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-30T10:54:13.687

这是一个封闭形式的解决方案，我希望可以帮助某人。[使用上面评论中图像](https://i.stack.imgur.com/xT0ds.png)中的约定，您可以使用居中归一化像素坐标（通常在失真校正之后）u 和 v，以及外部校准数据，如下所示：

```
|Tx|   |r11 r21 r31| |-t1|
|Ty| = |r12 r22 r32|.|-t2|
|Tz|   |r13 r23 r33| |-t3|

|dx|   |r11 r21 r31| |u|
|dy| = |r12 r22 r32|.|v|
|dz|   |r13 r23 r33| |1| 
```

使用这些中间值，您想要的坐标是：

```
X = (-Tz/dz)*dx + Tx
Y = (-Tz/dz)*dy + Ty 
```

**解释：**

矢量 [t1, t2, t3] ^t是世界坐标系原点（校准图案的 (0,0)）相对于相机光学中心的位置；通过反转符号和反转旋转变换，我们得到向量**T** = [Tx, Ty, Tz] ^t，它是相机中心在世界参考系中的位置。

类似地，[u, v, 1] ^t是相机参考系中观察点所在的向量（从相机中心开始）。通过反转旋转变换，我们得到向量**d** = [dx, dy, dz] ^t，它表示世界参考系中的相同方向。

为了逆旋转变换，我们利用了旋转矩阵的逆是它的转置（[链接](http://en.wikipedia.org/wiki/Rotation_matrix#Properties_of_a_rotation_matrix)）这一事实。

现在我们有一条从点**T开始的方向矢量为****d**的线，这条线与平面 Z=0 的交点由第二组方程给出。请注意，同样容易找到与 X=0 或 Y=0 平面或与它们平行的任何平面的交点。

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T12:43:05.637

是的你可以。如果您有一个将 3d 世界中的点映射到图像平面的变换矩阵，则可以使用该变换矩阵的逆矩阵将图像平面点映射到 3d 世界点。如果您已经知道 3d 世界点的 z = 0，这将导致该点的一种解决方案。无需反复选择一些随机 3d 点。我有一个类似的问题，我将摄像头安装在具有已知位置和摄像头校准矩阵的车辆上。我需要知道在相机的图像位置上捕获的车道标记的真实位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-13T09:30:09.623

如果您在世界坐标中为您的点设置 Z=0（这对于平面校准图案应该是正确的），而不是反转旋转变换，您可以从相机和校准图案计算图像的单应性。

当您有单应性时，您可以选择图像上的点，然后使用逆单应性获取其在世界坐标中的位置。只要世界坐标中的点与用于计算此单应性的点在同一平面上（在这种情况下 Z = 0），这是正确的

这个问题的方法也在下面这个问题上讨论过：[Transforming 2D image coordinates to 3D world coordinates with z = 0](https://stackoverflow.com/questions/44104633/transforming-2d-image-coordinates-to-3d-world-coordinates-with-z-0)**

# javascript - 在可排序网格上使用 connectWith 时 JQuery 可排序中断

> ID：14514359
> 
> 赞同：3
> 
> 时间：2013-01-25T02:24:07.657
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-ui-sortable

我一直在使用 JQuery 可排序网格，并且遇到了一个奇怪的问题，即当有 2 个或更多与该`connectWith`选项链接的可排序网格时，拖动/占位符会中断。到目前为止，我已经在 Chrome、Firefox 和 Safari 中测试并确认了相同的行为。

似乎拖动忽略了鼠标位置，并且占位符位置显得有些随机。

**示例：** [http ://wilhall.com/tests/apptest.html](http://wilhall.com/tests/apptest.html)

当网格未使用以下方法连接时，上述问题已修复`connectWith`：

**示例：** [http ://wilhall.com/tests/apptest_2.html](http://wilhall.com/tests/apptest_2.html)

~~本能地，我决定将我的代码放入 jsfiddle 来发布这个问题，但是当我这样做时，在 jsfiddle 上查看时错误不存在：~~

~~**小提琴：http:** [//jsfiddle.net/B2ddx/1/](http://jsfiddle.net/B2ddx/1/)~~

以下是我对两个可排序网格的配置选项：

```
 $(".modules.app").sortable({
            cursor: "move",
            distance: 1,
            revert: 100,
            scroll: true,
            tolerance: "intersect",
            opacity: 0.6,
            connectWith: ".modules.bin",
            placeholder: "placeholder",
            forcePlaceholderSize: true
        }).disableSelection();

        $(".modules.bin").sortable({
            cursor: "move",
            distance: 1,
            revert: 100,
            scroll: true,
            tolerance: "intersect",
            opacity: 0.6,
            connectWith: ".modules.app",
            placeholder: "placeholder",
            forcePlaceholderSize: true
        }).disableSelection(); 
```

我更新了我的示例页面，使其不包含除 jquery 和 jquery-ui 之外的外部 CSS 或 JS，现在使用与 jsfiddle 相同的 jquery 和 ui 版本，以确保一切正常，但问题仍然存在。

我真的很困惑可能导致这种情况的原因，并且在我尝试新的解决方案时会继续发布更新。

**更新：** 在 JSFiddle 中，该`connectTo`选项无法正常工作，并且实际上并没有链接列表 - 这就是问题不存在的原因。

`li`此外，当可排序元素不浮动时，问题也不存在。

**更新：** 按照建议，我删除了包含可排序项目的元素的任何百分比高度，这解决了问题，但又创建了另一个问题：没有任何高度（容器的高度为 0），项目无法在两个可排序网格之间拖动。

为了解决这个问题，我尝试向可排序容器添加`float:left`和/或`height: 500px`，但存在同样的问题。

* * *

这是一个展示问题的***简化***JSFiddle：http: [//jsfiddle.net/y8xrZ/](http://jsfiddle.net/y8xrZ/)

如果您`connectWith`从呼叫中删除该选项`.sortable`，问题就会消失。请注意，此错误会影响正在使用的可排序容器`connectWith`。因此，在示例中，仅从容器中删除*仅*`connectWith`解决了容器`#app`的问题，但不能解决容器的问题。*`#app``#bin`*

 ** * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T06:12:23.523

Thanks to your find re jQueryUI version, I was able to work this one out.

The biggest clue is of course the behaviour when a `connectWith` option is set. I hunted through the `jquery.ui.sortable.js` file, and found that the problem seemed to be caused in the `_contactContainers` method, although I could not figure out why.

Knowing that jQuery UI 1.8.24 does work, I compared the sortable file in both. While there appear to be quite a number of differences between the two files even in the `_contactContainers` method, it seems to come down to a difference in an if-else block. In this case, the older version has a condition (`else if(this.currentContainer != this.containers[innermostIndex])`) whereas the newer one does not.

At about line 734 in `jquery.ui.sortable.js` in version 1.9.2, we see an if-else block that begins like this:

```
// move the item into the container if it's not there already
if(this.containers.length === 1) {
    this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
    this.containers[innermostIndex].containerCache.over = 1;
} else {
.... 
```

Just change it to this:

```
// move the item into the container if it's not there already
if(this.containers.length === 1) {
    this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
    this.containers[innermostIndex].containerCache.over = 1;
} else if(this.currentContainer != this.containers[innermostIndex]) { 
```

Adding that condition to the `else` did the trick for me.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:14:47.627

我认为您应用于`ul`元素的显式高度和宽度规则就是这样做的。当我在课堂上禁用这些规则时`.modules`，事情似乎正常运行。因此，从类中删除以下行`.modules`：

```
height: 100%;
width: 100%; 
```

无论如何，通常都知道指定百分比高度是有问题的（或者至少曾经是），所以我建议不要这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:46:04.627

这已在 jQuery UI 1.10.2 中修复 遇到同样的问题并切换到最新的稳定版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T18:10:26.993

我也有这个问题。jQuery UI 上的示例代码说要浮动您的项目以创建网格。对我来说，解决方法是将 CSS 更改为使用 inline-block，如 jQuery UI 上的 Ticket#4551 底部所述 - [http://bugs.jqueryui.com/ticket/4551](http://bugs.jqueryui.com/ticket/4551)：

更改**浮动：左**显示：内**联块**

例如：

```
<style>
  #sortable1 li, #sortable2 li { display: inline-block; }
</style> 
```

html类似于：

```
<ul id="sortable1" class="connectedSortable">
    <li>
       <div class="grid-box">
           ...
       </div>
    </li>
</ul>

<ul id="sortable2" class="connectedSortable">
    <li>
       <div class="grid-box">
           ...
       </div>
    </li>
</ul> 
```*

# css - 在 CSS 中，将自定义字体应用于网页时是否需要备用字体？

> ID：14514360
> 
> 赞同：7
> 
> 时间：2013-01-25T02:24:07.863
> 
> 标签：css, fonts, font-face

在 CSS 中，如果我要上传用于网页的自定义字体，为什么建议使用备用字体？

我认为只有在客户端没有安装 1st/2nd/3rd..etc 选项时才需要备份字体。

例如，如果您有以下代码：

```
@font-face {
    font-family: MyCustomFont;
    src: url('../fonts/MyCustomFont.ttf');
} 
```

为什么这是必要的？

```
body {
    font-family: MyCustomFont, Arial, Helvetica, sans-serif;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T02:52:27.927

没有*必要*指定字体堆栈，但它有助于在浏览器无法以某种方式使用字体的模糊情况下优雅地降级，例如，如果对字体文件的 HTTP 请求超时，字体文件本身会损坏或无法使用，浏览器不支持任何给定的字体格式等。

当然，您应该尽最大努力确保下载并正确使用自定义字体。但是有时会发生并且确实会发生超出您控制的事情，因此仍然有一些不错的事情可以参考并没有什么坏处。这就是为什么它们被称为备份或后备字体:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-17T20:27:15.413

DaveRandom，这些将是计算业务中唯一的嵌套 while 循环。

我想出了一种集成 Google 字体的方法，而不会出现使用 3rd 方字体时通常会遇到的任何问题。

首先，我们知道我们的 Google 字体文件是 .woff 格式的，可​​能无法在所有浏览器中使用。

其次，如果 Google Cloud 或其他恶意软件由于缓存限制或其他网络限制而阻止从我们的服务器下载字体文件，我们知道这种连接的伪状态可能会支持来自 Google Fonts 的 .woff 字体。

为了谷歌的功劳，我们也许能够以其他方式加载我们的图像，所以为什么不试试我们最终产品的谷歌字体版本..所以为什么不这样做：

*为了确保在添加 Google 字体时字体保持不变，我建议不要删除自托管字体，除非经过验证的原告出于权利所有权的原因要求您这样做。*

与其删除真正实现跨浏览器兼容性的真正关键的自托管字体，不如在 CSS 中创建一个相同字体条目，将其字体标题指定为第 3 方，例如：“ArialVanityGoogleFonts”。使用浏览器的内置字体后备 .csv 并包含以下字体：ArialVanity、ArialVanityGoogleFonts、Arial

# javascript - XMLHttpRequest 打开函数的异步事件监听器

> ID：14514362
> 
> 赞同：1
> 
> 时间：2013-01-25T02:24:09.503
> 
> 标签：javascript, asynchronous, xmlhttprequest, synchronous, event-listener

我正在使用下面的代码向 API 发出 POST 请求并从服务器获取一些数据

```
 request.open("POST", url, true);
    request.setRequestHeader("Content-type", "application/json; charset=UTF8");
    request.setRequestHeader("X-Accept", "application/json");
    request.send(JSON.stringify(data)); 
```

我的问题是如何决定我应该异步还是同步。好吧，实际上我的异步问题是我不确定如何应用一个事件监听器来监听该 XHR 的完成情况。

如果我使用异步调用，我的 Web 应用程序获取数据太晚，并且应用程序加载了以前的缓存数据，但如果我使用同步调用，获取和显示数据大约需要一秒钟，我不确定如何显示“加载”图标，因为我不确定在哪里附加 eventListener。

有人可以说明如何正确使用 XHR 吗？

*我想提一下，这是我第一次尝试使用 XHR 通过 API 从服务器获取数据。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:45:21.553

坚持使用**asynchronous**，因为它不会冻结浏览器并允许以更优雅的方式处理响应。至于 XHR 的完成，使用这个：

```
request.open("POST", url, true);
request.onreadystatechange = function () {
    if (request.readyState === 4) {
        // XHR state is DONE
        if (request.status == 200) {
            // HTTP 200 status code (success)
            // HIDE YOUR "LOADING" SPINNER
            // use request.responseText to get the response's content
        }
    }
};
request.setRequestHeader("Content-type", "application/json; charset=UTF8");
request.setRequestHeader("X-Accept", "application/json");
request.send(JSON.stringify(data));
// SHOW YOUR "LOADING" SPINNER 
```

与往常一样，最好阅读一些文档：[https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)

“我的 Web 应用程序获取数据太晚，并且应用程序加载了以前的缓存数据” - 我不确定你的意思是什么，但如果你更多地解释上面的代码是如何被调用/使用的，我确保可以对其进行重组以正常工作。

# java - 在 Android 的 SD 卡中写入文件

> ID：14514363
> 
> 赞同：2
> 
> 时间：2013-01-25T02:24:15.597
> 
> 标签：java, android

我一直在寻找这个问题。它实际上在旧版本的 android 中工作，但在我更新 SDK 后，我得到一个错误。错误消息是“打开文件：ENOTDIR（不是目录）：/sdcard/PlayNumbers/mysdfile.xml”请有人指出我做错了什么？我的代码如下。

非常感谢，

```
path=new File("/sdcard/PlayNumbers");
myFile = new File(path,"mysdfile.xml");
if (!path.exists()) {
    path.mkdirs();
}
if(!myFile.exists()){
    myFile.createNewFile();
}

FileOutputStream fOut = new FileOutputStream(myFile);
OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);

myOutWriter.append("test");
myOutWriter.close();
fOut.close(); 
```

==>

```
File path = null;
File myFile = null;
String filePath = Environment.getExternalStorageDirectory().toString();
path=new File(filePath+"/PlayNumbers/");
myFile = new File(path,"mysdfile.xml");

//i also tried both as below
//path=new File(filePath+"/PlayNumbers");
//myFile = new File(path,"mysdfile.xml");

if (!path.exists()) {
    path.mkdirs();
}
if(!myFile.exists()){
    myFile.createNewFile();
}
FileOutputStream fOut = new FileOutputStream(myFile);
OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
myOutWriter.append("test");
myOutWriter.close();
fOut.close(); 
```

ps好的，我已经改变了你们提到的我的代码，但它仍然给我同样的错误，它不是目录......任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:45:30.853

假设您在清单中具有正确的权限，这应该可以工作：

```
File externalStorageDir = Environment.getExternalStorageDirectory();
File playNumbersDir = new File(externalStorageDir, "PlayNumbers");
File myFile = new File(playNumbersDir, "mysdfile.xml");

if (!playNumbersDir.exists()) {
    playNumbersDir.mkdirs();
}
if(!myFile.exists()){
    myFile.createNewFile();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:34:55.423

您只需要更改为以下代码，因为您缺少“/”：

```
myFile = new File(path,"/mysdfile.xml"); 
```

但请记住，您必须具有在清单文件中写入外部存储的权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# php - 如何在我的静态 html 网站上显示来自 Wordpress 的一篇（精选）帖子？

> ID：14514367
> 
> 赞同：0
> 
> 时间：2013-01-25T02:24:29.240
> 
> 标签：php, html, wordpress

我们的网站 (http://www.litepanels.com/news/) 上有一个 Wordpress 新闻博客，它与静态 html 网站的其余部分是分开的。我只想获取最新的故事（精选帖子）并将其显示在我们的主页上。博客和我们的网站在同一台服务器上。我发现我可以抓住这样的帖子标题：

```
<?php
require('../news/wp-blog-header.php');
 ?>
<?php query_posts('showposts=3'); ?>
<?php while (have_posts()) : the_post(); ?>
<a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php       the_title(); ?>"><?php the_title(); ?></a><br />
<?php endwhile;?> 
```

但我不太了解 PHP，如何仅获取精选帖子（如您在上面的链接中看到的标题、图像和文本）

我在这里测试它：[http ://www.litepanels.com/newwebsite/blog_test2.php](http://www.litepanels.com/newwebsite/blog_test2.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:13:39.543

如果这对你有用，这意味着你已经拥有了所有你需要的东西，除了某种方式来显示你的信息。为此，Wordpress 提供了一些可以在 while 循环中使用的模板标签。[the_content](http://codex.wordpress.org/Function_Reference/the_content)是您需要的。[其他可以在 Codex 中找到。](http://codex.wordpress.org/Template_Tags)

# android - Android cordova 1.8.2 jquery 1.8 和 jquery 1.2 上的白屏。应用

> ID：14514368
> 
> 赞同：1
> 
> 时间：2013-01-25T02:24:33.543
> 
> 标签：android, jquery, cordova, jquery-mobile

我想从我的科尔多瓦安卓应用程序中摆脱白屏。我正在通过 window.document.location 调用新页面。首先它将显示白屏几秒钟，然后出现实际页面。

我相信 jquery JS 在每个页面上都需要时间加载。

请帮忙。

谢谢

拉吉夫·戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:50:19.387

利用

```
window.open('mypagename.html"); 
```

# python - opencv-python：不是一个 numpy 数组

> ID：14514369
> 
> 赞同：0
> 
> 时间：2013-01-25T02:24:36.300
> 
> 标签：python, arrays, opencv, numpy

我想使用当前数组作为在帧图像中进行的模糊操作的输出数组，我得到了这个错误：

```
TypeError: <unknown> is not a numpy array 
```

我已经检查过了，两者都是相同大小和类型的数组，我不明白为什么会这样。

部分代码：

```
previous = np.zeros((frameHeight,frameWidth,3),np.uint8) #blank image with 640x480 and 3 channels
difference = np.zeros((frameHeight,frameWidth,3),np.uint8)
current = np.zeros((frameHeight,frameWidth,3),np.uint8)

while True:
    # Capture a frame
    flag,frame = capture.read()
    cv2.flip(frame, flipCode=1)

    # Difference between frames
    cv2.blur(frame, current, (15,15)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:37:01.403

的参数`cv2.blur`，如[文档](http://docs.opencv.org/modules/imgproc/doc/filtering.html#blur)中所述，如下：

```
cv2.blur(src, ksize[, dst[, anchor[, borderType]]]) → dst 
```

所以，我想你的意思是

```
current= cv2.blur(frame, (15,15)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T01:32:32.030

可能您已经使用**cv2.imread**的 cv.CreateImage instread**打开**了图像 只有在使用 imread 打开图像时才能使用 imwrite。

# php - 将 JavaScript 引用插入所有 WordPress 页面

> ID：14514373
> 
> 赞同：0
> 
> 时间：2013-01-25T02:24:53.417
> 
> 标签：php, wordpress

我们有一个 WordPress MU 安装（v2.6.2），我试图弄清楚如何在所有提供的页面中包含对 JavaScript 文件的引用。研究表明，这样做的关键是使用 wp_enqueue_scripts，但我不知道在哪里调用它。

我想我可以通过为每个主题添加对 header.php 的调用来实现我想要的。但是有没有一个地方我可以做到这一点，所以我不必更新每个主题的 header.php 文件？

我不需要将 JavaScript 包含在管理页面中，但解决方案是否导致这种情况发生并不重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:31:10.790

WordPress MU 在 3.0 版中集成到 WordPress 本身。这篇文章的当前版本是 3.5.1。我可以告诉您如何在当前版本中执行此操作，但可能需要对其进行调整以使其在您运行的版本中工作。

这将在标题中放置一个脚本：

```
<?php
function my_scripts_method() {
    wp_enqueue_script(
        'any-name-you-want',
        'url/of/script'
    );
}    

add_action('wp_enqueue_scripts', 'my_scripts_method');
?> 
```

[这是wp_enqueue_script()](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)的法典页面

*注意：在构建 JS 文件的 URL 时查看[这些函数。](http://codex.wordpress.org/Determining_Plugin_and_Content_Directories#Available_Functions)

您可以将其添加到每个主题的`functions.php`文件中，也可以将其保存为 PHP 文件并将其用作[必须使用的插件](http://codex.wordpress.org/Must_Use_Plugins)。如果您想让它成为必须使用的插件，请将其放在**wp-content/mu-plugins**目录中，它将自动为所有站点运行。在更新的 WordPress 版本中，您还可以将其设为普通插件并通过网络激活它，但我认为您的版本中没有该选项。

**关于您可能遇到的与您正在运行的版本相关的任何问题：**

我知道`wp_enqueue_script()`是在 2.6 中添加的，但我不确定相应的`wp_enqueue_scripts`钩子。如果它不起作用，您可以尝试挂钩`init`：

```
add_action('init', 'my_scripts_method'); 
```

如果也不起作用，您甚至可能会在`wp_enqueue_script()`没有将其挂钩到操作中的情况下进行赤裸裸的调用。`init`如果您必须使用其中任何一个，您应该使用以下条件将其包围，以防止它被添加到您的管理屏幕：

```
if ( ! is_admin() ) {
    /* code */
} 
```

老实说，你真的应该考虑升级。我知道这可能会很痛苦，但旧版本的 WordPress 中存在多个已知的安全问题。更不用说一些非常棒的新功能了。

# python - 强制 PyGtk main 重绘

> ID：14514374
> 
> 赞同：2
> 
> 时间：2013-01-25T02:24:56.693
> 
> 标签：python, python-2.7, gtk, pygtk, gobject

我有这样的 UI 结构：
1x Horizo​​ntalBox -> 8x VerticalBox -> 2x Section(GObject) -> 1x RectangleWidget(gtk.DrawingArea)

这只是一个两行 16 个 cairo 矩形的表格。

cairo 矩形部件本身是 gtk.DrawingArea 的子类，并且有一个暴露处理程序。

我现在重写了程序，数据结构和UI现在完全分开了。有一个线程在后台运行，更新数据结构。在 UI的前端`gobject.threads_init()`被调用。在 100 毫秒超时后`gobject.timeout_add(100, self.update_widget)`，主程序发出一个信号，该信号仅由第一个小部件接收。

这里是暴露处理程序：

```
def OnDraw(self, widget, event):    
    # self.window / widget.window works both
    ctx = widget.window.cairo_create()
    ctx.save()

    rect = self.get_allocation()    
    ctx.rectangle(50, 0,  30, rect.height)
    ctx.set_source_rgb(*self._BACKGROUND_RGB)
    ctx.fill()

    ctx.rectangle(0, rect.height * (1\. - self.section.GetLevel()), rect.width, rect.height)
    ctx.clip()        
    ctx.set_source_surface(self.source, 0, 0)   
    ctx.paint()
    ctx.restore()

    return False
#_____________________________________________________________________

def update_widget(self):
    rect = self.get_allocation()        
    self.window.invalidate_rect(rect, False)
    while gtk.events_pending():
        gtk.main_iteration(False)
    return True
#_____________________________________________________________________ 
```

注意：
如果我最小化并恢复窗口，小部件会收到 gsignal 并得到更新。

我尝试了不同的方法。包括线程、不同的信令......所有方法都会导致上述相同的行为。

如何强制 gtk.main 返回并重绘其他小部件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-29T17:58:40.437

尝试`mainHbox.queue_draw()`

如果它不起作用，请遍历所有 RectangleWidget 对象并重绘：

```
for vbox in mainHbox.get_children():
    for hbox in vbox.get_children():
        for widget in hbox.get_children():
            widget.queue_draw() 
```

如果您使用的是`Table`，那就更容易了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-09T08:56:13.073

> 超时 100 毫秒后 gobject.timeout_add(100, self.update_widget)

尝试在另一个线程中创建没有 gobject.timeout_add() 和所有其他计算的 GUI 线程。

gobject.timeout_add 看起来像分离的线程，gtk 无法正常使用它。

我的程序的一部分（它有效）：

```
def init_tr_modules(self):
    window = gtk.Window(gtk.WINDOW_TOPLEVEL)
    window.set_title("Checking internet connection")
    window.set_border_width(2)
    window.set_icon(app_gui.icon)
    window.set_geometry_hints(None, 510, 27)
    vbox = gtk.VBox(False, 1)
    vbox.set_border_width(1)
    window.add(vbox)
    pbar = gtk.ProgressBar()
    vbox.pack_start(pbar, False, False, 1)
    window.set_position(gtk.WIN_POS_CENTER)
    window.set_resizable(False)
    pbar.set_text("Wait")
    pbar.set_pulse_step(0.01)
    window.show_all()
    tr_thread = \
         threading.Thread(target = self.init_tr_services)
    tr_thread.start()
    while self.queue.qsize() == 0:
        while gtk.events_pending():
            gtk.main_iteration(False)
        pbar.pulse()
        sleep(0.05)
    while self.queue.qsize():
        self.queue.get()
    window.set_title("Get list")
    pbar.set_fraction(0.005)
    while gtk.events_pending():
        gtk.main_iteration(False)
    for i in self.tr_services:
        pbar.set_text(i.service.get_service_name())
        tr_thread = \
            threading.Thread(target = i.service.renew_list)
        tr_thread.start()
        while self.queue.qsize() == 0:
            while gtk.events_pending():
                gtk.main_iteration(False)
        while self.queue.qsize():
            self.queue.get()
        new_val = pbar.get_fraction() + (1.0-0.006) / len(self.tr_services)
        pbar.set_fraction(new_val)
    window.destroy()
#end def 
```

所有非 gui 操作都隐藏在非主线程中。主线程 - gui。如果我正确理解问题，希望这会有所帮助。:)

# uitableview - 如何将 MapViewController 设置为 TableViewController 的数据源以在单元格中显示距离

> ID：14514377
> 
> 赞同：0
> 
> 时间：2013-01-25T02:25:01.773
> 
> 标签：uitableview, mkmapview, distance

我的应用程序有一个带有 UIViewController 的 tabbarcontroller（FirstViewController-称之为 mapVC），带有一个 mapview 和一个 UITableViewController（SecondViewController-称之为 tableVC）。该应用程序从 Web 获取数据并将其放入 CD-db 中，每个 VC 执行对 db 的提取。每个实体都被命名为 Holiday（不要问），它有一个 lat 和 long 属性。

这是尝试将 mapVC 设置为 tableVC 的数据源的 UITabBarController 子类：

```
- (void)viewDidLoad{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    FirstViewController *mapVC;
    SecondViewController *tableVC;

    for(UIViewController *anyVC in self.viewControllers)
    {
        if([anyVC.class isKindOfClass:[SecondViewController class]]){
            tableVC = (SecondViewController *)anyVC;
        } else if ([anyVC.class isKindOfClass:[FirstViewController class]]){
            mapVC = (FirstViewController *)anyVC;
        }
    }

    tableVC.tableView.dataSource = mapVC;
    tableVC.tableView.delegate = mapVC;
} 
```

以下是mapVC的相关部分：

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>
#import "SecondViewController.h"

#define METERS_PER_MILE 2609.344

@interface FirstViewController : UIViewController <MKMapViewDelegate, UITableViewDataSource, UITableViewDelegate>{
    BOOL _doneInitialZoom;

}

@property (strong, nonatomic) IBOutlet MKMapView *_mapView;
@property (strong, nonatomic) IBOutlet UIBarButtonItem *refreshButton;
@property (nonatomic, strong) NSString *entityName;
@property (strong, nonatomic) CLLocation *userLocation;

- (IBAction)refreshTapped:(id)sender;
-(void)showDetailView;
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
@end 
```

及其实施：

```
#import "FirstViewController.h"
#import "Holiday.h"
#import "MyLocation.h"
#import "SDCoreDataController.h"
#import "MyTabBarController.h"
#import "TableViewCell.h"

- (void)loadRecordsFromCoreData {
    [self.managedObjectContext performBlockAndWait:^{
        [self.managedObjectContext reset];
        NSError *error = nil;
        NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:self.entityName];
        [request setSortDescriptors:[NSArray arrayWithObject:
                                     [NSSortDescriptor sortDescriptorWithKey:@"date" ascending:YES]]];
        self.farSiman = [self.managedObjectContext executeFetchRequest:request error:&error];

    }];
    NSLog(@"self.farSiman on launch = %@", self.farSiman);
}

- (void)plotStorePositions:(NSString *)responseString {

    for (id<MKAnnotation> annotation in _mapView.annotations) {
        [_mapView removeAnnotation:annotation];
    }

    NSLog(@"Dictionary is %@", self.farSiman);

    for (Holiday * holidayObject in self.farSiman) {

        NSString * latitude = holidayObject.latitude;
        NSString * longitude = holidayObject.longitude;
        NSString * storeDescription = holidayObject.name;
        NSString * address = holidayObject.address;

        CLLocationCoordinate2D coordinate;
        coordinate.latitude = latitude.doubleValue;
        coordinate.longitude = longitude.doubleValue;
        MyLocation *annotation = [[MyLocation alloc] initWithName:storeDescription address:address coordinate:coordinate distance:0];

        //
        CLLocation *pinLocation = [[CLLocation alloc] initWithLatitude:annotation.coordinate.latitude longitude:annotation.coordinate.longitude];
        //[(MyLocation*)[view annotation] coordinate].latitude longitude:[(MyLocation*)[view annotation] coordinate].longitude]];

        self.userLocation = [[CLLocation alloc] initWithLatitude:self._mapView.userLocation.coordinate.latitude longitude:self._mapView.userLocation.coordinate.longitude];
        NSLog(@"PLOT>>userLocation is %@", userLocation);

        CLLocationDistance calculatedDistance = [pinLocation distanceFromLocation:self.userLocation];
        annotation.distance = calculatedDistance/1000;
        NSLog(@"PLOT>>Distance to pin %4.0f", annotation.distance);
        //

        [_mapView addAnnotation:annotation];

    }

}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [self.farSiman count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    TableViewCell *cell = nil;

    // Check to see whether the normal table or search results table is being displayed and set the Candy object from the appropriate array
    NSLog(@"Already in CFRAIP");

    static NSString *CellIdentifier = @"HolidayCell";
    if (cell == nil) {
        cell = [[TableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        //cell.accessoryType=UITableViewCellAccessoryDetailDisclosureButton;
    }
    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    Holiday *holiday = [self.farSiman objectAtIndex:indexPath.row];
    cell.nameLabel.text = holiday.name;
    //cell.dateLabel.text = holiday.latitude;

    cell.dateLabel.text = [[self calculateDistanceForLat:[holiday.latitude doubleValue] Long:[holiday.longitude doubleValue]] stringValue];

    if (holiday.image != nil) {
        UIImage *image = [UIImage imageWithData:holiday.image];
        cell.imageView.image = image;
    } else {
        cell.imageView.image = nil;
    }
    return cell;
}

// Add new method above refreshTapped
- (NSNumber*)calculateDistanceForLat:(double)lati Long:(double)longi {
    double distancia;
    CLLocation *pinLocation = [[CLLocation alloc] initWithLatitude:lati longitude:longi];
    CLLocationDistance calculatedDistance = [pinLocation distanceFromLocation:self.userLocation];

    //test locations
    NSLog(@"pinLocations is %@, userLocation is %@", pinLocation, self.userLocation);

    distancia = calculatedDistance/1000;
    return [NSNumber numberWithDouble:distancia];
} 
```

plotStoreLocations 方法是从 mapVC 工具栏中的 UIButton 调用的唯一方法。

至于tableVC（SecondViewController）

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

@interface SecondViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate, UISearchBarDelegate, UISearchDisplayDelegate>

@property (nonatomic, strong) NSArray *dates;
@property (nonatomic, strong) NSString *entityName;
@property (strong, nonatomic) IBOutlet UIBarButtonItem *refreshButton;

@property (strong,nonatomic) NSMutableArray *filteredResultsArray;
@property (strong,nonatomic) IBOutlet UISearchBar *resultsSearchBar;

@property (strong, nonatomic) CLLocation *userLocation;

- (IBAction)refreshButtonTouched:(id)sender; 
```

及其实现：

```
- (void)loadRecordsFromCoreData {
    [self.managedObjectContext performBlockAndWait:^{
        [self.managedObjectContext reset];
        NSError *error = nil;
        NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:self.entityName];
        [request setSortDescriptors:[NSArray arrayWithObject:
                                     [NSSortDescriptor sortDescriptorWithKey:@"date" ascending:YES]]];
        self.dates = [self.managedObjectContext executeFetchRequest:request error:&error];
        NSLog(@"self.dates==%@",self.dates);
    }];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        return [filteredResultsArray count];
    } else {
        return [self.dates count];
    }

    //return [self.dates count];
}

// Add new method above refreshTapped
- (NSNumber*)calculateDistanceForLat:(double)lati Long:(double)longi {
    double distancia;
    CLLocation *pinLocation = [[CLLocation alloc] initWithLatitude:lati longitude:longi];
    CLLocationDistance calculatedDistance = [pinLocation distanceFromLocation:self.userLocation];

    //test locations
    NSLog(@"pinLocations is %@, userLocation is %@", pinLocation, self.userLocation);

    distancia = calculatedDistance/1000;
    return [NSNumber numberWithDouble:distancia];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    TableViewCell *cell = nil;

    if (tableView == self.searchDisplayController.searchResultsTableView) {
        static NSString *CellIdentifier = @"HolidayCell";
        if (cell == nil) {
            cell = [[TableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        }
        cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        Holiday *holiday = [filteredResultsArray objectAtIndex:indexPath.row];
        NSLog(@"the holiday is %@", holiday.name);
        cell.nameLabel.text = holiday.name;

    } else {

        static NSString *CellIdentifier = @"HolidayCell";
        if (cell == nil) {
            cell = [[TableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        }
        cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        Holiday *holiday = [self.dates objectAtIndex:indexPath.row];
        cell.nameLabel.text = holiday.name;

        cell.dateLabel.text = [[self calculateDistanceForLat:[holiday.latitude doubleValue] Long:[holiday.longitude doubleValue]] stringValue];

        if (holiday.image != nil) {
            UIImage *image = [UIImage imageWithData:holiday.image];
            cell.imageView.image = image;
        } else {
            cell.imageView.image = nil;
        }
    }
    return cell;
} 
```

最后是我的位置：

```
import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MyLocation : NSObject <MKAnnotation> {
    NSString *_name;
    NSString *_address;
    CLLocationCoordinate2D _coordinate;
}

@property (copy) NSString *name;
@property (copy) NSString *address;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (assign) float distance;

- (id)initWithName:(NSString*)name address:(NSString*)address coordinate:(CLLocationCoordinate2D)coordinate distance:(float)distance;

@end

#import "MyLocation.h"

@implementation MyLocation
@synthesize name = _name;
@synthesize address = _address;
@synthesize coordinate = _coordinate;
@synthesize distance = _distance;

- (id)initWithName:(NSString*)name address:(NSString*)address coordinate:(CLLocationCoordinate2D)coordinate distance:(float)distance{
    if ((self = [super init])) {
        _name = [name copy];
        _address = [address copy];
        _coordinate = coordinate;
        _distance = distance;
    }
    return self;
}

- (NSString *)title {
    if ([_name isKindOfClass:[NSNull class]]) 
        return @"Unknown charge";
    else
        return _name;
}

- (NSString *)subtitle {
    return [NSString stringWithFormat:@"A %0.2f Kms", _distance];
    //return _address;
} 
```

具体问题：

1) 如果我在 mapVC（新数据源）中添加了 cFRAIP（noris & nosit）方法，我需要从 tableVC 中删除它吗？

2）如果我从 tableVC 中删除 cFRAIP 和其他 2 个（noris 和 nosit）方法，它会崩溃，因为没有数据源。所以数据源的 tabbarcontroller 分配似乎不起作用。

3) 最后，如果我必须从 tableVC 中删除 cFRAIP，我将失去 UISearchBar tableview 的能力。还是我错了？

当我运行应用程序时，mapVC 是选定的 vc。工具栏中调用 mapVC 中的 plotStoreLocations 的 UIButton 显示为灰色，直到 Web 获取完成。此时，控制台记录了作为假日实体的 self.farsiman 位置。我可以看到所有实体都登录到控制台。

当我单击绘图按钮时，userLocation 会按照 plotStorePositions 中的指定正确记录，并且每个注释的距离值都是正确的。所以每个 MKAnnotation 的距离计算正确。

当我切换到 tableVC 选项卡时，新的 self.dates 数组会记录在控制台中（因为我目前让 tableVC 进行另一个 CD-db 提取。我为每个引脚位置得到这个：

> 已经在 CFRAIP pinLocations 是 <+15.50288611,-88.02716389> +/- 0.00m（速度 -1.00 mps / course -1.00）@ 1/24/13, 8:20:39 PM 中央标准时间，userLocation 是（空）

从 CFRAIP 调用的 calculateDistanceForLat 调用。单元格细节中的每个距离都是-0.001。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:54:01.467

您肯定需要将 mapVC 设为数据源和委托。如果 UITableViewController 不允许您将其分配给其他东西，您可能需要考虑使用常规 UIViewController 并将 UITableView 放到它上面。如果你将它设置为一个名为 tableview 的属性，tabbarcontroller 中的代码`tableVC.tableView.dataSource = mapVC;`仍然可以工作。

是的，您可以并且应该从您的 tableVC 中删除所有 tableview 委托和数据源代码，如果它正在调用它们，那么它不会调用您想要的 mapVC 中的那些。

它可能给你错误的距离，因为 tableVC 没有用户的位置来测量。将表数据源附加到地图的另一个很好的理由。

# c++ - 模板中 operator++ 上未解析的外部符号

> ID：14514379
> 
> 赞同：3
> 
> 时间：2013-01-25T02:25:14.940
> 
> 标签：c++, templates, operator-overloading

> **可能重复：**
> [为什么在使用模板时会出现“未解析的外部符号”错误？](https://stackoverflow.com/questions/456713/why-do-i-get-unresolved-external-symbol-errors-when-using-templates)

我正在制作一个链接列表。我正在使用外部迭代器。Iterator 类是一个模板，我在 Iterator.h 中实现我的方法。

这是模板：

```
#pragma once

#include "Node.h"

 namespace list_1
 {

template<typename T>
class Iterator
{
public:
    Iterator<T> (Node<T> *np);
    void operator++();
    bool is_item();
    T operator* ();

private:
    Node<T>* n;
};

template<typename T>
Iterator<T>::Iterator (Node<T> *np)
{

}

template<typename T>
void Iterator<T>::operator++()
{

}

template<typename T>
bool Iterator<T>::is_item()
{
    return false;
}

template<typename T>
T Iterator<T>::operator* ()
{

}
 } 
```

当我尝试编译时收到此错误消息：`1>list_test.obj : error LNK2019: unresolved external symbol "public: void __thiscall list_1::Iterator<double>::operator++(void)"`

加上整个项目中的其他七个类似错误。

我在这里做错了吗？还是我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:16:07.903

如果我正确阅读了您的错误消息，您的 Iterator 将`Node<T>`作为输入，但是您正在应用`double`它，这是不适用的。要支持`non-Node<T>`类型，您需要专门化`Iterator<T>`.

```
public: void __thiscall list_1::Iterator<double>::operator++(void)"
                                         ^^^^^ 
```

# base64 - 谁能告诉我这个字符串的编码是什么？它的意思是base64

> ID：14514387
> 
> 赞同：1
> 
> 时间：2013-01-25T02:25:35.290
> 
> 标签：base64

> cpxSR2bnPUihaNxIFFA8Sc + 8gUnWuJxJi8ywSW5ju0npWrFJHW2MSZAeMklcZ71IjrBySF2ci0gdecRI0vD / SM4ZF0m1ZSJJBY8bSZJl / 0intaxIlQJBSPdY3EdBLM9Hp4wLSOK8Nki8L1pIoglxSAvNbkjHg0VIDlv7R6B2Y0elCqVGFWuVRgagAkdxHTdHELxRR9i2VkdyEUlHU84kRzTS2kalKFxG

这是来自我的质谱仪的 XML 文件的字符串。我正在尝试编写一个程序来加载两个这样的文件，从另一个中减去一组值，然后将结果写入一个新文件。根据[.mzML 格式的规范文件，](http://www.psidev.info/mzml_1_0_0)数字数据的编码据称是[base64](http://www.w3.org/TR/xmlschema-2/#base64Binary)。我无法使用许多在线 base64 转换器中的任何一个或使用 NotepaD++ 和 MIME 工具包的 base64 转换器将此数据字符串转换为任何清晰的内容。

在结果文件的上下文中，字符串如下所示：

```
 <binaryDataArray encodedLength="224">
        <cvParam cvRef="MS" accession="MS:1000515" name="intensity array" unitAccession="MS:1000131" unitName="number of counts" unitCvRef="MS"/>
        <cvParam cvRef="MS" accession="MS:1000521" name="32-bit float" />
        <cvParam cvRef="MS" accession="MS:1000576" name="no compression" />
            <binary>cpxSR2bnPUihaNxIFFA8Sc+8gUnWuJxJi8ywSW5ju0npWrFJHW2MSZAeMklcZ71IjrBySF2ci0gdecRI0vD/SM4ZF0m1ZSJJBY8bSZJl/0intaxIlQJBSPdY3EdBLM9Hp4wLSOK8Nki8L1pIoglxSAvNbkjHg0VIDlv7R6B2Y0elCqVGFWuVRgagAkdxHTdHELxRR9i2VkdyEUlHU84kRzTS2kalKFxG</binary> 
```

在我弄清楚这种编码的格式之前，我无法继续！

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T02:30:56.067

您可以使用这个简单的程序将其转换为纯文本：

```
#include <stdio.h>
int main(void)
{
    float f;
    while (fread(&f, 1, 4, stdin) == 4)
        printf("%f\n", f);
} 
```

我将其编译为“floatdecode”并使用了以下命令：

```
echo "cpxSR2bnPUihaNxIFFA8Sc+8gUnWuJxJi8ywSW5ju0npWrFJHW2MSZAeMklcZ71IjrBySF2ci0gdecRI0vD/SM4ZF0m1ZSJJBY8bSZJl/0intaxIlQJBSPdY3EdBLM9Hp4wLSOK8Nki8L1pIoglxSAvNbkjHg0VIDlv7R6B2Y0elCqVGFWuVRgagAkdxHTdHELxRR9i2VkdyEUlHU84kRzTS2kalKFxG" | base64 -d | ./floatdecode 
```

输出是：

```
53916.445312
194461.593750
451397.031250
771329.250000
1062809.875000
1283866.750000
1448337.375000
1535085.750000
1452893.125000
1150371.625000
729577.000000
387898.875000
248514.218750
285922.906250
402376.906250
524166.562500
618908.875000
665179.312500
637168.312500
523052.562500
353709.218750
197642.328125
112817.929688
106072.507812
142898.609375
187123.531250
223422.937500
246822.531250
244532.171875
202255.109375
128694.109375
58230.625000
21125.322266
19125.541016
33440.023438
46877.441406
53692.062500
54966.843750
51473.445312
42190.324219
28009.101562
14090.161133 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:14:44.037

[另一个 Java Base64 解码，如果您需要它，可以选择解压缩](http://iharder.sourceforge.net/current/java/base64/)。
供应商规范指示“32 位浮点数”= IEEE-754 并指定小端。
[Schmidt 的转换器](http://www.h-schmidt.net/FloatConverter/IEEE754.html)显示了 IEEE-754 的位模式。

另一个 Notepad++ 步骤来查看十六进制代码：

> Notepad++ TextFX 插件（在您已经完成 Base64 解码之后）
> 选择文本
> TextFX > TextFX Convert > Convert text to Hex-32

让您查看十六进制代码：

> "000000000 72 9C 52 47 66 E7 3D 48- ... 6E 63 BB 49 |rœRGfç=H¡hÜHP

Little-endian：47529C72 转换（通过施密特），如 David 所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T18:39:06.477

您可以通过**pymzML访问****Python**中的 mzML 文件中的此类数据，pymzML 是 mzML 文件的 python 接口。

 **[http://pymzml.github.com/](http://pymzml.github.com/)**

# ios - Monotouch：强制 UITableView 重新计算每个单元格的高度而不重新加载数据

> ID：14514391
> 
> 赞同：2
> 
> 时间：2013-01-25T02:26:01.317
> 
> 标签：ios, uitableview, xamarin.ios, monotouch.dialog

我有一个使用 OwnerDrawnElement 创建的自定义单元格，其中包含可自动调整大小的 UITextView。当文本更改时，应该有适当的布局重绘和单元格高度重新计算。问题是如何保存打开的键盘。UITableView 中有一个方法 - ReloadRows 实际上以某种方式帮助了我。我不能为我的牢房打电话，因为它是第一响应者，我不能辞职。但是当我为另一个单元格调用它时，我的单元格正在按照我的意愿调整大小，但我有不必要的另一个单元格重绘。所以我想知道调用什么方法来重新布局 UITableView 不重新加载数据？！当您向上和向下滚动时，可能会调用相同的方法，单元格变得可见并且重新计算高度。

我尝试了标准的 SetNeedsDisplay()、SetNeedsLayout()、ReloadInputViews()、LayoutSubviews()，但它没有做同样的事情。也许我需要以不同的方式使用它们。我试图将它们称为单元格和整个 tableview 对象。

我查看了 ReloadRows 方法，发现它调用了一些 API 的东西：

Messaging.void_objc_msgSendSuper_IntPtr_int(base.SuperHandle, UITableView.selReloadRowsAtIndexPathsWithRowAnimation_, nSArray.Handle, (int)withRowAnimation);

因此，什么方法也不会强制 tableview 重新计算每个单元格的高度而不重新加载数据。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-27T11:02:36.163

尝试更新单元格框架，然后调用 UITableView 的空更新块：

```
tableView.BeginUpdates();
tableView.EndUpdates(); 
```

# php - Acquia Drupal 7 - php 上传限制不会改变

> ID：14514394
> 
> 赞同：1
> 
> 时间：2013-01-25T02:26:28.427
> 
> 标签：php, drupal, upload, limit, acquia

我正在使用 Microsoft WebMatrix 中的 acquia-drupal 7（现在只是 localhost）。我无法让我的 php 上传限制从默认的 2MB 增加。用谷歌搜索后，我做了以下事情：

添加到每个现有的 htaccess：

```
php_value upload_max_filesize 10M
php_value post_max_size 10M 
```

在每个具有 htaccess 的目录中创建 php.ini 文件（任何地方都不存在 php.ini 文件），其中包含以下内容：

```
upload_max_filesize = 10M
post_max_size = 10M 
```

重新启动站点（通过 Webmatrix GUI）

在这之后没有任何明显的变化——我的网站仍然有 2MB 的上传限制。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:10:53.717

您的更改没有生效的原因是因为您只是重新创建了一个 php.ini 文件，而不是找到正在使用的文件。

根据定义，由于您刚刚创建它，它不会是您的 php 目录中存在的那个。:-)

但别担心！有一种简单的方法可以找到您的站点正在使用的正确 php.ini 文件：

*   转到您的 drupal 站点上的 /admin/reports/status。在这里，您将看到有关您正在使用的 php 和 apache 版本等信息。
*   该页面上的“PHP”行应包含您正在使用的 php 版本（类似于 5.3.6）和“更多信息”链接
*   单击该链接，您应该能够看到有关计算机上 php 安装的详细信息。
*   在该屏幕上找到名为“配置文件（php.ini）路径”的行并导航到该行以更新它。

就像您已经知道的那样，请确保在进行任何更改后重新启动服务器。:-)

让我们知道这是否能解决您的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T13:33:53.763

您是否曾经遇到过需要上传相对较大的文件但仍希望能够从 Drupal 7 管理界面管理这些文件的问题？如果是这样，您可能会遇到如下情况：

![在此处输入图像描述](../Images/de46b8d62abdd3dd8271eea749b38fcd.png)

您会注意到 12 MB 的文字说明我们只能上传 12 MB 及以下的文件。在这种情况下，我需要这个数字更大一点。

为此，您需要修改 php.ini 文件中的 PHP 设置。

注意：您应该确保您知道自己在做什么，并了解增加此数字的后果。就我而言，这是在一个只有我信任的用户才会上传文件的网站上。如果您允许任何用户上传文件，增加此数量会增加服务器的负载，并可能很快耗尽您的磁盘空间。

既然您已被警告，这就是我能够做到这一点的方法。我首先在我的系统上找到了 php.ini 文件。我在一个 Ubuntu 服务器上，所以我可以像这样使用 vim 来编辑我的：

vim /etc/php5/apache2/php.ini

**更改 upload_max_filesize 设置**

第一步是找到从 12MB 到 30MB 的 upload_max_filesize 设置。

改变：

![在此处输入图像描述](../Images/d65a2424cdace63ce84608432d03cd88.png)

到：

![在此处输入图像描述](../Images/20e87b2359f4c28f4f574c6250ff78e7.png)

**更改 post_max_size 设置**

您可能还需要修改 post_max_size 设置。我将 post_max_size php.ini 设置从 20MB 更改为 30MB。

改变：

![在此处输入图像描述](../Images/5659e9b166859afe877868e61c821684.png)

到：

![在此处输入图像描述](../Images/5d0f3574740213bd2a8053111f152c83.png)

**重启阿帕奇**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T02:43:52.000

您应该检查`phpinfo`以确保您编辑的 php.ini 是正确的。

# computer-science - 如何在处理器中找到每个周期的指令？

> ID：14514396
> 
> 赞同：0
> 
> 时间：2013-01-25T02:26:56.230
> 
> 标签：computer-science, computer-architecture

所以我正在做一个问题，它要求找到几个处理器的 IPC。我理解这个公式，但是它给了我：“20.00E+09”作为指令的数量，有人可以向我解释一下这是什么意思吗？是：20,000,000,000？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:29:30.720

是的。E+09 是 20.00 x 10^9 的填充

# magento - Magento - 在登录页面上显示错误/通知

> ID：14514403
> 
> 赞同：0
> 
> 时间：2013-01-25T02:27:46.987
> 
> 标签：magento, magento-1.7

我正在编写一个模块来拒绝管理员用户访问，除非来自特定 IP。我正在连接管理员成功登录事件，根据一组 IP 检查他们的 IP，如果管理员用户的 IP 不在列表中，我将它们注销，并将它们重定向回管理员登录页面。

我的问题是……

如何在登录页面上设置类似于“密码错误”的消息？

非常感谢任何片段或想法！

谢谢！

杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:30:32.037

您可以尝试抛出这样的异常：

```
Mage::throwException(Mage::helper('adminhtml')->__('You are not authorized.')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:52:36.487

Magento 代码执行以下操作以在无效登录尝试后显示“无效的用户名或密码”消息。我也会这样做，然后重定向回登录页面。

```
$message = "Whatever you want the user to see.";
Mage::getSingleton('adminhtml/session')->addError($messages); 
```

# html - 使每个 div 元素适合浏览器窗口

> ID：14514405
> 
> 赞同：0
> 
> 时间：2013-01-25T02:27:54.870
> 
> 标签：html, css, responsive-design

我需要设计一个网页，其中每个 div 元素都适合浏览器窗口。这是我现在拥有的：http: [//jsfiddle.net/E9HER/](http://jsfiddle.net/E9HER/)

我需要做的是让每个红色边框的容器垂直适合浏览器窗口（对于大于 500 像素的高度）。

```
<div class="contentcontainer">
    <div class="WhoWeAre"><a name="WhoWeAre">Who we are</a></div>
    <div class="WhatWeDo"><a name="WhatWeDo">What we do</a></div>
    <div class="OurWork"><a name="OurWork">Our work</a></div>
    <div class="Contact"><a name="Contact">Contact</a></div>
</div> 
```

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:16:20.630

你可以设置

```
 .wrapper {min-height:500px;
     height:100%;}

   .contentcontainer {
   height:85%;
   min-height:500px} 
```

将 contentcontainer 属性也应用于包含的 div...

您将不得不使用 % 来达到适当的高度。

这会将 div 缩放到浏览器窗口，但会将其设置为 500px 以用于低于该窗口的窗口...

# firefox - 升级到 Firefox 18 后，带有 Python 的 Selenium webdriver 崩溃

> ID：14514409
> 
> 赞同：2
> 
> 时间：2013-01-25T02:28:37.303
> 
> 标签：firefox, selenium, python-2.7, selenium-webdriver

这是我在尝试运行时收到的消息： Traceback（最近一次通话最后一次）：

```
 File "C:\Python27\intertwyneloginandemail", line 3, in <module>
 driver = webdriver.Firefox()
 File "C:\Python27\lib\site-packages\selenium\webdriver\firefox\webdriver.py", line 51, in __init__
 self.binary, timeout),
 File "C:\Python27\lib\site-packages\selenium\webdriver\firefox\extension_connection.py", line 47, in __init__
 self.binary.launch_browser(self.profile)
 File "C:\Python27\lib\site-packages\selenium\webdriver\firefox\firefox_binary.py", line 44, in launch_browser
 self._wait_until_connectable()
 File "C:\Python27\lib\site-packages\selenium\webdriver\firefox\firefox_binary.py", line 86, in _wait_until_connectable
 self.profile.path, self._get_firefox_output()))

 WebDriverException: Message: "Can't load the profile. Profile Dir:   
 c:\\users\\aarons\\appdata\\local\\temp\\tmphqwoq5 Firefox output: *** LOG addons.xpi: startup\r\n*** WARN addons.xpi: Ignoring missing add-on in C:\\Program Files (x86)\\Common  
 Files\\McAfee\\SystemCore\r\n*** LOG addons.xpi: Skipping unavailable install location app-system-local\r\n*** LOG addons.xpi: Skipping unavailable install location app-system-share\r\n***
 LOG addons.xpi: checkForChanges\r\n*** LOG addons.xpi: No changes found\r\n" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T06:02:39.377

尝试将 selenium 包更新到最新版本（2.29.0）

# javascript - 通过 Meteor 中的拖动事件防止默认

> ID：14514411
> 
> 赞同：10
> 
> 时间：2013-01-25T02:29:00.297
> 
> 标签：javascript, meteor

我正在尝试在我的 Meteor 应用程序中实现基本的拖放功能。我希望用户能够将文件（从他们的文件系统）拖放到指定的 dom 元素中，并在`dataTransfer`对象中检索该文件。不幸的是，我似乎无法阻止该事件在 drop 事件上重新加载整个页面。这是我的基本事件处理程序：

```
Template.sideBar.events({

 'drop #features' : function(e, t) {

   e.preventDefault();

   var fileList = e.dataTransfer.files;
   console.log(fileList[0]); 

   return false; 
 }

}); 
```

我已经用 Chrome 和 Firefox 对此进行了测试。我错过了什么吗？有没有人成功实施这个？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-25T03:02:31.763

好吧，那很愚蠢。我想我想通了。除了事件之外，`preventDefault()`您还需要调用事件。这是我的工作代码：`dragover``drop`

```
Template.sideBar.events({

  'dragover #features' : function(e, t) {
    e.preventDefault(); 
    $(e.currentTarget).addClass('dragover');
  },

  'dragleave #features' : function(e, t) {
    $(e.currentTarget).removeClass('dragover');
  },

  'drop #features' : function(e, t) {
    e.preventDefault();
    console.log('drop!');
  }

}); 
```

不知道为什么会这样，但确实如此（至少在 Chrome 中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-24T01:49:57.823

更新到meteor@1.4.1，您还需要调用dataTransfer.getData() 方法来获取丢弃的文件数据（如果您使用拖放来上传文件）

```
'drop #features' : function(e, t) {
    e.preventDefault();
    console.log('drop!');

    e.originalEvent.dataTransfer.getData("text");
    //without the previous line you won't be able to get dropped file data;
    console.log('File name: ' + e.originalEvent.dataTransfer.files[0].name);
} 
```

# c++ - 整数输入仅限于四位数

> ID：14514412
> 
> 赞同：6
> 
> 时间：2013-01-25T02:29:06.690
> 
> 标签：c++, input

我正在做一个问题，它要求输入一个仅由四位数字组成的帐号。这必须通过基本的初学者 C++ 来完成。

我需要想办法将整数的输入限制为四位数。用户应该能够输入 0043 或 9023 或 0001 并且它应该是可接受的值....

我想我知道如何用字符串完成它.... getline(cin,input) 然后检查 input.length()==4？

但我不知道如何使用整数输入来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:35:10.613

请注意，如果`0043`旨在与 不同`43`，则输入实际上*不是*数字，而是数字字符串，就像电话“号码”一样。

将该行作为字符串读取`input`。

检查 的长度是否`input`为`4`。

检查字符串中的每个字符是否为`<= '9'`and `>= '0'`。

就像是：

```
std::string read4DigitStringFromConsole()
{
    bool ok = false;
    std::string result;
    while (!ok)
    {
        std::cin >> result;
        if (result.length() == 4)
        {
            bool allDigits = true;
            for(unsigned index = 0; index < 4; ++index)
            {
                allDigits = allDigits && ( 
                    (result[index] >= '0') && 
                    (result[index] <='9') 
                    );
            }
            ok = allDigits;
        }
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:36:46.680

我喜欢您使用 a`string`作为输入的想法。这是有道理的，因为帐户“号码”只是一个标识符。您不会在计算中使用它。我认为您正在尝试`if (sizeof(input)==4)`检查. `string`正确的方法是`if (input.length() == 4)`. 这将检查用户是否输入了 4 个**字符**。现在您需要确保每个字符也是一个数字。您可以利用数字字符的 ASCII 代码按您期望的顺序排列这一事实轻松做到这一点。因此`if (input[i] >= '0' && input[i] <= '9')`，将为 index 使用适当的 for 循环来解决问题`i`。此外，您可能需要某种循环来继续要求输入，直到用户输入被认为正确的内容。

**编辑：**

作为检查每个字符是否为数字的替代方法，您可以尝试将字符串转换为`int`with `int value = atoi(input.c_str());`。然后您可以轻松检查 是否`int`是四位或更少的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T02:36:53.567

像这样的东西应该工作。一旦用户输入了正好四个字符的内容，您就可以对其进行验证。其余的逻辑由你决定。

```
#include <iostream>
#include <string>

int main() {
    std::cout << "Enter a PIN Number: ";
    std::string pinStr;
    while(std::getline(std::cin,pinStr) && pinStr.size() != 4) {
        std::cout << "Please enter a valid value\n";
    }
} 
```

如果您想以整数形式存储它，将整数保存在 an 中`std::vector`可能是有益的。你可以很容易地做到这一点（循环展开是为了清楚起见）：

```
#include <iostream>
#include <string>
#include <vector>

int main() {
    std::cout << "Enter a PIN Number: ";
    std::string pinStr;
    while(std::getline(std::cin,pinStr) && pinStr.size() != 4 ) {
        std::cout << "Please enter a valid value\n";
    }
    std::vector<int> pin;
    pin[0] = pinStr[0] - '0';
    pin[1] = pinStr[1] - '0';
    pin[2] = pinStr[2] - '0';
    pin[3] = pinStr[3] - '0';

    //pin now holds the integer value.
    for(auto& i : pin)
        std::cout << i << ' ';
} 
```

你可以看到它在[这里运行](http://liveworkspace.org/code/SRs9q%240)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T02:40:03.710

```
// generic solution
int numDigits(int number)
{
    int digits = 0;
    if (number < 0) digits = 1; // remove this line if '-' counts as a digit
    while (number) {
        number /= 10;
        digits++;
    }
    return digits;
} 
```

类似于这篇[文章](https://stackoverflow.com/questions/1489830/efficient-way-to-determine-number-of-digits-in-an-integer)。然后您可以调用此函数来检查输入是否为 4 位。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T02:43:17.973

您可能希望您的代码能够响应用户输入，因此我建议一次获取每个字符而不是读取字符串：

```
std::string fourDigits;
char currentDigit;

std::cout << "Enter 4 digits\n";
for(int i = 0; i < 4; ++i)
{
    currentDigit = getch();
    if(isdigit(currentDigit))
    {
        fourDigits += currentDigit;
        std::cout << currentDigit; // getch won't display the input, if it was a PIN you could simply std::cout << "*";
    }
    else
    {
            // Here we reset the whole thing and let the user know he entered an invalid value
        i = 0;
        fourDigits = "";
        std::cout << "Please enter only numeric values, enter 4 digits\n";
    }
}

std::cout << "\nThe four digits: " << fourDigits.c_str(); 
```

这样您就可以立即优雅地处理无效字符。使用字符串时，只有在用户点击 时才会验证输入`Enter`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T06:12:50.763

所以我正在研究如何使用整数类型来获取输入，并查看了 char ......因为它在技术上是最小的整数类型，它可以用来获取代码......我能够想出这个，但它肯定还没有完善（我不确定是否可以）：

```
int main() {
    int count=0;

    while(!(count==4)){
        char digit;
        cin.get(digit);
        count++;
    }

    return 0;
} 
```

因此，循环继续进行，直到收集到 4 个字符。嗯，理论上应该。但它不起作用。它会停在 2 位数、5 位数等......我认为这可能是 cin.get() 抓取空白的性质，不确定。

# git - git 无法压缩提交

> ID：14514414
> 
> 赞同：10
> 
> 时间：2013-01-25T02:29:13.763
> 
> 标签：git, rebase

我无法使用 squash 提交`git rebase -i command`，收到以下错误消息。

```
error: could not apply 3ad5c7b... 

When you have resolved this problem run "git rebase --continue".
If you would prefer to skip this patch, instead run "git rebase --skip".
To check out the original branch and stop rebasing run "git rebase --abort". 
```

错误是什么以及如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T12:58:09.573

Git 无法自动合并。尝试`git mergetool`解决冲突，然后继续你的变基`git rebase --continue`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:25:04.857

可能您以前使用过 a`git rebase`并没有完成它。要验证它，请键入`__git_ps1`并验证是否出现 rebase 一词。要解决此问题，您需要中止先前的变基`git rebase --abort`并应用所需的变基。

# bison - 运算符分组为非终端时的 Bison shift-reduce 冲突

> ID：14514424
> 
> 赞同：0
> 
> 时间：2013-01-25T02:30:43.810
> 
> 标签：bison, yacc

假设我的语法中有以下规则。

```
expr: expr op expr
    | NUMBER

op: '+' | '-' | '*' | '/' 
```

我完成了以下声明

```
%token NUMBER

%left '+' '-'
%right '*' '/' 
```

这会导致 4 个班次减少冲突

```
State 12

    4 expr: expr . op expr
    4     | expr op expr .

    '+'  shift, and go to state 6
    '-'  shift, and go to state 7
    '*'  shift, and go to state 8
    '/'  shift, and go to state 9

    '+'       [reduce using rule 4 (expr)]
    '-'       [reduce using rule 4 (expr)]
    '*'       [reduce using rule 4 (expr)]
    '/'       [reduce using rule 4 (expr)]
    $default  reduce using rule 4 (expr)

    op   go to state 11 
```

但是，如果我将语法重写为

```
expr: expr '+' expr
    | expr '-' expr
    | expr '*' expr
    | expr '/' expr
    | NUMBER 
```

优先规则生效，冲突得到解决。我相信冲突的出现是因为当野牛遇到一个 时`op`，它不会跟踪`op`转移到堆栈中的前一个。有没有办法可以将所有操作员分组并仍然解决冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:45:42.110

显然，这里已经回答了[1](https://stackoverflow.com/questions/1410875/yacc-bison-minimize-amount-by-grouping-math-ops)。

通过对运算符进行分组，会丢失优先级信息。

# android - 如何在 Android WebView 中点击链接时操作 URL

> ID：14514425
> 
> 赞同：2
> 
> 时间：2013-01-25T02:30:48.797
> 
> 标签：android, hyperlink, android-webview

`WebView`我通过 HTTP GET将网站拉到了一个网站。问题是该网站未针对移动设备进行格式化。我发现，如果我编辑 HTML，我可以注释掉构成站点左窗格的脚本。

方法：将页面下载到字符串，搜索字符串并将第一个子字符串替换`<link`为`<!--`，写入文件，然后加载到`WebView`.

在涉及链接之前，这非常有效。单击它会导致`WebView`尝试加载`file:///index.php/Whatever_the_page_was`.

我想要做的是捕获该链接请求并将`file:///`部分更改为`www.wurmpedia.com`，然后通过我的解析器运行它以删除第一个脚本，并在随后的任何其他链接单击上重复该过程。

我找不到任何其他方法来解决这个问题，这就是我编造的。任何帮助都将不胜感激，无论是通过 URL 修改还是使用更有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:28:40.990

如何使用拦截链接请求

[WebView.shouldInterceptRequest](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldInterceptRequest%28android.webkit.WebView,%20java.lang.String%29)

# java - 如何将文件读入文件采用不同字符编码的 UTF-8 Java 应用程序？

> ID：14514428
> 
> 赞同：0
> 
> 时间：2013-01-25T02:31:04.017
> 
> 标签：java, unicode, utf-8

我的应用程序设置为支持存储 UTF-8 字符编码。我正在阅读从其他各种组织获得的文件，这些文件可能采用 UTF-8、latin-1、ASCII 等格式。我需要做任何特别的事情来确保将具有各种字符编码的文件读入 UTF-8格式正确吗？例如，我是否需要弄清楚文件的字符编码是什么，并将其显式转换为 UTF-8？

还是以下就足够了？

`Reader reader = new InputStreamReader(new FileInputStream("c:/file.txt"), "UTF-8");`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T02:39:16.080

你错了。您没有读*入*编码，而是*从*编码中读取。您作为第二个参数提供的编码`InputStreamReader`应该是*源流（文件）的预期编码*。

```
Reader reader = new InputStreamReader(new FileInputStream("c:/file.txt"), "<encoding_of_file.txt>"); 
```

一旦数据在内存中，它总是 UTF-16。当您要写入数据时（假设您总是希望将其写入为 UTF-8），那么您将使用：

```
Writer writer = new OutputStreamWriter(new FileOutputStream("destfile"), "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:19:52.930

你需要告诉读者**文件的编码**。

如果您的输入可以采用多种不同的编码，那么您可能会遇到问题：您无法可靠地检测到编码，请参阅[如何检测文本文件的编码/代码页](https://stackoverflow.com/questions/90838/how-can-i-detect-the-encoding-codepage-of-a-text-file)

当你想支持不同的编码时，你基本上有三种选择：

*   将有关编码的信息存储在某处，例如`<?xml version="1.0" encoding="UTF-8" ?>`XML 文件中。不幸的是，并非所有文件格式（例如“纯文本”文件）都具有此类元数据。
*   “检测”/猜测具有各种启发式的编码。这有时可能会出错。
*   询问用户。这是糟糕的用户体验，因为大多数用户完全不知道编码**是**什么。

# javascript - JavaScript：将值分配给不可枚举的属性会将其更改为可枚举？

> ID：14514431
> 
> 赞同：3
> 
> 时间：2013-01-25T02:31:17.890
> 
> 标签：javascript, enumerable, assign, defineproperty

我想我在这里误解了一些东西。我有一个对象，其中包含我希望不可枚举的属性。我希望能够从对象的函数本身中为其分配值，但是当我这样做时，该属性变得可枚举。

例子：

```
function ObjectNode() {
}

Object.defineProperty(ObjectNode.prototype, "parent", {
    value:null
    // enumerable and configurable default to false
}

// Pass an ObjectNode instance and set this object node as its parent
ObjectNode.prototype.addChild = function(node) {
    node.parent = this;    // <-- node.parent is now enumerable
    ...more code...
}; 
```

实际发生的是，为 node.parent 分配一个值会创建一个名为 parent 的新“自己的”属性，它会覆盖原始属性。

有没有一种方法可以在不这样做的情况下在内部为不可枚举的属性赋值？还是我必须求助于在闭包中引用变量的 getter/setter 属性？

**编辑：**

**GGG**的回答值得称赞，因为正是他的建议让我得到了最终的答案。

我想要做的基本上是从“for(key in object)”语句中隐藏一个简单的属性。我能够这样做：

```
function ObjectNode() {
    Object.defineProperty(this, "parent", {
        value:null, 
        writable:true
    });
} 
```

我一开始对此犹豫不决的一个原因是错误地理解我不希望每个实例都重新创建该属性。但是，呃，这就是实例属性！！！！

谢谢，GGG，帮助我重新调整我的大脑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:08:19.710

您已经创建了原型属性的一个不可配置的属性，但它仍然可以被构造函数创建的对象的属性所遮蔽。

```
function ObjectNode() {
}

Object.defineProperty(ObjectNode.prototype, "parent", {
    value: null,
    configurable: false
})

ObjectNode.prototype.addChild = function (node) {
    node.parent = this;    // <-- node.parent is now enumerable
}

var mom = new ObjectNode();
var kid = new ObjectNode();

mom.addChild(kid);

console.log(kid.parent == mom);  // works, logs true

kid.parent = "foo";

console.log(kid.parent);  // works, logs "foo"

ObjectNode.prototype.parent = "foo"; 

console.log(ObjectNode.prototype.parent); // fails, logs null 
```

要记住的是，对象的属性只是该对象的属性，而不是原型链中具有该对象的其他对象的属性。相反，请尝试在构造函数中创建新对象的不可配置属性：

```
function ObjectNode() {
    Object.defineProperty(this, "parent", {
        value: null,
        configurable: false
    })
} 
```

当然，这将阻止您的`addChild`函数工作，因为该属性不再是可配置的。您可以考虑在该函数中定义属性，但在使用`addChild`.

总而言之，一般来说，你最好的选择是不要担心如果它不是绝对关键（而且我不确定它会在什么情况下）使事情变得不可配置。很长一段时间以来，如果没有该功能，世界就相处得很好。;)

# html - 表格中的列在应用程序中未对齐

> ID：14514432
> 
> 赞同：0
> 
> 时间：2013-01-25T02:31:21.167
> 
> 标签：html, css

我无法将表格中的列与其表格标题对齐，奇怪的是在 Jsfiddle 中对齐没有问题：http: [//jsfiddle.net/m4HB3/68/](http://jsfiddle.net/m4HB3/68/)

但是在我的应用程序中使用完全相同的代码，它没有正确地将列与它们的标题对齐：[应用程序](http://helios.hud.ac.uk/u0867587/Mobile_app/Text32.php)

我的问题是我需要在应用程序中包含什么才能解决应用程序中的对齐问题？

下面是代码：

**HTML：**

```
<table id="tableqanda" cellpadding="0" cellspacing="0">
    <thead>
    <tr>
        <th width="5%" class="questionno">Question No</th>
        <th width="23%" class="question">Question</th>
        <th width="7%" class="option">Option Type</th>
        <th width="6%" class="noofanswers">Number of Answers</th>
        <th width="7%" class="answer">Answer</th>
        <th width="6%" class="noofreplies">Number of Replies</th>
        <th width="6%" class="noofmarks">Number of Marks</th>
        <th width="11%" class="image">Image</th>
        <th width="11%" class="video">Video</th>
        <th width="11%" class="audio">Audio</th>
    </tr>
    </thead>
    </table>
    <div id="tableqanda_onthefly_container">
    <table id="tableqanda_onthefly" cellpadding="0" cellspacing="0">
    <tbody>
        <tr class="tableqandarow">
        <td width="5%" class="questionno">Question No.</td>
        <td width="23%" class="question">Question</td>
        <td width="7%" class="option">Option</td>
        <td width="6%" class="noofanswers">Number of Answers</td>
        <td width="7%" class="answer">Answer</td>
        <td width="6%" class="noofreplies">Number of Replies</td>
        <td width="6%" class="noofmarks">Number of Marks</td>
            <td width="11%" class="image"><ul><li>Image</li></ul></td>
        <td width="11%" class="video"><ul><li>Video</li></ul></td>
        <td width="11%" class="audio"><ul><li>Audio</li></ul></td>
</tr>
    </tbody>
    </table>
    </div> 
```

**CSS：**

```
#tableqanda_onthefly_container
{
    max-height: 25px;
    width: 100%;
    overflow-y: scroll;
}

#tableqanda_onthefly
{
    width:100%;
    clear:both;
    table-layout: fixed;
}

#tableqanda_onthefly td
{
    border:1px black solid;
    border-collapse:collapse;
}

#tableqanda, #tableqanda_onthefly{
    border:1px black solid;
    border-collapse:collapse;
    word-wrap:break-word;
}       

#tableqanda{
    width:97%;
    margin-left:0;
    table-layout: fixed;
    float:left;
}

#tableqanda td { 
    vertical-align: middle;
    border:1px black solid;
    border-collapse:collapse;
}

#tableqanda th{
    border:1px black solid;
    border-collapse:collapse;
    text-align:center;
}

.tableqandarow{
    border:1px black solid;
    border-collapse:collapse;
}

.imagetd{
    font-size:75%;  
}

.audiotd{
    font-size:75%;  
}

.videotd{
    font-size:75%;  
}

.qandaul{
    list-style-type:square;
}

ul, ul li { margin: 0; padding: 0; }
ul { margin-left: 1.3em; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T02:34:29.700

您的列宽加起来不是 100%；如果你把它留给浏览器来解决这个问题，你就不能确定对齐是否与你脑海中的一致。

将宽度更改为 100%，你应该没问题。

# java - 如何在左侧的游戏面板中以随机顺序显示像拼图一样的裁剪图像并让用户解决拼图？

> ID：14514433
> 
> 赞同：-1
> 
> 时间：2013-01-25T02:31:49.457
> 
> 标签：java, image, swing, jbutton

我正在尝试构建一个益智游戏，但我似乎无法将图像裁剪成相等的部分，而且我不知道如何创建一个动作监听器，它将特定按钮转移到右下角最区域的空闲空间照片拼图面板

谢谢！

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import javax.swing.JLabel;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.CropImageFilter;
import java.awt.image.FilteredImageSource;

import javax.swing.Box;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class midterm extends JFrame
{
    JPanel mainpanel;
    JPanel gamepanel;
    JPanel controls;

    JButton image1=new JButton();
    JButton image2=new JButton();
    JButton image3=new JButton();
    JButton image4=new JButton();
    JButton image5=new JButton();
    JButton image6=new JButton();
    JButton image7=new JButton();
    JButton image8=new JButton();
    JButton image9=new JButton();   

    JButton j1=new JButton();

    ExitButtonListener end=new ExitButtonListener();

    JLabel text=new JLabel("Please select a photo.");
    JLabel piclabel;

    public midterm()
    {
        super("Girls' Generation - I GOT A BOY 4th Korean Album");
        setSize(700,700);
        setLocation(200,30);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);
        setResizable(false);

        panel();
        this.getContentPane().add(mainpanel);
        this.pack();
        setVisible(true);   
    }

    public static void main(String[] args)
    {
        midterm frame=new midterm();
    }

    void panel()
    {
        mainpanel=new JPanel();
        mainpanel.setLayout(new BorderLayout());

        gamepanel=new JPanel();
        gamepanel.setBorder(BorderFactory.createTitledBorder("Photo Puzzle"));
        gamepanel.setLayout(new GridLayout(3,3));

        ImageIcon sica = new ImageIcon("jung.jpg");
        image1.setBorder(BorderFactory.createLineBorder(Color.blue));
        image1.setIcon(sica);
        image1.setSize(200,200);
        image1.setVisible(true);
        image1.setToolTipText("Jessica Jung Sooyeon");
        gamepanel.add((image1));

        ImageIcon yuri = new ImageIcon("kwon.jpg");
        image2.setIcon(yuri);
        image2.setSize(200,200);
        image2.setVisible(true);
        image2.setToolTipText("Kwon Yuri");
        gamepanel.add(image2);

        ImageIcon tiff = new ImageIcon("hwang.jpg");
        image3.setIcon(tiff);
        image3.setSize(200,200);
        image3.setVisible(true);
        image3.setToolTipText("Tiffany Hwang Miyoung");
        gamepanel.add(image3);

        ImageIcon sunny = new ImageIcon("lee.jpg");
        image4.setIcon(sunny);
        image4.setSize(200,200);
        image4.setVisible(true);
        image4.setToolTipText("Sunny Lee Sunkyu");      
        gamepanel.add(image4);

        ImageIcon soo = new ImageIcon("choi.jpg");
        image5.setIcon(soo);
        image5.setSize(200,200);
        image5.setVisible(true);
        image5.setToolTipText("Choi Sooyoung");
        gamepanel.add(image5);

        ImageIcon hyo = new ImageIcon("kimh.jpg");
        image6.setIcon(hyo);
        image6.setSize(200,200);
        image6.setVisible(true);
        image6.setToolTipText("Kim Hyoyeon");
        gamepanel.add(image6);

        ImageIcon yoona = new ImageIcon("im.jpg");
        image7.setIcon(yoona);
        image7.setSize(200,200);
        image7.setVisible(true);
        image7.setToolTipText("Im Yoona");      
        gamepanel.add(image7);

        ImageIcon taeng = new ImageIcon("kimt.jpg");
        image8.setIcon(taeng);
        image8.setSize(200,200);
        image8.setVisible(true);
        image8.setToolTipText("Kim Taeyeon");
        gamepanel.add(image8);

        ImageIcon hyunnie = new ImageIcon("seo.jpg");
        image9.setIcon(hyunnie);
        image9.setSize(200,200);
        image9.setVisible(true);
        image9.setToolTipText("Seohyun Seo Juhyun");
        gamepanel.add(image9);

        controls = new JPanel();
        controls.setLayout(new BorderLayout());
        controls.setBorder(BorderFactory.createTitledBorder("Control"));

        JButton newGame = new JButton("New Game");
        newGame.addActionListener(new NewButtonListener());
        controls.add(newGame, BorderLayout.NORTH);

        JButton exitGame = new JButton("Exit");
        exitGame.addActionListener(end);
        controls.add(exitGame, BorderLayout.SOUTH);

        //controls.add(text, BorderLayout.SOUTH);

        mainpanel.add(gamepanel, BorderLayout.CENTER);
        mainpanel.add(controls, BorderLayout.EAST);

        mainpanel.setVisible(true);

        process jj = new process(); 

        image1.addActionListener(jj);
        image2.addActionListener(jj);
        image3.addActionListener(jj);
        image4.addActionListener(jj);
        image5.addActionListener(jj);
        image6.addActionListener(jj);
        image7.addActionListener(jj);
        image8.addActionListener(jj);
        image9.addActionListener(jj);

    }

    class process implements ActionListener
    {
        public void actionPerformed (ActionEvent e)
        {
            if(e.getSource().equals(image1))
            {
                image1.setVisible(false);
                image2.setVisible(false);
                image3.setVisible(false);
                image4.setVisible(false);
                image5.setVisible(false);
                image6.setVisible(false);
                image7.setVisible(false);
                image8.setVisible(false);
                image9.setVisible(false);
                text.setVisible(false);

                ImageIcon pic=new ImageIcon("jung.jpg");
                piclabel=new JLabel();
                piclabel.setIcon(pic);
                piclabel.setToolTipText("Your guide! This is Jessica Jung");
                controls.add(piclabel, BorderLayout.CENTER);

            }

            else if(e.getSource().equals(image2))
            {
                image1.setVisible(false);
                image2.setVisible(false);
                image3.setVisible(false);
                image4.setVisible(false);
                image5.setVisible(false);
                image6.setVisible(false);
                image7.setVisible(false);
                image8.setVisible(false);
                image9.setVisible(false);
                text.setVisible(false);

                ImageIcon pic=new ImageIcon("kwon.jpg");
                piclabel=new JLabel();
                piclabel.setIcon(pic);
                piclabel.setToolTipText("Your guide! This is Yuri Kwon");
                controls.add(piclabel, BorderLayout.CENTER);

            }

            else if(e.getSource().equals(image3))
            {
                image1.setVisible(false);
                image2.setVisible(false);
                image3.setVisible(false);
                image4.setVisible(false);
                image5.setVisible(false);
                image6.setVisible(false);
                image7.setVisible(false);
                image8.setVisible(false);
                image9.setVisible(false);
                text.setVisible(false);

                ImageIcon pic=new ImageIcon("hwang.jpg");
                piclabel=new JLabel();
                piclabel.setIcon(pic);
                piclabel.setToolTipText("Your guide! This is Tiffany Hwang");
                controls.add(piclabel, BorderLayout.CENTER);

            }

            else if(e.getSource().equals(image4))
            {
                image1.setVisible(false);
                image2.setVisible(false);
                image3.setVisible(false);
                image4.setVisible(false);
                image5.setVisible(false);
                image6.setVisible(false);
                image7.setVisible(false);
                image8.setVisible(false);
                image9.setVisible(false);
                text.setVisible(false);

                ImageIcon pic=new ImageIcon("lee.jpg");
                piclabel=new JLabel();
                piclabel.setIcon(pic);
                piclabel.setToolTipText("Your guide! This is Sunny Lee");
                controls.add(piclabel, BorderLayout.CENTER);

            }

            else if(e.getSource().equals(image5))
            {
                image1.setVisible(false);
                image2.setVisible(false);
                image3.setVisible(false);
                image4.setVisible(false);
                image5.setVisible(false);
                image6.setVisible(false);
                image7.setVisible(false);
                image8.setVisible(false);
                image9.setVisible(false);
                text.setVisible(false);

                ImageIcon pic=new ImageIcon("choi.jpg");
                piclabel=new JLabel();
                piclabel.setIcon(pic);
                piclabel.setToolTipText("Your guide! This is Sooyoung Choi");
                controls.add(piclabel, BorderLayout.CENTER);

            }

            else if(e.getSource().equals(image6))
            {
                image1.setVisible(false);
                image2.setVisible(false);
                image3.setVisible(false);
                image4.setVisible(false);
                image5.setVisible(false);
                image6.setVisible(false);
                image7.setVisible(false);
                image8.setVisible(false);
                image9.setVisible(false);
                text.setVisible(false);

                ImageIcon pic=new ImageIcon("kimh.jpg");
                piclabel=new JLabel();
                piclabel.setIcon(pic);
                piclabel.setToolTipText("Your guide! This is Hyoyeon Kim");
                controls.add(piclabel, BorderLayout.CENTER);

            }

            else if(e.getSource().equals(image7))
            {
                image1.setVisible(false);
                image2.setVisible(false);
                image3.setVisible(false);
                image4.setVisible(false);
                image5.setVisible(false);
                image6.setVisible(false);
                image7.setVisible(false);
                image8.setVisible(false);
                image9.setVisible(false);
                text.setVisible(false);

                ImageIcon pic=new ImageIcon("im.jpg");
                piclabel=new JLabel();
                piclabel.setIcon(pic);
                piclabel.setToolTipText("Your guide! This is Yoona Im");
                controls.add(piclabel, BorderLayout.CENTER);

            }

            else if(e.getSource().equals(image8))
            {
                image1.setVisible(false);
                image2.setVisible(false);
                image3.setVisible(false);
                image4.setVisible(false);
                image5.setVisible(false);
                image6.setVisible(false);
                image7.setVisible(false);
                image8.setVisible(false);
                image9.setVisible(false);
                text.setVisible(false);

                ImageIcon pic=new ImageIcon("kimt.jpg");
                piclabel=new JLabel();
                piclabel.setIcon(pic);
                piclabel.setToolTipText("Your guide! This is Taeyeon Kim");
                controls.add(piclabel, BorderLayout.CENTER);

            }

            else if(e.getSource().equals(image9))
            {
                image1.setVisible(false);
                image2.setVisible(false);
                image3.setVisible(false);
                image4.setVisible(false);
                image5.setVisible(false);
                image6.setVisible(false);
                image7.setVisible(false);
                image8.setVisible(false);
                image9.setVisible(false);
                text.setVisible(false);

                ImageIcon pic=new ImageIcon("seo.jpg");
                piclabel=new JLabel();
                piclabel.setIcon(pic);
                piclabel.setToolTipText("Your guide! This is Juhyun Seo");
                controls.add(piclabel, BorderLayout.CENTER);

            }           
        }

    }

    class ExitButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent event)
        {
            System.exit(0);
        }
    }

    class NewButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent event)
        {
                image1.setVisible(true);
                image2.setVisible(true);
                image3.setVisible(true);
                image4.setVisible(true);
                image5.setVisible(true);
                image6.setVisible(true);
                image7.setVisible(true);
                image8.setVisible(true);
                image9.setVisible(true);
                piclabel.setVisible(false);
                j1.setVisible(false);

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:54:38.763

> 这会将特定按钮转移到照片拼图面板右下角的可用空间

您的`controls`面板正在使用 a `BorderLayout`，但您已经在使用`NORTH`and`SOUTH`位置。

我会尝试使用 a`GridLayout`或 a `GridBagLayout`。`GridBagLayout`可以配置为保持按钮的首选大小...

另一个问题是你让你的框架变得不可修复，使得新按钮很难变得可见（或者至少我这样做了，因为我没有使用任何图像；））。我个人不能忍受不可调整大小的窗户，但那是我;）

如果您可以控制图像的大小，您可以简单地创建一个空白/透明图像并将其设置为默认图标`picLabel`，并在启动时添加到`controls`面板中。然后您需要做的就是根据需要更改标签的图标。

# objective-c - 从大型 JSON 加载核心数据导致应用程序崩溃

> ID：14514434
> 
> 赞同：1
> 
> 时间：2013-01-25T02:32:16.320
> 
> 标签：objective-c, ios5, core-data

我正在尝试从包含 170,000 多个字典的 JSON 文件中填充 CoreData。json 的解析很快，但是当我开始尝试添加到 CoreData 时，我阻塞了主线程很长时间，然后应用程序最终崩溃了。调用方法时崩溃 [UIDocument saveToUrl:forSaveOperation:completionHandler] 这是我的代码。如果有人知道导致它崩溃的原因或更有效的加载 CoreData 的方法，将不胜感激。

```
@property (nonatomic, strong) UIManagedDocument *wordDatabase;

- (void)viewWillAppear:(BOOL)animated
  {
    [super viewWillAppear:animated];
    if (!self.wordDatabase) {
      NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
      url = [url URLByAppendingPathComponent:@"Word Database"];
      self.wordDatabase = [[UIManagedDocument alloc] initWithFileURL:url];
    }
 }

- (void)setWordDatabase:(UIManagedDocument *)wordDatabase
  {
    if (_wordDatabase != wordDatabase) {
      _wordDatabase = wordDatabase;
      [self useDocument];
    }
  }

- (void)useDocument
  {
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.wordDatabase.fileURL path]]) {
      // does not exist on disk, so create it
      [self.wordDatabase saveToURL:self.wordDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
          [self setupFetchedResultsController];
          [self prepopulateWordDatabaseWithDocument:self.wordDatabase];
       }];
     }
  }

- (void)prepopulateWordDatabaseWithDocument:(UIManagedDocument *)document
  {
    dispatch_queue_t fetchQ = dispatch_queue_create("Word Fetcher", NULL);
    dispatch_async(fetchQ, ^{
    //Fetch the words from the json file
    NSString *fileString = [[NSBundle mainBundle] pathForResource:@"words" ofType:@"json"];
    NSString *jsonString = [[NSString alloc] initWithContentsOfFile:fileString encoding:NSUTF8StringEncoding error: NULL];
    NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
    NSError *error;
    NSArray *words = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];
    [document.managedObjectContext performBlock:^{
        for (NSDictionary *dictionary in words)
        {
            [Word wordFromDictionary:dictionary inManagedObjectContext:document.managedObjectContext];
        }

        [document saveToURL:document.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
      }];
    });

   dispatch_release(fetchQ);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:06:31.903

我最终阻止我的应用程序崩溃的是分配一个新的 NSManagedObjectContext 并在后台执行所有加载。保存后，我调用了我的 NSFetchedResultsController 并重新填充了表格。

```
- (void)prepopulateWordDatabaseWithDocument:(UIManagedDocument *)document
 {
     NSManagedObjectContext *backgroundContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
     backgroundContext.undoManager = nil;
     backgroundContext.persistentStoreCoordinator = document.managedObjectContext.persistentStoreCoordinator;
     [backgroundContext performBlock:^{
         NSString *fileString = [[NSBundle mainBundle] pathForResource:@"words" ofType:@"json"];
         NSString *jsonString = [[NSString alloc] initWithContentsOfFile:fileString encoding:NSUTF8StringEncoding error: NULL];
         NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
         NSError *parseError;
         NSArray *words = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&parseError];

         for (NSDictionary *dictionary in words)
         {
             [Word wordFromDictionary:dictionary inManagedObjectContext:backgroundContext];
         }

         NSError *loadError;
         if ([backgroundContext save:&loadError]) {
             dispatch_async(dispatch_get_main_queue(), ^{
                 [self setupFetchedResultsController];
             });
         }
     }];
 } 
```

# c - 如果依赖于按钮并在 while 循环中，如何将 int 设置为 1？

> ID：14514435
> 
> 赞同：1
> 
> 时间：2013-01-25T02:32:51.730
> 
> 标签：c, robot

我正在为机器人编程，不幸的是在它的自主模式下我遇到了一些问题。当按下按钮时，我需要将整数设置为 1，但为了让程序识别按钮，它必须处于 while 循环中。正如您可以想象的那样，程序以无限循环结束，整数值最终接近 4,000。

```
 task autonomous()
   {
    while(true)
        {
    if(SensorValue[positionSelectButton] == 1)
        {
            positionSelect = positionSelect + 1;
            wait1Msec(0350);
        }
        }
   } 
```

我已经设法通过等待来获得价值，但我不想这样做。还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:58:48.627

假设`SensorValue`来自与while循环异步的物理组件，并且是一个按钮（即不是切换按钮）

```
task autonomous()
{
    while(true)
    {
        // check whether 
        if(current_time >= next_detect_time && SensorValue[positionSelectButton] == 1)
        {
            positionSelect = positionSelect + 1;

            // no waiting here
            next_detect_time = current_time + 0350;
        }

        // carry on to other tasks
        if(enemy_is_near)
        {
            fight();
        }

        // current_time 
        current_time = built_in_now()
    }
} 
```

通过某些内置函数或递增整数获取当前时间，并在达到最大值时回绕。

或者，如果您处于另一种情况：

```
task autonomous()
{
    while(true)
    {
        // check whether the flag allows incrementing
        if(should_detect && SensorValue[positionSelectButton] == 1)
        {
            positionSelect = positionSelect + 1;

            // no waiting here
            should_detect = false;
        }

        // carry on to other tasks
        if(enemy_is_near)
        {
            if(fight() == LOSING)
               should_detect = true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:36:25.947

尝试记住按钮的当前位置，并且仅在其状态从关闭变为打开时才执行操作。

根据硬件的不同，您可能还会收到一个信号，就好像它在一毫秒内来回翻转了几次一样。如果这是一个问题，您可能还希望存储上次激活按钮的时间戳，然后在之后的一个短窗口中忽略重复事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T02:57:55.827

你的问题有点含糊
，我不确定你为什么需要这个变量来增加以及事情是如何工作的......但我会尝试一下。解释一下机器人移动的工作方式......我们会能够提供更多帮助。

```
task autonomous()
{
    int buttonPressed=0;
    while(true)
    {
        if(SensorValue[positionSelectButton] == 1)
        {
            positionSelect = positionSelect +1;
            buttonPressed=1;
        }
        else{
            buttonPressed = 0;
        }

        //use your variables here 
        if( buttonPressed  == 1){
            //Move robot front a little
        }

    }
} 
```

一般的想法是：
首先你检测所有按下的按钮，然后你根据它们做事
所有这些都进入你的while循环......这将（并且应该）永远运行（至少只要你的机器人还活着:)）
希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T03:00:20.313

您可以将按钮连接到中断，然后在中断处理程序中进行必要的更改。

这可能不是最好的方法，但它会是最简单的。

* * *

来自[Vex 机器人目录](http://www.vexrobotics.com/276-2194.html)：

> (12) 可用作中断的快速数字 I/O 端口

因此，您使用的 Vex 微控制器很可能会支持中断。

# python - 开罗，ImageSurface：无法获得正确的 Alpha 混合

> ID：14514438
> 
> 赞同：3
> 
> 时间：2013-01-25T02:33:30.980
> 
> 标签：python, cairo, pycairo

我在 Ubuntu 12.04 上使用 pycairo（实际上是 cairocffi）。系统上的库是 cairo 1.10。我创建了一个空的 ImageSurface，具有 ARGB32 格式。例如，如果我尝试填充一个半透明的白色矩形 (RGBA(1,1,1,0.5))，我会看到一个半透明的灰色矩形。

这对于在半透明背景上绘制的每个半透明像素都是一样的：似乎 cairo 认为与透明像素混合与与黑色像素混合是一样的......同样的问题适用于绘制的抗锯齿形状透明表面：它们有黑色的意想不到的边界。

没有提到这种行为，无处可去。所以我想知道，这是 cairo 的预期行为吗？我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:54:59.787

我终于发现了 cairo 和糟糕的 alpha 混合有什么问题。Cairo 支持 ARGB32 表面，但仅支持预乘 alpha。也就是说，像素的每个分量都与 alpha 分量相乘后存储。

我还没有在互联网上找到答案，我认为预乘 alpha 不适合我正在做的操作类型。我切换到 PyQt4，使用没有预乘的 ARGB32 图像，它就像一个魅力。

我还尝试了 PyQt4 预乘 alpha 图像，并重现了该问题。

# html - 使用 c out 标签时不出现新行

> ID：14514440
> 
> 赞同：6
> 
> 时间：2013-01-25T02:33:43.003
> 
> 标签：html, jsp, jstl

我在字符串中附加了“\n”，当使用 s 标签 textarea 时，已经附加了换行符，并且数据逐行显示。但是当我使用 c out 标签时，数据显示在一行中。如何使用 c out 标签逐行显示？

```
StringBuffer sb = new StringBuffer();
    for (MyBean bean : beanList) {

                sb.append((bean.getName());
                sb.append("\n");
            }
            return sb.toString(); 
```

JSP

```
<c:out value="${myData}"/> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-25T02:59:03.027

JSP 生成 HTML。在 HTML 中，新行将由`<br>`元素表示，而不是由换行符表示。更重要的是，如果您查看普通的 HTML 源代码，您会看到很多换行符，但默认情况下它们根本不被网络浏览器解释。

除了使用 HTML`<br>`元素代替换行符之外，

```
sb.append("<br />"); 
```

`<c:out>`并在没有这样的情况下打印它`${myData}`，您还可以使用 HTML`<pre>`元素来保留空格，

```
<pre><c:out vaule="${myData}" /></pre> 
```

或者只是在父元素上应用 CSS `white-space:pre`，就像 HTML`<textarea>`元素在内部做的一样：

```
<span style="white-space:pre"><c:out value="${myData}"/></span> 
```

*（注意： a`class`比 更推荐`style`，以上只是一个启动示例）*

推荐后两种方法。HTML 代码不属于 Java 类。它属于 JSP 文件。更重要的是，您可能实际上应该使用 JSTL`<c:forEach>`来迭代集合，而不是整个 Java 代码。

```
<c:forEach items="${beanList}" var="bean">
    <c:out value="${bean.name}" /><br />
</c:forEach> 
```

# vb.net - 如何编写移动应用程序以发送 SMS？

> ID：14514441
> 
> 赞同：0
> 
> 时间：2013-01-25T02:33:49.187
> 
> 标签：vb.net, mobile, windows-mobile, gsm

我想要一个移动应用程序来发送自动短信。这将在 VB.Net 中。我已经搜索过关于这些的文章，但它们都是关于通过 COM 端口访问 GSM 调制解调器或移动设备的 PC 应用程序。手机上的移动应用程序（不是通过 PC）的过程是否相同？如果是，并且我将 GSM 调制解调器视为“端口”，我将如何连接到它？如果没有，是否有任何有用的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:28:36.973

使用 windows mobile 可以轻松发送 SMS。您需要对 mobile.poutlook 命名空间的引用。

"*从掌上电脑、智能手机、Windows 手机发送短信*

*要发送 SMS 消息，我们首先需要引用 Microsoft.WindowsMo​​bile.PocketOutlook 命名空间。*

```
Imports Microsoft.WindowsMobile.PocketOutlook 
```

*之后，它就像创建 SMSMessage 类的新实例一样简单，其中包含传入接收方手机号码和 SMS 文本的重载 onstructor，然后调用 Send 方法*“

[来源](http://www.sourcecodester.com/visual-basic-net/send-sms-windows-mobile-5-6xx-or-7.html)。
[直接下载VB代码](http://www.sourcecodester.com/sites/default/files/download/emond/smsmobile.zip)。

[女士参考](http://msdn.microsoft.com/en-us/library/microsoft.windowsmobile.pocketoutlook.smsmessage.send.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)。

女士片段：

```
public void SmsMessageSend()
{
    SmsMessage smsMessage = new SmsMessage();

    //Set the message body and recipient.
    smsMessage.Body = "Would you like to meet for lunch?";
    smsMessage.To.Add(new Recipient("John Doe", "2065550199"));
    smsMessage.RequestDeliveryReport = true;

    //Send the SMS message.
    smsMessage.Send();

    return;
} 
```

上述片段的自动 VB 翻译：

```
Public Sub SmsMessageSend()
    Dim smsMessage As New SmsMessage()

    'Set the message body and recipient.
    smsMessage.Body = "Would you like to meet for lunch?"

    smsMessage.To.Add(New Recipient("John Doe", "2065550199"))
    smsMessage.RequestDeliveryReport = True

    'Send the SMS message.
    smsMessage.Send()
    Return
End Sub 
```

上面不是所要求的 VB，但不幸的是 MS 没有在那里提供 VB 片段。

所有这些只有在您使用 Windows 移动设备时才有效。它不适用于 windows ce 设备。

您应该考虑在互联网上搜索移动 API 和代码。我总是从“紧凑框架”开始，只获取与代码相关的结果。然后我添加我搜索的关键字。例如：“compact framework send sms”提供了一个很好的结果列表，您可以使用它。

# c - 如何在子进程中使用 dup2？

> ID：14514446
> 
> 赞同：0
> 
> 时间：2013-01-25T02:34:37.260
> 
> 标签：c, linux

在我的 C 程序中，我正在创建一个子进程并在子进程中运行 execvp。但是我正在尝试将错误消息更改为其他内容，用于 execvp 命令（如果有错误）。

我知道如果它返回了，那就是一个错误，然后我可以在下一行打印我自己的自定义错误消息。这是一种可能发生的错误，例如，如果我将命令“sdfsd”交给 execvp，就会发生这种情况。这部分对我有用。

但是，如果我输入“find sdfsd”，那么它不会返回并打印“find: `sdfsd': No such file or directory”。

我想将此消息（以及基本上来自 exevcp 的任何类型的错误消息）更改为我自己的自定义消息。

我相信我可以使用 dup2 来做到这一点，但我不确定如何......

在我尝试的子进程中

```
dup2(STDERR_FILENO, 1); 
fclose(stderr); 
```

但这只是阻止子进程写入任何错误消息。在所有情况下，我仍然无法打印自己的消息..

有谁知道如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:05:40.677

由于如果成功启动新程序就永远不会返回，因此在程序运行失败`execvp`后，您将无法在子进程中打印自己的错误消息。`execvp`一种选择是通过管道`stderr`传输到父进程，在那里拦截错误消息，然后打印您自己的错误消息。

例如：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(int argc, char **argv)
{
  int ff, p[2];
  FILE *f;
  char *vv[] = {"find", "garbage", (char *)NULL};
  char msg[100];

  if (pipe(p) != 0)
  {
    fprintf(stderr, "Pipe failed\n");
    return 1;
  }

  if ((ff = fork()) == -1 )
  {
    fprintf(stderr, "Fork failed\n");
    return 1;
  }

  if (ff == 0)
  {
    /* In the child process */
    close(2);
    close(p[0]);
    dup2(p[1], 2);
    execvp("find", vv);
    return 1;
  };

  /* In the parent process */
  close(p[1]);
  f = fdopen(p[0], "r");
  if (f == NULL)
  {
    fprintf(stderr, "Fdopen failed\n");
    return 1;
  }
  if (fgets(msg, sizeof(msg), f) == NULL)
  {
    fprintf(stderr, "Fgets failed\n");
    return 1;
  }
  printf("Error message was: %s", msg);
  /* and so on */
  return 0;
} 
```

# jquery - 使用 node.js 在灯箱/模式窗口中创建“编辑”表单

> ID：14514447
> 
> 赞同：0
> 
> 时间：2013-01-25T02:34:50.957
> 
> 标签：jquery, ajax, jquery-ui, node.js, pug

我对 Node.js 有点陌生，目前正在使用节点和 Jade 模板引擎开发一个应用程序。我试图找出在界面中创建灯箱的最佳方法，允许用户编辑选定的记录。

关于如何实现这一目标的任何建议：

1.  用户访问列表视图页面
2.  点击列表中一项旁边的编辑
3.  使用某种 javascript，项目 ID# 与表单字段的默认值一起传递到模式/灯箱窗口，用于灯箱中的编辑表单。例如，“项目名称”字段已预先填写，因此他们可以更改或保持原样。
4.  当他们单击提交时，表单将发布到后端函数，并且步骤 3 中的 ID# 作为不可见字段传入。

我可以处理 post 函数和不可见字段的事情，只需要有关如何动态渲染这些灯箱的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T17:07:22.047

您可以使用 twitter bootstrap 来实现模态窗口。它简直太棒了，而且非常易于使用。

# sql - 比较 SQL Server 中的多个列，按产品返回最大版本

> ID：14514451
> 
> 赞同：1
> 
> 时间：2013-01-25T02:35:27.770
> 
> 标签：sql, tsql, sql-server-2005

使用 SQL Server 2005，我正在尝试编写一个 select 语句，它将查询下面的数据（18000 行）并为每个产品返回一行，找到最大的产品版本。

我认为查询需要反向比较版本，并在达到 Major 时存储最大的行号，但我不确定。

**样本数据**

```
 Product  Date       Major  Minor  Release Fixpack Build
    =======  ========== ====== ====== ======  ======  ======
    Widgets  01/01/2012 10     1      0       345     132
    Widgets  04/02/2011 6      6      3       932     245
    Widgets  09/01/2010 4      92     345     53      2
    Gears    03/17/2011 9      2      3       0       21
    Gears    12/12/2012 10     0      0       5       548
    Tires    04/24/2000 8      3      456     3       984
    Tires    04/12/1993 7      14     45      35      252 
```

**预期成绩**

```
 Product  Date       Major  Minor  Release Fixpack Build
    =======  ========== ====== ====== ======  ======  ======
    Widgets  01/01/2012 10     1      0       345     132
    Gears    12/12/2012 10     0      0       5       548
    Tires    04/24/2000 8      3      456     3       984 
```

或者甚至更好，可以将版本合并为一列：

```
 Product  Date       ProductVersion
    =======  ========== ==================
    Widgets  01/01/2012 10.1.0.345.132
    Gears    12/12/2012 10.0.0.5.548
    Tires    04/24/2000 8.3.456.3.984 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:51:42.833

这应该有效：

```
SELECT a.product, 
       a.md, 
       b.major, 
       b.minor, 
       b.release, 
       b.fixpack, 
       b.build 
FROM   (SELECT product, 
               Max(date) AS md 
        FROM   tbl 
        GROUP  BY product) a 
       JOIN tbl b 
         ON b.product = a.product 
            AND b.date = a.md 
```

**结果**

```
| 产品 | 医学博士 | 专业 | 次要 | 发布 | 修复包 | 建立 |
-------------------------------------------------- ------------------
| 小部件 | 2012-01-01 | 10 | 1 | 0 | 345 | 132 |
| 轮胎 | 2000-04-24 | 8 | 3 | 第456章 3 | 第984章
| 齿轮 | 2012-12-12 | 10 | 0 | 0 | 5 | 第548章
```

**更好的方法**

```
SELECT a.product, 
       a.md                          AS date, 
       Cast(b.major AS VARCHAR(5)) + '.' 
       + Cast(b.minor AS VARCHAR(5)) + '.' 
       + Cast(b.release AS VARCHAR(5)) + '.' 
       + Cast(b.fixpack AS VARCHAR(5)) + '.' 
       + Cast(b.build AS VARCHAR(5)) AS version 
FROM   (SELECT product, 
               Max(date) AS md 
        FROM   tbl 
        GROUP  BY product) a 
       JOIN tbl b 
         ON b.product = a.product 
            AND b.date = a.md 
```

```
| 产品 | 日期 | 版本 |
-----------------------------------------
| 小部件 | 2012-01-01 | 10.1.0.345.132 |
| 轮胎 | 2000-04-24 | 8.3.456.3.984 |
| 齿轮 | 2012-12-12 | 10.0.0.5.548 |
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:39:23.460

您可以在派生表中使用[ROW_NUMBER函数。](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.90%29.aspx)执行分区`Product`并按`Date desc`您的版本信息排序。

订购者`Date desc`：

```
select T.Product,
       T.Date,
       T.ProductVersion
from (
     select Product,
            Date,
            cast(Major as varchar(5))+'.'+
            cast(Minor as varchar(5))+'.'+
            cast(Release as varchar(5))+'.'+
            cast(Fixpack as varchar(5))+'.'+
            cast(Build as varchar(5)) as ProductVersion,
            row_number() over(partition by Product order by Date desc) as rn
     from YourTable
     ) as T
where T.rn = 1 
```

订购`ProductVersion desc`

```
select T.Product,
       T.Date,
       T.ProductVersion
from (
     select Product,
            Date,
            cast(Major as varchar(5))+'.'+
            cast(Minor as varchar(5))+'.'+
            cast(Release as varchar(5))+'.'+
            cast(Fixpack as varchar(5))+'.'+
            cast(Build as varchar(5)) as ProductVersion,
            row_number() over(partition by Product 
                              order by Major desc, 
                                       Minor desc, 
                                       Release desc, 
                                       Fixpack desc, 
                                       Build desc) as rn
     from YourTable
     ) as T
where T.rn = 1 
```

[SQL小提琴](http://sqlfiddle.com/#!3/a8008/1)

# javascript - 如何使用 AngularJS 绑定到复选框值列表？

> ID：14514461
> 
> 赞同：687
> 
> 时间：2013-01-25T02:36:46.960
> 
> 标签：javascript, angularjs

我有几个复选框：

```
<input type='checkbox' value="apple" checked>
<input type='checkbox' value="orange">
<input type='checkbox' value="pear" checked>
<input type='checkbox' value="naartjie"> 
```

我想绑定到我的控制器中的列表，以便每当更改复选框时，控制器都会维护所有检查值的列表，例如`['apple', 'pear']`.

ng-model 似乎只能将一个复选框的值绑定到控制器中的变量。

还有另一种方法可以将四个复选框绑定到控制器中的列表吗？

* * *

## 回答 #1

> 赞同：945
> 
> 时间：2013-01-25T10:40:07.570

有两种方法可以解决这个问题。使用简单数组或对象数组。每个解决方案都有其优点和缺点。您将在下面找到每种情况下的一个。

* * *

### 用一个简单的数组作为输入数据

HTML 可能如下所示：

```
<label ng-repeat="fruitName in fruits">
  <input
    type="checkbox"
    name="selectedFruits[]"
    value="{{fruitName}}"
    ng-checked="selection.indexOf(fruitName) > -1"
    ng-click="toggleSelection(fruitName)"
  > {{fruitName}}
</label> 
```

适当的控制器代码将是：

```
app.controller('SimpleArrayCtrl', ['$scope', function SimpleArrayCtrl($scope) {

  // Fruits
  $scope.fruits = ['apple', 'orange', 'pear', 'naartjie'];

  // Selected fruits
  $scope.selection = ['apple', 'pear'];

  // Toggle selection for a given fruit by name
  $scope.toggleSelection = function toggleSelection(fruitName) {
    var idx = $scope.selection.indexOf(fruitName);

    // Is currently selected
    if (idx > -1) {
      $scope.selection.splice(idx, 1);
    }

    // Is newly selected
    else {
      $scope.selection.push(fruitName);
    }
  };
}]); 
```

**优点**：简单的数据结构和按名称切换很容易处理

**缺点**：添加/删除很麻烦，因为必须管理两个列表（输入和选择）

* * *

### 以对象数组作为输入数据

HTML 可能如下所示：

```
<label ng-repeat="fruit in fruits">
  <!--
    - Use `value="{{fruit.name}}"` to give the input a real value, in case the form gets submitted
      traditionally

    - Use `ng-checked="fruit.selected"` to have the checkbox checked based on some angular expression
      (no two-way-data-binding)

    - Use `ng-model="fruit.selected"` to utilize two-way-data-binding. Note that `.selected`
      is arbitrary. The property name could be anything and will be created on the object if not present.
  -->
  <input
    type="checkbox"
    name="selectedFruits[]"
    value="{{fruit.name}}"
    ng-model="fruit.selected"
  > {{fruit.name}}
</label> 
```

适当的控制器代码将是：

```
app.controller('ObjectArrayCtrl', ['$scope', 'filterFilter', function ObjectArrayCtrl($scope, filterFilter) {

  // Fruits
  $scope.fruits = [
    { name: 'apple',    selected: true },
    { name: 'orange',   selected: false },
    { name: 'pear',     selected: true },
    { name: 'naartjie', selected: false }
  ];

  // Selected fruits
  $scope.selection = [];

  // Helper method to get selected fruits
  $scope.selectedFruits = function selectedFruits() {
    return filterFilter($scope.fruits, { selected: true });
  };

  // Watch fruits for changes
  $scope.$watch('fruits|filter:{selected:true}', function (nv) {
    $scope.selection = nv.map(function (fruit) {
      return fruit.name;
    });
  }, true);
}]); 
```

**优点**：添加/删除非常容易

**缺点**：更复杂的数据结构和按名称切换很麻烦或需要辅助方法

* * *

**演示**：http: [//jsbin.com/ImAqUC/1/](http://jsbin.com/ImAqUC/1/)

* * *

## 回答 #2

> 赞同：414
> 
> 时间：2013-05-16T23:42:27.150

一个简单的解决方案：

```
<div ng-controller="MainCtrl">
  <label ng-repeat="(color,enabled) in colors">
      <input type="checkbox" ng-model="colors[color]" /> {{color}} 
  </label>
  <p>colors: {{colors}}</p>
</div>

<script>
  var app = angular.module('plunker', []);

  app.controller('MainCtrl', function($scope){
      $scope.colors = {Blue: true, Orange: true};
  });
</script> 
```

[http://plnkr.co/edit/U4VD61?p=preview](http://plnkr.co/edit/U4VD61?p=preview)

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2013-01-25T06:57:39.250

```
<input type='checkbox' ng-repeat="fruit in fruits"
  ng-checked="checkedFruits.indexOf(fruit) != -1" ng-click="toggleCheck(fruit)"> 
```

.

```
function SomeCtrl ($scope) {
    $scope.fruits = ["apple, orange, pear, naartjie"];
    $scope.checkedFruits = [];
    $scope.toggleCheck = function (fruit) {
        if ($scope.checkedFruits.indexOf(fruit) === -1) {
            $scope.checkedFruits.push(fruit);
        } else {
            $scope.checkedFruits.splice($scope.checkedFruits.indexOf(fruit), 1);
        }
    };
} 
```

* * *

## 回答 #4

> 赞同：81
> 
> 时间：2013-01-25T10:28:18.207

这是一个快速的小可重用指令，似乎可以完成您想要做的事情。我只是简单地调用了它`checkList`。它在复选框更改时更新数组，并在数组更改时更新复选框。

```
app.directive('checkList', function() {
  return {
    scope: {
      list: '=checkList',
      value: '@'
    },
    link: function(scope, elem, attrs) {
      var handler = function(setup) {
        var checked = elem.prop('checked');
        var index = scope.list.indexOf(scope.value);

        if (checked && index == -1) {
          if (setup) elem.prop('checked', false);
          else scope.list.push(scope.value);
        } else if (!checked && index != -1) {
          if (setup) elem.prop('checked', true);
          else scope.list.splice(index, 1);
        }
      };

      var setupHandler = handler.bind(null, true);
      var changeHandler = handler.bind(null, false);

      elem.bind('change', function() {
        scope.$apply(changeHandler);
      });
      scope.$watch('list', setupHandler, true);
    }
  };
}); 
```

这是一个控制器和一个视图，显示了您可能如何使用它。

```
<div ng-app="myApp" ng-controller='MainController'>
  <span ng-repeat="fruit in fruits">
    <input type='checkbox' value="{{fruit}}" check-list='checked_fruits'> {{fruit}}<br />
  </span>

  <div>The following fruits are checked: {{checked_fruits | json}}</div>

  <div>Add fruit to the array manually:
    <button ng-repeat="fruit in fruits" ng-click='addFruit(fruit)'>{{fruit}}</button>
  </div>
</div> 
```

```
app.controller('MainController', function($scope) {
  $scope.fruits = ['apple', 'orange', 'pear', 'naartjie'];
  $scope.checked_fruits = ['apple', 'pear'];
  $scope.addFruit = function(fruit) {
    if ($scope.checked_fruits.indexOf(fruit) != -1) return;
    $scope.checked_fruits.push(fruit);
  };
}); 
```

（按钮表明更改数组也会更新复选框。）

最后，这里是 Plunker 上的指令示例：[http ://plnkr.co/edit/3YNLsyoG4PIBW6Kj7dRK?p=preview](http://plnkr.co/edit/3YNLsyoG4PIBW6Kj7dRK?p=preview)

* * *

## 回答 #5

> 赞同：67
> 
> 时间：2013-11-13T22:50:02.890

根据此线程中的答案，我创建了涵盖所有情况[的 checklist-model](http://vitalets.github.io/checklist-model)指令：

*   简单的原语数组
*   对象数组（选择 id 或整个对象）
*   对象属性迭代

对于主题启动案例，它将是：

```
<label ng-repeat="fruit in ['apple', 'orange', 'pear', 'naartjie']">
    <input type="checkbox" checklist-model="selectedFruits" checklist-value="fruit"> {{fruit}}
</label> 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-11-19T16:10:50.823

使用字符串`$index`有助于使用选定值的哈希图：

```
<ul>
    <li ng-repeat="someItem in someArray">
        <input type="checkbox" ng-model="someObject[$index.toString()]" />
    </li>
</ul> 
```

这样，ng-model 对象就会使用表示索引的键进行更新。

```
$scope.someObject = {}; 
```

一段时间后`$scope.someObject`应该看起来像：

```
$scope.someObject = {
     0: true,
     4: false,
     1: true
}; 
```

这种方法并不适用于所有情况，但很容易实现。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-01-25T04:23:45.417

我认为最简单的解决方法是使用“select”并指定“multiple”：

```
<select ng-model="selectedfruit" multiple ng-options="v for v in fruit"></select> 
```

否则，我认为您必须处理列表以构造列表（通过`$watch()`使用复选框绑定模型数组）。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2013-01-25T19:45:37.360

由于您接受了未使用列表的答案，因此我假设我的评论问题的答案是“不，它不必是列表”。我也有这样的印象，也许您正在渲染 HTML 服务器端，因为您的示例 HTML 中存在“已检查”（如果使用 ng-model 为您的复选框建模，则不需要这样做）。

无论如何，当我问这个问题时，这就是我的想法，还假设您正在生成 HTML 服务器端：

```
<div ng-controller="MyCtrl" 
 ng-init="checkboxes = {apple: true, orange: false, pear: true, naartjie: false}">
    <input type="checkbox" ng-model="checkboxes.apple">apple
    <input type="checkbox" ng-model="checkboxes.orange">orange
    <input type="checkbox" ng-model="checkboxes.pear">pear
    <input type="checkbox" ng-model="checkboxes.naartjie">naartjie
    <br>{{checkboxes}}
</div> 
```

ng-init 允许服务器端生成的 HTML 初始设置某些复选框。

[小提琴](http://jsfiddle.net/mrajcok/CBmgM/)。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-03-13T08:58:23.527

以下解决方案似乎是一个不错的选择，

```
<label ng-repeat="fruit in fruits">
  <input
    type="checkbox"
    ng-model="fruit.checked"
    ng-value="true"
  > {{fruit.fruitName}}
</label> 
```

而在控制器模型值`fruits`将是这样的

```
$scope.fruits = [
  {
    "name": "apple",
    "checked": true
  },
  {
    "name": "orange"
  },
  {
    "name": "grapes",
    "checked": true
  }
]; 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2013-10-30T13:14:29.913

我已经改编了 Yoshi 接受的答案来处理复杂的对象（而不是字符串）。

HTML

```
<div ng-controller="TestController">
    <p ng-repeat="permission in allPermissions">
        <input type="checkbox" ng-checked="selectedPermissions.containsObjectWithProperty('id', permission.id)" ng-click="toggleSelection(permission)" />
        {{permission.name}}
    </p>

    <hr />

    <p>allPermissions: | <span ng-repeat="permission in allPermissions">{{permission.name}} | </span></p>
    <p>selectedPermissions: | <span ng-repeat="permission in selectedPermissions">{{permission.name}} | </span></p>
</div> 
```

JavaScript

```
Array.prototype.indexOfObjectWithProperty = function(propertyName, propertyValue)
{
    for (var i = 0, len = this.length; i < len; i++) {
        if (this[i][propertyName] === propertyValue) return i;
    }

    return -1;
};

Array.prototype.containsObjectWithProperty = function(propertyName, propertyValue)
{
    return this.indexOfObjectWithProperty(propertyName, propertyValue) != -1;
};

function TestController($scope)
{
    $scope.allPermissions = [
    { "id" : 1, "name" : "ROLE_USER" },
    { "id" : 2, "name" : "ROLE_ADMIN" },
    { "id" : 3, "name" : "ROLE_READ" },
    { "id" : 4, "name" : "ROLE_WRITE" } ];

    $scope.selectedPermissions = [
    { "id" : 1, "name" : "ROLE_USER" },
    { "id" : 3, "name" : "ROLE_READ" } ];

    $scope.toggleSelection = function toggleSelection(permission) {
        var index = $scope.selectedPermissions.indexOfObjectWithProperty('id', permission.id);

        if (index > -1) {
            $scope.selectedPermissions.splice(index, 1);
        } else {
            $scope.selectedPermissions.push(permission);
        }
    };
} 
```

工作示例：http: [//jsfiddle.net/tCU8v/](http://jsfiddle.net/tCU8v/)

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2014-03-12T21:13:32.173

另一个简单的指令可能是：

```
var appModule = angular.module("appModule", []);

appModule.directive("checkList", [function () {
return {
    restrict: "A",
    scope: {
        selectedItemsArray: "=",
        value: "@"
    },
    link: function (scope, elem) {
        scope.$watchCollection("selectedItemsArray", function (newValue) {
            if (_.contains(newValue, scope.value)) {
                elem.prop("checked", true);
            } else {
                elem.prop("checked", false);
            }
        });
        if (_.contains(scope.selectedItemsArray, scope.value)) {
            elem.prop("checked", true);
        }
        elem.on("change", function () {
            if (elem.prop("checked")) {
                if (!_.contains(scope.selectedItemsArray, scope.value)) {
                    scope.$apply(
                        function () {
                            scope.selectedItemsArray.push(scope.value);
                        }
                    );
                }
            } else {
                if (_.contains(scope.selectedItemsArray, scope.value)) {
                    var index = scope.selectedItemsArray.indexOf(scope.value);
                    scope.$apply(
                        function () {
                            scope.selectedItemsArray.splice(index, 1);
                        });
                }
            }
            console.log(scope.selectedItemsArray);
        });
    }
};
}]); 
```

控制器：

```
appModule.controller("sampleController", ["$scope",
  function ($scope) {
    //#region "Scope Members"
    $scope.sourceArray = [{ id: 1, text: "val1" }, { id: 2, text: "val2" }];
    $scope.selectedItems = ["1"];
    //#endregion
    $scope.selectAll = function () {
      $scope.selectedItems = ["1", "2"];
  };
    $scope.unCheckAll = function () {
      $scope.selectedItems = [];
    };
}]); 
```

和 HTML：

```
<ul class="list-unstyled filter-list">
<li data-ng-repeat="item in sourceArray">
    <div class="checkbox">
        <label>
            <input type="checkbox" check-list selected-items-array="selectedItems" value="{{item.id}}">
            {{item.text}}
        </label>
    </div>
</li> 
```

我还包括一个 Plunker：[http ://plnkr.co/edit/XnFtyij4ed6RyFwnFN6V?p=preview](http://plnkr.co/edit/XnFtyij4ed6RyFwnFN6V?p=preview)

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2014-05-20T19:58:53.147

您不必编写所有代码。AngularJS 只需使用 ngTrueValue 和 ngFalseValue 就可以使模型和复选框保持同步

Codepen 在这里： [http ://codepen.io/paulbhartzog/pen/kBhzn](http://codepen.io/paulbhartzog/pen/kBhzn)

代码片段：

```
<p ng-repeat="item in list1" class="item" id="{{item.id}}">
  <strong>{{item.id}}</strong> <input name='obj1_data' type="checkbox" ng-model="list1[$index].data" ng-true-value="1" ng-false-value="0"> Click this to change data value below
</p>
<pre>{{list1 | json}}</pre> 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2014-11-04T17:50:38.923

有一种方法可以直接处理数组并通过`ng-model-options="{ getterSetter: true }"`.

诀窍是在你的 ng-model 中使用 getter/setter 函数。这样，您可以将数组用作真实模型并“伪造”输入模型中的布尔值：

```
<label ng-repeat="fruitName in ['apple', 'orange', 'pear', 'naartjie']">
  <input
    type="checkbox"
    ng-model="fruitsGetterSetterGenerator(fruitName)"
    ng-model-options="{ getterSetter: true }"
  > {{fruitName}}
</label> 
```

```
$scope.fruits = ['apple', 'pear']; // pre checked

$scope.fruitsGetterSetterGenerator = function(fruitName){
    return function myGetterSetter(nowHasFruit){
        if (nowHasFruit !== undefined){

            // Setter
            fruitIndex = $scope.fruits.indexOf(fruit);
            didHaveFruit = (fruitIndex !== -1);
            mustAdd = (!didHaveFruit && nowHasFruit);
            mustDel = (didHaveFruit && !nowHasFruit);
            if (mustAdd){
                $scope.fruits.push(fruit);
            }
            if (mustDel){
                $scope.fruits.splice(fruitIndex, 1);
            }
        }
        else {
            // Getter
            return $scope.user.fruits.indexOf(fruit) !== -1;
        }
    }
} 
```

**CAVEAT**如果你的数组很大，你不应该使用这个方法，因为你`myGetterSetter`会被调用很多次。

有关更多信息，请参阅[https://docs.angularjs.org/api/ng/directive/ngModelOptions](https://docs.angularjs.org/api/ng/directive/ngModelOptions)。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2016-07-13T17:19:27.557

查看这个有效管理复选框列表的指令。我希望这个对你有用。 [清单模型](https://vitalets.github.io/checklist-model/)

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2015-02-19T13:18:40.123

您可以结合 AngularJS 和 jQuery。例如，您需要`$scope.selected = [];`在控制器中定义一个数组 , 。

```
<label ng-repeat="item in items">
    <input type="checkbox" ng-model="selected[$index]" ng-true-value="'{{item}}'">{{item}}
</label> 
```

您可以获得拥有所选项目的数组。使用 method `alert(JSON.stringify($scope.selected))`，您可以检查所选项目。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2015-07-17T13:20:32.390

这是另一个解决方案。我的解决方案的好处：

*   它不需要任何额外的手表（这可能会对性能产生影响）
*   它不需要控制器中的任何代码保持干净
*   代码还是有点短
*   它只需要很少的代码就可以在多个地方重用，因为它只是一个指令

这是指令：

```
function ensureArray(o) {
    var lAngular = angular;
    if (lAngular.isArray(o) || o === null || lAngular.isUndefined(o)) {
        return o;
    }
    return [o];
}

function checkboxArraySetDirective() {
    return {
        restrict: 'A',
        require: 'ngModel',
        link: function(scope, element, attrs, ngModel) {
            var name = attrs.checkboxArraySet;

            ngModel.$formatters.push(function(value) {
                return (ensureArray(value) || []).indexOf(name) >= 0;
            });

            ngModel.$parsers.push(function(value) {
                var modelValue = ensureArray(ngModel.$modelValue) || [],
                    oldPos = modelValue.indexOf(name),
                    wasSet = oldPos >= 0;
                if (value) {
                    if (!wasSet) {
                        modelValue = angular.copy(modelValue);
                        modelValue.push(name);
                    }
                } else if (wasSet) {
                    modelValue = angular.copy(modelValue);
                    modelValue.splice(oldPos, 1);
                }
                return modelValue;
            });
        }
    }
} 
```

最后然后像这样使用它：

```
<input ng-repeat="fruit in ['apple', 'banana', '...']" type="checkbox" ng-model="fruits" checkbox-array-set="{{fruit}}" /> 
```

这就是全部。唯一的补充是`checkbox-array-set`属性。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2015-09-18T17:51:26.900

我喜欢Yoshi的回答。我对其进行了增强，因此您可以对多个列表使用相同的功能。

```
<label ng-repeat="fruitName in fruits">
<input
type="checkbox"
name="selectedFruits[]"
value="{{fruitName}}"
ng-checked="selection.indexOf(fruitName) > -1"
ng-click="toggleSelection(fruitName, selection)"> {{fruitName}}
</label>

<label ng-repeat="veggieName in veggies">
<input
type="checkbox"
name="selectedVeggies[]"
value="{{veggieName}}"
ng-checked="veggieSelection.indexOf(veggieName) > -1"
ng-click="toggleSelection(veggieName, veggieSelection)"> {{veggieName}}
</label>

app.controller('SimpleArrayCtrl', ['$scope', function SimpleArrayCtrl($scope) {
  // fruits
  $scope.fruits = ['apple', 'orange', 'pear', 'naartjie'];
  $scope.veggies = ['lettuce', 'cabbage', 'tomato']
  // selected fruits
  $scope.selection = ['apple', 'pear'];
  $scope.veggieSelection = ['lettuce']
  // toggle selection for a given fruit by name
  $scope.toggleSelection = function toggleSelection(selectionName, listSelection) {
    var idx = listSelection.indexOf(selectionName);

    // is currently selected
    if (idx > -1) {
      listSelection.splice(idx, 1);
    }

    // is newly selected
    else {
      listSelection.push(selectionName);
    }
  };
}]); 
```

[http://plnkr.co/edit/KcbtzEyNMA8s1X7Hja8p?p=preview](http://plnkr.co/edit/KcbtzEyNMA8s1X7Hja8p?p=preview)

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2015-12-16T17:16:12.487

在 HTML 中（假设复选框位于表格中每一行的第一列）。

```
<tr ng-repeat="item in fruits">
    <td><input type="checkbox" ng-model="item.checked" ng-click="getChecked(item)"></td>
    <td ng-bind="fruit.name"></td>
    <td ng-bind="fruit.color"></td>
    ...
</tr> 
```

在`controllers.js`文件中：

```
// The data initialization part...
$scope.fruits = [
    {
      name: ....,
      color:....
    },
    {
      name: ....,
      color:....
    }
     ...
    ];

// The checked or not data is stored in the object array elements themselves
$scope.fruits.forEach(function(item){
    item.checked = false;
});

// The array to store checked fruit items
$scope.checkedItems = [];

// Every click on any checkbox will trigger the filter to find checked items
$scope.getChecked = function(item){
    $scope.checkedItems = $filter("filter")($scope.fruits,{checked:true});
}; 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2016-01-14T22:45:05.560

如果您在同一个表单上有多个复选框

控制器代码

```
vm.doYouHaveCheckBox = ['aaa', 'ccc', 'bbb'];
vm.desiredRoutesCheckBox = ['ddd', 'ccc', 'Default'];
vm.doYouHaveCBSelection = [];
vm.desiredRoutesCBSelection = []; 
```

查看代码

```
<div ng-repeat="doYouHaveOption in vm.doYouHaveCheckBox">
    <div class="action-checkbox">
        <input id="{{doYouHaveOption}}" type="checkbox" value="{{doYouHaveOption}}" ng-checked="vm.doYouHaveCBSelection.indexOf(doYouHaveOption) > -1" ng-click="vm.toggleSelection(doYouHaveOption,vm.doYouHaveCBSelection)" />
        <label for="{{doYouHaveOption}}"></label>
        {{doYouHaveOption}}
    </div>
</div>

<div ng-repeat="desiredRoutesOption in vm.desiredRoutesCheckBox">
     <div class="action-checkbox">
          <input id="{{desiredRoutesOption}}" type="checkbox" value="{{desiredRoutesOption}}" ng-checked="vm.desiredRoutesCBSelection.indexOf(desiredRoutesOption) > -1" ng-click="vm.toggleSelection(desiredRoutesOption,vm.desiredRoutesCBSelection)" />
          <label for="{{desiredRoutesOption}}"></label>
          {{desiredRoutesOption}}
     </div>
</div> 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2016-07-05T03:44:33.330

灵感来自上面 Yoshi 的帖子。这是[plnkr](https://plnkr.co/edit/eTwzbPhV11SuavRTsoAm?p=preview)。

```
(function () {

   angular
      .module("APP", [])
      .controller("demoCtrl", ["$scope", function ($scope) {
         var dc = this

         dc.list = [
            "Selection1",
            "Selection2",
            "Selection3"
         ]

         dc.multipleSelections = []
         dc.individualSelections = []

         // Using splice and push methods to make use of 
         // the same "selections" object passed by reference to the 
         // addOrRemove function as using "selections = []" 
         // creates a new object within the scope of the 
         // function which doesn't help in two way binding.
         dc.addOrRemove = function (selectedItems, item, isMultiple) {
            var itemIndex = selectedItems.indexOf(item)
            var isPresent = (itemIndex > -1)
            if (isMultiple) {
               if (isPresent) {
                  selectedItems.splice(itemIndex, 1)
               } else {
                  selectedItems.push(item)
               }
            } else {
               if (isPresent) {
                  selectedItems.splice(0, 1)
               } else {
                  selectedItems.splice(0, 1, item)
               }
            }
         }

      }])

})()
```

```
label {
  display: block;  
}
```

```
<!DOCTYPE html>
<html>

   <head>
      <link rel="stylesheet" href="style.css" />
   </head>

   <body ng-app="APP" ng-controller="demoCtrl as dc">
      <h1>checkbox-select demo</h1>

      <h4>Multiple Selections</h4>
      <label ng-repeat="thing in dc.list">
         <input 
            type="checkbox" 
            ng-checked="dc.multipleSelections.indexOf(thing) > -1"
            ng-click="dc.addOrRemove(dc.multipleSelections, thing, true)"
         > {{thing}}
      </label>

      <p>
         dc.multipleSelections :- {{dc.multipleSelections}}
      </p>

      <hr>

      <h4>Individual Selections</h4>
      <label ng-repeat="thing in dc.list">
         <input 
            type="checkbox" 
            ng-checked="dc.individualSelections.indexOf(thing) > -1"
            ng-click="dc.addOrRemove(dc.individualSelections, thing, false)"
         > {{thing}}
      </label>

      <p>
         dc.invidualSelections :- {{dc.individualSelections}}
      </p>

      <script data-require="jquery@3.0.0" data-semver="3.0.0" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.js"></script>
      <script data-require="angular.js@1.5.6" data-semver="1.5.6" src="https://code.angularjs.org/1.5.6/angular.min.js"></script>
      <script src="script.js"></script>
   </body>

</html>
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2016-07-05T22:11:04.980

根据我[在这里](https://stackoverflow.com/questions/14514461/how-to-bind-to-list-of-checkbox-values-with-angularjs/14520103?noredirect=1#answer-38194899)的其他帖子，我制定了一个可重用的指令。

查看[GitHub 存储库](https://github.com/Vikasg7/checkbox-select)

```
(function () {

   angular
      .module("checkbox-select", [])
      .directive("checkboxModel", ["$compile", function ($compile) {
         return {
            restrict: "A",
            link: function (scope, ele, attrs) {
               // Defining updateSelection function on the parent scope
               if (!scope.$parent.updateSelections) {
                  // Using splice and push methods to make use of 
                  // the same "selections" object passed by reference to the 
                  // addOrRemove function as using "selections = []" 
                  // creates a new object within the scope of the 
                  // function which doesn't help in two way binding.
                  scope.$parent.updateSelections = function (selectedItems, item, isMultiple) {
                     var itemIndex = selectedItems.indexOf(item)
                     var isPresent = (itemIndex > -1)
                     if (isMultiple) {
                        if (isPresent) {
                           selectedItems.splice(itemIndex, 1)
                        } else {
                           selectedItems.push(item)
                        }
                     } else {
                        if (isPresent) {
                           selectedItems.splice(0, 1)
                        } else {
                           selectedItems.splice(0, 1, item)
                        }
                     }
                  }   
               }

               // Adding or removing attributes
               ele.attr("ng-checked", attrs.checkboxModel + ".indexOf(" + attrs.checkboxValue + ") > -1")
               var multiple = attrs.multiple ? "true" : "false"
               ele.attr("ng-click", "updateSelections(" + [attrs.checkboxModel, attrs.checkboxValue, multiple].join(",") + ")")

               // Removing the checkbox-model attribute, 
               // it will avoid recompiling the element infinitly
               ele.removeAttr("checkbox-model")
               ele.removeAttr("checkbox-value")
               ele.removeAttr("multiple")

               $compile(ele)(scope)
            }
         }
      }])

      // Defining app and controller
      angular
      .module("APP", ["checkbox-select"])
      .controller("demoCtrl", ["$scope", function ($scope) {
         var dc = this
         dc.list = [
            "selection1",
            "selection2",
            "selection3"
         ]

         // Define the selections containers here
         dc.multipleSelections = []
         dc.individualSelections = []
      }])

})()
```

```
label {
  display: block;  
}
```

```
<!DOCTYPE html>
<html>

   <head>
      <link rel="stylesheet" href="style.css" />

   </head>

   <body ng-app="APP" ng-controller="demoCtrl as dc">
      <h1>checkbox-select demo</h1>

      <h4>Multiple Selections</h4>
      <label ng-repeat="thing in dc.list">
         <input type="checkbox" checkbox-model="dc.multipleSelections" checkbox-value="thing" multiple>
         {{thing}}
      </label>
      <p>dc.multipleSelecitons:- {{dc.multipleSelections}}</p>

      <h4>Individual Selections</h4>
      <label ng-repeat="thing in dc.list">
         <input type="checkbox" checkbox-model="dc.individualSelections" checkbox-value="thing">
         {{thing}}
      </label>
      <p>dc.individualSelecitons:- {{dc.individualSelections}}</p>

      <script data-require="jquery@3.0.0" data-semver="3.0.0" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.js"></script>
      <script data-require="angular.js@1.5.6" data-semver="1.5.6" src="https://code.angularjs.org/1.5.6/angular.min.js"></script>
      <script src="script.js"></script>
   </body>

</html>
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2015-06-03T07:12:53.273

```
 <div ng-app='app' >
    <div ng-controller='MainCtrl' >
       <ul> 
       <li ng-repeat="tab in data">
         <input type='checkbox' ng-click='change($index,confirm)' ng-model='confirm' />
         {{tab.name}} 
         </li>
     </ul>
    {{val}}
   </div>
 </div>

var app = angular.module('app', []);
 app.controller('MainCtrl',function($scope){
 $scope.val=[];
  $scope.confirm=false;
  $scope.data=[
   {
     name:'vijay'
     },
    {
      name:'krishna'
    },{
      name:'Nikhil'
     }
    ];
    $scope.temp;
   $scope.change=function(index,confirm){
     console.log(confirm);
    if(!confirm){
     ($scope.val).push($scope.data[index]);   
    }
    else{
    $scope.temp=$scope.data[index];
        var d=($scope.val).indexOf($scope.temp);
        if(d!=undefined){
         ($scope.val).splice(d,1);
        }    
       }
     }   
   }) 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-12-06T10:44:41.127

看看这个：[清单模型](https://vitalets.github.io/checklist-model/)。

它适用于 JavaScript 数组和对象，它可以使用静态 HTML 复选框，无需 ng-repeat

```
<label><input type="checkbox" checklist-model="roles" value="admin"> Administrator</label>
<label><input type="checkbox" checklist-model="roles" value="customer"> Customer</label>
<label><input type="checkbox" checklist-model="roles" value="guest"> Guest</label>
<label><input type="checkbox" checklist-model="roles" value="user"> User</label> 
```

和 JavaScript 方面：

```
var app = angular.module("app", ["checklist-model"]);
app.controller('Ctrl4a', function($scope) {
    $scope.roles = [];
}); 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2017-01-16T23:46:25.510

一个简单的 HTML 唯一方法：

```
<input type="checkbox"
       ng-checked="fruits.indexOf('apple') > -1"
       ng-click="fruits.indexOf('apple') > -1 ? fruits.splice(fruits.indexOf('apple'), 1) : fruits.push('apple')">
<input type="checkbox"
       ng-checked="fruits.indexOf('orange') > -1"
       ng-click="fruits.indexOf('orange') > -1 ? fruits.splice(fruits.indexOf('orange'), 1) : fruits.push('orange')">
<input type="checkbox"
       ng-checked="fruits.indexOf('pear') > -1"
       ng-click="fruits.indexOf('pear') > -1 ? fruits.splice(fruits.indexOf('pear'), 1) : fruits.push('pear')">
<input type="checkbox"
       ng-checked="fruits.indexOf('naartjie') > -1"
       ng-click="fruits.indexOf('apple') > -1 ? fruits.splice(fruits.indexOf('apple'), 1) : fruits.push('naartjie')">
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2017-05-11T03:13:21.977

使用@Umur Kontacı 的[这个示例](https://stackoverflow.com/a/14516885/3332734)，我认为可以在另一个对象/数组中捕获选定的数据，例如编辑页面。

### 在数据库中捕获选项

[![在此处输入图像描述](../Images/3f6b512efb39fdcd71f271b70167f27e.png)](https://i.stack.imgur.com/77E0O.png)

### 切换某个选项

[![在此处输入图像描述](../Images/16e11074bbb2f8a175b3106b2388bc41.png)](https://i.stack.imgur.com/erSs6.png)

例如，下面的所有颜色 json：

```
{
    "colors": [
        {
            "id": 1,
            "title": "Preto - #000000"
        },
        {
            "id": 2,
            "title": "Azul - #005AB1"
        },
        {
            "id": 3,
            "title": "Azul Marinho - #001A66"
        },
        {
            "id": 4,
            "title": "Amarelo - #FFF100"
        },
        {
            "id": 5,
            "title": "Vermelho - #E92717"
        },
        {
            "id": 6,
            "title": "Verde - #008D2F"
        },
        {
            "id": 7,
            "title": "Cinza - #8A8A8A"
        },
        {
            "id": 8,
            "title": "Prata - #C8C9CF"
        },
        {
            "id": 9,
            "title": "Rosa - #EF586B"
        },
        {
            "id": 10,
            "title": "Nude - #E4CAA6"
        },
        {
            "id": 11,
            "title": "Laranja - #F68700"
        },
        {
            "id": 12,
            "title": "Branco - #FFFFFF"
        },
        {
            "id": 13,
            "title": "Marrom - #764715"
        },
        {
            "id": 14,
            "title": "Dourado - #D9A300"
        },
        {
            "id": 15,
            "title": "Bordo - #57001B"
        },
        {
            "id": 16,
            "title": "Roxo - #3A0858"
        },
        {
            "id": 18,
            "title": "Estampado "
        },
        {
            "id": 17,
            "title": "Bege - #E5CC9D"
        }
    ]
} 
```

以及 2 种类型的数据对象，`array`一个对象并`object`包含两个/多个对象数据：

*   选择在数据库中捕获的两个项目：

    ```
    [{"id":12,"title":"Branco - #FFFFFF"},{"id":16,"title":"Roxo - #3A0858"}] 
    ```

*   选择的一项在数据库中捕获：

    ```
    {"id":12,"title":"Branco - #FFFFFF"} 
    ```

在这里，我的 javascript 代码：

```
/**
 * Add this code after catch data of database.
 */

vm.checkedColors = [];
var _colorObj = vm.formData.color_ids;
var _color_ids = [];

if (angular.isObject(_colorObj)) {
    // vm.checkedColors.push(_colorObj);
    _color_ids.push(_colorObj);
} else if (angular.isArray(_colorObj)) {
    angular.forEach(_colorObj, function (value, key) {
        // vm.checkedColors.push(key + ':' + value);
        _color_ids.push(key + ':' + value);
    });
}

angular.forEach(vm.productColors, function (object) {
    angular.forEach(_color_ids, function (color) {
        if (color.id === object.id) {
            vm.checkedColors.push(object);
        }
    });
});

/**
 * Add this code in your js function initialized in this HTML page
 */
vm.toggleColor = function (color) {
    console.log('toggleColor is: ', color);

    if (vm.checkedColors.indexOf(color) === -1) {
        vm.checkedColors.push(color);
    } else {
        vm.checkedColors.splice(vm.checkedColors.indexOf(color), 1);
    }
    vm.formData.color_ids = vm.checkedColors;
}; 
```

我的 HTML 代码：

```
<div class="checkbox" ng-repeat="color in productColors">
    <label>
        <input type="checkbox"
               ng-checked="checkedColors.indexOf(color) != -1"
               ng-click="toggleColor(color)"/>
        <% color.title %>
    </label>
</div>

<p>checkedColors Output:</p>
<pre><% checkedColors %></pre> 
```

# [编辑] 重构代码如下：

```
function makeCheckedOptions(objectOptions, optionObj) {
    var checkedOptions = [];
    var savedOptions = [];

    if (angular.isObject(optionObj)) {
        savedOptions.push(optionObj);
    } else if (angular.isArray(optionObj)) {
        angular.forEach(optionObj, function (value, key) {
            savedOptions.push(key + ':' + value);
        });
    }

    angular.forEach(objectOptions, function (object) {
        angular.forEach(savedOptions, function (color) {
            if (color.id === object.id) {
                checkedOptions.push(object);
            }
        });
    });

    return checkedOptions;
} 
```

并调用新方法如下：

```
vm.checkedColors = makeCheckedOptions(productColors, vm.formData.color_ids); 
```

就是这样！

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2017-11-03T17:42:02.977

我在控制器中放置了一个数组。

```
$scope.statuses = [{ name: 'Shutdown - Reassessment Required' },
    { name: 'Under Construction' },
    { name: 'Administrative Cancellation' },
    { name: 'Initial' },
    { name: 'Shutdown - Temporary' },
    { name: 'Decommissioned' },
    { name: 'Active' },
    { name: 'SO Shutdown' }] 
```

在标记上，我放了如下内容

```
<div ng-repeat="status in $scope.statuses">
   <input type="checkbox" name="unit_status" ng-model="$scope.checkboxes[status.name]"> {{status.name}}
   <br>                        
</div>
{{$scope.checkboxes}} 
```

输出如下，在控制器中我只需要检查它的真假；true 为选中，缺席/false 为未选中。

```
{
"Administrative Cancellation":true,
"Under Construction":true,
"Shutdown - Reassessment Required":true,
"Decommissioned":true,
"Active":true
} 
```

希望这可以帮助。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2013-12-15T23:35:44.390

我认为以下方式对于嵌套的 ng-repeats 更加清晰和有用。在[Plunker](http://plnkr.co/edit/oMCKACELU5EMwoWrzuOd?p=preview)上查看。

[从这个线程引用](https://stackoverflow.com/questions/17614361/how-to-update-ng-model-dynamically-in-ng-repeat/17614803#17614803)：

```
<html ng-app="plunker">
    <head>
        <title>Test</title>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.4/angular.min.js"></script>
    </head>

    <body ng-controller="MainCtrl">
        <div ng-repeat="tab in mytabs">

            <h1>{{tab.name}}</h1>
            <div ng-repeat="val in tab.values">
                <input type="checkbox" ng-change="checkValues()" ng-model="val.checked"/>
            </div>
        </div>

        <br>
        <pre> {{selected}} </pre>

            <script>
                var app = angular.module('plunker', []);

                app.controller('MainCtrl', function ($scope,$filter) {
                    $scope.mytabs = [
             {
                 name: "tab1",
                 values: [
                     { value: "value1",checked:false },
                     { value: "value2", checked: false },
                     { value: "value3", checked: false },
                     { value: "value4", checked: false }
                 ]
             },
             {
                 name: "tab2",
                 values: [
                     { value: "value1", checked: false },
                     { value: "value2", checked: false },
                     { value: "value3", checked: false },
                     { value: "value4", checked: false }
                 ]
             }
                    ]
                    $scope.selected = []
                    $scope.checkValues = function () {
                        angular.forEach($scope.mytabs, function (value, index) {
                         var selectedItems = $filter('filter')(value.values, { checked: true });
                         angular.forEach(selectedItems, function (value, index) {
                             $scope.selected.push(value);
                         });

                        });
                    console.log($scope.selected);
                    };
                });
        </script>
    </body>
</html> 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2016-03-15T07:14:43.057

这是相同的 jsFillde 链接，[http://jsfiddle.net/techno2mahi/Lfw96ja6/](http://jsfiddle.net/techno2mahi/Lfw96ja6/)。

这使用可在[http://vitalets.github.io/checklist-model/](http://vitalets.github.io/checklist-model/)下载的指令。

这是有指令的好处，因为您的应用程序将经常需要此功能。

代码如下：

### HTML：

```
<div class="container">
    <div class="ng-scope" ng-app="app" ng-controller="Ctrl1">
        <div class="col-xs-12 col-sm-6">
            <h3>Multi Checkbox List Demo</h3>
            <div class="well">  <!-- ngRepeat: role in roles -->
                <label ng-repeat="role in roles">
                    <input type="checkbox" checklist-model="user.roles" checklist-value="role"> {{role}}
                </label>
            </div>

            <br>
            <button ng-click="checkAll()">check all</button>
            <button ng-click="uncheckAll()">uncheck all</button>
            <button ng-click="checkFirst()">check first</button>
            <div>
                <h3>Selected User Roles </h3>
                <pre class="ng-binding">{{user.roles|json}}</pre>
            </div>

            <br>
            <div><b/>Provided by techno2Mahi</b></div>
        </div> 
```

### JavaScript

```
var app = angular.module("app", ["checklist-model"]);
app.controller('Ctrl1', function($scope) {
  $scope.roles = [
    'guest',
    'user',
    'customer',
    'admin'
  ];
  $scope.user = {
    roles: ['user']
  };
  $scope.checkAll = function() {
    $scope.user.roles = angular.copy($scope.roles);
  };
  $scope.uncheckAll = function() {
    $scope.user.roles = [];
  };
  $scope.checkFirst = function() {
    $scope.user.roles.splice(0, $scope.user.roles.length);
    $scope.user.roles.push('guest');
  };
}); 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-03-29T19:13:32.660

试试我的宝贝：

**

```
myApp.filter('inputSelected', function(){
  return function(formData){
    var keyArr = [];
    var word = [];
    Object.keys(formData).forEach(function(key){
    if (formData[key]){
        var keyCap = key.charAt(0).toUpperCase() + key.slice(1);
      for (var char = 0; char<keyCap.length; char++ ) {
        if (keyCap[char] == keyCap[char].toUpperCase()){
          var spacedLetter = ' '+ keyCap[char];
          word.push(spacedLetter);
        }
        else {
          word.push(keyCap[char]);
        }
      }
    }
    keyArr.push(word.join(''))
    word = [];
    })
    return keyArr.toString();
  }
}) 
```

**

然后对于任何带有复选框的 ng-model，它将返回您选择的所有输入的字符串：

```
<label for="Heard about ITN">How did you hear about ITN?: *</label><br>
<label class="checkbox-inline"><input ng-model="formData.heardAboutItn.brotherOrSister" type="checkbox" >Brother or Sister</label>
<label class="checkbox-inline"><input ng-model="formData.heardAboutItn.friendOrAcquaintance" type="checkbox" >Friend or Acquaintance</label>

{{formData.heardAboutItn | inputSelected }}

//returns Brother or Sister, Friend or Acquaintance 
```

# c - if (true) 的目的

> ID：14514466
> 
> 赞同：3
> 
> 时间：2013-01-25T02:37:09.827
> 
> 标签：c, if-statement

我见过一些这样写的代码：

```
if (true) {
... // do something
} 
```

你为什么想做这样的事情？这个结构有什么特别之处吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:41:12.253

几乎任何现代编译器都会对此进行优化。我的猜测是，有人在开发过程中将其放在那里，以便他们轻松删除代码块（通过更改`true`为`false`），并且在完成时忘记或懒得删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T02:42:04.750

这是在测试/开发期间分割代码的众多方法之一。许多人可能会争论这是否是一种好的编码实践，但它可以是一种快速方便地划分代码的方法。它也是执行要测试的复杂条件语句之后的代码的快速方法。

可能可以像这样使用它：

```
/* if (my_comlex_or_rare_conditional_case) then */
if (true) then
{
 lots of code here....
} /*End if */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T02:43:25.437

有时我已经添加`true ||`或`false &&`在条件内强制它执行分支并测试代码 - 但仅限于开发期间。您发布的代码不需要 if 条件。

# java - 使用空值对数组进行排序

> ID：14514467
> 
> 赞同：18
> 
> 时间：2013-01-25T02:37:14.777
> 
> 标签：java, arrays

我有一个程序允许用户从数组中删除一个元素，我正在尝试使用 compareTo() 按字母顺序对它们进行排序；通过一个 for 循环。但是，空值给我带来了问题。例如具有空值的数组：

```
String[] myArray = {"Apple", "Banana", null, "Durian", null, null, "Grapes"}; 
```

当 Java 比较它们并读取空值时，它会给我一个 NullPointerException。

有什么方法可以让这个数组在后面用空值排序？例如：

```
{"Apple", "Banana", "Durian", "Grapes", null, null, null} 
```

我知道使用向量可以解决问题，但我只是好奇是否有任何方法可以在不将数组更改为向量的情况下做到这一点。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-25T04:27:27.900

尝试这个

```
 Arrays.sort(myArray, new Comparator<String>() {
        @Override
        public int compare(String o1, String o2) {
            if (o1 == null && o2 == null) {
                return 0;
            }
            if (o1 == null) {
                return 1;
            }
            if (o2 == null) {
                return -1;
            }
            return o1.compareTo(o2);
        }}); 
```

它产生所需的订单

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T02:40:04.130

编写自己的`Comparator`接受空值的比较器，并将比较器传递给`Arrays.sort(`) 方法

# android - 如何不再获取整数数组

> ID：14514470
> 
> 赞同：1
> 
> 时间：2013-01-25T02:37:24.527
> 
> 标签：android, button

我在做问答。我的问题随机生成，但问题再次重复。

当 int 数组随机生成时，我使用 txt 文件作为我的数据库，我的持有者得到我数据库中的字符串行。应该是 int array = x 和 string line = y; {y==x}。我的问题是当我再次产生问题时，我应该怎么做伙计们？

```
 private void question() {

          InputStreamReader inputStream = new InputStreamReader
            (getResources().openRawResource(R.raw.question1));
            BufferedReader br = new BufferedReader(inputStream);

            ArrayList<Integer> ar= new ArrayList<Integer>();
            int[] number= {1,2,3,4,5,6,7,8,9,10};
            for (int i : number) {
                ar.add(i);

            }

            Random r = new Random();

            int select = r.nextInt(ar.size());
            int random = ar.get(select);
               ar.remove(select);               
            String theLine="";
            int lineCtr = 0;

            try {          

            while ((theLine = br.readLine()) != null)   {

            if (lineCtr == select) {    

        StringTokenizer st = new   StringTokenizer(theLine,",");
            while(st.hasMoreTokens())

        {   

            //reading and getting data from the database","
                         String a = st.nextToken();
                         String b = st.nextToken();
                         String c = st.nextToken();
                         String d = st.nextToken();
                         String e = st.nextToken();
                         String f = st.nextToken();

                         //button setText
                         question.setText(a);
                         ca.setText(f);
                         firstbutton.setText(e);
                         secondbutton.setText(d);
                         thirdbutton.setText(b);
                         fourthbutton.setText(c);
                     //assigning
                         firstholder =e;
                 secondholder =d;
                 thirdholder=b;
                 fourthholder =c;
                break;

                     }

                  }lineCtr++;

            }  

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:50:54.620

您是否尝试过以下代码来解决重复问题：-

```
Collections.shuffle(Arrays.asList(number)); 
```

# php - session_register 工作，但 $_SESSION 没有：/

> ID：14514472
> 
> 赞同：0
> 
> 时间：2013-01-25T02:37:38.193
> 
> 标签：php, mysql

> **可能重复：**
> [session_register 和 $_SESSION[] 之间的区别](https://stackoverflow.com/questions/8692086/difference-between-session-register-and-session)

这可能听起来很奇怪，但我的问题是：

如果用户输入有效的登录详细信息，我将获取用户的 ip 地址和 id 并放入：

```
 $_SESSION['ip']=$_SERVER['REMOTE_ADDR']; 
```

和：

```
$_SESSION['id']; 
```

并重定向到welcome.php 我检查会话是否已经开始：

```
if(!isset($_SESSION['id'])&&!isset($_SESSION['ip'])) {...redirect to error page..} 
```

问题是如果用户输入有效的详细信息，他不会被重定向到welcome.php。

我将 $_SESSION['id'] 更改为 session_register("id"); 一切正常。

所有这些都在我的本地 xampp 服务器上。我不想使用 session_register 因为它在较新版本的 php 中已被弃用，并且不推荐使用。

那么请问，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:39:16.297

`session_register`隐式调用`session_start`，这将`$_SESSION`起作用。`session_start`在访问之前明确调用`$_SESSION`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:39:44.493

您应该在使用启动会话之前调用`session_start`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T02:42:09.883

我会将 if 语句放在登录页面本身以立即捕获信息。

# javascript - 控制定位

> ID：14514474
> 
> 赞同：1
> 
> 时间：2013-01-25T02:38:00.360
> 
> 标签：javascript, google-maps-api-3

我有一个控件，我正在使用 google maps v3 添加到地图中，目前它看起来像这样：

![在此处输入图像描述](../Images/ede0e4aaaaa61f11587ac541d1b54667.png)

看看右边的箭头是怎么出到一边的？

我目前正在使用以下代码添加它：

```
// Create a div to hold the control.
var controlDiv = document.createElement('div');
var controlUI = document.createElement('button');
controlUI.id = "out";
controlUI.innerHTML = "<i class='icon-chevron-right'></i>";
controlDiv.appendChild(controlUI);

Maps.map.controls[google.maps.ControlPosition.TOP_LEFT].push(controlDiv); 
```

它有CSS ...

```
#out {position:relative;top:5px;right:0;float:right;border:1px #aaa solid;border-left:0;padding:2px 4px;-webkit-border-top-right-radius: 2px;-webkit-border-bottom-right-radius: 2px;-moz-border-radius-topright: 2px;-moz-border-radius-bottomright: 2px;border-top-right-radius: 2px;border-bottom-right-radius: 2px;} 
```

但是位置显然有点偏了。如何使默认控件向下移动以适应自定义控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:12:54.837

为了让我自己更轻松一些，我建议你也这样做，就是将控件移到另一边，它不会伤害任何人。而且我相信它看起来好多了。

为此，只需将其添加到您的地图选项中

```
mapTypeControl: false,
panControl:true,
panControlOptions: {
    position: google.maps.ControlPosition.RIGHT_TOP
},
zoomControl:true,
zoomControlOptions: {
    position: google.maps.ControlPosition.RIGHT_TOP
},
streetViewControl:true,
streetViewControlOptions: {
    position: google.maps.ControlPosition.RIGHT_TOP
}, 
```

# asp.net - GridView 组合框上的更新未更新

> ID：14514476
> 
> 赞同：0
> 
> 时间：2013-01-25T02:38:13.880
> 
> 标签：asp.net, entity-framework

我正在尝试将 DropDownList(DDL) 与我的实体数据源绑定。GridView(GV) 绑定到与 DDL 不同的 EntityDataSource。GV 的 EntityDataSource 具有用于关系的导航属性“Bag”。在编辑模式下，我可以选择不同的项目，但它不会更新该记录的数据库。我确实将*包含*用于 EntityDataSource 中的导航。我确定接线不正确。到目前为止，我已经尝试过没有运气的搜索。谢谢您的帮助。

```
<asp:TemplateField HeaderText="Bag">
  <ItemTemplate >
    <asp:Label ID="lbEditBag" Text='<%#Eval("Bag.Item1") %>' runat="server" />
  </ItemTemplate>
  <EditItemTemplate >
    <asp:DropDownList runat="server" ID="ddlBags" DataSourceID="edsBags" DataTextField="Amount" DataValueField="BagId" />
  </EditItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T22:40:48.207

DonA，如果你还没有找到你的答案，我会解释我做了什么来做一些类似于你之后我相信的事情。

在网格视图中，我有各种 asp:TempleteField，一个是这样的：-

```
<ItemTemplate>
   <asp:Label ID="lblActive" runat="server" Text='<%# Bind("Active") %>'></asp:Label>
</ItemTemplate>
<EditItemTemplate>
<%--<asp:TextBox ID="txtboxActive" runat="server" Text='<%# Bind("Active") %>'     Width="20px" TextMode="SingleLine" CssClass="textboxEdit"></asp:TextBox>--%>
<asp:DropDownList ID="activeDDL" CausesValidation="False" AutoPostBack="False"     runat="server">                      <asp:ListItem Text="No" Value="0"></asp:ListItem>
<asp:ListItem Text="Yes" Value="1" Selected="True"></asp:ListItem>
   </asp:DropDownList>
</EditItemTemplate> 
```

如您所见，在 EditItemTemplete 中有两个下拉列表项（我也留下了与您的代码类似的代码，用于绑定到 DDL 值的数据库，但我不再使用，因此被注释掉了）

然后在 ID、runat="server"、DataKeyNames 等旁边

```
<asp:Gridview ID=""... 
```

我有

```
OnRowUpdated="info_GridView_RowUpdated" 
```

然后在我的 SQL 函数后面的 C# 代码中运行，以使用 DDL 中的设置更新数据库表，就像这样（我还放入了一些其他的 Gridview.Databind() 来重置我的其他网格视图）

```
protected void info_GridView_RowUpdated(object sender, GridViewUpdatedEventArgs e)
{
    // The update operation was successful. Retrieve the row being edited.
    int index = info_GridView.EditIndex;
    GridViewRow row = info_GridView.Rows[index];
    int itemID = Convert.ToInt32(row.Cells[4].Text); // Cells[4] is only one available as others are being edited!

    // update Active value in the database //
    comm = new SqlCommand("UPDATE Products SET Active=@active WHERE ItemID=@itemID", objConn);
    comm.Parameters.AddWithValue("@active", ddlValue); // this stores DDL value in database
    comm.Parameters.AddWithValue("@itemID", itemID);// Convert.ToInt32(propertyRefTextBox.Text));

    objConn.Open();
    comm.ExecuteNonQuery();
    objConn.Close();

              // force update and reset selectedIndex of other gridviews //
    Category_GridView.DataBind();
    editImages_GridView.DataBind();

    Category_GridView.SelectedIndex = -1;
    editImages_GridView.SelectedIndex = -1; 
```

}

希望以上有所帮助。

特雷夫。

# ios - 如何在“@”位置更改颜色

> ID：14514477
> 
> 赞同：1
> 
> 时间：2013-01-25T02:38:17.187
> 
> 标签：ios, twitter

我试图找到如何实现像twitter一样的效果，当点击**@Xoangle**时，**Xoangle**会改变颜色并有一个点击事件。

我搜索了一下，有人告诉我在 @ 位置添加一个 UIbutton。

但是我应该如何获得@的确切位置？我想知道我尝试使用UIbutton替换@的正确方向，它可以实现吗？或者还有其他方法。

感谢您抽出宝贵时间提出我的低级问题，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:55:16.150

我想你可以看看 OHAttributedLabel：[https](https://github.com/AliSoftware/OHAttributedLabel) ://github.com/AliSoftware/OHAttributedLabel ，它可以很好地为你工作。

# html - 如何从 HTML 页面中删除长的水平滚动条

> ID：14514478
> 
> 赞同：2
> 
> 时间：2013-01-25T02:38:22.270
> 
> 标签：html, css, twitter-bootstrap, scrollbar, browser-scrollbars

我正在使用 twitter bootstrap 启动一个项目，但是我遇到了一个问题。水平方向有一个长的空滚动条。我找不到问题，有谁知道是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T02:41:39.777

```
<style>
body {
  overflow-x: hidden !important;
}
body > * {
  max-width: 100% !important;
}
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T02:41:37.090

```
media="all"
style.css:1@media (min-width: 1200px)

.container, 
.navbar-static-top .container, 
.navbar-fixed-top .container, 
.navbar-fixed-bottom .container {
    width: 1270px;
} 
```

改成

```
.container, 
.navbar-static-top .container,
.navbar-fixed-top .container, 
.navbar-fixed-bottom .container {
    width:auto;
} 
```

或者删除`container`底部地图上的类，`container`用于包装内容，不应包装到其他`container`. 容器也将占据全宽。

> 在 a 中的任意位置放置一个`.container`，它设置您的站点和内容的宽度。

'*引导文档*'

查看[模板](http://twitter.github.com/bootstrap/examples/hero.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T05:31:16.227

希望这可以帮助 ！！

1）在标题中添加以下内容以启用响应功能

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

2) 如果您使用的是**容器流体**

正确使用`row-fluid`和`span`喜欢：

```
<div class="container-fluid">
<div class="row-fluid">
    <div class="span2">
        <!--Sidebar content-->
    </div>
    <div class="span10">
        <!--Body content-->
    </div>
</div> 
```

这里可能有一些标签错误..

3）忘记在body中添加overflow-x hidden。

```
body {
    overflow-x: hidden;
} 
```

**[关联](http://twitter.github.com/bootstrap/scaffolding.html)**

# c# - Windows Phone 上诺基亚音乐音轨的详细信息？

> ID：14514486
> 
> 赞同：0
> 
> 时间：2013-01-25T02:39:56.993
> 
> 标签：c#, .net, windows-phone-7

在 Windows Phone 上使用诺基亚音乐或任何其他音频流应用程序时，是否有任何方法可以检测正在播放的曲目，就像您可以在本地播放普通音频文件一样（通过音乐+视频中心），通过 MediaPlayer 对象？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-27T04:30:19.167

> Windows Phone 上的任何其他音频流应用程序

你绝对可以用[我的音频流应用程序](http://www.windowsphone.com/en-us/store/app/skyfm/dbdac8ef-03d0-4986-bd05-edb433c5aace)做到这一点。当它在后台播放某些内容时，按音量增大或减小按钮，您将看到正在播放的歌曲的艺术家和标题：

![在此处输入图像描述](../Images/67f3ad312f4ebbc455967705d24cb544.png)

# android - 安卓4.0。通话记录 - 安全异常

> ID：14514487
> 
> 赞同：2
> 
> 时间：2013-01-25T02:39:59.637
> 
> 标签：android

```
String[] projection = new String[] {
   CallLog.Calls._ID, 
   CallLog.Calls.CACHED_NAME, 
   CallLog.Calls.DATE, 
   CallLog.Calls.DURATION, 
   CallLog.Calls.NUMBER, 
   CallLog.Calls.TYPE 
};

Cursor cursor = this.getContentResolver().query(
       android.provider.CallLog.Calls.CONTENT_URI, projection, null, null, null
); 
```

我想从 android 通话记录中获取应用程序的通话记录。目前我一直在开发 android 4.0 版本。我尝试了上面的代码，它会生成以下异常。这是什么原因？我已将`<uses-permission android:name="android.permission.READ_CONTACTS" />`权限标签放置在清单文件中。

```
01-19 21:25:52.819: E/AndroidRuntime(3280): FATAL EXCEPTION: main
01-19 21:25:52.819: E/AndroidRuntime(3280): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.phonelog/com.example.phonelog.MainActivity}: java.lang.SecurityException: Permission Denial: opening provider com.android.providers.contacts.CallLogProvider from ProcessRecord{41397ff8 3280:com.example.phonelog/u0a10053} (pid=3280, uid=10053) requires android.permission.READ_CALL_LOG or android.permission.WRITE_CALL_LOG
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.os.Looper.loop(Looper.java:137)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at java.lang.reflect.Method.invokeNative(Native Method)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at java.lang.reflect.Method.invoke(Method.java:511)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at dalvik.system.NativeStart.main(Native Method)
01-19 21:25:52.819: E/AndroidRuntime(3280): Caused by: java.lang.SecurityException: Permission Denial: opening provider com.android.providers.contacts.CallLogProvider from ProcessRecord{41397ff8 3280:com.example.phonelog/u0a10053} (pid=3280, uid=10053) requires android.permission.READ_CALL_LOG or android.permission.WRITE_CALL_LOG
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.os.Parcel.readException(Parcel.java:1425)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.os.Parcel.readException(Parcel.java:1379)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.app.ActivityManagerProxy.getContentProvider(ActivityManagerNative.java:2530)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.app.ActivityThread.acquireProvider(ActivityThread.java:4460)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.app.ContextImpl$ApplicationContentResolver.acquireUnstableProvider(ContextImpl.java:2002)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.content.ContentResolver.acquireUnstableProvider(ContentResolver.java:1101)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.content.ContentResolver.query(ContentResolver.java:356)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.content.ContentResolver.query(ContentResolver.java:315)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at com.example.phonelog.MainActivity.onCreate(MainActivity.java:32)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.app.Activity.performCreate(Activity.java:5104)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-19 21:25:52.819: E/AndroidRuntime(3280):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-19 21:25:52.819: E/AndroidRuntime(3280):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T02:42:11.880

就像错误跟踪说的那样：

```
requires android.permission.READ_CALL_LOG or android.permission.WRITE_CALL_LOG 
```

您还需要添加

```
<uses-permission android:name="android.permission.READ_CALL_LOG" /> 
```

或者

```
<uses-permission android:name="android.permission.WRITE_CALL_LOG" /> 
```

到您在 AndroidManifest 中的权限使用列表。

当然，如果你只是在阅读，你不应该同时设置 WRITE 权限 - READ 就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-27T16:03:25.813

此错误说，“我无法读取和写入您收到的通话记录，我需要从 CallLogProvider 读取和写入通话记录的权限”，CallLog 提供程序包含有关拨打和接听电话的信息。

现在您应该向清单添加**WRITE_CALL_LOG**权限，如果您遇到这样的错误，

> java.lang.SecurityException: Permission Denial: 从 ProcessRecord{42931860 15578:com.hirecraft.jugunoo.passenger/u0a10095} (pid=15578, uid=10095) 打开提供程序 com.android.providers.contacts.CallLogProvider 需要 android.permission。 READ_CALL_LOG 或 android.permission.WRITE_CALL_LOG

```
<uses-permission android:name="android.permission.WRITE_CALL_LOG" /> 
```

否则，您应该在清单中添加**READ_CALL_LOG**权限，如果您遇到这样的错误，

> java.lang.SecurityException：权限拒绝：从 pid=16013、uid=10095 读取 com.android.providers.contacts.CallLogProvider uri content://call_log/calls 需要 android.permission.READ_CALL_LOG 或 grantUriPermission()

```
<uses-permission android:name="android.permission.WRITE_CALL_LOG" /> 
```

# ruby-on-rails - 使用会话编辑配置文件时设计错误

> ID：14514488
> 
> 赞同：1
> 
> 时间：2013-01-25T02:40:00.183
> 
> 标签：ruby-on-rails, ruby, web-applications, devise

我正在开发一个应用程序，该应用程序具有多个需要用户登录才能访问的区域。（我正在使用逻辑设计）。

我目前在我的应用程序控制器中使用以下内容来记住目标 url（某人单击的链接（需要身份验证）），以便在身份验证后将用户带到那里（根据[How to direct user to a specific page after logging在设计和 Rails 中](https://stackoverflow.com/questions/13129254/how-to-direct-user-to-a-specific-page-after-logging-in-with-devise-and-rails)）。

```
class ApplicationController < ActionController::Base
  helper :content
  protect_from_forgery

  def after_sign_in_path_for(user)
    origin_path = session[:origin_path]
    default_redirect_path ="/"
    clear_origin_path
    if origin_path.present?
      origin_path
    else
      params[:target].presence || default_redirect_path
    end
  end

  private

  def authenticate_user!
    store_origin_path
    super
  end

    def store_session
    store_origin_path

  end

  def store_origin_path
    session[:origin_path] = request.fullpath
  end

  def clear_origin_path
    session[:origin_path] = nil
  end

end 
```

这一切都很好，但我刚刚注意到，当我尝试访问“/users/edit”时，我现在得到了错误：

```
ArgumentError in Devise::RegistrationsController#edit

wrong number of arguments (1 for 0)
Rails.root: /home/james/*******

Application Trace | Framework Trace | Full Trace
app/controllers/application_controller.rb:19:in `authenticate_user!'
Request

Parameters:

None
Show session dump

_csrf_token: "XmrTSQOQ3Z0XTSn14LAX8LtMNVOwM4q3bQ+UhxjvgGM="
session_id: "2caaccc944774f2a7ac6f440c2f442d9"
user_return_to: "/my_tendersave"
warden.user.user.key: ["User", [1], "$2a$10$foTK/Em72/E0rILIuUv7su"]
warden.user.user.session: {"last_request_at"=>2013-01-25 01:48:43 UTC}
Show env dump

GATEWAY_INTERFACE: "CGI/1.2"
HTTP_ACCEPT: "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
HTTP_ACCEPT_CHARSET: "ISO-8859-1,utf-8;q=0.7,*;q=0.3"
HTTP_ACCEPT_ENCODING: "gzip,deflate,sdch"
HTTP_ACCEPT_LANGUAGE: "en-GB,en-US;q=0.8,en;q=0.6"
REMOTE_ADDR: "127.0.0.1"
SERVER_NAME: "localhost"
SERVER_PROTOCOL: "HTTP/1.1"
Response

Headers:

None 
```

我能做些什么来确保它有效？

我需要更改应用程序控制器吗？

或覆盖其他一些设计方法。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T02:24:54.863

我只是重命名了应用程序控制器中的方法并调用了正确的超类方法。

IE。

```
 def authenticated_user!
    store_origin_path
    authenticate_user!
  end 
```

# php - 到目前为止，它只是忽略了 if 语句并给他们一张票 everytime.php、mysql、If else

> ID：14514498
> 
> 赞同：2
> 
> 时间：2013-01-25T02:41:20.803
> 
> 标签：php, mysql

好的，所以我试图将值放入一个数组中并将它们随机排列，然后让它在查询中使用该随机值。我知道我的代码很糟糕，不要再使用`mysql`了，请远离这个话题。我不明白为什么这不起作用我还有其他类似的东西可以正常工作。现在它会忽略 if 语句并每次都给他们一张票。

```
if(isset($_POST['Submit'])) {

    $ticket = array("0","0","0","0","0","0","0","1");
    shuffle($ticket);

    if ($ticket >= 1) {
        echo "You have Found a Shop Ticket!" ;
        mysql_query("UPDATE users SET ticket=ticket+1 WHERE username = '".$_SESSION['username']."'") 
            or die(mysql_error());
    } else {
        echo "";
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T02:43:42.533

您正在检查整个数组是否 >= 1，这显然始终为 TRUE。

选择一个值：

```
$ticket = array_shift($ticket); // do this after you shuffle 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T02:45:35.447

尝试

```
if (current(shuffle($ticket)) >= 1) {
    # yay
} else {
    # ney
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T02:56:35.343

$ticket 是一个数组，而不是一个数字。你可以使用 foreach 或 array_map 来做到这一点。例子：

```
function foo($n){
    if($n >= 1){//do something}
}
$ticket = array("0","0","0","0","0","0","0","1");
shuffle($ticket);
array_map('foo', $ticket); 
```

# ios - MWFeedParser 删除嵌入式媒体 URL - iOS

> ID：14514508
> 
> 赞同：0
> 
> 时间：2013-01-25T02:42:24.523
> 
> 标签：ios, objective-c, rss

我有以下网址的页面源信息，如下所示：http: [//feeds.feedburner.com/thecarconnection/porsche](http://feeds.feedburner.com/thecarconnection/porsche)

```
 <description>&lt;img src='http://images.thecarconnection.com/tmb/2013-porsche-panamera-platinum-edition_100405984_t.gif'/&gt; Best known for its legendary two-door sports cars, Porsche has branched out to the SUV and sedan fields in recent years. The company's first four-door car, the Porsche Panamera, has set tongues wagging and hearts yearning with its blend of unconventional style and blazing performance. While the Panamera range spans a broad scope, it competes...&lt;img src="http://feeds.feedburner.com/~r/thecarconnection/porsche/~4/_LggPvmEzJ4" height="1" width="1"/&gt;</description> 
```

我想从描述中删除 'img src='http://images.thecarconnection.com/tmb/2013-porsche-panamera-platinum-edition_100405984_t.gif'' 链接。我正在使用 MWFeedParser 将 URL 解析为描述的一部分。关于删除描述标签中链接的方法有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T14:57:58.417

您可以尝试使用此代码段，使用`NSRegularExpression`：

```
NSString *description = ...;
NSError *error = NULL;

NSRegularExpression *regex = [NSRegularExpression
        regularExpressionWithPattern:@"\\&lt;img src='[^']*' */\\&gt;"
        options:NSRegularExpressionCaseInsensitive error:&error];

NSString *modifiedDescription = [regex stringByReplacingMatchesInString:description
           options:0
           range:NSMakeRange(0, [description length])
           withTemplate:@""]; 
```

# pug - Jade mixin 需要额外的元素

> ID：14514513
> 
> 赞同：0
> 
> 时间：2013-01-25T02:43:20.910
> 
> 标签：pug, codekit

**这可以编译**，但如果我在最后删除`div`，它会引发错误。我正在使用 codekit 进行编译。我没有得到什么？为什么这很`div`重要？

```
mixin ListItemDetail(labels,values)
    .listItemSection
        .listItemDetailWrap
            .listItemDetail #{labels[0]} :
            .listItemDetail &nbsp;#{values[0]}
        .listItemDetailWrap
            .listItemDetail #{labels[1]} :
            .listItemDetail &nbsp;#{values[1]}
        .listItemDetailWrap
            .listItemDetail #{labels[2]} :
            .listItemDetail &nbsp;#{values[2]}

mixin ListItem()
    .listItem
        .listItemSection
            h2 48 barrels of Kansas Common by 00/00/0000
            small Ellsworth County, Kasas, 38.4500&deg; N 96.5333&deg; W

        mixin ListItemDetail(['Start Date', 'End Date', 'Pickup Deadline'], ['00/00/0000',  '00/00/0000',   '00/00/0000'])
        mixin ListItemDetail(["Bulletin",   "Grade",    "Join Deadline"],   ["Plains",      "Light Crude",  "00/00/0000"])
        mixin ListItemDetail(["API",        "BS&W",     "Sulfur"],          ["48&deg;",     "4%",           "0.1%"])        

        div 
```

如果缺少最后一个，这是代码包日志中发生的错误`div`：

```
/Applications/CodeKit.app/Contents/Resources/engines/jade/lib/runtime.js:173
  throw err;
        ^
Error: /Users/isaac/Radiant/DemandPoint/dpe-grails/web-app/jade/Elements/ListItem.jade:23
    21|         mixin ListItemDetail(["API",        "BS&W",     "Sulfur"],          ["48&deg;",     "4%",           "0.1%"])        
    22| 
  > 23| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:14:06.810

你的代码对我来说很好。但是，在您的示例代码中，您没有使用 mixin `ListItem`。也许某些缩进是错误的。您甚至可以简化代码并使用[迭代](https://github.com/visionmedia/jade#iteration)：

```
mixin ListItemDetail(labels,values)
  each label,i in labels
    .listItemSection
      .listItemDetailWrap
        .listItemDetail #{label} :
        .listItemDetail &nbsp;#{values[i]}

mixin ListItem
  .listItem
    .listItemSection
      h2 48 barrels of Kansas Common by 00/00/0000
      small Ellsworth County, Kasas, 38.4500&deg; N 96.5333&deg; W

    mixin ListItemDetail(['Start Date', 'End Date', 'Pickup Deadline'], ['00/00/0000',  '00/00/0000',   '00/00/0000'])
    mixin ListItemDetail(["Bulletin",   "Grade",    "Join Deadline"],   ["Plains",      "Light Crude",  "00/00/0000"])
    mixin ListItemDetail(["API",        "BS&W",     "Sulfur"],          ["48&deg;",     "4%",           "0.1%"])

mixin ListItem // use your mixin here 
```

# spring - Spring JDO 配置解析错误

> ID：14514520
> 
> 赞同：3
> 
> 时间：2013-01-25T02:43:57.980
> 
> 标签：spring, validation, config, jdo

我有一个弹簧测试用例，注释如下

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:conf/allocadia-base.xml", "classpath:META-INF/jdoconfig.xml"}) 
```

我的 jdoconfig 是

```
<?xml version="1.0" encoding="utf-8"?>
<jdoconfig xmlns="http://java.sun.com/xml/ns/jdo/jdoconfig"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:noNamespaceSchemaLocation="http://java.sun.com/xml/ns/jdo/jdoconfig"> 
```

当我运行测试时，我得到

```
java.lang.IllegalStateException: Failed to load ApplicationContext 
.  
. 
.  
Caused by: org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 4 in XML document from class path resource [META-INF/jdoconfig.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'jdoconfig'. 
```

如果我将 jdoconfig 更改为

```
<jdoconfig xmlns="http://java.sun.com/xml/ns/jdo/jdoconfig"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://java.sun.com/xml/ns/jdo/jdoconfig http://java.sun.com/xml/ns/jdo/jdoconfig_2_3.xsd"> 
```

错误是

> 引起：org.springframework.beans.factory.parsing.BeanDefinitionParsingException：配置问题：无法找到 XML 模式命名空间的 Spring NamespaceHandler [http://java.sun.com/xml/ns/jdo/jdoconfig] 违规资源：类路径资源 [META-INF/jdoconfig.xml]

我使用最新的 spring 3.2 和 JDO 2.3-e

当我将应用程序部署到 tomcat 时，该应用程序运行良好我在尝试运行测试时遇到此错误

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T18:03:39.880

您的 jdoconfig.xml 包含不正确的 url。试试这个：

```
xsi:schemaLocation="http://java.sun.com/xml/ns/jdo/jdoconfig http://java.sun.com/xml/ns/jdo/jdoconfig_3_0.xsd" 
```

[使用不正确的 url 验证 jdoconfig](https://stackoverflow.com/questions/6042475/validating-jdoconfig-with-incorrect-url)

[如何解决 jdoconfig.xml 中 xsi:noNamespaceSchemaLocation 上的验证错误](https://stackoverflow.com/questions/12654503/how-to-solve-validation-error-on-xsinonamespaceschemalocation-in-jdoconfig-xml)

# json - 如何从 Tumblr API (JSON) 中提取数据？

> ID：14514522
> 
> 赞同：9
> 
> 时间：2013-01-25T02:44:08.867
> 
> 标签：json, api, get, tumblr

我已经设置了一个 Tumblr 帐户并注册了我的应用程序以对其进行身份验证。

Tumblr 文档：[http ://www.tumblr.com/docs/en/api/v2](http://www.tumblr.com/docs/en/api/v2)

我理解 API 输出 JSON 是这样的：

```
{
   "meta": {
      "status": 200,
      "msg": "OK"
   },
   "response": {
      "blog": {
         "title": "David's Log",
         "posts": 3456,
         "name": "david",
         "url": "http:\/\/david.tumblr.com\/",
         "updated": 1308953007,
         "description": "<p><strong>Mr. Karp<\/strong> is tall and skinny, with
            unflinching blue eyes a mop of brown hair.\r\n
         "ask": true,
         "ask_anon": false,
         "likes": 12345
      }
   }
} 
```

很好，但是文档到此为止。我不知道如何获取这些信息并将其显示在我的网站上。

我想你会得到它的方式是这样的：

```
$.ajax({
    url: "http://api.tumblr.com/v2/blog/myblog.tumblr.com/info?api-key=myapikey",
    dataType: 'jsonp',
    success: function(results){
        console.log(results);
    }
}); 
```

但这无济于事。

谁能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T02:58:11.967

`results`现在是您可以用来引用 JSON 结构的对象。当您 console.log 结果对象时，它应该出现在 Javascript 开发人员控制台中，您可以在其中探索对象树。

## 响应对象

因此，当您的成功回调收到响应时，您应该可以使用以下内容：

`results.meta.status`=> 200

`results.meta.msg`=> “好的”

`results.response.title`=> “大卫的日志”

`results.response.posts`=> 3456

`results.response.name`=> “大卫”

`results.response.url`=>“ [http://david.tumblr.com/](http://david.tumblr.com/) ”

`results.response.updated`=> 1308953007

`results.response.description`=> " `<p><strong>Mr. Karp</strong>..`"

`results.response.ask`=> 真

`results.response.ask_anon`=> 假的

`results.response.likes`=> 12345

* * *

## 写入页面

如果您真的想看到写入页面的内容，则需要使用修改 DOM 的函数，例如 document.write，或者，由于您使用的是 Jquery，$("#myDivId").html(results.write)响应。标题）；

试试这个：

*   `<div id="myDivId"></div>`在页面的某处添加，然后
*   添加`$("#myDivId").html(results.response.title);`你的成功回调函数

* * *

```
$.ajax({
    url: "http://api.tumblr.com/v2/blog/myblog.tumblr.com/info?api_key=myapikey",
    dataType: 'jsonp',
    success: function(results){
        // Logs to your javascript console.
        console.log(results); 
        // writes the title to a div with the Id "myDivId" (ie. <div id="myDivId"></div>)
        $("#myDivId").html(results.response.title); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:23:28.800

在问题代码中，请求类型未设置，并且被 tumblr 拒绝。jsonp 错误响应被打印出来。下面的代码正确地发出了 jsonp 请求。

关键是指定类型和数据类型。祝你好运快乐黑客。;-)

```
$.ajax({
    type:'GET',
    url: "http://api.tumblr.com/v2/blog/jdavidnet.tumblr.com/info",
    dataType:'jsonp',
    data: {
        api_key : "myapikey"
    },
    success:function(response){
        console.log(response, arguments);
    }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T03:14:56.463

将对象写入屏幕的一种方法是将包含其 JSON 表示的元素添加到页面：

```
$.ajax({
    url: "http://api.tumblr.com/v2/blog/myblog.tumblr.com/info?api-key=myapikey",
    dataType: 'jsonp',
    success: function(results){
        $("body").append(
            $("<pre/>").text(JSON.stringify(results, null, "    "))
        );
    }
}); 
```

这是一个演示：http: [//jsfiddle.net/MZR2Z/1/](http://jsfiddle.net/MZR2Z/1/)

# windows - 如何组合 Tkinter 窗口？

> ID：14514524
> 
> 赞同：3
> 
> 时间：2013-01-25T02:44:36.763
> 
> 标签：windows, python-2.7, tkinter, turtle-graphics

我有两组代码，第一部分是海龟图形窗口，第二部分是 Tkinter 窗口。我应该如何将这两个部分放在一个窗口中？

我的第一部分代码

```
from turtle import *

def move(thing, distance):
    thing.circle(250, distance)

def main():
    rocket = Turtle()
    ISS = Turtle()
    bgpic('space.gif')
    register_shape("ISSicon.gif")
    ISS.shape("ISSicon.gif")

    rocket.speed(10)
    ISS.speed(10)
    counter = 1
    title("ISS")
    screensize(750, 750)
    ISS.hideturtle()
    rocket.hideturtle()
    ISS.penup()
    ISS.left(90)
    ISS.fd(250)
    ISS.left(90)
    ISS.showturtle()
    ISS.pendown()
    rocket.penup()
    rocket.fd(250)
    rocket.left(90)
    rocket.showturtle()
    rocket.pendown()
    rocket.fillcolor("white")

    while counter == 1:
        move(ISS, 3)
        move(rocket, 4)

main() 
```

第二部分

```
from Tkinter import *

control=Tk()
control.title("Control")

control.geometry("200x550+100+50")
cline0=Label(text="").pack()
cline1=Label(text="Speed (km/s)").pack()

control.mainloop() 
```

非常感谢 ;）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T03:35:34.463

嗯，我不确定混合它们是否是个好主意。该`turtle`模块经常使用 `update`来自 Tcl 的命令，当在混合中添加更多涉及的代码时，这很可能会导致问题（显然`turtle`可以使用它很好）。无论如何，混合两者的一种方法是使用`RawTurtle`代替`Turtle`，因此您可以通过自己的`Canvas`来`turtle`调整它的需要。

这是一个示例（基本上，我还用无限重新调度替换了无限循环）：

```
import Tkinter
import turtle

def run_turtles(*args):
    for t, d in args:
        t.circle(250, d)
    root.after_idle(run_turtles, *args)

root = Tkinter.Tk()
root.withdraw()

frame = Tkinter.Frame(bg='black')
Tkinter.Label(frame, text=u'Hello', bg='grey', fg='white').pack(fill='x')
canvas = Tkinter.Canvas(frame, width=750, height=750)
canvas.pack()
frame.pack(fill='both', expand=True)

turtle1 = turtle.RawTurtle(canvas)
turtle2 = turtle.RawTurtle(canvas)

turtle1.ht(); turtle1.pu()
turtle1.left(90); turtle1.fd(250); turtle1.lt(90)
turtle1.st(); turtle1.pd()

turtle2.ht(); turtle2.pu()
turtle2.fd(250); turtle2.lt(90)
turtle2.st(); turtle2.pd()

root.deiconify()

run_turtles((turtle1, 3), (turtle2, 4))

root.mainloop() 
```

# ios - UIWebView 不加载本地网页

> ID：14514526
> 
> 赞同：1
> 
> 时间：2013-01-25T02:44:56.093
> 
> 标签：ios, objective-c, uiwebview, nsbundle

我有一个超级简单的网页，我只想加载一个本地文件。该文件是/Resources/About.html

这是我的代码：

```
NSString *urlPath = [[NSBundle mainBundle] URLForResource:@"About" withExtension:@"html"];
NSURL *url = [NSURL fileURLWithPath:urlPath];
NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
[webView loadRequest:urlRequest]; 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:22:19.503

该方法`URLForResource:withExtension`返回一个`NSURL`，而不是一个`NSString`。您可以直接在请求中使用该结果。

```
NSURL *URL = [[NSBundle mainBundle] URLForResource:@"About" withExtension:@"html"];
[webView loadRequest:[NSURLRequest requestWithURL:URL]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:59:15.667

```
NSString * urlPath = [[NSBundle mainBundle] pathForResource:@"About" ofType:@"html"];
NSString *content = [NSString urlPath encoding:NSUTF8StringEncoding error:nil];
[webView content baseURL:[NSURL urlPath]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T04:08:04.673

我打赌 URLForResource 正在返回`nil`（你能确认它不是吗？）。它不会执行递归搜索，并且如果您的“资源”文件夹是实际文件夹（XCode 中的蓝色）而不是组（Xcode 中的黄色），它将失败。尝试使用主包`resourceURL`并将路径附加到它的末尾。

# java - Hibernate 3.2.5 与 Play Framework 1.2.5

> ID：14514532
> 
> 赞同：1
> 
> 时间：2013-01-25T02:45:37.240
> 
> 标签：java, oracle, hibernate, playframework, playframework-1.x

我正在尝试将 Hibernate 3.2.5 与 Play 框架 1.2.5 一起使用

在休眠中，我有两个文件：

1) cfg.xml 文件（包含 db 配置详细信息**以及一些附加属性** 2) hbm.xml 文件（包含 java bean 和 db 表之间的映射

为了连接到 oracle 10g 数据库，我在 application.config 文件中提供了数据库详细信息，如下所示，当我启动服务器时连接也成功：

```
db.url=jdbc:oracle:thin:@localhost:1521/orcl
db.driver=oracle.jdbc.OracleDriver
db.user=system
db.pass=tiger 
```

我想知道我将在哪里放置 hbm.xml 文件（用于映射详细信息）和 cfg.xml 文件用于除 db 连接详细信息以外的其余属性？

请让我知道这件事。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:19:49.733

从应用程序的根目录开始：

*   `hibernate.cfg.xml`必须放在目录`app`中
*   定义模型类的映射文件（`hbm`文件），通常在`app/models/`目录中

在你`hibernate.cfg.xml`的`mapping`属性里面应该是这样的：

```
<mapping class="models.yourHmbFile1"/>
<mapping class="models.yourHmbFile2"/> 
```

[顺便说一句，我发现使用hibernate 注释](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/) 而不是 hbm - xml 映射很容易。更容易编写和维护。

如果您更喜欢对模型类进行注释，可以删除`hbm`文件并直接将带注释的类映射到`hibernate.cfg.xml`.

在`application.conf`你必须指定你已经添加的数据：

```
db.url=jdbc:oracle:thin:@localhost:1521/orcl
db.driver=oracle.jdbc.OracleDriver
db.user=system
db.pass=tiger 
```

同样在`hibernate.cfg.xml`您需要指定连接数据：

```
<property name="hibernate.dialect">...</property>
  <property name="hibernate.connection.driver_class">...</property>
  <property name="hibernate.connection.url">...</property>
  <property name="hibernate.connection.username">...</property>
  <property name="hibernate.connection.password">...</property> 
```

# c# - WinRt 中的同步授权

> ID：14514533
> 
> 赞同：1
> 
> 时间：2013-01-25T02:45:41.030
> 
> 标签：c#, windows-runtime, linq-to-twitter

我基本上是在尝试同步地为我的 WinRt 应用程序运行我的授权过程，但是我尝试过的所有操作似乎都会在 MainPage 上授权后使应用程序死锁，从而阻止导航到 HomePage。似乎无法弄清楚。这是我没有修改的代码，它在下面异步工作得很好。我怎样才能使这项工作同步：

班级：

```
public async void InitializeTwitterAsnc()
    {

        WinRtAuthorizer authorizer = null;

        authorizer = new WinRtAuthorizer()
        {
            Credentials = new LocalDataCredentials()
            {
                ConsumerKey = "blah379",
                ConsumerSecret = "blah123"
            },
            UseCompression = true,
            Callback = new Uri("http://blah.com")
        };

        if(!authorizer.IsAuthorized)
        {
            await authorizer.AuthorizeAsync();
        }

        // set the twitter credential fields
        await Task.Run
            (() =>
                 {
                     twitterName = authorizer.Credentials.ScreenName;
                     twitterId = authorizer.Credentials.UserId;
                     accessToken = authorizer.Credentials.AccessToken;
                     oAuthToken = authorizer.Credentials.OAuthToken;

                     this.TwitterContext = new TwitterContext(authorizer);
                 });
    } 
```

从 MainPage.xaml.cs 调用方法的代码：

```
private void StartTwitterLogin(object sender, RoutedEventArgs e)
    {
        // start the twitter authorization
        TwitterAuth twitAuth = new TwitterAuth();
        twitAuth.InitializeTwitterAsnc();

        this.Frame.Navigate(typeof (HomePage));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T23:25:54.940

你不能。异步 API 仅用于异步运行，如果您尝试强制线程等待结果 - 您通常会遇到死锁，因为 API 本身通常需要在您阻塞的线程上运行某些东西。您不应该试图与之抗争，而应该思考您要解决的实际问题是什么。

在您的情况下，您应该将方法的签名从

```
public async void InitializeTwitterAsnc() 
```

到

```
public async Task InitializeTwitterAsnc() 
```

这样就可以等待它，然后在这里等待它：

```
private async Task StartTwitterLogin(object sender, RoutedEventArgs e)
{
    // start the twitter authorization
    TwitterAuth twitAuth = new TwitterAuth();
    await twitAuth.InitializeTwitterAsnc();

    this.Frame.Navigate(typeof (HomePage));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T23:24:14.457

所以最终，我的解决方案是在异步 twitAuth.InitializeTwitterAsync() 方法中处理导航。为了使导航工作，我必须在 app.xaml.cs 中创建一个静态框架属性，我可以在我的自定义类中使用它来进行导航。请参阅此链接[WinRt 页面导航](https://stackoverflow.com/questions/14530912/winrt-page-navigaiton/14531069#comment20264087_14531069)。

# linux - 如何使用 linux 终端计算文件夹中的不同文件类型？

> ID：14514535
> 
> 赞同：4
> 
> 时间：2013-01-25T02:45:41.547
> 
> 标签：linux, shell, terminal

嘿，我对如何递归地计算文件夹中不同数量的文件类型/扩展名感到震惊。我还需要将它们打印到 .txt 文件中。

例如，我有 10 个 txt 的 20 个 .docx 文件混合在多个文件夹中。

帮我 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T02:53:26.127

```
find ./ -type f |awk -F . '{print $NF}' | sort | awk '{count[$1]++}END{for(j in count) print j,"("count[j]" occurences)"}' 
```

获取所有带有 的文件名`find`，然后用于`awk`获取扩展名，然后`awk`再次用于计算出现次数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:33:34.547

仅使用 bash：此代码所需的版本 4

```
#!/bin/bash
shopt -s globstar nullglob
declare -A exts

for f in * **/*; do
    [[ -f $f ]] || continue     # only count files
    filename=${f##*/}           # remove directories from pathname
    ext=${filename##*.}
    [[ $filename == $ext ]] && ext="no_extension"
    : ${exts[$ext]=0}           # initialize array element if unset
    (( exts[$ext]++ ))
done

for ext in "${!exts[@]}"; do
    echo "$ext ${exts[$ext]}"
done | sort -k2nr | column -t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-16T23:22:29.333

到目前为止，这似乎还没有解决，所以这是我计算文件并订购它们的距离：

```
find . -type f | sed -n 's/..*\.//p' | sort -f | uniq -ic 
```

# php - JavaScript 到 Drupal 模块

> ID：14514539
> 
> 赞同：0
> 
> 时间：2013-01-25T02:46:14.600
> 
> 标签：php, javascript, drupal, drupal-7

我正在尝试将 JavaScript 脚本实现到 Drupal 7 模块中，由于某种原因，我在这里不断收到此错误：“解析错误：语法错误，意外 T_ECHO，期待 ')'”

我已经尝试了几个小时，但我只是不知所措。任何帮助将不胜感激。

我的代码块缩进到最右边。其他代码是 Drupal 7 中模块的一部分，供您参考。

```
$node->content['actions'] = array(
      '#theme' => 'links',
      '#prefix' => '<div id="match-actions">',
      '#suffix' => '</div>',
      '#links' => _match_actions($node),
                    echo '<script type="text/javascript">'
                        , 'croll();'
                        , 'troll();'
                        , '</script>';
      '#attributes' => array(
        'class' => array('links', 'match-actions'),
      ),
      '#heading' => t('Match actions'),
      '#weight' => -10,
    ); 
```

我尝试插入的 JavaScript（正如您在上面的回声中看到的那样）是

```
function class_roll() {
    // Car Classes
    var classes = ["B", "A", "S", "R3", "R2", "R1"],
        classToUse = classes[Math.floor(Math.random() * classes.length)];
    document.getElementById("croll").innerHTML = classToUse ;
}

function track_roll() {

    var tracks = ["Clear Springs Circuit", "Festival North Circuit", "Beaumont Circuit", "Finley Dam Circuit", "Gladstone Circuit", "Clifton Valley Trail", "Gladstone Trail", "Red Rock Descent", "Red Rock Hill Climb"],
        trackToUse = tracks[Math.floor(Math.random() * tracks.length)];
    document.getElementById("troll").innerHTML = trackToUse ;
} 
```

我到底做错了什么？我一直在搜索 Stack 和整个网络，这使我能够尝试不同的语法，但我就是无法让它工作。我不是 JS 和 PHP 方面的专家，但我正在努力学习:)。再次，非常感谢任何帮助。

PS - 用 HTML 术语来说，我想做的是：

```
<p id="croll">Some text here</p>
<p id="troll">Some text here</p>
    <button onclick="class_roll(); track_roll();">Class Roll</button> 
```

但如果不是执行 onclick 类型的 PHP 操作，而是执行 onload 类型的事件，那就太好了，但它只会在第一次加载并停留在那里并保持静态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T02:57:48.510

您不能在数组中放置回声。

你应该能够做到：

```
$links = _match_actions($node);
$links[] = '<script type="text/javascript"> croll(); troll(); </script>'

$node->content['actions'] = array(
      '#theme' => 'links',
      '#prefix' => '<div id="match-actions">',
      '#suffix' => '</div>',
      '#links' => $links,
      '#attributes' => array(
        'class' => array('links', 'match-actions'),
      ),
      '#heading' => t('Match actions'),
      '#weight' => -10,
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:51:28.623

不会破坏 Drupal AJAX 之类的更好的方法是使用 Drupal 行为。

```
(function ($) {
  Drupal.behaviors.myModuleName = {
    attach : function (context, settings) {
       $(".match-actions", context).once('match-actions', function(){
         croll();
         troll();
       })
    }

  }
})(jQuery); 
```

将它放在一个 js 文件中并使用 drupal_add_js(drupal_get_path('module', '{my module name}') . '{js file name}');

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:59:58.803

正如 HorusKol 所说，您不能直接在模块内调用 JavaScript 函数。原因是模块是用 PHP 编写的，不能将其他编程语言的函数调用为一体。

如果你想插入 JavaScript 代码，你应该使用函数[drupal_add_js](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_add_js/7) () 来做到这一点。

因此，您可以将您的替换`echo`为以下内容：

```
echo drupal_add_js('croll();troll();','inline'); 
```

# android - Android：当 wal 存在时，在执行数据更新后复制 db 文件不起作用

> ID：14514540
> 
> 赞同：2
> 
> 时间：2013-01-25T02:46:16.997
> 
> 标签：android, database, copy

我有一个具有备份和恢复功能的应用程序。单击要备份的按钮会将 db 文件复制到外部存储。单击恢复按钮将从外部存储中获取文件（如果存在）并将其复制到应用程序中，并用备份数据库文件覆盖现有数据库。

我在对表执行更新时遇到了这个问题。用数据更新表后，更新数据的数据库不会复制到外部存储中，或者如果我在更新后尝试恢复，则不会复制文件。

保存项目时，打开数据库，然后调用以下函数执行更新，然后关闭数据库。

```
public void saveItem(int ItemID, int ItemNumber, String itemnote) 

{

        ContentValues args = new ContentValues();
        args.put("ItemNote", itemnote);
    mDb.update("Items", args, "ItemID =" + Item+" and ItemNumber ="+ItemNumber, null); 
```

}

更新发生后，是什么阻止了 db 文件被复制？

我正在使用以下代码将数据库备份导入应用程序。同样，这一切都在执行更新语句之前起作用。提前致谢。

importdb.setOnClickListener(new View.OnClickListener(){ public void onClick(View arg0) {

```
 final File DATA_DIRECTORY_DATABASE = getDatabasePath("MyDB");

            final File DATABASE_DIRECTORY = new File(Environment.getExternalStorageDirectory(),"/MyApp");
            final File IMPORT_FILE = new File(DATABASE_DIRECTORY,"MyDB");

            File exportFile = DATA_DIRECTORY_DATABASE;

            File importFile = IMPORT_FILE;

            try {
                exportFile.createNewFile();
                copyFile(importFile, exportFile);
                Log.i("Import", "Succesfull");

            } catch (IOException e) {
                e.printStackTrace();

            }       

        }

    });

private static void copyFile(File src, File dst) throws IOException {
    FileChannel inChannel = new FileInputStream(src).getChannel();
    FileChannel outChannel = new FileOutputStream(dst).getChannel();
    try {
        inChannel.transferTo(0, inChannel.size(), outChannel);
    } finally {
        if (inChannel != null)
            inChannel.close();
        if (outChannel != null)
            outChannel.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:57:46.010

我认为数据库版本没有改变，这就是代码无法正常工作的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T20:54:10.230

如果数据库连接没有关闭，那么数据库文件可能仍然被 SQLite 锁定；因此阻止其复制。

如果您使用多个线程，那么即使关闭数据库连接，SQLite 也有可能在第二个线程尝试复制它之前没有时间关闭数据库并释放锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T00:34:28.337

在对不同设备进行大量测试并查看日志文件之后。发现在某些设备上，数据库处于预写日志记录模式 (wal)。这不是所有设备，但在我的一个测试设备 HTC Droid Incredible 上，启用了 wal，而在 kindle fire 上未启用 wal。

在未启用 wal 的设备上，没有问题。在带有 wal 的设备上，数据的导入和导出无法正常工作，因为实际的 db 文件不是最新的，因为任何更改都驻留在 wal 文件中，并且在 wal 的检查点被命中之前不会提交到 db 文件。

为了确保导入和导出功能正常工作，我需要数据库包含最新的信息。为此，需要运行 sqlite 语句来执行 wal 检查点，该检查点会将所有信息提交到 db 文件。

在运行导出或导入功能之前，执行以下 sqlite 命令以启动检查点并清除 wal 并将更改提交到数据库。

PRAGMA wal_checkpoint

调用检查点后，功能正常工作

# dynamic - OpenGL (ES 2.0) 动态改变线宽

> ID：14514543
> 
> 赞同：3
> 
> 时间：2013-01-25T02:46:25.070
> 
> 标签：dynamic, opengl-es, width, line

我目前正在绘制我的模型，使用一吨的`GL_LINES`所有在一个统一的半径。我知道这`glLineWidth`会改变*所有*线的半径，但它们每个都应该有不同的半径。我想知道它是否可以使用`glLineWidth`（以不同的方式）或其他功能？我还应该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T04:48:58.767

将它们渲染为特殊构造的三角形条带。具体来说，将每个线段渲染为一对三角形以形成四边形，四边形的长度与线的长度相匹配，宽度与您的“半径”相匹配。然而，真正的技巧是模拟 GL_LINES，因为线段不一定必须相互连接。要在三角形条带的情况下执行此操作，您需要将三角形对与一个不会被渲染的零面积三角形连接起来（除非您的 OpenGL ES 实现不兼容）。

例如，假设我们在 2D 中（为简单起见；3D 几乎相同）假设您的一条线段具有端点 (x1,y1) 和 (x2,y2)，宽度为 W，如下所示。
![线段](../Images/6a218d400de3040f3ec369e7f524f3f0.png)
要将其替换为四边形，我们需要确定角的坐标，这需要一些数学知识。对于合适的二维向量类，`vec2`

```
vec2  p1(x1, y1);
vec2  p2(x2, y2);
vec2  v = p2 - p1;

v /= v.length();  // make it a unit vector

vec2  vp(-v.y, v.x);  // compute the vector perpendicular to v

vec2  v[4];

v[0] = p1 + W/2 * vp;
v[1] = p1 - W/2 * vp;
v[2] = p2 + W/2 * vp;
v[3] = p2 - W/2 * vp;    

// Load the v[] array into a vertex-buffer object 
```

这提供了将单线变成四边形的解决方案。*要将它们连接在一起，我们需要创建其中包含退化三角形*的三角形带。如果我们将其绘制为 using `glDrawElements`，我们可以构造一个简单的索引数组来执行此操作。假设我们如上所述将两条线转换为四边形，给我们顶点 v[0] ... v[7]。要将它们制成一个三角形条带，请制作一个索引列表

```
{ 0, 1, 2, 3, 3, 4, 5, 6, 7 } 
```

通过在列表中重复两次“3”，我们创建了一个新的三角形，将其他三角形连接在一起，但没有出现。如果重复四边形的最后一个顶点，则可以将整个 GL_LINES 集渲染为单个三角形条带。

# set - basic Tcl -- 打印变量的值

> ID：14514552
> 
> 赞同：3
> 
> 时间：2013-01-25T02:47:55.167
> 
> 标签：set, tcl, puts

我在 Tcl 中有以下脚本：

```
set val(a) 10
set val(b) 10
set val(n) expr{$val(a) * $val(b)} 
```

如何打印变量n的值？

```
puts $val(n) 
```

给了 `expr{10*10}` ，我需要看到 100....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T02:58:16.043

为了评估表达式并返回结果，您必须将`eval`命令放在方括号内，而不是尝试像函数一样调用它：

```
set val(n) [expr {$val(a) * $val(b)}]
puts $val(n) 
```

# ruby-on-rails - 如何在避免嵌套 nil 记录的情况下获取记录？

> ID：14514553
> 
> 赞同：0
> 
> 时间：2013-01-25T02:48:11.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用`acts_as_paranoid`逻辑删除。删除记录时。记录不会消失。它只是在“deleted_at”列中获取时间戳，这意味着已删除。

在我的模型中，

> 社区 has_many :topics

我获取了所有这样的主题

```
@topics = Topic.page(params[:page]).order("updated_at DESC") 
```

但是，当它显示其父社区已被删除的主题记录时，它会**出现路由错误。**

如何获取其父“社区”存在的所有主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:48:20.143

如果您的社区范围类似于

```
class Community
  def self.not_deleted
    where deleted_at: nil
  end
end 
```

然后你可以做

```
@topics = Topic.joins(:community).merge(Community.not_deleted).
  page(params[:page]).order("updated_at DESC") 
```

否则你可以做

```
@topics = Topic.joins(:community).where( community: { deleted_at: nil } ).
  page(params[:page]).order("updated_at DESC") 
```

# php - 应用程序中的 php 全局配置和设置

> ID：14514555
> 
> 赞同：1
> 
> 时间：2013-01-25T02:48:16.677
> 
> 标签：php, global-variables

我有一个文件“config.php”，它包含在我的程序开头（见下文）主文件运行`require 'config.php';`

配置文件

```
<?
global $config;
$config['tblist'] = 'pending'; 
$config['tbdone'] = 'checked';
$config['checkfreq'] = 24;
?> 
```

然后我创建一个新的页面对象

```
$page = new Page($name,$source); 
```

该页面对象中的一个函数我希望能够从配置中获取内容，但它似乎无法引用 $config。我放了全局 $config; 在正确的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:50:43.913

在函数中引用全局变量时，必须将它们声明为全局变量：

`global $config;`

这也很有趣： http: [//me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/](http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/)

> 没有办法声明变量。不存在的变量在首次使用时创建为空值。
> 
> 全局变量在使用之前需要一个全局声明。这是上述情况的自然结果，所以它是完全合理的，除了没有显式声明甚至无法读取全局变量——PHP 将悄悄地创建一个具有相同名称的局部变量。我不知道有类似范围问题的另一种语言。

公平地说，如果您启用了它们，它也会发出通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T02:52:42.990

`global $config`在使用变量之前放入函数内部。

有关示例，请参阅有关[变量范围的 PHP 手册。](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T02:51:38.923

你应该在函数中声明 $config 是全局变量

也许你需要[PHP 变量范围](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T02:54:57.283

在需要使用 $config 的函数中，你是不是先将 $config 声明为全局的？例如：

```
function foo() {
    global $config;

    $a = $config['tblist'];
    ....
} 
```

$config 只会在第一次声明时引用全局变量，否则它将引用本地范围内的变量。

您可以在此处找到有关全局变量的更多详细信息：[PHP Globals](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T02:55:17.050

您可以在 Page 对象中包含 $config ：

```
class Page
{
    protected $config;
    public function __construct($configPath)
    {
        include $configPath;
        $this->config=$config;
    }
} 
```

# java - 用 Java 呈现这个设计的好布局是什么？

> ID：14514556
> 
> 赞同：1
> 
> 时间：2013-01-25T02:48:19.587
> 
> 标签：java, swing, layout, jframe, jpanel

我是 Java 新手。我正在制作多人井字游戏作为测试。对于主菜单，我喜欢这样的布局： ![理想布局](../Images/95a1869165d0c4620cd2e82627bb0b92.png)

问题是，我不知道如何做到这一点。我已经`JFrame`准备好所有内容（按钮等），但一切都显得完全不合适。我试过`BoxLayout`, `GridLayout`,`FlowLayout`和其他几个，但没有结果。我整天为此头疼，任何帮助将不胜感激。

所以，如果你有任何推荐的布局，或者有任何提示可以让它工作，那就太好了:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T02:57:39.283

我会使用看起来像这样的嵌套布局：

![http://i.imgur.com/agGqAcW.png](../Images/99ae407f9b7c8a161e90494cf18493ec.png)

`GridBagLayout`对于更灵活的布局和`BoxLayout`排列一堆东西很有用。

# java - 如何在 Play 框架中执行查询（使用 Oracle 10g）

> ID：14514559
> 
> 赞同：1
> 
> 时间：2013-01-25T02:48:55.983
> 
> 标签：java, oracle, jdbc, playframework, playframework-1.x

我使用 Play Framework 1.2.5 从数据库 Oracle 10g 中获取一些数据的 JDBC 代码：

```
Connection conn = DB.getConnection();
PreparedStatement  stmt = null;
System.out.println(conn);
try {
    stmt = conn.prepareStatement("select dept_id from emp where emp_id = 11");
    ResultSet rs = stmt.executeQuery();
    while (rs.next()) {
        System.out.println("Dept Id: " + rs.getInt("dept_id"));
    }
} catch (SQLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

这种方法有效，但我很困惑：

如果我注释整个代码块并运行应用程序，那么我可以在控制台中看到消息，说明已与数据库建立连接。因此 ：

1) 上面的代码块是从 Oracle DB 获取数据的正确方法还是比这更好的方法？

2）在整个应用程序生命周期中，与数据库的连接是否会持续存在？

我是这方面的新手，因此苦苦挣扎:(

请让我知道锄头继续这个。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T19:10:10.753

您需要阅读播放 JPA 文档：[http ://www.playframework.org/documentation/1.2.5/jpa#finding](http://www.playframework.org/documentation/1.2.5/jpa#finding)

您的查询应如下所示：

```
Post.find("byTitle", "My first post").fetch();
Post.find("byTitleLike", "%hello%").fetch();
Post.find("byAuthorIsNull").fetch();
Post.find("byTitleLikeAndAuthor", "%hello%", connectedUser).fetch(); 
```

如果你需要做一个完整的查询，你可以在 find 中添加 JPA 代码：

```
Post.find(
    "select p from Post p, Comment c " +
    "where c.post = p and c.subject like ?", "%hop%"
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T14:36:07.517

1) 你的代码没问题，只要你在使用完 ResultSet、PreparedStatement 和 Connection 对象后关闭它们（close() 方法！）。本质上，您正在运行“本机查询”，而不是 Tom 推荐的 JPA/ORM 方法。两者各有优势，我建议你了解一下 JPA，看看哪一个最适合你的需求。

Play 中的原生查询还有另一个选项，使用较少的样板代码：JPA.em().createNativeQuery()。

2) DB.getConnection() 可能会转换为对连接池的调用，如果是这样，您无需担心连接的生命周期，只需确保在您没有时将其“归还”给池不再需要它，即 close() 我上面提到的所有对象。

# eclipse - 如何在eclipse（juno）中安装STS

> ID：14514562
> 
> 赞同：0
> 
> 时间：2013-01-25T02:49:19.567
> 
> 标签：eclipse

RT：安装网址：http://dist.springsource.com/milestone/TOOLS/update/e4.2

有没有简单的方法来安装它？

细节：

1.您的原始请求已被修改。2.无法完成安装，因为找不到一个或多个必需的项目。3.不能满足依赖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:45:31.677

打开**Eclipse Juno**
转到**Help -> Eclipse Marketplace...**
搜索 STS 并按**Install**

# mysql - MySQL SELECT with LIKE in java Servlet MySQL 错误

> ID：14514567
> 
> 赞同：1
> 
> 时间：2013-01-25T02:50:26.823
> 
> 标签：mysql, jdbc, prepared-statement, sql-like

我使用 Java 7 Servlet 和 Tomcat 7 作为服务器，使用 MySQL 作为数据库。我正在尝试对用户进行一些搜索，但是我的 SQL 中可能存在一些问题，任何人都可以看到问题吗？关键是 lasNameFragment 是姓氏的片段，我在姓氏中有这个片段的用户中搜索。列出没有 LIKE 的用户可以正常工作，因此问题必须在这两行中的某个地方。

```
preparedStatement = connection.prepareStatement("SELECT users.id AS id, login, name, lastname, password, sex, birth, info WHERE lastname LIKE ?;");
    preparedStatement.setString(1, "%" + lastNameFragment + "%"); 
```

错误：

```
com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE lastname LIKE '%Mot%'' at line 1 
```

Mot 是 lastnamefragment 的值，我得到表单搜索输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T02:52:19.353

您有一个 SELECT 和 WHERE 语句，但我没有看到 FROM 语句。

# c# - 自动生成可编译的 C# - 实现 INotifyPropertyChanged 的 包装类

> ID：14514571
> 
> 赞同：2
> 
> 时间：2013-01-25T02:50:44.123
> 
> 标签：c#, mvvm, inotifypropertychanged

如多篇文章所述，MVVM 涉及大量编写样板代码。很多快捷方式似乎提供运行时评估，但我想知道是否有一个免费实用程序使用反射来生成 c# 代码，即：

```
Class A
{
   int I {get;set;}
   ICollection C {get; set;}
} 
```

会给我一个文件或剪贴板，其中包含类似

```
Class ViewModelA : INotifyPropertyChanged
{
   readonly A _a;
   private ObservableCollection _c;
   ViewModelA(ClassA a)
   {
      _a=a;
      _c=new ObservableCollection(a.C);
   }
   int I
   {
      get {return _a.I;}
      set
      {
         (if _a.I != value)
         {
           _a.I = value;
           NotifyPropertyChanged("I");
         }
      }
   }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T05:19:57.623

[PropertyChanged.Fody](https://github.com/fody/propertychanged)是我用来处理这个问题的。

它已经从大多数 MVVM 框架中识别出基类，并调用适当的方法来进行通知。否则，它会找到任何实现 INPC 的类并为您转换它。

我更喜欢 Fody 而不是 PostSharp 的原因是 Fody 将 IL 添加到您的程序集中，然后自行清理，因此您不依赖 Fody 或任何其他程序集，并且您的代码是自包含的。PostSharp 只是添加拦截器，然后调用 PostSharp 库，然后返回到您添加的任何拦截器。这在运行时速度较慢，您需要依赖 PostSharp 库。

Plus Fody 是免费和开源的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T02:54:16.233

您可以使用在编译后修改 IL 的应用程序（如[PostSharp](http://www.sharpcrafters.com/)）或在运行时使用依赖注入来实现此效果（请参阅[INotifyPropertyChanged Ever 的最佳实现](http://www.hightech.ir/SeeSharp/Best-Implementation-Of-INotifyPropertyChange-Ever)）。前者实际上生成 IL（但不是免费的），后者不会更改您的 IL 或生成任何东西，而是拦截您的事件设置器并为您引发 PropertyChanged 事件。

顺便说一句，如果你在做 WPF MVVM，你应该检查 INPC 与依赖属性的性能。我已经看到时间表明后者要快得多。

# debugging - 如何使用 ollydbg 'Run trace' 临时创建的线程？

> ID：14514574
> 
> 赞同：1
> 
> 时间：2013-01-25T02:51:19.873
> 
> 标签：debugging, assembly, reverse-engineering, cracking, ollydbg

我有一个定期创建线程的进程。该线程通过套接字发送和接收信息。每次创建该线程时如何跟踪它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:40:20.883

用户 Ollydbg API Finder API 来自这里： [http ://tuts4you.com/download.php?view.24](http://tuts4you.com/download.php?view.24)

然后在 CreateThreadEx 或 CreateThread API 中放一个断点，然后转到堆栈跟踪窗口（CTRL + K）

找到 CreateThread 的调用者，你会找到它的参数，然后你可以找到正在传递给 CreateThread API 的函数，然后在该函数上放置断点并让 CreateThread API 完成（按 RUN），你将登陆该函数通过 CreateThread 创建，您可以对其进行分析。此外，如果您的线程是 dll，则在 LoadLibraryEx API 上放置断点。

# android - 如何在 Android App 中实现 Rate It 功能

> ID：14514579
> 
> 赞同：104
> 
> 时间：2013-01-25T02:51:44.853
> 
> 标签：android, google-play

我正在开发一个 Android 应用程序。其中一切正常。我的应用程序已准备好启动。但是我需要再实现一项功能。我需要显示一个弹出窗口，其中包含

`Rate It`和`Remind me later`

在这里，如果任何用户对市场上的应用程序进行评分，则弹出窗口不会消失。我在 Google 中搜索并找到了一个[链接](https://stackoverflow.com/a/5318824/1265724)。有了这个，我明白这是不可能知道的。所以我需要一个建议。

以前有人遇到过这种情况吗？如果是这样，是否有任何解决方案或替代方案？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2013-01-25T03:06:20.053

在某种程度上，我不久前实施了这一点。无法知道用户是否对应用进行了评分，以防止评分成为货币（一些开发人员可能会添加“评价此应用并在应用中免费获得某某”之类的选项）。

我编写的类提供了三个按钮，并配置了对话框，使其仅在应用程序启动后才显示`n`（如果用户以前使用过应用程序，则他们更有可能对应用程序进行评分。他们中的大多数不太可能甚至知道它在第一次运行时会做什么）：

```
public class AppRater {
    private final static String APP_TITLE = "App Name";// App Name
    private final static String APP_PNAME = "com.example.name";// Package Name

    private final static int DAYS_UNTIL_PROMPT = 3;//Min number of days
    private final static int LAUNCHES_UNTIL_PROMPT = 3;//Min number of launches

    public static void app_launched(Context mContext) {
        SharedPreferences prefs = mContext.getSharedPreferences("apprater", 0);
        if (prefs.getBoolean("dontshowagain", false)) { return ; }

        SharedPreferences.Editor editor = prefs.edit();

        // Increment launch counter
        long launch_count = prefs.getLong("launch_count", 0) + 1;
        editor.putLong("launch_count", launch_count);

        // Get date of first launch
        Long date_firstLaunch = prefs.getLong("date_firstlaunch", 0);
        if (date_firstLaunch == 0) {
            date_firstLaunch = System.currentTimeMillis();
            editor.putLong("date_firstlaunch", date_firstLaunch);
        }

        // Wait at least n days before opening
        if (launch_count >= LAUNCHES_UNTIL_PROMPT) {
            if (System.currentTimeMillis() >= date_firstLaunch + 
                    (DAYS_UNTIL_PROMPT * 24 * 60 * 60 * 1000)) {
                showRateDialog(mContext, editor);
            }
        }

        editor.commit();
    }   

    public static void showRateDialog(final Context mContext, final SharedPreferences.Editor editor) {
        final Dialog dialog = new Dialog(mContext);
        dialog.setTitle("Rate " + APP_TITLE);

        LinearLayout ll = new LinearLayout(mContext);
        ll.setOrientation(LinearLayout.VERTICAL);

        TextView tv = new TextView(mContext);
        tv.setText("If you enjoy using " + APP_TITLE + ", please take a moment to rate it. Thanks for your support!");
        tv.setWidth(240);
        tv.setPadding(4, 0, 4, 10);
        ll.addView(tv);

        Button b1 = new Button(mContext);
        b1.setText("Rate " + APP_TITLE);
        b1.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mContext.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + APP_PNAME)));
                dialog.dismiss();
            }
        });        
        ll.addView(b1);

        Button b2 = new Button(mContext);
        b2.setText("Remind me later");
        b2.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                dialog.dismiss();
            }
        });
        ll.addView(b2);

        Button b3 = new Button(mContext);
        b3.setText("No, thanks");
        b3.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if (editor != null) {
                    editor.putBoolean("dontshowagain", true);
                    editor.commit();
                }
                dialog.dismiss();
            }
        });
        ll.addView(b3);

        dialog.setContentView(ll);        
        dialog.show();        
    }
} 
```

集成类就像添加一样简单：

```
AppRater.app_launched(this); 
```

到您的活动。它只需要添加到整个应用程序中的一个 Activity 中。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-05-29T10:12:28.533

我的一个使用 DialogFragment：

```
public class RateItDialogFragment extends DialogFragment {
    private static final int LAUNCHES_UNTIL_PROMPT = 10;
    private static final int DAYS_UNTIL_PROMPT = 3;
    private static final int MILLIS_UNTIL_PROMPT = DAYS_UNTIL_PROMPT * 24 * 60 * 60 * 1000;
    private static final String PREF_NAME = "APP_RATER";
    private static final String LAST_PROMPT = "LAST_PROMPT";
    private static final String LAUNCHES = "LAUNCHES";
    private static final String DISABLED = "DISABLED";

    public static void show(Context context, FragmentManager fragmentManager) {
        boolean shouldShow = false;
        SharedPreferences sharedPreferences = getSharedPreferences(context);
        SharedPreferences.Editor editor = sharedPreferences.edit();
        long currentTime = System.currentTimeMillis();
        long lastPromptTime = sharedPreferences.getLong(LAST_PROMPT, 0);
        if (lastPromptTime == 0) {
            lastPromptTime = currentTime;
            editor.putLong(LAST_PROMPT, lastPromptTime);
        }

        if (!sharedPreferences.getBoolean(DISABLED, false)) {
            int launches = sharedPreferences.getInt(LAUNCHES, 0) + 1;
            if (launches > LAUNCHES_UNTIL_PROMPT) {
                if (currentTime > lastPromptTime + MILLIS_UNTIL_PROMPT) {
                    shouldShow = true;
                }
            }
            editor.putInt(LAUNCHES, launches);
        }

        if (shouldShow) {
            editor.putInt(LAUNCHES, 0).putLong(LAST_PROMPT, System.currentTimeMillis()).commit();
            new RateItDialogFragment().show(fragmentManager, null);
        } else {
            editor.commit();
        }
    }

    private static SharedPreferences getSharedPreferences(Context context) {
        return context.getSharedPreferences(PREF_NAME, 0);
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new AlertDialog.Builder(getActivity())
                .setTitle(R.string.rate_title)
                .setMessage(R.string.rate_message)
                .setPositiveButton(R.string.rate_positive, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + getActivity().getPackageName())));
                        getSharedPreferences(getActivity()).edit().putBoolean(DISABLED, true).commit();
                        dismiss();
                    }
                })
                .setNeutralButton(R.string.rate_remind_later, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dismiss();
                    }
                })
                .setNegativeButton(R.string.rate_never, new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        getSharedPreferences(getActivity()).edit().putBoolean(DISABLED, true).commit();
                        dismiss();
                    }
                }).create();
    }
} 
```

然后在`onCreate()`你的主要 FragmentActivity 中使用它：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...

    RateItDialogFragment.show(this, getFragmentManager());

} 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-08-13T22:29:18.533

## Java & Kotlin 解决方案（2020 年 Google 的应用内评论 API）：

[![在此处输入图像描述](../Images/e77f51b7b8158120500443f42642068e.png)](https://i.stack.imgur.com/noES8.png)

首先，在您的`build.gradle(app)`文件中，添加以下依赖项（[此处](https://developer.android.com/guide/playcore#java-kotlin)为完整设置）

```
dependencies {
    // This dependency is downloaded from the Google’s Maven repository.
    // So, make sure you also include that repository in your project's build.gradle file.
    implementation 'com.google.android.play:core:1.8.0'
} 
```

将此方法添加到您的`Activity`：

```
void askRatings() {
    ReviewManager manager = ReviewManagerFactory.create(this);
    Task<ReviewInfo> request = manager.requestReviewFlow();
    request.addOnCompleteListener(task -> {
        if (task.isSuccessful()) {
            // We can get the ReviewInfo object
            ReviewInfo reviewInfo = task.getResult();
            Task<Void> flow = manager.launchReviewFlow(this, reviewInfo);
            flow.addOnCompleteListener(task2 -> {
                // The flow has finished. The API does not indicate whether the user
                // reviewed or not, or even whether the review dialog was shown. Thus, no
                // matter the result, we continue our app flow.
            });
        } else {
            // There was some problem, continue regardless of the result.
        }
    });
} 
```

像任何其他方法一样调用它：

```
askRatings(); 
```

* * *

**Kotlin 代码可以在[这里找到](https://stackoverflow.com/a/63404029/12483095)**

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-25T03:57:36.260

我认为您尝试做的事情可能适得其反。

让人们更容易对应用程序进行评分通常是一个好主意，因为大多数人这样做是因为他们喜欢该应用程序。有传言说评级的数量会影响你的市场评级（尽管我几乎看不到这方面的证据）。骚扰用户进行评分 - 通过唠叨屏幕 - 可能会导致人们通过留下差评来清除唠叨。

添加直接评价应用程序的功能导致我的免费版本的数字评分略有下降，而我的付费应用程序则略有增加。对于免费应用程序，我的 4 星评分比我的 5 星评分增加了更多，因为那些认为我的应用程序很好但不是很好的人也开始给它评分。变化约为-0.2。对于付费，变化约为+0.1。我应该从免费版本中删除它，除非我喜欢得到很多评论。

我将评分按钮放入设置（首选项）屏幕，它不会影响正常操作。它仍然使我的评分率提高了 4 或 5 倍。我毫不怀疑，如果我试图唠叨我的用户进行评分，我会得到很多用户给我差评作为抗议。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-11-25T13:56:23.173

[AndroidRate](https://github.com/Vorlonsoft/AndroidRate)是一个库，可通过提示用户在使用几天后对应用进行评分来帮助您推广您的 Android 应用。

模块摇篮：

```
dependencies {
  implementation 'com.vorlonsoft:androidrate:1.0.8'
} 
```

MainActivity.java：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

  AppRate.with(this)
      .setStoreType(StoreType.GOOGLEPLAY) //default is GOOGLEPLAY (Google Play), other options are
                                          //           AMAZON (Amazon Appstore) and
                                          //           SAMSUNG (Samsung Galaxy Apps)
      .setInstallDays((byte) 0) // default 10, 0 means install day
      .setLaunchTimes((byte) 3) // default 10
      .setRemindInterval((byte) 2) // default 1
      .setRemindLaunchTimes((byte) 2) // default 1 (each launch)
      .setShowLaterButton(true) // default true
      .setDebug(false) // default false
      //Java 8+: .setOnClickButtonListener(which -> Log.d(MainActivity.class.getName(), Byte.toString(which)))
      .setOnClickButtonListener(new OnClickButtonListener() { // callback listener.
          @Override
          public void onClickButton(byte which) {
              Log.d(MainActivity.class.getName(), Byte.toString(which));
          }
      })
      .monitor();

  if (AppRate.with(this).getStoreType() == StoreType.GOOGLEPLAY) {
      //Check that Google Play is available
      if (GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(this) != ConnectionResult.SERVICE_MISSING) {
          // Show a dialog if meets conditions
          AppRate.showRateDialogIfMeetsConditions(this);
      }
  } else {
      // Show a dialog if meets conditions
      AppRate.showRateDialogIfMeetsConditions(this);
  }
} 
```

显示速率对话框的默认条件如下：

1.  应用程序比安装晚 10 天以上启动。通过更改`AppRate#setInstallDays(byte)`。
2.  应用程序启动超过 10 次。通过更改`AppRate#setLaunchTimes(byte)`。
3.  单击中性按钮后超过 1 天启动应用程序。通过更改`AppRate#setRemindInterval(byte)`。
4.  应用程序启动 X 次，X % 1 = 0。通过 更改`AppRate#setRemindLaunchTimes(byte)`。
5.  应用程序默认显示中性对话框（稍后提醒我）。通过更改`setShowLaterButton(boolean)`。
6.  指定按下按钮时的回调。与 的第二个参数相同的值`DialogInterface.OnClickListener#onClick`将在 的参数中传递`onClickButton`。
7.  设置`AppRate#setDebug(boolean)`将确保每次启动应用程序时都会显示评级请求。**此功能仅用于开发！**.

## 显示对话框的可选自定义事件要求

您可以为显示对话框添加额外的可选要求。每个需求都可以作为唯一的字符串添加/引用。您可以为每个此类事件设置最小计数（例如“action_performed”3 次，“button_clicked”5 次等）

```
AppRate.with(this).setMinimumEventCount(String, short);
AppRate.with(this).incrementEventCount(String);
AppRate.with(this).setEventCountValue(String, short); 
```

## 清除显示对话框标志

当您想再次显示对话框时，请调用`AppRate#clearAgreeShowDialog()`。

```
AppRate.with(this).clearAgreeShowDialog(); 
```

## 当按钮按下

打电话`AppRate#showRateDialog(Activity)`。

```
AppRate.with(this).showRateDialog(this); 
```

## 设置自定义视图

打电话`AppRate#setView(View)`。

```
LayoutInflater inflater = (LayoutInflater)this.getSystemService(LAYOUT_INFLATER_SERVICE);
View view = inflater.inflate(R.layout.custom_dialog, (ViewGroup)findViewById(R.id.layout_root));
AppRate.with(this).setView(view).monitor(); 
```

## 具体主题

您可以使用特定主题来扩充对话框。

```
AppRate.with(this).setThemeResId(int); 
```

## 自定义对话框

如果您想使用自己的对话框标签，请在您的应用程序上覆盖字符串 xml 资源。

```
<resources>
    <string name="rate_dialog_title">Rate this app</string>
    <string name="rate_dialog_message">If you enjoy playing this app, would you mind taking a moment to rate it? It won\'t take more than a minute. Thanks for your support!</string>
    <string name="rate_dialog_ok">Rate It Now</string>
    <string name="rate_dialog_cancel">Remind Me Later</string>
    <string name="rate_dialog_no">No, Thanks</string>
</resources> 
```

## 检查 Google Play 是否可用

```
if (GoogleApiAvailability.getInstance().isGooglePlayServicesAvailable(this) != ConnectionResult.SERVICE_MISSING) {

} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-08-28T09:40:10.963

确保执行以下内容 对于应用内评论：

```
implementation 'com.google.android.play:core:1.8.0' 
```

创建时

```
public void RateApp(Context mContext) {
    try {
        ReviewManager manager = ReviewManagerFactory.create(mContext);
        manager.requestReviewFlow().addOnCompleteListener(new OnCompleteListener<ReviewInfo>() {
            @Override
            public void onComplete(@NonNull Task<ReviewInfo> task) {
                if(task.isSuccessful()){
                    ReviewInfo reviewInfo = task.getResult();
                    manager.launchReviewFlow((Activity) mContext, reviewInfo).addOnFailureListener(new OnFailureListener() {
                        @Override
                        public void onFailure(Exception e) {
                            Toast.makeText(mContext, "Rating Failed", Toast.LENGTH_SHORT).show();
                        }
                    }).addOnCompleteListener(new OnCompleteListener<Void>() {
                        @Override
                        public void onComplete(@NonNull Task<Void> task) {
                            Toast.makeText(mContext, "Review Completed, Thank You!", Toast.LENGTH_SHORT).show();
                        }
                    });
                }

            }
        }).addOnFailureListener(new OnFailureListener() {
            @Override
            public void onFailure(Exception e) {
                Toast.makeText(mContext, "In-App Request Failed", Toast.LENGTH_SHORT).show();
            }
        });
    } catch (ActivityNotFoundException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-04-22T15:05:18.900

该解决方案与上述解决方案非常相似。唯一的区别是您将能够在每次启动和天数时延迟评级对话框的提示。如果按下稍后提醒我按钮，那么我将延迟弹出窗口 3 天和 10 次启动。对于那些选择对其进行评分的人也是如此，但是延迟时间更长（不要这么快打扰用户，以防他实际上已经对应用程序进行了评分。可以将其更改为不再显示，那么您将不得不根据您的喜好更改代码）。希望它可以帮助某人！

```
public class AppRater {
    private final static String APP_TITLE = "your_app_name";
    private static String PACKAGE_NAME = "your_package_name";
    private static int DAYS_UNTIL_PROMPT = 5;
    private static int LAUNCHES_UNTIL_PROMPT = 10;
    private static long EXTRA_DAYS;
    private static long EXTRA_LAUCHES;
    private static SharedPreferences prefs;
    private static SharedPreferences.Editor editor;
    private static Activity activity;

    public static void app_launched(Activity activity1) {
        activity = activity1;

        Configs.sendScreenView("Avaliando App", activity);

        PACKAGE_NAME = activity.getPackageName();

        prefs = activity.getSharedPreferences("apprater", Context.MODE_PRIVATE);
        if (prefs.getBoolean("dontshowagain", false)) 
            return;

        editor = prefs.edit();

        EXTRA_DAYS = prefs.getLong("extra_days", 0);
        EXTRA_LAUCHES = prefs.getLong("extra_launches", 0);

        // Increment launch counter
        long launch_count = prefs.getLong("launch_count", 0) + 1;
        editor.putLong("launch_count", launch_count);

        // Get date of first launch
        Long date_firstLaunch = prefs.getLong("date_firstlaunch", 0);
        if (date_firstLaunch == 0) {
            date_firstLaunch = System.currentTimeMillis();
            editor.putLong("date_firstlaunch", date_firstLaunch);
        }

        // Wait at least n days before opening
        if (launch_count >= (LAUNCHES_UNTIL_PROMPT + EXTRA_LAUCHES))
            if (System.currentTimeMillis() >= date_firstLaunch + (DAYS_UNTIL_PROMPT * 24 * 60 * 60 * 1000) + EXTRA_DAYS)
                showRateDialog();

        editor.commit();
    }   

    public static void showRateDialog() {
        final Dialog dialog = new Dialog(activity);
        dialog.setTitle("Deseja avaliar o aplicativo " + APP_TITLE + "?");

        LinearLayout ll = new LinearLayout(activity);
        ll.setOrientation(LinearLayout.VERTICAL);
        ll.setPadding(5, 5, 5, 5);

        TextView tv = new TextView(activity);
        tv.setTextColor(activity.getResources().getColor(R.color.default_text));
        tv.setText("Ajude-nos a melhorar o aplicativo com sua avaliação no Google Play!");
        tv.setWidth(240);
        tv.setGravity(Gravity.CENTER);
        tv.setPadding(5, 5, 5, 5);
        ll.addView(tv);

        Button b1 = new Button(activity);
        b1.setTextColor(activity.getResources().getColor(R.color.default_text));
        b1.setBackground(activity.getResources().getDrawable(R.drawable.rounded_blue_box));
        b1.setTextColor(Color.WHITE);
        b1.setText("Avaliar aplicativo " + APP_TITLE + "!");
        b1.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Configs.sendHitEvents(Configs.APP_RATER, Configs.CATEGORIA_ANALYTICS, "Clique", "Avaliar", activity);

                activity.startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("market://details?id=" + PACKAGE_NAME)));
                delayDays(60);
                delayLaunches(30);
                dialog.dismiss();
            }
        });        
        ll.addView(b1);
        LinearLayout.LayoutParams params = (LinearLayout.LayoutParams) b1.getLayoutParams();
        params.setMargins(5, 3, 5, 3);
        b1.setLayoutParams(params);

        Button b2 = new Button(activity);
        b2.setTextColor(activity.getResources().getColor(R.color.default_text));
        b2.setBackground(activity.getResources().getDrawable(R.drawable.rounded_blue_box));
        b2.setTextColor(Color.WHITE);
        b2.setText("Lembre-me mais tarde!");
        b2.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Configs.sendHitEvents(Configs.APP_RATER, Configs.CATEGORIA_ANALYTICS, "Clique", "Avaliar Mais Tarde", activity);
                delayDays(3);
                delayLaunches(10);
                dialog.dismiss();
            }
        });
        ll.addView(b2);
        params = (LinearLayout.LayoutParams) b2.getLayoutParams();
        params.setMargins(5, 3, 5, 3);
        b2.setLayoutParams(params);

        Button b3 = new Button(activity);
        b3.setTextColor(activity.getResources().getColor(R.color.default_text));
        b3.setBackground(activity.getResources().getDrawable(R.drawable.rounded_blue_box));
        b3.setTextColor(Color.WHITE);
        b3.setText("Não, obrigado!");
        b3.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Configs.sendHitEvents(Configs.APP_RATER, Configs.CATEGORIA_ANALYTICS, "Clique", "Não Avaliar", activity);

                if (editor != null) {
                    editor.putBoolean("dontshowagain", true);
                    editor.commit();
                }
                dialog.dismiss();
            }
        });
        ll.addView(b3);
        params = (LinearLayout.LayoutParams) b3.getLayoutParams();
        params.setMargins(5, 3, 5, 0);
        b3.setLayoutParams(params);

        dialog.setContentView(ll);        
        dialog.show();        
    }

    private static void delayLaunches(int numberOfLaunches) {
        long extra_launches = prefs.getLong("extra_launches", 0) + numberOfLaunches;
        editor.putLong("extra_launches", extra_launches);
        editor.commit();
    }

    private static void delayDays(int numberOfDays) {
        Long extra_days = prefs.getLong("extra_days", 0) + (numberOfDays * 1000 * 60 * 60 * 24);
        editor.putLong("extra_days", extra_days);
        editor.commit();
    }
} 
```

按钮具有特定的颜色和背景。背景如这个xml文件所示：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:padding="10dp"
    android:shape="rectangle" >

    <solid android:color="#2E78B9" />

    <corners
        android:bottomLeftRadius="6dp"
        android:bottomRightRadius="6dp"
        android:topLeftRadius="6dp"
        android:topRightRadius="6dp" />

</shape> 
```

资料来源：[“评价我的应用程序”的 Android 方法](https://stackoverflow.com/questions/6482783/android-approach-for-rate-my-application/6920848#6920848)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-01-14T12:37:52.617

使用这个库，简单易行.. [https://github.com/hotchemi/Android-Rate](https://github.com/hotchemi/Android-Rate)

通过添加依赖..

```
dependencies {
  compile 'com.github.hotchemi:android-rate:0.5.6'
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-09-14T05:45:50.777

截至 2020 年 8 月，Google Play 的应用内评论 API 可用，并且根据此[答案](https://stackoverflow.com/a/63404057/8411356)，其直接实施是正确的。

但是，如果您希望在其上添加一些显示逻辑，请使用[Five-Star-Me](https://github.com/numerative/Five-Star-Me)库。

在 MainActivity的方法中设置启动时间和安装天数`onCreate`来配置库。

```
 FiveStarMe.with(this)
      .setInstallDays(0) // default 10, 0 means install day.
      .setLaunchTimes(3) // default 10
      .setDebug(false) // default false
      .monitor(); 
```

然后将以下方法调用放在任何活动/片段的 onCreate / onViewCreated 方法上，以在满足条件时显示提示。

```
FiveStarMe.showRateDialogIfMeetsConditions(this); //Where *this* is the current activity. 
```

[![在此处输入图像描述](../Images/66d31dfbf27b3d7dc1d59b52cab5f72b.png)](https://i.stack.imgur.com/B2Nhf.gif)

安装说明：

**您可以从 jitpack 下载。**

第 1 步：将其添加到项目（根）build.gradle。

```
allprojects {
  repositories {
    ...
    maven { url 'https://jitpack.io' }
  }
} 
```

第 2 步：将以下依赖项添加到您的模块（应用程序）级别的 build.gradle。

```
dependencies {
  implementation 'com.github.numerative:Five-Star-Me:2.0.0'
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-08-13T11:41:45.667

我正在使用这个简单的解决方案。您可以使用 gradle 添加此库： [https ://github.com/fernandodev/easy-rating-dialog](https://github.com/fernandodev/easy-rating-dialog)

```
compile 'com.github.fernandodev.easyratingdialog:easyratingdialog:+' 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-01-22T05:50:48.783

### 现在您可以使用[Google 的 In App Rating 功能](https://developer.android.com/guide/playcore/in-app-review)。

**[这是 Kotlin/Java 集成官方指南](https://developer.android.com/guide/playcore/in-app-review/kotlin-java#java)**

> Google Play 应用内评论 API 可让您提示用户提交 Play 商店评分和评论，而无需离开您的应用或游戏。
> 
> 通常，应用内审核流程（见图 1）可以在应用的整个用户旅程中随时触发。在流程中，用户可以使用 1 到 5 星系统对您的应用程序进行评分并添加可选评论。提交后，评论将发送到 Play 商店并最终显示。

[![sc](../Images/8f4501778b0c59b777b40588186fc1fb.png)](https://i.stack.imgur.com/hjZWC.jpg)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-01-25T03:02:43.120

正如您从已链接的其他帖子中看到的那样，应用程序无法知道用户是否留下了评论。并且有充分的理由。

想一想，如果一个应用程序可以判断用户是否留下了评论，开发人员可以限制某些功能，这些功能只有在用户留下 5/5 评分时才会解锁。这将导致 Google Play 的其他用户不信任评论并破坏评级系统。

我见过的替代解决方案是，每当应用打开特定次数或设定的时间间隔时，应用都会提醒用户提交评分。例如，应用程序每打开 10 次，就要求用户留下评分并提供“已经完成”和“稍后提醒我”按钮。如果用户选择稍后提醒他/她，请继续显示此消息。其他一些应用程序开发人员会以越来越长的间隔显示此消息（例如，应用程序打开的第 5、10、15 次），因为如果用户没有在应用程序打开的第 100 次时留下评论，则很可能他/她不会留下一个。

这个解决方案并不完美，但我认为这是你目前最好的。它确实使您信任用户，但意识到替代方案可能对应用市场中的每个人都意味着更糟糕的体验。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-03-27T10:41:43.093

Raghav Sood 答案的 Kotlin 版本

**评分者.kt**

```
 class Rater {
      companion object {
        private const val APP_TITLE = "App Name"
        private const val APP_NAME = "com.example.name"

        private const val RATER_KEY = "rater_key"
        private const val LAUNCH_COUNTER_KEY = "launch_counter_key"
        private const val DO_NOT_SHOW_AGAIN_KEY = "do_not_show_again_key"
        private const val FIRST_LAUNCH_KEY = "first_launch_key"

        private const val DAYS_UNTIL_PROMPT: Int = 3
        private const val LAUNCHES_UNTIL_PROMPT: Int = 3

        fun start(mContext: Context) {
            val prefs: SharedPreferences = mContext.getSharedPreferences(RATER_KEY, 0)
            if (prefs.getBoolean(DO_NOT_SHOW_AGAIN_KEY, false)) {
                return
            }

            val editor: Editor = prefs.edit()

            val launchesCounter: Long = prefs.getLong(LAUNCH_COUNTER_KEY, 0) + 1;
            editor.putLong(LAUNCH_COUNTER_KEY, launchesCounter)

            var firstLaunch: Long = prefs.getLong(FIRST_LAUNCH_KEY, 0)
            if (firstLaunch == 0L) {
                firstLaunch = System.currentTimeMillis()
                editor.putLong(FIRST_LAUNCH_KEY, firstLaunch)
            }

            if (launchesCounter >= LAUNCHES_UNTIL_PROMPT) {
                if (System.currentTimeMillis() >= firstLaunch +
                    (DAYS_UNTIL_PROMPT * 24 * 60 * 60 * 1000)
                ) {
                    showRateDialog(mContext, editor)
                }
            }

            editor.apply()
        }

        fun showRateDialog(mContext: Context, editor: Editor) {
            Dialog(mContext).apply {
                setTitle("Rate $APP_TITLE")

                val ll = LinearLayout(mContext)
                ll.orientation = LinearLayout.VERTICAL

                TextView(mContext).apply {
                    text =
                        "If you enjoy using $APP_TITLE, please take a moment to rate it. Thanks for your support!"

                    width = 240
                    setPadding(4, 0, 4, 10)
                    ll.addView(this)
                }

                Button(mContext).apply {
                    text = "Rate $APP_TITLE"
                    setOnClickListener {
                        mContext.startActivity(
                            Intent(
                                Intent.ACTION_VIEW,
                                Uri.parse("market://details?id=$APP_NAME")
                            )
                        );
                        dismiss()
                    }
                    ll.addView(this)
                }

                Button(mContext).apply {
                    text = "Remind me later"
                    setOnClickListener {
                        dismiss()
                    };
                    ll.addView(this)
                }

                Button(mContext).apply {
                    text = "No, thanks"
                    setOnClickListener {
                        editor.putBoolean(DO_NOT_SHOW_AGAIN_KEY, true);
                        editor.commit()
                        dismiss()
                    };
                    ll.addView(this)
                }

                setContentView(ll)
                show()
            }
        }
    }
} 
```

优化答案

**评分者.kt**

```
class Rater {
    companion object {
        fun start(context: Context) {
            val prefs: SharedPreferences = context.getSharedPreferences(RATER_KEY, 0)
            if (prefs.getBoolean(DO_NOT_SHOW_AGAIN_KEY, false)) {
                return
            }

            val editor: Editor = prefs.edit()

            val launchesCounter: Long = prefs.getLong(LAUNCH_COUNTER_KEY, 0) + 1;
            editor.putLong(LAUNCH_COUNTER_KEY, launchesCounter)

            var firstLaunch: Long = prefs.getLong(FIRST_LAUNCH_KEY, 0)
            if (firstLaunch == 0L) {
                firstLaunch = System.currentTimeMillis()
                editor.putLong(FIRST_LAUNCH_KEY, firstLaunch)
            }

            if (launchesCounter >= LAUNCHES_UNTIL_PROMPT) {
                if (System.currentTimeMillis() >= firstLaunch +
                    (DAYS_UNTIL_PROMPT * 24 * 60 * 60 * 1000)
                ) {
                    showRateDialog(context, editor)
                }
            }

            editor.apply()
        }

        fun showRateDialog(context: Context, editor: Editor) {
            Dialog(context).apply {
                setTitle("Rate $APP_TITLE")
                LinearLayout(context).let { layout ->
                    layout.orientation = LinearLayout.VERTICAL
                    setDescription(context, layout)
                    setPositiveAnswer(context, layout)
                    setNeutralAnswer(context, layout)
                    setNegativeAnswer(context, editor, layout)
                    setContentView(layout)
                    show()       
                }
            }
        }

        private fun setDescription(context: Context, layout: LinearLayout) {
            TextView(context).apply {
                text = context.getString(R.string.rate_description, APP_TITLE)
                width = 240
                setPadding(4, 0, 4, 10)
                layout.addView(this)
            }
        }

        private fun Dialog.setPositiveAnswer(
            context: Context,
            layout: LinearLayout
        ) {
            Button(context).apply {
                text = context.getString(R.string.rate_now)
                setOnClickListener {
                    context.startActivity(
                        Intent(
                            Intent.ACTION_VIEW,
                            Uri.parse(context.getString(R.string.market_uri, APP_NAME))
                        )
                    );
                    dismiss()
                }
                layout.addView(this)
            }
        }

        private fun Dialog.setNeutralAnswer(
            context: Context,
            layout: LinearLayout
        ) {
            Button(context).apply {
                text = context.getString(R.string.remind_later)
                setOnClickListener {
                    dismiss()
                };
                layout.addView(this)
            }
        }

        private fun Dialog.setNegativeAnswer(
            context: Context,
            editor: Editor,
            layout: LinearLayout
        ) {
            Button(context).apply {
                text = context.getString(R.string.no_thanks)
                setOnClickListener {
                    editor.putBoolean(DO_NOT_SHOW_AGAIN_KEY, true);
                    editor.commit()
                    dismiss()
                };
                layout.addView(this)
            }
        }
    }
} 
```

**常量.kt**

```
object Constants {

    const val APP_TITLE = "App Name"
    const val APP_NAME = "com.example.name"

    const val RATER_KEY = "rater_key"
    const val LAUNCH_COUNTER_KEY = "launch_counter_key"
    const val DO_NOT_SHOW_AGAIN_KEY = "do_not_show_again_key"
    const val FIRST_LAUNCH_KEY = "first_launch_key"

    const val DAYS_UNTIL_PROMPT: Int = 3
    const val LAUNCHES_UNTIL_PROMPT: Int = 3

} 
```

**字符串.xml**

```
<resources>
    <string name="rate_description">If you enjoy using %1$s, please take a moment to rate it. Thanks for your support!</string>
    <string name="rate_now">Rate now</string>
    <string name="no_thanks">No, thanks</string>
    <string name="remind_later">Remind me later</string>
    <string name="market_uri">market://details?id=%1$s</string>
</resources> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-08-26T11:56:30.967

Android 推出了新的应用内评论系统，开发者可以在不离开应用的情况下询问 Play 商店评论。

要查看设计指南以及何时显示审核卡，请参阅官方文档

> [https://developer.android.com/guide/playcore/in-app-review](https://developer.android.com/guide/playcore/in-app-review)

**实施：**

*   在 build.gradle 文件中添加 play-core 库作为依赖项。

> ```
> implementation 'com.google.android.play:core:1.8.0' 
> ```

*   创建一个**ReviewManager**实例并请求**ReviewInfo**对象。ReviewInfo 对象被预先缓存，然后可以触发**“launchReviewFlow”**向用户呈现评论卡。

    ```
     private var reviewInfo: ReviewInfo? = null

     val manager = ReviewManagerFactory.create(context)

     val request = manager.requestReviewFlow()

     requestFlow.addOnCompleteListener { request ->
         if (request.isSuccessful) {
             //Received ReviewInfo object
             reviewInfo = request.result
         } else {
             //Problem in receiving object
             reviewInfo = null
         }

     reviewInfo?.let {
         val flow = reviewManager.launchReviewFlow(this@MainActivity, it)
         flow.addOnCompleteListener {
             //Irrespective of the result, the app flow should continue
         }
     } 
    ```

> 注意：建议在用户充分体验您的应用或游戏后显示评论流程。

**何时请求应用内评论：**

*   在用户充分体验您的应用或游戏以提供有用的反馈后，触发应用内评论流程。
*   不要过度提示用户进行评论。这种方法有助于最大程度地减少用户的挫败感并限制 API 的使用（请参阅配额部分）。
*   您的应用程序不应在显示评分按钮或卡片之前或期间向用户提出任何问题，包括有关他们意见的问题（例如“您喜欢该应用程序吗？”）或预测性问题（例如“您会给这个应用程序打 5 星吗？ ”）。

**测试之前的几点：**

*   在测试新功能时，大多数情况下我们会创建一个具有新 ApplicationId 的新项目，确保您提供的 ApplicationId 已经发布并在 Play 商店中可用。

*   如果您过去曾为您的应用提供过反馈，则应用内评论 API 的**launchReviewFlow**将不会显示任何**评论卡**。它只是触发一个成功事件。

*   由于配额限制，调用 launchReviewFlow 方法可能并不总是显示对话框。它不应与任何点击事件相关联。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-08-29T18:39:23.620

所有这些库都不是本文中问题的解决方案。这个库只是在 google play 上打开一个应用程序的网页。相反，这个 Play 核心库有更一致的接口。

所以我认为这是问题所在，ProGuard：它模糊了一些类 [https://stackoverflow.com/a/63650212/10117882](https://stackoverflow.com/a/63650212/10117882)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-03-11T16:04:58.690

我使用应用内评论系统和计数器的简单方法。

```
import android.content.Context
import androidx.core.content.edit
import java.util.concurrent.TimeUnit

object Rater {
    private const val DAYS_UNTIL_PROMPT = 3L//Min number of days
    private const val LAUNCHES_UNTIL_PROMPT = 3//Min number of launches
    private const val RATER_KEY = "rater_key"
    private const val LAUNCH_COUNTER_KEY = "launch_counter_key"
    private const val FIRST_LAUNCH_KEY = "first_launch_key"

    fun Context.appRateCheck(dialog: () -> Unit) {
        val prefs = getSharedPreferences(RATER_KEY, 0)
        val launchesCounter = prefs.getLong(LAUNCH_COUNTER_KEY, 0) + 1
        prefs.edit { putLong(LAUNCH_COUNTER_KEY, launchesCounter) }

        var firstLaunch = prefs.getLong(FIRST_LAUNCH_KEY, 0)
        if (firstLaunch == 0L) {
            firstLaunch = System.currentTimeMillis()
            prefs.edit { putLong(FIRST_LAUNCH_KEY, firstLaunch) }
        }

        if (launchesCounter >= LAUNCHES_UNTIL_PROMPT) {
            if (System.currentTimeMillis() >= firstLaunch + TimeUnit.DAYS.toMillis(DAYS_UNTIL_PROMPT)) {
                dialog()
            }
        }
    }
} 
```

用法：

```
private val manager: ReviewManager by lazy { ReviewManagerFactory.create(context) }

private fun initInAppReview() {
    context?.appRateCheck {
        manager.requestReviewFlow().addOnSuccessListener {
            manager.launchReviewFlow(requireActivity(), it)
        }
    }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-09T10:25:09.770

您可以调用 Google In-App Review API。你不需要计算，因为谷歌会为你处理这个问题。如果之前有人给过星或评论，Google 将不会再显示此提示。

看看下面的代码片段。

1-) 首先添加导入 ReviewManagerFactory

```
import com.google.android.play.core.review.ReviewManagerFactory 
```

2-) 在适当的地点和时间添加下面的代码片段。

> 使用 ReviewInfo 实例启动应用内评论流程。等到用户完成应用内审核流程后，您的应用才会继续正常的用户流程

```
fun inAppReview() {
    val reviewManager = ReviewManagerFactory.create(this)
    val requestReviewFlow = reviewManager.requestReviewFlow()
    requestReviewFlow.addOnCompleteListener { request ->
        if (request.isSuccessful) {
            // We got the ReviewInfo object
            val reviewInfo = request.result
            val flow = reviewManager.launchReviewFlow(this, reviewInfo)
            flow.addOnCompleteListener {
                // Call back
            }
        } else {
            Log.d("Error: ", request.exception.toString())
            // There was some problem, continue regardless of the result.
        }
    }
} 
```

[谷歌文档：应用内评论](https://developer.android.com/guide/playcore/in-app-review/kotlin-java)

# java - 进行 REST URL 调用后如何在 JSP 页面中显示 JSON 响应

> ID：14514584
> 
> 赞同：1
> 
> 时间：2013-01-25T02:52:04.097
> 
> 标签：java, json, jsp, spring-mvc

我已经使用 JSP 制作了一个表单。我必须使用该表单创建一个 REST URL，然后在从表单创建该 URL 后，我需要使用 RestTemplate 访问该 URL 并获取响应。我能够从该网址获得回复。

**问题陈述：-**

当我将该网址复制粘贴到浏览器中时，我通常会收到 JSON 响应。那么除了我得到的字符串之外，有什么方法可以从该 URL 获得相同的 JSON 响应？目前我将其存储为字符串，然后将字符串显示为对其他看起来很无聊的输出形式的响应。有没有更好的方法来使用 JSP 页面显示 JSON 输出？

```
 @RequestMapping(value = "/showResponse", method = RequestMethod.POST)
    public String showResponse(@ModelAttribute("berequest") @Valid RequestForm berequest, BindingResult errors,
        ModelMap model) {

        StringBuilder url = new StringBuilder()
            .append("http://" + berequest.getMachineName() + ":" + berequest.getPortNumber()+ "/service/EEService/v1/get/")
            .append("USERID=" + berequest.getUserId())
            .append(",")
            .append("TIMEOUT=" + berequest.getWaitTimeout())
            .append("/")
            .append(berequest.getAttributeNames().toLowerCase());

        System.out.println("URL: " + url);

        RestTemplate restTemplate = new RestTemplate();

        // I believe I need to change here
        String result = restTemplate.getForObject(url.toString(), String.class);
        System.out.println(result);

        model.addAttribute("response", result);

        return "resultform"; // showing the response into other jsp page
    } 
```

下面是**resultform jsp页面**

```
<fieldset>
            <legend>Response:</legend>
                <strong>${response}</strong><br />

        </fieldset> 
```

所以目前看起来很无聊。有更好的方式来显示 JSON 响应吗？

**更新：-**

假设我从使用表单创建的 URL 中获取了这个 JSON 响应

```
{
    "attributes": [
        {
            "nm": "ACCOUNT",
            "lv": [
                {
                    "v": {
                        "Id": null,
                        "State": null
                    },
                    "vt": "java.util.Map",
                    "cn": 1
                }
            ],
            "vt": "java.util.Map",
            "status": "SUCCESS",
            "lmd": 13585
        },
        {
            "nm": "PROFILE
            "lv": [
                {
                    "v": {
                        "Party": null,
                        "Ads": null
                    },
                    "vt": "java.util.Map",
                    "cn": 2
                }
            ],
            "vt": "java.util.Map",
            "status": "SUCCESS",
            "lmd": 41962
        }
    ]
} 
```

所以目前它在我的 JSP 页面中显示为单行中的字符串，这是我不想要的。

```
{attributes=[{nm=ACCOUNT, lv=[{v={Id=null, State=null}, vt=java.util.Map, cn=1}], vt=java.util.Map, status=SUCCESS, lmd=1358535241962}]} 
```

我需要在我的 JSP 页面中完全按照上面所示的方式显示它作为响应。使人们能够正确理解各个领域。

**更新**

我制作的 JSON 的 POJO-

```
public class UrlInfo implements Serializable {

    private List<Attributes> attribute;

}

class Attributes {

    private String nm;
    private List<ValueList> lv;
    private String vt;
    private String status;
    private String lmd;

}

class ValueList {
    private String vt;
    private String cn;
    private List<String> v;
} 
```

任何人都可以看看并让我知道它是否基于我的 JSON 字符串是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:11:24.883

也许你可以使用`org.codehaus.jackson.map.ObjectMapper`：

```
public static Map<?, ?> toMap(String json) {
    try {
        ObjectMapper objectMapper = new ObjectMapper();
        return objectMapper.readValue(json, Map.class);
    } catch (Throwable e) {
        log.error("", e);
        return null;
    }
} 
```

你可以在你`response`的`Map`jsp中使用。

```
model.addAttribute("response", toMap(result)); 
```

* * *

您也可以将字符串转换为`JavaBean`：

```
public static <T> T toObject(String json, Class<T> clazz) {
    try {
        ObjectMapper objectMapper = new ObjectMapper();
        return objectMapper.readValue(json, clazz);
    } catch (Throwable e) {
        log.error("", e);
        return null;
    }
} 
```

在你的代码中：

```
User user = toObject(response,User.class);
model.add('user',user); 
```

* * *

更新：

如果你喜欢这样的json：

```
{
"id": "1",
"name": "oliver",
"address": [
    {
        "zip": 124,
        "add": "China"
    },
    {
        "zip": 345,
        "add": "USA"
    }
]
} 
```

您可以定义`JavaBean`：

```
public class User implements Serializable {

    private Integer id:
    private String name;
    private List<Address> address;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:07:03.417

作为你的 json，`JavaBean`可能是这样的：

值列表类：

```
class ValueList implements Serializable{

  private static final long serialVersionUID = 7932712012947938597L;
  private String vt;
  private String cn;
  private Map<String,Object> v;

} 
```

属性类：

```
class Attributes implements Serializable{

  private static final long serialVersionUID = -4743479664824391040L;
  private String nm;
  private List<ValueList> lv;
  private String vt;
  private String status;
  private String lmd;

} 
```

UrlInfo.class：

```
class UrlInfo implements Serializable {

  private static final long serialVersionUID = -2098738691615474311L;

  private List<Attributes> attributes;

} 
```

PS：上面省略了getter/setter方法。

# php - 如何将 Base64 PNG 转换为 JPG 图像？

> ID：14514587
> 
> 赞同：5
> 
> 时间：2013-01-25T02:52:36.617
> 
> 标签：php, image, png, base64, jpeg

我有这个 Base64 PNG，我想将其解码为 JPG。如果我转换为 PNG，它可以正常工作，使用：

```
list($type, $data) = explode(';', $data);
list(, $data)      = explode(',', $data);
$data = base64_decode($data);
file_put_contents('myDirectory/filename.png', $data); 
```

但是如果我尝试将其保存为 JPG，它会使用 ( ) 以黑白显示`MyDirectory/filename.jpg`。

如何将其转换为 JPG？这是我的 Base64 PNG 的示例：

```
data:image/png;base64,iVBORw0KGgoAAAANSUhE... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T02:58:32.357

Base64 是一种严格用于将数据转换为文本可传输格式的编码格式。如果您想要另一种格式，则需要进一步转换该编码格式中的任何内容。因此，如果您希望 PNG 成为 JPEG，则在 Base64 解码后需要通过其他工具将其转换为 JPEG。 [这个线程](https://stackoverflow.com/questions/1201798/use-php-to-convert-png-to-jpg-with-compression)有一些很好的建议。回答线程的@Andrew Moore 建议使用这样的函数。确保将 GD 库作为 PHP 设置的一部分安装：

```
// Quality is a number between 0 (best compression) and 100 (best quality)
function png2jpg($originalFile, $outputFile, $quality) {
    $image = imagecreatefrompng($originalFile);
    imagejpeg($image, $outputFile, $quality);
    imagedestroy($image);
} 
```

因此，以您的代码为例，您将使用此函数执行以下操作：

```
png2jpg('myDirectory/filename.png','myDirectory/filename.jpg', 100); 
```

或者您可以解构该函数的`png2jpg`函数并在您的代码中使用它们，如下所示：

```
list($type, $data) = explode(';', $data);
list(, $data)      = explode(',', $data);
$data = base64_decode($data);
file_put_contents('myDirectory/filename.png', $data);
$image = imagecreatefrompng('myDirectory/filename.png');
imagejpeg($image, 'myDirectory/filename.jpg', 100);
imagedestroy($image); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-04T16:28:03.967

自 PHP 5.2.0 以来最简单的方法是使用[data://](http://www.php.net/manual/en/wrappers.data.php)包装器，您可以在许多函数中像文件一样使用它。

```
$image = 'data:image/png;base64,iVBORw0KGgoAAAANSUhE...';
$image = imagecreatefrompng($image);
imagejpeg($image, 'myDirectory/filename.jpg', 100);
imagedestroy($image); 
```

# java - 使用 JDBC 将空值插入整数列

> ID：14514589
> 
> 赞同：45
> 
> 时间：2013-01-25T02:52:41.757
> 
> 标签：java, sql, jdbc

我有一个 sql 列`PROTOCOL`，它可以为空并且对表有约束

```
PROTOCOL IN (1, 2, 3) 
```

另外，由于它可以为空，我想将空值设置并获取到表中

但我不能做`setInt`和`getInt`为空。如何使用 JDBC 将空列设置为空

```
setInt(4,null); 
```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-01-25T02:57:49.613

尝试使用。

```
 pst.setNull(4, java.sql.Types.INTEGER);  //pst is prepared statement instance. 
```

[接口 PreparedStatement.setNull API](http://docs.oracle.com/javase/8/docs/api/java/sql/PreparedStatement.html#setNull-int-int-)

[java.sql.Types 到 SQL 类型的映射](http://docs.oracle.com/javadb/10.3.3.0/ref/rrefjdbc20377.html)

PS：已编辑以反映 Java 8 更新。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-11-15T17:14:59.907

除了[Smit 的回答](https://stackoverflow.com/a/14514632/2448440)：

如果您想将`Integer`-object 插入可能是的数据库中`null`，您可以使用

```
statement.setObject(4, yourObject, java.sql.Types.INTEGER); 
```

代替

```
if (yourObject == null) {
    statement.setNull(4, java.sql.Types.INTEGER);
else {
    statement.setInt(4, yourObject);
} 
```

# ruby-on-rails - 使用回形针上传到 s3 后图像未显示

> ID：14514593
> 
> 赞同：1
> 
> 时间：2013-01-25T02:53:13.717
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

我试图找出为什么我的照片没有出现在 S3 上。当我检查（不存在的）图片时，它显示了正确的亚马逊 s3 路径，但图像从未上传到 s3。当我在控制台中输入 heroku logs --tail 时，没有明显的错误。我也已经在 heroku 上设置了 s3 变量。heroku 日志看起来与我上传音乐文件的其他网站相同，但这些文件从未出现在 S3 上...

这是[github](https://github.com/sunwooz/RestaurantCMS)页面，如果您喜欢在那里阅读的话。谢谢！

上传后的 Heroku 日志。我从我的另一个应用程序中看到的唯一明显区别是这个应用程序首先重定向，然后回形针保存附件。

```
Started POST "/restaurants/3/menuitems" for 68.38.119.33 at 2013-01-25 16:36:07 +0000
2013-01-25T16:36:07+00:00 app[web.1]: Processing by MenuitemsController#create as HTML
2013-01-25T16:36:07+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"I8iVlAdNa/ui96aflFAlPxfAIgmvOB4k/Y7Fhf5ElMI=", "menuitem"=>{"name"=>"Penne alla Vodkas", "description"=>"Fresh oven baked bread with a kiss of mother nature cut into fresh little delicious strips.", "image"=>#<ActionDispatch::Http::UploadedFile:0x00000005ff55f0 @original_filename="penneallavodka.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"menuitem[image]\"; filename=\"penneallavodka.jpeg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130125-2-1xa5s3v>>, "price"=>"10.95"}, "commit"=>"Add Item", "restaurant_id"=>"3"}
2013-01-25T16:36:11+00:00 app[web.1]: Redirected to http://sugarcider.com/restaurants/3
2013-01-25T16:36:11+00:00 app[web.1]: Completed 302 Found in 4129ms (ActiveRecord: 18.1ms)
2013-01-25T16:36:11+00:00 app[web.1]: [paperclip] Saving attachments.
2013-01-25T16:36:11+00:00 app[web.1]: [paperclip] saving penneallavodka.jpeg
2013-01-25T16:36:11+00:00 app[web.1]: [AWS S3 200 4.101325 0 retries] put_object(:acl=>:public_read,:bucket_name=>"restaurantimages",:content_length=>818276,:content_type=>"image/jpeg",:data=>#<Paperclip::UploadedFileAdapter:0x00000006322908 @target=#<ActionDispatch::Http::UploadedFile:0x00000005ff55f0 @original_filename="penneallavodka.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"menuitem[image]\"; filename=\"penneallavodka.jpeg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20130125-2-1xa5s3v>>, @tempfile=#<File:/tmp/penneallavodka20130125-2-mfgg7i.jpeg>>,:key=>"penneallavodka.jpeg") 
```

菜单项模型

```
class Menuitem < ActiveRecord::Base
  attr_accessible :name, :description, :price, :image

  belongs_to :restaurant

  has_attached_file :image,
    :styles => {
      :thumbnail => '100x101>',
      :regular => '560x568>'
    },
    :storage => :s3,
    :s3_credentials => {
      :bucket => ENV['AWS_BUCKET'],
      :access_key_id => ENV['AWS_ACCESS_KEY_ID'],
      :secret_access_key => ENV['AWS_SECRET_ACCESS_KEY']
    },
    :path => ":filename.:extension"
end 
```

新的.html.erb

```
<%= form_for [@restaurant, @restaurant.menuitems.new], :html => { :multipart => true } do |f| %>
  <%= f.label :name %><br/>
  <%= f.text_field :name %><br/>
  <%= f.label :description %><br/>
  <%= f.text_field :description %><br/>
  <%= f.label :image %><br/>
  <%= f.file_field :image %><br/>
  <%= f.label :price %><br/>
  <%= f.text_field :price %><br/>
  <%= f.submit 'Add Item', :class => 'btn btn-large btn-success' %>
<% end %> 
```

Menuitems_controller.rb

```
 def new
    @restaurant = Restaurant.find(params[:restaurant_id])
    @menuitem = @restaurant.menuitems.build
  end

  def create
    @restaurant = Restaurant.find(params[:restaurant_id])
    @menuitem = @restaurant.menuitems.build(params[:menuitem])
    respond_to do |format|
      if @menuitem.save
        format.html { redirect_to restaurant_path(@restaurant) }
      else
        format.html { redirect_to restaurant_path(@restaurant), notice: 'One or more fields are not correctly formatted.' }
      end
    end
  end

  def index
    @restaurant = Restaurant.find(params[:restaurant_id])
    @menuitems = @restaurant.menuitems.build
  end 
```

我在production.rb中有这个

```
 config.paperclip_defaults = {
    :storage => :s3,
    :s3_protocol => 'http',
    :s3_credentials => {
      :bucket => ENV['AWS_BUCKET'],
      :access_key_id => ENV['AWS_ACCESS_KEY_ID'],
      :secret_access_key => ENV['AWS_SECRET_ACCESS_KEY']
    }
  } 
```

餐厅的 index.html

```
 <% @menuitems.each do |f| %>
    <tr>
      <td><%= f.name %></td>
      <td><%= f.description %></td>
      <td>$<%= f.price %></td>
      <td><%= image_tag f.image.url(:regular) %></td>
      <td><%= link_to 'Destroy', restaurant_menuitem_path(f), :method => :delete, :class => 'btn btn-danger' %>
      <%= link_to 'Edit', edit_restaurant_menuitem_path(f), :class => 'btn btn-success'%></td>
    </tr>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:51:47.337

好的，我解决了我自己的问题。

我必须删除我的原始存储桶并使用新名称创建一个新存储桶，然后我必须在 heroku 配置上重置我的 aws_bucket 变量

```
heroku config:add AWS_BUCKET=newbucketname 
```

现在它完美地工作了！

# javascript - Resize fancybox width after visiting link in iframe

> ID：14514597
> 
> 赞同：0
> 
> 时间：2013-01-25T02:53:45.937
> 
> 标签：javascript, jquery, fancybox

I created a fixed width fancybox defined on the parent page like so:

```
$('.fancybox').fancybox({
    width: 650
}); 
```

I have a link that can be clicked within the iframe that pops up that directs to a new page that is 850px wide. I need the FancyBox to adjust up to that width. How can I do this? I've tried using the autosize:true function but that does not seem to do the job.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:21:14.073

With jQuery you can do:

```
$(".fancybox").css({"width" : "850"}); 
```

right after your Fancybox call.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T23:13:52.550

You could also do this, assuming that the new content has a size set:

```
$('#fancybox-wrap, #fancybox-outer, #fancybox-content').css('width', 'auto');
$.fancybox.center(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T04:13:30.553

You can call:

```
$('#fancybox-content').width(850); 
```

To resize the width of the fancybox at any time.

# java - 如何使用aspectj-maven-plugin

> ID：14514599
> 
> 赞同：5
> 
> 时间：2013-01-25T02:53:51.163
> 
> 标签：java, maven, aspectj

我是 AspectJ 和 Maven 的新手。

我正在尝试使用 aspectj-maven-plugin 来构建我的项目，但它不起作用。我只是按照*AspectJ In Action 2 ^(nd) Edition*中的步骤进行操作。

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>aspectj-maven-plugin</artifactId>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test-compile</goal>
                    </goals>

                    <configuration>
                        <source>1.5</source>
                        <target>1.5</target>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

这是我在网上收到的错误消息`<execution>`：

> 生命周期配置未涵盖插件执行：org.codehaus.mojo:aspectj-maven-plugin:1.4:compile（执行：默认，阶段：编译）

我正在使用 JDK6 和 Apache Maven 3.0.4。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T21:52:29.733

您需要安装 AspectJ Maven 配置器。可在此处获得：

[http://dist.springsource.org/release/AJDT/configurator/](http://dist.springsource.org/release/AJDT/configurator/)

帮助 -> 安装新软件...

将此更新站点添加到“使用”部分并选择该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T06:36:22.470

要使用 aspectj-maven-plugin 解决此插件执行问题，您可以将您的**标记**在你的 pom.xml 中添加标签。这将删除 eclipse 中的异常。****

 ****如下图所示：

```
<build>
    ....
    <pluginManagement>
        <plugins>
            <plugin> ... </plugin>
             ....
             ....
        </plugins>
    </pluginManagement>
</build> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T10:22:58.133

您可以像这样添加：

```
<executionManger><execution>...<execution/><executionManger/> 
```

它会起作用的****

# jquery - 多份问卷

> ID：14514600
> 
> 赞同：0
> 
> 时间：2013-01-25T02:53:57.420
> 
> 标签：jquery, html

我之前确实问过这个问题，但我的客户想在问卷上创建一些功能。他希望所有“Notes 文本字段”为空时都将被隐藏。仅当“注释文本字段”具有值时才可见。如果有值或没有值，也需要更新/检查是/否单选按钮。这是“insomniac”之前的代码。

```
$('.notes').hide();
$('input[type="radio"]').change(function () {
  if ($(this).val() == "Yes") {
    $(this).closest('tr').next('tr.notes').slideDown();
  } else {
    $(this).closest('tr').next('tr.notes').slideUp();
  }
}); 
```

但是，如果有值，我需要首先验证文本字段（实际上这里将使用 1 到 33 个文本字段，其中大部分都具有价值）。

```
var vals = $('.notes input[type="text"]').val(); 
if(vals == "") {
  console.log('negative');
  $('tr.notes').slideUp();
} else {
  console.log('positive');
  $('.query input[value="Yes"]').attr({
    checked: "checked"
  });
  $('tr.notes').slideDown();
} 
```

这是我正在讨论的原始格式... [jQuery Bind or Index Form](https://stackoverflow.com/questions/14393128/jquery-form-bind-or-index) and [Insomniac Demo](http://jsfiddle.net/5aJWh/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:05:11.253

您需要检查 的长度`.html()`并将其从视图中相应地删除。

```
if ($(element).html().length == 0)
    $(element).hide(); 
```

如果要在文档加载时静态加载笔记，太棒了，你只需要这样做：

```
$('.notes').each(function(){
    if ($(this).html().length == 0)
        $(this).hide();
}); 
```

否则，如果您要动态加载它们，一旦加载它们，请使用第一个代码检查是否为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T04:25:59.847

//将焦点设置为输入，这样我们就可以在模糊事件中检查输入的任何内容。

```
 $('.notes').hide();

        $('input[type="radio"]').change(function () {
            if ($(this).val() == "Yes") {
                 $(this).closest('tr').next('tr.notes').slideDown(); 
                $(this).closest('tr').next('tr.notes').find('input').focus();                                
             } else {
                 $(this).closest('tr').next('tr.notes').slideUp();
             }
      }); 
```

//模糊事件绑定到所有输入

```
 $('input').blur(function(){
      if ($(this).val().length == 0){       
    $(this).closest('tr.notes').slideUp();
      }
     }); 
```

//更新小提琴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:11:48.393

经过一些研究和不停地工作脚本。我最终决定将代码更新为基本设置。“我不是程序员”实际上......

```
$(".report-notes fieldset").each(function (i) {
i = i+1;
$(this).addClass("item"+i);
$('.item'+i+' input[type="radio"]').on('change',function(){
    if($(this).val() == 'Yes') {
        $('.item'+i+' .notes').slideDown();
    } else {
        $('.item'+i+' .notes').slideUp();
    }
});

$(document).ready(function(){
    var notes = $('.item'+i+' .notes input[type="text"]').val();
    if(notes === '') {
        console.log('walang laman');
        $('.item'+i+' .notes').hide();
    } else {
        console.log('meron laman');
        $('.item'+i).find('input[value="Yes"]').attr({
            checked: "checked"
        });
        $('.item'+i+' .notes').slideDown();
    }
});
}); 
```

[更新的小提琴源](http://dogandrooster.com/clients/_snippets/jquery-val.html)

# kernel-module - 如何生成模块调试信息包

> ID：14514601
> 
> 赞同：1
> 
> 时间：2013-01-25T02:53:57.183
> 
> 标签：kernel-module

我正在开发一个内核模块。为了调试模块，我想做一个debuginfo包，比如kernel-debuginfo-2.6.32-220.el6.x86_64.rpm。但是我没有找到生产的方法。请帮我！

# delphi - 如何静音 Delphi Chromium Embedded (TChromium) 组件的声音？

> ID：14514606
> 
> 赞同：9
> 
> 时间：2013-01-25T02:54:24.233
> 
> 标签：delphi, tchromium

我需要静音`TChromium`组件的声音以制作静音浏览器。主要问题是在 Windows XP 上，当我静音浏览器的声音时，它会静音整个系统声音。

有没有办法使`TChromium`组件的声音静音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-10T16:25:15.883

我已成功使用以下代码：

```
procedure CustomCommandLine (const processType: ustring; const commandLine: ICefCommandLine);
begin
    commandLine.AppendSwitch('--mute-audio');
end;    

begin
    CefOnBeforeCommandLineProcessing := CustomCommandLine;

    Application.Initialize;
    Application.CreateForm(TMainForm, MainForm);
    Application.Run;
end. 
```

其他参数： [示例](https://github.com/electron/electron/blob/master/docs/api/chrome-command-line-switches.md)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T02:03:17.943

Windows XP 不允许特别静音一个应用程序。
在此处查看此讨论：http:
[//social.msdn.microsoft.com/Forums/windowsdesktop/en-US/0b4d2919-1b48-4f55-8120-cedd22bea0c5/how-to-programmatically-mute-volume-of-selected-app -in-volume-mixer-windows-7?forum=windowspro-audiodevelopment](http://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/0b4d2919-1b48-4f55-8120-cedd22bea0c5/how-to-programmatically-mute-volume-of-selected-app-in-volume-mixer-windows-7?forum=windowspro-audiodevelopment)
有这个软件（没试过）： http: [//www.indievolume.com/](http://www.indievolume.com/)允许这种程序，但这不是最好的选择。
你不能只处理 HTML 并忽略音频标签吗？！
我一直在查看 TChromium 源代码，也没有发现任何与音频相关的内容:(

# php - 尝试设置超链接时收到错误

> ID：14514608
> 
> 赞同：3
> 
> 时间：2013-01-25T02:54:29.327
> 
> 标签：php, html

我正在尝试将每个图像名称设置为超链接。但问题是我收到 3 个错误，2 个是未定义的错误，另一个需要 1 个参数。

当前代码不起作用：

```
 <table id="tableqanda" cellpadding="0" cellspacing="0">
    <thead>
    <tr>
        <th width="11%" class="image">Image</th>
    </tr>
    </thead>
    </table>
    <div id="tableqanda_onthefly_container">
    <table id="tableqanda_onthefly" cellpadding="0" cellspacing="0">
    <tbody>
        <?php

function imageName( $imgitem ) {
    return htmlspecialchars($imgitem); //432
}

          foreach ($arrQuestionId as $key=>$question) {
        echo '<tr class="tableqandarow">'.PHP_EOL;
        echo '<td width="11%" class="imagetd">';

        if (empty($arrImageFile[$key])) {
            echo '&nbsp;';
        } else {
    echo '<ul class="qandaul"><li><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">'; //line 456
    echo implode('</li>\n<li></a><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">', imageName($arrImageFile[$key]) ); //line 457
    echo '</li></ul></a>';
        }
        echo '</td>';
        echo '</tr>'.PHP_EOL;
        }
?>
    </tbody>
    </table>
    </div> 
```

收到的错误：

警告：htmlspecialchars() 期望参数 1 是字符串，数组在第 432 行的 ... 中给出

注意：未定义的变量：imgitem in ... 第 456 行

注意：未定义的变量：imgitem in ... 第 457 行

* * *

### 格式化代码：

```
<table id="tableqanda" cellpadding="0" cellspacing="0">
    <thead>
        <tr>
            <th width="11%" class="image">Image</th>
        </tr>
    </thead>
</table>
<div id="tableqanda_onthefly_container">
    <table id="tableqanda_onthefly" cellpadding="0" cellspacing="0">
        <tbody>
            <?php
                function imageName( $imgitem ) {
                    return htmlspecialchars($imgitem); //432
                }
                foreach ($arrQuestionId as $key=>$question) {
                    echo '<tr class="tableqandarow">'.PHP_EOL;
                    echo '<td width="11%" class="imagetd">';
                    if (empty($arrImageFile[$key])) {
                        echo '&nbsp;';
                    } else {
                        echo '<ul class="qandaul"><li><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">'; //line 456
                        echo implode('</li>\n<li></a><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">', imageName($arrImageFile[$key]) ); //line 457
                        echo '</li></ul></a>';
                    }
                    echo '</td>';
                    echo '</tr>'.PHP_EOL;
                }
            ?>
        </tbody>
    </table>
</div> 
```

**`var_dump`结果：**

从 var_dump 指定的结果如下：

```
array(2) { 
  [72]=> array(2) { 
    [0]=> string(16) "Lighthouse_4.jpg" 
    [1]=> string(12) "Tulips_3.jpg" 
  } 
  [73]=> array(1) { 
    [0]=> string(16) "Hydrangeas_3.jpg" 
  } 
}
int(73) 
```

**更新：**

使用 Praveen 的代码，我收到一条错误消息：

`Fatal error: Cannot redeclare imageName() (previously declared in ...:451) in ... on line 451`

下面是代码：

```
<table id="tableqanda" cellpadding="0" cellspacing="0">
    <thead>
        <tr>
            <th width="11%" class="image">Image</th>
        </tr>
    </thead>
</table>
<div id="tableqanda_onthefly_container">
    <table id="tableqanda_onthefly" cellpadding="0" cellspacing="0">
        <tbody>
  //line 451          <?php function imageName( $imgitem ) { return htmlspecialchars($imgitem);
            } foreach ($arrQuestionId as $key=>$question) { echo '
            <tr class="tableqandarow">'.PHP_EOL; echo '
                <td width="11%" class="imagetd">'; function imageName( $imgitem ) { return htmlspecialchars($imgitem);
                    function getImgLink ( $imgKey ) { return $imgKey[0]; if (empty($arrImageFile[$key]))
                    { echo '&nbsp;'; } else { echo '
                    <ul class="qandaul">
                        <li>
                            <a href="previewImage.php?imgId=[' . getImgLink($arrImageFile($key)) . ']"
                            target="_blank">'; echo implode('</li>\n
                        <li>
                            </a>
                            <a href="previewImage.php?imgId=[' . getImgLink($arrImageFile($key)) . ']"
                            target="_blank">', imageName($arrImageFile[$key]) ); echo '</li>
                    </ul>
                    </a>'; } echo '</td>'; } } echo '</tr>'.PHP_EOL; } ?></tbody>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T02:58:09.357

### 有很多错误！！！

1.  你在哪里定义的`$imgitem`？
2.  你为什么要`implode`字符串？
3.  为什么过早地关闭函数，并在函数之外的代码中使用变量？
4.  定义在哪里`$arrImageFile`？
5.  最后，**你想做什么？**

### 其他错误...

```
function imageName( $imgitem ) {
    return htmlspecialchars($imgitem); //432
}
///////////////////////////////////////////////////////////////////
// You are closing the function here, hence the $imgitem's scope //
///////////////////////////////////////////////////////////////////

          foreach ($arrQuestionId as $key=>$question) {
        echo '<tr class="tableqandarow">'.PHP_EOL;
        echo '<td width="11%" class="imagetd">';

        if (empty($arrImageFile[$key])) {
            echo '&nbsp;';
        } else {
    echo '<ul class="qandaul"><li><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">'; //line 456
////////////////////////////////////////////////////
// The $imgitem's variable is not accessible here //
////////////////////////////////////////////////////

    echo implode('</li>\n<li></a><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">', imageName($arrImageFile[$key]) ); //line 457
////////////////////////////////////////////////////////////////////////////
// Why are you trying to implode something like this? Not a right syntax! //
////////////////////////////////////////////////////////////////////////////
    echo '</li></ul></a>';
        }
        echo '</td>';
        echo '</tr>'.PHP_EOL;
        } 
```

* * *

### 更新

```
<table id="tableqanda" cellpadding="0" cellspacing="0">
    <thead>
        <tr>
            <th width="11%" class="image">Image</th>
        </tr>
    </thead>
</table>
<div id="tableqanda_onthefly_container">
    <table id="tableqanda_onthefly" cellpadding="0" cellspacing="0">
        <tbody>
            <?php
                function imageName( $imgitem ) {
                    return htmlspecialchars($imgitem); //432
                }
----------------^
///////////////////////////////////////////////////////////////////
// You are closing the function here, hence the $imgitem's scope //
///////////////////////////////////////////////////////////////////

                foreach ($arrQuestionId as $key=>$question) {
                    echo '<tr class="tableqandarow">'.PHP_EOL;
                    echo '<td width="11%" class="imagetd">';
                    if (empty($arrImageFile[$key])) {
                        echo '&nbsp;';
                    } else {
                        echo '<ul class="qandaul"><li><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">'; //line 456
-------------------------------------------------------------------------------------------^
/////////////////////////////////////
// Where have you defined $imgitem //
/////////////////////////////////////

                        echo implode('</li>\n<li></a><a href="previewImage.php?imgId=[' . $imgitem . ']" target="_blank">', imageName($arrImageFile[$key]) ); //line 457
------------------------------------------------------------------------------------------^
/////////////////////////////////////
// Where have you defined $imgitem //
/////////////////////////////////////

                        echo '</li></ul></a>';
                    }
                    echo '</td>';
                    echo '</tr>'.PHP_EOL;
                }
            ?>
        </tbody>
    </table>
</div> 
```

* * *

根据 的输出`var_dump`，我觉得您需要添加另一个函数来获取图像的链接，因为它始终存在于第`0`th 索引中。

```
function getImgLink ( $imgKey )
{
    return $imgKey[0];
} 
```

现在，以这种方式使用它：

```
<a href="previewImage.php?imgId=[' . getImgLink($arrImageFile($key)) . ']" target="_blank"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T02:57:57.353

尝试删除包含 . 的方括号`[' . $imgitem . ']`。方括号不是有效的查询字符串 char

另一件事，为什么要使用`implode`？

# google-maps - Google Maps API v2 不适用于 Firefox 和 IE

> ID：14514618
> 
> 赞同：2
> 
> 时间：2013-01-25T02:55:24.023
> 
> 标签：google-maps, google-maps-api-2

我正在尝试在我的网站中使用谷歌地图 v2，但是该地图没有出现在 Firefox 中，即它出现在 chrome 中。我找不到问题，有谁知道代码中的问题是什么？该地图可在[http://www.ideiah.com/contato查看](http://www.ideiah.com/contato)

代码：

```
<script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=AIzaSyAPPKVsGOmTcBlOo_FkNi4QBn19RKBPMeI" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
function MyIndexOf(arr, element)
{

for(i = 0; i < arr.length; i++)
{
    if( arr[i] == element)
        return i;
}
return -1;

}
//]]>
</script>

<script type="text/javascript">
    //<![CDATA[
    //mapGDynamicMap2
    function GetMapIndex(map)
    {
    var currentMapType = map.getCurrentMapType();
    return MyIndexOf(map.getMapTypes(),currentMapType);
    }

    function SetMapIndex(map,mapTypeIndex)
    {
    map.setMapType(map.getMapTypes()[mapTypeIndex]);
    }

    function LoadMapmapGDynamicMap2(){
    var mapGDynamicMap2 = new GMap2(document.getElementById("GDynamicMap2"));
    mapGDynamicMap2.setCenter(new GLatLng(-29.789195,-55.768093), 17);
    mapGDynamicMap2.setMapType(mapGDynamicMap2.getMapTypes()[2]);
    SetMapIndex(mapGDynamicMap2,0);
    mapGDynamicMap2.addControl(new GMenuMapTypeControl());
    mapGDynamicMap2.addControl(new GSmallMapControl());
    mapGDynamicMap2.addControl(new GOverviewMapControl());

    var pointGDynamicMarker7141266 = new GLatLng(-29.789241,-55.768329);
    var GDynamicMarker7141266 = new GMarker(pointGDynamicMarker7141266, {icon:G_DEFAULT_ICON, draggable: false});
    GDynamicMarker7141266.bindInfoWindowHtml('Ideiah Soluções em Software');
    mapGDynamicMap2.addOverlay(GDynamicMarker7141266);

    GEvent.addListener(mapGDynamicMap2, "zoomend", function(){document.getElementById("mapGDynamicMap2ZoomLevel").value=mapGDynamicMap2.getZoom();;
    });
    GEvent.addListener(mapGDynamicMap2, "moveend", function(){document.getElementById("mapGDynamicMap2Center").value=mapGDynamicMap2.getCenter().toUrlValue();;
    });
    GEvent.addListener(mapGDynamicMap2, "maptypechanged", function(){document.getElementById("mapGDynamicMap2MapType").value=GetMapIndex(mapGDynamicMap2);;
    });
    }
    //]]>
</script>

<div>
<span id="mapGDynamicMap2ZoomLevel" value="17"></span>
<span id="mapGDynamicMap2Center" value="-29.789195,-55.768093" ></span>
<span id="mapGDynamicMap2MapType" value="0" ></span>
</div>
<div class="GMPdiv img-polaroid" style="width:90% !important; margin: 0 auto;">
    <div  id="GDynamicMap2" class="GMPmap" style="width:100%;height:200px;"></div>
</div>
<script type="text/javascript">
//<![CDATA[
LoadMapmapGDynamicMap2();//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T17:37:41.073

这是一个 CSS 问题，由[style.css](http://www.ideiah.com/assets/css/style.css)中的设置`max-width:100%`强制`img`

将此附加到 style.css：

```
#GDynamicMap2 img{max-width:none !important} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:46:38.910

在 Google Maps API v2 中加载地图的一般规则是：

1.  在 onload 函数中初始化它们（在 DOM 完全呈现后）或
2.  在页面的末尾，就在`</body>`标签之前（这种方法对无效的 HTML 极其敏感，[这些错误](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.ideiah.com%2Fcontato&charset=%28detect+automatically%29&doctype=Inline&group=0)似乎没有太大问题，但在你修复之前，不能确定问题是什么）

您正在尝试内联初始化您的地图（以上都不是）。

# c - 从内核空间访问数据段

> ID：14514625
> 
> 赞同：0
> 
> 时间：2013-01-25T02:56:50.673
> 
> 标签：c, memory-management, linux-kernel, virtual-memory, memory-model

我希望能够知道属于进程的页表中的哪些页面用作数据段。我正在为 amd64 使用 Linux 内核 v 3.2

这是我以前做过但没有用的：

1.  使用`task->mm->start_data`（任务是目标进程的task_struct）访问数据段。

2.  搜索`task->mm->mmap`（链表）并将每个`vm_area_struct`( `vm_start`) 的起始地址与`task->mm->start_data`. 这里我假设数据段的开头与页面的开头对齐。

所有这些都应该在内核模块中完成。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:59:44.583

经过一些研究，看起来像将 task->mm->start_data 传递给 get_user_pages 并结合 kmap 可以解决问题。

# powershell - 在包管理器控制台中列出可用的 CmdLets

> ID：14514627
> 
> 赞同：1
> 
> 时间：2013-01-25T02:57:06.300
> 
> 标签：powershell, visual-studio-2012, cmdlets

在包管理器控制台中，是否可以获得可用 cmdlet 的列表？

例如，我安装了 Entity Framework 包，我想尝试迁移。我知道命令`Enable-Migrations`、`Add-Migration`和`Update-Database`，但是我想玩回滚，但我不知道要调用的 cmdlet。

我只是想要一种列出当前上下文中所有可用 cmdlet 的方法，并在可能的情况下简要说明每个 cmdlet 的作用。

编辑：

我知道如何进行回滚，这只是一个解释为什么获取 cmdlet 列表会很有用的故事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T03:53:52.570

```
Get-Command -CommandType Cmdlet 
```

您可以使用：

```
Get-Command -CommandType Cmdlet | Get-Help | select name,synopsis | fl 
```

获取您对 cmdlet 功能的描述。但是，管道到 Get-Help 似乎很慢。可能有比调用 Get-Help 更好的方法来获取概要。

# asp.net-mvc - 如何处理 Razor 条件中的空异常

> ID：14514628
> 
> 赞同：0
> 
> 时间：2013-01-25T02:57:31.970
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

```
 <div class="display-label">
            <a>Contact</a>
            @(Model.Store.EmployeeType.Name == "Manager" ? Model.Store.HQ.Manager.DisplayName : Model.Store.Manager.DisplayName )
        </div> 
```

在视图中应该如何处理每个实体的空异常？我有很多这样的 - 有没有一种优雅的方法来检查空值而不在每个之前做一个 if 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:01:28.857

是的，在您的 ViewModel 上创建一个属性：

```
public class ManagerViewModel 
{
    public string Manager {get;set;}
} 
```

在你的控制器中：

```
var viewModel = new ManagerViewModel();
viewModel.Manager = Model.Store.EmployeeType.Name == "Manager" ? Model.Store.HQ.Manager.DisplayName : Model.Store.Manager.DisplayName;
return View(viewModel); 
```

那么在您看来，您需要做的就是：

```
@Model.Manager 
```

# java - 下载图像并将其保存到 SD 卡中

> ID：14514642
> 
> 赞同：1
> 
> 时间：2013-01-25T02:58:13.733
> 
> 标签：java, android, exception

我正在尝试将图像下载并保存到 SD 卡中，有时它可以工作，有时它不能。我需要帮助试图了解原因，我试图用谷歌搜索，但找不到答案。

所以这是我检索杂志问题的代码，然后循环遍历 json 数组中的每个项目，然后下载并将它们存储到 sd 卡中。但是有些图像没有被下载，而是跳过（查看 logcat）

```
 /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class downloadMagazine extends AsyncTask<String, String, String> {

         @Override
            protected void onPreExecute() {
                super.onPreExecute();
                progressDialog = new ProgressDialog(Store.this);
                progressDialog.setMessage("Loading.." + "\n" + "加载中..");
                progressDialog.setIndeterminate(false);
                progressDialog.setCancelable(false);
                progressDialog.show();
            } 
        /**
         * getting preview url and then load them
         * */
        protected String doInBackground(String... args) {
            URL myFileUrl = null;

            // Building Parameters
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                // getting JSON string from URL
                JSONObject json = jParser.makeHttpRequest(url_magazine, "GET", params);

                // Check your log cat for JSON reponse
                //Log.d("All Products: ", json.toString());

                try {
                    // Checking for SUCCESS TAG
                    int success = json.getInt(TAG_SUCCESS);

                    if (success == 1) {
                        // products found
                        // Getting Array of Products
                        mag = json.getJSONArray(TAG_MAGAZINE);

                        for (int i = 0; i < mag.length(); i++) {
                            JSONObject c = mag.getJSONObject(i);

                            // Storing each json item in variable
                            String magazineUrl = c.getString(TAG_MAGAZINE_URL);
                            String issueName = c.getString(TAG_MAGAZINE_NAME);

                            urlList.add(magazineUrl);
                            issueNameList.add(issueName);
                            //System.out.println(urlList);
                        }                   
                    } 
                } catch (JSONException e) {
                    e.printStackTrace();
                }           

                // Building Parameters
                List<NameValuePair> param = new ArrayList<NameValuePair>();
                // getting JSON string from URL
                JSONObject json1 = jParser.makeHttpRequest(urlList.get(pos), "GET", param);

                // CHECKING OF JSON RESPONSE
                Log.d("All guide: ", json.toString());

                try {
                    issues = json1.getJSONArray(TAG_ISSUE);

                    for (int i = 0; i < issues.length(); i++) {
                        JSONObject c = issues.getJSONObject(i);

                        String image = c.getString(TAG_IMAGE);

                        imageList.add(image);
                        //System.out.println(imageList);
                    }   

                    // STOP THE LOOP
                    //break;

                } catch (JSONException e) {
                    e.printStackTrace();
                }

                for (int i = 0; i < imageList.size(); i ++)
                {
                imageUrl = imageList.get(i).toString();
                Log.d("thumbnail", imageUrl);
                number = i;
                try {
                    myFileUrl = new URL(imageUrl);    // RETRIEVE IMAGE URL
                    }
                 catch (MalformedURLException e) {
                    e.printStackTrace();
                }
                try {
                    HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();
                    conn.setDoInput(true);
                    conn.connect();
                    InputStream in = conn.getInputStream();
                    Log.i("I'm connected", "Download");
                    bmImg = BitmapFactory.decodeStream(in);

                    File filename;
                    // GET EXTERNAL STORAGE, SAVE FILE THERE
                    File storagePath = new File(Environment.getExternalStorageDirectory(),folderName+"issue"+issueNumber+"/");
                    storagePath.mkdirs();

                    filename = new File(storagePath + "/page"+number+".jpg");
                    FileOutputStream out = new FileOutputStream(filename);
                    bmImg.compress(Bitmap.CompressFormat.JPEG, 90, out);

                        out.flush();
                        out.close();

                        MediaStore.Images.Media.insertImage(getContentResolver(),filename.getAbsolutePath(), filename.getName(),
                                filename.getName());          
                        in.close();

                         // displayImage();
                } catch (IOException e) {
                    e.printStackTrace();
                }   
                }

                return null;

} 
```

这是我跳过下载页面时的 logcat 输出（我知道它类似于我发布的问题之一，但我确实需要帮助进行故障排除）。我不知道发生了什么，我用谷歌搜索发现许多使用 android 4.0 及以上版本的人都遇到了这个问题

```
01-23 17:09:29.120: W/System.err(24339): java.io.EOFException
01-23 17:09:29.120: W/System.err(24339):    at libcore.io.Streams.readAsciiLine(Streams.java:203)
01-23 17:09:29.120: W/System.err(24339):    at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:544)
01-23 17:09:29.120: W/System.err(24339):    at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:784)
01-23 17:09:29.120: W/System.err(24339):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)
01-23 17:09:29.120: W/System.err(24339):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
01-23 17:09:29.130: W/System.err(24339):    at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
01-23 17:09:29.130: W/System.err(24339):    at com.sfcca.coverflow.Store$downloadMagazine.doInBackground(Store.java:881)
01-23 17:09:29.130: W/System.err(24339):    at com.sfcca.coverflow.Store$downloadMagazine.doInBackground(Store.java:1)
01-23 17:09:29.130: W/System.err(24339):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
01-23 17:09:29.130: W/System.err(24339):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-23 17:09:29.130: W/System.err(24339):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-23 17:09:29.130: W/System.err(24339):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
01-23 17:09:29.130: W/System.err(24339):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-23 17:09:29.130: W/System.err(24339):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-23 17:09:29.130: W/System.err(24339):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:32:28.307

看看这个：[http ://code.google.com/p/google-http-java-client/issues/detail?id=116](http://code.google.com/p/google-http-java-client/issues/detail?id=116)

我会在那里尝试最后的评论，看看问题是否消失：

> System.setProperty("http.keepAlive", "false");

现在，从长远来看，您可能不一定想要该设置，但至少看看这是否相关。

请注意，即使这个问题是指 Spring 和一堆其他东西，它似乎是同一个根本问题：[Spring Rest Template 使用会导致 EOFException](https://stackoverflow.com/questions/13182519/spring-rest-template-usage-causes-eofexception)

最后，我不确定您要在那里做什么，但是一个 AsyncTask 做了很多工作（并没有真正处理网络消失等突发事件），但是您可能会遇到其他几种方式的麻烦那里（与您的问题无关）。如果可能有帮助，您可能还需要考虑通用图像下载/缓存库，例如[https://github.com/koush/UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)。即使您不使用其中之一，稍微挖掘一下源代码，您可能会看到它们如何使事情变得更加强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:02:29.950

检查您是否为清单授予了适当的权限

```
 <uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# delphi - Delphi - 读取记录值时dbcheckbox改变颜色

> ID：14514646
> 
> 赞同：0
> 
> 时间：2013-01-25T02:58:34.390
> 
> 标签：delphi, components, vcl

我有一个 dbcheckbox 组件，我需要更改其背景颜色以表示已选中或未选中状态。当用户使用 dbnavigator 组件在记录之间导航时，我需要更新它。

数据集在数据模块上，无论如何我都不想使用它的事件，所以请告知我是否应该覆盖组件以及如何覆盖？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:31:35.060

启用运行时主题后，无法更改颜色，也许更改字体样式也可能满足您的需求。
如果不是，您可以在代码部分调用自己的 Notifyevent，使用
“Message.Msg =BM_SETCHECK”以另一种方式做出反应，例如更改底层形状的颜色。

```
 TDBCheckBox=Class(DBCtrls.TDBCheckbox)
        procedure WndProc(var Message: TMessage); override;
  private
  End;

  TForm1 = class(TForm)
    DBCheckBox1: TDBCheckBox;
    procedure FormCreate(Sender: TObject);
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form1: TForm1;

implementation
{$R *.dfm}

{ TDBCheckBox }

procedure TDBCheckBox.WndProc(var Message: TMessage);
var
 fs:TFontStyles;
begin
  inherited;
   if Message.Msg =BM_SETCHECK then
         begin
         if checked then    Font.Color := clLime else Font.Color := clRed;  // Will only work if runtimethemes are disabled
         fs := Font.Style;
         if checked then  Include(fs, fsbold)  else Exclude(fs, fsbold);
         Font.Style := fs;
         end;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:27:18.130

您可以使用 DBCheckBox 的 OnClick-Event，每次 Checked 属性更改时都会触发此事件。不幸的是，您不能使用 dbcheckbox 的背景颜色，因为在主题窗口中，属性“颜色”无效。您可以在 dbCheckbox 后面放置一个 TPanel，并使用面板的颜色。或者，您可以改为更改 Font.Color。所以事件 OnClick 看起来像这样：

```
procedure TForm1.DBCheckBox1Click(Sender: TObject);
begin
  if DBCheckBox1.Checked then
    DBCheckBox1.Font.Color := clRed
  else
    DBCheckBox1.Font.Color := clWindowText;
end; 
```

# ios - iPad 应用程序，HTML5，横向和纵向旋转

> ID：14514649
> 
> 赞同：0
> 
> 时间：2013-01-25T02:59:16.890
> 
> 标签：ios, uiinterfaceorientation

如果 iPad 应用程序基本上托管 Webviews，并且在这些 webviews 中我加载了一些 html5 文档，那么旋转设备并以横向和纵向呈现 UI 是否会有问题？通过问题，我的意思是 HTML5 在我旋转 web 视图时是否必须对其进行任何特殊处理？我应该构建两个 html 文档，一个用于纵向模式，一个用于横向模式？如果是这样，这是否意味着在旋转时我必须将一个加载到 webview 并暂停 UI 直到完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:11:24.593

UIWebView 是 UIResponder 的子类——您可以从中捕获运动事件，例如倾斜/旋转。所以假设你发现你的代码有问题，你可以做点什么

您还可以使用 UIDevice 获取有关设备方向的更多信息

# apache - 如何在debian中将缓存保留在内存中

> ID：14514650
> 
> 赞同：0
> 
> 时间：2013-01-25T02:59:18.767
> 
> 标签：apache, debian, sphinx

**我使用狮身人面像建立一个网站。我有四个索引，每个索引都有将近30GB。我必须尝试让它快速搜索，所以我尝试将缓存保留在内存中。似乎操作系统已经做到了。但是一夜之后（没有人在晚上搜索），缓存消失了，即使我写了一个程序来保持搜索，它也没有工作。某些程序会删除缓存吗？**

**如何在 debian OS 中始终保持缓存？**

**顺便说一句，我使用 debian OS、django、apache2 和 mysql 来构建网站。**

# php - 在找到的 td 之后选择同一 tr 中的 td

> ID：14514653
> 
> 赞同：1
> 
> 时间：2013-01-25T02:59:50.837
> 
> 标签：php, curl, domdocument, domxpath

我已经阅读了文档并进行了搜索，但我仍然像开始时一样一无所知。

我正在尝试[从此页面](http://investing.money.msn.com/investments/stock-cash-flow/?symbol=mmm&stmtView=Qtr)中选择特定元素。

我知道如何找到`td`with `id="Source"`，但我不知道如何选择`td`相同的后续 s `tr`。

请帮忙。

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:13:12.307

您可以在没有 xpath 查询的情况下执行此操作：

```
$xmlErrors = libxml_use_internal_errors(true);

$dom = new DomDocument();
$dom->loadHtml($sourceHtml);

$tr = $dom->getElementById('Source')->parentNode;

foreach($tr->childNodes as $node)
  print $node->nodeValue;

libxml_clear_errors();
libxml_use_internal_errors($xmlErrors); 
```

# node.js - 你如何处理一个基本的 Websocket 框架

> ID：14514657
> 
> 赞同：2
> 
> 时间：2013-01-25T03:00:33.683
> 
> 标签：node.js, websocket

我正在为 web 套接字而不是 socket.io 等编写自己的实现。

我的握手很好，但是当客户端发送到服务器时，我不知道如何将这些数据变成有用的东西。它是一个对象吗？它是一个字符串吗？文档说它是 V8 堆外的原始内存位置数组。...？

![在此处输入图像描述](../Images/b072220b398d31a73969eb1e50fffbe2.png)

**功能示例（客户端是硬编码字符串）**

```
var http = require("http");
var crypto = require("crypto");
var server = http.createServer();
server.on("upgrade", function (req, socket, upgradeHead) {
    var crypto = require("crypto");
    var shasum = crypto.createHash("sha1");
    shasum.update(req.headers["sec-websocket-key"]);
    shasum.update("258EAFA5-E914-47DA-95CA-C5AB0DC85B11");
    var hash = shasum.digest("hex");
    var myVal = new Buffer(hash, "hex").toString('base64');

    var head = "";
    head += "HTTP/1.1 101 Switching Protocols\r\n";
    head += "Connection: Upgrade\r\n";
    head += "Upgrade: WebSocket\r\n";
    head += "Sec-WebSocket-Accept: " + myVal + "\r\n\r\n";

    socket.setEncoding("utf8");
    socket.write(head);

    socket.ondata = function (data, start, end) {
        var data = data.toString("utf8", start, end);
        console.log(" start: " + start + "\n end: " + end + "\n data: " + data);
    };
});
server.on("request", function (req, res) {
    if (req.url === "/e")
        process.exit();
    if (req.url.indexOf("favicon") !== -1)
        return;

    var html = "\
                <!DOCTYPE html>\r\n\
                <html>\r\n\
                    <head>\r\n\
                        <script>\r\n\
                            var connection = new WebSocket('ws:localhost:80');\r\n\
                            connection.onopen = function () {\r\n\
                                console.log('OPEN SUCCESS');\r\n\
                                connection.send('I am a message from the client.');\r\n\
                            };\
                            connection.onmessage = function(msg) {\r\n\
                                console.log(msg);\r\n\
                            }\r\n\
                            connection.onerror = function (e) { console.log('ERROR'); console.log(e); };\r\n\
                            connection.onclose = function (e) { console.log('CLOSE'); console.log(e);};\r\n\
                        </script>\r\n\
                    </head>\r\n\
                </html>";
    res.writeHead(200, { "Content-Type": "text/html" });
    res.write(html);
    res.end();
});
server.listen(80); 
```

[节点文档 - socket.on(data, myFunc);](http://nodejs.org/api/net.html#net_event_data)

[节点文档 - 缓冲区对象](http://nodejs.org/api/buffer.html#buffer_buffer)

[我正在使用的教程](http://www.laktek.com/2010/05/04/implementing-web-socket-servers-with-node-js/)

[详细的 WebSocket 文档](http://datatracker.ietf.org/doc/rfc6455/?include_text=1)

[eazy-peezy 维基百科握手解释](http://en.wikipedia.org/wiki/WebSocket#WebSocket_protocol_handshake)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T04:04:29.683

主要问题是 WebSocket 协议自编写该教程以来已经发展了很多。如果您阅读了您链接到的规范，第 5.2 节将讨论数据框架。

[https://www.rfc-editor.org/rfc/rfc6455#page-28](https://www.rfc-editor.org/rfc/rfc6455#page-28)

使您的数据乱码的主要问题是数据在发送时会自动屏蔽，因此您需要处理帧。

这是一个解码示例代码的示例。您将需要扩展它以覆盖更大的长度，并处理规范的其他部分。

```
socket.ondata = function (data, start, end) {
  var message = data.slice(start, end);
  var FIN = (message[0] & 0x80);
  var RSV1 = (message[0] & 0x40);
  var RSV2 = (message[0] & 0x20);
  var RSV3 = (message[0] & 0x10);
  var Opcode = message[0] & 0x0F;
  var mask = (message[1] & 0x80);
  var length = (message[1] & 0x7F);

  var nextByte = 2;
  if (length === 126) {
    // length = next 2 bytes
    nextByte += 2;
  } else if (length === 127){
    // length = next 8 bytes
    nextByte += 8;
  }

  var maskingKey = null;
  if (mask){
    maskingKey = message.slice(nextByte, nextByte + 4);
    nextByte += 4;
  }

  var payload = message.slice(nextByte, nextByte + length);

  if (maskingKey){
    for (var i = 0; i < payload.length; i++){
      payload[i] = payload[i] ^ maskingKey[i % 4];
    }
  }

  console.log(payload.toString());
}; 
```

# ios - 如何通过 AFNetworking 列出 ftp 的目录内容

> ID：14514658
> 
> 赞同：0
> 
> 时间：2013-01-25T03:00:33.793
> 
> 标签：ios, objective-c, ftp, afnetworking

我需要获取存储在 FTP 上的文件列表。我如何使用 AFNetworking 来做到这一点。我已经看过 SimpleFTPSample，但有更简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:10:58.920

[FTP Helper](https://github.com/erica/iphone-3.0-cookbook-/tree/master/C13-Networking/15-FTP%20Helper)类是我能找到的最简单最完整的 FTP 代码。该课程将在 OS X 或 iOS 上运行。

# groovy - 带有自动柯里化的 Groovy 闭包

> ID：14514659
> 
> 赞同：4
> 
> 时间：2013-01-25T03:00:53.010
> 
> 标签：groovy, currying

我刚刚开始使用 Groovy，来自 Haskell、C++ 和一点 Java 的背景。

假设我写了一个如下的闭包：

```
def mult = { x, y -> x * y } 
```

以后我就可以写了`mult(3,5)`。

但是如果我写`mult(3)`，我会得到一个编译错误。

我当然可以写`mult.curry(3)`，但这对我来说似乎有点难看。

那么我可以尝试这种方法：

```
def mult = { x -> { y -> x * y }} 
```

现在，`mult(3)`工作正常，但要乘以两个数字，我必须写`mult(3)(5)`乘以两个数字。

我想要的是两全其美。我希望能够写`mult(3)`，`mult(3,5)`并且`mult(3)(5)`。无论如何要让闭包表现得像这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T04:20:12.193

你可以做这样的事情来“currify”你的闭包：

```
def currify(fn) {
    { Object... args ->
        if (args.size() == fn.maximumNumberOfParameters) {
            fn(*args)
        } else {
            currify(fn.curry(*args))
        }
    }
}

def mult = currify { x, y -> x * y }
def twice = mult(2)

assert mult(2, 5) == 10
assert twice(5) == 10
assert mult(2)(5) == 10 
```

# ruby - 如何动态创建也在命名空间中的子类？

> ID：14514666
> 
> 赞同：1
> 
> 时间：2013-01-25T03:01:33.037
> 
> 标签：ruby, namespaces, metaprogramming, subclass

我正在为 RESTful API 开发一个 gem，我注意到，因为它是一个 REST api，所以很多资源 url 是相同的，因此每个类的一些方法是完全相同的（只是 uri路径不同）。

我开始创建这样的类：

```
module NameSpace
 Class1 < SuperClass; ... end
end 
```

在各种文件中，将类似：

```
moduel NameSpace
 Class2 < SuperClass; ... end
end 
```

所以，这是我迄今为止开发的：

```
 RESOURCE_NAMES = [
      "Class1",
      "Class2",
       ...
    ]

module NameSpace
 RESOURCE_NAMES.each {|class_name|
     Object.const_set(
        class_name,
        Class.new(SuperClass) do
          CONTROLLER = class_name.downcase

          @attributes = {}

          # class variables
          def self.show(id); ... end
          def self.update(id); ... end
          def self.destroy(id); ... end

        end
     )
  }
end 
```

但是当我尝试运行控制台并需要我的 gem 时，我得到了以下输出：

```
require "rubygems"

require "mygem"
/home/me/.rvm/gems/ruby-1.8.7-p371/gems/mygem-0.0.1/lib/mygem/restful_resource.rb:17: warning: already initialized constant CONTROLLER
/home/me/.rvm/gems/ruby-1.8.7-p371/gems/mygem-0.0.1/lib/mygem/restful_resource.rb:17: warning: already initialized constant CONTROLLER
/home/me/.rvm/gems/ruby-1.8.7-p371/gems/mygem-0.0.1/lib/mygem/restful_resource.rb:17: warning: already initialized constant CONTROLLER
/home/me/.rvm/gems/ruby-1.8.7-p371/gems/mygem-0.0.1/lib/mygem/restful_resource.rb:17: warning: already initialized constant CONTROLLER
/home/me/.rvm/gems/ruby-1.8.7-p371/gems/mygem-0.0.1/lib/mygem/restful_resource.rb:17: warning: already initialized constant CONTROLLER 
```

当我尝试做时 `> NameSpace::Cass1`，我得到

```
 NameError: uninitialized constant NameSpace::Class1 
```

我的问题是：我接近了吗？如何正确定义动态子类和命名空间类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:08:43.183

使用 const_set 设置 CONTROLLER 常量似乎可行：

```
const_set :CONTROLLER, class_name.downcase 
```

对于另一个问题，您应该更改`Object.const_set(`为 just `const_set(`，这将按照您想要的方式设置 NameSpace 模块中的常量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-11T14:34:05.797

考虑这个？

```
module NameSpace

  class SuperClass
  end

  RESOURCE_NAMES = %w[ Class1 Class2 Class3 Class4 ]

  RESOURCE_NAMES.each do |class_name|
    eval( "class #{ class_name } < SuperClass ; end" )
  end

end 
```

# hive - 配置单元中的映射类型变量

> ID：14514669
> 
> 赞同：11
> 
> 时间：2013-01-25T03:02:16.910
> 
> 标签：hive, hiveql

我在尝试在 hive 中定义地图类型时遇到了麻烦。根据[Hive Manual](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Types#LanguageManualTypes-ComplexTypes)肯定有一个地图类型，不幸的是没有任何关于如何使用它的例子。:-(

假设，我有一个包含以下列的表（用户）：

```
Name     Ph    CategoryName 
```

此“CategoryName”列具有特定的值集。现在我想创建一个将 CategoryName 映射到 CategoryID 的哈希表。我试着做：

```
set hivevar:nameToID=map('A',1,'B',2); 
```

我有两个问题：

1.  当我这样做时，`set hivevar:${nameToID['A']}`我认为它会将值打印为 1。但我得到“${hivevar:nameToID['A']} is undefined”

2.  我不确定我该怎么说，`select name, ph, ${nameToID[CategoryName]} from users`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-29T12:20:09.683

假设您有下表：

```
describe test;
name      string    
ph        string    
category  map<string,int>

select * from test;
name    ph  category
Name1   ph1 {"type":1000,"color":200,"shape":610}
Name2   ph2 {"type":2000,"color":200,"shape":150}
Name3   ph3 {"type":3000,"color":700,"shape":167} 
```

访问地图列：

```
select ph, category["type"], category["color"] from test;
ph1    1000    200
ph2    2000    200
ph3    3000    700 
```

使用 Hive 变量的等效项：

```
set hivevar:nameToID=
   map("t", category["type"], "c", category["color"], "s", category["shape"]);

select ph, ${nameToID}["t"], ${nameToID}["c"] from test;
ph1    1000    200
ph2    2000    200
ph3    3000    700 
```

这适用于 Hive 0.9.0

# r - 可以在不重新启动 R 的情况下卸载 Rcpp 包 DLL 吗？

> ID：14514672
> 
> 赞同：5
> 
> 时间：2013-01-25T03:02:27.303
> 
> 标签：r, rcpp

在 Windows 上安装 Rcpp 包时，需要确保包 DLL 已卸载，否则在复制新 DLL 时会出现“Permission Denied”错误。这意味着每次重新编译时都要重新启动 R，这很烦人。有什么方法可以在不杀死 R 的情况下卸载包 DLL？

我试过这个`detach("package:my_package", force=TRUE)`命令，但它没有卸载 DLL。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T03:17:48.080

对此意见分歧。我通常更喜欢在我的主 R 会话之外运行构建和测试，只需通过链接`R CMD INSTALL`（`Rscript`或者，在 Linux 上，`r`来自 littler 的调用）来测试新构建。如果您使用适当的选项来`R CMD INSTALL ...`跳过可能需要额外时间的部分，您将获得快速周转，并确保您确实获得了全新的构建。

如果您希望通过单击按钮获得相同的行为，RStudio 也提供了它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T12:41:42.207

如果您想在您的主 R 会话中执行此操作（不使用 RStudio，这使得重新安装包和重新加载 R 非常容易），您可以使用 devtools：

```
library(devtools)
load_all("path/to/my/package") 
```

除其他外，`load_all`将重新加载所有 R 代码，并重新编译和重新附加 DLL。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-25T03:10:32.450

我猜你需要运行`library.dynam.unload`来卸载 DLL。

# eclipse - 如何将 Eclipse 配置为自动“作为 Scala 应用程序运行”？

> ID：14514673
> 
> 赞同：4
> 
> 时间：2013-01-25T03:02:28.530
> 
> 标签：eclipse, scala

我在 Eclipse 中制作了一个 Scala 包和一个 Scala 应用程序，但每次我尝试从 运行它时`Run > Run`，Eclipse 都会问我：

```
Select a way to run 'example.scala':
- Java Application
- Scala Application 
```

如何让 Eclipse 知道项目或应用程序文件应始终作为 Scala 运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T03:25:22.710

1.  单击Eclipse 窗口中名为**Window的***菜单项。*
***   从*下拉列表中*选择**首选项**。**   打开**Preferences** *窗口*后，使用*左侧的菜单*导航到**Run/Debug**，然后**Launching***   在**Launch Operation**下，*勾选*具有以下描述的复选框：**始终启动先前启动的应用程序**。***

 ***之后，Eclipse 应该只询问您一次并记住该选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:57:53.427

@soc 描述了该问题的解决方法。目前没有其他/更好的方法可以使它起作用。它需要在将来修复。

幸运的是，这个问题在当前的 Scala IDE 夜间版本中得到了部分修复。有另一个问题的修复，它禁用“Run As Java”选项：[禁用 Scala 文件上的 JavaLaunchableTester](https://scala-ide-portfolio.assembla.com/spaces/scala-ide/tickets/1001178)

它不适用于所有情况，例如，如果右键单击一个包，则会显示已知的“运行方式”选项。但是对于具有 main 方法的对象，如果使用源文件的“运行方式”选项，它会很好地工作。***

# android - 无法将字幕文本与计时器一起使用

> ID：14514680
> 
> 赞同：1
> 
> 时间：2013-01-25T03:02:58.637
> 
> 标签：android, scroll, textview, marquee, chronometer

我想为我的文本视图实现选框以自动水平滚动，并且在同一活动中会有一个计时器。当我一起实现其中两个时，滚动文本视图不起作用并且计时器起作用。一旦我将计时器注释掉，textview 就可以工作了。但我希望它同时工作。有没有办法做到这一点？

我尝试使用 `textView.setSelected(true);`仍然无法正常工作

```
<com.ff.fbin.ScrollingTextView
    android:id="@+id/display_message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:marqueeRepeatLimit="marquee_forever"
    android:padding="5dip"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:text="Really Long Scrolling Text Goes Here.... ..... ............ .... ...."
    android:textSize="20dp"
    android:textStyle="bold" /> 
```

# c# - Markdown 锐利地将我的 html 字符串包装在“p”元素中？

> ID：14514681
> 
> 赞同：3
> 
> 时间：2013-01-25T03:03:01.930
> 
> 标签：c#, markdown, markdownsharp

我正在使用 Markdownsharp v1.13。

以下声明：

```
new Markdown().Transform("<section id=\"archives\">\r\n        <p>\r\n            No archives.\r\n        </p>\r\n</section>") 
```

将结果包装到 ap 元素中：

```
> "<p><section id=\"archives\">\n        <p>\n            No archives.\n
> </p>\n</section></p>\n" 
```

它到底为什么要这么做？我认为它应该完全忽略 html 标签？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:11:36.070

阻止 Markdown 扩展的块级元素列表是硬编码的；见[第 590 行](http://code.google.com/p/markdownsharp/source/browse/MarkdownSharp/Markdown.cs#590)及以下。

该列表默认不包含`<section>`元素（当 Markdown 创建时，HTML5 是遥远的未来），但正如您所见，您可以轻松地将其他 HTML 标记添加到该列表中。

# c - 源文件未编译 Dev C++

> ID：14514682
> 
> 赞同：19
> 
> 时间：2013-01-25T03:03:25.907
> 
> 标签：c, dev-c++

我刚刚安装了 Dev C++，我正在学习 C 编程。我使用的代码是

```
#include <stdio.h>    
int main()
{
  printf("Hello world");
  getch();
} 
```

我将其保存为 .c 文件。当我编译它工作正常，但当我编译并运行它说源文件未编译。所以我用谷歌搜索了一些东西，并在 youtube 上看到了这个视频，它向你展示了如何修复它。我还看到谷歌上的其他论坛建议同样的事情......但是，在做了什么之后，现在我什至无法编译我的代码。我收到这个错误

```
Compiler: Default compiler
Executing  C:\Dev-Cpp\bin\gcc.exe...
C:\Dev-Cpp\bin\gcc.exe "C:\Users\ubaid\Documents\C\Untitled1.c" -o "C:\Users\ubaid\Documents\C\Untitled1.exe"    -I"C:\Dev-Cpp\include"   -L"C:\Dev-Cpp\lib" 
gcc.exe: Internal error: Aborted (program collect2)
Please submit a full bug report.
See <URL:http://www.mingw.org/bugs.shtml> for instructions.

Execution terminated 
```

我也使用了这个链接上的要求，但仍然没有运气.. [http://learntogeek.com/miscellaneous/solved-source-file-not-compiled-error-in-dev-cpp/](http://learntogeek.com/miscellaneous/solved-source-file-not-compiled-error-in-dev-cpp/)

我正在使用 Windows 8

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-19T18:18:03.353

我遇到了这个问题并通过以下方式修复它： C:\Dev-Cpp\libexec\gcc\mingw32\3.4.2 ，然后删除 collect2.exe

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-04T11:05:16.450

安装新版本的 Dev c++。它在 Windows 8 中运行良好。它还支持 64 位版本。

下载链接为[http://sourceforge.net/projects/orwelldevcpp/](http://sourceforge.net/projects/orwelldevcpp/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-23T05:41:25.163

这可能是因为 c 编译器被设计为在 linux 中工作。我也遇到了这个问题并修复它去`tools`并选择`compiler options`。在框中单击`programs`

现在您将看到一个选项卡，其中包含`gcc`and`make`和相应的路径。分别编辑`gcc`和`make`使用`mingw32-c++.exe`and的路径`mingw32-make.exe`。现在它可以工作了。

[![答案](../Images/21e930d7a4f2b164e72069888ebd8674.png)](https://i.stack.imgur.com/pyVU7.png)

原因是您使用的是为 linux 构建的编译器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-02T06:16:12.057

我猜你正在使用带有[Orwell Dev CPP的 Windows 7](http://sourceforge.net/projects/orwelldevcpp/)

此版本的 Dev CPP 仅适用于 Windows 8。但是在 Windows 7 上，您需要它的旧版本，即[devcpp-4.9.9.2_setup.exe](http://sourceforge.net/projects/dev-cpp/files/Binaries/Dev-C++%204.9.9.2/) 从链接下载并使用它。（不要忘记卸载您电脑上已经安装的任何其他版本）还要注意旧版本不适用于 Windows 8。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-25T08:56:53.463

我找到了解决方案。请按照以下步骤操作：

1.  右键单击我的组合。图标

2.  单击高级设置。

3.  单击环境变量。在环境变量的顶部单击新建

4.  将变量名称设置为：PATH，然后将变量值设置为：（“g++ .exe 的位置”）例如。C:\Program Files (x86)\Dev-Cpp\MinGW64\bin

5.  点击确定

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T03:13:00.200

您始终可以尝试从命令提示符手动执行此操作。导航到文件的路径并键入：

```
gcc filename.c -o filename 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-03T21:43:34.323

发生此错误是因为您的设置不正确。

例如我收到

> ```
> cannot open output file Project1.exe: Permission denied
> collect2.exe: error: ld returned 1 exit status
> 
> mingw32-make.exe: *** [Project1.exe] Error 1 
> ```

因为我没有权限在我的`exe`文件上写。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-10T23:05:12.293

经过一番调查，并在 Dr.Topaz 的帮助下，我了解到您需要确认`g++`在编译器选项中设置的程序确实编译了源代码。就我而言，该`C:\Dev-Cpp\bin\g++.exe`程序没有*创建*一个 exe，但该`C:\Dev-Cpp\bin\c++.exe`程序创建了。这两个程序似乎都打算采用与[GNU g++](https://gcc.gnu.org/onlinedocs/)相同的参数和选项。我很想找到有关 Dev-C++ 编译器程序的实际文档，但到目前为止还没有。

您可以使用如下简单示例测试编译器程序：

```
C:\Dev-Cpp\bin\c++.exe hello.cpp -o hello.exe 
```

目前在 2021 年，[Dev-C++](http://www.dev-cpp.com/)站点邀请您下载原始的 Dev-C++ 或名为 Embarcadero 的组的新分支。

我决定尝试 Embarcadero 版本，体验稍好一些。用户界面仍然有点过时，但`g++.exe`它附带的程序能够毫无问题地编译程序。再次注意程序的安装位置，但就我而言，Embarcadero 编译器程序位于`C:\Program Files (x86)\Embarcadero\Dev-Cpp\TDM-GCC-64\bin`.

原始的 Dev-C++ 和 Embarcadero 都带有 mingw-32 版本的编译器程序，据我所见，它们在 Git Bash 控制台中工作，略有不同，例如在使用 command 时无法识别默认语言环境`std::cout.imbue(std::locale(""))`。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-12-02T08:53:15.827

I was facing the same issue as described above.

It can be resolved by creating a new project and creating a new file in that project. Save the file and then try to build and run.

Hope that helps. :)

# database - Django 的 TestCase.setUp 没有按预期工作

> ID：14514684
> 
> 赞同：0
> 
> 时间：2013-01-25T03:04:04.933
> 
> 标签：database, django, unit-testing

```
class Dummy(TestCase):
    def setUp(self):
        thing = Thing.objects.create(name="Thing")

    def test_a(self):
       self.assertTrue(Thing.objects.get(pk=1))

    def test_b(self):
       self.assertTrue(Thing.objects.get(pk=1)) 
```

在此示例中，我希望 setUp 在每个测试用例之前运行，但它仅在第一个测试用例之前运行，然后回滚更改。这会导致 test_a 通过，但等效的 test_b 失败。这是预期的行为吗？我需要做什么来确保数据库在每个测试用例之前都处于相同的状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:18:09.003

弄清楚了。setUp每次*都*在运行，只是它增加了数据库中的私钥。因此 pk=1 的事物不再存在。这工作得很好：

```
class Dummy_YepThatsMe(TestCase):
    def setUp(self):
        thing = Thing.objects.create(name="Thing")

    def test_a(self):
       self.assertTrue(Thing.objects.get(name="Thing"))

    def test_b(self):
       self.assertTrue(Thing.objects.get(name="Thing")) 
```

# php - PHP - 重新排序数组以匹配另一个数组的顺序

> ID：14514685
> 
> 赞同：1
> 
> 时间：2013-01-25T03:04:19.943
> 
> 标签：php, arrays

我有 1 个数组，它具有我需要的正确值，但它是乱序的。然后我有另一个具有相同键的数组，它的顺序正确，但值不是我需要的。

这是我的第一个具有正确值的数组，但顺序不正确：

```
Array
(
    [countTotal] => 7268
    [zip] => 
    [yearName] => 
    [countZipRadius] => 
    [Acura] => 1334
    [Cadillac] => 511
    [Ford] => 5423
) 
```

这是我的第二个数组，顺序正确但值错误：

```
Array
(
    [countZipRadius] => 0
    [zip] => 1
    [yearName] => 2
    [Acura] => 3
    [Cadillac] => 4
    [Ford] => 5
    [countTotal] => 6
) 
```

我试图找出一种方法来创建一个具有来自数组 1 的正确值的新数组，但这是按照数组 2 的顺序。

我一直在玩它一段时间，似乎无法得到它。

任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:07:09.397

```
$c = array();
foreach (array_keys($b) as $k) {
    $c[k] = $a[k];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:24:58.700

你可以使用php的`array_multisort`函数：

```
$original = array(
    'countTotal' => 7268,
    'zip' => '',
    'yearName' => '',
    'countZipRadius' => '',
    'Acura' => 1334,
    'Cadillac' => 511,
    'Ford' => 5423,
    );

$right = array(
    'countZipRadius' => 0,
    'zip' => 1,
    'yearName' => 2,
    'Acura' => 3,
    'Cadilac' => 4,
    'Ford' => 5,
    'countTotal' => 6
);

//make sure both arrays are in the same order
ksort($original);
ksort($right);

array_multisort($right, $original);

print_r($original); 
```

当你给它两个具有相同数量元素的数组时，它会根据第一个数组的顺序对这两个数组进行排序 - 在本例中是 0、1、2、3 等值`$right`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T03:15:40.067

使用烤饼的方法：

```
$original = array(
    'countTotal' => 7268,
    'zip' => '',
    'yearName' => '',
    'countZipRadius' => '',
    'Acura' => 1334,
    'Cadillac' => 511,
    'Ford' => 5423,
    );
$right = array(
    'countZipRadius' => 0,
    'zip' => 1,
    'yearName' => 2,
    'Acura' => 3,
    'Cadilac' => 4,
    'Ford' => 5,
    'countTotal' => 6
);
foreach ($right as $key => $value) {
    $new[$key] = $original[$key];
}
print_r($new); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T03:17:36.827

```
$array = array('a' => 100, 'b' => '5');

$newArray = array_combine(array_keys($array), range(0, count($array) - 1));

var_dump($newArray); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T03:09:43.297

1.  创建一个新数组（数组 C）
2.  使用 FOR 循环遍历数组 B
3.  对于数组 B 中的每个值，从数组 A 中获取具有相同键的值，然后设置数组 C 将这些值附加到数组 C。这将使它们在 C 中以正确的顺序排列。

# c# - MVC4 WebGrid 和 Ajax 分页

> ID：14514686
> 
> 赞同：3
> 
> 时间：2013-01-25T03:04:54.303
> 
> 标签：c#, jquery, ajax, asp.net-mvc, asp.net-mvc-4

我对 MVC4 中的 WebGrid 有一个简单的问题（可能不是一个简单的答案！）。

我有一个像这样的功能网格

```
<div id="Submitted">
    @Html.Grid(
        Model.Submitted, displayHeader: false, fieldNamePrefix: "Submitted_", ajaxUpdateContainerId: "Submitted",
        columns: new WebGridColumn[]{
        new WebGridColumn(){ ColumnName = "Date",Header = "Date",Style = "",CanSort = false,Format = x => x.Date.ToString(Globals.Default.DATEFORMAT) },
        new WebGridColumn(){ ColumnName = "ID",Header = "Review",Style = "", CanSort = false, Format = x=>@Html.ActionLink("Review","Review","Company",new{ID = x.ID },new{})  }
    })
</div> 
```

当单击下一页按钮时使用 Ajax 重新加载“提交”的 div 时，它会生成下一页正常 - 但它会转到控制器上的原始操作，这应该是一个完整的页面。

它如何过滤除网格本身之外的所有内容？用一些聪明的 C# 代码或 jQuery？

编辑：澄清一下，我不是在问如何更好地进行分页，或者我自己，就我而言，使用 webgrid 的默认分页正在正常工作 - 我在问 WebGrid 如何做到它是 ajax回发到返回完整页面的操作时分页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T04:43:20.083

它使用 jquery load() 和允许它仅选择相关传入节点的功能来执行此操作。这取自[http://msdn.microsoft.com/en-us/magazine/hh288075.aspx](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)

> 为了允许脚本仅应用于 WebGrid，它使用 jQuery 选择器来识别具有 ajaxGrid 类集的元素。该脚本使用 jQuery live 方法 (api.jquery.com/live) 为排序和分页链接（通过网格容器内的表头或页脚标识）建立单击处理程序。这将为匹配选择器的现有和未来元素设置事件处理程序，这很方便，因为脚本将替换内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:36:46.097

您应该将网格放在局部视图中并通过 Ajax 对其进行更新。在控制器中，您应该找到请求的类型。如果是 ajax 请求（通过 Request.IsAjaxRequest() ），则必须返回部分视图，否则必须返回原始视图。

如果您使用的是 ajax.beginform，则必须执行以下操作：

```
@using (Ajax.BeginForm("Index", new AjaxOptions { OnFailure = "searchFailed", HttpMethod = "POST", UpdateTargetId = "Submitted" }))
    {
    ...
    }

<div id="Submitted">
   @Html.Partial("_partialviewname", Model)    
</div> 
```

rn 和在控制器中：

```
 public ActionResult Index(int? page)
    {
      ...
      if (Request.IsAjaxRequest())
        {
          return PartialView("_partialviewname", db.model)  
         }
      return View(db.model)

    } 
```

# flash - 导出 PNG 序列时出现冗余透明边框

> ID：14514689
> 
> 赞同：0
> 
> 时间：2013-01-25T03:05:11.817
> 
> 标签：flash, export, flash-cs5, flash-cs6, jsfl

我尝试使用 Flash CS6 将影片剪辑导出为 PNG 序列。影片剪辑包含其他影片剪辑。因此，结果 PNG 图像包含奇怪的冗余透明边框。正如我发现它在内部影片剪辑（或任何其他对象）旋转时出现。

这是一个例子：

![在此处输入图像描述](../Images/bd4834c33c5b4df1cca417b6100f33c3.png)

我导出 MovieClip #2，蓝色矩形是 PNG 大小。红色矩形是理想的大小。我可以分解内部的 MovieClip，但我会丢失一些动画。有没有什么方法可以在没有这个边框的情况下导出 PNG 序列？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:42:32.207

我的理解是这样的：你已经根据一个movieclip导出了很多png，结果是所有的png文件都与movieclip的大小相同，而对于一些png文件，这会留下一个边框png 的实际图形内容周围的未使用区域。

您想要做的是将所有 png 尺寸紧紧包裹在 png 的图形内容上，即使这意味着所有 png 将具有不同的尺寸？

如果是这样，一种方法是您可以让它们在 Photoshop 中快速通过：在 Photoshop 中打开一个 png，转到图像 -> 修剪，然后保存它。您可以制作一个快速脚本，然后让它对您的所有 png 进行批处理以修剪它们。

（我的意思并不是要以任何方式浓缩，这对我来说听起来像是一个奇怪的要求，所以我想确定一下。）

# c# - 具有通用约束的通用方法

> ID：14514696
> 
> 赞同：5
> 
> 时间：2013-01-25T03:05:42.850
> 
> 标签：c#, generics, generic-method

我想要做的是有一个将泛型类型作为带有约束的参数的方法。但是，约束的类型也有第二个泛型类型，但我希望该方法能够工作，而不管第二个类型是什么：

```
public class IEvent<T> where T : EventArgs { }
public class EventManager
{
    public void DoMethod<T>() where T: IEvent<???>
    {
    }
} 
```

具体来说，我试图让我的`EventManager`班级接收任何类型的事件，然后对其进行处理。我是不是把事情复杂化了，或者这可行吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T03:09:26.253

您必须使用第二个约束：

```
void DoMethod<TEvent, TArgs>() where TEvent : IEvent<TArgs> where TArgs : EventArgs {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:20:21.857

试试这个。

```
public class IEvent<T> where T : EventArgs { }
public class EventManager
{
    public void DoMethod<T, U>() where T : IEvent<U> where U : EventArgs
    {
    }
} 
```

# edit - 控制器中的 ABAddressBookRegisterExternalChangeCallback 在完成编辑时未调用

> ID：14514703
> 
> 赞同：1
> 
> 时间：2013-01-25T03:07:08.663
> 
> 标签：edit, abaddressbook, abrecordref

我有几个与地址簿和`ABAddressBookRegisterExternalChangeCallback`.

```
addressBook = ABAddressBookCreateWithOptions(NULL, &error); 
```

我正在打开一个新的联系人记录`allowsEditing = YES`并将其添加到

```
ABAddressBookAddRecord(addressBook, aContact,&anError)

ABAddressBookRegisterExternalChangeCallback(addressBook, changed, (__bridge void *)(self)); 
```

所有这一切都不是在应用程序委托中完成的（我读过一篇文章说这可能是回调未被调用的原因）

是否必须在应用程序委托中完成？问题是因为这个联系人是刚刚创建的吗？但是，如果我尝试调用 app delegate 来：

```
ab = ABAddressBookCreateWithOptions(NULL, &error);
ABAddressBookRegisterExternalChangeCallback(appABChanged, ab, (__bridge void *)(self)); 
```

应用程序崩溃。

在控制器中单击 DONE 按钮时，还有其他方法可以得到通知吗？我不关心AB的变化，我只想使用内置的联系人编辑功能，我真正关心的是ABRecordRef。

我想我想说的是我真正需要的是 ABPersonViewController 通知完成单击按钮并希望收到修改后的 ABrecordRef 并带有一个标志，如果它实际被修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T12:22:57.287

首先您注册，例如在 didFinishingLunching 中您使用此函数注册：

```
ABAddressBookRef book = ABAddressBookCreate();
ABAddressBookRegisterExternalChangeCallback(book, addressBookChanged, self); 
```

当您更改本地联系人的记录时，您会使用此功能收到通知：`

```
void addressBookChanged(ABAddressBookRef addressBook, CFDictionaryRef info, void *context) {
    NSLog(@"Recevied notification");
} 
```

# mysql - 使用 SUM 以外的聚合数据透视行？

> ID：14514705
> 
> 赞同：1
> 
> 时间：2013-01-25T03:07:12.813
> 
> 标签：mysql, sql

是否可以在 MySQL 中使用 SUM 以外的聚合来透视行？我一直在网上寻找，并通过我的课程书。但是，我什么也找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:42:34.693

简短的回答 - 是的，您可以根据需要执行的查询类型来使用其他聚合 - 每个都可以用于特定目的。

## 用于`COUNT()`计算行数（如`SUM()`）

因为聚合函数会消除`NULL`值，所以您有时会遇到类似于`SUM(CASE...)`您可能习惯看到的模式（其表达式返回 1 或 0，它们会相加）。除了`SUM()`在此方法中使用聚合，您可以使用 a`COUNT()`代替，前提是它的表达式返回一个值（任何值）或 a `NULL`。`NULL`s 被消除，并且计数返回的`COUNT()`非空行。这仅对计算值有用

`val = 1`这是一个使用`COUNT()`聚合计算每组行数的示例。假设您有下表，并且您希望将结果作为列`a, b`。

```
group value
 a     1
 a     1
 a     2
 b     1
 b     2 
```

### 使用`COUNT()`

```
SELECT 
  `group`,
  /* the aggregate eliminates NULLs (rows where val <> 1) */
  COUNT(CASE WHEN `group` = 'a' THEN val ELSE NULL END) AS `a`,
  COUNT(CASE WHEN `group` = 'b' THEN val ELSE NULL END) AS `b`
FROM pivot
WHERE val = 1 
```

结果：

```
 a      b
-------------
 2      1 
```

演示：[http ://sqlfiddle.com/#!2/b4585/7](http://sqlfiddle.com/#!2/b4585/7)

`SUM()`这与使用and zeros 和 one可以完成的基本相同：

### 使用`SUM()`你可能已经看到的方法可以完成同样的事情：

```
SELECT 
  /* the aggregate eliminates NULLs (rows where val <> 1) */
  SUM(CASE WHEN `group` = 'a' THEN 1 ELSE 0 END) AS `a`,
  SUM(CASE WHEN `group` = 'b' THEN 1 ELSE 0 END) AS `b`
FROM pivot
WHERE val = 1 
```

演示：[http ://sqlfiddle.com/#!2/b4585/8](http://sqlfiddle.com/#!2/b4585/8)

* * *

## 用于`MAX()`旋转键/值对列表：

有时，您只想更改从行到列的一对一映射。例如，如果您需要展平键/值对列表，这很有用。假设你有一个这样的表，你想要转出的每一列只有一行：

```
key    value
------------
k1     v1
k2     v2
k3     v3 
```

...你想要这样的结果：

```
k1  k2  k3
-----------
v1  v2  v3 
```

在这种情况下，您可以使用 a`MAX()`或`MIN()`聚合，因为再次因为 NULL 值将被聚合消除，所以只会返回实际具有非 null 的值，因此是`MAX()`.

因此，虽然此查询会旋转它们，但会产生 3 行，每行只有一个非空值：

```
SELECT
  CASE WHEN `key` = 'k1' THEN `value` ELSE NULL END AS `k1`,
  CASE WHEN `key` = 'k2' THEN `value` ELSE NULL END AS `k2`,
  CASE WHEN `key` = 'k3' THEN `value` ELSE NULL END AS `k3`
FROM key_value 
```

结果：

```
k1   k2   k3
---------------
v1   NULL NULL
NULL v2   NULL
NULL NULL v3 
```

演示：[http ://sqlfiddle.com/#!2/813b3/5](http://sqlfiddle.com/#!2/813b3/5)

通过使用`MAX()`聚合，您可以通过摆脱`NULL`s有效地将其折叠为一行

```
SELECT
  MAX(CASE WHEN `key` = 'k1' THEN `value` ELSE NULL END) AS `k1`,
  MAX(CASE WHEN `key` = 'k2' THEN `value` ELSE NULL END) AS `k2`,
  MAX(CASE WHEN `key` = 'k3' THEN `value` ELSE NULL END) AS `k3`
FROM key_value 
```

给出了我们想要的结果——转出一行：

```
k1  k2  k3
-----------
v1  v2  v3 
```

演示：[http ://sqlfiddle.com/#!2/813b3/4](http://sqlfiddle.com/#!2/813b3/4)

# powershell - Windows 开发人员许可证（权限）

> ID：14514706
> 
> 赞同：1
> 
> 时间：2013-01-25T03:07:36.797
> 
> 标签：powershell, windows-8, windows-store-apps

我尝试在我的计算机上设置 Windows Developer 许可证，但失败了。

我正在运行 Visual Studio 2012。

当我单击项目 -> 商店 -> “获取开发人员许可证”时，它给了我一个信息对话框并说：“如果您同意这些条款并想安装开发人员许可证，请单击“我同意”。“我同意”按钮有一个 Windows 管理员盾牌。

当我单击“我同意”按钮并等待没有任何反应时。

我的下一次尝试是从命令行执行此操作，因此我调出 PowerShell 并输入：

```
Show-WindowsDeveloperLicenseRegistration 
```

我得到：

> Show-WindowsDeveloperLicenseRegistration ：您需要管理员权限才能获取或删除开发人员许可证。

所以我右键单击 Windows PowerShell 并单击“以管理员身份运行”并等待......然后等待......没有任何反应。

我感觉 Windows 应用商店还没有准备好迎接黄金时段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:35:54.790

显然我没有足够频繁地重新启动 Windows 8，@Ken 帮助我弄清楚了这一点。

重新启动修复它。

一旦我能够以管理员身份运行它，从 VS 获得许可证就很容易了。

# android - singleCursorHandlerTouchEvent -getEditableSupport FASLE 错误

> ID：14514709
> 
> 赞同：4
> 
> 时间：2013-01-25T03:08:37.867
> 
> 标签：android, file-upload, browser, android-webview

我的应用程序中有一个 webview。网页中有一个浏览（上传文件）按钮。当我在 HTC (Android 4.0.3) 中测试应用程序时，它可以工作，但在 Galaxy S3 (Android 4.1.1) 中它不工作。

我不会得到文件选择器菜单。显然，当我触摸屏幕的任何位置时，按钮是不可点击的

“singleCursorHandlerTouchEvent -getEditableSupport FASLE”。

我已经尝试了所有可能的解决方案。

```
 // Profile web view
    mWebView = (WebView) findViewById(R.id.itemWebView);
    //improve the speed
    mWebView.getSettings().setRenderPriority(RenderPriority.HIGH);
    mWebView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);

    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setSupportZoom(false);
    //setup the file chooser
    mWebView.setWebChromeClient(new WebChromeClient() {
        public void openFileChooser(ValueCallback<Uri> uploadMsg) {  

            mUploadMessage = uploadMsg;
            Intent i = new Intent(Intent.ACTION_GET_CONTENT);
            i.addCategory(Intent.CATEGORY_OPENABLE);
            i.setType("image/*");
            ProfileActivity.this.startActivityForResult(Intent.createChooser(i, "Image Chooser"),FILECHOOSER_RESULTCODE);
        }

        @SuppressWarnings("unused")
        public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType) {
            openFileChooser(uploadMsg);
        }

        @SuppressWarnings("unused")
        public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType, String capture) {
            openFileChooser(uploadMsg);
        } 

    }); 
```

这是我的 onActivityResult 函数

```
protected void onActivityResult(int requestCode, int resultCode,
        Intent intent) {
    if (requestCode == FILECHOOSER_RESULTCODE) {
        if (null == mUploadMessage)
            return;
        Uri result = intent == null || resultCode != RESULT_OK ? null
                : intent.getData();
        mUploadMessage.onReceiveValue(result);
        mUploadMessage = null;
    } else {
        System.out.println("Something else->" + requestCode);
    }
} 
```

在我的 jQuery 移动网页中，我有一个简单的表单：

```
<form id="edit" method="post" enctype="multipart/form-data" data-ajax="false" action = "profile_myimage.php">
            <div data-role="fieldcontain">
                <label for="image" class="required">Select photo</label>
                <input type="file" name="image" id="image" />
                <p class="error_message" id="img"><p>
            </div> 
```

请帮我解决这个问题。我感谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T01:40:42.180

我刚刚遇到了同样的问题，对我来说问题（似乎只在 Android 2.xx 上）是 WebView 没有获得焦点。

您可以这样做以在收到触摸时请求关注您的 WebView：

```
webView.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View view, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN && !view.hasFocus()) {
            view.requestFocus();
        }
        return false;
    }
}); 
```

请参阅[android WebView - 内容不可编辑](https://stackoverflow.com/questions/15054529/android-webview-content-not-editable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T20:55:02.530

我在使用 WebViewClient 和表单开发应用程序时遇到了同样的问题。原来解决方案是让你的输入更大（确保它没有溢出）

我的 HTML 布局是

```
<form>
  <div>
    <input type="text" onclick="..." />
    <span>...</span>
  </div>
</form> 
```

将一些大小调整 CSS 应用于元素。父 div 上面有溢出：隐藏，所以当你在浏览器中查看页面时，输入元素有一个滚动条。修复此问题使 onclick 再次开始正确触发，并使输入可以从 android 应用程序中选择。

看看这个问题（帮我解决了这个问题）：[Phonegap button does not fire due to "singleCursorHandlerTouchEvent -getEditableSupport FASLE"](https://stackoverflow.com/questions/10398914/phonegap-button-does-not-fire-due-to-singlecursorhandlertouchevent-geteditable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T09:45:12.353

我有一个类似的问题：singleCursorHandlerTouchEvent -getEditableSupport FASLE

似乎android（在三星s3 mini上）不喜欢div元素中有一个滚动条，其中包含文件输入按钮。

这就是我所拥有的：

```
<div style ="overflow: auto; white-space: nowrap;" class="panel-body commentForm" /> 
```

这就是它现在的工作方式：

```
<div class="panel-body commentForm" /> 
```

# php - Wordpress 主题错误“致命错误：无法重新分配自动全局变量 _POST”

> ID：14514711
> 
> 赞同：2
> 
> 时间：2013-01-25T03:08:50.617
> 
> 标签：php, wordpress, wordpress-theming

这个主题有一个错误， [http://www.mafiashare.net/download/sound-rock-music-band-wordpress-theme/](http://www.mafiashare.net/download/sound-rock-music-band-wordpress-theme/) 当我尝试激活它时，这会出现

```
( ! ) SCREAM: Error suppression ignored for
( ! ) Fatal error: Cannot re-assign auto-global variable _POST in C:\wamp\www\web\wp-content\themes\soundrock\functions.php on line 48
Call Stack
#   Time    Memory  Function    Location
1   0.0014  364560  {main}( )   ..\themes.php:0
2   0.0043  433520  require_once( 'C:\wamp\www\web\wp-admin\admin.php' )    ..\themes.php:10
3   0.0048  451648  require_once( 'C:\wamp\www\web\wp-load.php' )   ..\admin.php:30
4   0.0052  463256  require_once( 'C:\wamp\www\web\wp-config.php' ) ..\wp-load.php:29
5   0.0061  553312  require_once( 'C:\wamp\www\web\wp-settings.php' )   ..\wp-config.php:90 
```

所以在第48行的functions.php中，我删除了这段代码，然后主题正在工作，但我想知道为什么它会抛出错误？

```
function events_meta_save($_POST, $post_id) {
    global $wpdb;
    if ( empty($_POST["event_social_sharing"]) ) $_POST["event_social_sharing"] = "";
    if ( empty($_POST["event_start_time"]) ) $_POST["event_start_time"] = "";
    if ( empty($_POST["event_end_time"]) ) $_POST["event_end_time"] = "";
    if ( empty($_POST["event_all_day"]) ) $_POST["event_all_day"] = "";
    if ( empty($_POST["event_booking_url"]) ) $_POST["event_booking_url"] = "";
    if ( empty($_POST["event_address"]) ) $_POST["event_address"] = "";
        $sxe = new SimpleXMLElement("<event></event>");
            $sxe->addChild('event_social_sharing', $_POST["event_social_sharing"] );
            $sxe->addChild('event_start_time', $_POST["event_start_time"] );
            $sxe->addChild('event_end_time', $_POST["event_end_time"] );
            $sxe->addChild('event_all_day', $_POST["event_all_day"] );
            $sxe->addChild('event_booking_url', $_POST["event_booking_url"] );
            $sxe->addChild('event_address', $_POST["event_address"] );
                $sxe = save_layout_xml($sxe);
        update_post_meta( $post_id, 'cs_event_meta', $sxe->asXML() );
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T03:18:03.470

代替

```
function events_meta_save($_POST, $post_id) {
    global $wpdb;
    if ( empty($_POST["event_social_sharing"]) ) $_POST["event_social_sharing"] = "";
    ....
    .... 
```

和

```
function events_meta_save($_my_post, $post_id) {
    global $wpdb;
    if ( empty($_my_post["event_social_sharing"]) ) $_POST["event_social_sharing"] = "";
    ....
    .... 
```

不要忘记将`$_POST`条件内的ALL 替换为您`$_my_post`喜欢的任何其他名称

原因，如其他答案中所述：

> 您不能将 $_POST 用作函数/方法参数

. 这样做会尝试重新分配符号表中的变量。将此视为该语言的已保存关键字。将它放在函数签名中就像使用语言的关键字作为变量名来定义新变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-28T15:14:37.983

@snjflame，您不需要`$_POST`用作函数的参数，因为它是一个**超全局**变量。你不能重新定义`$_POST`变量；您需要在函数开头为变量定义一个“ `handler`”并在下面使用它。`$_POST`

例如：

```
<?php
    function events_meta_save( $post_id ) {
        global $wpdb;
        $post = $_POST;
        if ( empty($post["event_social_sharing"]) ) $post["event_social_sharing"] = "";
        if ( empty($post["event_start_time"]) ) $post["event_start_time"] = "";
        if ( empty($post["event_end_time"]) ) $post["event_end_time"] = "";
        if ( empty($post["event_all_day"]) ) $post["event_all_day"] = "";
        if ( empty($post["event_booking_url"]) ) $post["event_booking_url"] = "";
        if ( empty($post["event_address"]) ) $post["event_address"] = "";
        $sxe = new SimpleXMLElement("<event></event>");
            $sxe->addChild('event_social_sharing', $post["event_social_sharing"] );
            $sxe->addChild('event_start_time', $post["event_start_time"] );
            $sxe->addChild('event_end_time', $post["event_end_time"] );
            $sxe->addChild('event_all_day', $post["event_all_day"] );
            $sxe->addChild('event_booking_url', $post["event_booking_url"] );
            $sxe->addChild('event_address', $post["event_address"] );
        $sxe = save_layout_xml($sxe);
        update_post_meta( $post_id, 'cs_event_meta', $sxe->asXML() );
    }
?> 
```

# iphone - 带有方向或箭头主题的 UISegmentedControl

> ID：14514712
> 
> 赞同：0
> 
> 时间：2013-01-25T03:08:52.500
> 
> 标签：iphone, ios, objective-c, uisegmentedcontrol, uicontrol

我已经使用来自**[cocoacontrols.com](http://www.cocoacontrols.com/controls/basequencecontrol)****的BASequenceControl实现了****UISegmentedControl**和**Direction**主题。

 **我添加了**[BASequenceControl.h](http://pastebin.com/Xz6xwyL0)**和**[BASequenceControl.m](http://pastebin.com/r2J4vSVZ)**类以及来自**[GitHub的所需图像](https://github.com/dimzzy/BaseAppKit)**

伟大的。它对我来说工作得很好..但是我对最后一段部分提示感到担忧。

它显示最后一段的垃圾空间。

**原始屏幕截图**

![在此处输入图像描述](../Images/0de0a42cd665eb618481d01646f32003.png)

**我需要这样**

![在此处输入图像描述](../Images/7eb5a5f05d27146aa3bffff0be330d26.png)

**我已经实现的代码**

```
 #import "BASequenceControl.h"

BASequenceControl *bASequenceControl = [[BASequenceControl alloc] init];                                    
bASequenceControl.frame = CGRectMake(10, 10, 200, 44);
[bASequenceControl addSegmentWithTitle:@"First" animated:NO];
[bASequenceControl addSegmentWithTitle:@"Second" animated:NO];

bASequenceControl.leftMargin = -22;
bASequenceControl.rightMargin = 0;
bASequenceControl.overlapWidth = 22;

[self.view addSubview:bASequenceControl]; 
```

对此的任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:24:29.760

这是一个非常简单的修复。您必须编辑 BASequenceControl.m 文件，或者您可以复制该类并重命名它。

导致问题的行`drawRect:`基本上在控件的整个背景上绘制灰色箭头。在空白处创建漂亮的渐变。

```
[passiveSegmentImage drawInRect:CGRectMake(-passiveSegmentImage.size.width, 0,
                                           w + 2 * passiveSegmentImage.size.width, h)]; 
```

您可以将其更改为：

```
[passiveSegmentImage drawInRect:CGRectMake(0, 0,
                                           w, h)]; 
```

现在你必须告诉控件它不应该是不透明的。像这样更新初始化程序。

```
- (void)awakeFromNib {
    _selectedSegmentIndex = -1;
    [self setOpaque:NO];
    [super awakeFromNib];
}

- (id)init {
    if ((self = [super init])) {
        [self setOpaque:NO];
        _selectedSegmentIndex = -1;
    }
    return self;
} 
```

这非常快速和肮脏，您可以使用属性使其可设置。然后向 BaseAppKit 提交一个拉取请求，但我会把它留给你。这是一个要点，您可以直接在 BASequenceControl.m 中复制和粘贴以修复悬垂。 [https://gist.github.com/4632686](https://gist.github.com/4632686)

编辑：确保您使用`init`的是初始化程序，然后`setFrame:`（我不确定为什么`initWithFrame:`没有在类中被覆盖。）

```
BASequenceControl *control = [[BASequenceControl alloc] init];
[control setFrame:CGRectMake(0, 0, 300, 40)]; 
```

![固定控制，绿色为戏剧效果](../Images/de1f811f0a199a434cc8919ae41f25bb.png)

戏剧效果的绿色背景

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:16:28.120

如何使用这样的面具：

![在此处输入图像描述](../Images/fef438dbb1cc7eadb19e6bc05ec88337.png)

掩盖您的 SegmentedControl**

# php - 在 MySQL 中，将 LOCK TABLES 调用包装在 try catch 中是最佳实践吗？

> ID：14514713
> 
> 赞同：4
> 
> 时间：2013-01-25T03:09:10.113
> 
> 标签：php, mysql, try-catch

在执行“LOCK TABLES”时，将调用包装在 try/catch 中以确保表在发生异常时解锁是否明智？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:41:14.477

通常，最好将其`try { } catch`用于需要撤消先前操作以防出现任何错误的操作；它不仅限于数据库语句。

也就是说，在使用数据库时，建议使用更细粒度的锁定机制，例如 InnoDB 等事务数据库附带的锁定机制。您仍将使用`try { } catch`，但以这种方式：

```
// start a new transaction
$db->beginTransaction();
try {
    // do stuff
    // make the changes permament
    $db->commit();
} catch (Exception $e) {
    // roll back any changes you've made
    $db->rollback();
    throw $e;
} 
```

冲突解决的确切行为由事务隔离级别定义，可以根据您的需要进行更改。

# java - Android Facebook SDK 没有找到类定义 com.facebook.android.Facebook

> ID：14514727
> 
> 赞同：3
> 
> 时间：2013-01-25T03:10:35.153
> 
> 标签：java, android, noclassdeffounderror, facebook-android-sdk

我正在使用 Facebook SDK 的一个版本，我不确定哪个版本，因为我得到了 eclipse 项目并被告知要使用它，但它是在 SDK 3.0 发布之前给我的，所以很可能是 2.0，在 Android应用程序。该应用程序的项目将 SDK 项目列为必需项目，以使我们能够在应用程序内提示 Facebook 登录。

我已经尝试告诉 eclipse 导出带有或不带有 Facebook 项目的项目，但这没有区别。

我还尝试在安装和不安装官方 Facebook 应用程序的情况下运行该应用程序。每次我尝试启动 Facebook 登录时，都会收到以下消息：

```
01-24 19:05:11.863: E/AndroidRuntime(12697): Caused by: java.lang.NoClassDefFoundError: com.facebook.android.Facebook 
```

非常感谢任何帮助或见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:23:02.647

事实证明，我的一个队友从 Git 加载了项目，编译它，然后运行它，没有任何变化，它工作得很好。很明显，无论是 Facebook SDK 还是 Eclipse，我的设置都搞砸了。我正在运行 Eclipse Juno，他正在运行 Eclipse Indigo。

原来这是因为我没有将库项目包含在项目属性的“Android”部分中。

# android - android RadioButton 图片和文字

> ID：14514728
> 
> 赞同：3
> 
> 时间：2013-01-25T03:10:37.587
> 
> 标签：android, xml, radio-button

我使用单选按钮创建自定义选项卡主机，工作正常，但现在我需要在顶部显示图标，在图标下方显示文本，

这就是我现在所拥有的： ![当前状态](../Images/0d4f1ae587710adf55fd2c9d2656190d.png)

但这就是我需要的： ![期望状态](../Images/559f074e6240f9cc112340c453347ed6.png)

这是我的代码：

```
 <RadioButton
        android:id="@+id/rad_home"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@drawable/rad_background"
        android:button="@drawable/home_icon"
        android:gravity="center"
        android:text="Home"
        android:textColor="@drawable/text_background"
        android:textSize="@dimen/rad_text_size" >

    </RadioButton>

    <RadioButton
        android:id="@+id/rad_1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@drawable/rad_background"
        android:button="@null"
        android:gravity="center"
        android:text="Menu"
        android:textColor="@drawable/text_background"
        android:textSize="@dimen/rad_text_size" />

    <RadioButton
        android:id="@+id/rad_2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@drawable/rad_background"
        android:button="@null"
        android:gravity="center"
        android:text="VIP"
        android:textColor="@drawable/text_background"
        android:textSize="@dimen/rad_text_size" />

    <RadioButton
        android:id="@+id/rad_3"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@drawable/rad_background"
        android:button="@null"
        android:gravity="center"
        android:text="About"
        android:textColor="@drawable/text_background"
        android:textSize="@dimen/rad_text_size" />

    <RadioButton
        android:id="@+id/rad_4"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@drawable/rad_background"
        android:button="@null"
        android:gravity="center"
        android:text="Whats On"
        android:textColor="@drawable/text_background"
        android:textSize="@dimen/rad_text_size" />
</RadioGroup> 
```

所以我将按钮图标设置为：

> 安卓：按钮=“@null”

什么时候是空的

和

> android:button="@drawable/home_icon"

对于图标图像，我应该使用它来设置图标吗？如何根据需要组织它？[顶部的图标，底部的文字]

我尝试了内部布局，但似乎不喜欢它？

如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-07T08:09:14.467

试试这个：使用 drawableTop 显示图标

```
 <RadioButton
    android:id="@+id/rad_home"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="@drawable/rad_background"
    android:button="@null"
    android:drawableTop="@drawable/home_icon"
    android:gravity="center"
    android:text="Home"
    android:textColor="@drawable/text_background"
    android:textSize="@dimen/rad_text_size" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T05:14:04.047

您可以使用文本视图：-

```
 <TextView
            android:id="@+id/home_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@id/rad_home"
            android:layout_marginTop="10dp"
            android:text="home" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T05:28:43.990

亲爱的，我可以建议您尝试组合按钮文本而不是简单的按钮。在您的代码中，您尝试

```
 android:background="@drawable/rad_background"
        android:button=**"@null"** 
```

而是使用我的代码并像这样显示组合按钮。

```
 <Button
                    android:id="@+id/btnCrop"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_vertical"
                    android:layout_marginLeft="10dp"
                    android:background="@android:color/transparent"
                    android:drawableTop="@drawable/icon_crop_selector"
                    android:text="@string/btnCrop"
                    android:textAppearance="@style/TextButton"
                    android:textColor="#ffffff" /> 
```

这将对您有所帮助。

# php - RESTful API 客户端交互

> ID：14514729
> 
> 赞同：0
> 
> 时间：2013-01-25T03:10:50.720
> 
> 标签：php

所以我正在编写一个 API，我担心我正在编写的代码会很快变得混乱。

有些页面我需要从 API 的几个不同资源中获取数据，而我最终会得到一大堆 try 和 catch 语句。例如：

```
$topic_id = 100;
try
{
    $topic = AwesomeAPI::get('topics/' . $topic_id);
    $parts = AwesomeAPI::get('parts?topic_id=' . $topic_id);
    try
    {
        // Get another resource here
    }
    catch (Exception $e)
    {
        // Error
    }
}
catch (Exception $e)
{
    return Response::error('404');
} 
```

我确信这段代码非常混乱，如果我必须循环访问一个资源并在循环中获取另一个资源，情况会变得更糟。呸。

我想知道如何以一种简洁的方式最好地处理客户端与 API 的交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:38:06.780

正如我之前评论的那样，在我看来，您应该将所有 API 逻辑都放在一个类中，因此也应该放在方法中。因此，您可以编写如下代码，而不是像发布的那样编写代码：

```
$api = new AwesomeAPI();
$topic = $api->GetTopic($topic_id); 
```

你的*AwesomeAPI*类可能看起来像这样：

```
public class AwesomeAPI()
{
    public $topic_url = 'somewebsite.com/topics?id{0}';

    function GetTopic($topicId)
    {
        //Some code here
        $response = 'Some response (could be a JSON Document)';
        return $response;
    }
} 
```

这样，您在应用程序中的代码将更加优雅和清晰。

希望这可以帮助你

# ios - XEP-0060:pubsub 项目

> ID：14514730
> 
> 赞同：-1
> 
> 时间：2013-01-25T03:10:51.413
> 
> 标签：ios, xmpp, publish-subscribe

问题1：如何为一个项目添加已读/未读状态，我想知道我发布的项目是否被其他人阅读（不使用另一个回复项目）

问题2：如何获取指定项目，例如，回复指定项目的所有项目

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:50:06.680

1.  Pubsub 没有已读/未读的概念，因为 pubsub 的性质通常是一劳永逸。发布者通常不知道也不关心订阅者是谁，也不关心他们如何处理这些信息。为此，您必须提供一个单独的机制来记录您必须与已发布项目关联的读取信息。

2.  您可以通过其 id 获取特定项目。没有回复的概念，所以第二部分不适合这种情况。

Pubsub 不包含业务逻辑，这似乎是您正在寻找的。您必须自己构建它。

# mongodb - Meteor 对集合有不同的查询吗？

> ID：14514733
> 
> 赞同：11
> 
> 时间：2013-01-25T03:11:18.867
> 
> 标签：mongodb, meteor

我想在我的集合中返回不同的字段。我知道这些是[mongo 运算符的文档](http://docs.mongodb.org/manual/reference/operators/)，但我对查询语言不够熟悉，不知道这是否可能？

```
Meteor.publish("distinctCollection", function() {
    return Collection.find({ ... }, fields: { "myField": 1 });
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T06:46:01.253

```
Collection.find({}).distinct('myField', true); 
```

要使用，请将以下内容放在 [project]/client/lib/a.js 中：

```
LocalCollection.Cursor.prototype.distinct = function (key,random) {
  var self = this;

  if (self.db_objects === null)
    self.db_objects = self._getRawObjects(true);
  if (random)
    self.db_objects = _.shuffle(self.db_objects);
  if (self.reactive)
    self._markAsReactive({ordered: true,
                          added: true,
                          removed: true,
                          changed: true,
                          moved: true});
  var res = {};
  _.each(self.db_objects,function(value){

    if(!res[value[key]]){
        res[value[key]] = value;
    }
  });
  return _.values(res);
}; 
```

# python - 如何在浮点中删除 ( ) 和 ,

> ID：14514738
> 
> 赞同：0
> 
> 时间：2013-01-25T03:11:35.523
> 
> 标签：python, floating-point, gps, latitude-longitude

```
latitude = bytes([data[12],data[11],data[10],data[9]])
        longitude = bytes([data[16],data[15],data[14],data[13]])

        intLat = struct.unpack('!f',latitude)
        intLong = struct.unpack('!f',longitude)

        print(intLat) 
        print(intLong) 
```

这是打印的编码。

```
(100.47630310058594,)
(5.136366844177246,) 
```

如何删除 ( ) 和 , ？因为我只想将浮动存储在数据库中，没有 out () 和，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:13:22.210

您必须引用元组的第一个元素：

```
intLat = struct.unpack('!f',latitude)[0]
intLong = struct.unpack('!f',longitude)[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:18:03.347

```
(100.47630310058594,) 
```

这意味着数据`tuple`只有一个元素。您可以像对列表一样通过索引来获取数据。

```
intLong[0] 
```

会给你数据。

或者你可以像 Volatility 提到的那样索引 unpack 的输出。

# php - 从模型类调用 http url

> ID：14514741
> 
> 赞同：0
> 
> 时间：2013-01-25T03:11:49.887
> 
> 标签：php, codeigniter

我正在尝试使用 google API 导入联系人列表。谷歌提供的这个例子之一是

```
print "<a class=login href='$auth'>Connect Me!</a>"; 
```

这里

```
$auth = $client->createAuthUrl(); 
```

在这`$auth`给出了一个 url，它将被称为 onclick of `Connect Me`。这是我想在 CodeIgniter 中实现的一个简单的 php 示例。所以我把这个示例逻辑移到了一个模型类中。在这里，我想将 url 响应保存到 DB，然后发送到视图。
如何点击 `$client->createAuthUrl()`模型类提供的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:46:22.843

从您的控制器调用模型，然后将数据传递到官方文档中定义的视图[here](http://ellislab.com/codeigniter/user-guide/general/views.html) 和[here，](http://ellislab.com/codeigniter/user-guide/general/models.html)如下所示：

```
Class YourController Extends CI_Controller
{

.
.
.

function yourFunction()
{
  $this->load->model('Model_yourModel');
  $data['auth'] = $this->Model_yourModel->createAuthUrl();

  $this->load->view('yourView', $data);
} 
```

你可以像这样`yourView.php`使用它

```
print "<a class=login href='$auth'>Connect Me!</a>"; 
```

# c++ - 使用 _set_purecall_handler 时如何在已发布的应用程序中获取调用堆栈

> ID：14514749
> 
> 赞同：0
> 
> 时间：2013-01-25T03:13:07.750
> 
> 标签：c++, c, windows, windbg

我的代码有时会运行到“纯函数调用”错误，所以我使用 _set_purecall_handler 来注册一个处理程序。在调试模式下，我可以使用 StackWalker 获得完整的调用堆栈，但在发布模式下，StackWalker 显示的有用信息很少。我尝试使用 MiniDumpWriteDump 并设置 ExceptionPointers = NULL。崩溃后我得到了一个转储文件，但 vs 无法调试它并显示：找不到指定的模板。请检查完整路径是否正确。
在这种情况下，是否可以从已发布的应用程序中获取信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:51:28.860

通常，可以通过匹配子类的 vtable 和抽象类的 vtable 来猜测调用的方法 - 抽象类的 vtable 有一堆用于没有实现的虚函数的 pure_call 处理程序。

您需要了解的有关方法调用的所有信息都在堆栈和寄存器中 - 只需查看调用站点的反汇编，注意用于从 vtable 检索函数的偏移量，转储已故对象的实际 vtable - 您可以查看通过反汇编寻找`vftable'的构造函数的代码来实现它。然后使用**dds**进行简单检查应该提供您需要知道哪个方法被调用的所有信息（但不是对象消失的原因：o）

# ios - 交换 2 个 UICollectionViewCells

> ID：14514754
> 
> 赞同：1
> 
> 时间：2013-01-25T03:13:24.587
> 
> 标签：ios, objective-c, uicollectionview, uicollectionviewcell, uicollectionviewlayout

我正在尝试交换 2 个表格单元格。所以如果布局是这样的

123 456 789

我将单元格 3 拖到单元格 5 它将是

125 436 789

但是如果我继续拖动而不提升到单元格 7，那么它将是

127 456 389

并为这一切设置动画。我有来自[LXReorderableCollectionViewFlowLayout](https://github.com/lxcid/LXReorderableCollectionViewFlowLayout/tree/experimental-swap-items)的基本代码，并进行了一些编辑，但仍然存在一些问题。就像在移动单元格时，另一个单元格看起来像一个副本并跟随它直到我放手，有时它会完全复制该单元格。在我的集合视图中，我使用一个 UICollectionViewCell 子类，但我有 2 个外观，一个包含信息的单元格和一个空单元格。

这是代码

LXReorderableCollectionViewFlowLayout.h - [http://pastie.org/7188891](http://pastie.org/7188891) LXReorderableCollectionViewFlowLayout.m - [http://pastie.org/7188886](http://pastie.org/7188886)

（不能在这里发布代码，因为它太长了不能发布）

# iphone - 紫外线滤镜效果模拟

> ID：14514759
> 
> 赞同：0
> 
> 时间：2013-01-25T03:14:34.460
> 
> 标签：iphone, ios, filter, gpuimage

我需要在我的 iOS 应用程序中模拟[紫外线效果。](http://www.geeky-gadgets.com/wp-content/uploads/2012/04/UofCCancerCenter_610x406.png)

我尝试应用直方图过滤器 -> 饱和度 -> 灰度。但这没有用。任何人都可以建议我如何让这个工作。

我可以为此使用[GPUImage](https://github.com/BradLarson/GPUImage)吗？需要应用什么滤镜组合才能获得这种效果？

# regex - 检查参数是否为带有数字表达式的整数

> ID：14514767
> 
> 赞同：1
> 
> 时间：2013-01-25T03:15:24.947
> 
> 标签：regex, bash

以下程序检查第一个参数是数字还是非数字。到目前为止，我能想到的最好的是：

```
#/bin/bash
if (( $# )) && (( $1 != 0 )) ; then
    echo "number"
else
    echo "not number"
fi 
```

*   这适用于 , , 等数字`1`，`-1`适用`100`于字符串`a`, `abc`, `a431`，或者如果没有给出参数。

*   它适用于字符串*警告*`1a1`，如, `1.3`,`-1.2`

*   但是如果参数是*FAILS*（显然）`0`

这怎么可能解决？（使用算术表达式）

相关：[Bash 整数比较](https://stackoverflow.com/questions/14511295/bash-integer-comparison)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:19:38.437

您可以按`printf`内置命令来完成这项工作：

```
if printf "%d" ${1:-foo} > /dev/null; then
    echo "number"
else
    echo "NOT a number"
fi 
```

`printf`如果转换失败，则以非零状态退出。如果未设置，`${1-...}`则表示法提供已知的非数字。`$1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:22:47.457

我宁愿使用类似的东西

```
if [ $1 = "$(echo $1 | awk '{print strtonum($0)}')" ]; then
echo "number"
else
echo "not number"
fi 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T03:49:48.107

您可以使用正则表达式：

```
#/bin/bash

if [[ "$1" =~ ^-?[0-9]+$ ]] ; then
    echo "number"
else
    echo "not number"
fi 
```

如果你想让它处理浮点，你可以很容易地调整它：

```
#/bin/bash

if [[ "$1" =~ ^-?[0-9]+$ || "$1" =~ ^-?[0-9]*\.[0-9]+ ]] ; then
    echo "number"
else
    echo "not number"
fi 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T05:52:06.900

使用扩展 glob 的解决方案

```
#/bin/bash
shopt -s extglob
if [[ $1 = *[0-9]* && $1 = ?([+-])*([0-9])?(.*([0-9])) ]]; then
    echo "Is a number"
else
    echo "Not a number"
fi 
```

**输出**

```
$ ./test -1
Is a number
$ ./test 0
Is a number
$ ./test 1
Is a number
$ ./test a
Not a number
$ ./test -1.2
Is a number
$ ./test 0.0
Is a number
$ ./test 1.2
Is a number
$ ./test a.b
Not a number 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T14:54:05.863

可能更容易测试什么不是数字：

```
if (( $# )) ; then
  if [[ $1 == *[^0-9]* ]] ; then
    echo "Not a number"
  else
    echo "Is a number"
  fi
fi 
```

请注意，上面实际上仅测试正整数。添加 +-。到字符类，它将在某种程度上适用于正/负整数和小数。我之所以这么说是因为它会将 123.456.789 作为数字传递，但它是无效的。您需要添加额外的逻辑来清除错位或多个符号和小数点（以及“+”、“.”等字符串）。

# android - Android：如何在同一片段着色器中使用 samplerExternalOES 和 sampler2D

> ID：14514768
> 
> 赞同：4
> 
> 时间：2013-01-25T03:15:24.887
> 
> 标签：android, image-processing, opengl-es, opengl-es-2.0, fragment-shader

我一直在这里发帖疯狂地试图让我的片段着色器代码工作。我终于偶然发现了一些可以解决问题的东西。

我正在尝试在 Android 上使用 OpenGl ES 2.0 来操作相机预览。为此，我需要将自己的纹理加载到片段着色器中。因此，我将相机的纹理作为 samplerExternalOES，并将我自己的纹理作为 sampler2D。我看到一个回复​​说尝试在一个片段着色器中使用这两种纹理类型存在错误。任何人都可以为我阐明这一点吗？为什么不能在同一个着色器中使用 samplerExternalOES 和 sampler2D 纹理？解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-01T11:53:05.427

你可以用它`render-to-texture`来解决你的问题。

在将它们合并为最终渲染之前，在单独的 FBO 中进行渲染`samplerExternalOES`。`sampler2D`

# c# - 我在使用 Bresenham 的算法时遇到问题

> ID：14514771
> 
> 赞同：-1
> 
> 时间：2013-01-25T03:15:52.553
> 
> 标签：c#, visual-studio-2010

它仅在斜率介于 0 和 1 之间时有效。我不知道从这里去哪里。感谢您的帮助！此方法读取两个点并使用 bresenhams 算法在它们之间画线。我不知道去哪里为所有线路优化它。谢谢你的帮助。

```
void Bresenhams(int x1, int y1, int xk, int yk)
    {
        int deltaX = xk - x1;
        int deltaY = yk - y1;
        int error = 0;
        int y = y1;
        int x = x1;
        int doubleDeltaX = 2 * deltaX;
        bool steep = Math.Abs(yk - y1) > Math.Abs(xk - x1);

        canvas.SetPixel(x1, y1, Color.Black);

        if (!steep)
        {
            for (int i = x1 + 1; i <= xk; i++)
            {

                if (x1 > xk)
                {
                    int temp = x1;
                    x1 = xk;
                    xk = temp;

                    temp = y1;
                    y1 = yk;
                    yk = temp;

                }

                error = error + deltaY;
                if (error > deltaX)
                {
                    y++;
                    error -= doubleDeltaX;
                }
                canvas.SetPixel(i, y, Color.Black);
            }
        }
        else
        {
            for (int i = y1 + 1; i <= yk; i++)
            {

                if (y1 > yk)
                {
                    int temp = x1;
                    x1 = xk;
                    xk = temp;

                    temp = y1;
                    y1 = yk;
                    yk = temp;
                }

                error = error + deltaY;
                if (error > deltaY)
                {
                    y++;
                    error -= doubleDeltaX;
                }
                canvas.SetPixel(x, i, Color.Black);
            }
        }

        pictureBox1.Image = canvas;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:25:20.910

将一个圆圈分成 8 个部分。您可以在一个八分圆上运行 Bresenham 并同时绘制所有 8 个八分圆。对于 0,0 处的中心：

```
 0-45 x,y
  45-90 y,x
 90-135 -y,x
135-180 -x,y
180-225 -x,-y
225-270 -y,-x
270-315 y,-x
315-360 x,-y 
```

# java - Big O Notation，添加不同意义的循环

> ID：14514772
> 
> 赞同：1
> 
> 时间：2013-01-25T03:16:04.530
> 
> 标签：java, loops, big-o, nested-loops

我保证这是最后一个大 O 问题

以下循环的大 O 表示法...

```
 for (int i = n; i > 0; i = i / 2){
        for (int j = 0; j < n; j++){
           count++;
        }
     }
     for (int k = 0; k < n; k++){
        for (int m = 0; m < n; m++){
           count++;
        }
     } 
```

这就是我认为我确定的。

第一组嵌套循环有`O(n*log2(n))` ，第二组嵌套循环是`O(n^2)`. 添加这些时删除第一个术语是否正确？并说整体大 O 是`O(n^2)`？

第二个问题，当为系列循环添加大 O 符号时，删除不太重要的项总是正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T03:18:28.100

你的两个问题的答案都是肯定的。您总是会丢弃较小的项，因为它们被较大的项所支配，并且在进行大 O 分析时`n`您只关心大。`n`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:21:18.713

原因是渐近地`n*log2(n)`被*支配* `n^2`：对于足够大`n`的 ，`|n * log2(n)| < |n^2|`。

如果您不明白为什么这意味着您可以删除该`n*log2(n)`术语，请尝试`n^2`在两侧添加：

```
n^2 + n*log2(n) < n^2 + n^2
n^2 + n*log2(n) < 2 * n^2 
```

因此，如果我们知道我们可以忽略一个常数因子`k`，我们就知道我们可以忽略一个不太重要的项。

# charts - 使用可重用图表更新 d3.js 中的 HTML 表格

> ID：14514776
> 
> 赞同：3
> 
> 时间：2013-01-25T03:17:04.847
> 
> 标签：charts, d3.js, html-table, code-reuse

我有这个可重用的模式来创建一个表，灵感来自[http://bl.ocks.org/3687826](http://bl.ocks.org/3687826)，我有两个问题。

这是功能：

```
d3.table = function(config) {
var columns = [];

var tbl = function(selection) {
if (columns.length == 0) columns = d3.keys(selection.data()[0][0]);
console.log(columns)    

// Creating the table
var table = selection.append("table");
var thead = table.append("thead");
var tbody = table.append("tbody");

// appending the header row
var th = thead.selectAll("th")
        .data(columns)

th.enter().append("th");
    th.text(function(d) { return d });
th.exit().remove()

// creating a row for each object in the data
var rows = tbody.selectAll('tr')
    .data(function(d) { return d; })

rows.enter().append("tr");
rows.attr('data-row',function(d,i){return i});
rows.exit().remove();   

// creating a cell for each column in the rows
var cells = rows.selectAll("td")
        .data(function(row) {
    return columns.map(function(key) {
                return {key:key, value:row[key]};
    });
        })

cells.enter().append("td");
cells.text(function(d) { return d.value; })
    .attr('data-col',function(d,i){return i})
    .attr('data-key',function(d,i){return d.key});
cells.exit().remove();

return tbl;
};

tbl.columns = function(_) {
if (!arguments.length) return columns;
columns = _;
return this;
};

return tbl;
}; 
```

这个表可以这样调用：

```
/// new table
var t = d3.table();

/// loading data
d3.csv('reusable.csv', function(error,data) {
    d3.select("body")
    .datum(data.filter(function(d){return d.price<850})) /// filter on lines
    .call(t)
}); 
```

reusable.csv 文件是这样的：

```
date,price
Jan 2000,1394.46
Feb 2000,1366.42
Mar 2000,1498.58
Apr 2000,1452.43
May 2000,1420.6
Jun 2000,1454.6
Jul 2000,1430.83
Aug 2000,1517.68
Sep 2000,1436.51 
```

并且列数可以通过

```
t.columns(["price"]); 
d3.select("body").call(t); 
```

问题是在更新时创建了另一个带有 thead 和 tbody 的表，因为该表的创建是在函数内部。

我怎么说“**只创建一次表**，然后更新”？

另一个问题是：**如何使用**函数内部的方法过滤行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T09:24:13.813

问题在于这三行代码：

```
// Creating the table
var table = selection.append("table");
var thead = table.append("thead");
var tbody = table.append("tbody"); 
```

它总是将新的 table、thead 和 tbody 元素附加到您的文档中。只有当这些元素尚不存在时，您才能有条件地执行此操作（您引用的示例类似地创建其 div.header 元素）：

```
selection.selectAll('table').data([0]).enter().append('table');
var table = selection.select('table');

table.selectAll('thead').data([0]).enter().append('thead');
var thead = table.select('thead');

table.selectAll('tbody').data([0]).enter().append('tbody');
var tbody = table.select('tbody'); 
```

如果未找到，则 selectAll().data([0]).enter().append() 模式有条件地创建单个元素。引用的示例使用 data([true]) 但任何具有单个元素的数组都可以。

要从函数中过滤嵌套数据，请将您的调用更改为 data() 并传递选择数据的过滤子集，如下所示：

```
var rows = tbody.selectAll('tr').data(tbody.data()[0].filter(function(d) { 
    return d.price > 1400; 
})); 
```

祝你好运！

# javascript - 帮助生成文件的 NodeJS 模块

> ID：14514777
> 
> 赞同：2
> 
> 时间：2013-01-25T03:17:23.223
> 
> 标签：javascript, node.js, scaffolding

我正在寻找一个 nodejs 模块在我的项目中使用，它将生成文件和目录。

为了提供一些背景知识，我的节点项目使用了某些用户制作的小部件，每个小部件都有非常具体的配置和文件布局。我想要一种为用户生成这些骨架文件的简单方法，使用他们输入的一些信息作为参数

### 所需的工作流程

```
$ mymodule make new widget
What kind of widget do you want? (dbquery, htmlquery)
> dbquery
What name do you want to give to your widget?
> samplename
In which directory are your widgets located?
>  /home/name/Code/dashboard/widgets
...generating samplename dbquery widget *(creates a couple of folders and files with some basic content)*
DONE!

$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T06:53:42.903

核心[fs](http://nodejs.org/api/fs.html#fs_file_system)模块可以创建文件和目录。

使用模块

```
var fs = require('fs'); 
```

创建一个文件：

```
fs.writeFile('message.txt', 'Hello Node', function (err) {
  if (err) throw err;
  console.log('It\'s saved!');
}); 
```

创建目录：

```
fs.mkdir('test', function(err) {
  console.log('done');
}); 
```

另一个很酷的模块是[mkdirp](https://github.com/substack/node-mkdirp)。像`mkdir -p`. 您的骨架文件的内容可以存储在 js 变量/字符串中，然后写入用户的文件，或者您可以使用一些虚拟文件并从那里读取内容：

```
fs.readFile('/widget/layout.conf', function (err, data) {
  if (err) throw err;
  console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:09:38.007

我开始了一个类似于您所要求的项目。它是一个可以全局安装的 Node.js 模块，它基于 GitHub 存储库构建模块和/或应用程序。

有关详细信息，请参阅[nudo](https://github.com/thenativeweb/nudo)。

# android - Android：同时运行 2 个 dnsmasq 的热点

> ID：14514786
> 
> 赞同：3
> 
> 时间：2013-01-25T03:18:18.730
> 
> 标签：android, shell, command-line

当我在android手机中激活热点时，系统默认的DNSMASQ会继续运行。

USER PID PPID VSIZE RSS WCHAN PC NAME
nobody 2689 149 1008 488 c06fadd8 400d80d8 S /system/bin/dnsmasq

但我想拥有自己的配置，所以在激活热点之前，我自己创建了 dnsmasq 配置。然后当我激活它时，似乎有 2 个 dnsmasq 服务同时运行。

我使用 (kill -9 pid) 杀死系统之一，但它似乎不起作用，它仍然存在吗？

没有人 2780 1 1012 312 c0856674 400a8d44 S dnsmasq
根 2797 149 0 0 c061c654 00000000 Z dnsmasq

任何建议如何杀死它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-02T14:30:26.230

Z 表示它是一个僵尸进程，所以它已经被终止，只是还没有被整理。

# php - 未捕获的类型错误：对象没有方法“stopImmediatePropagation”

> ID：14514790
> 
> 赞同：-2
> 
> 时间：2013-01-25T03:18:36.383
> 
> 标签：php, javascript, ajax, jquery

> 未捕获的类型错误：对象没有方法“stopImmediatePropagation”

![jQuery错误](../Images/4f95fbfbd4180b34435bcde088b0941a.png)

这是我从 9lessons 网站获得的完整代码。

```
$(document).ready(function()
{
    $(".delete").live('click',function()
    {
        var id = $(this).attr('id');
        var b=$(this).parent().parent();
        var dataString = 'id='+ id;
        if(confirm("Sure you want to delete this update? There is NO undo!"))
        {
            $.ajax({
                type: "POST",
                url: "delete_ajax.php",
                data: dataString,
                cache: false,
                success: function(e)
                {
                    b.hide();
                    e.stopImmediatePropagation();
                }
            });
        return false;
        }
    });
} 
```

错误指向`e.stopImmediatePropagation();`

如何解决此错误？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:22:58.140

传递给成功函数的第一个变量应该是数据对象，而不是事件。似乎您想要获取点击事件并取消它，因为您正在处理它。所以在顶部，使用这个：

```
$(".delete").live('click',function(event)
{
    event.stopImmediatePropagation();
    ...everything else...
}); 
```

并删除原来的 e.stopImmediatePropagation();

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T03:20:13.487

您需要在 clickhandler 中包含事件对象：

```
 $(".delete").live('click',function(e) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T03:24:05.343

这个应该做...

```
$(document).ready(function()
{
$(".delete").live('click',function(evt)
{
var id = $(this).attr('id');
var b=$(this).parent().parent();
var dataString = 'id='+ id;
if(confirm("Sure you want to delete this update? There is NO undo!"))
{
    $.ajax({
type: "POST",
url: "delete_ajax.php",
data: dataString,
cache: false,
async: false,
success: function(e)
{
b.hide();
evt.stopImmediatePropagation();
}
           });
    return false;
}
}); 
```

请注意`async: false;`，这将使您的代码执行等待 Ajax 完成并停止单击事件。您不能从异步成功处理程序中停止事件。

# javascript - 使用 javascript 从 CSOM 添加、更新和查询 SharePoint 列表项

> ID：14514795
> 
> 赞同：3
> 
> 时间：2013-01-25T03:19:07.943
> 
> 标签：javascript, sharepoint, add

使用 javascript 和 SharePoint 的 CSOM，有人可以提供以下场景的示例：

从列表 (ListA) 中的选定项目中获取字段值。

然后对于每个选定的项目，获取一个字段值并使用它来查询不同的列表 (ListB)。

如果查询返回 0 行，则在 ListB 中创建项目并更新 ListA 中的选定项目。

否则，如果查询返回 1 行，则更新 ListA 中的选定项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:46:22.923

这会让你开始。

[MSDN - 如何：使用 SharePoint 2013 中的 JavaScript 库代码完成基本操作](http://msdn.microsoft.com/en-us/library/jj163201.aspx)

它举例说明了如何

*   查询列表并获取值
*   添加/更新和删除记录
*   和许多其他常见操作

因此，完成场景所需的大部分内容。

# c++ - 在 Windows 上使用 websocketpp 和 MySQL 提升构建错误

> ID：14514796
> 
> 赞同：1
> 
> 时间：2013-01-25T03:19:31.663
> 
> 标签：c++, mysql, visual-studio-2010, boost, websocket

我正在尝试构建一个同时使用 websocketpp 和 MySQL 的 C++ 应用程序。我使用 VS 2010 C++ Express 遇到了 2 个构建问题。

1）boost库有问题。它会产生许多这样的错误：

```
 1>c:\program files (x86)\boost\boost_1_50\boost\thread\win32\thread_data.hpp(210): error C2146: syntax error : missing ')' before identifier 'rel_time' 
```

这是 thread_data.hpp 从第 210 行开始的相关片段：

```
inline BOOST_SYMBOL_VISIBLE void sleep(TimeDuration const& rel_time)
    {
        interruptible_wait(detail::pin_to_zero(rel_time.total_milliseconds()));
    } 
```

[2) 与此处](http://www.experts-exchange.com/Programming/Languages/CPP/Q_28005116.html#a38816882)记录的 VERSION 一词发生冲突，我认为它是独立的。

为了对 boost 构建问题做出一个清晰简单的示例，我使用了 websocketpp 示例：[echo_server.cpp](https://github.com/zaphoyd/websocketpp/blob/master/examples/echo_server/echo_server.cpp)，我在其中添加了以下内容：

```
#include "stdafx.h" 
```

Boost lib 包括 websocketpp 站点上的“使用 websocketpp 构建程序”推荐的。

```
#include <boost/regex.hpp>
#include <boost/random.hpp> 
#include <boost/system/api_config.hpp>
#include <boost/system/config.hpp>
#include <boost/system/error_code.hpp>
#include <boost/system/system_error.hpp>
#include <boost/system/windows_error.hpp> 
```

并且 MySQL 标头包括。添加这 2 个 boostinclude 会触发构建错误。如果我注释掉这 2 个包含，它的构建不会出现错误：

```
#include <my_global.h>
#include <mysql.h> 
```

关于如何处理升压问题的任何建议？

我不认为这与这个构建问题相同，“尝试使用 MinGW 构建 websocket++：最后几个链接器错误——它可能是什么？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:33:22.610

关于第一个错误，检查是否有任何宏干扰代码。右键单击并转到定义或在文件开头自己#define 宏，然后查看它在哪里重新定义。在非常困难的情况下，通过编译器标志查看预处理器输出。

关于其余部分，您没有为 Boost 和 MySQL 提供任何版本。然后是 my_global.h（或者是 MySQL 的那一部分？）和 stdafx.h，它们都在您的控制之下，但您没有在此处显示它们。此外，请尝试将问题减少到尽可能小的代码段。简而言之，提供一个可重现的例子。

# javascript - 如何在 HTML 代码中提取字体系列？

> ID：14514799
> 
> 赞同：1
> 
> 时间：2013-01-25T03:19:55.357
> 
> 标签：javascript, regex, preg-match

我目前正在开发一个[HTML 实用程序](http://chethan.co.in/htmlhelper)。我想使用 Javascript 提取 HTML 代码中使用的字体系列。我找到了这个只能找到普通字体的正则表达式：

```
font-family\s*?:.*?(;|(?=""|'|;)) 
```

即字体系列：Arial、Helvetica、sans-serif

我无法匹配以下字体系列：

```
font-family: 'Lucida Sans', 'Lucida Sans Unicode', 'Lucida Grande', sans-serif; 
```

是否有任何方法可用于提取字体/字体系列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:22:35.930

如果您使用的是 jQuery，您可以：

```
$('#myElement').css('fontFamily'); 
```

或 webkit 解决方案：

```
var el = document.querySelector('#myElement');
window.getComputedStyle(el).fontFamily; 
```

如果您仍打算从诸如 css/style 定义之类的文本中进行匹配：

```
"font-family: Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif;".match(/font-family\s*?\:(.*)(?=;)/gi) 
```

这是一个最简单的 RegExp，但会按预期工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T03:27:32.460

非jQuery解决方案：

```
var element = document.getElementById('elementId'),
    style = window.getComputedStyle(element),
    top = style.getPropertyValue('font-family'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T22:07:13.943

最后我把它整理好了。。

```
function demo(input,output) {
var div = document.createElement("div");
try {
    div.innerHTML = input;
} catch (e) {
    alert(e.message);
    return;
}
// images
var images = div.getElementsByTagName("IMG");
//console.log(images);

// font-family
var fontfamily = [];
var ffstack = [div];
while (ffstack.length) {
    var ff = ffstack.pop();
    if (ff.style && ff.style.fontFamily) {
            fontfamily.push(ff.style.fontFamily);
    }
    if (ff.childNodes) {
        for (var i = 0; i < ff.childNodes.length; i++) {
            ffstack.push(ff.childNodes[i]);
        }
    }
}
//console.log(fontfamily);
document.getElementById("resultBlock").style.display = "block";
var vArray = Duplicates(fontfamily);
var fontss = vArray.join("\n\n");
output.value =fontss; 
```

}

```
function Duplicates(arr) {
var i,
lenn = arr.length,
    out = [],
    obj = {};

for (i = 0; i < lenn; i++) {
    obj[arr[i]] = 0;
}
for (i in obj) {
    out.push(i);
}
return out; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T05:53:19.330

您可以通过这个简单的脚本获取字体系列。

```
alert(document.getElementById("*** id name of your field******").style.fontFamily); 
```

# delphi - 使用 Delphi、TIdSchedulerOfThreadPool 初始化从 Indy 9 迁移到 10

> ID：14514810
> 
> 赞同：5
> 
> 时间：2013-01-25T03:20:58.870
> 
> 标签：delphi, indy, indy10, indy-9

我正在将 Delphi 应用程序从 Indy 9 更新到 Indy 10。

这很痛苦，因为显然发生了很多变化。

我被困在了一步。

这是旧代码（使用 Indy 9）：

创建一个线程池，池中的每个线程都被初始化然后启动。各个线程创建一个 indy http 客户端（但在这里无关紧要）。

```
TUrlThread = class(TIdThread)

...  

var
  i: Integer;
begin
  // create the Pool and init it
  Pool            := TIdThreadMgrPool.Create(nil);
  Pool.PoolSize   := Options.RunningThreads;
  Pool.ThreadClass:= TUrlThread;

  // init threads and start them
  for i := 1 to Options.RunningThreads do
  begin
    with (Pool.GetThread as TUrlThread) do
    begin
      Index     := i;
      Controler := Self;
      Priority  := Options.Priority;
      Start;
    end;
  end; 
```

TIdThreadMgrPool类在 Indy 10 中消失了**。**

我一直在寻找替代品，而**TIdSchedulerOfThreadPool**看起来像是赢家，但我无法让它运行。

这是修改后的（Indy 10）代码：

```
TUrlThread = class(TIdThreadWithTask)

...

var
  i: Integer;
begin
  // create the Pool and init it
  Pool            := TIdSchedulerOfThreadPool.Create(nil);
  Pool.PoolSize   := Options.RunningThreads;
  Pool.ThreadClass:= TUrlThread;

  // init threads and start them
  for i := 1 to Options.RunningThreads do
  begin
    with (Pool.NewThread as TUrlThread) do
    begin
      Index     := i;
      Controler := Self;
      Priority  := Options.Priority;
      Start;
    end;
  end; 
```

我在这里遇到访问冲突异常（这是 indy 代码）：

```
procedure TIdTask.DoBeforeRun;
begin
  FBeforeRunDone := True;
  BeforeRun;
end; 
```

FBeforeRunDone 为零。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T09:42:39.720

你是对的，这`TIdSchedulerOfThreadPool`是 Indy 10 的替代品`TIdThreadMgrPool`。但是，您没有考虑到的是架构与`TIdScheduler`架构有很大不同`TIdThreadMgr`。

在 Indy 10 中，`TIdThreadWithTask`不会自行运行。顾名思义，`TIdThreadWithTask`执行一个*Task*，它是一个与线程相关联的`TIdTask`派生对象（例如`TIdContext`，它是 Indy 10 的 替代品）。`TIdPeerThread`您正在运行线程而不给它们执行任务，这就是您遇到崩溃的原因。为了`Start()`手动调用，您需要首先创建一个`TIdTask`基于 - 的对象并将其分配给`TIdThreadWithTask.Task`属性。 `TIdTCPServer`通过调用`TIdScheduler.AcquireYarn()`创建一个`TIdYarn`链接到对象的对象来处理它`TIdThreadWithTask`，然后创建一个`TIdContext`对象并将其传递给`TIdScheduler.StartYarn()`，后者使用`TIdYarn`访问以在调用之前`TIdThreadWithTask`分配其属性`Task``Start()`在上面。

然而，一切都没有丢失。在 Indy 9 和 10 中，您真的不应该`TIdThread.Start()`一开始就手动调用。 `TIdTCPServer`在接受新的客户端连接、从其`ThreadMgr`/获取线程`Scheduler`并将客户端连接与线程相关联之后为您处理。您可以根据需要初始化线程属性，而无需立即实际运行线程。这些属性将在稍后线程第一次开始运行时生效。

试试这个：

```
TUrlThread = class(TIdThread)

...  

var
  i: Integer;
begin
  // create the Pool and init it
  Pool            := TIdThreadMgrPool.Create(nil);
  Pool.PoolSize   := Options.RunningThreads;
  Pool.ThreadClass:= TUrlThread;
  Pool.ThreadPriority := Options.Priority;

  // init threads and start them
  for i := 1 to Options.RunningThreads do
  begin
    with (Pool.GetThread as TUrlThread) do
    begin
      Index     := i;
      Controler := Self;
    end;
  end; 
```

.

```
TUrlThread = class(TIdThreadWithTask)

...

var
  i: Integer;
begin
  // create the Pool and init it
  Pool            := TIdSchedulerOfThreadPool.Create(nil);
  Pool.PoolSize   := Options.RunningThreads;
  Pool.ThreadClass:= TUrlThread;
  Pool.ThreadPriority := Options.Priority;

  // init threads and start them
  for i := 1 to Options.RunningThreads do
  begin
    with (Pool.NewThread as TUrlThread) do
    begin
      Index     := i;
      Controler := Self;
    end;
  end; 
```

现在，话虽如此，最后一件事要注意。在 Indy 9 和 10 中，线程完成后可能不会放回池中，并且在初始化代码运行后新线程可能会添加到池中。这`PoolSize`是保留在池中的最小线程数，而不是绝对计数。超过`PoolSize`数量的客户端可以连接到服务器，它会在需要时为它们创建更多线程，从而绕过您的初始化代码。在这两个版本中，初始化线程的最佳位置是在`TUrlThread`构造函数中。将`Controler`指针存储在构造函数可以在需要时访问它的位置。分配一个没有意义`Index`到每个线程，因为池中线程的顺序随时间动态变化。

实际上，您的手动初始化代码实际上在两个版本中都是错误的方法，这是另一个原因。两者都不要将新线程添加到池中`TIdThreadMgrPool.GetThread()`。在 Indy 9 和 10 中，当线程停止运行并且有空间保存线程以供重用时，线程都会添加到池中，此外，仅在 Indy 10中启动`TIdSchedulerOfThreadPool.NewThread()`时才会将线程添加到池中。`TIdTCPServer`所以你实际上是在创建实际上没有做任何事情并且没有被池跟踪的线程。更有理由在两个版本中重新设计初始化代码，以便线程在正常条件下创建时自行初始化，而不是您侵入架构以手动创建它们。

# sql-server - Linq 子查询或 where 原因

> ID：14514811
> 
> 赞同：0
> 
> 时间：2013-01-25T03:21:01.917
> 
> 标签：sql-server, linq, linq-to-sql

我想做这样的事情`LINQ`：

```
select t1.vendor, t1.location 
from t1, t2
where t1.vendor = t2.vendor and t1.location = t2.location 
```

但是 t2 不是一个表，它是一个`data filter object`我正在考虑创建以包含如下数据的表。

```
 ┌──────────┬───────────┬
  │  Vendor  |  location │
  ├──────────┬───────────|
  |    v1    |     100   |
  |    v1    |     102   |
  |    v1    |     103   |
  |    v2    |     100   |
  |    v3    |     203   |
  ├──────────────────────┼ 
```

我的问题是：包含这些过滤器数据并使用它来查询表 t1 的最佳数据结构是什么`SQL Server`？由于供应商到位置是一对多的关系，我不能使用字典或哈希表。`NameValueCollection`不是泛型类型。此外，`LINQ`从 ? 检索数据的语法应该如何`SQL Server`？请帮忙！

谢谢！温迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:33:01.873

您可以尝试为您的 t2 使用匿名类型；像这样的东西：

```
var t2 = from xx in context.SomeTable
select new {Vendor = xx.v, Location = xx.l}; 
```

然后您可以在下一个查询中使用 t2。

例子：

```
var result = from t1 in context.T1
              from tt in t2
              where t1.vendor = tt.vendor && t1.location = tt.location 
             select new {t1.vendor, t1.location } 
```

或者你可以加入 t1 和 t2

# java - 为什么 Spring 的事务管理不适用于此配置？

> ID：14514818
> 
> 赞同：3
> 
> 时间：2013-01-25T03:22:17.847
> 
> 标签：java, spring, hibernate, spring-transactions

SO上有很多关于这个的问题，但我已经尝试了其中一些听起来正确的问题，但我仍然得到

```
org.hibernate.HibernateException: No Session found for current thread 
```

我的服务层类注释如下：

```
 @Service
   public class MyService {
       @Autowired
       public SomeDao someDao;

       @Transactional
       public void performSomeTransaction() {/* ... */}
   } 
```

我的应用程序上下文 XML 具有以下相关声明：

```
 <context:component-scan base-package = "com.myapp.business.dao.impl" />
    <context:component-scan base-package = "com.myapp.business.services" />

    <context:annotation-config />

    <tx:annotation-driven transaction-manager = "transactionManager" />

    <!-- Hibernate -->
    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="hibernateProperties">
            <props>
                <prop key="connection.url">jdbc:mysql://localhost:3306/bidapp</prop>
                <prop key="connection.username">bidapp</prop>
                <prop key="connection.password">pennyfss</prop>
                <prop key="connection.driver_class">com.mysql.jdbc.Driver</prop>

                <prop key="hibernate.connection.pool_size">10</prop>
                <prop key="hibernate.connection.autocommit">false</prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>

                <prop key="c3p0.acquireIncrement">1</prop>
                <prop key="c3p0.max_size">50</prop>
                <prop key="c3p0.max_statement">0</prop>
                <prop key="c3p0.min_size">10</prop>
                <prop key="c3p0.timeout">0</prop>
            </props>
        </property>
        <property name="dataSource" ref="dataSource"></property>
        <property name="packagesToScan">
            <list>
                <value>com.bidapp.business.domain</value>
            </list>
        </property>
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/bidapp" />
        <property name="username" value="bidapp" />
        <property name="password" value="pennyfss" />
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean> 
```

我也有我的`dispatcher-servlet.xml`文件

```
 <mvc:annotation-driven />
<mvc:default-servlet-handler />

<context:component-scan base-package="com.myapp.presentation.controllers" />
<context:annotation-config />

<bean id="viewResolver" class="org.thymeleaf.spring3.view.ThymeleafViewResolver">
    <property name="templateEngine" ref="templateEngine" />
</bean> 
```

为什么 spring 不使用事务来包装我的服务？

因此，问题似乎与没有正确获取实例有关。我有以下 Shiro 安全配置：

```
 <bean id = "hibernateRealm" class = "com.bidapp.presentation.shiro.HibernateRealm" >
        <property name = "credentialsMatcher" ref = "credentialsMatcher" />
    </bean> 

    <bean id = "credentialsMatcher" class = "com.bidapp.presentation.shiro.JasyptCredentialsMatcher" />

    <bean id = "securityManager" class = "org.apache.shiro.web.mgt.DefaultWebSecurityManager">
        <property name = "realm" ref = "hibernateRealm" />
    </bean> 
```

HibernateRealm 是带有`@Transactional`注解的服务类。Spring不应该将它包装在代理中，因为它是在这里创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:59:45.567

此问题的最常见原因是

1.  Incorrectly obtaining a service instance: for instance, instantiating it yourself rather than getting an instance from Spring.
2.  Incorrectly configuring the root and child application contexts in a Spring MVC application. I've answered quite a number of these questions here. Here are some of the more educational ones:

[Spring XML file configuration hierarchy help/explanation](https://stackoverflow.com/questions/7774295/spring-xml-file-configuration-hierarchy-help-explanation/7774597#7774597)

[Declaring Spring Bean in Parent Context vs Child Context](https://stackoverflow.com/questions/7746633/declaring-spring-bean-in-parent-context-vs-child-context/7748108#7748108)

Showing the code where you obtain and use the service instance will help define the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-16T21:41:17.750

Add the property hibernate.current_session_context_class=thread during session factory creation in hibernate-persistance.xml file it will work.

# javascript - jquery克隆下拉列表

> ID：14514824
> 
> 赞同：2
> 
> 时间：2013-01-25T03:22:41.537
> 
> 标签：javascript, jquery, html, ajax

嗨，我有以下下拉列表场景

![在此处输入图像描述](../Images/2ff83980f92506e4ec7c615d1d799641.png)

每当我选择 cat1 选项时，都会填充子 cat 1 选项。但是，如果我添加另一个类别，它应该只添加 cat1 选项而不是子 cat 选项。但在我的情况下，cat 1 和 sub cat 选项都已加载。以下是我克隆下拉列表的代码。

```
 <div class="new-categories">
                    <div class="new-category">
                        <select class="category-select" name="categories">
                        <option></option>
                        <option value="1">cat 1</option>

                    </select>
                    <select class='category-select-sub' style="display:none">
                        <!-- loaded from ajax -->
                    </select>
        </div></div>
    <a href="#" class="add-another-cat smallest" style="">Add another category</a>

$('.add-another-cat').click(function(event){
             event.preventDefault();
             var $orDiv = $('.new-category:last').after($('.new-category:first').clone());

}); 
```

这就是我实际上应该看起来的样子

![在此处输入图像描述](../Images/ceb88646c22d36e8dc2414f1a0e11d7b.png)

谢谢。

更新：填充ajax结果

```
 $('div.new-categories').on('change', 'select.category-select', function () { 
             var $newselect = $('<select />').addClass('category-select-sub');
    $(this).parent().append($newselect);
            var cat_id = $(this).val();
            $.ajax({
                url:baseUrl+'categories/getsubcat',
                data:{'id':cat_id},
                dataType:'json',
                async:false,
                type:'POST',
                success:function(data){
                    var subhtml = data;
                    $('.category-select-sub').show();
                    $('.category-select-sub').html(subhtml);
                }
            });
        }); 
```

一旦添加了新的猫列表并选择了一个选项，第一个子猫就会根据新列表进行更改。如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:51:21.243

您的代码对我来说没有意义，但这是我认为您正在尝试做的事情。如果我错了，请纠正我。

“我想克隆 div`new-category`并将其附加到 div `new-categories`。我只想要克隆第一个选择列表，而不是其他任何东西。

[http://jsfiddle.net/HZp5M/](http://jsfiddle.net/HZp5M/)

```
$('a.add-another-cat').click(function(e) {
    e.preventDefault();
    //clone the first div
    var $newdiv = $('div.new-category:first').clone();
    //remove the second select (if there is one)
    $newdiv.children('select.category-select-sub').remove();
    //append new div
    $('div.new-categories').append($newdiv);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:30:29.263

[http://jsfiddle.net/SCArr](http://jsfiddle.net/SCArr)

```
<script src="//code.jquery.com/jquery-latest.js"></script>
<div id="clone" class="new-category" style="display:none;">
    <select class="category-select" name="categories">
    <option></option>
    <option value="1">cat 1</option>

    </select>
    <select class='category-select-sub' style="display:none">
        <!-- loaded from ajax -->
    </select>
</div>
<div class="new-categories">
</div>
<a href="#" class="add-another-cat smallest" style="">Add another category</a>

<script>
$('.add-another-cat').click(function(event){
    event.preventDefault();
    var $orDiv = $('.new-category:last').after($('#clone').clone().removeAttr('id').show());
});
$('.new-categories').html($('#clone').clone().removeAttr('id').show());
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T03:47:48.670

我想看看您如何拥有第二个子选择菜单，因为它可能会影响解决方案。

## 解决方案 1 - 使用空状态更好地创建

问题出在您的 HTML 结构中

```
<div class="new-category">
      <select class="category-select"> ... </select> 
      <select> ... </select> 
</div> 
```

克隆时，`.new-categories`您会克隆两个选择元素。您需要重建您的 HTML，以便只克隆您想要的内容。您将需要自己创建一些没有克隆的东西。例如，像这样：

```
$('.new-category:last').after( $("<div/>")
         .addClass("new-category").append($('.category-select:last').clone()).append($("<select/>").addClass(".category-select-sub").hide()); 
```

## 解决方案 2 - 克隆后清空子选择

[一个显示如何清空选择的 jsfiddle](http://jsfiddle.net/MM9Fc/4/)

## 如何自动填充影响所有人的子选择？

这很容易，您的代码明确引用所有子选择。看到你的代码说

```
$('.category-select-sub').show().html(subhtml); 
```

此代码意味着 - 将此 HTML 设置为所有“.category-select-sub”元素。但是您只需要此类的特定元素-不是全部..

您应该只参考您创建的子选择 - 这很容易，因为您已经参考了它 - 所以成功函数应该有这样的内容：

```
$newselect.show().html(subhtml); 
```

# javascript - 当用户单击 GridView 中的编辑按钮时如何显示下载图像

> ID：14514829
> 
> 赞同：0
> 
> 时间：2013-01-25T03:23:25.173
> 
> 标签：javascript, asp.net, gridview

我有一个来自 twitter-bootstrap 的“icon-edit”类的编辑链接。当用户在 javascript 中单击此按钮时，我想显示下载图像。我确实喜欢这样：

```
var editLink = $('.icon-edit');
   editLink.onclick = function () {
        document.getElementById("editLoading").style.visibility = "visible";
   } 
```

它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:25:26.637

我认为您需要更改的正确 CSS 样式是`display`具有值“块”（或“内联”）。

此外，您不应该/不能像这样混合使用 jQuery 和 Javascript。如果您使用 jQuery 对象（使用`$("")`），那么您应该使用 jQuery 方法。如果你想使用纯 Javascript，那么你可以使用 Javascript 方法。

在您的情况下，您使用 jQuery 按类选择一个元素。但是随后您尝试使用纯 Javascript将`onclick`处理程序绑定到所选元素。`.onclick`

你应该使用：

```
$(".icon-edit").on("click", function () {
    $("#editLoading").show();    // Basically the same as: $("#editLoading").css("display", "block");
}); 
```

而不是说“它不起作用。”，你应该解释发生了什么。你检查过浏览器的控制台吗？您收到错误消息吗？有什么东西会结冰吗？您是否尝试以任何方式进行调试，甚至通过将`alert`语句放置在某些地方以查看代码的运行程度？

# java - 如何使用字符串的内容作为对象的名称

> ID：14514836
> 
> 赞同：-3
> 
> 时间：2013-01-25T03:24:07.003
> 
> 标签：java, string

> **可能重复：**
> [使用字符串值创建变量名称](https://stackoverflow.com/questions/8631935/creating-a-variable-name-using-a-string-value)

假设我想做一个 for 循环，创建 10 个名为 num1、num2、num3....等的整数。

我怎样才能做到这一点？我似乎找不到使用预定义字符串作为对象名称的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:27:46.113

我不认为有任何方法可以做你所要求的。根据我认为您要完成的工作，我认为您应该使用数组或列表：

```
int [] num = new int[10];
for(int i = 0; i < 10; ++i){
   num[i] = // something
}

List<Integer> num = new ArrayList<Integer>();
for(int i = 0; i < 10; ++i){
   num.add(/* something */);
} 
```

# python - 为什么 python 实例没有 __name__ 属性？

> ID：14514838
> 
> 赞同：23
> 
> 时间：2013-01-25T03:24:26.700
> 
> 标签：python

```
>>> class Foo:
...   'it is a example'
...   print 'i am here'
... 
i am here
>>> Foo.__name__
'Foo'
>>> Foo().__name__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: Foo instance has no attribute '__name__'
>>> Foo.__doc__
'it is a example'
>>> Foo().__doc__
'it is a example'
>>> Foo.__dict__
{'__module__': '__main__', '__doc__': 'it is a example'}
>>> Foo().__dict__
{}
>>> Foo.__module__
'__main__'
>>> Foo().__module__
'__main__'
>>> myname=Foo()
>>> myname.__name__
Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
AttributeError: Foo instance has no attribute `__name__` 
```

实例没有属性的原因是什么 `__name__`？
也许`__name__`instance-myname 的 `myname`.
你介意告诉我更合乎逻辑的，而不是不合理的语法规则吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-25T03:37:35.550

您正在看到实现类和实例的工件。该`__name__`属性不存储在类字典中；因此，它不能从直接的实例查找中看到。

`vars(Foo)`仅查看并在类字典中查看并且`__module__`对`__doc__`实例可见。

要让实例访问类的名称，它必须向上使用`Foo().__class__.__name__`. 另请注意，类具有其他属性，例如`__bases__`不在类字典中的属性，同样不能从实例直接访问。

# c++ - 在 C++ 中删除动态分配的数组时出现令人困惑的错误

> ID：14514840
> 
> 赞同：0
> 
> 时间：2013-01-25T03:24:54.257
> 
> 标签：c++, memory-management

我正在尝试实现一个简单的合并排序算法。我非常困惑的是，在“array2”被删除后，我不断收到以下错误消息。

“ free(): 下一个尺寸无效（快速）”

请指教。非常感谢！

```
#include <iostream>
#include <limits.h>

using namespace std;

void merge_sort(int*,int,int);

int main(){
  //cout << "Max int: " << INT_MAX <<endl;
  int n;
  cin >> n;
  int* array = new int(n+1);
  for (int i=1; i<=n; i++)
    cin >> array[i];
  merge_sort(array,1,n);
  cout << "--------------------------------------------" <<endl;
  for (int i=1; i<=n; i++)
    cout << array[i] <<endl;
}

void merge_sort(int* array,int p,int r){
  cout << p << ' ' << r <<endl;
  if (p == r)
    return;
  int q = int((p+r)/2);
  merge_sort(array,p,q);
  merge_sort(array,q+1,r);
  //(p..q)  and (q+1 .. r) sorted, then merge this two sorted array
  int n1 = q-p+1;
  int n2 = r-q;
  cout << "Mark1 " <<n1<<' '<<n2<<endl;
  int *array1;
  array1 = new int(n1+1);
  int *array2;
  array2 = new int(n2+1);
  for (int i=p; i<=q; i++)
    array1[i-p] = array[i];
  for (int i=q+1; i<=r; i++)
    array2[i-q-1] = array[i];
  array1[n1] = INT_MAX;
  array2[n2] = INT_MAX;  //CONSTANT, serve as sentinel

  int p1 = 0;
  int p2 = 0;
  cout << "Mark2" << endl;
  for (int i=p; i<=r; i++){
    if (array1[p1]<array2[p2]){
      array[i] = array1[p1];
      p1++;
    }else{
      array[i] = array2[p2];
      p2++;`enter code here`
    }
  }   
  cout << "Mark3" << endl;
  delete [] array2;
  cout << "Delete array2 " << endl;

  delete [] array1;
  cout << "Delete array1 " << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:25:50.870

语法

```
new int(n+1) 
```

`int`在 free-store 上创建一个单曲并用 初始化它`n+1`，然后你马上用 . 越界访问它`array[1]`。你想要括号：

```
new int[n + 1] 
```

这将创建一个数组。程序中的每个其他地方也是如此。

此外，由于您在 开始循环`1`，因此该对象`array[0]`未初始化，如果您访问它，您将获得未定义的行为，您会这样做。这是白白浪费一个数组元素并为自己设置陷阱，我建议您不要将数组大小加 1 并从 0 开始索引。

# php - 使用mysql上的名称将文件从文件夹移动到另一个文件夹

> ID：14514845
> 
> 赞同：1
> 
> 时间：2013-01-25T03:25:18.650
> 
> 标签：php

大家好，我有一个网站，里面有 5 万张图片，我的数据库中有所有图片名称，由 Party_Id 命名，我有这样的东西

```
Picture_Id   |  Party_Id    |  Picture_Name
1            |  1           |  1aaaa.jpg
2            |  1           |  2aaaa.jpg
3            |  2           |  3aaaa.jpg
4            |  2           |  4aaaa.jpg 
```

网站创建时的问题，他们将所有图片保存在同一个文件夹中，现在当您需要操作任何东西或访问该文件夹时，真的很疯狂，ftp 无法显示这么多文件。

所以我的想法就像为每个派对 ID 创建一个文件夹，例如 1、2、3

然后，如果可以检查数据库是否像选择所有派对 id = 1 的图片并移入文件夹 1，那么我可以一个一个地做，然后删除或只保留原始文件夹。

我不知道该怎么做，我真的很感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:53:22.523

我确实喜欢这个并且工作，也许不是最好的解决方案，但完成了工作

```
 $Sql = "SELECT * FROM tabpartys WHERE Party_Id = '232'";
  $Query = mysql_query($Sql, $Conn) or die (mysql_error($Conn));
  while($Rs = mysql_fetch_array($Query)){
  // Identify directories
  $source = "../img/Fotos/".$Rs["Photo_Name"];
  $destination = "../img/Fotos/232/".$Rs["Photo_Name"];
  copy($source, $destination);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:05:39.323

我的理解是，你有一个派对 ID，每个派对都有一些照片。因此，在数据库中插入派对详细信息，您将使用`last_insert_id()`.

现在，有了它，您可以正常使用以下方式上传图片：

```
$target_path = "img/" . mysqli_insert_id();

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
} 
```

那么，您认为这是否适合您的案例？您现在将拥有这样的目录结构：

```
img/
    1/
        photo_a_1.jpg
        photo_a_2.jpg
        photo_a_3.jpg
        photo_a_4.jpg
    2/
        bro_wedding_1.jpg
        bro_wedding_2.jpg
        bro_wedding_3.jpg
    3/
        birthday_1.jpg
        birthday_2.jpg
        birthday_3.jpg
        birthday_4.jpg
        birthday_5.jpg 
```

现在您可以使用这种方式：

```
<img src="img/$partyId/$fileIndex" /> 
```

# asp.net - Oracle 非活动连接

> ID：14514852
> 
> 赞同：2
> 
> 时间：2013-01-25T03:25:48.157
> 
> 标签：asp.net, oracle, oracle10g

我的 oracle 服务器中有很多不活动的连接。我从那些不活动的人中检索 SQL 文本。SQL测试是

```
SELECT PARAMETER, VALUE FROM SYS.NLS_DATABASE_PARAMETERS WHERE PARAMETER IN ('NLS_CHARACTERSET', 'NLS_NCHAR_CHARACTERSET') 
```

但我从来没有在我的系统中使用过 SQL 语句，也不知道为什么该语句自动运行而不自动关闭。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:52:56.140

有问题吗？在大多数系统中，大多数会话在绝大多数时间都是不活动的。非活动会话仅表明在您查询数据字典的那一刻，没有执行 SQL 语句。无论您是在谈论客户端-服务器应用程序还是中间层具有连接池的三层应用程序，大多数时候，您都在等待应用程序处理某些数据或等待用户做出决定. 在此期间，数据库会话将处于非活动状态。

至于您看到的查询，我强烈打赌这只是一个查询，您使用的任何数据库驱动程序/框架（您的 ODBC 驱动程序、OLE DB 驱动程序、ODP.Net 提供程序等）在连接时执行打开或返回到中间层连接池时。

# android - android - stopPreview 和方向更改后保持相机预览的最佳方法

> ID：14514855
> 
> 赞同：1
> 
> 时间：2013-01-25T03:26:01.750
> 
> 标签：android, orientation, android-camera

我之前构建了很多与相机相关的应用程序，但它们总是构建在一个活动中，我在用户拍照后将视图锁定为横向或纵向。然而，这个新的应用程序要求允许在我调用 camera.stopPreview() 后允许旋转屏幕上捕获的图像。我曾经想过这样做......

1.）存储我的图片回调中的字节并将其放在一个包中

2.) 在我的 onResume 中检查 bundle != null 是否获取字节数组

3.) 因为我将surfaceView 放在frameLayout 中，所以我可以用imageView 临时替换surfaceView 并使用bitmapfactory.decodebytearray() 为imageview 创建位图图像。

现在我知道我可以让这一切正常工作，但是有没有办法通过相机预览或其他东西，所以我不必付出额外的努力来达到我的要求？此外，我必须创建和存储的位图越少，在内存方面就越好，这就是为什么我不去这样做的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:23:08.247

我最终只是在我的图片回调中使用了这个

```
if(getScreenOrientation()==Configuration.ORIENTATION_LANDSCAPE){
         setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
         }else{
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
         } 
```

然后在我使用的一个按钮中

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR); 
```

将其全部重新打开，使其再次旋转

# php - 使用 URL 重定向从 Ajax 下载 PHP 文件

> ID：14514860
> 
> 赞同：0
> 
> 时间：2013-01-25T03:27:04.850
> 
> 标签：php, ajax, url-rewriting, download

我试图弄清楚这是怎么可能的。

我希望用户能够点击一个链接，它会下载某个文件。该文件将在 Ajax 调用中确定（现在我只有一个硬编码值）。

这是我的情况：当调用 Ajax 时，为请求提供的链接是我的框架的一部分，它有一个前端控制器，并且 url 被重定向。因此，我不能只将链接发送到一个名为 download.php 的文件，而其中只有标头代码。它贯穿整个框架流程，最终到达处理 Ajax 调用的方法。

这是我的代码：

```
$('.jobApplicationDownload').click(function() {
var that = $(this);
$
.ajax({
    type : "POST",
    url : "myfw/businessHome/applications/downloadJobApplicationItem",
    data : {
        "ajaxFileType" : that.attr("data-ftype"), "ajaxApplicationId" : that.attr("data-did")
    },
    success : function(html) {
        alert(html);
    },
    error : function(XMLHttpRequest,
            textStatus, errorThrown) {
        alert("ERROR");
    }
}); 
```

});

这是PHP。请记住，这是在通过 Front Controller 和一堆其他方法之后。这绝不是 Ajax 调用之后的第一站。

```
function downloadJobApplicationItem() {
    //download.php
    //content type
    $fileName = "/myfw/common/jobs/resumes/eZACKe_1359081853_Week Three Sprints & Hurdles Workout 24th - 28th of Sept (1).pdf";
    header('Content-disposition: attachment; filename='.$fileName);
    header('Content-type: application/pdf');
    //read from server and write to buffer
    readfile('/myfw/common/jobs/resumes/eZACKe_1359081853_Week Three Sprints & Hurdles Workout 24th - 28th of Sept (1).pdf');
    echo $_POST['ajaxFileType']. " ". $_POST['ajaxApplicationId'];
} 
```

**编辑：**哦，顺便说一句，结果是我正在回显的东西被警告，并且没有文件下载开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:41:00.723

我通过缓冲所有输出并允许控制器更改或取消设置重定向位置来解决这个问题。在所有控制器运行后，检查重定向位置并在那时写入重定向标头（如果需要）。然后输出你的缓冲区。

像这样的东西：

```
$appSettings = new AppSettings();
$appSettings->setRedirect(...);
$controller=new Controller($appSettings);
ob_start();
$controller->run(); //Your controller can call $appSettings->setRedirect(false);
$redirect=$appSettings->getRedirect();
if($redirect===false)
{
    ob_end_flush(); //Send the buffer
}
else
{
    ob_end_clean(); //Discard the buffer
    header('Location: '.$redirect);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T03:49:02.193

阅读您的问题时我很困惑，因为我认为您在多个问题之间混淆了。

1.  **AJAX 请求是否到达正确的处理程序？**: 在你的框架中使用的 URL 路由机制和几乎所有其他机制只在这里很重要，它不影响你是否可以访问你的物理文件。这是完全不同的事情。无论如何，我会说您的 AJAX 调用是正确的，因为回显会收到警报

2.  **如何通过被重定向的 AJAX 调用发送文件的路径？**：您可以考虑使用的一个技巧，与您所做的类似，是使用中央下载功能作为 AJAX 处理程序，并使用通过 AJAX 发送的参数构造文件的路径。

3.  **为什么 readfile 不将所需的文件输出到缓冲区**：很可能是您的路径不正确或与服务器设置不兼容。如果您可以在此处发布您的服务器配置，将会有所帮助。

并且发布您的框架的名称也不会受到伤害:)

# android - Google Maps Android API v2- 编译我的 android 应用程序时出错

> ID：14514862
> 
> 赞同：1
> 
> 时间：2013-01-25T03:27:27.357
> 
> 标签：android, android-emulator, android-manifest, android-maps, android-maps-v2

**当前状态：问题尚未解决 - 需要帮助..**

我现在使用新的谷歌地图 Android v2 开发地图应用程序..在我将它应用到我的真实应用程序之前..我做了一个测试..并试图让它工作..我遵循了Google Developers的[文档](https://developers.google.com/maps/documentation/android/)

但似乎有些部分我错过了，但找不到它们.. 你能帮我识别它们吗？我会在下面给你我的源代码......让你清楚地看到它们......

这是我当前的 MainActivity 类（更新）：<---我的程序中只有这个类

```
 package com.madcatworld.demomapv2;

    import com.google.android.gms.maps.SupportMapFragment;

    import android.os.Bundle;
    import android.support.v4.app.FragmentActivity;
    import android.view.Menu;

    public class MainActivity extends FragmentActivity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

        SupportMapFragment fragment = new SupportMapFragment();
        getSupportFragmentManager().beginTransaction()
                .add(R.id.map, fragment).commit();  

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

    } 
```

这是我的activity_main.xml：（更新）

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" /> 
```

这是我的 Manifest.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.madcatworld.demomapv2"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-feature
            android:glEsVersion="0x00020000"
            android:required="true" />

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="14" />

        <permission
            android:name="com.madcatworld.demomapv2.permission.MAPS_RECEIVE"
            android:protectionLevel="signature" />

        <uses-permission android:name="com.madcatworld.demomapv2.permission.MAPS_RECEIVE" />
        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
        <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

        <application
            android:allowBackup="true"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <meta-data
                android:name="com.google.android.maps.v2.API_KEY"
                android:value="xxxxxxxxxxxxxxx" />

            <activity
                android:name="com.madcatworld.demomapv2.MainActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

    </manifest> 
```

我的模拟器：出现“获取 Google Play 服务”对话框..当我点击它时...出现如下一些错误..

我当前的错误日志（更新）它似乎比以前的错误更短！:) :

```
01-25 04:23:18.647: E/AndroidRuntime(503): FATAL EXCEPTION: main
01-25 04:23:18.647: E/AndroidRuntime(503): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=http://play.google.com/store/apps/details?id=com.google.android.gms flg=0x80000 pkg=com.android.vending }
01-25 04:23:18.647: E/AndroidRuntime(503):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
01-25 04:23:18.647: E/AndroidRuntime(503):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
01-25 04:23:18.647: E/AndroidRuntime(503):  at android.app.Activity.startActivityForResult(Activity.java:2817)
01-25 04:23:18.647: E/AndroidRuntime(503):  at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:817)
01-25 04:23:18.647: E/AndroidRuntime(503):  at android.app.Activity.startActivity(Activity.java:2923)
01-25 04:23:18.647: E/AndroidRuntime(503):  at com.google.android.gms.internal.d$2.onClick(Unknown Source)
01-25 04:23:18.647: E/AndroidRuntime(503):  at android.view.View.performClick(View.java:2408)
01-25 04:23:18.647: E/AndroidRuntime(503):  at android.view.View$PerformClick.run(View.java:8816)
01-25 04:23:18.647: E/AndroidRuntime(503):  at android.os.Handler.handleCallback(Handler.java:587)
01-25 04:23:18.647: E/AndroidRuntime(503):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-25 04:23:18.647: E/AndroidRuntime(503):  at android.os.Looper.loop(Looper.java:123)
01-25 04:23:18.647: E/AndroidRuntime(503):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-25 04:23:18.647: E/AndroidRuntime(503):  at java.lang.reflect.Method.invokeNative(Native Method)
01-25 04:23:18.647: E/AndroidRuntime(503):  at java.lang.reflect.Method.invoke(Method.java:521)
01-25 04:23:18.647: E/AndroidRuntime(503):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-25 04:23:18.647: E/AndroidRuntime(503):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-25 04:23:18.647: E/AndroidRuntime(503):  at dalvik.system.NativeStart.main(Native Method) 
```

供你参考，

1.  我已经通过从 Eclipse 复制我的 SHAI 号码在我的谷歌帐户中生成了一个新的 api 密钥。

2.  我做了这个步骤Android工具>右键单击>导出签名的应用程序包（使它们相互链接，我创建新的密钥库）我的问题是：我应该实现这个（否2）？

如果您发现我犯的任何错误，请告诉我..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:47:57.500

您尝试访问文件 Mapfragment id 的`android.R.id.content`位置时犯了一个错误`my activity_main.xml``android:id="@+id/map"`

所以，试试这个方法。

将此代码放入您的 onCreate(..) 方法中

```
SupportMapFragment fragment = new SupportMapFragment();
    getSupportFragmentManager().beginTransaction()
            .add(R.id.map, fragment).commit(); 
```

而不是这个。

```
 SupportMapFragment fragment = new SupportMapFragment();
        getSupportFragmentManager().beginTransaction()
                .add(android.R.id.content, fragment).commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:16:34.583

而不是使用`commit()`use`.getMap();`方法来获取和加载地图。

> ```
> GoogleMap mMap;
>   mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
>                 .getMap(); 
> ```

# c# - 需要跨越条形图的 Zedgraph 水平线

> ID：14514865
> 
> 赞同：0
> 
> 时间：2013-01-25T03:27:41.343
> 
> 标签：c#, graph, bar-chart, zedgraph

我正在使用 ZedGraph

[http://www.codeproject.com/Articles/5431/A-flexible-charting-library-for-NET?fid=26087&fr=11#xx0xx](http://www.codeproject.com/Articles/5431/A-flexible-charting-library-for-NET?fid=26087&fr=11#xx0xx)

我想绘制垂直条，然后在整个绘图区域上画一条水平线。

它似乎只到了酒吧的尽头！

我尝试添加一些 x 轴和 y 轴的值来达到这个效果，但它不起作用。

是否可以？

![做对了](../Images/6556da1c39fa03aa4a6d83493ccfd926.png)

这是我的代码：

```
 private void CreateGraph( ZedGraphControl zgc )
    {
        // get a reference to the GraphPane
        GraphPane myPane = zg1.GraphPane;

        // Set the Titles
        myPane.Title.Text = "My Test Bar Graph";
        myPane.XAxis.Title.Text = "Label";
        myPane.YAxis.Title.Text = "My Y Axis";

        // Make up some random data points
        string[] labels = { "Panther", "Lion" };
        double[] y = { 100, 115 };
        double[] x = {0, 900 };
        double[] y4 = { 90, 90};

        // Generate a black line with "Curve 4" in the legend
        LineItem myCurve = myPane.AddCurve("Curve 4", x, y4, Color.Black, SymbolType.Circle);

        // Generate a red bar with "Curve 1" in the legend
       BarItem myBar = myPane.AddBar("Curve 1", null, y, Color.Red);
       myBar.Bar.Fill = new Fill(Color.Red, Color.White, Color.Red);

        // Fix up the curve attributes a little
        myCurve.Symbol.Size = 8.0F;
        myCurve.Symbol.Fill = new Fill(Color.White);
        myCurve.Line.Width = 2.0F;

        // Fix up the curve attributes a little
        myCurve.Symbol.Size = 8.0F;
        myCurve.Symbol.Fill = new Fill(Color.White);
        myCurve.Line.Width = 2.0F;

        // Draw the X tics between the labels instead of 
        // at the labels
        myPane.XAxis.MajorTic.IsBetweenLabels = true;

        // Set the XAxis labels
        myPane.XAxis.Scale.TextLabels = labels;
        // Set the XAxis to Text type
        myPane.XAxis.Type = AxisType.Text;

        // Fill the Axis and Pane backgrounds
        myPane.Chart.Fill = new Fill(Color.White, Color.FromArgb(255, 255, 166), 90F);
        myPane.Fill = new Fill(Color.FromArgb(250, 250, 255));

        // Tell ZedGraph to refigure the
        // axes since the data have changed
        zg1.AxisChange();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:15:29.530

我发现你不能只在条形图上放一条水平线，因为这种情况下的 x 轴类型不是数字/离散的 - 它是一个文本值。

如果要在条形图上放置水平线，则必须使用组合图：http: //zedgraph.dariowiz.com/indexd6f1.html?title= [Combo_Chart_Demo](http://zedgraph.dariowiz.com/indexd6f1.html?title=Combo_Chart_Demo)

这样，x 轴是数字的，因此您可以创建所需的任何线条以及条形。

# windows-phone-8 - windows phone 8环境下如何实现Android UI中图库控件的性能

> ID：14514867
> 
> 赞同：0
> 
> 时间：2013-01-25T03:27:48.483
> 
> 标签：windows-phone-8, android-gallery

图库控件在 Android 操作系统中提供了良好的 UI。我想在 wp8 中实现相同的性能。我发现 wp8 中的全景控件具有几乎相似的性能，但它始终在右侧显示 20 像素。此外，当滑动 UI 时，枢轴控件将显示黑屏，除了背景图像不显示任何内容。

所以想结合wp8中这两个控件的能力，来达到画廊控件的相同性能。

首先，当滑动 UI 时，右侧屏幕会立即显示给用户一个连续的视图。其次，我不想在右侧屏幕上显示 20 像素。

那么，谁能告诉我如何实现它。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T00:53:44.873

只是一个想法，目前没有时间测试它，但是如果您将 PanoramaItem 的左侧的边距设置为 20，也许右侧设置为 -20，它是否可以在全景控件中工作？

# jquery - HTML 中的水平表和对角表

> ID：14514869
> 
> 赞同：2
> 
> 时间：2013-01-25T03:28:06.707
> 
> 标签：jquery, html, css

可以用 HTML/CSS/Javascript 实现对角表列/单元格吗？

我已经用谷歌搜索了几个小时，我能找到的唯一资源是对角分割单元格，而不是旋转表格/列的一部分。

截屏：

![在此处输入图像描述](../Images/f8b5eb1c561d4a93edb332ad83a19f47.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:30:00.810

就像@JakeGould 写的那样，您想使用`Div`或更好的`Ul`标签。至于转弯，使用 CSS3 旋转完成的桌子：

```
transform:rotate(-45deg);
-ms-transform:rotate(-45deg); /* IE 9 */
-moz-transform:rotate(-45deg); /* Firefox */
-webkit-transform:rotate(-45deg); /* Safari and Chrome */
-o-transform:rotate(-45deg); /* Opera */ 
```

所以基本上你的表格是由两张桌子组成的，一张是普通的，另一张是使用 CSS3 旋转的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:34:53.673

至少可以说这似乎很复杂。我不会尝试使用任何`<table>`标签来执行此操作，而是使用`<div>`, `<ul>`&`<li>`标签。但我相信现代 CSS 选项是可行的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T06:21:42.460

您在这里有 2 张桌子。旋转平方英尺。表，位于部门表后面。之后，您将一些内容旋转回初始位置。没有背景颜色的数字可以是表的一部分，重置它们上的 bg 颜色或单独的表，如列表，旋转并位于桌子附近。玩得开心！

# android - 强制关闭导致 HTTP 实体可能不为空

> ID：14514875
> 
> 赞同：4
> 
> 时间：2013-01-25T03:28:43.743
> 
> 标签：android

这里有一个完整的代码异步任务来发送数据 Http

```
private class MyAsyncTaskPupuk extends AsyncTask<Void,Object ,Void> {

boolean bNodata=false;
boolean bError=false;
@Override
protected Void doInBackground(Void... arg0) {
    bNodata=false;
    bError=false;
    recordCount=cursorSend.getCount();
    if (recordCount<=0){//
        bNodata=true;
        return null;
    }
    cursorSend.moveToFirst();
    publishProgress(0,"Sending data started");
    //SystemClock.sleep(1000);
    CHamaRecord rec=new CHamaRecord();
    for (int i=0; i<recordCount; i++){
        if (isCancelled()) break;
        rec.lID=cursorSend.getLong(0);
        rec.dLongitude=cursorSend.getDouble(1);
        rec.dLatitude=cursorSend.getDouble(2);
        rec.dAccuracy=cursorSend.getDouble(3);
        rec.sFilename=cursorSend.getString(4);
        rec.nUserId=cursorSend.getInt(5);
        rec.nRate=cursorSend.getInt(6);
        rec.lDate=cursorSend.getLong(7);
        rec.sSent=cursorSend.getString(8);
        rec.IDSite=cursorSend.getString(9);
        rec.alamatSite=cursorSend.getString(10);
        rec.komoditas=cursorSend.getString(11);
        rec.luasSite=cursorSend.getString(12);
        rec.petugas=cursorSend.getString(13);
        rec.jnsHama=cursorSend.getString(14);
        rec.jmlHama=cursorSend.getString(15);
        rec.sn=cursorSend.getString(16);
        rec.pn=cursorSend.getString(17);
        rec.manufaktur=cursorSend.getString(18);
        rec.lblHama=cursorSend.getString(19);
        rec.lblKomoditas=cursorSend.getString(20);
        rec.lblPetugas=cursorSend.getString(21);
        publishProgress(1,i,rec);
        if (!SendDataFoto(rec)){
            recordCount=i;
            bError=true;
            break;
        }
        else {
            //change flag sent
            rec.sSent=CGeneral.strSent;
            cDBPupuk.updateEntry(rec.lID, rec);
        }
        cursorSend.moveToNext();
    }
    return null;
}//doInBackground

private boolean SendDataFoto(CHamaRecord rec){

        String slon=String.format("%f", rec.dLongitude);
        String slat=String.format("%f", rec.dLatitude);
        String sacc=String.format("%f", rec.dAccuracy);
        String srate=String.format("%d",rec.nRate);
        String sid=String.format("%d",rec.nUserId);
        String ids=String.format(rec.IDSite);
        String alt=String.format(rec.alamatSite);
        String kmd=String.format(rec.komoditas);
        String ls=String.format(rec.luasSite);
        String op=String.format(rec.petugas);
        String jns=String.format(rec.jnsHama);
        String jml=String.format(rec.jmlHama);
        String sn=String.format(rec.sn);
        String pn=String.format(rec.pn);
        String mFact=String.format(rec.manufaktur);
        String lblhama=String.format(rec.lblHama);
        String lblKomoditas=String.format(rec.lblKomoditas);

        File file=new File(rec.sFilename);
        String sfname=file.getName();
        String cfname=file.getName();
        int i=0;
        String lfname=rec.sFilename;
        sfname = sfname.substring(0, sfname.lastIndexOf("."));
        Calendar cal=Calendar.getInstance();
        cal.setTime(new Date(rec.lDate));
        String sdat=CUtilities.DateToString(cal);

        String url;
        String spupuk;
        if (CGeneral.nPupukOrPelihara==CGeneral.ACTIVITY_FOR_PUPUK){
            url = CGlobalConfig.getURLRcvrPupuk();
            spupuk="Hama";
        }
        else{
            url = CGlobalConfig.getURLRcvrPeliharaImage();
            spupuk="pelihara";
        }

        Bitmap bmp=BitmapFactory.decodeFile(lfname);
        ByteArrayOutputStream bao = new ByteArrayOutputStream();

        bmp.compress(Bitmap.CompressFormat.JPEG, 90, bao);

        byte[] ba = bao.toByteArray();

        HttpEntity entity=null;

        try {

            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            ByteArrayBody bab = new ByteArrayBody(ba, spupuk+"_"+cfname);
            MultipartEntity reqEntity = new MultipartEntity(
            HttpMultipartMode.BROWSER_COMPATIBLE);
            reqEntity.addPart("image", bab);
            reqEntity.addPart("category", new StringBody(spupuk));
            reqEntity.addPart("file_name", new StringBody(spupuk+"_"+cfname));
            reqEntity.addPart("rate", new StringBody(srate));
            reqEntity.addPart("tgl", new StringBody(sdat));
            reqEntity.addPart("user_id", new StringBody(sid));
            reqEntity.addPart("latitude", new StringBody(slat));
            reqEntity.addPart("longitude", new StringBody(slon));
            reqEntity.addPart("accuracy", new StringBody(sacc));
            reqEntity.addPart("id_site", new StringBody(ids));
            reqEntity.addPart("alamat_site", new StringBody(alt));
            reqEntity.addPart("komoditas", new StringBody(kmd));
            reqEntity.addPart("luas_area", new StringBody(ls));
            reqEntity.addPart("petugas", new StringBody(op));
            reqEntity.addPart("jenis_hama", new StringBody(jns));
            reqEntity.addPart("jumlah_hama", new StringBody(jml));
            reqEntity.addPart("serial", new StringBody(sn));
            reqEntity.addPart("p_number", new StringBody(pn));
            reqEntity.addPart("manufaktur", new StringBody(mFact));

            httppost.setEntity(reqEntity);
            HttpResponse response = httpclient.execute(httppost);

            entity = response.getEntity();

        } catch (Exception e) {
            Log.e(e.getClass().getName(), e.getMessage());
        }
        String temp = null;
        try {
            temp = EntityUtils.toString(entity);
        } catch (ParseException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        if (temp.compareTo("SUCCESS") == 0) {
            publishProgress(0,"Send Ok");
            SystemClock.sleep(500);
            return true;
        }
        else{
            publishProgress(0,"Send Fail");
            return false;               
        }   

    }

@Override
    protected void onProgressUpdate(Object... arg) {
        Integer oi=(Integer)arg[0];
        String oStr;
        CHamaRecord rec;
        int flag=oi.intValue();
        int nVal;
        String str;
        TextView tvStatus=(TextView) layoutSendDialog.findViewById(R.id.tvPupukSendStatus);
        TextView tview;
        switch (flag) {
        case 0 :
            oStr=(String)arg[1];
            tvStatus.setText(oStr);
            break;
        case 1 :
            oi=(Integer)arg[1];
            rec=(CHamaRecord)arg[2];
            nVal=oi.intValue();
            str="Send record #"+String.format("%d",nVal);
            tvStatus.setText(str);
            str=String.format("%d", rec.lID);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendID);  
            tview.setText(str);
            str=String.format(rec.IDSite);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendIDSite);  
            tview.setText(str);
            str=String.format(rec.alamatSite);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendAlamat);  
            tview.setText(str);
            str=String.format(rec.lblKomoditas);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendKomoditas);  
            tview.setText(str);
            str=String.format(rec.luasSite);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendLuas);  
            tview.setText(str);
            str=String.format(rec.lblPetugas);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendPetugas);  
            tview.setText(str);
            str=String.format(rec.lblHama);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendJenis);  
            tview.setText(str);
            str=String.format(rec.jmlHama);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendJumlah);  
            tview.setText(str);
            str=String.format(rec.sn);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendSerial);  
            tview.setText(str);
            str=String.format(rec.pn);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendProduk);  
            tview.setText(str);
            str=String.format(rec.manufaktur);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendManufaktur);  
            tview.setText(str);
            str=String.format("%+3.5f", rec.dLongitude);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendLongitude);  
            tview.setText(str);
            str=String.format("%+3.5f", rec.dLatitude);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendLatitude);  
            tview.setText(str);
            /*str=String.format("%2.2f", rec.dAccuracy);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendAccuracy);  
            tview.setText(str);*/
            Date dt=new Date(rec.lDate);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendDate);  
            tview.setText(dt.toLocaleString());
            /*str=String.format("%d", rec.nRate);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendRating);  
            tview.setText(str);
            str=String.format("%d", rec.nUserId);
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendOperator);  
            tview.setText(str); */
            File file=new File(rec.sFilename);
            String fname=file.getName();
            tview = (TextView) layoutSendDialog.findViewById(R.id.tvPupukSendFilename);  
            tview.setText(fname);
            break;
        }
    }   
    //
    @Override
    protected void onPostExecute(Void unused) {
        TextView tvStatus=(TextView) layoutSendDialog.findViewById(R.id.tvPupukSendStatus);
        if (bNodata){
            tvStatus.setText("No data to be sent!!!");              
        }else {
            if (bError){
                tvStatus.setText("Fail at record #"+String.format("%d",recordCount));
            }
            else {
                tvStatus.setText("Sending Data : Finished");
            }
        }
//          dismissDialog(CGeneral.DIALOG_SEND);
    }
    protected void onCancelled(Void unused) {
        dismissDialog(CGeneral.DIALOG_SEND);
    }

} 
```

应用程序工作，但是当我输入错误的 url 或连接超时时，应用程序被强制关闭。

这是我的日志猫

```
01-25 10:11:27.554: ERROR/AndroidRuntime(2587): FATAL EXCEPTION: AsyncTask #1
01-25 10:11:27.554: ERROR/AndroidRuntime(2587): java.lang.RuntimeException: An error occured while executing doInBackground()
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at java.lang.Thread.run(Thread.java:1019)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587): Caused by: java.lang.IllegalArgumentException: HTTP entity may not be null
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at org.apache.http.util.EntityUtils.toString(EntityUtils.java:110)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at org.apache.http.util.EntityUtils.toString(EntityUtils.java:146)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at hariff.ltis.inputhama.CInputHamaApp$MyAsyncTaskPupuk.SendDataFoto(CInputHamaApp.java:1307)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at hariff.ltis.inputhama.CInputHamaApp$MyAsyncTaskPupuk.doInBackground(CInputHamaApp.java:1040)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at hariff.ltis.inputhama.CInputHamaApp$MyAsyncTaskPupuk.doInBackground(CInputHamaApp.java:1)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
01-25 10:11:27.554: ERROR/AndroidRuntime(2587):     ... 4 more
01-25 10:11:27.570: DEBUG/u-blox(1308): ublox_stop :
01-25 10:11:27.570: WARN/ActivityManager(1308):   Force finishing activity hariff.ltis.mainmenu/hariff.ltis.inputhama.CInputHamaApp 
```

强制关闭`temp = EntityUtils.toString(entity);`

如何解决？所以当我输入错误的 url 或连接超时时，应用程序不会强制关闭并显示消息`"Send Failed"`。?

BR

亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T03:43:36.507

你有一个，在你尝试使用实体*之前*`HttpResponse`检查它。

 *[http://developer.android.com/reference/org/apache/http/HttpResponse.html](http://developer.android.com/reference/org/apache/http/HttpResponse.html)

```
int code = response.getStatusLine().getStatusCode(); 
String message = response.getStatusLine().getReasonPhrase(); 
```

以下是 Apache 用于代码的常量（它们是标准 HTTP，但由于您正在使用这些常量，因此`HttpClient`您可以参考这些来查看您是否得到了预期的响应）：http: [//developer.android。 com/reference/org/apache/http/HttpStatus.html](http://developer.android.com/reference/org/apache/http/HttpStatus.html)

如果请求到达服务器并失败，响应会通知您（对于“错误的 url”，例如甚至无法解析主机，连接将超时，但这不是您遇到的错误）。而且，即使在那之后，我相信您仍然应该在将实体传递给之前检查该实体是否不为空`EntityUtils`（如果它为空，则出现其他意外错误，请退出）。

这是一个应该为您指明正确方向的示例（我不建议仅复制/粘贴它，而是尝试理解它；这是一个广泛的概括，您可能只想检查标准的 OK 响应，而不是重定向，并且或者您的服务器端可能正在做一些非标准的事情，这取决于服务器）：

```
HttpResponse httpResponse = null;
  String response = null;
  String message = null;
  int code = -1;
  try {
     httpResponse = client.execute(request);
     code = httpResponse.getStatusLine().getStatusCode();
     message = httpResponse.getStatusLine().getReasonPhrase();

     Log.i("LOG_TAG", "HTTP response -- code:" + code + "  message:" + message);

     if (code >= 200 && code <= 399) {
        Log.v("LOG_TAG", "got valid HTTP response code (200-399) processing response entity");
        HttpEntity entity = httpResponse.getEntity();
        if (entity != null) {
           InputStream instream = null;
           try {
              instream = entity.getContent();
              // convert stream if gzip header present in response
              Header contentEncoding = httpResponse.getFirstHeader("Content-Encoding");
              if (contentEncoding != null && contentEncoding.getValue().equalsIgnoreCase("gzip")) {
                 instream = new GZIPInputStream(instream);
              }
              response = convertStreamToString(instream);
           } finally {
              if (instream != null) {
                 instream.close();
              }
           }
        }
     } else {
        // GOT SOME NON-VALID CODE, 404 (not found), 5xx (error), etc (log this, react to this, whatever, but you can't just use the "entity")
     }
  } catch (ClientProtocolException e) {
     throw new RuntimeException("ERROR:" + e.getMessage(), e);
  } catch (IOException e) {
     throw new RuntimeException("ERROR:" + e.getMessage(), e);
  } finally {
     // shutdown connections
     client.getConnectionManager().shutdown();
  } 
```

一般来说，200 到 399 之间的 HTTP 响应代码是成功或重定向，而 4xx、5xx 是错误。以下是有关 HTTP 响应代码的更多信息：[http ://en.wikipedia.org/wiki/List_of_HTTP_status_codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:44:53.670

您可以通过以下代码保持请求超时和套接字异常。

```
 try{
    HttpParams httpParams = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(httpParams, 20000);
    HttpConnectionParams.setSoTimeout(httpParams, 20000);
    DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters);

         .................................
         ..................................
          ...................................

           httppost.setEntity(reqEntity);
           HttpResponse response = httpclient.execute(httppost);

            entity = response.getEntity();

        }catch(ConnectTimeoutException e){
                //Do whatever you want here when you get timeout in connection
        }catch(SocketTimeoutException scte){
                // Do whatever you want here when you get sockettimeout exception...

        }catch(Exception e){
         //Do whatever you want here when you get unexpected exception... It is root exception . So whatever exception you didn't catch in the above, the control obviously gets into this block.
} 
```

即使您可以在 catch 块中返回任何您想要的默认结果。*

# ruby-on-rails - 如何在 Windows 7 上使用 Diffmerge 配置 git（这样它就不会崩溃）？

> ID：14514876
> 
> 赞同：1
> 
> 时间：2013-01-25T03:28:57.550
> 
> 标签：ruby-on-rails, git, diff, git-config

我正在尝试让 Git 与 DiffMerge 一起使用，而在这周之前我从未使用过它们中的任何一个。对于它的价值，所有这一切都是为了 Ruby on Rails。

我几乎完全按照[http://jdonley83.com/blog/setting-up-git-in-windows-with-diffmerge/上的说明进行操作。](http://jdonley83.com/blog/setting-up-git-in-windows-with-diffmerge/)但是，当我输入“Git Diff”时，命令行没有加载 DiffMerge，而是崩溃了。

所以你不必去重新阅读网站上的说明，该网站基本上说要设置两个文件，调用`diffmerge-diff.sh`和`diffmerge-diff.sh`编写如下：

diffmerge-diff.sh

```
#!/bin/sh

path="$1"
old="$2"
new="$5"

"C:/Program Files (x86)/SourceGear/DiffMerge/DiffMerge.exe" "$old" "$new" --title1="Old" --title2="New $path" 
```

和 diffmerge-merge.sh：

```
#!/bin/sh

localPath="$2"
basePath="$1"
remotePath="$3"
resultPath="$4"

if [ ! -f $basePath ]
then
    basePath="c:/Users/Joseph/diffmerge-empty"
fi

"C:/Program Files (x86)/SourceGear/DiffMerge/DiffMerge.exe" --merge --result="$resultPath" "$localPath" "$basePath" "$remotePath" --title1="Mine" --title2="Merged: $4" --title3="Theirs" 
```

而且......同时......我的 .gitconfig 包括这些：

```
[merge]
    tool = diffmerge
[mergetool "diffmerge"]
    cmd = "c:/Users/Me/GitConfigFiles/diffmerge-merge.sh" "$BASE" "$LOCAL" "$REMOTE" "$MERGED"
    trustExitCode = false
    keepBackup = false
[diff]
    tool = diffmerge
    external = c:/Users/Me/GitConfigFiles/diffmerge-diff.sh 
```

该网站还表示：“您可能需要修改这两个文件中的路径，具体取决于您在系统上安装 DiffMerge 的位置。” 但我不知道他们的意思。

我知道这可能需要消化很多信息，但是有人知道问题可能是什么吗？如果它无法解决，是否有更简单的方法来做到这一点？对于入门级 Git，Diffmerge 是否过于复杂？

谢谢您的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:01:42.787

“命令行只是崩溃”是什么意思？我从未见过命令行崩溃。

你不需要任何 difftool 来使用 git。`git diff`很好。您需要一个用于 3 路合并的好工具，但这是一个不同的主题。

# android - Android 2D 游戏架构

> ID：14514877
> 
> 赞同：1
> 
> 时间：2013-01-25T03:29:00.450
> 
> 标签：android

我正在安卓上创建一个 2d 益智游戏，并希望获得社区对设计决策的意见。基本设计是这样的。有一个 SurfaceView ，其中 2d 图形在后台线程中绘制。然后我还有一个覆盖表面视图的RelativeLayout。布局 .xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/root"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center" >
<SurfaceView
    android:id="@+id/game_surface"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
<RelativeLayout
    android:id="@+id/game_overlay"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
</RelativeLayout> 
```

所有的触摸事件都将被 game_overlay 接收，并根据需要路由到游戏线程。我将使用 LayoutInflater 为布局充气并将它们放置在 game_overlay 中，然后在需要时清除 game_overlay。我做事的理由是两全其美。您无需在画布上绘制自己的自定义按钮（如重置级别按钮），而是利用所有强大的 android 布局功能。但是，您可以在后台执行游戏渲染，并使该线程始终保持活动状态。

所以现在回答我的问题。如果您之前尝试过这样的事情，我想听听您的经验。我可以期望为这样的分层视图支付性能损失吗？更重要的是，性能下降是否会损害应用程序的帧速率？您可以发现这种方法是否还有其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T13:21:31.207

为了获得更好的游戏性能，您应该将按钮保持在最低限度，因为它适用于智能设备，请尝试依靠触摸输入进行游戏。对于自定义按钮我不同意，而且拥有自己的按钮更适合视觉。它让你的游戏变得花哨。对于您的问题，是的，您应该避免不必要的封装。但我认为这不会导致巨大的性能问题。这可能是一个很好的表面教程[点击我](http://www.edu4java.com/en/androidgame/androidgame1.html)

# javascript - 如何在 Javascript 中“新建”返回的函数

> ID：14514878
> 
> 赞同：0
> 
> 时间：2013-01-25T03:29:08.097
> 
> 标签：javascript, function

我正在尝试在 Javascript 中模拟命名空间功能。

```
var com                   = {};
com.domain                = {};
com.domain.system         = {};
com.domain.net            = {};
com.domain.net.ip         = {};
com.domain.net.ip.tcp     = {};
com.domain.net.ip.udp     = {};
com.domain.net.ip.ssl     = {};
com.domain.util           = {};
com.domain.util.timer     = {};
com.domain.plugins        = {};
com.domain.session        = {};
com.domain.io             = {};
com.domain.algorithm      = {};
com.domain.debug          = {}; 
```

这是命名空间声明。稍后我将向这些命名空间添加函数。

这是我的选择器功能：

为了方便地使用命名空间，我添加了一个名为 $ 的函数。此函数将遍历 com.xml 中的所有命名空间。如果选择的名称存在，则返回对象。

```
function $ (selector) {
  function digger (namespace, selector) {
    for (var prop in namespace) {
      if (typeof namespace[prop] == "array" || typeof namespace[prop] == "object") {
        if (prop == selector) {
          return namespace[prop];
        }
        var dig = digger(namespace[prop], selector);
        if (dig != null) {
          return dig;
        }
      } else {
        if (prop == selector) {
          return namespace[prop];
        }
      }
    }
  }
  return digger (com, selector);
} 
```

之后，我在 namespace 中添加了一个计时器`com.doamin.util`。

```
com.domain.util.timer = function () {
    this._handle = new InnerObj.SystemTimer(io);
    return this;
};

com.domain.util.timer.prototype.expiresFromNow = function (seconds, cbHandler) { 
    this._handle.ExpiresFromNow (seconds, cbHandler);
};

com.domain.util.timer.prototype.wait = function (seconds, cbHandler) { 
    this._handle.Wait (seconds, cbHandler);
};

com.domain.util.timer.prototype.expiresAt = function (seconds, cbHandler) { 
    this._handle.Wait (seconds, cbHandler);
};

com.domain.util.timer.prototype.cancel = function () {
    this._handle.Cancel ();    
}; 
```

用法：

```
 1\. var timer = new com.domain.util.timer ();            OK
    timer.expiresAt (1, {});                             OK
 2\. var func = $("timer");                               OK 
    var timer =  new func ();                            OK 
    timer.expiresAt (1, {});                             OK 
```

但是 但是 但是 但是 但是 但是

```
var timer = new $("timer") ();                           NG 
```

谁能告诉我为什么最后一个`new`功能不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:53:42.037

试试`var timer = new ($("timer"))();`。

你的问题不清楚，但我想既然`$("timer")`返回一个函数，你想要一个结果的`$("timer")`新实例而不是 $() 的新实例。

# c - 使用并行编译器进行编译以与 Ruby 一起使用？

> ID：14514883
> 
> 赞同：0
> 
> 时间：2013-01-25T03:29:55.597
> 
> 标签：c, ruby, parallel-processing, openmp

我有一个（半）理论问题。

是否可以使用并行特定编译器（例如 OpenMP、CUDA 等）编译 C 代码，以编写对分布式机器（理论上）运行更好的 Ruby 语言的 C 扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:48:19.153

如果您的意思是，您可以将并行 C 代码编译为 Ruby 扩展，我认为您应该能够这样做。例如，对 Ruby 进行矩阵乘法的数字扩展可以调用英特尔 MKL 的`DGEMM`例程，并且 MKL 在内部与 OpenMP 并行化。

您只应注意不要混入使用不同 OpenMP 运行时的相同程序扩展。以 GCC、Intel C/C++ 编译器和 Oracle 的 Solaris Studio 为例。他们每个人都有自己的 OpenMP 运行时实现。这些实现在很大程度上彼此不兼容，并且将它们混合在同一个可执行文件中（通过静态链接或通过在运行时动态加载模块）是对灾难的调用。

另一个需要注意的是 Ruby 运行时是否是线程安全的，以及它是否可以从多线程代码中调用。如果不从 OpenMP`parallel`区域内部调用 Ruby 运行时，则此注释无关紧要。

由于只有一个 CUDA 供应商，因此当涉及到启用 CUDA 的扩展时，应该只关心版本不匹配。

# ruby-on-rails - 与 link_to 一起使用的点击事件的控制器逻辑

> ID：14514885
> 
> 赞同：1
> 
> 时间：2013-01-25T03:30:00.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有兴趣制作一个类似于 SO 的功能，其中提出问题的用户可以从响应列表中选择一个答案，但被困在如何从控制器的角度处理点击事件。

目前，我有模型`Question`，其中`has_many` `answers`. 另外，我做了一个`Selection`模型，用来象征答案的选择，每个`Question`人只能`has_one`选择答案。

我将每个问题的答案与问题`show`操作中的问题一起呈现。在我的`_answer`部分中，我想放置以下逻辑：“如果提出问题的用户已登录，*如果*相关`selection`人员`answer_id`已经存储了该答案，他可以看到“取消选择”答案的链接（换句话说，标记这个答案是以前选择的），否则他可以“选择”将答案存储在 中的答案`answer_id`。`selection`（我应该提到我从[Rails 教程](https://github.com/schneems/reddit_on_rails/blob/master/part_two_comments_and_votes.md)这里改编了下面的大部分代码，我（不幸的是）没有扎实的理解如何使用`POST`匹配或分配属性给实例变量）

```
 <% if current_user?(answer.question.user) %>
    <% if current_user.selections.where(:answer_id => answer.id) == answer.id %>
      <%= link_to "unselect", selections_path(:selection => {:answer_id => nil}), :method => :post %>
    <% else %>
      <%= link_to "select", selections_path(:selection => {:answer_id => answer.id}), :method => :post %>
    <% end %>
  <% end %> 
```

我的路障在控制器中，如果用户通过“选择”链接选择新答案，我会被困在如何使用`the create`方法将`@selection`变量分配给新的变量。`answer_id`任何帮助或任何关于如何编写点击事件的指南将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T18:19:06.463

有很多不同的方法可以做到这一点，但我倾向于认为**你在这里有一个设计问题**，所以我会这样做。

我从你所说的假设你的关联看起来像这样：

```
 __________                                  ________
| Question |1                              *| Answer |
|          |<-------------------------------|        |
|          |1     * ___________ *          1|        |
|          |<------| Selection |----------->|________|
|          |       |           |            
|          |       |           |*          1 ________
|          |       |___________|----------->| User   |
|          |*                              1|        |
|__________|------------------------------->|________| 
```

这种视觉表示清楚地表明了问题：您的`Selection`模型是多余的，因为它代表了一个问题`belongs_to`a `User`（我们已经知道）的事实；如果每对可以有多个选择，那将不会是多余的`Question / User`，但实际上我们**希望**该选择对于每对都是唯一的......

和之间的`belongs_to`关系将实现与您的模型相同的事情，实际上*它会做得更好，*因为您不需要所有逻辑来找到正确的选择，并确保它是唯一的/用户是正确的问题的所有者等`Question``Answer``Selection`

 *所以这就是我要做的：

*   在`Question`模型中

    ```
    has_many   :answers,         inverse_of: :question
    belongs_to :accepted_answer, class_name: :answer, foreign_key: :accepted_answer_id 
    ```

*   在`Answer`模型中

    ```
    belongs_to :question, inverse_of: :answers

    def accepted?
      return false if new_record? 
      question.try( :accepted_answer_id ) == id
      # an alternative is to use question.try( :accepted_answer ) == self
    end 
    ```

*   在您的路线中

    ```
    resources :questions do
      member do 
        # we use put because these are update actions
        put :accept_answer
        put :clear_accepted_answer
      end
    end 
    ```

*   在你的`QuestionsController`

    ```
    respond_to :js, only: [:accept_answer, :clear_accepted_answer]

    def accept_answer
      @question = Question.find( params[:id] )

      # ...cue some logic to ensure current_user 
      # has required rights to update the question

      if @question.update_attributes( accepted_answer_id: params[:answer_id] )
        # ...render the js that updates your view (for example, 
        # find and replace calling link with an "unselect" one )
      else
        # .. an error has occurred, render an "unprocessable entity" status
      end
    end

    def clear_accepted_answer
      @question = Question.find( params[:id] )

      # ...cue some logic to ensure current_user 
      # has required rights to update the question

      if @question.update_attributes( accepted_answer_id: nil )
        # ...render the js that updates your view (for example, 
        # find and replace calling link with a "select" one )
      else
        # .. an error has occurred, render an "unprocessable entity" status
      end
    end 
    ```

*   在你看来

    ```
     <% if current_user?(answer.question.user) %>
        <% if answer.accepted?  %>
          <%= link_to "unselect", 
                      clear_accepted_answer_question_path( answer.question ),
                      method: :put,
                      remote: true %>
        <% else %>
          <%= link_to "select", 
                      accept_answer_question_path( 
                        answer.question, 
                        answer_id: answer.id 
                      ), 
                      method: :put,
                      remote: true %>
        <% end %>
      <% end %> 
    ```*

# timezone - 获取不同时区的时间

> ID：14514891
> 
> 赞同：0
> 
> 时间：2013-01-25T03:30:38.710
> 
> 标签：timezone, timestamp

**我的任务：**我将在我的网站上举办一场全球性的比赛。问题设置者将设置来自世界特定区域的问题，设置比赛开始时间和日期。我必须在世界各地正确地显示那个时间，以便比赛在世界各地的时间开始。
**我的想法：**我计划使用像 php time() 这样的服务器站点语言从他的时区的问题设置者那里获取时间，并将存储到数据库转换为时区 = 零 (0)。谁将参加比赛，我只需将那个时区的小时数与我的数据库时间相加。

**需要帮助：**我不知道如何将时间戳转换为时区“零”，即使我怎样才能获得当前时区的±小时？
*谢谢...*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:44:09.757

第 1 步：让用户选择他的时区。您可以使用来自该站点的值填充下拉列表：http: [//php.net/manual/en/timezones.php](http://php.net/manual/en/timezones.php)

第 2 步：将时区转换为服务器时间

```
$timezone_client = new DateTimeZone('America/Denver');
$timezone_server = new DateTimeZone('Pacific/Nauru');
$datetime = new DateTime('2013-01-25 12:00:00', timezone_client);
$datetime->setTimezone($timezone_server);
echo $datetime->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:39:08.720

Timezone 0 = "UTC"（有时称为 GMT）
您的系统/语言将有一个 Timezone 类，它提供与 GMT/UTC 的差异

# c# - 链接两个或多个 Silverlight 项目

> ID：14514893
> 
> 赞同：0
> 
> 时间：2013-01-25T03:31:14.860
> 
> 标签：c#, .net, silverlight, xaml, dashboard

我已经编写了两个单独的 Silverlight 项目，我需要能够将它们链接在一起。第一个项目循环通过九个不同的条形图，第二个项目循环通过三个不同的折线图。

我的目标是让程序首先循环通过前九个条形图，在第九个条形图开始显示并循环通过三个不同的折线图，回到条形图，然后重复。

有没有办法可以以这种方式将这些项目链接在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:51:40.730

由于 silverlight 的性质，不建议这样做。你会想一起重写它们。由于 Silverlight 有一个 XAP 文件需要写入和编译，然后在 silverlight 插件内部运行，因此拥有一个项目最符合您的利益。如果您想练习学习“链接”单独的项目，请尝试使用 n 层架构方法并将您的服务层重构为单独的项目。毫无疑问，这绝对是可能的，但这并不意味着它是最好的选择，除非你有充分的理由。

如果您确实想进一步调查，请参阅以下链接。

[一个 Web 应用程序中的多个 Silverlight 项目](https://stackoverflow.com/questions/3083434/multiple-silverlight-projects-in-one-web-app)

[如何在 ASP.NET Web 应用程序中托管多个 Silverlight 用户控件？](https://stackoverflow.com/questions/8178775/how-to-host-more-than-one-silverlight-user-controls-in-asp-net-web-application)

[一个 APX 的多个 Silverlight 页面](https://stackoverflow.com/questions/5480343/multiple-silverlight-pages-with-one-apx)

# vb.net - ToolStripManager.Merge 损坏按钮？

> ID：14514895
> 
> 赞同：0
> 
> 时间：2013-01-25T03:31:36.070
> 
> 标签：vb.net

在 vb.net 中，我有 2 个上下文菜单条：cmsSource 和 cmsMain。

我正在将 cmsSource 合并到 cmsMain 中，这样我就可以有另一个 contextmenu 下拉菜单，如下所示：

```
ToolStripManager.Merge(cmsSource,cmsMain) 
```

我仍在使用 cmsSource 分配给拆分按钮：

```
splitbutton.ContextMenuStrip = cmsSource 
```

但是当我运行代码时，单击时拆分按钮不会显示上下文菜单。如果我注释掉 ToolStripManager.Merge 函数，它工作正常。另外，我尝试在合并之前分配拆分按钮，但这也不起作用。顺便说一句，cmsMain 有 2 个包含 ToolStripMenuItems 的子菜单，而 cmsSource 有 1 个包含 ToolStripMenuItems 的子菜单。

我还设置了 cmsmain.allowmerge = true，但没有帮助。如果我合并和恢复合并，它就像我从未合并（显然）一样工作。那么合并是否会以某种方式改变 cmsSource 或阻止它被使用？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:52:13.963

不是一个真正的答案，但我认为这就是它的方式，一旦它被合并，就不能使用 cmsSource。我只会复制cms。

# python - py2neo 在循环中添加关系

> ID：14514896
> 
> 赞同：0
> 
> 时间：2013-01-25T03:31:38.783
> 
> 标签：python, py2neo

我有以下代码，它从我的 Neo4j 数据库中获取域列表，对 IP 执行查找，然后在不存在的情况下创建关系。在创建关系的最后几行代码之前，它都可以正常工作。我收到以下错误。我已经确认这些列表有两个项目 - 域和 IP，所以我不确定它为什么会产生错误：

```
 File "C:\Python26\beta7_whois4j_monitor_debug.py", line 63, in createrels
  rels1 = graph_db.get_or_create_relationships((whoisnodes[0], "links", whoisnodes[1]))
  IndexError: list index out of range 
```

这是代码：

```
whoisindex = graph_db.get_or_create_index(neo4j.Node, "whoisID")
domains = whoisindex.query("whoisID:*com")

for i in domains:
    list1 = []
    value1 = "{0}".format(i['whoisID'])
    try:
        e = socket.gethostbyname(value1)
    except socket.gaierror:
        e = 'exclude from list'
    if e != 'exclude from list':
        list1.append(value1)
        list1.append(e)
        for word in list1:
            whoisnodes = []
            whoisnodes.append(whoisindex.get_or_create("whoisID", word, "whoisID":word}))
            rels1 = graph_db.get_or_create_relationships(
            (whoisnodes[0], "links", whoisnodes[1]))
            print "{0}".format(i['whoisID']) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:02:14.070

I'm a little confused as to what you are trying to do here. For each iteration of your loop `for word in list` you are resetting whoisnodes to a new list before adding a single item to it on the line below. This means that there can only ever be *one* item in the list by the time you call `get_or_create_relationships`, hence the `IndexError` when you try to access `whoisnodes[1]`.

Did you mean for `whoisnodes = []` to be outside the loop?

Incidentally, there is also a typo (missing curly bracket):

```
whoisindex.get_or_create("whoisID", word, "whoisID":word}) 
```

should read:

```
whoisindex.get_or_create("whoisID", word, {"whoisID":word}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:42:42.630

我的第二次尝试虽然现在它返回一个 JSON 错误：

```
whoisindex = graph_db.get_or_create_index(neo4j.Node, "whoisID")
domains = whoisindex.query("whoisID:*com")

for i in domains:
list1 = []
value1 = "{0}".format(i['whoisID'])    
try:
    e = socket.gethostbyname(value1)
except socket.gaierror:
    e = 'exclude from list'
if e != 'exclude from list':
    list1.append(value1)
    list1.append(e)        
    list1.append(whoisindex.get_or_create("whoisID", i, {"whoisID":i}))
    rels1 = graph_db.get_or_create_relationships(
        (list1[0], "links", list1[1]))
    print "{0}".format(i['whoisID']) 
```

# ruby-on-rails - 如何在 Rails 中创建我的 REST 服务器？

> ID：14514897
> 
> 赞同：1
> 
> 时间：2013-01-25T03:31:58.800
> 
> 标签：ruby-on-rails, ruby, rest

我正在尝试使用 Rails 服务器创建 RESTful 服务。我看过网上的教程，显然我做错了什么。我的错误是 CORS 问题。我有一个用户模型和控制器。在我的用户控制器中，我试图更改标题以允许任何站点能够从服务器中提取信息。

```
class UsersController < ApplicationController
  def options
    if access_allowed?
      set_access_control_headers
      head :ok
    else
      head :forbidden
    end
  end

  private
    def set_access_control_headers
      # headers['Access-Control-Allow-Origin'] = request.env['HTTP_ORIGIN']
      headers['Access-Control-Allow-Origin'] = '*'
      headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS'
      headers['Access-Control-Max-Age'] = '1000'
      headers['Access-Control-Allow-Headers'] = '*,x-requested-with'
    end

    def access_allowed?
      allowed_sites = '*' #you might query the DB or something, this is just an example
      return allowed_sites.include?(request.env['HTTP_ORIGIN'])
      return true
    end
end 
```

我还设置了路由，因此当服务器被击中时，它会转到“选项”操作。

```
 resources :users, :only => [:create]
  match '/users', :controller => 'users', :action => 'options', :via => :get 
```

我在我的开发机器上创建了一个 html 页面，我只是从 Chrome 打开它（我不知道这是否是一个问题。）当我试图抓住用户时，我得到

```
OPTIONS http://www.*****.com:3000/users 404 (Not Found) jquery.js:3
XMLHttpRequest cannot load http://www.****.com:3000/users. Origin file:// is not allowed by Access-Control-Allow-Origin. 
```

有人请让我知道我做错了什么，或者指出一个可以帮助我的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:50:30.127

您的路线指定接受一个`GET`请求 ( `:via => :get`)，但看起来您的实际请求是一个`OPTIONS`请求。

尝试将您的更改`match`为：

```
match '/users', :controller => 'users', :action => 'options', :via => :options 
```

另请注意，您的操作名称不必是`options`，它可以是您想要的任何名称。

作为参考，以下是`OPTIONS`请求[应返回](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)的内容：

> 返回服务器对指定 URL 支持的 HTTP 方法。这可用于通过请求“*”而不是特定资源来检查 Web 服务器的功能。

这[是一篇](http://www.codeodor.com/index.cfm/2011/7/26/Responding-to-the-OPTIONS-HTTP-method-request-in-Rails-Getting-around-the-Same-Origin-Policy/3387)关于在 Rails 中响应选项请求的文章。

# c# - 将“文件”拖出datagridview

> ID：14514904
> 
> 赞同：1
> 
> 时间：2013-01-25T03:32:29.500
> 
> 标签：c#, datagridview, drag

我需要将一个单元格从datagridview拖到桌面，一旦发生这种情况，我需要找出它被拖入的目录以及单元格所在的行。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:16:34.140

有一个为不同目的而设计的代码项目文章，但它在数据网格视图中实现了拖动功能。所以，我建议你检查一下。这是[链接](http://www.codeproject.com/Articles/12539/How-to-drag-information-from-a-DataGridView-contro)。

# android - 在页面呈现之前忽略 Android WebView 点击

> ID：14514905
> 
> 赞同：1
> 
> 时间：2013-01-25T03:32:40.720
> 
> 标签：android

1.  我有一个显示 1.html 的 WebView。
2.  1.html 有一个到 2.html 的链接（锚标记）。
3.  2.html 有一个到 3.html 的链接。
4.  这些链接位于视图中的相同位置（左/上）。
5.  您点击 1.html 中的链接，然后在 2.html 呈现之前再次点击同一位置。

你看到的是3.html。我想看看 2.html，因为后一个点击是在你看到 2.html 之前完成的。

我确信在呈现 1.html 时两次点击都完成了，但日志总是说后一次点击发生在 2.html 的 onPageFinished 和 onNewPicture 之后。

如何忽略后一个点击事件？

# iphone - 问题合并新数据库上多个 MOC 之间的更改

> ID：14514910
> 
> 赞同：0
> 
> 时间：2013-01-25T03:33:23.177
> 
> 标签：iphone, ios, core-data

我有一个 IOS 应用程序，它使用核心数据库来存储缩略图照片图像及其用户选择的评级。我为此使用了多个托管对象上下文。

问题是，当第一次安装和启动应用程序（并因此创建一个新数据库）时，主 MOC 看不到来自正在更改照片评级的临时 MOC 的更新。然而，在应用程序的后续启动（即数据库已经存在）中，每次都运行良好。

此外，在新应用启动时，即使评分未显示在主视图控制器中，我也知道它们已保存到磁盘，因为在应用重新启动时，我会看到用户输入的评分。

主 MOC 是一个显示照片的列表视图控制器。当用户从列表中选择一张照片时，它会启动另一个视图控制器（将临时 MOC 绑定到同一个持久性存储），用户在其中选择照片评级。但是在应用程序的新启动时，照片评级设置永远不会传播回列表视图控制器。

我已经包含了一些代码。将不胜感激任何见解。

## 在主列表视图控制器中创建数据库

```
if ([fileManager fileExistsAtPath:[urlForPhotosDb path]]) {

if (photosDB.documentState == UIDocumentStateClosed) {
   [photosDB openWithCompletionHandler:^(BOOL success) {

        ......(additional code here).........

}];     
}
} else {
[photosDB saveToURL:urlForPhotosDb forSaveOperation:UIDocumentSaveForCreating
completionHandler:^(BOOL success) {
[PhotosDatabase populatePhotosDb];

......(additional code here).........
];
}

return photosDB;
} 
```

## 在主 listView 控制器中查看加载

```
(void)viewDidLoad
{
[super viewDidLoad];

[PhotosDatabase getPhotosDbForOpenBlock:^(UIManagedDocument  *doc) {
self.psc = [doc.managedObjectContext persistentStoreCoordinator];
[self setupFetchedResultsController:doc];
[[NSNotificationCenter defaultCenter] addObserver:self
                                      selector:@selector(contextSaved:)
                                      name:NSManagedObjectContextDidSaveNotification
                                      object:nil];
}];
} 
```

## 在 main 的委托方法中设置临时 MOC

## 从辅助视图控制器调用的列表视图控制器

```
-(void)didSelectPhotoRating:(NSDictionary *)photoInfo Rating:(NSNumber *)rating
{
NSManagedObjectContext *newContext = [[NSManagedObjectContext alloc] init];
[newContext setPersistentStoreCoordinator:self.psc];
Photos *photo = [Photos findPhoto:photoInfo
           inManagedObjectContext:newContext];
if (photo) {
photo.rating = rating;
NSError *error;
[newContext save:&error];
}

} 
```

## 主列表视图控制器中用于合并更改的方法

```
-(void)contextSaved:(NSNotification *)notification
{
if ([notification object] != self.document.managedObjectContext) {
    [self.document.managedObjectContext

mergeChangesFromContextDidSaveNotification:notification];
[self performFetch];
[self.tableView reloadData];
}
} 
```

在上面的 contextSaved 方法中，通知确实包含用户为照片选择的评分。但它并没有反映在主列表视图控制器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:42:32.280

开始使用嵌套上下文。它在每个可能的级别上都容易得多并且同步。目前尚未更新核心数据编程指南以很好地涵盖它。

[http://www.cocoanetics.com/2012/07/multi-context-coredata/](http://www.cocoanetics.com/2012/07/multi-context-coredata/)

# java - 如何在 Java CardLayout 中的卡之间传递数据

> ID：14514912
> 
> 赞同：0
> 
> 时间：2013-01-25T03:34:16.353
> 
> 标签：java, swing, cardlayout

我是使用 Java GUI 的新手，我知道这听起来可能很荒谬，但我已经尝试了几天在 CardLayout 布局上的卡片之间传递数据。我正在使用netbeans，第一张卡显示一个列表客户端。当一个客户被选中时，选择的选项被传递给该卡上的一个变量。下一张卡片查询数据库以显示有关所选客户的更多详细信息。我可以处理卡之间的切换，但我的问题是我无法将存储在卡 1 上的变量中的数据传递给卡 2。

我访问了几个论坛并阅读了类似的问题，但我无法让任何建议的解决方案发挥作用。请帮忙，我是新手，所以请放轻松，谢谢。

这是保存面板的类

```
public class mainframe extends javax.swing.JFrame {

public mainframe() {
    initComponents();
}

@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    displayScrollPane = new javax.swing.JScrollPane();
    displaypanel = new javax.swing.JPanel();
    viewclientspanel1 = new viewclientspanel();
    addclientpanel1 = new addclientpanel();
    clientdetails1 = new clientdetails();
    mainmenu = new javax.swing.JMenuBar();
    clients = new javax.swing.JMenu();
    viewclients = new javax.swing.JMenuItem();
    addclient = new javax.swing.JMenuItem();
    transactions = new javax.swing.JMenu();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    displaypanel.setBorder(javax.swing.BorderFactory.createEtchedBorder());
    displaypanel.setLayout(new java.awt.CardLayout());

    viewclientspanel1.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            viewclientspanel1MouseClicked(evt);
        }
    });
    displaypanel.add(viewclientspanel1, "viewclientscard");
    displaypanel.add(addclientpanel1, "addclientcard");
    displaypanel.add(clientdetails1, "clientdetailscard");

    displayScrollPane.setViewportView(displaypanel);

    clients.setText("Clients");

    viewclients.setText("View Clients");
    viewclients.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            viewclientsActionPerformed(evt);
        }
    });
    clients.add(viewclients);
    viewclients.getAccessibleContext().setAccessibleParent(mainmenu);

    addclient.setText("Add Client");
    addclient.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            addclientActionPerformed(evt);
        }
    });
    clients.add(addclient);

    mainmenu.add(clients);

    transactions.setText("Transactions");
    mainmenu.add(transactions);

    setJMenuBar(mainmenu);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(displayScrollPane, javax.swing.GroupLayout.PREFERRED_SIZE, 1059, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(99, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
            .addContainerGap(66, Short.MAX_VALUE)
            .addComponent(displayScrollPane, javax.swing.GroupLayout.PREFERRED_SIZE, 570, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(33, 33, 33))
    );

    pack();
}// </editor-fold>

private void addclientActionPerformed(java.awt.event.ActionEvent evt) {                                          
    CardLayout card = (CardLayout) displaypanel.getLayout();
    card.show(displaypanel, "addclientcard");
}                                         

private void viewclientsActionPerformed(java.awt.event.ActionEvent evt) {                                            
    CardLayout card = (CardLayout) displaypanel.getLayout();
    card.show(displaypanel, "viewclientscard");
}                                           

private void viewclientspanel1MouseClicked(java.awt.event.MouseEvent evt) {
    //viewclientspanel1.getComponentListeners();
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(mainframe.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(mainframe.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(mainframe.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(mainframe.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new mainframe().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JMenuItem addclient;
private addclientpanel addclientpanel1;
private clientdetails clientdetails1;
private javax.swing.JMenu clients;
private javax.swing.JScrollPane displayScrollPane;
private javax.swing.JPanel displaypanel;
private javax.swing.JMenuBar mainmenu;
private javax.swing.JMenu transactions;
private javax.swing.JMenuItem viewclients;
private viewclientspanel viewclientspanel1;
// End of variables declaration
} 
```

显示可供选择的客户端列表的卡片类有一个鼠标事件监听器，它获取所选客户端的值并切换下一张卡片

```
private void jPanel1MouseClicked(java.awt.event.MouseEvent evt) {
   CardLayout card = (CardLayout) jPanel1.getParent().getParent().getParent().getParent().getLayout();
   card.show(jPanel1.getParent().getParent().getParent().getParent(), "clientdetailscard");

} 
```

最后，我需要将客户端选择的信息传输到其中显示更多详细信息的类。

```
 public class clientdetails extends javax.swing.JPanel {

public clientdetails() {

    initComponents();
}

public static void main(String [] args) { 
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(addclient.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(addclient.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(addclient.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(addclient.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    JFrame f = new JFrame("Window"); 
    f.add(new clientdetails()); 
    f.setSize(500, 700); 
    f.setVisible(true); 
} 

private javax.swing.JPanel jPanel1;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:43:54.157

您可以使用 setter/getter 将客户端信息从一个窗格传递到另一个窗格...

```
clientDetailsPane.setClient(clientListPanel.getClient());
// Switch panels... 
```

我还认为您可以使用某种模型 or `Map`，但这对于您想要实现的目标来说可能是矫枉过正...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T12:25:16.203

非常感谢大家，我最终使用了一个类容器来保存我需要传输的变量。

```
public class varcontainer {

    public String variablename;

    private static varcontainer instance = null;

    public static varcontainer getInstance(){
    if(instance == null){
        instance = new varcontainer();
    }
        return instance;
    }

} 
```

然后我从另一个类调用 getInstance 以获取容器的当前实例并访问变量

```
varcontainer.getInstance().variablename 
```

再次感谢您的反馈，我很感激。

# php - 删除文件名中的空格和多余的小数

> ID：14514914
> 
> 赞同：1
> 
> 时间：2013-01-25T03:34:32.153
> 
> 标签：php, preg-replace, decimal, filenames, space

我已经尝试了这两种方法，但它们都不太奏效。我需要删除文件名中的任何空格和/或额外的小数（显然最后一个除外）。

这可以很好地删除多余的小数，但仍然会留下空格：

```
$filename = preg_replace('/\.(?=.*\.)/', '', $filename); 
```

有没有兼顾两者的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:38:59.253

这应该做你想要的：

```
$filename = preg_replace('/[\. ](?=.*\.)/', '', $filename); 
```

关键是您要在字符集中的开头同时包含小数和空格。

顺便说一句，这是一个快速测试正则表达式尝试的好工具：http: [//www.solmetra.com/scripts/regex/index.php](http://www.solmetra.com/scripts/regex/index.php)

# php - 如果发生错误，需要 type="text" 输入字段来显示以前发布的条目

> ID：14514918
> 
> 赞同：0
> 
> 时间：2013-01-25T03:35:07.083
> 
> 标签：php

我可能没有很好地解释我在标题中要做什么，所以这里是：

我有一个 HTML 输入表单，在一个`.php`文件中。提交时的那个输入表单提交一个`POST`操作。该 POST 操作具有检查字段输入的代码，类似于：

```
    <?php

    ...

    if ($_POST["提交"] == 1) {  
        //“提交”是表单中值为'1'的隐藏字段

        $isvalid = 1; // 初始化为 1，如果检查失败则变为 0。

        $field1 = $_POST["field1"];
        $field2 = $_POST["field2"];

    ...

    /*
      检查每个字段的验证到这里，
      但与这里的这个问题无关。
    */

    }

    if ($isvalid == 1) {
        // 发送电子邮件
    } 其他 { ?>
        <!-- 打印表单和错误信息。-->

    ...

    <input name="field1" type="text" id="field1" size="32" class="stylingclass">

    ...

```

所以上面是示例代码，但真正的问题是：如何在提交并发生错误时获取表单中的任何文本输入字段，以自动包含以前输入的值，以便用户更正相应的条目，基于我设置的任何约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:37:59.417

您可以使用基本的三元运算符设置 value 参数：

```
<input name="field1" type="text" id="field1" value="<?php echo isset($_POST["field1"]) ? $_POST["field1"] : ''; ?>" size="32" class="stylingclass"> 
```

注意这里使用三元运算符，防止$_POST数组中没有指定字段的索引时出错

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:37:09.043

只需添加`value="<?=$_POST['field1']?>"`（假设 PHP 5.4，`<?php echo $_POST['field1'] ?>`否则使用）

# python - 对列表理解中的词法闭包感到困惑

> ID：14514922
> 
> 赞同：5
> 
> 时间：2013-01-25T03:35:32.870
> 
> 标签：python

```
l = [1, 2, 3]
a,b,c = [lambda: n*n for n in l]
a()  #=> 9
b()  #=> 9
c()  #=> 9 
```

为什么是这样？我预计 a()、b()、c() 为 1、4 和 9。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T03:38:13.383

`n`不在函数的本地闭包中。

尝试

```
a, b, c = [lambda n=n: n*n for n in l] 
```

默认参数的这种“滥用”导致`n`为每个函数创建一个调用的局部变量

这是在 Python2 中创建闭包的另一种方法

```
>>> L=[1, 2, 3]
>>> def fgen():
...     local_n = global_n
...     def f():
...         return local_n * local_n
...     return f
>>> a, b, c = [fgen() for global_n in L]
>>> a()
1
>>> b()
4
>>> c()
9 
```

但它在 Python3 中不起作用，因为列表推导中的循环 var 没有泄漏到全局范围内

Python3 在防止我们在函数中使用全局变量方面做得更好，所以如果你想使用列表推导，你需要传递一个参数

```
>>> L=[1, 2, 3]
>>> def fgen(param_n):
...     local_n = param_n
...     def f():
...         return local_n * local_n
...     return f
... 
>>> a, b, c = [fgen(n) for n in L]
>>> a()
1
>>> b()
4
>>> c()
9
>>> 
```

# algorithm - 在Matlab中有条件地查找八个邻居的行数和列数

> ID：14514927
> 
> 赞同：4
> 
> 时间：2013-01-25T03:36:13.620
> 
> 标签：algorithm, matlab, graph, matrix

我有一个 6 * 6 矩阵

```
A=
  3     8     8     8     8     8
  4     6     1     0     7    -1
  9     7     0     2     6    -1
  7     0     0     5     4     4
  4    -1     0     2     8     1
  1    -1     0     8     3     9 
```

我有兴趣从 A(4,4)=5 开始查找邻居的行数和列数。但仅当 A(4,4) 右侧有元素 4，左侧有 6 个，顶部有 2，底部有 8 时，它们才会作为邻居链接到 A(4,4) 对角线左上角 1，对角线右上角有 3 , 7 在左下角对角线和 9 在右下角对角线。更清楚地说，如果邻居围绕 A(4,4)，则 A(4,4) 将有邻居，如下所示：

```
 1     2     3;
 6     5     4;
 7     8     9; 
```

随着每个邻居的找到，这将继续下去。0 和 -1 也将被忽略。最后我想要这些单元格的行号和列号，如下图所示。有没有办法可视化这个网络。这只是样本。我真的有一个巨大的矩阵。

![在此处输入图像描述](../Images/e09d004eef133ee5f3e685a1b964c884.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:33:05.563

```
A = [3     8     8     8     8     8;
     4     6     1     0     7    -1;
     9     7     0     2     6    -1;
     7     0     0     5     4     4;
     4    -1     0     2     8     1;
     1    -1     0     8     3     9];

test = [1 2 3; 
        6 5 4; 
        7 8 9];

%//Pad A with zeros on each side so that comparing with test never overruns the boundries    
%//BTW if you have the image processing toolbox you can use the padarray() function to handle this
P = zeros(size(A) + 2);        
P(2:end-1, 2:end-1) = A;

current = zeros(size(A) + 2);
past = zeros(size(A) + 2);

%//Initial state (starting point)
current(5,5) = 1; %//This is A(4,4) but shifted up 1 because of the padding

condition = 1;

while sum(condition(:)) > 0;
      %//get the coordinates of any new values added to current
     [x, y] = find(current - past); 
     %//update past to last iterations current
     past = current; 

     %//loop through all the coordinates returned by find above
     for ii=1:size(x); 

         %//Make coord vectors that represent the current coordinate plus it 8 immediate neighbours.
         %//Note that this is why we padded the side in the beginning, so if we hit a coordinate on an edge, we can still get 8 neighbours for it!
         xcoords = x(ii)-1:x(ii)+1; 
         ycoords = y(ii)-1:y(ii)+1; 

         %//Update current based on comparing the coord and its neighbours against the test matrix, be sure to keep the past found points hence the OR
         current(xcoords, ycoords) = (P(xcoords, ycoords) == test) | current(xcoords, ycoords); 

     end 

     %//The stopping condition is when current == past
     condition = current - past;

 end 

%//Strip off the padded sides
FinalAnswer = current(2:end-1, 2:end-1)
[R, C] = find(FinalAnswer);
coords = [R C] %//This line is unnecessary, it just prints out the results at the end for you. 
```

好的很酷，你已经非常接近了，所以这是循环的最终解决方案。它在大约 0.002 秒内运行，所以我认为它非常快。输出是

```
FinalAnswer =

     0     0     0     0     0     0
     0     1     1     0     0     0
     0     1     0     1     0     0
     1     0     0     1     1     1
     0     0     0     0     1     0
     0     0     0     0     0     1

coords =

     4     1
     2     2
     3     2
     2     3
     3     4
     4     4
     4     5
     5     5
     4     6
     6     6 
```

# php - 无法让 mod_rewrite IfModule 在 .htaccess 中工作

> ID：14514928
> 
> 赞同：3
> 
> 时间：2013-01-25T03:36:49.790
> 
> 标签：php, c, .htaccess, mod-rewrite

我试图让我的`.htaccess`文件将所有 URL 转发到带有 url 参数的单个页面，以便我可以以这种方式处理页面检索。我想要发生的是：说用户输入`http://mysite.com/users/dan`它应该转发到页面`http://mysite.com/index.php?url=/users/dan`。

`http://mysite.com/random-link`同样，如果用户访问了它应该转发到的 URL`http://mysite.com/index.php?url=random-link`

这是我在`.htaccess`文件中尝试的代码，但它只是不断向我抛出 500 错误：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond % (REQUEST_FILENAME) !-f
RewriteRule (.*)$ index.php?url=$1 <QSA,L>
</IfModule> 
```

**我更新了我的代码，它仍然抛出一个 500 错误** 我将 < 和 > 更改为 [ 和 ] 并删除了 RewriteCond 中 % 之后的空格，但它仍然抛出一个错误。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule (.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

我是新手`.htaccess`，所以任何帮助将不胜感激，因为我不知道是什么导致服务器超时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T03:39:57.920

几个问题

1.  重写标志放在方括号中，例如

    ```
    [QSA,L] 
    ```

2.  您的`RewriteCondition`语法看起来不正确。尝试

    ```
    RewriteCond %{REQUEST_FILENAME} !-f 
    ```

3.  为了安全起见，将您的表达式锚定到字符串的开头

    ```
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
    ```

最后，`RewriteEngine`后续修饰符需要`FileInfo` [override](http://httpd.apache.org/docs/current/mod/directive-dict.html#Override)。[`<Directory>`](http://httpd.apache.org/docs/current/mod/core.html#directory)确保文档根目录的服务器配置或虚拟主机部分具有

```
AllowOverride FileInfo 
```

## 更新

这是来自 MVC 项目的典型重写方案。这将忽略真实的文件、目录和符号链接

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

# html - 将内联 li 包装成相等的行

> ID：14514931
> 
> 赞同：1
> 
> 时间：2013-01-25T03:37:41.933
> 
> 标签：html, css

我有可变数量的 LI，它们在整个页面（在导航菜单中）内联显示，CSS 如下所示：

```
 ul.nav{
    margin: 0;
    padding: 0;
    text-align: center;
 }

 ul.nav li{
    margin: 0;
    padding: 5px 10px;
    list-style: none;
    display: inline-block;
 } 
```

当页面变窄时，导航菜单会按原样换行，但是，我想尝试使每行上的项目数相等。

例如，当出现 9 个项目时，页面只适合 8 个，我希望在顶行有 5 个，在下面换行 4 个，而不是在顶行有 8 个，并且在孤独的 li 上移动到下一行。问题是它们必须在这个模板中居中对齐，所以如果一行满了，第二行只有一个项目，它看起来很糟糕。

它不必是精确的，所以某种可能会迫使一些保证金解决方案（6 和 3 会比 8 和 1 更好）会起作用。有谁知道我该怎么做？

干杯!

**更新：**所以显然我没有很好地解释自己。我正在尝试平衡行，而不是确保给定宽度的某个数字。

举个例子...假设我有 4 次空间（我们会说 lis 在 400px 空间中固定为 100px）

```
| -----  -----  -----  ----- |
||     ||     ||     ||     ||
| -----  -----  -----  ----- | 
```

现在当我有 5 件物品，而不是 4 件和 1 件时，我想要这个

```
|    -----  -----  -----     |
|   |     ||     ||     |    |
|    -----  -----  -----     |
|        -----  -----        |
|       |     ||     |       |
|        -----  -----        | 
```

6 项 3 和 3 7 项 4 和 3 8 项 4 和 4 9 项 3 3 和 3

现在我开始做我需要在 PHP 中以编程方式执行此操作的事情，但这并不能解决人们调整窗口大小的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:02:27.977

帕万走在正确的轨道上。如果您想在顶行保持一定数量的 LI 作为最小值，在 UL 上设置最小宽度也会很有帮助。如果您在默认情况下保留溢出，这可以覆盖 div 宽度。

```
ul li { 
list-style-type: none;
display: inline;
float: left;
width: 100px; 
```

}

ul { 最小宽度：300px; }

身体{宽度：200px；}

[见小提琴](http://jsfiddle.net/netsentry/VJA4E/23/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T04:20:01.130

如果你的 div 大小是固定的，那么请给一个固定宽度一个特定的 li。例如，假设您有一个像 500px 这样的 div，现在我们希望顶部有 4 个项目，下面有 1 个。所以 li 宽度约为 110px。

所以请尝试修复你的 li 宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T04:23:38.943

您应该将前 5 个包裹在另一个里面，`div`其余`display:inline-block`的包裹在另一个里面，当宽度更小时，它们应该分成两个。`div``display:inline-block`

或者您可以编写媒体查询以使其在不同的屏幕尺寸上表现不同

[http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

[http://mediaqueri.es/](http://mediaqueri.es/)

# asp.net-mvc - 在 ASP.NET 和 Unity Ioc 中使用实体框架代码优先

> ID：14514936
> 
> 赞同：1
> 
> 时间：2013-01-25T03:38:00.160
> 
> 标签：asp.net-mvc, entity-framework, dependency-injection, unity-container

我有 ASP.NET MVC 应用程序，我首先使用 EF 代码和 Unity 依赖注入器。我已经实现了 DDD 设计并拥有与我的 POCO 对象交互的存储库和服务。

我的问题是我遇到了与 EF 相关的问题 - 例如连接已关闭、实体已更改或未跟踪等等。正如我从谷歌的研究中了解到的那样，它与我应该配置 Unity 的方式有关。

我知道我需要根据请求实例放置它，但正如我所见，Unity 和 Unity.Mvc3 包中都没有内置策略。我尝试编写自己的策略，它解决了许多问题，但我确实遇到了有时我会“连接关闭”的问题。

我的 HttpContextLifetimeManager.cs

```
public class HttpContextLifetimeManager<T> : LifetimeManager, IDisposable
{
    public override object GetValue()
    {
        return HttpContext.Current.Items[typeof(T).AssemblyQualifiedName];
    }

    public override void RemoveValue()
    {
        HttpContext.Current.Items.Remove(typeof(T).AssemblyQualifiedName);
    }

    public override void SetValue(object newValue)
    {
        HttpContext.Current.Items[typeof(T).AssemblyQualifiedName] = newValue;
    }

    public void Dispose()
    {
        RemoveValue();
    }
} 
```

在 DependencyConfig.cs (MVC 4 App_Start) 中，我使用以下方法注册它：

`container.RegisterInstance<MyDbContext>(new MyDbContext(), new HttpContextLifetimeManager<DependencyConfig>());`

你能推荐我一个有效的实现/帮助我修复我的/将我转发到可以帮助我解决这个问题的文章或教程吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:49:53.840

`App_Start`方法仅在应用程序的第一个请求到来时调用一次。

```
 Called when the first resource (such as a page) in an ASP.NET application is requested.  
 The Application_Start method is called only one time during the life cycle of an application. 
```

见[MSDN](http://msdn.microsoft.com/en-us/library/ms178473%28v=vs.100%29.aspx)

因此，您正在为所有请求创建一个上下文。然后有时它可能会被丢弃。为所有请求（内存问题等）保留一个 DbContext 并不是一个好习惯。
因此，您可以尝试将该代码放入`Application_BeginRequest`.

# ios - 我想用 GPUImage 制作两个以上的输入纹理过滤器。但我得到了黑色输出

> ID：14514949
> 
> 赞同：4
> 
> 时间：2013-01-25T03:39:44.847
> 
> 标签：ios, gpuimage

我想制作一个像 GPUImage 的 GPUImageTwoInputFilter 这样的新过滤器。

这是我的代码。一个名为IFFourInputFilter的基类，很可能是GPUImageTwoInputFilter。

```
#import "IFFourInputFilter.h"

NSString *const kIFFourInputTextureVertexShaderString = SHADER_STRING
(
 attribute vec4 position;
 attribute vec4 inputTextureCoordinate;
 attribute vec4 inputTextureCoordinate2;
 attribute vec4 inputTextureCoordinate3;
 attribute vec4 inputTextureCoordinate4;

 varying vec2 textureCoordinate;
 varying vec2 textureCoordinate2;
 varying vec2 textureCoordinate3;
 varying vec2 textureCoordinate4;

 void main()
 {
     gl_Position = position;
     textureCoordinate = inputTextureCoordinate.xy;
     textureCoordinate2 = inputTextureCoordinate2.xy;
     textureCoordinate3 = inputTextureCoordinate3.xy;
     textureCoordinate4 = inputTextureCoordinate4.xy;
 }
);

@implementation IFFourInputFilter

#pragma mark -
#pragma mark Initialization and teardown

- (id)initWithFragmentShaderFromString:(NSString *)fragmentShaderString;
{
    if (!(self = [self initWithVertexShaderFromString:kIFFourInputTextureVertexShaderString fragmentShaderFromString:fragmentShaderString]))
    {
        return nil;
    }

    return self;
}

- (id)initWithVertexShaderFromString:(NSString *)vertexShaderString fragmentShaderFromString:(NSString *)fragmentShaderString;
{
    if (!(self = [super initWithVertexShaderFromString:vertexShaderString fragmentShaderFromString:fragmentShaderString]))
    {
        return nil;
    }

    inputRotation2 = kGPUImageNoRotation;
    inputRotation3 = kGPUImageNoRotation;
    inputRotation4 = kGPUImageNoRotation;

    hasSetTexture1 = NO;
    hasSetTexture2 = NO;
    hasSetTexture3 = NO;

    hasReceivedFrame1 = NO;
    hasReceivedFrame2 = NO;
    hasReceivedFrame3 = NO;
    hasReceivedFrame4 = NO;
    frameWasVideo1 = NO;
    frameWasVideo2 = NO;
    frameWasVideo3 = NO;
    frameWasVideo4 = NO;
    frameCheckDisabled1 = NO;
    frameCheckDisabled2 = NO;
    frameCheckDisabled3 = NO;
    frameCheckDisabled4 = NO;

    frameTime1 = kCMTimeInvalid;
    frameTime2 = kCMTimeInvalid;
    frameTime3 = kCMTimeInvalid;
    frameTime4 = kCMTimeInvalid;

    runSynchronouslyOnVideoProcessingQueue(^{
        [GPUImageOpenGLESContext useImageProcessingContext];
        filterTextureCoordinateAttribute2 = [filterProgram attributeIndex:@"inputTextureCoordinate2"];

        filterInputTextureUniform2 = [filterProgram uniformIndex:@"inputImageTexture2"]; // This does assume a name of "inputImageTexture2" for second input texture in the fragment shader
        glEnableVertexAttribArray(filterTextureCoordinateAttribute2);

        filterTextureCoordinateAttribute3 = [filterProgram attributeIndex:@"inputTextureCoordinate3"];

        filterInputTextureUniform3 = [filterProgram uniformIndex:@"inputImageTexture3"]; // This does assume a name of "inputImageTexture2" for second input texture in the fragment shader
        glEnableVertexAttribArray(filterTextureCoordinateAttribute3);

        filterTextureCoordinateAttribute4 = [filterProgram attributeIndex:@"inputTextureCoordinate4"];

        filterInputTextureUniform4 = [filterProgram uniformIndex:@"inputImageTexture4"]; // This does assume a name of "inputImageTexture2" for second input texture in the fragment shader
        glEnableVertexAttribArray(filterTextureCoordinateAttribute4);
    });

    return self;
}

- (void)initializeAttributes;
{
    [super initializeAttributes];
    [filterProgram addAttribute:@"inputTextureCoordinate2"];
    [filterProgram addAttribute:@"inputTextureCoordinate3"];
    [filterProgram addAttribute:@"inputTextureCoordinate4"];
}

- (void)disableFrameCheck1;
{
    frameCheckDisabled1 = YES;
}

- (void)disableFrameCheck2;
{
    frameCheckDisabled2 = YES;
}

- (void)disableFrameCheck3;
{
    frameCheckDisabled3 = YES;
}

- (void)disableFrameCheck4;
{
    frameCheckDisabled4 = YES;
}

#pragma mark -
#pragma mark Rendering

- (void)renderToTextureWithVertices:(const GLfloat *)vertices textureCoordinates:(const GLfloat *)textureCoordinates sourceTexture:(GLuint)sourceTexture;
{
    if (self.preventRendering)
    {
        return;
    }

    [GPUImageOpenGLESContext setActiveShaderProgram:filterProgram];
    [self setUniformsForProgramAtIndex:0];

    [self setFilterFBO];

    glClearColor(backgroundColorRed, backgroundColorGreen, backgroundColorBlue, backgroundColorAlpha);
    glClear(GL_COLOR_BUFFER_BIT);

    glActiveTexture(GL_TEXTURE2);
    glBindTexture(GL_TEXTURE_2D, sourceTexture);
    glUniform1i(filterInputTextureUniform, 2);

    glActiveTexture(GL_TEXTURE3);
    glBindTexture(GL_TEXTURE_2D, filterSourceTexture2);
    glUniform1i(filterInputTextureUniform2, 3);

    glActiveTexture(GL_TEXTURE4);
    glBindTexture(GL_TEXTURE_2D, filterSourceTexture3);
    glUniform1i(filterInputTextureUniform3, 4);

    glActiveTexture(GL_TEXTURE5);
    glBindTexture(GL_TEXTURE_2D, filterSourceTexture4);
    glUniform1i(filterInputTextureUniform4, 5);

    glVertexAttribPointer(filterPositionAttribute, 2, GL_FLOAT, 0, 0, vertices);
    glVertexAttribPointer(filterTextureCoordinateAttribute, 2, GL_FLOAT, 0, 0, textureCoordinates);
    glVertexAttribPointer(filterTextureCoordinateAttribute2, 2, GL_FLOAT, 0, 0, [[self class] textureCoordinatesForRotation:inputRotation2]);
    glVertexAttribPointer(filterTextureCoordinateAttribute3, 2, GL_FLOAT, 0, 0, [[self class] textureCoordinatesForRotation:inputRotation3]);
    glVertexAttribPointer(filterTextureCoordinateAttribute4, 2, GL_FLOAT, 0, 0, [[self class] textureCoordinatesForRotation:inputRotation4]);

    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
}

- (void)releaseInputTexturesIfNeeded;
{
    if (shouldConserveMemoryForNextFrame)
    {
        [firstTextureDelegate textureNoLongerNeededForTarget:self];
        [textureDelegate2 textureNoLongerNeededForTarget:self];
        [textureDelegate3 textureNoLongerNeededForTarget:self];
        [textureDelegate4 textureNoLongerNeededForTarget:self];
        shouldConserveMemoryForNextFrame = NO;
    }
}

#pragma mark -
#pragma mark GPUImageInput

- (NSInteger)nextAvailableTextureIndex;
{
    if (!hasSetTexture1){
        return 0;
    }else if (!hasSetTexture2) {
        return 1;
    }else if (!hasSetTexture3) {
        return 2;
    }else{
        return 3;
    }
}

- (void)setInputTexture:(GLuint)newInputTexture atIndex:(NSInteger)textureIndex;
{
    switch (textureIndex) {
        case 0:
            filterSourceTexture = newInputTexture;
            hasSetTexture1 = YES;
            break;
        case 1:
            filterSourceTexture2 = newInputTexture;
            hasSetTexture2 = YES;
            break;
        case 2:
            filterSourceTexture3 = newInputTexture;
            hasSetTexture3 = YES;
            break;
        case 3:
            filterSourceTexture4 = newInputTexture;
            break;
        default:
            break;
    }
}

- (void)setInputSize:(CGSize)newSize atIndex:(NSInteger)textureIndex;
{
    if (textureIndex == 0)
    {
        [super setInputSize:newSize atIndex:textureIndex];

        if (CGSizeEqualToSize(newSize, CGSizeZero))
        {
            hasSetTexture1 = NO;
        }
    }
}

- (void)setInputRotation:(GPUImageRotationMode)newInputRotation atIndex:(NSInteger)textureIndex;
{
    switch (textureIndex) {
        case 0:
            inputRotation = newInputRotation;
            break;
        case 1:
            inputRotation2 = newInputRotation;
            break;
        case 2:
            inputRotation3 = newInputRotation;
            break;
        case 3:
            inputRotation4 = newInputRotation;
            break;
        default:
            break;
    }
}

- (CGSize)rotatedSize:(CGSize)sizeToRotate forIndex:(NSInteger)textureIndex;
{
    CGSize rotatedSize = sizeToRotate;

    GPUImageRotationMode rotationToCheck;
    switch (textureIndex) {
        case 0:
            rotationToCheck = inputRotation;
            break;
        case 1:
            rotationToCheck = inputRotation2;
            break;
        case 2:
            rotationToCheck = inputRotation3;
            break;
        case 3:
            rotationToCheck = inputRotation4;
            break;
        default:
            break;
    }

    if (GPUImageRotationSwapsWidthAndHeight(rotationToCheck))
    {
        rotatedSize.width = sizeToRotate.height;
        rotatedSize.height = sizeToRotate.width;
    }

    return rotatedSize;
}

- (void)newFrameReadyAtTime:(CMTime)frameTime atIndex:(NSInteger)textureIndex;
{
    outputTextureRetainCount = [targets count];

    // You can set up infinite update loops, so this helps to short circuit them
    if (hasReceivedFrame1 && hasReceivedFrame2 && hasReceivedFrame3 && hasReceivedFrame4)
    {
        return;
    }

    BOOL updatedMovieFrameOppositeStillImage = NO;

    switch (textureIndex) {
        case 0:
            hasReceivedFrame1 = YES;
            frameTime1 = frameTime;
            if (frameCheckDisabled2)
            {
                hasReceivedFrame2 = YES;
            }
            if (frameCheckDisabled3)
            {
                hasReceivedFrame3 = YES;
            }
            if (frameCheckDisabled4)
            {
                hasReceivedFrame4 = YES;
            }

            if (!CMTIME_IS_INDEFINITE(frameTime))
            {
                if (CMTIME_IS_INDEFINITE(frameTime2) && CMTIME_IS_INDEFINITE(frameTime3) && CMTIME_IS_INDEFINITE(frameTime4))
                {
                    updatedMovieFrameOppositeStillImage = YES;
                }
            }
            break;
        case 1:
            hasReceivedFrame2 = YES;
            frameTime2 = frameTime;
            if (frameCheckDisabled1)
            {
                hasReceivedFrame1 = YES;
            }
            if (frameCheckDisabled3)
            {
                hasReceivedFrame3 = YES;
            }
            if (frameCheckDisabled4)
            {
                hasReceivedFrame4 = YES;
            }

            if (!CMTIME_IS_INDEFINITE(frameTime))
            {
                if (CMTIME_IS_INDEFINITE(frameTime1) && CMTIME_IS_INDEFINITE(frameTime3) && CMTIME_IS_INDEFINITE(frameTime4))
                {
                    updatedMovieFrameOppositeStillImage = YES;
                }
            }
            break;
        case 2:
            hasReceivedFrame3 = YES;
            frameTime3 = frameTime;
            if (frameCheckDisabled1)
            {
                hasReceivedFrame1 = YES;
            }
            if (frameCheckDisabled2)
            {
                hasReceivedFrame2 = YES;
            }
            if (frameCheckDisabled4)
            {
                hasReceivedFrame4 = YES;
            }

            if (!CMTIME_IS_INDEFINITE(frameTime))
            {
                if (CMTIME_IS_INDEFINITE(frameTime1) && CMTIME_IS_INDEFINITE(frameTime2) && CMTIME_IS_INDEFINITE(frameTime4))
                {
                    updatedMovieFrameOppositeStillImage = YES;
                }
            }
            break;
        case 3:
            hasReceivedFrame4 = YES;
            frameTime4 = frameTime;
            if (frameCheckDisabled1)
            {
                hasReceivedFrame1 = YES;
            }
            if (frameCheckDisabled3)
            {
                hasReceivedFrame3 = YES;
            }
            if (frameCheckDisabled2)
            {
                hasReceivedFrame2 = YES;
            }

            if (!CMTIME_IS_INDEFINITE(frameTime))
            {
                if (CMTIME_IS_INDEFINITE(frameTime1) && CMTIME_IS_INDEFINITE(frameTime3) && CMTIME_IS_INDEFINITE(frameTime2))
                {
                    updatedMovieFrameOppositeStillImage = YES;
                }
            }
            break;
        default:
            break;
    }

    // || (hasReceivedFirstFrame && secondFrameCheckDisabled) || (hasReceivedSecondFrame && firstFrameCheckDisabled)
    if ((hasReceivedFrame1 && hasReceivedFrame2 && hasReceivedFrame3 && hasReceivedFrame4) || updatedMovieFrameOppositeStillImage)
    {
        [super newFrameReadyAtTime:frameTime atIndex:0];
        hasReceivedFrame1 = NO;
        hasReceivedFrame2 = NO;
        hasReceivedFrame3 = NO;
        hasReceivedFrame4 = NO;
    }
}

- (void)setTextureDelegate:(id<GPUImageTextureDelegate>)newTextureDelegate atIndex:(NSInteger)textureIndex;
{
    switch (textureIndex) {
        case 0:
            firstTextureDelegate = newTextureDelegate;
            break;
        case 1:
            textureDelegate2 = newTextureDelegate;
            break;
        case 2:
            textureDelegate3 = newTextureDelegate;
            break;
        case 3:
            textureDelegate4 = newTextureDelegate;
            break;
        default:
            break;
    }
}

@end 
```

一个名为 IFamaroFilter 的类扩展了 IFFourInputFilter。

```
#import "IFAmaroFilter.h"

NSString *const kIFAmaroFilterFragmentShaderString = SHADER_STRING
(
 precision lowp float;

 varying highp vec2 textureCoordinate;

 uniform sampler2D inputImageTexture;
 uniform sampler2D inputImageTexture2; //blowout;
 uniform sampler2D inputImageTexture3; //overlay;
 uniform sampler2D inputImageTexture4; //map

 void main()
 {
     vec4 texel = texture2D(inputImageTexture, textureCoordinate);
     vec3 bbTexel = texture2D(inputImageTexture2, textureCoordinate).rgb;

     texel.r = texture2D(inputImageTexture3, vec2(bbTexel.r, texel.r)).r;
     texel.g = texture2D(inputImageTexture3, vec2(bbTexel.g, texel.g)).g;
     texel.b = texture2D(inputImageTexture3, vec2(bbTexel.b, texel.b)).b;

     vec4 mapped;
     mapped.r = texture2D(inputImageTexture4, vec2(texel.r, 0.16666)).r;
     mapped.g = texture2D(inputImageTexture4, vec2(texel.g, .5)).g;
     mapped.b = texture2D(inputImageTexture4, vec2(texel.b, .83333)).b;
     mapped.a = 1.0;

     gl_FragColor = texel;
 }
 );

@implementation IFAmaroFilter

- (id)init;
{
    if (!(self = [super initWithFragmentShaderFromString:kIFAmaroFilterFragmentShaderString]))
    {
        return nil;
    }

    return self;
}

@end 
```

当我使用过滤器时，我得到了黑色输出。下面的代码：

```
 filter = [[IFAmaroFilter alloc] init];
    GPUImagePicture *gp1 = [[GPUImagePicture alloc] initWithImage:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"blackboard1024" ofType:@"png"]]];
    GPUImagePicture *gp2 = [[GPUImagePicture alloc] initWithImage:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"overlayMap" ofType:@"png"]]];
    GPUImagePicture *gp3 = [[GPUImagePicture alloc] initWithImage:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"amaroMap" ofType:@"png"]]];

    [stillCamera addTarget:filter atTextureLocation:0];
    [gp1 addTarget:filter atTextureLocation:1];
    [gp1 processImage];
    [gp2 addTarget:filter atTextureLocation:2];
    [gp2 processImage];
    [gp3 addTarget:filter atTextureLocation:3];
    [gp3 processImage];
    [filter addTarget:(GPUImageView *)self.view]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T10:27:22.163

我发现 GPUImagePicture 会自动释放，所以过滤器不会接收到纹理。如果你遇到同样的问题，请仔细检查纹理的生命控制，注意它们何时被释放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T21:56:17.640

我同意周琦的回答，但我想澄清一下。

您需要在接口声明中有一个 GPUImagePicture 属性，以便您的 GPUImagePictureObject 不会立即自动释放。

在您的接口声明中：

```
@property (strong, nonatomic) GPUImagePicture *sourcePicture; 
```

在您的实施中：

```
UIImage *inputImage = [UIImage imageNamed:@"MyPicture.png"];

_sourcePicture = [[GPUImagePicture alloc] initWithImage:inputImage
                                    smoothlyScaleOutput:YES];
[_sourcePicture processImage];

[_videoCamera addTarget:_myFilter];
[_sourcePicture addTarget:_myFilter];

[_myFilter addTarget:_myView]; 
```

在此处查看 Filter Showcase 示例项目中的任何混合过滤器： [https ://github.com/BradLarson/GPUImage/tree/master/examples/iOS/FilterShowcase](https://github.com/BradLarson/GPUImage/tree/master/examples/iOS/FilterShowcase)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-15T08:05:16.167

我曾尝试使用此着色器来合并我的三个视频以制作 MV 效果

```
filter0 = [[GPUImageThreeInputFilter alloc] initWithFragmentShaderFromString:@"\nprecision highp float;\nuniform sampler2D inputImageTexture; //video\nuniform sampler2D inputImageTexture2; //mv\nuniform sampler2D inputImageTexture3; //alpha\nvarying vec2 textureCoordinate;\nvoid main()\n{\nvec4 video = texture2D(inputImageTexture, textureCoordinate);\nvec4 mv    = texture2D(inputImageTexture2, textureCoordinate);\nvec4 alpha = texture2D(inputImageTexture3, textureCoordinate);\ngl_FragColor = video * (1.0 - alpha.r) + mv;\n}"]; 
```

我有同样的问题，你能告诉我一些想法吗？

# asp.net - 在 IIS7 服务器中部署时的 asp.net 应用程序错误 - 找不到表 0

> ID：14514951
> 
> 赞同：0
> 
> 时间：2013-01-25T03:40:05.170
> 
> 标签：asp.net, iis-7

我尝试在 IIS 服务器 7 中部署 ASP.NET 应用程序。我使用的是 Windows 7。部署时出现错误“找不到表 0”。

```
Exception Details: System.IndexOutOfRangeException: Cannot find table 0

Source Error: 
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 

Stack Trace: 
[IndexOutOfRangeException: Cannot find table 0.]
   System.Data.DataTableCollection.get_Item(Int32 index) +95
   LHS.RightColumn.Page_Load(Object sender, EventArgs e) in C:\Saravanan\Saravanan\Saravanan\LHS\LHS\RightColumn.ascx.cs:33
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +74
   System.Web.UI.Control.LoadRecursive() +146
   System.Web.UI.Control.LoadRecursive() +146
   System.Web.UI.Control.LoadRecursive() +146
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

请帮助我如何解决这个问题。在 Visual Studio 中，此应用程序运行良好。但在 IIS 中显示此错误。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:11:02.317

几周前我遇到了这个错误，它发生是因为**web.config 文件不正确**。数据库信息**无效**。希望这会对您有所帮助。

# grails - Grails：有没有办法在视图完全渲染后运行过滤器？

> ID：14514954
> 
> 赞同：1
> 
> 时间：2013-01-25T03:40:15.490
> 
> 标签：grails

我有一个当前定义为在呈现视图后运行的过滤器：

```
class MyFilter {
  def filters = {
    doStuff(controller: '*', action: '*') {
      before = {...}
      after = {...} 
      afterView = { 
        // code I want to run when EVERYTHING is set and done }
        Holder.setCurrentData(null)
    }
  }
} 
```

这应该可行，但我注意到`<g:message />`标签（可能还有其他标签；这是我此时感兴趣的标签）在`afterView`过滤器之后执行。

这是一个问题，因为我使用此过滤器来跟踪 ThreadLocal 中当前执行的一些信息，并且我想确保在请求完成后自己进行清理。我不想使用请求/会话对象来打乱数据，因为我必须将它传递给我所做的所有调用；事实上，我有一个 Holder 类，我可以在 ThreadLocal 中查询值。

我需要自定义 MessageSource 中来自该 ThreadLocal 的信息。这就是我注意到在过滤器`<g:message />`之后调用的方式。`afterView`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:18:04.220

您可以使用 servlet 过滤器：

```
package com.mycompany

import java.io.IOException;

import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;

import org.springframework.web.filter.GenericFilterBean;

public class MyFilter extends GenericFilterBean {

   public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain)
            throws IOException, ServletException {

      try {
         chain.doFilter(req, res);
      }
      finally {
         Holder.setCurrentData(null);   
      }
   }
} 
```

`grails install-templates`如果你还没有运行，然后你可以像这样在 src/templates/war/web.xml 中注册它：

```
<filter>
   <filter-name>myFilter</filter-name>
   <filter-class>com.mycompany.MyFilter</filter-class>
</filter>

<filter-mapping>
   <filter-name>myFilter</filter-name>
   <url-pattern>/*</url-pattern>
</filter-mapping> 
```

为了方便起见，我进行了扩展`GenericFilterBean`，但您也可以直接实现`javax.servlet.Filter`接口。它也可以用 Groovy 编写，但我倾向于用 Java 编写过滤器，因为它们会为每个请求调用，而且 Groovy 添加的小开销可以在这里加起来。

# perl - Perl脚本复制行以放置在新文件中

> ID：14514955
> 
> 赞同：0
> 
> 时间：2013-01-25T03:40:23.383
> 
> 标签：perl, grep

我的文件夹中有很多文本文件。文件夹是'c:\vehicles'。对于每个文本文件，我想复制任何包含以下单词的行：型号、品牌、年份。我要写入的文件是“vehicles.txt”，位于“c:\”中。

我知道我写错了代码。我应该怎么做才能纠正它？谢谢您的帮助。

`C:\vehicles $ ls -A | xargs head -qn 30 | perl -Mstrict -wne 'if( $ +_ =~ /(make)|(model)|(year)/ ) { print "$_"; }' > vehicles.txt grep -rE "(make|model|year)" c:`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:59:24.810

也许以下内容会有所帮助：

```
use strict;
use warnings;

for my $file (<*.txt>) {
    open my $fh, '<', $file or die $!;

    while (<$fh>) {
        chomp;
        print "$_\n" if /(?:\b(?:model|make|year)\b)/i;
    }
    close $fh;
} 
```

假设脚本将在 中`c:\vehicles`，`perl scriptName.pl >vehicles.txt`请在命令提示符处键入。该`<*.txt>`表示法返回目录中所有文本文件的列表。这些文件中的每一个都被逐行打开和读取。如果在一行中找到您要查找的任何单词，则将其打印出来。该`>vehicles.txt`符号表示打印到文件。

# c - 在 C 中使用主函数？

> ID：14514956
> 
> 赞同：0
> 
> 时间：2013-01-25T03:40:25.093
> 
> 标签：c

我正在创建一个主函数来测试名为 mchar 的 C 函数的限制。mchar 将 char 作为参数。

```
int main ()
{
    mchar();
    mchar('A');
    mchar('\n');
    mchar('');
    mchar(NULL);
} 
```

我正在尝试考虑所有可能调用该方法出错的用例。所有这些都可以正确调用吗？有没有我遗漏的用例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T03:42:44.170

只有 256 个字符，因此您可以轻松地将其全部调用：

```
#include <limits.h>

int main(void)
{
    for (int c = CHAR_MIN; c <= CHAR_MAX; ++c) {
        mchar(c);
    }

    return 0;
} 
```

如果您特别想测试“有趣”的角色，那么您可以尝试这些角色。

```
mchar('\'');    // Single quote
mchar('"');     // Double quote
mchar('\\');    // Backslash

mchar(' ');     // Space
mchar('\t');    // Tab
mchar('\n');    // Line feed
mchar('\r');    // Carriage return

mchar('\0');    // NUL
mchar('\b');    // Backspace
mchar('\f');    // Form feed
mchar('\v');    // Vertical tab
mchar('\a');    // Bell (alert) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:42:54.650

关于你的问题

> *所有这些都可以正确调用吗？*

首先

```
mchar('A');
mchar('\n'); 
```

这里 'A' ， '\n' 是有效字符。所以这将正常工作

```
mchar(''); 
```

是非法的并且会给出编译时错误。例如：对于 gcc，显示的错误是 *空字符常量。*

```
mchar(); 
```

也是非法的，因为该函数需要 a`char`作为参数，但您没有传递任何参数。您将收到一个编译时错误（类似于“*函数的参数太少*”）。

```
mchar(NULL); 
```

将在正常情况下编译（好吧，如果您没有设置任何严格的编译器标志集），但会发出警告。

> 警告：指向整数转换的不兼容指针将“void *”传递给“char”类型的参数；

# r - 根据“不足”的查找表赋值

> ID：14514959
> 
> 赞同：1
> 
> 时间：2013-01-25T03:40:34.397
> 
> 标签：r, merge, lookup

我必须查找一些分数并根据固定的查找表分配百分位值。

我已经尝试解决这个问题一段时间了，我已经阅读[了这个](https://stackoverflow.com/questions/9037786/lookup-without-looping)和[这个](https://stackoverflow.com/questions/8057113/lookup-values-in-a-vectorized-way)SO 线程，但没有解决我的问题。我的问题是原始分数可能大于查找表中的值，在这种情况下，规定了最大的百分位值。

我有一个这样的查找表，

```
lookup <- structure(list(Percentile = c(99, 95, 90, 85, 80, 75, 70, 65, 60, 55, 50, 45, 40, 35, 30, 25, 20, 15, 10, 5, 1), ACB = c(24, 19, 18, 17, 16, NA, 15, NA, 14, NA, NA, 13, NA, NA, NA, 12, NA, 11, 10, 9, 7), DFG = c(49, 39, 36, 33, 31, 30, 29, 28, 27, 26, 25, NA, 24, 23, 22, 21, 20, 19, 17, 14, 12), EIH = c(35, 30, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, NA, 14, NA, 13, 12, NA), GKJ = c(49, 39, 36, 33, 31, 30, 29, 28, 27, 26, 25, NA, 24, 23, 22, 21, 19, 18, 17, 15, 14), Total = c(112, 99, 91, 86, 82, 79, 76, 75, 73, 71, 69, 67, 66, 65, 63, 61, 59, 55, 51, 46, 39)), .Names = c("Percentile", "ACB", "DFG", "EIH", "GKJ", "Total"), row.names = c("99+", "95", "90", "85", "80", "75", "70", "65", "60", "55", "50", "45", "40", "35", "30", "25", "20", "15", "10", "5", "1"), class = "data.frame")
lookup
    Percentile ACB DFG EIH GKJ Total
99+         99  24  49  35  49   112
95          95  19  39  30  39    99
90          90  18  36  27  36    91
85          85  17  33  26  33    86
80          80  16  31  25  31    82
75          75  NA  30  24  30    79
70          70  15  29  23  29    76
65          65  NA  28  22  28    75
60          60  14  27  21  27    73
55          55  NA  26  20  26    71
50          50  NA  25  19  25    69
45          45  13  NA  18  NA    67
40          40  NA  24  17  24    66
35          35  NA  23  16  23    65
30          30  NA  22  15  22    63
25          25  12  21  NA  21    61
20          20  NA  20  14  19    59
15          15  11  19  NA  18    55
10          10  10  17  13  17    51
5            5   9  14  12  15    46
1            1   7  12  NA  14    39 
```

而且，一些看起来像这样的原始数据，

```
rawS_1 <- structure(list(ACB = 28, DFG = 39, EIH = 31, GKJ = NA_real_, Total = NA_real_), .Names = c("ACB", "DFG", "EIH", "GKJ", "Total"), row.names = "RawScore for ID 1", class = "data.frame")
rawS_1
                  ACB DFG EIH GKJ Total
RawScore for ID 1  28  39  31  NA    NA

rawS_2 <- structure(list(ACB = 29, DFG = 51, EIH = 56, GKJ = 60, Total = 169), .Names = c("ACB", "DFG", "EIH", "GKJ", "Total"), row.names = "RawScore for ID 2", class = "data.frame")
rawS_2
                  ACB DFG EIH GKJ Total
RawScore for ID 2  29  51  56  60   169 
```

而且，这就是我想做的，

```
 ACB DFG EIH GKJ Total
RawScore for ID 1  12  39  19  NA    NA
Percentile, ID 1   25  95  50  NA    NA
                  ACB DFG EIH GKJ Total
RawScore for ID 2  29  51  56  60   169
Percentile, ID 2   99  99  99  99    99 
```

我尝试`merge()`使用`all.x = TRUE`and `suffixes = c(".x",".y"))`，但我不断得到*我不想要*的东西，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:51:42.093

与其将其视为合并，我认为您最好将其视为创建函数的问题：您想要一个在给定（例如） ACB 的原始值时返回百分位数的函数。幸运的是，R 有一个函数旨在从一个数字表中生成一个函数：`approxfun`.

以下代码用于`lapply`为每一列创建一个函数，然后显示如何调用新函数：

```
vars <- names(lookup)[-1]
lookup_funs <- lapply(vars, function(var) {
  df <- data.frame(x = lookup[[var]], y = lookup$Percentile)
  df <- df[complete.cases(df), ]
  approxfun(df$x, df$y, "constant", rule = 2)
})
names(lookup_funs) <- vars

lookup_funs$ACB(c(12, 29))
lookup_funs$Total(169) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T06:41:17.150

基本策略是使用`!is.na(vec)`索引值和感知向量。下面来看一个案例。对于 ACB 的 11 输入，您更喜欢哪一个？

```
> rev(lookup$Percentile)[!is.na(lookup$ACB)][
                findInterval( 11, c(-Inf,rev(lookup$ACB[!is.na(lookup$ACB)]), Inf))]
[1] 20
> rev(lookup$Percentile)[!is.na(lookup$ACB)][
                findInterval( 11, c(-Inf,rev(lookup$ACB[!is.na(lookup$ACB)]), Inf))-1]
[1] 15 
```

对于一行数据，这可以帮助您获得大部分信息：

```
> for(i in names(rawS_1) ) {print(rawS_1[i]); print(rev(lookup$Percentile)[ !is.na(lookup[[i]]) ][ findInterval( rawS_1[i], c( rev( lookup[[i]][ !is.na(lookup[[i]] )]) ) )] )}
                  ACB
RawScore for ID 1  28
[1] 99
                  DFG
RawScore for ID 1  39
[1] 95
                  EIH
RawScore for ID 1  31
[1] 90
                  GKJ
RawScore for ID 1  NA
[1] NA
                  Total
RawScore for ID 1    NA
[1] NA 
```

您确实会通过从标度高端的索引中减去 1 来进行索引溢出，因此您可能应该在确定要查看的结果后在查找向量上添加一个额外的元素。

```
for(i in names(rawS_2) ) {print(rawS_2[i]); print(rev(lookup$Percentile)[ !is.na(lookup[[i]]) ][ findInterval( rawS_2[i], c( rev( lookup[[i]][ !is.na(lookup[[i]] )]) ) )] )}
                  ACB
RawScore for ID 2  29
[1] 99
                  DFG
RawScore for ID 2  51
[1] 99
                  EIH
RawScore for ID 2  56
[1] 95
                  GKJ
RawScore for ID 2  60
[1] 99
                  Total
RawScore for ID 2   169
[1] 99 
```

# vim - 同步路径时，Nerdtree 可以处理符号链接吗？

> ID：14514963
> 
> 赞同：1
> 
> 时间：2013-01-25T03:41:05.450
> 
> 标签：vim, ctags, nerdtree

我正在使用`ctags`生成标签并将`set tags+=~/.vim/tags/cpp`（仅关注[此 wiki 页面](http://vim.wikia.com/wiki/C++_code_completion)）放入`.vimrc`。在我的`vimrc`文件中还有如下设置，因此我可以自动同步当前文件的 nerdtree 查看器（请参阅[此](https://superuser.com/questions/195022/vim-how-to-synchronize-nerdtree-with-current-opened-tab-file-path/474298#474298)）：

```
" returns true iff is NERDTree open/active
function! rc:isNTOpen()        
  return exists("t:NERDTreeBufName") && (bufwinnr(t:NERDTreeBufName) != -1)
endfunction

" returns true iff focused window is NERDTree window
function! rc:isNTFocused()     
  return -1 != match(expand('%'), 'NERD_Tree') 
endfunction 

" calls NERDTreeFind iff NERDTree is active, current window contains a modifiable file, and we're not in vimdiff
function! rc:syncTree()
  if &modifiable && rc:isNTOpen() && !rc:isNTFocused() && strlen(expand('%')) > 0 && !&diff
    NERDTreeFind
    wincmd p
  endif
endfunction

autocmd BufEnter * call rc:syncTree() 
```

问题在于它`~/.vim`实际上是指向另一个文件夹的符号链接（所以我可以使用 git 或其他 VCS 轻松管理我的所有点文件）。当我使用`Ctrl`+`]`查找定义（其标签信息在*~/.vim/tags/cpp*中）时，总会出现错误：

```
detected while processing function rc:syncTree..<SNR>15_findAndRevealPath..102:
line    2:
E605: Exception not caught: NERDTree.InvalidArgumentsError: /home/hongxuchen/.vim/tags/cpp_src/stl_iterator.h should be under /home/hongxuchen/data_backup/dotfiles/_vim/tags/cpp_src 
```

这是否意味着我必须使用**`set tags+=/real/path/to/cpp`**in 代替`vimrc`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:33:20.450

在 Vim 中，该`resolve()`函数可以处理符号链接。尝试更换`plugin/NERD_tree.vim`

```
function! s:findAndRevealPath()
    try
        let p = s:Path.New(expand("%:p")) 
```

和

```
function! s:findAndRevealPath()
    try
        let p = s:Path.New(resolve(expand("%:p"))) 
```

如果可行，我会向插件的作者发送一个补丁。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T07:48:38.820

虽然这不是对您问题的严格回答，但我的回答肯定会帮助解决您的潜在问题。

`vimrc`我在版本控制下有我的“真实” ，`~/.vim/vimrc`并且`~/.vimrc`不是符号链接，因为我*讨厌*符号链接。相反，`~/.vimrc`它是一个只有一行的常规文件：

```
runtime vimrc 
```

# jsf - 如何在 JSF 操作方法中重定向到纯 HTML 页面？

> ID：14514966
> 
> 赞同：1
> 
> 时间：2013-01-25T03:41:46.783
> 
> 标签：jsf, navigation

我有一个纯 HTML 页面`error.html`。当我使用

```
return "error.html?faces-redirect=true"; 
```

它实际上会重定向到`error.xhtml`，而不是`error.html`。

如何在 JSF 操作方法中重定向到非 JSF 页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T12:17:38.663

导航案例结果被视为 JSF 视图。所以它总是需要一个 JSF 视图。如果由于某些不清楚的原因无法重命名`error.html`为`error.xhtml`（请记住，您可以在 Facelets 页面中安全地使用纯 HTML），那么您需要*自己*使用[`ExternalContext#redirect()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#redirect%28java.lang.String%29).

```
public void someAction() throws IOException {
    // ...

    ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
    ec.redirect(ec.getRequestContextPath() + "/error.html");
} 
```

# c - 使用 stdbool.h 时出现意外的编译器行为

> ID：14514967
> 
> 赞同：2
> 
> 时间：2013-01-25T03:41:48.687
> 
> 标签：c

这是我的代码

主程序

```
#include <stdio.h>
#include <stdbool.h>
#include "func.h"

int main () {
  int counts = 10;
  printf("Expected: %lF and rcount %lF,%lF\n",
          counts * 30* 0.156, rcount(0,30), rcount(30,0));

  return 0;
} 
```

这是我的简化 func.h

```
#ifndef FUNC_INCLUDED
#define FUNC_INCLUDED

float rcount(int m, int n);

#endif 
```

最后是我的 func.c

```
#include <stdio.h>
#include <stdbool.h>
#include <math.h>
#include "func.h"

double rcount(int m, int n) {
  double series1 = ((double)m/2)*(10+(double)m*10)/20;
  double series2 = ((double)n/2)*(10+(double)n*10)/20;
  return (series2 > series1) ? series2-series1 : series1-series2;
} 
```

现在，如果我执行，我会得到 的随机值`rcount()`，而如果我`#include<stdbool.h>`从主目录中删除，我会得到正确的值。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T04:37:05.327

正如@Carl Norum 所说，“一定有一些你没有告诉我们的事情”非常有说服力。

rcount() 调用是 printf() 语句返回其 double 类型，但 printf() 由于原型而期望一个浮点数，如果没有看到原型，则期望一个 int。在任何一种情况下， printf() 都会显示错误的数据。

尝试 3 件事：1) 使用除 FUNC_INCLUDED 之外的不同定义，*stdbool.h*可能正在使用该宏。2）更改您的原型和实现以返回相同的类型，最好是双精度。3) 直接在 main() 之前制作 rcount() 原型的冗余副本。

```
extern double rcount(int m, int n); 
```

stdbool.h 的使用/缺乏是一个红鲱鱼。有/没有它，您的编译正在使用一些不同的文件、选项等（除非它的 FUNC_INCLUDED）

# codeigniter - 带有 Codeigniter 的 Postgres 的 add_column 错误？

> ID：14514968
> 
> 赞同：2
> 
> 时间：2013-01-25T03:41:50.193
> 
> 标签：codeigniter

我的迁移 add_column

```
class Migration_Add_post_to_post extends CI_Migration {
    public function up() {
        $fields = array(
            'post' => array('type' => 'TEXT')
        );
        $this->dbforge->add_column('posts', $fields);
    }

    public function down() {
        $this->dbforge->drop_column('posts', 'post');
    }
} 
```

Codeigniter 在代码执行时抛出数据库错误

```
ERROR: syntax error at or near "Array" LINE 1: ALTER TABLE "posts" ADD Array NOT NULL ^ 
```

我在 github [https://github.com/EllisLab/CodeIgniter/issues/808](https://github.com/EllisLab/CodeIgniter/issues/808)上发现了这个问题。即使问题已关闭，但似乎除了 mysql 驱动程序之外该错误仍然存​​在。

有什么办法可以解决这个问题吗？

# php - 使用 PHP 的内置类时的依赖注入

> ID：14514969
> 
> 赞同：1
> 
> 时间：2013-01-25T03:42:13.443
> 
> 标签：php, oop, design-patterns

所以我知道依赖注入的基础知识。我应该将我的依赖项作为方法参数传递，而不是在方法中实例化对象本身。

我想知道这是否也适用于 PHP 附带的类，例如 DateTime 对象或 ReflectionClass 对象？

例如，我正在处理的一个类的方法需要了解传入的对象的属性。我想使用 ReflectionClass 来完成任务，但我认为似乎没有必要传递一个如果类将始终可访问且相对不变（除非 ReflectionClass 随较新的 PHP 版本发生更改），则将 ReflectionClass 对象作为参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:14:07.510

这取决于您的应用程序的设计要求。

如果您知道您的应用程序需要 DateTime 才能使特定方法起作用，请传入 DateTime。如果您需要围绕 DateTime 的自定义功能，请考虑将 DateTime 子类化并发送。

如果您决定在方法签名中使用 PHP 的类型提示，请考虑改用接口，以便发送的任何对象都将履行与接收类的约定。这种方法还可以帮助您的应用程序与将来的 PHP 中的不兼容更改隔离开来。

# php - 仅来自多行的第一行 - 表格

> ID：14514970
> 
> 赞同：0
> 
> 时间：2013-01-25T03:42:15.013
> 
> 标签：php

使用以下代码，我只将第一行放入数据库。看了很多例子，但我仍然看不出我哪里出错了。

```
// one box for each //

<input class="bginput" name="album_name[]" size="30" type="text">

<imput type="submit" Value="submit">

<?PHP
foreach($_POST['artist_id'] as $row=>$val) {
$artist_id      = mysql_real_escape_string($val);
$album_name     = mysql_real_escape_string($_POST['album_name'][$row]);
$image_album_id = mysql_real_escape_string($_POST['image_album_id'][$row]);
$track          = mysql_real_escape_string($_POST['track'][$row]);
$song_name      = mysql_real_escape_string($_POST['song_name'][$row]);
$duration       = mysql_real_escape_string($_POST['duration'][$row]);

$sql = mysql_query("INSERT INTO songs (`image_album_id`, `member_id`, `artist_id`,      `album_name`, `track`, `song_name`, `duration`, `timestamp`)
VALUES ('$image_album_id', '".$_SESSION['member_id']."','$artist_id','$album_name', '$track', '$song_name', '$duration', UNIX_TIMESTAMP() )") or die(mysql_error());

header ('Location: song_details_add.php?success');
exit();
?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:45:58.553

您似乎忘记了关闭 foreach 循环：

```
foreach($_POST['artist_id'] as $row=>$val) {
    $artist_id      = mysql_real_escape_string($val);
    $album_name     = mysql_real_escape_string($_POST['album_name'][$row]);
    $image_album_id = mysql_real_escape_string($_POST['image_album_id'][$row]);
    $track          = mysql_real_escape_string($_POST['track'][$row]);
    $song_name      = mysql_real_escape_string($_POST['song_name'][$row]);
    $duration       = mysql_real_escape_string($_POST['duration'][$row]);

    $sql = mysql_query("INSERT INTO songs (`image_album_id`, `member_id`,`artist_id`,      `album_name`, `track`, `song_name`, `duration`, `timestamp`)
    VALUES ('$image_album_id', '".$_SESSION['member_id']."','$artist_id','$album_name', '$track', '$song_name', '$duration', UNIX_TIMESTAMP() )") or die(mysql_error());
} <---- missing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:44:59.867

你没有关闭 foreach 循环，你错过了一个`}`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T03:47:16.493

似乎缺少`foreach`右括号。`}`但它应该抛出一个语法错误。正如您所说，它插入一行，我觉得您正在关闭`}`后重定向。

尝试这个

```
<?PHP
foreach($_POST['artist_id'] as $row=>$val) {
  $artist_id      = mysql_real_escape_string($val);
  $album_name     = mysql_real_escape_string($_POST['album_name'][$row]);
  $image_album_id = mysql_real_escape_string($_POST['image_album_id'][$row]);
  $track          = mysql_real_escape_string($_POST['track'][$row]);
  $song_name      = mysql_real_escape_string($_POST['song_name'][$row]);
  $duration       = mysql_real_escape_string($_POST['duration'][$row]);

  $sql = mysql_query("INSERT INTO songs (`image_album_id`, `member_id`, `artist_id`,      `album_name`, `track`, `song_name`, `duration`, `timestamp`)
  VALUES ('$image_album_id', '".$_SESSION['member_id']."','$artist_id','$album_name', '$track', '$song_name', '$duration', UNIX_TIMESTAMP() )") or die(mysql_error());

}

header ('Location: song_details_add.php?success');
exit();
?> 
```

# jenkins - 詹金斯 - 不显示构建历史

> ID：14514976
> 
> 赞同：5
> 
> 时间：2013-01-25T03:42:39.503
> 
> 标签：jenkins

我有一个使用 Jenkins 构建的多模块 maven 项目，名为 MyApp。我还有另一个依赖 MyApp 的 maven 项目，这个项目在 MyApp 上运行集成测试。

在 Jenkins 中，当我查看 MyApp 项目的状态时，它会成功显示以前运行的构建列表，我可以单击它们以查找更多信息（并查看控制台输出）。

然而，集成测试项目，虽然它确实构建正确，但它只显示之前运行的构建大约 5 分钟，此时发生了一些事情，jenkins 完全忘记了曾经运行过的构建。

在文件系统上，我可以 cd 到：

```
/usr/share/tomcat6/.jenkins/jobs/My App Integration Test/builds 
```

和 ls 揭示

```
me@myserver:/usr/share/tomcat6/.jenkins/jobs/My App Integration Test/builds$ ls

1  2  2013-01-24_16-46-59  2013-01-24_16-51-58  2013-01-24_18-05-09  2013-01-24_18-58-46  3  4 
```

我以前运行的所有构建都在那里，它们应该在哪里。

Jenkins 在其项目配置页面中有一个“丢弃旧版本”功能，但我显然没有选中它。

我在 Ubuntu 上的 tomcat6 中运行 jenkins。

请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:02:07.827

Jenkins 从 1.505 开始解决了这个问题，我建议所有不想从 Jenkins 切换回 Hudson 的人升级。

这可以通过 GUI 通过管理 Jenkins->升级到最新版本来完成（请注意，要使其正常工作，您需要拥有 Jenkins 的适当权限）

更多信息可以在[这里](https://wiki.jenkins-ci.org/display/JENKINS/Automated+Upgrade)找到对于 linux 用户`aptitude update`或者`yum update jenkins`也应该为你工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-05T18:29:02.223

我让 jenkins 运行 1.517，如果构建数量超过 65 个而没有丢弃选项，仍然面临这个问题。发现重新加载配置带回了构建历史。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-10T00:06:51.777

我已经看到了这个问题，并且总是能够按照以下步骤解决它：

即将`\\[buildmachine]\C$\Jenkins\jobs\[jobname]`

1.  删除`builds`文件夹。
2.  删除`lastStable`和的快捷方式`lastSuccessful`。
3.  打开文件`nextBuildNumber`并将数字更改为 1。

然后建立新的工作，它们不再消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T05:45:27.867

正如 Dave Bacher 所提到的，这似乎是 Jenkins 中的一个错误。我切换到哈德逊并解决了问题！

# jquery - 在窗口内显示时的网格高度问题

> ID：14514978
> 
> 赞同：1
> 
> 时间：2013-01-25T03:42:49.937
> 
> 标签：jquery, css, kendo-ui

我有一个剑道网格的问题，我有一个`window`，在窗口里面有一个`tabstrip`选项卡的内容是两个网格，分别显示在 tab1 和 tab2 中，窗口最初也是不可见的。

我的问题是`grid in the second tab height`超出了原始网格内容的高度。我在 jsfiddle clickhere 中重现了这个问题[。](http://jsfiddle.net/4663R/3/)我想有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:21:06.363

为了获得上述评论中描述的结果：

> 您需要一个不使用分页而是滚动显示所有结果的网格。但是这个网格在一个 tabstrip 选项卡内（恰好在一个窗口内），所以它不应该溢出它的容器（tabstrip 选项卡）

你应该：

1.  据我所知，`height`不是 的有效选项`kendoTabStrip`，您可以将其删除。
2.  您不想分页，而是从服务器获取所有结果，然后滚动。因此，您需要`pageable: ...`从`Grid`初始化以及初始化`pageSize: 10`中删除`DataSource`。
3.  创建网格后，您应该删除`height`Kendo UI 引入的样式，因为它没有正确计算（！？）`$("#grid2").css("height","");`。这在我看来有点棘手，但我无法让它运行。
4.  您应该稍微降低网格的高度，否则它不适合窗口。我把它改成450。

[在您的示例](http://jsfiddle.net/OnaBai/4663R/6/)的以下修改中，我对`grid2`（**仅**针对 grid2）进行了此修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T04:31:48.577

我检查了你的 jsfiddle 并发现

```
<div id="tabStrip">
    <ul>
        <li>First tab</li>
        <li>Second tab</li>
    </ul>
    <div id="grid1"></div>
    <div id="grid2">Second tab content</div>
</div> 
```

在上面的代码`<div id="grid2">Second tab content</div>`中为第二个标签创建高度问题。

您可以删除该文本`div`并尝试。

[**演示**](http://jsfiddle.net/4663R/2/)

* * *

**改变**

我对您的代码进行了一些更改，请参阅下面的 jsFiddle

**小提琴**[检查这个小提琴](http://jsfiddle.net/4663R/4/)

**根据您的评论更新*[小提琴](http://jsfiddle.net/4663R/5/)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-28T11:37:49.247

我有同样的问题并通过在 dataBound 事件中设置 .k-grid-content 的高度来解决

```
$("#grid").kendoGrid(
{
    dataBound: function()
    {
        $('#grid .k-grid-content').height(349);
    }
}); 
```

[在这里](http://jsfiddle.net/4663R/54/)检查jsfiddle

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-08T20:14:25.073

窗口或标签条（活动标签除外）内的网格高度问题。实际上，当我们部分加载内容或通过 ajax 加载内容时，就会出现这些问题。

**解决方案 1：**为我工作
-使用 CSS 为网格内容容器**设置最大高度**，并在绑定网格时**删除高度。**因此，当网格内容大于此高度时，将启用滚动条。我做了如下。

CSS：

```
    #gridTasks .k-grid-content {
            最大高度：300px；
        }

```

javascript:

```

    //准备网格可用的数据源
                var taskDataSource = new kendo.data.DataSource({
                    服务器分页：真，
                    服务器过滤：真，
                    服务器排序：真，
                    页面大小：10，
                    架构：{
                        数据：“数据”，
                        总计：“总计”，
                        model: { // 定义数据源的模型。对于验证和属性类型是必需的。
                            id: "会员ID",
                            字段：{
                                MemberID: { type: "number", editable: false },
                                任务名称：{类型：“字符串”}
                            }
                        }
                    },
                    运输： {
                        读： {
                            url: "/MemberManagement/GetTasksList",
                            内容类型：“应用程序/json”，
                            type: "POST" //使用 HTTP POST 请求，因为 ASP.NET MVC 默认不允许 GET
                        },
                        参数映射：函数（数据，操作）{
                            如果（操作==“读取”）{
                                返回 JSON.stringify(data);
                            }
                        }
                    }
                });

    //绑定网格
    $("#gridTasks").kendoGrid({
                 // height: 300, // 删除这一行 ***
                    列： [                
                        { field: "MemberID", title: "Member ID", width: 60, groupable: false, hidden: true },
                        { 字段：“任务名称”，标题：“任务名称”，宽度：100 ，可分组：false }
                    ],
                    可分页：{
                        刷新：真，
                        页面大小：10，
                        页面大小：[10、20、50、100]，
                        按钮数：5，
                        消息：{
                            empty: "没有找到记录。",
                            显示：“{0}-{1} 个，共 {2} 个”
                        }
                    },
                    可排序：真，
                    可选：“多个”，
                    可滚动：真，
                    可过滤：真，
                    可分组：真，
                    数据源：任务数据源
                });

```

**解决方案2：**也为我工作。
- 更改dataBound javascript上的**k-grid-content高度：**

```

    数据绑定：函数（）{
                 $('#gridTasks .k-grid-content').height(300);
              }

```

# xpages - 基于字段值 xpages 计算的 Visible 属性

> ID：14514980
> 
> 赞同：0
> 
> 时间：2013-01-25T03:42:54.693
> 
> 标签：xpages

我是 xpages 的新手，并试图在我前进的过程中自学。我正在尝试学习如何根据多值字段是否包含字符串来执行计算的可见属性以隐藏对象。当公式为 !@Contains(Display; "SomeValue") 我将如何在 xpages SSJS 中执行此操作时，经典注释会隐藏。非常感谢您对新人的任何帮助。

```
 <?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core"
    pageTitle="Corporate Policy">
    <xp:table>
        <xp:tr>
            <xp:td rendered="false">

            </xp:td>
            <xp:td>
                <xp:inputText value="#{document1.Display}"
                    id="display">
                </xp:inputText>
            </xp:td>
        </xp:tr>
    </xp:table>
    <xp:br></xp:br>
    <xp:button value="Close" id="button1"
        style="margin-left:5.0px;margin-right:5.0px;margin-bottom:10.0px;margin-top:5.0px">
        <xp:eventHandler event="onclick" submit="true"
            refreshMode="complete" immediate="true" save="false">
        </xp:eventHandler>
    </xp:button>

    <xp:this.data>
        <xp:dominoDocument var="document1" formName="Policy"
            action="openDocument">
        </xp:dominoDocument>
    </xp:this.data>
    <xp:this.navigationRules>
        <xp:navigationRule outcome="xsp-success"
            viewId="/bcbsarequirements.xsp">
        </xp:navigationRule>
    </xp:this.navigationRules>

    <xp:button value="Edit Document" id="button2" style="margin-right:5.0px;margin-bottom:10.0px;margin-top:5.0px"><xp:eventHandler event="onclick" submit="true" refreshMode="complete">
    <xp:this.action>
        <xp:changeDocumentMode mode="autoEdit" var="document1"></xp:changeDocumentMode>
    </xp:this.action></xp:eventHandler></xp:button>
    <xp:panel style="height:auto;padding-left:5.0px;padding-right:5.0px;width:auto;padding-top:5.0px">
        <xp:panel
            style="background-color:rgb(192,192,192);text-align:center;font-weight:bold;font-size:12pt;font-style:italic;width:100%;height:25px;padding-top:3.0px;border-color:rgb(0,0,0);border-style:solid;border-width:medium">
            Corporate Policy
        </xp:panel>
        <xp:panel style="height:auto;border-color:rgb(128,128,128);width:100%;border-style:solid;margin-top:5.0px">
            <xp:table style="width:98%">
                <xp:tr>
                    <xp:td
                        style="border-color:rgb(192,192,192);border-style:dotted;border-width:thin;background-color:rgb(233,233,233);width:121.0px">
                        <xp:label value="Policy Name:" id="name_Label1"
                            for="name1" style="width:80.0px;font-weight:bold">
                        </xp:label>
                    </xp:td>
                    <xp:td
                        style="border-color:rgb(192,192,192);border-style:dotted;border-width:thin;width:210.0px">
                        <xp:inputText value="#{document1.Name}"
                            id="name1">
                        </xp:inputText>
                    </xp:td>
                    <xp:td style="width:16.0px"></xp:td>
                    <td style="width:148.0px;background-color:rgb(233,233,233);border-color:rgb(192,192,192);border-style:dotted;border-width:thin;font-weight:bold">
                        <xp:label value="Policy Number" id="nbr_Label1"
                            for="nbr1" style="width:99.0px">
                        </xp:label>
                    </td>
                    <td style="width:234.0px">
                        <xp:inputText value="#{document1.Nbr}"
                            id="nbr1">
                        </xp:inputText>
                    </td>
                </xp:tr>
                <xp:tr>
                    <xp:td
                        style="background-color:rgb(233,233,233);width:121.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:label value="Effective Date:"
                            id="effectiveDate_Label1" for="effectiveDate1"
                            style="font-weight:bold">
                        </xp:label>
                    </xp:td>
                    <xp:td style="width:210.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:inputText value="#{document1.EffectiveDate}"
                            id="effectiveDate1">
                        </xp:inputText>
                    </xp:td>
                    <xp:td style="width:16.0px"></xp:td>
                    <td style="width:148.0px;background-color:rgb(233,233,233);border-color:rgb(192,192,192);border-style:dotted;border-width:thin;font-weight:bold">
                        <xp:label value="Policy Owner:"
                            id="respParty_Label1" for="respParty1">
                        </xp:label>
                    </td>
                    <td style="width:234.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:inputText value="#{document1.RespParty}"
                            id="respParty1">
                        </xp:inputText>
                    </td>
                </xp:tr>
                <xp:tr>
                    <xp:td
                        style="background-color:rgb(233,233,233);width:121.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:label value="Revision Date:"
                            id="revisionDate_Label1" for="revisionDate1"
                            style="font-weight:bold">
                        </xp:label>
                    </xp:td>
                    <xp:td style="width:210.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:inputText value="#{document1.RevisionDate}"
                            id="revisionDate1">
                        </xp:inputText>
                    </xp:td>
                    <xp:td style="width:16.0px"></xp:td>
                    <td style="width:148.0px;background-color:rgb(233,233,233);border-color:rgb(192,192,192);border-style:dotted;border-width:thin;font-weight:bold">
                        <xp:label value="Executive Sponsor"
                            id="execSp_Label1" for="execSp1">
                        </xp:label>
                    </td>
                    <td style="width:234.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:inputText value="#{document1.ExecSp}"
                            id="execSp1">
                        </xp:inputText>
                    </td>
                </xp:tr>
                <xp:tr>
                    <xp:td style="width:121.0px;background-color:rgb(233,233,233);border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:label value="Category:" id="category_Label1"
                            for="category1" style="font-weight:bold">
                        </xp:label>
                    </xp:td>
                    <xp:td style="width:210.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:inputText value="#{document1.Category}"
                            id="category1">
                        </xp:inputText>
                    </xp:td>
                    <xp:td style="width:16.0px"></xp:td>
                    <td style="width:148.0px;background-color:rgb(233,233,233);border-color:rgb(192,192,192);border-style:dotted;border-width:thin;font-weight:bold">
                        <xp:label value="Committee Approval Date:"
                            id="cmApprDate_Label1" for="cmApprDate1">
                        </xp:label>
                    </td>
                    <td style="width:234.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:inputText value="#{document1.CmApprDate}"
                            id="cmApprDate1">
                        </xp:inputText>
                    </td>
                </xp:tr>
                <xp:tr>
                    <xp:td style="width:121.0px;background-color:rgb(233,233,233);border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:label value="Sub Category:"
                            id="subCategory_Label1" for="subCategory1" style="font-weight:bold">
                        </xp:label>
                    </xp:td>
                    <xp:td style="width:210.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:inputText value="#{document1.SubCategory}"
                            id="subCategory1">
                        </xp:inputText>
                    </xp:td>
                    <xp:td style="width:16.0px"></xp:td>
                    <td style="width:148.0px;background-color:rgb(233,233,233);border-color:rgb(192,192,192);border-style:dotted;border-width:thin;font-weight:bold">
                        <xp:label value="Last Reviewed Date:"
                            id="lastRevDt_Label1" for="lastRevDt1">
                        </xp:label>
                    </td>
                    <td style="width:234.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:inputText value="#{document1.LastRevDt}"
                            id="lastRevDt1">
                        </xp:inputText>
                    </td>
                </xp:tr>
                <xp:tr>
                    <xp:td style="width:121.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin;background-color:rgb(233,233,233)">
                        <xp:label value="Policy Status:"
                            id="polStatus_Label1" for="polStatus1" style="font-weight:bold">
                        </xp:label>
                    </xp:td>
                    <xp:td style="width:210.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:inputText value="#{document1.PolStatus}"
                            id="polStatus1">
                        </xp:inputText>
                    </xp:td>
                    <xp:td style="width:16.0px"></xp:td>
                    <td style="width:148.0px;background-color:rgb(233,233,233);border-color:rgb(192,192,192);border-style:dotted;border-width:thin;font-weight:bold">
                        <xp:label value="Review Frequency:"
                            id="reviewFreq_Label1" for="reviewFreq1">
                        </xp:label>
                    </td>
                    <td style="width:234.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:inputText value="#{document1.ReviewFreq}"
                            id="reviewFreq1">
                        </xp:inputText>
                    </td>
                </xp:tr>
                <xp:tr>
                    <xp:td style="width:121.0px;background-color:rgb(233,233,233);border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:label value="Inactive Date:"
                            id="inactDate_Label1" for="inactDate1" style="font-weight:bold">
                        </xp:label>
                    </xp:td>
                    <xp:td style="width:210.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:inputText value="#{document1.InactDate}"
                            id="inactDate1">
                        </xp:inputText>
                    </xp:td>
                    <xp:td style="width:16.0px"></xp:td>
                    <td style="width:148.0px;background-color:rgb(233,233,233);border-color:rgb(192,192,192);border-style:dotted;border-width:thin;font-weight:bold">
                        <xp:label value="Policy Owner E-mail Address:"
                            id="respEmail_Label1" for="respEmail1">
                        </xp:label>
                    </td>
                    <td style="width:234.0px;border-color:rgb(192,192,192);border-style:dotted;border-width:thin">
                        <xp:inputText value="#{document1.RespEmail}"
                            id="respEmail1">
                        </xp:inputText>
                    </td>
                </xp:tr>

            </xp:table>
            <xp:br></xp:br>
            <xp:table style="width:99.0%;padding-left:5.0px;padding-right:5.0px">
                <xp:tr>

                    <xp:td style="width:718.0px">
                        <xp:label value="Policy Statement:"
                            id="polStmt_Label1" for="polStmt1"
                            style="font-size:10pt;font-weight:bold;color:rgb(0,0,128)">
                        </xp:label>
                    </xp:td>
                </xp:tr>
                <tr>
                    <xp:td style="padding-left:15.0px;padding-right:15.0px;border-color:rgb(192,192,192);border-style:solid;border-width:thin;padding-top:2.0px;padding-bottom:2.0px">
                        <xp:inputRichText value="#{document1.PolStmt}"
                            id="polStmt1" style="width:98%;height:auto">
                        </xp:inputRichText>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td>
                        <xp:label value="Policy Rationale:"
                            id="polRat_Label1" for="polRat1"
                            style="color:rgb(0,0,128);font-weight:bold;font-size:10pt">
                        </xp:label>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td style="padding-left:15.0px;border-color:rgb(192,192,192);border-style:solid;border-width:thin;padding-right:15.0px;padding-top:2.0px;padding-bottom:0.0px">
                        <xp:inputRichText value="#{document1.PolRat}"
                            id="polRat1" style="width:98.0%">
                        </xp:inputRichText>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td>
                        <xp:label value="Policy Scope:"
                            id="polScope_Label1" for="polScope1"
                            style="font-size:10pt;color:rgb(0,0,128);font-weight:bold">
                        </xp:label>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td style="border-color:rgb(192,192,192);border-style:solid;border-width:thin;padding-left:15.0px;padding-right:15.0px">
                        <xp:inputRichText value="#{document1.PolScope}"
                            id="polScope1" style="width:98.0%;height:auto">
                        </xp:inputRichText>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td>
                        <xp:label value="Policy Guide:"
                            id="polGuide_Label1" for="polGuide1"
                            style="color:rgb(0,0,128);font-size:10pt;font-weight:bold">
                        </xp:label>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td style="padding-left:15.0px;padding-right:15.0px;border-color:rgb(192,192,192);border-style:solid;border-width:thin">
                        <xp:inputRichText value="#{document1.PolGuide}"
                            id="polGuide1" style="width:98.0%;height:auto">
                        </xp:inputRichText>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td>
                        <xp:label value="Associated Procedures:"
                            id="polProc_Label1" for="polProc1"
                            style="color:rgb(0,0,128);font-size:10pt;font-weight:bold">
                        </xp:label>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td style="padding-left:15.0px;padding-right:15.0px;border-color:rgb(192,192,192);border-style:solid;border-width:thin">
                        <xp:inputRichText value="#{document1.PolProc}"
                            id="polProc1" style="width:98%;height:auto">
                        </xp:inputRichText>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td>
                        <xp:label value="Monitoring:" id="polMon_Label1"
                            for="polMon1"
                            style="color:rgb(0,0,128);font-size:10pt;font-weight:bold">
                        </xp:label>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td style="padding-left:15.0px;padding-right:15.0px;border-color:rgb(192,192,192);border-style:solid;border-width:thin">
                        <xp:inputRichText value="#{document1.PolMon}"
                            id="polMon1" style="width:98%;height:auto">
                        </xp:inputRichText>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td>
                        <xp:label value="Definitions:"
                            id="polDef_Label1" for="polDef1"
                            style="color:rgb(0,0,128);font-size:10pt;font-weight:bold">
                        </xp:label>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td style="padding-left:15.0px;padding-right:15.0px;border-color:rgb(192,192,192);border-style:solid;border-width:thin">
                        <xp:inputRichText value="#{document1.PolDef}"
                            id="polDef1" style="height:auto;width:98.0%">
                        </xp:inputRichText>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td>
                        <xp:label id="polDef_Label2" for="polDef2"
                            style="color:rgb(0,0,128);font-size:10pt;font-weight:bold">
                            <xp:this.value><![CDATA[Links & References:]]></xp:this.value>
                        </xp:label>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td style="padding-left:15.0px;padding-right:15.0px;border-color:rgb(192,192,192);border-style:solid;border-width:thin">
                        <xp:inputRichText value="#{document1.PolDef}"
                            id="polDef2" style="width:98%;height:auto">
                        </xp:inputRichText>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td>

                        <xp:label value="Relevant Governance Standards:"
                            id="polStds_Label1" for="polStds1"
                            style="font-size:10pt;color:rgb(0,0,128);font-weight:bold">

                        <xp:this.rendered><![CDATA[#{javascript:!@Contains(getComponent("display").getValue(), "RGStandards")}]]></xp:this.rendered></xp:label>
                    </xp:td>
                </tr>
                <tr>
                    <xp:td
                        style="padding-left:15.0px;padding-right:15.0px;border-color:rgb(192,192,192);border-style:solid;border-width:thin">

                        <xp:inputRichText value="#{document1.PolStds}"
                            id="polStds1" style="height:auto;width:98%">

                        </xp:inputRichText>
                    </xp:td>
                </tr>

            </xp:table>
        </xp:panel>
    </xp:panel>
</xp:view> 
```

例如，这些值是“Rationale”“AssocProc”“Definition”“Link”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:46:32.693

```
@Contains(getComponent("Display").getValue(), "SomeValue") 
```

# c++ - Boost Spitrt - 单结构，多规则

> ID：14514983
> 
> 赞同：1
> 
> 时间：2013-01-25T03:43:32.037
> 
> 标签：c++, boost, boost-spirit

鉴于 boost 文档中的[示例](http://www.boost.org/doc/libs/1_52_0/libs/spirit/doc/html/spirit/qi/tutorials/employee___parsing_into_structs.html)，我如何为同一个结构编写另一个规则？

例如，假设我希望解析器也接受如下规则：

```
start2 %=
        lit("employee2")
        >> '['
        >>  double_ >> ','
        >>  quoted_string >> ','
        >>  quoted_string >> ','
        >>  int_
        >>  ']'
        ; 
```

这样输入将接受格式的数据

```
employee { int, "string", "string", double} 
```

或者

```
employee2 [ double, "string", "string", int") 
```

在使用与示例中提供的相同结构时。这是否可能无需使用另一个“适配器”结构？如果是这样，怎么做？

# mysql - 如何自定义字符串返回

> ID：14514987
> 
> 赞同：1
> 
> 时间：2013-01-25T03:43:44.257
> 
> 标签：mysql

是否可以自定义从 mysql 数据库返回的字符串？我有一个图像名称字段，我想将它与我的目录路径一起加入。

```
SELECT * FROM brand
//row return.
id    image_name
1    image1.jpg

//i would like to have my return like
id    image_name
1    upload/image1.jpg 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:47:48.677

您正在寻找的是串联。有关 MySQL concat，请参阅[此内容。](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)

基本上，你可以做

```
SELECT CONCAT('/path/to/dir/', filename) as `file_name`
FROM brand 
```

这将返回 /path/to/dir/filename

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T03:47:57.313

试试这个查询：

```
SELECT id,
       CONCAT('upload/', image_name) AS `file_name`
FROM   band 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T03:55:20.783

使用 concat() 函数根据需要自定义字符串。

[http://sqlfiddle.com/#!2/a2581/4317](http://sqlfiddle.com/#!2/a2581/4317)

`select id, concat('upload', image_name) from tbl;`

这里是源[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)

# html - CSS3 HSL - 饱和度值（仅限）

> ID：14514989
> 
> 赞同：3
> 
> 时间：2013-01-25T03:43:54.240
> 
> 标签：html, css

我有一个名为“按钮”的类，我只是将它用于所有悬停元素。我的大多数按钮都是黑色（背景色），并且 .button:hover 将项目的背景色值更改为灰色。

但是，我的一些按钮具有随机颜色，因此当它们的背景颜色变为浅灰色时它们会失去效果。出于这个原因，我想更改悬停项目的“饱和度”值，而不是修改整个颜色。这样，悬停效果将基于基色..

我在想......是否可以更改背景颜色的“饱和度”值（仅），以便我的悬停效果仍然对随机颜色有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T15:53:21.713

使用[过滤器](https://developer.mozilla.org/en-US/docs/CSS/filter)目前似乎只适用于基于 webkit 的浏览器。

```
-webkit-filter: saturate(3);
filter: saturate(3); 
```

[演示](http://jsfiddle.net/YD5KD/1/show)| [来源](http://jsfiddle.net/YD5KD/1/)

将饱和度滤镜与亮度相结合似乎效果最好，黑色受到明显影响

```
-webkit-filter: brightness(0.2) saturate(3);
filter: brightness(0.2) saturate(3); 
```

[演示](http://jsfiddle.net/YD5KD/show)| [来源](http://jsfiddle.net/YD5KD/)

附加演示：[http ://html5-demos.appspot.com/static/css/filters/index.html](http://html5-demos.appspot.com/static/css/filters/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:53:54.073

这个问题有两种解决方案：

首先，使用具有白色到透明渐变的透明 png。在 onHover 上，将图像应用到按钮上。我还没有尝试过，但它看起来很有希望。

其次，使用 css inset 阴影。通过正确设置参数，您可以轻松管理渐变效果。

您还可以使用 rgba(r,g,b,a) 更改底层按钮颜色。但请记住，按钮的文本值也会受到影响，给您带来可用性问题。

# php - MYSQL将旧列添加为新表中的行

> ID：14514991
> 
> 赞同：1
> 
> 时间：2013-01-25T03:44:25.973
> 
> 标签：php, mysql

我在数据库中有新表来跟踪标签，如下所示：

```
 TAG NAME | IMAGE ID 

    funny       570
    funny       571
    dog         649 
```

我有旧表来跟踪标签，如下所示：

```
TAG ID | TAG NAME | IMAGES IDS

11       funny       570,571,572,573,574,575,576,577,578,579,580,581,58...
12       dog         649,650,651,652,653,654,655,656,657,658,659,660,66...
13       cat         844,845,846,847,848,849,850,851,852,853,854,855,85... 
```

我需要将所有旧图像 ID/相关标签添加到新表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T03:57:18.377

如果我没记错的话，您想将旧表记录添加到新表中。

因此，您需要做的就是查询旧表并分解 imgid 并遍历分解后的字符串并将其添加到新表中。

**示例代码。**

```
<?php

    $query = mysqli_query("SELECT * FROM oldTable")or die(mysqli_error());
    while($row = mysql_fetch_assoc($query))
    {
        $ids = explode(",",$row['imageID']);

        foreach($ids as $newImgId)
        {
            $Insert_query = mysqli_query("INSERT INTO NEWTABLE ('tagname','img_id') VALUES ('".$row['tag']."','".$newImgId."')")or die(mysqli_error());
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T03:57:34.233

您必须获取每一行并循环并插入，如下所示。

1.  从数据库中获取第一行。

2.  使用[explode](http://php.net/manual/en/function.explode.php)将图像 ID 分解为数组。

3.  循环遍历展开的数组并使用相应的标签名称插入它们。

    foreach()

    {

    //这个循环处理记录

    //循环直到记录结束

    //在这里爆炸

    foreach()

    {

    //循环并插入爆炸数组到数据库

    }

    }

# php - PHP Zend Session代码逆向讲解

> ID：14514992
> 
> 赞同：1
> 
> 时间：2013-01-25T03:44:39.390
> 
> 标签：php, zend-framework, session, zend-session

我正在查看 Zend_Session 的代码，试图更好地理解如何实现会话启动。在代码中，他们做了一些我不太理解的事情。

```
$hashBitsPerChar = ini_get('session.hash_bits_per_character');          
if (!$hashBitsPerChar) {
    $hashBitsPerChar = 5;
}           
switch($hashBitsPerChar) {
    case 4: $pattern = '^[0-9a-f]*$'; break;
    case 5: $pattern = '^[0-9a-v]*$'; break;
    case 6: $pattern = '^[0-9a-zA-Z-,]*$'; break;
}           
if(!preg_match('#'.$pattern.'#', $id)){             
    session_id(md5(session_id()));              
    $regenerateId = true;
} 
```

我难以理解的是为什么他们的模式没有（**^**），然后如果它不匹配，他们会在开始会话之前创建一个临时会话 ID。这对我来说没有意义 - 为什么他们要对没有进行预赛`0-9a-zA-Z-,`？我只是不太明白这里发生了什么，并想了解。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:27:35.173

正则表达式中的插入符号不会反转模式；它是匹配行首的锚点。

根据为 配置的值`session.hash_bits_per_character`，该方法选择特定的正则表达式（零个或多个匹配的`[0-9a-f]`、`[0-9a-v]`或`[0-9a-zA-Z-,]`）作为会话标识符识别模式。

如果该模式与当前会话标识符没有匹配（`!preg_match(...)`）（如果它不匹配三个模式之一），则重新生成会话标识符；当前会话标识符的 MD5 散列成为新的会话标识符，并设置一个标志以指示已发生重新生成。

# c - 重新打开具有其他访问权限的文件描述符？

> ID：14514997
> 
> 赞同：14
> 
> 时间：2013-01-25T03:45:19.520
> 
> 标签：c, linux

假设操作系统是 linux。假设我打开一个文件进行写入并获得一个文件描述符`fdw`。是否可以获得另一个文件描述符`fdr`，对文件具有只读访问权限而无需`open`再次调用？我不想调用的原因`open`是底层文件可能已被其他进程在文件系统中移动甚至取消链接，因此重复使用相同的文件名对于此类操作是不可靠的。所以我的问题是：如果只给定一个文件描述符，是否仍然可以打开具有不同访问权限的文件描述符？ `dup`或者`dup2`不改变访问权限，我想。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-25T04:42:13.743

是的！诀窍是通过`/proc/self/fd/n`. 据我所知，这是一个仅限 linux 的技巧。

运行这个程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main() {
    FILE* out_file;
    FILE* in_file;
    char* dev_fd_path;
    char buffer[128];

    /* Write “hi!” to test.txt */
    out_file = fopen("test.txt", "w");
    fputs("hi!\n", out_file);
    fflush(out_file);

    /* Delete the file */
    unlink("test.txt");

    /* Verify that the file is gone */
    system("ls test.txt");

    /* Reopen the filehandle in read-mode from /proc */
    asprintf(&dev_fd_path, "/proc/self/fd/%d", fileno(out_file));
    in_file = fopen(dev_fd_path, "r");
    if (!in_file) {
        perror("in_file is NULL");
        exit(1);
    }
    printf("%s", fgets(buffer, sizeof(buffer), in_file));

    return 0;
} 
```

它将一些文本写入文件，将其删除，但保持文件描述符打开，然后通过不同的路径重新打开它。直到持有最后一个文件描述符的最后一个进程将其关闭，文件才真正被删除，在此之前，您可以通过`/proc`.

* * *

感谢我的老老板 Anatoly 在我删除了一些重要文件时教我这个技巧，幸运的是这些文件仍然被另一个进程附加！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-25T04:05:01.220

不，[fcntl](http://www.kernel.org/doc/man-pages/online/pages/man2/fcntl.2.html)调用不允许您在打开的文件描述符上设置读/写位，从现有文件描述符获取新文件描述符的唯一方法是使用重复功能。[对dup/dup2/dup3](http://linux.die.net/man/2/dup2)（和）的调用`fcntl`不允许您更改文件访问模式。

注意：这适用于 Linux，但一般不适用于其他 Unix。例如，在 HP-UX 中，[参见[(1)](http://h20000.www2.hp.com/bc/docs/support/SupportManual/c02261726/c02261726.pdf)和[(2)](http://h20000.www2.hp.com/bc/docs/support/SupportManual/c02261727/c02261727.pdf) ]，您可以`fcntl`使用 F_SETFL 在打开的文件描述符上更改读/写位。然而，由于创建的文件描述符`dup`共享相同的状态标志，因此更改其中一个的访问模式必然会更改另一个的访问模式。

# jquery - 停止所有声音 Soundcloud

> ID：14514998
> 
> 赞同：0
> 
> 时间：2013-01-25T03:45:19.490
> 
> 标签：jquery, soundcloud

我已经使用 Anything Slider + Soundcloud 建立了一个小画廊。你可以在这里看到它：www.diasporadu.com（多媒体部分）。问题是，当我隐藏“mp3content” div 时，我无法停止背景声音。到目前为止，我的代码如下所示：

```
$('#mp3content').hide();

$('#mp3').click(function(){
$('#mp3content').fadeIn('slow');
});

$('#mp3close').click(function(){
$('#mp3content').fadeOut('slow'); 
}); 
```

此代码仅显示/隐藏 div“mp3content”，其中包含一个带有所有播放列表的滑块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T13:39:48.280

你是如何嵌入声音的？如果您使用 Widget，则可以使用[Widget API](http://developers.soundcloud.com/docs/api/html5-widget)来控制播放。否则，您可以考虑使用[Javascript SDK](http://developers.soundcloud.com/docs/api/sdks#javascript)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T03:52:17.307

您可以像这样暂停声音云播放器

```
$('.sc-player.playing a.sc-pause').click(); 
```

# styling - 将 Css 样式添加到 slickgrid 中的已编辑单元格

> ID：14514999
> 
> 赞同：0
> 
> 时间：2013-01-25T03:45:21.713
> 
> 标签：styling, slickgrid

我只是一个初学者，我不知道如何在 slickgrid 中将 CSS 类添加到编辑的单元格中。我已经搜索并没有得到答案。

*   [单元格编辑后的 ​​SlickGrid 样式](https://stackoverflow.com/questions/14197784)
*   [将 CSS 样式分配给 Slickgrid 单元格](https://stackoverflow.com/questions/11591745)

我有这些步骤要做：

*   存储在使用 grid.onCellChange 事件编辑的变量中
*   使用 grid.setCssCellStyles 或 grid.addCellCssStyle 添加 css 样式。（或）通过构建自定义格式化程序。

有人可以为此提供示例代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T20:38:42.507

我完全按照第一个引用链接中的建议实现了这一点。传递给 SlickGrid.setCellCssStyles() 的第二个参数是一个以行号为键的散列，其值是另一个以列 id 为键的散列，其值为 css 类。

代码如下：

```
<style type="text/css">
    .slick-cell-modified {
        background-color: yellow;
    }
</style> 
```

```
<script>
    var modifiedCells = {};
    grid.onCellChange.subscribe(function (e, args) {
        if (!modifiedCells[args.row]) {
            modifiedCells[args.row] = {};
        }
        modifiedCells[args.row][this.getColumns()[args.cell].id] = "slick-cell-modified";
        this.setCellCssStyles("modified", modifiedCells);
        // ...update data view
    });
</script> 
```

请务必在保存后清除单元格 css 样式，以免突出显示的样式保留。

```
function saveChanges() {
    // ...
    grid.removeCellCssStyles("modified");
    modifiedCells = {};
} 
```