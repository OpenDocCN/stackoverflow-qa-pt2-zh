# StackOverflow 问答 14230000-14230999

# javascript - JavaScript 变量范围

> ID：14230002
> 
> 赞同：2
> 
> 时间：2013-01-09T07:08:11.837
> 
> 标签：javascript, oop, instance-variables

我正在尝试构建一个简单的应用程序，我将在其中创建 Box 对象的多个实例，该对象将控制和操作自己的数据。但是，我无法弄清楚如何创建全局变量以在每个单独的对象中使用，并且它是相关的原型......

例如，我试图引用自身......

```
function Box( boxData ) {
    // References the Box instance as I want.
    console.log( this );

    // I need to access this later...
    var boxName = boxData.name;

    var canvas = $( '#rm-' + boxData.id ).find( 'canvas' )[0];
    $( canvas ).on( 'mousedown', this.onMouseDownHandler );
}

Box.prototype.onMouseClickHandler = function( event ) {
    // 'boxName' is undefined as 'this' references 'event.target'
    console.log( this.boxName );
} 
```

请记住，它不能充当单例，因为我将在任何一个时间点拥有它的多个实例。

编辑：

我在构造函数中添加了事件监听器，更新了上面的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:17:06.310

对于您的画布使用 Box 实例作为它的上下文，您需要绑定它。

你可以尝试这样的事情：

```
function Box( boxData ) {
    // References the Box instance as I want.
    console.log( this );

    // I need to access this later...
    var boxName = boxData.name;

    // public property boxName
    this.boxName = boxName;

    var $canvas = $( '#rm-' + boxData.id ).find( 'canvas' );
    $canvas.on( 'mousedown', this.onMouseDownHandler.bind(this) );
    // ----------------------------------------------^
    // this bind will prevent the event use canvas element as context
}

function Room() {
    // some stuff
}

Room.prototype = new Box({name: 'this will always be my rooms box'});

Room.prototype.onMouseClickHandler = function( event ) {
    // 'boxName' is undefined as 'this' references 'event.target'
    console.log( this.boxName );
} 
```

现在你可以试试这个：

```
var foo = new Room();
foo.onMouseClickHandler(); 
```

您的控制台将记录`this will always be my rooms box`.

你要记住 Room 扩展了 Box 的一个实例，所以如果你这样做：

```
foo.boxName = 'my name is what?!';

// you changed the this so the prototype will get the new value:
foo.onMouseClickHandler(); // 'my name is what?!' 
```

**编辑（问题升级后）**

只需`this.boxName`使用`var boxName`：

```
function Box( boxData ) {
    // References the Box instance as I want.
    console.log( this );

    // public property boxName
    this.boxName = boxName;
} 
```

如果你想为其他对象添加一个 EventHandler 但保留你的 Box 上下文，你需要这样做：

```
var foo = newBox({boxName: 'foo'});
var bar = document.queryElementById('bar');

bar.addEventHandler('click', foo.onMouseClickHandler.bind(foo)); 
```

现在，如果您单击`bar`元素，来自 foo 的 onMouseClickHandler 将保持它的上下文。click 事件将通过 throw 参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:12:22.513

您创建全局变量作为全局对象（窗口）的属性。你可以有这样的东西：`window['box_instance_key']['name']`存储每个实例的名称。

```
function Box( boxData ) {
    // References the Box instance as I want.
    console.log( this );

    // I need to access this later...
    window.boxName = boxData.name;
    // or something like window[boxData.id]['boxName'] = boxData.name;
}

Room.prototype.onMouseClickHandler = function( event ) {
    // 'boxName' is undefined as 'this' references 'event.target'
    console.log( window.boxName );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:26:09.677

你实际上有两个问题。

> 可变范围

JS 中的变量总是具有函数作用域。构造函数中的局部变量将保持在构造函数的本地，不能在外部使用。

> 创建全局变量以在每个单独的对象中使用
> 
> 它不能充当单例

全局、静态变量似乎与您想要的相反。我猜你的意思是*公共*对象属性而不是*全局*变量。所以使用一个：

```
function Box( boxData ) {
    // References the Box instance as I want.
    console.log( this );

    // create a property to be accessed later...
    this.boxName = boxData.name;
} 
```

> “boxName”未定义为“this”引用“event.target”

是的，函数的上下文（仅）取决于它的调用。您将需要使用

```
 var that = this;
 ….addEventLister(…, function(event) {
      that.onMouseClick(); // "that" references the instance
 }); 
```

用于注册活动。

# iphone - 如何将流媒体视频存储在 iOS 的资源文件夹中？

> ID：14230005
> 
> 赞同：0
> 
> 时间：2013-01-09T07:08:31.303
> 
> 标签：iphone, ios, uiwebview, video-streaming, resourcebundle

如果我说到点子上，那么我的问题是，我想制作一个 Web 视图，它将在其中加载视频，当流开始时，我想将该视频数据下载/存储在应用程序的资源文件夹中。我该怎么做那？

请有人通过任何帮助帮助我。

BR

埃蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:31:46.420

在运行时，您无法将视频保存到资源文件夹，但您可以将文件保存到 NSDocuments 并使用 NSFileManagers 检索它们。通过此链接 [http://www.techotopia.com/index.php/Working_with_Files_on_the_iPhone](http://www.techotopia.com/index.php/Working_with_Files_on_the_iPhone)

尝试使用此代码保存文件

```
 NSArray *paths =NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES); 
 NSString *documentsDirectory = [paths objectAtIndex:0];                    
 NSString *filePath = [NSString stringWithFormat:@"%@/filename.MP4",documentsDirectory];
 NSData*   videoData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"your Url"]];
 [[NSFileManager defaultManager] createDirectoryAtPath:filePath withIntermediateDirectories:YES attributes:nil error:nil];
 [filemanager createFileAtPath:filePath contents:videoData attributes:nil]; 
```

要检索：

```
 NSArray *paths =NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES); 
 NSString *documentsDirectory = [paths objectAtIndex:0];                    
 NSString *filePath = [NSString stringWithFormat:@"%@/filename.MP4",documentsDirectory];
    BOOL exists = [fm fileExistsAtPath:newDirectory isDirectory:&isDir];
    if (exists) {
     //Play Video with contents of file path. 

      } 
```

# cocos2d-iphone - 去除纹理

> ID：14230007
> 
> 赞同：0
> 
> 时间：2013-01-09T07:08:34.660
> 
> 标签：cocos2d-iphone

我在场景退出后删除精灵表时遇到了一些问题。

我基本上遵循 Ray 的指示，在 init 中删除未使用的纹理

```
[[CCSpriteFrameCache sharedSpriteFrameCache] removeUnusedSpriteFrames];
[[CCTextureCache sharedTextureCache] removeUnusedTextures];
[[CCDirector sharedDirector] purgeCachedData]; 
```

在 dealloc 我有

```
CCTexture2D * texture = spriteNode.textureAtlas.texture;
[[CCSpriteFrameCache sharedSpriteFrameCache] removeSpriteFramesFromTexture:texture];
[[CCTextureCache sharedTextureCache] removeTexture:texture]; 
```

[参考](http://www.raywenderlich.com/forums/viewtopic.php?t=8&p=4378#p2287)

如果到场景的过渡不是当前场景，这可以正常工作。但是当我试图“重新启动”当前场景时它崩溃了。

```
[[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:2.0 scene:[currentScene scene] withColor:ccBLACK]]; 
```

似乎问题在于，当用“新”当前场景替换当前场景时。“新”当前场景 init 在当前场景被释放之前被调用。因此，我的“新”当前场景精灵表在创建后立即被释放。

在这种情况下，如何正确删除精灵表？还是我重新启动当前场景的方法不正确？

更新：我试图按照建议添加加载场景，但无法使其工作..这是我的加载场景

```
+(CCScene *) scene
{
// 'scene' is an autorelease object.
CCScene *scene = [CCScene node];

// 'layer' is an autorelease object.
LoadingLayer * layer = [[[LoadingLayer alloc]init]autorelease];

// add layer as a child to scene
[scene addChild: layer];

// return the scene
return scene;
}

-(id) init{

  if(self = [super init]){

    winSize = [CCDirector sharedDirector].winSize;
    CCLabelTTF * loadingLabel = [CCLabelTTF labelWithString:@"Loading..." fontName:@"Marker Felt" fontSize:30];
    }

    loadingLabel.position = ccp(winSize.width/2, winSize.height/2);
    [loadingLayer addChild:loadingLabel];

    [self scheduleUpdate];

  }
return self;
}

-(void) update:(ccTime)dt{

 [self unscheduleUpdate];
 NSString * bgPlist = @"backgroundsIPAD.plist";;
 NSString * hudPlist = @"hudSpritesIPAD.plist"
 NSString * gameOnePlist = @"gameOneSpritesIPAD.plist";

// load background
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:bgPlist];

// load hud
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:hudPlist];

// load sprites
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:gameOnePlist];

 [[CCDirector sharedDirector] replaceScene:[CCTransitionFade transitionWithDuration:2.0 scene:[GameTwoLayer scene] withColor:ccBLACK]];
} 
```

在这种情况下，这会给我带来 GameTwoLayer 的飞溅，然后是黑屏。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:21:20.107

实际上，新场景的 init 在您当前场景被释放之前运行。有道理，因为您正在当前场景对象中创建一个新的场景对象。

出于这个原因，您不应该在初始化期间删除纹理等。这不是这样做的正确地方。一直在使用资源的场景应该负责移除这些资源。移除纹理等应该在场景的 dealloc 方法中完成。

如果您需要避免内存中的两个场景同时出现内存峰值，则必须添加一个中间“加载”场景，以便在下一个场景开始之前释放前一个场景。

# c# - Linq lambda 表达式中的布尔短路评估

> ID：14230012
> 
> 赞同：6
> 
> 时间：2013-01-09T07:09:15.500
> 
> 标签：c#, linq, linq-to-sql, lambda

我有以下 Linq lambda 表达式：

```
private IEnumerable<SubjectSelectorSubjectGroup> GetSubjectList()
{
    User user = db.Users.Find(WebSecurity.CurrentUserId);
    return db.RequiredSubjects.Where(r => !r.Subject.Name.Contains("Home"))
                              .GroupBy(r => r.Subject)
                              .OrderByDescending(r => r.Count())
                              .Select(r => new SubjectSelectorSubjectGroup()
                              {
                                  SubjectId = r.Key.SubjectId,
                                  SubjectName = r.Key.Name,
                                  IsInFavourites = HttpContext.Current.Request.IsAuthenticated &&
                                                  (user.Elective1 != null && user.Elective1.SubjectId == r.Key.SubjectId ||
                                                   user.Elective2 != null && user.Elective2.SubjectId == r.Key.SubjectId ||
                                                   user.Elective3 != null && user.Elective3.SubjectId == r.Key.SubjectId),
                                  Occurrences = r.Count()
                              });
} 
```

当用户未登录时`user`，此函数中的变量为空。这应该不是问题，因为短路布尔评估*应该*处理这个问题。问题是，它没有！相反， a`System.NullReferenceException`被抛出。

当用户为 null`HttpContext.Current.Request.IsAuthenticated`时返回 false。我通过注释掉引用`user`变量的括号部分来检查这一点，然后表达式正确计算。

有谁知道为什么在这种情况下实际上不需要时`Linq to Sql`尝试取消引用变量？`user`有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T07:14:17.767

整个表达式被转换为 SQL 并被评估为 SQL，这意味着`&&`运算符没有按预期短路。

您可以通过构建`ElectiveX.SubjectId`要搜索然后`tmpList.Contains(r.Key.SubjectId)`在查询中使用的列表或数组来解决问题。这将被翻译成一个`WHERE IN (...)`SQL 表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T08:54:29.813

这是我使用[Anders Abel](https://stackoverflow.com/users/280222/anders-abel)给出的建议解决这个问题的方法。

```
private IEnumerable<SubjectSelectorSubjectGroup> GetSubjectList()
{
    List<string> userSubjects = new List<string>();
    if (HttpContext.Current.Request.IsAuthenticated)
    {
        User user = db.Users.Find(WebSecurity.CurrentUserId);
        if (user.Elective1 != null) { userSubjects.Add(user.Elective1.SubjectId); }
        if (user.Elective2 != null) { userSubjects.Add(user.Elective2.SubjectId); }
        if (user.Elective3 != null) { userSubjects.Add(user.Elective3.SubjectId); }
    }

    return db.RequiredSubjects.Where(r => !r.Subject.Name.Contains("Home"))
                              .GroupBy(r => r.Subject)
                              .OrderByDescending(r => r.Count())
                              .Select(r => new SubjectSelectorSubjectGroup()
                              {
                                   SubjectId = r.Key.SubjectId,
                                   SubjectName = r.Key.Name,
                                   IsInFavourites = userSubjects.Contains(r.Key.SubjectId),
                                   Occurrences = r.Count()
                              });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T07:13:59.453

我能想到这种行为的唯一原因是您的查询被**转换为 SQL** *（因为它的 LINQ to SQL）*，并且`user.Elective`它正在尝试生成 CASE 语句。这就是您收到错误的原因。

# php - 为 EFlot 图表传递数据

> ID：14230018
> 
> 赞同：0
> 
> 时间：2013-01-09T07:09:33.710
> 
> 标签：php, yii

我正在尝试生成一个简单的温度数据折线图。数据库中的表如下所示：

```
CREATE TABLE temperature(
      id INTEGER PRIMARY KEY NOT NULL,
      locationId INTEGER,
      value REAL NOT NULL,
      createDate DATETIME NOT NULL,
      FOREIGN KEY(locationId) REFERENCES location(id)); 
```

我感兴趣的列是：`createDate`和`value`。

我正在尝试使用[EFlot](http://www.yiiframework.com/extension/flot/)，它希望以数组数组的形式提供数据，例如：

```
 'data'=>array(
                array(1,1),
                array(2,7),
                array(3,12),
                array(4,32),
                array(5,62),
                array(6,89),
            ), 
```

当我使用这样的静态数组时，我的浏览器会显示如下脚本数据：

```
... [{'label':'line','data':[[1,1],[2,7],[3,12],[4,32],[5,62],[6,89]], ... 
```

并且图表自然可以正常工作。

但是，我无法从模型中动态地制定数据。我尝试了以下示例：

```
$arr = Yii::app()->db->createCommand('SELECT id, value FROM temperature')->queryAll();
....
'data'=>$arr, 
```

评估为：

```
... $.plot($('#yw2'), [{'label':'line','data':[{'id':'949','value':'20.812'},{'id':'950','value':'20.875'},{'id':'951','value':'21.125'},{'id':'952','value':'21.25'},{'id':'953','value':'21.312'},{'id':'954','value':'21.375'}], .... 
```

并且图表不起作用。

我想，最终目标是为模型提供一个功能，所以我可以像这样使用它：

```
...
'data'=>$model->getGraphData(),
.... 
```

但是，如何构造这样的函数呢？它应该返回什么才能使该图表正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:33:20.383

好的，我整理好了。

1.  在模型中，我添加了以下功能：

    ```
    public function getGraphData()
    {
            $criteria=new CDbCriteria;
        $criteria->addCondition('createDate > datetime(\'now\', \'-1 day\', \'localtime\')');

            $sort = new CSort();
            $sort->defaultOrder='createDate';

            return new CActiveDataProvider($this, array(
                    'criteria'=>$criteria,
                    'sort'=>$sort,
                    'pagination'=>false,
            ));
    } 
    ```

2.  而在视图中

    ```
    foreach($model->getGraphData()->getData() as $row) {
                    $data[]=array($row['id'],$row['value']);
            };

    $this->widget('application.extensions.EFlot.EFlotGraphWidget',
        array(
            'data'=>array(
                array(
                    'label'=> 'line',
                    'data'=>$data,
                    'lines'=>array('show'=>true),
                    'points'=>array('show'=>true),
                ),
            ),
            'options'=>array(
                    'legend'=>array(
                        'position'=>'nw',
                        'show'=>true,
                        'margin'=>10,
                        'backgroundOpacity'=> 0.5
                        ),
            ),
            'htmlOptions'=>array(
                   'style'=>'width:800px;height:400px;'
            )
        )
    ); 
    ```

它有效:-)

# c - 对等号和运算符使用宏

> ID：14230019
> 
> 赞同：2
> 
> 时间：2013-01-09T07:09:35.497
> 
> 标签：c

最近在 C 语言上刷新了我的自我。从一些博客中，我阅读了诸如“==”和“&&”之类的运算符会导致程序员分别使用“=”和“&”而容易出错，并且程序员花了很多时间来查找和解决问题.

我认为为“==”和“&&”定义宏将解决这个问题。

```
#define EQ ==
#define AND &&

int main(void) 
{
    int a = 1 , b = 2 ; 

    if(a EQ 1 AND b EQ 2 ){
        //  some statements
    }

} 
```

可读性是否混乱？有没有其他解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:19:33.180

就个人而言，我不喜欢触及该语言的基本语法，例如创建宏来替换 C 关键字或运算符。

在这种情况下，它非常简单，并且可能不会改变可读性，但是其他程序员（如果您不是唯一维护代码的人）看到这些宏可能会想为他们*认为*模棱两可或错误的其他东西创建其他宏易于。

所以我不会在 C 中的关键字/运算符级别支持宏。
但是您可以使用一些编译器选项来显示何时存在歧义，例如

```
 gcc -Wall prog.c -o prog 
```

`Wall`启用所有警告（您可以使用 gcc 优化警告）。这取决于您使用的编译器。

例如

```
 int a=1,b=2;
  if (a = b) { ... } 
```

会给出一个警告，将 gcc 作为带有该`-Wall`选项的编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:25:47.743

试图重新定义 C 语言总是一个非常糟糕的主意。通过宏替换操作符会使代码对其他 C 程序员不可读。

关于&&意外变成&，我怀疑是不是问题，至少我从来没有遇到过这个问题。标准 C 中已经有替代的逻辑运算符，如果有的话，你应该使用它们。

> 标头`<iso646.h>`定义了以下 11 个宏（在左侧），它们扩展为相应的标记（在右侧）：

```
and     &&
and_eq  &=
bitand  &
bitor   |
compl   ~
not     !
not_eq  !=
or      ||
or_eq   |=
xor     ^
xor_eq  ^= 
```

== 危险的想法是一个非常过时的想法。在 80 年代，困惑的程序员发明了一些晦涩难懂的规则，例如“在进行比较时始终将文字放在变量前面”，即`if (0 == var)`.

避免与此相关的错误的正确方法是避免在条件内赋值。一旦您采用了这种良好的编码风格，就很容易避开此类错误。自 1990 年 Turbo C 发布以来，发现它们一直不是问题。从那时起，当您在 if 语句中进行赋值时，几乎每个编译器都能够警告“可能不正确的赋值”。

在现代编程中，所有专业程序员都使用静态分析器工具来发现各种编译时错误。如果您的编译器由于某种原因无法发现此错误，那么静态分析器肯定会。

所以回答你的问题：是的，它很混乱，使代码更容易出错，可读性更差。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T07:17:44.483

这是一个坏主意，最好的办法是在激活所有警告标志（-Wall）的情况下进行编译，并确保您可以在没有警告的情况下编译代码

和TDD。它更多的是关于语法的实践

我会推荐这本书“代码完成”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T07:16:30.980

不，这不是一个特别好的主意。这意味着任何有经验的 C 程序员在阅读您的代码之前都必须找出其含义`EQ`和`AND`含义，然后才能阅读您的代码。

当然，`==`可能容易出错，但恕我直言，解决该问题的最佳方法是（a）在编译器中打开警告，以及（b）*小心*。

（标准头文件`<iso646.h>`提供了一个`and`扩展为 的宏`&&`，但它没有为 提供宏`==`。重点`<iso646.h>`是支持某些字符由于旧的国家变体字符集而难以使用的系统，而不是提供更具可读性的替代方案.)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T07:16:45.953

实际上，我认为这里没有问题。如果检测到可疑内容，任何现代编译器都会发出警告。

# php - zend_mail 中的返回路径问题

> ID：14230023
> 
> 赞同：1
> 
> 时间：2013-01-09T07:09:46.037
> 
> 标签：php, zend-framework, email, smtp, zend-mail

你能告诉我为什么我使用 zend_mail 设置 returnPath 收到的电子邮件必须使用 smtp trasport 返回路径标题（我在 gmail 中查看它们）：

```
Return-Path: <bounce@domain.com> //I think this is added by server
.....
Return-Path: bounce@domain.com //I think this is cause by returnPath 
```

我这样设置返回路径：

```
$mailer->setReturnPath('bounce@domain.com'); 
```

我这样设置传输：

```
$emailConfig = $this->getOption('email');                                   
$transport = new Zend_Mail_Transport_Smtp($emailConfig['server'], $emailConfig);
Zend_Mail::setDefaultTransport($transport); 
```

如果我没有设置 returnPath 服务器，则添加与我设置 From 标头相同的 returnPath。它是 Zend_Mail 中的错误还是什么？我的理解是，服务器将添加与 MAIL_FROM 中使用的返回路径头相同的返回路径标头，并且 setReturnPath 不应在菜单上添加标头，而仅将其保存以用于 MAIL_FROM？它在 Zend_Mail_Transport_Smtp 更改代码注释行：

```
/**
 * Sets the Return-Path header of the message
 *
 * @param  string    $email
 * @return Zend_Mail Provides fluent interface
 * @throws Zend_Mail_Exception if set multiple times
 */
public function setReturnPath($email)
{
    if ($this->_returnPath === null) {
        $email = $this->_filterEmail($email);
        $this->_returnPath = $email;

        //This line presents in Zend_Framework
        //I comment this like I get only one return-path the same as
        //set using setReturnPath method of Zend_Mail
        //$this->_storeHeader('Return-Path', $email, false);
    } else {
        /**
         * @see Zend_Mail_Exception
         */
        require_once 'Zend/Mail/Exception.php';
        throw new Zend_Mail_Exception('Return-Path Header set twice');
    }
    return $this;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-25T12:10:23.923

在 Zend 中，您可以通过显式选择传输将必要的附加参数传递给 sendmail：

```
$tr = new Zend_Mail_Transport_Sendmail('-fmail@example.com');
 $_mail = new Zend_Mail();
 $_mail->setDefaultTransport($tr); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-09T11:58:51.607

尝试这个：

```
$mail->addHeader('Return-path', 'email@address.com'); 
```

# google-app-engine - 将 Google App 映射到 google for business 的非主要帐户

> ID：14230024
> 
> 赞同：0
> 
> 时间：2013-01-09T07:09:46.980
> 
> 标签：google-app-engine

我使用 Google 应用引擎创建了一个网站，我想将其映射到我自己的域。

我已按照给出的说明将该应用程序添加为服务。

然后我尝试为该应用程序添加一个新 URL，以便它可以在 www.mydomain.com 上找到。

当我尝试添加此域时，我如何收到错误“不允许使用术语 mydomain.com”。

我已经搜索了所有内容，似乎无法找出问题所在。我已经联系了支持人员，他们说他们无法帮助我处理非核心服务，即使这是控制面板中给出的错误。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:04:11.157

我假设您有该域的 google 应用程序帐户，并且正在尝试将 gae 应用程序绑定到该域。如果是这样，只输入“www”。它会将应用程序添加到 www.mydomain.com。通常无法将应用程序添加到根目录 (mydomain.com)。（但对于主域，可以设置重定向）

# c# - 人脸识别 OpenCV 2.2

> ID：14230027
> 
> 赞同：0
> 
> 时间：2013-01-09T07:10:22.850
> 
> 标签：c#, asp.net, opencv, emgucv

嗨，我正在使用代码进行人脸检测。但我不会继续进行人脸识别。但我在这里得到堆栈，下一步如何。但是，我使用的是 emgu 2.2 版

```
 if (faces.Length > 0)
            {
                foreach (var face in faces)
                {
                    ImageFrame.Draw(face.rect, new Bgr(Color.Green), 2);
                    //Extract face 
                    ExtractedFace = new Bitmap(face.rect.Width, face.rect.Height);

                    FaceConvas = Graphics.FromImage(ExtractedFace);
                    FaceConvas.DrawImage(GrayBmpInput, 0, 0, face.rect, GraphicsUnit.Pixel); 
                    ExtcFacesArr[faceNo] = ExtractedFace;
                    faceNo++;

                }

                faceNo = 0; 
                picExtcFaces.Image = ExtcFacesArr[faceNo];

                CamImageBox.Image = ImageFrame;
            }
        } 
```

我应该在哪里继续进行人脸识别并在 C# 代码中有任何好的在线参考？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:02:26.110

您的代码几乎是正确的，但我认为您不知道下一步该做什么。我正在我的一个应用程序中进行面部识别，以便在脸上显示面具。我正在这样做。

```
Image mask = Image.FromFile("mask.png");
public Bitmap getFacedBitmap(Bitmap bbb)
    {
        using (Image<Bgr, byte> nextFrame = new Image<Bgr, byte>(bbb))
        {
            if (nextFrame != null)
            {
                // there's only one channel (greyscale), hence the zero index
                //var faces = nextFrame.DetectHaarCascade(haar)[0];
                Image<Gray, byte> grayframe = nextFrame.Convert<Gray, byte>();
                //Image<Gray, Byte> gray = nextFrame.Convert<Gray, Byte>();

                var faces = grayframe.DetectHaarCascade(haar, 1.3, 2, HAAR_DETECTION_TYPE.SCALE_IMAGE, new Size(nextFrame.Width / 8, nextFrame.Height / 8))[0];
                if (faces.Length > 0)
                {
                   foreach (var face in faces)
                  {
                      //ImageFrame.Draw(face.rect, new Bgr(Color.Green), 2);
                      //                     
                      using(Graphics g = Graphics.FromImage(bbb))
                     {
                       g.DrawImage(mask,face.rect);
                       g.Save()
                     }
                  }

               }
           }
       }
    retun bbb;
  } 
```

# java - 在 localhost 的不同端口上部署 Web 服务和 Web 服务客户端

> ID：14230029
> 
> 赞同：0
> 
> 时间：2013-01-09T07:10:31.097
> 
> 标签：java, eclipse, web-services, axis2

我有使用 apache axis2 和 java w/eclipse 构建的 Web 服务。我还实现了一个 Web 服务客户端。我在 Eclipse 中将客户端作为 Java 应用程序运行，它与 Web 服务完美配合。但现在我想将它作为基于 Web 的客户端运行。当我部署时，它试图使用tomcat的默认端口（8080）。但是该端口已被 Web 服务使用。那么如何在与 Eclipse 不同的端口上运行部署我的客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:40:27.707

您在端口 8080 中运行的两个不同的 tomcat 实例中托管服务和客户端？更改一个实例的端口..

# mono - CorePlot MonoMac 绑定崩溃

> ID：14230031
> 
> 赞同：1
> 
> 时间：2013-01-09T07:10:33.707
> 
> 标签：mono, core-plot, monomac

我正在尝试为 monomac 使用 CorePlot 0.9 绑定，但这似乎是一项艰巨的任务。monotouch 示例构建和运行没有任何问题，但我不需要那个。

由于绑定中只有一个 CorePlotiOS.dll，我必须自己为 osx 构建一个，但首先，没有 bmake.exe，所以我必须先下载 monomac 源并自己构建它。然后我尝试构建 CorePlotOSX.dll 但这导致了一些编译问题。查看mono touch的构建脚本，我尝试使用这一行：

```
MONO_PATH=$(MONOMAC)/src mono $(MONOMAC)/src/bmac.exe -e -unsafe coreplot.cs -s=enums.cs -x=extras.cs -x=AssemblyInfo.cs  --sourceonly=list --tmpdir=osx -r:System.Drawing -r:MonoMac -lib:$(MONOMAC)/src -baselib:$(MONOMAC)/src/MonoMac.dll . 
```

那里有什么问题吗？

我已将问题简化为：

```
graph = new CPTPieChart(); 
graph.Title = "Test"; 
```

分配似乎仍然存在，但是每当我尝试访问该对象时，我都会崩溃：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_PROTECTION_FAILURE at 0x00000000bf887fac

VM Regions Near 0xbf887fac:
    Stack                  00000000b038d000-00000000b040e000 [  516K] rw-/rwx SM=COW  
--> Stack                  00000000bc088000-00000000bf888000 [ 56.0M] ---/rwx SM=NUL  
    Stack                  00000000bf888000-00000000c0088000 [ 8192K] rw-/rwx SM=COW  

Application Specific Information:
objc[17645]: garbage collection is OFF

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   com.apple.CoreFoundation        0x97c8aebc __CFStringEncodeByteStream + 12
1   com.apple.Foundation            0x9ac8ed49 -[NSString(NSStringOtherEncodings) getBytes:maxLength:usedLength:encoding:options:range:remainingRange:] + 263
2   com.apple.Foundation            0x9ac8e8ee bytesInEncoding + 213
3   com.apple.Foundation            0x9ac8e814 -[NSString(NSStringOtherEncodings) UTF8String] + 42
4   com.apple.CoreFoundation        0x97ce478c -[__NSCFString UTF8String] + 204
5   ???                             0x00f91208 0 + 16323080
6   ???                             0x030d708c 0 + 51212428
7   ???                             0x030d703c 0 + 51212348
8   ???                             0x016877d4 0 + 23623636 
```

有任何想法吗？运行 Mac OSX 10.7.5 顺便说一句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T15:14:49.680

好吧，那很难。经过几天与 xcode 和 monomac 的斗争，事实证明，没有加载原生 CorePlot 框架（动态库）。我不知道，我应该自己加载它（我是一个 monomac 新手，对不起......但它不是很丑陋，它以这种方式默默地失败了吗？？）

有两种方法可以做到这一点：要么

```
Dlfcn.dlopen ("CorePlot.framework/CorePlot", 2); // 2 = load now, 0 = lazy load 
```

或者`[assembly:MonoMac.RequiredFramework("CorePlot.framework/CorePlot")]`

# c# - 如何在 C# 中使用文件信息去除完整路径

> ID：14230035
> 
> 赞同：1
> 
> 时间：2013-01-09T07:10:52.923
> 
> 标签：c#

我是 C# 编程的新手。请建议我如何检索完整路径，但在我的代码中只使用 file.Name，因为我只想在我的 listBox 中输入文件名而不是完整路径

我的代码是：

```
listBox1.DataSource = GetFolder("..\\video\\");

private static List<string> GetFolder(string folder)
{
    List<string> FileList = new List<string>();

    var allFiles = new DirectoryInfo(folder).GetFiles("*.mpg", 
                                                    SearchOption.AllDirectories)
    foreach (FileInfo file in allFiles)
    {
        FileList.Add(file.FullName);             
    }    

    return FileList;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:23:30.510

如果我猜对了，您希望 FullPath 作为值，但只显示 FileName。为此，您可以使用`FileInfo`包含这两个值的 s 列表，并告诉 ListBox 哪个成员是值以及应该显示哪个成员：

```
this.listBox1.DisplayMember = "Name";
this.listBox1.ValueMember = "FullName";
listBox1.DataSource = GetFolder("..\\video\\");

Player.URL = Convert.ToString(listBox1.SelectedValue);  // Instead of SelectedItem

private static List<FileInfo> GetFolder(string folder)
{
    List<FileInfo> fileList = new List<FileInfo>();

    foreach (FileInfo file in new DirectoryInfo(folder).GetFiles("*.mpg", SearchOption.AllDirectories))
    {
       fileList.Add(file); 
    }    

    return fileList;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:13:15.390

```
FileInfo(path).Directory.FullPath 
```

您的代码的实际问题是此行缺少分号

```
var allFiles = new DirectoryInfo(folder).GetFiles("*.mpg", 
                                                    SearchOption.AllDirectories) 
```

它应该是

```
var allFiles = new DirectoryInfo(folder).GetFiles("*.mpg", 
                                                    SearchOption.AllDirectories); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:14:41.987

```
 FileList.Add(file.FullName); 
```

请像下面这样更改此行

```
 FileList.Add(file.Name ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T07:24:15.437

```
 listBox1.DataSource = GetFolder("..\\video\\");

  private static List<string> GetFolder(string folder)
  {
        List<string> FileList = new List<string>();

        var allFiles = new DirectoryInfo(folder).GetFiles("*.mpg", 
                                                SearchOption.AllDirectories)
        foreach (FileInfo file in allFiles)
        { 
              FileList.Add(file.Name);             
        }    

        return FileList;  
  } 
```

# jquery - jQuery 同位素选择/扩展的内部超链接

> ID：14230036
> 
> 赞同：1
> 
> 时间：2013-01-09T07:11:04.643
> 
> 标签：jquery, jquery-isotope

在这方面需要帮助，几天来一直在想办法让它工作。

参考这个演示[http://jsfiddle.net/8QkEw/313/](http://jsfiddle.net/8QkEw/313/)，我如何修改我的代码以使内部超链接在展开/选定 itemSelector 保持展开/选定时工作。

```
$(function(){

  var $container = $('#container'),
      $items = $('.item');

  $container.isotope({
    itemSelector: '.item',
    masonry: {
      columnWidth: 100
    },
    getSortData : {
      selected : function( $item ){
        // sort by selected first, then by original order
        return ($item.hasClass('selected') ? -500 : 0 ) + $item.index();
      }
    },
    sortBy : 'selected'
  })

  $items.click(function(){
    var $this = $(this);
    // don't proceed if already selected
    var $previousSelected = $('.selected');
    if ( !$this.hasClass('selected') ) {
      $this.addClass('selected');
    }

    $previousSelected.removeClass('selected');

    // update sortData for new items size
    $container
      .isotope( 'updateSortData', $this )
      .isotope( 'updateSortData', $previousSelected )
      .isotope();

  });

}); 
```

只有当用户点击内部超链接时，才会最小化展开/选中的框；点击其他区域仍然会触发`$previousSelected.removeClass('selected');`

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:15:22.380

停止链接上的事件传播：

```
$('.item a').click(function(event){
    event.stopPropagation();
}); 
```

这是一个演示：http: [//jsfiddle.net/VCmNU/](http://jsfiddle.net/VCmNU/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T07:19:52.640

您可以添加以下处理程序

```
 $('.item a').click(function(e){
     e.stopPropagation();
 }); 
```

工作样本[在这里](http://jsfiddle.net/arunpjohny/8QkEw/316/)。

# c# - 使用堆栈在列表视图（计算机的窗口资源管理器）中移动前进和后退

> ID：14230037
> 
> 赞同：1
> 
> 时间：2013-01-09T07:11:15.073
> 
> 标签：c#, winforms, listview, stack

我有代码，我可以在其中显示来自计算机的目录和文件。我可以使用 folerbrowser 打开它们。到目前为止一切顺利，但现在我想添加后退和前进按钮，以便我可以看到选择的上一个文件夹或文件并转到 fwd。

```
 public partial class ListView : Form
    {

        public ListView()
        {
            InitializeComponent();
            comboBox1.SelectedIndex = 2;

        }

        private void PopulateListView()
        {
            listView1.Clear();
            //headers listview

            listView1.Columns.Add("File Name", 200);
            listView1.Columns.Add("Size", 80);
            listView1.Columns.Add("Last Accessed", 110);
            ExtensionsHolder.Clear();
            if (folderBrowser.ShowDialog() == DialogResult.OK)
            {
                //int thefile = 0;
                string[] dirData = new string[3];
                string[] filData = new string[3];
                string[] files = Directory.GetFiles(folderBrowser.SelectedPath);
                var folders = Directory.GetDirectories(folderBrowser.SelectedPath)
     .Where(d => !new DirectoryInfo(d).Attributes.HasFlag(FileAttributes.System | FileAttributes.Hidden));

                try
                {
                //THIS IS THE ITERATION TO GET SUBDIRECTORIES
                foreach (string dir in folders)
                {
                    //string name = Path.g;
                    dirData[0] = dir.ToString();
                    dirData[1] = dir.Length.ToString();
                    dirData[2] = File.GetLastAccessTime(dir).ToString();
                    ListViewItem lv = new ListViewItem(dirData, imageList1.Images.Count);
                    lv.Tag = dir;

                    imageList1.Images.Add(IconExtractor.Form1.GetFolderIcon(IconExtractor.IconSize.Small, IconExtractor.FolderType.Closed));

                    listView1.SmallImageList = imageList1;
                    listView1.Items.Add(lv);

                }
                //THIS IS ITERATION FOR FILES OF THE DIRECTORY

                    foreach (string file in files)
                    {

                        FileInfo finfo = new FileInfo(file);
                        FileAttributes fatr = finfo.Attributes;

                        string name = Path.GetFileNameWithoutExtension(file);
                        filData[0] = name;
                        filData[1] = finfo.Length.ToString();
                        filData[2] = File.GetLastAccessTime(file).ToString();
                        ListViewItem lv = new ListViewItem(filData, imageList1.Images.Count - 1);
                        lv.Tag = file;
                        string extension = Path.GetExtension(file);
                        if (!extension.Equals("") && !ExtensionsHolder.Contains(extension))
                        {
                            ExtensionsHolder.Add(extension);
                            imageList1.Images.Add(BlackFox.Win32.Icons.IconFromExtensionShell(extension, BlackFox.Win32.Icons.SystemIconSize.Small));
                        }

                        listView1.SmallImageList = imageList1;

                        listView1.Items.Add(lv);

                    }
                }
                 catch (UnauthorizedAccessException)
            {
               listView1.Items.Add("Access denied");
            } 

            }
        }
        List<string> ExtensionsHolder = new List<string>();
        private void textBox1_TextChanged(object sender, EventArgs e)
{
    string chattextbox=textBox1.Text;
}
        private void button1_Click(object sender, EventArgs e)
        {

            PopulateListView();
            textBox1.Text = folderBrowser.SelectedPath;
        }

        private void listView1_ItemActivate(object sender, EventArgs e)
        {

                try
                {
                    string sPath = listView1.FocusedItem.Tag.ToString();

                     Process.Start(sPath);
        }
        catch(Exception Exc)    {   MessageBox.Show(Exc.ToString());    }    
    }

        private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
          if(comboBox1.SelectedIndex == 0)
         listView1.View = View.LargeIcon;
            if(comboBox1.SelectedIndex==1)
                listView1.View = View.SmallIcon;
            if(comboBox1.SelectedIndex==2)
                listView1.View = View.Details;
            if (comboBox1.SelectedIndex == 3)
                listView1.View = View.List;
            else if (comboBox1.SelectedIndex == 5)
                listView1.View = View.Tile;

        }

        private void Farward_Click(object sender, EventArgs e)
        {
            //Stack fpath = new Stack();
            Stack<string> itemindex = new Stack<string>();
            itemindex.Push(listView1.SelectedIndices.ToString());
            itemindex.Push("two");
            itemindex.Push("three");
            //itemindex.Push("four");
            //itemindex.Push("five");

            // A stack can be enumerated without disturbing its contents. 
            foreach (string number in itemindex)
            {
                Console.WriteLine(number);
            }
            Console.WriteLine("\nPopping '{0}'", itemindex.Pop());
            Console.WriteLine("Peek at next item to destack: {0}",
                itemindex.Peek());
            Console.WriteLine("Popping '{0}'", itemindex.Pop());
        }

        private void Back_Click(object sender, EventArgs e)
        {

            int i = 0;
            for (i = 0; i < listView1.Items.Count; i++)
            {
                    if (i != 0)
                    {
                        listView1.Items[i - 1].SubItems[1].Text = "Selected";
                        // txtPath.Text = listView1.Items[i - 1].Text;

                }

            }
        }

        private void listView1_MouseDoubleClick(object sender, MouseEventArgs e)
        {
            if (listView1.SelectedIndices.Count > 0)
                MessageBox.Show("selected index"+ listView1.SelectedIndices[0]);
            else
            MessageBox.Show("No item selected");
        }

    }
} 
```

向前 。. .

```
private void Farward_Click(object sender, EventArgs e)
{
    //Stack fpath = new Stack();
    Stack<string> itemindex = new Stack<string>();
    itemindex.Push(listView1.SelectedIndices.ToString());
    itemindex.Push("two");
    itemindex.Push("three");
    //itemindex.Push("four");
    //itemindex.Push("five");

    // A stack can be enumerated without disturbing its contents. 
    foreach (string number in itemindex)
    {
        Console.WriteLine(number);
    }
    Console.WriteLine("\nPopping '{0}'", itemindex.Pop());
    Console.WriteLine("Peek at next item to destack: {0}",
        itemindex.Peek());
    Console.WriteLine("Popping '{0}'", itemindex.Pop());
} 
```

落后。. .

```
private void Back_Click(object sender, EventArgs e)
{

    int i = 0;
    for (i = 0; i < listView1.Items.Count; i++)
    {
        if (i != 0)
        {
            listView1.Items[i - 1].SubItems[1].Text = "Selected";
            // txtPath.Text = listView1.Items[i - 1].Text;

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:56:24.297

这样做有点困难，因为您的代码包含很多不必要的 UI 内容。无论如何，我就是这样做的。. .

让我们`lvItems`成为我们的 ListView，并允许`A B C D`成为我们的 ListView 中的元素。我们只选择 A, C, D 。. .

```
lvItems.SelectedIndices.Add(0);
lvItems.SelectedIndices.Add(2);
lvItems.SelectedIndices.Add(3); 
```

所以在我们的`Next`按钮中，我们定义 Click 事件如下。. .

```
Stack<string> sItms = new Stack<string>();
for (int i = 0; i < lvItems.SelectedIndices.Count; ++i)
{
    int idx = lvItems.SelectedIndices[i];
    string itm = lvItems.Items[idx].ToString();
    sItms.Push(itm);
}

// Our set contains D, C, A 
// Peek() will display D 
```

在我们的`Back`按钮中，我们定义 Click 事件如下。. .

```
Stack<string> sItms = new Stack<string>();
for (int i = 0; i < lvItems.SelectedIndices.Count; ++i)
{
    int idx = lvItems.SelectedIndices[(lvItems.SelectedIndices.Count - 1)-i];
    string itm = lvItems.Items[idx].ToString();
    sItms.Push(itm);
}

// Our Set Contains A, C, D
// Peek() will display A 
```

这是你要找的吗？告诉我进展如何。. .

# html - 想要在网页上滚动时禁用背景并显示背景图像

> ID：14230038
> 
> 赞同：1
> 
> 时间：2013-01-09T07:11:14.927
> 
> 标签：html, macos, scroll, overscroll

[在 MAC 上通过页面底部的滚动屏幕截图](http://cl.ly/image/0q2x0d0T073X) 想要禁用当我们在网页上通过滚动并到达它结束时出现的背景并显示默认背景图像。

想要在到达页面末尾时停止滚动。

出现在大多数 Mac 上看到它在 Mac OS 10.8.2 和以下两个修订版上。

# iphone - iOS MDM - 使托管设置永久化

> ID：14230042
> 
> 赞同：1
> 
> 时间：2013-01-09T07:11:37.093
> 
> 标签：iphone, ios, ios-provisioning, mdm

根据 Apple 的“移动设备管理协议”API 文档，我正在尝试限制对连接到我的 MDM 服务器的 iOS 设备上的数据漫游的访问。

我可以通过发送适当的设置请求来切换数据漫游设置，但是用户可以直接重新打开数据漫游。

这在 Apple 的文档中通过以下段落解决：

> 在 iOS 5 或更高版本中，此命令允许服务器在设备上设置设置。这些设置一次性生效。用户可能仍然能够在以后更改设置。此命令需要应用设置权限。

“可能”向我表明应该有一种方法来限制这一点，但我找不到可能解决此问题的全局限制的完整列表。

有没有办法删除对“数据漫游”设置选项的访问，甚至禁用对整个“设置->常规->蜂窝”子菜单的访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T02:53:38.613

我不认为这是可能的。

我用配置文件检查了文档：http: [//developer.apple.com/library/ios/featuredarticles/iPhoneConfigurationProfileRef/iPhoneConfigurationProfileRef.pdf](http://developer.apple.com/library/ios/featuredarticles/iPhoneConfigurationProfileRef/iPhoneConfigurationProfileRef.pdf)

另外，我检查了 iPhone 配置实用程序。

他们都没有数据漫游限制。

因此，唯一可用的是您已经在使用的 MDM 设置。

# libpcap - pcap 进入 qthread

> ID：14230044
> 
> 赞同：2
> 
> 时间：2013-01-09T07:11:39.880
> 
> 标签：libpcap, qthread

我正在`Linux`使用 Qt 库编写一个应用程序。

所以，有两个`QThreads`。在其中一个线程`pcap_next()`函数中`while`循环调用。所有线程在其工作期间经常使用彼此的公共成员。

不使用`pcap`库（例如从硬盘读取数据包）一切都是正确的，但是当我尝试将 pcap 的功能放入单独的`thread`时，我有 SEGFAULT 错误。

我无法理解如何`pcap`工作。它看起来像`pcap`冻结了整个过程，因此线程无法访问彼此的公共成员。

`run()`pcap的线程的主要功能是这样的：

```
while()
{
   Data = pcap_next(handle, &header);
   if (Data...)
   {
        //processing functions
   }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T05:21:05.883

“冻结整个进程”会使其他线程无法*运行*；它不会导致进程崩溃。

`pcap_t`如果您的程序在多个线程中同时调用一个线程，而不是一些安全调用，例如`pcap_breakloop()`（这不会中断被阻塞的线程 - 您需要在 UN*X 中传递一个信号来执行此操作），那里不能保证它会起作用。

`pcap_t`如果您从不在不同线程中同时对同一 pcap 进行调用，它应该可以工作。

`pcap_t`即，您可以在一个线程中打开设备/保存文件，获取一个`pcap_t`. 但是，您不能让*多个*线程从`pcap_t`.

但是，您使用 pcap 的方式可能有问题，即使在单线程程序中也会崩溃。我们必须查看您所有的 pcap 调用，看看是否是这种情况。

# css - 表格行悬停 - 排除特定单元格？

> ID：14230047
> 
> 赞同：5
> 
> 时间：2013-01-09T07:11:55.793
> 
> 标签：css, html-table, css-tables

我制作了一个定价表，当悬停时会改变行的背景。由于我使用它的方式，我遇到了两个问题。

1.  我使用 3 行跨度来按住购买按钮，因为我希望它在中心与左侧的列垂直对齐。我不得不使用 !important 在翻转时保持背景为白色。固定的。

2.  当您翻转购买按钮单元格时，它会突出显示第一行。这是我不想要的。我已经尝试了各种各样的事情并重新安排了事情，并且在不删除 3 行跨度的情况下无法提出任何解决方案。

[jsfiddle](http://jsfiddle.net/ae8uU/)

```
<table>
<tr>
    <th colspan="3">title text</th>
</tr>
<tr>
    <td>amount</td>
    <td class="pricing">price</td>
    <td class="purchase" rowspan="3">purchase button</td>
</tr>
<tr>
    <td>amount</td>
    <td class="pricing">price</td>
</tr>
<tr>
    <td>amount</td>
    <td class="pricing">price</td>
</tr>
</table>

table{
margin:.5em 0 1em 0;
width:100%;
font-size:15px;
}
table th{
padding:0px 0 10px 5px;
}

table td{
padding:2px 5px;
}

table td.purchase{
text-align:right;
width:150px;
vertical-align:middle;
background:#ffffff !important;
}
table td.pricing{
width:130px;
border-left:5px #ffffff solid;
}
table td.details {
padding:0 35px 0 15px;
}

table tr:hover td
{
background-color: #ebf1f6;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-03T16:23:45.393

我有一个类似的要求：在表格行上应用背景颜色，当我用鼠标指针悬停在该行上时，除了“选定”行，它已经以不同的背景颜色突出显示。

使用“指针事件：无；” 完全实现了我想要的： [JsFiddle](https://jsfiddle.net/nwsmith/bwuzrp81/)

```
table#CustOrders tbody tr:hover td {
  background-color: LemonChiffon;
}
table#CustOrders tbody tr#selected {
  background-color: Yellow;
  pointer-events: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:26:13.757

我首先想到的是使用“ **pointer-events** ”css 属性。但我不确定它在这里是否有用。检查[此](https://coderwall.com/p/qa0hga)链接（有一个可用的 jsFiddle 示例）

还可以考虑使用一些 javascript 代码来设置您需要的逻辑。我知道您只想使用 css，但是 js 修复在这里可能非常小而且很明显 - 那为什么不呢？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T07:37:07.077

你可以检查[**答案**](http://fiddle.jshell.net/MLULk/1/)

**HTML**

```
<table width="100%" border="0" cellspacing="2" cellpadding="2">
  <tr>
    <td colspan="2" scope="row">title text </td>
  </tr>
  <tr>
    <td width="75%" scope="row">
        <table width="100%" border="0" cellspacing="2" cellpadding="2" class="amount_table">
          <tr>
            <td>amount</td>
            <td>price</td>
          </tr>
          <tr>
            <td>amount</td>
            <td>price</td>
          </tr>
          <tr>
            <td>amount</td>
            <td>price</td>
          </tr>
        </table>    
    </td>
    <td width="25%">Purchace</td>
  </tr>
</table> 
```

**CSS**

```
.amount_table tr:hover{
  background:gray
} 
```

# ios - 在 NSMutableArray 中添加\删除对象的复杂性是什么？

> ID：14230050
> 
> 赞同：3
> 
> 时间：2013-01-09T07:12:21.550
> 
> 标签：ios, nsmutablearray, complexity-theory

我认为要添加我们需要的对象：创建更大尺寸的新数组 + 制作旧数组的副本 + 添加一个元素。所以最终的复杂度是 O(N)，其中 N - 元素的最终数量。

删除 - O(N) 也。

我错了吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:26:04.113

`I think that to add an object we need: create new array with a bigger size + make a copy of older array + add an element.`

**呜呜呜……**

要添加对象，不会创建新数组并完成所有这些工作。

如果你记得可可有所有的指针。如果你看到带有指针的 C/C++，就把它当作一个链表。要添加新元素，只需将其地址保存在列表中，并根据需要调整头/尾。

MutableArrays 也有同样的情况。

复杂度应该是 O(1)。

# entity-framework - 要刷新的对象集合中索引 0 处的元素具有 null EntityKey 属性值或未附加到此 ObjectStateManager

> ID：14230054
> 
> 赞同：4
> 
> 时间：2013-01-09T07:12:33.523
> 
> 标签：entity-framework, refresh, repository-pattern

使用存储库模式在我的实体框架中执行“ObjectContext.Refresh（RefreshMode.StoreWins，实体）”时出现此错误。

我尝试在执行查询之后和之前执行此操作，但在这两种情况下都会出错。

这个错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T14:51:59.573

可能是：

*   该实体尚未附加到上下文，或
*   您尚未应用 Add() 或 AddObject()。
*   如果您在某个时候应用了 AddObject()，则需要 Detach() 实体，而不是条目。

# python - 从 Python 中的一行中提取时间

> ID：14230058
> 
> 赞同：1
> 
> 时间：2013-01-09T07:12:51.903
> 
> 标签：python

> **可能重复：**
> [将字符串转换为日期时间](https://stackoverflow.com/questions/466345/converting-string-into-datetime)

我得到了如下日志条目：

```
2013-01-09 06:13:51,464 DEBUG module 159 Djang... 
```

从这个字符串中提取日期的最短（最好）方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T07:24:36.327

你需要保持微秒吗？

```
>>> import re
>>> log = "2013-01-09 06:13:51,464 DEBUG module"
>>> p = re.compile("\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2},\d*")
>>> time_str = p.findall(log)[0]
>>> time_str
'2013-01-09 06:13:51,464'
>>> from datetime import datetime
>>> date_time = datetime.strptime(time_str, '%Y-%m-%d %H:%M:%S,%f')
>>> date_time
datetime.datetime(2013, 1, 9, 6, 13, 51, 464000) 
```

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:21:25.293

```
from datetime import datetime
val = '2013-01-09 06:13:51,464'.split(',')[0]  # Remove milliseconds
date_object = datetime.strptime(val, '%Y-%m-%d %H:%M:%S') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:12:51.903

```
>>> a = "2013-01-09 06:13:51,464 DEBUG module"
>>> a = a.split(" ")
>>> date,time = a[0], a[1]
>>> date = date.split("-")
>>> time = time.split(",")[0].split(":")

>>> date
['2013', '01', '09']
>>> time
['06', '13', '51']

>>> args_list = [int(i) for i in date]
>>> args_list.extend( [int(i) for i in time])
>>> args_list
[2013, 1, 9, 6, 13, 51]

>>> import datetime
>>> datetime.datetime(*args_list)
datetime.datetime(2013, 1, 9, 6, 13, 51) 
```

# vb.net - 在 vb.net 的 datagridview 中添加行号

> ID：14230060
> 
> 赞同：6
> 
> 时间：2013-01-09T07:12:54.417
> 
> 标签：vb.net, winforms, sorting, datagrid, desktop-application

我正在 Vb.Net 中开发 Windows 应用程序。现在有一种表格，我想在其中打印网格中显示的记录。通过单击网格中的单元格标题可以对网格进行排序，并且应该按照网格中的显示进行打印。

所以我对如何维护网格中的行号有点困惑。当网格填充和分配数据源时，我最初可以从数据库中获取行号。但是当用户单击任何单元格标题并对该列进行排序时，行号就会更改。那时我很难保持行数。

谁能告诉我如何在网格中维护行号？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T07:20:10.780

我猜你需要这个：

注意：***此代码在 C# 中，因此您可以将其转换为 VB.Net***

代表：

```
this.dgvUserDetails.RowPostPaint += new System.Windows.Forms.DataGridViewRowPostPaintEventHandler(this.dgvUserDetails_RowPostPaint); 
```

事件：

```
private void dgvUserDetails_RowPostPaint(object sender, DataGridViewRowPostPaintEventArgs e)
{
        using (SolidBrush b = new SolidBrush(dgvUserDetails.RowHeadersDefaultCellStyle.ForeColor))
        {
              e.Graphics.DrawString((e.RowIndex + 1).ToString(), e.InheritedRowStyle.Font, b, e.RowBounds.Location.X + 10, e.RowBounds.Location.Y + 4);
        }
} 
```

输出

![行号](../Images/27dfa088d5e3138f14c86a9d53bebea8.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-08-11T04:13:24.687

grid.Rows(e.RowIndex).HeaderCell.Value = CStr(e.RowIndex + 1)

复制代码以 [在此处输入图像描述](https://i.stack.imgur.com/Nhk8P.png)

# c# - 使用“foreach”或“for”循环构造从数组组成字符串

> ID：14230067
> 
> 赞同：0
> 
> 时间：2013-01-09T07:13:52.073
> 
> 标签：c#, asp.net-mvc-3

我认为我需要使用一个 for 循环，这样我就可以访问数组中每一行中的每个属性来组成我的字符串。

```
 public static string GetHintText(this IEnumerable<UserTrainingPointsDataModel> HintTextString)
  {

    foreach (var part in HintTextString)
    {
      HintText = HintText + "  " + part.Name + "  " + part.IncentiveTrainingModuleOptionName + " = " + part.Points;
    }

    return HintText;
  }

  public class UserTrainingPointsDataModel
  {
    public virtual int InteractionType { get; set; }
    public virtual int Points { get; set; }
    public virtual string Name { get; set; }
    public virtual string IncentiveTrainingModuleOptionName { get; set; }
  } 
```

每行包含值：

```
 China Incentive Program  Points For Completing = 50  
  India - Q2 Incentive   Points Per Correct Answer = 50  
  China - Q2 Incentive  Points For Completing = 50  
  India Incentive Program  Points Per Correct Answer = 100  
  India - Q2 Incentive   Points Per Correct Answer = 100 
```

`HintTextString`包含 5 行，每行具有上述属性，我需要组成一个如下所示的字符串：

```
 "Incentive Program: " + part.Name[0] + "  " + part.IncentiveTrainingModuleOptionName[0] + " + " + part.Points[0] + 
  "Incentive Program: " + part.Name[1] + "  " + part.IncentiveTrainingModuleOptionName[1] + " + " + part.Points[1] 
```

等等，所以我需要一个 for 循环而不是？以及如何获得 HintTextString 的长度？智能感知没有给我那个属性

风景：

```
 <% if (module.HasAssessment)
 { %>
    <div class="<%: moduleStateClass %>">&nbsp;</div>
    <div class="<%: moduleScoreClass %>"><%: module.ModuleScore %></div>
    <% var HintText =  TrainingModuleProgressStateDataModelExtentions.GetHintText(module.UserTrainingPoints); %>

    <script type="text/javascript">
       <%: Html.GetQTip("training-module-id-" + module.TrainingModuleId , "Incentive program: " + HintText , "training-module-id-" + module.TrainingModuleId , Zinc.Web.Extensions.QTipPosition.Bottom, true, "Module Points") %>
    </script> 
 <% }  %> 
 <% else
    {  %>
 <% var HintText =  TrainingModuleProgressStateDataModelExtentions.GetHintText(module.UserTrainingPoints); %>
 <script type="text/javascript">
    <%: Html.GetQTip("training-module-id-" + module.TrainingModuleId , "Incentive program: "  + HintText ,"training-module-id-" + module.TrainingModuleId , Zinc.Web.Extensions.QTipPosition.Bottom, true, "Module Points") %>   
 </script>
 <% } %> 
```

“行动” ：

```
 <div class="module-column-content">
    <% Html.RenderPartial("~/Areas/Training/Views/Home/Details.ascx", Model); %>
  </div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:29:49.877

如果您只想以您描述的格式将整个列表作为一个字符串返回，这应该可以

```
public static string GetHintText(this IEnumerable<UserTrainingPointsDataModel> HintTextString)
{
    string returnValue = string.Empty;
    foreach (var dataModel in HintTextString)
    {
        returnValue += string.Format("Incentive Program: {0}  {1} + {2}  ", dataModel.Name, dataModel.IncentiveTrainingModuleOptionName, dataModel.Points);
    }
    return returnValue;
} 
```

正如**Jared**所提到的，如果您的收藏量很大，您可能希望使用`StringBuilder`as 在性能上要好得多。

```
public static string GetHintText(this IEnumerable<UserTrainingPointsDataModel> HintTextString)
{
    var returnValue = new StringBuilder();
    foreach (var dataModel in HintTextString)
    {
        returnValue.AppendFormat("Incentive Program: {0}  {1} + {2}  ", dataModel.Name, dataModel.IncentiveTrainingModuleOptionName, dataModel.Points);
    }
    return returnValue.ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:44:59.557

使用[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)构造文本，同时对集合进行迭代。它已针对字符串操作函数进行了优化。如果您`+=`在循环中使用简单的文本添加 ( )，性能可能会很糟糕。

```
public static string GetHintText(this IEnumerable<UserTrainingPointsDataModel> HintTextString)
{
  //format for each item 
  //{Name} {ModuleName} = {Points} <NewLine>
  string lineFormat = "Incentive Program: {0} {1} = {2}\r\n";
  StringBuilder sb = new StringBuilder();
  foreach (var part in HintTextString)
  {
     sb.AppendFormat(lineFormat, part.Name, part.IncentiveTrainingModuleOptionName, part.Points);
  }

  return sb.ToString();
} 
```

此外，如果您需要集合的长度`HintTextString`，可以使用[IEnumerable.Count()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.count.aspx)扩展方法。

# java - youtube api XmlWriter$命名空间异常

> ID：14230069
> 
> 赞同：1
> 
> 时间：2013-01-09T07:14:05.053
> 
> 标签：java, youtube-api

我正在使用 youtube api 上传视频。当我初始化 YoutubeService 时抛出这个异常“线程“主”java.lang.NoSuchMethodError 中的异常：com.google.gdata.data.ExtensionProfile.declareAdditionalNamespace(Lcom/google/gdata/util/common/xml/XmlWriter$Namespace;)五、我在google上搜索过，但找不到任何相关链接。

```
String client_id = "7598..com";
String developer_key = "AI39si6..";
**YouTubeService service = new YouTubeService(client_id,developer_key);**
service.setUserCredentials("email","password"); 
```

应用程序中使用的 Jar 文件是：com.google.common.source_1.0.0.201004262004.jar。

com.google.gdata-contacts-1.41.5.w1.jar。

gdata-core-1.0-1.41.5.jar。

javax.mail-1.3.3.01.jar。

gdata-youtube-2.0.jar。

gdata-media-1.0.jar。

gdata-client-1.0.jar。

gdata-maps-2.0.jar。

谷歌收集-1.0.jar。

任何人都可以建议是否缺少任何东西？

# android - GUIStatics 无法解析为变量

> ID：14230071
> 
> 赞同：3
> 
> 时间：2013-01-09T07:14:07.880
> 
> 标签：android, geolocation, gps, reverse-geocoding

我正在尝试从以下代码中获取用户位置名称。我收到错误，因为 GUIStatics 无法解析为变量。如何纠正它。任何人都可以告诉这个代码是否是实现位置名称的正确方法。

```
package com.example.location;

import java.util.List;
import java.util.Locale;

import android.location.Address;
import android.location.Criteria;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.location.LocationProvider;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.telephony.CellLocation;
import android.util.Log;
import android.view.Menu;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity implements LocationListener {
LocationManager lmanager;
String provider;
String er="Please try again";
TextView t;
public static Context mContext; 
private double latitude,longitude;

@Override
protected void onCreate(Bundle savedInstanceState) {
    mContext=this;
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    t=(TextView)findViewById(R.id.textView1);

    lmanager=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
    lmanager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
    lmanager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);

    locationUpdate();

}

private void locationUpdate() {
    // TODO Auto-generated method stub
    CellLocation.requestLocationUpdate();
}

private void getAddress(double lat, double lon) {
    // TODO Auto-generated method stub
    Geocoder coder=new Geocoder(MainActivity.mContext,Locale.getDefault());
    try
    {
        List<Address> listaddress=coder.getFromLocation(lat, lon, 1);
        Address obj=listaddress.get(0);
        String add=obj.getAddressLine(0);
        GUIStatics.currentAddress=obj.getSubAdminArea()+","+obj.getAdminArea();
        GUIStatics.longitude=obj.getLongitude();
        GUIStatics.latitude=obj.getLatitude();
        GUIStatics.currentCity=obj.getSubAdminArea();
        GUIStatics.currentState=obj.getAdminArea();
        add = add + "\n" + obj.getCountryName();
        add = add + "\n" + obj.getCountryCode();
        add = add + "\n" + obj.getAdminArea();
        add = add + "\n" + obj.getPostalCode();
        add = add + "\n" + obj.getSubAdminArea();
        add = add + "\n" + obj.getLocality();
        add = add + "\n" + obj.getSubThoroughfare();
        Log.v("IGA", "Address" + add);
        Toast.makeText(this, "Address=>" + add,Toast.LENGTH_SHORT).show();

    }
    catch(Exception e)
    {
        e.printStackTrace();
        Toast.makeText(this, e.getMessage(), Toast.LENGTH_SHORT).show();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    latitude=location.getLatitude();
    longitude=location.getLongitude();
    GUIStatics.latitude=latitude;
    GUIStatics.longitude=longitude;
    Log.v("Test", "IGA" + "Lat" + latitude + "   Lng" + longitude);
    getAddress(latitude, longitude);
    if(location!=null)
    {
        lmanager.removeUpdates(this);
    }
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub
    Toast.makeText(MainActivity.this, "Gps Disabled", Toast.LENGTH_SHORT).show();
    Intent intent = new Intent(
            android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
    startActivity(intent);
}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub
    if(status == LocationProvider.TEMPORARILY_UNAVAILABLE)
    { 
        Toast.makeText(MainActivity.this,"LocationProvider.TEMPORARILY_UNAVAILABLE", Toast.LENGTH_SHORT).show(); 
    } 
    else if(status== LocationProvider.OUT_OF_SERVICE)
    { 
     Toast.makeText(MainActivity.this, "LocationProvider.OUT_OF_SERVICE", Toast.LENGTH_SHORT).show(); 
    } 

}

 } 
```

我的清单文件是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.example.location"
 android:versionCode="1"
 android:versionName="1.0" >
<uses-permission android:name="android.permission.ACCESS_GPS"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET"/>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <uses-library android:name="com.google.android.maps" />
    <activity
        android:name="com.example.location.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

提前致谢。请帮我

# php - 是否有必要使用 HTML 以外的其他东西来制作动态内容非常少的静态网站

> ID：14230072
> 
> 赞同：-1
> 
> 时间：2013-01-09T07:14:11.593
> 
> 标签：php, html, paypal

我是 C/C++ 开发人员并且了解基本的 HTML，我们计划制作具有贝宝（或其他供应商）集成的网站，其他一切都是静态内容。我能不能只用 HTML 制作这个网站，很多人建议我，使用像 ASP.Net 或 PHP 等服务器端语言来进行贝宝集成是非常必要的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:35:36.967

这在很大程度上取决于您想做什么。可以使用 PayPal 表单/按钮向 PayPal 发送请求和用户，而无需任何服务器端代码。但是在大多数情况下，这种情况并不理想，因为这意味着您必须通过查看 PayPal 帐户来管理人们手动支付的费用。

大多数网站（电子商务）都有链接到数据库的服务器端代码。这将处理交易、购买标识符、用户帐户（如果适用）和各种其他事情。如果您想使用即时支付通知系统，您还需要服务器端代码，该系统可以方便地了解交易何时成功/失败等。

如果您希望用户能够购买某些东西，然后从您的网站下载它，您将需要后一个选项。除非您计划逐个用户手动设置访问帐户。

# wcf - WCF端点地址有什么用

> ID：14230075
> 
> 赞同：2
> 
> 时间：2013-01-09T07:14:19.110
> 
> 标签：wcf

我是 WCF 的新手。我知道我们必须在服务端和客户端的配置文件中写入端点。假设我有多个端点

```
<services>
      <service name="YourNamespace.YourService" behaviorConfiguration="Default">
        <endpoint name="Default" 
            address="http://YourServer/Services/MyService" 
            binding="basicHttpBinding" 
            contract="YourNamespace.IYourService"/>
        <endpoint name="TCP" 
            address="net.tcp://YourServer/ServicesTCP/MyService" 
            binding="netTcpBinding" 
            contract="YourNamespace.IYourService"/>

        <endpoint name="Dual" 
            address="http://YourServer/Services/MyService/Dual" 
            binding="wsDualHttpBinding" 
            clientBaseAddress="http://localhost:8001/client/"
            contract="YourNamespace.IYourDualService"/>

        <endpoint name="mex" 
            address=""
            binding="mexHttpBinding" 
            contract="IMetadataExchange"/>
      </service>
    </services> 
```

我们知道我们不能在客户端创建具有端点地址的代理，例如

```
http://YourServer/Services/MyService/Dual or
net.tcp://YourServer/ServicesTCP/MyService 
```

相反，如果我们需要在客户端创建代理，那么我们需要提供 mex 端点地址。所以我只是不明白端点地址有什么用？

当我们在客户端创建代理并调用服务时，我们只是不明白我们的代理使用什么端点地址连接到服务？

这就是为什么我只想知道端点地址是如何发挥作用的？

我知道我们可以在配置文件中为 tcp 编写单独的 mex 端点，因此我们可以使用该 mex url 创建代理，结果当客户端连接到服务时，tcp 协议将用于通信，但对于其他 http 端点，一个 mex 端点工作正常。

我的重要问题是我真的很想知道假设我有 3 个端点，例如 basichttp、wshttp、wsdualbidning，然后一个 mex 端点适用于所有这些端点来创建代理。那么在这种情况下告诉我，当客户端连接到服务时，将使用哪个端点地址连接到该服务？

如果有人非常详细地讨论这个问题，并提供示例配置条目以及示例服务代码，这将是非常有帮助的吗？

## 更新部分

Tom Redfern 说......在内部使用的情况下不需要服务端点。假设我已经开发了一个托管在控制台应用程序中的服务，并且其他客户端需要连接到该服务。所以在这种情况下告诉我客户端如何在没有代理类的情况下连接到服务并调用各种服务方法。我只是想知道没有代理如何连接和调用 wcf 服务的各种方法。请为客户端提供一些示例代码，以展示我如何以编程方式连接和调用 wcf 服务的各种方法而无需代理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:05:09.627

端点需要一种解决方法。这既是基本的，也是合理的。

您关于客户端只需要元数据端点地址来解析实际服务端点的论点仅在您公开元数据端点（这绝不是必需的）并且消费者没有其他方式使用服务时才成立（也许该服务是公开的）。

大多数服务是为内部使用而开发的，其中通过引用共享类型程序集（而不是通过服务代理）直接绑定到端点的能力很常见。绝对需要了解这些实例中的端点地址。

如果您了解[UDDI](http://en.wikipedia.org/wiki/UDDI)的历史，那么它被设计为一种将服务元数据分发给不需要了解有关服务的任何其他内容的消费者的方法。但是，您多久看到一次 UDDI 服务器？我已经看到它在一家公司中使用过（我总共在大约 20 家公司工作过）。

# openlayers - 当多边形较小时，如何在 wms 层 Geoserver 中获取准确的特征信息？

> ID：14230080
> 
> 赞同：2
> 
> 时间：2013-01-09T07:14:40.697
> 
> 标签：openlayers, shapefile, geoserver

我得到了单击多边形特征信息的相邻多边形特征信息。
在我的代码中：

```
获取特征信息：函数（e）{

            坐标=e;
            变量参数 = {
                        请求：“GetFeatureInfo”，
                        投影：“EPSG：4326”，
                        例外：“应用程序/vnd.ogc.se_xml”，
                        BBOX：map.getExtent().toBBOX()，
                        服务：“WMS”，
                        INFO_FORMAT: '文本/html',
                        QUERY_LAYERS：选择层（map.zoom），
                        FEATURE_COUNT：50，
                        图层：selectlayer（map.zoom），
                        宽度：map.size.w，
                        高度：map.size.h，
                        X:parseInt(e.xy.x),
                        Y:parseInt(e.xy.y),
                        CQL_FILTER:selectfilter(),
                        srs: map.layers[0].params.SRS};

                    // 处理 wms 1.3 vs wms 1.1 的疯狂
                    if(map.layers[0].params.VERSION == "1.3.0") {
                        params.version = "1.3.0";
                        参数.i = e.xy.x;
                        参数.j = e.xy.y;
                    } 别的 {
                        params.version = "1.1.1";
                       params.y = parseInt(e.xy.y);
                        params.x = parseInt(e.xy.x);
                    }
                    OpenLayers.loadURL("http://myserver/tomcat/geoserver/india/wms", params, this, setHTML, setHTML);

```

在图层预览中我遇到了同样的问题，那么是图层问题还是代码问题？
注意：如果多边形很大，那么它会显示完美的特征信息，但是当它很小时，就会出现这个问题。
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:27:27.543

使用额外的参数[缓冲区](http://docs.geoserver.org/latest/en/user/services/wms/vendor.html#buffer)：

```
var params = {
    buffer: 0,
    ...
} 
```

# email - 在电子邮件中显示订单项目布局仅适用于 magento 中的管理员

> ID：14230082
> 
> 赞同：1
> 
> 时间：2013-01-09T07:14:52.760
> 
> 标签：email, magento, layout, admin

每当用户在 magento 中下新订单时，电子邮件都会发送。在这封电子邮件中包含带有价格的订单项目。

```
 {{layout handle="sales_email_order_items" order=$order}} 
```

但是我需要在没有订单项目的情况下向客户发送电子邮件，并在订单项目中向管理员发送电子邮件。那么如何编写条件以仅针对管理员电子邮件显示此布局。

谢谢，壁画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:32:45.440

订单确认电子邮件只发送一次。如果您配置了管理员接收订单确认电子邮件以将其发送给 CC 中的管理员。

这意味着您不能轻易更改客户和管理员的电子邮件内容，因为它们是相同的电子邮件。

为了实现您的目标，您应该编写一个自己的模块来观察`place_order_after`事件并向您展示产品的管理员电子邮件地址发送一封单独​​的电子邮件。在标准模板中，您将使用产品擦除零件。

# perl - 如果在主脚本中重定向，我如何在 perl 模块中打印到 STDOUT

> ID：14230088
> 
> 赞同：4
> 
> 时间：2013-01-09T07:15:40.680
> 
> 标签：perl, stdout

我`STDOUT`在 Perl 脚本中进行了重定向。我在模块中打印的所有内容都被重定向到一个文件。有没有办法`STDOUT`在 Perl 模块中恢复？

这是我的例子

```
require my_module;

open(STDOUT, ">$outlog") || die "Error stdout: $!";
open(STDERR, ">>$outlog") || die "Error stderr: $!";

my_module::my_func(); 
```

所以我想`STDOUT`在`my_module::my_func()`函数中打印一条消息并退出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:11:08.913

实际上，除非您将其保存在其他位置，否则您无法恢复 STDOUT。

您可以执行以下操作：

```
 # Save current STDOUT handle in OLDOUT
        open (OLDOUT, ">&STDOUT") or die "Can't open OLDOUT: $!";   

        # Set STDOUT to a your output file
        open (STDOUT, ">$youroutputfile") or die "Can't open STDOUT: $!";

        # Do whatever you want to do here.......
        # ...........

        # Close STDOUT output stream
        close (STDOUT);

        # Reset STDOUT stream to previous state
        open (STDOUT, ">&OLDOUT") or die "Can't open STDOUT: $!";

        # Close OLDOUT handle
        close (OLDOUT);

        # Here your preview STDOUT is restored.... 
```

:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T09:02:31.730

似乎我找到了解决方案。首先我保存`STDOUT`在主脚本中，然后我在模块中使用它。

```
require my_module;
open(SAVEOUT, ">&STDOUT") || die "Unable to save STDOUT: $!";
open(STDOUT, ">$outlog") || die "Error stdout: $!";

open(STDERR, ">>$outlog") || die "Error stderr: $!";

my_module::my_func(); 
```

在`my_module::my_func()`我退出之前添加了以下行

```
open (STDOUT, ">&main::SAVEOUT") or die "Unable to restore STDOUT : $!";
print "a_module!!!\n"; 
```

我的打印信息已发送至`STDOUT`

# android - 为什么 IDEA 找不到 @android:drawable/ic_btn_search？

> ID：14230090
> 
> 赞同：1
> 
> 时间：2013-01-09T07:15:43.987
> 
> 标签：android, intellij-idea

我在 IntelliJ IDEA 中定义了一个活动布局。在 ImageButton 上，我设置`android:src`为`@android:drawable/ic_btn_search`对我来说似乎是合理的，因为我看到`ic_btn_search.png`SDK 资源中有一个文件位于*data\res\drawable-mdpi* 和*data\res\drawable-hdpi下*

此外，活动预览实际上显示了图像。

但是，验证器说它无法解析这个符号，因此拒绝编译。

我是错误地指定资源还是 IDEA 错误？我怎样才能在按钮上设置这个图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:42:53.767

好的，这似乎是这样的：

根据[androiddrawableexplorer](http://androiddrawableexplorer.appspot.com/)，有些资源是公开的，有些不是。要使用不公开的，您必须将它们复制到您自己的资源目录并使用`@drawable/[image name]`.

虽然 IDEA 的活动预览显示图像很奇怪。

# php - 偶然发现主页上的导航类型（带图片）

> ID：14230091
> 
> 赞同：1
> 
> 时间：2013-01-09T07:15:50.727
> 
> 标签：php, loops, slider, posts

我使用的主题是 wpshower 的不平衡。

我将以有组织的方式提供主题的[代码](https://github.com/wpshower/imbalance)。

基本上，我想要做的是让[我的网站主页](http://s1336.beta.photobucket.com/user/jackhoff6/media/homepage1_zps3d4081a9.png.html?sort=3&o=1)功能如下面的两张图片。

（爆炸，只允许发2个超链接。你仍然可以看到上面之前发布的图片旁边的图片）

（下面的解释）

页面左右两侧一共有6个箭头。当您访问我的网站时，它将从创建的最新帖子加载主页（从最近到最旧）当用户单击左/右箭头（第 1/2/3 个）时，基本上会有一个“绊倒效果”和与壁橱三角形对齐的三张图片将变为随机帖子。

（这些帖子实际上是特色图片）

请看下面的两张图，它们确实画得不好，但它象征着我在视觉层面上的要求。我尝试在不平衡论坛上问一个问题，但没有任何回应。由于我缺乏一些复杂的 php 经验，我确实不确定如何解决这个问题。

如果有人可以帮助我，我将不胜感激并以体面的方式奖励您。

干杯。

# java - 来自 SecretKeySpec 的 Java 安全初始化密码正确

> ID：14230096
> 
> 赞同：1
> 
> 时间：2013-01-09T07:16:05.830
> 
> 标签：java, jce, diffie-hellman

我正在测试 Diffie-Hellman KeyAgreement 算法。并使用它来生成密钥。但是在我得到 . 之后`SecretKeySpec`，我遇到了使用它来初始化`Cipher`. 这是我的代码：

## DiffieHellman 模块

```
package ggicci.infosec;

import java.math.BigInteger;
import java.security.InvalidAlgorithmParameterException;
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.NoSuchAlgorithmException;
import java.security.PrivateKey;
import java.security.PublicKey;

import javax.crypto.KeyAgreement;
import javax.crypto.spec.DHParameterSpec;
import javax.crypto.spec.SecretKeySpec;

/**
 * Diffie-Hellman module for demonstrating KeyAgreement Algorithm
 * @author Ggicci
 * @since 2013.01.09
 */
public class DiffieHellmanModule {
    private static final byte[] skip1024ModulusBytes = { (byte) 0xF4,
            (byte) 0x88, (byte) 0xFD, (byte) 0x58, (byte) 0x4E, (byte) 0x49,
            (byte) 0xDB, (byte) 0xCD, (byte) 0x20, (byte) 0xB4, (byte) 0x9D,
            (byte) 0xE4, (byte) 0x91, (byte) 0x07, (byte) 0x36, (byte) 0x6B,
            (byte) 0x33, (byte) 0x6C, (byte) 0x38, (byte) 0x0D, (byte) 0x45,
            (byte) 0x1D, (byte) 0x0F, (byte) 0x7C, (byte) 0x88, (byte) 0xB3,
            (byte) 0x1C, (byte) 0x7C, (byte) 0x5B, (byte) 0x2D, (byte) 0x8E,
            (byte) 0xF6, (byte) 0xF3, (byte) 0xC9, (byte) 0x23, (byte) 0xC0,
            (byte) 0x43, (byte) 0xF0, (byte) 0xA5, (byte) 0x5B, (byte) 0x18,
            (byte) 0x8D, (byte) 0x8E, (byte) 0xBB, (byte) 0x55, (byte) 0x8C,
            (byte) 0xB8, (byte) 0x5D, (byte) 0x38, (byte) 0xD3, (byte) 0x34,
            (byte) 0xFD, (byte) 0x7C, (byte) 0x17, (byte) 0x57, (byte) 0x43,
            (byte) 0xA3, (byte) 0x1D, (byte) 0x18, (byte) 0x6C, (byte) 0xDE,
            (byte) 0x33, (byte) 0x21, (byte) 0x2C, (byte) 0xB5, (byte) 0x2A,
            (byte) 0xFF, (byte) 0x3C, (byte) 0xE1, (byte) 0xB1, (byte) 0x29,
            (byte) 0x40, (byte) 0x18, (byte) 0x11, (byte) 0x8D, (byte) 0x7C,
            (byte) 0x84, (byte) 0xA7, (byte) 0x0A, (byte) 0x72, (byte) 0xD6,
            (byte) 0x86, (byte) 0xC4, (byte) 0x03, (byte) 0x19, (byte) 0xC8,
            (byte) 0x07, (byte) 0x29, (byte) 0x7A, (byte) 0xCA, (byte) 0x95,
            (byte) 0x0C, (byte) 0xD9, (byte) 0x96, (byte) 0x9F, (byte) 0xAB,
            (byte) 0xD0, (byte) 0x0A, (byte) 0x50, (byte) 0x9B, (byte) 0x02,
            (byte) 0x46, (byte) 0xD3, (byte) 0x08, (byte) 0x3D, (byte) 0x66,
            (byte) 0xA4, (byte) 0x5D, (byte) 0x41, (byte) 0x9F, (byte) 0x9C,
            (byte) 0x7C, (byte) 0xBD, (byte) 0x89, (byte) 0x4B, (byte) 0x22,
            (byte) 0x19, (byte) 0x26, (byte) 0xBA, (byte) 0xAB, (byte) 0xA2,
            (byte) 0x5E, (byte) 0xC3, (byte) 0x55, (byte) 0xE9, (byte) 0x2F,
            (byte) 0x78, (byte) 0xC7 };
    private static final BigInteger skip1024Modulus;
    private static final BigInteger skip1024Base;
    private static KeyPairGenerator kpg;
    static {
        skip1024Modulus = new BigInteger(1, skip1024ModulusBytes);
        skip1024Base = BigInteger.valueOf(2);
        try {
            kpg = KeyPairGenerator.getInstance("DH");
            DHParameterSpec dhp = new DHParameterSpec(skip1024Modulus,
                    skip1024Base);
            kpg.initialize(dhp);
        } catch (NoSuchAlgorithmException | InvalidAlgorithmParameterException e) {
            e.printStackTrace();
        }
    }

    /**
     * Create KeyAgreement and generate secret key
     * 
     * @param prk_self
     *            the private key from the user who wants to generate the secret
     *            key
     * @param pbk_peer
     *            the public key from the user whom is to be agree on the secret
     *            key with
     * @param lastPhase
     *            flag which indicates whether or not this is the last phase of
     *            this key agreement
     * @return the secret key
     */
    public static SecretKeySpec agreeSecretKey(PrivateKey prk_self,
            PublicKey pbk_peer, boolean lastPhase) throws Exception {
        KeyAgreement ka = KeyAgreement.getInstance("DH");
        ka.init(prk_self);
        ka.doPhase(pbk_peer, lastPhase);
        byte[] bkey = ka.generateSecret();
        return new SecretKeySpec(bkey, "AES");
    }

    /**
     * Generate a key pair of algorithm "DiffieHellman"
     * 
     * @return the public and private key pair
     */
    public static KeyPair genDHKeyPair() {
        return kpg.genKeyPair();
    }
} 
```

## DHTest

```
import java.security.KeyPair;
import java.security.PrivateKey;
import java.security.PublicKey;

import javax.crypto.Cipher;
import javax.crypto.spec.SecretKeySpec;
import ggicci.infosec.DiffieHellmanModule;

public class DHTest {

    public static void main(String[] args) {
        KeyPair kp1 = DiffieHellmanModule.genDHKeyPair();
        KeyPair kp2 = DiffieHellmanModule.genDHKeyPair();
        PublicKey pbk1 = kp1.getPublic();
        PublicKey pbk2 = kp2.getPublic();
        PrivateKey prk1 = kp1.getPrivate();
        PrivateKey prk2 = kp2.getPrivate();
        try {
            SecretKeySpec sk1 = DiffieHellmanModule.agreeSecretKey(prk1, pbk2, true);
            SecretKeySpec sk2 = DiffieHellmanModule.agreeSecretKey(prk2, pbk1, true);
            Cipher cipher = Cipher.getInstance(sk1.getAlgorithm());
            cipher.init(Cipher.ENCRYPT_MODE, sk1); //-->Exception here:Invalid AES key length: 128 bytes
            byte[] ciphertext = cipher.doFinal("Hello World".getBytes("utf-8"));
            cipher.init(Cipher.DECRYPT_MODE, sk2);
            System.out.println("Decrypted: " + new String(cipher.doFinal(ciphertext), "utf-8"));
            System.out.println("Done");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:00:23.383

您正在使用以下语句为 128 字节的 DiffieHellman 密钥生成密钥数据： `byte[] bkey = ka.generateSecret();`，但随后将其用作 AES 密钥规范的输入 `new SecretKeySpec(bkey, "AES");`

这稍后会触发您在尝试使用 AES 密钥初始化密码时看到的异常，`cipher.init(Cipher.ENCRYPT_MODE, sk1);`因为 AES 密钥预计具有 16、24 或 32 字节（128、192 或 256 位）的密钥数据，而不是 128 字节。

# android - Contentresolver.delete() 无法正常工作

> ID：14230097
> 
> 赞同：3
> 
> 时间：2013-01-09T07:16:07.657
> 
> 标签：android, android-mediaplayer, android-contentresolver

在我的 android 应用程序中，当用户长按特定歌曲时，我想从播放列表中删除歌曲。为此，我使用`Contentresolver.delete()`了方法，但它不起作用。它既不抛出错误也不删除数据？我在这里发布我的代码。请告诉我为什么它不起作用。

代码 ：

```
 ContentResolver resolver = DefaultSongList.this.getContentResolver();
    Uri mUri = MediaStore.Audio.Playlists.Members.getContentUri("external",playListId);  
    String audioId = songsList.get(pos).get("id");
    resolver.delete(mUri,MediaStore.Audio.Playlists.Members.AUDIO_ID +" = "+ audioId , null);
    Toast.makeText(DefaultSongList.this, "Song removed from Playlist.", Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:19:40.637

尝试这个：

```
public void removePlaylistMember(Context context, long memberid,
        long mplaylistid) {
    try {
        Uri uri = MediaStore.Audio.Playlists.Members.getContentUri(
                "external", mplaylistid);
        String selection = MediaStore.Audio.Playlists.Members.AUDIO_ID
                + "=?";
        String selectionargs[] = { String.valueOf(memberid) };
        context.getContentResolver().delete(uri, selection, selectionargs);
    } catch (Exception e) {
    }
} 
```

# javascript - 如何使用 CSS3 功能覆盖幻灯片效果以溶解 JQuery Mobile 中的效果？

> ID：14230107
> 
> 赞同：2
> 
> 时间：2013-01-09T07:16:44.607
> 
> 标签：javascript, jquery, css, jquery-mobile

我需要覆盖默认的幻灯片效果来溶解效果。

调用函数时`changePage`，我需要将当前页面慢慢溶解到新页面。

我尝试使用以下 CSS

```
@keyframes dissolve {
    0% { opacity:1; }
    5% { opacity:0.9;}
    15% { opacity:0.7;}
    25% { opacity:0.5;}
    35% { opacity:0.3;}
    45% { opacity:0;}
    55% { opacity:0.2;}
    65% { opacity:0.4;}
    75% { opacity:0.6;}
    85% { opacity:0.8;}
    95% { opacity:0.9;}
    100% { opacity:1;}
}
.in, .out, .slide.in, .slide.out, .slide.out.reverse, .slide.in.reverse {
    -webkit-animation-name: dissolve;
    -moz-animation-name: dissolve;
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation-duration: 350ms;
    -moz-animation-timing-function: ease-in-out;
    -moz-animation-duration: 350ms

} 
```

我用上面的 CSS创建了一个[小提琴。](http://jsfiddle.net/justin_j/xMDaY/2/)

上述代码的页面转换不流畅。

如何纠正页面转换以顺利运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T21:27:57.133

您还需要@keyframes 中的供应商前缀：@-webkit-keyframes 等等..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T04:22:30.807

我已经通过 css 使用关键帧并覆盖jQuery Mobile的**CSS获得了溶解效果。**

请在**CSS**中添加`@-webkit-keyframes`、`@-moz-keyframes`和，如下所示。`@-o-keyframes`**`@keyframes`**

 **```
@keyframes dissolve-out {
    0% { opacity: 1; }
    20% { opacity: 0.5; }
    40% { opacity: 0.2; }
    60% { opacity: 0; }
    80% { opacity: 0; }
    100% { opacity: 0; }
}
@keyframes dissolve-in {
    0% { opacity: 0; }
    20% { opacity: 0; }
    40% { opacity: 0; }
    60% { opacity: 0.2; }
    80% { opacity: 0.6; }
    100% { opacity: 1; }
}

.slideup.in, .slide.in, .slide.in.reverse {
    -webkit-animation: dissolve-in;
    -moz-animation: dissolve-in;
    -webkit-animation-timing-function: ease-in-out;
    -moz-animation-timing-function: ease-in-out;
    -webkit-animation-duration: 3s !important;
    -moz-animation-duration:3s !important;
}
.slide.out, .slide.out.reverse {
    -webkit-transform: translateX(0%);
    -webkit-animation: dissolve-out;
    -moz-transform: translateX(0%);
    -moz-animation: dissolve-out;
    -webkit-animation-timing-function: ease-in-out;
    -moz-animation-timing-function: ease-in-out;
    -webkit-animation-duration: 3s !important;
    -moz-animation-duration:3s !important;
} 
```

请看[演示](http://jsfiddle.net/xMDaY/4/)。

上面的**CSS**会给你一个溶解效果，覆盖 jQuery Mobile 中页面转换的默认幻灯片效果。**

# rspec - 如何让 rspec 在运行时打印失败的测试回溯*？

> ID：14230113
> 
> 赞同：11
> 
> 时间：2013-01-09T07:17:07.370
> 
> 标签：rspec, rspec2, rspec-rails, guard

我们的测试需要一段时间才能运行，并且总有这 5 到 10 分钟的时间段我们知道哪个测试失败了，但是在套件完成之前我们看不到失败消息或回溯。在回溯发生时查看回溯会更有效率。这可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T10:13:41.463

你有两个选择：

**1) 快速失败**

```
# spec/spec_helper.rb
RSpec.configure do |c|
  c.fail_fast = true
end 
```

..或从命令行使用它

```
$ bundle exec rspec spec/ --fail-fast
.F

Failures:
  1) Swinger should set the Capybara driver
     Failure/Error: Capybara.current_driver.should_not == :rack_test

Finished in 0.00479 seconds
2 examples, 1 failure 
```

基本上这个错误选项将停止测试套件并打印错误。

**2) 使用 rspec-instafail gem**

[https://github.com/grosser/rspec-instafail](https://github.com/grosser/rspec-instafail)

此 gem 将立即显示失败的规范，并将继续运行规范。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T08:11:34.360

我使用[Fuubar](https://github.com/jeffkreeftmeijer/fuubar)在套件继续运行时立即获取失败消息和回溯，并获得更有意义的指标来指示我的测试套件的进展情况。

# .net - 如何使用 asp.net 为 Web 应用程序创建补丁文件

> ID：14230114
> 
> 赞同：3
> 
> 时间：2013-01-09T07:17:07.737
> 
> 标签：.net, installshield, patch, web-deployment

我想了解 VS 2010 中是否有可用的规定或使用某些第三方工具为 Web 应用程序创建补丁程序/热修复程序。我不想发布副本和替换文件/dll 方法，而是使用 Web 设置来安装应用程序，这样只有从原始应用程序更改的文件才会更新并安装在虚拟目录中。

为了更清楚，我想做以下步骤：

步骤1

a) 创建一个有 10 个页面的 Web 应用程序

b) 使用 Web Setup Project 部署 Web 应用程序

第2步

**c) 更改 10 页中的 2 页中的功能**

**d) 为仅有的 2 个更改的文件和受影响的 Dll 创建一个补丁。**

步骤 - 3：

e) 运行作为补丁或热修复程序创建的安装文件。

现在，我想实现步骤 -2 部分中提到的**c)**和**d)点。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T05:29:59.420

假设您在创建初始 Web 设置项目以及您想要从中派生补丁的项目时遵循 MSI 补丁[指南...](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370579(v=vs.85).aspx)

基本准则（如果你搜索，还有很多其他的要遵循）：

*   确保您的 Web 项目具有有效的版本号 (1.2.3.4)
*   为您的初始版本构建安装程序
*   时间流逝....
*   根据 c) 的要求进行更改
*   更新 Web 项目版本 - DLL(s) 需要增加版本
*   更新 Web 设置项目属性 - 版本需要增加。可能是次要的 (XXX.YYY.ZZZ) <- 递增 Y。（默认为 1.0.0）
*   更新安装项目属性中的包代码
*   使用更改构建安装程序
*   对每个设置进行管理安装 (msiexec /a websetup.msi)
*   使用补丁创建实用程序创建补丁，将“旧”与您刚刚创建的“新”管理安装进行比较。（此步骤取决于您要使用的工具。我过去使用过 Installshield，以及直接 msimsp.exe - old guide [here](http://www.codeguru.com/csharp/.net/net_general/tipstricks/article.php/c9663/Creating-Installer-Patches-with-MSI-30.htm)）

您可以通过从以前和最新的管理员安装中删除它们来限制受补丁影响的文件（假设它们没有更改）。

确实，修补您的网站应该与 MSI 安装的任何其他文件集没有任何不同。请注意，微软似乎正在通过 msdeploy 进行网站部署，而不是为它们构建安装程序。对于内部部署，它更容易工作。

# php - jQuery下拉更改事件没有触发

> ID：14230115
> 
> 赞同：2
> 
> 时间：2013-01-09T07:17:08.807
> 
> 标签：php, jquery, html

我是 jQuery 新手，无法在下拉框中触发更改事件。

这是我的 HTML 标记

```
<select id="mini_bookinglocation" name="mini_bookinglocation">
    <option selected="selected" value="">Please Select</option>
</select> 
```

这是我的`jQuery`

```
$("#mini_bookinglocation").change(function() 
{
    alert(" test ");
}); 
```

我试过把它放在文档准备块里面和外面，但似乎我无法让它工作。我没有看到警报出来。

我还需要在文档准备部分保留这些功能吗？

任何人都可以帮忙吗？

谢谢

只是补充一点，上面的值将使用 jQuery 动态传递。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T07:19:09.073

您在下拉列表中只有一个值。所以价值永远不会改变。这就是为什么`.change`不叫。尝试在选择框中添加更多选项。

你也**应该**在里面写 jQuery 代码`document.ready`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T07:19:06.437

尝试添加更多选项，因为当值发生变化时会触发 change 事件。在您的情况下，值没有变化。

```
<select id="mini_bookinglocation" name="mini_bookinglocation">
    <option selected="selected" value="">Please Select</option>
    <option value="1">1</option>
    <option value="2">2</option>
   </select> 
```

来自[文档](http://api.jquery.com/change/)

> 当元素的值改变时，change 事件被发送到元素。对于选择框、复选框和单选按钮，当用户使用鼠标进行选择时会立即触发该事件，但对于其他元素类型，该事件会延迟到元素失去焦点为止。

*我还需要在文档准备部分保留这些功能吗？*

不，不需要将代码置于就绪函数下，因为发生更改时会触发事件

**[演示](http://jsfiddle.net/RqYtw/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T07:29:32.693

在文档就绪函数中分配更改事件侦听器

```
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
        <script type="text/javascript">

        $(document).ready(function() {
            $("#mini_bookinglocation").change(function() {
                alert(" test ");
            });
        });

        </script>
    </head>
    <body>
        <select id="mini_bookinglocation" name="mini_bookinglocation">
        <option selected="selected" value="">Please Select</option>
        <option value="A">Option A</option>
        <option value="B">Option B</option>
        <option value="C">Option C</option>
        <option value="D">Option D</option>
        <option value="E">Option E</option>
        </select>
    </body>
</html> 
```

这是一个**[例子](http://jsfiddle.net/axrwkr/BdpyX/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T10:49:20.073

我发现了问题。这是因为在我的代码中，我在一个地方使用 jQuery，而在另一个地方使用 $。我可以用谷歌搜索它，只是将所有内容都更改为 jQuery 并删除了所有 $ 并且它可以工作。很抱歉没有显示完整的代码，但我能够通过阅读所有答案学到很多东西。

谢谢大家的帮助。

# asp.net - 获取用户及其角色列表

> ID：14230121
> 
> 赞同：5
> 
> 时间：2013-01-09T07:17:40.023
> 
> 标签：asp.net, asp.net-mvc, asp.net-membership

我正在使用会员资格提供程序 asp.net mvc 4。我想获得一个用户列表及其角色，而不是`Roles.GetRolesForUser()`每个用户。

在我的应用程序中，业务需求规定用户只会被分配一个角色。

我目前在做什么：

```
 [GridAction]
    public ActionResult _GetUsers()
    {
        var users = Membership.GetAllUsers().Cast<MembershipUser>().Select(n => new AdminAccountEditModel
        {
            Role = Roles.GetRolesForUser(n.UserName).FirstOrDefault(),
            IsApproved = n.IsApproved,
            Email = n.Email,
            UserName = n.UserName
        }).ToList();

        return View(new GridModel(users));
    } 
```

非常低效。我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:34:01.280

过去，我在使用标准会员提供程序时有些作弊，并且直接针对 sql 中的表编写了许多复杂的查询。您正在寻找的是一个简单的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T00:10:03.990

我刚刚结束使用 EF 和 linq 来获得结果。

```
 [GridAction]
    public ActionResult _GetUsers()
    {

        var users = from user in xcsnEntities.Users
                    select new
                    {
                        Role = user.Roles.FirstOrDefault().RoleName,
                        IsApproved = user.Membership.IsApproved,
                        Email = user.Membership.Email,
                        UserName = user.UserName
                    };

        return View(new GridModel(users));
    } 
```

# java - 无法使用 Spring 属性持有者读取属性

> ID：14230126
> 
> 赞同：0
> 
> 时间：2013-01-09T07:18:11.317
> 
> 标签：java, spring, properties, selenium-webdriver

我尝试在我的 maven-java 项目中使用属性文件进行测试自动化。

这是 context.xml 文件

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:util="http://www.springframework.org/schema/util"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/util
       http://www.springframework.org/schema/util/spring-util-2.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/context ">

<util:properties id="properties" location="classpath:test-context.properties"/>

<context:property-placeholder properties-ref="properties" ignore-unresolvable="false"/>

<bean id="settings" class="util.TestSettings">
    <property name="properties" ref="properties"/>
</bean> 
```

这些是我的java类。

```
import java.util.Properties;

public class TestSettings {

private static Properties properties;

public static String getProperty(String key) {
    return properties.getProperty(key);
}

public void setProperties(Properties properties) {
    TestSettings.properties = properties;
}
} 
```

* * *

```
@ContextConfiguration(locations = "classpath:test-context.xml")
public class P_1_LoginPage extends AbstractTestNGSpringContextTests {

private P_1_LoginPage p1LoginPage;
private WebDriver driver;

public P_1_LoginPage(WebDriver driver) {

    this.driver = driver;

    driver.get(TestSettings.getProperty("base.url"));

}

@BeforeClass(alwaysRun = true)
public void BeforeTest() throws MalformedURLException {

    DesiredCapabilities capability = DesiredCapabilities.firefox();
    driver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), capability);
    p1LoginPage = new P_1_LoginPage(driver);

}

public void assertThere() {

   //assert here
} 
```

* * *

## 更新

这是我的 context.property 文件。

```
base.url=http://uname:pword@test.mysite.com.au/sdfdf
email.Queue.url=http://uname:pword@test.mysite.com.au/admin/admin/show_msgs 
```

当我尝试运行测试用例时，它会在这里给出一个空指针异常。

```
public static String getProperty(String key) {
    return properties.getProperty(key);
} 
```

有人可以帮我解决这里的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:44:17.317

您的代码违反了一些 Spring 准则，例如用于访问属性的静态字段，或`P_1_LoginPage`在容器外使用 new 运算符创建。但是 NullPointer 的主要问题是，Spring 上下文尚未初始化`@BeforeClass`（方法也应该是静态的，否则会导致异常）。替换`@BeforeClass`为`@Before`。

# android - 图片从 sd 卡到galleryview

> ID：14230128
> 
> 赞同：2
> 
> 时间：2013-01-09T07:18:22.210
> 
> 标签：android, android-sdcard

在我的应用程序中，我想将图像从 SD 卡获取到特定位置，我需要在画廊中显示，

我使用的代码正在附加

```
private Gallery gallery;
private ImageView imgView;
int position;
private byte[] data = { };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gridview);
      try{

        String filepath = "/sdcard/data/Crak/";
        File imagefile = new File(filepath +"abcd.jpg" );
        FileInputStream fis = new FileInputStream(imagefile);
        Bitmap bi = BitmapFactory.decodeStream(fis);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bi.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        data = baos.toByteArray();
        System.out.println("cnvrtn");
    }
    catch(Exception e) {
         e.printStackTrace();

    }

    final Bitmap bitmapimage = BitmapFactory.decodeByteArray(data, 0, data.length);
    position = 0;
    imgView = (ImageView) findViewById(R.id.ImageView01);
    imgView.setImageBitmap(bitmapimage);

    gallery = (Gallery) findViewById(R.id.examplegallery);
    gallery.setAdapter(new AddImgAdp(this));

    gallery.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView parent, View v, int position,
                long id) {
            imgView.setImageBitmap(bitmapimage);
            DisplayImage.this.position = position;
        }
    });
    System.out.println("Enter the activity//////////");

    imgView.setOnClickListener(new View.OnClickListener() {
        @SuppressWarnings("deprecation")

        @Override
        public void onClick(View paramView) {
            // TODO Auto-generated method stub

        }
    });

}

public class AddImgAdp extends BaseAdapter {
    int GalItemBg;
    private Context cont;

    @SuppressWarnings("null")
    public AddImgAdp(Context c) {
        cont = c;

        TypedArray typArray = obtainStyledAttributes(R.styleable.GalleryTheme);
        GalItemBg = typArray.getResourceId(
                R.styleable.GalleryTheme_android_galleryItemBackground, 0);
        typArray.recycle();
    }

    public int getCount() {
        return data.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        ImageView imgView = new ImageView(cont);
        final Bitmap bitmapimage = BitmapFactory.decodeByteArray(data, 0, data.length);
        imgView.setImageBitmap(bitmapimage);;
        imgView.setLayoutParams(new Gallery.LayoutParams(100, 100));
        imgView.setScaleType(ImageView.ScaleType.FIT_XY);
        imgView.setBackgroundResource(GalItemBg);

        return imgView;

    }
} 
```

问题是

1）我如何获取 SD 卡中特定文件夹中的所有图像
2）GalleryView 是无限的或没有尽头的长

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T07:29:47.207

这是从特定路径获取图像的**更新代码...**

```
package com.example.gall;

import java.io.File;
import java.util.ArrayList;
import java.util.List;
import com.example.gall.R;
import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.AdapterView.OnItemClickListener;

public class gall extends Activity {
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

Gallery g = (Gallery) findViewById(R.id.gallery);
g.setAdapter(new ImageAdapter(this, ReadSDCard()));

g.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent,
      View v, int position, long id) {
    }
});
}

private List<String> ReadSDCard()
{
 List<String> tFileList = new ArrayList<String>();

 //It have to be matched with the directory in SDCard
 File f = new File("/android/sdcard2/");

 File[] files=f.listFiles();

 for(int i=0; i<files.length; i++)
 {
  File file = files[i];
  /*It's assumed that all file in the path are in supported type*/
  tFileList.add(file.getPath());
 }
 return tFileList;
}

public class ImageAdapter extends BaseAdapter {
int mGalleryItemBackground;
private Context mContext;
private List<String> FileList;

public ImageAdapter(Context c, List<String> fList) {
    mContext = c;
    FileList = fList;
    TypedArray a = obtainStyledAttributes(R.styleable.gall);
    mGalleryItemBackground = a.getResourceId(
    R.styleable.gall_android_galleryItemBackground,0);
    a.recycle();
}

public int getCount() {
    return FileList.size();
}

public Object getItem(int position) {
    return position;
} 

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView,
  ViewGroup parent) {
    ImageView i = new ImageView(mContext);

    Bitmap bm = BitmapFactory.decodeFile(
      FileList.get(position).toString());
    i.setImageBitmap(bm);

    i.setLayoutParams(new Gallery.LayoutParams(150, 100));
    i.setScaleType(ImageView.ScaleType.FIT_XY);
    i.setBackgroundResource(mGalleryItemBackground);

    return i;
}
}

public TypedArray obtainStyledAttributes(int theme) {
// TODO Auto-generated method stub
return null;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:52:16.290

获取所有图像将导致内存溢出，最好的方法是以字符串形式保存路径列表并将其提供给画廊。如果您正在制作自定义画廊，则必须创建位图并进行垃圾收集。

这是访问 sd 卡的好方法：

```
String path = Environment.getExternalStorageDirectory().getPath()+ "/yourFolder/" 
```

这是获取列表的方法

```
File directory = new File(path);

if(directory.isDirectory)
{
    if(directory.list().length > 0 /*&& check if its an img etc*/)
    {
        for(String s: directory.list())
        {
            Log.d(TAG, "adding " + s);

            fileNames.add(s);
        }
    }
} 
```

您应该确保检查 sd-card 是否已加载

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T10:31:29.787

```
 //YOUR CODE HERE... 
String[] projection = new String[]{
        MediaStore.Images.Media._ID,
        MediaStore.Images.Media.DATA, // add DATA column
        MediaStore.Images.Media.BUCKET_DISPLAY_NAME,
        MediaStore.Images.Media.DATE_TAKEN,
        MediaStore.Images.Media.TITLE,

};
// Get the base URI for the People table in the Contacts content provider.
Uri images = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
Log.i("URI", images.toString());

        // Make the query.
Cursor cur = managedQuery(
        MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI,
        projection, // Which columns to return
        null,         // Which rows to return (all rows)
        null,       // Selection arguments (none)
        MediaStore.Images.Thumbnails.IMAGE_ID          // Ordering
        );

Log.i("ListingImages"," query count="+cur.getCount());

if (cur.moveToFirst()) {
    String bucket;
    String date;
    String name;

    int bucketColumn = cur.getColumnIndex(
        MediaStore.Images.Media.BUCKET_DISPLAY_NAME);

    int dateColumn = cur.getColumnIndex(
        MediaStore.Images.Media.DATE_TAKEN);

    int nameColumn = cur.getColumnIndex(
            MediaStore.Images.Media.TITLE);

        // Get the field values
        bucket = cur.getString(bucketColumn);
        date = cur.getString(dateColumn);
        name = cur.getString(nameColumn);
      int columnIndex = cur.getColumnIndex(MediaStore.Images.Media.DATA);
      String picPath = cur.getString(columnIndex);

         imageView.setImageBitmap(BitmapFactory.decodeFile(picPath));
        // Do something with the values.
        Log.i("ListingImages", " bucket=" + bucket 
               + "  name_taken=" + name);

} 
```

}

# android - AsyncTask 在 runInBackground 给出错误

> ID：14230130
> 
> 赞同：0
> 
> 时间：2013-01-09T07:18:29.217
> 
> 标签：android, android-asynctask

我正在尝试使用 AsyncTask 完成一些任务。但是当我完成它时。它没有显示任何类型的语法错误。但是在运行时它显示错误，如下图所示

我试图调试它，但可以得到问题所在。请帮忙

JsonParsingActivity.java

```
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.ListAdapter;
import android.widget.SimpleAdapter;

public class AndroidJSONParsingActivity extends ListActivity {

    final String TAG_PRODUCTS = "products";
    final String TAG_CID = "cid";
    final String TAG_NAME = "name";

    JSONArray products = null;
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        new Message().execute(this);
        // The service section
        startService(new Intent(this, UpdateService.class));

        /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_item,
                new String[] { TAG_NAME,}, new int[] {
                        R.id.name});

        setListAdapter(adapter);

    }

@Override
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();
        new Message().execute(this);

        ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_item,
                new String[] {TAG_NAME,}, new int[] {
                        R.id.name});

        setListAdapter(adapter);

    }
    //Belongs to update service
    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
//      stopService(new Intent(this, UpdateService.class));
    }

    class Message extends AsyncTask<Context, Integer, Long>{

        @Override
        protected Long doInBackground(Context... params) {
            // TODO Auto-generated method stub

                String url = "http://ensignweb.com/sandbox/app/comment11.php";
                            // getting JSON string from URL
                JSONObject json = jParser.getJSONFromUrl(url);

                try {
                    // Getting Array of Contacts
                    products = json.getJSONArray(TAG_PRODUCTS);

                    // looping through All Contacts
                    for(int i = products.length()-1; i >=0; i--){
                        JSONObject c = products.getJSONObject(i);

                        // Storing each json item in variable
                        String cid = c.getString(TAG_CID);
                        String name = c.getString(TAG_NAME);
                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_CID, cid);
                        map.put(TAG_NAME, name);

                        // adding HashList to ArrayList
                        contactList.add(map);
                        Log.d("value", contactList.toString());
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
                return null;
        }
    }

} 
```

它显示为 InnerSetException 和 setException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:43:31.503

`InnerSetException and setException`raise to provided 让您将结果设置为异常。

您必须重写该`done()`方法并尝试获得结果。

```
 @Override
    protected void done() {
        try {
            if (!isCancelled()) get();
        } catch (ExecutionException e) {
            //If Exception occurred, handle it.

        } catch (InterruptedException e) {
           throw new AssertionError(e);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:25:42.277

像这样更改您的 AsyncTask：

```
class Message extends AsyncTask<Void, Void, Void>{

     @Override
     protected Void doInBackground(Void... params) {
        // Your woriking

         return null;            
     }

    @Override
    protected void onPostExecute(Void result) {
    // TODO Auto-generated method stub
    super.onPostExecute(result);

    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_NAME,}, new int[] {
                    R.id.name});

    setListAdapter(adapter);         
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:21:17.510

在类 Message 中的 postExecute()(overridden method) 方法中使用它

```
ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_NAME,}, new int[] {
                    R.id.name});

    setListAdapter(adapter); 
```

# java - 用户输入后将输出重定向到文本文件

> ID：14230131
> 
> 赞同：1
> 
> 时间：2013-01-09T07:18:29.533
> 
> 标签：java, linux, eclipse

我创建了一个 JNDI java 程序，它提供不同类型的输出作为用户规范。例如，用户可以使用不同的参数运行程序：

```
java MyProg -o row -u username -l uId1,uId2,.... 
```

这里用户可以指定选项： -o：输出格式（行基础/列基础） -u：连接到不同用户的服务器（然后程序将要求输入密码） -l：程序将显示给定用户 ID 的输出（s )

现在问题是我为每个选项定义了一个默认值（配置），因此如果他想更改配置，则由用户决定，然后他将指定该选项。因此用户可以将程序称为：

```
java MyProg
java Myprog -o col
java MyProg -u username 
java MyProg -l uId1,uId2,...
java MyProg -l uId1,uId2,... -o col 
```

等等..

因此，每当用户使用 -u（更改用户名）时，程序都会在显示结果后询问密码。

现在我想提供一种工具，用户可以将控制台输出重定向到文本文件，但是当我尝试“java MyProg > filename.txt”时它不起作用。

请告诉我如何将输出重定向到文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:33:05.143

`System.out`是一个[PrintStream](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html)（这就是为什么您可以在其上使用诸如`println()`etc 之类的方法的原因）。

您可以做的是，如果您看到重定向到文件的选项，只需`PrintStream`为目标文件创建一个新的：

```
PrintStream stdout = System.out;

// outfile is a String
if (outfile != null)
    stdout = new PrintStream(outfile); 
```

并使用`stdout`而不是`System.out`输出结果。

# php - 根据浏览器位置显示动态内容

> ID：14230133
> 
> 赞同：0
> 
> 时间：2013-01-09T07:18:53.250
> 
> 标签：php

我有一个想法，在我的页面`index.php`的内容部分中编写一个页面模板，通过确定浏览器所在的 url 并基于该 URL 获取内容页面来动态包含内容。不过有几个问题：

```
<?php
// /index.php

?>
<!-- html tags and menu/layout divs as needed go here -->

<section id="content">
<?php 
    function curPageURL()
    {
        $page = substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1); 
        return $page;
    }

    $page = curPageURL();
        switch ($page)
        {
            case "index.php":
                include_once("includes/home.php");
                break;
        }
?>
</section>

<!-- footer and such goes here --> 
```

虽然这可行，但我在进一步应用这个概念时遇到了麻烦。我似乎无法理解导航应该如何工作或如何将此概念应用于我网站中的其他页面......

如果有人可以提供建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:34:09.817

您可以使用一个`.htaccess`文件（放在与 index.php 相同的目录中）。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?uri=$1 [L,QSA] 
```

然后在 index.php 中，您可以通过以下方式获取页面：

```
$page = $_GET['uri']; 
```

因此，如果您的用户访问，`example.com/home`则 page 变量将设置为`home`.

# java - Flyway Ant 构建未迁移

> ID：14230137
> 
> 赞同：0
> 
> 时间：2013-01-09T07:19:02.943
> 
> 标签：java, eclipse, flyway

我正在使用下面给定的 xml 文件将 flyway 作为 ant 任务执行。我正在使用“Run as ant”选项在 Eclipse 中执行 ant 文件。它显示构建成功，但没有发生飞行路径迁移。

您能否检查一下，如果我需要更正，请告诉我。

```
<path id="flyway.lib.path">
    <fileset dir="${flyway.lib.dir}" includes="**/*.jar"/>
</path>

<path id="flyway.classpath">
    <fileset dir="${sql.dir.emlogis}" includes="**/*.sql"/>
    <fileset dir="${sql.dir.generator}" includes="**/*.sql"/>
    <fileset dir="${sql.dir.pgf}" includes="**/*.sql"/>
</path>

<target name="init-flyway">
    <taskdef uri="antlib:com.googlecode.flyway.ant"
                resource="com/googlecode/flyway/ant/antlib.xml"
                classpathref="flyway.lib.path"/>
  <property name="flyway.driver" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
  <property name="flyway.url" value="jdbc:sqlserver://localhost:1433;databaseName=ElmGenerator"/>
  <property name="flyway.user" value="sa"/>
  <property name="flyway.password" value="EmLogis123"/>
  <property name="flyway.baseDir" value="${sql.dir.generator}"/>
  <property name="flyway.classpath" value="${sql.dir.generator}"/>
  <property name="flyway.table" value="schema_history"/>
 <property name="flyway.locations" value="${sql.dir.emlogis},${sql.dir.generator}"/>
    <property name="flyway.placeholders.custName" value="Maple"/>
    <property name="flyway.placeholderPrefix" value="$("/>
    <property name="flyway.placeholderSuffix" value=")"/>
    <property name="flyway.outOfOrder" value="false"/>
    <property name="flyway.validateOnMigrate" value="true"/>
    <property name="flyway.cleanOnValidationError" value="false"/>
    <property name="flyway.initOnMigrate" value="false"/>
</target>

<target name="deployDB" depends="init-flyway">
    <flyway:migrate>
        <locations>
            <location path="${sql.dir.emlogis}"/>
            <location path="${sql.dir.generator}"/>
        </locations>
        <placeholders>
            <placeholder name="custName" value="Elm"/>
        </placeholders>
    </flyway:migrate>
</target> 
```

问候， 卡维莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:49:54.213

2件事：

*   不要设置baseDir。它已被位置取代。
*   位置是 flyway.classpath 下面的路径

例子：

```
flyway.classpath=/my/dir/**.*.sql
flyway.locations=db 
```

然后 Flyway 将在 /my/dir/db 中寻找迁移

您已将类路径和位置设置为相同的值，这是不正确的。

# go - 如何将零终止字节数组转换为字符串？

> ID：14230145
> 
> 赞同：537
> 
> 时间：2013-01-09T07:19:48.017
> 
> 标签：go

我需要阅读`[100]byte`以传输一堆`string`数据。

因为不是所有的`string`s 都正好是 100 个字符长，所以剩下的部分`byte array`用`0`s 填充。

如果我转换`[100]byte`为`string`by: `string(byteArray[:])`，尾随`0`s 显示为`^@^@`s。

在 C 中，`string`将终止于`0`，那么在 Go 中将其转换`byte array`为的最佳方法是什么？`string`

* * *

## 回答 #1

> 赞同：546
> 
> 时间：2013-01-09T07:24:38.720

将数据读入字节片的方法返回读取的字节数。您应该保存该号码，然后使用它来创建您的字符串。如果`n`是读取的字节数，您的代码将如下所示：

```
s := string(byteArray[:n]) 
```

要转换完整的字符串，可以使用：

```
s := string(byteArray[:len(byteArray)]) 
```

这相当于：

```
s := string(byteArray[:]) 
```

如果由于某种原因你不知道`n`，你可以使用`bytes`包来找到它，假设你的输入没有嵌入空字符。

```
n := bytes.Index(byteArray[:], []byte{0}) 
```

或者正如 icza 指出的那样，您可以使用以下代码：

```
n := bytes.IndexByte(byteArray[:], 0) 
```

* * *

## 回答 #2

> 赞同：375
> 
> 时间：2013-09-04T13:52:33.707

采用：

```
s := string(byteArray[:]) 
```

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2016-11-02T08:57:14.133

简单的解决方案：

```
str := fmt.Sprintf("%s", byteArray) 
```

不过，我不确定它的性能如何。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-01-09T15:30:00.473

例如，

```
package main

import "fmt"

func CToGoString(c []byte) string {
    n := -1
    for i, b := range c {
        if b == 0 {
            break
        }
        n = i
    }
    return string(c[:n+1])
}

func main() {
    c := [100]byte{'a', 'b', 'c'}
    fmt.Println("C: ", len(c), c[:4])
    g := CToGoString(c[:])
    fmt.Println("Go:", len(g), g)
} 
```

输出：

```
C:  100 [97 98 99 0]
Go: 3 abc 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-09T22:56:42.463

以下代码正在寻找'\0'，并且在问题的假设下，可以认为数组已排序，因为所有非'\0'都在所有'\0'之前。如果数组可以在数据中包含“\0”，则此假设不成立。

使用二进制搜索找到第一个零字节的位置，然后切片。

您可以像这样找到零字节：

```
package main

import "fmt"

func FirstZero(b []byte) int {
    min, max := 0, len(b)
    for {
        if min + 1 == max { return max }
        mid := (min + max) / 2
        if b[mid] == '\000' {
            max = mid
        } else {
            min = mid
        }
    }
    return len(b)
}
func main() {
    b := []byte{1, 2, 3, 0, 0, 0}
    fmt.Println(FirstZero(b))
} 
```

天真地扫描字节数组以查找零字节可能会更快，尤其是在您的大多数字符串都很短的情况下。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-21T07:02:23.147

当您不知道数组中非零字节的确切长度时，您可以先对其进行修剪：

> 字符串（字节。修剪（arr，“\x00”））

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-23T05:46:40.893

仅用于性能调整。

```
package main

import (
    "fmt"
    "reflect"
    "unsafe"
)

func BytesToString(b []byte) string {
    return *(*string)(unsafe.Pointer(&b))
}

func StringToBytes(s string) []byte {
    return *(*[]byte)(unsafe.Pointer(&s))
}

func main() {
    b := []byte{'b', 'y', 't', 'e'}
    s := BytesToString(b)
    fmt.Println(s)
    b = StringToBytes(s)
    fmt.Println(string(b))
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-26T17:47:23.453

用这个：

```
bytes.NewBuffer(byteArray).String() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-30T16:31:03.750

虽然不是非常高效，但唯一可读的解决方案是：

```
 // Split by separator and pick the first one.
  // This has all the characters till null, excluding null itself.
  retByteArray := bytes.Split(byteArray[:], []byte{0}) [0]

  // OR

  // If you want a true C-like string, including the null character
  retByteArray := bytes.SplitAfter(byteArray[:], []byte{0}) [0] 
```

具有 C 样式字节数组的完整示例：

```
package main

import (
    "bytes"
    "fmt"
)

func main() {
    var byteArray = [6]byte{97,98,0,100,0,99}

    cStyleString := bytes.SplitAfter(byteArray[:], []byte{0}) [0]
    fmt.Println(cStyleString)
} 
```

具有不包括空值的 Go 样式字符串的完整示例：

```
package main

import (
    "bytes"
    "fmt"
)

func main() {
    var byteArray = [6]byte{97, 98, 0, 100, 0, 99}

    goStyleString := string(bytes.Split(byteArray[:], []byte{0}) [0])
    fmt.Println(goStyleString)
} 
```

这分配了一片字节片。因此，如果大量或重复使用它，请注意性能。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-01-09T07:33:15.360

*   使用切片而不是数组进行读取。例如，[`io.Reader`](http://golang.org/pkg/io/#Reader)接受切片，而不是数组。

*   使用切片而不是零填充。

例子：

```
buf := make([]byte, 100)
n, err := myReader.Read(buf)
if n == 0 && err != nil {
    log.Fatal(err)
}

consume(buf[:n]) // consume() will see an exact (not padded) slice of read data 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-03-12T21:12:52.967

这是一个删除空字节的选项：

```
package main
import "golang.org/x/sys/windows"

func main() {
   b := []byte{'M', 'a', 'r', 'c', 'h', 0}
   s := windows.ByteSliceToString(b)
   println(s == "March")
} 
```

*   [https://pkg.go.dev/golang.org/x/sys/unix#ByteSliceToString](https://pkg.go.dev/golang.org/x/sys/unix#ByteSliceToString)
*   [https://pkg.go.dev/golang.org/x/sys/windows#ByteSliceToString](https://pkg.go.dev/golang.org/x/sys/windows#ByteSliceToString)

# c# - 多线程还是不多线程？

> ID：14230150
> 
> 赞同：5
> 
> 时间：2013-01-09T07:20:03.923
> 
> 标签：c#, multithreading, .net-4.0

假设一个 FIFO（*一个线程安全的*）有项目被添加到它（*我们不在乎如何*）

```
|__|  |
|  |  |
|__|  |
|  |  |
|__|  V
| d|
|__|
| c|
|__|
| b|
|__|
| a| 
```

现在让我们说项目（一个接一个）应该插入到 *另一个*并发集合中。

数据插入的速率是*动态*的。

我想以最快的方式做到这一点。（将所有元素从 转移`Fifo`到`collection`）。

但我有一个冲突：

*   我可以使用*一根*线从 中拉出物品`Fifo`并将它们插入`collection`. 但是我不会使用可以帮助我的核心/其他线程。

*   我可以使用多个消费者线程从中获取项目`Fifo`，但是`Fifo`（读取时）上的内部锁定和`collection`（写入时）上的内部锁定最终会降低性能。

我的意思是，如果我有巨大的消费者线程，也会有巨大的内部锁定与先进先出/集合，*再加上*许多上下文切换。

*我怎样*才能以正确的方式解决这类问题？指导方针是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:28:22.000

多个线程争夺同一个并发集合总是会成为瓶颈的情况。线程越多，问题通常会变得更糟，但退化的速度取决于锁定机制。我希望 .NET 4.0 中的新并发集合是无锁的，或者至少使用非阻塞锁，因此它们应该在一定程度上是争用友好的。

由于这个问题似乎是开放式的，我建议您简单地尝试不同数量的线程，并在 fifo 争用和您想要实现的吞吐量之间找到一个平衡点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:32:31.833

如果您在集合之间进行最少的处理，请仅使用一个线程。如果您有多个目标集合，那么您可能想要使用多个线程。或者，如果两端的数据结构是具有高级锁定的复杂结构，它实际上支持多线程插入，而不仅仅是锁定东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:36:43.100

我会考虑为此使用任务并行库（TPL）。

您可以保留一个队列，当它有项目时，让并行框架为您完成所有繁重的工作。无需使用所有繁琐的代码管理线程来处理您自己的线程池。

必须承认我自己还没有这样做，但如果我处于你的情况，我会刷新我的 TPL 技能并开始考虑任务而不是线程 x。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T07:46:04.940

如果我们可以访问两个集合的内部，这可以通过几个非交互线程来完成。例如，如果该堆栈是一个已知大小的链表，则两个线程可以从两端处理它直到它们相遇，并且它们可以构建一个新的链表，一个将元素附加到尾部，另一个附加到头部。

另一方面，如果堆栈也是一个数组，那么可能没有什么比单线程上的一些 memcpy 模拟更快了。

# sencha-touch - 如何在sencha touch中使用第三方扩展

> ID：14230153
> 
> 赞同：1
> 
> 时间：2013-01-09T07:20:15.180
> 
> 标签：sencha-touch, sencha-touch-2

[我正在尝试将此链接](https://market.sencha.com/users/21/extensions/43)上的第三方扩展名仅用于`time`字段。如何在 sencha touch 2.1 中使用它？

**编辑**

我添加了扩展，`ux\picker`然后我使用了以下代码

```
Ext.define('HB.view.Search', {
extend: 'Ext.form.Panel',
xtype: 'search',

Ext.require(['Ext.ux.picker.DateTimePicker']),

config: {
    title: 'Search',
    layout: 'fit',
    scrollable: true,
    styleHtmlContent: true,
    styleHtmlCls: 'searchpage',
    //html: ['<h1>Welcome to MyApp</h1>'].join(''),

    items: [
        {
            xtype: 'titlebar',
            title: 'Search Page',
            docked: 'top'
        },
        {
            xtype: 'textfield',
            name: 'from',
            placeHolder: 'From'
        },
        {
            xtype: 'textfield',
            name: 'to',
            placeHolder: 'To'
        },
        {
            xtype: 'datepickerfield',
            name: 'date',
            value: new Date()
        },
        {
            xtype: 'datetimepickerfield',
            name: 'time',
            value: new Date()
        }
    ]
},

//style: 'height:' + (Ext.getBody().getHeight()) + 'px;'
height: Ext.getBody().getHeight()
}); 
```

但它给了我这个错误

```
GET http://localhost/HelsinkiBus/touch/src/DateTimePicker.js?_dc=1357800622746 404 (Not Found) 
Uncaught Error: [Ext.Loader] Failed loading 'touch/src/DateTimePicker.js', please verify that the file exists 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-11T08:55:41.717

它是 Ext.require(['Ext.ux.field.DateTimePicker']);。

DateTimePicker -> ux/字段/DateTimePicker

日期时间-> ux/picker/日期时间

我浪费了 6 个小时才找到这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:14:59.743

只需将文件`ux`夹中的`ux\picker`文件放在项目中的文件夹中并使用`xtype: 'datetimepickerfield'`.
在您可以使用此组件之前，您需要先加载所需的文件。你可以这样做[`Ext.require`](http://docs.sencha.com/touch/2-1/#!/api/Ext.Loader-method-require)

# objective-c - 文本字段的 rightView 按钮问题。不为我工作 UITextFieldViewModeWhileEditing

> ID：14230156
> 
> 赞同：0
> 
> 时间：2013-01-09T07:20:33.073
> 
> 标签：objective-c, uitableview, uibutton

我正在使用 UITableview 使用搜索栏。为了搜索文本，我正在使用 textField 并将其添加到 tableView 的 contentInset 中。为了清除文本，我正在使用 rightView 按钮。在这里，我遇到了一个奇怪的问题，即在编辑文本时我无法显示该 rightView 按钮。

```
txtSearch.rightView =  [self overlayButtonRight];
txtSearch.rightViewMode = UITextFieldViewModeWhileEditing;

- (UIButton *)overlayButtonRight {
if (!overlayButtonRight) {
    overlayButtonRight = [UIButton buttonWithType:UIButtonTypeCustom] ;
    overlayButtonRight.frame = CGRectMake(0, 0 , 25, 14);
    UIImage *overlayImage = [UIImage imageNamed:@"checkMark_right_green.png"];
    if (overlayImage) {
        [overlayButtonRight setImage:overlayImage forState:UIControlStateNormal];

    }
}
return overlayButtonRight; 
```

}

在这里，我描述了我是如何应用这个按钮的。使用`UITextFieldViewModeWhileEditing`它对我不起作用。

还有一件事，这在 ios 5 中运行良好，但在 ios6 中无法运行。

如果您有解决方案，请告诉我。

提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:51:26.820

这似乎是一个iOS错误..

这是我做的。。

在您的文本字段子类中

```
 -(id)initWithCoder:(NSCoder *)aDecoder
{
    if (self = [super initWithCoder:aDecoder]) {

        [self addTarget:self action:@selector(didEditting:) forControlEvents: UIControlEventEditingChanged];

}

-(void) didStartTyping:(id)sender {
    if(self.text){
        self.rightViewMode = UITextFieldViewModeAlways;
    }else{
        self.rightViewMode = UITextFieldViewModeNever;
    }
}

- (BOOL)becomeFirstResponder{
    BOOL ret = YES ;
    ret = [super becomeFirstResponder] ;
    if( ret & self.text.length]){
        self.rightViewMode = UITextFieldViewModeAlways;
    }else{
        self.rightViewMode = UITextFieldViewModeNever;
    }

    return ret ;
}

- (BOOL)resignFirstResponder
{
    BOOL ret = YES ;
    ret = [super resignFirstResponder] ;
    if( ret )
        self.rightViewMode = UITextFieldViewModeNever;
    return ret ;
} 
```

我想当我遇到同样的问题时，我在某处找到了类似的解决方案。再也找不到了。

# mysql - 如何将 3 个单选按钮列表值存储到 mysql 的单列不同行中？

> ID：14230157
> 
> 赞同：0
> 
> 时间：2013-01-09T07:20:32.883
> 
> 标签：mysql, database, list, button, radio

我有 3 个不同的单选按钮列表。用户可以为每个单选按钮列表选择一个值，然后将其存储到mysql数据库中。如何将它们存储在单列、不同的行中？请帮忙！谢谢。

```
//sql

$sql = "INSERT into ratings (product, rating) VALUES ('".$key."', '".."')";
$result = $mysqli->query($sql); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:25:29.470

对多插入行使用 INSERT 语句。

```
INSERT INTO ratings (product, rating) 
VALUES (1, 1), 
       (1, 2), 
       (1, 3); 
```

检查此链接[**MySQL INSERT 语句**](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:30:47.133

要将单个或多个选项存储为单个记录（列），我建议将选项编码为整数值。

如果您有许多独占选项，则可以将它们编码为整数值。

```
option1 encoded as 1
option2 encoded as 2
option3 encoded as 3
option4 encoded as 4
option5 encoded as 5 
```

如果您的选项很少且非排他性，则应将它们编码为整数中的位：

```
option1 encoded as 1 (binary ...00001)
option2 encoded as 2 (binary ...00010)
option3 encoded as 4 (binary ...00100)
option4 encoded as 8 (binary ...01000) 
```

第二种表示允许您在单个整数值中存储 2 个或更多选择：

```
option2 + opton4 encoded as 8 + 2 = 10 (binary ...01010)
(no option selected) encoded as 0      (binary ...00000) 
```

有关 bitvise 操作的更多信息： [http ://en.wikipedia.org/wiki/Bitwise_operation](http://en.wikipedia.org/wiki/Bitwise_operation)

# javascript - 允许用户向任何方向旋转地图？

> ID：14230159
> 
> 赞同：1
> 
> 时间：2013-01-09T07:20:40.563
> 
> 标签：javascript, android, html, google-maps, cordova

我的应用程序中有一个谷歌地图页面，它是用 Html5 制作的，并用 PhoneGap 包装。我想允许用户向任何方向**旋转**地图，**而不仅仅是放大和缩小**。我怎样才能做到这一点？

我的偏好是在 JavaScript 中执行此操作，但如果这不可能，那么我将通过 Android 执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:26:55.160

实际问题是关于谷歌地图的自定义旋转。我建议使用任何非标准解决方案作为临时解决方案。有一个很好的[演示](http://isithackday.com/hacks/map-rotate/)，它是基于[jQuery 的旋转和缩放插件](http://www.zachstronaut.com/posts/2009/08/07/jquery-animate-css-rotate-scale.html)

![在此处输入图像描述](../Images/b1c7c4bcfb6f4e25d1df852f60dce490.png)

# android - 如何检查我正在启动的活动是否是正在运行的活动？

> ID：14230170
> 
> 赞同：1
> 
> 时间：2013-01-09T07:21:25.827
> 
> 标签：android, android-activity

我有 6 个按钮，对于第一个 3 个按钮，我想开始相同的活动，而其他 3 个按钮则分开新活动。

因此，当我单击第一个按钮，然后单击启动相同活动的第二个按钮时，就会出现问题，因为我们无法从相同的活动开始相同的活动。

所以我只需要知道天气我要开始的活动是否与正在运行的活动相同，基于此，如果相同的活动，那么我将只更新一些 UI 内容，否则会开始新的活动。

所以任何人都可以帮助我知道这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:29:59.060

这是使用活动管理器执行此操作的好方法。您基本上可以从活动管理器中获取 runningTasks。它总是首先返回当前活动的任务。从那里你可以得到topActivity。

[这里的例子](http://qtcstation.com/2011/01/getting-info-about-your-currently-running-activities/)

有一种从 ActivityManager 服务获取正在运行的任务列表的简单方法。您可以请求在手机上运行的最大任务数，默认情况下，首先返回当前活动的任务。

一旦你有了它，你可以通过从你的列表中请求 topActivity 来获得一个 ComponentName 对象。

这是一个例子。

```
ActivityManager am = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);

     // get the info from the currently running task
     List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1); 

     Log.d("topActivity", "CURRENT Activity ::"
             + taskInfo.get(0).topActivity.getClassName());

     ComponentName componentInfo = taskInfo.get(0).topActivity;
   componentInfo.getPackageName(); 
```

您的清单需要以下权限：

```
uses-permission android:name="android.permission.GET_TASKS" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:33:41.727

您可以检查活动的类，例如（假设“this”是当前活动）：

```
if (this instanceof ActivityClassYouGoingToStart) {
    // update UI
} else {
    // start new activity
} 
```

# ipad - 如何像 iphone 应用程序一样添加删除效果？

> ID：14230171
> 
> 赞同：7
> 
> 时间：2013-01-09T07:21:32.143
> 
> 标签：ipad, animation

我必须在我的 ipad 应用程序中提供删除缩略图动画，就像 iphone/ipad 应用程序删除效果一样。任何身体帮助我请附上样品照片![在此处输入图像描述](../Images/e2810a6c1e5bd25dcceae95aa26712eb.png)

如果您需要更多详细信息，请在评论中提及

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T07:30:22.420

我已经使用`CGAffineTransformMakeRotation`. 不知道有没有其他更好的方法。但是我所做的是我的逻辑，你可以照原样复制它，你只需要在该视图的左上方添加一个删除按钮。在下面的代码中，我只是为缩略图或任何视图设置动画，就像 iPad 在其主屏幕上所做的那样。一件事，您需要全局声明 int 方向。每次调用此方法时，都会设置 direction = 1;

```
 -(void)shakeToDelete:(UIView *)shakeMe
{

    [UIView animateWithDuration:0.1 animations:^
     {
         shakeMe.transform = CGAffineTransformMakeRotation(0.05 * direction);
     }
                     completion:^(BOOL finished)
     {

         direction = direction * -1;
         [self shakeToDelete:shakeMe];
     }];
 } 
```

/// 编辑我尝试过这种方式并让它在我的示例屏幕中工作，如照片中所附 ![在此处输入图像描述](../Images/fa16ceae02a4459e63998db9602055e9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T10:04:56.873

您最好使用自动反转和循环动画，因为一遍又一遍地创建动画将满足手机内存。

使用此代码，仅保留一个动画。

```
view.transform = CGAffineTransformMakeRotation(-kDeleteAnimationAmplitude);

[UIView animateWithDuration:0.1 delay:0 options:UIViewAnimationOptionRepeat|UIViewAnimationOptionAutoreverse animations:^{
    view.transform = CGAffineTransformMakeRotation(kDeleteAnimationAmplitude);
} completion:nil]; 
```

然后，如果您想停止动画，只需调用：

```
[view.layer removeAllAnimations]; 
```

# c++ - 为变量存储设计内存块

> ID：14230172
> 
> 赞同：1
> 
> 时间：2013-01-09T07:21:35.427
> 
> 标签：c++, c, memory, gcc

这个问题的灵感来自`Python`于变量存储的内存管理技术。我想用 C 语言实现类似的功能。

通常，大型运行程序中的大多数变量都有值`0`和`1`. 假设 100 个数据类型的变量`int`具有值`0`or `1`，所以我们使用`100 * sizeof(int) = 400`的是内存字节。相反，我们可以将每个变量指向具有引用计数的结构，这将内存使用量减少到只有几个字节。当引用计数达到 时，该结构被解除分配`0`。

```
struct var
{
    int value;
    int refCount;
} 
```

我想要实现的是，当我定义几个`int`'s 时，链接列表如下：

```
void foo()
{
    int a = 0, b = 0, c = 0;
    int i = 1, j = 1;
    int x = 7;
    int p = 5, q = 5;
} 
```

导致以下链接列表

```
[Head] <-> [0,3] <-> [1,2] <-> [7,1] <-> [5,2] <-> [Tail] 
```

这里`a`，`b`并`c`指向节点`[0,3]`。`i`并`j`指向节点`[1,2]`等等。现在，我如何*覆盖*变量的内存分配`C`并实现我自己的算法来做到这一点？是否`C++`提供任何此类功能？

**更新**：如果我们更改`a = 9`，则创建一个新节点，`[9,1]`并将前一个节点更改为`[0,2]`。当引用计数达到`0`时，它被取消分配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:24:46.247

你必须自己实现它，而且它不会是透明的。您的变量将不再是`int`s，而是指向某物或其他东西的指针。

另外，请注意，在您的示例中，如果您更改`a`,`b`并且`c`也将被更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:47:56.047

要么您不知道数据的性质，那么您必须按照您的描述制定一种以特定方式动态分配数据的算法。

或者您在编译时就知道数据的性质，然后您可以决定以您喜欢的方式分配它。“覆盖 C 分配变量的方式”没有任何意义，因为让程序在运行时计算编译时自身需要的分配是没有意义的。

实现这一点的最佳方法可能是拥有一个生成 C 代码的脚本。

# c# - 如何使用 LINQ 从数据库设置自动完成功能？

> ID：14230174
> 
> 赞同：4
> 
> 时间：2013-01-09T07:21:40.700
> 
> 标签：c#, winforms, linq, autocomplete

我想使用 LINQ 将自动完成功能设置为文本框。我已经以一种方式使用 sqlCommands。代码是

```
 OleDbCommand cmdinst = new OleDbCommand("select distinct cst_City from cstTable", con);
            OleDbDataReader drinst = cmdinst.ExecuteReader();
            AutoCompleteStringCollection instcol = new AutoCompleteStringCollection();
            while (drinst.Read())
            {
                instcol.Add(drinst.GetString(0));
            }
            txtCity.AutoCompleteCustomSource = instcol; 
```

有了这个，我可以将 autocomplecustom 源添加到文本框。现在我想**用 LINQ 添加相同的功能**。请任何人帮助我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:56:23.970

`AutoCompleteStringCollection`一个一个地添加字符串效率不高。因为当每个字符串被添加时，如果没有足够的空间容纳新字符串，内部数组列表会确保其容量并调整存储大小（使其大两倍）。此外，每个添加的字符串`CollectionChangedEvent`都会尝试触发。当您通过`AddRange`存储添加值时，只会调整一次大小，并且`CollectionChangedEvent`只会触发一次。

您也可以简单地应用`Distinct`运算符，而不是分组和选择第一组。

```
var db = FooDataContext();
var cities = db.cstTable.Select(c => c.cst_City).Distinct().ToArray();

AutoCompleteStringCollection instcol = new AutoCompleteStringCollection();
instcol.AddRange(cities);
txtCity.AutoCompleteCustomSource = instcol; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:31:09.323

使用[Linq To SQL](http://msdn.microsoft.com/en-us/library/bb399398.aspx)

您的查询减少到

```
 AutoCompleteStringCollection instcol = new AutoCompleteStringCollection();
 dbContext.CstTable.Select (x => x.cst_City)
          .GroupBy (x=>x).Select (grouping => grouping.First())
           .ToList().ForEach (x=> instcol.Add(x))
 txtCity.AutoCompleteCustomSource = instcol; 
```

`dbContext`是[`DataContext`](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)派生对象。阅读[本文](http://www.informit.com/articles/article.aspx?p=1224998&seqNum=4)以了解如何创建此对象。

```
// custom datacontext class
 public class CustomDataContext : DataContext
 {  
    private static readonly string connectionString =
      @"Data Source=.\SQLExpress;Initial Catalog=<db name>;" +
      "Integrated Security=True"; // From the app.config

    public CustomDataContext() : base(connectionString) { }

    public Table<Cst_City> Cst_City
    {
      get { return this.GetTable<Cst_City>(); }
    }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T07:34:20.257

根据我的理解，您希望将上面的代码转换为等效的 LINQ。以下是步骤

1-创建一个数据库上下文对象

2- 写查询

3-获取数据并显示

```
YourDBNameDataContext context = new YourDBNameDataContext();
var drinst = context.cstTable.Select(item => item.cst_City).Distinct();

foreach (string city in drinst )
{
    instcol.Add(city);
}
txtCity.AutoCompleteCustomSource = instcol; 
```

# eclipse - 单击 TreeViewer 元素时通过菜单启用/禁用 eclispe rcp 编辑器

> ID：14230177
> 
> 赞同：1
> 
> 时间：2013-01-09T07:22:09.357
> 
> 标签：eclipse, editor, rcp, treeviewer

在我的 Eclipse RCP 应用程序中，我有一个 TreeViewer，我可以从中选择不同的编辑器来绘制元素，双击后会显示这些元素。在我的顶部菜单中，我有一个允许启用/禁用绘图的选项。编辑器的操作如下所示：

```
public class EnableEditorAction implements IEditorActionDelegate {

IEditor hallEditor = null;

@Override
public void run(IAction action) {       
    if (hallEditor != null){
        hallEditor.setMachineHallEditMode(true);
    }       
}

@Override
public void setActiveEditor(IAction action, IEditorPart targetEditor) {
    // check for enabled
    boolean bEnabled = false;
    if (targetEditor != null && targetEditor instanceof IMachineHallEditor) {
        hallEditor = (IMachineHallEditor) targetEditor;
        bEnabled = !hallEditor.isMachineHallEditingMode();
    } 
    action.setEnabled(bEnabled);
}

@Override
public void selectionChanged(IAction action, ISelection selection) {
    if (hallEditor != null) {
        action.setEnabled(!hallEditor.isMachineHallEditingMode());
    }       
} 
```

}

我遇到的问题是只有在编辑器中单击时才启用菜单选项。我想要的是在单击左侧 TreeViewer 中的一个编辑器后也启用菜单选项。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T10:08:50.973

首先，您不需要检查是否`targetEditor`为**null**，因为该操作已经通过`plugin.xml`.

其次，我可以看到你有一个 API `isMachineHallEditingMode()`。这应该告诉您是否选择了左树，并且该操作应该正常工作。

将您的操作设置**为****始终**在`plugin.xml`. 该`Enables for:`参数应该为空，因为启用处理是在您的`selectionChanged`.

```
public class EnableEditorAction implements IEditorActionDelegate {

     IEditor hallEditor;

     @Override
     public void run(IAction action) {       
          hallEditor.setMachineHallEditMode(true);
     }       

     @Override
     public void setActiveEditor(IAction action, IEditorPart targetEditor) {
          hallEditor = (IMachineHallEditor) targetEditor;
     }

     @Override
     public void selectionChanged(IAction action, ISelection selection) {
          action.setEnabled(!hallEditor.isMachineHallEditingMode());
     }       
} 
```

# ruby-on-rails - 带有导轨问题的数据表

> ID：14230182
> 
> 赞同：1
> 
> 时间：2013-01-09T07:22:52.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, github, datatables

我已将其包含在我的 Rails 中：

```
gem 'jquery-datatables-rails', github: 'rweng/jquery-datatables-rails' 
```

但是当我启动服务器时，我收到了这个错误：

```
←[31mYou passed :github as an option for gem 'jquery-datatables-rails', but it is invalid.←[0m 
```

我猜是因为我在本地运行它。顺便说一句，如果我在本地运行它，我的路径是什么？

我跟随这个演员的另外一件事：

[http://railscasts.com/episodes/340-datatables?view=asciicast](http://railscasts.com/episodes/340-datatables?view=asciicast)

我也试过这个：

```
gem 'jquery-datatables-rails' 
```

但是在捆绑安装之后，没有下载 css 和 js 文件，它给了我文件未找到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:46:24.363

检查演员表：

> github 选项是 Bundler 1.1 中的新选项。如果你没有这个，你需要传入完整的 git 路径。

所以尝试使用

```
gem 'jquery-datatables-rails', git: 'https://github.com/rweng/jquery-datatables-rails.git' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:05:38.597

很难说为什么您的表在没有视图和相关的 javascript 代码的情况下被隐藏。

检查您是否`dataTable()`在正确的表 DOM 元素上调用该函数。还要检查调用中是否有任何花哨的参数。

如果检查成功，请发布代码以获得更多帮助。

# liferay-6 - 如何在 CalEvent 表中创建一个新列，对应于日历 portlet 的“添加事件”页面中新创建的字段？

> ID：14230184
> 
> 赞同：1
> 
> 时间：2013-01-09T07:23:09.423
> 
> 标签：liferay-6, liferay-ide

```
 <aui:select name="Event for">
     <%
    for (User usr : UserLocalServiceUtil.getRoleUsers(10163)) {
     %>           
         <aui:option label="<%=usr.getFullName()%>" />
    <%
        }
    %>
    </aui:select>

    I have created a new field in Add Event page of Calendar portlet. 
```

我想在 CalEvent 表中创建一个与新创建的字段相对应的新列。同样，我应该通过创建 CalEvent 实例来获取该字段的值...。因此，在“添加事件”页面中单击“保存”时，新创建的字段的值也应该保存在 CalEvent 表中。上面粘贴的代码用于创建新的下拉字段“Event for”，它将给出角色下的用户列表。这是我通过创建 Hook 来完成的。因此，在保存事件的同时，“Event for”的值也需要保存在 CalEvent 表中的“eventFor”列中。我怎样才能做到这一点？如何创建新列以及如何保存？请帮忙.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T08:05:10.587

您主要关心的是用于 CalEvent 的数据库表。如果您可以打开数据库浏览器，您可以找到名为“calevent”的表，主键为“eventId”。

现在，如果您想在该表中添加一列，则需要对日历 Portlet 的控制器和服务进行扩展修改，而且除了需要做很多工作之外，您还将失去与未来更新的兼容性。

因此，我的建议是制作另一个 Portlet，并使用 ServiceBuilder 创建一个以“eventFor”列为特色的表，并将“calevent.eventId”作为外键。如果您将 service.jar 复制到 /lib/ext/ 中，您甚至可以在挂钩的 add-event.jsp 中包含新服务并从那里创建新实例。

# android - 无法从android中的url获取图像

> ID：14230187
> 
> 赞同：2
> 
> 时间：2013-01-09T07:23:22.520
> 
> 标签：android

> **可能重复：**
> [来自 url 的 Android 图像视图](https://stackoverflow.com/questions/12172928/android-image-view-from-url)

我正在尝试从 url 获取图像并加载`imageView`，但我无法对 url 字符串进行编码，请告诉我如何编码。

请找到供您参考的代码和网址。

网址：http: [//images.pcmac.org/SiSFiles/Schools/TN/JacksonMadisonCounty/RoseHillMiddle/Uploads/Locations/%7BB690E93E-F7C9-48AF-B72A-BFF944FA6D4A%7D_104_9169.JPG](http://images.pcmac.org/SiSFiles/Schools/TN/JacksonMadisonCounty/RoseHillMiddle/Uploads/Locations/%7BB690E93E-F7C9-48AF-B72A-BFF944FA6D4A%7D_104_9169.JPG)

### 代码

```
String link=URLEncoder.encode(urlStr);                    
bitmap=loadBitmap(link);

public static Bitmap loadBitmap(String url) {
    Bitmap bitmap = null;
    try {
        InputStream in = new java.net.URL(url).openStream();
        bitmap = BitmapFactory.decodeStream(in);
    } catch (Exception e) {

    }        
    return bitmap;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:27:12.537

使用此代码它将从服务器获取图像

```
String URL = "http://images.pcmac.org/SiSFiles/Schools/TN/JacksonMadisonCounty/RoseHillMiddle/Uploads/Locations/%7BB690E93E-F7C9-48AF-B72A-BFF944FA6D4A%7D_104_9169.JPG"; 

private InputStream OpenHttpConnection(String urlString) throws IOException {
        InputStream in = null;
        int response = -1;
        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();

        if (!(conn instanceof HttpURLConnection))
            throw new IOException("Not an HTTP connection");

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();

            response = httpConn.getResponseCode();
            if (response == HttpURLConnection.HTTP_OK) {
                in = httpConn.getInputStream();
            }
        } catch (Exception ex) {
            throw new IOException("Error connecting");
        }
        return in;
    }

private Bitmap DownloadImage(String URL) {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);

            in.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
            final String msg = e1.getMessage();
            handler.post(new Runnable() {  
                public void run() {  
                    Toast.makeText(getApplicationContext(), "" + msg, Toast.LENGTH_SHORT).show();  
                }  
            });
        }
        return bitmap;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:45:46.267

仅供参考， URLEncoder.encode(String) 已被弃用。

参考：http: [//developer.android.com/reference/java/net/URLEncoder.html](http://developer.android.com/reference/java/net/URLEncoder.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:34:39.387

您可以对 url 进行如下编码：

> ```
>  String URL = "http://images.pcmac.org/SiSFiles/Schools/TN/JacksonMadisonCounty/RoseHillMiddle/Uploads/Locations/%7BB690E93E-F7C9-48AF-B72A-BFF944FA6D4A%7D_104_9169.JPG";
>   String encodeUrl=URLEncoder.encode(URL, "utf-8");
>   private Bitmap DownloadImage(String URL) {
>     Bitmap bitmap = null;
>     InputStream in = null;
>     try {
>         in = OpenHttpConnection(URL);
>         bitmap = BitmapFactory.decodeStream(in);
>         in.close();
>     } catch (IOException e1) {
>         // TODO Auto-generated catch block
>         e1.printStackTrace();
>         final String msg = e1.getMessage();
>         handler.post(new Runnable() {  
>             public void run() {  
>                 Toast.makeText(getApplicationContext(), "" + msg, Toast.LENGTH_SHORT).show();  
>             }  
>         });
>     }
>     return bitmap;
> } 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T07:35:17.113

请使用以下代码将图像下载并显示到 imageview 中。

```
public class MainActivity extends Activity {

    ImageView my_img;
    Bitmap mybitmap;
    ProgressDialog pd;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ImageView mImgView1 = (ImageView) findViewById(R.id.mImgView1);

        DownloadImageFromURL mDisImgFromUrl = new DownloadImageFromURL(mImgView1);

        mDisImgFromUrl.execute("http://images.pcmac.org/SiSFiles/Schools/TN/JacksonMadisonCounty/RoseHillMiddle/Uploads/Locations/%7BB690E93E-F7C9-48AF-B72A-BFF944FA6D4A%7D_104_9169.JPG");

    }

    private class DownloadImageFromURL extends AsyncTask<String, Void, Bitmap> {
        ImageView bmImage;

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            pd = new ProgressDialog(MainActivity.this);
            pd.setMessage("Loading...");
            pd.show();
        }

        public DownloadImageFromURL(ImageView bmImage) {
            this.bmImage = bmImage;
        }

        protected Bitmap doInBackground(String... urls) {
            String urldisplay = urls[0];
            Bitmap mIcon11 = null;
            try {
                InputStream in = new java.net.URL(urldisplay).openStream();
                mIcon11 = BitmapFactory.decodeStream(in);
            } catch (Exception e) {
                Log.e("Error", e.getMessage());
                e.printStackTrace();
            }
            return mIcon11;
        }

        protected void onPostExecute(Bitmap result) {
            bmImage.setImageBitmap(result);
            pd.dismiss();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T07:43:16.220

我已经为[如何从 URL 显示图像](http://androidadvance.weebly.com/display-image-from-url.html)创建了示例。使用它适用于我的那个例子，我也通过替换你的图片网址来检查它。

# sql-server-2008 - 使用多个参数（包括表值参数）调用 MS SQL Server 存储过程

> ID：14230190
> 
> 赞同：2
> 
> 时间：2013-01-09T07:23:37.373
> 
> 标签：sql-server-2008, stored-procedures, table-valued-parameters

在这里和网上做了一些研究后，我不知道这是否可能。我想要做的是调用一个存储过程，它有几个参数，其中一个是表值参数。

这是我的存储过程片段：

```
 ALTER PROCEDURE [dbo].[procName]
@Action nvarchar(10) = 'view'
,@var1 int = 0
,@var2 int = 0
,@var3 myType ReadOnly 
```

我现在有另一个过程（proc2），它具有以下几行：

```
 insert into @varX
    select top 5
        field1, field2
    from
        sourceTable
print 'Processing from table values...'
exec dbo.procName  'refresh', -1, 0, @varX 
```

请注意，varX 和 var3 属于同一类型 MyType 当我执行 proc2 时，我收到错误，我为 dbo.procName 指定了太多参数

我当时认为不可能为存储过程指定多个参数，包括表值参数。我现在倾向于将我的 procName 定义更改为只有一个参数（正如所有在线示例似乎都有），并让我的表值参数充当参数值数组，包括我在我的信息上一个 select 语句（在 proc2 中）。但是，如果可以进行此调用，请说明如何进行。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:42:36.273

这为我编译并运行：

```
create type TT as table (ID int not null);
go
create procedure P1
    @Val1 int,
    @Val2 TT readonly,
    @Val3 int
as
    select @Val1 as Val1,ID,@Val3
    from @Val2;
go
create procedure P2
as
    declare @T TT;
    insert into @T(ID) values (1),(2)

    exec P1 10,@T,13
go
exec P2 
```

结果：

```
Val1        ID          
----------- ----------- -----------
10          1           13
10          2           13 
```

所以，我不知道你的问题是什么，但它不能混合表格和非表格参数。

# google-email-audit-api - Email Audit API / Mialbox Dump Request : 邮箱下载是否包含在配额中？

> ID：14230193
> 
> 赞同：2
> 
> 时间：2013-01-09T07:23:51.100
> 
> 标签：google-email-audit-api

我们以编程方式将电子邮件审核 API 的使用限制为每天 800 个请求（使用美国/太平洋时区），但我们仍然遇到 DeadlineExceeded 错误。

邮箱下载（API 提供的 url 的 HTTP GET）是否计入配额？或者我们可以下载任意数量的邮箱吗？

有没有办法申请更多的配额？

问候，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T22:01:18.683

电子邮件审核 API 限制每天 100 个邮箱导出请求。我不认为下载邮箱或检查邮箱导出状态计入配额。配额仅适用于您每天可以提交的请求数。

# android - 如果我更改......谷歌文档不会显示正确的文档？

> ID：14230194
> 
> 赞同：1
> 
> 时间：2013-01-09T07:23:52.910
> 
> 标签：android, pdf, android-webview, google-docs

我拥有 android 应用程序，在该应用程序中，我使用 google docs 在 web 视图中显示 pdf 文档。我的服务器有那个 pdf，我通过下面的 url 加载它：

> [https://docs.google.com/gview?embedded=true&url=MYSERVERURLOFPDF](https://docs.google.com/gview?embedded=true&url=MYSERVERURLOFPDF)

它工作正常，但是当我用另一个 pdf 替换服务器上的 pdf 时，上面的 url 显示旧文档而不是新文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T01:10:17.077

清除浏览器的缓存。

# nginx - nginx 不转发到静态服务器

> ID：14230197
> 
> 赞同：0
> 
> 时间：2013-01-09T07:24:05.093
> 
> 标签：nginx

我有两台服务器在后台运行，我希望 nginx 对它们进行反向代理。

我希望 nginx 在端口 80 上运行。当用户导航到 时`http://localhost:80/`，他应该被转发到`http://localhost:3501`。但是我仍然在`http://localhost:80`. 我在本地主机上安装了 nginx，并且正在同一个盒子中进行测试。

```
server {
               listen 80;
               server_name _;

               location ^~/api/* {
                       proxy_pass http://localhost:8000;
               }
               location ^~/* {
                       proxy_pass http://localhost:3501;
               }
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:45:27.660

1.  添加上游：
    `upstream backend-testserver {
    server 127.0.0.1:3501 weight=1 max_fails=2 fail_timeout=30s; # server 1
    server 127.0.0.1:3502 weight=1 max_fails=2 fail_timeout=30s; # server 2
    }`

2.  在“服务器 -> 位置”中添加 proxy_pass：
    `location / {
    root html;
    index index.html index.htm;
    proxy_pass http://backend-testserver;
    }`

# node.js - Node.js：如何更好地管理路由器和身份验证？

> ID：14230207
> 
> 赞同：-1
> 
> 时间：2013-01-09T07:24:42.730
> 
> 标签：node.js, authentication, router

在我的`node.js`代码中，我有很多路由器和身份验证需要管理，例如：

```
app.get('/', fn);
app.get('/admin', checkAccess, fn);
app.get('/blog', checkAccess, fn); 
```

可能是路由器数量可能是几十个或更多，

我怎样才能更好地管理它们？

有管理模块吗？或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:41:55.543

根据您的示例，您可以使用多个回调，也可以使用简单的装饰器模式。

**多个回调**

```
function checkAccess(req, res) {
    // check for access
    if (!access) {
        res.send(403);
    }
}

app.get('/', fn);
app.get('/admin', checkAccess, fn);
app.get('/blog', checkAccess, fn); 
```

**简单的装饰器模式**

```
function requiresAccess(fn) {
    return function (req, res) {
        // check for access
        if (access) {
          fn(req, res);
        } else {
          res.send(403);
        }
    }
}

app.get('/', fn);
app.get('/admin', requiresAccess(fn));
app.get('/blog', requiresAccess(fn)); 
```

# debian - 在 debian 挤压中增加循环设备

> ID：14230215
> 
> 赞同：0
> 
> 时间：2013-01-09T07:25:39.093
> 
> 标签：debian

我正在使用 Debian（挤压），我想增加循环设备，我已经检查了我的系统中没有文件 "/etc/modules.conf" 和 "/etc/conf.modules" 。我在谷歌搜索我没有得到挤压的详细信息

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:54:21.120

对于 Squeeze，模块列表应该在 /etc/modules 中。在该文件中指定，例如：

```
loop max_loop=64 
```

# android - Android：将数据插入 SQLite 数据库的困难

> ID：14230225
> 
> 赞同：0
> 
> 时间：2013-01-09T07:25:56.877
> 
> 标签：android, sqlite

我有`List`一些要插入数据库的对象。我在 foreach 循环中创建了插入插入，但它仍然以异常约束失败结束。在我的表中，我创建了 column `'_id' INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL`。我的插入方法看起来像

```
 public void insertData(List<Item> list) {
        dbAdapter = DBAdapter.getDBAdapterInstance(getActivity());
        dbAdapter.openDataBase();
        for (Itemm item : list) {
            ContentValues values = new ContentValues();
            values.put("item_id", item.getItemId());
            values.put("item_category", item.getItemCategory());
            values.put("order_number", item.getOrderNumber());
            dbAdapter.insertRecordsInDB("order_list", null, values);
          }
          dbAdapter.close();
} 
```

这是 DBAdapter 类：

```
public class DBAdapter extends SQLiteOpenHelper {

    private static String DB_PATH = "/data/data/<my_package>/databases/";
    private static String DB_NAME = "mydatabase.db";
    private static final int DB_VERSION = 1;

    private SQLiteDatabase myDataBase;
    private final Context myContext;

    private static DBAdapter myDBAdapter;

    /**
     * Constructor Takes and keeps a reference of the passed context in order to
     * access to the application assets and resources.
     * 
     * @param context
     */
    private DBAdapter(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
        this.myContext = context;
    }

    /**
     * getting Instance
     * 
     * @param context
     * @return DBAdapter
     */
    public static synchronized DBAdapter getDBAdapterInstance(Context context) {
        if (myDBAdapter == null) {
            myDBAdapter = new DBAdapter(context);
        }
        return myDBAdapter;
    }

    /**
     * Creates an empty database on the system and rewrites it with your own
     * database.
     **/
    public void createDataBase() throws IOException {
        boolean dbExist = checkDataBase();
        if (dbExist) {
            // do nothing - database already exist
        } else {
            // By calling following method
            // 1) an empty database will be created into
            // the default system path of your application
            // 2) than we overwrite that database with our database.
            this.getReadableDatabase();
            try {
                copyDataBase();
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }
    }

    /**
     * Check if the database already exist to avoid re-copying the file each
     * time you open the application.
     * 
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase() {
        //SQLiteDatabase checkdb = null;
        boolean checkdb = false;
        try{
            String myPath = DB_PATH + DB_NAME;
            File dbfile = new File(myPath);
            //checkdb = SQLiteDatabase.openDatabase(myPath,null,SQLiteDatabase.OPEN_READWRITE);
            checkdb = dbfile.exists();
        }
        catch(SQLiteException e){
            System.out.println("Database doesn't exist");
        }

        return checkdb;
    }

    /**
     * Copies your database from your local assets-folder to the just created
     * empty database in the system folder, from where it can be accessed and
     * handled. This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException {
        // Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);
        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;
        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);
        // transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }
        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

    /**
     * Open the database
     * 
     * @throws SQLException
     */
    public void openDataBase() throws SQLException {
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READWRITE);
        if (!myDataBase.isReadOnly()) {
            myDataBase.execSQL("PRAGMA foreign_keys=ON;");
        }
    }

    /**
     * Close the database if exist
     */
    @Override
    public synchronized void close() {
        if (myDataBase != null)
            myDataBase.close();
        super.close();
    }

    /**
     * Call on creating data base for example for creating tables at run time
     */
    @Override
    public void onCreate(SQLiteDatabase db) {
    }

    /**
     * can used for drop tables then call onCreate(db) function to create tables
     * again - upgrade
     */
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    }

    // ----------------------- CRUD Functions ------------------------------

    /**
     * This function used to select the records from DB.
     * 
     * @param tableName
     * @param tableColumns
     * @param whereClase
     * @param whereArgs
     * @param groupBy
     * @param having
     * @param orderBy
     * @return A Cursor object, which is positioned before the first entry.
     */
    public Cursor selectRecordsFromDB(String tableName, String[] tableColumns,
            String whereClase, String whereArgs[], String groupBy,
            String having, String orderBy) {
        return myDataBase.query(tableName, tableColumns, whereClase, whereArgs,
                groupBy, having, orderBy);
    }

    /**
     * select records from db and return in list
     * 
     * @param tableName
     * @param tableColumns
     * @param whereClase
     * @param whereArgs
     * @param groupBy
     * @param having
     * @param orderBy
     * @return ArrayList<ArrayList<String>>
     */
    public ArrayList<ArrayList<String>> selectRecordsFromDBList(
            String tableName, String[] tableColumns, String whereClase,
            String whereArgs[], String groupBy, String having, String orderBy) {
        ArrayList<ArrayList<String>> retList = new ArrayList<ArrayList<String>>();
        ArrayList<String> list = new ArrayList<String>();
        Cursor cursor = myDataBase.query(tableName, tableColumns, whereClase,
                whereArgs, groupBy, having, orderBy);
        if (cursor.moveToFirst()) {
            do {
                list = new ArrayList<String>();
                for (int i = 0; i < cursor.getColumnCount(); i++) {
                    list.add(cursor.getString(i));
                }
                retList.add(list);
            } while (cursor.moveToNext());
        }
        if (cursor != null && !cursor.isClosed()) {
            cursor.close();
        }
        return retList;

    }

    /**
     * This function used to insert the Record in DB.
     * 
     * @param tableName
     * @param nullColumnHack
     * @param initialValues
     * @return the row ID of the newly inserted row, or -1 if an error occurred
     */
    public long insertRecordsInDB(String tableName, String nullColumnHack,
            ContentValues initialValues) {
        return myDataBase.insert(tableName, nullColumnHack, initialValues);
    }

    /**
     * This function used to update the Record in DB.
     * 
     * @param tableName
     * @param initialValues
     * @param whereClause
     * @param whereArgs
     * @return true / false on updating one or more records
     */
    public boolean updateRecordInDB(String tableName,
            ContentValues initialValues, String whereClause, String whereArgs[]) {
        return myDataBase.update(tableName, initialValues, whereClause,
                whereArgs) > 0;
    }

    /**
     * This function used to update the Record in DB.
     * 
     * @param tableName
     * @param initialValues
     * @param whereClause
     * @param whereArgs
     * @return 0 in case of failure otherwise return no of row(s) are updated
     */
    public int updateRecordsInDB(String tableName, ContentValues initialValues,
            String whereClause, String whereArgs[]) {
        return myDataBase.update(tableName, initialValues, whereClause,
                whereArgs);
    }

    /**
     * This function used to delete the Record in DB.
     * 
     * @param tableName
     * @param whereClause
     * @param whereArgs
     * @return 0 in case of failure otherwise return no of row(s) are deleted.
     */
    public int deleteRecordInDB(String tableName, String whereClause,
            String[] whereArgs) {
        return myDataBase.delete(tableName, whereClause, whereArgs);
    }

    // --------------------- Select Raw Query Functions ---------------------

    /**
     * apply raw Query
     * 
     * @param query
     * @param selectionArgs
     * @return Cursor
     */
    public Cursor selectRecordsFromDB(String query, String[] selectionArgs) {
        return myDataBase.rawQuery(query, selectionArgs);
    }

    /**
     * apply raw query and return result in list
     * 
     * @param query
     * @param selectionArgs
     * @return ArrayList<ArrayList<String>>
     */
    public ArrayList<ArrayList<String>> selectRecordsFromDBList(String query,
            String[] selectionArgs) {
        ArrayList<ArrayList<String>> retList = new ArrayList<ArrayList<String>>();
        ArrayList<String> list = new ArrayList<String>();
        Cursor cursor = myDataBase.rawQuery(query, selectionArgs);
        if (cursor.moveToFirst()) {
            do {
                list = new ArrayList<String>();
                for (int i = 0; i < cursor.getColumnCount(); i++) {
                    list.add(cursor.getString(i));
                }
                retList.add(list);
            } while (cursor.moveToNext());
        }
        if (cursor != null && !cursor.isClosed()) {
            cursor.close();
        }
        return retList;
    }

} 
```

我不知道我做错了什么。如何将列表中的数据插入数据库？感谢您的每一次帮助。谢谢你。

# jquery - JQuery - 将 CSS 更改应用于类的单个元素

> ID：14230227
> 
> 赞同：1
> 
> 时间：2013-01-09T07:25:58.653
> 
> 标签：jquery, css, toggleclass

如果已经问过类似的问题，我深表歉意。

我有一类链接，每个都有图像和文本。

```
<a class="link">
   <img src="//filepath">
  link text
</a> 
```

当用户将鼠标悬停在其中一个链接上时，我只想将旋转变换器应用于图像。这给我带来了一个问题，因为我不能只使用 css 来执行它——如果我将 :hover { rotate } 应用于链接中的图像，那么只有当用户将鼠标悬停在图像上时才会出现这种效果，但是不是链接的其余部分。

我愚蠢地认为这些 JS 行会拯救我：

```
 $('a.link').hover(function(){
     $('a.link img').css(
       {'-webkit-transform':'rotate(40deg)'}
     );
   }); 
```

当然，问题是，当用户将鼠标悬停在单个链接上时，这会将转换器应用于整个班级。此外，当用户停止将鼠标悬停在链接上时，更改不会逆转。

我已经开始了一个小提琴，但我不知道如何解决这个问题。任何帮助将不胜感激。

[http://jsfiddle.net/dbudell/z38EE/](http://jsfiddle.net/dbudell/z38EE/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:27:03.560

您需要在作为事件源的当前元素上应用。

**[现场演示](http://jsfiddle.net/rajaadil/z38EE/3/)**

```
$('a.link').hover(function () {
  $(this).find('.square').css({
    '-webkit-transform': 'rotate(40deg)'
  });
}); 
```

*您在小提琴的 html 中没有 img 。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T07:27:43.683

```
$('a.link').hover(function(){
   $(this).find('img').css(
   {
     '-webkit-transform':'rotate(40deg)'
   });
}); 
```

对于你的小提琴：

```
$('a.link').hover(function(){
 $(this).find('.square').css(
   {'-webkit-transform':'rotate(40deg)'
  });
}); 
```

查看更新[的小提琴](http://jsfiddle.net/z38EE/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T07:32:15.750

其他答案涵盖了 JS/jQuery 解决方案，但如果你有正确的选择器，你*可以*只用 CSS 来做到这一点：

```
a.link:hover .square {
  -webkit-transform:rotate(40deg);
} 
```

也就是说，作为悬停`.square`元素的后代的任何元素都`a.link`将应用该样式。

演示：http: [//jsfiddle.net/z38EE/4/](http://jsfiddle.net/z38EE/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T07:29:50.750

您需要将变换应​​用于作为当前目标后代的正方形：

```
$('a.link').hover(function(){
    $('.square', this).css(
        {'-webkit-transform':'rotate(40deg)'}
    );
},
function(){
    $('.square', this).css(
        {'-webkit-transform':'rotate(40deg)'}
    );
}); 
```

这是一个演示：http: [//jsfiddle.net/ye4tk/](http://jsfiddle.net/ye4tk/)

# hadoop - 我们如何在 Pig 的单行中组合多行

> ID：14230228
> 
> 赞同：2
> 
> 时间：2013-01-09T07:26:02.417
> 
> 标签：hadoop, mapreduce, apache-pig

我需要使用 Pig 脚本将这多个元组组合成一个元组。您能否提供一些指导方针？

```
dump requestFile; 
```

**电流输出**

```
(Logging Transaction ID:21214,/var/log/tibco/,NESS-A-1-LPNameRequesttoNESS.log,tibcoTest log)

(Default Data:LP Name Request Message Executed Successfully)

(LoanPath Request ID:  88128640)

(RequestGroupID#:   )

(SplitCount#:  2 )

(SplitIndex:  1)

(Correlation ID : 88128640-1 ) 
```

**期望的输出**

```
(Logging Transaction ID:21214,/var/log/tibco/,NESS-A-1-LPNameRequesttoNESS.log,tibcoTest log,Default Data:LP Name Request Message Executed Successfully,LoanPath Request ID:  88128640,RequestGroupID#:   ,SplitCount#:  2,SplitIndex:  1)
(Correlation ID : 88128640-1 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-19T13:01:41.400

关于什么：

```
requestFile = foreach requestFile generate flatten(tuple);
G = GROUP requestFile ALL;
F = FOREACH G generate requestFile; 
```

# javascript - 多个 Nivo 滑块 - 定位不清楚

> ID：14230239
> 
> 赞同：1
> 
> 时间：2013-01-09T07:26:51.330
> 
> 标签：javascript, positioning, nivo-slider

我正在与多个 nivo 滑块的定位作斗争。我（目前）有五个滑块，它们应该都出现在同一个位置，[可以在这里看到](http://geodev.grid.unep.ch/index_uneplive.php#)。

问题是代码中的定位总是相同的；但它不在浏览器的显示屏上。当单击“跟踪”或“化学品和废物”时，滑块要么出现在页面顶部，要么仅部分显示。

```
<div style="margin-left: 10px">
    <div id="pagewrap">
        <div class="slidewrap">
            <div id="slider1">
                <a class="lightview" href="images/geg_fish_stocks.png"><img alt="Gallery Picture" title="#caption2" src="images/geg_fish_stocks_light.png" /></a>
                <a class="lightview" href="images/geg_protected_areas.png"><img alt="Gallery Picture" title="#caption6" src="images/geg_protected_areas_light.png" /></a>
            </div>
            <div id="slider2" style="margin-top: -350px; visibility: hidden"> <!-- Atmosphere -->
                <a class="lightview" href="images/geg_temperature.png"><img alt="Gallery Picture" title="#caption4" src="images/geg_temperature_light.png" /></a>
                <a class="lightview" href="images/geg_indoor_cooking.png"><img alt="Gallery Picture" title="#caption17" src="images/geg_indoor_cooking_light.png" /></a>
            </div>
            <div id="slider3" style="margin-top: -350px; visibility: hidden"> <!-- Biodiversity -->
                <a class="lightview" href="images/geg_protected_areas.png"><img alt="Gallery Picture" title="#caption6" src="images/geg_protected_areas_light.png" /></a>
                <a class="lightview" href="images/geg_access_benefit.png"><img alt="Gallery Picture" title="#caption7" src="images/geg_access_benefit_light.png" /></a>
            </div>
            <div id="slider4" style="margin-top: -350px; visibility: hidden"> <!-- Chemicals -->
                <a class="lightview" href="images/geg_radioactive_waste.png"><img alt="Gallery Picture" title="#caption13" src="images/geg_radioactive_waste_light.png" /></a>
                <a class="lightview" href="images/geg_basel_convention.png"><img alt="Gallery Picture" title="#caption14" src="images/geg_basel_convention_light.png" /></a>
            </div>
            <div id="slider5" style="margin-top: -350px; visibility: hidden"> <!-- Keeping Track -->
                <a class="lightview" href="images/kt_hdi.png"><img alt="Gallery Picture" title="#caption9" src="images/kt_hdi_light.png" /></a>
                <a class="lightview" href="images/kt_food_supply.png"><img alt="Gallery Picture" title="#caption10" src="images/kt_food_supply_light.png" /></a>
            </div> 
```

CSS 看起来像这样：

```
#slidewrap{
    position:absolute;
    background: #fff;
}    

#slider, #slider1, #slider2, #slider3, #slider4, #slider5 {
    position:relative;
    height:auto;
    width:915px;
    border:10px solid rgba(89,117,220,0.33);
    box-shadow:0 0 5px #444;
    margin: 0;
}
#slider img, #slider1 img, #slider2 img, #slider3 img, #slider4 img, #slider5 img{
    position:absolute;
    top:20px;
    left:0px;
    display:none;
} 
```

我真的很困惑，不知道为什么会这样。感谢任何可以帮助我解决这个谜题的提示。

插件激活：

```
$(window).load(function()
{
    $('#slider1').nivoSlider({
        pauseTime: 4000
    });
    $('#slider2').nivoSlider({
        pauseTime: 4000
    });
    $('#slider3').nivoSlider({
        pauseTime: 4000
    });
    $('#slider4').nivoSlider({
        pauseTime: 4000
    });
    $('#slider5').nivoSlider({
        pauseTime: 4000
    });
    $('#slider6').nivoSlider({
        pauseTime: 4000
    });
    $('#slider7').nivoSlider({
        pauseTime: 4000
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T06:02:23.383

好的，这是解决方案。问题出在 CSS “height:auto”中。当我把它拿走并改用 330px 时，它工作得非常好！

# php - 按 php 中的类似 2 个字段分组？

> ID：14230243
> 
> 赞同：0
> 
> 时间：2013-01-09T07:27:08.270
> 
> 标签：php, mysql, group-by

如何在php中对两个相似的字段进行分组？

我尝试使用 GROUP BY DATE(bill.date) ， bill.agent_id 但它对我不起作用

表结构1： http: [//i.stack.imgur.com/yvBF0.jpg](http://i.stack.imgur.com/yvBF0.jpg)（表名为bill_agents） 表结构2：http://i.stack.imgur.com/38tKh.jpg [（](http://i.stack.imgur.com/38tKh.jpg)表名为bill）

当前结果

```
+---------+----+----+----+-----+----+
|         |  1 |  2 |  3 |   4 |  5 |
+---------+----+----+----+-----+----+
| Agent 1 | 35 |  0 |  0 |   0 |  0 |
| Agent 2 |  0 | 10 |  0 |   0 |  0 |
| Agent 1 |  0 |  0 | 12 |   0 |  0 |
| Agent 3 |  0 |  0 |  0 | 100 |  0 |
| Agent 6 |  0 |  0 |  0 |   9 |  0 |
| Agent 2 |  0 |  0 |  0 |   9 | 14 |
+---------+----+----+----+-----+----+

But I want To get Like The Following

+---------+----+----+----+-----+----+
|         |  1 |  2 |  3 |   4 |  5 |
+---------+----+----+----+-----+----+
| Agent 1 | 35 |  0 | 12 |   0 |  0 |
| Agent 2 |  0 | 10 |  0 |   0 | 14 |
| Agent 3 |  0 |  0 |  0 | 100 |  0 |
| Agent 6 |  0 |  0 |  0 |   9 |  0 |
+---------+----+----+----+-----+----+ 
```

我现在使用的粘贴在下面的 PHP 代码。

```
<table width="100%" border="1" cellspacing="4" cellpadding="1">
  <tr>
    <td>&nbsp;</td>
     <?php
for ($i=01; $i<=31; $i++)
  {?>
    <td><?php echo $i; ?></td>
    <?php

  }
?>
    <td>Total</td>
  </tr>
  <?php 

    $query4 = "SELECT bill.agent_id, bill.date, SUM(bill.amount + bill.cheque) AS total, bill_agents.id,bill_agents.name ".
          "FROM bill, bill_agents ".
          "WHERE bill.agent_id = bill_agents.id AND YEAR(date)  = YEAR(CURDATE()) AND MONTH(date) = MONTH(CURDATE()) ". 
          "GROUP BY bill.agent_id , DATE(bill.date)   ".

              // "GROUP BY bill.agent_id , DATE(bill.date)  ".
              "ORDER BY bill.date ASC";

    $result4 = mysql_query($query4) or die('Error, query failed1'); 
    if  (mysql_num_rows($result4)>0){
    mysql_data_seek($result4, 0);   

?>
  <?php $total_1 = 0;  while($row4 = mysql_fetch_array($result4, MYSQL_ASSOC)){?>
  <?php $date =    $row4['date'];

    $var = $date;
    $date = date("d-m-Y", strtotime($var) );
    $date=substr($date, 0, -8); 

    echo $date;

    ?>
  <tr>
    <td><?php echo $row4['name']; ?></td>
    <?php
for ($i=01; $i<=31; $i++)
  {?>
    <td><?php if ($date == $i) echo $row4['total']; ?></td>
    <?php

  }
?>
    <td></td>
  </tr>
  <?php } } ?>
  <tr>
    <td colspan="31"></td>
    <td>Total</td>
    <td></td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:21:29.337

我的理解是，您需要代理在一年中的特定月份处理的总金额。然后按如下方式更改您的查询，

```
<?php
$query = "SELECT b.date,b.agent_id,(SUM(b.amount) + SUM(b.cheque)) AS total,ba.id,ba.name 
FROM bill_agent ba LEFT JOIN bill b ON b.agent_id = ba.id
WHERE YEAR(b.date)  = YEAR(CURDATE()) AND MONTH(b.date) = MONTH(CURDATE())
GROUP BY b.date";

?> 
```

# angularjs - angularjs + yeoman + ng-switch + build:minify -> 断言

> ID：14230248
> 
> 赞同：1
> 
> 时间：2013-01-09T07:27:26.693
> 
> 标签：angularjs, yeoman

我在 angularjs 中使用 ng-switch 在我的页面中包含动态内容，具体取决于 url。我正在和 yeoman 一起管理我的项目。这是动态内容生成的代码：

html:

```
<div class="div-content bgcontent" id="content">
  <span ng-switch on="renderPath[0]">
    <div ng-switch-when="home" ng-include="'partials/home.html'"></div>
    <div ng-switch-when="gallery" ng-include="'partials/gallery.html'"></div>
  </span>
</div> 
```

控制器：

```
$scope.renderPath = $location.path().split('/');
// remove first entry because it's empty string
$scope.renderPath.shift(); 
```

当使用“yeoman server”运行这些东西时，这非常有效。但是，如果我使用 'yeoman build:minify' 构建，之后它就不再起作用了。它遇到了一个断言：

```
at assertArg (http://host:8888/scripts/vendor/d10639ae.angular.js:973:11)
at Object.ngDirective.compile (http://host:8888/scripts/vendor/d10639ae.angular.js:13474:5)
at applyDirectivesToNode (http://host:8888/scripts/vendor/d10639ae.angular.js:4047:32)
at compileNodes (http://host:8888/scripts/vendor/d10639ae.angular.js:3794:14)
at compileNodes (http://host:8888/scripts/vendor/d10639ae.angular.js:3799:14)
at compile (http://host:8888/scripts/vendor/d10639ae.angular.js:3739:29)
at update (http://host:8888/scripts/vendor/d10639ae.angular.js:13685:22)
at $get.Scope.$broadcast.next (http://host:8888/scripts/vendor/d10639ae.angular.js:8002:24)
at Array.forEach (native)
at forEach (http://host:8888/scripts/vendor/d10639ae.angular.js:110:11) <!-- ngSwitchWhen: home --> 
```

有人知道如何解决这个问题吗？或者我需要在哪里调试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:26:22.870

如果您在脚本中使用依赖注入，请确保使用此处描述的 minify-proof 语法：http: [//docs.angularjs.org/guide/di](http://docs.angularjs.org/guide/di)

# android - Cocos2d android精灵加载白色方形空间

> ID：14230250
> 
> 赞同：0
> 
> 时间：2013-01-09T07:27:39.410
> 
> 标签：android, cocos2d-iphone

我用 cocos2d 开发安卓游戏。我以这种方式加载精灵：

```
 CCSprite sprite = CCSprite.sprite("sprite.png"); 
```

问题是图像有时加载为白色方块或加载错误的图像，任何人都可以帮我解决这个问题......！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:55:07.590

最后我找到了解决方案，当我在 CCLayer 类中使用 UI 处理程序时，问题就来了。我只是把它移到我的主要活动中......问题解决了......

# javascript - 在 OS X 10.8.2 上构建 ember.js 失败

> ID：14230252
> 
> 赞同：1
> 
> 时间：2013-01-09T07:27:43.037
> 
> 标签：javascript, rake, ember.js, bundler

在安装了以下工具的 Mac OS X 系统 (10.8.2) 上：

*   Ruby，1.9.3p362（2012-12-25 修订版 38607）[x86_64-darwin12.2.0]，通过 brew
*   捆绑器，1.2.3 通过`gem install bundler`
*   耙子，10.0.3 通过`gem install rake`

无法从源代码构建 Ember。以下是运行时的错误日志`rake dist`：

```
± ~/dev/ember.js (master ✓) ⚡ rake dist
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25: warning: redundant nested repeat operator
rake aborted!
cannot load such file -- bundler/setup
/Users/foo/dev/ember.js/Rakefile:3:in `<top (required)>'
(See full trace by running task with --trace)

± ~/dev/ember.js (master ✓) ⚡ rake dist --trace
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25: warning: redundant nested repeat operator
rake aborted!
cannot load such file -- bundler/setup
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/Users/foo/dev/ember.js/Rakefile:3:in `<top (required)>'
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `load'
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `load_rakefile'
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:583:in `raw_load_rakefile'
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:89:in `block in load_rakefile'
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:88:in `load_rakefile'
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:72:in `block in run'
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/gems/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/usr/local/Cellar/ruby/1.9.3-p362/lib/ruby/gems/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
/usr/local/Cellar/ruby/1.9.3-p362/bin/rake:23:in `load'
/usr/local/Cellar/ruby/1.9.3-p362/bin/rake:23:in `<main>' 
```

从#emberjs 中查看Ember Data 构建说明和讨论来看，您似乎需要先运行`bundle`。这样做会成功安装一些捆绑包，尽管最后会提示输入管理员密码“将捆绑的 RubyGems 安装到您的系统”。

如果您随后运行此命令以查看安装了哪些 gem，您可以看到一个 gem 特别拒绝安装。按照建议运行`bundle install`并不能解决这个问题。

```
± ~/dev/ember.js (master ✓) ⚡ bundle exec rake -T
https://github.com/pangratz/github_downloads.git (at master) is not checked out. Please run `bundle install` 
```

Twitter 的一个建议是运行`bundle rake dist`. 这会产生：

```
± ~/dev/ember.js (master ✓) ⚡ bundle rake dist
Could not find task "rake". 
```

另一个用于`bundle exec rake dist`：

```
± ~/dev/ember.js (master ✓) ⚡ bundle exec rake dist
https://github.com/pangratz/github_downloads.git (at master) is not checked out. Please run `bundle install` 
```

此时运行`bundle install`会安装 gems 列表，但最后会**要求输入管理员密码**并报告成功。#emberjs 的一个想法是，这意味着它将 gems 安装到我的系统中，而不是沙盒环境中，这才*是*真正的问题。

可以做些什么来克服这个 bundle/rake 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:36:50.257

这是一个对我有用的解决方案：

```
cd <your ember clone>
curl -L https://get.rvm.io | bash -s stable --ruby
rvm install 1.9.3
rvm use 1.9.3
rvm rubygems latest
bundle install
rake dist 
```

# c++ - What is the proper way to set QProgressBar to update from the logic layer?

> ID：14230265
> 
> 赞同：14
> 
> 时间：2013-01-09T07:28:36.547
> 
> 标签：c++, qt, qprogressbar

If I want to update a QProgressBar on the view layers from a loop on the logic layer (such as each iteration will update the progress bar), what is the proper way to do that?

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T08:13:28.693

```
class LogicClass : public QObject
{
    Q_OBJECT
public:
    explicit LogicClass(QObject *parent = 0);
    int max(){ return 100; }
    int min(){ return 0; }
    void emit50(){ emit signalProgress(50); }

signals:
    void signalProgress(int);

public slots:

};

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    LogicClass logic;

    ui->progressBar->setMaximum( logic.max() );
    ui->progressBar->setMinimum( logic.min() );
    connect( &logic, SIGNAL( signalProgress(int) ), ui->progressBar, SLOT( setValue(int) ) );

    logic.emit50();

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T07:54:16.047

QProgressBar has some public slots that are used for setting min and max values and current value. Increasing the current value causes the progress bar to move. You can emit a signal from the logic layer that is connected to "void setValue ( int value )" slot of QProgressBar. [http://doc.qt.digia.com/qt/qprogressbar.html](http://doc.qt.digia.com/qt/qprogressbar.html)

# asp.net-mvc-3-areas - 在 mvc3 razor 中，我收到错误加载此程序集会产生与其他实例不同的授权集。（来自 HRESULT 的异常：0x80131401）

> ID：14230267
> 
> 赞同：1
> 
> 时间：2013-01-09T07:28:46.260
> 
> 标签：asp.net-mvc-3-areas

我正在开发 mvc3 razor 应用程序，首先我的项目运行正常，但是在将 system.web.mvc.dll 和 System.Web.WebPages.Razor 文件从 mvc4 文件夹替换到 mvc3 文件夹后，它会在运行时出现以下错误。

加载此程序集会产生与其他实例不同的授权集。（来自 HRESULT 的异常：0x80131401）

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.IO.FileLoadException：加载此程序集会产生与其他实例不同的授权集。（来自 HRESULT 的异常：0x80131401）

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

```
Stack Trace: 

[FileLoadException: Loading this assembly would produce a different grant set from other instances. (Exception from HRESULT: 0x80131401)]
System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor) +0
System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[] parameters, Object[] arguments) +192
System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) +108
System.Web.Compilation.BuildManager.InvokePreStartInitMethodsCore(ICollection`1 methods, Func`1 setHostingEnvironmentCultures) +324
System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1 methods) +132
System.Web.Compilation.BuildManager.CallPreStartInitMethods(String preStartInitListPath) +90
System.Web.Compilation.BuildManager.ExecutePreAppStart() +135
System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +516 
```

[HttpException (0x80004005)：加载此程序集会产生与其他实例不同的授权集。（来自 HRESULT 的异常：0x80131401）] System.Web.HttpRuntime.FirstRequestInit（HttpContext 上下文）+9873912 System.Web.HttpRuntime.EnsureFirstRequestInit（HttpContext 上下文）+101 System.Web.HttpRuntime.ProcessRequestInternal（HttpWorkerRequest WR）+456

我的 web.config 设置如下

```
<assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </assemblies> 
```

请帮助我解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T08:43:27.587

我遇到了同样的问题，我在 web.config 中修复了它：

```
<system.web>
...
<trust level="Full" />
</system.web> 
```

# iis - 使用 MSBuild 将 Web 部署到服务器

> ID：14230272
> 
> 赞同：4
> 
> 时间：2013-01-09T07:29:26.353
> 
> 标签：iis, msbuild, visual-studio-2012, web-deployment, msdeploy

我在 VS 2012 项目中设置了发布配置文件。当我在 VS 中右键单击项目时，选择发布并单击 [发布] 按钮，它使用发布配置文件中提供的设置将项目发布到服务器。

当我使用 msbuild 和命令行时，使用以下语法：

```
msbuild.exe .\mvc.csproj /p:PublishProfile=DevServer 
/p:DeployOnBuild=True /p:Password=MyPassword /p:AllowUntrustedCertificate=true 
```

然后它构建项目，并给我一条消息：

> 包“mvc.zip”在以下位置成功创建为单个文件：file:///c:/code/mvcsite/obj/Debug/Package

然后提供有关如何部署包的信息。

如何从命令行部署？我的最终目标是通过 TeamCity 运行部署，我现在正试图让我的命令行属性正确。但是，我现在可以从命令行做的最多的事情是创建部署包，而不是运行实际的部署。我怎样才能做到这两点（最好用一个语句来复制我从那里部署时在 VS2012 中发生的事情）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T08:59:33.320

由于您正在构建 .csproj，因此您错过了一个重要的属性

```
/p:VisualStudioVersion=11.0 
```

此属性是在 MSBuild 4.5 中引入的，以促进 VS 2010 和 VS 2012 之间的项目共享。一个缺点；构建 .csproj 时，您需要指定此属性的值。构建解决方案文件时，该值可以从解决方案文件版本派生。阅读我的博客[http://sedodream.com/2013/01/06/CommandLineWebProjectPublishing.aspx](http://sedodream.com/2013/01/06/CommandLineWebProjectPublishing.aspx)了解更多信息。

# java - 如何在spring mvc中没有模型对象的情况下向会话添加属性？

> ID：14230276
> 
> 赞同：1
> 
> 时间：2013-01-09T07:29:37.160
> 
> 标签：java, spring, spring-mvc

我有一个像这样的课程：

```
@Controller(value = "services")
@RequestMapping("/")
@SessionAttributes({"SESSIONID"})
public class Services {

   @RequestMapping("/user/loginStatic")
   @ModelAttribute("SESSIONID")
   public LoginResponseBean loginStatic(String username){
       LoginResponseBean result = otherClass.login(username);
       retrun result;
   }
} 
```

我的问题：这段代码导致在会话中存储“结果”对象，但***我想在会话中存储“result.getSessionId()”。***

我不能将“模型模型”添加到“loginStatic”方法的输入参数，因为它会改变方法的签名，我现在不能这样做。而且我无法明确获取http会话并在其中设置属性（因为其他一些副作用）。我怎么能那样做？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:54:03.223

您可以使用`<mvc:interceptors/>`注册[`HandlerInterceptor`](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html)适用于一个、多个或所有控制器的自定义。例如，这里是如何为所有控制器注册一个拦截器：

```
<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/**"/>
        <bean class="a.b.c.MyHandlerInterceptorAdapter"/>
    </mvc:interceptor>
</mvc:interceptors> 
```

[`mvc-config-interceptors`](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-config-interceptors)另请参阅[`mvc-handlermapping-interceptor`](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-handlermapping-interceptor)文档以获取更多详细信息。

*注意：Spring 3.2 文档已链接，因此您可能需要更改 URL 中的版本号以匹配您使用的 Spring 版本。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:39:54.533

在这里查看接受的答案： [如何在春季获取会话对象](https://stackoverflow.com/questions/1629211/how-do-i-get-the-session-object-in-spring)

您可以按照那里的描述获取会话对象并添加您的属性。

# php - 生成变量

> ID：14230282
> 
> 赞同：0
> 
> 时间：2013-01-09T07:29:52.430
> 
> 标签：php, html, variables, input

我正在构建一个站点词典，您可以在其中一次搜索多个单词。我有一个按钮来添加输入，每个术语一个。现在，我使用这些输入并通过字典站点（合法地）获取它们的定义并将我自己的 css 样式应用于它们。因此，当您在输入 1 中输入您的单词（让我们这样称呼它）时，您会在输入旁边的 div 中获得它的定义。所以我有一个变量来请求单词，另外四个用于获取和样式，最后一个“回声”用于输出。这是代码：

```
enter code <?php
    $data = preg_replace('/(search?[\d\w]+)/','http://lema.rae.es/drae/srv/\1', $data);
    $word = $_REQUEST['word'];
    $word2 = $_REQUEST['word2'];

    $url = "http://lema.rae.es/drae/srv/search?val={$word}";
    $url2 = "http://lema.rae.es/drae/srv/search?val={$word2}";

    $css = <<<EOT

    <style type="text/css">

    </style>
    EOT;

$data = file_get_contents($url);
$data2 = file_get_contents($url2);
$data = str_replace('<head>', $css.'</head>', $data);
$data2 = str_replace('<head>', $css.'</head>', $data2);
$data = str_replace('<span class="f"><b>.</b></span>', '', $data);
$data2 = str_replace('<span class="f"><b>.</b></span>', '', $data2);
      echo '<div id="result1"
      style="">
     '.$data.' 
     </div>';

      echo '<div id="result1"
      style="">
     '.$data2.' 
     </div>';

        ?> 
```

问题：如何为添加的每个新输入自动生成此变量（实际上是过程本身）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:00:27.400

数组就是你要找的。您可以创建一个可以容纳一系列变量的变量，而不是创建一个新变量 $data{INDEX}。

例如，如果你想“推送”一个包含数据的数组，你可以这样做。

```
$myData = array();

// appends the contents to the array
$myData[] = file_get_contents($url);
$myData[] = file_get_contents($url2); 
```

阵列允许更多的多功能性和效率。

**[您可以在此处](http://php.net/manual/en/language.types.array.php)**找到文档。

完整的实现看起来像这样。

```
// create an array of requests that we want
// to load in the url.
$words = array('word', 'word2');

// we'll use this later on for loading the files.
$baseUrl = 'http://lema.rae.es/drae/srv/search?val=';

// string to replace in the head.
$cssReplace = '<style type="text/css"></style></head>';

// string to remove in the document.
$spanRemove = '<span class="f"><b>.</b></span>';

// use for printing out the result ID.
$resultIndex = 0;

// loop through the words we defined above
// load the respective file, and print it out.
foreach($words as $word) {
    // check if the request with
    // the given word exists. If not,
    // continue to the next word
    if(!isset($_REQUEST[$word]))
        continue;

    // load the contents of the base url and requested word.
    $contents = file_get_contents($baseUrl . $_REQUEST[$word]);

    // replace the data defined above.
    $contents = str_replace('</head>', $cssReplace, $contents);
    $contents = str_replace($spanRemove, '', $contents);

    // print out the result with the result index.
    // ++$resultIndex simply returns the value of 
    // $resultIndex after adding one to it.
    echo '<div id="result', (++$resultIndex) ,'">', $contents ,'</div>';
} 
```

# iphone - 如果表格是从 3 种类型的自定义单元格加载的，如何计算单元格的高度？

> ID：14230285
> 
> 赞同：3
> 
> 时间：2013-01-09T07:30:11.627
> 
> 标签：iphone, ios, ipad

我有一个 iphone 应用程序，我在其中加载了`UITableView`3 种类型的自定义单元格。其中包含不同的不同元素。现在我通过获取单元格的味精内容并找到它的大小并添加一个常数来做到这一点。但是当消息非常大时，内容会显示在单元格的外部。我正在这样做`

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{  if(sarray==nil||[sarray count]==0)
    {

    }
    else
    {
          NSMutableDictionary *dicttable=[sarray objectAtIndex:indexPath.section];
          NSString *stri=[dicttable objectForKey:@"message"];
          NSString *type1=[dicttable objectForKey:@"type"];
          NSString *imagepath1=[dicttable objectForKey:@"image_path"];
         if([type1 isEqualToString:@"m"])
         {  
              if([imagepath1 isEqualToString:@"NA"])
              { 
                   UIFont *cellFont = [UIFont fontWithName:@"Helvetica Neue" size:15.0];
                   CGSize size1 = [stri sizeWithFont:cellFont constrainedToSize:CGSizeMake(300.0f, 130.0f) lineBreakMode:UILineBreakModeWordWrap];    
                   NSLog(@"%f",size1.height);
                   return size1.height+75;    
              }
              else
              {
                   UIFont *cellFont = [UIFont fontWithName:@"Helvetica Neue" size:15.0];
                   CGSize size1 = [stri sizeWithFont:cellFont constrainedToSize:CGSizeMake(300.0f, 130.0f) lineBreakMode:UILineBreakModeWordWrap];    
                   NSLog(@"%f",size1.height);

                   return size1.height+300;
              }
          }
          else
          {
               UIFont *cellFont = [UIFont fontWithName:@"Helvetica Neue" size:15.0];
               CGSize size1 = [stri sizeWithFont:cellFont constrainedToSize:CGSizeMake(300.0f, 130.0f) lineBreakMode:UILineBreakModeWordWrap];    
               NSLog(@"%f",size1.height);
               return size1.height+300;   
          }
     }
} 
```

` 任何人都可以帮助我找到正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:49:23.790

在 中`constrainedToSize:`，您将其设为 130。将其设为更大的值，例如 1000.0f 并尝试。

# c# - 基于 xpath 谓词的组节点

> ID：14230288
> 
> 赞同：0
> 
> 时间：2013-01-09T07:30:23.303
> 
> 标签：c#, xpath

我有一串xpath之类的

```
/root/parent/child
/root/parent/child[1]
/root/parent/child[2] 
```

在 c# 代码中，我正在检查 XmlDocument 中是否存在 xpath 并像这样克隆它

```
//Get the parent node of the node to be cloned
XmlNode NodeTobeCloned = xmlDoc.SelectSingleNode(oRow[0].ToString());
XmlNode DuplicateNode = NodeTobeCloned.CloneNode(true);
DuplicateNode.InnerText = sValue;
//Insert the node after the last child of a commoon parent
NodeTobeCloned.ParentNode.AppendChild(DuplicateNode); 
```

我得到的结果是

```
<root>
<parent>
<child/>
<child/>
<child/>
</parent>
</root> 
```

我想要这样的结果

```
<root>
<parent>
<child/>
</parent>
<parent>
<child/> -- [1] -predicates elements
</parent>
<parent>
<child/> -- [2] -predicates elements
</parent>
</root> 
```

我如何使用 c# 附加到 xmldocument 谢谢

# asp.net - 使用链接按钮更改网格视图中行的背景颜色

> ID：14230294
> 
> 赞同：0
> 
> 时间：2013-01-09T07:30:48.577
> 
> 标签：asp.net, gridview

我有网格视图，里面有一个链接按钮。我唯一想做的就是更改选定的行背景颜色。我的意思是当我单击链接按钮（编辑）时，必须更改该行的颜色。我使用此代码，但它对我不起作用。我还从我的命令网格视图中获得了我的记录 ID。有谁能够帮我？

代码：

```
int idx = Convert.ToInt32(e.CommandArgument);

            idx = idx - (GridView3.PageSize * GridView3.PageIndex);

            int ID = (int)GridView3.DataKeys[idx].Value;

         //   GridView3.SelectedRowStyle[idx].backgroundColor= "White";
            Session["ID"] = ID;
            GridView3.EditRowStyle.BackColor = System.Drawing.Color.LightYellow; 
```

![在此处输入图像描述](../Images/4b31726f64bab8ca6002c774a2ba61ba.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:39:21.053

如果您的链接按钮具有`CommandName`“ `Edit`”值，那么您可以使用 GridView 样式属性

```
..........
  </Columns>

       <selectedrowstyle backcolor="LightYellow"
         forecolor="DarkBlue"
         font-bold="true"/>  

     </asp:gridview> 
```

# android - 使用 Android 程序代码禁用特定应用程序（如 Youtube）。

> ID：14230295
> 
> 赞同：-3
> 
> 时间：2013-01-09T07:30:49.320
> 
> 标签：android

我只想使用 android 代码禁用应用程序（而不是删除它）。

请提供一些示例代码来阻止或禁用使用 android 代码的应用程序。

这对我来说将是非常需要的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:37:11.257

这不能在无根电话上完成。第三方应用程序无权阻止其他第三方应用程序。

如果允许，那将是一片混乱！

# iphone - 无法为版本化模型创建捆绑文件夹？

> ID：14230297
> 
> 赞同：7
> 
> 时间：2013-01-09T07:31:05.783
> 
> 标签：iphone, ios, ios6

我从其他开发人员那里收到了项目。然后我在 Xcode 中打开 iOS 项目并构建它，我收到如下错误：

```
Volumes/Macintosh D/My workspace/HCProject/Model/HealthCareModel.xcdatamodeld:0: error: 
Could not create bundle folder for versioned model at
'/Users/TomMac/Library/Developer/Xcode/DerivedData/HCProject-bdxarurbgcdbaecxaoocaroetsjt/Build/Products/Debug-iphoneos/HCProject.app/HealthCareModel.momd' 
```

对不起，如果这是一个基本问题，请帮助我。非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T04:53:52.427

我不知道是什么原因造成的，但我之前遇到过这个错误。

为我修复它的最简单方法是删除“/Users/TomMac/Library/Developer/Xcode/DerivedData”目录中的所有内容。

此处将有多个目录，您可能只需删除失败的特定项目的目录即可，但我尚未对此进行测试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-21T13:11:17.763

在大型 Git 合并后，我遇到了同样的问题。原来我的编译源中有一个重复的 .xcdatamodeld。我删除了一个，从那以后就没有问题了。

如果您不确定在哪里查看，请在 Xcode 中打开您的项目并单击项目名称以查看其属性。转到“构建阶段”选项卡，然后展开“编译源”标题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-11-28T09:15:20.140

1.  iOS模拟器，选择“iOS模拟器”
2.  选择“重置内容和设置”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-05T13:18:28.550

我有这个，我以为我已经摆脱了它，但每隔几个版本它就会不断回来。我现在似乎已经通过以下步骤永久摆脱了它：-

1.  在 Finder 中找到模型文件并将其复制到另一个（安全）位置。
2.  在 Xcode 中，从项目中删除文件（选择移动到垃圾箱）。
3.  构建项目只是为了确保项目文件已保存。
4.  关闭 Xcode。
5.  在 Finder 中找到派生数据目录并删除所有内容。（为了确定，我实际上删除了整个 DerivedData 目录）。
6.  重新打开 XCode。
7.  将模型文件从您的安全位置复制回您的项目目录位置。
8.  将其拖入 Xcode 项目导航器，以便将其放回项目中。
9.  构建 - 它现在应该可以工作了......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-26T13:14:01.910

我有同样的问题，并通过**删除派生数据的内容来解决。**

以下是相同的步骤：

```
1\. Press cmd + comma (,) shortcut key to open preference window of Xcode.
   Or Goto Xcode menu on top and select Preference 
```

[![截图 1](../Images/7ff32dc99be46005fce2f35d34234a7c.png)](https://i.stack.imgur.com/8lf34.png)

```
2\. Select Locations tab present in last 

3\. You can see Derived Data under Locations section

4\. Click on small arrow present next to path. This open directory where project’s derived data content is present. 
```

[![截图 2](../Images/e8c9114b9885b250dc1cf95b7e0ad9cf.png)](https://i.stack.imgur.com/U5tmo.png)

```
5\. Select your project and delete it. Also delete the module cache folder.
    Note : You can even delete all content of Derived Data folder. 

   The content of this folder is generated again when it run. It is like cache. 
```

[![截图 3](../Images/1fdaa2669abcc32b15d56c1dcde3410c.png)](https://i.stack.imgur.com/xlWen.png)

```
 6\. Quit your project

 7\. Open your project. 

 8\. Clean your project (cmd+shift+k)

 9\. Build your project. This should build your project with no issues. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T18:00:55.040

今天早上我遇到了同样的问题。经过多次清理，Xcode 重新启动，最后系统重新启动，我查看了系统日志。我发现此错误消息对应于构建错误的时间。

“Interface Builder Cocoa Touch Tool[89487]：libdispatch 客户端中的 BUG：kevent[EVFILT_VNODE] 添加：“错误的文件描述符”- 0x9”

我更改了 Library/Developer/ 文件夹的权限并将读/写权限授予“每个人”，然后重新启动 Xcode。构建成功。

我不确定构建错误是由权限问题引起的，但值得一试。（如果 Developer 文件夹中有很多项目，权限更改可能需要几分钟才能完成。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-19T10:32:21.220

就我而言，它是数据模型的重复版本。右键单击项目资源管理器中的 .xcdatamodel 文件，然后选择“在 Finder 中显示”。检查重复并删除它们。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-06T23:39:39.763

就我而言，我必须遵循两个步骤才能完全解决这个问题：

1.  删除有问题的版本的隐藏文件。请注意，FILENAME.xcdatamodeld 是一个文件夹，如果您浏览它，您会看到那里的不同版本。给我错误的那个仍然存在，所以我首先必须查找隐藏文件，然后将其删除。

2.  按照此处其他人的建议清理 Xcode 的 DerivedData 文件夹。

希望这对人们有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-06T14:21:46.827

在我的情况下，我的testsFileName.xctest（在工作区> 产品> testsFileName.xctest 中）以某种方式将应用程序目标作为他的目标成员。

# asp.net-mvc - 如何在asp.net中使用mvc构建购物车？

> ID：14230298
> 
> 赞同：9
> 
> 时间：2013-01-09T07:31:07.327
> 
> 标签：asp.net-mvc, shopping-cart

我是 asp.net 中的 MVC 新手。我想用 MVC 构建一个购物车（不使用 EF Code First 作为[音乐商店 mvc 购物车](http://www.asp.net/mvc/tutorials/mvc-music-store-part-8)）。任何人都可以向我展示我可以学习的简单代码或教程吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T07:42:50.897

好吧，我建议你去 codeplex.com 搜索购物车。你会发现很多工作示例。[这](http://www.codeplex.com/site/search?query=shopping%20cart&ac=8)是链接。

您可以下载任何项目。如果您对 .Net 有基本的了解，则不需要分步教程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T07:52:52.087

我为微软提供了最好的选择，它为“MVC 音乐商店”提供了一个完整的示例，它在实验室中进行了某种手操作，在该示例中也有很多其他的东西，你有帮助

在线示例和教程[点击这里](http://www.asp.net/mvc/tutorials/mvc-music-store)

离线教程 (PDF)[点击这里](http://docrepository.googlecode.com/files/MVC%20Music%20Store%20-%20Tutorial%20-%20v1.0.pdf)

完整示例（代码和 PDF）[单击此处](http://mvcmusicstore.codeplex.com/releases/view/64379)

# wpf - 绑定列表 到 GridViewColumn

> ID：14230300
> 
> 赞同：2
> 
> 时间：2013-01-09T07:31:30.923
> 
> 标签：wpf, data-binding

我有一个`GridView`类似的追随者。

```
<Grid>
    <ListView Margin="8,44,8,50" TabIndex="57" Name="CustomFieldList">
        <ListView.View>
            <GridView AllowsColumnReorder="False">
                <GridViewColumn Header="Semester Name" Width="120" DisplayMemberBinding="{Binding FieldName}"/>
                <GridViewColumn Header="Subjects" Width="150" DisplayMemberBinding="{Binding TypeValidations}"/>
            </GridView>
        </ListView.View>
    </ListView>
</Grid> 
```

我的课是；

```
 public class DigreePrograme
  {
      public string semester{ get; set; }
      public List<string> subjects { get; set; }
  } 
```

我有一个观察者集合，我已将其绑定到列表中。

```
static ObservableCollection<DigreePrograme> digreeList = new   ObservableCollection<DigreePrograme>();
public ObservableCollection<DigreePrograme> DigreeList
{ 
    get { return digreeList }
    set { digreeList = value; OnPropertyChanged("DigreeList"); }  
} 
```

在**FormFoad上**

```
CustomFieldList.ItemsSource=DigreeList; 
```

**问题**
`semester`属性显示完美。但`Subject`不列出。它显示为**Collection**。如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T09:49:14.327

您可以`ItemsControl`在 a`DataTemplate`中添加一个`GridViewColumn`以显示所有`Subject`项目

xml:

```
<Window x:Class="WpfApplication11.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="275" Width="275" x:Name="UI">
    <Grid>
        <ListView Name="CustomFieldList" ItemsSource="{Binding ElementName=UI, Path=DigreeList}" >
            <ListView.View>
                <GridView AllowsColumnReorder="False">
                    <GridViewColumn Header="Semester Name" Width="120" DisplayMemberBinding="{Binding Semester}"/>
                    <GridViewColumn Header="Subjects" Width="150" >
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <ItemsControl ItemsSource="{Binding Subjects}" Width="150" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window 
{
    public MainWindow()
    {
        InitializeComponent();
        DigreeList.Add(new DigreePrograme { Semester = "Semester 1", Subjects = new List<string>(new string[] {"Math","Art","Engish" }) });
    }

    private ObservableCollection<DigreePrograme> digreeList = new ObservableCollection<DigreePrograme>();
    public ObservableCollection<DigreePrograme> DigreeList
    {
        get { return digreeList; }
        set { digreeList = value;}
    }   
}

public class DigreePrograme
{
    public string Semester { get; set; }
    public List<string> Subjects { get; set; }
} 
```

结果：

![在此处输入图像描述](../Images/202e0e2ed25c2a98d643c97bfa55e324.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:36:46.420

我建议您在视图模型上创建一个新的字符串属性，它只会连接您的集合并返回它。这将是解决此问题的最简单方法..

```
 public class DigreePrograme
    {
        public string semester { get; set; }
        public List<string> subjects { get; set; }
        public string SubjectsDisplay
        {
            get
            {
                string returnVal = string.Empty;
                foreach (string subject in subjects)
                {
                    returnVal += subject + ", ";
                }
                return returnVal.TrimEnd(',', ' ');
            }
        }
    } 
```

类似的事情可能会有所帮助。

显然也改变了你的绑定:)

干杯。圣。

# jms - 生产者在收到消息之前从队列中回滚/删除消息

> ID：14230306
> 
> 赞同：2
> 
> 时间：2013-01-09T07:31:46.837
> 
> 标签：jms, hornetq

生产者正在向队列发送许多消息。现在队列存储了这些消息。因此，在从消费者那里消费这些消息之前，如果生产者想删除队列中的一些消息，他错误地发送了它并且他不希望接收者收到此消息。我怎么能做到这一点。或任何其他建议，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:50:06.467

您应该将会话保持为已交易状态，并在最后提交或回滚。

如果您打算提交并且现在需要回滚，那么您的应用程序存在严重的设计问题，您应该对其进行审查。除此之外的任何操作都需要您的应用程序有一个数据库来处理接收并忽略它们，但是如果您可以为此使用数据库，那么您在以同步方式访问数据时会遇到性能问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:01:50.657

一种可能的方法：如果生产者知道要删除的消息的 id，那么它可以接收该消息以从队列中删除该消息。但这并不能保证删除消息，因为消费者可能在生产者意识到错误之前已经收到了消息。

# c# - 如何防止文本框离开事件中的 DateTimePicker Valuechanged 事件

> ID：14230311
> 
> 赞同：0
> 
> 时间：2013-01-09T07:32:20.977
> 
> 标签：c#, winforms

在我的 C# Windows 表单中有一个文本框和一个 datatimePicker。这个文本框有离开事件，当文本框离开事件发生时，我想在 datetimepicker 中填充值。这个 datetimepicker 也有 ValueChanged 事件。现在我的问题是当从文本框离开事件中填充 datetimepicker 的值时，同时 datetimepicker ValueChanged 事件也发生了。所以文本框离开事件再次发生。在这个问题中，我不想从文本框离开事件中发生 datetimepicker Valuechanged 事件。这是我的代码示例。

```
private void textbox_Leave(object sender, EventArgs e) 
{ 
      datetimepicker.Value = System.DateTime.Now.ToString("dd/MM/yyyy").Substring(0, 10); 
} 

private void datetimepicker_ValueChanged(object sender, EventArgs e) 
{ 
      //do something 
} 
```

感谢帮助。对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:37:10.667

您可以使用

*   或一个布尔变量，表示 to 的值`DateTimePicker`是从*外部*设置的，如果出现它`ValueChangedEvent`，则不在乎。

    ```
    //PSEUDO CODE
    bool setDateFromOutside = false; //GLOBAL VARIABLE

    public void TextBox_Leave(...){

     setDateFromOutside = true;   //SET TRUE

     dateTimePicker.Value = newDate; //SOME VALUE

     setDateFromOutside = false;  //SET TRUE

    }

    public void DateTimePicker_ValueChanged(...){

       if(setDateFromOutside)
          return;
    } 
    ```

*   或在将值设置为`DateTimePicker` *取消订阅*之前`ValueChangedEvent`，然后再次订阅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:23:08.080

现在我通过这个解决了我的问题。

```
private void textbox_Leave(object sender, EventArgs e) 
{ 
      datetimepicker.ValueChanged -= datetimepicker_ValueChanged;
      datetimepicker.Value = System.DateTime.Now.ToString("dd/MM/yyyy").Substring(0, 10);
      datetimepicker.ValueChanged += datetimepicker_ValueChanged; 
} 

private void datetimepicker_ValueChanged(object sender, EventArgs e) 
{ 
      //do something 
} 
```

# iphone - 在 iOS 中获取 Facebook 邀请好友的通知

> ID：14230315
> 
> 赞同：1
> 
> 时间：2013-01-09T07:32:38.337
> 
> 标签：iphone, ios, objective-c, facebook-graph-api

在我的 iPhone 应用程序中，我使用 facebook graph api 向 facebook 朋友发送 apprequests。

```
NSMutableDictionary* params = 
            [NSMutableDictionary dictionaryWithObjectsAndKeys:[NSString stringWithFormat:@"Check this app"], @"message",
                   @"TEST",@"title",
                   friendsIDs,@"to",
                    nil];

[facebook dialog:@"apprequests" andParams:params andDelegate:self]; 
```

我在 facebook appcenter 中收到通知，而不是在地球图标中。如何在地球图标中获取通知？请帮忙！！！

# mysql - 动态减去一个数字

> ID：14230317
> 
> 赞同：1
> 
> 时间：2013-01-09T07:32:57.587
> 
> 标签：mysql

我有一个基数 30000 和大约 5 行，其中每一行都有不同的数字，我想从查询中的基数中减去它们。

我想实现结果列：

```
 ID| num  | result
 1 | 1000 | 29000
 2 | 1200 | 27800
 3 | 2100 | 25700
 4 | 4300 | 21400
 5 | 1100 | 20300 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:34:55.127

```
SET @num := 0;
SELECT 
  id,
  num,
  IF(@num = 0,@num := (30000 - num) , @num := (@num - num)) AS `Result`
FROM
  `mytable` 
```

## [演示](http://sqlfiddle.com/#!2/6265a/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:01:03.737

试试这个：

```
SELECT id, num, (30000 - @sum:=@sum+num) AS Result
FROM mytable, (SELECT @sum:= 0) AS A 
```

检查这个[**SQL FIDDLE 演示**](http://sqlfiddle.com/#!2/6265a/1)

# android - 使用预填充表的所有列填充 Listview

> ID：14230318
> 
> 赞同：-1
> 
> 时间：2013-01-09T07:33:03.890
> 
> 标签：android, android-listview, hashmap, android-sqlite, sqliteopenhelper

我想从数据库中获取数据并在列表视图中显示，我创建了一个 Arraylist 并通过这种方式将列表视图连接到数据库，但我只能显示每个列的详细信息行，但我正在寻找的是一种在数据库的每一行中显示我的表的所有列的详细信息的方法。

我想显示我的行的描述，这些行以较小的字体插入到我的列表视图中每行的主要内容下方的其他列中。我尝试使用一个使用 SimpleCursorAdapter 的代码片段，但我无法在这里实现它！我还发现我可以使用 hashmap 但我已经找到的示例都是关于使用字符串数组填充列表视图。

这是我的 layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#86868a"
    >
 <ListView 
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    style="@style/CodeFont"
     >
    </ListView>
 <RelativeLayout android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     >  
 <Button 
     android:id="@+id/DeleteSelectedGoodsButton"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="@string/DeleteSelectedGoods"
     android:layout_alignParentTop="true"
     android:layout_alignParentLeft="true"/>
 <Button 
     android:id="@+id/ConfirmDelete"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="@string/ConfirmDeleteButton"
     android:layout_alignParentTop="true"
     android:layout_centerHorizontal="true"
     />
 <Button 
     android:id="@+id/CancelButton"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="@string/CancelButton"
     android:layout_alignParentTop="true"
     android:layout_alignParentRight="true"
     />
 </RelativeLayout>
</LinearLayout> 
```

这是我的 SQLHelper

```
public class ExternalDbOpenHelper extends SQLiteOpenHelper {

    //-----------------------------------------------------
    public static String DB_PATH;
    //-----------------------------------------------------
    public static String DB_NAME;
    public SQLiteDatabase database;
    public final Context context;
    /////Adapted From spinner
     /** A constant, stores the the table name */

    private static final String TABLE_NAME = "Tbl_Goods";
    private static final String GOOD_ID = "Good_ID";
    private static final String CART_ID = "Cart_ID";
    private static final String GOOD_NAME = "Good_Name";
    private static final String GOOD_UNITPRICE = "Good_UnitPrice";
    private static final String QUANTITY = "Quantity";
    ////---------------------------

    public SQLiteDatabase getDb() {
        return database;

    }

    public ExternalDbOpenHelper(Context context, String databaseName) {
        super(context, databaseName, null, 1);
        this.context = context;
        //-------------------------------------------------
        String packageName = context.getPackageName();
        DB_PATH = String.format("//data//data//%s//databases//", packageName);
        DB_NAME = databaseName;
        openDataBase();
    }

    //--------------------------------------------------------------------------------
    public void createDataBase() {
        boolean dbExist = checkDataBase();
        if (!dbExist) {
            this.getReadableDatabase();
            try {
                copyDataBase();
            } catch (IOException e) {
                Log.e(this.getClass().toString(), "Copying error");
                throw new Error("Error copying database!");
            }
        } else {
            Log.i(this.getClass().toString(), "Database already exists");
        }
    }
    //--------------------------------------------------------------
    private boolean checkDataBase() {
        SQLiteDatabase checkDb = null;
        try {
            String path = DB_PATH + DB_NAME;
            checkDb = SQLiteDatabase.openDatabase(path, null,
                    SQLiteDatabase.OPEN_READONLY);
        } catch (SQLException e) {
            Log.e(this.getClass().toString(), "Error while checking db");
        }
        //---------------------------------------------------
        if (checkDb != null) {
            checkDb.close();
        }
        return checkDb != null;
    }
    //-----------------------------------------------------
    private void copyDataBase() throws IOException {
        // ----------------------------------------------
        //------------------- assets----------------------
        InputStream externalDbStream = context.getAssets().open(DB_NAME);

        // ----------------------------------------------------------
        String outFileName = DB_PATH + DB_NAME;

        // -------------------------------------------------
        OutputStream localDbStream = new FileOutputStream(outFileName);

        //------------------------------------
        byte[] buffer = new byte[1024];
        int bytesRead;
        while ((bytesRead = externalDbStream.read(buffer)) > 0) {
            localDbStream.write(buffer, 0, bytesRead);
        }
        // -----------------------------
        localDbStream.close();
        externalDbStream.close();

    }

    public SQLiteDatabase openDataBase() throws SQLException {
        String path = DB_PATH + DB_NAME;
        if (database == null) {
            createDataBase();
            database = SQLiteDatabase.openDatabase(path, null,
                SQLiteDatabase.OPEN_READWRITE);
        }
        return database;
    }
    @Override
    public synchronized void close() {
        if (database != null) {
            database.close();
        }
        super.close();
    }

    ////-----------------------Adapted From SQLSpinner
    /** Inserts a new contact to the table contacts */
    public long insert(ContentValues contentValues){
        long rowID = database.insert(TABLE_NAME, null, contentValues);
        return rowID;

    }

    /** Updates a contact */
    public int update(ContentValues contentValues,String contactID){
        int cnt = database.update(TABLE_NAME, contentValues, "_id=" + contactID, null);
        return cnt;
    }

    /** Deletes a contact from the table */
    public int del(String contactID){
        int cnt = database.delete(TABLE_NAME, "_id="+contactID, null);      
        return cnt;
    }

    /** Returns all the contacts in the table */
    public Cursor getAllContacts(){
        return database.query(TABLE_NAME, new String[] { GOOD_ID,  CART_ID , GOOD_NAME,GOOD_UNITPRICE,QUANTITY } , null, null, null, null, GOOD_NAME + " asc ");
    }

    /** Returns a contact by passing its id */
    public Cursor getContactByID(String contactID){
        return database.query(TABLE_NAME, new String[] {  GOOD_ID,  CART_ID , GOOD_NAME,GOOD_UNITPRICE,QUANTITY} , "_ID="+contactID, null, null, null, GOOD_NAME + " asc ");
    }

    ////-----------------------------------
    @Override
    public void onCreate(SQLiteDatabase db) {}
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}
} 
```

这是我的活动：

```
public class PrepopSqliteDbActivity extends ListActivity {
    private static final String DB_NAME = "NFC.sqlite";
    //------------------------------------------------------------
    private static final String TABLE_NAME = "Tbl_Goods";
    private static final String GOOD_ID = "Good_ID";
    private static final String CART_ID = "Cart_ID";
    private static final String GOOD_NAME = "Good_Name";
    private static final String GOOD_UNITPRICE = "Good_UnitPrice";
    private static final String QUANTITY = "Quantity";

    private SQLiteDatabase database;
    private ListView listView;
    private ArrayList<String> goods;

    //////-----------------Adapted From SQLSpinner
    ArrayAdapter mAdapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.table_row);

        //-------------------------------------------------------
        ExternalDbOpenHelper dbOpenHelper = new ExternalDbOpenHelper(this, DB_NAME);
        database = dbOpenHelper.openDataBase();
        //--------------------------------------

    fillgoods();
        setUpList();  
  //////Cancel Button

        Button btnCancel=(Button)findViewById(R.id.CancelButton);
        btnCancel.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {

                finish();
            }
        });

    }

    private void setUpList() {
        //---------------------------------layout------------------------------------
        setListAdapter(new ArrayAdapter<String>(this,
                        android.R.layout.simple_list_item_single_choice, goods));

        listView = getListView();
        listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

        mAdapter=new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_single_choice, goods);

        //---------------------------------------------------------------------------
        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                                int position,long id) {
                Toast.makeText(getApplicationContext(),
                            ((TextView) view).getText().toString(),
                             Toast.LENGTH_SHORT).show();                
            }

        });

    }

    //--------------------------------------------------------------------
    private void fillgoods() {
        goods = new ArrayList<String>();
        Cursor goodCursor = database.query(TABLE_NAME,
                                             new String[] 
                                             {GOOD_UNITPRICE,GOOD_NAME,GOOD_ID, CART_ID,GOOD_UNITPRICE ,QUANTITY},
                                             null, null, null, null
                                             , GOOD_NAME);
        goodCursor.moveToFirst();
        if(!goodCursor.isAfterLast()) {
            do {
                String name = goodCursor.getString(1);
                goods.add(name);
            } while (goodCursor.moveToNext());
        }
        goodCursor.close();
    }

    //////////////Home And Back Button
    @Override
    public void onAttachedToWindow() {
       this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
      super.onAttachedToWindow();

    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
       if(keyCode == KeyEvent.KEYCODE_HOME)

           BackToMainIntent();

     else if(keyCode==KeyEvent.KEYCODE_BACK)
       {
         BackToMainIntent();
      }
       return false;
    }

    public void BackToMainIntent()
    {
        Intent intent = new Intent(this, Main.class);
           intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
           startActivity(intent);
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:20:36.330

像这样分离适配器声明的目的是什么？

```
setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_single_choice, goods));

listView = getListView();
listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

mAdapter=new ArrayAdapter<String>(this, android.R.layout.simple_list_item_single_choice, goods); 
```

仅包含一个 CheckedTextView，意味着该`android.R.layout.simple_list_item_single_choice`数组将仅投影一列。

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeightSmall"
    android:textAppearance="?android:attr/textAppearanceListItemSmall"
    android:gravity="center_vertical"
    android:checkMark="?android:attr/listChoiceIndicatorSingle"
    android:paddingStart="?android:attr/listPreferredItemPaddingStart"
    android:paddingEnd="?android:attr/listPreferredItemPaddingEnd"
/> 
```

如果要显示所有列值，则必须创建自定义适配器。请参阅[此处](https://stackoverflow.com/questions/8166497/custom-adapter-for-list-view)和[Vogella 教程](http://www.vogella.com/articles/AndroidListView/article.html)。

# java - 推特的 OAUTH

> ID：14230324
> 
> 赞同：0
> 
> 时间：2013-01-09T07:33:21.553
> 
> 标签：java, exception, twitter, oauth, scribe

我正在使用框架`OAUTH`为 Twitter编码。`Scribe`

我知道它使用`Client ID`and`Client secret`用于 OAUTH。在 OAUTH 之后，我将获得用户信息。

我得到了这个例外 `org.scribe.exceptions.OAuthException: Problems while creating connection.`

我需要任何证书吗？我还需要什么其他东西才能使这个 OAUTH 正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:06:21.077

证书是必需的，它应该被添加到`servers truststore.`

# c - 使用参数 (int&, int&) 隐式声明所有函数

> ID：14230325
> 
> 赞同：2
> 
> 时间：2013-01-09T07:33:28.570
> 
> 标签：c, function, compiler-errors

> 我在以下程序中遇到错误

```
 #include<stdio.h>   
        void func(int &x,int &y){
        }
        int main(){
            int a=10,b=6;

            func(a,b);
            return 0;
        } 
```

> 错误：
> 
> prog.c:2：错误：在 '&' 之前应为 ';'、',' 或 ')' 令牌 prog.c：在函数'main'中：prog.c:7：警告：函数'func'的隐式声明</p>
> 
> 但是当我将函数参数类型从 (&) 更改为 (*) 或任何其他类型时，它工作正常。
> 
> 像这样：

```
 #include<stdio.h>
    void func(int *x,int *y){

    }
    int main(){
        int a=10,b=6;
        func(&a,&b);
        return 0;
    } 
```

> 提前致谢。
> 
> NKS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:50:11.797

由于您没有编写有效的 C 代码，因此您收到编译器错误。`(int &x,int &y)`没有任何意义，看起来您正在尝试在 C 中使用 C++ 引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:43:59.987

C 中不允许通过引用传递。第二个块代码是正确的。

当您在**实际参数**中传递变量的地址时，您需要将它们收集在 C 语言**形式参数中的指针变量中。**

```
func(&x, &y)    // actual parameters

void func(int *x, int *y)    //formal parameters 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T08:13:51.657

中没有引用传递`C`，您在代码中使用`C++`语法，因为`C`您的代码应该与您在 2nd Block 中提到的一样。

# javascript - 如何使用多个系列将图例添加到剑道股票图表？

> ID：14230331
> 
> 赞同：4
> 
> 时间：2013-01-09T07:34:09.727
> 
> 标签：javascript, html, kendo-ui

我们有一个页面，其中包含股票图表，除了股票图表，在同一页面中，我们也有网格，在剑道 StockChart 图例中也没有动态显示。所以我尝试在代码中使用多个系列：但是在运行此代码图例值重复时，如何解决此问题

```
$(document).ready(function () {
    var db = new kendo.data.DataSource({
        data : data,
        group: {
            field: "studentmarks"
        }
    });

    db.read();

    $("#Chart").kendoStockChart({
        theme     : $(document).data("kendoSkin") || "silver",
        dataSource: db,
        aggregate : [
            { field: "ID", aggregate: "aggregate", line: "line"}
        ],

        title         : {
            text: "CDR"
        },
        dateField     : "time",
        repeat        : false,
        legend        : {
            position: "right"
        },
        chartArea     : {
            background: ""
        },
        seriesDefaults: {
            type: "line", field: "ID"
        },

        series   : [
            {
                name           : "iad",
                data           : data,
                filter         : "studentmarks",
                color          : "#FC0505",
                width          : 2,
                line           : "line",
                aggregate      : "aggregate",
                visibleInLegend: "studentmarks",

                markers: {
                    visible: false
                },
                tooltip: {
                    visible: true,
                    format : "{0}%"
                }
            },
            {
                name   : "pht",
                filter : "studentmarks",
                data   : data,
                axis   : "",
                color  : "#2605FC",
                width  : 2,
                line   : "line",
                markers: {
                    visible: true
                },
                tooltip: {
                    visible: true,
                    format : "{0}"
                }
            },
            {
                name   : "phone",
                filter : "studentmarks",
                data   : data,
                axis   : "",
                color  : "#ED9AA5",
                width  : 2,
                line   : "line",
                markers: {
                    visible: true
                },
                tooltip: {
                    visible: true,
                    format : "{0}%"
                }

            },
            {
                name   : "cbs",
                filter : "studentmarks",
                data   : data,
                axis   : "",
                color  : "#9AA5ED",
                visible: true,
                opacity: .4,
                width  : 2,
                line   : "line",
                markers: {
                    visible: true
                },
                tooltip: {
                    visible: true,
                    format : "{0}%"
                }
            }
        ],
        valueAxis: [
            {
                title    : { text: "" },
                name     : "mos",
                majorUnit: 0.5,
                max      : 5.0,
                min      : 0
            },
            {
                name     : "ink",
                title    : { text: "" },
                min      : 0,
                max      : 6727.14,
                majorUnit: 1000,
                minorUnit: 500
            }
        ],

        navigator: {
            series: {
                type     : "area",
                color    : "red",
                field    : "time",
                stack    : "true",
                value    : "studentmarks",
                data     : data,
                aggregate: "min",
                name     : "sai",
                select   : {
                    from: "2009-01-01 17:08:04",
                    to  : "2013-12-24 20:30:26"
                },
                labels   : { color: "green", visible: false },
                tooltip  : { background: "green", format: "{0}", color: "white", visible: true }
            }
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:58:55.733

关闭传奇并创建自己的。你将有更多的灵活性来做你想做的事。

# java - Java 字符串（查询字符串）操作

> ID：14230335
> 
> 赞同：0
> 
> 时间：2013-01-09T07:34:28.037
> 
> 标签：java, servlets

我有一个奇怪的场景。查询字符串有值`first=second=12123423423423432323234`

```
String queryString = request.getParameter("first=second=12123423423423432323234") 
```

所以我必须要：

1.  捕获“第一”和“第二”值
2.  验证查询字符串有“第一”和“第二”。

有人可以分享我如何以最好的方式实现这一目标吗？

我真的很感谢你在这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:43:16.150

我相信您的查询字符串应该看起来像

```
first=firstvalue&second=secondvalue 
```

您可以在 servlet 中使用它来打印查询字符串

```
String firstValue = request.getParameter("first");
String secondValue = request.getParameter("second");
System.out.println("Query String:first="+firstValue+"second=+"secondValue); 
```

在您的情况下，查询字符串在哪里

```
first=second=12123423423423432323234 
```

你可以这样做

```
String first = request.getParameter("first");
String second = request.getParameter("second");
if(first.contains("second=")){
    second = first.split("second=")[1];
    first = first.split("second=")[0];
}
out.println("[First:"+first+"][Second:"+second+"]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:43:25.797

如果您的参数由`&`（即`first=&second=something`）正确分隔，那么简单`.getParameter("first")`地`.getParameter("second")`

否则，您需要使用字符串 - 可能会拆分为, 并且遇到`=`first cut until 的值。`second`虽然我看不到如果`first`有一个值将如何工作：`first=foosecond=bar`？

# asp.net - 如何在 HtmlRowPrepared 事件中更改日期格式，同时将不同的数据表绑定到同一个网格？

> ID：14230337
> 
> 赞同：1
> 
> 时间：2013-01-09T07:34:30.187
> 
> 标签：asp.net

我想在 HtmlRowPrepared 事件中更改日期格式。我将不同的数据表数据绑定到同一个网格。

# mysql - CannotAcquireLockException（Spring、Hibernate、MySQL）

> ID：14230341
> 
> 赞同：15
> 
> 时间：2013-01-09T07:34:49.863
> 
> 标签：mysql, spring, hibernate

我们的应用程序使用 Spring、Hibernate 和 MySQL。但有时查询会生成*CannotAcquireLockException*，代码如下。

```
public Ledger[] storeOrUpdateLedgers(Ledger[] ledgers,int iClinicId) throws DataAccessException {

    List<Ledger> ledgerList = new ArrayList<Ledger>();
    for(int i = 0; i < ledgers.length; i++) {
        ledgers[i].setiClinicId(iClinicId);
        ledgerList.add(ledgers[i]);
    }

    for(int i = 0; i < ledgerList.size(); i++) {
        getHibernateTemplate().clear();
        getHibernateTemplate().saveOrUpdate(ledgerList.get(i));
        getHibernateTemplate().flush();
    }

}

public class Ledger implements Serializable {

    private int iLedgerId;
    private int iClinicId;
    private int iPatientId;
    private int iProviderId;
    private int iVisitId;
    private int iPaymentId;
    private int iClaimId;
    private int iProcedureId;
    private String sDate;
    private double dAmount;
    private byte btType;
    private String sDesc;
    private byte btCurrParty;
    private int iCurrPartyId;
    private byte btRespParty;
    private int iRespPartyId;
    private boolean active;
    private int iParentId;
    private int iReasonId;
    private String sDos;
    private int iU_ID;
    private String sEntryDate;   // no mapping required

    public int getiU_ID() {
        return iU_ID;
    }

    public void setiU_ID(int iUID) {
        iU_ID = iUID;
    }

    public int getiLedgerId() {
        return iLedgerId;
    }

    public void setiLedgerId(int iLedgerId) {
        this.iLedgerId = iLedgerId;
    }

    public int getiClinicId() {
        return iClinicId;
    }

    public void setiClinicId(int iClinicId) {
        this.iClinicId = iClinicId;
    }

    public int getiPatientId() {
        return iPatientId;
    }

    public void setiPatientId(int iPatientId) {
        this.iPatientId = iPatientId;
    }

    public int getiProviderId() {
        return iProviderId;
    }

    public void setiProviderId(int iProviderId) {
        this.iProviderId = iProviderId;
    }

    public int getiVisitId() {
        return iVisitId;
    }

    public void setiVisitId(int iVisitId) {
        this.iVisitId = iVisitId;
    }

    public int getiPaymentId() {
        return iPaymentId;
    }

    public void setiPaymentId(int iPaymentId) {
        this.iPaymentId = iPaymentId;
    }

    public int getiClaimId() {
        return iClaimId;
    }

    public void setiClaimId(int iClaimId) {
        this.iClaimId = iClaimId;
    }

    public int getiProcedureId() {
        return iProcedureId;
    }

    public void setiProcedureId(int iProcedureId) {
        this.iProcedureId = iProcedureId;
    }

    public String getsDate() {
        return sDate;
    }

    public void setsDate(String sDate) {
        this.sDate = sDate;
    }

    public double getdAmount() {
        return dAmount;
    }

    public void setdAmount(double dAmount) {
        this.dAmount = dAmount;
    }

    public byte getbtType() {
        return btType;
    }

    public void setbtType(byte btType) {
        this.btType = btType;
    }

    public String getsDesc() {
        return sDesc;
    }

    public void setsDesc(String sDesc) {
        this.sDesc = sDesc;
    }

    public byte getbtCurrParty() {
        return btCurrParty;
    }

    public void setbtCurrParty(byte btCurrParty) {
        this.btCurrParty = btCurrParty;
    }

    public int getiCurrPartyId() {
        return iCurrPartyId;
    }

    public void setiCurrPartyId(int iCurrPartyId) {
        this.iCurrPartyId = iCurrPartyId;
    }

    public byte getbtRespParty() {
        return btRespParty;
    }

    public void setbtRespParty(byte btRespParty) {
        this.btRespParty = btRespParty;
    }

    public int getiRespPartyId() {
        return iRespPartyId;
    }

    public void setiRespPartyId(int iRespPartyId) {
        this.iRespPartyId = iRespPartyId;
    }

    public boolean isActive() {
        return active;
    }

    public void setActive(boolean active) {
        this.active = active;
    }

    public int getiParentId() {
        return iParentId;
    }

    public void setiParentId(int iParentId) {
        this.iParentId = iParentId;
    }

    public int getiReasonId() {
        return iReasonId;
    }

    public void setiReasonId(int iReasonId) {
        this.iReasonId = iReasonId;
    }

    public String getsDos() {
        return sDos;
    }

    public void setsDos(String sDos) {
        this.sDos = sDos;
    }

    public String getsEntryDate() {
        return sEntryDate;
    }

    public void setsEntryDate(String sEntryDate) {
        this.sEntryDate = sEntryDate;
    }

} 
```

休眠映射：

```
<class name="com.iris.allofactor.data.vo.Ledger" table="LEDGER">
    <id name="iLedgerId" column="LEDGER_ID" unsaved-value="0">
        <generator class="native"/>
    </id>
    <property name="iClinicId" column="CLINIC_ID"></property>
    <property name="iPatientId" column="PATIENT_ID"></property>
    <property name="iProviderId" column="PROVIDER_ID"></property>
    <property name="iVisitId" column="VISIT_ID"></property>
    <property name="iPaymentId" column="PAYMENT_ID"></property>
    <property name="iClaimId" column="CLAIM_ID"></property>
    <property name="iProcedureId" column="PROCEDURE_ID"></property>
    <property name="sDate" column="DATE"></property>
    <property name="dAmount" column="AMOUNT"></property>
    <property name="btType" column="TYPE"></property>
    <property name="sDesc" column="DESCRIPTION"></property>
    <property name="btCurrParty" column="CURR_PARTY"></property>
    <property name="iCurrPartyId" column="CURR_PARTY_ID"></property>
    <property name="btRespParty" column="RESP_PARTY"></property>
    <property name="iRespPartyId" column="RESP_PARTY_ID"></property>
    <property name="active" column="ACTIVE"></property>
    <property name="iParentId" column="PARENT_ID"></property>
    <property name="iReasonId" column="REASON_ID"></property>
    <property name="sDos" column="DOS"></property>
    <property name="iU_ID" column="USER_ID"></property>
</class> 
```

堆栈跟踪如下：

```
at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:244)
at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
at org.springframework.orm.hibernate3.HibernateAccessor.convertJdbcAccessException(HibernateAccessor.java:424)
at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:410)
at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:424)
at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
at org.springframework.orm.hibernate3.HibernateTemplate.flush(HibernateTemplate.java:890)
at com.iris.allofactor.data.dao.hibernate.HibernateLedgerDao.storeOrUpdateLedgers(HibernateLedgerDao.java:97)
at com.iris.allofactor.data.dao.impl.LedgerAuditBODaoImpl.storeOrUpdateLedgers(LedgerAuditBODaoImpl.java:64)
at com.iris.allofactor.data.dao.impl.ChargesDaoImpl.storeOrUpdateCharges(ChargesDaoImpl.java:844)
at com.iris.allofactor.data.dao.impl.ClaimEncounterBODaoImpl.addorEditClaimWhileClaimIdAndVisitIdIsPresent(ClaimEncounterBODaoImpl.java:1072)
at com.iris.allofactor.data.dao.impl.ClaimEncounterBODaoImpl.storeOrUpdateClaim(ClaimEncounterBODaoImpl.java:819)
at com.iris.allofactor.data.dao.facade.DaoFacadeImpl.storeOrUpdateClaim(DaoFacadeImpl.java:1915)
at sun.reflect.GeneratedMethodAccessor2549.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
at $Proxy2.storeOrUpdateClaim(Unknown Source)
at com.iris.allofactor.services.impl.ClaimServiceImpl.addorEditClaim(ClaimServiceImpl.java:447)
at com.iris.allofactor.services.soap.impl.ClaimWebServiceImpl.addorEditClaim(ClaimWebServiceImpl.java:337)
at sun.reflect.GeneratedMethodAccessor2548.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397)
at org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186)
at org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323)
at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
at org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:453)
at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281)
at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:619) 
```

它反复生成此异常，我认为我的方法存在一些问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-16T09:17:42.987

这是一个明确的*僵局*情况。这与 MySQL 错误有关，而不是与您的类的 Hibernate 问题有关。首先让我们回顾一下*死锁*的定义：

> *死锁*是这样一种情况，其中两个或多个相互竞争的动作都在等待对方完成，因此永远都不会。

有关更多信息，请参阅此页面：[http ://en.wikipedia.org/wiki/Deadlock](http://en.wikipedia.org/wiki/Deadlock)

你如何处理这种情况。好吧，您需要阅读以下文章： [InnoDB 中的死锁](http://dev.mysql.com/doc/refman/5.0/en/innodb-deadlocks.html)。它包含您需要的大部分信息。这篇文章详细解释了如何跟踪和处理死锁，这是必读的。

基本上，您需要根据上述信息执行以下步骤：

1.  创建 MySQL 跟踪：跟踪 MySQL 服务器上正在运行的所有查询。
2.  获取死锁跟踪信息
3.  将死锁跟踪和 MySQL 跟踪相互匹配以确定死锁的原因。

InnoDB 上的文章也有一个补救措施列表，所以我不会在这里重复它们。请记住，*死锁*不是致命错误，您只需要处理它。所以可能会捕获异常并重试事务。还要确保 Hibernate 生成的查询是最佳的，因为它们在可能的地方使用*索引*等。您可以尝试的另一件事是在 Hibernate 上*批处理*事务并*批量*执行。

我相信通过上面的两个链接，您将能够处理该问题，并且您自己解决这个问题将是宝贵的经验。如果您发现任何特定项目有问题，请将其添加到问题中，让我们处理它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-12T05:45:24.193

我想知道您的问题是否类似于此线程中讨论的问题：[Hibernate/Spring/MS-SQL 的死锁问题](http://www.coderanch.com/t/415119/ORM/databases/Deadlock-problems-Hibernate-Spring-MS)。这个特定问题的根本原因是您有一个线程对数据库执行查找/选择，而另一个线程正在尝试对数据库执行删除/插入。线程中提供了 2 个解决方案。

第一个优化了查找和删除代码，使其成为一个`SQL`命令而不是两个命令。

```
# sql sudo code

# original query
find me this row where this=that
delete this row

# better query
delete this row where this=that 
```

第二个推荐的解决方案是`COLUMNS`在子句中使用的上创建一个索引，`WHERE`以便数据库不再锁定，`ROW`但现在会锁定索引的键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-28T14:15:05.507

MySQL 列表中可能存在未完成的会话。它可能仍在运行。由于程序员在您的应用程序中的错误或使用数据库的程序员。

**例如，您启动了一个会话，但由于错误，该进程卡住而没有回滚。** **它很少发生。

请手动删除所有会话

获取所有会话

```
SHOW FULL PROCESSLIST; 
```

然后通过 id 杀死他们

```
KILL 192; 
```

例子。

```
mysql> SHOW PROCESSLIST;
+-----+------+-----------------+------+---------+------+-------+---------------+
| Id  | User | Host            | db   | Command | Time | State | Info      |
+-----+------+-----------------+------+---------+------+-------+----------------+
| 143 | root | localhost:61179 | cds  | Query   |    0 | init  | SHOW PROCESSLIST |
| 192 | root | localhost:53793 | cds  | Sleep   |    4 |       | NULL      |
+-----+------+-----------------+------+---------+------+-------+----------------+
2 rows in set (0.00 sec)

mysql> KILL 192;
Query OK, 0 rows affected (0.00 sec) 
```

# c - 从服务访问 WebDav 资源时访问被拒绝

> ID：14230345
> 
> 赞同：2
> 
> 时间：2013-01-09T07:35:01.967
> 
> 标签：c, delphi, winapi, service, webdav

我在 Windows 2003 Server 上有一项服务，需要以 UNC 路径的形式访问 webdav 资源。此服务的目的是验证（并采取纠正措施）webdav 功能到 sharepoint。想法是将文件写入共享点，并验证其内容。如果出现问题并且超出阈值，则会重新启动 mrxdav 和 webclient 服务。

我在 2003 服务器上的本地管理员服务帐户下运行该服务，并且可以访问共享点“文件夹”。（我通过使用服务帐户登录并将文件写入同一文件夹来验证这一点）。

当服务尝试将文件写入此文件夹时，它失败并显示 ACCESS DENIED，进程监视器显示该服务在 LocalSystem 下运行并模拟我的服务帐户

![在此处输入图像描述](../Images/e73c53e05ff3f58b48f1be58573c3ca2.png) ![在此处输入图像描述](../Images/68a1c3ee2805526ad9ffee388f586bab.png) ![在此处输入图像描述](../Images/95b78927dcd6c4cfd980dd271c1b8b83.png)

我还尝试使用 LogonUser 和 LogonUserEx（具有登录交互、网络、网络明文和提供程序的各种选项）从我的代码中模拟服务帐户，然后是 ImpersonateUser，但都导致相同的访问被拒绝。

我认为这是特定于使用 WebClient 服务的服务。我的代码是用 Delphi 编写的，但我也添加了 c 标签以吸引更多读者，因为我认为我的问题与 Delphi 无关。

**编辑**：也许相关，我正在运行一个单独的线程，它实际访问 WebDav 共享。

**编辑：**作为一种解决方法，我使用以下代码使用显式凭据创建网络连接：

```
function TGuardThread.Map(const Username: String; var Password: String;
  const Domain: String): Boolean;
var
  nr: NETRESOURCE;
  dwRes: DWORD;
begin
  try
    ZeroMemory(@nr, SizeOf(nr));
    nr.dwType := RESOURCETYPE_ANY;
    nr.lpRemoteName := PChar('\\mywebdavroot\myfolder');

    dwRes := WNetAddConnection2(nr, PChar(Password),
      PChar(Format('%s\%s', [Domain, Username])), CONNECT_UPDATE_PROFILE);

    Result := dwRes = NO_ERROR;
  finally
    if Length(Password) > 0 then
      SecureZeroMemory(@Password[1], Length(Password) * SizeOf(Char));
  end;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:18:38.293

解决方法是使用带有凭据的显式连接到 WebDav 服务器，如下所示：

```
function TGuardThread.Map(const Username: String; var Password: String;
  const Domain: String): Boolean;
var
  nr: NETRESOURCE;
  dwRes: DWORD;
begin
  try
    ZeroMemory(@nr, SizeOf(nr));
    nr.dwType := RESOURCETYPE_ANY;
    nr.lpRemoteName := PChar('\\mywebdavroot\myfolder');

    dwRes := WNetAddConnection2(nr, PChar(Password),
      PChar(Format('%s\%s', [Domain, Username])), CONNECT_UPDATE_PROFILE);

    Result := dwRes = NO_ERROR;
  finally
    if Length(Password) > 0 then
      SecureZeroMemory(@Password[1], Length(Password) * SizeOf(Char));
  end;
end; 
```

# windows-8 - 检测 Windows 应用商店应用的平台

> ID：14230347
> 
> 赞同：1
> 
> 时间：2013-01-09T07:35:15.547
> 
> 标签：windows-8, windows-runtime

是否有可能在运行时询问 Windows Store 应用程序（为 ARM 和 x86/64 编译）当前是否在 ARM 设备上执行，或者更具体地在 Microsoft Surface 平板电脑上从 c# 中执行，或者是否有必要编译两个版本同一个应用程序在不同平台上表现不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:32:36.163

这可以通过以下代码完成（根据this [SO post](https://stackoverflow.com/questions/12272399/detect-desktop-availability-from-metro-application-detect-arm-detect-windows-r)）：-

```
[DllImport("kernel32.dll")]
internal static extern void GetNativeSystemInfo(ref SystemInfo lpSystemInfo);

internal static bool IsArmBased()
{
    var sysInfo = new SystemInfo();
    GetNativeSystemInfo(ref sysInfo);
    return sysInfo.wProcessorArchitecture == ProcessorArchitectureArm; //ushort 5
} 
```

这确实通过了 WACK 测试，测试我不会指望它永远存在。认真思考为什么需要这些信息（是只是为了统计，还是要改变应用程序的行为，如果是，为什么！？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T19:33:14.337

```
using Windows.ApplicationModel;

Package package = Package.Current;
PackageId packageId = package.Id;

String arch = String.Format("{0}", packageId.Architecture); 
```

这将返回“X86”或“ARM”，具体取决于底层硬件。

# javascript - 使用 Javascript 在服务器 URL 上发布 JSON 数据

> ID：14230351
> 
> 赞同：3
> 
> 时间：2013-01-09T07:35:33.897
> 
> 标签：javascript, jquery, html, json, post

我准备了一个 JSON 数据，我需要将它发布到服务器上，以便可以调用服务。服务器的 URL 可用，我正在为相同的 AJAX 调用 POST 数据。

但我不知道在哪里放置生成的 JSON 字符串。

我的代码如下：

```
function postJSONData(JSONData, localMode)
        {
            var localJSONData = JSONData;
            var postMode = localMode;

             $.ajax({
                    type: 'POST',
                    url: 'https://tt.s2.com/tmobile/subscribe-service/uid=ankit_bharat_tanna',
                    dataType: 'xml',
                    success: function(data){
                        alert("SECOND POST JSON DATA");
                    }   // Success Function
    }); // AJAX Call

            alert("POST JSON ------------> "+localJSONData +" "+postMode);
        } 
```

我想将 JSON 数据发布到服务器 URL。要使用的任何参数？

谢谢，安基特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:40:04.317

您应该使用数据参数[$.ajax() jquery doc link传递值](http://api.jquery.com/jQuery.post/)

```
function postJSONData(JSONData, localMode)
    {
        var localJSONData = JSONData;
        var postMode = localMode;

         $.ajax({
                type: 'POST',
                url: 'https://tt.s2.com/tmobile/subscribe-service/uid=ankit_bharat_tanna',
                contentType:"application/json; charset=utf-8",
                dataType:"json"
                data:  JSONData
                success: function(data){
                    alert("SECOND POST JSON DATA");
                }   // Success Function
}); // AJAX Call

        alert("POST JSON ------------> "+localJSONData +" "+postMode);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:40:20.010

您缺少`data`参数。此外，您需要发送`json`数据，因此`dataType`参数应设置为`json`. 下面是一个例子

```
function postJSONData(JSONData, localMode)
        {
            var localJSONData = JSONData;
            var postMode = localMode;

             $.ajax({
                    data: localJSONData,
                    type: 'POST',
                    url: 'https://tt.s2.com/tmobile/subscribe-service/uid=ankit_bharat_tanna',
                    dataType: 'json',
                    success: function(data){
                        alert("SECOND POST JSON DATA");
                    }   // Success Function
    }); // AJAX Call

            alert("POST JSON ------------> "+localJSONData +" "+postMode);
        } 
```

# c# - 在 Telerik RichText 编辑器中保存和另存为

> ID：14230354
> 
> 赞同：4
> 
> 时间：2013-01-09T07:35:47.547
> 
> 标签：c#, .net, wpf, telerik

我`Telerik RichTextBox Editor`在我的 WPF 项目中使用（像 MS Office 之类的）。当我保存一个文件，并在进行更改后尝试再次保存它时，它会打开`SaveFileDialog`并询问文件名，即使我已经定义并保存了它（就像它认为我正在使用另存为，而不是节省）。我该如何解决这个问题？

我在用

```
<telerik:RadRibbonButton telerik:RadRichTextBoxRibbonUI.RichTextCommand="{Binding Path=SaveCommand}" Size="Small"
         SmallImage="pack://application:,,,/Telerik.Windows.Controls.RichTextBoxUI;component/Images/MSOffice/16/save.png" Text="Save" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:56:11.820

还没有从任何人那里得到解决方案。[处理它，使用CustomSaveCommand](http://telerik.com/ClientsFiles/369180_CustomSaveCommand.zip)取得一些进展。当我得到一个完整的解决方案时会发布一个完整的解决方案。如果有人在我之前得到一个，我会接受它。谢谢大家。

**解决方案：**

得到了解决方案。使用[CustomSaveCommand](http://telerik.com/ClientsFiles/369180_CustomSaveCommand.zip)和[radrichtextbox-Import/Export](http://www.telerik.com/help/silverlight/radrichtextbox-features-import-export.html)创建了一个自定义 OpenCommand 。`string variable`在打开/保存文档时保留文件的完整路径，并在下次保存时覆盖文件而不使用文件对话框。还要在新文件打开时重置变量。希望它可以帮助任何正在寻找解决方案的人。干杯:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:40:52.350

您可以设置自定义文件浏览器提供程序并在其中执行您想要的操作，即查看[自定义文件浏览器内容提供程序](http://www.telerik.com/help/aspnet-ajax/editor-custom-filebrowsercontentprovider.html)。除了一些其他的东西，只是继承自 Telerik.Web.UI.Widgets.FileBrowserContentProvider 类。

这是使用 sql 数据库存储文件的一个很好的示例：[sql database](http://www.telerik.com/community/code-library/aspnet-ajax/file-explorer/connect-radfileexplorer-or-radeditor-to-a-sql-databse.aspx)

# sql - 我将如何在 MS SQL 中执行此条件连接？

> ID：14230358
> 
> 赞同：3
> 
> 时间：2013-01-09T07:36:05.907
> 
> 标签：sql, sql-server, tsql, join

我四处寻找条件连接，但似乎他们正在尝试做一些与我正在尝试不同的事情。对于这个问题，我会稍微简化一下问题。

我有三张桌子：`Users, Clients, and Employees.`

该`Users`表有两列，`AssociatedID and UserType.`

`UserType`是`"Client"`或`"Employee,"`并且`AssociatedID`是 Clients 或 Employees 表中的对应 ID。

问题是，Clients 和Employees 都使用整数作为ID，所以每个表可以有相同的ID 来表示完全不同的东西（而不是GUID，这可以避免这个问题）。

我想要的是一个查询，它将查看用户中的一行，并说如果 UserType 是 Employee，然后在Employees 表的 ID 上加入 AssociatedID，如果 UserType 是 Client，然后在 Clients 表的 ID 上加入 JOIN AssocaitedID。因此，如果客户和员工都有一个名称列，我可以获得每个用户的所有名称，无论他们是客户还是员工。如果这在这里有所不同，我正在使用 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T07:42:05.230

试试这个：

```
SELECT 
  COALESCE(c.Name, e.Name) AssociatedName,
  ... 
FROM Users u
LEFT JOIN Clients c    ON u.AssociatedID = c.ClientId
                      AND u.UserType     = 'Client'
LEFT JOIN Employees e  ON u.AssociatedID = e.EmployeeId
                      AND u.UserType     = 'Employee'; 
```

## [SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/f483e/2)

**或者：**正如@Tikkes 指出的那样，您可以这样做`UNION`：

```
SELECT c.Name AssociatedName
FROM Users u
INNER JOIN Clients c    ON u.AssociatedID = c.ClientId
                      AND u.UserType     = 'Client'
UNION ALL
SELECT e.Name FROM Users u
INNER JOIN Employees e  ON u.AssociatedID = e.EmployeeId
                      AND u.UserType     = 'Employee'; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/f483e/3)

* * *

**更新：**为此，您必须使用如下`CASE`表达式：

```
SELECT 
  u.AssociatedID,
  CASE u.UserType 
   WHEN 'Client' THEN c.Name
   ELSE e.Name 
  END AS AssociationName
FROM Users u
LEFT JOIN Clients c    ON u.AssociatedID = c.ClientId      
LEFT JOIN Employees e  ON u.AssociatedID = e.EmployeeId; 
```

## [使用 CASE 更新了 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/9af44/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T16:51:46.787

相同的 Senario：我有 CustomerExt 有 SoldTo 和 ShipTo 代码，如果 ShipTo 列有值，则在表 ShipTo 中使用 ShipToName 否则在 Customer 表中使用 CustomerName

```
Select COALESCE(B.CustomerName, C.ShiptoName) as CustomerName  
FROM CustomerExt A

left join Customer B    ON A.SoldTo = B.CustomerCode
                      AND isnull(A.ShipTo,'') =''

left join ShipTo C  ON A.ShipTo = C.ShipToCode
                      AND isnull(A.ShipTo,'') <>'' 
```

# hibernate - 在 jqgrid 列中显示数据

> ID：14230360
> 
> 赞同：-2
> 
> 时间：2013-01-09T07:36:39.763
> 
> 标签：hibernate, jqgrid, struts2, set, hibernate-mapping

我正在使用 Struts 2.3.7、struts2-jquery-grid-plugin-3.5.0 和休眠 3.6。我正在使用一对多映射来连接两个实体。这些实体

问题.java

```
 public class Issue implements Serializable
    {
    private Integer issue_id;
    private String  issue_description;
    private Date issue_raised_date;
    private Set<Issue_Tracker> issueTracker = new HashSet<Issue_Tracker>(0);

getter and setters 
```

Issue_Tracker.java

```
public class Issue_Tracker implements Serializable
{  
     private Integer issue_id;
     private String assignedTo; 
```

如何在 assignmentTo 列的 jqgrid 中显示此**数据**。我的 jqgrid 如下：

```
<sjg:grid
    id="gridtable"
    caption="Issue-Summary"
    dataType="json"
    href="%{remoteurl}"
    pager="true"
    gridModel="gridModel"
    rowList="10,15,20"
    rowNum="15"
    rownumbers="true"
    reloadTopics="reloadGrid"
>
    <sjg:gridColumn name="issue_id"  id="issueId"  index="id" title="Issue-ID" formatter="integer"  sortable="false"/>
    <sjg:gridColumn name="issue_description" index="id" title="Issue-Details"  sortable="false"/>
    <sjg:gridColumn name="issue_raised_date" index="date" title="Issue-Date"  formatter="date"  sortable="false"/>

    <sjg:gridColumn name="issueTracker"  index="assigned" title="Assigned To"  sortable="false"/>
</sjg:grid> 
```

但输出如下， ![在此处输入图像描述](../Images/c7ca18bd996f5c16a0fa1153f48c353c.png)

如何在**assignmentTo**列中显示实际数据而不是此对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:13:43.640

假设assignedTo不是多个

尝试这个

改变

```
 private Set<Issue_Tracker> issueTracker = new HashSet<Issue_Tracker>(0); 
```

至

```
 public  IssueTracker issueTracker; 
```

在你的jsp页面中

改变

```
 <sjg:gridColumn name="issueTracker"  index="assigned" title="Assigned To"  sortable="false"/> 
```

至

```
 <sjg:gridColumn name="issueTracker.assignedTo"  index="issueTracker.assigned" title="Assigned To"  sortable="false"/> 
```

# android - 默认搜索功能谷歌地图安卓

> ID：14230362
> 
> 赞同：0
> 
> 时间：2013-01-09T07:36:43.523
> 
> 标签：android

我想在我的 android 项目上获得谷歌地图中可用的默认搜索功能。例如，如果我搜索“印度医生”，Gmaps 会显示很多点，我如何在不使用 Itemized Overlay 或使用一些 json 请求的情况下完成这项工作。有人可以建议我一个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:54:56.200

您可以使用 Google Places API 为您的查询获取 JSON。

如果您希望避免使用任何库或 API（因为您必须注册才能获得 API 密钥），您可以只使用 webview 并放置 maps.google 网址。例如：

```
https://maps.google.com/?q=New+York&z=13&t=m&output=embed 
```

或者

```
https://maps.google.com/?q=near:doctors+in+india&z=13&t=m&output=embed 
```

您会发现这里的参数没有记录，[这](http://picchiri.wordpress.com/2010/02/24/google-maps-parameter/)是我发现对参数有用的链接。

# code-snippets - 如何在 phx:tv 中使用 phpthumb？

> ID：14230363
> 
> 赞同：0
> 
> 时间：2013-01-09T07:36:49.807
> 
> 标签：code-snippets, modx, television

使用 MODX Evo 1.0.7

我在这样的块中使用 phx:tv：

```
[+phx:tv=`14?Photo`+] 
```

这是 phx:tv 片段（来源：[http](http://wiki.modxcms.com/index.php/PHx/CustomModifiers#phx:tv) ://wiki.modxcms.com/index.php/PHx/CustomModifiers#phx:tv ）

```
 <?php
if(strlen($options )>0) {
    $data = explode("?",trim($options),2);
    $id= (!empty($data[0]) && is_numeric($data[0])) ? $data[0]: '';
    $tv= (!empty($data[1])) ? $data[1]: '';
    $result = $modx->getTemplateVar($tv, 'name', $id, 1);
    return $result['value'];
    }
?> 
```

如何在代码中使用 phpthumb 调整 Photo TV 中的图像大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:33:30.377

我已经很长时间没有使用 phx 或 Evo 了，但是您可以尝试像这样链接它：

```
[+phx:tv=`14?Photo`:phpthumb=`w=450`+] 
```

# python - Python继承问题

> ID：14230369
> 
> 赞同：-2
> 
> 时间：2013-01-09T07:37:50.477
> 
> 标签：python, oop, inheritance

```
 # -*- coding: utf-8 -*-

    class partner(object):
       _table = 'partner'

       def sendsms(self):
          print "I am partners"

       def sendemail(self):
          print "send email"

    class student(partner):

      _inherit = 'partner'    
      _table = 'student'

      def sendsms(self):
        print "I am student"
        print "@@", self._inherit
        print "###", self._table
        super(student,self).sendsms()

    class student(student):

      _inherit = 'student'

      def fees(self):
        print "1000 INR"

   t = student()
   t.sendsms() 
```

这将递归，问题或继承问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:46:25.750

`class student(student):`是一行根本没有意义的代码。如果你做类似的事情

```
# -*- coding: utf-8 -*-

class partner(object):
    _table = 'partner'

    def sendsms(self):
        print "I am partners"

    def sendemail(self):
        print "send email"

class student(partner):

    _inherit = 'partner'    
    _table = 'student'

    def sendsms(self):
        print "I am student"
        print "@@", self._inherit
        print "###", self._table
        super(student,self).sendsms()

class student2(student):

    _inherit = 'student'

    def fees(self):
        print "1000 INR"

t = student2()
t.sendsms() 
```

相反，它可以工作，但这可能不是您想要做的。如果没有进一步的解释，我们将无法真正帮助您。

顺便说一句，上面的代码给出：

```
I am student
@@ partner
### student
I am partners 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:46:53.737

```
super(student,self).sendsms() 
```

采用全局名称`student`（在调用时是第二个），采用其父级（即第一个）并调用其`.sendsms()`. 瞧你的递归。

解决方案是重命名您的第二个班级，这样名字就不会被隐藏。

# django - 过滤 Django 查询集

> ID：14230370
> 
> 赞同：0
> 
> 时间：2013-01-09T07:38:01.433
> 
> 标签：django, filter, django-queryset

如果我有这些模型：

```
COLOR_OPTIONS = (
    ('BLA', 'Black'),
    ('WHI', 'White'),
    ('RED', 'Red'),
)

class Stuff(models.Model):
    text = models.CharField(max_length=20)

class Thing(models.Model):
    stuff = models.ForeignKey(Stuff)
    color = models.CharField(max_length=3, choices=COLOR_OPTIONS) 
```

我如何根据不同类型的东西或不同的颜色`.filter()`来过滤不同的东西？`Things`

* * *

如何编写视图以便过滤所有不同的颜色选项和所有不同的东西选项？这就是我的意思，但我不知道如何正确编写函数..

```
def filter(request):
    filter_color = Thing.objects.filter(color=COLOR_OPTIONS)
    filter_stuff = Thing.objects.filter(stuff=???) 
```

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:43:42.697

```
my_things_based_on_stuff = Thing.objects.filter(stuff__text="some text here")

my_things_based_on_colors = Thing.objects.filter(color='BLA') 
```

# c# - 在 promise 风格的任务上可能不会调用 Start。异常来了

> ID：14230372
> 
> 赞同：120
> 
> 时间：2013-01-09T07:38:19.183
> 
> 标签：c#, c#-4.0, .net-4.0

我正在创建一个简单的 wpf 桌面应用程序。UI 在 .cs 文件中只有一个按钮和代码。

```
private void Button_Click_2(object sender, RoutedEventArgs e)
{
    FunctionA();
}

public void FunctionA()
{
    Task.Delay(5000).Start();
    MessageBox.Show("Waiting Complete");
} 
```

但令人惊讶的是，这条线`Task.Delay(5000).Start();`抛出了一个`InvalidOperationException`：

> 在 promise 风格的任务上可能不会调用 Start。

任何人都可以帮助为什么会这样？

* * *

## 回答 #1

> 赞同：193
> 
> 时间：2013-03-01T21:34:12.620

您收到该错误是因为该`Task`课程在将任务交给您之前已经开始了该任务。您只应该`Start`通过调用其构造函数来调用您创建的任务，甚至不应该这样做，除非您有令人信服的理由在创建任务时不启动该任务；如果您希望它立即启动，您应该使用`Task.Run`or`Task.Factory.StartNew`来创建和启动一个新的`Task`.

所以，现在我们知道要摆脱那个讨厌的`Start`. 您将运行您的代码并发现消息框立即显示，而不是 5 秒后，这是怎么回事？

好吧，`Task.Delay`只是给你一个将在 5 秒内完成的任务。它不会停止线程的执行 5 秒。您想要做的是在该任务完成后执行一些代码。这`ContinueWith`就是为了。它允许您在完成给定任务后运行一些代码：

```
public void FunctionA()
{
    Task.Delay(5000)
    .ContinueWith(t => 
    {
        MessageBox.Show("Waiting Complete");
    });
} 
```

这将按预期运行。

我们还可以利用 C# 5.0 的`await`关键字更轻松地添加延续：

```
public async Task FunctionA()
{
    await Task.Delay(5000);
    MessageBox.Show("Waiting Complete");
} 
```

虽然对这里发生的事情的完整解释超出了这个问题的范围，但最终结果是一种行为与前一种方法非常相似的方法；它会在您调用该方法 5 秒后显示一个消息框，但在这两种情况下，该方法本身都会立即返回 [几乎]。也就是说，`await`它非常强大，允许我们编写看似简单直接的方法，但`ContinueWith`直接使用会更难、更混乱。它还极大地简化了错误处理，去掉了很多样板代码。

# java - 在java中重用ResultSet对象

> ID：14230374
> 
> 赞同：3
> 
> 时间：2013-01-09T07:38:20.530
> 
> 标签：java, jdbc, resultset

我正在做一个摇摆项目。其中我使用 jdbc odbc Connection bridge 来访问 SQL 数据库中的数据。我正在使用以下代码

```
 try
  {
     Class.forName("sun.jdbc.odbc.JdbcodbcDriver");
     Connection con=DriverManager.getConnection("Jdbc:Odbc:dsn");
     Statement st=con.createStatement();
     ResultSet rs=st.executeQuery("select * from temp");
     int count c=0;
     while(rs.next())
     {
      c++;
     }

   }
  catch(Exception ex)        
   {
    ex.printStackTrace();
    } 
```

在 while 循环之后的上述代码中，如果我再次使用结果集对象，那么它会在结果集关闭时引发异常。是否有任何其他对象而不是结果集以断开模式从数据库中获取数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T07:41:14.657

结果集不**包含**结果，它是对仍在数据库中（或在驱动程序的缓存中）的结果的一种迭代器。

所以这是完全正常的。

如果您想在断开连接后保留结果列表，只需将它们复制到之前的具体列表中，例如 ArrayList。这意味着您必须在复制时对列进行解释（即使用`getInt`或`getString`或`getBinaryStream`获取内容等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T07:42:32.003

> 是否有任何其他对象而不是结果集以断开模式从数据库中获取数据。

`ResultSet`建立连接后获取数据。并且没有其他对象可以执行此任务。

您应该将数据存储在某个列表（或其他数据结构）中，并在`while`循环中填充该列表`ResultSet`

# c# - 从 Web 服务获取数据时如何显示图像

> ID：14230376
> 
> 赞同：0
> 
> 时间：2013-01-09T07:38:42.990
> 
> 标签：c#, wpf, web-services

当我的 WPF 应用程序从 Web 服务获取数据时，我可以知道如何添加图像吗？由于我的应用程序需要一些时间来获取数据并将其插入数据网格，所以我认为显示图像或通知以通知用户我的程序正在运行是合理的。有什么建议吗？谢谢

用于数据抓取的 C# 代码片段：

```
private void search_Click(object sender, RoutedEventArgs e)
    {
        MyData.WebService myApi = new MyData.WebService();
        var dbs = myApi.GetDealerInfoByID(0); //select data start from the ID:0

        var i = from p in dbs.Product
                select new
                {
                    Name = p.ProductName,
                    Price = p.ProductPrice,                     
                };

        myDataGrid.ItemsSource = i;
    } 
```

# c++ - OpenCV：期望最大化的预测函数的输出

> ID：14230377
> 
> 赞同：5
> 
> 时间：2013-01-09T07:38:49.143
> 
> 标签：c++, opencv, gaussian, image-segmentation, expectation-maximization

**背景：** 我有2组来自图像的颜色像素，一组对应于背景，另一组对应于前景。接下来，我使用 OpenCV 的 EM 为每组训练 2 个高斯混合模型。我的目标是找出随机像素属于前景和背景的概率。因此，我对像素上的每个 EM 使用“预测”函数。

**问题：**

*   我不明白这个函数返回的值。在 OpenCV 的文档中是这样写的：

> 该方法返回一个二元素双精度向量。零元素是样本的似然对数值。第一个元素是给定样本最可能的混合成分的索引。

[http://docs.opencv.org/modules/ml/doc/expectation_maximization.html?highlight=predict#Vec2d%20EM::predict%28InputArray%20sample,%20OutputArray%20probs%29%20const](http://docs.opencv.org/modules/ml/doc/expectation_maximization.html?highlight=predict#Vec2d%20EM::predict%28InputArray%20sample,%20OutputArray%20probs%29%20const)

我不明白“似然对数”是什么意思。在我的结果中，我有时会有负值和值 > 1。是否有人使用相同的函数有这种结果或结果在 0 和 1 之间？我可以从我的结果中得出什么结论？

*   如何获得像素属于整个 GMM 的概率（而不是属于 GMM 的每个集群的概率）？

这是我的代码：

```
Mat mask = imread("mask.tif", 0);
Mat formerImage = imread("ImageFormer.tif");
Mat currentImage = imread("ImageCurrent.tif");

// number of cluster in the GMM 
int nClusters = 5;

int countB=0, countF=0;

Vec3b color;

Vec2d probFg, probBg; // probabilities to belong to the foreground or background from GMMs

//count the number of pixels for each training data
for(int c=0; c<=40;c++) {
    for(int l=0; l<=40;l++) {
        if(mask.at<BYTE>(l, c)==255) {
            countF++;
        } else if(mask.at<BYTE>(l, c)==0) {
            countB++;
        }
    }
}

printf("countB %d countF %d \n", countB, countF);

Mat samplesForeground = Mat(countF,3, CV_64F);

Mat samplesBackground = Mat(countB,3, CV_64F);

// Expectation-Maximisation able to resolve the GMM and to predict the probability for a pixel to belong to the GMM.
EM em_foreground= EM(nClusters);
EM em_background= EM(nClusters);

countB=0;
countF=0;

// fill the training data from the former image depending of the mask
for(int c=0; c<=40;c++) {
    for(int l=0; l<=40;l++) {
        if(mask.at<BYTE>(l, c)==255) {
            color = formerImage.at<Vec3b>(l, c);
            samplesForeground.at<double>(countF,0)=color[0];
            samplesForeground.at<double>(countF,1)=color[1];
            samplesForeground.at<double>(countF,2)=color[2];
            countF++;
        } else if(mask.at<BYTE>(l, c)==0) {
            color = formerImage.at<Vec3b>(l, c);
            samplesBackground.at<double>(countB, 0)=color[0];
            samplesBackground.at<double>(countB, 1)=color[1];
            samplesBackground.at<double>(countB, 2)=color[2];
            countB++;
        }
    }
}

printf("countB %d countF %d \n", countB, countF);
em_foreground.train(samplesForeground);
em_background.train(samplesBackground);

Mat sample(1, 3, CV_64F);

// try every pixel of the current image and get the log likelihood
for(int c=0; c<=40;c++) {
    for(int l=0; l<=40;l++) {
        color = currentImage.at<Vec3b>(l,c);
        sample.at<double>(0)=color[0];
        sample.at<double>(1)=color[1];
        sample.at<double>(2)=color[2];
        probFg=em_foreground.predict(sample);
        probBg=em_background.predict(sample);
        if(probFg[0]>0 || probBg[0]>0)
            printf("probFg[0] %f probBg[0] %f \n", probFg[0], probBg[0]);
    }
} 
```

**编辑**

在@BrianL 解释之后，我现在了解了对数可能性。

**我的问题是预测函数的对数概率有时> 0。**但它应该 <= 0。有没有人遇到过这个问题？

我已经编辑了上面的代码来显示问题。我已经尝试了以下图片的程序：

第一个图像是 ImageCurrent.tif，第二个是 ImageFormer.tif，最后一个是 mask.tif。

![当前图像](../Images/0644b38a527ba7291a631005152970d1.png) ![以前的形象](../Images/24eda65639abe674b433ba909fb03792.png) ![面具](../Images/6be2931b77917cca5c5966a9abc8930c.png)

这可以被认为是 OpenCV 中的错误吗？我应该在 OpenCV 错误跟踪器上开票吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T04:10:41.390

“似然对数”是指概率的对数。因为对于概率*p*，我们期望 0 ≤ *p* ≤ 1，所以我期望值是负数：log( *p* ) ≤ 0。更大的负数意味着更小的概率。

当您处理概率非常小的乘积时，这种形式很有帮助：如果您以正常方式相乘，您很容易出现下溢并失去精度，因为概率变得非常小。但是在对数空间中，乘法变成了加法，这提高了准确性，也可能提高了计算的速度。

该`predict`函数用于对数据点进行分类。如果您想为某个点属于模型中*任何*组件的可能性打分，您可以使用模型参数（请参阅`get`文档）自行计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T04:53:09.243

我注意到您正在执行基于图形的图像分割。

您可能想查看以下博客文章，该文章使用 OpenCV 及其 GMM 类的方式与您执行基于图形切割的图像分割的方式非常相似。代码以 C++ 给出，并附有详细解释。这是链接：[链接](http://www.morethantechnical.com/2010/05/05/bust-out-your-own-graphcut-based-image-segmentation-with-opencv-w-code/)

基本上，我只能说对数概率，不管它是否正确，都不是你要找的。查看上面的链接了解详情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-27T03:49:40.403

据我了解，图像的前景和背景部分有两个单独的 GMM。在前景 GMM 中评估时，测试图像中样本像素“x”的总概率为

```
P_fg(x) = sum_over_j_1_to_k ( Wj_fg * Pj_fg( x ))
where 
k = number of clusters in foreground GMM
x = test sample
Pj_fg(x) = probability that sample x is in j-th  cluster according to the foreground GMM
Wj_fg = weight of the j-th cluster in foreground GMM
also, sum of all weights should be 1 for each GMM. 
```

我们可以对背景 GMM 做类似的计算。

通过查看 opencv 中的 EM 代码，EM 返回的 2 个值的第一部分似乎是对数似然。对于前景 GMM，这是

```
log(P_fg(x_i)) 
```

我实现了您的算法，并且对于测试图像中的每个像素，我比较了两个 GMM-s 中的每一个返回的对数似然，并将像素与具有更高值的 GMM 进行分类。我得到了不错的结果。

在这方面，是的，这个值表示像素属于整个 GMM。

2）在我解决你的问题时，我总是得到所有测试样本像素的所有 GMMS 的对数似然值都低于 0。

# mysql - mySQL 重复事件查询

> ID：14230380
> 
> 赞同：3
> 
> 时间：2013-01-09T07:39:10.640
> 
> 标签：mysql, sql, events, repeat, recurring

有一些解决方案，但我不知道如何为我的表更改它。所以我希望有人能帮助我。

我有下表

```
╔═════╦═════════╦════════════╦════════════╦═══════════╗
║ UID ║  TITLE  ║   BEGIN    ║    END     ║ RECURRING ║
╠═════╬═════════╬════════════╬════════════╬═══════════╣
║   1 ║ event A ║ 1359741600 ║ 1359745200 ║ none      ║
║   1 ║ event B ║ 1359741600 ║          0 ║ daily     ║
║   1 ║ event C ║ 1359741600 ║          0 ║ weekly    ║
║   1 ║ event D ║ 1359741600 ║          0 ║ monthly   ║
║   1 ║ event E ║ 1359741600 ║          0 ║ yearly    ║
╚═════╩═════════╩════════════╩════════════╩═══════════╝ 
```

我现在如何选择从现在开始最多 7 天的每个事件以及未来 7 天内的所有重复事件？

以下我已经尝试过但效果不是很好并且没有完成。

```
SELECT 
  * 
FROM
  `tx_events_domain_model_event` 
WHERE 
  /* none recurring events in the next 7 days */
  (
    recuring = 'none' 
    AND (begin_date + begin_time) >= UNIX_TIMESTAMP(NOW()) 
    AND (end_date + end_time) <= UNIX_TIMESTAMP(DATE_ADD(NOW(), INTERVAL 7 DAY))
  ) 
  OR 
  /* Daily */
  recuring = 'daily' 
  OR 
  /* Weekly */
  (
    recuring = 'weekly' 
    AND DAYOFWEEK(NOW()) - 1 <= DAYOFWEEK(FROM_UNIXTIME(begin_date)) - 1
  ) 
  OR 
  /* Monthly */
  (recuring = 'monthly' 
  AND 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T03:32:16.283

这是我一直在玩的东西（这里是一个带有一些示例数据的[sqlfiddle](http://sqlfiddle.com/#!2/89216/1)）......不是 100% 确定它，但它应该获取最近 7 天的数据。请注意，我使用的是 MySQL`DATETIME`与整数时间戳，但您应该能够轻松地进行转换（为了测试查询，使用字符串日期要容易得多）。

```
SELECT *
  FROM
    (SELECT 
      *, 
      CONCAT(YEAR(NOW()), '-', MONTH(NOW()), '-', DAY(start)) AS monthly,
      CONCAT(YEAR(NOW()), '-', MONTH(start), '-', DAY(start)) AS yearly
      FROM events
    ) tmp
  WHERE
    (
      (recurring = 'none')
      OR (recurring = 'daily')
      OR (recurring = 'weekly')
      OR (
        recurring = 'monthly'
        AND (
          (
            monthly >= NOW()
            AND monthly <= DATE_ADD(NOW(), INTERVAL 7 DAY)
          )
          OR (
            DATE_ADD(monthly, INTERVAL 1 MONTH) >= NOW()
            AND DATE_ADD(monthly, INTERVAL 1 MONTH) <= DATE_ADD(NOW(), INTERVAL 7 DAY)
          )
        )
      )
      OR (
        recurring = 'yearly'
        AND (
          (
            yearly >= NOW()
            AND yearly <= DATE_ADD(NOW(), INTERVAL 7 DAY)
          )
          OR (
            DATE_ADD(yearly, INTERVAL 1 YEAR) >= NOW()
            AND DATE_ADD(yearly, INTERVAL 1 YEAR) <= DATE_ADD(NOW(), INTERVAL 7 DAY)
          )
        )
      )
    )
    AND start <= NOW()
    AND (
      end IS NULL 
      OR end >= DATE_ADD(NOW(), INTERVAL 7 DAY)
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-05T14:44:42.610

这是我用于提醒表的代码。

您可以在函数中传递您的日期，它会查找所选日期是否有事件。**它会给你所有的事件是重复事件或非重复事件。**

```
-- 
-- Table structure for table `reminder`
-- 

CREATE TABLE `reminder` (
  `id` int(11) NOT NULL auto_increment,
  `title` varchar(255) NOT NULL,
  `startdate` datetime NOT NULL,
  `enddate` date NOT NULL,
  `kind` varchar(255) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- 
-- Dumping data for table `reminder`
-- 

INSERT INTO `reminder` (`id`, `title`, `startdate`, `enddate`, `kind`) VALUES 
(1, 'This is reminder', '2015-06-03 19:25:44', '2015-07-21', 'weekly'); 

-- Query data get results for 2015-06-17 from  `reminder` table
SELECT CONCAT_WS(' ','2015-06-17',TIME(startdate)) AS ReminderDateTime, title
                  FROM reminder  
                  WHERE IF(
                                        kind='daily',
                                        ((UNIX_TIMESTAMP('2015-06-17') -UNIX_TIMESTAMP(DATE(startdate))) % (1*24*60*60)=0)  ,
                                        IF(
                                            kind='weekly',
                                            ((UNIX_TIMESTAMP('2015-06-17') -UNIX_TIMESTAMP(DATE(startdate))) % (7*24*60*60)=0)  ,
                                            IF(
                                                kind='monthly',
                                                DAYOFMONTH('2015-06-17')=DAYOFMONTH(startdate),                         
                                                IF(
                                                    kind='quarterly',
                                                    ((UNIX_TIMESTAMP('2015-06-17') -UNIX_TIMESTAMP(DATE(startdate))) % (91*24*60*60)=0) ,
                                                    IF(
                                                        kind='yearly',
                                                        DAYOFYEAR('2015-06-17')=DAYOFYEAR(startdate),   
                                                        IF(
                                                            kind='',
                                                            startdate,
                                                            '0000-00-00 00:00:00'
                                                        )
                                                    )   
                                                )   
                                            )   
                                         )
                                        ) AND DATE(startdate) <='2015-06-17' AND IF(enddate<>'0000-00-00',enddate>='2015-06-17','1') ORDER BY ReminderDateTime ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-17T20:02:28.640

在程序员同事 Aaron Hanson 的帮助下找到了解决方案。问题在于夏令时。这是一个更新的查询...

```
SELECT 
  CONCAT_WS(
    ' ', 
    '2018-07-17', 
    TIME(start_time)
  ) AS ShiftDateTime 
FROM 
  schedule 
WHERE 
  IF(
    repeat_type = 'daily', 
    '2018-07-17', 
    IF(
      repeat_type = 'weekly', 
      DAYOFWEEK('2018-07-17') = DAYOFWEEK(start_date), 
      IF(
        repeat_type = 'monthly', 
        DAYOFMONTH('2018-07-17') = DAYOFMONTH(start_date), 
        IF(
          repeat_type = 'quarterly', 
          (
            (
              MONTH('2018-07-17') - MONTH(
                DATE(start_date)
              )
            ) % 3 = 0
          ), 
          IF(
            repeat_type = 'yearly', 
            DAYOFYEAR('2018-07-17') = DAYOFYEAR(start_date), 
            IF(
              repeat_type = NULL, start_date, '0000-00-00 00:00:00'
            )
          )
        )
      )
    )
  ) 
  AND DATE(start_date) <= '2018-07-17' 
  AND IF(
    repeat_end_date <> '0000-00-00', repeat_end_date >= '2018-07-17', 
    '1'
  ) 
ORDER BY 
  ShiftDateTime ASC 
```

# facebook - 发送 facebook 通知，然后使用图形 api 将其删除

> ID：14230382
> 
> 赞同：1
> 
> 时间：2013-01-09T07:39:20.633
> 
> 标签：facebook, facebook-graph-api, notifications, facebook-rest-api

我有一个 facebook 应用程序和 app_access_token 。

我正在使用图形 api 向某些用户发送通知，它给了我成功等于 true 作为响应。现在，我想删除我刚刚发送的通知。这怎么可能。请帮我。

谢谢，阿米特乔杜里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T15:54:25.783

阿米特，您可以尝试使用 FB 通知 id 的“删除”方法（代替“发布”方法，请参阅[https://developers.facebook.com/docs/reference/javascript/FB.api/](https://developers.facebook.com/docs/reference/javascript/FB.api/) ）。 api。

但是，您发布通知的程序是什么——请提供明确的分步指导？这仍然是一个悬而未决的问题。具体来说，您是如何获得 app_access_token 的？是否有任何包含不同类型令牌/权限的列表和文档的参考资料？

# javascript - 从指令内填充文本框 ng 属性

> ID：14230386
> 
> 赞同：0
> 
> 时间：2013-01-09T07:39:40.947
> 
> 标签：javascript, coffeescript, angularjs

JSFiddle 在这里：

[http://jsfiddle.net/DfLdF/](http://jsfiddle.net/DfLdF/)

问题描述如下，我有一个控制器包装了一个包含一些逻辑的表单，并且不能在指令哈希中定义为控制器：

我需要能够从指令中动态填充字段，如下所示：

```
 App.Directive.SomeAwesomeDirective = ->
     restrict: 'C'

     link: (scope, element, attrs) ->
         someValue = scope.someValue
         field = element.find(".some-class")
         scope.fieldValue = someValue
         field.ngModel = "scope.fieldValue"
         field.ngClass = "scope.someAwesomeClass"

         monitorFields = (newValue, oldValue) ->
              console.log "we are here"
              console.debug newValue
              console.debug oldValue
              scope.addValue(newValue)

         scope.$watch "scope.fieldValue", monitorFields, true 
```

我需要满足以下条件：

1) 当 textfields 值改变时，我希望 scope.fieldValue 被更新。2) 发生这种情况后，我希望使用新值调用 addValue 方法（在包装控制器上定义）以进行验证。3) addValue 方法应该设置 someAwesomeClass 范围变量，并且输入字段类应该更新。4) 要应用的 ngClasses 是 ng-valid/ng-invalid。表单验证应该与这些类对应地正确运行

从我的 jsfiddle 中可以看出，这些事情目前都没有发生，我不确定为什么......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:32:04.537

您可以通过定义一个指令来修复它，该指令`someClass`将在其父级上执行该函数。该`form`标签有一个额外的属性`execute`，它保存要执行的函数。该`someClass`指令将搜索指令的控制器`dir`（因此需要：'^dir'）并执行它。

另一种解决方案是删除`dir`指令并在指令上定义`execute`属性`someClass`（例如，当每个输入字段应该触发不同的功能时）。

```
<form class="dir" execute="someFunction"> 
```

**指令：**

```
app.directive('dir', function () {
  return {
    restrict: 'C',
    scope: {
      execute: '='
    },
    controller: function ($scope) {
      this.execute = $scope.execute;
    }
  };
});

app.directive('someClass', function () {
  return {
    restrict: 'C',
    require: '^dir',
    replace: true,
    template: '<INPUT name="foo" id="bar" type="text" ng-model="fieldValue" >',
    scope: {
      fieldValue: '@'
    },
    link: function (scope, elm, attrs, ctrl) {
      var monitorField = function (newValue, oldValue) {
        if (newValue) {
           ctrl.execute(newValue);
        }
      };
      scope.$watch("fieldValue", monitorField, true);
    }
  };
}); 
```

请参阅[jsFiddle](http://jsfiddle.net/asgoth/wayzL/)。

# php - 发送带有标头选项的 CURL 请求以在 drupal 7 中获取访问令牌

> ID：14230387
> 
> 赞同：0
> 
> 时间：2013-01-09T07:39:40.493
> 
> 标签：php, drupal, curl, drupal-7, libcurl

我正在尝试通过 curl 发送一些密钥以获取来自 stripe.com 的响应，但没有得到任何响应。我正在使用 drupal 7。是否有任何其他方式通过 curl 在 drupal 7 中发送请求或没有我尝试过两种类型curl 将信息发送到条带，它是-

1=

> curl --header "X-MyHeader: 123" [https://connect.stripe.com/oauth/token](https://connect.stripe.com/oauth/token) -H 授权：承载 pk_test_1kWTYDiLtPzkgR32GyKtVmtu -d code=ac_14Afk3MMwXCdQD12OlsyRpXEgWupv9Il -d
> grant_type=authorization_code

2=

```
$request = array('-H Authorization'=>'pk_test_1kWTYDiLtPzkgR32GyKtVmtu','');
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_URL, 'https://connect.stripe.com/oauth/token');
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
$res=curl_exec($ch);
curl_close();
print_r($response); 
```

?> 请让我清楚我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T10:02:29.533

请更改`print_r($response);`为`print_r($res);`

# c++ - 为什么要为每个 .cpp 文件创建 .o 文件

> ID：14230390
> 
> 赞同：3
> 
> 时间：2013-01-09T07:40:03.800
> 
> 标签：c++, gcc

我是 Linux 环境的新手，我刚开始使用 gcc。我们有一个有 7 到 8 个 cpp 文件的小项目。当我尝试编译我的文件时，我想知道为什么每个 .cpp 文件都有 .o 文件。只有一个主线。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T07:46:40.197

这就是编译的工作方式。每个翻译单元都变成目标代码（.o 文件），然后目标文件链接在一起并与其他库链接到最终的可执行文件中。通常构建系统会在某处隐藏目标文件，但您可能正在使用一个非常简单的构建系统或脚本，它不会打扰。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T07:44:55.677

.o 是在每个 cpp 编译期间创建的目标文件。

了解更多信息[为什么首先编译到目标文件？](https://stackoverflow.com/questions/5283841/why-compile-to-an-object-file-first)

# payment-gateway - Braintree 中透明重定向的替代方案

> ID：14230392
> 
> 赞同：0
> 
> 时间：2013-01-09T07:40:06.607
> 
> 标签：payment-gateway, payment, braintree

除了透明重定向之外，有没有一种方法可以重定向到 Braintree 并由他们负责付款？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:28:46.097

[我在布伦特里工作]

虽然 Braintree 不提供任何托管页面解决方案，但他们的合作伙伴提供。根据您的计费模式，您可以使用[Chargify 之](http://chargify.com/)类的工具进行定期计费，或者使用[Shopify](http://www.shopify.com/)进行一次性购买。

Braintree 可以轻松插入这些服务，以帮助为其开箱即用的解决方案提供动力。

# windows-phone-7 - 将 DateTime 转换为另一个时区

> ID：14230393
> 
> 赞同：1
> 
> 时间：2013-01-09T07:40:06.793
> 
> 标签：windows-phone-7, windows-phone-8

如何将 a`DateTime`从返回的本地时区转换为`DateTime.Now`Utc 以外的另一个时区。在桌面上我们有`TimeZoneInfo.ConvertTimeBySystemTimeZoneId()`，但在 windows phone 上不可用！

这个java片段大致显示了我想要做什么

```
SimpleDateFormat format = new SimpleDateFormat("EEE, dd MMM yyyy HH:mm:ss z", Locale.US); 
TimeZone tz = TimeZone.getDefault();
format.setTimeZone(TimeZone.getTimeZone("GMT"));
str = format.format(new Date()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T08:46:40.123

使用系统库无法做到这一点，因为`TimeZoneInfo`除了本地和 utc 之外无法创建对象。他们还[封锁](http://msdn.microsoft.com/en-us/library/88c54tsw%28v=vs.71%29.aspx)了班级。

但是，您可以使用这个简单的库来启用到非本地时区的转换。 [https://nuget.org/packages/WinRTTimeZones](https://nuget.org/packages/WinRTTimeZones)

像这样使用它：

```
using TimeZones;    

public void ConvertTime()
{
    // Get the time zone we want

    var tz = TimeZoneService.FindSystemTimeZoneById("Central Standard Time");
    var dt = new DateTime(1990, 7, 1, 12, 0, 0, DateTimeKind.Utc);

    // This time will be central time
    var local = tz.ConvertTime(dt);
} 
```

转换后，根据`DateTime`需要对其进行格式化是一项简单的练习。我建议以本地格式（而不是本地时区）格式化日期，以方便用户理解日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:58:06.547

像这样使用它：

```
public String getNationTime(String Zone)
    {
        DateTime todayutc = DateTime.UtcNow;
        string todaydate = todayutc.ToShortDateString();
        string todaytime = todayutc.TimeOfDay.ToString().Split('.')[0];
        Zone = Zone.Replace("GMT", "");
        if (Zone.Length == 0)
            return todaytime;

        int zoneHour = int.Parse(Zone.Split(':')[0]);
        int zoneMin = int.Parse(Zone.Split(':')[1]);

        TimeSpan diff = new TimeSpan(zoneHour, zoneMin, 00);
        todayutc = todayutc.Add(diff);

        return todayutc.TimeOfDay.ToString().Split('.')[0];
    } 
```

# http - .ts 文件总是被识别为 text/vnd.trolltech.linguist 而永远不会被识别为 video/mp2t

> ID：14230396
> 
> 赞同：1
> 
> 时间：2013-01-09T07:40:19.853
> 
> 标签：http, video-streaming, mime-types

我正在从 Red Hat Enterprise Linux Server 6.3 版流式传输一些 HTTP Live Stream。在客户端，当我进行 Wireshark 跟踪时，我总是将视频文件 ts 作为 text/vnd.trolltech.linguist 获取，而不是作为 video/mp2t。

如果我使用 Windows IIS 服务器流式传输相同的内容，我会得到视频/mp2t。

如果需要更改 Apache MIME 配置以便它流式传输正确的数据类型，我不是吗？

任何人都可以建议一些快速修复相同的东西吗？

我发现已经针对这个问题为 Ubuntu 发布了一些补丁，但我没有看到任何关于 RHEL 的补丁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T15:30:18.050

[此](https://bugs.launchpad.net/ubuntu/+source/shared-mime-info/+bug/502642)错误报告可能会对您有所帮助。似乎 .ts 文件扩展名具有旧含义...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-09T16:08:32.703

对于到达此页面的其他人，在放置“text/vnd.trolltech.linguist”后首先在 Google 引擎和 StackOverflow 上固定（在我的情况下，因为 Facebook 在尝试上传时说“不允许使用 text/vnd.trolltech.linguist” TS 文件），您可以尝试将扩展名文件更改为 ".MTS" 或 ".M2TS" ，遵循 Wil Macaulay 在论坛上发布的建议

> .MTS 和 .M2TS 文件扩展名应解析为 mime 类型视频/MP2T

那对我有用。希望这可以帮助 ：-）

# ios - 优化 UIScrollView

> ID：14230401
> 
> 赞同：0
> 
> 时间：2013-01-09T07:40:48.763
> 
> 标签：ios, uiscrollview

人们

我的项目有一个社交媒体流，它加载分页对象并拉动刷新。我正在使用扩展 UIScrollView 的 MGScrollView，我想知道如何优化它。问题是，在将数百个项目加载到流中之后，它会变得非常占用内存。

由于我所有内容的大小都不同，因此实际上不可能使用页面模式。出现的项目的复杂性和子视图的数量可能会有所不同。除此之外，由于拉动刷新功能，项目可以弹出到流的顶部，从而在屏幕上/离屏上放置和添加项目非常棘手。

有谁知道我可以利用任何甜蜜的项目来帮助我做到这一点？

从应用程序本身转储的流屏幕附加文件：

![截屏](../Images/111e17dea67f19518d395c7b48ad1548.png)

![在此处输入图像描述](../Images/fba87c2b5e7ab21fe0476074ebbd54ef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:56:04.087

我认为您应该尝试向 UITableView 添加功能（动画和拉动刷新），而不是优化滚动视图。TableView 是滚动视图内存问题的解决方案。但是当然这会让你使用更多的cpu。

我认为，如果您使用表格视图，您的单元格的高度将是动态的。出于性能方面的考虑，您可以查看这篇关于 twitter 的 iOS 应用程序的文章。

[ehttp://engineering.twitter.com/2012/02/simple-strategies-for-smooth-animation.html](http://engineering.twitter.com/2012/02/simple-strategies-for-smooth-animation.html)

# php - 如何从查看源代码中隐藏 Wordpress 详细信息

> ID：14230411
> 
> 赞同：4
> 
> 时间：2013-01-09T07:41:39.473
> 
> 标签：php, wordpress

我有一个 wordpress 网站，但是当我按 Ctrl+UI 时可以看到关于我的网站的所有网站信息（主题、wp 内容等）。但我看到了一个网站[http://www.indiavisiontv.com/](http://www.indiavisiontv.com/)。当我按下 Ctrl+U 时，我们会得到一个源代码页面，它不会显示太多内容。他们是怎么做到的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T07:46:05.610

您可以通过几种方式隐藏 WordPress。 [http://www.graemeboy.com/how-to-hide-that-you-use-wordpress](http://www.graemeboy.com/how-to-hide-that-you-use-wordpress)

删除生成器标签是一些安全插件所做的一项重要工作，以帮助随机搜索过时的安装以进行黑客攻击。您还可以重命名放弃 WP 的目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-10T17:52:38.623

如果您是 php 和 mod_rewrite 的新手，我建议您查看我的回复部分。或者，如果您热衷于自己尝试，您可以使用类似这样的东西来隐藏 wp-content/plugins 路径结构：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^modules/(.*) /wp-content/plugins/$1 [L,QSA]
</IfModule> 
```

这将更改 /modules 的路径。应用类似于其他结构的东西，您可能需要一些高级重写，请参阅[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

如果更喜欢开箱即用的东西，有一些有趣的插件，一些商业的，在 WordPress 存储库中也是免费的，我建议尝试[WP Hide & Security Enhancer](https://wordpress.org/plugins/wp-hide-security-enhancer/)。这包括很多东西，并有助于改变几乎所有东西，使您的 WordPress 无法识别。以下是代码的一些功能：

*   自定义管理员网址
*   阻止默认管理员网址
*   阻止任何直接文件夹访问以完全隐藏结构
*   自定义 wp-login.php 文件名
*   阻止默认 wp-login.php
*   阻止默认 wp-signup.php
*   可调整的主题网址
*   新的儿童主题网址
*   更改主题样式文件名
*   自定义 wp-include
*   阻止默认 wp-include 路径
*   阻止默认 wp 内容
*   自定义插件网址
*   阻止默认插件路径
*   新的上传网址
*   阻止默认上传网址
*   删除 wordpress 版本
*   元生成器块
*   禁用表情符号和所需的 javascript 代码
*   删除 wlwmanifest 元
*   删除 rsd_link 元
*   删除 wpemoji

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-13T10:09:46.013

您提到的网站（indiavision）正在使用 w3 总缓存来缩小 css 和 js，因此您看不到典型的源（尽管我仍然能够在源中找到“wp-content”）。

您可以使用[Hide my wp](http://wpwave.com/)完全隐藏您的 wordpress 实例。它包括以下能力：

1.  能够隐藏[http://yoursite.com/wp-login.php](http://yoursite.com/wp-login.php)页面和[http://yoursite.com/wp-admin/](http://yoursite.com/wp-admin/)区域。
2.  能够从标题中删除自动生成的提要。
3.  能够清理wordpress添加的自动类（个人不推荐）
4.  能够禁止直接访问 php 文件（wp-admin 中的文件除外）
5.  能够更改分页网址。
6.  能够禁用档案。
7.  能够完全禁用对分类、评论和附件的查询。

参考：[http ://howtomakewebsite.ws/wordpress-plugins/how-to-hide-wordpress/731/](http://howtomakewebsite.ws/wordpress-plugins/how-to-hide-wordpress/731/)

# ios - 在字符串iOS上用逗号分隔数字

> ID：14230413
> 
> 赞同：8
> 
> 时间：2013-01-09T07:41:58.817
> 
> 标签：ios, objective-c

我有一个 NSInteger（比如值为 60000），但是当我将它转换为字符串时，我想得到“60,000”而不是“60000”。有什么方法可以做到吗？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-09T07:46:14.457

使用数字格式化程序：

```
NSNumberFormatter *fmt = [[NSNumberFormatter alloc] init];
[fmt setNumberStyle:NSNumberFormatterDecimalStyle]; // to get commas (or locale equivalent)
[fmt setMaximumFractionDigits:0]; // to avoid any decimal

NSInteger value = 60000;

NSString *result = [fmt stringFromNumber:@(value)]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T07:48:09.617

您可以使用数字格式化程序：

```
NSNumberFormatter* numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle: NSNumberFormatterDecimalStyle];
NSString *numberString = [numberFormatter stringFromNumber: [NSNumber numberWithInteger: i]]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T07:46:50.043

试试这个，

```
NSString *numString = [NSString stringWithFormat:@"%d,%d",num/1000,num%1000]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-09T08:06:29.210

用于将`NSNumberFormatter`数字数据格式化为本地化的字符串表示形式。

```
int aNum = 60000;
NSString *display = [NSNumberFormatter localizedStringFromNumber:@(aNum)
                                                     numberStyle:NSNumberFormatterCurrencyStyle]; 
```

这样做，您将获得“$60,000.00”

之后，您可以通过执行此操作删除 $ 和 '.'（十进制）的符号。

```
 NSString *Str = [display stringByReplacingOccurrencesOfString:@"$" withString:@""];

 NSString *Str1 = [Str stringByReplacingOccurrencesOfString:@"." withString:@""];

NSString *newString = [Str1 substringToIndex:[Str1 length]-1];

NSString *newString1 = [newString substringToIndex:[newString length]-1]; 
```

'newString1' 将为您提供所需的结果。

# c# - c#：为属性设置非常量值的解决方法？

> ID：14230414
> 
> 赞同：1
> 
> 时间：2013-01-09T07:42:00.940
> 
> 标签：c#, attributes

假设我有一个可以设置为 System.Object 的属性说：

```
[AttributeUsage(AttributeTargets.Property)]
class MyAttrAttribute : Attribute {
  public object ThisOne { get; set; }
} 
```

我想得到相同的结果（不编译）：

```
class AttrTarget {
  [(MyAttr ThisOne = new MyClass())]
  public MyClass Thing { get; set; }
} 
```

有没有一种方法可以在不使用反射的情况下达到相同的结果？

问候，贾科莫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:44:52.037

属性根本不适合这种情况。使用反射*通常*不会真正解决问题，因为不能保证分配的值将在调用检查属性之间保留。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:04:18.113

是的，这就是属性的创建方式——它们使用编译时常量作为参数。但是对于在此类属性构造函数中执行的代码没有限制，因此解决方法是继承表单属性：

```
[AttributeUsage(AttributeTargets.Property)]
class MyClassMyAttrAttribute:MyAttrAttribute 
{
    MyClassMyAttrAttribute()
    {
        ThisOne = new MyClass();
    }
} 
```

并使用那个：

```
 [MyClassMyAttr]
 public MyClass Thing { get; set; } 
```

`MyAttrAttribute`如果你要求，你会得到polimorfizm 的实例`MyClassMyAttrAttribute`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T08:07:39.473

例如，该[`DefaultValue`](http://msdn.microsoft.com/en-us/library/2cws2s9d.aspx)属性有一个[`Type, String`构造函数](http://msdn.microsoft.com/en-us/library/tx59291k.aspx)。这可用于创建实例，例如用于所需的时间跨度或所需的颜色：

```
[DefaultValue(typeof(TimeSpan), "00:00:03")]
public TimeSpan Timeout {get; set;}

[DefaultValue(typeof(Color), "Red")]
public Color HighlightColor {get; set;} 
```

因此，也许这种创建属性值可以帮助您了解如何解决问题。

# c# - 为什么 CreateWindowEx() 函数在 C# 中总是返回 0？

> ID：14230416
> 
> 赞同：1
> 
> 时间：2013-01-09T07:42:03.160
> 
> 标签：c#, winapi, activex

我正在尝试在 C#**中实现 Windows 消息传递，以便将 HTML 页面与常规 exe 进行通信**。我需要做的是创建一个具有特定类名和窗口名的新窗口，以便其他进程可以将 Windows 消息发送到我的 Activex 应用程序。

```
[DllImport("user32.dll", SetLastError = true)]
        static extern IntPtr CreateWindowEx(
           WindowStylesEx dwExStyle,
           string lpClassName,
           string lpWindowName,
           WindowStyles dwStyle,
           int x,
           int y,
           int nWidth,
           int nHeight,
           IntPtr hWndParent,
           IntPtr hMenu,
           IntPtr hInstance,
           IntPtr lpParam);

            IntPtr temp = CreateWindowEx(0, "privateclassname", "privatewindowname",
                WindowStyles.WS_CHILD | WindowStyles.WS_VISIBLE, 0, 0, 1, 1,
                IntPtr.Zero, IntPtr.Zero, IntPtr.Zero, IntPtr.Zero); 
```

这是我一直在尝试的，但 temp 总是得到 0 而不是正确的窗口句柄。这段代码有什么问题？我怀疑*hWndParent*参数。A 给它 0 因为我不知道父的句柄，或者它甚至存在。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:50:52.810

您正在为窗口样式标志传递 WS_CHILD，但您没有传递父窗口句柄（您正在传递 0/NULL）。尝试删除 WS_CHILD 样式。

另外，请参阅我关于上面调用 RegisterClass 的评论（如果适用）。

# node.js - 在 node.js 项目中从前端隐藏 parse.initialize

> ID：14230430
> 
> 赞同：1
> 
> 时间：2013-01-09T07:43:05.783
> 
> 标签：node.js, parse-platform

我正在用 node.js 开发一个网站，我正在使用 Parse.com 来处理用户注册和 Facebook 用户。要使用 Parse 处理 Facebook 登录，我必须使用以下代码行：

```
Parse.initialize(APP_ID, KEY); 
```

任何人都可以通过查看网站的源代码来访问它。所以我的问题是：如果有人可以访问这些信息，他可以访问我存储在 Parse 中的数据吗？他只需要创建一些简单的查询，不是吗？我已经在服务器端进行了初始化，所以有没有办法告诉模板（在我的例子中是玉）Parse 已经通过传递某种参数进行了初始化？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:00:45.210

如果您在应用程序中正确设置了 ACL 和类权限，则无需担心分发 JavaScript 密钥。有关更多信息，请参阅此页面： [https ://www.parse.com/questions/javascript-sdk-security](https://www.parse.com/questions/javascript-sdk-security)

# sql-server-2008 - 获取存储过程中的总值

> ID：14230431
> 
> 赞同：0
> 
> 时间：2013-01-09T07:43:07.347
> 
> 标签：sql-server-2008

在执行这个查询时，我总是只得到“0”的特许权结果，我总共得到了 20 万个客户数据，但是对于所有客户，我只得到了“0”的特许权值，我在这些查询中犯了什么错误？

-- 4\. 特许权和其他预购

```
if (select count(*) FROM tbl_OrderFoodLog where OrderLog_ID in
    (select OrderLog_ID from  #MemberOrderLog where Member_MailId=@EmailId))>0

if (select count(*) from  #CustTrans where  OrderLog_IsFoodOrder='Y')>0
begin
    select  @Concession=(select SUM( FoodLog_Total) FROM tbl_OrderFoodLog where OrderLog_ID --in ( select OrderLog_ID from  #MemberOrderLog where Member_MailId=@EmailId))/
--(select -COUNT(*) from  #MemberOrderLog where Member_MailId=@EmailId) 
    select @FoodAmount=cast(SUM( FoodLog_Total) as float) FROM tbl_OrderFoodLog where OrderLog_ID in ( select OrderLog_ID from  #CustTrans where  OrderLog_IsFoodOrder='Y')
    select  @Concession=(@FoodAmount)/@Frequency
            end
        else
            begin
                select @Concession=0.00
            end 
```

提前致谢

# vba - 使用excel VBA将访问数据库从一个文件夹复制到另一个文件夹时出错

> ID：14230432
> 
> 赞同：0
> 
> 时间：2013-01-09T07:43:10.663
> 
> 标签：vba, ms-access, excel

嘿，我无法使用 excel vba 将访问数据库从一个文件夹复制到另一个文件夹。我没有收到任何错误...但是仍然没有文件被复制...相反，我得到了一个名为 '873ED000' 的 0 字节的东西。可能是什么原因？。请帮帮我。这也是最好的复制方法吗？？我的工具需要更快，并且数据库很大。

```
FileCopy "E:\Test Folder\Feature_Planning_Data.accdb", "" & ThisWorkbook.Path &       "Feature_Planning_Data.accdb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:16:29.993

试试这个（我假设您运行代码的 Excel 文件已保存）

```
FileCopy "E:\Test Folder\Feature_Planning_Data.accdb", _
ThisWorkbook.Path & "\" & "Feature_Planning_Data.accdb" 
```

# javascript - 如何使用javascript从孩子的孩子访问父母的控件？

> ID：14230436
> 
> 赞同：0
> 
> 时间：2013-01-09T07:43:24.290
> 
> 标签：javascript, parent-child

我想从弹出窗口的子窗口访问父窗口的控件，例如：

*   从`Window1`,`Window2`打开
*   从`Window2`,`Window3`打开
*   从`Window3`,`Window2`打开

现在我需要从 Window2 访问 Window1 的控件，以防从 Window3 打开 Window2，我该怎么做？

我尝试使用`window.opener.getElementById()`，但`window.opener.opener.getElementById()`我在这里很困惑！

**编辑：**

**Window1 中打开 Window2 的代码**：

```
window.open('window2'); 
```

**Window2 中打开 Window3 的代码**：

```
window.location.href = 'Window3'; 
```

**在 Window3 中打开 Window2 的代码：**

```
window.open('window2'); 
```

![在此处输入图像描述](../Images/9cbca65bd89e3bd93a9275281bd61afa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:12:56.947

由于您再次使用窗口，**因此原始开启器值丢失**

您必须使用 window.name 来识别窗口

```
window3 > window.open(url, "window2",.....);
window1 > window.open(url, "window2",.....); 
```

您可以使用命名/重命名窗口

```
window.name = "window3"; 
```

你也可以用这个

```
function getOpenerWindowByName(name)
{
     var w = window;
     while(w = w.opener) if(w.name === name) return w;
     return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:58:07.920

`window.opener`您可以通过链向后扫描：

```
function getBaseOpener(win){
  var opener;
  do {
    /// check to see if our storage property has been set, if so use it
    /// this gets around the problem that the window.opener chain may have
    /// been broken.
    if ( win.baseOpener ) {
      opener = win.baseOpener;
      break;
    }
    /// for each window.opener we find scan backwards until we find a 
    /// window that has no window.opener. This should be our main window.
  } while( (opener = win.opener) && (win = opener) );
  /// return the result and store it for next time, this will prevent
  /// problems if any of our openers are ever closed.
  return (win.baseOpener = opener);
} 
```

上面应该总是返回基本打开器，只要它在每个新打开的窗口上执行一次，就在那个窗口被创建之后（并且整个窗口链在那个时候仍然存在）。

显然，如果基本窗口曾经关闭过，您就会遇到问题；）

### 更新

抱歉，我认为以上内容很清楚，我想这是因为您已经处理了 Windows 之间的大量相互通信——但如果不是，则不是:) 无论如何，我添加了注释来解释代码并添加了使用信息以使事情更清晰.

放置以下内容，以便将其加载到将要打开的每个窗口中。

```
<script>
  function getBaseOpener(win){
    var opener;
    do {
      if ( win.baseOpener ) {
        opener = win.baseOpener;
        break;
      }
    } while( (opener = win.opener) && (win = opener) );
    return (win.baseOpener = opener);
  }
  /// this first execution is important, it creates the baseOpener
  /// property that will keep our link to the main window even
  /// if our parents have been closed and reopened later on.
  var mainWindow = getBaseOpener(window);
</script> 
```

然后，如果您需要获取基本窗口，请在代码中的任何位置使用以下命令：

```
mainWindow 
```

或再次运行 getBaseOpener：

```
getBaseOpener(window) 
```

这应该始终返回基本/主窗口（窗口 1） - 除非从基本窗口本身执行......它将返回`undefined`。

如果你想使用`getElementById`，你需要像这样访问文档：

```
mainWindow.document.getElementById('element_id'); 
```

# c# - 如何从 RIA 服务传递具有类型异常属性的 DTO

> ID：14230437
> 
> 赞同：0
> 
> 时间：2013-01-09T07:43:28.417
> 
> 标签：c#, wcf, ria

我有一个如下的 DTO -

```
[Serializable()]
Public Class DTO
{
Public Exception ex {get;set;}
} 
```

当我从 RIA 服务传递 DTO 类型的对象时，在客户端我看不到属性 ex。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:06:19.630

作为旁注，我认为异常不应直接在客户端/服务器之间发送。相反，我建议在适当的位置捕获它们并将异常信息重新格式化为更通用的格式，然后再将其发送到接收方。

至于您的实际问题，您可能遇到了 [Serializable] 功能的限制。在 MSDN 文章[Windows Communication Foundation 中的序列化中](http://msdn.microsoft.com/en-us/magazine/cc163569.aspx)它说（我强调）：

> [Serializable] 的默认映射与 XmlSerializer 使用的映射不同。在这里，所有字段都包含在映射中，无论是公共的还是私有的，并且**从不包含属性**。

您可以实现自己的支持序列化的自定义错误类。

请参阅 SO 线程[How to serialize an Exception object in C#?](https://stackoverflow.com/questions/486460/how-to-serialize-an-exception-object-in-c) 例如。

**[编辑]**

如果这太过分了，作为一个快速的胜利，你可以尝试将类定义更改为：

```
[DataContract]
public Class DTO
{
    [DataMember]
    public Exception ex {get;set;}
} 
```

# html - 是否有任何浏览器应用程序可以将 webapp 复制到 iPad 并在诸如 phonegap 之类的嵌入式浏览器中查看它们

> ID：14230439
> 
> 赞同：0
> 
> 时间：2013-01-09T07:43:38.807
> 
> 标签：html, ipad, cordova, web-applications, ios-standalone-mode

我知道我可以使用 phonegap 为 Apple 应用程序构建 webapp，但如果我想在 iPad 上使用它，我必须成为 Apple Developer（99 美元或 299 美元/年）。但我只想小规模使用它。

所以我想知道是否有任何浏览器应用程序可以将所有webapp的文件复制到iPad的文件夹中，并在像phonegap这样的嵌入式浏览器中查看它们？我知道我可以将 webapp 添加到主屏幕并像标准应用程序一样与它们进行交互，但我希望它离线，因为 webapp 是 2GB 并且不需要互联网。

浏览器应用应该是全屏的，没有状态栏，没有 Bonuce 效果，并且自动加载 index.html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:18:08.217

如果您希望您的应用程序处于脱机状态，您有两种选择：

*   您越狱了要在其中部署应用程序的手机；
*   您向 Apple 支付开发者证书，该证书将允许您在自己的设备上进行部署，并通过 AppStore 提交以部署到其他用户设备。

或者，如果您的网页是静态内容，您可以考虑使用 iBook Author 将它们打包为电子书并使用 iTunes 将其加载到您的设备中。不过，这可能不适用于 2GB 的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:58:49.113

是的，您可以使用元标记`apple-mobile-web-app-capable`和 HTML5 应用程序缓存来执行此操作。如您所见，您可以将应用程序添加到主屏幕。使用这种技术，应用程序也将离线和全屏运行。

### 将此添加到您的 HTML 中`<head>`：

```
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" /> 
```

### 设置缓存：

添加`manifest="cache.manifest"`到`<html>`. `cache.manifest`是您将用于定义缓存内容的文件的名称。它可以命名任何东西，但我实际上叫 mine `cache.manifest`。

```
<html lang="en" manifest="cache.manifest"> 
```

然后确保您的 Web 服务器的 MIME 类型`.manifest`设置为：

> 文本/缓存清单

然后创建一个名为 的文件`cache.manifest`，将其放在您的应用程序根目录中。在该`CACHE`部分下，放置您要缓存的文件（在您的情况下，所有文件）。您也可以`*`用来表示“所有文件”。

每次推送版本时，**请更改缓存清单中的版本号**。文件中的任何更改都将起作用，但版本号是一个完美的机制。

```
CACHE MANIFEST
#ver 1.0.0

CACHE:
app.html
app.css
app.js 
```

然后把它放在你的`onload`或同等的脚本的顶部。

```
function updateVersion( event ) {

    window.applicationCache.removeEventListener( 'updateready', updateVersion, false );

    if ( window.applicationCache.status == window.applicationCache.UPDATEREADY ) {
        //perhaps notify user here
        window.applicationCache.swapCache();
        window.location.reload();
    };

};

if ( window.applicationCache ) { 
    window.applicationCache.addEventListener( 'updateready', updateVersion, false ); 
}; 
```

# ruby - 仅使用 rspec 时，sqlite3/data_mapper 始终将时间保存为 00:00:00

> ID：14230441
> 
> 赞同：0
> 
> 时间：2013-01-09T07:43:42.290
> 
> 标签：ruby, datetime, sqlite, rspec2, sqlite3-ruby

我有一个特殊的问题，涉及使用 data_mapper 和 sqlite3 和 rspec 节省时间

如果我运行下面的规范，我会收到此失败报告

```
 # expected: 2013-01-04 07:30:00 +1100
    # got: 2013-01-04 00:00:00 +1100 
```

如果我尝试在 irb 中手动保存文件，我会得到

```
 # irb(main):003:0> Sleep.create(:id => 1, :wake_time => Time.new(2013, 01, 04, 07, 30, 00))
    # => #<Sleep @id=1 @wake_time=2013-01-04 07:30:00 +1100> 
```

总之，如果我运行接受字符串的 rspec 测试，将其分解并将其插入到新的 Time 对象中，则 Time 部分会错误地保存为 00:00:00

我还可以确认，在测试运行后，如果我检查数据库中已测试的记录，时间被错误地保存为 00:00:00（以防你怀疑 rspec 的 comaprison 或数据库检索被关 ：） ）

我很想弄清楚这件事——这真的让我很沮丧。特别是考虑到我并不真正关心日期（但我想解决这个问题，因为它现在激起了我的兴趣；））

此外，如果有更好的方法来实现节省数据库的时间，我愿意接受建议。谢谢！

life_dm.rb

```
require "rubygems"
require "json"
require "sqlite3"
require "data_mapper"
require "bigdecimal"

DataMapper::setup(:default, "sqlite3://#{Dir.pwd}../spec/resources/test.db")

class Sleep

    include DataMapper::Resource
    property :id, Integer, :key => true #easier to get methods when key is id vs week
    property :wake_time, Time

end

DataMapper.finalize.auto_migrate! 
```

睡眠.rb

```
def update_sleep_data (id,wake_time)

    #I have also tried saving the time as an sql date/time string
    #i.e :wake_time => "2013-01-04 #{wake_time[0..1]}:#{wake_time[2..3]}"
    #but get the same result with rspec getting 
    Sleep.create(:id => id, :wake_time => Time.new(2013,01,04,wake_time[0..1].to_i,wake_time[2..3].to_i))

end 
```

sleep_spec.rb

```
require 'data_mapper'
require_relative '../../data/life_dm'
require_relative '../../methods/sleep'

describe "sleep table" do

    it "saves info about sleep to the db" do

        @id = 1
        @wake_time = "0730"
        update_sleep_data(@id, @wake_time)

        sleep_1 = Sleep.get 1

        sleep_1[:id].should eql 1
        sleep_1[:wake_time].should eql Time.new(2013,01,04,07,30,00)

    end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:09:42.657

看起来`Time::new`不喜欢你的琴弦。而是传入整数，这似乎适用于其他参数。

在`sleep.rb`使用中`wake_time[0..1].to_i`和`wake_time[2..3].to_i`。

# android - 设置联系人自定义铃声，如何设置？

> ID：14230444
> 
> 赞同：5
> 
> 时间：2013-01-09T07:44:02.763
> 
> 标签：android, mp3, contacts, ogg, ringtone

我知道如何更改手机铃声，也知道如何获取联系人，但是如何为特定联系人设置铃声？

那么我该如何使用该方法：`ContactsContract.Contacts.CUSTOM_RINGTONE`？

我试过这样：

```
Uri contactUri = ContactsContract.Contacts.CONTENT_URI;
String[] PROJECTION = new String[] {
    ContactsContract.Contacts._ID,
    ContactsContract.Contacts.DISPLAY_NAME,
    ContactsContract.Contacts.HAS_PHONE_NUMBER,
};

String SELECTION = ContactsContract.Contacts.HAS_PHONE_NUMBER + "='1'";
Cursor contacts = managedQuery(contactUri, PROJECTION, SELECTION, null, null );

while (contacts.moveToNext())
{
    String Name=contacts.getString(contacts.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
}

String str1 = contacts.getString(contacts.getColumnIndexOrThrow("_id"));

Uri localUri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_URI, str1);
ContentValues localContentValues = new ContentValues();
localContentValues.put(ContactsContract.Contacts.CUSTOM_RINGTONE, 
    f.getAbsolutePath()+"/Adveture.ogg");
    MainActivity.this.getContentResolver().update(localUri, localContentValues, null, null); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T12:03:18.333

我发现它是如何工作的。下面你可以看到固定的代码代码：

```
 Uri contactData = ContactsContract.Contacts.CONTENT_URI;
    String contactId = contactData.getLastPathSegment();

    Cursor localCursor = managedQuery(contactData, PROJECTION, null, null, null);
    localCursor.move(120/*CONTACT ID NUMBER*/);

    String str1 = localCursor.getString(localCursor.getColumnIndexOrThrow("_id"));
    String str2 = localCursor.getString(localCursor.getColumnIndexOrThrow("display_name"));
    Uri localUri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_URI, str1);
    ContentValues localContentValues = new ContentValues();

    localContentValues.put(ContactsContract.Data.RAW_CONTACT_ID, contactId);
    localContentValues.put(ContactsContract.Data.CUSTOM_RINGTONE, f.getAbsolutePath()+"/Adventure.ogg");
    getContentResolver().update(localUri, localContentValues, null, null);
    Toast.makeText(this, "Ringtone assigned to: " + str2, 0).show(); 
```

只需将联系人 ID 号更改为您要更改的联系人的 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-03T06:27:24.357

要打开 android 的默认联系人搜索，请使用以下代码：

```
// put that constant in your class
static public final int CONTACT_CHOOSER_ACTIVITY_CODE = 73729;

// start contact search activity within any method you like
Intent intent = new Intent(Intent.ACTION_PICK);
intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
startActivityForResult(intent, CONTACT_CHOOSER_ACTIVITY_CODE); 
```

在 onActivityResult 方法中，您可以使用此代码（类似于[Rotary Heart](https://stackoverflow.com/users/1396823/rotary-heart)的代码）来设置联系人铃声：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
        case (CONTACT_CHOOSER_ACTIVITY_CODE) :
            if (resultCode == Activity.RESULT_OK) {

                try{
                    Uri contactData = data.getData();
                    String contactId = contactData.getLastPathSegment();
                    String[] PROJECTION = new String[] {
                            ContactsContract.Contacts._ID,
                            ContactsContract.Contacts.DISPLAY_NAME,
                            ContactsContract.Contacts.HAS_PHONE_NUMBER,
                    };
                    Cursor localCursor =  getContentResolver().query(contactData, PROJECTION, null, null, null);
                    localCursor.moveToFirst();
                    //--> use moveToFirst instead of this:  localCursor.move(Integer.valueOf(contactId)); /*CONTACT ID NUMBER*/

                    String contactID = localCursor.getString(localCursor.getColumnIndexOrThrow("_id"));
                    String contactDisplayName = localCursor.getString(localCursor.getColumnIndexOrThrow("display_name"));

                    Uri localUri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_URI, contactID);
                    localCursor.close();
                    ContentValues localContentValues = new ContentValues();

                    localContentValues.put(ContactsContract.Data.RAW_CONTACT_ID, contactId);
                    localContentValues.put(ContactsContract.Data.CUSTOM_RINGTONE, f.getAbsolutePath()+"/Adventure.ogg");
                    getContentResolver().update(localUri, localContentValues, null, null);

                    Toast.makeText(this, "Ringtone assigned to: " + contactDisplayName, Toast.LENGTH_LONG).show();

                } catch(Exception ex){
                    Toast.makeText(this, ex.getMessage(), Toast.LENGTH_LONG).show();
                }
            }
            break;
    }

} 
```

注意：您仍然需要将 f 变量（在代码 f.getAbsolutePath()+"/Adventure.ogg" 中）设置为您想要设置的文件（铃声）。

此代码已使用 android 2.3 进行了测试。也许更高版本需要进行更改。

# java - request.getParameter 在 chrome 中返回空值

> ID：14230445
> 
> 赞同：0
> 
> 时间：2013-01-09T07:44:07.060
> 
> 标签：java, javascript, jsp, google-chrome, struts

在我的 jsp 页面中，我有两个提交按钮。代码片段是：

```
<input type="submit" name="btnSubmit" id="btnSubmit" value="abc" onclick="return formCheck3(this)"/>
<input type="submit" name="btnSubmit" id="btnSubmit" value="xyz" onclick="return formCheck3(this)"/> 
```

在formCheck3中，在javascript中，我正在验证是否选择了下拉列表，然后提交表单。在我的动作类方法中，我有：

```
String button=request.getParameter("btnSubmit");
if(button.equals("abc")){
//certain code here
}else if(button.equals("xyz")){
//certain code here
} 
```

**这在 IE 和 mozilla 中运行良好，但在 chrome 中我将按钮值设为空。** 任何人都可以建议我解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:05:02.570

> *我正在从我的 javascript 中执行 form.submit() 并在此之后返回 true*

这个不对。返回`true`将继续调用元素的默认操作，这是在`<input type="submit">`提交父`<form>`元素的情况下，这是正确的，但是如果您已经预先提交了表单，那么您实际上完全覆盖了元素的默认操作。

删除`form.submit()`JS 中的调用。让它`<input type="submit">`做它的默认工作。这样它的参数名称/值也将出现在请求参数映射中。`true`在您的 JS 中，您应该通过仅返回或来控制提交`false`。

# python-2.7 - python脚本暂停，如何禁用它？

> ID：14230454
> 
> 赞同：1
> 
> 时间：2013-01-09T07:45:00.897
> 
> 标签：python-2.7, output

我有一个 python 脚本，我向它提供一次所有输入，然后打印一些输出。现在，我期望的是这种格式

```
 input 1
            input 2
            input 3
            output 1
            output 2 
```

现在我的问题是当我运行python脚本并提供输入（将其粘贴到终端中）时，输出在打印“输出1”后暂停，我必须按回车键再次打印。

```
from sets import Set

test_cases = int(raw_input())

while test_cases > 0:
    cats_vs_dogs = {}
    input_ = raw_input()
    input_ = input_.split(" ")
    total_cats = input_[0]
    total_dogs = input_[1]
    votes = int(input_[2])    
    remove_count = 0
    cats = Set()
    dogs = Set()
    for i in range(1, int(total_cats) + 1):
        cats.add('C' + str(i))
    for i in range(1, int(total_dogs) + 1):
        dogs.add('D' + str(i))

    for i in range(0, votes):
        input_ = raw_input()
        input_ = input_.split(" ")
        cat = input_[0]
        dog = input_[1]        
        if cat in cats:
            cats.remove(cat)
        elif cat in dogs:
            dogs.remove(cat)
        if dog in cats:
            cats.remove(dog)
        elif dog in dogs:
            dogs.remove(dog)

        if dog not in cats_vs_dogs:
            # now simply add the vote
            if cat in cats_vs_dogs:
                temp = list(cats_vs_dogs[cat])
                temp.append(dog)
                cats_vs_dogs[cat] = temp
            else:
                # cat was not found
                cats_vs_dogs[cat] = list([dog])
        else:
            # relevant dog is present, remove corresponding cat
            dogs_list = list(cats_vs_dogs[dog])
            if cat in dogs_list:
                # remove this entry and don't save it
                dogs_list.remove(cat)
                cats_vs_dogs[dog] = dogs_list
                remove_count += 1
            else:
                # no reverse entry exists so simply add
                if cat not in cats:
                    cats_vs_dogs[cat] = list([dog])
                else:
                    cats_list = list(cats_vs_dogs[cat])
                    cats_list.append(dog)
                    cats_vs_dogs[cat] = cats_list

    # now update the count
    for k in cats_vs_dogs.keys():
        remove_count += len(cats_vs_dogs[k])
    print remove_count + len(cats) + len(dogs)
    # print 'cats: ', cats
    # print 'dogs: ', dogs
    test_cases -= 1
    cats.clear()
    dogs.clear()
    cats_vs_dogs.clear() 
```

我提供的输入是：

```
 2
    1 1 2
    C1 D1
    D1 C1
    1 2 4
    C1 D1
    C1 D1
    C1 D2
    D2 C1 
```

我得到的输出是：

```
 ...
    D2 C11
    <system pause> I press enter
    3 
```

而我希望它是

```
 D2 C1<last line>
    1
    3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T22:09:08.943

好吧，我试图弄清楚您的代码到底做了什么，但我可以提供一些您可以尝试的建议：

*   使用`range()`时不需要填零，`range(0,6)`与`range (6)`.
*   使用`raw_input()`时，包含某种提示通常很有帮助。它也有助于调试。通过这种方式，您可以判断您看到的暂停是否实际上是在等待输入。一个例子是`test_cases = raw_input("Enter number of test cases: ")`。
*   最后，关于您的实际问题：您的`print`陈述包含在`while`块中。所以它可能正在打印一些东西，然后回到整个代码。试着把它拉出块，看看会发生什么。

# c# - Linq Query 查找数据表中的最小值和最大值

> ID：14230463
> 
> 赞同：0
> 
> 时间：2013-01-09T07:45:52.553
> 
> 标签：c#, linq, linq-to-dataset

我正在数据表中获取员工的出勤详细信息。看起来像这样

```
Day       SwipeTime
12/31/2012  11AM
12/31/2012  1PM
12/31/2012  7PM
12/31/2012  8PM
1/1/2012    2PM
1/1/2012    7PM
1/1/2012    8PM
1/2/2012    10AM
1/2/2012    8PM 
```

我需要显示总小时数 = lastswipe - firstwipe 的员工的日期和总小时数

我的结果看起来像

```
Day TotalHours
12/31/2012  9
1/1/2012    6
1/2/2012    12 
```

所以我需要找到按日期分组的最小和最大滑动。请帮我写查询

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:59:22.307

您可以使用`Enumerable.GroupBy`分组依据`date`。然后你可以创建一个`Dictionary<DateTime,int>`键是日期，值是该日期的总小时数：

```
Dictionary<DateTime,int> dateGroups = table.AsEnumerable()
    .GroupBy(r => r.Field<DateTime>("Date").Date)
    .Select(g => new{
        Date = g.Key, 
        TotalHours = g.Sum(r => 
               DateTime.ParseExact(r.Field<string>("SwipeTime"), 
                      "htt", CultureInfo.InvariantCulture).Hour)
    }).ToDictionary(x => x.Date, x => x.TotalHours); 
```

**编辑**：所以，那是一`TotalHours`整天，现在是所需的最大-最小计算。您还将所需的时间跨度格式更改为“11:41 AM”。然后我会用它`DateTime.Parse(str).TimeOfDay`来获取时间跨度。

```
Dictionary<DateTime, int> dateGroups = table.AsEnumerable()
.GroupBy(r => r.Field<DateTime>("Date").Date)
.Select(g => new
{
    Date = g.Key,
    TotalHours = 
       (g.Max(r => DateTime.Parse(r.Field<string>("SwipeTime")).TimeOfDay)
      - g.Min(r => DateTime.Parse(r.Field<string>("SwipeTime")).TimeOfDay)).Hours
}).ToDictionary(x => x.Date, x => x.TotalHours); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:25:36.487

在这个答案中，创建了一天的有序时间列表以避免两件事 - 两次解析所有行，并从解析的值创建两组以获得最大和最小项。我也不在分组前解析一天，因为相同的日期将具有相同的字符串值。

```
var query = from row in table.AsEnumerable()
            group row by row.Field<string>("Day") into g
            let times = g.Select(r => DateTime.Parse(r.Field<string>("SwipeTime")))
                         .OrderBy(t => t.TimeOfDay)
                         .ToList()
            select new
            {
                DateTime.Parse(g.Key).Date,
                (times.Last() - times.First()).TotalHours
            }; 
```

结果是具有两个属性的匿名对象的`DateTime Date`集合`double TotalHours`

# erlang - Ejabberd 错误: {undef, [{ejabberd_auth_storage,start,["localhost"]},

> ID：14230464
> 
> 赞同：-1
> 
> 时间：2013-01-09T07:46:03.413
> 
> 标签：erlang, ejabberd

当我在 ubuntu 上启动 Ejabberd`sudo ejabberdctl live`时，它给出了一些错误：

```
=PROGRESS REPORT==== 9-Jan-2013::15:32:16 ===
          supervisor: {local,ejabberd_sup}
             started: [{pid,<0.205.0>},
                       {name,ejabberd_listener},
                       {mfargs,{ejabberd_listener,start_link,[]}},
                       {restart_type,permanent},
                       {shutdown,infinity},
                       {child_type,supervisor}]

=INFO REPORT==== 9-Jan-2013::15:32:16 ===
I(<0.40.0>:ejabberd_rdbms:37) : ejabberd has not been compiled with relational database support. Skipping database startup.
*************************** "localhost"
=CRASH REPORT==== 9-Jan-2013::15:32:16 ===
  crasher:
    initial call: application_master:init/4
    pid: <0.39.0>
    registered_name: []
    exception exit: {bad_return,
                        {{ejabberd_app,start,[normal,[]]},
                         {'EXIT',
                             {undef,
                                 [{ejabberd_auth_storage,start,["localhost"]},
                                  {lists,foreach,2},
                                  {ejabberd_app,start,2},
                                  {application_master,start_it_old,4}]}}}}
      in function  application_master:init/4
    ancestors: [<0.38.0>]
    messages: []
    links: [<0.38.0>,<0.40.0>,<0.6.0>]
    dictionary: []
    trap_exit: true
    status: running
    heap_size: 987
    stack_size: 24
    reductions: 141
  neighbours:

=INFO REPORT==== 9-Jan-2013::15:32:16 ===
    application: ejabberd
    exited: {bad_return,
                {{ejabberd_app,start,[normal,[]]},
                 {'EXIT',
                     {undef,
                         [{ejabberd_auth_storage,start,["localhost"]},
                          {lists,foreach,2},
                          {ejabberd_app,start,2},
                          {application_master,start_it_old,4}]}}}}
    type: temporary 
```

谁能告诉我原因，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:14:01.613

看起来您的 ejabberd 是在没有`--enable-odbc`密钥的情况下编译的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:01:17.480

您正在使用的分支 master 尚未完成。使用默认分支，即 2.1.x。

# python - 无法使用python切换回root用户

> ID：14230467
> 
> 赞同：9
> 
> 时间：2013-01-09T07:46:05.207
> 
> 标签：python

我以 root 用户身份登录到终端。

然后在 Python 中：

`os.setuid(471)`能够切换到子根，但是当我尝试使用切换回根用户`os.setuid(0)`时出现以下错误：`Operation not permitted`

请让我知道如何从 subroot 切换回 root 用户。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T07:57:40.533

在子进程中调用`os.fork()`并切换到非root用户。“切换回来”只需在子节点中退出并等待子节点在父节点中退出。例如：

```
pid = os.fork()
if pid == 0:
    # child - do the work and exit
    try:
        os.setuid(471)
        ... do the work here
    finally:
        os._exit(0)

# parent - wait for the child to do its work and keep going as root
os.waitpid(pid, 0) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-09T07:47:31.663

这不是 setuid 的工作方式。当 root 自身降级时，无法重新获得 root 是设计使然。一旦你放弃 root （在这种情况下），它就消失了。

如果您以 root 身份使用 setuid，则无法返回。

我假设 os.setuid 是一个通过 C 级调用的瘦代理。从[手册](http://linux.die.net/man/2/setuid)页：

> 如果用户是 root 或程序是 set-user-ID-root，则必须特别小心。setuid() 函数检查调用者的有效用户 ID，如果它是超级用户，则所有与进程相关的用户 ID 都设置为 uid。发生这种情况后，程序就不可能重新获得 root 权限。

* * *

至于*为什么*无法重新获得root，考虑一个典型的使用。想象一个 Apache 服务器下降到`www`（或某种非特权用户）来处理实际请求。如果您可以重新获得 root，Python 脚本（或 PHP/Perl/CGI/等）可以重新获得 root 并造成绝对的破坏。

* * *

至于解决方案，您可以改用 seteuid （os.seteuid - 再一次，一个简单的代理到 C 级[seteuid](http://linux.die.net/man/2/seteuid)）。关于 setuid 和 seteuid 的 python 文档看起来很糟糕，但是有大量关于系统调用的文档。

至于暂时掉根和恢复的安全性......你需要非常小心。如果恶意代码有机会获得根，你就完蛋了。出于这个原因，最好派生一个子进程（正如 user4815162342 所建议的那样）。子进程将无法重新root。可以在[此处](https://stackoverflow.com/questions/8968387/is-it-flawed-to-use-seteuid-to-drop-root-privilege-temporarily)找到有关这些问题的更多信息。更多关于 setuid 的一般奇怪之处在[这里](https://stackoverflow.com/questions/8499296/realuid-saved-uid-effective-uid-whats-going-on)。

这个想法是使用 seteuid 设置有效的用户 ID 并产生一个新进程。由于 exec 的工作方式，有效的用户 id 将被复制到新进程保存的 uid 中。由于保存的 uid 不再是 root，因此无法将 root 改回。更多有趣的文档可以在[这里](http://linux.die.net/man/2/execve)找到。

最相关的部分：

> 如果在 filename 指向的程序文件上设置了 set-user-ID 位，并且底层文件系统没有挂载 nosuid（mount(2) 的 MS_NOSUID 标志），并且调用进程没有被 ptrace，那么调用进程的有效用户ID更改为程序文件所有者的有效用户ID。类似地，当设置程序文件的set-group-ID位时，调用进程的有效组ID被设置为程序文件的组。
> 
> 进程的有效用户ID复制到保存的set-user-ID；类似地，有效组 ID 被复制到保存的 set-group-ID 中。此复制发生在由于 set-user-ID 和 set-group-ID 权限位而发生的任何有效 ID 更改之后。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-23T09:09:29.670

Use seteuid() instead to set the effective ID but maintain the privilege:

```
import os
os.seteuid(471)
...
os.seteuid(os.getuid()) 
```

# air - 如何找到已安装的 AIR SDK 的确切版本

> ID：14230468
> 
> 赞同：1
> 
> 时间：2013-01-09T07:46:09.133
> 
> 标签：air

AIR SDK 通常仅通过主要和次要版本号来引用，但在数字右侧存在重要差异。如何检查我安装的 SDK 并确定它是哪个*确切*版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T10:29:19.900

如果您使用的是 Windows：

1.  导航到 AIR SDK 的位置。
2.  打开 /bin/ 子目录。您应该会看到一个名为 adl.exe 的文件。
3.  右键单击 adl.exe 并从上下文菜单中选择属性。
4.  在“属性”对话框中，单击“详细信息”选项卡。

详细信息选项卡包含一个名为“文件版本”的属性，其值显示 AIR SDK 的完整版本（例如，3.5.0.1060）。

如果您使用的是 Mac（或 Windows），您可以创建一个简单的 AIR 应用程序并添加这行 ActionScript：

```
trace(NativeApplication.nativeApplication.runtimeVersion); 
```

在您选择的 IDE 中测试文件时，您应该在 IDE 的输出面板中看到完整的 AIR SDK 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-28T15:24:09.607

最确定的答案，直接问AIR SDK是什么版本（`adt.jar`是AIR SDK的打包器）：

```
java -jar C:\air_sdk\lib\adt.jar -version 
```

打印完整版本号：

```
3.9.0.1030 
```

如何`adt.jar`在您的系统上找到文件？通常，您会设置一个指向 AIR SDK 的环境变量，例如`AIR_HOME`or `AIR_SDK_FOLDER`，因此您可以在命令中使用它：

视窗：

```
java -jar %AIR_SDK_FOLDER%\lib\adt.jar -version 
```

或者在 Mac / Linux 上：

```
java -jar $AIR_SDK_FOLDER/lib/adt.jar -version 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-07T12:39:05.523

Mac OS X

打开 /Library/Frameworks/Adobe AIR.framework/Versions/1.0/Resources/Info.plist 文本文件并找到 CFBundleVersionentry。对应的字符串条目代表 AIR 的版本，例如：

CFBundle 版本 26.0.0.127

[https://helpx.adobe.com/air/kb/determine-version-air-runtime.html](https://helpx.adobe.com/air/kb/determine-version-air-runtime.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T08:00:43.817

从 Mac 编写以下控制台命令以检查 Adob​​e AIR SDK 的当前版本： %AIR_SDK_FOLDER%/bin/adl -version

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-03T10:27:05.917

对上面的更正，它是 adt，而不是 adl 将版本号喷射到 Mac 上的命令行（也可能是 Windows）。

所以：

%AIR_SDK_FOLDER%/bin/adt -version

# java - 突出显示 JTextPane 中的第一行

> ID：14230470
> 
> 赞同：2
> 
> 时间：2013-01-09T07:46:21.417
> 
> 标签：java, swing, file, jtextpane

我的文本文件包含以下内容：

```
public class MyC{
public void MyMethod()
{
    System.out.println("My method has been accessed");
    System.out.println("hi");
}
} 
```

当我将`public class MyC{`文本文件加载到`JTextPane`. 有人可以指导我吗？我尝试查看[http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Highlighter.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Highlighter.html)但它正在使用位置。我不知道该怎么做。

这是我到目前为止所拥有的：

```
 public class ReadDemo {

    // read the file into the pane

    static void readin(String fn, JTextComponent pane) {
        try {
            FileReader fr = new FileReader(fn);
            pane.read(fr, null);
            fr.close();
        }
        catch (IOException e) {
            System.err.println(e);
        }
    }

    public static void main(String args[]) {
        final JFrame frame = new JFrame("Testing");
        frame.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });

        // set up the text pane, either a JTextArea or JTextPane

        final JTextComponent textpane = new JTextArea();

        //final JTextComponent textpane = new JTextPane();

        // set up a scroll pane for the text pane

        final JScrollPane pane = new JScrollPane(textpane);
        pane.setPreferredSize(new Dimension(600, 600));

        // set up the file chooser

        String cwd = System.getProperty("user.dir");
        final JFileChooser jfc = new JFileChooser(cwd);
        final JLabel elapsed = new JLabel("Elapsed time: ");

        JButton filebutton = new JButton("Choose File");
        filebutton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                if (jfc.showOpenDialog(frame) !=
                    JFileChooser.APPROVE_OPTION)
                        return;
                File f = jfc.getSelectedFile();

                // record the current time and read the file

                final long s_time = System.currentTimeMillis();
                frame.setCursor(Cursor.getPredefinedCursor(
                    Cursor.WAIT_CURSOR));
                readin(f.toString(), textpane);

                // wait for read to complete and update time

                SwingUtilities.invokeLater(new Runnable() {
                    public void run() {
                        frame.setCursor(Cursor.
                            getPredefinedCursor(
                            Cursor.DEFAULT_CURSOR));
                        long t = System.currentTimeMillis() -
                               s_time;
                        elapsed.setText("Elapsed time: " + t);
                    }
                });
            }
        });

        JPanel buttonpanel = new JPanel();
        buttonpanel.add(filebutton);
        buttonpanel.add(elapsed);

        JPanel panel = new JPanel();
        panel.setLayout(new BorderLayout());
        panel.add("North", buttonpanel);
        panel.add("East", pane);

        frame.getContentPane().add(panel);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:01:34.640

你可以这样尝试：

```
 static void readin(String fn, JTextComponent pane) {
    try {
        FileReader fr = new FileReader(fn);
        pane.read(fr, null);
        fr.close();
        Highlighter hilit = new DefaultHighlighter();
        Highlighter.HighlightPainter painter = new DefaultHighlighter.DefaultHighlightPainter(Color.yellow);
        pane.setHighlighter(hilit);
        hilit.addHighlight(0, pane.getText().indexOf("\n"), painter);
    }
    catch (IOException e) {
        System.err.println(e);
    } catch (BadLocationException e) {
        e.printStackTrace();
    }
} 
```

关键是您可以获得第一行结束的索引并在添加突出显示时使用它。

对于任何行/秒，您可以尝试：

```
 static void readin(String fn, JTextComponent pane) {
    try {
        FileReader fr = new FileReader(fn);
        pane.read(fr, null);
        fr.close();
        Highlighter hilit = new DefaultHighlighter();
        Highlighter.HighlightPainter painter = new DefaultHighlighter.DefaultHighlightPainter(Color.yellow);
        pane.setHighlighter(hilit);
        hilit.addHighlight(getLineEndIdx(pane.getText(), 4), getLineEndIdx(pane.getText(), 8 ), painter);
    }
    catch (IOException e) {
        System.err.println(e);
    } catch (BadLocationException e) {
        e.printStackTrace();
    }
}

private static int getLineEndIdx(String text, int lineNo) {
    int lineEndIdx = 0;
    for(int i = 1; i <= lineNo && lineEndIdx + 1 < text.length(); i++)
    {
        lineEndIdx = text.indexOf('\n', lineEndIdx + 1) ;
    }
    return lineEndIdx;
} 
```

您还可以进一步改进它...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T08:05:21.953

用于`javax.swing.text.Utilities.getRowStart()/getRowEnd()`获取偏移量`Highlighter`

# tomcat - 配置站点tomcat

> ID：14230476
> 
> 赞同：0
> 
> 时间：2013-01-09T07:46:39.200
> 
> 标签：tomcat

我需要帮助解决我面临的这个问题。

> > 我正在尝试从我租用的一台专用服务器为网站 [比如 www.mysite.com] 提供服务。
> > 
> > 我正在使用 Apache Tomcat 6.0.18。我没有为此使用任何网络服务器。Tomcat 也用作网络服务器。
> > 
> > 我已将默认端口从 8080 更改为 9001。
> > 
> > 我在服务器的主机文件中创建了 DNS 条目 [xxxx 指向 www.mysite.com]
> > 
> > 当我构建项目时，创建了 mysite.war 并在部署它时，在 webapps [按照标准] 中创建了“mysite”文件夹。
> > 
> > 我将只从我租用的服务器上为 1 个站点提供服务。

问题：当我尝试以 www.mysite.com 的身份访问我的网站时，没有任何反应，并且出现超时错误。

但是，当我使用 url 作为 www.mysite.com:9001/mysite/welcome.html 访问我的网站时，我会在互联网上加载正确的主页。

我认为我的 server.xml 设置 [或任何其他设置] 中似乎存在一些问题。

有人请帮助我解决此设置问题。

如果我需要提供更多信息，请告诉我。

谢谢，顺丰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:27:10.263

根据您当前的配置，您可以访问是正确的。

```
www.mysite.com:9001/mysite/welcome.html 
```

如果你想像这样访问它，你的配置是错误的`www.mysite.com/welcome.html`：您需要做的是将您更改`9001`为默认的 HTTP 端口 - 可能是`80`. 这将允许您像这样访问您的网站：`www.mysite.com/mysite`. 如果你想用这种方式访问​​它：`www.mysite.com`你的项目需要在tomcat的`webapps/ROOT`目录下。

# xml - XSD：根据属性检查子元素的顺序

> ID：14230482
> 
> 赞同：1
> 
> 时间：2013-01-09T07:47:03.007
> 
> 标签：xml, xsd

我正在尝试检查 xml 中子元素的顺序，

我的xml是

```
<main>
<col name="name1">test1</col>
<col name="name2">test2</col>
<col name="name3">test3</col>
<col name="name4">test4</col>
<col name="num1">true</col>
</main> 
```

我需要验证子元素是否以正确的顺序显示。我文件中的子元素都具有相同的名称但不同的属性。

```
<xs:element minOccurs="0" maxOccurs="unbounded" name="col">
<xs:complexType>
<xs:simpleContent>
<xs:extension base="xs:string">
<xs:attribute name="name" type ="OrderCheck" use="required" />
</xs:extension>
</xs:simpleContent>
</xs:complexType>
</xs:element> 
```

理想情况下，我想做

```
<xs:complexType name="OrderCheck">
    <xs:sequence>
    <xs:element name="name1" type="xs:string"/>
    <xs:element name="name2" type="xs:string"/>
    <xs:element name="name3" type="xs:string"/>
    <xs:element name="name4" type="xs:string"/>
    <xs:element name="num1" type="xs:boolean"/>
    </xs:sequence>  
    </xs:complexType> 
```

为了能够使用 xs:sequence 我需要定义一个 xs:complexType 但我无法在“属性”类型下定义一个 complexType，我只能定义一个简单类型。但我不能在下使用 xs:sequence简单类型。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T10:52:33.483

如果您可以使用 XSD 1.1（在 Xerces beta 和 Saxon-EE 中实现），那么您可以使用断言来做到这一点。

在这种情况下有时可能有用的另一种技术是将验证过程实现为两阶段管道，包括转换和验证步骤。转换通常会转换

```
<col name="name1">test1</col> 
```

至

```
<name1>test1</name1> 
```

然后你就有了一个很容易接受 XSD 1.0 验证的结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:24:10.360

不幸的是，XSD 1.0 无法实现您想要做的事情。用`sequence`你可以指定不同类型所需的顺序，但不能使用不同的数据类型。

我相信[Schematron](http://en.wikipedia.org/wiki/Schematron)可以用于此。

# import - Java EE 应用程序需要在服务器上安装 Microsoft Office

> ID：14230484
> 
> 赞同：0
> 
> 时间：2013-01-09T07:47:07.403
> 
> 标签：import, ms-word, apache-poi

我想知道我们是否需要在服务器上安装 Microsoft Office 才能从 Java EE 应用程序生成 word、excel、pdf 文档。

据我了解，pdf 是由 iText 生成的，因此除了 Excel、Word 或任何其他开放式办公文档之外不需要任何东西，它是通过库发生的，还是我们需要在服务器上安装办公应用程序？

其次，如果生成繁重的负载让我们说这个组件可以处理 500 个文档吗？

# android - 将 Android 应用程序与 CakePhp 网站连接起来

> ID：14230486
> 
> 赞同：4
> 
> 时间：2013-01-09T07:47:21.320
> 
> 标签：android, http, cakephp, login

是否可以与 cakePhp 网站通信 android 应用程序并共享数据？如果可能的话，我想创建一个可以登录网站的应用程序；我的疑问是：

1.  如何将用户名和密码从我们的应用程序传递到 cakephp 网站登录页面？谁能给我看一个示例程序？

2.  cakephp 控制器如何处理这个请求并响应这个请求？请给我一个示例程序？

（我是 android 和 cakephp 的初学者。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T11:28:40.887

快速回答——是的！

我们刚刚完成了将一个 Android 应用程序推向市场的过程。我们是这样做的：

1) 下载并学习在Eclipse 中使用Cordova PhoneGap（2.2.0 为最新版本）。这使得整个事情变得如此简单，只需一些 HTML 和大量的 Javascript。

2) 在您的 JS 中，创建使用 AJAX 参数推送登录信息的方法。例子：

```
document.addEventListener('deviceready', onDeviceReady, false);

function onDeviceReady() {

    $("#login").click(function() {
        $email = $("#UserEmail").val();
        $pass = $("#UserPassword").val();
            $.ajax({
                    url : yourURL + 'api/users/login',
                    async : false,
                    data : {
                        'email' : $email,
                        'password' : $pass
                    },
                    dataType : 'json',
                    type : 'post',
                    success : function(result) {
                            /**
                             * do your login redirects or 
                             * use localStorage to store your data 
                             * on the phone. Keep in mind the limitations of 
                             * per domain localStorage of 5MB
                             */
                            // you are officially "logged in"
                            window.location.href = "yourUrl.html";
                            return;
                    },
                    error : function(xhr, status, err) {
                        // do your stuff when the login fails
                    }
            });
    }
} 
```

3) 在 Cake / PHP 中，您的用户控制器将在 AJAX 调用中获取用户名和密码数据并将其用于身份验证。

```
<?php

class UsersController extends AppController {

    public $name = 'Users';

    public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('api_login');
    }

    public function api_login() {
        $this->autoRender = false;

        if ($this->request->data && isset($this->request->data['email']) && isset($this->request->data['password'])) {

            $arrUser  = $this->User->find('all',array(
                    'conditions'=>array(
                            'email'=> $this->request->data['email'],
                            'password' => $this->Auth->password($this->request->data['password']),
                    )
                )
            );

            if (count($arrUser) > 0) {
                $this->Session->write('Auth.User',$arrUser[0]['User']);

                // Do your login functions

                $arrReturn['status'] = 'SUCCESS';
                $arrReturn['data'] = array( 'loginSuccess' => 1,'user_id' => $arrUser[0]['User']['id'] );

            } else {
                $arrReturn['status'] = 'NOTLOGGEDIN';
                $arrReturn['data'] = array( 'loginSuccess' => 0 );
            }
        } else {
            $arrReturn['status'] = 'NOTLOGGEDIN';
            $arrReturn['data'] = array( 'loginSuccess' => 0 );
        }
        echo json_encode($arrReturn);
    }
}
?> 
```

差不多就是这样。您现在已通过 CakePHP 的身份验证。

您不需要使用“api_”，您可以使用任何您想要的函数名称，但这有助于我们掌握我们允许移动用户与 Web 用户执行的操作。

现在，这些只是构建块。您基本上必须使用 HTML 和 Javascript 在手机上创建网站的完整版本，因此根据您的应用程序，为您的网站创建响应式设计并允许移动浏览可能会更容易。

！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-27T19:12:49.207

使用 Admad JWT 身份验证插件

如果您使用 cakephp3，请使用以下功能更改您的登录功能：

```
public function token() {

        $user = $this->Auth->identify();

        if (!$user) {

            throw new UnauthorizedException('Invalid username (email) or password');
        }

        $this->set([
            'success' => true,
            'data' => [
                'token' => JWT::encode([
                    'sub' => $user['id'],
                    'exp' =>  time() + 604800
                ],
                Security::salt())
            ],
            '_serialize' => ['success', 'data']
        ]);
} 
```

您可以阅读有关 REST Api 和 JWT Auth 实现的教程

[http://www.bravo-kernel.com/2015/04/how-to-add-jwt-authentication-to-a-cakephp-3-rest-api/](http://www.bravo-kernel.com/2015/04/how-to-add-jwt-authentication-to-a-cakephp-3-rest-api/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-05T01:03:56.487

如果将 cakephp 中的大多数视图页面重建为 ajax 似乎会破坏使用 cakephp 的目的。

# html - 如何在新行开始分页？我正在使用引导程序

> ID：14230487
> 
> 赞同：0
> 
> 时间：2013-01-09T07:47:26.517
> 
> 标签：html, css, twitter-bootstrap

如您所见。分页的结果就在商店列表旁边。
它必须低于该值。
我怎样才能做到这一点？

**看法**

```
<div class='pagination-centered'>
    <%= page_entries_info(@shops).html_safe %>
    <%= paginate @shops, :window => 4, :outer_window => 5, :left => 2, :right => 2 %>
</div>

<% @shops.each do |shop| %>  
    <%= render 'shops/shop', :shop => shop %>
<% end %>

<div class='pagination-centered'>
    <%= paginate @shops, :window => 4, :outer_window => 5, :left => 2, :right => 2 %>
    <%= page_entries_info(@shops).html_safe %> 
```

**图片**

![图片](../Images/2ee4374d92e2d0454e9b3ddac7f09674.png)

**更新：**这是生成的 HTML。分页必须从新行开始。
它不应该与商店在同一条线上。

```
<div class='pagination-centered'>
    Displaying <b>all 4</b> shops
</div>  

<span class='shop'>
    <div class="List">
        …shop A...                      
    </div>

    <div class="List">
        …shop B...                      
    </div>

    <div class="List">
        …shop C...                      
    </div>
</span>

<div class='pagination-centered'>
    Displaying <b>all 4</b> shops
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:21:10.020

如果您的跨度或列表包含浮点数，那就是问题

尝试

```
<div class='pagination-centered'>
    Displaying <b>all 4</b> shops
</div>  

<span class='shop'>
    <div class="List">
        …shop A...                      
    </div>

    <div class="List">
        …shop B...                      
    </div>

    <div class="List">
        …shop C...                      
    </div>
</span>

<div class="clearfix"></div>

<div class='pagination-centered'>
    Displaying <b>all 4</b> shops
</div> 
```

# mysql - 实体类型和关系类型之间的真正区别？

> ID：14230491
> 
> 赞同：1
> 
> 时间：2013-01-09T07:47:41.880
> 
> 标签：mysql, sql, database

我知道关系类型连接到一个或多个实体集。我不明白实体类型和关系类型之间的真正区别是什么？在我看来，它们的功能完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:06:52.907

实体类型就像名词。以及我们要存储数据的对象。客户和发票

关系类型是这些名词如何相互关联......就像动词一样。接收和发送

客户收到发票 发票已发送给客户

实体类型中的每个实体都将具有相同的属性集，但通常具有不同的属性值。每个实体客户将有发票发送到的不同地址。每张发票都有不同的发票编号和最有可能的总数。

我希望对您有所帮助，可以在[http://www.databasedesign.co.uk/bookdatabasesafirstcourse/chap3/chap3.htm找到此示例的进一步阅读和来源](http://www.databasedesign.co.uk/bookdatabasesafirstcourse/chap3/chap3.htm)

# java - 在发送之前将肥皂标题添加到肥皂信封

> ID：14230493
> 
> 赞同：1
> 
> 时间：2013-01-09T07:47:50.640
> 
> 标签：java, soap

> **可能重复：**
> [将自定义 Soap 标头添加到 Web 服务请求](https://stackoverflow.com/questions/7022135/adding-custom-soap-header-to-webservice-request)

我正在尝试使用从 WSDL 文件生成的 java 客户端调用 Web 服务。有要求在`<soap:Header>`里面添加`<soap:Envelope>`。当我在eclipse中生成客户端并调用服务时，请求消息是，

```
 <soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope"  xmlns:tem="http://tempuri.org/">
    <soap:Body>
      <tem:GetEntityXml>
         <!--Optional:-->
         <tem:entityGuid>f949d2fe-d5a2-4115-a920-e85343adcf1a</tem:entityGuid>
      </tem:GetEntityXml>
   </soap:Body>
</soap:Envelope> 
```

在我想要的地方，

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:tem="http://tempuri.org/">
<soap:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
  <wsa:Action>http://tempuri.org/xxx/HelloWorld</wsa:Action><wsa:To>https://xxx/yyy.svc</wsa:To>
</soap:Header>
   <soap:Body>
      <tem:GetEntityXml>
         <!--Optional:-->
         <tem:entityGuid>f949d2fe-d5a2-4115-a920-e85343adcf1a</tem:entityGuid>
      </tem:GetEntityXml>
   </soap:Body>
</soap:Envelope> 
```

我试图在`_call.invoke()`方法之前修改 SOAP 信封。

```
org.apache.axis.message.SOAPHeaderElement she=new org.apache.axis.message.SOAPHeaderElement("http://www.w3.org/2005/08/addressing",null); 
        she.addNamespaceDeclaration("wsa","http://www.w3.org/2005/08/addressing");

        SOAPElement node=she.addChildElement("Action","wsa");
        node.addTextNode("http://tempuri.org/xxx/HelloWorld");
        System.out.println("2");
        SOAPElement node2=she.addChildElement("To","wsa");
        node2.addTextNode("https://xxx/yyy.svc");

        _call.getMessageContext().getCurrentMessage().getSOAPEnvelope().addHeader(she);;
        System.out.println(she);
        _call.addHeader(she); 
```

由于我对 Web 服务非常陌生，因此欢迎每个建议。

请帮助我根据需要创建和格式化标题。

# php - 评估公式字符串中的不等式

> ID：14230495
> 
> 赞同：1
> 
> 时间：2013-01-09T07:47:57.077
> 
> 标签：php, math

如何解析下面的字符串：

```
"(x > y) * z"
// Should always return: 
// 1\. float(0) if x < y
// 2\. float(z) if x > y 
```

我试过像这样使用**[EvalMath](http://www.phpclasses.org/package/2695-PHP-Safely-evaluate-mathematical-expressions.html)**：

```
$m = new EvalMath;
$m->evaluate("(4 > 1) * 5");
// Throws an error: "illegal character '>'" 
```

我不介意使用其他类或重写公式。只要我可以返回`z`when`x`大于`y`elsewise`0`并且只要公式保持为字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:04:22.347

问题归结为用 EvalMath 已经支持的函数重新表达不等式运算符。既然[这个版本](https://github.com/moodle/moodle/blob/master/lib/evalmath/evalmath.class.php)有`max`和`min`功能，我们可以重新表述：

*   `(x > y)`作为

    ```
    min(1, max(0, (x - y))) 
    ```

*   `(x < y)`作为

    ```
    min(1, max(0, (y - x))) 
    ```

请注意，这也包括完全相等，即 x = y 的情况。

# c++ - Cuda中的数组乘法产生错误

> ID：14230496
> 
> 赞同：2
> 
> 时间：2013-01-09T07:48:06.263
> 
> 标签：c++, api, cuda, runtime-error, invalid-argument

我想将两个数组相乘，但 Cuda RunTime API 有问题。出现错误：cuda 运行时 API 错误 11：无效参数。论据是什么？请帮帮我 代码：

```
// includes, system
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <fstream>

// includes, project
#include <cufft.h>
#include <cuda.h>
#include <cutil_inline.h>
#include <shrQATest.h>

#define SIGNAL_SIZE  8192
#define SIGNAL_COUNT 384

// Complex data type
typedef float2 Complex; 

static __device__ __host__ inline Complex ComplexMul(Complex, Complex);
static __device__ __host__ inline Complex ComplexAdd(Complex );
static __global__ void ComplexPointwiseMA(Complex* , Complex* , Complex* );

// Complex addition 
static __device__ __host__ inline Complex ComplexAdd(Complex a,Complex b)
{
    Complex c;
    c.x = a.x + b.x;
    c.y = a.y + b.y;
    return c;
}

// Complex multiplication
static __device__ __host__ inline Complex ComplexMul(Complex a, Complex b)
{
    Complex c;
    c.x = a.x * b.x - a.y * b.y;
    c.y = a.x * b.y + a.y * b.x;
    return c;
}

// Complex Mul 'n Add function
static __global__ void ComplexPointwiseMA(Complex* mas1, Complex* mas2, Complex*mas_tmp)
{
    const int numThreads = blockDim.x * gridDim.x;
    const int threadID = blockIdx.x * blockDim.x + threadIdx.x;
    int j=0, k=0; 
    Complex c;
    int size=SIGNAL_COUNT*SIGNAL_SIZE;
    for (int i = threadID; i <size; i += numThreads)
    {
        if((i%SIGNAL_SIZE==0)&&(j<SIGNAL_COUNT))
            j++;
        c=ComplexMul(mas1[i], mas2[j]);
        mas_tmp[k]=ComplexAdd(mas_tmp[k],c);
        if(k>=SIGNAL_SIZE-1)
            k=0;
        else
            k++;
    }
}

int main(int argc, char** argv)
{
    int threads_per_block=256;
    int blocks_per_grid=16;
    //dim3 dimBlock(SIGNAL_COUNT, SIGNAL_SIZE); // threads 
    //dim3 dimGrid(SIGNAL_COUNT); // 384 blocks in a grid
    cudaEvent_t start, stop;
    float elapsedTime;
    //shrQAStart(argc, argv);
    cudaEventCreate(&start);
    cudaEventCreate(&stop);

    // For random
    srand(1001);

    // Allocate host memory for the mass
    Complex* mas_tmp=NULL;
    mas_tmp =new Complex [SIGNAL_COUNT*SIGNAL_SIZE];

    Complex* mas1=NULL;
    mas1 =new Complex [SIGNAL_COUNT*SIGNAL_SIZE];
    for(unsigned int i = 0; i <SIGNAL_COUNT*SIGNAL_SIZE; ++i)
    {
        mas1[i].x = rand() / (float)RAND_MAX;
        mas1[i].y = rand() / (float)RAND_MAX;
    }

    Complex* mas2=NULL;
    mas2 =new Complex [SIGNAL_COUNT];
    for(unsigned int i = 0; i < SIGNAL_COUNT; ++i)
    {
        mas2[i].x = rand() / (float)RAND_MAX;
        mas2[i].y = rand() / (float)RAND_MAX;
    }

    // Timer
    cudaEventRecord(start,0);

    // Allocate device memory for mass
    Complex* mastmp_=NULL; // temporary 
    cutilSafeCall(cudaMalloc(&mastmp_, SIGNAL_SIZE*SIGNAL_COUNT*sizeof(Complex)));
    Complex* mas1_=NULL; // signal
    cutilSafeCall(cudaMalloc(&mas1_, SIGNAL_SIZE*SIGNAL_COUNT*sizeof(Complex)));
    Complex* mas2_=NULL; // coefficient
    cutilSafeCall(cudaMalloc(&mas2_, SIGNAL_COUNT*sizeof(Complex)));

    // Copy host data to device
    cutilSafeCall(cudaMemcpy(mas1_, mas1, SIGNAL_SIZE*SIGNAL_COUNT*sizeof(Complex),    cudaMemcpyHostToDevice));
    cutilSafeCall(cudaMemcpy(mas2_, mas2, SIGNAL_COUNT*sizeof(Complex), cudaMemcpyHostToDevice));

    // Calling  Mul 'n Add function
    ComplexPointwiseMA<<<blocks_per_grid, threads_per_block>>>(mas1_, mas2_, mastmp_);

    // Check if kernel execution generated and error
    cutilCheckMsg("Kernel execution failed [ ComplexPointwiseMA ]");

    // Copy device memory to host
    cutilSafeCall(cudaMemcpy(mastmp_, mas_tmp, SIGNAL_SIZE*SIGNAL_COUNT*sizeof(Complex), cudaMemcpyDeviceToHost));

    cudaEventRecord(stop,0);
    cudaEventSynchronize(stop);
    cudaEventElapsedTime(&elapsedTime, start,stop);
    printf("Time %3.10f ms\n", elapsedTime);

    // Free memory  
    free(mas1);
    free(mas2);
    free(mas_tmp);
    cudaEventDestroy(start);
    cudaEventDestroy(stop);

    cutilSafeCall(cudaFree(mas1_));
    cutilSafeCall(cudaFree(mas2_));
    cutilSafeCall(cudaFree(mastmp_));

    cutilDeviceReset();
    system ("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:34:42.137

您的代码中的以下行将生成`Invalid Argument`.

```
// Copy device memory to host
    cutilSafeCall(cudaMemcpy(mastmp_, mas_tmp, SIGNAL_SIZE*SIGNAL_COUNT*sizeof(Complex), cudaMemcpyDeviceToHost)); 
```

在函数`cudaMemcpy`中，第一个参数是目标指针，第二个参数是源指针。您已指定标志`cudaMemcpyDeviceToHost`，但主机（目标）和设备（源）指针互换。

你应该这样做（交换前 2 个参数）：

```
cutilSafeCall(cudaMemcpy(mas_tmp, mastmp_,SIGNAL_SIZE*SIGNAL_COUNT*sizeof(Complex), cudaMemcpyDeviceToHost)); 
```

# .net - 在 HIS 2009 和 AS/400 Cobol 程序之间传递参数

> ID：14230500
> 
> 赞同：2
> 
> 时间：2013-01-09T07:48:11.537
> 
> 标签：.net, ibm-midrange, cobol

我们正在使用 Microsoft.HostIntegration.TI.ClientContext.dll 和事务集成器主机应用程序库将 HIS 2009 与 AS/400 Cobol 程序连接起来。

我们收到以下 QSYSOPR 日志消息“在 COBOL 语句中检测到消息 MCH0801……与未传递的外部或内部参数关联的参数。”</p>

测试 COBOL 程序如下。

```
 IDENTIFICATION DIVISION.
 PROGRAM-ID. TSTEBANK.
 DATA DIVISION.
 LINKAGE SECTION.
 01 NAME                         PIC X(30).
 01 ACCNUM                       PIC X(6).
 01 ACCBAL                       PIC S9(1)V9(2).

 PROCEDURE DIVISION USING NAME ACCNUM ACCBAL.
                 MOVE 555 TO ACCBAL.
                 MOVE “TEST” TO NAME. 
```

发送的 .net 数据类型对于 PIC X 是字符串，对于 S9(1)V9(2) 是十进制

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T13:52:22.017

我们在与 AS400 平台通信时应该使用 DPC 编程模型。使用 VS TI Projects 从 cobol 文件链接部分生成 dll 很容易，配置相关的 DCOM 组件也很容易。

# php - Linkedin 二级连接 API

> ID：14230502
> 
> 赞同：3
> 
> 时间：2013-01-09T07:48:19.687
> 
> 标签：php, codeigniter, linkedin

我根据 codeigniter/linkedin api 方法获得了linkedin 认证用户的个人资料信息和连接详细信息。但我的最终需要是获取我的连接的连接。linkedin 文档说，如果我们拥有“r_network”权限，我们将获得一级和二级连接，但我做不到。请提出获取二级连接的解决方案。以下是我的代码。

```
$profile_connections = $this->linkedin->profile('~/connections:(id,first-name,last-name,picture-url,industry,location,public-profile-url,positions:(company:(name)))');
$profile_connections = json_decode($profile_connections['linkedin']);

foreach ($profile_connections->values as $connections){
            $sub_connections = $this->linkedin->profile("url=".urlencode($connections->publicProfileUrl)."/connections:(id,first-name,last-name,picture-url,industry,location)");
            $sub_connections = json_decode($sub_connections['linkedin']);
        } 
```

但是在获取 2 度连接时收到一条错误消息，例如“访问连接被拒绝”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:17:34.333

*引用*自[linkedin开发者论坛](https://developer-programs.linkedin.com/comment/19128#comment-19128)：

**API**在 API 返回的内容方面更加明确。 **Connections API**仅返回**1 度连接**。虽然**r_network**成员权限确实授予您的应用程序访问 **一级和二级**连接*的权限（连接 API 和人员搜索 API 都需要此成员权限*），但它只能通过**人员搜索 API**允许您访问**二级连接。****Connections API**一直仅限于**一级连接。**

 *******所以，这几乎是你的问题。*******

# javascript - 图像标签 style.height 没有覆盖 CSS 类的高度？

> ID：14230504
> 
> 赞同：1
> 
> 时间：2013-01-09T07:48:49.630
> 
> 标签：javascript, html, css, image

CSS

```
.myStyle {
height: 10px;
background-image: url(../myImage.png);
} 
```

html

```
<img class=myStyle src=<%scriptlet%> > 
```

现在问题出在我的 js 中，我为这个 img 标签编写了一个错误处理程序，它将高度设置为 0px。这个 0px 以 style.height=0px 的形式出现，但不会覆盖 myStyle 类的高度。

js

```
myImage = $('.myStyle', $el);
myImage.error(function () {
           myImage.attr('style.height', '0px');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T07:52:29.557

改变：

```
myImage.attr('style.height', '0px'); 
```

到

```
myImage.css('height', '0'); 
```

要获取背景图像，您可以使用getting，例如

```
myImage.css("background"); 
```

或者

```
myImage.css("backgroundImage") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:51:09.737

用这个：

```
myImage.height(0); 
```

代替：

```
myImage.attr('style.height', '0px'); 
```

是为属性操作而`attr()`设计的，因此为了使后面的声明起作用，您还可以将其更改为：

```
myImage.attr('style', 'height: 0px;'); 
```

请参阅[`attr()`jQuery 文档](http://api.jquery.com/attr/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T07:53:46.407

改用这个：

```
myImage.height('10px'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T08:04:08.540

```
myImage.style.height = '0px'; 
```

这也将起作用。

# java - 垃圾收集器和 ARC 有什么区别？

> ID：14230507
> 
> 赞同：-4
> 
> 时间：2013-01-09T07:49:28.137
> 
> 标签：java, ios, objective-c, memory-management, garbage-collection

> **可能重复：**
> [Objective-C 自动引用计数和垃圾回收有什么区别？](https://stackoverflow.com/questions/7874342/what-is-the-difference-between-objective-c-automatic-reference-counting-and-garb)

有人可以告诉我，JAVA 和 ARC 中的垃圾收集器的基本区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T07:53:10.307

一句话：垃圾收集器找到并收集保留循环，ARC没有。

# android - 为什么系统调用挂钩在 Linux/Android 2.6.29 中每次都会产生不同的结果？

> ID：14230509
> 
> 赞同：1
> 
> 时间：2013-01-09T07:49:30.773
> 
> 标签：android, c, linux, linux-kernel, system-calls

我已经`Android 2.6.29`通过`LKM module`. 我正在追踪一个用于系统调用的 Android 应用程序。但有趣的是，每次我获得系统调用列表时，它都会返回不同的结果。

我无法在代码部分制作粗体文本，所以我放了 ** 来显示差异的开始位置。

例如，

第一次运行：

```
our_sys_gettid ---> uid = 10028  
 our_sys_open ---> uid = 10028 with filename= /dev/cpuctl//tasks, flags= 131073, mode=0 
 our_sys_write ---> uid = 10028 with fd= 30, buf = 230 and count=3 
 our_sys_close ---> uid = 10028 with fd= 30  
 our_sys_setpriority ---> uid = 10028 with which= 0, who=230 and niceval=0 
 our_sys_futex ---> uid = 10028 with uadd=������, op=1, val=1, utime=<NULL>, uaddr2=������ and val3=  
 **our_sys_gettid ---> uid = 10028  
 our_sys_open ---> uid = 10028 with filename= /dev/cpuctl//tasks, flags= 131073, mode=0 
 our_sys_clock_gettime ---> uid = 10028 with which_clock=<NULL>, tp =   
 our_sys_clock_gettime ---> uid = 10028 with which_clock=<NULL>, tp =   
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=3196467192 
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=3196467192 **
 our_sys_clock_gettime ---> uid = 10028 with which_clock=<NULL>, tp =   
 our_sys_clock_gettime ---> uid = 10028 with which_clock=<NULL>, tp =   
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=3196466496 
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=3196466496 
 our_sys_dup ---> uid = 10028 with fildes=32 
 our_sys_close ---> uid = 10028 with fd= 32  
 ..................... 
```

第二次运行：

```
our_sys_gettid ---> uid = 10028  
 our_sys_open ---> uid = 10028 with filename= /dev/cpuctl//tasks, flags= 131073, mode=0 
 our_sys_write ---> uid = 10028 with fd= 30, buf = 228 and count=3 
 our_sys_close ---> uid = 10028 with fd= 30  
 our_sys_setpriority ---> uid = 10028 with which= 0, who=228 and niceval=0 
 our_sys_futex ---> uid = 10028 with uadd=������, op=1, val=1, utime=<NULL>, uaddr2=������ and val3=  
 **our_sys_gettid ---> uid = 10028  
 our_sys_open ---> uid = 10028 with filename= /dev/cpuctl//tasks, flags= 131073, mode=0 
 our_sys_write ---> uid = 10028 with fd= 30, buf = 228 and count=3 
 our_sys_clock_gettime ---> uid = 10028 with which_clock=<NULL>, tp =   
 our_sys_clock_gettime ---> uid = 10028 with which_clock=<NULL>, tp =   
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=3198662648 
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=3198662648 
 our_sys_clock_gettime ---> uid = 10028 with which_clock=<NULL>, tp =   
 our_sys_clock_gettime ---> uid = 10028 with which_clock=<NULL>, tp =   
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=3198661952** 
 our_sys_close ---> uid = 10028 with fd= 30  
 our_sys_setpriority ---> uid = 10028 with which= 0, who=228 and niceval=0 
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=1181359656 
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=3198661952 
 our_sys_dup ---> uid = 10028 with fildes=32 
 our_sys_close ---> uid = 10028 with fd= 32  
 .................... 
```

第三轮：

```
our_sys_gettid ---> uid = 10028  
 our_sys_open ---> uid = 10028 with filename= /dev/cpuctl//tasks, flags= 131073, mode=0 
 our_sys_write ---> uid = 10028 with fd= 31, buf = 228 and count=3 
 our_sys_close ---> uid = 10028 with fd= 31  
 our_sys_setpriority ---> uid = 10028 with which= 0, who=228 and niceval=0 
 our_sys_futex ---> uid = 10028 with uadd=������, op=1, val=1, utime=<NULL>, uaddr2=������ and val3=X{�D  
 **our_sys_clock_gettime ---> uid = 10028 with which_clock=<NULL>, tp =   
 our_sys_clock_gettime ---> uid = 10028 with which_clock=<NULL>, tp =   
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=3198035960 
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=3198035960 
 our_sys_clock_gettime ---> uid = 10028 with which_clock=<NULL>, tp =   
 our_sys_clock_gettime ---> uid = 10028 with which_clock=<NULL>, tp =   
 our_sys_munmap ---> uid = 10028 with addr=1183178752 and len=770048 
 our_sys_close ---> uid = 10028 with fd= 32**  
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=3198035264 
 our_sys_ioctl ---> uid = 10028 with fd=21, cmd=3222823425 and arg=3198035264 
 our_sys_dup ---> uid = 10028 with fildes=31 
 our_sys_close ---> uid = 10028 with fd= 31  
 ........................ 
```

知道为什么每次都会产生不同的结果吗？

还有其他更好的工具来跟踪系统调用吗？我听说过`strace/ptrace`，`auditd`等等，但不确定它们是否可用于 Android。

# ruby - Array#uniq 用于 ActiveRecord 对象的数组

> ID：14230510
> 
> 赞同：1
> 
> 时间：2013-01-09T07:49:53.300
> 
> 标签：ruby, activerecord

我最近偶然发现了[这篇](http://blog.kabisa.nl/2011/06/03/custom-arrayuniq-for-activerecord-results/)博文，其中指出 Array#uniq 在 ActiveRecord 对象数组上的行为不同，但没有给出具体的示例，也没有说明原因。

我希望看到这种不同行为的可重现示例及其解释。

**编辑：** 我说的是 Array#uniq，而不是 ActiveRecord::Relation#uniq。如果后者是上面提到的博客文章的实际含义，那么我的问题已经被 loz 回答了（见下文）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:10:58.370

活动记录“数组”不是数组，它们是不同的。所以（除了.all，它显式返回一个数组）如果你使用关联或类似的东西，你会得到不同的行为，因为延迟加载正在运行：

```
post = Post.find(1)
post.comments
=> Array[Comment(:1), Comment(:2)]... etc 
```

看起来像一个数组，但是

```
post.comments.class
=> ActiveRecord::Relation 
```

因此，执行 Uniq 会对关系进行操作，这会为查询添加更多约束，最终将在需要记录时在数据库上运行：

```
post.comments.uniq 
```

这将通过在 SQL 中执行 DISTINCT 或 UNIQUE 查询子句来执行 uniq，而不是在 ruby​​ 中执行 uniq。

uniq 详细信息可在此处找到：[rails uniq 文档](http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-uniq)，您可以在[此处查看活动记录中返回 ActiveRecord::Relation 的内容](http://guides.rubyonrails.org/active_record_querying.html#retrieving-objects-from-the-database)

# c# - 我可以访问未序列化的内部类吗

> ID：14230512
> 
> 赞同：0
> 
> 时间：2013-01-09T07:49:58.737
> 
> 标签：c#, java, serialization

我有一个实现可序列化接口的类，它有一个不实现可序列化接口的内​​部类。

那么我可以在接收器处访问内部类的内容吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:54:44.057

如果内部类没有实现`Serializable`，就不能被序列化。任何这样做的尝试都会`NotSerializableException`对发件人造成影响。正如您在尝试时会发现的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T07:56:04.827

答案是否定的。您期望作为接收者的任何数据都需要序列化。内部类必须实现 ISerializable。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T07:56:12.253

> 它有一个没有实现可序列化接口的内​​部类。那么我可以在接收器处访问内部类的内容吗？

不，如果它没有标记为`Serializable`，它不能被序列化。

# angularjs - 在表单中嵌套 ng-view

> ID：14230515
> 
> 赞同：4
> 
> 时间：2013-01-09T07:50:09.830
> 
> 标签：angularjs

给定控制器

```
function ctl($scope, $http) {
  $scope.postForm = function() {
    console.log("submitting form")
  }
} 
```

和视图

```
 <form name="pform" ng-show="!error.Show">
    <div ng-view></div>
    <button type='button' value='Save' ng-click="postForm()" />
  </form> 
```

控制器方法`postForm`不会被调用，但是，如果我将表单标签移动到视图中，则会调用该方法。有没有理由不能像我预期的那样工作？是否有另一种方法来实现跨不同视图共享表单控件的目标？

**更新**

我的模块和 routeProvider 配置如下：

```
angular.module("profilemodule", [])
.config(['$routeProvider', function ($routeProvider) {
    $routeProvider
        .when("/info", { templateUrl: '/partials/profile/info.html', controller: ProfileController })
        .when("/user", { templateUrl: '/partials/profile/user.html', controller: ProfileController })
        .when("/introduction", { templateUrl: '/partials/profile/editor.html', controller: ProfileController })
        .otherwise({ redirectTo: '/info' });
}]).run(function ($rootScope, $location) {
    $rootScope.location = $location;
}) 
```

该页面包含一些基于位置服务设置的导航元素，如下所示：

```
<div class="row">
    <div class="offset2 span10">
        <ul class="nav nav-pills">
            <li ng-class="{active: location.$$path.substring(0, '/info'.length) == '/info'}"><a href="#/info" >Information</a></li>
            <li ng-class="{active: location.$$path.substring(0, '/user'.length) == '/user'}"><a href="#/user" >User</a></li>
            <li ng-class="{active: location.$$path.substring(0, '/intro'.length) == '/intro'}"><a href="#/intro" >Introduction</a></li>
        </ul>
    </div>
</div>

<form name="pform" method="POST" ng-show="!error.Show">
   <div ng-view></div>
   <button type='button' value='Save' ng-click="postForm()" />
</form> 
```

`ng-class`语句完美运行，是因为我在模块的方法中设置了属性吗`location`？`$scope``run`

谢谢，

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:50:02.090

`ng-view`with routing 使用控制器创建一个新范围，并且您无法到达子范围。您的提交操作位于父范围内，表单数据位于子范围内（由 创建`ng-view`）。

如果你想使用常见的表单控件，你可以使用，这个指令获取模板并在**当前范围内**`ng-include`呈现它。

 **将表单控件移至新模板，然后将它们包含在所有表单中。

API 参考：
[http ://docs.angularjs.org/api/ng.directive:ngInclude](http://docs.angularjs.org/api/ng.directive:ngInclude)**

# ssas - 不能使引用关系起作用

> ID：14230518
> 
> 赞同：5
> 
> 时间：2013-01-09T07:50:13.413
> 
> 标签：ssas, data-warehouse, business-intelligence, dimensions

我有三个表，一个事实和两个维度。我想在名为 InternetSales 的事实表（度量）和地理表 se 图像（schemaCubeStructure）之间建立一个引用关系。

中间表是客户。我首先创建 Geography 和 InternetSales 表，然后创建带有 Geography 字段的 Customer，以便稍后在创建参考时使用。相对。

一切正常，直到浏览多维数据集中的数据（参见图像“errorBrowseSalesCube”。如果我不建立两个表之间的关系，我会得到图像“correctBrowseSalesCube”，这就是我想要的。那是我没有得到任何数据使用 rel.ref 处理时。

有关 rel.ref，请参见图片“dimensionUsageSalesCube。

为什么我没有得到任何数据？

正确BrowseSalesCube 错误 ![正确浏览销售立方体](../Images/7419c30934e3cf3b434b8c8382d33c99.png) BrowseSalesCube ![errorBrowseSalesCube](../Images/761ccd418c6f7fd6c5e382d093a3a691.png) 维度 ![维度UsageSalesCube](../Images/622d864cd04282a70ae16003c1199575.png) UsageSalesCube schemaCubeStructure ![模式立方体结构](../Images/ab1fd724c10baae88757236c3abb571e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T18:59:37.110

在设置 Georgaphy 和 Internet Sales 之间的参考维度关系时，您使用了哪些字段？

![在此处输入图像描述](../Images/c3f4ecae7ebff51dcad627b127874861.png)

在 AdventureWorksDW 数据库中，Georgaphy 维度是客户维度的雪花。在 AdvWrks 多维数据集项目中，Microsoft 在客户 ssas 维度中包含了地理表和相应的属性（下面屏幕截图中的红色框）。但是，他们可以像您尝试做的那样，只需将 GeographyKey 添加到客户维度（下面屏幕截图中的红色箭头）

![在此处输入图像描述](../Images/9ccdacdba210dd34b3dd26f93812dd55.png)

这会在创建参考维度关系时公开 GeorgaphyKey 字段，以便您可以正确定义中间维度（客户）和参考维度（地理）之间的关系：

![在此处输入图像描述](../Images/babc947544886c96721bb7570020def9.png)

之后，您可以按地理维度属性（和用户）层次结构正确浏览 Internet Sales 事实：

![在此处输入图像描述](../Images/3b346e35c6af02b722881ef67b3bebbf.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T14:03:37.490

可以很容易地解释正确浏览销售立方体。这意味着数据不是基于 Geography 维度计算的，因此表明 Internet 销售与 Geography 之间的连接计算不正确。

我建议如下：

尝试使客户成为 Mesaure（或事实表）。不要重命名它只是衡量客户数量（可以用作客户/每个地区的计数器，也可以完全不可见）。

然后客户将显示为维度使用中的度量，然后使用客户度量表通过多对多关系将地理连接到 Internet 销售。

# .net - 找不到类型“L：StringValidation”错误

> ID：14230519
> 
> 赞同：2
> 
> 时间：2013-01-09T07:50:13.527
> 
> 标签：.net, wpf, visual-studio-2010, c#-4.0

对不起我的英语不好。我对 WPF 有问题，应用程序也有问题，它想在其中实现验证控件。我创建了一个`StringValidation`继承自`ValidationRule`. 在那里，我实现了方法验证。在 XAML 中，而我做了这样的事情：

```
<TextBox Height="23" Margin="53,39,0,0" Name="txtNazwa" VerticalAlignment="Top" TabIndex="3" MaxLines="1" GotFocus="txtNazwa_GotFocus" HorizontalAlignment="Left" Width="218"
                         ToolTip="Nazwa wybranej roli" Style="{StaticResource textBoxError}" Validation.ErrorTemplate="{StaticResource errorTemplate}">
    <TextBox.Text>
        <Binding Path="Nazwa" UpdateSourceTrigger="PropertyChanged" >
            <Binding.ValidationRules>
                <s:StringValidation ValidatesOnTargetUpdated="True"
                                                              ValidationStep="RawProposedValue"
                                                              ErrorMessage="Error"
                                                              TylkoNiePuste="True"
                                                              />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

一切都开始工作了，所以我认为没关系，而在设计器崩溃错误中：

> 错误 1 ​​找不到类型“s:StringValidation”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。

我在哪里添加：

```
xmlns:s="clr-namespace:MOJA.Kontrolka.Admin" 
```

其中命名空间与 StringValidation 类一致。我不知道那是什么，对我来说是一项非常困难的工作。任何建议问题出在哪里以及如何解决/避免？

# mysql - mysql查询喜欢

> ID：14230523
> 
> 赞同：3
> 
> 时间：2013-01-09T07:50:42.753
> 
> 标签：mysql, sql, select, sql-like

我需要在两个表上选择任何出现的单词（关键字搜索），我所做的查询是这样的：

```
SELECT t1.fname, t1.lname, t2.* FROM t1 , t2  
     WHERE t2.title LIKE "%test%" 
     OR t2.desc LIKE "%test%" 
     OR t2.inc LIKE "%test%" 
     OR t1.fname LIKE "%test%" 
     OR t1.lname LIKE "%test%" 
     AND t1.c_id = t2.c_id; 
```

由于数据库中有很多数据，这个特定的搜索（使用'test'关键字）需要几分钟，我想知道如何优化它。我尝试使用 LEFT JOIN，但似乎我做错了 - 因为结果非常延迟，但查询执行得非常快。

它是这样的：

```
SELECT * FROM t2 AS a 
  LEFT JOIN t1 AS b ON a.c_id = b.c_id 
    WHERE a.desc LIKE '%test%' 
     OR a.title LIKE '%test%' 
     OR a.inc LIKE '%test%' 
     OR b.fname LIKE '%test%'  
     OR b.lname LIKE '%test%'; 
```

任何帮助将不胜感激......谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:01:23.670

您的第一个陈述不是您想要的：该`AND`子句[优先](http://dev.mysql.com/doc/refman/5.0/en//operator-precedence.html)于`OR`您实际编写的

```
t2.title LIKE "%test%" 
OR t2.desc LIKE "%test%" 
OR t2.inc LIKE "%test%" 
OR t1.fname LIKE "%test%" 
OR (t1.lname LIKE "%test%" AND t1.c_id = t2.c_id;) 
```

这最终导致 t1 和 t2 之间的*（有些倾斜的）* [自然连接](http://en.wikipedia.org/wiki/Join_%28SQL%29#Natural_join)返回到许多行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:45:51.757

尝试**MATCH..AGAINST**在多个列中搜索**MyISAM**表：

```
SELECT * 
FROM t2 AS a 
INNER JOIN t1 AS b ON a.c_id = b.c_id 
WHERE MATCH (a.desc, a.title, a.inc, b.fname, b.lname) AGAINST ('test') 
```

检查此链接[**MYSQL 全文搜索**](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)

# php - 在 ubuntu10.10 Apache 中安装 xsl

> ID：14230524
> 
> 赞同：0
> 
> 时间：2013-01-09T07:50:46.370
> 
> 标签：php, apache

我需要快速支持，如何为 ubuntu10.10 php5 apache 安装/启用 xsl 扩展。我试过这个命令“sudo apt-get install php5-xsl”得到了一些错误

```
1) 404  Not Found
2) Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?
3)Failed to fetch http://security.ubuntu.com/ubuntu/pool/main/p/php5/php5-xsl_5.3.3-1ubuntu9.10_i386.deb  404  Not Found [IP: 91.189.92.200 80] 
```

# jsp - 在基于标签的 JSP 页面上显示来自 Flickr 的照片

> ID：14230535
> 
> 赞同：0
> 
> 时间：2013-01-09T07:51:36.883
> 
> 标签：jsp, flickr

我目前正在使用 JSP 做一个项目，用户可以在打开页面时优先选择他们想要查看的图片（例如 - 自然、公园、海洋、计算机等）。所以，我想从 Flickr 导入照片这些标签并在用户登录时显示在主页上。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:50:45.627

[从Flickr API](http://www.flickr.com/services/api/)的文档开始。此页面列出了您可以调用的所有服务，并链接到各种编程环境的工具包。

根据您的需要，您可能需要也可能不需要用户身份验证。对于我的项目，我使用[Scribe](https://github.com/fernandezpablo85/scribe-java)库来管理 OAuth 身份验证协议。

# asp.net - 如何关闭 INFO 级别的 NHibernate 日志记录？

> ID：14230536
> 
> 赞同：2
> 
> 时间：2013-01-09T07:51:43.837
> 
> 标签：asp.net, nhibernate, log4net

我在我的项目中使用 NHibernate & Net Persistence API 和 C# 和 MySql db，我有 UI 层 (ASP.NET)、业务层和数据访问层 (DAL)。对于日志记录，我使用的是 log4net。

我的 UI 层中有 web.config 文件，我在其中放置了以下代码行来禁用 NHibernate INFO 级别日志记录：

```
<log4net debug="true">
        <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
            <file value="Log.txt"/>
            <appendToFile value="true"/>
            <rollingStyle value="Date"/>
            <datePattern value="dd-MM-yyyy"/>
            <maxSizeRollBackups value="20"/>
            <maximumFileSize value="50MB"/>
            <staticLogFileName value="true"/>
            <layout type="log4net.Layout.PatternLayout">
                <conversionPattern value="%-5p %d %5rms %-22.22c{1} %-18.18M - %m%n"/>
            </layout>
        </appender>
        <root>
            <logger name="NHibernate" additivity="false">
                <level value="WARN"/>
                <appender-ref ref="RollingFileAppender"/>
            </logger>
            <level value="INFO"/>
            <appender-ref ref="RollingLogFileAppender"/>            
        </root>
    </log4net> 
```

但它不工作！我仍然可以看到 INFO 级别的日志，日志中的一些行是：

```
INFO  2013-01-09 01:15:06,383  6993ms Environment            lambda_method      - NHibernate 3.2.0.4000 (3.2.0.4000)
INFO  2013-01-09 01:15:06,386  6996ms Environment            lambda_method      - hibernate-configuration section not found in application configuration file
INFO  2013-01-09 01:15:06,387  6997ms Environment            lambda_method      - Bytecode provider name : lcg
INFO  2013-01-09 01:15:06,388  6998ms Environment            lambda_method      - Using reflection optimizer
INFO  2013-01-09 01:15:07,171  7781ms Dialect                lambda_method      - Using dialect: NHibernate.Dialect.MySQLDialect
INFO  2013-01-09 01:15:07,390  8000ms Dialect                lambda_method      - Using dialect: NHibernate.Dialect.MySQLDialect
INFO  2013-01-09 01:15:07,407  8017ms Mappings               lambda_method      - duplicate import: JDAL.Impl.Entities.EntityName, JDAL, Version=1.0.0.0, 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T08:39:33.930

`logger`节点不正确。试试这种方式：

```
<root>
   <level value="INFO"/>
   <appender-ref ref="RollingLogFileAppender"/>            
</root>
<logger name="NHibernate" additivity="false">
    <level value="WARN"/>
    <appender-ref ref="RollingFileAppender"/>
</logger> 
```

# excel - 如何使用 open xml C# 在 Excel 中禁用网格线？

> ID：14230538
> 
> 赞同：3
> 
> 时间：2013-01-09T07:52:01.897
> 
> 标签：excel, c#-3.0, openxml, formats, gridlines

我想在 excel 中禁用 GridLines，并使用 C# 中的打开 xml 将自定义边框放置到 excel 单元格中

我已经尝试使用下面的代码，但是当我打开 Excel 时抛出异常，异常是“修复部分：/xl/worksheets/sheet.xml 部分带有 XML 错误。加载错误。第 1 行，第 0 列。”

```
 using (SpreadsheetDocument xl = SpreadsheetDocument.Create(sFile, SpreadsheetDocumentType.Workbook))
            {
                WorkbookPart wbp = xl.AddWorkbookPart();
                WorksheetPart wsp = wbp.AddNewPart<WorksheetPart>();
                Workbook wb = new Workbook();
                FileVersion fv = new FileVersion();
                fv.ApplicationName = "Microsoft Office Excel";
                Worksheet ws = new Worksheet();
                SheetViews sheetViews = new SheetViews();

                SheetView sheetView = new SheetView();
                sheetView.ShowGridLines = new BooleanValue(false);
                sheetViews.Append(sheetView);
                ws.Append(sheetViews);

                WorkbookStylesPart wbsp = wbp.AddNewPart<WorkbookStylesPart>();
                //// add styles to sheet
                wbsp.Stylesheet = CreateStylesheet();
                wbsp.Stylesheet.Save();
                //// add styles to sheet
                ////wbsp.Stylesheet = GenerateStyleSheet();

                //wbsp.Stylesheet.Save();
                Columns columns = new Columns();
                columns.Append(CreateColumnData(1, 1, 25));
                ws.Append(columns);

                //// generate rows
                SheetData sd = CreateSheetData(products);
                ws.Append(sd);
                wsp.Worksheet = ws;
                wsp.Worksheet.Save();

                MERGEiNITIALcELLS(wsp);

                wb.Append(fv);
                CreateSheet(wbp, wsp, wb);
                xl.WorkbookPart.Workbook = wb;
                xl.WorkbookPart.Workbook.Save();

                xl.Close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:26:16.757

SheetView 类的 WorkbookViewId 属性是必需的属性/属性。尝试这个：

```
SheetView sheetView = new SheetView();
sheetView.ShowGridLines = new BooleanValue(false);
sheetView.WorkbookViewId = 0;
sheetViews.Append(sheetView);
ws.Append(sheetViews); 
```

这使用第一个（默认）工作簿视图。不用担心，您不必显式创建 BookViews 类的 WorkbookView 子级，它是 Workbook 的子级。当然，除非你愿意。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-08T06:04:43.277

我尝试过这种方式，但它失败了，但能够识别出缺少的东西。默认情况下，从头开始创建电子表格时，没有默认工作簿视图。所以需要创建新的工作簿视图。

```
spreadSheet.WorkbookPart.Workbook = new Workbook(new BookViews(new WorkbookView())); 
```

然后创建图纸视图。

```
worksheetPart.Worksheet = new Worksheet(new SheetViews(new SheetView(){WorkbookViewId=0,ShowGridLines=new BooleanValue(false)}), new SheetData()); 
```

注意：在 Excel 工作簿中创建列时，应按顺序创建元素。顺序是

*   图纸视图
*   图纸视图格式
*   列
*   工作表数据

享受 Open XML SDK，但微软没有提供非常强大的文档。

# php - 我可以在使用 fpdf 库在 pdf 上显示图像时将图像拆分到下一页吗？

> ID：14230540
> 
> 赞同：2
> 
> 时间：2013-01-09T07:52:13.073
> 
> 标签：php, fpdf

我正在用 php 5 编写代码来生成一个包含图像的 pdf 文件。我正在显示全长图像。图像一到达页面末尾（即 pdf 页面的底部）就会被剪切。我希望图像从下一页继续显示。这样即使大于 pdf 页面的大小，也可以看到完整的图像。这可能吗？如果是，请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:09:33.317

我不确定是否可以单独使用 fdpf 来完成。该`Image()`功能不支持部分图像；所以你需要找到一种预先分割图像的方法（使用*GD*或类似的东西。）

简而言之，您需要找出每页要打印多少图像（即 PDF 页面的可打印区域有多高，不包括页眉、页脚等），然后创建一个包含正确剪辑的临时图像的图像。这是您使用该`Image()`功能添加的内容。

如果使用 GD，以下是如何将图像的一部分复制到另一个图像中：

[GD imagecopy() 函数](http://www.php.net/manual/en/function.imagecopy.php)

# visual-c++ - XMMATRIX operator() 使用 xnamath.h 但不使用 DirectXMath.h

> ID：14230546
> 
> 赞同：5
> 
> 时间：2013-01-09T07:52:42.787
> 
> 标签：visual-c++, directx, directx-11

我是 DirectX 编程和 Visual C++ 的新手，在将我从 xnamath.h 找到的示例迁移到 DirectXMath.h 时遇到问题。我正在使用 Visual Studio 2012。

代码的目的只是初始化一个 XMMATRIX，然后在控制台中显示它。原始代码如下所示（它工作得很好）：

```
#include <windows.h>
#include <xnamath.h>
#include <iostream>
using namespace std;

ostream& operator<<(ostream& os, CXMMATRIX m)
{
    for(int i = 0; i < 4; ++i)
    {
        for(int j = 0; j < 4; ++j)
            os << m(i, j) << "\t";
        os << endl;
    }
    return os;
}

int main()
{
    XMMATRIX A(1.0f, 0.0f, 0.0f, 0.0f,
               0.0f, 2.0f, 0.0f, 0.0f,
               0.0f, 0.0f, 4.0f, 0.0f,
               1.0f, 2.0f, 3.0f, 1.0f);

    cout << "A = " << endl << A << endl;

    return 0;
} 
```

当我运行程序时，它会给出以下输出：

```
A =
1       0       0       0
0       2       0       0
0       0       4       0
1       2       3       1

Press any key to continue . . . 
```

但是，当我将标头更改为 DirectXMath 时，它不再起作用：

```
#include <windows.h>
#include <iostream>
#include <DirectXMath.h>
#include <DirectXPackedVector.h>
using namespace DirectX; 
using namespace DirectX::PackedVector;
using namespace std;

ostream& operator<<(ostream& os, CXMMATRIX m)
{
    for(int i = 0; i < 4; ++i)
    {
        for(int j = 0; j < 4; ++j)
            os << m(i, j) << "\t";
        os << endl;
    }
    return os;
}

int main()
{
    XMMATRIX A(1.0f, 0.0f, 0.0f, 0.0f,
               0.0f, 2.0f, 0.0f, 0.0f,
               0.0f, 0.0f, 4.0f, 0.0f,
               1.0f, 2.0f, 3.0f, 1.0f);

    cout << "A = " << endl << A << endl;

    return 0;
} 
```

当我尝试编译时，我收到一条错误`os << m(i, j) << "\t";`消息：

```
error C2064: term does not evaluate to a function taking 2 arguments 
```

当我将鼠标悬停在它下方的红色波浪线上时，`m(i, j)`它告诉我：

```
DirectX::CXMMATRIX m
Error: call of an object of a class type without appropriate operator() or conversion function to pointer-to-function type 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-29T04:27:36.597

我更改了示例代码以使用

```
ostream& operator<<(ostream& os, CXMMATRIX m)
{
    for(int i = 0; i < 4; ++i)
    {
            for(int j = 0; j < 4; ++j)
                os << m.r[i].m128_f32[j] << "\t";
            os << endl;
    }
    return os;
} 
```

这将具有与旧 xnamath 相同的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:02:54.283

这取决于您用于 DirectXMath 的版本，您可以定义 _XM_NO_INTRINSICS_ 以获得您想要的结果。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.reference.xmmatrix(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.reference.xmmatrix(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-06T20:34:00.787

在 Direct X 11+ 中，直接访问矩阵的能力为

```
matrix (row, column) 
```

由于性能问题，已被删除。Microsoft 建议通过`r`成员访问这些值。我建议使用

```
XMStoreFloat4 (row, column) 
```

对于 4x4 矩阵，您无需担心数据类型。

```
ostream& operator<< (ostream& os, CXMMATRIX m)
{
    for (int i = 0; i < 4; i++)
    {
        XMVECTOR row = m.r[i];
        XMFLOAT4 frow;
        XMStoreFloat4(&frow, row);

        os << frow.x << "\t" << frow.y << "\t" << frow.z << "\t" << frow.w << endl;
    }

    return os;
} 
```

使用时要小心，`_XM_NO_INTRINSICS_`因为这不仅会影响访问矩阵值，还可能会影响性能敏感代码中的性能，并可能影响其他操作。DirectXMath 是 XNAMath 的一个跳跃……升级旧代码时，可能会很痛苦，但值得。

# jquery - jQuery：调整大小时流体布局中的等高列

> ID：14230552
> 
> 赞同：0
> 
> 时间：2013-01-09T07:53:18.067
> 
> 标签：jquery

我遇到了流体等高列布局的问题。

```
jQuery(function($){

        var qMetaHeight, qBodyHeight, qAnswerCount; 

        function gameResize() {

            qMetaHeight = $('.taskMeta').height();
            qBodyHeight = $('.taskBody').height();
            qAnswerCount = $('.answerCount').height();
            if( qMetaHeight > qBodyHeight ) {
                $('.taskBody').height(qMetaHeight);
            }
            else if ( qMetaHeight < qBodyHeight )  {
                $('.taskMeta').height(qBodyHeight);
                $('.bestMatches').height(qBodyHeight-qAnswerCount);
            }

            $('#test').html("taskMeta: " + qMetaHeight + "<br>taskBody: " + qBodyHeight + "<br>answerCount: " + qAnswerCount);
        };
        gameResize();
        $(window).resize(gameResize);

}); 
```

[http://jsfiddle.net/klavina/QPkxu/1/](http://jsfiddle.net/klavina/QPkxu/1/)

这在页面加载时非常有效，但在页面调整大小时却惨遭失败。

2个问题：

*   有时（并非总是）当减小窗口的宽度时它根本不起作用：http: [//grab.by/iRcm](http://grab.by/iRcm)。

*   当它确实起作用并且用户大大减小窗口的大小然后再次增加它时 - 高度保持在最大值： http: [//grab.by/iRcq](http://grab.by/iRcq)。我猜我需要先重置jQuery设置的高度，我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:12:59.043

看到这个：http: [//jsfiddle.net/QPkxu/7/](http://jsfiddle.net/QPkxu/7/)

```
jQuery(function($){

        var qMetaHeight, qBodyHeight, qAnswerCount; 
        var org_qMetaHeight = $('.taskMeta').height();
        var org_qBodyHeight = $('.taskBody').height();
        $('.taskBody').css("min-height", $('.taskMeta').height());
        function gameResize() {

            qMetaHeight = $('.taskMeta').height();
            qBodyHeight = $('.taskBody').height();
            qAnswerCount = $('.answerCount').height();
    $('.taskMeta').height(qBodyHeight);
    $('.bestMatches').height(qBodyHeight-qAnswerCount);
            //if( qMetaHeight > qBodyHeight ) {
                //$('.taskBody').height(qMetaHeight);
            //}
        //  else if ( qMetaHeight < qBodyHeight )  {          
                //$('.taskMeta').height(qBodyHeight);
                //$('.bestMatches').height(qBodyHeight-qAnswerCount);
            //}

            $('#test').html("taskMeta: " + qMetaHeight + "<br>taskBody: " + qBodyHeight + "<br>answerCount: " + qAnswerCount);
        };
        gameResize();
        $(window).resize(gameResize);

}); 
```

CSS：

```
 .taskBody {
        background: #f00;
        margin-right: 242px;
    }

    .taskMeta {
        float: right;
        width: 232px;
        background: #f00;
    }

    .answerCount {
        background: #000;
        color: #fff;
    }

    .bestMatches {
        background: #ccc;
    } 
```

# jquery - jQuery 悬停效果适用于 jsfiddle 但不适用于测试站点

> ID：14230555
> 
> 赞同：0
> 
> 时间：2013-01-09T07:53:23.047
> 
> 标签：jquery

我正在研究 jquery`<li>`悬停效果，它正在 jsfiddle 上工作，但不在测试站点上，即“隐藏”div 未在悬停时显示。

[http://jsfiddle.net/rwone/p4xXH/](http://jsfiddle.net/rwone/p4xXH/)

两者都有相同的资源，html 和 css，唯一的区别是我`<script>`在测试站点的头部区域的 js 周围添加了开始和结束标记。

firebug 没有错误。

是否可以使用 jsfiddle 中的所有 js 代码并仅`<script>`在其周围包裹标签，或者这是否会导致一些可能阻止悬停效果起作用的语法错误？

这是我在测试站点上使用的代码（没有可用的链接）。

```
<script>
// begin hover functionality
$(".magic li").each(function() {

var hiddenDiv = $(this).find(".card"),
parentElement = $(this),
api = {};

api.isOpen = false;

api.timeout = null;

api.position = function(){
hiddenDiv.css({
"top": parentElement.offset().top - $("#non_scrollable_area").offset().top - 106,
"left": parentElement.offset().left - $("#non_scrollable_area").offset().left - 94 
});
}

api.resetTimeout = function(){

clearTimeout( api.timeout );
}

api.startShowing = function(){

api.resetTimeout();

api.timeout = setTimeout(function(){
api.show();        
},200);
}

api.startHiding = function(){

api.resetTimeout();

api.timeout = setTimeout(function(){
api.hide();        
},150);
}
api.show= function(){

if(!api.isOpen){

api.position();

hiddenDiv .fadeIn(300);

api.isOpen = true;

// $("#isotope_container").bind("scroll.hiddendiv",api.position);

}
}

api.hide = function(){

if( api.isOpen ) {
api.isOpen = false;
// $("#isotope_container").unbind("scroll.hiddendiv");     
hiddenDiv.fadeOut(100);
}

}

hiddenDiv.bind("mouseenter", function() {

api.resetTimeout();

}).bind("mouseleave", function() {

api.startHiding();

}).css("z-index", 100).appendTo("#non_scrollable_area"); 

$(this).data("hiddenApi",api );

}).bind("mouseenter", function() {

var api = $(this).data("hiddenApi");

api.startShowing();

}).bind("mouseleave", function() { // start closing timeout once mouse leaves isotope element

var api = $(this).data("hiddenApi");

api.startHiding();

});

// begin custom scrollbar
(function($){
$(document).ready(function(){
$(".holder_a, .holder_b, .holder_c, .holder_d").mCustomScrollbar({
set_width:false, 
set_height:false, 
horizontalScroll:true, 
scrollInertia:550, 
scrollEasing:"easeOutCirc", 
mouseWheel:"auto", 
autoDraggerLength:true, 
scrollButtons:{ 
enable:false, 
scrollType:"continuous", 
scrollSpeed:20, 
scrollAmount:40 
},
advanced:{
updateOnBrowserResize:true, 
updateOnContentResize:false, 
autoExpandHorizontalScroll:false, 
autoScrollOnFocus:true 
},
callbacks:{
onScrollStart:function(){}, 
onScroll:function(){}, 
onTotalScroll:function(){}, 
onTotalScrollBack:function(){}, 
onTotalScrollOffset:0, 
whileScrolling:false, 
whileScrollingInterval:30 
}
});
});
})(jQuery);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T07:57:37.230

在您的小提琴中，代码已`onload`根据“框架”下左侧的下拉列表包含在处理程序中。在您的测试站点中没有`onload`处理程序。这就是他们行为不同的原因。

您需要将脚本包含在文档*末尾*`</body>`（就在结束标记之前）或将其包装在`$(document).ready()`处理程序中。

如果你把你的脚本放在`<head>`没有准备好文档的情况下（或者`onload`对于老式的非 jQuery 代码），那么它就不能访问任何元素，因为它们还没有被解析并添加到 DOM 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T07:57:59.317

```
$( function() {

// All Your JS Code here

}); 
```

在 JS Fiddle 他们已经拥有`$(window).load( function() { });`但你没有，`$(document).ready( function() { });`或者`$( function() { });`这是添加`$(document).ready( function() { });`事件处理程序的另一种方式！

**我为什么要使用它？**

**Ans：**一旦文档完全加载，它将所有事件处理程序绑定到关联的元素。其他事件也用于此目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:01:48.277

我已经实施了@jai 的第一个评论建议，它似乎奏效了：

```
put everything in $(document).ready(function(){--here--}); 
```

非常感谢，这个问题应该是不到三十秒才得到几个答案，谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T08:03:01.240

尝试使用这个：

```
<script type='text/javascript'>
  $(document).ready(function(){
    $(".magic li").each(function () {

    var hiddenDiv = $(this).find(".card"),
    parentElement = $(this),
    api = {};

    api.isOpen = false;

    api.timeout = null;

    api.position = function () {
        hiddenDiv.css({
            "top": parentElement.offset().top - $("#non_scrollable_area").offset().top - 106,
            "left": parentElement.offset().left - $("#non_scrollable_area").offset().left - 94
        });
    }

    api.resetTimeout = function () {

        clearTimeout(api.timeout);
    }

    api.startShowing = function () {

        api.resetTimeout();

        api.timeout = setTimeout(function () {
            api.show();
        }, 200);
    }

    api.startHiding = function () {

        api.resetTimeout();

        api.timeout = setTimeout(function () {
            api.hide();
        }, 150);
    }
    api.show = function () {

        if (!api.isOpen) {

            api.position();

            hiddenDiv.fadeIn(300);

            api.isOpen = true;

        // $("#isotope_container").bind("scroll.hiddendiv",api.position);

        }
    }

    api.hide = function () {

        if (api.isOpen) {
            api.isOpen = false;
            // $("#isotope_container").unbind("scroll.hiddendiv");     
            hiddenDiv.fadeOut(100);
        }

    }

    hiddenDiv.bind("mouseenter", function () {

        api.resetTimeout();

    }).bind("mouseleave", function () {

        api.startHiding();

    }).css("z-index", 100).appendTo("#non_scrollable_area");

    $(this).data("hiddenApi", api);

}).bind("mouseenter", function () {

    var api = $(this).data("hiddenApi");

    api.startShowing();

}).bind("mouseleave", function () { // start closing timeout once mouse leaves isotope element

    var api = $(this).data("hiddenApi");

    api.startHiding();

   });
});
</script> 
```

# c++ - 插入 unordered_map 时没有匹配函数

> ID：14230556
> 
> 赞同：4
> 
> 时间：2013-01-09T07:53:34.167
> 
> 标签：c++, boost, hash, unordered-map

我声明`unordered_map`如下：

```
boost::unordered_map<std::array<char, 20>, t_torrent> torrent_ins; 
```

然后在其中插入一个元素（如果键不存在，此映射将返回新元素的引用）

```
t_torrent& torrent_in = torrent_ins[to_array<char,20>(in)]; 
```

但我收到一条错误消息：

```
../src/Tracker/torrent_serialization.cpp:30:   instantiated from here/usr/local/include/boost/functional/hash/extensions.hpp:176: error: no matching function    for call to ‘hash_value(const std::array<char, 20ul>&)’ 
```

你们能帮我解释一下这个错误吗？非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T07:56:34.390

这是因为 没有“默认”散列函数`std::array<char, 20>`，至少没有实现提供。您必须提供散列函数，`std::array<char, 20>`然后您的代码才能工作。

正如您在[std::unordered_map](http://en.cppreference.com/w/cpp/container/unordered_map)中看到的那样：

```
template<
    class Key,
    class T,
    class Hash = std::hash<Key>,
    class KeyEqual = std::equal_to<Key>,
    class Allocator = std::allocator< std::pair<const Key, T> >
> class unordered_map; 
```

您必须提供`Hash`类型`Key`以提供您的自定义哈希函数。

# qt - 如何让cmake找到一个包配置文件

> ID：14230565
> 
> 赞同：5
> 
> 时间：2013-01-09T07:54:34.440
> 
> 标签：qt, cmake, pyside

我正在尝试制作一个调用的项目

```
find_package(Shiboken REQUIRED) 
```

cmake抱怨

```
CMake Error at CMakeLists.txt:5 (find_package):
  By not providing "FindShiboken.cmake" in CMAKE_MODULE_PATH this project has
  asked CMake to find a package configuration file provided by "Shiboken",
  but CMake did not find one.

  Could not find a package configuration file provided by "Shiboken" with any
  of the following names:

    ShibokenConfig.cmake
    shiboken-config.cmake

  Add the installation prefix of "Shiboken" to CMAKE_PREFIX_PATH or set
  "Shiboken_DIR" to a directory containing one of the above files.  If
  "Shiboken" provides a separate development package or SDK, be sure it has
  been installed. 
```

我确实已将 Shiboken 编译并安装到 C:\Program Files\shiboken。我可以看到文件夹 C:\Program Files\shiboken\lib\cmake\Shiboken-1.1.2 下有像 ShibokenConfig.cmake、ShibokenConfig-python2.7.cmake、ShibokenConfigVersion.cmake 这样的 cmake 文件

如何让 cmake 知道它应该在该文件夹中搜索 ShibokenConfig.cmake？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T09:12:01.430

Shiboken 的一位贡献者通过电子邮件回答了我的问题，我确认它正在工作。

解决方案：

```
cmake .. -G"MinGW Makefiles" -DShiboken_DIR=C:\shiboken\lib\cmake\Shiboken-1.1.2 
```

注意：我把 C:\Program Files\shiboken 复制到 C:\shiboken 是因为 cmake 报错“C:\Program Files”（可能是里面有空格）。

# hibernate - 休眠查询自动刷新

> ID：14230568
> 
> 赞同：4
> 
> 时间：2013-01-09T07:54:43.690
> 
> 标签：hibernate

我们刚刚对我们的 Web 应用程序进行了大规模升级 - 从 jboss 4 跳转到 jboss 7。我们也从 hibernate 3 迁移到了 hibernate 4。

我遇到了这种奇怪的行为（在休眠 3 下没有发生）： 1\. 我运行一个 hql（假设 hql 过滤状态字段 - status = 1）并取回一个对象。2\. 我将其状态更改为 2。 3\. 我再次运行 hql 并获得相同的对象（它甚至是相同的实例 - 状态已更改！） - 不再符合条件！

我发现问题是在查询之前会话没有自动刷新，这很奇怪，因为会话有flushmode.auto。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:10:17.577

您可以尝试将刷新模式显式设置为适当的值，其他模式可用。

```
session.setFlushMode(FlushMode.ALWAYS); 
```

也可以手动冲洗`session.flush()`

从文档：

> *   **ALWAYS ：**在每次查询之前刷新会话。
>     
>     
> *   **AUTO ：*****有时会***在查询执行之前刷新会话，以确保查询永远不会返回过时状态。

（我强调）

* * *

**编辑：**我还没有尝试在应用程序级别应用它，但您可以在 persistence.xml 中指定它

```
<property name="org.hibernate.FlushMode" value="always" /> 
```

在 hibernate.cfg.xml 中作为

```
<property name="hibernate.flushMode">ALWAYS</property> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T14:02:04.790

我发现了问题，它是事务工厂类（属性名称 - hibernate.transaction.factory_class）。它基本上归结为这样一个事实，即在配置了 JtaTransactionFactory 的 JTA 场景中，hibernate 不会检测到它在事务中，因此不会执行中间刷新。将其更改为 org.hibernate.transaction.CMTTransactionFactory 时，一切正常。

# c# - 哪些 .NET ORM 对复合键有很好的支持

> ID：14230569
> 
> 赞同：-1
> 
> 时间：2013-01-09T07:54:49.797
> 
> 标签：c#, orm, composite-key

我们有一个大型现有数据库，几乎完全使用复合主键和外键。我们的任务是编写一个与该数据库（在 SQL Server 2012 上）对话的大型 C# 应用程序。

我们正在考虑使用 ORM，但我所知道的大多数 ORM 似乎不鼓励（或明确不支持）使用复合键（例如[NHibernate](http://nhforge.org/blogs/nhibernate/archive/2010/06/30/nhibernate-and-composite-keys.aspx)、[Massive](https://stackoverflow.com/questions/9498590/how-to-update-a-table-with-composite-keys-using-massive-orm)、[PetaPoco](http://jamesheppinstall.wordpress.com/2012/04/19/petapoco-in-the-wild/)等）。

性能和吞吐量对于此应用程序很重要。

哪些 ORM（如果有）对复合键有很好的支持，并且启动性能很好？你会推荐哪个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:24:25.347

实体框架支持复合键。例如，这是一个具有复合键的实体：

```
public class MyEntity
{
    public int NodeId { get; set; } // this is a part of entity key
    public int ItemId { get; set; } // this is a part of entity key
    public string Name { get; set; }
} 
```

...其代码优先方法的配置，使用流利的 API：

```
internal sealed class MyEntityConfiguration : EntityTypeConfiguration<MyEntity>
{
        public MyEntityConfiguration()
        {
            // this is a composite key configuration
            HasKey(_ => new { _.NodeId, _.ItemId });

            Property(_ => _.NodeId);
            Property(_ => _.ItemId);
            Property(_ => _.Name);
        }
} 
```

...和查询示例：

```
context.MyEntities.SingleOrDefault(myEntity => myEntity.NodeId == 1 && myEntity.ItemId == 1); 
```

EF 中的复合键有什么不好的地方：

*   您不能为键声明单独的类型。因此，如果您的密钥包含三个属性，那么您将拥有三个属性而不是一个密钥属性；
*   如果允许对现有实体的密钥进行更改（您可以更改一个密钥属性，而忘记另一个），您应该编写自己的修复代码以实现密钥一致性。

我不知道 EF 和复合键的任何性能问题。我相信，这是数据库引擎的责任。

# tridion - Tridion 和 REL：在页面的 PublishedUrl 属性中更新页面文件名

> ID：14230571
> 
> 赞同：4
> 
> 时间：2013-01-09T07:55:02.373
> 
> 标签：tridion, odata, tridion-2011, tridion-content-delivery

我们有一个页面的 url 需要本地化/翻译的要求。我们现有的机制依赖于实际发布的 url 来通过 oData 检索页面。用一个简化的例子来澄清一下：我们在前端有一些逻辑，它接受请求 url（它没有文件扩展名，附加一个 .html 扩展名，例如：

```
/my-awesome-path/my-awesome-page 
```

现在变成

```
/my-awesome-path/my-awesome-page.html 
```

然后，该逻辑使用查询从 oData 中提取页面

```
/odata.svc/Pages?$filter=url eq '/my-awesome-path/my-awesome-page.html' 
```

我们有更多的逻辑来解析这个 SEO 友好的 url 并获取 MVC 控制器函数参数和其他诸如此类的东西，但这与这里无关。

我们的要求是我们不能对页面进行本地化以为其提供翻译后的 url，因为这意味着整个页面无法在父 Web 出版物中进行管理。

为了获得通向页面文件名的本地化路径，我们只需本地化 SG。困难在于页面文件名。在页面的元数据上，我们有一个链接的“可本地化元数据”组件，其中包含一个用于提供本地化页面文件名的字段。

我们要做的是在发布/部署过程中更新页面的 URL 属性，以使用来自此链接元数据组件的本地化页面文件名更新页面的已发布 url（假设我们在任何阶段都可以访问本地化文件名字段的值在开始发布到承诺部署之间）。

我已经尝试通过自定义解析器执行此操作，但是，在此级别上，CM 已建立 page.PublishedUrl 属性并且无法覆盖。所以更新 page.FileName 属性并没有做任何有用的事情。

我还尝试将 Broker DB 中 PAGE 表中的 URL 列直接更新为不同的名称，似乎一切都在继续工作，包括动态链接和取消发布页面。显然写一个存储扩展或者一个部署扩展来通过jdbc直接更新数据库是不可接受的。

以下是我正在考虑的选项： 1) 尝试部署程序扩展并使用 Tridion API 更新 url 属性 2) 尝试编写自定义渲染器来执行 url 替换逻辑而不实际更新代理中的 url。我不赞成这样做，因为每次都需要请求时间处理。

我的问题是：更新页面 url 属性的最合适方法是什么？使用 Tridion API 编写自定义部署程序来更新 URL 属性是否会像 Resolver 那样导致我陷入死胡同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:48:14.990

按照上面 Nuno 评论中的要点，我决定不使用自定义部署程序，并使用事件系统的 2 个事件订阅解决了这个问题。在页面发布时，我首先本地化页面，从本地化链接元数据组件中获取本地化文件名并保存页面。然后在随后的事件中，我只是取消了页面的本地化。这是我的工作代码：

```
[TcmExtension("Publish or Unpublish Events")]
public class PublishOrUnpublishEvents : TcmExtension
{
    public PublishOrUnpublishEvents()
    {
        EventSystem.Subscribe<Page, PublishEventArgs>(SetLocalizedPageFileName, EventPhases.Initiated);
        EventSystem.Subscribe<Page, SetPublishStateEventArgs>(UnlocalizePageOncePublished, EventPhases.Initiated);
    }

    public void SetLocalizedPageFileName(Page page, PublishEventArgs args, EventPhases phase)
    {
        string localFilename = GetLocalilizedFileNameFromPageMetadata(page);
        if (!string.IsNullOrEmpty(localFilename))
        {
            page.Localize();
            if (page.TryCheckOut())
            {
                page.FileName = localFilename;
                page.Save(true);
            }
        }
    }

    public void UnlocalizePageOncePublished(Page page, SetPublishStateEventArgs args, EventPhases phase)
    {
        string localFilename = GetLocalilizedFileNameFromPageMetadata(page);
        if (!string.IsNullOrEmpty(localFilename))
            page.UnLocalize();
    }

    private string GetLocalilizedFileNameFromPageMetadata(Page page)
    {
        string localFilename = string.Empty;
        if (page.Metadata != null)
        {
            ItemFields fields = new ItemFields(page.Metadata, page.MetadataSchema);
            if (fields.Contains("LocalizableMeta"))
            {
                ComponentLinkField localMetaField = fields["LocalizableMeta"] as ComponentLinkField;
                Component component = localMetaField.Value;
                ItemFields compFields = new ItemFields(component.Content, component.Schema);
                if (compFields.Contains("LocalizedPageFilename"))
                {
                    SingleLineTextField fileNameTextField = compFields["LocalizedPageFilename"] as SingleLineTextField;
                    localFilename = fileNameTextField.Value;
                }
            }
        }
        return localFilename;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:41:01.823

也许另一种选择：

存储本地化 URL 具有页面的附加元数据字段，为已发布页面保持相同的物理 URL。

我看到您的要求是避免子页面的本地化，我喜欢在 wordpress 中可以全局输入 URL 工作方式的方式，例如：

/我的网站/ `%postname%`/

在 SDL Tridion 中构建类似的东西会很酷，其中可以提取内容标题并在内容 URL 中使用。

无论哪种方式，如果您必须编写一个采用“友好 URL”并查找实际 URL 的系统，我认为这将非常简单。

# android - apk文件中classes.dex文件的作用

> ID：14230573
> 
> 赞同：51
> 
> 时间：2013-01-09T07:55:22.130
> 
> 标签：android, apk

使用 WinRar（打开压缩文件的软件）打开 APK 文件时。我在 APK 中打包了一堆文件。其中`classes.dex`之一。我的问题是这个文件的作用是什么，如果我们修改/删除同一个文件会影响APK吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-01-09T08:00:24.470

要制作APK文件，首先要编译Android程序，然后将其所有部分打包到一个文件中。这包含该程序的所有代码（这些是`.dex files`）、资源、资产、证书和清单文件。

程序通常`Java`以`bytecode`. 然后在设备上安装之前将它们转换`Java Virtual Machine-compatible .class files`为`Dalvik-compatible .dex`（Dalvik 可执行文件）文件。紧凑的 Dalvik 可执行文件格式旨在适用于内存和处理器速度受限的系统。

*   classes.dex：编译成Dalvik虚拟机可理解的dex文件格式的类

> 由于 .dex 文件包含 APK 资源，因此对这些文件的任何编辑都会直接影响 APK。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-09T07:58:58.077

**.dex 文件** 编译的 Android 应用程序代码文件。

[来自 Android API 指南](http://developer.android.com/guide/appendix/glossary.html)

Android 程序被编译成`.dex (Dalvik Executable)`文件，这些文件又被压缩到设备上的单个**.apk**文件中。.dex 文件可以通过自动翻译用 Java 编程语言编写的已编译应用程序来创建。

是的，如果您删除这些文件，它将影响 APK。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-02-14T11:53:22.097

classes.dex 本质上是所有应用程序逻辑。给定应用程序的代码是用 java 编写的，然后编译为类文件，然后这些类文件被交叉编译（经过许多优化）为 dalvik VM 格式。请注意，可能还有一些 .so 文件也是应用程序代码，但这些文件是在使用 NDK 时生成的。您不能删除此文件。但是，您可以通过首先运行此实用程序来更改它[https://github.com/JesusFreke/smali](https://github.com/JesusFreke/smali)它将从这个编译的 dex 生成 smali 代码，这有点类似于 java 并且可以理解。您还可以使用工具 ApkOneClick 或 ApkMultiTool 从 smali 文件中获取 Java 源代码，但这些可能并不完美，需要进一步修复。当您更改您想要的代码时，您应该再次构建 classes.dex 并将它们放入您拥有的现有 zip/apk 文件中。请注意，现有的证书文件 (META-INF) 将不再有效，您需要删除此文件夹并重新签名 apk 包才能将其安装在手机或模拟器上。

有关更多信息，您也可以查看此问题[Android 中的 .dex 文件是什么？](https://stackoverflow.com/questions/7750448/dex-file-in-android)

这也是使用现有工具反汇编 dex 文件的一个很好的教程[http://blog.vogella.com/2011/02/14/disassemble-android-dex](http://blog.vogella.com/2011/02/14/disassemble-android-dex)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-12-07T14:51:48.747

> 这个文件的作用是什么？

Android中的作用`classes.dex`类似于纯Java中的JAR文件。这是一个包含字节码的文件。在 Android 的情况下，字节码是 Dalvik 字节码，它不同于 Java 字节码。

> 如果我们修改/删除同一个文件会影响apk吗？

如果您修改`classes.dex`，您正在修改程序行为，重新打包后可能会或可能不会工作。如果你 delete `classes.dex`，那么你的应用程序没有代码，你不应该期望它工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-16T05:19:37.863

apk 中的 .dex 文件是由应用程序代码中的所有 java 类组成的压缩文件。它与 jar 文件不同。jar 文件是隔离的 .class 文件的集合。如果我们解压缩 .jar，我们将分别获取所有类。另一方面，.dex 文件是由应用程序代码中的所有 .class 文件组成的单个文件。

代码编译流程：多个 .java 文件 --> 多个 .classes 文件 --> 一个 .dex 文件

.dex 文件是由 DVM 执行的可执行文件...Dalvik 虚拟机，它是 Android 的运行时。

.dex 永远不会包含资源。资源在 .apk 的 /res 文件夹中单独维护

# php - 如何将每个值从 foreach 循环传递到 mysql 查询

> ID：14230574
> 
> 赞同：0
> 
> 时间：2013-01-09T07:55:21.963
> 
> 标签：php

目的是从 foreach 循环中获取每个值（电话号码）并使用它来查询 mysql 数据库，以便我也可以获得与该号码对应的名称

```
<?php
if (!empty($_POST)) {
$text = $_POST['message'];
$to  = $_POST['recipients'];//this is an array  

include('mysql_connect.php');//connect to my database
mysql_select_db("my_database");

$to = explode(", ",$to);
$to = implode(" ",$to); 

if ($to != '' && $text != "") {
    $phonenumbers = explode(';', $to);
    if (!empty($phonenumbers)) {
        foreach ($phonenumbers as $phonenumber) {;

  $construct = "SELECT * FROM my_table WHERE mobile='$phonenumber'";//this is where my problem is, $phonenumber!! 
  $check = mysql_query($construct);
  while($row = mysql_fetch_array($check)){
  $name = $row[recipient_name];}//My aim is to use this name in the message body

            $filename = "/send_message";//keep all messages in this file
            $handle = fopen($filename .".LOCK", "x+");
            if ($handle != false) {
                fwrite($handle, "To: $phonenumber\n");  
                $text = "$name".$_POST['message'];//Every message   should start with recipient name
                fwrite($handle, $text);
                fclose($handle);
            }
        }
    }
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:01:27.610

您可以在 SQL 查询中使用 IN 关键字。所以你的代码看起来像

```
$construct = "SELECT * FROM my_table WHERE mobile IN (";
if (!empty($phonenumbers)) {
    foreach ($phonenumbers as $phonenumber) {
      $construct = $construct + $phonenumber + ',';
    }
    //strip the trailing comma and close IN() statement
    $construct = rtrim($construct, ',') + ");"; 
```

这是假设您的电话号码在数据库中存储为整数。如果它们存储为字符串，则必须在构造 $construct 字符串的位置用引号将它们括起来。

SQL 查询看起来像“SELECT * FROM my_table WHERE mobile IN(12345,6789,28191);”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:05:32.317

尝试使用此代码，您不需要添加必要的循环，因为如果循环运行超过 1000 次，循环过多可能会降低站点性能。
尽量不要通过摆脱多余的不需要的循环来减慢您的网站速度，始终使用简单的方法以低服务器损坏或减慢成本来实现结果.. 如果 $phonenumbers 是数组，则：

```
$phonenumbers = imploade(",", $phonenumbers)
```

**或者**

```
$phonenumbers = str_replace(';',',', $to); 
```

**进而**

```
$construct = "SELECT * FROM my_table WHERE mobile IN ($phonenumbers)";
```

**最终代码必须是**

```
<?php
if (!empty($_POST))
{
    $text = $_POST['message'];
    $to  = $_POST['recipients'];
    include('mysql_connect.php');
    mysql_select_db("my_database");

    $to = explode(", ",$to);
    $to = implode(" ",$to);

    if ($to != '' && $text != "")
    {
        $phonenumbers = explode(';', $to);
        $phonenumbers = implode(", ", $phonenumbers);

        if (!empty($phonenumbers))
        {

            $construct = "SELECT * FROM my_table WHERE mobile IN ("'.$phonenumbers.'")";
            $check = mysql_query($construct);
            while($row = mysql_fetch_array($check))
            {
                $name = $row[recipient_name];
            }
            $filename = "/send_message";
            $handle = fopen($filename .".LOCK", "x+");
            if ($handle != false)
            {
                fwrite($handle, "To: $phonenumber\n");  
                $text = "$name".$_POST['message'];
                fwrite($handle, $text);
                fclose($handle);
            }
        }
    }
}
?>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:12:30.690

```
$contactListString = implode("','", $phonenumbers);
$query = "SELECT * FROM my_table WHERE mobile IN ('$contactListString')"; 
```

# php - MongoDB 作为 MySQL 缓存

> ID：14230578
> 
> 赞同：2
> 
> 时间：2013-01-09T07:55:58.213
> 
> 标签：php, mysql, mongodb, caching, redis

我刚刚有了这个想法，并认为这是解决这个问题的好方法，但我问这种方法是否有一些缺点。我有一个经常查询数据库的网页，每个页面加载多达 3-5 个查询。每个查询都进行十几个（字面意思）连接，然后每个查询结果都用于另一个查询以构造 PHP 对象。不用说即使在云上加载时间也很荒谬，但它现在就是这样工作的。

我考虑将已经构建的对象存储为 JSON 或 MongoDB - BSON 格式。使用MongoDB作为这种类型的缓存引擎会是一个很好的解决方案吗？这是我认为它将如何工作的示例：

1.  当用户打开页面时，如果 Mongo 中没有具有正确 ID 的数据，则会触发对 MySQL 的查询，每个返回的数据都被转换为正确构造的对象。该对象被发送到视图并转换为 JSON 并保存在 Mongo 中。
2.  如果 Mongo 中有相应 ID 的数据，则将其发送到 PHP 并进行转换。
3.  当 MySQL 中的某些数据更改（管理员编辑/删除内容）时，会触发删除函数，该函数也会删除 MongoDB 中已编辑/删除的对象。

它是使用 MongoDB 的好方法吗？这种方法的缺点是什么？使用 Redis 来完成这项任务会更好吗？对于项目的其他元素，我还需要 NoSQL，这就是为什么我正在考虑使用这两个元素之一而不是 memcache。

[MongoDB 作为来自 MySQL 的频繁连接和查询的缓存](https://stackoverflow.com/questions/4010438/mongodb-as-a-cache-for-frequent-joins-and-queries-from-mysql?rq=1)有一些信息，但它完全无关紧要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T08:09:09.303

我认为您最好使用 memcached 或 Redis 来缓存查询结果。MongoDB 与其说是缓存，不如说是一个完整的数据库。虽然 memcached 和 Redis 都针对缓存进行了优化。

但是，您可以将缓存实现为两级缓存。例如，Memcached 不保证数据将保留在缓存中。（它可能会在存储已满时使数据过期）。这使得实现标签系统变得困难（例如，您为 MySQL 表添加标签，然后您可以触发与该表关联的所有查询结果的过期）。一个常见的解决方案是使用 memcached 进行缓存，然后使用第二个更慢但更可靠的缓存，虽然它应该比 MySQL 更快。MongoDB 可能是一个很好的候选者（只要您可以保持对 MongoDB 的查询简单）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T08:16:16.183

好吧，您可以使用 Memcached 或 Redis 来缓存对象。Mongodb 也可以用作缓存。我使用 mongodb 来缓存聚合结果，因为它与 Memcached 不同，具有广泛的查询优势。

例如，在标记应用程序中，如果我必须显示与每个标记对应的页数，它会扫描整个表以进行`group by`查询。所以我有一个`cronjob`通过查询计算该组并将聚合结果缓存在 Mongo 中。这对我在生产中非常有效。您也可以对无数其他复杂的计算执行此操作。

mongodb [capped collections](http://docs.mongodb.org/manual/core/capped-collections/)和[TTL collections](http://docs.mongodb.org/manual/tutorial/expire-data/)也非常适合缓存。

# java - Java - Spring：SingletonBeanFactoryLocator 中跨 bean 工厂的依赖注入？

> ID：14230584
> 
> 赞同：0
> 
> 时间：2013-01-09T07:56:11.083
> 
> 标签：java, spring

我有以下情况：

1) 两个 xml 配置文件，比如说`foo.xml`和`bar.xml`. 它们包含带有名称和相应的`ClassPathXmlApplicationContext`bean 。每个 bean 依次通过其构造函数获得自己的 xml 配置文件，`fooFactory``barFactory`

2）客户端代码的用途`SingletonBeanFactoryLocator`和方法`getInstance`以及`useBean`获取这些工厂。例如`SingletonBeanFactoryLocator.getInstance("classpath:foo.xml").useBeanFactory("fooFactory");`

要求：barFactory 中的一些 bean 需要访问 fooFactory 中的一些 bean。

当前的解决方案是通过获取对 fooFactory 的引用`SingletonBeanFactoryLocator.getInstance("classpath:foo.xml").useBeanFactory("fooFactory");`并使用`getBean`来获取必要的 bean。

问题：是否可以将 beans from 注入`fooFactory`到 beans from`barFactory`中，因此 beans in`barFactory`会自动获取这些依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:00:50.533

为什么没有“通用”应用程序上下文 xml。

在这个文件中，您可以定义将在 foo 和 bar 中使用的 bean。然后，您可以将这个通用 xml 导入到两个应用程序上下文中。

这种方法会创建两次在公共 xml 中定义的那些 bean，但这可能是也可能不是问题。如果您想共享相同的实例，您可以将公共 bean 创建为单例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:33:20.107

我最终在同一个 .xml 中定义了这些工厂并将它们链接起来。然后我将 fooFactory bean 正常注入 barFactory bean。

# java - 谁能给我指出一个好的 java 函数/对象/方法 tut 的方向？

> ID：14230587
> 
> 赞同：3
> 
> 时间：2013-01-09T07:56:13.377
> 
> 标签：java, object, methods

我很难理解如何将我的程序拆分为更小的函数，而不是主函数中的一组代码。是的，我自己找了一个指南。我发现的那些要么没有帮助，要么让我更加困惑。谢谢 ：）

编辑：我来自非常有限的 C++ 和 JavaScript 背景。

在 C++ 中，我可以简单地这样做：

```
int main () {
int x,y;

cin >> x >> y;
cout << addNum(x,y) << endl;
}

int addNum(num1,num2) {
return num1+num2;
} 
```

我在java中迷路了。:S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T08:11:19.227

我认为您应该首先阅读“面向对象编程”（不是书名，而是要搜索的内容......）。

另一个好的开始是“设计模式”，但在您熟悉了 OOP 的基础知识之后。

关于 OOP 的一些参考资料：

*   [http://en.wikipedia.org/wiki/Object-oriented_programming](http://en.wikipedia.org/wiki/Object-oriented_programming)
*   [http://docs.oracle.com/javase/tutorial/java/concepts/](http://docs.oracle.com/javase/tutorial/java/concepts/)
*   [http://www.aonaware.com/OOP1.htm](http://www.aonaware.com/OOP1.htm)

...关于设计模式：

*   [http://www.oodesign.com/](http://www.oodesign.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:37:21.553

一个建议你从简单的开始和你的 IDE 重构出方法。进行单元测试并重新编写代码以使其更清晰、更简单可以迭代地改进代码。

在 Java 中，你可以用它来编写你的例子。

```
public class Main {
    public static void main(String... ignored) {
        Scanner scanner = new Scanner(System.in);
        int x = scanner.nextInt(), y = scanner.nextInt();
        System.out.println(addNum(x, y));
    }

    private static int addNum(int x, int y) {
        return x + y;
    }
} 
```

虽然 Java 很冗长，但 IDE 可以帮助您编写大部分内容，因此您不必输入更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:27:30.473

由于您来自 c++ 背景，我想您错过了函数必须是类的一部分（可以说一切都是 java 中的对象）。

```
class Math{
    int add(int x, int y){
     return x + y;
    }
} 
```

然后，您创建一个 Math 实例并在该实例上调用 add()。您还可以将 add() 函数设为静态以避免创建实例

例如，在 main 方法中

```
Math m = new Math();
System.out.println(m.add(x,y)); 
```

如果 add() 是一个静态函数，你会编码

```
System.out.println(Math.add(x,y)); 
```

正如许多其他人所建议的那样，最好阅读一些关于 OOP 和 Java 的好书。我会推荐***Bruce Eckel 的 Thinking in Java。对于有 C++ 背景的人来说，这是一本好书。***

# multithreading - Mybb 将所有线程显示为今天

> ID：14230589
> 
> 赞同：0
> 
> 时间：2013-01-09T07:56:16.637
> 
> 标签：multithreading, time, mybb

我不知道问题出在哪里，但 MyBB 显示每个线程的最后活动为今天 - 晚上 9 点 53 分。就像图片上一样![MyBB 错误](../Images/329e88b4be09e34c3ccaad0eb43aad3e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T17:08:49.830

固定的。问题出在主题上。我改变了主题，一切正常。

# xml - TSQL XML 函数

> ID：14230590
> 
> 赞同：1
> 
> 时间：2013-01-09T07:56:17.293
> 
> 标签：xml, tsql, user-defined-functions, scalar

我需要以下方面的帮助，因为我不了解 SQL 中的 XML。下面是生成表格和数据的表格脚本。

在 XML 中有一个名称属性为“RequiredField”的 XML 元素，我需要创建一个 TSQL 函数来返回 value 属性中包含的值。请任何人都可以提供帮助。

```
CREATE TABLE [MyTable]
( [UniqueID] INT PRIMARY KEY IDENTITY(1,1) NOT NULL,
  [Description] VARCHAR(50) NOT NULL,
  [MetaData] XML NOT NULL )   
INSERT INTO [MyTable]
( [Description], [MetaData] )
SELECT  'My Description 1', '<properties xmlns="http://schemas.myschema.com/propertyInfo/additionalPropertyInfo.xsd"><item name="PropertyName" value="Property1" /><item name="RequiredField" value="true" /></properties>'
UNION
SELECT  'My Description 2', '<properties xmlns="http://schemas.myschema.com/propertyInfo/additionalPropertyInfo.xsd"><item name="PropertyName" value="Property2" /></properties>' 
```

如您所见，第二行不包含该元素，因此它应该返回一个空值。我似乎在查询中绕着圈子跑来跑去，除了命名空间部分之外并没有真正取得太大进展，但即使是我也不确定是否正确。

所以类似这样的东西

```
CREATE FUNCTION GetRequiredFieldValue(@uniqueID INT)
    RETURNS BIT
AS
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:15:15.180

试试这个：

```
create function GetRequiredFieldValue(@uniqueID INT) returns bit
as
begin
  declare @Ret bit;

  with xmlnamespaces(default 'http://schemas.myschema.com/propertyInfo/additionalPropertyInfo.xsd')
  select @Ret = MetaData.value('(/properties/item[@name = "RequiredField"])[1]/@value', 'bit')
  from MyTable
  where UniqueID = @UniqueID;

  return @Ret;
end 
```

# ios - 如何将缩放区域从一个视图传递到另一个 xcode

> ID：14230591
> 
> 赞同：0
> 
> 时间：2013-01-09T07:56:17.120
> 
> 标签：ios, xcode, map, mkmapview, mapkit

我有一个类的地图视图，我可以去任何地方，可以放大并看到整个地图。现在我想知道是否有一种方法可以跟踪当前视图上出现的缩放区域或地图区域，这样当我去另一个班级时，我可以在同一区域的另一个视图上获得相同的地图。

例如：在我`FirstViewController`的地图上，现在我放大到北美地区，所以现在我想要在我移动时`SecondViewController`看到北美地区，即我在`FirstViewController`移动之前所在的地区`SecondView`。谁能告诉我如何做到这一点？

我必须将注释图钉添加到 SecondView 上的区域中心，考虑到`FirstViewController`ie 上的视图，如果我在 SouthAmerica 区域，那么在移动到 SecondView 时，图钉应该落在 SouthAmerica 地图区域的中心。有人可以指导我如何做到这一点吗？

任何编码都会很有帮助..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:21:45.337

只需将滚动视图（或地图或其他）的可见矩形传递给第二个 VC。

然后在 viewWillAppear （或其他东西）中缩放并滚动到给定的矩形。

# asp.net - 在 aspx 文档中 runat=”server” 有什么意义？

> ID：14230593
> 
> 赞同：-3
> 
> 时间：2013-01-09T07:56:23.510
> 
> 标签：asp.net

据我了解，没有`runat="browser"`或`runat="server7"`或`runat="Mardid"`等。

那么这个命令有什么用。显然它指示代码在服务器端编译，但是如果没有其他选项，为什么不默认/隐式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T07:57:31.300

> 但是如果没有其他选项，为什么不默认/隐式？

因为可以在服务器端或客户端访问 HTML 控件。例如。

```
<div runat="server" id="div1"> </div> 
```

通过删除`runat="server"`您的控件将表现得像普通的 HTML 控件。

您可能会看到这篇博文：[为什么为 ASP.NET 使用 runat=”server”？第2部分](http://mikeschinkel.com/blog/whyrunatserverforaspnetpart2/)

> [runat="server"] 的重要性更在于一致性和可扩展性。如果开发人员必须以某种方式标记一些标签（即 `[<asp:]`对 ASP.NET 的忽略告诉否则它会很难标记，则具有冲突名称的那个具有未来的代理用户一些如果什么引擎。通过解析需要什么和 Response.Write as direct sent is 简化了这一点此外，混淆。more 创建然后 runat，在前缀中使用其他情况）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:01:06.623

> .那么这个命令有什么用。显然它指示代码在服务器端编译，但是如果没有其他选项，为什么不默认/隐式？

我不是专业人士，但考虑以下逻辑，在 HTML 中我们有很多标签，如果 runat="server" 是默认的，那么服务器将不得不对服务器上的所有 html 元素进行处理（这是不必要的）。内部发生的事情，我也想知道。

# android - android webview的停止和重新加载按钮

> ID：14230594
> 
> 赞同：0
> 
> 时间：2013-01-09T07:56:26.887
> 
> 标签：android, webview

我对 Android 编程有点陌生，所以如果我对我的问题的表达方式不是 100% 正确，请耐心等待。我正在寻找一种方法来停止并重新加载我的 Android webView。webView 将用户带到一个简单的 HTML 链接，该链接有效。现在我想为 webView 实现停止、重新加载、前进和后退按钮。我为 back 和 forward 函数所做的非常简单——我只是创建了一个 onKeyDown 函数来方便前进和后退，如下所示：

```
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if((keyCode == KeyEvent.KEYCODE_BACK) && mWebView.canGoBack())
    {
        mWebView.goBack();
        return true;
    }

    if((keyCode == KeyEvent.KEYCODE_FORWARD) && mWebView.canGoForward())
    {
        mWebView.goForward();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

现在重新加载（刷新）这个 webView 并停止加载这个 webView 是我的麻烦。我知道要重新加载 webView，您可以简单地创建一个新的 setOnClickListener 函数并重新加载 URL。我不太确定是否要停止加载 webView。我是否必须创建单独的按钮来重新加载/停止 webView？或者我可以在我的代码中放置一个预构建的函数来帮助我这样做吗？任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:27:24.687

***重新加载***

```
mWebview.loadUrl("http://twitter.com"); //calling again `loadUrl()` with `url` gives your refresh type effects. 
```

我认为没有像 reloadUrl 这样的方法。

***停止加载***

`stopLoading ()`：停止当前负载。

```
mWebView.stopLoading(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-02T11:52:42.563

**重新加载 Web 视图**

```
mWebView.reload(); 
```

**停止加载网址**

```
mWebView.stopLoading () 
```

*它会 100% 工作*

# c# - 我的 c# 代码在访问 sql server 时抛出异常

> ID：14230600
> 
> 赞同：3
> 
> 时间：2013-01-09T07:57:01.707
> 
> 标签：c#, sql-server

我是 c# 和 sql 的新手，我正在创建一个简单的学生数据库，我添加了在 sql server 2008 中创建的数据库。现在我有一个表单，其中给出了输入，我有一个按钮插入来将数据插入到数据库中。但是当我单击按钮时，我得到了一个例外。

这是我的 App.config 文件

```
`<?xml version="1.0" encoding="utf-8" ?>
 <configuration>
 <startup> 
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />

 </startup>
 <configSections>
 <connectionStrings>
  <appSettings>
  <add name="ConString" connectionString="Data Source=ARAVIND-HP\SQLEXPRESS;            Initial Catalog=test;Integrated Security=True" providerName="System.Data.sqlClient"/>
  </appSettings>
    </connectionStrings> 
```

`

我使用的表格如下

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
 using System.Data;
using System.Drawing;
using System.Linq;
 using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

 namespace test
 {
   public partial class frmNewStudent : Form
  {

    public frmNewStudent()
    {
        InitializeComponent();
    }

    private void btnClose_Click(object sender, EventArgs e)
    {
        this.Close();
    }

    private void frmNewStudent_Load(object sender, EventArgs e)
    {

    }
 private void btnInsert_Click(object sender, EventArgs e)
    {
         DB_Access access = new DB_Access();
        access.add_student(txtRegNo.Text,txtFName.Text,txtLName.Text,txtPhone.Text);
        MessageBox.Show("Data added successfully");
    }
  }
 } 
```

现在我有两个类 1.DB_access 2.DB_Connections

DB_access 的代码如下

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Data;
using System.Configuration;
using System.Data.SqlClient;

  namespace test
  {
     class DB_Access
    {
    public SqlConnection conn;
    public DB_Access()
    {   
        conn = DB_Connection.GetConnection();
    }

    public void add_student(string regno, string fname, string lname, string phone)
    { 
        if(conn.State.ToString()=="Closed")
        {
            conn.Open();
        }
       SqlCommand newCmd = conn.CreateCommand();
        newCmd.Connection = conn;
        newCmd.CommandType = CommandType.Text;
        newCmd.CommandText = "insert into student values('"+ regno +"','"+ fname   +"','"+ lname +"','"+ phone +"')";
        newCmd.ExecuteNonQuery();
    }
   }
  } 
```

DB_Connections 的代码如下

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Data;
using System.Configuration;
using System.Data.SqlClient;

 namespace test
 {
    class DB_Connection
    {
    public static SqlConnection NewCon;

    public static string ConStr = ConfigurationManager.ConnectionStrings["ConString"].ConnectionString;

    public static SqlConnection GetConnection()
    {
        NewCon = new SqlConnection(ConStr);
        return NewCon;
    }

   }
  } 
```

当我运行它并单击插入按钮时，出现以下异常：

test.exe 中发生了“System.TypeInitializationException”类型的未处理异常

附加信息：“test.DB_Connection”的类型初始化程序引发了异常。

和行'conn = DB_Connection.GetConnection();' 突出显示

我找不到错误。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:08:18.700

`System.TypeInitializationException`意味着程序无法创建类型 DB_Connection，更准确地说是无法初始化静态字段`ConStr`。

部分使用不正确`connectionStrings`。查看[http://msdn.microsoft.com/en-us/library/ms254494.aspx](http://msdn.microsoft.com/en-us/library/ms254494.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:03:51.237

您不需要`<appSettings>`节点，该部分应该只是：

```
<connectionStrings>
  <add name="ConString" connectionString="Data Source=ARAVIND-HP\SQLEXPRESS;            Initial Catalog=test;Integrated Security=True" providerName="System.Data.sqlClient"/>
</connectionStrings> 
```

`TypeInitializationException`当类的静态字段无法初始化（可能是由于异常）时，您会得到它。这`ConnectionStrings["ConString"]`将导致`null`，因此读取该`.ConnectionString`属性会产生 NullReferenceException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:04:03.980

似乎出现问题是因为`ConStr`无法初始化静态成员。您是否可以仅出于测试目的通过代码中其他位置的配置管理器访问连接字符串？

`app.config`Hans Kesting 所说的附加提示：除非必须，否则不要手动编辑文件。您可以使用 Visual Studio 非常轻松地管理连接字符串和其他设置 - 这也可以避免错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T08:04:07.807

web.config 中的`connectionStrings`设置格式错误。

如果在这条线上失败

```
public static string ConStr = ConfigurationManager.ConnectionStrings["ConString"].ConnectionString; 
```

的内容`web.config`应该是

```
<connectionStrings>
   <add name="ConString" connectionString="Data Source=ARAVIND-HP\SQLEXPRESS; Initial Catalog=test;Integrated Security=True" providerName="System.Data.sqlClient"/>
</connectionStrings> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T12:50:59.927

我认为连接问题出在您的 App.config 文件中

```
<?xml version="1.0" encoding="utf-8" ?>  <configuration>  <startup> 
<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />

</startup>

<configSections>  <connectionStrings>   <appSettings>   <add
name="ConString" connectionString="Data Source=ARAVIND-HP\SQLEXPRESS; 
Initial Catalog=test;Integrated Security=True"
providerName="System.Data.sqlClient"/>   </appSettings>
</connectionStrings> 
```

您不需要在配置中标记 configSections。删除它并在配置中的启动下方粘贴正确的连接字符串。正如亚历山大所说，看看[http://msdn.microsoft.com/en-us/library/ms254494.aspx](http://msdn.microsoft.com/en-us/library/ms254494.aspx)并尝试这种方式：

```
"<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<startup>
<supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
</startup>

<connectionStrings>
  <clear />
  <add name="ConString"
      connectionString="Data Source=ARAVIND-HP\SQLEXPRESS; Initial Catalog=test; Integrated Security=True" 
      providerName="System.Data.sqlClient"/>
</connectionStrings>

</configuration>"` 
```

恕我直言，应该没问题

# android - 如何生成正确的身份验证令牌

> ID：14230601
> 
> 赞同：2
> 
> 时间：2013-01-09T07:57:22.700
> 
> 标签：android, authentication, token, auth-token, android-account

我正在尝试使用 Android 帐户管理器来创建**我的应用程序自己的帐户**，因此我研究了 SDK 中提供的示例。但是，我在理解如何管理服务器上的身份验证令牌时遇到了一点问题。

根据我在研究示例和阅读一些教程时的理解是，用户在首次登录时必须提供他的登录名和密码。然后客户经理将向我的服务器询问与用户凭据关联的令牌。此令牌将作为密码存储在 Android 设备上的帐户中（因此真正的密码永远不会存储在设备上）。

因为令牌会定期过期，所以我知道我的服务器必须能够生成带有登录名和过期令牌的新令牌。那是对的吗？如何从旧令牌生成新令牌？

此外，令牌的结构应该是什么？我如何生成它？过期时间是否存储在令牌本身或我的服务器上？

**编辑：**如果有人有一个简单的工作示例向我展示，那将对我很有帮助。另外，如果您有以下答案以外的其他信息，请发布，因为 Amokrane Chentir 的回答对我没有帮助。 **实际上，调用[AccountManager#getAuthToken()](http://developer.android.com/reference/android/accounts/AccountManager.html#getAuthToken%28android.accounts.Account,%20java.lang.String,%20android.os.Bundle,%20android.app.Activity,%20android.accounts.AccountManagerCallback%3Candroid.os.Bundle%3E,%20android.os.Handler%29)会导致调用`getAuthToken()`我必须在[AbstractAccountAuthenticator](http://developer.android.com/reference/android/accounts/AbstractAccountAuthenticator.html)的子类中实现的方法。**

EDIT2：5个月后，我仍然对这个问题的解决方案感兴趣:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:04:39.223

您可以调用方法[AccountManager#invalidateAuthToken](http://developer.android.com/reference/android/accounts/AccountManager.html#invalidateAuthToken%28java.lang.String,%20java.lang.String%29)来请求新的 Auth Token。此外，您不需要自己生成 Auth Token，您必须使用[AccountManager#getAuthToken](http://developer.android.com/reference/android/accounts/AccountManager.html#getAuthToken%28android.accounts.Account,%20java.lang.String,%20android.os.Bundle,%20android.app.Activity,%20android.accounts.AccountManagerCallback%3Candroid.os.Bundle%3E,%20android.os.Handler%29)。

# git - 推送时出现 Git 错误：无法预加载来自 LD_PRELOAD 的对象

> ID：14230602
> 
> 赞同：33
> 
> 时间：2013-01-09T07:57:29.447
> 
> 标签：git

这有一些最近才开始发生的事情，尽管我不确定我可以做些什么来触发它。

每当我运行时，`git push`我都会收到以下错误：

```
ERROR: ld.so: object '/lib/liblm.so' from LD_PRELOAD cannot be preloaded: ignored. 
```

推送确实在此之后进行并且正常工作。

我已经更新到最新版本的 Git（通过自制软件），但并没有解决它。

**编辑：**抱歉，我不太清楚我在问什么。我想我的问题有两个方面：

*   出于兴趣，是什么导致了错误？
*   如何修复错误使其消失？它似乎没有引起我能看到的任何问题，但它有点烦人！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T08:11:08.730

我不得不假设这是服务器配置错误。该消息来自 GitHub 服务器。所以请放心，它与您的 git 无关。

对于任何关心的人，这里有一个很好的 LD_PRELOAD 解释：[https ://stackoverflow.com/a/426260/591166](https://stackoverflow.com/a/426260/591166)

**更新**：GitHub 显然已经解决了这个问题。

# jenkins - Jenkins-CVS 插件 - 请求处理期间命令中止

> ID：14230604
> 
> 赞同：1
> 
> 时间：2013-01-09T07:57:35.027
> 
> 标签：jenkins, cvs, jenkins-plugins

当尝试使用 CVS 中的最新版本更新工作区时，Jenkins 构建作业时常失败，并出现以下错误：

```
[EnvInject] - Loading node environment variables.
Building on master in workspace
Using locally configured password for connection to :pserver:myuser@server:/export/home/cvsroot
cvs update -d -P -r HEAD -D 08 Jan 2013 06:29:03 -0500 prjname
ERROR: CVS Command aborted: Aborted during request processing
org.netbeans.lib.cvsclient.command.CommandAbortedException: Aborted during request processing
        at org.netbeans.lib.cvsclient.Client.handleResponse(Client.java:673)
        at org.netbeans.lib.cvsclient.Client.processRequests(Client.java:598)
        at org.netbeans.lib.cvsclient.command.update.UpdateCommand.execute(UpdateCommand.java:347)
        at org.netbeans.lib.cvsclient.Client.executeCommand(Client.java:710)
        at hudson.scm.AbstractCvs$1.invoke(AbstractCvs.java:243)
        at hudson.scm.AbstractCvs$1.invoke(AbstractCvs.java:223)
        at hudson.FilePath.act(FilePath.java:842)
        at hudson.FilePath.act(FilePath.java:824)
        at hudson.scm.AbstractCvs.perform(AbstractCvs.java:223)
        at hudson.scm.AbstractCvs.checkout(AbstractCvs.java:140)
        at hudson.scm.CVSSCM.checkout(CVSSCM.java:318)
        at hudson.model.AbstractProject.checkout(AbstractProject.java:1256)
        at hudson.model.AbstractBuild$AbstractBuildExecution.defaultCheckout(AbstractBuild.java:589)
        at jenkins.scm.SCMCheckoutStrategy.checkout(SCMCheckoutStrategy.java:88)
        at hudson.model.AbstractBuild$AbstractBuildExecution.run(AbstractBuild.java:494)
        at hudson.model.Run.execute(Run.java:1502)
        at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
        at hudson.model.ResourceController.execute(ResourceController.java:88)
        at hudson.model.Executor.run(Executor.java:236)
ERROR: Cvs task failed 
```

如果我重新启动构建，则更新会正常进行。

*   詹金斯版本：1.478
*   Jenkins-CVS 插件版本：2.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:39:05.890

您看到的 CommandAbortedException 被抛出，因为代码收到了 InterruptedIOException。

这表示线程在尝试与您的 CVS 服务器通信时抛出了一个 InterruptedException，因此要么有人在你的工作上点击了取消按钮，要么你有一个进程试图结束 Java 线程。

# jquery - 如何使用我的 Js 函数自动完成 Jquery 使用所有代码均已附加？

> ID：14230609
> 
> 赞同：0
> 
> 时间：2013-01-09T07:57:52.750
> 
> 标签：jquery, asp.net, autocomplete, textbox

我通过使用谷歌地图 api 输入邮政编码来获取城市状态，我的代码如下，

谷歌地图api链接，

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
```

通过邮政编码获取城市状态的脚本，

```
<script type="text/javascript">
   var zip =document.getElementById("txtZip").value;
    var lat;
    var lng;
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode({ 'address': zip }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            geocoder.geocode({'latLng': results[0].geometry.location}, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                if (results[1]) {
                    var loc = getCityState(results);
                    document.getElementById("TextBox1").value=loc;
                }
            }
        });
        }
    }); 

function getCityState(results)
    {
        var a = results[0].address_components;
        var city, state;
        for(i = 0; i <  a.length; ++i)
        {
           var t = a[i].types;
           if(compIsType(t, 'administrative_area_level_1'))
              state = a[i].long_name; //store the state
           else if(compIsType(t, 'locality'))
              city = a[i].long_name; //store the city
        }
        return (city + ', ' + state)
    }

function compIsType(t, s) { 
       for(z = 0; z < t.length; ++z) 
          if(t[z] == s)
             return true;
       return false;
    }
</script> 
```

输入邮政编码值并在文本框“TextBox1”中显示城市状态，如下所示，

```
<asp:TextBox ID="txtZip"  runat="server" ToolTip="Enter Zip"></asp:TextBox>
   <asp:TextBox ID="TextBox1" runat="server" ForeColor="Gray"></asp:TextBox> 
```

如何将此 jquery 脚本与我的 JS 一起使用以自动完成？

```
<script>
  $(function() {
    var availableTags = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL",
      "ColdFusion",
      "Erlang",
      "Fortran",
      "Groovy",
      "Haskell",
      "Java",
      "JavaScript",
      "Lisp",
      "Perl",
      "PHP",
      "Python",
      "Ruby",
      "Scala",
      "Scheme"
    ];
    $( "#tags" ).autocomplete({
      source: availableTags
    });
  });
  </script> 
```

希望得到您的建议

# batch-file - 如何使用 BAT 和 RAR 归档特定文件类型？

> ID：14230613
> 
> 赞同：1
> 
> 时间：2013-01-09T07:58:01.363
> 
> 标签：batch-file, archive, rar

要归档我的文件，我使用带有代码的 bat 文件：

```
@set exclude=-x*.bmp -x*.png -x*.jpg
"C:\Program Files (x86)\WinRAR\Rar.exe" a %exclude% "%cd%\MyStuff.rar" ".\MyFolder" 
```

问题是“MyFolder”充满了垃圾文件，我只想要一个特定的文件类型，如 *.txt。而且我想将“排除”变成“排除除* .txt之外的所有内容”。我怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T09:50:01.370

我自己解决了。x 表示排除，n 表示包含。**完全**像我想要的那样工作：

```
@set exclude=-x*.bmp -x*.png -x*.jpg
@set include=-n*.txt -n*.pdf
"C:\Program Files (x86)\WinRAR\Rar.exe" a %include% "%cd%\MyStuff.rar" ".\MyFolder" 
```

# asp.net - 标签未使用 blog4umbraco 保存在 umbraco

> ID：14230616
> 
> 赞同：0
> 
> 时间：2013-01-09T07:58:12.617
> 
> 标签：asp.net, umbraco

我正在使用 blog4umbraco 4.5 版，一切正常，但我无法保存博客文章的标签，没有任何错误，但标签没有保存，请给我有关此问题的任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:38:31.023

标签是否显示在文本框下方的列表中？您可能必须按制表符或逗号来获取最初要使用的标签，然后按保存。

# ctags - Ubuntu：ctags 错误：“ctags：未知选项：-p”

> ID：14230618
> 
> 赞同：1
> 
> 时间：2013-01-09T07:58:22.007
> 
> 标签：ctags, exuberant-ctags

我正在尝试使用 ctags 创建标签并收到错误

**ctags：未知选项：-p**

之前也问过[类似的问题](https://stackoverflow.com/questions/6249121/ctags-error-ctags-unknown-option-p)。但我无法理解该解决方案。我很抱歉再次发布同样的问题。

我正在尝试为 C 和 C++ 文件生成标签。

操作系统：ubuntu 10.04LTS

ctags 版本：5.8（旺盛的 ctags）

$which ctags : /usr/bin/ctags

我的主目录中有一个 .ctags conf 文件，但它是空的。

我尝试使用以下命令生成标签

**ctags -append=yes -R /home/jabez/mycodedir**

我正在使用“-append”选项，因为我想将从其他目录生成的标签附加到同一个标签文件中。

我遵循的安装程序：

1.  ./configure --disable-etags
2.  制作
3.  进行安装

请帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:01:47.887

问题是您使用`-append`单破折号，它应该是双破折号：`--append`。

使用单破折号，参数被解析为一系列单字母参数：`-a -p -p -e -n -d`.

# php - 将 JSON 文件导入数据库

> ID：14230619
> 
> 赞同：0
> 
> 时间：2013-01-09T07:58:26.163
> 
> 标签：php, mysql, json

我生成了一个 JSON 文件，它的格式正确，就像我从 MySQL 数据库中导出它一样。现在我需要把它放回去:-)

我想阅读如何做到这一点，所以如果有一个好的链接，我欢迎它。我用过这个词

> php - 将 JSON 文件导入 MySQL 数据库的脚本

在谷歌和其他人喜欢它，但我没有运气。另外，如果我导入一个文件并且记录已经存在，我该如何处理重复问题？我可以让它自动覆盖吗？

我从 iOS 应用程序上传它，所以我看不到 php 文件在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:03:20.977

您可以使用`json_decode`

```
json_decode($json_from_ios_app, true) 
```

`json_decode`将返回关联的数组。基于此结构，构造 SQL 查询。

# api - 除产品广告 API 之外的任何获取亚马逊产品列表的 API

> ID：14230620
> 
> 赞同：0
> 
> 时间：2013-01-09T07:58:32.960
> 
> 标签：api, list, amazon, product, ads

除了产品广告 API 之外的任何获取亚马逊产品列表的 API，因为这一次限制 10 个产品，我需要从一个类别中获取 1000 个产品。

我不想循环请求 100 次并获取产品

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:16:05.063

您可以使用可以进行各种类型搜索的 MWS（Marketplace Web 服务）。但是亚马逊没有 API 来获取大量的产品数据。它必须逐步完成。

# sql - 如何在多个表中使用“选择行号（）”

> ID：14230625
> 
> 赞同：1
> 
> 时间：2013-01-09T07:58:53.460
> 
> 标签：sql, sql-server-2008-r2, sql-server-2012, row-number

我试图使用`ROW_NUMBER()`子句来检索特定的行号

当我执行这个查询

```
SELECT 
student.Aca_num,id_num,student.name,dob,pic,class.name,
student.tell,student.mobile1,mobile2,student.Email,nach.name,dist,notes
FROM
student,[user],users_classes,class,nach
WHERE
((class.ID)=student.class)
and
((nach.ID)=student.nach)
and
((student.class)=users_classes.Class_ID)
AND
((users_classes.[User_ID])=[user].ID)
AND
(([user].ID)=3) 
```

![查询的结果](../Images/c3788768ca9ef89a1575c84599d07029.png)

现在我需要使用`Row Number()`此查询通过指定行号仅检索一行。

我用`Row Number()`这样

```
SELECT * FROM
    (SELECT ROW_NUMBER() OVER (ORDER BY name) AS Row, * FROM Student) AS EMP
WHERE Row = 3 
```

此查询返回`third`学生表的行

但是`Row Number()`与多个表一起使用时出现错误，例如 (student,class)

```
SELECT * FROM
    (SELECT ROW_NUMBER() OVER (ORDER BY student.name) AS Row, * FROM Student,Class) AS EMP
WHERE Row = 3 
```

它给了我这个错误

> 消息 8156，级别 16，状态 1，第 10 行 为“EMP”多次指定了“名称”列。

如何使用`Row Number()`带有多个表的子句返回特定的行号|

提前致谢

问候 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:03:09.150

这与 . 无关`ROW_NUMBER()`。

在 your`Student`和`Class`表中，您都有一个名为`Name`. 创建子查询时，结果集中的列名必须不同。

所以不要使用`*`, 明确地命名列，包括（如果你必须同时拥有两个名称）一个别名：

```
SELECT * FROM
    (SELECT ROW_NUMBER() OVER (ORDER BY s.name) AS Row, s.Name as StudentName,c.Name as ClassName FROM Student s,Class c) AS EMP
WHERE Row = 3 
```

当然，目前，您正在两个表之间执行笛卡尔连接。您更有可能想以某种方式加入表格，例如

```
... FROM Student s INNER JOIN Class c on s.class = c.id ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:19:12.923

我希望这是有用的；

```
;WITH Emp AS
(
            -- Avoid using reserved words like [Row] (changed to nRow)
    SELECT   ROW_NUMBER() OVER (ORDER BY student.name) AS nRow 
            -- You cannot use * because your tables have columns with matching names
            -- Make sure that the columns you require are unique in their name or are aliased
            -- to be unique
            ,S.Col AS Foo
            ,C.Col AS Bar 
    FROM Student    S
    --  Your FROM expression [FROM Student,Class] will result effectively in a CROSS JOIN
    --  Clarify your join condition if you do not want a cartesian product
    JOIN Class      C ON S.Col = C.Col
)
SELECT *
FROM Emp
WHERE nRow = 3 
```

# c++ - 免费 C++11 IDE 的建议

> ID：14230632
> 
> 赞同：3
> 
> 时间：2013-01-09T07:59:22.133
> 
> 标签：c++, c++11

我开始刷新我的 C++ 技能。我对支持 C++11 的好 IDE 和免费的 IDE 很感兴趣。我习惯了 Visual Studio，但我想要一个免费的并且对 C++11 有很好的支持。我希望 IDE 具有良好的智能感知和调试功能。有什么建议么？我有一些使用 Eclipse CDT 的经验，但我不确定它是否支持 C++11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:03:23.007

Visual Studio 2012 Express for Windows Desktop 是免费的，自 2012 版本起对 C++11 的支持有限。

从[网站](http://www.microsoft.com/visualstudio/eng/downloads#d-2012-express)引述：

> 您可以使用 Visual Studio Express 2012 for Windows Desktop 在 C#、Visual Basic 和 C++ 中构建功能强大的桌面应用程序。

可以在[此处](http://msdn.microsoft.com/en-us/library/vstudio/hh567368.aspx)找到可用的 C++11 功能列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:03:04.803

Eclipse CDT 有一些 C++11 支持，有关设置，请参阅[http://www.eclipse.org/forums/index.php/mv/msg/282618/787571/](http://www.eclipse.org/forums/index.php/mv/msg/282618/787571/)

除此之外，您的选择还可以是：

*   Qt Creator（可用于非 Qt 项目，尽管它是为那些量身定制的）
*   KDevelop（对 C++ 有非常深刻的理解，它们支持最常用的 C++11 功能，请参阅[http://kdevelop.org/kdevelop/kdevelop-430-final-released-basic-c11-support](http://kdevelop.org/kdevelop/kdevelop-430-final-released-basic-c11-support)）

这些的好处是对 gcc 和 clang 的支持，它们具有最完整的 C++11 支持。

如果您使用的是 Windows，您还可以将 Visual Studio 与 11 月 CTP 一起使用，但请注意，尽管编译器具有一些新功能，但标准库并未更新以使用它们。

# c - 在其他进程启动的进程中设置断点

> ID：14230634
> 
> 赞同：0
> 
> 时间：2013-01-09T07:59:30.417
> 
> 标签：c, gdb

我面临这样一种情况，其中我让进程 X 执行一个命令（比如说`/bin/ls`）。一旦进程 X 执行命令 ls 我想在`ls`.

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:11:55.410

我可以想到两种方法来做到这一点。

1.  最简单的是`set follow-fork-mode child`每当创建新的新客户端进程时，GDB 都会调试子进程。但是，在这种模式下，您将无法再调试父进程。

2.  在子进程（`ls`上面提到的）中添加一些代码来等待一开始就说 SIGCONT 的信号。每当创建子进程时，将 GDB（新 GDB 实例）及其子进程的 PID 附加到它，发出信号 SIGCONT 以继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T10:14:17.937

一个简单的解决方案可能是将有问题的二进制文件（由进程 X 调用）包装在一个小的 shell 脚本中，该脚本在调试会话中启动进程并应用预配置的断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T01:16:31.973

您可以使用`catch exec`[ [1](http://sourceware.org/gdb/onlinedocs/gdb/Set-Catchpoints.html) ] 停止`exec`通话：

```
(gdb) catch exec
Catchpoint 1 (exec)
(gdb) r
Starting program: /tmp/a.out
process 7544 is executing new program: /bin/ls

Catchpoint 1 (exec'd /bin/ls), 0x00007ffff7ddfaf0 in _start () from /lib64/ld-linux-x86-64.so.2 
```

然后，您可以使用新流程做任何您想做的事情。另请参阅*dbrank0*[评论中的链接，](http://sourceware.org/gdb/onlinedocs/gdb/Forks.html)了解各种与 fork 相关的选项。

# html - 位置绝对 css 在输入标签中不起作用

> ID：14230636
> 
> 赞同：4
> 
> 时间：2013-01-09T07:59:45.850
> 
> 标签：html, css, input, position, absolute

嗨，问题是我已经为输入提供了绝对位置，但我只是发现绝对位置在输入标签中不起作用有人知道吗？我只是想通过定位来布局液体，这就是为什么我在这里使用它是我的 Html 代码：

```
<div id="savevalue">
    <input type="text" name="name" id="name" class="inpt" />
    <input type="button" value="Submit" class="btn" />
</div> 
```

这是CSS代码：

```
.inpt{
    background:#fff;
    border:1px solid #ccc;
    height:30px;
    font-size:18px;
    position:absolute;
    left:0;
    right:100px;
}
.btn{
    height:30px;
    background:#333;
    border:1px solid #222;
    font-size:18px;
    color:#fff;
    padding:0 15px;
    position:absolute;
    right:0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T09:02:56.363

是的，使用它可以正常工作

```
width: -moz-available 
```

谢谢大家

# algorithm - 求解递归的替代方法

> ID：14230639
> 
> 赞同：5
> 
> 时间：2013-01-09T08:00:16.090
> 
> 标签：algorithm, substitution, recurrence, induction

首先很抱歉问了这么一个基本的问题。

但是我很难理解解决递归的替代方法。我正在关注 Algo.s -CLRS 简介。因为我找不到足够的例子，所以主要关注的是歧义。尤其是归纳步骤。在教科书中，我们必须证明 f(n) 意味着 f(n+1) 但在 CLRS 中，这一步缺失或可能是我没有得到这个例子。请逐步解释如何证明 O(n^2) 是递归函数 T(n)=T(n-1)+n 的解

它是我想了解的替换方法的一般步骤。如果您可以阐明强数学归纳法并提供有关替代方法的材料的链接，那也将有所帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T08:01:45.640

在替换方法中，只需替换任何出现的`T(k)`by `T(k-1) + k`，然后迭代地进行。

```
T(n) = T(n-1) + n = 
= (T(n-2) + (n-1)) + n = 
= T(n-3) + (n-2) + (n-1) + n = 
= ...  =
= 1 + 2 + ... + n-1 +  n 
```

从[算术级数之和](http://en.wikipedia.org/wiki/Arithmetic_progression#Sum)，您可以得到 T(n) 在 中`O(n^2)`。

请注意，替换方法通常用于直观地了解复杂性是什么，以正式证明它-您可能需要不同的工具-例如[数学归纳法](http://en.wikipedia.org/wiki/Mathematical_induction)。

正式的证明会是这样的：

```
Claim: T(n) <= n^2
Base: T(1) = 1 <= 1^2
Hypothesis: the claim is true for each `k < n` for some `n`.
T(n) = T(n-1) + n <= (hypothesis) (n-1)^2 + n = n^2-2n + 1 < n^2 (for n > 1) 
```

# c# - 多租户隔离数据库上 DAL 和配置的最佳实践

> ID：14230644
> 
> 赞同：6
> 
> 时间：2013-01-09T08:00:53.983
> 
> 标签：c#, asp.net, iis, data-access-layer, multi-tenant

我的公司拥有十几个网站和独立的数据库（相同的模式）。每个客户都有自己的网站（不同的应用程序池）和数据库。

每个网站都有自己的配置，几个连接字符串，但它们都有相同的配置模式。

cust1.domain.com

cust2.domain.com

cust3.domain.com

出于安全和大量数据的原因，我们希望将所有网站合并为一个（单个应用程序池）并使用隔离的数据库。

设计 DAL 及其配置的最佳实践是什么？如果同时有大量租户，这意味着什么？一个应用程序池可以管理这种情况还是可以以某种方式进行管理？

顺便说一句，我们使用 asp-membership 进行用户身份验证。

在此先感谢，埃迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T08:55:48.667

您可以从多租户数据架构中尝试“具有不同架构的共享数据库”。在您的 DAL 中，您可以选择特定于当前用户的特定模式。这样简单又安全

继续阅读[http://msdn.microsoft.com/en-us/library/aa479086.aspx](http://msdn.microsoft.com/en-us/library/aa479086.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:08:52.633

使用`Application_PostAuthenticate`event in`global.asax`加载正确的数据库，然后关闭连接`Application_EndRequest`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:25:47.857

一种选择是在成员资格中使用配置文件并存储一条信息，以便您确定他们应该连接到哪个实际数据库。缺点是您需要在用户会话期间存储这条信息，因此可能需要 cookie 或会话变量。

一个站点与多个站点的含义在很大程度上取决于您的环境和应用程序，您目前是否在一个盒子上拥有多个站点，或者您是否有一个网络农场？你知道每个站点的并发用户数，流量吗？性能监视器可以帮助您查看每个站点的繁忙程度，但您可能需要更具侵入性的日志记录来确定并发用户等指标。我发现[这个](https://serverfault.com/questions/321577/iis-7-x-application-pool-best-practices)关于 IIS 7 性能的服务器故障问题可能会有所帮助

# mysql - 从多对多关系的末端选择数据

> ID：14230648
> 
> 赞同：0
> 
> 时间：2013-01-09T08:01:02.650
> 
> 标签：mysql, sql, join

我有一个帖子数据库，每个帖子都有标签。这些表分别命名为`Posts`和`Tags`。我还有第三个表，称为`Posts_Tags`它维护这两个表之间的多对多关系。

为了做到这一点，我的帖子和我的标签表都有一个`id`列。`Posts_Tags`因此，我的表同时具有存储映射的 a`postid`和`tagid`column。

例如，我正在查询标题中带有“class”一词的所有帖子。我可以用这个查询轻松地做到这一点：

```
SELECT * FROM Posts WHERE title LIKE '%{class}%' 
```

但是，现在我想查询标题中不仅有“class”，而且还带有“Java”标签的所有帖子。我可以在两个单独的查询中执行此操作，首先获取 Java 标记的 id：

```
SELECT id FROM Tags WHERE name='Java' 
```

然后我可以将它插入到我的第一个查询中，如下所示：

```
SELECT     Posts.* 
FROM       Posts 
INNER JOIN Posts_Tags 
        ON Posts.id=Posts_Tags.postid 
WHERE      Posts_Tags.tagid='$java_tag_id' 
           AND title LIKE '%{class}%' 
```

但是，我知道我可以在一个查询中做到这一点，我只是不知道怎么做。当只做一个连接时，我仍然需要考虑很多关于连接的问题，而在同一个查询中执行多个连接让我头晕目眩。我应该如何构造我的查询来执行这个操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:13:18.973

```
 SELECT p.* 
      FROM Posts p 
      JOIN Posts_Tags pt
        ON pt.postid = p.id
      JOIN tags t
        ON t.id = pt.tagid
     WHERE t.tag='java'
       AND p.title LIKE '%{class}%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:17:01.160

```
SELECT 
    p.*
FROM posts as p 
INNER JOIN Posts_Tags pt ON pt.post_id = p.id
INNER JOIN  Tags as t ON pt.tags_id = t.id
WHERE   t.tag='java'
AND p.title LIKE '%keyword%'; 
```

# blackberry - 启动 MyApplication 时出错：找不到入口点

> ID：14230650
> 
> 赞同：0
> 
> 时间：2013-01-09T08:01:11.033
> 
> 标签：blackberry

我成功地创建了一个签名的黑莓应用程序。我曾经部署过它并成功了。但我想知道为什么现在我调试它时，应用程序无法运行并说，

```
Error Starting `MyApplication`: Can't find entry point 
```

在调试过程中，我的项目没有显示任何错误，打包效果很好。据我记得，在我收到此错误之前，我没有对我的代码或项目描述和属性进行任何重大更改。这里有人遇到过同样的问题吗？

供您参考，我的项目只有一个主要方法，并在`UiApplication`类内使用 SMS 侦听器线程。我在真实设备和模拟器上都收到此错误。我试图完全卸载该应用程序，但巧合的是它无法删除，因为没有出现删除菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:02:10.273

首先，确保**main 方法位于可公开访问的**类中，并在方法内的第一行添加断点，以**检查应用程序是否没有抛出异常**并在您的应用程序中死亡。还可以尝试将整个 main 方法放入带有异常日志记录的 try/catch 中，以查看可能/可能不会发生的情况。

其次，正在使用的设备/模拟器可能只需要删除以前版本的应用程序。转到设置并导航到第三方安装的应用程序，并确保您的已被删除。需要重新启动（电池拔出）。在模拟器上，导航到 SDK 目录中的 bin/simulator 文件夹并**运行 cleanup.bat 文件以重置模拟器**。然后再试一次。你说删除菜单没有出现，我假设这是在第三方安装屏幕上？

第三种选择是进入您的**应用程序描述符 xml**文件，并检查是否有一个可见的入口点，并且所有内容都正确填写。

还尝试进行**刷新和清理构建**，并检查所有文件是否正确编译（是否在您的 bin 文件夹中正确创建了类文件？分发文件夹是否正确填充了用于分发的 cod/jad 文件？）

另一种选择是将**项目重新导入 IDE**以强制 IDE 重新生成一些文件，并尝试将另一个项目加载到设备上。如果可行，一个选项可能是将您的类文件等复制到新项目中。

以上有些是麻烦，但欢迎使用 BlackBerry 开发！

# php - Gmap信息框弹出

> ID：14230656
> 
> 赞同：0
> 
> 时间：2013-01-09T08:01:32.140
> 
> 标签：php, javascript, google-maps, google-maps-api-3

嗨，我有一个网络应用程序，我在其中集成了 gmap，它看起来类似于 Yelp gmap 服务。问题是，当我将鼠标悬停在标记上时，信息框卡在框中，如下所示：

![在此处输入图像描述](../Images/ee23e3d41fa6db90641970da349bacce.png)

信息框假设看起来像这样

![在此处输入图像描述](../Images/a8121943c163e1d59a417548c1fefd03.png)

以下是我当前用于集成 gmap 的代码

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/infobox_packed.js"></script>

<script type="text/javascript">

    var gmap, gpoints = [];

    $(document).ready(function() {
        initialize();
    });

function initialize() {

        gmap = new google.maps.Map(document.getElementById('themap'), {
            zoom:               8,
            streetViewControl:  false,
            scaleControl:       false,
            center:             new google.maps.LatLng(3.3000000,101.9629796),
            mapTypeId:          google.maps.MapTypeId.ROADMAP
        });
 <?php
$content = '<p>Test</p>'; 
?>
 gpoints.push( new point(gmap, '<?php echo $lat; ?>', '<?php echo $long; ?>', '<?php echo $content; ?>') );
}

 function point(_map, lat, lng, content) {
        this.marker = new google.maps.Marker({
            position:           new google.maps.LatLng(lat,lng),
            map:                _map,
            zIndex: 11
        });
this.content = content;

        var gpoint = this;

        google.maps.event.addListener(gpoint.marker, 'mouseover', function() {
            popup(gpoint);
        });

google.maps.event.addListener(_map, 'zoom_changed', function() {
            center=gpoint.marker.getPosition();
            lat=center.lat();
            lng=center.lng();
           // alert(lat+"===="+lng);
        });    
}

 function popup(_point) {
        _point.popup = new InfoBox({
            content: _point.content,
            position:  _point.marker.getPosition(),
           // shadowStyle: 1,
            padding: 20,
            //backgroundColor: '#ddd',
            borderRadius: 10,
            arrowSize: 10,
            borderWidth: 1,
           // borderColor: '#dddddd',
            disableAutoPan: true,
            arrowPosition: 30,
           // backgroundClassName: 'phoney',
            arrowStyle: 2

        });

_point.popup.open(_point.marker.map, _point.marker);

        google.maps.event.addListener(_point.popup, 'domready', function() {                    
            google.maps.event.addDomListener(_point.marker, 'mouseout', function() {
                _point.popup.close();
            });
        });

}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:22:52.737

您可以使用`pixelOffset`infoBox 的选项来控制与标记相关的位置。

默认值为 0,0 ，这意味着 infoBox 的左上角粘在（标记的）位置上。

要将其放置在顶部+中心，您必须明确分配给信息框的内容，并应用 pixelOffset，如下所示：

```
pixelOffset:new google.maps.Size(-halfOfWidthOfTheBox,0) 
```

当您不知道 infoBox 的大小时，您可以计算它。将此添加到`domready`-callback 的`_point.popup`：

```
this.setOptions({pixelOffset:new google.maps
                             .Size(-parseInt(this.div_.offsetWidth/2,10),0)}); 
```

# c# - 我使用实体框架得到一个不可为空的外键的空值

> ID：14230657
> 
> 赞同：1
> 
> 时间：2013-01-09T08:01:32.020
> 
> 标签：c#, entity-framework, foreign-keys

我究竟做错了什么？我使用向导映射了一个 SQL 服务器数据库。这是一个相当复杂的数据库，但对于这个示例，我们可以假设三个表：REPORTROWS、REPORTCOLUMNS 和 REPORTNAMES。REPORTROWS 具有以下列 ID、RESULT、REPORTDATE、REPORTCOLUMNID、REPORTNAMEID。REPORTNAMES 和 REPORTCOLUMNS 是带有 ID 和 NAME 的非常简单的表。ID 始终是主键，REPORTCOLUMNSID 和 REPORTNAMESID 是将 REPORTROWS 与 REPORTCOLUMNS 和 REPORTNAMES 链接的外键。

现在我用有效值填充三个表（我没有违反任何外键约束）。当我调用以下代码时

```
var recs = from a in ctx.REPORTROWS
           where a.REPORTNAMES.NAME == "my report" && a.REPORTDATE == somedate select a; 
```

我得到了我想要的行，但是我不能在后面的代码中使用字段 a.REPORTCOLUMNS 因为它是空的！为什么？REPORTCOLUMNID 被定义为一个不可为空的整数（这就是它是外键的原因）。但是，字段 a.REPORTNAMES 是正确的。即使我添加`&& a.REPORTCOLUMNS != null`到查询中，a.REPORTDATE 仍然为空。

我已经看到了类似问题的链接，但我找不到明确的答案。任何人都可以帮助我。供您参考，我使用的是 .NET Framework 3.5，在映射数据库时无法检查向导中的“包含外键”。它是灰色的（我仍然不明白为什么）。

非常感谢提前

这是EF版本v2.0.50727

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:23:37.857

您的 REPORTCOLUMNS（我相信您的 REPORTNAMES）表也应该在您的上下文中表示为实体，对吗？我认为发生错误是因为未启用延迟加载，并且您没有在查询中显式获取 reportcolumns 实体属性。

您可以尝试以下代码或类似代码：

```
var recs = from a in ctx.REPORTROWS.Include(r => r.REPORTCOLUMNS)
           where a.REPORTNAMES.NAME == "my report" && a.REPORTDATE == somedate select a; 
```

主要是在执行查询时执行“包含”方法来获取 Reportcolumn 实体及其属性。

另一种选择是在映射到 REPORTCOLUMNS 主键的 REPORTROWS 实体中显式指定 REPORTCOLUMNID 属性。您应该能够执行“reportrow.REPORTCOLUMNID”来获取关联的reportcolumn 实体的ID，但在再次查询之前您将无法获取其他属性。

# javascript - JavaScript var 在 Rails 中使用特殊字符初始化长文本失败

> ID：14230658
> 
> 赞同：0
> 
> 时间：2013-01-09T08:01:33.153
> 
> 标签：javascript, jquery, ruby-on-rails

我尝试在 .js.erb 模板中初始化一个 JavaScript 变量，其文本具有换行符和特殊字符（如“>”、“”）。要可视化此文本，请考虑较长的电子邮件对话，较早的回复行以 char 开头>”。

在 rails 的控制器中获取文本，并用它初始化一个 ruby​​ 变量。因此，我使用以下行来完成该过程，但它失败了（可能是换行的原因）。但是，我认为在日常 Web 编程中使用这样的字符串值是很常见的情况。你如何克服这个问题（欢迎使用 jQuery 选项）

```
var jstext = "<%= @rails_long_text %>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:05:07.290

做：

```
var jstext = "<%=j @rails_long_text %>"; 
```

这将转义内容以符合 js 的期望。

# python - 如何在类创建时使用 self.method()？

> ID：14230660
> 
> 赞同：-1
> 
> 时间：2013-01-09T08:01:33.927
> 
> 标签：python

在某些情况下，我想在类创建时使用实例方法。

**我只想在权限列表中使用 self ..这是我的问题**

但它不起作用。是否有一些解决问题的方法？

```
class PermissionChecker(object):
    # how to use self in class create time.
    permissions = [self.is_superuser(), self.is_god()]

    def is_superuser(self):
        # use self.property just like self.name...
        return True

    def is_god(self):
        return True

class Child(PermissionChecker):
    permissions = PermissionChecker.permissions + [self.is_coder(),]

    def is_coder(self):
        return True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:05:29.753

看起来您将该术语`attribute`与`property`;混淆了。您不能`self`在类定义本身中使用，它仅可用于方法。

我认为您正在寻找[`property`描述符](http://docs.python.org/2/library/functions.html#property)：

```
class PermissionChecker(object):
    @property
    def permissions(self):
        return [self.is_superuser(), self.is_god()]

    def is_superuser(self):
        # use self.property just like self.name...
        return True

    def is_god(self):
        return True 
```

通过使用`property`（上面用作`@`装饰器），您可以将方法转换为属性：

```
>>> pcheck = PermissionChecker()
>>> pcheck.permissions
[True, True] 
```

`permissions`每次`.permissions`在实例上访问属性时都会调用该方法。

或者，在`__init__`初始化程序中设置列表：

```
class PermissionChecker(object):
    def __init__(self):
        self.permissions = [self.is_superuser(), self.is_god()]

    def is_superuser(self):
        # use self.property just like self.name...
        return True

    def is_god(self):
        return True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:05:40.410

看起来您正在尝试提供属性。这可以这样做：

```
class PermissionChecker(object):
    def _get_permissions(self):
        return [self.is_superuser(), self.is_god()]

    permissions = property(_get_permissions)

    def is_superuser(self):
        # use self.property just like self.name...
        return True

    def is_god(self):
        return True 
```

# java - Eclipse JBoss Tools 配置错误

> ID：14230661
> 
> 赞同：3
> 
> 时间：2013-01-09T08:01:43.067
> 
> 标签：java, hibernate, jboss, eclipse-juno

我在用：

```
Eclipse Java EE IDE for Web Developers.
Version: Juno Service Release 1
Build id: 20121004-1855 
```

离线`Jboss`工具 zip 文件是 `jbosstools-4.0.0.Final.aggregate-Update-2012-12-06_13-22-08-B136`

我成功添加了 zip 文件，它也连接到数据库，请参阅截图 [http://imageshack.us/photo/my-images/21/jboss.png/](http://imageshack.us/photo/my-images/21/jboss.png/)

我的休眠罐子是（hibernate-release-4.1.8.Final）

```
hibernate-entitymanager-4.1.8.Final.jar
hibernate-envers-4.1.8.Final.jar
antlr-2.7.7.jar
dom4j-1.6.1.jar
hibernate-commos-annotations-4.0.1.Final.jar
hibernate-core-4.1.8.Final.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
javassist-3.15.0-GA.jar
jboss-logging-3.1.0.GA.jar
jboss-transaction-api_1.1_spec-1.0.0.Final.jar 
```

在屏幕截图中，第一个例外是

```
org.hibernate.HibernateException: could not instantiate RegionFactory [org.hibernate.cache.impl.bridge.RegionFactoryCacheProviderBridge]**

    org.hibernate.HibernateException: could not instantiate RegionFactory [org.hibernate.cache.impl.bridge.RegionFactoryCacheProviderBridge]
        at org.hibernate.cfg.SettingsFactory.createRegionFactory(SettingsFactory.java:402)
        at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:270)
        at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2163)
        at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2155)
        at org.hibernate.console.ConsoleConfiguration$6.execute(ConsoleConfiguration.java:430)
        at org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)
        at org.hibernate.console.ConsoleConfiguration.execute(ConsoleConfiguration.java:107)
        at org.hibernate.console.ConsoleConfiguration.getSettings(ConsoleConfiguration.java:428)
        at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter$2.execute(LazyDatabaseSchemaWorkbenchAdapter.java:119)
        at org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)
        at org.hibernate.console.ConsoleConfiguration.execute(ConsoleConfiguration.java:107)
        at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter.readDatabaseSchema(LazyDatabaseSchemaWorkbenchAdapter.java:115)
        at org.hibernate.eclipse.console.workbench.LazyDatabaseSchemaWorkbenchAdapter.getChildren(LazyDatabaseSchemaWorkbenchAdapter.java:65)
        at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.fetchDeferredChildren(BasicWorkbenchAdapter.java:106)
        at org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:235)
        at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
    Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at org.hibernate.cfg.SettingsFactory.createRegionFactory(SettingsFactory.java:397)
        ... 15 more
    Caused by: org.hibernate.cache.CacheException: could not instantiate CacheProvider [org.hibernate.cache.internal.NoCacheProvider]
        at org.hibernate.cache.impl.bridge.RegionFactoryCacheProviderBridge.<init>(RegionFactoryCacheProviderBridge.java:66)
        ... 20 more
    Caused by: java.lang.ClassNotFoundException: org.hibernate.cache.internal.NoCacheProvider
        at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
        at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
        at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
        at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.Class.forName0(Native Method)
        at java.lang.Class.forName(Unknown Source)
        at org.hibernate.util.ReflectHelper.classForName(ReflectHelper.java:192)
        at org.hibernate.cache.impl.bridge.RegionFactoryCacheProviderBridge.<init>(RegionFactoryCacheProviderBridge.java:63)
        ... 20 more 
```

# c++ - 将通过 `DynamicMessageFactory` 解析的消息转换为具体的子类型

> ID：14230670
> 
> 赞同：0
> 
> 时间：2013-01-09T08:02:52.797
> 
> 标签：c++, protocol-buffers

我正在创建一个包含 protobuf 消息解析的库。由于库不知道它将用于哪些消息，它使用`google::protobuf::DynamicMessageFactory`.

但是，我希望能够将解析的消息传递回程序的其他知道实际消息类型的部分。

**换句话说，同样的问题：** 我有一个`const google::protobuf Message*`创建的 via`google::protobuf::compiler::Importer`和`google::protobuf::DynamicMessageFactory`. 解析后，我知道消息实际上是 a `TestMessage`（并且程序知道该类），我可以以某种方式将其转换`Message*`为 a吗？`TestMessage`

我不能简单地`dynamic_cast`传递消息，转换的结果总是`NULL`如果消息被解析为`Message::ParseFromXXX`我猜测的一般，因为这些方法只返回某种代理对象并且不知道实际的消息类。

我还尝试了以下方法：

```
//message is a const google::protobuf::Message* parsed using DynamicMessageFactory
TestMessage *tr = new TestMessage;
tr->CopyFrom( *message ); 
```

但是由于protobuf说“试图合并不同类型的消息”而失败。请注意， `tr->GetTypeName()`并且`message->GetTypeName()`确实返回相同的类型名称。

我很感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:11:22.787

TestMessage 实际上是从 Message 继承的吗？**dynamic_cast**返回 null的事实表明它没有，这意味着类是不相关的，尝试从一个类转换到另一个类是没有意义的。或者它可能使用私有继承。

# mysql - 在mysql中更快的分组？

> ID：14230672
> 
> 赞同：1
> 
> 时间：2013-01-09T08:03:05.237
> 
> 标签：mysql, sql, database

我有一张这样的桌子

```
|customer_reference|date_and_time|
       111          2013-01-01
       111          2013-01-02
       111          2013-01-03
       222          2013-01-01
       222          2013-01-02
       333          2013-01-01 
```

我想根据 customer_reference 获得最后一个 date_and_time 的行。我写了一些查询，但速度很慢。我的查询是这样的。

```
SELECT MAX(date_and_time) AS time
FROM t_table GROUP BY customer_reference 
```

我在该表中有超过 600.000 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:07:07.153

只需在列上添加索引`customer_reference`并执行下面的查询

```
SELECT customer_reference, MAX(date_and_time) AS time
FROM t_table 
GROUP BY customer_reference 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:10:37.977

如果向表中添加索引会更好

```
 ALTER TABLE `t_table` ADD INDEX `customer_reference` (`customer_reference`) 
```

然后运行您的查询

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T08:14:49.220

**索引**是您可以在 MySQL 表上启用以提高性能的功能。

您必须在列上创建索引，`customer_reference` **[通过 MySQL 中的列索引最大化查询性能](http://www.databasejournal.com/features/mysql/article.php/3840606/Maximizing-Query-Performance-through-Column-Indexing-in-MySQL.htm)**

如果我们在创建时没有定义索引，我们可以稍后添加一个，使用以下语法：

```
CREATE INDEX id_index ON t_table(customer_reference); 
```

# php - 使用 xampp 安装 oci8

> ID：14230675
> 
> 赞同：1
> 
> 时间：2013-01-09T08:03:14.673
> 
> 标签：php, oracle, xampp

我已经在我的 linux 机器上安装了 xampp。我想为 php 添加 oci8 oracle 11g 扩展。我所做的：

```
[root@cpcolvir bin]# /opt/lampp/lampp oci8
Please enter the path to your Oracle or Instant Client installation:
[/opt/oracle] /usr/lib/oracle/11.2/client64/lib/ 
```

但这给了我错误：

```
Can't find libclntsh.so. Sorry. 
```

但我确信**libclntsh.so**位于**/usr/lib/oracle/11.2/client64/lib/**中。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-24T10:50:00.260

我刚刚安装了 Oracle Instant Client 11.2、Ubuntu 12.04 和 xampp 1.7.x。尝试以下步骤

1.  从 Oracle 下载 instantclient-basic-linux-11.2.0.4.0.zip 和 instantclient-sdk-linux-11.2.0.4.0.zip

2.  将其解压缩到同一文件夹并将其移动到 /opt/oracle_instantclient

3.  将以下设置附加到 /etc/environment 的末尾

    $sudo vi /etc/环境

    ...

    LD_LIBRARY_PATH="/opt/oracle_instantclient"

    TNS_ADMIN="/opt/oracle_instantclient"

    ORACLE_BASE="/opt/oracle_instantclient"

    ORACLE_HOME=$ORACLE_BASE

4.  构建 oci8.so（这应该没有错误地完成）

    $sudo pecl 安装 oci8

    配置时会提示输入，输入如下

    即时客户端，/opt/oracle_instantclient

5.  将以下行添加到 /opt/lampp/etc/php.ini

    扩展=oci8.so

6.  创建以下链接以避免启动 apache 错误

    $sudo ln -s /opt/oracle_instantclient/libclntsh.so.11.1 /opt/oracle_instantclient/libclntsh.so

    $sudo ln -s /opt/oracle_instantclient/libclntsh.so.11.1 /opt/oracle_instantclient/libclntsh.so.10.1

7.  重启你的lampp服务器

    $sudo /opt/lampp/lampp 重启

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T15:49:11.430

安装 oracle instantclient 后，您应该设置库路径并让最后一个反斜杠消失

```
export LD_LIBRARY_PATH=/usr/lib/oracle/11.2/client64/lib:$LD_LIBRARY_PATH 
```

并重新安装oci8

```
pecl install oci8 
```

通过添加进一步编辑您的 php.ini (my is at `/etc/php5/apache2/php.ini`)

```
extension=oci8.so 
```

并重新启动apache

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-24T08:53:08.427

我面临同样的问题并进行了一些追踪。当我查看这个文件时，我们执行“./lampp oci8”时的脚本文件；

```
/opt/lampp_181/share/lampp/oci8install 
```

我发现它实际上不是在寻找“libclntsh.so”，而是在寻找“libclntsh.so.10*”

```
libclntsh=`find $ora_home -name "libclntsh.so.10*" | head -1` 
```

尝试如下创建软链接“libclntsh.so.10.1 -> libclntsh.so”和“libclntsh.so -> libclntsh.so.11.1”；

```
lrwxrwxrwx 1 oracle dba       69 2013-12-24 10:46 libclntsh.so -> /home/oracle/app/oracle/product/11.2.0/client_2/lib/libclntsh.so.11.1*
lrwxrwxrwx 1 oracle dba       64 2013-12-24 10:46 libclntsh.so.10.1 -> /home/oracle/app/oracle/product/11.2.0/client_2/lib/libclntsh.so*
-rwxr-xr-x 1 oracle dba 39997991 2013-12-24 10:46 libclntsh.so.11.1* 
```

以前从未尝试过，但我在完整的 Oracle Client lib 目录中看到了这一点。可以肯定的是，当我将 oci8 指向该位置时，我的 XAMPP 运行良好。

> Oracle 运行时客户端库版本 11.2.0.1.0

我的 phpinfo() 输出

# c++ - 程序终止后 C++ const static 的行为

> ID：14230681
> 
> 赞同：1
> 
> 时间：2013-01-09T08:03:44.067
> 
> 标签：c++, static, exit

我有一个程序在启动时创建一个线程（我使用 C++ Boost 库来创建线程）。在主程序中，我已将我的清理功能注册为。

```
atexit(cleanExit)
// Trap some signals for a clean exit.
signal(SIGQUIT, signalled)
signal(SIGABRT, signalled)
signal(SIGTERM, signalled)
signal(SIGINT, signalled)

static void signalled(int signal)
{
    exit(signal)
}
static void cleanExit(void)
{
     thread->interrupt();
     thread->join();
} 
```

正如您在上面的干净退出过程中看到的那样，我中断了线程，然后在此处（在主进程中）等待，以便线程执行其清理工作。当我调用 thread->interrupt 时，我的线程会被中断，我会执行线程清理工作。到这里一切都很顺利，没有问题。

但是当我在线程中调用清理函数时问题就来了。在清理函数中，我将一些状态发送回服务器，为此我创建了一个实用函数，在这个实用函数中，我正在访问该类的“const static string”成员。问题是当我访问这个 const 静态字符串时，我的应用程序卡住了。我已经用 strace 进行了检查，我得到了一个 Seg Fault。但是当我将这个“const static string”更改为“const string”时，我的清理工作顺利进行。

问题 一旦程序终止，C++“const static”的行为是什么。当 exit 被调用（可以在上面的例子中看到）或对此行为有任何想法时，他们是否放弃了。

# 更新＃1

这是线程处理函数。正如我上面提到的，它是一个 Boost 线程。

```
try {
    while ( true ) {
        // Do your job here.
        // 1: We can be interrupted.
        boost::this_thread::interruption_point();
    }
}
catch (boost::thread_interrupted const& )
{
    // Before exiting we need to process all request messages in the queue
    completeAllWorkBeforeExiting();
} 
```

当主程序调用 thread->interrupt 时，线程将在 #1 处引发 thread_interrupted 异常，并捕获此异常我正在做我的清理工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:14:47.270

`const`不影响任何对象被销毁的时间。

`static`对象的销毁顺序与其创建顺序相反。`atexit`本质上是用给定的函数创建一个匿名`static`对象作为它的析构函数。也就是说，`static`对象析构函数和`atexit`回调按照与它们的构造/注册相反的顺序发生。

`exit`从信号处理程序调用是完全不安全的。实际上允许信号处理程序做的所有事情都是设置一个标志，稍后由线程轮询。正如您所提到的，信号处理程序在中断时运行，因此它可能会中断系统调用。`malloc`它可能会以绕过 的多线程锁的方式中断`malloc`，因为重入是在同一个线程上，而不是通常发生的不同线程。

所以这是各种不可预测行为的根源。如果没有看到更多，我无法更具体地了解所产生`static`的效果，但它可能与更改对象的生命周期和/或每个对象实例化一次有关。

# database - 是否从应用程序模型创建数据库模式？

> ID：14230690
> 
> 赞同：0
> 
> 时间：2013-01-09T08:04:15.693
> 
> 标签：database, model-view-controller, orm, model

一般来说，我有一个关于 ORM 的问题，以及管理企业/小型应用程序的数据库模式和模型的最佳方式（实际上，要始终保持应用程序模型和数据库模式同步）

这是**从应用程序模型**创建数据库模式或**首先创建数据库模式然后从中创建应用程序模型的好**方法吗？哪一个更好？

**注意：**我在 Django ORM 中看到了这个原理，它有一个从应用程序模型创建/同步应用程序数据库模式的工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:15:02.043

我通常从一个逻辑模型开始（即为问题域建模），然后从那里开始。

在动态脚本语言中，实践似乎是创建类，然后让任何数据库迁移工具为您创建模式。

在 Java/Hibernate 中，我一直在使用的商店对此过于偏执，因此我们独立于类创建了 DDL。然后类和 ORM 映射引用现有模式。

# c# - 如果验证方法应该返回验证结果，为什么会有 ArgumentException 类？

> ID：14230695
> 
> 赞同：2
> 
> 时间：2013-01-09T08:04:23.853
> 
> 标签：c#, .net, validation, exception, argumentexception

我有点困惑。

MSDN 对 ArgumentException 的说法是：

> “当提供给方法的参数之一无效时引发的异常。”

因此，如果传递给我的方法的参数无效，我会抛出异常。

但我也发现建议返回布尔值加上一个字符串是有原因的。- 而不是抛出异常。

所以，

**问题**：当validationg方法参数，当参数无效时，Validation方法什么时候应该抛出异常，什么时候不应该？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T08:10:52.113

如果您有一个方法，其目的是验证其参数（例如：这是一个有效的用户名/密码组合），那么一定要返回一个布尔值（false = 无效）加上一个原因。不要为预期的情况抛出异常（如果不是预期的，为什么要验证？）

如果你有一个“Process”方法，情况就不同了：你必须有有效的参数，所以当它们无效时抛出异常（说明问题）是合理的。

# python - python web框架使用mod_wsgi下的缓存

> ID：14230696
> 
> 赞同：0
> 
> 时间：2013-01-09T08:04:24.360
> 
> 标签：python, flask, mod-wsgi

代码是这样的（我正在使用烧瓶和[烧瓶缓存](http://packages.python.org/Flask-Cache/#api)，但这可能是一个普遍的问题）：

```
@cache.memoize(500000)
def big_foo(a,b):
    return a + b + random.randrange(0, 1000) 
```

如果我在 Python 解释器中运行它，我总是可以通过调用`big_foo(1,2)`.

但是，如果我在应用程序中添加此功能并用于`mod_wsgi`守护进程，则在浏览器中请求。（在`big_foo`该请求的视图函数中调用）。我发现每次的结果都不一样。

我认为每次结果都不同，因为`mod_wsgi`使用多个进程来启动应用程序。每个进程可能都有自己的缓存，并且缓存不能在进程之间共享。

我的猜测对吗？如果正确，我如何分配一个且只有一个缓存用于全局访问？如果不是，我的代码哪里出了问题？

以下是用于的配置`flask-cache`

```
UPLOADS_FOLDER = "/mnt/Storage/software/x/temp/"                                                                                 
class RadarConfig(object):                                                                                                                   
    UPLOADS_FOLDER = UPLOADS_FOLDER                                                                                                          
    ALLOWED_EXTENSIONS = set(['bed'])                                                                                                        
    SECRET_KEY = "tiananmen"                                                                                                                 
    DEBUG = True                                                                                                                             
    CACHE_TYPE = 'simple'                                                                                                                    
    CACHE_DEFAULT_TIMEOUT = 5000000                                                                                                          
    BASIS_PATH = "/mnt/Storage/software/x/NMF_RESULT//p_NMF_Nimfa_NMF_Run_30632__metasites_all"                              
    COEF_PATH = "/mnt/Storage/software/x/NMF_RESULT/MCF7/p_NMF_Nimfa_NMF_Run_30632__metasample_all"                              
    MASK_PATH = "/mnt/Storage/software/x/NMF_RESULT/dhsHG19.bed" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:15:51.557

这是你的问题：`CACHE_TYPE = 'simple'`。从`SimpleCache` [文档](http://werkzeug.pocoo.org/docs/contrib/cache/#werkzeug.contrib.cache.SimpleCache)：

> 单进程环境的简单内存缓存。此类主要存在于开发服务器上，并不是 100% 线程安全的。

对于生产来说，更适合的后端是`memcached`,`redis`和`filesystem`，因为它们被设计为在并发环境中工作。

# mongodb - mongodb 搜索典型的 Foursquare 类应用程序的基准是什么？

> ID：14230699
> 
> 赞同：-1
> 
> 时间：2013-01-09T08:04:30.750
> 
> 标签：mongodb

查询速度快多少？。1秒？要不然是啥？

我的数据库有 160 万个企业和基于位置的用户搜索。什么是追求速度的好目标？

多快是合理的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:14:19.767

我会使用 MongoDB[自己的分析级别指南](http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/)，该指南认为慢于 100 毫秒的操作很慢：

> **默认情况下，慢操作是那些慢于 100 毫秒的操作。**

对于少于 100 毫秒的读取查询，用户通常不会注意到所有非数据库操作都在最佳执行的 Web 应用程序的延迟。

# iphone - OpenGL ES presentRenderBuffer 持续时间取决于 frameInterval 值

> ID：14230702
> 
> 赞同：1
> 
> 时间：2013-01-09T08:04:39.827
> 
> 标签：iphone, ios, opengl-es

我正在使用 CADisplayLink 为 iOS 上一个非常简单的 OpenGL ES 动画触发“更新”事件。动画有大约 10 个带纹理的四边形。我试图以 60 FPS 的速度运行它，但我看到了一些故障。将此更改为 30 FPS 时，动画运行更流畅。在对此进行分析之后，我看到大部分时间都花在了 presentRenderBuffer 中。

这些是结果：

```
m_displayLink.frameInterval = 2;

[379406923.204] Update time 0.000358
[379406923.206] Render time 0.001402
[379406923.207] Present time 0.001136
[379406923.238] Update time 0.000370
[379406923.239] Render time 0.001393
[379406923.241] Present time 0.001148
[379406923.271] Update time 0.000368
[379406923.273] Render time 0.001377
[379406923.274] Present time 0.001226
[379406923.305] Update time 0.000380
[379406923.307] Render time 0.001390
[379406923.308] Present time 0.001183
[379406923.338] Update time 0.000375
[379406923.339] Render time 0.001376
[379406923.341] Present time 0.001178
[379406923.372] Update time 0.000981
[379406923.375] Render time 0.001418
[379406923.379] Present time 0.004452 
```

从`m_displayLink.frameInterval = 2`分析的结果中我可以看到总帧时间足以达到 60 FPS，但是当将`m_displayLink.frameInterval`值更改`1`为结果时是出乎意料的：

```
m_displayLink.frameInterval = 1;  

[379407317.151] Update time 0.000204 
[379407317.152] Render time 0.000827 
[379407317.172] Present time 0.019173 
[379407317.172] Update time 0.000231 
[379407317.173] Render time 0.000856 
[379407317.201] Present time 0.027540 
[379407317.202] Update time 0.000204 
[379407317.202] Render time 0.000834 
[379407317.218] Present time 0.015187 
[379407317.218] Update time 0.000192 
[379407317.219] Render time 0.000803 
[379407317.251] Present time 0.031392 
[379407317.252] Update time 0.000215 
[379407317.253] Render time 0.000858 
[379407317.267] Present time 0.014433 
[379407317.268] Update time 0.000196 
[379407317.269] Render time 0.001248 
[379407317.301] Present time 0.031312 
```

正如您所看到的，使用时它会大几倍

```
m_displayLink.frameInterval = 1; 
```

请注意，最后一个命令`Render()`是`glFinish()`

您知道为什么会出现这种意外行为吗？是否有可能达到 60 FPS（从我的第一次分析开始，我有大约 500 FPS！）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:42:53.643

我通过将 OpenGL 初始化从`view initWithFrame`. 我知道这听起来很尴尬，但这将我的 GPU 使用率从 96% 降低到了 6%。现在，这个简单的应用程序以 60 FPS 的速度运行非常流畅，CPU 使用率为 2%，GPU 使用率为 6%（应该如此！）。

# web-services - ClassNotFoundException，缺少 ServletContainerAdaptor

> ID：14230703
> 
> 赞同：0
> 
> 时间：2013-01-09T08:04:41.877
> 
> 标签：web-services, rest, servlets

我正在创建一个 RESTfulwebservices 项目。当我要运行这个项目时，我会收到这个错误。ClassNot FoundException...ServletAdaptor
问题。

```
 SEVERE: Servlet /XybuyProject threw load() exception
 java.lang.ClassNotFoundException:   
 com.sun.jersey.server.spi.container.servlet.ServletAdaptor
at 

 org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:415)
at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:397)
at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:118)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1048)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:996)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4834)
at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5155)
at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5150)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

这是 Web.xml ：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   
   xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns    
   /javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee   
   http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
   <display-name>FirstProject</display-name>
   <welcome-file-list>
   <welcome-file>index.html</welcome-file>
   <welcome-file>index.htm</welcome-file>
   <welcome-file>index.jsp</welcome-file>
   <welcome-file>index2.jsp</welcome-file>
    </welcome-file-list>
  <servlet>
<servlet-name>ServletAdaptor</servlet-name>
<servlet-class>
com.sun.jersey.server.spi.container.servlet.ServletAdaptor
</servlet-class>
<init-param>
<param-name>com.sun.jersy.config.property.packages</param-name>
<param-value>com.xybuy.webservice</param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet>
  <servlet-mapping>
  <servlet-name>ServletAdaptor</servlet-name>
   <url-pattern>/REST/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

你能告诉我它背后的问题是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:48:46.900

根据堆栈跟踪，您似乎正在使用 Tomcat，它是一个准系统 JSP/Servlet 容器，而不是一个成熟的 Java EE 容器。Jersey 是一个 JAX-RS 实现，通常已经捆绑在成熟的 Java EE 应用程序服务器中，例如 Glassfish。也许您正在阅读 Jersey 书籍/教程或下载针对 Glassfish 或其他 Java EE 容器的示例，因此假定您不需要单独安装它。

然而，在 Tomcat 上，Jersey 没有被捆绑，当你`ClassNotFoundException`在`web.xml`. 您需要单独[下载](http://jersey.java.net/)Jersey JAR 文件并将它们放入`/WEB-INF/lib`webapp 的文件夹中。

# ios - 如何在 iOS 中初始化整数？

> ID：14230705
> 
> 赞同：1
> 
> 时间：2013-01-09T08:05:00.560
> 
> 标签：ios, objective-c

我定义

```
@property (nonatomic, assign) int currentUserNum;
@property (nonatomic, assign) BOOL isAlive; 
```

在`@interface MyClass`

和定义`-init`的方法`@implementation MyClass`

```
@synthesize currentUserNum, isAlive;
-(id) init {
  if (self = [super init])  {
     self.currentUserNum = 0;
     self.isAlive = YES;
  }
  return self;
} 
```

`self.currentUserNum = 0;`是崩溃了，但`self.isAlive = YES;`可以工作！他们都是`assign`财产。

我想知道为什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T08:08:37.593

您的`init`方法缺少很多重要的代码。

```
- (id)init {
    if ((self = [super init])) {
        _currentUserNum = 0; // it's not wise to reference properties in the init method
    }

    return self;
} 
```

每个`init`方法都应该遵循这个基本模式。您分配`self`调用适当`super init`或其他的值`self init`。如果不是`nil`，则执行适当的初始化代码，最后返回`self`.

# maven - Maven：父聚合器是项目本身

> ID：14230706
> 
> 赞同：0
> 
> 时间：2013-01-09T08:05:00.787
> 
> 标签：maven

我想就以下问题向您寻求帮助。

考虑 3 个项目 A、B、C。项目 B 和 C 是独立模块（生成 jar）。这些项目可以独立存在。项目 A 在某种程度上是特定的，我需要它充当模块（对于项目 B，C）父级。当我构建项目 A 时，我也需要构建 B、C。然而，项目 A 有它自己的来源，当我构建它时，我希望它也能生成 jar 文件。

据我所知，这在 Maven 世界中有点矛盾。我只需要我的父 pom 来管理模块，同时用 jar 类型声明它。

到目前为止，我还没有找到任何关于如何管理这个的资源，所以希望你们能提出一些想法。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:14:53.613

这违反了单一职责原则。项目 A 应该是一个聚合器，或者它应该在构建后产生一个工件。所以你应该把项目 A 的来源分解到项目 D 中，让 B 和 C 依赖于 D。

如果您坚持继承对 A 中包含的当前源的依赖，那么我建议您应该创建另一个项目 E。层次结构应该如下所示：

```
A
+-D
+-E
  +-B
  +-C 
```

新的聚合器 E 应该依赖于 D。

# windows-phone-7 - 同时运行多个 Windows Phone 7 模拟器实例

> ID：14230708
> 
> 赞同：5
> 
> 时间：2013-01-09T08:05:13.530
> 
> 标签：windows-phone-7, windows-phone-7-emulator

[根据这篇](https://stackoverflow.com/questions/4097841/how-can-i-run-multiple-instances-of-the-windows-phone-7-emulator-at-the-same-tim)文章和[这篇](http://dotnet.dzone.com/articles/how-run-multiple-instances)文章，我正在尝试同时启动多个 Windows Phone 7 模拟器实例。

但是，只要实例已经在运行，新实例就会启动并迅速消失，而不会出现任何错误消息。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T10:54:31.197

打开模拟器的新实例需要大量可用的**物理**RAM（它不使用交换）。关闭一些程序以释放一些内存，然后重试。

# php - Zend 放在哪里，改变的路径是什么？

> ID：14230714
> 
> 赞同：0
> 
> 时间：2013-01-09T08:05:49.030
> 
> 标签：php, zend-framework2

我下载并解压了 Zend Framework，它位于一个名为`ZendFramework-2.0.6`.
文档说我需要换`php.ini - include_path`行。
我希望 - 这是那条线（不变）：`include_path = ".;C:\xampp\php\PEAR"`
[在这个页面上](https://stackoverflow.com/questions/13858926/zend-framework-in-xampp)，接受的答案说我不应该改变这条路（如果我理解得很好）。
有人可以澄清我应该在哪里放置`ZendFramework-2.0.6`文件夹，哪个路径以及我需要如何更改它？
我正在使用 xampp 1.8.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:22:10.807

这完全取决于您，但将其放入`vendor`目录中是一种常见的做法。

但是，我建议使用 composer 进行安装，因为它会自动安装依赖项并配置您的自动加载。[从Skeleton Application](https://github.com/zendframework/ZendSkeletonApplication/)开始肯定是个好主意，[README.md](https://github.com/zendframework/ZendSkeletonApplication/blob/master/README.md)解释了 composer 的安装过程。

`include_path`在这种情况下，您无需更改。

# java - net.sf.jasperreports.engine.JRException：编译报告 java 源文件时出错

> ID：14230719
> 
> 赞同：1
> 
> 时间：2013-01-09T08:06:11.343
> 
> 标签：java

我的应用程序在我的电脑 HP DV7-Pvillion 上完美运行，但是当我将我的应用程序的 jar 及其库放在其他机器上时，除了生成 PDF 文件之外，其他机器都在运行。在我的日志文件中出现以下错误：**编译报告 java 源文件时出错**

ps：我正在使用netbeans 6.8，我使用iRaport

我应该提一下，我的应用程序在安装了 netbeans 的工作站上完美运行，但是如果我尝试在另一台无法生成的机器上运行 jar。

你能给我一个解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-28T11:29:29.603

在 lib 文件夹中包含 Jar jasper-compiler-jdt

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-13T17:53:45.753

据我所知，**jasper-compiler-jdt**现在以**ecj...jar**的形式分发。因此，如果您在**jasper 报告库**中找不到**jasper-compiler-jdt** ，请搜索**ecj...jar**并将其包含在您的项目中。

# shopify - 在 Shopify 中获取产品的集合名称

> ID：14230720
> 
> 赞同：3
> 
> 时间：2013-01-09T08:06:13.057
> 
> 标签：shopify

在 Shopify 中，如何获取特定产品所属的自定义集合的名称？

例如获取我可以使用的***SKU***`{{ line_item.sku }}`或获取我可以使用的***价格***`{{ line_item.line_price`}}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:37:33.107

从[API docs](http://api.shopify.com/customcollection.html#index)列出某个 product_id 的所有自定义集合：

```
GET /admin/custom_collections.json?product_id=632910392 
```

回复：

```
HTTP/1.1 200 OK

{
  "custom_collections": [
    {
      "body_html": "<p>The best selling ipod ever</p>",
      "handle": "ipods",
      "id": 841564295,
      "published_at": "2008-02-01T19:00:00-05:00",
      "sort_order": "manual",
      "template_suffix": null,
      "title": "IPods",
      "updated_at": "2008-02-01T19:00:00-05:00",
      "image": {
        "created_at": "2012-12-11T12:01:29-05:00",
        "src": "http://cdn.shopify.com/s/files/1/0006/9093/3842/collections/ipod_nano_8gb.jpg?0"
      }
    }
  ]
} 
```

# visual-studio - 如何在 Visual Studio 中定义断点集？

> ID：14230723
> 
> 赞同：5
> 
> 时间：2013-01-09T08:06:17.723
> 
> 标签：visual-studio, add-in, breakpoints

我想在 Visual Studio 中定义一些断点集，以便在它们之间切换。

通过**set**，我的意思是我定义的某些行处的断点集合。我有很多场景想要在这些集合之间切换以简化调试。

**例如：**

```
Set 1: breakpoints at line 1, line 3, line 5, line 7
Set 2: breakpoints at line 2, line 4, line 6, line 8, 
```

有没有办法在 Visual Studio 中做到这一点（首选 2008 及更高版本），或者是否有任何加载项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T12:04:20.450

> 此功能在 Visual Studio 2010 和 2012 的断点窗口中可用。 [http://msdn.microsoft.com/en-us/library/dd293674.aspx](http://msdn.microsoft.com/en-us/library/dd293674.aspx)

(c) Visual Studio 团队（Microsoft 产品团队）2012 年 11 月 21 日

[http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2394909-breakpoint-sets-or-groups-enable-disable-breakp](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2394909-breakpoint-sets-or-groups-enable-disable-breakp)

此外，这是在 Visual Studio 2008 中实现此功能的小宏。您可以将其复制到宏中的任何模块（工具 > 宏 > 宏资源管理器 > 右键单击​​任何模块 > 编辑 > 粘贴那里），然后将其添加为对任何菜单的命令（通过工具 > 自定义...）

```
Dim savePath = "c:\temp"
Sub SaveBreakpoints()
    Dim fname As String
    Dim lBreakpointsList As System.Collections.Generic.List(Of Breakpoint)
    Dim fileList = IO.Directory.GetFiles(savePath)
    Dim lFiles = ""
    For Each lFile In fileList
        lFiles = String.Concat(lFiles, IO.Path.GetFileNameWithoutExtension(lFile), vbCrLf)
    Next
    fname = InputBox(String.Concat("Existing sets:", vbCrLf, lFiles, vbCrLf, "Name of new set:"), "Save Breakpoints", "1")
    If fname = "" Then
        Return
    End If
    lBreakpointsList = New System.Collections.Generic.List(Of Breakpoint)
    For Each lBreakpoint As EnvDTE.Breakpoint In DTE.Debugger.Breakpoints
        lBreakpointsList.Add(New Breakpoint(lBreakpoint.File, lBreakpoint.FileLine, lBreakpoint.Condition))
    Next

    Using fs As New IO.StreamWriter(String.Concat("c:\temp\", fname, ".txt"))
        For Each lBreakpoint As Breakpoint In lBreakpointsList
            fs.WriteLine(String.Format("{0}   |||   {1}   |||   {2}", lBreakpoint.File, lBreakpoint.Line, lBreakpoint.Condition))
        Next
    End Using
End Sub

Sub RestoreBreakpoints()
    Dim fname As String
    Dim lBreakpointsList As System.Collections.Generic.List(Of Breakpoint)
    Dim lProperties As String()
    Dim fileList = IO.Directory.GetFiles(savePath)
    Dim lFiles = ""
    For Each lFile In fileList
        lFiles = String.Concat(lFiles, IO.Path.GetFileNameWithoutExtension(lFile), vbCrLf)
    Next
    fname = InputBox(String.Concat("Enter name of set to restore. Existing sets:", vbCrLf, vbCrLf, lFiles), "Restore Breakpoints", "1")
    If fname = "" Then
        Return
    End If
    lBreakpointsList = New Collections.Generic.List(Of Breakpoint)
    Dim lBp As Breakpoint
    Using fs As New IO.StreamReader(String.Concat("c:\temp\", fname, ".txt"))
        While Not fs.EndOfStream
            lProperties = fs.ReadLine().Split(New String() {"   |||   "}, StringSplitOptions.None)
            lBp = New Breakpoint(lProperties(0), lProperties(1), lProperties(2))
            lBreakpointsList.Add(lBp)
        End While
    End Using
    Try
        DTE.ExecuteCommand("Debug.DeleteAllBreakpoints")
    Catch ex As Exception
    End Try
    For Each lBp1 As Breakpoint In lBreakpointsList
        DTE.Debugger.Breakpoints.Add(, lBp1.File, Convert.ToInt32(lBp1.Line), , lBp1.Condition)
    Next
End Sub

Class Breakpoint
    Public File
    Public Line
    Public Condition

    Public Sub New(ByVal pFile, ByVal pLine, ByVal pCondition)
        File = pFile
        Line = pLine
        Condition = pCondition
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:20:53.703

您可以单击行首。然后单击断点>插入断点。您可以对每一行执行此操作。我想这就是你要找的。

# asp.net-mvc - 使用 MVC 4 EditorFor 模板时出现复选框验证错误

> ID：14230726
> 
> 赞同：2
> 
> 时间：2013-01-09T08:07:00.343
> 
> 标签：asp.net-mvc, kendo-ui, editorfor

选中复选框时出现奇怪的复选框验证错误。jquery.min 上出现错误：错误：语法错误，无法识别的表达式：

输入：hidden[name='CategoriesandItems[1'].ChecklistItems[2].IsSelected]

复杂/嵌套视图模型

```
public class ChecklistVM
{        
    public int ChecklistId {get; set;}
    public string ChecklistName { get; set; }
    public List<CategoryandItemsVM> CategoriesandItems { get; set;     }       
}

public class CategoryandItemsVM
{
    public int CategoryId { get; set; }
    public string CategoryName { get; set; }
    public List<ChecklistItemVM> ChecklistItems { get; set; }
}

public class ChecklistItemVM
{   
    public int? ChecklistItemId { get; set; }
    public bool IsSelected { get; set; }
    public string PropName {gets; set;)
} 
```

当我单击 IsSelected CheckBox 时，出现以下语法错误。**注意单引号的位置。**

错误：语法错误，无法识别的表达式：输入：hidden[name='CategoriesandItems[1'].ChecklistItems[2].IsSelected]

**看法**

```
 @model  ViewModels.CheckListVM

 @Html.EditorFor(x=>x.CategoriesandItems)

<script language="javascript" type="text/javascript">
    $(document).ready(function () {
   window.validator = $("#ChecklistForm").kendoValidator().data("kendoValidator");    
    });
</script> 
```

**模板 1 的编辑器**

```
@model  ViewModels.CategoryandItemsVM        
@Html.EditorFor(x => x.ChecklistItems) 
```

**模板 2 的编辑器**

```
@model  ViewModels.ChecklistItemVM        
@Html.CheckBoxFor(x => x.IsSelected) 
```

如果我手动遍历嵌套集合（没有 EditorFor 模板）并正确命名控件，一切正常。看起来 Kendo 验证器和嵌套模型存在问题。

***更新***没有解决这个问题，但我用不太复杂的视图模型重现了这个问题。当只有 1 级 EditorFor 模板时会发生相同的错误。

# php - 动态获取选定值并将其包含在 if 条件中

> ID：14230731
> 
> 赞同：0
> 
> 时间：2013-01-09T08:07:24.750
> 
> 标签：php, jquery

如何在不加载页面的情况下动态地从选择框中获取值并在 if 条件下使用该值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:12:26.247

> *“没有加载页面”*

我猜您的意思是“不提交表单”并重新加载页面，因为如果不加载该页面，您显然无法获得页面上控件的值。

只需执行以下操作：

```
var val = $("#idOfSelectHere").val();
if (val === "something" || val === "something else") {
    // do something
} else if (val === "whatever" && someOtherCondition) {
    // do whatever
} 
```

显然，您可以根据需要添加任意数量的条件和`else if`s...

延伸阅读：[jQuery的`.val()`方法](http://api.jquery.com/val)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:14:38.663

您尚未提供代码，但之前的问题应该提供了很好的答案。

[使用 JavaScript 在下拉列表中获取选定值？](https://stackoverflow.com/questions/1085801/how-to-get-the-selected-value-of-dropdownlist-using-javascript)

当您说不加载页面时，我假设您的意思是不点击提交并重新加载页面。

您还可以使用 jquery 来获取结果...假设下拉列表是 num states。

```
 $("#numstates").val() //the value of the selected option 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:21:38.920

要获得选择框使用的默认选择选项，

```
var selected = $("#selectboxId").find(":selected").text(); 
```

您可以使用以下方式获取用户选择的值，

```
$("#selectboxId").change(function () {
       alert($(this).val()); 
}); 
```

# jquery - 成功的 JQuery 可排序操作后删除项目

> ID：14230732
> 
> 赞同：0
> 
> 时间：2013-01-09T08:07:29.593
> 
> 标签：jquery, jakarta-ee, mouseevent, draggable, jquery-ui-sortable

我正在尝试为我的 Java EE 应用程序创建一个工具栏。此工具栏包含图标，可以将其拖到 JQuery 可排序列表（JSP 页面上的 DIV 列）。我的最终目标是在释放鼠标按钮后显示一个 JSP 表单。在当前情况下，我的图表列将在成功拖动操作后包含一个图标，这是我不想要的。

我的问题：如何在释放鼠标按钮后立即删除项目，或者首先防止掉落？

我使用可拖动或可排序操作的原因是我想知道用户想要放置新小部件的位置（并保存此位置）。

希望有人可以帮助我/展示一个例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:22:49.147

好吧，我不知道您为什么要删除该项目，但阅读 jQuery API 文档会回答您的问题。你尝试过什么吗？

**可拖动**

```
$("yourSelector").draggable({
     drop : function() {
            $(this).remove(); 
            // Removes this item from the DOM after a succesful drop
      }
}); 
```

文档：[http ://api.jqueryui.com/draggable/](http://api.jqueryui.com/draggable/)

**可排序**

```
$("yourSelector").sortable({
     change : function() {
            $(this).remove(); 
            // Removes this item from the DOM after a change in the sort order
      }
}); 
```

文档：[http ://api.jqueryui.com/sortable/](http://api.jqueryui.com/sortable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:09:29.343

根据您给出的答案，我设法提出了解决方案

```
$(".sortableList").droppable({
  drop: function(event, ui) {
       if (!ui.draggable.hasClass("widget")) {
           ui.draggable.remove();
       }
 }
}); 
```

也许不是最好的解决方案，但它确实有效。谢谢您的帮助：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-12T01:59:06.623

> ```
> l$("yourSelector").sortable({
>     change : function() {
>            $(this).remove(); 
>            // Removes this item from the DOM after a change in the sort order
>      }
> }); 
> ```

@godesign，这不起作用有几个原因。

1.  每次占位符更改位置时，都会**在**排序期间触发更改事件。您搜索的事件是 stop、beforeStop 或 Update（与 stop 相同，但仅当与原始位置相比发生更改时）
2.  `$(this)`不会给出排序的项目，而是一些不可用的 jqueryui 东西。您需要`ui`从参数中获取并将函数标题更改为`function(event, ui){`.
3.  还没有弄清楚这部分，但尽管 ui.item 是您要删除的项目，但 ui.item.remove() 不会删除该项目。**编辑：**我发现如果你在`deactivate`一切都被删除的情况下执行 ui.remove()

给出了 1 和 2 的解决方案，我还没有找到 3 的解决方案。

# regex - 我找不到合适的正则表达式

> ID：14230733
> 
> 赞同：0
> 
> 时间：2013-01-09T08:07:32.367
> 
> 标签：regex, perl

我有以下文件（像这个方案，但更长）：

```
LSE           ZTX                       
    SWX         ZURN                    
LSE           ZYT
NYSE                            CGI 
```

每行中有 2 个单词（如 ie `LSE ZTX`），开头、结尾和中间都有可选的空格和/或制表符。有人可以帮我用正则表达式匹配这两个词吗？按照示例，我希望第一行的 LSE 为 1 美元，ZTX 为 2 美元，SWX 为 1 美元，ZURN 为第二行，等等。我尝试过类似的方法：

```
$line =~ /(\t|\s)*?(.*?)(\t|\s)*?(.*?)/msgi;
$line =~ /[\t*\s*]?(.*?)[\t*\s*]?(.*?)/msgi; 
```

我不知道该怎么说，可能有空格或制表符（或两者混合，例如 \t\s\t）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:29:47.427

总是两个词，你不需要匹配整行，所以你最简单的正则表达式是：

```
/(\w+)\s+(\w+)/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T10:11:55.943

如果你只想匹配前两个单词，最基本的就是匹配任何不是空格的字符序列：

```
my ($word1, $word2) = $line =~ /\S+/g; 
```

这会将前两个单词捕获`$line`到变量中（如果它们存在）。`/g`请注意，使用修饰符时不需要括号。如果要捕获*所有*现有匹配项，请改用数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T08:29:24.263

`\s`还包括制表，因此您的正则表达式如下所示：

```
$line =~ /^\s*([A-Z]+)\s+([A-Z]+)/; 
```

第一个词在第一组 ($1) 中，第二个在 $2 中。

您可以根据`[A-Z]`需要更改为更方便的方式。

这是来自[YAPE::Regex::Explain的解释](http://search.cpan.org/~gsullivan/YAPE-Regex-Explain-4.01/Explain.pm)

```
The regular expression:

(?-imsx:^\s*([A-Z]+)\s+([A-Z]+))

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  \s*                      whitespace (\n, \r, \t, \f, and " ") (0 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  (                        group and capture to \1:
----------------------------------------------------------------------
    [A-Z]+                   any character of: 'A' to 'Z' (1 or more
                             times (matching the most amount
                             possible))
----------------------------------------------------------------------
  )                        end of \1
----------------------------------------------------------------------
  \s+                      whitespace (\n, \r, \t, \f, and " ") (1 or
                           more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  (                        group and capture to \2:
----------------------------------------------------------------------
    [A-Z]+                   any character of: 'A' to 'Z' (1 or more
                             times (matching the most amount
                             possible))
----------------------------------------------------------------------
  )                        end of \2
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T08:30:37.500

我想这就是你想要的

```
^\s*([A-Z]+)\s+([A-Z]+) 
```

[在 Regexr 上](http://regexr.com?33bfm)看到它，您会发现第 1 组中一行的第一个代码和第 2 组中的第二个代码。`\s`是一个空白字符，它包括例如空格、制表符和换行符。

在 Perl 中是这样的：

```
($code1, $code2) = $line =~ /^\s*([A-Z]+)\s+([A-Z]+)/i; 
```

我认为您正在逐行读取文本文件，因此您不需要修饰符`s`and `m`，`g`也不需要。

如果代码不仅是 ASCII 字母，则替换`[A-Z]`为`\p{L}`. `\p{L}`是一个[Unicode 属性](http://www.regular-expressions.info/unicode.html#prop)，它将匹配每种语言中的每个字母。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T08:35:58.587

使用选项“多行”这个正则表达式：

```
^\s*(?<word1>\S+)\s+(?<word2>\S+)\s*$ 
```

将为您提供 N 个匹配项，每个匹配项包含 2 个名为：- word1 - word2 的组

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-09T08:41:02.277

`^\s*([A-Z]{3,4})\s+([A-Z]{3,4})$`

这是做什么的

```
^             // Matches the beginning of a string
\s*           // Matches a space/tab character zero or more times
([A-Z]{3,4})  // Matches any letter A-Z either 3 or 4 times and captures to $1
\s+           // Then matches at least one tab or space
([A-Z]{3,4})  // Matches any letter A-Z either 3 or 4 times and captures to $2
$             // Matches the end of a string 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T17:49:23.400

你可以`split`在这里使用：

```
use strict;
use warnings;

while (<DATA>) {
    my ( $word1, $word2 ) = split;
    print "($word1, $word2)\n";
}

__DATA__
LSE         ZTX                       
    SWX         ZURN                    
LSE         ZYT
NYSE                            CGI 
```

输出：

```
(LSE, ZTX)
(SWX, ZURN)
(LSE, ZYT)
(NYSE, CGI) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-09T08:11:58.340

假设行首的空格是你用来识别你想要的代码的，试试这个：

在换行符处拆分你的字符串，然后试试这个正则表达式：

```
^\s+(\w+\s+){2}$ 
```

这将只匹配以一些空格开头，后跟一个（单词 - 一些空格 - 单词），然后以一些空格结尾的行。

```
# ^           --> String start
# \s+         --> Any number of spaces
# (\w+\s+){2} --> A (word followed by some space)x2
# $           --> String end. 
```

**但是**，如果您想单独捕获代码，请[尝试以下](http://regexr.com?33bfj)操作：

```
$line =~ /^\s*(\w+)\s+(\w+)/;

# \s*   --> Zero or more whitespace,
# (\w+) --> Followed by a word (group #1),
# \s+   --> Followed by some whitespace,
# (\w+) --> Followed by a word (group #2), 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-01-09T08:13:38.780

这将匹配您的所有代码

```
/[A-Z]+/ 
```

# python - 莫名其妙的非对象python内存泄漏

> ID：14230734
> 
> 赞同：10
> 
> 时间：2013-01-09T08:07:32.483
> 
> 标签：python, memory-management, memory-leaks

我有一个在 uwsgi 下运行的 django 网络服务器，它似乎泄漏了内存。

具体来说，进程的 RSS 缓慢增长，直到最终我不得不重新启动它。

我知道其他类似的问题，但是到目前为止发现的所有解决方案/结论似乎都不适用于这种情况（我可以找到）。

到目前为止，我已经使用[meliae](https://launchpad.net/meliae)、[Heapy](http://guppy-pe.sourceforge.net/)、[pympler](http://packages.python.org/Pympler/)和[objgraph](http://mg.pov.lt/objgraph/)来检查 python 堆，它们都报告了同样的事情：一个正常的堆使用大约 40MB 的内存（预期），随着时间的推移几乎没有变化（根据需要）。

不幸的是，这与进程 RSS 完全不一致，RSS 将愉快地增长到 400MB+，而*不会*反映在 python 堆大小中。

一些示例输出来说明我的观点 -

**Pympler 输出比较 python 堆/对象内存与进程 RSS：**

```
Memory snapshot:
                                        types |   # objects |   total size
============================================= | =========== | ============
                                         dict |       20868 |     19852512
                                          str |      118598 |     11735239
                                      unicode |       19038 |     10200248
                                        tuple |       58718 |      5032528
                                         type |        1903 |      1720312
                                         code |       13225 |      1587000
                                         list |       11393 |      1289704
                            datetime.datetime |        6953 |       333744
                                          int |       12615 |       302760
  <class 'django.utils.safestring.SafeUnicode |          18 |       258844
                                      weakref |        2908 |       255904
     <class 'django.db.models.base.ModelState |        3172 |       203008
                   builtin_function_or_method |        2612 |       188064
                       function (__wrapper__) |        1469 |       176280
                                         cell |        2997 |       167832
                            getset_descriptor |        2106 |       151632
                           wrapper_descriptor |        1831 |       146480
                                          set |         226 |       143056
                                      StgDict |         217 |       138328
---------------------------
Total object memory: 56189 kB
Total process usage:
 - Peak virtual memory size: 549016 kB
 - Virtual memory size: 549012 kB
 - Locked memory size: 0 kB
 - Peak resident set size: 258876 kB
 - Resident set size: 258868 kB
 - Size of data segment: 243124 kB
 - Size of stack segment: 324 kB
 - Size of code segment: 396 kB
 - Shared library code size: 57576 kB
 - Page table entries size: 1028 kB
--------------------------- 
```

**显示类似内容的大量输出**

```
Memory snapshot:
Partition of a set of 289509 objects. Total size = 44189136 bytes.
 Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0 128384  44 12557528  28  12557528  28 str
     1  61545  21  5238528  12  17796056  40 tuple
     2   5947   2  3455896   8  21251952  48 unicode
     3   3618   1  3033264   7  24285216  55 dict (no owner)
     4    990   0  2570448   6  26855664  61 dict of module
     5   2165   1  1951496   4  28807160  65 type
     6  16067   6  1928040   4  30735200  70 function
     7   2163   1  1764168   4  32499368  74 dict of type
     8  14290   5  1714800   4  34214168  77 types.CodeType
     9  10294   4  1542960   3  35757128  81 list
<1046 more rows. Type e.g. '_.more' to view.>
---------------------------
Total process usage:
 - Peak virtual memory size: 503132 kB
 - Virtual memory size: 503128 kB
 - Locked memory size: 0 kB
 - Peak resident set size: 208580 kB
 - Resident set size: 208576 kB
 - Size of data segment: 192668 kB
 - Size of stack segment: 324 kB
 - Size of code segment: 396 kB
 - Shared library code size: 57740 kB
 - Page table entries size: 940 kB
--------------------------- 
```

请注意，在这两种情况下，报告的堆大小为 40-50MB，而进程 RSS 为 200MB+。

我还使用了 objgraph 的*get_leaking_objects()*来尝试查看 C 扩展是否进行了错误的引用计数，但是不可 gc'able 对象的数量不会随着时间的推移而显着增长。

有没有人对如何进行调试有任何见解？在这一点上，我假设是以下两种情况之一：

*   我有一个 C 扩展在内部泄漏内存
*   uwsgi 本身正在泄漏内存（尽管我在网上找不到其他证据）

值得一提的是，我在任何类型的开发环境中都没有成功地复制它（尽管我可能只是没有向他们提供足够的流量）。

我们确实使用了一堆具有 C 扩展名的模块（simplejson、hiredis 等），因此绝对可以相信它们可能是原因。

寻找方法来追踪这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T09:01:46.067

你使用的是什么版本的 Python？在 Python 2.4 中，Python 内存分配器没有将内存返回给操作系统。

仍然在较新的版本中，您可以看到与 Python 的内存分配器相关的问题，该内存分配器保留释放的简单类型列表，或者如果您在 Linux 上运行，则存在 glibc 的 malloc 实现如何从操作系统分配内存的固有问题。看看[http://effbot.org/pyfaq/why-doesnt-python-release-the-memory-when-i-delete-a-large-object.htm](http://effbot.org/pyfaq/why-doesnt-python-release-the-memory-when-i-delete-a-large-object.htm)和[http://pushingtheweb.com/2010/ 06/python 和 tcmalloc/](http://pushingtheweb.com/2010/06/python-and-tcmalloc/)。

# linker - 如果一个库链接两次，程序如何确定使用哪个版本？

> ID：14230738
> 
> 赞同：1
> 
> 时间：2013-01-09T08:07:42.703
> 
> 标签：linker, dependencies, shared-libraries

在为服务器编写共享库时，我陷入了以下情况。

为了便于理解：

1.  让我们将服务器框架称为 fwA
2.  我写的共享库 libB
3.  由 fwA 和 libB 链接的不同版本的库，分别命名为 libC1 和 libC2

fwA 通过 dllopen 加载 libB

以下是我的问题： libC 中定义了一个数据结构（DS1），但是，在 libC1 和 libC2 中，数据结构略有不同。

编译器/链接器/程序如何确定他们将使用哪个版本的数据结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T17:48:05.803

数据结构不是对象，因此链接器不会直接看到它们。每个库都将采用它们的布局。

如果数据结构的实际实例没有在不同版本之间共享，这可以工作。例如，在您的场景中，只要 fwA 和 libB 之间没有传递此类结构，您就可以了。fwA 和 libC1 之间的通信是安全的，libB 和 libC2 也是如此。

Windows 世界一直在这样做：每个 DLL 调用`malloc`并`free`链接到特定版本的 C 运行时，甚至可能使用内联函数来访问分配器数据结构。

只要分配对象的 DLL 也负责释放它，这是完全可以接受的。因此，如果您的图书馆有

```
foo *alloc_foo() { return (foo *)malloc(sizeof(foo)); } 
```

那么调用接收到的指针是不安全的，`free(my_foo);`因为 DLL 可能正在使用不同的分配器实现。相反，使用他们提供的

```
void free_foo(foo *fp) { free(fp); } 
```

因此，fwA 和 libB 之间的接口应该设计成不依赖于 libC ABI，否则 libC ABI 也会成为 libB ABI 的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:55:00.497

如果结构定义在`libC1`and中不同`libC2`，那么它肯定会在某个地方访问错误的偏移量。其未定义的行为。我们不应该这样使用。

# jquery - 填充有动态数据的可排序列表

> ID：14230742
> 
> 赞同：0
> 
> 时间：2013-01-09T08:08:09.397
> 
> 标签：jquery, ajax, jquery-ui, jquery-jscrollpane

我在让 JQuery-UI 交互在我的页面上工作时遇到了一点问题。我以前没有使用过 JQuery-UI，所以我开始尝试可排序的交互，希望以后可以拖放和排序。但是，我一直在用头撞墙，甚至无法使可排序的工作正常进行。

我正在尝试排序的内容正在使用 ajax 动态加载。以下是内容外观的表示：

```
<ul id="category_list">
    <li class="category" data-category-id="17">Education</li>
    <li class="category" data-category-id="20">General Information</li>
    <li class="category" data-category-id="14">Music / Movies / Television</li>
    <li class="category" data-category-id="18">Navigation</li>
    <li class="category" data-category-id="19">Retailers</li>
    <li class="category" data-category-id="16">Social Media</li>
    <li class="category" data-category-id="15">Web Results</li>
</ul> 
```

这个 JQuery 函数加载数据：

```
// load all the engines in a category
$('#container').on("click", ".buttonclass", function() {
    $.get("/categories", {
      id : $(this).attr('data-id')
      }, function(data) {
          var pane = $("#categories").data('jsp');
          pane.getContentPane().html(data);
          pane.reinitialise();
      });
}); 
```

（与窗格相关的东西是因为它可以由 JScrollPane 滚动）。我尝试在上面的这个函数中添加代码以使列表元素可排序，但没有任何效果。我尝试过的一些事情是：

```
$('.category').sortable();
...
$('.category'.each(function(){$(this).sortable()};
...
$("#category_list").sortable();
...
$('.category').sortable('refresh');
...
$('.category'.each(function(){$(this).sortable('refresh')};
...
$("#category_list").sortable('refresh'); 
```

我尝试将代码添加到回调函数（$.get）内部和之后的点击处理程序，但没有运气。

在页面中（在 JscrollPane 内）硬编码的静态数据没有问题排序。只是动态内容造成了麻烦。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:19:56.533

看看这个 jquery-ui[文档并在](http://api.jqueryui.com/sortable/)[jqfaq.com](http://jqfaq.com/how-to-use-jquery-sortable-and-droppable-in-same-list/)上对相同元素进行排序和拖动。希望，这可能对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:20:26.870

理想情况下应该是

```
$("#category_list").sortable(); 
```

如果您浏览过 Jquery UI Sortable docs 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T04:56:25.637

找出问题所在，它是 JScrollPane。尽管 JScrollpane 在静态数据和可排序/可拖动/可放置方面没有问题，但在动态填充它时似乎会引起问题。

删除了 JScrollPanes 和所有如果可以使用：

```
$("#category_list").sortable(); 
```

# java - 在 JVM 中优化 Xms/Xmx/XX:MaxPermSize

> ID：14230746
> 
> 赞同：4
> 
> 时间：2013-01-09T08:08:18.470
> 
> 标签：java, jakarta-ee, garbage-collection, jvm

获得优化值的必要步骤是`Xms/Xmx/XX:MaxPermSize`什么？

当然我可以设置一个很大的值，但是你知道 GC 在大内存中需要时间。**当我可以抽出时间进行测试并找到这些值时**，一般建议是什么？

例如，以下数字是否有帮助？

```
Eden Space heap usage - 42MB / 62MB (used / committed)
Survivor Space heap usage - 8.5MB / 8.5MB (used / committed)
CMS Old Gen heap usage - 100MB / 217MB  (used / committed)
Non-heap memory pool usage - 36MB 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T18:12:05.450

调整 GC 时，您需要收集较长时间的 GC 统计信息，然后对其进行操作。仅仅一个生成大小的快照是不够的。

你应该：

1.  **启用完整 GC 日志记录**。轻巧而强大。

    *   采用`-XX:+PrintTenuringDistribution -XX:+UnlockDiagnosticVMOptions -XX:+LogVMOutput -XX:LogFile=jvm.log -XX:+HeapDumpOnOutOfMemoryError -Xloggc:gc.log -XX:+PrintGCTimeStamps -XX:+PrintGCDetails -showversion`
2.  **考虑使用其他方法来收集有关您的 GC 的信息**。日志记录很好，但有时有可用的轻量级命令行工具可以让您获得更多洞察力。例如。`jstat`Hotspot 会显示 Eden、Survivor 和 Old Gen 的职业/容量。

3.  计算：

    *   **实时数据集**、**分配率**和**提升率**。这将告诉您是否需要更大的堆或您的例如。Young Gen 太小，或者您的 Survivor 空间溢出等。
    *   **total GC time**，它应该小于总运行时间的 5%。这样你就可以判断你的整体 GC 策略是否有效。
    *   观察 Perm Gen 职业

一旦你有了这些数据，你就可以开始调整世代的规模，并再次监控你所做的更改的影响。通常的吞吐量**大小建议**是：

*   **Old Gen** = Live Data Set 的 1.5-2 倍 - 您的数据集应该很适合 OldGen 空间。
*   **Perm Gen** = 通常 PermGen 占用的 1.5 倍。
*   **Young Gen** = 基于分配率。看你一秒分配多少，再看提升率，通过增加YoungGen来降低提升率。
*   **幸存者空间**= 监控任期门槛和晋升率。

通常，**大小建议**取决于您的调整目标：

*   **吞吐量调整** - 见上文，
*   **低延迟调整**- 监控 GC 暂停
    *   Young GC 太长 => 减少young gen
    *   Young GC 太频繁 => 增加young gen
*   **Footprint Tuning** - 根据 LiveDataSet、Promotion Rate 和 Allocation Rate 调整大小。您可能不需要像吞吐量调整中那样为每个空间添加额外的空间

另请参阅 GC 调整问题：[是否有针对 GC 问题的说明书指南？](https://stackoverflow.com/q/6871213/772000)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:20:15.520

在我需要调整这些值的罕见情况下，有一个名为[**JavaVisualVM**](http://visualvm.java.net/)的程序包含在 jdk（我认为是 bin 文件夹）中，我觉得它非常有用。您可以连接到正在运行的 vm 并分析其所有运行时参数。

在“插件”部分下，您还可以找到一个非常有用的插件，用于监控 gc，您可以在其中查看到底发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T13:11:43.210

一般规则是，在发现需要解决的问题之前，不应更改 JVM 内存设置。JVM 在调整运行时的大多数参数以适合您的应用程序方面做得非常好。

如果您发现需要优化内存参数，则取决于您需要优化什么。您将使用的设置会因您需要优化的方面而有很大差异（例如，最小化暂停的设置与最大化吞吐量的设置非常不同）。

如果您确实需要优化，请提供更多关于您需要优化的方面的信息。

# sql-server-2008 - 可以在哪里使用 CERTENCODED？

> ID：14230748
> 
> 赞同：0
> 
> 时间：2013-01-09T08:08:35.497
> 
> 标签：sql-server-2008

谁能给出 CERTENCODED 的活生生的例子？尽管我已经阅读过 CERTENCODED 函数的用途，但我无法理解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T14:43:30.587

该函数以您使用 BACKUP CERTIFICATE 语句获得的相同二进制 .DEM 格式返回证书的所有公共数据：

```
CREATE CERTIFICATE cert1
      ENCRYPTION BY PASSWORD = 'password'
      WITH SUBJECT = 'My test cert';

backup certificate cert1 to file = 'cert1.cer'

select CERTENCODED(CERT_ID('cert1'))
select * FROM OPENROWSET(BULK N'c:/.../cert1.cer', SINGLE_BLOB) rs; 
```

您应该看到 SELECT 返回的两个数据字符串是相同的。

然后，您可以将 blob 传输到另一个数据库并从中创建一个新证书（“CREATE CERTIFICATE ... FROM BINARY = 0x”，这样您就可以使用一个证书对数据进行编码并使用另一个证书进行解码。考虑这个函数作为另一种保存证书的方法，但不使用文件系统。

非常相似，您可以使用 CERTPRIVATEKEY(...) 从证书中获取私钥，然后用于在另一个数据库中创建兼容的证书。

# php - 块中的逗号分隔值

> ID：14230752
> 
> 赞同：0
> 
> 时间：2013-01-09T08:08:42.977
> 
> 标签：php, jquery

> **可能重复：**
> [像 StackOverflow 的输入标签一样的 jQuery 自动完成标签插件？](https://stackoverflow.com/questions/519107/jquery-autocomplete-tagging-plug-in-like-stackoverflows-input-tags)

我正在开发一个招聘门户网站，在该门户网站上使用具有逗号分隔值的文本框提交语言，例如英语、阿拉伯语、法语

使用explode，implode将值保存在数据库中（没有任何问题，只是为了清除）

我想让文本框装饰得像有人按下逗号时，前一个单词变成一个带有关闭符号的块，表示删除该单词。

示例：在 deviantart 中搜索，或 wordpress、tumblr 中的标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:59:51.733

嗯，如果我没记错的话，你想要一些叫做标签的东西，比如stackoverflow标签。Yepee 在 jquery 中有一个名为 tagit 的插件。链接如下。

[http://aehlke.github.com/tag-it/](http://aehlke.github.com/tag-it/)

希望这是您要的。

# javascript - jQuery：通过单击按钮访问文本区域的当前文本

> ID：14230753
> 
> 赞同：-1
> 
> 时间：2013-01-09T08:08:48.547
> 
> 标签：javascript, jquery, html, click

我正在编写一个函数，通过单击带有 jQ​​uery 的输入按钮来发出 AJAX POST 请求。按钮的点击功能在`$(document).ready()`. 我注意到的是，当单击按钮时，从 textarea 中提取的文本是它填充的默认文本，而不是用户可能将其更改为的任何文本。代码片段如下：

```
$(document).ready(function() {

  $('#add-note-button').click(function() {
    var note_data = {};
    note_data["notetext"] = $('#notetext').text();
    alert($('#notetext').text());
    note_data["author"] = 123;

    $.ajax( {
      type:'POST',
      url:'/myapp/post_note/1/',
      data:note_data,
      success: function(data){
      }
    });
  });
}); 
```

稍后在 HTML 中：

```
<textarea id="notetext">Add status update... </textarea>
<input id='add-note-button' type='submit' value="Save"/> 
```

`alert($('#notetext').text());`上面的函数`click()`只显示“添加状态更新...”，而不是我在文本区域中输入的文本。

感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:09:19.960

利用

```
$('#notetext').val(); 
```

代替

```
$('#notetext').text(); 
```

该[`.val()`方法](http://api.jquery.com/val)获取表单元素的当前值。

# asterisk - asterisk agi dial with DTMF also LIMIT

> ID：14230760
> 
> 赞同：0
> 
> 时间：2013-01-09T08:09:11.837
> 
> 标签：asterisk, dtmf, agi

我正在尝试做 DTMF 也限制通话时间，但是，我不能让两者都工作，它是拨号命令中的一个或另一个。请帮我。

```
$agi->exec("DIAL","SIP/gateway/18009993355,30,D(1234),L(100000)") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:53:19.460

只需删除 ) 和 L 之间的 , 就可以了：

```
$agi->exec("DIAL","SIP/gateway/18009993355,30,D(1234)L(100000)") 
```

# javascript - 在错误处理程序中读取 .myStyle 的“背景图像”属性值并将其设置为 src？

> ID：14230762
> 
> 赞同：2
> 
> 时间：2013-01-09T08:09:16.003
> 
> 标签：javascript, html, css, image

CSS

```
.myStyle {
height: 10px;
background-image: url(../myImage.png);
} 
```

html

```
<img class=myStyle src=<%scriptlet%> > 
```

有没有办法我可以在错误处理程序中读取 .myStyle 的“背景图像”属性值并将其设置为 src ？

以下代码不起作用：js

```
myImage = $('.myStyle', $el);
myImage.error(function () {
          myImage.attr('src', background-image);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:16:45.613

您可以使用：

```
// change src from element by a css background image from same element.
function changeSrcByCssBackground() {
    $(this).attr('src', $(this).css("background-image").slice(4, -1));
}

// do when error
myImage.error(changeSrcByCssBackground); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:11:12.643

要获取`background-image`值，请执行以下操作：

```
var bgImage = myImage.css("background-image"); 
```

请注意， 的值`bgImage`将是`url(../myImage.png)`。

所以你需要这样做：

```
myImage.attr('src', bgImage.slice(4,-1)); 
```

# cocos2d-iphone - 来自 Cocos2d-x 动作/动画的当前帧

> ID：14230765
> 
> 赞同：0
> 
> 时间：2013-01-09T08:09:38.850
> 
> 标签：cocos2d-iphone, cocos2d-x

是否可以从 cocos2d-x 中正在运行的动画/动作中获取当前帧？有一个名为 iSDone 的函数，但它会给我动作完成布尔一次精灵，也不会提供精灵数据。

我想要动作运行时当前帧的高度、宽度、x 和 y。

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T09:45:08.123

```
int CCAnimationHelper::frameOfAnimation(cocos2d::CCAnimation *animation, cocos2d::CCSprite *sprite){
CCTexture2D* tex = sprite->getTexture();
int imageIndex = 0;
for (int i=0; i<animation->getFrames()->count(); i++) {
    CCAnimationFrame *frame = (CCAnimationFrame*)animation->getFrames()->objectAtIndex(i);
    CCTexture2D *tex2 = frame->getSpriteFrame()->getTexture();
    if (tex->isEqual(tex2)) {
        imageIndex = i;
        break;
    }
}

return imageIndex;
} 
```

# objective-c - 从 iTunes 下载的证书中缺少私钥

> ID：14230767
> 
> 赞同：0
> 
> 时间：2013-01-09T08:09:46.703
> 
> 标签：objective-c, ios5

我是 iPhone 的初学者。我不知道在 iTunes 中上传应用程序。我已经制作了证书和配置文件，但是当我下载证书时没有使用私钥..所以，给出任何适用于我的应用程序的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:26:43.283

你可以做两件事：

**1\. 通过苹果开发者门户创建一个新的证书身份**在这种情况下，您需要登录苹果开发者门户并使用助手，作为其中的一部分，您需要创建并上传一个 CSR（证书签名请求）还将在机器上创建公钥和私钥。苹果签署了请求，瞧，一个签署的公共/私人证书对：[指南](https://appmakr.zendesk.com/entries/175966-how-to-create-and-upload-your-private-key-p12-into-your-appmakr-developer-account)

**2.从最初用于创建证书的机器中导出私钥**这种情况是当您使用先前创建的身份进行签名时，可能是在旧机器上，或者如果（在我的情况下）您为已经拥有其 ID 的客户进行开发创建的。如果您无法访问最初用于创建证书身份的机器，则必须按照指南/助手创建一个新身份。

为此，您需要通过 Keychain Access 导出您的私钥（一个 .p12 文件）或公钥/私钥对，并将私钥或密钥对安装到您开发的机器上：[指南](https://stackoverflow.com/questions/1861360/two-macs-one-iphone-developer-license-possible)

# android - Android错误：无法恢复密钥

> ID：14230768
> 
> 赞同：6
> 
> 时间：2013-01-09T08:09:48.587
> 
> 标签：android

当我想运行我的 android 应用程序时遇到问题，这是错误消息：

> 生成最终存档时出错：java.security.UnrecoverableKeyException：无法恢复密钥

如何解决这个问题呢？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-19T16:34:27.877

**密钥库密码和密钥密码都需要相同。**如果它们不相同，您一定会收到此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:49:40.070

您输入了密钥库密码或别名密码错误，这就是为什么您无法恢复密钥异常。为密钥库和别名输入正确的密码。
有时如果密钥由于过期等原因无效，那么这也会发生

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-28T16:27:05.867

我遇到了同样的问题，解决方法如下：

1-当我更改密钥库密码时，返回**“修改密钥的密码错误”**，在这种情况下密钥库密码不正确。

2-如果您有以下错误，**“无法恢复密钥”**，在这种情况下，storepass 是正确的，但该别名的密码不正确，我记得我的 pass 并更改，问题就消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T08:39:24.070

你的钥匙有问题。

这将为您提供有关密钥的信息

[http://developer.android.com/tools/publishing/app-signing.html#debugmode](http://developer.android.com/tools/publishing/app-signing.html#debugmode)

在调试模式下更改密钥

```
(To do so in Eclipse/ADT, go to Windows > Preferences > Android > Build.) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-23T13:50:45.257

这是面临的一场噩梦，文档似乎不太清楚如何找出你的出路……我遇到了同样的问题，但在头脑风暴后我明白了。现在用最简单的术语...

当您选择加入应用签名时，Google 会让您创建一个用于登录您的应用的密钥。这就像您的旧密钥（应用程序签名证书），是基础。现在在上传时，另一个键映射到您，这是您的第二层 ID，这可以让您更新您的应用程序。

现在，每当您丢失别名/密码时，您都会通过邮件联系 google，他们会告诉您创建一个新的密钥库，他们将使用该密钥库重置旧密钥（上传密钥），因为他们已经拥有**旧密钥**。因此，在应用程序生命周期的任何时候，您都不需要拥有旧密钥，因为他们已经为您提供了它。

# php - 如何将 3 个单选按钮列表存储在 mysql 数据库中的单列、不同行中？

> ID：14230770
> 
> 赞同：1
> 
> 时间：2013-01-09T08:09:55.607
> 
> 标签：php, mysql, database, radiobuttonlist

这是我的 rating.php（html 代码）

```
<input type="radio" name="selectThree" value="1">
<input type="radio" name="selectThree" value="2">
<input type="radio" name="selectThree" value="3">
<input type="radio" name="selectThree" value="4">
<input type="radio" name="selectThree" value="5">

<input type="radio" name="selectTwo" value="1">
<input type="radio" name="selectTwo" value="2">
<input type="radio" name="selectTwo" value="3">
<input type="radio" name="selectTwo" value="4">
<input type="radio" name="selectTwo" value="5">

<input type="radio" name="selectOne" value="1">
<input type="radio" name="selectOne" value="2">
<input type="radio" name="selectOne" value="3">
<input type="radio" name="selectOne" value="4">
<input type="radio" name="selectOne" value="5"> 
```

因此，当用户选择该值时，它将在此处生成以下代码以插入数据库：

```
<?php
include_once "mysqli.connect.php";
include_once "config.php";

if(isset($_POST['Click']))      
{

$rating = explode($_POST['selectOne'], $_POST['selectTwo'], $_POST['selectThree']);
$_SESSION['commentInput'] = array();
$_SESSION['commentInput'][] = $_POST['comment'][0];
$_SESSION['commentInput'][] = $_POST['comment'][1];
$_SESSION['commentInput'][] = $_POST['comment'][2];

if(isset($_REQUEST["comment"]))
{

$merge = array_combine ($_SESSION['product'],$_SESSION['commentInput']);
foreach($merge as $key => $value)
{

$sqlComment = "INSERT into comment (comment, product) VALUES ('".$value."', '".$key."')";
$result = $mysqli->query($sqlComment);
}

echo"<script type='text/javascript'>alert('Thank you for your comment!' )</script>";
}

else
{

echo "<script type='text/javascript'>alert('Please comment!')</script>";    
}   

} 
```

我想这样存储在mysql数据库中->

```
product|rating
--------------
shirt  | 2
pants  | 3
dress  | 5 
```

但现在它像这样存储：

```
product|rating
--------------
shirt  | Array
pants  | Array
dress  | Array 
```

在我使用这个之后->

```
$rating = explode($_POST['selectOne'], $_POST['selectTwo'], $_POST['selectThree']);

//mysql
$sqlRating = "INSERT into ratings (product, rating) VALUES ('".$key."', '".$rating."')";
$result = $mysqli->query($sqlRating); 
```

如何将值存储到 mysql 中？请帮忙谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:14:44.830

你`$rating`是一个数组

你应该存储这样的值`$rating[0]`or `$rating[1]`，`$rating[2]`所以要像这样存储它们，你可以在 php 中管理它们，选择或单击按钮，然后将它们存储在你的表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:17:29.310

尝试将它放在类似这样的 foreach 循环中。

```
// create an array here that contains the key and the rating key=>rating and save it to $ratings array.

foreach($ratings as $key=>$rating){

   //mysql
   $sqlRating = "INSERT into ratings (product, rating) VALUES ('".$key."', '".$rating."')";
   $result = $mysqli->query($sqlRating);
} 
```

顺便说一句，这里是发布单选按钮值的教程[http://www.homeandlearn.co.uk/php/php4p10.html](http://www.homeandlearn.co.uk/php/php4p10.html)

**更新：** 假设 $key 包含产品数组。（例如 array('shirt', 'pants', 'jacket') 并且它被映射到单选按钮的值。

```
'shirt' => $_POST['selectOne'];
'pants' => $_POST['selectTwo'];
'jacket' => $_POST['selectThree']; 
```

我们可以为 $key 和 $ratings 创建一个名为 $prod_ratings 的数组

```
$ratings = array($_POST['selectOne'], $_POST['selectTwo'], $_POST['selectThree']);
$prod_ratings = array_combine($key, $ratings); 
```

然后通过以下方式将数组的值插入数据库：

```
foreach($prod_ratings as $key=>$rating){

   //mysql
   $sqlRating = "INSERT into ratings (product, rating) VALUES ('".$key."', '".$rating."')";
   $result = $mysqli->query($sqlRating);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:13:25.867

使用 implode 将它们以逗号分隔的方式放置：

```
$rating = explode($_POST['selectOne'], $_POST['selectTwo'], $_POST['selectThree']);

//mysql
$sqlRating = "INSERT into ratings (product, rating) VALUES ('".$key."', '".implode(",",$rating)."')";
$result = $mysqli->query($sqlRating); 
```

稍后您应该能够在过滤数据时使用 find_in_set 查看该列。

# java - 将 Swing 组件添加到 PDF 文件

> ID：14230771
> 
> 赞同：1
> 
> 时间：2013-01-09T08:09:57.593
> 
> 标签：java, swing, pdf, itext

有没有什么方法可以通过使用 iText 的 java 编码在 Pdf 文件中添加 JTextbox、JButton、JLable？

如何在 pdf 文件中添加此类组件？因此，通过使用`setLayout`and`setBounds`方法，我可以通过 java 编码将它们放置在我的 PDF 文件中的任何位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:12:49.183

不，你不能这样做。Swing 组件是 Java 类，不能在 PDF 文件中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:12:04.687

您可以添加 Swing 组件的“复制”/屏幕截图图像，但不能添加组件本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T08:17:32.530

您不能在 pdf 中使用 swing 组件。但是 pdf 允许使用 Acrobat Reader/Pro 在 pdf 中创建字段。如果您想使用 java 以编程方式进行操作，那么这里有一个 iText[教程](http://www.geek-tutorials.com/java/itext/itext_acroform_javascript.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T08:25:30.630

你可以做其他方式。使用组件打开一个 pdf 文件`Swing`并添加所需的效果。这是你可以关注的[链接。](http://www.coderanch.com/t/324198/java/java/Launching-applications-Java-GUI)

# android - Sencha 2.1.0 应用程序在模拟器上成功运行，但无法在 Android 设备上启动

> ID：14230774
> 
> 赞同：0
> 
> 时间：2013-01-09T08:10:34.750
> 
> 标签：android, android-emulator, sencha-touch, sencha-touch-2

我使用 Sencha Touch 2.1.0 开发了一个应用程序。我的应用程序在模拟器上成功运行，但是当我尝试在任何设备上启动时（我尝试了四种不同的设备），默认的 Sencha 闪屏并没有消失，应用程序也无法开始工作。我从 log-cat 中发现的错误是：

> 12-27 18:39:21.580：E/Web 控制台（23413）：未捕获错误：[Ext.Loader] 加载 'file:///android_asset/touch/src/event/Dispatcher.js' 失败，请验证文件存在于 file:///android_asset/touch/sencha-touch.js:8321
> 12-27 18:39:21.580: E/Web Console(23413): Uncaught Error: [Ext.Loader] Failed loading 'file:/ //android_asset/touch/src/event/publisher/Dom.js'，请验证文件是否存在于file:///android_asset/touch/sencha-touch.js:8321

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:24:44.580

看起来您正在使用应用程序的开发版本，它在每个类中单独加载。我总是使用 sencha 的构建工具，并在进入设备之前构建“测试”或“生产”。如果从项目根目录调用构建测试的调用是：

```
// this figures out all your project dependencies
sencha app resolve http://localhost/ref/to/your/project/index.html dependencies.json
// this will build your project for testing, which does not remove white 
// space or comments, and does not generate cache.manifest files for HTML5 caching 
sencha app build -e testing 
```

构建目标目录在 app.json 文件中配置，并且会有一些类似于以下内容的行：

```
"buildPaths": {
    "testing": "../builds/testing",
    "production": "../builds/production",
    "package": "../builds/package",
    "native": "../builds/native"
}, 
```

我的开发流程是在浏览器中构建，然后在我需要在设备上进行测试时构建以进行“测试”。这是我从应用程序根目录运行的 build.sh 脚本。此脚本生成我所有的依赖项，构建测试（基于我的 app.json buildPaths 参数），将目录更改为一个名为“builds/android/”的目录，我在其中保存我的 android (phoneGap) 项目，然后将项目构建到设备我已通过 USB 连接：

```
sencha app resolve http://localhost/careathand/front/mobile/dev/index.html dependencies.json
sencha app build -e testing

# build the application on the device with cordova
cd ../builds/android/
./cordova/debug
./cordova/log | grep Cordova 
```

现在我要做的就是从我的项目根目录运行以下命令：

```
sh build.sh 
```

关于答案的一轮，但希望这有助于简化您的开发流程并最终解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:12:29.760

```
$ sencha package run packager.json 
```

似乎不适用于 Android 4.x。

你可以试试这个吗？

```
$ sencha app build native
$ adb install build/[yourProject]/[yourAppName].apk 
```

# css - 仅当分辨率超过图像大小时才调整背景图像大小

> ID：14230775
> 
> 赞同：0
> 
> 时间：2013-01-09T08:10:35.453
> 
> 标签：css

所以我找到了一个根据浏览器的纵横比调整网站背景图像大小的[教程。](http://css-tricks.com/perfect-full-page-background-image/)这可行，但我只希望它在浏览器的分辨率如此之高以至于它不适合的情况下裁剪和调整图像大小。

它用

```
background-size: cover; 
```

这可以解决问题，但我只希望它在大于原始大小时更改大小。换句话说：我只希望它使背景更大，而不是更小。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:15:41.360

你想修复背景的大小你可以使用它。

```
page{
       with:960px;
        margin-left:auto;
        margin-right:auto;
        background:black;

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:20:30.620

如果您知道背景图像的宽度，则可以使用媒体查询来实现您想要的。

例如，假设您的背景图像是 900px 宽：

```
body {
    background: url('/img/background.jpg') no-repeat left top;
}

@media screen and (min-width: 900px) {
    body {
        background-size: cover;     
    }
} 
```

这将为 900 像素及以上的屏幕尺寸设置 background-size:cover 属性，但将为较小的屏幕保留原始尺寸。

*哪些浏览器支持媒体查询的参考： http: [//caniuse.com/css-mediaqueries](http://caniuse.com/css-mediaqueries)*

# asp.net-mvc - 我从 RegularExpressionAttribute 派生的验证属性有什么问题？

> ID：14230776
> 
> 赞同：0
> 
> 时间：2013-01-09T08:10:37.047
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我的属性看起来像这样。在我看来，它是一个`RegularExpressionAttribute`，但只是自动以固定模式构造并具有更用户友好的`ErrorMessage`集合。

```
public class NumericOnlyAttribute : RegularExpressionAttribute
{
    public NumericOnlyAttribute()
        : base(@"\d+")
    {
        ErrorMessage = "Field must only contain numbers";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:17:30.860

一切都好。但是，您必须注册一个自定义*DataAnnotationsModelValidatorProvider*以便 MVC 可以识别您的自定义验证属性。

检查你这篇文章它应该给你一个提示如何使它工作[http://www.codeproject.com/Tips/493405/Validating-User-Input-Containing-HTML-tags-in-ASP](http://www.codeproject.com/Tips/493405/Validating-User-Input-Containing-HTML-tags-in-ASP)

# asp.net - 如何在gridview中使用按钮域

> ID：14230778
> 
> 赞同：2
> 
> 时间：2013-01-09T08:10:45.110
> 
> 标签：asp.net, gridview, markup

我正在使用这个网格视图：

```
<asp:GridView ID="gvMessages" runat="server" AutoGenerateColumns = "false" 
    CaptionAlign="NotSet" CellPadding="5" onrowcommand="gvMessages_RowCommand">
    <Columns>
        <asp:TemplateField HeaderText="Avändare">
            <ItemTemplate>
                <%# GetSender((int)Eval("Sender"))%>
                <br />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Ämne">
            <ItemTemplate>
                <%# Eval("Head")%>
                <br />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:ButtonField Text="Öppna" CommandName="Open" />
    </Columns>
</asp:GridView> 
```

我想要一个文本框来显示已单击行的绑定对象 (Eval("Message")) 的消息成员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:46:05.827

从评论中，我建议在客户端显示/隐藏，这样你就可以节省到服务器的往返行程

```
<asp:GridView ID="gvMessages" runat="server" AutoGenerateColumns = "false" 
    CaptionAlign="NotSet" CellPadding="5">
    <Columns>
        <asp:TemplateField HeaderText="Avändare">
            <ItemTemplate>
                <%# GetSender((int)Eval("Sender"))%>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField HeaderText="Ämne" DataField="Head" />

        <asp:TemplateField HeaderText="Avändare">
            <ItemTemplate>
                <button class="btn-showmsg">Öppna</button>
                <div class="message hide">
                    <asp:TextBox runat="server"
                         TextMode="MultiLine" Text="<%= Eval("Message") %>" />
                </div>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

在javascript中

```
$(function() {

    $(".btn-showmsg").click(function() {
        var tr  = $(this).closest("tr"), // the <tr>
            msg = tr.find(".message");   // the div wraping the message

        msg.show(); // show it
    });

}); 
```

现在，消息的位置和位置完全取决于您，但我建议使用[Bootstrap Modal](http://twitter.github.com/bootstrap/javascript.html#modals)之类的东西来显示它。

另外，记得添加一个样式`.hide { display: none; }`

# android - 何时在视图上使用片段？

> ID：14230782
> 
> 赞同：2
> 
> 时间：2013-01-09T08:11:00.897
> 
> 标签：android, android-fragments

我阅读了片段教程，但我仍然不明白为什么实际上需要它们。教程给出了2个fragment在一个宽屏和2个activity在一个小屏幕的例子，但我实际上可以只使用一个视图并将它放在同一个activity或另一个activity中来达到相同的效果，那么a片段给我一个简单的视图不？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:16:10.417

片段有自己的生命周期，因此您不必担心大屏幕中的内存和对象，这很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:18:09.230

当您想为不同类型的布局放置不同的内容时，它们非常适合。主要用于构建适用于平板电脑和手机的应用程序。

![在此处输入图像描述](../Images/7e8ec2ff4371bb9db7c687fb32f857be.png)

将片段想象为同一屏幕中的不同活动。有时，在片段中控制代码本身比在主 Activity 中更容易，尤其是当您打算将它们拆分为单独的布局时。

片段对话框之类的东西也比经典对话框更强大。将信息传递给片段比活动之间更容易和更有效（尽管这可能会因情况而异）。

如果您没有理由使用它们或不想尝试，请尽可能简单。Fragments 有相当多的开销，因此除非您正在为多种布局（主要是平板电脑）进行设计，否则它会付出更多的努力而收效甚微。

# google-apps-marketplace - 如何使用 Google Apps Marketplace API 在域上创建用户？

> ID：14230786
> 
> 赞同：0
> 
> 时间：2013-01-09T08:11:08.073
> 
> 标签：google-apps-marketplace, google-provisioning-api, createuser

我们已通过 Google 应用市场发布了应用程序。我们需要在他们通过 API 安装我们的应用程序的域上创建用户。我绑定了以下 php 代码，但是我收到 401 错误。请帮忙。

```
$oauthOptions = array(
    'requestScheme' => Zend_Oauth::REQUEST_SCHEME_HEADER,
    'version' => '2.0',  'scope' => '',
    'signatureMethod' => "HMAC-SHA1",
    'consumerKey' => 'marketplace oauth consumer key',
    'consumerSecret' => 'marketplace oauth consumer secret key' );

$consumer = new Zend_Oauth_Consumer($oauthOptions);
$token = new Zend_Oauth_Token_Access();
$token->setToken('');
$token->setTokenSecret('');
$client = $token->getHttpClient($oauthOptions);
$gdata = new Zend_Gdata_Gapps($client, 'domain name');
$gdata->createUser('user34', 'fistname', 'familyname', 'Password'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:37:40.200

您使用了错误的 OAuth 版本 - 消费者密钥和秘密适用于 1.0，而不是 2.0。您也不需要将范围、令牌或令牌密码设置为空字符串，但我不确定这是否真的会导致任何问题。

[在http://code.google.com/p/google-mail-xoauth-tools/source/browse/trunk/php/two-legged.php](http://code.google.com/p/google-mail-xoauth-tools/source/browse/trunk/php/two-legged.php)中有一个在 PHP 中执行两条腿 OAuth 的工作示例。它不是一个市场应用程序，但身份验证是相同的，所以它应该是一个很好的起点。

# android-activity - 果冻豆中用户选项的Android活动？

> ID：14230788
> 
> 赞同：0
> 
> 时间：2013-01-09T08:11:14.657
> 
> 标签：android-activity, android-4.2-jelly-bean

有人能告诉我 Android 4.2 平板电脑中用户选项的活动是什么吗？我想通过“adb shell am”命令开始这个意图，但我不知道那个活动。它存在还是不存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:27:04.040

直接检查后，我确认在**我**的 Google Galaxy Nexus、Android 4.1.2 上可用。这非常接近 4.2。

`adb shell am`打印可能有帮助的内置文档的两个屏幕。

# java - Groovy/Grails 包含小写字母

> ID：14230789
> 
> 赞同：8
> 
> 时间：2013-01-09T08:11:15.907
> 
> 标签：java, list, grails, groovy

我想检查一个列表是否包含特定的字符串。

在检查列表中的所有条目之前，应该在 sting 中。小写

我试过这样

```
 def venueName = params.name
 def venueNameLists = Venue.executeQuery("select name from Venue")
  if(venueNameLists.toLowerCase().contains(venueName.toLowerCase())){
            error = true;
            log.debug("save :: duplicate name")
            flash.message = "Venue name already exist";
            render(view: "create", model: [venueInstance: new Venue(params)])
            return
        } 
```

给出错误

```
 No signature of method: java.util.ArrayList.toLowerCase() is applicable for argument types: () values: []. Stacktrace follows:

  groovy.lang.MissingMethodException: No signature of method: java.util.ArrayList.toLowerCase() is applicable for argument types: () values: [] 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-09T09:01:27.070

我同意**aiolos**：使用约束或尝试按名称查找实例忽略大小写。但是要以您的方式解决此问题，请尝试`*.`（[传播运算符](https://groovy-lang.org/operators.html#_spread_operator)）：

```
venueNameLists*.toLowerCase().contains(venueName.toLowerCase()) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T08:41:28.173

如果您想在保存元素之前检查重复条目，请在域类上使用[约束。](http://grails.org/doc/latest/ref/Domain%20Classes/constraints.html)[如果需要不区分大小写](https://stackoverflow.com/a/2537997/1230366)，您可以在这里使用[唯一](http://grails.org/doc/latest/ref/Constraints/unique.html)约束或实现自己的约束。

如果您需要手动检查，请尝试以下操作：

```
def venueWithNameFromParams = Venue.findByNameIlike(params.name) // ignore case
if(venueWithNameFromParams){
    // venueName is in venueNameList
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-11-19T11:56:39.083

如果您正在寻找如何检查多个字符串是否包含一个单词，同时忽略区分大小写，请在单词的正则表达式上使用 (?i)。

例如，以下将是肯定条件：

```
word = "YES"
word.matches(/(?i)yes|ok|true/) 
```

# c# - 使用 C# 从批处理文件运行 PowerShell 脚本

> ID：14230795
> 
> 赞同：0
> 
> 时间：2013-01-09T08:11:36.963
> 
> 标签：c#, powershell, process, batch-file

我有一个powershell脚本文件和一个bat文件，bat文件运行脚本，所以当我双击
bat文件时，脚本就会被执行。
在我的代码中，我执行以下操作：

```
 ProcessStartInfo info = new ProcessStartInfo(@batchfilename + ".bat");  
            Process processToStart = new Process();  
            processToStart.StartInfo = info;  
            processToStart.Start(); 
```

批处理被执行并且powershell脚本启动，但它崩溃告诉我一些关于策略问题的事情。
尽管我的政策不受限制，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:13:21.087

您需要将 Execution Policy 设置为不受限制的[MSDN](http://technet.microsoft.com/en-us/library/ee176961.aspx)。

执行策略（来自上面的 MSDN 链接）

> *   受限 - 不能运行任何脚本。Windows PowerShell 只能在交互模式下使用。
> *   AllSigned - 只能运行由受信任的发布者签名的脚本。
> *   RemoteSigned - 下载的脚本必须由受信任的发布者签名才能运行。
> *   不受限制 - 没有限制；可以运行所有 Windows PowerShell 脚本。

对于 64 位系统，需要为 x86 和 x64 分别设置。

[PowerShell 32 和 64 位具有不同的执行策略设置](http://simon-hughes.blogspot.in/2011/05/setting-powershell-execution-policy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:17:47.713

```
powershell.exe c:\FULL_PATH\send.ps1 
```

# dotnetopenauth - 禁用依赖方发现

> ID：14230796
> 
> 赞同：0
> 
> 时间：2013-01-09T08:11:47.837
> 
> 标签：dotnetopenauth

是否可以使用某些配置值禁用 DotNetOpenAuth 上的依赖方发现，或者我需要通过修改代码来做到这一点？如果是配置值，它将是什么，如果是代码，我应该查看什么文件？

RP Discovery 的问题是有问题的 RP 不支持它，当 DotNetOpenAuth 尝试查询 RP 直到 HTTP GET 超时时，它会导致身份验证延迟 10 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T10:34:41.600

似乎这在 DotNetOpenAuth 中不可配置，但实际上是在 Decide.aspx 页面上完成的（在示例代码中），因此可以注释掉这些行。

```
relyingPartyVerificationResultLabel.Text =
ProviderEndpoint.PendingRequest.IsReturnUrlDiscoverable(ProviderEndpoint.Provider.Channel.WebRequestHandler) == RelyingPartyDiscoveryResult.Success ? "passed" : "failed";

realmLabel.Text = ProviderEndpoint.PendingRequest.Realm.ToString(); 
```

# android - Android 媒体播放器错误 2005

> ID：14230799
> 
> 赞同：0
> 
> 时间：2013-01-09T08:11:58.683
> 
> 标签：android

我在尝试播放视频时收到一个奇怪的错误代码。

我得到错误代码 1（即 ERROR_UNKNOWN）和额外的 -2005，它根本没有任何文档。

我怎么可能知道为什么会这样？

谢谢

```
01-09 09:50:36.903: E/MediaPlayer(3062): Error (1,-2005) 
```

这是我播放视频的部分

```
if(m_videoView.canSeekForward() && seekTo > 0 && seekTo <= m_videoView.getDuration())
                    m_videoView.seekTo(seekTo);
                m_videoView.start();
                m_videoView.requestFocus();
                m_videoView.setKeepScreenOn(true); 
```

这是我获得播放网址的地方

```
String url = data.replace('\"', ' ').trim();
                        try
                        {
                            URL _url = new URL(url);
                            _url.toURI();
                        }
                        catch(URISyntaxException ex)
                        {
                            Log.e("url from media", ex.getMessage() + " for " + url);
                            SystemUtils.alertMsg(getContext(), "There is a problem with this film right now.\nPlease try again later.");//getContext().getResources().getString(R.string.not_subscribed_msg));
                            dismiss(); 
                            playerLayout.findViewWithTag("progressbar").setVisibility(View.GONE);
                            return;  
                        } 
                        catch (MalformedURLException e) 
                        {
                            Log.e("url from media", e.getMessage() + " for " + url);
                            SystemUtils.alertMsg(getContext(), "There is a problem with this film right now.\nPlease try again later.");//getContext().getResources().getString(R.string.not_subscribed_msg));
                            dismiss();
                            playerLayout.findViewWithTag("progressbar").setVisibility(View.GONE);
                            return;
                        }

                        url = url.replace("http", "widevine").replace("16.109", "16.1");  

                        setFilePath(url); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:26:12.790

`-2005`错误代码可能在ICS 及更高版本上`ERROR_DRM_DECRYPT`（参见[http://code.metager.de/source/xref/android/4.1.1/frameworks/av/include/media/stagefright/MediaErrors.h#54 ）。](http://code.metager.de/source/xref/android/4.1.1/frameworks/av/include/media/stagefright/MediaErrors.h#54)

**编辑**`DRM_ERROR_CANNOT_HANDLE`：如果您使用 Gingerbread 或更早，也可能是这样。

# c# - 将数据集数据插入数据库表时遇到问题

> ID：14230800
> 
> 赞同：1
> 
> 时间：2013-01-09T08:12:00.630
> 
> 标签：c#, .net, dataset

我已经使用这个[链接](http://www.codeproject.com/Articles/5976/SQLDataAdapter-without-using-SQLCommandBuilder)来弄清楚如何做到这一点。但我的问题是它不起作用。这是我的代码：

```
public void UpdateDatabase(DataSet data, string tableName)
{
    string connectionString = ConfigurationManager.ConnectionStrings["TestDbOnBrie"].ConnectionString;
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        try
        {
            connection.Open();
            using (SqlDataAdapter adapter = new SqlDataAdapter("SELECT * FROM dbo.TransportSchedule_Customer;", connection))
            {
                using (SqlCommand updateCmd = new SqlCommand("UPDATE dbo.TransportSchedule_Customer SET Alias=@Alias, DeliveryDays1=@DeliveryDays1, DeliveryHours1=@DeliveryHours1, DeliveryType1=@DeliveryType1, DeliveryDays2=@DeliveryDays2, DeliveryHours2=@DeliveryHours2, DeliveryType2=@DeliveryType2, DeliveryDays3=@DeliveryDays3, DeliveryHours3=@DeliveryHours3, DeliveryType3=@DeliveryType3,  DistanceToDealer=@DistanceToDealer WHERE AdrID=@AdrID AND CustID=@CustID", connection))
                {
                    updateCmd.Parameters.Add("@CustID", SqlDbType.VarChar, 50, "CustID");
                    updateCmd.Parameters.Add("@AdrID", SqlDbType.Int, 50,"AdrID");
                    updateCmd.Parameters.Add("@Alias", SqlDbType.VarChar, 50, "Alias");

                    updateCmd.Parameters.Add("@DeliveryDays1", SqlDbType.VarChar, 50, "DeliveryDays1");
                    updateCmd.Parameters.Add("@DeliveryHours1", SqlDbType.VarChar, 50, "DeliveryHours1");
                    updateCmd.Parameters.Add("@DeliveryType1", SqlDbType.VarChar, 50, "DeliveryType1");

                    updateCmd.Parameters.Add("@DeliveryDays2", SqlDbType.VarChar, 50, "DeliveryDays2");
                    updateCmd.Parameters.Add("@DeliveryHours2", SqlDbType.VarChar, 50, "DeliveryHours2");
                    updateCmd.Parameters.Add("@DeliveryType2", SqlDbType.VarChar, 50, "DeliveryType2");

                    updateCmd.Parameters.Add("@DeliveryDays3", SqlDbType.VarChar, 50, "DeliveryDays3");
                    updateCmd.Parameters.Add("@DeliveryHours3", SqlDbType.VarChar, 50, "DeliveryHours3");
                    updateCmd.Parameters.Add("@DeliveryType3", SqlDbType.VarChar, 50, "DeliveryType3");

                    updateCmd.Parameters.Add("@Alias", SqlDbType.VarChar, 50, "Alias");

                    adapter.UpdateCommand = updateCmd;
                }
            }
        }
        catch (Exception exception)
        {
            Console.WriteLine("ERROR in UpdateDatabase() method. Error Message : " + exception.Message);
        }
        finally
        {
            if (connection.State == System.Data.ConnectionState.Open)
            {
                connection.Close();
            }
        }
    }
} 
```

代码运行没有任何错误，但我的数据库表没有使用新信息进行更新。我可以看到数据集具有从我的 Excel 文件中检索到的正确信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:14:32.970

您忘记调用`Update`更新代码中数据的方法，这可能是这里的问题

检查您提供的链接，有用于更新的方法，如下所示

```
sqlDa.Update(dSet,"emp"); 
```

在数据库中更新。

* * *

**MSDN**

[DataAdapter.Update 方法](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.update.aspx)-从命名的“ .”中为指定`INSERT, UPDATE, or DELETE`的每一`inserted, updated, or deleted`行调用相应的语句。`DataSet``DataTable``Table`

# python - 为什么这个例子不离开

> ID：14230802
> 
> 赞同：0
> 
> 时间：2013-01-09T08:12:04.767
> 
> 标签：python, django, django-templates

这是此页面的链接[https://code.djangoproject.com/ticket/5172](https://code.djangoproject.com/ticket/5172)

更具体地说，这

```
{% for 5 %}
repeat me
{% endfor %} 
```

和这个

```
{% for my_integer %}
loop: {{ forloop.counter }}
{% endfor %} 
```

我所犯的错误如下

```
TemplateSyntaxError: 'for' statements should have at least four words: for 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:21:02.307

我想你想要的是这样的：

```
{% for i in 5|getrange %}
do something
{% endfor %} 
```

请参阅[此](http://djangosnippets.org/snippets/1357/)代码段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:19:26.963

您链接到的页面是请求此类语法的票证。它已关闭`wontfix`，因为该功能非常特别*不可*用，并且不太可能很快添加。

相反，您需要使用类似`{% for counter in my_range %}`或类似的东西，其中`my_range`设置为`range(5)`.

# iphone - 在 iphone 中获取联系人生日

> ID：14230806
> 
> 赞同：0
> 
> 时间：2013-01-09T08:12:29.193
> 
> 标签：iphone

我从 stackoverflow 中获得了在 iphone 的标签中获取联系人生日的代码，但它正在控制台中打印 2013-01-09 13:31:15.913 addressBook[1478:c07] 1604-09-29 12:00:00 +0000 那么如何只能打印生日。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:17:52.507

像这样使用 NSDateFormatter

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"MMM dd, yyyy"];
NSString *dte=[dateFormatter stringFromDate:date];

[dateFormatter release];
NSLog(@"Birthdate : %@",dte); 
```

# android - 谷歌地图 android API V2 崩溃

> ID：14230808
> 
> 赞同：6
> 
> 时间：2013-01-09T08:12:30.947
> 
> 标签：android, crash, google-api, android-maps-v2

我想在我的 android 上加载谷歌地图 API。我尝试了我搜索的所有内容，但它仍然崩溃。这是我的 MainActivity.java

```
package com.example.androidmapsv2;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Show the Up button in the action bar.
        getActionBar().setDisplayHomeAsUpEnabled(true);
        GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());

        GoogleMap map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

    }

} 
```

这是我的布局 activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >
    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/>
</RelativeLayout> 
```

这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.androidmapsv2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="16" />

    <permission
        android:name="com.example.androidmapsv2.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" >
    </permission>

    <uses-permission android:name="com.example.androidmapsv2.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <!-- Require OpenGL ES version 2 -->
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name="com.example.androidmapsv2.MainActivity"
            android:label="aaa" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyDr9xN8L3sF6W2ZRWmTR7q0lhTeOWhXEfQ" />
    </application>

</manifest> 
```

这是我的钥匙 ![在此处输入图像描述](../Images/daf0b38290292e01e3064e851d62ce45.png)

这是包含的库（在更新中解决） ![在此处输入图像描述](../Images/f611d991d356d882f8a7a405d70aaf4f.png)

而且我没有真正的安卓设备，所以我在本[教程中将它安装在模拟器上](https://stackoverflow.com/a/13734937/1821326)

这是日志猫

```
 01-09 18:05:19.184: E/Trace(1366): error opening trace file: No such file or directory (2)
01-09 18:05:19.354: W/dalvikvm(1366): Unable to resolve superclass of Lcom/example/androidmapsv2/MainActivity; (5)
01-09 18:05:19.354: W/dalvikvm(1366): Link of class 'Lcom/example/androidmapsv2/MainActivity;' failed
01-09 18:05:19.365: D/AndroidRuntime(1366): Shutting down VM
01-09 18:05:19.365: W/dalvikvm(1366): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
01-09 18:05:19.384: E/AndroidRuntime(1366): FATAL EXCEPTION: main
01-09 18:05:19.384: E/AndroidRuntime(1366): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.androidmapsv2/com.example.androidmapsv2.MainActivity}: java.lang.ClassNotFoundException: com.example.androidmapsv2.MainActivity
01-09 18:05:19.384: E/AndroidRuntime(1366):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at android.os.Looper.loop(Looper.java:137)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at java.lang.reflect.Method.invokeNative(Native Method)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at java.lang.reflect.Method.invoke(Method.java:511)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at dalvik.system.NativeStart.main(Native Method)
01-09 18:05:19.384: E/AndroidRuntime(1366): Caused by: java.lang.ClassNotFoundException: com.example.androidmapsv2.MainActivity
01-09 18:05:19.384: E/AndroidRuntime(1366):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
01-09 18:05:19.384: E/AndroidRuntime(1366):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
01-09 18:05:19.384: E/AndroidRuntime(1366):     ... 11 more 
```

**更新**

我试图将 google-play-services_lib 复制到工作区并且红色标记消失 ![在此处输入图像描述](../Images/6692489fcde16ccabe8cdf3ebc4fdec0.png) 但又出现了另一个错误。它缺少 google-play-services_lib.jar（lib 文件夹名称 + .jar）。当我单击 google-play-services_lib.jar 时如何修复它 ![在此处输入图像描述](../Images/8844cc27f628e918b96d55ac3532a1bf.png) ，删除按钮不显示（如图所示）。但是我尝试删除所有 Android 依赖项并再次导入其他库。现在它工作了，但仍然崩溃。

我试过改变

```
MainActivity extends Activity 
```

至

```
MainActivity extends FragmentActivity 
```

和布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >
    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/>
</RelativeLayout> 
```

它出现另一个错误。帮帮我，现在我没有解决方案

最后，我解决了我的错误。它是由我的日食引起的（我猜）。添加库类时，它会自动出现“google-play-services_lib.jar”，您无需执行任何操作。我重新安装了 Eclipse，一切正常 ![在此处输入图像描述](../Images/fff5e55a4e6ba39bb9d56516cbc87334.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:53:56.710

当我第一次使用 API V2 为地图编码时，我也遇到了这种问题。

只需尝试使用扩展`FragmentActivity`而不是`Activity`

您必须将项目（goolge_play_services）复制到您的工作区，然后将其附加到您的项目中。在上图中，它显示了红色的十字，因此选择它并删除，然后再次将库添加到项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:56:09.627

11以下必须`SupportMapFragment`使用`API`

```
<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"/> 
```

*   **重要的**

    不要忘记使用***FragmentActivity*****扩展您的Activity**

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:16:06.330

您必须将项目（goolge_play_services）复制到您的工作区，然后将其附加到您的项目中。

您正在做的是导入项目而不是选中将项目复制到工作区，因为它在添加的库中显示错误标记。

因此，只需在导入 google_play_services 项目时选中将项目复制到工作区，然后将其附加到您的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T08:41:36.120

在这里我可以看到您使用的是 api 级别 8 和 AFAIK，从 11 开始支持“片段”。

所以这里需要用到片段的兼容库。

还要确保您还在工作区中导入了 google-play-service 的库并将其添加到您的应用程序中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-24T05:46:48.167

您需要编辑应用程序的 AndroidManifest.xml 文件，并在元素中添加以下声明。这嵌入了应用程序编译时使用的 Google Play 服务版本。

```
<meta-data
    android:name="com.google.android.gms.version"
    android:value="@integer/google_play_services_version" /> 
```*

# asp.net - 登录失败：当我尝试仅使用多线程连接我的数据库时

> ID：14230810
> 
> 赞同：0
> 
> 时间：2013-01-09T08:12:36.433
> 
> 标签：asp.net, .net, sql, sql-server, iis

我的代码中有两种方法。两种方法，连接同一个DB，执行同一个SP，根据输入字符串返回数据

```
GetData("xxx");

GetData("xyz"); 
```

当我一一调用这些方法时，它工作正常。但是当我尝试使用单独的线程运行这些方法时，它给出了

```
Message: "Login failed. The login is from an untrusted domain and cannot be used with Windows authentication."
Number: 18452 
```

为什么这仅通过线程发生，我该如何解决？请帮忙。

这是我的连接字符串

```
"server=DBServer;database=DataBaseName;Integrated Security=SSPI;Pooling=True"/>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:32:24.647

主要是推测性的猜测，但这可能意味着您没有正确地模拟线程中的正确上下文。很可能您的 ASP.Net 线程正在模拟调用者，但您手动启动的线程却没有。您需要获取主线程的身份并将其传递给并发线程并在这些工作线程中模拟它。如果没有这种预防措施，您的工作线程将在应用程序池标识下运行。

但真正的要点是……**你完全不需要这样做**。如果要并行发出多个调用，请设置[`AsynchronousProcessing`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.asynchronousprocessing.aspx)为`true`并使用[`BeginExecuteReader`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.beginexecutereader.aspx). 这样，您可以有多个请求（在单独的连接上，仍然！）并行执行，而不必担心模拟。

# php - 如果没有推文，Twitter OAuth 返回空白数组

> ID：14230814
> 
> 赞同：1
> 
> 时间：2013-01-09T08:12:47.620
> 
> 标签：php, zend-framework, twitter, twitter-oauth

我在这个问题上花了我最后的 5 个小时，最后我来到这里寻求解决方案。

我正在我的网站（Zend Framework + PHP）中使用 twitter 功能登录，一切正常。但我面临以下问题：

如果用户在他的帐户中没有推文（0 条推文），那么

```
$tweets = json_decode($response->getBody());
echo "<pre>";
print_r($tweets);
exit; 
```

它向我展示了空白数组。即: `Array();`:-(

如果我在 twitter 帐户中添加一些推文，那么它会向我显示完整的数组以及显示名称、图像等用户信息......就像这样：

```
Array
(
    //other data
    [0] => stdClass Object
        (
            [user] => stdClass Object
            ....
            ....
            so on..
        )
) 
```

以下是我的代码：

```
public function twitterregisterAction() {
        $path = realpath(APPLICATION_PATH . '/../library/');
        set_include_path($path);
        session_start();
        require $path . "/Zend/Oauth/Consumer.php";

        $config = array(
            "callbackUrl" => "http://" . $_SERVER['HTTP_HOST'] . "/register/twittercallback",
            "siteUrl" => "http://twitter.com/oauth",
            "consumerKey" => "xxxxxxxxxxxxx",
            "consumerSecret" => "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
        );
        $consumer = new Zend_Oauth_Consumer($config);
// fetch a request token
        $token = $consumer->getRequestToken();

// persist the token to storage
        $_SESSION["TWITTER_REQUEST_TOKEN"] = serialize($token);
// redirect the user
        $consumer->redirect();
    }

    /*
     * Ticket id #16
     * twittercallbackAction method
     */

    public function twittercallbackAction() {
        $config = array(
            "callbackUrl" => "http://" . $_SERVER['HTTP_HOST'] . "/register/twittercallback",
            "siteUrl" => "http://twitter.com/oauth",
            "consumerKey" => "xxxxxxxxxxxxxxxxxx",
            "consumerSecret" => "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
        );
        $consumer = new Zend_Oauth_Consumer($config);

        if (!$this->_getParam("denied")) {

            if (!empty($_GET) && isset($_SESSION['TWITTER_REQUEST_TOKEN'])) {
                $token = $consumer->getAccessToken($_GET, unserialize($_SESSION['TWITTER_REQUEST_TOKEN']));
            } else {
// Mistaken request? Some malfeasant trying something?
                exit('Invalid callback request. Oops. Sorry.');
            }
// save token to file
// file_put_contents('token.txt', serialize($token));
            $client = $token->getHttpClient($config);
            $client->setUri('https://api.twitter.com/1/statuses/user_timeline.json?');
            $client->setMethod(Zend_Http_Client::GET);
            $client->setParameterGet('name');
            $client->setParameterGet('profile_image_url');
            $response = $client->request();
            $tweets = json_decode($response->getBody());

            $session = new Zend_Session_Namespace("userIdentity");
            Zend_Session::rememberMe(63072000); //2years
            $session->tw_id = $tweets[0]->user->id;
            $session->tw_name = $tweets[0]->user->name;
            $session->tw_image = $tweets[0]->user->profile_image_url;

            if ($session->tw_id != "") {
                $tw_id = $session->tw_id;
//Calling the function twitterAuthAction for email authentication
                $twAuthArr = $this->twitterAuthAction($tw_id);
                if ($twAuthArr['socialId'] == $tw_id) {
                    $session->userId = $twAuthArr['id'];
                    $session->email = $twAuthArr['emailId'];
                    $this->_redirect('/profile/showprofile');
                } else {
                    $user = new UserRegistration();
                    $firstname = "";
                    $lastname = "";
                    $password = "";
                    $socialtype = "twitter";
                    $email = "";
                    $socialid = $session->tw_id;
                    $result = $user->registerUser($firstname, $lastname, $socialid, $socialtype, $email, $password);
                    $session->userId = $result;
                    $this->_redirect('/register');
                }
            }
            $this->_redirect("/register");
        } else {
            $this->_redirect("/register");
        }
    } 
```

我的问题是：

1）**如果我的推特帐户（或新创建的推特帐户）中没有任何推文，为什么它不提供用户数组**

2)**我想要来自 Twitter 帐户的用户个人资料详细信息。我怎么才能得到它？**

需要帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:00:18.027

我认为您误读了[statuses/user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)端点的 Twitter API 文档。

`user`您标识的字段是*返回的推文*中的字段之一。如果您指向的用户 ID 没有推文，则返回的数组中将没有条目，因此没有用户字段。

如果即使在没有任何推文的情况下您也需要用户信息，那么您可能需要点击[users/show](https://dev.twitter.com/docs/api/1.1/get/users/show)端点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T10:52:18.700

我认为根据大卫的回答，您需要在`users/show url`那里使用而不是使用`statuses/user_timeline`. 您可以使用 curl 请求 url，这样您将获得包含用户信息的响应。

尝试使用以下代码：

```
 $user_id = $client->getToken()->getParam('user_id');
    $trends_url = "http://api.twitter.com/1/users/show.json?user_id=".$user_id;

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $trends_url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $curlout = curl_exec($ch);
    curl_close($ch);    
    $response = json_decode($curlout, true);

    $session = new Zend_Session_Namespace("userIdentity");
    Zend_Session::rememberMe(63072000); //2years
    $session->tw_id = $response['id'];
    $session->tw_name = $response['name'];
    $session->tw_image = $response['profile_image_url']; 
```

试试这个。希望它会帮助你。

# c++ - 如何从 lua_topointer 访问 lua 的对象？

> ID：14230821
> 
> 赞同：0
> 
> 时间：2013-01-09T08:13:27.533
> 
> 标签：c++, c, lua

在 Lua 代码中

```
Test = {}
function Test:new()
  local obj = {}
  setmetatable(obj, self)
  self.__index = self
  return obj
end
local a = Test:new()
a.ID = "abc123"
callCfunc(a) 
```

在 C 代码中

```
int callCfunc(lua_State* l)
{
  SetLuaState(l);
  void* lua_obj = lua_topointer(l, 1);            //I hope get lua's a variable
  processObj(lua_obj);
  ...
  return 0;
}

int processObj(void *lua_obj)
{
  lua_State* l = GetLuaState();
  lua_pushlightuserdata(l, lua_obj);              //access lua table obj
  int top = lua_gettop(l);
  lua_getfield(l, top, "ID");                     //ERROR: attempt to index a userdata value
  std::string id = lua_tostring(l, -1);           //I hoe get the value "abc123"
  ...
  return 0;
} 
```

我收到错误：尝试索引用户数据值
如何从 lua_topointer() 访问 lua 的对象？
在 C 中存储一个 lua 对象，然后从 C 中调用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:39:28.520

您不应该使用`lua_topointer`，因为您无法将其转换回 lua 对象，将您的对象存储在**注册表**中并传递它的**注册表索引**：

```
int callCfunc(lua_State* L)
{
    lua_pushvalue(L, 1);//push arg #1 onto the stack
    int r = luaL_ref(L, LUA_REGISTRYINDEX);//stores reference to your object(and pops it from the stask)
    processObj(r);
    luaL_unref(L, LUA_REGISTRYINDEX, r); // removes object reference from the registry
    ...

int processObj(int lua_obj_ref)
{
    lua_State* L = GetLuaState();
    lua_rawgeti(L, LUA_REGISTRYINDEX, lua_obj_ref);//retrieves your object from registry (to the stack top)
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T09:33:17.340

您不想`lua_topointer`用于该任务。事实上，唯一合理的用途`lua_topointer`是用于调试目的（如日志记录）。

作为`a`一个*表*，你需要使用`lua_gettable`它来访问它的一个字段，或者更简单的使用`lua_getfield`。当然，您不能为该任务传递`void*`指向`processObj`该任务的指针，但您可以使用堆栈索引。

# javascript - HTML 脚本不工作

> ID：14230823
> 
> 赞同：0
> 
> 时间：2013-01-09T08:13:31.163
> 
> 标签：javascript, html

有人可以解释为什么单击按钮时我没有收到此警报消息吗？我刚开始学习 HTML，这是我书中给出的代码，它应该可以工作，但是当我执行它时它不起作用。问题是什么？我正在使用 Mozilla Firefox 测试版。

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>This is a test page</title>
</head>
<body>
    <h1>This is a test Paragraph</h1>
    <button type="button"
    onclick="alert('You've clicked me.')">Click me!</button>
</body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T08:15:05.687

您有语法错误。您需要避开“you've”中的撇号。

```
alert('You\'ve clicked me.') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T08:15:20.530

你需要换行

`onclick="alert('You've clicked me.')">Click me!</button>`

到

`onclick="alert('You\'ve clicked me.')">Click me!</button>`

# css - Twitter Bootstrap，下拉边框

> ID：14230824
> 
> 赞同：5
> 
> 时间：2013-01-09T08:13:32.053
> 
> 标签：css, twitter-bootstrap, navbar

[我可以在http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)在 Chrome 中看到这一点。基本上，如果您单击下拉链接两次（打开然后关闭子菜单），菜单项周围会有一个黄色边框，看起来很奇怪。我在 CSS 中找不到它的设置位置，所以问题是如何删除它？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T08:23:51.917

这是您的浏览器默认插入的大纲。

尝试插入你的CSS

```
a.dropdown-toggle { outline: none} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:18:05.577

您确定这不是浏览器中的设置吗？我无法在我的最后复制这个问题。尝试更换浏览器并检查问题是否仍然存在。

好像是浏览器的问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-09T08:24:15.857

这可能是由于显示效果不佳或 VGA 输出问题引起的。我没有遇到您提到的任何症状，但根据我的经验，可能是由这两种症状之一引起的。您可能需要考虑重新安装或更新 VGA 驱动程序，或者尝试使用伽玛、亮度等设置。

希望能帮助到你。

# ios - 由于无法识别电影的文件格式，无法打开视频文件

> ID：14230825
> 
> 赞同：23
> 
> 时间：2013-01-09T08:13:32.927
> 
> 标签：ios, objective-c, iphone, imagemagick

我正在尝试从**图像魔术**库提供的图像创建视频文件。像不透明度差异一样一一应用一些效果后，它已成功创建，但`Quick time player`给出了错误`" video file could not be opened. The movie's file format isn't recognized "`。

我正在使用以下代码：

```
double d = 0.00;

- (void)posterizeImageWithCompression:(id)sender {

    // Here we use JPEG compression.
    NSLog(@"we're using JPEG compression");

    MagickWandGenesis();
    magick_wand = NewMagickWand();
    magick_wand = [self magiWandWithImage:[UIImage imageNamed:@"iphone.png"]];

    MagickBooleanType status;

    status = MagickSetImageOpacity(magick_wand, d);

    if (status == MagickFalse) {
        ThrowWandException(magick_wand);
    }
    if (status == MagickFalse) {
        ThrowWandException(magick_wand);
    }
    size_t my_size;
    unsigned char * my_image = MagickGetImageBlob(magick_wand, &my_size);
    NSData * data = [[NSData alloc] initWithBytes:my_image length:my_size];
    free(my_image);
    magick_wand = DestroyMagickWand(magick_wand);
    MagickWandTerminus();
    UIImage * image = [[UIImage alloc] initWithData:data];

    d = d + 0.05;
    if (status == MagickFalse) {
        ThrowWandException(magick_wand);
    }

    NSData *data1;

    NSArray *paths;

    NSString *documentsDirectory,*imagePath ;

    UIImage *image1 = image;

    paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    documentsDirectory = [paths objectAtIndex:0];

    imagePath = [documentsDirectory stringByAppendingPathComponent:[NSString   stringWithFormat:@"%f.png",d]];

    data1 = UIImagePNGRepresentation(image1);

    if (d <= 1.0 ) {

        [data1 writeToFile:imagePath atomically:YES];

        [imageViewButton setImage:image forState:UIControlStateNormal];

        // If ready to have more media data
         if (assetWriterPixelBufferAdaptor.assetWriterInput.readyForMoreMediaData) {
             CVReturn cvErr = kCVReturnSuccess;
             // get screenshot image!
             CGImageRef image1 = (CGImageRef) image.CGImage;

             // prepare the pixel buffer
             CVPixelBufferRef pixelsBuffer = NULL;

             // Lock pixel buffer address
             CVPixelBufferLockBaseAddress(pixelsBuffer, 0);

            // pixelsBuffer = [self pixelBufferFromCGImage:image1];

             CVPixelBufferUnlockBaseAddress(pixelsBuffer, 0);

             CFDataRef imageData= CGDataProviderCopyData(CGImageGetDataProvider(image1));
             NSLog (@"copied image data");
             cvErr = CVPixelBufferCreateWithBytes(kCFAllocatorDefault,
                                                  FRAME_WIDTH,
                                                  FRAME_HEIGHT,
                                                  kCVPixelFormatType_32BGRA,
                                                  (void*)CFDataGetBytePtr(imageData),
                                                  CGImageGetBytesPerRow(image1),
                                                  NULL,
                                                  NULL,
                                                  NULL,
                                                  &pixelsBuffer);
             NSLog (@"CVPixelBufferCreateWithBytes returned %d", cvErr);

             // calculate the time
             CFAbsoluteTime thisFrameWallClockTime = CFAbsoluteTimeGetCurrent();
             CFTimeInterval elapsedTime = thisFrameWallClockTime - firstFrameWallClockTime;
             NSLog (@"elapsedTime: %f", elapsedTime);
             CMTime presentationTime =  CMTimeMake (elapsedTime * TIME_SCALE, TIME_SCALE);

             // write the sample
             BOOL appended = [assetWriterPixelBufferAdaptor appendPixelBuffer:pixelsBuffer withPresentationTime:presentationTime];

             if (appended) {
                 NSLog (@"appended sample at time %lf", CMTimeGetSeconds(presentationTime));
             } else {
                 NSLog (@"failed to append");
                 [self stopRecording];
             }

             // Release pixel buffer
             CVPixelBufferRelease(pixelsBuffer);
             CFRelease(imageData);
         }
     }

} 
```

它还显示错误，例如...

```
VideoToolbox`vt_Copy_32BGRA_2vuyITU601 + 91 and 
VideoToolbox`vtPixelTransferSession_InvokeBlitter + 574 and 
VideoToolbox`VTPixelTransferSessionTransferImage + 14369 and 
VideoToolbox`VTCompressionSessionEncodeFrame + 1077 and 
MediaToolbox`sbp_vtcs_processSampleBuffer + 599 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-20T06:33:20.340

QT Player 的信息量不是很大。通常，玩家会提供丢失的编解码器的名称。如果您生成该文件并在同一台计算机上以编程方式播放它，而您在 QT 播放它时不成功，那么，无论出于何种原因，程序库显然可以看到的编解码器（因为它使用了它）未在操作系统中注册。在 shell 中，您可以执行“文件”并获取文件类型以及可能的编解码器。如果没有，您应该能够使用 vlc、transcode 或 gstreamer 找到编解码器，然后按照 Apple 的说明将所需的编解码器直接下载并安装到操作系统中。

# spring-mvc - spring security 3 配置与现有项目

> ID：14230826
> 
> 赞同：1
> 
> 时间：2013-01-09T08:13:37.917
> 
> 标签：spring-mvc, spring-security

**例外**

```
SEVERE: Exception starting filter springSecurityFilterChain
    org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'springSecurityFilterChain' is defined
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1094)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:276)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196)
        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1079)
        at org.springframework.web.filter.DelegatingFilterProxy.initDelegate(DelegatingFilterProxy.java:217)
        at org.springframework.web.filter.DelegatingFilterProxy.initFilterBean(DelegatingFilterProxy.java:145)
        at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:179)
        at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:295)
        at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:422)
        at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:115)
        at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4072)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4726)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
        at org.apache.catalina.core.StandardService.start(StandardService.java:525)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>extjs-crud-grid-spring-hibernate</display-name>

<filter>
 <filter-name>springSecurityFilterChain</filter-name>
     <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

 <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

 <listener>
 <listener-  class>org.springframework.web.context.ContextLoaderListener</listener- class>
 </listener>

<servlet>
<servlet-name>extjs-crud-grid-spring-hibernate</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<init-param>
 <param-name>contextConfigLocation</param-name>
     <param-value>
            /WEB-INF/applicationContext.xml
            /WEB-INF/applicationContext-security.xml
     </param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
<servlet-name>extjs-crud-grid-spring-hibernate</servlet-name>
<url-pattern>*.action</url-pattern>
</servlet-mapping> 
```

# javascript - 如何找到触发 ajax 的 javascript 代码？

> ID：14230847
> 
> 赞同：2
> 
> 时间：2013-01-09T08:15:00.567
> 
> 标签：javascript, ajax, debugging, firebug

有什么快速的方法可以找出哪个 javascript 代码（文件名和确切的行）触发了特定的 ajax 调用？

使用 firebug 我可以找到 ajax 调用，但快速找出确切的行将有助于调试

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:22:01.700

在 Firebug 中，您可以单击控制台面板中的源链接：

![控制台 xhr 源链接](../Images/da1d14092580d3cc8684adcdd0b8414a.png)

或者在 Net 面板中设置断点：

![净 xhr 断点](../Images/7ff3fb5f748664922eb9e980a11c8898.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:16:03.530

如果您在代码中在此 ajax 调用处放置断点，调试器将向您显示函数调用堆栈。

请参阅[Chrome 开发人员工具文档](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints)：

![在此处输入图像描述](../Images/26d6c01a88c93f3790e4d97e43a9f173.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:26:57.743

我真的不知道任何干净的方法（也许存在一种）。但我有一点建议。

如果您没有在网页中使用 Prototype.js，请在命令行中输入以下命令（使用 Firebug 1.11）：

```
window.old$ = $; // in case you're using a framework like jQuery
include("https://ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js"); // loads Prototype 
```

控制台应打印：*prototype.js 正确包含。*

然后，要恢复旧的“$”变量，请键入：

```
window.$ = window.old$; 
```

现在已经加载了 Prototype，我们可以包装 XMLHttpRequest.prototype.open 函数，这样我们就可以获得调用堆栈（就像建议的 dystroy 一样）：

```
XMLHttpRequest.prototype.open = XMLHttpRequest.prototype.open.wrap(function(orig, ...args)
{
    console.log("trace for :"+args[1]); // prints the URL of the request
    console.trace(); // prints the stack trace
    orig.apply(null, args); // call the original function
}); 
```

就是这样。

注意：如果请求在开始时启动：

*   在“脚本”面板中，在网页的第一条 JS 指令上设置断点
*   在控制台面板中执行上面的命令
*   返回脚本面板，然后单击继续

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-09T08:19:03.767

我通常做的是添加一堆：

```
console.log("message that explains where in the code I am now..."); 
```

但请注意，因为console.log 可能会在旧版本的IE 中产生问题，所以您必须在投入生产时删除所有console.log 调用。

# c# - C# - MVC 应用程序如何更新和删除数据库中的记录

> ID：14230851
> 
> 赞同：4
> 
> 时间：2013-01-09T08:15:15.843
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, ef-code-first

我需要知道如何更新和删除数据库中的记录。我知道如何添加记录，但无法更新和删除数据库中的记录。

```
namespace Ex.Models
{
    using System;
    using System.Data.Entity;
    using System.Data.Entity.Infrastructure;

    public partial class MyEntities : DbContext
    {
        public MyEntities()
            : base("name= MyEntities")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            throw new UnintentionalCodeFirstException();
        }

        public DbSet<Friend> Friend { get; set; }
    }
} 
```

--

控制器

```
// POST: /Home/Edit/5
[HttpPost]
public ActionResult Edit(int id, Friend f)
{
    try
    {
        // TODO: Add update logic here
        myEntities.Friend.Attach(f);// Doesn't work.. How to update ?
        myEntities.SaveChanges();
        return RedirectToAction("Index");
    }
    catch
    {
        return View();
    }
} 
```

要将记录添加到数据库中，我使用了以下代码。有效;

```
myEntities.Friend.Add(f);
myEntities.SaveChanges();
return RedirectToAction("Index"); 
```

更新

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<Exp.Models.Friend>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Delete
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>Delete</h2>

<h3>Are you sure you want to delete?</h3>
<fieldset>
    <legend>Friend</legend>

    <div class="display-label">Name</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Name) %>
    </div>

</fieldset>
<% using (Html.BeginForm()) { %>
    <p>
        <input type="submit" value="Delete" /> |
        <%: Html.ActionLink("Back to List", "Index") %>
    </p>
<% } %>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T08:21:51.987

删除

```
myEntities.Friend.Remove(f);
myEntities.SaveChanges(); 
```

更新

```
Friend f = myEntities.Friend.FirstOrDefault(x => x.Id = MyId);
f.Name = NewName;
myEntities.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:18:54.427

要更新，它与 add 相同，但没有`.Friend.Add(f)`. 像这样加载项目：

```
var friendEntity = myEntites.Friend.SingleOrDefault(f => f.Id == id);
friendEntity.Field1 = f.Field1;
...
myEntities.SaveChanges(); 
```

要删除，请使用 , 的`.Add(f)`反义词`.Remove`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:47:46.827

**更新：**

```
 if (ModelState.IsValid && f != null)
        {
            myEntities.Friend.Attach(f);
     var upd = (from c in myEntities.Friend
                       where c.Id == f.Id
                       select c).FirstOrDefault();
    upd.Data1=f.Data1;
    ...
    ....
            myEntities.ObjectStateManager.ChangeObjectState(f, EntityState.Modified);
            myEntities.SaveChanges();
        } 
```

**删除：**

```
 if (ModelState.IsValid && f != null)
        {
            var del = (from c in myEntities.Friend
                       where c.Id == f.Id
                       select c).FirstOrDefault();

            myEntities.Friend.DeleteObject(del);
            myEntities.SaveChanges();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-07T10:33:42.137

更新：第一路

```
 public void IsActiveItem(int id)
         {
            var data = db.IRAS_InventoryItems.Find(id);
            data.IsActive = false;
            db.Entry(data).State = EntityState.Modified;           
            db.SaveChanges();
         } 
```

更新：第二种方法

```
 public void IsActiveItem(int id)
           {
            var data = (from a in db.IRAS_InventoryItems
            where a.Id == id
            select a).FirstOrDefault();
            data.IsActive = false;
            db.Entry(data).State = EntityState.Modified;           
            db.SaveChanges();
           } 
```

删除：首先

```
 public void Remove(int id)
         {
            var data = db.IRAS_InventoryItems.Find(id);
            data.IsActive = false;
            db.IRAS_InventoryItems.Remove(data);       
            db.SaveChanges();
         } 
```

删除：第二

```
 public void Remove(int id)
              {
                  var data = (from a in db.IRAS_InventoryItems
                  where a.Id == id
                  select a).FirstOrDefault();                      
                  db.IRAS_InventoryItems.Remove(data);          
                  db.SaveChanges();
               } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-12T14:48:59.293

只是**概念证明**Controler.UpdateModel 不能正常工作。

完整课程在这里 [https://stackoverflow.com/a/39452785/1071165](https://stackoverflow.com/a/39452785/1071165)

```
const string PK = "Id";
protected Models.Entities con;
protected System.Data.Entity.DbSet<T> model;

[HttpPost]
public virtual ActionResult AddEdit(T item)
{
    TestUpdate(item);

    con.SaveChanges();

    return RedirectToAction("Index");
}

[HttpGet]
public virtual ActionResult Remove(string id)
{
    int nId = 0;
    int.TryParse(id, out nId);
    if (nId != 0)
    {
        var item = model.Find(nId);
        con.Entry(item).State = System.Data.Entity.EntityState.Deleted;
        con.SaveChanges();
    }
    return Redirect(Request.UrlReferrer.ToString());
}

private void TestUpdate(object item)
{
    var props = item.GetType().GetProperties();
    foreach (var prop in props)
    {
        object value = prop.GetValue(item);
        if (prop.PropertyType.IsInterface && value != null)
        {
            foreach (var iItem in (System.Collections.IEnumerable)value)
            {
                TestUpdate(iItem);
            }
        }
    }

    int id = (int)item.GetType().GetProperty(PK).GetValue(item);
    if (id == 0)
    {
        con.Entry(item).State = System.Data.Entity.EntityState.Added;
    }
    else
    {
        con.Entry(item).State = System.Data.Entity.EntityState.Modified;
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-09T21:18:40.540

在索引页面中（删除和编辑链接）

```
<td>
            <%: Html.ActionLink("Edit","Edit", new{StuID=@item.StudId}) %>
        </td>
        <td>
            <%: Html.ActionLink("Delete","Delete", new{StuID=@item.StudId}) %>
         </td> 
```

编辑（第一个编辑功能用于编辑页面，它获取特定ID的所有数据，第二个功能用于保存更改。）

```
 public ActionResult Edit(Int32 StuID)
    {
        var studata = stu.Studs.Where(x => x.StudId == StuID).FirstOrDefault();
        if (studata != null)
        {
            TempData["ID"] = StuID;
            TempData.Keep();
            return View(studata);
        }
        return View();
    }
    [HttpPost]
    public ActionResult Edit(Stud stu1)
    {
        Int32 StuID = (int)TempData["ID"];
        var studata = stu.Studs.Where(x => x.StudId == StuID).FirstOrDefault();
        studata.StudName = stu1.StudName;
        studata.StudAddress = stu1.StudAddress;
        studata.StudEmail = stu1.StudEmail;
        stu.ObjectStateManager.ChangeObjectState(studata,);
        stu.SaveChanges();
        return RedirectToAction("Index");
    } 
```

删除

```
public ActionResult Delete(int StuID)
    {
        if (StuID > 0)
        {
            var studata = stu.Studs.Where(x => x.StudId == StuID).FirstOrDefault();
            if (studata != null)
            {
                stu.DeleteObject(studata);
                stu.SaveChanges();
            }
        }
        return RedirectToAction("Index");
    } 
```

# android - GCM 应用程序在模拟器上运行良好，但在 android 设备上崩溃

> ID：14230853
> 
> 赞同：-2
> 
> 时间：2013-01-09T08:15:36.747
> 
> 标签：android, android-emulator, google-cloud-messaging

我已经开发了一个应用程序并实现了 GCM（Google Cloud Messaging），它在模拟器和 bluestacks 上运行得非常好，但是当我在设备上运行它时，它不幸停止了，我无法理解原因。

```
Manifest file 
```

```
<uses-sdk android:minSdkVersion="8" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.androiddemos.NotificationActivity"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name=".ResultActivity"
        android:parentActivityName=".MainActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value=".NotificationActivity" />
    </activity>
    <activity
        android:name=".GcmActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.example.androiddemos" />
        </intent-filter>
    </receiver>

    <service android:name=".GCMIntentService" >
    </service>
</application>

<permission
    android:name="com.example.androiddemos.permission.C2D_MESSAGE"
    android:protectionLevel="signature" >
</permission>
<!-- App receives GCM messages. -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<!-- GCM connects to Google Services. -->
<uses-permission android:name="android.permission.INTERNET" />
<!-- GCM requires a Google account. -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<!-- Keeps the processor from sleeping when a message is received. -->
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="com.example.androiddemos.permission.C2D_MESSAGE" /> 
```

日志猫 `01-09 14:55:27.034: E/AndroidRuntime(25344): java.lang.IllegalArgumentException: android.content.pm.PackageManager$NameNotFoundException: ComponentInfo{com.example.androiddemos/com.example.androiddemos.MainActivity} 01-09 14:55:27.034: E/AndroidRuntime(25344): at android.support.v4.app.TaskStackBuilder.addParentStack(TaskStackBuilder.java:236) 01-09 14:55:27.034: E/AndroidRuntime(25344): at android.support.v4.app.TaskStackBuilder.addParentStack(TaskStackBuilder.java:215) 01-09 14:55:27.034: E/AndroidRuntime(25344): at com.example.androiddemos.GcmActivity.sendNotification(GcmActivity.java:70) 01-09 14:55:27.034: E/AndroidRuntime(25344): at com.example.androiddemos.GcmActivity.checkGCM(GcmActivity.java:49) 01-09 14:55:27.034: E/AndroidRuntime(25344): at com.example.androiddemos.GcmActivity$1.onClick(GcmActivity.java:33) 01-09 14:55:27.034: E/AndroidRuntime(25344): at android.view.View.performClick(View.java:4084) 01-09 14:55:27.034: E/AndroidRuntime(25344): at android.view.View$PerformClick.run(View.java:16966) 01-09 14:55:27.034: E/AndroidRuntime(25344): at android.os.Handler.handleCallback(Handler.java:615) 01-09 14:55:27.034: E/AndroidRuntime(25344): at android.os.Handler.dispatchMessage(Handler.java:92) 01-09 14:55:27.034: E/AndroidRuntime(25344): at android.os.Looper.loop(Looper.java:137) 01-09 14:55:27.034: E/AndroidRuntime(25344): at android.app.ActivityThread.main(ActivityThread.java:4745) 01-09 14:55:27.034: E/AndroidRuntime(25344): at java.lang.reflect.Method.invokeNative(Native Method) 01-09 14:55:27.034: E/AndroidRuntime(25344): at java.lang.reflect.Method.invoke(Method.java:511) 01-09 14:55:27.034: E/AndroidRuntime(25344): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 01-09 14:55:27.034: E/AndroidRuntime(25344): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 01-09 14:55:27.034: E/AndroidRuntime(25344): at dalvik.system.NativeStart.main(Native Method) 01-09 14:55:27.034: E/AndroidRuntime(25344): Caused by: android.content.pm.PackageManager$NameNotFoundException: ComponentInfo{com.example.androiddemos/com.example.androiddemos.MainActivity} 01-09 14:55:27.034: E/AndroidRuntime(25344): at android.app.ApplicationPackageManager.getActivityInfo(ApplicationPackageManager.java:225) 01-09 14:55:27.034: E/AndroidRuntime(25344): at android.support.v4.app.NavUtils.getParentActivityName(NavUtils.java:298) 01-09 14:55:27.034: E/AndroidRuntime(25344): at android.support.v4.app.NavUtils.getParentActivityIntent(NavUtils.java:261) 01-09 14:55:27.034: E/AndroidRuntime(25344): at android.support.v4.app.TaskStackBuilder.addParentStack(TaskStackBuilder.java:229) 01-09 14:55:27.034: E/AndroidRuntime(25344): ... 15 more`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:26:18.200

我认为问题是因为您没有根据此 logcat 行在清单中定义 MainActivity：

```
14:55:27.034: E/AndroidRuntime(25344): Caused by:
android.content.pm.PackageManager$NameNotFoundException:
ComponentInfo{com.example.androiddemos/com.example.androiddemos.MainActivity} 01-09 
```

您将 MainActivity 引用为 parentActivityName 但根本没有在清单中定义：

```
<activity
    android:name=".ResultActivity"
    android:parentActivityName=".MainActivity" >
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value=".NotificationActivity" />
</activity> 
```

如果您仍在使用 MainActivity，则需要将其添加到清单中：

```
<activity
    android:name=".MainActivity">
</activity> 
```

# iphone - UICollectionVIew 中的奇数个项目

> ID：14230864
> 
> 赞同：0
> 
> 时间：2013-01-09T08:16:37.883
> 
> 标签：iphone, ios, uicollectionview

我正在使用`UICollectionView`并且我的应用程序崩溃，因为我的物品数量为奇数，`list`但我需要拖曳部分中的物品。

这是我在每个部分中的项目编号：

```
(NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section
{
    return 2;
} 
```

这是问题所在：在我的列表中，我有 3 个项目，当 objectAtIndex 为 3 时，应用程序崩溃

```
 MSCoupon *coupon = [list objectAtIndex:indexPath.section * 2 + indexPath.row]; 
```

你有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:39:07.447

发生这种情况是因为集合视图试图访问第二部分的第二个元素。这导致崩溃，因为您的公式创建索引 3。

对于section section的第二个元素你的公式

```
indexPath.section * 2 + indexPath.row 
```

给

```
1*2 + 1 = 3 
```

由于您的数组只有 3 个元素，当您尝试访问第四个元素时它会通过异常。（数组索引以 0 开头）。在集合视图委托中，您编写此公式。保持其余代码不变，它应该可以工作

```
(NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section { 
  return (list.count/(section + 1)) >= 2? 2: 1; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:38:04.293

我的解决方案如下：

```
- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section
 {
  //return 2;
   return [list count];
} 
```

和：

```
- (NSInteger)numberOfSectionsInCollectionView: (UICollectionView *)collectionView
{
   //return [list count]/2;
   return 1;
} 
```

你对我有更好的建议吗？

# ios - 如何正确分配从一个视图控制器传递给另一个视图控制器的对象？

> ID：14230865
> 
> 赞同：1
> 
> 时间：2013-01-09T08:16:38.403
> 
> 标签：ios, objective-c

我是一个新的 Obj C 程序员，所以请多多包涵。我的数据结构如下：

> 账单包含收据和数组。收据包含一个receiptItems 数组。ReceiptItems 包含一个名为 itemName 的字符串。

我将在一个视图控制器中创建的 Receipt 类型的自定义对象传递给另一个视图控制器。我是通过自定义的 init 方法这样做的。代码如下：

```
- (id)initWithReceipt:(Receipt *)currentReceipt
{
    self = [super initWithNibName:@"SplitCheckViewController" bundle:nil];
    if (self) {
        ReceiptItem *temp1 = (ReceiptItem *)[currentReceipt.receiptItemsArray objectAtIndex:0];
        NSLog(temp1.itemName);
        currentBill.originalReceipt = currentReceipt;
        ReceiptItem *temp2 = (ReceiptItem *)[self.currentBill.originalReceipt.receiptItemsArray objectAtIndex:0];
        NSLog(temp2.itemName);
    }
    return self;
} 
```

currentReceipt 正在通过并包含每个第一个 NSLog 输出的适当数据。但是，一旦我尝试将此对象分配给此视图控制器（currentBill.originalReceipt）中的属性，我会得到第二个 NSLog 的空白输出。我确定这是基本的东西，但我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:34:23.153

您是否忘记分配 currentBill。尝试在第一个 NSLog 之后打印 currentBill。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:37:29.760

从您的标题中，您希望将对象从第一个视图控制器传递到第二个视图控制器。有很多方法可以做到这一点。

1.  在第一个视图控制器中使用单例类设置值并在第二个视图控制器中检索该值。
2.  使用钥匙串、sqllite、核心数据、plist 或任何您可以存储的方式存储值。
3.  最常用的是初始化第二个视图控制器，给第二个视图控制器的属性赋值，然后显示第二个视图控制器

    *   如果想在第一个视图控制器中从第二个视图控制器获取值，那么通常使用的是委托。

我相信还有其他方法可以做到这一点。

# hadoop - 使用 hbase-0.94.2 配置 hadoop-2.0.2-alpha

> ID：14230867
> 
> 赞同：0
> 
> 时间：2013-01-09T08:16:40.880
> 
> 标签：hadoop, hbase

> 如果我尝试启动 hbase，hmaster 没有运行并且低于错误。从谷歌我试过这是因为类路径不匹配所以我将 hadoop jar 复制到 hbase/lib 中，但我仍然遇到错误。

```
FATAL master.HMaster: Unhandled exception. Starting shutdown.
org.apache.hadoop.ipc.RemoteException: Server IPC version 7 cannot communicate with client version 4
    at org.apache.hadoop.ipc.Client.call(Client.java:1070)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at $Proxy10.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:396)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:379)
    at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:119)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:238)
    at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:203)
    at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)
    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1386)
    at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:66)
    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1404)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:254)
    at org.apache.hadoop.fs.Path.getFileSystem(Path.java:187)
    at org.apache.hadoop.hbase.util.FSUtils.getRootDir(FSUtils.java:561)
    at org.apache.hadoop.hbase.master.MasterFileSystem.<init>(MasterFileSystem.java:94)
    at org.apache.hadoop.hbase.master.HMaster.finishInitialization(HMaster.java:482)
    at org.apache.hadoop.hbase.master.HMaster.run(HMaster.java:344)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:34:32.527

如果是 Classpath 错误，请尝试将`$HBASE_HOME/conf/`和添加`$HBASE_HOME/lib/`到您的`$HADOOP_CLASSPATH`. 后者可以设置在`$HADOOP_HOME/conf/hadoop-env.sh`. 对我来说，它就是这样工作的。

# c++ - OpenGL：没有绘制

> ID：14230875
> 
> 赞同：0
> 
> 时间：2013-01-09T08:17:02.250
> 
> 标签：c++, opengl, sdl, codeblocks, microsoft-glee

显卡：**AMD Radeon HD 7900 系列**

运行：**Windows 7（64 位）**

程序：**代码块（32 位）**

OpenGL 库：**GLee**

*这是我设置窗口的地方。它是一个使用 OpenGL 渲染的 SDL 窗口。*

```
void Init(int w, int h, bool fullScr)
{
    if ( SDL_Init(SDL_INIT_VIDEO) != 0 ) {
    printf("Unable to initialize SDL: %s\n", SDL_GetError());
    }
    winW = w*scale;
    winH = h*scale;
    original_winW = w;
    origianl_winH = h;

    putenv("SDL_VIDEO_WINDOW_POS");
    putenv("SDL_VIDEO_CENTERED=1");

    getenv("SDL_VIDEO_WINDOW_POS");
    getenv("SDL_VIDEO_CENTERED");

    SDL_GL_SetAttribute( SDL_GL_DOUBLEBUFFER, 1 ); // *new*
    SDL_GL_SetAttribute( SDL_GL_SWAP_CONTROL, 0 ); // *new*

    //Sets up the screen and displays the window
    screen = SDL_SetVideoMode( winW, winH, 32, SDL_OPENGL | (fullScr*SDL_FULLSCREEN)  ); // *changed*
    screenRect.x = 0;
    screenRect.y = 0;
    screenRect.w = winW;
    screenRect.h = winH;

    SDL_ShowCursor(false);

    SetGLState();
} 
```

*这就是上面提到的 SetGLState()。*

```
void SetGLState(){
    glEnable( GL_TEXTURE_2D ); //Enable 2d texturing

    glClearColor( 0.0f, 0.0f, 0.0f, 0.0f ); //Set clear color (rgba)

    glViewport( 0, 0, winW, winH ); //Set the viewport

    glClear( GL_COLOR_BUFFER_BIT ); //Clear back buffer?

    glMatrixMode( GL_PROJECTION ); //Set to projection
    glLoadIdentity();

    glOrtho(0.0f, winW, winH, 0.0f, -1.0f, 1.0f); //Create orthogonal projection matrix

    glMatrixMode( GL_MODELVIEW ); //Set back to model view
    glLoadIdentity();

    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
} 
```

*这是将图像绘制到屏幕上的地方*

```
void DrawImage(GLSurface image, float x, float y)
{
    // Bind the texture to which subsequent calls refer to
    if(boundTexture != image.Surface){glBindTexture( GL_TEXTURE_2D, image.Surface ); boundTexture = image.Surface; }

    glReadPixels(x,y,image.w*2,image.h*2,GL_UNSIGNED_BYTE,NULL,NULL);

    glLoadIdentity();
    glScalef(scale,scale,1);

    glRotatef(image.rotation[0], 1.0f, 0.0f, 0.0f);
    glRotatef(image.rotation[1], 0.0f, 1.0f, 0.0f);
    glRotatef(image.rotation[2], 0.0f, 0.0f, 1.0f);

    if(scale == 7.5)x += 48;

    glBegin( GL_QUADS );
        //Bottom-left vertex (corner)
        glColor3b(127,127,127);
        glTexCoord2i( 0, 0 ); //Position on texture to begin interpolation
        glVertex3f( x, y, 0.f ); //Vertex Coords

        //Bottom-right vertex (corner)
        glTexCoord2i( 1, 0 );
        glVertex3f( x+image.w, y, 0.f );

        //Top-right vertex (corner)
        glTexCoord2i( 1, 1 );
        glVertex3f( x+image.w, y+image.h, 0.f );

        //Top-left vertex (corner)
        glTexCoord2i( 0, 1 );
        glVertex3f( x, y+image.h, 0.f );
    glEnd();
} 
```

这个窗口没有绘制任何东西，我不知道为什么。我有一段时间没有看这段代码了，但我知道在以前安装的 Windows 中，我让它工作了。我所有的其他项目都在运行，但这个没有。它只是呈现一个空白屏幕。奇怪的是——我有这个窗口的调整大小功能。当调用该函数时，屏幕会显示*白屏*而不是黑屏。

编辑** *一旦所有内容都绘制到屏幕上，此代码将在最后调用。它已经包含在我的代码中。*

```
void Flip(){
    SDL_GL_SwapBuffers();
    glClear( GL_COLOR_BUFFER_BIT );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:03:15.053

SetGLState 中设置的所有状态都是绘制状态。从 DrawImage 函数调用它。最重要的是，glClear*必须*放在 draw 函数中，在其他任何地方都没有意义。

那个呼唤`glReadPixels`毫无意义。

完成后必须交换缓冲区`SDL_SwapBuffers`（IIRC，有一段时间没有使用 SDL）。

# php - Codeigniter Post 不断增加

> ID：14230877
> 
> 赞同：0
> 
> 时间：2013-01-09T08:17:12.563
> 
> 标签：php, codeigniter

想不出一个更好的标题来回答这个问题。无论如何，这是问题所在。

我有一个简单的联系表格。如果用户进入该页面并输入错误信息（没有电子邮件或消息），那么一切似乎都正常。我收到验证错误。但是，如果他们连续 6 次输入错误信息，则单击浏览器的“返回”按钮。他们不会转到上一页。他们必须点击 6 或 7 次才能返回上一页。难道我做错了什么？

```
class Contact extends CI_Controller {

    function index()
    {

        $data['title'] = "Contact Us";
        $data['main'] = 'contact';
        $this->form_validation->set_rules('email', 'Email', 'required|valid_email');
        $this->form_validation->set_rules('message','Message','required');

        if ($this->form_validation->run() == FALSE)
        {
            $this->load->vars($data);
            $this->load->view('template');
        }
        else
        {
             $contactdata['username'] = $this->input->post('email');
             $contactdata['title'] = "Contact Success";
             $contactdata['main'] = 'contactsuccess';
             $this->load->vars($contactdata);
             $this->load->view('template');
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:25:31.547

您可以检查请求是否来自发布请求

```
class Contact extends CI_Controller {

    function index()
    {

        $data['title'] = "Contact Us";
        $data['main'] = 'contact';

        if($this->input->post()){

               $this->form_validation->set_rules('email', 'Email', 'required|valid_email');
               $this->form_validation->set_rules('message','Message','required');

              if ($this->form_validation->run() == FALSE)
              {
                  $this->load->vars($data);

              }
              else
              {
                 $contactdata['username'] = $this->input->post('email');
                 $contactdata['title'] = "Contact Success";
                 $contactdata['main'] = 'contactsuccess';
                 $this->load->vars($contactdata);
             }
        }
        else{
                 $this->load->vars($data);
        }

        $this->load->view('template');

  } 
```

# ios - NSDictionary 被视为布尔值 - 无法调试

> ID：14230881
> 
> 赞同：1
> 
> 时间：2013-01-09T08:17:22.210
> 
> 标签：ios, objective-c, xcode, debugging

```
NSDictionary *tokenData = [[responseDict objectForKey:@"data"] objectForKey:@"multipass"];
dispatch_async(dispatch_get_main_queue(), ^{
    NSString *card = [NSString stringWithFormat:@"%@-%@",
        [[UserAccount sharedInstance] cardNumber],
        [tokenData objectForKey:@"CardPhoneToken"]]; //<-- problem
}); 
```

从昨天开始，我一直在与这行代码作斗争。我从服务器获取 JSON 提要，我的问题是，十分之一的`tokenData`返回是用`0`而不是 a `Dictionary`，我不知道为什么。当它返回时，`0`它也被编译器视为布尔值（也不知道为什么），我得到了错误`-[NSCFBoolean objectForKey:]: unrecognized selector sent to instance 0x81aa20`

我试过做这样 的事情`if(!tokenData) { NSLog(@"This is going to crash"); }`但是当`tokenData`返回`0`时`if`没有被调用。

esponseDict JSON 我得到： `{ code = 200; data = { multipass = { CardPhoneBarcodeToken = 562431; CardPhoneToken = 23221; errorMessage = ""; operationResult = 0; }; }; }`

这是它在崩溃之前的样子：`{ code = 200; data = { multipass = 0; }; }`

**更新：**我已经设法采取行动，如果`tokenData`不是`NSDictionary`现在我正面临该`else`部分的另一个问题。如果 tokenData 不是，我该如何重新加载`NSDictionary`？我尝试调用 *tokenData = [[responseDict objectForKey:@"data"] objectForKey:@"multipass"]; 在 else 里面，但我不断得到 tokenData = 0 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T08:30:58.003

我会在解析它之前检查它是否`tokenData`是 a 。`NSDictionary`

```
-(void)loadData
{
    NSDictionary *tokenData = [[responseDict objectForKey:@"data"] objectForKey:@"multipass"];
    dispatch_async(dispatch_get_main_queue(), ^{
        NSString *cardPhoneToken = @"";
        if( [tokenData isKindOfClass:[NSDictionary class]] ){
            retryCount = 0;
            cardPhoneToken = [tokenData objectForKey:@"CardPhoneToken"];
        } else {
            NSLog(@"failed to load data, retrying...");
            retryCount++;
            if( retryCount < 5 ){
                [self loadData];
                return;
            } else {
                NSLog(@"failed after 5 retries");
            }

        }
        NSString *card = [NSString stringWithFormat:@"%@-%@",
                          [[UserAccount sharedInstance] cardNumber],
                          cardPhoneToken];

    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T08:34:00.410

听起来很熟悉。:)

将块更改为：

```
^{
    NSString *card;
    if ([tokenData isKindOfClass [NSDictionary class]) {

      card = [NSString stringWithFormat:@"%@-%@",
          [[UserAccount sharedInstance] cardNumber],
          [tokenData objectForKey:@"CardPhoneToken"]]; // <<-- No Problem anymore
     } else {
       // deal with the situation. Probably do: 
      card = [NSString stringWithFormat:"%@-no phone number given", [UserAccount sharedInstance] cardNumber]];
} 
```

选择：

```
^{
    id cardPhoneToken;
    if ([tokenData]) {
       cardPhoneToken = [tokenData objectForKey:@"CardPhoneToken"];
    } else {
       cardPhoneToken = @"no Phone Token"; // Or what ever you think is appropriate
    }
    NSString *card = [NSString stringWithFormat:@"%@-%@",
        [[UserAccount sharedInstance] cardNumber],
        cardPhoneToken]; // <<-- No Problem anymore

} 
```

# magento - Magento 1.7 - 过滤网格中时间戳列的日期部分

> ID：14230882
> 
> 赞同：4
> 
> 时间：2013-01-09T08:17:23.330
> 
> 标签：magento, magento-1.7

我在网格中有以下列：

```
 $this->addColumn('order_date',
        array(
            'header'=> $this->__('Date'),
            'align' =>'left',
            'width' => '100px',
            'index' => 'order_date',
            'type' => 'date',
            'filter_index' => 'orders_alias.created_at'
        )
    ); 
```

示例数据如下所示：http: [//imageshack.us/photo/my-images/502/scr028.jpg/](http://imageshack.us/photo/my-images/502/scr028.jpg/)

按日期过滤时，`13 Oct 2012`未找到任何行。这是有道理的，因为它是一个时间戳列。[http://imageshack.us/photo/my-images/29/scr029.jpg/](http://imageshack.us/photo/my-images/29/scr029.jpg/)

如何使用 Magento 日期从/到选择器并选择`13/10/2012`并显示具有此日期的所有行而不考虑时间部分？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T16:00:50.220

这是一个错误，仅当您尝试将值显示为日期并且数据库列是日期时间或时间戳时才会出现。

发生这种情况是因为日期更改为 YYYY-MM-DD HH:MM:SS 和 HH:MM:SS 是 00:00:00 的日期从和到。日期应设置为 23:59:59。

一种方法是更改​​ app/code/core/Mage/Adminhtml/Block/Widget/Grid/Column/Filter/Date.php 中的代码以支持此功能。在 setValue 函数中只需更改

**编辑：**第一个解决方案还需要更改 Datetime.php getValue（删除添加一天并删除一秒的代码），并且因为您不应该更改核心代码，所以第二个解决方案肯定是首选。

```
$value['to'] = $this->_convertDate($value['to'], $value['locale']); 
```

到

```
$value['to'] = $this->_convertDate($value['to'], $value['locale'])->addDay(1)->subSecond(1); 
```

由于这会更改所有过滤器的功能，因此更好的解决方案是更改本地代码：

```
$this->addColumn('order_date',
    array(
        'header'=> $this->__('Date'),
        'align' =>'left',
        'width' => '100px',
        'index' => 'order_date',
        'type' => 'datetime',
        'filter_index' => 'orders_alias.created_at',
        'frame_callback' => array( $this,'styleDate' )
    )
// ...

public function styleDate( $value,$row,$column,$isExport )
{
  $locale = Mage::app()->getLocale();
  $date = $locale->date( $value, $locale->getDateFormat(), $locale->getLocaleCode(), false )->toString( $locale->getDateFormat() ) ;
  return $date;
} 
```

这将删除网格字段中显示的时间部分，但允许您按照上述方式使用过滤器。

# c++ - 安全使用临时文件

> ID：14230886
> 
> 赞同：6
> 
> 时间：2013-01-09T08:17:31.663
> 
> 标签：c++, windows, winapi, temporary-files

我在我的程序中使用了一个静态库，它只能将文件名作为输入，而不是实际的文件内容。对于库的源代码，我无能为力。所以我想：创建一个全新的文件，将要处理的数据存储到其中，将其刷新到磁盘上（？），将其名称传递给库，然后将其删除。

但我也希望这个过程相当安全：
1）*必须*重新创建文件，没有任何虚假数据（也许它并不重要，但无论如何）；
2）除我的进程之外的任何人都*不能*读取或写入该文件（我希望库处理*我的*实际数据，而不是一些聪明人设法插入的虚假数据）；
3）在我完成这个文件之后，它*必须*被删除（好吧，如果有人`TerminateProcess()`我，我想没有什么可以做的，但仍然）。

该库似乎使用非 Unicode`fopen()`来打开给定的文件，所以我不太确定如何处理所有这些，因为该程序旨在在 Windows 上运行。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T09:40:45.723

您已经有很多建议，但我认为没有提到的另一个选项是使用命名管道。它将取决于所讨论的库是否有效，但它可能值得一试。您可以使用该函数在应用程序中创建命名管道，并将`CreateNamedPipe`管道名称传递给库以进行操作（您将传递的文件名是**\\.\pipe\PipeName**）。库是否接受这样的文件名是您必须尝试的，但如果它有效，则优势是您的文件永远不必实际写入磁盘。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:55:37.530

[这篇文章](https://wiki.sei.cmu.edu/confluence/display/c/FIO21-C.+Do+not+create+temporary+files+in+shared+directories)应该给你一些关于这个问题的很好的指导。

事情的要旨是这样的：

*   POSIX [mkstemp()](http://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CC4QFjAA&url=http://pubs.opengroup.org/onlinepubs/009695399/functions/mkstemp.html&ei=cDDtUPH-H_CY0QWl4oHgDw&usg=AFQjCNEAPlbY_vFzH8yvG4VUKTwFJn0GGA&bvm=bv.1357316858,d.d2k)函数是可用的安全且首选的解决方案。不幸的是，它在 Windows 中不可用，因此您需要找到一个使用 Windows API 调用正确实现此功能的包装器。
*   在 Windows 上，[tmpfile_s()](http://msdn.microsoft.com/en-us/library/b3dz6009.aspx)函数是唯一真正以原子方式打开临时文件的函数（而不是简单地生成文件名），从而保护您免受竞争条件的影响。不幸的是，此功能不允许您指定将在哪个目录中创建文件，这是一个潜在的安全问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T08:44:51.203

这可以使用[`CreateFile`](http://msdn.microsoft.com/en-us/library/aa363858%28v=vs.85%29.aspx)and[`GetTempFileName`](http://msdn.microsoft.com/en-us/library/aa364991%28v=vs.85%29.aspx)函数来实现（如果您不知道是否可以写入当前工作目录，您可能还想使用 , [`GetTempPath`](http://msdn.microsoft.com/en-us/library/aa364992%28v=vs.85%29.aspx)）。

1.  确定一个目录来存储你的临时文件；当前目录（“。”）或结果[`GetTempPath`](http://msdn.microsoft.com/en-us/library/aa364992%28v=vs.85%29.aspx)将是很好的候选者。
2.  用于[`GetTempFileName`](http://msdn.microsoft.com/en-us/library/aa364991%28v=vs.85%29.aspx)创建临时文件名。
3.  最后，调用[`CreateFile`](http://msdn.microsoft.com/en-us/library/aa363858%28v=vs.85%29.aspx)创建临时文件。

对于最后一步，有几点需要考虑：

*   的`dwFlagsAndAttributes`参数`CreateFile`大概应该包括`FILE_ATTRIBUTE_TEMPORARY`.
*   该`dwFlagsAndAttributes`参数可能还应该包括`FILE_FLAG_DELETE_ON_CLOSE`以确保无论如何都删除文件（如果您的进程崩溃，这可能也有效，在这种情况下，系统会为您关闭所有句柄）。
*   的`dwShareMode`参数`CreateFile`可能应该是`FILE_SHARE_READ`这样其他尝试打开文件将成功，但*仅用于读取*. 这意味着您的库代码将能够读取该文件，但没有人能够写入它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T09:03:48.563

虽然给出的建议很好，例如使用 FILE_SHARE_READ、FILE_DELETE_ON_CLOSE 等，但我认为没有完全安全的方法可以做到这一点。

我使用 Process Explorer 关闭了旨在阻止第二个进程启动的文件 - 我这样做是因为第一个进程被卡住并且“不可杀死且未死，但没有响应”，所以我有正当理由这样做- 由于系统上正在运行其他进程，我不想在该特定点重新启动机器。

如果有人使用某种调试器[包括非商业的，专门为此目的编写的]，附加到您正在运行的进程，设置断点并停止代码，然后关闭您打开的文件，它可以写入文件你刚刚创建。

您可以让它变得更难，但您无法阻止具有足够特权/技能/能力的人拦截您的程序并操纵数据。

请注意，文件/文件夹保护仅在您可靠地知道用户在计算机上没有特权帐户时才有效 - 典型的 Windows 用户要么立即成为管理员，要么拥有另一个用于管理目的的帐户 - 我有权访问 sudo/root我在工作中使用的几乎所有 Linux 机器——有些文件服务器我没有 [也不应该] 具有 root 访问权限。但是我自己使用的所有盒子或可以借用的测试目的，我都可以进入根环境。这不是很不寻常。

我能想到的一个解决方案是找到一个使用不同接口的不同库[或获取库的源并对其进行修改以使其]。并不是说这可以防止使用上述调试器方法的“停止、修改和继续”攻击。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T08:33:03.150

首先，您可以在用户的​​临时文件夹（例如 C:\Users\\AppData\Local\Temp）中创建文件 - 这是存放此类文件的理想场所。其次，在[创建文件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx)时，您可以指定，您提供什么样的访问共享。

MSDN 上 CreateFile 帮助页面的片段：

> *dwShareMode*
> 
> *   **0**阻止其他进程在请求删除、读取或写入访问权限时打开文件或设备。
> *   **FILE_SHARE_DELETE**启用对文件或设备的后续打开操作以请求删除访问权限。否则，如果其他进程请求删除访问权限，它们将无法打开文件或设备。如果未指定此标志，但已打开文件或设备以进行删除访问，则函数失败。注意：删除访问允许删除和重命名操作。
> *   **FILE_SHARE_READ**启用对文件或设备的后续打开操作以请求读取访问权限。否则，如果其他进程请求读取访问权限，它们将无法打开文件或设备。如果未指定此标志，但已打开文件或设备以进行读取访问，则函数失败。
> *   **FILE_SHARE_WRITE**启用对文件或设备的后续打开操作以请求写入访问权限。否则，如果其他进程请求写访问权限，它们将无法打开文件或设备。如果未指定此标志，但已打开文件或设备以进行写访问或具有具有写访问权限的文件映射，则该函数将失败。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-09T08:23:21.030

使用 CreateFile API 在可执行文件的文件夹中创建文件，您可以在每次创建文件时给文件名一些 UUID，这样其他进程就无法猜测文件名来打开它。并将其属性设置为隐藏。用完之后把文件删了就行了？

# mysql - 使用带和不带外键的参考之间的区别？

> ID：14230892
> 
> 赞同：18
> 
> 时间：2013-01-09T08:17:58.667
> 
> 标签：mysql, sql, database, relational-database

基本上我想知道使用带或不带外键的 REFERENCES 之间的区别。

我有这两个例子：

```
CREATE TABLE Employee 
(
     id        INT,
     name      VARCHAR(50),
     birthYear INT,
     boss      INT REFERENCES Employees(id),
     worksAt   INT NOT NULL REFERENCES Department(id) ON DELETE CASCADE,
     PRIMARY KEY (id,worksAt)
); 
```

示例 2：

```
CREATE TABLE Department 
(
      id                INT PRIMARY KEY,
      name              VARCHAR(50),
      numberOfEmployees INT,
      location          INT NOT NULL,
      country           INT NOT NULL,
      manager           INT,
      FOREIGN KEY (location,country) REFERENCES Location(locId,countryId),
      UNIQUE KEY (manager)
); 
```

我在这里要问的是为什么第二个示例使用 FOREIGN KEY 关键字，而第一个示例仅使用 REFERENCES。

另外，第一个似乎引用了自己（我认为员工中的 s 是一个错误）如果是这样，如果它引用自己，为什么还要使用 REFERENCES 呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-09T08:21:16.773

恭喜！您偶然发现了 MySQL 的一个奇怪的怪癖。第一种语法完全没有任何作用。它*默默地*，是的，*默默地*忽略。

> 此外，InnoDB 不识别或支持“内联 REFERENCES 规范”（如 SQL 标准中所定义），其中引用被定义为列规范的一部分。InnoDB 仅在指定为单独的 FOREIGN KEY 规范的一部分时才接受 REFERENCES 子句。对于其他存储引擎，MySQL Server 解析并忽略外键规范。

[`create table`](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)它在文档的一半以下。

# jquery - 绑定knockoutjs时jquery更改触发

> ID：14230897
> 
> 赞同：0
> 
> 时间：2013-01-09T08:18:05.993
> 
> 标签：jquery, knockout.js

如果我有我的模型

```
function SearchModel() {
        this.SearchCriteria = "";        
    } 
```

在我的代码中有：

```
model.SearchCriteria = data;

ko.applyBindings(model); 
```

然后在我的html中：

```
 <select id="vehiclesMake" data-bind="options: SearchCriteria.Tool.VehicleMakes, optionsText: 'Description', value: SearchCriteria.Tool.SelectedModel, optionsCaption: 'Choose...'"></select> 
```

所有这些都工作正常。我的下拉列表按预期填充。

现在我遇到的问题是当我添加时：

```
$('#vehiclesMake').change(function () {            
      loadSearchTool();                            
  }); 
```

loadSearchTool() 在哪里做：

```
loadSearchTool = function () {
        var postCode = $('#postcode').val();
        var distance = $('#distance').val();
        var make = $('#vehiclesMake').val();
        var makemodel = $('#makemodel').val();
        var minPrice = $('#minPrice').val();
        var maxPrice = $('#maxPrice').val();

        data.getQuickSearch(postCode, distance, make, makemodel, minPrice, maxPrice, function (data) {
            //our success function                
            console.log(data.Result);           
            if (data.Result == 'Fail') {
                console.log('Fail');//TO DO
            }
            else {
                model.SearchCriteria = data;

                ko.applyBindings(model);
            }

        }, function () {            
            console.log('error');//TO DO
        });
    }; 
```

使用上面的所有代码，当 loadsearchtool（也称为 pageload）绑定到下拉列表时，.change() 代码正在触发，我最终陷入无限循环。

我怎样才能解决这个问题？这是我对 knockoutjs 的第一次破解，所以对它有点新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:13:27.520

你只需要搬到`ko.applyBindings(model);`外面去`loadSearchTool()`。ko.applyBindings 应该只被调用一次（`$(document).ready()`例如）。

您可能还想将 SearchCriteria 更改为 observable：

```
this.SearchCriteria = ko.observable(""); 
```

要更新数据，请使用：

```
model.SearchCriteria(data); 
```

# preg-match-all - 提取电子邮件表单 .msg 文件

> ID：14230901
> 
> 赞同：1
> 
> 时间：2013-01-09T08:18:10.307
> 
> 标签：preg-match-all

我正在使用 mailparse_msg_parse_file 打开一个 msg 文件，我正在尝试提取发送到电子邮件。

用于发送电子邮件的 msg 文件具有以下模式：

```
To: "email_address" <email_address> 
```

我尝试使用 preg_match_all 宽度经典电子邮件模式来获取它，但它不起作用

我使用的模式是：

```
$pattern="/[\._a-zA-Z0-9-]+@[\._a-zA-Z0-9-]+.[a-zA-Z]{2,3}/i"; 
```

我收到了所有其他电子邮件，但没有收到“”或 <> 内的邮件

我也尝试在 <> 中获取任何内容，但我也得到了 html 标签，所以它并不是很有帮助。

# jsf-2 - ClassNotFoundException：尝试将 MyFaces 2.1.10 与 IBM WebSphere 7.0 一起使用时出现 ClassUtils

> ID：14230905
> 
> 赞同：1
> 
> 时间：2013-01-09T08:18:42.880
> 
> 标签：jsf-2, websphere, upgrade, myfaces

由于 p:messages 的**PrimeFaces**错误，我尝试将与**IBM WebSphere 7.0一起使用的****MyFaces**版本从 2.0.7 升级到 2.1.10。

 **不幸的是，我从 myFaces 页面下载的 myfaces-impl jar 不包含`org/apache/myfaces/shared_impl/util/`项目中已经存在的 2.0.7 版包中的许多实用程序类。

整个堆栈跟踪是：

```
java.lang.NoClassDefFoundError: org/apache/myfaces/shared_impl/util/ClassUtils
    at com.ibm.ws.jsf.config.annotation.WebSphere20LifecycleProviderFactory.getLifecycleProvider(WebSphere20LifecycleProviderFactory.java:34)
    at org.apache.myfaces.config.FacesConfigurator.configureManagedBeanDestroyer(FacesConfigurator.java:1048)
    at org.apache.myfaces.config.FacesConfigurator.configure(FacesConfigurator.java:431)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.buildConfiguration(AbstractFacesInitializer.java:370)
    at org.apache.myfaces.webapp.Jsp21FacesInitializer.initContainerIntegration(Jsp21FacesInitializer.java:73)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces(AbstractFacesInitializer.java:143)
    at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:119)
    at com.ibm.ws.webcontainer.webapp.WebApp.notifyServletContextCreated(WebApp.java:1708)
    at com.ibm.ws.webcontainer.webapp.WebApp.commonInitializationFinish(WebApp.java:381)
    at com.ibm.ws.webcontainer.webapp.WebAppImpl.initialize(WebAppImpl.java:299)
    at com.ibm.ws.webcontainer.webapp.WebGroupImpl.addWebApplication(WebGroupImpl.java:100)
    at com.ibm.ws.webcontainer.VirtualHostImpl.addWebApplication(VirtualHostImpl.java:166)
    at com.ibm.ws.webcontainer.WSWebContainer.addWebApp(WSWebContainer.java:732)
    at com.ibm.ws.webcontainer.WSWebContainer.addWebApplication(WSWebContainer.java:617)
    at com.ibm.ws.webcontainer.component.WebContainerImpl.install(WebContainerImpl.java:376)
    at com.ibm.ws.webcontainer.component.WebContainerImpl.start(WebContainerImpl.java:668)
    at com.ibm.ws.runtime.component.ApplicationMgrImpl.start(ApplicationMgrImpl.java:1127)
    at com.ibm.ws.runtime.component.DeployedApplicationImpl.fireDeployedObjectStart(DeployedApplicationImpl.java:1319)
    at com.ibm.ws.runtime.component.DeployedModuleImpl.start(DeployedModuleImpl.java:610)
    at com.ibm.ws.runtime.component.DeployedApplicationImpl.start(DeployedApplicationImpl.java:944)
    at com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplication(ApplicationMgrImpl.java:740)
    at com.ibm.ws.runtime.component.ApplicationMgrImpl$1.run(ApplicationMgrImpl.java:1272)
    at com.ibm.ws.security.auth.ContextManagerImpl.runAs(ContextManagerImpl.java:5343)
    at com.ibm.ws.security.auth.ContextManagerImpl.runAsSystem(ContextManagerImpl.java:5431)
    at com.ibm.ws.security.core.SecurityContext.runAsSystem(SecurityContext.java:255)
    at com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplicationDynamically(ApplicationMgrImpl.java:1277)
    at com.ibm.ws.runtime.component.ApplicationMgrImpl.start(ApplicationMgrImpl.java:2048)
    at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.start(CompositionUnitMgrImpl.java:385)
    at com.ibm.ws.runtime.component.CompositionUnitImpl.start(CompositionUnitImpl.java:123)
    at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.start(CompositionUnitMgrImpl.java:328)
    at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.startCompositionUnit(CompositionUnitMgrImpl.java:599)
    at com.ibm.ws.runtime.component.CompositionUnitMgrImpl.startCompositionUnit(CompositionUnitMgrImpl.java:561)
    at com.ibm.ws.runtime.component.ApplicationMgrImpl.startApplication(ApplicationMgrImpl.java:1184)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:256)
    at javax.management.modelmbean.RequiredModelMBean.invokeMethod(RequiredModelMBean.java:1085)
    at javax.management.modelmbean.RequiredModelMBean.invoke(RequiredModelMBean.java:966)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:848)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:773)
    at com.ibm.ws.management.AdminServiceImpl$1.run(AdminServiceImpl.java:1331)
    at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)
    at com.ibm.ws.management.AdminServiceImpl.invoke(AdminServiceImpl.java:1224)
    at com.ibm.ws.management.application.sync.StartDeploymentTask.startDeployment(StartDeploymentTask.java:236)
    at com.ibm.ws.management.application.sync.StartDeploymentTask.fullAppUpdate(StartDeploymentTask.java:113)
    at com.ibm.ws.management.application.sync.StartDeploymentTask.performTask(StartDeploymentTask.java:101)
    at com.ibm.ws.management.application.sync.AppBinaryProcessor$ExpandApp.expand(AppBinaryProcessor.java:1682)
    at com.ibm.ws.management.application.sync.AppBinaryProcessor.postProcessSynchronousExt(AppBinaryProcessor.java:723)
    at com.ibm.ws.management.bla.sync.BLABinaryProcessor.postProcess(BLABinaryProcessor.java:575)
    at com.ibm.ws.management.bla.sync.BLABinaryProcessor.onChangeCompletion(BLABinaryProcessor.java:452)
    at com.ibm.ws.management.repository.FileRepository.postNotify(FileRepository.java:1915)
    at com.ibm.ws.management.repository.FileRepository.update(FileRepository.java:1424)
    at com.ibm.ws.management.repository.client.LocalConfigRepositoryClient.update(LocalConfigRepositoryClient.java:189)
    at com.ibm.ws.sm.workspace.impl.WorkSpaceMasterRepositoryAdapter.update(WorkSpaceMasterRepositoryAdapter.java:665)
    at com.ibm.ws.sm.workspace.impl.RepositoryContextImpl.update(RepositoryContextImpl.java:1954)
    at com.ibm.ws.sm.workspace.impl.RepositoryContextImpl.synch(RepositoryContextImpl.java:1902)
    at com.ibm.ws.sm.workspace.impl.WorkSpaceImpl.synch(WorkSpaceImpl.java:511)
    at com.ibm.ws.management.configservice.ConfigServiceImpl.save(ConfigServiceImpl.java:702)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:256)
    at javax.management.modelmbean.RequiredModelMBean.invokeMethod(RequiredModelMBean.java:1085)
    at javax.management.modelmbean.RequiredModelMBean.invoke(RequiredModelMBean.java:966)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:848)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:773)
    at com.ibm.ws.management.AdminServiceImpl$1.run(AdminServiceImpl.java:1331)
    at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)
    at com.ibm.ws.management.AdminServiceImpl.invoke(AdminServiceImpl.java:1224)
    at com.ibm.ws.management.connector.AdminServiceDelegator.invoke(AdminServiceDelegator.java:181)
    at com.ibm.ws.management.connector.ipc.CallRouter.route(CallRouter.java:242)
    at com.ibm.ws.management.connector.ipc.IPCConnectorInboundLink.doWork(IPCConnectorInboundLink.java:353)
    at com.ibm.ws.management.connector.ipc.IPCConnectorInboundLink$IPCConnectorReadCallback.complete(IPCConnectorInboundLink.java:595)
    at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1784)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

服务器上配置的共享库中使用的库：

```
C:\WebsphereSharedLibs\MyFaces_2.1.10\de.datev.myfaces_2.1.10.jar
C:\WebsphereSharedLibs\MyFaces_2.1.10\myfaces-api-2.1.10.jar
C:\WebsphereSharedLibs\MyFaces_2.1.10\myfaces-impl-2.1.10.jar
C:\WebsphereSharedLibs\MyFaces_2.1.10\commons-logging-1.1.1.jar
C:\WebsphereSharedLibs\MyFaces_2.1.10\commons-digester-1.8.jar
C:\WebsphereSharedLibs\MyFaces_2.1.10\commons-collections-3.2.jar
C:\WebsphereSharedLibs\MyFaces_2.1.10\commons-codec-1.3.jar
C:\WebsphereSharedLibs\MyFaces_2.1.10\commons-beanutils-1.8.3.jar
C:\IBM\SDP\runtimes\base_v7\optionalLibraries\IBM\JSFProviders\WebSphere-MyFaces20-annotation-provider.jar 
```

那么，问题出在哪里？我自己没有下载 2.0.7 版本，所以也许它必须是特别丰富的版本才能与 WebSphere 一起使用？有没有办法将 MyFaces 2.1.10 与 WebSphere 一起使用，或者我可以只需要 IBM 团队准备的版本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-28T20:21:16.927

请参阅 IBM 的此 APAR： [http](http://www-01.ibm.com/support/docview.wss?uid=swg1PM61211) ://www-01.ibm.com/support/docview.wss?uid=swg1PM61211 ：

> WebSphere Application Server 添加了一个自定义注释提供程序来为 MyFaces 2.0.8+ 提供内置的注入引擎支持。提供程序代码打包在一个名为 WebSphere-MyFaces208-annotation-provider.jar 的新 jar 文件中，该文件位于 /optionalLibraries/IBM/JSFProviders/2.0.8 目录中。
> 
> 此 APAR 的修复当前的目标是包含在修复包 7.0.0.25 中。

So you need to upgrade to at least 7.0.0.25, and you'll be able to use newer 2.0.x versions on MyFaces**

# objective-c - 核心文本 - 垂直对齐（多行）

> ID：14230906
> 
> 赞同：4
> 
> 时间：2013-01-09T08:18:43.537
> 
> 标签：objective-c, cocoa, core-text

在这个[问题](https://stackoverflow.com/questions/3284326/vertical-align-with-core-text)之后，我了解了如何垂直对齐单行文本：

```
CGRect boundingBox = CTFontGetBoundingBox(font);

//Get the position on the y axis
float midHeight = self.frame.size.height / 2;
midHeight -= boundingBox.size.height / 2;

CGPathAddRect(path, NULL, CGRectMake(0, midHeight, self.frame.size.width, boundingBox.size.height)); 
```

但是此代码仅适用于单行上下文。当框架生成多行字符串（带有软或硬换行符）时，该代码不起作用。

# python - 列表中的命名元组

> ID：14230908
> 
> 赞同：7
> 
> 时间：2013-01-09T08:19:00.527
> 
> 标签：python

我有以下列表

```
a = [[a1, b1, c1, [d1, e1, f1],
     [a2, b2, c2, [d2, e2, f2],
     [a3, b3, c3, [d3, e3, f3]] 
```

我怎样才能把它变成一个命名元组的列表，这样

```
a[0].val1
>>> a1
a[1].val2
>>> b2
a[0].box
>>> [d1, e1, f1] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T08:19:27.353

使用[`collections.namedtuple`类工厂](http://docs.python.org/3/library/collections.html#collections.namedtuple)创建命名元组类：

```
mynamedtuple = collections.namedtuple('mynamedtuple', ('val1', 'val2', 'val3', 'box'))

somenamedtuple = mynamedtuple('a1', 'a2', 'a3', ['d1', 'e1', 'f1'])
somenamedtuple.box  # returns ['d1', 'e1', 'f1'] 
```

您可以使用列表推导转换现有列表：

```
a = [mynamedtuple(*el) for el in a] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:27:46.257

集合模块中有[namedtuple](http://docs.python.org/2/library/collections.html#collections.namedtuple)可用。

您可以使用和创建`namedtuple`将由名称而不是元组索引引用的。

# facebook - 如何从 Facebook 获取活动页面，而不仅仅是数据

> ID：14230911
> 
> 赞同：1
> 
> 时间：2013-01-09T08:19:12.643
> 
> 标签：facebook

有没有办法在我的网站上显示 Facebook 事件页面，它应该包含 Facebook 中的所有功能。

使用图形 API 和 SDK，我可以获得内容，但我想要 Facebook 设计的所有按钮（参加，也许等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:53:01.610

您能否对页面进行 curl 请求，然后将检索到的调用输出到您的站点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:31:06.003

您可以使用 Facebook 的内容，但不能尝试制作页面的镜像，这是专有的。

使用内嵌框架 (iframe) 在您自己的网站中*显示*（而不是复制）您想要的页面。 [http://www.w3schools.com/html/html_iframe.asp](http://www.w3schools.com/html/html_iframe.asp)

# c# - Windows CE C# 中的错误日志记录

> ID：14230918
> 
> 赞同：0
> 
> 时间：2013-01-09T08:19:28.470
> 
> 标签：c#, windows-ce

我正在编写一个 Windows CE 应用程序并希望将错误日志记录到 .txt 文件中。

我做了研究，看到了这个例子：

```
public static void Logs(string fileName, string methodName, string message)
    {
        try
        {
            if (!string.IsNullOrEmpty(message))
            {
                using (FileStream file = new FileStream(Application.StartupPath + "\\Log.txt", FileMode.OpenOrCreate, FileAccess.Write))
                {
                    StreamWriter streamWriter = new StreamWriter(file);
                    streamWriter.WriteLine((((System.DateTime.Now + " - ") + fileName + " - ") + methodName + " - ") + message);
                    streamWriter.Close();
                }
            }
        }
        catch
        {
        }
    } 

private void button2_Click(object sender, EventArgs e)
    {
        try
        {
            int a = 10, b = 0;
            int result = a / b; //runtime Exception will throw
        }
        catch (Exception ex)
        {
            Logs(this.GetType().Name, "button1_Click()", ex.Message.ToString());
        }
    } 
```

这有效，但仅在 Windows 窗体中有效。我在 Windows CE 中收到此错误：

```
'System.Windows.Application' does not contain a definition for 'StartupPath' 
```

好的，所以我知道我必须使用这个：

```
Path.GetDirectoryName (Assembly.GetExecutingAssembly ().GetName ().CodeBase); 
```

但我不确定如何。仍在学习，所以请不要将其标记为重复。有人可以向我解释一下在 Windows CE 应用程序中的确切位置以及如何使用它吗？

提前致谢。

![在此处输入图像描述](../Images/d8b7da5a132ad49e92267c4df48e9357.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:33:22.150

您可以编写一个返回执行程序集路径的函数......就像：

```
public static string GetCurrentApplicationPath() 
{
  return System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase);
} 
```

并使用此功能代替`Application.StartupPath`

# android - 设置先前在 XML 文件中确定的视图

> ID：14230919
> 
> 赞同：0
> 
> 时间：2013-01-09T08:19:30.917
> 
> 标签：android, xml, view

我在 XML 文件中声明了一个视图，我想通过代码定义它，但是当我建立它时，什么都没有显示。你能帮助我吗？

这是我的 XML 文件：

[...]

```
<View
        android:id="@+id/marco_container"
        style="@style/wrapFull"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 
```

[...]

我这样定义它：

```
setContentView(R.layout.marco);
View view = (View) findViewById(R.id.marco_container);
view.inflate(getApplicationContext(), R.layout.prueba, null); 
```

我也尝试通过这种方式声明它：

```
view = View.inflate(getApplicationContext(), R.layout.prueba, null); 
```

这是prueba.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView android:text="Prueba" style="@style/wrapContent" 
    android:layout_gravity="center"/>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:03:26.770

这不是视图视图。这是您的自定义视图，只需创建一个扩展 FrameLayout 的自定义视图，并在构造函数内部扩展您的视图。

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER...);
View view = inflater.inflate(getApplicationContext(), R.layout.prueba, this); 
```

并在您的主要 xml 中放置：

```
<com.my.path.CustomView
    android:id="@+id/marco_container"
    style="@style/wrapFull"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

在你的课堂上：

```
setContentView(R.layout.marco);
CustomView view = (CustomView) findViewById(R.id.marco_container); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:43:43.437

你需要这样做：

```
View view2 = view.inflate(this, R.layout.prueba, null);
((ViewGroup)view).addView(view2); 
```

当然`view`必须是某种`ViewGroup`( `RelativeLayout`, `LinearLayout`, 等)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:48:49.760

```
setContentView(R.layout.marco);
LinearLayout li = (LinearLayout) findViewById(R.id.marco_container);
View view = getLayoutInflater().inflate(R.layout.prueba, li, false);
li.addView(view); 
```

# android - Android：长期操作之间的对话

> ID：14230920
> 
> 赞同：1
> 
> 时间：2013-01-09T08:19:35.840
> 
> 标签：android, android-asynctask, android-dialog

我需要一个建议来实施以下情况：

显示两个不需要在`UI Thread`.

显示哪个对话框取决于第一次长时间运行操作的结果，而执行第二次长期运行操作取决于用户在对话框中选择的选项。我已经使用了两个`AsynTask`（如下所示）来完成此操作，但程序流程非常混乱。

有什么建议可以让这更容易吗？

1.  UI 线程调用 AsynTask AT1
2.  AT1 doInBackGround() 执行长时间运行的操作 1
3.  AT2 onPostExecute 显示对话框
4.  UI 线程处理对话框的结果（使用回调方法）并调用 AsynTask AT2
5.  AT2 doInBackGround() 执行长时间运行的操作 2
6.  AT2 onPostExecute 更改 UI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:36:35.650

您可以使用自己的 AsyncTask 在单独的服务中运行每个任务，并让它们将结果发送到 UI 线程上的处理程序。

处理程序应包括决定如何处理输入的逻辑。

通信应该通过消息包或您创建的新 Parcellable 进行。

如果这些操作很长，您应该考虑用户将关闭对话框并全局通知他[来自应用程序或通知栏]

# jquery-plugins - 寻找像 imgBox 这样的 jQuery 图像模态框

> ID：14230922
> 
> 赞同：0
> 
> 时间：2013-01-09T08:19:51.317
> 
> 标签：jquery-plugins, modal-dialog

我正在寻找一个 jQuery 图像模式框插件，它在图像中显示加载图标。

[imgBox](http://www.htmldrive.net/items/show/390/jQuery-Plugin-imgBox-lightbox-image.html)很棒，但它很旧并且有很多错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:26:43.203

花式盒子很好。 [http://fancybox.net/](http://fancybox.net/)

加载图标显示在加载的中心。您很可能在 API 中使用 css 或其他东西，或者使用对象将图标移动到调用图像。

# python - 使用 urllib2 从网站查找和下载图像

> ID：14230925
> 
> 赞同：0
> 
> 时间：2013-01-09T08:19:54.950
> 
> 标签：python, html, python-3.x, image

我正在编写一个给定 http 地址的小程序，它会找到并下载其中的图像。我现在的情况是这样的：

```
import urllib2, html

class HTMLNode(object):
    def __init__(self,tag,attr,content,closed=True):
        self.tag = tag
        self.attr = attr
        self.content = content
        self.closed = closed

    def istext(self):
        return self.tag == '_text_'

    def tostring(self):
        if self.istext(): 
            return self.content
        ret = '<'+self.tag
        for k, v in self.attr.items():
            ret += ' '+k+'="'+v+'"'
        ret += '>'
        if self.closed:
            for c in self.content:
                ret += c.tostring()
            ret += '</'+self.tag+'>'
        return ret

    def find_by_tag(self,tag):
            ret = []
            if self.tag == tag: ret += [self]
            if not self.istext():
                for c in self.content:
                    ret += c.find_by_tag(tag)
            return ret

def imagegrab(url):
    req = urllib2.Request(url)
    response = urllib2.urlopen(req)
    output = open(url, 'wb')
    output.write(response.read()) 
```

缺少的链接正在寻找一种使用 HTMLNode 类的“find_by_tag”功能的方法，以便程序扫描“”标签并从网站下载图片。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:30:20.853

其他人已经为您完成了这项工作。具体来说，看一下[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)，它是 Python 的 HTML 解析库。你会做

```
soup = bs4.BeautifulSoup(...)
for img in soup("img"):
    print img.src 
```

或类似的；显然图书馆比这更强大。

您还可以考虑使用[requests](http://docs.python-requests.org/en/latest/)，它是 urllib 系列库的包装器，具有非常简单的 API。为此你会做

```
soup = bs4.BeautifulSoup(requests.get(url).text) 
```

# java - Java SWT 控件修改不变

> ID：14230927
> 
> 赞同：1
> 
> 时间：2013-01-09T08:20:06.267
> 
> 标签：java, multithreading, user-interface, swt

我正在为聊天制作几个程序：服务器和客户端。

它们都有一个用 SWT 制作的 GUI。服务器总是运行良好。

另一方面，客户端的 GUI 没有。当我连接到服务器时，客户端询问已连接的客户端，服务器用 X 消息回答，每个名称都有一条。我已经检查过服务器确实发送了名称并且客户端接收了它们。

但是，即使我收到了这些消息，有时 GUI 会显示它们，而有时则不会。即使在同一次执行中，一些名称可以放入 GUI 中，而另一些则不能。

我认为这可能是 SWT 的问题，尤其是关于修改 GUI 的方法。

如您所料，我正在使用线程，甚至修改 GUI。因为我想从线程修改 GUI，所以我必须使用方法“Display.asyncExec”，所以每次我对 GUI 进行更改时，我都会执行以下操作：

```
OurDisplay.asyncExec( new Runnable() {

    public void run()
    {

        MyText.append("#The user " + OurName + " has asked us about other clients\n");

    }

}); 
```

我不知道问题出在哪里，因为服务器使用相同但运行良好。

也许我会注意到，在主（服务器和客户端）程序中，我正在使用其他代码，以便在关闭我正在使用的窗口（Shell）之前不完成程序执行：

```
while (!ServerShell.isDisposed())
{
    if (!ourDisplay.readAndDispatch())
        ourDisplay.sleep();
} 
```

任何想法？

谢谢

**- 编辑 -**对评论 nº1 的回答 - （我无法回答评论，我不知道为什么）

我没有。我已经尝试使用“syncExec”方法，以便让我的线程等待 GUI 的修改。然而，这都不起作用。

我不知道如何查看显示队列，我正在寻找它。谢谢你的主意。

我将尝试捕捉 Runnable 可能抛出的异常。我会报道新闻。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:37:39.017

编一些try/catch，你会看到一个典型的问题：在忙的时候试图更新一个GUI。异常被压制，直到你让它撕裂。

我假设您那里有一个 Eclipse RCP 应用程序 - 对吧？请使用 Eclipse 作业处理来更新 GUI (UIJob)。这比那些 asyncExec(Runnable) 调用好几千倍，因为 Eclipse 框架将计算 GUI 更新的时间。

[http://www.vogella.com/articles/EclipseJobs/article.html](http://www.vogella.com/articles/EclipseJobs/article.html)

Lars Vogel 有一个很棒的关于作业处理的教程。

# jsf-2 - 使用值表达式时的 JSF 2 Mojarra 和异常行为异常

> ID：14230929
> 
> 赞同：2
> 
> 时间：2013-01-09T08:20:18.250
> 
> 标签：jsf-2, mojarra

假设一个 facelets 有 10 个输出文本，这些输出文本与值表达式绑定到 bean 中的 10 个不同字段。如果调用第一个getter时出现异常，是否还应该调用后面的9？

因为这是我在测试时看到的行为。它会导致已升级为使用 JSF 2 的遗留模块出现严重问题。

我正在使用 Mojarra 2.1.16 并尝试使用 Mojarra 2.1.6。尝试使用焊接和 JSF2 bean。容器是Tomcat 7。

这种行为可以以某种方式改变吗？我无法想象这是理想的行为。

我用来在下面重现它的代码：

*编辑：这不是生产代码，这只是显示了意外的行为。*

**相关的facelet代码：**

```
<h:inputText value="#{testController.a}"></h:inputText>
<h:inputText value="#{testController.b}"></h:inputText>
<h:inputText value="#{testController.c}"></h:inputText>
<h:inputText value="#{testController.d}"></h:inputText>
<h:inputText value="#{testController.e}"></h:inputText>
<h:inputText value="#{testController.f}"></h:inputText>
<h:inputText value="#{testController.g}"></h:inputText>
<h:inputText value="#{testController.h}"></h:inputText> 
```

**相关bean代码**

```
private String a, b, c ,d, e, f, g, h;

    public String getA() throws Exception {
        throw new Exception();
    }
    public void setA(String a) {
        this.a = a;
    }

    public String getB() {
        System.out.println("b was called");
        return b;
    }

    public void setB(String b) {
        this.b = b;
    }

    public String getC() {
        System.out.println("c was called");
        return c;
    }

    public void setC(String c) {
        this.c = c;
    }

    public String getD() {
        System.out.println("d was called");
        return d;
    }

    public void setD(String d) {
        this.d = d;
    }

    public String getE() {
        System.out.println("e was called");
        return e;
    }

    public void setE(String e) {
        this.e = e;
    }

    public String getF() {
        System.out.println("f was called");
        return f;
    }

    public void setF(String f) {
        this.f = f;
    }

    public String getG() {
        System.out.println("g was called");
        return g;
    }

    public void setG(String g) {
        this.g = g;
    }

    public String getH() {
        System.out.println("h was called");
        return h;
    }

    public void setH(String h) {
        this.h = h;
    } 
```

**带有托管 bean 的 JSF 2.1.6：**

```
2013-jan-09 13:54:41 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files (x86)\Java\jre6\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\CollabNet\Subversion Client;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\System32\WindowsPowerShell\v1.0\;C:\Program Files\ThinkPad\Bluetooth Software\;C:\Program Files\ThinkPad\Bluetooth Software\syswow64;C:\Program Files (x86)\TortoiseSVN\bin;C:\Program Files\TortoiseSVN\bin;C:\Program Files (x86)\cvsnt;C:\Program Files (x86)\cvsnt1;C:\Program Files\SlikSvn\bin\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\Groovy\Groovy-1.8.6\bin;c:\projects\maven\bin;;.
2013-jan-09 13:54:41 org.apache.tomcat.util.digester.SetPropertiesRule begin
VARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:demo' did not find a matching property.
2013-jan-09 13:54:41 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8090"]
2013-jan-09 13:54:41 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8010"]
2013-jan-09 13:54:41 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 706 ms
2013-jan-09 13:54:41 org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
2013-jan-09 13:54:41 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.29
2013-jan-09 13:54:47 com.sun.faces.config.ConfigureListener contextInitialized
INFO: Initializing Mojarra 2.1.6 (SNAPSHOT 20111206) for context '/demo'
2013-jan-09 13:54:48 com.sun.faces.spi.InjectionProviderFactory createInstance
INFO: JSF1048: PostConstruct/PreDestroy annotations present.  ManagedBeans methods marked with these annotations will have said annotations processed.
2013-jan-09 13:54:51 org.richfaces.javascript.ClientServiceConfigParser parse
VARNING: Found JavaScript function definition for class javax.validation.constraints.NotNull, but that class is not presented
2013-jan-09 13:54:51 org.richfaces.javascript.ClientServiceConfigParser parse
VARNING: Found JavaScript function definition for class org.hibernate.validator.constraints.NotEmpty, but that class is not presented
2013-jan-09 13:54:51 org.richfaces.javascript.ClientServiceConfigParser parse
VARNING: Found JavaScript function definition for class javax.validation.constraints.Size, but that class is not presented
2013-jan-09 13:54:51 org.richfaces.javascript.ClientServiceConfigParser parse
VARNING: Found JavaScript function definition for class javax.validation.constraints.Pattern, but that class is not presented
2013-jan-09 13:54:51 org.richfaces.javascript.ClientServiceConfigParser parse
VARNING: Found JavaScript function definition for class javax.validation.constraints.Min, but that class is not presented
2013-jan-09 13:54:51 org.richfaces.javascript.ClientServiceConfigParser parse
VARNING: Found JavaScript function definition for class javax.validation.constraints.Max, but that class is not presented
2013-jan-09 13:54:51 org.richfaces.javascript.ClientServiceConfigParser parse
VARNING: Found JavaScript function definition for class javax.validation.constraints.AssertTrue, but that class is not presented
2013-jan-09 13:54:51 org.richfaces.javascript.ClientServiceConfigParser parse
VARNING: Found JavaScript function definition for class javax.validation.constraints.AssertFalse, but that class is not presented
2013-jan-09 13:54:51 org.richfaces.cache.CacheManager getCacheFactory
INFO: Selected fallback cache factory
2013-jan-09 13:54:51 org.richfaces.cache.lru.LRUMapCacheFactory createCache
INFO: Creating LRUMap cache instance using parameters: {facelets.DEVELOPMENT=true, javax.faces.PROJECT_STAGE=Development, org.richfaces.enableControlSkinning=true, javax.faces.DEFAULT_SUFFIX=.xhtml}
2013-jan-09 13:54:51 org.richfaces.cache.lru.LRUMapCacheFactory createCache
INFO: Creating LRUMap cache instance of 512 items capacity
2013-jan-09 13:54:51 org.richfaces.application.InitializationListener onStart
INFO: RichFaces Core Implementation by JBoss by Red Hat, version v.4.2.0.Final
2013-jan-09 13:54:51 com.sun.faces.config.ConfigureListener$WebConfigResourceMonitor$Monitor <init>
INFO: Monitoring jndi:/localhost/demo/WEB-INF/faces-config.xml for modifications
2013-jan-09 13:54:52 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8090"]
2013-jan-09 13:54:52 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8010"]
2013-jan-09 13:54:52 org.apache.catalina.startup.Catalina start
INFO: Server startup in 10510 ms
2013-jan-09 13:55:30 com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
ALLVARLIG: Error Rendering View[/rdfieldset/rdfieldset.xhtml]
javax.el.ELException: /rdfieldset/rdfieldset.xhtml @13,42 value="#{testController.a}": Error reading 'a' on type com.wmdata.raindance.webcomp.links.demo.TestController
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:114)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.wmdata.raindance.webcomp.fileUpload.FileUploadFilter.doFilter(FileUploadFilter.java:67)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.Exception
    at com.wmdata.raindance.webcomp.links.demo.TestController.getA(TestController.java:15)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    ... 39 more
b was called
c was called
d was called
e was called
f was called
g was called
h was called 
```

**带有 CDI bean 的 JSF 2.1.16**

```
jan 09, 2013 1:59:52 EM com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
SEVERE: Error Rendering View[/start.xhtml]
javax.el.ELException: /start.xhtml @26,49 value="#{testController.a}": Error reading 'a' on type test.testController$Proxy$_$$_WeldClientProxy
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:114)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:169)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getValue(HtmlBasicInputRenderer.java:205)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.getCurrentValue(HtmlBasicRenderer.java:355)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:164)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1786)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:424)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.render(CodiLifecycleWrapper.java:126)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.Exception
    at test.testController.getA(testController.java:44)
    at test.testController$Proxy$_$$_WeldClientProxy.getA(testController$Proxy$_$$_WeldClientProxy.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:183)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
    at org.jboss.weld.el.WeldValueExpression.getValue(WeldValueExpression.java:50)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    ... 39 more

b was called
c was called
d was called
e was called
f was called
g was called
h was called 
```

# python - 解析错误 使用 pyparsing 的对

> ID：14230942
> 
> 赞同：1
> 
> 时间：2013-01-09T08:22:04.617
> 
> 标签：python, pyparsing

我正在尝试使用 pyparsing 解析日志文件。日志文件条目的结构如下：

```
information line 1
information line 2
...
information line n
attribute name 1 = attribute value 1
attribute name 2 = attribute value 2
...
attribute name n = attribute value n 
```

我写了这个语法来解析这个文本块：

```
NL = Suppress(LineEnd())
infoline = OneOrMore(Word(alphas + ".-")) + NL
attrib_value_pair = OneOrMore(Word(alphas)) + Suppress("=") + \
                    OneOrMore(Word(alphanums + ".")) + NL
data = OneOrMore(infoline) + OneOrMore(attrib_value_pair)

parsed_data = data.parseString(trace_block) 
```

解析时出现此错误：

```
Traceback (most recent call last):
File "filter.py", line 100, in <module>
get_trace_block()
File "filter.py", line 25, in get_trace_block
filter_trace(trace_block)
File "filter.py", line 53, in filter_trace
get_attrib_name_value_pairs(trace_block[2:len(trace_block)])
File "filter.py", line 94, in get_attrib_name_value_pairs
parsed = data.parseString(trace_block)
File "/usr/local/lib/python2.6/dist-packages/pyparsing.py", line 1006, in parseString
raise exc
pyparsing.ParseException: Expected end of line (at char 70), (line:2, col:26) 
```

日志文件中的示例行：

```
A valid message has been received from a peer
Message type  is A
local ip = 10.7.1.10
local port = 3000
remote ip = 10.7.1.20
remote port = 3001 
```

知道哪里出错了吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:59:29.627

你真的很亲近。默认情况下，Pyparsing 的空白跳过包括换行符，因此您`OneOrMore`的信息行将读取单行信息，实际上甚至会读入第一个属性的“本地 ip”。由于您的解析器是面向行的，并且您明确显示了解析器中可以出现换行符的位置，因此您应该告诉 pyparsing*不要*将换行符作为可忽略的空格跳过。在定义任何语法元素之前执行此操作：

```
ParserElement.setDefaultWhitespaceChars(' \t') 
```

现在您将开始从解析器中看到更好的结果。

其他一些提示：

*   在 infoline 和 attrib_value_pair 周围使用 Group 来为解析的数据添加结构。

*   当您解析信息线时，OneOrMore 类型表达式将为您提供类似`['A', 'valid', 'message', 'has', 'been', 'received', 'from', 'a', 'peer']`Wrap infoline with的行`originalTextFor`，这会将信息线的匹配文本恢复为“A valid message etc....”作为单个字符串

祝你的 pyparsing 工作好运！

# tapestry - 如何在挂毯中更改我的资产的域

> ID：14230945
> 
> 赞同：0
> 
> 时间：2013-01-09T08:22:16.997
> 
> 标签：tapestry

默认; 所有资产（js，css）的域是固定的，即当前域。为了提高网站的速度；我们想使用子域 assets.example.com 而不是 example.com 来检索所有资产。

我检查了[http://tapestry.apache.org/assets.html](http://tapestry.apache.org/assets.html)；对于“新域”，它被指定为

> 如果您希望为资产创建新域，例如允许将资产存储在文件系统或数据库中，您可以定义一个新的 AssetFactory 并将其贡献给 AssetSource 服务配置。

这对我应该做什么并没有帮助！

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T10:26:12.717

你可以看看[`AssetPathConverter`](http://tapestry.apache.org/tapestry5/apidocs/org/apache/tapestry5/services/AssetPathConverter.html)。正如文档所述

> 这个的默认实现是身份，URI 是通过不变的。使用对 ServiceOverride 服务的贡献，您可以覆盖默认实现。

希望这可以帮助。

# sas - 展平 SAS 中的多个观测值

> ID：14230948
> 
> 赞同：3
> 
> 时间：2013-01-09T08:22:42.073
> 
> 标签：sas

我有一个数据集，其中患者可以对某些变量有多个（和未知）值，最终看起来像这样：

```
 ID   Var1   Var2   Var3   Var4
    1    Blue   Female 17     908
    1    Blue   Female 17     909
    1    Red    Female 17     910
    1    Red    Female 17     911
...
    99   Blue   Female 14     908
    100  Red    Male   28     911 
```

我想将这些数据打包，以便每个 ID 只有一个条目，并指示其原始条目中的一个值是否存在。因此，例如，这样的事情：

```
ID   YesBlue   Var2      Var3   Yes911
1    1         Female    17     1
99   1         Female    14     0
100  0         Male      28     1 
```

在 SAS 中有没有直接的方法来做到这一点？或者失败了，在我不知道如何使用的 Access（数据来自哪里）中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:32:17.450

如果您的数据集称为 PATIENTS1，可能是这样的：

```
proc sql noprint;
  create table patients2 as
  select *
        ,case(var1)
           when "Blue" then 1
           else 0
         end as ablue
        ,case(var4)
           when 911 then 1
           else 0
         end as a911
        ,max(calculated ablue) as yesblue
        ,max(calculated a911) as yes911
  from patients1
  group by id
  order by id;
quit;

proc sort data=patients2 out=patients3(drop=var1 var4 ablue a911) nodupkey;
  by id;
run; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T09:39:55.060

这是一个数据步骤解决方案。我假设对于给定 ID，Var2 和 Var3 的值始终相同。

```
data have;
input ID Var1 $ Var2 $ Var3 Var4;
cards;
1    Blue   Female 17     908
1    Blue   Female 17     909
1    Red    Female 17     910
1    Red    Female 17     911
99   Blue   Female 14     908
100  Red    Male   28     911
;
run;

data want (drop=Var1 Var4 _:);
set have;
by ID;
if first.ID then do;
    _blue=0;
    _911=0;
end;
_blue+(Var1='Blue');
_911+(Var4=911);
if last.ID then do;
    YesBlue=(_blue>0);
    Yes911=(_911>0);
    output;
end;
run; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T09:44:50.427

编辑：看起来就像基思所说的一样，只是写法不同。

这应该这样做：

```
data test;
input id Var1 $ Var2 $ Var3 Var4;
datalines;
1    Blue   Female 17     908
1    Blue   Female 17     909
1    Red    Female 17     910
1    Red    Female 17     911
99   Blue   Female 14     908
100  Red    Male   28     911
run;

data flatten(drop=Var1 Var4);
set test;
retain YesBlue;
retain Yes911;
by id;

if first.id then do;
  YesBlue = 0;
  Yes911 = 0;
end;

if Var1 eq "Blue" then YesBlue = 1;
if Var4 eq 911 then Yes911 = 1;

if last.id then output;
run; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T14:14:58.167

`PROC SQL`非常适合这样的事情。这类似于 DavB 的答案，但消除了额外的排序：

```
data have;
input ID Var1 $ Var2 $ Var3 Var4;
cards;
1    Blue   Female 17     908
1    Blue   Female 17     909
1    Red    Female 17     910
1    Red    Female 17     911
99   Blue   Female 14     908
100  Red    Male   28     911
;
run;

proc sql;
  create table want as
  select ID
       , max(case(var1)
               when 'Blue'
               then 1
               else 0 end) as YesBlue
       , max(var2)         as Var2
       , max(var3)         as Var3
       , max(case(var4)
               when 911
               then 1
               else 0 end) as Yes911
  from have
  group by id
  order by id;
quit; 
```

它还可以通过 ID 变量安全地减少您的原始数据，但如果来源与您描述的不完全一样，则可能会出现错误。

# oracle - JDBC驱动注册方法的区别

> ID：14230949
> 
> 赞同：0
> 
> 时间：2013-01-09T08:22:44.677
> 
> 标签：oracle, oracle10g, oracle11g, oracle9i, oracle-adf

方法1：

```
Class.forName("oracle.jdbc.driver.OracleDriver"); 
```

这是最常用的方法，它使用 Java 的 Class.forName() 方法将驱动程序的类文件动态加载到内存中，并自动注册它。

* * *

方法2：

```
Class.forName("oracle.jdbc.driver.OracleDriver").newInstance(); 
```

这种方法是使用 Class.forName() 的组合来动态加载 Oracle 驱动程序，然后使用驱动程序类的 getInstance() 方法来解决不兼容的 JVM，但是您必须为两个额外的异常编写代码。

这两种方法之间有什么具体区别吗？我没有得到第二种方法

谢谢

# active-directory - 如何知道 Active Directory 中 AD 组的用户自给定时间戳以来是否已更新

> ID：14230968
> 
> 赞同：1
> 
> 时间：2013-01-09T08:24:00.167
> 
> 标签：active-directory

在我们的项目中，我们有一个受信任用户的概念，我们将 Active Directory 组指定为受信任组。我们获取给定可信组的所有用户并将他们用作可信用户。

我们需要定期同步 AD 组的用户。当一个 AD 组包含大量用户时，它是一项网络/内存密集型任务，因此在同步组的用户之前，我们想知道 AD 组是否已更改。

所以想知道AD组中是否有任何属性可以用来知道AD组自上次同步以来是否发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:20:01.233

```
whenChanged 
```

显示最后修改日期。

像这样找到它：

```
DirectoryEntry de = new DirectoryEntry("LDAP://CN=Group,OU=Groups,DC=domain,DC=com");
DateTime changed = (DateTime)de.Properties["WhenChanged"][0]; 
```

与 DateTime 或 TimeSpan 函数进行比较。

# html - 元 http-equiv X-UA 兼容

> ID：14230970
> 
> 赞同：0
> 
> 时间：2013-01-09T08:24:06.593
> 
> 标签：html, xhtml

`<meta http-equiv="X-UA-Compatible" content="IE=9" >`

上面的代码行强制浏览器使

文档模式到 IE 9 标准和浏览器模式到 IE 9 兼容模式

如何将文档模式设置为 IE 9 标准，将浏览器模式设置为 IE 9 模式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:26:35.940

您的 X-UA 兼容元标记上方是否有任何其他链接或脚本`<head>`？如果是这样，这可能会导致问题。

还要确保检查浏览器本身的兼容性设置，方法是：

工具 --> 兼容性视图设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:30:40.177

这对我有用..

```
<!DOCTYPE html>
<html>
<head>
<title>title</title>    
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:46:32.147

有几种可能的解释，例如覆盖`meta`标签的 HTTP 标头、域名被 Microsoft 列入黑名单，或者您的本地管理员已强制 IE 进入兼容模式。有关一些可能性和可能的​​治疗方法的描述，请查看“使用 Doctype 激活浏览器模式”中的[IE8 和 IE9 并发症](http://hsivonen.iki.fi/doctype/#ie8)。

# jquery - jQuery 按钮小部件在 Chrome 中提交时无法正常工作

> ID：14230975
> 
> 赞同：0
> 
> 时间：2013-01-09T08:24:17.280
> 
> 标签：jquery, forms, button, user-interface, dialog

我的网络有一个小问题。我在外部文件中有表格，如下所示。

```
<form action="/action.php" method="post" id="formularz_dodaj" target="iframe_id">
    <fieldset>
        <input type="hidden" name="ac" value="groups_save" />
        <ul>
            <li>
                Some fields here
            </li>
            <li class="buttons">
                <input type="submit" class="zapisz" value="Zapisz" />
                <input type="button" class="anuluj" value="Anuluj" />
            </li>
        </ul>
    </fieldset>
</form>
<script type="text/javascript">
    //<![CDATA[
    $j('.zapisz').button().click(function(){
        $j('.anuluj').hide();
    });
    $j('.anuluj').button().click(function(){
        $j('#dialog').dialog('close');
    });
    //]]>
</script> 
```

如您所见，除了按钮之外没有什么特别之处。结果表单通过 jQuery 获取样式按钮。按钮`<input type="submit" class="zapisz" value="Zapisz" />`应该像正常提交一样工作，`<input type="button" class="anuluj" value="Anuluj" />`应该只是关闭对话框。此表单通过 jQuery ajax() 方法放置在对话框中，如下所示：

```
var $j = jQuery.noConflict();
var main = new Object();

$j.extend($j.ui.dialog.prototype.options, {
modal: true,
resizable: false,
width:'auto',
height:'auto',
show:{
    effect:'fade',
    duration:'fast'
},
hide:{
    effect:'fade',
    duration:'fast'
},
open:function(){
    $j(this).find("input[type=text], input[type=password], input[type=checkbox],     select, textarea").uniform();
}
});
main.dialog = function(ob){
if(ob.url){
    var url = arguments.url;
    var dialog = $j("#dialog");
    if ($j("#dialog").length == 0) {
        dialog = $j('<div id="dialog" class="dialog" title=""></div>').appendTo('body');
    }
    if(ob.title){
        dialog.attr('title', ob.title);
    }
    $j.ajax({
        type:'POST',
        dataType:'html',
        data:ob.dane,
        url:ob.url,
        success:function(d){
            if(d == 'uprawnienia'){
                main.alert({
                    text:'Nie posiadasz uprawnie\u0144 do tej operacji.', 
                    title:'Brak uprawnie\u0144'
                });
            } else {
                $j("#dialog").html(d);
                $j("#dialog").dialog({
                    title:$j("#dialog").attr('title')
                });
            }
        },
        error:function(){
            alert('Niepoprawne rz\u0105danie.');
        }
    });
} else {
   alert('Brak pliku do za\u0142adowania.');
}
} 
```

数据的目标是放置在主索引文件中的 iframe。

```
<iframe name="iframe_id" id="iframe_id" src="" style="display:none; width:400px; height:200px;"></iframe> 
```

当我使用带有“.zapisz”类的按钮时会发生什么，在特定浏览器中没有任何反应：IE8、Chrome、Safari。在 IE9 和 FireFox 中，它可以正常工作。

我已经在我的任何浏览器中检查了控制台，并且没有错误。没有来自表单的数据发送到 iframe。只执行 click 方法中添加的 JS。

按钮“.zapisz”仅在`document.getElemntById('formularz_dodaj').submit();`以单击功能编写时才能正常工作。

任何人都知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:25:33.427

把它包在里面

```
$(function(){
//your code here
}); 
```

它应该工作！

如果仍然不起作用，请删除 .button() 并尝试

```
$(function(){
    $j('.zapisz').click(function(){
        $j('.anuluj').hide();
    });
    $j('.anuluj').click(function(){
        $j('#dialog').dialog('close');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:26:54.700

试试这个方法：

```
$("document").ready(function() {
    $j('.zapisz').click(function(){
        $j('.anuluj').hide();
    });
    $j('.anuluj').click(function(){
        $j('#dialog').dialog('close');
    });
}); 
```

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:14:25.317

是看到表单的目标是`target="iframe_id"`。您的页面中是否有任何隐藏的 iframe，因此提交已完成，但您无法“看到”它。

@ATOzTOA 给出的答案工作得很好，但它在新选项卡中打开。因此，您的页面中可能有一个隐藏的 iframe，并且表单的目标是

**编辑**

您的 iframe 具有名称和 id `upload`，但您的目标是`iframe_id`. 尝试将您的表格更改为

```
<form action="/action.php" method="post" id="formularz_dodaj" target="upload"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T09:23:51.930

因为这种行为没有解决方案或明确的原因，所以我建立了一些解决方法。因为所有对话框（在我的情况下）都包含按钮类`.zapisz`和/或`.anuluj`它们的用法在每种情况下都是相同的，所以我预定义了这样的代码：

```
$j.extend($j.ui.dialog.prototype.options, {
    modal: true,
    resizable: false,
    width:'auto',
    height:'auto',
    show:{
        effect:'fade',
        duration:'fast'
    },
    hide:{
        effect:'fade',
        duration:'fast'
    },
    open:function(){
        $j(this).find("input[type=text], input[type=password], input[type=checkbox], select, textarea").uniform();
        $j(this).find('input[type=submit], input[type=button]').button();
        $j(this).find('.zapisz').each(function(){
            $j(this).click(function(){
                $j(this).parents('form').submit();
                $j(this).parents('form').find('.ui-state-error').hide();
            });
        });
        $j(this).find('.anuluj').each(function(){
            $j(this).click(function(){
                $j(this).parents('.dialog').dialog('close');
            });
        });
        $j('.ui-icon.ui-icon-closethick').on('click', function(){
            $j(this).parent().parent().hide();
        });
        $j(this).find('.ui-state-error').hide();
        $j('span.opis').tooltip();
    }
}); 
```

此代码的作用是（省略效果等基本设置）当打开对话框时，它会搜索具有 thosw 类的按钮`.zapisz`和/或`.anuluj`并根据父级为它们提供适当的操作。因此，现在无需手动添加`submit()`到我拥有的每个表单中。

接下来是当我需要向这些按钮中的任何一个添加一些其他操作时，我只需将它们写入表单本身，就像这样：

```
$j('.zapisz').click(function(){
    $j('.anuluj').hide();
    $j(this).val('Wysy\u0142am dane');
    $j(this).attr('disabled', 'disabled');
}); 
```

`button()`请注意，在添加之前不再有方法`click()`。

现在我有了按我想要的格式设置的对话框，并且默认情况下可以按预期工作。

我仍然不知道为什么我的问题会发生在某些浏览器中，所以如果你有任何关于它的信息，那对未来会很好。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-09T08:30:05.933

一个问题：`/action.php`将尝试加载`action.php`位于文件系统的根目录中。你应该使用`./action.php`.

这在 Chrome、Firefox 和 IE6 中运行良好：

```
<form action="./action.php" method="post" id="formularz_dodaj" onsubmit="alert('Submitting form');" target="iframe_id">
    <fieldset>
        <input type="hidden" name="ac" value="groups_save" />
        <ul>
            <li>
                Some fields here
            </li>
            <li class="buttons">
                <input type="submit" class="zapisz" value="Zapisz" />
                <input type="button" class="anuluj" value="Anuluj" />
            </li>
        </ul>
    </fieldset>
</form>

<script type="text/javascript">
    $('.zapisz').click(function(){
        $('.anuluj').hide();
        return true;
    });

    $('.anuluj').click(function(){
        $('#dialog').dialog('close');
    });
</script> 
```

# css - Internet Explorer 中的边界半径

> ID：14230978
> 
> 赞同：0
> 
> 时间：2013-01-09T08:24:27.203
> 
> 标签：css

我已经为我的 css 文件实现了边界半径，并且 iam 还为其工作的 Internet Explorer 使用了 ie-css.htc 脚本，并且边界半径在我的本地主机的 Internet Explorer 中工作正常，但是当我将文件上传到 Windows 服务器边界半径时不能在 Internet Explorer 中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T08:37:41.383

您是否正确引用了您的 .htc 文件？`*.htc`文件应该相对于您的 html 文档引用，*而不是*相对于您的样式表。

如果这不能解决您的问题，您能否向我们提供代码示例或您将网站部署到的 URL？

# ios - 在 ios 中使用整数变量作为图像名称

> ID：14230979
> 
> 赞同：1
> 
> 时间：2013-01-09T08:24:30.463
> 
> 标签：ios, variables, for-loop, integer, imageview

我有一组名为`0.png`, `1.png`,`2.png`等的图像...

说我只有五个。我想使用一个整数变量（infoInt）来确定显示什么图像。由于我以数字命名图像，因此我可以将图像定义为整数。即 infoInt.png （随着 infoInt 的变化）。我不确定如何处理它。这是我的尝试。

```
- (void)viewDidLoad{

[super viewDidLoad];
UIImage *img;

for (infoInt =0; infoInt<=5; infoInt++) {
    img = [UIImage imageNamed:infoInt".png"]; //What to do here? How do I use infoInt variable in image name?
    [imageView setImage:img];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T08:25:37.107

您可以使用`+[NSString stringWithFormat:]`来构造名称，如

```
img = [UIImage imageNamed:[NSString stringWithFormat:@"%d.png", infoInt]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T08:27:10.210

您可以使用 stringWithFormat 并使用 for 循环计数器生成图像名称为

```
img = [UIImage imageNamed:[NSString stringWithFormat:@"%d.png", infoInt]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T08:27:15.530

利用：

```
NSString *fileName = [NSString stringWithFormat:@"%d.png", infoInt]
img = [UIImage imageNamed:fileName]; 
```

另请参阅[NSString 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)以获取更多字符串函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T08:26:44.987

更改此行

```
img = [UIImage imageNamed:infoInt".png"]; 
```

至

```
img = [UIImage imageNamed:[NSString stringWithFormat:@"%d.png",infoInt]]; 
```

希望对你有帮助

# parsing - 检查我的语法是否为 LL(1) 的东西

> ID：14230984
> 
> 赞同：1
> 
> 时间：2013-01-09T08:24:54.700
> 
> 标签：parsing, grammar

我正在为一门课程编写解析器，我的语法很长，我不想手动检查它。有什么我可以用来检查它是否是 LL(1) 的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T10:44:01.057

您可以在任何 LL(1) 解析器生成器（如 javaCC、ANTLR 或 Coco/R）中输入您的语法并尝试生成解析器。如果有任何冲突，它会警告你。只需确保将前瞻选项设置为 1，如果该选项存在，这通常应该是默认值。

# c# - 如何在没有实现任何模式的情况下操作控件？

> ID：14230985
> 
> 赞同：2
> 
> 时间：2013-01-09T08:25:06.470
> 
> 标签：c#, .net-framework-version, microsoft-ui-automation

我正在尝试`UIAutomation`为我们的项目实施自动化测试。但是许多控件不是标准的，并且也没有为这些控件实现适当的模式。在这种情况下，我应该如何通过*UIAutomation 框架*来操作控件？

例如，我们产品中的按钮是通过 Pane 实现的，而调用的模式也没有实现。我应该如何点击按钮？（为了避免在测试机器上安装 VS，我不想`Mouse.Click()`在`Microsoft.VisiualStudio.TestTools.UITesting`命名空间中使用）有没有办法只使用 UIAutomation 框架或嵌入在 .net 框架中的其他东西来做到这一点？提前致谢！（如果实现了正确的模式，下面的代码将起作用。作为新用户，我无法发布截图供您参考，对不起！）

```
object temp = null;
if (btnTest.TryGetCurrentPattern(InvokePattern.Pattern, out temp))
{
    InvokePattern btnTestPattern = temp as InvokePattern;
    btnTestPattern.Invoke();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-06T07:59:47.590

当控制模式没有实现时，唯一的交互方式是点击周围的东西。我建议尝试遵循以避免最大错误。

1.  在发送点击之前，请确保按钮的父级（窗格或窗口设置为前景）
2.  不要将点击发送到 AutomationElement 的角落，而是尝试在元素的中点发送它，
3.  另外，尝试先将鼠标悬停在元素上，等待 200 毫秒，然后发送点击，这样你一定会看到执行。[相信我，这有助于调试并避免很多问题。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-08T14:04:22.360

最好的事情是，如果那些实现该系统的人会[为他们的 UI 元素实现服务器端 UIA 提供程序](http://msdn.microsoft.com/en-us/library/ms748277%28v=vs.110%29.aspx)！

但通常这是不可能的......，我使用了以下解决方法（至少用于单击/切换）：

```
AutomationElement yourAE = ...// some code to find the right AutomationElement (AE)
clickablePoint = yourAE.GetClickablePoint(); 
```

*BoundingRectangleProperty 也可能会有所帮助*

如果您收到该可点击点，您可以使用

```
System.Windows.Forms.Cursor.Position = new System.Drawing.Point((int)clickablePoint.X, (int)clickablePoint.Y); 
```

移动到该位置，然后通过[InputSimulator](http://inputsimulator.codeplex.com/) 或一些 win32 (user32.dll) 命令单击它。 *（注意：当然你也可以使用 InputSimulator 或 win32 来移动鼠标——但是当涉及到具有不同位置或分辨率的多个屏幕时，我在 InputSimulator 上遇到了一些问题——所以 Cursor.Position 是最简单的方法，这也非常可靠的）*

* * *

# php - 如何检查字符是字母还是数字？

> ID：14230986
> 
> 赞同：12
> 
> 时间：2013-01-09T08:25:17.983
> 
> 标签：php, numbers, letter

我有一个字符串，我想循环它，以便检查每个字符是字母还是数字。

```
$s = "rfewr545 345b";

for ($i=1; $i<=strlen($s); $i++){
   if ($a[$i-1] == is a letter){
      echo $a[$i-1]." is a letter";
   } else {
      echo $a[$i-1]." is a number";
   }
} 
```

如何检查字符是字母还是数字？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-09T08:28:22.233

您可以使用：

[ctype_digit](http://fr.php.net/manual/en/function.ctype-digit.php)

和

[ctype_alpha](http://fr.php.net/manual/en/function.ctype-alpha.php)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-09T08:27:42.393

要测试 if character `is_numeric`，请使用：

```
is_numeric($a[$i-1]) 
```

如下：

```
$s = "rfewr545 345b";
for ($i = 0; $i < strlen($s); $i++){
   $char = $s[$i];
   if (is_numeric($char)) {
      echo $char . ' is a number';
   } else {
      echo $char . ' is a letter';
   }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-09T08:33:00.107

使用正则表达式，您可以尝试以下操作。

**测试一个数字**

```
if (preg_match('/\d/', $char)) :
     echo $char.' is a number';
endif; 
```

**测试一个“字母”**

```
if (preg_match('/[a-zA-Z]/', $char)) :
     echo $char.' is a letter';
endif; 
```

这种方法的好处主要来自“字母”测试，它可以让您有效地定义*构成*“字母”字符的内容。在本例中，基本英文字母被定义为“字母”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T08:28:30.643

看到这个： http: [//php.net/manual/en/function.is-numeric.php](http://php.net/manual/en/function.is-numeric.php)

```
if(Is_numeric($char)) {
//Do stuff
}
else {
//Do other stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T08:28:34.780

您可以使用**is_numeric()**函数

```
if (is_numeric($a[$i-1])){
      echo $a[$i-1]." is a number";
   } else {
      echo $a[$i-1]." is a letter";
   } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T08:35:21.600

php 提供了一些不错的功能来检查字符。使用 apt 函数作为 if 块中的条件。

访问：

[PHP 字符函数](http://php.net/manual/en/book.ctype.php)

例如，如果数字是数字，**ctype_digit返回 true。**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-28T12:32:49.580

您可以使用[ctype_alpha](http://fr.php.net/manual/en/function.ctype-alpha.php)检查字母字符。

同样，您可以使用[ctype_digit](http://fr.php.net/manual/en/function.ctype-digit.php)检查数字字符。

**`is_numeric`— 查找变量是数字还是数字字符串**

`is_numeric()`例子：

```
<?php

    $tests = array(
        "42",
        0b10100111001,
        "not numeric",
        array(),
        9.1
    );

    foreach ($tests as $element) {
        if (is_numeric($element)) {
            echo "'{$element}' is numeric", PHP_EOL;
        } else {
            echo "'{$element}' is NOT numeric", PHP_EOL;
        }
    }
?> 
```

上面的示例将输出：

```
'42' is numeric
'1337' is numeric
'not numeric' is NOT numeric
'Array' is NOT numeric
'9.1' is numeric 
```

**哪里`ctype_digit()`和`is_numeric()`不同？**

将字符串与整数进行比较的示例：

```
<?php
    $numeric_string = '42';
    $integer        = 42;

    ctype_digit($numeric_string);  // true
    ctype_digit($integer);         // false (ASCII 42 is the * character)

    is_numeric($numeric_string);   // true
    is_numeric($integer);          // true

?> 
```

# java - 如何获取本地日期时间而不是服务器日期时间

> ID：14230987
> 
> 赞同：4
> 
> 时间：2013-01-09T08:25:18.123
> 
> 标签：java, jsp, date, time, weblogic

我正在制作一个 Java Web 应用程序，不同国家的客户需要通过 jsp 页面上传文件。我必须在 Weblogic 服务器中部署这个应用程序。

现在我想要的是他们的本地日期时间。我不想要服务器日期时间。

我应该在我的 java 应用程序中编写什么代码来获取他们的本地日期和时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T08:29:17.127

除非您在 post/Ajax 调用中明确传递它，否则很难获得用户/客户端的时间。

在 Javascript 中捕获时间，然后在 http 请求中将其发送到服务器。

网址：[http ://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T08:30:04.817

你应该看看这个问题：[Determining a web user's time zone](https://stackoverflow.com/questions/13/determining-a-web-users-time-zone)。请参阅“JD Isaacks”的回答，并获得很多支持。

您可以通过 ajax 调用将时区“偏移量”传递给您的 Java 应用程序，并使用它来计算用户的本地日期和时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T08:29:23.233

获取客户端时间戳的唯一方法是在客户端上检索它并将其发送到服务器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T08:31:44.053

使用 JavaScript() 使用 Date() 函数，您可以使用 ajax 将其发送到服务器。您可以在 bodyLoad() 期间直接调用此 javascript 和 ajax 函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T09:03:22.423

使用以下 JQuery ajax 调用函数。

```
 $.ajax({
        type: "POST",
        url: "ServletTest",
        data: "clientdate=" + new Date()
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-14T12:51:40.930

尝试：

```
<script>
    var d = new Date();
    alert(d);
</script> 
```

# c# - 如何防止 XXE 攻击（.NET 中的 XmlDocument）

> ID：14230988
> 
> 赞同：38
> 
> 时间：2013-01-09T08:25:17.383
> 
> 标签：c#, asp.net, .net, xml, xml-parsing

我们对我们的代码进行了安全审计，他们提到我们的代码容易受到外部实体 (XXE) 攻击。我正在使用以下代码 -

```
string OurOutputXMLString=
"<ce><input><transaction><length>00000</length><tran_type>Login</tran_type></transaction><user><user_id>ce_userid</user_id><subscriber_name>ce_subscribername</subscriber_name><subscriber_id>ce_subscriberid</subscriber_id><group_id>ce_groupid</group_id><permissions></permissions></user><consumer><login_details><username>UnitTester9</username><password>pDhE5AsKBHw85Sqgg6qdKQ==</password><pin>tOlkiae9epM=</pin></login_details></consumer></input></ce>"

 XmlDocument xmlDoc = new XmlDocument();
 xmlDoc.LoadXml(OurOutputXMLString); 
```

在审计报告中，他们说它失败了，因为 XML 实体可以包含可以在预期控制之外解析的 URL。XML 实体解析器将尝试解析和检索外部引用。如果攻击者控制的 XML 可以提交给这些函数之一，那么攻击者就可以访问有关内部网络、本地文件系统或其他敏感数据的信息。为了避免这种情况，我编写了以下代码，但它不起作用。

```
MemoryStream stream =
    new MemoryStream(System.Text.Encoding.Default.GetBytes(OurOutputXMLString));

XmlReaderSettings settings = new XmlReaderSettings();

settings.DtdProcessing = DtdProcessing.Prohibit;
settings.MaxCharactersFromEntities = 6000;
XmlReader reader = XmlReader.Create(stream, settings);
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(reader); 
```

但我可以在这里看到 reader 没有任何价值可以加载到`xmlDoc(XmlDocument)`. 任何人都可以在我遗漏的地方提供帮助吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-09T08:40:18.427

`XmlResolver`使用提供的 via属性解析外部资源`XmlDocument.XmlResolver`。如果您的 XML 文档**不应包含任何外部资源**（例如 DTD 或模式），只需将此属性设置为`null`：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.XmlResolver = null;
xmlDoc.LoadXml(OurOutputXMLString); 
```

如果您想过滤这些 URL 的来源（例如只允许某些域），只需从中派生您自己的类`XmlUrlResolver`并覆盖该`ResolveUri()`方法。在那里，您可以检查 URL 是什么并对其进行清理（例如，您可以只允许本地网络中的 URL 或来自受信任来源的 URL）。

例如：

```
class CustomUrlResovler : XmlUrlResolver
{
    public override Uri ResolveUri(Uri baseUri, string relativeUri)
    {
        Uri uri = new Uri(baseUri, relativeUri);
        if (IsUnsafeHost(uri.Host))
            return null;

        return base.ResolveUri(baseUri, relativeUri);
    }

    private bool IsUnsafeHost(string host)
    {
        return false; 
    }
} 
```

`IsUnsafeHost()`检查给定主机是否允许的自定义函数在哪里。有关一些想法，请参见SO 上的[这篇文章](https://stackoverflow.com/questions/1412538/how-to-tell-if-a-url-is-an-intranet-url)。只需返回以`null`保存*您*的代码免受此类攻击。如果允许 URI，您可以简单地返回默认实现。`ResolveUri()`*`XmlUrlResolver.ResolveUri()`*

 *要使用它：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.XmlResolver = new CustomUrlResolver();
xmlDoc.LoadXml(OurOutputXMLString); 
```

有关如何解析 XML 外部资源的更多详细信息，请阅读MS Docs 上的[Resolving External Resources](https://docs.microsoft.com/en-us/dotnet/standard/data/xml/resolving-external-resources?view=netframework-4.7)。如果您的代码比此示例更复杂，那么您绝对应该阅读[XmlDocument.XmlResolver](https://docs.microsoft.com/en-us/dotnet/api/system.xml.xmldocument.xmlresolver)属性的[备注部分](https://docs.microsoft.com/en-us/dotnet/api/system.xml.xmldocument.xmlresolver?view=netframework-4.7#remarks)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-23T17:06:26.850

所以更好用

```
new XmlDocument { XmlResolver = null }; 
```

有趣的是，从 .net 4.5.2 和 4.6 开始，默认解析器的行为有所不同，并且不会预先隐式使用 XmlUrlResolver 来解析我所看到的任何 url 或位置。

```
//In pre 4.5.2 it is a security issue.
//In 4.5.2 it will not resolve any more the url references in dtd and such, 
//Still better to avoid the below since it will trigger security warnings.
new XmlDocument(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-19T05:16:54.700

将 XmlReaderSettings.DtdProcessing 设置为 DtdProcessing.Prohibit 在 .NET 4.7.2 中完全可以正常工作。这是我用来测试的。

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE demo 
[
  <!ELEMENT demo ANY >
  <!ENTITY % extentity SYSTEM "https://www.hl7.org/documentcenter/public/wg/structure/CDA.xsl">
  %extentity;
]>
<test>
    Some random content
</test> 
```

将上述内容保存在一个文件中，并从以下 c# 代码片段中读取该文件。

```
XmlReaderSettings settings = new XmlReaderSettings();
settings.DtdProcessing = DtdProcessing.Prohibit;
settings.MaxCharactersFromEntities = 6000;
//The following stream should be the filestream of the above content.
XmlReader reader = XmlReader.Create(stream, settings);
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(reader); 
```

我得到以下异常。

```
For security reasons DTD is prohibited in this XML document. To enable DTD 
processing set the DtdProcessing property on XmlReaderSettings to Parse and 
pass the settings into XmlReader.Create method.
at System.Xml.XmlTextReaderImpl.Throw(Exception e)
at System.Xml.XmlTextReaderImpl.ParseDoctypeDecl()
at System.Xml.XmlTextReaderImpl.ParseDocumentContent()
at System.Xml.XmlLoader.LoadNode(Boolean skipOverWhitespace)
at System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc)
at System.Xml.XmlDocument.Load(XmlReader reader) 
```*

# php - 在 php 中包含打字稿

> ID：14230998
> 
> 赞同：1
> 
> 时间：2013-01-09T08:25:41.413
> 
> 标签：php, typo3, typoscript

是否可以通过 php 包含打字稿文件？通常我会在其中包含打字稿：

```
<INCLUDE_TYPOSCRIPT: source="FILE:fileadmin/templates/typoscript/setup/1.ts"> 
```

但我只想用 php 而不是打字稿来做到这一点。那可能吗？

我的目的：我想在我的页面中动态加载打字稿

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-10T16:48:51.877

这可以通过在早期调用一致的函数来实现，例如在调用或委托它`ext_localconf.php`。例如，[bookstrap 包](https://github.com/benjaminkott/bootstrap_package/blob/master/ext_localconf.php)在 PHP 中加载 TypoScript，如下所示：

```
\TYPO3\CMS\Core\Utility\ExtensionManagementUtility::addPageTSConfig(
    '<INCLUDE_TYPOSCRIPT: source="FILE:EXT:' . $_EXTKEY
    . '/Configuration/PageTS/Mod/Wizards/newContentElement.txt">'
); 
```

请注意，TypoScript 在实际前端渲染开始之前被缓存。这意味着，如果您是插件类或控制器逻辑已被调用，则不应修改 TypoScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:13:56.267

可能您需要从 php 函数返回一个值并使用打字稿条件来选择打字稿文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:40:10.107

您可以尝试以下方法（如果我猜对了）：

```
$typoscriptFile  .= file_get_contents($someFile);

$parser  = t3lib_div::makeInstance('t3lib_TSparser');
$parser->parse($typoscriptFile);

$tsArray = $parser->setup; 
```

不过，我真的不知道这对与全球排版相关的任何事情会有多好。

`t3lib_TStemplate`如果你想要一个完整正确的解析，如果你从上面的代码中填充一个新的实例，`$GLOBALS['TSFE']->tmpl`然后运行上面的代码，你可能会得到这样的结果。可能有用，没试过。