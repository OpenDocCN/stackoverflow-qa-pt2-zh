# StackOverflow 问答 14634000-14634999

# javascript - Windows 8 应用程序中的 Javascript

> ID：14634000
> 
> 赞同：1
> 
> 时间：2013-01-31T19:52:44.180
> 
> 标签：javascript, windows-8, winjs

`home.js`我在默认 NavigationApp中有以下代码：

```
(function () {
"use strict";

WinJS.UI.Pages.define("/pages/home/home.html", {
    // This function is called whenever a user navigates to this page. It
    // populates the page elements with the app's data.
    ready: function (element, options) {
        var submit = document.getElementById("submitBtn");
        submit.addEventListener("click", myFunc());
    }
});

function myFunc() {
    // Do some stuff here
}

})(); 
```

我遇到的问题是该功能`myFunc()`在应用程序启动时立即执行，而不是像我预期的那样在按下提交按钮时执行；为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:54:26.213

您正在将结果添加`myFunc()`到您的听众，您想做

`submit.addEventListener("click", myFunc)`

将函数添加为回调而不是函数的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T19:54:27.213

您的代码`myfunc`立即调用并将结果传递给`addEventListener`.

您需要通过删除`()`.

# php - 我可以在 htaccess 中修改锚标签 href 吗？

> ID：14634006
> 
> 赞同：0
> 
> 时间：2013-01-31T19:53:18.240
> 
> 标签：php, .htaccess

不确定这是否可能，但想知道 htaccess 是否有技巧......

说我有这样的锚标签href -

```
<a href="http://example.com/index.php?id=12345">Click here</a> 
```

我已经使用 mod_rewrite 更改了 URL 结构，但想知道是否可以使用 htaccess 在 href 中隐藏实际 URL。

即，当用户将鼠标悬停在锚标记上时，浏览器会在底部显示[http://example.com/index.php?id=12345 。](http://example.com/index.php?id=12345)我希望浏览器显示的只是[http://example.com/index/12345](http://example.com/index/12345)而无需在我的所有页面上手动更改它。

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:05:39.973

您为什么不将链接更改为以下内容？

```
<a href="http://example.com/index/12345">Click here</a> 
```

由于您可以更改 .htaccess，我希望您拥有或管理此域。所以应该是可以的。

如果链接是由 PHP 代码生成的，那么我建议您实现并使用如下翻译功能：

```
function beautify($ugly) {
    // your logic comes here
    return $nice; // ;)
} 
```

...并将其包装在当前输出 url 的现有代码周围。这将有两个优点：

*   迁移到新的 url 方案更容易且更安全
*   从现在开始，您可以使用单个函数控制所有与 url 相关的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:08:51.337

不，htaccess 用于处理 Web 服务器的输入，而不是从服务器发回的数据。

如果你使用 jQuery，你可以让它在页面加载时使用类似这样的东西重写 href。

```
$(function(){
    $("a").each(function() { 
      this.href = 'some_new_url that you made based on the one in this.href';
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:04:48.000

我同意，htaccess 帮不了你。我想你必须手动更改它们。我希望我能提供更多帮助

# facebook - 如何使用 Facebook API 下载上市公司页面以获取信息？

> ID：14634009
> 
> 赞同：-1
> 
> 时间：2013-01-31T19:53:35.060
> 
> 标签：facebook, excel, facebook-fql, vba

作为我的 IT 研讨会课程项目的一部分，我们都被分配创建文本分析工具的不同部分。我们有几个人在每个部分工作，如果需要，我们可以合作。

我们需要在 Excel 中构建前端，对于我的特定部分，我需要从 Facebook 访问公开的公司信息。建议为此任务使用 Facebook API。公司名称将列在一个单元格中，并且必须自动查找分支机构。

以下是我需要使用此脚本完成的操作的描述：

输出公司所有分支机构的所有 facebook 句柄（页面 ID） - 例如“Hilton, New York”、“Hilton New York Fashion District”等......对于 Applebee 的示例，您会找到所有分支机构（位置）的 facebook 句柄) 为 Applebees。这些通常可以通过品牌名称匹配（通配符“Hilton *”）或通过下载母公司的“喜欢”列表来找到。附加带有附加分支信息的附加数据列（例如，喜欢的数量、谈论这个的数量、这里的数量）。在工作表顶部附加时间戳，以便知道数据收集时间。

我对 Facebook-API 或 FQL 没有任何经验，因此非常感谢您对入门的任何帮助。我对VBA和PHP有一些了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:21:38.060

听起来您的教授从未使用过 Facebook API。

如果您必须使用 Facebook，您有两种选择：

1.  使用 Graph API 搜索功能：`/search?q=hilton&type=page`. 您必须自己过滤掉“Paris Hilton”、“Hilton Head Island”等。
2.  使用 FQL `SELECT username, page_id, categories FROM page WHERE CONTAINS("hilton")`：. 在这种情况下，如果页面所有者已经填充了这些，您*可以*使用 过滤掉 Paris 。`categories`您还依赖于未记录的`CONTAINS()`方法，该方法可能随时更改或停止工作。

如果是我，我会以不同的方式处理这个问题：

*   我会使用[Factual Places API](http://www.factual.com/data-apis/places)中的数据来查找营业地点。Factual 已编入索引以供搜索并具有标准类别。
*   找到地点后，您可以通过 Factual Crosswalk 表获取 Facebook ID。
*   这两个表都可以下载以在本地使用，这在 VBA/Excel 中应该更容易。
*   完成**后**，请向 Facebook 查询您需要的特定数据。

# function - Postgresql 循环函数

> ID：14634011
> 
> 赞同：3
> 
> 时间：2013-01-31T19:53:44.683
> 
> 标签：function, postgresql, date, loops, aggregate-functions

我有一个有很多行的表，所以当我进行这个查询时：

```
SELECT     
    date_trunc('hour', fecha) AS momento
    ,(extract(minute FROM fecha)::int / 5) AS min
    ,count(fecha) AS cuenta
FROM   table1
WHERE fk_id_busqueda=$id_busqueda 
GROUP  BY 1, 2
ORDER  BY 1, 2; 
```

这需要很多时间。我正在考虑的一个解决方案是创建一个 postgres 函数，我可以在其中按日期对数据进行排序，然后每次对上一行的时刻求和一个，这与带有循环的实际时刻相同。何时不同，然后重置该值并传递到下一行。这个想法是该函数接收 id_busqueda (int)。

输出应该是这样的：

```
 2013-01-20 00:00:00 |         0 |    16
 2013-01-20 00:00:00 |         1 |    30
 2013-01-20 00:00:00 |         2 |    27
 2013-01-20 00:00:00 |         3 |    30
 2013-01-20 00:00:00 |         4 |    33
 2013-01-20 00:00:00 |         5 |    21
 2013-01-20 00:00:00 |         6 |    27
 2013-01-20 00:00:00 |         7 |    27
 2013-01-20 00:00:00 |         8 |    19
 2013-01-20 00:00:00 |         9 |    13
 2013-01-20 00:00:00 |        10 |    17
 2013-01-20 00:00:00 |        11 |    24
 2013-01-20 01:00:00 |         0 |    12
 2013-01-20 01:00:00 |         1 |    15
 2013-01-20 01:00:00 |         2 |    25
 2013-01-20 01:00:00 |         3 |    19
 2013-01-20 01:00:00 |         4 |    10
 2013-01-20 01:00:00 |         5 |    12
 2013-01-20 01:00:00 |         6 |    13 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:31:12.303

除了在 fk_id_busqueda 列上创建索引之外，这应该会减少执行时间：

```
SELECT     
    date_trunc('minute', fecha) - 
    (extract(minute from fecha)::integer % 5) * interval '1 minute' as momento
    ,count(fecha) AS cuenta
FROM   table1
WHERE fk_id_busqueda=$id_busqueda 
GROUP  BY 1
ORDER  BY 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T21:19:57.110

我希望这个功能能完成任务。

```
create or replace function myfunc(id_busqueda integer)
returns table (momento timestamp, min int, cuenta int)
language plpgsql as $$
declare
    t record;
    momento timestamp;
    imomento timestamp;
    mins integer;
    imins integer;
    was boolean;
begin
    was := false;
    cuenta := 1;
    for t in 
        select fecha 
        from table1 
        where fk_id_busqueda = id_busqueda
        order by fecha
    loop
        momento := date_trunc('hour', t.fecha);
        mins := extract(minute FROM t.fecha)::int / 5;
        if imins = mins and imomento = momento then
            cuenta := cuenta+ 1;
        else
            if was then
                return query select imomento, imins, cuenta;
            end if;
            cuenta := 1;
            imins := mins;
            imomento := momento;
            was := true;
        end if;
    end loop;
    if was then
        return query select imomento, imins, cuenta;
    end if;
end; $$; 
```

# python - 使用 PIL 调整 png 图像的大小会失去透明度

> ID：14634014
> 
> 赞同：5
> 
> 时间：2013-01-31T19:53:48.020
> 
> 标签：python, python-imaging-library

我使用这种方法来调整 png 图像的大小：

[将 PNG 转换为预乘 alpha 的方法](https://stackoverflow.com/questions/6591361/method-for-converting-pngs-to-premultiplied-alpha/6882161#6882161)

但是这个图像仍然失去了透明度：

```
import Image, numpy

def resize(filename, img,height, width):
    if filename.endswith(".png"):
        img = img.convert('RGBA')
        premult = numpy.fromstring(img.tostring(), dtype=numpy.uint8)
        alphaLayer = premult[3::4] / 255.0
        premult[::4] *= alphaLayer
        premult[1::4] *= alphaLayer
        premult[2::4] *= alphaLayer
        img = Image.fromstring("RGBA", img.size, premult.tostring())
    img = img.resize((height,width), Image.ANTIALIAS)
    return img 
```

从

![http://i.stack.imgur.com/oPV5q.png](../Images/1e67b3bac2efa874710d31a1e4be7cac.png) 到 ![http://i.stack.imgur.com/jzmT9.png](../Images/852ad24b8aa47bae2ef7d0db452bde65.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-01-11T17:03:04.307

这是一个更复杂的调整大小（保持透明度）的功能：它允许您仅使用新的宽度值、新的宽度和高度值或参考文件来获取新的大小。您也可以更改重采样方法：

```
## PngResizeTransparency.py
#
## Resize PNG image by keeping the transparency
## thanks to https://stackoverflow.com/users/1453719/nicolas-barbey
#
## Use:
##   - using a reference file to get new sizes:
#        PNG_ResizeKeepTransparency(SourceFile, ResizedFile, RefFile ='YourRefFile.png')
##   - using only the resized width:
#        PNG_ResizeKeepTransparency(SourceFile, ResizedFile, new_width)
##   - using resized width and hight:
#        PNG_ResizeKeepTransparency(SourceFile, ResizedFile, new_width, new_height)
##   - using resample mode: add param resample="NEAREST"/"BILINEAR"/"BICUBIC"/"ANTIALIAS"

from PIL import Image

def PNG_ResizeKeepTransparency(SourceFile, ResizedFile, new_width=0, new_height=0, resample="ANTIALIAS", RefFile =''):
    # needs PIL
    # Inputs:
    #   - SourceFile  = initial PNG file (including the path)
    #   - ResizedFile = resized PNG file (including the path)
    #   - new_width   = resized width in pixels; if you need % plz include it here: [your%] *initial width
    #   - new_height  = resized hight in pixels ; default = 0 = it will be calculated using new_width
    #   - resample = "NEAREST", "BILINEAR", "BICUBIC" and "ANTIALIAS"; default = "ANTIALIAS"
    #   - RefFile  = reference file to get the size for resize; default = ''

    img = Image.open(SourceFile) # open PNG image path and name
    img = img.convert("RGBA")    # convert to RGBA channels
    width, height = img.size     # get initial size

    # if there is a reference file to get the new size
    if RefFile != '':
        imgRef = Image.open(RefFile)
        new_width, new_height = imgRef.size
    else:
        # if we use only the new_width to resize in proportion the new_height
        # if you want % of resize please use it into new_width (?% * initial width)
        if new_height == 0:
            new_height = new_width*width/height

    # split image by channels (bands) and resize by channels
    img.load()
    bands = img.split()
    # resample mode
    if resample=="NEAREST":
        resample = Image.NEAREST
    else:
        if resample=="BILINEAR":
            resample = Image.BILINEAR
        else:
            if resample=="BICUBIC":
                resample = Image.BICUBIC
            else:
                if resample=="ANTIALIAS":
                    resample = Image.ANTIALIAS
    bands = [b.resize((new_width, new_height), resample) for b in bands]
    # merge the channels after individual resize
    img = Image.merge('RGBA', bands)
    # save the image
    img.save(ResizedFile)
    return

#######################################################

if __name__ == "__main__":
    sFile = './autumn-png-leaf.png'
    # resize using new width value (new height is calculated by keeping image aspect)
    PNG_ResizeKeepTransparency(sFile, sFile[:-4]+'_resized.png', 400)
    # resize using a reference file to get the new image dimension 
    PNG_ResizeKeepTransparency(sFile, sFile[:-4]+'_resized.png', RefFile = 'autumn-png-leaf_starry-night-van-gogh_fchollet_10.png') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T22:45:37.893

该问题与链接的问题无关，而是您必须修补 PIL 以便它`tRNS`正确读取 PNG 块。PIL 假设这个块有一个值，但是这个显示的图像对调色板中的每个值都有一个透明度描述。处理完之后，解决问题就很简单了：将图像转换为`'LA'`模式并调整大小：

```
import sys
from PIL import Image

img = Image.open(sys.argv[1])
pal = img.getpalette()
width, height = img.size
actual_transp = img.info['actual_transparency'] # XXX This will fail.

result = Image.new('LA', img.size)

im = img.load()
res = result.load()
for x in range(width):
    for y in range(height):
        t = actual_transp[im[x, y]]
        color = pal[im[x, y]]
        res[x, y] = (color, t)

result.resize((64, 64), Image.ANTIALIAS).save(sys.argv[2]) 
```

所以我们从这个![在此处输入图像描述](../Images/b3ae2d397d48d5368a7914e0c87f0eee.png)，到这个：![在此处输入图像描述](../Images/4ae66ff4e2cbf325098825a4b7ceee8e.png)

针对这种特定情况的 PIL 补丁实际上非常简单。打开你的`PIL/PngImagePlugin.py`，转到函数`chunk_tRNS`，输入`if`检查`im_mode == "P"`和随后检查的语句`i >= 0`，然后添加该行`self.im_info["actual_transparency"] = map(ord, s)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T19:24:38.713

我已经解决了这个问题，不再需要来自 mmgp 的漂亮 hack。PIL 现在将正确读取并应用透明度。

[https://github.com/d-schmidt/Pillow/commit/5baa1ac1b8d41fcedce7b12ed1c4a8e87b4851bc](https://github.com/d-schmidt/Pillow/commit/5baa1ac1b8d41fcedce7b12ed1c4a8e87b4851bc)

# java - Java - 将管道分隔的文本\csv 文件转换为 XML

> ID：14634018
> 
> 赞同：1
> 
> 时间：2013-01-31T19:54:06.243
> 
> 标签：java, xml

我想知道是否有一种可接受的方法将管道分隔的文本文件转换为 Java 中的 XML。我要转换的分隔文件格式为：

```
RefNo   |    Location   |   Name  |  Age
123     | North America |  Steve  |  32 
```

我希望将其转换为：

```
<data>
    <RefNo>123</RefNo> 
    <location>North America</location>
    <name> Steve </name>
    <age> 32 </age>
</data> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:01:40.580

这是您问题的一些答案，但首先您应该用逗号替换管道分隔符，因为它是`CSV`to `XML`。

您可以`s.replaceAll("|",",")`在`String`课堂上使用并按照以下说明进行操作：

[使用 JAVA 将 CSV 转换为 XML](https://stackoverflow.com/questions/12120055/conversion-of-csv-to-xml-with-java)

[将 CSV 转换为 XML 文件的 Java lib 或应用程序？](https://stackoverflow.com/questions/123/converting-csv-file-to-xml-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:11:09.557

运行此处给出的 XSLT 转换，或根据需要对其进行调整：

[http://andrewjwelch.com/code/xslt/csv/csv-to-xml_v2.html](http://andrewjwelch.com/code/xslt/csv/csv-to-xml_v2.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T21:31:39.497

我找到了另一种将 CSV 转换为 XML 的方法......

```
import java.io.*;
import java.util.*;
import org.w3c.dom.*;
import javax.xml.parsers.*;
import javax.xml.transform.*;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
public class CSV2XML {
// Protected Properties
    protected DocumentBuilderFactory domFactory = null;
    protected DocumentBuilder domBuilder = null;
// CTOR
    public CSV2XML()
    {
        try
        {
            domFactory = DocumentBuilderFactory.newInstance();
            domBuilder = domFactory.newDocumentBuilder();
        }
        catch(FactoryConfigurationError exp)
        {
            System.err.println(exp.toString());
        }
        catch(ParserConfigurationException exp)
        {
            System.err.println(exp.toString());
        }
        catch(Exception exp)
        {
            System.err.println(exp.toString());
        }
    }
    public int convertFile(String csvFileName, String xmlFileName)
    {
        int rowsCount = -1;
        try
        {
            Document newDoc = domBuilder.newDocument();
// Root element
            Element rootElement = newDoc.createElement("CSV2XML");
            newDoc.appendChild(rootElement);

// Read comma seperated file

            BufferedReader csvReader;
            csvFileName = "C:\\frnds.csv";
            csvReader = new BufferedReader(new FileReader(csvFileName));
            int fieldCount = 0;
            String[] csvFields = null;
            StringTokenizer stringTokenizer = null;
// Assumption: first line in CSV file is column/field  names
// As the column names are used to name the elements in the XML file,
// avoid using spaces/any other characters not suitable   for XML element naming

            String curLine = csvReader.readLine();
            if(curLine != null)
            {
                stringTokenizer = new StringTokenizer(curLine, ",");
                fieldCount = stringTokenizer.countTokens();
                if(fieldCount > 0)
                {
                    csvFields = new String[fieldCount];
                    int i=0;
                    while(stringTokenizer.hasMoreElements())
                        csvFields[i++] =
                                String.valueOf(stringTokenizer.nextElement());
                }
            }
// Now we know the columns, Let's now read data row lines
            while((curLine = csvReader.readLine()) != null)
            {
                stringTokenizer = new StringTokenizer(curLine, ",");
                fieldCount = stringTokenizer.countTokens();
                if(fieldCount > 0)
                {
                    Element rowElement = newDoc.createElement("row");
                    int i=0;
                    while(stringTokenizer.hasMoreElements())
                    {
                        try
                        {
                            String curValue =
                                    String.valueOf(stringTokenizer.nextElement());
                            Element curElement =
                                    newDoc.createElement(csvFields[i++]);
                            curElement.appendChild(newDoc.createTextNode(curValue));
                            rowElement.appendChild(curElement);
                        }
                        catch(Exception exp)
                        {
                        }
                    }
                    rootElement.appendChild(rowElement);
                    rowsCount++;
                }
            }
            csvReader.close();
// Save the document to the disk file
            TransformerFactory tranFactory = TransformerFactory.newInstance();
            Transformer aTransformer = tranFactory.newTransformer();
            Source src = new DOMSource(newDoc);
            xmlFileName = "C:\\stest.xml";
            Result dest = new StreamResult(new File(xmlFileName));
            aTransformer.transform(src, dest);
            rowsCount++;
        }
        catch(IOException exp)
        {
            System.err.println(exp.toString());
        }
        catch(Exception exp)
        {
            System.err.println(exp.toString());
        }
        return rowsCount;
    }
    public static void main(String[] args)
    {
        try
        {
            args = new String[] {"C:\\frnds.csv", "C:\\stest.xml"};
            if(args.length != 2)
            {
                System.out.println("Usage: java CSV2XML <inputCSVFile> <outputXMLFile>");
                return;
            }
        }
        catch(Exception exp)
        {
            System.err.println(exp.toString());
        }
        try
        {
            CSV2XML csvConverter = new CSV2XML();
            int rowsCount = csvConverter.convertFile(args[0], args[1]);
            if(rowsCount >= 0)
            {
                System.out.println("CSV File '" + args[0] + "' successfully converted to XML File '"+ args[1] + "'\n" + "(" + String.valueOf(rowsCount) + " rows)");
            }
            else
            {
                System.out.println("Error while converting input CSV  File '" + args[0] + "' to output XML File '"+ args[1] + "'");
            }
        }
        catch(Exception exp)
        {
            System.err.println(exp.toString());
        }
    }
} 
```

# java - Java 类路径中的重复问题

> ID：14634020
> 
> 赞同：1
> 
> 时间：2013-01-31T19:54:12.050
> 
> 标签：java, classpath

我有一个从 .jar 源导入其所需类的程序。

但是，我还解压缩了上述 .jar 源，以便搜索其文件目录以收集类名以获取同一程序中的列表。

问题是类 ** 在类路径中出现不止一次，这是因为它同时在 bin 和作为库中。我需要这两个元素来实现单独但同样的代码功能。

我发现删除 .jar 源的文件目录可以解决问题，但是我的列表现在是空白的。

有人知道两种方法都可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:47:47.580

根据您在上面的评论中所说的，如果您的包名称以`com.somethingfromsourceforge.*`then 我将更`com.somethingfromsourceforge`改为`com.hopeless`并且应该解决路径问题。试试这个，让我们知道。

# c - 在C中解析网络数据包的正确方法

> ID：14634027
> 
> 赞同：6
> 
> 时间：2013-01-31T19:54:41.870
> 
> 标签：c, network-programming

（如果我不能正确提出问题，请原谅。英语不是我的主要语言。）

我正在尝试解析 SyncE ESMC 数据包。它是以太网慢速协议包。

[方法 1：为了解析这个数据包，我使用了类似于这里](http://www.takatan.net/lxr/source/crypto/signature/ksign-parse.c?v=2.6.18-128.el5#L26)所做的逐字节方法。

方法 2：解析数据包的其他方法是定义一个“结构”来表示整个数据包并访问各个字段以检索特定偏移处的值。然而，在这种方法中，结构填充和对齐可能会出现（我不确定），但在 Linux 上，各种数据包头以结构的形式定义，例如 ip.h 中的 iphdr。IP 数据包（缓冲区）可以类型转换为“iphdr”以检索 ip 标头字段，因此它必须正常工作。

哪种方法更好地解析 C 中的网络数据包？

通过方法 2 解析数据包时，结构填充和对齐是否有任何区别？如果是，Linux 头文件是如何克服这个问题的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:58:59.150

方法 1 最适合可移植性。例如，它允许您安全地避免未对齐的访问。特别是，如果您的机器是 little-endian，这种方法可以让您非常轻松地处理字节交换。

方法 2 有时很方便，而且通常可以更快地编写代码。如果结构填充妨碍您，您的编译器可能会提供一个标志或属性（如`__attribute__((__packed__))`or `#pragma pack`）来解决它。但是，如果您有一台 little-endian 机器，您仍然需要在各处进行字节交换字段。

# heroku-toolbelt - 如何配置 git 以使用代理服务器

> ID：14634030
> 
> 赞同：1
> 
> 时间：2013-01-31T19:54:49.500
> 
> 标签：heroku-toolbelt

有人如何调整heroku 工具带，即git 并使用代理服务器连接到heroku。我正在尝试连接，但它一直告诉我机器主动拒绝它访问。帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-01T13:21:29.617

您可以在 git bash 中使用以下命令设置 Git 代理。为 HTTP 和 HTTPS 代理设置。

```
git config --global http.proxy http://username:password@proxy.server.com:8080
git config --global https.proxy http://username:password@proxy.server.com:8080

//Replace username with your proxy username
//Replace password with your proxy password
//Replace proxy.server.com with the proxy domain URL.
//Replace 8080 with the proxy port no configured on the proxy server. 
```

查看[如何配置 Git 代理](https://itsmycode.com/get-absolute-url-using-javascript/)和[如何取消设置 Git 代理](https://itsmycode.com/get-absolute-url-using-javascript/)以获取更多详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-23T06:31:09.550

如果代理服务器需要身份验证，请按以下格式设置`HTTP_PROXY`和系统环境变量：`HTTPS_PROXY`

HTTP_PROXY = [http://username:password@proxy.server.com:portNumber](http://username:password@proxy.server.com:portNumber)

HTTPS_PROXY = [https://username:password@proxy.server.com:portNumber](https://username:password@proxy.server.com:portNumber)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T10:48:21.870

使用 HTTP_PROXY 环境变量

例如 HTTP_PROXY= [http://localhost:9999](http://localhost:9999)

# c++ - Eclipse C/C++：在可执行项目中使用静态/共享库项目

> ID：14634031
> 
> 赞同：1
> 
> 时间：2013-01-31T19:54:50.817
> 
> 标签：c++, eclipse, shared-libraries, static-libraries

我认为标题几乎达到了目的。我想做的是写一个服务器。事情是这样的：

我想将服务器的可分离部分分成不同的项目。例如，我想将项目“ServerNetworkStuff”和“ServerGameLogicStuff”创建为两个静态或共享库项目。

现在我想创建另一个使用这两个项目作为库的项目“服务器”。

```
Eclipse Projects:
- ServerNetworkStuff (static library)
- ServerGameLogicStuff (shared library)
- Server (using ServerNetworkStuff, ServerGameLogicStuff) 
```

这甚至可能吗？或者是否有任何等效的解决方案不会迫使我重新发明轮子？

谢谢您的帮助！

**编辑：**

*如果我在“项目 > 属性 > C/C++ 常规 > 路径和符号 > 引用”下添加对活动模式的引用，则它不起作用。编译器找不到头文件。如果我添加头文件的路径，我会得到“未定义的引用”错误。*

**部分解决方案：**

*好的，现在可以编译了...但是目前无法执行..

我所做的是首先创建我的项目“服务器”（可执行文件）和*ServerNetwork*（共享库）。添加对 Server 的*ServerNetwork*引用后，还有一些事情要做。

我不得不改变我的包括

```
#include <include/ServerThread.hpp> 
```

至

```
#include "ServerThread.hpp" 
```

不意味着我在项目中使用的任何共享库。只是将它更改为我自己的类的引用。

在我想要使用*ServerNetwork*的项目*服务器*中，我需要添加 -lServerNetwork 和 -fPIC 作为 g++ 的参数。

 *此外，必须将 .so 文件包含的文件夹添加到库路径中（如果您添加特定项目作为参考，Eclipse 应该自动执行此操作）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T16:37:05.560

Eclipse 中的参考仅适用于打开的项目。我发现最快的方法是在系统路径（/usr/local/include 或类似）中添加或符号链接所需的头文件，或者只是添加它的路径，并对库做同样的事情。

如果您不想这样做（这应该是最好的选择），您仍然可以添加包含和库：

*   中的 -I 路径`Project Properties -> C/C++ General -> Path and Symbols -> Includes`，

*   -L 库中的路径`Project Properties -> C/C++ General -> Path and Symbols -> Library Paths`，

*   中的 -l 库`Project Properties -> C/C++ General -> Path and Symbols -> Libraries`。

或手动： 中的 -I 路径`Project Properties -> C/C++ Build -> Settings -> [CGG/C/C++] Compiler -> Includes`和 中的 -L -l 库`Project Properties -> C/C++ Build -> Settings -> C++ Linker -> Libraries`。

## 包容性

现在您可以`#include`使用`<>`或使用`""`语法（将前者保留给系统库是一个很好的做法）。

## 问题

如果您不在默认路径中移动/复制/符号链接库，您应该会遇到执行问题，例如对于 OSX，解决方案是在执行之前导出非默认路径（例如`export DYLD_FALLBACK_LIBRARY_PATH=$DYLD_FALLBACK_LIBRARY_PATH:/non-default/lib/path`对于 OSX）。*

# ruby-on-rails - 独角兽无法加载本地宝石

> ID：14634034
> 
> 赞同：0
> 
> 时间：2013-01-31T19:55:07.633
> 
> 标签：ruby-on-rails, deployment, gem, unicorn

我在 ubuntu 机器上的生产环境中运行我的 rails 应用程序时遇到问题。我已将其配置为在 nginx 前面的独角兽上运行。rails 应用程序使用我自己编写的 gem，它位于 rails 应用程序文件夹的旁边。所以在我的 gemfile 我有 gem 'my_gem', path: '../app'

如果我尝试使用以下命令启动 rails 应用程序：

```
bundle exec unicorn_rails -c /var/www/portlogs/web/config/unicorn.rb -D 
```

我收到以下错误：

```
/root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/activesupport-3.1.0/lib/active_support
/dependencies.rb:240:in `require': no such file to load -- ship_app/readmodels/Search 
(LoadError)

        from /root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/activesupport-3.1.0/lib
/active_support/dependencies.rb:240:in `block in require'
    from /root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/activesupport-3.1.0/lib
/active_support/dependencies.rb:223:in `block in load_dependency'
    from /root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/activesupport-3.1.0/lib
/active_support/dependencies.rb:640:in `new_constants_in'
    from /root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/activesupport-3.1.0/lib
/active_support/dependencies.rb:223:in `load_dependency'
    from /root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/activesupport-3.1.0/lib
/active_support/dependencies.rb:240:in `require'
    from /var/www/portlogs/app/lib/ship_app.rb:43:in `<top (required)>'
    from /root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/bundler-1.2.3/lib/bundler
/runtime.rb:68:in `require'
    from /root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/bundler-1.2.3/lib/bundler
/runtime.rb:68:in `block (2 levels) in require'
    from /root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/bundler-1.2.3/lib/bundler
/runtime.rb:66:in `each'
    from /root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/bundler-1.2.3/lib/bundler
/runtime.rb:66:in `block in require'
    from /root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/bundler-1.2.3/lib/bundler
/runtime.rb:55:in `each'
    from /root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/bundler-1.2.3/lib/bundler
/runtime.rb:55:in `require'
    from /root/.rvm/gems/ruby-1.9.2-p290@portlogs/gems/bundler-1.2.3/lib
/bundler.rb:128:in `require'
    from /var/www/portlogs/web/config/application.rb:12:in `<top (required)>'
    from /var/www/portlogs/web/config/environment.rb:2:in `require'
    from /var/www/portlogs/web/config/environment.rb:2:in `<top (required)>'
    from config.ru:4:in `require'
    from config.ru:4:in `block in <main>' 
```

ship_app/readmodels/Search 文件位于 my_gem 中。但我不明白为什么独角兽无法加载它。如果我在本地机器上使用 rails 运行它，一切正常。

这是我的独角兽配置：

```
APP_PATH = "/var/www/portlogs/web"
# Sample verbose configuration file for Unicorn (not Rack)
#
# This configuration file documents many features of Unicorn
# that may not be needed for some applications. See
# http://unicorn.bogomips.org/examples/unicorn.conf.minimal.rb
# for a much simpler configuration file.
#
# See http://unicorn.bogomips.org/Unicorn/Configurator.html for complete
# documentation.

# Use at least one worker per core if you're on a dedicated server,
# more will usually help for _short_ waits on databases/caches.
worker_processes 4

# Since Unicorn is never exposed to outside clients, it does not need to
# run on the standard HTTP port (80), there is no reason to start Unicorn
# as root unless it's from system init scripts.
# If running the master process as root and the workers as an unprivileged
# user, do this to switch euid/egid in the workers (also chowns logs):
# user "unprivileged_user", "unprivileged_group"

# Help ensure your application will always spawn in the symlinked
# "current" directory that Capistrano sets up.
working_directory APP_PATH

# listen on both a Unix domain socket and a TCP port,
# we use a shorter backlog for quicker failover when busy
listen "/tmp/.sock", :backlog => 64
listen 8080, :tcp_nopush => true

# nuke workers after 30 seconds instead of 60 seconds (the default)
timeout 30

# feel free to point this anywhere accessible on the filesystem
pid APP_PATH + "/tmp/pid/unicorn.pid"

# By default, the Unicorn logger will write to stderr.
# Additionally, ome applications/frameworks log to stderr or stdout,
# so prevent them from going to /dev/null when daemonized here:
stderr_path APP_PATH + "/log/unicorn.stderr.log"
stdout_path APP_PATH + "/log/unicorn.stderr.log"

# combine Ruby 2.0.0dev or REE with "preload_app true" for memory savings
# http://rubyenterpriseedition.com/faq.html#adapt_apps_for_cow
preload_app true
GC.respond_to?(:copy_on_write_friendly=) and
GC.copy_on_write_friendly = true

# Enable this flag to have unicorn test client connections by writing the
# beginning of the HTTP headers before calling the application.  This
# prevents calling the application for connections that have disconnected
# while queued.  This is only guaranteed to detect clients on the same
# host unicorn runs on, and unlikely to detect disconnects even on a
# fast LAN.
check_client_connection false

before_fork do |server, worker|
  # the following is highly recomended for Rails + "preload_app true"
  # as there's no need for the master process to hold a connection
  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.connection.disconnect!

  # The following is only recommended for memory/DB-constrained
  # installations.  It is not needed if your system can house
  # twice as many worker_processes as you have configured.
  #
  # # This allows a new master process to incrementally
  # # phase out the old master process with SIGTTOU to avoid a
  # # thundering herd (especially in the "preload_app false" case)
  # # when doing a transparent upgrade.  The last worker spawned
  # # will then kill off the old master process with a SIGQUIT.
  # old_pid = "#{server.config[:pid]}.oldbin"
  # if old_pid != server.pid
  #   begin
  #     sig = (worker.nr + 1) >= server.worker_processes ? :QUIT : :TTOU
  #     Process.kill(sig, File.read(old_pid).to_i)
  #   rescue Errno::ENOENT, Errno::ESRCH
  #   end
  # end
  #
  # Throttle the master from forking too quickly by sleeping.  Due
  # to the implementation of standard Unix signal handlers, this
  # helps (but does not completely) prevent identical, repeated signals
  # from being lost when the receiving process is busy.
  # sleep 1
end

after_fork do |server, worker|
  # per-process listener ports for debugging/admin/migrations
  # addr = "127.0.0.1:#{9293 + worker.nr}"
  # server.listen(addr, :tries => -1, :delay => 5, :tcp_nopush => true)

  # the following is *required* for Rails + "preload_app true",
  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.establish_connection

  # if preload_app is true, then you may also want to check and
  # restart any other shared sockets/descriptors such as Memcached,
  # and Redis.  TokyoCabinet file handles are safe to reuse
  # between any number of forked children (assuming your kernel
  # correctly implements pread()/pwrite() system calls)
end 
```

任何想法可能是什么问题？

# file - 如何使用 sox 合并多个音频文件

> ID：14634036
> 
> 赞同：7
> 
> 时间：2013-01-31T19:55:13.010
> 
> 标签：file, audio, merge, sox

我使用这个命令使用 sox 将两个音频文件合并为一个：

```
sox end.mp3 -p pad 6 0 | sox - -m start.mp3 output.mp3 
```

我想知道如何仅使用一个命令而不是使用“output.mp3”作为下一个命令的输入来合并 3 或 4 个音频文件，依此类推？

我将非常感谢任何帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T19:59:28.070

您可以通过这样的一次调用来做到这`sox`一点：

```
sox -m in1.mp3 in2.mp3 in3.mp3 out.mp3 
```

如果你想将它与打击垫效果结合起来，你需要更清楚你想要什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-24T21:35:10.590

要结合混合和效果（垫、修剪等），请使用以下内容：

```
sox -m "|sox end.mp3 -p pad 6 0" start.mp3 output.mp3 
```

一般模式是：

```
sox -m input1 input2 ... inputN output 
```

其中 inputX 可以是文件名或引号中的管道

```
"|sox end.mp3 -p pad 6" 
```

# java - 使用正确数量的参数从批处理脚本运行 Java 程序

> ID：14634038
> 
> 赞同：1
> 
> 时间：2013-01-31T19:55:28.977
> 
> 标签：java, windows, batch-file, arguments

我有一个java程序可以接受可变数量的参数。就像是：

```
package other;
public class Main {
    public static void main (String[] args) {
        for (String arg: args) {/* do something */}
    }
} 
```

我想从 .bat 脚本运行这个 java 程序。

```
"%JAVA_HOME%\bin\java" -cp "/some.jar;other.jar" other.Main %1 %2 %3 
```

有了这个，我可以调用我的 .bat 脚本

```
> myscript.bat arg1 arg2 arg3 
```

如果我有 3 个参数，则此方法有效，但可以传递可变数量的参数。如何将它们全部传递给 java 程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:09:35.300

`%*`保存传递给脚本的所有参数。

# ruby-on-rails - 模型中的考拉批量操作

> ID：14634040
> 
> 赞同：1
> 
> 时间：2013-01-31T19:55:30.813
> 
> 标签：ruby-on-rails, ruby, koala

我有一个 Ruby on Rails 应用程序，允许用户使用他们的 Facebook 帐户登录。我希望能够列出用户及其 Facebook 数据。我已经能够做到这一点，但是我必须为每个用户的姓名发送一个请求，并且我想将其作为批处理操作来完成。我怎么能把它放在我的用户模型中？

**用户模型**

```
class User < ActiveRecord::Base
  attr_accessible :uid

  def facebook_name
    Koala::Facebook::API.new.get_object(uid)["name"].to_s
  end
end 
```

**低效代码示例**

```
users = Users.all

users.each do |user|
  puts user.facebook_name
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T20:02:32.490

使用后台任务（例如[https://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)）填充数据库中的数据。

例如

```
class User
 after_create :delayed_populate

 def populate_from_facebook
   self.facebook_name = Koala::Facebook::API.new.get_object(uid)["name"].to_s
 end

 def delayed_populate
   delay.populate_from_facebook
 end 
end 
```

然后，一旦你这样做了，它只是一个常规的模型数据库来遍历它们，因为这些字段将被缓存在你的数据库中。您真的不想在响应另一个 HTTP 请求期间发出 HTTP api 请求。

# objective-c - 为什么 NSNumber 属性在作为 Plist 的一部分在网络上移动时有时会损坏？

> ID：14634041
> 
> 赞同：1
> 
> 时间：2013-01-31T19:55:30.583
> 
> 标签：objective-c, cocoa, network-programming

我有两个不同的应用程序在两个不同的 Mac 上运行：一个客户端和一个服务器。他们使用 HTTP 进行通信。服务器有一个 HTTP 服务器，它发布封装发送的数据的 plist 文件。

例如

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN"
"http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
      <key>sensorName</key>
      <string>external</string>
      <key>temperature</key>
      <real>8.8</real>
  </dict>
</plist> 
```

客户端使用 HTTPRequest 并像这样收集数据：

```
 - (void)connectionDidFinishLoading:(NSURLConnection *)connection
    {
        DDLogVerbose(@"URL Connection succeeded! Received %ld bytes of data",[testReceivedData length]);

        NSString *errorDescription = nil;
        NSPropertyListFormat format;
        NSDictionary *incomingPlist = [NSPropertyListSerialization propertyListFromData:testReceivedData
                                                                     mutabilityOption:NSPropertyListImmutable
                                                                               format:&format
                                                                     errorDescription:&errorDescription];

        if (errorDescription)
        {
            DDLogError(@"Error converting data from web into plist: %@", errorDescription);
            return;
        }

        DDLogVerbose(@"We got a plist from the server: %@", incomingPlist);

        NSString *sensorName;
        switch ([self currentCommandType]) {
            case MFRemoteCommandTypeSensorIndex:
                [self setSensorNames:[incomingPlist objectForKey:@"sensorNames"]];
                break;

            case MFRemoteCommandTypeTemperature:
                sensorName = [incomingPlist objectForKey:@"sensorName"];
                if (!sensorName)
                {
                    DDLogError(@"Could not get sensorname from temperature plist: %@", incomingPlist);
                    break;
                }
                [self didReceiveTemperatureReading:(NSNumber *)[incomingPlist objectForKey:@"temperature"] ForSensorName:sensorName];
                break;

            default:
                DDLogError(@"We should never get here.");
                break;
        }

        [self clearCurrentRequest];
    } 
```

到目前为止一切都很好......两个应用程序之间的数据流动良好，世界上一切都很好。

但是，有时，我无法弄清楚原因是什么，客户会错误地解释温度值。即，而不是将温度 NSNumber 解释为 8.8，而不是将其解释为 8.800000000000001 或 9.2 为 9.199999999999999

有谁知道它为什么会这样做？奇怪的是，当它这样做时似乎没有任何模式......

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:01:27.797

> 将温度 NSNumber 解释为 8.8 它会将其解释为 8.800000000000001 或 9.2 为 9.199999999999999

十进制数字通常没有浮点格式的精确表示，因此如果您将数字读取为浮点数，您很可能会看到它们显示为非常接近但与您期望的不完全相同。如果您需要精确的表示，请查看[NSDecimalNumber](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDecimalNumber_Class/Reference/Reference.html)。

顺便说一句，您应该知道十进制数字并不比二进制表示更精确，除了那些恰好具有精确十进制表示的数字。例如，二进制和十进制表示都不能准确表示 1/3。

# javascript - 如何在 switch 语句后刷新表单

> ID：14634043
> 
> 赞同：0
> 
> 时间：2013-01-31T19:55:33.643
> 
> 标签：javascript, html

所以我有一个有表格的网页。该表单链接到一个 switch 语句，并且根据用户输入的内容，它会返回一些值。但是，返回值后，我想提供一个选项，可以在不刷新页面的情况下返回原始表单。由于 javascript 都是客户端，因此数据在我指定的 div 中呈现，我基本上只是想通过添加一个按钮将该区域刷新回原始表单。在我的 switch 语句中，我尝试了附加 style.display，甚至编写了一个切换函数，但它不起作用。

这是我的 HTML 和 JS：

```
function verifyPres(form) {
var president = form.day.value.toUpperCase();

switch (president) {
    case "GEORGE WASHINGTON":
        document.getElementById("form").remove();
        document.getElementById("id1").textContent=george[0];
        document.getElementById("id2").textContent=george[1];
        document.getElementById("id3").textContent=george[2];
        document.getElementById("id4").textContent=george[3];
        document.getElementById("id5").textContent=george[4];
        document.getElementById("id6").textContent=george[5];
        document.getElementById("id7").textContent=george[6];
        document.getElementById("id8").textContent=george[7];
        break;
    case "JOHN ADAMS":
        document.getElementById("form").remove();
        document.getElementById("id1").textContent=adams[0];
        document.getElementById("id2").textContent=adams[1];
        break;
    default:
        document.getElementById("form").remove();
        document.getElementById("id1").textContent='Sorry, that is not a president!';
} 
```

}

```
<div class="recipe">
                <form id="form" name="myForm">
                    <b>Please enter your favorite US President:</b><br>
                      <div id="input"><input type=TEXT value="" name="day" style="font-family: 'abraham_lincolnregular'; font-size: 1.2em; color: #544841;"></div>
                      <div id="return"></div>
                      <div id="ticket"><input class="button" type=BUTTON value="" name="myButton" onClick='verifyPres(this.form)'></div>
                </form>
                <h3 id="id1"></h3>
                <div id="list">
                    <div id="id2"><p></p></div>
                    <div id="id3"><p></p></div>
                    <div id="id4"><p></p></div>
                </div><!--list-->
                <div id="id5"><p></p></div>
                <div id="id6"><p></p></div>
                <div id="id7"><p></p></div>
                <div id="id8"><p></p></div>
            </div><!--recipe--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:09:32.207

您是否尝试过 .reset()？

```
document.getElementById("form").reset(); 
```

我强烈建议，如果要经常访问和操作这些元素，请将它们缓存到变量中，类似于以下内容：

```
var id1, id2, id3, id4, id5, id6, id7, id8;
id1 = document.getElementById("id1");
id2 = document.getElementById("id2");
// etc... 
```

这样一来，它们就可以随时供您随意操作，而不必每次都强制 DOM 找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:35:35.283

您已使用此行删除了表单

```
 document.getElementById("form").remove(); 
```

删除节点后，您无法将其返回到文档

所以，如果你想重新显示它，你不应该删除它！..所以尽量隐藏它而不是删除它。

您可以通过更改 css 来隐藏...并且确保您可以使用 jQuery >> 里面有非常好的方法。

您的代码将被更改 >> 在 html 代码中添加此刷新按钮

```
 <button onclick="resetForm()">refresh</button> 
```

并且javascript代码将是：

```
 function resetForm()
   {
        document.getElementById("form").style.display="inline";
   }
   function verifyPres(form) {
    var president = form.day.value.toUpperCase();

    switch (president) {
       case "GEORGE WASHINGTON":
       document.getElementById("form").style.display="none";
       document.getElementById("id1").textContent=george[0];
       document.getElementById("id2").textContent=george[1];
       document.getElementById("id3").textContent=george[2];
       document.getElementById("id4").textContent=george[3];
       document.getElementById("id5").textContent=george[4];
       document.getElementById("id6").textContent=george[5];
       document.getElementById("id7").textContent=george[6];
       document.getElementById("id8").textContent=george[7];
       break;
       case "JOHN ADAMS":
       document.getElementById("form").style.display="none";
       document.getElementById("id1").textContent=adams[0];
       document.getElementById("id2").textContent=adams[1];
       break;
       default:
       document.getElementById("form").style.display="none";
       document.getElementById("id1").textContent='Sorry, that is not a president!';
    }
   } 
```

不要忘记清空刷新功能中的#id1,id2,...

# html - 离线数据输入

> ID：14634044
> 
> 赞同：-1
> 
> 时间：2013-01-31T19:55:32.837
> 
> 标签：html, database, offline

这是我的情况：

我的客户有一个非常大的数据库。目前，他们都是手工填写检查表，检查后手动输入数据库。表单大多是复选框，只有很少的文本输入区域。他们希望从纸张迁移到不特定于单一操作系统的平板电脑。在工作现场时，平板电脑通常不会连接到 Internet。

几天来，我一直在绞尽脑汁想解决办法。我们可以通过什么方式记录离线数据输入？有没有办法在到达 Internet 源时同步数据，或者当检查员回到办公室时，我们最好保存当前信息并手动将其输入数据库？

我正在考虑使用 HTML5/JS/PHP，因为它可以轻松地在基于 android、iPad 或 Windows 的平板电脑上使用并且可以交叉兼容。我可能会排除 PHP，因为任何设备都不能在本地运行它。

如果需要更多信息，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:00:43.043

这可能会帮助你交配。 [HTML5 本地数据库入门](http://blog.darkcrimson.com/2010/05/local-databases/)

# list - SML 高阶函数类型？

> ID：14634046
> 
> 赞同：-2
> 
> 时间：2013-01-31T19:55:34.047
> 
> 标签：list, functional-programming, reverse, sml, higher-order-functions

我正在尝试实现一个功能

```
 ziprev : 'a list -> 'b list -> ('a * 'b)list
 - ziprev [1,2,3,4] [10,20,30,40];
 val it = [(1,40),(2,30),(3,20),(4,10)] : (int * int) list 
```

使用库中的 zipWith 和 List.rev。

我对功能是什么感到困惑。试图：

```
fun ziprev xs ys = List.zipWith(List.rev(fn(a,b) => (a,b)::[]),xs,ys); 
```

运算符：'Z 列表操作数：'Y * 'X -> ('Y * 'X) 列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:53:53.957

SML基础库中没有`List.zipWith`，所以我不知道你从哪里得到的；并且 List.rev 不将函数作为参数，而是将列表作为参数

```
- rev;
val it = fn : 'a list -> 'a list 
```

我猜你想要完成的事情`ListPair.zip`是

```
- fun ziprev xs ys = ListPair.zip(xs, rev ys);
val ziprev = fn : 'a list -> 'b list -> ('a * 'b) list

- ziprev [1,2,3,4] [10,20,30,40];
val it = [(1,40),(2,30),(3,20),(4,10)] : (int * int) list 
```

# linux - 多个应用程序使用 SAN 上的目录副本

> ID：14634048
> 
> 赞同：0
> 
> 时间：2013-01-31T19:55:44.180
> 
> 标签：linux, sysadmin, san, endeca

我有一个基于文件的搜索引擎的应用程序 (Endeca)。客户拥有 Linux 100 服务器，全部连接到同一个 SAN（非常快，光纤通道）。目前，这 100 台服务器中的每台都使用相同的文件集。目前，每个服务器都有自己的索引副本（大约 4 个演出，因此总共 400 个演出）。

我想做的是拥有一个目录和该目录的 100 个虚拟副本。如果应用程序需要对该目录中的任何文件进行更改，则只有在那时才开始创建原始文件夹的不同副本。

所以我的想法是：所有 100 人都开始使用同一个目录（但他们每个人都认为他们有自己的副本，并且不知道更好）。随着变化的出现，Linux/SAN 可能会拥有多达 100 个原始副本（现在略有不同）。

这样的事情可能吗？

我正在研究这种方法的原因是减少文件传输时间和磁盘空间。我们只需将 4 gig 索引文件复制一次到 SAN 并创建虚拟副本。如果没有变化，我们只会使用 4 个演出而不是 400 个。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:50:47.827

这里最好的解决方案是在 SAN 级别利用“重复数据删除”功能。不同的供应商可能会以不同的方式称呼它，但这就是我要说的：

[https://communities.netapp.com/community/netapp-blogs/drdedupe/blog/2010/04/07/how-netapp-deduplication-works--a-primer](https://communities.netapp.com/community/netapp-blogs/drdedupe/blog/2010/04/07/how-netapp-deduplication-works--a-primer)

所有 100 个“虚拟”副本都将使用 SAN 上的相同物理磁盘块。如果对文件的特定副本进行了更改，SAN 将只需要分配新块。然后将为此副本分配一个新块，但剩余的 99 个副本将继续使用旧块 - 从而大大减少了磁盘空间需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T19:34:45.357

您使用的是哪个版本的 Endeca？MDEX7 引擎具有集群能力，其中领导者和追随者节点都从同一组文件中读取，因此只要文件是共享的（例如通过 NAS），那么您可以在由同一组支持的不同机器上运行多个引擎的索引文件。只有领导节点才能更改文件以保持更改的一致性，然后集群协调器将在更改准备好“获取”时通知跟随节点。

在 MDEX 6 系列中，如果索引文件是只读的，您可能会获得类似的结果。V6 中的索引通常会在另一台机器上进行，并且一旦新索引准备好，通常会替换目标索引文件集。如果您需要进行部分更新，这对您没有帮助。

Netapp 重复数据删除听起来很有趣，Endeca 从未测试过该功能，所以我不确定您会遇到什么样的问题。

# c++ - #define 的奇怪行为

> ID：14634054
> 
> 赞同：0
> 
> 时间：2013-01-31T19:56:15.823
> 
> 标签：c++, c-preprocessor

我在 C++ 中有这段代码：

```
#include <string>
#include <iostream>

int const foo = 1;
int const bar = 0;

#define foo bar
#define bar foo

int main()
{
  std::cout << foo << std::endl;
  std::cout << bar << std::endl;
} 
```

它产生这个输出：

```
bash-3.2$ ./a.out
1
0 
```

我不明白为什么这是输出。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T20:04:29.700

宏永远不会递归扩展。

当您编写`foo`时，它首先展开为`bar`，然后因为`bar`是一个宏，所以它展开回`foo`。While`foo`是一个宏，因为宏不能递归，所以它不会被扩展。然后评估`foo`产生它的价值：1。

也是如此`bar`。

看到这个： http: [//gcc.gnu.org/onlinedocs/cpp/Self_002dReferential-Macros.html#Self_002dReferential-Macros](http://gcc.gnu.org/onlinedocs/cpp/Self_002dReferential-Macros.html#Self_002dReferential-Macros)

以及*ISO/IEC 14882:2003(E) 16.3.4*标准的重新扫描和进一步替换部分。（更多细节见评论）

# c# - 使用数组循环

> ID：14634058
> 
> 赞同：0
> 
> 时间：2013-01-31T19:56:33.560
> 
> 标签：c#, arrays, winforms, visual-studio-2010

我在 foreach 循环中有这个数组：

```
StreamReader reader = new StreamReader(Txt_OrigemPath.Text);
reader.ReadLine().Skip(1);
string conteudo = reader.ReadLine();            
string[] teste = conteudo.Split(new[] { '*' }, StringSplitOptions.RemoveEmptyEntries);

foreach (string s in teste)
{
    string oi = s;
} 
```

我正在阅读的行包含一些字段，例如`matriculation, id, id_dependent, birthday ...` 我有一个 CheckedListBox，用户根据此选择选择他想要选择的字段以及他想要的顺序，并知道数组中每个值的顺序，例如（我知道第一个是`matriculation`第二个是`id`第三个是`name`），我如何选择一些字段，将其值传递给某个变量并根据选中列表框的顺序对它们进行排序？希望我能清楚。

我试过这个：

```
using (var reader = new StreamReader(Txt_OrigemPath.Text))
            {
                var campos = new List<Campos>();
                reader.ReadLine();
                while (!reader.EndOfStream)
                {
                    string conteudo = reader.ReadLine();
                    string[] array = conteudo.Split(new[] { '*' }, StringSplitOptions.RemoveEmptyEntries);
                    var campo = new Campos
                    {
                        numero_carteira = array[0]
                    };
                    campos.Add(campo);
                }
            } 
```

现在，我如何遍历列表并将其值与用户从列表中选择的那些字段进行比较 `checkedlistbox`？因为如果我再次实例化该类，`{}`它的值将是空的......

```
Person p = new Person();
string hi = p.numero_carteira;  // null..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:24:13.367

`Skip(1)`将跳过返回的第一行字符串的第一个字符`reader.ReadLine()`。由于`reader.ReadLine()`本身跳过第一行，`Skip(1)`完全是多余的。

首先创建一个可以存储您的字段的类

```
public class Person
{
    public string Matriculation { get; set; }
    public string ID { get; set; }
    public string IDDependent { get; set; }
    public string Birthday { get; set; }

    public override string ToString()
    {
        return String.Format("{0} {1} ({2})", ID, Matriculation, Birthday);
    }
} 
```

（为了简单起见，这里我使用了字符串，但您也可以使用 int 和 DateTimes，这需要一些转换。）

现在，创建一个将存储人员的列表

```
var persons = new List<Person>(); 
```

将条目添加到此列表中。拆分字符串时不要删除空条目，**否则**您将丢失字段的位置！

```
using (var reader = new StreamReader(Txt_OrigemPath.Text)) {
    reader.ReadLine();  // Skip first line (if this is what you want to do).
    while (!reader.EndOfStream) {
        string conteudo = reader.ReadLine();
        string[] teste = conteudo.Split('*');
        var person = new Person {
            Matriculation = teste[0],
            ID = teste[1],
            IDDependent = teste[2],
            Birthday = teste[3]
        };
        persons.Add(person);
    }
} 
```

该`using`语句确保`StreamReader`在完成时关闭。

# c# - 创建图像时如何根据给定的高度和宽度自动调整字体大小（例如.jpeg）

> ID：14634060
> 
> 赞同：1
> 
> 时间：2013-01-31T19:56:37.557
> 
> 标签：c#, wpf, graphics, fonts, drawing

我正在编写一个创建图片（.jpeg 文件）的 C# WPF 应用程序。

我想要做的是使用图形库在给定区域内的图片上绘制文本。由于我不知道文本将有多长，我想以这种方式调整字体大小，这样文本将显示出来，而不会在给定区域的太多空间留空，也不会因长文本而被剪切 - 它应该只是降低字体大小，直到文本适合里面。

目前我正在使用 a`System.Drawing.RectangleF`来定义文本的空间，因为它允许我在使用`Graphics.DrawString`.

不幸的是，我找不到准确调整文本大小的有用方法，因此我编写了一个方法来计算字符串的字符并根据我认为可能被截断的字符数来降低大小。这是一种非常丑陋的方法，需要对输出图像进行大量修补和重新检查，但实际上并不准确。

有没有更好的方法来测量和调整 C# 中文本的大小？

或者也许它甚至不需要测量，并且有类似 XAML 的东西`ViewBox`用于绘制我还不知道的图形？

# xamarin.ios - 将 Xcode 故事板导入 MonoTouch 项目

> ID：14634062
> 
> 赞同：2
> 
> 时间：2013-01-31T19:56:42.680
> 
> 标签：xamarin.ios, xcode4.5

我发现了这个：[将 GUI 设计从 xCode 导入到 Monotouch](https://stackoverflow.com/questions/13064416/import-gui-design-from-xcode-to-monotouch)

上面的答案没有涉及到 segue 或任何其他细节。

这是我的问题：

我有一个 Xcode 故事板项目，它编译并运行以展示如何通过 iOS 模拟器从一个视图转到下一个视图。有 9 个视图，我真的不想复制故事板。其他人在 Xcode 中创建了故事板。

我需要在 MonoTouch 中为我的公司编写逻辑。我想我会创建一个 iPhone Storyboard 项目来开始。这个项目给了我一个 MainStoryboard.storyboard 文件，我可以双击它来启动 Xcode。在这之后，我迷路了。我想使用 Xcode 故事板，但不知道如何将 MonoTouch 故事板与 Xcode 故事板合并/导入/替换等。

有人能详细介绍一下我在 MonoTouch 项目中使用 Xcode 故事板需要什么吗？我希望能够在 MonoTouch 中编译和运行故事板，以便开始编码？

先感谢您。

更新：我正在使用 MonoTouch 的试用版，因此 --xcode 命令行选项对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-20T09:39:08.493

这可能不是最好的方法，但这里有：

1.  只需将情节提要添加到项目中
2.  打开故事板
3.  找到每个 ViewController 并在 Identity 部分下剪切 Class 值。
4.  保存故事板
5.  将 Class 值粘贴回并再次保存
6.  Xamarin Studio 应该使用该 ViewController 的所有设计器生成视图控制器
7.  对每个 ViewController 重复

我希望这会有所帮助，如果有更好的方法......

# jquery - 加载一次图像并在不同的地方多次使用它？

> ID：14634063
> 
> 赞同：1
> 
> 时间：2013-01-31T19:56:46.373
> 
> 标签：jquery, variables

这就是我想我想做的事情，但我无法以正确的方式去做。

所以我将一堆图像加载到变量中（想想数字时钟）......

```
var digit0 = "images/d0.png";
var digit1 = "images/d1.png";
var digit2 = "images/d2.png";
var digit3 = "images/d3.png";
var digit4 = "images/d4.png";
var digit5 = "images/d5.png";
var digit6 = "images/d6.png";
var digit7 = "images/d7.png";
var digit8 = "images/d8.png";
var digit9 = "images/d9.png"; 
```

然后在一个循环中，我尝试将这些图像加载到一个 div 中......

```
//SKIP A BUNCH OF TIMER CODE THAT WORKS AND GIVES ME "seconds".

var secondDigit = "digit"+(seconds.toString()).substr(1,1);
//Trying to make a string that refers to the matching variable above.

$("#d1").html('<img src="'+digit0+'" />');        //-- THIS ONE WORKS 
$("#d2").html('<img src="'+secondDigit+'" />');   //-- THIS ONE DOESN'T 
```

编辑：那么使用这种方法，它每次都会访问服务器吗？如果是这样，那不是我想要的。我想保存一次图像，这样我就可以一遍又一遍地使用它们，而不必每次都访问服务器。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T19:58:33.280

您的图像将被浏览器缓存，所以不用担心。

* * *

使用实际数组而不是变量数组 (:P)：

```
var digits [
    "images/d0.png",
    "images/d1.png",
    "images/d2.png",
    "images/d3.png",
    "images/d4.png",
    "images/d5.png",
    "images/d6.png",
    "images/d7.png",
    "images/d8.png",
    "images/d9.png"
];

var secondDigit = seconds.toString().substr(1,1);

$("#d2").html('<img src="' + digits[secondDigit] + '" />'); 
```

# indexeddb - 在 IndexedDB 中检查成功的 .delete()

> ID：14634071
> 
> 赞同：2
> 
> 时间：2013-01-31T19:57:29.060
> 
> 标签：indexeddb

我想知道是否有人想出如何“正确”检查`delete()`IndexedDB 中的功能是否真的成功删除了一条记录。

我找到了这个：

```
// As per spec http://www.w3.org/TR/IndexedDB/#object-store-deletion-operation
// the result of the Object Store Deletion Operation algorithm is
// undefined, so it's not possible to know if some records were actually
// deleted by looking at the request result. 
```

是否只是在删除之前保存记录键，删除记录然后检查记录是否在数据库中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T22:27:11.273

如果触发该对象应该已被删除，则向该方法`.onsuccess`返回的请求对象添加一个处理程序。`.delete`您还可以添加一个`.onerror`处理程序来处理从存储中删除对象时出现问题的情况。

您当然可以保存密钥并随后在`.onsuccess`处理程序中检查存储，但这不是必需的；如果请求成功，它就成功了。

如果您在该事务上执行多个操作，请注意，`.onsuccess`附加到删除请求的处理程序将在项目被删除后立即触发，**但**如果您在同一事务上执行另一个操作并且其他操作失败，则整个事务将被回滚，包括删除。在这种情况下，最好将`.onsuccess`处理程序添加到事务中，这样您就可以确保所有操作都成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T22:24:09.903

您可以使用对象存储上的 get 命令简单地检查对象是否存在，您可以在删除对象时检索对象 ID。

```
function checkIfObjectExist(objectID){
    var request = indexedDB.open(baseName);
    request.onsuccess = function() {
        var db = request.result;
        var transaction = db.transaction(objectStoreName, 'readonly');
        var objectStore = transaction.objectStore(objectStoreName);
        var selectRequest = objectStore.get(objectID);
        selectRequest.onsuccess = function (e) {
            if (e.target.result != null) {
                console.log("Object Exist");
            }else{
                console.log("Object doesn't exist");
            }
        }

    }
} 
```

# android - 通知网络更改活动 - Android

> ID：14634074
> 
> 赞同：3
> 
> 时间：2013-01-31T19:57:56.203
> 
> 标签：android, design-patterns, notifications, observer-pattern, android-networking

一旦建立了与网络的连接，我有一个需要执行操作的活动。我尝试实现观察者模式，但是当我尝试将观察者活动注册到主题时，我得到了 NullPointerException。有什么想法吗？

**网络状态**

```
public class NetworkStatus implements NetworkStatusSubject, Runnable {

    List<NetworkObserver> observerList;
    Context context;
    public NetworkStatus(Context context) {
        this.context = context;
    }

    public static boolean isConnectedToInternet(Context context) {

        boolean haveConnectedWifi = false;
        boolean haveConnectedMobile = false;

        ConnectivityManager cm = (ConnectivityManager)context.getSystemService(context.CONNECTIVITY_SERVICE);
        NetworkInfo[] netInfo = cm.getAllNetworkInfo();
        for (NetworkInfo ni : netInfo) {
            if (ni.getTypeName().equalsIgnoreCase("WIFI"))
                if (ni.isConnected())
                    haveConnectedWifi = true;
            if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
                if (ni.isConnected())
                    haveConnectedMobile = true;
        }
        return haveConnectedWifi || haveConnectedMobile;
    }

    /**
     * Add observer to list
     */
    @Override
    public void addObserver(NetworkObserver o) {
        observerList.add(o);

    }

    /**
     * Remove Observer from list
     */
    @Override
    public void removeObserver(NetworkObserver o) {
        observerList.remove(o);
    }

    @Override
    public void notifyObservers() {
        for(NetworkObserver networkObserver :  observerList) {
            networkObserver.updateStatus();
        }
    }

    @Override
    public void run() {

        while(true) {
            Log.d("NetworkStatus", "Checking Network Status");
            if(isConnectedToInternet(context)){
                notifyObservers();
                Log.d("NetworkStatus", "Network Connection is established");
            }
            else {
                Log.d("NetworkStatus", "Not connected to network");
            }
            try {
                Thread.sleep(10000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }
} 
```

**需要通知的活动**

```
public class OfflineActivity extends Activity implements NetworkObserver {

    public GeoPoint ourLocationGeoPoint;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.offline_mode_layout);

        //Register for network status updates
        NetworkStatus networkStatus = new NetworkStatus(this);
        networkStatus.addObserver(new OfflineActivity());
        networkStatus.run();

        // Acquire a reference to the system Location Manager
        LocationManager locationManager = (LocationManager) this
                .getSystemService(Context.LOCATION_SERVICE);

        // Define a listener that responds to location updates
        LocationListener locationListener = new LocationListener() {

            public void onLocationChanged(Location location) {
                // Called when a new location is found by the network location
                // provider.
                /**
                 * Save Location to geopoint
                 */
                int lat = (int) (location.getLatitude() * 1E6);
                int lng = (int) (location.getLongitude() * 1E6);
                ourLocationGeoPoint = new GeoPoint(lat, lng);
            }

            public void onStatusChanged(String provider, int status,
                    Bundle extras) {
            }

            public void onProviderEnabled(String provider) {
            }

            public void onProviderDisabled(String provider) {
            }
        };
        for (String provider : locationManager.getAllProviders()) {
            // Register the listener with the Location Manager to receive
            // location updates
            locationManager.requestLocationUpdates(provider, 0, 0,
                    locationListener);
        }
    }
    @Override
    public void updateStatus() {

        Log.d("OfflineActivity", "Connection Established, Uploading Points!");

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:04:57.200

`observerList`被声明为实例变量但从未实例化。

实例化它，构造函数是一个很好的地方：

```
public NetworkStatus(Context context) {
        this.context = context;
        observerList = new List <NetworkObserver> ();
    } 
```

# sql-server-2005 - Reporting Services 多个报表文件夹，相同的数据源名称，但需要不同的数据库

> ID：14634076
> 
> 赞同：0
> 
> 时间：2013-01-31T19:58:01.120
> 
> 标签：sql-server-2005, reporting-services, configuration, reportmanager

谢谢，阅读，我将尝试以详细的格式解释我的问题，因为我提出的问题对于我的经验水平来说有点高级。

我将 VS2005 和 SQL Server 2005 与 Reporting Services 一起使用。我所有的报告都是在 VS2005 中构建的。报告部署到报告服务器上名为“Amort”或：Amort_Test 的文件夹，具体取决于我在部署时选择的配置（生产部署到“Amort”，测试部署到“Amort_Test”）。

在 Reporting Services 报表管理器中，我有一个数据源设置调用 AMORT（这是我的 VS2005 报表中的数据源）。数据源的类型为 Microsfot SQL Server，连接字符串为“Data Source=uslibsql310;Initial Catalog=AMORT_P”。

我想做的是让“Amort”文件夹中的报告能够指向我的服务器（uslibsql310）上名为 AMORT_P 的数据库，而“Amort_Test”文件夹中的报告则指向名为 AMORT_T 的数据库。服务器（uslibsql310）。显然，我当前的配置（两个文件夹中的报告都指向同一个数据源）表示报告指向当前指向 AMORT_P 的 AMORT 数据源。

我最初的想法是我可以创建一个新的数据源，将其命名为 AMORT_Test 并将其连接字符串设置为“”Data Source=uslibsql310;Initial Catalog=AMORT_P”。但是，每次我部署报告时，我都必须将 VS2005 中的数据源更改为读取 AMORT_Test 而不是 AMort 然后 deply，这会有点麻烦。

谁能想到一个更用户友好的解决方案？我通常会找到最快的解决方案并采用它，但在这种情况下，我认为必须有一种方法来设置它，以便一个文件夹中的报告知道选择一个数据库，而另一个文件夹中的报告知道选择一个不同的数据库，但我目前的设置不允许这样做。我不确定从哪里开始尝试解决这个问题，因为我有点 RS 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:39:05.120

你快到了，我想。如果我理解正确，这是您当前的设置：

*   一个共享数据源
*   报告都使用该共享数据源作为数据集
*   两种配置：测试和生产，每个都有自己的目标文件夹

您现在可以做的是[将 OverwriteDataSources 设置为**False**](http://msdn.microsoft.com/en-us/library/ms155802%28v=sql.90%29.aspx)。仅需要人工为已部署的报告设置连接字符串：

*   用于报告的初始部署
*   当您*想要/选择*更改已部署报告的连接时

这种体力劳动可以是：

*   更改连接字符串，暂时启用 OverwriteDataSources，然后重新部署
*   转到报表管理器 Web 前端以更改连接字符串

但是，您的默认设置是将报告部署到两种配置，而不必担心将测试报告连接到生产数据库，反之亦然。

# c# - 更改控制面板中的语言设置（例如，从英语到德语）后，C# 程序停止工作

> ID：14634077
> 
> 赞同：0
> 
> 时间：2013-01-31T19:58:05.587
> 
> 标签：c#, .net

我有一个用 C# 开发的软件，它是一个纯语义应用程序。但是，德国用户发现该软件在安装在德国计算机上时会不时停止工作。临时解决办法是在控制面板中更改语言设置，将语言设置从德语更改为英语后，它就可以正常工作了。这只是一种工程软件，该软件与德语或英语没有任何关系。此外，正如 msdn 中其他帖子所建议的那样，我已经多次检查了源代码中的“InitializeComponent()”。“InitializeComponent()”函数中没有奇怪的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:03:50.287

当您更改语言环境时，您会更改 ','（逗号）和 '.' 的含义。（句号）用于数字时。可能是您试图将包含这些字符的文本解析为数字吗？

您的程序是否尝试使用格式化数字初始化数字字段？

在解析和格式化文本时，您需要确保您的代码对用户的文化敏感。`InvariantCulture`在读取存储到文件或通过网络发送的数据时，您还需要确保使用一致的文化（例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:14:58.800

如果您使用的是 .NET Framework 4.5，您可能有兴趣了解[CultureInfo.DefaultThreadCurrentCulture 属性](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.defaultthreadcurrentculture%28v=vs.110%29.aspx)。

> 在 .NET Framework 4 及以前的版本中，默认情况下，所有线程的区域性都设置为 Windows 系统区域性。对于当前文化与默认系统文化不同的应用程序，这种行为通常是不可取的。

页面上的示例及其解释可能对您的问题很有帮助。

此外，作为旁注，`try{...}catch{...}`总是欢迎使用块。

# java - ASM 字节码库中用于确定操作码性质的实用方法？

> ID：14634081
> 
> 赞同：0
> 
> 时间：2013-01-31T19:58:43.387
> 
> 标签：java, java-bytecode-asm, bytecode-manipulation

ASM 中是否有任何 utils 类允许我从操作码推断指令是某种存储、加载还是其他？

例如，考虑以下代码（来自 ASM）

```
/**
 * Visits a zero operand instruction.
 *
 * @param opcode the opcode of the instruction to be visited. This opcode is
 *        either NOP, ACONST_NULL, ICONST_M1, ICONST_0, ICONST_1, ICONST_2,
 *        ICONST_3, ICONST_4, ICONST_5, LCONST_0, LCONST_1, FCONST_0,
 *        FCONST_1, FCONST_2, DCONST_0, DCONST_1, IALOAD, LALOAD, FALOAD,
 *        DALOAD, AALOAD, BALOAD, CALOAD, SALOAD, IASTORE, LASTORE, FASTORE,
 *        DASTORE, AASTORE, BASTORE, CASTORE, SASTORE, POP, POP2, DUP,
 *        DUP_X1, DUP_X2, DUP2, DUP2_X1, DUP2_X2, SWAP, IADD, LADD, FADD,
 *        DADD, ISUB, LSUB, FSUB, DSUB, IMUL, LMUL, FMUL, DMUL, IDIV, LDIV,
 *        FDIV, DDIV, IREM, LREM, FREM, DREM, INEG, LNEG, FNEG, DNEG, ISHL,
 *        LSHL, ISHR, LSHR, IUSHR, LUSHR, IAND, LAND, IOR, LOR, IXOR, LXOR,
 *        I2L, I2F, I2D, L2I, L2F, L2D, F2I, F2L, F2D, D2I, D2L, D2F, I2B,
 *        I2C, I2S, LCMP, FCMPL, FCMPG, DCMPL, DCMPG, IRETURN, LRETURN,
 *        FRETURN, DRETURN, ARETURN, RETURN, ARRAYLENGTH, ATHROW,
 *        MONITORENTER, or MONITOREXIT.
 */
public void visitInsn(int opcode) {
    if (mv != null) {
        mv.visitInsn(opcode);
    }
} 
```

使用 Utils.isConst(opcode) 或 Utils.isLoad(opcode) 或 Utils.isStore(opcode) 等方法会很方便。

ASM中有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:07:36.297

看看[`InstructionAdapter`](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/commons/InstructionAdapter.html)。它将操作码转换为更粗粒度的方法调用。

# c# - 如何在使用 MEF 的插件 DLL 的元数据中包含图像？

> ID：14634082
> 
> 赞同：5
> 
> 时间：2013-01-31T19:58:45.430
> 
> 标签：c#, image, plugins, metadata, mef

C# .NET 4.0 WinForms

我从[本教程](http://devlicio.us/blogs/derik_whittaker/archive/2010/03/06/providing-metadata-to-you-mef-exports.aspx)开始实现 MEF 示例代码，该代码描述了为元数据创建自定义 ExportAttribute 属性。一切都很顺利，直到我尝试将资源文件中的图像包含在元数据中。目标是提取每个插件 DLL 的标题、描述和图标作为元数据，用于在主程序中构建插件菜单。

我现在得到编译错误：

> “属性参数必须是属性参数类型的常量表达式、typeof 表达式或数组创建表达式”

所以现在我有一个问题，需要弄清楚：

**1）如何在属性中包含图像？**

或者

**2) 如何在不使用属性的情况下在 MEF 中包含元数据？**

这是我正在使用的代码：

在合同类中：

```
// Metadata contract interface
public interface IPlugInMetadata
{
    string PlugInTitle { get; }
    string PlugInDescription { get; }
    Image PlugInIcon { get; }
}

// Plug-In contract interface
public interface IPlugIn
{
    void StartPlugIn(object systemObject);
    void StopPlugin();
} 
```

插件 DLL 中的自定义属性：

```
[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public class PluginMetadataAttribute : ExportAttribute
{
    public string title { get; set; }
    public string description { get; set; }
    public Image icon { get; set; }

    public PluginMetadataAttribute(string plugInTitle, string plugInDescription, Image plugInIcon) 
        : base(typeof(IPlugInMetadata))
    {
        title = plugInTitle;
        description = plugInDescription;
        icon = plugInIcon;
    }
} 
```

最后，插件 DLL 中的 Program 类：

```
[Export(typeof(IPlugIn))]
[PluginMetadata(ResourceFile.PlugInTitle, ResourceFile.PlugInDescription, ResourceFile.PlugInIcon24)]
public class Program : IPlugIn
{
    public void StartPlugIn(object systemObject)
    {
        Console.WriteLine("Start Plug-In: " + ResourceFile.PlugInTitle);
    }

    public void StopPlugin()
    {
        Console.WriteLine("Stop Plug-In: " + ResourceFile.PlugInTitle);
    }
} 
```

该行正在产生错误。

```
[PluginMetadata(ResourceFile.PlugInTitle, ResourceFile.PlugInDescription, ResourceFile.PlugInIcon24)] 
```

**显然 ResourceFile 不被认为是一个常量，但是我怎样才能将图像用作元数据，或者这是不可能的？** （请注意，图像设置为“嵌入 .resx”）

感谢您的任何帮助或建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T23:51:19.477

找到了解决方案：

好的，据我所知，您不能在 MEF 元数据中使用图像或图标。但是，您可以为 DLL 文件分配一个图标，就像您可以为 EXE 文件分配一个图标一样。然后可以使用 .NET 的 Icon 类型中内置的静态方法读取图标：

```
Icon MyDLLIcon = Icon.ExtractAssociatedIcon(DLLFilePath); 
```

我仍然不确定为什么可以从资源文件中返回字符串作为 MEF 元数据，而不是嵌入的图标或图像。

由于几天来我一直在尝试拼凑一个提供带有图标的插件菜单的功能示例程序，因此我想我会发布代码以防它对其他人有所帮助。

* * *

这是一个功能齐全的示例项目，具有以下功能：

*   旨在成为具有 5 个项目（MainProgram、ContractInterfaces、PlugInA、PlugInB、PlugInC）的单一解决方案

*   Post Build Events 将自动将每个项目中的 DLL 复制到一个通用的“插件”文件夹中

*   MainProgram (WinForm) 项目将构建可用 DLL 插件的目录，并使用每个插件的图标和元数据标题填充 ListView

*   双击 ListView 项将实例化插件（利用延迟实例化），然后启动它。

*   每个插件在启动时都会收到对主窗体的引用，创建一个新的文本框，并将其发布到主窗体以证明它已运行并可以访问 GUI。

*   所选插件的标题、描述和版本元数据值将打印到控制台窗口

* * *

我为每个 DLL 分配了一个不同的图标（来自旧的 Visual Studio 6 Common Graphics Misc 文件夹）

![截屏](../Images/e3772b1e25badad13e21eb5e412decfa.png)

从 DLL 插件中提取图标以创建 ListView，并且一旦启动（在双击 ListView 中的每个插件项之后），DLL 就会创建文本框并将其发布到 GUI。

* * *

将以下代码添加到名为“MainProgram”的全新 C# WinForm 项目中（我使用的是 VS 2010）：

出于某种原因，代码示例解析器不喜欢 Using 语句，所以这里将它们作为要点：

*   使用系统；
*   使用 System.Collections.Generic；
*   使用 System.ComponentModel.Composition；
*   使用 System.ComponentModel.Composition.Hosting；
*   使用 System.Drawing；
*   使用 System.IO；
*   使用 System.Windows.Forms；
*   使用合同接口；
*   （命名空间）主程序

* * *

```
public partial class Form1 : Form
{
    // Prerequisites to run:
    //      1)  Project, Add Reference, Projects, ContractInterface
    //      2)  Project, Add Reference, .NET, System.ComponentModel.Composition

    [ImportMany(typeof(IPlugIn))]
    private IEnumerable<Lazy<IPlugIn, IPlugInMetadata>> LoadedPlugIns;

    List<PlugInInfo> AvailablePlugIns = null;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        // Get a list of the available Plug-Ins
        AvailablePlugIns = GetPlugInList();

        // Prepare an ImageList to hold the DLL icons
        ImageList ImgList = new ImageList();
        ImgList.ColorDepth = ColorDepth.Depth32Bit;
        ImgList.ImageSize = new Size(32, 32);

        // Populate ImageList with Plug-In Icons
        foreach (var item in AvailablePlugIns)
        {
            ImgList.Images.Add(item.PlugInIcon.ToBitmap());
        }

        // Assign the ImageList to the ListView
        listView1.LargeImageList = ImgList;

        int imageIndex = 0;

        // Create the ListView items
        foreach (var item in AvailablePlugIns)
        {
            listView1.Items.Add(item.PlugInTitle, imageIndex);
            imageIndex++;
        }

        listView1.MouseDoubleClick += new MouseEventHandler(listView1_MouseDoubleClick);
    }

    void listView1_MouseDoubleClick(object sender, MouseEventArgs e)
    {
        // Get the Plug-In index number 
        int plugInNum = listView1.SelectedItems[0].Index;

        PlugInInfo selectedPlugIn = AvailablePlugIns[plugInNum];

        // Call the StartPlugIn method in the selected Plug-In.
        // Lazy Instantiation will fully load the Assembly here
        selectedPlugIn.PlugIn.StartPlugIn(this);

        Console.WriteLine("Plug-In Title:          {0}", selectedPlugIn.PlugInTitle);
        Console.WriteLine("Plug-In Description:    {0}", selectedPlugIn.PlugInDescription);
        Console.WriteLine("Plug-In Version:        {0}", selectedPlugIn.PlugInVersion);
        Console.WriteLine();
    }

    private List<PlugInInfo> GetPlugInList()
    {
        // Create a List to hold the info for each plug-in
        List<PlugInInfo> plugInList = new List<PlugInInfo>();

        // Set Plug-In folder path to same directory level as Solution
        string plugInFolderPath = System.IO.Path.Combine(Application.StartupPath, @"..\..\..\Plug-Ins");

        // Test if the Plug-In folder exists
        if (!Directory.Exists(plugInFolderPath))
        {
            // Plug-In Folder is missing, so try to create it
            try
            { Directory.CreateDirectory(plugInFolderPath); }
            catch
            { MessageBox.Show("Failed to create Plug-In folder", "Folder Creation Error:", MessageBoxButtons.OK, MessageBoxIcon.Exclamation); }
        }

        try
        {
            // Create a catalog of plug-ins
            var catalog = new DirectoryCatalog(plugInFolderPath, "*.dll");
            AggregateCatalog plugInCatalog = new AggregateCatalog();
            plugInCatalog.Catalogs.Add(catalog);
            CompositionContainer container = new CompositionContainer(plugInCatalog);

            // This line will fetch the metadata from each plug-in and populate LoadedPlugIns
            container.ComposeParts(this);

            // Save each Plug-Ins metadata
            foreach (var plugin in LoadedPlugIns)
            {
                PlugInInfo info = new PlugInInfo();

                info.PlugInTitle = plugin.Metadata.PlugInTitle;
                info.PlugInDescription = plugin.Metadata.PlugInDescription;
                info.PlugInVersion = plugin.Metadata.PlugInVersion;
                info.PlugIn = plugin.Value;

                plugInList.Add(info);
            }

            int index = 0;

            // Extract icons from each Plug-In DLL and store in Plug-In list
            foreach (var filePath in catalog.LoadedFiles)
            {
                plugInList[index].PlugInIcon = Icon.ExtractAssociatedIcon(filePath);
                index++;
            }
        }
        catch (FileNotFoundException fex)
        {
            Console.WriteLine("File not found exception : " + fex.Message);
        }
        catch (CompositionException cex)
        {
            Console.WriteLine("Composition exception : " + cex.Message);
        }
        catch (DirectoryNotFoundException dex)
        {
            Console.WriteLine("Directory not found exception : " + dex.Message);
        }

        return plugInList;
    }
}

public class PlugInInfo
{
    public string PlugInTitle { get; set; }
    public string PlugInDescription { get; set; }
    public string PlugInVersion { get; set; }
    public Icon PlugInIcon { get; set; }
    public IPlugIn PlugIn { get; set; }
} 
```

* * *

现在向主窗体添加一个名为“listView1”的 ListView 控件，并将其保留在窗体的右侧。从插件动态创建的文本框将显示在左侧。

* * *

接下来添加一个名为“ContractInterfaces”的类项目，然后包含以下代码：

*   使用 System.Windows.Forms；
*   （命名空间）ContractInterfaces

* * *

```
// Prerequisites to run:
//      1)  Project, Add Reference, .NET, "System.Windows.Forms"

public interface IPlugIn
{
    void StartPlugIn(Form mainForm);
}

public interface IPlugInMetadata
{
    string PlugInTitle { get; }
    string PlugInDescription { get; }
    string PlugInVersion { get; }
} 
```

* * *

接下来添加一个名为“PlugInA”的类项目，然后包含以下代码：

*   使用系统；
*   使用 System.ComponentModel.Composition；
*   使用 System.Windows.Forms；
*   使用合同接口；
*   （命名空间）PluginA

* * *

```
 // Prerequisites to run:
//      1)  Project, Add Reference, Projects, "ContractInterface"
//      2)  Project, Add Reference, .NET, "System.Windows.Forms"
//      3)  Project, Add Reference, .NET, "System.ComponentModel.Composition"
//      4)  Project, Properties, Build Events, Post-Build event command line:
//          xcopy "$(ProjectDir)$(OutDir)$(TargetFileName)"  "$(SolutionDir)Plug-Ins\" /Y
//      5)  Project, Properties, Build Events, Run the post-build event:, Always
//      6)  Project, Properties, Application, Icon and manifest, [Select an icon]

[Export(typeof(IPlugIn))]
[PluginMetadata]
public class Program : IPlugIn
{
    private Form MainForm;

    public void StartPlugIn(Form mainForm)
    {
        MainForm = mainForm;

        // Place a TextBox on the Main Form
        TextBox textBox = new TextBox();
        textBox.Text = "PlugInA";
        MainForm.Controls.Add(textBox);
        textBox.Width = 65;
        textBox.Height = 20;
        textBox.Top = 0;
        textBox.Left = 0;
    }
}

// Create a custom strong-typed Metadata Attribute for MEF
[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public class PluginMetadataAttribute : ExportAttribute
{
    public string PlugInTitle { get; set; }
    public string PlugInDescription { get; set; }
    public object PlugInVersion { get; set; }

    public PluginMetadataAttribute()
        : base(typeof(IPlugInMetadata))
    {
        PlugInTitle = "Plug-In A";
        PlugInDescription = "This is Plug-In A";
        PlugInVersion = "1.0.0.0";
    }
} 
```

* * *

接下来添加一个名为“PlugInB”的类项目，然后包含以下代码：

*   使用系统；
*   使用 System.ComponentModel.Composition；
*   使用 System.Windows.Forms；
*   使用合同接口；
*   （命名空间）PluginB

* * *

```
// Prerequisites to run:
//      1)  Project, Add Reference, Projects, "ContractInterface"
//      2)  Project, Add Reference, .NET, "System.Windows.Forms"
//      3)  Project, Add Reference, .NET, "System.ComponentModel.Composition"
//      4)  Project, Properties, Build Events, Post-Build event command line:
//          xcopy "$(ProjectDir)$(OutDir)$(TargetFileName)"  "$(SolutionDir)Plug-Ins\" /Y
//      5)  Project, Properties, Build Events, Run the post-build event:, Always
//      6)  Project, Properties, Application, Icon and manifest, [Select an icon]

[Export(typeof(IPlugIn))]
[PluginMetadata]
public class Program : IPlugIn
{
    private Form MainForm;

    public void StartPlugIn(Form mainForm)
    {
        MainForm = mainForm;

        // Place a TextBox on the Main Form
        TextBox textBox = new TextBox();
        textBox.Text = "PlugInB";
        MainForm.Controls.Add(textBox);
        textBox.Width = 65;
        textBox.Height = 20;
        textBox.Top = 30;
        textBox.Left = 0;
    }
}

// Create a custom strong-typed Metadata Attribute for MEF
[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public class PluginMetadataAttribute : ExportAttribute
{
    public string PlugInTitle { get; set; }
    public string PlugInDescription { get; set; }
    public object PlugInVersion { get; set; }

    public PluginMetadataAttribute()
        : base(typeof(IPlugInMetadata))
    {
        PlugInTitle = "Plug-In B";
        PlugInDescription = "This is Plug-In B";
        PlugInVersion = "1.0.0.1";
    }
} 
```

* * *

接下来添加一个名为“PlugInC”的类项目，然后包含以下代码：

*   使用系统；
*   使用 System.ComponentModel.Composition；
*   使用 System.Windows.Forms；
*   使用合同接口；
*   （命名空间）插件

* * *

```
// Prerequisites to run:
//      1)  Project, Add Reference, Projects, "ContractInterface"
//      2)  Project, Add Reference, .NET, "System.Windows.Forms"
//      3)  Project, Add Reference, .NET, "System.ComponentModel.Composition"
//      4)  Project, Properties, Build Events, Post-Build event command line:
//          xcopy "$(ProjectDir)$(OutDir)$(TargetFileName)"  "$(SolutionDir)Plug-Ins\" /Y
//      5)  Project, Properties, Build Events, Run the post-build event:, Always
//      6)  Project, Properties, Application, Icon and manifest, [Select an icon]

[Export(typeof(IPlugIn))]
[PluginMetadata]
public class Program : IPlugIn
{
    private Form MainForm;

    public void StartPlugIn(Form mainForm)
    {
        MainForm = mainForm;

        // Place a TextBox on the Main Form
        TextBox textBox = new TextBox();
        textBox.Text = "PlugInC";
        MainForm.Controls.Add(textBox);
        textBox.Width = 65;
        textBox.Height = 20;
        textBox.Top = 60;
        textBox.Left = 0;
    }
}

// Create a custom strong-typed Metadata Attribute for MEF
[MetadataAttribute]
[AttributeUsage(AttributeTargets.Class, AllowMultiple = false)]
public class PluginMetadataAttribute : ExportAttribute
{
    public string PlugInTitle { get; set; }
    public string PlugInDescription { get; set; }
    public object PlugInVersion { get; set; }

    public PluginMetadataAttribute()
        : base(typeof(IPlugInMetadata))
    {
        PlugInTitle = "Plug-In C";
        PlugInDescription = "This is Plug-In C";
        PlugInVersion = "1.0.0.2";
    }
} 
```

* * *

解决方案应如下所示：

![解决方案](../Images/a4d129a4600482a1ec84a1f67b9df809.png)

* * *

右键单击解决方案，然后选择“项目依赖项...”。设置依赖项如下：

*   MainProgram - 取决于 - ContractInterface
*   PlugInA - 取决于 - ContractInterface
*   PlugInB - 取决于 - ContractInterface
*   PlugInC - 取决于 - ContractInterface
*   ContractInterface - 取决于 - [无]

右键单击解决方案，然后选择“项目构建顺序...”。构建顺序应如下所示：

1.  合同界面
2.  插件A
3.  插件B
4.  插件
5.  主程序

构建并运行程序。您应该会看到 3 个 DLL 文件已复制到与解决方案文件 (*.sln) 位于同一目录级别的新“插件”文件夹中。如果没有，请检查项目构建顺序、依赖关系，以及您是否根据上面插件代码中的注释输入了构建后事件。如果文件在那里，那么 ListView 应该在表单中填充插件条目。双击每个 ListView 条目以启动插件。

玩得开心，我希望这对某人有帮助......

# c# - 序列化字典 包含一个列表 ?

> ID：14634083
> 
> 赞同：1
> 
> 时间：2013-01-31T19:58:49.923
> 
> 标签：c#, serialization, xml-serialization, invalidoperationexception

我找到了一个工作得很好的可序列化字典：[http ://www.jankowskimichal.pl/en/2010/10/serializabledictionary/](http://www.jankowskimichal.pl/en/2010/10/serializabledictionary/)

但是，只要字典中的一个对象只是一个字符串列表，我就会遇到异常。.NET 告诉我它不能序列化它：

```
Serialize 'C:\bin\Debug\Settings\Default.xml' : System.InvalidOperationException: There was an error generating the XML document. ---> System.InvalidOperationException: There was an error generating the XML document. ---> System.InvalidOperationException: The type System.Collections.Generic.List`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]] may not be used in this context.
   at System.Xml.Serialization.XmlSerializationWriter.WriteTypedPrimitive(String name, String ns, Object o, Boolean xsiType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterObject.Write1_Object(String n, String ns, Object o, Boolean isNullable, Boolean needType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterObject.Write2_anyType(Object o)
   --- End of inner exception stack trace ---
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o)
   at ShadowBot.Classes.SerializableDictionary`2.WriteXml(XmlWriter writer) in c:\Classes\SerializableDictionary.cs:line 114
   at System.Xml.Serialization.XmlSerializationWriter.WriteSerializable(IXmlSerializable serializable, String name, String ns, Boolean isNullable, Boolean wrapped)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterShadowSettings.Write2_ShadowSettings(String n, String ns, ShadowSettings o, Boolean isNullable, Boolean needType)
   at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterShadowSettings.Write3_ShadowSettings(Object o)
   --- End of inner exception stack trace ---
   at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
   at System.Xml.Serialization.XmlSerializer.Serialize(Stream stream, Object o, XmlSerializerNamespaces namespaces)
   at System.Xml.Serialization.XmlSerializer.Serialize(Stream stream, Object o)
   at Classes.XmlSerializer.Serialize(String Path, Object Object) in c:\Classes\XmlSerializer.cs:line 29 
```

这甚至可能吗？我想要这种能力，只是假设你可以嵌套这样的对象。如果这不可能，有没有办法我可以将字典写入磁盘（不必是 XML）然后重新加载它而无需为此编写自定义包装器？我最初是一名 mac 开发人员，这种类型的序列化非常简单，所以也许我在 .NET 上遗漏了一些东西。

编辑：在尝试 odyss 的示例时，我得到：

```
System.Runtime.Serialization.SerializationException: Type 'System.Collections.Generic.List`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]' with data contract name 'ArrayOfstring:http://schemas.microsoft.com/2003/10/Serialization/Arrays' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:08:05.980

作为替代方案，您可能会有更好的运气`System.Runtime.Serialization.DataContractSerializer`。例子：

```
Dictionary<string, List<string>> dict = new Dictionary<string, List<string>>();
dict.Add("test", new List<string>() { "t", "b" });

StringBuilder xmlString = new StringBuilder();
using (XmlWriter writer = XmlWriter.Create(xmlString))
{
    DataContractSerializer serializer = new DataContractSerializer(typeof(Dictionary<string, List<string>>));
    serializer.WriteObject(writer, dict);
} 
```

这会产生：

```
<?xml version="1.0" encoding="utf-16"?><ArrayOfKeyValueOfstringArrayOfstringty7Ep6D1 xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/2003/10/Serialization/Arrays"><KeyValueOfstringArrayOfstringty7Ep6D1><Key>test</Key><Value><string>t</string><string>b</string></Value></KeyValueOfstringArrayOfstringty7Ep6D1></ArrayOfKeyValueOfstringArrayOfstringty7Ep6D1> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:21:56.243

我在序列化通用列表时遇到了类似的问题。尝试在序列化之前将列表更改为字符串数组，然后在反`string[]`序列化后返回`List<string>`。这很容易做到，并且可以解决您的问题：

```
//List<string> to string[]
string[] sArray = sList.ToArray();

//string[] to List<string>
List<string> sList = sArray.ToList(); 
```

# ruby-on-rails - 基于相关模型属性的条目排序困难

> ID：14634086
> 
> 赞同：0
> 
> 时间：2013-01-31T19:59:04.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我无法实现一项功能，该功能允许用户查看根据属于它的各种属性排序或过滤的问题（我的模型）（即问题是否已回答？每个问题回答了多少等），这将基于`Question`模型的属性，或相关模型的属性`Question`。

我有以下型号：

```
class Question < ActiveRecord::Base    
  belongs_to :course
  belongs_to :user
  has_many :answers, inverse_of: :question
  belongs_to :accepted_answer, class_name: :answer, foreign_key: :accepted_answer_id

  default_scope order: 'questions.created_at DESC'
end

class Answer < ActiveRecord::Base
  belongs_to :user
  belongs_to :question, inverse_of: :answers
  has_many :a_votes

  default_scope order: 'answers.created_at DESC'

  def accepted?
    return false if new_record? 
    question.try( :accepted_answer_id ) == id
    # an alternative is to use question.try( :accepted_answer ) == self
  end
end 
```

我要添加的是**控制器**中的排序或过滤器，例如“仅查看已回答的问题”，其中只有具有`question.accepted_answer == true`. 实现这一目标的最佳方法是什么？是否有任何关于 ActiveRecord 过滤/排序的指南可供我参考以供将来参考？

谢谢！！

## 附录

我正在显示呈现的问题并通过问题父级`_question.html.erb`的功能调用它， （所以，每个人都会提出问题）`show``Group``Group``has_many`

```
class CoursesController < ApplicationController
  def show
    @course = Course.find(params[:id])
    # @questions = @course.questions.all this is the default selection
    @questions = @course.questions.by_answer_count #maybe Im not calling the scope correctly (and sorry if I am making a noob mistake..)
  end
  #There are other methods not shown
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T23:21:03.367

我通过使用连接和分组在父模型上定义范围来实现这种事情。

例如，此范围将按答案数量（降序）对问题进行排序。

```
class Question
  scope :by_answer_count, -> {
    joins(:answers).reorder("count(answers.id) DESC").group(:id)
  }
end 
```

我希望这会有所帮助。

# jquery - mediaelement.js 在多个视频中同步音量

> ID：14634090
> 
> 赞同：0
> 
> 时间：2013-01-31T19:59:10.160
> 
> 标签：jquery, video, html5-video, mediaelement.js

我有一系列页面，每个页面都显示一组视频。一种视频播放列表，如果你愿意的话。为了便于处理每个视频，我在它们上运行 mediaelement.js 插件并将 mediaElement 对象存储在一个数组中，如下所示：

```
var mediaArray = [];
$(".class").each(function (index) {
    $(this).mediaelementplayer({
        success: function (mediaElement, domObject) {
            mediaArray[index] = mediaElement;
        }
    });
}); 
```

这非常适合让我在 mediaelement.js 播放器之外控制各种 mediaElement 对象。因此，例如，我可以让用户单击下一个视频的标题以切换到播放该视频。

我遇到麻烦的地方是当我尝试允许用户更改其中一个视频的音量，然后在他们开始播放下一个视频时保持该音量。

我可以轻松编写这样的函数：

```
 setAllVolume = function (value) {
        for (var i=0, il=mediaArray.length; i<il; i++) {
            mediaArray[i].setVolume(value);
        }
    } 
```

如果我在 mediaelement.js 控件之外有音量控制，那效果很好。（例如，如果我为通用音量控制构建 jQueryUI 滑块。）

我尝试的是为“changevolume”事件添加一个事件侦听器，并`setAllVolume`像这样触发我的函数：

```
$(".class").each(function (index) {
    $(this).mediaelementplayer({
        success: function (mediaElement, domObject) {
            mediaArray[index] = mediaElement;
            mediaElement.addEventListener("volumechange", function () {
                setAllVolume(mediaElement.volume);
            });
}); 
```

正如您可能想象的那样，以这种方式设置音量会导致每个 mediaElement 触发其自己的“volumechange”事件，并`setAllVolume`在级联失败堆中递归调用该函数，这会导致浏览器在一次又一次地搅动整个过程时挂起。

那么，有没有一种方法可以改变一个视频的音量，反映在其他视频中，而不会遇到这种递归？（我应该提到我使用的是 H.264 视频，而这个问题似乎只发生在使用 Flash 插件播放该格式的浏览器中。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:04:35.923

我认为解决我的问题的最快方法是检查在循环遍历数组时存储的 mediaElement 的当前卷：

```
setAllVolume = function (value) {
    for (var i=0, il=mediaArray.length; i<il; i++) {
        if (mediaArray[i].volume !== value) {
            mediaArray[i].setVolume(value);
        }
    }
} 
```

# opencv - OpenCV 突然无法在 OS X 10.8.2 上运行

> ID：14634101
> 
> 赞同：0
> 
> 时间：2013-01-31T20:00:09.613
> 
> 标签：opencv, osx-mountain-lion

我刚刚将我的 Xcode 更新到 4.6，然后我注意到我安装的 OpenCV 无法正常工作。尝试编译使用 OpenCV 的 conde 时出现以下错误：

```
dyld: Symbol not found: __cg_jpeg_resync_to_restart
  Referenced from: /System/Library/Frameworks/ImageIO.framework/Versions/A/ImageIO
  Expected in: /opt/local/lib/libJPEG.dylib
 in /System/Library/Frameworks/ImageIO.framework/Versions/A/ImageIO
Trace/BPT trap: 5 
```

任何人都知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:41:31.573

*[这是](http://player-stage-gazebo.10965.n7.nabble.com/dyld-Symbol-not-found-cg-jpeg-resync-to-restart-td18281.html)您正在寻找的答案。*

设置环境变量`DYLD_FALLBACK_LIBRARY_PATH`。

# php - 如何在终止之间重用会话 cookie (Android)

> ID：14634105
> 
> 赞同：0
> 
> 时间：2013-01-31T20:00:15.607
> 
> 标签：php, javascript, android

我想在服务器后端为 Joomla PHP 和 Javascript 测验模块创建一个会话，这些模块用于 Android 应用程序。

即使 Android 应用程序意外关闭，该会话也应该在应用程序的后续加载时再次可用。

有人可以为此建议的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:08:57.587

如果要在 PHP 中使用，我建议将 PHP 会话 cookie 存储在磁盘上`$_SESSION`。否则，您应该查看可以手动设置到期时间并将它们存储在磁盘中的[cookie](http://php.net/manual/en/features.cookies.php)`Cache/`

这会将应用程序的当前进度存储在会话 cookie 中，但是如果没有登录（或您提供的代码），我可以说的不多。要从其他浏览器/设备访问，您需要登录以识别用户并为他们提供有效会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:03:52.753

1.  在您的数据库中为每部手机创建一个用户帐户，可能由手机的 udid 标识。
2.  在用户完成测验时将数据存储在数据库中
3.  当用户打开应用程序时，根据您的数据库检查他们的 udid 并检索该用户所需的任何数据

# python - 自动化 Python 脚本

> ID：14634108
> 
> 赞同：3
> 
> 时间：2013-01-31T20:00:27.900
> 
> 标签：python, scheduled-tasks, scheduling

我正在手动运行一个以 JSON 格式获取数据的 python 脚本。如何自动化这个脚本以每小时自动运行一次？

我在 Windows7 上工作。我可以使用任务调度程序之类的工具吗？如果可以使用，我需要在批处理文件中放入什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T20:04:49.813

> 我可以使用任务调度程序之类的工具吗？

是的。任何可以运行任意程序的工具都可以运行您的 Python 脚本。选择你最喜欢的那个。

> 如果我可以使用它，我需要在批处理文件中放入什么？

什么批处理文件？任务计划程序接受任何可以运行的东西，带有参数——一个 C 程序、一个 .NET 程序，甚至是一个带有与之关联的默认应用程序的文档。因此，没有理由需要批处理文件。使用`C:\Python33\python.exe`（或任何适当的路径）作为您的可执行文件，并将脚本的路径（及其参数，如果有的话）作为参数。就像从命令行运行脚本一样。

有关一些简单示例，请参阅[使用](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384006%28v=vs.85%29.aspx)MSDN 中的任务计划程序，以及参考[任务计划程序架构元素](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383611%28v=vs.85%29.asp)或[任务计划程序脚本对象](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383607%28v=vs.85%29.aspx)（取决于您是要在 XML 中创建计划，还是通过脚本接口创建计划）。

您想创建一个`ExecAction`with `Path`set to`"C:\Python33\python.exe"`和`Arguments`set to `"C:\MyStuff\myscript.py"`，以及一个`RepetitionPattern`with `Interval`set to `"PT1H"`。你应该能够从那里找出其余的。

正如 sr2222 在评论中指出的那样，您通常最终会频繁地调度任务，并且需要以编程方式控制它们的调度。如果你需要这个，你可以从 Python 控制 Task Scheduler 的脚本接口，或者在 Task Scheduler 之上构建一些东西，或者使用一个不同的工具，它更容易从 Python 获得并且有更多有用的在线示例，等等——但是当你到了这一点，退后一步，看看你是否过度使用操作系统任务调度。（如果您开始添加延迟或调整时间以确保每日`foo1.py`作业在最近的每小时`foo0.py`作业完成 5 分钟后才运行，那么您过度使用了操作系统任务调度——但这并不总是那么明显。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T21:02:25.677

我可以建议[WinAutomation](http://www.winautomation.com)或[AutoMate](http://www.networkautomation.com/automate/automate/)吗？这两个做完全相同的事情，除了 UI 有点不同。我更喜欢 WinAutomation，因为脚本更容易构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-09T13:01:14.970

是的，您可以使用任务计划程序每小时运行脚本。

要通过批处理文件执行 python 脚本，请使用以下代码：

```
start path_to_python_exe path_to_python_file 
```

例子：

```
start C:\Users\harshgoyal\AppData\Local\Continuum\Anaconda3\python.exe %UserProfile%\Documents\test_script.py 
```

如果将 python 设置为 Window 的 Environment Window，那么您可以将语法简化为：

```
start python %UserProfile%\Documents\test_script.py 
```

我通常做的是通过任务计划程序运行批处理文件一次，并在 python 脚本中每小时调用一个线程/计时器。

[类 threading.Timer（间隔，函数，args=None，kwargs=None）](https://docs.python.org/3/library/threading.html)

# php - MySQL 数据无限滚动

> ID：14634109
> 
> 赞同：3
> 
> 时间：2013-01-31T20:00:30.660
> 
> 标签：php, javascript, jquery, mysql, ajax

我遵循了此主题中的帮助：[使用带有 MySQL 数据库的无限滚动](https://stackoverflow.com/questions/7492545/using-infinite-scroll-w-a-mysql-database)

并且已经接近让它正常工作。我有一个使用 jquery masonry 以块显示的页面，其中块由 mysql 数据库中的数据填充。当我滚动到页面末尾时，我成功获得了 loading.gif 图像，但在图像之后立即**显示“没有更多帖子可显示”。**如果这是真的，这就是它应该说的。我最初只在大约 10-15 个帖子中调用了 5 个帖子，所以当我到达页面底部时应该加载其余帖子，但是当我真的没有更多帖子时，我会收到应该出现的消息帖子。

这是我的javascript：

```
var loading = false;
    $(window).scroll(function(){
        if($(window).scrollTop() == $(document).height() - $(window).height()) {   
            var h = $('.blockContainer').height();
            var st = $(window).scrollTop();
            var trigger = h - 250;

              if((st >= 0.2*h) && (!loading) && (h > 500)){
                loading = true;
                $('div#ajaxLoader').html('<img src="images/loading.gif" name="HireStarts Loading" title="HireStarts Loading" />');
                $('div#ajaxLoader').show();
                $.ajax({
                    url: "blocks.php?lastid=" + $(".masonryBlock:last").attr("id"),
                    success: function(html){
                        if(html){
                            $(".blockContainer").append(html);
                            $('div#ajaxLoader').hide();
                        }else{
                            $('div#ajaxLoader').html('<center><b>No more posts to show.</b></center>');
                        }
                    }
                });
            }
        }
    }); 
```

这是块实际所在页面上的 php。该页面最初发布了数据库中的 5 个项目。javascript 获取最后发布的 id 并通过 ajax 将其发送到 blocks.php 脚本，然后使用最后发布的 id 从数据库中获取其余项目。

```
$allPosts = $link->query("/*qc=on*/SELECT * FROM all_posts ORDER BY post_id DESC LIMIT 5");
        while($allRows = mysqli_fetch_assoc($allPosts)) {
            $postID = $link->real_escape_string(intval($allRows['post_id']));
            $isBlog = $link->real_escape_string(intval($allRows['blog']));
            $isJob = $link->real_escape_string(intval($allRows['job']));
            $isVid = $link->real_escape_string(intval($allRows['video']));
            $itemID = $link->real_escape_string(intval($allRows['item_id']));

            if($isBlog === '1') {
                $query = "SELECT * FROM blogs WHERE blog_id = '".$itemID."' ORDER BY blog_id DESC";
                $result = $link->query($query);
                while($blogRow = mysqli_fetch_assoc($result)) {
                    $blogID = $link->real_escape_string($blogRow['blog_id']);
                    $blogTitle = $link->real_escape_string(html_entity_decode($blogRow['blog_title']));
                    $blogDate = $blogRow['pub_date'];
                    $blogPhoto = $link->real_escape_string($blogRow['image']);
                    $blogAuthor = $link->real_escape_string($blowRow['author']);
                    $blogContent = $link->real_escape_string($blogRow['content']);  

                    //clean up the text
                    $blogTitle = stripslashes($blogTitle);
                    $blogContent = html_entity_decode(stripslashes(truncate($blogContent, 150)));           

                    echo "<div class='masonryBlock' id='".$postID."'>";
                    echo "<a href='post.php?id=".$blogID."'>";
                    echo "<div class='imgholder'><img src='uploads/blogs/photos/".$blogPhoto."'></div>";
                    echo "<strong>".$blogTitle."</strong>";
                    echo "<p>".$blogContent."</p>";
                    echo "</a>";
                    echo "</div>";

                }
            } 
```

这是 AJAX 调用的 blocks.php 脚本中的 php：

```
//if there is a query in the URL
if(isset($_GET['lastid'])) {

//get the starting ID from the URL
$startID = $link->real_escape_string(intval($_GET['lastid']));
//make the query, querying 25 fields per run
$result = $link->query("SELECT  * FROM all_posts ORDER BY post_id DESC LIMIT '".$startID."', 25");

$html = '';
//put the table rows into variables
while($allRows = mysqli_fetch_assoc($result)) {
    $postID = $link->real_escape_string(intval($allRows['post_id']));
    $isBlog = $link->real_escape_string(intval($allRows['blog']));
    $isJob = $link->real_escape_string(intval($allRows['job']));
    $isVid = $link->real_escape_string(intval($allRows['video']));
    $itemID = $link->real_escape_string(intval($allRows['item_id']));

    //if the entry is a blog
    if($isBlog === '1') {
        $query = "SELECT * FROM blogs WHERE blog_id = '".$itemID."' ORDER BY blog_id DESC";
        $result = $link->query($query);
        while($blogRow = mysqli_fetch_assoc($result)) {
            $blogID = $link->real_escape_string($blogRow['blog_id']);
            $blogTitle = $link->real_escape_string(html_entity_decode($blogRow['blog_title']));
            $blogDate = $blogRow['pub_date'];
            $blogPhoto = $link->real_escape_string($blogRow['image']);
            $blogAuthor = $link->real_escape_string($blowRow['author']);
            $blogContent = $link->real_escape_string($blogRow['content']);  

            $blogTitle = stripslashes($blogTitle);
            $blogContent = html_entity_decode(stripslashes(truncate($blogContent, 150)));

            $html .="<div class='masonryBlock' id='".$postID."'>
                    <a href='post.php?id=".$blogID."'>
                    <div class='imgholder'><img src='uploads/blogs/photos/".$blogPhoto."'></div>
                    <strong>".$blogTitle."</strong>
                    <p>".$blogContent."</p>
                    </a></div>";

        }
    }
    echo $html;
} 
```

我曾尝试使用 jquery 无限滚动插件，但这样做似乎要困难得多。我不知道这里有什么问题。我添加了警报并进行了测试，并且 javascript 脚本正在完全处理，所以它必须与 blocks.php 一起使用，对吗？

**编辑：**我通过将 sql 查询更改为`SELECT * FROM all_posts WHERE post_id < '".$startID."' ORDER BY post_id DESC LIMIT 15`

这些块现在通过 ajax 加载，但是它们一次只加载一个块。ajax 正在为每个块发送一个请求，并且它们一个接一个地淡入，是否可以使用 jquery masonry 使它们一次全部淡入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:04:30.067

我在另一个答案中看到了您的代码，我建议在 MySql 中使用 LIMIT 功能而不是偏移值。例子：

```
SELECT * FROM all_posts ORDER BY post_id DESC LIMIT '".(((int)$page)*5)."',5 
```

这将只在 AJAX 请求中获取页码并自动获取偏移量。这是一个一致的查询，并且独立于页面上的最后一个结果。在 jQuery 代码中发送类似 page=1 或 page=2 的内容。这可以通过几种不同的方式完成。

首先，计算页面上构建的元素数量，然后除以页面上的数量。这将产生一个页码。

其次，您可以使用 jQuery 并将当前页码绑定到正文：

```
$(body).data('page', 1) 
```

每次加载页面时将其增加一。

这样做确实是更好的方法，因为它对所有操作使用一个查询，并且不需要关于页面上已有数据的大量信息。

唯一需要注意的是，此逻辑要求第一个页面请求为 0，而不是 1。这是因为 1*5 将计算为 5，跳过前 5 行。如果为 0，它将评估为 0*5 并跳过前 0 行（因为 0*5 为 0）。

让我知道你有任何问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:22:37.867

您是否尝试过进行任何调试？

如果您还没有使用，我建议您获取 firebug 插件。

ajax 调用是否返回空？如果是这样，请尝试回显 sql 并验证这是正确的语句并且所有变量都包含预期的信息。考虑到客户端、服务器和数据库之间发生了很多通信，很多事情都可能失败。

作为对您的评论的回应，您在这段代码中添加了 html：

```
if(html){
     $(".blockContainer").append(html);
     $('div#ajaxLoader').hide();
} 
```

我会在 if 语句之前执行**console.log(html)**和**console.log($(".blockContainer").length) 。**

# mysql - 如何编写 sql 查询来检查数据库中是否存在特定表？

> ID：14634110
> 
> 赞同：1
> 
> 时间：2013-01-31T20:00:32.847
> 
> 标签：mysql, sql

我知道如何使用查询，但我从来没有为这个特定的任务使用过。我知道 SHOW TABLES；command .. 如何编写查询来检查 MYSQL 数据库中是否存在特定表。例如，检查表 MEMBERS 是否存在于名为 USERS 的数据库中的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:03:21.163

您可以使用[`INFORMATION_SCHEMA.TABLES`](http://dev.mysql.com/doc/refman/5.0/en/tables-table.html)

```
USE USERS;
SELECT * FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_NAME = 'MEMBERS' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T20:05:00.390

搜索表：

`select * from information_schema.tables where table_name like '%MEMBERS%'`

搜索栏：

`select * from information_schema.columns where table_name like '%COLUMN%'`

# iphone - Key/Value 更新字符串值

> ID：14634111
> 
> 赞同：1
> 
> 时间：2013-01-31T20:00:34.023
> 
> 标签：iphone, ios, objective-c, cocoa-touch, key-value

当我使用下面的代码时，我遇到的问题是 totalScore 仅在调用 secondViewController 中的 viewDidLoad 方法时才会更新。因此，如果我连续按两次 addOne 按钮，则两次检索字符串都是相同的，因此它只会将一个添加到相同的现有值，因为它尚未在 secondViewController 中更新。每次在 firstViewController 中按下 addOne 按钮时，我如何设法更新 secondViewController 中的 totalScore

第一视图控制器：

* * *

```
-(void)saveString:(NSString *)myString {
[[NSUserDefaults standardUserDefaults] setObject:myString forKey:@"firstScore"];
}

-(NSString *)retrieveString {
NSString *recoveredString = [[NSUserDefaults standardUserDefaults]objectForKey:@"totalScore"];
return recoveredString;
}

-(IBAction) addOne {
    NSString *totalScore = [self retrieveString];
    NSInteger totalScoreInt = [totalScore intValue];

    NSInteger newScore = totalScoreInt+1;
    NSString *newScoreString = [NSString stringWithFormat:@"%i", newScore];
    [self saveString:newScoreString]; 
```

}

* * *

第二个视图控制器：

* * *

```
-(void)saveString:(NSString *)myString {
[[NSUserDefaults standardUserDefaults] setObject:myString forKey:@"totalScore"];
}

-(NSString *)retrieveString {
NSString *recoveredString = [[NSUserDefaults     standardUserDefaults]objectForKey:@"firstScore"];
return recoveredString;
}

-(void) viewDidLoad {
    NSString *firstScore = [self retrieveString];
    NSInteger firstScoreInt = [firstScore intValue];

    NSInteger newTotalScore = firstScoreInt+1;
    NSString *newTotalScoreString = [NSString stringWithFormat:@"%i", newTotalScore];
    [self saveString:newTotalScoreString];
 } 
```

我希望我已经解释了可以理解的问题，所以也许有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:47:33.383

如果我理解正确，你在这里犯的错误是因为你的 firstViewController 中的 addOne 函数也在更新总分，但你没有在那里保存总分。因此，在 firstViewController 中的 saveString 函数中，也添加这一行：

```
[[NSUserDefaults standardUserDefaults] setObject:myString forKey:@"totalScore"]; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:11:13.173

您正在使用 2 个不同的分数，从 中获取值`firstScore`，增加它并将其存储到`totalScore`. 检查您要在每个中存储的内容。

这是您的代码失败的原因的示例：

`firstScore`是 1 `totalScore`是什么

然后你`addOne`，它取`firstScore`（1），向它添加一个（2），并存储在 中`totalScore`，这样它就变成了这样：

`firstScore`是 1 `totalScore`是 2

再次读取，`addOne`它读取`firstScore`(1)，添加一 (2) 并再次存储，所以没有真正改变。

# java - Android ListView 不显示超过 8 位数字

> ID：14634113
> 
> 赞同：2
> 
> 时间：2013-01-31T20:00:35.320
> 
> 标签：java, android, database, listview

我正在将警报中的毫秒数存储到数据库中，并且数据库将它们全部正确存储，因为我测试它在单个 TextView 中显示它们并显示它们全部。但是我的 ListView 只显示有 8 个数字的毫秒值，当有 9 个或更多数字时，它不会显示它们。这是我的 ListView ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="250dp" >

    </ListView>

</LinearLayout> 
```

我用于行的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/text1"
        android:layout_width="match_parent"        
        android:gravity="center"
        android:layout_height="45dp" />

</LinearLayout> 
```

我用于填充 ListView 的方法：

```
private void fillData() {
        // Get all of the notes from the database and create the item list
        Cursor c = DatabaseManager.getAllData();
        startManagingCursor(c);

        String[] from = new String[] { DatabaseManager.TABLE_COLUMN_TWO };
        int[] to = new int[] { R.id.text1 };

        // Now create an array adapter and set it to display using our row
        SimpleCursorAdapter notes =
            new SimpleCursorAdapter(this, R.layout.notes_row, c, from, to);
        setListAdapter(notes);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:53:23.920

```
请用以下代码替换 Listview。
它的工作很好。
不要在 android:layout_height 中固定 Listview 的高度
请将您的布局 xml 代码替换为以下 xml。
```

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="match_parent" 
android:layout_height ="match_parent" 
android:orientation="vertical" > 

<ListView 
android:id="@android:id/list" 
android:layout_width="match_parent" 
android:layout_height="match_parent" > 
</ListView> 

</LinearLayout>

```

# c# - SendMessage WM_SETTEXT 到 TextBox 不会触发 TextChanged 事件

> ID：14634120
> 
> 赞同：0
> 
> 时间：2013-01-31T20:01:36.173
> 
> 标签：c#, winapi

我有获取文本框控件句柄并使用 Windows API 更改文本的代码。更新文本时不会触发 TextChanged 事件。

有没有办法使用 Windows API 触发 TextBox.TextChanged 事件？

**[更新]**
我认为事件没有触发的原因是因为文本框句柄是通过 DCOM 接口发送的。该程序是一个用 c# 编写的 National Instruments TestStand shell，并使用 NI TestStand COM 对象来实现核心功能。在 TS 序列文件（一种 TS 脚本语言）中，我为文本框句柄创建了一个对象引用，并在 shell 表单的加载事件中使用 TS api 设置它。之后，我将句柄发送到我的 c# DLL。我使用 SendMessage 来更新文本框，效果很好。问题是 TextChanged 事件没有触发。

我尝试使用 TS 接口发送文本框和 TextChanged 委托，但无法正常工作。我认为通过 TS COM 对象执行此操作存在 AppDomain 问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T20:12:50.453

正如这个程序所证明的，`TextChanged`当控件被发送`WM_SETTEXT`消息时，事件确实会触发。

```
using System;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        const uint WM_SETTEXT = 0x000C;

        [DllImport("user32.dll", CharSet = CharSet.Auto)]
        static extern IntPtr SendMessage(IntPtr hWnd, unit Msg, 
            IntPtr wParam, string lParam);

        public Form1()
        {
            InitializeComponent();
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            MessageBox.Show(textBox1.Text);
        }

        private void button1_Click(object sender, EventArgs e)
        {
            SendMessage(textBox1.Handle, WM_SETTEXT, IntPtr.Zero,
              textBox1.Text + ", " + textBox1.Text);
        }
    }
} 
```

* * *

请注意，答案的原始版本过于复杂，使用`SendMessage`如下：

```
static extern IntPtr SendMessage(IntPtr hWnd, unit Msg, 
  IntPtr wParam, IntPtr lParam); 
```

因此必须执行手动编组：

```
IntPtr text = Marshal.StringToCoTaskMemUni(textBox1.Text + ", "
  + textBox1.Text);
SendMessage(textBox1.Handle, WM_SETTEXT, IntPtr.Zero, text);
Marshal.FreeCoTaskMem(text); 
```

这个问题的评论（[自动转换字符串 DllImport 参数与 Marshal.StringToCoTaskMemUni](https://stackoverflow.com/questions/19616445/automatic-casting-for-string-dllimport-arguments-vs-marshal-stringtocotaskmemuni/19616497?noredirect=1#comment29126007_19616497)）说服我更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T20:54:04.380

我不确定您要更改什么文本，但我在文本框中使用了 PostMessages 和按键（用于数字）的组合，它触发了 TextChangedEvent。

看[this](https://stackoverflow.com/q/19233518/2855937)的方法2 。它基本上将鼠标设置为单击文本框，然后将您想要的文本的按键发送到文本框（逐个字母）。

# .net - 使用命名空间反序列化会产生空项

> ID：14634121
> 
> 赞同：1
> 
> 时间：2013-01-31T20:01:36.180
> 
> 标签：.net, serialization

我必须通过 webrequest 反序列化一些 xml。我的反序列化器不会反序列化消息的内容 - 但它不会发出错误。如果我在第 2 行取出命名空间引用，这一切都有效

下面的xml（编辑以隐藏秘密业务的东西）

```
<?xml version="1.0" encoding="UTF-8"?>
<ns2:thingees xmlns:ns2="http://someurl.com">
   <thing thing-code="KE">
     <thingelement description="primary" thing-address="address24000" sequence="1"/>
     <thingelement description="backup" thing-address="address5000" sequence="2"/>
   </thing>
   <thing thing-code="PI">
     <thingelement description="primary" thing-address="address26000" sequence="1"/>
     <thingelement description="backup" thing-address="address27000" sequence="2"/>
   </thing>
</ns2:thingees> 
```

我的课程如下（重命名事物以隐藏秘密业务）

```
[Serializable]
[XmlRoot("thingees", Namespace = "http://someurl.com")]
public class thingeeInfo
{
    [XmlElementAttribute("thing")]
    public oneThing[] Items  {get; set;}
}

public partial class oneThing
{
    [System.Xml.Serialization.XmlElementAttribute("thing-element")]
    public  ThingElement[] thingelement {get; set;}

    [System.Xml.Serialization.XmlAttributeAttribute("thing-code")]
    public string thingcode  {get; set;}

}

public partial class ThingElement
{

    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string description {get; set; }

    [System.Xml.Serialization.XmlAttributeAttribute("thing-address")]
    public string thingaddress  {get; set; }

    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string sequence {get; set; }
} 
```

如果我 - 取出 xml 根目录中的命名空间引用，这一切都会很好地反序列化。- 取出 XMlRoot 中的命名空间引用

它在没有错误的情况下反序列化，但不填充 Items - 也就是说，“Items”为空。没有“东西”被填充

我应该在 xml 中引用 ns2 吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:07:37.723

好的，通过更多的谷歌搜索得到了我的答案。

看起来您必须将 [XmlType(AnonymousType = true)] 添加到根，并将 [XmlElement(Form = XmlSchemaForm.Unqualified)] 添加到每个属性和/或元素

```
//  [Serializable]                
[Xmltype(AnonymousType = true)]     
[XmlRoot("thingees", Namespace = "http://someurl.com")]
public class thingeeInfo
{
    [XmlElementAttribute("thing", Form = XmlSchemaForm.Unqualified))]    
    public oneThing[] Items  {get; set;}
}

public partial class oneThing
{
    [XmlElementAttribute("thing-element", Form =XmlSchemaForm.Unqualified))] 
    public  ThingElement[] thingelement {get; set;}

    [XmlAttributeAttribute("thing-code", Form = XmlSchemaForm.Unqualified))]   
    public string thingcode  {get; set;}

}

public partial class ThingElement
{
    [XmlAttributeAttribute(Form = XmlSchemaForm.Unqualified))]                       
    public string description {get; set; }   

    [XmlAttributeAttribute("thing-address", Form = XmlSchemaForm.Unqualified))]     
    public string thingaddress  {get; set; }

    [XmlAttributeAttribute(Form = XmlSchemaForm.Unqualified))]                        
    public string sequence {get; set; }                   
} 
```

# java - 如何在实现 selenium webdriver 时将表中的 WebElements 列表存储到列表中？

> ID：14634126
> 
> 赞同：6
> 
> 时间：2013-01-31T20:01:59.347
> 
> 标签：java, list, selenium-webdriver, ui-automation

我正在尝试使用以下表达式将一列元素从表结构中保存到列表中，我需要在该列表上执行单击操作以验证这些按钮。

代码 ：

我有价值`Total_element = 37`。

```
for(int start=0; start <= Total_element; start++)  
{  
    int startn=start+1;  
    System.out.println(start);  
    List <WebElement> Element1 = new ArrayList<WebElement>() ;

    try{  
        Element1.add(Naveen.findElement(By.xpath(".//*[@id='data_grid']/tbody/tr["+startn+"]/td[2]/a/img")));  
    }catch(Throwable t){  
        System.out.println(t);  
    }  
    System.out.println(Element1.get(start));  
    System.out.println("The element" + start + "is :"+ Element1.get(start));  
    Naveen.findElement(By.xpath(Element1.get(start).toString())).click();  
    Naveen.findElement(By.xpath(".//*[@id='action']/a/span/div")).click();  
    System.out.println("The element" + start + "is :"+ Element1);  
    Thread.sleep(5000);  
} 
```

错误 ：

当我尝试从列表中检索元素时，我得到以下输出：

`[[FirefoxDriver: firefox on XP (586a8f1f-f784-4ae7-adf5-5f920dfad8e0)] -> xpath: .//*[@id='data_grid']/tbody/tr[1]/td[2]/a/img]`

进一步说我的操作失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T04:34:01.027

实际上发生了什么意味着，返回类型

```
 driver.findElemnt(By.xpath("xpath")); 
```

是 WebElement。当您将上述代码添加到其中`ArrayList`时，它将添加 WebElement。WebElement 包含有关

`Driver Used`- FirefoxDriver
`Browser session value`- 586a8f1f-f784-4ae7-adf5-5f920dfad8e0
`locator used`- xpath: .//*[@id='data_grid']/tbody/tr[1]/td[2]/a/img]

如果您尝试检索 Web 元素，它将返回所有这些内容。这就是您的情况，您在尝试点击时遇到错误。

您可以`Xpath locator`在`ArrayList`. 它会起作用的。

**尝试这个**

```
 ArrayList<String> Element1 = new ArrayList<String>();
 Element1.add(".//*[@id='data_grid']/tbody/tr["+startn+"]/td[2]/a/img");

 driver.findElement(By.xpath(Element1.get(`startn`))).click(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-19T07:41:39.300

代替：

```
Naveen.findElement(By.xpath(Element1.get(start).toString())).click(); 
```

尝试：

```
Element1.get(start).click(); 
```

# c# - 如何使用 Streamreader 通过 TCP 检索大字符串

> ID：14634129
> 
> 赞同：1
> 
> 时间：2013-01-31T20:02:28.373
> 
> 标签：c#, tcpclient, streamreader

我正在尝试通过 TCP 接收大字符串，我尝试了各种方法，但没有一种方法能像这个方法那样好用（实际上这很简单）。

```
public partial class MyClass : Form
{
    Int64 counter;
    StreamWriter writer;
    StreamReader reader;

    public MyClass(object streamIn, object StreamOut)
    {
        InitializeComponent();
        richTextBox1.BackColor = Color.Black;
        richTextBox1.ForeColor = Color.Gray;

        writer = (StreamWriter)streamIn;
        reader = (StreamReader)StreamOut;

    }

    private void button1_Click(object sender, EventArgs e)
    {
            JObject o = new JObject();
            char[] buffer = new char[1024];
            int count = buffer.Length;

            o.Add("comando", 15);
            o.Add("filename", textBox2.Text);
            o.Add("param", textBox3.Text);

            writer.Write(o.ToString());
            writer.Flush();

            richTextBox1.Text = reader.ReadToEnd();
    }
} 
```

使用它的问题是我必须关闭另一端的流，才能读取它。有什么方法可以使用`reader.ReadToEnd()`，而不必在发送后关闭另一端的流，从而关闭客户端-服务器之间的连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:20:46.570

[查看入门](http://www.networkcomms.net/getting-started/)文章中介绍的网络库[networkcomms.net的基本示例。](http://www.networkcomms.net)虽然这是一个控制台示例，但它允许您发送任意长度的字符串。

您的示例看起来可能是一个 winform 应用程序。如果感兴趣，还有一个[WPF 聊天应用程序示例。](http://www.networkcomms.net/creating-a-wpf-chat-client-server-application/)

# python - python中不支持的操作数类型错误

> ID：14634130
> 
> 赞同：0
> 
> 时间：2013-01-31T20:02:31.103
> 
> 标签：python

```
def get_word_count(wordlist, final):
    regex = []
    count = [[] for x in xrange(len(wordlist))]
    frequency = []
    regex = makeregex(wordlist)
    for i in range(len(final)-1):
        size = os.stat(final[i]).st_size
        fil = open(final[i])
        if(fil):
            print final[i] + " read!"
            data = mmap.mmap(fil.fileno(), size, access=mmap.ACCESS_READ)
            for j in range (len(wordlist)):
                count[j].append(re.findall(regex[j], data))
        fil.close()
    for k in range(len(wordlist)):
        frequency.append(sum(count[k]))
    print frequency 
```

`count`是一个列表列表，每个列表都存储了一些数字。我希望将每个列表的总和作为一个元素存储到一个新列表中`frequency`

当我运行代码时出现错误：

```
Traceback (most recent call last):
File "C:\Users\Animesh\Desktop\_zipf.py", line 52, in <module>
get_word_count(wordlist, final)
File "C:\Users\Animesh\Desktop\_zipf.py", line 32, in get_word_count
frequency.append(sum(count[k]))
TypeError: unsupported operand type(s) for +: 'int' and 'list' 
```

我应该在我的代码中更改什么？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:14:11.187

```
count[j].append(re.findall(regex[j], data)) 
```

您正在将正则表达式找到的单词列表添加到数组`count[j]`中，因此每个`count`元素都是字符串列表的列表，因此调用时会出错`sum(count[k])`。

我认为您想附加到`count[k]`找到的单词数：

```
count[j].append(len(re.findall(regex[j], data))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:31:33.407

如果你想让它更简单，你可以去掉`count = [[] for x in xrange(len(wordlist))]`and `count = []`，然后在 for 循环中让它增加一个临时变量并将其附加到 for 循环之后的计数。

```
size = 0
for j in range (len(wordlist)):
    size += len(re.findall(regex[j], data)) #thanks to CharlesB for this bit
count.append(size) #you could also cut out the middle man and just append frequency 
```

# java - Android多轨音频库？

> ID：14634133
> 
> 赞同：2
> 
> 时间：2013-01-31T20:02:36.027
> 
> 标签：java, android, audio, audio-recording, mixing

嗨，伙计们，我正在尝试在 Android 上构建一个“4 轨”录音应用程序。

我正在寻找一个库或一组类，我可以使用录制音频并将 4 个音频通道混合到一个 2 通道“混音”。

理想情况下，它类似于[javax.sound.sampled 库](http://www.jsresources.org/examples/audio_playing_recording.html)。

低延迟也很重要...

我是 Android 开发新手，只在 web 开发领域工作了一年（c#、jquery、sql、vb）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:05:21.627

您可能必须执行 AudioTrack。这将为您提供最大的控制权。

参考：http: [//developer.android.com/reference/android/media/AudioTrack.html](http://developer.android.com/reference/android/media/AudioTrack.html)

[Android：混合多个 AudioTrack 实例？](https://stackoverflow.com/questions/4425526/android-mixing-multiple-audiotrack-instances)

# c++ - 代码块 wxWidgets 没有这样的文件或目录

> ID：14634137
> 
> 赞同：2
> 
> 时间：2013-01-31T20:03:08.847
> 
> 标签：c++, compiler-construction, wxwidgets, codeblocks

当我尝试使用 wxWidgets 在代码块中编译我的项目时遇到问题，我到处寻找解决问题的方法，但没有什么对我有好处，也没有解释如何解决这个问题......

我在这里发布我的问题图片[http://postimage.org/image/ngejv16d3/](http://postimage.org/image/ngejv16d3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:34:32.770

同意大狼的观点。或者您可以使用 DOS 路径代替（在命令提示符下转到 C:\ 并执行`dir /x`，它将显示`Program Files (x86)`文件夹的 DOS 版本（不带空格）。然后您可以相应地更改您的 wx 路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:33:40.173

您的 wxWidget 位置的完全限定路径被截断，很可能是由于路径中的空格。修复它的两种可能方法，您可以将 wxWidget 安装移动到另一个目录并*删除空格*`""`，或者您可以尝试在传递给编译器时将当前路径用双引号括起来。

# javascript - 使用自定义属性的数组的长度和迭代

> ID：14634138
> 
> 赞同：2
> 
> 时间：2013-01-31T20:03:10.103
> 
> 标签：javascript, arrays

```
var profileDataCalls = [];

profileDataCalls['Profile'] = GetUserAttributesWithDataByGroup;
profileDataCalls['Address'] = GetUserAddresses;
profileDataCalls['Phone'] = GetUserPhoneNumbers;
profileDataCalls['Certs'] = GetUserCertifications;
profileDataCalls['Licenses'] = GetUserLicenses;
profileDataCalls['Notes'] = GetUserNotes; 
```

我的问题是上面的 JavaScript 数组的长度仅为 0。我需要一个可以迭代并保存键（字符串）和值的数组吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T20:06:06.330

你要：

```
var profileDataCalls = {
    'Profile' : GetUserAttributesWithDataByGroup,
    'Address' : GetUserAddresses,
    'Phone' : GetUserPhoneNumbers,
    'Certs' : GetUserCertifications,
    'Licenses' :GetUserLicenses,
    'Notes' : GetUserNotes
}; 
```

然后，您可以访问这些值，例如，`profileDataCalls.profile`或`profileDataCalls[profile]`（检索变量表示的任何值`GetUserAttributesWithDataByGroup`）

要遍历对象，请使用：

```
for (var property in profileDataCalls) {
    if (profileDataCalls.hasOwnProperty(property)) {
        console.log(property + ': ' + profileDataCalls[property));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T20:42:47.183

实际上它也可以这样工作：

```
var profileDataCalls = [{
    Profile: GetUserAttributesWithDataByGroup(),
    Address: GetUserAddresses(),
    Phone: GetUserPhoneNumbers(),
    Certs: GetUserCertifications(),
    Licenses: GetUserLicenses(),
    Notes: GetUserNotes()
}]; 
```

然后，您可以使用例如`profileDataCalls[0].profile`或访问这些值`profileDataCalls[0]["profile"]`。

要遍历对象，您可以使用：

```
for (key in profileDataCalls[0]) {
   console.log(profileDataCalls[0][key]);
} 
```

由于这是一个关联数组，我不明白为什么人们说它在 Javascript 中是不可能的……在 JS 中，一切皆有可能。

更重要的是，您可以像这样轻松扩展此数组：

```
var profileDataCalls = [{
    Profile: GetUserAttributesWithDataByGroup(),
    Address: GetUserAddresses(),
    Phone: GetUserPhoneNumbers(),
    Certs: GetUserCertifications(),
    Licenses:GetUserLicenses(),
    Notes: GetUserNotes()
}{
    Profile: GetUserAttributesWithDataByGroup(),
    Address: GetUserAddresses(),
    Phone: GetUserPhoneNumbers(),
    Certs: GetUserCertifications(),
    Licenses: GetUserLicenses(),
    Notes: GetUserNotes()
}]; 
```

`profileDataCalls[0]["profile"]`并分别使用或访问数组条目`profileDataCalls[1]["profile"]`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T20:07:56.043

每个 Javascript 没有关联数组，您正在做的是向 Array 实例添加属性。IE 做类似的事情

```
profileDataCalls.Notes = GetUserNotes; 
```

所以你不能真正使用长度来知道你的数组有多少属性。

现在，如果您的问题是遍历对象属性，则不需要数组，只需使用对象：

```
profileDataCalls = {} 
```

然后使用 for in 循环遍历键：

```
for(var i in profileDataCalls ){
 // i is a key as a string
 if(profileDataCalls.hasOwnProperty(i)){
 //do something with profileDataCalls[i] value , or i the key
 }
} 
```

如果你有不同的要求然后解释它。

现在棘手的部分是`profileDataCalls[0]="something"`对对象 ({}) 有效，您将创建一个只能通过查找 ( `obj[0]`) 语法使用的属性，因为它不是 javascript 的有效变量名。

其他“疯狂的东西”：

```
o={}
o[0xFFF]="foo"
// gives something like Object {4095:"foo"} in the console 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T20:04:45.673

你想要的是一个对象：

尝试

```
 var profileDataCalls = new Object(); 
```

然后像以前一样引用您的数据。

# excel - ssas 自定义认证

> ID：14634139
> 
> 赞同：3
> 
> 时间：2013-01-31T20:03:12.323
> 
> 标签：excel, authentication, ssas

我试图让 Excel 2010 通过 IIS 7.5 连接到 SSAS 2008 多维数据集。我已经在 IIS 7.5 中设置了 msmdpump，并且可以通过带有 url 的 excel 成功访问多维数据集`http://localhost/Excel/msmdpump.dll`。这适用于 Windows 身份验证和基本身份验证。到目前为止，一切都很好。但是，我需要它来使用自定义身份验证，因为我们可能有数百个需要访问的用户，并且他们的凭据将存储在 SQL 2008 表中。

我尝试创建自定义身份验证 http 模块，但 Excel 不调用它。当用户尝试访问 Excel 中的多维数据集时，是否可以创建一个 http 模块或其他允许我针对自定义数据存储对用户进行身份验证的东西？

PS 在对用户进行身份验证后，我将使用模拟通过 Windows 帐户连接到 SSAS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:44:54.773

我能够让它与 http 模块一起使用。该代码与 Code Plex 上的自定义基本身份验证模块的代码非常相似。关键是我必须将应用程序池设置为集成模式。我将应用程序池设置为在 Windows 帐户下运行。如果用户凭据对 SQL 表没有问题，我在 xmla 的 customdata 属性中插入了一个值，这样我就可以限制对用户可以看到的内容的访问。

# drupal - 阻止同时从两个不同位置登录的用户

> ID：14634145
> 
> 赞同：1
> 
> 时间：2013-01-31T20:03:23.057
> 
> 标签：drupal, drupal-7

如何阻止同时从两个不同位置登录的用户？
有没有可用的模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:36:48.553

会话限制模块有 Drupal 7 的测试版 - [http://drupal.org/project/session_limit](http://drupal.org/project/session_limit)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:10:57.297

[将会话限制](http://drupal.org/project/session_limit)设置为 1 并且 Bob 是你的叔叔...

# javascript - 多条路由主干上的相同事件

> ID：14634153
> 
> 赞同：1
> 
> 时间：2013-01-31T20:03:57.657
> 
> 标签：javascript, backbone.js, methods, routes

我看到一些帖子引用了类似的问题，但并不完全相同。

这是我的路线文件顶部的一个片段。

我想知道我使用的方法是否可以在每条路线上调用全局事件。我使用的事件是非常标准的简单事件，例如清除#items 容器。

如您所见，我在构造函数中调用“all”事件，然后指向路由文件中定义的几个方法。

我的问题是，假设我想在多个屏幕上显示相同的全局事件；比如说，所有的“目录”屏幕。我一直在做一些奇怪的，公认的hacky技巧来获得ou

```
@routeName = route.split(":")[1]

# only substantiate the dropdown on User Catalog screen.
if @routeName is "catalogScreen" or @routeName is "catalogPDFScreen" 
```

我相信你可以想象，这并不理想，也不是特别干净。我只是想找到方法来干燥我的路由器文件以捕获所有这些全局事件，这是我能想到的最好的方法。

```
routes:
  ""                                        : "homeScreen"
  "catalogs"                                : "catalogsScreen"
  "catalogs/:id"                            : "catalogScreen"
  "catalogs/:id/page/:page_id"              : "catalogScreen"
  "catalogs/:id/pdf"                        : "catalogPDFScreen"
  "catalogs/:id/pdf/page/:page_id"          : "catalogPDFScreen"
  "catalogs/:id/category/:category_id"      : "categoryScreen"
  "departments/:id"                         : "departmentScreen"
  "notifications"                           : "notificationsScreen"
  "settings"                                : "settingsScreen"
  "products/:id"                            : "productScreen"
  "catalog/:catalog_id/search/:search_query": "searchCatalogScreen"
  "search/:search_query"                    : "searchScreen"
  "login"                                   : "loginScreen"
  "members/:member_id/catalogs/:catalog_id" : "userCatalogScreen"
  "members/:member_id"                      : "profileScreen"
  ":user_name/:catalog_name"                : ""

#extends router class to allow storing of routes for a history
constructor: (options) ->
  @on "all", @storeRoute
  @on "all", @clearAlerts
  @on "all", @clearScroll
  @on "all", @setSearch
  @on "all", @setNav 
```

提前感谢任何人对此的帮助！我在 Backbone 方面的经验越来越丰富，但我显然还有一些东西要学。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:16:17.533

就路由表本身的 DRY-ness 而言，您可以利用对可选[路由器参数](http://backbonejs.org/#Router-routes)的支持来组合共享同一根但参数不同的路由：

```
"catalogs/:id(/page/:page_id)" 
```

至于将通用操作附加到*某些*路由（但不是全部），有很多选项。我认为最干净的方法是将您的路由器分成多个路由器：`CatalogRouter`用于`catalogs*`url 等。这只有在路由器自然映射到您的应用程序结构时才有意义。

如果您不想拆分路由器，另一种方法是触发路由的自定义事件

```
catalogScreen:(id, pageId) =>
  #normal route handling here
  @trigger "routed:catalog" 
```

在其他地方：

```
@on "routed:catalog", @foo
@on "routed:catalog", @bar
@on "routed:catalog", @baz 
```

或者，如果您的事件处理程序不需要路由参数，您可以使用下划线`compose`作为一些语法糖。

```
@on "routed:catalog", _.compose @foo, @bar, @baz 
```

# c# - linq 一个衬垫从 IDictionary 中删除其键不在另一个字典中的元素

> ID：14634154
> 
> 赞同：0
> 
> 时间：2013-01-31T20:04:01.813
> 
> 标签：c#, linq, .net-4.0, dictionary

我有

```
IDictionary<string,object> d1;
Dictionary<string, object> d2; 
```

我需要从 d1 中删除所有不在 d2 中的条目。

我知道我可以用 for 循环等来做到这一点，但那是上个世纪的事了；我想把它做好。

我得

```
 d1.Where(x => {return d2.ContainsKey(x.key);}); 
```

但不知道下一步该怎么做

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T20:12:04.233

LINQ 并非旨在*修改*现有元素 - 但您始终可以创建一个*新*字典。例如：

```
d1 = d1.Where(x => d2.ContainsKey(x.Key))
       .ToDictionary(x => x.Key, x => x.Value); 
```

或者：

```
d1 = d1.Keys.Intersect(d2.Keys)
       .ToDictionary(key => x.Key, key => d1[key]); 
```

正如其他人所说，如果你更热衷于`Remove`做手术，我会循环。例如：

```
foreach (var key in d1.Keys.Except(d2.Keys).ToList())
{
    d1.Remove(key);
} 
```

（顺便说一句，我不确定您为什么在示例代码中使用语句 lambda。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:13:18.927

LINQ 用于查询。您要*查询*的信息是`d1`不在`d2`. 除了缺少 a `NOT`（除非您不是在您的要求中说“不”）。你已经有了。在实际*做某事*时，最好使用`foreach`循环而不是 LINQ：

```
foreach(var pair in d1.Where(x=> !d2.ContainsKey(x.Key)).ToList())
{
    d1.Remove(pair.Key)
} 
```

请注意，`ToList`需要确保在迭代集合时不会修改集合。

# testing - 使用 NUnit 类别属性在 dll 中运行某些测试？

> ID：14634155
> 
> 赞同：1
> 
> 时间：2013-01-31T20:04:05.050
> 
> 标签：testing, filter, tdd, nunit, categories

如何以编程方式决定在 NUnit 中运行哪些测试？IE

```
CoreExtensions.Host.InitializeService();
TestPackage testPackage = new TestPackage(pathToSomeDLL);

// filter by category here??

SimpleTestRunner simpleTestRunner = new SimpleTestRunner();

// or here?
simpleTestRunner.Load(testPackage);

//... maybe here?
testResult = simpleTestRunner.Run(NullListener.NULL); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:03:20.627

`SimpleTestRunner`您可以为's`Run`方法提供额外的参数，如下所示：

```
var filter = new CategoryFilter("MyCategory");
simpleTestRunner.Run(NullListener.NULL, filter, false, LoggingThreshold.Off); 
```

# android - Android Facebook SDK：如何生成非调试哈希键？

> ID：14634159
> 
> 赞同：9
> 
> 时间：2013-01-31T20:04:20.760
> 
> 标签：android, facebook

所以，我知道如何使用 android 的密码生成调试哈希密钥。我知道对于每个新设备，我都需要生成（并上传到 facebook）新的哈希键。

现在，我还没有准备好实际投入生产，但我想将应用程序分发给一组不想自己生成哈希值的测试人员。我看到对非调试哈希键的引用：

> 接下来，您需要为应用程序生成一个 Key Hash。对于调试，如果使用 Eclipse，您将需要使用 Android 调试密钥生成此密钥哈希。当您准备好发布您的应用程序时，您需要为您的签名密钥生成一个密钥哈希，并在您的签名应用程序运行之前在 Facebook 中更新此值。

[http://www.techrepublic.com/blog/app-builder/integrate-facebook-logins-in-your-android-app/296](http://www.techrepublic.com/blog/app-builder/integrate-facebook-logins-in-your-android-app/296)

你如何生成这个？我以前从未制作过生产（签名）应用程序，这与此有关吗？在完成之前签署我的应用程序是否有不利之处？如果不是，我该怎么做才能让任何设备通过 facebook 连接运行这个应用程序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T20:33:33.130

您可以轻松地生成自己的密钥以在发布模式下签署您的应用程序。有关详细信息，请参阅 Android 文档：[Signing in Release Mode](http://developer.android.com/tools/publishing/app-signing.html#releasemode)。

密钥库生成示例：

```
$ keytool -genkey -v -keystore my-release-key.keystore
  -alias alias_name -keyalg RSA -keysize 2048 -validity 10000 
```

然后像使用调试密钥一样为 Facebook 生成哈希：

```
$ keytool -exportcert -alias alias_name -keystore my-release-key.keystore
  | openssl sha1 -binary | openssl base64 
```

最后与您的测试人员组分享您签名的 apk，仅此而已。

# php - PHP时间表日问题

> ID：14634163
> 
> 赞同：1
> 
> 时间：2013-01-31T20:04:42.830
> 
> 标签：php

我只包含了我的一些时间表脚本（处理日子的部分）

我注意到我的时间表一直运行良好，直到月底（每天都变成星期四），所以我回到了脚本，我相信我的时间表不知道什么时候检测它是否是一个新的月份，所以它继续行动就像一个不存在的计数器 31、32、33（一个月中的某天），这就是为什么它每天都给我一个星期四并说年份是 1970 年。

时间表显示从今天开始的 5 天 - 所以它会显示今天和其他 4 天，例如星期五、星期六、星期日和星期一。

**我的代码如下：**

```
 <?php
    }
    $timein = time();
    $d7 = date("H", $timein);
    $d6 = ($d7 +1) - 4;
    $d1 = date("d", $timein);

    $d2 = date("F", $timein);   
    $d3 = date("Y", $timein);
    $d4 = "$d2 $d3";
    $d5 = $d1 + 4;
    for( $i = $d1; $i <= $d5; $i++ ) {
    $day = strtotime( "{$i} {$d4}" );
    $day = date( "d/m/Y", $day );

    ?>
    <table border="0" cellspacing="0" cellpadding="0" width="20%" style="float: left;">
    <tr><td>
        <div class="square title" style="padding: 3px; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; width: 92%; text-align: center; bottom: 5px; margin-bottom: 5px; cursor: pointer; background: #79CDCD;">

            <strong><?php echo $day; ?></strong>

        </div>
</td></tr>
</table>
<? } ?> 
```

是否有解决方案或更简单的方法来执行此类脚本？

提前谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:09:31.757

你如何只增加 86400 秒`$timein`来增加你的一天？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:23:19.543

您的代码似乎很难遵循。这通常不是一个好兆头。在处理日期时，我通常更喜欢更面向对象的方法：

```
$date = new DateTime();

for ($i = 0; $i <= 4; $i++) {
    ?>
    <table border="0" cellspacing="0" cellpadding="0" width="20%" style="float: left;">
    <tr><td>
        <div class="square title" style="padding: 3px; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; width: 92%; text-align: center; bottom: 5px; margin-bottom: 5px; cursor: pointer; background: #79CDCD;">

            <strong><?php echo $date->format('d/m/Y'); ?></strong>

        </div>
    </td></tr>
    </table>
    <?php
    $date->add(new DateInterval('P10D'));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:18:25.787

正如 njk 建议的那样，您也可以通过添加 86400 秒的倍数来做到这一点。

```
<?php

for( $i = 0; $i < 5; $i++ ) {
    $day = time() + ($i * 86400);
    $day = date( "d/m/Y", $day );

    ?>
    <table border="0" cellspacing="0" cellpadding="0" width="20%" style="float: left;">
        <tr>
            <td>
                <div class="square title" style="padding: 3px; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; width: 92%; text-align: center; bottom: 5px; margin-bottom: 5px; cursor: pointer; background: #79CDCD;">
                    <strong><?php echo $day; ?></strong>
                </div>
            </td>
        </tr>
    </table>
<? } ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T20:11:35.940

您可以使用`strtotime`获取今天午夜的值，并`$i`在 for 循环中添加天数

```
<?php

    for( $i = 0; $i < 5; $i++ ) {
        $day = strtotime( "today + $i days" );
        $day = date( "d/m/Y", $day );

        ?>
        <table border="0" cellspacing="0" cellpadding="0" width="20%" style="float: left;">
            <tr>
                <td>
                    <div class="square title" style="padding: 3px; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; width: 92%; text-align: center; bottom: 5px; margin-bottom: 5px; cursor: pointer; background: #79CDCD;">
                        <strong><?php echo $day; ?></strong>
                    </div>
                </td>
            </tr>
        </table>
<? } ?> 
```

# charts - ssrs 看不到图表轴中的所有信息

> ID：14634170
> 
> 赞同：0
> 
> 时间：2013-01-31T20:05:04.470
> 
> 标签：charts, ssrs-2008, reporting-services

为什么当这是很少的信息时，这看起来不错，我不确定，但我相信在这种情况下，在 codigos de producto 或产品代码中，最大 8 或 10 轴信息可以正常工作。

这不是第一个得到这个错误的报告。

![在此处输入图像描述](../Images/e22177ddef76d1381d136ca27238375b.png)

但是当这是大信息时，![在此处输入图像描述](../Images/a77c59503e6d0c625be832dad8a41ae6.png) 我看不到其他产品代码，它只显示一些。大约 5 或 4 个代码，

这些是我的横向选项![在此处输入图像描述](../Images/6a85f23fb842f6dfa3772dd901ce82ff.png)

@register 用户的答案工作正常

![在此处输入图像描述](../Images/1b8ebe34c8fb2ba2f3bcb51ed117c6da.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:43:33.520

您的问题是“无论代码数量如何，我如何让 X 轴显示所有产品代码？” 如果是这样，则在“水平轴属性”->“轴选项”->“间隔”部分中明确定义间隔 = 1。这应该迫使它每次都显示每个标签。您可能还想编辑水平轴属性 -> 标签和标签字体屏幕以强制旋转标签、更改字体大小等，而不是依赖自动和默认选项。

# java - 使用 playframework 上传文件时的附加信息

> ID：14634171
> 
> 赞同：1
> 
> 时间：2013-01-31T20:05:06.860
> 
> 标签：java, http, file-upload, playframework, playframework-2.0

如何在我的文件上传请求中传递附加信息：

我的动作是这样的：

```
public static Result upload() {
    MultipartFormData body = request().body().asMultipartFormData();
    FilePart picture = body.getFile("picture");
... 
```

这是我的观点：

```
@form(action = routes.Application.upload, 'enctype -> "multipart/form-data") {
        <input type="file" name="picture">
        <p>
            <input type="submit">
        </p>
    } 
```

据我了解，在请求中添加另一张图片是没有问题的，但我想在请求中添加一些其他信息（上传图片所属的项目的 id，否则它毫无价值......）。

尝试使用隐藏的输入字段，但无法检索我操作中的值。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:41:47.837

我是这样做的：

```
MultipartFormData body = request().body().asMultipartFormData();
List<FilePart> files = body.getFiles();
// store files etc.
Map<String, String[]> asFormUrlEncoded = request().body().asMultipartFormData().asFormUrlEncoded();
String[] descriptionParams  = asFormUrlEncoded.get("description");
// save descriptions 
```

# css - Webkit：隐藏垂直滚动条。适用于 Chrome 和 Safari 而不是 Firefox

> ID：14634173
> 
> 赞同：1
> 
> 时间：2013-01-31T20:05:09.303
> 
> 标签：css

> **可能重复：**
> [Firefox 中的隐藏滚动条（允许滚动但没有滚动条）](https://stackoverflow.com/questions/5820304/hidden-scrollbars-in-firefox-allows-scrolling-but-just-no-scrollbar)

这在 Chrome 和 Safari 中运行良好：

```
iframe::-webkit-scrollbar
{  
    display: none;
} 
```

但是垂直滚动条不会隐藏在 Firefox 中。

我无法更改 iframe 代码，因此需要纯粹在 CSS 中。

**更新：**我在上面添加了以下内容来解决问题。两个块都是必需的：

```
iframe
{  
    overflow: hidden;
} 
```

但是，这种方法可能会限制我在其他地方精细控制 x 或 y 滚动条的能力。

那好吧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:14:16.137

这应该有助于：

```
<style>
    .noscroll{width:200px; height:200px; overflow-y: hidden;}
</style>

<iframe src="http://microsoft.com" class="noscroll" scrolling="no"></iframe> 
```

# scala - 在地图中排序时间戳

> ID：14634179
> 
> 赞同：0
> 
> 时间：2013-01-31T20:05:35.717
> 
> 标签：scala

我有一些元组的列表，如果这个元组包含时间戳。我尝试按时间戳排序此列表并转换为地图，例如：

```
println(s"--list before order ${vendingMachineResults.map(v => v._5.timestamp)}")

val vendingMachineResultsGroupedByTimestamp =
  vendingMachineResults.sortBy(v1 => 
    (new DateTime(v1._5.timestamp)).toDate()
  ).flatMap(vendingMachineResult =>    
    Map(vendingMachineResult._5.timestamp -> vendingMachineResult)
  ).toMap

println(s"--Map with vending machines ordered by timestamp: ${vendingMachineResultsGroupedByTimestamp.keys}") 
```

但输出错误：

```
--List before ordering: 
List(2012-04-16 14:33:34.807, 
2012-02-16 14:52:25.715, 
2012-06-18 14:52:25.715, 
2012-07-10 14:54:19.651, 
2012-07-16 14:54:19.651)
--Map with vending machines ordered by timestamp: 
Set(2012-04-16 14:33:34.807, 
    2012-02-16 14:52:25.715, 
    2012-06-18 14:52:25.715, 
    2012-07-16 14:54:19.651, 
    2012-07-10 14:54:19.651) 
```

有谁知道我做错了什么？我希望时间戳按升序排列，但事实并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:14:22.017

地图不保留顺序，因此您的排序再次被丢弃。`SortedMap`如果您的地图必须保持排序，您可以使用。如果你想要一个非标准的排序，你可以在 a 中指定一个`TreeMap`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T10:08:48.880

地图不保留顺序，因此排序顺序丢失。SortedMap 是克服这个问题的主要替代方案。

此外，您可以考虑使用 ListMap，它按照添加顺序保留其成员。ListMap 的缺点是许多操作需要线性时间。

# javascript - 计算行数以生成一定数量的选项卡

> ID：14634184
> 
> 赞同：1
> 
> 时间：2013-01-31T20:06:00.537
> 
> 标签：javascript, jquery

所以我有一些东西可以让用户添加标签和删除标签......但是我将如何根据我的 sql 数据库中的数据生成默认数量的标签。例如，如果它们是 id 字段中具有相同 id 的 4 行，它将生成 4 个选项卡，因为有 4 行具有相同的 id。

这是我发现的标签。

```
<script>
$(function() {

var total_tabs = 0;

    // initialize first tab

    total_tabs++;

    addtab(total_tabs);

    $("#addtab, #litab").click(function() {

    total_tabs++;

    $("#tabcontent p").hide();

    addtab(total_tabs);

    return false;

    });

    function addtab(count) {

    var closetab = '<a href="" id="close'+count+'" class="close">&times;</a>';

       $("#tabul").append('<li id="t'+count+'" class="ntabs">Session      '+count+'&nbsp;&nbsp;'+closetab+'</li>');

       $("#tabcontent").append('<p id="c'+count+'">Tab Content '+count+'</p>');

       $("#tabul li").removeClass("ctab");

       $("#t"+count).addClass("ctab");

       $("#t"+count).bind("click", function() {

        $("#tabul li").removeClass("ctab");

        $("#t"+count).addClass("ctab");

        $("#tabcontent p").hide();

        $("#c"+count).fadeIn('slow');

       });

       $("#close"+count).bind("click", function() {

        // activate the previous tab

        $("#tabul li").removeClass("ctab");

        $("#tabcontent p").hide();
        $(this).parent().prev().addClass("ctab");

        $("#c"+count).prev().fadeIn('slow');

        $(this).parent().remove();

        $("#c"+count).remove();

        return false;

     });

      }

  });

  </script>

 <ul id="tabul">
 <li id="litab" class="ntabs add"><a href="" id="addtab">Add tab + </a></li>
 </ul> 
```

谢谢詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:19:03.570

请参考这个[答案](https://stackoverflow.com/a/9053970/674700)，基本上，您必须遵循相同的原则。然后，调用`addtab(rowId)``for`使用从数据库返回的数据进行循环调用。

不过，仍然不确定具有相同 ID 的行是什么意思。

# java - android 对象实例的副本

> ID：14634188
> 
> 赞同：0
> 
> 时间：2013-01-31T20:06:20.600
> 
> 标签：java, android

我正在开发一个简单的应用程序，它需要生成一个类的实例并不断接收用户输入。应用程序退出后，我希望保留此实例。我尝试将用户输入存储在文件中，并使用存储的数据在连续运行时创建文件的新实例，但由于类的复杂性，结果不如预期的那么好。

所以，我的问题是，将类的实例存储在设备内部存储器上并在每次再次启动应用程序时再次加载它的最佳方法是什么？据我了解，我需要序列化该对象，但我不确定具体如何，或者这是否是正确的方法。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:09:27.030

您需要将数据保存在`onPause()`方法中并在方法中再次加载`onResume()`。

通常，使用内置 SQLite 数据库 ( [http://developer.android.com/guide/topics/data/data-storage.html#db](http://developer.android.com/guide/topics/data/data-storage.html#db) )。您还可以尝试 JSON ( [http://developer.android.com/reference/org/json/JSONObject.html](http://developer.android.com/reference/org/json/JSONObject.html) ) 来序列化您的对象并将其存储在 Android 的`SharedPreferences`( [http://developer.android.com/guide/topics/数据/数据存储.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)）。

# php - Avaya CMS - 如何使用 php 获取数据？

> ID：14634190
> 
> 赞同：-1
> 
> 时间：2013-01-31T20:06:25.463
> 
> 标签：php, avaya

是否可以使用 PHP 从 Avaya CMS (16.3)（用于呼叫中心）获取数据？我想用 PHP 创建一个实时统计信息，但我不知道如何从数据库中获取数据：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-31T09:19:23.280

如果有人在寻找答案 - 是的，有可能，但只是部分。

您需要从 CMS SuperVisor 创建脚本以将数据导出到 TXT 文件。接下来使用 PHP，您需要将此文件加载到数据库中。在过去的 3 年里，我一直在使用这个解决方案而没有出现任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-04T08:29:16.237

听起来像旧的 Avaya 交换机？在这种情况下，CMS 服务器上基于控制台的客户端（希望包括在内） - clint - 可用于屏幕抓取。这是一个从头开始编写自定义报告然后让另一个应用程序登录、启动 clint 并开始抓取该报告的项目，但是如果没有数据库访问权限，它可以工作并且可能是替代方案。

我对较新的 Avaya 交换机了解不多，但它们可能具有比这更多的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T01:07:47.790

ODBC 对实时数据没有用处，因为 CMS 中没有实时数据库 (RTDB) 的 ODBC 接口。获取该数据的唯一实用解决方案是使用 CLINT 运行终端报告，解析它们并将该数据存储在您的数据库中。请参阅[Tek-Tips 线程](http://tek-tips.com/viewthread.cfm?qid=397058&page=1)，其中包含有关如何执行此操作的一些信息。

另一种选择是使用[CMS Webdash](http://demo.cmswebdash.com)，它是 CMS 的 Web 界面，但也可以用作数据源。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-05T03:35:14.967

您可以使用基于 CMS CLINT 的高级工具 clintSVR。通过使用 clintSVR，您可以使用 CGI、OCX 和 C++ 接口从 CMS 获取实时数据。对于 PHP，您可以使用 CGI 接口来获取实时数据。

# javascript - Javascript使用该页面的JS函数创建指向另一个页面的链接

> ID：14634193
> 
> 赞同：0
> 
> 时间：2013-01-31T20:06:30.083
> 
> 标签：javascript, html

所以我有一个页面有多个 div 可以被用户切换为可见/不可见。

然后我有另一个页面，我想链接到上述页面中的特定内容。如何将 javascript 切换代码与链接一起传递，以便它显示正确的 div，而不仅仅是默认视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:11:19.540

您可以使用像 site.com/page.html#div1 这样的 url 哈希

然后使用 javascript 解析哈希并决定要显示的 div

```
var hash = window.location.hash;
var selectedDiv = hash.split('#')[1];

//Then show selectedDiv 
```

# javascript - jquery ajax 获取 HTML 但不会返回它

> ID：14634196
> 
> 赞同：1
> 
> 时间：2013-01-31T20:06:46.493
> 
> 标签：javascript, jquery, jquery-deferred

> **可能重复：**
> [如何从函数的 AJAX 调用返回响应？](https://stackoverflow.com/questions/14220321/how-to-return-the-response-from-an-ajax-call-from-a-function)

我正在尝试通过 ajax 获取一些 HTML 内容。但是由于某种原因，尽管 HTML 使其成为 ajax 函数，但当我尝试将其用作返回值时，我得到`undefined`.

像这样：

```
function get_additional_options(name) {

    var post = $.ajax({
            type: 'post',
            url: 'order_queries_templates/html/' + name + '_additional_options.php?<?=time()?>',
            //data:'product_id=' + product_id,
            dataType: 'html'

            });

    post.done(function (p) {
        console.log(p); //prints out all the HTML just as I would expect
        return p;
    });
} 
```

但是当我尝试让 HTML 像这样将其附加到我的页面时

```
if (has_additional_options == "t"){
    var html_to_append = get_additional_options(name);
    console.log(html_to_append); // undefined

} 
```

如果我使用该`done()`方法，或者只是将值作为成功回调返回，则结果相同。我的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:25:52.817

您不能从异步调用的函数中返回值。

您应该返回`post`（即 的结果`$.ajax`），然后在您的函数*之外*`.done`注册一个处理程序：

 *```
function get_additional_options(name) {
    return $.ajax({
        ...
    });
};

if (has_additional_options == "t") {
     get_additional_options(name).done(function(p) {
         console.log(p);
     });
     // NB: code execution continues here immediately - don't do anything
     //     else here - all further stuff must be done in the above callback
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:22:29.477

您正在匿名函数中返回 HTML 值。您基本上是将其传递给 post.done 方法。

也许在这种情况下使用事件会更好，因为您在这里运行异步代码。

```
function get_additional_options(name) {

    var post = $.ajax({
            type: 'post',
            url: 'order_queries_templates/html/' + name + '_additional_options.php?<?=time()?>',
            //data:'product_id=' + product_id,
            dataType: 'html'

            });

    post.done(function (p) {
        $("body").trigger("html_loaded",[p]);
    );
}

$("body").on("html_loaded", function (htmlData) {

    // Do something with your HTML data here.
    $(this).append(htmlData);

}); 
```*

# java - 在 javascript 中访问 android.os.Debug 方法

> ID：14634200
> 
> 赞同：1
> 
> 时间：2013-01-31T20:06:52.953
> 
> 标签：java, javascript, android

我想访问[Debug 类](http://developer.android.com/reference/android/os/Debug.html)中的一些静态方法；android.os 包的一部分。

但是，当我包含对这些函数的调用时，javascript 会给我一个未定义的 ReferenceError；它找不到android包。

如何在 javascript 中设置 java 包的搜索路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:38:08.580

您可以通过在您的活动中创建一个 javaScriptInterface 对象并在您的 webview 上设置它来完成此操作。查看 webview 方法 addJavascriptInterface()。基本思想是您的 JSInterface 对象将具有访问 Debug 类并返回您感兴趣的值的逻辑。

下面是一个直接取自 SDK 参考文档的基本示例：

```
class JsObject {
    @JavascriptInterface
    public String toString() { return "injectedObject"; }
}

webView.addJavascriptInterface(new JsObject(), "injectedObject");
webView.loadData("", "text/html", null);
webView.loadUrl("javascript:alert(injectedObject.toString())"); 
```

# javascript - 如何将当前和明年添加到 jsDatePick 参数？

> ID：14634201
> 
> 赞同：1
> 
> 时间：2013-01-31T20:06:56.787
> 
> 标签：javascript, jquery, date, jquery-plugins, datepicker

我将以下参数与[jsDatePick](http://javascriptcalendar.org/)一起使用。有人能告诉我如何告诉它只显示当前和明年，而不必在我的 JavaScript 中使用 PHP 吗？

```
datepicker = new JsDatePick({
  dateFormat: "%m/%d/%Y",
  yearsRange: [2013, 2014],
  limitFromToday: true,
  limitToWorkDays: true
}); 
```

我想动态地做到这一点，所以明年，有人不必进去更新代码以将其更改为 2014 年和 2015 年。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:10:27.423

像这样的东西？

```
var thisYear = new Date().getFullYear(),
    nextYear = thisYear + 1;

datepicker = new JsDatePick({
  dateFormat: "%m/%d/%Y",
  yearsRange: [thisYear, nextYear],
  limitFromToday: true,
  limitToWorkDays: true
}); 
```

# c# - 有没有更好的方法可以使用“Linq 样式”将列表插入/扩展到列表中？

> ID：14634202
> 
> 赞同：1
> 
> 时间：2013-01-31T20:07:14.387
> 
> 标签：c#, linq, flatten

我有一个字符串列表，在这个字符串列表中可能有对其他字符串列表的引用。例如，假设列表是这样的：`[a.txt, b.txt, c.more]`，当我遍历列表时，我想在字典中查找：`{{'c.more', [c.txt, d.txt]}}`所以结果列表是在字典`[a.txt, b.txt, c.txt, d.txt]`中查找的结果`c.more`。

我在这一点上是这样的：

```
var dict = new Dictionary<string,List<string>>
{
    {"c.more", new List<string> { "c.txt", "d.txt" } }
}

list.SelectMany(
    f =>
    f.EndsWith(".more")
       ? Expand(f)
       : Include(f, dict))

Where Expand and Include do this:

public IEnumerable<string> Include(string f) { yield return f; }

public IEnumerable<string> Expand(string f, Dictionary<string,List<string>> dict) {
    return dict.ContainsKey(f) ? dict[f] : new List<string>();
} 
```

我可以简单地`new List<string> { f }`在三元的前半部分返回 a 并在后半部分进行查找的结果，但我想稍后处理递归查找，所以我正在扩展 Expand。现在我并不真正关心内存使用情况，但我觉得可能有一些其他的方式来做我还没见过的事情。

有没有更好的方法来扩展更多列表的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T04:12:08.663

您可能不再需要答案，但我仍然想尝试。

一种选择是创建自己的类，继承自`IEnumerable`. 采取以下措施：

```
public class LookupList : IEnumerable<string>
{
    private readonly IEnumerable<string> _source;
    private Dictionary<string, List<string>> _referenceDic;

    public LookupList(IEnumerable<string> source, Dictionary<string, List<string>> referenceDic)
    {
        _source = source;
        _referenceDic = referenceDic;
    }

    public IEnumerator<string> GetEnumerator()
    {
        foreach (string item in _source)
        {
            //check if it's in the ref dictionary, if yes: return only sub items, if no: return the item
            if (_referenceDic.Keys.Contains(item))
            {
                foreach (string dicItem in _referenceDic[item])
                    yield return dicItem;
            }
            else
            {
                yield return item;
            }
        }
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

现在运行以下行来访问这些项目。

```
Dictionary<string, List<string>> refData = new Dictionary<string, List<string>>();
LookupList lst = new LookupList(new List<string>() { "a.txt", "b.txt", "c.more" }, refData);
refData.Add("c.more", new List<string>() { "c.txt", "d.txt" });
List<string> flattenedItems = lst.ToList(); 
```

# glassfish - 访问位于另一台服务器中的远程 ejb 的简便方法

> ID：14634204
> 
> 赞同：6
> 
> 时间：2013-01-31T20:07:21.117
> 
> 标签：glassfish, ejb, jndi

这是我在 Stack Overflow 中的第一个问题，所以我希望它不会太简单。我一直在互联网上寻找一个好的解决方案，但现在我没有。

总的来说，我是 EJB、JNDI 和 Java EE 世界的初学者，但在过去的几个月里，我已经能够在这个环境中做一些可以接受的事情。现在我正在关注工作中的一个问题，但到目前为止，解决方案并没有我想要的那么好。

场景是这样的：我有一个在 Glassfih 3.1.2 中运行的 EAR 应用程序。我在这个 EAR 应用程序中声明了 EJB，无状态 bean 通过远程接口提供方法。

这是我在名为 server1 的服务器中运行的远程 Bean，例如

```
package com.booreg;

import javax.ejb.LocalBean;
import javax.ejb.Stateless;

import com.booreg.IMyRemoteBean;

@Stateless
@LocalBean
public class MyRemoteBean implements IMyRemoteBean
{
    @Override
    public String helloWorld()
    {
        return "Hi what's up boy";
    }
} 
```

这是它的界面

```
package com.booreg;

import javax.ejb.Remote;

@Remote
public interface IMyRemoteBean
{
    public String helloWorld();
} 
```

然后我有第二个 EAR 应用程序，它**必须在另一个服务器上强制运行**，称为 server2。第二个APP使用JSF和Managed Beans。我们有一个托管 Bean 充当 MyRemoteBeanRemote 的远程客户端，如下所示：

```
package com.nucleus;

import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

import com.booreg.IMyRemoteBean;

@ManagedBean
@ViewScoped
public class MyManagedBean
{
    @EJB( name="TheRef") IMyRemoteBean myRemoteBean;

    public String getPhrase() { return myRemoteBean.helloWorld(); }
} 
```

我已经到了这样的地步，即在我的 Web 项目中的 WEB-INF/sun-web.xml 文件中声明一个 ejb-ref 是可行的。

```
<ejb-ref>
    <ejb-ref-name>TheRef</ejb-ref-name>
    <jndi-name>corbaname:iiop:server1:3700#java:global/booreg/booreg.ejb/MyRemoteBean!com.booreg.IMyRemoteBean</jndi-name>
</ejb-ref> 
```

我知道通过这个 sun-web.xml 文件，jndi-name 使第二个应用程序知道在哪里找到位于第一个应用程序的 ejb 实现。但在这里我有一些问题：

1.  有必要为我项目中的每个 EJB 接口声明一个 ejb-ref 条目吗？
2.  如何避免在 sun-web.xml 中对服务器/端口（开发期间的 server1:3700）进行静态引用？当这将投入生产时，我将不得不手动更改每个服务器的名称？？这听起来很奇怪。我可以在服务器端使用某种变量来指定服务器/端口吗？

我希望我已经很好地解释了自己。

非常感谢

**更新：**最后，感谢这个[链接](https://stackoverflow.com/questions/3614802/how-can-i-deploy-session-bean-on-another-computer-with-client-jsp-servlet)，我看到可以引用 ejb 服务器（server1）在我的类路径中创建一个 jndi.properties 文件。这个文件应该包含这样的行。

```
java.naming.factory.initial=com.sun.enterprise.naming.SerialInitContextFactory
java.naming.factory.url.pkgs=com.sun.enterprise.naming
java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl
org.omg.CORBA.ORBInitialHost=server1
org.omg.CORBA.ORBInitialPort=3700 
```

但我仍然面临问题。部署应用程序时，server1 出现下一个异常，我无法部署应用程序。

```
ADVERTENCIA: IOP00100006: Class com.sun.jersey.server.impl.cdi.CDIExtension is not Serializable
org.omg.CORBA.BAD_PARAM: ADVERTENCIA: IOP00100006: Class com.sun.jersey.server.impl.cdi.CDIExtension is not Serializable  vmcid: SUN  minor code: 6 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy117.notSerializable(Unknown Source)
    at com.sun.corba.ee.impl.orbutil.ORBUtility.throwNotSerializableForCorba(ORBUtility.java:783)
    at com.sun.corba.ee.impl.encoding.CDROutputStream_1_0.write_abstract_interface(CDROutputStream_1_0.java:697)
    at com.sun.corba.ee.impl.encoding.CDROutputObject.write_abstract_interface(CDROutputObject.java:545)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.writeAbstractObject(Util.java:493)
    ... 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:08:35.247

@dgisbert

在您提到的上一条评论中，一台服务器是公共服务器，另一台是您企业的内部服务器。从公共服务器调用应用程序层并不是最佳实践。这意味着您可以直接访问您的关键业务层。我建议在您的 EJB 调用之上有一个 Web 服务层，这样来自公共站点的每个调用都必须通过 WebServer -> App Server。通过这种方式，您可以大大降低受到攻击的风险

# mongodb - 从防火墙内运行时，mongoimport 挂起

> ID：14634205
> 
> 赞同：1
> 
> 时间：2013-01-31T20:07:21.687
> 
> 标签：mongodb, port, firewall, netstat, mongoimport

我正在尝试将数据导入到托管在云上的 mongodb 服务器。

我从企业防火墙内的 linux 服务器运行以下命令：

`mongoimport --host myhost:10081 --db mydb -u myusr -p mypass --collection imptest --file test.dat --drop --stopOnError`

导入开始运行，成功连接到远程 mongod，创建一条数据记录（检查我的数据库），然后永远挂起，没有错误消息。

我很确定这是由于某些防火墙设置阻止了从 mongo 服务器返回的通信 - 当我从防火墙外部执行相同的操作时，它可以正常工作。我可以让 mongoimport 与更乐观的 WriteConcern 一起工作，而不是等待确认吗？或者更好的是，我怎样才能找出哪个端口被阻塞给我带来了麻烦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:14:53.720

我假设有一些端口肯定是开放的，比如 SSH 的 22。您可以尝试设置从防火墙到基于云的服务器的 SSH 隧道。然后您需要通过 SSH 隧道转发 mongoDB 端口上的连接。

# regex - 如何为包含动态 URL 的 Google Analytics Funnel 编写正则表达式

> ID：14634207
> 
> 赞同：0
> 
> 时间：2013-01-31T20:07:28.040
> 
> 标签：regex, google-analytics

我正在尝试为具有动态 URL 的页面构建漏斗。我的正则表达式很糟糕。我正在尝试了解用户在我们的其中一个向导中的表现。我关心的 URL 都有每个项目的名称。

```
/projects/<PROJECT_NAME>/wizard_steps/1
/projects/<PROJECT_NAME>/wizard_steps/2
/projects/<PROJECT_NAME>/wizard_steps/3 
```

所以我认为我需要做这样的事情才能允许这些动态 URL。

```
/projects/?.*$/wizard_steps/1
/projects/?.*$/wizard_steps/2
/projects/?.*$/wizard_steps/3 
```

这看起来正确吗？任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:10:04.217

试试这个正则表达式：

```
/projects/([^/]+)/wizard_steps/.* 
```

# .net - 在外部应用程序中抛出错误的“正确”异常类型是什么？

> ID：14634208
> 
> 赞同：0
> 
> 时间：2013-01-31T20:07:31.530
> 
> 标签：.net, exception, base-class-library

我有一个辅助方法，可以使用外部（命令行）实用程序。进程完成后，它会检查退出代码，如果检测到错误，则会抛出包含 StandardError 内容的异常。

我意识到这对我给定的场景并不重要。但是对于外部应用程序中的错误，“正确”的异常类型是什么。

我记得很久以前在 msdn 的某个地方看到了所有内置异常类型及其推荐用途的列表，但现在找不到了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:24:22.363

“正确”异常是您在应用程序中定义的异常。

只要确保持有一个您可以使用的内部异常字典。

如果您记录您的异常字典并按预期使用它，它将在您的应用程序和其他必须处理它们的人中产生奇迹。

一般例外是......一般的（doh！）并且无法为使用您的应用程序的人提供对实际问题的足够洞察力。

My2c

# javascript - Javascript中的评估顺序是顺序的吗？

> ID：14634216
> 
> 赞同：5
> 
> 时间：2013-01-31T20:07:58.340
> 
> 标签：javascript

在一次工作面试中，我很困惑地听到“javascript 可以无序地评估语句”。这在多大程度上是真实的？我可以想象一百种方法来明确地评估无序的语句——例如在分时操作系统中。但他*似乎*说如果我评估

```
console.log('a')
console.log('b') 
```

Javascript 规范不要求输出是`a`first then `b`。我可以想象，如果第一个语句的 IO 阻塞，如果语句在功能上是纯的，即没有副作用，那么评估器可能会*尝试*评估第二个语句，但副作用必须始终按顺序发生，对吗？当然，IO 是一大副作用。

符合规范的 Javascript 在多大程度上可以乱序评估？或者这是一个沟通不畅的案例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T20:13:55.810

JavaScript 是单线程的（除了网络工作者）。时期。[ECMA-262 语言规范版 5.1](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)没有说明乱序执行。在您的简单示例中，这两个语句*保证*以相同的顺序执行。

此外，单个 JavaScript 代码块永远不会被任何其他代码块（例如事件处理程序）中断。这就是为什么长时间运行的代码块会导致 UI*冻结*：

```
for(var i = 0; i < 1000000000; ++i) {
    console.log(i);
} 
```

保证上面的代码块永远不会被中断或重新排序。只要循环正在运行，所有事件处理程序和超时都会等待单线程。当然，数字会以正确的顺序出现。

可能乱序执行的是异步超时：

```
setTimeout(function() {
    console.log('a');
}, 1);
setTimeout(function() {
    console.log('b');
}, 1); 
```

在这里您可能希望`a`首先打印，但 JS 引擎可能会重新排序这些事件。毕竟，您安排这些调用在几乎相同的时间点执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T20:15:04.980

明显误传。

这家伙可能指的是 JavaScript 提升。你可以在这里阅读更多关于它的信息：http: [//www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)

此外，您可以在此处了解该语言的更多特性：http: [//bonsaiden.github.com/JavaScript-Garden/](http://bonsaiden.github.com/JavaScript-Garden/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T20:18:56.790

多半是对的。除了两个主要的例外（撇开明显的“定义一个函数，调用函数”，它有效地“回到”函数体）：

1：吊装。`var`声明被提升，所以如果你写

```
alert(a);
var a = 123; 
```

您得到`undefined`，而不是错误消息。这是因为它被吊到

```
var a;
alert(a);
a = 123; 
```

同样，函数定义也被提升。如果你写：

```
foo(123);
function foo(num) {alert(num);} 
```

它将起作用，因为该功能已被提升。但是，如果你写了这不起作用

```
foo(123);
foo = function(num) {alert(num);} 
```

因为那是匿名函数的赋值，而不是函数定义。

2：异步函数。

初学者的一个常见错误是这样写：

```
var a = new XMLHttpRequest();
a.open("GET","sompage.php",true);
a.onreadystatechange = function() {
    if( a.readyState == 4 && a.status == 200) {
        myvar = "Done!";
    }
};
a.send();

alert(myvar); 
```

他们希望警报说`Done!`，但相反，他们得到一个关于它未定义的莫名其妙的错误。这是因为`myvar = "Done!"`尚未运行，尽管它出现在脚本的较早部分。

* * *

另请参阅[Computer Stupidities](http://www.rinkworks.com/stupid/cs_programming.shtml)的这个轶事：

> 一位编程入门的学生曾经让我看一下他的程序，并弄清楚为什么它总是因为简单的计算而产生零。我看了看程序，很明显：
> 
> ```
> begin
>  readln("Number of Apples", apples);
>  readln("Number of Carrots", carrots);
>  readln("Price for 1 Apple", a_price);
>  readln("Price for 1 Carrot", c_price);
>  writeln("Total for Apples", a_total);
>  writeln("Total for Carrots", c_total);
>  writeln("Total", total);
>  total := a_total + c_total;
>  a_total := apples * a_price;
>  c_total := carrots + c_price;
> end; 
> ```
> 
> *   我：“嗯，你的程序不能在计算之前打印出正确的结果。”
> *   他：“嗯？正确的解决方案是合乎逻辑的，计算机应该以正确的方式重新排列指令。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T20:13:09.397

我认为他们试图让你站在错误的立场上。Javascript是顺序的。否则，您计算值的函数将无法运行。可能是真的，它`console.log`激活了一个`Async task`，这意味着它可以以不同的顺序执行。就像一个`Ajax`电话，一个`Webworker`，一个`timeout`或一个`interval`。

如果您执行以下操作，它将导致 B 比 A，这不是顺序代码，因为在代码中。A 为 B 来，但 B 先被执行。

```
setTimeout(function(){
    console.log("A")
}, 5);
console.log("B"); 
```

# inno-setup - 从 NSIS 调用 Inno 设置插件

> ID：14634222
> 
> 赞同：1
> 
> 时间：2013-01-31T20:08:17.607
> 
> 标签：inno-setup, nsis

我正在尝试使用一个名为 webcrtl 的 Inno 设置插件（一个比 nsweb 具有更多功能的网络浏览器）。我正在尝试使用系统插件调用此 dll。

插件：

[http://restools.hanzify.org/article.asp?id=90](http://restools.hanzify.org/article.asp?id=90)

这就是我正在尝试的，但没有成功：

```
Page custom Pre

Var hCtl_dialog
Var browser
Function Pre
    InitPluginsDir
    File "${BASEDIR}/Plugins/inno_webctrl_v2.1/webctrl.dll"

    nsDialogs::Create 1018
    Pop $hCtl_dialog

    System::Call "webctrl::NewWebWnd(i $HWNDPARENT, i 100, i 100, i 200, i 200) i .s"
    Pop $browser
    System::Call "webctrl::DisplayHTMLPage(i '$browser', t  'http://www.google.com/') i .s"
    Pop $R0

    nsDialogs::Show $hCtl_neoinstaller_genericcustom
FunctionEnd 
```

我得到一个空页面...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T04:02:59.080

DLL 库函数名称区分大小写，并且您使用了别名而不是该 InnoSetup 脚本中的函数名称。修改您的脚本，以便使用具有适当大小写敏感性的函数名称，您将让您的脚本正常工作。要导入的函数的名称是关键字 import tail中`@`字符之前的单词。`external`例如，在以下函数导入示例中，导入函数的名称是`newwebwnd`，而不是`NewWebWnd`：

```
function NewWebWnd(hWndParent: HWND; X, Y, nWidth, nHeight: Integer): HWND;
  external 'newwebwnd@files:webctrl.dll stdcall'; 
```

因此，在您的情况下，请按以下方式修改函数名称，您应该没问题：

```
...
  System::Call "webctrl::newwebwnd(i $hCtl_dialog, i 0, i 0, i 150, i 150) i.s"
  Pop $browser
  System::Call "webctrl::displayhtmlpage(i $browser, t 'http://www.google.com/') b.s"
  Pop $R0
... 
```

在安装页面中拉伸的控件的整个脚本[`WebCtrl`](http://restools.hanzify.org/inno/webctrl/inno_webctrl_v2.1.zip)可能如下所示：

```
!include "nsDialogs.nsh"

OutFile "Setup.exe"
RequestExecutionLevel user
InstallDir $DESKTOP\WebBrowserSetup

Page directory
Page custom InitializeWebBrowserPage

var hDialog
var hBrowser
Function InitializeWebBrowserPage

    InitPluginsDir
    SetOutPath $PLUGINSDIR
    File "webctrl.dll"

    nsDialogs::Create 1018
    Pop $hDialog

    ; get the page client width and height
    System::Call "*(i, i, i, i) i.r0"
    System::Call "user32::GetClientRect(i $hDialog, i r0)"
    System::Call "*$0(i, i, i.r1, i.r2)"
    System::Free $0

    ; create a web browser window stretched to the whole page client rectangle
    ; and navigate somehwere; note that you should add some error handling yet
    System::Call "webctrl::newwebwnd(i $hDialog, i 0, i 0, i $1, i $2) i.s"
    Pop $hBrowser
    System::Call "webctrl::displayhtmlpage(i $hBrowser, t 'http://www.google.com') b.s"
    Pop $R0

    nsDialogs::Show

FunctionEnd

Section ""
SectionEnd 
```

# scala - 当我们有代码契约/静态分析时，为什么我们需要 Option 类型？

> ID：14634223
> 
> 赞同：2
> 
> 时间：2013-01-31T20:08:20.393
> 
> 标签：scala, f#, null, static-analysis, code-contracts

在设计一段空安全代码时，更好的方法是什么？

F# 和 Scala 有封装空检查的 Options 类型，但我们也有静态代码分析工具，如代码协定、findbugs。

对我来说，静态分析似乎更干净一些，那么 Option/Maybe 的原因是什么？特别是，是什么让它更好地防止 NullPointerExceptions/NullReferenceExceptions？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T20:49:13.710

`Option`*用于模拟计算可能*返回值的事实。它不只是为了封装空检查而存在；许多函数式编程语言，如 SML、Haskell 没有，`null`但`Option/Maybe`它们作为建模问题的有用工具存在。

> 对我来说，静态分析似乎更干净一些，那么 Option/Maybe 的原因是什么？

在函数式编程的上下文中，使用静态分析来检查是否存在值是*多余*的。静态类型检查可以做得很好（使用`Option`）。并且类型系统可以保证绝对正确性，而静态分析工具可能会出现误报。

静态分析工具的另一个问题是*成本高*。构建它们（我不知道任何好的 F# 和 Scala 静态分析工具）和使用它们（软件购买、开发人员培训）的成本很高。诚然，它们很强大，应该用于捕获更细微的错误（静态类型检查器无法捕获），例如索引越界、整数溢出等。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-31T20:21:05.157

`Option`是一元的。一个主要的好处是透明地集成到单子计算链中，通常使用`for`理解语法。

此外，我怀疑静态分析甚至可以在原则上避免测试是否存在值（`Some`/`None`区别）。我的直觉是它相当于停止问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-31T20:43:23.580

一方面，静态分析只有在 API 被注释或完整的源代码/字节码可用时才能工作。

如果你有一个 API，但实现它的实际库将在运行时决定，静态分析是无能为力的。

另一方面，静态分析本质上是有限的。图灵完整性的限制适用，这意味着它无法决定某些情况是否在所有情况下都可能为空。

所以，这些都是静态分析的限制，不是选项类型共享的，但是选项类型有一个额外的优势：它们是 monad。这意味着您可以使用它们进行计算，而如果仅限于可空性的 if 检查，您将不得不求助于重复自己。

最后一个陈述可能不清楚，但这是事物的本质：如果您了解如何使用 monad，则无需进一步解释；如果你不这样做，那么解释对你没有多大帮助。学习使用 monad 的最好方法是使用它——真的和编程中的其他一切一样。

# eclipse - 如何在 Eclipse Juno 中关闭版本号？

> ID：14634225
> 
> 赞同：1
> 
> 时间：2013-01-31T20:08:31.027
> 
> 标签：eclipse, ide, eclipse-juno

在eclipse juno中签出项目时如何关闭文件夹中的版本号？所以在包资源管理器中，版本号出现了....

`com.myco.action.MyAbstractAction 2`

`com.myco.action.MyUtilityClass 3`

`.....`

`.....`

`com.myco.service.ItemService 7`

似乎目录版本# 即将出现。这个怎么关掉。。。。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:05:20.180

窗口 -> 首选项 -> 常规 -> 外观 -> 标签装饰

取消选中您的版本控制系统

# python - 蟒蛇推特404

> ID：14634227
> 
> 赞同：0
> 
> 时间：2013-01-31T20:08:38.507
> 
> 标签：python, api, twitter, python-twitter

我正在尝试使用 twitter-python 连接到 twitter 的 API，但我不断收到这个讨厌的 404 错误！

# 代码如下：

```
import sys
import twitter
def main():
  api = twitter.Api()
  statuses = api.GetPublicTimeline()
  print [s.user.name for s in statuses] 
```

* * *

它应该返回在公共时间线上发布状态更新的人的姓名，但我得到了这个回溯。

```
Traceback (most recent call last):
  File "new.py", line 14, in <module>
    main()
  File "new.py", line 10, in main
    statuses = api.GetPublicTimeline()
  File "/usr/lib/pymodules/python2.7/twitter.py", line 1319, in GetPublicTimeline
    json = self._FetchUrl(url,  parameters=parameters)
  File "/usr/lib/pymodules/python2.7/twitter.py", line 2030, in _FetchUrl
    url_data = opener.open(url, encoded_post_data).read()
  File "/usr/lib/python2.7/urllib2.py", line 400, in open
    response = meth(req, response)
  File "/usr/lib/python2.7/urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)
  File "/usr/lib/python2.7/urllib2.py", line 438, in error
    return self._call_chain(*args)
  File "/usr/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.7/urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 404: Not Found 
```

如果我尝试进行身份验证，我的所有请求都会返回 401。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:13:38.163

在[https://code.google.com/p/python-twitter/](https://code.google.com/p/python-twitter/)他们说：

*python-twitter 库现在仅支持 oAuth 身份验证，因为 Twitter 开发人员表示 oAuth 是唯一支持的方法。*

> > > api = twitter.Api(consumer_key='consumer_key', consumer_secret='consumer_secret', access_token_key='access_token', access_token_secret='access_token_secret')

这与您的问题有关吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:57:59.603

Twitter 是更好的 API 之一，它可以让开发人员轻松完成 oAuth 流程。如果您登录 Twitter 并转到[https://dev.twitter.com/apps](https://dev.twitter.com/apps)上的开发者仪表板，您可以注册一个新应用程序（或配置您现有的应用程序）。

查看应用程序详细信息将为您提供一个“oAuth 工具”选项卡，您可以在其中找到该应用程序的所有相关 oAuth 值：Consumer Key、Consumer Secret、Access Token 和 Access Token Secret。

如果您正在创建一个始终以同一用户身份通过​​ Twitter 进行身份验证的应用程序，您可以简单地将这些值硬编码到您的代码中或将它们存储在某个配置文件中。如果您的应用程序需要代表多个用户向 Twitter 进行身份验证（例如，以便它可以代表一个用户发布状态），那么您将需要经历[https://dev 中描述的 oAuth 舞蹈。 twitter.com/docs/auth/3-legged-authorization](https://dev.twitter.com/docs/auth/3-legged-authorization)。

# mysql - 在mysql中按间隔标记列

> ID：14634233
> 
> 赞同：0
> 
> 时间：2013-01-31T20:08:54.533
> 
> 标签：mysql, sql, database, select

嗨，我有点卡在这里。我正在尝试为名为“绿色”、“黄色”和“红色”的合同创建 3 个标签。标签由公式 contractdate-curdate() 标识。- 如果距离超过 90 天，则为绿色。- 黄色 - 如果 = 结束日期在 31 到 89 天之间 - 红色如果结束日期为 30 天或更短

我需要一种方法来为标签创建一个列并将每个合同放在各自的颜色中，或者为每种颜色创建 3 个带有标识符的列？

这些是我提出的几个查询，但没有运气。

```
select 
    contractname, contractenddate
from
    contract
where
    contractenddate between CurDate() and Date_Add(CurDate(), INTERVAL 30 DAY)
        and contractenddate between CurDate() and Date_Add(CurDate(), INTERVAL 60 DAY)
and contractenddate between CurDate() and Date_Add(CurDate(), INTERVAL 90 DAY) 
```

和

```
select contractname, date_sub(contractenddate,interval 0-30 day)as Red,
date_sub(contractenddate,interval 31-89 day)as Yellow,
date_sub(contractenddate,interval 90 day)as Green
 from contract 
```

我知道这些是不正确的，但也许有人可以帮助建立这些？将不胜感激！！！最后一点是我无法更改数据库结构，我只能使用 select 语句。

提前感谢一吨！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:15:04.650

像这样的工作？研究使用`DATEDIFF`and `CASE`：

```
SELECT contractname, 
  contractenddate,
  CASE
      WHEN DATEDIFF(CurDate(),contractenddate) <= 30 THEN 'Red'
      WHEN DATEDIFF(CurDate(),contractenddate) < 90 THEN 'Yellow'
      ELSE 'Green'
  END Label
FROM Contract 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!2/27509/5)。

如果您想要离开的天数，您可以在 SQL 语句中添加以下内容：

```
DATEDIFF(CurDate(),contractenddate) DaysAway 
```

或者，如果您需要红色、黄色和绿色作为列，则非常相似的方法会起作用：

```
SELECT contractname, 
  contractenddate,
  CASE WHEN DATEDIFF(CurDate(),contractenddate) <= 30 THEN 'X' ELSE '' END 'Red',
  CASE WHEN DATEDIFF(CurDate(),contractenddate) < 90 AND DATEDIFF(CurDate(),contractenddate) > 30 THEN 'X' ELSE '' END 'Yellow',
  CASE WHEN DATEDIFF(CurDate(),contractenddate) >= 90 THEN 'X' ELSE '' END 'Green'
FROM Contract 
```

我已经放了一个“X”来标记哪个有哪个。不太清楚你在找什么。

更多的[小提琴](http://sqlfiddle.com/#!2/27509/4)。

祝你好运。

# mysql - 选择哪个结果在 MySQL 结果集中首先出现

> ID：14634234
> 
> 赞同：1
> 
> 时间：2013-01-31T20:08:56.583
> 
> 标签：mysql, activerecord

我正在提取一个县列表，并且需要能够根据 url 指定哪个县将首先出现在结果集中。其余县可以按任何顺序排列。我事先不知道县ID，我只知道它们处于特定状态。例如：

> 新泽西州/县/卑尔根

应该拉起来

> 卑尔根
> 
> 帕赛克
> 
> 埃塞克斯
> 
> 莫里斯
> 
> 苏塞克斯
> 
> 哈德逊
> 
> 联盟
> 
> ETC

* * *

> 新泽西州/县/莫里斯

应该拉起来

> 莫里斯
> 
> 帕赛克
> 
> 埃塞克斯
> 
> 卑尔根
> 
> 苏塞克斯
> 
> 哈德逊
> 
> 联盟
> 
> ETC

等等等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:23:26.627

**编辑 2**删除了较早的答案，因为它们几乎没有价值。

调试查询：

```
SELECT * from counties ORDER BY county like 'Essex' DESC, county ASC 
```

起作用的原因：`county like 'Essex'`计算结果为真/假或更具体地说：1或0。我对这些降序排序，匹配项（1）将位于顶部，任何不匹配的（0）位于底部。第二个 ORDER BY 字段只是确保列表的其余部分按字母顺序排列。

SQL 小提琴：[http ://sqlfiddle.com/#!2/a6a738/5](http://sqlfiddle.com/#!2/a6a738/5)

对于后代，这是我使用的表格：

```
CREATE TABLE counties 
(
 id int auto_increment primary key, 
 county varchar(20)
);

INSERT INTO counties
(county)
VALUES
('Bergen'),('Passaic'),('Essex'),('Morris'),('Sussex'),('Hudson'); 
```

# jquery - 滚动到容器后为 div 设置动画

> ID：14634238
> 
> 赞同：1
> 
> 时间：2013-01-31T20:09:04.513
> 
> 标签：jquery, jquery-animate, scrollto

我创建了一个#nav div，我想用jquery 对其进行动画处理，并在scrollto 功能完成后将其滑动到具有.active 类的部分。.active 类被附加到被点击的部分。

我的问题是我无法弄清楚如何获取浏览器窗口和活动部分之间的距离并为#nav div 设置动画以将其滑动到那里。

更新：我不能使用位置固定为：

*   #nav 将成为响应式 CSS 网格的一部分。
*   如果最后一部分很短，#nav div 不会向下滚动到浏览器窗口允许的范围之外。

我的js：

```
$("a").click(function () {

    //remove class  from href
    $(".active").removeClass("active");

    //add class to href
    var highlight_href = $(this).attr('href');
    $(highlight_href).addClass("active");

    $('html, body').scrollTo($('.active'), 300, {
        onAfter: function () {
            $("#nav").stop().animate({
                // animate #nav and slide to the section with the .active class
            });
        }
    });

}); 
```

我还创建了一个[jsfiddle](http://jsfiddle.net/SBPEn/1/)：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:12:28.043

`position:fixed`使用css `#nav`：

[这是jsFiddle。](http://jsfiddle.net/SBPEn/2/)

```
#nav {
    position:fixed;
    right:0px;
    top:0px;
    margin:20px;
} 
```

# javascript - 调整 JavaScript 日期和时间

> ID：14634244
> 
> 赞同：3
> 
> 时间：2013-01-31T20:09:27.250
> 
> 标签：javascript, jquery, time

> **可能重复：**
> [在 JavaScript 中格式化日期](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)
> [如何在 JavaScript 中获取日期时间？](https://stackoverflow.com/questions/4744299/how-to-get-datetime-in-javascript)

我找到了一个在不同时区显示当前日期和时间的脚本。我不知道如何更改格式。目前，它显示为`MM/DD/YYYY HH:MM:SS AM/PM`，我希望它只显示为`HH:MM AM/PM`

与普通的 JavaScript 相比，我更擅长 jQuery，这让我感到困惑：

```
$(document).ready(function() {
    function calcTime(offset) {
        currentDate = new Date();
        utc = currentDate.getTime() + (currentDate.getTimezoneOffset() * 60000);
        newDate = new Date(utc + (3600000*offset));
        return newDate.toLocaleString();
    }
    function displayTimes() {
        $("#chicago").html(calcTime("-6"));
        $("#london").html(calcTime("+1"));
        $("#shanghai").html(calcTime("+8"));
    };
    window.setInterval(displayTimes, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:23:07.197

罪魁祸首是以下行。

```
 return newDate.toLocaleString(); 
```

具体来说， toLocaleString()

您可以在此处找到有关该行的更多信息：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleDateString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/toLocaleDateString)

一种快速的方法是使用 .toTimeString()

而不是返回 newDate.toLocaleString() 或 .toTimeString() 您想让它按照您的意愿打印。

例如

```
 return newDate.getHours() + ':' newDate.getMinutes(); 
```

那会给你军事时间。

如果您想要上午/下午显示，这可以为您提供

```
(newDate.getHours() >  11) ? 'pm' : 'am' 
```

如果你想美化时间，0 是午夜 12 点，12 是中午。如果小时数大于 12，您可以减去 12。如果为 0，您也可以将其设置为显示 12。所有这些都可以这样完成：

```
 (newDate.getHours() === 0) ? 12 : ((newDate.getHours() > 12) ? newDate.getHours() - 12 : newDate.getHours()); 
```

绝对应该为 newDate.getHours() 使用 var。说到变量...

请重新格式化您的变量： var currentDate = new Date(), utc = currentDate.getTime() + (currentDate.getTimezoneOffset() * 60000), newDate = new Date(utc + (3600000*offset));

## 希望有帮助。

编辑：现在一起：替换以下

```
return newDate.toLocaleString(); 
```

与以下

```
return (newDate.getHours() === 0) ? 12 : ((newDate.getHours() > 12) ? newDate.getHours() - 12 : newDate.getHours()) + ' : ' + newDate.getMinutes() + ' ' + (newDate.getHours() >  11) ? 'pm' : 'am'; 
```

这相当草率，而且写得匆忙，但如果你为 newDate.getHours() 使用一个 var，它会更容易阅读。

谢谢。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-31T20:16:30.920

```
var myDate= new Date();
myDate.format("h:mm tt"); 
```

[http://www.jslab.dk/library/date.format](http://www.jslab.dk/library/date.format)

# wpf - 使用 MVVM WPF 在 ViewModel 中实现 EventHandlers

> ID：14634248
> 
> 赞同：2
> 
> 时间：2013-01-31T20:09:37.967
> 
> 标签：wpf, mvvm

我有一个组合框：

```
<ComboBox x:Name="cbConnection"
                      ItemsSource="{Binding Source={StaticResource XmlConnectionList}, XPath=//ComboItem}"
                      DisplayMemberPath="Key"
                      SelectedValuePath="Value"
                      SelectedValue="{Binding Path=ConnectionString,ValidatesOnDataErrors=True,UpdateSourceTrigger=PropertyChanged}" 
                      Margin="{StaticResource ConsistentMargins}"
                      Validation.ErrorTemplate="{StaticResource TextBoxErrorTemplate}" Width="120"
                      LostFocus="{Binding Path=cbConnection_LostFocus}"/> 
```

我试图将 LostFocus 事件处理程序移至 ViewModel，因为我在设置器中为 ViewModel 中找到的 SelectedValue 绑定“ConnectionString”做了一些错误处理。如果用户重新选择相同的 ComboBoxItem，我希望发生这种情况，除非选择了不同的列表项，否则它会触发 OnPropertyChanged。

上述绑定导致错误

> 不能在“ComboBox”类型的“AddLostFocusHandler”属性上设置“绑定”。只能在 DependencyObject 的 DependencyProperty 上设置“绑定”。

无论用户的选择如何，如何在选择组合框中的任何项目时触发 ViewModel 中的可重复代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:15:05.977

您需要包含对 System.Windows.Interactivity dll 的引用，但它看起来像这样：

```
xmlns:b="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"  
<ComboBox>
<b:Interaction.Triggers>
    <b:EventTrigger EventName="LostFocus">
    <b:InvokeCommandAction  Command="{Binding cbConnection_LostFocus}" CommandParameter="{Binding}"/>
     </b:EventTrigger>
 </b:Interaction.Triggers>
</ComboBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T05:11:35.590

乔希的回答对我有用，但名称空间不同：

```
xmlns:b="http://schemas.microsoft.com/expression/2010/interactivity"  
<ComboBox>
<b:Interaction.Triggers>
    <b:EventTrigger EventName="LostFocus">
    <b:InvokeCommandAction  Command="{Binding cbConnection_LostFocus}" CommandParameter="{Binding}"/>
     </b:EventTrigger>
 </b:Interaction.Triggers>
</ComboBox> 
```

# c# - 捕获 HttpWebRequest 超时

> ID：14634249
> 
> 赞同：0
> 
> 时间：2013-01-31T20:09:40.413
> 
> 标签：c#, httpwebrequest, timeout, webrequest, httpwebresponse

```
public int loginEmail(string email, string password)
    {
        HttpWebRequest request = null;
        string responseStr = null;
        string Email = email;
        string Pass = password;

        UTF8Encoding encoding = new UTF8Encoding();
        string postData = "PostData";
        byte[] data = encoding.GetBytes(postData);

        request = (HttpWebRequest)WebRequest.Create("url");
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        request.AllowAutoRedirect = false;
        request.KeepAlive = false;
        request.Proxy = null;
        request.ServicePoint.ConnectionLimit = 1000;
        request.ContentLength = data.Length;
        request.Timeout = 5000;
        request.ServicePoint.ConnectionLeaseTimeout = 5000;
        request.ServicePoint.MaxIdleTime = 5000;

        using (Stream stream = request.GetRequestStream())
        {
            stream.Write(data, 0, data.Length);
        }

        try
        {
            using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
            {
                responseStr = response.Headers["Set-Cookie"];
            }
        }
        catch
        {
            return 1;
        }

        string[] cooktemp;
        string[] seperatortemp = new string[] { ";" };
        cooktemp = responseStr.Split(seperatortemp, StringSplitOptions.None);

        LoginHeaders[0] = cooktemp[0] + ";";

        return 0;
    } 
```

这段代码运行得很好，但有时请求没有得到响应。当请求没有得到响应时，程序将挂起，最后它会给出一个超时错误，导致程序崩溃。我现在要做的只是捕捉超时错误，以便我可以处理它，但似乎没有任何东西能捕捉到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T20:15:22.090

它很可能在`GetRequestStream()`. 该[文档](http://msdn.microsoft.com/en-us/library/d4cek6cc.aspx)明确指出，`WebException`如果请求的超时期限到期，它可能会抛出。

因此，在您的 try/catch 中包含该代码块，您应该能够捕获它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T13:13:50.527

这是一个旧线程，但我今天也遇到了一个问题。

我没有意识到的是，如果您有一个 Web 服务，例如，它试图写入一个被*锁定*的文件......那么简单的代码`try..catch`是不够的。

您必须专门有一个`catch`which handles `WebExceptions`。

```
try
{
    //  Run your web service code
}
catch (WebException ex)
{
    //  Handle a WebException, such as trying to write to a "locked" file on the network
}
catch (Exception ex)
{
    //  Handle a regular Exception
} 
```

我一直认为 a`WebException`是 的一种`Exception`，所以这些会被这个`catch`处理程序捕获：

```
catch (Exception ex)
{
    //  Handle a regular Exception
} 
```

它没有。

因此，为了避免您的代码抛出“**请求超时**”消息，并且没有任何关于导致它们的建议，请记住添加这些第二个`catch`处理程序。

顺便说一句，在我的[网络服务教程](http://www.mikesknowledgebase.com/pages/Services/WebServices-Page2.htm)中，这是我推荐的代码，它查找异常，并在响应标头中返回它们：

```
try
{
    //  Put your code in here
}
catch (WebException ex)
{
    //  Return any exception messages back to the Response header
    OutgoingWebResponseContext response = WebOperationContext.Current.OutgoingResponse;
    response.StatusCode = System.Net.HttpStatusCode.InternalServerError;
    response.StatusDescription = ex.Message.Replace("\r\n", "");
    return null;
}
catch (Exception ex)
{
    //  Return any exception messages back to the Response header
    OutgoingWebResponseContext response = WebOperationContext.Current.OutgoingResponse;
    response.StatusCode = System.Net.HttpStatusCode.InternalServerError;
    response.StatusDescription = ex.Message.Replace("\r\n", "");
    return null;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-16T23:23:12.037

[![System.Net.WebException](../Images/b6aa60f07daa1db882e054fa82f80188.png)](https://i.stack.imgur.com/fRjGq.png)

```
try { ... }            
catch (System.Net.WebException sne)
        {
            MessageBox.Show(req.Timeout.ToString());
        } 
```

我认为无论如何超时将永远是“5000”。如果你告诉它“超时为 5 秒”，它总是会在放弃前尝试 5 秒。

# javascript - addEventListener 使用按钮不做任何事情

> ID：14634253
> 
> 赞同：0
> 
> 时间：2013-01-31T20:09:50.453
> 
> 标签：javascript, dom-events, addeventlistener

玩一些 Javascript，我试图在单击按钮时显示时钟。只使用没有工作的js `addEventListener`，它会在目标div中显示时钟。但是，当我添加时`addEventListener`，什么也没有发生。我对编程很陌生，经常忽略一些拼写错误和语法错误，但我已经经历了很多次，但没有找到任何东西。

这是js代码：

```
 document.addEventListener('DOMContentReady', function () {
    document.getElementById('clock-button').addEventListener('click', startClock, false);
});

function startClock() {
    var today = new Date();
    var h = today.getHours();
    var m = today.getMinutes();
    var s = today.getSeconds();

    m = checkTime(m);
    s = checkTime(s);

    document.getElementById('clock').innerHTML = h + ":" + m + ":" + s;
    t = setTimeout(function () {
        startClock();
    }, 500);

    console.log("works");
}

function checkTime(i) {
    if (i < 10) {
        i = "0" + i;
    }

    return i;
} 
```

还有这里的jsfiddle：http: [//jsfiddle.net/Em46R/1/](http://jsfiddle.net/Em46R/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:19:26.867

将 DOMContentReady 替换为 DOMContentLoaded

# android - 如果 jar 没有放在 libs 文件夹中，则找不到 jar 文件中的类

> ID：14634255
> 
> 赞同：0
> 
> 时间：2013-01-31T20:09:54.610
> 
> 标签：android

我在我的 android 项目中使用第三方 jar 文件。当我将 jar 添加到构建路径时，通过 eclipse 项目 -> 属性 -> java 构建路径 -> 库 -> 添加外部 jar。

该项目编译良好，直到使用该 jar 中的任何类的代码行运行，并且我在运行时遇到类未找到异常并且程序崩溃。

我通过将第三方 jar 文件复制到我的项目的 libs 文件夹来解决它。类未找到异常消失。

问题：有人可以解释一下为什么这是必需的，为什么它不能仅仅使用来自项目属性的引用，尽管它编译得很好。为什么我必须将它显式复制到 libs 文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:18:54.337

文件夹“libs”中的所有库都由 Android Eclipse 插件找到，并添加到项目的“Android Dependencies”项中。这里有一个更好的说明：[http ://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:13:12.673

> 当我将 jar 添加到构建路径时，通过 eclipse 项目 -> 属性 -> java 构建路径 -> 库 -> 添加外部 jar。

这不是使用 Android 构建工具的正确程序。

> 我通过将第三方 jar 文件复制到我的项目的 libs 文件夹来解决它。类未找到异常消失。

正确的。

> 有人可以解释一下为什么这是必需的吗？为什么它不仅可以使用项目属性的引用，尽管它编译得很好。为什么我必须将它显式复制到 libs 文件夹？

因为只有 JARs`libs/`被添加到 APK 文件中。Java 构建路径是纯编译时的东西，与 Android 的 APK 文件打包无关。

# web - 山狮网络分享

> ID：14634258
> 
> 赞同：0
> 
> 时间：2013-01-31T20:09:59.663
> 
> 标签：web, osx-mountain-lion

我正在寻找在我的 Mac 上设置网络服务器。根据[这个网站](http://macs.about.com/od/networking/qt/websharing.htm)，Mac OS X 有一个内置的网络服务器，但是根据[这个网站](http://macs.about.com/od/usingyourmac/qt/Web-Hosting-With-Mountain-Lion.htm)，很多对它的控制在 Mountain Lion 中被禁用了。第二个站点指向[另一个站点](http://clickontyler.com/blog/2012/02/web-sharing-mountain-lion/)，该站点提供一些软件来恢复我的 Mac 的完整网络共享功能。我安装了这个软件并通过系统偏好设置>>网络共享打开了网络共享。然后，如第一个链接中的说明所示，我创建了一个带有文本“Hello World”的 ~/username/Site/index.html 文件。但是，当我通过浏览器访问 localhost/index.html 时，我会看到文本“It works！”。我必须做什么才能编辑通过 localhost/index.html（或我可以在本地使用的其他 URL）访问的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:42:06.660

文档根目录是 /Library/WebServer/Documents。

如果您想将 Mountain Lion 变成功能齐全的服务器，您可以从应用商店购买 OSX Server，价格为 19.95 美元

# linux - icinga-web 未满足的依赖项

> ID：14634264
> 
> 赞同：2
> 
> 时间：2013-01-31T20:10:26.007
> 
> 标签：linux, installation, package

我正在尝试安装 icinga-web，但出现以下错误：-

我尝试安装两者`icinga-core`，`icinga-idoutils`但仍然出现此错误。

```
 apt-get install icinga-web
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 icinga-web : Depends: icinga-core (>= 1.7.0) but 1.6.1-2 is to be installed
              Depends: icinga-idoutils (>= 1.7.0) but 1.6.1-2 is to be installed
E: Unable to correct problems, you have held broken packages. 
```

仅供参考，

```
 apt-get install icinga-core
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages were automatically installed and are no longer required:
  pkg-config libpthread-stubs0 libfontconfig1-dev x11proto-kb-dev xtrans-dev x11proto-input-dev libxpm-dev libfreetype6-dev libxau-dev xorg-sgml-doctools libx11-dev libx11-doc libxcb1-dev x11proto-core-dev libxdmcp-dev
  libpthread-stubs0-dev
Use 'apt-get autoremove' to remove them.
Suggested packages:
  nagios-nrpe-plugin
The following NEW packages will be installed:
  icinga-core
0 upgraded, 1 newly installed, 0 to remove and 117 not upgraded.
Need to get 0 B/287 kB of archives.
After this operation, 804 kB of additional disk space will be used.
Selecting previously unselected package icinga-core.
(Reading database ... 38940 files and directories currently installed.)
Unpacking icinga-core (from .../icinga-core_1.6.1-2_amd64.deb) ...
Processing triggers for man-db ...
Setting up icinga-core (1.6.1-2) ...
 * There is no configuration file for Icinga.
invoke-rc.d: initscript icinga, action "start" failed.

apt-get install icinga-idoutils
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following packages were automatically installed and are no longer required:
  pkg-config libpthread-stubs0 libfontconfig1-dev x11proto-kb-dev xtrans-dev x11proto-input-dev libxpm-dev libfreetype6-dev libxau-dev xorg-sgml-doctools libx11-dev libx11-doc libxcb1-dev x11proto-core-dev libxdmcp-dev
  libpthread-stubs0-dev
Use 'apt-get autoremove' to remove them.
The following NEW packages will be installed:
  icinga-idoutils
0 upgraded, 1 newly installed, 0 to remove and 117 not upgraded.
Need to get 0 B/221 kB of archives.
After this operation, 1,442 kB of additional disk space will be used.
Selecting previously unselected package icinga-idoutils.
(Reading database ... 38947 files and directories currently installed.)
Unpacking icinga-idoutils (from .../icinga-idoutils_1.6.1-2_amd64.deb) ...
Processing triggers for ureadahead ...
Processing triggers for man-db ...
Setting up icinga-idoutils (1.6.1-2) ...
dbconfig-common: writing config to /etc/dbconfig-common/icinga-idoutils.conf

Creating config file /etc/dbconfig-common/icinga-idoutils.conf with new version

Creating config file /etc/icinga/ido2db.cfg with new version
granting access to database icinga for icinga-idoutils@localhost: success.
verifying access for icinga-idoutils@localhost: success.
creating database icinga: success.
verifying database icinga exists: success.
populating database via sql...  done.
dbconfig-common: flushing administrative password 
```

此问题已解决。

我已经从 (/var/lib/dpkg/status) 中删除了损坏的包

[软件包系统损坏 - E: 子进程 /usr/bin/dpkg 返回错误代码 (1)](https://askubuntu.com/q/195950/36315)

并使用 icinga PPA 重新安装所有 icinga 软件包。

谢谢你的帮助。

# php - PHP：在以下情况下如何处理异常

> ID：14634268
> 
> 赞同：0
> 
> 时间：2013-01-31T20:10:32.507
> 
> 标签：php, exception

我根本没有足够的 PHP 和编程经验，所以我想知道，在我的情况下，最好的决定是什么。这是我的代码示例：

```
public static function isAscii($string, $type, $length = -1)
    {
        if (!is_string($string))
            throw new InternalException(ExceptionMessage::invalidFunctionParameterType(__CLASS__, __METHOD__));

        if ($length !== -1 && !Str::isValidLength($string, $length))
            return FALSE;

        $ascii_array = Constants::asciiRegex();

        if (!preg_match($ascii_array[$type], $string))
            return FALSE;

        return TRUE;
    } 
```

我想确保 key`$type`存在于 array `$ascii_array`。最好的方法是什么？

我可以提供两个决定：

1.  最简单的。只需使用`array_key_exists()`功能手动检查密钥是否存在。如果 key 不存在 - 也手动抛出异常。但我认为这不是一个好主意，检查这个条件是多余的，因为如果我不写任何东西，PHP 编译器会生成警告（注意：未定义索引：）我想以某种方式使用它。我发现有一些预定义的异常，比如`OutOfBoundsException`and `OutOfRangeException`，像在 Java 中一样使用它们会很容易，但是 PHP 似乎不会抛出这些异常，只会抛出警告和错误。
2.  使用`set_error_handler()`函数将错误和警告“转换”为异常。但是还有另一个问题 - 我如何处理所有可能的错误？我试图找到 PHP 错误和警告的完整列表，但[它不存在](https://stackoverflow.com/questions/2355164/list-of-all-possible-php-errors)。所以我不知道如何解决这个问题，请帮助我。在此先感谢，即使我的英语水平很差，也希望您能理解我的问题。

PS 这是一个包含不同类型 ascii 字符串的正则表达式的数组。![在此处输入图像描述](../Images/5463f5b92b261dd0ddf75c5d009ec0c9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:22:41.883

我希望我能正确理解这个问题 - 你基本上是在问是否有一个自然的内部异常可以采用而不是运行你自己的异常？

或者您只是不知道您可以执行以下操作：

```
try
{
    //some code to try
    if (!in_array($type, $ascii_array)) {
        throw new Exception('type not in ascii array');
    }
}
catch(Exception $e) {
    die ('my custom exception message: ' . $e->getMessage());
} 
```

如果我错过了重点，请告诉我，我可能会更新。

至于不抛出自己的异常的原因......我不能说我知道这样做有什么真正的好处。在我看来， in_array() 是完全可以接受的，抛出异常可能只是个人喜好，不一定值得关注性能。

*编辑*

考虑到我的回答和问题，值得注意的是，这个答案被接受可能是因为评论中的结论是 PHP 不允许您声明像 Java 那样抛出异常的函数。简单的说。

所以这个答案只是为了这个目的。PHP 可以声明一个抛出异常的函数吗？不，默认情况下不是。您必须自己尝试在函数中捕获异常。

# java - 数组索引超出范围错误

> ID：14634271
> 
> 赞同：0
> 
> 时间：2013-01-31T20:10:48.837
> 
> 标签：java

我编写的这段代码遇到了一些麻烦，因为我遇到了`ArrayIndexOutofBounds`异常错误，我不知道发生了什么。我希望我的代码生成的是一个 char 数字数组。

这是代码：

```
public class testing {

    static int k = 2;

    public static void main(String args[]) {

        int[] numArr = new int[] { 15, 18, 21 };

        createChar(numArr, k);
    }

    public static char[] createChar(int numArr[], int k) {
        char[] store = new char[k - 1];

        for (int i = 0; i < k; i++) {
            int divide = numArr[i] / 4;

            int numStore = divide % 4;
            charN(numStore, store, k);
        }
        return store;
    }

    public static char[] charN(int numStore, char store[], int k) {
        for (int i = 0; i < k; i++) {
            if (k == 0) {
            } else {
                store[k - 1] = (char) numStore;
                k = k - 1;
            }
        }
        System.out.print(store);
        return store;
    }
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T20:13:27.120

正如错误所暗示的，这是由于访问超出了数组的范围。IE。数组上的一些错误索引访问。

```
char[] store = new char[k - 1]; 
```

您正在创建一个`store`大小为`k-1`

并`k`作为大小传递给`charN()`

```
charN(numStore, store, k); 
```

解决您的问题。更改商店声明如下

```
char[] store = new char[k]; 
```

此外， in `class Testing`，`k`必须是`3`，而不是 2。其中 k 是数组的大小。

```
static int k = 3; 
```

当数组的**大小**为 k 时，数组的**索引**从`0`到`k-1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:14:23.490

对于 value `k = 2`，以下语句：-

```
char[] store = new char[k - 1]; 
```

创建一个 size 的数组`1`。因此，您只能访问其`0th index`.

但是，在该`charN`方法中，您正在访问它的`1st`索引：-

```
store[k - 1] = (char) numStore;  // Since k = 2, k - 1 = 1. 
```

* * *

将您的数组创建更改为： -

```
char[] store = new char[k]; 
```

* * *

此外，我不明白你为什么拿`k = 2`第一名。可能您的意思是将其用作`index`，在这种情况下，您的数组创建将是 size `k + 1`。因此，您的 for 循环将迭代 until `k + 1`，而不是`k`.

另外，我不明白你的`charN`方法的作用。事实上， tt 看起来很奇怪，首先你在`createChar`方法中迭代你的数组，然后将每个元素传递给`charN`方法。然后你也在迭代`char array`，将相同的值分配给多个索引。除此之外，您在循环中同时递减`k`和递增`i`。这真的很奇怪。最后，你`array`从你的两个方法中返回你的，但根本没有使用返回值。

很难理解你想做什么。但是你应该考虑我在上一段中所说的所有观点。对于那里的每一步，想想你为什么要这样做？有没有其他选择，这可能很容易？我真的需要在这里进行 2 次迭代的方法吗？

我建议你再看看你的设计。我上面发布的解决方案可能会解决您的`compiler error`问题，但您的`logic`. 你需要照顾好它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:17:55.660

根据你的帖子声明

```
char[] store = new char[k - 1]; 
```

导致大小为 1 的 char 数组。因此，在 charN 方法中，当您尝试访问

```
store[k - 1] = (char) numStore; 
```

您正在尝试访问 store[1]，因为此处的“k”为 2。这是错误的。因为使用 store[1] 您正在尝试访问数组中的第二个元素，因为数组大小仅为 1。

# windows - #include dcomp.h 未找到

> ID：14634274
> 
> 赞同：0
> 
> 时间：2013-01-31T20:10:58.543
> 
> 标签：windows, graphics

我正在尝试运行利用各种 IDComposition_____ 类型的 Microsoft DirectComposition 示例。看来我缺少包含这些类型的 dcomp.h 。我试过四处寻找头文件，但似乎无法在任何地方找到它。

我是以错误的方式解决这个问题吗？
也许有人可以指向 dcomp.h.. 的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:16:09.850

这是适用于 Windows 8 的 Windows SDK 的一部分。它包含在 Visual Studio 2012 中。对于其他编译器，您需要单独下载 SDK。

[http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx](http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx)

# vb.net - 文本的加密和解密

> ID：14634277
> 
> 赞同：-2
> 
> 时间：2013-01-31T20:11:17.387
> 
> 标签：vb.net, encryption

我尝试使用以下代码将字符串划分为相等的艺术，每一个 2 个字母，但它没有用：

```
 Dim twoLetterWords = "The quick fox jumped over the lazy dog".
       Select(Function(c, i) New With {.Char = c, .Index = i}).
       GroupBy(Function(x) CInt(Math.Floor(x.Index / 2))).
       Select(Function(g) String.Join("", g.Select(Function(x) x.Char))) 
```

我还尝试了以下方法：

```
 Dim n As Integer

    Dim sasa(69) As String

    For i As Integer = 0 To sasa.Length - 1
        sasa(i) = "das"

    Next

    For i As Integer = 0 To RichTextBox1.TextLength - 2 Step 2
        For x As Integer = 0 To sasa.Length - 1
            n = i + 2
            sasa(x) = RichTextBox1.Text.Substring(i, 2)

            For z As Integer = 1 To 3
                RichTextBox2.Text = RichTextBox2.Text
            Next z
       Next x
    Next i 
```

但这也是徒劳的。那么，我误会了什么？或者还有其他方法可以做我想做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:27:51.207

在回答您关于为什么不应该开发自己的“加密”例程的评论时，简短的回答是：

密码学是困难的，是科学和艺术的平等部分。拥有计算机科学和数学学位、专攻密码学的人提出了糟糕的解决方案，他们有理论背景可以更好地了解。这应该是足够的谨慎和警告。

你甚至没有那个；你一无所知，而且无论你做什么最终都会变得*可怕*，这种可能性是压倒性的。那里已经有足够多可怕的加密代码了。

很抱歉直言不讳，但这就是现实。

有关更多信息，请查看[http://www.schneier.com/blog/archives/2011/04/schneiers_law.html](http://www.schneier.com/blog/archives/2011/04/schneiers_law.html)。

# vim - vim脚本：输入和if语句后无法回显换行符

> ID：14634284
> 
> 赞同：2
> 
> 时间：2013-01-31T20:11:49.850
> 
> 标签：vim

以下函数不回显结果变量。

```
fu! Test()
  let input = input(">")
  let result = "error\n"
  if 1
    echo result
  endif
endf 
```

从结果中删除换行符、删除输入或删除 if 语句将解决此问题。任何想法为什么会发生这种情况？

在我的实际函数中，结果变量是通过执行系统命令设置的，我不希望在回显之前解析/更正结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-06T08:24:18.280

Vimscript 可能很奇怪。当我遇到 echo 没有显示何时应该显示的问题时，通常在 echo 为我修复它之前或之后调用“redraw”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-05T03:19:58.980

# hadoop - 在 oozie 中多次提交相同的协调员工作

> ID：14634285
> 
> 赞同：0
> 
> 时间：2013-01-31T20:11:53.960
> 
> 标签：hadoop, oozie, oozie-coordinator

我在 Oozie 有一个协调员的工作。它使用 java 操作节点调用工作流。

如果我只提交一次这份工作，那么它就可以完美运行。但是，如果我以相同的开始和结束时间提交此作业两次，但主类的 arg1 不同，则两个作业实例都挂在“RUNNING”状态，日志如下所示：

```
>>> Invoking Main class now >>>

Heart beat
Heart beat
Heart beat
Heart beat
... 
```

如果我杀死其中一个工作，那么另一个工作就会重新开始运行。

该文档指出，可以使用不同的参数提交同一协调器作业的多个实例：http: [//archive.cloudera.com/cdh/3/oozie/CoordinatorFunctionalSpec.html#a6.3._Synchronous_Coordinator_Application_Definition](http://archive.cloudera.com/cdh/3/oozie/CoordinatorFunctionalSpec.html#a6.3._Synchronous_Coordinator_Application_Definition)

“并发：该作业可以同时运行的最大操作数。**该值允许实现和提交协调器应用程序的多个实例**，并允许操作赶上延迟处理。默认值为 1 。”

那么我做错了什么？我什至看到来自同一个作业的两个工作流操作实例处于“运行”状态，一旦另一个作业被终止，它就可以正常运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:02:34.170

好的，我发现了问题。它与 HBase 并发和集群中没有足够的任务槽有关。在 mapred-site.xml 文件中设置以下属性可解决此问题：

```
<name>mapred.tasktracker.map.tasks.maximum</name>
<value>50 </value> 
```

它类似于这个问题：[https ://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/cdh-user/v0BHtQ0hlBg](https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/cdh-user/v0BHtQ0hlBg)

# puppet - Puppet：找到 1 个依赖循环

> ID：14634289
> 
> 赞同：4
> 
> 时间：2013-01-31T20:12:19.683
> 
> 标签：puppet

应用我的 Puppet 清单时出现此错误：

```
Error: Could not apply complete catalog: Found 1 dependency cycle:
(Exec[pip install requirements] => File[change venv permissions] => File[enforce MinGW compiler] => Exec[pip install requirements])
Try the '--graph' option and opening the resulting '.dot' file in OmniGraffle or GraphViz 
```

这是我的 Puppet 清单（相关部分），我在那里看不到任何依赖循环。有任何想法吗？

```
exec {'create virtualenv':
    command => "$install_dir/Scripts/virtualenv.exe venv",
    cwd     => $project_dir,
    require => Exec['install virtualenv'],
}

file { "fix Mingw32CCompiler":
    path    => "C:/Python27/Lib/distutils/cygwinccompiler.py",
    content => template($cygwinc_template),
    ensure  => present,
    require => Exec['create virtualenv'],
}

file { "enforce MinGW compiler":
    path    => "$project_dir/venv/Lib/distutils/distutils.cfg",
    owner   => $user,
    content => $mingw,
    ensure  => present,
    require => File['fix Mingw32CCompiler'],
}

exec {'pip install requirements':
    timeout => 1200,
    command => "$project_dir/venv/Scripts/pip.exe install -r $project_dir/requirements.txt",
    require => File['enforce MinGW compiler'],
}

file {'change venv permissions':
    path    => "$project_dir/venv",
    recurse => true,
    owner   => $user,
    mode    => 0770,
    require => Exec['pip install requirements'],
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-09T17:59:00.447

在 puppet 文件中，对声明的任何父目录都有隐式要求。

有效：

```
File['change venv permissions'] -> File['enforce MinGW compiler'] 
```

所以父母需要 exec，exec 需要孩子，孩子需要父母，创建一个循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T16:12:42.243

您的最后一次更改是什么（这可能是您添加循环的那一刻）。

尝试生成图表的建议。将生成的点文件作为 gist 发布，以便我们进一步调查。

看看[Debugging cycle or missing dependency](http://mestachs.wordpress.com/2013/03/05/puppet-vagrant-smarter-better-stronger/)。

# tsql - 在 TSQL 中复制内容

> ID：14634299
> 
> 赞同：2
> 
> 时间：2013-01-31T20:12:52.360
> 
> 标签：tsql

我需要将内容从一个表复制到自身和相关表...让我将问题图解。假设我有两张桌子：

```
Order
OrderID : int
CustomerID : int
OrderName : nvarchar(32)

OrderItem
OrderItemID : int
OrderID : int
Quantity : int 
```

PK 是自动增量的。

假设我想将一位客户的内容复制到另一位客户。我如何有效地做到这一点？

问题是PK。我需要将`OrderIDs`原始数据集的值映射到副本，以便在`OrderItem`. 如果我只是选择-插入，我将无法创建该地图。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:48:51.180

为了复制**一个**父母和许多孩子的身份作为键，我认为该[`OUTPUT`](http://msdn.microsoft.com/en-us/library/ms177564.aspx)子句可以使事情变得非常干净（**[这里是 SqlFiddle](http://www.sqlfiddle.com/#!6/2896b/1)**）：

```
-- Make a duplicate of parent 1, including children

-- Setup some test data
create table Parents (
      ID int not null primary key identity
    , Col1 varchar(10) not null
    , Col2 varchar(10) not null
)
insert into Parents (Col1, Col2) select 'A', 'B'
insert into Parents (Col1, Col2) select 'C', 'D'
insert into Parents (Col1, Col2) select 'E', 'F'

create table Children (
      ID int not null primary key identity
    , ParentID int not null references Parents (ID)
    , Col1 varchar(10) not null
    , Col2 varchar(10) not null
)
insert into Children (ParentID, Col1, Col2) select 1, 'g', 'h'
insert into Children (ParentID, Col1, Col2) select 1, 'i', 'j'
insert into Children (ParentID, Col1, Col2) select 2, 'k', 'l'
insert into Children (ParentID, Col1, Col2) select 3, 'm', 'n'

-- Get one parent to copy
declare @oldID int = 1

-- Create a place to store new ParentID
declare @newID table (
    ID int not null primary key
)

-- Create new parent
insert into Parents (Col1, Col2)
output inserted.ID into @newID -- Capturing the new ParentID
select Col1, Col2
from Parents
where ID = @oldID -- Only one parent

-- Create new children using the new ParentID
insert into Children (ParentID, Col1, Col2)
select n.ID, c.Col1, c.Col2
from Children c
    cross join @newID n
where c.ParentID = @oldID -- Only one parent

-- Show some output
select * from Parents
select * from Children 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:57:54.507

*   向 Order 添加一个名为 OldOrderID 的额外帮助器列
*   将所有订单从@OldCustomerID 复制到@NewCustomerID
*   使用 OldOrderID 列复制所有 OrderItems 以帮助建立关系
*   从 Order 中删除额外的帮助列

    ALTER TABLE 订单添加 OldOrderID INT NULL

    插入订单 (CustomerID, OrderName, OldOrderID) SELECT @NewCustomerID, OrderName, OrderID FROM Order WHERE CustomerID = @OldCustomerID

    INSERT INTO OrderItem (OrderID, Quantity) SELECT o.OrderID, i.Quantity FROM Order o INNER JOIN OrderItem i ON o.OldOrderID = i.OrderID WHERE o.CustomerID = @NewCustomerID

    更新订单集 OldOrderID = null WHERE OldOrderID 不为空

    ALTER TABLE 订单删除列 OldOrderID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T21:05:20.747

*如果*每个客户都是唯一的`OrderName`，您可以简单地执行以下操作：

```
INSERT INTO [Order] ([CustomerID], [OrderName])
  SELECT
    2 AS [CustomerID],
    [OrderName]
  FROM [Order]
  WHERE [CustomerID] = 1

INSERT INTO [OrderItem] ([OrderID], [Quantity])
  SELECT
    [o2].[OrderID],
    [oi1].[Quantity]
  FROM [OrderItem] [oi1]
  INNER JOIN [Order] [o1] ON [oi1].[OrderID] = [o1].[OrderID]
  INNER JOIN [Order] [o2] ON [o1].[OrderName] = [o2].[OrderName]
  WHERE [o1].[CustomerID] = 1 AND [o2].[CustomerID] = 2 
```

否则，您将不得不使用临时表或更改现有`Order`表，如 @LastCoder 建议的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T20:28:12.243

您是否必须将表 A 中的主键作为表 B 中的主键？如果没有，您可以使用 insert into 执行 select 语句。主键通常是从不断增加的种子（身份）开始的整数。解决这个问题并有问题地声明插入相同数据的缺点是有人认为这是该表上的不同键集，而不是“关系”或外键值。

您可以选择主键以插入其他表，而不是它们自己....除非您设置“身份插入”提示。除非您知道这样做的作用，否则不要这样做，因为如果您不了解后果，您可能会产生比其价值更多的问题。

我只会做 ole：

插入TableB select * from TableA where (criteria)

简单示例（假设 SQL Server 2008 或更高版本）。我的坏我没有看到你没有列出 TSQL 框架。不确定这是否会在 Oracle 或 MySql 上运行。

```
declare @Order Table ( OrderID int identity primary key, person varchar(8));

insert into @Order values ('Brett'),('John'),('Peter');

declare @OrderItem Table (orderItemID int identity primary key, OrderID int, OrderInfo varchar(16));

insert into @OrderItem
select 
    OrderID  -- I can insert a primary key just fine
,   person + 'Stuff'
from @Order

select *
from @Order

Select *
from @OrderItem 
```

# jquery - 如何将一个工厂模块传递给另一个？

> ID：14634300
> 
> 赞同：2
> 
> 时间：2013-01-31T20:12:56.933
> 
> 标签：jquery, module, angularjs

我正在设置两种自定义方法。一个用于整个应用程序的全局通信，另一个用于处理 http 请求。我的 http 请求模块需要我的 GlobalService 才能运行。如何将我的 GlobalService 提供程序传递给我的 CustomHTTP 提供程序？

**自定义HTTP**

```
angular.module("customHTTPService", []).factory("$chttp", [
  "$http", "GlobalService", function($http, $parse) {
    var chttp;
    return chttp = function(method, url) {
      return $http({
        method: method,
        url: GlobalService.apiRoot + url
      }).success(function(data, status, headers, config) {
        return [data, status, headers, config];
      }).error(function(data, status, headers, config) {
        return [data, status, headers, config];
      });
    };
  }
]); 
```

**我的全球服务提供商**

```
angular.module('GlobalService', []).factory("GlobalService", function($rootScope) {
  var sharedService, _ref;
  sharedService = {};
  return sharedService.apiRoot = (_ref = window.location.hostname) === "0.0.0.0" || _ref === "localhost" ? "http://localhost:3000/api/" : "http://website.com/api/";
}); 
```

**最后..我的应用实例化**

```
window.app = angular.module('web_client', ['GlobalService', 'customHTTPService'], function($routeProvider, $locationProvider) {}); 
```

所以为了测试这个，我把它扔到我的一个控制器中：

```
this.SettingsController = function($scope, $location, GlobalService, $http, $chttp) {
  $.v = $chttp;
}; 
```

然后我尝试在控制台中运行它..

```
$.v('get', '/index.html'); 
```

哪个返回：

```
ReferenceError: GlobalService is not defined 
```

甚至更上游一点，如果我把它放在我的 customHTTPService 模块中......：

```
console.log(GlobalService); 
```

我犯了同样的错误。

将模块相互传递的正确方法是什么？有什么我可以做得更好的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:32:34.850

您的`customHTTPService`模块需要将该`GlobalService`模块列为依赖项。

```
angular.module("customHTTPService", ['GlobalService']) 
```

但是，首先您需要更改以便`GlobalService`在之前定义您的`customHTTPService`，否则依赖项将失败。

[您可以在此处](http://docs.angularjs.org/guide/module)阅读有关模块和依赖项的更多信息。

# pyside - Pyside qwebview 自定义协议

> ID：14634302
> 
> 赞同：0
> 
> 时间：2013-01-31T20:13:06.610
> 
> 标签：pyside, qwebview, qnetworkaccessmanager

我想在我的 pyside 应用程序中支持自定义协议，但没有成功。到目前为止，我尝试过：

```
class MainWindow(QWebView):
    def __init__(self, parent=None):
        oldManager = self.page().networkAccessManager()
        self.page().setNetworkAccessManager(NetworkAccessManager(self, oldManager))

#in another file
class NetworkAccessManager(QNetworkAccessManager):
    def __init__(self, parent, oldManager):
        QNetworkAccessManager.__init__(self)
        self.oldManager = oldManager
        self.setCache(oldManager.cache())
        self.setCookieJar(oldManager.cookieJar())
        self.setProxy(oldManager.proxy())
        self.setProxyFactory(oldManager.proxyFactory())
        print('There')

    def createRequest(self, operation, request, data):
        print('And there') 
```

这导致在`segmentation fault`窗口下。我看到了[这个](http://srinikom.github.com/pyside-docs/PySide/QtWebKit/QWebPage.html?highlight=qwebpage#PySide.QtWebKit.PySide.QtWebKit.QWebPage.setNetworkAccessManager)：

> 目前不支持在 PySide.QtWebKit.QWebPage 使用后更改网络访问管理器。

但我不知道在这种情况下它会在哪里使用。设置网络管理器后尝试设置网页对象，分段错误消失。

PS：控制台内没有显示任何打印语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:27:37.890

如果 createRequest 没有返回回复，它就会崩溃。所以完整的解决方案是：

```
class MainWindow(QWebView):
    def __init__(self, parent=None):
        oldManager = self.page().networkAccessManager()
        self.setPage(DebugWebPage()) #if you want to set a custom page
        self.page().setNetworkAccessManager(NetworkAccessManager(self))

class NetworkAccessManager(QNetworkAccessManager):
    def __init__(self, parent):
        QNetworkAccessManager.__init__(self)

    def createRequest(self, operation, request, data):
        if request.url().scheme() != 'page':
            return QNetworkAccessManager.createRequest(self, operation, request, data)

        if operation == self.GetOperation:
            # Handle page:// URLs separately by creating custom
            # QNetworkReply objects.
            reply = PageReply(self, request.url(), self.GetOperation)
            print('here')
            return reply
        else:
            return QNetworkAccessManager.createRequest(self, operation, request, data)

class PageReply(QNetworkReply):
    def __init__(self, parent, url, operation):
        QNetworkReply.__init__(self, parent)
        self.content = '<html><head><title>Test</title></head><body>This is a test.</body></html>'
        self.offset = 0

        self.setHeader(QNetworkRequest.ContentTypeHeader, 'text/html; charset=utf-8')
        self.setHeader(QNetworkRequest.ContentLengthHeader, len(self.content))
        QTimer.singleShot(0, self, SIGNAL('readyRead()'))
        QTimer.singleShot(0, self, SIGNAL('finished()'))
        self.open(self.ReadOnly | self.Unbuffered)
        self.setUrl(url)

    def abort(self):
        pass

    def bytesAvailable(self):
        return len(self.content) - self.offset + QNetworkReply.bytesAvailable(self)

    def isSequential(self):
        return True

    def readData(self, maxSize):
        if self.offset < len(self.content):
            end = min(self.offset + maxSize, len(self.content))
            data = self.content[self.offset:end]
            self.offset = end
            return data 
```

注意：我真的不知道为什么，但是脚本在网络管理器中时出现的任何错误或回复都会导致分段错误。

[在此](http://diotavelli.net/PyQtWiki/Using%20a%20Custom%20Protocol%20with%20QtWebKit)基础上进行一些修正。

# matlab - 每日值到多年月均值 Matlab

> ID：14634316
> 
> 赞同：0
> 
> 时间：2013-01-31T20:13:42.783
> 
> 标签：matlab, loops, time-series

我观察到需要与生成的每月数据进行比较的每日数据，因此我需要获得三十年期间每个月的平均值。

我观察到的数据集目前是 365x31 的，其中行是每天（没有闰年！），额外的列是月份数（1-12）。

我遇到的问题是我似乎只能得到一个脚本来获得所有年份的平均值。IE。我无法弄清楚如何让脚本分别为每一列执行此操作。数据示例如下：

```
1    12    14
1    -15   10
2    13    3
2    2     37
...all the way to 12 for 365 rows 
```

SO：回顾一下，我需要得到 [12; -15；13; 2] 然后 [14; 10个；3；37] 等等。

我一直在尝试使用 unique() 函数来循环遍历它可以使行数平均但不正确。现在我需要它每个月（28-31 行）和列单独执行。结果应该是一个 12x30 矩阵。我觉得我错过了一些简单的东西。代码：

```
u = unique(m); %get unique values of m (months) ie) 1-12

for i=1:length(u)
   month(i) = mean(obatm(u(i), (2:31)); % the average for each month of each year
end 
```

欣赏任何想法！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:53:16.633

您可以简单地过滤每个月的行，然后应用`mean`，如下所示：

```
month = zeros(12, size(obatm, 2));
for k = 1:12
    month(k, :) = mean(obatm(obatm(:, 1) == k, :));
end 
```

**编辑：**
如果你想要一些花哨的东西，你也可以这样做：

```
cols = size(obatm, 2) - 1;
subs = bsxfun(@plus, obatm(:, 1), (0:12:12 * (cols - 1)));
vals = obatm(:, 2:end);
month = reshape(accumarray(subs(:), vals(:), [12 * cols, 1], @mean), 12, cols) 
```

*看，妈，没有循环！*

# android - 安卓视频预览失真+空气

> ID：14634317
> 
> 赞同：1
> 
> 时间：2013-01-31T20:13:50.753
> 
> 标签：android, flash, video-streaming, live-streaming, distortion

我正在尝试使用 flash (air for android) 制作一个实时流式传输的 android 应用程序。我的应用程序可用于将视频从设备流式传输到服务器。

我用于此的代码如下：

```
import flash.media.Camera;
import flash.net.NetConnection;
import flash.events.NetStatusEvent;
import flash.net.NetStream;

var cam:Camera = new Camera();
cam = Camera.getCamera();
cam.setMode(videoView.width, videoView.height, 15, true);
videoView.attachCamera(cam);

var netCon:NetConnection = new NetConnection();
netCon.client = this;
netCon.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus);
netCon.connect("rtmp://url.com/live");

var netStream:NetStream;

function onNetStatus(event:NetStatusEvent):void {
    if(event.info.code == "NetConnection.Connect.Success") {

        trace("pulishing");
        netStream = new NetStream(netCon);
        netStream.attachCamera(cam);
        netStream.publish("testlive");

    }
} 
```

上述程序在大多数设备中成功地将设备摄像头的视频流式传输到服务器，我们可以看到设备中正在拍摄的视频。但在某些设备中，视频会失真。

我附上了失真视频的屏幕。任何人都可以帮我追踪这个问题吗？我对此进行了很多搜索，但找不到任何好的答案。

我遇到此类问题的设备是在 4.0.4 上运行的定制 android 设备

此处显示的图像是我在设备屏幕上获得的。但是，当我在 JWplayer 上流式传输捕获的视频时，它显示的视频没有任何失真。

```
 [1]: http://i.stack.imgur.com/gP1wa.png 
```

# wpf - 自定义文本框的 WPF 验证错误模板

> ID：14634318
> 
> 赞同：7
> 
> 时间：2013-01-31T20:13:51.730
> 
> 标签：wpf, validation, custom-controls

[这个](https://stackoverflow.com/questions/14628311/wpf-binding-to-a-custom-property-in-a-custom-control)问题的分支-

像这样将验证错误模板附加到我的自定义文本框时 -

```
<local:CustomTextBox CustomText="{Binding ViewModelProperty}" Validation.ErrorTemplate="{StaticResource errorTemplate}"/>

<ControlTemplate x:Key="errorTemplate">
    <DockPanel>
        <Border BorderBrush="Red" BorderThickness="1">
            <AdornedElementPlaceholder x:Name="controlWithError"/>
        </Border>
        <TextBlock Foreground="Red" FontSize="20" FontFamily="Segoe UI" Margin="3,0,0,0"  MouseDown="Exclamation_MouseDown"  Tag="{Binding AdornedElement.(Validation.Errors)[0].ErrorContent, ElementName=controlWithError}">!</TextBlock>
    </DockPanel>
</ControlTemplate> 
```

如果 ViewModelProperty 中存在验证错误，我的应用程序会抛出异常 -

```
Key cannot be null.
Parameter name: key 
```

我不确定为什么会这样。是否需要做一些事情才能将新的错误模板分配给自定义控件？

更新：

我发现问题出在错误模板中的 Tag 属性上。如果我删除标签，它工作得很好。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T15:44:28.780

好吧，我设法解决问题的方法是删除 AdornedElement 关键字并更改错误模板，如下所示：

```
<local:CustomTextBox CustomText="{Binding ViewModelProperty}">
    <Validation.ErrorTemplate>
        <ControlTemplate>
            <DockPanel>
                <Border BorderBrush="Red" BorderThickness="1">
                    <AdornedElementPlaceholder x:Name="controlWithError"/>
                </Border>
                <TextBlock Foreground="Red" FontSize="20" FontFamily="Segoe UI" Margin="3,0,0,0"  MouseDown="Exclamation_MouseDown">!</TextBlock>
            </DockPanel>
        </ControlTemplate>
    </Validation.ErrorTemplate>
    <local:CustomTextBox.Style>
        <Style TargetType="{x:Type local:CustomTextBox}">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="ToolTip" Value="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
                    <Setter Property="Tag" Value="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=(Validation.Errors)[0].ErrorContent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </local:CustomTextBox.Style>
</local:CustomTextBox> 
```

我不明白为什么它在使用 AdornedElement 关键字时表现不同，但在使用 RelativeSource 绑定标签/工具提示时工作正常。虽然问题得到解决，但我欢迎任何关于为什么会发生这种情况的想法。

谢谢

# ruby-on-rails-3 - Rails 3 - 如何在单个表单上动态复制记录和提交多条记录

> ID：14634319
> 
> 赞同：1
> 
> 时间：2013-01-31T20:13:53.100
> 
> 标签：ruby-on-rails-3

我有一张发票表格。为了消除大量输入，用户需要输入发票属性，然后单击按钮复制第一条记录，更改几个属性，然后一次保存所有记录。Excel 风格。帮助？

```
<% form_for @invoice, :html => { :multipart => true } do |f| %>
   <%= f.error_messages %>

<table class="ExcelTable2007">
     <tr>      
       <th class="heading">PO #<font color="red"> *</font></th>
       <th class="heading">Invoice #</th>
       <th class="heading">"Bill To" is Correct</th>
       <th class="heading">Invoice Date</th>
       <th class="heading">Date Received</th>
       <th class="heading">AP Clerk Note</th>
       <th class="heading">Division</th>
       <th class="heading">GR Approver</th>
       <th class="heading">GR Alternate Approver</th>
       <th class="heading">Invoice Attachment</th>
     </tr>  
     <tr>      
       <td class="heading"><%= f.text_field :po_number, :size => 10 %></td>
       <td class="heading"><%= f.text_field :invoice_number, :size => 10 %></td>
       <td class="heading"><%= f.check_box :bill_to_address %></td>
       <td class="heading"><%= f.calendar_date_select "invoice_date", :time => false, :size => 12 %></td>
       <td class="heading"><%= f.calendar_date_select "date_received", :time => false, :size => 12 %></td>
       <td class="heading"><%= f.text_field :clerk_note %></td>
       <td class="heading"><%= f.collection_select :division_id, Division.active.order(:division), :id, :division, :include_blank => true %></td>
       <td class="heading"><%= f.collection_select :approver_username, Aduser.order(:last_name, :first_name), :username, :fullname, :include_blank => true %></td>
       <td class="heading"><%= f.collection_select :alternate_approver_username, Aduser.order(:last_name, :first_name), :username, :fullname, :include_blank => true %></td>
       <td class="heading"><%= f.file_field :attachment %></td>
      </tr>
    </p>
</table>
&emsp;&emsp;&emsp;&emsp;<%= link_to "Add Invoice", clone_invoice_url(@invoice) %>
  <br>
  <br>

  <div class="actions">
    <%= f.submit "Submit" %>
  </div>
  </p>
<% end %> 
```

我尝试了以下操作，但收到了无效的真实性令牌：

```
def clone_invoice
  @invoice = Invoice.find(params[:id]).dup
  @invoice.save
end 
```

谁能帮我？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:44:41.967

试试这个。

```
def clone_invoice
  @invoice = Invoice.find(params[:id])
  @new_invoice = @invoice.dup
end 
```

如果您的发票有附件，那么您还需要复制该附件。

```
dupfile(@invoice.attachement.to_s, @new_invoice.attachment.to_s) 
```

在您的路线文件中，尝试

```
match 'invoices/:id/invoice_clone' => "invoices#clone_invoice", :as => "invoice_clone" 
```

然后在你的`link_to`，改变`clone_invoice_url`为`invoice_clone_path`

# powershell - 使用带有本地图像作为输入的 Google 图片搜索的脚本

> ID：14634321
> 
> 赞同：14
> 
> 时间：2013-01-31T20:13:57.017
> 
> 标签：powershell, curl, batch-file, google-image-search

我正在寻找批处理或 Powershell 脚本，以使用本地图像作为输入在 Google 图像上搜索类似图像。

![在此处输入图像描述](../Images/a87d985040cac10feaf367ba0aefaf04.png)

**到目前为止我的研究**

使用 URL 而不是本地文件进行图像搜索的语法如下：
`[https://www.google.com/searchbyimage?image_url=TEST](https://www.google.com/searchbyimage?image_url=TEST)`
其中 TEST 可以替换为您拥有的任何图像 URL。

我使用[cURL for windows](http://curl.haxx.se/download.html)和[imgur](http://api.imgur.com/)作为临时图像保护程序。我能够通过批处理将文件上传到 imgur。然后使用该图像 URL 在 Google 上搜索类似图像。

但我想知道是否可以不使用任何临时缓存，如 imgur 或任何其他在线图片服务。只是一批，卷曲，谷歌和我。

只是一个想法。VBS 脚本是否能够使用本地文件作为输入在 Google 图片上进行搜索？
还是像[Tineye](http://www.tineye.com/)这样的类似 Web 服务更适合该任务？

* * *

这个 powershell 片段将打开 Googles 图片搜索。

```
$IE= new-object -com InternetExplorer.Application
$IE.navigate2("https://www.google.com/imghp?hl=en")
while ($IE.busy) {
sleep -milliseconds 50
}
$IE.visible=$true 
```

接下来的步骤是获取一些按钮的 ID 并以编程方式单击它们以选择本地文件。但在这里我没有足够的经验来实现这一点。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-16T02:10:35.993

很酷的问题！我花了太多时间修补这个，但我想终于明白了:)

简而言之，您必须将图像的原始字节、嵌入并正确格式化以及其他一些内容上传到`images.google.com/searchbyimage/upload`. 对该请求的响应将包含一个新 URL，该 URL 会将您发送到实际结果页面。

此函数将返回结果页面 URL。你可以用它做任何你想做的事情，但要简单地在浏览器中打开结果，请将其传递给`Start-Process`.

当然，Google 可以随时为此更改工作流程，所以不要指望这个脚本永远有效。

```
function Get-GoogleImageSearchUrl
{
    param(
        [Parameter(Mandatory = $true)]
        [ValidateScript({ Test-Path $_ })]
        [string] $ImagePath
    )

    # extract the image file name, without path
    $fileName = Split-Path $imagePath -Leaf

    # the request body has some boilerplate before the raw image bytes (part1) and some after (part2)
    #   note that $filename is included in part1
    $part1 = @"
-----------------------------7dd2db3297c2202
Content-Disposition: form-data; name="encoded_image"; filename="$fileName"
Content-Type: image/jpeg

"@
    $part2 = @"
-----------------------------7dd2db3297c2202
Content-Disposition: form-data; name="image_content"

-----------------------------7dd2db3297c2202--

"@

    # grab the raw bytes composing the image file
    $imageBytes = [Io.File]::ReadAllBytes($imagePath)

    # the request body should sandwich the image bytes between the 2 boilerplate blocks
    $encoding = New-Object Text.ASCIIEncoding
    $data = $encoding.GetBytes($part1) + $imageBytes + $encoding.GetBytes($part2)

    # create the HTTP request, populate headers
    $request = [Net.HttpWebRequest] ([Net.HttpWebRequest]::Create('http://images.google.com/searchbyimage/upload'))
    $request.Method = "POST"
    $request.ContentType = 'multipart/form-data; boundary=---------------------------7dd2db3297c2202'  # must match the delimiter in the body, above
    $request.ContentLength = $data.Length

    # don't automatically redirect to the results page, just take the response which points to it
    $request.AllowAutoredirect = $false

    # populate the request body
    $stream = $request.GetRequestStream()
    $stream.Write($data, 0, $data.Length)
    $stream.Close()        

    # get response stream, which should contain a 302 redirect to the results page
    $respStream = $request.GetResponse().GetResponseStream()

    # pluck out the results page link that you would otherwise be redirected to
    (New-Object Io.StreamReader $respStream).ReadToEnd() -match 'HREF\="([^"]+)"' | Out-Null
    $matches[1]
} 
```

用法：

```
$url = Get-GoogleImageSearchUrl 'C:\somepic.jpg'
Start-Process $url 
```

## 编辑/解释

这里有更多细节。我基本上只是带你完成我在弄清楚这一点时所采取的步骤。

首先，我只是继续进行本地图像搜索。

![谷歌图片搜索](../Images/25ec91c78b820dbe7f7f2db3f45f5f09.png)

它发送给您的 URL 很长（在 longcat 的情况下约为 1500 个字符），但不足以完全编码图像（60KB）。因此，您可以立即看出它比简单地执行 base64 编码之类的操作更复杂。

接下来，我启动了 Fiddler 并查看了当您进行本地图像搜索时实际发生的情况。浏览/选择图像后，您会看到一些`images.google.com/searchbyimage/upload`. 详细查看该请求揭示了基本机制。

![提琴手会话](../Images/f22dd1ecb58f61e68b11bee4030c7607.png)

1.  数据以 的格式发送`multipart/form-data`，您需要指定分隔不同字段的字符串（红色框）。如果您使用 Bing/Google，您会发现这`multipart/form-data`是某种网络标准，但对于这个示例来说，这并不重要。
2.  您需要（或至少应该）包含原始文件名（橙色框）。也许这会影响搜索结果。
3.  完整的原始图像包含在该`encoded-image`字段中（绿色框）。
4.  响应不包含实际结果，它只是重定向到实际结果页面（紫色框）

这里没有显示一些字段，在底部。它们不是很有趣。

一旦我弄清楚了基本的工作流程，就只需要编写代码即可。我只是使用标准的 .NET Web 请求 API 尽可能地复制了我在 Fiddler 中看到的 Web 请求。[这个 SO 问题](https://stackoverflow.com/q/4256136/1366219)的答案展示了您需要的 API，以便在 Web 请求中正确编码和发送正文数据。

通过一些实验，我发现您只需要我在代码中包含的两个正文字段（`encoded_image`和`image_content`）。浏览 Web UI 包括更多内容，但显然它们不是必需的。

更多的实验表明，Fiddler 中显示的其他标头或 cookie 都不是真正需要的。

出于我们的目的，我们实际上并不想访问结果页面，而只是获取指向它的指针。因此我们应该设置`AllowAutoRedirect`为`$false`。这样，Google 的 302 重定向就直接提供给我们，我们可以从中提取结果页面 URL。

在编写此编辑时，我拍了拍我的额头并意识到 Powershell v3 具有`Invoke-WebRequest`cmdlet，它可能会消除对 .NET Web API 调用的需要。不幸的是，我在修补 10 分钟后无法使其正常工作，所以我放弃了。cmdlet 编码数据的方式似乎有些问题，尽管我可能是错的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-03T22:51:26.690

```
function Get-GoogleImageSearchUrl
{
    param(
        [Parameter(Mandatory = $true)]
        [ValidateScript({ Test-Path $_ })]
        [string] $ImagePath
    )

    # extract the image file name, without path
    $fileName = Split-Path $imagePath -Leaf

    # the request body has some boilerplate before the raw image bytes (part1) and some after (part2)
    #   note that $filename is included in part1
    $part1 = @"
--7dd2db3297c2202
Content-Disposition: form-data; name="encoded_image"; filename="$fileName"
Content-Type: application/octet-stream`r`n`r`n
"@
    $part2 = @"
`r`n--7dd2db3297c2202--`r`n
"@

    # grab the raw bytes composing the image file
    $imageBytes = [Io.File]::ReadAllBytes($imagePath)

    # the request body should sandwich the image bytes between the 2 boilerplate blocks
    $encoding = New-Object Text.ASCIIEncoding
    $data = $encoding.GetBytes($part1) + $imageBytes + $encoding.GetBytes($part2)

    # create the HTTP request, populate headers
    $request = [Net.HttpWebRequest] ([Net.HttpWebRequest]::Create('http://images.google.com/searchbyimage/upload'))
    $request.Method = "POST"
    $request.ContentType = 'multipart/form-data; boundary=7dd2db3297c2202'  # must match the delimiter in the body, above

    # don't automatically redirect to the results page, just take the response which points to it
    $request.AllowAutoredirect = $false

    # populate the request body
    $stream = $request.GetRequestStream()
    $stream.Write($data, 0, $data.Length)
    $stream.Close()        

    # get response stream, which should contain a 302 redirect to the results page
    $respStream = $request.GetResponse().GetResponseStream()

    # pluck out the results page link that you would otherwise be redirected to
    (New-Object Io.StreamReader $respStream).ReadToEnd() -match 'HREF\="([^"]+)"' | Out-Null
    $matches[1]
}
$url = Get-GoogleImageSearchUrl 'C:\somepic.jpg'
Start-Process $url 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-30T07:52:34.480

将[GoogleImageSearch 模块用于 PowerShell](https://github.com/KUTlime/PowerShell-GoogleImageSearch-Module)怎么样？

免责声明：我是这个模块的开发人员，我使用以前的答案来构建这个模块。

# postgresql - 如何在 PostgreSQL 中查看视图的 CREATE VIEW 代码？

> ID：14634322
> 
> 赞同：217
> 
> 时间：2013-01-31T20:13:57.590
> 
> 标签：postgresql, view, definition

有没有一种简单的方法可以查看用于使用 PostgreSQL 命令行客户端创建视图的代码？

类似于`SHOW CREATE VIEW`来自 MySQL 的东西。

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2013-03-14T22:02:54.457

不得不回到这里查找`pg_get_viewdef`（如何记住！！），所以搜索了一个更令人难忘的命令......并得到了它：

```
\d+ viewname 
```

`\?`您可以通过在 pgsql 命令行中键入来查看类似类型的命令。

额外提示：emacs 命令`sql-postgres`使 pgsql 更加愉快（编辑、复制、粘贴、命令历史记录）。

* * *

## 回答 #2

> 赞同：168
> 
> 时间：2013-01-31T20:36:53.487

```
select pg_get_viewdef('viewname', true) 
```

手册中提供了所有这些功能的列表：

[http://www.postgresql.org/docs/current/static/functions-info.html](http://www.postgresql.org/docs/current/static/functions-info.html)

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2013-01-31T20:29:23.970

```
select definition from pg_views where viewname = 'my_view' 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2016-08-09T15:48:30.453

如果你想要一个 ANSI SQL-92 版本：

```
select view_definition from information_schema.views where table_name = 'view_name'; 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2017-04-08T04:47:46.213

来自 v9.6 及更高版本的好消息。视图编辑现在是 psql 原生的。只需调用`\ev`命令。视图定义将显示在您配置的编辑器中。

`julian@assange=# \ev your_view_names`

奖金。一些与查询缓冲区交互的有用命令。

```
Query Buffer
  \e [FILE] [LINE]       edit the query buffer (or file) with external editor
  \ef [FUNCNAME [LINE]]  edit function definition with external editor
  \ev [VIEWNAME [LINE]]  edit view definition with external editor
  \p                     show the contents of the query buffer
  \r                     reset (clear) the query buffer
  \s [FILE]              display history or save it to file
  \w FILE                write query buffer to file 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-09-27T11:13:15.190

这些是需要指出的一点。
使用函数`pg_get_viewdef`或`pg_views`或 information_schema.views **，您将始终获得**原始 DDL 的重写版本。
重写的版本可能与您的原始 DDL 脚本相同，也可能不同。

如果规则管理器重写您的视图定义，您的原始 DLL 将丢失，您将能够读取视图定义的唯一重写版本。
并非所有视图都被重写，但如果您使用子选择或连接，您的视图可能会被重写。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2021-10-31T13:12:17.480

在`psql`cli 中，您可以使用

```
\d+ <yourViewName>
\sv <yourViewName> 
```

输出如下：

```
\d+ v_ma_students

                               View "public.v_ma_students"
 Column |         Type          | Collation | Nullable | Default | Storage  | De
scription
--------+-----------------------+-----------+----------+---------+----------+---
SOMETHINGS HERE

View definition:
 SELECT student.sno,
    student.sname,
    student.ssex,
    student.sage,
    student.sdept
   FROM student
  WHERE student.sdept::text = 'MA'::text;
Options: check_option=cascaded

\sv v_ma_students

CREATE OR REPLACE VIEW public.v_ma_students AS
 SELECT student.sno,
    student.sname,
    student.ssex,
    student.sage,
    student.sdept
   FROM student
  WHERE student.sdept::text = 'MA'::text
 WITH CASCADED CHECK OPTION 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-09-21T12:47:44.557

在命令行客户端*psql* 中，您可以使用以下命令：

```
\sv <VIEWNAME> 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-12-17T05:10:26.593

查找“CREATE TABLE ...”查询的直接方法是使用此查询 -

```
SHOW TABLE your_schema_name.your_table_name 
```

# ruby-on-rails - Using Cucumber, is there a way to log a user in without the interface?

> ID：14634330
> 
> 赞同：4
> 
> 时间：2013-01-31T20:14:20.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, cucumber

The vast majority of my cucumber features require the user to be logged in. However I don't really need to test the login functionality for every single test. I'm currently using Devise for my authentication.

I'm looking for a way to sign a user in with devise, without filling out the sign in form. Is there anyway to do this? I would prefer to not have to use the sign in action for every test.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T23:02:21.070

No, there is no way. In the [documentation](https://github.com/plataformatec/devise), with regard to the `sign_in @user` and `sign_out @user` helper methods, it says:

> These helpers are not going to work for integration tests driven by Capybara or Webrat. They are meant to be used with functional tests only. Instead, fill in the form or explicitly set the user in session

As you said yourself, it is probably cleanest to do it with a `before :each` block. I like to structure it like the following:

```
context "login necessary" do
  # Before block
  before do
    visit new_user_session_path
    fill_in "Email", with: "test@test.com"
    fill_in "Password", with: "password"
    click_button "Login"
    assert_contain "You logged in successfully."
  end

  # Actual tests that require the user to be logged in
  it "does everything correctly" do
    # ...
  end
end

context "login not necessary" do
  it "does stuff" do
    # code
  end
end 
```

I found this to be quite useful, since if I change authentication rules (i.e. whether or not the user has to be logged in for a specific path) I can just take the whole test and move it into the other description block, without changing any more code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T02:48:11.663

Generally, you should always test through the interface. But I think this is an acceptable exception.

I'm using devise with capybara with rspec but it should work for you too.

In a helper I have this:

```
module LoginHelper
  def login_as(user)
    super(user, :scope => :user, :run_callbacks => false)
  end
end

RSpec.configure do |config|
  config.include Warden::Test::Helpers, :type => :feature
  config.include LoginHelper, :type => :feature

  config.before :each, :type => :feature do
    Warden.test_mode!
  end

  config.after :each, :type => :feature do
    Warden.test_reset!
  end
end 
```

Then in the feature:

```
 background do
    login_as(user)
    visit root_path
  end 
```

Also see:
[How to Stub out Warden/Devise with Rspec in Capybara test](https://stackoverflow.com/questions/8705790/how-to-stub-out-warden-devise-with-rspec-in-capybara-test)

# assembly - 通用机器代码语言？

> ID：14634334
> 
> 赞同：3
> 
> 时间：2013-01-31T20:14:31.113
> 
> 标签：assembly, computer-science, computer-architecture, machine-code

我一直在思考机器代码是如何特定于架构的，以及 Javascript 如何在（几乎）每个浏览器中工作。我一直在做一个必须做一些严肃计算的项目，它是基于 Javascript 的，需要一整分钟才能完成计算。这让我渴望 C 的速度。但该项目使用 Javascript 的全部原因是为了简单和可移植性。

这给了我一个想法，如果有一种类似于 Javascript 的语言在每个架构上都可以移植并作为可执行文件运行呢？大多数人会指向 Java，但我在想一些开销更少并由操作系统处理的东西。不是字节码，而是本机机器码。

做了一些研究和思考来完成这项任务的不可能。您如何为特定架构制作一个与普通 C 编写的应用程序一样小的可执行文件，该文件可以在每个架构上以相同的速度运行，就好像它是为该架构在 C 中本地编译的一样？

这是我的下一个想法。本机机器代码是特定于架构的，每个架构都有某些特殊功能，有时处理相同的任务会有所不同。此外，某些优化是特定于每个架构的。如果有通用机器码怎么办？当操作系统将指令加载到内存中时，它会自动转换指令以适应架构。或者也许（更疯狂的想法）CPU 可以包含接收通用机器码并自动将通用机器码适应其本机机器码的能力？

通用机器代码规范必须足够通用以涵盖正常的机器代码功能。

当然，如果通用机器代码确实有效，那么人们可能会想要一种可由所有操作系统处理的通用可执行格式。这样，可执行文件不需要跨操作系统更改。这导致需要专门制作跨机器通用的框架。更重要的是操作系统特定的功能，以及超出我所知的输入和输出能力。

通用机器码编译的可执行文件：

优点：

*   与本机编译的可执行文件几乎相同的大小
*   与本机编译的可执行文件几乎相同的性能

缺点：

*   加载速度稍慢（希望不存在），因为它在将可执行文件加载到 ram 时将通用机器代码转换为本机机器代码

可行吗？

编辑：

我用过Java，用它做了一个游戏。它不像我想要的那样普遍，也不友好。* 它是它自己的编程语言，由 Oracle 维护。专有的，有点太大了。需要在某些机器上安装。

更具体地说，我不是在谈论拥有一种新的编程语言。我说的是拥有一种新的机器代码语言，它包含足够的额外信息，当执行时，会发生将其转换为架构机器代码的非常简单的过程。这样，C 编译器就可以将其可执行文件编译成通用机器代码，并且可执行文件可以在任何地方运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T20:15:55.723

已经有类似的东西了，它叫做p-code

[http://en.wikipedia.org/wiki/P-code_machine](http://en.wikipedia.org/wiki/P-code_machine)

这些天来，虚拟机基本上扮演着这个角色

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T20:21:50.523

Lambda 演算和/或图灵机。其他一切都只是语法糖。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T20:49:26.753

您不会让芯片供应商就通用机器代码达成一致。一个供应商不能用一个新的机器代码接管世界，否则他们会拥有（ARM 几乎有，但最终它不会）。

在今天的专利诉讼中，您甚至无法制造 VLIW 处理器，并且在一个薄的软件层中模拟各种指令集，而且您无论如何也无法接管世界，您能说 transmeta 吗？

所以你被软件中的解释器困住了。因此，它可以追溯到 JAVA 的“已经尝试过”和几十年前的 p 代码（pascal），以及 python 在做什么等等。甚至是 llvms 字节码。

您对“每台机器的速度相同”的要求不会发生。

您已经在 javascript 中使用了最便携的语言，而且它的速度和它一样快。C 是您所追求的通用语言，它相当快并且可以在任何地方运行（比任何其他语言都多），问题在于操作系统，而不仅仅是用户界面。

# php - 在页面的一部分上播放 Flash 视频 - iframe 与 DIV 并包含在 PHP 中

> ID：14634340
> 
> 赞同：0
> 
> 时间：2013-01-31T20:15:02.393
> 
> 标签：php, javascript, iframe, include

我想在我的原始页面中使用 DIV 并包含并播放 FLV。我决定使用 INCLUDE 并引用“videoplayer.html”来播放文件，但它不起作用。注意：播放器使用 MIT Opensource SWFObject v2.2 文件，该文件在我的标题中名为 "lessonheader.php" 。

所以，这不起作用（只有一个空白的 DIV 区域）：来自我的“lessonheader.php”文件

```
<head>...
<script type="text/javascript" src="swfobject.js"></script>
... </head>
... 
```

从我的主页：

```
 include("includes/lessonheader.php");
...
elseif ($answertype == "vid") {
        include '.\videos\videoplayer.html';
        echo '<p>Click next to proceed, or watch the video again.</p> 
```

**如果我使用简单的 iframe，它会：**

```
elseif ($answertype == "vid") {
    echo '<iframe src=".\videos\videoplayer.html"></iframe>';
    echo '<p>Click next to proceed, or watch the video again.</p> 
```

作为参考，这里是 videoplayer.html （放在顶部的注释脚本对包含不工作或 iframe 工作没有影响 - 只是测试一下）：

```
<script type="text/javascript" src="swfobject.js"></script>
<div id="wb_FlashVideoPlayer1" style="margin:0;padding:0;position:relative;left:10px;top:10px;width:640px;height:480px;text-align:left;z-index:5;">
<p>This is before the player </p>
    <div id="FlashVideoPlayer1"></div>
This is after the player
<script type="text/javascript">
   var flashvars = {};
   var params = {};
   flashvars.videoPath = "addition1.f4v";
...
   params.salign = "tl";
   swfobject.embedSWF("wb.videoplayer.swf", "FlashVideoPlayer1", "640", "480", "9.0.0", false, flashvars, params);
</script>
</div> 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:41:53.073

我解决了这个问题。这与我相对于相关 PHP 页面的文件“swfobject.js”和“wb.videoplayer.swf”的位置有关。我将它们放在“包含”文件夹中，并且我认为我已经指定了该目录。

谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:21:30.440

正斜杠...

（假设它的Linux）

# c# - 是否可以在不破坏二进制兼容性的情况下升级到通用 IEnumerable

> ID：14634346
> 
> 赞同：1
> 
> 时间：2013-01-31T20:15:39.473
> 
> 标签：c#, ienumerable

Fiddler 的 HTTPHeaders 类有一个成员`Storage`，它是一个`List<HTTPHeaderItem>`.

HTTPHeaders 类因此以 .NET 1.1 样式公开了一个枚举器：`public System.Collections.IEnumerator GetEnumerator()`. 此方法仅返回`Storage.GetEnumerator()`.

问题：

1.  不实施是否会造成性能损失`IEnumerable<HTTPHeaderItem>`？或者编译是否`foreach(HTTPHeaderItem in oHTTPHeaders)`足够聪明，可以识别出它返回的对象也实现了 IEnumerable 的特定类型版本并避免了一堆强制转换？

2.  是否甚至*可以*在`IEnumerable<HTTPHeaderItem>`不隐藏（通过显式接口实现）旧 GetEnumerator() 方法的情况下实现？隐藏旧方法会破坏与旧扩展的二进制兼容性（例如`Method not found: 'System.Collections.IEnumerator Fiddler.HTTPHeaders.GetEnumerator()`'.）

## 结果

*正如下面 Servy 的回答所指出的，在添加返回类型专用枚举器的公共 GetEnumerable() 时，没有简单的方法可以避免破坏二进制兼容性。

但是，在我的特定情况下，我有点幸运。HTTPHeaders 是一个基类，几乎所有调用者都使用两个派生类（HTTPRequestHeaders 和 HTTPResponseHeaders）之一。我已经为每个派生类添加了公共通用 GetEnumerator() 方法。这些新的特定于类型的枚举器由针对新版本编译的代码调用，而尚未重新编译的旧插件仍然从基类中检索非泛型枚举器。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T20:24:04.180

1.  您需要提供*一些*GetEnumerator 方法来返回实际的 HTTPHeaderItem 类型，以便避免进行强制转换。这意味着要么实现`IEnumerable<HTTPHeaderItem>`或让一个隐式`GetEnumerator`方法返回实际类型。在一般情况下，这意味着您可以依赖 Duck 输入，而不是 implement `IEnumerable<T>`，但在您的情况下，由于这样的方法已经存在并且签名错误，这是不可能的。

2.  当然。只是隐藏`IEnumerable<HTTPHeaderItem>`实现而不是`IEnumerable`实现。这正是数组所做的（以保持二进制兼容性）。

这是一个简单的例子：

```
public class Foo : IEnumerable, IEnumerable<HTTPHeaderItem>
{

    public IEnumerator GetEnumerator()
    {
        throw new NotImplementedException();
    }

    IEnumerator<HTTPHeaderItem> IEnumerable<HTTPHeaderItem>.GetEnumerator()
    {
        throw new NotImplementedException();
    }
} 
```

# git - 在其他 git repo 中对 git repo 进行版本控制

> ID：14634347
> 
> 赞同：3
> 
> 时间：2013-01-31T20:15:50.497
> 
> 标签：git

我正在开发一个与 git 存储库一起使用的小软件，我希望能够编写一些测试。为此，我在`test-repo`项目中创建了一个文件夹，该文件夹本身就是一个 git 存储库。在我的测试中，我引用了该存储库，以确保我针对处于精确已知状态的存储库运行的命令。

我的问题是：我可以将该嵌套存储库版本作为项目主存储库的一部分吗？请注意，这与子模块解决的问题并不完全相同：嵌套存储库实际上是封闭项目的一部分，而不是外部引用的软件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:23:32.880

我认为问题在于 git 检测到自己的`.git`文件并且不允许使用它们。但是，如果您将测试存储库的`.git`文件夹重命名为不同的名称，例如`_git`它将起作用。您只需要做的一件事就是`--git-dir`在测试中使用 GIT_DIR 变量或命令行参数来指定文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:50:08.123

即使它不是“外部引用的软件”，[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)仍然是一种很好的方法，因为它有助于捕获存储库的已知状态。

我宁愿将两者都放在`repo`父`test-repo`仓库“ `project`”中：

```
project
  repo
  rest-repo 
```

这样，我可以记录两者的准确 SHA1`repo`和`test-repo`.

# internet-explorer - 32 位 IE 的附加组件在注册后被禁用？

> ID：14634348
> 
> 赞同：0
> 
> 时间：2013-01-31T20:15:51.113
> 
> 标签：internet-explorer, bho, add-on

我创建了一个浏览器帮助对象（IE 的附加组件）并将其注册为 32 位版本的 IE，但该注册的附加组件未按我的意愿启用，我必须打开 IE 的附加组件管理器才能启用它手动。

您能否帮我在注册后立即启用它作为默认设置。应该这样做，因为我不认为显示有关如何手动启用该插件以供用户遵循的说明是一个好主意。

如果您需要有关任何事情的更多详细信息，请告诉我！谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T19:35:36.547

这违背了 Microsoft 的建议，大多数工具栏和 IE 扩展都不会这样做。从 Adob​​e（阅读器和闪存）、Oracle 的 Java、DivX、Google 工具栏等中获得启发。这些扩展都没有在安装时启用，但让用户自己去做。但是，如果您的扩展属于 SpyWare、AdsWares 类，或者只是一种普通的旧病毒 - 那么您当然希望启用您的扩展，而无需用户实际启用它。

在此处执行：HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Ext\Settings{CLSID}\Flags (REG_DWORD)

{CLSID} 是您的对象的 COM clsid。位零将指示扩展是否被禁用/启用。重启IE后生效。

# shell - 使用 awk 调用可执行程序

> ID：14634349
> 
> 赞同：65
> 
> 时间：2013-01-31T20:15:53.510
> 
> 标签：shell, awk

我有一个 C 语言程序，我想在 shell 脚本中使用 awk 来调用它。我怎么能做这样的事情？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-31T20:19:50.863

从 AWK 手册页：

```
系统(cmd)
              执行 cmd 并返回其退出状态

```

GNU AWK[手册](http://www.gnu.org/software/gawk/manual/gawk.html)还有[一个部分](http://www.gnu.org/software/gawk/manual/gawk.html#I_002fO-Functions)，部分描述了该`system`功能并提供了一个示例：

```
system("date | mail -s 'awk run done' root") 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2019-03-21T10:54:23.240

一种更健壮的方法是使用`getline()`GNU 的函数`awk`来使用管道中的变量。在表单`cmd | getline`结果中，`cmd`运行，然后将其输出通过管道传输到`getline`. `1`如果有输出，`0`如果 EOF，`-1`失败时返回。

`BEGIN`如果命令*不*依赖于文件的内容，例如简单`date`或`ls`.

上面的一个简单例子是

```
awk 'BEGIN {
    cmd = "ls -lrth"
    while ( ( cmd | getline result ) > 0 ) {
        print result
    }
    close(cmd);
}' 
```

当要运行的命令是文件的列内容的一部分时，您会`cmd`在 main 中生成字符串，`{..}`如下所示。例如，考虑一个`$2`包含文件名的文件，并且您希望将其替换为`md5sum`文件的哈希内容。你可以做

```
awk '{ cmd = "md5sum "$2
       while ( ( cmd | getline md5result ) > 0 ) { 
           $2 = md5result
       }
       close(cmd);
 }1' 
```

涉及外部命令的另一个常见用法`awk`是在`date`处理期间，当您`awk`不支持开箱即用的时间函数时`mktime()`，`strftime()`函数。

考虑一种情况，当您将 Unix EPOCH 时间戳存储在列中并且您希望将其转换为人类可读的日期格式。假设 GNU`date`可用

```
awk '{ cmd = "date -d @" $1 " +\"%d-%m-%Y %H:%M:%S\"" 
       while ( ( cmd | getline fmtDate) > 0 ) { 
           $1 = fmtDate
       }
       close(cmd);
}1' 
```

对于输入字符串

```
1572608319 foo bar zoo 
```

上面的命令产生的输出为

```
01-11-2019 07:38:39 foo bar zoo 
```

可以定制该命令以修改`date`给定行中任何列上的字段。请注意，这`-d`是一个 GNU 特定的扩展，*BSD 变体支持`-f`（虽然不完全相似`-d`）。

有关更多信息，[请参阅 awk.freeshell.org](http://awk.freeshell.org/)页面上`getline`的这篇[AllAboutGetline](http://awk.freeshell.org/AllAboutGetline)文章。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-01-31T20:22:53.733

有几种方法。

1.  awk 有一个`system()`可以运行 shell 命令的函数：

    `system("cmd")`

2.  您可以打印到管道：

    `print "blah" | "cmd"`

3.  您可以使用 awk 构造命令，并将所有输出通过管道传输到 shell：

    `awk 'some script' | sh`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-01T01:32:50.147

像这样简单的东西会起作用

```
awk 'BEGIN{system("echo hello")}' 
```

和

`awk 'BEGIN { system("date"); close("date")}'`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-30T16:31:58.867

这真的取决于 :) 方便的 linux 核心 utils ( `info coreutils`) 之一是`xargs`. 如果您正在使用`awk`，您可能会想到一个更复杂的用例 - 您的问题不是很详细。

```
printf "1 2\n3 4" | awk '{ print $2 }' | xargs touch 
```

将执行`touch 2 4`。这里`touch`可以替换为您的程序。更多信息`info xargs`和`man xargs`（真的，*阅读这些*）。我相信你想`touch`用你的程序替换。

**前面提到的脚本的**细分：****

 **```
printf "1 2\n3 4"
# Output:
1 2
3 4

# The pipe (|) makes the output of the left command the input of
# the right command (simplified)
printf "1 2\n3 4" | awk '{ print $2 }'
# Output (of the awk command):
2
4

# xargs will execute a command with arguments. The arguments
# are made up taking the input to xargs (in this case the output
# of the awk command, which is "2 4".
printf "1 2\n3 4" | awk '{ print $2 }' | xargs touch
# No output, but executes: `touch 2 4` which will create (or update
# timestamp if the files already exist) files with the name "2" and "4" 
```

**更新**在原始答案中，我使用`echo`而不是`printf`. 但是，`printf`正如评论所指出的那样，这是更好、更便携的替代方案（可以找到与讨论的重要链接）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-01-10T07:31:09.573

我使用 awk 的强大功能删除了一些已停止的 docker 容器。在将`cmd`字符串传递给`system`.

`docker ps -a | awk '$3 ~ "/bin/clish" { cmd="docker rm "$1;system(cmd)}'`

在这里，我使用模式为“/bin/clish”的第三列，然后在第一列中提取容器 ID 来构造我的`cmd`字符串并将其传递给`system`.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-06-16T08:19:31.317

```
#!/usr/bin/awk -f

BEGIN {
    command = "ls -lh"

    command |getline
} 
```

在 awk 脚本中运行“ls -lh”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-15T11:35:22.957

我能够通过以下方法完成此操作

```
cat ../logs/em2.log.1 |grep -i 192.168.21.15 |awk '{system(`date`); print $1}' 
```

awk 有一个名为 system 的函数，它使您能够在 awk 的输出中执行任何 linux bash 命令。**

# ruby-on-rails - 更改密码时防止设计发送电子邮件

> ID：14634356
> 
> 赞同：3
> 
> 时间：2013-01-31T20:16:30.920
> 
> 标签：ruby-on-rails, devise

我在我的 Rails 3 应用程序中使用 Devise。当前重置密码的行为是点击“忘记密码？” 关联。这里的链接是：

```
(url)/password/new.user 
```

这将在设计 passwords_controller.rb 中调用以下方法：

```
def new
    build_resource({})
end 
```

此方法将执行以下操作：

1.  生成密码重置令牌并将其添加到数据库中，

2.  使用包含令牌的链接向此人发送电子邮件：

    (url)/密码/编辑?reset_password_token=xxxxxxxxxxxxxxx

有什么方法可以说服 Devise 只执行第 1 步而不执行第 2 步？如果可能的话，是否有任何我应该注意的安全问题，并且我确实采用了这种方法来简化网站的一部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T22:23:40.370

我建议覆盖`send_devise_notification`您的 User (?) 模型并在通知值为`:reset_password_instructions`. 像这样的东西：

```
# app/models/user.rb
def send_devise_notification(notification)
    return true if notification == :reset_password_instructions
end 
```

检查他们的示例，了解如何覆盖/自定义发送电子邮件的行为 [https://github.com/plataformatec/devise/blob/master/lib/devise/models/authenticatable.rb#L127](https://github.com/plataformatec/devise/blob/master/lib/devise/models/authenticatable.rb#L127)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-25T14:43:55.140

您可以在实例级别禁用它：

```
# disable all notifications
user.define_singleton_method(:send_devise_notification) { |*_| true }

# disable the one you want
user.define_singleton_method(:send_devise_notification) do |*args|
  return true if args[0] == :reset_password_instructions
  super
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-19T14:41:23.367

问题的标题是笼统的，但问题本身更具体。这是截至 2021 年一般问题的答案。

为了防止在更改用户密码时发送密码更改电子邮件通知，请在保存`skip_password_change_notification!`用户**之前**调用用户。

```
user = User.find(123)
user.skip_password_change_notification!
user.password = 'DoNotUse$123'
user.save 
```

# asp.net - 如何计算我在页面中拥有的用户控件的数量？

> ID：14634359
> 
> 赞同：3
> 
> 时间：2013-01-31T20:16:36.840
> 
> 标签：asp.net, user-controls

我有一个包含 5 个用户控件的页面。我想用它们做更多的事情，但现在，我只想用下面的方法来计算它们。

```
void btnFormSave_Click(object sender, EventArgs e)
{
  int i = 0;
  ControlCollection collection = Page.Controls;
  foreach (Control ctr in collection)
  {
    if (ctr is UserControl)
    {
      i++;
    }
   }
} 
```

当我调试这段代码时，i = 1，并且控件是母版页（我不知道母版页是用户控件）。

如何计算页面上的用户控件？

# 编辑

这是我的内容占位符标记。

```
<asp:Content ID="cntMain" runat="Server" ContentPlaceHolderID="ContentMain"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:42:41.623

您只需要更改查找的位置：

```
void btnFormSave_Click(object sender, EventArgs e)
{
  int i = 0;
  // here, look inside the form, and not on page.
  ControlCollection collection = Page.Form.Controls;
  foreach (Control ctr in collection)
  {
    if (ctr is UserControl)
    {
      i++;
    }
   }
} 
```

我已经测试并为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:28:55.080

编辑：用以下内容替换我原来的、偏离基础的答案。

您可能需要递归到控件内的控件（可能进入面板？）。

[http://msdn.microsoft.com/en-us/library/yt340bh4(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/yt340bh4(v=vs.100).aspx)

> 此示例仅查找 Page 对象中包含的控件以及作为页面的直接子级的控件。它不会找到作为控件子级的文本框，而该控件又是页面的子级。例如，如果您将 Panel 控件添加到页面，则 Panel 控件将是 Page 包含的 HtmlForm 控件的子控件，并且可以在此示例中找到。但是，如果您随后将 TextBox 控件添加到 Panel 控件中，则该示例将不会显示 TextBox 控件文本，因为它不是页面的子级或作为页面子级的控件的子级。以这种方式遍历控件的一个更实际的应用是创建一个递归方法，可以调用该方法来遍历遇到的每个控件的 Controls 集合。

编辑 2：在 SO 上添加指向递归控制搜索示例的链接。

使用 LINQ 的示例：[https ://stackoverflow.com/a/253962/704808](https://stackoverflow.com/a/253962/704808)

传统示例：[https ://stackoverflow.com/a/4955836/704808](https://stackoverflow.com/a/4955836/704808)

# c++ - 如何用 C++ 语言编写一个小计算器？

> ID：14634362
> 
> 赞同：-1
> 
> 时间：2013-01-31T20:16:37.960
> 
> 标签：c++, calculator

我如何编写一个小型计算器，将四个算术运算之一作为输入，这些运算的两个参数，然后打印出结果？就这么简单，我不需要真正的计算器。

这是我到目前为止尝试过的，但是它没有用：

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
  int  x,y,result;
  string arithmatic;
  cout<<"enter the first number:";
  cin>>x;
  cout<<"enter the second number:";
  cin>>y;
  cout<<"use one of the four artimatic operations /, *, + or - :";
  cin>>arithmatic;
  if (arithmatic=="/" )
    result=x/y;
  cout<<"x / y ="<<result;
  if  (arithmatic == "*")
    result=x*y;
  cout<<"x * y ="<<result;
  if (arithmatic == "+")
    result = x + y;
  cout<<"x+y ="<<result;
  if (arithmatic == "-")
    result = x-y;
  cout<<"x-y ="<<result;
  else
  cout<<"what is this? i said use arithmatic operations!";

  return 0;
} 
```

我知道这个程序有很多问题，我刚开始学习，而且这种做法在一本书中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:34:29.277

无论这是否是请求的操作，您总是将结果写入控制台。

```
if (arithmatic =="/")
    result=x/y;
cout<<"x / y ="<<result;
if (arithmatic == "*")
    result=x*y;
cout<<"x * y ="<<result;
... 
```

它应该是：

```
if (arithmatic =="/") {
    result=x/y;
    cout<<"x / y ="<<result;
}
if (arithmatic == "*") {
    result=x*y;
    cout<<"x * y ="<<result;
}
... 
```

此外，由于案例是排他的，您应该`else if`在连续的块中使用。另一种选择是使用`switch (...) { case ... }`，但是它对整数值（如单个字符）进行操作。取字符串的第一个字符来应用这个方法：

```
switch (arithmatic.at(0)) {
    case '/':
        result = x / y;
        break;
    case '*':
        result = x * y;
        break;
    case '+':
        result = x + y;
        break;
    case '-':
        result = x - y;
        break;
    default:
        cout << "what is this? i said use arithmatic operations!" << endl;
        exit(1); // abort execution
}
cout << "x " << arithmatic << " y = " << result << endl; 
```

此外，您应该考虑到您当前仅对整数进行操作。不仅输入不能是任何小数，而且你正在做*整数除法*，即使它必须被四舍五入（在这种情况下，它被四舍五入）也会产生一个整数。为了解决这个问题，使用`double`类型而不是`int`操作数以获得良好的准确性（大约 17 个有意义的十进制数字可能与`double`）。

请注意，你拼错了*算术*。我在上面的代码中使用了错误的拼写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:33:53.937

几个问题：

*   您的`if`陈述之间缺少很多大括号。这导致在`std::cout`整个代码中被多次调用。
*   您正在使用许多`if`由单个`else`,终止的语句来`if` `else if` `else`代替。
*   您使用的是整数除法而不是浮点除法。如果您想要“准确”的结果，请改用浮点数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T20:37:22.470

那`else`只是在最后晃来晃去。它必须有一个`if`声明。写这种东西的通常方式是

```
if (first)
  do_first();
else if (second)
  do_second();
else if (third)
  do_third();
else
  do_everything_else(); 
```

现在你的练习是将这个结构与@leemes 向你展示的大括号结合起来。

# haskell - 运算符 % 在 Haskell 中是什么意思？

> ID：14634363
> 
> 赞同：3
> 
> 时间：2013-01-31T20:17:18.927
> 
> 标签：haskell, operators

我想知道 Haskell 运算符 % 是做什么的。在谷歌上很难找到，我在 Haskell 报告中也找不到。

我在这段代码中看到了它：

```
 fi=zz.bu
 bu=zz.(:).(++"zz")
 []#zz=zz;zz#__=zz
 zZ%zz=zZ zz$zZ%zz
 zz=(([[],[]]++).)
 zZ=zipWith;z=zZ((#).show)[1..]$zZ(++)(bu%"Fi")(fi%"Bu") 
```

取自：[https ://codegolf.stackexchange.com/questions/88/obfuscated-fizzbuzz-golf/110#110](https://codegolf.stackexchange.com/questions/88/obfuscated-fizzbuzz-golf/110#110)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T20:35:40.107

这是Haskell 报告[的相关部分：](http://www.haskell.org/onlinereport/haskell2010/haskellch3.html#x8-240003.2)

> Haskell 提供了特殊的语法来支持中缀表示法。运算符是一个函数，可以使用中缀语法（第 3.4 节）应用，或使用节部分应用（第 3.5 节）。
> 
> 运算符要么是运算符符号，例如`+`or `$$`，要么是包含在重音符号（反引号）中的普通标识符，例如 `op`。例如，不用写前缀 application ，而是`op x y`写中缀 application `x `op` y`。如果没有给出固定性声明，``op``则默认为最高优先级和左关联性（参见第 4.4.2 节）。
> 
> 对偶，运算符符号可以通过将其括在括号中转换为普通标识符。例如，`(+) x y`等价于`x + y`，并且`foldr (*) 1 xs`等价于`foldr (\x y -> x * y) 1 xs`。

也就是说，Haskell 中的“操作符”除了语法之外并没有什么特别之处。名称由符号组成的函数默认为中缀，名称为字母数字的函数默认为前缀，两者都可以在其他样式中使用，但需要一些额外的语法。

顺便说一句，由于使用 Google 通常无法根据运算符名称进行搜索，因此要查找在标准库中声明的运算符，有两个专门用于在 Hackage 上[查找内容的](http://holumbus.fh-wedel.de/hayoo/hayoo.html)[搜索引擎。](http://www.haskell.org/hoogle/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T20:35:19.740

一般来说，我们可以`foo`像这样定义一个新函数：

```
foo a b c = (something involving a, b, and c) 
```

类似地，我们可以定义一个二元运算符`%`（由符号字符的任意组合构成），如下所示：

```
a % b = (something involving a and b) 
```

# flash - 如何修复 Flash 安全错误 #2048

> ID：14634366
> 
> 赞同：3
> 
> 时间：2013-01-31T20:17:32.877
> 
> 标签：flash, security, crossdomain.xml

我在 Flash #2048 中有错误。我能找到的一切都表明这是一种安全预防措施，因为文件不在同一个域中。

我们有一个在 Rackspace 云服务器上运行的站点，现在正尝试使用云文件 CDN 来加速我们在站点上使用的产品轮换工具。您可以使用位于我们服务器上的文件以及我的演示来查看当前的工作工具，我在演示中切换了链接以反映云文件而不是本地文件。（编辑：我已经删除了演示站点的链接，因为它们不再相关。）

我发现的解决方案似乎是根据[这个 stackoverflow question](https://stackoverflow.com/questions/5435495/flash-security-error-2048-is-there-a-workaround-or-does-twilio-have-to-change)添加几行代码。

从上面的 Stackoverflow 问题的答案中，我实现了以下代码：

```
allowscriptaccess = "always"
allownetworking = "all" 
```

如我们的模板文件中所述。我担心的是列出的修复程序的第一部分。

```
<site-control permitted-cross-domain-policies="all"/> 
```

我相信它在 crossdomain.xml 文件中。我创建了这个文件并将其放在根文件夹中，并使用了[此文档页面](http://www.senocular.com/pub/adobe/crossdomain/policyfiles.html)中的代码。我使用了以下代码。

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">

<cross-domain-policy>
  <site-control permitted-cross-domain-policies="master-only"/>
  <allow-access-from domain="*" secure="false" />
  <allow-http-request-headers-from domain="*" headers="*"/>
</cross-domain-policy> 
```

在这一切之后，我仍然收到错误＃2048。我非常感谢您提供的任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T21:30:45.120

Thomas，您将 crossdomain.xml 放在哪个服务器上？

crossdomain.xml 文件属于提供数据的服务器。因此，如果您的 Flash 应用程序正在您的服务器上运行，并且它尝试从其他域下载数据......其他域需要提供一个 crossdomain.xml 文件。

根据您在链接到的其他 StackOverflow 问题中的评论，听起来您将 crossdomain.xml 放在自己的服务器上。通过这样做，您是说托管在其他网站上的 Flash 应用程序可以从您的网站获取数据。相反，您需要在 CDN 站点上放置一个 crossdomain.xml 文件，该文件授权其他域（如您自己的）中的 Flash 应用程序访问 CDN 上的数据。

# google-chrome - Chrome 显示的内容与另一台计算机上的 Chrome 不同

> ID：14634371
> 
> 赞同：0
> 
> 时间：2013-01-31T20:18:15.407
> 
> 标签：google-chrome, font-size

我在使用 Google Chrome 时遇到了基本的边距/填充和字体大小显示问题。我将屏幕缩放设置为 100%，字体大小设置为中等。我已经进入“自定义字体”并确保我的设置与我的同事相同。我已经卸载并重新安装并再次检查了所有这些显示设置，但我的填充/边距和字体大小仍然与在同一浏览器 Chrome 中的机器上显示的不同。

这不是 CSS 问题，它特定于我的机器和我安装的 Google Chrome。我有一个应用于站点的重置类，并且在所有其他浏览器中都按预期显示。

有任何想法吗？

# iphone - 附件的文档图标在 iOS6 的 MFMailComposeViewController 中可见，但在 iOS5 中不可见

> ID：14634374
> 
> 赞同：1
> 
> 时间：2013-01-31T20:18:27.270
> 
> 标签：iphone, ios, ios5, mfmailcomposeviewcontroller

我使用 . 将我自己的文档类型附加到邮件中`addAttachmentData`。在 iOS6 上，`MFMailComposeViewController`使用我创建的文档图标 ( `large_document.png`) 来表示附件。在 iOS5 上，文档图标应该在的地方只有一个空白区域。

```
[mailComposer addAttachmentData:recipeData  mimeType:@"application/developiosapp" fileName:@"<filename>" ]; 
```

我的 Info.plist 看起来像这样：

![列表](../Images/561f43308a7091738dcdb548b4065b44.png)

非常感谢！

# javascript - Windows 商店应用程序 - javascript - 元素变量

> ID：14634376
> 
> 赞同：1
> 
> 时间：2013-01-31T20:18:45.953
> 
> 标签：javascript, microsoft-metro, windows-store-apps

我正在阅读“HTML 动画库示例” [http://code.msdn.microsoft.com/windowsapps/Using-the-Animation-787f3720](http://code.msdn.microsoft.com/windowsapps/Using-the-Animation-787f3720) 并注意到 javascript 中没有声明任何元素变量。

target1、target2 等的变量声明或 getelement 在哪里？注意顶部的严格声明。这是来自 Microsoft 的示例代码。

来自pointerFeedback.js

```
(function () {
    "use strict";
    var page = WinJS.UI.Pages.define("/html/pointerFeedback.html", {
        ready: function (element, options) {
            target1.addEventListener("MSPointerDown", onPointerDown, false);
            target1.addEventListener("MSPointerUp", onPointerUp, false);
            target2.addEventListener("MSPointerDown", onPointerDown, false);
            target2.addEventListener("MSPointerUp", onPointerUp, false);
            target3.addEventListener("MSPointerDown", onPointerDown, false);
            target3.addEventListener("MSPointerUp", onPointerUp, false);
        }
    });

    function onPointerDown(evt) {
        WinJS.UI.Animation.pointerDown(evt.srcElement);
    }

    function onPointerUp(evt) {
        WinJS.UI.Animation.pointerUp(evt.srcElement);
    }
})(); 
```

来自pointerFeedback.html

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link rel="stylesheet" href="/css/pointerFeedback.css" />
    <script src="/js/pointerFeedback.js"></script>
</head>
<body>
    <div id="input" data-win-control="SdkSample.ScenarioInput">
        <p>Use the Pointer Up and Pointer Down animations to
        show tap and click feedback on elements. These animations should be used on elements
        that can be interacted with and can trigger actions. They should not be used on
        elements that are disabled or on standard web controls that already have other feedback, such as buttons.</p>
    </div>
    <div id="output" data-win-control="SdkSample.ScenarioOutput">
        <div class="example">
            <h3>Applied to different sized elements:</h3>
            <p>Click or tap on the boxes below to see the animation.</p>
            <div id="target1" class="large">
                200 pixels
            </div>
            <div id="target2" class="medium">
                100 pixels
            </div>
            <div id="target3" class="small">
                50 pixels
            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:47:25.607

非常有趣的问题！我怀疑每个具有指定“id”的元素都会自动提供给 JavaScript。

我可以通过基于“Blank App”模板创建一个新项目并添加一个 id="foobar" 的新 div 来确认这一点。然后我启动应用程序并切换到 JavaScript 控制台，瞧：'foobar' 变量可用！

在做了几个月的 Win8 应用程序开发之后，我从来没有遇到过这个问题，干得好！

# .net - 如何在 Vista 上使用 .NET 2.0 SP2 安装应用程序？

> ID：14634381
> 
> 赞同：0
> 
> 时间：2013-01-31T20:19:12.073
> 
> 标签：.net, windows-installer, windows-vista, redistributable

如果我的应用程序需要`.NET 2.0 SP2`，我该如何安装这个应用程序`Vista`？可`.NET 2.0 SP2`再发行组件不会安装在`Vista`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:25:18.257

您应该安装 .Net 3.5 SP1，其中包括 2.0 SP2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T03:30:43.310

你可能想看看：

[哪个版本的 .NET 内置在 Windows 中？](http://petermarcu.blogspot.com/2010/02/which-version-of-net-is-built-into.html)

对于 Windows Vista，您不能使用 redist 安装程序，因为 .NET 是作为 Windows 系统组件包含的，就像 .NET 1.1 包含在 Server 2003 中一样。

Vista RTM 带有 .NET 2.0。Vista SP1 带有 .NET 2.0 SP1，而 Vista SP2 带有 .NET 2.0 SP2。

因此，如果目标是拥有最新修补的 2.0 和 3.0 框架，则应用服务包是您的机制。这些是不可再分发的，因此您的应用程序安装程序应该只在不存在时检查和门控。

或者，您可以安装 .NET 3.5 SP1。3.5 SP1 解决了所有这些问题，它是一个大型多平台引导程序，它应用与 SP1 和 SP2 中的内容等效的 .MSU（Windows 更新包）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T01:15:30.943

.Net 版本 2.0、3.0 和 3.5 都构建在 2.0 CLR 之上，并且每个版本都构建在前一个版本之上。如此有效，每个版本都是前一个版本的扩展。[MSDN](http://msdn.microsoft.com/en-us/library/bb822049.aspx)对此提供了更深入的解释。因此，在您的情况下，.Net 3.5 应该允许您运行在 2.0 中编译的任何应用程序。不幸的是，我还没有找到专门在 Vista 上安装 2.0 的方法，而普遍的共识是最好的方法是安装 .Net 3.5。

编辑：.Net 3.0 也应该允许您运行您的应用程序（不确定与 Vista 的兼容性），但一般建议以及我自己的建议是直接进入 3.5。

# php - 在没有明显重定向的情况下将 Facebook 登录添加到站点的最佳方法

> ID：14634382
> 
> 赞同：0
> 
> 时间：2013-01-31T20:19:15.237
> 
> 标签：php, facebook, facebook-graph-api

首先，我想说这不是 Facebook php/javascript sdk 上的一般问题。我已经成功地将“Facebook 登录按钮”添加到了一些小测试项目中。

我的问题是，显示用户*想要*使用 Facebook 登录的最佳方式是什么。仅仅因为有人在访问我的网站时登录了 Facebook，并不一定意味着他们想*使用*Facebook 登录我的网站。

我知道在使用 FB 应用程序授权用户后，它会使用各种`$_GET`变量进行重定向，但是如果我的用户返回我的网站，并且已经授权了我的应用程序，我该如何创建一个基本上“Facebook 登录”按钮说' `If user clicks this button, pull Facebook user_profile, and use their info for login, else require Facebook login as normal`。

我知道我可以创建一个按钮，转发到一个页面，设置一个会话变量，并重定向到主页，但我想创建这种效果而没有明显的重定向；如果可能，不要重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:41:11.587

我想你想用`FB.getLoginStatus`. 您将异步收到一个响应，告诉您身份验证状态，您可以从那里手动进入（显示他们的信息、登录、如果需要重定向等）。

从 SDK 参考（[https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)）：

```
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    // the user is logged in and has authenticated your
    // app, and response.authResponse supplies
    // the user's ID, a valid access token, a signed
    // request, and the time the access token 
    // and signed request each expire
    var uid = response.authResponse.userID;
    var accessToken = response.authResponse.accessToken;
  } else if (response.status === 'not_authorized') {
    // the user is logged in to Facebook, 
    // but has not authenticated your app
  } else {
    // the user isn't logged in to Facebook.
  }
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:42:02.693

如果您查看此处的文档：

[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

javascript facebook api init 函数有一个参数，用于检查用户状态，使用该参数您可以查看用户是否已经对您的应用进行了身份验证并已登录。如果状态显示他们是经过身份验证的用户，您可以存储用户对象，但不要更改任何 UI 以显示您拥有该信息。

当用户单击登录按钮时，您已经有了他们的信息。

我想您要解决的问题是如何为该用户打开 PHP 会话？

# c# - EF5 一对多关系

> ID：14634385
> 
> 赞同：3
> 
> 时间：2013-01-31T20:19:28.993
> 
> 标签：c#, entity-framework, entity-framework-5

可以使用 EF5 完成吗？

`X`有很多`Y` `Y`有一个`X`（一对多的关系）

但是，`Y`第二个`X`与第一个无关`X`

这可能吗？

```
public class X
{
    public int Id { get; set; }
    public List<Y> Ys { get; set; }
}

public class Y
{
    public int Id { get; set; }

    public int id_X { get; set; }
    [ForeignKey("id_X")]
    public X X { get; set; }

    public int id_X2 { get; set; }
    [ForeignKey("id_X2")]
    public X X2 { get; set; }
} 
```

* * *

不工作。

代码看起来像这样。

```
class Program
{
    static void Main(string[] args)
    {
        using (var context = new context())
        {
            var x = context.X.FirstOrDefault();
        }
    }
}

public class context : DbContext
{
    public context()
        : base(@"server=localhost\ALTAIRNOTESTI; uid=sa; pwd=13509; database=DDD")
    {

    }
    public DbSet<X> X { get; set; }
    public DbSet<Y> Y { get; set; }
}

public class X
{
    [Required, Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    public List<Y> Ys { get; set; }
}

public class Y
{
    [Required, Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    public int id_X { get; set; }
    [ForeignKey("id_X")]
    [InverseProperty("Ys")]
    public X X { get; set; }

    public int id_X2 { get; set; }
    [ForeignKey("id_X2")]
    public X X2 { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:26:38.153

是的，这是可能的，但您需要告诉 EF`X.Ys`和`Y.X`（而不是`Y.X2`）属于一个单一的一对多关系，例如通过使用`InverseProperty`属性：

```
[ForeignKey("id_X")]
[InverseProperty("Ys")]
public X X { get; set; } 
```

# asp.net-mvc - 如何创建 EditorFor 集合并避免循环

> ID：14634386
> 
> 赞同：1
> 
> 时间：2013-01-31T20:19:37.330
> 
> 标签：asp.net-mvc, asp.net-mvc-4, razor-2

例如：

**模型**

```
public class Person
{
    public int ID { get; set; }
    public string FirstName { get; set; }
    public string  LastName { get; set; }
} 
```

**人的编辑器模板（PersonEditor.cshtml）：**

```
@model MvcApplication1.Models.Person

@Html.HiddenFor(x=>x.ID)
<label>First Name</label>    
@Html.TextBoxFor(x=>x.FirstName)
<label>Last Name</label>    
@Html.TextBoxFor(x=>x.LastName)
<br /> 
```

在我的主页上，我希望能够执行以下操作：

```
@model IList<MvcApplication1.Models.Person>

@using (Html.BeginForm())
{       
    @Html.EditorFor(x=>x,"PersonEditor")    
} 
```

并拥有表格中的所有元素，自动生成专有名称；而不是像我现在所做的那样遍历集合：

```
@using (Html.BeginForm())
{
    for (int i = 0; i < Model.Count; i++)
    {
        @Html.EditorFor(x=>Model[i],"PersonEditor")    
    }   
} 
```

表单元素必须包含以下格式：

```
<input name="[0].ID" type="text" value="Some ID" />
<input name="[0].FirstName" type="text" value="Some value" />
<input name="[1].ID" type="text" value="Some x" />
<input name="[1].FirstName" type="text" value="Some y" /> 
```

等等...

因为在我的控制器中，我希望`IList<Person>`在表单发布包时收到一个。

**我可以完全消除那个 for 循环吗？**

# 编辑

现在，当我简单地做`@Html.EditorFor(x=>x)`（换句话说，没有循环）时，我得到了这个异常：

> 传入字典的模型项的类型为“MvcApplication1.Models.Person[]”，但此字典需要类型为“MvcApplication1.Models.Person”的模型项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:22:29.563

您应该能够为 和 使用相同的`IEnumerable<T>`模板`T`。模板足够智能，可以枚举 IEnumerable，但您需要重命名编辑器模板以匹配类型名称。然后你应该可以使用

```
@model IList<MvcApplication1.Models.Person>

@using (Html.BeginForm())
{       
    @Html.EditorForModel()    
} 
```

不幸的是，看起来一个命名为除类型名称之外的任何其他名称的模板都会引发异常

> 传入字典的模型项的类型为“MvcApplication1.Models.Person[]”，但此字典需要类型为“MvcApplication1.Models.Person”的模型项

# c - 需要帮助修复此 C 套接字 ICMP 程序

> ID：14634387
> 
> 赞同：-1
> 
> 时间：2013-01-31T20:19:42.323
> 
> 标签：c, sockets, icmp

我有一个能够接收 ICMP 请求并显示它们的 C 程序，但是不会从我使用 Wireshark 看到的内容中发送任何 ICMP 请求本身。

我已经包含了所需的库，并且我正在使用省略的 IP 头文件和 ICMP 头文件。

任何帮助，将不胜感激。请忽略随机的 Printf 语句，只是为了帮助我。

谢谢

**

```
***IP.h*****

#ifndef __IP_H__
#define __IP_H__

struct iphdr {

   uint8_t   hdrlen:4;    
   uint8_t   version:4;
   uint8_t   ecn:2;       
   uint8_t   dscp:6;     
   uint16_t  length;
   uint16_t  ident;
   uint16_t  fragoff:13;
   uint16_t  flags:3;
   uint8_t   ttl;
   uint8_t   protocol;
   uint16_t  checksum;
   uint32_t  srcip;
   uint32_t  dstip;
   uint32_t  options[ ];  
} __attribute__((__packed__));

#endif // __IP_H__

****ICMP.H****

#ifndef __ICMP_H__
#define __ICMP_H__

struct icmphdr {
   uint8_t   type;         
   uint8_t   code;          
   uint16_t  checksum;      
   uint16_t  id;          
   uint16_t  seqNum;       
   uint32_t  data[ ];       
} __attribute__((__packed__));

char * messages[ ] = {
   "Echo reply",
   "Type 1",
   "Type 2",
   "Destination unreachable",
   "Source quench",
   "Redirect",
   "Type 6",
   "Type 7",
   "Echo request",
   "Router advertisement",
   "Router discovery",
   "Time exceeded",
   "Parameter problem",
   "Timestamp request",
   "Timestamp reply",
   "Information request (obsol.)",
   "Information reply (obsol.)",
   "Address mask request",
   "Address mask reply"
};

#endif // __ICMP_H__

****Main C File ****

    #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>
    #include <sys/time.h>

    #include <unistd.h>
    #include <sys/types.h>
    #include <sys/socket.h>
    #include <netinet/in.h>
    #include <arpa/inet.h>
    #include <netdb.h>

    #include "ip.h"
    #include "icmp.h"

    struct timeval timeout;
    struct timeval end;

    #define BUF_SIZE   1024
    #define ICMP       1
    #define ECHO_REQ   8
    #define ECHO_REPL  0
    #define HOSTADDR   "8.8.8.8"

    char *
    iptos (uint32_t ipaddr) {
       static char ips[16];

       sprintf(ips, "%d.%d.%d.%d",
          (ipaddr >> 24),
          (ipaddr >> 16) & 0xff,
          (ipaddr >>  8) & 0xff,
          (ipaddr      ) & 0xff );
       return ips;
    }

    uint16_t
    sum (uint16_t initial, void * buffer, int bytes) {
       uint32_t   total;
       uint16_t * ptr;
       int        words;

       total = initial;
       ptr   = (uint16_t *) buffer;
       words = (bytes + 1) / 2; // +1 & truncation on / handles any odd byte at end

       while (words--) total += *ptr++;
       while (total & 0xffff0000) total = (total >> 16) + (total & 0xffff);

       return (uint16_t) total;
    }

    void
    some_function ( ) {

       struct sockaddr_storage peer_addr;
       socklen_t               peer_addrlen;

       struct sockaddr_in      addr;
       struct sockaddr_in      dstaddr;
       struct iphdr   *        ip;
       struct icmphdr *        icmp;
       struct timeval *        sent;
       int skt;
       int sequence;
       long int length;
       fd_set rdfds;
       int ready;
       int rtt;

       char buff [BUF_SIZE];

       skt = socket (AF_INET, SOCK_RAW, IPPROTO_ICMP);
       if (skt < 0) {
          perror ("socket()");
          exit (1);
       }

       addr.sin_family      = AF_INET;
       addr.sin_port        = 0;
       addr.sin_addr.s_addr = INADDR_ANY;

       if (bind (skt, (struct sockaddr *)&addr, sizeof(struct sockaddr_in))) {
          perror ("Can't bind socket");
          exit (1);
       }
    printf("aaa");
       ip = (struct iphdr *)buff;
       peer_addrlen = (socklen_t) sizeof (struct sockaddr_storage);

       memset (&dstaddr, 0, sizeof(struct sockaddr_in));
       dstaddr.sin_addr.s_addr = inet_addr(HOSTADDR);
       dstaddr.sin_family = AF_INET;

       memset (buff, 0, sizeof(buff));
       icmp = (struct icmphdr *) buff;
       icmp->type   = ECHO_REQ;
       icmp->id     = htons(getpid( ) & 0xffff);
       icmp->seqNum = htons(sequence++);

    printf("aabba");

       if (gettimeofday ((struct timeval *)icmp->data, NULL)) {
          perror ("Can't establish send time");
          exit (1);
       }

       length = sizeof(struct icmphdr) + sizeof(struct timeval);
       icmp->checksum = ~htons(sum (0, buff, length));

    printf("aaa");

       if (sendto (skt, buff, length, 0,
             (struct sockaddr *) &dstaddr, sizeof(struct sockaddr_in)) <= 0) {
          perror ("sendto()");
          exit (1);

    }
    printf("aaa");
     timeout.tv_sec  = 1;
       timeout.tv_usec = 0;
       FD_ZERO(&rdfds);
       FD_SET (skt, &rdfds);

       ready = select (skt + 1, &rdfds, NULL, NULL, &timeout);
       if (ready < 0) {
          perror ("Select()");
          exit (1);
       }

     memset (buff, 0, sizeof(buff));
       if (recvfrom (skt, buff, sizeof(buff), 0,
            (struct sockaddr *) &peer_addr, &peer_addrlen) <= 0) exit (1);

       if (gettimeofday (&end, NULL)) {   // Timestamp reception
          perror ("Can't establish time of receipt");
          exit (1);
       }

       if (ip->version != 4 ||
           sum (0, buff, sizeof(struct iphdr)) != 0xffff ||
           ip->protocol != ICMP)
          exit(1);

       length = ntohs(ip->length) - ip->hdrlen * 4;       // Length of IP payload
       icmp = (struct icmphdr *)((uint32_t *)ip + ip->hdrlen);   // Find ICMP hdr

       if (icmp->type != ECHO_REPL || sum (0, icmp, length) != 0xffff) {
          fprintf (stderr, "Received %s\n", messages[icmp->type]);
          exit (1);
       }

       sent = (struct timeval *)icmp->data;
       if ((rtt = (end.tv_usec - sent->tv_usec) / 100) < 0)
          rtt += 10000;  // We've cycled to a new second
       rtt += (end.tv_sec - sent->tv_sec) * 10000;  // Add any seconds

       printf ("%ld bytes from %s: icmp_req=%d ttl=%d time=%0.1f ms\n",
          length,
          iptos(ntohl(ip->srcip)),
          ntohs(icmp->seqNum),
          ip->ttl,
          ((float)rtt) / 10);

    }
    int main(){
    printf("aaa");
    some_function();
    return(0);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:24:15.600

问题是校验和错误。

更改此行

```
icmp->checksum = htons(sum (0, buff, length)); 
```

和

```
icmp->checksum = ~(sum (0, buff, length)); 
```

sum 函数已经关心字节顺序，无需再次翻译它`htons`

# java - 使用类属性搜索 Java 集合

> ID：14634392
> 
> 赞同：1
> 
> 时间：2013-01-31T20:20:08.570
> 
> 标签：java, search, collections

我有一个像这样的抽象类：

```
public abstract class Ingredient {
    protected int id;
} 
```

和一份清单

```
List <Ingredient> ingredientList = new ArrayList <Ingredient>() 
```

我希望能够从`ingredientList`使用 id 中获取成分。

我做了这样的事情：

```
public abstract class Ingredient implements Comparable<Ingredient>{
        protected int id;
        @Override
    public int compareTo(Ingredient o) {
        // TODO Auto-generated method stub
        if (this.id > o.id){
            return 1;
        }
        return 0;
    }
    } 
```

但仍然无法正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:26:56.120

如果您需要执行定期查找， a`Map`可能是在这里使用的更好集合：

```
Map<Integer, Ingredient> ingredientMap = new HashMap<>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T20:29:02.930

```
for (Ingredient ingredient : IngredientList) {
  if (ingredient.getId() == id) {
    System.out.println("found");
  }
}
System.out.println("not found"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T18:25:04.457

如果您使用[Eclipse Collections](https://www.eclipse.org/collections/)，您可以使用检测方法。

```
final int idToFind = ...;
ListIterable<Ingredient> ingredientList = FastList.newListWith(...);
Ingredient ingredient = ingredientList.detect(new Predicate<Ingredient>()
{
    public boolean accept(Ingredient eachIngredient)
    {
        return eachIngredient.getId() == idToFind;
    }
}); 
```

如果您无法更改成分列表的类型，您仍然可以使用静态实用程序形式的检测。

```
Ingredient ingredient = ListIterate.detect(ingredientList, new Predicate<Ingredient>()
{
    public boolean accept(Ingredient eachIngredient)
    {
        return eachIngredient.getId() == idToFind;
    }
}); 
```

当 Java 8 发布 lambdas 时，您将能够将代码缩短为：

```
Ingredient ingredient = ingredientList.detect(eachIngredient -> eachIngredient.getId() == idToFind); 
```

**注意：**我是 Eclipse 集合的提交者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T20:26:49.577

你可以做（​​在你的班级内）

```
interface Callback { public void handle(Indredient found); }

public void search(List<Ingredient> ingredientList, int id, Callback callback) { 
  for(Ingredient i : ingredientList) if(i.id == id) callback.handle(i)
} 
```

接着

```
ingredients.search ( 10, new Callback() { 
       public void handle(Ingredient found) {
            System.out.println(found);
       }
   }); 
```

或类似的东西...

ps.：我在你改变你的问题之前回答了；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T20:27:51.353

只是一个猜测，但这可能是你的意思：

[在 Java 的 ArrayList 中使用包含的最佳方法？](https://stackoverflow.com/questions/986924/best-way-to-use-contains-in-an-arraylist-in-java)

列表的 contains() 方法使用 equals() 和 hashCode()

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T20:27:59.697

当您使用`List.contains()`id 查找成分时，然后覆盖 `equals()`并`hashCode() { return id};`

在 equals() 中：在 equals 中比较 this.id 和 other.id 。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-31T20:30:56.760

```
public Ingredient getIngredientById(int id) {
   for (Ingredient ingredient : ingredientList) {
      if (ingredient.id == id) {
         return ingredient;
      }
   }
} 
```

# bash - 如何通过终端查找和替换文本文档中的一行

> ID：14634393
> 
> 赞同：0
> 
> 时间：2013-01-31T20:20:21.113
> 
> 标签：bash, shell, terminal

我有一个用 vim 创建的 shell 脚本。我唯一知道的就是一个 var 名称。

在文档的某处有一行：

```
SecondHome='/Users/me/Documents/code/' 
```

this 的值是不正确的，但是通过 shellscripts 执行新功能而不改变 shell script 的作用。

我正在考虑做类似的事情：

```
grep -n "SecondHome" somefile.sh 
```

这将吐出行号+匹配项，但只更改第一个，因为那是变量定义。

我当时正在考虑以某种方式对该行进行替换以使其看起来像：

```
export SecondHome=$DirPath/code/$Repo 
```

然后运行已修改的脚本文件。

```
#!/bin/zsh
export DirPath=/Users/me/Documents/
export Repo=MyNewRepo/
export LineNumber=$(grep -n "SecondHome" somefile.sh)
#carry out replace on somefile.sh at $LineNumber with: export SecondHome=$DirPath/code/$Repo/
. ./somefile.sh 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:22:35.440

```
sed -i.bak '/SecondHome=/s,=.*,=$DirPath/code/$Repo,' somefile.sh 
```

`sed -i.bak expression file`对文件执行`expression`，修改它的`-i`地方。

表达式在表单上`/regex/command`，​​它`command`在匹配的行上运行`regex`。

`command`is ，`s,search,replace,`它搜索和替换文本。

换句话说，它通过查找包含的行来修改文件`SecondHome=`，并将等号后的所有内容替换为您的字符串。

如果您的 $DirPath/$Repo 是在替换脚本中定义的，而不是在 somefile.sh 中，您也可以用双引号替换单引号

# ios - 什么是 CoreData 故障？

> ID：14634395
> 
> 赞同：15
> 
> 时间：2013-01-31T20:20:35.277
> 
> 标签：ios, macos, cocoa, core-data

任何人都可以解释coredata故障是什么意思吗？我知道这是一种减少内存的机制。但我的问题是，如果当我们尝试使用错误对象时，我们是否需要调用任何刷新方法或者 CoreData 会为我们选择值？如果 CoreData 为我们处理它，如果故障对象从实际持久存储中删除并且我们尝试通过故障对象访问它会发生什么？它会抛出任何异常吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-31T20:33:45.710

在 Core Data 中，故障是占位符，或“未实现的对象”。它们是引用其他 NSManagedObjects 的小对象，仅在需要时才将其提取到内存中。这种故障机制旨在提高性能并减少内存使用。

一般来说，故障机制是透明的；当您从 NSManagedObjectContext (MOC) 中检索对象时，您无法分辨（在其正常使用过程中）它是故障对象还是已实现对象。在大多数情况下，当需要这样做时，例如在访问对象的属性时，Core Data 框架会自动将故障转换为已实现的对象（“触发”）。如果你需要自己触发一个错误，你可以通过调用它的 willAccessValueForKey: 方法和一个 nil 参数来实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T17:56:00.280

Dhruv的好答案！在回答您的最后一个问题时，如果您尝试访问首先出现故障然后被删除的托管对象，您将看到 NSObjectInaccessibleException 和消息“核心数据无法完成故障”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-19T03:31:48.513

来自 Coredata 参考（[链接](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreData/FaultingandUniquing.html)）：

> 故障减少了应用程序消耗的内存量。故障是表示尚未完全实现的托管对象的占位符对象，或表示关系的集合对象。

# mfc - 如何在 MFC 的 Windows 客户端区域中更改面板/视图

> ID：14634397
> 
> 赞同：0
> 
> 时间：2013-01-31T20:20:47.603
> 
> 标签：mfc

我想使用 C++ MFC 设计一个学生注册和考试记录应用程序，该应用程序具有一种包含按钮编辑和其他常用控件的子窗口，这些控件显示在应用程序客户端区域上，可以通过单击按钮将其删除并替换为另一个。这就是我现在面临的问题（GUI）。我来自 JAVA 背景，这可以通过创建一个 JPanel 作为按钮、组合框和文本字段控件的容器来完成。该面板显示在客户区，可以移除并替换为另一个包含一组新控件的面板。我尝试学习 CView，但它一直在谈论显示无标题文档的文档和视图，就像在文字处理中一样。任何指针将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T07:35:05.877

在搜索并阅读了很多关于我的问题之后，我决定进入 win32 API，根据您的意识，一切皆有可能。解决方案就像创建一个主窗口并创建任意数量的使用主窗口的子窗口一样简单parent 和 all 都有一个隐藏的窗口属性。然后您可以在每个子窗口上创建控件。要在子窗口之间切换，我这样做了： `ShowWindow(childWindow1, SW_HIDE); ShowWindow(childWindow2, SW_SHOW);`. 就是这样，只是恢复后的重绘过程不会重绘子窗口的控件及其子窗口。

# java - 从对象数组中的 HashMap 对象创建指针

> ID：14634399
> 
> 赞同：1
> 
> 时间：2013-01-31T20:20:55.747
> 
> 标签：java, arrays, object, pointers, hashmap

这是我第一篇文章的后续，假设我有两个课程：

```
public class Carinfo {

    private String carname;
    //The Carinfo[] value is set when making a new car
    //so for the object ford the array holds 3 null pointers
    private Carinfo [] value; 

    Carinfo (String someCar, int carValue) {
        this.carname = someCar;
        this.value = new Carinfo[carValue];
    }
} 
```

第二类：

```
public class CarPark {

    HashMap<String, Carinfo> carGarage;

    CarPark() {
        carGarage = new HashMap<String, CarInfo>();

        Carinfo ford = new Carinfo("Ford", 3);
        Carinfo audi = new Carinfo("Audi", 2);

        carGarage.put("Ford", ford);
        carGarage.put("Audi", audi);
    }
} 
```

因此，假设无论出于何种原因，我希望在其 Carinfo 数组中有 3 个空指针的对象 ford 指向对象 audi。这意味着我可以通过 Carinfo 对象并列出每辆车对其他汽车的指针。

把它想象成一个家庭，我想看看什么车是相互关联的。我很难创建一个指向 Carinfo HashMap 中其他对象的方法。

任何“指针”？如果有任何不清楚的地方，请让我改写或尝试更好地解释它。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:35:17.377

我真的不明白你想做什么。实现这一点的一种方法是提供一种特定的方法来添加关系。例如，使用您的数组，您可以这样做：

```
public class CarInfo {
  private Carinfo[] value;
  public void addCarInfo(CarInfo carInfo, int position) {
    value[position] = carInfo;
  }
} 
```

无论如何，拥有一个数组不是一个好主意，你应该使用一个列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:42:44.087

我建议*不要*将汽车之间的关系存储在`Carinfo`对象本身内。相反，您应该使用通用图形库（或编写自己的通用图形库）。

您可能知道，[图](http://en.wikipedia.org/wiki/Graph_%28mathematics%29)是一组节点和边，每条边代表两个节点之间的关系。您当前代码描述的概念实际上只是一个有向图：每辆汽车都是一个节点，每辆汽车都可以保存一些对其他汽车的引用，其中每个引用代表从该汽车指向的一条边。

图形是数学和计算机科学中如此常见的抽象，因此已经实现了许多库来表示图形，附带的好处是，对于使用这些库的任何代码都可以解决几个流行的问题（例如，找到两辆汽车之间的多步关系使用最少的边数，或者在图中找到所需的最少边数，以确保所有汽车仍然是间接连接的）。我建议搜索已经实现的图形库，然后使用具有最佳功能的图形库来解决您的整体问题。但是，如果这是一项家庭作业，您可能应该实现自己的图形库。这并不难：您需要以某种方式存储节点和边（您可以只保留节点列表，并且您可以使用边缘列表或邻接矩阵来存储边缘），并且您需要以更通用的形式提供您关心的算法。这似乎需要做更多的工作，但是使代码更加模块化的好处将很快得到回报。首先，您将创建更少的错误，因为您的代码的每个部分只执行一项工作，并且您将能够更轻松、更快速地修复错误，这可能会节省您的整体时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:32:02.213

对于初学者，您需要访问`CarInfo`对象上的方法才能使用您设置的值数组。

```
public CarInfo[] getCarValue() {
  return value;
} 
```

现在，当您使用方法时，您可以按如下方式调用它：

```
CarInfo[] fordValueArray = carGarage.get("Ford").getCarValue(); 
```

该数组现在指向您在 .3 条命令中创建的数组`CarPark()`。

有了它，我们可以做到：

```
fordValueArray[0] = audi; 
```

* * *

现在，说了这么多，似乎有点不清楚为什么要建立这样的类关系。的命名`value`似乎不直观，因为*从表面上看*，您所问的是我们如何使汽车的价值与其他许多汽车独立相关。福特的第一价值是奥迪？另外两个值是什么？为什么我们会被限制在 3 个？

# android - 线程导致应用程序变得无响应

> ID：14634408
> 
> 赞同：1
> 
> 时间：2013-01-31T20:21:20.213
> 
> 标签：android, multithreading, android-activity

我有一个使用以下代码注册观察者的活动

活动：

```
//Register for network status updates
NetworkStatus networkStatus = new NetworkStatus(this);
networkStatus.addObserver(new OfflineActivity());
Thread thread = new Thread(networkStatus);
thread.run(); 
```

主题：

```
@Override
public void run() {

    for(;;) {
        Log.d("NetworkStatus", "Checking Network Status");
        if(isConnectedToInternet(context)){
            notifyObservers();
            Log.d("NetworkStatus", "Network Connection is established");
        }
        else {
            Log.d("NetworkStatus", "Not connected to network");
        }
    }   
} 
```

当我单击活动时，程序变得无响应..有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:23:36.210

你应该使用`.start();`

```
Thread thread = new Thread(networkStatus);
thread.start(); 
```

当您显式调用 run 方法时，它实际上并没有产生新的线程，而是方法调用仍然在 UI 线程中运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T20:24:42.623

您的线程运行处于无限循环中。请添加中断条件，以便它可以退出。

# xpath - xpath 在前后验证文本

> ID：14634409
> 
> 赞同：0
> 
> 时间：2013-01-31T20:21:27.670
> 
> 标签：xpath

以下是我的 html 表结构，我想使用 x-path 验证 td 内的完整文本`<tr><td>Sagar Nair<br/><b>Owner</b> - Verified</td></tr>`

任何人都可以为此提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:41:45.340

当`tr`示例中的元素是当前元素时，XPath 表达式`string(.)`的值将是您说要验证的字符串。对于字符串的实际验证，您将需要 XPath 以外的其他语言；但是，由于您没有提到编程语言，因此我假设一旦获得字符串，您就知道如何处理它。

# javascript - 如何使用默认值填充用户的身份验证质询？

> ID：14634416
> 
> 赞同：0
> 
> 时间：2013-01-31T20:21:49.213
> 
> 标签：javascript, html, authentication

我有一个 html 页面，它通过身份验证质询窗口向用户询问用户名和密码。我需要做的是自己使用Javascript或其他方式输入用户名和密码的默认值，以便用户无需输入用户名和密码即可访问该页面。

换句话说，为了访问该页面，您必须通过身份验证挑战窗口输入用户名和密码。我现在要做的是提醒用户输入“guest”作为用户名和“guest”作为密码的消息，以便他可以访问该页面。但我不希望这种情况发生。我想通过设置用户名和密码来自己处理身份验证挑战，这样用户就不必输入它们。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:39:48.193

您可以使用以下方法将值属性添加到文本框：

```
 <input id="mytextbox" type="text" value="FOOBAR" />
    <input id="myPassWord" type="password" value="SOMEVAL" /> 
```

KevinBoucher 确实有关于安全性的观点，尽管我假设你已经考虑过了。

其他解决方案是使用 JavaScript 通过 ID 引用上述内容

```
 document.getElementById("mytextbox").value = "FOOBAR"; 
```

没有例子很难想出一个可靠的解决方案:)

# jquery - 当 Flexslider 幻灯片具有类“flex-active-slide”时显示 div

> ID：14634426
> 
> 赞同：2
> 
> 时间：2013-01-31T20:22:18.023
> 
> 标签：jquery, slideshow, show, flexslider

我正在使用 Flexslider，一切正常。我有一个 div 将在某些幻灯片中包含其他信息，但不一定是所有幻灯片。一旦显示幻灯片，我想要完成的是这个 div 的 jQuery 动画。

因此，当幻灯片处于活动状态时（它具有 .flex-active-slide 类），div 会显示或向下滑动等。

HTML：

```
<div class="flexslider">
    <ul class="slides">

        <li id="test" >

            <div class="slide-content">
                <h1>Regular Content Here</h1>
            </div>
            <div class="slide-excerpt group" style="display:none;">
                <p>Hidden Content...should show when active</p>
            </div>                          

        </li>

    </ul>
</div><!--end flexslider--> 
```

JQUERY（这是我尝试过的，但没有影响）：

```
jQuery(document).ready(function($) {    
    if ($('li#test').hasClass('flex-active-slide')){
        $("div.slide-excerpt").show();
    };
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:31:18.297

我个人更倾向于通过 CSS 处理这个问题。

```
.flexslider .slides .slide-excerpt {
    display:none;
}

.flexslider .slides .flex-active-slide .slide-excerpt {
    display:block;
} 
```

并从您的 HTML (style="display:none") 中删除内联样式。

现在，显然，这只显示它。它不添加花哨的动画。但是，如果您已经将幻灯片制作成动画，我会在添加另一个动画元素之前犹豫不决...太多会导致界面非常繁忙，并且会让用户感到沮丧，不得不等待太久获取他们可能感兴趣的信息。如果您必须对其进行动画处理，也许您仍然可以使用 CSS，但使用 CSS3 动画，而不是 javascript。

希望这可以帮助！

# jquery - jQuery - 从滑块值计算平均值的未知问题

> ID：14634440
> 
> 赞同：1
> 
> 时间：2013-01-31T20:22:56.933
> 
> 标签：jquery, jquery-ui, average, jquery-ui-slider, jquery-calculation

我在 Wordpress 元框中有六个 jQuery UI 滑块，我得到它们的值并将平均值输出到文本输入字段（#pm_overall_score），这是处理此问题的 JS：

```
var sum = 0 ; 
var nums = 0;
$('.rwmb-slider').bind({

    slidechange : function(event,ui) {
      sum = 0;
      nums  = 0;
    $('.rwmb-slider').each(function(){

        var value = $( this ).slider( "option", "value" );
        if(value != 0 ) 
         {
            sum += value ; 
            nums++;
          }

        }); 
       var avg = sum / nums ; 
       $('#pm_overall_score').val(Math.floor(avg));
       console.log(avg);
    }

}).slider(); 
```

工作正常，除了当我保存值时，在页面重新加载时文本输入显示大量数字，我不明白为什么会发生这种情况，也不明白它背后的数学原理。

例如：
**第一个滑块 > 值 5，**
**第二个滑块 > 值 15**

保存正确的平均值**(10)**但在输入字段上显示**257**页面重新加载。现在，如果我将第三个滑块移动到**10**，则数字变为**17170** (??)。我需要将所有滑块移回 0 以使其再次工作。不过，我不是 jQuery 专家，是否知道为什么会发生这种情况或平均计算的任何替代方案？

谢谢

编辑：如果有帮助，我还会发布处理滑块的代码：

```
jQuery( document ).ready( function( $ )
{
    var
        id = null
        , el = null
        , input = null
        , label = null
        , format = null
        , value = null
        , update = null
        ;
    $( '.rwmb-slider' ).each( function( i, val )
    {
        id = $( val ).attr( 'id' );
        el = $( '#' + id );
        input = $( '[name=' + id + ']' );
        label = $( '[for=' + id + ']' );
        format = $( el ).attr( 'rel' );

        $( label ).append( ': <span id="' + id + '-label"></span>' );
        update = $( '#' + id + '-label' );

        if (
            !$( input ).val()
                || 'undefined' === $( input ).val()
                || null === typeof $( input ).val()
            )
        {
            $( input ).val( $( el ).slider( "values", 0 ) );
            $( update ).text( "0" );
        }
        else
        {
            value = $( input ).val();
            $( update ).text( value );
        }
        if ( 0 < format.length )
            $( update ).append( ' ' + format );

        el.slider(
            {
                value: value,
                slide: function( event, ui )
                {
                    $( input ).val( ui.value );
                    $( update ).text( ui.value + ' ' + format );
                }
            } );
    } );
} ); 
```

# vb.net - 使用 Serial to-USB 开关控制程序

> ID：14634443
> 
> 赞同：3
> 
> 时间：2013-01-31T20:23:00.377
> 
> 标签：vb.net, serial-port, usb, usbserial

我们想通过按下连接到串行到 USB 适配器的开关来控制程序（用 VB 编写）。当按下时，程序中的某个功能将被激活。为了实现这一点，我们需要在串口的 comm_event 中不断地轮询相关的 com 端口，并调用该函数。我们尝试通过在适配器的发送和接地引脚之间连接一个按钮开关来改变输入缓冲器的状态。它有时有效，但大部分时间都错过了。所以看起来我们需要创建一个长脉冲序列来保持输入缓冲区状态持续足够长的时间来检测任何变化。有没有类似的小工具可用？什么样的简单电子设备可以完成这项任务。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:41:38.997

这是 Robert Grier 的回答（[Visual Basic Programmer's Guide to Serial Communications, 第 4 版 ISBN 1-890422-28-2](http://amzn.com/1890422282)的作者）我非常感谢他的帮助，因此与所有感兴趣的人分享。

将开关的一侧连接到 DTR 输出（连接器的针脚 4），将开关的另一侧连接到 DCD 输入（针脚 1）

从您的窗体的工具箱中删除 Comm 控件并添加一个标签。在代码中：

```
Private Sub Form_Load()

    On Error Resume Next
    With MSComm1
        .CommPort = 3  'use the actual port number that is created when you install your USB adapter
        .PortOpen = True
        .DTREnable = True
        If .PortOpen = False Then MsgBox "Unable to open serial port."
    End With
End Sub

Private Sub MSComm1_OnComm()

    With MSComm1
        If .CDHolding = True Then
            Label1.Caption = "Switch On"
            Label1.BackColor = vbGreen
        Else
            Label1.Caption = "Switch Off"
            Label1.BackColor = vbRed
        End If
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:43:12.400

如果我理解正确，计算机没有串行端口，所以您将 USB 适配器插入 PC 上的 USB 端口，然后尝试读取您在适配器的 RS-232 端创建的一些条件？我会看看流量控制引脚 DTR/DSR 等。你有可用的外部电源吗？RS232 通常需要 +/- 12v。根据您要实现的目标和您的情况，您还可以考虑向 PC 添加硬件串行端口，或使用硬件 USB 接口，例如： http: [//www.maplin.co.uk/usb -experiment-interface-board-42857](http://www.maplin.co.uk/usb-experiment-interface-board-42857)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T23:25:54.170

我没有测试过这个，但有一些变化......

```
Private WithEvents com As New IO.Ports.SerialPort

Private Sub com_PinChanged(sender As Object, e As System.IO.Ports.SerialPinChangedEventArgs) Handles com.PinChanged

    Dim pin As IO.Ports.SerialPinChange = e.EventType

    If pin.DsrChanged Then
        MsgBox("DSR changed")
    End If

End Sub 
```

...应该管用。更改 DB9 连接器上引脚 6 的状态。您也可以使用此方法访问其他引脚。

# python - Pyramid 应用程序：如何将值传递到我的 request.route_url？

> ID：14634444
> 
> 赞同：0
> 
> 时间：2013-01-31T20:23:02.760
> 
> 标签：python, routing, pyramid

我的views.py文件中有这个作为我主页的视图配置：

```
@view_config(route_name='home_page', renderer='templates/edit.pt')
def home_page(request):
    if 'form.submitted' in request.params:
        name= request.params['name']
        body = request.params['body']
        page=Page(name,body)
        DBSession.add(page)
        return HTTPFound(location=request.route_url('view_page',pagename=name))
    return {} 
```

此外，这里是 edit.pt 模板中的表单：

```
<form action="/view_page" method="post">
    <div>
      <input type="text" name="name"/>
    </div>
    <div>
      <input type="text" name="body"/>
    </div>
<label for="stl">Stl</label>
<input name="stl" type="file" value="" />
<input type="submit" name='form.submitted' value="Save"/>
</form> 
```

同样在我的**init** .py 文件中

```
 config.add_route('home_page', '/')
    config.add_route('view_page', '/{pagename}') 
```

现在，当我提交表单时，它只是尝试访问 localhost:6543/view_page。这将返回 404，因为没有指向它的 view_page 资源或路由。相反，我希望它转到 localhost:6543/（我刚刚创建的页面的名称，也就是表单中的第一个输入框）。我怎样才能做到这一点？

编辑：我担心其他东西可能会告诉它路由到 view_page 因为我什至尝试将其更改为

```
return HTTPFound(location=request.route_url('front_page',pagename=name)) 
```

它仍然转到/view_page。没有名为 front_page 的路由，所以我至少怀疑它会引发错误。

另外，如果您能告诉我您在哪里找到这些信息，我将不胜感激。我一直在查看[http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/api/request.html?highlight=request.route_url#pyramid.request.Request.route_url](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/api/request.html?highlight=request.route_url#pyramid.request.Request.route_url)但似乎无法从中找到用处。

编辑：我应该使用资产规范而不是路径名吗？所以

```
return HTTPFound(Location=request.route_url('tutorial:templates/view.pt','/{pagename}')) 
```

另外，我正在阅读这篇文章，这似乎对语法很有帮助： http: [//docs.pylonsproject.org/projects/pyramid/en/latest/narr/urldispatch.html#urldispatch-chapter](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/urldispatch.html#urldispatch-chapter)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-03T04:24:03.633

我认为您的表单应该提交给“/”，即。

```
<!-- where your home_page route is waiting for the POST -->
<form action="/" method="post"> 
```

有了之前的答案，现在看起来是正确的：

```
return HTTPFound(location=request.route_url('view_page', pagename=name)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:13:20.200

从你给它的[链接](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/api/request.html?highlight=request.route_url#pyramid.request.Request.route_url)应该是

```
 return HTTPFound(location=request.route_url('view_page',pagename=name)) 
```

当您添加此路线时

```
 config.add_route('view_page', '/{pagename}') 
```

并在之前设置变量名

```
 name= request.params['name'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T06:57:06.940

我的第一个猜测是它`location`不是.`Location``HTTPFound`

# coronasdk - Corona SDK - 管理游戏状态/对象/库存系统/Sprite 动画

> ID：14634445
> 
> 赞同：0
> 
> 时间：2013-01-31T20:23:04.047
> 
> 标签：coronasdk, corona-storyboard

我正在尝试确定在使用 Corona SDK 编写的游戏中处理以下任务的最佳方式和最有效方式。似乎有很多方法可以做事情，以至于变得很混乱，所以我希望这里有人可以提供帮助！

我正在创建一个具有库存系统/谜题等的冒险类型游戏。到目前为止，我开发的思维过程涉及使用单独的“类”来处理游戏的每个特定方面。如InventoryManagement.lua、ObjectManagement.lua、PuzzleManagement.lua等。

只是一个旁注 - 这个游戏真的不涉及物理，但我想要有动画的静态图像（想想打开一扇门或捡起一个物体）：

这是我要完成的一个示例：

*   假设您开始一个新游戏并加载第一个场景。我需要设置玩家的物品栏、房间里的物品、它们的状态、这些东西的图像等等。我假设这些东西可以在第一次游戏加载时默认，然后加载......
*   然后玩家点击一个钥匙来捡起它——此时钥匙需要出现在他们的库存中，所以现在它将从场景中移除，添加到他们的库存中（通过库存管理？），并且场景将被更新（通过场景管理？）...
*   从现在开始，钥匙应该不再出现在场景中。
*   现在说他们点击钥匙并在门上使用它，门应该动画打开并从现在开始保持打开状态。
*   如果玩家离开房间又回来，钥匙不应该出现。

现在对我来说，每次进入/离开场景时加载/卸载场景是有意义的，但是......如果你这样做，这不会变得内存密集等吗？...如果屏幕上有 30 个对象，是否有更好的方法来处理场景？

希望这很清楚 - 很难找到与这些元素中的每一个相关的具体信息。一切似乎都与物理游戏有关，我似乎无法找到有关如何“在场景中添加钥匙，如果，但不是，如果它已被使用，则为那扇门设置动画”:(

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T20:51:45.200

在故事板之间跳转时出现意外结果的相同问题。我发现的一件事是

1.  始终确保`Runtime:remove`并停止您使用的计时器。当您想要重置所有内容时，另一种选择是创建一个`reset.lua`文件并在`enterScene`您使用`storyboard.removeScene`或`storyboard.purgeScen`e 时（如果您只想摆脱您在内存中装配的所有显示对象`scene:createScene`）。

另请查看`storyboard.RemoveAll()`或`purgeAll()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:25:49.743

您需要在全局空间中制作一些东西（使用 _G）才能在场景之间使用它们。

要在场景之间切换，“故事板”非常好。

但是请注意，如果您使内存占用过多，您将需要使用一些手动内存黑客，主要是，您可能需要在加载场景之前，在清理最后一个场景后多次调用“收集垃圾”，否则你会打一个奇怪的问题：

您加载了场景“A”。

你切换到场景“B”。

游戏“卸载”“A”，但垃圾收集器没有，然后加载“B”，最终结果是“A”+“B”的内存使用。

在[我在 Corona 制作的这款冒险游戏中](http://play.google.com/store/apps/details?id=com.kidoteca.nonoamazonia.beta)，它导致了几次疯狂的崩溃，直到我想出了“收集垃圾”的把戏。

# r - 填补R中时间序列数据的空白

> ID：14634448
> 
> 赞同：2
> 
> 时间：2013-01-31T20:23:10.527
> 
> 标签：r, time-series

所以这个问题一直困扰着我一段时间，因为我一直在寻找一种有效的方法。基本上，我有一个数据框，每行都有一个来自实验的数据样本。我想这应该更多地被视为来自实验的日志文件，而不是用于分析的数据的最终版本。

我遇到的问题是，某些事件有时会记录在数据列中。为了使分析易于处理，我想做的是为事件之间的空单元格“填补空白”，以便数据中的每一行都可以与最近发生的事件相关联。这有点难以解释，但这里有一个例子：

![来自基础数据集的 RStudio 的数据帧屏幕截图](../Images/2bbab0196d18763e7db299a7b0add5f5.png)

现在，我想把它变成这样：

![在此处输入图像描述](../Images/7c511453e512036b45fe92ed7b605b24.png)

这样做将使我能够按当前事件拆分数据。在任何其他语言中，我都会使用 for 循环来执行此操作，但我知道 R 不适合这种类型的循环，而且在这种情况下，我有数十万行数据要排序，所以想知道是否有人可以提供建议以快速完成此操作？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T20:41:56.573

这个问题已经在这个网站上以各种形式被问过很多次了。标准答案是使用`zoo::na.locf`. 搜索 [r]`na.locf`以查找如何使用它的示例。

这是在基础 R 中使用的另一种方法`rle`：

```
d <- data.frame(LOG_MESSAGE=c('FIRST_EVENT', '', 'SECOND_EVENT', '', ''))
within(d, {
    # ensure character data
    LOG_MESSAGE <- as.character(LOG_MESSAGE)
    CURRENT_EVENT <- with(rle(LOG_MESSAGE), # list with 'values' and 'lengths'
                          rep(replace(values, 
                                      nchar(values)==0, 
                                      values[nchar(values) != 0]), 
                              lengths))
})
#    LOG_MESSAGE CURRENT_EVENT
# 1  FIRST_EVENT   FIRST_EVENT
# 2                FIRST_EVENT
# 3 SECOND_EVENT  SECOND_EVENT
# 4               SECOND_EVENT
# 5               SECOND_EVENT 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T20:45:09.660

`na.locf()`包**zoo**中的功能在这里很有用，例如

```
require(zoo)
dat <- data.frame(ID = 1:5, sample_value = c(34,56,78,98,234),
                  log_message = c("FIRST_EVENT", NA, "SECOND_EVENT", NA, NA))

dat <-
  transform(dat,
            Current_Event = sapply(strsplit(as.character(na.locf(log_message)), 
                                            "_"),
                                   `[`, 1)) 
```

给

```
> dat
  ID sample_value  log_message Current_Event
1  1           34  FIRST_EVENT         FIRST
2  2           56         <NA>         FIRST
3  3           78 SECOND_EVENT        SECOND
4  4           98         <NA>        SECOND
5  5          234         <NA>        SECOND 
```

为了解释代码，

1.  `na.locf(log_message)`返回一个因子（这是在 中创建数据的方式`dat`），其中`NA`s 替换为前一个非`NA`值（最后一个结转部分）。
2.  然后将 1\. 的结果转换为字符串
3.  `strplit()`在此字符向量上运行，并在下划线处将其分开。`strsplit()`返回一个包含与字符向量中的元素一样多的元素的列表。在这种情况下，每个分量都是长度为 2 的向量。我们想要这些向量的第一个元素，
4.  所以我使用`sapply()`运行子集函数`'['()`并从每个列表组件中提取第一个元素。
5.  整个事情都包含在其中，`transform()`所以 i) 我不需要参考`dat$`，因此我可以将结果作为新变量直接添加到数据`dat`中。

# html - 为什么投影向左偏移？

> ID：14634451
> 
> 赞同：1
> 
> 时间：2013-01-31T20:23:23.063
> 
> 标签：html, css, internet-explorer

我正在尝试在与 IE 7 和 8 兼容的 div 上创建投影。我只希望投影出现在 div 下方（而不是顶部、左侧或右侧边框）。使用`DXImageTransform.Microsoft.Shadow()`我将 X 偏移量设置为 0，但仅在 IE 7 和 8 中，阴影仍出现在我的 div 的左边框上。任何想法为什么？

```
#Container {
background-color: white;
position: relative;
z-index: 1;
width: auto;
zoom:1; 
filter: progid:DXImageTransform.Microsoft.Shadow(color='grey', OffX=0, OffY=5, Strength=5);
-webkit-box-shadow: 0px 5px 5px grey;
-moz-box-shadow: 0px 5px 5px grey;
box-shadow: 0px 5px 5px grey; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:27:42.217

当您模糊图像时，它会变大。即使您`0px`在水平轴上偏移（正如您所做的那样），较大的模糊也会出现在您的内容左侧。

# excel - 如何使用带有自动覆盖的 workbook.saveas

> ID：14634453
> 
> 赞同：74
> 
> 时间：2013-01-31T20:23:27.133
> 
> 标签：excel, vba, excel-2010

在这一段代码中，Excel总是提示：“文件已经存在，你要覆盖吗？”

```
Application.DisplayAlerts = False
Set xls = CreateObject("Excel.Application")
Set wb = xls.Workbooks.Add
fullFilePath = importFolderPath & "\" & "A.xlsx"

wb.SaveAs fullFilePath, AccessMode:=xlExclusive, ConflictResolution:=True   

wb.Close(True) 
```

如果我有，为什么`db.SaveAs`总是提示我覆盖现有文件`DisplayAlerts = False`？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-01-31T20:42:50.330

隐藏提示集`xls.DisplayAlerts = False`

`ConflictResolution`不是`true`或`false`属性，它应该是`xlLocalSessionChanges`

**请注意**，这与显示覆盖提示无关！

```
Set xls = CreateObject("Excel.Application")    
xls.DisplayAlerts = False
Set wb = xls.Workbooks.Add
fullFilePath = importFolderPath & "\" & "A.xlsx"

wb.SaveAs fullFilePath, AccessMode:=xlExclusive,ConflictResolution:=Excel.XlSaveConflictResolution.xlLocalSessionChanges    
wb.Close (True) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-07-05T10:45:44.463

我建议在执行 SaveAs 之前，删除该文件（如果存在）。

```
If Dir("f:ull\path\with\filename.xls") <> "" Then
    Kill "f:ull\path\with\filename.xls"
End If 
```

这比关闭和打开 DisplayAlerts 更容易，而且如果 DisplayAlerts 由于代码崩溃而仍然关闭，如果您在同一会话中使用 Excel 可能会导致问题。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-03-16T07:51:51.093

分裂意见分歧

我更喜欢：

```
 xls.DisplayAlerts = False    
   wb.SaveAs fullFilePath, AccessMode:=xlExclusive, ConflictResolution:=xlLocalSessionChanges
   xls.DisplayAlerts = True 
```

# linux - 在所有目录中执行文件类型计数

> ID：14634459
> 
> 赞同：3
> 
> 时间：2013-01-31T20:23:45.157
> 
> 标签：linux, bash, count

我有一个 bash 脚本，它可以递归地为我提供过去 45 天内编辑的所有目录中的文件计数

```
 find . -type f -mtime -45| rev | cut -d . -f1 | rev | sort | uniq -ic | sort -rn 
```

我有一个名为的目录

```
\parent 
```

在父母我有：

```
\parent\a
\parent\b
\parent\c 
```

我会在文件夹上运行一次上述脚本`a`，一次`b`又一次`c`。

当前输出为：

```
 91 xls
     85 xlsx
     49 doc
     46 db
     31 docx
     24 jpg
     22 pub
     10 pdf
      4 msg
      2 xml
      2 txt
      1 zip
      1 thmx
      1 htm
      1 /ic 
```

我想从`\parent`里面的所有文件夹中运行脚本`\parent`并获得如下输出：

```
+-------+------+--------+
| count | ext  | folder |
+-------+------+--------+
|    91 | xls  | a      |
|    85 | xlsx | a      |
|    49 | doc  | a      |
|    46 | db   | a      |
|    31 | docx | a      |
|    24 | jpg  | a      |
|    22 | pub  | a      |
|    10 | pdf  | a      |
|     4 | msg  | a      |
|    98 | jpg  | b      |
|    92 | pub  | b      |
|    62 | pdf  | b      |
|     2 | xml  | b      |
|     2 | txt  | b      |
|     1 | zip  | b      |
|     1 | thmx | b      |
|     1 | htm  | b      |
|     1 | /ic  | b      |
|    66 | txt  | c      |
|    48 | msg  | c      |
|    44 | xml  | c      |
|    30 | zip  | c      |
|    12 | doc  | c      |
|     6 | db   | c      |
|     6 | docx | c      |
|     3 | jpg  | c      |
+-------+------+--------+ 
```

我怎样才能用 bash 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T20:51:15.820

将其放入脚本中，使其可执行：`chmod +x script.sh`并使用以下命令运行它：`./script.sh`

```
#!/bin/sh

find . -type f -mtime -45 2>/dev/null \
    | sed 's|^\./\([^/]*\)/|\1/|; s|/.*/|/|; s|/.*.\.| |p; d' \
    | sort | uniq -ic \
    | sort -b -k2,2 -k1,1rn \
    | awk '
BEGIN{ 
    sep = "+-------+------+--------+"
    print sep "\n| count | ext  | folder |\n" sep
}

{ printf("| %5d | %-4s | %-6s |\n", $1, $3, $2) }

END{ print sep }' 
```

*   `sed 's|^\./\([^/]*\)/|\1/|; s|/.*/|/|; s|/.*.\.| |p; d'`

    1.  `s|^\./\([^/]*\)/.*/|\1 |``./a/file.xls`用代替`a/file.xls`。
    2.  `s|/.*/|/|``b/some/dir/file.mp3`用代替`b/file.mp3`。
    3.  `s|/.*.\.| |p`替换`a file.xls`为`a xls`, 如果`s///p`成功则它也打印到​​标准输出，（以避免没有扩展名的文件）。
    4.  `d`删除该行（以避免打印匹配（再次）或不匹配的行）。
*   `sort | uniq -ic`计算每组扩展名和目录名。

*   `sort -b -k2,2 -k1,1rn`首先按目录（字段 2）、小 -> 大，然后按计数（字段 1）以相反的顺序（大 -> 小）和数字排序。忽略空格（空格/制表符）`-b`。`sort(1)`

*   最后一个 awk 部分漂亮地打印输出，也许你想把它放到一个单独的脚本中。

如果您想查看每个管道如何过滤结果，只需尝试删除每个管道，您将看到输出。

在这里你可以找到关于 sh/awk/sed 等的好教程。

[http://www.grymoire.com/Unix/](http://www.grymoire.com/Unix/)

# c# - WebBrowser 中的文本区域

> ID：14634464
> 
> 赞同：0
> 
> 时间：2013-01-31T20:24:00.473
> 
> 标签：c#, textarea, activex, webbrowser-control

我有一个用于导航到论坛站点的**WebBrowser对象。**现在，我正在填写一个表单，其中包含我需要与之交互的**文本区域。**

当我写完主题并提交**textarea**的值时，该值没有设置为我想要的值。

```
WebBrowser browser = new WebBrowser();

browser.Navigate("www.example.com");

browser.Document.All["textarea"].InnerText = "MyText";

browser.Document.All["SubmitButton"].InvokeMember("Click"); 
```

现在这不起作用，还有一件更重要的事情..当我在调试时使用 HTML 可视化器查看页面时，可视化器中的文本区域区域未显示，它显示“此程序无法显示网页”，但页面的其余部分正常显示。

我听说**textarea**是一个 HTML5 元素，因为**WebBrowser**是一个使用 Internet Explorer 的 activeX，所以也许我有一个不支持 textarea 元素的 Internet Explorer 版本？我有 IE 10。

有人可以告诉如何正确设置**textarea**的值。

# ruby-on-rails - Rails 3 创建到嵌套独立页面的路由

> ID：14634465
> 
> 赞同：0
> 
> 时间：2013-01-31T20:24:01.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing

我有 3 层嵌套。

routes.rb 看起来像这样

```
 resources :clients do
       resources :departments do
         resources :tasks
       end
    end 
```

我想创建一个看起来像这样的自定义路径

```
/clients/:client_id/departments/:department_id/tasks/data 
```

我尝试添加以下内容

```
 resources :clients do
       resources :departments do
         resources :tasks
           member do
             get "data"
           end
       end
    end 
```

这将创建路线

```
/clients/:client_id/departments/:department_id/tasks/:task_id/data 
```

我将如何删除路径中的 :task_id 部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:30:24.127

成员路由作用于成员，这就是它需要 id 的原因。集合作用于集合，因此不需要 id。

```
resources :clients do
   resources :departments do
     resources :tasks do
       collection do
         get "data"
       end
     end
   end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:33:16.250

你应该使用

```
resources :clients do
   resources :departments do
     resources :tasks
       get "data", :on => :collection
   end
end 
```

# ios - 如何在 ipad 模拟器上部署/运行应用程序？

> ID：14634473
> 
> 赞同：0
> 
> 时间：2013-01-31T20:24:26.550
> 
> 标签：ios, objective-c

我无法将我的 iphone 应用程序转换为 ipad。我已经创建了一个单独的故事板，并从构建设置中将 ipad 故事板设置为新的故事板，但是，每当我在 ipad 6.0 模拟器上运行它时，它并没有使用我制作的新故事板（但仍然使用 iPhone 的故事板）。

使用我为 ipad 制作的新故事板部署/测试是否缺少某些设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:33:07.180

在**Project settings** > (select your *target* ) > **Summary**选项卡中，
您将看到**iPhone / iPod Deployment Info**，向下滚动到**iPad Deployment Info**并将您的故事板放在**Main Storyboard**字段中。

![在此处输入图像描述](../Images/b4dcc6603eeb5c3a7cb8c777deaf08db.png)

# sql - 用于计算答案的 SQL 查询

> ID：14634475
> 
> 赞同：0
> 
> 时间：2013-01-31T20:24:40.973
> 
> 标签：sql, ms-access

这是我的困境。我正在开发一个数据库，该数据库将获取学生的答题纸，放入表 [Answers] 并将其与表 [Tests] 中的答案键进行比较。此外，与每个问题相关的是特定的教育标准。

我从我们的测试网站获得了一份用于答题纸的 Excel 导出文件。它的设置如下：

`| Student ID | Student | Ans 1 | Ans 2 | Ans 3 | etc... |`

因此 [Answers] 设置为从 Excel 中简单直接导入。

想要的最终结果是学生错过的标准的计数列表。IE：

```
| Name     | Standard | Count |
| John Doe | ABC1234  |   8   | 
```

我不知道如何达到这一点。我可以错过标准，但我不能横向计算。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:29:55.417

您将需要使用查询从表中*提取数据：*`UNION ALL`

```
select [student id], [student], [Ans 1] As Answer
from yourtable
union all
select [student id], [student], [Ans 2] As Answer
from yourtable
union all
select [student id], [student], [Ans 3] As Answer
from yourtable
union all
select [student id], [student], [Ans 4] As Answer
from yourtable 
```

一旦数据在一列中，您就可以申请`count()`

# c# - 如何检查字符串是否有两个以上的重复字符

> ID：14634477
> 
> 赞同：3
> 
> 时间：2013-01-31T20:24:45.040
> 
> 标签：c#, string, duplicates

我正在尝试检查一个字符串是否包含两个以上的重复字符。

例如

```
'aabcd123' = ok
'aaabcd123' = not ok
'aabbab11!@' = ok
'aabbbac123!' = not ok 
```

我试过这样的东西，但没有运气

```
if (string.Distinct().Count() > 2){ 
                    //do something
                } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T20:37:08.350

这个对我有用：

```
public bool  IsOK(string s)
{
  if(s.Length < 3) return true;

  return !s.Where((c,i)=> i >= 2 && s[i-1] == c && s[i-2] == c).Any();
}

'aabcd123'     : OK
'aaabcd123'    : not OK
'aabbab11!@'   : OK
'aabbbac123!'  : not OK 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-31T20:37:56.060

只是为了经典循环：

```
public bool HasRepeatingChars(string str)
{
    for(int i = 0; i < str.Length - 2; i++)
        if(str[i] == str[i+1] && str[i] == str[i+2])
            return true;
    return false;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T20:45:04.090

您可以为此使用正则表达式：

```
return Regex.IsMatch(inputString, @"(.)\1{2,}", RegexOptions.IgnoreCase) 
```

这将检查任何字符，然后检查至少 2 次相同的字符。甚至可以使用诸如“AaA”之类的字符串，并且可以进行修改以准确找出这些字符是什么，它们在字符串中出现的位置等等（还允许您用其他内容替换这些子字符串）

更多信息：

[http://msdn.microsoft.com/en-us/library/6f7hht7k.aspx](http://msdn.microsoft.com/en-us/library/6f7hht7k.aspx)

[http://msdn.microsoft.com/en-us/library/az24scfc.aspx](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T20:36:21.133

由于您要查找三个字符的运行，而不仅仅是字符串中的三个字符，因此您需要循环并查看三个连续的字符以查看它们是否相同。像这样的循环将起作用。

```
string myString = "aaabbcd";
bool hasMoreThanTwoRepeatingCharsInARow = false;
for(int index = 2; index < myString.Length; index++)
{
  if(myString[index] == myString[index - 1] && myString[index] == myString[index - 2])
  {
    hasMoreThanTwoRepeatingCharsInARow = true;
  }
} 
```

我会坚持这个方法并使变量更好，你很高兴！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T20:55:23.793

```
 [TestMethod]
    public void Test()
    {
        const string sample1 = "aabcd123";
        const string sample2 = "aaabcd123";
        const string sample3 = "aabbab11!@";
        const string sample4 = "aabbbac123!";

        Assert.IsTrue(IsOk(sample1));
        Assert.IsFalse(IsOk(sample2));
        Assert.IsTrue(IsOk(sample3));
        Assert.IsFalse(IsOk(sample4));
    }

    private bool IsOk(string str)
    {
        char? last = null;
        var i = 1;
        foreach (var c in str)
        {
            if (last == c)
            {
                i++;
                if (i > 2) return false;
            }
            else
            {
                i = 1;
            }
            last = c;
        }
        return true;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-01T17:02:20.517

使用正则表达式

```
(?:.*<letter>.*){2} 
```

例如，对于字母 b，您将使用

```
(?:.*b.*){2} 
```

对于所有元音

```
 (?:.*[aeiou].*){2} 
```

有关 c# 上的正则表达式用法，请参阅[https://docs.microsoft.com/en-us/dotnet/api/system.text.regularexpressions.regex?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.text.regularexpressions.regex?view=net-5.0)

# html - HTML 表格 - 行之间的空间

> ID：14634480
> 
> 赞同：0
> 
> 时间：2013-01-31T20:25:01.660
> 
> 标签：html, html-table

对于同一个 HTML 表，我看到 Firefox 和 Chrome 之间的行为不同。

Firefox：行之间的空间被平均分配。

Chrome：行之间的空间不均等。

有人可以告诉我发生了什么吗？

[jsfiddle.net](http://jsfiddle.net/JT5ay/3/)

```
<html>
    <body>
        <table border="1" width="100%">
            <tr>
                <td rowspan="3">AAA</td>
                <td>BBB</td>
                <td rowspan="3"CCC<br/>CCC<br/>CCC<br/>CCC<br/>CCC<br/>CCC<br/>CCC<br/>CCC<br/>CCC<br/>CCC<br/></td>
            </tr>
            <tr>
                <td>BBB</td>
            </tr>
            <tr>
                <td>BBB</td>
            </tr>
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:45:01.717

这是 Chrome/Webkit 浏览器的已知渲染问题。

一位用户在这里提供了一个解决方案：[Table cells bad rendering with Google Chrome/Webkit](https://stackoverflow.com/questions/1706777/table-cells-bad-rendering-with-google-chrome-webkit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T16:04:48.827

有一个类似的问题，我在 Chrome 中的行之间有 1px 的空间，但在其他浏览器中没有。当我在 CSS 中添加以下内容时，它得到了解决。

```
td{
   padding: 0px 0px;
   position:relative;
} 
```

关键是将 td 设置为“位置：相对”。出于某种原因，它解决了这个问题。在这种情况下，也许同样可以提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:32:55.783

您需要通过使用`<br/>`而不是关闭标签`<br>`。

在兼容的 XHTML 中，所有标签都需要正确关闭。在这种情况下，不是用 关闭标签`</br>`，而是使用尾随`/`来完成。

```
<br></br> 
```

相当于

```
<br/> 
```

你会对图像元素做同样的事情：

```
<img src="..."/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-30T19:45:25.657

如果你关闭第三个怎么办`<td...`

```
<td rowspan="3"CCC
<td rowspan="3">CCC 
```

# python - 当父级位于隐含的命名空间中时，BeautifulSoup 会丢弃子级

> ID：14634482
> 
> 赞同：1
> 
> 时间：2013-01-31T20:25:15.170
> 
> 标签：python, firefox, selenium, beautifulsoup

我正在使用 selenium 和 BeautifulSoup 为 Nordstrom 的网站构建一个屏幕截图。该网站实际上并没有命名空间中的每个标签，但 Firefox 网络驱动程序会创建一个以避免歧义（具体来说，该网站有一个`<html xmlns>`标签似乎会混淆驱动程序）。
因此，所有内容都放在了 namespace 中`a0`。`find()`但是，Beautiful Soup 仅在调用时返回父元素和（有时）一级子元素。
以这个 html 为例：

```
<div class='division'>
   <a href='#'>
      <img />
   </a>
</div> 
```

一切都在隐含的`a0`命名空间中，因此我们可以通过以下方式获取图像：

```
soup.find('a0:div',{'class':'division'}).find('a0:img') 
```

但是，这会返回`None`。我已经看过并且可以肯定地`soup.prettify()`说. 这是一个预期的功能（在这种情况下我需要找到一种新的方法）还是一个错误（在这种情况下我需要一个解决方法）？`a0:img``a0:div`

**编辑**：

为避免混淆，这是一个演示整个工作流程的示例：

```
from selenium import webdriver
from BeautifulSoup import BeautifulSoup # Note that this is BeautifulSoup 3
b = webdriver.Firefox()
b.get("http://shop.nordstrom.com/c/womens-skirts")
borscht = BeautifulSoup(b.page_source)
theImageThatCannotBeFound = borscht.find('a0:div',{'class':'fashion-item'}).find('a0:img') 
```

上面的代码设置`theImageThatCannotBeFound`为`None`，我认为这是不正确的。我希望这可以澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T22:45:44.400

这对我有用。

```
import urllib
from BeautifulSoup import BeautifulSoup

url = 'http://shop.nordstrom.com/c/womens-skirts'
fp = urllib.urlopen(url)
soup = BeautifulSoup(fp)

print soup.find('div',{'class':'fashion-item'}).findAll('img') # also tried .find 
```

尝试排除`a0:`. 这似乎是你的问题。

编辑：

在 Selenium 内外同时使用 Chrome 和 Firefox 浏览器，`xmlns`当我查看它时，它被设置为一个空字符串，这就是上面的代码对我有用的原因。似乎由于某处某些组件的不匹配，我们没有得到相同的结果，而您得到的是 namespace `a0:`。

因为我无法重现这种情况，所以我能找到的唯一解决方案（虽然很hacky）是手动替换命名空间：

```
source = browser.page_source.replace('a0:div','div')
soup = BeautifulSoup(source)

print soup.find('div',{'class':'fashion-item'}).find('img') 
```

我承认这不是一个理想的解决方案。如果我找到更优雅的解决方案，我会继续寻找并更新我的答案。

# asp.net - 在 Chrome 和 Firefox 中下载时损坏的 PDF 文件

> ID：14634486
> 
> 赞同：1
> 
> 时间：2013-01-31T20:25:35.997
> 
> 标签：asp.net, .net, c#-4.0, browser, download

我正在使用 iTextSharp 创建 pdf 报告（文件）并将它们存储在我的应用程序所在的 Web 服务器上。我能够创建文件，进入存储文件夹并毫无问题地打开文件。注意：用户不会在创建时自动下载文件。

我想给用户一个选项，用一个按钮从服务器下载“旧”报告。这在 IE (10) 中运行良好，但在 Chrome 和 Firefox 中运行良好。我总是收到错误消息：打开此文档时出错。文件已损坏，无法修复。

我有这个图像按钮，点击后我根据[这篇文章](http://mohyuddin.blogspot.com/2008/07/responsewritreresponsebinarywritre-and.html)将用户发送到通用处理程序（因为我的页面包含更新面板） （现在只部分使用它）。

这是实际下载文件的代码：

```
 public void ProcessRequest(HttpContext context)
    {
        var _fileName = context.Request.QueryString["fileName"];

        using (var _output = new MemoryStream())
        {
            //var _fileSeverPath = context.Server.MapPath(_fileName);
            context.Response.Clear();
            context.Response.ContentType = "application/pdf";// "application/pdf";
            //context.Response.AppendHeader("Content-Length", _fileName.Length.ToString());
            context.Response.AppendHeader("Content-Disposition", string.Format("attachment; filename=" + Path.GetFileName(_fileName)));

            context.Response.WriteFile(_fileName);
            context.Response.Flush();
            context.Response.Close();
            context.Response.End();
        }
    } 
```

正如我所说，这在 IE 中运行良好，但在 Chrome 和 Firefox 中却不行。当我在记事本中打开文件时，我发现在 Chrome 和 Firefox 中下载时，我只得到了大约 1/3 的文件。

任何建议将不胜感激。这几天一直在尝试解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:28:53.950

来自[HttpResponse.WriteFile 方法（字符串）](http://msdn.microsoft.com/en-us/library/dyfzssz9.aspx)

> 当此方法用于大文件时，调用该方法可能会引发异常。此方法可使用的文件大小取决于 Web 服务器的硬件配置。有关详细信息，请参阅 Microsoft 知识库网站上的文章 812406，“PRB：Response.WriteFile 无法下载大文件”。

试试这个：

```
public void ProcessRequest(HttpContext context)
{
    var _fileName = context.Request.QueryString["fileName"];
    context.Response.Clear();
    context.Response.Buffer = true;
    context.Response.ContentType = "application/pdf";
    context.Response.AppendHeader(
        "Content-Disposition",
        string.Format("attachment; filename=" + Path.GetFileName(_fileName)));

    using (var fs = new FileStream(_fileName, FileMode.Open, FileAccess.Read))
    {
        using (var sr = new StreamReader(fs, true))
        {
            int length = (int)fs.Length;
            byte[] buffer;

            using (BinaryReader br = new BinaryReader(fs, sr.CurrentEncoding))
            {
                buffer = br.ReadBytes(length);
                context.Response.BinaryWrite(buffer);
            }
        }
    }
    context.Response.Flush();
    context.Response.Close();
    context.Response.End();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:10:29.563

好的，最后.. 我找到了解决方案，同时它让我觉得自己像个傻瓜.. 删除了 context.Response.Close(); ...然后一切都很完美:)

# java - API 使用 XBox 360 作为扩展器/在 XBox 上启用 UPnP AV 传输

> ID：14634490
> 
> 赞同：2
> 
> 时间：2013-01-31T20:25:44.147
> 
> 标签：java, android, upnp, xbox360, xbox

我想要实现的是能够告诉 Xbox 360 从某个服务器播放 HTTP / MP3 流，并且我想远程控制它（即不使用 XBox 控制器/电视屏幕）。

我知道 Xbox 检测到了 UPnP 媒体服务器，但这些需要一些设置，主要问题是我必须使用我的 xbox 播放音乐。

我想构建一个可以流式传输到 Xbox 的 Android 应用程序，同时我可以控制应用程序中的所有内容。因此，我的想法是在手机上运行 HTTP 服务器，检测 Xbox 并告诉它播放指向手机的 http URL。

我可以找到 XBox UPnP MediaRenderer 接口，但它没有宣传 AVTransport 服务（这是必需的）。我用 XBMC 尝试过同样的事情并且它有效（XBMC 确实有 AVTransport）。

Windows Media Center 确实使用 XBox 作为扩展器，所以它必须是可能的。问题是如何。也许有一个启用 AVTransport 功能的扩展器设置握手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:06:31.743

[这家伙说](https://github.com/FreeRDP/FreeRDP/wiki/Windows-Media-Center) *“扩展器和媒体中心之间使用的协议是部分开放的”*，并提供了一些到 MSDN 的链接。`AVTransport`但恐怕没有什么比设备配对后出现的隐藏界面更好的了。没有希望像标准一样令人尴尬的无聊`SetAVTransportURI`。通信似乎是通过“远程桌面协议通道”（不管是什么）进行的，这让我对微软为什么要费心实施这一点感到困惑`MediaRenderer`。我猜是“拥抱，伸展，熄灭”的另一个镜头。这是可笑的递归，因为 UPnP 基于 Microsoft 发明的 SSDP。

无论如何，它显然是一个核心逆向工程，数据包捕获是一个突出的工具。该页面引用了另一个项目，旨在重新创建媒体中心 - 基本上是您想要的。但停滞了将近3年。我想你可以自由拿起:)

# asp.net - 创建签名 URL

> ID：14634492
> 
> 赞同：1
> 
> 时间：2013-01-31T20:25:47.427
> 
> 标签：asp.net, .net, vb.net, amazon-web-services

有谁知道如何使用 VB .Net 创建签名 URL？我环顾四周，但没有什么可以指导我做什么/使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:27:07.850

您正在寻找适用[于 .Net 的 AWS 开发工具包](http://aws.amazon.com/sdkfornet/)，它在 NuGet 上可用。

打电话`AmazonS3Client.GetPreSignedURL()`。

# sql - 根据不同的标准加入一个表

> ID：14634495
> 
> 赞同：0
> 
> 时间：2013-01-31T20:26:13.130
> 
> 标签：sql, join, oracle11g

所以我有一张桌子，它的基础是以下结构：

*   工作指示
*   子订单
*   地位
*   状态日期
*   类型
*   类别

（还有其他事情，但为了这个问题，我们忽略了它们）

我正在过滤类型/类别的某个子集，我知道该怎么做。但我需要出来的是以下

```
WorkOrder | SubOrder | Type - Category | Min(StatusDate) where Status = Open | Min(StatusDate) where Status = Complete | Calculated Date Difference between the two 
```

我可以一次得到一个，这没问题。Ror 暂时，我只是在 Excel 中玩弄它。但是，我需要将其放入我需要开始生成的报告的 SQL 语句中。可能有也可能没有状态为 Complete 的 StatusDate（如果 SubOrder 没有在其他地方标记为完成），并且数据集也需要反映这一点。每个 SubOrder 可能有多次打开和完成，所以我们只需要第一次（因此是 Min()）

关于我应该如何处理这项任务的任何想法？（不，不允许更改数据结构，OTS 软件，我们不支付更改它的费用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:35:09.090

我不确定我是否理解您为什么需要将表连接到自身。听起来你只是想要

```
SELECT WorkOrder,
       SubOrder,
       Type,
       Category,
       min( case when Status = 'Open' 
                 then StatusDate 
                 else null 
             end) min_open_status_date,
       min( case when Status = 'Complete' 
                 then StatusDate 
                 else null 
             end) min_complete_status_date,
       min( case when Status = 'Complete' 
                 then StatusDate 
                 else null 
              end) - 
         min( case when Status = 'Open' 
                   then StatusDate 
                   else null 
                end)
  FROM table_name
 WHERE <<whatever conditions>>
 GROUP BY WorkOrder,
          SubOrder,
          Type,
          Category 
```

如果这不是您要查找的内容，那么在 DDL 后编辑您的问题以创建表，DML 以填充一些行，并准确告诉我们您想要该示例数据的输出，这将非常有帮助。[或者在sqlfiddle.com](http://www.sqlfiddle.com)上创建一个小提琴。否则，我们必须猜测你想要什么。例如，您说您想计算两个日期之间的差异，但两个日期之一可能不存在——如果没有关闭日期，您是否要使用某个基准日期进行计算？此查询将返回`NULL`计算出的差异，这可能是您想要的，也可能不是您想要的。

# ruby - 我应该为了非语义修改而提高我的 Ruby gem 的版本吗？

> ID：14634504
> 
> 赞同：0
> 
> 时间：2013-01-31T20:26:49.167
> 
> 标签：ruby, github, rubygems, gem, versioning

例如，我所做的*唯一*更改如下：

```
if foo.class == Hash 
```

至：

```
if foo.instance_of?(Hash) 
```

这是否会保证补丁级别的碰撞（即`3.0.1`to `3.0.2`）？我打赌“不”，但想看看其他人怎么说。

另一件事是：我可以做一个补丁级别的提升，然后将它推送到 GitHub，但只是不推送它 RubyGems（即不要用无意义的更新来打扰人们）。想法？

# mysql - MySQL 在单个表中组合组

> ID：14634510
> 
> 赞同：0
> 
> 时间：2013-01-31T20:27:29.530
> 
> 标签：mysql

我正在尝试编写基于单个表检查组成员身份的语法。我有多次在表中的用户（意思是多行），所以我的数据可能如下所示：

```
user      region     field1
----      ------     ------
282       10         38
282       10         128
464       3          57 
```

等等

我需要的是这样的语法：“组 A = 区域 10 和 FIELD1 列中的任何这些数字 - 38、79、126。然后组 B = 区域 10 和 FIELD1 列中的任何这些数字 - 80,128”

现在，正如您从我的示例中看到的那样，用户 282 将被考虑在 A 组和 B 组中。最终，我希望找出谁在这两个组中。我做了一个 GROUP_CONCAT 来告诉我他们在同一个组中，但是我如何计算它们甚至过滤“组”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:44:36.743

使用自联接：

```
SELECT DISTINCT t1.user
FROM MyTable t1
JOIN MyTable t2 USING (user)
WHERE t1.region = 10 AND t1.field1 IN (38, 79, 126)
AND t2.region = 10 AND t2.field1 IN (80, 126) 
```

# sql - 首先强制子查询解析

> ID：14634521
> 
> 赞同：4
> 
> 时间：2013-01-31T20:28:23.297
> 
> 标签：sql, oracle, oracle10g, oraclereports

我正在创建一个多次使用 2 个嵌入式服务器功能的查询。

问题：函数搜索一个相当大的表，它们需要很长时间才能执行。

目标：像使用表一样使用子查询，这样我就可以引用列而无需运行函数来多次生成列。

`Example Pseudocode:`

 ````
Select general.column1, general.column2, general.column1-general.column2
from (select package.function1('I take a long time') column1, 
      package.function2('I take even longer') column2,
      normal_column
      from bigtable) general; 
````  `当我运行我的代码时，general.column1 将引用 column1 语句中的函数，而不是它返回的数据（这最终是我所追求的）。

我对 SQL 相当陌生，因此感谢您提供任何帮助，如果您需要更多信息，我会尽力提供。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T08:35:00.680

我建议你使用子查询分解。第一个子查询将只执行一次，然后在其余的查询中使用。

```
WITH function_result AS
  (SELECT package.function1('I take a long time') column1 
   ,      package.function2('I take even longer') column2
   FROM   dual)
SELECT function_result.column1
,      function_result.column2
,      function_result.column1 - function_result.column2
,      bigtable.normal_column
FROM   bigtable 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T21:13:36.393

一般来说，在这种情况下，您想要做的是利用标量子查询缓存。

即放：

```
Select general.column1, general.column2, general.column1-general.column2
  from (select (select package.function1('I take a long time') from dual) column1, 
               (select package.function2('I take even longer') from dual) column2,
               normal_column
          from bigtable) general; 
```

`deterministic`如果它是确定性的，那么decaring 函数也很有帮助。

一个小例子：

```
SQL> create or replace function testfunc(i varchar2)
  2  return varchar2
  3  is
  4  begin
  5    dbms_application_info.set_client_info(userenv('client_info')+1 );
  6    return 'hi';
  7  end;
  8  /

Function created. 
```

现在让我们像你一样测试对函数的调用：

```
SQL> exec dbms_application_info.set_client_info(0);

PL/SQL procedure successfully completed.

SQL> set autotrace traceonly
SQL> select *
  2    from (select testfunc(owner) a
  3            from all_objects);

57954 rows selected.

SQL> select userenv('client_info') from dual;

USERENV('CLIENT_INFO')
----------------------------------------------------------------
57954 
```

该函数被调用了 57954 次（每行一次）。现在让我们使用标量缓存：

```
SQL> exec dbms_application_info.set_client_info(0);

PL/SQL procedure successfully completed.

SQL> select *
  2    from (select (select testfunc(owner) from dual) a
  3            from all_objects);

57954 rows selected.

SQL> select userenv('client_info') from dual;

USERENV('CLIENT_INFO')
----------------------------------------------------------------
178 
```

178 个电话而不是 57k！在您的情况下，您只表明您有一个文字并且没有每行不同的输入（如果是这种情况，使用标量缓存后的调用次数应该是 1）。

如果我们添加确定性：

```
SQL> create or replace function testfunc(i varchar2)
  2  return varchar2 deterministic
  3  is
  4  begin
  5    dbms_application_info.set_client_info(userenv('client_info')+1 );
  6    return 'hi';
  7  end;
  8  /

Function created.

SQL> exec dbms_application_info.set_client_info(0);

PL/SQL procedure successfully completed.

SQL> select *
  2    from (select (select testfunc(owner) from dual) a
  3            from all_objects);

57954 rows selected.

SQL> select userenv('client_info') from dual;

USERENV('CLIENT_INFO')
----------------------------------------------------------------
55 
```

现在下降到 55。在 11g 中`result_cache`，我们可以用它来代替确定性，这会将 subsequant 运行的调用减少到 0 调用。`

# django - Django 显示 charfield 字段，将分钟表示为 hh 小时，mm 分钟

> ID：14634522
> 
> 赞同：1
> 
> 时间：2013-01-31T20:28:25.127
> 
> 标签：django

我在 Django 中有一个字段是`models.CharField`.

它存储电影的持续时间。

对于持续 90 分钟的电影，当我从模板中调用它时，类似于

```
{{ movie.duration }} 
```

我想要 1 小时 30 分钟而不是 90 分钟。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T05:30:51.460

我喜欢 duration_formatted 函数的想法，但我会推荐模板过滤器与模型

```
from django import template

register = template.Library()

@register.filter('duration_format')
def duration_format(value):
    value = int(value)
    h = 'hour'
    m = 'minute'
    hours = int(value/60)
    minutes = value%60
    if hours <> 1:
        h += 's'

    if minutes <> 1:
        m += 's'

    return '%s %s , %s %s' % (hours, h, minutes, m) 
```

然后在你的模板中你可以（假设过滤器在 my_template_tags.py 之类的东西中）

```
{% load my_template_tags %}

{% block content %}
<p>{{ film.title }} - {{ film.duration|duration_format }}</p>
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T02:09:48.920

您可能应该只使用`models.TimeField`而不是`CharField`.

如果您真的需要一种将字符串数字转换为字符串时间的方法（在装饰器中或任何地方），您可以（过度）使用[`time`](http://docs.python.org/3.3/library/time.html)类型及其强大的[方法](http://docs.python.org/3.3/library/time.html#time.strftime)之一：

```
from datetime import time    

def num_to_time(snum):
    num = int(snum)
    ttime = (num / 60, num % 60)
    return time.strftime('%k h %M s')[1:]
    #[1:] just because %k produces one leading space 
```

# java - Eclipse Juno - 关闭 package-info.java 生成？

> ID：14634524
> 
> 赞同：1
> 
> 时间：2013-01-31T20:28:32.007
> 
> 标签：java, eclipse, eclipse-juno

当您在 Eclipse Juno 中添加一个新包时，它会自动创建一个 package-info.java 文件。这对我来说只是混乱。有没有办法关闭这个自动创建？我查看了窗口-> 首选项，但似乎找不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T20:36:37.400

好吧，在我的电脑上它不会自动创建这个 package-info.java 文件。实际上，当您创建一个新包时，您会看到以下向导：

![在此处输入图像描述](../Images/e0804bac1ad5ce3b57800a383926d387.png)

我在控制文件创建的复选框周围放了一个红色框。如果您取消选择该框，它将不会创建文件，并且在您下次创建包时将保持未选中状态。

# macruby - 未初始化的常量 NSJSONSerialization

> ID：14634526
> 
> 赞同：1
> 
> 时间：2013-01-31T20:28:51.643
> 
> 标签：macruby, rubymotion, nsjsonserialization

如何让 NSJSONSerialization 在 macruby 中被识别？

```
framework 'foundation'

puts NSXMLDocument
#=> NSXMLDocument

puts NSJSONSerialization
#=> /Users/home/Desktop/Dropbox/script.rb:3:in `<main>': 
    uninitialized constant NSJSONSerialization (NameError) 
```

还

```
$ macruby -v
MacRuby 0.12 (ruby 1.9.2) [universal-darwin10.0, x86_64] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:51:44.030

实际上，我觉得自己像个傻瓜，这失败了，因为我在 Snow Leopard 上运行。直到 10.7 才支持 NSJSONSerialization。

我会把这个问题留给其他遇到同样事情的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T01:01:01.270

```
irb(main):001:0> framework 'foundation'
=> true
irb(main):002:0> puts NSJSONSerialization
NSJSONSerialization
=> nil

irb(main):014:0> NSJSONSerialization.dataWithJSONObject(['dog', 'cat', 'rabbit'], options:0, error:nil).to_str
=> "[\"dog\",\"cat\",\"rabbit\"]"

$ macruby -v
MacRuby 0.13 (ruby 1.9.2) [universal-darwin10.0, x86_64] 
```

也许它在以后的版本中得到了修复。这实际上并不是 RubyMotion 特有的，但`NSJSONSerialization`它具有足够广泛的兴趣，值得将问题标记为这样。

# linq - 如何动态包含（或不包含）关系

> ID：14634530
> 
> 赞同：0
> 
> 时间：2013-01-31T20:28:56.843
> 
> 标签：linq, entity-framework

我是 EF5 和 LINQ 的新手，并且在以下方面有些挣扎。

我在急切的负载情况下工作，并且想知道如何最好地编写一种方法来支持以下内容。

实体 A 与其他 3 个实体有关系。

我想要一个返回 Listist 的方法（没问题），但我还希望该方法有 3 个参数，指示我是否要包含其他 3 个相关实体中的每一个。

因此，如果将这三个都包括在内，则此作品。

```
 var AA = from e in context.A
        .Include( "Bs" )
         .Include( "Cs" )
         .Include( "Ds" )
                    where e.......
                    select e; 
```

如何根据我的方法参数编写它以允许包含存在或不存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:47:42.090

传入三个参数`bool includeBs`，`bool includeCs`并`bool includeDs`传入方法中然后使用：

```
DbQuery<A> query = context.A;
if (includeBs)
    query = query.Include("Bs");
if (includeCs)
    query = query.Include("Cs");
if (includeDs)
    query = query.Include("Ds");

var AA = from e in query
         where e.......
         select e; 
```

附带说明：使用 EF 5，您应该有一个`Include`可用的强类型版本，它采用 lambda 表达式而不是字符串作为参数，例如`Include(a => a.Bs)`. 当您将`DbQuery<A>`上面替换为 时，您也可以使用它`IQueryable<A>`。

# ruby-on-rails - :disable_with 但不调整大小

> ID：14634532
> 
> 赞同：1
> 
> 时间：2013-01-31T20:29:04.410
> 
> 标签：ruby-on-rails, unobtrusive-javascript

任何熟悉 :disable_with 选项的人都知道它会在单击时调整大小以适应输入按钮的新文本。无论按钮的新内容如何，​​我都希望按钮保持其原始大小。有人知道这样做的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:00:53.857

当您使用该`:disable_with`选项时，您使用的是 Rails Unobtrosive Javascript 驱动程序 jquery-ujs，它从 Rails 3.1 开始`data-disable-with`在此处调用数据处理程序：

```
/**
 * disable-with handlers
 */
var disable_with_input_selector = 'input[data-disable-with]';
var disable_with_form_selector = 'form[data-remote]:has(' + disable_with_input_selector + ')';

$(disable_with_form_selector).live('ajax:before', function () {
    $(this).find(disable_with_input_selector).each(function () {
        var input = $(this);
        input.data('enable-with', input.val())
             .attr('value', input.attr('data-disable-with'))
             .attr('disabled', 'disabled');
    });
});

$(disable_with_form_selector).live('ajax:complete', function () {
    $(this).find(disable_with_input_selector).each(function () {
        var input = $(this);
        input.removeAttr('disabled')
             .val(input.data('enable-with'));
    });
}); 
```

如果您注意到，这里没有任何东西可以重新调整按钮的大小。扩展很可能是由额外的文本引起的，尽管它可能是由附加到`disabled`属性的一些默认 jQuery CSS 引起的（我实际上没有检查过，但这似乎不太可能）。我建议编写严格的 CSS 规则来防止盒子重新调整大小或做任何你不喜欢的事情。无论哪种方式，这都会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T14:04:05.053

保存按钮时保持相同宽度的 CS 片段：

```
btn = 'input[data-disable-with]'
frm = 'form[data-remote]:has(' + btn + ')'

$(frm).on 'ajax:before', ->
    $(@).find(btn).each ->
        input = $(@)
        input.css('width', input.css('width'))

$(frm).on 'ajax:complete', ->
    $(@).find(btn).each ->
        $(@).css('width', '') 
```

感谢小矮人。

# php - 将嵌入的 swf 对象从网页下载到服务器

> ID：14634533
> 
> 赞同：0
> 
> 时间：2013-01-31T20:29:15.037
> 
> 标签：php, html, object, embed, flashvars

我知道如何缓存网页中的图像并保存它们。

但我想知道如何从网页下载**“application/x-shockwave-flash”**文件，其元素如下：

```
<embed type="application/x-shockwave-flash" src="/media/player/flvplayer.swf" width="550" height="450" style="undefined" id="single" name="single" quality="high" allowfullscreen="true" menu="false" flashvars="file=/files/fa/news/91/11/12/143130_319.flv&amp;width=550&amp;height=450"> 
```

或者认为我想提取文件的链接。

从我上面看到的，文件的链接是：

`http://domain.com/files/fa/news/91/11/12/143130_319.flv`

如何提取它？（假设某些**flashvars**属性与上面不完全相同）

*或任何其他想法将不胜感激。*

# java - 在矩阵加法/乘法中使用泛型

> ID：14634535
> 
> 赞同：5
> 
> 时间：2013-01-31T20:29:24.560
> 
> 标签：java

我正在尝试创建一个自定义类来创建矩阵，并且除其他外，执行将所有单元格相加或将它们全部相乘的操作。但是，我想使用泛型，因此矩阵可以是任何类型的数字：float、double、int 等。因此我设置了这样的类：

```
public class Matrix<num> 
```

初始化时，此类的实例化基于用户提供的数据创建一个矩阵，存储在实例的 .matrix 变量中。现在，在我想要添加所有单元格的代码中，我执行以下操作：

```
public num addMatrices(num[][] toAdd){
        num result;
        if (toAdd.length != this.rows && toAdd[0].length != this.columns){
            System.out.println("Matrix mismatch. Try Again.");
            return toAdd[0][0];
        }
        for (int i=0; i<rows; i++)
            for (int j=0; j<rows; j++){
                result = this.matrix[i][j] + toAdd[i][j];
            }
    } 
```

但是，我遇到了多个问题。首先，我无法将 result 初始化为零，这使得执行 += 操作变得困难。其次，当我尝试添加两个矩阵的单元格时，编译器告诉我 + 运算符对于类型 num 是未定义的。

我认为泛型的全部意义在于拥有一个包罗万象的类型，这样我就可以在一种情况下使用浮点数和在另一种情况下使用整数，但是如果我需要为 + 等运算符指定类型，我不确定优势在哪里进来...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:47:11.840

您不能对对象执行诸如`+`和之类的操作`-`（某些特殊情况除外）。泛型都是关于对象类型的，因此您对它们的用例并不理想。

也就是说，您可以将您的声明变成类似 的东西`public class Matrix<num extends Number>`，这样您就可以传入`Integer`, `Double`,`BigInteger`等。然后您可以使用类似`num.longValue()`or的东西`num.doubleValue()`来获取数字的长或双表示。然后，您需要从您的方法中返回 a `double`or`long`或任何内容，而不是您的泛型类型。

另一种选择是创建一个自定义容器类，该类具有加法、减法等方法。然后你的类声明可以是`public class Matrix<num extends Custom>`. 您必须弄清楚如何将 long 添加到 double 并返回 Custom 类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:50:35.173

问题是你`num`可以成为任何人。因此，例如，如果您创建了一个`Matrix<Object>`?

您可以尝试使您的号码从 扩展[`Number`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Number.html)，但即使那样您也无法使用`+`，因为 java 不知道将这个泛型转换为什么。

您可以创建一个类似于您`Matrix`的通用方法来执行此操作。就像是

```
public static <NUM extends Number> NUM add(NUM[][] matrixA, NUM[][] matrixB, NumFunction<NUM> function) {
    // all equals to your add method, but the result you get with
    result = function.apply(this.matrix[i][j], toAdd[i][j]);
}

public interface NumFunction<NUM extends Number> {
    NUM apply(NUM operA, NUM operB);
} 
```

您将需要复制`NumFunction`到每种类型`Number`，或创建一个泛型来检查“instanceof”是什么类型的 Number。这不是很漂亮：P

# c - 如何计算没有换行符的字符数？

> ID：14634538
> 
> 赞同：1
> 
> 时间：2013-01-31T20:29:27.560
> 
> 标签：c

我正在编写一个简单的程序来计算用户输入的字符数，我写了一个 if 来检查是否有换行符但仍在打印它..

编码：

```
#include <stdio.h>

int main()

{
    char ch;
    int numberOfCharacters = 0;
    printf("please enter a word, and ctrl + d to see the resault\n");

    while ((ch = getchar()) != EOF)

    {
        if (numberOfCharacters != '\n')
        {
            numberOfCharacters++;
        }

    }

    printf("The number of characters is %d", numberOfCharacters);

    return 0;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T20:33:31.760

想想这一行：

```
 if (numberOfCharacters != '\n') 
```

这怎么可能有意义？您正在将到目前为止读取的字符数与换行符进行比较，这就像将苹果与橙子进行比较，肯定行不通。这是您应该检查的另一个变量...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T20:33:02.007

将您的循环更改为此。

```
while ((ch = getchar()) != EOF)
{
    if(ch != '\n') 
        numberOfCharacters++;
} 
```

# json - 使用 strtok() 将 JSON 解析为二维数组

> ID：14634539
> 
> 赞同：0
> 
> 时间：2013-01-31T20:29:29.057
> 
> 标签：json, strtok

我正在尝试使用 strtok() 将 JSON 数据解析为二维字符数组。但效果不好。（我知道 strtok 会更改原始文件，所以我有一个临时缓冲区但它不起作用）

这是 JSON 数据：

```
{"data":[
[13,0,31,20,17,59],
[5,1,0,0,0,0],
[0,9,26,24,0,1],
[7,9,57,31,0,0],
[5,1,0,0,0,0]
]} 
```

这是我的代码：

```
int parser(char *buffer){

      char *pStr;
      char *token;
      char *t;
      char *p;
      int size;
      char temp[100];
      pStr = strstr(buffer, "{\"data\":[[");
      //offet by 9 to reach the JSON data
      pStr=&pStr[9];
      token=strtok(pStr,"[");
      printf(token);

      while(token != NULL)
      {
          p = strstr(token, "]");
          size=p-token;
          memcpy(temp, token, size);
          t=strtok(temp,",");
          while(t != NULL){
                      printf(t);
              t = strtok(NULL, ",");
          }
          token = strtok(NULL, "[");
      }
    return 0;
} 
```

结果看起来临时缓冲区不起作用。我错过了什么？非常感谢。

```
13,0,31,20,17,59],
13
0
31
20
17
59 
```

# java - 我是否在 Java 中使用此代码正确计算概率？

> ID：14634540
> 
> 赞同：0
> 
> 时间：2013-01-31T20:29:37.123
> 
> 标签：java, probability

我正在尝试计算在给定周期数后投资回报为正的总概率。自从我做概率以来已经有一段时间了，所以我不太记得它。我做对了吗？我得到的数字相当低。

```
double totalProbPos = 1;
for (int i = 0; i < maxPeriods; i++) {
    totalProbPos *= (probPos / 100);
}
totalProbPos = round(totalProbPos);
System.out.println("\nThe probability that your investment will return positive after " + maxPeriods + " periods is: \n    " + totalProbPos + "%."); 
```

其中：`maxPeriods, probPos`由用户给出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:35:48.633

```
totalProbPos *= (probPos / 100); 
```

最好将其中一个操作数转换为 double 以避免[整数除法](http://www.cs.umd.edu/~clin/MoreJava/Intro/expr-int-div.html)问题（假设您关心小数点）

```
totalProbPos *= ((double)probPos / 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:04:59.580

我猜想（强调“猜测”）解决这个问题的方法是尝试推导出最终投资回报的概率分布。然后你只需找到回报大于零的概率（即从 0 到概率密度的无穷大的整数）。结束时间返回的概率分布可能类似于高斯（正态）分布，也可能是离散状态的分布，如马尔可夫链给出的。也许最初的问题陈述有一些信息可以帮助人们弄清楚该怎么做。

# visual-c++ - 托管 C++ - 一般编译错误

> ID：14634545
> 
> 赞同：0
> 
> 时间：2013-01-31T20:29:48.040
> 
> 标签：visual-c++, generic-list

我有这三个.h 文件，这些文件给了我很多令人难以置信的错误，一定有一些我忽略的基本问题。我的目标是创建一个有效的链表。我意识到存在一些逻辑问题，但现在，我更感兴趣的是让它编译。

基本节点类：

```
#pragma once 

#include "stdafx.h"
#include <iostream>
#include <deque>
#include <climits>
#include "FreeList.h"

using namespace std;
using namespace System;
using namespace System::Collections;
using namespace System::Collections::Generic;

namespace ListTestProgram
{
generic <typename E> ref class LinkNode
{
private:
    LinkNode<E>^ ptr;
    FreeList<E>^ freelist;

public:
    E element;
    LinkNode^ next;

    // constructors
    LinkNode( E elemval, LinkNode<E>^ nextval = nullptr)
    {
        element = elemval; next = nextval;
        freelist = gcnew FreeList<E>;
    }

    LinkNode(LinkNode<E>^ nextval = nullptr) 
    { 
        next = nextval; 
        freelist = gcnew FreeList<E>;
    }

    LinkNode<E>^ newNode()
    {
        freelist->nextNode();
    }

    void deleteNode(LinkNode<E>^  ptr)
    {
        freelist->add((LinkNode<E>^)ptr)->next;
    }
};
} 
```

链接类：

```
// LinkList.h  provides for implementation of a linked list
#pragma once

#include "stdafx.h"
#include "LinkNode.h"
#include <iostream>
#include <deque>
#include <climits>

using namespace std;
using namespace System;
using namespace System::Collections;
using namespace System::Collections::Generic;

namespace ListTestProgram
{
generic <typename E> ref class LinkList
{
private:
    LinkNode<E>^ head;  // pointer to list header
    LinkNode<E>^ tail;  // pointer to last element
    LinkNode<E>^ curr;  //access to current element
    int cnt;        // size of list
    static int defaultSize = 100;

    void init()     // Initializer
    {
        curr = tail = head = gcnew LinkNode<E>();
        cnt = 0;
    }

    void removal()                  // Return link nodes to free store
    {
        while (head != nullptr)
        {
            curr = head;
            head = head->next;
            delete curr;
        }
    }

public:
    LinkList<E>(){}
    LinkList<E>(int size=defaultSize) {init(); }        // Constructor
    ~LinkList() { removal(); }                      // Destructor
    void print();           // print list contents
    void clear() { removal(); init(); }     // Clear list

    // Insert "it" at current position
    void insert (E it)
    {
        curr->next = gcnew LinkNode<E>(it, curr->next);
        if(tail == curr) tail = curr->next;     // new tail
        cnt++;
    }

    void append(E it) 
    {
        tail = tail->next = gcnew LinkNode<E> (it, nullptr);
        cnt++;
    }

    // Remove and return  current element
    E remove()
    {
        assert(curr->next != nullptr, "No element");
        E it = curr->next->element;     // Remember value
        LinkNode<E>^ ltemp = curr->next;        // Rember link node
        if(tail == curr->next) tail = curr; // reset tail
        curr->next = curr->next->next;      // remove from list
        delete ltemp;
        cnt--;
        return it;
    }

    void moveToNext()   // Place curr to head of list
    {
        curr = head;
    }

    void moveToEnd()    // Place curr at end of list
    {
        curr = tail;
    }

    // Move curr one step left; no change if already at front
    void prev()
    {
        if (curr == head) return;
        LinkNode<E>^ temp = head;
        // March down the list until we find the previous element
        while (temp->next!=curr) temp= temp->next;
        curr = temp;
    }

    // Move curr one step right; no change if already at end
    void next()
    {
        if (curr != tail) curr = curr->next; 
    }

    // Return the position of the current element
    int currPos() 
    {
        LinkNode<E>^ temp = head;
        int i;
        for (i = 0; curr != temp; i++)
            temp = temp->next;
        return i;
    }

    // Move down list to "pos" position
    void moveToPos(int pos)
    {
        assert((pos>=0)&&(pos<=cnt), "Position out of range.");
        curr = head;
        for (int i=0; i<pos; i++) curr = curr->next;
    }

    E getValue() 
    {
        assert(curr->next != nullptr, "No value");
        return curr->next->element;
    }

};
} 
```

还有 FreeList 类，我想保存从链表中删除的节点，以便它们可以被重用，避免重复调用 delete 和 new。

```
// FreeList.h provides a stack of nodes from which new nodes from the LinkNode class can be
// derived.  This is to limit the number of calls to gcnew, to minimize proceccor time.  Items in the 
// FreeList stack are returned to LinkNode calls when a new node is called for.  

#pragma once 

#include "stdafx.h"
#include <iostream>
#include <deque>
#include <climits>
#include "LinkNode.h"

using namespace std;
using namespace System;
using namespace System::Collections;
using namespace System::Collections::Generic;

namespace ListTestProgram
{
generic <typename E> ref class FreeList
{
    /****   members   ****/
public: Stack^ freelist;

    /****   constructors / Destructors ****/
    FreeList() { freelist = gcnew Stack; } 

    ~FreeList(){}

    /****   methods   ****/

    // return an instance of LinkNode
    LinkNode<E>^ nextNode ()
    {
        if (freelist->Count != 0)
            return freelist->Pop();
        else
        {
            repopulateStack();
            nextNode(node);
        }
    }

    // repopulate an empty stack
    void repopulateStack()
    {
        for (int i = 0; i < 100; i++)
            freelist->Push(gcnew LinkNode<E>());
    }

    // add a deleted node to the freelist for later use
    void add(LinkNode<E>^ trash)
    {
        freelist->Push(trash);
    }
};
} 
```

我的一些错误是：

```
Error   13  error C2039: 'nextNode' : is not a member of 'ListTestProgram::FreeList<E>' c:\users\ed\documents\visual studio 2012\school_projects\cpp programs\cpp_advanced\testinglists\testinglists\LinkNode.h 43  1   TestingLists
Error   6   error C2061: syntax error : identifier 'LinkNode'   c:\users\ed\documents\visual studio 2012\school_projects\cpp programs\cpp_advanced\testinglists\testinglists\FreeList.h 52  1   TestingLists
Error   10  error C2065: 'trash' : undeclared identifier    c:\users\ed\documents\visual studio 2012\school_projects\cpp programs\cpp_advanced\testinglists\testinglists\FreeList.h 54  1   TestingLists
Error   3   error C2143: syntax error : missing ';' before '<'  c:\users\ed\documents\visual studio 2012\school_projects\cpp programs\cpp_advanced\testinglists\testinglists\FreeList.h 33  1   TestingLists
Error   1   error C2872: 'Stack' : ambiguous symbol c:\users\ed\documents\visual studio 2012\school_projects\cpp programs\cpp_advanced\testinglists\testinglists\FreeList.h 23  1   TestingLists
Error   6   error C2061: syntax error : identifier 'LinkNode'   c:\users\ed\documents\visual studio 2012\school_projects\cpp programs\cpp_advanced\testinglists\testinglists\FreeList.h 52  1   TestingLists 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:51:21.580

您的标头具有循环依赖关系：FreeList.h 依赖于 LinkNode.h，而 LinkNode.h 又依赖于 FreeList.h。头文件依赖必须形成一个有向无环图。

# html - 在 HTML5 画布上为两个对象之间的路径设置动画

> ID：14634549
> 
> 赞同：2
> 
> 时间：2013-01-31T20:29:59.223
> 
> 标签：html, canvas, impactjs

我们正在使用 Impactjs 开发一款游戏，允许在点击实体时“链接”实体。基本上这只是在两点之间画一条线，带有霓虹灯效果。到目前为止，一切都很好。现在，我们有一个请求让“链”连接动画化——火、火花等。基本上看起来它们需要实际的图形动画才能看起来正确的东西。由于实体之间可以有任何距离/角度，我们被困在如何最好地为此实现解决方案 - 即如何绘制对角线图像，例如，在我们可以动画的两个随机点之间。任何想法我们关于如何实现这一点的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:52:21.103

也许创建一个带有动画表的粒子实体，其中包含必要的动画/粒子效果。然后沿着从 A 点到 B 点的线绘制这些粒子。

当您想对其进行动画处理以触发/闪烁等时，请为所有这些实体运行动画。在那一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T12:36:02.383

我倾向于同意普拉特的观点。粒子效果很可能是您所需要的。这是一个在 Impact.js 中生成粒子效果的教程，可能会对您有所帮助。

[http://www.pointofimpactjs.com/snippets/view/24/particle-effects-generation](http://www.pointofimpactjs.com/snippets/view/24/particle-effects-generation)

# sql - PostgreSQL 中不稳定的索引查询性能

> ID：14634552
> 
> 赞同：7
> 
> 时间：2013-01-31T20:30:13.040
> 
> 标签：sql, performance, postgresql, indexing

需要有关 PostgreSQL 中查询性能的帮助。它似乎与索引有关。

这个查询：

*   筛选依据`type`
*   按`timestamp`，升序排列：

`SELECT * FROM the_table WHERE type = 'some_type' ORDER BY timestamp LIMIT 20`

索引：

```
 CREATE INDEX the_table_timestamp_index ON the_table(timestamp);

 CREATE INDEX the_table_type_index ON the_table(type); 
```

该`type`字段的值只是大约 11 个不同字符串中的一个。
问题是查询似乎在 O(log n) 时间内执行，大多数时候只需要几毫秒，除了一些`type`需要几分钟才能运行的值。

在这些示例查询中，第一个查询只需要几毫秒即可运行，而第二个查询则需要 30 多分钟：

```
SELECT * FROM the_table WHERE type = 'goq' ORDER BY timestamp LIMIT 20
SELECT * FROM the_table WHERE type = 'csp' ORDER BY timestamp LIMIT 20 
```

我怀疑，大约 90% 的确定性，我们拥有的索引不是正确的。我认为，在阅读[了关于索引性能的类似问题](https://stackoverflow.com/questions/6174565/why-does-the-following-postgres-sql-query-take-so-long)之后，我们最需要的是一个复合索引，over `type`and `timestamp`。

我运行的查询计划在这里：

1.  [预期性能，特定类型索引（即，`WHERE`子句](http://explain.depesz.com/s/i34)中 type = 'csq' 的新索引）。
2.  [最慢，有问题的情况，索引如上所述。](http://explain.depesz.com/s/pix)
3.  [快速案例，与上述相同的索引。](http://explain.depesz.com/s/qc6)

非常感谢您的帮助！任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:42:39.180

索引可用于`where`子句或`order by`子句。使用 index `thetable(type, timestamp)`，则可以对两者使用相同的索引。

我的猜测是 Postgres 正在根据它收集的统计数据来决定使用哪个索引。当它使用索引作为 where 然后尝试排序时，你会得到非常糟糕的性能。

这只是一个猜测，但值得创建上述索引以查看是否可以解决性能问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T21:03:20.830

解释输出都使用时间戳索引。这可能是因为类型列的基数太低，因此对该列的索引进行扫描与表扫描一样昂贵。

要创建的复合索引应该是：

```
create index comp_index on the_table ("timestamp", type) 
```

以该顺序。

# c - C使用getOpt解析多个参数

> ID：14634553
> 
> 赞同：-2
> 
> 时间：2013-01-31T20:30:16.137
> 
> 标签：c, parsing, getopt

我需要使用 getopt 来解析以下命令：

```
./center -n name –cp Anumber –i Anumber –t Anumber –s Anumber -fc nameOfaFile 
```

所有这些都可以按任何顺序发出。

所以很明显我必须使用getOpt。

所以我一直在调查，这就是我到目前为止所拥有的

```
 void check_parameters (int argc, char** argv) {
    int opt; 

    while((opt = getopt(argc, argv, "n:cp:i:c:fc:")) != -1) {
       printf("give me opt %c \n", opt)
       swicth(opt){
          case 'n' :
             //do something
          case 'cp' :
             //do something
          case 'i' :
            //do something
       }
    }
  } 
```

我确实知道一个事实，即 3 参数：OptString 是我告诉 getOpt 它应该期望的选项的字符是什么在 optarg 中也是参数所在的位置

它不工作！当我 printf("give me opt %c", opt) 它给我的是数字，而不是字符！

因此，它不起作用。它没有正确检查参数

编辑：执行 man 3 getopt 后，getopt 的返回值为：如果成功找到选项，则 getopt() 返回选项字符。如果所有命令行选项都已解析，则 getopt() 返回 -1。
它返回选项字符？它总是返回整数 1。总是！我不明白 getopt 是如何工作的。开关与字符相比如何？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T20:48:48.403

首先，这个：

```
case 'cp': 
```

...没有意义。不能用`char`or表示两个字符`int`。此外，如果使用 运行程序`-cp 101`，getopt 会将其视为`-c p 101`，以获得完全不同的结果。如果您想使用长选项，请改用`getopt_long`适当的调用语法，例如：`./a.out -n 42 --cp 101`.

现在，这是一个`getopt()`实际的工作示例：

```
#include <stdio.h>
#include <getopt.h>

int main(int argc, char* argv[]) {
  int opt;

  while((opt = getopt(argc, argv, "n:cp:i:c:fc:")) != -1) {
    switch (opt){
      case 'n':
        printf("n was %s\n", optarg);
        break;

      case 'i':
        printf("i was %s\n", optarg);
        break;
    }
  }
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T20:45:27.910

`getopt`仅处理单字符选项名称，而不是诸如`-cp`or之类的东西`-fc`（它将其解释为单个字符串中的多个选项标志：`-c -p`, `-f -c`）。如果您想坚持您定义的语法，那么只需滚动您自己的语法会更容易：

```
// first check whether argc is odd, then:
for (i = 1; i < argc; i += 2) {
    if (strcmp(argv[i], "n") == 0) {
        name = argv[i+1];
    } else if (strcmp(argv[i], "cp") == 0) {
        // etc. etc.
    }
} 
```

# javascript - chrome.tabs.create 无法正常工作？

> ID：14634554
> 
> 赞同：1
> 
> 时间：2013-01-31T20:30:18.753
> 
> 标签：javascript, html, google-chrome, manifest

在清单中：

```
{
"manifest_version": 2,
"version": "0.1",
"name": "test",
"description": "test",
"content_scripts": [
{
    "matches": ["http://www.roblox.com/*", "https://www.roblox.com/*"],
    "js": ["jquery.js", "ecyInject.js"]
},
{
    "matches": ["http://www.roblox.com/Economy"],
    "js": ["jquery.js", "ecyPage.js"]
}
],

"permissions": [
    "notifications", "tabs", "http://www.roblox.com/"
],

"background": {
    "page": "main.html"
}
} 
```

然后这是“main.html”

```
<html>
<head>
    <script src="jquery.js"></script>
    <script src="Services.js"></script>
    <script>
        chrome.tabs.create({url:("http://www.google.com/")});
    </script>
</head>

<body>

</body>
</html> 
```

为什么它没有打开 www.google.com 的主页？扩展的其余部分有效，但它只是“chrome.tabs.create”部分不起作用。我的扩展确实有标签权限，我看不出有什么问题。

**编辑**

“拒绝执行内联脚本，因为它违反了以下内容安全策略指令：“script-src 'self' chrome-extension-resource:”。”

我刚刚看到那个错误，无论如何要防止它？^^^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:47:55.737

不允许 Chrome 扩展程序抓取不在扩展程序内或列为资源的脚本（正如错误所说的有点令人困惑）。您可以定义 CSP（内容安全策略）来更改此行为。默认值如下所示：

"content_security_policy": "script-src 'self' chrome-extension-resource: ; object-src 'self'",

你可能想要这样的东西：

"content_security_policy": "script-src 'self' chrome-extension-resource: [http://www.google.com](http://www.google.com) ; object-src 'self'",

将该行粘贴到您的 manifest.json 中:-)

更多示例可以在[这里找到](http://developer.chrome.com/extensions/contentSecurityPolicy.html%20here)

# entity-framework - Entity Framework DbSet - 编译时未知数据库的列名

> ID：14634560
> 
> 赞同：5
> 
> 时间：2013-01-31T20:30:50.043
> 
> 标签：entity-framework, dbcontext

因此，我遇到了需要将实体框架（DbContext）与在编译时不知道列的数据库一起使用的情况。基本上我没有将customTable 类硬编码到DbSet 中的奢侈。

为了解决这个问题，我唯一能想到的就是使用 Reflection.Emit 在运行时根据我通过查询数据库收集的信息创建一个 customTable 类。

我无法找到解决此问题的任何信息，但我对使用实体框架非常陌生，因此对于更有经验的人来说，解决方案可能会更明显。

我觉得应该有比使用 Reflection.Emit 动态创建一个类来提供 DbSet 更清洁的方法。

如果我对实体框架的预期用途有很大的帮助，那么该信息也会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T14:46:40.663

嗨，我也在调查这个问题，我已经找到了解决方案。

[http://romiller.com/2012/03/26/dynamically-building-a-model-with-code-first/](http://romiller.com/2012/03/26/dynamically-building-a-model-with-code-first/)

告诉您如何创建一个 DbContext，您可以使用类型作为参数向其中添加一个新的 DbSet。您可以使用动态 Linq 库创建此类型：

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

它有一个名为 CreateClass 的方法，它允许您从字段名称列表动态构建 POCO 类定义并加载它，然后您可以使用您创建的新类型创建 DbSet。

然后，您可以使用从更新的 DbContext 中获取非泛型 DbSet

```
db.Set(type) 
```

其中 'type' 是一个保存新类型的变量。这可以使用动态 linq 库中的 linq 谓词来解决。

顺便说一句，我的应用程序适用于 CMS，其中新模块可以将字段添加到 CMS 的核心数据表中，我不想使用 DI，因为它太不灵活了，因为没有给定的模块能够提供包含所有它需要的字段和所有其他未知模块可能也需要。

詹姆士

# bash - nohup 和 enter 将停止该过程：为什么？

> ID：14634563
> 
> 赞同：4
> 
> 时间：2013-01-31T20:31:04.030
> 
> 标签：bash, process, terminal, nohup

我的脚本需要 root 权限，我想在远程计算机上运行它，然后能够关闭我的本地计算机。

所以我做了： $ nohup sudo ./myScript arg1 &

...我总是这样做，但是在我总是 root 的另一台机器上，所以没有`sudo`. 由于某种原因，现在它不起作用：

```
nohup sudo ./myScript.sh 1 &  //then I press enter twice
[8] 24264
me@my-laptop:~/myFolder$ nohup: ignoring input and appending output to `nohup.out'

[8]+  Stopped                 nohup sudo ./myScript.sh 1 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:39:40.517

尝试这个：

```
sudo nohup ./script 
```

回答密码提示后，键入`Ctrl-z`以将其挂起，并将`bg`其置于后台。

如果您在决定需要在后台运行一个长进程时正在运行一个长进程，这将特别有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:40:28.490

这里的一种选择是使用*屏幕*实用程序。启动屏幕，运行脚本，使用 CTRL+A、D 分离。稍后，重新登录，通过再次运行屏幕重新连接到进程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-29T15:26:16.543

正如其他答案中提到的，如果一个后台进程开始`nohup`尝试读取或写入终端，它将进入“停止”状态。您正在执行的`sudo`进程试图从终端读取您的密码，因此该进程被停止（由于某种原因，读取似乎是在按下 Enter 时触发的）。

因此，为避免这种情况，您需要确保在`nohup`执行之前输入密码并成为 root。例如，像这样：

```
sudo bash -c 'nohup ./myScript.sh arg1 &' 
```

# jquery - JQuery在嵌套tr中找到最近的父tr

> ID：14634564
> 
> 赞同：-2
> 
> 时间：2013-01-31T20:31:11.753
> 
> 标签：jquery, html, html-table, parent, closest

如何从最近的孩子 tr 中找到父 tr，例如从第二个孩子 tr，我怎样才能找到第一个父 tr？

以下是我一直在使用的两个表结构：

1)

```
 <table>
        <tr class="menu">
            <td><input type='text' class='parent' value='First Parent'></td>  
            <tr class="sub-menu">
                <td><input type='text' class='firstchild' value='First Child'>
                </td>

            </tr>
             <tr class="sub-menu">
                <td><input type='text' class='secondchild' value='Second Child'>
                </td>
            </tr>   
        </tr>
            <tr class="menu" >
            <td ><input type='text' class='parent' value='Second Parent'></td> 
            <tr class="sub-menu">
                <td><input type='text' class='firstchild' value='First Child'>
                </td>
                </tr>
            </tr>
    </table> 
```

2)

```
 <table>
    <tr class="menu">
        <td><input type='text' class='parent' value='First Parent'></td>  
</tr>
        <tr class="sub-menu">
            <td><input type='text' class='child' value='First Child'>
            </td>
      </tr>

         <tr class="sub-menu">
            <td><input type='text' class='child' value='Second Child'>
            </td>
        </tr>   
    <tr  class="menu">

        <td><input type='text' class='parent' value='Second Parent'></td>  </tr>
        <tr class="sub-menu">
            <td><input type='text' class='child' value='First Child'>
            </td>
            </tr>

</table> 
```

我尝试了以下 JQuery 代码：

```
$(this).closest('tr.submenu').closest('tr.menu').find('.parent').val();

$(this).closest('tr.submenu').parent('tr.menu').find('.parent').val();

$(this).closest('tr.menu').find('.parent').val();

$(this).closest('tr.submenu').prevUntil('tr.menu').find('.parent').val();

$(this).closest('tr.submenu').parentsUntil('tr.menu').find('.parent').val();

$(this).closest('tr.submenu').parents(':first-child').find('.parent').val(); 
```

所有的尝试都失败了。如何从最近的子菜单 tr 中获取父值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T20:51:51.713

首先，您的表结构不正确。

`<tr>`不定义子表就不能嵌套标签。

我已经修复了您的表结构，并提供了一些 jQuery 来完成我认为您正在尝试做的事情。为什么你在菜单中使用表格和输入是我无法理解的。

**HTML：**

```
<table>
     <tr class="menu">
         <td><input type='text' class='parent' value='First Parent' /></td>
     </tr>
     <tr class="sub-menu">
         <td><input type='text' class='firstchild' value='First Child' /></td>
     </tr>
     <tr class="sub-menu">
         <td><input type='text' class='secondchild' value='Second Child' /></td>  
     </tr>
     <tr class="menu" >
         <td ><input type='text' class='parent' value='Second Parent' /></td>
     </tr>
     <tr class="sub-menu">
         <td><input type='text' class='firstchild' value='First Child' /></td>
     </tr>
</table> 
```

**CSS**（视觉效果）：

```
table td { padding: 10px; } 
```

**jQuery：**

```
$('.firstchild').click(function() {
    var $this = $(this);

    $this.parents('tr').prev().css("background-color", "yellow");

}); 
```

你可以在这里查看结果：http: [//jsfiddle.net/357tE/](http://jsfiddle.net/357tE/)

单击“第一个孩子”输入，它将突出显示该孩子之前的“第一个父母”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T10:29:24.077

找到了解决方案：

```
$('.child').click(function() {
    var $this = $(this);

    $this.parents('tr').prevAll("tr.menu:first").css("background-color", "yellow");

}); 
```

# arrays - 如何将项目添加到 VB6 二维数组

> ID：14634565
> 
> 赞同：3
> 
> 时间：2013-01-31T20:31:14.400
> 
> 标签：arrays, multidimensional-array, vb6

我正在使用二维数组来存储用户的用户名和密码。`users`定义为全局字符串数组：

```
Dim users(9, 2) As String 
```

如何将用户添加到该数组？一次设置用户名和密码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T22:44:07.780

一旦您拥有`Dim`具有明确界限的数组用户，您就不能`ReDim`这样做。你可以试试这个，它不会编译（数组已经标注）

```
Dim users(9, 2) As String
ReDim Preserve users(10, 2) ' doesn't compile! 
```

您将遇到的另一个问题是尝试`ReDim Preserve`数组的第一个索引。你也可以试试，你会得到运行时错误（下标超出范围）

```
Dim users() As String
ReDim Preserve users(0, 1)
ReDim Preserve users(1, 1) ' runtime error! 
```

相反，我想出了以下内容。您需要保留第一个索引来区分`username`or `password`。这将是 1 号（不是 2 号）。随着您添加更多用户，第二个索引将增加：

```
Private Sub Form_Load()
    Dim users() As String
    ReDim users(1, 0)
    Add users, "name1", "pw1"
    Add users, "name2", "pw2"
End Sub

Private Sub Add(ByRef users() As String, username As String, password As String)
    If Not (users(0, 0) = vbNullString And users(1, 0) = vbNullString) Then
        ReDim Preserve users(1, UBound(users, 2) + 1)
    End If
    users(0, UBound(users, 2)) = username
    users(1, UBound(users, 2)) = password
End Sub 
```

如果您不能交换用户名和密码，您可能需要查看不同的数据结构，例如集合，或具有用户名和密码字段的自定义类的数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T15:04:44.143

创建包含所有字段的用户定义类型

```
Private Type UserData
  strName As String
  strPass As String
End Type 
```

然后创建该用户定义类型的数组

```
Dim udtUser() As UserData
ReDim udtUser(9) As UserData
With udtUser(9)
  .strName = "captain hook"
  .strPass = "parrotname"
End With 'udtUser(9) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T21:40:18.110

循环遍历用户并直接将值分配给数组：

```
Dim cntr As Integer
For cntr = 0 To UBound(cntr) - 1
    users(x, 0) = "username"
    users(x, 1) = "password"
Next cntr 
```

# html - 如何在 PyroCMS 中显示来自用户模块的图像？

> ID：14634568
> 
> 赞同：2
> 
> 时间：2013-01-31T20:31:23.197
> 
> 标签：html, content-management-system, pyrocms, pyro

我正在尝试使用以下代码获取存储在用户模块中的图像 URL：

```
{{ user:profile user_id="3" }}

{{ display_name }}

{{ company }}

{{ profile_picture }} 

{{ /user:profile }} 
```

`{{ profile_picture }}`是图像，所有在页面上显示为“数组”的内容。其他变量按照我的意愿出现，图像刚刚给我带来了问题。图像正确存储在文件模块中，我似乎无法让它出现在页面上。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:19:29.187

`profile_picture`是一个数组。`image`如果您想要图像 URL ，则必须访问 的子元素。

```
{{ user:profile user_id="3" }}
  {{ profile_picture:image }}
{{ /user:profile }} 
```

# java - JTextField 的子类，仅接受字母数字值和 . （点）

> ID：14634569
> 
> 赞同：1
> 
> 时间：2013-01-31T20:31:22.743
> 
> 标签：java, swing, validation, jtextfield, alphanumeric

> **可能重复：**
> [jTextField 只接受字母和空格](https://stackoverflow.com/questions/14058505/jtextfield-accept-only-alphabet-and-white-space)

哎！我有一个自定义`JTextField`（扩展自`JTextField`），这`CustomJTextField`主要有`JtextField`西班牙语中的方法，如`setFont`重命名为`SetFuente`，

在这个自定义`JTextField`中，我需要创建一个方法来验证可以写入的唯一值是字母数字和 (.) 点，所以如果我写 (,) 或 (*) 符号不会出现`JTextField`在`CustomJTextField.setFormat(ALPHA)`.

我没有找到可以帮助我解决这个问题的 Swing 库，我们会收到任何建议

谢谢！

# entity-framework - 本地化查询

> ID：14634570
> 
> 赞同：1
> 
> 时间：2013-01-31T20:31:23.883
> 
> 标签：entity-framework, linq-to-entities

假设我有三个表类型，翻译和语言类型有一个列表

```
First
Second
Third 
```

翻译将在 2 种语言中具有该类型列表的值

```
Value1  german
Value1  french
Value2  german
Value2  french 
```

ETC...

目前，我正在使用一个存储过程，该过程接受从 Type 表中读取的语言，并在 Translation 表中存在翻译值时覆盖该值（如果不只是从 Type 表中返回值）......希望这是有道理的。

我现在使用的存储过程是这样的。

```
 CREATE PROCEDURE [dbo].[GetTypesLocalized]   
 -- Add the parameters for the stored procedure here   
 @languageId int 
AS  
BEGIN  
 -- SET NOCOUNT ON added to prevent extra result sets from  
 -- interfering with SELECT statements.  
 SET NOCOUNT ON;  

    -- Insert statements for procedure here  
 SELECT ISNULL(tr.Name, t.Name) AS Name,  
 FROM Type AS t  
  LEFT OUTER JOIN Translation AS tr ON  
   (tr.FK = t.Id AND tr.Type = 'type' AND tr.LanguageId = @languageId)  
END 
```

我将如何使用 linq 语法在 EF 中表示该查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:42:22.480

```
var query = from t in db.Type
            from tr in db.Translation
            where t.Id == tr.FK && tr.Type == "type" && tr.LanguageId == langId
            select tr.Name == null ? t.Name : tr.Name; 
```

# php - 如何将 Feed 项推广到首页？德鲁巴 7

> ID：14634573
> 
> 赞同：-1
> 
> 时间：2013-01-31T20:31:31.207
> 
> 标签：php, mysql, drupal

Drupal 7.x，我使用 Feeds 和 Feeds News 模块。我想将提要项目推广到首页（扩展内容）。我编辑了目标提要并选中了“提升到首页”选项。提要名称和“阅读更多”链接出现在首页，但只有链接，而不是提要内容本身。即使单击这些链接，这也会打开空的“查看”选项卡，而不是“查看项目”（提要内容本身在哪里）。如何将完整的提要内容放在首页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:38:18.613

您始终可以将要导入的内容类型选中“提升到首页”选项。

以管理员身份登录转到`admin/structure/types/manage/INSERT_CONTENT_TYPE_MACHINENAME_HERE`

然后单击提升到首页选项

那应该为你做......否则你需要弄乱你的预告片在首页上的显示方式。

# javascript - 在 ExtJS 中将嵌套表单数据保存回服务器

> ID：14634577
> 
> 赞同：3
> 
> 时间：2013-01-31T20:31:36.930
> 
> 标签：javascript, extjs, model, extjs4

我有一个模型，其中包含与另一个模型的关联。我可以使用字段上的映射属性将嵌套数据显示到表单中。例子：

```
Ext.define('Example.model.Request', {
    extend: 'Ext.data.Model',

    fields: [
        {
            name: 'id',
            type: Ext.data.Types.NUMBER,
            useNull: false
        }
        {
            name: 'plan_surveyor',
            mapping: 'plan.surveyor',
            type: Ext.data.Types.STRING
        }
    ],

    associations: [
               {type: 'hasOne', associationKey: 'plan', getterName:'getPlan', model: 'Specs.model.Plan'}
              ],

    proxy: {
            type: 'direct',
            api: {
                read: requestController.load,
                 update: requestController.update,
            },
            reader: {
                type: 'json',
                root: 'records'
            },
            writer: {
                type: 'json',
                writeAllFields: true,
                nameProperty: 'mapping'
            }
        }

    }); 
```

使用这种方法，我可以通过参考plan_surveyor在表格中显示plan.surveyor的值。我调用 Form.loadRecord(model) 将数据从模型中提取到表单中。

但是，现在我正在尝试将数据发送回服务器，我收到错误消息：

`Error performing action. Please report the following: "Unrecognized field "plan.surveyor"`

我试图通过首先调用 Form.updateRecord(model)，然后调用 model.save() 来保存到服务器。有没有办法让 Writer 明白 'plan.surveyor' 不是属性名称，而是正确处理嵌套？

我这样做是正确的开始方式，还是应该只是处理表单数据的设置并以更手动的方式加载回模型？嵌套数据似乎并没有得到很好的支持——有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:39:35.597

```
 Ext.define('Example.model.Request', {
        extend: 'Ext.data.Model',

        fields: [
            {
                name: 'id',
                type: Ext.data.Types.NUMBER,
                useNull: false
            }
            {
                name: 'plan_surveyor',
                mapping: 'plan.surveyor',//change to 'plan_surveyor'
                type: Ext.data.Types.STRING
            }
        ], 
```

更改评论中显示的内容，因为数据索引以上述格式给出，因为你给你的格式不是数据索引，它是一个列或 extjs 准备，所以请更改它可能会很好用

这行不通，你将发送漏洞代码

# javascript - 如果容器 div 的字符较少，则隐藏 div

> ID：14634583
> 
> 赞同：1
> 
> 时间：2013-01-31T20:31:49.427
> 
> 标签：javascript, jquery

我这样做是为了开发更多内容。如果开头的字符`#pdpTab4` 数不足，我如何隐藏更多内容 。`540`

```
<script>
    $(function(){
        var myDiv = $('#pdpTab4');
        myDiv.html(myDiv.html().substring(0,540));
        $('#pdpTab4').append('<div id="readOne">Read More></div>');
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:42:59.330

```
 $(function(){
if ($('#pdpTab4').html().toString().length > 540) {
$('#pdpTab4').append('<div id="readOne">Read More></div>');
}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:45:56.130

有点不同但很好的方法：

```
$('#readOne').toggle($('#pdpTab4').text().length > 540); 
```

演示：http: [//jsfiddle.net/rniestroj/uF4BB/](http://jsfiddle.net/rniestroj/uF4BB/)

# javascript - 将主对象的引用传递给另一个对象

> ID：14634584
> 
> 赞同：0
> 
> 时间：2013-01-31T20:31:50.263
> 
> 标签：javascript

我创建了我正在处理的一些代码的简化版本。我需要弄清楚如何将实例化对象的引用传递给由该对象创建的另一个对象。我无法获取对要传递给第二个对象的主对象“self”的引用，并且实际上无法在其上调用函数。希望代码能让它更清楚：

```
var app = app || {};
(function (m, $, undefined) {

    m.Counter = function () {
        var self = this;
        var pub = {};

        pub.total = 0;

        pub.add = function () {
            pub.total++;
        };

        pub.subtract = function () {
            pub.total--;
        };

        pub.status = function () {
            console.log(pub.total);
        };

        pub.spawn = function () {
            var sp = new app.modules.Obj(self);
            return sp;
        };

        return pub;
    };

    m.Obj = function (counter) {
        var pub = {};

        pub.add = function () {
            counter.add();
        };

        return pub;
    };

}(app.modules = app.modules || {}));

var c = new app.modules.Counter();

c.add();
c.add();
c.add();
c.status();

d = c.spawn();
d.add();
c.status(); 
```

我想要发生的是 d.add() 会增加 c 的总数。因此，第一个 c.status() 调用的输出为 3，第二个 c.status() 的输出为 4；

# mod-rewrite - 尽管将 QSA 添加到 mod_rewrite，$_GET 仍然返回空变量

> ID：14634590
> 
> 赞同：0
> 
> 时间：2013-01-31T20:32:06.830
> 
> 标签：mod-rewrite, get

**2013 年 2 月 1 日更新：**这个问题确实让我无法完成一些工作，所以如果其他人有建议，将不胜感激。

我正在努力`domain.com/notalone/viewpost/5/`扮演`domain.com/notalone/viewpost.php?id=5`

我当前的 .htaccess 是这样的：

```
RewriteEngine On

RewriteRule ^notalone/viewpost/([0-9]+)/?$ /viewpost.php?id=$1 [QSA] 
```

目前，您访问时页面正常加载`/notalone/viewpost/5/`但未**通过`$_GET['id']`**

**我尝试过的事情**：

*   添加`Options -Multiviews`--->*导致404*
*   使用`Rewritebase /`--->*没有效果*
*   `RewriteRule ^viewpost/([0-9]+)/?$ /viewpost.php?id=$1 [QSA]`--->*没有效果*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:09:05.747

你说`viewpost.php`是在 notalone 文件夹中，但你 htaccess 假设它在根目录中。

所以我认为应该是：

```
Options -MultiViews
RewriteRule ^notalone/viewpost/([0-9]+)/?$ /notalone/viewpost.php?id=$1 [QSA] 
```

（请注意，我添加了多视图，因为这将是您的下一个问题。旧网址有效的事实是因为多视图。）

# css - 如何使用 Web::Scraper 从一张表中进行选择？

> ID：14634592
> 
> 赞同：1
> 
> 时间：2013-01-31T20:32:16.353
> 
> 标签：css, html, perl, css-selectors

我只想从网页中提取标题节点对象方法的文本。具体的HMTL部分如下：

```
<h2>Node Object Properties</h2>
<p>The &quot;DOM&quot; column indicates in which DOM Level the property was introduced.</p>

<table class="reference">
<tr>
<th width="23%" align="left">Property</th>
<th width="71%" align="left">Description</th>
<th style="text-align:center;">DOM</th>
</tr>
<tr>
    <td><a href="prop_node_attributes.asp">attributes</a></td>
    <td>Returns a collection of a node's attributes</td>
    <td style="text-align:center;">1</td>
</tr>

<tr>
    <td><a href="prop_node_baseuri.asp">baseURI</a></td>
    <td>Returns the absolute base URI of a node</td>
    <td style="text-align:center;">3</td>
</tr>
<tr>
    <td><a href="prop_node_childnodes.asp">childNodes</a></td>
    <td>Returns a NodeList of child nodes for a node</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_firstchild.asp">firstChild</a></td>
    <td>Returns the first child of a node</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_lastchild.asp">lastChild</a></td>
    <td>Returns the last child of a node</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_localname.asp">localName</a></td>
    <td>Returns the local part of the name of a node</td>
    <td style="text-align:center;">2</td>
</tr>
<tr>
    <td><a href="prop_node_namespaceuri.asp">namespaceURI</a></td>
    <td>Returns the namespace URI of a node</td>
    <td style="text-align:center;">2</td>
</tr>
<tr>
    <td><a href="prop_node_nextsibling.asp">nextSibling</a></td>
    <td>Returns the next node at the same node tree level</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_nodename.asp">nodeName</a></td>
    <td>Returns the name of a node, depending on its type</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_nodetype.asp">nodeType</a></td>
    <td>Returns the type of a node</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_nodevalue.asp">nodeValue</a></td>
    <td>Sets or returns the value of a node, depending on its 
    type</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_ownerdocument.asp">ownerDocument</a></td>
    <td>Returns the root element (document object) for a node</td>
    <td style="text-align:center;">2</td>
</tr>
<tr>
    <td><a href="prop_node_parentnode.asp">parentNode</a></td>
    <td>Returns the parent node of a node</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_prefix.asp">prefix</a></td>
    <td>Sets or returns the namespace prefix of a node</td>
    <td style="text-align:center;">2</td>
</tr>
<tr>
    <td><a href="prop_node_previoussibling.asp">previousSibling</a></td>
    <td>Returns the previous node at the same node tree level</td>
    <td style="text-align:center;">1</td>
</tr>
<tr>
    <td><a href="prop_node_textcontent.asp">textContent</a></td>
    <td>Sets or returns the textual content of a node and its 
    descendants</td>
    <td style="text-align:center;">3</td>
</tr>
</table>

<h2>Node Object Methods</h2>
<p>The &quot;DOM&quot; column indicates in which DOM Level the method was introduced.</p>
<table class="reference">
<tr>
<th width="33%" align="left">Method</th>
<th width="61%" align="left">Description</th>
<th style="text-align:center;">DOM</th>
</tr>
<tr>
    <td><a href="met_node_appendchild.asp">appendChild()</a></td>
    <td>Adds a new child node, to the specified node, as the last child node</td>
    <td style="text-align:center;">1 </td>
</tr>
<tr>
    <td><a href="met_node_clonenode.asp">cloneNode()</a></td>
    <td>Clones a node</td>
    <td style="text-align:center;">1 </td>
</tr>
<tr>
    <td><a href="met_node_comparedocumentposition.asp">compareDocumentPosition()</a></td>
    <td>Compares the document position of two nodes</td>
    <td style="text-align:center;">1 </td>
</tr>
<tr>
    <td>getFeature(<span class="parameter">feature</span>,<span class="parameter">version</span>)</td>
    <td>Returns a DOM object which implements the specialized APIs 
    of the specified feature and version</td>
    <td style="text-align:center;">3 </td>
</tr>
<tr>
    <td>getUserData(<span class="parameter">key</span>)</td>
    <td>Returns the object associated to a key on a this node. The 
    object must first have been set to this node by calling setUserData with the 
    same key</td>
    <td style="text-align:center;">3 </td>
</tr>
<tr>
    <td><a href="met_node_hasattributes.asp">hasAttributes()</a></td>
    <td>Returns true if a node has any attributes, otherwise it 
    returns false</td>
    <td style="text-align:center;">2 </td>
</tr>
<tr>
    <td><a href="met_node_haschildnodes.asp">hasChildNodes()</a></td>
    <td>Returns true if a node has any child nodes, otherwise it 
    returns false</td>
    <td style="text-align:center;">1 </td>
</tr>
<tr>
    <td><a href="met_node_insertbefore.asp">insertBefore()</a></td>
    <td>Inserts a new child node before a specified, existing, child node</td>
    <td style="text-align:center;">1 </td>
</tr>
</table> 
```

如果我在 Perl 中编写以下内容：

```
 my $data = scraper {
 process "table.reference > tr > td > a", 'renners[]' => 'TEXT';
}

for my $i (0 .. $#{$res2->{renners}}) {
  print $res2->{renners}[$i];
print "\n";
} 
```

我得到所有标签的文本，即：

```
attributes
baseURI
.
.
.
.
insertBefore() 
```

`<a>`当我只需要节点对象方法的标签文本时，即：

```
appendChild()
.
.
.
insertBefore() 
```

简而言之，我只想打印 NODE 对象方法。我应该在代码中修改什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-16T20:17:05.537

[Web::Scraper](http://www.metacpan.org/module/Web::Scraper)可以`nth_of_type`用来选择合适的表。有两个表具有相同的类，所以你可以说`table.reference:nth-of-type(2)`：

```
use v5.22;

use feature qw(postderef);
no warnings qw(experimental::postderef);

use Web::Scraper;

my $html = do { local $/; <DATA> };

my $methods = scraper {
    process "table.reference:nth-of-type(2) > tr > td > a", 'renners[]' => 'TEXT';
    };
my $res = $methods->scrape( $html );

say join "\n", $res->{renners}->@*; 
```

这是一个[Mojo::DOM](http://www.metacpan.org/module/Mojo::DOM)：

```
use Mojo::DOM;

my $html = do { local $/; <DATA> };

my $dom = Mojo::DOM->new( $html );

say $dom
    ->find( 'table.reference:nth-of-type(2) > tr > td > a' )
    ->map( 'text' )
    ->join( "\n" ); 
```

我尝试寻找可以识别 中的文本的选择器解决方案`h2`，但我的功夫在这里很弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-17T21:18:48.637

[Web::Query](https://metacpan.org/pod/Web::Query)提供了与brian d foy 提出的[Mojo::DOM解决方案几乎相同的解决方案。](https://metacpan.org/pod/Mojo::DOM)

```
use Web::Query;

my $html = do { local $/; <DATA> };

wq($html)
    ->find('table.reference:nth-of-type(2) > tr > td > a')
    ->each(sub {
        my ($i, $e) = @_;
        say $e->text();
    }); 
```

但是看起来 Mojo::DOM 是更健壮的库。为了使 Web::Query 与其选择器正确匹配，我必须编辑问题中提供的输入以添加围绕所有其他内容的根节点。

```
__DATA__
<html>
...
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-18T02:37:33.190

您可以使用 XPath 从标题之后的下一个表中提取数据`Node Object Methods`，如下所示

```
use Web::Scraper;

my $html = do { local $/; <DATA> };

my $methods = scraper {
    process '//h2[.="Node Object Methods"]/following-sibling::table[1]//tr/td[1]', 
        'renners[]' => 'TEXT';
};  
my $res = $methods->scrape( $html );

say join "\n", @{ $res->{renners} }; 
```

输出将是

```
appendChild()
cloneNode()
compareDocumentPosition()
getFeature(feature,version)
getUserData(key)
hasAttributes()
hasChildNodes()
insertBefore() 
```

# c# - 如何在组合框中列出所有本地计算机用户配置文件？

> ID：14634593
> 
> 赞同：1
> 
> 时间：2013-01-31T20:32:30.790
> 
> 标签：c#

我需要枚举本地计算机上的所有用户配置文件并将它们列出在组合框中。任何特殊帐户都需要过滤掉。我只关心运行应用程序的计算机上的实际用户配置文件。我已经进行了一些搜索，但我没有在任何地方找到明确的答案。我确实找到了一些可能有效的代码，但 SelectQuery 和 ManagementObjectSearcher 在 VS 中显示错误，我不确定我需要做什么才能使这项工作。

```
using System.Management;

SelectQuery query = new SelectQuery("Win32_UserAccount");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(query);
foreach (ManagementObject envVar in searcher.Get())
{
     Console.WriteLine("Username : {0}", envVar["Name"]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:05:37.050

通过说“SelectQuery 和 ManagementObjectSearcher 显示错误”我猜你没有引用`System.Management`dll。
您应该在解决方案中右键单击**References**并添加**System.Management**。
然后，根据您的`using`陈述，错误应该会消失。

无论如何，包括错误下次会帮助大家帮助你:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-05T20:55:45.987

提到的代码很棒，但是当我在连接到 Active Directory 域的机器上尝试时，所有为该域返回的用户名。我能够稍微调整代码以仅返回在当前机器上实际拥有本地目录的用户。如果更好的 C# 开发人员可以重构代码以使其更清洁 - 请帮助！

```
var localDrives = Environment.GetLogicalDrives();
var localUsers = new List<string>();
var query = new SelectQuery("Win32_UserAccount") { Condition = "SIDType = 1 AND AccountType = 512" };
var searcher = new ManagementObjectSearcher(query);

foreach (ManagementObject envVar in searcher.Get())
{
    foreach (string drive in localDrives)
    {
        var dir = Path.Combine(String.Format("{0}Users", drive), envVar["name"].ToString());
        if (Directory.Exists(dir))
        {
            localUsers.Add(envVar["name"].ToString());
        }
    }
} 
```

一旦你有了 localUsers 变量，你就可以将它设置为我们选择的 ComboBox 控件的数据源。

# html - 将 h1 居中放在 div 中的图像上

> ID：14634595
> 
> 赞同：3
> 
> 时间：2013-01-31T20:32:38.703
> 
> 标签：html, css

如何在图像中正确居中（**垂直，水平**）？

```
<div class="category-info">
    <div class="image">
            <h1>Title</h1>
            <img src="image.jpg" />
        </div>
    </div> 
```

CSS

```
.category-info {
    text-align: center;
    height: 200px;
    width: 770px;
    overflow: auto;
    margin-bottom: 20px;
} 
```

图像宽度为 770 像素，高度为 200 像素。我不知道下一步该做什么。我尝试了几件事，但没有成功。

![测试图像](../Images/1a7954d98796a15df60835a4bacf946e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T20:37:36.060

给你：http: [//jsfiddle.net/QjLuP/4/](http://jsfiddle.net/QjLuP/4/)

CSS：

```
.image{
    position: relative;
    background: green; /* IE */
}
.image h1{
    z-index: 2;
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    font-size: 20px;
    width: 100%;
    height: 26px;
    padding: 0;
    margin: 0;
    margin-top: -13px; /* 1/2 height */
    text-align: center;
    background: red;
    background: rgba(170, 0, 0, 0.8); /* CSS3 */
}
.image img{
    z-index: 1;
    width: 100%;
    height: 100%;
    position: absolute;
    top:0;
    right:0;
    bottom:0;
    left:0;
    background:green
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:46:34.820

我在`.image`类上放置了一个相对位置，并在图像元素上设置了宽度和高度（这样它在加载时不会调整大小）。我将表格改回`h1`并添加了 200px 的行高。这是唯一的缺点，您仍然需要手动设置`h1`.

HTML：

```
<div class="category-info">
    <div class="image">
         <h1>Title</h1>
        <img src="http://placekitten.com/770/200" />
    </div>
</div> 
```

CSS：

```
.category-info {
    text-align: center;
    margin-bottom: 20px;
}

.image{
    position:relative;
}

.image img{
    width:770px;
    height:200px;
}

.image h1{
    position:absolute;
    width:100%;
    color:white;
    line-height:200px;
    margin:0;
} 
```

JSFiddle：http: [//jsfiddle.net/5wGwL/2/](http://jsfiddle.net/5wGwL/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:33:21.653

你试过这个吗？

```
h1 { text-align:center; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T20:39:51.480

html

```
<h1 style="background-image:url(your php source.img)">Title</h1> 
```

CSS：

```
h1 {
    height: 200px;
    width: 770px;
    margin-bottom: 20px;
    text-align:center;
    vertical-align:middle;
    line-height:200px;
    background:transparent no-repeat scroll 50% 50%;
   } 
```

没有别的了

# google-app-engine - Appengine 错误忽略文件太长

> ID：14634596
> 
> 赞同：0
> 
> 时间：2013-01-31T20:32:47.903
> 
> 标签：google-app-engine, upload, python-2.7, webapp2

我是 appengine 的新手，我正在尝试部署我的项目，但出现错误：

错误 appcfg.py:2189 忽略文件“odm2.txt”：太长（最大 32000000 字节，文件为 56182913 字节）

可以不拆分上传此文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:58:47.257

但是您可以将其上传到[Google Cloud Storage](https://cloud.google.com/products/cloud-storage)，然后使用[BlobReader](https://developers.google.com/appengine/docs/python/blobstore/blobreaderclass) API 或[Files API](https://developers.google.com/appengine/docs/python/googlestorage/functions?hl=en)从您的应用程序中访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:20:18.253

[根据谷歌](https://developers.google.com/appengine/docs/python/tools/uploadinganapp)：

> 要上传的文件的最大大小，以字节数表示。大于此大小的文件将不会上传。默认值为 10485760。服务器当前强制最大文件大小为 10,485,760 字节，因此增加此值不会有任何影响。

有趣的是，如果该页面告诉您当前最大为 32000000 字节，则该页面必须已过时。但是，似乎没有任何方法可以解决这个问题。

odm2.txt 是一个什么样的文件？它是您要存储在数据存储中的东西吗？

根据您需要对它执行的操作，[您可以将其上传到](https://developers.google.com/appengine/docs/python/blobstore/overview#Uploading_a_Blob)应用程序本身内的 blobstore 。

# mysql - Mysql - 计算逗号分隔字段中的值

> ID：14634597
> 
> 赞同：16
> 
> 时间：2013-01-31T20:32:49.183
> 
> 标签：mysql, count

我必须从只读数据库中做一些静态数据，其中值以奇怪的形式存储

示例：我有 2 行，例如

```
ID    text field 
1     1001,1003,1004 
2     1003, 1005 
```

我需要能够算出这是“5”。

我没有写权限，所以不知道如何在不创建函数或类似的东西的情况下立即读取和计数。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-31T20:36:31.443

SO上的聪明解决方案：[如何计算逗号分隔列表MySQL中的项目](https://stackoverflow.com/questions/7020001/how-to-count-items-in-comma-seperated-list-mysql)

```
LENGTH(textfield) - LENGTH(REPLACE(textfield, ',', '')) + 1 
```

**编辑**

是的，您可以将其选择为附加列：并使用@HamletHakobyan 的答案中的 CHAR_LENGTH 进行更正：

```
SELECT 
  ID, 
  textfield, 
  (CHAR_LENGTH(textfield) - CHAR_LENGTH(REPLACE(textfield, ',', '')) + 1) as total 
FROM table 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-31T20:35:51.853

```
SELECT SUM(LENGTH(textfield) - LENGTH(REPLACE(textfield, ',', '')) + 1)
  FROM tablename 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-31T21:18:06.537

所有答案都有一个小而重要的遗漏。只有当数据库字符集是`utf8`左右时，所有都将起作用，即符号`,`获得一个字节的地方。`LENGTH`函数返回数字**`bytes`**而不是 的事实**`chars`**。正确的答案是使用`CHAR_LENGTH`which 返回字符数。

```
SELECT
   SUM(CHAR_LENGTH(textfield) - CHAR_LENGTH(REPLACE(textfield, ',', '')) + 1) cnt
FROM yourTable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T20:36:20.070

你可以使用这样的东西：

```
select sum(total) TotalWords
from
(
  select length(`text field`) - length(replace(`text field`, ',', '')) + 1 total
  from yourtable
) x 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/4650e/5)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-22T18:15:14.833

一切都是错误的，对我不起作用。唯一有效的是这个波纹管

```
SELECT (length(`textfield`) - length(replace(`textfield`, ',', '')) + 1) as my
FROM yourtable; 
```

这是我的小提琴

[http://sqlfiddle.com/#!9/d5a8e1/10](http://sqlfiddle.com/#!9/d5a8e1/10)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-19T08:52:01.103

```
SELECT (LENGTH(column_name) - LENGTH(REPLACE(column_name, ',', '')) + 1) as value_count
  FROM table_name 
```

这里`LENGTH(column_name) - LENGTH(REPLACE(column_name, ',', ''))`给出了每列值中逗号的数量。并且 +1 与此值提供以逗号分隔的值的数量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-04T22:44:43.337

如果有人正在寻找解决方案，为空字段返回 0。

`IF(LENGTH(column_name) > 0, LENGTH(column_name) - LENGTH(REPLACE(column_name, ',', '')) + 1, 0)`

# spring - RestTemplate.postForObject 和服务器端@RequestBody

> ID：14634599
> 
> 赞同：0
> 
> 时间：2013-01-31T20:32:56.847
> 
> 标签：spring, rest

通过 RestTemplate.postForObject 发送的对象是否必须与服务器端的对象类型完全匹配？我已经为服务器编写了一个服务器端 API，它接受通过 RestTemplate 发送的特定对象的基类，并且我从服务器接收到 400 Bad Response。如果双方的对象类别相同，则可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:35:20.843

是的，必须匹配，因为 resttemplate 将您的对象转换为指定的表示形式（例如：转换为 XMl 或 JSON），并且在服务器端 @requestbody 解组为指定的对象，因此如果您使用基类，您的根元素会更改，从而无法解组。

希望这可以帮助。

# java - 如何在java中传递变量？

> ID：14634607
> 
> 赞同：0
> 
> 时间：2013-01-31T20:33:13.240
> 
> 标签：java, variables

考虑这段代码：

```
private static void colourRead(String s) throws IOException {
    FileReader readhandle = new FileReader("C:\\****\\****");
    BufferedReader br = new BufferedReader(readhandle);
    String line = null;
    while ((line = br.readLine()) != null) {
        ColourInput(); //there's an error here
    }

    br.close();
    readhandle.close();
}

private static void ColourInput(String s) {
    char letter;

    String fullWord;
    Scanner kb = new Scanner(System.in);

    System.out.print("Enter whatever: ");

    fullWord = kb.nextLine();
    System.out.println(fullWord);

    for (int i = 0; i < fullWord.length(); i++) {
        letter = fullWord.charAt(i);
        switch (Character.toUpperCase(letter)) {
        case 'A': {
            Blue();
        }
            break;
        }
    }
} 
```

我可以携带吗

```
line 
```

colourRead 方法中的变量，并以某种方式将其分配给

```
fullWord 
```

方法中的变量`ColourInput()`？

我正在尝试读取一个文本文件，并输出与每个字母相关的某些颜色。我不想在 colourRead 方法中创建新的 switch 语句，因为显然这是一种不好的编程习惯。

请问有什么帮助吗？

如果你仍然不确定我在问什么，我会重新编辑

编辑：问题是在调用 ColourInput(line) 方法后， Scanner 方法开始工作（原始代码）。我不想删除我的 Scanner 方法，我希望它“跳过”scanner 方法，并继续进入 for 循环和 switch 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:34:45.053

您没有将字符串传递给您的调用`ColourInput`

尝试

`ColourInput(line);`

还值得一提的是，您读取文件的代码不安全，您应该尝试读取文件，`IOException`在子句中捕获并关闭文件，如果您的代码在循环中的`finally`某处崩溃，您的文件可能保持打开状态`while`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:41:19.177

如果我理解正确，您希望能够使用该`ColourInput`方法的结果重复该方法的功能`ColourRead`。

```
 private static void colourRead() throws IOException
{
    FileReader readhandle = new FileReader("C:\\****\\****");
    BufferedReader br = new BufferedReader(readhandle);
    String line = null;
    while((line = br.readLine()) != null)
    {
      ColourText(line); //there's an error here
    }

    br.close();
    readhandle.close();
}

private static void ColourInput() 
{

  String fullWord;
  Scanner kb = new Scanner(System.in);

  System.out.print("Enter whatever: ");

  fullWord = kb.nextLine();
  System.out.println(fullWord);
  ColourText(fullWord);
}

private static void ColourText(String text)
{

    char letter;
    for (int i = 0; i < text.length(); i++)
    {
      letter = text.charAt(i);
      switch(Character.toUpperCase(letter))
      {
          case 'A':
          {
             Blue();
          }
          break;
      }
} 
```

无论是从文件中读取文本还是从键盘输入（使用`ColourText`更改颜色的方法），这都可以让您为文本着色。但是正如其他人所提到的，您也应该添加到文件读取代码中。

`String s`编辑：您还可以从前两种方法中删除变量，因为它们没有在任何地方的方法中使用。

# html - 语义 HTML5：页脚标记位置

> ID：14634611
> 
> 赞同：0
> 
> 时间：2013-01-31T20:33:29.317
> 
> 标签：html, semantics

我得到了类似的东西：

```
<div>
    <header>
        //My content
    </header>
    <nav>
        //My nav
    </nav>

    <footer>
        //My footer content
    </footer>
</div> 
```

*将我的页脚*标签移到*div id="page"*之外在语义上是否正确，以便：

```
<div>
    <header>
        //My content
    </header>
    <nav>
        //My nav
    </nav>
</div>
<footer>
  //My footer content
</footer> 
```

我认为是的，但不是 100% 肯定。我接受建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:37:04.323

这实际上取决于您如何解释[页脚标签的定义](http://www.w3.org/TR/html-markup/footer.html)：

> 页脚通常包含有关其部分的信息，例如作者、相关文档的链接、版权数据等。

就个人而言，我会使用第一个示例。内容`<div>`作为文档的一部分。

# mysql - pentaho 与 mysql-5.X 的集成

> ID：14634612
> 
> 赞同：1
> 
> 时间：2013-01-31T20:33:28.800
> 
> 标签：mysql, pentaho

当我试图`hsqldb`用 mysql-5.XI 替换时，得到以下错误，石英错误无法初始化：-

```
Pentaho Initialization Exception 
```

检测到以下错误 一个或多个系统侦听器失败。这些在 systemListeners.xml 中设置。

```
 PentahoSystem.ERROR_0014 - Error while trying to execute startup sequence for org.pentaho.platform.scheduler.QuartzSystemListener 
```

有关检测到的每个错误的更多详细信息，请参阅服务器控制台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:16:31.533

我也收到了错误信息

> PentahoSystem.ERROR_0014 - 尝试执行 org.pentaho.platform.scheduler.QuartzSystemListener 的启动序列时出错

尝试启动服务时。在搜索了几个不同的线程后，我找到了这个解决方案：

`quartz.properties`在（位于）中删除这些属性的注释部分（或从此处复制和粘贴，并根据需要进行修改`pentaho-solutions/system/quartz`）：

```
org.quartz.dataSource.quartz.driver = com.mysql.jdbc.Driver
org.quartz.dataSource.quartz.URL = jdbc:mysql://localhost:3306/quartz
org.quartz.dataSource.quartz.user = pentaho_user
org.quartz.dataSource.quartz.password = password
org.quartz.dataSource.quartz.maxConnections = 5
org.quartz.dataSource.quartz.validationQuery= select 1 
```

还要注释掉 JNDI Url：

```
#org.quartz.dataSource.myDS.jndiURL = Quartz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:48:12.830

您是否运行了设置石英数据库的石英脚本？它们在解决方案存储库中提供。

否则粘贴完整的日志，没有更多信息是不可能的。怀疑在某个地方您可能会遇到身份验证问题，或者您的类路径中没有 mysql 驱动程序。

有关如何执行此操作的明确指南，请点击此处：

[http://www.prashantraju.com/2010/12/pentaho-3-7-with-mysql-postgresql-oracle-and-sql-server/](http://www.prashantraju.com/2010/12/pentaho-3-7-with-mysql-postgresql-oracle-and-sql-server/)

# perl - 如何在perl中使用通配符递归复制？

> ID：14634615
> 
> 赞同：1
> 
> 时间：2013-01-31T20:33:35.320
> 
> 标签：perl, wildcard, file-copying

我修改了一些我写的脚本，现在只复制`.jpg`文件。

该脚本似乎有效。它将所有`.jpg`文件从一个文件夹复制到另一个文件夹，但该脚本旨在每隔`X`几秒钟不断循环。

如果我`.jpg`在启动脚本之后将新文件添加到要从中移动项目的文件夹中，它将不会复制新添加的文件。如果我停止并重新启动脚本，那么它将复制`.jpg`添加的新文件，但我希望脚本在将项目放入文件夹时复制它们，而不必停止并重新启动脚本。

在我添加`glob`尝试仅复制`.jp`g 文件的函数之前，脚本将复制文件夹中的任何内容，即使在脚本仍在运行时将其移动到文件夹中也是如此。

为什么会这样？任何帮助都是极好的。

这是我的代码：

```
use File::Copy;
use File::Find;
my @source = glob ("C:/sorce/*.jpg");
my $target   = q{C:/target};

while (1)
{ sleep (10);
find(
   sub {
     if (-f) {
        print "$File::Find::name -> $target";
        copy($File::Find::name, $target)
         or die(q{copy failed:} . $!);

    }
    },
@source
); 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:50:33.850

您的`@source`数组包含文件名列表。它应该包含一个开始搜索的文件夹列表。所以只需将其更改为：

```
my $source = "C:/source"; 
```

我把它改成了一个标量，因为它只有一个值。如果您想稍后添加更多目录，可以使用数组代替。另外，当然，为什么要混合 glob 和`File::Find`? 它没有什么意义，因为`File::Find`是递归的。

然后在想要的子例程中完成文件检查：

```
if (-f && /\.jpg$/i) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:47:27.237

如果您只 glob 一次列表，它将不会刷新其文件列表。我更喜欢使用[File::Find::Rule](http://search.cpan.org/~rclamp/File-Find-Rule/lib/File/Find/Rule.pm)，并且会在目录上的每次迭代中使用它来更新列表。

```
use File::Find::Rule;

my $source_dir = 'C:/source';
my $target_dir = 'C:/target';

while (1) {
    sleep 10;
    my @files = File::Find::Rule->file()
                                ->name( '*.jpg' )
                                ->in( $source_dir );

    for my $file (@files) {
        copy $file, $target
            or die "Copy failed on $file: $!";
    }
} 
```

# linux - 如果我们在完成命令之前关闭终端怎么办？

> ID：14634619
> 
> 赞同：2
> 
> 时间：2013-01-31T20:33:49.870
> 
> 标签：linux, terminal, command

让我解释得更好。如果我在 Linux 中运行一个命令并且在它完成之前你可以输入另一个命令我关闭终端会发生什么。它还会执行命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:37:04.073

通常，您必须期望关闭终端会挂断您的命令。**但不要害怕！Linux 也有解决方案！**

为确保您的命令完成，请先使用[nohup](http://www.linuxmanpages.com/man1/nohup.1.php)参数。只需将它放在您尝试做的任何事情之前：

```
nohup ./some_program
nohup ./do_a_thing -frx -file input_file.txt
nohup grep "something" giant_list_of_files/* > temp_file.txt 
```

该`nohup`命令代表“不挂断”，即使您关闭终端，它也会确保您执行的命令继续运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:38:34.387

这取决于流程和您的环境（作业控制外壳选项、VNC 等）。但通常情况下，不会。该进程将从操作系统获得“挂断”信号（消息），并在收到该信号后退出。

例如，该`nohup`命令安排进程忽略来自操作系统的挂断信号。有很多方法可以达到相同的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T20:39:06.290

我会说它会在会话关闭之前中止您的状态。

如果您想确保完成这项工作，您将需要使用 nohup 命令。

> [http://en.wikipedia.org/wiki/Nohup](http://en.wikipedia.org/wiki/Nohup)

阅读有关 nohups 和守护进程 (-d) 的信息...

一个好的链接是 [link] [nohup 和守护进程有什么区别？](https://stackoverflow.com/questions/958249/whats-the-difference-between-nohup-and-a-daemon)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T21:21:07.503

值得一看[screen](http://www.thegeekstuff.com/2010/07/screen-command-examples/)命令，Screen 命令提供了将长时间运行的进程（或程序或 shell 脚本）从会话中分离出来，然后再将其附加回来的能力。

# php - 使用 PHP 代码错误显示项目

> ID：14634621
> 
> 赞同：0
> 
> 时间：2013-01-31T20:33:59.367
> 
> 标签：php, html, css

我有以下问题：

我在我的网站中显示来自数据库的多个项目。它们看起来不错，订购了 2x2。

```
A  B
C  D
E  F 
```

但是，在第 4 行中，仅显示 1 个项目，然后下一个项目在下一行中。

您可以在[http://www.tahara.es/store查看测试](http://www.tahara.es/store)

我的代码如下所示：

```
while($info = $items->fetch(PDO::FETCH_ASSOC)) 
{

?> 
<div name='item' id='<?php echo $info['color_base1']; ?>' class='itemBox'>
    <div class='showItem'><a href='items_descr.php?itemId=<?php echo $info['id_item']; ?>'>
        <img class='itemImage' alt='' src='<?php echo "../images/".$info['imageMid']; ?>.jpg'>
        </img>
    </div>
    <br />
    <div class='indexItemText'>
        <span class='similarItemsText'>
            <a href='items_descr.php?itemId=<?php echo $info['id_item']; ?>'><?php echo $info['name']; ?></a>
             - $<?php echo $info['price']; ?> </span>
    </div>
</div>

<?php $row_count++;

if ($row_count % 2 == 0) 
    {
echo "<br />"; // close the row if we're on an even record
    }

}               
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:05:04.380

这是一个 CSS 问题。您可以通过添加`clear:both`到`<span>`导致代码中换行的元素来解决它。

目前，您正在成对列出照片。`<span>`您使用空标签强制在每对之间换行，如下所示：

```
A    B
-- span --
C    D
.... 
```

然而，这个`<span>`标签并不适合所有的`<div>`s，因为`<div>`s 是浮动的。浮动的元素与不浮动的元素呈现在不同的位置。在这种特定情况下，您的所有`<span>`标签实际上都呈现在页面顶部附近：

```
-- span --
-- span --
A    B
C    D
... 
```

您可以通过向浮动元素添加CSS 属性来强制`<span>`s 尊重浮动元素的位置：`clear`

```
span {
display: block;
clear:both; /* this element will respect the location of anything that floats right or left */
} 
```

我还会考虑为这个特定的`<span>`. `<span>`是一个共同的元素，并导致所有这些都`clear:both`可能产生意想不到的后果。

# events - emberjs：如何在视图中触发自定义事件

> ID：14634622
> 
> 赞同：0
> 
> 时间：2013-01-31T20:34:02.073
> 
> 标签：events, view, ember.js, router, custom-events

我想把一个原始事件（点击）变成一个语义事件，比如“deleteTodo”，这里有描述[，](http://emberjs.com/guides/views/)但不是如何实现:(
我有以下代码：

```
App.TodoView = Em.View.extend({
    click: function(e) {
        this.trigger("deleteTodo");
    }
});

App.Router.map(function(match) {
    match('/').to('index');
});

App.IndexRoute = Ember.Route.extend({
    deleteTodo: function(e) {
        // this code is never executed :(
    }
}) ; 
```

执行“单击”后，我看到调用了 TodoView 单击函数，但没有调用 IndexRoute 中的 deleteTodo 函数。有什么建议在这里可能会出错吗？

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T20:40:18.457

您可以使用 this.get("controller").send("deleteTodo")。这将向控制器发送一条消息，如果控制器不处理 deleteTodo 它将冒泡到路由器并在那里处理。

```
click: function(e) {
    this.get('controller').send("deleteTodo");
} 
```

在您的路由器中，您还需要定义事件：

```
events: {
  doStuff: function(e) {
    alert("Do stuff") ;    
  }
} 
```

[http://jsfiddle.net/9Xasr/7/](http://jsfiddle.net/9Xasr/7/)

我通常会在控制器中删除记录。似乎把它放在路由器事件中并不理想。

# html - 将 HTML 页面转换为 iOS 视图

> ID：14634626
> 
> 赞同：2
> 
> 时间：2013-01-31T20:34:26.017
> 
> 标签：html, ios, objective-c

我想获取一个普通的 html 页面（来自 tf2 wiki 的页面）并将其转换为视图。例如，它应该将文本放入标签或将图像放入 UIImageView。是否有任何框架可以做类似的事情，或者我应该在网络服务器上转换网站以使应用程序在运行时更容易呈现？希望你明白，我想做什么。蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:56:13.817

根据您的情况可能有不同的方式，您可以将它们加载到 IOS 的 UIWebView 中，如果您不想显示 UIWebView，那么您可以从中获取 html 并根据需要使用它。或其他方式，您可以将 HTML 作为 json 数据传输到 IOS，然后通过 UIView、UILabel 或其他任何方式显示该数据。否则按照 Zakaria 的建议，您可以使用 PhoneGap。

**如果您不想使用 UIWebView，请使用示例代码**更新以发送请求并获取其内容****

 **```
 //your html page with url  
       NSURL *url = [NSURL URLWithString:@"www.google.com"];

        NSURLRequest *request=[NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:30.0f];

        NSOperationQueue *queue=[[NSOperationQueue alloc]init];
        [NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

            if ([data length]>0 && error==nil) {

                NSString *html=[[NSString alloc]initWithData:data encoding:NSUTF8StringEncoding];

                NSLog(@"this string contains all html page you have \n %@",html);
            }
   }
     ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:40:57.893

如果您的页面是静态页面，则使用 PhoneGap ：它将您的 HTML+JS+CSS 嵌入到 iOS 应用程序中，并将加载到 webview 中。

但是没有框架可以让您将 HTML 元素转换为原生元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:37:45.557

不确定我是否正确理解了这个问题，但 Cordova 允许您在 html/css/js 中开发 iOS 应用程序。检查他们的网站：[http ://cordova.apache.org/](http://cordova.apache.org/)**

# jquery - JQuery Sortable：鼠标移动时触发的 Over/Change 事件

> ID：14634628
> 
> 赞同：1
> 
> 时间：2013-01-31T20:34:29.337
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我试图在初始化可排序时绑定到 over 和 change 事件，但似乎每次我在拖动时移动鼠标时都会触发它们。

```
$( "#sortable1, #sortable2" ).sortable({
    change: function (event, ui) {
        console.log("change");   
      },
    over: function (event, ui) {
        console.log("over");   
      },
  connectWith: ".connectedSortable"
}).disableSelection(); 
```

在此示例中（[http://jsfiddle.net/brandonrose/7mdUN/1/](http://jsfiddle.net/brandonrose/7mdUN/1/)），每次拖动鼠标时，都会将“更改”和“结束”记录到控制台。

# http - 比较 http 后端对实时流量的响应

> ID：14634629
> 
> 赞同：0
> 
> 时间：2013-01-31T20:34:30.710
> 
> 标签：http, proxy, continuous-integration, staging

我想比较对生产中实时客户请求的响应与登台服务器。我唯一能想到的是一个最小的 node.js 应用程序做代理，但我会觉得使用现有的解决方案更舒服。

比较可以离线完成（如果请求和两个响应都记录在某处），但必须在实时流量上完成多路复用，因此 JMeter 不是解决方案。

期待您的回音 ：）

# r - R 聚合使用来自相同数据的子集给出不同的结构化结果

> ID：14634633
> 
> 赞同：2
> 
> 时间：2013-01-31T20:34:49.827
> 
> 标签：r, aggregate, boxplot, summary

我正在根据几年每小时数据的数据框（球）制作风速的昼夜循环。我想按季节绘制它们，所以我将需要的日期子集出来并像这样加入它们：

```
b8 = subset(ball, as.Date(date)>="2008-09-01 00:00:00, GMT" & as.Date(date)<= "2008-11-30 23:00:00, GMT"  )
b9  = subset(ball, as.Date(date)>="2009-09-01 00:00:00, GMT" & as.Date(date)<= "2009-11-30 23:00:00, GMT"  )
b10 = subset(ball,  as.Date(date)>="2010-09-01 00:00:00, GMT" & as.Date(date)<= "2010-11-30 23:00:00, GMT")
ballspr = rbind(b8,b9,b10) 
```

然后我使用这个得到一个昼夜循环：

```
sprwsdiurnal <- aggregate(ballspr["ws"], format(ballspr["date"],"%H"),summary, na.rm=T) 
```

在四分之三的季节中，这使对象具有以下结构：

```
 date                                               ws
1    00  0.200, 1.000, 1.600, 2.021, 2.500, 8.000, 5.000
2    01  0.100, 1.000, 1.600, 1.988, 2.500, 8.600, 1.000
3    02  0.100, 1.000, 1.700, 1.982, 2.600, 8.900, 1.000 
```

...到 24 小时...

```
23   22  0.100, 1.200, 1.800, 2.222, 2.950, 9.100, 1.000
24   23  0.100, 1.000, 1.600, 2.072, 2.700, 8.800, 1.000 
```

这就是我想要的，因为 boxplot 可以使用：

```
par(  mar = c(5, 5, 2, 2))
boxplot(sprwsdiurnal$ws, col="dodger blue",pch=16,font.lab=2,cex.lab=1.5,cex.axis=2,xlab="Hour",range=0, ylab=quote(Windspeed ~ "(" * m ~ s ^-1 * ")"),xaxt="n",main="Spring")
axis(1, at=seq(1,24, by=1),labels=seq(1,24, by=1),cex.axis=1.5, cex.lab=1.5, font.lab=2) 
```

麻烦的是一个赛季是这样出来的：

```
 date ws.Min. ws.1st Qu. ws.Median ws.Mean ws.3rd Qu. ws.Max. ws.NA's
1    00   0.000      1.300     2.100   2.539      3.200  10.500   2.000
2    01   0.100      1.275     2.100   2.499      3.200   9.800   2.000
3    02   0.200      1.200     2.000   2.514      3.400   9.000   2.000 
```

...到 24 小时...

```
23   22   0.100      1.200     1.950   2.582      3.325  11.900   2.000
24   23   0.100      1.300     2.000   2.585      3.400  11.200   2.000 
```

Boxplot 不适用于这种格式。我无法解释为什么会发生这种情况，因为每个季节的所有代码都是相同的，并且它们是从同一个数据帧中提取的子集。为什么一个出来的不一样？任何想法表示赞赏。

编辑：这是数据。我检查了这两个赛季，他们仍然给出了上面显示的两种不同的格式。

[https://www.dropbox.com/s/v5kss0bgjyhrtw1/ball.csv](https://www.dropbox.com/s/v5kss0bgjyhrtw1/ball.csv)

```
ball=read.csv("ball.csv", header=T)
ball$date = as.POSIXct(strptime(ball$date, format = "%Y-%m-%d %H:%M:%S", "GMT"))

win9  = subset(ball, as.Date(date)>="2009-06-01 00:00:00, GMT" & as.Date(date)<= "2009-08-31 23:00:00, GMT"  )
aut9  = subset(ball, as.Date(date)>="2009-03-01 00:00:00, GMT" & as.Date(date)<= "2009-05-31 23:00:00, GMT"  )
spr9  = subset(ball, as.Date(date)>="2009-09-01 00:00:00, GMT" & as.Date(date)<= "2009-11-30 23:00:00, GMT"  )
sum9  = subset(ball, as.Date(date)>="2008-12-01 00:00:00, GMT" & as.Date(date)<= "2009-02-28 23:00:00, GMT"  )

sprdiurnal <- aggregate(spr9["ws"], format(spr9["date"],"%H"),summary, na.rm=T)
par(  mar = c(5, 5, 4, 2))
 boxplot(sprdiurnal$ws, col=colours()[109],pch=16,cex.lab=1.5,cex.axis=1.5,xlab="Hour",range=0, ylab=quote(Wind ~ speed ~ "(" * m * "s" ^-1 * ")"),xaxt="n",main="")
axis(1, at=seq(1,24, by=1),labels=seq(1,24, by=1),cex.axis=1.5, cex.lab=1.5) 

windiurnal <- aggregate(win9["ws"], format(win9["date"],"%H"),summary, na.rm=T)
par(  mar = c(5, 5, 4, 2))
boxplot(windiurnal$ws, col=colours()[109],pch=16,cex.lab=1.5,cex.axis=1.5,xlab="Hour",range=0, ylab=quote(Wind ~ speed ~ "(" * m * "s" ^-1 * ")"),xaxt="n",main="")
axis(1, at=seq(1,24, by=1),labels=seq(1,24, by=1),cex.axis=1.5, cex.lab=1.5) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T20:37:28.367

据我所知，“问题”是`summary`您的`aggregate`函数中的结果“ `sprdiurnal`”导致 R 存储为的矩形数据集 a `matrix`，而对于您的其他子集，因为一些时间包括`NA`而其他时间不包括数据集不是矩形的，因此 R 将摘要存储为`list`.

我将使用“iris”数据集进行演示，但首先，我还将创建一个具有一个`NA`值的“iris_2”数据集。

```
iris_2 <- iris
iris_2$Sepal.Length[10] <- NA 
```

让我们比较一下聚合输出，在这些情况下，它只是第二列。您会看到没有缺失值的“iris”数据集返回一个矩形矩阵作为`data.frame`. 但是，由于我们只有一个`NA`值，“iris_2”数据集被存储为`list`，这是*您*为特定目的所需要的。

```
(irisagg <- aggregate(iris["Sepal.Length"], iris["Species"], summary))[[2]]
#      Min. 1st Qu. Median  Mean 3rd Qu. Max.
# [1,]  4.3   4.800    5.0 5.006     5.2  5.8
# [2,]  4.9   5.600    5.9 5.936     6.3  7.0
# [3,]  4.9   6.225    6.5 6.588     6.9  7.9
(iris_2agg <- aggregate(iris_2["Sepal.Length"], iris_2["Species"], summary))[[2]]
# $`0`
#     Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
#    4.300   4.800   5.000   5.008   5.200   5.800       1 
# 
# $`1`
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#   4.900   5.600   5.900   5.936   6.300   7.000 
# 
# $`2`
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#   4.900   6.225   6.500   6.588   6.900   7.900 
```

这是我们如何将其放回列表的方法。

```
irisagg$Summary <- unlist(apply(irisagg[[2]], 1, list), recursive = FALSE)
irisagg$Summary
# [[1]]
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#   4.300   4.800   5.000   5.006   5.200   5.800 
# 
# [[2]]
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#   4.900   5.600   5.900   5.936   6.300   7.000 
# 
# [[3]]
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#   4.900   6.225   6.500   6.588   6.900   7.900 
```

当然，更直接的方法是使用`simplify`参数 for`aggregate`和 do：

```
(iris_3agg <- aggregate(iris["Sepal.Length"], 
                        iris["Species"], summary, 
                        simplify = FALSE))[[2]]
# $`0`
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#   4.300   4.800   5.000   5.006   5.200   5.800 
# 
# $`1`
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#   4.900   5.600   5.900   5.936   6.300   7.000 
# 
# $`2`
#    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
#   4.900   6.225   6.500   6.588   6.900   7.900 
```

将其应用于您的示例，“sprdiurnal”是给您带来麻烦的子集。单独查看`sprdiurnal$ws`并验证它是一个矩阵。让我们将其转换为列表。

```
sprdiurnal$ws2 <- unlist(apply(sprdiurnal$ws, 1, list), recursive=FALSE) 
```

现在您可以`boxplot`像处理其他季节一样继续进行。

```
boxplot(sprdiurnal$ws2, e..t..c...) 
```

或者，`sprdiurnal`使用以下方法重新制作您的对象：

```
sprdiurnal <- aggregate(spr9["ws"], 
                        format(spr9["date"],"%H"), 
                        summary, na.rm = TRUE, 
                        simplify = FALSE) 
```

并像以前一样进行。

# php - 单入口点页面路由

> ID：14634635
> 
> 赞同：0
> 
> 时间：2013-01-31T20:34:56.923
> 
> 标签：php, .htaccess, routing, entry-point

我尝试制作一个单一的入口点站点。这是我在 index.php 中的路由

```
 $page = 2;
        $command = 3;
        $requestURI = explode("/", $_SERVER['REQUEST_URI']);

        if (!$requestURI[$page]) {include_once ('home.php');}
        else if (file_exists($requestURI[$page].".php")) {include_once ($requestURI[$page].".php");} 
        else {include_once ("404.php");} 
```

我的 .htaccess

```
Options +FollowSymLinks
IndexIgnore */*
# Turn on the RewriteEngine
RewriteEngine On
#  Rules
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

如果我去 domain.com/subfolder/gallery 它工作正常，包含 gallery.php，但如果我去 domain.com/subfolder/gallery/subfolder 我的 js 包含被搞砸了，它会在 *domain.com/subfolder/中查找它们画廊/js/*

而不是在他们正确的地方： *domain.com/subfolder/js/*

我像这样包括它们：

**html**

当然，所有的 css 和 img 文件也包含错误。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:43:09.727

使用绝对文件路径..

您的代码也容易受到本地文件包含的影响。

# c# - WPF 多线程

> ID：14634638
> 
> 赞同：1
> 
> 时间：2013-01-31T20:34:58.333
> 
> 标签：c#, wpf, asynchronous, task-parallel-library, task

我需要加载一个大文件并在数据网格中显示数据，但有些我无法异步加载文件。

**按钮代码：**

```
private async void MILoadLogFile_Click(object sender, RoutedEventArgs e) {
    ...
        await myLogSession.LoadfromFileAsync(oFD.FileName);
    }
} 
```

**和加载方法**

```
public async Task LoadfromFileAsync(String fileName) {

    StreamReader streamReader = new StreamReader(fileName);

    String line;
    try {
        using (streamReader) {
            while ((line = await streamReader.ReadLineAsync()) != null) {

                ...
            }
            ...
        }
        Console.Out.WriteLine("DOOOOOOOOOOOOONE");
    }
    } catch (Exception e) {
        Console.WriteLine("The file could not be read:");
        Console.WriteLine(e.Message);
    }
} 
```

}

这一个工作，但它根本不平滑，我不能移动窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:46:02.923

尝试改用这个：

```
private async void MILoadLogFile_Click(object sender, RoutedEventArgs e)
{
    //...
    await Task.Factory.StartNew(async () =>
    {
        await myLogSession.LoadfromFileAsync(oFD.FileName);
    });
} 
```

# c# - WCF 服务未写入事件日志

> ID：14634640
> 
> 赞同：1
> 
> 时间：2013-01-31T20:35:05.183
> 
> 标签：c#, wcf, event-log

下面是我用来初始化事件日志的代码，下面是我用来写入日志的示例代码行。

```
private string sSource = "DaVinci";
private string sLog = "WCF WebService";

//Initialize Event Log
if(!EventLog.SourceExists(sSource)) EventLog.CreateEventSource(sSource, sLog);

//Write openining message
EventLog.WriteEntry(sSource, "Opening WCF Service", EventLogEntryType.Warning); 
```

但是，该程序当前并未按照指示写入日志。没有任何类型的消息被写入。任何人都可以看到上面的代码有什么问题，或者提供任何关于在哪里寻找问题的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:39:20.190

是的，sLog 应该是您要在事件查看器中写入的日志类型。例如，`Application`将其写入 Windows 日志下的应用程序日志。

编辑：您可能没有创建事件源的权限。尝试将此键添加到您的注册表： `[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Application\YourSourceNameHere]`

此外，如果您不是以管理员身份运行应用程序，也请尝试这样做。

# javascript - 有人可以帮我制作以下动画吗

> ID：14634642
> 
> 赞同：1
> 
> 时间：2013-01-31T20:35:08.323
> 
> 标签：javascript, jquery, animation

基本上，想要这样的东西

```
TEXT_____________________[img]

'TEXT' is actual label for example `<div>LABEL</div>`

'_____________' is a `hr` element

'[img]' is a small image, for example a magnifying glass 
```

所需的动画是当用户点击 [img] 时，搜索输入框会变慢出现在图像左侧，例如点击后：

```
TEXT________ [search-box] [img] 
```

[img] 应该在同一个位置向右浮动，唯一的变化是`hr`虽然整个元素应该是相同的宽度，但它会缩小。

我有一些原型，但它有点笨拙和丑陋，有人可以提出一个好的解决方案吗？

编辑：http: [//jsfiddle.net/BTFEd/2/](http://jsfiddle.net/BTFEd/2/)

是的，就像那个小提琴一样，但是图像图标停留在最右边，而 hr 只是根据搜索框的可见性缩小或扩大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:08:16.300

使用[animate](http://api.jquery.com/animate/)，但隐藏`hr`之前：

```
$("#s-box").hide();
$("#search-icon").click( function(){
    $("#s-box").animate({ width: 'toggle'});
    $(".my-hr").animate({ width: 'toggle'});
}); 
```

# flash - Adobe Air - Flash - 初始窗口位置

> ID：14634644
> 
> 赞同：3
> 
> 时间：2013-01-31T20:35:11.193
> 
> 标签：flash, air, window-position

我正在设计一个带有 Adob​​e Flash CS6 的桌面应用程序，使用 air 3.2 for desktop（在 Flash 目标设置中）。在空中设置中，有一个高级选项卡，可以设置应用程序窗口位置的初始值。我不知道我应该如何将它设置到屏幕中间。

这是一个屏幕截图：

![在此处输入图像描述](../Images/7472ff3001f0c6cd42daa2ccf702bcc3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T06:27:35.760

不要使用这些属性，只需将代码添加到您的应用程序：

```
stage.nativeWindow.x = (Capabilities.screenResolutionX - this.width)*0.5;
stage.nativeWindow.y = (Capabilities.screenResolutionY - this.height)*0.5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T16:23:11.830

对于基于 HTML/JS 的 AIR 项目，您可以使用：

```
window.moveTo(Math.round((window.screen.availWidth - window.outerWidth) / 2), Math.round((window.screen.availHeight - window.outerHeight) / 2)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-19T06:20:11.237

```
var screenBounds:Rectangle = Screen.mainScreen.bounds;
stage.nativeWindow.x = (screenBounds.width - stage.nativeWindow.width) / 2;
stage.nativeWindow.y = (screenBounds.height - stage.nativeWindow.height) / 2; 
```

为我工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-28T17:55:06.880

如果您使用 FlashBuilder 或 WindowedApplication 的 MXML 文件，您可以在初始化处理程序中这样做。这使用从 nativeWindow 的边界读取的应用程序的初始尺寸（在 application.xml 文件中定义）。[MXML 文件内容]

```
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       xmlns:local="*"                     
                       initialize="windowedapplication1_initializeHandler(event)"
                       >
<fx:Script>
        <![CDATA[
            protected function windowedapplication1_initializeHandler(event:FlexEvent):void
            {
                var w:int = Capabilities.screenResolutionX;
                var h:int = Capabilities.screenResolutionY;
                nativeWindow.x = (w - nativeWindow.bounds.width)*0.5;
                nativeWindow.y = (h - nativeWindow.bounds.height)*0.5;
            }

]]>
</fx:Script>
</s:WindowedApplication> 
```

# c# - 复制项目

> ID：14634646
> 
> 赞同：1
> 
> 时间：2013-01-31T20:35:18.873
> 
> 标签：c#, project

我有一个项目，很多文件，很多工作等等。

事实证明，我可以做几个小时的工作，然后把它变成完全不同的东西；但对商店其他地方的调试项目很有用。

我想这样做，但要创建一个不同的应用程序；一种使用相同数量的现有（测试和工作）代码，但只是更改了一些按钮和显示等。

最好的方法是什么？使用操作系统来复制整个文件结构？然后破解这个东西？

我应该开始一个新项目并添加相同的类直到它被复制吗？

C# 是否有某种“导入和复制”功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:38:30.740

**OP和我决定在聊天中做什么：**

经过长时间的聊天讨论，这就是 OP 我决定为他的代码做的事情：

1.  通过单击在 Visual Studio 中创建一个新项目（在 OP 的情况下为 WinForms）和解决方案`File -> New Project`
2.  `Add -> Existing project`通过右键单击新解决方案并选择选项并添加原始项目 OP 所需的代码，将现有代码导入新项目
3.  通过单击`references`解决方案资源管理器中的新项目部分并选择`add reference`然后选择OP想要从中获取代码的项目，从新项目中引用现有项目
4.  添加`using OLD_PROJECT_NAMESPACE;`到新项目中的代码顶部以访问旧项目命名空间中的方法。

这提供了以下好处：

*   老项目不变
*   新项目共享旧项目的代码，如 OP 要求的

**代码共享场景的更一般的答案**

您可能需要考虑将原始程序制作成某种更合理的 API。鉴于您两次使用该功能，您可能会再次使用该功能。更好的做法是将您想要共享的类提取到不同的项目中，然后将其导入两次，一次在原始程序中，一次在新程序中。

如果你不能这样做，这就是我会做的：

你是一家软件商店，所以我假设你有某种形式的源代码控制。大多数源代码控制程序都有一些分支源代码的概念。

我会创建一个新文件夹，从存储库中提取源并将其分支到不同的分支。

你得到什么：

1.  您可以轻松地从主分支中提取错误修复，从而继续在项目之间共享代码
2.  您可以轻松地将错误修复推送回主分支

# ruby-on-rails - 使用 devise 后，link_to 链接在其他视图中不起作用

> ID：14634653
> 
> 赞同：1
> 
> 时间：2013-01-31T20:35:45.980
> 
> 标签：ruby-on-rails, devise, helpermethods

我正在开发一个使用 devise 的 rails 应用程序。

我在应用程序中添加了其他模型，这些新视图中的链接（默认“link_to”）不起作用。例如，我搭建了一个新模型，并且这些视图的链接不会更改 URL（地址栏中实际 url 中的硬编码可以正常工作并呈现正确的视图 - 这些操作甚至在添加、编辑、删除数据时也可以工作） .

我检查了我的 link_to 代码 - 它们设置正确。即使链接到像 google.com 这样的另一个网站也不起作用。将鼠标悬停在链接上时，屏幕左下方会显示正确的 url，但单击后不会更改地址栏 url。

有谁知道可能是什么原因造成的？它快把我逼疯了！任何帮助深表感谢！

编辑：添加一些代码来说明：

布局下导航部分的链接到示例：

```
<%= link_to 'Home', root_path %> 
```

路线.rb：

```
Example::Application.routes.draw do

resources :topics

resources :tutorials

resources :packages

get "/index" => "home#index", :as=>"index"

authenticated :user do
 root :to => 'home#index'
end

devise_scope :user do
 root :to => "home#index"
end

devise_for :users, :controllers => { :registrations => "registrations" }

resources :users do
 get 'invite', :on => :member
end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:22:29.330

感谢您的指导 sanny Sin - 支持您的评论。

问题在于pagescroller js - 如果current_page 是home#index，则必须在应用程序布局中添加一个if 语句才能使用js，否则不要使用该脚本。

# python - 正则表达式 (PYTHON)

> ID：14634656
> 
> 赞同：-3
> 
> 时间：2013-01-31T20:36:03.423
> 
> 标签：python, regex

我有一个 HTML 表单，我要求用户输入他/她的电子邮件地址。如果电子邮件是以下形式，我只能继续/提交表格：first.last@example.com

“第一个”和“最后一个”可以是任何东西，但必须有“。” 在中间，它必须以“@example.com”结尾。谁能告诉我我可以使用的正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:40:35.573

像这样的东西应该工作。

```
r'^([^@.]+)\.([^@.]+)@example\.com$' 
```

*   `^`匹配字符串的开头。
*   `$`匹配结尾。
*   通过编写`^...$`，您可以确保字符串看起来与您的正则表达式*完全*一样。之类的东西`foo.bar@example.comasdfg`不匹配。
*   `[^@.]+``@`匹配不是或的连续字符序列`.`。

非正则表达式解决方案将是这样的：

```
def validate_email(email):
    if not email.endswith('@example.com'):
        return False

    chunks = email.split('.')

    return len(chunks) == 3 and all(chunks) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:43:54.627

我会建议`^(.+?)\.(.+?)@example\.com$`。该部分意味着在第一部分`.+?`之前和之后必须有一些东西。`.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:47:26.507

我建议`r'^(\w*?)\.(\w*?)@example\.com$'`。这与 Blender 的答案相同，只是它将“first”和“last”的内容限制为“word”字符，包括大小写字母、数字和下划线 ( `_`)。如果您想允许更多字符，例如`-`，您可以通过替换`@`以下替代版本中的 来实现：

`r'^([\w@]*?)\.([\w@]*?)@example\.com$'`

例如，如果您想允许`-`and `&`，它将是：

`r'^([\w&\-]*?)\.([\w&\-]*?)@example\.com$'`

（前面的反斜杠`-`是因为`-`在字符类中具有特殊含义。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T20:41:03.093

您不需要正则表达式，您可以使用：

```
def email_validator(email):
    if not email.endswith('@example.com'):
        return False

    if not email[:-12].count('.') == 1:
        return False
    return True 
```

编辑：修复了来自@John Y、@manu-fatto 的建议

# vk - Vkontakte Like 按钮在 FireFox 中不显示

> ID：14634658
> 
> 赞同：0
> 
> 时间：2013-01-31T20:36:04.703
> 
> 标签：vk

我有一个问题，我有一个隐藏的工具栏，上面有社交按钮，VK.com like 按钮就是其中之一。

它拒绝在 FireFox 中显示自己。所有其他浏览器都可以正常工作，但是当栏拉下时，FF 中什么都没有。Vkontakte 是否具有像 Facebook 和 Google 那样的强制加载/渲染功能，您可以在其中以编程方式触发类似按钮的渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:34:55.163

这可能是因为您在 vkontakte 上使用 Firefox 缩放而不是 1:1 的方式启动了视频。这可能会导致视频播放器弹出窗口大小失真。这是一个要修复的婊子，因为重新安装 firefox 和 flash player 没有任何好处。

以不同的缩放率启动 vk.com 视频，最后是 1:1，似乎可以解决这个问题。

这可能与您的问题无关。

# string - Clojure：将字符串转换为哈希映射中的键值对

> ID：14634669
> 
> 赞同：1
> 
> 时间：2013-01-31T20:36:36.983
> 
> 标签：string, clojure, hashmap

我将从使用[speclj](http://speclj.com)框架的测试开始。

```
(it "turns the string into a hash-map"
  (should= {1 "1" 2 "2" 3 "3"}
    (format-string "1=1 2=2 3=3"))) 
```

然后我的代码：

```
(:use [clojure.string :only (split)])

(defn format-string [string]
  (split string #"\s+")) 
```

现在，`format-string`函数返回`["1=1" "2=2" "3=3"]`并且测试失败。正如您在我的测试中看到的那样，我希望它返回一个带有符号指示的键值对的哈希映射`=`。

我已经尝试了一些事情并且我已经接近了，但不太明白如何进行这种转变。

***编辑***

想出了一种解决方案，尽管键是字符串而不是整数。

我的代码：

```
(defn format-board [route]
  (let [[first second third] (split route #"\s+")]
    (merge 
      (apply hash-map (split-at-equals first))
      (apply hash-map (split-at-equals second))
      (apply hash-map (split-at-equals third)) 
```

这返回`{"1" "1" "2" "2" "3" "3"}`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:03:09.127

您已在空格处拆分，但随后您需要在分隔符处再次拆分`=`。您可以使用正则表达式进行解析。一旦你有了你的配对，你就可以`assoc`进入一个哈希映射。在这里，我习惯于`reduce`实现转换。

```
user=> (reduce #(assoc % (read-string (nth %2 1)) (nth %2 2)) {} 
   #_>   (re-seq #"([^=\s]+)=([^=\s]+)" "1=1 2=2 3=3") )
{3 "3", 2 "2", 1 "1"} 
```

注意键顺序不适用于哈希映射

```
user=> (= {1 "1", 2 "2", 3 "3"} *1)
true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T10:37:58.503

这是使用的潜在并行版本`clojure.core.reducers`：

```
(require '[clojure.core.reducers :as r])
(require '[clojure.string :as s])

(def string-of-pairs "1=1 2=2 3=3 4=4")

; reducing fn to convert seq of (key, value) to hash-map
(defn rf ([] {}) ([acc [k v]] (assoc acc k v)))

; for large colls, fold will parallelize execution
(r/fold merge rf (r/map #(s/split % #"=") (s/split string-of-pairs #"\s+"))) 
```

为了更好地理解 reducer，请观看[此视频](http://vimeo.com/45561411)，其中 Rich 解释了 reducer 背后的动机并演示了一些用法。

# mustache.php - 如何使用 PHP 加载我的 mustache 模板？

> ID：14634674
> 
> 赞同：0
> 
> 时间：2013-01-31T20:37:00.193
> 
> 标签：mustache.php

索引.php：

```
<!-- language: lang-php -->

require('v/Mustache/Autoloader.php');

Mustache_Autoloader::register();

$m = new Mustache_Engine(array(
    'loader' => new Mustache_Loader_FilesystemLoader(dirname(__FILE__) . '/v'),
));

// loads template from `v/sign_in.mustache` and renders it.
$m->render('sign_in', array('planet' => 'world'));

?> 
```

v/sign_in.mustache：

```
<h1>Where in the {{planet}} is Carmen San Diego?</h1> 
```

当我加载 index.php 时，我看到一个没有错误的大空白屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:41:26.993

```
echo $m->render('sign_in', array('planet' => 'world')); 
```

# java - 创建 API

> ID：14634677
> 
> 赞同：1
> 
> 时间：2013-01-31T20:37:07.930
> 
> 标签：java, api, jar

我正在从我们的网站 Java 代码创建一个 API 供我们的客户使用。我已将项目导出到 Eclipse 中的 JAR 文件。在一个单独的测试项目中，我能够从具有正确功能的 JAR 中调用某些方法。

当我启动一个引用 javax.servlet.http.HttpRequestServlet 的类的新对象 (TrackingAction) 时，我遇到了问题。我收到以下错误

```
The import javax.servlet.http.HttpServletRequest cannot be resolved
The import javax.servlet.http.HttpSession cannot be resolved
HttpSession cannot be resolved to a type
HttpSession cannot be resolved to a type 
```

这是我要开始工作的代码：

```
import com.myproject.api.data.ShipmentDetail;
import com.myproject.api.data.ShipmentSummary;
import com.myproject.api.service.ShipmentService;
import com.myproject.web.project.action.TrackingAction;

public class Main{
    public static void main(String[] args){
        ShipmentSummary shipSum = new ShipmentSummary();
        ShipmentDetail shipDet = new ShipmentDetail();

        TrackingAction trAction = new TrackingAction(); //ERROR COMES FROM THIS LINE

        ShipmentService shipServ = trAction.getShipmentService();

        List<ShipmentSummary> lss = shipServ.getShipmentSummaryByProNumber("101844564");
        List<ShipmentDetail> lsd = shipServ.getShipmentDetail(lss.get(0));

        shipDet = lsd.get(0);
        shipSum = lss.get(0);

        System.out.println("Summary status: " + shipSum.getStatus());
        System.out.println("Detail pickup: " + shipDet.getPickupNumber());
    }
} 
```

我找遍了所有地方，但找不到可行的解决方案。我试过使用 ClassLoaders 没有成功。我试过 OneJar，但它似乎不能正常工作（除非我做错了什么）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:58:46.460

您正在导入属于 Enterprise Java（Servlets 等）的类（从您的 API 类）/即使项目本身不是 SE，使用旨在执行 SE 的 main() 方法中的那些也是错误的。

Java SE 项目没有：

*   javax.servlet.http.HttpServletRequest
*   javax.servlet.http.HttpSession

httpsession、servlet 等可用的唯一方法是当您在带有 tomcat（或其他一些 servlet 容器）的 servlet 中运行此代码时。

重构你的类：

*   将核心 API 逻辑与 Java EE servlet 相关代码分开
*   重写你的 servlet 方法（例如 doGet() ）来引用和使用这个 API。
*   创建一个仅包含您的 API 逻辑的 JAR，您的 Java SE 应用程序和 Java Servlet 将引用该 JAR。

# ios - 如何强制 iPad 以横向加载？

> ID：14634682
> 
> 赞同：0
> 
> 时间：2013-01-31T20:37:20.750
> 
> 标签：ios, objective-c, uiview

我有一个支持 UIDeviceOrientationPortrait 和 UIDeviceOrientationLandscapeLeft 的 iPad 应用程序。

我确实包括了这个方法：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:        
      (UIInterfaceOrientation)interfaceOrientation
    {
        return (interfaceOrientation == UIInterfaceOrientationPortrait ||
        interfaceOrientation == UIInterfaceOrientationLandscapeLeft );
    } 
```

我遇到的问题是我需要它以 UIDeviceOrientationLandscapeLeft 模式加载，只是为了加载，因为我的 UI 控件将正确设置。我怎样才能在加载时只强制它一次。

我要注意的一件事是，这必须是最小的 iOS 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:38:08.093

即使这个答案不是你所期望的：

帮自己一个忙：强制设备进入特定方向确实很复杂。

你可以在这里搜索 SO，什么都有效，什么无效，在 6.1 中有效，在 6.01 中无效。等等。

所以最快和最安全的是，修复您的代码，使其可以在两个方向上正确初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T21:51:52.613

我最近遇到了类似的问题，但我想强制从横向更改为纵向，我知道在旧版本中有内置方法，但不幸的是，我们永远不确定何时以及什么对我们有用，但我尝试了这段代码它对我有用，但我的场景是强制从横向到纵向，这与您的场景相反，但无论如何它都有效，这可能是您场景的代码；

```
 -(NSUInteger)supportedInterfaceOrientations

{
    return UIInterfaceOrientationMaskLandscape;

}

-(void)viewWillAppear:(BOOL)animated {

    UIApplication* application = [UIApplication sharedApplication];

    if (application.statusBarOrientation != UIInterfaceOrientationLandscapeLeft)
    {
        UIViewController *c = [[UIViewController alloc]init];
        [self presentModalViewController:c animated:NO];
        [self dismissModalViewControllerAnimated:NO];
    }

    [super viewWillAppear:animated];
} 
```

**编辑**在 IOS 6.1 上工作我添加了两个我在上一篇文章中没有添加的方法，现在我添加了所有适用于我的应用程序的方法......

```
- (BOOL)shouldAutorotate
{

    return NO;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeLeft;
} 
```

这个想法是检查状态栏方向并添加和关闭一个modalViewController，它可以让我从一个方向强制到另一个方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:41:23.390

在项目设置或信息文件中更新。
在 iOS 6.x 中，您应该覆盖`supportedInterfaceOrientations`. 也试试`preferredInterfaceOrientationForPresentation`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T20:52:02.127

尽管有任何应用程序`Info.plist`设置或`-shouldAutorotateToInterfaceOrientation:`（或`-shouldAutorotate`）方法覆盖，视图控制器从纵向开始，然后由 iOS 旋转为横向。

是什么阻止了您的 UI 布局正确设置？

# android - 显示操作栏菜单按钮

> ID：14634685
> 
> 赞同：7
> 
> 时间：2013-01-31T20:37:34.340
> 
> 标签：android, menu

有没有办法在带有硬件菜单按钮的设备的操作栏中显示三点菜单？比如三星 Galaxy 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T21:38:43.820

看起来你的答案在下面的链接中。有一个解释为什么你不想这样做，另一个答案提供了一个无论如何都要做的黑客（在android 4.x设备上）。

[如何在带有菜单按钮的设备上强制使用溢出菜单](https://stackoverflow.com/questions/9286822/how-to-force-use-of-overflow-menu-on-devices-with-menu-button)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T20:43:04.183

[指南](http://developer.android.com/guide/topics/ui/actionbar.html)说：

> …</p>
> 
> 未提升为操作项的菜单项在溢出菜单中可用，由设备菜单按钮（如果可用）或操作栏中的“溢出菜单”按钮（当设备不包含菜单按钮时）显示）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T20:42:50.020

在我的应用程序中，我有嵌套菜单，例如：

```
//menu.xml
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/three_dots_item"
      android:icon="@drawable/ic_three_dots"
      android:title="@string/title"
      android:showAsAction="always">
      <menu>
        <!-- items to show -->
      </menu>
</item>

</menu> 
```

这不是真正的溢出，但它是一个简单的解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-09T05:53:51.100

这对我有用

采用

```
 <uses-sdk
    android:minSdkVersion="8"
    /> 
```

代替

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17"/> 
```

在清单 xml 中

# javascript - Google Maps v3 API - 当鼠标靠近边界框时如何平移地图

> ID：14634691
> 
> 赞同：1
> 
> 时间：2013-01-31T20:37:49.147
> 
> 标签：javascript, google-maps-api-3, mousemove, bounding-box, pan

我预计使用 panBy 但我不确定如何检测鼠标何时“靠近”边界框。甚至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T22:09:45.987

好的，这就是我最终做到的方式。

```
google.maps.event.addListener(map, 'mousemove', function(event) {

        ///
        var overlay = new google.maps.OverlayView();
        overlay.draw = function() {};
        overlay.setMap(map);

        ///
        var point = map.getCenter();
        var projection = overlay.getProjection();
        var pixelpoint = projection.fromLatLngToDivPixel(point);

        ///
        var thelatlng = event.latLng;
        var proj = overlay.getProjection();
        var thepix = proj.fromLatLngToDivPixel(thelatlng);
        var mapBounds = map.getBounds();
        var mB_NE = mapBounds.getNorthEast();
        var mB_SW = mapBounds.getSouthWest();

        var nE = proj.fromLatLngToDivPixel(mB_NE);
        var sW = proj.fromLatLngToDivPixel(mB_SW);

        var north = nE.y;
        var east = nE.x;
        var south = sW.y;
        var west = sW.x;

        var appx_north, appx_east, appx_south, appx_west = false;
        if (Math.round(thepix.y) <= Math.round(north+20)) {appx_north = true;}
        if (Math.round(thepix.x) >= Math.round(east-20)) {appx_east = true;}
        if (Math.round(thepix.y) >= Math.round(south-20)) {appx_south = true;}
        if (Math.round(thepix.x) <= Math.round(west+20)) {appx_west = true;}

        if (appx_north) {
            pixelpoint.y -= 5;
            point = projection.fromDivPixelToLatLng(pixelpoint);
            map.setCenter(point);
        }
        if (appx_east) {
            pixelpoint.x += 5;
            point = projection.fromDivPixelToLatLng(pixelpoint);
            map.setCenter(point);
        }
        if (appx_south) {
            pixelpoint.y += 5;
            point = projection.fromDivPixelToLatLng(pixelpoint);
            map.setCenter(point);
        }
        if (appx_west) {
            pixelpoint.x -= 5;
            point = projection.fromDivPixelToLatLng(pixelpoint);
            map.setCenter(point);
        }
    }); 
```

可能有一种更有效的方法可以做到这一点，但没有人说什么，这有效，所以它会做。

# android - Android adb 在 Centos 6 Virtualbox 上找不到任何 android 设备

> ID：14634692
> 
> 赞同：1
> 
> 时间：2013-01-31T20:37:53.667
> 
> 标签：android, centos, adb, virtualbox, centos6

我在 Virtualbox 上准备了一个全新的 Centos 6.3 x64 虚拟机，带有 android 开发环境，还安装了带有 Virtualbox 扩展包的访客添加。

当我通过usb连接我的android设备时，Virtualbox确实找到了它，我可以通过选择轻松连接它`devices` `usb devices` `SAMSUNG_Android`，然后Virtualbox将设备显示为已连接，但android设备不再显示usb连接通知：`USB connected` `Select to copy files to/from your computer`。

在 cent 终端上，我尝试`adb devices`了命令，但没有找到任何东西。

`lsusb`当我在连接设备之前和之后尝试终端时，它返回相同的结果。

请帮我找出问题所在。

# ios - Ipod 相机扫描相似颜色

> ID：14634695
> 
> 赞同：1
> 
> 时间：2013-01-31T20:37:58.297
> 
> 标签：ios

我正在构建一个应用程序，该应用程序可以根据相机输出动态分配形状，例如圆形、墙壁或类似物体，我想到我可以使用来自相机原始输出的像素数据，然后比较颜色以找到颜色相似的东西，然后从中找到墙壁，但我觉得必须有更好的方法来做到这一点，有什么建议吗？同样，我还需要找到物体的深度，找出物体与 ipod 的距离，是否有任何地方可以找到该数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:48:09.363

你的方法不会做到这一点，你必须更深入地研究这个主题才能自己完成一些事情。但是，还有其他人已经为您完成了困难的部分；看看[高通的增强现实 SDK](https://developer.vuforia.com/search/apachesolr_search/qdevnet%20sdk%20ios#per-page=50&ft=forum)。

# c# - 为并发字典公开 GetEnumerator()

> ID：14634698
> 
> 赞同：2
> 
> 时间：2013-01-31T20:38:06.227
> 
> 标签：c#, multithreading

我正在为 C# 开发一个并发字典实现，我想知道这个`GetEnumerator()`实现**是否实际上是（线程）安全**的。

它没有做一个实际的快照，所以我想知道它是否会在以后对内部字典进行读/写时搞砸，或者它是否会暴露潜在的死锁，因为暴露的枚举`IEnumerator`实际上会在锁内运行。

```
private readonly Dictionary<TKey, TValue> internalDictionary;
private SpinLock spinLock = new SpinLock();

IEnumerator IEnumerable.GetEnumerator()
{
    IEnumerator enumerator;

    bool lockTaken = false;
    try
    {
        spinLock.TryEnter(ref lockTaken);
        enumerator = (this.internalDictionary as IEnumerable).GetEnumerator();
    }
    finally
    {
        if (lockTaken)
        {
            spinLock.Exit(false);
        }
    }

    return enumerator;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T22:25:44.847

您的方法对于并发编写者来说不是线程安全的，因为

1.  您的枚举器没有对任何内容进行快照。它正在引用原始字典。调用`ToList`它或其他东西来实际快照。
2.  并发编写者不使用您的锁，因此它们同时执行。这是不安全的。
3.  如果锁体很大，不要使用自旋锁。
4.  如果 TryEnter 失败怎么办？毕竟叫*try 。*

这是一个固定版本，去掉了所有的聪明才智：

```
IEnumerator IEnumerable.GetEnumerator()
{
    lock (internalDictionary) return internalDictionary.ToList();
} 
```

并发作者也必须获得锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T21:52:05.280

首先想到的是，当 .NET 附带线程安全的并发集合类（包括字典）时，为什么你会想要自己创建这样一个野兽。谷歌`System.Collections.Concurrent`了解更多信息。

我之前对 ConcurrentDictionary 类进行了基准测试，我向您保证，它们比您自己编写的任何东西都要快得多，即使在使用自旋锁或互锁来避免任何更重的锁定机制时也是如此。

也许可以回答您的问题，**但这取决于实施**（这绝不是一件好事）。我猜想任何写入尝试都会失败，因为标准集合类在迭代时无法修改；但我不会依赖任何这样的机制来保证我自己的代码安全。

# javascript - 访问剑道窗口内按钮的点击事件

> ID：14634704
> 
> 赞同：0
> 
> 时间：2013-01-31T20:38:27.053
> 
> 标签：javascript, asp.net-mvc-4, kendo-ui

我有一个来自剑道网格的命令按钮，可以启动剑道窗口。在剑道窗口内，我有一个按钮，我想将其发布到控制器，其中包含来自剑道窗口中其他对象的数据。我已经搜索并找到了这样做的人，但没有实际的完整示例代码。该按钮在我的剑道窗口中，它不是窗口顶部的“动作”按钮之一。谢谢！

cshtml:

```
 @(Html.Kendo().Window().Name("SMSwindow")
            .Title("Send SMS")
            .Visible(false)
            .Modal(true)
            .Draggable(true)
            .Width(600)               
        ) 
```

javascript:

```
 <script type="text/x-kendo-template" id="template">
<div id="sms-container" style="background-color: \\#f0f0f0; padding-left:10px">
    <h3>#= GroupName #<h3>
    <div>
        <input id="txtsub" style="font-size:12px" type="text" value="#= Subject #" />
    <div>
    <div style="padding: 5px 0px 0px 0px">
        <textarea id="txtbody" rows="10" cols="20" style="font-size:12px;" wrap="hard">#= Body #</textarea>
    <div>
    <div style="padding: 5px 0px 0px 0px">
        <input id="btnsend" style="font-size:14px" value="Send" type="submit" size="5" formmethod="post" />
    <div>
</div> 
```

```
 <script type="text/javascript">
var smsTemplate = kendo.template($("#template").html());

function SendSMS(e) {
    e.preventDefault();

    var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
    var wnd = $("#SMSwindow").data("kendoWindow");

    wnd.content(smsTemplate(dataItem));
    wnd.center().open();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T22:49:31.907

您可以使用 ：

```
$(document).on('click', 'SelectorForYourButton', function() {
    //Handle your event here.
}); 
```

# javascript - 如何使用 raphael 1.5.2 重新调整 SVG 的大小？

> ID：14634705
> 
> 赞同：0
> 
> 时间：2013-01-31T20:38:26.790
> 
> 标签：javascript, jquery, raphael

我有使用这种格式的路径：

```
 Region2: {
    name: "Region2",
    slug: "Region2",
    url: "#",
    path: "M362.379,162.846l0.329-3..."
} 
```

如果我可以为大小添加另一个参数，或者如果我可以在另一行 Javascript 中以 Region2 为目标来更改大小，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:31:25.750

您可以使用[.scale()](http://raphaeljs.com/reference.html#Element.scale)。您是否有理由必须使用旧版本的库？现在是 2.1.0。

# c# - 使用 SOAP 反序列化数组

> ID：14634706
> 
> 赞同：0
> 
> 时间：2013-01-31T20:38:27.647
> 
> 标签：c#, serialization, soap

我在获取 SOAP 服务以反序列化对象数组时遇到问题；它仅在数组的第一个成员中读取，仅此而已。这是我的代码：

```
public void StoreCredentials(Credentials credentials)
    {
        Credentials[] credsArray;
        var soap = new SoapFormatter();

        var stream = new FileStream(_path, FileMode.OpenOrCreate);
        try
        {
            credsArray = (Credentials[])soap.Deserialize(stream);
            var credsList = credsArray.ToList();
            credsList.Add(credentials);
            credsArray = credsList.ToArray();
        }
        catch (SerializationException)
        {
            credsArray = new[] {credentials};
        }
        soap.Serialize(stream, credsArray);
        stream.Close();
    } 
```

我编写了一个简单的单元测试，它将两个 Credentials 对象添加到文件中，输出看起来正确，两组凭据都存在，但是当我运行测试以将第三组添加到文件时，soap.Deserialize(stream) 行返回一个只有一个条目的数组，即使它读取的文件包含两个条目。我在这里做错了吗？有没有更好/更简单的方法来做到这一点？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:20:30.480

我想到了。问题出在 FileStream 的 FileMode.OpenOrCreate 属性上。这将打开文件，但将其附加一个新集合，而不是更改原始集合。我需要改用 FileMode.Create 覆盖文件，所以这是工作代码（我还将集合更改为 Hashtable，效果更好）：

```
public void StoreCredentials(Credentials credentials)
    {
        credentials.Encrypt(_myUser.Encryption);
        Hashtable credsTable;
        var soap = new SoapFormatter();

        FileStream stream;
        try
        {
            stream = new FileStream(_path, FileMode.Open, FileAccess.ReadWrite);
            credsTable = (Hashtable) soap.Deserialize(stream);
            stream.Close();
            stream = new FileStream(_path, FileMode.Create, FileAccess.ReadWrite);
            if (credsTable.ContainsKey(credentials.Id))
                credsTable[credentials.Id] = credentials;
            else
                credsTable.Add(credentials.Id, credentials);
        }
        catch (FileNotFoundException e)
        {
            stream = new FileStream(_path, FileMode.Create, FileAccess.ReadWrite);
            credsTable = new Hashtable {{credentials.Id, credentials}};
        }
        soap.Serialize(stream, credsTable);
        stream.Close();
    } 
```

# python - 排序python多维数组？

> ID：14634709
> 
> 赞同：2
> 
> 时间：2013-01-31T20:38:32.263
> 
> 标签：python, numpy

我声明了一个可以接受不同数据类型的多维数组`numpy`

`count_array = numpy.empty((len(list), 2), dtype = numpy.object)`

第一个数组有字符串，第二个有数字。我想根据数字对两列进行排序......

有没有更简单的`sort()`方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T21:11:57.737

考虑将您的数组改为*结构化数组：*

```
count_array = np.empty((len(list),), dtype=[('str', 'S10'), ('num', int)]) 
```

然后您可以按特定键排序：

```
np.sort(arr, order='num') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T21:04:00.080

您可以对第二列进行[argsort 排序](http://docs.scipy.org/doc/numpy/reference/generated/numpy.argsort.html)，然后在行上使用所谓的“fancy-indexing”：

```
import numpy as np
count_array = np.array([('foo',2),('bar',5),('baz',0)], dtype = np.object)
print(count_array)
# [[foo 2]
#  [bar 5]
#  [baz 0]]

idx = np.argsort(count_array[:, 1])
print(idx)
# [2 0 1]

print(count_array[idx])
# [[baz 0]
#  [foo 2]
#  [bar 5]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T21:25:00.780

我建议这个：

首先，像 unutbu 一样，我会用它`numpy.array`来构建列表

```
import numpy as np
count_array = np.array([('foo',2),('bar',5),('baz',0)], dtype = np.object) 
```

然后，我使用`operator.itemgetter`：

```
import operator
newlist = sorted(count_array, key=operator.itemgetter(1)) 
```

这意味着：`count_array`使用索引 1 对 wrt 参数进行排序，即整数值。

输出是

```
[array([baz, 0], dtype=object), array([foo, 2], dtype=object), array([bar, 5], dtype=object)] 
```

我可以重新安排。我这样做

```
np.array([list(k) for k in newlist], dtype=np.object) 
```

我得到一个与以前格式相同的numpy数组

```
array([[baz, 0],
       [foo, 2],
       [bar, 5]], dtype=object) 
```

最后，整个代码看起来像这样

```
import numpy as np
import operator

count_array = np.array([('foo',2),('bar',5),('baz',0)], dtype = np.object)

np.array([list(k) for k in sorted(count_array, key=operator.itemgetter(1))], dtype=np.object) 
```

最后一行进行请求的排序。

# visual-studio-2010 - 阻止 VS2010 自动附加到浏览器进程

> ID：14634712
> 
> 赞同：0
> 
> 时间：2013-01-31T20:38:42.597
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-debugging

我目前正在使用 Visual Studio 2010 开发一个 Web 应用程序。我更喜欢使用 IE 中的开发工具来调试这个应用程序中的 Javascript，所以每次我调试应用程序时，我都必须手动分离窗口`iexplore.exe`中的进程，所以我`Processes`可以在IE中开始调试。

这有点不方便，所以我想知道是否可以在调试时阻止 VS2010 自动附加到 iexplore 进程？我已经搜索了网络没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:08:58.350

如果您想要调试的只是 JavaScript，那么您可以在不通过`Ctrl`+调试的情况下启动您的 Web 应用程序`F5`。这将避免“无法附加到进程。另一个调试器可能附加到进程”。错误。

正如@cheesemacfly 所写，要同时调试服务器端和客户端代码，我通常只使用不同的浏览器。

# jquery - RequireJS/Backbone：如何将数据传递给 require

> ID：14634714
> 
> 赞同：1
> 
> 时间：2013-01-31T20:38:52.153
> 
> 标签：jquery, backbone.js, requirejs

我有一个 Backbone 事件，其中包括：

```
this.model.save()
    .done(function(response) {
        require(['models/countModel', 'views/countView'], function(cm, cv, response) {
            console.log(response);
        });
     });
    .fail(function(response) {
         ...
     }); 
```

`console.log(response)`产生未定义的。我需要来自服务器的响应，以便处理数据。我怎么去呢？但是，如果我`console.log()`高于它，`require`那么我会得到来自服务器的响应。我如何传递它？我正在做的事情不起作用。我不认为这就是 a`require`的工作方式，但我试过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:02:47.803

您不需要将响应作为参考传递给 require，因为它在调用 done 时已经定义。将您的要求调用更改为：

```
require(['models/countModel', 'views/countView'], function(cm, cv) { 
```

应该做的伎俩！

# javascript - Jquery追加 - 打印两次相同的信息

> ID：14634715
> 
> 赞同：0
> 
> 时间：2013-01-31T20:38:57.023
> 
> 标签：javascript, jquery, append

这一定是一个基本问题，但我无法解决。为什么 append 方法将两次相同的信息打印到一个 div 中？

HTML：

```
<div class="error_display"></div> 
```

查询：

```
$(document).ready(function() {
    var errorlist = [];
    errorlist.length = 0;
    errorlist.push("Array test");
    for(var i = 0; i < errorlist.length; i++) {
        $('.error_display').append(errorlist[i]+"<br/>");       
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T06:43:24.307

尝试添加`console.log(/* variable of interest */);`以监视您正在观察的一些条件。如果所有其他方法都失败了，您还可以添加一些东西来检查该行是否已经存在。

# c# - C# 使用带有引号的文本解析 CSV，该文本具有带引号的字段

> ID：14634718
> 
> 赞同：0
> 
> 时间：2013-01-31T20:39:12.420
> 
> 标签：c#, parsing, text, csv

我有一个所有字段都引用文本的 CSV 文件。我的问题是我在引号内有如下引号。

```
"John Doe","I have a 17" screen","Something "A" something else",.... 
```

我已经尝试过 Microsoft.VisualBasic.FileIO 和 LumenWorks.Framework.IO.Csv 并且两者都不允许在这些字段中使用引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:48:24.303

如果您没有选择在源文件中使用正确的双引号并且需要手动解析它，这可能会对您有所帮助：

```
var split = theCsv.Split(',');
var noQuotesCollection = split.Select(p =>
{
    if (p.StartsWith("\"") && p.EndsWith("\"") && p.Length > 1)
        return p.Substring(1, p.Length - 2);
    return p;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:45:26.853

为了在 CSV 文件中有引号，您必须使用双引号。

这是一个示例

"这里有一些文字","这里还有一些文字","这里有一些带引号的文字, ""Hello World"""

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:41:03.777

您是否尝试过在 "," 上拆分字符串？假设这在您应该工作的文件中是一致的。当然，如果你在一个字段中有一个内部的“，”你就不走运了。

检查[此 SO 线程](https://stackoverflow.com/questions/1254577/string-split-by-multiple-character-delimiter)以获取拆分多个字符的示例。

# javascript - Javascript 类变量范围

> ID：14634723
> 
> 赞同：3
> 
> 时间：2013-01-31T20:39:27.913
> 
> 标签：javascript, jquery, json, oop, scope

我在结合 jQuery JSON 调用的情况下使用 Javascript 变量范围。不幸的是，我不能在 jsFiddle 上发布这个脚本，因为它需要一些数据。

我正在尝试动态加载数据并将其输出到用户的屏幕上。我现在只创建了第一次加载数据的方法。稍后我想创建一个更新方法来更新表行中的数据。

但是现在我遇到了变量范围的问题。调用 $.pcw.outstandingInvoices.init() 时，出现以下错误：

```
ypeError: can't convert undefined to object
this.outstandingInvoicesArray[key] = entry; 
```

我的代码：

```
-- Post is getting to long, so removed the first code i've used. -- 
```

谁能告诉我我做错了什么，以便我可以修复它？

提前致谢！

--- 更新 --- 我已经编辑了你们告诉我的东西，但我仍然遇到错误......谁能告诉我我做错了什么？

我的新代码和错误：

```
-- Post is getting to long, so removed the first update of the code. -- 
```

错误：

```
Initializing outstandingInvoices class.
Loading outstanding invoices from server.

TypeError: context.outstandingInvoicesObject is undefined
if (context.outstandingInvoicesObject.length == 0) {

TypeError: can't convert undefined to object
self.outstandingInvoicesObject[key] = entry; 
```

-- 更新 2 -- 刚刚编辑了我的代码，现在我没有收到错误，但未正确保存未正确保存的数据，因此方法 addOutstandingInvoicesTable 找不到任何发票。我一直在分析控制台，似乎方法的执行顺序有问题......

编码：

```
$.pcw.outstandingInvoices = function () {
    var context = this;
    context.outstandingInvoicesObject = [];

    context.init = function ()
    {
        console.log('Initializing outstandingInvoices class.');

        context.loadData();        
        context.removeLoader();
        context.addOutstandingInvoicesToTable();
    };

    context.loadData = function ()
    {
        console.log('Loading outstanding invoices from server.');

        jQuery.getJSON('/ajax/outgoing-invoices/find-outstanding.json', function (data)
        {   
            var i = 0;
            jQuery.each(data, function (key, entry)
            {
                context.outstandingInvoicesObject[key] = entry;

                ++i;
            });

            console.log('Loaded ' + i + ' invoices');
        }).error(function () {
            console.error('Error while loading outstanding invoices.');
        });
    };

    context.removeLoader = function ()
    {
        console.log('Removing loader');

        jQuery('table#invoices-outstanding tr.ajax-loader').fadeOut();
    };

    context.addOutstandingInvoicesToTable = function()
    {
        console.log('Outputing invoices to table');

        if (context.outstandingInvoicesObject.length == 0) {
            console.log('No outstanding invoices found');
        }

        jQuery.each(context.outstandingInvoicesObject, function (key, entry)
        {
            // This is a new outstanding invoice
            var rowClass = 'info';

            switch(entry.status)
            {
                case 'Created':
                case 'Sent':
                case 'Paid': // The invoices with Paid statuses aren't show here, because we only show the oustanding invoices on this page.
                    rowClass = 'success';
                break;

                case 'First reminder':
                case 'Second reminder':
                case 'Partially paid':
                    rowClass = 'warning';
                break;

                case 'Third reminder':
                case 'Collection agency':
                case 'Judicial proceedings':
                    rowClass = 'error';
                break;
            }

            jQuery('table#invoices-outstanding tbody').append(
                outstandingInvoice = jQuery('<tr/>', {
                    id: 'outgoing-invoice-' + key,
                    class: rowClass
                }).append(
                    jQuery('<td/>', {
                        class: 'id',
                        text: key
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'debtor-name',
                        text: entry.debtor_name
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'amount',
                        text: entry.amount
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'date',
                        text: entry.created_timestamp
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'status',
                        text: entry.status
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'creator',
                        text: entry.creator
                    })
                )            
            );
        });
    }
}

// When document is ready
(function()
{
    var invoices = new $.pcw.outstandingInvoices();
    invoices.init();
})(); 
```

控制台输出：

```
Initializing outstandingInvoices class.

Loading outstanding invoices from server.
GET /ajax/outgoing-invoices/find-outstanding.json
200 OK
509ms   

Removing loader

Outputing invoices to table

No outstanding invoices found

Loaded 29 invoices 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:42:02.623

以下应该可以解决您的问题。您没有按照您的意图声明 oustandingInvoicesObject 。在您的情况下，它必须关闭“this”或“context”。

此外，您将 oustandingInvoicesObject 声明为 Array 而不是 Object。您不能像添加对象那样向数组添加属性。

让我知道事情的后续。

```
$.pcw.outstandingInvoices = function () {
    var context = this;
    context.outstandingInvoicesObject = {};

    context.init = function ()
    {
        console.log('Initializing outstandingInvoices class.');

        context.loadData();
        context.removeLoader();
        context.addOutstandingInvoicesToTable();
    };

    context.loadData = function ()
    {
        console.log('Loading outstanding invoices from server.');

        var self = this;

        jQuery.getJSON('/ajax/outgoing-invoices/find-outstanding.json', function (data)
        {            
            jQuery.each(data, function (key, entry)
            {
                self.outstandingInvoicesObject[key] = entry;
            });
        }).error(function () {
            console.error('Error while loading outstanding invoices.');
        });
    };

    context.removeLoader = function ()
    {
        jQuery('table#invoices-outstanding tr.ajax-loader').fadeOut();
    };

    context.addOutstandingInvoicesToTable = function()
    {
        if (context.outstandingInvoicesObject.length == 0) {
            console.log('No outstanding invoices found');
        }

        jQuery.each(context.outstandingInvoicesObject, function (key, entry)
        {
            // This is a new outstanding invoice
            var rowClass = 'info';

            switch(entry.status)
            {
                case 'Created':
                case 'Sent':
                case 'Paid': // The invoices with Paid statuses aren't show here, because we only show the oustanding invoices on this page.
                    rowClass = 'success';
                break;

                case 'First reminder':
                case 'Second reminder':
                case 'Partially paid':
                    rowClass = 'warning';
                break;

                case 'Third reminder':
                case 'Collection agency':
                case 'Judicial proceedings':
                    rowClass = 'error';
                break;
            }

            jQuery('table#invoices-outstanding tbody').append(
                outstandingInvoice = jQuery('<tr/>', {
                    id: 'outgoing-invoice-' + key,
                    class: rowClass
                }).append(
                    jQuery('<td/>', {
                        class: 'id',
                        text: key
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'debtor-name',
                        text: entry.debtor_name
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'amount',
                        text: entry.amount
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'date',
                        text: entry.created_timestamp
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'status',
                        text: entry.status
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'creator',
                        text: entry.creator
                    })
                )            
            );
        });
    };
};

// When document is ready
(function(){
    var invoices = new $.pcw.outstandingInvoices();
    invoices.init();
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:44:27.977

您正在创建`outstandingInvoicesArray`一个数组，但您试图将它作为一个对象访问：

```
outstandingInvoicesArray: []
[...]
this.outstandingInvoicesArray[key] = entry; 
```

而是将其创建为对象：

```
outstandingInvoicesArray: {} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T20:44:49.393

*如果要使用this* ，则应在初始化对象时使用*new*关键字：

 *```
$.pcw.outstandingInvoices = function(){
   var context = this;//replace every instance of "this" in your class with the context var

   context.init= function ()
    {
        console.log('Initializing outstandingInvoices class.');

        context.loadData();

    }
    //the rest of functions defined below
}
var invoices = new $.pcw.outstandingInvoices();
invoices.init(); 
```

编辑：要修复剩余的错误，请尝试使用上下文而不是 self，并在上下文中声明出色的 InvoicesObject：

```
$.pcw.outstandingInvoices = function () {
    var context = this;
    context.outstandingInvoicesObject = [];

    context.init = function ()
    {
        console.log('Initializing outstandingInvoices class.');

        context.loadData();

    };

    context.loadData = function ()
    {
        console.log('Loading outstanding invoices from server.');

        jQuery.getJSON('/ajax/outgoing-invoices/find-outstanding.json', function (data)
        {            
            jQuery.each(data, function (key, entry)
            {
                context.outstandingInvoicesObject[key] = entry;
            });
            //now that we have data, call add the invoices to the table
            context.removeLoader();
            context.addOutstandingInvoicesToTable();
        }).error(function () {
            console.error('Error while loading outstanding invoices.');
        });
    };

    context.removeLoader = function ()
    {
        jQuery('table#invoices-outstanding tr.ajax-loader').fadeOut();
    };

    context.addOutstandingInvoicesToTable = function()
    {
        if (context.outstandingInvoicesObject.length == 0) {
            console.log('No outstanding invoices found');
        }

        jQuery.each(context.outstandingInvoicesObject, function (key, entry)
        {
            // This is a new outstanding invoice
            var rowClass = 'info';

            switch(entry.status)
            {
                case 'Created':
                case 'Sent':
                case 'Paid': // The invoices with Paid statuses aren't show here, because we only show the oustanding invoices on this page.
                    rowClass = 'success';
                break;

                case 'First reminder':
                case 'Second reminder':
                case 'Partially paid':
                    rowClass = 'warning';
                break;

                case 'Third reminder':
                case 'Collection agency':
                case 'Judicial proceedings':
                    rowClass = 'error';
                break;
            }

            jQuery('table#invoices-outstanding tbody').append(
                outstandingInvoice = jQuery('<tr/>', {
                    id: 'outgoing-invoice-' + key,
                    class: rowClass
                }).append(
                    jQuery('<td/>', {
                        class: 'id',
                        text: key
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'debtor-name',
                        text: entry.debtor_name
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'amount',
                        text: entry.amount
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'date',
                        text: entry.created_timestamp
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'status',
                        text: entry.status
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'creator',
                        text: entry.creator
                    })
                )            
            );
        });
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T20:42:32.597

创建对象的备份，以便您可以在`this`不引用该对象的函数中使用它。

```
loadData: function ()
{
    console.log('Loading outstanding invoices from server.');
    var self = this;
    jQuery.getJSON('/ajax/outgoing-invoices/find-outstanding.json', function (data)
    {            
        jQuery.each(data, function (key, entry)
        {
            self.outstandingInvoicesArray[key] = entry;
        });
    }).error(function () {
        console.error('Error while loading outstanding invoices.');
    });
}, 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-02T11:23:43.453

现在问题已经解决了。这是你们所说的事情和AJAX调用是异步的问题的结合。

最终的工作代码是：

```
$.pcw.outstandingInvoices = function () {
    var context = this;
    context.outstandingInvoicesObject = new Object();

    context.init = function ()
    {
        console.log('Initializing outstandingInvoices class.');

        context.loadData();                
        context.removeLoader();
        context.addOutstandingInvoicesToTable();
    };

    context.loadData = function ()
    {
        console.log('Loading outstanding invoices from server.');

        $.ajax({
            url: '/ajax/outgoing-invoices/find-outstanding.json',
            dataType: 'json',
            async: false,
            success: function(data) {                
                var i = 0;            
                jQuery.each(data, function (invoiceId, invoiceDetails)
                {
                    context.outstandingInvoicesObject[invoiceId] = invoiceDetails;

                    ++i;                                
                });

                console.log('Loaded ' + i + ' invoices');       
            }
        }).error(function () {
            console.error('Error while loading outstanding invoices.');
        });
    };

    context.removeLoader = function ()
    {
        console.log('Removing loader');

        jQuery('table#invoices-outstanding tr.ajax-loader').fadeOut();
    };

    context.addOutstandingInvoicesToTable = function()
    {
        console.log('Outputing invoices to table');           

        if (context.outstandingInvoicesObject.length == 0) {
            console.log('No outstanding invoices found');            
        }

        jQuery.each(context.outstandingInvoicesObject, function (key, entry)
        {
            // This is a new outstanding invoice
            var rowClass = 'info';

            switch(entry.status)
            {
                case 'Created':
                case 'Sent':
                case 'Paid': // The invoices with Paid statuses aren't show here, because we only show the oustanding invoices on this page.
                    rowClass = 'success';
                break;

                case 'First reminder':
                case 'Second reminder':
                case 'Partially paid':
                    rowClass = 'warning';
                break;

                case 'Third reminder':
                case 'Collection agency':
                case 'Judicial proceedings':
                    rowClass = 'error';
                break;
            }

            jQuery('table#invoices-outstanding tbody').append(
                outstandingInvoice = jQuery('<tr/>', {
                    id: 'outgoing-invoice-' + key,
                    class: rowClass
                }).append(
                    jQuery('<td/>', {
                        class: 'id',
                        text: key
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'debtor-name',
                        text: entry.debtor_name
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'amount',
                        text: entry.amount
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'date',
                        text: entry.created_timestamp
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'status',
                        text: entry.status
                    })
                ).append(
                    jQuery('<td/>', {
                        class: 'creator',
                        text: entry.creator
                    })
                )            
            );
        });
    }
}

// When document is ready
(function()
{   
    var invoices = new $.pcw.outstandingInvoices();
    invoices.init();
})(); 
```

谢谢你们的帮助，伙计们！*

# jquery - jQuery 在 bllomberg 亿万富翁中？

> ID：14634727
> 
> 赞同：-4
> 
> 时间：2013-01-31T20:39:34.593
> 
> 标签：jquery

只是想知道这个网站使用的技术是什么？是 jQuery 吗？

尤其是过滤时的动画效果。

[http://www.bloomberg.com/billionaires](http://www.bloomberg.com/billionaires)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:44:00.530

有很多 jquery 和很多直接的 javascript。如果您右键单击并查看源代码，您可以自己查看。您还可以在浏览器中输入任何外部 javascript 文件的地址以查看其来源。

# python - Scrapyd 部署“属性错误：NoneType 对象没有属性‘module_name’”

> ID：14634733
> 
> 赞同：2
> 
> 时间：2013-01-31T20:39:53.017
> 
> 标签：python, scrapy, egg, scrapyd

我正在尝试使用scrapy将我的爬虫项目部署到scrapyd实例，但调用command会返回以下错误：

> 服务器响应 (200): {"status": "error", "message": "AttributeError: 'NoneType' object has no attribute 'module_name'"}

这是我的 setup.py，用于构建在部署期间提交的 python egg：

```
from setuptools import setup, find_packages

setup(
    name = 'mycrawler',
    version = '0.1',
    packages = find_packages(),
    install_requires = [
        'scrapy',
        'PyMongo',
            'simplejson',
            'queue'
    ]
) 
```

我的scrapy.cfg：

```
[settings]
default = mycrawler.settings

[deploy:scrapyd_home_vm]
url = http://192.168.1.2:6800/
project = mycrawler

[deploy:scrapyd_local_vm]
url = http://192.168.38.131:6800/
project = mycrawler 
```

我觉得这与鸡蛋的建造方式有关，但我不确定。我知道当您访问应该是对象的属性但无论出于何种原因实际上为空时，python 会引发这样的错误。我也没有任何“module_name”属性或任何试图在我自己的代码中引用它的东西。在本地从 scrapy 运行爬虫就可以了，但部署 egg 却不行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-27T11:37:53.977

一个相当晚的答案，但我遇到了同样的问题并找到了解决方案。

对我来说，问题可以通过查看`scrapyd`自身产生的回溯来找到：

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/runpy.py", line 162, in _run_module_as_main
    "__main__", fname, loader, pkg_name)
  File "/usr/lib/python2.7/runpy.py", line 72, in _run_code
    exec code in run_globals
  File "/home/vagrant/venv/lib/python2.7/site-packages/scrapyd/runner.py", line 39, in <module>
    main()
  File "/home/vagrant/venv/lib/python2.7/site-packages/scrapyd/runner.py", line 34, in main
    with project_environment(project):
  File "/usr/lib/python2.7/contextlib.py", line 17, in __enter__
    return self.gen.next()
  File "/home/vagrant/venv/lib/python2.7/site-packages/scrapyd/runner.py", line 22, in project_environment
    activate_egg(eggpath)
  File "/home/vagrant/venv/local/lib/python2.7/site-packages/scrapyd/eggutils.py", line 13, in activate_egg
    settings_module = d.get_entry_info('scrapy', 'settings').module_name

AttributeError: 'NoneType' object has no attribute 'module_name' 
```

如您所见，它正在尝试加载`scrapy`项目的 settings_module; 该`module_name`属性不存在，因为`d.get_entry_info`正在返回 None 对象。

解决方案是检查您`setup.py`用于生成鸡蛋的内容，并检查对 setup 的调用是否包含以下行：

```
packages=find_packages(),
entry_points={'scrapy': ['settings = scraper.settings']}, 
```

这里，`scraper.settings`是 scrapy 项目设置文件的 Python 模块路径。将其更改为反映您的项目布局的一个，您应该是花花公子..

..如果不是，这里的关键是检查输出`scrapyd`（启用调试允许您在服务器响应中看到）以找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-02T20:39:58.143

你在用`scrapyd-client`包吗？如果是，那么您甚至不需要`setup.py`. 我遇到了那个*AttributeError*因为我已经有一个`setup.py`，所以我删除了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T20:54:03.507

这是一个编码错误，可能在您的`mycrawler`模块中：

```
AttributeError: 'NoneType' object has no attribute 'module_name' 
```

这意味着您正在尝试访问`module_name`由某个函数或方法返回的对象中的属性，但返回值`None`与对象相反（可能是函数或方法指示发生错误的方式）。

检查您的代码以查找您`module_name`在返回值中引用名称的位置。

或者它可能`scrapy`要求您定义并传递给它的对象之一必须具有`module_name`定义的属性，而您忘记了这样做。

最后，它可能是`scrapy`.

但它不太可能是一个问题`setuptools`。

# javascript - Angular.js 模板没有获取文档 css

> ID：14634734
> 
> 赞同：2
> 
> 时间：2013-01-31T20:39:54.350
> 
> 标签：javascript, jquery-mobile, angularjs

我有两个填充 ng-view 的模板，但它们不继承文档 css。有没有办法让css工作？我在 jquery 移动页面中使用它，并希望重复列表具有 jquery 移动 ui。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:49:16.437

`ng-view`简单地将 HTML 附加到当前 DOM；应用于页面的 CSS 将正确影响它。更有可能的是，jQuery Mobile UI 做了一些添加 HTML 时不会发生的 JavaScript 魔法。

例如，浏览一下[Listviews 上的文档](http://jquerymobile.com/demos/1.2.0/docs/lists/lists-methods.html)会出现以下方法：

> ### `refresh`- 更新列表视图
> 
> 如果您通过 JavaScript 操作列表视图（例如添加新的 LI 元素），您必须在其上调用 refresh 方法来更新视觉样式。
> 
> ```
> $('.selector').listview('refresh'); 
> ```

[“List basics & API”](http://jquerymobile.com/demos/1.2.0/docs/lists/docs-lists.html)底部还有一个部分：

> ### 更新列表
> 
> 如果将项目添加到列表视图，则需要对其调用 refresh() 方法来更新样式并创建添加的任何嵌套列表。例如：
> 
> ```
> $('#mylist').listview('refresh'); 
> ```
> 
> 请注意，该`refresh()`方法仅影响附加到列表的**新节点。**这样做是出于性能原因。刷新过程将忽略任何已增强的列表项。这意味着如果您更改已经增强的列表项的内容或属性，这些将不会被反映。如果要更新列表项，请在调用刷新之前将其替换为新标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:57:25.037

ng-view has a [$viewContentLoaded](http://docs.angularjs.org/api/ng.directive:ngView#$viewContentLoaded) event that is emitted when the ng-view content is reloaded. Try having a controller or directive scope (or even rootScope) listen for that event and reapply/refresh as @Brandon mentions.

See also [Jquery calls not working in $viewContentLoaded of Angular](https://stackoverflow.com/questions/12021152/jquery-calls-not-working-in-viewcontentloaded-of-angular) and
[angular.js: equivalent of domReady](https://stackoverflow.com/questions/12558220/angular-js-equivalent-of-domready) - maybe you can just call the reapply/refresh stuff at the bottom of each main controller in your view (no need for $viewContentLoaded here).

# android - MapFragment 中的函数 getMapCenter / 从 MapFragment 获取 MapView

> ID：14634735
> 
> 赞同：1
> 
> 时间：2013-01-31T20:39:56.083
> 
> 标签：android, android-mapview, google-maps-android-api-2, mapfragment

我的 Android 应用程序中有一个 MapFragment，现在我想知道实际地图上显示的最小和最大纬度/经度。

我找到了这个解决方案：

> 如果您想找出 MapView 角落的经度纬度，您可以使用：

```
Point mapCenter = mapView.getMapCenter();
int latitudeSpan = mapView.getLatitudeSpan() / 2;
int longitudeSpan = mapView.getLongitudeSpan() / 2;
int topLeftLat = mapCenter.getLatitudeE6() + (latitudeSpan);
int topLeftLon = mapCenter.getLongitudeE6() - (longitudeSpan);
int bottomLeftLat = mapCenter.getLatitudeE6() - (latitudeSpan);
int bottomLeftLon = mapCenter.getLongitudeE6() + (longitudeSpan); 
```

我现在的问题是我没有 MapView，我只有一个 GoogleMap (com.google.android.gms.maps.GoogleMap) 和一个 MapFragment (com.google.android.gms.maps.MapFragment) 。

我需要最小/最大坐标来执行数据库查询以选择 POI-DB-Entrys。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:26:58.157

您可以从`GoogleMap`使用[`getVisibleRegion`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/Projection#getVisibleRegion%28%29)from中获取它`Projection`。

假设你命名你的`GoogleMap`as `map`，你做

```
VisibleRegion bounds = map.getProjection().getVisibleRegion(); 
```

`VisibleRegion`不一定是矩形，但可以为您提供界限，请参阅[文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/VisibleRegion)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T17:55:37.160

要添加到 iagreen 的答案，您可能对可见区域调用中的 LatLngBounds 感兴趣。

```
LatLngBounds bounds = this.mMap.getProjection().getVisibleRegion().latLngBounds; 
```

由此，您可以获得最小/最大纬度/经度（东北/西南角）。

不确定您要对此做什么，但是如果您要检查标记是否“在屏幕上”，那么您可能[对此答案感兴趣](https://stackoverflow.com/a/13713335/1103584)

# ios - iOS 下载和解析大型 JSON 响应导致 CFData（存储）泄漏

> ID：14634736
> 
> 赞同：0
> 
> 时间：2013-01-31T20:40:05.310
> 
> 标签：ios, memory-management, out-of-memory, nsoperationqueue, cfdata

用户第一次打开我的应用程序时，我需要下载大量数据。我以 JSON 格式从服务器获取所有这些数据。根据用户的不同，这些 JSON 文件的大小可以从 10kb 到 30mb 不等，其中有 10 多个。

当 JSON 的记录不超过 500 条左右时，我这样做没有问题，但就像我说的那样，有些记录有 10,000 多条，并且大小可达 30mb。

下载较大的 JSON 时，我的应用程序分配了大量内存，直到我最终收到内存警告并且应用程序崩溃。

**看来 CFData 必须是我在 didReceiveData 中构建的 NSMutableData。当我下载单个 JSON 时，CFData（存储）会上升——当我开始解析时，它会停止上升。**

在继续下载和解析下一个 JSON 之前，如何清除这些数据？

如下所示，内存中有 200mb 的 CFData（存储）：

![在此处输入图像描述](../Images/b28ad95c0f727d6d1b6d7691d4bfdb6c.png)

--

深入研究 CFData 并没有对我有太大帮助： ![在此处输入图像描述](../Images/8e1c4f170124e0e75a3e38c8007915bd.png)

这是我创建操作以获取这些各种 JSON 的代码——

```
- (void)checkForUpdates
{
    if(!_globals)
        _globals = [MySingleton sharedInstance];

    MyAFHTTPClient* client = [MyAFHTTPClient sharedClient];
    NSString* path = [NSString stringWithFormat:@"cache?deviceUID=%@&token=%@",[_globals getMacAddress], [_globals getToken]];
    NSURLRequest* request = [client requestWithMethod:@"GET" path:path parameters:nil];

     _currentEnvironment = [_globals getActiveEnvironment];       

    if(!_currentEnvironment.didDownloadDataValue)
        [self setupAndShowHUDinView:self.view withText:@"Checking for updates..."];

    AFJSONRequestOperation* operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

        for(NSString *str in [JSON valueForKey:@"Views"])
        {
            //for each table i need to update, create a request to
            NSString* path = [NSString stringWithFormat:@"cache/%@/?deviceUID=%@&token=%@", str, @"00000-00000-0000-00001", [_globals getToken]];
            NSURLRequest* request = [client requestWithMethod:@"GET" path:path parameters:nil];
            AFJSONRequestOperation* operation2 = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) 
            {
                    // even if this is comment this out and I do nothing but download, app crashes
                    //[self updateTable:str withJSON:JSON];
            } failure:nil];

            [operation2 setSuccessCallbackQueue:backgroundQueue];
            [client.operationQueue addOperation:operation2];
            numRequests++;
        }
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {

    }];

    [operation start];
} 
```

CFData 是我在内存中的 JSON 响应吗？我试图清除我的 NSURLCache 没有运气 -

我还对 JSON 流进行了一些研究。这会帮助我减少内存中的对象数量吗？

除此之外，我能想到的唯一其他选择是实现某种分页..但我需要我的用户拥有所有数据

非常感谢任何帮助/建议！谢谢！

--

**编辑**

好的，我决定使用剥离 AFNetworking 并尝试使用本机功能。在这样做时，我仍然得到相同的 CFData 版本。我正在使用[NSOperation 的这个子类，](https://github.com/DiamondTechIT/iOS-Simultaneous-Async-NSURLConnections/blob/master/LibSyncTest/LibSyncOperation.m)我现在正在创建/添加我的操作，如下所示：

```
 NSOperationQueue *operationQueue;
 operationQueue = [[NSOperationQueue alloc]init];
 [operationQueue setMaxConcurrentOperationCount:1];
 for(NSString *str in [views valueForKey:@"Views"])
 {

     NSString* path = [NSString stringWithFormat:@"%@cache/%@/?deviceUID=%@&token=%@", _globals.baseURL, str, @"00000-00000-0000-00001", [_globals getToken]];

     LibSyncOperation *libSyncOperation = [[LibSyncOperation alloc] initWithURL:path];
     [operationQueue addOperation:libSyncOperation];

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:49:08.733

我使用原生 JSON 转换函数处理海量数据，没有内存问题。

我只是使用标准`NSURLConnection`下载`NSData`然后执行以下操作...

```
NSData *data = [NSURLConnection sendSynchronous...

// use NSDictionary or NSArray here
NSArray *array = [NSJSONSerialization JSONObjectWithData:data ...

Now deal with the objects. 
```

没有泄漏，因为它是本机功能。比第三方框架快得多。

# android - 在底部显示广告而不与列表视图重叠

> ID：14634742
> 
> 赞同：5
> 
> 时间：2013-01-31T20:40:53.603
> 
> 标签：android, android-layout, admob

我正在开发 android 项目，但在将广告显示在列表视图下方的屏幕底部时遇到问题，而不会导致任何重叠。

目前，如果列表视图中有大量项目导致滚动，则广告应该显示在列表视图下方，但此时广告位于列表视图顶部，因此，用户可以' t 查看列表视图底部的内容。

下面是我的 XML 布局的副本

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:background="@color/black"
    android:orientation="vertical" >
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
    <TextView android:id="@+id/password_noRecords"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:layout_gravity="center"
        android:text="There are currently\nno saved logins"
        android:textSize="20dp"
        android:textStyle="bold|italic"/>
    <ListView 
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    </ListView>
    <Button android:id="@+id/password_clearSearch" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/password_clear_search"
        android:layout_alignParentBottom="true"
        android:visibility="gone"/>
    </LinearLayout>
    <com.google.ads.AdView android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_alignParentBottom="true"
        android:gravity="center_horizontal"
        ads:adUnitId="a14d6125d95c70b"
        ads:adSize="BANNER"
        ads:testDevices="TEST_EMULATOR, 015d1884222bfe01"/>
</RelativeLayout> 
```

我有很多不同的方法，将它全部放在相对布局中，而不是使用另一个线性布局，没有 align parent bottom = true 但它位于列表视图的顶部，与列表视图顶部的任何内容重叠。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-31T20:52:57.283

您可以通过仅使用 a`LinearLayout`作为基础（摆脱）`RelativeLayout`并使用`android:layout_weight`. `ListView`例子：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">
    <TextView android:id="@+id/password_noRecords"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:layout_gravity="center"
        android:text="There are currently\nno saved logins"
        android:textSize="20dp"
        android:textStyle="bold|italic"/>
    <ListView 
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />
    <Button android:id="@+id/password_clearSearch" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/password_clear_search"
        android:layout_alignParentBottom="true"
        android:visibility="gone"/>
    <com.google.ads.AdView android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:gravity="center_horizontal"
        ads:adUnitId="a14d6125d95c70b"
        ads:adSize="BANNER"
        ads:testDevices="TEST_EMULATOR, 015d1884222bfe01"/>
</LinearLayout> 
```

请注意`ListView`has`android:layout_height="0dp"`和`android:layout_weight="1"`. 这告诉它在将其他元素放入`LinearLayout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:55:07.890

尝试添加`android:id="@+id/linear_layout"`到您的 LinearLayout 并添加`android:layout_below="@id/linear_layout"`到`<com.google.ads.AdView ... />`

# javascript - 不限制宽度缩放高度

> ID：14634756
> 
> 赞同：0
> 
> 时间：2013-01-31T20:41:30.297
> 
> 标签：javascript, css, height, width, scale

我正在尝试将图像的高度缩放到其宽度。问题是宽度随用户的窗口大小而变化（一切都是 % 大小并继承），并且没有高度可以继承，因为高度取决于内容。我可以设置一个高度，但这违背了缩放整个站点以适应任何窗口大小的目的。

我希望图像和幻灯片元素的高度缩放到幻灯片元素和/或图像宽度的 75%。

**

## 这是一个小提琴链接：http: [//jsfiddle.net/eleventhend/t8Udg/](http://jsfiddle.net/eleventhend/t8Udg/)

**

这似乎是我能找到的最相关的回应，但我无法让它与我的合作。我不太了解Java，所以问题可能出在我的实现上。

[CSS缩放高度以匹配宽度 - 可能与外形尺寸](https://stackoverflow.com/questions/11243075/css-scale-height-to-match-width-possibly-with-a-formfactor)

编辑：解决了！

我想出了一个解决方法。这里是：

```
#preset {
margin: 50px auto;
height: 0px;
padding-bottom: 60%; /* proportional scaling */
position:relative;
width: 90%;
box-shadow: 0 0 20px rgba(0,0,0,0.8);
}

#slideshow { 
margin: 50px auto; 
position: relative; 
width: 100%;
height: 100%;
padding-bottom: 0px; 
} 
```

然后，打开一个 div 预设，然后是 div 幻灯片。像魅力一样工作！

# salesforce - 通过代码安装 Salesforce 应用程序

> ID：14634758
> 
> 赞同：1
> 
> 时间：2013-01-31T20:41:32.650
> 
> 标签：salesforce, force.com, salesforce-service-cloud

我有兴趣在客户运行我们产品的安装程序时将我们的“已连接”Salesforce 应用程序安装到客户的 Salesforce 设置中。

此功能是否通过 API 或任何其他机制公开？或者这是 Salesforce 管理员必须自己做的事情？

非常感谢您对此进行调查:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T00:47:03.823

据我所知，这没有在 API 中公开。就个人而言，未经我的明确许可，我不希望第三方应用程序在我的 Salesforce 帐户上安装任何内容。通过 API 公开它可以绕过审批流程。

# c# - 如何从 javascript 调用 C# 函数？

> ID：14634759
> 
> 赞同：0
> 
> 时间：2013-01-31T20:41:41.123
> 
> 标签：c#, javascript, asp.net

我试图弄清楚如何从 javascript 确认框中调用 C# 函数。即如果用户选择“确定”，则调用一个函数，如果用户选择“取消”，则调用另一个函数。所有代码都在后页中，如下所示：

```
Response.Write(@"
    <script language='javascript'>
    var msg=confirm('Your new document has been created.\nPress OK to go there now, or Cancle to create another document.');
    if (msg==true) {<%=redirect()%>;}
    else {<%=clearForm()%>;}
    </script>
");

protected void redirect(object sender, EventArgs e)
{
    Response.Redirect("myPage.aspx");
}

protected void clearForm(object sender, EventArgs e)
{
    //More code here//
} 
```

请注意，Response.Redirect 中的所有代码都在一行中，为了简单起见，我在这里将其拆分！无论如何，这不起作用，我找不到解决方案。我在`if`声明中尝试了各种不同的东西

我的第一个想法不是给用户一个选项，而是简单地使用：

```
Response.Write(@"<script language='javascript'>alert('Your new document has been created.');</script>");
Response.Redirect("TaskPanel.aspx"); 
```

但是当我尝试这个时，页面并没有等待用户在重定向之前单击“确定”，因此它变得毫无意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:52:21.243

您对服务器端代码和客户端代码感到困惑。您提交的 C# 代码将在您的服务器上运行，并在页面上写出 JavaScript 代码：

```
<script language='javascript'>
    var msg=confirm('Your new document has been created.\nPress OK to go there now, or Cancle to create another document.');
    if (msg==true) {<%=redirect()%>;}
    else {<%=clearForm()%>;}
</script> 
```

您编写的 JavaScript 将在客户端浏览器上运行。

`<%=redirect()%>;`但是，我想你会收到一个 JavaScript 错误，因为它会尝试写出`<%=clearForm()%>;`应该在服务器端运行的 ASPX scriptlet 代码（但实际上在客户端的 JavaScript 中显示为字符串） .

这只是对为什么不能直接从 JavaScript 调用 C# 函数的解释/答案。

对于您的具体问题，您无需回调服务器来执行重定向或清除表单。

这两者都可以在 JavaScript 中完成。

重定向可以使用 JavaScript`window.location="myPage.aspx"`或`self.location="myPage.aspx"`

清晰的表格可以用 JavaScript 完成 `form.reset()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T21:06:36.903

是的，它很简单：把你的回调函数放在一个文件中

之后你应该绑定点击**OK**你调用函数：**AJAX** with any javascript Framework 使简单

确定 取消

```
$("#OK,#Cancel").click(function(){

 var whichFct = $(this).attr('fct');      var urlToFile = "web/app/link/fct/1";
 if(whichFct == 2)  urlToFile = "web/app/link/fct/2"

   $.post(urlToFile,function() {
            //do sthlike hiding the form ...
       });
}); 
```

它只是比这简单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:33:20.137

pass a javascript function on buttonclick.. then write following code in .aspx page:

```
<script language='javascript'>
function func_name()
{
var msg=confirm('Your new document has been created.\nPress OK to go there now, or Cancle to create another document.')
if (msg==true) {<%=redirect()%>}
else {<%=clearForm()%>}
}
</script> 
```

do similarly for other button as well.

# c# - 带有子窗体的 Windows 窗体中的 Unity DI

> ID：14634773
> 
> 赞同：4
> 
> 时间：2013-01-31T20:42:40.590
> 
> 标签：c#, winforms, unity-container

我在 Windows 窗体应用程序中使用 Unity DI。到目前为止，它正在解决对 program.cs 中主要表单的依赖关系，如下所示：

```
 static void Main()
{
    IUnityContainer container = new UnityContainer();
    container.AddNewExtensionIfNotPresent<EnterpriseLibraryCoreExtension>();
    container.RegisterType<IAccountService, AccountService>();
    container.RegisterType<IAccountRepository, AccountRepository>();

    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(container.Resolve <MainForm>());
} 
```

我的问题是当我的 MainForm 尝试创建子表单时：

```
 ChildForm childForm = new ChildForm();
    childForm.Show(); 
```

我收到一个错误，因为我正在尝试使用构造函数注入并且我没有传入构造函数参数。我还尝试使用带有 [Dependency] 属性的 setter 注入，但这也不起作用。我应该如何做到这一点？我可以让我的主窗体具有所有依赖项并将所需的对象传递给子窗体，但如果我最终有许多子窗体，那么主窗体会很乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:48:56.333

为了让 Unity 注入构造函数参数，您需要使用容器来解析子表单。因此，您需要在某处保存对容器的引用，然后调用：

```
ChildForm childForm = container.Resolve<ChildForm>(); 
```

这将允许 Unity 评估 ChildForm 构造函数并注入适当的依赖项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-11T20:30:25.393

在上面的评论中，您提到了“使 [ing] 容器成为 program.cs 的公共属性”。

不要那样做。

如果您的表单依赖于容器，请将其视为任何其他依赖项。

*   将容器添加到容器中。
*   使用属性或 ctor 注入来让表单访问容器。

    ```
    static void Main()
    {

        IUnityContainer container = new UnityContainer();

        container
            .RegisterType<MainForm>()
            .RegisterInstance<IUnityContainer>(container); 
    ```

.

```
 public partial class MainForm: Form
    {
        [Dependency]
        public IUnityContainer Container { get; set; } 
```

# mysql - 这个简单的 MySQL SELECT 查询有什么问题？

> ID：14634775
> 
> 赞同：0
> 
> 时间：2013-01-31T20:42:43.037
> 
> 标签：mysql, sql, database, select

选择：

```
 SELECT pr.predmet            AS naziv_predmeta, 
           pr.protustranka_naziv AS protustranka 
    WHERE  pr.datetime > Date_add (Now(), INTERVAL 24 hour) 
```

我不断得到

> # 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在第 3 行的 'WHERE pr.datetime > Date_add (Now(), INTERVAL 24 hour)' 附近使用

表结构：

```
protustranka_naziv varchar(255)
predmet varchar(255)
datetime datetime 
```

编辑：好的，所以第一步是添加 FROM 子句 /facepalm。但问题是，我仍然不断收到错误消息。这是查询：

```
SELECT pr.predmet AS naziv_predmeta, pr.protustranka_naziv AS protustranka
FROM ou_predmeti
WHERE pr.datetime > DATE_ADD( NOW( ) , INTERVAL 24 HOUR ) 
LIMIT 0 , 30 
```

这是消息：

> # 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 ') LIMIT 0, 30' 附近使用正确的语法

EDIT2：我又错过了，应该是`FROM ou_predmeti pr`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:44:17.357

你忘了你的`FROM`条款

```
SELECT pr.predmet AS naziv_predmeta, 
       pr.protustranka_naziv AS protustranka 
FROM ????
WHERE  pr.datetime > Date_add (Now(), INTERVAL 24 hour) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:44:24.187

你错过了重要的`FROM`条款：

```
SELECT pr.predmet            AS naziv_predmeta, 
       pr.protustranka_naziv AS protustranka 
FROM <TABLE-NAME-HERE> AS pr
WHERE  pr.datetime > Date_add (Now(), INTERVAL 24 hour) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T20:45:05.713

你缺少`FROM`条款

```
SELECT pr.predmet            AS naziv_predmeta, 
       pr.protustranka_naziv AS protustranka 
FROM your_table              AS pr
WHERE  pr.datetime > Date_add (Now(), INTERVAL 24 hour) 
```

# mysql - SQL - 带有修订历史的评论系统

> ID：14634779
> 
> 赞同：0
> 
> 时间：2013-01-31T20:42:49.450
> 
> 标签：mysql, sql, database-design

我有两个表用于在 MySQL 数据库上存储评论。

第一个存储评论 ID、发布评论的页面、评论的作者以及是否是对另一评论的回复（分别如下）。

```
Comments
---------------------------------
CommentId    BIGINT      PK,NN,AI
OwnerId      BIGINT      
AuthorId     BIGINT      
ParentId     BIGINT      
Created      TIMESTAMP 
```

第二个存储评论的内容。

```
CommentsContent
----------------------------------
ContentId    BIGINT      PK,NN,AI
CommentId    BIGINT      
Content      TEXT        
Created      TIMESTAMP 
```

所以，假设`Comments`有以下记录：

```
CommentId  OwnerId  AuthorId  ParentId  Created
-----------------------------------------------------------
        1        1         2         0  2013-01-31 01:23:45
        2        1         2         0  2013-01-31 01:23:45 
```

并且`CommentsContent`有以下记录，显示评论的编辑历史：

```
ContentId  CommentId  Content           Created
-----------------------------------------------------------
        1          1  Testing           2013-01-31 01:23:45
        2          2  Another test      2013-01-31 01:23:45
        3          1  Testing1          2013-01-31 01:23:46
        4          1  Testing123        2013-01-31 01:23:47 
```

现在，我想获取最新评论以及它的最后更新日期（即 中的`Created`列`CommentsContent`）。

我试过：

```
SELECT
    c.CommentId,
    c.AuthorId,
    c.ParentId,
    c.Created,
    cc.Created as Updated,
    cc.Content
FROM
    Comments as c
JOIN
    CommentsContent as cc
ON
    cc.CommentId = c.CommentId
WHERE
    c.OwnerId = 1 
```

不幸的是，这会返回所有行，并预先`CommentsContent`加上它们的数据。`Comments`

我正在寻找以下输出：

```
 CommentId  AuthorId  ParentId  Created              Updated              Content
 -------------------------------------------------------------------------------------
         1         2         0  2013-01-31 01:23:45  2013-01-31 01:23:47  Testing123
         2         2         0  2013-01-31 01:23:45  2013-01-31 01:23:45  Another test 
```

这在单个查询中是否可能而不嵌入嵌套的`SELECT`. 我需要使用`GROUP`从句吗？不过，我听说`GROUP`子句的性能很差。我应该创建一些额外的索引来帮助加快`GROUP`子句的速度吗？

感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T23:30:36.417

不幸的是，MySQL 没有像 SQL Server 和其他一些窗口函数。因此，您需要为此使用子查询：

```
SELECT
    c.CommentId,
    c.AuthorId,
    c.ParentId,
    c.Created,
    cc.Created as Updated,
    cc.Content
FROM Comments as c
JOIN CommentsContent as cc
  ON cc.CommentId = c.CommentId
INNER JOIN
(
  select max(created) MaxDate, commentid
  from CommentsContent
  group by commentid
) cc2
  on cc.created = cc2.maxdate
  and cc.commentid = cc2.commentid
WHERE c.OwnerId = 1 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/be926/9)

# javascript - 有没有办法将 tabview 切换到使用必需属性 HTML5 验证的元素

> ID：14634785
> 
> 赞同：0
> 
> 时间：2013-01-31T20:43:07.720
> 
> 标签：javascript, html, yui

我在我的表单中使用 YUI tabview，最后有一个提交按钮（第 5 个选项卡），问题是验证工作正常，但我看不到弹出消息，因为我在最后一个 tabview（其中包含最终的提交按钮），而不是被检查的表单元素的 tabview（ with `checkValidity`）。

我正在使用这个：http: [//developer.yahoo.com/yui/examples/tabview/frommarkup.html](http://developer.yahoo.com/yui/examples/tabview/frommarkup.html)

这就是它的样子：http: [//jsfiddle.net/D4GmQ/3/](http://jsfiddle.net/D4GmQ/3/)

当我单击第一个选项卡中的第一个提交按钮时，它会显示弹出窗口，但是当我从最后一个选项卡中单击时，它会引发 Javascript 错误。

我的问题是：有没有办法将选项卡更改为包含被检查元素的选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:33:30.637

您收到错误消息：

```
An invalid form control with name='field1' is not focusable. 
```

鉴于您的设计，我认为这不是一个容易解决的问题。我建议控制表单提交并进行自己的验证。您可以依次验证每个选项卡，如果有错误，请关注包含该字段的选项卡。对不起，HTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T19:47:37.003

这是这个问题的解决方案，[jsfiddle](http://jsfiddle.net/D4GmQ/7/)

[您可以在此处](http://jsfiddle.net/D4GmQ/3/)将其与原始问题进行比较。

由于没有自动更改 tabView 的 YUI2 函数，所以想法是添加一个函数来搜索将要验证的输入并激活包含它的 tabView，这样我们就可以看到 html5 弹出消息。

```
 <div id="tab3"><p>Tab Three Content</p>
        <button onclick="ToolData.tabs.selectTab(0);"> submit </button>
    </div> 
```

# ruby-on-rails - Rspec 存根行为

> ID：14634791
> 
> 赞同：1
> 
> 时间：2013-01-31T20:43:28.437
> 
> 标签：ruby-on-rails, testing, rspec, functional-testing

我在存根方面遇到了一些麻烦，我想我一定是误解了它们的工作方式。

存根仅存在于它们创建的上下文中吗？这是我的期望，但根据我的经验，如果我在一个上下文中存根一个方法，它仍然存在于另一个上下文中。

我的控制器测试与此类似：

```
describe '.load_articles' do
  context 'articles' do
    before(:each) do
      Article.stub_chain(:meth1, :meth2).and_return(['article'])
    end
    it 'sets articles' do
      controller.load_articles.should == ['article']
    end

  end
  context 'no articles' do
    before(:each) do
      Article.stub_chain(:meth1, :meth2).and_return([])
    end
    it 'sets article' do
      controller.load_articles.should == []
    end

  end
end 
```

对于第二个示例，当我期待时`controller.load_articles`仍然返回`['article']``[]`

我已经坚持了太久了；任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T03:36:15.273

在每个示例之后清除存根。你可以很容易地证明这一点：

```
class Numero; end

describe Numero do
  context "Uno" do
    before do
      Numero.stub_chain(:meth1, :meth2) { 'uno' }
    end
    it "unos" do
      Numero.meth1.meth2.should == 'uno'
    end
  end
  context "Dos" do
    before do
      Numero.stub_chain(:meth1, :meth2) { 'dos' }
    end
    it "dosses" do
      Numero.meth1.meth2.should == 'dos'
    end
  end
end 
```

# php - ASP.NET 更改会话状态模式

> ID：14634793
> 
> 赞同：2
> 
> 时间：2013-01-31T20:43:31.670
> 
> 标签：php, asp.net, .net, iis-7.5, session-state

我试图在同一台服务器上的 PHP 和 .NET 之间共享会话信息。会话将始终由 .NET 站点创建。根据我的研究，我开始相信会话状态模式“SQLServer”将非常适合此，因为 PHP 可以直接在数据库中检查会话信息。

我的问题是 .NET 应用程序是多年前开发的，并且使用 InProc 会话状态。我没有使用 ASP.NET 的经验。据我所知，我无法测试从 InProc 到 SQLServer 的切换，并且该站点不能关闭！

1) 使用 web.config 将 Session-State 从 InProc 更改为 SQLServer 是否会对旧应用程序造成任何问题？

2）有没有办法对此进行测试，例如将所有文件复制到测试子域？

3) 如果我关闭网站，是否有任何理由无法恢复旧的 web.config 并恢复所有内容。

4) 使用 SQLServer 代替 InProc 会不会在 .NET 端引起任何问题？

5）我还注意到在站点的 IIS 中有一个用于更改会话状态的 UI，使用它或 web.config（或两者）更好吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T00:58:31.473

回答你上面的问题

1.  是的，当更改为 SQLServer 时可能会出现问题，因为 .NET 会话不仅包含登录者等，它还可以保留用户会话信息，例如选择的项目和其他对象。（我对您的特定站点了解得不够多，但是当您从 InProc 迁移到 SQL 时，您需要检查任何将存储在 SQL 中的会话对象也是可序列化的，否则会失败）因此进行了大量测试。

2.  您可以测试，通过将当前在 IIS 中的网站复制到可能是另一台具有 IIS 和 ASP.NET 的机器，并在 web.config 中进行适当的更改，如果您有生产和测试数据库，请将其指向测试，我不会建议使用任何生产数据库。

3.  是的，请确保备份所有内容，包括数据库（如果有）

4.  是 见第 (1) 项

5.  你只需要一个，我只会修改web.config，先备份它。

由于您想实现单点登录，因此还有其他选项可供探索，

*   安全令牌服务（但需要在 .NET 和 PHP 上进行一些代码更改）见[http://social.msdn.microsoft.com/Forums/en-US/Geneva/thread/cc0a32b1-d5e0-4fdb-b369-a6215ca24b73 /](http://social.msdn.microsoft.com/Forums/en-US/Geneva/thread/cc0a32b1-d5e0-4fdb-b369-a6215ca24b73/)
*   集成 Windows 身份验证（仅适用于具有 Windows 登录的 Intranet 上的 IE）注意 - 由于表单身份验证，这不适用于您的情况

# windows - 用户登录 Windows 时保持 jenkins slave 离线

> ID：14634794
> 
> 赞同：6
> 
> 时间：2013-01-31T20:43:39.673
> 
> 标签：windows, jenkins, continuous-integration, jenkins-plugins

当用户开始使用从站时，有什么方法可以配置 Jenkins 以将 Windows 从站标记为离线？

**编辑：**开始使用我的意思是用户登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T16:59:38.950

由于[Jenkins 从站可以注册为 Windows 服务](https://wiki.jenkins-ci.org/display/JENKINS/Installing+Jenkins+as+a+Windows+service)，因此一种方法是确保当前没有登录用户。

可以设想一个定期运行的 Windows 任务，它会检查用户是否已登录，并且：

*   如果有，将*停止*服务。
*   如果没有，（重新）启动相同的 Jenkins 从代理 windows 服务。

要检查谁已登录，请参阅“[从 WindowsService 我如何从 C# 中找到当前登录的用户？](https://stackoverflow.com/questions/7065561/from-windowsservice-how-can-i-find-currently-logged-in-user-from-c) ”以了解一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T08:00:28.217

一种可能的解决方案是使用[Slave Prerequisites Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Slave+Prerequisites+Plugin%20Slave%20Prerequisites%20Plugin)。它允许根据脚本添加工作先决条件：

> 设置要在从节点上运行的脚本，然后才能在它们上运行作业。如果返回非 0 状态，则该节点将被拒绝执行作业，并且将选择另一个节点，或者该作业将返回构建队列，等待可用节点匹配其先决条件。

使用以下 Windows 批处理脚本：

```
python.exe -c "import psutil; assert len(psutil.get_users())==0" 
```

你必须得到[psutil](http://code.google.com/p/psutil/%20psutil)，但你可以用纯 Windows shell 制作一些东西。最明显的缺点是我们正在经历许多系统，而不仅仅是使用那些标记为可用的系统。

# glsl - 在最新的three.js中处理着色器的正确方法是什么？

> ID：14634795
> 
> 赞同：0
> 
> 时间：2013-01-31T20:43:46.073
> 
> 标签：glsl, three.js, webgl

我可以用谷歌搜索的旧示例使用 Three.js 的特定版本。当我试图用最新的例子做一个简单的例子时，它不起作用：

```
function shaders() {
    var vShader = [
        'void main() {',
            'gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);',
        '}'
    ].join('\n');

    var fShader = [
        'void main() {',
            'gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);',
        '}'
    ].join('\n');

    material = new THREE.ShaderMaterial({
        vertexShader: vShader,
        fragmentShader: fShader
    });

    //material = new THREE.MeshBasicMaterial({color: 0x00ff00, wireframe: true});

    geometry = new THREE.SphereGeometry(50, 32, 32);
    mesh = new THREE.Mesh(geometry, material);

    scene.add(mesh);
} 
```

此处提供完整代码清单：http: [//jsfiddle.net/doubleyou/Hhh89/](http://jsfiddle.net/doubleyou/Hhh89/)

请注意，如果您取消注释带有材料分配的注释行，它将起作用。所以，猜猜，我以错误的方式初始化着色器材质。

对于它的价值，Chrome 根本没有向我显示任何错误。即使我使着色器代码无效，这也很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:06:47.917

终于得到了解释。

我一直在使用 CanvasRenderer。应该改用 WebGLRenderer。

# java - 在 Eclipse 中调试 Java 应用程序（Tanuki 服务包装器）

> ID：14634796
> 
> 赞同：2
> 
> 时间：2013-01-31T20:43:45.917
> 
> 标签：java, windows, eclipse, debugging, java-service-wrapper

如何从 Eclipse 中调试包装器（如 Tanuki Java Windows 服务包装器）中包含的 Java 应用程序？我知道有一个选项可以在包装器中设置 debug=true 并运行它。但是如果我想进行实时调试（步入/退出），是否有选项/方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:41:14.357

您仍然可以使用其进程 ID 将远程调试器从 eclipse 附加到进程。

# xcode - 将 NSArray 转换为 NSString 会崩溃？

> ID：14634800
> 
> 赞同：0
> 
> 时间：2013-01-31T20:44:07.067
> 
> 标签：xcode, json, crash, nsstring, nsarray

试图获得一个标签来显示从一些 JSON 中提取的数据......

```
 - (void)connectionDidFinishLoading:(NSURLConnection *)connection
    {
        NSError *myError = nil;
        NSDictionary *res = [NSJSONSerialization JSONObjectWithData:jsonresponse         options:NSJSONReadingMutableLeaves  error:&myError];
        NSArray *results =  [res objectForKey:@"current_observation"];
        NSArray *cur = [results valueForKey:@"weather"];
        NSArray *tmp = [results valueForKey:@"temp_f"];
        NSString * tmpstring = [[tmp valueForKey:@"description"] componentsJoinedByString:@""];
        temp.text = tmpstring;
    } 
```

当它运行该代码时，它会吐出这个......

```
2013-01-31 15:38:03.319 Places[4659:907] -[__NSCFString componentsJoinedByString:]: unrecognized selector sent to instance 0x5680d0
2013-01-31 15:38:03.321 Places[4659:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString componentsJoinedByString:]: unrecognized selector sent to instance 0x5680d0'
*** First throw call stack:
(0x32b3e3e7 0x3a82f963 0x32b41f31 0x32b4064d 0x32a98208 0x413b 0x3347a915 0x333ba769 0x333ba685 0x3281b64f 0x3281ad33 0x32843013 0x32a84acd 0x32843473 0x327a7461 0x32b138f7 0x32b1315d 0x32b11f2f 0x32a8523d 0x32a850c9 0x3666333b 0x349a12b9 0x20c9 0x2050)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:52:57.563

`-description`是继承自 NSObject 的方法，是 NSObject 协议的一部分；它返回`NSString *`带有对象的一些描述的 a。所有类都可以覆盖它以返回任意 NSString。

`-valueForKey:``-description`将返回一个数组，其中包含在其所有对象上调用该方法的结果。这似乎不是这里的情况，因为`[tmp valueForKey:@"description"]`似乎返回 a`NSString *`而不是数组。我猜`tmp`这不是一个数组，因此您的应用程序崩溃了。

如果不知道 JSON 数据实际上是什么，就不可能说出这里出了什么问题。请用一些示例数据更新您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T12:38:50.697

**description**为从 NSObject 继承的所有对象返回一个 NSString。NSString 及其祖先都没有实现**componentsJoinedByString**。如果要使用**componentsJoinedByString**，则需要将其直接发送到 NSArray 或其他实现该方法的集合对象。使用 Objective-C 中的嵌套消息传递，您需要确定返回的对象类是什么。如果您不确定，请将您的消息取消嵌套，这样您就会看到它是什么。如果您在某些情况下无法确定，最好取消嵌套消息并使用某种方法进行验证，例如

```
if ([object respondsToSelector:@selector(someSelector:)]) {
     // do stuff here
} else {
     // some alternative
} 
```

# mysql - 如何从 MySQL 中的过程返回准备好的查询结果

> ID：14634805
> 
> 赞同：1
> 
> 时间：2013-01-31T20:44:21.477
> 
> 标签：mysql, stored-procedures

我有一个用例需要在存储过程中创建一个具有唯一名称的临时表。我发现使用动态表名执行查询的唯一方法是准备查询：

```
SET @d=CONCAT('SELECT * FROM table_', case); 
PREPARE q from @d;
EXECUTE q; 
```

这工作得很好，但我不知道如何返回结果集。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:50:05.257

您无需执行任何额外操作即可返回结果集。执行准备好的查询就足够了。该查询执行的结果集将自动成为存储过程的结果集。

```
mysql> DELIMITER !!
mysql> CREATE PROCEDURE p()
    -> BEGIN
    ->  SET @sql := CONCAT('SELECT ', '123 as foo');
    ->  PREPARE q FROM @sql;
    ->  EXECUTE q;
    -> END!!
mysql> DELIMITER ;
mysql> CALL p;
+-----+
| foo |
+-----+
| 123 |
+-----+ 
```

* * *

回复您的评论：可能是这个错误：[http](http://bugs.mysql.com/bug.php?id=20028) ://bugs.mysql.com/bug.php?id=20028已修复。
您可以通过升级来解决问题。

> 在 5.0.30（不是 5.0.29）、5.1.13 变更日志中注明。
> 
> 使用 SQL_MODE=TRADITIONAL，MySQL 错误地因存储例程和触发器中的警告而中止。

另请参阅[https://dba.stackexchange.com/questions/7499/function-returning-no-data-zero-rows-fetched-selected-or-processed-in-mysq](https://dba.stackexchange.com/questions/7499/function-returning-no-data-zero-rows-fetched-selected-or-processed-in-mysq)

# php - PHP 使用 AJAX 或 POST 将 var 发送到 AS3

> ID：14634808
> 
> 赞同：1
> 
> 时间：2013-01-31T20:44:32.080
> 
> 标签：php, actionscript-3, flash

我发现的所有教程都使用了一些带有 echo 的文件 xml、txt 或 php。将 vars 提供给 AS3 有没有办法在没有回显或文件的情况下做到这一点。假设我以某种方式使用 AS3 从 flash 中查询 PHP page.php 并处理来自 page.php 的响应

```
var loader:URLLoader = new URLLoader();   
var request:URLRequest = new  URLRequest("http://mysite.com/test.php");           
loader.load(request);

loader.addEventListener(Event.COMPLETE, completeHandler);
loader.addEventListener(IOErrorEvent.IO_ERROR, loaderIOErrorHandler);
loader.dataFormat = URLLoaderDataFormat.VARIABLES;

function loaderIOErrorHandler(event:IOErrorEvent):void{
    trace("ioErrorHandler: " + event);
}

function completeHandler (event:Event):void {

    this.text1.appendText(loader.data.mykey); //Whatever dataField1 you saved as
} 
```

那行得通，但我如何让它查询 php 并处理它的响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:54:51.633

你必须在php端做

```
var request:URLRequest = new  URLRequest("http://mysite.com/test.php?pid=984") 
```

等等。基本上，你所能做的就是用 flash 进行类似 AJAX 的 get 请求，然后将数据返回到 flash。

# wordpress - 从 wp-includes 重定向到 404 错误页面

> ID：14634813
> 
> 赞同：1
> 
> 时间：2013-01-31T20:44:42.610
> 
> 标签：wordpress, .htaccess, mod-rewrite, redirect

我的目标是在访问 wp-includes 目录中的任何内容时将用户重定向到自定义 404 页面。我试图隐藏我正在运行 WordPress 的任何证据并阻止任何黑客。

我不想要 Apache 默认设置的默认 Forbidden 消息，因此请改用 WordPress 404.php 模板之一。

我已经尝试过 HTACCESS 文件方法，但它会影响任何 css、jpg 和 js 文件。你能帮忙的话，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:49:01.460

您应该阅读 wordpress 文档。**他们在Hardening Wordpress**上有一整页。请参阅**保护 wp-includes 部分：**

[http://codex.wordpress.org/Hardening_WordPress#Securing_wp-includes](http://codex.wordpress.org/Hardening_WordPress#Securing_wp-includes)

```
# Block the include-only files.
RewriteEngine On
RewriteBase /
RewriteRule ^wp-admin/includes/ - [F,L]
RewriteRule !^wp-includes/ - [S=3]
RewriteRule ^wp-includes/[^/]+\.php$ - [F,L]
RewriteRule ^wp-includes/js/tinymce/langs/.+\.php - [F,L]
RewriteRule ^wp-includes/theme-compat/ - [F,L]

# BEGIN WordPress 
```

# objective-c - How does XCode find classes without headers?

> ID：14634815
> 
> 赞同：0
> 
> 时间：2013-01-31T20:44:46.723
> 
> 标签：objective-c, header-files, declaration

I'm trying to get rid of unneeded headers in my XCode project by taking them out one at a time and seeing if they cause a compiler error.

Sometimes, I can take out a header that declares a class, and Xcode still lets me use it.

For example, I took out `#import "Chartboost.h"`, but there was no error on the line `Chartboost *cb = [Chartboost sharedChartboost];`

Option-clicking on `Chartboost` says it is declared in `NSObject.h`

How can my code still `compile` when I'm not importing the header file!?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:58:21.150

You are importing Chartboost.h, but through one of the other imported headers. This way you don't need to clutter up every class header with an endless number of header-files. Too bad XCode isn't better at telling us which headers are already available...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:54:00.277

If you're not importing Chartboost.h then **Chartboost *cb = [Chartboost sharedChartboost];** will most definitely give an error.The only possible explanation is that you might be importing some other file which in turn might be importing Chartboost.

# c# - WPF 中的 Microsoft Charting 可滚动 LineSeries

> ID：14634817
> 
> 赞同：0
> 
> 时间：2013-01-31T20:44:54.107
> 
> 标签：c#, wpf, wpftoolkit, microsoft-chart-controls

我正在使用 System.Windows.Controls.DataVisualization.Charting 在 WPF 中创建折线图它在显示数据时工作正常。但是，根据访问的数据，它会变得非常混乱和混乱。如果数据太宽，图表是否可以向右滚动？

这是我的图表 xaml

```
 <DVC:Chart Canvas.Top="80" Grid.Column="1" Grid.Row="0" Canvas.Left="10" Name="mcChart" Background="LightSteelBlue" Height="676">

                <DVC:Chart.Series>
                    <DVC:LineSeries Title="File Count" IndependentValueBinding="{Binding Path=Key}"
                          DependentValueBinding="{Binding Path=Value}"  >

                    </DVC:LineSeries>

                </DVC:Chart.Series>

            </DVC:Chart> 
```

从 CS 代码中，我只是将图形的数据设置为 KeyValuePair 的列表

```
 ((LineSeries)mcChart.Series[0]).ItemsSource = data.ToArray(); 
```

这是显示明显问题的图表。

![线形图](../Images/1c9c762c70b1dac03b16cb6fa5b92e7b.png)

如果我无法滚动它，另一种选择是删除 x 轴标签。这是我的第二选择，但我也不知道该怎么做。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:17:01.913

```
Remove the x axis labels 
```

可以使用轴的**AxisLabelStyle来做到这一点。**

```
 void DrawLineChart()
    {
      var line1 = new LineSeries();
      line1.IndependentAxis = new LinearAxis(){Orientation = AxisOrientation.X,AxisLabelStyle = GetHidenAxisStyle()};
    }

    private Style GetHidenAxisStyle()
    {
        Style style = new Style(typeof(AxisLabel));
        Setter st2 = new Setter(AxisLabel.BorderBrushProperty,
                                    new SolidColorBrush(Colors.White));
        Setter st3 = new Setter(AxisLabel.BorderThicknessProperty, new Thickness(0));
        Setter st4 = new Setter(AxisLabel.TemplateProperty, null);
        style.Setters.Add(st2);
        style.Setters.Add(st3);
        style.Setters.Add(st4);
        return style;
    } 
```

# jquery - 滚动到顶部时出现 Scrollorama 故障

> ID：14634818
> 
> 赞同：1
> 
> 时间：2013-01-31T20:44:56.883
> 
> 标签：jquery

[http://europeanbob.co.uk/new/about.html](http://europeanbob.co.uk/new/about.html)

我正在使用 3d 变换来创建人造立方体，当向下滚动时它们会下降到位，但是如果向上滚动太快，它们就不会返回到页面顶部之外。有没有什么办法解决这一问题？

提前致谢！

# css - CSS - 移动图像调整大小

> ID：14634823
> 
> 赞同：0
> 
> 时间：2013-01-31T20:45:08.990
> 
> 标签：css

我目前使用的方法是添加`<img src="A-Button-Image.png" style="width:100%;">`HTML 表，图像大小可以根据屏幕大小进行缩放。

但是，**A-Button-Image.png**包含两个图像，悬停和正常状态。因此，我想使用背景位置来触发翻转效果？有没有办法使用 CSS 来控制背景位置但又不会失去图像调整大小的能力？我知道还有另一种解决方案是 onmouseover & onmouseout，但我还是更喜欢 CSS。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:24:53.847

有`background-size`你的需要的属性。只需将其设置为 200%，您将同时获得可扩展性和 spriteability。

[自己看](http://jsfiddle.net/XCUTE/)。

你甚至可以在你的精灵中使用两个以上的图像。您只需将多个图像乘以 100% 并将结果放入`background-size`属性中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:45:05.473

解决方案是将 background-size 设置为 100% 并将 padding-bottom 设置为百分比。

# android - Maven 发布：perform 无法识别密钥库参数

> ID：14634825
> 
> 赞同：3
> 
> 时间：2013-01-31T20:45:15.767
> 
> 标签：android, maven, maven-archetype, jarsigner, android-maven-plugin

我已经使用[android-release 原型](https://github.com/akquinet/android-archetypes)生成了我的项目。
在其文档中表明要在文件中添加`android-release`配置`settings.xml`文件。

我的`~/.m2/settings.xml`样子是这样的：

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 
  http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <profiles>   
    <profile>
      <id>android-release</id>
        <properties>
            <sign.keystore>absolute path</sign.keystore>
            <sign.alias>my_alias</sign.alias>
            <sign.storepass>pass</sign.storepass>
            <sign.keypass>pass</sign.keypass>
        </properties>
    </profile>
  </profiles>
</settings> 
```

我的父`pom.xml`文件几乎与原型（版本 1.0.8）生成的相同：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
  http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>myapp-android</groupId>
    <artifactId>myapp-android-parent</artifactId>
    <version>1.1-SNAPSHOT</version>
    <packaging>pom</packaging>
    <name>myapp-android - Parent</name>

    <modules>
        <module>myapp-android</module>
        <module>myapp-android-it</module>
    </modules>

    <scm>
        <url>....</url>
        <connection>....</connection>
        <developerConnection>....</developerConnection>
        <tag>HEAD</tag>
    </scm>

    <properties>
        <platform.version>4.1.1.4</platform.version>
        <android.dex.optimize>false</android.dex.optimize>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <repositories>
        <repository>
            <id>ignition-releases</id>
            <url>http://nexus.qype.com/content/repositories/releases</url>
        </repository>
        <repository>
            <id>central</id>
            <url>http://repo1.maven.org/maven2</url>
        </repository>
        <repository>
            <id>com.jakewharton</id>
            <url>http://r.jakewharton.com/maven/release</url>
        </repository>
    </repositories>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.google.android</groupId>
                <artifactId>android</artifactId>
                <version>${platform.version}</version>
                <scope>provided</scope>
            </dependency>
            <dependency>
                <groupId>com.google.android</groupId>
                <artifactId>android-test</artifactId>
                <version>${platform.version}</version>
                <scope>provided</scope>
            </dependency>
            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>4.10</version>
                <scope>provided</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.5.0</version>
                    <inherited>true</inherited>
                    <configuration>
                        <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                        <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                        <resourceDirectory>${project.basedir}/res</resourceDirectory>
                        <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                        <sdk>
                            <platform>16</platform>
                        </sdk>
                        <undeployBeforeDeploy>false</undeployBeforeDeploy>
                    </configuration>
                </plugin>
                <plugin>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.5.1</version>
                    <inherited>true</inherited>
                    <configuration>
                        <source>1.6</source>
                        <target>1.6</target>
                    </configuration>
                </plugin>
                <plugin>
                    <artifactId>maven-enforcer-plugin</artifactId>
                    <version>1.0</version>
                </plugin>
                <plugin>
                    <artifactId>maven-release-plugin</artifactId>
                    <version>2.3</version>
                    <configuration>
                        <autoVersionSubmodules>true</autoVersionSubmodules>
                        <!-- We need this since our pom.xml is not inside repo root -->
                        <arguments>-f ./android/pom.xml</arguments>
                    </configuration>
                </plugin>
                <plugin>
                    <artifactId>maven-jarsigner-plugin</artifactId>
                    <version>1.2</version>
                    <inherited>true</inherited>
                    <configuration>
                        <removeExistingSignatures>true</removeExistingSignatures>
                        <archiveDirectory />
                        <archive>${project.build.directory}/${project.build.finalName}.${project.packaging}</archive>
                        <verbose>true</verbose>
                        <certs>true</certs>
                        <keystore>${sign.keystore}</keystore>
                        <alias>${sign.alias}</alias>
                        <storepass>${sign.storepass}</storepass>
                        <keypass>${sign.keypass}</keypass>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>com.pyx4me</groupId>
                    <artifactId>proguard-maven-plugin</artifactId>
                    <version>2.0.4</version>
                    <dependencies>
                        <dependency>
                            <groupId>net.sf.proguard</groupId>
                            <artifactId>proguard</artifactId>
                            <version>4.4</version>
                            <scope>runtime</scope>
                        </dependency>
                    </dependencies>
                    <configuration>
                        <proguardVersion>4.4</proguardVersion>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>

    <profiles>
        <profile>
            <id>release</id>
            <activation>
                <property>
                    <name>performRelease</name>
                    <value>true</value>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                        <artifactId>android-maven-plugin</artifactId>
                        <version>3.5.0</version>
                        <configuration>
                            <release>true</release>
                        </configuration>
                    </plugin>

                    <plugin>
                        <artifactId>maven-enforcer-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>enforce-signing-properties</id>
                                <goals>
                                    <goal>enforce</goal>
                                </goals>
                                <configuration>
                                    <rules>
                                        <requireProperty>
                                            <property>sign.keystore</property>
                                            <message>The 'sign.keystore' property is missing. It must contain the path to the
                                                keystore used to sign the application.
                                            </message>
                                        </requireProperty>
                                        <requireFilesExist>
                                            <files>
                                                <file>${sign.keystore}</file>
                                            </files>
                                            <message>The 'sign.keystore' property does not point to a file. It must contain the
                                                path to the keystore used to sign the application.
                                            </message>
                                        </requireFilesExist>
                                        <requireProperty>
                                            <property>sign.alias</property>
                                            <message>The 'sign.alias' property is missing. It must contain the key alias used to
                                                sign the application.
                                            </message>
                                        </requireProperty>
                                        <requireProperty>
                                            <property>sign.storepass</property>
                                            <message>The 'sign.storepass' property is missing. It must contain the password of
                                                the keystore used to sign the application.
                                            </message>
                                        </requireProperty>
                                        <requireProperty>
                                            <property>sign.keypass</property>
                                            <message>The 'sign.keypass' property is missing. It must contain the password of the
                                                key used to sign the application.
                                            </message>
                                        </requireProperty>
                                    </rules>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>linux</id>
            <activation>
                <os>
                    <family>unix</family>
                </os>
            </activation>
            <properties>
                <rt.jar.path>${java.home}/jre/lib/rt.jar</rt.jar.path>
                <jsse.jar.path>${java.home}/jre/lib/jsse.jar</jsse.jar.path>
            </properties>
        </profile>
        <!-- mac profile has to be after unix since running on mac will trigger both -->
        <profile>
            <id>mac</id>
            <activation>
                <os>
                    <family>mac</family>
                </os>
            </activation>
            <properties>
                <!-- absolute path -->
                <!--<rt.jar.path>/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Classes/classes.jar</rt.jar.path> -->
                <!-- or with JAVA_HOME /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/ -->
                <rt.jar.path>${java.home}/../Classes/classes.jar</rt.jar.path>
                <jsse.jar.path>${java.home}/../Classes/jsse.jar</jsse.jar.path>
            </properties>
        </profile>
        <profile>
            <id>windows</id>
            <activation>
                <os>
                    <family>windows</family>
                </os>
            </activation>
            <properties>
                <rt.jar.path>${java.home}/jre/lib/rt.jar</rt.jar.path>
                <jsse.jar.path>${java.home}/jre/lib/jsse.jar</jsse.jar.path>
            </properties>
        </profile>
    </profiles>

</project> 
```

当我运行时`mvn release:perform`，它似乎找不到有关要使用的密钥库的信息：

```
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Building myapp-android - Parent 1.0
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] 
[INFO] [INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-signing-properties) @ myapp-android-parent ---
[INFO] [WARNING] Rule 0: org.apache.maven.plugins.enforcer.RequireProperty failed with message:
[INFO] The 'sign.keystore' property is missing. It must contain the path to the
[INFO]                                                 keystore used to sign the application.
[INFO] [WARNING] Rule 1: org.apache.maven.plugins.enforcer.RequireFilesExist failed with message:
[INFO] The 'sign.keystore' property does not point to a file. It must contain the
[INFO]                                                 path to the keystore used to sign the application.
[INFO] Some required files are missing:
[INFO] (an empty filename was given and allowNulls is false)
[INFO] 
[INFO] [WARNING] Rule 2: org.apache.maven.plugins.enforcer.RequireProperty failed with message:
[INFO] The 'sign.alias' property is missing. It must contain the key alias used to
[INFO]                                                 sign the application.
[INFO] [WARNING] Rule 3: org.apache.maven.plugins.enforcer.RequireProperty failed with message:
[INFO] The 'sign.storepass' property is missing. It must contain the password of
[INFO]                                                 the keystore used to sign the application.
[INFO] [WARNING] Rule 4: org.apache.maven.plugins.enforcer.RequireProperty failed with message:
[INFO] The 'sign.keypass' property is missing. It must contain the password of the
[INFO]                                                 key used to sign the application.
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Reactor Summary:
[INFO] [INFO] 
[INFO] [INFO] myapp-android - Parent ......................... FAILURE [0.577s]
[INFO] [INFO] myapp-android - Application .................... SKIPPED
[INFO] [INFO] myapp-android-it - Integration tests ........... SKIPPED
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] BUILD FAILURE
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [INFO] Total time: 1.862s
[INFO] [INFO] Finished at: Thu Jan 31 21:24:41 CET 2013
[INFO] [INFO] Final Memory: 7M/81M
[INFO] [INFO] ------------------------------------------------------------------------
[INFO] [ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:1.0:enforce (enforce-signing-properties) on project myapp-android-parent: Some Enforcer rules have failed. Look above for specific messages explaining why the rule failed. -> [Help 1]
[INFO] [ERROR] 
[INFO] [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[INFO] [ERROR] Re-run Maven using the -X switch to enable full debug logging.
[INFO] [ERROR] 
[INFO] [ERROR] For more information about the errors and possible solutions, please read the following articles:
[INFO] [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] myapp-android - Parent ......................... FAILURE [22.389s]
[INFO] myapp-android - Application .................... SKIPPED
[INFO] myapp-android-it - Integration tests ........... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 23.799s
[INFO] Finished at: Thu Jan 31 21:24:41 CET 2013
[INFO] Final Memory: 9M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.3:perform (default-cli) on project myapp-android-parent: Maven execution failed, exit code: '1' -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

我也尝试将密钥库参数传递给`release:perform`

```
mvn release:perform -Dsign.keystore=/path/to/keystore \
                    -Dsign.alias=key-alias \
                    -Dsign.storepass=keystore-password \
                    -Dsign.keypass=key-password 
```

但是效果一样。

关于如何使它起作用的任何想法？这可能很愚蠢，但我是 Maven 的初学者，我无法弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T11:44:00.777

感谢[这个讨论](https://stackoverflow.com/questions/11767664/process-forked-out-of-maven-releaseperform-plugin-ignores-users-settings-xml)，我发现问题是由 Maven 3.0.3 错误引起的。更新到 Maven 3.0.4 完全解决了我的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T21:35:01.117

Maven release:perform 目标在不同的上下文中执行，并且您的 java 参数不会传播。

尝试使用`-Darguments`选项。例如：`mvn release:perform -Darguments="-Dsign.keystore=/path/to/keystore -Dsign.alias=key.alias"`等等

手册页上提供了该目标的其他选项：[http ://maven.apache.org/maven-release/maven-release-plugin/perform-mojo.html](http://maven.apache.org/maven-release/maven-release-plugin/perform-mojo.html)

# vb.net - VB.Net 重复托盘图标

> ID：14634826
> 
> 赞同：2
> 
> 时间：2013-01-31T20:45:21.797
> 
> 标签：vb.net, .net-4.0, crystal-reports, system-tray

我正在制作一个 VB.Net 2010 应用程序，我的应用程序中有一个调用 Web 服务的后台工作人员。如果 Web 服务返回数据，则后台服务会调用 Crystal 报表，然后将其打印出来。此时系统托盘图标重复。在 Web 服务运行结束时，后台工作人员执行 .Dispose() 。如果 Web 服务没有返回任何数据，则系统不会复制该图标。

你能帮忙的话，我会很高兴。谢谢！

后台工作人员代码：

```
 Private Sub bwCheckForAlarms_DoWork(sender As System.Object, e As System.ComponentModel.DoWorkEventArgs) Handles bwCheckForAlarms.DoWork
    Try
        Try
            'Checks for Alarms
            If Not e.Cancel Then
                CheckForAlarms(e)
            Else
                WrightRegistry("SeasionToken", "")
                bwCheckForAlarms.Dispose()
            End If

        Catch ex1 As Exception
            AddEventLogError(1013, ex1.ToString)
        End Try
        Try
            'If on Checks for Announcesments
            If Not e.Cancel Then
                If ReadRegistry("PrintAnnouncements") = True Then
                    CheckForMessages(e)
                End If
            Else
                WrightRegistry("SeasionToken", "")
                bwCheckForAlarms.Dispose()
            End If

        Catch ex2 As Exception
            AddEventLogError(1913, ex2.ToString)
        End Try
        Try
            'Checks for Systems Alerts. NO shut off. 
            If Not e.Cancel Then
                CheckForSystemMessages(e)
            Else
                WrightRegistry("SeasionToken", "")
                bwCheckForAlarms.Dispose()
            End If

        Catch ex3 As Exception
            AddEventLogError(1953, ex3.ToString)
        End Try

    Catch ex0 As Exception
        AddEventLogError(1013, ex0.ToString)
    Finally
        bwCheckForAlarms.Dispose()
    End Try 
```

报告代码。

```
 Public Function GenAlarmReportPrintOut(ByVal objAlarmNumber As String, ByVal objAlarmDateTime As String, ByVal objAlarmType As String, ByVal objAlarmAddress As String, ByVal objAlarmStatus As String, ByVal objAlarmCrossstreets As String, ByVal objStationAddress As String, ByVal objNotes As String, ByVal objDeptName As String, ByVal objProvidedby As String, ByVal objCommonName As String, ByVal objLogo As System.Drawing.Bitmap, ByVal objPDFFlag As Boolean, ByVal objAlarmDiscrition As String, ByVal objCopys As Integer) As Boolean
    Dim ds As New dsReporting
    Dim t As DataTable = ds.Tables.Add("Alarms")
    Dim objRpt As New crpAlarmsPrnOutWithNaritive
    Dim objPath As String
    Dim objTimeStamp As String = Replace(DateTime.Now.ToString, "/", "_")
    Dim r As DataRow
    objTimeStamp = Replace(objTimeStamp, ":", "_")
    'Sets up the Datatable
    Try
        Try
            'check to see if their is a printer. 
            If ReadRegistry("SelectedPrinter") = "" Then
                AddEventLogWarning(1006, "No printer was selected")
                Return False
            End If

        Catch ex0 As Exception
            AddEventLogError(1006, ex0.ToString)
            Return False
        End Try

        Try
            t.Columns.Add("AlarmNumber", Type.GetType("System.String"))
            t.Columns.Add("AlarmDateTime", Type.GetType("System.String"))
            t.Columns.Add("AlarmType", Type.GetType("System.String"))
            t.Columns.Add("AlarmAddress", Type.GetType("System.String"))
            t.Columns.Add("AlarmCross", Type.GetType("System.String"))
            t.Columns.Add("AlarmStatus", Type.GetType("System.String"))
            t.Columns.Add("TurnByTurn", Type.GetType("System.String"))
            t.Columns.Add("Notes", Type.GetType("System.String"))
            t.Columns.Add("DeptName", Type.GetType("System.String"))
            t.Columns.Add("ProvidedBy", Type.GetType("System.String"))
            t.Columns.Add("CommonName", Type.GetType("System.String"))
            t.Columns.Add("AlarmDiscrition", Type.GetType("System.String"))
            t.Columns.Add("Logo", System.Type.GetType("System.Byte[]"))
            t.Columns.Add("AlarmGmap", System.Type.GetType("System.Byte[]"))
            t.Columns.Add("Units", Type.GetType("System.String"))
            t.Columns.Add("Naritive", Type.GetType("System.String"))
        Catch ex1 As Exception
            AddEventLogError(1005, ex1.ToString)
            Return False
        End Try
        'Adds Data to table
        Try

            r = t.NewRow()
            r("AlarmNumber") = objAlarmNumber
            r("AlarmDateTime") = objAlarmDateTime
            r("AlarmCross") = "Cross Street: " & objAlarmCrossstreets
            r("AlarmStatus") = "Status: " & objAlarmStatus
            r("AlarmType") = "Alarm Type: " & objAlarmType
            r("AlarmDiscrition") = "Reported Alarm: " & objAlarmDiscrition
            r("DeptName") = objDeptName
            r("ProvidedBy") = objProvidedby

            r("Notes") = "Notes: " & objNotes

            If Not objCommonName = " " Then
                r("CommonName") = "Common Name: " & objCommonName
            Else
                r("CommonName") = objCommonName
            End If

            r("Logo") = ToByteArray(objLogo)
            If LCase(objAlarmAddress) = "demo" Then
                r("AlarmAddress") = "Address: " & "xxx xxxxxx xxxxxxxx, xx xxxxx"
                r("AlarmGmap") = ToByteArray(GetGmap(GetGeoCodeFromGoogle("76 old Glenham RD Glenham, NY"), 5040, 5160, 18, False))
                r("TurnByTurn") = GetDrivingDirectionFromGoogle("901 main st fishkill, ny 12524", "76 old Glenham RD Glenham, NY")
            Else
                r("TurnByTurn") = GetDrivingDirectionFromGoogle(objStationAddress, objAlarmAddress)
                r("AlarmAddress") = "Address: " & objAlarmAddress
                r("AlarmGmap") = ToByteArray(GetGmap(GetGeoCodeFromGoogle(objAlarmAddress), 5040, 5160, 18, False))
            End If

            '***********************************
            'Just here to fill the Datatable with a null
            '****************************************************************************

            r("Naritive") = ""
            r("Units") = ""

            '****************************************************************************

            t.Rows.Add(r)
        Catch ex2 As Exception
            AddEventLogError(1006, ex2.ToString)
            Return False
        End Try
        Try

            objRpt.SetDataSource(ds.Tables(1))
            objRpt.PrintOptions.PrinterName = ReadRegistry("SelectedPrinter")
            objRpt.PrintToPrinter(objCopys, False, 0, 0)

        Catch ex2 As Exception
            AddEventLogError(1007, ex2.ToString)
            Return False
        End Try

        Try
            'Save as a pdf for uploading later. 
            If objPDFFlag Then
                objPath = My.Computer.FileSystem.SpecialDirectories.CurrentUserApplicationData & "\" & objTimeStamp & ".pdf"
                objRpt.ExportToDisk(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat, objPath)
                frmMain.ExportedCalls.Add(objPath)
            End If
        Catch ex3 As Exception
            AddEventLogError(1008, ex3.ToString)
            Return False
        End Try
        Return True
    Catch ex4 As Exception
        AddEventLogError(1009, ex4.ToString)
        Return False
    Finally
        ds.Dispose()
        t.Dispose()
        objRpt.Dispose()
        objPath = Nothing
        r = Nothing
    End Try
End Function 
```

# html - 如何将屏幕分成2个div并与手机兼容？

> ID：14634833
> 
> 赞同：1
> 
> 时间：2013-01-31T20:45:47.300
> 
> 标签：html, mobile, responsive

我正在使用 Joomla 3 并编辑应用程序并尝试使其与手机兼容。我正在使用带有 2 个 div 的 div 容器，它将充当列，例如：

```
<div>
<div style="float:left; max-width:50%;">code for left</div>
<div style="float:right; max-width:50%;">code for right</div>
</div> 
```

这对于任何手机来说都是可怕的，我正在尝试使用 iPhone。似乎第二个 div 内生成的内容超出了可用的屏幕大小或 div 宽度，然后溢出。

有什么方法可以在手机上分屏并在**手机**上的“左div”下方显示“右div”？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:54:55.283

您需要使用媒体查询。

```
/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

示例： http: [//jsfiddle.net/Svqt5/](http://jsfiddle.net/Svqt5/) （调整浏览器窗口大小以查看媒体查询工作）

来源：[http ://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# java - Jersey + Guice + Tomcat 在使用根目录以外的其他内容时产生 404

> ID：14634834
> 
> 赞同：0
> 
> 时间：2013-01-31T20:45:53.497
> 
> 标签：java, tomcat, jersey, guice

我有一个看起来像这样的资源：

```
@Path("/Resources/Console")
public class ConsoleResource {

    @POST
    @Consumes({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
    @Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
    public String post(/* */) {
        /* */
    }

} 
```

每当我的 JerseyServletModule 配置如下时，服务就会工作：

```
@Override
protected void configureServlets() {
    bind(ConsoleResource.class);

    bind(MessageBodyReader.class).to(JacksonJsonProvider.class);
    bind(MessageBodyWriter.class).to(JacksonJsonProvider.class);

    serve("/*").with(GuiceContainer.class);
} 
```

但是像 index.html 这样的东西没有。更改`"/*"`为`"/Resources/*"`导致 index.html 之类的东西再次起作用，但是`ConsoleResource`' 的`@POST`方法不起作用（每当我访问 404 时，我都会得到一个 404 `/Resources/Console`）。我假设我想让后者工作（像[这样](https://stackoverflow.com/questions/9097238/jersey-guice-using-non-root-request-paths)）。想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T22:43:18.343

问题最终是服务器通过各种过滤器运行静态内容等等。通过将 web.xml 文件编辑为以下内容：

```
<filter>
    <filter-name>guiceFilter</filter-name>
    <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>guiceFilter</filter-name>
    <url-pattern>/Resources/*</url-pattern>
</filter-mapping> 
```

并遵守我的资源`/Resources/`作为其路径前缀的约定，静态内容通过 Guice 过滤器。

# c++ - C++/Linux：未定义对 typeinfo 的引用，但虚拟方法似乎没问题

> ID：14634836
> 
> 赞同：0
> 
> 时间：2013-01-31T20:46:06.083
> 
> 标签：c++, linux, exception, g++

我的项目中的所有异常都有一个基类。它是这样实现的：

异常.hpp

```
class Exception : public std::exception
{
public:

    ELS_EXPORT_SYMBOL Exception(void) throw();
    ELS_EXPORT_SYMBOL explicit Exception(const std::string& what) throw();
    ELS_EXPORT_SYMBOL Exception(const char* format, ...) throw()
            ELS_PRINTF_FUNC(2, 3);
    ELS_EXPORT_SYMBOL Exception(const Exception& other) throw();
    ELS_EXPORT_SYMBOL Exception& operator =(const Exception& other)
            throw();
    ELS_EXPORT_SYMBOL virtual ~Exception(void) throw();

    ELS_EXPORT_SYMBOL virtual const char* what(void) const throw();

protected:

    ELS_EXPORT_SYMBOL void _M_setWhat(const char* format, ::va_list va)
        throw();

private:

    std::string _M_what;
};

#define ELS_EXC_VA_SET_WHAT(FORMAT)                                         \
    do                                                                      \
    {                                                                       \
        ::va_list va;                                                       \
        ::va_start(va, FORMAT);                                             \
        this->_M_setWhat(FORMAT, va);                                       \
        ::va_end(va);                                                       \
    }                                                                       \
    while (false) 
```

异常.cpp

```
Exception::Exception(void) throw()
    : std::exception(),
      _M_what("Exception")
{

}

Exception::Exception(const std::string& what) throw()
    : std::exception(),
      _M_what(what.empty() ? "Exception" : what)
{

}

Exception::Exception(const char* format, ...) throw()
    : std::exception(),
      _M_what()
{
    ELS_EXC_VA_SET_WHAT(format);
}

Exception::Exception(const Exception& other) throw()
    : std::exception(other),
      _M_what(other._M_what)
{

}

Exception& Exception::operator =(const Exception& other) throw()
{
    std::exception::operator =(other);
    this->_M_what = other._M_what;
    return *this;
}

Exception::~Exception(void) throw()
{

}

const char* Exception::what(void) const throw()
{
    return this->_M_what.c_str();
}

void Exception::_M_setWhat(const char* format, ::va_list va) throw()
{
    static const size_t BUFSIZE = 512;

    char buf[BUFSIZE];

    ::memset(buf, 0, BUFSIZE);
    ::vsnprintf(buf, BUFSIZE, format, va);
    this->_M_what = std::string(buf);
} 
```

这些文件是使用以下选项编译的共享库的一部分：

```
-Wall -fPIC -O2 -D_GNU_SOURCE -fvisibility=hidden -rdynamic -Wl,-E 
```

库本身编译没有任何问题，但是当我尝试编译二进制文件并将其链接到它时，我收到以下错误：

```
Main.cpp:(.text+0x297): undefined reference to `typeinfo for els::except::Exception' 
```

我用谷歌搜索了一下，常见的答案是要么实现所有虚拟方法，要么使它们成为纯方法。我在这里看不到这个问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:05:25.813

好的，我明白了 - 我必须让整个班级可见 - 类 ELS_EXPORT_SYMBOL 异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:56:12.193

当 .so 文件与 C++ 标准库静态链接时，使用 RTTI 在 Linux 上会出现问题。在一个 .so 中实例化的类在另一个 .so 中不可用于自省，因为它们具有不同的 RTTI 表（因为每个 .so 都有自己的 C++ 运行时副本，由于静态链接）。

您有 2 个选项： 1\. 在所有程序部分使用 C++ 运行时的动态链接（我使用此选项） 2\. 像您已经想通的那样显式公开类（当您有很多类时会变得烦人）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:53:22.337

> 库本身编译没有任何问题，但是当我尝试编译二进制文件并将其链接到它时，我收到以下错误

什么是链接命令行？

您可能认为您过早地传入库，因此链接器在需要该定义之前已经对其进行了处理。

# android - 阿克拉邮政脚本

> ID：14634837
> 
> 赞同：1
> 
> 时间：2013-01-31T20:46:18.330
> 
> 标签：android, crash-reports, acra

尝试在我的应用程序中使用 ACRA，但我无法让谷歌驱动器或电子邮件工作（在谷歌驱动器中我不知道如何从模板创建表单，电子邮件告诉我没有这样的电子邮件地址，即使我从同一个电子邮件地址发送）。我宁愿让谷歌驱动器电子表格工作或更好 - 如果有一个现成的免费网络主机脚本可以用来获取报告。有人知道这样的脚本吗？

编辑：我需要一个 php...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:13:45.950

看起来 ACRA 使用了一个简单的帖子。你需要什么语言的？对于 asp.net：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        StringBuilder err = new StringBuilder();
        foreach (string name in Request.Form)
        {
            err.AppendLine(name + ": " + Request.Form[name]);
        }

        TextWriter tw = null;
        try
        {
            tw = new StreamWriter("f:\\errorLogs\\error_" + DateTime.Now.Ticks + ".txt");
            tw.WriteLine(err.ToString());
        }
        catch (Exception) { }
        finally
        {
            if(tw != null)
                tw.Close();
        }
    } 
```

由于您使用的是“免费网络主机”，因此该位置可能对您无效，但这至少应该让您指向正确的方向。还有一个和你类似的[帖子。](https://stackoverflow.com/questions/9424346/android-sending-data-from-acra-to-a-php-script)大多数免费网络主机使用 php。

编辑：

这是一个基本的[PHP 脚本](http://www.codingforums.com/showthread.php?t=136146)（未经测试，但对我来说似乎没问题。我的 PHP 有点生锈）：

```
<?php
$file = 'postData.txt';
$arr= $_POST;
$fp = fopen($file, 'w') or die('Could not open file!'); 
foreach ($arr as $key => $value) {
    $toFile = "Key: $key; Value: $value \n";
    // write to file 
    fwrite($fp, "$toFile") or die('Could not write to file'); 
}
// close file 
fclose($fp);
?> 
```

# ruby-on-rails-3 - Rails 强制所有翻译

> ID：14634838
> 
> 赞同：0
> 
> 时间：2013-01-31T20:46:26.147
> 
> 标签：ruby-on-rails-3, models, rails-admin, globalize3

感谢[这个要点](https://gist.github.com/1083368)，我正在`globalize3`使用。令我烦恼的是，用户可以根据需要添加任意数量的翻译。`rails_admin`

此外，他不会被迫翻译每个语言环境中的内容（如`I18n.available_locales`）。我想要那个。你怎么能解决这样的情况？

型号（缩短）：

```
class Project < ActiveRecord::Base
    has_many :project_translations, :dependent => :destroy, :inverse_of => :project
    accepts_nested_attributes_for :project_translations, :allow_destroy => true

class ProjectTranslation < ActiveRecord::Base
    belongs_to :project 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:31:09.160

我最终改用了[Active Admin](http://activeadmin.info/ "活跃管理员")和[activeadmin-globalize3](https://github.com/stefanoverna/activeadmin-globalize3)。容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T20:57:32.340

它也困扰着我，所以我创建了不允许的自定义字段类型。

主要类：

```
module RailsAdmin
  module Config
    module Fields
      module Types
        class GlobalizeTabs < RailsAdmin::Config::Fields::Association
          RailsAdmin::Config::Fields::Types::register(:globalize_tabs, self)

          register_instance_option :partial do
            :form_globalize_tabs
          end

          def method_name
            "#{super}_attributes".to_sym
          end

          # Reader for validation errors of the bound object
          def errors
            bindings[:object].errors[name]
          end

          def available_locales
            I18n.available_locales
          end
          def current_locale
            I18n.locale
          end

          # Returns array of Translation objects
          # It gets existing or creates new empty translation for every locale
          # It's used in fields_for method in partial
          def translations
            translated_locales = @bindings[:object].translated_locales
            available_locales.collect do |locale|
              translated_locales.include?(locale) ? @bindings[:object].translation_for(locale) : @bindings[:object].translations.new({ locale: locale })
            end
          end
        end
      end
    end
  end
end 
```

它继承自`RailsAdmin::Config::Fields::Association`类，因为它使用非常类似于`_form_nested_many`partial（在 has_many 类型中使用）。

部分：

```
.controls
  = form.errors_for(field)
  %ul.nav.nav-tabs{ :style => 'margin-top:5px' }
    - field.available_locales.each do |locale|
      %li{ class: ( 'active' if locale == field.current_locale ) }
        %a{ href: "##{locale}", data: { toggle: "tab" } }= locale
.tab-content
  = form.fields_for field.name, field.translations, wrapper: false do |nested_form|
    .fields.tab-pane{ id: nested_form.object.locale, class: ( 'active' if nested_form.object.locale == field.current_locale ) }
      = nested_form.generate({:action => :nested, :model_config => field.associated_model_config, :nested_in => field.name })
= form.help_for(field) 
```

它使用`field.translations`自定义字段类中的方法，该方法返回一个翻译对象数组。每个翻译对象都对应于可用的语言环境，它要么是数据库中的现有对象（如果翻译已经存在），要么是新的空翻译对象。

**例如**

你有这个可用的语言环境：

`I18n.available_locales = [:en, :cz, :ru]`

您有包含一些翻译字段的*页面模型。*

此外，您有一个 Page 类的对象（数据库中的一行），它具有 :en 和 :cz 语言环境的翻译，但缺少 :ru 的翻译。

因此， partial`field.translations`内部的方法`_form_globalize_tabs`返回一个数组，其中包含： :en 和 :cz 的 2 个现有翻译，以及 :ru 的 1 个刚刚初始化的翻译。

在部分中，我将此数组传递给gem的`fields_for`辅助方法，该方法为每个翻译对象返回 3 个字段集。`nested_form`

如果您不想自己弄乱代码，可以使用这个 gem：[https ://github.com/scarfaceDeb/rails_admin_globalize_field](https://github.com/scarfaceDeb/rails_admin_globalize_field)

# java - 不同大小的数组的吞吐量不同

> ID：14634839
> 
> 赞同：4
> 
> 时间：2013-01-31T20:46:26.440
> 
> 标签：java, arrays, performance, file-io, throughput

我有像这样的数组

```
byte[] b = new byte[10];
byte[] b1 = new byte[1024*1024]; 
```

我用一些值填充它们。说，

```
for(i=0;i<10;i++){
     b[i]=1;
}
for(i=0;i<1024*1024;i++){
     b1[i]=1;
} 
```

然后我将它写入一个 RandomAccessFile 并再次从该文件读取到同一个数组中，使用，

```
randomAccessFile.write(arrayName);
              and
randomAccessFile.read(arrayName); 
```

当我尝试计算这两个不同大小（10 字节和 1Mb）的数组的吞吐量（使用为文件读取和写入计算的时间）时，1MB 数组的吞吐量似乎更高。

```
Sample Output:
Throughput of 10kb array: 0.1 Mb/sec.
Throughput of 1Mb array: 1000.0 Mb/sec. 
```

为什么会这样？我有四核处理器的 Intel i7。我的硬件配置会对此负责吗？如果不是，可能的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T21:04:06.487

造成巨大差异的原因是 I/O 所涉及的开销，无论传输的数据大小如何 - 这就像乘坐出租车的旗帜一样。不限于 java 并且包括许多 O/S 操作的开销包括：

*   查找磁盘上的文件
*   检查文件的操作系统权限
*   为 I/O 打开文件
*   关闭文件
*   更新文件系统中的文件信息
*   许多其他任务

此外，磁盘 I/O 以页为单位执行（大小取决于 O/S，但通常为 2K），因此 1 字节的 I/O 可能与 2048 字节的 I/O 成本相同：更公平的比较是 2048带有 1Mb 数组的字节数组。

如果您使用缓冲 I/O，则可以进一步加快更大的 I/O 任务。

最后，您报告的“10Kb”实际上只是 10 个字节，因此您的计算可能不正确。

# java - 无需转发即可从 servlet 获取数据到 JSP？

> ID：14634842
> 
> 赞同：0
> 
> 时间：2013-01-31T20:46:45.103
> 
> 标签：java, jsp, servlets

我需要一个来自我的 servlet 的双值来标记我的 JSP。我的 doGet() 正在发回带有 ArrayList 值的格式化 HTML 表，所以在我开始工作后，我决定处理这部分。

小服务程序：

//获取我需要的表的代码

```
 //Send back the result, this all works good
    response.setContentType("text/html");
    response.setCharacterEncoding("UTF-8");
    response.getWriter().write(returnAsHTML.toString()); 
```

我添加的内容是为了尝试获得双倍价值

```
 //Send back the result

    double test = 20;
    request.setAttribute("Test",test);

    response.setContentType("text/html");
    response.setCharacterEncoding("UTF-8");
    response.getWriter().write(returnAsHTML.toString());

    getServletContext().getRequestDispatcher("index.jsp").forward(request,response); 
```

在 JSP 中：

```
 <!-- This variable is unresolved -->
  <small>Test : ${Test}</small> 
```

转发似乎使整个聚会崩溃。我是 JSP 的新手，我确定我遗漏了一些小东西。我需要把 response.getWriter() 的东西放在那里，它会得到很多我需要的信息。现在我只是不知道如何获得我需要的 double 值，因为它们将显示在页面的完全不同的部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T20:55:38.823

您不能同时*将输出写入 servletOutputStream* **和** *重定向*。

您对浏览器的期望是：显示内容还是导航到另一个页面？如果是第一个，请不要重定向。如果是第二个，则不显示 HTML 内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:42:18.940

尝试使用 httpsession。使用 session.setAttribiute() 封装您拥有的任何对象。然后使用 sendRedirect() 方法转发它。

**可能属于这种**

```
HttpSession session=request.getSession();
double test = 20;
session.setAttribute("Test",test);
response.sendRedirect("Index.jsp"); 
```

**在 JSP 页面上**

```
String s=(String)session.getAttribite("Test");
double d=Double.parseDouble(s); 
```

# javascript - HTML5 Canvas 中渐进式图像的渐进式渲染

> ID：14634844
> 
> 赞同：3
> 
> 时间：2013-01-31T20:47:22.370
> 
> 标签：javascript, html, canvas, png, progressive

有没有办法将部分加载的渐进图像对象（PNG，JPG）绘制到画布中？

大多数浏览器都支持标签中的渐进式加载，但我找不到如何在画布中控制它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T03:37:11.103

根据规范的命令，答案是否定的。

如果浏览器确实发生了这种情况，则违反了规范，该规范规定：

> 如果图像尚未完全解码，则不会绘制任何内容。
> 
> 当一个 img 元素处于完全可用状态并且用户代理可以正确解码媒体数据时，则称该 img 元素是完全可解码的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-11T13:51:02.477

您可以查看[streamingtextures js lib](https://github.com/bompo/streamingtextures/) ，它使用渐进式 JPEG 图像的自定义解码（通过 libjpeg 的 Emscripten 版本）并将图像内容作为字节数组返回。

此方法与 WebGL 一起使用，但也可用于 2D 画布并扩展为还支持 GIF、PNG 和 WebP

# java - 使用 JSoup 选择特定标签

> ID：14634845
> 
> 赞同：0
> 
> 时间：2013-01-31T20:47:24.777
> 
> 标签：java, html, select, jsoup

我是 JSoup 的新手，并且已经使用它几天了，没有任何问题，直到我遇到了这个。我试图`<tr>`从一个表中获取所有标签，其中`<tr>`s 有`<td>`一个特定类的子标签。

我正在尝试从[该网站](http://www.valgrande-pajares.com/parte-de-nieve-pajares.htm)检索数据，这就是我正在尝试的：

```
document.select("#partedenieve tr:has(td.zonas)"); 
```

我不知道它是否有效，因为这里的问题是，如果您只选择它`#partedenieve tr`只会返回`<tr>`. `thead`我尝试了其他一些查询，但是当我最终实现`<tr>`从 tbody 获取 s 时，它也不会返回所有`<tr>`标签。

我不知道这个问题是否与`<tr>`我想要获取的 s 上存在的 rowspan 标签有关......但到目前为止我还没有运气。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:28:20.647

尝试：

```
Elements elts = document.select("tr > td.class"); 
```

这将返回给定类的所有 td 元素。所以你只需要得到每个唯一的父母：

```
List<Element> list = new ArrayList<Element>();
for (Element elt : elts) {
    if (!list.contains(elt) {
        list.add(elt);
    }
} 
```

现在，您的`list`对象包含所有 tr 元素。

# ruby - 嵌套枚举中罕见的 ruby 段错误

> ID：14634851
> 
> 赞同：1
> 
> 时间：2013-01-31T20:47:37.987
> 
> 标签：ruby, segmentation-fault

每执行 3000 次左右，我就会在下面的代码中得到一个段错误，就`y << v`行了。

`cache`是一个字符串-> 对象哈希，而 enum_files 是一个帮助方法，使过滤访问更容易。

```
 def enum_files
    load_all
    Enumerator.new  do |y| 
      cache.each do |k,v|      
        y << v if yield(v)
      end
    end
  end

  def pages
    @cached_pages ||= enum_files { |p| p.is_page? && p.can_render? }.to_a
  end

  def posts
    @cached_posts ||= enum_files { |p| p.is_page? && p.can_render? && p.is_post? }.sort { |x, y| y.date <=> x.date }
  end 
```

（完整来源[http://hardwiredcms.com](http://hardwiredcms.com)）

我正在`ruby 1.9.3p362`运行`OS X 10.8.2 [x86_64-darwin12.2.0]`

[这是完整的错误堆栈](https://gist.github.com/4686226) （遗憾的是，没有向控制台或 CrashReporter 写入任何信息）

### 我在做傻事吗？

# android - android 联系人选择器 onActivityResult

> ID：14634864
> 
> 赞同：1
> 
> 时间：2013-01-31T20:48:35.583
> 
> 标签：android, android-activity, contacts

我想使用 startActivityForResult 选择一个联系人，然后使用 onActivityResult 获取结果。

我已经按照[Java android 如何使用联系人选择器](https://stackoverflow.com/questions/14540514/java-android-how-to-use-contact-picker)中的示例进行操作。

此代码正确调用联系人选择器：

```
addButton.setOnClickListener(new View.OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
        Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);

            Log.d(this.getClass().getName(), "Add button");

            startActivityForResult(intent, PICK);
        }
    }); 
```

然而 onActivityResult 永远不会被调用：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    Log.d(this.getClass().getName(), "onActivityResult");   

    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == PICK && resultCode == Activity.RESULT_OK) 
    {
    Uri contactData = data.getData();
    Cursor c =  managedQuery(contactData, null, null, null, null);

        if (c.moveToFirst()) 
        {
        String name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));

            Log.d(this.getClass().getName(), "Selected "+name); 
        }
    }

} // onActivityResult 
```

我想知道我的 AndroidManifest.xml 是否有问题。我有 READ_CONTACTS 权限；我四处搜索并将这个意图过滤器添加到启动并等待活动的活动中，但这也没有任何区别。

```
<intent-filter>
            <action android:name="android.intent.action.PICK"/>
            <category android:name="android.intent.category.DEFAULT"/>
            <data android:scheme="content" android:path="contacts"></data>
 </intent-filter> 
```

手机上的行为是，当按下按钮时，会显示联系人列表，但是当我选择一个条目时，它永远不会将控制权交还给我的应用程序。

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:00:59.897

我发现了问题。上面的代码没有任何问题，但它在 TabActivity 中。我通过切换到选项卡片段解决了这个问题。

# windows - 在没有 shell 命令的情况下在 Perl 中打印到 Windows 网络打印机

> ID：14634866
> 
> 赞同：0
> 
> 时间：2013-01-31T20:48:42.537
> 
> 标签：windows, perl, printing

我有一台打印机，HP DeskJet 712C，通过 Windows XP 工作站共享。我可以从各种应用程序打印到这台打印机，但我无法通过`PRINT`shell 命令打印到它（从打印机连接到的工作站或任何其他）。我有一个 Perl 脚本，目前托管在 Windows 7 工作站上，它生成文本文件。我想将那些文本文件打印到上述打印机上，但由于我无法使用`PRINT`shell 命令，我不知道如何使用。如何在 Perl 中将这些文本文件打印到该打印机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:55:32.180

我对 Windows 编程了解不多，但我能想到几个选项。

1.  [打印机](https://metacpan.org/module/Printer)- CPAN 上有一个名为**[Printer](https://metacpan.org/module/Printer)**的模块，声称可以处理 Windows 打印。我没用过。YMMV，但它看起来正是你想要的。

2.  [Wx](https://metacpan.org/module/Wx) - Wx GUI 工具包具有很好的、与 Windows 兼容的打印功能。遗憾的是，它也是一个巨大而复杂的依赖项，仅用于一个简单的命令行脚本。我用过这个，效果很好。

3.  [Win32::API](https://metacpan.org/module/Win32%3a%3aAPI) - 这是我对 Windows 无知的真正表现。Win32::API 模块允许您调用 Windows DLL。如果您知道要使用的适当函数/DLL，则可以访问它们以开始打印作业。

* * *

**更新**

您可能想在 ActiveState 的 Perl-Win32 用户列表上查看[此线程。](http://code.activestate.com/lists/perl-win32-users/32704/)

显然你可以这样做：

```
open my $prn, '>', '//mycomputer/PrinterShare' or die "Oh noes $!";
print $prn "Here's some text to print."; 
```

这是未经测试的，未经尝试的，也许是不真实的，但试一试。什么可能出错？这些天打印机很便宜。;)

# javascript - 如何使用 $().bind 和 mouseup 删除上下文菜单？

> ID：14634867
> 
> 赞同：2
> 
> 时间：2013-01-31T20:48:43.067
> 
> 标签：javascript, jquery, dom, contextmenu, dom-events

我需要使用 $().bind 方法。我不想使用其他插件。我只想添加左键单击和右键单击功能。这是我的函数处理程序。我还必须禁用上下文菜单。这是我的 $().bind 函数（我正在尝试扩展 jQuery 的完整日历以允许我将任何 jsEvent 绑定到它自己的事件，因为它只公开 3 个 js 事件。）

```
if (has(eventBind)) {
            $.each(eventBind, function (eventString, eventFunction) {                
                options.eventRender = function (calEvent, element) {
                    element.bind(eventString, { calEvent: calEvent }, eventFunction);
                }
            });
        }  
} 
```

如果我像这样定义 eventBind，那么如果我右键单击会调用函数 A，如果我左键单击会调用函数 B

```
 eventBind: {
     mouseup:  function eventClick(e) {
        if (e.button === 2) {
           //execute function A
        } else {
           //execute function B
        } 
    } 
```

如果我的代码顺序没有真正意义，我深表歉意，但我只想知道该怎么做。我试图定义以下

```
 eventBind: {
         mouseup:  function eventClick(e) {
             if (e.button === 2) {
                //execute function A
             } else {
                //execute function B
             } 
         },
         contextmenu: function() { return false; }
     }    
} 
```

但这也使之前定义的“mouseup”无法正确执行。

非常感谢您的帮助。

# blackberry-simulator - 黑莓 SDK 10 模拟器快捷方式

> ID：14634869
> 
> 赞同：1
> 
> 时间：2013-01-31T20:48:50.713
> 
> 标签：blackberry-simulator

我在我的 Mac 上安装了模拟器。进入其他屏幕后无法找到主屏幕。是否有类似 iPhone 风格的按钮可以将设备带回主屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:56:47.910

这看起来像是一本综合手册：[http ://docs.blackberry.com/en/developers/deliverables/637/BlackBerry_Simulator_Quick_Start_Guide.pdf](http://docs.blackberry.com/en/developers/deliverables/637/BlackBerry_Simulator_Quick_Start_Guide.pdf)

具体来说，您希望查看标题为“使用 BlackBerry 设备模拟器输入控件”的部分。

# jquery - 在一组 li 标签中动态改变 html

> ID：14634870
> 
> 赞同：2
> 
> 时间：2013-01-31T20:48:55.533
> 
> 标签：jquery, each

我正在尝试`<li>`在每个循环中更改 html，但所有 LI 元素都显示相同的图像源。如果你看看这个 Fiddle，你就会明白我的意思。

( [http://jsfiddle.net/dxhqL/2/](http://jsfiddle.net/dxhqL/2/) )

我不能只提交 jsfiddle url，所以我也在这里包含了代码。这是html：

```
<ul class="gallery-thumbnail">
<li><img width="68" height="68" src="http://leandrovieira.com/projects/jquery/lightbox/photos/image1.jpg"></li>
<li><img width="68" height="68" src="http://leandrovieira.com/projects/jquery/lightbox/photos/image2.jpg"></li>
<li><img width="68" height="68" src="http://leandrovieira.com/projects/jquery/lightbox/photos/image3.jpg"></li>
<li><img width="68" height="68" src="http://leandrovieira.com/projects/jquery/lightbox/photos/image4.jpg"></li>
</ul> 
```

这是JS

```
$(document).ready(function() {
    $("ul.gallery-thumbnail li img").each(function() {
        $("ul.gallery-thumbnail li").html("<a href='" + $(this).attr("src") + "'><img width='68' height='68' src='" + $(this).attr("src") + "'></a>");
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:53:17.350

你可以在这里使用[.wrap()](http://api.jquery.com/wrap/)

```
$("ul.gallery-thumbnail li img").each(function () {
    $(this).wrap("<a href=\"" + this.src + "\" />");
}); 
```

[http://jsfiddle.net/dxhqL/4/](http://jsfiddle.net/dxhqL/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T20:51:15.063

您需要选择正确的图像。与传递给回调`.eq`的非常方便的索引一起使用：`.each`

```
$("ul.gallery-thumbnail li img").each(function(idx) {
    $("ul.gallery-thumbnail li").eq(idx).html("<a href='" + $(this).attr("src") + "'><img width='68' height='68' src='" + $(this).attr("src") + "'></a>");
}); 
```

[http://jsfiddle.net/ExplosionPIlls/dxhqL/3/](http://jsfiddle.net/ExplosionPIlls/dxhqL/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T21:08:11.703

```
 $(this).closest('li').html("<a href='" + $(this).attr("src") + "'><img width='68' height='68' src='" + $(this).attr("src") + "'></a>");

get the closest <li>  and it will work 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-31T20:53:23.723

```
 $(document).ready(function() {

    $("ul.gallery-thumbnail li img") {
        $("ul.gallery-thumbnail li").html("<a href='" + $(this).attr("src") + "'><img width='68' height='68' src='" + $(this).attr("src") + "'></a>");

    }); 
}); 
```

您可能想删除`.each(function()`希望这有帮助。

# javascript - 从异步函数返回一个变量

> ID：14634875
> 
> 赞同：0
> 
> 时间：2013-01-31T20:49:15.847
> 
> 标签：javascript, asynchronous

我有一个带有函数的模块，它为变量“stitcheBook”生成变量的值。我可以通过回调查看和使用这个值。

但是，我希望将此值作为模块属性提供给我。我怎样才能做到这一点？

注意：我希望 _BookStitcher.stitchAllStories 函数的输出进入 _BookStitcher.stitchedBook 属性。

```
module.exports = _BookStitcher = (function() {

var db = require('../modules/db');
var stitchedBook = {};

var stitchAllStories = function(callback) {

    db.dbConnection.smembers("storyIdSet", function (err, reply) {
        if (err) throw err;
        else {
            var storyList = reply;
            console.log(storyList);
            // start a separate multi command queue
            multi = db.dbConnection.multi();
            for (var i=0; i<storyList.length; i++) {
                multi.hgetall('story/' + String(storyList[i]) + '/properties');
            };
            // drains multi queue and runs atomically
            multi.exec(function (err, replies) {
                stitchedBook = replies;
                // console.log(stitchedBook);
                callback(stitchedBook);
            });
        };
    });

};

return {
    stitchedBook : stitchedBook,
    stitchAllStories: stitchAllStories

} 
```

})();

编辑：补充：我知道我实际上可以通过做这样的事情从外部设置值；

```
_BookStitcher.stitchAllStories(function (reply) {
        console.log("Book has been stitched!\n\n")
        console.log("the Book is;\n");
        console.log(reply);
        _BookStitcher.stitchedBook = reply;
        console.log("-------------------------------------------------------------------------\n\n\n");
        console.log(_BookStitcher.stitchedBook);

}); 
```

我想知道是否有一种方法可以从 _BookStitcher 模块本身内部进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:59:10.163

您*可以*利用对象引用在 JavaScript 中的工作方式，并将其分配给属性：

```
module.exports = _BookStitcher = (function() {

    var db = require('../modules/db');

    // CHANGE HERE
    var stitched = { book: null };

    var stitchAllStories = function(callback) {
        db.dbConnection.smembers("storyIdSet", function (err, reply) {
            if (err) throw err;
            else {
                var storyList = reply;
                console.log(storyList);
                // start a separate multi command queue
                multi = db.dbConnection.multi();
                for (var i=0; i<storyList.length; i++) {
                    multi.hgetall('story/' + String(storyList[i]) + '/properties');
                };
                // drains multi queue and runs atomically
                multi.exec(function (err, replies) {
                    // CHANGE HERE
                    stitched.book = replies;
                    // console.log(stitchedBook);
                    callback(replies);
                });
            };
        });
    };

    return {
        stitched : stitched,
        stitchAllStories: stitchAllStories
    };

}()); 
```

因此，与其把它放在里面`_BookStitcher.stitchedBook`，不如把它放在`_BookStitcher.stitched.book`.

但这看起来很糟糕，我永远不会使用它！**您无法知道该值何时可用，只有在您确定已设置时，才能从回调中使用它是安全的。**

# svn - 两个 svn 存储库，每个存储库在同一台 ubuntu 服务器机器上都有自己的域名？

> ID：14634877
> 
> 赞同：1
> 
> 时间：2013-01-31T20:49:18.077
> 
> 标签：svn, dns, repository

有没有办法在同一台机器（ubuntu 服务器）上托管两个不同的颠覆存储库，每个存储库都有自己的域名？

**具体：** 我想要一个像“svn://domain-1.com/”这样的url，它有很多子目录和存储库，比如“svn://domain-1.com/repo-1/”、“svn://domain” -1.com/repo-2/" 等等 .. .. 好的，没问题，但另外我想要一个特殊的存储库，它可以与其他域连接，如 "svn://domain-2.com /" 没有任何子目录。

所以我考虑了一个包含我所有存储库的目录。domain-1 指向此目录，domain-2 指向其中一个子目录（特殊存储库）。

有没有一种合理的方法可以在一台 ubuntu 服务器机器上实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:57:01.697

通过使用 Apache/DAV 和虚拟主机，HTTP 协议完全可以实现这一点；有关详细信息，请参阅本文： [将 Subversion 与 Apache 虚拟主机一起使用](http://schwuk.com/articles/2004/08/28/using-subversion-with-apache-virtual-hosts/)基本上所有更改都是您使用`http://hostnameX.com/repo1`而不是`svn://hostnameX.com/repo1.`

我不相信 SVN 本身支持虚拟主机，所以你必须破解某种反向代理（例如 nginx）才能用 svn:// 做同样的事情

# android - ContactsContract 查询列“display_name”不存在

> ID：14634878
> 
> 赞同：0
> 
> 时间：2013-01-31T20:49:19.577
> 
> 标签：android, android-contacts, android-cursoradapter, android-cursorloader

我正在尝试使用 CursorLoader 获取设备中具有电话号码的联系人列表，如下所示：

```
@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    return new CursorLoader(getActivity(), ContactsContract.CommonDataKinds.Phone.CONTENT_URI, new String[] {
            Contacts._ID, Contacts.DISPLAY_NAME }, null, null, Contacts.DISPLAY_NAME);
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    mAdapter.swapCursor(cursor);
}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
    mAdapter.swapCursor(null);
} 
```

*这有时*可以完美地工作，有时却*不起作用*。它从一个应用程序启动更改为另一个。我得到的异常的堆栈跟踪发布在下面。我将光标传递给`IndexedNameAdapter`它的扩展`SimpleCursorAdapter`，包括`AlphabetIndexer`快速滚动：

```
import android.content.Context;
import android.database.Cursor;
import android.support.v4.widget.SimpleCursorAdapter;
import android.widget.AlphabetIndexer;
import android.widget.SectionIndexer;

public class IndexedNameAdapter extends SimpleCursorAdapter implements SectionIndexer {

private AlphabetIndexer mAlphabetIndexer;
private String[] from;

public IndexedNameAdapter(Context context, int layout, Cursor c, String[] from, int[] to) {
    this(context, layout, c, from, to, 0);
}

public IndexedNameAdapter(Context context, int layout, Cursor c, String[] from, int[] to, int flags) {
    super(context, layout, c, from, to, flags);

    this.from = from;
    setAlphabetIndexerCursor(c, from);
}

@Override
public Cursor swapCursor(Cursor c) {
    setAlphabetIndexerCursor(c, from);

            // error occurs here:
    return super.swapCursor(c);
}

private void setAlphabetIndexerCursor(Cursor c, String[] columns) {
    if (c != null) {
        mAlphabetIndexer = new AlphabetIndexer(c, c.getColumnIndex(columns[0]), "ABCDEFGHIJKLMNOPQRSTUVWXYZ");
        mAlphabetIndexer.setCursor(c);
    }
}

@Override
public int getPositionForSection(int section) {
    return mAlphabetIndexer.getPositionForSection(section);
}

@Override
public int getSectionForPosition(int position) {
    return mAlphabetIndexer.getSectionForPosition(position);
}

@Override
public Object[] getSections() {
    return mAlphabetIndexer.getSections();
} 
```

}

这是我看到的错误：

```
 java.lang.IllegalArgumentException: column 'display_name' does not exist
    at android.database.AbstractCursor.getColumnIndexOrThrow(AbstractCursor.java:303)
    at android.database.CursorWrapper.getColumnIndexOrThrow(CursorWrapper.java:78)
    at android.support.v4.widget.SimpleCursorAdapter.findColumns(SimpleCursorAdapter.java:317)
    at android.support.v4.widget.SimpleCursorAdapter.swapCursor(SimpleCursorAdapter.java:328)
    at com.mypackage.myprofile.IndexedNameAdapter.swapCursor(IndexedNameAdapter.java:29)
    at com.mypackage.myprofile.ProfileUserFragment.onLoadFinished(ProfileUserFragment.java:52)
    at com.mypackage.myprofile.ProfileUserFragment.onLoadFinished(ProfileUserFragment.java:1)
    at android.support.v4.app.LoaderManagerImpl$LoaderInfo.callOnLoadFinished(LoaderManager.java:427)
    at android.support.v4.app.LoaderManagerImpl$LoaderInfo.onLoadComplete(LoaderManager.java:395)
    at android.support.v4.content.Loader.deliverResult(Loader.java:103)
    at android.support.v4.content.CursorLoader.deliverResult(CursorLoader.java:81)
    at android.support.v4.content.CursorLoader.deliverResult(CursorLoader.java:35)
    at android.support.v4.content.AsyncTaskLoader.dispatchOnLoadComplete(AsyncTaskLoader.java:221)
    at android.support.v4.content.AsyncTaskLoader$LoadTask.onPostExecute(AsyncTaskLoader.java:61)
    at android.support.v4.content.ModernAsyncTask.finish(ModernAsyncTask.java:461)
    at android.support.v4.content.ModernAsyncTask.access$500(ModernAsyncTask.java:47)
    at android.support.v4.content.ModernAsyncTask$InternalHandler.handleMessage(ModernAsyncTask.java:474)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5039)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T21:32:11.923

我通常不喜欢回答我自己的问题，但我最终确实找到了解决问题的方法。

我在同一个活动中有另一个片段也实现了`LoaderCallbacks<Cursor>`，我没有两个游标的唯一 ID。我在这个片段中得到了错误加载器的光标。

我认为因为它们位于两个永远不会同时可见的不同片段中，所以我不需要唯一 ID，但这是不正确的。

# c# - 禁用 vs2010 XNA 内容管道警告

> ID：14634890
> 
> 赞同：1
> 
> 时间：2013-01-31T20:49:50.600
> 
> 标签：c#, xna

我正在使用 XNA 构建游戏，并且我的游戏关卡有自定义文件格式。我想自己加载并解析它们，而不使用 XNA 的内容管道。我有这么多工作，通过将文件添加到内容项目中，我什至可以在 Visual Studio 中编辑它们（我也想要）。

问题：我收到一条警告，指出“项目项 'item.lvl' 不是使用 XNA 框架内容管道构建的。将其构建操作属性设置为编译以构建它。”

我不希望 XNA 编译它，因为我正在做自己的解析。如何禁用警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T21:29:24.993

将文件的 Build Action 设置为`None`，然后将其设置为`Copy if newer`. 这将导致文件被写入正确的输出目录，而无需通过内容管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T21:00:34.860

该解决方案可以创建一个自定义内容导入器，如下所述：[创建自定义导入器和处理器](http://msdn.microsoft.com/en-us/library/bb447754.aspx)。要创建一个简单的内容导入器，您必须从[`ContentImporter<T>`](http://msdn.microsoft.com/en-us/library/bb195424.aspx)（抽象类）继承您的类并覆盖该`Import()`方法。

下面是一个来自 msdn 的简单示例：

```
//...
using Microsoft.Xna.Framework.Content.Pipeline;

class PSSourceCode
{
    const string techniqueCode = "{ pass p0 { PixelShader = compile ps_2_0 main(); } }";

    public PSSourceCode(string sourceCode, string techniqueName)
    {
        this.sourceCode = sourceCode + "\ntechnique " + techniqueName + techniqueCode;
    }

    private string sourceCode;
    public string SourceCode { get { return sourceCode; } }
}

[ContentImporter(".psh", DefaultProcessor = "PSProcessor", DisplayName = "Pixel Shader Importer")]
class PSImporter : ContentImporter<PSSourceCode>
{
    public override PSSourceCode Import(string filename, 
        ContentImporterContext context)
    {
        string sourceCode = System.IO.File.ReadAllText(filename);
        return new PSSourceCode(sourceCode, System.IO.Path.GetFileNameWithoutExtension(filename));
    }
} 
```

# oracle - 内部查询的 Oracle 参数

> ID：14634892
> 
> 赞同：1
> 
> 时间：2013-01-31T20:50:00.670
> 
> 标签：oracle, oracle9i

我正在为 Oracle 查询而苦苦挣扎。我想向内部查询发送一个值，但没有成功。我的查询如下所示：

```
SELECT * FROM Pro u 
LEFT JOIN (SELECT * FROM PROLOG d
WHERE d.Id = (SELECT MAX(Id) FROM PROLOG t
          WHERE t.Project = **u.Id** 
          AND t.Prodstatus IN    (5,40)))z ON (u.ID = z.Project)
WHERE u.Id = 22; 
```

我想 **`u.Id`**用 22 替换。值 22 来自 Pro u 表。请给我一些提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:26:48.470

我不相信您可以将联接与内联视图相关联，但是您可以将 SQL 语句简化为具有相关谓词的简单外部联接：

```
SELECT * 
FROM pro u 
LEFT OUTER JOIN prolog d 
    ON d.project = u.id
    AND d.Id = (SELECT MAX(Id) 
                    FROM prolog t
                    WHERE t.project = u.id
                    AND t.prodstatus IN (5,40))
WHERE u.id = 22; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T22:00:27.543

您不需要将该值传递给`Pro`表中的子查询，您可以使用`prolog`表值

```
SELECT * FROM Pro u 
LEFT JOIN (SELECT * FROM PROLOG d
WHERE d.Id = (SELECT MAX(Id) FROM PROLOG t
          WHERE t.Project = d.Project 
          AND t.Prodstatus IN    (5,40)))z ON (u.ID = z.Project)
WHERE u.Id = 22; 
```

# php - PDO::准备安全

> ID：14634896
> 
> 赞同：3
> 
> 时间：2013-01-31T20:50:16.173
> 
> 标签：php, mysql, pdo

我读过该`PDO::Prepare`函数创建了一个*安全*查询。这是否意味着转义字符不需要手动字面化？比如反斜杠字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T20:54:19.643

*不*，这绝对不是那个意思。您阅读的内容具有误导性。

“准备好的语句”和“参数化查询”是有区别的。您希望后者用于卫生目的。

例如：

```
$pdo->prepare("SELECT * FROM t1 WHERE col1 = $USER_PROVIDED_VALUE"); 
```

即使准备好了，也根本不安全。相反，您必须这样做：

```
$stmt = $pdo->prepare("SELECT * FROM t1 WHERE col1 = ?");
$stmt->execute(array($USER_PROVIDED_VALUE)); 
```

如果您没有正确地对其进行参数化，那么在安全性方面准备查询不会为您做任何事情。

# c# - WSDL 是否与 Windows Phone 8 兼容？

> ID：14634902
> 
> 赞同：4
> 
> 时间：2013-01-31T20:50:34.227
> 
> 标签：c#, web-services, visual-studio-2012, wsdl, windows-phone-8

我必须在 Windows Phone 8 应用程序上使用 Web 服务 (WSDL)，但它在 VS2012 中不起作用。

例如 ：

[http://chennaiemergency.co.in/sree/s2.php?wsdl](http://chennaiemergency.co.in/sree/s2.php?wsdl)

1.  右键单击项目>添加服务参考
2.  将 URL 粘贴到地址文本框中
3.  点击“开始”按钮
4.  该服务与所有操作一起出现
5.  点击“确定”

该服务已添加，但在 reference.cs 中没有关于我的操作...

还有其他方法可以使用我的 wsdl 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T09:24:03.270

我发现这个问题的最佳方法是手动发送 SOAP 请求。SOAP 和 wsdl 与 WP 不太兼容。如果您可以选择，也许可以为您的 Web 服务选择 WCF。我在 Windows 窗体应用程序中的肥皂请求代码（在 WP 项目中，您必须使用异步方法 -> beginGetRequestStream() 和 beginGetResponse() 。msdn 上有很多关于此的文档）：

```
 // Building of my XML 
        XNamespace env = "http://schemas.xmlsoap.org/soap/envelope/";
        XNamespace xsd = "http://www.w3.org/2001/XMLSchema";
        XNamespace xsi = "http://www.w3.org/2001/XMLSchema-instance";
        XNamespace enc = "http://schemas.xmlsoap.org/soap/encoding/";
        XNamespace typens = "urn:...";
        XNamespace xsiType = "xsd:string";
        XElement soapEnv = new XElement(env + "Envelope",
            new XAttribute(XNamespace.Xmlns + "SOAP-ENV",env.NamespaceName),
            new XAttribute(XNamespace.Xmlns + "xsd", xsd.NamespaceName),
            new XAttribute(XNamespace.Xmlns + "xsi", xsi.NamespaceName),
            new XElement(env + "Body",
                new XAttribute(env + "encodingStyle",enc.NamespaceName),
                    new XElement(typens + "MethodName",
                        new XAttribute(XNamespace.Xmlns + "typens",typens.NamespaceName),
                        new XElement("elementName",
                            new XAttribute(xsi + "type",xsiType.NamespaceName), "...value"),
                        new XElement("elementName",
                            new XAttribute(xsi + "type",xsiType.NamespaceName),"...value"),
                        new XElement("elementName",
                            new XAttribute(xsi + "type",xsiType.NamespaceName),"...value")
        )));

        // HTTPWEBREQUEST
        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("...url...");
        webRequest.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        webRequest.Method = "POST";
        webRequest.KeepAlive = false;
        webRequest.ContentType = "text/xml; charset=utf-8";
        webRequest.CookieContainer = new CookieContainer();

        webRequest.Headers.Add("SOAPAction", "...webservice link...");
        webRequest.ProtocolVersion = new Version(1,1);
        webRequest.Timeout = 1000;

        using (StreamWriter stream = new StreamWriter(webRequest.GetRequestStream()))
        { 
            stream.Write(soapEnv); 
            stream.Flush();
            stream.Close();            
        }

        using (HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse())
        {
            using (StreamReader responseReader = new StreamReader(webResponse.GetResponseStream()))
            {
                if (responseReader != null)
                {
                    .....code....
                    webResponse.Close();
                }
            }            
        } 
```

# c++ - SystemParametersInfo 返回 0

> ID：14634908
> 
> 赞同：-1
> 
> 时间：2013-01-31T20:51:20.167
> 
> 标签：c++, winapi

```
#include <iostream>
#include <windows.h>
using namespace std;

int main(){
    LPWSTR test = L"C:/aizen.png";
    int result = SystemParametersInfo(SPI_SETDESKWALLPAPER, 0, test, SPIF_UPDATEINIFILE);
    if(result)
        cout << "Wallpaper set!";
    else
        cout << "NOOOOO!" << result;
    cin >> result;
    return 0;
} 
```

非常简单的代码，但结果返回 0。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:54:09.213

按照[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724947.aspx)中的说明进行操作，并致电`GetLastError`找出错误背后的原因。

一些可能的原因浮现在脑海中：

*   `SystemParametersInfo`不喜欢正斜杠作为分隔符。
*   系统不喜欢 .png 文件作为壁纸。
*   该文件不存在。
*   您的 ANSI/Unicode 编码不匹配。
*   您无权修改壁纸。

真的，名单是无穷无尽的。所以让系统告诉你。

* * *

请注意，文档说：

> 使用`SPI_SETDESKWALLPAPER`标志时，`SystemParametersInfo`始终返回`TRUE`.

但这是一个很大的谎言。`SPI_SETDESKWALLPAPER`调用函数、传递和接收`FALSE`作为回报非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:54:49.263

不知道我们掌握的信息。

该返回值表示调用失败。您需要致电`GetLastError()`了解原因。

# java - 从java应用程序运行php脚本？

> ID：14634909
> 
> 赞同：3
> 
> 时间：2013-01-31T20:51:20.403
> 
> 标签：java, php

我有 java 客户端应用程序，我需要在服务器上运行 PHP 脚本。PHP 脚本将创建一些 word 和 excel 文件，而不是我想在客户端机器上下载创建的文件。我可以以某种方式使用 URL，但不打开浏览器吗？然后从服务器下载创建的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T20:54:10.050

```
public class URLConnectionReader {
    public static void main(String[] argv) {
      try {
        URL phpUrl = new URL("http://server/myphp.php");
        URLConnection urlCon = phpUrl.openConnection();
        BufferedReader br = new BufferedReader(
                                new InputStreamReader(
                                urlCon.getInputStream()));
        String line;

        while ((line = br.readLine()) != null) 
            System.out.println(line);
        br.close();
      } catch(Exception e) {
        // handle errors here...
      }
    }
} 
```

> 您将需要修改 php 应用程序以接收有关结果的一些详细信息。文件位置或 MIME 中的文件。

但是您需要添加更多信息，以便我们为您提供帮助。

# java - 如何为 checkstyle 豁免编写超级注释？

> ID：14634912
> 
> 赞同：1
> 
> 时间：2013-01-31T20:51:42.617
> 
> 标签：java, annotations, checkstyle

我是注释新手。我想做的是写一个包含其他人的东西。我以前从未需要过，而且我对他们很陌生，所以这部分是为了学习经验。

我有一些第三方代码的 checkstyle 豁免，没有人愿意为我将豁免添加到 Sonar 服务器。我想要做的是编写一个超级注释，让我可以选择性地使用我的检查样式排除，而不是应用对我来说似乎很危险的@SupressWarnings("all")。提议的注释基本上只是应用@SupressWarnings（“将检查样式键放在这里”）组。第一个版本将仅排除所有检查样式。下一个版本将添加按类别、子类别等执行此操作的功能，以更接近叶排除。可以使用我能得到的任何建议。我正在阅读我现在可以得到的关于注释的内容，但也没有太多使用反射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:14:06.293

SuppressWarnings 注释是非常特定于编译器/IDE 的。您不能在其中创建自己的注释条目，从而神奇地修改 Java 编译器 - 除非您愿意进行项目龙目岛风格的代码生成以将 @SuppressWarnings("your-specific-syntax") 更改为各种其他 @SuppressWarnings。为此，您必须与 AST 进行交互。查看 Lombok 源代码并阅读注释处理工具 (APT)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:25:44.093

这已经内置在 Checkstyle 中。
您必须激活并设置一个特定的排除字符串，该字符串会触发 checkstyle 以忽略接下来 N 行的指定警告。

使用自定义 checkstyle 配置 checks.xml，并添加：

```
<module name="SuppressWithNearbyCommentFilter">
    <property name="commentFormat" value="CS\:IGNORE ([\w\|]+) (\d+)"/>
    <property name="checkFormat" value="$1"/>
    <property name="influenceFormat" value="$2"/>
  </module> 
```

现在您可以在行或方法上方使用注释忽略特定检查：

例子：

```
// CS:IGNORE Catch|MethodLength 10
public void longMethod() {
  // Method that would cause checkstlye to detetced a length and Catch Exception warning
} 
```

Catch|MethodLength ：忽略以下警告：Catch 和 MethodLength

10 表示：排除规则对接下来的 10 行有效。

# php - 在 localhost 上移动网站后报错：间接修改 CHttpSession 的重载元素没有效果

> ID：14634916
> 
> 赞同：1
> 
> 时间：2013-01-31T20:51:59.507
> 
> 标签：php, yii

我是 YII 的新手。我的朋友要求我在他的网站上添加一些功能。我想在我的本地主机上复制网站以制作工作副本。我得到了我不明白的错误。今天是谷歌搜索的第三天，最后我决定在论坛添加新主题:-)

您可以[在此处查看错误](http://latech.pl/yii/yii-increment.htm)

我相信[这个解决方案](http://www.yiiframework.com/forum/index.php/topic/11727-fine-on-localhost-fatal-error-on-live-server-why/page__p__57457__hl__indirect+modification#entry57457)可以在某种程度上有所帮助，但我什至不知道把这两行放在哪里：

```
$rating = $model->rating;

$rating = array_pop($rating); 
```

我将不胜感激任何评论和提示。

问候，伯纳德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:06:49.890

**编辑**：好吧，我错了，看看这里[http://www.yiiframework.com/doc/api/1.1/CDbCommand#bindParam-detail](http://www.yiiframework.com/doc/api/1.1/CDbCommand#bindParam-detail)

你必须[通过引用传递你的 var](http://www.php.net/manual/en/language.references.pass.php)，你不能用[Yii::app()->session](http://www.yiiframework.com/doc/api/1.1/CWebApplication#session-detail)来做这件事，因为它是一个[重载的属性](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)。

正如您在评论中所说，您可以简单地使用[bindValue](http://www.yiiframework.com/doc/api/1.1/CDbCommand#bindValue-detail)。

# c# - 如何使用 QrCode.net 库生成周围没有空白的 QR 码？

> ID：14634921
> 
> 赞同：0
> 
> 时间：2013-01-31T20:52:12.313
> 
> 标签：c#, .net, qr-code

```
 using Gma.QrCodeNet.Encoding;
    using Gma.QrCodeNet.Encoding.Windows.Controls;

    private QrEncoder Encoder = new QrEncoder(ErrorCorrectionLevel.H);
    private Renderer renderer = new Renderer(15);

    BitMatrix qr = Encoder.Encode("12345").Matrix;
    Size size = Renderer.Measure(qr.Width);

    Bitmap result = new Bitmap(size.Width, size.Width);
    try
    {
        using (Graphics graphics = Graphics.FromImage(result))
        renderer.Draw(graphics,qr);
        return result;
    }
    catch
    {
        result.Dispose();
        throw;
    } 
```

我可以使用上面的内容成功生成二维码。但是，它总是使它们在代码的所有方面都带有空格。有没有一种简单的方法可以删除空格，或者更好的是，不用它来生成代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:14:08.017

如果库不直接支持它，那么您总是可以再添加一个步骤来裁剪结果位图。

```
using (Graphics graphics = Graphics.FromImage(result))
    renderer.Draw(graphics,qr);

Rectangle cropRectangle = Rectangle(
    borderWidth,borderHeight,result.Width-borderWidth, 
    result.Height-borderHeight);    
return result.Clone(cropRectangle, bmp.PixelFormat); 
```

# magento - 单击 magento 中搜索结果产生的产品时，产品详细信息页面返回空白

> ID：14634922
> 
> 赞同：0
> 
> 时间：2013-01-31T20:52:20.150
> 
> 标签：magento, magento-1.7

我的 magento 网站有问题，当我通过类别单击产品时，会打开产品详细信息。但是当我通过搜索栏搜索产品并单击搜索结果产品时，产品详细信息不显示，它给了我一个空白页面。所有产品都设置为“目录，搜索”。

我调查了

```
 "frontend\default\modern\template\catalog/product/view.phtml" 
```

我在 view.phtml 中找不到任何不寻常的东西

谁能给我一个提示，我应该从哪里开始调试这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:08:00.127

打开 index.php 并取消注释`ini_set('display_errors', 1);`，打开 .htaccess 并添加`SetEnv MAGE_IS_DEVELOPER_MODE true`

重新加载并查看是否收到任何错误消息，如果没有，请检查您的网络服务器错误日志或 Magento exception.log 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T00:06:12.730

我不确定这里的问题是什么，但从调试开始，我认为在 code->Core->Mage->CatalogSearch->ResultController.php->indexAction() 处设置断点是个好主意。假设表单上的 action 属性设置为[http://www.yourwebsite.com/catalogsearch/result/](http://www.yourwebsite.com/catalogsearch/result/)

希望有帮助。

干杯，斯瓦普纳

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T11:50:58.537

这是解决方案：

转到管理面板 =>> 管理产品 =>> 选择显示空白页面的产品 =>> 从左侧进入设计 =>> 设置自定义设计、日期和页面布局的值...完成...

# python - ast.literal_eval：语法错误：解析时出现意外 EOF

> ID：14634925
> 
> 赞同：6
> 
> 时间：2013-01-31T20:52:32.960
> 
> 标签：python

当试图解析一个空字符串时，我得到一个`SyntaxError`. 为什么它会引发与解析 a 不同的错误`'foo'`？`ast.literal_eval`仅在来源中`ValueError`被明确提出。

```
In [1]: import ast

In [2]: ast.literal_eval('foo')
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-2-d8695a7c4a9f> in <module>()
----> 1 ast.literal_eval('foo')

/usr/lib/python2.7/ast.pyc in literal_eval(node_or_string)
     78                 return left - right
     79         raise ValueError('malformed string')
---> 80     return _convert(node_or_string)
     81 
     82 

/usr/lib/python2.7/ast.pyc in _convert(node)
     77             else:
     78                 return left - right
---> 79         raise ValueError('malformed string')
     80     return _convert(node_or_string)
     81 

ValueError: malformed string

In [3]: ast.literal_eval('')
  File "<unknown>", line 0

    ^
SyntaxError: unexpected EOF while parsing 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-31T21:00:34.043

`ast`用于`compile`将源字符串（必须是表达式）编译成 AST。

如果源字符串不是有效的表达式（如空字符串）， a`SyntaxError`将由`compile`. 另一方面，如果源字符串是一个有效的表达式（例如，一个变量名，如`foo`），`compile`将会成功，但随后`literal_eval`可能会失败并显示`ValueError`.

`SyntaxError`因此，您应该`ValueError`在使用`literal_eval`.

# python - 我如何确认 django 正在使用 xampp 的 mysql

> ID：14634939
> 
> 赞同：1
> 
> 时间：2013-01-31T20:53:34.443
> 
> 标签：python, mysql, django, xampp

我开始学习 django ，我正在尝试建立一个开发环境，如[http://www.venkysblog.com/setup-django-on-windows-with-apache-and-mysql](http://www.venkysblog.com/setup-django-on-windows-with-apache-and-mysql)。我无法使其正常工作，因此我正在向后工作以确保一切正确。

我可以完成第 4 步。我已经确认 python 、 xampp 和 django 工作。我使用 phpmyadmin 创建了一个名为 django 的数据库

我有一个名为 testproject 的项目，其 settings.py 文件包括：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'post
        'NAME': 'django',                      # Or path to database file if usi
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. No
        'PORT': '',                      # Set to empty string for default. Not
    }
} 
```

当我运行 $ python manage.py runserver 我得到：

验证模型...

发现 0 个错误 Django 版本 1.4.3，使用设置 'testproject.settings' 开发服务器运行在 htp://127.0.0.1:8000/ 使用 CTRL-BREAK 退出服务器。

此时是否有明确的方法来测试与“django”数据库的连接？

提前致谢，

账单

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T21:23:16.120

如果你这样做`manage.py syncdb`，它会尝试创建你的表，你会知道它是成功还是失败。

# android - 尝试在 Android 上编辑联系人

> ID：14634940
> 
> 赞同：0
> 
> 时间：2013-01-31T20:53:37.423
> 
> 标签：android, android-contacts, contactscontract

我正在尝试将用户发送到本机联系人应用程序，以便他们可以在那里编辑联系人，它在 V3.0+ 中运行良好但是在 2.3.3 的设备中它给了我一个例外，有人可以解释一下吗可能正在发生？

代码如下：

```
if(contactLookupKey != null) {
        Intent intent = new Intent(Intent.ACTION_EDIT);
        Uri lookupUri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, contactLookupKey);
        Uri res = ContactsContract.Contacts.lookupContact(getContentResolver(), lookupUri);
        intent.setData(res);

        this.isEditing = true;
        startActivity(intent);
} 
```

我得到以下异常：

```
01-31 15:51:50.544: E/AndroidRuntime(27867): java.lang.IllegalArgumentException: Invalid column _id
01-31 15:51:50.544: E/AndroidRuntime(27867):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:144)
01-31 15:51:50.544: E/AndroidRuntime(27867):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
01-31 15:51:50.544: E/AndroidRuntime(27867):    at android.content.ContentProviderProxy.bulkQueryInternal(ContentProviderNative.java:330)
01-31 15:51:50.544: E/AndroidRuntime(27867):    at android.content.ContentProviderProxy.query(ContentProviderNative.java:366)
01-31 15:51:50.544: E/AndroidRuntime(27867):    at android.content.ContentResolver.query(ContentResolver.java:268) 
```

在清单中我有：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    package="com.contactive"
    android:installLocation="auto"
    android:versionCode="17"
    android:versionName="0.8.5" >

<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" /> 
```

非常感谢！

# php - 订阅块的 PHP 代码

> ID：14634946
> 
> 赞同：-2
> 
> 时间：2013-01-31T20:54:01.010
> 
> 标签：php, web

```
<form action="mailer.php" method="post" novalidate>
<input  value="Your Name"  name="NAME"    class="autoclear name-newsletter"     >
<input  value="Your Email"  name="EMAIL"  class="email-newsletter"     >
<input  value="Your Phone"  name="PHONE"  class="phone-newsletter"   >
<input type="submit" value="submit" name="subscribe"  class="button-newsletter">
<label> * We will not forward your email address to any third party.</label>
</form> 
```

我只想设置一个 php 来发送包含上述信息的电子邮件，而不是订阅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:01:41.520

下面的示例将发送电子邮件，但您应该添加验证码，并可能添加其他形式的安全性以防止表单被发送垃圾邮件。

取自[PHP.net](http://php.net/manual/en/function.mail.php)

```
<?php
$success = '';

$to      = 'you@example.com';
$subject = 'Newsletter Subscriber';
$message = 'Name:  '.$_POST['NAME']."\r\n".
           'Email: '.$_POST['EMAIL']."\r\n".
           'Phone: '.$_POST['PHONE'];
$headers = 'From: webmaster@example.com' . "\r\n" .
           'Reply-To: webmaster@example.com' . "\r\n" .
           'X-Mailer: PHP/' . phpversion();

if(mail($to, $subject, $message, $headers)) {
  $success = "Success! Your email has been sent!";
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:00:32.427

您可以在此处使用 php 记录的邮件功能：

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

使用 post 数据在 mailer.php 上执行邮件功能。

编辑

此代码应该可以工作（将其放入 mailer.

```
<?php
$message = 'Name:  '.$_POST['NAME']."\n".
           'Email: '.$_POST['EMAIL']."\n".
           'Phone: '.$_POST['PHONE'];

mail($to, $subject, $message)
?> 
```

# c++ - CreateFile 返回错误 INVALID_HANDLE_VALUE（用于 COM 端口），GetLastError 返回“找不到指定的文件”

> ID：14634954
> 
> 赞同：5
> 
> 时间：2013-01-31T20:54:22.137
> 
> 标签：c++, winapi, serial-port

我正在打开一个端口来与设备通信并控制设备，但`CreateFile()`函数返回`INVALID_HANDLE_VALUE`.

`GetLastError()`返回`2`这意味着它找不到指定的文件。

我的代码如下所示：

```
wsprintf( szPort, "COM%d", nPort );
m_hIDComDev = CreateFile(szPort,
                         GENERIC_READ | GENERIC_WRITE, 
                         0, 
                         NULL, 
                         OPEN_EXISTING, 
                         FILE_ATTRIBUTE_NORMAL | FILE_FLAG_OVERLAPPED, 
                         NULL);
if (m_hIDComDev == INVALID_HANDLE_VALUE)
{
    DWORD err=GetLastError();
} 
```

为什么会出现这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T21:02:20.600

问题是您没有`lpFileName`为串行端口指定正确的值。您应该使用这种格式：

```
"\\\\.\\COM%d" 
```

这将产生一个看起来像 的字符串`\\.\COM1`，这是正确的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T19:58:55.977

尝试使用

```
char *szPort = _T("COM1"); // Change port number to your unused existing port 
```

`_T`强制将 szPort 保持为 ASCII。

# nuget - 通过 nuget 安装 SignalR

> ID：14634956
> 
> 赞同：3
> 
> 时间：2013-01-31T20:54:27.547
> 
> 标签：nuget, signalr

所有文章都说可以从以下位置安装 SignalR

```
Microsoft.AspNet.SignalR 
```

nuget 包。

但是这个包不能通过 VisualStudio 中的 nuget 界面使用，只有从控制台安装。

```
Install-Package Microsoft.AspNet.SignalR 
```

为什么？

它在这里也不可用[http://nuget.org/packages?q=signalr](http://nuget.org/packages?q=signalr)

你能解释一下安装 SignalR 的正确方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T21:02:30.187

SignalR 仍然是预发行版，因此您需要使用 -pre 选项从命令行安装它。据我所知，它应该在下一次 RTM 更新中可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T21:09:33.293

它可以在图库中找到：http: [//nuget.org/packages/microsoft.aspnet.signalr](http://nuget.org/packages/microsoft.aspnet.signalr)

用于`Install-Package Microsoft.AspNet.SignalR -Pre`从控制台安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:52:28.327

您也可以使用 VS 中的管理 Nuget 包 UI 来安装预发布包 [http://docs.nuget.org/docs/release-notes/nuget-2.2](http://docs.nuget.org/docs/release-notes/nuget-2.2)也有关于如何执行此操作的说明

# r - 如何更改 data.table 中因子列的级别

> ID：14634964
> 
> 赞同：56
> 
> 时间：2013-01-31T20:54:49.843
> 
> 标签：r, data.table

更改 a`factor`中列级别的正确方法是什么`data.table` （注意：不是数据框）

```
 library(data.table)
  mydt <- data.table(id=1:6, value=as.factor(c("A", "A", "B", "B", "B", "C")), key="id")

  mydt[, levels(value)]
  [1] "A" "B" "C" 
```

我正在寻找类似的东西：

```
mydt[, levels(value) <- c("X", "Y", "Z")] 
```

但是，当然，上面的行是行不通的。

```
 # Actual               # Expected result
    > mydt                  > mydt
       id value                id value
    1:  1     A             1:  1     X
    2:  2     A             2:  2     X
    3:  3     B             3:  3     Y
    4:  4     B             4:  4     Y
    5:  5     B             5:  5     Y
    6:  6     C             6:  6     Z 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-31T21:08:26.200

您仍然可以以传统方式设置它们：

```
levels(mydt$value) <- c(...) 
```

这应该非常快，除非`mydt`非常大，因为传统语法会复制整个对象。你也可以玩分解和重构的游戏……但无论如何，没有人喜欢这种游戏。

要通过引用更改级别而没有副本`mydt`：

```
setattr(mydt$value,"levels",c(...)) 
```

但一定要分配一个有效的级别向量（`character`足够长度的类型），否则你最终会得到一个无效的因素（`levels<-`做一些检查和复制）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-15T11:12:35.377

*我宁愿采用传统的方式重新分配因素*

```
> mydt$value # This we what we had originally
[1] A A B B B C
Levels: A B C
> levels(mydt$value) # just checking the levels
[1] "A" "B" "C"
**# Meat of the re-assignment**
> levels(mydt$value)[levels(mydt$value)=="A"] <- "X"
> levels(mydt$value)[levels(mydt$value)=="B"] <- "Y"
> levels(mydt$value)[levels(mydt$value)=="C"] <- "Z"
> levels(mydt$value)
[1] "X" "Y" "Z"
> mydt # This is what we wanted
   id value
1:  1     X
2:  2     X
3:  3     Y
4:  4     Y
5:  5     Y
6:  6     Z 
```

正如您可能注意到的那样，**重新分配**的内容非常直观，它会检查确切的内容`level`（用于`grepl`存在模糊数学、正则表达式或类似情况的情况）

`levels(mydt$value)[levels(mydt$value)=="A"] <- "X"` *这会显式检查* `levels` *正在考虑的变量的值，然后重新分配`X`（等等）给它 - 优点 - 你明确知道什么标记了什么。*

我发现在这里重命名级别`levels(mydt$value) <- c("X","Y","Z")`非常**不直观**，因为它只是分配`X`给它在数据中看到的第一个级别（所以顺序真的很重要）

PPS：如果级别太多，请使用循环结构。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-31T21:44:30.793

您还可以使用相关方法重命名并添加到您的关卡，这非常方便，特别是如果您正在制作一个需要以特定顺序（而不是默认顺序）提供更多信息标签的绘图：

```
f <- factor(c("a","b"))
levels(f) <- list(C = "C", D = "a", B = "b") 
```

（修改自`?levels`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-20T03:19:04.493

这比 Matt Dowle 的建议更安全（因为它使用了 setattr 跳过的检查），但不会复制整个 data.table。它将替换整个列向量（而马特的解决方案只替换列向量的属性），但这似乎是一个可以接受的权衡，以减少弄乱因子对象的风险。

```
mydt[, value:=`levels<-`(value, c("X", "Y", "Z"))] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-20T14:07:34.280

更改列级别的最简单方法：

`dat$colname <- as.factor(as.vector(dat$colname));`

# php - 编辑 WordPress 主题以类似于基于相同主题的另一个站点

> ID：14634966
> 
> 赞同：0
> 
> 时间：2013-01-31T20:54:53.163
> 
> 标签：php, html, css, wordpress

使用 Suburbia Word Press 主题构建基于 Word Press 的网站。

试图让主页类似于这个使用相同主题的网站（ [http://appazoogle.com/ ）。](http://appazoogle.com/)我需要对帖子的传讯类似于 appazoogle 主页上的帖子。秘诀是什么？

我的网站是： http: [//galleryeastnetwork.com/wordpress/](http://galleryeastnetwork.com/wordpress/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:02:30.827

如果您谈论的是前 3 篇文章比网站的其他部分更广泛，那么您似乎只需将前 3 篇文章的 HTML 类更改`post one`为`post two`

提供有关您正在尝试做的事情的更多信息，我很乐意提供帮助

这将发生在您评论的部分，`FIRST LOOP`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:03:55.357

很难说你想消除什么具体的差异。如果是顶上的那两个大贴子，就得从这里修改Suburbia主题的home.php了

```
<?php get_header(); ?>

    <?php include (TEMPLATEPATH . "/sidebar.php"); ?>        
    <?php
        if ( $paged == 0 ) {
            $offset1 = 0;
            $offset2 = 2;
        } else {
            $off = $paged - 1;
            $offset1 = $off * 7;
            $offset2 = $off * 7 + 2;
        }
    ?>
    <!-- LOOP1 -->
    <?php if (have_posts()) : ?>
    <?php query_posts('posts_per_page=2&offset='.$offset1); ?>
    <?php while (have_posts()) : the_post(); ?>
    <div class="post two"> 
```

对此：

```
<?php get_header(); ?>

    <?php include (TEMPLATEPATH . "/sidebar.php"); ?>        
    <?php
        if ( $paged == 0 ) {
            $offset1 = 0;
            $offset2 = 4;
        } else {
            $off = $paged - 1;
            $offset1 = $off * 7;
            $offset2 = $off * 7 + 4;
        }
    ?>
    <!-- LOOP1 -->
    <?php if (have_posts()) : ?>
    <?php query_posts('posts_per_page=4&offset='.$offset1); ?>
    <?php while (have_posts()) : the_post(); ?>
    <div class="post one"> 
```

这不仅仅是关于课堂。这也是关于正确的偏移量。

# mysql - MySQL - 从具有对数据库的只读访问权限的自定义字段中获取数据

> ID：14634968
> 
> 赞同：0
> 
> 时间：2013-01-31T20:54:55.457
> 
> 标签：mysql

我有一个包含数据的文本字段，例如：

```
[{"id":10001,"timeStarted":1355729600733,"projectId":10002,"issueId":"29732,","userName":"tester","assignee":"test","status":"STARTED","shared":True,"name":"Session 4","projectName":"IDS","assigneeDisplayName":"First1 Last1"},
 {"id":10002,"timeStarted":1358354188010,"projectId":10002,"issueId":"","userName":"tester","assignee":"test","status":"CREATED","shared":True,"name":"asdf98798","projectName":"IDS","assigneeDisplayName":"First Last"}] 
```

但如果行数更多，它可能是 30-40，并且可能是另外 2 个不同的状态（总共 4 个）。

是否可以从这里提取一些对 DB 具有只读访问权限且仅使用 MySQL 查询的数据？

例如，计算状态为“已声明”和状态为“已创建”的项目数。可能会应用其他条件，例如 id 处于确定区间内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T23:55:51.013

假设您使用的是 PHP，首先您最好纠正那些无法识别的布尔值。你有`True`它应该在的地方`true`（*或者* `TRUE`对于 PHP），它可以正确地评估数据。

```
$jsStr = preg_replace_callback(
'~(?<=[,{[])(".+?"\s*:\s*)(true|false)(?=\s*[,}\]])~i',
create_function('$m','return $m[1].strtolower($m[2]);'),
$jsStr); 
```

然后为了能够处理它，您需要使用该[`json_decode()`](http://php.net/manual/en/function.json-decode.php)功能。

```
$parsed = json_decode($jsStr);
// see the result if you like:
// print_r($parsed); 
```

最终，如果您想在客户端提取一些特定信息（使用 Javascript），您可以使用 Array filter() 函数，如果您不使用 jQuery，则可以使用循环。否则，您可以在必要条件下使用[jQuery`filter()`函数](http://api.jquery.com/filter/)。

如果您想在 PHP 中执行此操作，则在将字符串解析为 JSON 后，您可以使用适用于 Javascript 的解决方案。

# c# - 实体框架无效的列名

> ID：14634969
> 
> 赞同：0
> 
> 时间：2013-01-31T20:55:03.117
> 
> 标签：c#, entity-framework, entity

我在实体框架方面遇到了更多问题。其中一个已在此处解决[实体框架多个表同名](https://stackoverflow.com/questions/14185189/entity-framework-4-1-two-tables-with-the-same-property-name)

现在，当我尝试插入表 bo 或表 bi 时，出现以下错误：

> {"无效的列名 'Bo_obrano'。\r\n无效的列名 'Bo_boano'。\r\n无效的列名 'Bo_ndos'。"}

或者

`{"Invalid column name 'Bi_bistamp'}`

当我通过使用电动工具对数据库进行反向工程时，我现在有我的 bo 映射，如下所示：

```
public boMap()
    {
    // Primary Key
    HasKey(t => new { t.obrano, t.boano, t.ndos });

     Property(t => t.obrano)
         .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
     Property(t => t.boano)
         .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
     Property(t => t.ndos)
         .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);
    } 
```

和像这样的双向映射：

```
public BiMap()
        {
            // Primary Key
            HasKey(t => t.bistamp);
.... 
```

我的上下文类如下所示：

```
public class PHCDbContext:DbContext
    {
        //classes mapeadas via reverse
        public DbSet<Bi> DadosLinhasEncomendas { get; set; }
        public DbSet<Bo> DadosCabecalhosEncomendas { get; set; }
...

     public PHCDbContext(string connection):base(connection)
            {

                Database.SetInitializer<PHCDbContext>(null);
            }

            protected override void OnModelCreating(DbModelBuilder modelBuilder)
            {
                modelBuilder.Configurations.Add(new BiMap());
                modelBuilder.Configurations.Add(new boMap());
    .... 
```

我按照此处的说明导出了映射： [export code first model mapping](https://stackoverflow.com/questions/10738382/ef-codefirst-get-pocos-configuration)

我发现这些字段本身并不存在。当我在 Visual Studio 中打开 edmx 文件时，我发现这些字段位于类的导航属性中，在模型的关联部分中。它们代表表中的主键，而不是外键。但它们没有映射到 poco 类中的任何值。对数据库中的任何列都要少得多。那么我该如何解决呢？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:03:38.157

我通过删除导航属性让它工作。因为表格之间没有任何关联。到目前为止，他们俩都被隔离了。再次感谢您的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:05:05.033

您的情况看起来有点不寻常，但是您需要查看您的数据库并查看列名是什么，然后将其映射到上下文中：

```
protected override void OnModelCreating( DbModelBuilder modelBuilder )
{
    modelBuilder.Entity<Bi>( ).ToTable( "dbo.Bi" );
    modelBuilder.Entity<Bi>( ).Property( p => p.bistamp).HasColumnName("actualName" ); 
} 
```

# sql - 嵌套 SQL Server 查询最大日期

> ID：14634972
> 
> 赞同：0
> 
> 时间：2013-01-31T20:55:21.657
> 
> 标签：sql, sql-server, tsql

女士们先生们，

我需要编写一个从视图中获取数据的查询，但我不知道该怎么做。问题是实际上没有键，我关心的两个字段将控制我需要检索的行。

视图看起来像这样：

```
Category   columna   columnb   uploaddate 
-----------------------------------------------------
   a        value     value    1/30/2013 04:04:04:000 
   a        value     value    1/29/2013 04:04:04:000 
   b        value     value    1/28/2013 01:23:04:000 
   b        value     value    1/30/2013 04:04:04:000 
   b        value     value    1/30/2013 04:04:04:000 
   c        value     value    1/30/2013 01:01:01:000 
   c        value     value    1/30/2013 01:01:01:000 
```

我需要检索的是每个唯一类别和最新的所有行`uploaddate`。所以在上面的例子中，我会得到 1 行的类别 a ，它有最新的`uploaddate`. 类别 b 将有 2 行日期为 2013 年 1 月 30 日。类别 c 也将有两行。

我还需要比较上传日期，而不是时间。因为加载可能需要几秒钟。我试图使用最大日期，但它只会抓住时间到第二个。

任何指导/想法都会很棒。

谢谢！

编辑：

这是我到目前为止汇总的内容，我认为它已经接近但它还没有工作，我怀疑这是最有效的方法。

```
select 
    * 
from 
    VIEW c 
    INNER JOIN 
    ( 
        SELECT 
            Category, 
            MAX(CONVERT(DateTime, Convert(VarChar, UploadDate, 101))) as maxuploaddate  
        FROM 
            View 
        GROUP BY 
            Category, 
            UploadDate 
    ) temp ON temp.Category = c.Category AND CONVERT(VarChar, UploadDate, 101) = temp.maxuploaddate 
```

问题在于嵌套的选定语句，因为它仍在获取类别和上传日期的所有组合。有没有办法在 Category 和 UploadDate 上做一个区分，只是得到最新的组合？

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:22:14.500

如果要执行此操作到最近的日期，则需要先转换为日期。在 SQL Server 语法中：

```
select *
from (select category, columna, columnb, uploaddate,
             rank() over ( partition by category order by cast(uploaddate as date) desc) as seqnum
      from view
     ) v
where seqnum = 1 
```

在 Oracle 语法中：

```
select *
from (select category, columna, columnb, uploaddate,
             rank() over ( partition by category order by to_char(uploaddate, 'YYYY-MM-DD') desc) as seqnum
      from view
     ) v
where seqnum = 1 
```

因为你想要领带，所以这些使用`rank()`而不是`row_number()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T14:09:26.773

您的查询已关闭，您在 group by 中有错误。我也会摆脱日期转换；日期比较工作正常。

```
select 
    * 
from 
    VIEW c 
    INNER JOIN 
    ( 
        SELECT 
            Category, 
            MAX(UploadDate) as maxuploaddate  
        FROM 
            View 
        GROUP BY 
            Category
    ) temp ON temp.Category = c.Category AND UploadDate = temp.maxuploaddate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T21:17:06.697

在 Oracle 中您可以使用它`Rank()`来实现这一点。`Rank()`如果满足相同的条件，则会创建一个重复的号码。

编辑：您可以使用[Trunc()](http://psoug.org/definition/TRUNC.htm)从上传日期“修剪”时间。

```
select *
from (select category, columna, columnb, uploaddate,
      rank() over ( partition by category order by trunc(uploaddate) desc) rank
      from view)
where rank = 1 
```

也`Dense_Rank()`存在，不会产生重复的数字。所以这里不适用。有关差异的更多信息，请参阅[此问题](https://stackoverflow.com/questions/11183572/whats-the-difference-between-rank-and-dense-rank-functions-in-oracle)。

# ios - 在 Cocos2d 2.0 中轻松创建按钮

> ID：14634976
> 
> 赞同：0
> 
> 时间：2013-01-31T20:55:35.987
> 
> 标签：ios, cocos2d-iphone

我看到了一篇关于制作 Button 类以在 Cocos2d 中使用的非常棒的帖子：http: [//johnehartzog.com/2009/10/easy-to-create-buttons-with-cocos2d/](http://johnehartzog.com/2009/10/easy-to-create-buttons-with-cocos2d/)

我喜欢这个想法，因为它确实简化了按钮的创建，但他似乎使用的是旧版本的 Cocos2d，我无法让他的代码正常工作。

```
@interface Button : Menu {  // !Cannot find interface declaration for 'Menu', superclass of Button
}
+ (id)buttonWithText:(NSString*)text atPosition:(CGPoint)position target:(id)target selector:(SEL)selector;
+ (id)buttonWithImage:(NSString*)file atPosition:(CGPoint)position target:(id)target selector:(SEL)selector;
@end

@interface ButtonItem : MenuItem {  // !Cannot find interface declaration for 'MenuItem'...
    Sprite *back;        // !Unknown type name Sprite
    Sprite *backPressed;
}
+ (id)buttonWithText:(NSString*)text target:(id)target selector:(SEL)selector;
+ (id)buttonWithImage:(NSString*)file target:(id)target selector:(SEL)selector;
- (id)initWithText:(NSString*)text target:(id)target selector:(SEL)selector;
- (id)initWithImage:(NSString*)file target:(id)target selector:(SEL)selector;
@end 
```

将所有内容更改为 CCMenu，CCSprite 并不能解决问题。Button.m中也有很多相关的错误

有没有类似的代码可以与 Cocos2d 2.0 一起使用来制作简单的按钮？还是我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T22:54:27.293

不同版本的 Cocos2d 之间的向后兼容性是一项棘手的任务。我可以推荐使用[cocosbuilder](http://cocosbuilder.com)创建菜单吗？它有大约一个小时左右的学习曲线，但会为你节省更多的时间。

# magento - Magento 将采购订单状态更改为处理中

> ID：14634979
> 
> 赞同：2
> 
> 时间：2013-01-31T20:55:46.207
> 
> 标签：magento

![采购订单](../Images/4d450e52ab4276917ad5a26697c32fdf.png)

我需要将采购订单付款设置为处理状态，以便这些销售数字显示在仪表板上。我搞砸了系统>订单状态，但不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:06:05.030

尝试 openinig`app/code/core/Mage/Payment/etc/system.xml`更改节点 *purchaseorder >order_status > source_model* from`system_config_source_order_status_new`以`system_config_source_order_status`刷新 Magento 的缓存并检查。

# jquery - jquery：从 $(this) 中提取值

> ID：14634980
> 
> 赞同：0
> 
> 时间：2013-01-31T20:55:48.177
> 
> 标签：jquery, extract, numeric

> **可能重复：**
> [Javascript / Jquery - 从字符串中获取数字](https://stackoverflow.com/questions/3955345/javascript-jquery-get-number-from-string)

使用

```
var id = $(this).attr("class"); 
```

我得到了点击链接的所有类，var id 返回 4 个类：

```
button_red 501 ajax-call class2 
```

如何提取类 '501' 并将其放入类似的 var 中`var id_numeric = 501`？

谢谢你的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T21:04:08.773

假设您使用的是 HTML5 文档类型，您可能会使用`data-`属性而不是 CSS 类。例如：

```
data-id="501" 
```

然后要么

```
var id = $(this).attr("data-id"); 
```

或者

```
var id = $(this).data("id"); //[1] 
```

会工作。

参考：

[1] [http://tutorialzine.com/2010/11/jquery-data-method/](http://tutorialzine.com/2010/11/jquery-data-method/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T20:57:18.373

```
var numericClassIdMatches = $(this).attr('class').match(/\b\d+\b/); 
```

在上述情况下，`501`将是`numericClassIdMatches[0]`

# php - 使用 HTTP 身份验证

> ID：14634981
> 
> 赞同：20
> 
> 时间：2013-01-31T20:56:11.633
> 
> 标签：php, jquery

我正在用 PHP 构建一个 REST API 以使用基于 JavaScript 的应用程序。所有请求都作为 JSON 处理，有些请求需要身份验证。

一个示例请求是：

```
$.ajax({
    type: 'GET',
    url: 'http://domain.com/api/posts/recent.json',
    headers: {
        Authorization: 'X-TRUEREST ' + $.param({
            username: 'johndoe',
            password: '********'
        })
    },
    success: function(response){
            // Handle response here (includes auth errors too)
    },
    error: function(a,b,c) {

    }   
}); 
```

我基于此插件中的代码使用 HTTP 身份验证标头：[https ://github.com/kvz/cakephp-rest-plugin/blob/master/Controller/Component/RestComponent.php#L532](https://github.com/kvz/cakephp-rest-plugin/blob/master/Controller/Component/RestComponent.php#L532)

如您所见，它们使用标头传递的参数，然后用于将用户登录到系统（如果还没有的话）。据我所知，他们希望身份验证凭据与数据请求一起传递。

这方面的一个例子是（注意在我的示例应用程序中**没有**使用 CakePHP）：

```
if ( $loggedIn ) { // logged in is true of false based on session existing

    // Then return the JSON as normal

} else {

    // Grab HEADERS INFO

    $headers = $_SERVER['HTTP_AUTHORIZATION'];
    $parts = explode(' ', $_SERVER['HTTP_AUTHORIZATION']);

    // Then use the parts to find a user in the DB... and populate $user

    if($user){

        $this->Auth->login($user); // login the user with our authentication code

        // Then return JSON as normal

    } else {
        print json_encode(array('auth'=>false))
    }

} 
```

我有几个问题：

***问题 1：***为什么要使用 HTTP Authentication 和 headers？据我所知，除非我不正确地使用它们，否则他们不会为我提供任何东西？为什么不直接在 JS 的数据参数中传递用户名和密码呢？

***问题 2：***如前所述，我的 API 设计基于上面的 Cake 插件，但据我所知，他们总是在每个请求中传递用户名和密码，然后在用户登录时决定是否使用它。是这对吗？对我来说，身份验证和数据请求似乎更有可能分开处理。否则我将不得不将用户名和密码存储在我的 JavaScript 中的某个地方，以便我可以随每个请求一起发送它。

这让我想到了下一个问题......

***问题3：***如何知道用户是否登录？我可以将变量设置为 true，然后将其作为 JSON 的一部分传递给每个请求，但是会话可以与外部设备一起使用吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-03T20:47:53.550

如果你正在设计一个 REST api，你应该遵守[REST 原则](http://en.wikipedia.org/wiki/Representational_state_transfer#Guiding_principles_of_the_interface)。有两个重要的认证需要强调：

1.  通过 URI 识别资源
2.  通过服务器提供的链接进行状态转换。

要遵守原则 1，您需要将身份验证*排除在 URI 之外*。 `http://example.org/list-of-stuff?auth-token=12345`不是*与 不同的资源*，`http://example.org/list-of-stuff?auth-token=67890`因此它不应具有不同的 URI。拥有不同的 URI 也使得无法跨不同用户缓存资源。

通常，如果资源会因某些条件而有所不同，则该条件需要在 URI 中。例如，许多网站都有一个`/profile`url，但您看到的配置文件取决于不可见的“谁登录”状态。这*不是 RESTful*。相反，url 应该包含用户，例如`/profiles/username`. 您是否真正能够*看到*该资源取决于您是否有权查看它，这取决于您是否被认证为被授权的用户。身份验证是与资源识别不同的层。（例如，假设您有一个管理员用户可以查看其他人的个人资料。如果您只有一个`/profile`url，您将如何设计一种方法让他查看其他配置文件？显然，资源的存在与查看它的能力以及查看它的人不同。）

所以我们已经确定不应该通过 URI 中的参数进行身份验证。由于我们使用的是 HTTP，我们可以在标头中提供它，也可以在 HTTP 本身之外提供它。

虽然不是很常见，但一些 REST API 使用客户端证书在 SSL 层处理身份验证。从技术角度来看，这很棒，但[用户体验令人费解和糟糕](http://pilif.github.com/2008/05/why-is-nobody-using-ssl-client-certificates/)。虽然这篇文章是 2008 年的，但没有任何改进。这种方法也不容易从浏览器 JS 编写脚本，即使在浏览器之外，编写必须提供客户端证书的应用程序也很麻烦。服务器端的开发也很困难，因为大多数 Web 脚本环境根本无法让您轻松访问 SSL 层的东西，更不用说更深奥的 SSL 功能，如客户端证书。您的应用程序可能无法知道随请求提供的证书身份。

这样就在标头中留下了 HTTP。我们既可以使用传统的基于 cookie 的身份验证，也可以使用 HTTP 原生支持的 HTTP 身份验证，在特殊 URL 上“登录”并获取令牌。

HTTP 身份验证在 RESTful 原则方面要优越得多，因为它是无状态的。（这使您的第三个问题变得荒谬——没有“登录”或“注销”状态——您要么为请求提供了正确的凭据，要么没有！）您不需要确保您第一次访问一个特殊的 url 并获得了一个需要保存的魔法令牌（可能会突然过期），您每次只需使用您的凭据发出请求。如果您无权访问资源，则有特定的 HTTP 响应代码 (401) 和标头（WWW-Authenticate、Authorization）和一组明确定义的行为。它也可以通过不同的授权方法进行扩展。也有相当多的 javascript 支持，至少如果您坚持使用 XmlHTTPRequest。（见鬼，jQuery 1.7。

缺点是唯一常用且支持良好的 HTTP 身份验证方法是 Basic 和 Digest，它们都不是很安全。*如果您只使用 https* ，它们可能很好，但否则它们很糟糕。

此外，HTTP 身份验证对于人类正常使用浏览器毫无用处：没有自定义登录页面，无法呈现“忘记密码”功能或其他身份验证自定义，并且浏览器制造商仍然没有提供简单的“注销”方法（即，忘记当前领域的凭据）！

基于 Cookie 的身份验证为您提供了最大程度的控制，但您需要保持服务器端和客户端身份验证状态，并担心一大堆其他安全问题，例如[会话固定](http://en.wikipedia.org/wiki/Session_fixation)，甚至*是会话的组成部分*！是 IP 地址、用户代理还是某种组合？在我们过期之前，经过身份验证的会话应该有效多长时间？如果涉及代理并且 IP 地址经常更改怎么办？魔法令牌过期了怎么办？当用户没有被授权时，我们该怎么办？（您不能使用 HTTP 401 响应——您需要定义自己的特定于您的站点的方法。）本质上，您需要定义自己的复杂会话和身份验证协议或采用其他人的。至少对于 HTTP 身份验证，您唯一需要担心的是攻击者会读取您的 Authenticate 标头，而使用 SSL 可以解决该问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-03T19:06:19.117

> 问题 1：为什么要使用 HTTP Authentication 和 headers？据我所知，除非我不正确地使用它们，否则他们不会为我提供任何东西？为什么不直接在 JS 的数据参数中传递用户名和密码呢？

此处的 HTTP 身份验证似乎是开发人员的个人选择。您可以使用[OpenID](https://openid.stackexchange.com/)。您可以使用令牌。您可以使用 HTTP 标头身份验证。您可以使用[会话](http://php.net/manual/en/features.sessions.php)/ [cookies](http://php.net/manual/en/function.setcookie.php)。哎呀，如果您愿意，您甚至可以使用[RSA 密钥身份验证](https://en.wikipedia.org/wiki/RSA)或[SSL 客户端证书](http://pilif.github.com/2008/05/why-is-nobody-using-ssl-client-certificates/)。

* * *

> 问题 2：如前所述，我的 API 设计基于上面的 Cake 插件，但据我所知，他们总是在每个请求中传递用户名和密码，然后在用户登录时决定是否使用它。是这对吗？对我来说，身份验证和数据请求似乎更有可能分开处理。否则我将不得不将用户名和密码存储在我的 JavaScript 中的某个地方，以便我可以随每个请求一起发送它。

**您永远**不应该以纯文本形式公开***任何内容***的用户名和密码（从技术上讲，您甚至不应该这样存储它，但这不是问题所在）。使用带有 API 的公共令牌或唯一的 cookie ID。就个人而言，我用来查看用户是否登录了任何东西。如果必须，让 AJAX 提交，然后在内部将 ID 映射到令牌。**`$_SESSION["id"]`**

 *** * *

> 问题3：如何知道用户是否登录？我可以将变量设置为 true，然后将其作为 JSON 的一部分传递给每个请求，但是会话可以与外部设备一起使用吗？

我有一个用于[此答案](https://stackoverflow.com/a/14675492/1698924)的函数。理想情况下，您应该使用会话检查有效登录，并将索引的值（例如`$_SESSION["id"]`）设置为该帐户唯一的值（通常，这是他们的数据库 ID）。

**编辑：**阅读 OP 上的评论后，您必须确保会话 cookie 在发出请求*之前已登录的任何设备上*

不要**将**字段作为`value: true`登录名，因为这是一个安全漏洞。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-03T22:51:36.673

我认为您在使用 URI 将信息传递给 REST api 和使用 http 简单身份验证授权对特定服务器的访问之间进行混合（可能是故意的）。

HTTP 身份验证也可用于处理用户，但这不是一个很好的选择（如其他答案中所述）。用户、会话、安全令牌等应该由应用程序逻辑处理，而 api 访问也可以由服务器保护（使用 http 简单或摘要安全、NTLM、IP 过滤或其他）。让 Web 服务器承担一些安全负担/分离问题/某种测试站点/等等。

一个示例场景正在处理测试区域服务器中受保护的服务器访问的 http 安全性，而应用程序 REST api 将接受并处理通过服务器安全检查的每个人的不同用户、令牌、权限级别等。

寻找这个[问题](https://stackoverflow.com/questions/5110361/what-is-http-authorization)以获得更多参考

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-06T15:28:13.797

> 问题 1：为什么要使用 HTTP Authentication 和 headers？据我所知，除非我不正确地使用它们，否则他们不会为我提供任何东西？为什么不直接在 JS 的数据参数中传递用户名和密码呢？

查询字符串是 URI 的一部分。URI 是 REST 的资源标识符，因此它是资源状态的一部分。用户的身份、凭据等......是客户端状态的一部分。通过将客户端状态添加到 URI 来混合客户端状态和资源状态将违反 REST 的无状态约束。其他请求的数据部分，如 POST、PUT、DELETE 用于描述资源表示，因此您不应使用它发送 auth 数据。发送 headers 是最好的方法，因为 HTTP 有一个专用的 Authorization header，你应该使用它。

> 问题 2：如前所述，我的 API 设计基于上面的 Cake 插件，但据我所知，他们总是在每个请求中传递用户名和密码，然后在用户登录时决定是否使用它。是这对吗？对我来说，身份验证和数据请求似乎更有可能分开处理。否则我将不得不将用户名和密码存储在我的 JavaScript 中的某个地方，以便我可以随每个请求一起发送它。

您的服务器应该对每个请求进行身份验证，以保持无状态。我不确定这个库的逻辑，我认为登录是描述发生了什么的错误术语，但从 REST 的角度来看，实现细节并不重要，只要它正确使用 HTTP 标准，并且通信是无状态的。自从您提出问题以来，代码已更改。

> 问题3：如何知道用户是否登录？我可以将变量设置为 true，然后将其作为 JSON 的一部分传递给每个请求，但是会话可以与外部设备一起使用吗？

服务器不关心客户端是否登录，因为它是客户端状态。如果您发送需要权限的请求，那么您必须发送验证用户所需的数据。**

# mysql - WHERE 子句附近的 SQL 语法错误

> ID：14634987
> 
> 赞同：1
> 
> 时间：2013-01-31T20:56:24.490
> 
> 标签：mysql, coldfusion, coldfusion-9

谁能告诉我这个查询有什么问题？

```
<cfquery name="activesurveys">
      SELECT surveys.id,
             surveys.name,
             surveys.description,
      WHERE  surveys.active= 1
        AND  surveys.showinpubliclist= 1
     FROM 
             surveys
</cfquery>
<cfreturn activesurveys> 
```

当我执行此代码时，它会出现此错误：

> “您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 4 行的 'WHEREsurveys.active=1 ANDsurveys.showinpubliclist=1' 附近使用”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T20:59:28.087

我认为您的查询应该是：

```
SELECT surveys.id,
    surveys.name,
    surveys.description
FROM surveys
WHERE surveys.active= 1
    AND surveys.showinpubliclist= 1 
```

基本上，在`,`您要选择的最后一个字段之后有一个，这是错误的，而且还有一个事实是`FROM`在之后`SELECT`和之前`WHERE`......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T20:59:51.210

您需要重新排序您的语句。`FROM`需要在`WHERE`. 在`SELECT`. 应该看起来像这样：

```
<cfquery name="activesurveys">
    SELECT surveys.id,
           surveys.name,
           surveys.description
    FROM  surveys
    WHERE surveys.active = 1
      AND surveys.showinpubliclist = 1
</cfquery>
<cfreturn activesurveys> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-31T20:59:49.557

我不知道 ColdFusion 但 SQL 语法是

```
SELECT surveys.id,
       surveys.name,
       surveys.description
FROM 
       surveys
WHERE  surveys.active= 1
       AND surveys.showinpubliclist= 1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T21:01:30.257

删除最后一列名称“surveys.description”末尾的逗号，并将 FROM 语句移到 WHERE 子句之前。像这样

```
SELECT colname, colname, colname
FROM tablename

WHERE condition... 
```

# c++ - 如何使用子字符串查找数字行的正确部分？

> ID：14634991
> 
> 赞同：0
> 
> 时间：2013-01-31T20:56:42.740
> 
> 标签：c++, substr

处理我需要实现子字符串知识的分配，但我遇到了编译错误。

```
#include <iostream> 
#include <iomanip> 
#include <conio.h> 
#include <string> 
#include <string.h>
using namespace std;

 int main() {
     string K;
     cout << "Sisestage isikukood:\n ";
     getline(cin, K);
     /* Küsin kasutajalt isikukoodi*/
     std::string str2 = K.substr(1, 1);
     std::string str3 = K.substr(2, 2);
     std::string str4 = K.substr(4, 2);
     std::string str5 = K.substr(6, 2);
     cout << "Isikukoodi I andmed:\n ";
     if(std::string str2 == "1") {
         cout << " *mees\n";
     } else if(std::string str2 == "2") {
         cout << " *naine\n";
     } else if(std::string str2 == "3") {
         cout << " *mees\n";
     } else if(std::string str2 == "4") {
         cout << " *naine\n";
     } else if(std::string str2 == "5") {
         cout << " *mees\n";
     } else if(std::string str2 == "6") {
         cout << " *naine\n";
     }
     std::cout << "* sundis " << str3 << "." << str4 << ".";
     else if(std::string str2 == "2" || std::string str2 == "1") {
         cout << "18" << str5 << ;
     } else if(std::string str2 == "3" || std::string str2 == "4") {
         cout << "19" << str5 << ;
     } else if(std::string str2 == "5" || std::string str2 == "6") {
         cout << "20" << str5 << ;
     }

 } else { /*Tulemus,kui isikukuud on sisestatud valesti*/
     cout << " Sisestasite isikukoodi " << K << " nime valesti.Palun proovige uuesti.\n";
 }
 getch();
 return 0;
 } 
```

```
C:\programs\c\Untitled1.cpp: In function `int main()':
C:\programs\c\Untitled1.cpp:19: error: expected primary-expression before "str2"
C:\programs\c\Untitled1.cpp:19: error: expected `)' before "str2"
C:\programs\c\Untitled1.cpp:24: error: expected primary-expression before "str2"
C:\programs\c\Untitled1.cpp:24: error: expected `)' before "str2"
C:\programs\c\Untitled1.cpp:28: error: expected primary-expression before "str2"
C:\programs\c\Untitled1.cpp:28: error: expected `)' before "str2"
C:\programs\c\Untitled1.cpp:32: error: expected primary-expression before "str2"
C:\programs\c\Untitled1.cpp:32: error: expected `)' before "str2"
C:\programs\c\Untitled1.cpp:36: error: expected primary-expression before "str2"
C:\programs\c\Untitled1.cpp:36: error: expected `)' before "str2"
C:\programs\c\Untitled1.cpp:40: error: expected primary-expression before "str2"
C:\programs\c\Untitled1.cpp:40: error: expected `)' before "str2"

C:\programs\c\Untitled1.cpp:45: error: expected primary-expression before "else"
C:\programs\c\Untitled1.cpp:45: error: expected `;' before "else"
C:\programs\c\Untitled1.cpp:49: error: expected primary-expression before "else"
C:\programs\c\Untitled1.cpp:49: error: expected `;' before "else"
C:\programs\c\Untitled1.cpp:53: error: expected primary-expression before "else"
C:\programs\c\Untitled1.cpp:53: error: expected `;' before "else"
C:\programs\c\Untitled1.cpp: At global scope:
C:\programs\c\Untitled1.cpp:59: error: expected unqualified-id before "else"
C:\programs\c\Untitled1.cpp:59: error: expected `,' or `;' before "else"
C:\programs\c\Untitled1.cpp:62: error: expected constructor, destructor, or type conversion before ';' token
C:\programs\c\Untitled1.cpp:63: error: expected unqualified-id before "return"
C:\programs\c\Untitled1.cpp:63: error: expected `,' or `;' before "return"

C:\programs\c\Untitled1.cpp:64: error: expected declaration before '}' token

Execution terminated 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:01:42.623

几个问题：

*   您过早终止 main() ，多余的大括号就在您的`else`声明之前。
*   `std::string str# == something`当语法不正确时，您继续使用, 。试试吧，因为无论如何`str# == something`它们都是s。`std::string`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T23:31:15.623

除了多余的括号之外，不幸的是，这段代码充满了错误。

要修复您的代码，您希望在您的条件下从 `std::string str2 == "1"' 中取出 "std::string"。您正在重新初始化导致编译器出现问题的值。

其次考虑一个 case 语句，因为编译器期望 else if 之后的下一个条件

> std::cout << "* sundis " << str3 << "." << str4 << ".";

也导致编译问题。

我发现的另一个问题是你有悬空的“<<”所以 `cout << "18" << str5 << ;` 改为 `cout << "18" << str5 << endl;`

最后，你 getch 没有定义

希望这可以帮助

# c++ - QScrollArea 小部件未使用 Flowlayout 扩展

> ID：14634994
> 
> 赞同：6
> 
> 时间：2013-01-31T20:56:50.790
> 
> 标签：c++, qt, flowlayout, qscrollarea

我有一个带有`QScrollArea`小部件的用户界面。`QScrollArea`使用[Flowlayout](http://doc.qt.digia.com/4.7/layouts-flowlayout.html)。_ 我的问题是，当我在布局中添加小部件时，滚动区域开始滚动，并且在有扩展空间时不会扩展。我希望滚动区域在滚动条首先出现之前扩展到其极限。

如何在滚动条出现之前让滚动区域扩大？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T06:29:53.003

你能试着`setWidgetResizable(true)`为你做吗`QScrollArea`

```
ScrollArea->setWidgetResizable(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T17:31:12.523

几个建议：

1.  确保滚动区域本身的大小策略为 Expanding。
2.  将滚动区域的大小策略的“拉伸”值设置为大于同一布局中其他小部件的值。IE：

    ```
    QSizePolicy policy = pScrollArea->sizePolicy()

    policy.setVerticalStretch(1);
    policy.setHorizontalStretch(1); 
    ```

    这假定滚动区域的兄弟（如果有）的拉伸值为 0（默认值）。

3.  子类化滚动区域并覆盖该`sizeHint()`方法。

# javascript - Javascript从数组中获取值

> ID：14634996
> 
> 赞同：1
> 
> 时间：2013-01-31T20:56:52.103
> 
> 标签：javascript, arrays, variables, date

如果我在 Javascript 中有以下代码：

```
var line0 = [["2012-07-01",1.8182],["2012-08-01",1.4000],["2012-09-01",1.7500]]; 
```

我怎样才能获得第一个日期，在这种情况下是：“2012-07-01”

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T20:58:02.653

它是`0`数组的第 -th 元素，它是 的`0`第 -th 元素`line0`，所以：

```
line0[0][0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:59:10.510

这是代码：

```
var date = line0[0][0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T20:59:57.607

你可以这样做：

```
<script type="text/javascript">
var line0 = [["2012-07-01",1.8182],["2012-08-01",1.4000],["2012-09-01",1.7500]];
alert(line0[0][0]);
</script> 
```

# c# - 从第一个选择更改时，DropDownList 添加额外的 ListItems OnSelectedIndexChanged

> ID：14634997
> 
> 赞同：0
> 
> 时间：2013-01-31T20:56:52.450
> 
> 标签：c#, asp.net, .net

我正在构建的 WebApp 有一点问题。我有一个从数据库填充的 DropDownList(productddl)。第一个下拉列表的 OnSelectedIndexChanged 我有第二个 DropDownList(versionddl)，它是根据第一个 productddl 的 SelectItem.Value 填充的。

绑定 productddl 后，我插入了一个“选择产品”，如下所示：

```
productddl.Items.Insert(0, new ListItem(" - Select Product - ", "0")); 
```

问题是，例如，我第一次选择一个产品，如果我在它向下拉列表中添加第二个“-Select Product-”后尝试更改它。如果我不断更改产品，它会不断添加和添加。

我怎样才能防止这种情况发生？任何帮助将不胜感激。

以下是加载/填充 productddl 的方式

```
if (!IsPostBack)
{
        productddl.DataSource = db_GetSet.isp_GetSingle("PRODTCKT", "", "");
        productddl.DataTextField = "pr_product";
        productddl.DataValueField = "pr_product";
        productddl.DataBind();
        productddl.Items.Insert(0, new ListItem(" - Select Product - ", "0"));
} 
```

下面是 OnSelectedIndexChanged：

```
protected void getversion_OnSelect(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        versionddl.DataSource = db_GetSet.isp_GetMulti("VERDDLV", productddl.SelectedItem.Value, "");
        versionddl.DataTextField = "vr_version";
        versionddl.DataValueField = "vr_version";
        versionddl.DataBind();
        productddl.Items.Insert(0, new ListItem("Select Product", "0"));

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:01:53.043

`productddl.Items.Insert(0, new ListItem("Select Product", "0"));`在 OnSelectedIndexChanged 方法中删除。

# haskell - Haskell 增量一

> ID：14634998
> 
> 赞同：4
> 
> 时间：2013-01-31T20:56:59.480
> 
> 标签：haskell

尝试创建一个将列表中的每个数字加一的 Haskell 程序。

```
module Add1List where
add1_list_comp :: [Integer] -> [Integer]
add1_list_comp [x] = [x + 1| x <- [x]] 
```

当我调用它时它会起作用`add1_list_comp [3]`......它给了我`[4]`

但是当我这样做时`add1_list_comp [3, 4, 5]`......它会给我一个错误说

> “函数 add1_list_comp 中的非详尽模式”

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T21:00:19.087

```
add1_list_comp = map succ 
```

这么简单

或者，以你的方式

```
add1_list_comp xs = [x + 1| x <- xs] 
```

你的代码的问题是

```
add1_list_comp [x] 
```

列表中的模式是否与单个项目匹配，这就是为什么它在包含多个项目的列表中失败。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T02:38:41.600

我看到这个问题已经回答了，但也许我可以再解释一下。函数的参数是模式匹配的，一般规则是

```
(x:xs) 
```

x 是列表的头部，xs 是列表的尾部，并且可能是空列表

```
[] 
```

空列表

```
[x] or (x:[]) 
```

是相同的，这是一个只有一个变量的列表

而一个没有构造函数的名字，如“[]”、“:”、“(,)”周围可以匹配任何东西，所以如果你想匹配一个特殊情况，你应该把特殊情况放在通用模式的前面。

```
 length [] = 0
 length [x] = 1
 length (x : xs) = 1 + length xs 
```

顺便说一句，一般来说，当你想用列表做某事时，总会有一个更高阶的函数。对于你的情况

```
 add1 xs = map (+1) xs 
```

更好，它利用了内置库，你也可以做一个免费的版本

```
 add1 = map (+1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-08T12:44:00.687

实际上，由于主题声明“以一为增量”而没有定义将要以一为增量的类型，只是为了访问者最终来到这里，让我们给出一个解决方案，它将任何函子增加一，当然包括列表类型。所以;

列表函子

```
*Main> fmap (+1) [1,2,3]
[2,3,4] 
```

也许函子（`id`适用于`Nothing`）

```
*Main> fmap (+1) (Just 1)
Just 2 
```

任一函子（`id`适用于`Left _`）

```
*Main> fmap (+1) (Right 2)
Right 3 
```

IO函子

```
*Main> fmap ((+1) . read) getLine
2017
2018 
```