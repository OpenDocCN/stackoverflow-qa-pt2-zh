# StackOverflow 问答 13029000-13029999

# iis - 将端口号更改为 9999 后 WAMP 和 IIS 冲突？

> ID：13029000
> 
> 赞同：1
> 
> 时间：2012-10-23T11:01:24.260
> 
> 标签：iis, phpmyadmin, wamp, conflict

我尝试使用 WAMP，并且由于 IIS 已使用端口 80，我将端口号更改为 9999。

我正在使用访问，`localhost:9999`但问题是，我无法访问 MySQL 或 phpmyadmin。

# javascript - 停止，播放，时间水平滚动条

> ID：13029003
> 
> 赞同：0
> 
> 时间：2012-10-23T11:01:36.187
> 
> 标签：javascript

![在此处输入图像描述](../Images/ad7598b7af27528c44ca79275f4a7b8c.png)我需要一种方法：

有一个可以接受时间值的控件，例如值：01:15:30、5:28:45、16:15:01、23:44:59

这些值需要加载到水平的“时间控制栏”中。我希望能够单击“播放”，以便它通过定位时间值数组并为每个“值”生成事件

我以前从未这样做过，所以我需要一些帮助。我将管理其余部分（包括值生成和事件处理）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:21:25.870

使用 jquery 怎么样（如果你的项目没有沉重或额外的负担）

检查[jquery 时间滑块](http://akzhan.github.com/jquery-time-slider/)

# filter - CUDA 过滤队列

> ID：13029009
> 
> 赞同：0
> 
> 时间：2012-10-23T11:02:15.687
> 
> 标签：filter, cuda, queue, gpu, gpgpu

**简短版**：如何在 CUDA 中实现高效的过滤操作？

**长版**：我有一个遵循队列过滤语义的 CUDA 代码。我在队列中有大约 500 万个初始元素，代码使用“昂贵的”分阶段计算过滤它们。最终结果预计将保留约 1000 个元素，并且每个阶段移除的元素数量遵循指数衰减曲线（即第一阶段移除很多，最后阶段移除很少）。

由于在 GPU 中每个元素都是并行处理的（通过线程块），简单地运行“所有元素上的所有阶段”是非常浪费的。在给定阶段，一个元素可能会被保留，所有其他元素可能已经被移除，但计算会在所有剩余阶段继续进行，即使对于已经“准备好被移除”的元素也是如此。

更有效的方法是分别运行每个阶段，读取输入列表并将结果存储在中间输出列表中；然后让事情以乒乓模式运行。然而，这样做会产生显着的全局内存读写，更重要的是会对在输出列表上同步并发写入的 atomicInc 施加压力。

> 你会如何建议进行这种分阶段过滤？

感谢您的回答和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:08:57.173

我建议你使用`compact`or `remove_if`。您可以使用`CUDPP`库或`thrust`. 除非您将计算所有元素的所有阶段，否则您无法避免在每个阶段之后写入全局内存。

这是简单的伪代码：

1.  初始化内存等
2.  foreach 阶段做
3.  对所有元素运行过滤
4.  对所有元素使用 compact/remove_if
5.  重写元素或做其他事情（取决于使用的库）
6.  If last stage break else goto 4

# php - PHP 邮件标头“不必要地进行了 base64 编码”

> ID：13029010
> 
> 赞同：3
> 
> 时间：2012-10-23T11:02:16.000
> 
> 标签：php, email, base64, spam

# 我有的：

我正在使用 PHP 邮件功能发送电子邮件。我的标题如下：

```
 <?php
    $headers = "MIME-Version: 1.0\r\n"
               ."Content-Type: text/plain; charset=utf-8\r\n"
               ."Content-Transfer-Encoding: 8bit\r\n"
               ."From: =?UTF-8?B?". base64_encode($from_name) 
               ."?= <$from_address>\r\n"
               ."X-Mailer: PHP/". phpversion();
    mail($to, $subject, $body, $headers, "-f $from_address");
    ?> 
```

此代码来自公认的 stackoverflow 答案：[https ://stackoverflow.com/a/2801159/835950](https://stackoverflow.com/a/2801159/835950)

# 我的问题：

Spam Assassin 的惩罚为 0.1，原因如下：

> 0.1 FROM_EXCESS_BASE64 来自：base64 编码不必要

# 我的问题：

我应该如何修改我的标题以避免这种惩罚。我是否只是删除了 base64_encode 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-27T10:46:17.200

您需要检测是否真的需要使用 base64 编码的 UTF-8，或者是否所有字符都在 ASCII 范围内。这有点难看，但有效：

```
<?php
$headers = "MIME-Version: 1.0\r\n"
           ."Content-Type: text/plain; charset=utf-8\r\n"
           ."Content-Transfer-Encoding: 8bit\r\n"
           ."From: ".(preg_match('/[^\x20-\x7f]/', $from_name)?
            "=?UTF-8?B?". base64_encode($from_name) ."?=" : $from_name )
           ." <$from_address>\r\n"
           ."X-Mailer: PHP/". phpversion();
mail($to, $subject, $body, $headers, "-f $from_address");
?> 
```

[或者，您可以使用mb_check_encoding](http://php.net/manual/en/function.mb-check-encoding.php)检测字符集，但此正则表达式使其简短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-26T19:29:18.670

我在 MySQL 数据库中存储为 UTF-8 的 $from_names 遇到了同样的问题。当 base64 编码不需要使用这样的解决方案时，我可以避免 0.01 的惩罚：

```
<?php
function encode_from($s) {
    if (mb_check_encoding($s, 'ASCII'))
        return mb_convert_encoding($s, 'ASCII', 'UTF-8');
    else
        return "=?utf-8?b?".base64_encode($s)."?=";
}
$headers = "MIME-Version: 1.0\r\n"
           ."Content-Type: text/plain; charset=utf-8\r\n"
           ."Content-Transfer-Encoding: 8bit\r\n"
           ."From: " . encode_from($from_name)
           ." <$from_address>\r\n"
           ."X-Mailer: PHP/". phpversion();
mail($to, $subject, $body, $headers, "-f $from_address");
?> 
```

当真正需要 UTF-8 编码时，Spam Assassin 仍在应用惩罚，但这是 Spam Assassin 中的一个错误，已在上游修复：

[https://bz.apache.org/SpamAssassin/show_bug.cgi?id=7730](https://bz.apache.org/SpamAssassin/show_bug.cgi?id=7730)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T11:05:28.823

我会删除 base64 编码并尝试一下。

关于[PHP.net](http://de1.php.net/manual/en/function.base64-encode.php)

我不认为它是作为 $from_name 进来的二进制数据

# python - 触摸 django wsgi 文件以重新加载效果不佳

> ID：13029012
> 
> 赞同：2
> 
> 时间：2012-10-23T11:02:24.193
> 
> 标签：python, django, apache, python-2.7, mod-wsgi

触摸 django wsgi 文件不会重新加载。

所以我重新启动 apache 以反映更改而不是触摸 wsgi 文件。

以下是每个软件的版本。

```
Apache/2.2.3 (CentOS) mod_wsgi/3.3 Python/2.7.1 Django/1.4 
```

但是 Django/1.3.1 也可以。

其中与Django/1.4有冲突吗？

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:13:27.497

您必须确保您使用的是 mod_wsgi 的守护程序模式。

[http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html](http://blog.dscpl.com.au/2012/10/why-are-you-using-embedded-mode-of.html)

[http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode](http://code.google.com/p/modwsgi/wiki/ReloadingSourceCode)

仔细检查你是。

# ruby-on-rails-3 - 如何使用每当 gem 在 cronjob 中加载 ruby 文件（main.rb）？

> ID：13029013
> 
> 赞同：0
> 
> 时间：2012-10-23T11:02:24.023
> 
> 标签：ruby-on-rails-3, crontab

我刚刚在我的 rails3 应用程序中安装了 gem。使用起来非常棒，我可以定期发送电子邮件。但无法在 cronjob 中使用命令加载任何 ruby​​ 文件。这是我到目前为止所做的代码：

在我的 schedule.rb 中：

```
set :environment, :development

every 1.days, :at => '6pm' do
 runner "User.hello_user", :output => 'log/cron.log'
end

every 2.minutes do
  command "load(File.read('app/models/summary_created.rb'))", :output => 'log/cron.log'
end 
```

这是我的 cronjob 列表：

```
# Begin Whenever generated tasks for: myapp
0 18 * * * /bin/bash -l -c 'cd /home/ruby-projects/myapp && script/rails runner -e development '\''User.hello_user'\'' >> log/cron.log 2>&1'

0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58 * * * * /bin/bash -l -c 'load(File.read('\''app/models/summary_created.rb'\'')) >> log/cron.log 2>&1'

# End Whenever generated tasks for: myapp 
```

在上面的文件中，我的第一个任务运行良好，但没有运行第二个任务。我可以获得它支持的命令列表或运行该文件的任何其他方式吗？现在我从 Rails 控制台手动运行它：

```
 irb(main):030:0> load "summary_created.rb" 
```

请帮助我找出我在这里缺少的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:58:29.317

嘿`webmin setup`用于设置您的 cron 作业。它非常简单易用。我已经将它应用到我所有的项目中。

# knockout.js - observableArray 替换时行为不明确

> ID：13029014
> 
> 赞同：0
> 
> 时间：2012-10-23T11:02:30.637
> 
> 标签：knockout.js

在我的 ViewModel 中，我有：

```
self.collaps = ko.observableArray([0,0,0,0,0,0,0]);

self.shouldShow = function(index) { return self.collaps()[index]; }; 
```

我的测试 div：

```
<div data-bind="visible: shouldShow(5)">Shown!</div> 
```

我`data-bind`有一个按钮`click: show`：

```
self.show = function() {
    // 1\. Index 5 gets true after 2 clicks!!? But UI never updates!
    self.collaps()[5] = true;

    // 2\. This is push-ing in true starting at index 0
    self.collaps.replace(self.collaps()[5], true);

    // 3\. If I combine the two, I get the behavior I want, I think :)
    self.collaps()[5] = true;
    self.collaps.replace(self.collaps()[5], true);

}; 
```

这里发生了什么？这样做的正确方法是什么？

----> [JSFIDDLE 为您服务！](http://jsfiddle.net/LRQuD/12/)<----

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:18:13.487

这是`ko`文档中的引用：

> **关键点：一个 observableArray 跟踪数组中有哪些对象，而不是那些对象的状态**
> 
> 简单地将一个对象放入 observableArray 并不能使该对象的所有属性本身都可观察。当然，如果您愿意，您可以使这些属性可观察，但这是一个独立的选择。observableArray 只跟踪它持有的对象，并在添加或删除对象时通知侦听器。

因此，当您更改数组项的值时`knockout`，不会收到通知。您可以使用`valueHasMutated`函数手动通知订阅者：

```
self.show1 = function() {
    self.test(self.test()+1);

    self.collaps()[5] = true;
    self.collaps.valueHasMutated();
}; 
```

# javascript - 导出到xul中的excel

> ID：13029017
> 
> 赞同：4
> 
> 时间：2012-10-23T11:02:34.600
> 
> 标签：javascript, excel, tree, xul, export-to-excel

所以我在 js 和 xul 中有我的函数，它在 ods 或 xlsx 中创建导出文件。以 ods 导出工作正常，但问题是当我尝试以 excel 文件格式导出时。计划是创建将由 treeToXLSX.xsl 生成的 xml 文件 content.xml。生成了 Content.xml，当我提取 export.xlsx 时，它就在那里，但 xlsx 是空的。这些是我的文件

树.JS

```
if(exportType == 'excel'){
    xslFile = "treeToXLSX.xsl";
    tempExportFile = "export.xlsx.tmp";
    exportTemplate = "template.xlsx";
    exportedFileName = "export.xlsx";
}else{
    xslFile = "treeToODS.xsl";
    tempExportFile = "export.ods.tmp";
    exportTemplate = "template.ods";
    exportedFileName = "export.ods";
}

var newdoc = this.prep(xslFile);

// save newdoc as /tmp/content.xml
var foStream = Components.classes["@mozilla.org/network/file-output-stream;1"]
    .createInstance(Components.interfaces.nsIFileOutputStream);

var file = Components.classes["@mozilla.org/file/directory_service;1"]
    .getService(Components.interfaces.nsIProperties)
    .get("TmpD", Components.interfaces.nsIFile);
file.append("content.xml");

var file2 = Components.classes["@mozilla.org/file/directory_service;1"]
    .getService(Components.interfaces.nsIProperties)
    .get("TmpD", Components.interfaces.nsIFile);
file2.append(tempExportFile);
file2.createUnique(Components.interfaces.nsIFile.NORMAL_FILE_TYPE, 0666);
file2.remove(false);

var serializer = new XMLSerializer();

// use 0x02 | 0x10 to open file for appending.
foStream.init(file, 0x02 | 0x08 | 0x20, -1, 0); // write,
                                                    // create,
                                                    // truncate
// In a c file operation, we have no need to set file mode with or
// operation, directly using "r" or "w" usually.
serializer.serializeToStream(newdoc, foStream, "UTF-8");
foStream.close();

var template = Components.classes["@mozilla.org/file/directory_service;1"]
    .getService(Components.interfaces.nsIProperties)
    .get("AChrom", Components.interfaces.nsIFile);

template.append("<path>");
template.append("<to_file>");
template.append(exportTemplate);

// copy export.ods template file into temp, BLOCKING OPERATION
template.copyTo(file2.parent, file2.leafName);

var zipWriter = Components.Constructor("@mozilla.org/zipwriter;1", "nsIZipWriter");
var zipW = new zipWriter();

zipW.open(file2, 0x04);
zipW.addEntryFile(file.leafName, Components.interfaces.nsIZipWriter.COMPRESSION_DEFAULT, file, false);
zipW.close();

var homedir = Components.classes["@mozilla.org/file/directory_service;1"]
    .getService(Components.interfaces.nsIProperties)
    .get("Home", Components.interfaces.nsIFile);

// open a save as dialog box
var fp = Components.classes["@mozilla.org/filepicker;1"]
    .createInstance(Components.interfaces.nsIFilePicker);

fp.init(window, "Export as", Components.interfaces.nsIFilePicker.modeSave);
fp.appendFilters(Components.interfaces.nsIFilePicker.filterAll | Components.interfaces.nsIFilePicker.filterText);
fp.displayDirectory = homedir;
fp.defaultString = exportedFileName;

var rv = fp.show();

if (rv == Components.interfaces.nsIFilePicker.returnOK || rv == Components.interfaces.nsIFilePicker.returnReplace) {
    file2.moveTo(fp.file.parent, fp.file.leafName);
} else {
    file2.remove(false);
} 
```

TREETOXLSX.XSL

```
<?xml version='1.0'?>

<?mso-application progid="Excel.Sheet"?>  
<xsl:stylesheet
  version="1.0"
  xmlns="urn:schemas-microsoft-com:office:spreadsheet"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt"
  xmlns:user="urn:my-scripts"
  xmlns:o="urn:schemas-microsoft-com:office:office"
  xmlns:x="urn:schemas-microsoft-com:office:excel"
  xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">

<xsl:output method="xml" encoding="utf-8" indent="yes" />
  <xsl:param name="title" />
  <xsl:param name="skipfields" />
  <xsl:param name="decimals" />
  <xsl:param name="numerics" />

   <xsl:template match="*">
     <Workbook>
    <Worksheet ss:Name="Test"> 
      <Table x:FullColumns="1" x:FullRows="1">
        <Row ss:Height="12.1032">
        <xsl:for-each select="child::*[1]/@*">
          <xsl:if test="not(contains($skipfields, concat('|', name(), '|')))">
             <Cell>
            <Data ss:Type="String">
              <xsl:value-of select="translate(name(), '_', '')"/>
            </Data>
             </Cell>
              </xsl:if>
        </xsl:for-each>
         </Row>
         <xsl:for-each select="./*">
           <Row>
          <xsl:for-each select="@*">
            <xsl:if test="not(contains($skipfields, concat('|', name(), '|')))">
              <xsl:choose>
            <xsl:when test="contains($decimals, concat('|', name(), '|'))">
              <Cell>
                <Data ss:Type="Number">
                  <xsl:value-of select="." />
                </Data>
              </Cell>
            </xsl:when>
            <xsl:when test="contains($numerics, concat('|', name(), '|'))">
            <Cell>
               <Data ss:Type="Number">
                 <xsl:value-of select="." />
               </Data>
            </Cell>
             </xsl:when>
             <xsl:otherwise>
            <Cell>
               <Data ss:Type="String">
                  <xsl:value-of select="." />
               </Data>
            </Cell>
            </xsl:otherwise>
         </xsl:choose>
          </xsl:if>
        </xsl:for-each>
      </Row>
    </xsl:for-each>
  </Table>
</Worksheet> 
```

内容.XML

```
<Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet">
  <Worksheet xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" ss:Name="Test">
    <Table xmlns:x="urn:schemas-microsoft-com:office:excel" x:FullColumns="1" x:FullRows="1">
      <Row ss:Height="12.1032">
       <Cell>
         <Data ss:Type="String">ID</Data>
       </Cell>
       <Cell>
         <Data ss:Type="String">Name</Data>
       </Cell>
       <Cell>
         <Data ss:Type="String">Type</Data>
      </Cell>
      <Cell>
         <Data ss:Type="String">Group</Data>
      </Cell>
      <Cell>
         <Data ss:Type="String">Totaltickets</Data>
      </Cell>
      <Cell>
         <Data ss:Type="String">Wontickets</Data>
      </Cell>
      <Cell>
         <Data ss:Type="String">Moneyin</Data>
      </Cell>
      <Cell>
         <Data ss:Type="String">Moneyout</Data>
      </Cell>
      <Cell>
         <Data ss:Type="String">Percentage</Data>
      </Cell>
      <Cell>
         <Data ss:Type="String">Average</Data>
      </Cell>
      <Cell>
         <Data ss:Type="String">Moneyleft</Data>
      </Cell>
    </Row>
    <Row>
      <Cell>
         <Data ss:Type="Number">999</Data>
      </Cell>
      <Cell>
         <Data ss:Type="String">test</Data>
      </Cell>
      <Cell>
         <Data ss:Type="String"/>
      </Cell>
      <Cell>
         <Data ss:Type="String">a</Data>
      </Cell>
      <Cell>
         <Data ss:Type="Number">0</Data>
      </Cell>
      <Cell>
         <Data ss:Type="Number">0</Data>
      </Cell>
      <Cell>
         <Data ss:Type="Number">0,00</Data>
      </Cell>
      <Cell>
         <Data ss:Type="Number">0,00</Data>
      </Cell>
      <Cell>
         <Data ss:Type="Number">0</Data>
      </Cell>
      <Cell>
         <Data ss:Type="Number">0,00</Data>
      </Cell>
      <Cell>
         <Data ss:Type="Number">0,00</Data>
      </Cell>
   </Row>
</Table> 
```

奇怪的是导出到 ods 文件效果很好，所以我真的卡住了。我的目录中有所有需要的文件，`treeToXLSX.xsl`这些文件生成`content.xml`和`template.xlsx`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:57:22.007

`TreeToXLSX.xsl`您的和文件中缺少结束标记`content.xml`，但这可能是您创建问题时的复制粘贴错误。

此外，在您的 XSL 文件中，尝试更改`<xsl:template match="*">`为`<xsl:template match="/Workbook">`以匹配 XML 输入的根元素。

最后，您在此处创建的文件看起来像 Excel [XML 电子表格](https://en.wikipedia.org/wiki/Microsoft_Excel#XML_Spreadsheet)格式，而不是 Office Open XML 格式。XML 电子表格文件的文件扩展名应为“.xml”或“.xls”，而不是“.xslx”。

# c# - 未能禁用 Webbrowser 控件中的“安全警告”窗口

> ID：13029019
> 
> 赞同：1
> 
> 时间：2012-10-23T11:02:54.023
> 
> 标签：c#, wpf

我试图禁用安全弹出窗口，但它仍然提示。

错误弹出：

```
Do you want to view only the webpage content that was delivered securely This webpage contains content that will not be delivered using a secure HTTPS connection, which could compromise the security of the entire webpage.”“This page contains both secure and nonsecure items. Do you want to display the nonsecure items?” 
```

WPF：

```
<WebBrowser Name="wbGateway" Width="700" Height="600" 
                        OverridesDefaultStyle="False"
                        ScrollViewer.CanContentScroll="False"
                        ScrollViewer.HorizontalScrollBarVisibility="Hidden" 
                        ScrollViewer.VerticalScrollBarVisibility="Hidden"></WebBrowser> 
```

代码：

```
private void wbGateway_Navigating(object sender, NavigatingCancelEventArgs e)
        {
ServicePointManager.ServerCertificateValidationCallback = new 

RemoteCertificateValidationCallback(ValidateServerCertificate);
}

    public static bool ValidateServerCertificate(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
    {
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-12T13:04:09.860

在这里，我们采用解决方案：我在 Browser_Navigated 事件上运行它，因为在此之前底层的 activeX 组件为空。

**参考：**[https://social.msdn.microsoft.com/Forums/vstudio/en-US/4f686de1-8884-4a8d-8ec5-ae4eff8ce6db/new-wpf-webbrowser-how-do-i-suppress-script-errors？论坛=wpf](https://social.msdn.microsoft.com/Forums/vstudio/en-US/4f686de1-8884-4a8d-8ec5-ae4eff8ce6db/new-wpf-webbrowser-how-do-i-suppress-script-errors?forum=wpf)

```
 private void Browser_Navigating_1(object sender, NavigatingCancelEventArgs e)
    {
    HideScriptErrors(Browser,true);

    }

public void HideScriptErrors(WebBrowser wb, bool Hide)
{

    FieldInfo fiComWebBrowser = typeof(WebBrowser).GetField("_axIWebBrowser2", BindingFlags.Instance | BindingFlags.NonPublic);
    if (fiComWebBrowser == null) return;
    object objComWebBrowser = fiComWebBrowser.GetValue(wb);

    if (objComWebBrowser == null) return;

    objComWebBrowser.GetType().InvokeMember(
    "Silent", BindingFlags.SetProperty, null, objComWebBrowser, new object[] { Hide });

} 
```

# c#-4.0 - 将大文件写入 HTTP 响应

> ID：13029020
> 
> 赞同：2
> 
> 时间：2012-10-23T11:02:56.570
> 
> 标签：c#-4.0

我目前正在使用 c# .net 开发一个 asp 应用程序。我必须查询一个大型（10GB）SQLite 数据库并将数据以 CSV 格式写入 HTTP 响应。我正在这样做

```
 /*query database, use string builder to create a csv*/
        Response.ContentType = "text/plain";
        Response.AddHeader("Content-Length", result.Length.ToString());
        Response.AddHeader("Content-Disposition", "attachment; filename=\"Data.csv\"");
        Response.Write(result);
        Response.Flush(); 
```

哪个适用于少量数据的文件。但是当文件大小增加时，我得到了 OutOfMemoryException。我认为使用 StringBuilder 创建字符串会导致问题。我想不出任何解决问题的方法。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:42:27.030

您需要读取数据`DataReader`并将其写入`Response.OutputStream`. 像这样的东西：

```
SqlDataReader dr;
//initialize datareader to your table
...
Response.Clear();
Response.ContentType = "text/plain";
Response.AddHeader("Content-Disposition", "attachment; filename=\"Data.csv\"");
var writer = new StreamWriter(Response.OutputStream);
while (dr.Read())
{
    writer.WriteLine(dr[1].ToString()+";"+dr[2].ToString()+";"+dr[3].ToString()+";");
    Response.Flush();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T16:39:11.417

我实际上解决了这个问题。我做了这个

```
Response.Clear();
Response.ContentType = "text/plain";
Response.AddHeader("Content-Disposition", "attachment; filename=\"Data.csv\"");
foreach(var item in dbItem)
{
     /*create a string with database data*/
     Response.write(string);
     Response.Flush();
}
Response.End(); 
```

# jquery - jquery Fancybox 1.3：加载第一次网址时出现错误宽度

> ID：13029028
> 
> 赞同：0
> 
> 时间：2012-10-23T11:03:16.860
> 
> 标签：jquery, fancybox

我正在使用**jQuery v1.8.2**和**fancybox 1.3.4**，我在fancybox 中加载了一个新的url。

**HTML：**

```
<a title="Pasps" href="path_url" class="fancybox"><img class="thumbs" src=/thumbnails/myphoto.jpg"/> </a> 
```

**JS：**

> ```
> <script>
> $('.fancybox').fancybox({titleShow:false});
> </script> 
> ```

问题是它**第一次没有正确的尺寸**。

我第二次加载它时，fancybox 的尺寸正确。

**path_url**显示 2 个段落和**1 个图像**，这会导致我认为的错误...

感谢帮助

山姆

# python - 仅获取满足 numpy 数组中条件的值

> ID：13029029
> 
> 赞同：31
> 
> 时间：2012-10-23T11:03:26.673
> 
> 标签：python, arrays, numpy

必须有一种（非常）快速有效的方法来仅从 numpy 数组中获取元素，或者更有趣的是从它的切片中获取元素。假设我有一个 numpy 数组：

```
import numpy as np
a = np.arange(-10,10) 
```

现在，如果我有一个清单：

```
s = [9, 12, 13, 14] 
```

我可以从以下元素中选择元素：

```
a[s]  #array([-1,  2,  3,  4]) 
```

我怎样才能拥有一个由 a[s] 中满足条件的元素组成的（numpy）数组，即为正（或负）？结果应该是

```
np.ifcondition(a[s]>0, a[s])  #array([2,  3,  4]) 
```

它看起来微不足道，但我无法找到一个简单而浓缩的表达方式。我敢肯定口罩可以，但对我来说看起来并不直接。但是，两者都不是：

```
a[a[s]>0]
a[s[a[s]>0]] 
```

其实都是不错的选择。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-23T11:06:38.790

怎么样：

```
In [19]: b = a[s]

In [20]: b[b > 0]
Out[20]: array([2, 3, 4]) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T14:07:53.543

您绝对应该接受 unutbu 的回答，这也是我在 numpy 中通常用于这种情况的方法。但是为了有多种做事方式，有一个在 numpy 之外工作的方法，或者如果中间数组非常大，我将添加这个替代方案：

```
In [3]: [a[S] for S in s if a[S]>0]
Out[3]: [2, 3, 4] 
```

同样，unutbu 的方法明显更快。但我喜欢这种方法，因为它可以进一步推广。如果您有一个昂贵的时髦函数（例如，没有索引），并且想要测试该函数的结果，您可能想要这样做：

```
In [5]: [f for S in s for f in [FunkyFunction(a[S])] if f>0]
Out[5]: [2, 3, 4] 
```

奇怪的是，您在另一个列表中创建了一个列表，但这个内部列表只包含一个项目。基本上你正在做的是将值保存到变量`f`中，然后使用该值两次：一次测试值（`f>0`），如果测试通过，一次使用列表中的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-14T21:32:01.250

我知道这是一个老问题，我不确定在被问到时是否有以下内容，但由于我带着类似的问题来到这里，这就是我发现对我有用的问题：

```
np.extract(a[s] > 0, a[s]) 
```

# c# - 实体框架 4.0：更改主实体中的关系实体也会覆盖主实体的 ID

> ID：13029030
> 
> 赞同：0
> 
> 时间：2012-10-23T11:03:33.960
> 
> 标签：c#, entity-framework, entity, relationship

我得到了一个实体“许可证”，其中包含一些关系，包括三个 1..* 关系。我正在开发一个 GUI + 管理器，以允许稍后编辑实体并再次保存它。当我在按钮上调用保存事件时，我通过读取控件中的值来覆盖我正在编辑的预加载实体的属性和关系。

我通过加载具有相同 ObjectContext 的新选定实体并覆盖关系本身来更改三个关系。在 3 个案例中的 2 个中，它可以完美运行。即使在最后一种情况下，关系也已成功更改（存储了另一个实体），并且可以很好地完成保存过程。但是，在第三种情况下，有一个奇怪的行为，我不明白也不知道如何解决它：

当我更改关系的实体时，它会覆盖我的 LICENSE 对象的 ID，这根本没有意义。

这是代码：

图形用户界面：

```
private LICENSE lizenz { get; set; } // in the load event, this object will be filled correctly

private string form2obj() // this method is getting called in my button save event
{
    //...
    // I removed some conditions (they all successed on testing, so believe my controls are set right on testing this
    this.lizenz.ADRESSE_KONTAKTE_Lieferant = LizenzManager.LoadContact(Convert.ToInt32(this.ddLieferantAnsp.SelectedValue)); // ADRESSE_KONTAKTE_Lieferant is a 1..* relationship, this.ddLieferantAnsp.SelectedValue contains the ID of the object I want to load into the relationship
    this.lizenz.ADRESSE_KONTAKTE_Betreiber = LizenzManager.LoadContact(Convert.ToInt32(this.ddBetreiberAnsp.SelectedValue)); // ADRESSE_KONTAKTE_Betreiber is a 1..* relationship, this.ddBetreiberAnsp.SelectedValue contains the ID of the object I want to load into the relationship
    this.lizenz.DB_TYPES = LizenzManager.LoadDatabaseType(Convert.ToInt32(this.ddDatenbanktyp.SelectedValue)); // DB_TYPES is a 1..* relationship, too, this.ddDatenbanktyp.SelectedValue contains the ID of the object I want to load into the relationship
    // last line overwrites this.lizenz.ID with the value of Convert.ToInt32(this.ddDatenbanktyp.SelectedValue), this is wrong
    //...
} 
```

BLL (LizenzManager):

```
// context is the same ObjectContext in all three calls!
//...
public static ADRESSE_KONTAKTE LoadContact(int id)
{
    return context.ADRESSE_KONTAKTE.Where(x => x.ID == id).Single(); // this seems to success
}

public static DB_TYPES LoadDatabaseType(int id)
{
    return context.DB_TYPES.Where(x => x.ID == id).Single(); // this works, but it overwrites the ID of my LICENSE object I load this into ...
}
//... 
```

如您所见，加载方式几乎相同，两个表都有 ID 列，但最后一个关系用我加载的 DB_TYPES 实体的 ID 覆盖 this.lizenz.ID。

你能解释一下，如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:38:27.827

好的，这是一个非常小而愚蠢的问题。

当我之前在 SQL Management Studio 中创建关系时，我忘记在我的 LICENSE 表中设置正确的外键。所以它仍然在 ID 上，并且在更改关系时被迫覆盖我的许可证实体的 ID。

感谢所有花时间阅读这个问题的人。

# php - 如何上传带有变量名的文件

> ID：13029032
> 
> 赞同：-1
> 
> 时间：2012-10-23T11:03:33.663
> 
> 标签：php

我在上传文件时遇到问题，我正在使用此代码......并收到此错误，

我的文件夹名称是服装图像

```
 <?php
    $pid          = mysql_insert_id();
    $folder       = $_post['catagory'];
    //insert images into folder
    $product_name = "$pid.jpg";
    move_uploaded_file($_FILES['productImage']['tmp_name'], "$folder._images" / $product_name);
    echo "<h1>Your product successfully added <br /> Plese wait....</h1>";
    header("refresh:3; url='inventory.php'");
    exit();
    ?>
    <form method='post' action='index.php'>
    <input type="file" name="productImage" />
<input type="text" name="catagory" />
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:11:50.807

纠正了几个错误，这是您的代码：

```
<?php
$pid          = mysql_insert_id();
$folder       = $_POST['category']; // assuming you had category other wise, no correction
//insert images into folder
$product_name = "$pid.jpg";
move_uploaded_file($_FILES['productImage']['tmp_name'], "$table._images/ $product_name"); // string concat mistake
echo "<h1>Your product successfully added <br /> Please wait....</h1>";
echo "<meta http-equiv='refresh' content='3; inventory.php' />";// use meta tag to redirect instead of header which will give you headers already sent error
// exit(); // if not commented out, the below form will never be shown!
?>
<form method='post' action='index.php'>
<input type="file" name="productImage" />
</form> 
```

如果您开始使用 PHP，并且需要帮助，我强烈建议您在编码时使用 IDE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:06:56.297

你写了'刷新'，正确的是'刷新'。

# jquery - 减少 Jquery noConflict 的存在

> ID：13029035
> 
> 赞同：0
> 
> 时间：2012-10-23T11:03:44.880
> 
> 标签：jquery

我编写了调用 jQuery.noConflict(); 的代码。很多次。如何减少 jQuery.noConflict(); 存在，因为我认为该声明重复多次并不好

```
$glob = jQuery.noConflict();

            /* functions to run when content loads */
            $glob(document).ready(function(){

                var ht = $glob(window).height();

                $glob('.content').css({
                    'height': ht,
                    'min-height': ht
                });

                $glob('#page').css({
                    'top':-ht
                });
            });

            /* functions to run when page loads */
            function animateHorizontal2id(id,msg){ //the id to animate, the easing type

                var $a = jQuery.noConflict(); // defined to remove jquery conflict error
                var animSpeed=2000; //set animation speed
                var page= $a("#page"); //define the page to move

                var ht = $a(window).height();

                //do the animation

                var archPos = $a(id).position().left;           

                $a('#architecture').css({
                    'left': archPos
                });

                page.stop().animate({"left": -($a(id).position().left)}, animSpeed

                                    );

                    $a('#page').css({
                        'top': -ht
                    });
                //}

            }
            function animateVertical2id(id,msg) {

                var $arct = jQuery.noConflict(); // defined to remove jquery conflict error
                var animSpeed=2000; //set animation speed
                var page= $arct("#page"); //define the page to move
                //do the animation

                page.stop().animate({"top": -($arct(id).position().top)}, animSpeed);

            }

            function animate2Home(id,msg) {
                var $home = jQuery.noConflict(); // defined to remove jquery conflict error

                var archPos = $home(id).position().left;            

                var ht = $home(window).height();
                $home('#page').css({
                    'top': -ht
                });

                $home('#architecture').css({
                    'left': archPos
                });

                var animSpeed=2000; //set animation speed
                var page= $home("#page"); //define the page to move
                //do the animation
                page.stop().animate({"left": -($home(id).position().left)}, animSpeed);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:11:24.753

您可以将它包含在这样的函数中：

```
jQuery.noConflict();
(function($) {

   // You can use $ safely in here with no conflicts.

})(jQuery); 
```

如果你想让它更紧凑，你也可以这样做：

```
jQuery.noConflict()(function(){
    // You can use $ safely in here with no conflicts.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:15:55.270

重点`.noConflict()`是将 jQuery 重新分配给不同的全局，然后在需要的地方引用新的全局。你的代码可以很容易地写成这样：

```
$glob = jQuery.noConflict();
/* functions to run when content loads */
$glob(document).ready(function () {
    var ht = $glob(window).height();
    $glob('.content').css({
        'height': ht,
        'min-height': ht
    });
    $glob('#page').css({
        'top': -ht
    });
});
/* functions to run when page loads */
function animateHorizontal2id(id, msg) { //the id to animate, the easing type
    var animSpeed = 2000; //set animation speed
    var page = $glob("#page"); //define the page to move
    var ht = $glob(window).height();
    //do the animation
    var archPos = $glob(id).position().left;
    $glob('#architecture').css({
        'left': archPos
    });
    page.stop().animate({
        "left": -($glob(id).position().left)
    }, animSpeed);
    $glob('#page').css({
        'top': -ht
    });
    //}
}

function animateVertical2id(id, msg) {
    var animSpeed = 2000; //set animation speed
    var page = $glob("#page"); //define the page to move
    //do the animation
    page.stop().animate({
        "top": -($glob(id).position().top)
    }, animSpeed);
}

function animate2Home(id, msg) {
    var archPos = $glob(id).position().left;
    var ht = $glob(window).height();
    $glob('#page').css({
        'top': -ht
    });
    $glob('#architecture').css({
        'left': archPos
    });
    var animSpeed = 2000; //set animation speed
    var page = $glob("#page"); //define the page to move
    //do the animation
    page.stop().animate({
        "left": -($glob(id).position().left)
    }, animSpeed);
} 
```

也就是说，我真的很喜欢[Allan Kimmer Jensen](https://stackoverflow.com/users/171087/allan-kimmer-jensen)的解决方案，尽管我会这样写：

```
(function ($) {
    // You can use $ safely in here with no conflicts.
}(jQuery.noConflict())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:09:09.463

**您可以在这里使用一次并完成：**

```
$(document).ready(function(){

  $.noConflict();

  //put your code here

}); 
```

# objective-c - ios中的引用计数与xcode

> ID：13029036
> 
> 赞同：0
> 
> 时间：2012-10-23T11:03:46.550
> 
> 标签：objective-c, ios, xcode

关于 ARC 和引用计数有很多问题。我无法理解 ARC 概念和引用计数技术之间的区别。我在 ios4 中创建了一个应用程序。在 ios4 中没有 ARC 概念，因此程序员在使用引用计数释放对象时必须注意内存。如果程序员忘记释放对象当在 ios4 中创建应用程序时，如果在 ios5 中运行相同的应用程序，未发布的对象会发生什么情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:10:00.090

它的行为与 iOS4 完全相同——它会泄漏。ARC 只是一个编译器功能，它在编译期间为您插入保留/释放/自动释放调用。

您可以在此处阅读有关 ARC 概念的信息：[Apple doc](https://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:42:31.313

使用 ARC，编译器会自动在程序中插入保留、释放和自动释放。但是，ARC 仅适用于 Objective-C 对象。可以在这里找到一个很好的 ARC 教程：[http ://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)

# android - AndEngine Box2d 游戏

> ID：13029037
> 
> 赞同：1
> 
> 时间：2012-10-23T11:03:50.387
> 
> 标签：android, box2d, andengine

我正在使用 Box2d 扩展开发 2d 生存射击游戏，但我有一些问题：

1.  我有两个 AnalogOnScreenControls。他们的听众修改精灵和身体。我收到`TouchEventPool was exhausted`了，随着他们数量的增加，游戏意外崩溃。我试图将主体和精灵的修改放在 UpdateThread 上，但这并不能解决问题。可能是什么原因？
2.  我有一个类，在游戏开始时会加载所有纹理。在我重新启动游戏活动几次后，我收到 `Unable to find Phys Addr for`“绿色”界面。但是，如果我在重新启动之前通过任务管理器手动清除内存，则不会发生这种情况可能是什么原因？我在游戏结束时卸载了我的地图集。
3.  游戏有时会在 onResumeGame 中以 NullPointerException 开始崩溃。建议的解决方案是设置 android:configChanges="orientation|screenSize" 但我的设备是 API 10，所以它没有 screenSize 属性，并且方向似乎没有帮助，因为游戏有时以纵向模式开始（虽然横向在代码中设置）

# visual-studio-2010 - 在静态库中隐藏函数

> ID：13029038
> 
> 赞同：5
> 
> 时间：2012-10-23T11:03:59.310
> 
> 标签：visual-studio-2010, linker, export, static-libraries, dllexport

我正在为一个大型项目构建`.lib`（**静态库**），我想向库的最终用户隐藏一些函数，但我需要这些函数可以从`.c`库中的每个文件中调用（因此不是静态的）。

这完全相反[`__declspec(dllexport)`](https://stackoverflow.com/a/7094443/1149736)，我已经找到了[gcc](http://gcc.gnu.org/wiki/Visibility)的解决方案。

我想使用`static`，但静态函数[应该](http://www.lix.polytechnique.fr/~liberti/public/computing/prog/c/C/SYNTAX/static.htm)只在“当前`.c`文件”中可用，所以这不是方法。

**换句话说**：我需要一种方法来告诉 Microsoft Visual C++ 2010 不要将某些函数导出到 final `.lib`（同时保持它们可用于`.c`项目中的所有其他文件）。

*注意：我的整个解决方案中从未使用过`__declspec`(nother `__attribute__( visibility)`)，这可能只是一些与构建静态库相关的默认设置（我无法追踪）。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:38:55.830

这是不可能的。您所要求的与 __declspec(dllexport) 无关，该属性确定哪些标识符在 DLL 之外可见。这肯定会满足您的要求。

但是您要的是静态库。这是一种非常简单的文件格式，它只是一袋 .obj 文件。编译后通过lib.exe打包成一个归档文件。根本没有解决 .lib 中单独编译的 .c 文件之间的依赖关系。在链接 .lib 之前不会发生这种情况。

此时，客户端代码使用的具有外部链接的标识符与您的标识符完全没有区别。如果可能的话，尝试隐藏您的文件只会在链接器无法弄清楚如何满足您的一个 .c 文件与另一个文件的外部依赖关系时造成链接失败。

接近的唯一方法是将*所有*代码放在一个翻译单元中，函数标记为静态，因此它们没有外部链接。这非常难看，但可以通过一个包含所有其他 .c 文件的文件来完成。您肯定会忽略该选项，因此请寻求 DLL 解决方案来获得此选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-15T04:45:49.637

我认为从静态库中隐藏内部符号并且只将一些符号导出给外部用户是可能的，至少在 Linux 平台上是可能的。

我曾经在具有类似要求的 OSX 和 Linux 上工作，我的方法是尝试使用具有以下选项的“ [ld ”命令创建一个预链接库：](https://ftp.gnu.org/old-gnu/Manuals/ld-2.9.1/html_node/ld_3.html)

-r -x -exported_symbols_list ../exported_symbols.txt -o $@ $^ 在生成文件中。

* * *

用于 xcrun ld 的选项如下

```
-x

    Delete all local symbols.

-r

    Generate relocatable output--i.e., generate an output file that can in turn serve as input to ld. This is often called partial linking

-exported_symbols_list

    option uses a text file exported_symbols.txt which contains all the interface APIs for the static library that you want to ship out. 
```

* * *

我想在 Windows 平台上可能有等效的方法。

# php - 这段 php 代码有什么问题？

> ID：13029048
> 
> 赞同：0
> 
> 时间：2012-10-23T11:04:32.570
> 
> 标签：php, mysql

我正在尝试使用循环语句将不确定数量的名称放入变量值中：

```
while ($row = mysql_fetch_row($resultdq2))
    {
        $name[$i] = $row[2];
        $parent_ID = $row[1];
        $i++;
    } 
```

然后我尝试使用以下结构回显名称/

```
$x = 0;
while (isset ($name[$x]))
echo $name[$x];
$x++; 
```

唯一的问题是，第二个循环结构冻结了我的电脑加载，因此我假设它无限循环。

为什么会这样？假设`$x`和`$i`是相同的值（即 7） 那么`$name[$x]`和`name[$i]`应该是等价的，这不正确吗？

然后，一旦我`$name[$x]`在第二个循环中的条件通过了分配的变量点，循环不应该终止吗？

是否有可能对于循环语句条件，它使用全局变量声明`$x = 0`而不是内部`$x`值来评估条件是否满足，因此该语句始终为真？

有什么问题，我该如何纠正？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T11:06:19.057

也许添加'{'和'}'来增加计数器？

```
while (isset ($name[$x])) {
  echo $name[$x];
  $x++;
} 
```

更好地使用`foreach`，添加`is_array`检查。写好代码！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T11:07:57.147

只有`echo $name[$x];`在while循环内。它应该是：

```
$x = 0;
while (isset ($name[$x]))
{
    echo $name[$x];
    $x++;
} 
```

# ruby-on-rails - Rails模型到递归json

> ID：13029049
> 
> 赞同：2
> 
> 时间：2012-10-23T11:04:33.740
> 
> 标签：ruby-on-rails, ruby

我有一个菜单模型，它有相同类型的子菜单。就像是：

*   1级
    *   1.1级
    *   1.2级
*   2级
    *   2.1级
    *   ...

因此，我需要一种以递归方式将所有级别包含在我的 json 中的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T11:13:59.823

Rails 中的 JSON 通过两种方法工作：

`as_json`负责创建对象的哈希表示，同时`to_json`将该哈希对象表示转换为 JSON。

所以你需要做的是在你的模型中定义 as_json 方法来包含你想要的。

```
def as_json
 {
   :other_options => value,
   :submenu => self.submenus.collect { |n| n.as_json }
 }
end 
```

这是一个非常粗略的实现，但它会递归地访问所有子菜单（因为子菜单本身就是菜单）并将它们呈现为一个哈希，然后再转换为 JSON。

# c# - 检查Skype用户名和密码是否存在

> ID：13029051
> 
> 赞同：0
> 
> 时间：2012-10-23T11:04:37.923
> 
> 标签：c#, .net, skype

> **可能重复：**
> [检查用户是否在 Skype 上注册](https://stackoverflow.com/questions/13028100/check-whether-a-user-is-registered-on-skype-or-not)

我正在创建一个 .net Windows 应用程序，在这个应用程序中我想检查我的应用程序中任何用户输入的用户名和密码是否真的存在。所以有人知道我该怎么做吗？

谢谢，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-23T11:10:11.447

应该没那么难，你可以使用 skype API [http://developer.skype.com/accessories/skype4com](http://developer.skype.com/accessories/skype4com)。使用此命令尝试登录到 Skype：

c:\Program Files (x86)\Skype\Phone\skype.exe /username:"stealthrt1992" /password:"mypasswordhere"

只需外壳（cmd）它，然后尝试将您的应用程序（使用我给您的 API）附加到Skype，然后您将能够看到或者您是否已登录。

顺便说一句，如果你想暴力破解这不是一个好主意（因为它太慢了）但我认为你无论如何都不能在这里问这样的事情。

# cocoa - 自动布局约束对带有 drawRect 的 NSView 组合不起作用：

> ID：13029052
> 
> 赞同：2
> 
> 时间：2012-10-23T11:04:38.467
> 
> 标签：cocoa, nsview, drawrect, autolayout

我正在尝试将[自动布局](http://developer.apple.com/library/mac/#releasenotes/UserExperience/RNAutomaticLayout/_index.html#//apple_ref/doc/uid/TP40010631)约束应用于继承自`NSView`. 该按钮相当复杂，例如可以用作单选按钮。`drawRect:`您可以从以下代码摘录中猜到用户界面的组成。

```
@interface CustomButton : NSView 
```

...

```
- (void)drawRect:(NSRect)dirtyRect {
    // ...
    if (self.hasImage) {
        // ...
        if (self.hasTitle) {
            // ...
            [image drawInRect:imgRect
                     fromRect:NSZeroRect
                    operation:NSCompositeSourceOver
                     fraction:fraction
                    alignment:Alignment_LEFT];
        } else {
            [image drawInRect:imgRect
                     fromRect:NSZeroRect
                    operation:NSCompositeSourceOver
                     fraction:fraction
                    alignment:Alignment_CENTER];
        }
    }
    if (self.hasTitle) {
        // ...
        [self.textRenderer drawText:m_title
                         inRect:textRect
                      withState:state
                    controlView:self];
    }
} 
```

我成功配置了一个从 NSView 派生的自定义文本字段。不同之处在于文本字段用于`addSubView:`组成其用户界面组件。

我想知道是否仍然可以使用 Autolayout 约束来定位用户界面组件。目前没有组件出现。我觉得它不起作用，因为我画了那些“子视图”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:10:47.287

我设法通过实施`intrinsicContentSize`in解决了这个问题`CustomButton`。

```
#pragma mark - NSConstraintBasedLayoutFittingSize

/**
    Returns a suitable size for the receiver.
    This settings may not apply if a layout constraint
    defines minimum values for the width or height of the element.
    @returns A size for the receiver.
 */
- (NSSize)intrinsicContentSize {
    // Calculation of width and height of the rendered text.
    return NSMakeSize(width, height);
} 
```

# c++ - SQLite 能胜任这项任务吗？存储路径名和文件属性

> ID：13029057
> 
> 赞同：2
> 
> 时间：2012-10-23T11:04:52.550
> 
> 标签：c++, windows, sqlite

目前我正在寻找一个可嵌入的数据库（C++，Win32），我发现 SQLite 非常迷人。但是，我想知道将文件路径与文件属性一起存储在 SQL 数据库中是否有意义。在服务器系统上，文件的数量可以从几百或几千到几百万或几十亿。这是用于探索磁盘内容的软件（但不是文件本身的内容）。

我正在考虑的是一个存储完整目录部分的表和另一个存储文件属性（包括名称）的表。然后后者将包含对“父”文件夹的反向引用。

我也在考虑的一件事是目录表是否应该存储每个目录的完整路径，这将导致存储冗余信息，例如：

```
ID | Name
0  | C:
1  | C:\Windows
2  | C:\Windows\System32
3  | C:\Windows\System32\config 
```

代替：

```
ID | Name     | Parent
0  | C:       | NULL
1  | Windows  | 0
2  | System32 | 1
3  | config   | 2 
```

当然，我不能“贪婪”地保存存储/内存，也不能存储每个字符串（每个路径组件）的单个实例，除非有某种修剪或引用计数......

你认为哪一个更优秀，为什么？第二种方法不会造成性能损失吗？

此外，是否有任何项目是[FLOSS](https://secure.wikimedia.org/wikipedia/en/wiki/FLOSS)并且已经实现了类似的东西（存储分层路径名和属性），最好已经使用 SQLite？

* * *

在我正在考虑的架构中，该文件`C:\Windows\System32\config\SOFTWARE`将由以下内容表示：

```
ID | Name   | Folder | Size    | Attributes | ...
42 | SYSTEM | 3      | 1024000 | 0x00000301 | ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:14:54.610

SQLite 应该很容易处理这个问题。请参阅[SQLite 的适当用途](https://www.sqlite.org/whentouse.html)。

我更喜欢您的表的第二种自连接形式。SQLite 应该有问题跟随包含在`Parent`字段中的 ID 回到`ID`（应该有一个索引）。但是该`Name`字段也应该有一个索引。当您将新条目插入表中时，这将启用对现有文件夹的快速查找。

# android-sdk-2.1 - 机器人盒子工作

> ID：13029063
> 
> 赞同：1
> 
> 时间：2012-10-23T11:05:08.247
> 
> 标签：android-sdk-2.1

我在 mac 中安装了 Android SDK，AVD 作为 android 2.1 api7 运行良好。我使用 Droid box 测试 apk，但失败，回复消息

`droidbox.sh: line 3: adb: command not found`

`droidbox.sh: line 3: adb: command not found`

在我的 SDK 平台中有 adb 文件，我也尝试命令 export `PATCH`，但这个命令仍然失败。我把所有这些东西放在桌面上。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T12:54:05.730

您需要在路径中导出 android-sdk 的路径。Droidbox 在其页面告诉以下要导入：

```
export PATH=$PATH:/path/to/android-sdk/tools/
export PATH=$PATH:/path/to/android-sdk/platform-tools/ 
```

# android - Android - 在 Galaxy Note 上导入 Sqlite 数据库时出现错误代码 11

> ID：13029065
> 
> 赞同：4
> 
> 时间：2012-10-23T11:05:10.383
> 
> 标签：android, sqlite, ormlite

我正在使用下面的代码从资产中导入预填充（ORMLite）数据库。

除了 Galaxy Note 10.1 之外，这在多个设备上都可以正常工作。操作完成后关闭数据库时出现异常：

“错误代码 = 11，味精 = 行中的数据库损坏 ....”

当我从设备下载数据库并在 SqliteBrowser 中打开它时，一切似乎都很好。有任何想法吗 ？

```
public class MySQLiteOpenHelper extends SQLiteOpenHelper {

// {....}

public void importDB() {

    InputStream is = context.getAssets().open("DBName.db");

    try {
        close();
        FileOutputStream os = new FileOutputStream(new File(Environment.getDataDirectory(), dbPath));
        try {
            byte[] buffer = new byte[4096];
            for (int n; (n = is.read(buffer)) != -1;) {
                os.write(buffer, 0, n);
            }
        } finally {
            os.close();
        }
    } finally {
        is.close();
    }
    getWritableDatabase().close();
} 
```

错误：

```
I/SqliteDatabaseCpp(684): sqlite returned: error code = 11, msg = database         corruption at line 48171 of [ed759d5a9e], db=/data/data/app_name/databases/DBName_db
I/SqliteDatabaseCpp(684): sqlite returned: error code = 11, msg = database disk image is malformed, db=/data/data/app_name/databases/DBName_db
E/SqliteDatabaseCpp(684): sqlite3_exec - Failed to set synchronous mode = 1(Normal) 
I/SqliteDatabaseCpp(684): sqlite returned: error code = 11, msg = database corruption at line 48171 of [ed759d5a9e], db=/data/data/app_name/databases/DBName_db
I/SqliteDatabaseCpp(684): sqlite returned: error code = 11, msg = database disk image is malformed, db=/data/data/app_name/databases/DBName_db
E/SqliteDatabaseCpp(684): CREATE TABLE android_metadata failed
E/DefaultDatabaseErrorHandler(684): Corruption reported by sqlite on database: /data/data/app.name/databases/DBName.db
E/DefaultDatabaseErrorHandler(684): deleting the database file: /data/data/app.name/databases/DBName.db 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:48:11.083

您始终必须同步：`os.getFD().sync()`在关闭 FileOutputStream 之前。这与文件系统有关。有些人会在他们认为合适的时候写作——这可能会造成麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-08T12:33:33.647

从 logcat 输出中可以观察到，您没有为 DatabaseErrorHandler 和隐式处理程序 (DefaultDatabaseErrorHandler) 提供自定义实现，只需删除损坏的数据库。您应该使用 DefaultDatabaseErrorHandler 的实现

您应该运行 PRAGMA 完整性检查；在恢复的数据库上。这通常返回字符串“ok”，否则您可以解析字符串，例如，如果您找到一个索引，您可以删除并重新创建它。

```
public class MySQLiteOpenHelper extends SQLiteOpenHelper {

    public MySQLiteOpenHelper(final Context context) {
        super(context, DB_NAME, null, DATABASE_VERSION, new DatabaseErrorHandler() {
            @Override
            public void onCorruption(SQLiteDatabase db) {
                //your code
            }
        });
    }

    // {....}

} 
```

# signalr - SignalR，有限的唯一连接（打开的选项卡）IIS8，Windows8

> ID：13029069
> 
> 赞同：10
> 
> 时间：2012-10-23T11:05:19.400
> 
> 标签：signalr

无法使用 SignalR，当打开多个选项卡并分配给每个选项卡的唯一 ID 时（请参阅。[当 SignalR 一次建立 8-10 个连接时，实时聊天不起作用](https://stackoverflow.com/questions/10426163/when-signalr-made-8-10-connections-at-a-time-live-chat-doesnt-work)）。

但。我在此 stackoverflow 问题中描述了一种解决方法。这个想法是按顺序覆盖connectionid，每个打开的选项卡都将具有相同的连接ID：因此，从逻辑上讲，在我的特定情况下，没有理由为每个选项卡设置唯一的ID，因为每个选项卡都由一个MyApplicationUserId打开.

无论如何，在stackoverflow中已经注意到（参见[SignalR How is a duplicate Connection Idhandled?](https://stackoverflow.com/questions/11522090/signalr-how-is-a-duplicate-connection-id-handled)），该connectionid必须是唯一的。他们说，IConnectionIdGenerator 将在即将发布的版本中删除。

所以，这是一种死胡同。我必须使用唯一的 ID，但我不能在打开多个浏览器选项卡的情况下使用 SignalR。

谢谢你。德米特里。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T19:02:58.577

正如您在[此处](https://github.com/SignalR/SignalR/issues/849)打开的 SignalR 问题中所讨论的那样，大多数现代浏览器都会限制到同一站点的最大并发连接数（通常约为 6 个）。

一种解决方法是使用子域，即每个选项卡连接到不同的子域（这是 Facebook 使用的方法）。另一种选择是仅启动一个连接并`localStorage`用作选项卡之间的消息总线，正如 FreshCode 在此问题中所建议的那样：[SignalR and Browser Connection limit](https://stackoverflow.com/questions/12724202/signalr-and-browser-connection-limit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T11:34:50.767

要绕过浏览器限制，您可以使用‛localStorage‛ 在窗口之间进行通信，并且只有一个窗口作为连接所有者。在这种情况下，其他窗口使用连接所有者来接收/发送消息。[IWC-SignalR](https://github.com/slimjack/IWC-SignalR)是这种方法的一种实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-19T06:45:53.567

是的。您将为信号 R 连接创建动态子域，因为并发请求 [max = 8] 存在浏览器限制，并且对于不同的浏览器，此并发限制可能会有所不同。

对于动态子域，您需要从主机面板为子域设置 DNS，因此这些动态子域指向您的主域。例如 xyz.com 是您的主域，abc1.xyz.com 是您的子域，abc2.xyz.com 是您的子域，abc3.xyz.com 是您的子域，abc4.xyz.com 是您的子域-领域。这些子域在DNS设置和IIS设置后都指向主域。这同样适用于聊天应用程序。祝你好运...

# jquery - 谷歌事件跟踪代码，对吗？

> ID：13029070
> 
> 赞同：0
> 
> 时间：2012-10-23T11:05:23.317
> 
> 标签：jquery, google-analytics, analytics, tracking, event-tracking

我正在尝试跟踪页面上表单上的提交按钮的点击，但它不起作用。我正在使用这段代码：

```
 $('#edit-company-questions-submit').submit(function() {
      _gaq.push('_trackEvent', 'Forms', 'Submit', 'Sales contact');
    }); 
```

这是正确的还是我误解了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T11:09:48.250

如果您使用默认的异步代码段，则必须将事件包装在数组中：

```
_gaq.push(['_trackEvent', 'Forms', 'Submit', 'Sales contact']); 
```

查看[事件跟踪文档](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)以获取更多示例。还要为 Chrome 安装[GADebug 扩展程序，](https://chrome.google.com/webstore/detail/google-analytics-debugger/jnkmfdileelhofjcijamephohjechhna)以查看从您的页面发送的事件。

# amazon-fps - 即将到来的亚马逊 FPS 变化

> ID：13029077
> 
> 赞同：0
> 
> 时间：2012-10-23T11:05:40.383
> 
> 标签：amazon-fps

根据亚马逊发送的通知：

“Amazon Payments 发布了重要的代码更新，以进一步加强我们产品的安全性和可靠性。这些更新专门针对用 ASP、Java 和 PHP 编写的代码”

以上是否意味着没有 API 更改，而只是对提供的示例进行了更改？

我不使用任何这些，有人可以描述变化的性质吗？

杰夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T16:06:22.220

这是我知道的一个老问题，但这是你的答案：

主要更改是选项：CURLOPT_SSL_VERIFYHOST（从 1 到 2）。您可以在此处找到更多详细信息：http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

> 1 检查 SSL 对等证书中是否存在通用名称。2 检查公用名是否存在，并验证它是否与提供的主机名匹配。在生产环境中，此选项的值应保持为 2（默认值）。
> 
> 在 cURL 7.28.1 中删除了对值 1 的支持

# c# - 无法在 WPF 中动态生成的 UI 组件中设置不同的值

> ID：13029083
> 
> 赞同：0
> 
> 时间：2012-10-23T11:05:54.860
> 
> 标签：c#, .net, wpf, dynamic, mvvm

我正在开发一个 WPF 应用程序，我需要在其中动态生成 2 个组框，其中包含一个单选按钮、文本框和一个组合框。好吧，我遇到了一个棘手的情况，即两个组框中的值需要不同。

我有两个 xaml 文件`PCM2PDMView.xaml`和`PCM2PDMWidgetView.xaml`& viewmodel 类。

**PCM2PDMView.xaml：**

```
<UserControl.Resources>
    <DataTemplate x:Key="PCM2PDMDataTemplate">
        <WrapPanel>
            <TextBlock Text="{Binding Description}" Margin="5,5,0,0"/>
            <local:PCM2PDMWidgetView Margin="5,10,5,5"/>
        </WrapPanel>
    </DataTemplate>
</UserControl.Resources>

<Grid Style="{DynamicResource styleBackground}" >
    <ItemsControl ItemTemplate="{StaticResource PCM2PDMDataTemplate}" ItemsSource="{Binding PCM2PDMWidgets}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
</Grid> 
```

**PCM2PDMWidgetView.xaml：**

```
<Grid>
    <GroupBox Height="Auto" HorizontalAlignment="Stretch" Margin="5" Name="groupBox1" VerticalAlignment="Stretch" Width="Auto">
        <Grid>             
            <Grid Grid.Row="1">                   
                <RadioButton Grid.Column="1" Content="Port B" Command="{Binding PortCommand}" IsChecked="{Binding PortCheck}" Height="20" Width="60" HorizontalAlignment="Center" Margin="0,0,0,0" Name="PCM2PDMEnableRadioBtn" VerticalAlignment="Center" />                    
            </Grid>

            <Grid Grid.Row="2">                  

                <ComboBox Grid.Column="1" Height="20" ItemsSource="{Binding PortModeList}" SelectedItem="{Binding SelectedPortModeList, Mode=OneWayToSource}" SelectedIndex="0" HorizontalAlignment="Center" Margin="0,0,0,0" Name="PortModeCombo" VerticalAlignment="Center" Width="110" />
            </Grid>

            <Grid Grid.Row="3">                    
                <ToggleButton Grid.Column="0" Content="Soft Reset" Height="25" Width="105" HorizontalAlignment="Center" Margin="0,0,0,0" Name="SoftResetRadioBtn" VerticalAlignment="Center" />
                <ToggleButton Grid.Column="1" Command="{Binding PCM2PDMEnableCommand}" IsChecked="{Binding PCM2PDMCheck}" Content="PCM2PDM Enable" Height="25" Width="110" HorizontalAlignment="Center" Margin="0,0,0,0" Name="PCM2PDMRadioBtn" VerticalAlignment="Center" />
            </Grid> 

            <Grid Grid.Row="4">                 
                <TextBox Height="25" IsReadOnly="True" Text="{Binding MemAddPoint}" Margin="0" Name="SetRead" />               
            </Grid>
       </Grid>
   </GroupBox>
</Grid> 
```

**PCM2PDmViewModel.cs：**

```
public ObservableCollection<PCM2PDMWidgetViewModel> PCM2PDMWidgets { get; set; }

    public PCM2PDMViewModel()
    {
        PCM2PDMWidgets = new ObservableCollection<PCM2PDMWidgetViewModel>();
        PCM2PDMWidgets.Add(new PCM2PDMWidgetViewModel { Description = "PCM2PDM 0", ID = 0 });
        PCM2PDMWidgets.Add(new PCM2PDMWidgetViewModel { Description = "PCM2PDM 1", ID = 1 });            
    } 
```

这会生成 2 个组合框，其中包含相关的 UI 控件。

**PCM2PDMWidgetViewModel.cs：**

```
public ObservableCollection<string> _PortModeList = _PortModeList = new ObservableCollection<string>();
_PortModeList.Add("Normal"); //Adding in Constructor
_PortModeList.Add("Mode 1 - PCM + PDM");
_PortModeList.Add("Mode 2 - PDM only");

public ObservableCollection<string> PortModeList
    {
        get { return _PortModeList; }
        set
        {
            _PortModeList = value;
            OnPropertyChanged("PortModeList");
        }
    }

    private string _selectedPortModeList;
    public string SelectedPortModeList
    {
        get { return _selectedPortModeList; }
        set
        {
            _selectedPortModeList = value;                
            OnPropertyChanged("SelectedPortModeList");
        }
    }

    public string Description {get; set;}      

    public int ID {get; set;}

    public string MemAddPoint {get; set;} 
```

**要求：**

1.  现在，如果您注意到`Grid.Row=1`您会发现一个名为 的单选按钮`Port B`，那么我的要求是`Port B`在我的第一个 groupbox 和`Port C`我的第二个 groupbox 中。功能（按钮单击方法）对两者都是通用的，但名称必须不同。我们怎样才能做到这一点？

2.  在我的组合框中，我添加了 3 个项目。在这里，我想在第一个 groupbox 中的组合框中添加和add ，`Normal`并在第二个 groupbox 中的组合框中添加。怎样才能做到这一点？:)`Mode 1 - PCM + PDM``Normal``Mode 1 - PCM + PDM``Mode 2 - PDM Only`

3.  如果你注意到`Grid.Row=3`你会发现`PCM2PDMEnable`切换按钮。我想让这个切换按钮在我的第二个 groupbox 中而不是在我的第一个 groupbox 中可见。我怎样才能做到这一点？

4.  输入的文本框`Grid.Row=4`有一个值为（例如0x5）的文本框。我需要将此文本框的文本设置为 Groupbox 1 中的 0x5 和 Groupbox2 的 Textbox 中的 0x7。怎么做？

请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:15:23.923

在您的“PCM2PDMWidgetViewModel”中创建一个属性，例如“RadioButtonName”，并在创建“PCM2PDMWidgetViewModel”实例时将属性设置为您想要的名称..像这样

```
PCM2PDMWidgets.Add(new PCM2PDMWidgetViewModel { Description = "PCM2PDM 0", ID = 0, RadioButtonName = "Port B" });
        PCM2PDMWidgets.Add(new PCM2PDMWidgetViewModel { Description = "PCM2PDM 1", ID = 1, RadioButtonName = "Port C" }); 
```

**在 PCM2PDMWidgetView XAML 中：**

将单选按钮内容更改为绑定“Content="{Binding RadioButtonName}"”

```
<Grid Grid.Row="1">                   
                <RadioButton Grid.Column="1" Content="{Binding RadioButtonName}" Command="{Binding PortCommand}" IsChecked="{Binding PortCheck}" Height="20" Width="60" HorizontalAlignment="Center" Margin="0,0,0,0" Name="PCM2PDMEnableRadioBtn" VerticalAlignment="Center" />   

        </Grid> 
```

而不是在构造函数中添加以下元素..将它们作为 List 作为参数发送给构造函数..

**你的代码**

_PortModeList.Add("正常"); //在构造函数中添加 _PortModeList.Add("Mode 1 - PCM + PDM"); _PortModeList.Add("模式 2 - 仅 PDM");

**解决方案 2**

公共 PCM2PDMWidgetViewModel(List comboBoxItems) { foreach(comboBoxItems 中的项目) { _PortModeList.Add(item); } }

在创建“PCM2PDMWidgetViewModel”实例时发送列表作为构造函数参数（看下面的代码）

```
PCM2PDMWidgets.Add(new PCM2PDMWidgetViewModel (new List<string>{"Normal","Mode 1 - PCM + PDM"}) { Description = "PCM2PDM 0", ID = 0, RadioButtonName = "Port B" });
        PCM2PDMWidgets.Add(new PCM2PDMWidgetViewModel(new List<string>{"Normal","Mode 1 - PCM + PDM","Mode 2"}) { Description = "PCM2PDM 1", ID = 1, RadioButtonName = "Port C" }); 
```

**为 4**

您可以使用与单选按钮名称相同的方式来解决此问题..

以与描述和 ID 相同的方式设置“MemAddPoint”属性的值。由于此属性已绑定到文本框，因此您无需更改 xaml 绑定

**对于 3：**

您必须在“可见性”类型的“PCM2PDMWidgetViewModel”中创建一个新属性并将其绑定到切换按钮可见性属性。创建实例时设置属性值

# java - 使用 apache cxf 从 wsdl 生成客户端时出错

> ID：13029088
> 
> 赞同：6
> 
> 时间：2012-10-23T11:06:11.850
> 
> 标签：java, wsdl, cxf

我尝试通过给出以下命令，使用 cxf（版本 2.2.3、2.2.6 和 2.7.0）从 wsdl 生成存根和客户端

```
> wsdl2java.bat -p com.easynet.eordering.client -client  http://expediter.staging.gis.easynet.com:7001/cds/services/eordering?wsdl 
```

但我收到一个错误

> WSDLToJava 错误：非唯一的身体部位！在港口，操作必须在线路上具有唯一的操作签名才能成功调度。在端口 {http://eordering.uk.easynet.net}eorderingPortSOAP，操作“{http://eordering.uk.easynet.net}getAMList”和“{http://eordering.uk.easynet.net}getDCList " 具有相同的请求正文块 {http://eordering.uk.easynet.net}userListRequest

我知道为什么会抛出这个错误，在我的 wsdl 操作中写成

```
<operation name="getDCList"><input message="tns:userListRequest"/><output message="tns:userListResponse"/></operation>
<operation name="getAMList"><input message="tns:userListRequest"/><output message="tns:userListResponse"/></operation> 
```

我只是为这两个操作重用了 userListRequest 参数，我相信错误是因为在两个操作中指定了相同的参数（userListRequest）而引发的。

有没有办法在不更改 wsdl 的情况下避免此错误？（据我所知，wsdl 1.2 不允许操作重载，但输入参数重载？）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-25T13:20:37.047

如问题中所述：

> 有没有办法在不更改 wsdl 的情况下避免此错误？

如果您无法修复 WSDL，您可以禁用其验证：

-验证=无

或者如果您使用的是 Maven：

```
<configuration>
    <wsdlOptions>
        <wsdlOption>
            <wsdl>${basedir}/src/main/wsdl/my.wsdl</wsdl>
            <validate>none</validate>
        </wsdlOption>
    </wsdlOptions>
</configuration> 
```

不确定这是否不会在运行时引起问题。我会很快找到这个并将更新这篇文章。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-23T15:48:05.190

这样的 WSDL 将不符合 WSI-BasicProfile。看：

[http://www.ws-i.org/profiles/basicprofile-1.1.html#Operation_Signatures](http://www.ws-i.org/profiles/basicprofile-1.1.html#Operation_Signatures)

配置文件将操作签名定义为将出现在 soap:Body 中的元素的名称。因此，如果两个操作使用相同的子元素（或您的情况下的消息），则它们被视为非唯一且违反：

```
R2710 The operations in a wsdl:binding in a DESCRIPTION MUST result in operation signatures that are different from one another. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-02T14:21:59.683

如果可以更改 WSDL 并且使用 WS-I Basic Profile 2.0，则可以向元素（在元素内）`wsa:Action`添加[唯一值](http://www.w3.org/TR/ws-addr-metadata/#actioninwsdl)：`wsdl:input``wsdl:operation`

例如

```
<wsdl:operation name="update">
  <wsdl:input message="tns:myMessage" wsam:Action="namespace/port/operation" />
</wsdl:operation> 
```

在 WS-I 基本概要 2.0 中，“操作签名”的定义：“概要将“操作签名”定义为 SOAP 输入消息的 SOAP 主体的子元素的完全限定名称，该名称由 WSDL 绑定中的操作描述以及 wsa:Action SOAP 标头块的 URI 值（如果存在）。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-31T14:50:34.917

另一种解决方法是尝试从 WSDL 获取模式文件。和下面的插件在maven中生成java类

```
<plugin>
    <groupId>org.jvnet.jax-ws-commons</groupId>
    <artifactId>jaxws-maven-plugin</artifactId>
    <version>2.3</version>
    <executions>
        <execution>
            <id>schema1-generate</id>
            <goals>
                <goal>wsimport</goal>
            </goals>
            <configuration>
                <extension>true</extension>
                <bindingFiles>
                    <bindingFile>${basedir}/src/main/resources/wsdl/service-bindings.xjc</bindingFile>
                </bindingFiles>
                <wsdlDirectory>src/main/resources/wsdl</wsdlDirectory>
                <wsdlFiles>
                    <wsdlFile>Service.wsdl</wsdlFile>
                </wsdlFiles>
                <keep>true</keep>
                <sourceDestDir>target/generated-code/src</sourceDestDir>
                <vmArgs>
                    <vmArg>-Djavax.xml.accessExternalSchema=all</vmArg>
                </vmArgs>
            </configuration>
            <phase>generate-sources</phase>
        </execution>
    </executions>
</plugin> 
```

# javascript - jQuery等高响应div行

> ID：13029090
> 
> 赞同：8
> 
> 时间：2012-10-23T11:06:16.173
> 
> 标签：javascript, jquery, responsive-design, equal-heights

我知道这个问题已经被问了一百万次，但我正在寻找更具体的东西。

由于我的网站是完全响应的，我需要根据每行调整 div 的大小，而不是将所有高度设置为一个高度。

我正在使用以下修改后的代码来设置容器内所有 div 的高度：

```
$.fn.eqHeights = function() {
    var el = $(this);
    if (el.length > 0 && !el.data('eqHeights')) {
        $(window).bind('resize.eqHeights', function() {
            el.eqHeights();
        });
        el.data('eqHeights', true);
    }
    return el.each(function() {
        var curTop = 0;
        var curHighest = 0;
        $(this).children().each(function(indx) {
            var el = $(this),
                elHeight = el.height('auto').outerHeight();

            var thisTop = el.position().top;
            if (curTop > 0 && curTop != thisTop) {
                curHighest = 0;
            }

            if (elHeight > curHighest) {
                curHighest = elHeight;
            }

            curTop = thisTop;

        }).height(curHighest);
    });
}; 
```

我必须`var thisTop = el.position().top;`确定哪些元素在同一行，但不确定如何将同一行中的所有元素设置为最大值？

当前`.height(curHighest);`将所有元素设置为相同的高度，无论它们是否在同一行。

感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T16:37:35.757

设法使用以下代码段使其工作：

```
$.fn.eqHeights = function(options) {

    var defaults = {  
        child: false 
    };  
    var options = $.extend(defaults, options); 

    var el = $(this);
    if (el.length > 0 && !el.data('eqHeights')) {
        $(window).bind('resize.eqHeights', function() {
            el.eqHeights();
        });
        el.data('eqHeights', true);
    }

    if( options.child && options.child.length > 0 ){
        var elmtns = $(options.child, this);
    } else {
        var elmtns = $(this).children();
    }

    var prevTop = 0;
    var max_height = 0;
    var elements = [];
    elmtns.height('auto').each(function() {

        var thisTop = this.offsetTop;

        if (prevTop > 0 && prevTop != thisTop) {
            $(elements).height(max_height);
            max_height = $(this).height();
            elements = [];
        }
        max_height = Math.max(max_height, $(this).height());

        prevTop = this.offsetTop;
        elements.push(this);
    });

    $(elements).height(max_height);
}; 
```

我还添加了指定某个元素的功能，以便改为更改高度。

**用法：**

```
$('.equalheight').eqHeights();
$('.equalheight-frame').eqHeights({child:'.frame'}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T13:02:17.030

我最近不得不做同样的事情，这就是我最终的结果：

```
$.fn.equalRowHeights = function() { 

    var count = this.length;

    // set element's height auto so it doesn't mess up when the window resizes
    this.height('auto');

    for (var i = 0; i < count; ) {

        // get offset of current element
        var x = this.eq(i).offset().top;

        // get elements in the same row
        var $rowEls = this.filter(function() {
            return $(this).offset().top === x;
        });

        // set the height elements in the same row
        $rowEls.height( 
            Math.max.apply(null, $rowEls.map(function() { 
                return $(this).height(); 
            }).get()); 
        );

        // set i to avoid unnecessary iterations
        i = $rowEls.filter(':last').index() + 1;    
    }

    var $this = this,
        timer = 0;

    // bind the resize event if it hasn't been added already 
    if (!$this.data('equalRowHeights')) {
        $(window).on('resize.equalRowHeights', function(e) {
            // add a buffer to prevent firing equalRowHeights() too much
            if (timer) {
                clearTimeout(timer);
            }
            timer = setTimeout(function() {
                $this.equalRowHeights();
            }, 50);
        });
        $this.data('equalRowHeights', true);
    }   
}; 
```

### [这是一个小提琴](http://jsfiddle.net/deifwud/2hdkxdz6/30/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-12T00:14:39.123

我接受了 dclawson 的出色回答并进行了一些编辑，因此它可以在其他情况下工作，尤其是在嵌套元素的情况下，如引导行中的常见。

```
$.fn.resEqHeight = function(options) {
    var defaults = {
        child: false
    };
    var options = $.extend(defaults, options);

    var $el = $(this);
    if ($el.length > 0) {
        if(!$el.data('resEqHeight')) {
            $(window).bind('resize.resEqHeight', function () {
                $el.resEqHeight(options);
            });
            $el.data('resEqHeight', true);
        }
    } else {
        console.log("No items found for resEqHeight.");
    }

    if( options.child && options.child.length > 0 ){
        var elmtns = $(options.child, this);
    } else {
        var elmtns = $(this).children();
    }

    var prevTop = 0;
    var max_height = 0;
    var elements = [];
    elmtns
        .height('auto')
        .each(function() { $(this).data('resEqHeight.top', $(this).offset().top ); })
        .each(function(index) {
            var $el2 = $(this);
            var thisTop = $el2.data('resEqHeight.top');

            if (index > 0 && prevTop != thisTop) {
                $(elements).height(max_height);
                max_height = $el2.height();
                elements = [];
            }
            max_height = Math.max(max_height, $el2.height());

            prevTop = thisTop;
            elements.push(this);
        });

    $(elements).height(max_height);
}; 
```

它使用相同的语法

```
$('.equalheight').resEqHeight();
$('.equalheight-frame').resEqHeight({child:'.frame'}); 
```

# visual-c++ - 类定义中的静态常量不可访问 (C++)

> ID：13029092
> 
> 赞同：0
> 
> 时间：2012-10-23T11:06:19.387
> 
> 标签：visual-c++

我已经宣布这个类“机器人”：

```
 #ifndef ROBOT_H
 #define ROBOT_H

 class Robot {

 private:

    static const int N_ROBOT_JOINTS = 5;    
    static const int JOINT_PARAM_D1 = 275;  
    static const int JOINT_PARAM_A2 = 200;  
    static const int JOINT_PARAM_A3 = 130;  
    static const int JOINT_PARAM_D5 = 130;

 public:        
    Robot();
    float* forwardKinematics(int theta[N_ROBOT_JOINTS]);

 };

 #endif 
```

机器人.cpp

```
#include "stdafx.h"
#include "Robot.h"
//#define _USE_MATH_DEFINES
//#include <math.h>

Robot::Robot(void)
{
}

float* forwardKinematics(int theta[Robot::N_ROBOT_JOINTS])
{
    float* array_fwdKin = new float[Robot::N_ROBOT_JOINTS];

    float p_x, p_y, p_z, pitch, roll;

    for (int i = 0; i < Robot::N_ROBOT_JOINTS; i++)
    {

    }

    return array_fwdKin;
} 
```

但是当我尝试编译时，我得到了这个错误：

> 6 IntelliSense：成员“Robot::N_ROBOT_JOINTS”（在“e:\documents\visual studio 2012\projects\robotics kinematics\robotics kinematics\Robot.h”的第 9 行声明）无法访问 e:\Documents\Visual Studio 2012\项目\机器人运动学\机器人运动学\Robot.cpp 10 43 机器人运动学

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:07:58.123

`float* forwardKinematics(int theta[Robot::N_ROBOT_JOINTS])`声明了一个自由函数，而不是一个成员，因此它无权访问`Robot`'s privates。

你可能是说

```
float* Robot::forwardKinematics(int theta[Robot::N_ROBOT_JOINTS])
//       |
//  notice qualification 
```

这告诉编译器您正在实现该成员，因此允许访问该类的私有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:09:01.820

如果`forwardKinematics`是您的成员，则`Robot`需要放入 .cpp 文件

```
float * Robot::forwardKinematics( int theta[Robot::N_ROBOT_JOINTS] )
{
      // implementation
} 
```

# java - 如何从文件中读取 hashMap

> ID：13029094
> 
> 赞同：1
> 
> 时间：2012-10-23T11:06:25.393
> 
> 标签：java, hashmap

我找到了从文件（在磁盘上）读取 hashMap 的代码：

```
public HashMap<String, Integer> load(String path)
{
    try
    {
        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(path));
        Object result = ois.readObject();
        //you can feel free to cast result to HashMap<String, Integer> if you know that only a HashMap is stored in the file
        return (HashMap<String, Integer>)result;
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
} 
```

但我没有找到任何示例该文件的外观如何。你能用一个例子来解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:08:49.370

您需要使用（请参阅[此处](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)`ObjectOutputStream`的文档）将其写出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:11:21.557

有问题的文件只不过是一个序列化的 HashMap。

想看的话，先序列化一个HashMap，找出来。

要序列化，您可以使用以下代码：

```
HashMap<String,Integer> aHashMap = new HashMap<String,Integer>();  
aHashMap.put("one",1);   
aHashMap.put("two",2);
aHashMap.put("three",3);

File file = new File("serialized_hashmap");   
FileOutputStream fos = new FileOutputStream(file);   
ObjectOutputStream oos = new ObjectOutputStream(fos);           
oos.writeObject(aHashMap); 
oos.flush(); 
```

现在，`file`您可以将其与您提供的程序一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:11:57.543

这是序列化对象的典型问题

```
 import java.io.*; 
    public class SerializationDemo { 
    public static void main(String args[]) { 
    // Object serialization 
    try { 
    MyClass object1 = new MyClass("Hello", -7, 2.7e10); 
    System.out.println("object1: " + object1); 
    FileOutputStream fos = new FileOutputStream("serial"); 
    ObjectOutputStream oos = new ObjectOutputStream(fos); 
    oos.writeObject(object1); 
    oos.flush(); 
    oos.close(); 
    } 
    catch(Exception e) { 
    System.out.println("Exception during serialization: " + e); 
    System.exit(0); 
    }
} 
```

当然 MyClass 应该实现可序列化的接口

```
class MyClass implements Serializable { 
String s; 
int i; 
double d; 
public MyClass(String s, int i, double d) { 
this.s = s; 
this.i = i; 
this.d = d; 
} 
public String toString() { 
return "s=" + s + "; i=" + i + "; d=" + d; 
} 
} 
```

执行此操作并查看文件

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-23T11:11:49.527

此示例使用[序列化](http://docs.oracle.com/javase/tutorial/jndi/objects/serial.html)，这是一种将其状态转换为字节流的技术，以便可以将字节流恢复为对象的副本。

因此，创建这样一个文件的方法是先序列化一个`HashMap<String, Integer>`，如下所示：

```
public void serializeHashMap(HashMap<String, Integer> m) {
    FileOutputStream fos = new FileOutputStream("hashmap.dat");
    ObjectOutputStream oos = new ObjectOutputStream(fos);

    oos.writeObject(m);
    oos.close();
} 
```

（这不包括异常处理和其他东西，但你明白了......）

# c# - Windows 服务仅运行列出的第一个服务

> ID：13029106
> 
> 赞同：3
> 
> 时间：2012-10-23T11:06:55.613
> 
> 标签：c#, .net, windows-services

我的主要功能是这样的：

```
ServiceBase[] ServicesToRun;
ServicesToRun = new ServiceBase[]
{
    new FirstService(),
new SecondService()
};
ServiceBase.Run(ServicesToRun); 
```

我想运行两个服务，但只是`FirstService`开始。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-11T07:17:39.050

请参阅此链接：[http ://www.bryancook.net/2008/04/running-multiple-net-services-within.html](http://www.bryancook.net/2008/04/running-multiple-net-services-within.html)

简短回答：每个服务都必须有自己的安装程序

但我认为，服务应该是独立的，我建议你重新考虑这个解决方案

# php - 使用 PHP 解码 XML 文件中的 base64 图像

> ID：13029107
> 
> 赞同：1
> 
> 时间：2012-10-23T11:06:57.157
> 
> 标签：php, xml, base64

我正在尝试将产品图像从专有的 ERP 系统导入 OpenCart。

到目前为止（在 Stack Overflow 上的另一个答案的帮助下）我已经能够使用以下代码将图像保存在单独的文件中：http: [//pastebin.com/gv6M8QPT](http://pastebin.com/gv6M8QPT)

示例 XML 文件如下所示： http: [//pastebin.com/k6Eq4Rpr](http://pastebin.com/k6Eq4Rpr)

有3个标签：

*   id：在这种情况下为“1000”
*   文件名：在本例中为“sampleimage.jpg”
*   mediablob：这是 bin.base64 编码的图像

我现在不想简单地保存 XML 文件，而是执行以下操作：

1.  将 XML 文件中的 mediablob 转换为二进制图像文件
2.  将图像文件另存为`<id>.jpg`-根据标签中`jpg`使用的扩展名创建的位置。`<filename>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:09:11.103

尝试类似的东西

```
<?php
$im = file_get_contents('filename.gif');
$imdata = base64_encode($im); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:14:34.687

```
$document = new DOMDocument();
$document->loadXML($xml);
$dataNodes = $document->getElementsByTagName('mediablob');
foreach ($dataNodes as $node) {
    $base64 = $node->textContent;
    $bin = base64_decode($base64);
    file_put_contents('image.jpg', $bin);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T13:29:35.927

这是完整的解决方案。

```
$document = new DOMDocument();
$document->loadXML($xml);
$dataNodes = $document->getElementsByTagName('mediablob');
foreach ($dataNodes as $node) {
    // extract image
    $base64 = $node->textContent;
    // decode image
    $bin = base64_decode($base64);
    // get filename
    $filenames=$node->parentNode->getElementsByTagName('filename');
    $filename=$filenames->item(0)->textContent;
    // get ID
    $ids=$node->parentNode->getElementsByTagName('id');
    $id=$ids->item(0)->textContent;
    // get extension
    $extension=preg_replace("/^.+(?=\\.[^\\.]+$)/","",$filename);
    // save file
    file_put_contents($id.$extension, $bin);
} 
```

# ruby - Ruby：URI 连接行为

> ID：13029109
> 
> 赞同：3
> 
> 时间：2012-10-23T11:07:03.247
> 
> 标签：ruby, uri

我目前正在开发一个 HTML 解析器，我来到了一个没有正确编码 url 的特定网站。在主页（“http://example.com/a/b”）上，我有一些以“a/b”开头的链接，没有最初的“/”。根据我对相对路径的理解，Ruby URI 可以正常工作：

```
uri = URI("http://example.com/a/b")
(uri + "a/b").to_s
==> http://example.com/a/a/b 
```

但是，在 Firefox 或 Chrome 等浏览器中，该行为似乎有所不同，因为该页面被定向到[http://example.com/a/b](http://example.com/a/b)（顺便说一句）。

您以前见过这种情况吗？您建议在 Ruby 中与在 Web 浏览器中具有相同的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:10:49.013

我认为 uri + 'a/b' 只是在进行字符串连接。

我的建议是试试这个：

```
File.join('http://www.example.com', 'a/b') 
```

File.join 支持这种操作:)

# url - 控制器中的 Symfony 2 路由

> ID：13029115
> 
> 赞同：0
> 
> 时间：2012-10-23T11:07:26.843
> 
> 标签：url, variables, symfony, routing

我有一个简单的问题。有没有办法在 cotroler 中使用路由从这样的链接获取：

```
some-text-link-282237 
```

值 282237。

现在我通过以下方式传递整个网址：

```
@Route("/route/{id}", name="my_route") 
```

然后 preg 匹配它，但也许有更清洁的方法。该值始终位于字符串末尾，由最后一个 (-) 分隔

感谢您的帮助，对语言错误深表歉意

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:52:20.090

```
/**
 * @Route("/route/{slug}-{id}",
 *        name="route_name",
 *        requirements={"slug":"[a-zA-Z0-9\-]+","id":"\d+"})
 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:26:31.663

您可以尝试这样的路线：`@Route("/route/{some}/{text}/{link}/{id}`并直接获取您的 id 作为参数或更改分隔符路线：[http](http://symfony.com/doc/2.0/cookbook/routing/slash_in_parameter.html) ://symfony.com/doc/2.0/cookbook/routing/slash_in_parameter.html直接使用“-”作为路线分隔器

# python - 使用非平凡检查器对对象进行分组的 Python 库解决方案

> ID：13029117
> 
> 赞同：0
> 
> 时间：2012-10-23T11:07:28.653
> 
> 标签：python, generics, grouping

我需要遍历一组对象并将它们按某些属性分组到子集中。检查对象是否属于子集很复杂，因为它取决于子集中已经存在的对象。因此我使用可调用对象作为检查器。可以有几个。在整个应用程序中都需要随机访问子集的对象。

这是我的想法如何处理它。

```
class Sequence:
    def __init__(self):
        self.seq_data = dict()
        self.checkers = list()

    def __len__(self):

    def __delitem__(self, key):

    def __getitem__(self, key):

    def add(self, item):

    def check(self, item):

    def itemlist(self): 
```

我想知道在其中一个 python 库中是否有针对此问题的通用解决方案。

示例（根据要求）：给定一组带有 exif 数据的照片，可以将属于一起并用于生成最终图像的几张图像视为一组。例如，具有不同曝光补偿的图像用于创建 HDR 图像。要确定图像是否是序列的一部分，可以检查曝光补偿 exif 字段：(img1, img2, img3)->(0, -1, +1), ) 或 (0, -2, +2 ) 是可能的情况。顺序和实际值取决于相机设置，但总有一个规则可用于识别哪些图像属于一起。

另一个例子可以是全景。假设您拍摄 4x5 部分重叠的图像，可以将其拼接成更大的图像。我想使用 exif 数据自动识别这样的图像序列。

# machine-learning - 在 Weka 中对单个实例进行分类

> ID：13029118
> 
> 赞同：8
> 
> 时间：2012-10-23T11:07:35.913
> 
> 标签：machine-learning, classification, weka, prediction, decision-tree

我使用 WEKA gui 训练并创建了一个 J48 模型。我将模型文件保存到我的计算机上，现在我想用它来分类我的 Java 代码中的单个实例。我想得到属性“集群”的预测。我要做的是：

```
public void classify(double lat, double lon, double co)
{            

// Create attributes to be used with classifiers
                    Attribute latitude = new Attribute("latitude");
                    Attribute longitude = new Attribute("longitude");
                    Attribute carbonmonoxide = new Attribute("co");

                    // Create instances for each pollutant with attribute values latitude, longitude and pollutant itself
                    inst_co = new DenseInstance(4);

                    // Set instance's values for the attributes "latitude", "longitude", and "pollutant concentration"
                    inst_co.setValue(latitude, lat);
                    inst_co.setValue(longitude, lon);
                    inst_co.setValue(carbonmonoxide, co);
                    inst_co.setMissing(cluster);

    Classifier cls_co = (Classifier) weka.core.SerializationHelper.read("/CO_J48Model.model");//load classifier from file

                    // Test the model
        double result = cls_co.classifyInstance(inst_co);
} 
```

但是，我在行上得到一个 IndexArrayOutofBoundsException `inst_co.setValue(latitude, lat);`。我找不到此异常的原因。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T13:39:16.647

您需要将您的 inst_co 添加到您的数据集，即 Instances 对象中。以下代码应该可以工作。

```
import java.util.ArrayList;

import weka.classifiers.Classifier;
import weka.core.Attribute;
import weka.core.DenseInstance;
import weka.core.Instance;
import weka.core.Instances;

public class QuestionInstanceClassifiy {

    public static void main(String[] args) {
        QuestionInstanceClassifiy q = new QuestionInstanceClassifiy();
        double result = q.classify(1.0d, 1, 1);
        System.out.println(result);
    }

    private Instance inst_co;

    public double classify(double lat, double lon, double co)  {

        // Create attributes to be used with classifiers
        // Test the model
        double result = -1;
        try {

            ArrayList<Attribute> attributeList = new ArrayList<Attribute>(2);

            Attribute latitude = new Attribute("latitude");
            Attribute longitude = new Attribute("longitude");
            Attribute carbonmonoxide = new Attribute("co");

            ArrayList<String> classVal = new ArrayList<String>();
            classVal.add("ClassA");
            classVal.add("ClassB");

            attributeList.add(latitude);
            attributeList.add(longitude);
            attributeList.add(carbonmonoxide);
            attributeList.add(new Attribute("@@class@@",classVal));

            Instances data = new Instances("TestInstances",attributeList,0);

            // Create instances for each pollutant with attribute values latitude,
            // longitude and pollutant itself
            inst_co = new DenseInstance(data.numAttributes());
            data.add(inst_co);

            // Set instance's values for the attributes "latitude", "longitude", and
            // "pollutant concentration"
            inst_co.setValue(latitude, lat);
            inst_co.setValue(longitude, lon);
            inst_co.setValue(carbonmonoxide, co);
            // inst_co.setMissing(cluster);

            // load classifier from file
            Classifier cls_co = (Classifier) weka.core.SerializationHelper
                    .read("/CO_J48Model.model");

            result = cls_co.classifyInstance(inst_co);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return result;
    }
} 
```

您从实例创建数据对象。将您的实例添加到此数据中。之后，您可以在实例中设置您的值。

```
Instances data = new Instances("TestInstances",attributeList,0);
inst_co = new DenseInstance(data.numAttributes());
data.add(inst_co); 
```

我建议从外部文件中获取标头信息和实例值或仅创建一次此信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T03:14:58.077

实际上我在我的情况下尝试的是调用 instance.setDataSet() 方法，而不是 addInstance 方法。所以你的代码应该是**inst_co.setDataSet(data)。**

# .net - 将两个gridview绑定到同一个表单的同一个绑定源

> ID：13029120
> 
> 赞同：1
> 
> 时间：2012-10-23T11:07:37.407
> 
> 标签：.net, c#-4.0, vb.net-2010

嗨，我有主详细信息和两个 gridview 我需要以相同的形式将它们绑定到相同的绑定源，并使 gridview1 的 id（自动编号）取值 -1 和 gridview2 = -2

现在，gridview = -1 和 gridview2 = -1 的 id 对我来说是错误的 :( 我该怎么做 ??? .net

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:15:11.063

创建两个绑定到相同数据的绑定源并单独应用它们 - 通过将它们绑定到同一个源，您可以有效地将它们绑定在一起 - 如果您将两个下拉/组合框绑定到同一个源，您可以在更改时看到这一点一个另一个将随之改变。

```
Dim ds as ---Your Data Source---

Dim bs1 as new BindingSource
bs1.DataSource = ds

Dim bs2 as new BindingSource
bs2.DataSource = ds

GridView1.DataSource = bs1
GridView2.DataSource = bs2 
```

# android - Android浏览器中书签的文件夹层次结构

> ID：13029121
> 
> 赞同：1
> 
> 时间：2012-10-23T11:07:39.470
> 
> 标签：android, database, android-contentprovider, bookmarks, android-browser

我正在开发一个书签管理应用程序。目前，我正在显示`listview`. 如果书签的数量很少，这种方法效果很好。但是如果有大量的书签，那么列表就会变得太长并且难以找到特定的书签。所以，我希望用户能够创建文件夹并将相应的书签移动到文件夹中。由于Android书签数据库中没有文件夹列，我无法存储哪些书签属于哪个文件夹的信息。

我可以创建自己的数据库并维护这些信息，但是 Android 将看不到文件夹层次结构。如何创建此文件夹层次结构并存储此信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T20:34:43.303

> 由于Android书签数据库中没有文件夹列，我无法存储哪些书签属于哪个文件夹的信息。

但是还有。从运行 4.0 的模拟器中取出浏览器的数据库，它有一个文件夹字段

![在此处输入图像描述](../Images/19e0d1ffe57cadc3c1bc04022d8344d9.png) 但是当我签入 2.3 时，它没有这样的字段，我认为您在评论中提到的应用程序（书签排序和备份）仅在 4.0 及更高版本中提供此功能。如果您对将文件夹添加到 db 的部分感到好奇，也可以查看源代码。

```
 values.put(BrowserContract.Bookmarks.PARENT, mCurrentFolder); 
```

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/AddBookmarkPage.java#AddBookmarkPage](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/AddBookmarkPage.java#AddBookmarkPage)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:21:07.100

“但是文件夹层次结构对android不可见”是什么意思？您的层次结构在股票或 chrome 浏览器中不可见？好吧，当然不是。它们根本不支持分层信息，因为它们使用浏览器内容提供程序。

但您的应用可能仍会使用它们。您必须通过添加内容观察器并在您的应用程序重新启动时重新同步（例如，在重新启动后或在它被 Android 销毁以释放资源后），使您的数据库与内容提供者保持同步。

我可以想象这种应用程序是有意义的——尤其是在人们更倾向于冲浪（并因此添加书签）的平板电脑上。尽管 Google 可能会在未来的版本中向浏览器内容提供程序添加层次结构，但请做好准备。我认为他们最终必须这样做。

# c# - 有没有办法检测滚动何时在 TreeView 中开始和结束？

> ID：13029124
> 
> 赞同：0
> 
> 时间：2012-10-23T11:07:50.713
> 
> 标签：c#, winforms, treeview

我正在寻找 ListView 的 LVN_BEGINSCROLL 和 LVN_ENDSCROLL 的等价物，但在 TreeView 中。我目前正在使用 C#/winforms，但对 C++ 或 WPF 解决方案会很满意。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:13:41.137

您可以在以下 MSDN 线程中找到自定义实现：[**Treeview Scrollbar Event (detecting/controlling)**](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/3ea9a4d3-0614-4d4f-a861-3cb30ca1bda0)

# android - 如何在 AsyncTask 填充 SharedPreferences 之前停止应用程序执行

> ID：13029131
> 
> 赞同：2
> 
> 时间：2012-10-23T11:08:01.167
> 
> 标签：android, android-asynctask

我有一个调用 web 服务并检索 contentValue 对象的应用程序。该对象填充了最终作为 SharedPreferences 存储的字符串字符串值。我使用 AsyncTask 进行 web 服务调用，以免阻塞 UI 线程。Web 服务会填充 CV 对象。

问题出在我尝试使用共享首选项中的值时。共享首选项对象为空。应用程序在 AsyncTask 实例化并填充它之前尝试使用此对象。如何让应用程序等到 AsyncTask 完成？

CompID 是作为参数传递给 Web 服务的字符串。如果第一次安装应用程序时此变量为空，我会显示一个对话框，要求用户输入 compID。

```
if(nfcscannerapplication.getCompId() == null || 
                                   nfcscannerapplication.getCompId().trim().equalsIgnoreCase("null")){ 
            Log.e(TAG, "compid null***********");
            showPasswordDialogBox();

        } 
```

ShowPasswordDialogBox（未恰当命名）获取 compID 并将其传递给 asyncCompOpt()。

```
public void asyncCompOpt(){

        String[] paramsCompOpt = new String[]{nfcscannerapplication.getCompId()};
        AsyncGetCompanyOptions agco = new AsyncGetCompanyOptions();
        agco.execute(paramsCompOpt);

    } 
```

asyncCompOpt 调用 AsyncTask。

```
private class AsyncGetCompanyOptions extends AsyncTask<String, Void, ContentValues> {

    ProgressDialog progressDialog;

    @Override
    protected void onPreExecute()
    {
        progressDialog = ProgressDialog.show(EntryActivity.this, 
                "Connecting to Server"," Getting your company's options...", true);

    };      

    @Override
    protected ContentValues doInBackground(String... params) {

        ContentValues cv = null;

        try {
            Log.e(TAG, "inside doInBackground");
            cv = loginWebservice.getCompanyOptionsAndPhonenumbers(nfcscannerapplication.getCompId());

            if(cv == null){
                Log.e(TAG, "cv is null");
            }else{
                Log.e(TAG, "cv is not null");
            }

        } catch (Exception e) {
           e.printStackTrace();
        }
        return cv; 

    }

    @Override
    protected void onPostExecute(ContentValues result)
    {
        super.onPostExecute(result);
        if(progressDialog != null)
        progressDialog.dismiss();

        String tagTouchInterval = (String) result.get("10"); 
        Log.e(TAG, "tagTouchInterval in onpostexecute = " + tagTouchInterval);
        String savePassword = (String) result.get("20");
        String allowChangeUser = (String) result.get("30");
        String displayRotaDetails = (String) result.get("40");
        String displayClientPhoneNumber = (String) result.get("50");
        String displayClientKeysafe = (String) result.get("60");
        String displayDoubleupCarer = (String) result.get("70");
        String displayContacts = (String) result.get("80");
        String autoLogout = (String) result.get("90");
        String displayNotesDisplayNotes = (String) result.get("100");
        String displayMeds = (String) result.get("110");
        String rotaLogout = (String) result.get("120");
        String displayActualTime = (String) result.get("130");
        String qrcodeEnabled = (String) result.get("140");
        String manualInput = (String) result.get("150");
        String rotasOnly = (String) result.get("160");

        appSharedPrefs = PreferenceManager.getDefaultSharedPreferences(EntryActivity.this.getApplicationContext());

            prefsEditor = appSharedPrefs.edit(); 

          prefsEditor.putString("10", tagTouchInterval);
          prefsEditor.putString("20", savePassword);
          prefsEditor.putString("30", allowChangeUser);
          prefsEditor.putString("40", displayRotaDetails);
          prefsEditor.putString("50", displayClientPhoneNumber);
          prefsEditor.putString("60", displayClientKeysafe);
          prefsEditor.putString("70", displayDoubleupCarer);
          prefsEditor.putString("80", displayContacts);
          prefsEditor.putString("90", autoLogout);
          prefsEditor.putString("100", displayNotesDisplayNotes);
          prefsEditor.putString("110", displayMeds);
          prefsEditor.putString("120", rotaLogout);
          prefsEditor.putString("130", displayActualTime);
          prefsEditor.putString("140", qrcodeEnabled);
          prefsEditor.putString("150", manualInput);
          prefsEditor.putString("160", rotasOnly);
          prefsEditor.commit();

    }//end of postExecute 
```

我将发布 oncreate 的一部分，以便您查看事物的流程。该应用程序正在尝试在异步完成之前访问 SharedPreferences。我怎样才能解决这个问题？谢谢。

```
@Override
    protected void onCreate(final Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        nfcscannerapplication = (NfcScannerApplication) getApplication();
        sIs = savedInstanceState;

        if(nfcscannerapplication.getCompId() == null || 
                                   nfcscannerapplication.getCompId().trim().equalsIgnoreCase("null")){ 
            Log.e(TAG, "compid null***********");
            showPasswordDialogBox();

        }

        setContentView(R.layout.entryscreen); 

        //loginWebservice = new LoginWebservice(this);
        loginWebservice = nfcscannerapplication.loginWebservice;
        userName = (EditText)findViewById(R.id.username);
        passwordPin = (EditText)findViewById(R.id.password);

        String isSavePassword = appSharedPrefs.getString("20", null);
        isAllowChangeUser = appSharedPrefs.getString("30", null); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:14:43.547

如果`onPostExecute()`在`onCreate()`. 如果您愿意，请禁用您将更新的控件，或同时显示进度对话框或其他内容。

**更新：**我应该补充一点，我已经看到了具有共同偏好的奇怪东西。我已经看到在提交后直接读取会给出错误的结果。不要使用共享偏好作为在您的活动中进行交流的方式。设置（实例）变量并调用回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:17:24.923

我猜你最后两次调用`getString()`in`onCreate()`正在返回 null 因为你的 AsyncTask 还没有完成。这就是多线程的异步特性，因此您必须考虑到这一点。首先我要搬家：

```
 String isSavePassword = appSharedPrefs.getString("20", null);
 isAllowChangeUser = appSharedPrefs.getString("30", null); 
```

进入`onPostExecute()`你的 AsyncTask。然后，无论在何种情况下使用它们，我都会认为它们为空，显示一个对话框，表明应用程序尚未准备好或在某处停用按钮。

# maven - maven-flyway-plugin 不存在或找不到有效版本。Windows 中的 mvn cmd 行出错，但在 Eclipse 中运行正常

> ID：13029134
> 
> 赞同：1
> 
> 时间：2012-10-23T11:08:27.733
> 
> 标签：maven, flyway

我可以从 Eclipse 内部运行 flyway 迁移，但不能从 Windows 中的 DOS 命令行运行。我正在运行 maven 2.2.1，Eclipse Indigo Service Release 1 Build id：20110916-0149。

同一项目的其他开发人员不会收到此错误。我搜索了 StackOverflow、[http](http://flywaydb.org/) ://flywaydb.org/ 等，但没有看到其他人遇到这个特定问题。

我得到的错误是：- 插件 'org.apache.maven.plugins:maven-flyway-plugin' 不存在或找不到有效版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:34:13.447

通过从 maven 2.2.1 升级到 maven 3.0.4 解决了这个问题。
参考：- [http://www.apache.org/dyn/closer.cgi/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.zip](http://www.apache.org/dyn/closer.cgi/maven/maven-3/3.0.4/binaries/apache-maven-3.0.4-bin.zip)

现在按预期运行。

# html - 包围2个内盒，1个外盒

> ID：13029135
> 
> 赞同：0
> 
> 时间：2012-10-23T11:08:30.603
> 
> 标签：html, css

我正在尝试实现附加的desired.png 上的内容（特别是让另一个盒子围绕着两个内盒）。

![在此处输入图像描述](../Images/54769e5f3403f8b29185a09a28cdfd60.png)

我使用以下代码，但 2 个内盒周围没有外盒。我怎样才能实现图像上的内容？

沙盒

```
 <style type="text/css">
            #wrap {
               //width:600px;
               //margin:0 auto;
               border:1px solid red;
               //height:100px;
            }
            #left_col {
               float:left;
               width:300px;
               border:1px solid black;
            }
            #right_col {
               float:right;
               width:300px;
               border:1px solid orange;
            }
    </style>
</head>

<body>

    <div id="wrap">
        <span id="left_col">
            ...
        </span>
        <span id="right_col">
            ...
        </span>
    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:09:54.503

Css 没有 // 注释格式。您只能使用 /* */。这将是一个错误。您还必须设置包含容器的高度。因为浮动元素不适用于外部容器的高度。并且不要错过内容器的高度。我修改后的 CSS 将是：

```
#wrap {

border:1px solid red;
height: 100px;
width: 600px;
padding: 5px;
}
#left_col {
float:left; 
display: inline-block;
width:295px;
height: 100px;
border:1px solid black;
}
#right_col {
float:right; 
display: inline-block;
width:295px;
height: 100px;
border:1px solid orange;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:11:26.503

最简单的*解决*方法是浮动#wrap。这意味着它将完全包裹其中的浮动元素并扩展以适应它们的高度。

您可能会发现这在您的布局中是不切实际的，在这种情况下，clearfix 方法可以解决问题。正如已经展示的那样，有许多方法可以做到这一点。

就个人而言，如果在语义上适用，我可能会使用带有 clear:both 的 hr 元素通过 css 类应用于它。

```
.clearer {
    clear:both; 
    visibility:hidden;
} 
```

但各有各的。现在使用内容是安全的：之后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:15:09.197

```
<div id="wrap">
    <div id="left_col">
        ...
    </div>
    <div id="right_col">
        ...
    </div>
    <div style="clear:both;"></div>
</div>​ 
```

CSS

```
 #wrap {
           width:610px;

           border:1px solid red;
          padding:5px;
        }
        #left_col {
           float:left;
           width:300px;
           border:1px solid black;
        }
        #right_col {
           float:right;
           width:300px;
           border:1px solid orange;
        }​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T11:27:34.453

这是演示，根据您的规格调整宽度和高度，

[我的演示](http://jsfiddle.net/Sriganesh/uwr6e/1/)

HTML: --------

```
<div id="wrap">
    <div id="left_col">
        ...
    </div>
    <div id="right_col">
        ...
    </div>
    <div style="clear:both;"></div>
</div>​

CSS:
------

#wrap {
    width:420px;
    border:2px solid red;
    padding:5px;
    margin: 10px;
}

#left_col { 
    float:left;
    width:200px;
    border:2px solid #FFA9C5;
    overflow: hidden;
    margin-right: 10px;
}

#right_col {
    float:left;
    width:200px;
    border:2px solid blue;
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T11:27:57.583

添加`overflow:auto`到`#wrap`

```
#wrap {
               //width:600px;
               //margin:0 auto;
               border:1px solid red;
               //height:100px; overflow:auto
            } 
```

**[演示](http://jsfiddle.net/SowmyaShivaram/Fwjd4/22/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T11:16:03.003

浮点数将对象的初始高度包装到它的内容。如果内部 div 中没有内容，则除了边框之外什么都看不到。

我还建议您查看[.clearfix](http://j.mp/bestclearfix)，因为在`#wrap`没有“固定浮动”的情况下浮动内容意味着`#wrap`不会依次升高它们的高度。

* * *

要回答您的问题：

**CSS：**

```
#wrap {
    border:1px solid red;
    width:604px
}
.col {
    float:left;
    width:300px;
    border:1px solid black;
}

/* The Amazing clearfix */
.clearfix:before,
.clearfix:after {
    content: " ";
    display: table;
}
.clearfix:after {
    clear: both;
} 
```

**HTML**

```
<div id="wrap" class="clearfix">
    <span class="col">
        Content!
    </span>
    <span class="col">
        Content!
    </span>
</div> 
```

# java - 带有用户输入时间的闹钟倒数计时器java

> ID：13029139
> 
> 赞同：3
> 
> 时间：2012-10-23T11:08:42.037
> 
> 标签：java, html, function, countdown, alarm

我想使用 html 和 java 创建一个应用程序，但我遇到了一点困难。这个想法是让用户在文本框或日期选择器中输入日期和时间，然后单击一个按钮，然后该按钮将倒计时到该时间并发出警报。我在脚本中有一个倒计时工作时间，但这不是用户定义的。我的主要问题是从日期选择器中获取信息以更改脚本中的日期，以便在用户单击按钮时开始倒计时。

我的技术技能不是很好，但我对基本的 html 和 java 有很好的了解

以下是我的代码

```
 <html>
<head>

<SCRIPT LANGUAGE="JavaScript">
<!--
var eventdate = new Date("("month") 25, 2012 23:59:59");

function toSt(n) {
s=""
if(n<10) s+="0"
return s+n.toString();
}

function countdown() {
cl=document.clock;
d=new Date();
count=Math.floor((eventdate.getTime()-d.getTime())/1000);
if(count<=0)
{cl.days.value ="----";
cl.hours.value="--";
cl.mins.value="--";
cl.secs.value="--";
return;
}
cl.secs.value=toSt(count%60);
count=Math.floor(count/60);
cl.mins.value=toSt(count%60);
count=Math.floor(count/60);
cl.hours.value=toSt(count%24);
count=Math.floor(count/24);
cl.days.value=count; 

setTimeout("countdown()",500);
}

  function date() {

  var monthentered = document.getElementById('month').value;

  var dayentered = document.getElementById('day').value;

  var yearentered = document.getElementById('year').value;

  }

</SCRIPT>

</head>

<body>

<input type="button" name="button" value="press me" onclick="date()"/>

<p> insert month <input type="text" id="month"  size="15"> </p>
<p> insert day <input type="text" id="day" size="15"> </p>
<p> insert year <input type="text" id="year" size"15"> </p>

<input

<FORM name="clock">
<TABLE BORDER=5 CELLSPACING=5 CELLPADDING=0 BGCOLOR="#000000">
<TR>
<TD ALIGN=CENTER WIDTH="31%" BGCOLOR="#000080"><FONT COLOR="#FFFFFF"><B>Days:</B></FONT></TD>
<TD ALIGN=CENTER WIDTH="23%" BGCOLOR="#000080"><FONT COLOR="#FFFFFF"><B>Hours:</B></FONT></TD>
<TD ALIGN=CENTER WIDTH="23%" BGCOLOR="#000080"><FONT COLOR="#FFFFFF"><B>Mins:</B></FONT></TD>
<TD ALIGN=CENTER WIDTH="23%" BGCOLOR="#000080"><FONT COLOR="#FFFFFF"><B>Secs:</B></FONT></TD>
</TR>
<TR>
<TD ALIGN=CENTER><INPUT name="days" size=4></TD>
<TD ALIGN=CENTER><INPUT name="hours" size=2></TD>
<TD ALIGN=CENTER><INPUT name="mins" size=2></TD>
<TD ALIGN=CENTER><INPUT name="secs" size=2></TD>
</TR>
<TR>
<TD COLSPAN="4" BGCOLOR="#000080">
<CENTER><P><FONT FACE="arial,helvetica" SIZE="+2" COLOR="#FFFF00">Until</FONT></CENTER>
</TD>
</TR>
<TR>
<TD COLSPAN="4" BGCOLOR="#000000">
<CENTER><P><FONT COLOR="#00FF00" SIZE=+1>
<SCRIPT LANGUAGE="JavaScript">
<!--
document.write(" " + eventdate.toLocaleString() + " ");
// end hiding script-->
</SCRIPT>
</FONT>
</CENTER>
</TD>
</TR>
</TABLE>
</FORM>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:30:45.690

鉴于您所描述的技能，我建议您使用 javascript（jquery +[倒计时](http://www.keith-wood.name/countdown.html)插件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:11:53.543

如果您使用 javascript 而不是 java，那不是更好吗？

如果需要，您可以使用 document.getElementById('id') 从表单中获取位？

例如：

```
<html>
<head>
<script type="text/javascript">
   function doIT(){
         var picked_date = document.getElementById('date_box').value;
         var picked_time = document.getElementById('time_box').value;
         // now your stuff here

         alert('Date: ' + picked_date + ' Time: ' +picked_time);

   }

</script>
</head>
<body>
<div id="content">
   <!-- this is my form type thang -->
   <label>Date:</label><input type="text" id="date_box" size="8" value=""/>           
   <label>Time:</label><input type="text" id="time_box" size="8" value=""/>
   <input type="button" name="button" value="Press Me" onclick="doIT()"/>
</div>
</body>
</html> 
```

# pdf - PDF、FDF、本地文件和命令行

> ID：13029151
> 
> 赞同：2
> 
> 时间：2012-10-23T11:09:30.450
> 
> 标签：pdf, acrobat, fdf

有谁知道是否可以通过本地 FDF 和 PDF 文件的命令行参数打开 PDF 并输入 FDF 文件。网上有几处参考资料表明这可以通过 http 完成。我需要跨文件系统执行此操作。以下示例不起作用，但可能是因为我的参数不正确：

....\acrobat.exe c:\temp\myPDF.pdf#fdf=c:\temp\myFDF.fdf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T17:55:05.633

大约 15 分钟前，我对这个问题投了赞成票并加了星标，然后 5 分钟后我找到了解决方案。

没有关于如何通过命令行导入 FDF 的信息的原因是没有必要。要了解原因，我们需要查看 FDF 文件本身。

我一直在使用的 FDF 文件包含一行，其中所有字段及其值都为 <>。该行以;

```
/ID[<bit string><another bit string>]/UF(temp.pm.pdf)>>/Type/Catalog>> 
```

**我们感兴趣的 tl:dr 是文件名在 UF 之后的括号中**。这就是 FDF 和 PDF 的关联方式。我已经用特殊字符包裹的标签替换了字段值和文件名值。*当我的主应用程序写出 FDF 文件时，* 它会使用值标签填充应该进入 PDF 中命名字段的数据，**并将文件与 /uf 标签中命名的 PDF 相关联**。我只测试了 Adob​​e Reader XI 和 FoxIt Reader v60，但我可以用任何一个阅读器打开 FDF，它会打开相关的 PDF 并填充它。输入错误的文件名，它会警告我找不到与此 FDF 关联的文件，并询问我是否要查找它。因此，如果您输入错误的文件名，甚至还有一些内置的恢复功能！

仅供参考，位字符串是第一次保存 PDF 时原始内容的表示，第二位字符串包含最近修改的版本。我真的不明白这一点，但它必须在那里。

此外，只要保持正确的语法，字段名和值可以按任何顺序排列。这很方便，因为您的字段不一定按逻辑顺序添加到文档中。

即使在我重新组织我的 FDF 并用我稍后处理的标签替换示例值之后，**/ID[< *><* >]**的东西也需要在那里。不完全是人类可读的，并且似乎并不重要，但是如果没有它，它就会犹豫不决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-15T02:54:59.557

`pdftk Example.pdf form_fill Example.fdf output ExampleFilled.pdf`会做你最初要求的。

# sql - 如何创建 SQL 以基于具有相同标签的项目创建标签层次结构？

> ID：13029153
> 
> 赞同：3
> 
> 时间：2012-10-23T11:09:33.477
> 
> 标签：sql, oracle, tree, tags, hierarchy

在我的系统中，每个项目都有一些标签。现在我想向用户展示带有标签的树。树应具有第一级的所有标签。
在每个一级标签内，应该再次出现在同样属于一级标签的项目中找到的所有标签。
在第三层，应该出现属于第一层和第二层的标签，以此类推。
这个想法是，用户可以根据他的标签过滤项目，并且可以改进在树中输入的过滤，而无需键入标签。

项目最初是作为字符串字段存储在项目表中的，但为了轻松实现此解决方案，我已将它们移动到子表中。

使用这些项目作为输入：

```
|Item       |Tags    |
|-----------|--------|
|Computer   |a,b,c   |
|Mouse      |a,c     |
|Keyboard   |c,d     |
|Monitor    |a,b     | 
```

应该输出这棵树：

```
 Tree             Items that are show when selected

  root             Computer,Mouse,Keyboard,Monitor
    +--a           Computer,Mouse,Monitor
    |  +--b        Computer,Monitor
    |  |  +--c     Computer
    |  +--c        Computer,Mouse
    |     +--b     Computer
    +--b           Computer,Monitor
    |  +--a        Computer,Monitor
    |  |  +--c     Computer
    |  +--c        Computer
    |     +--a     Computer
    +--c           Computer,Mouse,Keyboard
    |  +--a        Computer,Mouse
    |  |  +--b     Computer
    |  +--b        Computer
    |  |  +--a     Computer
    |  +--d        Keyboard
    +--d           Keyboard
       +--c        Keyboard 
```

此 SQL 应仅在 Oracle 数据库中运行，因此可以使用`connect by`运算符。

我从 Delicious 的 Firefox 扩展中选择了这种行为，它以树的形式显示标签，但限制它只有两个级别，我需要它显示尽可能多的级别。

你有什么主意吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:14:35.977

*[请原谅我的 SQL Server 语法......我的 Oracle 技能生疏了，我手头没有服务器]*

在过去的十年中，我曾两次遇到过这个问题！

我的解决方案：

1.  设计具有递归关系的单个表

    ```
    CREATE TABLE dummy(
      id        VARCHAR(128) NOT NULL,
      parent_id VARCHAR(128) NULL,
      --
      CONSTRAINT pk_dummy PRIMARY KEY(id),
      --
      CONSTRAINT fk_dummy_X_dummy
      FOREIGN KEY(id) REFERENCES dummy(id)
    ) 
    ```

2.  为预先计算层次结构设计一个非规范化表：

    ```
    CREATE TABLE dummy_hierarchy(
      id        VARCHAR(128) NOT NULL,
      parent_id VARCHAR(128) NOT NULL,
      depth     INT NOT NULL
    ) 
    ```

    `dummy_hierarchy`具有以下属性：

    *   `id`具有`depth`值为“1”的自我关系
    *   `id`与其父级有关系，`depth`值为“2”
    *   `id`与其祖父母有关系，`depth`值为“3”
    *   等等 ...

    还：

    *   from `id`one 检索所有前辈，包括`id`它自己
    *   from `parent_id`one 检索所有后继者，包括`parent_id`它自己
3.  定义一个`dummy`应保持`dummy_hierarchy`最新的触发器：

    ```
    CREATE TRIGGER tr_dummy_ins_upd_del
    ON dbo.dummy FOR INSERT, UPDATE, DELETE
    AS
    BEGIN
      DELETE dummy
      FROM DELETED
      WHERE dummy.id = DELETED.id

      INSERT INTO dbo.dummy_hierarchy(
        id, parent_id, depth
      )
      SELECT id, id, 1
      FROM INSERTED

      WHILE 1 = 1
      BEGIN
        INSERT INTO dbo.dummy_hierarchy(
          id, parent_id, depth
        )
        SELECT hie.id, par.parent_id, hie.depth + 1
        FROM
          INSERTED ins
            INNER JOIN(
              dbo.dummy_hierarchy hie
                INNER JOIN dummy par
                ON par.id = hie.parent_id
            )
            ON hie.id = ins.id
        WHERE par.parent_id IS NOT NULL
          --
          AND NOT EXISTS(
                SELECT id
                FROM dummy_hierarchy hie_par
                WHERE hie_par.id        = hie.id
                  AND hie_par.parent_id = par.parent_id
              )

        IF @@ROWCOUNT = 0
        BEGIN
          BREAK
        END
      END
    END 
    ```

    作为 POC 数据：

    ```
    INSERT INTO dummy(id, parent_id) VALUES('COMPUTER', NULL)
    INSERT INTO dummy(id, parent_id) VALUES('MONITOR',  'COMPUTER')
    INSERT INTO dummy(id, parent_id) VALUES('MOUSE',    'MONITOR')
    INSERT INTO dummy(id, parent_id) VALUES('KEYBOARD', 'MONITOR') 
    ```

    查询：

    ```
    SELECT *
    FROM dbo.dummy_hierarchy hie
    WHERE parent_id = 'COMPUTER' 
    ```

    产量：

    ```
        id         parent_id 深度
        电脑 电脑 1
        监控电脑 2
        鼠标电脑3
        键盘电脑 3

    ```

    这个：

    ```
    SELECT *
    FROM dbo.dummy_hierarchy hie
    WHERE parent_id = 'MONITOR' 
    ```

    产量：

    ```
        id         parent_id 深度
        监视器监视器 1
        鼠标监视器 2
        键盘显示器 2

    ```

    并且，对于回溯：

    ```
    SELECT *
    FROM dbo.dummy_hierarchy
    WHERE id = 'MOUSE' 
    ```

    有：

    ```
        id         parent_id 深度
        鼠标鼠标 1
        鼠标监视器 2
        鼠标电脑3

    ```

    当然，这并不完全是您所需要的。

    但我希望提供一些有用的线索。

# xcode - ios 模拟器 6.0 显示视图问题

> ID：13029154
> 
> 赞同：0
> 
> 时间：2012-10-23T11:09:37.110
> 
> 标签：xcode, ios6, ios-simulator

第一次尝试为 iOS 6 开发应用程序。我在 iOS 模拟器 6.0 中以 4 英寸显示尺寸显示应用程序时遇到问题，它显示为 3.5 英寸显示屏的应用程序，顶部和底部有黑色区域。我将设置切换为：

*   在 Xcode 中：部署目标 - 6.0
*   方案 - iPhone 6.0 模拟器
*   在模拟器设备是 iPhone 视网膜 4 英寸，版本 6.0
*   在 Interface Builder 中它是一个 4 英寸的视图。

我还尝试清理项目并重置模拟器的设置。那么它是模拟器的错误还是有另一种选择来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:20:46.553

你有 568@2x 的闪屏吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:42:39.043

添加 Defaut-568h@2x.png 将解决此问题。

有时您在开发也支持较低版本的应用程序时也可能遇到同样的问题。

在这种情况下，将您的视图框架设置为 [[UIScreen mainScreen] Bounds] 将解决此问题。

# iphone - 在 Storyboard 中使用 NSNotification

> ID：13029155
> 
> 赞同：0
> 
> 时间：2012-10-23T11:09:43.647
> 
> 标签：iphone, objective-c, ios

我正在尝试在我的`Storyboard`.

当我不使用情节提要时，此代码有效。

这是在 ViewController1 中：

```
- (IBAction) buttonClickedListener2:(id)sender {
    [[NSNotificationCenter defaultCenter]
     postNotificationName:@"TestNotification"
     object:self];
} 
```

这是在 ViewController2 中：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(receiveTestNotification:)
                                                     name:@"TestNotification"
                                                   object:nil];

        NSLog(@"initWithNib");
    }
    return self;
}

- (void) receiveTestNotification:(NSNotification *) notification
{
    // [notification name] should always be @"TestNotification"
    // unless you use this method for observation of other notifications
    // as well.

    if ([[notification name] isEqualToString:@"TestNotification"])
        NSLog (@"Successfully received the test notification!");
} 
```

代码有什么问题吗？正如我所说，我想让它在我的故事板中工作。

如果你能给我一些关于如何在`STORYBOARD`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:43:12.753

你应该添加观察者不是 in`initWithNibName`而是 in `awakeFromNib`。`initWithNibName`不要求故事板。

例如：

```
- (void)awakeFromNib {
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(receiveTestNotification:)
                                                 name:@"TestNotification"
                                               object:nil];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:28:14.667

故事板不使用`initWithNibName`，因此您添加观察者的代码部分不会运行。您应该能够通过设置断点来看到这一点。解决方法是更换

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self){
        //statements
    }
    return self;
} 
```

和

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
    self = [super initWithCoder:aDecoder];
    if (self){
        //statements
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:23:09.287

代码看起来不错。

这里的问题可能是，您`Notification`从发帖`ViewController1`并将其添加`Notification`到`ViewController2`.

发帖前检查是否`Notification`已正确添加，可能是`notification`您尝试发布时未添加`notification`。

另一件事只是正确调试检查是否`initWithNibName`被调用。我认为故事板不使用`initWithNibName`，所以你应该使用`initWithCoder:(NSCoder *)aDecoder`而不是 initWithNibName。

# java - JDBC Java 的问题

> ID：13029161
> 
> 赞同：0
> 
> 时间：2012-10-23T11:09:53.197
> 
> 标签：java, postgresql, jdbc

我在 PostgreSQL 8.4 中有一张表：

```
DROP TABLE filedata_temp;

CREATE TABLE filedata_temp
(
num serial NOT NULL,
id integer,
kadnum character(25),
deleted character(3),
the_geom geometry,
status_id integer,
CONSTRAINT filedata_temp_pkey PRIMARY KEY (num)
)
WITH (
OIDS=FALSE
);
ALTER TABLE filedata_temp OWNER TO postgres; 
```

简单数据：

![在此处输入图像描述](../Images/084078e26efd222c8b33f039bca81816.png)

在java中我做：

```
Class.forName("org.postgresql.Driver");
            Connection ce= null;
          ce = DriverManager.getConnection("jdbc:postgresql://localhost:5432/postgis","postgres","123456");
          Statement se = null;
          se = ce.createStatement();
Integer idn=null;
System.out.println("idnnull= "+idn);
ResultSet id=se.executeQuery("SELECT num FROM filedata_temp ORDER BY num DESC LIMIT 1");
    while(id.next()){
        idn=id.getInt("num");
        System.out.println("query= "+idn);
    }
    if(idn==null){
        idn=1;
    }
ce.close();
se.close();
System.out.println("idn= "+idn); 
```

在控制台中我得到了这个：

```
idnnull= null
idn= 1 
```

所以我没有得到`System.out.println("query= "+idn);`控制台。这意味着 ResultSet 是空的。但是如果我在 PostgreSQL 中进行这个查询，我会得到一个正常的响应。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:25:32.913

结果集文档说，如果新的当前行有效，则 next 方法返回 true，如果没有更多行，则返回 false。

所以查询结果不行。检查您的数据库连接，也许您已连接到具有空表 filedata_temp 或一些相关问题的其他数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:03:02.033

跟着这些步骤：

在上面的程序中，将查询更改为“SELECT * FROM filedata_temp”并将 id.getInt 更改为 id.getObject。看看你是否至少从这个查询中得到了一些东西。如果这提供了表格中的所有列，那么您的连接、数据库、表格一切都很好。

然后接下来将查询更改为“SELECT num FROM filedata_temp”并使用 id.getObject。看看您现在是否能够获得所有行的 num 值。

如果这可行，则添加 order by 子句。当这有效时，然后去限制和其他事情。

# php - Twitter 错误 34：“抱歉，该页面不存在”：twitter.com/statuses/user_timeline/flecpoint.json?count=25

> ID：13029170
> 
> 赞同：1
> 
> 时间：2012-10-23T11:10:18.763
> 
> 标签：php, json, twitter

不久前，我用 PHP 创建了一个简单的 Twitter 状态消息阅读器。它使用位于`https://twitter.com/statuses/user_timeline/flecpoint.json?count=25`. 它读取时间线，将其缓存，然后再次检查是否有新状态。没有什么花哨。

一切正常，直到几周前，我突然遇到了`"Sorry, that page does not exist" (code 34)`错误。

从那时起，有时我们会遇到错误，有时一切正常。（我禁用了缓存以确保 API 确实在工作）一开始我认为这将是 Twitter 方面的一个错误，但问题总是经常出现。

我 100% 确定我的代码没有任何变化。我一直在谷歌搜索，但还没有发现任何对我有用的东西。

为了完整起见，这是我用来读取 json 文件的代码；

```
$apiUrl = 'https://twitter.com/statuses/user_timeline/' . $user . '.json?count=25';
$curl   = curl_init();

curl_setopt($curl, CURLOPT_URL, $apiUrl);
curl_setopt($curl, CURLOPT_POST, false);
curl_setopt($curl, CURLOPT_BINARYTRANSFER, false);
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 10);

// send request
$response = curl_exec($curl); 
```

**有没有人有这个错误的经验？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:18:05.847

显然，您使用的 API 是“非官方的”且不受支持。它甚至不是版本 1 API。

[版本 1](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline) API：

> [http://api.twitter.com/1/statuses/user_timeline.json?screen_name=_mauris](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=_mauris)

[1.1 版](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)需要 OAuth 身份验证。

提醒：阅读文档（：

# java - 如何简化注释

> ID：13029175
> 
> 赞同：2
> 
> 时间：2012-10-23T11:10:38.527
> 
> 标签：java, annotations, hibernate-annotations

我正在使用来自 Hibernate 验证器的 @NotEmpty 注释。但是我需要提供自定义消息。因此，我正在尝试以下操作以消除重复代码

```
@org.hibernate.validator.constraints.NotEmpty
public @interface NotEmpty {
    String message() default "{notempty}";
} 
```

以上是正确的方法吗？我可以知道这个注释覆盖的术语是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:39:16.797

如果您想提供默认消息更改`org.hibernate.validator.constraints.NotEmpty.message`内部键的值，`ValidationMessages.properties`则不需要另一个注释。这也是默认消息，您可以在声明注释时指定消息

您可以阅读更多关于[注释处理的注释](http://docs.oracle.com/javase/tutorial/java/javaOO/annotations.html)

# php - 使用 php 登录 Jasperserver

> ID：13029179
> 
> 赞同：0
> 
> 时间：2012-10-23T11:11:02.960
> 
> 标签：php, soap, jasperserver, vtiger

我有一个开源 CRM 系统 (vTiger) 现在我想添加一个按钮，当我单击该按钮时，它会打开我的 jasperserver url，但已经使用我通过 php 提供的用户名和密码登录...

如何在 jasperserver 中使用 PHP 登录？那可能吗。我看到了很多使用 php 运行报告的示例，但我只想登录..

# postgresql - postgresql 中的存储过程

> ID：13029188
> 
> 赞同：0
> 
> 时间：2012-10-23T11:11:49.197
> 
> 标签：postgresql, plpgsql

我不知道如何在 postgresql 中编写存储过程。我试图写一个，但我得到了错误的输出。

```
create or replace function getUserId() returns setof integer as 
$BODY$
Declare r integer;cnt integer;
BEGIN
for r in select distinct user_id from system_audit
loop
for cnt in select count(*) from system_audit where user_id=r
loop
return next cnt;
end loop;
return next r;
end loop;
return;
end;
$BODY$
language 'plpgsql'; 
```

当我通过键入以下内容检查输出时：-

```
select * from getUserId() 
```

我得到这个作为输出： -

58 173 920 106 76 191 14413 1 2 242 1320 -1 2 249 1167 192 2 233 70 98 229 193 45 237 49 103 49 103 45735 115 115 115 10 2015 10 201 28 167 308 96 1211 110 7 172 7 172 7 172 7 172 7 172 7 1314 22 225 13 235 7 199 14 88 23566 118 359 4 9 231 98 165 174 212 21 149 14 105 77 97 416 180 1345 23 59 152 297 239 37 197 133 144

输出是正确的但问题是这是作为一个单列出现的，其中包含两列的输出 - user_id 和 count。我想将我的输出视为两列，一列用于计数，另一列用于 user_id。请帮我找到解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:33:39.663

您需要声明该函数，就`returns table (...)`好像您想获得一个真实的结果集一样。

您的方法过于复杂，并且对于大型表来说会非常慢。整个结果可以通过一条 SQL 语句获得，不需要使用游标循环：

```
select user_id, count(*)
from system_audit
group by user_id 
```

这可以放入 SQL 函数中（注意：不是 plpgsql）：

```
create or replace function getUserId() 
   returns table (user_id integer, user_count integer)
as   
$BODY$
    select user_id, count(*)
    from system_audit
    group by user_id
$BODY$
language sql; 
```

请注意，不推荐使用带引号的语言名称。您应该使用 eg`plpgsql`代替`'plpgsql'`或`sql`代替`'sql'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:32:55.090

您可能希望使用两个`out`参数声明函数并返回`setof record`，例如（未经测试）：

```
create or replace function getUserId(user_id OUT integer, cnt OUT integer) returns setof record as 
$BODY$
DECLARE
  r integer;
  cnt integer;
BEGIN
  FOR r IN SELECT DISTINCT user_id FROM system_audit
  LOOP
    FOR cnt IN SELECT count(*) FROM system_audit WHERE user_id=r
    LOOP
      RETURN NEXT;
    END LOOP;
  END LOOP;
  RETURN;
END;
$BODY$
language 'plpgsql'; 
```

引用[手册](http://www.postgresql.org/docs/current/static/plpgsql-control-structures.html)：

> 如果你用输出参数声明函数，只写 RETURN NEXT 不带表达式。输出参数变量的当前值将被保存以供最终返回

请注意，您的设计也*非常*低效；这可以通过带有子查询的单个常规 SQL 查询来完成，并且这种形式的运行速度会大大提高。

# ios - 只有一个网络连接的多个视图？

> ID：13029195
> 
> 赞同：0
> 
> 时间：2012-10-23T11:12:12.207
> 
> 标签：ios, nsurlrequest

我有 3 个需要加载网页的视图，我在每个视图中执行以下操作（使用关联的连接和 webview 委托），有没有一种方法可以在不复制每个视图中的代码的情况下创建单个源？我发现的大多数解决方案都使用 asihttp，但我的公司不鼓励使用 3rd 方组件。（我还在学习，所以请善待）

```
- (void)loadPage:(NSString*)urlString
{

  NSURL *url = [NSURL URLWithString:urlString];

  // Put that URL into an NSURLRequest
  NSURLRequest *req = [NSURLRequest requestWithURL:url];
  // NSURLRequest *req = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString     stringWithFormat:urlString]]];

  // Create a connection that will exchange this request for data from the URL
  connection = [[NSURLConnection alloc] initWithRequest:req 
                                             delegate:self 
                                     startImmediately:YES];

  [self.webView loadRequest:req];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:14:14.873

> 有没有一种方法可以创建单个源而不在每个视图中复制代码？

也许创建一个包含您的`loadPage`方法的基类，然后为您需要的每个视图派生 3 个类？

# visual-studio-2010 - 在新文件选项中添加自定义 ascx 模板

> ID：13029198
> 
> 赞同：0
> 
> 时间：2012-10-23T11:12:41.770
> 
> 标签：visual-studio-2010, visual-studio

我已经搜索了这个问题的答案，但我可能没有正确表达它，但是如何在 Visual Studio 的“添加新项目”中添加我自己的 ascx 模板（或任何文件模板）？

我有一组`ascx`文件，它们继承了一个自定义类 - 这一切都很好，但是当我添加一个新的时`ascx`，我必须进入后面的代码并编辑它以获得新的继承以及其他几个标准部分`page_load`. _

有没有一种方法可以添加我自己的`ascx`模板来为我完成所有这些设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:21:07.740

答案可以在[MSDN](http://msdn.microsoft.com/en-us/library/tsyyf0yh.aspx)文档中找到：

将自定义项目项模板添加到“添加新项”对话框

> 1.  在 Visual Studio 中创建或打开项目。
>     
>     
> 2.  将项目添加到项目并根据需要进行修改。
>     
>     
> 3.  修改代码文件以指示应在何处进行参数替换。有关更多信息，请参阅如何：替换模板中的参数。
>     
>     
> 4.  在文件菜单上，单击导出模板。
>     
>     
> 5.  单击项目模板，选择包含该项目的项目，然后单击下一步。
>     
>     
> 6.  选择要为其创建模板的项目，然后单击下一步。
>     
>     
> 7.  选择要包含在模板中的装配参考，然后单击下一步。
>     
>     
> 8.  键入图标文件名、预览图像、模板名称和模板描述，然后单击完成。
>     
>     
>     
>     模板文件被添加到 .zip 文件中并复制到 `..\Users\username\Documents\Visual Studio Version\Templates\ItemTemplates\`文件夹中。

# unix - Unix中实时信号的任何实际用法？

> ID：13029200
> 
> 赞同：0
> 
> 时间：2012-10-23T11:12:49.260
> 
> 标签：unix, signals, real-time

是否有任何情况值得使用实时信号进行进程间通信（或任何其他原因）？对我来说，它们的所有困难似乎使代码过于复杂，难以维护并且可能充满错误。

如果有人能证明我错了，那就太好了。

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T21:56:11.073

[值得注意的是，实时信号在pthreads](http://www.kernel.org/doc/man-pages/online/pages/man7/pthreads.7.html)的 NPTL 实现中内部使用。

与它们的基本对应物不同，实时信号将排队，使它们对[边缘触发的 IO 就绪指示](http://www.kegel.com/c10k.html#nb.sigio)有用。

与它们的基本对应物不同，实时信号还可以携带`int`/pointer 的任意数据。我可以想到好几次我想发送更多数据以及通知。

我不确定您所说的“过于复杂、难以维护并且可能充满错误”是什么意思。

# embedded - 中断的尾链

> ID：13029201
> 
> 赞同：6
> 
> 时间：2012-10-23T11:12:51.443
> 
> 标签：embedded, arm, interrupt

什么是 ARM Cortex M3 中的 NVIC 支持的中断尾链。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T11:16:44.877

> 尾链是对异常的背靠背处理，没有中断之间的状态保存和恢复开销。处理器在退出一个 ISR 并进入另一个 ISR 时跳过 8 个寄存器的弹出和 8 个寄存器的压入，因为这对堆栈内容没有影响。 [Cortex™-M3 技术参考手册](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0337e/Babjagdg.html)

这基本上意味着，在不重复堆叠的情况下处理挂起的中断。

如果您想了解更多详细信息，我推荐这本书：

[ARM Cortex-M3 权威指南](https://rads.stackoverflow.com/amzn/click/com/0750685344)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-08T12:45:25.287

如果一个异常在另一个异常处理程序完成时处于挂起状态，而不是返回到被中断的程序然后再次进入异常序列，将发生尾链场景，处理器不必从其中恢复所有寄存器值堆栈并将它们再次推回堆栈。异常的尾链允许更低的异常处理开销和更好的能源效率。

# python - 覆盖 sphinx/docutils 中的默认字段名称限制

> ID：13029207
> 
> 赞同：11
> 
> 时间：2012-10-23T11:13:24.067
> 
> 标签：python, python-sphinx, restructuredtext, docutils

我正在使用[sphinx](http://sphinx.pocoo.org/)为项目生成 html 文档。我广泛使用[字段列表](http://docutils.sourceforge.net/docs/user/rst/quickref.html#field-lists)。

生成 html 时，如果标签的长度最多为 14 个字符，则每个标签/值对将呈现为包含两个单元格的单个表格行。

如果一对标签的长度超过 14 个字符，则标签/值将呈现为两个表格行。

我想将换行限制增加到更大的值（例如 40）。我发现限制是由`--field-name-limit`docutils 的选项控制的。但是，我找不到如何通过 sphinx 设置这个值。

我`docutils.conf`在文档根目录中创建了一个文件，其中包含以下内容：

```
[general]
dump_settings: 1
dump_internals: 1

[html4css1 writer]
field_name_limit: 40 
```

当我运行 sphinx 时读取该文件。由于该`[general]`部分中的值，打印了设置和内部结构。在打印的值中，`field_name_limit`打印有 value `40`。尽管如此，我描述的包装仍然出现在 html 输出中。

如何设置 的值以`field_name_limit`获得所需的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-26T14:51:52.150

如果没有异议，Sphinx-1.2 将支持 html writer 的 docutils.conf。 [https://bitbucket.org/birkenfeld/sphinx/commits/67682aca](https://bitbucket.org/birkenfeld/sphinx/commits/67682aca)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:39:11.427

我认为您的方法不起作用，因为 sphinx 使用自己的 html 编写器。

但是，如果您将样式调整为`field_name`. 我（曾经）使用了一个自定义的css文件

```
.field-name {
    white-space: nowrap;
} 
```

或将其设置为固定宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-14T18:54:20.167

一种方法是覆盖扩展原始 html 构建器的自定义 sphinx 构建器类中的设置，并`self.settings.field_name_limit = 0`在`prepare_writing(self, docnames)`函数中设置。也就是说，这有点矫枉过正，除非您已经有一个自定义构建器类......

# php - 如果页面为 2+，PHP 基础知识将显示相同的页面

> ID：13029212
> 
> 赞同：2
> 
> 时间：2012-10-23T11:13:47.160
> 
> 标签：php, selector

大家好，我正在使用此脚本进行分页：

```
<?php
if(isset($_GET['page']) && $_GET['page'] != '') {
   $pageno = $_GET['page']; /* Sanitize Here */
} else {
   /* You can redirect user to home page */
}
?>
<?php
if(isset($pageno)) {
  if($pageno == '1') {
     ?>
<div class="container">
  <div class="examples">
    <div class="row">
      <div class="span3">
      <img id="one" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="two" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="three" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="four" src="img/example.png"/>
      </div>
    </div>
    <br />
        <div class="row">
      <div class="span3">
      <img id="one" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="two" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="three" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="four" src="img/example.png"/>
      </div>
    </div>
        <br />
        <div class="row">
      <div class="span3">
      <img id="one" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="two" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="three" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="four" src="img/example.png"/>
      </div>
    </div>
    <br />
    <div class="pages">

       <div class="prev-blocked"></div>
              <a href="portfolio.php?page=2"><div class="next"></div></a>
<br /><br /><br />
    </div>
  </div>
<?php    
  } 
  elseif($pageno == '2') {
 ?>
 <div class="container">
 <br />
 <div class="alert alert-error">
  <b>Opps!</b> We could not find out the page you're requesting. <a href="index.php">Go back</a>
</div>
 </div>
<!--
<div class="container">
  <div class="examples">
    <div class="row">
      <div class="span3">
      <img id="one" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="two" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="three" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="four" src="img/example.png"/>
      </div>
    </div>
    <br />
        <div class="row">
      <div class="span3">
      <img id="one" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="two" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="three" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="four" src="img/example.png"/>
      </div>
    </div>
        <br />
        <div class="row">
      <div class="span3">
      <img id="one" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="two" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="three" src="img/example.png"/>
      </div>
          <div class="span3">
      <img id="four" src="img/example.png"/>
      </div>
    </div>
    <br />
    <div class="pages">

       <a href="portfolio.php?page=1"><div class="prev"></div></a>
              <div class="next-blocked"></div>
<br /><br /><br />
    </div>
  </div>
  -->
    <?php
  }
}
?> 
```

你能看到线吗

```
elseif($pageno == '2') { 
```

表示页面 .php?page=2 会显示下面的内容

我想让它使高于数字 2 的每个页面都显示相同的页面。

我试过这些选项：

```
elseif($pageno == '>=2') {

elseif($pageno == '>2') { 
```

它们都不起作用，甚至没有错误。我怀疑您可以使用该脚本以这种方式执行某些操作，但是，还有其他方法可以做到吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T11:14:55.793

```
if ((int)$pageno >= 2) 
```

...应该做的伎俩。

它实际上可以在不强制转换为整数（或使用[**intval**](http://php.net/manual/en/function.intval.php)函数）的情况下编写，因为 PHP 是弱类型语言。但我更喜欢这种形式来更清楚地在代码中显示我的意图。事实上，我会改变这条线......

```
$pageno = $_GET['page']; 
```

...对此：

```
$pageno = (int)$_GET['page']; 
```

...并继续进行直接数字比较（如`$pageno === 1`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:15:36.593

elseif($pageno >= 2)

;)

很简单，也许您可​​以在 php.net 上查看有关 if 的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:15:44.423

尝试 -

```
elseif(intval($pageno, 10) >== 2) 
```

你没有得到错误的原因是它`$pageno`是一个字符串，所以`'2'`. 因此，当您尝试使用等号运算符比较它们时，它是有效的 PHP。因此，`'2'`正在与`'>2'`或 `'>=2' 进行比较，两者都是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T11:15:59.497

也许

```
elseif(intval($pageno) >= 2) { 
```

将工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T11:17:58.190

使用该`intval()`函数进行`$_GET['page']`如下转换：

```
$pageno = intval($_GET['page']); 
```

然后你可以比较`$pageno`为一个整数。

```
if($pageno >= 2 )
{

...

} 
```

# nsattributedstring - NSAttributedString 默认颜色/字体等

> ID：13029222
> 
> 赞同：5
> 
> 时间：2012-10-23T11:14:17.893
> 
> 标签：nsattributedstring

我`drawGlyphsForGlyphRange`用来渲染`NSAttributedString`(in `NSView` `drawRect`)

有没有办法默认的颜色/字体等`NSAttributedString`？显然，我可以专门为给定范围设置这些值 - 但这将覆盖字符串中的任何特定设置。感觉我对应该如何使用有一个根本的误解`NSAttributedStrings`！

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T11:11:10.047

NSAttributedString 对象的默认字体在 iOS 上是 Helvetica 12 磅，在 OS X 上是 Lucida Grande（或任何默认系统字体设置）。`initWithString:attributes:`用于创建具有一些预设属性的 NSAttributedString，这些属性最初将应用于整个字符串. 之后您将设置为不同范围的字符串的任何属性都将补充/替换您在创建 NSAttributedString 实例时定义的属性。

# ruby-on-rails - 通过关联在 ruby on rails 中检索数据

> ID：13029225
> 
> 赞同：0
> 
> 时间：2012-10-23T11:14:25.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, view, model-associations

我有三个表 Users（包含用户详细信息） users_shifts（包含用户移位映射）和 shift（它的 id 在 users_shift 表中）。我正在做的是为用户分配多个班次，我想从用户、users_shift 和班次表中检索所有数据。我做了以下事情：

在用户模型中：

```
has_many :users_shifts, :dependent => :destroy 
```

在 users_shift 模型中：

```
has_one :shift
belongs_to :user 
```

在班次模型中

```
belongs_to :users_shift 
```

在控制器中我有：

```
User.all 
```

现在我想在视图中获取表中的所有数据。我必须显示用户和他的转变。用户详细信息将来自用户表，班次详细信息将来自班次表。users_shift 用于用户班次映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:22:03.503

首先在您的控制台中尝试

```
@user_shifts = @user.users_shifts # by using this you get all users_shifts details for that particular user.
@shift = @user_shift.shift # by using this you will get shift for that paricular user_shift 
```

同样的方式你也可以

```
@shift.user_shift # for getting details for users_shifts
@user_shifts.user # for getting details about user 
```

# css - 绝对定位框中元素的默认渲染？

> ID：13029230
> 
> 赞同：0
> 
> 时间：2012-10-23T11:14:35.223
> 
> 标签：css

我已经设置`<body>`为绝对定位，以便它占据整个视口而无需指定高度：

```
body {
    width: 100%;

    margin: 0;
    padding: 0;

    position: absolute;
    top:0; right:0; bottom:0; left:0;

    min-height: 500px;
} 
```

我想知道我在正文中布局的元素是否会附加任何“布局”（IE 说），或者它们是否会正常流动，就好像身体没有绝对定位一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:18:27.280

身体的位置不会改变任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:18:13.680

一个元素的样式不会影响其他元素的样式。IE 内部`hasLayout`属性仅针对`block`- 和 -`inline-block`元素设置。如果您将您的样式`body`设置为绝对定位，则子元素仍将具有其默认样式。

# android - 在 Android 中实现“教练标记”的最佳方法是什么？

> ID：13029234
> 
> 赞同：31
> 
> 时间：2012-10-23T11:14:53.007
> 
> 标签：android, user-interface

在 Android 中实现“教练标记”的最佳方法是什么？

有一个很好的例子：

![有很好的例子](../Images/4be3cac8b0c038278b81d7dc6c314d4b.png)

# scala - 在启动时使用 index.html 以外的页面提升简单的 SiteMap

> ID：13029241
> 
> 赞同：1
> 
> 时间：2012-10-23T11:15:24.173
> 
> 标签：scala, lift

这是我目前遇到的另一个与 Scala/Lift 相关的问题。

我在[http://simply.liftweb.net/index-Chapter-2.html#toc-Chapter-2](http://simply.liftweb.net/index-Chapter-2.html#toc-Chapter-2)上关注了无处不在的聊天应用程序示例，一切都已启动并运行。现在，我只想嵌入另一个 HTML 页面而不是`index.html`, in `Boot.scala` `SiteMap`，我看到的只是以下消息：

> 在此服务器上找不到请求的 URL /

因此，为了向您展示我的努力，我将向您展示以下`SiteMap`定义`Boot.scala`：

```
// Build SiteMap
def sitemap() = SiteMap(
  Menu("Home") / "index" :: // Simple menu form
  // Menu with special Link
  Menu(Loc("Static", Link(List("static"), true, "/static/index"), 
       "Static Content")) ::
  // Menu entries for the User management stuff
  User.sitemap :_*)

LiftRules.setSiteMapFunc(sitemap) 
```

位于文件夹`index.html`下`webapp`，因此其路径看起来像`webapp/index.html`. 以下是 的内容`index.html`：

```
<div id="main" class="lift:surround?with=default;at=content">
<!-- the behavior of the div -->
<div class="lift:comet?type=Chat">
    Some chat messages
    <ul>
        <li>A message</li>
        <li class="clearable">Another message</li>
        <li class="clearable">A third message</li>
    </ul>
</div>

<div>
    <form class="lift:form.ajax">
        <input class="lift:ChatIn" id="chat_in"/>
        <input type="submit" value="Say Something"/>
    </form>
</div> 
```

所有这些都是在聊天应用程序示例中完成的。现在我只想显示一个简单的`login.html`文件而不是`index.html`，所以我把它放在`webapp/login.html`. 这个文件的内容在这里：

```
<div id="loginContainer" class="lift:surround?with=default;at=content">
<!-- the behavior of the div -->
<div>
    <form class="lift:form.ajax">
        <div class="loginInputWrapper">
            <input type="text" class="txtLogin lift:LogIn" id="loginName"/>
        </div>
        <div class="loginInputWrapper">
            <input type="password" class="pwLogin lift:LogIn" />
        </div>
        <div class="buttonWrapper loginButtonWrapper">
            <button id="loginButton" class="hiddenButton qsbfont" type="submit">Login</button>
        </div>
    </form>
</div> 
```

我修改了`SiteMap`这样的定义：

```
Menu("Home") / "login" :: // Simple menu form 
```

在我看来，这一切似乎应该像`index.html`在启动时一样顺利运行，但是如果我想访问该站点，我会一遍又一遍地看到提到的消息。**有没有人知道这里发生了什么并且可以给我一个提示/解决方案？**

如果感兴趣：我在 Intellij IDEA Enterprise 中在 Tomcat 7 上运行 Scala WAR（试用许可证）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:27:07.880

`index.html``/`是请求时显示的默认页面。你为什么要改变它？重命名`login.html`为`index.html`或使用 URL 重写。但是，最后一个选项只会使任何将阅读您的源代码的人感到困惑。

错误消息的原因是您请求`/`并且（我假设）您的 中没有“索引”条目`SiteMap`，因此它不知道如何处理请求。它无法知道您想`login.html`成为默认页面。

# javascript - 小图像滑块脚本咳出未键入的异常错误

> ID：13029251
> 
> 赞同：3
> 
> 时间：2012-10-23T11:16:04.047
> 
> 标签：javascript, html

我真的是 javascript 的初学者，想创建一个小的图像滑块。我使用 setInterval 来延迟加载，以便创建滑块效果。但不知何故，图像没有滑动，我有一点暗示问题出在循环中。我已经查看了一些选项，并作为最后一个选项在这里询问。提前致谢。

```
<!Doctype html>
  <meta charset="UTF-8">
    <head>

<title>Simple Image Slider</title>
    <script type="text/javascript">
   var counter=0;
    var images=new Array['download.jpg','images (1).jpg','images.jpg'];

       function start(){

    setInterval("slide()",2000);
      }

    function slide(){
    for(counter=0;counter<images.length;counter++)
document.getElementById('mageslide').src=images[counter];
   }
 </script>
<link rel="stylesheet" type="text/css" href="style.css">
     </head>
     <body>
<div id="wrapper">
      <div class="slider" onload="start()">
          <img src="images.jpg" id="mageslide"></img>
       </div>
      **strong text** </div>
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:23:04.533

你不能只改变值，而不是这个，尝试改变innerhtml，动态插入一个img src

`document.getElementById('mageslide').innerHTML='<img src="'+images[counter]+'">'`像这样的东西

编辑：假设 mageslide 是一个 div 什么的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:26:33.060

```
<!Doctype html>
  <meta charset="UTF-8">
    <head>

<title>Simple Image Slider</title>
    <script type="text/javascript">

   var images=new Array['download.jpg','images (1).jpg','images.jpg'];
   var counter;

       function start(){
           for(counter=0;counter<images.length;counter++) {
               setInterval("slide()",2000);
           }
       }

    function slide(){
       images[counter].onload = function() {
       document.getElementById('mageslide').src=images[counter];
       }
    }
 </script>
<link rel="stylesheet" type="text/css" href="style.css">
     </head>
     <body>
<div id="wrapper">
      <div class="slider" onload="start()">
          <img src="images.jpg" id="mageslide"></img>
       </div>
      **strong text** </div>
      </body>
    </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:31:12.380

你的`slide()`函数是错误的，你应该每个间隔迭代一个图像，而不是一个间隔迭代中的所有图像，试试这个固定版本：

```
function slide(){
   window.counter++;
   if (window.counter >= window.images.length) {
      window.counter = 0;
   }
   document.getElementById('mageslide').src=window.images[window.counter];
} 
```

# python - Python 属性可调用

> ID：13029254
> 
> 赞同：9
> 
> 时间：2012-10-23T11:16:17.593
> 
> 标签：python, properties, callable

有没有办法拥有同名的属性和方法？我的意思是一个可以按通常方式使用**并且**可以同时调用的属性？像这样：

```
>>> b = Book()
>>> b.pages
123
>>> b.pages()
123
>>> b.pages(including_toc=False)
123
>>> b.pages(including_toc=True)
127 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T11:27:09.477

不，你不能。

`()`总是从其左侧的表达式中调用一个*对象。*

这意味着，`b.pages()`可以如下解读：

```
_tmp = b.pages
_tmp() 
```

如您所见，方法*是*属性。

您*可以*（但不应该）做的是将整数包装在一些自定义类中并提供一种`__call__`方法……但我建议不要使用这种黑魔法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T11:51:45.130

您的类的实例`Book`只能有一个名为 的属性`pages`。该属性可以是任何东西（整数、可调用函数、任何东西），但它只能是*一*件事。

另一种查看事物的方式是在字节码级别 - 给定两行代码：

```
>>> def a():
...     book.pages
...     book.pages()
... 
```

这是什么[`disassembles`](http://docs.python.org/library/dis.html)：

```
>>> dis.dis(a)
  2           0 LOAD_GLOBAL              0 (book)
              3 LOAD_ATTR                1 (pages)
              6 POP_TOP

  3           7 LOAD_GLOBAL              2 (book)
             10 LOAD_ATTR                1 (pages)
             13 CALL_FUNCTION            0
  [...a few more irrelevant lines...] 
```

第一行 ( `book.pages`) 加载`book`对象，并从中加载`pages`属性 ( `LOAD_ATTR`)

第二行 ( `book.pages()`) 执行完全相同的操作，加载`book`对象，加载`pages`属性，*然后*调用`CALL_FUNCTION`属性。

没有理智的方法可以`LOAD_ATTR`根据最终的使用方式使退货有所不同。你能得到的最接近的是返回一个奇怪的对象，它的行为就像

```
>>> class WeirdInteger(int):
...   def __call__(self, including_toc):
...     print "WeirdInteger(%s) called" % (self)
...
>>> a = WeirdInteger(10)
>>> a
10
>>> a*2
20
>>> a()
WeirdInteger(10) called 
```

..但是，不要那样做。使用您的代码的人不会期望该`pages`属性像这样工作，并且`pages`将传递给的代码位可能需要一个实际的整数。

而是`Books`以不同的方式设计您的类（也许制作`pages`一个常规函数，或者为`pages_without_toc`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T11:28:35.720

> **简短回答**：不，因为属性和方法是类的属性，并且属于同一个命名空间。因此，稍后声明的会覆盖前一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T12:45:41.823

我假设您的主要目标是在`pages`设置特定标志时返回不同的值。根据您的目标，一种可能有效的方法是创建`pages`一个属性（在精确的 Python 意义上）而不是一个属性。然后让它返回一个有`toc`或没有的值，具体取决于是否设置了标志。例如：

```
class Book(object):
    def __init__(self, toc, pages):
        self._toc = toc
        self._pages = pages
        self.include_toc = False

    @property
    def pages(self):
        if self.include_toc:
            return self._pages + self._toc
        else:
            return self._pages 
```

以下是它的工作原理：

```
>>> b = Book(5, 55)
>>> b.pages
55
>>> b.include_toc = True
>>> b.pages
60 
```

这并不*完全*符合您的要求，但对于某些用例子集（即您将`pages`使用标志集进行多次调用，只是偶尔更改标志的那些用例），它同样好或更好 - - 例如何时`include_toc`由最终用户设置，或者何时特定书籍应该几乎总是或几乎从不将其包含`_toc`在其页数中。）

但是，正如 phant0m 指出的那样，该标志是持久的，因此在某些情况下，如果您设置它然后在完成后未能重置它，这可能会产生意想不到的结果。正如 eryksun 所指出的，上下文管理器是该问题的经典解决方案。

虽然这可能确实是过度设计，但它是如此简单，我仍然会演示它。只需将其添加到 的定义中`Book`：

```
 @contextlib.contextmanager
    def set_toc_reset(self, state):
        try:
            old_flag = self.include_toc
            self.include_toc = state
            yield self
        finally:
            self.include_toc = old_flag 
```

这会为您重置标志：

```
>>> from foo import Book
>>> b = Book(5, 55)
>>> with b.set_toc_reset(True):
...     print b.pages
... 
60
>>> b.include_toc
False 
```

# java - 使用 Gson 解析 AWS Json

> ID：13029255
> 
> 赞同：0
> 
> 时间：2012-10-23T11:16:19.117
> 
> 标签：java, json

我正在阅读来自[http://aws.amazon.com/ec2/pricing/pricing-ebs-optimized-instances.json](http://aws.amazon.com/ec2/pricing/pricing-ebs-optimized-instances.json)的价格信息，下面是获取它的代码示例

```
public class SampleJson
{

@SuppressWarnings("unchecked")
public static void main(String[] args) throws Exception
{

    String json = readUrl("http://aws.amazon.com/ec2/pricing/pricing-ebs-optimized-instances.json");

    Type collectionType = new TypeToken<EBS>()
    {
    }.getType();

    EBS ebs = (EBS) new Gson().fromJson(json, collectionType);

    Config config = ebs.getConfig();

    ArrayList<StringMap<Regions>> region = (ArrayList<StringMap<Regions>>) config.getRegions();
    for (StringMap<Regions> regObj : region)
    {
        Set<Entry<String, Regions>> reg = regObj.entrySet();

        for (Map.Entry<String, Regions> data : reg)
        {
            Object key = data.getKey();
            Object value = data.getValue();

            System.out.print(key + ": ");
            System.out.println(value);

        }

    }

}

private static String readUrl(String urlString) throws Exception
{
    BufferedReader reader = null;
    try
    {
        URL url = new URL(urlString);
        reader = new BufferedReader(new InputStreamReader(url.openStream()));
        StringBuffer buffer = new StringBuffer();
        int read;
        char[] chars = new char[1024];
        while ((read = reader.read(chars)) != -1)
            buffer.append(chars, 0, read);

        return buffer.toString();
    } finally
    {
        if (reader != null)
            reader.close();
    }

} 
```

我得到以下输出

```
region: us-east

instanceTypes: [{type=std, sizes=[{size=lg, valueColumns=[{name=ebsOptimized, prices= {USD=0.025}}]}, {size=xl, valueColumns=[{name=ebsOptimized, prices={USD=0.05}}]}]}, {type=hiMem, sizes=[{size=xxxxl, valueColumns=[{name=ebsOptimized, prices={USD=0.05}}]}]}] 
```

想从 instanceTypes 字符串中读取名称、价格和大小。

注意：我使用[http://jsongen.byingtondesign.com/](http://jsongen.byingtondesign.com/)来生成 java 对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:21:02.583

您可以选择使用 GSON 将这些映射到 Java 域对象中。

这是我过去制作的教程，您可能会发现它很有用：

[http://java.sg/parsing-a-json-string-into-an-object-with-gson-easily/](http://java.sg/parsing-a-json-string-into-an-object-with-gson-easily/)

# php - 如何知道在 PHP 中加载脚本的页面的 URL？

> ID：13029257
> 
> 赞同：2
> 
> 时间：2012-10-23T11:16:27.607
> 
> 标签：php, javascript, html, http, referrer

有一个来自不同域的网页，其中包含在我的服务器中托管和生成的脚本。假设该页面在`http://www.theirdomain.com/site`其中，其标记如下：

```
<html>
    <head>
        <script src="http://www.mydomain.com/script.php"></script>
    </head>
    <body>
        ...
    </body>
</html> 
```

该`script.php`页面确实创建了 JavaScript 内容，但我想知道哪个是调用的 URL `script.php`（即`http://www.theirdomain.com/site`）。

如何在 PHP 中获取该信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T11:20:37.937

[$_SERVER['HTTP_REFERER']](http://php.net/manual/en/reserved.variables.server.php)不是 100% 可靠的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T11:21:12.740

在您的 script.php 中记录引荐来源网址以查看它的来源。像：

```
if(!empty($_SERVER['HTTP_REFERER'])) {
    $log = fopen('script_access.log', 'a');
    fwrite($log, 'The script has been accessed from ' . $_SERVER['HTTP_REFERER'] . PHP_EOL);
    fclose($log);
}

// Rest of your script here. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T11:21:59.723

当您想知道调用您的文件“script.php”的页面的 url 时，您应该查看 $_SERVER 变量。

在该变量中，您将找到一些有用的脚本调用标头，例如尝试测试从 $_SERVER['REQUEST_URL'] 和 $_SERVER['HTTP_REFERER'] 获得的值。更多选项可以在这里找到：http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

例如，您可以将来自这些变量的数据与时间一起存储到数据库中，以便以后能够输出使用统计信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T11:41:05.700

您可以通过 $_SERVER 获取所有这些信息，$_SERVER 是一个包含标题、路径和脚本位置等信息的数组。欲了解更多信息，请阅读。[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

```
<?php
function get_path_info()
{
    if( ! array_key_exists('PATH_INFO', $_SERVER) )
    {
        $pos = strpos($_SERVER['REQUEST_URI'], $_SERVER['QUERY_STRING']);

        $asd = substr($_SERVER['REQUEST_URI'], 0, $pos - 2);
        $asd = substr($asd, strlen($_SERVER['SCRIPT_NAME']) + 1);

        return $asd;    
    }
    else
    {
        return trim($_SERVER['PATH_INFO'], '/');
    }
} 
```

# iphone - 如果用户最初选择不接收推送通知，是否可以在 iOS 应用上激活推送通知？

> ID：13029259
> 
> 赞同：1
> 
> 时间：2012-10-23T11:16:32.583
> 
> 标签：iphone, objective-c, ios, push-notification, apple-push-notifications

当用户第一次使用推送通知启动 iOS 应用程序时，他们会看到一个警报视图，询问他们是否想要接收它们。

如果用户选择否，应用程序不会显示在系统设置菜单的通知中心下方，因此他们无法在此处更改决定。如果他们在显示警报视图时选择是，则应用程序在设置中可见，他们可以随意打开和关闭通知。

如果用户选择否，有什么方法可以让他们选择从应用程序本身打开推送通知？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:19:26.527

从应用程序内部`its not possible`。`Settings`用户只需要从

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T11:21:13.437

不，这是不可能的，你必须去设置。

在 ios 5.0 以下的版本中，可以通过您的应用程序打开设置页面

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=yourpage"]]; 
```

但在较新的版本中，这是不可能的。

# mediawiki - 按钮发布和取消在 Mediawiki 的 WikiEditor 扩展中不起作用

> ID：13029260
> 
> 赞同：3
> 
> 时间：2012-10-23T11:16:34.717
> 
> 标签：mediawiki

这是一个关于 Mediawiki 的[WikiEditor](http://www.mediawiki.org/wiki/Extension%3aWikiEditor)扩展的问题。
我激活了发布模块以在右上角显示按钮 Publish 和 Cancel ：

```
$wgDefaultUserOptions['wikieditor-publish'] = 1;
```

不幸的是，它没有按预期工作：发布按钮不执行任何操作，而取消按钮执行发布。
我查看了 jquery.wikiEditor.publish.js 文件，但我并不真正了解发布模块代码源：

```
context.fn.addButton({
    'captionMsg': 'wikieditor-publish-button-publish',
    '动作'：函数（）{
        $( '#' + dialogID ).dialog( 'open' );
        返回假；
    }
});

context.fn.addButton({
    'captionMsg': 'wikieditor-publish-button-cancel',
    '动作'：函数（）{}
});

```

有谁知道它是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T14:15:04.793

此错误已添加到 bugzilla：[https](https://bugzilla.wikimedia.org/show_bug.cgi?id=42198)
://bugzilla.wikimedia.org/show_bug.cgi?id= 42198 并已提交修复：[https ://gerrit.wikimedia.org/r/#/c/44989](https://gerrit.wikimedia.org/r/#/c/44989)

所以问题解决了:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T08:33:24.673

我通过快速破解在 MediaWiki 1.20.0 中修复了这个问题，将代码更改为：

```
context.fn.addButton( {
  'captionMsg': 'wikieditor-publish-button-publish',
  'action': function () {
    $( '#' + dialogID ).dialog( 'open' );
  }
} );

context.fn.addButton( {
  'captionMsg': 'wikieditor-publish-button-cancel',
  'action': function () {
    window.location = $("*").find("a[id='mw-editform-cancel']").first().attr("href");
    return false;
  }
} ); 
```

这使得两个按钮都能按我的预期工作，并且应该在 1.19 中也能工作。真正了解 jQuery 的人可能会做得更好。

仅作记录，在您的 Mediawiki 发行版中以下文件的末尾可以找到要更改的代码：

```
extensions/WikiEditor/modules/jquery.wikiEditor.publish.js 
```

# java - 设计模式：工厂 vs 工厂方法 vs 抽象工厂

> ID：13029261
> 
> 赞同：221
> 
> 时间：2012-10-23T11:16:36.437
> 
> 标签：java, design-patterns, language-agnostic, factory, factory-method

我正在从网站上阅读设计模式

在那里我读到了工厂、工厂方法和抽象工厂，但它们太混乱了，定义不清楚。根据定义

> 工厂 - 创建对象而不向客户端公开实例化逻辑，并通过通用接口引用新创建的对象。*是工厂方法的简化版*
> 
> 工厂方法 - 定义创建对象的接口，但让子类决定实例化哪个类，并通过通用接口引用新创建的对象。
> 
> 抽象工厂 - 提供用于创建一系列相关对象的接口，而无需明确指定它们的类。

我还查看了有关抽象工厂与工厂方法的其他 stackoverflow 线程，但那里绘制的 UML 图使我的理解更加糟糕。

谁能告诉我

1.  这三种模式有何不同？
2.  什么时候用哪个？
3.  如果可能的话，还有与这些模式相关的任何 java 示例吗？

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2012-10-23T12:12:15.073

所有三种工厂类型都做同样的事情：它们是“智能构造函数”。

假设您希望能够创建两种水果：Apple 和 Orange。

### 工厂

工厂是“固定的”，因为您只有一个没有子类化的实现。在这种情况下，您将有一个这样的类：

```
class FruitFactory {

  public Apple makeApple() {
    // Code for creating an Apple here.
  }

  public Orange makeOrange() {
    // Code for creating an orange here.
  }

} 
```

用例：构造 Apple 或 Orange 有点太复杂，无法在构造函数中处理。

### 工厂方法

当你在一个类中有一些泛型处理，但想要改变你实际使用哪种水果时，通常会使用工厂方法。所以：

```
abstract class FruitPicker {

  protected abstract Fruit makeFruit();

  public void pickFruit() {
    private final Fruit f = makeFruit(); // The fruit we will work on..
    <bla bla bla>
  }
} 
```

`FruitPicker.pickFruit()`...然后您可以通过在子类中实现工厂方法来重用通用功能：

```
class OrangePicker extends FruitPicker {

  @Override
  protected Fruit makeFruit() {
    return new Orange();
  }
} 
```

### 抽象工厂

抽象工厂通常用于依赖注入/策略之类的事情，当您希望能够创建需要“同类”并具有一些公共基类的整个对象系列时。这是一个与水果相关的模糊示例。这里的用例是我们要确保我们不会在 Apple 上意外使用 OrangePicker。只要我们从同一家工厂获得我们的水果和采摘机，它们就会匹配。

```
interface PlantFactory {

  Plant makePlant();

  Picker makePicker(); 

}

public class AppleFactory implements PlantFactory {
  Plant makePlant() {
    return new Apple();
  }

  Picker makePicker() {
    return new ApplePicker();
  }
}

public class OrangeFactory implements PlantFactory {
  Plant makePlant() {
    return new Orange();
  }

  Picker makePicker() {
    return new OrangePicker();
  }
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-03-07T18:41:09.290

> 1.  这三种模式有何不同？

**工厂：**创建对象而不向客户端公开实例化逻辑。

**工厂方法：**定义一个用于创建对象的接口，但让子类决定实例化哪个类。Factory 方法允许类将实例化推迟到子类

**抽象工厂：**提供用于创建相关或依赖对象系列的接口，而无需指定它们的具体类。

*抽象*工厂模式使用组合将创建对象的责任委托给另一个类，而*工厂方法*设计模式使用继承并依赖派生类或子类来创建对象

> 2.  什么时候用哪个？

**工厂：**客户只需要一个类，并不关心它得到了哪个具体的实现。

**工厂方法：**客户端不知道在运行时需要创建哪些具体类，但只想获得一个可以完成这项工作的类。

**AbstactFactory：** 当您的系统必须创建多个产品系列或您想要提供产品库而不暴露实现细节时。

抽象工厂类通常使用工厂方法实现。工厂方法通常在模板方法中调用。

> 3.  如果可能的话，还有与这些模式相关的任何 java 示例吗？

**工厂和工厂方法**

***意图：***

定义一个用于创建对象的接口，但让子类决定实例化哪个类。工厂方法允许类将实例化推迟到子类。

[UML图](http://www.dofactory.com/net/factory-method-design-pattern)：

[![在此处输入图像描述](../Images/9682d0ce3a09e8ec93239bc097216bbe.png)](https://i.stack.imgur.com/HF19B.gif)

*产品：*它定义了工厂方法创建的对象的接口。

*ConcreteProduct：*实现产品接口

*创建者：*声明工厂方法

*ConcreateCreator：* 实现 Factory 方法以返回 ConcreteProduct 的实例

问题陈述：使用定义游戏界面的工厂方法创建游戏工厂。

代码片段：

[工厂模式。什么时候使用工厂方法？](https://stackoverflow.com/questions/69849/factory-pattern-when-to-use-factory-methods/35857241#35857241)

与其他创作模式的比较：

1.  设计开始使用**工厂方法**（不太复杂，更可定制，子类激增），随着设计人员发现需要更大灵活性的地方， 向**抽象工厂、原型或构建器（更灵活、更复杂）发展**

2.  **抽象工厂**类通常使用**工厂方法**实现，但也可以使用**原型实现**

进一步阅读的参考资料：[Sourcemaking 设计模式](https://sourcemaking.com/design_patterns)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-10-23T11:47:05.110

**Factory** - 单独的 Factory 类以创建复杂的对象。

例如：FruitFactory 类创建 Fruit 对象

```
class FruitFactory{

public static Fruit getFruit(){...}

} 
```

**工厂方法**- 而不是工厂的整个单独类，只需在该类本身中添加一个方法作为工厂。

前任：

```
Calendar.getInstance() (Java's Calendar) 
```

**抽象工厂方法**——工厂的工厂

例如：假设我们要建立计算机零件工厂。所以有几种类型的计算机，如笔记本电脑、台式机、服务器。

因此，对于每种计算机类型，我们都需要工厂。所以我们创建了一个像下面这样的高级工厂

```
ComputerTypeAbstractFactory.getComputerPartFactory(String computerType) ---> This will return PartFactory which can be one of these ServerPartFactory, LaptopPartFactory, DesktopPartFactory. 
```

现在这三个本身又是工厂。（您将处理 PartFactory 本身，但在后台，将根据您在抽象工厂中提供的内容进行单独的实现）

```
 Interface-> PartFactory. getComputerPart(String s), 
Implementations -> ServerPartFactory, LaptopPartFactory, DesktopPartFactory.

Usage:
new ComputerTypeAbstractFactory().getFactory(“Laptop”).getComputerPart(“RAM”) 
```

编辑：根据评论中的反对意见进行编辑，为抽象工厂提供准确的接口。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-10-23T12:05:05.780

每个设计模式都努力帮助确保不触及书面的、工作的代码。我们都知道，一旦我们接触到工作代码，现有的工作流程就会出现缺陷，需要做更多的测试来确保我们没有破坏任何东西。

工厂模式根据输入标准创建对象，从而确保您不需要编写如下代码：

```
 if (this) {
     create this kind of object 
 } else { 
     that kind of object 
 } 
```

一个很好的例子是旅游网站。旅游网站只能提供旅游（飞机、火车、巴士）或/和提供酒店或/和提供旅游景点套餐。现在，当用户选择下一步时，网站需要决定它需要创建哪些对象。它是否也应该只创建旅行或酒店对象。

现在，如果您设想将另一个网站添加到您的投资组合中，并且您认为使用相同的核心，例如，现在搜索出租车并在线支付的拼车网站，您可以在您的核心中使用抽象工厂。这样，您就可以再购买一个出租车和拼车工厂。

两个工厂之间没有任何关系，所以将它们放在不同的工厂是一个很好的设计。

希望这现在很清楚。再次研究该网站，记住这个例子，希望它会有所帮助。我真的希望我正确地表示了模式:)。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-08-01T10:14:14.870

对于这个答案，我参考了《四人帮》这本书。

书中**没有**“工厂”、“简单工厂”或“虚拟工厂”的定义。**通常**，当人们谈论“工厂”模式时，他们可能会谈论**创建类的特定对象的东西**（但不是“建造者”模式）；它们**可能会或可能不会**引用“工厂方法”或“抽象工厂”模式。任何人都可以实现“工厂”，因为它不是一个正式的术语（请记住，有些人\公司\社区可以有自己的词汇表）。

本书**仅**包含“抽象工厂”和“工厂方法”的定义。

以下是书中的定义，以及为什么两者都如此令人困惑的简短解释。我省略了代码示例，因为您可以在其他答案中找到它们：

**工厂方法（GOF）**：定义用于创建对象的接口，但让子类决定要实例化哪个类。工厂方法允许类将实例化推迟到子类。

**抽象工厂（GOF）**：提供一个接口来创建相关或依赖对象的族，而无需指定它们的具体类。

**困惑之源**：通常，可以将“工厂方法”模式中使用的类称为“工厂”。这个类根据定义是抽象的。这就是为什么很容易将这个类称为“抽象工厂”的原因。但这只是类的名称；您不应将其与“抽象工厂”模式（类名！= 模式名）混淆。“抽象工厂”模式不同——它不**使用**抽象类；它定义了一个接口（不一定是编程语言接口），用于创建一个或多个相互关联或必须以特定方式创建的更大对象的部分。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2020-12-16T22:14:27.937

基于来自[Vaskaran Sarcar 的 C# 中的设计模式，第 2 版](https://www.apress.com/gp/book/9781484236406)书中的这些图像：

> **1\. 简单工厂模式**

创建对象而不向客户端公开实例化逻辑。

```
SimpleFactory simpleFactory = new SimpleFactory();
IAnimal dog = simpleFactory.CreateDog(); // Create dog
IAnimal tiger = simpleFactory.CreateTiger(); // Create tiger 
```

[![在此处输入图像描述](../Images/1e0d6b66efc512e8423cc0068fd27798.png)](https://i.stack.imgur.com/wtWBJ.png)

> **2.工厂方法模式**

定义一个用于创建对象的接口，但让子类决定实例化哪个类。

```
AnimalFactory dogFactory = new DogFactory(); 
IAnimal dog = dogFactory.CreateAnimal(); // Create dog

AnimalFactory tigerFactory = new TigerFactory();
IAnimal tiger = tigerFactory.CreateAnimal(); // Create tiger 
```

[![在此处输入图像描述](../Images/2a0a9dcdcbad288851a1f7074fd32544.png)](https://i.stack.imgur.com/DC3aW.png)

> **3.抽象工厂模式**（factory of factory）

抽象工厂提供了用于创建一系列相关对象的接口，而无需明确指定它们的类

```
IAnimalFactory petAnimalFactory = FactoryProvider.GetAnimalFactory("pet");
IDog dog = petAnimalFactory.GetDog(); // Create pet dog
ITiger tiger = petAnimalFactory.GetTiger();  // Create pet tiger

IAnimalFactory wildAnimalFactory = FactoryProvider.GetAnimalFactory("wild");
IDog dog = wildAnimalFactory .GetDog(); // Create wild dog
ITiger tiger = wildAnimalFactory .GetTiger();  // Create wild tiger 
```

[![在此处输入图像描述](../Images/bf07f55d30d966fc13cdd001ca343b5b.png)](https://i.stack.imgur.com/yY7wB.png)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-07-24T06:26:20.167

```
AbstractProductA, A1 and A2 both implementing the AbstractProductA
AbstractProductB, B1 and B2 both implementing the AbstractProductB

interface Factory {
    AbstractProductA getProductA(); //Factory Method - generate A1/A2
} 
```

使用工厂方法，用户可以创建 AbstractProductA 的 A1 或 A2。

```
interface AbstractFactory {
    AbstractProductA getProductA(); //Factory Method
    AbstractProductB getProductB(); //Factory Method
} 
```

但是具有超过 1 个工厂方法（例如：2 个工厂方法）的抽象工厂，使用这些工厂方法将创建一组对象/相关对象。使用抽象工厂，用户可以创建 AbstractProductA、AbstractProductB 的 A1、B1 对象

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-11-14T10:21:41.493

没有人引用原著《[*设计模式：可重用面向对象软件的元素》*](https://rads.stackoverflow.com/amzn/click/com/B000SEIBB8)，它在“创建模式的讨论”（强调我的）部分的前两段中给出了答案：

> 有两种常用方法可以通过系统创建的对象类来参数化系统。一种方法是对创建对象的类进行**子类化；**这对应于使用工厂方法 (107) 模式。这种方法的主要缺点是它可能需要一个新的子类来改变产品的类。这种变化可以级联。例如，当产品创建者本身由工厂方法创建时，您也必须覆盖其创建者。
> 
> 另一种参数化系统的方法更多地依赖于对象**组合**：定义一个负责了解产品对象类的对象，并将其作为系统的参数。这是抽象工厂 (87)、构建器 (97) 和原型 (117) 模式的关键方面。这三个都涉及创建一个新的“工厂对象”，其职责是创建产品对象。抽象工厂具有生产多个类对象的工厂对象。Builder 让工厂对象使用相应复杂的协议逐步构建复杂的产品。原型具有通过复制原型对象来构建产品的工厂对象。在这种情况下，工厂对象和原型是同一个对象，因为原型负责返回产品。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-01-26T15:16:47.797

**工厂**：或简单工厂，旨在产生一种对象的类。调用者将调用它来获取特定类型的项目。例如 SimplePizzaFactory 将通过 SimplePizzaFactory.getPizza() 生产一个简单的披萨

**工厂方法**工厂方法是一个简单的静态方法，它会给它所要求的对象，该工厂方法通常让调用者可以选择他想要的类型。例如 PizzaFactory.getPizza(String type)，该类型可能是“经典”、“农舍”、“玛格丽塔”或“乡村特色”。

**抽象工厂**这只是一个工厂的工厂，所以如果你调用一个抽象工厂，它会给你一个工厂的对象。例如， AbstractPizzaFactory 会给你 VegPizzaFactory 或 NonVegPizzaFactory 然后使用 VegPizzaFactory 你可能会得到“农家”披萨。

参考文章[https://www.binpress.com/factory-design-pattern/](https://www.binpress.com/factory-design-pattern/)

# testing - 在测试之前和之后做一些事情

> ID：13029262
> 
> 赞同：1
> 
> 时间：2012-10-23T11:16:42.423
> 
> 标签：testing, selenium, junit, selenium-webdriver

我有几个 Junit/Selenium WebDriver 测试，每个测试都在单独的类中。我仍然无法实现应该在所有测试运行之前和之后运行的方法。不是在课前或课后，因为那样他们每次考试前后都会跑。

我必须实现某种测试套件，但是如何做到这一点，例如，无需手动将所有类添加到套件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:55:45.247

看看[这个 QA](https://stackoverflow.com/questions/1921515/junit-4-beforeclass-afterclass-when-using-suites)。它是关于在测试套件运行之前执行的方法。

您需要`BeforeClass`在您的测试套件中有一个带有注释的静态方法。您的测试套件引用了所有测试类，但看看 QA 中的示例，您会发现当您使用`Suite`带有`@SuiteClasses`注释的运行器时，它并没有那么乏味。

除了手动之外，我不知道您可以使用任何内置方法将测试用例添加到套件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:29:49.057

我不知道 JUnit 是否能够做你想做的事情。你可能想试试 TestNG。您不需要更改您的测试，但您可以执行 @BeforeSuite 之类的操作，以便在您进入该套件的每个测试之前运行一个方法。[点击这里](http://testng.org/doc/index.html)

# mysql - SQL从指定类别及其子类别中选择所有产品

> ID：13029265
> 
> 赞同：1
> 
> 时间：2012-10-23T11:16:58.170
> 
> 标签：mysql, sql, parent-child

我有这样的数据库：

```
categories(id, parent_id)
items(id, category_id) 
```

并有这些条目：

分类：

```
Paintings(id=1, parent_id=NULL), 
Landscape(id=2, parent_id=1) 
```

项目：

```
Painting1(id=1, category_id=2) 
```

我正在尝试从指定类别中获取所有项目。

例如：来自 Paintings 的所有项目将是来自 的项目`Paintings`，`Landscape`以及具有作为父级的任何类别的项目`Paintings`。

我正在尝试执行此操作：

```
SELECT * FROM items p
JOIN categories cp ON p.category_id = cp.id
JOIN categories cc ON cc.parent_id = cp.id AND p.category_id = cc.id
WHERE cp.id = "1" 
```

但它没有按我的预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:22:13.577

```
SELECT * FROM items p
JOIN categories cp ON p.category_id = cp.id
JOIN categories cc ON cp.parent_id = cc.id
WHERE cc.id = "1" 
```

# stata - 如何根据Stata中的某个变量拆分样本？

> ID：13029266
> 
> 赞同：4
> 
> 时间：2012-09-25T16:20:44.880
> 
> 标签：stata, sample

我想根据特定变量拆分样本，创建 4 个子样本，每个子样本与变量分布的四分位数相关。目的是证明该变量的不同水平的存在会影响回归的结果，使其显着或不显着。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T17:11:47.113

最简单的方法是使用`egen`命令将变量切割成四个等间距的间隔。

例子：

```
. sysuse auto, clear
(1978 Automobile Data)

. sum price, detail

                            Price
-------------------------------------------------------------
      Percentiles      Smallest
 1%         3291           3291
 5%         3748           3299
10%         3895           3667       Obs                  74
25%         4195           3748       Sum of Wgt.          74

50%       5006.5                      Mean           6165.257
                        Largest       Std. Dev.      2949.496
75%         6342          13466
90%        11385          13594       Variance        8699526
95%        13466          14500       Skewness       1.653434
99%        15906          15906       Kurtosis       4.819188

. egen price_cut = cut(price), group(4)

. table price_cut, contents(n price min price max price)

----------------------------------------------
price_cut |   N(price)  min(price)  max(price)
----------+-----------------------------------
        0 |         18       3,291       4,187
        1 |         19       4,195       4,934
        2 |         18       5,079       6,303
        3 |         19       6,342      15,906
---------------------------------------------- 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T22:16:03.733

这是您可以解决的最简单的方法：

```
xtile xx=yourvariable, nq(4) 
```

我希望这有帮助。

# c# - 受保护的只读字段与受保护的属性

> ID：13029269
> 
> 赞同：18
> 
> 时间：2012-10-23T11:17:35.907
> 
> 标签：c#, oop

我有一个抽象类，我想在其受保护的构造函数中初始化一个只读字段。我希望这个只读字段在派生类中可用。

按照我将所有字段设为私有并公开属性的习惯，我按如下方式实现：

```
abstract class Foo
{
    private readonly int _field;

    protected Foo(int field)
    {
        _field = field;
    }

    protected int Field
    {
        get { return _field; }
    }
} 
```

但后来我想知道在这里保持字段私有是否真的有很多好处。我知道属性的优点，一般来说，关于这个问题有几个 SO 问题，但它们侧重于公共领域，而不是受保护的领域。

***那么我应该切换到下面的实现吗？***在这两种情况下需要注意哪些注意事项和优点/缺点？

```
abstract class Foo
{
    protected readonly int _field;

    protected Foo(int field)
    {
        _field = field;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T11:21:56.327

派生类仍然是原始代码的“用户”；字段也应该从它们中封装。

您应该将基类视为安全且可扩展的 API，而不仅仅是暴露其内部的类。保持字段私有——除此之外，它允许基类更改该属性值的生成方式:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T11:46:35.730

我会离开实施或继续：

```
protected Field {get; private set;} 
```

（不完全一样 Field is not readonly 对于父类）

属性相对于字段的优势在于它们更具未来性。您可以在不影响子类的情况下更改父类的实现。如果没有该属性，您承诺的字段始终是只读的。由于另一个原因，不赞成使用字段，它们会损害不透明度：该类描述了字段的确切实现。

所以是的，离开封装。

我会考虑直接使用字段来提高可读性的唯一地方是高度耦合的类，例如状态模式中的状态，但在这种情况下，类本身将是私有的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-17T15:28:29.420

只读属性在 C# 6.0 中实现。这很简单：

```
protected Foo(int field)
{
    Field = field;
}

protected int Field { get; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-17T15:31:11.143

我可以想到两个原因来选择受保护的属性而不是受保护的字段。首先，考虑这个例子：

```
public class BaseClass 
{
    protected readonly List<string> _someValues;
}

public class InheritedClass : BaseClass
{
    public void NeedsThoseValues()
    {
         DoSomethingWith(_someValues);
    }
} 
```

现在您决定更改基类以使用延迟实例化：

```
public class BaseClass 
{
    protected readonly Lazy<List<string>> _someValues;
} 
```

现在继承的类必须更改为 call `_someValues.Value`。那些继承的类真的需要改变吗？如果字段是私有的并且作为属性暴露给继承的类，则更改基类不会破坏继承的类：

```
public class BaseClass 
{
    private readonly Lazy<List<string>> _someValues;

    protected List<string> SomeValues => _someValues.Value;
} 
```

这需要我们改变我们在脑海中描绘继承类的方式。我们可能会开始将其可视化，就像在小房子周围建造大房子一样。小房子里的所有东西都在大房子里，所以实际上都是一所大房子。没有理由将内屋隐藏在外屋之外。

实际上，它不是那样的。基类是它自己独特的实体，存在于更大的房子中。为了在多个房屋（多个继承的类）中重用它，我们需要封装它，以便继承的类不需要知道更多关于它的信息，就像它们依赖的任何其他类一样。

这有时会产生一种奇怪的关系。我们试图防止继承类和基类的实现细节之间过度耦合，但它们是耦合的，因为没有基类就不能存在继承类。这就提出了一个问题——为什么继承的类应该与基类有这种关系？为什么不将基类的功能分离到它自己的类中，用抽象（如接口）表示它，然后在需要的地方注入呢？

这就是优先组合而不是继承背后的想法。很多很多时候，继承用于在类（基类和子类）之间共享功能，而这不是它的用途。如果我们有两个不同的功能领域，我们应该用两个不同的类来完成，一个可以依赖另一个。如果我们通过继承来实现这一点，当我们的类需要依赖另一个类时，我们就会遇到障碍。我们不能再给它另一个基类。除非我们组合不同的类一起工作，否则我们可能会开始做一些非常邪恶的事情，比如在现有的基类中添加更多功能或创建更多级别的继承。它变得难以理解，最终将我们逼入绝境。

另一个原因是，当有人看到`_someValues`基类中的引用时，他们会假设它是在使用它的类中声明的字段，因为这是更常见的约定。这不会造成任何巨大的混乱，但他们需要更长的时间才能弄清楚。

在许多特定情况下，首选受保护的只读属性而不是受保护的只读字段的这些原因可能不是问题。但是很难预先知道这一点，所以最好选择首选的做法，并在理解你为什么这样做的同时养成习惯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T11:22:01.080

```
abstract class Foo
{
    protected readonly int _field;

    protected Foo(int field)
    {
        _field = field;
    }
} 
```

将是合适的，因为您希望派生类知道它。非类型的类`Foo`将无权访问`_field`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T11:22:53.133

使用反射，您可以轻松覆盖只读字段。使用属性会变得更难，因为该字段是隐藏的（您仍然可以这样做）。所以我更喜欢一个更清洁的属性，因为你可以毫无问题地更改吸气剂。

如果您正在考虑性能：属性在大多数情况下都是内联的。

### 覆盖只读的

```
class Program
{
    static void Main(string[] args)
    {
        Test t = new Test();
        t.OverrideReadonly("TestField", 5);
        t.OverrideReadonly("TestField2", 6);
        t.OverrideReadonly("TestField3", new Test());
    }
}

class Test
{
    protected readonly Int32 TestField = 1;
    protected readonly Int32 TestField2 = 2;
    protected readonly Test TestField3 = null;

    public void OverrideReadonly(String fieldName, Object value)
    {
        FieldInfo field = typeof(Test).GetField(fieldName, System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
        field.SetValue(this, value);
    }
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-10-23T11:22:14.237

使用私有字段和受保护的 getter 有一点优势：您不会导致额外的间接级别。

不要忘记声明属性的 c# 简写方式：

```
protected int Field { protected get; private set; } 
```

# asp.net - 使用 ASP.NET Web 服务进行授权

> ID：13029279
> 
> 赞同：0
> 
> 时间：2012-10-23T11:18:23.003
> 
> 标签：asp.net, service, web

我想构建将成为网站客户端的移动应用程序。要从该站点获取信息，我需要授权。是否有可能使 Web 服务成为这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:38:26.143

我不确定我是否理解所有内容，因为您的问题可以提供更多细节。

但是，是的，您可以构建一个 Web 服务，以使用 .NET 中的 Web 服务为您想要使用的任何语言的移动应用程序提供身份验证和授权。

但是，在为应用程序的后续调用设计策略时，您必须小心您将授权每个方法调用的方式。您可以使用不是最好的 IMO 的 WS* 身份验证方法，也可以使用更多 REST Web 服务样式的基于令牌的身份验证。

# eclipse - F5 刷新并不总是可用/在 Eclipse 中工作

> ID：13029286
> 
> 赞同：16
> 
> 时间：2012-10-23T11:19:04.190
> 
> 标签：eclipse

通常，如果我想在 Eclipse 中刷新项目（或文件夹、工作集...），我只需选择项目并点击`F5`. 然而，有时击球后什么也没有发生`F5`。然后，当我右键单击项目时，我在上下文菜单中看到选项`Refresh`而不是`Refresh... (F5)`.

因此，由于某种原因，项目的当前状态等不允许`F5`刷新。我现在在 Indigo 中遇到了这个问题，但至少在 2 个以前的 eclipse 版本中已经存在这个问题。

这是一个错误还是有（有效的）原因为什么`F5`有时不可用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-13T18:12:37.060

> 因此，由于某种原因，项目的当前状态等不允许`F5`刷新。

如果您**正在进行调试会话**（即使它在后台并且您处于不同的视角），`F5`则刷新禁用并映射到“Step-Into”。

停止调试会话将重新启用`F5`刷新。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-23T12:20:12.120

我的猜测是 F5 键映射到多个操作，其中“刷新”的优先级最低。您可以在 Preferences > General > Keys 下看到映射

默认情况下，F5 在调试时映射到“刷新”和“步入”，根据您使用的插件，可以有更多映射。

但在另一个说明中：

即使上下文菜单将 F5 列为快捷方式，刷新通常对我不起作用（尤其是当我从 CVS 收到“不同步”错误时）。我习惯于右键单击刷新我的项目，因为它总是有效的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-23T13:58:46.157

我将把它留在这里，以防它影响到任何人。

如果您要添加一个文件/文件夹，但它在 Package Explorer > Filters 中被过滤掉，刷新将起作用，但显然不会显示添加的资源

这可能看起来像一个无声的失败（它不是；它正在做你所要求的，如果只是在某些情况下默认）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-25T10:30:33.247

检查 GeForce Experience 快捷方式，禁用 Alt + F5。

# php - Javascript 和 PHP 的类似函数给出了不同的输出

> ID：13029288
> 
> 赞同：0
> 
> 时间：2012-10-23T11:19:09.757
> 
> 标签：php, javascript

```
<?
    class int64{
        var $h;
        var $l;
        function int64($h, $l)
        {
            $this->h = $h;
            $this->l = $l;
        }
    }
    function int64rrot(int64 $dst, int64 $x, $shift)
    {
        $dst->l = ($x->l >> $shift) | ($x->h << (32-$shift));
        $dst->h = ($x->h >> $shift) | ($x->l << (32-$shift));
        print_r($dst);
    }
    $a =  new int64(1779033703,-205731576);
    $b =  new int64(1779033701,-205731572);
    int64rrot($a,$b,19);
?>
<script type="text/javascript">
    function int64rrot(dst, x, shift)
    {
        dst.l = (x.l >>> shift) | (x.h << (32-shift));
        dst.h = (x.h >>> shift) | (x.l << (32-shift));
        console.log(dst);
    }
    function int64(h, l)
    {
      this.h = h;
      this.l = l;
    }
    a =  new int64(1779033703,-205731576);
    b =  new int64(1779033701,-205731572);
    int64rrot(a,b,19);
</script> 
```

**屏幕输出（通过 PHP :)**

```
int64 Object ( [h] => -1725854399 [l] => -393 ) 
```

**控制台中的输出（通过 Javascript）**（正确的一个）：

```
int64 { h=-1725854399, l=1020051063} 
```

我一整天都在努力纠正。但不能。我需要在 PHP 代码中进行哪些修改才能获得 javascript 的答案？

> **我想使用 php 获取 javascript 输出**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:46:28.063

您`>>>` `logical rightshift`在 JavaScript 中使用了 php 中不可用的运算符。这就是它导致错误的原因。

你这样做：

```
function zeroRs($a,$n){
    if($n<=0) return $a;
    $b= 0x80000000;
    return ($a >> $n) & ~($b >> ($n-1));
} 
```

现在代替`$x->l >> $shift`do `zeroRs($x->l, $shift)`。这应该工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:23:58.073

您在 JavaScript 中使用了 >>> 运算符。这意味着逻辑右移。PHP没有这个，这是错误。

要获得相同的输出：

将 JavaScript 中的运算符从 '>>>' 更改为 '>>'*或*

在 PHP 中实现逻辑右移函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:21:39.707

~~我从未见过像`>>>`JavaScript 那样的运算符。也许这就是错误。~~

运营商的使用方式有所不同。

[`>>>`有关vs的详细信息，请参阅 MDN 文档`>>`。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)

代替：

```
x.l >>> shift 
```

尝试：

```
x.l >> shift 
```

# java - getter 和 setter 是否应该同步？

> ID：13029294
> 
> 赞同：2
> 
> 时间：2012-10-23T11:19:22.317
> 
> 标签：java, spring, concurrency

我有 2 种带有 spring @Transactional 注释的方法。

```
@Transactional(readOnly = true) 
public ConfigParameter getConfigParameter(String key) { 

@Transactional(readOnly = false) 
public void setConfigParameter(ConfigParameter param) { 
```

readOnly = false 表示该方法将被同步。当在 setter 上设置**readyOnly = false**时，意味着对 setter 的访问是同步的。

您是否同意在这种情况下，getter 也应该将 readOnly 设置为 true（同步）。因为否则我们将面临返回对象状态不一致的风险。

当我用 FindBugs 检查这个类并收到警告时，我遇到了这个问题：

> **不同步的 get 方法，同步的 set 方法** 此类包含名称相似的 get 和 set 方法，其中 set 方法是同步的，而 get 方法不是。这可能会导致运行时的错误行为，因为 get 方法的调用者不一定会看到对象的一致状态。get 方法应该是同步的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:28:49.993

Spring`@Transactional`语义和同步完全是两个不同的东西——用注解 setter`@Transactional(readOnly = false)`不会使方法同步，就好像你会这样声明它：

`public synchronized void setConfigParameter(ConfigParameter param)`

该`read-only`标志只是对底层持久性引擎的一个打击——该提示可能被事务管理器解释为意味着当前事务是只读的——因此与线程如何执行该方法无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:28:24.610

我认为你没有正确考虑这个问题。事务注释不属于这些方法。

# java - 获得权限被拒绝：打开流时连接

> ID：13029295
> 
> 赞同：2
> 
> 时间：2012-10-23T11:19:23.247
> 
> 标签：java, stream, wsdl, jax-ws

我对使用 wsimport 生成的 web 服务存根的 java 客户端有一个奇怪的行为。

客户说

```
Got Permission denied: connect while opening stream from http://dev:8080/LicenseServer/services/ServerImpl?wsdl 
```

但是我可以在我的网络浏览器中打开 URL，并且 wsdl 会正确显示。我也可以从我的浏览器控制 Soap11Binding/HttpSoap11Endpoint。

提示可能是主机名“dev”由 C:\Windows\System32\driver\etc\hosts 解析。

从与服务器相同的网络中运行 java-client 不会有任何问题。

也许存根的初始化过程依赖于主机名的“真实”DNS解析？

# c# - 设置每页的固定行数，使用 itextsharp 生成 PDF

> ID：13029298
> 
> 赞同：0
> 
> 时间：2012-10-23T11:19:33.923
> 
> 标签：c#, .net, c#-4.0, pdf-generation, itextsharp

我有一个`List<object>`，这个列表包含数千条记录。我想使用 itextsharp 生成 pdf。并`Pdfptable`生成 pdf 它工作正常，但我希望 pdf 中每页只有 10 条记录。
我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:06:17.573

另一种设置每页行数的方法：

```
using System.Diagnostics;
using System.IO;
using iTextSharp.text;
using iTextSharp.text.pdf;

namespace RowsCountSample
{
    class Program
    {
        static void Main(string[] args)
        {
            using (var pdfDoc = new Document(PageSize.A4))
            {
                var pdfWriter = PdfWriter.GetInstance(pdfDoc, new FileStream("Test.pdf", FileMode.Create));
                pdfDoc.Open();

                var table1 = new PdfPTable(3);
                table1.HeaderRows = 2;
                table1.FooterRows = 1;

                //header row 
                var headerCell = new PdfPCell(new Phrase("header"));
                headerCell.Colspan = 3;
                headerCell.HorizontalAlignment = Element.ALIGN_CENTER;
                table1.AddCell(headerCell);

                //footer row 
                var footerCell = new PdfPCell(new Phrase("footer"));
                footerCell.Colspan = 3;
                footerCell.HorizontalAlignment = Element.ALIGN_CENTER;
                table1.AddCell(footerCell);

                //adding some rows 
                for (int i = 0; i < 70; i++)
                {
                    //adds a new row
                    table1.AddCell(new Phrase("Cell[0], Row[" + i + "]"));
                    table1.AddCell(new Phrase("Cell[1], Row[" + i + "]"));
                    table1.AddCell(new Phrase("Cell[2], Row[" + i + "]"));

                    //sets the number of rows per page
                    if (i > 0 && table1.Rows.Count % 7 == 0)
                    {
                        pdfDoc.Add(table1);
                        table1.DeleteBodyRows();
                        pdfDoc.NewPage();
                    }
                }

                pdfDoc.Add(table1);
            }

            //open the final file with adobe reader for instance. 
            Process.Start("Test.pdf");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:32:17.960

在最新版本的 iTextSharp (5.3.3) 中，添加了允许您定义断点的新功能：`SetBreakPoints(int[] breakPoints)` 如果您定义一个 10 的倍数的数组，您可以使用它来获得所需的效果。

如果您有旧版本，您应该遍历列表并为每 10 个对象创建一个新的 PdfPTable。请注意，如果您想保持应用程序的内存使用率较低，这是更好的解决方案。

# c++ - std::vector::resize() 与 std::vector::reserve()

> ID：13029299
> 
> 赞同：89
> 
> 时间：2012-10-23T11:19:35.043
> 
> 标签：c++, stl, vector

在[这篇文章](https://stackoverflow.com/a/13017983/1629821)的评论部分有一个关于使用`std::vector::reserve()`vs.的线程`std::vector::resize()`。

这是原始代码：

```
void MyClass::my_method()
{
    my_member.reserve(n_dim);
    for(int k = 0 ; k < n_dim ; k++ )
         my_member[k] = k ;
} 
```

我相信在写元素的`vector`时候，正确的做法是调用**`std::vector::resize()`**，而不是`std::vector::reserve()`。

事实上，以下测试代码在 VS2010 SP1 的调试版本中“崩溃”：

```
#include <vector>

using namespace std;

int main()
{
    vector<int> v;
    v.reserve(10);
    v[5] = 2;

    return 0;
} 
```

我是对的，还是我错了？VS2010 SP1 是对的，还是错的？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-10-23T11:24:03.213

有两种不同的方法是有原因的：

`std::vector::reserve`将分配内存但不会调整向量的大小，它的逻辑大小与以前相同。

`std::vector::resize`实际上会修改向量的大小，并用默认状态的对象填充任何空间。如果它们是整数，它们都将为零。

保留后，在您的情况下，您将需要大量 push_backs 来写入元素 5。如果您不想这样做，那么在您的情况下，您应该使用调整大小。

关于保留的一件事：如果您随后使用 push_back 添加元素，直到达到您保留的容量，任何现有的引用、迭代器或指向向量中数据的指针都将保持有效。因此，如果我保留 1000 并且我的大小为 5，`&vec[4]`则将保持不变，直到向量具有 1000 个元素。之后，我可以调用`push_back()`它，它会工作，但`&vec[4]`之前存储的指针可能不再有效。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-23T11:28:55.990

这取决于你想做什么。 `reserve`不向;添加*任何*元素 `vector`它只会更改`capacity()`，这保证*添加*元素不会重新分配（例如使迭代器无效）。 `resize`立即添加元素。如果您想稍后添加元素 ( `insert()`, `push_back()`)，请使用`reserve`. 如果您想稍后访问元素（使用`[]`或`at()`），请使用`resize`. 所以你`MyClass::my_method`可以是：

```
void MyClass::my_method()
{
    my_member.clear();
    my_member.reserve( n_dim );
    for ( int k = 0; k < n_dim; ++ k ) {
        my_member.push_back( k );
    }
} 
```

或者

```
void MyClass::my_method()
{
    my_member.resize( n_dim );
    for ( int k = 0; k < n_dim; ++ k ) {
        my_member[k] = k;
    }
} 
```

您选择哪一个是品味问题，但您引用的代码显然不正确。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-07T21:32:37.820

可能应该讨论一下何时使用小于当前向量大小的数字调用这两种方法。

`reserve()`使用小于容量的数字调用不会影响大小或容量。

`resize()`使用小于当前大小的数字调用容器将减小到该大小，从而有效地破坏多余的元素。

总而言之，`resize()`将释放内存，而`reserve()`不会。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T11:22:35.760

是的，你是对的，Luchian 只是打错了字，可能是因为喝咖啡太少而没有意识到自己的错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T11:33:51.163

调整大小实际上改变了向量中元素的数量，如果调整大小导致向量增长，则默认构造新项目。

```
vector<int> v;
v.resize(10);
auto size = v.size(); 
```

在这种情况下，大小为 10。

另一方面，reserve 仅请求将内部缓冲区增长到指定大小，但不更改数组的“大小”，仅更改其缓冲区大小。

```
vector<int> v;
v.reserve(10);
auto size = v.size(); 
```

在这种情况下，大小仍然为 0。

因此，要回答您的问题，是的，您是对的，即使您保留了足够的空间，您仍在使用索引运算符访问未初始化的内存。使用 int 并不是那么糟糕，但在类向量的情况下，您将访问尚未构造的对象。

设置为调试模式的编译器的边界检查显然会被这种行为混淆，这可能是您遇到崩溃的原因。

# php - 致命错误：在非对象（P4A、MySQL）上调用成员函数 getPk()

> ID：13029307
> 
> 赞同：1
> 
> 时间：2012-10-23T11:19:58.750
> 
> 标签：php, mysql

我不太确定这个错误是什么，环顾四周，它一定与数据库声明有关。我试图在我的小部件上制作一个下拉框，通过选择数据库的不同字段，将选择不同的掩码，并允许在以后的页面上制作不同的小部件。

我认为错误所在的代码部分是：

```
$this->build("p4a_db_source", "login")
        ->setTable("meetingrooms")
        ->addJoin("login.meetingrooms",
                  "login.meetingrooms.MeetingRoom = login.meetingrooms.MeetingRoom",
                  array('position'=>'Ident'))
        ->addOrder("position")
        ->load();

    $this->setSource($this->login);
    $this->firstRow();
    $this->build('p4a_field','location')
    ->setSource('login')
    ->setLabel('location')
    ->setValue('Please Select...')
    ->setType('select')     
    ->setWidth(60);
    $this->weight->label->setWidth(60); 
```

我知道它与我以前的问题类似，但它完全不同的代码，但是这个应该更容易修复。谢谢您的帮助。

Stacktrace（致命错误：在第 468 行的 C:\xampp\htdocs\p4a\p4a\objects\widgets\field.php 中的非对象上调用成员函数 getPk()）未指示错误正在发生，所以我不确定问题到底出在哪里，

其余代码（包括以前的）是：

```
class main_dashboard_mask extends P4A_Base_Mask
{
public function __construct()
{
    parent::__construct();
    $this->setTitle("Dashboard");

    $this->build('p4a_field','MeetingRooms');
    $this->MeetingRooms->setLabel("This is the meeting room label");
    $this->build('p4a_button', 'continue')
    ->setLabel('Continue?')
    ->implement("onclick", $this, "change");
   $this->build('p4a_field','booking')
    ->setlabel('Viewing?')
    ->setType('checkbox')
    ->setValue(true);
    $this->booking->label->setTooltip('If you are booking a meeting room, check this box');

    $this->build("p4a_db_source", "login")
        ->setTable("meetingrooms")
        ->addJoin("login.meetingrooms",
                  "login.meetingrooms.MeetingRoom = login.meetingrooms.MeetingRoom",
                  array('position'=>'Ident'))
        ->addOrder("position")
        ->load();

    $this->setSource($this->login);
    $this->firstRow();
    $this->build('p4a_field','location')
    ->setSource('login')
    ->setLabel('location')
    ->setValue('Please Select...')
    ->setType('select')     
    ->setWidth(60);
    $this->weight->label->setWidth(60);
    $this->Meetingrooms();
}

private function Meetingrooms()
{
    $this->build('P4A_fieldset', 'widgetframe')
    ->anchor($this->location)
    ->anchorLeft($this->booking)
    ->anchorLeft($this->continue)
    ->setLabel('Meeting Room Bookings');
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:25:46.867

我认为你没有得到对象。这就是为什么它给出非对象的错误。只需打印调用 getPk() 方法的对象。如果它是有效对象，则仅调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:06:12.410

我明白了，对不起，我找对了地方，但没有看到我错在哪里……

代码之前的位置->

```
 $this->setSource($this->login);
$this->firstRow();
$this->build('p4a_field','location')
->setSource('login') // <- this is the error(the Pk variable hasn't been set here)
->setLabel('location')
->setValue('Please Select...')
->setType('select')     
->setWidth(60);
$this->weight->label->setWidth(60);
$this->Meetingrooms(); 
```

修复是->

```
 ->setSource($this->login) 
```

感谢您的帮助=]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:25:36.343

你有完整的堆栈跟踪吗？哪一行代码准确地产生了这个错误？

无论如何，您必须找到`$object->getPk()`调用的代码。该错误意味着您正在尝试`->getPk()`在..`$object``null`

# java - 将 XTemplate 与网格一起使用

> ID：13029312
> 
> 赞同：0
> 
> 时间：2012-10-23T11:20:05.690
> 
> 标签：java, gwt, gxt

我正在尝试使用 XTemplate 来显示网格的行信息：

```
 List<User> users = new ArrayList<User>();
    users.add(new User("John", "Smith"));
    users.add(new User("Bob", "James"));
    UserList list = new UserList(users);

    XTemplate tpl = XTemplate.create(getTemplate());
    tpl.applyTemplate(Util.getJsObject(list));

    RowExpander expander = new RowExpander();
    if (showExpand){
        expander.setTemplate(tpl);
        columns.add(expander);
    } 
```

下面是 getTemplate() 的代码：

```
public native String getTemplate() /*-{
  return ['<p>Details: ',
          '<tpl for=".">',       
          '<p>{#}</p>',          // use current array index to autonumber
          '</tpl></p>'
         ].join("");
}-*/; 
```

但是我对 XTemplate 还是很陌生，而且我似乎无法让它工作。我只是用样本复制了一些来源。

基本上，我要做的只是将上述内容呈现`List<User>`为：

```
Details:
1 First Name: John - Last Name: Smith
2 First Name: Bob - Last Name: James 
```

这是**User**和**UserList**模型：

```
class User extends BaseModelData {
    public User(String firstName, String lastName){
        set("firstname", firstName);
        set("lastname", lastName);
    }
}

class UserList extends BaseModelData {
    public UserList(List<User> list){
        set("users", list);
    }
    public List getUsers(){
        return get("users");
    }
    public void setUsers(List users) {
        set("users", users);
    }
} 
```

这是 Grid 的声明方式：

```
Grid grid = new Grid<ModelData>(new ListStore<ModelData>(), new ColumnModel(columns)); 
```

这是 ListStore 的详细信息：

```
ListStore<ModelData> store = grid.getStore();
store.removeAll();
store.add(list); // Where list is List<Map<String, String>> data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:19:40.450

用这么少的信息很难说（Grid 声明在哪里？ListStore），但是假设您正在构建一个`ListStore<UserList>`，您的模板需要遍历`users`UserList 实例中的属性，而不是`.`，表示 UserList 对象本身（ '不被迭代）：

```
public native String getTemplate() /*-{
  return ['<p>Details: ',
      '<tpl for="users">',       
      '<p>{#}</p>',          // use current array index to autonumber
      '</tpl></p>'
     ].join("");
}-*/; 
```

# jsf-2 - 如何刷新从servlet获取图像的p：graphicImage？

> ID：13029313
> 
> 赞同：1
> 
> 时间：2012-10-23T11:20:13.770
> 
> 标签：jsf-2, primefaces

我有多个`<p:graphicImage>`s 通过 ID 从 servlet 获取图像。当用户删除或更改图像时，我需要刷新图像，以便它消失或更改而不是显示旧图像。

我怎样才能做到这一点？我可以为此使用 JavaScript 或 jQuery 吗？

# google-drive-api - 如何更新缩略图？

> ID：13029316
> 
> 赞同：1
> 
> 时间：2012-10-23T11:20:32.567
> 
> 标签：google-drive-api

插入新文件时，新的缩略图功能非常有用。有没有办法更新现有文件的缩略图？我没有设法使用 files().patch() 或 files().update() 方法更新缩略图（在 Java 中）。我没有收到任何错误消息，但上传新缩略图时 Google 云端硬盘中的缩略图并没有改变。

```
File file = drive.files().get(fileId).execute();
String encodedImage = Base64.encodeBase64URLSafeString(imageData);
Thumbnail thumbnail = new Thumbnail();
thumbnail.setImage(encodedImage);
thumbnail.setMimeType("image/png");
file.setThumbnail(thumbnail);
drive.files().update(fileId, file).execute(); 
```

更新：由于我使用完全相同的代码插入带有缩略图的文件（有效）并更新文件，如上面的代码片段所示（不会更新缩略图），因此您使用我的应用程序执行可能是有意义的两种操作。

```
Login to www.ultradox.com
Copy one of the examples. 
This will create a new file on your Google Drive with the correct thumbnail 
(as it triggers the insert file method with thumbnail).
Click on the "Customize" button
Scroll down and click on the thumbnail image to upload a new thumbnail
= Thumbnail not changed, but update should be triggered. 
So probably something shows up in your logs? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:06:57.357

当前行为是仅对元数据的更新不允许更改缩略图。因此，仅对元数据的更改不会导致缩略图更改。我不确定这是最好的行为，我们将尝试将其改进为：

1.  允许缩略图更新
2.  报告错误而不是看起来成功

# javascript - 将格式错误的 XML 文件加载到字符串 javascript 中

> ID：13029330
> 
> 赞同：0
> 
> 时间：2012-10-23T11:21:11.313
> 
> 标签：javascript, xml, http

我有一个大致如下形式的服务器响应：

```
<A>...</A><B>...</B><C>...</C> 
```

我正在尝试使用代码加载它：

```
xhttp=new XMLHttpRequest();
xhttp.open("GET",dname,false);
xhttp.send(""); 
```

但是我得到了错误

```
junk after document error 
```

我计划加载格式错误的 XML 文档，并使用正则表达式解析出我需要的信息（顺便说一句，我不会使用正则表达式解析 XML ！！！）

如何将此响应加载为字符串？

更改来自服务器的响应不是一种选择。它必须在javascript中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:56:42.083

好吧，假设你知道你在做什么

```
$.ajax({
  url: 'www.mydomain.com/generatexml',
  success: function(data) {
    console.log("XML received!", data);
    ...
    RegExp...
    ...
  }
}); 
```

（使用 jQuery）

# php - 多个复选框发布数据过滤问题

> ID：13029335
> 
> 赞同：0
> 
> 时间：2012-10-23T11:21:19.363
> 
> 标签：php, html, joomla, checkbox

我有一个如下所示的表格。

![校验位](../Images/1130c8654e6693c9da256472043cd0dc.png)

到目前为止，我所做的是为每个项目分配一个复选框，如下所示。

```
<input type="checkbox" name="options[]" value="relevant_value" class="checks"> 
```

现在我的问题是我不知道哪个是父项，哪个是子项。我该如何解决这个问题？

（鉴于我使用 Joomla。使用下面的代码获取复选框）

```
$options    = JRequest::getVar('options', NULL, 'post', 'array'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:26:11.513

我建议使用多维数组。像这样-

```
For parent-
<input type="checkbox" name="options[]" value="parent" class="checks">
For child-
<input type="checkbox" name="options[parent][]" value="child" class="checks"> 
```

通过 - 获取数据

```
$options    = JRequest::getVar('options', NULL, 'post', 'array'); 
```

看看数据是怎么来的——

```
print_r($options); 
```

现在它是二维的，使用父母作为孩子区分不同父母的关键。

```
foreach($options as $option){
         $parent[] = $option;
         if(is_array($options[$option]){
             foreach($options[$option] as $opt)
             $childs[$option][]=$opt;
         }

    } 
```

如果不清楚，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:28:53.980

你应该像这样使用数组：

```
<!-- parent -->
<input type="checkbox" name="options[group_id]" value="relevant_value" class="checks"> 
```

和

```
<!-- associated child-->
<input type="checkbox" name="options[group_id][values][]" value="relevant_value" class="checks"> 
```

这样检索关联值会更容易

# php - Arraylist 在 php 中不起作用

> ID：13029337
> 
> 赞同：-1
> 
> 时间：2012-10-23T11:21:36.620
> 
> 标签：php, arraylist

我在php中创建了一个arraylist

它被放置在一个按钮中。当我单击它打开按钮时，它会打开所有 aaraylist 但链接到的代码存在一些问题，代码在[这里](http://jsfiddle.net/aryan7987/2PXMh/)。
有人可以告诉我问题出在哪里。

```
var Arraylist<String> = new Arraylist<String>; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:34:16.420

问题是任何点击都会立即隐藏下拉菜单，然后通过切换它使其再次可见。

我正在尝试编辑您的小提琴以尝试使其以您想要的方式工作:)。

* * *

编辑：这是一个小提琴，它可以做我认为你想要它做的事情：[fiddle](http://jsfiddle.net/2PXMh/8/)

我从您的小提琴中得到的想法是，您希望在单击菜单时切换菜单，如果您单击其他任何位置，则默认情况下菜单是隐藏的。

这通过记住项目是否被切换来起作用，如果没有，它将默认隐藏。

```
var nav = $('#nav');
nav.find('ul#nav').toggle();
var emp = $(this);
$("html").click(function() {});
$(document).bind('click', function(e) {
    var dd = $("ul.dropdown");
    var toggled = false;

    var target = $(e.target); //2
    if (target.parent().is('#nav')) {
        var li = target.closest('li.menu');
        toggled = true;
        li.find('ul.dropdown').toggle();
    }
    if (!toggled) {
        dd.hide();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:36:59.477

您只需要在隐藏然后切换时摆脱额外的 hide() ，覆盖您的切换。

看到这个例如它工作 [http://jsfiddle.net/RxJer/11/](http://jsfiddle.net/RxJer/11/)

```
var nav = $('#nav');
nav.find('ul#nav').toggle();
var emp = $(this);
$("html").click(function() {});
$(document).bind('click', function(e) {
    var target = $(e.target); //2
    var dropdown = target.parents('#nav').find('li.menu ul.dropdown');
    dropdown.toggle();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:46:30.783

尝试这个：

```
$(document).bind('click', function(e) {
    var target = $(e.target); //2
    if (target.parent().is('#nav') || target.parent().is('.menu')) {
        var li = target.closest('li.menu');
        var dd = li.find('ul.dropdown');

        var isVis = dd.is(':visible');
        $("ul.dropdown").hide();

        (isVis) ? dd.hide() : dd.show();
    } else {
        $("ul.dropdown").hide();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:22:24.093

好的，让我们用您的代码解决所有问题。我会解释你做错了什么，为什么，以及推荐什么。

第一：

* * *

## HTML 标记。

您包含的示例代码包含标记错误。您将在嵌套无序列表之后关闭嵌套无序列表中的列表项之一。次要，但对于有效标记很重要。一些浏览器可能会对这些事情发疯。

我注意到的第二件事是您在列表中使用了相同的 ID。ID 对文档来说是唯一的，以便在 CSS 和 Javascript 中快速引用它。如果您打算在文档中选择多个元素，请使用类，这就是它们的用途。[您可以在此处](http://webdesign.about.com/od/css/f/blfaqmultiIDs.htm)或[此处](http://www.webdesignfromscratch.com/html-css/using-classname-class-and-id-in-html/)阅读有关它的更多信息。

取决于您对它的预期用途；要获得相同的预期结果，请考虑改用此标记

```
<div class='emp_alt'>
    <div class='container'>
        <div class='title'>EMP</div>
        <img src="http://www.iconarchive.com/download/i32215/tpdkdesign.net/refresh-cl/Symbols-Find.ico">
    </div>
    <div class='dropdown'>Contact no.</div>
</div> 
```

一般来说，您拥有的元素越少，它需要的客户端处理时间就越少。当您将 CSS 应用于元素时，强烈建议您按类或 ID 选择它们，而不是按标签名称。使用标签名称可能会占用额外的处理时间，因为客户端必须进行更通用的搜索。[您可以在此处](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS)阅读有关高效 CSS的更多信息。

这是一个带有更正标记的[工作示例。](http://jsfiddle.net/nCNrP/)
这是一个使用备用标记的[工作示例。](http://jsfiddle.net/VyF6E/)

我不确定您是否正在尝试完成某种工具提示行为，在这种情况下，[此示例](http://jsfiddle.net/4cJhg/)应该适合您。

* * *

## jQuery (Javascript)

其他答案正确地指出了您的主要问题是您在点击时隐藏了下拉菜单。他们没有解决的是，当用户点击某个东西，并且您的文档点击选中它时，它将返回位于**front**的元素。

因此，当您单击文本时，#nav 元素位于前面。然而，图像本身就是一个元素，并且位于#nav 元素的前面。

这就是为什么您应该使用正确的事件，因为它们包含元素内的所有内容。

正如您在上面的示例中可能已经注意到的那样，有一种更快、更清洁、更好的方法来实现您想要的。

你应该做这样的事情

```
var dropdowns = $(".dropdown");

$(".nav > li").click(function(e){
    //Prevent document click event from firing
    e.stopPropagation();

    var this_dropdown = $(this).children("ul.dropdown");

    dropdowns.not(this_dropdown).hide();
    this_dropdown.toggle();
});

//Hide all dropdowns if not clicked on a list item (or container)
$(document).click(function(){
    dropdowns.hide();
}); 
```

注意：如果您不想停止传播，您可以使用“传感器”来代替。基本上，传感器确定布尔值的状态，然后用于确定文档点击事件是否应该执行任何操作。在文档单击时检查布尔值状态的 if 语句就足够了。

```
var dropdowns = $(".dropdown");
var sensor_state = true;

$(".nav > li").click(function(e){
    var this_dropdown = $(this).children("ul.dropdown");

    dropdowns.not(this_dropdown).hide();
    this_dropdown.toggle();
}).mouseenter(function(){
    sensor_state = false;
}).mouseleave(function(){
    sensor_state = true;
});

$(document).click(function(){
    if(sensor_state){
        dropdowns.hide();
    }
}); 
```

这依赖于 nav 元素具有下拉子元素的标记。这是使用您的[示例](http://jsfiddle.net/zNev2/)的示例。

这里的问题是您的标记使此代码在单击它本身时切换下拉列表。这就是为什么我在前面的示例中添加了一个容器。

希望我至少有所了解并解决了您的问题。

* * *

## 更新

在您的最新评论之后，表明您正在使用 jqgrid 并且您想要一个下拉菜单，我决定创建一个相当[详尽的示例](http://jsfiddle.net/w8fZ2/)来说明如何完成它。
我建议你研究代码并从中学习。你不必完全按照我的做法去做，只要你知道如何以及为什么。

功能：

*   当用户单击 jqgrid 中的联系人单元格时，它将显示下拉容器和“服务器”提供的数据（自定义数组数据比暂存 ajax 事件更容易）。服务器提供的数据在隐藏列中（在联系人列之后）
*   如果在下拉容器内单击，它不会关闭。我在其中添加了一个关闭按钮，因为否则用户可能会对如何关闭它感到困惑。有一个总比没有好
*   如果单击文档中的其他任何位置，它将关闭
*   如果用户在下拉容器可见时单击相同的单元格，它将关闭

下拉容器不附加到单元本身，而是从外部定位。这允许我们重用同一个容器，而不是为每个单元创建新容器，从而节省了我们的时间。

这就是我愿意编写的代码。剩下的就看你朋友了：）

* * *

我不愿意在这篇文章中添加更多文本，但为了完整起见，我将添加整个示例代码。

代码 | [JSFiddle 示例](http://jsfiddle.net/w8fZ2/)

HTML

```
<link rel="stylesheet" type="text/css" media="screen" href="http://trirand.com/blog/jqgrid/themes/redmond/jquery-ui-custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="http://trirand.com/blog/jqgrid/themes/ui.jqgrid.css" />
<link rel="stylesheet" type="text/css" media="screen" href="http://trirand.com/blog/jqgrid/themes/ui.multiselect.css" />
<script src="http://trirand.com/blog/jqgrid/js/jquery.js" type="text/javascript"></script>
<script src="http://trirand.com/blog/jqgrid/js/jquery-ui-custom.min.js" type="text/javascript"></script>
<script src="http://trirand.com/blog/jqgrid/js/jquery.layout.js" type="text/javascript"></script>
<script src="http://trirand.com/blog/jqgrid/js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="http://trirand.com/blog/jqgrid/js/ui.multiselect.js" type="text/javascript"></script>
<script src="http://trirand.com/blog/jqgrid/js/jquery.jqGrid.js" type="text/javascript"></script>
<script src="http://trirand.com/blog/jqgrid/js/jquery.tablednd.js" type="text/javascript"></script>
<script src="http://trirand.com/blog/jqgrid/js/jquery.contextmenu.js" type="text/javascript"></script>

<table id="list"></table>
<div id="pager"></div>
<div id="contact_info"></div> 
```

CSS

```
#contact_info{
    position: absolute;
    top: 0;
    left: 0;
    display:none;

    background-color: white;
    border: 1px solid gray;
    padding: 5px 3px;

    -moz-box-shadow: 3px 3px 4px #CCC;
    -webkit-box-shadow: 3px 3px 4px #CCC;
    box-shadow: 3px 3px 4px #CCC;
    -ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#CCCCCC')";
}

#list .contact{
    cursor: pointer;
}

.container{
    cursor: pointer;
}

td.contact:active{
    background-color: #FBEC88;
}

.container .dropdown{
    display: none;
}

.ui-jqgrid tr.jqgrow td{
    white-space: normal;
}

/*
    Style the dropdown box
*/

h2{
    border-bottom: 1px solid lightgray;
}

p{
    padding: 2px;
}

h2, p{
    margin: 0;
}

.close_btn{
    font-size: 10px;
    line-height: 10px;
    float: right;
    text-decoration: none;
} 
```

Javascript

```
//Preload the image to avoid flashes
search_img= new Image();
search_img.src = "http://www.iconarchive.com/download/i32215/tpdkdesign.net/refresh-cl/Symbols-Find.ico";

//The dropdown container
var contact_info = $("#contact_info");

//ID of last clicked row
var last_row;

//Sensor state determining whether document click will close the dropdown container on click
var sensor_state = true;

//Dropdown information data (base)
var dd_bp = "<img src='"+search_img.src+"'>",
    dd_inf = "<h2>Contact information</h2><p>Phone: 555-12345<br/>E-mail: something@someplace.whatever<br/>P/O Box: 555555</p>"

//Data array (don't know what you use as a source, but I'll keep it simple)
//This setup allows you to send dropdown data from the server as well :)
var data_from_server = [
    {id:"1",title:"Economy advisor",name:"Luke",lname:"North", contact: dd_bp, dropdown: dd_inf},
    {id:"2",title:"Salesperson",name:"John",lname:"Smith",contact: dd_bp, dropdown: dd_inf},
    {id:"3",title:"Economy advisor",name:"Jimmy",lname:"Hendrix",contact: dd_bp, dropdown: dd_inf},
    {id:"6",title:"IT Manager",name:"Caroline",lname:"GlaDos",contact: dd_bp, dropdown: dd_inf},
    {id:"5",title:"Quality Inspector",name:"Paul",lname:"Shoreman",contact: dd_bp, dropdown: dd_inf},
    {id:"4",title:"Quality Inspector",name:"Liza",lname:"Ingridge",contact: dd_bp, dropdown: dd_inf},
    {id:"8",title:"Distribution manager",name:"Elisabeth",lname:"Welman",contact: dd_bp, dropdown: dd_inf},
    {id:"10",title:"Quality Inspector",name:"John",lname:"Johansson",contact: dd_bp, dropdown: dd_inf},
    {id:"11",title:"Economy advisor",name:"Tommy",lname:"the Knuckle",contact: dd_bp, dropdown: dd_inf},
    {id:"9",title:"Manufacturer",name:"Rosa",lname:"Minx",contact: dd_bp, dropdown: dd_inf}
];

//Adds the content to and repositions the dropdown container to the current row cell
function show_contact_info(rowid){
    var row = $("#"+rowid),
        contact_cell = $("td.contact", row),
        dropdown_content = $("td.dropdown", row).html();

    //Add the content
    contact_info.html(dropdown_content).append("<a class='close_btn' href='#'>close</a>");

    //Add a close button event
    $(".close_btn").on("click", function(e){
        e.preventDefault();
        contact_info.hide();
    });

    //Position the contact info box        
    contact_info.css({
        //The last calculations will center the container
        left: contact_cell.offset().left - contact_info.outerWidth()/2 + contact_cell.outerWidth()/2,
        //The last calculation will position the container below the cell, replace it with
        // -contact_info.outerHeight() to position it above the cell
        top: contact_cell.offset().top + contact_cell.outerHeight(),
    });

    contact_info.show();
}

function sensor_enter(){sensor_state = false;}
function sensor_leave(){sensor_state = true;}

function add_sensor(element){
    element
        .on("mouseenter", sensor_enter)
        .on("mouseleave", sensor_leave);
}

//Setup jqgrid
$("#list").jqGrid({
    datatype: "local",
    width: 600,
    colNames:['EID', 'Title','First name', 'Last name', 'Contact', "Dropdown"],
    colModel:[
        {name:'id',index:'id', width:20, sorttype:"int"},
        {name:'title',index:'title', width:90},
        {name:'name',index:'name', width:50, align:"left"},
        {name:'lname',index:'lname', width:50, align:"left"},
        {name:'contact',index:'contact', width:25, align:"center", classes:'contact'},
        {name:'dropdown', index:'dropdown', hidden:true, classes:'dropdown'}
    ],
    rowNum:10,
    rowList:[5,10,15],
    pager: '#pager',
    viewrecords: true,
    caption:"Employees",
    onSelectRow: function(rowid, status, e){
        var row = $("#"+rowid)

        //"Hide" selection so that cell selection looks "cooler" :)
        row.attr("class", "ui-widget-content jqgrow ui-row-ltr ui-state-hover");
    },
    onCellSelect: function(rowid, iCol, cellcontent, e){
        if(iCol == 4){
            if(last_row == rowid){
                if(contact_info.is(":hidden")){
                    show_contact_info(rowid);
                }else{
                    contact_info.hide();
                }
            }else{
                show_contact_info(rowid);
            }
            last_row = rowid;
        }
    },
    idPrefix: "emp_",
    gridComplete: function(){
        //Because the content is dynamic, we need to add it after the grid has finished
        //This should be done for server generated content, ie the loadComplete event for server requests
        add_sensor($("tr td.contact"));
    }
});

$("#list").jqGrid('navGrid','#pager',{edit:false,add:false,del:false});

for(var i=0;i<=data_from_server.length;i++){
    $("#list").jqGrid('addRowData',i+1,data_from_server[i]);
}

//Sensor for the dropdown container
add_sensor($("#contact_info"));

//Hide contact info on document click
$(document).click(function(){
    if(sensor_state){
        contact_info.hide();
    }
}); 
```

这是它应该是什么样子 ![jqgrid 结果](../Images/b838817c7da3683b7a7d1c04698c56b3.png)

* * *

这里是所有参考资料

*   [为什么每个页面上的 ID 属性必须是唯一的？](http://webdesign.about.com/od/css/f/blfaqmultiIDs.htm)
*   [在 HTML 中使用 Classname（类）和 ID](http://www.webdesignfromscratch.com/html-css/using-classname-class-and-id-in-html/)
*   [编写高效的 CSS](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS)
*   [“return false;”和“return false”的区别 和“e.preventDefault();”](http://css-tricks.com/return-false-and-prevent-default/)
*   [`return false`对比`e.stopPropagation();`](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)
*   [`.click`](http://api.jquery.com/click/)
*   [`.children`](http://api.jquery.com/children/)
*   [`.not`](http://forum.jquery.com/topic/jquery-not-this)
*   [。上（）](http://api.jquery.com/on/)
*   [。抵消（）](http://api.jquery.com/offset/)
*   [.outerWidth()](http://api.jquery.com/outerWidth/)
*   [.outerHeight()](http://api.jquery.com/outerHeight/)
*   [jqGrid](http://trirand.com/blog/jqgrid/jqgrid.html)
*   [jqGrid 事件](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:events)

# objective-c - UIActivityItemSource Protocole 设置复杂对象

> ID：13029340
> 
> 赞同：19
> 
> 时间：2012-10-23T11:21:52.860
> 
> 标签：objective-c, ios6, uiactivityviewcontroller

我正在使用 iOS 6 新的方式来分享信息：`UIActivityViewController`。要根据媒体（facebook、twitter 或邮件）选择共享数据，我的视图控制器实现`UIActivityItemSource`协议如下：

```
- (IBAction)onShareButton:(UIButton *)sender
{

    UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[self] applicationActivities:nil];

    activityViewController.excludedActivityTypes = @[UIActivityTypeMessage, UIActivityTypeAssignToContact, UIActivityTypeCopyToPasteboard, UIActivityTypeMessage, UIActivityTypePostToWeibo, UIActivityTypePrint, UIActivityTypeSaveToCameraRoll];
    [self presentViewController:activityViewController animated:YES completion:^{}];
}

#pragma mark - UIActivityItemSource Protocol

- (id)activityViewController:(UIActivityViewController *)activityViewController itemForActivityType:(NSString *)activityType {
    if ([activityType isEqualToString:UIActivityTypePostToFacebook]) {
        NSArray *items = @[@"message facebook", [NSURL URLWithString:@"http://www.myUrlFacebook.com"]];
        return items;
    } else if ([activityType isEqualToString:UIActivityTypePostToTwitter]) {
        NSArray *items = @[@"message twitter", [NSURL     URLWithString:@"http://www.myUrlTwitter.com"]];
        return items;
    } else if ([activityType isEqualToString:UIActivityTypeMail]) {
        NSArray *items = @[@"message mail", [NSURL URLWithString:@"http://www.myUrlMail.com"]];
        return items;
    }

        NSArray *items = @[@"Not a proper Activity", [NSURL URLWithString:@"http://www.myUrlMail.com"]];
    return items;
}

- (id)activityViewControllerPlaceholderItem:(UIActivityViewController *)activityViewController {
    return @"PlaceHolder";
} 
```

当我返回一个简单的 NSString 时，我`activityViewController:itemForActivityType:`的字符串很好用`UIActivityViewController`，但我找不到使用`Array`!

根据 Apple 文档，它应该是可能的：

> 此方法返回要由活动对象操作的实际数据对象 [Apple 文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIActivityItemSource_protocol/Reference/Reference.html)

有没有人用这个`UIActivityItemSource`协议和数组一起使用，或者有没有使用完整的教程来做到这一点？

注意：我在控制台上也遇到了这个错误，它可能会有所帮助......

> 启动服务：注册未知应用标识符 com.apple.mobilemail 失败
> 
> 启动服务：找不到应用标识符 com.apple.mobilemail

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-10T04:25:06.543

符合 的单个对象`UIactivityItemSource`只能返回单条数据 for `activityViewControllerPlaceholderItem:`，没有`NSArray`s。

您可以通过在 initial 的部分创建和传递两个`UIActivityItemSource`s来克服这个问题。每个源都可以传递一个占位符值，但可以返回一些空白，因此您实际上不必根据活动使用该特定类型的数据。`activityItems``initWithActivityItems:``itemForActivityType`

或者只是使用另一个答案中提到的那个很酷的扩展。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-07T18:30:43.007

在花费大量时间试图弄清楚这一点之后，似乎不可能将其传递给一个`NSArray`项目。所以我扩展`UIActivityViewController`使其成为可能。

[RDActivityViewController](https://github.com/rdougan/RDActivityViewController)

# c# - ResourceManager 没有选择正确的语言

> ID：13029345
> 
> 赞同：6
> 
> 时间：2012-10-23T11:22:12.637
> 
> 标签：c#, resourcemanager

使用本地化和语言属性我已经翻译了我的 Form1。

在 Form1_Load 事件中，我想为标签、按钮等设置文本......

```
private void Form1_Load(object sender, EventArgs e)
{
    SetLanguage();
} 
```

SetLanguage 方法：

```
private void SetLanguage()
{

    System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("de");

    System.Resources.ResourceManager rm = new System.Resources.ResourceManager(typeof(Form1));

    button1.Text = rm.GetString("button1.Text");
    linkLabel1.Text = rm.GetString("linkLabel1.Text");
    checkBox1.Text = rm.GetString("checkBox1.Text");

} 
```

但它不起作用，它总是选择“默认/后备”英文字符串（但设置了 de CultureInfo）。我完全不知道出了什么问题......我在一个新的示例应用程序中使用了相同的代码，它在这个小示例应用程序中工作。但在我的实际应用程序中它不起作用。

还明确告诉 ressourcemanager 使用什么文化会返回英文字符串而不是德文：

```
MessageBox.Show(rm.GetString("button1.Text", new System.Globalization.CultureInfo("de"))); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T19:11:47.547

本节是重要的一节。当我们将表单的 localizable 设置为 true 并构建应用程序时，Visual Studio .NET 会创建特定于在表单的 Language 属性中指定的区域性的资源。Visual Studio .NET 使用 resgen.exe 创建资源文件。我们还可以使用以下语法创建资源：

```
resgen mytext.en-us.txt mytext.en-us.resources 
resgen mytext.en-us.resources mytext.en-us.resx 
```

//此命令读取二进制资源文件 mytext.en-us.resources 并//写入名为 mytext.en-us.resx 的基于 XML 的输出文件 现在资源已创建，但我们需要将它们链接到应用程序，所以这是由 Visual Studio .NET 使用 AL.exe（程序集链接器）完成的。我们也可以通过以下方式手动完成：

```
 al 

 /t:lib

 /embed:mytext.en-us.resx 

 /culture:en-us 

 /out:Myapplication.resources.dll 
```

您可以在 MSDN 文档中找到有关 resgen.exe 和 al.exe 的更多信息。

# xml - Adobe Illustrator 中的 SVG 特殊字符

> ID：13029353
> 
> 赞同：1
> 
> 时间：2012-10-23T11:22:32.693
> 
> 标签：xml, svg, fonts, adobe-illustrator

我创建了以下 svg 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<svg width="640" height="480" xmlns="http://www.w3.org/2000/svg">
 <g>
  <title>Layer 1</title>
  <text xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" id="svg_1" y="138" x="79" stroke-width="0" stroke="#000000" fill="#000000">Sø</text>
 </g>
</svg> 
```

但是当我尝试在 Adob​​e Illustrator 中打开它时，我收到一条错误消息，指出它是无效的 SVG 文件。

这是由于“ø”。

我一直在挠头，但我无法想出解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:31:49.840

您可以使用支持此字符的编码，例如

```
<?xml version="1.0" encoding="Windows-1252"?> 
```

或者对字符进行编码。[从这一点](http://www.theukwebdesigncompany.com/articles/entity-escape-characters.php)来看，您将问题信替换为`&#248;`

# java - ConstraintViolationException：使用 Hibernate 和 MySQL 时键“PRIMARY”的重复条目？

> ID：13029355
> 
> 赞同：0
> 
> 时间：2012-10-23T11:22:37.023
> 
> 标签：java, mysql, hibernate, primary-key

```
 Session session = HibernateUtil.getTestSessionFactory().getCurrentSession();
    session.beginTransaction();
    session.save(test1);
    session.save(test2);
    session.save(test3);
    session.getTransaction().commit();

    WARN: SQL Error: 1062, SQLState: 23000
ERROR: Duplicate entry '9900001' for key 'PRIMARY'
WARNING: #{RmaBean.send}: org.hibernate.exception.ConstraintViolationException: Duplicate entry '9900001' for key 'PRIMARY'
javax.faces.FacesException: #{RmaBean.send}: org.hibernate.exception.ConstraintViolationException: Duplicate entry '9900001' for key 'PRIMARY'
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118) 
```

因此，当尝试将 test1 插入 db 时，我总是会遇到该异常。在插入该 test1 之前，我填充了它的 PK，从 DB 中获取最后一个 PK 并将 +1 添加到其中。Hibernate 是否以某种方式将 pk 保存在内存中，我不应该使用插入而是更新？

更新：`

```
<class name="test1" table="test1" catalog="testing">
    <id name="testPK" type="long">
        <column name="testPK" />
        <generator class="assigned" />
    </id>` 
```

这段代码是由另一个人实现的，我刚刚从 db 中检查了没有自动增量为真。已分配意味着我必须提供 PK 并且我正在尝试这样做。

```
public Integer getLastPK {

    Session session = HibernateUtil.getTestSessionFactory().getCurrentSession();
    Integer pk = null;
    try{

    session.beginTransaction();

    pk = new Integer(session.createSQLQuery("SELECT LAST_INSERT_ID() from testing.test1").uniqueResult().toString());  
    session.getTransaction().commit();

    System.out.println("1.....pk----------->"+pk);

    if(pk != null && pk <= 9900001){
        System.out.println("IF...");
        pk=9900001;

    }else if(pk != null && pk > 9900001){

        pk = pk+1;
    } 
```

UPDATE2：我将 pk 更改为自动增量：

更改表`testing`。`test1`AUTO_INCREMENT = 9900001 ，更改列`testPK` `testPK`BIGINT(20) 非空 AUTO_INCREMENT ；

这是个好主意吗？我也更改了 hbm.xml 文件...

感谢您的帮助！萨米人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:29:49.930

使用`session.saveOrUpdate(test1)`而不是怎么样`session.save(test1);`？

saveOrUpdate(Object object) 是

> 根据未保存值检查的分辨率，保存（对象）或更新（对象）给定实例。

[http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/Session.html](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/Session.html)

# ipad - 边距在 iPad 纵向模式下不起作用

> ID：13029356
> 
> 赞同：1
> 
> 时间：2012-10-23T11:22:40.197
> 
> 标签：ipad, margin, portrait

我的网站的左边距在 iPad 上不起作用（纵向模式）。它在横向模式下完全居中，但是当我将其转到纵向视图时，我的左边距似乎设置为零。你能帮我解决这个问题吗？

我的网站：www.inclouds.co.uk/test 我正在使用[ipadpeek](http://ipadpeek.com/)在 ipad 上查看我的网站：

对于我的 CSS 代码：

```
#container {

    width: 990px;
    margin: 0 auto;
    position: absolute;

 }
#header {
width: 990px;
height: 220px;
margin-left: auto;
margin-right: auto;
margin-top: auto;
display: block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:32:33.240

尝试将宽度更改为 100%。你强迫它比纵向的 iPad 屏幕更宽。

另外，不要使用该测试站点，而是在 Safari 中打开开发者模式，将设备连接到计算机并从 Safari 的开发者菜单中打开 Web Inspector。

# objective-c - ios中的UIButton AddTarget（不工作崩溃）

> ID：13029363
> 
> 赞同：2
> 
> 时间：2012-10-23T11:23:15.360
> 
> 标签：objective-c, ios, unity3d

我已经以编程方式创建了 UIButton ，它被添加到也是以编程方式创建的 UIViewController 中。我不知道作为 AddTarget 传递什么。

我目前已在 addtarget 中传递 optionView.self

```
 UIWindow *window1 = [[UIApplication sharedApplication] keyWindow];
   optionView  = [[UIViewController alloc]init];
   optionView.view.frame=CGRectMake(0, 0, 960, 640);
   UIButton *button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
   button.frame=CGRectMake(0, 0, 200, 100);
   [button setTitle:@"Press Me" forState:UIControlStateNormal];
   [button addTarget:optionView.self action:@selector(buttonClicked:)  forControlEvents:UIControlEventTouchUpInside];
   [optionView.view addSubview:button];
   [window1 addSubview: optionView.view]; 
```

这也是我的选择器方法

```
-(IBAction)buttonClicked:(id)sender{

    NSLog(@"This works");

} 
```

而且我也收到以下错误

无法识别的选择器发送到实例 0x1fd7b600'

请不要说我正在使用 Unity3d 游戏引擎。此代码在（Unity3d 在 APPController.mm 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:28:01.693

如果您`buttonClicked:`在设置目标的同一类中有方法，则它应该`self`代替`optionView.self`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:40:12.610

您的 ViewController`optionView`没有 buttonClicked 选择器，这就是应用程序崩溃的原因。

如果需要，您可以从 ViewController 创建子类，在那里实现您的方法并创建 optionView 作为新类的实例。然后它将响应呼叫。

或者另一种方式 - 您可以通过使用`buttonClicked`选择器为其创建类别来扩展基本 ViewController 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:32:11.007

最好在**optionView**中创建此按钮，而不是在应用程序委托中，应用程序崩溃，因为它将在 optionView 中找到 buttonClicked 方法，而 optionView 中还没有任何方法。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

UIButton *button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
button.frame=CGRectMake(0, 0, 200, 100);
[button setTitle:@"Press Me" forState:UIControlStateNormal];
[button addTarget:self action:@selector(buttonClicked:)  forControlEvents:UIControlEventTouchUpInside];
[self.window addSubview: button];
[self.window makeKeyAndVisible];
return YES; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T11:42:44.203

我想目标应该`optionView`改为`optionView.self`

# biztalk - 如何从 BTMessageBox 中删除主机实例僵尸

> ID：13029366
> 
> 赞同：2
> 
> 时间：2012-10-23T11:23:19.877
> 
> 标签：biztalk, biztalk-2009

在将我们的大部分 BT 应用程序从 BizTalk 2009 迁移到 BizTalk 2010 环境后，我们开始着手删除旧应用程序和未使用的主机。在这个过程中，我们最终得到了一个僵尸主机实例。

这导致 bts_CleanupDeadProcesses 启动失败并出现错误“以用户身份执行：RH\sqladmin. 找不到存储过程“dbo.int_ProcessCleanup_ProcessLabusHost”。[SQLSTATE 42000]（错误 2812）。步骤失败。”</p>

查看CleanupDeatProcess进程后，在BTMsgBox.ProcessHeartBeats表中找到了僵尸主机实例，dtNextHeartbeatTime设置为主机被移除的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T19:26:51.897

你试过 BTSTerminator 吗？这适用于一次性清理。

[http://www.microsoft.com/en-us/download/details.aspx?id=2846](http://www.microsoft.com/en-us/download/details.aspx?id=2846)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:25:50.917

（我假设您的服务中不再存在主机实例进程，并且 SQL 代理作业失败）

通过查看作业的来源，它使用光标 ( , lol)`[dbo].[bts_CleanupDeadProcesses]`在表中循环查找“死”心跳。`dbo.ProcessHeartbeats``btsProcessCurse`

每个流程实例都有自己的清理存储过程`int_ProcessCleanup_[HostName]`和供心跳看门狗调用的存储过程，即`bts_ProcessHeartbeat_[HostName]`（尽管 FWR SPROC 将其称为 @ApplicationName），由`WHERE (s.dtNextHeartbeatTime < @dtCurrentTime)`.

因此，很容易删除已删除/僵尸主机的记录（或者，如果您不那么勇敢，只需`dtNextHeartbeatTime`将已死主机实例的心跳记录上的 Next 更新到下个世纪的某个时间）。无论哪种方式，SQL 代理作业都应该跳过死实例。

另一种方法是尝试通过管理控制台重新创建具有相同名称的主机和实例，然后再次（正确地）删除它们。但是，这可能会导致其他问题，因为由于未删除的对象，BizTalk 将无法创建上面的 2 个 SPROC。

但是，在您确认这适用于首先进行试运行之前，我显然不会在您的 prod 环境中执行此操作。

看起来其他人在[这里遇到了类似的情况](http://social.msdn.microsoft.com/Forums/lv/biztalkgeneral/thread/7928fd98-696b-4aaf-b5b4-a98a8d178ccf)

[而且这里](http://blogs.msdn.com/b/asiatech/archive/2009/11/25/how-does-biztalk-detect-if-a-host-instance-is-dead-in-bts2k6-2k6r2-and-2k9.aspx)还有朱晓东对心跳机制如何工作的详细介绍

# highcharts - Highcharts：显示缺少数据点的折线图

> ID：13029368
> 
> 赞同：1
> 
> 时间：2012-10-23T11:23:28.070
> 
> 标签：highcharts, linechart, missing-data

我正在计算一年中每周的房产平均值。我想在折线图中显示这些信息（x 轴是一年中的第几周，y 轴是平均值，不同的线代表不同的属性）。

但是对于任何给定的财产，我不一定有一年中每周的数据点。如果我没有这样的数据点，我希望我的这个属性的线在我拥有的数据点之间进行插值。

还有其他人遇到类似的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:32:01.253

Highcharts 并没有真正做插值。当然，如果您的系列有一个缺失点，它将在相邻两个之间画线……但这不是您想要发布的计算“值”。它只是这两个相邻点之间的最短距离。我会预处理您的数据以填充缺失的点，然后将这些点标记为用一个`Note:`值或一个`color:`值计算。第二个值来自您的预处理的示例：

```
data: [{ y: 7.0},
        {y: 6.9,
         Note: 'calculated',
         color: '#BF0B23'},
        {y: 9.5}] 
```

# sql - 在 SQL 语句中使用变量时出错

> ID：13029370
> 
> 赞同：1
> 
> 时间：2012-10-23T11:23:41.097
> 
> 标签：sql, r, select

我使用 R 中的 sql select 语句从表中提取一些数据，

```
query <- "select * from MyTable where TimeCol='6/29/2012 21:05' ";
result <- fn$sqldf(query); 
```

上面的代码给出了正确的结果，但是当时间值保存在变量中时，它不起作用

```
mytime <- "6/29/2012 21:05";

query <- "select * from MyTable where TimeCol = $mytime";     # OR

query <- "select * from MyTable where TimeCol = $[mytime]";   # OR

query <- "select * from MyTable where TimeCol = '$[mytime]' ";

result <- fn$sqldf(query); 
```

以上三行都不起作用

`View(result)` 它给出了错误：无效的'x'参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:19:54.690

`$[]`并且`$()`不是有效的语法，并且`query`帖子中第一个实例中时间字符串周围的引号在后续实例中丢失，因此正确的版本是：

```
library(sqldf)

mytime <- "6/29/2012 21:05"
MyTable <- data.frame(TimeCol = mytime)
query <- "select * from MyTable where TimeCol = '$mytime' "  

fn$sqldf(query) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:35:34.087

尽管我在评论中链接到的答案使用不同的函数来查询 data.frame，但原理是相同的：将变量粘贴到选择字符串的其余部分，确保在必要时包含引号（使用`shQuote`），然后传递字符串到您选择的 sql 查询函数。

```
query <- paste0("select * from MyTable where TimeCol = ", shQuote(mytime))

result <- fn$sqldf(query) 
```

行尾的分号可能不是必需的。

* * *

正如 Joran 在评论中提到的，`sprintf`也可以使用（如果您的查询字符串中有许多可变组件，可能会提高可读性）：

```
sprintf("select * from MyTable where %s = '%s'", "TimeCol", mytime)
# [1] "select * from MyTable where TimeCol = '6/29/2012 21:05'" 
```

# hibernate - HQL 返回关联联接，如何在 Criteria 中执行此操作？

> ID：13029375
> 
> 赞同：0
> 
> 时间：2012-10-23T11:23:59.970
> 
> 标签：hibernate, hql, criteria

我正在使用 HQL 进行动态查询，但由于参数很多，我相信 Criteria 会更加“可读”。查询如下所示：

```
String queryString = "select u from ReportSalesUnit as r join r.recipients as u where r.id = :reportSalesUnitId";
if ( firstName != null )
{
    queryString += " and lower(u.firstName) like :firstName";
}
if ( lastName != null )
{
    queryString += " and lower(u.lastName) like :lastName";
}
if ( email != null )
{
    queryString += " and lower(u.email) like :email";
}
if ( phoneNr != null )
{
    queryString += " and u.phoneNr like :phoneNr";
}
Query query = session.createQuery( queryString );
if ( firstName != null )
{
    query.setParameter( "firstName", firstName.toLowerCase() + "%" );
}
if ( lastName != null )
{
    query.setParameter( "lastName", lastName.toLowerCase() + "%" );
}
if ( email != null )
{
    query.setParameter( "email", email.toLowerCase() + "%" );
}
if ( phoneNr != null )
{
    query.setParameter( "phoneNr", phoneNr + "%" );
}
query.setParameter( "reportSalesUnitId", reportSalesUnitId ); 
```

老实说，我不知道如何返回与标准相关的联接。我在这里寻找答案，但找不到答案： http: [//docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)，有人可以帮我吗？一点解释会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:40:43.703

标准也可以这样使用：

```
...
if(firstName != null) {   
   criteria.add(Restrictions.and(
      Restrictions.isNotNull("firstName"), Restrictions.eq("firstName", firstName.toLowerCase());
... 
```

看起来，它不会因为许多条件而变得更具可读性。但`Criteria`可以通过这种方式帮助您：

`Criteria`在到达/`Query`创建之前，您应该预先检查 null（或其他异常） 。最后，您将获得如下代码，我想这对您来说是可以接受的：

```
... 
criteria.add(Restrictions.eq("firstName", firstName.toLowerCase()));
criteria.add(Restrictions.eq("phoneNr", phoneNr));
...
criteria.list(); 
```

而且，您可以通过这样的别名创建连接或获取数据：

```
criteria.createAlias("recipients", "recipients", JoinType.LEFT_OUTER_JOIN); 
```

或者

```
criteria.createAlias("recipients", "recipients");
        .setFetchMode("recipients", FetchMode.JOIN);

according to your needs. 
```

# html - 单击任何链接时如何在同一页面（窗口）的框架中打开表单

> ID：13029378
> 
> 赞同：0
> 
> 时间：2012-10-23T11:24:11.287
> 
> 标签：html, wordpress

我正在研究 wordpress 和 bootstrap。我的问题是在我的页面上有一张图片，其中我有不同的社交网站链接和几个页面链接。现在，当用户单击查询链接时，我希望在 iframe 或 div 的同一页面上打开一个表单，并且它应该仅在单击该链接时打开，否则它将保持隐藏状态。请帮帮我。

这是我的标题代码，其中图像放置为pearlIcons01.jpg，所有社交链接和表单链接都映射在其上。

```
<div id="customHeaderRight" class="span8 hidden-phone" align="right"><img src="http://pearlacademy.com/wp/wp-content/uploads/2012/10/pearlIcons01.jpg" border="0" usemap="#Map" />
  <map name="Map" id="Map">
    <area shape="rect" coords="75,37,93,58" href="http://www.facebook.com/PearlAcademyOfficial" target="_blank" />
    <area shape="rect" coords="100,37,117,57" href="https://twitter.com/Pearl_Academy"  target="_blank"/>
    <area shape="rect" coords="124,36,143,58" href="http://www.youtube.com/PearlAcademyIndia"  target="_blank"/>
 <area shape="rect" coords="73,5,94,21" href="http://xyz/enquiry-form" />
    <area shape="rect" coords="99,6,119,22" href="#" />
    <area shape="rect" coords="125,5,148,22" href="#" />
  </map>
</div> 
```

我想打开这个链接上的表格，如上：

```
<area shape="rect" coords="73,5,94,21" href="http://xyz/enquiry-form" /> 
```

帮帮我吧伙计们…………

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:55:19.010

```
<div id="customHeaderRight" class="span8 hidden-phone" align="right"><img src="http://pearlacademy.com/wp/wp-content/uploads/2012/10/pearlIcons01.jpg" border="0" usemap="#Map" />
  <map name="Map" id="Map">
    <area shape="rect" coords="75,37,93,58" href="http://www.facebook.com/PearlAcademyOfficial" target="_blank" />
    <area shape="rect" coords="100,37,117,57" href="https://twitter.com/Pearl_Academy"  target="_blank"/>
    <area shape="rect" coords="124,36,143,58" href="http://www.youtube.com/PearlAcademyIndia"  target="_blank"/>
 <area shape="rect" coords="73,5,94,21" href="http://xyz/enquiry-form" target="myIframe" onclick="document.getElementById('theiframe').styles.display='block';"/>
    <area shape="rect" coords="99,6,119,22" href="#" />
    <area shape="rect" coords="125,5,148,22" href="#" />
  </map>
</div>
<iframe style="display:none;" name="myIframe" id="theiframe"></iframe> 
```

# powershell - 使用参数调用 powersehell

> ID：13029379
> 
> 赞同：1
> 
> 时间：2012-10-23T11:24:13.677
> 
> 标签：powershell, powershell-2.0

我在powershell中有这个

```
if (Test-Path env:\names)
{
    [string[]] $names= (dir env:\names).Value.Split(",") | % { $_.Trim() }
} else {
    [string[]] $names= "peter","mikael","Anders","William"
}

Write-Host -n "names: " ; [string]$names 
```

如果我想从命令提示符调用它，这可能吗？

我试过这个：

```
powershell -ExecutionPolicy RemoteSigned -File MainScript.ps1 -PARAM "Peter,Mikael" 
```

我明白这行不通，因为我正在寻找一个`env:names`，但我怎样才能让它工作？我所追求的是我想发送一个带有名称的参数，并且应该在上面的代码中捕获它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:48:47.200

像那样？

```
param($name)

if (Test-Path env:\names)
{
    $names = $env:names.Split(",") | % { $_.Trim() }
}
else
{
    $names = $name.Split(",") | % { $_.Trim() }
}

 Write-Host -n "names: $names" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:50:16.730

你这里一团糟。首先`env:names`是指环境变量的值`names`，不应该有`\`。

然后，如果您希望脚本接受参数 - 只需添加`param(string[] $names)`为脚本的第一行

如果您想使用参数运行脚本 - 只需启动 powershell 并键入：`full_path_to_script Peter,Mikael`

# objective-c - 我的代码中有预期的“：”语法错误

> ID：13029380
> 
> 赞同：0
> 
> 时间：2012-10-23T11:24:17.183
> 
> 标签：objective-c

我的代码如下：

```
NSString *str1 = @"Name";
NSString *str2 = @"Age";

NSArray *array = [[NSArray alloc] initWithObjects: str1, str2 count:2]; 
```

但是，当我 Build & Run 时，我抛出一个异常，上面写着： Expected ':' right before the 'c' in `count`.

为什么是这样？我试过输入 ':' 虽然我知道这在语法上不正确，然后 Xcode 要求我在之前用 ']' 结束`count`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T13:30:19.163

`initWithObjects:count:`用于 C 数组。在您的情况下，您将希望在最后使用`initWithObjects:`一个`nil`参数：

```
NSString *str1 = @"Name";
NSString *str2 = @"Age";

NSArray *array = [[NSArray alloc] initWithObjects: str1, str2, nil]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T13:35:32.930

如果你刚开始学习 Objective-C，就用最近介绍的最方便的方法：

```
NSArray* array= @[ str1, str2] ; 
```

有关详细信息，请参阅[Xcode 4.4 发行说明中提到的“Objective-C Literals”的详细信息是什么？](https://stackoverflow.com/questions/9347722/what-are-the-details-of-objective-c-literals-mentioned-in-the-xcode-4-4-releas)

# sql - 为什么这个查询在 11g 上运行时会在 10g 上抛出 ORA-00942？

> ID：13029383
> 
> 赞同：-4
> 
> 时间：2012-10-23T11:24:29.207
> 
> 标签：sql, oracle, oracle10g, oracle11g

我在 11g 安装上执行此查询没有问题：

```
SELECT
    PRODUCT_INFOS_idm.FIELD_VALUE "mother_id",
    PRODUCT_INFOS_ep.FIELD_VALUE "product_thickness",
    COIL_INFOS.TIME_STAMP,
    COIL_INFOS.IN_THICKNESS,
    COIL_INFOS.MEASURED_LENGTH,
    COIL_INFOS.MEASURED_WIDTH,
    COIL_INFOS.PARAM_SET_TOP_SIDE,
    COIL_INFOS.PARAM_SET_BOTTOM_SIDE
FROM
    COIL_INFOS
INNER JOIN
    PRODUCT_INFOS PRODUCT_INFOS_idm
    on PRODUCT_INFOS_idm.COIL_ID_SYSTEM=COIL_INFOS.COIL_ID_SYSTEM
    and PRODUCT_INFOS_idm.TIME_STAMP=COIL_INFOS.TIME_STAMP
    and PRODUCT_INFOS_idm.FIELD_NAME='ID bobina'
INNER JOIN  
    PRODUCT_INFOS PRODUCT_INFOS_ep
    on PRODUCT_INFOS_ep.COIL_ID_SYSTEM=COIL_INFOS.COIL_ID_SYSTEM
    and PRODUCT_INFOS_ep.TIME_STAMP=COIL_INFOS.TIME_STAMP
    and PRODUCT_INFOS_ep.FIELD_NAME='Anchura'
WHERE
    (COIL_INFOS.COIL_ID_SYSTEM LIKE '14051800' OR COIL_INFOS.COIL_ID LIKE '14051800') 
```

但是当我的客户（可能有 10g 安装）执行它时，他得到

```
ORA-00942: table or view does not exist 
```

**其他查询显示他有相同的表和列。**以下查询执行没有问题：

```
select count(*) from COIL_INFOS
select count(*) from PRODUCT_INFOS 
```

可能是什么问题？某处是否存在语法错误？我怀疑 Oracle 版本有问题（我已经不得不删除我通常用于列别名的“as”）。Oracle 10g 是否支持表别名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T12:48:32.030

我们可能会得到 ORA-00942 有几个原因。

1.  最明显的一个是，该表在数据库中不存在。这很容易检查数据字典视图，例如 DBA_TABLES。
2.  该表存在，但我们错误地引用它。常见的情况是创建表时使用双引号中的混合大小写名称；发生这种情况时，我们总是必须用双引号中混合大小写的名称来引用表名，因为`EMPLOYEES != "Employees"`.
3.  该表由不同的用户拥有，并且我们的代码在调用它时不包含模式名称（我们也没有同义词）。
4.  该表由另一个用户拥有，并且该用户尚未授予我们对它的权限。
5.  该表由不同的用户拥有，并且该用户已通过角色授予我们对它的权限，但我们希望在存储过程或视图中引用它。在这种情况下，我们必须将权限直接授予我们的用户，因为 Oracle 安全模型就是这样工作的。

鉴于您说“其他查询显示他具有相同的表和列”，我们可以排除第一个选项，可能还有第二个选项。因此，这很可能是缺少同义词或缺少权限的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T13:36:32.080

正如 Bob 在评论中所暗示的那样，问题是由于 Oracle 10g 的错误版本造成的。

有一些服务器使用相同的模式和相同的查询，只有版本 10.2.0.1.0 的服务器有问题。Oracle 专家认为该错误在 10.2.0.4 上不存在，但我无法访问 Oracle 错误数据库。

由于修补服务器对我们的客户来说是不可能的，我们最终通过为这个查询创建一个视图来解决这个错误。

TLDR ：当 Oracle 说某个版本有缺陷并且不应该使用时，就不应该使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:47:58.863

Oracle版本没有问题。您正在使用标准查询，这些查询甚至可以在比 10 更旧的 Oracle 版本中使用。

我怀疑以下一项或多项是正确的：

*   您的 11g 数据库中可能有同义词，但在客户端的 10g 中没有。
*   客户端使用不同的凭据来测试表中的 select count(*)，而不是用于运行查询的凭据。

# android - 网络服务：发布一个 jsonArray

> ID：13029384
> 
> 赞同：1
> 
> 时间：2012-10-23T11:24:33.527
> 
> 标签：android, json, post

我正在尝试发布一个 json 数组（listobjs）：

```
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("data", listobjs.toString()));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, HTTP.UTF_8));
response = client.execute(httppost); 
```

我得到这个服务器响应：

```
11-23 13:14:23.873: E/WebServicesManager(9059): response =500
11-23 13:14:23.873: E/WebServicesManager(9059): response ={"error":{"message":"data is required","type":"Api_Exception","code":201}} 
```

为什么服务器没有得到我的数据 JSONArray？

也许这会有所帮助，这是我在 iphone 上的做法：

```
data=[{"scan_user":"2289","scan_status":"2","scan_date":"2012-10-23 10:29:53","id_participant":"2969113"},{"scan_user":"2280","scan_status":"2","scan_date":"2012-10-23 10:40:53","id_participant":"2969112"}]
NSString * stringToPost =  [NSString stringWithFormat: @"data=%@", [participantsListToPost JSONRepresentation]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:42:27.510

```
public void clickbutton(View v) {
    try {
        // http://androidarabia.net/quran4android/phpserver/connecttoserver.php

        // Log.i(getClass().getSimpleName(), "send  task - start");
        HttpParams httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParams,
                TIMEOUT_MILLISEC);
        HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
        //
        HttpParams p = new BasicHttpParams();
        // p.setParameter("name", pvo.getName());
        p.setParameter("user", "1");

        // Instantiate an HttpClient
        HttpClient httpclient = new DefaultHttpClient(p);
        String url = "http://10.0.2.2:8080/sample1/" + 
                     "webservice1.php?user=1&format=json";
        HttpPost httppost = new HttpPost(url);

        // Instantiate a GET HTTP method
        try {
            Log.i(getClass().getSimpleName(), "send  task - start");
            //
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                    2);
            nameValuePairs.add(new BasicNameValuePair("user", "1"));
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String responseBody = httpclient.execute(httppost,
                    responseHandler);
            // Parse
            JSONObject json = new JSONObject(responseBody);
            JSONArray jArray = json.getJSONArray("posts");
            ArrayList<HashMap<String, String>> mylist = 
                   new ArrayList<HashMap<String, String>>();

            for (int i = 0; i < jArray.length(); i++) {
                HashMap<String, String> map = new HashMap<String, String>();
                JSONObject e = jArray.getJSONObject(i);
                String s = e.getString("post");
                JSONObject jObject = new JSONObject(s);

                map.put("idusers", jObject.getString("idusers"));
                map.put("UserName", jObject.getString("UserName"));
                map.put("FullName", jObject.getString("FullName"));

                mylist.add(map);
            }
            Toast.makeText(this, responseBody, Toast.LENGTH_LONG).show();

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        // Log.i(getClass().getSimpleName(), "send  task - end");

    } catch (Throwable t) {
        Toast.makeText(this, "Request failed: " + t.toString(),
                Toast.LENGTH_LONG).show();
    }
} 
```

另请参阅此链接。 [http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php](http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php)

希望对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:30:24.260

不是`listobjs`作为单个发送，而是`string`循环每个对象并使用`NameValue`Pair 发送数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:31:50.240

您必须改为使用`HTTP POST`请求。这就是错误消息告诉您的内容。

尝试这个

```
HttpParams parameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(parameters, CONNECTION_TIMEOUT);
HttpConnectionParams.setSoTimeout(parameters, SOCKET_TIMEOUT);
HttpClient httpClient = new DefaultHttpClient(parameters);

try {
    HttpPost request = new HttpPost(url);
    StringEntity jsonEntity = new StringEntity(data, "UTF8");
    jsonEntity.setContentType("application/json");
    request.setEntity(jsonEntity);
    HttpResponse httpResponse = mHttpClient.execute(request);

    // Get the response and do anything… 
} catch (UnsupportedEncodingException e) {
    e.printStackTrace();
} catch (ClientProtocolException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

# pdf - PDF - 如果用户未正确填写表格，则阻止/唠叨打印操作

> ID：13029388
> 
> 赞同：1
> 
> 时间：2012-10-23T11:24:42.347
> 
> 标签：pdf, printing

# 情况

公司与客户签订合同。合同的一部分要求客户端提供一些访问它自己的服务器的详细信息。

合同以.doc格式发送给客户，客户需要填写合同信息，签字，打印，扫描后通过电子邮件发回，以便我们处理，直到实物合同通过快递送达。

# 问题

与合同一起，还发送了一条说明，表明所有信息必须以电子方式填写，然后打印。然而，大多数客户只是简单地打印合同，然后在扫描之前手动填写，这使得有时检索其中包含的信息相当困难。

# 解决方案

我们唯一想到的是以 PDF 格式发送合同，其中包含一个可填写的表单和一个脚本，如果未填写表单（或至少在打印过程中唠叨），该脚本将阻止用户打印文档如果无法阻止打印，则带有一些消息）

# 问题

1.  甚至可能吗？如果是这样，我在哪里可以找到示例/资源？
2.  还有其他（更好的）选择吗？

（我找到了一些关于脚本的资源：[PDFScripting.com](http://www.pdfscripting.com/ "PDFScripting.com")和Adob​​e[的 Acrobat JavaScript](http://www.adobe.com/devnet/acrobat/javascript.html "用于 Acrobat 的 JavaScript")。还有其他建议吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:45:27.470

正如您所提到的，您可以为此使用 Adob​​e-JavaScript。

Adobe 的示例代码[Enforcing Required Fields](http://cookbooks.adobe.com/post_Enforcing_Required_Fields-16435.html)可能会有所帮助。

在该页面上，您必须包含在 PDF 文件中的代码如下所示：

```
f = getField(event.target.name)
if (f.value.length == 0)
{    
   f.setFocus()    
   //Optional Message - Comment out the next line to remove
   app.alert("This field is required. Please enter a value.")
} 
```

您需要使用您选择的 PDF 处理库将此代码添加到您的 PDF 文件中，在您的表单中添加一个打印按钮，并在打印之前进行此验证。代码应包装在 Javascript 操作对象中。

您还可以将此代码添加为文档的操作事件，特别是在[“将打印”事件中](http://acrobatusers.com/tutorials/print/entering-document-actions)。

“将打印”事件设置在 PDF 文件目录（根）对象中名为 WP 的条目中。从PDF规范：

**表 8.47 文档目录的附加操作字典中的条目**
**键：** WP
**类型：**字典
**描述：（**可选；PDF 1.4）在打印文档之前要执行的 JavaScript 操作。（名称 WP 代表“将打印”。）

# c# - DataTable Linq 连接多列

> ID：13029390
> 
> 赞同：4
> 
> 时间：2012-10-23T11:24:55.173
> 
> 标签：c#, linq, join, datatable

我在使用 Linq Join 时遇到问题。我想加入 2 个表，它们具有与 n 列相同的结构。我的问题是我不知道这些列的名称，那么如何在 select new 中重写这些列？

表 1：这里我有一些 ID、Name 和 LastName 参数。注释、属性和其余为空

```
 ID    Name   LastName  Comment   Attribute ...     
                         "what"   "ABC"     ...
                         "hello"  "SDE"     ...
 3     lola               
 1              de           
 4     miki      
 ...   ...      ...      ... 
```

表 2：这里与表 1 相同，但在 Comment、Attribute 和其余部分中有一些参数。

```
 ID    Name   LastName  Comment   Attribute ...
                        "what"   "ABC"     ...
                        "hello"  "SDE"     ...
 1              de       "hi"     
 4     miki                      "OKK"
 3     lola             "yo"     "LL" 
```

结果：我想像这样加入表格

```
 ID    Name   LastName  Comment   Attribute ...
                        "what"   "ABC"     ...
                        "hello"  "SDE"     ...
 3     lola               "yo"    "LL" 
 1               de        "hi"   
 4     miki                       "OKK"
 ...   ...      ...      ...       ...     ... 
```

我的代码是：

```
var Result= from tb1 in table1.AsEnumerable()
            join tb2 in tabl2.AsEnumerable()
            on new
            {                
             Name = tb1.Field<String>("Name"),
             LastName = tb1.Field<String>("LastName"),
             } equals new
            {
             Name=tb2.Field<String>("Name"),
             LastName=tb2.Field<String>("LastName"),
             }
            into grp1
            from tb3 in grp1.DefaultIfEmpty()
            select new
    {
     ID = tb1.Field<String>("ID"),
     Name = tb1.Field<String>("Name") ,
     LastName = tb1.Field<String>("LastName"),
     Comment = tb3!= null ? tb3.Field<String>("Comment") : null,
     Attribute= tb3!= null ? tb3.Field<String>("Attribute") : null,
     ...
     // Here should be next Columns Name but don't know how to put there

     }; 
```

* * *

我尝试使用此代码，但我的编译器刚刚挂掉，不知道为什么

```
 for (int i = 2; i < table1.Rows.Count; i++)
        {
            foreach (DataRow dr in table2.Rows)
            {
                if ((table1.Rows[i]["Name"].ToString() == dr["Name"].ToString())&&table1.Rows[i]["LastName"].ToString() == dr["LastName"].ToString())
                {
                    table1.Rows.RemoveAt(i);
                    table1.ImportRow(dr);

                }
            }
        }
        dataGridView1.DataSource = table1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:20:04.637

对于table1中的每一个row1，如果table2中有匹配的row2，则使用row2。否则，使用第 1 行。

```
var newTable = table1.Clone();
foreach (DataRow row1 in table1.Rows) // To skip the first 2, use table1.Rows.Cast<DataRow>().Skip(2)
{
    var row = table2.Rows.Cast<DataRow>().FirstOrDefault(row2 => 
                row1["Name"].ToString() == row2["Name"].ToString() &&
                row1["LastName"].ToString() == row2["LastName"].ToString()) ?? row1;
    newTable.ImportRow(row);
}
dataGridView1.DataSource = newTable; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:17:57.887

像你一样加入然后将三个已知字段从 table1 的行复制到 table2 的行怎么样？

```
var copiedTable2 = table2.Copy(); // Copy table2 if you don't want it to be modified

var items = from tb1 in table1.AsEnumerable()
            join tb2 in copiedTable2.AsEnumerable()
            on new
            {                
                Name = tb1.Field<String>("Name"),
                LastName = tb1.Field<String>("LastName"),
            } equals new
            {
                Name=tb2.Field<String>("Name"),
                LastName=tb2.Field<String>("LastName"),
            }
            into grp1
            from tb3 in grp1.DefaultIfEmpty()
            select new
            {
                ID = tb1.Field<String>("ID"),
                Name = tb1.Field<String>("Name") ,
                LastName = tb1.Field<String>("LastName"),
                Row = tb3 ?? table2.NewRow();
            };

 foreach(var item in items)
 {
     item.Row.SetField<String>("ID", item.ID);
     item.Row.SetField<String>("Name", item.Name);
     item.Row.SetField<String>("LastName", item.LastName);
 }

 var rows = items.Select(x => x.Row);

 // How to set the rows as a DataGridView's DataSource
 var result = table2.Clone();
 foreach(var row in rows)
 {
     result.Rows.Add(row.ItemArray);
 }
 dataGridView.DataSource = result; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-02T11:52:23.263

试试这个，不需要使用循环

```
var resultTable = from tb1 in table1.AsEnumerable()
                   join tb2 in tabl2.AsEnumerable()
                   on tb1["Name"].ToString() equals tb2["Name"].ToString()
                   where tb1["LastName"].ToString() == tb2["LastName"].ToString()
                   select r;

 DataTable resultTable =result.CopyToDataTable(); 
```

# c - C 结构帮助 - 我迷路了 / BSD 套接字

> ID：13029393
> 
> 赞同：0
> 
> 时间：2012-10-23T11:24:59.853
> 
> 标签：c, sockets, struct

我是C的新手，有点迷茫。

那我在做什么？

*   一个多线程的网络服务器。

我想做什么？

*   将带有数据的结构传递给线程函数。

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <sys/wait.h>
#include <signal.h>
#include <netdb.h>
#include <net/ethernet.h>
#include <net/if.h>
#include <netinet/in_systm.h>
#include <netinet/ip.h>
#include <netinet/ip_icmp.h>
#include <netinet/ip_fw.h>
#include <pthread.h>
#define MYPORT 8080
#define BACKLOG 36600

struct thread_data {
    int new_fd;
    struct address_data adata;
};
struct address_data {
    unsigned long s_addr;
};
//---------------------------httpRequest Method------------------------ 
void* httpRequest(void* data) 
{ 
    struct thread_data me;
    me = *((struct thread_data*)data);

   printf("struct ip: %s\n", inet_ntoa(me.adata));
   printf("struct fd: %d\n", me.new_fd);

   pthread_exit(NULL);  //Existing from the threads. 
}
//**************************************************************************************************************** 
//Main Method------------------------------------------------------------------
int main (void) 
{ 
    int sockfd, new_fd;  // listen on sock_fd, new connection on new_fd 
    struct sockaddr_in my_addr;    // my address information 
    struct sockaddr_in their_addr; // connector's address information 
    struct thread_data td;
    int sin_size; 
    struct sigaction sa; 
    int yes=1;
    pthread_t p_thread[3000]; 
    int thr_id,i=0;   

    if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1) { 
        perror("socket"); 
        exit(1); 
    }

    if (setsockopt(sockfd,SOL_SOCKET,SO_REUSEADDR,&yes,sizeof(int)) == -1) { 
        perror("setsockopt"); 
        exit(1); 
    }

    // bzero((char *) &my_addr, sizeof(my_addr)); 
    my_addr.sin_family = AF_INET;         // host byte order 
    my_addr.sin_port = htons(MYPORT);     // short, network byte order 
    my_addr.sin_addr.s_addr = INADDR_ANY; // automatically fill with my IP 
    memset(&(my_addr.sin_zero), '\0', 8); // zero the rest of the struct

    if (bind(sockfd, (struct sockaddr *)&my_addr, sizeof(struct sockaddr))== -1) { 
        perror("bind"); 
        exit(1); 
    }

    if (listen(sockfd, BACKLOG) == -1) { 
        perror("listen"); 
        exit(1); 
    }
    sa.sa_handler = sigchld_handler; // read all dead processes 
    sigemptyset(&sa.sa_mask); 
    sa.sa_flags = SA_RESTART; 
    if (sigaction(SIGCHLD, &sa, NULL) == -1) { 
        perror("sigaction"); 
        exit(1); 
    }

    while(1) 
    {  // main accept() loop 
        sin_size = sizeof(struct sockaddr_in); 
        if ((new_fd = accept(sockfd, (struct sockaddr *)&their_addr,&sin_size)) == -1) { 
            perror("accept"); 
            continue; 
        } 
    printf("Got connection from %s\n",inet_ntoa(their_addr.sin_addr));

    td.new_fd = (int *)&new_fd;
    td.adata = their_addr.sin_addr;

        //Creates threads.
        thr_id = pthread_create(&p_thread[i++],NULL,httpRequest,(void*)&td); 
   }
    return 0; 
} 
```

当我获得连接时，程序意外退出。

如您所见，我已将**thread_data 结构**作为**sockaddr_in**的模型。如果你能指出我哪里出错了，那就太好了。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:28:01.157

可能还有其他错误。但至少：

```
int main (void) 
{ 
    struct thread_data td;

    while(1) 
    {
       thr_id = pthread_create(&p_thread[i++],NULL,httpRequest,(void*)&td); 
    }
    return 0; 
} 
```

你只有一份 td. 然而，您将同一个线程传递给多个线程。所以在第二个请求中，你覆盖了你给第一个线程的同一个 td。

# c++ - 使用for循环从文件c ++中间读取输入

> ID：13029399
> 
> 赞同：2
> 
> 时间：2012-10-23T11:25:18.853
> 
> 标签：c++, file-io, input, output

我正在尝试编写一个模拟书店程序。该程序是从一个输入文件中读取数据并将其写入一个输出文件。我有几个限制。我只能使用一个输入文件和一个输出文件。我必须使用两个 for 循环。文件中列出的五位客户每人一本，他们将要购买的每一本书都有一本，最多可能有 5 本书。

第一个 for 循环输入客户信息和要购买的书籍数量（因此下一个 for 循环将知道要迭代多少次）。第二个循环获取有关书籍的信息。

问题：我知道如何防止输出文件覆盖自身，但是如何让输入文件从循环的最后一次迭代停止的地方读取。

出于某种原因，当我尝试发布我的代码时，它正在重新格式化它，并添加不应该存在的字符。但这里是我想要做的伪代码。

```
for(count=1; count<=5; count++)
   {
   fin.open("input.txt");
   fin << user information(including name, address and number of books)
   fout.open("output.txt" ios::app);
   fout >> user information

   for(count1=1; count1<=numbbooks; count1++)
      {
      fin << book information(Name, Author, Price)
      fout >> book information
      } 
```

我知道如何使用 getline、fin 来接收数据，但是在每个循环的第一次迭代之后，它开始从文件的开头读取。我需要它从上一次迭代完成的地方读取。我了解 ios:app 的输出。

样本输入文件

```
user name
address
number of books
book1
price1
book2
user name2
address
number of books
book2.1
price2.1 
```

等等。实际上还有比这更多的信息。任何帮助将不胜感激。对不起，新手的问题。我在这里发帖之前搜索和搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:28:01.863

简单不要每次循环打开和关闭它。在外循环之前打开一次，在同一个循环之后关闭一次。

当您打开文件时，读/写位置通常设置为文件的开头（您已经发现 ios::app 是一个例外）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:27:47.080

你有你的`<<`和`>>`符号错误的方式。

为 UserInformation 和 BookInformation 创建一个结构（或类），然后创建这些重载：

```
std::ostream& operator<<( std::ostream& os, const UserInformation& );
std::istream& operator>>( std::istream& is, UserInformation& );
std::ostream& operator<<( std::ostream& os, const BookInformation& );
std::istream& operator>>( std::istream& is, BookInformation& ); 
```

其中每一个都将读取或写入您的结构成员。

在您的外部循环中，您也应该只读取/写入，而不是打开文件，因此将它们移到循环之外：

```
fin.open("input.txt");         
fout.open("output.txt" ios::app);      

// verify both fin and fout worked correctly then
UserInformation userInfo;
while( fin >> userInfo ) // or use a count if you only want to read a limited number
{
     // continue with reading books and outputting..
} 
```

# java - Java中十进制和 十六进制之间的转换

> ID：13029400
> 
> 赞同：0
> 
> 时间：2012-10-23T11:25:22.250
> 
> 标签：java

假设我的字节值为 0x12（十进制 18）。我需要将其转换为十进制 12。我是这样做的：

```
byte hex = 0x12;
byte dec = Byte.parseByte(String.format("%2x", hex));
System.out.println(dec); // 12 
```

有没有更好的方法（例如不使用字符串和解析）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:27:27.917

试试这个：

```
byte dec = (byte)(hex / 16 * 10 + hex % 16); 
```

请注意，它假定原始输入是有效的[BCD](http://en.wikipedia.org/wiki/Binary-coded_decimal)编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:46:46.857

如果要解释二进制编码的十进制并转换为二进制，则可以转换为十六进制字符串并解释为十进制字符串。您的方法是一种完全有效的方法（不过要小心，它`byte`是用 Java 签名的。

在此处阅读二进制编码的十进制：[http ://en.wikipedia.org/wiki/Binary-coded_decimal](http://en.wikipedia.org/wiki/Binary-coded_decimal)

如果要避免字符串转换，可以将每个半字节（四个字节）分开并乘以正确的值：

```
byte hex = 0x12;

if( hex&15 > 9 || hex>>>4 > 9)
 throw new NumberFormatException(); //check for valid input

byte dec = (byte)((hex & 15) + 10*(hex>>>4 & 15)); 
```

如果您的输入比一个字节宽，则此方法很容易失控，因为您需要分别处理每个半字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:32:21.700

十六进制到十进制 - Integer.parseInt(str,16)

十进制到十六进制 - Integer.toHexString(195012)

# php - 狮身人面像按标签搜索顺序

> ID：13029412
> 
> 赞同：0
> 
> 时间：2012-10-23T11:26:02.053
> 
> 标签：php, mysql, search, sphinx

我有 2 张桌子

```
Table 1: Profiles table: p_id, p_title, p_presentation, p_date

Table 2: Tags table: tag_id, profile_id, tag_text 
```

我想检查标签以匹配搜索：

例如：标签：汽车；红色汽车；大车

当我搜索“汽车”时，我只想要完全匹配。我不在乎“红色汽车”标签。

其余的我需要一个正常的搜索（SPH_MATCH_EXTENDED2），例如。

所以我想显示带有确切标签的配置文件（比如说 20 个配置文件结果），然后是下一个结果，例如按 p_date 排序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:29:52.583

从[狮身人面像文档](http://sphinxsearch.com/docs/2.0.6/extended-syntax.html)：

例如，查询“^hello world$”（带有引号，因此结合了短语运算符和开始/结束修饰符）将只匹配包含至少一个字段正好具有这两个关键字的文档。

您可以使用 start 和 end 修饰符来获得确切的结果。将此与报价一起使用。

```
"^car$" 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:42:14.283

我是怎么做到的...

```
sql_query = SELECT p_id, p_title, ..., \
            GROUP_CONCAT(tag_id) AS tag_ids, \
            CONCAT('_SEP_ ',GROUP_CONCAT(tag_text SEPERATOR ' _SEP_ '),' _SEP_') AS tag_text \
            FROM Profiles LEFT JOIN Tags ON (profile_id=p_id)
sql_attr_multi = uint tag_ids from field; 
```

然后您可以使用短语运算符来搜索确切的标签，例如

```
"_SEP_ car _SEP_" 
```

与“大车”不匹配

字段开始/结束修饰符不起作用，因为每个文档可以有多个标签。

# sql-server - Sql Server 表结构

> ID：13029413
> 
> 赞同：0
> 
> 时间：2012-10-23T11:26:02.013
> 
> 标签：sql-server, sql-server-2008, primary-key, clustered-index

我有以下要上传的数据：

```
(Pair)    (Date)    (Time)       (Bid)   (Ask)
EurUsd  01/01/2012  18:04:01    1.55037 1.55137
EurUsd  01/01/2012  18:04:20    1.55018 1.55118
EurUsd  01/01/2012  18:04:22    1.55031 1.55131
EurUsd  01/01/2012  18:04:36    1.55045 1.55145
EurUsd  01/01/2012  18:04:40    1.55058 1.55158
EurUsd  01/01/2012  18:04:40    1.5508  1.5518

GbpUsd  01/01/2012  18:06:11    1.55097 1.55197
GbpUsd  01/01/2012  18:06:22    1.55117 1.55217
GbpUsd  01/01/2012  18:06:24    1.55128 1.55228
GbpUsd  01/01/2012  18:06:38    1.55098 1.55198 
```

数据类型如下：Nchar(6)、Date、Time、Decimal、Decimal。

不幸的是，我不能保证这些行在一分钟内都是唯一的。我还将每天和其他对向此表添加数据。

问题1）。为上述数据设置 PK 的最佳方法是什么。我假设我应该只设置一个名为“Id”的新列，类型为 BigInt，并将其“Is Identity”设置为 Yes？然后将PK设置为“Id”？

问题2）。聚集索引，基于“对”，“日期”，“时间”？

问题 3）。我假设如果我在表中设置一个“Id”列，我需要对我用来上传数据的任何 sqlbulkcopy 操作进行 ColumnMapping？或者，一旦设置了“Is Identity”属性，就无法将数据加载到列中？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:26:44.447

1.要设置PK，我建议您可以使用GUID（唯一标识符）并使用NEWSEQUENTIALID（）在您的表中自动填充数据。（这将成为聚集索引键）

2.我想在 ("Pair","Date", "Time") 列的集合上不需要聚集索引。如果您在 where 子句中经常使用这些列中的任何一个，那么我更喜欢使用非聚集索引那些列。

3.当涉及到 sqlbulkcopy - 您可以映射您想要在表中插入数据的唯一列。

# c# - 从 SQL 服务器（C#/ASP.Net）使用 Site.Master 中的多条件搜索栏/按钮时遇到问题

> ID：13029418
> 
> 赞同：0
> 
> 时间：2012-10-23T11:26:25.587
> 
> 标签：c#, asp.net, sql-server-2008

大家好，我在将变量从 Site.Master 转移到另一个窗口时遇到了一点问题，目的是使搜索功能可以从整个 asp.net Web 应用程序中访问...

与 Site.Master 相关的代码：

```
<div class="search">
        <asp:Label ID="LandID" runat="server" Text="LandID"/>
        &nbsp;<asp:TextBox ID="txtSearch" runat="server" />
        &nbsp;<asp:Label ID="CarBrand" runat="server" Text="CarBrand" />
        &nbsp;<asp:TextBox ID="txtSearch2" runat="server" />
        &nbsp;<asp:Label ID="Model" runat="server" Text="Model"/>
        &nbsp;<asp:TextBox ID="txtSearch3" runat="server" />
        &nbsp;<asp:Button ID="cmdSearch" runat="server" Text="Search" Style="width: 100px" OnClick="cmdSearch_Click" />
</div> 
```

Site.Master.Cs 的代码：

```
public static string Text { get; set; }
public static string Text2 { get; set; }
public static string Text3 { get; set; }
protected void Page_Load(object sender, EventArgs e)
{

}
protected void cmdSearch_Click(object sender, EventArgs e)
{
    Text = txtSearch.Text;
    Text2 = txtSearch2.Text;
    Text3 = txtSearch3.Text;
    Response.Redirect("search.aspx");
} 
```

search.aspx 中的代码：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource1"
    OnSelectedIndexChanged="GridView1_SelectedIndexChanged" DataKeyNames="ID">
    <Columns>
        <asp:CommandField ShowSelectButton="True" />
        <asp:BoundField DataField="ID" HeaderText="ID" SortExpression="ID" InsertVisible="False"
            ReadOnly="True" />
        <asp:BoundField DataField="LandID" HeaderText="LandID" SortExpression="LandID" />
        <asp:BoundField DataField="Bilmaerk" HeaderText="Bilmaerk" SortExpression="Bilmaerk" />
        <asp:BoundField DataField="Model" HeaderText="Model" SortExpression="Model" />
        <asp:BoundField DataField="Variant" HeaderText="Variant" SortExpression="Variant" />
        <asp:BoundField DataField="StartYear" HeaderText="StartYear" SortExpression="StartYear" />
        <asp:BoundField DataField="SlutYear" HeaderText="SlutYear" SortExpression="SlutYear" />
        <asp:BoundField DataField="Volumen" HeaderText="Volumen" SortExpression="Volumen" />
        <asp:BoundField DataField="MaxDrej" HeaderText="MaxDrej" SortExpression="MaxDrej" />
        <asp:BoundField DataField="AntalCylindre" HeaderText="AntalCylindre" SortExpression="AntalCylindre" />
        <asp:BoundField DataField="TopHast" HeaderText="TopHast" SortExpression="TopHast" />
        <asp:BoundField DataField="Acceleration" HeaderText="Acceleration" SortExpression="Acceleration" />
        <asp:BoundField DataField="Beskrivelse" HeaderText="Beskrivelse" SortExpression="Beskrivelse" />
        <asp:BoundField DataField="Effekt" HeaderText="Effekt" SortExpression="Effekt" />
        <asp:BoundField DataField="Picture" HeaderText="Picture" SortExpression="Picture" />
    </Columns>
</asp:GridView>
<selectparameters>
<asp:ControlParameter ControlID="<%=Text1 %>"></asp:ControlParameter>
<asp:ControlParameter ControlID="<%=Text2 %>"></asp:ControlParameter>
<asp:ControlParameter ControlID="<%=Text3 %>"></asp:ControlParameter>
</selectparameters>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:CarConnectionString %>"
    SelectCommand="SELECT * FROM [Bil] WHERE (([LandID] LIKE '%' +@LandID+ '%') AND ([Bilmaerk] LIKE '%' +@Bilmaerk+ '%') AND ([Model] LIKE '%' +@Model+ '%'))">
    <SelectParameters>
        <asp:ControlParameter ControlID="Text1" Name="LandID" PropertyName="Text" Type="String"
            DefaultValue="%" />
        <asp:ControlParameter ControlID="Text2" Name="Bilmaerk" PropertyName="Text" Type="String"
            DefaultValue="%" />
        <asp:ControlParameter ControlID="Text3" Name="Model" PropertyName="Text" Type="String"
            DefaultValue="%" />
    </SelectParameters>
</asp:SqlDataSource> 
```

search.aspx.cs 中的相关代码：

```
 public partial class search : System.Web.UI.Page
   {
protected string Text1 { get; set; }
protected string Text2 { get; set; }
protected string Text3 { get; set; }

protected void Page_Load(object sender, EventArgs e)
{
    Text1 = SiteMaster.Text;
    Text2 = SiteMaster.Text2;
    Text3 = SiteMaster.Text3;
}
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    Constructor.SelectedCar = GridView1.SelectedRow.Cells[1].Text;
    Response.Redirect("Selected.aspx");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:40:58.323

为什么不使用会话将数据从一页传输到另一页..？它很简单，

```
//this is how you will create the Session on master page 
{
   Session["text"] = txtearch.Text;
   Session["Text2"] = txtSearch2.Text;
   Session["Text3"] = txtSearch3.Text;
}

on another page just use it like
{
   string a = Session["text"].ToString();
   string b = Session["text2"].ToString();
   string c = Session["text3"].ToString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:55:46.913

尝试使用如下代码的 HTTP GET 方法：

## 在您的 Site.Master.Cs 上

```
protected void cmdSearch_Click(object sender, EventArgs e)
{
    Text = txtSearch.Text;
    Text2 = txtSearch2.Text;
    Text3 = txtSearch3.Text;
    Response.Redirect(string.Format("search.aspx?txtSearch={0}&txtSearch2={1}&txtSearch3={2}", Text, Text2, Tex3));
} 
```

## 在你的 search.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
{
    Text1 = Request["txtSearch"];
    Text2 = Request["txtSearch2"];
    Text3 = Request["txtSearch3"];
} 
```

您还可以通过调用将 GET 参数添加到母版页控件：

```
(Master.FindControl("txtSearch") as TextBox).Text = Request["txtSearch"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:51:36.160

在基于页面生命周期的主页面加载或页面预渲染时，最初将不同搜索字段的文本框的值分别存储到会话变量中。

然后您可以通过单击搜索按钮访问这些变量，然后您可以继续执行基本步骤，例如进入数据库并搜索相关字段等。

通过使用这些会话变量，您可以在任何页面的任何位置访问它们，除非您更改值....

```
 public void search(object sender ,EventArgs e)
    {
        string Search = session["search"].toString();
        Search =  Search + "%";
        SqlDataSource1.SelectParameters.Clear();
        SqlDataSource1.SelectParameters.Add("search", Search);
            Search = "%" + Search;//for user name ,user email,languages made the search criteria as anywhere in the word for others it is starting letter
            SqlDataSource1.SelectParameters.Clear();//again we have to clear and add since search is changed
            SqlDataSource1.SelectParameters.Add("search", Search);
            SqlDataSource1.SelectCommand = "SELECT [UserID], [UserName], [UserEmail], [UserContact], [UserAddress], [Gender], [Languages], [Status], [Passwords],[Image] FROM [Users_raghu] where [UserName] like @search";
    } 
```

这是您可以在此处参考的示例我只给了您一个搜索变量在您的情况下您必须采用 3 个会话变量并继续进行

希望这会有所帮助：D

# django - “NoneType”对象没有属性“get_server_msg”，Socketio（与 Django 聊天）

> ID：13029423
> 
> 赞同：1
> 
> 时间：2012-10-23T11:27:06.200
> 
> 标签：django, sockets, websocket

我是 django 的新手，我尝试使用 socketio 实现聊天。我使用了://github.com/stephenmcd/django-socketio 并遵循了本教程：[http ://codysoyland.com/2011/feb/6/evented-django-part-one-socketio-and-gevent/](http://codysoyland.com/2011/feb/6/evented-django-part-one-socketio-and-gevent/)

该示例运行良好。现在我想将此聊天集成到我的 django 应用程序的模板中。我没有找到任何关于那个的教程。

所以我试着举个例子，我把 html 放在我的模板中，我在我的视图中使用了 .py。

所以这是我的views.py中产生问题的部分：

```
buffer = []
socketio = request.environ['socketio']
if socketio.on_connect():
    socketio.send({'buffer': buffer})
    socketio.broadcast({'announcement': socketio.session.session_id + ' connected'})

while True:
    message = socketio.recv()

    if len(message) == 1:
        message = message[0]
        message = {'message': [socketio.session.session_id, message]}
        buffer.append(message)
        if len(buffer) > 15:
            del buffer[0]
        socketio.broadcast(message)
    else:
        if not socketio.connected():
            socketio.broadcast({'announcement': socketio.session.session_id + '  disconnected'})
            break 
```

但是当我转到我的页面时，我收到以下错误消息：

“NoneType”对象没有属性“get_server_msg”

```
 Exception Type:  AttributeError
   Exception Value:'NoneType' object has no attribute 'get_server_msg'
   Exception Location:  /Users/marc-antoinelacroix/virtualenv/lib/python2.7/site- packages/socketio/protocol.py in recv, line 41 
```

你对如何解决这个问题有任何想法吗？谢谢，

# php - 为身份验证所需的操作显示登录 JS 弹出窗口

> ID：13029426
> 
> 赞同：0
> 
> 时间：2012-10-23T11:27:10.383
> 
> 标签：php, javascript, html, ajax, kohana

我想显示一个登录弹出窗口，当用户单击任何需要用户登录的按钮/链接时，由 JS 处理的覆盖。例如：如果用户尝试在未登录的情况下发表评论，则单击帖子时我必须显示这个弹出窗口。

这不是 ajax 调用，我可以根据服务器响应显示弹出窗口。

有没有办法做到这一点？也许通过检查状态码或类似的东西？

挑战是，当用户登录时，特定操作会将用户带到另一个页面，但是当用户未登录时，我想禁止此操作，而是在同一页面中显示登录弹出窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:49:29.443

小心，即使在 chrome 中，您也可以直接编辑 javascript，只需右键单击页面 > 检查元素 > 资源 > javascript，然后输入您的更改，绕过您的检查。请记住，您使用它只是为了增加用户体验，但请确保您的 php 或任何服务器端脚本检查有效会话。

因此，假设您正在处理这个问题，如果您向按钮/链接添加一个类，如下所示：

```
<a href="go_to_post.php" class="requires_login">Post Comment</a>
<form><input type="submit" class="requires_login" value="Post Comment" /></form> 
```

例如，您可以使用 javascript 或 jquery：

```
$(document).ready(function(){
  var valid_session='<?php echo (isset($_SESSION['id']) ? 'true':'false'); ?>';
  $('.requires_login').on('click',function(event){
    if (valid_session=='false'){
      event.preventDefault();
      alert('open popup instead');
      //for instancce, $('#my_popup').show(); if you have:
      //<div id="my_popup">You must be logged in first!</div>
    }
  });
}); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:53:19.030

最简单的方法是在需要登录的页面上重定向，您可以使用`$this->response->redirect('auth/login');`

如果您真的坚持使用 js 弹出窗口，您要么必须使用 AJAX，要么可以在视图中编写以下内容：

```
<script language="javascript">
var loggedIn = <?= Auth::instance()->logged_in() ? "true" : "false" ?>
</script> 
```

如果用户在重定向之前登录，您必须检查每个操作。这种方法的另一个问题是它不处理会话超时。

# simd - 使用 SIMD 指令避免无效的内存加载

> ID：13029427
> 
> 赞同：2
> 
> 时间：2012-10-23T11:27:11.270
> 
> 标签：simd, altivec

我正在使用 SIMD 加载指令从内存中加载元素，假设使用 Altivec，假设地址对齐：

```
float X[SIZE];
vector float V0;
unsigned FLOAT_VEC_SIZE = sizeof(vector float);
for (int load_index =0; load_index < SIZE; load_index+=FLOAT_VEC_SIZE)
{
    V0 = vec_ld(load_index, X);
    /* some computation involving V0*/
} 
```

现在如果 SIZE 不是 FLOAT_VEC_SIZE 的倍数，那么 V0 可能在最后一次循环迭代中包含一些无效的内存元素。避免这种情况的一种方法是通过一次迭代减少循环，另一种方法是屏蔽潜在的无效元素，这里还有其他有用的技巧吗？考虑到上述内容是一组嵌套循环的最内层。因此，任何额外的非 SIMD 指令都会带来性能损失！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:55:37.990

理想情况下，您应该将数组填充到 4 个元素的倍数`vec_step(vector float)`（即 4 个元素的倍数），然后从 SIMD 处理中屏蔽掉任何其他不需要的值，或者使用标量代码来处理最后几个元素，例如

```
const INT VF_ELEMS = vec_step(vector float);
const int VEC_SIZE = (SIZE + VF_ELEMS - 1) / VF_ELEMS; // number of vectors in X, rounded up
vector float VX[VEC_SIZE];   // padded array with 16 byte alignment
float *X = = (float *)VX;    // float * pointer to base of array

for (int i = 0; i <= SIZE - VF_ELEMS; i += VF_ELEMS)
{                            // for each full SIMD vector
    V0 = vec_ld(0, &X[i]);
    /* some computation involving V0 */
}
if (i < SIZE)                // if we have a partial vector at the end
{
#if 1                        // either use SIMD and mask out the unwanted values
    V0 = vec_ld(0, &X[i]);
    /* some SIMD computation involving partial V0 */
#else                        // or use a scalar loop for the remaining 1..3 elements
    /* small scalar loop to handle remaining points */
#endif
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:36:50.057

有时零填充不是一个选项，就像 const 数组一样。另一方面，添加标量代码会导致向量和标量结果相互混合，例如在写回计算结果时；屏蔽不需要的值似乎是一个更好的解决方案。请注意，这假定地址为 16 字节对齐。玩具示例，清除 SIMD 向量的最后三个元素

```
vector bool int V_MASK = (vector bool int) {0,0,0,0};
unsigned int all_ones = 0xFFFFFFFFFFFFFFFF;
unsigned int * ptr_mask = (unsigned int *) &V_MASK;
ptr_mask[0]= all_ones;
vector float XV = vec_ld(0,some_float_ptr);
XV = vec_and(XV,V_MASK); 
```

# eclipse - 使用 ArrayAdapter 在列表视图上绘制可绘制布局

> ID：13029429
> 
> 赞同：0
> 
> 时间：2012-10-23T11:27:17.137
> 
> 标签：eclipse, listview, drawable, android-arrayadapter

如何在布局中设置一个可绘制对象以使用列表视图？这是我的代码和功能，但我无法点击项目：

```
public class ListMobileActivity extends Activity {

static final String[] Ristoranti = new String[] { "Osteria Mingot", "Cecchini", "Barrique", "Mediterraneo"};

ListView listView1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);

    ListView listView1 = (ListView) findViewById(R.id.listView);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.list_mobile, R.id.label, Ristoranti);

    listView1.setAdapter(adapter);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:26:12.173

如果我扩展 Activity 我可以设置我的可绘制对象，如果我扩展 ListActivity 我可以单击项目但可绘制对象出现在每个项目中

```
protected void onItemClick(ListView l, View v, int position, long id)  {

    //get selected items
//  String selectedValue = (String) getListAdapter().getItem(position);
    //Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();

} 
```

# vim - vim - 映射键以编辑颜色方案和语法文件

> ID：13029430
> 
> 赞同：1
> 
> 时间：2012-10-23T11:27:17.460
> 
> 标签：vim, syntax, file-type, color-scheme

我已经映射`<Leader>ev`到打开`.vimrc`编辑使用：

```
nmap <Leader>ev :e $MYVIMRC<CR> 
```

我现在希望映射`<Leader>ec`到编辑当前使用的`colorscheme`文件，也映射`<Leader>es`到编辑当前的`filetype`语法文件。我不想硬编码路径（或部分路径），因为我将在环境之间移动。它将帮助我在编辑过程中快速调整颜色/语法。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:56:37.633

Vim 加载配色方案、插件等的路径由`'runtimepath'`设置确定。该`globpath()`函数可以从中执行查找。通过第一个匹配，我们将获得当前颜色方案的路径：

```
:echo get(split(globpath(&runtimepath, 'colors/' . g:colors_name . '.vim'), "\n"), 0, '') 
```

可以对文件类型插件做类似的事情；当前一个在`&filetype`.

要将路径插入到映射中，可以使用`<C-R>=`（插入寄存器内容，与表达式寄存器一起使用）：

```
:nnoremap <Leader>ec :edit <C-R>=get(split(globpath(&runtimepath, 'colors/' . g:colors_name . '.vim'), "\n"), 0, '')<CR><CR> 
```

# php - 比较php中的日期

> ID：13029436
> 
> 赞同：0
> 
> 时间：2012-10-23T11:27:37.200
> 
> 标签：php

在以下 php 代码中，我试图仅显示上个月存储的 products.xml 文件中的那些产品。但是我的代码不起作用。请帮助我获得正确的输出。我还需要展示过去 24 小时和上周存储的产品。

```
$current_month = date("m");
$last_month = date('m', strtotime(date('-m')." -1 month"));

$xml = simplexml_load_file("products.xml");

$products = array();
foreach ($xml->product as $product) {
   if ($product->date('m') == $last_month) {
      $products[] = array( 'name' => (string)$product->name,
                           'details' => (string)$video->details );
   }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:33:47.470

Strtotime 比你想象的要好。例如，这段代码；

```
if (date('m') > date('m', strtotime('last month')))
    echo true;
else
    echo false; 
```

当前将输出“true” - 因为上个月是 09，而本月是 10。

但是如果这个月是 01，上个月是 12 呢？那么这将是错误的。我建议你也比较一下年份。

编辑：如果这不是问题，并且您只想针对最近添加的内容进行评估，那应该没问题。但是如果你只比较上个月的数据，你会在后年遇到问题，除非你的导入数据只包含今年的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:40:42.143

尝试

```
 $last_month = date('m', strtotime("-1 month"));

 $xml = simplexml_load_file("products.xml");

$products = array();
foreach ($xml->product as $product)
 {
  if ($product->date('m') == $last_month)
   {
$products[] = array(
'name'=>(string)$product->name,
'details'=>(string)$video->details,
    );
   }    
} 
```

# ios - 移动 Web 应用程序：在 iOS 上下载附件

> ID：13029437
> 
> 赞同：0
> 
> 时间：2012-10-23T11:27:42.723
> 
> 标签：ios, mobile-safari, mobile-website

在我的移动网络应用程序中，我有一个用户可以查看附件的页面。附件可以是任何类型的文件（jpg、png、txt、doc、zip 等）。查看附件操作采用`<a>`标记的形式，指向处理请求的 aspx 文件。
**HTML：**

```
<a class="attachBtn" href="_layouts/ViewFile.aspx?messageAttachmentInstanceId={some id}"></a> 
```

**查看文件.aspx：**

```
public partial class ViewFile : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            System.IO.BinaryWriter bw = null;
            System.IO.MemoryStream ms = null;
            System.IO.StreamReader sr = null;

            try
            {

                string contentType = string.Empty;
                byte[] content = null;
                string fileName = string.Empty;

                if (!string.IsNullOrEmpty(Request.QueryString["messageAttachmentInstanceId"]) &&
                   !string.IsNullOrEmpty(Request.QueryString["messageInstanceId"]))
                {

                    int messageInstanceId = Int32.Parse(Request.QueryString["messageInstanceId"]);
                    Guid attachmentInstanceId;
                    GuidUtil.TryParse(Request.QueryString["messageAttachmentInstanceId"], out attachmentInstanceId);

                    MessageInstance messageInstance = WorkflowEngineHttpModule.Engine.GetService<IMessagingService>()
                        .GetMessageInstance(messageInstanceId);

                    if (messageInstance != null)
                    {
                        MessageAttachmentInstance attachmentInstnace = messageInstance.Attachments[attachmentInstanceId];
                        contentType = attachmentInstnace.ContentType;
                        fileName = attachmentInstnace.FileName;
                        content = attachmentInstnace.Content;
                    }
                }
                this.Response.ContentType = contentType;
                string headerValue = string.Format("attachment;filename={0}",
                    this.Server.UrlPathEncode(fileName));
                Response.AddHeader("content-disposition", headerValue);
                bw = new System.IO.BinaryWriter(this.Response.OutputStream);
                bw.Write(content);
            }

            catch (Exception ex)
            {
              LogError("ViewFile.aspx, "
                + ex.InnerException, ex);

            }
            finally
            {
                if (sr != null)
                    sr.Close();

                if (ms != null)
                    ms.Close();

                if (bw != null)
                    bw.Close();
            }
        }
    } 
```

**问题：**
在 Android 设备中，当用户单击附件时，文件会自动下载，这是理想的行为，因为用户稍后可以使用他想要的任何工具打开文件，即使文件类型不受支持，用户也可以稍后下载工具哪个可以打开它。

但在 iOS 设备中，文件不会下载，而是重定向到 ViewFile.aspx 并尝试在浏览器中打开文件，如果文件类型不受支持，则会显示警报：“safari 无法下载此文件”。即使支持文件类型，我也希望它被下载而不是默认打开。

我怎样才能实现这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:03:08.330

AFAIK，您无法在 iOS 上下载文件。

Safari（或任何已注册文件类型，例如 ZIP 的应用程序）支持的已知文件将打开或显示一个对话框，让用户选择如何打开文件。

您无法控制您的网络应用程序/网站的行为。

# blackberry - 黑莓 - 未捕获的异常：应用程序（353）没有响应；进程终止

> ID：13029438
> 
> 赞同：1
> 
> 时间：2012-10-23T11:27:43.270
> 
> 标签：blackberry

我正在为 BlackBerry OS 6.0 及更高版本开发应用程序。当我启动应用程序时，它给出了一个错误：

> 未捕获的异常：Application Trace(353) 没有响应；进程终止。

异常并非总是抛出，而是偶尔抛出。

谁能帮助解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:21:10.493

您偶尔会收到此错误的事实表明您可能使用事件线程的时间过长。在您的情况下，您可能会在线程中连续获取 GPS 位置更新。

发生此问题时，操作系统将强制为所有正在运行的应用程序进行堆栈跟踪转储。您需要恢复事件日志并找到应用程序的堆栈跟踪。这将有助于识别占用处理器的代码行。

一旦您识别出有问题的代码，您要么需要修改它以使事件线程不被独占，要么可能将过程隔离在它自己的线程中，以便事件线程可以返回到系统调度程序。

# vb.net - 计算 txt 文件 vb.net 中的特定单词

> ID：13029442
> 
> 赞同：0
> 
> 时间：2012-10-23T11:27:58.660
> 
> 标签：vb.net, word-count

如何使用 vb.net 计算特定文本文件中的特定单词

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:43:48.543

假设 4.0...

该单词必须完全匹配（不包括混合大小写）。如果要统计匹配的子词，比如搜索“sub”，将“subway”计为一个词，改为LCase(strWord).Contains(LCase("TargetWord"))...

```
 Dim intCount As Integer = 0
    IO.File.ReadAllText("C:\file.txt").Split(" ").ToList().ForEach(Sub(strWord As String)
                                                                       If LCase(strWord) = LCase("TargetWord") Then
                                                                           intCount += 1
                                                                       End If
                                                                   End Sub)
    MsgBox(CStr(intCount)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:44:36.700

这样的事情会帮助你：

```
Private Function GetWordCountInFile(ByVal filepath As String, ByVal word As String)
    Dim dict As New Dictionary(Of String, Integer)()
    Dim lst As New List(Of String)(IO.File.ReadAllText(filepath).Split(" "))

    For Each entry As String In lst
        If Not (dict.ContainsKey(entry.ToLower.Trim)) Then
            dict.Add(entry.ToLower.Trim, 1)
        Else
            dict(entry.ToLower.Trim) += 1
        End If
    Next
    lst.Clear()
    Return dict(word.ToLower.Trim)
End Function 
```

你可以像这样使用它：

```
 Dim count As Integer = GetWordCountInFile("../../Sample.txt", "sample") 
```

这将在文本文件“sample.txt”中查找单词“sample”并返回一个计数。

此外，可能不是一个好方法，但单行方法是：

```
Private Function GetWordCountInFile(ByVal filepath As String, ByVal word As String)
    Return System.Text.RegularExpressions.Regex.Matches(IO.File.ReadAllText(filepath), "(?i)\b(\s+)?" & word & "(\s+|\S{0})\b|^" & word & "\.?$|" & word & "[\.\,\;]").Count
End Function 
```

或类似这样的东西：（无需声明额外的变量来保存字数）

```
 Private Function GetWordCountInFile(ByVal filepath As String, ByVal word As String)
    Dim lst As New List(Of String)(IO.File.ReadAllText(filepath).ToLower.Split(New Char() {" ", ",", ";", ".", ":"}))
    Return lst.FindAll(Function(c) c.Trim() = word.ToLower).Count()
   End Function 
```

# apache - 如何在 Apache 2.2.11 Webserver 中启用 **Loopback IPv6**？

> ID：13029445
> 
> 赞同：0
> 
> 时间：2012-10-23T11:28:03.457
> 
> 标签：apache, ipv6

我正在使用 Apache webserver 2.2.11。目前我可以使用 IPv4 环回地址浏览我的网站。而不是这个 IPv4 环回地址（127.0.0.1），我需要使用 IPv6 环回地址（::1）来浏览网站.我已经尝试在httpd.config中添加这个地址

```
Listen [::1]:80 
```

但是由于配置错误，更改后 apache 服务器没有启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T08:13:20.137

我通过安装最新的 Apache(2.4) Web 服务器解决了这个问题。并在配置文件 (httpd.conf) 中添加了**Listen [::1]:80行**

# scala - Scala type A = B with C, `with` 是什么意思

> ID：13029447
> 
> 赞同：2
> 
> 时间：2012-10-23T11:28:11.013
> 
> 标签：scala, types

有人可以解释并提供`with`在定义类型时使用关键字的真实示例吗？

让我们定义类型

```
type T = A with B 
```

这是什么意思？什么时候应该使用它？如何实例化类型`T`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T11:55:06.247

我*想*它被称为类型连接。

您可以使用它来强制某个类型必须扩展所有指定的特征/类。一个愚蠢的例子：

```
scala> trait Quackable {
     |   def quack = println("quack")
     | }
defined trait Quackable

scala> trait Walkable {
     |   def walk = println("walk")
     | }
defined trait Walkable

scala> case class Duck(name: String) extends Quackable with Walkable
defined class Duck

scala> def foo(d: Quackable with Walkable): Unit = {
     |   d.quack
     |   d.walk
     | }
foo: (d: Quackable with Walkable)Unit

scala> foo(Duck(""))
quack
walk

// Or you can create a type alias and use it.    
scala> type QW = Quackable with Walkable
defined type alias QW

scala> def foo(d: QW): Unit = {
     |   d.quack
     |   d.walk
     | }
foo: (d: QW)Unit

scala> foo(Duck(""))
quack
walk

// If you need to retain the type information for some reason, you can use a type parameter.

scala> def foo[A <: Quackable with Walkable](d: A): A = {
     |   d.quack
     |   d.walk
     |   d
     | }
foo: [A <: Quackable with Walkable](d: A)A

scala> foo(Duck(""))
quack
walk
res1: Duck = Duck() 
```

至于“如何实例化它”：不要那样想。`type`创建类型别名/同义词/函数，它们不一定代表具体的可实例化类型。

**编辑：**

如果您熟悉 Java，`with`上面使用的类似于 Java 的`&`.

```
public static <QW extends Quackable & Walkable> void foo(QW d) {
  d.quack();
  d.walk();
} 
```

然而，与 Java 不同的是`&`，`with`它为您提供了正确的类型。我写的第一个定义`foo`不能翻译成Java。您也不能对 Java 的`&`.

```
scala> case object Quackawalkasaurus extends Quackable with Walkable
defined module Quackawalkasaurus

scala> List(Duck(""), Quackawalkasaurus)
res2: List[Product with Serializable with Quackable with Walkable] = List(Duck(), Quackawalkasaurus)

// Add an explicit type annotation if you want to remove unwanted common super-traits/classes.
scala> List(Duck(""), Quackawalkasaurus) : List[Quackable with Walkable]
res3: List[Quackable with Walkable] = List(Duck(), Quackawalkasaurus) 
```

# sencha-touch-2 - 在 sencha touch 2 模板中单击/点击时调用成员函数

> ID：13029452
> 
> 赞同：1
> 
> 时间：2012-10-23T11:28:15.873
> 
> 标签：sencha-touch-2

我对 sencha touch 比较陌生，我已经做了很多研究和教程来学习基础知识，但是现在我正在尝试我遇到了一个我无法弄清楚的问题。

我有一个基本的 DataList，它从显示在 xtemplate 中的商店获取数据。

在此模板中，我创建了一个成员函数，该函数需要将存储字段数据解析为参数。

我想制作一个缩略图（即从商店中提取的源）在单击/点击时执行成员函数。

我在文档中找不到有关此的任何信息，有人知道解决此问题的最佳方法吗？

这是一个代码示例（从文档中提取，因为我现在无法访问我的实际代码）。

```
var tpl = new Ext.XTemplate(
'<p>Name: {name}</p>'
{
    tapFunction: function(name){
       alert(name);
    }
}
);
tpl.overwrite(panel.body, data); 
```

我想让段落可点击，然后执行 tapFunction() 成员函数并传递 {name} 变量。

做类似 onclick="{[this.tapFunction(values.name)]} " 的事情似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T14:58:41.090

我认为模板中的函数会在视图呈现后立即执行，所以我认为这不是正确的解决方案。

在你的情况下我会做的是：

**为你的 <p> 标签添加一个唯一的类**

```
tpl : '<p class="my-p-tag">{name}</p>' 
```

**检测列表中的 itemtap 事件**

在您的数据视图控制器中，您`tap`在列表中添加一个事件侦听器。

```
refs: {
  myList: 'WHATEVER_REFERENCE_MATCHES_YOUR_LIST'
},
control: {
  myList: {
    itemtap: 'listItemTap'
  }
} 
```

**检查点击的目标是否是 <p> 标签**

为此，请`listItemTap`像这样实现您的功能：

```
listItemTap: function(list,index,target,record,e){
  var node = e.target;
  if (node.className && node.className.indexOf('my-p-tag') > -1) {
    console.log(record.get('name'));
  }
} 
```

希望这可以帮助

# asp.net - 与文本框绑定的网格视图无法显示结果

> ID：13029453
> 
> 赞同：0
> 
> 时间：2012-10-23T11:28:20.570
> 
> 标签：asp.net, data-binding, gridview, dataset, dataadapter

我正在尝试将搜索文本框（使用存储过程）与网格视图绑定，但是当我运行它们并键入搜索条件时，不会显示任何结果并且 GridView 会自动显示。我尝试了很多方法，包括使用 DataAdapter 和 DataSet 来填充搜索文本框的结果，然后将 DataSet 绑定到 GridView。但它也不起作用这里是代码：

```
 protected void SearchButton_Click(object sender, EventArgs e)
    try

    {

    string con_str = ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString;
    SqlConnection con = new SqlConnection(con_str);

    SqlCommand com = new SqlCommand("dbo.SearchRecords", con);
    com.CommandType = CommandType.StoredProcedure;
    SqlParameter pDocumentTitle = new SqlParameter("@Doc_Title", SearchTextBox.Text);
    SqlParameter pUserID = new SqlParameter("@User_ID", SearchTextBox.Text);
    SqlParameter pDocumentType = new SqlParameter("@Doc_Type", SearchTextBox.Text);
    SqlParameter pDocumentDescription = new SqlParameter("@Doc_Description",SearchTextBox.Text);

    com.Parameters.Add(pDocumentTitle);
    com.Parameters.Add(pUserID);
    com.Parameters.Add(pDocumentType);
    com.Parameters.Add(pDocumentDescription);

    con.Open();
    SqlDataAdapter DA = new SqlDataAdapter(com); 
    com.ExecuteNonQuery();

    DataSet t = new DataSet();
    DA.Fill(t);

    GridView1.DataBind();

    GridView1.DataSource = t;

    }
    catch (Exception ex)
    {
    Label2.Text = ex.Message;
    //throw;
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:30:49.930

我可能是错的，但您不需要在设置 DataSource 属性后调用 DataBind() 吗？例如

```
GridView1.DataSource = t;
GridView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:31:19.387

您应该按如下方式更改绑定顺序...始终在将 DataSource 分配给 Any DataControl 后编写 DataBind()

```
GridView1.DataSource = t;
GridView1.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:32:00.380

数据源必须先定义，然后进行绑定

```
 GridView1.DataSource = t;
    GridView1.DataBind(); 
```

# java - Java：一次初始化数据结构，跨JVM重用（高延迟，无远程调用）

> ID：13029454
> 
> 赞同：1
> 
> 时间：2012-10-23T11:28:20.167
> 
> 标签：java, shared-memory

我有一个用例，我必须多次运行 java 应用程序。应用程序的性能瓶颈是它的初始化时间。在初始化时，应用程序将 1000 万条记录从磁盘加载到内存数据结构中，然后应用程序在内存数据结构中进行大约 1 亿次查找。

我想要做的是避免一次又一次地从磁盘加载记录。我的应用程序使用共享内存进行数据结构查找。我不想使用远程方法调用/Web 服务调用，因为这对于查找部分来说成本太高。

另外，我没有使用线程的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:45:55.377

我会在内存映射文件中构建数据结构。这些可以在进程之间共享，也可以在同一进程的运行中共享。但是，使用它们并非易事，因为您必须确定如何在字节级别构建数据。即你不能使用Java 对象。（从好的方面来说，这意味着几乎没有 GC 开销）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T17:16:21.393

虽然我从未使用过它，但看起来[类数据共享](http://publib.boulder.ibm.com/infocenter/javasdk/v6r0/index.jsp?topic=%2Fcom.ibm.java.doc.user.aix64.60%2Fuser%2Fshc_overview.html)可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:37:59.657

理想情况下，您应该将此应用程序变成服务器，并且您运行的命令应该通过请求-响应机制获取所需的数据。

另一种选择是创建所需数据的快照，每次运行程序时都可以快速加载这些数据。

# javascript - 删除 cookie chrome 扩展

> ID：13029458
> 
> 赞同：14
> 
> 时间：2012-10-23T11:28:34.423
> 
> 标签：javascript, google-chrome-extension

我想自动删除某个域上的所有 cookie，所以我制作了一个扩展。我可以查看该域的 cookie，但我没有找到任何删除它们的方法

这是我的代码，函数 eraseCookie 只被调用一次

有什么建议么 ？

```
function eraseCookie(name) {
    document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
}

$(document).ready(function() {

var cookies = document.cookie.split(";");
for (var i = 0; i < cookies.length; i++)
{
  window.alert(cookies[i]);
  eraseCookie(cookies[i].split("=")[0]);
}

}); 
```

我也在使用 jquery，但我看不出有什么问题！

```
 {
        "name": "Gapa",
        "version": "0.1",
        "description": "",
        "browser_action":   {
            "default_icon": "sigla.png",
            "default_title": "",
            "popup": "hello.html"
        },
        "content_scripts": [
        {
          "matches": ["*://*.google.ro/*"],
          "js": ["jquery-1.8.2.min.js","cookie_handler.js"]
        }
      ],
       "icons": {
          "128":"sigla.png" },
       "permissions": [
        "cookies",
        "tabs",
        "*://*.google.ro/*"
      ],
      "manifest_version": 2

    } 
```

LE：这是我的脚本文件现在的样子：

```
$(document).ready(function() {

var cookies = document.cookie.split(";");
for (var i = 0; i < cookies.length; i++)
{
  chrome.cookies.remove({"url": ".google.ro", "name":cookies[i].split("=")[0]}, function(deleted_cookie) { window.alert('deleted cookie') });
}

}); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-23T11:36:22.807

首先，您必须在清单中提供 cookie 权限。

其次，Chrome 为您提供了本地化删除功能的 cookies api：

```
chrome.cookies.remove(object details, function callback); 
```

你可以这样使用它：

```
chrome.cookies.remove({"url": "http://domain.com", "name": "cookieName"}, function(deleted_cookie) { console.log(deleted_cookie); }); 
```

尝试使用它来列出选定域的所有 cookie（内部删除功能会从该域中删除所有 cookie）：

```
chrome.cookies.getAll({domain: "domain.com"}, function(cookies) {
    for(var i=0; i<cookies.length;i++) {
        chrome.cookies.remove({url: "http://domain.com" + cookies[i].path, name: cookies[i].name});
    }
}); 
```

在您的 manifest.json 添加：

```
 "background": {
    "scripts": ["background.js"]
  }, 
```

在 background.js 中，您包含建议的功能。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-03-04T00:04:20.510

我拼凑了 Arkadiusz 的答案并得到了这个工作：

在 manifest.json 中：

```
"background": {
    "scripts": ["background.js"]
  },
"permissions": [
    "cookies",
    "https://*/",
    "http://*/"
  ] 
```

在 background.js 中：

```
chrome.cookies.getAll({domain: ".mydomain.com"}, function(cookies) {
    for(var i=0; i<cookies.length;i++) {
      console.log(cookies[i]);

      chrome.cookies.remove({url: "https://" + cookies[i].domain  + cookies[i].path, name: cookies[i].name});
    }
  }); 
```

# pointers - 外部结构的 autoconf AC_CHECK_* *

> ID：13029464
> 
> 赞同：1
> 
> 时间：2012-10-23T11:28:55.843
> 
> 标签：pointers, struct, autoconf, extern

我正在寻找一个 AC_CHECK_* 函数，让我根据 pppd/pppd.h 是否包含来更改代码中的行为

```
extern struct notifier *ipv6_up_notifier; 
```

这是最近添加的。它实际上是在 pppd/ipc6cp.h 中提供的：

```
struct notifier *ipv6_up_notifier = NULL; 
```

我试过了

```
AC_CHECK_DECLS(notifier *ipv6_up_notifier,,, [#include <pppd/pppd.h>])
AC_CHECK_DECLS(extern notifier *ipv6_up_notifier,,, [#include <pppd/pppd.h>])
AC_CHECK_DECLS(struct notifier *ipv6_up_notifier,,, [#include <pppd/pppd.h>])
AC_CHECK_DECLS(extern struct notifier *ipv6_up_notifier,,, [#include <pppd/pppd.h>]) 
```

但这一切导致

```
checking whether notifier *ipv6_up_notifier is declared... no 
```

当 ./configure 时。是否有可能检查extern？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T13:08:09.183

正如评论中所讨论的，第一个参数是变量名（没有类型）：

```
AC_CHECK_DECLS([ipv6_up_notifier], [], [], [#include <pppd/pppd.h>]) 
```

# jquery - jQuery Lightbox Evolution：在 iframe 外加载灯箱

> ID：13029467
> 
> 赞同：1
> 
> 时间：2012-10-23T11:29:23.050
> 
> 标签：jquery, iframe, load, lightbox, parent

我正在使用 jQuery Lightbox Evolution 插件，并且我在 iframe 中有照片链接。我希望 Lightbox 在 iframe 之外的父窗口中打开。

在常见问题解答中，我发现我可以在父级上放置一些代码：

```
<script type="text/javascript">
  function frameload(iframe) {
    var doc = iframe.contentWindow || iframe.contentDocument;
    if (doc.document) { doc = doc.document; };

    $('.lightbox', doc.body).lightbox();
  };
</script> 
```

但不工作，因为我的代码是内联生成的，是用php动态生成的。所以我不会在 head 标签中“初始化”插件，只是在代码中调用它。

有我的一段代码初始化插件：

```
echo 
'<a style="cursor:pointer;" id="open_'.$emp_alias.'"></a>';

echo 
'<script type="text/javascript">
   $(document).ready(function(){
     $("#open_'.$emp_alias.'").click(function(ev) {
        $.lightbox([';
        while($images_array = mysql_fetch_assoc($query_emp_images)) {
     echo '"/destaques/'.$images_array['path'].'",';
    }
    echo
         ']);
    ev.preventDefault();
    });                                       });
</script>'; 
```

有办法在父窗口中加载它吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T02:47:55.147

它在文档中：

9.如何在 iframe 中打开父窗口中的 Lightbox？您需要做的第一件事是在您的父窗口中安装脚本，但不要初始化它。不要使用 jQuery(document).ready，而是添加以下代码：

```
<script type="text/javascript">
function frameload(iframe) {
    var doc = iframe.contentWindow || iframe.contentDocument;
    if (doc.document) { doc = doc.document; };

    jQuery('.lightbox', doc.body).lightbox();
};
</script> 
```

插入 onload="frameload(this);" 在您的 iframe 标记中。

```
<iframe src="iframe_child.html" onload="frameload(this);" width="500" height="500"> </iframe> 
```

当您单击子页面中的图像时，灯箱将显示在您的父页面中。请记住删除子页面中的脚本以避免任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T08:02:21.083

一个对我有用的简单解决方法是在父窗口中初始化灯箱，然后创建一个空白占位符链接，以及更改 href 并单击占位符链接的函数：

在父窗口的页眉或页脚中：

```
<script type="text/javascript">
  $(function () {
    $('.lightbox').lightBox();
  });

  function image_preview(url)
  {
     $('#fakebox').attr('href',url);
     $('#fakebox').trigger('click')   
  }
</script> 
```

在父窗口主体的某处：

```
<a href="" class="lightbox" id="fakebox"></a> 
```

所以在 iframe 中我调用父函数来启动fancybox：

```
<a href="JavaScript:void(0);" class="btn btn-tertiary btn-small" onClick="parent.image_preview('http://static8.depositphotos.com/1007989/1011/i/950/depositphotos_10118078-Grinning-Smiley.jpg')">Preview</a> 
```

# html - 如何使 CSS 文件比另一个 CSS 文件更重要？

> ID：13029470
> 
> 赞同：24
> 
> 时间：2012-10-23T11:29:39.593
> 
> 标签：html, css

我希望`css.css`覆盖其中的所有类、标签和ID ，`bootstrap.min.css` **而不重复**`bootstrap.min.css`.

```
<link href="css/bootstrap.min.css" rel="stylesheet">
<link href="css/css.css" rel="stylesheet"> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T11:43:53.300

没有这样的魔法。CSS有它自己的原理，比如级联，你不能把它们关掉。

您可以在对 的引用`css.css`之后放置对 的引用`bootstrap.min.css`，但这只是解决如何应用 CSS 规则的过程中的一个因素。添加`!important`，这通常是错误设计的症状，只是另一个因素：`!important`早期文件中的规则可能会覆盖您的`!important`规则，如果其选择器具有更高的特异性。

要覆盖 CSS 规则，您需要分析您希望覆盖的规则并通过级联原则设置“获胜”的规则。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-23T11:32:43.087

很简单，最后包含更重要的 CSS 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T11:32:41.223

包含样式表时，它会覆盖*之前*包含的样式表的所有声明。如果您将包含更改为：

```
<link href="css/css.css" rel="stylesheet">
<link href="css/bootstrap.min.css" rel="stylesheet"> 
```

Bootstrap 稍后会包含在内，并将覆盖 css.css 中的属性。

希望有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-23T11:43:43.330

我只能给你举个例子。

假设 Bootstrap.css 具有以下 `.rules #world {border:0px;}`[特异性 110]

并且 css.css 具有以下 `div #world{border:20px;}`[特异性 101]

在这种情况下，bootstrap.css 将始终覆盖 css.css。所以，我建议你为你的所有内容添加一个容器——给这个容器一个 id..让我们说“god”，然后在你的 CSS 中的所有样式中添加前缀 .god——但同样，这并不简单，并且很大程度上取决于您如何正确计算。

```
#god div #world{border:20px;} 
```

正如其他人指出的那样，这是一个冗长的主题 - 所以你必须基本上知道所有引导程序对你的页面做了什么以及 css.css 在做什么。

您可以随时查看这篇永不过时的精彩文章[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-23T12:11:57.150

我认为你可以做的一件事是在 css.css 中只包含 css.css 和 @import "css/bootstrap.min.css" 所以你的代码会是这样的

**html内**

```
<link href="css/css.css" rel="stylesheet"> 
```

**在 css.css**中

 **```
@import "css/bootstrap.min.css"

.bootstrap_class{//your style..}
.hero-unit{background: red;} 
```

使用这个技巧，您可以覆盖引导样式，而不会显示任何令人头疼的结果

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T11:33:50.350

如果您无法更改文件，并且 css 文件的调用顺序不起作用，您始终可以使用！important，但这会花费很多时间，因为您需要在 css 的每一行添加它。

例如：显示：内联！重要；

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T11:43:55.250

将其引用到列表中的最后一项，该列表将始终覆盖以前的样式表

下面将强制您的页面适合 980px，因为它会覆盖以前的样式表属性

例子

**样式1.css**

```
 #main{ width:1000px;} 
```

**样式2.css**

```
 #main{ width:980px;} 
      or  
 #main{ width:980px !important;} /* if needed only */ 
```

**HTML**

```
<link href="style1.css" rel="stylesheet" type="text/css" />
<link href="style2.css" rel="stylesheet" type="text/css" />

<div id="main"></div> 
```**

# c# - 在 c# .net 中使用控制数组

> ID：13029471
> 
> 赞同：1
> 
> 时间：2012-10-23T11:29:45.327
> 
> 标签：c#, arrays, controls

我正在创建一个带有包含图像和文本的大按钮的菜单。选中后，按钮周围会出现边框。

按钮文本并不总是相同的，按钮单击的结果也不相同。

我在这样的结构中设置了图像名称和每个按钮的文本：（其中有四个，但我将显示 2 个）

```
struct ConfigDevSubmenu
    {

        public const string SubMenuBtnText1 = "";
        public const string SubMenuBtnText2 = "text submenu 3 button 1";
        public const string SubMenuBtnText3 = "text submenu 3 button 2";
        public const string SubMenuBtnText4 = "";
        public const string SubMenuBtnImg1 = null;
        public const string SubMenuBtnImg2 = "Settings.png";
        public const string SubMenuBtnImg3 = "LoadFirmware.png";
        public const string SubMenuBtnImg4 = null;
        public const string SubMenuBtnBorder1 = "Borderstyle.None";
        public const string SubMenuBtnBorder2 = "Borderstyle.FixedSingle";
        public const string SubMenuBtnBorder3 = "Borderstyle.FixedSingle";
        public const string SubMenuBtnBorder4 = "Borderstyle.None";
    }
    struct AdvancedSubmenu
    {
        public const string SubMenuBtnText1 = "text submenu 4 button 1";
        public const string SubMenuBtnText2 = "text submenu 4 button 2";
        public const string SubMenuBtnText3 = "text submenu 4 button 3";
        public const string SubMenuBtnText4 = "text submenu 4 button 4";
        public const string SubMenuBtnImg1 = "GenerateEncKey.png";
        public const string SubMenuBtnImg2 = "Monitoring.png";
        public const string SubMenuBtnImg3 = "AdvancedSettings.png";
        public const string SubMenuBtnImg4 = "GenerateConfigFile.png";
        public const string SubMenuBtnBorder1 = "Borderstyle.FixedSingle";
        public const string SubMenuBtnBorder2 = "Borderstyle.FixedSingle";
        public const string SubMenuBtnBorder3 = "Borderstyle.FixedSingle";
        public const string SubMenuBtnBorder4 = "Borderstyle.FixedSingle";
    } 
```

我认为如果不使用数据库文件，这不会更容易完成。

为了创建按钮，我有这个函数，它以它应该使用的结构作为参数，并且在 switch case 结构中创建了每个按钮。但是我发现自己在这些函数中复制粘贴了很多，所以这必须更容易。因此，我尝试了类似下面的方法，但这不起作用。我想知道是否有可能做到这一点，以及我应该如何做到这一点。

```
 private void createButtons(string Struct)
    {
        for (int i = 1; i < 5; i++)
        {
            SubBtnText[i].Text = Struct.SubMenuBtnText[i];
            pictureBoxSubBtn[i].Image = Image.FromFile(Struct.SubMenuBtnImg[i]);
            panelSubBtn[i].BorderStyle = Struct.SubMenuBtnBorder[i];

        }
    } 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:41:21.523

创建一个类来保存按钮文本、图像名称和边框样式 - 比如`ButtonData`.

创建多个*列表*（或数组）`ButtonData`，每个菜单一个。

然后，您可以遍历列表并提取数据。

```
public class ButtonData
{
   public ButtonData(string text, string image, BorderStyle border)
   {
       Text = text;
       Image = image;
       Border = border;
   }

   public string Text { get; private set; }
   public string Image { get; private set; }
   public BorderStyle Border { get; private set; }
}

var devMenuData = new List<ButtonData> { 
                                  new ButtonData("", null, "Borderstyle.None"), 
                                  new ButtonData("text submenu 3 button 1",
                                                 "Settings.png",
                                                 Borderstyle.FixedSingle), 
                                  ...
                                       }; 
```

您的功能类似于：

```
private void CreateButtons(IEnumerable<ButtonData> data)
{
    foreach (var buttonData in data)
    {
        SubBtnText[i].Text = buttonData.Text;
        pictureBoxSubBtn[i].Image = Image.FromFile(buttonData.Image);
        panelSubBtn[i].BorderStyle = buttonData.Border;
    }
} 
```

上述修改后的函数将无法正常工作，因为 .NET 没有控件数组。您可以创建*另一个*列表/数组来迭代或索引以使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:42:08.010

[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)

```
class ButtonParameters
{
    public string SubMenuBtnText = string.Empty;
    public string SubMenuBtnImg = string.Empty;
    public string SubMenuBtnBorder = string.Empty;
}

public Dictionary<int, ButtonParameters> CreateParameters(Type type)
{
    FieldInfo[] fieldInfos = type.GetFields(
        BindingFlags.Public | BindingFlags.Static);
    Dictionary<int, ButtonParameters> parameters = new Dictionary<int, ButtonParameters>();
    foreach (FieldInfo fieldInfo in fieldInfos)
    {
        if (fieldInfo.Name.Contains("SubMenuBtnText"))
        {
            int index = Convert.ToInt32(fieldInfo.Name.Substring(14));
            if (!parameters.ContainsKey(index))
            {
                parameters.Add(index, new ButtonParameters());
            }
            parameters[index].SubMenuBtnText = (string)fieldInfo.GetValue(null);
        }
        else if (fieldInfo.Name.Contains("SubMenuBtnImg"))
        {
            int index = Convert.ToInt32(fieldInfo.Name.Substring(13));
            if (!parameters.ContainsKey(index))
            {
                parameters.Add(index, new ButtonParameters());
            }
            parameters[index].SubMenuBtnImg=  (string)fieldInfo.GetValue(null);
        }
        else if (fieldInfo.Name.Contains("SubMenuBtnBorder"))
        {
            int index = Convert.ToInt32(fieldInfo.Name.Substring(16));
            if (!parameters.ContainsKey(index))
            {
                parameters.Add(index, new ButtonParameters());
            }
            parameters[index].SubMenuBtnBorder= (string)fieldInfo.GetValue(null);
        }
    }
    return parameters;
}

private void createButtons()
{
    Dictionary<int, ButtonParameters> buttons = CreateParameters(typeof(AdvancedSubmenu));
    for (int i = 1; i < 5; i++)
    {
        SubBtnText[i].Text = buttons[i].SubMenuBtnText;
        pictureBoxSubBtn[i].Image = Image.FromFile(buttons[i].SubMenuBtnImg);
        panelSubBtn[i].BorderStyle = buttons[i].SubMenuBtnBorder;
    }
} 
```

# actionscript-3 - 试图让这段代码工作（打字机式）

> ID：13029474
> 
> 赞同：0
> 
> 时间：2012-10-23T11:29:49.507
> 
> 标签：actionscript-3, flash

不确定我是否应该甚至可以在这里问这个问题，但这是我最接近找到我正在寻找的正确效果的方法。

[http://blog.onebyonedesign.com/actionscript/random-letter-cycling/](http://blog.onebyonedesign.com/actionscript/random-letter-cycling/)

我该如何使用它？我明白了一点（我至少知道 .as 文件是什么，但代码本身对我来说大多是粗略的），但我不知道如何实现它。我想将这种打乱的效果应用到画布上的几个文本字段，这段代码允许我这样做吗？还是只考虑一个文本字段编写？

本质上，我想要几个框架，每个框架都包含几个文本字段，并且每个文本字段都应该以加扰器效果出现。用户将使用简单的按钮浏览这些框架，没有什么太花哨的。

我当然会问作者是否可以，但他禁用了对该文章的评论，我在网站上的任何地方都找不到电子邮件地址。

抱歉，如果这样的问题不属于这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:42:04.530

你有两段代码：

*   第一个是类`LetterCycler`本身，其中包含您感兴趣的效果。您不必了解此类的工作原理，只需将其复制到您的 fla 附近（在目录结构*com/onebyonedesign/extras/LetterCycler.as 中*）
*   **第二个是如何使用它**的示例。您必须了解它，因此您可以修改它以满足您的需求。

一些提示：

*   您将需要该行：`private var _cycler:LetterCycler = new LetterCycler();`
*   您可能需要该方法`scrambleText`和`showText`
*   如果你想在文本被解读的时候做点什么，修改方法的主体`cycleDone`

祝你好运。

# insert - 插入到带有两个数据库的选择查询中

> ID：13029476
> 
> 赞同：0
> 
> 时间：2012-10-23T11:29:53.907
> 
> 标签：insert, multiple-databases

任何人都知道 (insert into table1 select * from table2) 使用两个数据库进行查询。平均 table1 在一个数据库中，table2 在第二个数据库中，我想将 table2 中的记录插入到 table1 中，它们具有相同的结构，但它们位于不同的数据库中。我们可以在 PHP 或 MYSQL 中做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:08:58.553

![照着做！](../Images/f4a866781e30ab47265ee2cb9e76b701.png)嘿，伙计，您创建了一个新数据库？并且想要将所有数据从第一个数据库传输到其他数据库？如果是，请使用：

1.  打开**MySql**中间的水平菜单中会有**导出**导航按钮。

2.  点击它。

3.  只需单击**“**开始”按钮。

否则来自 php 的人太难了....

# configuration - 如何将指南针的 config.rb 放在 css 和 scss 文件上方的目录中？

> ID：13029477
> 
> 赞同：1
> 
> 时间：2012-10-23T11:29:58.883
> 
> 标签：configuration, compass-sass

所以我有

```
- [folder]
  + config.rb
  + [scss]
  + [js]
  + [img]
  + [css] 
```

但我想拥有

```
- [folder]
  + config.rb
  - [folder]
    - [folder] 
      + [scss]
      + [js]
      + [img]
      + [css] 
```

我已经尝试过该`project_path`变量，但它没有用。任何帮助都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:46:00.500

For this structure:

```
- deploy/
  + config.rb
  - public_html/
    - assets/ 
      - sass/
      - js/
      - img/
      - css/ 
```

Try this:

```
http_path = "public_html/"
sass_dir = "public_html/assets/sass"
css_dir = "public_html/assets/css"
images_dir = "public_html/assets/img"
javascripts_dir = "public_html/assets/js"
relative_assets = true 
```

# wpf - WPF Combobox 在下拉列表中显示实体名称而不是 DisplayMemberPath

> ID：13029478
> 
> 赞同：1
> 
> 时间：2012-10-23T11:30:02.520
> 
> 标签：wpf, combobox

我有以下组合框：

```
<ComboBox Name="cbBonusType" 
          DisplayMemberPath="BonusTypeName"  
          SelectedValuePath="ID" Width="150" Margin="10,0,0,0"                  
          SelectionChanged="cbBonusType_SelectionChanged"/> 
```

运行时：选择项目时，组合框会显示正确的字符串。但是当 droppbox 打开时，droppbox 中显示的名称**都**设置为实体的名称：“CaSaMa.WPF.UI.Competiotion.BonusType”。

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T12:02:58.657

最好的办法是覆盖对象上的 ToString - 这将使您在整个应用程序中获得一致的显示。

希望有帮助！

只需重新阅读您的问题 - 认为我弄错了。您可以做的是在控件上设置 ItemTemplate ，而不是像这样；

```
 <ComboBox Name="cbBonusType" 
      ItemTemplate="{StaticResource DisplayTemplate}"
      SelectedValuePath="ID" Width="150" Margin="10,0,0,0"                  
      SelectionChanged="cbBonusType_SelectionChanged"/> 
```

然后像这样创建模板

```
 <DataTemplate x:Key="DisplayTemplate"
          DataType="{x:Type <YOURTYPE>}">
     <TextBlock Text="{Binding BonusTypeName}"/>
    </DataTemplate> 
```

这是一个已知问题，可悲的是，这是解决方法！

希望它有帮助..这次！:)

编辑：更新代码以防其他人想使用它！

圣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-30T19:17:58.100

它比这更容易......在 XAML 中：

```
<ComboBoxItem Content="This Value" Tag="This Value"/> 
```

然后在后面的代码中：

```
GetValue=ComboBoxName.selecteditem.tag.tostring() 
```

GetValue 将是“这个值”而不是“System.Windows.Controls.ComboBoxItem：这个值”

# list - Javafx 选择框/下拉菜单失去对键盘向下箭头的关注并移至下一个项目

> ID：13029485
> 
> 赞同：1
> 
> 时间：2012-10-23T11:30:23.397
> 
> 标签：list, drop-down-menu, focus, javafx, items

在 JavaFX 应用程序中，我在屏幕上有两个文本框和三个选择框。它们都以垂直方式放置。

当焦点到达第一个选择框时通过键盘 TAB 导航时，如果我单击键盘向下箭头，则焦点不会打开该选择框的项目，而是移动到下一个选择框并显示其中的项目。

我试图通过在第一个选择框上创建一个按键事件方法来手动覆盖它，仍然是焦点，移动到下一个选择框。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:39:02.897

将事件过滤器放在包含这些控件的父组件中。

```
/**
* prevent move focus on pressing UP/DOWN
*/
pnlRadioButton.addEventFilter(KeyEvent.KEY_PRESSED, new EventHandler<KeyEvent>() {
    @Override
    public void handle(KeyEvent event) {
        if (event.getCode() == KeyCode.UP || event.getCode() == KeyCode.DOWN) {
            event.consume();
        }
    }
}); 
```

# android - 跨平台套接字库 - Android 和 IOS

> ID：13029492
> 
> 赞同：2
> 
> 时间：2012-10-23T11:30:52.020
> 
> 标签：android, ios, sockets

我需要开发一些跨平台应用程序。这些应用程序需要网络和简单的 UI，但它们背后的数学非常复杂。我有数学部分作为 ANSI-C 优化时尚，UI，我喜欢使用 Gideros 或 MOAI，但对于网络我不太确定。

LUA 套接字是一个不错的选择，但并不能完全满足我的需求，因此我正在寻找一个简单的跨平台套接字库，我可以在其中轻松使用和移植两个平台。有没有这样的图书馆？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-23T05:27:33.027

[SDL_net](http://www.libsdl.org/projects/SDL_net/)在 iOS 和 Android 上运行

这些功能与 Berkeley 套接字有点不同，例如，与什么和提供的功能`SDLNet_CheckSockets`相比，功能更加有限。`select``poll`

# javascript - 如何使用历史推送状态

> ID：13029493
> 
> 赞同：1
> 
> 时间：2012-10-23T11:30:58.953
> 
> 标签：javascript, back-button

我`history.pushstate`以前修改过 URL 内容，对我来说这是一个更好的 AJAX 解决方案，当任务完成时，我从[这里](http://fiddle.jshell.net/VF9jZ/show/html5/html5#)得到了这个方法。现在，我想在完成某些任务后清除 URL。我应该怎么做才能将修改后的 URL 清除回原始 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:35:32.087

```
window.history.pushState("","", "heyIJustChangedMyUrlWithoutPosting"); 
```

[此处](http://andrealigios.blogspot.it/2012/09/html5-change-url-without-reloading-page.html)提供链接（包括 SO 线程和外部文章）

# ldap - 用于选择性身份验证的 LDAP DIT（目录信息树）设计？

> ID：13029495
> 
> 赞同：1
> 
> 时间：2012-10-23T11:31:04.660
> 
> 标签：ldap, openldap

我想为我的多台机器创建一个使用 LDAP 的身份验证系统。
我已经创建了一个基本结构，但我不确定它是否是最好的解决方案。

**基地：**
我有机器 M1、M2、M3、M5（其中有数据库 D1、D2 和 D3）
用户列表 U1、U2、U3、U4、U5、U6、U7、U8、U9、U10
用户类型 - reader（机器特定），writer（机器特定），Manager

**要求：**
每台机器都可以有读写器用户集
写入用户就像他们各自机器的管理员
读取用户的权限非常有限，并且可以从可用数据库中读取很少的数据库

**使用的方法：**
创建一个节点，其中包含所有用户及其密码信息的列表，还允许数据库
创建管理器角色和角色占用者列表
为每台机器创建 2 个角色（读取器，写入器），并使用各自的角色占用者
定义访问控制

现在，当用户说 U1 试图读取机器 M4 的数据库 D2 时......首先他必须在用户列表中，然后他必须是 M4 机器的角色占用或读写器角色......

**我的问题出现在这里**
1.要检查他是否被允许读取数据库 D2，我们必须搜索用户节点以获取数据库信息并查看它是否包含允许的 D2。

**另一个问题是**
2\. 如果我想删除一个用户，很容易从用户节点中删除，但角色占用条目不会那么容易删除。（我必须在每个服务器的读者和作者角色中搜索以检查他是否是角色占用者）

那么有没有更好的方法来设计 DIT，所以没有。减少了管理 ldap 信息的步骤？

...以及检查数据库访问的更好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:12:53.150

为每个数据库创建一个 organizationsRole 条目，并将其 roleOccupants 设置为允许使用它的用户。参照完整性覆盖将解决您有关删除用户条目（或重命名）的问题。

# java - 如何定义 GlassFish 域端口？

> ID：13029498
> 
> 赞同：2
> 
> 时间：2012-10-23T11:31:10.183
> 
> 标签：java, glassfish, port

需要知道特定域使用的端口。是否可以？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T11:40:43.333

转到您想知道其端口的域目录。转到 domain/{Your_Domain}/config/domain.xml 并打开它并查找以下行

```
<network-listeners>
      <network-listener port="8080" protocol="http-listener-1" transport="tcp" name="http-listener-1" thread-pool="http-thread-pool"></network-listener>
      <network-listener port="8181" protocol="http-listener-2" transport="tcp" name="http-listener-2" thread-pool="http-thread-pool"></network-listener>
      <network-listener port="4848" protocol="admin-listener" transport="tcp" name="admin-listener" thread-pool="admin-thread-pool"></network-listener>
    </network-listeners> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:37:54.707

检查 domain/domain_name/config/ 中的 domain.xml

# android - 如何查看安卓源版本？

> ID：13029510
> 
> 赞同：-3
> 
> 时间：2012-10-23T11:32:23.690
> 
> 标签：android, android-source

如何查看安卓源版本？我已经引用了这个[链接](http://goo.gl/2sja0)，但它似乎不是检查版本的正确方法。就像在 linux 内核中我们可以打开主 Makefile 来查看内核版本，同样有没有办法找到 Android 的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:42:04.717

参见 AndroidManifest.xml

```
<uses-sdk
        android:minSdkVersion="8"  
        android:targetSdkVersion="15" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:21:06.803

采用`/proc/version`

```
private String getInfo() {
        StringBuffer sb = new StringBuffer();
        sb.append("abi: ").append(Build.CPU_ABI).append("\n");
        String abi=Build.CPU_ABI;
        Toast.makeText(CpuinfoActivity.this, "CPU ABI is :::"+abi, Toast.LENGTH_LONG).show();
        if (new File("/proc/cpuinfo").exists()) {
            try {
                BufferedReader br = new BufferedReader(new FileReader(new File("/proc/version")));
                String aLine;
                while ((aLine = br.readLine()) != null) {
                    sb.append(aLine + "\n");
                }
                if (br != null) {
                    br.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            } 
        }
        return sb.toString();
    } 
```

希望这可以帮助。

# php - 您能否从 magento 中“提取”条款和条件并在 magento 的单独页面上使用

> ID：13029515
> 
> 赞同：0
> 
> 时间：2012-10-23T11:32:48.687
> 
> 标签：php, magento

我需要使用我在 magento 中的服务条款中输入的相同文本，但我需要相同的文本出现在单独的灯箱页面上。有没有办法我可以将文本“拉”到我的网站而实际上没有 2 次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:39:50.340

您可以使用它的标识符获取页面的数据...

> > echo Mage::getModel('cms/page')->load('terms-and-conditions', 'identifier')->getContent();

# git - 如何将多个合并压缩成一个合并？

> ID：13029516
> 
> 赞同：2
> 
> 时间：2012-10-23T11:32:53.313
> 
> 标签：git, merge, rebase

我有一个看起来像这样的主题分支。（分支主题当前指向'a0a0'）

*   a0a0 将分支“主”合并到主题中
*   b1b1 将分支“主”合并到主题中
*   c2c2 将提交“来自主人的东西”合并到主题中
*   d3d3 将分支“主”合并到主题中
*   e4e4 将分支“主”合并到主题中
*   f5f5 将分支“主”合并到主题中
*   6666 一个实际的提交
*   [关于主题分支的大量历史]
*   9999 原始发散点

如何将 a0-f5 变成单个合并提交？

我已经尝试过：`git rebase -i f5f5`目的是将它告诉这`squash`5 个提交，但它只是在 f5f5 和 a0a0 之间的主分支上给出了每个提交。所以我把除了第一个和最后一个之外的所有东西都`pick`变成了`squash`，但这变得疯狂了，并且将 master 的每一个提交重新定位为一个巨大的提交，而不是所有的合并，失去了它是一个“合并”的事实。这不是我所期望的！

我可以：

```
 $ git reset 6666
  $ git merge Master 
```

但这需要我重新进行任何合并提交。

那么如何将这些不同的合并压缩成一个合并提交，它知道这是一个合并，并且还保留所有合并冲突的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:03:46.183

这将做到：

```
git reset --hard $(git commit-tree -p f5f5 -p Master -m "Merge hurricane" a0a0:) 
```

要了解它是如何工作的，首先要记住，合并提交绝对没有什么神奇之处。它可能很难创建，但一旦创建，**精确**地重新创建它是非常容易的。这是因为 git 不记录变更集，它记录整个树。诸如`git show`将提交显示为差异以及将提交合并为非常奇特的差异之类的工具，但实际上，提交是指向成熟树的指针。压缩一些提交是一个简单的问题，即重新创建一个包含相同树的新提交，为其提供不同的父级和提交消息。

管道命令`git commit-tree`执行最后一部分。给定一个父提交 ( `f5f5`)、一个提交消息和一个树 ID（很容易用 引用`COMMIT:`），它会创建一个包含指定树的新提交。如果提交有一个单亲，它将是一个常规提交。如果它有多个父母，它将是一个合并提交。一旦创建了压缩的合并提交，剩下的就是将当前分支指向新的提交`git reset --hard`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T13:14:44.177

试试这个：

```
git checkout 6666 -b master_squashed
git merge --squash master
git commit -m 'My new feature'
git checkout master
git merge master_squashed 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-22T08:31:07.307

迟到的答案：

```
git diff 6666 f5f5 > patch-f5f5.patch
git checkout 6666
git apply patch-f5f5.patch 
```

根据您的喜好，您也可以使用`git apply --cached`or `git apply --index`which 允许您在提交之前进行进一步修改。

# php - 从字符串加载代码 - PHP

> ID：13029518
> 
> 赞同：0
> 
> 时间：2012-10-23T11:32:58.730
> 
> 标签：php, apache

是否可以在 php 中从字符串添加功能，而不是将 apache 链接到 dll 文件？

假设我使用从 C 源代码编译的 .dll，从所需函数中找到指针，复制该 shellcode，将其编码为 base64 字符串，并将其作为字符串加载到 php 代码中。我应该使用哪个 php 函数来执行那个 shellcode，并从 php 传递参数？另外我猜这样的脚本会依赖于机器，因为 shellcode 在操作系统上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:37:10.473

创建文件如`my_exec.php`：

```
<?php

//$string = 'VGhpcyBpcyBhbiBlbmNvZGVkIHN0cmluZw==';
$string = $_GET['string'];

$command = base64_decode( $str );

exec( $command, $results );

?> 
```

现在像这样访问它：`http://mysite.com/my_exec.php?string=VGhpcyBpcyBhbiBlbmNvZGVkIHN0cmluZw==`

如果我明白你的意思。

但请注意！这存在**巨大**的安全隐患！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:46:43.500

```
$code = <<<'EOT'
    $var = 'foo';
EOT;

eval($code);

echo $var; //Foo 
```

如果您愿意，您可以`$code`从中填充。`file_get_contents()`

**当心**：`eval()`可能是一个巨大的安全风险。

# hibernate - 在休眠中选择查询

> ID：13029520
> 
> 赞同：0
> 
> 时间：2012-10-23T11:33:11.147
> 
> 标签：hibernate, oracle10g

我已将 java 类名作为“Employee”和 db 表名作为“EMPLOYEE”的类。该表有很多列，但我在员工类上只声明了两个变量。以下是Employee类的代码：

```
package com.mmi.education;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="EMPLOYEES")
public class Employee {
    private int id;
    private String firstname;
    private String lastname;

    @Id
    @Column(name="EMPLOYEE_ID")
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }

    @Column(name="FIRST_NAME")
    public String getFirstname() {
        return firstname;
    }
    public void setFirstname(String firstname) {
        this.firstname = firstname;
    }
    @Column(name="LAST_NAME")
    public String getLastname() {
        return lastname;
    }
    public void setLastname(String lastname) {
        this.lastname = lastname;
    }

} 
```

在 TestEmployee 类中，我编写了以下代码：

```
package com.mmi.education;

import java.util.List;

import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.AnnotationConfiguration;

public class TestEmployee {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        AnnotationConfiguration config= new AnnotationConfiguration();
        config.configure("hibernate.cfg.xml");

        SessionFactory factory = config.buildSessionFactory();

        Session session = factory.getCurrentSession();
        //session.beginTransaction();
        Query query = session.createQuery("FROM Employee");

        List<Employee> employees = query.list();

        for(Employee employee:employees){
            System.out.println("ID=>"+employee.getId()+"\tFirstName=>"+employee.getFirstname()+"\tLastName=>"+employee.getLastname());
        }
    }

} 
```

首先，我很困惑是写“FROM EMPLOYEES”还是“FROM Employee”。其次，在POJO类（Employee）中声明这两个变量是否安全，而表中有很多列。

最后，在执行代码时，我面临以下异常：

```
Exception in thread "main" org.hibernate.hql.ast.QuerySyntaxException: Employee is not mapped [FROM Employee] 
```

我的数据库是本地安装的（Oracle 10g XE）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:42:29.090

HQL 仅使用实体、映射属性和关联。从不表和列。所以正确的查询是`from Employee`。

如果您不映射实体中的所有表列，则表中的每次插入和更新都将完全忽略其他列。这意味着它们将保留其默认值或当前值。

您得到的异常 IIRC 意味着您只是忘记将实体添加到休眠配置文件中的映射实体列表中。

# ios - Jenkins 在 iOS 项目中没有看到 3-rd 方库

> ID：13029524
> 
> 赞同：1
> 
> 时间：2012-10-23T11:33:42.023
> 
> 标签：ios, jenkins

我有一个 iOS 项目，其中包含`myLibrary.a`带有标题的静态库。它的标题之一 ( `MyHeader.h`) 我包含在`MyProject-Prefix.pch`

但是当我运行 Jenkins 来构建我的项目时，我得到了错误：

```
#import "MyHeader.h" file not found 
```

这是什么原因？如何解决？

# java - 在Android中错过了for循环

> ID：13029527
> 
> 赞同：1
> 
> 时间：2012-10-23T11:33:50.690
> 
> 标签：java, android, for-loop

我在 Android 中有一个活动，它获取 Web 服务的结果并将其放入适配器以显示项目列表。我为此调用创建了一个侦听器接口，`OnLoadCompleteListener`并且我的此活动的侦听器看起来像

```
mListener = new OnLoadCompleteListener() {

    @Override
    public void onPostExecute(RootWebService service) {
        if(service instanceof WebService) {
            //gets the number of items
            int total = ((WebService) service).getCount();
            for(int i=0; i<total; ++i) {
                //Log.d("ITEM", "inserting " + i);
                Item item = ((WebService) service).get(i);
                //our adapter class automatically receives items
                mAdapter.addItem(item);
            }
        }
    }
}; 
```

现在这是奇怪的一点：监听器被击中，`total`被设置为 12（我要求的项目数），然后 for 循环被完全绕过。适配器仍然是空的，屏幕几乎什么也没有显示。

但是，如果注释掉的`Log.d(...)`调用被激活，则循环工作。

为什么？回调正在从 UI 线程运行，该`getCount()`方法正在返回正确的值，并且此适配器以前工作过。到底发生了什么？

顺便说一句，是我为此目的编写`mAdapter`的子类的一个实例，方法如下所示：`Adapter``addItem(Item)`

```
public synchronized void addItem(Item item) {
    mItems.add(item);
    notifyDataSetChanged();
} 
```

`mItems`正是您所期望的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:37:26.740

我相信你需要做一些类似`invalidate`或类似的事情，这几乎只是刷新适配器中的数据。

我认为是这个。

`myListView.getAdapter().notifyDataSetChanged();`

如果这不起作用，它可能是......

`myListView.invalidate();`

# haskell - 使函数成为向量类型类的实例

> ID：13029532
> 
> 赞同：8
> 
> 时间：2012-10-23T11:34:10.460
> 
> 标签：haskell, types, typeclass

我有一个用于数学向量的自定义类型类

```
{-# LANGUAGE MultiParamTypeClasses, FlexibleInstances #-}

class Vector v a where

    infixl 6 <+>
    (<+>) :: v -> v -> v  -- vector addition

    infixl 6 <->
    (<->) :: v -> v -> v  -- vector subtraction

    infixl 7 *>
    (*>)  :: a -> v -> v  -- multiplication by a scalar

    dot   :: v -> v -> a  -- inner product 
```

我想把数字`a`和函数`a -> vector`变成类的一个实例。数字很​​简单：

```
instance Num a => Vector a a where
    (<+>) = (+)
    (<->) = (-)
    (*>)  = (*)
    dot   = (*) 
```

而且我认为函数也很容易（好吧，除了`dot`，但我可以忍受）

```
instance Vector b c => Vector (a -> b) c where
    f <+> g = \a -> f a <+> g a
    f <-> g = \a -> f a <-> g a
    c *>  f = \a -> c *> f a
    dot     = undefined 
```

但是，我收到以下错误：

```
Ambiguous type variable `a0' in the constraint:
  (Vector b a0) arising from a use of `<+>'
Probable fix: add a type signature that fixes these type variable(s)
In the expression: f a <+> g a
In the expression: \ a -> f a <+> g a
In an equation for `<+>': f <+> g = \ a -> f a <+> g a 
```

我如何告诉 GHC 该实例对*所有*类型都有效`a`？我应该在哪里添加类型签名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T17:13:19.347

类型族绝对是解决这个问题的最好方法

```
{-# LANGUAGE TypeFamilies, FlexibleContexts #-} 
class VectorSpace v where
    type Field v

    infixl 6 <+>
    (<+>) :: v -> v -> v  -- vector addition

    infixl 6 <->
    (<->) :: v -> v -> v  -- vector subtraction

    infixl 7 *>
    (*>)  :: Field v -> v -> v  -- multiplication by a scalar

    dot   :: v -> v -> Field v  -- inner product 
```

从数学上讲，要使用函数创建向量空间，您必须重用相同的字段：

```
instance VectorSpace b => VectorSpace (a -> b) where
    type Field (a -> b) = Field b
    f <+> g = \a -> f a <+> g a
    f <-> g = \a -> f a <-> g a
    c *>  f = \a -> c *> f a
    dot     = error "Can't define the dot product on functions, sorry." 
```

...关于类型族的好处是它们的工作方式与您解释的方式非常相似。让我们做两个向量空间的直接乘积：

```
instance (VectorSpace v,VectorSpace w, Field v ~ Field w,Num (Field v)) => VectorSpace (v,w) where
    type Field (v,w) = Field v
    (v,w) <+> (v',w') = (v <+> v',w <+> w')
    (v,w) <-> (v',w') = (v <-> v',w <-> w')
    c *> (v,w) = (c *> v, c*> w)
    (v,w) `dot` (v',w') = (v `dot` v') + (w `dot` w') 
```

`Num`您可以用自定义代数类替换上下文，但`Num`可以很好地捕捉字段的概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:35:26.740

我能够编译下面的小例子（在 Conal Elliott 的[向量空间包之后设计）：](http://hackage.haskell.org/package/vector-space)

```
{-# LANGUAGE TypeFamilies #-}

module Main
       where

class Vector v where
  type Scalar v

  infixl 6 <+>
  (<+>) :: v -> v -> v  -- vector addition

  infixl 7 *>
  (*>)  :: (Scalar v) -> v -> v  -- multiplication by a scalar

instance Vector v => Vector (a -> v) where
  type Scalar (a -> v) = (a -> Scalar v)
  f <+> g = \a -> f a <+> g a
  (*>) c f  = \a -> c a *> f a -- Can't deduce that Scalar v ~ Scalar (a -> v) 
```

可以使用功能依赖项而不是类型族来使其工作。

# android - 如何使用 adk 库

> ID：13029534
> 
> 赞同：0
> 
> 时间：2012-10-23T11:34:22.473
> 
> 标签：android

我是 android 新手，正在尝试学习 android 中的硬件交互

1.  必须root才能安装硬件驱动程序。
2.  我可以使用 adk 库进行自定义硬件开发吗？

[如此处](http://developer.android.com/guide/topics/connectivity/usb/index.html)所示，如果使用附件模式，则**附件必须为总线供电。** 但正如[这里](http://source.android.com/tech/accessories/guide/custom.html)所指定的， **附件也可以是键盘等任何东西。** 所以我很困惑：键盘如何为总线供电？

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:40:44.130

您误解了这些网站。当您想连接键盘之类的东西时，您的 android 设备必须处于主机模式。它将为键盘供电。

如果其他 USB 设备充当主机，Android 设备只会尝试从其他设备获取电力。

> 在 USB 主机模式下，Android 供电设备充当主机。设备示例包括数码相机、键盘、鼠标和游戏控制器。

# apache - 使用文件夹的 URL 重写和重定向

> ID：13029535
> 
> 赞同：0
> 
> 时间：2012-10-23T11:34:48.900
> 
> 标签：apache, .htaccess, redirect, url-rewriting

我知道有很多关于 htaccess 的问题，但是我尝试了在 Google 和 StackOverFlow 上可以找到的不同代码，但没有一个有效。

我的根目录中有以下内容：

```
index.php
.htaccess (the one I am trying to write)
controllers
    --index.php
    --mycontroller.php
models
    --mymodel.php
view
    -index.php
    --myview.php 
```

（我正在使用 MAMP&Firefox 在本地主机上工作）

我有的是这个链接

```
localhost:8888/MySite/controllers/mycontroller.php 
```

我想要的是

```
localhost:8888/MySite/mycontroller 
```

当我手动输入 url 时，我希望它被重定向到我的 MVC 代码中的正确控制器

我试过这个：

```
RewriteEngine On
RewriteBase /
RewriteRule ^/(.*)$ /controllers/$1 [L] 
```

当我转到 blabla/controllers/mycontroller.php 时它不会重定向，并且当我手动转到 blabla/mycontroller 时不明白我在问什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:07:58.593

如果您的基地在，`/MySite/`那么它需要反映`RewriteBase`：

```
RewriteEngine On
RewriteBase /MySite/

# match against the php filename
RewriteCond %{REQUEST_URI} ^/Mysite/(.*)$

# check to see if the request, routed through controllers actually points to an existing file
RewriteCond %{DOCUMENT_ROOT}/MySite/controllers/%1.php -f

# rewrite
RewriteRule ^(.*)$ controllers/$1.php [L] 
```

这应该对 URI: 进行请求，如果*控制器目录中**有*`/MySite/foo`文件，则将其重写为。`/MySite/controllers/foo.php` *`foo.php`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T00:29:53.160

这样做是为了使它工作：

```
RewriteEngine On
RewriteBase /MySite/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^.*$ controllers/$0.php [L] 
```

# java - 您如何处理需要大量内存的客户端上的 Java 应用程序（“-J-Xmx”？

> ID：13029537
> 
> 赞同：1
> 
> 时间：2012-10-23T11:34:56.610
> 
> 标签：java, memory, jvm, heap-memory

我有一个 Java SE 桌面应用程序，它使用大量内存（需要 1.1 GB）。所有目标机器（Win 7、Win Vista）都有**足够的物理内存**（至少 4GB，大多数有更多）。还有**足够的空闲内存**。

现在，当机器有一些正常运行时间并且启动和终止许多程序时，内存会变得碎片化（这是我假设的）。这会导致JVM启动时出现以下错误：

```
 JVM creation failed
  Error occurred during initialization of VM
  Could not reserve enough space for object heap 
```

在这种情况下，即使关闭所有正在运行的程序也无济于事（尽管任务管理器和其他工具报告了足够的可用内存）。唯一有帮助的是重新启动机器并启动 Java 应用程序作为第一个启动的程序之一。据我调查，Oracle VM 需要**一块连续的内存**。

*当这个数量可用但可能碎片化时，是否有任何其他方法可以为我的 java 应用程序分配大约 1.1 GB 的堆？*

我使用以下参数启动我的 JVM：

```
-J-client -J-Xss2m -J-Xms512m -J-Xmx1100m -J-XX:PermSize=64m -J-Dsun.zip.disableMemoryMapping=true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:42:38.323

> 当这个数量可用但可能碎片化时，是否有任何其他方法可以为我的 java 应用程序分配大约 1.1 GB 的堆？

使用没有碎片化虚拟内存的操作系统。例如 64 位 Windows 或任何版本的 UNIX。

顺便说一句，我很难想象这首先是怎么可能的，但我知道情况就是这样。每个进程都有自己的虚拟内存，因此它的虚拟内存安排不应该依赖于任何已经运行或之前运行过的东西。

我相信这可能是 MS-DOS TSR 时代的遗留问题。加载的共享库在内存中被赋予绝对地址（添加到签名地址空间的末尾，2 GB，高半部分为操作系统保留，最后 512 MB 为 BIOS 保留）意味着它们必须在每个内存中使用相同的地址范围程序中使用它们。随着时间的推移，最大地址由加载或使用的最低共享库确定（我不知道是哪一个，我怀疑是最低加载的）

# javascript - 不理解工作的js代码

> ID：13029538
> 
> 赞同：0
> 
> 时间：2012-10-23T11:35:10.027
> 
> 标签：javascript, jquery

请看这个：http: [//jsfiddle.net/Muj3d/8/](http://jsfiddle.net/Muj3d/8/)

假设鼠标光标打开`div_1`，现在将鼠标从 拖动`div_1`到`div_2`，如我们所见，第一次发生的动作`mouseout`和之后`mouseover`。好的，现在`alerts()`从 js 代码中删除并再次重复鼠标拖动，如我们所见，`div_2`没有删除，问题：为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:40:44.270

因为在`mouseover`div2 事件中，您再次将其显示为`block`. `alert`似乎引入了延迟。尝试将鼠标从`div_1`文档中的其他位置移动，而不是移动到`div_2`，看到它`div_2`按预期消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:42:50.913

因为这两个事件“几乎”同时触发。我说的几乎意思是`mouseover`之后的火灾`mouseout`，让 div 显示 ( `display: block`)。

如果您记录事件而不是警报，您将看到它们都按此顺序触发：http: [//jsfiddle.net/Muj3d/14/](http://jsfiddle.net/Muj3d/14/)

希望能解释一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:41:25.217

你应该使用这个：

```
$("#div_1").on("mouseout", function () {

      $("#div_2").css({
        'display': "none"
       });
     });

   $("#div_1").on("mouseover", function () {
      $("#div_2").css({
         'display': "block"
        });
   }); 
```

**使用带有 CSS 显示属性的引号。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T11:41:32.193

只需将第二个事件发送者从更改`#div_2`为`#div_1`：

```
$(document).ready(function () {

                $("#div_1").on("mouseout", function () {
                      //alert("action mouseout");
                    $("#div_2").css({display: "none"});
                 });

                  $("#div_1").on("mouseover", function () {
                       //alert("action mouseover");
                      $("#div_2").css({display: "block"});
                 });
            });​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T11:39:44.617

您的两个功能正在隐藏然后显示 div。如果没有警报提供的执行暂停，这种情况会发生得如此之快，以至于您不会注意到它。

删除以下内容：

```
 $("#div_2").css({
       display: "block"
   }); 
```

你会明白我的意思。

# android - 动画后设置 LinearLayout 的可见性

> ID：13029540
> 
> 赞同：1
> 
> 时间：2012-10-23T11:35:22.367
> 
> 标签：android, android-layout, android-linearlayout

我有一个 LinearLayout，我在我的 xml 文件中创建它的可见性设置为`Gone`. 然后我使用动画来展示它，这很好。

我淡出我`LinearLayout`的使用`AlphaAnimation`，这很好用。

**我的问题**

然而问题是，当我使用 an 收听动画`AnimationListener`并调用该`onAnimationEnd`方法时，它不会将 my 的可见性设置为`LinearLayout`，`GONE`因为我仍然可以单击其中的`ImageButtons`那些，这就是我知道它们仍然存在的方式。

这是我的 xml 和我的 LinearLayout。

```
<LinearLayout
        android:id="@+id/photoOptionBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:alpha="1"
        android:background="@color/gpsBackground"
        android:orientation="horizontal"
        android:visibility="gone">

        <ImageButton
            android:id="@+id/displayShareBtn"
            style="@android:style/Widget.Holo.Button.Borderless.Small"
            android:background="@android:color/transparent"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:padding="20dp"
            android:src="@drawable/share"
            android:contentDescription="Share the picture"/>

        <ImageButton
            android:id="@+id/displayDiscardBtn"
            style="@android:style/Widget.Holo.Button.Borderless.Small"
            android:background="@android:color/transparent"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:padding="20dp"
            android:src="@drawable/contentdiscard"
            android:contentDescription="Discard Picture"/>

    </LinearLayout> 
```

这是我的淡出方法以及侦听器。

```
AlphaAnimation alpha = new AlphaAnimation(1.0F, 0.0F);
    alpha.setDuration(PhotoDisplayFragment.FADE_DURATION); // Make animation instant
    alpha.setFillAfter(true); // Tell it to persist after the animation ends
    // And then on your layout
    final LinearLayout temp = this._photoOptionsBar;
    alpha.setAnimationListener(new AnimationListener() {

        @Override
        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub
            temp.setVisibility(View.GONE);
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

    });
    this._photoOptionsBar.startAnimation(alpha); 
```

**我的问题**

动画结束后如何设置 my `LinearLayout`to的可见性？`GONE`

**提前致谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:11:00.727

这个问题与`setFillAfter`让动画在完成后持续存在有关。删除，一切都会按预期工作。如果您需要动画中的淡入淡出，请检查`_photoOptionsBar`可见性，如果它消失了，请应用反向动画：

```
new AlphaAnimation(0.0F, 1.0F); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:38:49.867

```
final LinearLayout temp = (LinearLayout) findViewById(R.id.photoOptionBar);
temp.setVisibility(View.GONE); 
```

# c# - 如何将多行文本插入 RichTextBox？

> ID：13029543
> 
> 赞同：0
> 
> 时间：2012-10-23T11:35:29.923
> 
> 标签：c#, wpf

我正在使用一个`Xceed.Wpf.Toolkit.RichTextBox`显示保存在 RTF 中的文本。我有一个上下文菜单，可以使用此代码在插入符号位置添加一些多行文本

```
var text = "Line1" + Environment.NewLine + "Line2"
richTextBox.CaretPosition.InsertTextInRun(text); 
```

它按我的预期显示

```
Line1
Line2 
```

当我保存并重新加载文本（保存在 RTF 中）时，它显示如下：

```
Line1Line2 
```

当我查看 RTF 代码时，它在没有 CR 和 LF 的情况下保存...

为什么我的 CR/LF 消失了？在插入符号位置插入多行文本的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:46:10.073

我找到了怎么做：

```
var text = "Line1" + Environment.NewLine + "Line2"
richTextBox.Control.Selection.Text = text; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-30T20:57:12.420

将 RichTextBox.AcceptsReturn 设置为 True

[http://social.msdn.microsoft.com/Forums/vstudio/en-US/f044f15b-48a4-485c-91c0-07a0828acb98/acceptsreturn-in-a-wpf-richtextbox](http://social.msdn.microsoft.com/Forums/vstudio/en-US/f044f15b-48a4-485c-91c0-07a0828acb98/acceptsreturn-in-a-wpf-richtextbox)

# ruby-on-rails - capistrano 找不到以前的版本

> ID：13029545
> 
> 赞同：0
> 
> 时间：2012-10-23T11:35:32.117
> 
> 标签：ruby-on-rails, ruby-on-rails-3, capistrano

我刚刚使用我的 capistrano 部署了一个旧项目，它部署正常，但我需要回滚。当我尝试使用命令 'cap deploy:rollback' 回滚时，我收到此错误：

```
[Deprecation Warning] Naming tasks with before_ and after_ is deprecated, please see the new before() and after() methods. (Offending task name was before_update_code)
[Deprecation Warning] Naming tasks with before_ and after_ is deprecated, please see the new before() and after() methods. (Offending task name was after_update_code)
  * executing `deploy:rollback'
  * executing `deploy:rollback:revision'
  * executing "ls -x /home/<my user>/<my project>/releases"
    servers: ["www.my_webserver.com"]
    [www.my_webserver.com] executing command
    command finished
  * executing "rm /home/<my user>/<my project>/current; ln -s /home/<my user>/<my project>/releases/20121023110110 /home/<my user>/<my project>/current"
    servers: ["www.my_webserver.com"]
    [www.my_webserver.com] executing command
    command finished
    triggering after callbacks for `deploy:rollback:revision'
  * executing `bundler:install'
  * executing "cd /home/<my user>/<my project>/releases/20121023112609 && bundle install"
    servers: ["www.my_webserver.com"]
    [www.my_webserver.com] executing command
 ** [out :: www.my_webserver.com] bash: line 0: cd: /home/<my user>/<my project>/releases/20121023112609: No such file or directory
    command finished
failed: "rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell '1.9.2' -c 'cd /home/<my user>/<my project>/releases/20121023112609 && bundle install'" on www.my_webserver.com 
```

如果我启动“cap shell”并快速查看，我找不到它正在寻找的 20121023112609 目录。

```
cap> ls -x /home/<my user>/<my project>/releases
 ** [out :: www.my_webserver.com] 20120418231223    20120419004108  20120421030033  20120422072111  20120422101603
 ** [out :: www.my_webserver.com] 20120526035027    20120526113216  20120528100439  20120528102509  20120528135335
 ** [out :: www.my_webserver.com] 20120604090722    20120724142113  20121008114048  20121008114947  20121008125600
 ** [out :: www.my_webserver.com] 20121015121531    20121015122225  20121023110110  20121023111648 
```

我可以看到我的最新部署在那里，但它被称为“20121023111648”，而我想要恢复的上一个部署被称为“20121023110110”。

好像有时差之类的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:50:59.913

在此处查看您的答案[railsless-deploy](https://github.com/leehambley/railsless-deploy)

```
cap deploy:rollback 
```

运行上述命令进行回滚。

# iphone - 将“NSTimeInterval”（又名“double”）发送到不兼容类型“id”的参数

> ID：13029546
> 
> 赞同：0
> 
> 时间：2012-10-23T11:35:33.627
> 
> 标签：iphone, compiler-errors

得到这个错误，这里是什么意思。

```
[mediaPlayTime setText:[NSString stringWithFormat:@"%@ / %@", [self formatTime:currentTime],[self formatTime:duration]]];

- (NSString*)formatTime:(float)time{
int minutes = time / 60;
int seconds = (int)time % 60;
return [NSString stringWithFormat:@"%@%d:%@%d", minutes / 10 ? [NSString stringWithFormat:@"%d", minutes / 10] : @"", minutes % 10, [NSString stringWithFormat:@"%d", seconds / 10], seconds % 10];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:56:14.763

在.h

```
 -(NSString*)formatTime:(float)time; 
```

.m

```
 [mediaPlayTime setText:[NSString stringWithFormat:@"%@ / %@", [self formatTime:currentTime],[self formatTime:duration]]];

 - (NSString*)formatTime:(float)time{
int minutes = time / 60;
int seconds = (int)time % 60;
return [NSString stringWithFormat:@"%@%d:%@%d", minutes / 10 ? [NSString stringWithFormat:@"%d", minutes / 10] : @"", minutes % 10, [NSString stringWithFormat:@"%d", seconds / 10], seconds % 10];
} 
```

只是微小的变化解决了这个问题。

# amazon-web-services - 如何为每个 AMI/EBS 设置自动计划快照？

> ID：13029547
> 
> 赞同：11
> 
> 时间：2012-10-23T11:35:34.890
> 
> 标签：amazon-web-services, snapshot, amazon-ami

Amazon 是否支持可以为每个 AMI/EBS 配置的任何类型的自动计划快照？

我的目标是定期备份每个 AMI，而不依赖于外部脚本和类似脚本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T18:22:52.370

您可以使用 AWS 命令​​行工具自动生成 EBS 快照。只需安排一个 cron 作业或类似的作业，以`ec2-create-snapshot`在您的 ebs 卷上以所需的时间间隔运行命令。

如果您不想安装命令行工具，也可以通过 http 调用 API 来做同样的事情。

有关创建 EBS 快照的更多信息，请参阅链接。

[http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/ebs-creating-snapshot.html](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/ebs-creating-snapshot.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T11:51:04.493

使用这个 python 代码

```
from boto.ec2.connection import EC2Connection
from datetime import datetime
import sys

if __name__ == '__main__':

    conn = EC2Connection('aws_access_key_id', 'aws_secret_access_key')

    volumes_id={'vol-2354534'}

    description = 'Created by crontab  at ' + datetime.today().isoformat(' ') 

    for vol_id in volumes_id :

        snapshot  = conn.create_snapshot( vol_id ,description) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-29T14:25:04.080

我创建了一个小型 Perl 程序，[https://github.com/sciclon/EBS_Snapshots](https://github.com/sciclon/EBS_Snapshots)

一些功能： * 程序以守护程序模式或脚本模式（crontab）运行

*   您也只能选择本地附加卷或远程

*   您可以定义日志文件

*   您可以为每个卷定义快照数量

*   您可以为每个卷定义其中的频率

*   当达到删除最旧快照的限制时，频率和数量将像“循环”一样工作。

*   您可以一步调整数量我的意思是如果您有 6 个快照并且您在 3 中修改数量，该过程将自动重新调整它。

*   您可以定义一个“prescript”执行，您可以在执行快照之前添加要执行的代码，例如您想尝试卸载卷或停止某些服务，或者检查实例负载。父进程将等待退出码，“0”表示成功，您可以根据退出码定义是否继续。

*   您可以定义“后记”执行以在拍摄快照后执行任何脚本（例如一封告诉您有关它的电子邮件）

*   您可以添加“受保护的快照”以跳过您定义的快照，我的意思是它们将处于“只读”状态并且永远不会被删除。

*   当脚本以守护程序模式运行时，您可以“即时”重新配置脚本，脚本接受信号和 IPC。

*   它有一个“本地缓存”以避免多次请求 API。您可以在配置文件中添加或修改任何配置并重新加载，而不会终止进程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-15T12:43:43.423

AWS 管理控制台没有用于创建维护 EBS 快照的内置自动化功能。您可以尝试使用脚本、具有 EBS 快照基本自动化功能的第三方云管理控制台或用于 EC2 实例和 EBS 卷的基于快照的专用备份和恢复管理解决方案，这些解决方案可在 AWS 市场或其他地方获得。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-06T09:54:39.563

AWS 现在提出了数据生命周期管理（请参阅[文档](https://aws.amazon.com/about-aws/whats-new/2018/07/introducing-amazon-data-lifecycle-manager-for-ebs-snapshots/)），这可能会对您有所帮助。AWS 将其定义为*“计划和管理 EBS 快照的创建和删除”的一种方式*

您可以从 EC2 控制台访问它并搜索“Lifecycle Manager”。然后您将被引导开始

# jquery - 限制纵向图像的图像宽度/保持纵横比

> ID：13029549
> 
> 赞同：8
> 
> 时间：2012-10-23T11:35:41.443
> 
> 标签：jquery, css, flexslider

我在响应式站点上设置了 flexslider。我正在创建的滑块同时采用横向和纵向图像。我已经`smoothHeight: true`设置了高度以适应图像。

在最大的媒体查询中，flexslider 容器的宽度为 750 像素。这对于横向图像来说很好，但纵向图像变得太大了。纵向图像的宽度设置为与容器相同的大小 - 750px 宽，因此高度至少是其两倍，因此您无法在不滚动的情况下查看整个图像。

在 css 中，我尝试`max-height: 750px`了解决高度问题的设置，但 flexslider 然后拉伸图像以适应 750px 宽 x 750px 高。

有谁知道让 flexslider 保持纵横比并根据 调整图像宽度的任何方法`max-height`？这样肖像图像的高度为 750 像素，但保持其纵横比。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T19:49:14.370

我不明白您在谈论 Flexslider 的哪些功能 - 缩放图像或滚动工具栏中的缩略图？不管怎样，两种情况都有一个解决方案：

```
<style>
figure {
    outline: green solid 1px;
    padding: 2px;
}
img {
    width: 100%;
    height: 100%;
    display: block;
    position: relative;

    outline: red solid 1px;
    opacity: .5;
}
.scale img{
    width: auto;
    height: auto;
    max-width: 100%;
    max-height: 100%;
    margin: 0 auto;
    vertical-align: middle;
}
.toheight img{
    max-width: none;
}
</style>
<figure class="scale toheight" width="200" height="200">
    <img src="http://placekitten.com/250/300"/>
</figure> 
```

容器内裁剪或缩放图像的解决方案[http://jsfiddle.net/iegik/ZzXru/](http://jsfiddle.net/iegik/ZzXru/)

相关问题：[如何水平对齐裁剪的元素？](https://stackoverflow.com/questions/13200755/how-to-align-cropped-element-horizontally/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-13T15:27:38.193

默认情况下，图像应保持其比例，除非您也`width: 100%;`有一套，在这种情况下，您应该更改它以使用，`width: auto,`然后您`max-height: 750px`将采取先例

# java - 从一种方法返回多个值

> ID：13029550
> 
> 赞同：2
> 
> 时间：2012-10-23T11:35:46.363
> 
> 标签：java

我有一个类 UserFunction，它有两个方法 getAudioFunction 和 getPromptFunction 并返回 String 值，我的问题是我想在一个方法中返回这两个值我怎么能做到这一点

用户函数.java

```
 public class UserFunction{ 

        Map<String,PromptBean> promptObject=new HashMap<String,PromptBean>(); 
        Map<String,AudioBean> audioObject = new HashMap<String,AudioBean>();

        XmlReaderPrompt xrpObject=new XmlReaderPrompt();
        public String getAudioFunction(String audioTag,String langMode )
        {       
            Map<String, AudioBean> audioObject=xrpObject.load_audio(langMode);          
            AudioBean audioBean=(AudioBean)audioObject.get(audioTag);           
            String av=StringEscapeUtils.escapeXml(audioBean.getAudio());            
            return av;
        }
        public String getPromptFunction(String promptTag,String langMode )
        {           
            Map<String, PromptBean> promptObject=xrpObject.load(langMode);
            PromptBean promptBean= (PromptBean)promptObject.get(promptTag);             
            String pv=StringEscapeUtils.escapeXml(promptBean.getPrompt());          
            return pv;
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:37:45.443

您需要返回一个包含两个值的对象。您可以为此目的创建一个类。该类可以有两个用于检索值的 getter 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T11:36:46.577

在 java 中，一个方法不能返回多个值。您可以将多个值设置为`Map`或`List`创建自定义类并返回该对象。

```
public Map<String,String> getAudioAndPromptFunction(String audioTag,String langMode )
        {       
            Map<String,String> map =new HashMap();
            ...
            map.put("audioBean",StringEscapeUtils.escapeXml(audioBean.getAudio()));
            map.put("promptBean",StringEscapeUtils.escapeXml(promptBean.getPrompt());
            return map;
        } 
```

或者您可以创建一个自定义 bean 类。

```
public class AudioPrompt{
     private String  audioBean;
     private String  promptBean;
     ...
}

public AudioPrompt getAudioAndPromptFunction(String audioTag,String langMode )
{       
     AudioPrompt audioPrompt =new AudioPrompt();
     ...
     audioPrompt.set(StringEscapeUtils.escapeXml(audioBean.getAudio()));
     audioPrompt.set(StringEscapeUtils.escapeXml(promptBean.getPrompt());
     return audioPrompt ;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T11:37:58.727

您需要返回一个包含这两个值的对象。这可以是一个包含两个元素的数组、一个`Pair<A,B>`类（它包含两个通用值，通常来自一些泛项目实用程序库），或者一个特定于方法的类，例如：

```
public class UserFunctionXmlPairing {
    public final String audioBeanXml;
    public final String promptBeanXml;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T11:38:51.113

您可以将所有想要的值包装到一个对象中并返回：

```
public class Prompts {
    private Map<String, Object> prompts = new HashMap<String, Object>();

    public void addPrompt(String name, Object prompt) { 
        this.prompts.put(name, prompt);
    }

    public Object getPrompt(String name) { 
        this.prompts.get(name);
    }
} 
```

如果你有一个通用的超类或接口`AudioBean`，那就更容易了。`PromptBean`

我的偏好是在你的类名中丢失“Bean”。 `AudioPrompt`并且`TextPrompt`会是首选。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T11:39:35.483

创建一个包含两个字符串的新类并返回它。

```
class AudioPromptPair {
    private String audio;
    private String prompt;
    public AudioPromptPair(String audio, String prompt) {
        this.audio = audio;
        this.prompt = prompt;
    }

    // add getters and setters
} 
```

# ios - 在 iOS 6 Xcode 4.5 中将 UISwitch 文本更改为是/否

> ID：13029551
> 
> 赞同：0
> 
> 时间：2012-10-23T11:35:47.917
> 
> 标签：ios, uiswitch

> **可能重复：**
> [更改 UISWitch 的标签](https://stackoverflow.com/questions/981061/change-label-of-uiswitch)

如何在 ios6 xcode 4.5 中使用是/否创建 uiswitch。尝试自定义开关但未达到结果。任何帮助将不胜感激。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:39:07.763

制作一个 UISwitch 控件。然后添加一个侦听控件的 ValueChanged 的​​操作。请记住在正确的位置将 UISwitch 添加到您的视图中，这里我只是进行 40 x 40 切换。

```
UISwitch *switchControl = [[UISwitch alloc] initWithFrame:CGRectMake(0, 0, 40, 40)];
[switchControl addTarget:self action:@selector(switchTapped:) forControlEvents:UIControlEventValueChanged]; 
```

在 switchTappedMethod 中，您可以找到具有此值的状态：

```
-(void) switchTapped: (id) sender {
UISwitch *switchControl = (UISwitch*) sender;
BOOL value = switchControl.isOn;
} 
```

# java - 无法使用 PayPal PDT 从我的 JSP 应用程序获得响应

> ID：13029560
> 
> 赞同：1
> 
> 时间：2012-10-23T11:37:10.413
> 
> 标签：java, jsp, paypal

我`PayPal PDT`在我的 JSP 应用程序中使用过，代码工作得更早。但现在我没有得到 PDT 的任何回应，甚至没有“失败”

更清楚的是，当我`read data`从 PayPal 网站时，`BufferedReader.isReady()`显示的是假的。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T11:17:16.963

其 PayPal 特定问题请阅读 PapPay 或服务集成提供商提供的文档。

如果您将系统与第三方系统集成，您必须有不同的响应代码及其含义。

# python - Skype4Py 附加功能第二次不起作用

> ID：13029563
> 
> 赞同：2
> 
> 时间：2012-10-23T11:37:29.407
> 
> 标签：python, skype, skype4py

我正在尝试编写一个会阻止一些用户的小型 Skype 机器人。

这是我的代码：

```
import Skype4Py

skype = Skype4Py.Skype(Transport='x11')

skype.Attach()
print "Attachment status is " + str(skype.AttachmentStatus)
...
user._SetIsBlocked(True) 
```

我第一次运行这个脚本时，它给了我**1**作为**skype.AttachmentStatus**，并阻止了我选择的用户。但是如果我第二次运行它，它会给我**0**作为**skype.AttachmentStatus**，并且不会阻止我选择的用户。

如果我等待一段时间（大约 5 分钟）然后尝试再次运行脚本，它就会开始工作。但只有一次。我将不得不再等五分钟才能再次运行它。

有人可以帮助或解释为什么会这样吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:57:59.097

此错误的解决方案是将您自己的事件处理程序添加到 skype.OnAttachmentStatus

例子：

```
# Attachment status handler
def OnAttach(status):
  print 'API attachment status: ' + skype.Convert.AttachmentStatusToText(status)
  if status == Skype4Py.apiAttachAvailable:
    skype.Attach()

  if status == Skype4Py.apiAttachSuccess:
   print '*************************************************'  

...

# Creating Skype object, assigning handler functions and attaching to Skype
skype = Skype4Py.Skype(Transport='x11')
skype.OnAttachmentStatus = OnAttach
skype.OnMessageStatus = OnMessageStatus 
```

之后，每次运行它都会起作用。

# java - 在 servlet 中捕获类似 cgi 的参数？

> ID：13029565
> 
> 赞同：0
> 
> 时间：2012-10-23T11:37:51.333
> 
> 标签：java, servlets

我有一个`@WebServlet("/myServ")`. 如果输入，如何检索浏览器路径`/myapp/myServ?param=123`？我可以以某种方式获得类似字符串的“查询”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:50:31.933

除非我遗漏了什么，否则[HttpServletRequest#getQueryString](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getQueryString%28%29)应该这样做。

# javascript - d3.js - 如何插入新的兄弟元素

> ID：13029571
> 
> 赞同：30
> 
> 时间：2012-10-23T11:38:14.780
> 
> 标签：javascript, dom, d3.js

我在将新的兄弟姐妹插入现有元素时遇到问题。

我有这个结构

```
<svg> 
  <g> 
    <path class="data"></path> 
    <path class="data"></path> 
  </g>
</svg> 
```

想要这个结构

```
<svg> 
  <g> 
    <path class="data"></path> 
    <text></text>
    <path class="data"></path> 
    <text></text>
  </g>
</svg> 
```

但如果我使用 d3.js 插入功能

```
d3.select("g").insert("text", "path.data"); 
```

我得到以下信息（尽管按类名选择）

```
<svg> 
  <g> 
    <text></text>
    <path class="data"></path> 
    <path class="data"></path> 
  </g>
</svg> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-23T13:56:13.487

首先，值得注意的是insert函数中的第二个参数是一个**before**选择器。此外，链式运算作用于左侧结果。

所以你已经完成了

```
// select all the g elements (only 1)
d3.select("g")
    // For each g, insert a text element before "path.data"
    .insert("text", "path.data"); 
```

您想为每个子“.data”执行一个操作，因此您需要选择每个“.data”元素并为每个元素执行一个操作。我不完全确定 d3 如何期望您在特定子项之后插入一个元素。我发现使用 DOM API 来创建和插入元素要容易得多，但是使用 d3.each 函数来迭代选择。

```
d3.selectAll("g > .data").each(function () {
    var t = document.createElement('text');
    this.parentNode.insertBefore(t, this.nextSibling);       
});​ 
```

# java - 错误：找不到“ParallelIndexation”的类文件

> ID：13029572
> 
> 赞同：0
> 
> 时间：2012-10-23T11:38:14.983
> 
> 标签：java, hadoop, java-native-interface, native-code, javah

我编写了这个 Java hadoop 程序，它将执行文件的并行索引。该文件是在 eclipse 中创建的

```
package org.myorg;

import java.io.*;
import java.util.*;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;

public class ParallelIndexation {

public static class Map extends MapReduceBase implements Mapper<LongWritable, Text, Text, IntWritable> { 
     private final static IntWritable zero = new IntWritable(0); 
     private Text word = new Text();
     public void map(LongWritable key, Text value, OutputCollector<Text, IntWritable> output, Reporter reporter) throws IOException { 
        String line = value.toString();
        int CountComputers;
        //DataInputStream ConfigFile = new DataInputStream( new FileInputStream("countcomputers.txt"));
        FileInputStream fstream = new FileInputStream("/usr/countcomputers.txt"); // путь к файлу
        DataInputStream in = new DataInputStream(fstream);
        BufferedReader br = new BufferedReader(new InputStreamReader(in));
        String result = br.readLine(); // читаем как строку
        CountComputers = Integer.parseInt(result); // переводим строку в число
        //CountComputers=ConfigFile.readInt();
        in.close();
        fstream.close();
        ArrayList<String> paths = new ArrayList<String>();
        StringTokenizer tokenizer = new StringTokenizer(line, "\n");
        while (tokenizer.hasMoreTokens()) 
        {
          paths.add(tokenizer.nextToken());
        }
        String[] ConcatPaths= new String[CountComputers];
        int NumberOfElementConcatPaths=0;
        if (paths.size()%CountComputers==0)
        {
            for (int i=0; i<CountComputers; i++)
            {
                ConcatPaths[i]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers;
                for (int j=1; j<paths.size()/CountComputers; j++)
                {
                    ConcatPaths[i]+="\n"+paths.get(i*paths.size()/CountComputers+j);
                }
            }
        }
        else
        {
            NumberOfElementConcatPaths=0;
            for (int i=0; i<paths.size()%CountComputers; i++)
            {
                ConcatPaths[i]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers+1;              
                for (int j=1; j<paths.size()/CountComputers+1; j++)
                {
                    ConcatPaths[i]+="\n"+paths.get(i*(paths.size()/CountComputers+1)+j);
                }           
            }
            for (int k=paths.size()%CountComputers; k<CountComputers; k++)
            {
                ConcatPaths[k]=paths.get(NumberOfElementConcatPaths);
                NumberOfElementConcatPaths+=paths.size()/CountComputers;                
                for (int j=1; j<paths.size()/CountComputers; j++)
                {
                    ConcatPaths[k]+="\n"+paths.get((k-paths.size()%CountComputers)*paths.size()/CountComputers+paths.size()%CountComputers*(paths.size()/CountComputers+1)+j);
                }                   
            }
        }
        //CountComputers=ConfigFile.readInt();
        for (int i=0; i<ConcatPaths.length; i++)
        {
            word.set(ConcatPaths[i]);
            output.collect(word, zero);
        }
     }
}

public static class Reduce extends MapReduceBase implements Reducer<Text, IntWritable, Text, LongWritable> { 
    public native long Traveser(String Path);
    public native void Configure(String Path);
    public void reduce(Text key, <Iterator>IntWritable value, OutputCollector<Text, LongWritable> output, Reporter reporter) throws IOException { 
        long count;
        String line = key.toString();
        ArrayList<String> ProcessedPaths = new ArrayList<String>();
        StringTokenizer tokenizer = new StringTokenizer(line, "\n");
        while (tokenizer.hasMoreTokens()) 
        {
          ProcessedPaths.add(tokenizer.nextToken());
        }       
        Configure("/etc/nsindexer.conf");
        for (int i=0; i<ProcessedPaths.size(); i++)
        {
            count=Traveser(ProcessedPaths.get(i));
        }
        output.collect(key, new LongWritable(count));
      }
    static
    {
        System.loadLibrary("nativelib");
    } 
}

public static void main(String[] args) throws Exception { 
      JobConf conf = new JobConf(ParallelIndexation.class); 
      conf.setJobName("parallelindexation");
      conf.setOutputKeyClass(Text.class);
      conf.setOutputValueClass(LongWritable.class);
      conf.setMapperClass(Map.class);
      conf.setCombinerClass(Reduce.class);
      conf.setReducerClass(Reduce.class);
      conf.setInputFormat(TextInputFormat.class);
      conf.setOutputFormat(TextOutputFormat.class);
      FileInputFormat.setInputPaths(conf, new Path(args[0]));
      FileOutputFormat.setOutputPath(conf, new Path(args[1]));
      JobClient.runJob(conf);
  } 
} 
```

我通过命令编译了程序

```
javac -classpath /export/hadoop-1.0.1/hadoop-core-1.0.1.jar -d folder/classes folder/src/ParallelIndexation.java, 
```

然后对于本机方法，我尝试创建 .h 文件

```
root@one:/export/hadoop-1.0.1/folder/classes/org/myorg# javah -jni ParallelIndexation 
```

收到以下错误

```
Error: Could not find class file for 'ParallelIndexation'. 
```

在目录`/export/hadoop-1.0.1/folder/classes/org/myorg`中有3个文件：

*   ParallelIndexation$Map.class
*   ParallelIndexation$Reduce.class
*   ParallelIndexation.class

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:03:10.457

您的班级是`org.myorg.ParallelIndexation`，但您正试图`javah`在班级上运行该工具`ParallelIndexation`。您必须在`/export/hadoop-1.0.1/folder/classes/`（而不是在包文件夹中）运行命令，并且必须将包添加到类名：`javah -jni org.myorg.ParallelIndexation`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-24T10:46:14.020

我有接缝问题，我做了：在“cmd.exe”上

**D:\Mes études\recherche\JMETALHOME\jmetal\problems\DTLZ>javac DTLZ1.java**

**D:\Mes études\recherche\JMETALHOME\jmetal\problems\DTLZ>javah -jni jmetal.problems.DTLZ.DTLZ1**

**D:\Mes études\recherche\JMETALHOME\jmetal\problems\DTLZ>**

它有效。

# excel - 过滤数据透视表中的字段并获取可见值

> ID：13029573
> 
> 赞同：0
> 
> 时间：2012-10-23T11:38:21.100
> 
> 标签：excel, vba

考虑我有这样的数据

```
Company     Department  Size
=================================
HCL         BFS         50
HCL         Insurance   60
CTS         BFS         20
CTS         Insurance   30
CTS         Healthcare  50 
```

![不带任何过滤器的枢轴](../Images/ef9cb28dc9da6cf4ee42708917345bff.png)

在这里，假设我想过滤掉 BFS 并找到每个公司级别的剩余总数，如下所示

情况1：![Pivot With filter - 在使用过滤器删除 BFS 作为部门之后](../Images/a15d5c30cd8ea5248e801da7a39a1d48.png)

```
 Company    Department  Total
 CTS    Healthcare  50
        Insurance   30
 CTS Total           80
 HCL    Insurance   60
 HCL Total           60
 Grand Total        140 
```

案例二：![过滤部门后只有单个公司的数据透视表](../Images/31b6671f6f255ed0e3353b3ca444a308.png)

```
 CTS    Healthcare  50
 CTS Total           50
 Grand Total        50 
```

## 尝试相同的宏代码

```
 For Each V In Set visiblePivot = ActiveSheet.PivotTables("PivotTable2") _
           .PivotFields("Company").VisibleItems
 str = (str & "," & V)
 Next V
 MsgBox str 
```

## 那么在运行宏时我会得到什么输出？

## 编辑：

对于案例 1，我将输出作为 HCL 和 CTS

```
 ---------------------------
 Microsoft Excel
 ---------------------------
 ,CTS,HCL
 ---------------------------
 OK   
 --------------------------- 
```

对于案例 2，我将输出作为 HCL 和 CTS。

```
 ---------------------------
 Microsoft Excel
 ---------------------------
 ,CTS,HCL
 ---------------------------
 OK   
 --------------------------- 
```

## 那么我期望输出是什么？

对于案例 1，我希望输出为 HCL 和 CTS

```
 ---------------------------
 Microsoft Excel
 ---------------------------
 ,CTS,HCL
 ---------------------------
 OK   
 --------------------------- 
```

对于案例 2，我希望输出仅为 CTS。

```
 ---------------------------
 Microsoft Excel
 ---------------------------
 ,CTS
 ---------------------------
 OK   
 --------------------------- 
```

## 总结

请让我知道如何在过滤`Company`字段时使用宏获得可见的名称`Department`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:16:18.573

这是我最终用来在数据透视表中查找过滤数据的代码

```
Sub getVisibleFields()
    ' this will return all the rows that are visible in the 
    'pivot table. Even the subtotal rows
    Set visibleCompany = ActiveSheet.PivotTables("PivotTable2") _
               .PivotFields("Company").DataRange
    For Each V In visibleCompany
        ' different values can be checked to filter out unwanted data
        'to find data like "CTS Total           80"
        If InStrRev(visibleCompany(i + 1), " Total") > 0 Then
            MsgBox ("Total is " & visibleCompany(i + 1)
        End If
        str = (str & "," & V)
    Next V
    MsgBox str
 End Sub 
```

# asp.net - WebDeveloper 数据库 webform 表 - 输入版本，如用于输出的 gridview

> ID：13029577
> 
> 赞同：0
> 
> 时间：2012-10-23T11:38:32.583
> 
> 标签：asp.net, visual-studio-2010, webforms

在visual Web devlepoer中，如果我的项目数据库有几个表，我希望用户将数据输入到我的webform并提交到我的数据库中，我的项目中有我的数据库连接是否有一种简单的方法可以在表单中复制我的表字段。就像输入的gridview一样。

我可以手动坐在这里并在 html 中创建表格并添加文本框等，但是当表格已经在数据库资源管理器中可见时似乎有点多余。

想确定我没有采用简单过程的长版本。有很多简单的表格和表格可以用来查看数据库数据，但是提交它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:53:20.270

后端与 UI 完全分离。以后可能会决定以不同的顺序对字段进行分组，等等。使用 GridView 只会增加不必要的开销。

从 UI 设计的角度来看，一个页面上不应该有太多的表单字段，因为用户不太可能完成表单 - 基本的可用性问题。如果是这种情况，请尝试使用向导控件拆分字段，并可能让用户了解他们的进度（第 2 页，共 5 页等）。

# r - 设置 R 控制台的标题

> ID：13029587
> 
> 赞同：4
> 
> 时间：2012-10-23T11:39:04.287
> 
> 标签：r

一个我找不到答案的快速问题。

我想知道是否可以将 R 控制台的标题设置为其他内容（在 Windows 上使用 RGui）。

我正在考虑的主要用途是在运行需要很长时间才能完成的脚本时显示某种进度信息。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T15:17:10.017

在windows中你可以使用这个`setWindowTitle`功能，你给它起的名字会显示在窗口的顶部，或者是最小化时图标上的标签。

我的 .Rprofile 中有以下行：

```
utils::setWindowTitle(getwd()) 
```

因此，R 的每个实例都有一个标签，显示它在哪个文件夹/目录中打开（我经常一次打开几个打开，在我处理不同项目时在它们之间切换）。这对于通过双击 .Rdata 文件并跟踪哪个窗口是哪个窗口来启动 R 非常有用。

但是为了指示长期运行过程的进度，进度条可能是更好的方法。在windows中你可以使用`winProgressBar`或在任何你可以使用的平台上使用`txtProgessBar`或`tkProgressBar`（第二个需要tcltk包）。增长条是进度的快速可视化，您还可以使用标签给出特定的迭代或其他信息。

# azure - 添加 Azure 云项目时缺少样式 (.css)

> ID：13029590
> 
> 赞同：1
> 
> 时间：2012-10-23T11:39:17.220
> 
> 标签：azure, azure-web-roles

我正在将现有网站转换为 Azure 云服务项目，但是当我添加此云项目并调试我的项目时，网页缺少所有样式，即一页中的所有选项卡。我已经看到不采用 .css

有人可以告诉我这里发生了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T08:16:41.563

您可以尝试更改云项目的属性 -> Web -> 使用 IIS Web Server .. 为我工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:23:41.837

验证 *.css 文件，您需要确保**Build Action**设置为**Content**：

![在此处输入图像描述](../Images/e85eee7ead9811676ada89e47ae024a0.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T13:14:23.897

拳头我不知道我是否必须写这个作为答案，如果不是很抱歉，我会纠正它。

关于我的问题，我很难将它发布到 Azure，当我这样做时，它工作正常。我仍然不知道的是为什么当我在 VS 中使用云项目进行调试时缺少样式和图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T15:18:00.327

我有同样的问题，我发现它来自我对 IIS Express 的使用。

问题是可以在 Windows 应用程序日志中看到的错误：

来源：IIS Express

“为缓存压缩内容指定的目录 [...] 无效。正在禁用静态压缩。”

# javascript - 获取最接近的值

> ID：13029592
> 
> 赞同：0
> 
> 时间：2012-10-23T11:39:21.840
> 
> 标签：javascript

我现在已经遇到过几次这个问题，但我没有一个很好的解决方案。

假设我有一个不固定间隔的简单数字数组，`myArray`. 我想要一个可以取整数（可能为负数）并返回数组中最接近的值的函数。在我的示例中，我希望它返回`850`。

我想我需要使用`upper`and`lower`变量来计算出哪个数组值最接近我传入的值。

我是否走在正确的轨道上，或者是否有更有效的方法来实现这一目标，有人可以在正确的方向上推动我吗？

这是我到目前为止所拥有的：

```
var myArray = [0,850,1800,2500,3300];

function snapTo(value){
    var upper = -1;
    var lower = -1;

    // if the value is bigger than the last array value
    if(value > myArray[myArray.length-1]){
        upper = myArray[myArray.length-1];
        lower = myArray[myArray.length-2];
    // if the value is smaller than the first array value
    } else if(value < myArray[0]){
        upper = myArray[1];
        lower = myArray[0];
    } else {
        for(var i = 0, i < myArray.length, i++){
            if(value > myArray[i]){
                upper = myArray[i];
                lower = myArray[i-1];
                break;
            }
        }
    }

    // x being the index of the closest array value to the one passed in
    return myArray[x];
}

snapTo(1200); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:41:46.870

您先生正在寻找[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)而不是那个！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:42:09.710

我会提醒您，您不需要特别检查该值是大于还是小于前一个数组值。相反，只需计算出您的目标值和“当前”数组元素之间的绝对差异。并将其与迄今为止的最佳差异进行比较，以确定该数组索引是否是迄今为止的获胜候选者......

# c# - 数据库中用户表中的会话 id - 我应该使用 asp.net 会话 id 还是通过序列创建一个

> ID：13029593
> 
> 赞同：0
> 
> 时间：2012-10-23T11:39:26.013
> 
> 标签：c#, asp.net, sql-server, oracle10g, security

我正在 asp.net 4.0 中设计一个内部应用程序，并且必须使用窗口身份验证。数据库和应用程序都位于不同的服务器上。

**环境**

Asp.net 4.0、Vb.net 4.0、Oracle 10g、window server 2003 和 IIS 6.0

**设想**

当用户登陆第一页时，系统将为该用户分配一个会话ID，该ID将保存在LAST_SESSION_ID列下的用户表中的数据库中。所以每次他访问应用程序（或新会话）时，系统都会覆盖这个 LAST_SESSION_ID 列。我会将会话 ID 保存在会话变量中，并将其传递给每个 DML 事务的 oracle 存储过程，并将此 ID 与 LAST_SESSION_ID 列中的值进行比较，如果它们相同，则表示用户的会话仍然处于活动状态。

**问题**

> *   我想知道我是否应该在 oracle 数据库中创建唯一的会话 ID（通过序列）或使用由 asp.net session 'HttpContext.Current.Session.SessionID' 生成的一个？要获得唯一的 asp.net 会话 ID，我必须使用以下设置设置 webconfig 文件，我不知道这是否是个好主意，因为我以前没有使用过这种技术。

> *   对上述情况有更好的解决方案吗？例如，我正在设计的系统适用于 200-300 个用户（Timesheet APP），这是一个内部应用程序，因此安全性不是一个大问题。我不能在用户将请求发送到数据库服务器之前检查会话，而不是在存储过程中验证会话吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:09:44.823

如果这是出于安全原因，答案是您需要根据 Web 服务器验证的用户名在每个请求中检查用户的访问权限。

与其担心他们是如何到达第 2 页的，不如问“他们是否可以看到第 2 页”。

# xcode - Xcode 项目中的 CPPFLAGS 等效项

> ID：13029598
> 
> 赞同：0
> 
> 时间：2012-10-23T11:39:40.510
> 
> 标签：xcode, gcc, makefile, build-process

所以我试图将一个make文件移植到Xcode。不知道从哪里放东西`CPPFLAGS`。当前`CPPFLAGS = -I../src/`意味着预处理器将在尝试解析路径时将 ../src/ 附加到包含指令。我无法修改源文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:41:44.423

`-I`如果将所有源文件和头文件放入 Xcode 项目中，则不需要任何显式开关。Xcode 将在构建时生成所有必要的包含指令，因为它知道所有头文件的位置。

# math - 在保持比率相同的情况下缩放窗口

> ID：13029609
> 
> 赞同：1
> 
> 时间：2012-10-23T11:40:28.110
> 
> 标签：math, scaling

我有一个可调整大小的窗口和一个图表，它由 11 行不同的值组成，范围从 0 到 1000。我会用什么数学来计算这个？

我希望数据范围从 0 到 1000，使其等于屏幕上的 0-1000 像素。但是，如果我将窗口大小调整为 640 / 480，则图表只会调整得不那么详细。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:49:13.987

这是一个简单的比例：如果 640 像素条表示 1000 的值，则 Y 的值将表示 640 * Y / 1000 像素条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:49:30.070

您没有指定编程语言。
在 HTML 中，您可以将任何内容设置为 %，因此您可以将大小计算为最大值的 % - 即 550（最大 1000 个）= 55%
如果您使用 % size，它将自动根据屏幕/窗口大小进行调整。

如果您指定**您**选择的编程语言，我们可能会为您提供更多帮助

# android - 地图图块不能仅使用发布证书 android 加载？

> ID：13029610
> 
> 赞同：3
> 
> 时间：2012-10-23T11:40:31.067
> 
> 标签：android, maps, tile

我已经检查了很多关于未在 android 设备上加载的地图图块的问题。我无法修复我遇到的相同错误。

1.  我可以使用调试密钥在我的应用程序中的模拟器和设备上测试我的地图视图。它工作得很好。我已经为我的调试证书生成了一个 maps api 密钥。

2.  然后我用它的 MD5 为我的发布证书创建了一个 maps api 密钥。我已将其添加到我的地图视图中，现在该应用程序无法正常工作。

    *   我在清单文件的正确位置添加了 android 互联网权限。
    *   我已经正确地生成了 MD5 指纹，就像我为调试密钥所做的那样。
    *   我的应用程序中只有一个地图视图，所以我刚刚更改了布局 xml 中的那个 api 键。
    *   为调试和发布生成密钥的唯一区别是：在发布证书的 keytool 的命令选项中，我只被询问了一次密码，我认为这是存储通行证。从来没有问过我的密钥通行证（实际上它们是相同的）

我像这样生成了调试密钥库 MD5

```
$ keytool -list -alias androiddebugkey \
-keystore <path_to_debug_keystore>.keystore \
-storepass android -keypass android 
```

我像这样创建了发布密钥 MD5

```
 $ keytool -list -alias myalias_name -keystore "mykeystorepath" 
```

我还用 android 商店测试了该应用程序仍然没有运气。我错过了什么？非常感谢任何帮助，谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:09:25.117

使用 eclipse 生成密钥并导出，也不要依赖 DEBUG 变量（[Android：自动选择调试/发布 Maps api 密钥？](https://stackoverflow.com/questions/3029819/android-automatically-choose-debug-release-maps-api-key)）在运行时切换密钥，因为此时已损坏，您必须导出应用程序，获取md5，获取基于这个新md5的key，切换map key，重新导出

编辑：

[https://developers.google.com/maps/documentation/android/mapkey](https://developers.google.com/maps/documentation/android/mapkey)的重要步骤

```
1) $ keytool -list -alias alias_name -keystore my-release-key.keystore (NOT DEBUG KEY)
2) https://developers.google.com/android/maps-api-signup
3) update code with new key
4) clean project & build (important to clean, eclipse doesn't always do it)
5) export with eclipse 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:46:33.197

好吧，这就是它的愚蠢之处。一切都很好，除了我将密钥放在我不使用的布局文件中。大概是我疯了。这么快

1.  即使您只是导出签名的应用程序，地图应用程序也将使用发布密钥。无需将应用程序放入 Android 商店即可运行。堆栈溢出中有一些误导性的评论说明了这一点。

2.  keytool 将询问密钥库的密码，它也将使用相同的密码来解锁别名密钥。只有当它不同时，它才会再次询问。

3.  带有释放键的地图应用程序也可以与模拟器一起使用。只需 rmbr 即可使用 install adb ""

# mysql - Mysql 连接和连接

> ID：13029623
> 
> 赞同：6
> 
> 时间：2012-10-23T11:41:00.917
> 
> 标签：mysql, sql, join, concatenation

我有两张桌子：

```
table_a:            table_b
+----+------+    +----+---------+------+
| id | name |    | id | relation| name | 
+----+------+    ++++++---------+------+
| 1  | bob  |    | 1  | friend  | chris|
| 2  | jim  |    | 1  | friend  | jon  |
| 3  | tom  |    | 1  | brother | matt |
+----+------+    | 2  | friend  | sam  |
                 | 2  | parent  | ron  |
                 +----+---------+------+ 
```

我想输入一个查询来输出类似

```
+----+------+------------+---------+--------+
| id | name |friend      | brother | parent |
+----+------+------------+---------+--------+
| 1  | bob  | chris, john| matt    |        |
| 2  | jim  | sam        |         |  ron   |
+----+------+------------+---------+--------+ 
```

所以 id 是两个表之间的comman 变量，关系变量具有预设值（朋友、兄弟、父母和其他几种类型），每个 id 的每个关系可以有多个 table_b.name。

这是一项太复杂的任务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:44:09.107

```
SELECT a.ID, a.name,
        GROUP_CONCAT(CASE WHEN relation = 'friend' THEN b.name ELSE NULL END) friend,
        GROUP_CONCAT(CASE WHEN relation = 'brother' THEN b.name ELSE NULL END) brother,
        GROUP_CONCAT(CASE WHEN relation = 'parent' THEN b.name ELSE NULL END) parent
FROM  table_a a
        INNER JOIN table_b b
            ON a.id = b.id
GROUP BY a.ID, a.name 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/99c0d/2)

将来，如果您有任何其他关系，`friend, brother, and parent`并且不想更改查询，则可以使用准备好的语句

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'GROUP_CONCAT(CASE WHEN relation = ''',
      relation,
      ''' then b.name ELSE NULL end) AS ',
      relation
    )
  ) INTO @sql
FROM table_b;

SET @sql = CONCAT('SELECT a.ID, a.name, ', @sql, ' 
                   FROM  table_a a
                         INNER JOIN table_b b
                             ON a.id = b.id
                   GROUP BY a.ID, a.name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/99c0d/3)

# tomcat - 为什么tomcat用Catalina创建MBean:type=ServerClassLoader,name=common

> ID：13029635
> 
> 赞同：2
> 
> 时间：2012-10-23T11:42:02.813
> 
> 标签：tomcat, jmx

我正在浏览 tomcat 6 源代码，它在 Bootstrap.java 中创建了一个 MBean，其中包含以下行“Catalina:type=ServerClassLoader,name="+common. 180 号线。

我无法理解为什么会这样，是需要创建 MBean 来管理 ClassLoader。我最好的选择是，它正在尝试管理类加载。我将非常感谢任何解释它的人。

谢谢 Jamal（非常感谢任何形式的帮助）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:08:07.147

我认为你最好的选择通常是正确的。[JMX MBeanServer API](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/MBeanServer.html)指定了许多操作，其中类加载器以 ObjectName 的形式指定，而不是直接传递一个（在远程注册的情况下是不可能的），因此 ObjectName 是对一个实际的类加载器。在 MBeanServer 中考虑这个方法：

[createMBean(java.lang.String, javax.management.ObjectName, javax.management.ObjectName)](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/MBeanServer.html#createMBean%28java.lang.String,%20javax.management.ObjectName,%20javax.management.ObjectName%29)

第二个 ObjectName 是用于加载 String arg 中命名的类的类加载器。我发现，特别是与标准 ObjectName 约定一致，发布类加载器 MBean 简化了其他管理任务，并且对于可能尝试自己的扩展的其他人也是一种友好的姿态。

# c# - 根据xml中的信息过滤列表

> ID：13029640
> 
> 赞同：2
> 
> 时间：2012-10-23T11:42:14.077
> 
> 标签：c#, .net, xml, linq, filtering

我有一个模型对象列表和一个 xml，其中包含应根据该列表过滤的信息。我需要一个过滤器方法，它接受列表和 xml 并返回过滤后的列表。我需要它是通用的，以便它可以处理即ProductModel 列表或CustomerModel 列表。xml 可以具有如下所示的`<descriptor>`元素或元素。`<composite>`该`FilterCompositionLogicalOperator`属性指示它是逻辑操作`AND`还是逻辑`OR`操作。`FilterOperator`表示 eksample`IsEqualTo = 0` `IsLessThan=1`等的枚举。

```
<?xml version="1.0" encoding="utf-8" ?>
<advanced FilterCompositionLogicalOperator="1">
  <descriptor IsCaseSensitive="false" Member="SalesPrice" MemberType="System.Decimal" FilterOperator="5">800</descriptor>
  <descriptor IsCaseSensitive="false" Member="CostPrice" MemberType="System.Decimal" FilterOperator="5">300</descriptor>
  <composite FilterCompositionLogicalOperator="0">
    <descriptor IsCaseSensitive="false" Member="CostPrice" MemberType="System.Decimal" FilterOperator="5">150</descriptor>
    <descriptor IsCaseSensitive="false" Member="ProductId" MemberType="System.String" FilterOperator="0">400</descriptor>
  </composite>
</advanced> 
```

我尝试过这样的事情：

```
 public List<IAdvancedFilterable> HandleXML(XElement xml, IEnumerable<IAdvancedFilterable> filterableList)
    {
      foreach (XElement element in xml.Elements())
      {
        // if composite, I call the method recursively giving it the composite element and list
        // else I read all the attributes of the <descriptor> element. decide the type of the elementValue
        // and then I call helper method 'Filter'

        filtered = Filter(compareOpr, colNameAtt.Value, elementValue, list);

        // Which filters the list according to this <descriptor> element using LINQ.
      }

      return filtered;
    } 
```

如何处理 OR 情况。AND 很容易 - 您只需根据每个过滤器进行过滤，`<descriptor>`无需任何进一步考虑就可以了。

Filter 辅助方法打开`FilterOperator`，例如：

```
 case FilterOperator.IsLessThan:
                if (elementValue.IsInt())
                    return list.Where(d => Convert.ToInt32(d.Source.GetColumnValue(columnName)) < Convert.ToInt32(elementValue));

                if (elementValue.IsDecimal())
                    return list.Where(d => Convert.ToDecimal(d.Source.GetColumnValue(columnName)) < Convert.ToDecimal(elementValue));
                break; 
```

我的模型对象有一个`GetColumnValue(columnName)`采用 columnName 并返回其值的方法。

知道如何有效地实现这一目标吗？在这种情况下 LINQ 是高性能的吗？是否有更好的选择以获得更好的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T06:17:54.653

您可以按照以下方式进行：

1.  使用方法创建接口 IFilter：`bool Evaluate(XElement element)`

2.  实现 2 个类：`Filter`和`CompositeFilter`.

    一个。`CompositeFilter`应该有一个子过滤器列表和一个标志，指示它是 AND 还是 OR 条件。`Evaluate`方法实现应评估所有子过滤器并根据 AND/OR 标志返回结果的逻辑组成

    ```
    class CompositeFilter {
        bool IsANDCondition; // if false, it is OR;
        List<IFilter> childFilters;
        bool Evaluate(XElement element) {
            bool result = IsANDCondition;
            foreach (var filter in childFilters)
            {
                bool b = filter.Evaluate(element);
                if (IsANDCondition)
                    result = b && result;
                else
                    result = b || result;
            }
            return result;
        }
    } 
    ```

    湾。`Filter`应具有所有可能的属性（IsCaseSensitive、Member、MemberType 等）并在 Evaluate 方法中实现逻辑

这样，您将拥有一个递归计算的谓词，您可以轻松地将其应用于您的记录：

```
CompositeFilter filter;
var fiteredRecords = records.Where(x=>filter.Evaluate(x)); 
```

# jfreechart - 如何在 XYSplineRenderer Graph 中将正方形的形状更改为点

> ID：13029644
> 
> 赞同：4
> 
> 时间：2012-10-23T11:42:27.353
> 
> 标签：jfreechart

在 JFreeChart `XYSplineRenderer`Graph 中，我需要显示小点而不是小方块来显示 XY 坐标。如何更改这些点的形状？![在此处输入图像描述](../Images/45ecd082b5cf6220f9867313b6d364f0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:11:52.717

要`Shape`以给定数据点为中心，您需要将左上角偏移半径（直径的一半）。对于较小的点，

```
setSeriesShape(0, new Ellipse2D.Double(-3, -3, 6, 6)); 
```

另请参阅此相关[示例](https://stackoverflow.com/a/6669529/230513)，使用`ShapeUtilities`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:54:34.390

使用`setBaseShape`继承自`AbstractRenderer`. 或者你可以使用`setSeriesShape`

```
setBaseShape(new Ellipse2D.Float(100.0f, 100.0f, 100.0f, 100.0f)); 
```

# java - 创建 2 个计时器

> ID：13029647
> 
> 赞同：0
> 
> 时间：2012-10-23T11:42:28.713
> 
> 标签：java, timertask

我有 MyTimer 需要参数：

```
public MyTimer(long mac, String ipAddress){
    this.macAddress = mac;
    this.ip = ipAddress;

    timer = new Timer();

    TimerTask timerTask = new TimerTask() {

        @Override
        public void run() {
            log.info("mac " + String.valueOf(macAddress) + " ip " + ip);

        }
    };

    timer.schedule(timerTask, 30*1000,30*1000);
    log.info("timer created, mac:" String.valueOf(macAddress) + " ip " + ip);
} 
```

从另一个班级：

```
MyTimer timer1 = new MyTimer(mac1, ip1);
MyTimer timer2 = new MyTimer(mac2, ip2); 
```

创建后一切正常：

```
Oct 23, 2012 1:36:43 PM spb.MyTimer <init>
INFO: timer created, mac: 26954208388119 ip 77.209.184.53
Oct 23, 2012 1:36:43 PM spb.MyTimer <init>
INFO: timer created, mac 26954208388118 ip 178.139.7.27 
```

但是，当计时器达到延迟时：

```
Oct 23, 2012 1:39:13 PM spb.MyTimer$1 run
INFO: mac 26954208388119 ip 178.139.7.27
Oct 23, 2012 1:39:13 PM spb.MyTimer$1 run
INFO: mac 26954208388118 ip 178.139.7.27 
```

这个问题应该如何解决？

# jasper-reports - PostgreSQL 函数中的多值参数

> ID：13029648
> 
> 赞同：0
> 
> 时间：2012-10-23T11:42:29.570
> 
> 标签：jasper-reports

我有一个*PostgreSQL*函数：

```
func(timestamp,timestamp,Integer[],varchar[]) 
```

我想设计一个*JasperReports*报告来从函数中获取数据。为此，我创建了 list 类型的参数以从用户那里获取输入并将其作为*varchar*数组传递。

为此，我正在尝试使用以下查询：

```
select * from func($P{interval_start}::timestamp,$P{interval_end}::timestamp,array[$P!{idParameter}],array[$P!{usersParameter}]) 
```

但是当我运行报告时，它会给出类似`column user1(passed from parameter) does not exist`.

我也试过：

```
select * from func($P{interval_start}::timestamp,$P{interval_end}::timestamp,array[$P!{idParameter}],array[$P{usersParameter}]) 
```

但它说：

```
Compiling to file... /home/Prashant/Desktop/jasper-report/report2.jasper
net.sf.jasperreports.engine.design.JRValidationException: Report design not valid : 
1. Parameter type not supported in query : usersParameter class java.util.Collection 
at net.sf.jasperreports.engine.design.JRAbstractCompiler.verifyDesign(JRAbstractCompiler.java:258)
at net.sf.jasperreports.engine.design.JRAbstractCompiler.compileReport(JRAbstractCompiler.java:140) 
at net.sf.jasperreports.engine.JasperCompileManager.compileReport(JasperCompileManager.java:212) 
at net.sf.jasperreports.engine.JasperCompileManager.compileReportToFile(JasperCompileManager.java:128) 
at com.jaspersoft.ireport.designer.compiler.IReportCompiler.run(IReportCompiler.java:516) 
at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572)    
  at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997) 
Compilation running time: 73! 
```

请建议，如何将字符串数组从*iReport传递给**PostgreSQL*函数？

# iphone - 如何在 iOS 运行时加载 Vuforia QCAR 跟踪文件数据

> ID：13029649
> 
> 赞同：0
> 
> 时间：2012-10-23T11:42:28.907
> 
> 标签：iphone, ios, xcode, augmented-reality

我正在使用 Vuforia sdk 开发增强现实，我想在运行时加载 3d 对象，我想从 Web 服务中获取它并在需要时加载它，所以基本上我的问题只是我们如何加载任何 . h 文件在运行时。首先，我们可以在运行时加载它，如果可能的话，我们该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:46:53.750

如果您有动态数据，将其放入 .h 文件是没有意义的。头文件仅在程序编译时有用，在运行时无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:11:44.637

AFAIK vuforia 只是将垂直、三角形等数组放入 h 文件中。所以你不需要在运行时加载 h 文件（这是不可能的，程序运行时没有 h 文件）。相反，您需要获取这些数组并将它们提供给 vuforia

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:25:31.893

只需从网络下载该文件，将其存储在应用程序目录中并像与应用程序捆绑的示例数据一样加载它

```
NSString * pathToDownloadedFile; //should have path to your file

QCAR::DataSet *dataSet = nil;
QCAR::TrackerManager& trackerManager = QCAR::TrackerManager::getInstance();
QCAR::ImageTracker* imageTracker = static_cast<QCAR::ImageTracker*>    (trackerManager.getTracker(QCAR::Tracker::IMAGE_TRACKER));
dataSet = imageTracker->createDataSet();
dataSet->load([pathToDownloadedFile cStringUsingEncoding:NSASCIIStringEncoding], QCAR::DataSet::STORAGE_ABSOLUTE);

imageTracker->activateDataSet(dataSet); 
```

# bash - 使用 Bash 或 awk 提取列

> ID：13029654
> 
> 赞同：0
> 
> 时间：2012-10-23T11:42:45.740
> 
> 标签：bash, awk

我有一个包含 1000 个文本文件的文件夹。我想从每个文件中提取第四列和第五列，并将其保存到另一个具有相同文件名的文件夹中。我怎么能用`awk`or做到这一点`Bash`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T11:47:46.933

由于您没有指定字段分隔符，我假设为默认（空格）字段分隔符。

```
awk '{print $4,$5>"/tmp/another_directory/"FILENAME}' * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:12:12.667

使用 GNU find 和 GNU sed，假设以空格分隔的列和要处理的文件位于当前目录中：

```
mkdir tmp/
find . -maxdepth 1 -type f -print0 |
  xargs -0 -l /bin/sh -c 'sed -r "s/([^ ] *){3}([^ ]) *([^ ]*).*/\2 \3/" "$1" > "tmp/$1"' '' 
```

请注意最后一对单引号很重要，它们是占位符，因此文件名可以正确传递给`sh`. 处理后的文件保存`tmp/`在当前目录中。

# asp.net - 找到jQuery返回的HTML里面的控件

> ID：13029659
> 
> 赞同：1
> 
> 时间：2012-10-23T11:42:55.750
> 
> 标签：asp.net, jquery

我有页面 Webform1.aspx 和一个 GrvData.ascx 用户控件。我在 webfom1.aspx 页面中动态显示用户控件...我想访问位于 GrvData.ascx 中的 webform1.aspx.cs 中的 grvitem。完整的设计和代码如下..

webform1.aspx

```
<form runat="server">
<input type="button" value="Load" runat="server" />
<input type="button" value="Submit" runat="server" />
<div id="result"></div>
</form>
<script>
$(document).ready(function () {  
// on load button click jquery      
        $.ajax({
            type: "POST",
            url: "Webform1.aspx/Result",
            data: "{ ClientIDD : '" + clientidd + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {               
                $('#result').html(response.d);
            },
            error: function (msg) {               
                alert(msg);               
            }       
    });
}); 
</script> 
```

后面的代码

Webform1.aspx.cs

```
 [WebMethod]
    public static string Result(string ClientIDD)
    {
        return Results(ClientIDD);
    }

    public static string Results(string ClientIDD)
    {
        try
        {
            Page page = new Page();
            System.Web.UI.UserControl userControl = (System.Web.UI.UserControl)page.LoadControl("GrvData.ascx");

            Type t = userControl.GetType();
            MethodInfo addtext = t.GetMethod("BindMyGrid");
            addtext.Invoke(userControl, new object[] { ClientIDD });
           // ControlHub.Controls.Add(userControl);

            userControl.EnableViewState = true;
            HtmlForm form = new HtmlForm();
            form.Controls.Add(userControl);
            page.Controls.Add(form);

            StringWriter textWriter = new StringWriter();                
            HttpContext.Current.Server.Execute(page, textWriter,false);              
            return textWriter.ToString();

        }
        catch (Exception ex)
        {
            return ex.ToString();
        }
    } 
```

GrvData.ascx

```
<asp:gridview id="grvitem" runat="server" 
        width="100%" autogeneratecolumns="False"
        datakeynames="ID" EmptyDataText="No records found" >          
            <Columns>               
                <asp:TemplateField >
                <ItemTemplate >
                    <input type="checkbox" id="chk" value="getIndex" onclick="chng(<%# Eval("Amount") %>,this);" />                
                </ItemTemplate>
            </asp:TemplateField>               
                <asp:BoundField DataField="ServiceName" HeaderText="Description" />                               
                <asp:BoundField HeaderText="Rate" DataField="Rate" />
                <asp:BoundField HeaderText="QTY" DataField="QTY" />               
                 <asp:TemplateField HeaderText="Price">
    <ItemTemplate>
        <asp:Label ID="lblListPrice" runat="server" Text='<%#Eval("Amount")%>'/>
    </ItemTemplate>
    </asp:TemplateField> 
            </Columns>             
        </asp:gridview> 
```

代码背后

```
public void BindMyGrid(string clientid)
        {      
            // bind the data to the grid
            grvitem.DataSource = data;
            grvitem.DataBind();
        } 
```

请告诉我如何访问 webform1.aspx.cs 中的 grvitem...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:47:22.003

如果您从服务器返回 HTML 内容，请从您的 jQuery ajax 调用中删除以下内容

```
contentType: "application/json; charset=utf-8",
dataType: "json", 
```

因为它请求 JSON 作为返回类型

# iphone - 我们如何在 iOS 应用中使用自定义字体？

> ID：13029660
> 
> 赞同：24
> 
> 时间：2012-10-23T11:43:01.943
> 
> 标签：iphone, ios, fonts

> **可能重复：**
> [我可以在 iPhone 应用程序中嵌入自定义字体吗？](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application)

如何在我的 iPhone 应用程序中自定义字体？是否可以？如何在 a 中使用此自定义字体`UILabel`？

我正在尝试`MYRIADPRO-SEMIBOLD.OTF`在我的应用程序中添加字体。

代码是

```
UIFont *customFont = [UIFont fontWithName:@"MYRIADPRO-SEMIBOLD" size:35]; 
titleLbl.font = customFont; 
```

Plist 是

![在此处输入图像描述](../Images/890fb1dda978dbec52bca5cfd2f9c6b8.png)

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-23T11:52:31.363

请尝试以下步骤：

**1\. 如图所示在 info.plist 中进行配置**

![在此处输入图像描述](../Images/8d0eeb0cb92f4a55e855fef0089a1a4a.png)

**2\. 现在你应该使用那个添加的文件**

```
UIFont *customFont = [UIFont fontWithName:@"fontName" size:size];

// further you may set That Font to any Label etc. 
```

**编辑：**确保您已将该文件添加到资源包中。

![在此处输入图像描述](../Images/d16bf72ed12098b97c6fd2340bef9396.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T11:46:54.847

1.  将您的字体文件复制到资源中。

2.  在您的应用程序 .plist 中创建（如果存在，只需创建一行）一个名为的行`Fonts provided by application`，然后`item 0`复制您的字体名称，例如`Ciutadella-Bold.otf`

3.  然后你可以在你的应用程序中定义这个字体：

    ```
    UIFont *CiutadellaBold = [UIFont fontWithName:@"Ciutadella-Bold" size:17.0f]; 
    ```

4.  并在例如`UILabel`：

    ```
    [uiLabel setFont:CiutadellaBold]; 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T11:45:43.753

这是完全可能的。请检查以下链接以实施您的解决方案。

[iPhone开发：如何使用自定义字体？](https://stackoverflow.com/questions/4462852/iphone-development-how-to-use-custom-fonts)

[如何将自定义字体添加到 iPhone 应用程序？](https://stackoverflow.com/questions/3837965/how-to-add-custom-fonts-to-an-iphone-app)

[如何在iphone应用程序中使用自定义字体](https://stackoverflow.com/questions/3510301/how-to-use-custom-font-in-iphone-application)

[我可以在 iPhone 应用程序中嵌入自定义字体吗？](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application)

我希望这些链接有所帮助。

# java - JRockit Mission Control：分析来自 JFR 的热门方法

> ID：13029662
> 
> 赞同：1
> 
> 时间：2012-10-23T11:43:08.947
> 
> 标签：java, jrockit

我们正在尝试`JFR`使用`JRockit Mission Control`. 在 上`JFR`，我们有“代码”选项卡，其中包含“ `Hot Packages`”和“ `Hot Methods`”子选项卡。这`Hot Methods`非常有用，但通常`Hot methods`是一些 Java API 方法`java.util.HashMap.get(Object)`，`JVM`如`jrockit.vm.ArrayCopy.copy(Object, int, Object, int, int)`.

但是要找出哪些应用程序代码触发了这些方法，我们需要深入挖掘前辈的树。换句话说，没有搜索前辈的堆栈痕迹。无论如何，我可以在前辈的堆栈跟踪上启用搜索，以便我可以追踪哪些应用程序代码实际上触发了热方法..？

谢谢，西瓦拉杰什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T22:32:00.383

您无法在 JMC 中搜索堆栈跟踪

# linq - 执行内部操作后使用 LINQ 从对象获取结果？

> ID：13029663
> 
> 赞同：1
> 
> 时间：2012-10-23T11:43:08.823
> 
> 标签：linq

我有一个具有以下属性的对象列表：RoomName、Date、StartTime、EndTime。

我想得到每个 Roomname 的总小时数，这被计算为 EndTime-StartTime。

如果我有一个列表：

```
room1 12/2/2012 11.0 12.0
room1 12/2/2012 13.0 15.0
room2 12/3/2012 11.0 12.0 
```

当我将 room1 发送到 LINQ 查询时，我希望答案为 (12.0-11.0)+(15.0-13.0)，即 3。如何使用 LINQ 表达式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:47:17.303

我相信这会进行分组和计算

```
var query = from r in rooms
            group by r.RoomName into g
            select new {
                RoomName = g.Key,
                TotalHours = g.Sum(x => x.EndTime-x.StartTime)
            }; 
```

因此，您将开始和结束时间存储为浮点数，您可以简单地将它们相减并进行计算。

# ruby - Rails 中的 HTTP 视频流 3+

> ID：13029666
> 
> 赞同：0
> 
> 时间：2012-10-23T11:43:20.820
> 
> 标签：ruby, ruby-on-rails-3, web-services, http, video

我需要以下帮助：

好的，场景是这样的：我正在联系服务器，并从服务器获取此 URI：

```
http://<camera_ip_address>/<type_ID>/<part_ID> 
```

该网络服务的文档说：

```
"The part_ID will vary from part_start and part_end." 
```

我得到了所有需要的数据。现在我不明白这与 HTTP 视频流有什么关系？

如果我有 part_start = 1 和 part_end = 10，这意味着我将“下载”10 帧？如何？卷曲？wget？导轨？

是否应该像（示例）那样实现循环：

```
for i=1; i<10 i++
   download "http://127.0.0.1/34/i"
end 
```

例如，“http://127.0.0.1/34/10”会是什么？png/jpeg 帧文件？任何帮助都会非常有用。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:39:25.753

好吧，rails 在这里并不重要。

看起来你只需要在这里使用一些 Flash 播放器，其中一个最受欢迎的是[jwplayer](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12538/supported-player-embed-methods)

请参阅 SWFOBJECT 部分。基本上，您必须执行以下操作：

```
<script type="text/javascript">
  var flashvars = { file:'http://<camera_ip_address>/<type_ID>/',autostart:'true' };
  var params = { allowfullscreen:'true', allowscriptaccess:'always' };
  var attributes = { id:'player1', name:'player1' };

  swfobject.embedSWF('player.swf','container1','480','270','9.0.115','false',
    flashvars, params, attributes);
</script> 
```

# asp.net-mvc-3 - 为什么 ado.net 实体数据模型在 vs 2012 中发生了变化？

> ID：13029667
> 
> 赞同：-1
> 
> 时间：2012-10-23T11:43:30.990
> 
> 标签：asp.net-mvc-3

我创建了两个 Windows 应用程序示例

首先是 vs 2010 和 .net framework 4，其次是 vs2012 和 .net framework 4。

我向他们添加了 ado.net 实体数据模型，但这个模型是基于主题的，首先有这个文件：

```
1-mymodel.Designer.cs 
```

第二 ：

```
1-mymodel.Context.tt
2-mymodel.Designer.cs
3-Mymodel.tt
4-mymodel.edms.diagram 
```

为什么要尊重vs 2022中的新功能，对我来说重要的是首先具有默认构造函数，可让您创建自己的连接字符串，但第二个没有任何构造函数，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:10:36.393

EF 5 按约定而不是配置运行。

创建您自己的上下文，该上下文继承`DbContext`并传入连接字符串，如下所示：

```
public class MyContext: DbContext 
{
    public MyContext()
        : base([myConnectionString])
    {
    }
} 
```

# mysql - 搜索带有逗号分隔字符串的表？

> ID：13029668
> 
> 赞同：2
> 
> 时间：2012-10-23T11:43:32.347
> 
> 标签：mysql, sql

我的表中有一个名为标签的列。它有逗号分隔的文本（框、帽子、汽车）。

我从我的表中选择了一行，我想找到与所选行中的标签具有相似标签的其他行。

我知道这可能是一个更好的桌子设计，但我不能改变设计。

我知道这将在标签中搜索关键字，但我不想通过关键字搜索，而是通过标签列表进行搜索。

```
WHERE (',' + Tags + ',') LIKE '%,keyword,%' 
```

有谁知道我会怎么做？

使用 MYSQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:31:13.043

你说你不能改变设计。能不能加一个 FULLTEXT 索引，把这个表放到 MyISAM 访问方法中？如果是这样，您可以使用 FULLTEXT 搜索。对于您的应用程序，您最好使用 BOOLEAN 模式。

```
WHERE MATCH (tags)
      AGAINST ('box hat -car' IN BOOLEAN MODE); 
```

此特定搜索查找关键字 box 和 hat，并排除关键字 car。

这是一个描述。这可能对你很有效。 [http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.5/en/fulltext-boolean.html)

您可以在 InnoDB 中运行 FULLTEXT 搜索。但我不相信你可以索引它。

如果您不能使用全文搜索，那么您的工作使用了错误的工具。用 SQL 匹配逗号分隔的字符串就像用螺丝刀的手柄敲钉子一样。两者都需要很长时间并且非常尴尬。

# android - 更新联系人 Android 的 display_name

> ID：13029671
> 
> 赞同：1
> 
> 时间：2012-10-23T11:43:45.470
> 
> 标签：android

此方法始终返回 false。我想更新联系人的显示名称...

```
 public int updateDisplayName(long id, String newname) {
    Uri contact = ContentUris.withAppendedId(Contacts.CONTENT_URI, id);
    ContentValues values = new ContentValues();     
    values.put(Contacts.DISPLAY_NAME, newname);     
    return context.getContentResolver().update(contact, values, null, null);
} 
```

你能帮助我吗？

谢谢，马特乌斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:04:07.433

这并不奇怪，该表用于聚合多个帐户的信息，并且其大部分数据仅由联系人内容提供商本身操作。

请参阅文档：http: [//developer.android.com/reference/android/provider/ContactsContract.Contacts.html](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html)

您将不得不更改原始联系人。

# php - .load() 没有切换的小部分

> ID：13029677
> 
> 赞同：1
> 
> 时间：2012-10-23T11:44:01.443
> 
> 标签：php, jquery, html, load, toggle

我有一个对话流，每 3 秒刷新一次 jQuery 的 .load() 。

这个系统可以工作，但在每次对话中我都有一个答案按钮，它使用 .toggle() 滑动表单（文本区域和提交按钮）。

为了显示流程，我在 PHP 中使用了一段时间。

我的问题是，当通过 .load() 加载并单击回答按钮时，表单再次隐藏并且文本也包含。

```
<div id="the_river_loading">
<?php
$sql_the_river = 'SELECT u.nickname, u.firstname, u.lastname, u.main_photo, u.locality,
             id_conversation, id_messages, owner, participants, text, date
          FROM users AS u
          INNER JOIN the_river
          ON u.nickname = owner
          WHERE answer = 0
          ORDER BY date DESC';
$result_the_river = mysqli_query($mysqli, $sql_the_river);

$count = 0;
while ($data_the_river = mysqli_fetch_assoc($result_the_river))
{
   $count++;
   echo '<div class="message_container_news">'; // Start block conversation

   echo '<a href="/profile/' . $nickname . '" class="name_links" style="vertical-align: top; font-size: 16px;">
   <img src="' . $main_photo . '"  title="' . $name . '" class="members_actu_photo" />' . $name . '</a>
   <span style="vertical-align: top">, ' . $locality . '</span><span style="float: right; font-size: 12px;">Posté le Octobre 25, 2012</span>
   <p style="margin-top: 5px;">' . $data_the_river['text'] . '</p>
   <div class="btnAnswer_nb">' . $count_answer . '</div> Answers
   <a href="/news/' . $data_the_river['id_conversation'] . '" style="margin-left: 100px; display: inline;" class="global_links">See conversation</a>

   <div class="btnAnswer_news" id="btnAnswer_news_id_' . $count . '">Reply</div>
   <form method="post" id="display_form_id_' . $count . '" action="" style="display: none;">
      <br />
      <textarea name="answer_text"></textarea><br />
      <input type="submit" name="answer_valid_id_' . $count . '" value="Post" />
   </form>
   </div>'; // End block conversation
}
?>
</div>

<script type="text/javascript">     
$(".btnAnswer_news").live("click", function(){
   var num_show = this.id.replace(/\D/g, "");
   $("#display_form_id_" + num_show).toggle("fast");
});

var auto_refresh = setInterval(
   function() {
      $("#the_river_loading").load("/home" + " .message_container_news");
   }, 3000
);
</script> 
```

很高兴读到你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:04:53.517

如果我正确理解了您的问题（您的描述性不是很好），您只想在再次单击时不隐藏表单，以便使用`show()`而不是`toggle()`，因此请替换以下行：

```
$("#display_form_id_" + num_show).toggle("fast"); 
```

对于这个：

```
$("#display_form_id_" + num_show).show("fast"); 
```

如果要保留 textarea 的文本，可以这样：

```
var auto_refresh = setInterval(
   function() {
      tx = $("#the_river_loading textarea[name='answer_text']").val();
      $("#the_river_loading").load("/home" + " .message_container_news", function(){
          $("#the_river_loading textarea[name='answer_text']").val(tx);
      });
   }, 3000
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:47:32.953

这是因为如果您再次将内容加载到容器中，每个 js 应用的样式将被删除（因为它们是通过 style="" 应用的，并且会被刷新）。您应该将 Form 和 Button 移动到另一个 Div，它不在加载 Div 中。

# easymock - EasyMock 使用方法

> ID：13029679
> 
> 赞同：0
> 
> 时间：2012-10-23T11:44:09.967
> 
> 标签：easymock

我正在尝试使用 easyMock 运行一个简单的测试：

```
public class Class1 implements Interface1{
    public void method1(Object obj){
       if(isEnable()){
    doSmth();
    }
    }

    public boolean isEnable(){
    return isEnable;
    }
} 
```

我的测试：

```
Interface1 test1= Interface1(Class1.class);
test1.method1(anyObject);
expectLastCall();
expect(test1.isEnable).andReturn(true);
replay(test1);

test1.method1(new Object());
verify(test1); 
```

错误：

> 验证时预期失败：isEnable()：预期：1，实际：0

问题出在哪里？我已经阅读了大量示例，其中发送的参数存在类似问题，但不是没有参数[示例 1](http://www.ibm.com/developerworks/java/library/j-easymock/index.html)或本[教程](http://today.java.net/pub/a/today/2006/06/20/getting-started-with-easymock-2.html)的方法，我觉得这很有趣

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:12:11.143

稍微更改模拟代码。您想要调用方法**isEnable**并返回 true。

```
Interface1 test1= Interface1(Class1.class);
test1.method1(anyObject);
expectLastCall();
expect(test1.isEnable()).andReturn(true);
replay(test1); 
```

将您的实际测试更改为

```
test1.method1(new Object());
test1.isEnable();
verify(test1); 
```

# wpf - 对绑定到 ItemSource 的 observablecollection 进行排序

> ID：13029680
> 
> 赞同：0
> 
> 时间：2012-10-23T11:44:18.133
> 
> 标签：wpf, sorting, observablecollection, itemscontrol

我在我的应用程序中使用**ItemsControl ，它的****ItemSource**是一个可观察的集合。

```
<ItemsControl ItemsSource="{Binding ASPTrunks}"
                      ItemTemplate="{StaticResource ASPTrunkTemplate}"
                      Style="{StaticResource ItemControlStyle}"> 
```

**ASPTrunks**有一个名为**SpTypeName**的属性。我希望 ItemsControl 中的控件按**SpTypeName**的字母顺序排序。更好的方法是什么。我是否需要使用 CollectionViewSource 或者以编程方式对集合进行排序？如果我需要使用 CollectionViewSource，我将按照此[链接](https://web.archive.org/web/20151215180945/http://www.zagstudio.com/blog/387#.V7N5c0196is)使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:46:52.750

任何一种方法都很好，这取决于排序是否特定于视图，并且您希望在各种视图中重用集合，那么在视图中进行排序是有意义的。

# asp.net - Sys.WebForms.PageRequestManagerServerErrorException：发生未知错误状态代码 12152

> ID：13029684
> 
> 赞同：0
> 
> 时间：2012-10-23T11:44:34.190
> 
> 标签：asp.net, asp.net-ajax, windows-server-2003

我创建了一个网站并将其托管在 windows server 2003 上。我在整个页面中使用了带有更新面板标签的 Ajax 3.5。

我的第一页是主页，它只包含一个下拉菜单和一个按钮。

当我从下拉列表中选择文本并单击按钮时。它重定向主页。

主页包含一些文本框和更新面板中的按钮。

例如。

```
<CC1:ToolkitScriptManager ID="sm" runat="server"  />
            <div>
            <asp:UpdatePanel ID="update" runat="server">
            <ContentTemplate>
            <table cellpadding="0" cellspacing="0" border="0" width="960px">
            <tr> 
            <td align="left">
            <asp:Panel ID="pnlAjax" runat="server" Width="500px" BorderStyle="Double" BorderWidth="5" BorderColor="Brown">
        // Code Here
        // This a the few part of the code.
           </asp:panel>
        </td>
        </tr>
        <tr>
        <td>
        <asp:button ID="btnSubmit" runat="server" text="Submit"/>
        </td>
        </tr>

        </table>
         </ContentTemplate>
            </asp:UpdatePanel> 
```

我没有使用 Asyncpostbacktrigger 标签。当我在文本框中填写详细信息并单击提交按钮以将详细信息保存在 sql server 数据库中时。它不会处理并重定向到包含下拉列表和按钮的主页，而不会在 Windows Server 2003 上显示任何消息。当我从 IIS 运行此网站时，它会显示以下消息：

```
Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。服务器返回的状态码是：12152

```

我在谷歌上搜索过这个但没有帮助。问题是什么？有趣的是这个网站在 Windows XP 上运行良好。请帮助解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:52:20.567

使用 AJAX 时，来自服务器的任何客户端脚本都应使用 ScriptManager 类。在这种情况下，因为您希望它立即运行，请使用`ScriptManager.RegisterStartupScript().`

```
ScriptManager.RegisterStartupScript(Page, typeof(Page), "MyScript", "confirm('Select True or False in exempt field.')", true); 
```

# linux - 显示 pthread 优先级

> ID：13029689
> 
> 赞同：3
> 
> 时间：2012-10-23T11:45:07.260
> 
> 标签：linux, pthreads

我有一个过程（测试服）。在这个过程中，我使用了两个 pthread（ T1 和 T2 ）。

是否有可能在外壳上显示有关此线程的信息（尤其是优先级）？

如果我使用`top -H`我可以看到注意到。

`ps axms`给我看这个

```
 UID   PID   PENDING   BLOCKED   IGNORED    CAUGHT STAT TTY        TIME COMMAND
    0     1  00000000         -         -         - -    ?          0:00 init [3

    .
    .
    .

    0  1063  00000000         -         -         - -    ttyS0      0:00 ./tests
    0     -  00000000  00000000  00000000 <80000000 Sl   -          0:00 -
    0     -  00000000  00000000  00000000 <80000000 Rl   -          0:00 -
    0     -  00000000  00000000  00000000 <80000000 Rl   -          0:00 - 
```

我认为没有优先级的迹象。

这就是我发现的东西。（随意编辑）

*   UID =
*   PID = 进程 ID
*   待定 =
*   封锁 =
*   忽略 =
*   抓到 =
*   STAT = 进程状态
*   TTY = 与进程关联的终端
*   TIME = 累计 CPU 时间
*   COMMAND = 可执行文件名

笔记：

我使用没有 gui 的 Linux 2.4.36

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:26:20.480

您可以检查 /proc/PID/task 目录。给定 PID 下的每个线程都在创建包含大量信息的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:28:40.500

如果`top`正在运行，请使用该命令`f`显示可能的列/字段列表。按 选择“Nice value” `i`。

逐字逐句`man top`：

> NI——物超所值
> 
> 任务的好价值。负的 nice 值意味着更高的优先级，而正的 nice 值意味着更低的优先级。此字段中的零仅表示在确定任务的可调度性时不会调整优先级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T15:39:42.583

您可以使用编程方式。

> ```
>  pthread_getschedparam(pthread_t thread, int *policy,
>                          struct sched_param *param); 
> ```

此函数为您提供调度参数，在 struct sched_pa​​ram 中，您可以以整数形式找到调度优先级。
使用它并将其打印到屏幕上。

如需更好的解释，请查看此手册页：
[http ://www.kernel.org/doc/man-pages/online/pages/man3/pthread_setschedparam.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_setschedparam.3.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-07T14:11:52.380

with top -H you can see number of threads look picture [top with -H option](http://i.stack.imgur.com/S825I.jpg)

There is a lot of information, it's easier to run with top -H -p

# javascript - 试图让两个同时使用触摸事件的操纵杆

> ID：13029691
> 
> 赞同：3
> 
> 时间：2012-10-23T11:45:08.820
> 
> 标签：javascript, html, multi-touch, impactjs

我已经为此奋斗了两天。我正在使用一个名为 ImpactJS 的 HTML5/JS 游戏引擎，有人制作了一个非常有用的插件来为移动设备创建操纵杆触摸区。这个想法是您在屏幕上指定一个区域，当该区域被触摸时，操纵杆被激活。

我正在使用的插件的代码在[这里](https://github.com/dmarchand/impact-mobile-plugins/blob/master/touch-joystick-zone.js)。我稍微修改了它以添加“curPos”（用户当前触摸的点的 x 和 y 坐标），否则所有代码都是相同的。我一直在尝试自己解决这个问题并联系原始创建者，但他们目前似乎无法访问，我无处可去。

我确定我在这里做错了什么，但是虽然我可以让触摸区域自己完美地工作，但每次我尝试同时使用两个操纵杆时，它们都会部分地相互覆盖。

我在游戏初始化时指定了两个区域，如下所示：

```
 this.joystick1 = new TouchJoystickZone(0, 0, ig.system.width / 2, ig.system.height);
    this.joystick2 = new TouchJoystickZone(ig.system.width / 2, 0, ig.system.width / 2, ig.system.height); 
```

this.joystick1 负责玩家轮换。this.joystick2 负责玩家加速。在我的 Player 实体中，我有两个操纵杆的以下移动代码。同样，当我只有一根手指在屏幕上/一个正在使用的操纵杆上时，这非常有效：

```
 if( ig.ua.mobile ) {
            // ROTATION
            if (ig.game.joystick1.touchStart.x > 0 && ig.game.joystick1.touchStart.x < ig.system.width/2) {
                if (Math.abs(ig.game.joystick1.delta.x) >= 50 || Math.abs(ig.game.joystick1.delta.y) >= 50) {
                    this.joystickAngle = ig.game.Controller.toDegrees(ig.game.Controller.joystickAngle());
                    if (this.angle > this.joystickAngle + 20) {
                        this.angle -= this.turnSpeed * ig.system.tick;
                    }

                    else if (this.angle < this.joystickAngle - 20) {
                        this.angle += this.turnSpeed * ig.system.tick;
                    }

                    else {
                        this.angle = this.joystickAngle;
                    }
                } 
            }

            // THRUST
            if (ig.game.joystick2.touchStart.x > ig.system.width / 2) {
                if (ig.game.joystick2.delta.y <= -50) {
                    this.accel.x = Math.cos(this.angle*Math.PI/180)*this.thrust;
                    this.accel.y = (Math.sin(this.angle*Math.PI/180)*this.thrust);
                    this.fuel -= 0.1;
                }

                else if (ig.game.joystick2.delta.y >= 50) {
                    this.accel.x = Math.cos(this.angle*Math.PI/180)*-this.thrust;
                    this.accel.y = (Math.sin(this.angle*Math.PI/180)*-this.thrust);
                    this.fuel -= 0.1;
                }

            }

            else {
                this.accel.x = 0;
                this.accel.y = 0;
            }
        } 
```

然而，只要我将第二根手指放在屏幕上，第一个操纵杆就会被覆盖。我可以旋转然后移动或移动然后旋转，它工作正常，但我需要同时做这两个。

我发现 touchStart.x 和 touchStart.y 似乎在我点击以使用另一个操纵杆而不只是相关的操纵杆 1 或操纵杆 2 时为两个操纵杆设置，即使在插件代码中这些坐标只是为了受到影响如果该操纵杆的触摸在指定区域内。我相信这部分是造成这个问题的原因。在这个阶段，我已经花了几个小时试图弄清楚这一点，并且就像我开始时一样迷茫。

有人可以同时使用这两个操纵杆为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:14:13.183

您正在使用的操纵杆脚本只是寻找第一根手指。以下来自第 47-48 行

```
 var x = ev.touches[0].pageX - pos.left,
        y = ev.touches[0].pageY - pos.top; 
```

“0”确定要跟踪的手指。

将更改脚本以了解哪个手指在哪个元素上，然后仅跟踪该手指。您可以通过确定首先按下哪个元素或按位置来做到这一点。

JSFiddle 示例：http: [//jsfiddle.net/7WR88/5/](http://jsfiddle.net/7WR88/5/)

[http://www.sitepen.com/blog/2008/07/10/touching-and-gesturing-on-the-iphone/](http://www.sitepen.com/blog/2008/07/10/touching-and-gesturing-on-the-iphone/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:12:17.520

正如@Dcullen 所提到的，从第一次触摸开始，每个事件中可能会有多次触摸。

遍历 ev.touches 集合并查看每次触摸是否落入热区将是一个简单的解决方案。如果它落在热区 1 下，则将其视为操纵杆 1 的触摸。如果它落在热区 2 下，则将其视为操纵杆 2 的触摸。

这意味着触摸出现的顺序无关紧要，因为如果它们靠近它，它们将始终映射到正确的操纵杆。

# c# - C#：创建一个类数组

> ID：13029692
> 
> 赞同：2
> 
> 时间：2012-10-23T11:45:23.130
> 
> 标签：c#, class

我想创建一个类列表，从中可以在我的表单中构建一个“工具箱”。它归结为一个可能的小部件列表，我可以将它们拖放到`Panel`. 这些类将实现相同的接口并具有一些静态方法来创建列表。

我有一些代码：

```
public interface IWidget {
   Image image { get; }
}

public class Gauge : IWidget, PictureBox {
   public static Image image {
       get {
           return Properties.Resources.gauge;
       }
   }
} 
```

在表单中，我想放置一个这样的数组：

```
IWidget[] supported_widgets = { Gauge }; 
```

并循环遍历它们以创建用户可以选择的工具箱，使用类中的静态方法，而不是通过实例化它们（它们将在被拖放到 时被实例化`Panel`）：

```
foreach (IWidget w in supported_widgets) {
    PictureBox p = new PictureBox();
    p.Image = w.getImage();

    toolbox.Controls.Add(p);
} 
```

我尝试过`System.Type`，但感觉有点矫枉过正。做这样的事情的最好方法是什么？甚至可以不实例化类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:47:42.100

An`IWidget`代表一个小部件的实例，因此`IWidget[]`如果您尚未实例化它们，则不能将其作为 a 传递。`Type`, 或者`Type[]`应该没问题 - 它不是“矫枉过正” - 它是描述类型的适当且预期的方式。此外，您可以通过以下方式轻松实例化：

```
IWidget newInstance = (IWidget)Activator.CreateInstance(someConcreteWidgetType); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:48:39.380

> 我想创建一个类列表

从字面上看，这根本不可能。

您可以做的是创建对象（实例）列表。这可以是`Type`您已经尝试过的类，或者您可以为每种类型创建一个辅助类。

```
 class WidgetHelper<T> where  T : IWidget, new() { } 
```

然后您可能想向`IWidget`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T11:54:00.917

如果你不想使用`Type`对象，你可以求助于[工厂模式：](http://www.oodesign.com/abstract-factory-pattern.html)

```
public interface IWidgetFactory
{
    IWidget makeWidget();
} 

public class WidgetFactory<TWidget> : IWidgetFactory where TWidget : IWidget, new() 
{
    IWidget makeWidget()
    {
        return new TWidget();
    }
}

IWidgetFactory[] supported_widgets = { new WidgetFactory<Gauge>(), new WidgetFactory<Indicator>() };

foreach (IWidgetFactory wf in supported_widgets) {
    PictureBox p = new PictureBox();
    p.Image = wf.makeWidget().getImage();

    toolbox.Controls.Add(p);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T11:57:01.500

正如 Marc 所说，使用 Type 很好，您可以使用激活器来创建对象（当您将其放在面板中时）。如果您只想使用静态方法来填充工具箱，所以这里没有类创建，然后使用`GetMethod()`and `Invoke()`：

```
Type[] supported_widgets = { typeof(Gauge) };

foreach (var w in supported_widgets) {
    PictureBox p = new PictureBox();
    p.Image = w.GetMethod("getImage").Invoke(null, null);

    toolbox.Controls.Add(p);
} 
```

这个答案的范围之外是关于使用反射和必须使用字符串来传递方法名称的所有注意事项，这在重构时很脆弱并且没有帮助......请记住这一点。

# matlab - 如何在 MATLAB 中求解 3 维耦合非线性抛物线偏微分方程

> ID：13029693
> 
> 赞同：1
> 
> 时间：2012-10-23T11:45:27.637
> 
> 标签：matlab, pde

我在求解以下形式的非线性抛物线 pde 时遇到问题。（将 u_x 视为 u wrt x 的微分）

U(1)_t = a1(U(1),x)*U(2)_t + b1(U(1),x,U(3)) = ( D1(x,U(1))*U( 1)_x )_x + c1( U(1), U(3))*U(1)_x ---(1)

及其耦合方程

U(3)_t = a2(U(1),U(3))*U(2)_t + b2(U(1),x,U(3)) = ( D3*U(3)_x )_x ---(2)

如您所见，U(1)、U(2)、U(3) 只有两个 PDE。这是因为 U(2) 不是 x 的函数，并且有自己的 pde 为

U(2)_t = (1/r)( D2(U(2))*U(2)_r )_r ---(3)

现在（3）是独立可解的。我在 MATLAB 中用 pdepe 解决了它。现在我需要将 U(2)_t 的值放入 (1)&(2) 中，然后解决它们，这是我在 pdepe 中无法做到的。

所以这是我的问题。有没有什么办法可以在解决（3）之后，将 U(2)_t 的值导入到（1）&（2）中并同时解决它们。或者，有什么方法可以将（3）直接以微分形式包含在（1）和（2）中，并在 MATLAB 中求解得到的耦合系统。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:46:56.200

您必须线性化并执行迭代解决方案。Newton-Raphson 通常是首选方法，尽管有些人喜欢 BFGS。

我不知道您如何制定 PDE。有限差分，有限元，边界元，还是别的什么？仅仅发布 PDE 并不能告诉我足够的信息。

# android - 如何将繁重的排序工作从 UI 线程中移开

> ID：13029695
> 
> 赞同：1
> 
> 时间：2012-10-23T11:45:40.303
> 
> 标签：android, android-asynctask

我有一个数字键盘和一个列表。当用户选择键盘时，我调用一个函数对列表进行排序。用户可以随时按下按钮显示列表。

但是这个列表可能非常大，超过 500 个，所以我想不再在 UI 线程上进行排序。

做这个的最好方式是什么 ？

我应该使用常规线程 asynctask 吗？

我唯一担心的是用户还可以在异步任务尚未完成时单击按钮以显示列表。我应该如何处理？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:51:00.303

绝对选择 AsyncTask，它专为 UI 之外的繁重工作而设计。关于你的最后一个问题，禁用按钮并在 AsyncTask 的`onPostExecute()`. 干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:56:29.973

绝对你需要一个异步任务。在你的`onCreate`方法中隐藏你所有的`buttons`and `textviews`。在后台执行某些操作之前，您需要向用户显示加载条或微调器，以便用户无法单击您创建的任何按钮。这是一个示例：

```
class LoadAllProducts extends AsyncTask<String, String, String> {
    protected void onPreExecute() {
         super.onPreExecute();
         pDialog = new ProgressDialog(Academic.this);
         pDialog.setMessage("Loading. Please wait...");
         pDialog.setIndeterminate(false);
         pDialog.setCancelable(false);
         pDialog.show();
}

protected String doInBackground(String... args) {
       //Do something
       return null;
}

protected void onPostExecute(String file_url) {
    // dismiss the dialog after getting all products
    pDialog.dismiss();
    // updating UI from Background Thread
    runOnUiThread(new Runnable() {
           public void run() {
             //finally show your button
          }
    });
} 
```

**在使用此代码之前，请确保您已经声明了 pDialog。在我的程序中，我使用了微调器。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T11:57:25.217

AsyncTask looks good for this... task. You can also make some sort of state-member to check whether the sort task is running and depending on it start the task or do nothing when the user presses the button. As an alternative, if something has changed, you can also cancel the task and start a new one.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T11:53:07.450

去异步任务，你可以在 () 中显示一些进度条并在`onPreExecute`() 中停止它`onPostExecute`。在进度条在屏幕上运行之前，用户将无法单击任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T11:58:34.987

You can use AsyncTask as other have told or you can create a thread and run long running operations and update UI accordingly with handlers. Have a look at this link [http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# jquery - 如何在 jQuery 中找到下一个元素？

> ID：13029701
> 
> 赞同：0
> 
> 时间：2012-10-23T11:46:01.100
> 
> 标签：jquery, asp.net, jquery-ui

如何在 jquery 中找到下一个元素，我有以下代码

```
<div>
 <input id="btn<%# Eval("Id") %>" type="button" value="fetch"/>
</div>
<div>
 <img id="imgLoading<%# Eval("Id") %>" style="width: 200px;height: 10px; display: none" src="/Images/Loading.gif" />
</div>
<div id="divData<%# Eval("Id") %>"></div> 
```

**注意：这里是我的“imgLoading[Binding ID]”和 divData[bindingID]，所以每次我的 id 不同时，它们在每个项目中都是不同的**

我正在做的是，当您单击按钮时，将显示图像（图像是 gif 以显示加载开始）并且我调用 $ajax -webmethod 在 div 中加载数据，当数据加载时，我将隐藏图像

当我们单击按钮并在 div 元素中附加数据时，我想隐藏图像

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:48:43.153

试试这个：

```
$("input[type=button]").click(function() {
    var img = $(this).closest("#imgLoading").show();
    var div = $(this).closest("#divData");

    $.ajax({
      url: ...
      success: function(data) {
        $(img).hide();
        $(div).html(data);
      }
    });
}); 
```

您还可以使用带有选择器( [doc](http://api.jquery.com/attribute-starts-with-selector/) ) 的开头。

```
$('input[id^=btn]').click(...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:48:54.750

```
$("input[type='button']").click(function () {
    $(this).closest('div').next('div');    // next div., containing the img 
                                           // element with id imgLoading....
}) 
```

使用您认为合适的适当的 id/class/attribute/tag 选择器。

现场[JSFiddle 演示](http://jsfiddle.net/yxFhc/)。

也许你可以试试这样的 -

```
<div>
    <input id="btn<%# Eval("Id") %>" type="button" value="fetch"/>
</div>
<script type="text/javascript">
    $(document).ready( function () {
        $('input#btn<%# Eval("Id") %>').click(function () {
            var nextDiv = $(this).closest('div').next('div');

            // do whatever you want with this div here
        }); 
    });
</script>
<div>
     <img id="imgLoading<%# Eval("Id") %>" style="width: 200px;height: 10px; display: none" src="/Images/Loading.gif" />
</div>
<div id="divData<%# Eval("Id") %>"></div> 
```

我必须承认上面的代码很丑。如果您不想将 JS 代码与 html 混合，您可以将此代码移出到一些外部 JS 文件中，但是您需要确保`input type="button"`元素的特定 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:49:34.327

您需要做的是使用 jQuery 的[`next()`功能](http://api.jquery.com/next/)-

```
$('input[type="button"]').on('click',function(){
  var imgLoadingElement = $(this).parent().next('div').find('img');
  var divDataElement = imgLoadingElement.parent().next('div[id^="divData"]');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T11:49:49.397

尝试

```
$(document).ready(function(){
 $('yourButtonSelector').click(function(){
   $(this).parent().next().find('yourImageSelector');//.doaction
   //or
   $(this).closest('yourImageSelector');//.doaction
 });

 }); 
```

# django - Django在删除条目时获取错误局部变量'delete'在分配之前引用

> ID：13029702
> 
> 赞同：0
> 
> 时间：2012-10-23T11:46:04.067
> 
> 标签：django, django-forms, django-templates, django-views

有人可以解释并纠正我删除条目的问题吗？

```
 url(r'^remove/(?P<id>\d+)/$', 'registration.views.removerequest'),

 <a href = '/remove/{{ object.id }}/'>remove</a>

 #view

def removerequest(request,id):
    if not request.user.is_authenticated(): 
        get_objects=Todos.objects.get(pk=id)
        return HttpResponseRedirect('/remove/')
    if request.method =='POST':
        delete= get_objects.delete()
        return HttpResponseRedirect('/profile/')
    context = {'delete':delete}
    return render_to_response('remove.html',context,context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:22:35.110

尽可能好地修复......正如[丹尼尔](https://stackoverflow.com/users/104349/daniel-roseman)所说......逻辑错误太多。

**模板**

```
<a href = '/remove/{{ object_to_delete.id }}/'>remove</a> 
```

**看法**

```
from django.contrib.auth.decorators import login_required

@login_required #only allow deletion for authenticated users
def removerequest(request,id):
    get_objects=Todos.objects.get(pk=id) #get the todo object

    if request.method =='POST': # if form is submitted
        delete= get_objects.delete() # delete the shit
        return HttpResponseRedirect('/profile/') # return to profile URL
    # else
    context = {'object_to_delete': get_objects} # pass the todo object to the context
    return render_to_response('remove.html',context,context_instance=RequestContext(request)) #return all 
```

# mysql - 选择第 n 行 WHERE 字段 = x 值

> ID：13029704
> 
> 赞同：0
> 
> 时间：2012-10-23T11:46:10.977
> 
> 标签：mysql, sql

```
format(sql, sizeof(sql), "SELECT * FROM `datab` WHERE License = %s", searchPlate); 
```

使用这种格式进行查询将为我提供所有具有此结果的行，但我想要做的是采取 ex。具有此结果的第三或第五甚至第十行，而不是所有行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:17:03.740

像这样的东西应该在 MySQL 中工作：

```
format(sql, sizeof(sql), "SELECT * FROM `datab` WHERE License = %s ORDER BY IDColumnNameGoesHere LIMIT %d, 1", searchPlate, MyDesiredRowInteger); 
```

几点：

*   `%d`可能不对，请使用正确的整数符号。
*   您肯定在使用特定的 RDBMS，您必须查看文档并找出答案。SQL 是一个标准，MySQL 和 SQL-Server 等是该标准的实现。您必须找出您正在使用的实现。
*   像您所做的那样将变量粘贴到字符串中会使您非常容易受到[SQL 注入](http://en.wikipedia.org/wiki/Sql_injection)的影响。您应该始终参数化您的查询。
*   [LIMIT 特定于 MySQL](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)，如果您使用不同的 RDBMS，您将不得不走另一条路。例如 SQL-Server，您可以使用 TOP，但由于它只有一个参数，您需要使用 min 或 max 来获取您想要的一条记录。

# javascript - jquery组合框比较

> ID：13029705
> 
> 赞同：1
> 
> 时间：2012-10-23T11:46:15.077
> 
> 标签：javascript, jquery, combobox, compare

我正在尝试将数组中的值与 jquery 组合框中的值进行比较，但没有成功。

我有一个这样的数组：（值1，值2，...）名称用`,`（示例：）分隔`john smith,peter pan,`。另一方面，具有来自本地存储的值的组合框以这种方式动态附加

```
 $('select[name="selectListMenu1"]').append( new Option(nombre.fname + " " + nombre.lname) ); 
```

这给了我一个像“John smith”这样的最终名称，我将它附加到组合中。

现在我想将数组中的每个名称与组合框中的每个名称进行比较，并在组合框中选择匹配的名称。

```
var summary3 = (elnombre.proycontac).split(","); // split the names to compare
var p1 = summary3.length                         // get the number of names to compare
$('[name="selectListMenu1"] ').each(function(){           //from here i get lost 
       for (a=0; a<=p1-2; a++) { 
              if ($(this).text())=== summary3[a] {
              // select the name in combobox
              }
       }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:16:53.010

你可以试试这个：

```
$.map(summary3, function(elem, i) {
  $('select[name="selectListMenu1"] option[text="' + elem + '"]').attr('selected', true);
}); 
```

[我在这里](http://jsfiddle.net/sje397/byDBB/1/)举个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:49:24.423

如果匹配文本，则设置 selected 属性：

```
if ($(this).text() === summary3[a]) {
    $(this).attr('selected', true);
} 
```

# excel - Excel VBA：在 Internet Explorer 中等待 JavaScript 执行

> ID：13029708
> 
> 赞同：4
> 
> 时间：2012-10-23T11:46:20.257
> 
> 标签：excel, internet-explorer, vba, automation

我正在尝试在 Excel VBA 中进行一些网页抓取。这是我遇到问题的代码部分：

```
IE.Navigate URL
Do
  DoEvents
Loop While IE.ReadyState <> 4 Or IE.Busy = True
Set doc = IE.document 
```

运行后，它`doc`包含仍然包含未执行 JavaScript 的 html。这是尚未执行的脚本的签名：

```
<SCRIPT type=text/javascript>
        goosSearchPage.Initialize(...)...;
</SCRIPT> 
```

我可以通过执行等待执行，`Application.Wait(Now + TimeValue(x))`但这确实不能令人满意，因为脚本执行所需的时间根据输入而变化很大。

有没有办法等待脚本完成评估或直接在`doc`对象中评估脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:59:29.290

我找到了等待页面完成的代码。[根据此处](http://www.mrexcel.com/forum/excel-questions/355550-do-while-ie-busy-ie-readystate-readystate_complete-not-working.html)的注释，它需要**Microsoft Internet 控件**作为代码中的参考。

此处复制的代码，以防万一链接失效：

```
'Following code goes into a sheet or thisworkbook class object module
Option Explicit

'Requires Microsoft Internet Controls Reference Library
Dim WithEvents ie As InternetExplorer
Sub start_here()
  Set ie = New InternetExplorer
  'Here I wanted to show the progress, so setting ie visible
  ie.Visible = True
  'First URL to go, next actions will be executed in
  'Webbrowser event sub procedure - DocumentComplete
  ie.Navigate "www.google.com"
End Sub
Private Sub ie_DocumentComplete(ByVal pDisp As Object, URL As Variant)
  'pDisp is returned explorer object in this event
  'pDisp.Document is HTMLDocument control that you can use
  'Following is a choice to follow,
  'since there is no do-loop, we have to know where we are by using some reference
  'for example I do check the URL and do the actions according to visited URL

  'In this sample, we use google entry page, set search terms, click on search button
  'and navigate to first found URL
  'First condition; after search is made
  'Second condition; search just begins
  If InStr(1, URL, "www.google.com/search?") > 0 Then
    'Open the first returned page
    ie.Navigate pDisp.Document.getelementsbytagname("ol")(0).Children(0).getelementsbytagname("a")(0).href
  ElseIf InStr(1, URL, "www.google.com") > 0 Then
    pDisp.Document.getelementsbyname("q")(0).Value = "VB WebBrowser DocumentComplete Event"
    pDisp.Document.getelementsbyname("btnG")(0).Click
  End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T11:38:51.420

您实际上可以使用 ie 窗口评估 javascript 函数。但是您必须设置一个回调，因为该函数将被异步评估。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-22T02:17:23.090

这篇文章很老了，但我也会回答这个问题作为对自己的回复，因为我已经发现了如何做到这一点。

只需在 jQuery 脚本运行后指向您希望出现的内容，使用通过 IE 自动化运行的 JavaScript 触发所需的事件，然后执行循环以等待所需的内容出现。

```
'This will trigger the jQuery event.
Doc.parentWindow.execScript "$('#optionbox').trigger('change')"

'This is the code that will make you wait. It's surprisingly efficient
Do While InStrB(Doc.getElementById("optionbox").innerHTML, "<desired html tag>") = 0
    DoEvents
Loop 
```

# mysql - Magento：addAttributeToFilter 上的减法和除法

> ID：13029709
> 
> 赞同：2
> 
> 时间：2012-10-23T11:46:25.857
> 
> 标签：mysql, magento-1.7

我是 Magento getResourceModel 的新手，我正在尝试向我的查询添加一个简单的过滤器，但我无法使用 getResourceModel 来计算。

原始查询：

```
$collection = Mage::getResourceModel('catalog/product_collection');
Mage::getModel('catalog/layer')->prepareProductCollection($collection);
$collection->addAttributeToFilter('promotion', 1)->setOrder('price', 'desc'); 
```

我只想添加 where 子句：

```
 (`price` - `final_price`) >= (`price` * 0.4) 
```

有人可以帮我做到这一点吗？

就这些了，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T12:53:05.627

所以最后我找到了正确的方法，很抱歉延迟在这里发布答案并感谢@feeela。

查看`/lib/Zend/Db/Select.php`我发现存在 where 函数的文件：

```
public function where($cond, $value = null, $type = null)
{
  $this->_parts[self::WHERE][] = $this->_where($cond, $value, $type, true);

  return $this;
} 
```

所以，我们需要的只是添加一个对这个函数的调用，给出我们想要的条件。就我而言，我只是添加一个条件来过滤具有 40% 折扣的产品。

```
$collection = Mage::getResourceModel('catalog/product_collection');
Mage::getModel('catalog/layer')->prepareProductCollection($collection);
$collection->addAttributeToFilter('promotion', 1)
           ->addStoreFilter();
$collection->getSelect()->where( '(`price` - `final_price`) >= (`price` * 0.4)' ); 
```

所以，我希望这对一些帅哥有帮助！

感恩图蒂！

# c - C中的手动名称修改

> ID：13029718
> 
> 赞同：1
> 
> 时间：2012-10-23T11:46:51.180
> 
> 标签：c, identifier, name-mangling

我想为 C 接口实现某种名称修饰。我将拥有类似的功能和类型

```
struct Foo;
struct Foo* Foo_create(struct Bar* bar);
void Foo_destroy(struct Foo* obj);
struct Foo_InnerClass;
... 
```

现在，_ 在所有标准 c 类型定义中都广泛使用，因此如果使用这些类型定义，该方案将无法正常工作。GCC 和 MSVC 似乎接受使用 $ 的名称。那行得通吗？还有其他我可以使用的接受字符吗？

编辑：

我想这样做是因为

*   它避免了重复的名称
*   它强调标识符属于哪个类
*   它使自动生成C++接口成为可能

编辑2：

保留一个普通的字母会到处编译，但它也可能令人困惑：

```
struct Foo* FooIcreate(struct Bar* bar); 
```

编辑 3：

该符号可能因目标平台而异，但在该平台上，它不得与 C++ 名称修饰冲突。

编辑4：

禁止以数字开头的标识符。那么呢：

```
struct Foo* Foo_1_create(struct Bar* bar); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:50:33.580

不确定您为什么要这样做，或者确切的目标是什么，但大多数 C 库都使用或多或少的助记符前缀。

普通的`$`会很糟糕，因为它 a) 非常不常见，C 标识符通常以字母或下划线开头，并且只包含字母、数字和下划线，并且 b) 没有说明符号所属的任何内容。

像 glib 这样的库`g_`为所有函数、`g`其类型和`G_`宏都有一个前缀。GTK+ 类似，它使用`gtk_`等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:52:39.543

不要使用`$`. C 标准不允许在标识符中使用它们，即使 GCC 等 C 编译器接受它们是为了与 1980 年代的 C 编译器（我相信主要是 VAX/VMS C）向后兼容。

如何使用双下划线？

```
struct Foo__InnerClass; 
```

**编辑**：好的，这可以防止您的程序在混合 C/C++ 程序中工作（请参阅[C++ 下划线规则](https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier)），所以这是一个坏主意。尾随下划线怎么样：

```
struct Foo_InnerClass_ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:09:34.590

没关系，虽然我喜欢使用 struct Foo_t 来显示它是一种类型。

我的偏好是保留双 _ (__) 用于特殊或“私人”指标，而不是经常使用。这纯粹是个人喜好，尽管任何当地的编码标准都可能对此主题有所说明。

$ 是不确定的......虽然有些编译器接受它有些不接受。它不是 C 语言的历史部分。虽然在某些操作系统和语言中很常见，但在其他操作系统和语言中并不常见。历史：IBM 大型机的三大历史特色是 $、# 和 @，其中 _ 不是俱乐部成员，VMS 喜欢 $。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:00:10.537

它不会在标识符中使用美元符号，因为它是：

*   不常见，我在哪里都没看到
*   由于第一个原因，它会使您的代码的用户感到困惑，甚至可能会混淆一些工具、编辑器等。
*   并非所有目标都支持它，例如：

    ```
    echo 'void foo$bar(void) { }' | arm-elf-gcc -xc -c - 
    ```

    输出：

    ```
    <stdin>:1: error: stray '$' in program
    <stdin>:1: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'bar' 
    ```

就我个人而言，我会使用某种模块前缀，例如在您的第一个代码片段中。如果您担心与其他库的名称冲突，您可以再添加一个全局前缀，例如`mylib_foo_create`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T14:06:29.237

由于缺乏更好的解决方案，我想我会使用

```
_1 
```

作为分隔符

# google-earth - 检测 Google 地球插件是否处于街景模式

> ID：13029720
> 
> 赞同：0
> 
> 时间：2012-10-23T11:46:52.490
> 
> 标签：google-earth, google-earth-plugin, google-street-view

我只是想知道有没有办法确定当前的谷歌地球插件是否处于街景模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:01:51.497

要测试是否在 Google 地球插件中启用了街景：

```
var navcontrol = ge.getNavigationControl();
var response = navcontrol.getStreetViewEnabled(); // default=false
// response: true -> enabled; false -> disabled
if (!response) {
   // to enable street view mode
   navcontrol.setStreetViewEnabled(true);
} 
```

如果通过调用*setStreetViewEnabled(true)*启用街景，则用户将能够通过手动放大（或使用街景小人）交互式地进入街景。

*请注意调用ge.getPlugin().streetViewEnabled(true)*的 API 文档文档，但这是一个错误，因为 getPlugin() 方法不存在。正确的方法是调用*getNavigationControl()*。

以下是测试街景模式是否处于活动状态的方法：

```
var la = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);
var viewerOptions = la.getViewerOptions();
if (viewerOptions) {
    var state = viewerOptions.getOption(ge.OPTION_STREET_VIEW);
    if (state == ge.OPTION_STATE_ENABLED) {
        // street view mode is active
        // do something here
    }
}
// if viewerOptions is null then no modes are active 
```

状态可以是三个值之一：

```
GEPlugin.OPTION_STATE_DEFAULT  (0)
GEPlugin.OPTION_STATE_ENABLED  (1)
GEPlugin.OPTION_STATE_DISABLED (2) 
```

参考：[接口选项](https://developers.google.com/earth/documentation/reference/interface_kml_viewer_options)和[GE 插件](https://developers.google.com/earth/documentation/reference/interface_g_e_plugin#ac5c3007e6ca69cec000d2bbfa18b95c8)。

# templates - mediawiki 模板编辑器对新行敏感

> ID：13029724
> 
> 赞同：0
> 
> 时间：2012-10-23T11:46:57.633
> 
> 标签：templates, mediawiki

尝试在 MediaWiki（版本为 1.19）中创建引用模板 - [cquote](http://synergy.multionline.net/index.php?title=Template%3aCquote)。Parser 似乎对文本流非常挑剔：相同的代码要么显示为垃圾，要么显示为正常，**具体取决于新行的开始位置**。例如：

```
{| style="margin:auto; border-collapse:collapse; border-style:none;class="cquote" {{#if: {{{bgcolor|}}} | border: 1px solid #AAAAAA;}}

| width="20" valign="top" style="color:#B2B7F2;font-size:35px; font-family:'Times New Roman',serif;font-weight:bold;text-align:left;padding:10px 10px;" | “
| valign="top" style="padding:4px 10px; font-style: italic;" | {{{1|Insert the text of the quote here, without quotation marks.}}}
| width="20" valign="bottom" style="color:#B2B7F2;font-size:35px; font-family:'Times New Roman',serif;font-weight:bold;text-align:right;padding:10px 10px;" | ”
|-
|}<!-- {{subst:FULLPAGENAME}} --> 
```

这可以验证，但是当我稍微更改新行时，输出变得垃圾，我无法遵循逻辑，应该如何剪切新行。我想在新的线路定位上不应该有任何这样的敏感性，但不确定在哪里寻找。

```
{| style="margin:auto; border-collapse:collapse; border-style:none;class="cquote" {{#if: {{{bgcolor|}}} | border: 1px solid #AAAAAA;}}

| width="20" valign="top" style="color:#B2B7F2;
font-size:35px; font-family:'Times New Roman',serif;font-weight:bold;text-align:left;padding:10px 10px;" | “
| valign="top" style="padding:4px 10px; font-style: italic;" | {{{1|Insert the text of the quote here, without quotation marks.}}}
| width="20" valign="bottom" style="color:#B2B7F2;font-size:35px; font-family:'Times New Roman',serif;font-weight:bold;text-align:right;padding:10px 10px;" | ”
|-
|}<!-- {{subst:FULLPAGENAME}} --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:50:38.130

原来我没有`ParserFunctions extension`激活，[链接](http://www.mediawiki.org/wiki/Help%3aTemplates)。这样做并且模板被解析好了。

# vb.net - 在 vb.net 中以静默模式安装 exe

> ID：13029725
> 
> 赞同：1
> 
> 时间：2012-10-23T11:46:58.413
> 
> 标签：vb.net, installation, silent

我在 VB.NET 中有一个现有的应用程序，我需要安装一个用于无人值守系统的免费软件 EXE。我知道我必须安装的路径。

注意：我只需要编写代码来在当前代码库中执行它，并且不能为其创建批处理文件。

到目前为止，我已经尝试了以下步骤：我使用 Shell 命令来执行 EXE 文件，并提供如下附加参数：

```
Shell("C:\MOVEit_Freely_Install.exe /q C:\yourlogfilename.log")

Shell("C:\MOVEit_Freely_Install.exe /s")

Shell("C:\MOVEit_Freely_Install.exe /silent")

Shell("C:\MOVEit_Freely_Install.exe /qb C:\yourlogfilename.log") 
```

它只是打开安装程序，我必须单击“下一步”按钮，然后它会得到安装（我不想要）。

你能就此提出任何建议吗？

谢谢，普内特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:51:22.760

从一个普通的 cmd 窗口执行文件`c:\moveit_freely_install.exe /?`，它应该告诉你是否有一个静默选项。

或者，如果它包装了一个 .msi，您可能能够做到这一点并使用常规的 microsoft 安装程序开关使其安静。在这些情况下，我使用 7zip 来提取 exe 内容。如果您有 7zip，请右键单击该文件并选择 7zip -> 解压缩。

如果您确实找到了 msi，以下是您感兴趣的选项：

```
`/q   n|b|r|f                                      Sets the UI level.

                                              q , qn - No UI.

                                              qb - Basic UI.

                                              qr - Reduced UI. A modal
                                              dialog box is displayed
                                              at the end of the
                                              installation.

                                              qf - Full UI. A modal
                                              dialog box is displayed
                                              at the end of the
                                              installation.

                                              qn+ - No UI. However, a 
                                              modal dialog box is
                                              displayed at the end of
                                              the installation.

                                              qb+ - Basic UI. A modal
                                              dialog box is displayed
                                              at the end of the 
                                              installation. If you 
                                              cancel the installation, 
                                              a modal dialog box is 
                                              not displayed.

                                              qb- - Basic UI with no
                                              modal dialog boxes. 
                                              The "/qb+-" switch
                                              is not a supported UI 
                                              level.` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-14T14:06:38.500

这样的事情可能会有所帮助：

```
Dim myProcess As New Process 
Dim param as String = "/?"
myProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden 
myProcess.StartInfo.CreateNoWindow = True 
myProcess.StartInfo.FileName = ("moveit_freely_install.exe" & param) 
myProcess.Start() 
```

它使用它的参数加载您的应用程序，但没有窗口。

# android - 笑脸在 android 中的集成存在问题

> ID：13029731
> 
> 赞同：3
> 
> 时间：2012-10-23T11:47:32.817
> 
> 标签：android, emoticons

在我的应用程序中，我需要集成包括笑脸在内的评论功能。我成功地在 android 编辑文本框中显示了笑脸。但我很震惊......用笑脸的用户写完完整的评论后，用户将点击发送。用户点击后输入我需要将评论作为文本发送（需要将微笑替换为字符串，如“:-)”）。如何将该笑脸图像转换为其各自的代码。请任何人帮助我摆脱困境。

并将文本转换为笑脸我正在使用下面的代码

```
ImageGetter imageGetter = new ImageGetter() {
public Drawable getDrawable(String source) {
Drawable d = getResources().getDrawable(
    cstlistemoji.images[index]);
    d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight());
                return d;
            }
        };
        cs = Html.fromHtml(
                "<img src='"
                        + getResources()
                                .getDrawable(cstlistemoji.images[index])
                        + "'/>", imageGetter, null);
        System.out.println("cs is:- " + cs);
        edttxtemoji.append(cs); 
```

# wpf - 在窗口大小 wpf 中设置控件的高度和宽度

> ID：13029735
> 
> 赞同：0
> 
> 时间：2012-10-23T11:47:43.423
> 
> 标签：wpf

我有以下 xaml 文件

```
<Window x:Class="NodeXL_Graph_Drawer.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:toolkit="http://schemas.microsoft.com/wpf/2008/toolkit"
    xmlns:controls="clr-namespace:Technewlogic.Samples.WpfModalDialog"                      
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" DataContext="{Binding RelativeSource={RelativeSource Self}}"
Title="NodeXL Graph" xmlns:my="clr-namespace:Smrf.NodeXL.Visualization.Wpf;assembly=Smrf.NodeXL.Control.Wpf" Loaded="Window_Loaded">
<Grid>
    <Grid x:Name="ModalDialogParent" >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" x:Name="col1"/>
            <ColumnDefinition Width="5" />
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <StackPanel Grid.Column="0" >
            <my:NodeXLControl Name="nodeXLControl1" HorizontalAlignment="Left"  EdgeSelectedColor="Red" VertexSelectedColor="Red" ShowVertexToolTips="True" VertexClick="nodeXLControl1_VertexClick" SelectionChanged="nodeXLControl1_SelectionChanged" MouseMode="Select" MouseAlsoSelectsIncidentEdges="False" ContextMenuOpening="nodeXLControl1_ContextMenuOpening" GraphLaidOut="nodeXLControl1_GraphLaidOut">

            </my:NodeXLControl>
        </StackPanel>
        <!--<ComboBox Height="23" Margin="39,12,119,0" Name="comboBox1" VerticalAlignment="Top" SelectionChanged="comboBox1_SelectionChanged" />-->
        <GridSplitter Grid.Column="1" HorizontalAlignment="Stretch"/>

        <StackPanel Grid.Column="2">                
            <toolkit:DataGrid AutoGenerateColumns="True" Margin="0,62,0,0" Name="grdGraphDetails" ItemsSource="{Binding GraphDetail}" IsReadOnly="True" 
                          HorizontalAlignment="Right" Width="109" MouseLeftButtonUp="grdGraphDetails_MouseLeftButtonUp" 
                          SelectedValuePath="Key" Height="179" />              
        </StackPanel>

    </Grid>
    <controls:ModalDialog x:Name="ModalDialog"></controls:ModalDialog>         
    <controls:ModalDialog1 x:Name="ModalDialog1"></controls:ModalDialog1>
</Grid> 
```

在这里，我在由网格分隔符分隔的页面上有两个控件 NodeXlControl1 和 Datagrid1。当窗口加载时 NodeXlControl1 不在网格列的宽度和高度范围内。我希望 nodexlcontrol1 应该显示在网格列的宽度和高度中。我如果超出列的宽度和高度的限制，滚动条应该来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:14:37.037

如果您的`my:NodeXLControl`内部有一些滚动查看器（例如 some`ItemsControl`或`ScrollViewer`based child），那么简单地包装`my:NodeXLControl`a`Grid`就可以了。

`StackPanel`扩展以溢出孩子。`Grid`扩展到外部容器的可用空间。

```
<Grid>
    <my:NodeXLControl  ... /> 
```

应该做的伎俩。

但是，如果您`my:NodeXLControl`没有滚动查看器，那么您需要将其包装在其中并为其提供`absolute`宽度或高度，或者将其包装在 a`Grid`中以使其绑定到其可用空间并相应地显示滚动条。

例如

```
 <Grid>
      <ScrollViewer ...>
        <my:NodeXLControl ...> 
```

# mongodb - 如何从处理程序访问全局 MongoDB 连接？

> ID：13029740
> 
> 赞同：2
> 
> 时间：2012-10-23T11:48:08.613
> 
> 标签：mongodb, haskell, state, haskell-snap-framework

我正在尝试使用 Snap 制作一个简单的 Web 应用程序。我想要一个可以跨处理程序使用的全局 MongoDB 连接。

我在 中打开此连接`appInit`，该连接有效。

```
data App = App { _mongoDB :: Pipe -- connection
               }

appInit :: SnapletInit App App
appInit = makeSnaplet "site" "My Site" Nothing $ do
    db <- liftIO $ do
        pipe <- runIOE $ connect (host "127.0.0.1")
        return pipe
    return $ App db 
```

但是，我不知道如何`_mongoDB`从处理程序访问此连接 ()。我尝试了几件事，包括以下内容，但每次都会出现类型错误。

```
watchHandler :: Handler App App ()
watchHandler = do
    res <- liftIO $ do
        pipe <- gets _mongoDB -- type error
        results <- access pipe master "db" (find $ select [] "movies")
        return results

    writeBS "test" 
```

它给了我以下错误：

```
No instance for (MonadState App IO)
  arising from a use of `gets'
Possible fix: add an instance declaration for (MonadState App IO)
In a stmt of a 'do' block: pipe <- gets _mongoDB
In the second argument of `($)', namely
  `do { pipe <- gets _mongoDB;
        results <- access pipe master "db" (find $ select [] "movies");
        return results }'
In a stmt of a 'do' block:
  res <- liftIO
         $ do { pipe <- gets _mongoDB;
                results <- access pipe master "db" (find $ select [] "movies");
                return results } 
```

它把我搞糊涂了。如何从处理程序访问我的 MongoDB 连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:21:29.987

该`liftIO`块仅用于 IO 操作，访问应用程序状态需要在`Handler`monad 本身中完成。

```
watchHandler :: Handler App App ()
watchHandler = do
    pipe <- gets _mongoDB
    res <- liftIO $ do
        results <- access pipe master "db" (find $ select [] "movies")
        return results

    writeBS "test" 
```

此外，绑定一个值然后立即返回它是多余的。你可以写：

```
watchHandler :: Handler App App ()
watchHandler = do
    pipe <- gets _mongoDB
    res <- liftIO $ access pipe master "db" (find $ select [] "movies")

    writeBS "test" 
```

# objective-c - 通知和发送对象值 - 请初学者帮助

> ID：13029744
> 
> 赞同：1
> 
> 时间：2012-10-23T11:48:23.953
> 
> 标签：objective-c, operating-system

我在一个名为 ConnectionController 的类中使用以下代码设置了一个通知中心

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(aChangeCalendarMethod:) name:@"updateCalendar" object:nil]; 
```

并且在另一个类中有一个发件人（MonthFieldValidator）

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"updateCalendar" object:self]; 
```

MonthFieldValidator 有一个名为 month 的 NSString 类型的属性，我想将它的值传递回连接控制器。

我似乎能做的就是得到这个

testObject 的打印说明：(NSObject *) testObject = 0x4055c00000000000

并且该对象没有月份属性（或者至少我可以访问）。

大概我将不得不用户用户信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:55:33.983

做这个：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"updateCalendar" object:yourMonthStringHere]; 
```

将被调用的方法是：

```
-(void)aChangeCalendarMethod:(NSNotification*)notification
{
   NSString *strMonth = (NSString *)[notification object]; //retrieve passed string like this
   //continue other code

} 
```

# autocomplete - emacs：python自动完成只是不想工作

> ID：13029756
> 
> 赞同：1
> 
> 时间：2012-10-23T11:49:08.243
> 
> 标签：autocomplete, python-2.7, ubuntu-12.04, emacs23

我在这里找不到我的问题的具体答案，所以我敢在被引导到答案的情况下问它；）

大约两天以来，我试图让[自动完成模式](http://cx4a.org/software/auto-complete/index.html)为 python 工作，但我不走运:( 我一直遵循[这个网站](http://www.emacswiki.org/emacs/PythonProgrammingInEmacs)和[这个网站](http://www.enigmacurry.com/2009/01/21/autocompleteel-python-code-completion-in-emacs/)的指示，这两个网站都已经过时了.

给不熟悉的人做个简单的描述：根据网站，在尝试安装自动完成功能之前，显然有必要先安装[rope](http://rope.sourceforge.net/)、[rope-mode](http://pypi.python.org/pypi/ropemode)、[pymacs](http://pymacs.progiciels-bpi.ca/pymacs.html#installation)和[ropemacs 。](http://rope.sourceforge.net/ropemacs.html)我相当有信心，我已经成功地做到了（每个手册中的给定测试，如果有的话，都给出了预期的结果），但是一旦我安装了自动完成功能，它就不会，你知道，自动完成......

最后，我完全有可能犯了一个新手错误，所以请不要害羞，在这里问一个明显的问题。

非常感谢你的帮助。

* * *

我正在使用 Ubuntu 12.04 和 emacs23，我想将它与 python2.7 一起使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:35:21.997

bzr 分支 lp:python-mode/components-python-mode

包括基于公司模式的自动完成

那是python-mode.el的开发分支，目前还没有发布。

# php - 使用 PHP 将十六进制代码 0xbb 转换为 html 实体 »

> ID：13029757
> 
> 赞同：1
> 
> 时间：2012-10-23T11:49:09.427
> 
> 标签：php, regex, hex, preg-match

正如标题所说，我正在尝试使用 PHP 将字符`»`转换为它的 html 实体。这不是我们的最终解决方案，但在完成其他一些重大更改之前，我们需要将其作为快速修复。

我正在尝试使用以下代码进行测试，但它没有按我想要的那样工作。

```
<form action="test.php" method="post">
    <input type="text" name="test" />
    <input type="submit" value="Go" />
</form>

<?php
if (isset($_POST['test'])){
    $converted = preg_replace('/\xbb/', '&raquo;', $_POST['test']);
    echo '<div>Original: '.$_POST['test'].'</div>';
    echo '<div>Converted: '. $converted.'</div>';
}
?> 
```

转换后的似乎是正确的，但我们`&raquo;`在 Firefox 的视图源中显示为 ? 在一个广场上，但我不确定它实际上是什么或它为什么在那里。

请问有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:53:23.100

添加`u`修饰符：

```
$converted = preg_replace('/\xbb/u', '&raquo;', $_POST['test']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:59:59.023

[`»`unicode](http://www.fileformat.info/info/unicode/char/bb/index.htm)中的字符表示为十六进制`00bb`。您的正则表达式仅匹配第二个字节，因此您仍然有一个空字节。这会起作用：

```
$converted = preg_replace('/\x00\xbb/', '&raquo;', $_POST['test']); 
```

或者您可以使用另一个专门用于匹配 unicode 字符的修饰符，但我对 PHP 的了解不够充分，无法自信地说出什么会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:00:33.980

`»`是`c2 bb`UTF-8 但`bb`在 ISO-8859-1 中。

在非 UTF-8 编码的页面上输出此内容时，您会看到如下内容：

```
Â» or 
�» 
```

很有可能，该字符是通过 UTF-8 发布的。这意味着第二个字节正在被替换，但第一个字节仍然存在，所以你最终会`c2`跟着`&raquo;`

尝试

```
$converted = preg_replace('/\xbb/u', '&raquo;', $var); 
```

或者

```
$converted = preg_replace('/\xc2\xbb/', '&raquo;', $var); 
```

# java - 按时间和猜测次数排序高分

> ID：13029758
> 
> 赞同：1
> 
> 时间：2012-10-23T11:49:11.630
> 
> 标签：java

截至目前，我的高分列表仅按猜测次数排序。我希望具有相同猜测次数的条目也按时间（以毫秒为单位）按降序排序。尝试搜索并找到了一些类似的 Q，但无法真正找到解决方案。任何指针将不胜感激！也可以随意评论我的代码的其他部分！

```
import java.util.*;

public class Game {

private static ArrayList<highScore> score = new ArrayList<highScore>();

private class highScore implements Comparable<highScore> {

    int guessCount = 0;
    double playerTime = 0;
    String playerName;

    public highScore (int guessCount, double playerTime, String playerName) {
        this.guessCount = guessCount;
        this.playerTime = playerTime;
        this.playerName = playerName;
    }

    public String toString() {
        String scoreList = (this.playerName + "\t\t" + this.guessCount + "\t\t" + this.playerTime);
        return scoreList;
    }

    public int compareTo(highScore hs) {
        if (((Integer)this.guessCount).compareTo(((Integer)hs.guessCount)) > 0)
            return 1;
        else
            return -1;
    }
}

public static void main(String [] args) {

    boolean playGame = true;
    Scanner scan = new Scanner(System.in);

    Game g = new Game();

    while(playGame) {
        g.start();

        System.out.println("\nPlay again?");
        String s = scan.nextLine();
            if (s.equalsIgnoreCase("n")) {
                System.out.print("Quitting...");
                playGame = false;
        }
    }
}

public void start() {

    int number = (int) (Math.random() * 1001 );
    int guess = -1;
    int guessCount = 0;
    String guessStr, playerName;
    String quit = "quit";
    Scanner scan = new Scanner(System.in);
    boolean play = true;

        System.out.print("Welcome to the greatest guessing game of all time!" + 
        "\nGuess a number between 1-1000!" + 
        "\nType \"quit\" to quit.");

        long startTime = System.currentTimeMillis();

        System.out.println("\nDEBUG, nr is: " + number);

        while (guess != number && play) {
            try {
                System.out.print("\nEnter your guess: ");
                guessStr = scan.nextLine();
                    if (guessStr.equalsIgnoreCase("quit")) {
                        play = false;
                        System.out.println("Quitting...");
                        return;
                }
                guess = Integer.parseInt(guessStr);

                if (guess <= 1 || guess > 1000) {
                    System.out.println("Invalid guess, won't count, try again!");
                }
                if (guess < number) {
                    System.out.println("Too low, try again!");
                    guessCount++;
                }
                if (guess > number) {
                    System.out.println("Too high, try again!");
                    guessCount++;
                }
            }
            catch(NumberFormatException e) {
                System.out.println("Sorry, only numbers. Try again!");
            }
            catch (InputMismatchException ex) {             
                System.out.println("Sorry, only numbers. Try again!");
            }
        }

        if (guess == number) {
            long endTime = System.currentTimeMillis();
            long gameTime = endTime - startTime;

            System.out.println("Nice, the correct number is " + number + "!");
            System.out.print("You nailed it after " + (int)(gameTime)/1000 + " seconds and " + guessCount + " tries!");
            System.out.println("\nEnter your name!");

            playerName = scan.nextLine();
            score.add(new highScore(guessCount, gameTime, playerName));
            Collections.sort(score);

            System.out.println("Name ------- Guesses -------- Time in ms");
            for (highScore h: score) {
                System.out.println(h);
            }
        }
     }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:54:05.417

你只需要修改你的`compareTo`方法来考虑相等的情况。然后进行下一个比较：-

```
public int compareTo(highScore hs) {

    if (this.guessCount == hs.guessCount) {
         return (new BigDecimal(this.playerTime)).compareTo(
                 new BigDecimal(hs.playerTime)
    } else {
         return Integer.valueOf(this.guessCount).compareTo(
                Integer.valueOf(hs.guessCount));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:00:50.787

highScore 的 compareTo() 方法必须实现如下

```
public int compareTo(highScore hs)
{
    if (((Integer)this.guessCount).compareTo(((Integer)hs.guessCount)) > 0)
        return 1;
    else
    {
        if(this.guessCount == hs.guessCount)
        {
          if(this.playerTime > hs.playerTime)
          {
             return 1;
          }
          else
          {
             return -1;
          }
        }

        return -1;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:04:58.133

**-**每当您需要**根据超过 1 个属性进行排序时**，请选择`java.util.Comparator`接口。

**-**使用连同的`compare()`方法对您的列表进行排序。`Comparator<T>``Collections.sort(List l, Comparator c)`

# c# - 如何停止 WP7 ListBox 自动滚动单击的项目进入视图？

> ID：13029761
> 
> 赞同：1
> 
> 时间：2012-10-23T11:49:14.373
> 
> 标签：c#, .net, windows-phone-7

当用户在列表框中选择一个项目时，我有一个具有很好的弹出动画的应用程序。当用户单击返回按钮时，会使用飞行动画。您可以在[此处](http://www.scottlogic.co.uk/blog/colin/2011/04/metro-in-motion-3-flying-titles/)查看示例：我使用与此示例相同的动画代码。一切正常，直到单击的项目部分离开屏幕底部或顶部。弹出动画将正确发生，但是当用户返回列表时，列表框会自动向上（或向下）滚动所选项目以完全显示。然而，flyin 动画将文本返回到原始（在自动滚动发生之前）位置。您可能需要下载工作示例才能完全了解我的内容。

我的问题是 - 有没有办法禁用这个自动滚动动作。消息和电子邮件等内置应用程序在选择时不会将部分可见的项目滚动到视图中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:50:11.030

我不知道如何禁用自动滚动操作，但我对该代码有一个快速修复：

在班上`ItemFlyInAndOutAnimations`

添加字段

```
private FrameworkElement _element; //let's consider the line is 266 
```

在进行`public void ItemFlyIn()`更改：

```
public void ItemFlyIn()
{
  if (_popupCanvas.Children.Count != 2)
    return;

  _popup.IsOpen = true;
  _backgroundMask.Opacity = 0.0;

  Image animatedImage = _popupCanvas.Children[1] as Image;

  var sb = new Storyboard();

  var rootFame =  Application.Current.RootVisual as FrameworkElement; //new line
  var targetElementPosition = _element.GetRelativePosition(rootFame); //new line
  // animate the X position
  var db = CreateDoubleAnimation(targetElementPosition.X - 100, targetElementPosition.X,
      new SineEase(),
      _targetElementClone, Canvas.LeftProperty, _flyInSpeed); //reference changed!
  sb.Children.Add(db);

  // animate the Y position
  db = CreateDoubleAnimation(targetElementPosition.Y - 50, targetElementPosition.Y,
      new SineEase(),
      _targetElementClone, Canvas.TopProperty, _flyInSpeed); //reference changed!
  sb.Children.Add(db);
  //other code is the same 
```

在`public void ItemFlyOut(FrameworkElement element, Action action)`

在这条线之后

```
_targetElementPosition = element.GetRelativePosition(rootElement); 
```

添加这个：

```
_element = element; 
```

**我做了什么：**

在这段代码中，我保存了对动画 UI 元素的引用，并更新了它在背面动画上的位置。

你最好测试一下这段代码，但它似乎没问题。

# vba - 寻找返回 Integer 的 WorksheetFunction 方法

> ID：13029764
> 
> 赞同：2
> 
> 时间：2012-10-23T11:49:26.510
> 
> 标签：vba, types, excel, type-conversion

我认为`TypeName`函数返回 VBA 中数据的确切类型。现在我正在寻找一个`WorksheetFunction`可以返回`Integer`, 而不是`Double`.

例如，VBA 中的许多`WorksheetFunction`返回给出. 奇怪的是，一些函数也应该返回give ，例如and 。`Double``MsgBox TypeName(Application.WorksheetFunction.RandBetween(1, 2))``Double``Integer``Double``MsgBox TypeName(Application.WorksheetFunction.Count(Range("A2:A10")))``MsgBox TypeName(Application.WorksheetFunction.Fact(3))`

那么有谁知道是否有一个`WorksheetFunction`返回 a`Double`并且可以让我们`TypeName`检测到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T16:00:31.433

您可以使用 int() 函数来检索您提到的整数格式的函数之一的输出。

# iphone - iOS：书签 SQL 数据库的问题

> ID：13029765
> 
> 赞同：1
> 
> 时间：2012-10-23T11:49:26.903
> 
> 标签：iphone, objective-c, ios, sqlite

我创建了一个多语种词典应用程序，它可以读取多个数据库，我遇到了书签问题......在应用程序的 MainViewController 中，我有一个用户选择词典的操作菜单。所以我为这些字典创建了一个键来识别选择了哪个字典。这是我的代码：

**读取数据库**

```
- (NSString *) getDBPath
{
    NSInteger kValue = [[[NSUserDefaults standardUserDefaults] stringForKey:@"Bv"] intValue];

    NSString *documentsDir = [[NSString alloc] init];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
    documentsDir = [paths objectAtIndex:0];

    switch (kValue) {
        case 1:
             documentsDir = [[NSBundle mainBundle]pathForResource:@"eg-pr" ofType:@"sqlite"];
            break;

            case 2:
             documentsDir = [[NSBundle mainBundle]pathForResource:@"pr-eng" ofType:@"sqlite"];
        default:
            break;
    }

    return documentsDir;
} 
```

问题是我无法在设备上为任何单词添加书签！问题是什么 ？？？

这是字典更改功能：

```
- (void)eng_pr
{

    [[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:1] forKey:@"Bv"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    dbClass.viewController = self;
    self.searchbar.placeholder = @"Search";
    [myTable reloadData];
} 
```

和书签：

```
-(void) setBookMark:(NSInteger)oid {

    sqlite3_stmt    *statement;

    const char *dbpath = [[self getDBPath] UTF8String];

    if (sqlite3_open(dbpath, &database) == SQLITE_OK)
    {
        NSString *SetFavSQL = [NSString stringWithFormat: @"UPDATE DIC SET bookmark=1 WHERE id=\"%d\"", oid];
        //      NSLog(@"%@",SetFavSQL);
        const char *SetFav_stmt = [SetFavSQL UTF8String];

        sqlite3_prepare_v2(database, SetFav_stmt, -1, &statement, NULL);
        if (sqlite3_step(statement) != SQLITE_DONE)
        {

        }
        sqlite3_finalize(statement);
        sqlite3_close(database);
    }

} 
```

编辑：

**搜索功能**

```
- (void)searchWord:(NSString *)txt{

    NSMutableArray *DB_Array = [[NSMutableArray alloc] init];

    NSString *dbPath = [[NSString alloc] initWithString: [self getDBPath]];

    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

        NSString *sql =[NSString stringWithFormat:@"SELECT * FROM DIC Where Name LIKE \'%@%%\' order by NAME LIMIT 30",txt];

        sqlite3_stmt *compiledStatement;

        if(sqlite3_prepare_v2(database, [sql UTF8String] , -1, &compiledStatement, NULL) == SQLITE_OK) {
            while(sqlite3_step(compiledStatement) == SQLITE_ROW) {

                NSInteger oid = sqlite3_column_int(compiledStatement, 0);

                const char* f1 = (const char*)sqlite3_column_text(compiledStatement, 1);
                NSString *oName = f1 == NULL ? nil : [[NSString alloc] initWithUTF8String:f1];

                const char* f2 = (const char*)sqlite3_column_text(compiledStatement, 2);
                NSString *oMean = f2 == NULL ? nil : [[NSString alloc] initWithUTF8String:f2];

                const char* f3 = (const char*)sqlite3_column_text(compiledStatement, 3);
                NSString *oPron = f3 == NULL ? nil : [[NSString alloc] initWithUTF8String:f3];

                NSInteger bm = sqlite3_column_int(compiledStatement, 5);

                readerClass = [[Reader alloc]initWithReadDB:oid Name:oName Mean:oMean Pron:oPron bookMark:bm];

                [DB_Array addObject:readerClass];

            }
        }
        else {
            NSLog(@"Error retrieving data from database.");
        }
        sqlite3_close(database);
    }
    else {

        NSLog(@"Error: Can't open database!");

    }

    AppDelegate *appDelegateClass = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [appDelegateClass.wordList removeAllObjects];
    [appDelegateClass.wordList=DB_Array mutableCopy];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T15:01:17.140

好的，问题是您的数据库（.sqlite）位于资源文件夹中，资源文件夹中的所有数据/文件都可以读取但不能写入。当您调用书签方法时，您会执行查询（UPDATE ...），因此它会尝试修改 sqlite 中的数据，但它不能，因为您的 .sqlite 在资源文件夹中。

您的问题的解决方案是将您的 .sqlite 文件放在 Document 目录中，而不是在资源目录中；）

**编辑：**如果我是你，在第一个应用程序启动时，将所有 .sqlite 从 Resources 文件夹复制到 Document 文件夹，并使用 Document 文件夹中的 .sqlite。

一些有用的提示：[将文件从 Resources 文件夹复制到 Document 文件夹](https://stackoverflow.com/questions/6545180/ios-copy-a-file-in-documents-folder)

**编辑2：**

当你这样做时：

```
switch (kValue) {
    case 1:
         documentsDir = [[NSBundle mainBundle]pathForResource:@"eg-pr" ofType:@"sqlite"];
        break;

        case 2:
         documentsDir = [[NSBundle mainBundle]pathForResource:@"pr-eng" ofType:@"sqlite"];
    default:
        break;
} 
```

您正在从 Resource 文件夹中读取文件，您应该从文档目录中读取 sqlite：

```
switch (kValue) {
    case 1:
         documentsDir = [NSString stringWithFormat:@"%@/eg-pr.sqlite", documentsDir];
        break;

        case 2:
         documentsDir = [NSString stringWithFormat:@"%@/pr-eng.sqlite", documentsDir];
    default:
        break;
} 
```

此外，如果 kValue 不等于 1 或 2，则 documentDir 等于 [paths objectAtIndex:0]；（所以它会返回 Document 目录本身，而不是位于 document 目录中的 sqlite 文件）它应该是这样的吗？：

```
documentsDir = [NSString stringWithFormat:@"%@/filename.sqlite", documentsDir]; 
```

# iphone - GPU 图像过滤器

> ID：13029767
> 
> 赞同：-6
> 
> 时间：2012-10-23T11:49:29.180
> 
> 标签：iphone, ios, xcode, gpu, core-image

在我的应用程序中，我想应用不同的视频过滤器，例如：淡入淡出、雪落、彩虹、快动作、慢动作等。

我研究了 Brad Larson 项目，但它并没有完全满足我的所有过滤要求。

所以，帮帮我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:23:22.390

如果您需要自定义过滤器，您可以随时编写它们并添加到 GPUImage 项目中。只需抓住一些简单的过滤器，例如`GPUImageRGBFilter`or`GPUImageLineGenerator`并进行实验。

您还可以`OpenGL`直接修改调用以在电影前面注入您的自定义效果。看看 CubeExample。

# android - 有什么方法可以离线使用谷歌地图，甚至是其中的一部分？

> ID：13029773
> 
> 赞同：1
> 
> 时间：2012-10-23T11:49:36.933
> 
> 标签：android, google-maps, google-maps-api-3, android-mapview

我在这里看到了很多关于同一主题“在 Android 应用程序中使用离线地图”的问题。我想知道是否有任何方法可以解决此问题，或者新 API 版本中是否有任何更改允许这样做？

我考虑在我的应用程序中使用谷歌地图应用程序离线数据，但我不知道这是否应该工作以及如何去做。这也将要求用户首先使用谷歌地图应用程序下载地图。

这里提供的一些解决方案是使用[http://code.google.com/p/osmdroid/](http://code.google.com/p/osmdroid/)或类似的。我不知道这些解决方案有多可靠。您以前是否使用过其中一些库出售过应用程序并且非常可靠？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:05:12.793

Osmdroid 运行良好，您可以使用许多不同的图块源，尽管 OpenStreetMap 是最通用且使用最广泛的。[如果您使用MOBAC](http://mobac.sourceforge.net/)等实用程序下载特定区域的图块，则 OSM 可以合法离线使用。

它在编码方面与 Google Maps API 非常相似。主要区别在于它不需要 API 密钥，并且可以从普通 Activity 访问，而不是 MapActivity。我一直在我的私人应用程序中使用它作为我在伦敦地区的默认袖珍地图，因为它根本不需要数据连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:24:46.763

> 我想知道是否有任何方法可以解决此问题，或者新 API 版本中是否有任何更改允许这样做？

不，对不起。

# c - 管道和叉子的问题，它只进入子进程一次，而不是每次我想要的

> ID：13029778
> 
> 赞同：0
> 
> 时间：2012-10-23T11:50:05.620
> 
> 标签：c, fork, pipe

所以代码是这样的：

```
int main () 
{
  int pid, fd[2], i, j;
  char comanda[1000], comm[100][100], *var, *var2, vect[100][100], text[1000], check[10000];
  if(pipe(fd)<0) 
  {
    perror("pipe error");
    exit(1);
  }
  if((pid = fork()) < 0 ) 
  {
    perror("fork error");
    exit(1);
  }
  j = 0;
  if(pid){ 
      do {
        if( j > 0) fgets (check , 1000 , stdin); //just in case there's still something in the buffer
        printf("enter command: \n");
        scanf("%[^\t\n]", comanda);
        if(var = strtok(comanda, " "))
        {
          i=0;
          while(var != NULL)
          {
            strcpy(vect[i], var);
            var = strtok(NULL, " ");
            i++;
          }
        }
        else
          strcpy(vect[0], comanda);
        if(strcmp(vect[0], "login") == 0)
        {
            write(fd[1], "login ", 6);
            write(fd[1], vect[1], strlen(vect[1]));
            printf("I got login");
        }
        else if(strcmp(vect[0], "quit") == 0)
        {
          exit(1);
        }
        else
          printf("I got the command %s \n", vect[0]);
        j++;
      } while(1);
      close(fd[0]);
      close(fd[1]);
      wait(NULL);
  }
  else
  {
      close(fd[1]); 
      printf("copil? \n");
      int i=0;
      read(fd[0], text, sizeof(text));
      var2 = strtok(text, " ");
      j=0;
      while(var2 != NULL)
      {
        strcpy(comm[j], var2);
        var2 = strtok(NULL, " ");
        j++;
      }
      if( strcmp(comm[0], "login") == 0)
      {
          //comanda e login, deci verificam username-ul. 
          if(login(comm[1]))
          {
            printf("OK, Logged IN! \n");
          }
          else
          {
            printf("Username not in /etc/passwd \n");
          }
      }
      close(fd[0]);
      exit(0);
  }
  return 0;
} 
```

我想要的是从控制台行读取命令，并且每次我得到一个已知命令时，去孩子那里执行它。现在它可以很好地读取命令，登录工作正常但只有一次。之后，它仍然获得登录，它打印“我得到登录”，但它不会去孩子那里检查它是否正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:56:48.130

我可以看到您有三个主要问题：

1.  首先是您不会终止从子管道中读取的字符串；
2.  另一个问题的根源是孩子没有循环，而是执行一次然后退出；
3.  第三种是如果您将子进程更改为循环，然后退出父进程，则子进程将被放弃，并继续等待永远不会出现的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T15:17:59.393

我有同样的问题。我的想法是通过管道控制另一个进程，就像它会从键盘/标准输入获得输入一样。这是与不是为它设计的应用程序的进程间通信的经典需求。

问题是，所有示例代码一开始只工作一次，向子进程标准输入发送一些东西。在我看来，管道必须在父母一方关闭，以便孩子一方接收数据。一旦关闭，我就无法“重新打开”它来发送另一个命令。

挽救了我一天的是： [http ://www.rkoucha.fr/tech_corner/pty_pdip.html](http://www.rkoucha.fr/tech_corner/pty_pdip.html)

[http://en.wikipedia.org/wiki/Pseudo_terminal](http://en.wikipedia.org/wiki/Pseudo_terminal)

我不知道为什么我花了将近两天的时间才弄明白，因为毕竟这听起来很明显。我在这里发布这个，因为我站在这一边，答案并没有真正解决我的问题。

真诚的，罗伯特

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:02:55.700

这是因为您的子进程刚刚退出。似乎首先“read(fd[0], text, sizeof(text));” 阻塞，直到它将从父进程接收到一些数据。然后它执行数据并退出。

顺便说一句，最好调用 waitpid 函数来避免僵尸进程，这可能会给您的应用程序带来一些问题。更重要的是你应该“关闭（fd [0]）;” 在父进程的开头不是在“close（fd [1]）；”

# ios - 在 Retina 4 设备上以原始分辨率运行需要名为“-568h@2x.png”的启动图像

> ID：13029780
> 
> 赞同：5
> 
> 时间：2012-10-23T11:50:10.020
> 
> 标签：ios, xcode, warnings, splash-screen, xcode4.5

我在 XCode 4.5 中创建了一个新项目，并为每个所需的分辨率添加了 3 个启动图像。XCode 自动创建了 3 个文件：Default.png、Default@2x.png 和 Default-568h@2x.png

现在我收到一条警告，要求创建一个**“-568h@2x.png”** （没有“默认”字样）并提供为我添加文件。如果我单击“添加”，它会创建一个名为“-568h@2x.png”的空图像（黑色矩形）。如果我不添加它，我在运行时的启动画面不正确（它需要应用程序图标并将其拉伸到 while 屏幕）

所以我决定顺其自然，将 Default-568h@2x.png 复制到 -568h@2x.png 中，它确实解决了启动画面和警告，但现在我遇到了 gitHub 的问题，因为它不能使用以破折号“-”开头的文件。

有任何想法吗？我在哪里“丢失”了“默认”前缀？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T00:07:46.403

在你的`info.plist`，看看你有没有钥匙`UILaunchImageFile~iphone`。我敢打赌它的价值是空的。这个键是 Xcode 用来获取启动图像的文件名的。那就是您将“默认”替换为“MyAwesomeLaunchImage”的地方，因此您的图像被命名为`MyAwesomLaunchImage@2x.png`等等。

# java - jdeveloper weblogic错误的jar加载

> ID：13029781
> 
> 赞同：0
> 
> 时间：2012-10-23T11:50:11.037
> 
> 标签：java, weblogic-10.x, jdeveloper

我正在使用 java 中的 web 应用程序，我想使用 ServletFileUpload 类来上传我的文件。我已经下载了 commons-fileupload-1.2.2.jar 并通过项目属性添加了该 jar。我正在使用 jdeveloper 11g 和 weblogic 服务器。

当我运行应用程序时，我得到：“java.lang.NoSuchMethodError: parseRequest”。

这是我的代码：

```
List<FileItem> items;
items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request); 
```

据我了解，我的应用程序可能使用的是旧版本的库。

我的问题是如何让我的应用程序使用我下载的这个新库？我可以在 Jdeveloper 中执行此操作，还是必须更改服务器上的某些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:42:23.667

您可以尝试将 weblogic-application.xml 文件中的“prefer-web-inf-classes”元素设置为 true。然后，这应该在服务器中定义的文件夹之前加载分类在 web-inf/lib 文件夹中。

阅读[WebLogic 类加载文档](http://docs.oracle.com/cd/E12840_01/wls/docs103/programming/classloading.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:37:49.873

我发现了问题所在。在 WEB/lib 的 war 文件中，我有两个 .jar 文件。commons-fileupload-1.2.2.jar（我添加的）和 commons-fileupload.jar（这个在 Struts 运行时库中）。我从我的项目中排除了 Struts Runtime（因为我不需要它），现在它工作正常。

# c# - 通过 For-Loop 添加表行

> ID：13029782
> 
> 赞同：0
> 
> 时间：2012-10-23T11:50:15.763
> 
> 标签：c#, datagrid, for-loop, datatable

我正在尝试编写一个需要我将数据添加到数据网格的程序。有一种模式，但我似乎无法弄清楚如何通过 For 循环体面地完成这些数据。

这是我没有使用 For-Loop 的代码：

```
table.Rows.Add("0", "0", "0", "0", "0");
table.Rows.Add("0", "0", "0", "1", "0");
table.Rows.Add("0", "0", "1", "0", "0");
table.Rows.Add("0", "1", "0", "0", "0");

table.Rows.Add("1", "0", "0", "0", "0");
table.Rows.Add("1", "0", "0", "1", "0");
table.Rows.Add("1", "0", "1", "0", "0");

table.Rows.Add("1", "1", "0", "0", "0");
table.Rows.Add("1", "1", "0", "1", "0");

table.Rows.Add("1", "1", "1", "0", "0");
table.Rows.Add("1", "1", "1", "1", "0"); 
```

最后一个零将动态生成，无需对此做任何事情。

这是否可以通过 For 循环来实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:39:21.857

你可以使用这个循环，虽然它不是很可读。因此，如果您可以使用静态代码，请使用它。

```
bool allFieldsOne = false;
table.Rows.Add("0", "0", "0", "0", "0");
while (!allFieldsOne)
{
    DataRow lastRow = table.Rows[table.Rows.Count - 1];
    DataRow currentRow = table.Rows.Add();
    currentRow[4] = "0";
    for (int f = 3; f >= 0; f--)
    {
        if (lastRow.Field<string>(f) == "0")
        {
            currentRow[f] = "1";
            while (--f >= 0)
                currentRow[f] = "0";
            break;
        }
        else
        {
            currentRow[f] = "1";
            allFieldsOne = f == 0;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:12:16.230

这种for循环模式有用吗？（这是用于真值表的模式，只是二进制计数）

```
for (int i = 0; i < 16; i++)
            {
                Console.WriteLine(
                   string.Format("{0:0000}",
                   Convert.ToInt16(Convert.ToString(i, 2)))
                );
            }

/* 
OUTPUT
0000
0001
0010
0011
0100
0101
0110
0111
1000
1001
1010
1011
1100
1101
1110
1111
*/ 
```

# hadoop - Hadoop Map Reduce，如何将第一个 reducer 输出和第一个 map 输入结合起来，作为第二个 mapper 的输入？

> ID：13029787
> 
> 赞同：3
> 
> 时间：2012-10-23T11:50:32.880
> 
> 标签：hadoop, mapreduce

我需要使用 map reduce 来实现一个功能。

要求在下面提到。

1.  映射器的输入是一个包含两列 productId 和 Salescount 的文件
2.  减速机产量，销售额总和

要求是我需要计算 salescount / sum(salescount)。

为此，我计划使用嵌套映射减少。但是对于第二个映射器，我需要使用第一个 reducers 输出和第一个 map 的输入。

我该如何实现这一点。或者有什么替代方法吗？

问候维努

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:34:14.433

您可以按照自己的方式使用`ChainMapper`和`ChainReducer`PIPE Mappers 和 Reducers。请看[这里](http://hadoop.apache.org/docs/r0.20.1/api/org/apache/hadoop/mapred/lib/ChainMapper.html)

以下将类似于您需要实现的代码片段

```
JobConf mapBConf = new JobConf(false);

JobConf reduceConf = new JobConf(false);

ChainMapper.addMapper(conf, FirstMapper.class, FirstMapperInputKey.class, FirstMapperInputValue.class,
   FirstMapperOutputKey.class, FirstMapperOutputValue.class, false, mapBConf);

ChainReducer.setReducer(conf, FirstReducer.class, FirstMapperOutputKey.class, FirstMapperOutputValue.class,
   FirstReducerOutputKey.class, FirstReducerOutputValue.class, true, reduceConf);

ChainReducer.addMapper(conf, SecondMapper.class, FirstReducerOutputKey.class, FirstReducerOutputValue.class,
   SecondMapperOutputKey.class, SecondMapperOutputValue.class, false, null);

ChainReducer.setReducer(conf, SecondReducer.class, SecondMapperOutputKey.class, SecondMapperOutputValue.class, SecondReducerOutputKey.class, SecondReducerOutputValue.class, true, reduceConf); 
```

或者如果您不想使用多个 Mapper 和 Reducers，您可以执行以下操作

```
public static class ProductIndexerMapper extends MapReduceBase implements Mapper<LongWritable, Text, Text, LongWritable> {

    private static Text productId = new Text();
    private static LongWritable salesCount = new LongWritable();

    @Override
    public void map(LongWritable key, Text value,
            OutputCollector<Text, LongWritable> output, Reporter reporter)
            throws IOException {
        String[] values = value.toString().split("\t");
        productId.set(values[0]);           
        salesCount.set(Long.parseLong(values[1]));
        output.collect(productId, salesCount);
    }

}

public static class ProductIndexerReducer extends MapReduceBase implements Reducer<Text, LongWritable, Text, LongWritable> {

    private static LongWritable productWritable = new LongWritable();

    @Override
    public void reduce(Text key, Iterator<LongWritable> values,
            OutputCollector<Text, LongWritable> output, Reporter reporter)
            throws IOException {
        List<LongWritable> items = new ArrayList<LongWritable>(); 
        long total = 0;
        LongWritable item = null;
        while(values.hasNext()) {
            item = values.next();
            total += item.get();
            items.add(item);
        }
        Iterator<LongWritable> newValues = items.iterator();
        while(newValues.hasNext()) {
            productWritable.set(newValues.next().get()/total);
            output.collect(key, productWritable);
        }
    }

} 
```

`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-31T18:20:42.907

有了这个用例，我相信我们不需要两个不同的 mappers/mapreduce 作业来实现这一点。（作为上述评论中给出的答案的扩展）

假设您有一个非常大的输入文件，在 HDFS 中拆分为多个块。当您使用此文件作为输入触发 MapReduce 作业时，多个映射器（等于输入块的数量）将开始并行执行。

在您的映射器实现中，从输入中读取每一行并将 productId 作为键和 saleCount 作为值写入上下文。该数据被传递给Reducer。

我们知道，在一个 MR 作业中，所有具有相同 key 的数据都会传递给同一个 reducer。现在，在您的 reducer 实现中，您可以计算特定 productId 的所有 saleCounts 的总和。

***注意：我不确定分子中的值“salescount”。***

假设它是特定产品出现次数的计数，请使用计数器在计算 SUM(saleCount) 的同一 for 循环中添加并获取总销售计数。所以，我们有

totalCount -> 产品出现次数 sumSaleCount -> 每个产品的 saleCount 值的总和。

现在，您可以直接将上述值相除：totalCount/sumSaleCount。

希望这可以帮助！如果您有不同的用例，请告诉我。

# c++ - 提升工厂不同产品的回报价值

> ID：13029794
> 
> 赞同：1
> 
> 时间：2012-10-23T11:51:08.150
> 
> 标签：c++, design-patterns, boost, factory

我使用boost工厂来创建产品，我想做的是为其调用不同的产品`DoSomething()`，但问题是我希望每个产品的返回值都不一样，而且都是结构体。我想要ProductA->DoSomething()，那么它的返回值为structA，对于ProductB->DoSomething()，它的返回值为strucB。所有的结构都是从基地驱动的`struct`，有可能吗？感谢您的解决方案，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:47:55.087

您可以声明 base `struct ReturnType`，它将定义基本方法和变量。然后，您可以毫无问题地创建产品。

```
struct ReturnType
{
    virtual std::string getName(){}
};
struct MarsType : ReturnType 
{
    std::string specialMethod()
    {
        return "MARS";
    }
};
struct SnikersType : ReturnType 
{
    std::string specialMethod2()
    {
        return "SNIKERS";
    }
};

class Product
{
    public:
        virtual ReturnType* doSomething()=0;
};

class SnikersProduct : public Product
{
public:
    ReturnType* doSomething()
    {
        return static_cast<ReturnType*>(&value);
    }
private:
    SnikersType value;
};

class MarsProduct : public Product
{
public:
    ReturnType* doSomething()
    {
        return static_cast<ReturnType*>(&value);
    }
private:
    MarsType value;
};

class Creator
{
public:
    virtual Product* createProduct()=0;
};

class SnikersCreator : public Creator
{
public:
    Product* createProduct()
    {
        return new SnikersProduct();
    }
};

class MarsCreator : public Creator
{
public:
    Product* createProduct()
    {
        return new MarsProduct();
    }
};

int main()
{
    std::vector<Creator*> creators;
    creators.push_back(new MarsCreator());
    creators.push_back(new SnikersCreator());
    Product* mars = creators[0]->createProduct();
    Product* snikers = creators[1]->createProduct();
    std::cout<<"mars product returns "<<dynamic_cast<MarsType*>(mars->doSomething())->specialMethod()<<std::endl;
    std::cout<<"snikers product returns "<<dynamic_cast<SnikersType*>(mars->doSomething())->specialMethod2()<<std::endl;
    return 0;
} 
```

输出是：

```
mars product returns MARS
snikers product returns SNIKERS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:27:54.967

由于返回类型协方差，完全没有问题。这是一个 C++ 特性，意味着在派生类中实现的虚函数可以返回指向与在基类中实现（或声明，如果是纯虚拟的）函数或指针（或引用）相同的类**的指针（或引用） ) 到从那个派生的类**。这意味着您的代码是正确的 C++。

您说您的代码可以正确编译，因为返回类型协方差应该是正确的，如上一段所述。您还说您在运行时遇到错误，但恐怕我们无法帮助您，除非您指定您遇到的错误是什么。

# hadoop - Hadoop 作业使用相同的减速器输出到相同的文件

> ID：13029796
> 
> 赞同：1
> 
> 时间：2012-10-23T11:51:13.327
> 
> 标签：hadoop, mapreduce, output, reducers

我遇到了一个有趣的情况，现在正在寻找如何故意这样做。在我的本地单节点设置中，我从终端屏幕同时运行了 2 个作业。我的两个作业都使用相同的reducer，它们仅在映射函数（聚合键-分组依据）方面有所不同，两个作业的输出都写入了第一个作业的输出（尽管第二个作业确实创建了自己的文件夹，但它是空的）。我正在做的是提供跨各个级别的汇总聚合，这种行为对我来说很有趣，我可以在一个文件中使用来自两个不同级别的聚合输出（也可以完美排序）。

我的问题是如何在真正的 Hadoop 集群中实现相同的功能，我们有多个数据节点，即我以编程方式启动多个作业，所有作业都访问相同的输入文件，以不同方式映射数据，但使用相同的 reducer，并且输出可在一个单个文件，而不是 5 个不同的输出文件。

请指教。

在我决定问我的问题之前，我正在查看[缩减阶段之后的合并输出文件。](https://stackoverflow.com/questions/5700068/merge-output-files-after-reduce-phase)

谢谢和亲切的问候，

莫伊兹·艾哈迈德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:36:36.060

当不同的 Mapper 使用相同的输入文件，也就是相同的数据结构时，所有这些不同的 Mapper 的源代码可以放在单个 Mapper 实现的不同方法中，并使用上下文中的参数来决定调用哪些映射函数. 从好的方面来说，您只需要启动一个 Map Reduce Job。示例是伪代码：

```
class ComplexMapper extends Mapper {

protected BitSet mappingBitmap = new BitSet();

protected void setup(Context context) ... {
{
    String params = context.getConfiguration().get("params");
    ---analyze params and set bits into the mappingBitmap
}

protected void mapA(Object key, Object value, Context context){
.....
context.write(keyA, value);
}

protected void mapB(Object key, Object value, Context context){
.....
context.write(keyA, value);
}

protected void mapB(Object key, Object value, Context context){
.....
context.write(keyB, value);
}

public void map(Object key, Object value, Context context) ..... {
   if (mappingBitmap.get(1)) {
       mapA(key, value, context);
   }
   if (mappingBitmap.get(2)) {
       mapB(key, value, context);
   }
   if (mappingBitmap.get(3)) {
       mapC(key, value, context);
   }
} 
```

当然，它可以通过接口等更优雅地实现。

在作业设置中添加：

```
Configuration conf = new Configuration();
conf.set("params", "AB");

Job job = new Job(conf); 
```

正如 Praveen Sripati 所提到的，拥有一个输出文件将迫使您只拥有一个 Reducer，这可能对性能不利。当您从 hdfs 下载 part** 文件时，您始终可以连接它们。例子：

```
hadoop fs -text /output_dir/part* > wholefile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:04:09.293

通常每个 reducer 任务都会在 HDFS 中生成一个单独的文件，以便 reduce 任务可以并行运行。如果要求从 reduce 任务中获得一个 o/p 文件，则将作业配置为具有一个 reducer 任务。可以使用默认为 1 的[mapred.reduce.tasks](http://hadoop.apache.org/docs/r0.23.0/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml)属性配置 reducer 的数量。这种方法的缺点是只有一个 reducer，这可能是完成作业的瓶颈。

另一种选择是使用其他一些输出格式，它允许多个减速器同时写入同一个接收器，如[DBOuputFormat](http://hadoop.apache.org/docs/r0.20.1/api/org/apache/hadoop/mapred/lib/db/DBOutputFormat.html)。作业处理完成后，可以将数据库中的结果导出到平面文件中。这种方法将使多个reduce任务并行运行。

另一种选择是合并 OP 中提到的 o/p 文件。因此，根据每种方法的优缺点以及要处理的数据量，可以选择一种方法。

# php - 数字 REGEXP 与 PHP

> ID：13029797
> 
> 赞同：2
> 
> 时间：2012-10-23T11:51:19.380
> 
> 标签：php, regex, numbers

我尝试使用此 regexp 接受从 01.jpg 到 12.jpg 的文件名：

```
preg_match('/^([0-1][0-2]\.jpe?g)$/i', $_FILES['Filedata']['name']) 
```

01.jpg、10.jpg、11.jpg、12.jpg都可以

但不是 02.jpg 到 09.jpg ！！！

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:54:14.953

尝试这个

```
 '/^(0[1-9]|1[0-2])\.jpe?g$/i' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:55:04.700

你需要：

```
^(0[1-9]|1[012])\.jpe?g$ 
```

`0[1-9]`照顾`01`，`02`依此类推，直到`09`

`1[012]`这与`1[0-2]`照顾`10`,`11`和`12`

注意`()`谨慎使用。由于`|`在正则表达式运算符中的优先级最低：

```
^(0[1-9]|1[0-2]\.jpe?g)$ 
```

（来自另一个赞成的答案）是不正确的，因为它被视为：

```
^(0[1-9] 
```

或者

```
1[0-2]\.jpe?g)$ 
```

[**看见**](http://www.rubular.com/r/N7ekgP3XrH)

# java - 如何延迟重复警报的触发（开始时间）？

> ID：13029799
> 
> 赞同：2
> 
> 时间：2012-10-23T11:51:24.390
> 
> 标签：java, android, android-service, android-alarms, android-pendingintent

问题是我想延迟重复警报的第一次火灾。例如，我希望在点击 10 分钟后不立即执行此待处理的意图工作，该怎么做？

```
public void onClick(DialogInterface dialog, int which) {
Intent intent = new Intent(Main.this, ReportService.class);
AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
Calendar c = Calendar.getInstance();
PendingIntent pendingIntent = PendingIntent.getService(Main.this, 0, intent, 0);
alarmManager.setInexactRepeating(AlarmManager.RTC_WAKEUP, c.getTimeInMillis(), 112500, pendingIntent);
} 
```

此 setInexactRepeating 中的第二个参数称为 triggerAtMillis 来自 Android 开发人员指南：triggerAtMillis 闹钟应首先响起的时间（以毫秒为单位），使用适当的时钟（取决于闹钟类型）。这是不准确的：在此时间之前警报不会触发，但在第一次调用警报之前可能会有几乎整个警报间隔的延迟。

我正在改变它，它总是在点击时开始并且没有延迟，有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T12:52:21.983

在此处查看 [开发人员链接](http://developer.android.com/reference/android/app/AlarmManager.html#setInexactRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)。第二个参数是 triggerAtMillis。它用作**警报应该首先响起的时间（以毫秒为单位）**

因此，在您的情况下，将额外的毫秒添加到`c.getTimeInMillis()`，之后您要首先运行待处理的意图。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:56:41.177

检查 handler.postDelayed 函数，您可以在其中指定延迟

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-26T21:01:22.787

如果使用 ELAPSED_REALTIME 时钟，请执行此操作

```
manager.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                SystemClock.elapsedRealtime()+180000,
                180000,
                pendingIntent); 
```

不要使用零或 System.currentTimeMillis() 作为 ELAPSED 时钟的偏移量。

# java - 接口如何作为引用传递

> ID：13029800
> 
> 赞同：0
> 
> 时间：2012-10-23T11:51:30.043
> 
> 标签：java, interface, reference

我有疑问，以下是代码`bufferedwriter`

```
BufferedWriter out = new BufferedWriter(new FileWriter(testcasename+".html")); 
```

的构造函数`BufferedWriter`只接受引用类型'Writer'抽象类的参数，`filewriter`上面代码中的''类是如何实例化的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:53:06.877

不明白你的意思。

但是你做了`new FileWriter(path`) 它创建了一个`FileWriter`实例并`FileWriter`扩展`Writer`了它，这使它完全有效。

`Writer`不是接口，而是可以**扩展**或**子类**等的**抽象类。**

 ****接口已**实现**。并`new`创建一个对象并返回对该对象的**指针**或**引用**。引用**按值传递给**接受对象的`BufferedWriter`构造函数（将构造函数视为特殊方法） 。`Writer`

我真的希望我的解释清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T11:54:28.397

FileWriter 是 Writer，因为它扩展了 Writer 抽象类（尽管不是直接的）。因此，它可以被视为作家。请参见：

[http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html](http://docs.oracle.com/javase/6/docs/api/java/io/FileWriter.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:56:32.673

提示：子类的对象可以类型转换为父类，反之则不行。

在上述情况下，您将获得 Filewriter 类的对象，该对象扩展了 Writer 类，因此有效。****

# ios6 - 使用 kineticJS 在 ios6 中绘制图像

> ID：13029806
> 
> 赞同：2
> 
> 时间：2012-10-23T11:51:45.747
> 
> 标签：ios6, kineticjs

在 ios5 中，当我尝试使用 KineticJS 绘制图像时，它会完美绘制。但是在 ios6 中，当我尝试使用 KineticJS 绘制图像时，图像会自动绘制 2-3 倍（与 ios5 相比） .为什么会这样？是分辨率问题吗？我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:32:22.430

您是否设置了正确的元视口来定义页面大小？

[http://www.javascriptkit.com/dhtmltutors/cssmediaqueries3.shtml](http://www.javascriptkit.com/dhtmltutors/cssmediaqueries3.shtml)

# android - 如何在 TextView 编程中设置撇号

> ID：13029807
> 
> 赞同：3
> 
> 时间：2012-10-23T11:51:50.487
> 
> 标签：android, android-layout, textview

TextView.setText(String with ') ，我想为文本视图设置一个文本，但如果它有我尝试使用的空格或撇号，这个文本会一直未完成

```
String SomeString="MacDonald's"; 
```

或者

```
 SomeString="Fast Food"; 
```

我尝试了以下

```
 HTML.Fromhtml(SomeString).tostring() 
```

和

```
 SomeString.replace("'","\\\'") 
```

但没有好的结果结果总是

```
MacDon 
Fast 
```

有什么好主意吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-27T16:13:28.910

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-11T09:54:55.823

来自android开发者文档

您可以从 XML 设置撇号

> 单引号 (')
> 
> 以下任何一项：
> 
> ```
> 1\. &apos; 
> 2\. \'
> 3\. Enclose the entire string in double quotes ("This'll work", for example) 
> ```

样本

```
1\. <string name="travelers_details">Traveler&apos;s Information</string>

2\. <string name="travelers_details">Traveler\'s Information</string> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:59:26.257

Apastrophe 不能直接显示。当你遇到如下的省略号时，不要直接放置 Apastrophe 使用以下：

```
 if (YourString.contains("'")) {
      YourString= YourString.replaceAll("'", "\'");
    } 
```

这将帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:13:28.073

我相信，调用`yourTextView.setText("MacDonald's");`只会将**MacDonald's**设置在您的`TextView`. 你不需要任何花哨的东西来打印它。

# php - 如何将使用jquery自动完成选择填充的表单字段的值传递到新页面

> ID：13029810
> 
> 赞同：0
> 
> 时间：2012-10-23T11:52:07.430
> 
> 标签：php, jquery, jquery-ui

我正在使用 Jquery 自动完成。这一切都很好。我需要帮助的是，当它在选择特定名称的文本字段之一中填写帮助时，我希望它将该帮助发送到 profile.php?aid= 以便如果有人选择人名，该人可以查看他/她的个人资料。profile.php 正在使用 $_GET['aid'] 获取 url 参数。

供您参考的代码：

```
 <script>

$(function() {
    function log( message ) {
        $( "<div>" ).text( message ).prependTo( "#log" );
        $( "#log" ).scrollTop( 0 );
    }

    $( "#frndsrch" ).autocomplete({
        source: "searchfrnds.php",
        minLength: 2,
        select: function( event, ui ) {
             $( "#project-icon" ).attr( "src", "" + ui.item.icon );
             $( "#project-desc" ).val( "Name:" + ui.item.value + " " + ui.item.lvalue+" & "+"About:"+ui.item.abt+" & "+ "Email ID:" + ui.item.email); 
             $( "#aid" ).val( ui.item.aid );

                 }
    });

});
</script> 
```

这里的帮助进入了一个 id="aid" 选择名称的文本字段。

```
 <div class="ui-widget">
  <h1>Enter your friend's name</h1>
   <p>
  <label for="frndsrch"></label>
   <img src="images/transparent_1x1.png" alt="" width="100" height="100" class="ui-state-default" id="project-icon" />

      Enter Name:
   <input id="frndsrch" name="srch">
   <br />
    </p>

   <p>Further Information</p>
   <p> <textarea name="info" cols="50" rows="10" disabled="disabled" readonly="readonly" id="project-desc">As soon as you select a name from above, further information will be displayed here. 
   </textarea></p>
  <input type="text" name"aid" id="aid"/>
   </div> 
```

现在我如何以及在哪里添加

```
 <a href="profile.php?aid=<?php echo $_GET['aid']; ?>View Profile</a> 
```

以便将来自文本字段辅助的值传递给 $aid。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:21:12.883

首先使用 PHP_SELF 操作创建表单（因此当您提交表单时，它会重新加载页面）并添加一个名称为“submit”的提交按钮以发布表单并稍后在 PHP 中使用它。

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="GET">
<div class="ui-widget">
    <h1>Enter your friend's name</h1>
    <p>
    <label for="frndsrch"></label>
    <img src="images/transparent_1x1.png" alt="" width="100" height="100" class="ui-state-default" id="project-icon" />

    Enter Name:
    <input id="frndsrch" name="srch">
    <br />
    </p>

    <p>Further Information</p>
    <p> <textarea name="info" cols="50" rows="10" disabled="disabled" readonly="readonly" id="project-desc">As soon as you select a name from above, further information will be displayed here. 
    </textarea></p>
    <input type="text" name"aid" id="aid"/>
</div>
<input type="submit" id="submit" name="submit"/> 
```

现在创建 PHP 代码以获取辅助值并在 ANCHOR 标记 url 属性中回显它：

```
<?php
if (isset$_GET['submit']) {
     $aid = $_GET['aid'];
     echo "<a href='profile.php?aid=$aid'>View Profile</a>";

}
?> 
```

# javascript - 如何使用 JavaScript 将网页转换为字符串？

> ID：13029811
> 
> 赞同：1
> 
> 时间：2012-10-23T11:52:13.367
> 
> 标签：javascript, url, web-crawler

我需要使用 JavaScript 获取页面的 html 内容，该页面也可以在另一个域上，类似于 wget 的功能，但在 JavaScript 中。我想将它用于一种网络爬虫。

使用 JavaScript，如果我有一个 URL，我如何获取页面的内容并将其转换为字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:57:30.973

通过 JavaScript 通过 HTTP 加载内容的一般方法是[使用 XMLHttpRequest 对象](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)。这受制于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，因此要访问其他域上的内容，您必须[绕过它](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)。

这假设您在 Web 浏览器中运行 JS（暗示*“该页面也可能在另一个域上”*）。如果您不是，那么其他选择将向您开放。例如，对于[nodejs](http://nodejs.org/) ，您可以使用它拥有[的 http 客户端](https://stackoverflow.com/questions/4294939/http-request-with-node)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:59:14.283

试试这个：

```
function cbfunc(html) { alert(html.results[0]); }
$.getScript('http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22' + 
encodeURIComponent(url) + '%22&format=xml&diagnostics=true&callback=cbfunc'); 
```

## [演示](http://jsfiddle.net/cuVdE/)

[更多关于`YQL`](http://developer.yahoo.com/yql/console/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:06:00.253

**如果您还想捕获 hmtl 标签，您可以将它们连接到 html，如下所示：**

```
 function getPageHTML() {
       return "<html>" + $("html").html() + "</html>";
    } 
```

[如何使用 jQuery 获取整个页面的 HTML？](https://stackoverflow.com/questions/982717/how-do-i-get-the-entire-pages-html-with-jquery)

# vb.net - 拒绝访问注册表项“[KEY_NAME]”

> ID：13029812
> 
> 赞同：2
> 
> 时间：2012-10-23T11:52:15.467
> 
> 标签：vb.net, registry, unauthorizedaccessexcepti

我正在用 Visual Basic 2008 编写一个小程序，它可以翻转注册表项中特定 DWORD 的值

有问题的注册表项是：

```
'HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\MMDevices\Audio\Render\{91801674-82d9-459a-9358-6e5cf3d81d21}\FxProperties' 
```

我正在操作的 dword 是“ **{e0a941a0-88a2-4df5-8d6b-dd20bb06e8fb},4** ”

这是我为设置 DWORD 值而编写的代码行：

```
Dim keyString = "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\MMDevices\Audio\Render\{91801674-82d9-459a-9358-6e5cf3d81d21}\FxProperties"
My.Computer.Registry.SetValue(keyString, "{ad75efc0-8f48-4285-bfa8-40fb036cdab2},2", "00000000") 
```

但是我在运行时收到**UnauthorizedAccessException 异常**，指出“拒绝访问注册表项 [KEY_NAME]”。

我以管理员权限运行程序，将应用程序的清单更改为包括：

```
<requestedExecutionLevel level="highestAvailable" uiAccess="false" /> 
```

但这也没有用。所以我搜索了几个论坛并尝试了这个：

```
Dim rkLM As RegistryKey = Registry.LocalMachine
Dim pRegKey As RegistryKey = rkLM.OpenSubKey("\SOFTWARE\Microsoft\Windows\CurrentVersion\MMDevices\Audio\Render\{91801674-82d9-459a-9358-6e5cf3d81d21}\FxProperties", True)
pRegKey.SetValue("{ad75efc0-8f48-4285-bfa8-40fb036cdab2},2", "00000000") 
```

但这向我抛出了**NullReferenceException**，说明“对象引用未设置为对象的实例”。

有什么方法可以修改该密钥，而无需以**SYSTEM**权限运行我的程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:46:09.037

您可能应该`requireAdministrator`在清单中尝试使用，因为`highestAvailable`实际上可能不是管理员。

我也会尝试指定数据类型（在你的情况下我认为它是二进制的）：

```
My.Computer.Registry.SetValue(keyString, _
"{ad75efc0-8f48-4285-bfa8-40fb036cdab2},2", _ 
"00000000", _
RegistryValueKind.Binary) 
```

但是，您设置的值可能需要是字节数组（您可以尝试其他方法）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T19:57:42.700

谢谢马特，我也尝试过运行它，`requireAdministrator`但这也无济于事。无论如何，我找到了解决方案，似乎问题在于我试图修改的注册表项的权限。

`Full Control`访问权限仅授予**TrustedInstaller**组，因此我也授予`Full Control`了**Administrators**组中的用户。

[我使用Sysinternals 的 PsExec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)工具 [ ] 以**SYSTEM**权限启动了“regedit”，并导航到我希望使用我的程序操作的密钥，并使用 [ ] 授予我自己的写访问权限。`psexec -si regedit``Edit -> Permissions`

之后，我的代码工作了，这个：

```
Dim keyString = "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\" _
+ "MMDevices\Audio\Render\{91801674-82d9-459a-9358-6e5cf3d81d21}\FxProperties"

Dim regKey = "{ad75efc0-8f48-4285-bfa8-40fb036cdab2},2"

My.Computer.Registry.SetValue( _
keyString, regKey, "00000000", RegistryValueKind.DWord) 
```

可以成功翻转 DWORD 的值。虽然这有效，但我想知道是否有办法做到这一点，而无需手动更改注册表子项的权限。

[我在此处](https://stackoverflow.com/questions/6455691/registrysecurity-access-is-denied-c-sharp)给出的 C# 中发现了类似的问题和解决方案，但我无法成功地将那里提到的 C# 代码转换为 VB.NET 代码。你能帮忙吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-23T18:39:42.040

这是下面引用的 c# 链接的 vb.net 代码。您需要设置对 System.Security 的引用。

```
 Imports System.Security
    Imports System.Security.Principal
    Imports System.Security.AccessControl

    Imports Microsoft.Win32

    Private Sub TestMethod(ByVal subkey As String)
        ' Create access rule giving full control to the Administrator user.
        Dim rs As New RegistrySecurity()
        rs.AddAccessRule( New RegistryAccessRule( _
            "Administrator", _
            RegistryRights.FullControl, _
            InheritanceFlags.ContainerInherit Or InheritanceFlags.ObjectInherit, _
            PropagationFlags.InheritOnly, _
            AccessControlType.Allow))

        ' Get the registry key desired with ChangePermissions Rights.
        Dim rk As RegistryKey = Registry.LocalMachine.OpenSubKey( _
            subkey, _
            RegistryKeyPermissionCheck.ReadWriteSubTree, _
            RegistryRights.ChangePermissions Or RegistryRights.ReadKey)

        ' Apply the new access rule to this Registry Key.
        rk.SetAccessControl(rs)

        ' Get the registry key desired with ChangePermissions Rights.
        rk = Registry.LocalMachine.OpenSubKey( _
            subkey, _
            RegistryKeyPermissionCheck.ReadWriteSubTree, _
            RegistryRights.ChangePermissions Or RegistryRights.ReadKey)

        ' Apply the new access rule to this Registry Key.
        rk.SetAccessControl(rs)

        ' Open the key again with full control.
        rk = Registry.LocalMachine.OpenSubKey( _
            subkey, _
            RegistryKeyPermissionCheck.ReadWriteSubTree, _
            RegistryRights.FullControl)

        ' Set the security's owner to be Administrator.
        rs.SetOwner(New NTAccount("Administrator"))

        ' Set the key with the changed permission so Administrator is now owner.
        rk.SetAccessControl(rs)
    End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T21:41:41.063

我有同样的问题，设置`requireAdministrator`没有帮助。然后我意识到 VS2010 从来没有要求我以管理权限重新启动。我关闭并重新打开 VS2010，运行程序，然后它要求我以管理权限开始。我习惯于更改为`requireAdministrator`，它要求我在下次调试时重新启动。

因此，澄清一下，`requireAdministrator` **确实有**帮助，但可能需要手动重新启动 VS2010（或仅以管理员身份运行 VS2010）。

# c++ - 内容不滚动时如何设置 QScrollBar 的样式？

> ID：13029813
> 
> 赞同：2
> 
> 时间：2012-10-23T11:52:16.580
> 
> 标签：c++, qt, qtstylesheets

我想设置滚动条的样式。当滚动区域内容滚动时，我可以将样式应用于滚动条。但是当内容不滚动时，样式不会被应用到它。

我使用了以下样式元素：

```
QScrollBar:vertical{ /** some styles **/ };
QScrollBar::handle:vertical{ /** some styles **/ };
QScrollBar::add-line:vertical{ /** some styles **/ };
QScrollBar::sub-line:vertical{ /** some styles **/ };
QScrollBar::add-page:vertical{ /** some styles **/ };
QScrollBar::sub-page:vertical{ /** some styles **/ }; 
```

当内容滚动时，这些元素可以正常工作。

当内容不滚动时，我尝试使用以下元素：

```
QScrollBar:vertical:disabled{ /** some styles **/ }; 
```

但没有任何效果:(

谁有类似问题请回复。。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:35:33.460

```
QScrollBar::handle:disabled{ /** some styles **/  } 
```

# c# - 如何从 Windows 窗体中的组合框下拉菜单中更改焦点

> ID：13029819
> 
> 赞同：0
> 
> 时间：2012-10-23T11:52:30.033
> 
> 标签：c#, winforms

我创建了一个 Windows 表单，其中包含一个下拉组合框和某些字段。当从下拉列表中选择任何值时，字段的值会相应更改。我面临的问题是我无法单击 Windows 窗体中的其他任何位置。焦点停留在 ComboBox 下拉菜单上。我使用了其他按钮，例如“打印”，它提供了打印获胜表单中显示的信息的便利。但由于焦点卡在组合框上，我无法单击它。对于组合框，我使用了以下代码：

```
private void btnPrint_Click(object sender, EventArgs e)
    {
        try
        {
            ExistingAccountScreen existingAcctScreen = new ExistingAccountScreen();
            FillExistingAppForPrinting(existingAcctScreen);
            using (PrintViewer pv=new PrintViewer(existingAcctScreen))
            {
                pv.ShowDialog();
            }
        }
        catch (Exception ex)
        {
            AOTHelper.WriteLog(ex);
        }
    } 
```

下拉单击事件如下所示，这在选择默认选定值以外的值时会产生问题

```
private void cmbAccountNumber_SelectedIndexChanged(object sender, EventArgs e)
    {
        ExistingAccountInfo acctInfo = cmbAccountNumber.SelectedItem as ExistingAccountInfo;
        if (acctInfo == null)
            return;
        existingAccountInfoBindingSource.DataSource = ExistingAccountInfo.Get(acctInfo.AccountNumber);

        accountStatusBindingSource.DataSource = ExistingAccountInfo.GetExistingStatusCodes(acctInfo.AccountNumber);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:52:54.453

只需将下拉组合框的原因验证属性设置为 False。

# android - 安卓 | ListView 使用 Layoutinflater

> ID：13029822
> 
> 赞同：0
> 
> 时间：2012-10-23T11:52:35.187
> 
> 标签：android, xml, listadapter

我正在编写一个读取 XML 文件并将其显示为 ListView 的应用程序，因为每一行都有自己的图像和文本我正在使用 LayoutInflater，我可以显示文本但无法显示图像！这是我用于 ImageAdapter 的代码：

```
public class ImageAdaptertwo extends ArrayAdapter<String> {
    private final Context context;
    private final ArrayList<String> values;
    private final ArrayList<String> values2;

    public ImageAdaptertwo(Context context, ArrayList<String> values,ArrayList<String> values2) {
        super(context, R.layout.trimester1_listview, values);
        this.context = context;
        this.values = values;
        this.values2 = values2;

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        String s = values.get(position);
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.trimester1_main, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.label2);
        ImageView imageView = (ImageView) rowView.findViewById(R.id.icon2);
        textView.setText(values2.get(position));

        // Change icon based on name
        //String s = values.get(position);

        System.out.println(s);

        if (s.equals(" havingsuccessful-pregnancyS.png")) {
            imageView.setImageResource(R.drawable.n1);
        } else if (s.equals("urfoodguideduringpregnancyS.png")) {
            imageView.setImageResource(R.drawable.n2);
        } else if (s.equals("lovingurpregnantbodyS.png")) {
            imageView.setImageResource(R.drawable.n3);
        } else if (s.equals("gettinggoodbreastafterS.png")) {
            imageView.setImageResource(R.drawable.n4);
        } else if (s.equals("FoodGuidePyramidS.png")) {
            imageView.setImageResource(R.drawable.n5);
        } else if (s.equals("pregnancyS.png")) {
            imageView.setImageResource(R.drawable.n6);
        } else if (s.equals("nutritionfoS.png")) {
            imageView.setImageResource(R.drawable.n7);
        } else if (s.equals("Your-Growing-ChildS.png")) {
            imageView.setImageResource(R.drawable.n8);
        } else if (s.equals("Fatigue-in-first-trimesterS.png")) {
            imageView.setImageResource(R.drawable.n9);
        } else if (s.equals("T1S.png")) {
            imageView.setImageResource(R.drawable.n10);
        }

        return rowView;
    }
} 
```

values 和 values2 是来自 XML Parser 的 ArrayList！实际上，它们没问题，因为我打印了它们的内容并在 LogCat 中看到它们！在我的 Activit 中，我使用它来调整 ImageAdapter

```
setListAdapter(new ImageAdaptertwo(this, imagelink,texts)); 
```

结果是一个带有文本但没有图像的列表视图！谁能告诉我如何解决这个问题并在 ListView 上显示 XML 内容？

通过将 if 语句更改为 Switch Case 来解决问题。现在对于每一行我都有特定的数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:28:23.837

好吧，基本上你的 if - else 有问题。字符串比较没有像您预期的那样发生。确保在 JAVA 中检查任何涉及 equals,equalsignorecase 的代码两次。字符串比较是不必要的复杂。此外，您还可以使用 switch 代替 if-else，让您的生活更轻松一点。要从在线获取图像，您必须在后台线程上获取图像，然后在主线程上显示。看到这个寻求帮助：[http ://android-developers.blogspot.in/2009/05/painless-threading.html](http://android-developers.blogspot.in/2009/05/painless-threading.html)

类似问题：[无法显示网址图片（位图）](https://stackoverflow.com/questions/12971032/unable-to-display-url-image-bitmap/12971134#12971134)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:52:55.960

通过将 if 语句更改为 Switch Case 来解决问题。现在对于每一行我都有特定的图像

# php - 在 $when 中添加 30 分钟，以便 30 分钟后人们无法再在 PHP 中查看页面

> ID：13029823
> 
> 赞同：0
> 
> 时间：2012-10-23T11:52:36.030
> 
> 标签：php

所以 30 分钟后结果页面不再可见，我使用了 strtotime。我的代码会说清楚，我需要在 { ???? }

```
<?php
    $when = strtotime('2012-10-23 13:39:00');
    if ($when < time()){
        ?> <a href="result.php?">Bekijk de resultaten!</a>
        <?php echo "update every 2 min";
       }
     elseif ( ???? )
     { echo "overtime";}
     else
    {echo "De wedstrijd begint om 13:39 vandaag!";}

?> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:56:03.360

你有问号的地方：

`elseif (($when + 1800) > time())`

1800 是 30 乘以 60 秒（以秒为单位的 30 分钟）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:01:54.887

我假设链接的主要部分应该在 13:39 到 + 30 分钟可见，所以我也更正了该`if`部分。+ 30 分钟`strtotime`非常甜蜜。您只需在时间字符串之后键入`+30 minutes`。

```
<?php
  $time = '2012-10-23 13:39:00';
  $startTime = strtotime($time);
  $stopTime = strtotime($time + ' +30 minutes'); 
  if ($startTime > time() && $stopTime < time()) {
    echo "<a href=\"result.php?\">Bekijk de resultaten!</a>";
    echo "update every 2 min";
  }
  elseif ( $stopTime > time() ) {
    echo "overtime";
  } else {
    echo "De wedstrijd begint om 13:39 vandaag!";
  }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:10:00.053

如果您有日期的各个组成部分，您也可以使用 mktime 并将 30 添加到分钟值，php 会按照您想要的方式完全解析它。以下两行将返回完全相同的值：

```
echo date("n/j/Y H:i:s", mktime(13, 69, 00, 10, 23, 2012));
echo date("n/j/Y H:i:s", mktime(14, 9, 00, 10, 23, 2012)); 
```

如果您只有字符串值，那么前面提到的方法会很好用。

# postgresql - 土耳其字符上的 Postgres 上层函数不返回预期结果

> ID：13029824
> 
> 赞同：9
> 
> 时间：2012-10-23T11:52:37.417
> 
> 标签：postgresql, character-encoding, turkish

看起来 postgres`upper/lower`函数不处理土耳其字符集中的选择字符。

```
select upper('Aaı'), lower('Aaİ') from mytable; 
```

返回：

```
AAı, aaİ 
```

代替 ：

```
AAI, aai 
```

请注意，正常的英文字符可以正确转换，但土耳其语 I（小写或大写）不能正确转换

Postgres 版本：`9.2 32 bit`

数据库编码（其中任何一个结果相同）：`UTF-8, WIN1254, C`

客户端编码：

```
 UTF-8, WIN1254, C 
```

操作系统：`Windows 7 enterprise edition 64bit`

SQL 函数`lower`并`upper`在 UTF-8 编码的数据库上为 ı 和 İ 返回以下相同的字节

```
\xc4b1    
\xc4b0 
```

以及WIN1254（土耳其语）编码数据库上的以下内容

```
\xfd      
\xdd 
```

我希望我的调查是错误的，我错过了一些东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T10:03:49.350

**您的问题*是*100% Windows。** （或者更准确地说，是构建 PostgreSQL 的 Microsoft Visual Studio。）

作为记录，SQL`UPPER`最终使用*几乎*所有正确的参数（区域设置 1055 土耳其语用于 -编码的数据库）调用 Windows [`LCMapStringW`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318700.aspx)（通过[`towupper`](http://msdn.microsoft.com/en-us/library/45119yx3.aspx)via ），[`str_toupper`](http://code.ohloh.net/file?fid=xz8DJIKrn5U-bfV7tNYBJu0fx6Q&cid=eD%E2%80%8C%E2%80%8BOmLT58hyw&s=str_toupper&pp=0&fp=305491&ff=1&filterChecked=true&mp=0&ml=1&me=1&md=%E2%80%8C%E2%80%8B1&browser=Default#L1610)*`UTF-8``Turkish_Turkey`*

 ***但**

Visual Studio Runtime( `towupper`) 没有设置*dwMapFlags*中的[`LCMAP_LINGUISTIC_CASING`](http://www.siao2.com/2004/12/11/279942.aspx)位。（我可以确认设置它可以解决问题。） **这不是微软的错误；****它是设计使然，可能永远不会被“修复”**（哦，遗产的乐趣。）`LCMapStringW`

 ***你有三种方法可以解决这个问题：

*   实现@Sorrow 的包装器解决方案（或编写您自己的本机函数替换（DLL）。）
*   **在例如 Ubuntu 上运行您的 PostgreSQL 实例，**该实例对突厥语语言环境表现出正确的行为（@Sorrow 确认它适用于他）；这可能是最简单、最干净的出路。
*   在您的 PostgreSQL目录中放入**一个已修补的 32 位`MSVCR100.DLL`**`bin`（但是虽然`UPPER`并且`LOWER`会起作用，但其他诸如排序规则之类的事情可能会继续失败——同样是在 Windows 级别。YMMV。）

* * *

****仅****出于完整性**（和怀旧的乐趣），这里是修补 Windows 系统的过程（但请记住，除非您从摇篮到坟墓管理这个 PostgreSQL 实例，否则您可能会给您的继任者带来很多悲伤；无论何时从头开始部署一个新的测试或备份系统，你或你的继任者必须记住再次应用补丁——如果你有一天升级到 PostgreSQL 10，它说使用`MSVCR120.DLL`而不是`MSVCR100.DLL`，那么你将拥有也可以尝试修补新的 DLL。） **在测试系统上****

 ***   使用[HxD](http://mh-nexus.de/en/hxd/)打开`C:\WINDOWS\SYSTEM32\MSVCR100.DLL`
*   立即将 DLL 以相同的名称保存在您的 PostgreSQL`bin`目录下（不要尝试使用资源管理器或命令行复制文件，它们可能会复制 64 位版本）
*   文件仍然在 HxD 中打开，转到*Search > Replace*，选择*Datatype: Hexvalues*，然后
    *   搜索......`4E 14 33 DB 3B CB 0F 84 41 12 00 00 B8 00 01 00 00`
    *   用。。。来代替...`4E 14 33 DB 3B CB 0F 84 41 12 00 00 B8 00 01 00 01`
    *   ……然后再一次……
    *   搜索......`FC 51 6A 01 8D 4D 08 51 68 00 02 00 00 50 E8 E2`
    *   用。。。来代替...`FC 51 6A 01 8D 4D 08 51 68 00 02 00 01 50 E8 E2`
*   ...并在 PostgreSQL 目录下重新保存`bin`，然后重新启动 PostgreSQL 并重新运行您的查询。
    *   如果您的查询仍然不起作用（确保您的数据库是 UTF-8 编码`Turkish_Turkey`的`LC_CTYPE`和`LC_COLLATE`）`postgres.exe`在[32 位 Dependency Walker](http://www.dependencywalker.com)中打开并确保它表明它是`MSVCR100.DLL`从 PostgreSQL`bin`目录加载的。
    *   如果所有功能都很好，将修补的 DLL 复制到生产 PostgreSQL`bin`目录并重新启动。

但是请记住，当您将数据从 Ubuntu 系统或已修补的 Windows 系统移到未修补的 Windows 系统时，您将再次遇到问题，如果 Windows 实例在`citext`字段或基于`UPPER`/`LOWER`的函数索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-01T06:58:44.710

*在我*看来，您的问题与 Windows 有关。这是它在 Ubuntu (Postgres 8.4.14) 上的外观，数据库编码为 UTF-8：

```
test=# select upper('Aaı'), lower('Aaİ');
 upper | lower
-------+-------
 AAI   | aai
(1 row) 
```

我的建议是——如果你必须使用 Windows——编写一个存储过程来为你进行转换。使用内置`replace`：`replace('abcdefabcdef', 'cd', 'XX')`返回`abXXefabXXef`。可能有一个更优化的解决方案，我并不认为这种方法是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T07:44:26.067

这确实是 PostgreSQL 中的错误（即使在当前的 git 树中仍然没有修复）。证明：[https ://github.com/postgres/postgres/blob/master/src/port/pgstrcasecmp.c](https://github.com/postgres/postgres/blob/master/src/port/pgstrcasecmp.c)

PostgreSQL 开发人员甚至特别提到了那些土耳其语字符：

> SQL99 指定了 Unicode 感知大小写规范化，我们还没有基础设施。相反，我们使用 tolower() 来提供区域感知翻译。但是，**在某些语言环境中这也是不正确的（例如，土耳其语可能会用 'i' 和 'I' 做一些奇怪的事情）。** 我们当前的折衷方案是对设置了高位的字符使用 tolower()，对 7 位字符使用仅 ASCII 的小写。

`pg_upper()`在这个文件中实现非常简单（作为它的伴侣`pg_tolower()`）：

```
unsigned char
pg_toupper(unsigned char ch)
{
    if (ch >= 'a' && ch <= 'z')
            ch += 'A' - 'a';
    else if (IS_HIGHBIT_SET(ch) && islower(ch))
            ch = toupper(ch);
    return ch;
} 
```

如您所见，此代码不会将其参数视为 Unicode 代码点，并且不可能 100% 正确工作，除非当前选择的语言环境恰好是我们关心的语言环境（如土耳其语非 Unicode 语言环境）并且操作系统提供非 unicode`toupper()`工作正常。

这真的很难过，我只是希望这将在即将发布的 PostgreSQL 版本中得到解决......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-03T14:44:27.533

上面解释了问题的根源。似乎只有将“I”转换为“ı”和“i”转换为“İ”时才会出现问题。作为一种解决方法，只需在调用 lower 或 upper 函数之前直接替换这些字符，如下所示：

```
SELECT lower(replace('IİĞ', 'I', 'ı')) -> ıiğ
SELECT upper(replace('ıiğ', 'i', 'İ')) -> IİĞ 
```******

# objective-c - 如果球进了洞怎么做测试？

> ID：13029827
> 
> 赞同：-1
> 
> 时间：2012-10-23T11:52:47.057
> 
> 标签：objective-c, ios

我正在 xcode 中制作非常简单的应用程序。

我想，如果球进洞，比赛应该结束

所以我试着做。

```
if (ball . center == hole.center ) 
```

还有另一种方法，我失败了

我也试过这个

```
(ball.frame.origin.x == hole.frame.origin.x && ball.frame.origin.y == hole.frame.origin.y) 
```

和往常一样失败了

请帮忙。

我只想要球的框架是否碰到洞 比赛结束

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T11:56:50.850

问题是你不应该检查一个位置是否完全相同，这不是它与浮点坐标（我猜你正在使用的）和游戏中事物运动的精确度的工作方式，它们不需要在相同的物体上相同的位置。

您应该检查距离是否小于阈值：

```
float bx = ball.frame.origin.x;
float by = ball.frame.origin.y;

float hx = hole.frame.origin.x;
float hy = hole.frame.origin.y;

// you don't actually need abs since you are going to raise to the power of 2
// but for sake of soundness it makes sense
float dx = abs(bx-hx);
float dy = abs(by-hy);

if (sqrt(dx*dx + dy*dy) < THRESHOLD) {
  // the ball is enough near to center
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:58:28.430

您可以使用`CGRectIntersectsRect`（[更多关于 CGGeometry](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html)）来查看球和洞是否相交：

```
if (CGRectIntersectsRect(ball.frame, hole.frame)) {
    // Goal reached!
} 
```

...或`CGRectEqualToRect`以相同的方式（如果您想检查框架是否完全相同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:56:38.947

我的猜测是你不想测试两个中心是否相等，而是它们是否足够接近。例如，在 x 和 y 方向上小于 epsilon。

# google-maps-api-3 - 谷歌地图 v3 删除虚线边框

> ID：13029829
> 
> 赞同：1
> 
> 时间：2012-10-23T11:53:00.247
> 
> 标签：google-maps-api-3

我来自印度。我在我的应用程序中使用 Google 地图 API v3。有什么办法可以消除印度、巴基斯坦和中国之间的虚线边界吗？使用 v2 API 很容易，因为我只是连接到 Google 的印度服务器而不是 .com。

就像[http://maps.google.co.in](http://maps.google.co.in)没有显示那条虚线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:35:39.833

对版本 3 执行完全相同的操作：

`<script type="text/javascript" src="http://maps.google.co.in/maps/api/js?sensor=false"></script>`

从服务器加载 API`.co.in`将使用印度地图。

# asp.net - asp.net viewstate 安全性

> ID：13029842
> 
> 赞同：3
> 
> 时间：2012-10-23T11:53:49.380
> 
> 标签：asp.net, viewstate

EnableViewStateMac="True" 的 asp.net viewstate 是 100% 安全的吗？我的意思是，用户解码视图状态内容并查看值对我来说并不重要。重要的是防篡改。用户可以更改值（例如 ID）并回发页面吗？

非常感谢您的反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:43:10.160

Viewstate 是防篡改的，但不是防篡改的。这篇 MSDN 文章谈到了它（威胁 #2） [http://msdn.microsoft.com/en-us/magazine/ff797918.aspx](http://msdn.microsoft.com/en-us/magazine/ff797918.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:20:35.530

您页面上发送给客户端的任何内容都可能被篡改。这包括传递的视图状态。之后始终验证来自回发的输入。永远不要假设您发送给客户的某些标识符（例如）在发回之前没有更改。

如果要记住值，请使用服务器端内存，例如会话状态。

# sql - 从连接临时表中插入多条记录

> ID：13029849
> 
> 赞同：2
> 
> 时间：2012-10-23T11:54:16.400
> 
> 标签：sql, sql-server, stored-procedures

我需要将连接选择命令中的多个返回记录插入到临时表中。我使用了以下命令。select 语句返回两个值，但是当我使用以下命令插入时，（`#TempTableValue`）临时表什么都没有。所有其他字段声明都可以，并且加入 select 命令正在正确返回值。

```
INSERT into #TempTableValue DEFAULT values
SELECT #temp1.id,#temp1.DestFieldName,#temp2.FieldValues 
FROM #temp2
INNER JOIN #temp1
ON #temp2.FieldName=#temp1.SourceFieldName

select * from #TempTableValue 
```

但最后一个选择命令返回所有 Null 值。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:00:47.933

尝试删除`DEFAULT value`如下：

```
INSERT into #TempTableValue 
SELECT #temp1.id,#temp1.DestFieldName,#temp2.FieldValues 
FROM #temp2
INNER JOIN #temp1 ON #temp2.FieldName=#temp1.SourceFieldName 
```

来自[文档](http://msdn.microsoft.com/en-us/library/aa933206%28v=sql.80%29.aspx)：

> 默认值
> 
> 强制新行包含为每列定义的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:07:33.763

好吧，我想我知道这里出了什么问题。如果您使用 Insert Into #TempTableValue 您必须**首先创建临时表**。要**直接插入**您的选择，您可以使用它

```
Select #temp1.id,#temp1.DestFieldName,#temp2.FieldValues Into #TempTableValue
FROM #temp2
INNER JOIN #temp1
ON #temp2.FieldName=#temp1.SourceFieldName 
```

# javascript - Facebook javascript“喜欢”链接并不总是加载

> ID：13029850
> 
> 赞同：0
> 
> 时间：2012-10-23T11:54:26.080
> 
> 标签：javascript, facebook, facebook-like

我即将推出一个 iOS 应用程序，它可以创建个性化的 mp3 并通过 CDN 托管的网页提供它们。例如：[http ://bit.ly/Si771b](http://bit.ly/Si771b)

我正在使用来自[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)的 XFBML 代码，因为这是唯一可以将“喜欢”页面默认为当前页面的代码。

“喜欢”按钮大多不会在第一次尝试时加载。如果您不断刷新，您通常会得到它，但用户当然不会知道这一点。谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:09:08.007

尝试这个：

```
if (typeof(FB) != 'undefined' && FB != null ) {
      FB.XFBML.parse();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:05:29.817

似乎您的逻辑中某处存在竞争条件。当 Like 按钮未能出现时，我在控制台中收到以下错误：

> 在调用 FB.init() 之前调用 FB.getLoginStatus()。

所以页面仍然包含一个`<fb:like>`标签，而不是被扩展成包含 Like 按钮的 iframe。

正如错误所暗示的那样，您需要调用`FB.init()`before `FB.getLoginStatus()`。

（当您遇到 Javascript 问题时，您真的应该在 Javascript 控制台中查找错误...）

# ruby - 将每个命令包装在救援语句中

> ID：13029857
> 
> 赞同：2
> 
> 时间：2012-10-23T11:54:42.360
> 
> 标签：ruby, selenium, exception-handling

我有 10 个要执行的 Ruby 函数调用，每个调用都可能引发异常。我想以相同的方式处理每个异常并继续。有没有办法做到这一点而不将每一行包装在一个`begin`......块`rescue`中？`end`

[编辑]：用例是使用 Selenium Web 驱动程序填写表单的屏幕抓取工具/自动化工具。我不想费心检查选择元素中的选项是否存在，只要尽可能好地填写它们。为此，`Selenium::WebDriver::Support::Select.select_by`如果它抛出“无法找到值为 x 的选项”异常，我需要调用并继续。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T08:26:48.000

我发现[这个答案](https://stackoverflow.com/a/2660382/130121)也符合我的要求：

```
def action
    yield
    rescue
        ....
    ensure
        ....
end

action { call1 }
action { call2 }
action { call3 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T11:57:38.260

你的意思是这样的？

```
class Wtf
  def f1
    raise "f1"
  end
  def f2
    raise "f2"
  end
end

obj= Wtf.new

[:f1, :f2].each do |f|
  begin
    obj.send f
  rescue Exception=> e
    p e
  end
end 
```

编辑：在示例中添加了更多代码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T13:53:50.167

我喜欢 qwned 的 #send 方法，但对于并非所有方法都将按顺序调用的情况，它并不理想。

延续非常适合这种事情：

```
require 'continuation'

class Continuer

  # Define five methods for testing
  (1..5).each { |i| define_method("method#{i}") { puts "method#{i} called" } }

  def do_these_things
    cc = nil
    callcc { |c| cc = c; method1; }
    callcc { |c| cc = c; method2; raise }
    # Do other things right here, maybe...
    callcc { |c| cc = c; method3; raise }
    callcc { |c| cc = c; method4; }
    callcc { |c| cc = c; method5; }
  rescue
    puts 'Caught exception.  Continuing.'
    cc.call
  end

end

Continuer.new.do_these_things 
```

这通过在执行每个容易失败的方法时在“cc”变量中记录延续来工作。然后，救援语句只是在该继续处恢复。这有点像带有动态标签的 goto 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:13:14.233

你可以做：

```
begin
  do_something
  do_something_else
  do_do_do
rescue Exception1 => e
  # error handling
rescue Exception2 => e
  # error handling 
```

如果 do_something 抛出异常，则不会调用其他调用。而且我认为比做很多`begin.. rescue`块更好。只需处理不同的异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T13:43:00.150

```
def f1; raise "X"; end
def f2; raise "Y"; end
#...
funcList = [:f1,:f2,...]
funcList.each{|f|
     begin
       send(f)
     rescue Exception => e
        #handle
     end
 } 
```

# objective-c - 状态栏与 UIWindow 分开旋转

> ID：13029858
> 
> 赞同：1
> 
> 时间：2012-10-23T11:54:43.770
> 
> 标签：objective-c, ios, uiviewcontroller, uiwindow

我必须用两个创建应用程序`UIWindow`（请不要问为什么）。First支持所有方向`UIWindow`。`rootViewController`第二个 - 只有纵向和倒置。所以应用程序委托代码如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // part one
    self.windowOne = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.windowOne.rootViewController = [[ViewControllerOne alloc] init]; // supports all orientations
    self.windowOne.rootViewController.view = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image1.png"]] autorelease];

    [self.windowOne makeKeyAndVisible];
    //~part one
    // part two
    self.windowTwo = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.windowTwo.rootViewController = [[ViewControllerTwo alloc] init]; // supports only portrait and upside down
    self.windowTwo.rootViewController.view = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image2.png"]] autorelease];

    [self.windowTwo makeKeyAndVisible];
    //~part two
    return YES;
} 
```

如果只有两个部分中的一个处于活动状态（第二个被评论） - 一切都很好。但是如果 windowOne 之前已经成为 key 并且可见`windowTwo`，则 windowTwo 会按`ViewControllerTwo`允许旋转，但状态栏的行为非常奇怪：它像`windowOne`key 和可见一样旋转。

是否有任何选项可以使状态栏按上述方式旋转`ViewControllerTwo`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:17:19.297

尽管它对我来说是一个黑客，但您可以*尝试*以下方法：

在您的视图控制器`shouldAutorotateToInterfaceOrientation`（对于 iOS5）或`shouldAutorotate`（对于 iOS6）方法中添加以下代码行：

```
[[UIApplication sharedApplication] setStatusBarOrientation: interfaceOrientation animated: YES]; 
```

并测试应用程序在此之后的行为。

要在（iOS6 的新功能）`shouldAutorotate`方法中获取接口方向，请执行以下操作：

```
UIInterfaceOrientation interfaceOrientation = [[UIDevice currentDevice] orientation]; 
```

我没有为自己测试这一切，但它可以工作。

（查看一些关于如何在 iOS6 下支持自动旋转的帖子[）](https://stackoverflow.com/questions/12662240/how-to-make-app-fully-working-correctly-for-autorotation-in-ios-6/12662433#12662433)

# java - wicket：页面重新加载后不会出现更改

> ID：13029866
> 
> 赞同：0
> 
> 时间：2012-10-23T11:55:23.110
> 
> 标签：java, eclipse, wicket

我在 Eclipse 中创建了带有检票口的 java 项目。该应用程序工作正常。问题是，当我更改项目中的java代码并重新加载页面以查看这些更改时，这些更改并没有出现。

仅当我再次运行项目时才会出现更改（鼠标右键单击项目-> 运行方式-> java 应用程序）。有没有办法在重新加载页面后查看更改而无需每次都重新运行项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:03:06.933

改用 debug-as。这将指示 eclipse 使用热插拔并更新您正在运行的应用程序。请注意，您仍然需要经常重新启动您的应用程序，因为 hotswap 不支持所有类文件更改。为此，您可能需要使用类重新加载解决方案，例如 JRebel，或使用容器的重新部署功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:02:31.497

您是否使用 Wicket >= 1.5？您可能还对 Wicket 附加到有状态页面的每个 URL 的页面版本参数感到困惑，例如`?5`

如果您只是使用此参数重新加载页面，页面将再次呈现，但不会从头开始构建，这也可能导致您的更改被忽略。

这很烦人，但要正确重新加载页面，您需要删除参数并按 Enter。

# c# - 使用 C# 解析 XML

> ID：13029869
> 
> 赞同：1
> 
> 时间：2012-10-23T11:55:39.927
> 
> 标签：c#, xml, xml-parsing, amazon-mws

> **可能重复：**
> [亚马逊市场 XML 解析](https://stackoverflow.com/questions/9535320/amazon-marketplace-xml-parsing)

我是在 C# 中解析 XML 的新手，我有一些来自亚马逊 MWS 库的数据，如下所示。我需要解析出各种 ItemAttributes，例如 ItemDimensions。我习惯于 JSON 响应，所以我不确定如何将它应用于 XML。有人可以为我指明正确的方向吗？我用 C# 搜索了 XML Parsing，但没有找到有价值的结果来帮助我完成任务。

```
<GetMatchingProductResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
<GetMatchingProductResult ASIN="1430225491" status="Success">
  <Product>
    <Identifiers>
      <MarketplaceASIN>
        <MarketplaceId>ATVPDKIKX0DER</MarketplaceId>
        <ASIN>1430225491</ASIN>
      </MarketplaceASIN>
    </Identifiers>
    <AttributeSets>
      <ns2:ItemAttributes xml:lang="en-US">
        <ns2:Author>Troelsen, Andrew</ns2:Author>
        <ns2:Binding>Paperback</ns2:Binding>
        <ns2:Brand>Apress</ns2:Brand>
        <ns2:Edition>5</ns2:Edition>
        <ns2:ItemDimensions>
          <ns2:Height Units="inches">9.21</ns2:Height>
          <ns2:Length Units="inches">7.48</ns2:Length>
          <ns2:Width Units="inches">2.52</ns2:Width>
          <ns2:Weight Units="pounds">5.80</ns2:Weight>
        </ns2:ItemDimensions>
        <ns2:IsAutographed>false</ns2:IsAutographed>
        <ns2:IsEligibleForTradeIn>true</ns2:IsEligibleForTradeIn>
        <ns2:IsMemorabilia>false</ns2:IsMemorabilia>
        <ns2:Label>Apress</ns2:Label>
        <ns2:Languages>
          <ns2:Language>
            <ns2:Name>english</ns2:Name>
            <ns2:Type>Unknown</ns2:Type>
          </ns2:Language>
          <ns2:Language>
            <ns2:Name>english</ns2:Name>
            <ns2:Type>Original Language</ns2:Type>
          </ns2:Language>
          <ns2:Language>
            <ns2:Name>english</ns2:Name>
            <ns2:Type>Published</ns2:Type>
          </ns2:Language>
        </ns2:Languages>
        <ns2:ListPrice>
          <ns2:Amount>59.99</ns2:Amount>
          <ns2:CurrencyCode>USD</ns2:CurrencyCode>
        </ns2:ListPrice>
        <ns2:Manufacturer>Apress</ns2:Manufacturer>
        <ns2:NumberOfItems>1</ns2:NumberOfItems>
        <ns2:NumberOfPages>1752</ns2:NumberOfPages>
        <ns2:PackageDimensions>
          <ns2:Height Units="inches">2.60</ns2:Height>
          <ns2:Length Units="inches">9.20</ns2:Length>
          <ns2:Width Units="inches">7.50</ns2:Width>
          <ns2:Weight Units="pounds">5.80</ns2:Weight>
        </ns2:PackageDimensions>
        <ns2:PartNumber>9781430225492</ns2:PartNumber>
        <ns2:ProductGroup>Book</ns2:ProductGroup>
        <ns2:ProductTypeName>ABIS_BOOK</ns2:ProductTypeName>
        <ns2:PublicationDate>2010-05-14</ns2:PublicationDate>
        <ns2:Publisher>Apress</ns2:Publisher>
        <ns2:SmallImage>
          <ns2:URL>http://ecx.images-amazon.com/images/I/51h9Sju5NKL._SL75_.jpg</ns2:URL>
          <ns2:Height Units="pixels">75</ns2:Height>
          <ns2:Width Units="pixels">61</ns2:Width>
        </ns2:SmallImage>
        <ns2:Studio>Apress</ns2:Studio>
        <ns2:Title>Pro C# 2010 and the .NET 4 Platform</ns2:Title>
      </ns2:ItemAttributes>
    </AttributeSets>
    <Relationships/>
    <SalesRankings>
      <SalesRank>
        <ProductCategoryId>book_display_on_website</ProductCategoryId>
        <Rank>43011</Rank>
      </SalesRank>
      <SalesRank>
        <ProductCategoryId>697342</ProductCategoryId>
        <Rank>36</Rank>
      </SalesRank>
      <SalesRank>
        <ProductCategoryId>3967</ProductCategoryId>
        <Rank>53</Rank>
      </SalesRank>
      <SalesRank>
        <ProductCategoryId>4013</ProductCategoryId>
        <Rank>83</Rank>
      </SalesRank>
    </SalesRankings>
  </Product>
</GetMatchingProductResult>
<ResponseMetadata>
  <RequestId>440cdde0-fa76-4c48-bdd1-d51a3b467823</RequestId>
</ResponseMetadata>
</GetMatchingProductResponse> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:17:53.867

我发现“Linq To Xml”更易于使用

```
var xDoc = XDocument.Parse(xml); //or XDocument.Load(filename);
XNamespace ns = "http://mws.amazonservices.com/schema/Products/2011-10-01";
var items = xDoc.Descendants(ns + "ItemAttributes")
                .Select(x => new
                {
                    Author = x.Element(ns + "Author").Value,
                    Brand = x.Element(ns + "Brand").Value,
                    Dimesions = x.Element(ns+"ItemDimensions").Descendants()
                                 .Select(dim=>new{
                                     Type = dim.Name.LocalName,
                                     Unit = dim.Attribute("Units").Value,
                                     Value = dim.Value
                                 })
                                .ToList()

                })
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:04:35.403

您还没有明确明确您需要从 XML 中得到什么，所以我无法给您一个客观的答案。我将首先说明使用 .Net 解析 XML 有许多不同的方法（在您的情况下是 C#，尽管它们与 VB 和 C# 相似）。

我要研究的第一个实际上是将您的 XML 数据建模为 .Net 对象，更具体地说，是 POCO。您可以向该类模型添加将它们绑定或关联到 XML 的属性，然后您需要做的就是将数据和类传递给 XML 反序列化器。

现在，如果您不需要检索整个对象，您可以使用 XDocument 或 XmlDocument。XDocument 的有趣之处在于它对 LINQ 的语法友好，因此您可以非常简单地解析 XML。

XmlDocument 是更老式的顺序方法调用，但实现了同样的事情。

* * *

让我来说明一下。为了简单起见，考虑一个更简单的 XML：

```
<body> 
    <h1>This is a text.</h1>
    <p class="SomeClass">This is a paragraph</p>
</body> 
```

*（看看我在那里做了什么？那个 HTML 是一个有效的 XML！）*

**一、使用反序列化器：**

首先，您对类进行建模：

```
[XmlRoot]
public class body
{
    [XmlElement]
    public h1 h1 { get; set; }

    [XmlElement]
    public p p { get; set; }
}

public class h1 
{
    [XmlText]
    public string innerXML { get; set; }
}

public class p 
{
    [XmlAttribute]
    public string id { get; set; }

    [XmlText]
    public string innerXML { get; set; }
} 
```

一旦你有了你的类模型，你就可以调用序列化器。

```
void Main()
{
    string xml = 
@"<body> 
    <h1>This is a text.</h1>
    <p id=""SomeId"">This is a paragraph</p>
</body>";

    // Creates a stream that reads from the string
    MemoryStream stream = new MemoryStream();
    StreamWriter writer = new StreamWriter(stream);
    writer.Write(xml);
    writer.Flush();
    stream.Position = 0;

    // Check the classes below before proceding.

    XmlSerializer serializer = new XmlSerializer(typeof(body));
    var obj = (body)serializer.Deserialize(stream);

    // Check obj here with the debugger. All fields are filled.

} 
```

**二、使用 XDocument**

上面的示例编写了一个非常简洁的代码，因为您可以访问所有键入的内容。但是，它需要大量的设置工作，因为您*必须*对类进行建模。在您的情况下，也许一些更简单的就足够了。假设您要获取 p 元素的属性：

```
void Main()
{
    string xml = 
@"<body> 
    <h1>This is a text.</h1>
    <p id=""SomeId"">This is a paragraph</p>
</body>";

    // Creates a stream that reads from the string
    MemoryStream stream = new MemoryStream();
    StreamWriter writer = new StreamWriter(stream);
    writer.Write(xml);
    writer.Flush();
    stream.Position = 0;

    // Using XDocument

    var pAttrib = XDocument.Load(stream).Element("body").Element("p").Attribute("id").Value;
    Console.Writeline(pAttrib);
} 
```

很简单吧？你可以做更复杂的事情，把 LINQ 扔在那里......让我们尝试找到 id 名为“SomeId”的元素：

```
void Main()
{
    string xml = 
@"<body> 
    <h1>This is a text.</h1>
    <p id=""SomeId"">This is a paragraph</p>
</body>";

    // Creates a stream that reads from the string
    MemoryStream stream = new MemoryStream();
    StreamWriter writer = new StreamWriter(stream);
    writer.Write(xml);
    writer.Flush();
    stream.Position = 0;

    // Using XDocument
    var doc = XDocument.Load(stream);

    var found = from body in doc.Elements("body")
                from elem in body.Elements()
                from attrib in elem.Attributes()
                where attrib.Name == "id" && attrib.Value == "SomeId"
                select elem;

    foreach (var e in found) Console.WriteLine(e);
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T12:21:02.047

您可以重新发明轮子，也可以使用亚马逊的轮子（请参阅@George Duckett 的直接链接答案）： [Amazon Marketplace API](https://stackoverflow.com/questions/7737695/amazon-marketplace-api)

解决您的问题的一个选项：如果您想要一个能够让您使用 xml 文件的工具，我会查看 xsd.exe。 [用于 xsd.exe 的 MSDN](http://msdn.microsoft.com/en-us/library/x6c1kb0s%28v=vs.71%29.aspx)

该工具能够从 xml 生成类。

否则，您可以从 XDocument 类创建一个解析器，该类将允许您使用 linq 构建解析器，例如他的帖子中提到的 @LB。

# c# - 从 web.config 文件中读取值？

> ID：13029873
> 
> 赞同：0
> 
> 时间：2012-10-23T11:55:45.957
> 
> 标签：c#, asp.net, web-config

从我的 DAL 中，我如何从 web.config 中读取连接字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T11:57:08.827

您可以使用 WebConfigurationManager 从 web.config 读取连接字符串值

代码示例：

```
using System.Configuration;

string connString = WebConfigurationManager.ConnectionStrings["ConnectionString"].ToString(); 
```

确保已将 System.configuration 引用添加到 DAL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:56:36.013

```
using System.Configuration;

static string connectionString = 
    ConfigurationManager.ConnectionStrings["MyConn"].ConnectionString; 
```

Yuu 仅`WebConfigurationManager`在您的项目中有多个使用数据连接字符串的 Web.Config 文件时才需要：

[WebConfigurationManager 和 ConfigurationManager 有什么区别？](https://stackoverflow.com/questions/698157/whats-the-difference-between-the-webconfigurationmanager-and-the-configurationm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:59:28.817

```
System.Configuration.ConfigurationManager.ConnectionStrings["connStr"].ConnectionString 
```

# django - {{ STATIC_URL }} 在 Django 中使用 pyjade

> ID：13029876
> 
> 赞同：4
> 
> 时间：2012-10-23T11:55:56.400
> 
> 标签：django, pug, pyjade

我在使用 {{ STATIC_URL }} 的模板中添加 CSS 时遇到了一些麻烦。该标记在链接标记内不起作用，但在其他任何地方都有效。这个：

```
{{ STATIC_URL }} 
```

正确翻译成

```
/static/ 
```

， 但

```
link(href="{{ STATIC_URL }}css/bla.css" 
```

变得

```
<link href="{{ STATIC_URL }}css/bla.css"> 
```

我在 Django 中使用 pyjade。有人可以帮忙吗？

* * *

编辑我找到了答案：如果要使用静态属性，请使用“！=”而不是“=”。例子：

```
link(href!="{{ STATIC_URL }}css/bla.css" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T01:54:28.507

最后我从这里找到了答案：[https ://github.com/SyrusAkbary/pyjade/issues/44](https://github.com/SyrusAkbary/pyjade/issues/44)

使用链接 href=STATIC_URL + 'css/bla.css' 或链接 href='#{STATIC_URL}css/bla.css'

除了这种情况，我在模板中使用jade写for循环时遇到了一些问题。我用django模板代替了jade的for循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-12T11:41:55.263

您应该使用正确的静态标签

```
{% static "file_to_include" %} 
```

并在您的模板中加载静态库。

**顺便说一句：**由于 pyjade 没有更新，并且它的继任者最近从 pypi 中删除，我冒昧地恢复它：[https ://github.com/kakulukia/pypugjs](https://github.com/kakulukia/pypugjs)

5.0.1 版本修复了与最近 Django 版本的不兼容问题。

# html - 使用 getImageData 和 putImageData 进行 HTML5 画布缩放

> ID：13029879
> 
> 赞同：2
> 
> 时间：2012-10-23T11:56:08.713
> 
> 标签：html, html5-canvas, getimagedata, putimagedata

有没有办法使用 getImageData 和 putImageData 来缩放画布。下面是代码片段。

```

     var c=document.getElementById("myCanvas");
        var c2=document.getElementById("myCanvas2");
        var ctx=c.getContext("2d");
        var ctx2=c2.getContext("2d");
        ctx.fillStyle="红色";
        ctx.fillRect(10,10,50,50);

        函数复制（）{
         var imgData=ctx.getImageData(10,10,50,50);
         ctx2.translate(133.333,0);
         ctx2.scale(0.75,1);
         ctx2.putImageData(imgData,10,70);
        }

```

我已经试过了[http://jsbin.com/efixur/1/edit](http://jsbin.com/efixur/1/edit)。

谢谢阿杰恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T09:04:20.707

getImageData() 和 putImageData() 是为原始像素操作提供的，因此无法进行缩放（除非您在 Javascript 中编写自定义缩放器）。

你想要的是使用`drawImage()`然后使用另一个`<canvas>`作为源而不是`<img>`.

[https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images#Scaling](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Using_images#Scaling)

# sharepoint - 在 Sharepoint 中创建活动/工作流资源管理器

> ID：13029884
> 
> 赞同：1
> 
> 时间：2012-10-23T11:56:17.210
> 
> 标签：sharepoint, ms-access

是否可以在 Sharepoint 2010 中创建活动浏览器？

通过活动资源管理器，我指的是将电子邮件、电话、访问的文档（以及时间和访问/编辑它们的人员）记录到数据库中的特定条目的功能。

例如，我打算将我当前的 Access Claims Management 数据库导出到 Sharepoint 服务器。将每个索赔输入数据库：

*   我希望记录所有发送的相关电子邮件，并且用户记录所有相关呼叫。这需要通过我所强调的共享点前端发送电子邮件吗？

*   对于每个索赔，都会创建一个目录，用户可以在其中存储每个索赔的相关文档。是否可以记录/版本控制这些文件？

提前感谢您的任何帮助或建议。

诺埃尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:04:10.690

快速回答：

-我希望记录所有发送的相关电子邮件，并且用户记录所有相关呼叫。这需要通过我所强调的共享点前端发送电子邮件吗？是的，否则您将无法跟踪它们。

- 为每个索赔创建一个目录，用户可以在其中存储每个索赔的相关文档。是否可以记录/版本控制这些文件？是的，您可以使用在电子邮件到达时自动创建文件夹的文档库。或者您可以预先创建，然后发送到文档库的任何电子邮件都将显示为 SharePoint 项目。您可以在任何 SharePoint 列表/文档库上启用版本控制。

然后，您可以构建一个自定义活动资源管理器来显示所有这些操作。

# awk - 无法使用 awk 匹配字符串中的正则表达式

> ID：13029886
> 
> 赞同：0
> 
> 时间：2012-10-23T11:56:26.010
> 
> 标签：awk

我正在尝试获取行的第二部分包含该行第一部分的模式的行。

```
$ cat file.txt
String1 is a big string|big
$ awk -F'|' ' { if ($2 ~ /$1/) { print $0 } } ' file.txt 
```

但它不起作用。

我无法找出这里的错误。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:03:48.977

两件事：没有斜线，你的数字是倒数的。

```
awk -F\| '$1~$2' file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:24:32.830

我猜你的意思是第一部分的字符串的一部分应该是第二部分的一部分。如果这是你想要的！然后，

```
awk -F'|' '{n=split($1,a,' ');for(i=1,i<=n;i++){if($2~/a[i]/)print $0}}' your_file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T17:08:56.827

令人惊讶的是，您的命令行有很多问题：

```
1) You aren't using the awk condition/action syntax but instead needlessly embedding a condition within an action,
2) You aren't using the default awk action but instead needlessly hand-coding a print $0.
3) You have your RE operands reversed.
4) You are using RE comparison but it looks like you really want to match strings. 
```

您可以通过将命令修改为：

```
awk -F'|' '$1~$2' file.txt 
```

但我认为你真正想要的是“4”，这意味着你需要这样做：

```
awk -F'|' 'index($1,$2)' file.txt 
```

# symfony - symfony php-控制器在哪里-定义了模型参考

> ID：13029889
> 
> 赞同：-1
> 
> 时间：2012-10-23T11:56:33.157
> 
> 标签：symfony

控制器到模型的映射出现在哪个文件或哪里

1.  symfony 1.4
2.  交响乐 2

是否有任何 yml/config 文件告诉系统识别适当的模型？

我的意思是：假设控制器看起来像这样：

```
class jobActions extends sfActions
{
     public function executeIndex(sfWebRequest $request)
     {
       $user=new PcUser();
       $user->username=$request->GetParameters(...);
     }
} 
```

PcUser.php 是一个实体文件，里面有 PcUser 类。映射在哪里完成？控制器 jobActions 是如何知道 PcUser 的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:22:11.003

这是由 symfony 的自动加载器完成的。如果脚本不知道您尝试使用的类，则自动加载器尝试根据命名空间包含适当的类。

因此，对于您的示例：

```
class SomeController
{
     public function executeIndex(sfWebRequest $request)
     {
         $user=new \NamespaceForBundle\Entity\PcUser();
         $user->username=$request->GetParameters(...);
     }
} 
```

如果您询问 ORM 映射 - 您可以通过多种方式进行，例如适当的 yaml 配置文件或实体内的注释。

# c++ - C++ 时间返回两个小时

> ID：13029894
> 
> 赞同：2
> 
> 时间：2012-10-23T11:56:37.323
> 
> 标签：c++, ctime

有点 c++ 新手，所以我们开始吧；

我有一个解析日期/时间的方法，但是该日期/时间总是以 00:00:00 作为 hh:mm:ss 传递给我。因此，我想添加当前系统时间的值来代替这些值。我有这样做的方法，第一种方法是以 UTC 格式返回正确的时间。

```
bool CTRHTranslationRTNS::ParseDateSysTime(const char* pszString, time_t& tValue)
{
    ASSERT(pszString != NULL);

    // DateTime fields.
    enum { YEAR, MONTH, DAY, HOURS, MINS, SECS, NUM_FIELDS };

    CStringArray astrFields;

    // Split the string into the date and time fields.
    int nFields = CStringParser::Split(pszString, "- :T", astrFields);

    // Not DD/MM/YYYY HH:MM:SS format.
    if (nFields != NUM_FIELDS)
        return false;

    int anFields[NUM_FIELDS] = { 0 };

    // Parse field numbers.
    for (int i = 0; i < NUM_FIELDS; ++i)
        anFields[i] = atoi(astrFields[i]);

    tm oTime = { 0 };

        //Add System Time instead
        time_t sysyemTimeNow;
        struct tm * ptm;
        time ( &sysyemTimeNow );
        ptm = gmtime ( &sysyemTimeNow );

    // Copy fields to time struct.
    oTime.tm_mday  = anFields[DAY];
    oTime.tm_mon   = anFields[MONTH] - 1;
    oTime.tm_year  = anFields[YEAR] - 1900;
    oTime.tm_hour  = ptm->tm_hour;
    oTime.tm_min   = ptm->tm_min;
    oTime.tm_sec   = ptm->tm_sec;
    oTime.tm_isdst = -1;

    // Convert to time_t.
    tValue = mktime(&oTime);

    // Invalid field values.
    if (tValue < 0)
        return false;

    return true;
} 
```

在第二种方法中，我对日期/时间进行了一些格式化，这会导致从时间中删除 2 小时。

```
string CTRHTranslationRTNS::ConvertDateSysTimeToDateInUTC(const string& bossDate)
{
    time_t dealDate;
    if (ParseDateSysTime(bossDate.c_str(), dealDate))
    {
        struct tm * ptm = gmtime(&dealDate);
        char buffer [80];
        strftime(buffer,80,"%Y-%m-%d %H:%M:%S",ptm);
        return string(buffer);
    }
    else
    {
        throw exception(string("Invalid date/SysTime value: ").append(bossDate).c_str());   
    }   
} 
```

为了清楚起见，ParseDateSysTime 方法返回正确的 UTC 值为 11:53 的时间，但只要

```
struct tm * ptm = gmtime(&dealDate); 
```

被称为时间更改为 08:53。它表明这是调用 gmtime() 方法的产物，但我不确定。

非常感谢

格雷厄姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:09:03.197

reson 是`mktime()`第一个函数中使用的方法使用**本地时间**，但`gmtime()`使用**UTC 时间**。

有关进一步说明，请参阅[http://www.cplusplus.com/reference/clibrary/ctime/mktime/](http://www.cplusplus.com/reference/clibrary/ctime/mktime/)和[http://www.cplusplus.com/reference/clibrary/ctime/gmtime/](http://www.cplusplus.com/reference/clibrary/ctime/gmtime/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-18T10:07:33.537

试试这个功能：

```
CTime Time2UTC(CTime original)
{
    CString Formatted = original.FormatGmt(L"%Y%m%d%H%M%S");
    int Year, Month, Day, Hour, Minute;
    if (Formatted != L"" && Formatted.GetLength() >= 12)
    {
        Year = _wtol(Formatted.Left(4));
        Month = _wtol(Formatted.Mid(4, 2));
        Day = _wtol(Formatted.Mid(6,2));
        Hour = _wtol(Formatted.Mid(8, 2));
        Minute = _wtol(Formatted.Mid(10, 2));
        CTime result(Year, Month, Day, Hour, Minute, 0);
        return result;
    }
    else
        return (CTime)NULL;
} 
```

# c# - 如何获得比 VIX_E_FAIL 更具体的错误原因

> ID：13029900
> 
> 赞同：3
> 
> 时间：2012-10-23T11:56:56.153
> 
> 标签：c#, vmware, native-methods, vix

当我在我的 C# 应用程序中使用本机方法 VixDiskLib_Write 时，如果连接突然消失，我会收到 VIX_E_FAIL 错误。有没有办法得到更具体的问题原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T15:11:51.270

您可以尝试查看 VixDiskLib 日志文件。默认位置是 %TEMP%\vmware-\vix-.log 位置，如果您没有指定自己的日志函数。

您还可以在服务器端日志文件（如 var\log\vmware\host.log）中找到一些有用的东西。

# twitter-bootstrap - twitter bootstrap 将类添加到 body 引用它的模式

> ID：13029904
> 
> 赞同：2
> 
> 时间：2012-10-23T11:57:17.417
> 
> 标签：twitter-bootstrap

有没有办法让 twitter bootstrap 向 body 标签（甚至是 html 标签）添加一个类，这将表明它处于什么响应模式？

我想在移动模式下对某个元素进行调整。

但我不能引用它，因为引导程序在更改响应模式时不会在这个庄园中附加类。

如果可能的话，我想我正在寻找某种 js hack，除非有一个简单的设置可以为我做到这一点。

有 3 种模式，如下所示：

1.  桌面
2.  药片
3.  电话

我正在看这类课程：

```
<body class='desktop'> 
```

然后当它变为平板电脑时：

```
<body class='tablet'> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-05T14:34:17.173

这是我的方法。它尊重在引导程序中设置的媒体查询断点，因此即使您在LESS 中更改了例如@screen-sm-min，您也不需要在javascript 端进行任何设置。

```
/**
 * Adds the current bootstrap media-query class to the body element and keeps it updated.
 * Attaches empty spans with bootstrap responsive utitlity classes and checks their visibility.
 * Updates the classes on window resize.
 *  
 * examples:
 * var bsc = $('body').bsClasses(); // classes available and up-to-date from now on
 * $('body').bsClasses('deactivate'); // event listeners removed, span elements removed
 * bsc.activate(); event listeners back on, spans attached again
 * 
 * @see http://getbootstrap.com/css/#responsive-utilities 
 * @see http://getbootstrap.com/css/#grid-media-queries
 */

$.fn.bsClasses = function() {

    var pluginName = 'bsClasses',
        args = Array.prototype.slice.call(arguments),
        element = $(this),

        // these are the "modes" we check for.
        modes = [
           {className: 'phone', element: $('<span class="visible-xs"></span>')},
           {className: 'tablet', element: $('<span class="visible-sm"></span>')},
           {className: 'desktop', element: $('<span class="visible-md"></span>')},
           {className: 'large', element: $('<span class="visible-lg"></span>')}
        ],
        plugin = null,
        fn = null
    ;

    function Plugin() {

        this.update = function() {
            $.each(modes, function(i) {
                element[modes[i].element.is(':visible') ? 'addClass' : 'removeClass'](modes[i].className);
            });
        };

        this.activate = function() {
            $(window).bind('resize.' + pluginName, this.update);
            $.each(modes, function(i) {
                element.append(modes[i].element);
            });
            this.update();
        };

        this.deactivate = function() {
            $(window).unbind('resize.' + pluginName);
            $.each(modes, function(i) {
                element.removeClass(modes[i].className);
                modes[i].element.remove();
            });
        };

        this.activate();
    }

    // if there already is an instance for this element, try to call functions on the instance and bail out.
    if (element.data(pluginName)) {
        plugin = element.data(pluginName);
        fn = args.shift(); 
        if (plugin[fn] instanceof Function ) {
            plugin[fn].apply(plugin, args);
        }
        else {
            window.console.warn('no such method', fn);
        }
        return plugin;
    }

    // otherwise, create a new instance and return it
    plugin = new Plugin(element);
    element.data(pluginName, plugin);
    return plugin;

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:44:56.357

Twitter boostrap 是基于媒体查询的，所以我会做的，例如创建自己的 css 文件，在其中我使用相同的媒体查询和我想要调整的样式。请参阅此[链接](http://twitter.github.com/bootstrap/scaffolding.html#responsive)以获取想法并查看 bootstrap.css 源中的示例，它们是如何应用样式的。这样你就不需要添加 js 的东西了。是的，根据您的问题信息，我假设您只想调整样式而不是从数据库等加载的东西。

**编辑：**

如果你想做一些更复杂的事情，甚至使用 javascript，我会通过检查这里有很好讨论的用户代理来做到这一点：[user agent stuff to detect mobile](https://stackoverflow.com/questions/1005153/auto-detect-mobile-browser-via-user-agent)

如果您的意图是从 UX 的角度提供很多更改（不仅是样式，还喜欢调整 jQuery 动画或如何使用 javascript），我会使用[yepnope.js](http://yepnopejs.com/)检查用户代理，然后执行相应的操作。例如，当用户通过移动设备访问网站时，我最近使用它来关闭 jQuery 动画，就像一个魅力，无需观看延迟动画（主要是性能不佳的 android 平板电脑等问题）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T15:52:58.373

如果您需要做的就是在移动模式下调整元素的样式，我会接受 Mauno 的建议。如果您需要做更多的事情，您可以使用 Modernizr 的媒体查询测试来有条件地更改元素（或像您描述的那样向主体添加一个类）。测试将类似于：

```
Modernizr.mq('only screen and (max-width: 768px)') 
```

[Modernizr 文档](http://modernizr.com/docs/)有更多关于如何测试媒体查询的细节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-14T04:36:29.217

我在这里参加聚会有点晚了，但刚刚做到了...

```
$(document).ready(function(){
    assign_bootstrap_mode();
    $(window).resize(function() {
        assign_bootstrap_mode();
    });
});

function assign_bootstrap_mode() {
    width = $( window ).width();
    var mode = '';
    if (width<768) {
        mode = "mode-xs";
    }
    else if (width<992) {
        mode = "mode-sm";
    }
    else if (width<1200) {
        mode = "mode-md";
    }
    else if (width>1200) {
        mode = "mode-lg";
    }
    $("body").removeClass("mode-xs").removeClass("mode-sm").removeClass("mode-md").removeClass("mode-lg").addClass(mode);
} 
```

# css - 媒体查询 - 移动与桌面浏览器

> ID：13029905
> 
> 赞同：6
> 
> 时间：2012-10-23T11:57:19.357
> 
> 标签：css, responsive-design, media-queries

我见过很多在桌面浏览器和手机浏览器上都有响应的网站，我正在开发一个网站，并且我有以下样式表设置：（如果您需要，希克斯设计网站是我想要实现的一个很好的例子)

```
/* Normal styles go here */

@media screen and (min-device-width:321px)
{
    /* Styles */
}
@media screen and (min-width:701px)
{
    /* Styles */
}
@media screen and (min-width:1025px)
{
    /* Styles */
}
@media screen and (min-width:2049px)
{
    /* Styles */
} 
```

然而，我上面的样式表似乎只适用于桌面浏览器。（使用 Android Firefox 和 Sony Xperia Ray 上的默认 Android 浏览器进行测试）

希克斯设计网站的规则与我的非常相似，但是它们使用了最小值和最大值，但对我来说，似乎两者都不适用于移动和桌面浏览器。（我计划更多地优化我的媒体查询，我只是想让基础知识能够按照我现在想要的方式运行）。

如果我使用 max-device-width 而不是 max-width 它会在移动浏览器上响应，而不是桌面浏览器...

我尝试了以下方法来解决这个问题：

```
@media screen and (max-width:480px), screen and (max-device-width:480px)
{
    /* Styles */
} 
```

还：

```
@media screen and (max-width:480px), and (max-device-width:480px)
{
    /* Styles */
} 
```

但是，我认为这些都不正确，因为 Firefox 的 Web 开发人员工具栏抱怨它。我还尝试了上述规则的一些变体，但仍然无法使其正常工作。

据我了解， max-width 读取视口宽度（例如……浏览器窗口的宽度），而 max-device-width 读取您用于查看站点的屏幕的实际宽度。- 我很困惑为什么 max-width 似乎没有读取移动设备的浏览器宽度。

我想我可能在这里遗漏了一些关于媒体查询的明显内容......如果我希望我的网站在桌面和移动浏览器上响应，我必须复制所有媒体查询并进行更改，这似乎没有意义从“屏幕和（最大宽度）”到“屏幕和（最大设备宽度）”的查询，反之亦然。（我什至羞于在这里输入作为解决方法）

如何结合 (max-width) 和 (max-device-width) 规则或如何实现这一点？

如果您不想阅读以上所有内容：

我正在使用@media screen and (max-width:480px) 但是似乎只有@media screen and (max-device-width:480px) 可以在手机上使用。我如何结合这两个规则来实现移动和桌面浏览器上的响应式设计？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T12:26:46.197

那里有很多媒体，如果您只想通过其属性进行选择，请使用`all`关键字：

```
@media all and (max-width:480px)
{
    /* Styles */
} 
```

**编辑**：

将规则与 or 结合：

```
@media all and (prop1:val1), all and (prop2:val2)
{
    /* Styles */
} 
```

将规则与 and 结合：

```
@media all and (prop1:val1) and (prop2:val2)
{
    /* Styles */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T14:07:38.773

```
@media screen and (min-width:240px) and (max-width:480px), 
   screen and (min-device-width:240px) and (max-device-width:480px)
{
     /* Styles */
} 
```

解决了这个问题，以前的答案帮助我投了赞成票。谢谢。

# android - 为 android 2.2 编码的 facebook sdk 无法在 android 4.0.4 上运行，显示错误 android.os.Networkonmainthread

> ID：13029910
> 
> 赞同：4
> 
> 时间：2012-10-23T11:57:31.270
> 
> 标签：android, version, compatibility

嗨，我正在研究 facebook api。我已经浏览了 facebook 文档并按照其中的说明进行了编码。下面的代码在 android 2.1-3.2 中运行良好，但是在 android 4.0.4 中运行时，它给出了错误**android.os.networkonmainthread**。我不知道如何使用 AsynckTask 或线程（无痛线程）编写下面的代码。请在这里的任何人建议我如何编码，以便它可以在所有 android 版本上执行。这是我的代码。

```
public class Facebook4 extends Activity {

    public static final String mAPP_ID = "222299217893177";

    public  Facebook mFacebook = new Facebook(mAPP_ID);
    private static final String FACEBOOK_PERMISSION = "publish_stream";
    private SharedPreferences mPrefs;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_facebook4);
        ((ImageView)findViewById(R.id.facebookLogin)).setOnClickListener( loginButtonListener );
        SessionStore.restore(mFacebook, this);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        mFacebook.authorizeCallback(requestCode, resultCode, data);
    }

    private OnClickListener loginButtonListener = new OnClickListener() {
        public void onClick( View v ) {
            if( !mFacebook.isSessionValid() ) {
                Toast.makeText(Facebook4.this, "Authorizing", Toast.LENGTH_SHORT).show();
                mFacebook.authorize(Facebook4.this, new String[] {FACEBOOK_PERMISSION},Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
                //startActivity(new Intent(FacebookLogin.this,MainActivity.class));
            }
            else {
                Toast.makeText( Facebook4.this, "Has valid session", Toast.LENGTH_SHORT).show();
                try {
                    JSONObject json = Util.parseJson(mFacebook.request("me"));
                    String facebookID = json.getString("id");
                    String firstName = json.getString("first_name");
                    String lastName = json.getString("last_name");                  
                    Toast.makeText(Facebook4.this, "You already have a valid session, " + firstName + " " + lastName + ". No need to re-authorize.", Toast.LENGTH_SHORT).show();
            }
            catch( Exception error ) {
                Toast.makeText( Facebook4.this, error.toString(), Toast.LENGTH_SHORT).show();
                }
            }
        //startActivity(new Intent(FacebookLogin.this,MainActivity.class));
        }
    };

    public final class LoginDialogListener implements DialogListener {
        public void onComplete(Bundle values) {
        try {
        //The user has logged in, so now you can query and use their Facebook info
        JSONObject json = Util.parseJson(mFacebook.request("me"));
        Log.i("id",  json.getString("id"));
        Log.i("FirstName", json.getString("first_name"));
        Log.i("lastname", json.getString("last_name"));
        Log.i("email", json.getString("email"));
        Log.i("Name", json.getString("name"));
        Log.i("gender",json.getString("gender"));

        SessionStore.save(mFacebook, Facebook4.this);

        }
        catch( Exception error ) {
        Toast.makeText( Facebook4.this, error.toString(), Toast.LENGTH_SHORT).show();
        Log.i("error", error.toString());
        }
        }

        public void onFacebookError(FacebookError error) {
            Toast.makeText( Facebook4.this, "Something went wrong. Please try again.", Toast.LENGTH_LONG).show();
            }
            public void onError(DialogError error) {
            Toast.makeText( Facebook4.this, "Something went wrong. Please try again.", Toast.LENGTH_LONG).show();
            }
            public void onCancel() {
            Toast.makeText( Facebook4.this, "Something went wrong. Please try again.", Toast.LENGTH_LONG).show();
            }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:59:46.330

我有同样的问题我做的是当我检查我的清单时是这样的

```
 <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" /> 
```

我删除了 targetSdkVersion

```
 <uses-sdk
    android:minSdkVersion="8"
    /> 
```

它有效，我认为它会帮助你尝试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:02:46.090

您收到此错误是因为您正在执行网络操作，例如在您的主 UI 线程上访问 Facebook。

要以最佳方式修复它，请将所有与网络相关的代码移动到单独的[Thread](http://developer.android.com/reference/java/lang/Thread.html)或[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:02:50.207

现在在更高的 api 中，您不能在主线程中执行与网络相关的任务。在其他线程中运行您的代码，异常不会出现。

# javascript - 使用 javascript 将单选按钮转换为复选框

> ID：13029911
> 
> 赞同：0
> 
> 时间：2012-10-23T11:57:34.873
> 
> 标签：javascript, checkbox, radio-button

我在页面上有一组单选按钮和一个复选框，如下所示

```
<html>
<head>
    <title>Languages</title>
    <script type="text/javascript">

    </script>
</head>
<body>
    <span>What languages do you know?</span>
    <form action="">
    <div id="controlArea">
        <input type="radio" name="lanRadio" value="radioRussian"><label for="radioRussian">Russian</label><br />
        <input type="radio" name="lanRadio" value="radioEnglish"><label for="radioRussian">English</label><br />
        <input type="radio" name="lanRadio" value="radioSpain"><label for="radioRussian">Spain</label><br />
        <input type="radio" name="lanRadio" value="radioFrench"><label for="radioRussian">French</label><br />
        <input type="checkbox" name="checkIn" value="CheckMore"><label for="CheckMore">More than 1</label><br />
    </div>
    </form>
</body> 
```

我想要做的是，如果用户选中“超过 1 个”复选框，则所有单选按钮都必须变成复选框，并且用户必须能够选中更多选项。如果用户取消选中复选框，则所有复选框必须变回一组单选按钮。将单选按钮更改为复选框时，选定的单选按钮必须成为选中的复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:07:40.007

你可以做这样的事情：

```
function morethan(cbox) {
    // setup new state
    var state = "radio";
    if (cbox.checked) {
        state = "checkbox";
    }
    // get all by name and change state
    var radios = document.getElementsByName('lanRadio');
    for (i = 0; i < radios.length; i++) {
        radios[i].type = state;
    }
}​ 
```

您需要在`onclick`您的复选框中添加一个处理程序：

```
<input type="checkbox" name="checkIn" onclick="morethan(this)" value="CheckMore"> 
```

[这里的例子](http://jsfiddle.net/xEZyH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:05:44.643

试试这个 。只需复制并粘贴我的代码

```
 <html>
    <head>
        <title>Languages</title>
        <script type="text/javascript">
    if(document.getElementById("radio1").type=="radio")
        {
        document.getElementById("radio1").type="checkbox";
        document.getElementById("radio2").type="checkbox";
        document.getElementById("radio3").type="checkbox";
        document.getElementById("radio4").type="checkbox";
        }
        else
        {
        document.getElementById("radio1").type="radio";
        document.getElementById("radio2").type="radio";
        document.getElementById("radio3").type="radio";
        document.getElementById("radio4").type="radio";
        }
        </script>
    </head>
    <body>
        <span>What languages do you know?</span>
        <form action="">
        <div id="controlArea">
            <input type="radio" id="radio1" name="lanRadio" value="radioRussian"><label for="radioRussian">Russian</label><br />
            <input type="radio" id="radio2" name="lanRadio" value="radioEnglish"><label for="radioRussian">English</label><br />
            <input type="radio" id="radio3" name="lanRadio" value="radioSpain"><label for="radioRussian">Spain</label><br />
            <input type="radio" id="radio4" name="lanRadio" value="radioFrench"><label for="radioRussian">French</label><br />
            <input type="checkbox" name="checkIn" value="CheckMore" onchange="fnc()"><label for="CheckMore">More than 1</label><br />
        </div>
        </form>
    </body> 
```

# java - 如何以编程方式测试断言是否启用？

> ID：13029915
> 
> 赞同：20
> 
> 时间：2012-10-23T11:57:42.847
> 
> 标签：java, scjp, assertion, ocpjp

OCP Java SE 6 程序员实践考试的正确答案之一是：

> 您可以以编程方式测试是否已启用断言，而无需抛出`AssertionError`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-23T12:03:21.113

我用这个

```
boolean assertOn = false;
// *assigns* true if assertions are on.
assert assertOn = true; 
```

我不确定这是“官方”方式。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-10-23T12:02:12.667

我想你应该使用`Class.desiredAssertionStatus()`

[http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#desiredAssertionStatus()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#desiredAssertionStatus%28%29)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-10-23T12:25:00.377

Oracle Java 教程提供了有关如何执行此操作的信息...

[http://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html](http://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html)

教程的摘录

> 7\. 为什么不提供一个构造来查询包含类的断言状态？
> 
> 这样的结构会鼓励人们内联复杂的断言代码，我们认为这是一件坏事。此外，如果您觉得必须，可以直接在当前 API 上查询断言状态：
> 
> ```
> boolean assertsEnabled = false;
> assert assertsEnabled = true; // Intentional side-effect!!!
> // Now assertsEnabled is set to the correct value 
> ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-02T08:52:14.410

```
RuntimeMXBean mx = ManagementFactory.getRuntimeMXBean();
boolean assertionsEnabled = mx.getInputArguments().contains("-ea"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-01T16:47:27.337

我正在使用来自 jdk.nashorn.internal 的 AssertsEnabled。

```
System.out.println(AssertsEnabled.assertsEnabled());
// "assertsEnabled()" returns boolean value 
```

也许它可以帮助某人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-20T03:45:42.667

```
package io.github.baijifeilong.tmp;

import io.vavr.control.Try;

/**
 * Created by BaiJiFeiLong@gmail.com at 2019-04-18 09:12
 */
public class TmpApp {

    public static void main(String[] args) {
        Try.run(() -> {
            assert false;
        }).onSuccess($ -> {
            throw new RuntimeException("Assertion is not enabled");
        });
    }
} 
```

也许可以帮助某人。

# javascript - 如何打开两个页面

> ID：13029916
> 
> 赞同：0
> 
> 时间：2012-10-23T11:57:55.810
> 
> 标签：javascript, jquery, html, jquery-mobile

我将以下拆分视图用于我的移动应用程序。

[asyraf 拆分视图](http://asyraf9.github.com/jquerymobile-splitview/)

例如，我在平板电脑视图中的第一个左侧内容是一个按钮。当我单击该按钮时，它会加载一个带有第二个按钮和一个返回按钮到第一页的新页面。当我单击第二个按钮时，它会加载正确的内容。当我单击后退按钮时，它会加载第一页左侧的内容，但右侧的内容是相同的。如何在单击后退按钮时同时加载新的左侧内容和新的右侧内容？

**注意：**正确的内容调用需要一个`href="rightPage"`和`data-panel="main"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:24:08.703

将以下内容附加到按钮的 click() 事件：

```
location.hash = "pagehash"; 
```

# android - 从editText中删除光标

> ID：13029917
> 
> 赞同：18
> 
> 时间：2012-10-23T11:57:57.680
> 
> 标签：android

> **可能重复：**
> [禁用 EditText 闪烁光标](https://stackoverflow.com/questions/5582702/disable-edittext-blinking-cursor)

我的活动中有 2 个 editText 字段，其中包含一些文本：

```
EditText nameText=(EditText) findViewById(R.id.update_name_text);
nameText.setText(Info.getName());

EditText phone=(EditText) findViewById(R.id.phone_number);
phone.setText(Info.getPhoneNo()); 
```

当我在我的设备上运行该应用程序并点击该`nameText`字段时，会出现一个光标和一个键盘。但是，当我隐藏键盘时，键盘消失但光标仍然存在。我怎样才能使光标不可见。

当我按 enter from`nameText`时，光标转到该`phone`字段并且键盘仍然可见。这很好。但是当我隐藏键盘或从`phone`字段中按回车键时，键盘消失但光标保持不变。

在上述情况下，是否有任何方法（除了使用`setOnEditorActionListener`）使光标不可见？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-23T12:01:36.303

从你需要设置的edittext中删除光标

```
nameText.setFocusable(false); 
```

和可见光标集

```
nameText.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {

                nameText.setFocusableInTouchMode(true);

                return false;
            }
}); 
```

将在edittext中显示光标...

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-23T12:01:22.207

`android:cursorVisible`在 XML 或`setCursorVisible()`代码中隐藏/显示光标，您可以使用[此处](https://stackoverflow.com/questions/3793093/android-edittext-soft-keyboard-show-hide-event)说明的方法来确定键盘何时出现和消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:07:41.720

在 XML 文件中可以看到`<requestFocus>`EditText 的属性已自动添加。

因此，每当活动开始时，您的 EditText 都会获得焦点。

所以先删除它并尝试...

**更新答案：**

如果您不想编辑该`nameText`字段

您可以使用

```
nameText.setEnabled(false); 
```

如果你想在某些情况下*编辑它，*

你可以做，

```
nameText.setEnabled(true); 
```

您仍然可以`nameText`通过编程方式更新该字段，

例如，使用`nameText.setText(Info.getname());`

如果您希望用户修改可见文本，那么您可以

```
nameText.setEnabled(true); 
```

它会像你期望的那样工作。

# java - javafx动画循环

> ID：13029920
> 
> 赞同：1
> 
> 时间：2012-10-23T11:58:22.163
> 
> 标签：java, javafx-2, javafx

在 c++ 或 c 编程语言中，我们知道改变坐标我们使用 gotoxy(x,y) 并且我们可以使用循环和睡眠来改变坐标并制作动画。像这样;

```
for(x = 20; x < 25; x++){
  gotoxy(x,20); cout << "*"
} 
```

但我的问题是在 JAVAFX 2.0 编程中怎么样？我正在使用netbeans 7.2。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T00:43:45.510

使用[JavaFX 动画包](http://docs.oracle.com/javafx/2/api/javafx/animation/package-summary.html)。

正如 Andy 在评论中指出的那样，[JavaFX 动画教程](http://docs.oracle.com/javafx/2/animations/basics.htm)中有很多示例。

还有一个[跑马动画循环](http://blog.netopyr.com/2012/03/09/creating-a-sprite-animation-with-javafx/)的可爱例子。

关键是您不会休眠 JavaFX 应用程序线程，并且每次更新某些内容并希望它呈现时，您必须将 JavaFX 线程的控制权释放回 JavaFX 系统。JavaFX 动画类会为您处理这些事情，因此您不必担心。如果您只是像在问题的示例代码中那样循环，JavaFX 只会在您的循环完成后渲染场景一次，您将永远看不到任何事情发生。

这是一个相当无聊的示例，它使用[时间轴](http://docs.oracle.com/javafx/2/api/javafx/animation/Timeline.html)来模拟您问题中的 c++ 代码，以每 400 毫秒移动一个像素点。

```
import java.util.Date;
import javafx.animation.*;
import javafx.application.Application;
import javafx.event.*;
import javafx.scene.*;
import javafx.scene.shape.Circle;
import javafx.stage.Stage;
import javafx.util.Duration;

/** Simple JavaFX Animation Sample. */
public class AnimationSample extends Application {
  private       int         x        = 20;
  private       String      status   = "";
  private final Circle      dot      = new Circle(20, 20, 3);
  private final TimeCounter counter  = new TimeCounter();

  public static void main(String[] args) throws Exception { launch(args); }
  @Override public void start(final Stage stage) throws Exception {
    final Timeline timeline = new Timeline(
      new KeyFrame(Duration.ZERO, new EventHandler() {
        @Override public void handle(Event event) {
          refreshScene();
        }
      }),  
      new KeyFrame(Duration.millis(400))
    );
    timeline.setCycleCount(Timeline.INDEFINITE);

    stage.setScene(new Scene(new Group(dot), 50, 50));
    stage.show();

    counter.reset();
    timeline.play();
  }

  private void refreshScene() {
    gotoxy(x, 20);

    status = "*****".equals(status) ? "*" : status + "*";
    System.out.println(String.format("%7d", counter.elapsed()) + " ms " + x + " " + status);

    if (x == 24) {
      x = 20;
    } else {
      x++;
    }
  }      

  private void gotoxy(int x, int y) {
    dot.setCenterX(x); 
    dot.setCenterY(y);
  }

  class TimeCounter {
    private long start = new Date().getTime();
    void reset()   { start = new Date().getTime(); }
    long elapsed() { return new Date().getTime() - start; }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-30T18:15:21.150

JavaFX 中有三种不同的选项，具体取决于您的需要。

**最基本的是[AnimationTimer](http://docs.oracle.com/javafx/2/api/javafx/animation/AnimationTimer.html)**。它相当于 Swing 的 Timer。它只包含一个在每一帧上调用的句柄方法，并将当前时间作为参数传递。您可能需要一些内部簿记，这样您就不会在每次调用句柄时都进行昂贵的计算。

**[Transition](http://docs.oracle.com/javafx/2/api/javafx/animation/Transition.html)有一个 interpolate(frac) 方法，该方法使用 frac 的值在 0.0 和 1.0 之间调用**。您可以根据 frac 值进行所有您想要的 UI 更改。过渡和时间线都扩展了动画，因此您可以设置循环持续时间、过渡是否在结束时反转等。

[时间线](http://docs.oracle.com/javafx/2/api/javafx/animation/Timeline.html)是最复杂的。您定义任意数量的包含不同节点所需属性的关键帧（想想状态），时间轴将为您完成所有工作，插入如何为提供的值之间的变化设置动画。例如，您可以给出一个节点的 x 属性为 0 的关键帧，另一个为 100 的关键帧，时间轴将为您制作动画。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:07:50.867

看看使用[Timeline Animation](http://docs.oracle.com/javafx/2/animations/basics.htm#CJAFADFJ)。它是 JavaFX 中动画的关键组件，
用于确定动画的关键部分何时以及以何种顺序发生。

这是一个[例子](http://www.java2s.com/Code/Java/JavaFX/KeyFrameandTimelinebasedanimation.htm)

# php - 变量前面的感叹号 - 需要说明

> ID：13029921
> 
> 赞同：17
> 
> 时间：2012-10-23T11:58:23.870
> 
> 标签：php, variables, if-statement, boolean-expression, negation

我已经使用 PHP 有一段时间了，但这对我来说一直是个谜，变量前面的感叹号（负号）的正确使用。

说明什么`!$var`？是 var `false`，为空，未设置等吗？

这里有一些我需要学习的例子......

**示例 1：**

```
$string = 'hello';
$hello = (!empty($string)) ? $string : '';

if (!$hello)
{
    die('Variable hello is empty');
} 
```

这个例子有效吗？如果`$string`为空，if 语句真的有效吗？

**示例 2：**

```
$int = 5;
$count = (!empty($int)) ? $int : 0;

// Note the positive check here
if ($count)
{
   die('Variable count was not empty');
} 
```

这个例子有效吗？

我从不使用上述任何示例，我将这些示例限制`if ($var)`为仅具有布尔值的变量。我只需要知道这些示例是否有效，这样我就可以扩大`if ($var)`语句的使用范围。它们看起来很干净。

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-23T12:09:32.953

`if(! $a)`是一样的`if($a == false)`。此外，应该考虑到使用`==`运算符时会发生类型转换。[有关更多详细信息，请查看此处](http://www.php.net/manual/en/types.comparisons.php)
的“与 == 进行松散比较”部分。从那里可以看出，对于字符串“0”和“”等于 FALSE（是 TRUE 并且也是 TRUE）。`"0"==false``""==false`

关于发布的示例：
**示例 1**
它会起作用，但您应该注意，“0”和“”都是“空”字符串。

**示例 2**
它将起作用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:02:12.470

`!`否定者。true 变为 false，任何评估为 false 的内容都变为 true。

如果您正在编写 PHP 并且您不熟悉所有的运算符.. 在您熟悉它们之前，您不应该编写任何一行代码：

[http://php.net/manual/en/language.operators.php](http://php.net/manual/en/language.operators.php)

这些是绝对的基础。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:00:04.963

这是一个布尔测试器。空或假。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:01:41.177

它是`not`布尔运算符，有关详细信息，请参阅[PHP 手册](http://php.net/manual/en/language.operators.logical.php)。

# java - 在文本文件中查找特定单词并计算它

> ID：13029922
> 
> 赞同：7
> 
> 时间：2012-10-23T11:58:24.327
> 
> 标签：java, string, file, search, count

有人可以帮我写代码吗？如何在文本文件中搜索任何单词并计算重复了多少？

例如 test.txt：

```
hi
hola
hey
hi
bye
hoola
hi 
```

如果我想知道在 test.txt 中重复了多少次单词“Hi”程序必须说“重复 3 次”

我希望你明白我想要什么，谢谢你的回答。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T12:03:13.890

```
public int countWord(String word, File file) {
int count = 0;
Scanner scanner = new Scanner(file);
while (scanner.hasNextLine()) {
    String nextToken = scanner.next();
    if (nextToken.equalsIgnoreCase(word))
    count++;
}
return count;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T12:04:57.737

```
HashMap h=new HashMap();                        
FileInputStream fin=new FileInputStream("d:\\file.txt");
BufferedReader br=new BufferedReader(new InputStreamReader(fin));
String n;
while((n=br.readLine())!=null)
{
    if(h.containsKey(n))
    {
    int i=(Integer)h.get(n);
    h.put(n,(i+1));
    }
    else
    h.put(n, 1);
} 
```

现在遍历此映射以使用每个单词作为映射值的键来获取每个单词的计数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T12:06:50.433

Apache Commons - StringUtils.countMatches()

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T12:03:57.573

使用来自[google guava library](http://code.google.com/p/guava-libraries/)`MultiSet`的集合。

```
Multiset<String> wordsMultiset = HashMultiset.create();
Scanner scanner = new Scanner(fileName);
while (scanner.hasNextLine()) {
    wordsMultiset.add(scanner.nextLine());
}
for(Multiset.Entry<String> entry : wordsMultiset ){
     System.out.println("Word : "+entry.getElement()+" count -> "+entry.getCount());
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T12:29:35.307

```
package File1;

import java.io.BufferedReader;
import java.io.FileReader;

public class CountLineWordsDuplicateWords {

public static void main(String[] args) {
    FileReader fr = null;
    BufferedReader br =null;

    String [] stringArray;
    int counLine = 0;
    int arrayLength ;
    String s="";
    String stringLine="";
    try{
        fr = new FileReader("F:/Line.txt");
        br = new BufferedReader(fr);
        while((s = br.readLine()) != null){
            stringLine = stringLine + s;
            stringLine = stringLine + " ";/*Add space*/
            counLine ++;
        }
        System.out.println(stringLine);

        stringArray = stringLine.split(" ");
        arrayLength = stringArray.length;
                     System.out.println("The number of Words is "+arrayLength);
        /*Duplicate String count code */
        for (int i = 0; i < arrayLength; i++) {
            int c = 1 ;
            for (int j = i+1; j < arrayLength; j++) {
                if(stringArray[i].equalsIgnoreCase(stringArray[j])){
                    c++;
                    for (int j2 = j; j2 < arrayLength; j2++) {
                        stringArray[j2] = stringArray[j2+1];
                        arrayLength = arrayLength - 1;
                    }

                }//End of If block
            }//End of Inner for block
        System.out.println("The "+stringArray[i]+" present "+c+" times .");
        }//End of Outer for block
        System.out.println("The number of Line is "+counLine);
        System.out.println();
        fr.close();
        br.close();
    }catch (Exception e) {
        e.printStackTrace();
    }
}//End of main() method 
}//End of class CountLineWordsDuplicateWords 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-05T21:20:24.367

```
package somePackage;   
public static void main(String[] args) {

            String path = ""; //ADD YOUR PATH HERE
            String fileName = "test2.txt";
            String testWord = "Macbeth"; //CHANGE THIS IF YOU WANT
            int tLen = testWord.length();
            int wordCntr = 0;
            String file = path + fileName;
            boolean check;

            try{
                FileInputStream fstream = new FileInputStream(file);
                BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
                String strLine;        
                //Read File Line By Line
                while((strLine = br.readLine()) != null){                
                    //check to see whether testWord occurs at least once in the line of text
                    check = strLine.toLowerCase().contains(testWord.toLowerCase());
                    if(check){                    
                        //get the line, and parse its words into a String array
                        String[] lineWords = strLine.split("\\s+");                    
                        for(String w : lineWords){
                            //first see if the word is as least as long as the testWord
                            if(w.length() >= tLen){
                                /*
                                1) grab the specific word, minus whitespace
                                2) check to see whether the first part of it having same length
                                    as testWord is equivalent to testWord, ignoring case
                                */
                                String word = w.substring(0,tLen).trim();                                                        
                                if(word.equalsIgnoreCase(testWord)){                                
                                    wordCntr++;
                                }                            
                            }
                        }                    
                    }   
                }            
                System.out.println("total is: " + wordCntr);
            //Close the input stream
            br.close();
            } catch(Exception e){
                e.printStackTrace();
            }
        } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-21T12:16:30.960

```
public class Wordcount 
{
   public static void main(String[] args)
   {       
       int count=0;

       String str="hi this is is is line";

       String []s1=str.split(" ");

       for(int i=0;i<=s1.length-1;i++)
       {
          if(s1[i].equals("is"))
           {
               count++; 
           }
       }

       System.out.println(count);
   }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-23T12:07:39.647

您可以逐行读取文本文件。我假设每一行可以包含多个单词。对于每一行，您调用：

```
String[] words = line.split(" "); 
for(int i=0; i<words.length; i++){
   if(words[i].equalsIgnoreCase(searhedWord))
         count++;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-23T12:08:23.600

尝试使用 java.util.Scanner。

```
public int countWords(String w, String fileName) {
int count = 0;
Scanner scanner = new Scanner(inputFile);
scanner.useDelimiter("[^a-zA-Z]"); // non alphabets act as delimeters
String word = scanner.next();
if (word.equalsIgnoreCase(w))
    count++;
   return count;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-23T12:17:49.787

`Pattern`用and试试这种方式`Matcher`。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Dem {

    public static void main(String[] args){

        try {
            File f = new File("d://My.txt");
            FileReader fr = new FileReader(f);
            BufferedReader br = new BufferedReader(fr);
            String s = new String();

            while((s=br.readLine())!=null){

                s = s + s;

            }

            int count = 0;
            Pattern pat = Pattern.compile("it*");
            Matcher mat = pat.matcher(s);

            while(mat.find()){

                  if(mat.find()){

                      mat.start();
                      count++;

                  }

            }

            System.out.println(count);
        } catch (Exception e) {

            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-07T17:51:53.130

```
import java.io.*;
import java.util.*;

class filedemo
{
public static void main(String ar[])throws Exception
BufferedReader br=new BufferedReader(new FileReader("c:/file.txt"));
 System.out.println("enter the string which you search");
 Scanner ob=new Scanner(System.in);
 String str=ob.next();
 String str1="",str2="";
 int count=0;
while((str1=br.readLine())!=null)
 {
 str2 +=str1;

}  

 int index = str2.indexOf(str);

 while (index != -1) {
 count++;
 str2 = str2.substring(index + 1);
 index = str2.indexOf(str);
}

System.out.println("Number of the occures="+count);
}
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-06-27T13:55:49.217

```
package com.test;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.Scanner;

public  class Test {

    public static void main(String[] args)  throws Exception{

        BufferedReader bf= new BufferedReader(new FileReader("src/test.txt"));
        Scanner sc = new Scanner(System.in);
        String W=sc.next();
        //String regex ="[\\w"+W+"]";
        int count=0;

        //Pattern p = Pattern.compile();
        String line=bf.readLine();
        String s[];
        do
        {
            s=line.split(" ");
            for(String a:s)
            {
                if(a.contains(W))
                    count++;

            }

            line=bf.readLine();

        }while(line!=null);
        System.out.println(count);
    }

} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-11-14T00:01:06.070

```
public int occurrencesOfHi()
{
    String newText = Text.replace("Hi","");
    return (Text.length() - newText.length())/2;
} 
```

# ios - 需要帮助理解 Objective-C 块

> ID：13029925
> 
> 赞同：0
> 
> 时间：2012-10-23T11:58:30.190
> 
> 标签：ios

这是来自[apple blocks docs](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Blocks/Articles/bxDeclaringCreating.html#//apple_ref/doc/uid/TP40007502-CH4-SW3)，我很难理解这一点，请任何人都可以简单地解释一下

> ...您可以将块引用转换为任意类型的指针，反之亦然。但是，您不能通过指针取消引用运算符 (*) 取消引用块引用，因此无法在编译时计算块的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:51:09.157

简单地说，一个块是一个引用。块中的代码存储在内存中，可以通过变量访问。`void (^addingBlock)(int);`是一个块声明，可以通过 addBlock 变量访问（如，它可以被称为 like `addingBlock(5);`）。

现在，该引用可以转换为 C 识别的指针类型。有点像函数指针。正如文档所述，唯一的视觉区别是使用`*`代替`^`。这意味着您可以将块转换为函数指针：

```
void (*funcPointer)(int) = (void(*)(int))addingBlock; 
```

甚至是一个空指针（或任何类型！）

```
void* voidPtr = (void*)addingBlock; 
```

但是你提供的报价说的是，有了这个指向块的指针，你不能“取消引用”它。这意味着解释指针地址，并获取该地址后面的数据。无法做到这一点意味着您无法在编译时确定其大小。

为什么？由于 Obj-C 的动态性；块的内容只能在运行时确定，而 C 在本质上是相当静态的，并且在编译时确定了很多。

# javascript - 在对象 Javascript 中创建对象

> ID：13029926
> 
> 赞同：0
> 
> 时间：2012-10-23T11:58:33.577
> 
> 标签：javascript, object

我的代码：

```
for( var i in zones) {
                    var latlons1 = new google.maps.LatLng(zones[i].b.cen_x, zones[i].b.cen_y);
                    var latlons2 = new google.maps.LatLng(zones[i].b.max_x, zones[i].b.max_y);
                    var latlons3 = new google.maps.LatLng(zones[i].b.min_x, zones[i].b.min_y);

                     obj1 = { zones[i].n = {1:latlons1,2:latlons2,3:latlons3}  } //here object creation

                    console.log(obj1);

                } 
```

我做错了什么？在对象创建时显示 consol 日志错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T12:02:43.717

在 JavaScript 中创建对象字面量时，键和值用冒号 ( `:`) 分隔。另请注意，如果您想使用动态键，则需要使用方括号表示法来设置和访问这些属性。所以这：

```
obj1 = { zones[i].n = {1:latlons1,2:latlons2,3:latlons3}  } 
```

应该变成：

```
obj1 = {};
obj1[zones[i].n] = {
    1: latlons1,
    2: latlons2,
    3: latlons3
}; 
```

如果您对为什么必须这样做感到困惑，那是因为没有评估密钥。虽然您的意思是键应该是 引用的值，`zones[i].n`但 JavaScript 将其解释为键应该是字符串文字`"zones[i].n"`，这显然不是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T11:58:13.863

要在对象中使用对象，

```
 //An object within an object
    var NestedObject=new Object();
    NestedObject.one={
    sad:{
    d:"Add"
    }
    } 
```

我在 Codecademy.com 中使用实验性编码解决了这个问题；感谢您让我分享我的答案！

# jquery - Jquery Accordion 导致多行文本框行为异常

> ID：13029929
> 
> 赞同：1
> 
> 时间：2012-10-23T11:58:43.033
> 
> 标签：jquery, asp.net, textbox, accordion, multiline

我的 Web 应用程序遇到了一个奇怪的问题；我已经使用 jQuery 插件实现了一个手风琴，除了两个多行文本框外，一切正常。

加载页面时，多行文本框中的某些文本会消失。但是，当我单击同一个文本框时，我可以看到完整的文本（请参阅附图）。

这只发生在 IE 中，而不是在 Firefox/Chrome 浏览器中。当我禁用 jQuery 手风琴时，这也不会发生。手风琴的 jQuery 代码：-

```
<script language="javascript" type="text/javascript"> 

    $(document).ready(function () {   

        $("#accordion").accordion({
            active: 0,
            collapsible: true,
            autoHeight: false
        });
    });
</script> 
```

抱歉，我无法发布图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:33:05.870

假设脚本在页面完全加载之前加载。在窗口加载中尝试脚本

```
<script language="javascript" type="text/javascript"> 

 $(window).ready(function () {   

     $("#accordion").accordion({
        active: 0,
        collapsible: true,
        autoHeight: false
    });
});
</script> 
```

# html - 用于输入文本的滑动门

> ID：13029936
> 
> 赞同：0
> 
> 时间：2012-10-23T11:59:37.853
> 
> 标签：html, css

是否可以使用滑动门 css 技术来输入文本？我在“按钮”中使用过它，但它似乎不适用于输入类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:13:11.063

您应该将输入标签放在 span 或 div 内，然后执行[滑动门](http://www.cssplay.co.uk/menus/sliding_doors.html)技术。如果您不想添加额外的标签，请使用多个背景图像。请务必注意，并非每个浏览器都支持此功能。

关于多个 CSS 背景图片：[http ://css-tricks.com/css3-multiple-backgrounds-obsoletes-sliding-doors/](http://css-tricks.com/css3-multiple-backgrounds-obsoletes-sliding-doors/)

# ruby-on-rails - 与 ActiveRecord 中的范围的左外连接

> ID：13029938
> 
> 赞同：0
> 
> 时间：2012-10-23T11:59:53.513
> 
> 标签：ruby-on-rails, activerecord

我有这两个相关的 ActiveRecord 模型：

```
class Channel < ActiveRecord::Base
  has_many :events
end

class Event < ActiveRecord::Base
  belongs_to :channel

  def self.current
    now = Time.now.utc
    where{(starts_at<=now)&(ends_at>=now)}
  end
end 
```

我想获得一个`Channel`加入时事的 s 列表。对于单个`Channel`对象，我设法通过以下代码做到这一点：

```
> channel = Channel.first
> channel.events.current 
```

效果很好。但是，我发现没有办法在`Channel`不遇到 N+1 查询问题的情况下获取包含当前事件的 s 集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:57:21.467

尝试

```
 channels = Channel.include(:events).all
   channels.events.current 
```

# php - 转换时图像样本为黑色

> ID：13029942
> 
> 赞同：0
> 
> 时间：2012-10-23T12:00:04.140
> 
> 标签：php, image, gd

当我上传一个文件（.jpg）并执行一个操作时，`var_dump($_FILES['img'])`我会得到如下信息：

```
array
  'name' => string 'help_clip_image020.jpg' (length=22)
  'type' => string 'image/jpeg' (length=10)
  'tmp_name' => string '/tmp/phpfa9gSr' (length=14)
  'error' => int 0
  'size' => int 35504 
```

但是，使用此代码：

```
include("resize-class.php");

// *** 1) Initialise / load image
$resizeObj = new resize($_FILES['img']);

// *** 2) Resize image (options: exact, portrait, landscape, auto, crop)
$resizeObj -> resizeImage(200, 200, 'crop');

// *** 3) Save image
$resizeObj -> saveImage('sample-resized.jpg', 100); 
```

我会得到一个黑色填充的图像。但有一个绝对路径，如：

```
$resizeObj = new resize('http://leandrovieira.com/projects/jquery/lightbox/photos/image1.jpg'); 
```

一切正常。所以我的问题是：我需要在转换之前将图像存储在主机中吗？我想避免这种情况，因为我只需要缩略图。

另外： `$_FILES['img']['tmp_name']`没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:04:42.500

使用 $_FILES['img']['tmp_name'];

您的解决方案使用整个数组作为参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:07:37.483

我需要这样的东西：

```
 if(move_uploaded_file($img['tmp_name'], $path.$yourImgName_extension)){
            $resizeObj = new resize($path.$yourImgName_extension);

            $resizeObj -> resizeImage(200, 200, 'crop');

            $resizeObj -> saveImage($path.'sample-resized.jpg', 100);
        } 
```

# mysql - Mysql自内连接查询？

> ID：13029946
> 
> 赞同：3
> 
> 时间：2012-10-23T12:00:14.997
> 
> 标签：mysql, performance, database-performance

当我在 mysql 中运行以下查询时，需要 78 秒才能显示记录。还有其他方法可以编写此查询。这是我的mysql查询->“

```
select distinct nuqta1.post_id from wp_postmeta as nuqta1 
inner join wp_postmeta as nuqta2 on (nuqta1.post_id = nuqta2.post_id) 
inner join wp_postmeta as nuqta4 on (nuqta1.post_id = nuqta4.post_id) 
inner join wp_postmeta as nuqta5 on (nuqta1.post_id = nuqta5.post_id) 
inner join wp_postmeta as nuqta6 on (nuqta1.post_id = nuqta6.post_id) 
inner join wp_postmeta as nuqta7 on (nuqta1.post_id = nuqta7.post_id) 
inner join wp_postmeta as nuqta8 on (nuqta1.post_id = nuqta8.post_id) 
inner join wp_postmeta as nuqta9 on (nuqta1.post_id = nuqta9.post_id) 
inner join wp_postmeta as nuqta10 on (nuqta1.post_id = nuqta10.post_id) 
inner join wp_postmeta as nuqta11 on (nuqta1.post_id = nuqta11.post_id) 
inner join wp_postmeta as nuqta12 on (nuqta1.post_id = nuqta12.post_id) 
where (nuqta2.meta_key = 'checkin' and nuqta2.meta_value LIKE '%10/31/2012%') 
and (nuqta4.meta_key = 'guests' and nuqta4.meta_value ='1') 
and (nuqta5.meta_key = 'roomtype' and nuqta5.meta_value LIKE '%Entire home/apt%') 
and (nuqta6.meta_key = 'price' and cast(nuqta6.meta_value as signed) BETWEEN '10' and '99999') 
and (nuqta7.meta_key = 'amenities' and nuqta7.meta_value LIKE '%Wireless Internet%') 
and (nuqta8.meta_key = 'amenities' and nuqta8.meta_value LIKE '%TV%') 
and (nuqta9.meta_key = 'amenities' and nuqta9.meta_value LIKE '%Kitchen%') 
and (nuqta10.meta_key = 'amenities' and nuqta10.meta_value LIKE '%Wireless Internet%') 
and (nuqta11.meta_key = 'amenities' and nuqta11.meta_value LIKE '%TV%') 
and (nuqta12.meta_key = 'amenities' and nuqta12.meta_value LIKE '%Kitchen%') 
and 1=1 order by nuqta1.post_id asc 
```

“。而且我正在使用 wordpress 表 wp_postmeta 来运行这个查询

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:10:17.860

您在此查询中有很多`LIKE '%whatever%'`子句。这些子句中的每一个都必然导致对 wp_postmeta 进行全表扫描。你在不到十秒的时间内完成它们实际上非常好。

如果您对 meta_value 列的值有更多了解，那么您可以使用`LIKE 'whatever%'`（摆脱领先的`%`通配符术语），您将加快速度。

也不清楚为什么你有 nuqta10、nuqta11、nuqta12。那些似乎搜索与 7,8,9 相同的东西。考虑到搜索的成本，您可能会考虑消除这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:32:47.007

尝试使用[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)

你会做的是类似

```
SELECT
    *
FROM
    tableName
WHERE
    MATCH ( columnName ) AGAINST ( 'Keyword1', 'Keyword2', 'Keyword3' ) 
```

# html - 搜索支持为用户调整图层区域大小的 Ckeditor 等在线编辑器

> ID：13029947
> 
> 赞同：0
> 
> 时间：2012-10-23T12:00:17.913
> 
> 标签：html, tinymce, ckeditor, layer, rich-text-editor

我一直在测试 TinyMCE 和 CKEditor，它们很棒，但我没有看到直接编辑或调整 web 内容的不同层或 div 区域的方法。Firebug 允许手动完成，为任何图层的样式宽度、高度、填充设置一个值。

是否有任何在线 html 编辑器或某些在线编辑器添加此功能的插件？

对于不懂 html 并且需要在具有很多层的复杂网络中进行一些更改的基本用户来说，这将是非常好的。直接移动或调整图层区域的大小会很棒。

提前致谢。

例子：

```
<div>   
Content test                
</div> 
```

使用 TinyMCE 或 CKEditor 我可以在线编辑内容：内容测试，但我无法编辑 div 的宽度或高度，除非我编辑 css 或添加样式属性。我需要不太高级的用户可以直接用鼠标光标改变它，就像在 DreamWeaver 中一样。

# jquery - jquery.get 成功函数提前使用 Hypnotoad 和 Mojolicious 触发？

> ID：13029948
> 
> 赞同：3
> 
> 时间：2012-10-23T12:00:21.567
> 
> 标签：jquery, perl, mojolicious

我有一个关于我在 hypnotoad vs Morbo 中看到的一些行为的快速问题。

我有以下在事件上触发的 jquery 代码。

```
alert('calling update device list');

    $.get('updateDeviceList',

            function (data) {

                  alert('In update device list');

                  $("div#devicelist").html(data);

             }) 
```

当我使用 Morbo 时，会显示第一个警报，然后一旦返回结果`data`，`updateDeviceList`第二个警报就会触发，并且`devicelist`div 的 HTML 会被替换。

但是，当我使用 hypnotoad 时，第一个警报触发，然后第二个警报几乎立即触发。

在 `updateDeviceList' 甚至完成之前。这就是非阻塞的意思吗？

有没有办法让它等待我的数据在继续之前先返回？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:35:55.173

您必须延迟该函数，jQuery 有一个名为 [delay()](http://api.jquery.com/delay/)的函数，可让您设置倒计时。

```
alert('calling update device list');
$.get('updateDeviceList', function (data) {
    $(this).delay(1200).queue(function () { // Delay Queue will delay alert and update
        $("div#devicelist").html(data);
        alert('In update device list');
    });
}); 
```

# c++ - 在 Windows C++ 代码::blocks 上提升正则表达式

> ID：13029950
> 
> 赞同：0
> 
> 时间：2012-10-23T12:00:33.967
> 
> 标签：c++, regex, boost, linker, boost-regex

我想在 Windows 上的 code::blocks 上使用 c++ 中的 boost 正则表达式。我编译了一个使用该指令的简单程序，`regex pat( "^Subject: (Re: |Aw: )*(.*)" );`但它不起作用，我收到如下错误：`c:\mingw\bin\..\lib\gcc\mingw32\4.5.2\..\..\..\..\include\boost\regex\v4\cpp_regex_traits.hpp|366|undefined reference to 'boost::re_detail::cpp_regex_traits_char_layer<char>::init()'|`

我想我应该将项目链接到“链接器设置”中的某个库（.a 文件？），但我不知道哪个库，我在哪里可以下载它？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:34:59.157

您必须自己编译正则表达式库。请阅读文档 [http://www.boost.org/doc/libs/1_51_0/libs/regex/doc/html/boost_regex/install.html](http://www.boost.org/doc/libs/1_51_0/libs/regex/doc/html/boost_regex/install.html)

# ios - 当我使用 UIActionSheet 确认时删除 TableView 中的行

> ID：13029957
> 
> 赞同：0
> 
> 时间：2012-10-23T12:00:53.030
> 
> 标签：ios, uitableview

我使用 UIActionSheet 来确认删除 TableView 中的行。我有 3 行，但是当我交换删除第一行时，第一行不删除，但第三​​行被删除。在我继续再次删除第一行但第二行被删除后。我不知道为什么。请帮我解决这个小问题。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle
forRowAtIndexPath:(NSIndexPath *)indexPath
{

if (editingStyle == UITableViewCellEditingStyleDelete)
{

    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"cancel" destructiveButtonTitle:@"Delete" otherButtonTitles: nil];

    [actionSheet showInView:self.view];

}

}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{

switch (buttonIndex) {
    case 0:

        [listOfName removeObjectAtIndex:self.selectedIndex];
         //selectedIndex = indexPath.row;
        [self viewWillAppear:YES];

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:29:10.643

这是问题

```
[listOfName removeObjectAtIndex:self.selectedIndex]; 
```

`selectedIndex`your的值`UIActionSheet`始终为 0，因为它没有设置为要删除的表行的索引。

`indexPath.row`在呈现之前将其值设置为`UIActionSheet`.

```
self.selectedIndex = indexPath.row;
[actionSheet showInView:self.view]; 
```

然后在0`clickedButtonAtIndex:`内的方法中`case`，确保重新加载表视图。

```
[tableView reloadData]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:20:49.550

您还可以从数组中删除元素并再次重新加载表格视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:18:28.790

我找到了这个委托方法，我猜你已经实现了。

```
tableView:moveRowAtIndexPath:toIndexPath: 
```

从我的角度来看，您应该将 toIndexPath 存储为属性或属性，当用户确认时，使用存储的“toIndexPath”将其删除。如果用户取消此操作，请将属性或属性设置为 nil（在 ARC 上下文或在 NON-ARC 上下文中释放属性并将其设置为 nil）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:27:24.777

从您的数组中删除元素。

```
[yourArray removeObject:indexpath.row]; 
```

重新加载您的表格视图。

```
[yourTableView reloadData]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T12:35:59.097

```
-(void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
       if (editingStyle == UITableViewCellEditingStyleDelete)
       {
            selectedIndex = indexPath.row;
           UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"cancel" destructiveButtonTitle:@"Delete" otherButtonTitles: nil];
          [actionSheet showInView:self.view];
       }
}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{
      switch (buttonIndex) {
          case 0:

              [listOfName removeObjectAtIndex:self.selectedIndex];
              [tableView reloadData];
        }
} 
```

# android - 传递整个 ArrayList 在android中从一项活动到另一项活动

> ID：13029958
> 
> 赞同：1
> 
> 时间：2012-10-23T12:00:56.637
> 
> 标签：android, android-intent, arraylist

我想将 ArrayList 从一个活动传递到另一个活动。我发现此链接用于[将 arraylist 从一个活动传递到另一个](https://stackoverflow.com/questions/4780835/pass-arraylist-from-one-activity-to-other)有用。

但是当我使用

```
 ArrayList<String> hyperlinks = new ArrayList<String>();
                           ...

    Intent myIntent=new Intent(Player.this,VideoActivity.class);
                    Bundle mBundle = new Bundle();  
                    mBundle.putStringArrayListExtra("hyperlinks", hyperlinks);
                    //mBundle.putString("filePath", hyperlinks.get(0));  
                    myIntent.putExtras(mBundle); 
                    Player.this.startActivity(myIntent); 
```

然后我在 **mBundle.putStringArrayListExtra**收到错误 ，说 **方法 putStringArrayListExtra(String, ArrayList) 未定义类型 Bundle**

请指导我如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:04:17.820

检查到应用程序。您可以扩展自己的应用程序，并在此处保存数组列表

签出 ==>[扩展应用程序以全局共享变量](https://stackoverflow.com/questions/4572338/extending-application-to-share-variables-globally)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T12:05:44.853

有很多方法可以做到这一点，但是您是否尝试过：

```
myIntent.putStringArrayListExtra(key, hyperlinks); 
```

此外，Bundle 对象具有

```
 putStringArrayList 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T12:08:30.420

Bundle Documentation 清楚地表明这`putStringArrayList(String, ArrayList)`是 Bundle 类的方法，但不是`putStringArrayListExtra()`

[http://developer.android.com/reference/android/os/Bundle.html#putStringArrayList(java.lang.String](http://developer.android.com/reference/android/os/Bundle.html#putStringArrayList(java.lang.String) , java.util.ArrayList)

另外，请检查导入声明，并检查是否已导入**Proper Bundle 类。**

Bundle 类的包应该是：

```
import android.os.Bundle; 
```

# php - 使用iis在windows 7上安装php mysql安装

> ID：13029960
> 
> 赞同：1
> 
> 时间：2012-10-23T12:01:19.117
> 
> 标签：php, mysql, installation

我在我的本地主机上安装 WordPress 用于开发目的。我已经安装了 php 并验证它正在使用

```
phpinfo(); 
```

我还在我的机器上安装了 MySQL。我在我的 PHP.INI 文件上取消标记 MySQL.dll 未标记 MySQL.dll 扩展名并重新启动 IIS。

现在，一旦我转到 WordPress 安装地址，我就会得到：

```
HTTP Error 500.0 - Internal Server Error 
```

还有其他设置我忘记处理了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:10:19.320

只需使用**Web Platform Installer获取****IIS Express**。您会在列表中找到 PHP 以及 URL Rewrite、PHP WinCache 和更多实用程序。IIS Express 比 IIS 更适合本地开发，因为它所需的权限更轻。

 **在此处阅读[Windows 7 附带的 IIS Express 与默认 IIS](https://stackoverflow.com/questions/8389024/iis-express-vs-default-iis-that-comes-with-windows-7) ...您可能会遇到权限问题，这是需要处理的主要 PITA。我总是最终正确设置 IIS，但在权限方面永远无法真正说出我做了什么:)。

**Windows 上的 Apache 不如 IIS 快。**但是，如果您的主机是 Linux，您可能还想使用它来熟悉 .htaccess 重写和总体规则。**

# asp.net-mvc - Html.EditorFor 忽略我指定的类

> ID：13029964
> 
> 赞同：6
> 
> 时间：2012-10-23T12:01:31.987
> 
> 标签：asp.net-mvc, razor, html-helper

我有一个模型：

```
public class MyModel {
    public string Name {get; set;}
    public DateTime StartDate {get; set;}
} 
```

然后，在我的 Razor 视图中，我有这个：

```
@Html.EditorFor(x => x.StartDate, new { @class = "input datepicker" }) 
```

然而，输出的 HTML 如下所示：

```
<input class="text-box single-line" data-val="true" 
 data-val-required="The StartDate field is required." id="StartDate" 
 name="StartDate" type="text" value="01/01/0001 00:00:00"> 
```

它似乎完全忽略了我的`@class`定义（以及添加自己的验证内容）

有没有办法让它用我指定的类呈现？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T12:15:33.323

您不能为 EditorFor 设置类。您可以在此模板中有许多不同的标签。所以你需要在编辑器模板中分配类：

```
<div>
    @Html.TextBoxForModel(x => x.StartDate, new { @class = "input datepicker" })
</div> 
```

或者你可以只使用 TextBoxFor：

```
@Html.TextBoxFor(x => x.StartDate, new { @class = "input datepicker" }}) 
```

# c# - 如何在 Visual Studio 2010 中添加“部署项目”

> ID：13029971
> 
> 赞同：3
> 
> 时间：2012-10-23T12:01:53.717
> 
> 标签：c#, visual-studio-2010, deployment, build, web-deployment-project

我理解这个概念：构建一个项目，强制其他构建并将所有垃圾箱集中到一个目标目录中。

我无法成功地将“部署项目”添加到我的解决方案中。

添加部署项目是否有条件或限制？它仅与 Web 项目有关吗？我可以在没有 Web 项目的情况下在解决方案中做同样的事情吗？

![在此处输入图像描述](../Images/db958aecd2c3941797d0b1bac44ebe05.png)

# editor - 如何在asp.net中开发DICOM Editor

> ID：13029973
> 
> 赞同：1
> 
> 时间：2012-10-23T12:01:59.910
> 
> 标签：editor, dicom

我想在 Asp.net 中开发一个 DICOM 图像编辑器，有没有可用的库。或者我可以做一些事情，比如从 DICOM 编辑器创建一个 Jpeg。用线条或形状编辑相同的图像并将其转换回 DICOM 图像文件，这可能吗？如果是的话怎么办？

我是 DICOM 的新手。因此请帮助我理解 DICOM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:00:34.387

有许多 .NET 的 DICOM 库。有关更多信息，请参阅此[问题](https://stackoverflow.com/questions/1287127/net-dicom-libraries)。

更新：[另一个](https://github.com/rcd/fo-dicom)

至于 ASP.NET 查看器 - 您希望该查看器做什么。换句话说，目标受众是什么？是移动用户吗？然后silverlight、wcf和flash都出来了——最常用的基于网络的大屏幕移动设备是iPad，它不支持这些技术。是桌面用户吗？Flash 可能是答案，安装基数相当高，而且 Flash 对各种图像格式有很好的支持。

您是否需要此查看器为诊断级？换句话说，您需要 16 位窗口/级别吗？以正确频率进行超声波的电影循环？如果是，那么您需要自己弄清楚其中的一些。现有的移动工具在上述某些方面并不是那么出色（特别是 16 位灰度）。

HTML5 具有上述一些功能，并且对移动设备友好。无论如何，从该工具的预期用途开始，这将根据您提出的要求引导您进入特定方向！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:31:03.407

一个可能适合 ASP.NET 开发的开源库是[mdcm](https://github.com/rcd/mdcm)，它允许您开发可以在您的 Web 应用程序中使用的 Silverlight 程序集。

*mdcm*还有一个后继者表示为[fo-dicom](https://github.com/rcd/fo-dicom)，但是我不确定*fo-dicom*目前是否适用于 Silverlight。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:25:17.177

这是一个开始的好地方：

[医学图像格式常见问题解答 - DICOM 信息源](http://www.dclunie.com/medical-image-faq/html/part8.html)

# .htaccess - 由php生成的rss文件的Mime类型？

> ID：13029974
> 
> 赞同：1
> 
> 时间：2012-10-23T12:02:03.283
> 
> 标签：.htaccess, rss

我使用php从数据库中自动生成一个rss文件，方法是在rss文件中放置一些php命令，然后更改rss目录中的htaccess文件，这样xml文件将被解析为php

```
AddType application/x-httpd-php .php .xml 
```

但是当我去验证我的提要时，它说提要是有效的，但正在作为文本文件发送，我应该将 htacces 更改为包含`AddType application/xml`。但是当我在 php 行之后添加它时，文件将不会执行文件中的 php 命令

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:05:12.643

尝试

```
header('Content-Type: application/rss+xml;charset= utf-8 '); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:05:13.740

您必须在 PHP 代码中设置 Content-Type。例如，将此添加到您的 PHP 代码中：

```
header('Content-Type: application/rss+xml'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:05:28.207

添加：

```
header('Content-Type: application/rss+xml'); 
```

到你的代码。此外，我建议**编写**您的 XML，而不是即时生成它。我非常怀疑它变化如此频繁。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:05:35.307

您应该在文件顶部添加：

```
header('Content-type: application/atom+xml'); 
```

在发送任何内容之前

# r - 打开 RStudio 项目时自动运行 R 代码

> ID：13029975
> 
> 赞同：10
> 
> 时间：2012-10-23T12:02:09.740
> 
> 标签：r, rstudio

[我在另一个问题](https://stackoverflow.com/a/13029847/567015)中写了一个 R 函数来更新包的版本号。我经常使用 GitHub 和 RStudio，如果每次打开某个项目时自动运行此功能（或者更好的是，进行 git commit/push，但是我认为这更难做到）。但我不知道该怎么做，或者这是否可能。

我可以`.Rprofile`在每次启动时运行 R 代码`R`，因此我可以在启动 R 时更新版本（或者构建它仅在日期不是今天或其他情况下更新版本），但这似乎有点过头了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T13:20:58.807

您可以`.Rprofile`为每个项目单独制作一个。您必须将它放在项目的主目录中（[http://www.rstudio.com/ide/docs/using/projects](http://www.rstudio.com/ide/docs/using/projects)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T12:21:26.633

好吧，我会用`.Rprofile`它。独立于您周围的工具链有一些话要说：knitr 可以在 RStudio 中工作，也可以在没有它的情况下工作，对于 Rcpp/RInside 等 pp 也是如此。

您可以挂钩到 svn 的提交挂钩，既可以通过后端的挂钩显式挂钩，也可以简单地在您的端添加包装脚本。我想你也可以用 git 做同样的事情，但我对此知之甚少。所以为了把它抽象出来，我会给自己写一个 'commitThis' 或 'pushThis' 或 ... 函数来执行数字增量、测试运行、代码推送以及你有什么。

# c - 链表循环

> ID：13029982
> 
> 赞同：0
> 
> 时间：2012-10-23T12:02:34.463
> 
> 标签：c, list, linked-list

这个代码片段究竟做了什么？

```
#include <stdio.h>
 List *makeList(int n) { 
    List *l, *l1 = NULL; 
    for (int i = 0; i < n; i++) {
        l = malloc(sizeof(List)); 
        l->val  = n-i;
        l->next = l1;
        l1 = l;
    }
    return l;
} 
```

我的笔记说“给定一个数字 n，构建一个长度为 n 的列表，其中列表的第 i 个元素包含 i”

但我不明白...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:10:09.193

这里棘手的是列表是向后构建的，请注意每个元素的值都设置为`n - i`，并且`i`从 0 计数到`n - 1`。因此，第一个元素将获得 value `n`，下一个将获得`n - 1`，依此类推。

这可能是为了保存变量（！）；否则将需要另一个指针来记住第一个节点，以便有一些东西`return`。

此外，它不检查 的返回值`malloc()`，这总是很可怕。

对于`n = 0`，它会返回一个未定义的值（ 的值`l`），这真的很可怕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T12:10:32.973

它创建一个`n`节点的链接列表并返回列表的头部。值为：`1,2,3,...n (from head to tail)`。

它看起来像这样：

```
1 -> 2 -> 3 -> ...... -> n -> (NULL) 
```

它有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T12:10:41.243

这是以相反的顺序创建列表。换句话说，在开始时创建列表的最后一个元素，其值为列表大小 (n) - 0 (i)，即列表元素编号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:13:23.047

它做这样的事情；每个盒子都是一个`malloc`：

```
 n          n-1         n-2               1
          ^           ^           ^                ^
       +--|---+    +--|---+    +--|---+         +--|---+
       | val  |    | val  |    | val  |  ...    | val  |
NULL <-- next |  <-- next |  <-- next |       <-- next |
       +------+    +------+    +------+         +------+

                                                   ^^--- this is returned 
```

数据结构`struct List`看起来像这样（或多或少）：

```
struct List
{
    int val;
    struct List * next;
}; 
```

它的名称具有误导性，因为它实际上应该是“ListNode”或类似的东西。C 中通常没有专门的“列表”数据结构，只有节点的集合。您只需传递头节点并将其视为“列表”。

（如果您想存储列表大小以在恒定时间内访问它，或者如果您有一个双向链表并希望在恒定时间内同时使用头指针和尾指针，则整个列表的专用持有者结构可能会很有用。 )

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T12:14:25.923

让我们跟踪您的代码。

```
List *l, *l1 = NULL; 
```

定义了两个类型的指针变量`List`。

```
for (int i = 0; i < n; i++) { 
```

您正在开始一个循环，它将遍历`n`时间。这意味着，如果您使用 调用此函数`5`，则此循环将执行 5 次。

```
l = malloc(sizeof(List)); 
```

在内存中创建一个`List`值，并将该值的位置存储在`l`指针变量中。每次通过循环时，`List`都会在内存中创建一个不同的值。

```
l->val  = n-i; 
```

为新创建的值`n-i`的字段分配一个值。对于第一次通过循环，将是，因此将包含 5-0，即 5。对于第二次通过，是 1，因此对于第二次，将包含 5-1，即 4，依此类推.`val``List``i``0``val``i``List``val`

```
l->next = l1; 
```

类型中有一个`next`字段`List`，它是同类型的指针。对于第一遍，`li`包含 NULL，因此它将指向 null。对于第二次传递，`l1`将包含先前创建的`List`值，因此第二次`List`的`next`字段将指向它，依此类推。

```
 l1 = l; 
```

存储新创建的元素的内存地址，以便在下一次循环中使用。

乍看上去：

在循环的第一遍之后（i = 0） -

```
5->NULL 
```

在第二遍（i = 1）之后，

```
4 -> 5 -> NULL 
```

在第三个（i = 2）之后，

```
3 -> 4 -> 5 -> NULL 
```

在第四个（i = 3）之后，

```
2 -> 3 -> 4 -> 5 -> NULL 
```

在第五个（也是最后一个）（i = 4）之后，

```
1 -> 2 -> 3 -> 4 -> 5 -> NULL 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T12:15:39.870

循环在内存中向后构建 List 对象的链表。当列表完成时，第一个元素实际上是“第 i 个”元素。它被创建，给定值'n'并以NULL终止。

```
 l->val = n
  l->next = NULL 
```

下一个对象被有效地插入到列表的前面（l->next = l1）。

```
 l->val = n-1 
  l->next ------------> l->val = n
                        l->next = NULL 
```

以此类推，直到 i=n-1。

最后（@i=n-1），最后创建的对象被赋予值 1，循环终止，并返回指向最后创建的对象的指针。