# StackOverflow 问答 13559000-13559999

# iphone - 如何在 iphone sdk 4.0 及更高版本中获取两个日期之间的 Datewithtime (am/pm) 差异

> ID：13559000
> 
> 赞同：-7
> 
> 时间：2012-11-26T05:15:16.143
> 
> 标签：iphone, objective-c

我想在 iPhone SDK 中获取 2 个日期和日期之间的时差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:18:36.963

试试这个**更新**

```
 NSString *strDatehere = @"22/11/2012 11:12:00 PM";
            NSDateFormatter *heredateFormatter = [[[NSDateFormatter alloc] init] autorelease];
            [heredateFormatter setDateFormat:@"dd/MM/yyyy hh:mm:ss a"]; // set date formate with your dates

            NSDate *datehere = [heredateFormatter dateFromString: strDatehere];

            NSTimeInterval timeDifference = [[NSDate date] timeIntervalSinceDate:datehere];

            double minutes = timeDifference / 60;

            double hours = minutes / 60;

            double seconds = timeDifference;

            double days = minutes / 1440;

            NSLog(@"%.0f, %.0f, %.0f, %.0f", days, hours, minutes, seconds); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:30:53.743

我通常以秒为单位找出差异并计算 ceil(diffInSeconds/86400)。

还关注作品

```
NSDate *endDate=[dateFormat dateFromString:now];
NSTimeInterval interval = [YourDate timeIntervalSinceDate:endDate];
int diff=interval/86400;//for converting seconds into days. 
```

# javascript - 简单的 javascript 表单验证在 Django 中不起作用？

> ID：13559004
> 
> 赞同：0
> 
> 时间：2012-11-26T05:15:54.823
> 
> 标签：javascript, django, validation

我有一个简单的表单来接受用户输入。用户必须在该表单中填写非常多的字段。如果他们不这样做，javascript 会给出警报消息，但它不起作用。如果我提交空表单，我不会收到警报消息。这是我的form.html：

```
</style>
<script type="text/javascript">
function Validate(){
    if(document.simple_form.session.value == "" ||
    document.simple_form.hostname.value == "" ||
    document.simple_form.username.value == ""
    document.simple_form.password.value == "")
    {
        alert("Please fill out all fields before clicking Load!");
        return false;
    }
}
</script>

</head>

<body>

    <form action="." method="post" onsubmit="return Validate();" name="simple_form">
    {% csrf_token %}
        <fieldset>
            <legend>Session</legend>
                <label for="input-one" class="float"><strong>Session Name:</strong></label><br />
                <input class="inp-text" name="session" id="sess" type="text" size="30" /><br />

                <label for="input-two" class="float"><strong>RemoteHost:</strong></label><br />
                <input class="inp-text" name="hostname"  id="host" type="text" size="30" onblur="if(this.value=='') { this.value='ngs.pradhi.com:/upload' }" onfocus="if(this.value=='ngs.pradhi.com:/upload') { this.value='' }" value="ngs.pradhi.com:/upload" />

                <label for="input-three" class="float"><strong>Username:</strong></label><br />
                <input class="inp-text" name="username"  id="user" type="text" size="30" />

                <label for="input-four" class="float"><strong>Password:</strong></label><br />
                <input class="inp-text" name="password"  id="pass" type="password" size="30" />
        </fieldset>

    <p><input class="submit-button" type="submit" value="Load" /></p>
        <p><input class="save-button" type="reset"  name="cancel" value="Cancel" /></p>
    </form> 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:03:20.890

您`||`在`Validate()`函数中缺少final。

[我在这里](http://jsfiddle.net/aidanewen/dPx9d/)有一个可用的 jsfiddle （我也添加了几个`</br>`'s ）。

# tooltip - 向 highchart 工具提示添加新数据

> ID：13559006
> 
> 赞同：5
> 
> 时间：2012-11-26T05:15:57.893
> 
> 标签：tooltip, highcharts

> **可能重复：**
> [将附加数据设置为 highcharts 系列](https://stackoverflow.com/questions/8514457/set-additional-data-to-highcharts-series)

所以我有这张图：http: [//jsfiddle.net/Gg3ZL/](http://jsfiddle.net/Gg3ZL/)

我想在工具提示中用另一个新数据替换当前显示“在线玩家总数”的地方

```
Array= ['PlayerX, PlayerY, PlayerZ', 'Player1, Player2, Player3']; 
```

ETC

以便它与第一个系列数据输入中的第一个结果匹配....

如果我不必替换“在线玩家总数：”，而只需在工具提示中添加另一个新条目，例如“谁在线：”，那就更好了。

基本上将鼠标悬停在一个条目上，然后在工具提示上查看哪些玩家在特定时间在线。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-26T11:21:24.887

**[`series.data`](http://api.highcharts.com/highstock#series.data)**您可以在以下每个点上附加附加数据

```
series: [{
    name: 'Series 1',
    data: [{
        y: 2,
        players: ['a', 'b']},
    {
        y: 3,
        players: ['a', 'b', 'c']},
    {
        y: 2,
        players: ['x', 'y']},
    {
        y: 4,
        players: ['a', 'b', 'c', 'd']}
    ]
}] 
```

现在，**[`tooltip.formatter`](http://api.highcharts.com/highstock#tooltip.formatter)**您可以按如下方式使用附加数据

```
formatter: function() {
    var result = '<b>' + Highcharts.dateFormat('%A, %b %e, %Y', this.x) + '</b>';
    $.each(this.points, function(i, datum) {
        result += '<br />' + datum.y + ' players online';
        $.each(datum.point.players, function() {
            result += '<br/>' + this;
        });
    });
    return result;
} 
```

**[复杂工具提示 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/k5exP/)**

# php - PHP，仅从数据库中选择登录的用户名

> ID：13559007
> 
> 赞同：0
> 
> 时间：2012-11-26T05:15:57.863
> 
> 标签：php, html, web

我基本上希望它只选择登录的当前用户，然后在那里显示用户名和点，而不是显示数据库中的所有用户

这是显示它的代码

```
 <?php
include("connect.php"); // Includes the file connect.php to connect to database
session_start(); // Starting session cookies
if($_SESSION['LOGGEDIN'] == 1)  //Checking if they have the session cookie
{

$result = mysql_query("SELECT * FROM userdata");

echo "<table border='1'>
<tr>
<th>Username</th>
<th>Points</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['username'] . "</td>";
  echo "<td>" . $row['points'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
}

else
{
    echo "<title>Error!</title>";
    //Doesn't have session cookie
    echo "YOU ARE NOT LOGGED IN!";
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T05:20:38.930

好吧，您正在选择整个表格。

只需将其更改为

```
$result = mysql_query("SELECT * FROM `userdata` WHERE `username`='".$_SESSION["LOGGEDIN"]."' LIMIT 1"); 
```

请注意，您应该更改会话变量`LOGGEDIN`以包含登录用户的用户名，或者使用另一个会话变量并替换`LOGGEDIN`我上面代码行中的引用。

例如，在您的登录脚本中，而不是执行以下操作：

```
if($_POST["user"] == $user and $_POST["password"] == $pass)
$_SESSION["LOGGEDIN"] = 1; 
```

做这个：

```
if($_POST["user"] == $user and $_POST["password"] == $pass)
$_SESSION["LOGGEDIN"] = $user; 
```

如果你使用`LOGGEDIN`，你需要更新你的初始 if 子句，这样它就不会检查它是否等于一，而是检查它是否被设置：

```
if(isset($_SESSION["LOGGEDIN"])) 
```

所以你的文件应该是这样的：

```
<?php
include("connect.php"); // Includes the file connect.php to connect to database
session_start(); // Starting session cookies
if(isset($_SESSION['LOGGEDIN']))  //Checking if they have the session cookie
{

$result = mysql_query("SELECT * FROM `userdata` WHERE `username`='".$_SESSION["LOGGEDIN"]."' LIMIT 1");

echo "<table border='1'>
<tr>
<th>Username</th>
<th>Points</th>
</tr>";

while($row = mysql_fetch_array($result))
{
echo "<tr>";
echo "<td>" . $row['username'] . "</td>";
echo "<td>" . $row['points'] . "</td>";
echo "</tr>";
}
echo "</table>";

mysql_close($con);
}

else
{
    echo "<title>Error!</title>";
    //Doesn't have session cookie
    echo "YOU ARE NOT LOGGED IN!";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:45:57.517

```
<?php 

        include("connect.php");
        $email= $_POST['userid'];
        $password= $_POST['password1']; 
        $papas=base64_encode($password);
        $check = $_POST['rememberme'];      
            $tablename="userdata";
        $select_qry = $jeob->SqlQuery("SELECT * FROM ".$jeob->dbprefix.$tablename." WHERE email ='$email' AND password ='$papas' AND active_link='1' ");
            if($jeob->SqlRows($select_qry) == "0"){                 
             echo "Invalid Username and Password";
            } else {

            $getuser = $jeob->SqlFetch($select_qry);
            $_SESSION['userid'] = $getuser['user_id'];  
            $_SESSION['oauth_provider'] = "normal";
            $_SESSION['email'] = $getuser['email']; 
            }
                if($_SESSION['userid'] == ""
                {
                echo "You are not logged in";
                }
                else
                {
                Welcome "Fetch username using the session id or emial"
                }
    ?> 
```

希望这对你有用

# java - 这个 Java 表达式是什么意思？

> ID：13559008
> 
> 赞同：0
> 
> 时间：2012-11-26T05:16:14.440
> 
> 标签：java, operators

我时间紧迫，我想在这里发布我的查询。我是 Java 新手，这应该是非常初级的，但我无法从谷歌得到任何答案。

下面的第二行是什么意思？

```
double mutatePercent = 0.01;
boolean m1 = rand.nextFloat() <= mutatePercent; 
```

我认为 <= 意味着小于或等于，但在上述用法中似乎并非如此。m1的值是怎么决定的？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T05:19:03.013

线

```
boolean m1 = rand.nextFloat() <= mutatePercent; 
```

是形式

```
boolean m1 = <some boolean value> 
```

和

```
rand.nextFloat() <= mutatePercent; 
```

结果是一个布尔值，因此比较的结果`rand.nextFloat() <= mutatePercent`被分配给`boolean`变量`m1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:17:11.097

> 我认为 <= 意味着小于或等于

确实如此。

> 但在上述用法中似乎并非如此。

为什么不？

* * *

```
boolean m1 = rand.nextFloat() <= mutatePercent; 
```

分配条件的值*“此随机浮点数是否小于或等于`0.01`？”* 到变量`m1`。因此，`m1`如果随机生成的数字小于或等于 ，则为真`0.01`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T05:18:19.397

这正是它的意思。第二行执行“小于或等于”测试并分配结果 - 即。true 或 false - 到布尔变量`m1`。

# jquery - 使用 AJAX 将表单参数传递给服务器

> ID：13559009
> 
> 赞同：0
> 
> 时间：2012-11-26T05:16:22.243
> 
> 标签：jquery, ajax, json

下面是我的代码，我无法将数据处理到后端。

当在注册表单中输入数据并提交其未通过数据时。只需页面重新加载。

谁能告诉我我的代码有什么问题......？

```
$(document).ready(function(){
$("form#signup").submit(function(e) {
    e.preventDefault();
    dataString = $("#signup").serialize();
    if ( dataString ) {

$.ajax({
    type: "POST",
    url: "https://IP_addrress/cgi-bin/signup.pl",// URL of the Perl script
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    data: dataString,
    error: function(XMLHttpRequest, textStatus, errorThrown) {
            $('div#signupresult').text("responseText: "  +   XMLHttpRequest.responseText);
            $('div#signupresult').addClass("error");
            }, // error 
    success: function(data){
          if (data.error) { // script returned error
                    $('div#signupresult').text("data.error: " + data.error);
                    $('div#signupresult').addClass("error");
            } // if
      else { // Registration successful
            window.location = "https://IP_addrress/reg_success.html"
           } //else
    } // success
  }); // ajax
 } // if
 else {
  $('div#signupresult').text("check the error")
  $('div#signupresult').addClass("error");
  } // else
  $('div#loginResult').fadeIn();
   return false;
  });
});

    <div id="signupresult" style="display:none; margin:15px;"></div>
    <div id="center" style="width: 28%; margin:0 auto;padding: 0 auto; ">
    <div id="the_div">
    <header id="the_header"><img src="static/images/logo.jpeg" style="margin-left:55px;" align="left" width="240px" height="70px" /></header>
       <section id="the_section">
       <title>Signup</title>
            <style type='text/css'>
            </style>
            </br><h1 style="text-align: center;font-size: 15px;color:black;">Signup</h1>
            <form name="signup_form"style="align:center" id="signup" action="https://IP/cgi-bin/signup.pl/" method="POST">

            <fieldset>
            <legend>Account Information</legend>
            <ol>
                    <li><input id=name  type=text pattern="[a-zA-Z ]{5,}" maxlength="20" name=username placeholder="User Name" required autofocus></li>
                    <li><input id="pass" type="password" name="password" placeholder="Password" required></li>                    
                    <li><input id="vpass" type="password" onkeyup="checkPass(); return false;" placeholder="Verify Password" required></li>
            </ol>
            </fieldset>

  <fieldset>
            <legend>User Details</legend>
            <ol>
                    <li><input id=name type=text pattern="[a-zA-Z ]{5,}" maxlength="20" name="firstname" placeholder="First Name" required autofocus></li>
                    <li><input id=name type=text pattern="[a-zA-Z ]{5,}" maxlength="20" name="lastname" placeholder="Last Name" required autofocus></li>
                    <li><input id="email" onkeyup="validateEmail(); return false;" type="email" name="email_id" placeholder="Email ID" required autofocus></li>

                    <li><input id=phone type="tel" name="telephone_no" placeholder="Telephone No" required></li>
                    <li>
                            <div class='selectBox'>
                            <label for=cardnumber>Select Country</label>
                            <select name="country">
                              <option value="000" selected="selected">[Select Country]</option>
                              <option value="1">India</option>
                              <option value="2">Singapore</option>
                              <option value="3">US</option>
                            </select>
                            </div>
                    </li>
            </ol>
            </fieldset>

   </fieldset>
                    <fieldset>
                            <button vaule=register id="submit_btn" type=submit>Register</button>
                    </fieldset>
            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:01:54.160

通过 ajax 提交表单的一种非常合适的方式是 .ajaxform()

尝试这个

```
<script>
    // wait for the DOM to be loaded
    $(document).ready(function() 
    {
        // bind 'myForm' and provide a simple callback function
       $("#tempForm").ajaxForm({
       url:'../calling action or servlet',
       type:'post',
       beforeSend:function()
       {
         alert("perform action before making the ajax call like showing soinner image");
       },
       success:function(e){
        alert("data is"+e);
            alert("now do whatever you want with the data");
       }
       });
    });
</script> 
```

[你可以在这里](http://www.malsup.com/jquery/form/#download)找到插件

# php - 1060错误SQL查询

> ID：13559016
> 
> 赞同：0
> 
> 时间：2012-11-26T05:17:22.370
> 
> 标签：php, mysql, sql, phpmyadmin

我正在尝试运行一个查询，我将从具有多个搜索选项的 from 转换为 mySQL 查询。这是我在 myPHPadmin 中测试的查询

```
SELECT Fname, Minit, Lname, Address, Hourly, Sname, Saddress, Dno
FROM (SELECT * 
FROM EMPLOYEE, DEPARTMENT, LOCATION
WHERE EMPLOYEE.Dno = DEPARTMENT.Dnumber AND
LOCATION.Store_num = DEPARTMENT.Store_num AND
(Fname='100' OR Lname='100' 
OR LOCATION.Store_num ='100' OR Dno='100')) X 
```

所有的 OR 语句都将变成 '?' 在 mySQL 中，所以现在我使用 100，它只适用于 Store_num。因此，这应该会列出在该商店工作的员工名单。

但是，我得到的错误是：#1060 - Duplicate column name 'Mgr_ssn'

这是我的表，不知道为什么它们没有正确合并。

```
CREATE TABLE EMPLOYEE
(   Fname       VARCHAR(15) not null,
    Minit       CHAR,
    Lname       VARCHAR(15) not null,
    Ssn         CHAR(9)     not null,
    Bdate       DATE,
    Address     VARCHAR(30), 
    Hourly      DECIMAL(5,2), 
    Mgr_ssn     CHAR(9),
    Dno         INT     not null,
    Start_date  DATE,
    Phone       CHAR(10),   
    PRIMARY KEY (Ssn),
    FOREIGN KEY (Mgr_ssn) REFERENCES EMPLOYEE(Ssn), 
    FOREIGN KEY (Dno) REFERENCES DEPARTMENT(Dnumber) );

CREATE TABLE DEPARTMENT
(   Dname       VARCHAR(15) not null,
    Dnumber     INT         not null,
    Mgr_ssn     CHAR(9)     not null,
    Mgr_start_date  DATE,
    Phone       CHAR(10),
    Store_num   INT     not null,
    PRIMARY KEY (Dnumber, Store_num),
    UNIQUE (Dname),
    FOREIGN KEY (Mgr_ssn) REFERENCES EMPLOYEE(Ssn),
    FOREIGN KEY (Store_num) REFERENCES LOCATION(Store_num) 
);

CREATE TABLE LOCATION
(   Store_num   INT         NOT NULL,
    Sname       VARCHAR(15)     NOT NULL, 
    Saddress    VARCHAR(30) NOT NULL,
    PRIMARY KEY (Store_num), 
    UNIQUE (Saddress)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:20:41.070

问题就在这里

```
SELECT *  FROM EMPLOYEE, DEPARTMENT, LOCATION 
```

表`EMPLOYEE`并`DEPARTMENT`有两`Mgr_ssn`列。您需要指定来自的表`Mgr_ssn`，例如

```
SELECT EMPLOYEE.Mgr_ssn AS `EMP_Mgr_ssn`,
       DEPARTMENT.Mgr_ssn AS `DEP_Mgr_ssn`,
       .....
FROM EMPLOYEE, DEPARTMENT, LOCATION 
```

an`alias`也可以帮助您解决它。

所以完整的查询将是

```
SELECT Fname, Minit, Lname, Address, Hourly, Sname, Saddress, Dno
FROM 
(
    SELECT LOCATION.*,
           Employee.Mgr_ssn AS `EMP_Mgr_ssn`,
           DEPARTMENT.Mgr_ssn AS `DEP_Mgr_ssn`,
           Employee.Fname,
           Employee.Minit,
           Employee.Lname,
           Employee.Address,
           Employee.Hourly,Employee.Dno
    FROM EMPLOYEE, DEPARTMENT, LOCATION
    WHERE EMPLOYEE.Dno = DEPARTMENT.Dnumber AND
          LOCATION.Store_num = DEPARTMENT.Store_num AND
        (Fname='100' OR Lname='100' 
         OR LOCATION.Store_num ='100' OR Dno='100'
        )
) X 
```

但是这个查询也可以工作，因为你没有`Mgr_ssn`列

```
SELECT Fname, Minit, Lname, Address, Hourly, Sname, Saddress, Dno
FROM 
(
    SELECT LOCATION.*,
           Employee.Fname,
           Employee.Minit,
           Employee.Lname,
           Employee.Address,
           Employee.Hourly,Employee.Dno
    FROM EMPLOYEE, DEPARTMENT, LOCATION
    WHERE EMPLOYEE.Dno = DEPARTMENT.Dnumber AND
          LOCATION.Store_num = DEPARTMENT.Store_num AND
        (Fname='100' OR Lname='100' 
         OR LOCATION.Store_num ='100' OR Dno='100'
        )
) X 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/62749/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:21:16.927

您的两个表包含“Mgr_ssn”列。要解决上述问题，请使用以下查询更改其中一列的名称

选择employee.Mgr_ssn 作为'give_any_name' .....

# django - 布尔值上的Django查询集过滤器不起作用

> ID：13559017
> 
> 赞同：0
> 
> 时间：2012-11-26T05:17:31.813
> 
> 标签：django, django-models

我有一个模型：

```
class mymodel(models.Model):
    order_closed = models.BooleanField(default=False) 
```

我手动将此字段添加到我的开发 mysqllite db 中，因为它是已经存在的模型/表的新字段。然后我尝试了：

```
mymodel.objects.filter(order_closed=False) #and with True 
```

及其产生不正确或不可预测的结果。我看到有人提到这可能是一个 sqllite 的东西，但我不确定？模板似乎可以理解它是真值还是假值，但 python 代码却没有。用一些例子来澄清：

{{mymodel.order_closed}} 在 sqllite 中将默认值设置为 0 后将打印 0。但使用 .filter(order_closed=value) 仍会返回每条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:43:31.293

我认为您在编写 SQL 时犯了一些错误。如果您有包含一些重要信息的数据库，请使用

```
south 
```

[http://south.aeracode.org/](http://south.aeracode.org/)

当您拥有它时，您可以轻松升级/编辑您的数据库。

如果您不想安装新的“插件”，请尝试。1\. 手动从数据库中删除该字段。2\. 编写：python manage.py sql '应用程序名称'

它将返回应用程序的 CREATE TABLE SQL 语句。

然后，您可以使用一些 CCreate 命令手动升级您的数据库。

# jquery-ui - 自定义 Grails 生成的视图

> ID：13559021
> 
> 赞同：0
> 
> 时间：2012-11-26T05:18:19.623
> 
> 标签：jquery-ui, grails, yui, grails-2.0

是否可以自定义从 grails create view 命令生成的代码？例如，我可以使用 YUI 或 JQuery UI 库来生成视图代码吗？有没有样品？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:29:46.560

运行 Grails 命令`grails install-templates`将复制到`src/templates`所有其他 Grails 命令用来生成文件的模板文件中。然后，您可以随意修改它们。

此外，您可能希望查看一些脚手架插件，例如[Grails Twitter Bootstrap Scaffolding](http://grails-twitter-bootstrap.cloudfoundry.com/)或[Enhanced Scaffolding](https://github.com/robfletcher/grails-enhanced-scaffolding)。

# javascript - 读取 HTML 表单数据

> ID：13559033
> 
> 赞同：-1
> 
> 时间：2012-11-26T05:19:29.857
> 
> 标签：javascript, html, json

我的 html 表单将数据发送到服务器：

```
{ r1: [ '1', '2', '3' ],
  r2: [ 'Top', 'Greg', 'Andy' ],
  r3: [ 'validuser', 'invaliduser', 'validuser' ] } 
```

我知道这是 3 组（3 个数组）的组信息

```
1,Top,Validuser
2, greg, invaliduser
3, Andy , valid user 
```

如前所述，我如何制作/阅读以将它们作为数组？

表单是这样发送的，因为它基于 java 脚本模板，其中我有表单的模板：

```
 <td>   <input type="text" name="r1" id="mytext" size="9" value=${usernumber} /> </td> 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-26T05:22:46.910

假设您正在使用 POST，您将读取如下值：

$var_array[1]=$_POST["mytext"];

# python - 金字塔和遍历的问题

> ID：13559040
> 
> 赞同：2
> 
> 时间：2012-11-26T05:20:09.990
> 
> 标签：python, pyramid, traversal

当我试图将我的 url 指向时`http://localhost:6543/admin/product/50b0d01ce815af3c4167040e/edit`，它以某种方式显示 404 错误。我相信在某个地方，我的观点是错误的，但经过多次尝试，我似乎无法找出问题所在。

内容`resources.py`：

```
 from pyramid.security import Authenticated
    from pyramid.security import Allow
    from pyramid.response import Response

    class Root(object):
        __name__ = ''
        __parent__ = None

        def __init__(self, request):
            pass

        def __getitem__(self, key):

            if key == 'admin_login':
               return Admin()

            elif key == 'admin':
               return Admin()

            raise KeyError

    class Admin(object):

        __name__ = ''
        __parent__ = Root
        __acl__ = [
          (Allow, Authenticated, 'admin')
        ]

        def __init__(self):
            pass

        def __getitem__(self, key):

            if key == 'product':
               print ('admin: ' , key)
               return Product()

            if key == 'category':
               print ('admin: ' + key)
               return Category()

            raise KeyError

    class Product(object):

        __name__ = ''
        __parent__ = Admin
        __acl__ = [
          (Allow, Authenticated, 'admin')
        ]

        def __init__(self):
            pass

        def __getitem__(self, key):
            if key :
               return ProductName(key)

            print ('Approaching KeyError: ', key)
            raise KeyError

    class ProductName(object):

        __parent__ = Product
        __acl__ = [
            (Allow, Authenticated, 'admin')
        ]

        def __init__(self, _str):
            self.__name__ = _str;
            self.__parent__ = Settings;

            print ('ProductName: ' + _str)
            pass 
```

内容`views/admin.py`：

```
 @view_config(context='mycart:resources.Product', renderer='post.jinja2')
    @view_config(context='mycart:resources.ProductName', name='edit', renderer='admin/settings/commissions.jinja2', permission = 'admin')
        print (' in product edit? ')
        return {'msg': 'yay editing!'} 
```

* * *

我对源代码进行了一些更改。`http://localhost:6543/admin/product`绝对有效。但是，现在似乎`http://localhost:6543/admin/product/add`没有显示布局，也没有`http://localhost:6543/admin/product/YYYY/edit`显示布局。

内容`views/admin.py`：

```
 @view_config(context='mycart:resources.ProductName', name='edit',    renderer='admin/product/test.jinja2', permission = 'admin')
    def product_edit(context, request):
        print 'edit here?'
        return { 'msg': '<div class="alert alert-success">Product Edit!</div>'}

    @view_config(context='mycart:resources.ProductName', name='add', renderer='admin/product/test.jinja2', permission = 'admin')
    def product_add(context, request):
        print 'add in here?'
        return { 'msg': '<div class="alert alert-success">Product Add</div>'}

    @view_config(context='mycart:resources.ProductName',  name="add" , request_method="POST", renderer='admin/product/add.jinja2', permission = 'admin')
    def product_add_post(context, request):
    return { 'msg': '<div class="alert alert-success">Product Added Successfully!</div>'}

    @view_config(context='mycart:resources.Product', name='', renderer='admin/product/list.jinja2', permission = 'admin')
    def product_list(context, request):

        return { 'msg': '<div class="alert alert-success">Listing of products</div>'} 
```

内容`resources.py`：

```
 from pyramid.security import Authenticated
    from pyramid.security import Allow
    from pyramid.response import Response

    class Root(object):
        __name__ = __parent__ = None

        def __init__(self, request):
            pass

        def __getitem__(self, key):

            if key == 'admin_login':
                return Admin()

            elif key == 'admin':
                return Admin()

           raise KeyError

    class Admin(object):

        __name__ = ''
        __parent__ = Root
        __acl__ = [
            (Allow, Authenticated, 'admin')
        ]

        def __init__(self):
            pass

        def __getitem__(self, key):

            if key == 'product':
               return Product()

           #if key == 'category':
          #    return Category()

            raise KeyError

    class Product(object):
        __name__ = ''
        __parent__ = Admin
        __acl__ = [
            (Allow, Authenticated, 'admin')
        ]

        def __init__(self):
            print ('Product() self _name: ' , self.__name__, ' parent: ', self.__parent__)
            pass

        def __getitem__(self, key):
            print ('product: ' , key)

            if key:
                print ('key is true: ' , key)
                return ProductName(key)

            raise KeyError

     class ProductName(object):
        __name__ = ''
        __acl__ = [
           ( Allow, Authenticated, 'admin')
        ]

        def __init__(self, _key):
            p = Product()
            p.__name__ = _key
            p.__parent__ = self

            print ( 'ProductName() init: ', _key)
            print ( p.__parent__)
            print ( p.__name__)

            print ('\n\n')
            pass

        def __getitem__(self, _key):
            print ( 'ProductName() __get__item key: ', _key)

            if _key == 'edit':
                p = Product()
                p.__name__ = _key
                p.__parent__ = self
                print ('ProductName()->edit  parent: ')
                print ( p.__parent__)
                print ( p.__name__)
                print ('\n\n')
                return p

            raise KeyError 
```

在我的控制台中，当我将 url 指向时`http://localhost:6543/admin/product/add`，输出为：

```
 < mycart.resources.ProductName object at 0x10abb7990 >
    add 
```

但是，它显示 404 错误，所以我猜我`views/admin.py`的某个地方错了？我试过切换 view_config 的顺序，但无济于事：

```
 @view_config(context='mycart:resources.ProductName', name='add',  ... )
    ....

    @view_config(context='mycart:resources.ProductName', name='edit',  ... ) 
```

至于使用以下 url: 编辑时`http://localhost:6543/admin/vendor/50b0d01ce815af3c4167040e/edit`，控制台输出为：

```
 < mycart.resources.ProductName object at 0x10abb4bd0 >
    edit 
```

所以我知道，在我的上下文中，我应该使用 context='mycart:resources.ProductName'，并将名称设置为编辑。但是，它没有在控制台中显示我在`views/admin.py`.

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:07:55.077

如果您这样做`if key == 'somefing'`，`__getitem__`则表明您不需要纯粹的遍历。使用 URLdispatch 或混合方法。

添加：`localhost:6543/admin/product/add`显示未找到，因为您为 ProductName 注册了“添加”视图，但是从该路径中您获得了产品对象，该对象没有为其注册“添加”视图，这就是找不到 404 的原因

# ruby - 如何过滤一个 ruby 中的报价值

> ID：13559042
> 
> 赞同：0
> 
> 时间：2012-11-26T05:20:16.520
> 
> 标签：ruby, filtering

在支持 Ruby 应用程序的 HTML 中有一个 do 循环：

```
<% @list.each do |object| %>
    <option value="<%= object['name'] %>"><%= object['name'] %></option>
<% end %> 
```

希望能够过滤`<option value="<%= object['name'] %>">`项目以获取引号以保留最终的 HTML——有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:29:04.017

如果这是一个 Rails 应用程序，那么我建议使用其中一个内置帮助程序，如下所示：

```
options_for_select(@list.map{ |object| [object['name'], object['name']] }) 
```

如果没有，那么也许只是 gsub：

```
<option value="<%= object['name'].gsub("\"","") %>"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:19:37.160

在纯 Ruby 中，您可以使用[CGI::escapeHTML](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html#method-c-escapeHTML)，如下所示：

```
<% @list.each do |object| %>
    <% escaped_value = CGI::escapeHTML(object['name']) %>
    <option value="<%= escaped_value %>"><%= escaped_value %></option>
<% end %> 
```

您必须执行`require 'cgi'`, 才能使用它。

如果您使用的是 Rails，最好使用[options_for_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)，或者根据您的需要使用[select_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-select_tag)或[select ，如另一个答案所示](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)

# ruby - 在 Heroku 上运行的 Ruby 脚本上的“未知属性”

> ID：13559048
> 
> 赞同：1
> 
> 时间：2012-11-26T05:20:41.333
> 
> 标签：ruby, activerecord, heroku, migration, runtime-error

我有一个一次性脚本，用于将一些数据加载到我的应用程序的数据库中。

[这有点大，所以我在这里给出了要点： https](https://gist.github.com/097fb5a30ce84522077a) ://gist.github.com/097fb5a30ce84522077a

**当针对 DATABASE_URL 环境变量指定的本地机器（甚至远程实例）上的本地 Postgres 实例执行时**，编写的代码可以完美运行。****

 **但是，它绝对不适用于 Heroku。执行链接的 ruby​​ 脚本给了我这个错误：

```
~ $ ruby importprofiles.rb
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/attribute_assignment.rb:88:in `block in assign_attributes': unknown attribute: owner_id
(ActiveRecord::UnknownAttributeError) 
```

我的工作流程基本上是：

*   在 Heroku ( `heroku create mybot`)上创建应用程序
*   上推代码 ( `git commit -m 'initial commit' && git push heroku master`)
*   设置数据库 ( `heroku run rake db:setup`)
*   重启实例 ( `heroku restart`)
*   在 heroku 实例上调用 Bash shell ( `heroku run bash`)
*   使用 Curl 从服务器上拉下我的生产 profile.ini ( `curl http://blah.com/profiles.ini > profiles.ini`)
*   运行脚本 ( `ruby importprofiles.rb`)

为什么我在 Heroku 上收到在本地工作的代码的未知属性错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:05:17.160

您`schema.rb`与您的真实数据库不匹配，或者您从未尝试过使用`Profile`所有者做任何事情。你有这个`schema.rb`：

```
create_table "profiles", :force => true do |t|
  t.string   "title",   :limit => 100
  t.integer  "owner"
  t.datetime "timeset"
  t.string   "whoset"
end 
```

`t.integer "owner"`定义了表中命名的列，`owner`但`profiles`您需要一`owner_id`列。

也许您做了一个手册`alter table`来重命名您的开发环境中的列。或者，也许这是您第一次走这条代码路径。

在任何情况下，您都需要迁移以重命名`profiles.owner`为`profiles.owner_id`. 或者，由于您刚刚开始，您可以手动编辑`schema.rb`以重命名列并重建您的 Heroku 数据库。`schema.rb`如果您没有任何数据需要担心，我会手动修补并重新开始。**

# php - 如何在发送 $_POST (PHP) 的表单中找到复选框值

> ID：13559049
> 
> 赞同：0
> 
> 时间：2012-11-26T05:20:44.993
> 
> 标签：php, forms, post

我有这个表格：

```
<form action="../index_success.php" method="post" id="sendEmail" class="email">
            <h3 class="register2">Newsletter Signup:</h3>
            <ul class="forms email">
                <li class="name">
                    <label for="yourName">Name: </label>
                    <input type="text" name="yourName" class="info" id="yourName" value="<?php echo $_POST['yourName']; ?>" /><br />
                </li>
                <li class="city"><label for="yourCity">City: </label>
                    <input type="text" name="yourCity" class="info" id="yourCity" value="<?php echo $_POST['yourCity']; ?>" /><br />
                </li>
                //This is where I need help with the check box code
                <li class="classes"><label for="classInterest">Interested in classes?: </label>
                    <input type="checkbox" name="classInterest" class="info" id="classInterest" value="Yes" /><br />
                </li>
                <li class="email">
                    <label for="emailFrom">Email: </label>
                    <input type="text" name="emailFrom" class="info" id="emailFrom" value="<?php echo $_POST['emailFrom']; ?>" />
                     <?php if(isset($emailFromError)) echo '<span class="error">'.$emailFromError.'</span>';

                     ?>
                </li>
                <li class="buttons email">
                     <button type="submit" id="submit">Send</button>
                     <input type="hidden" name="submitted" id="submitted" value="true" />
                </li>
            </ul>
        </form> 
```

这是通过电子邮件发送给用户的。我不知道如何添加上面的复选框，因此如果选中该框，用户会看到“是”：

```
<?php 
$mailTo = 'xxx@xxx.com'; // This is the hardcoded Recipient Address 
$mailSubject = 'Subject'; // This is the hardcoded Subject
$mailFrom = $_POST['emailFrom']; 
$yourName = $_POST['yourName']; 
$yourCity = $_POST['yourCity'];
$classInterest = $_POST['classInterest'];  //This is the code for the checkbox

$mailHeader = "From: {$mailFrom}"; 
$mailBody = "Name = {$yourName} City = {$yourCity} Class interest = {$classInterest}";

mail( $mailTo , $mailSubject , $mailBody , $mailHeader ); 
```

基本上，我需要的是（psudocode）：

```
if ($classInterest == "yes") {
   $classInterest = "Interested in Classes in ".$yourCity;
}
else {
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:27:06.513

尝试这个：

```
$classInterest = (isset($_POST['classInterest']) && $_POST['classInterest'] == 'Yes') ? "Interested in Classes in " . $yourCity : ''; 
```

**编辑**

[http://blog.gerv.net/2006/10/firefox_reload_behaviour/](http://blog.gerv.net/2006/10/firefox_reload_behaviour/)阅读 Jason 的文章和第一条评论

# java - 如何知道半角或全角字符？

> ID：13559050
> 
> 赞同：4
> 
> 时间：2012-11-26T05:20:55.353
> 
> 标签：java, width, character

我想知道字符串中包含的字符是半角还是全角。

所以我这样测试过：

```
 /* Checking typing password is valid or not.
 * If length of typing password is less than 6 or
 * is greater than 15 or password is composed by full-width character at least one,
 * it will return false.
 * If it is valid, it will return true.
 * @param cmdl
 * @param oldPassword
 * @return
 */
public boolean isValidNewPassword(String password) {

    if ((password.length() < 6)
            || (password.length() > 15) || (isContainFullWidth(password))) {
        return false;
    }

    return true;
}

/**
 * Checking full-width character is included in string.
 * If full-width character is included in string,
 * it will return true.
 * If is not, it will return false.
 * @param cmdl
 * @return
 */
public boolean isContainFullWidth(String cmdl) {
    boolean isFullWidth = false;
    for (char c : cmdl.toCharArray()) {
        if(!isHalfWidth(c)) {
            isFullWidth = true;
            break;
        }
    }

    return isFullWidth;
}

/**
 * Checking character is half-width or not.
 * Unicode value of half-width range:
 * '\u0000' - '\u00FF'
 * '\uFF61' - '\uFFDC'
 * '\uFFE8' - '\uFFEE'
 * If unicode value of character is within this range,
 * it will be half-width character.
 * @param c
 * @return
 */
public boolean isHalfWidth(char c)
{
    return '\u0000' <= c && c <= '\u00FF'
        || '\uFF61' <= c && c <= '\uFFDC'
        || '\uFFE8' <= c && c <= '\uFFEE' ;
} 
```

但并非所有全角和半角字符都可以。

那么，我可以知道您对这个问题有什么建议吗？

半角和全角用于亚洲语言，例如日语

写日文字符时有全角和半角两种类型。

半角字符=ｱﾃﾞﾁｬｴｳｨｵﾌﾟ</p>

全角字符 = asdファsヂオppp

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-19T04:27:41.223

使用数字，您可以使用此代码

```
 /**
 * Full-angle string conversion half-corner string
 * 1, half-width characters are starting from 33 to 126 end
 * 2, the full-width character corresponding to the half-width character is from 65281 start to 65374 end
 * 3, the half corner of the space is 32\. The corresponding Full-width space is 12288
 * The relationship between Half-width and Full-width is obvious, except that the character offset is 65248 (65281-33 = 65248).
 *
 * @param fullWidthStr Non-empty full-width string
 * @return Half-angle string
 */
public String halfWidth2FullWidth(String fullWidthStr) {
    if (null == fullWidthStr || fullWidthStr.length() <= 0) {
        return "";
    }
    char[] arr = fullWidthStr.toCharArray();
    for (int i = 0; i < arr.length; ++i) {
        int charValue = (int) arr[i];
        if (charValue >= 33 && charValue <= 126) {
            arr[i] = (char) (charValue + 65248);
        } else if (charValue == 32) {
            arr[i] = (char) 12288;
        }
    }
    return new String(arr);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-27T05:47:09.380

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-28T02:53:20.590

检查全尺寸字符

```
isFullSizeCharacter(value) {
    for (let i = 0; i < value?.length; i++) {
       const code = value.charCodeAt(i);
       if ((code >= 0x0020 && code <= 0x1fff) || (code >= 0xff61 && code <= 0xff9f)) {
          return false;
       }
    }
    return !!(value && 'string' === typeof value) && true;
} 
```

或者

```
preg_match('/^[^ -~｡-ﾟ\x00-\x1f\t]+$/u', $value) 
```

或者 [如何检查字符串在java中是否有全角字符](https://stackoverflow.com/questions/29508932/how-check-if-string-has-full-width-character-in-java)

# python - python中的抽象函数而不使用lambda

> ID：13559052
> 
> 赞同：3
> 
> 时间：2012-11-26T05:21:07.680
> 
> 标签：python, abstraction

我只是有一个问题。如何在没有 lambda 的情况下使用抽象函数？

说我有两个清单

```
a = [1,2,3,4,5]
b = [2,4,6] 
```

如果我想打印所有出现在 A 和 B 中的元素，

与 lambda：

```
def f():
  print reduce (list.__add__ , map (lambda x: filter (lambda y: x == y, b), a)) 
```

没有 lambda 怎么办？

我的意思是我只是使用辅助函数而不是 lambda

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T05:22:29.050

你如何得到两组的交集？如果你使用`set`数据类型，你可以只使用`&`联合：

```
print list(set(a) & set(b)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:23:55.837

```
a = [1,2,3,4,5]
b = [2,4,6]
ab = []

for i in a:
  if i in b:
    ab.append(i)
print(ab) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:26:05.000

如果有**重复**的风险，我会使用 Counter ：

```
>>> a = [1, 2, 2, 3]
>>> b = [2, 2, 3]
>>> from collections import Counter
>>> Counter(a) & Counter(b)
Counter({2: 2, 3: 1})
>>>

>>> list_ = []
>>> c = Counter(a) & Counter(b)
>>> for num, count in c.items():
...     list_.extend([num] * count)
...
>>> list_
[2, 2, 3] 
```

# javascript - jQuery .append javascript 不起作用

> ID：13559056
> 
> 赞同：-2
> 
> 时间：2012-11-26T05:21:22.667
> 
> 标签：javascript, jquery, partial-views

html的片段

```
<div id="list">
    <div id="item">
       <script type="text/javascript" src="http://localhost/items.js?id=@item.Id&time=today"></script>
     </div>
</div> 
```

当用户向下滚动时，我将更多项目（`div id="item"`）添加到`div "list"`. 我得到更多的项目使用

```
$.get("/test/items/",
     function (data) {
        if (data != '') {
            $('#list').append(data);
        }
     }
) 
```

返回的数据包含 javascript，看起来像这样。

```
<div id="item">
       <script type="text/javascript" src="http://localhost/items.js?id=@item.Id&time=today"></script>
</div> 
```

但是在做追加之后我没有看到 javascript 做了任何事情。如前所述，在原始 html 中工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:24:22.693

试试这个

```
$.get("/test/items/",
     function (data) {
        if (data != '') {
            $('#list').append(data);
         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:33:19.447

目前尚不清楚您要在这里做什么。您正在请求 get `HTML`，并且在该 html 中是一个脚本参考。您是否尝试加载脚本？

如果是这样，您应该让您的服务器仅返回*url*，而不是整个 HTML。然后，您可以使用 jQuery 获取脚本并执行它。

```
// This GET should return, "http://localhost/items.js?id=@item.Id&time=today"
$.get("/test/items/",
  function (data) {
    $.getScript(data);
  } 
```

该`getScript()`函数只是 AJAX 调用的简写，您可以为成功、失败等提供回调。

# tfs - 如何在 TFS 构建服务器中指定测试 dll？

> ID：13559059
> 
> 赞同：0
> 
> 时间：2012-11-26T05:21:46.510
> 
> 标签：tfs, tfsbuild

TFS Build Server 的默认行为是将所有输出、dll、exe 复制到文件夹`C:\Builds\{Build_Agent_Number}\{Team_Project_Name}\{Build_Controller_Name}\Binaries`。我已经自定义了构建过程，不是复制到那个文件夹，而是复制到另一个文件夹，比如说`C:\Builds\{Build_Agent_Number}\{Team_Project_Name}\{Build_Controller_Name}\Sources\Some_Folder\Some_Sub_Folder`.

构建过程按预期工作，但问题是所有测试都没有运行。我调试了构建过程模板，发现它找不到测试dll。我想知道如何在 testsettings 文件或构建过程模板中指定测试 dll 位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:18:12.700

您可以在 Build Process Template 工作流中的 Find Test Assemblies 活动中设置它。它位于过程中间的下方。

1.  导航到 Run MSTest for Test Assemblies 中的 Find Test Assemblies 活动。![查找测试程序集](../Images/04952dab6f325b1f8035d163ac3549b7.png)
2.  先打开属性窗口，然后将MatchPattern`F4`更改为包含要测试的程序集的根路径。例如，`String.Format("{0}\{1}", MyCustomAssembliesPath, testAssembly.AssemblyFileSpec)`![属性窗口](../Images/d671d194464afccac1a6b9659adb8107.png)

# php - file_get_contents() 无法获取数据？

> ID：13559060
> 
> 赞同：1
> 
> 时间：2012-11-26T05:21:50.613
> 
> 标签：php, json

我搜索了几个类似的帖子，但找不到答案。我可能错过了一些小东西。

我正在尝试从 URL 读取 JSON 内容，如我的代码所示：

```
$uri = "http://worldweatheronline.com/feed/weather.ashx?q=schruns,austria&format=json&num_of_days=5&key=8f2d1ea151085304102710";
echo "URI: [$uri] <br/>";

$file = file_get_contents($uri);
$error = error_get_last();
echo $error['message']; 
```

如果我在浏览器中打开 URL，我可以看到它的 JSON 内容。但是上面提到的代码不起作用。`$file`的值为`false`。错误信息是： `file_get_contents(http://worldweatheronline.com/feed/weather.ashx?q=schruns,austria&format=json&num_of_days=5&key=8f2d1ea151085304102710) [function.file-get-contents]: failed to open stream: No such file or directory.`

有什么建议么？注意：如果重要，我`allow_url_fopen`的设置为。`1`

编辑：这是整个 PHP 文件。 [http://pastebin.com/zCKEP9kG](http://pastebin.com/zCKEP9kG)

此外，代码中有一个 fopen() 可以很好地打开一个 http 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:29:33.177

我看不出代码有什么问题，伙计——它在我的设置上本地运行良好，我可以获取文件，并且可以用它做任何我喜欢的事情。

尝试在不同的主机上运行它 - 可能是你的 php.ini 搞砸了，脚本也搞砸了。或者你可能对源的其他地方有问题。可能是如果你共享了整个文件源，或者至少是更大的一部分..

干杯!

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T05:26:00.303

检查此代码，我认为您现在可以继续进行此操作-

```
<?php 
$json_url = "http://worldweatheronline.com/feed/weather.ashx?q=schruns,austria&format=json&num_of_days=5&key=8f2d1ea151085304102710";
$json = file_get_contents($json_url);
$data = json_decode($json, TRUE);
echo "<pre>";
print_r($data);
echo "</pre>";
?> 
```

@ascii-石灰

![在此处输入图像描述](../Images/fa0d661929d556bc488fd990a706e9dc.png)

它为@ascii-lime--

检查这个（编辑#2）

![编辑 2](../Images/6f486cfd5f37ed96ce5cc2aff12193ab.png)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-26T05:28:42.023

尝试这个 ：

```
 <?php
        header('Content-Type: application/json');
        $json = file_get_contents('http://worldweatheronline.com/feed/weather.ashx?q=schruns,austria&format=json&num_of_days=5&key=8f2d1ea151085304102710');
        echo $json;
    ?> 
```

# emacs - Emacs：如何保持很长的换行的缩进级别

> ID：13559061
> 
> 赞同：31
> 
> 时间：2012-11-26T05:21:53.277
> 
> 标签：emacs, indentation, word-wrap

如果文件中的行太长而无法在屏幕上显示，我们可以使用自动换行。现在长行被分割成在屏幕上可见的块。

通常代码是结构化的，缩进用于提高可读性。如果将一行换成两行（或多行），则只有第一行有右缩进，其他行从行首开始。有没有办法**让所有的换行保持相同的缩进级别**（**或更一般地不同的缩进级别**）？

我已经搜索了很长时间，但仍然找不到解决方案。这个问题类似于vim的帖子，但我没有找到emacs的帖子或答案。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-26T08:37:46.147

可以通过[ELPA](http://elpa.gnu.org)打包系统安装的包[adaptive-wrap](http://elpa.gnu.org/packages/adaptive-wrap.html)应该可以满足您的需求。

安装软件包后，只需运行以下命令：

*   `M-x``visual-line-mode``RET`（换行长线）
*   `M-x``adaptive-wrap-prefix-mode``RET`（使换行很好地缩进）

* * *

我的文件中还有以下代码段可以`init.el`自动激活：`adaptive-wrap-prefix-mode``visual-line-mode`

```
(when (fboundp 'adaptive-wrap-prefix-mode)
  (defun my-activate-adaptive-wrap-prefix-mode ()
    "Toggle `visual-line-mode' and `adaptive-wrap-prefix-mode' simultaneously."
    (adaptive-wrap-prefix-mode (if visual-line-mode 1 -1)))
  (add-hook 'visual-line-mode-hook 'my-activate-adaptive-wrap-prefix-mode)) 
```

# c# - 如何在日历弹出时显示服务器日期

> ID：13559062
> 
> 赞同：0
> 
> 时间：2012-11-26T05:21:55.603
> 
> 标签：c#, asp.net, .net, web-applications, ajaxcontroltoolkit

```
<asp:TextBox ID="txtBirthDate" AutoCompleteType="Disabled" onkeydown="return txtBirthDate_OnKeyDown();"
                    class="csstextbox" runat="server" Width="175px"></asp:TextBox>
                <asp:CalendarExtender ID="calendarBirthDate" OnClientDateSelectionChanged="calendarBirthDate_DateSelectionChanged"
                    runat="server" Enabled="True" 
                    TargetControlID="txtBirthDate" Format="dd-MMM-yyyy">
                </asp:CalendarExtender> 
```

![在此处输入图像描述](../Images/604a5da2eb868805528ff5c8edc18b28.png)

在日历弹出客户端日期中显示我必须显示服务器日期（这是客户端日期“今天：2012 年 11 月 13 日”）

# git - 如何在不同的项目中保持两个 git subdirs 同步？

> ID：13559063
> 
> 赞同：2
> 
> 时间：2012-11-26T05:22:11.830
> 
> 标签：git, synchronization

我在两个不同的项目中有一个公共目录`.h`和文件。`.cpp`目前我正在手动使两者保持同步。我不想获取目录并创建一个库，因为我不希望我的用户有依赖关系——我只想让两个子目录及其文件保持同步。有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:55:01.727

两种常见的解决方案是：

*   [git 子模块](http://git-scm.com/book/en/Git-Tools-Submodules)
*   [git subtree 合并](http://git-scm.com/book/ch6-7.html)（现在使用[git-subtree.sh 脚本](https://github.com/git/git/blob/master/contrib/subtree/git-subtree.txt)更容易）

这个想法是将您的公共目录作为上游独立存储库，并通过以下方式更新您在不同项目中的目录：

*   更新您的子模块
*   `git subtree pull -P <prefix> <repository> <refspec...>`

考虑[到子模块可能很棘手](https://stackoverflow.com/questions/12078365/how-exactly-does-git-submodule-work/12078816#12078816)，在您的情况下，我会推荐该`git-subtree`脚本。

# javascript - 将颜色框添加到具有 url 内容的动态创建的项目

> ID：13559065
> 
> 赞同：0
> 
> 时间：2012-11-26T05:22:15.197
> 
> 标签：javascript, jquery, colorbox

我正在尝试向动态创建的对象添加一个颜色框，它在第一次单击时起作用，但在第二次单击后不会打开，我不知道该怎么做。我想知道我是否没有以某种方式关闭颜色框，或者它是否挂在背景中......

```
 $(".login").live('click', function(){
    $.fn.colorbox({href:"http://ww.website/Login.html", open:true});
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:04:52.623

尝试这个：

```
$(".login").live('click', function(){
   $.colorbox({ href:'http://threadless.com', iframe:true, width:"80%", height:"80%" });
}); 
```

或者

```
content.on('click', '.login', function(){
   $.colorbox({ href:'http://threadless.com', iframe:true, width:"80%", height:"80%" });
}); 
```

演示：http: [//jsfiddle.net/F5jGQ/](http://jsfiddle.net/F5jGQ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:26:11.800

我认为你应该打电话：

```
$(".login").live('click', function(){
     $.colorbox({href:"http://ww.website/Login.html", open:true});
}); 
```

# python - 使用 Python 的 Google App Engine 中的图像属性？

> ID：13559066
> 
> 赞同：1
> 
> 时间：2012-11-26T05:22:17.090
> 
> 标签：python, google-app-engine, web-applications

我有一个卡片类。

```
class Card(db.Model):
    name = db.StringProperty(required = True)
    image = '''insert property here'''
    description = db.TextProperty(required = True)
    submitted = db.DateTimeProperty(auto_now_add = True) 
```

如何将图像添加到课程中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:26:26.653

对于二进制数据，您可以使用 a （请参阅[此处](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#Blob)`BlobProperty`的文档），使您的代码：

```
class Card(db.Model):
    name = db.StringProperty(required = True)
    image = db.BlobProperty()
    description = db.TextProperty(required = True)
    submitted = db.DateTimeProperty(auto_now_add = True) 
```

然后，您可以按如下方式分配给您的属性（假设您的用户表单中的图像参数是`image`；如果不使用表单，您可以像对待其他二进制数据一样对待图像）：

```
my_card = Card()
# Other properties defined here...
my_image = self.request.get('image')
card.image = db.Blob(my_image)
my_card.put() 
```

# salesforce - Salesforce：更新托管对象的自动编号字段...

> ID：13559071
> 
> 赞同：0
> 
> 时间：2012-11-26T05:22:31.550
> 
> 标签：salesforce, force.com

我想知道我们是否可以更新自动编号字段。当我尝试使用开发控制台系统更新时说：“字段不可写”

# 在我们的支持产品（托管包）中，我需要从特定数字（例如 100）更新/启动自动编号字段。

# 

我正在考虑创建一个文本字段并模仿那个自动编号字段。但我不知道它会在多大程度上妨碍该软件包的现有功能。

任何想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T22:31:22.827

您无法在 Salesforce 中为自动编号字段设置新值。但是您可以将此自定义字段用于数字类型，它将使用触发器自动填充。在触发器中，您可以实现任何逻辑来检查字段的唯一性并检查其所有条件。如果您想要手动输入该字段的值，您可以使用验证规则来检查唯一性。

# r - 将连续数值转换为由区间定义的离散类别

> ID：13559076
> 
> 赞同：24
> 
> 时间：2012-11-26T05:22:57.070
> 
> 标签：r, r-faq

我有一个带有连续数字变量的数据框，以月为单位的年龄（age_mnths）。我想创建一个新的离散变量，其年龄类别基于年龄间隔。

```
# Some example data
rota2 <- data.frame(age_mnth = 1:170) 
```

我创建了`ifelse`基于程序（如下），但我相信有可能获得更优雅的解决方案。

```
rota2$age_gr<-ifelse(rota2$age_mnth < 6, rr2 <- "0-5 mnths",

   ifelse(rota2$age_mnth > 5 & rota2$age_mnth < 12, rr2 <- "6-11 mnths",

          ifelse(rota2$age_mnth > 11 & rota2$age_mnth < 24, rr2 <- "12-23 mnths",

                 ifelse(rota2$age_mnth > 23 & rota2$age_mnth < 60, rr2 <- "24-59 mnths",

                        ifelse(rota2$age_mnth > 59 & rota2$age_mnth < 167, rr2 <- "5-14 yrs",

                              rr2 <- "adult"))))) 
```

我知道有`cut`功能，但我无法处理它以达到离散/分类的目的。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-26T05:48:02.540

如果有一个你不想使用的原因，`cut`那么我不明白为什么。 `cut`可以很好地完成您想做的事情

```
# Some example data
rota2 <- data.frame(age_mnth = 1:170)
# Your way of doing things to compare against
rota2$age_gr<-ifelse(rota2$age_mnth<6,rr2<-"0-5 mnths",
                     ifelse(rota2$age_mnth>5&rota2$age_mnth<12,rr2<-"6-11 mnths",
                            ifelse(rota2$age_mnth>11&rota2$age_mnth<24,rr2<-"12-23 mnths",
                                   ifelse(rota2$age_mnth>23&rota2$age_mnth<60,rr2<-"24-59 mnths",
                                          ifelse(rota2$age_mnth>59&rota2$age_mnth<167,rr2<-"5-14 yrs",
                                                 rr2<-"adult")))))

# Using cut
rota2$age_grcut <- cut(rota2$age_mnth, 
                       breaks = c(-Inf, 6, 12, 24, 60, 167, Inf), 
                       labels = c("0-5 mnths", "6-11 mnths", "12-23 mnths", "24-59 mnths", "5-14 yrs", "adult"), 
                       right = FALSE) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-26T05:49:13.103

```
rota2$age_gr<-c( "0-5 mnths", "6-11 mnths", "12-23 mnths", "24-59 mnths", "5-14 yrs",
                 "adult")[
           findInterval(rota2$age_mnth , c(-Inf, 5.5, 11.5, 23.5, 59.5, 166.5, Inf) ) ] 
```

# iphone - 导航控制器如何工作 - IOS？

> ID：13559078
> 
> 赞同：0
> 
> 时间：2012-11-26T05:22:58.593
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uinavigationcontroller

我一直在开发一个 IOS 应用程序。我在与导航控制器相关的工作时遇到了疑问。这是我的问题。当我想要一个视图出现时，我将所有视图推入导航控制器。我将每个页面的标题设置为..

```
self.tiltle = @"View1"; // Something like that. 
```

我猜导航控制器是一样的，我正在加载的视图只会有所不同，如果我是对的，为什么每次都没有为每个页面加载相同的标题，（如果我没有像上面那样设置标题，那么新的标题是空的查看已加载）。如果我错了...请指出。

谢谢你的宝贵建议。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:29:45.310

每次将 a 推`UIViewController`到 a`UINavigationController`时，导航控制器都会读取`UIViewController`'s`self.title`或 the`self.navigationItem.title`并将其显示在其导航栏上。如果您想为所有子视图控制器设置相同的标题，那么您必须`self.title`在每个子视图控制器上进行设置。

# php - 在 PHP 循环中解析 MySQL 时间戳。如何？

> ID：13559080
> 
> 赞同：-4
> 
> 时间：2012-11-26T05:22:59.720
> 
> 标签：php, mysql

这是我的数据库表的示例。

![在此处输入图像描述](../Images/ace80a9c145f5a46499b05bbb42924f2.png)

我试图让 PHP 从这个屏幕截图中生成一些 HTML 代码，如下所示：

**2012**

**2012 年 12 月**

03 条目标题 7

02条目标题6

01 条目标题 5

**2012 年 11 月**

04条目标题4

03 条目标题 3

02条目标题2

01 条目标题 1

**2011**

...等等。

我只是迷失了如何让 PHP 知道我遇到了不同的年份和/或月份并创建了我上面描述的格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:04:10.527

您可以先使用 unix 时间戳开始，然后让 php 将它们转换为可读格式。这样，您就可以设置只要 date("Y", $timestamp) 具有任何值就运行的循环。

检查[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)以获取更多参考和有关语法的详细信息。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:15:56.820

您可以在 MySQL 中选择年份和月份：

```
 SELECT ent_title, YEAR(ent_timestamp) AS y, MONTH(ent_timestamp) AS m FROM my_table ORDER BY ent_timestamp DESC 
```

然后循环检查上个月的结果和 PHP 中的 yead 值。

# facebook - Cassandra 服务服务器硬件规格

> ID：13559082
> 
> 赞同：2
> 
> 时间：2012-11-26T05:23:18.827
> 
> 标签：facebook, cassandra

我想了解有关 Cassandra 的 H/W 和 memTable 大小。
我读了关于 Cassandra 的文章。
文章的标题是“一种去中心化的结构化存储系统”。
在这篇文章中，FaceBook 使用 Cassandra 在一个 150 个节点的集群上存储了大约 +50TB 的数据，它在 2008 年为 1 亿人运行。
但我想了解详细的硬件规范。

例如：

```
1\. we use SMP processor for each node. (Intel dual-core server : frequency --> 1.5GHz)
2\. we use 4G RAM size per node.
3\. we use 128Gbyte SSD Hard per node.
4\. we use 1G switching ethernet.
5\. we use (which) L4 switch for Gateway Load-balancing. 
```

和

*   我想知道当您为任何应用程序操作 Cassandra 时，您在 FaceBook 中使用了多少 memTable 大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T10:52:19.913

Cassandra 与硬件无关。因此，您可以在商品硬件上运行它。但是，如果您计划最大化吞吐量，您的配置可能会更好。

*   将 SSD 用于 CommitLog
*   将 RAID 0 用于 SSTables
*   为缓存占用更多​​ RAM。16、32 和更多 GB。
*   1G交换机可能就够了。
*   当然，Cassandra 的扩展性最好（线性可扩展）！使用更多节点和良好的驱动程序。

每个性能考虑都应该从真实场景开始。启动并配置您的系统。

PS：[文档中的硬件要求](http://wiki.apache.org/cassandra/CassandraHardware)

# countdown - 如何为 Acrobat 创建 30 分钟倒计时脚本？

> ID：13559083
> 
> 赞同：1
> 
> 时间：2012-11-26T05:23:19.363
> 
> 标签：countdown, acrobat

有人可以给我看 Acrobat 的倒计时脚本吗？（例如，从打开的文档开始 30 分钟，因为我在 PDF 中附加了一个自动关闭脚本）。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-22T19:46:43.403

**这将为 Acrobat 中的 javascript 设置一个计时器**

```
if(CurrentTimer)
   app.clearInterval(CurrentTimer);
var CurrentTimer = null;
var timerHits = 0;

function TimeIsUp()
{
console.println("Timer Hit " + timerHits++);
}

CurrentTimer = app.setInterval("TimeIsUp();",1000) 
```

# python - 获取 Google App Engine 平台服务器文件夹中的静态文件列表

> ID：13559087
> 
> 赞同：5
> 
> 时间：2012-11-26T05:23:54.233
> 
> 标签：python, file, google-app-engine

我正在使用 Google App Engine 托管我的网站，该网站主要是静态页面。但是有一部分我需要从服务器中的文件夹中获取图像列表，并使用 JavaScript 将这些图像动态添加到页面中。

我让它在我的本地机器上使用`os.walk("static/images/temp/1.jpg")`python 脚本工作。但是在部署站点后，它不起作用。python脚本返回空。是否应该有不同的方法来获取 Google App Engine 中的静态文件列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T06:15:23.827

主要问题是静态目录中的文件（我假设您正在使用它来提供文件）存储在与您的代码不同的位置，因此不在您的代码的文件目录中。

您可以做的一件事（有关类似问题，请参见[此处](https://stackoverflow.com/questions/2630205/read-a-file-on-app-engine-with-python)）是在您**未**`static_dir`在`app.yaml`. 然后它将与您的应用程序代码一起使用，您可以使用`os`. 例如，下面是一些非常简单的代码，它遍历`upload_stuff`根目录中的文件：

```
class MainPage(webapp2.RequestHandler):
  def get(self):
    path = os.path.join(os.path.dirname(__file__), 'upload_stuff')
    for filename in os.listdir(path):
      # Here you can do what you need with the files
      self.response.out.write(filename) 
```

您可以对其进行调整以使其工作，但基本思想是您需要将文件与代码以及静态形式一起存储。

# sql - 删除除最近的 1 行之外的所有行

> ID：13559092
> 
> 赞同：3
> 
> 时间：2012-11-26T05:24:18.493
> 
> 标签：sql, sql-server, sql-server-ce-3.5

想要从表中删除所有行，除了最近的 1 行。

此查询适用于 SQL Server 2008 标准版：

```
DELETE S1 
FROM StateLogs S1, StateLogs S2 
WHERE S1.NodeId = S2.NodeId AND S1.NodeId = {0} AND S1.Modified < S2.Modified 
```

但在 SQL Server Compact Edition 3.5 上失败

> *解析查询时出错。
> [令牌行号= 1，令牌行偏移量= 11，错误令牌= FROM]*

紧凑版的等价物是什么？

**编辑**

表设计[http://pastebin.com/Akwpypkm](http://pastebin.com/Akwpypkm)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T05:34:45.907

~~您的删除语句似乎有语法错误，请尝试将查询从~~

```
DELETE S1 FROM ... 
```

到

```
DELETE FROM ... 
```

**更新：**

尝试使用以下语句代替您的语句：

```
DELETE FROM StateLogs WHERE Id NOT IN (SELECT TOP (1) Id FROM StateLogs ORDER BY Modified DESC) 
```

Also just a heads up that you may have problems with insert/update operations against the table based on the schema you've provided because your primary key is larger than the maximum: [http://msdn.microsoft.com/en-us/library/ms191241(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms191241%28v=sql.105%29.aspx)

This could pretty cause mysterious runtime failures in your application.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:33:12.420

尝试这样的事情，

```
DELETE  a
FROM    [StateLogs] a
        LEFT JOIN
        (   
            SELECT NodeID, MAX([Modified]) maxDate
            FROM [StateLogs]
            GROUP BY NodeID
        ) b ON a.nodeID = b.NodeID AND
                a.[Modified] = b.maxDate
WHERE   b.NodeID IS NULL 
```

**更新 1**

```
DELETE  
FROM    [StateLogs] 
WHERE   NodeID NOT IN
        (
            SELECT NodeID
            FROM
                    (   
                        SELECT NodeID, MAX([Modified]) maxDate
                        FROM [StateLogs]
                        GROUP BY NodeID
                    ) s
        ) 
```

# c++ - 使用 Microsoft 应用程序的互斥锁示例

> ID：13559096
> 
> 赞同：0
> 
> 时间：2012-11-26T05:24:49.327
> 
> 标签：c++, visual-c++, mfc

非常不满的是，我在电话采访中被问到有关同步对象互斥锁的问题。我被要求命名一个使用互斥锁作为同步对象的微软（称为“著名”）应用程序。有没有办法知道一个应用程序是什么同步对象。使用..如果有人知道，请告诉我..谢谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:22:07.827

是的，您可以使用[Process Explorer](http://technet.microsoft.com/en-gb/sysinternals/bb896653.aspx)查看应用程序使用了哪些同步对象。单击您感兴趣的 Process，然后在**View->Lower Pane View**菜单中选择**Handles**。互斥体在**Type**下列为**Mutant**。

# linux - G-WAN 支持哪些 Linux 内核和 Linux 发行版？

> ID：13559098
> 
> 赞同：0
> 
> 时间：2012-11-26T05:25:00.893
> 
> 标签：linux, software-distribution, g-wan

我可以在用户手册的开头找到一个声明：

> Linux 版本 3
> （使用 Debian 和 CentOS 32 位和 64 位测试）

我正在使用 Ubuntu 12.10 64 位进行开发。
到目前为止，我没有发现它有任何问题，但我仍然对它没有信心，因为gwan没有关于这方面的官方声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:44:13.870

至少 G-WAN v3.3 应该与 2009 年开始开发时使用的 Linux 发行版（Ubuntu 8+）兼容。

G-WAN v3.10+ 添加了下面详述的重要增强功能。

有许多不同的 Linux 发行版，但大多数都使用通用的“根”发行版，最常用的是`Debian`（`Ubuntu`使用 Debian）和`Red Hat`（`CentOS`使用 Red Hat），这两种发行版都在开发过程中进行了测试。

但是其他发行版依赖于相同的 Linux 内核，只有在文件系统等“扩展”方面才有可能有所不同。而且，由于用户的反馈，G-WAN v3.10+ 已修复非标准文件系统问题（通过处理那些忽略系统标志的 FS）。

出于同样的原因，旧`GBLIC`版本也可能对 G-WAN v3.3 造成问题，但 G-WAN v3.10+ 重新实现了那些可能造成问题的函数调用，因此已有 10 年历史的 Linux 发行版现在应该可以正常工作了。

这就是为什么支持 G-WAN 的 Linux 发行版列表非常大的原因——可能太大以至于不值得发布。

现在，这个`kernel`问题更有趣了，不是因为它是一个阻塞问题（在 G-WAN v3.10+ 中，自 Linux 内核 2.5.8 以来，已经为可能丢失的系统调用编写了包装器），而是因为在非常旧的 Linux 内核。

在那些旧内核中，G-WAN 不能像多核系统一样受益，因为操作系统内核本身不支持多核。但由于 G-WAN 是快速服务器[，即使使用单线程](http://www.rootusers.com/web-server-performance-benchmark/)，G-WAN 也不会成为瓶颈。

兼容性是一个增量过程，因为新版本的系统部件（操作系统内核、GLIBC、其他系统工具和库等）并不总是向后兼容（请记住最近的 Linux 链接器问题）。

在这方面，用户反馈规则——而G-WAN最近在这件事上做出了巨大的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T00:55:29.843

我制作了一个 bash 脚本来安装大部分（*如果不是*）所有必需的包和依赖项，这些包和依赖项用于运行具有最新 G-WAN 版本的 90 多个 G-WAN servlet（*在本文发布时（03-16- 2016）：最后一个公共 G-WAN 版本#7.12.6 64-bit*）。

你可以得到这个安装脚本（*它也下载和安装 G-WAN 本身*）：[这里](http://www.as2.com/linux/tools/G-WAN_full-install.tar.bz2)

然后，使用以下命令（*在终端会话中 - 桌面或服务器风格*）：

```
cd /the-folder-where-you've-downloaded-the-script
tar -xjf G-WAN_full-install.tar.bz2
sudo ./G-WAN_full-install 
```

该脚本（*使用英语（默认语言）、法语、德语和西班牙语对话框用于您的操作系统语言*）将允许您安装 G-WAN 并选择 G-WAN 可用的 15 种不同编程语言（*及其所需的软件包）取决于您的操作系统发行版*）使用几乎所有 90+ G-WAN 免费提供的 servlet 以及以下 Linux 发行版：

```
-ArchLinux
-Bridge
-CentOS
-Debian
-ElementaryOS
-Fedora
-LMDE
-Manjaro
-Mint
-RHEL
-Ubuntu and all its derivatives (Kubuntu, Lubuntu, etc.). 
```

以及任何内核版本。

目前有 15 种编程语言是：

```
-ANSI C
-ASM
-C++
-C# (Mono)
-Gnustep
-Go
-Java
-Javascript (NodeJS)
-Lua
-Perl
-PH7 (the PHP compiler)
-PHP (the php5-cli mode)
-Python
-Ruby
-and Scala 
```

注意：Objective C 和 Objective C++ 也可用，但仅适用于 Ubuntu Precise Pangolin ( *12.04 LTS* )。

希望这可以帮助。

如有任何改进，请随时与我联系。

# java - 无法在 JSF 中实例化类错误

> ID：13559099
> 
> 赞同：-2
> 
> 时间：2012-11-26T05:25:03.533
> 
> 标签：java

这是我的托管 Bean 类，

公共类 MapBean 实现可序列化 {

```
private MapModel polylineModel;
public MapBean() {
    createMap();
}

 public void createMap(){
    try {
        polylineModel = new DefaultMapModel();
        LatLng coord;
        String query = "select a.lan,a.lat from country;";  
        Connector conn = new Connector();
        Statement str = (Statement) conn.getConn().createStatement();
        ResultSet res = str.executeQuery(query);
        Polyline polyline1;
        polyline1 = new Polyline();
        while(res.next()){
            coord= new LatLng(Integer.parseInt(res.getString(2)), Integer.parseInt(res.getString(1))); 

            polyline1.getPaths().add(coord); 
     }
        polyline1.setStrokeWeight(10);  
        polyline1.setStrokeColor("#FF9900");  
        polyline1.setStrokeOpacity(0.7);  

        polylineModel.addOverlay(polyline1);
    } catch (SQLException ex) {
        Logger.getLogger(MapBean.class.getName()).log(Level.SEVERE, null, ex);
    }

 }
  public MapModel getPolylineModel() {  
    return polylineModel;  
}  

public void onPolylineSelect(OverlaySelectEvent event) {  
    addMessage(new FacesMessage(FacesMessage.SEVERITY_INFO, "Polyline Selected", null));  
}  

public void addMessage(FacesMessage message) {  
    FacesContext.getCurrentInstance().addMessage(null, message);  
} 
```

但问题是当它被编译时它给出了一个像这样的错误“不能实例化类：org.primefaces.examples.view.MapBean”。是什么原因？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:42:30.737

如果 LatLng 支持双精度，请使用此代码。

```
coord= new LatLng(Double.parseDouble(res.getString(2)), Double.parseDouble(res.getString(1))); 
```

# java - 使用 GUI 界面的 Java 最大公约数 - 整数/字符串/计算问题

> ID：13559100
> 
> 赞同：0
> 
> 时间：2012-11-26T05:25:13.650
> 
> 标签：java, string, int, jframe, greatest-common-divisor

我正在尝试创建一个最大公约数计算器。我必须为这个项目创建一个 GUI 界面，我认为我这样做是正确的，但是我无法测试它，因为我的计算有问题。

具体来说，我在编译器中遇到以下两行错误：

```
 int x =  xTextField.getText();
 int y = yTextField.getText(); 
```

错误是“类型不匹配，无法从 String 转换为 int”我尝试插入 int x = 0; 和 int x = 0; 在它之前没有运气。我也尝试过将这些从整数更改为字符串，但它会使一切变得更加混乱。我不确定如何获取我应该使用的文本。

这是我的代码的计算部分：

```
 public void actionPerformed(ActionEvent e) {
    Object source = e.getSource();
    if (source == exitButton)
        System.exit(0);
    else if (source == calculateButton) {
        int x =  xTextField.getText();
        int y = yTextField.getText();
        int gcd = greatestCommonDivisor(
                 x, y);
        gcdTextField.getText();
    }

}
private int greatestCommonDivisor(int x, int y) {
    // TODO Auto-generated method stub

    while (x != y) {
        if (x > y) {
            x = x - y;
        } else {
            y = y - x;
        }
    }
    return y;
 }

} 
```

这是我的整个代码：

```
 package chapt15;

 import java.awt.*;
 import java.awt.event.*;
 import javax.swing.*;
 import java.text.*;

 public class FutureValueApp {
public static void main(String[] args) {
    JFrame frame = new GcdFrame();
    frame.setVisible(true);
 }

 }
 class GcdFrame extends JFrame {
public GcdFrame() {
    setTitle("Greatest Common Divisor Finder");
    centerWindow(this);
    setSize(267, 200);
//  setResizable(false);
    setResizable(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JPanel panel = new GcdPanel();
    this.add(panel);
}

private void centerWindow(Window w) {
    Toolkit tk = Toolkit.getDefaultToolkit();
    Dimension d = tk.getScreenSize();
    setLocation((d.width - w.getWidth()) / 2,
            (d.height - w.getHeight()) / 2);
}
 }

 class GcdPanel extends JPanel implements ActionListener {
private JTextField xTextField, yTextField,
        gcdTextField;
private JLabel xLabel, yLabel, gcdLabel;
private JButton calculateButton, exitButton;

public GcdPanel() {
    // display panel
    JPanel displayPanel = new JPanel();
//   displayPanel.setLayout(new FlowLayout(FlowLayout.RIGHT));
    displayPanel.setLayout(new GridLayout(4, 2));
    // payment label
    xLabel = new JLabel("X:");
    displayPanel.add(xLabel);

    // payment text field
    xTextField = new JTextField(10);
    displayPanel.add(xTextField);

    // rate label
    yLabel = new JLabel("Y:");
    displayPanel.add(yLabel);

    // rate text field
    yTextField = new JTextField(10);
    displayPanel.add(yTextField);

    // future value label
    gcdLabel = new JLabel("GCD:");
    displayPanel.add(gcdLabel);

    // future value text field
    gcdTextField = new JTextField(10);
    gcdTextField.setEditable(false);
    gcdTextField.setFocusable(false);
    displayPanel.add(gcdTextField);

    // button panel
    JPanel buttonPanel = new JPanel();
    buttonPanel.setLayout(new FlowLayout(FlowLayout.RIGHT));

    // calculate button
    calculateButton = new JButton("Calculate");
    calculateButton.addActionListener(this);
    buttonPanel.add(calculateButton);

    // exit button
    exitButton = new JButton("Exit");
    exitButton.addActionListener(this);
    buttonPanel.add(exitButton);

    // add panels to main panel
    this.setLayout(new BorderLayout());
    this.add(displayPanel, BorderLayout.CENTER);
    this.add(buttonPanel, BorderLayout.SOUTH);
}

public void actionPerformed(ActionEvent e) {
    Object source = e.getSource();
    if (source == exitButton)
        System.exit(0);
    else if (source == calculateButton) {
        int x =  xTextField.getText();
        int y = yTextField.getText();
        int gcd = greatestCommonDivisor(
                 x, y);
        gcdTextField.getText();
    }

}
private int greatestCommonDivisor(int x, int y) {
    // TODO Auto-generated method stub

    while (x != y) {
        if (x > y) {
            x = x - y;
        } else {
            y = y - x;
        }
    }
    return y;
 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:26:12.543

用这个：

```
int x =  Integer.parseInt(xTextField.getText()); 
```

因为`xTextField.getText()`将返回 a`String`而您不能将 a 分配`String`给`int`

因此，必须使用that 将`String`其解析为等效值并将其解析为.`int``Integer.parseInt``String``int`

情况也是如此`int y = yTextField.getText();`

此外，如果您希望在 gdc 文本字段中设置计算的 gdc，那么您应该使用：

```
int gcd = greatestCommonDivisor(x, y);
gcdTextField.setText(String.valueOf(gcd)); 
```

# php - 循环求和所有选择框值jquery

> ID：13559101
> 
> 赞同：0
> 
> 时间：2012-11-26T05:25:45.077
> 
> 标签：php, jquery, mysql

我在这里有一个小问题...

假设我有一个像这样的 3 选择框

```
<select id='attr1'>
<option value='1000' selected>Hijau</option>
<option value='2000'> Kuning </option>
</select>
<select id='attr2'>
<option value='2000' selected>Merah</option>
<option value='3000'> Biru </option>
</select>
<select id='attr3'>
<option value='4000' selected>Hitam</option>
<option value='5000'> Perak </option>
</select> 
```

我的问题是..如何使用 jquery 来总结我所有的选择框值？因为我的选择框是动态的..所以它可以超过 3 个选择框..

有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:29:04.390

```
var sum =0;
$('select').each(function(){
    sum += Number($(this).val());
});

alert(sum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:29:37.650

这是执行此操作的代码

```
var sum = 0;
$('select').​each(function(){
    sum += parseInt($(this).val());
})
alert(sum) 
```

**演示：http:** [//jsfiddle.net/muthkum/jsG3N/1/](http://jsfiddle.net/muthkum/jsG3N/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T05:29:02.867

像这样的东西：

```
var sum = 0;
$('select').each(function() {
  sum += parseInt($(this).val());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T05:36:17.347

您可以使用 :selected 过滤器，

小提琴：http: [//jsfiddle.net/XGca7/](http://jsfiddle.net/XGca7/)

```
$(function(){
  var sels = $(':selected');
  var sum = 0;
  sels.each(function(){sum+=parseInt($(this).val());});
  alert(sum);
}); 
```

# svn - 将目录添加到颠覆

> ID：13559102
> 
> 赞同：1
> 
> 时间：2012-11-26T05:25:48.080
> 
> 标签：svn

我想向 subversion 添加一个目录。我的文件夹结构如下所示

```
ParentFolder

    DeviceFolder1---->File1
    DeviceFolder2----->File2 
```

**DeviceFolder2**在 subversion 下`https://SubversionURL/DeviceFolder2`。我想将**DeviceFolder1**添加到 subversion 。`https://SubversionURL/DeviceFolder1`这里都

**ParentFolder**和**DeviceFolder1**不在 subversion 之下，`https://SubversionURL/DeviceFolder1`也不存在。**将DeviceFolder1**添加到 subversion时我应该遵循哪些步骤

注意：我无法执行 svn add 因为父目录不是 subversion 目录。DeviceFolder2 是 subversion 下的签出目录，`https://SubversionURL/DeviceFolder2`但 DeviceFolder1 是在本地计算机中创建的文件夹，我想将其添加到 subversion url `https://SubversionURL/DeviceFolder1`。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:17:53.947

不确定这是否对您有帮助，但许多 SVN 命令可以直接在 SVN 服务器上运行。例如，这将创建一个新目录：

```
svn mkdir https://SubversionURL/DeviceFolder1 -m "making a new folder" 
```

然后，您可以使用 svn import 将现有文件导入此目录。像这样的东西（仔细检查语法，有一段时间没有这样做了）：

```
svn import DeviceFolder1 https://SubversionURL/DeviceFolder1 -m "importing stuff" 
```

一个陷阱：如果您希望*本地*DeviceFolder1 在导入内容后成为 SVN 工作副本，则需要删除现有目录并签出新的工作副本。SVN 不会让您签出到非空目录，AFAIK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:48:05.600

我不确定您是否对此有任何问题，但我只是使用 `os.system('svn add *')`或您通常从命令行运行的任何内容将其添加到 SVN。

# mysql - PL SQL 如何处理未找到的行

> ID：13559107
> 
> 赞同：0
> 
> 时间：2012-11-26T05:26:11.767
> 
> 标签：mysql, sql, oracle

```
SQL - Cursor if no records not working

CREATE OR REPLACE procedure verify_data
IS
cursor c1 is 
select 
  e.name 
from 
  table3 e 
where 
  id IN (select id from table1)
  and id in (select id from table2);
BEGIN
if c1%notfound then
DBMS_OUTPUT.PUT_LINE('no records found');
end if;

FOR eData in c1
   LOOP

      DBMS_OUTPUT.PUT_LINE(eData.name);
   END LOOP;

END;
/ 
```

如果有记录，我的结果将被输出。但是如果没有找到记录，则不会显示任何内容。如果选择语句中没有记录，是否有任何异常处理或我可以做的事情来使我的输出“未找到记录”显示出来。

更新：

我添加后

结束循环

```
EXCEPTION
WHEN NO_DATA_FOUND THEN 
DBMS_OUTPUT.PUT_LINE('no records found'); 
```

在 END 之前；

SQL> 执行验证数据（）；

PL/SQL 过程成功完成。

也不显示。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:31:32.170

结束前；添加以下代码 `WHEN NO_DATA_FOUND THEN DBMS_OUTPUT.PUT_LINE('no records found');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:48:28.920

您无法在游标/循环中处理 NO_DATA_FOUND

试试下面的例子

```
CREATE OR REPLACE PROCEDURE verify_data
IS
CURSOR c1 is 
SELECT 
  e.name 
FROM 
  table3 e 
WHERE 
  id IN (SELECT ID FROM table1)
  AND id in (SELECT ID FROM table2);

eData   table3.name%TYPE ; 

no_data EXCEPTION ;
BEGIN
OPEN c1 ;
LOOP
FETCH c1 INTO eData;

IF c1%NOTFOUND THEN
  RAISE no_data ;
ELSE
 DBMS_OUTPUT.PUT_LINE(eData);
 EXIT ;
END IF;
END LOOP ;
CLOSE c1;
EXCEPTION 
WHEN no_data THEN
    DBMS_OUTPUT.PUT_LINE('*** Exc: no data');

END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T10:18:27.043

试试这个代码：

```
CREATE OR REPLACE procedure verify_data
IS
no_result exception;
cursor c1 is 
select 
e.name 
from 
table3 e 
where 
id IN (select id from table1)
and id in (select id from table2);
BEGIN
FOR eData in c1
LOOP
  DBMS_OUTPUT.PUT_LINE(eData.name);
  if c1%notfound then
   raise no_result;
  end if;
END LOOP;
EXCEPTION
WHEN no_result THEN 
DBMS_OUTPUT.PUT_LINE('no records found');
END; 
/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T10:01:36.420

Please check below procedure

```
 CREATE OR REPLACE procedure verify_data
    IS
    cursor c1 is 
    select 
      e.name 
    from 
      table3 e 
    where 
      id IN (select id from table1)
      and id in (select id from table2);
    BEGIN
    loop
    FETCH c1 INTO eData;
    EXIT WHEN c1%NOTFOUND;
    DBMS_OUTPUT.PUT_LINE(eData.name);
    end loop;
    exception 
    when no_data_found then
        dbms_output.put_line('*** Exc: no data');

    END;
    / 
```

# wpf - 使用 WPF Prism 和 MVVM 以编程方式添加用户控件

> ID：13559109
> 
> 赞同：0
> 
> 时间：2012-11-26T05:26:15.610
> 
> 标签：wpf, mvvm, prism, loader

我正在使用 WPF、Prism 和 MVVM 创建一个小型应用程序。有一个控件（加载器），我想在每次执行命令时重用它，并且我想将该用户控件放置在具有一定透明度的某个区域的顶部。即当前模块调用命令所在的区域。

如何在 ViewModel 的某个区域顶部添加此用户控件（这是正确的位置吗？）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:03:36.347

使用 Prism 是正确的，最好的方法是使用**[regions](http://www.developmentalmadness.com/archive/2009/10/14/mvvm-and-prism-101-ndash-part-3-regions.aspx)**。

只需在您的视图中创建区域，给它一个唯一的名称。

```
<ContentControl rgn:RegionManager.RegionName="TopRegion" /> 
```

然后，在 ViewModel 中使用**[RegionManager](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.regions.regionmanager%28v=pandp.40%29.aspx)**添加用户控件。

```
IRegion myRegion = regionManager.Regions["TopRegion"];
myRegion.Add(userControl1); 
```

我还应该指出，由于这是在 MVVM 中，您可能希望使用某种 IoC（例如[MEF](http://mef.codeplex.com/)或 Unity）添加用户控件。

# java - 安卓媒体播放器通知

> ID：13559112
> 
> 赞同：0
> 
> 时间：2012-11-26T05:26:27.137
> 
> 标签：java, android, android-mediaplayer

我编写了一个媒体播放器，可以从网站流式传输 MP3。

使用 Winamp 等媒体播放器，我可以在播放时查看我的电子邮件或 Facebook，然后使用通知窗口返回 win-amp。我想知道我是否可以用我的媒体播放器做类似的事情。

我看过：[Android Media Player Threading](https://stackoverflow.com/questions/3188170/android-media-player-threading)、[Notifications](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)等等。

我仔细研究了这个概念，发现了很多令人困惑的话题。有些人提供服务，而有些人提供前台服务，然后向其添加通知。我对如何使这成为可能感到困惑。如果有人可以向我解释这个概念（从我的活动课到通知栏），我将不胜感激。示例代码也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:51:21.643

我找到了我的问题的答案，并决定与正在学习 android 开发的新手用户/学生分享。

基本上，如果您想要一个有效的媒体播放器，则必须将服务与您的活动类并排使用。制作服务后，您必须将其制作为前台服务，这将帮助您将媒体播放器制作为通知。

如果我不正确，请纠正我。谢谢

示例代码：[http ://www.java2s.com/Code/Android/Media/UsingServicetoplaymediafile.htm](http://www.java2s.com/Code/Android/Media/UsingServicetoplaymediafile.htm)

# sql - 如何在不使用别名的情况下选择具有其他名称的列值

> ID：13559116
> 
> 赞同：-2
> 
> 时间：2012-11-26T05:27:05.513
> 
> 标签：sql, sql-server, sql-server-2008

如何在不使用别名的情况下选择具有其他名称的列值

作为我的问题，我有桌子

```
 empId  Salary
      1       10000
      2       20000 
```

我想在不使用任何别名的情况下将 empId、Salary、Salary 显示为总计。

```
 empId  Salary   Total
      1       10000   10000
      2       20000   20000 
```

这个问题是在一次会议中提出的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:03:38.750

你不能直接做，你可以在那个表上创建“VIEW”。

例子

```
CREATE OR REPLACE VIEW xx_emp_v
                      ( empId
                      , Salary
                      , total )
AS
SELECT empId
     , Salary
     , Salary
FROM emp ; 
```

然后像这样查询该视图

```
SELECT empId
     , Salary
     , total 
FROM xx_emp_v ; 
```

您的输出将是：

```
 empId  Salary   Total
  1       10000   10000
  2       20000   20000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:34:33.077

好吧，你不能。显示两列的唯一方法是

*   更改表并重命名 columnName
*   供应`ALIAS`。

# r - 在 R 中使用 mfrow 时绘制轴标签被遮挡

> ID：13559117
> 
> 赞同：1
> 
> 时间：2012-11-26T01:43:27.717
> 
> 标签：r, data-visualization

当我`mfrow`用来创建 2x2 回归诊断图时，标签会被石英窗口的边缘和图本身的边缘遮住。

诚然，这不是我的代码，而是我的数据。我怀疑它与边距设置有关，但我很大程度上不确定我在做什么。

```
opar <- par(mfrow=c(2,2), mex=0.6, mar=c(4,4,3,2)+.3)
plot(amod1, which=1:4)
par(opar) 
```

我显然无法发布图形的图像。

`amod1`是由下面的代码给出的广义线性模型。`RHT1`是列表工件计数数据的数据框。

```
amod1 = glm(x1 ~ y1, data = RHT1, family = poisson) 
```

# javascript - 发布包装在对象内的 ArrayBuffer

> ID：13559118
> 
> 赞同：0
> 
> 时间：2012-11-26T05:27:25.890
> 
> 标签：javascript, jquery, ajax, arraybuffer

我写了一点 AJAX 来获取文件客户端，以便我可以将其发布回服务器。被反对的对象作为`ArrayBuffer`. 但是，在将此二进制文件发布回服务器进行保存后，我需要在此文件中包含一些元数据。我已经尝试将`ArrayBuffer`其他字符串包装在和对象中，但是当我检查数据服务器端时，它似乎只传输了`ArrayBuffer`.

我尝试`ArrayBuffer`通过此答案将其转换为字符串：

[https://stackoverflow.com/a/11058858/449511](https://stackoverflow.com/a/11058858/449511)。

但是， my`ArrayBuffer`的字节长度是 519843，这会导致异常：

> 未捕获的 RangeError：ArrayBuffer 长度减去 byteOffset 不是元素大小的倍数。

我的理解`ArrayBuffers`是稀疏的，我已经阅读了 MDN 文档，但找不到太多其他内容。我很感谢有关如何将其转换`ArrayBuffer`为字符串或将其包装`ArrayBuffer`成对象的任何其他资源或想法。

这是我的 AJAX 代码片段：

```
$.ajax({
  type: 'POST',
  url:  'http://localhost:5000/',
  data: {fname: f, url:u, binary:b},  // the binary is an ArrayBuffer
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:58:27.287

就这样记录在案，感谢评论中的@Markus。使用 UInt8Array 有效。此外，我刚刚发现这个问题可以准确记录我需要的内容：[Getting BLOB data from XHR request](https://stackoverflow.com/questions/8022425/getting-blob-data-from-xhr-request)。

使用我的问题中链接的 ArrayBuffer to String 答案不适用于大文件，因此我编写了一个迭代版本并在发布到对象之前转换为 base64。

```
var binary_string = ''
bytes = new Uint8Array(ArrayBuffer object from ajax get);
for (var i = 0; i < bytes.byteLength; i++) {
    binary_string += String.fromCharCode(bytes[i]);
}
base64_string = window.btoa(binary_string); 
```

# java - 查找所有可以用拨号盘上的电话号码拼写的可能单词的逻辑

> ID：13559124
> 
> 赞同：1
> 
> 时间：2012-11-26T05:27:50.557
> 
> 标签：java, search, combinations

因此，我必须使用为拨号盘上的每个号码分配的字母，找到可以与电话号码拼写的所有可能组合。即：222 6262 可以拼写“A BANANA”。

给定任意长度 < 8 的任意数字，我可以找到与整数匹配的所有单词。即，`findWholeWord(dictionary[2], 723)`会给我一个字符串数组`{"RAD", "RAE", "RAF", "SAD", "SBF", "PAE", "PAD"}`（给我的字典有点愚蠢......）。我的字典分为 7 个部分，每个部分包含相同长度的单词。

我不确定如何取一个 7 位数字并给出所有单词组合，例如一个字长 6、一个字长 1 (6, 1)、5 和 2、5 和 1 和 1、4 和 3、4和 2 和 1。我想扔掉任何不涵盖整个单词的东西（任何带有 0 或 1、3 个字母和 2 个字母的单词与最后 2 个字母不匹配）。我不知道如何理解这个逻辑。我很确定这种逻辑有一个名字，因为我画了一棵树，它有一个很好的模式，但我不知道那个模式叫什么或者它到底叫什么。

一种方法是找到所有子词并尝试以任何可行的方式将它们组合在一起，另一种方法是尝试所有可能的词长组合：(7)、(6,1)、(5,2)、( 5,1,1), (4,3), (4,2,1), (4,1,2), (4,1,1,1) 等等...

不知道怎么做，不确定哪个更容易，不确定哪个最有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:36:09.540

我可以想到一个解决方案，但这取决于这些字典是在运行时更新，还是在开发时固定。如果这些字典不随时间变化，您可以执行以下操作：

1.  对您拥有的词典执行预处理任务，以便对于每个词典中的每个单词，您可以在一些简单的数据结构中创建等效数字（即“BANANA”为“226262”）。
2.  将这些字典存储在由“Word”字段索引的 7 个表（每个字长一个表）的数据库中，以便您可以在程序运行时再次读取它们。
3.  创建一个接受给定数字“2226262”并返回 String ArrayList 的方法。对于 N = 1 到 7 ；取第一个 N 位数字并使用您拥有的数字在“N 表”中搜索可能的单词。对于你得到的每一个可能的单词，用每个单词的其余数字再次调用相同的方法（即，如果一个单词是 3 个字符，那么用最后 4 个数字调用该方法）。创建一个新的 String ArrayList 并添加随后从这些调用中获得的所有结果，然后返回它。
4.  确保为此递归设置终止条件以避免“无限递归”。我建议在方法的开头检查给定的数字是否为零长度，如果是，则只需返回一个空的 String ArrayList。

我希望我的观点清楚

**更新**

这是我所说的 sudo 代码：

```
ArrayList<String> getWordsOf(String Number){
    if(Number.isEmpty()){
        return new ArrayList<String>();
    }
    ArrayList<String> allPossibleWords = new ArrayList<String>();
    for(int i=1; i<=Number.length(); i++){
        ArrayList<String> possibleWords = getFromDataBase(Number.substring(0,i));
        ArrayList<String> restOfPossibleWords = getWordsOf(Number.substring(i,Number.length()-i));
        for(String possibleWord:possibleWords){
            for(String restOfPossibleWord:restOfPossibleWords){
                allPossibleWords.add(possibleWord+" "+restOfPossibleWord);
            }
        }
    }
    return allPossibleWords;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:38:24.007

与其尝试所有可能的组合，它可能会节省您的时间，如果您计算每个索引的单词数......例如。因此，`findWholeWord(dictionary[2], 723); wordCount[2]=7;` 为了清楚起见`wordCount[0]=1; wordCount[5]=3;`（我无法想象您得到任何其他 1 个字母的单词，但 'A'），这意味着您现在只需运行 1X3 组合而不是 7X7。将节省您的子词匹配一些重要的时间。

# ssrs-2008 - SSRS 中每个组之后的每个页面中的标题问题

> ID：13559125
> 
> 赞同：0
> 
> 时间：2012-11-26T05:28:26.163
> 
> 标签：ssrs-2008, reporting-services

我有一个包含 6 个子报表的主报表，我将它们全部构建在一个个人 tablix 中，一切正常，当我导入到 Excel 时，在单个选项卡中显示每个子报表。问题出在其中一个上，我按工作区有 1 个父组，按日期有一个子组。我也在单独的选项卡中显示每个 WorkArea，这很好，但问题是标题行仅显示在第一个选项卡中。在其他人中没有我如何或在哪里迷路？？？如果有人可以帮助我，我将不胜感激！！！

提前致谢

埃利亚纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:35:53.757

如果您右键单击 tablix 并转到属性。应该有一个可用于“重复标题行”的选项。

# image - 电子表格中的实时链接图像

> ID：13559132
> 
> 赞同：1
> 
> 时间：2012-11-26T05:28:48.570
> 
> 标签：image, live, google-sheets

我确信这是一个基本问题，但我正在尝试在谷歌电子表格中创建一个项目跟踪文档。理想的情况是在我们的服务器上有一张图像，用作电子表格中的缩略图。然后我希望能够覆盖该图像并让它在电子表格中刷新时更新。

实现这一目标的最简单方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:44:11.190

这可以通过创建您自己的[电子表格小工具](http://support.google.com/drive/bin/answer.py?hl=en&answer=96978)在 Google 电子表格的范围内完成。

```
<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="Hello World!" />
  <UserPref name="_table_query_url" display_name="Data source url" required="true"/>
  <Content type="html"><![CDATA[
    <img src="http://99designs.com/designs/447080~36d200d82d83d7b2e738cebd2a48de07180cef3a-original">
  ]]></Content>
</Module> 
```

但是，小工具将[在 2013 年初被弃用](http://support.google.com/drive/bin/answer.py?hl=en&answer=2791335)。

# python - 如何使用 Python 打开 ppt 文件

> ID：13559133
> 
> 赞同：3
> 
> 时间：2012-11-26T05:28:50.023
> 
> 标签：python

我想在 Linux 上使用 Python 打开一个 ppt 文件（就像 python 打开一个 .txt 文件一样）。我知道win32com，但我正在使用linux。那么，我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:34:55.997

使用[odfpy](http://opendocumentfellowship.com/projects/odfpy)项目中的 odf.opendocument.OpenDocumentPresentation。这是假设您只关心与 OpenDocument 标准兼容的最新格式文件。

如果您有权访问 OpenOffice，则可以使用他们的[Python api](http://wiki.openoffice.org/wiki/Python)来读取文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:35:51.003

如果你在 Linux 上，你指的是什么办公软件。OpenOffice（无头）可以在 Linux 上使用 python 进行接口。这是一个很好的例子[https://github.com/jledoux/FRIEDA](https://github.com/jledoux/FRIEDA)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-12T21:45:34.637

[python-pptx](https://python-pptx.readthedocs.org)可以在 Linux 上打开最近的 Powerpoint 版本。[他们甚至在入门](https://python-pptx.readthedocs.org/en/latest/user/quickstart.html)指南中提供了从幻灯片中[提取所有文本](https://python-pptx.readthedocs.org/en/latest/user/quickstart.html#extract-all-text-from-slides-in-presentation)的示例。

这是代码（来自[入门](https://python-pptx.readthedocs.org/en/latest/user/quickstart.html)指南）

```
from pptx import Presentation

prs = Presentation(path_to_presentation)

# text_runs will be populated with a list of strings,
# one for each text run in presentation
text_runs = []

for slide in prs.slides:
    for shape in slide.shapes:
        if not shape.has_textframe:
            continue
        for paragraph in shape.textframe.paragraphs:
            for run in paragraph.runs:
                text_runs.append(run.text) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:54:25.537

使用带有子进程的 catdoc/catppt 打开 doc 文件和 ppt 文件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-09-27T18:59:09.240

您可以检查 Apache Tika，因为我在 mac 上使用它是这样的

对于 MacOS Homebrew 用户：安装 Apache Tika ( `brew install tika`)

命令行界面的工作方式如下：

```
tika --text something.ppt > something.txt 
```

并在 python 脚本中使用它：

```
import os
os.system("tika --text temp.ppt > temp.txt") 
```

你将能够做到这一点，这是我迄今为止唯一的解决方案。

# talend - 显示组件数据

> ID：13559134
> 
> 赞同：0
> 
> 时间：2012-11-26T05:28:53.613
> 
> 标签：talend

我有这样的工作流程，

**tAccessInput_1 --> tMap_1 --> tSortRow_1 --> tJava --> tBufferOutput_1。** 这是否可以在每次迭代时在 tJava 组件中显示**tBufferOutput_1中的数据。**如果可能的话，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:20:05.607

如果您尝试将输入的任何内容输出到 tBuffer 组件中，请尝试连接到**tLogRow**组件，该组件将在控制台中输出所有内容。

如果您出于其他特定原因需要 tJava，这里有一个稍微复杂的方法：

tBufferOutput_1 -> tFlowToIterate -> tIterateToFlow -> tJava

然后，在 tJava 中，您可以执行以下操作： System.out.println((String) globalMap.get("row.column"));

在哪里：

*row*是 tIterateToFlow 到 tJava 之间的主要数据行的名称（例如 row6）

*column*是您要输出的任何架构列

数据被转换成一个字符串，但在你的情况下它可能是一个整数或其他东西。

您需要将流程更改为迭代的原因是因为 tJava 需要迭代才能打印所有行（正如您在问题中正确指出的那样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:10:58.080

正如[llaen](https://stackoverflow.com/questions/13559134/displaying-a-component-data/13566731#13566731)所解释的，最好的解决方案是使用**tLogRow**在 Talend/Java 控制台中打印每一行。如果要自定义打印方式，最好使用 tJavaRow（而不是 tJava）以避免使用 tFlowToIterate 和 tIterateToFlow

tAccessInput_1 --> tMap_1 --> tSortRow_1 --> tJavaRow --> tBufferOutput_1

然后，在 tJavaRow 中，使用以下 java 代码：System.out.println(input_row.column)

其中：
*input_row*将被自动解释并被 Talend 代码生成器
*列*替换为您要输出的任何模式列

# ruby - 在 nokogiri 中检查和修改元素

> ID：13559137
> 
> 赞同：0
> 
> 时间：2012-11-26T05:28:57.480
> 
> 标签：ruby, xpath, capybara

假设我有多个以下代码（每个都有不同的表单名称、productForm_1、.._2..._3 等）：

```
<form id="productForm_7" name="productForm_3" method="post" action="/send/coded.cfm" style="width:110px; display:inline;">    
<div>
    <input type="hidden" value="24775643" name="productID">
    <input class="btn_addToCart" type="submit" value=" " style="cursor:pointer;">
</div>
</form> 
```

我将如何更改 capybara-webkit 中的 productID？由于按钮没有名称/值，我如何指定按钮？

我试过了

```
page.find_field('productForm_7').find_field("productID").value 
```

但这似乎根本不起作用。

*对不起，我是新来的水豚/nokogiri

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:40:59.660

您的代码有几个问题：

*   正如 shioyama 指出的那样，您不应该更改隐藏字段的值。如果它真的在页面上发生了变化——如果页面有一些脚本很可能——你应该尝试以与测试相同的方式触发更改。
*   `find_field`查找字段而不是表单。你的第一个发现是错误的，但你的第二个是正确的。尝试：`page.find('#productForm_7').find_field("productID").value`改为。Capybaras 通用的 find 方法默认使用 CSS 选择器。以同样的方式，您可以`page.find('#productForm_7').find(".btn_addToCart").value`使用按钮的 CSS 类找到按钮。

然而，更像水豚的风格是这样的：

```
within '#productForm_7' do
  # fill in values.... for example fill_in '#productID', :with => '123456'
  find('.btn_addToCart').click
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:53:34.553

一个简单的方法让你做你想做的事：

```
require 'nokogiri'

doc = Nokogiri::HTML(<<EOT)
<form id="productForm_7" name="productForm_3" method="post" action="/send/coded.cfm" style="width:110px; display:inline;">    
<div>
    <input type="hidden" value="24775643" name="productID">
    <input class="btn_addToCart" type="submit" value=" " style="cursor:pointer;">
</div>
</form>
EOT

doc.search('form').select{ |form| form['id'][/productForm_\d+/] }.each do |form|
  hidden_input = form.at('input[name="productID"]')
  hidden_input['value'] = (hidden_input['value'].to_i + 1).to_s
  button = form.at('input.btn_addToCart')
  # do something with button...
end 
```

# android - 多次调用getView方法

> ID：13559141
> 
> 赞同：-4
> 
> 时间：2012-11-26T05:29:15.717
> 
> 标签：android, android-layout, android-intent, android-widget

我正在实现自定义列表视图，但问题是多次调用 getview 方法，即如果列表视图中有 4 个项目，则每个列表项调用 getview 方法 4 次

代码在这里..

通知.java

```
public class Notifications extends ListActivity implements
    AsyncTaskCompleteListener, OnClickListener {

private ArrayList<HashMap<String, String>> unreadNotifications = new ArrayList<HashMap<String, String>>();
private ArrayList<HashMap<String, String>> upcommingNotifications = new ArrayList<HashMap<String, String>>();
private ArrayList<String> days = new ArrayList<String>();

private MyAsyncTask notificationsAsyncTask;

private NotificationAdapter adapter;
Button btn_Unread, btn_upcomming;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.dash_notifications_layout);
    initialise();
    ArrayList<NameValuePair> argumentsList = new ArrayList<NameValuePair>();
    argumentsList = PlutoNameValuePairs.getNotificationNVPair("1",
            "consumer_show");
    notificationsAsyncTask = new MyAsyncTask(Notifications.this,
            PlutoConstants.notificationUrl, argumentsList, 1);
    notificationsAsyncTask.execute();
    notificationsAsyncTask.setOnResultsListener(this);
    btn_Unread.setOnClickListener(this);
    btn_upcomming.setOnClickListener(this);

}

private void initialise() {
    btn_Unread = (Button) findViewById(R.id.btn_unread_notifications);
    btn_upcomming = (Button) findViewById(R.id.btn_upcomming_notifications);
}

@Override
public void onResultsSucceeded(String result, int asyncTaskNo) {

    Logger.logger("Notification  ", "Result = " + result);

    try {
        JSONObject jsonResponce = new JSONObject(result);
        Logger.logger("Result : " + jsonResponce);
        switch (asyncTaskNo) {
        case 1:
            if (unreadNotifications == null) {
                unreadNotifications = new ArrayList<HashMap<String, String>>();

            } else {

                unreadNotifications.clear();
            }
            parseDataForNotification(jsonResponce, unreadNotifications,
                    asyncTaskNo);
            break;
        case 2:
            if (upcommingNotifications == null) {
                upcommingNotifications = new ArrayList<HashMap<String, String>>();

            } else {
                unreadNotifications.clear();
                upcommingNotifications.clear();
            }
            parseDataForNotification(jsonResponce, upcommingNotifications,
                    asyncTaskNo);
        default:
            break;
        }

    } catch (JSONException e) {
        Logger.errorLog("Does not found json Object");
        e.printStackTrace();
    }
}

public void parseDataForNotification(JSONObject jsonResponce,
        ArrayList<HashMap<String, String>> listToModify, int arrayCheck) {
    int i = 0;

    JSONArray dislpayArray = null;
    try {
        if (arrayCheck == 1) {

            dislpayArray = jsonResponce.getJSONArray("Unread");
        } else {
            dislpayArray = jsonResponce.getJSONArray("Unsend");

        }

        for (i = 0; i < dislpayArray.length(); i++) {
            HashMap<String, String> map = new HashMap<String, String>();
            JSONObject e = dislpayArray.getJSONObject(i);

            map.put("category_name", e.getString("category_name"));
            map.put("time", e.getString("time"));
            map.put("repeat_status", e.getString("repeat_status"));

            if (e.has("day")) {
                JSONArray day_array = e.getJSONArray("day");

                for (int j = 0; j < day_array.length(); j++) {
                    JSONObject day = day_array.getJSONObject(j);
                    map.put("day", day.getString("day"));
                    days.add(day.getString("day"));

                }
            }
            unreadNotifications.add(map);

            adapter = new NotificationAdapter(Notifications.this,
                    R.layout.dash_custom_notifications_layout,
                    unreadNotifications, i, days);

            setListAdapter(adapter);

        }

    } catch (JSONException e) {
        Log.e("log_tag", "Error parsing data " + e.toString());
    }

    //

}

@Override
public void onClick(View v) {

    switch (v.getId()) {
    case R.id.btn_unread_notifications:
        ArrayList<NameValuePair> argumentsList = new ArrayList<NameValuePair>();
        argumentsList = PlutoNameValuePairs.getNotificationNVPair("1",
                "consumer_show");
        notificationsAsyncTask = new MyAsyncTask(Notifications.this,
                PlutoConstants.notificationUrl, argumentsList, 1);
        notificationsAsyncTask.execute();
        notificationsAsyncTask.setOnResultsListener(this);

        break;

    case R.id.btn_upcomming_notifications:
        days.clear();
        ArrayList<NameValuePair> argumentsList1 = new ArrayList<NameValuePair>();
        argumentsList1 = PlutoNameValuePairs.getNotificationNVPair("1",
                "consumer_show");
        notificationsAsyncTask = new MyAsyncTask(Notifications.this,
                PlutoConstants.notificationUrl, argumentsList1, 2);
        notificationsAsyncTask.execute();
        notificationsAsyncTask.setOnResultsListener(this);

        break;
    }

}

} 
```

NotificationAdapter.java

```
public class NotificationAdapter extends BaseAdapter {

Context context;
private ArrayList<HashMap<String, String>> listUnread;
private LayoutInflater inflater;

String daysInAdapter[] = new String[] { "Sun", "Mon", "Tue", "Wed", "Thur",
        "Fri", "Sat" };
private ArrayList<String> days;

public NotificationAdapter(Context context, int landedMyCustomLayout,
        ArrayList<HashMap<String, String>> listUnread, int i,
        ArrayList<String> days) {

    this.context = context;
    this.listUnread = listUnread;
    //this.count = i;
    this.days = days;

    // daysInAdapter = {"Sun","Mon","Tue","Wed","Thur","Fri","Sat"};
}

@Override
public int getCount() {

    return listUnread.size();
}

@Override
public HashMap<String, String> getItem(int position) {

    return listUnread.get(position);
}

@Override
public long getItemId(int position) {

    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    HashMap<String, String> map = getItem(position);

    if (convertView == null) {
        inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(
                R.layout.dash_custom_notifications_layout, parent, false);

    }

    TextView txt_time = (TextView) convertView.findViewById(R.id.txt_time);
    TextView txt_category_name = (TextView) convertView
            .findViewById(R.id.txt_category_name_1);
    txt_time.setText(map.get("time"));
    txt_category_name.setText(map.get("category_name"));
    ImageView img = (ImageView) convertView
            .findViewById(R.id.img_repeat_status);
    if (map.get("repeat_status").equals("1")) {
        img.setImageResource(R.drawable.ic_launcher);
    } else {
        img.setImageResource(R.drawable.temp_stub);
    }

    TextView txt_day_sun = (TextView) convertView
            .findViewById(R.id.txt_days_sun);
    txt_day_sun.setText("");

    for (int j = 0; j < days.size(); j++) {

        txt_day_sun.append(days.get(j)+" ");

    }

    return convertView;
}

} 
```

dash_notification_)layout.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:foo="http://schemas.android.com/apk/res/com.pluto"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/rl_notification_buttons"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#ffffff" >

    <com.oab.widgets.ButtonPlus
        android:id="@+id/btn_unread_notifications"
        style="@style/button_theme"
        foo:customFont="@string/font_name"
        android:text="Unread" />

    <com.oab.widgets.ButtonPlus
        android:id="@+id/btn_upcomming_notifications"
        style="@style/button_theme"
        android:layout_toRightOf="@id/btn_unread_notifications"
        foo:customFont="@string/font_name"
        android:text="Upcomming" />

    <com.oab.widgets.TextViewPlus
        android:id="@+id/txt_Notification_count"
        style="@style/textview_theme"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="15dp"
        foo:customFont="@string/font_name"
        android:gravity="center_horizontal"
        android:text="2 New Notifications"
        android:textSize="12sp" />
</RelativeLayout>

<ListView
    android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/rl_notification_buttons"
    android:layout_weight="1"
    android:drawSelectorOnTop="false" />

<include
    android:id="@+id/btn_menu_bar"
    android:layout_alignParentBottom="true"
    layout="@layout/app_menuforxml_layout" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:55:11.307

自定义 ListView 应该以这种方式工作。
每次显示新行时都会调用 getView。

# svn - 某些选定的资源未清理。svn: E155032: 未找到原始文本

> ID：13559142
> 
> 赞同：7
> 
> 时间：2012-11-26T05:29:17.597
> 
> 标签：svn, svn-update

我在 Windows 7 上使用 Eclipse JUNO。

我正在使用 Visual SVN 作为 SVN 存储库。

当我尝试**更新文件**时，出现错误

'*一些资源没有更新。 **svn: E155004: 'E:\SVN\tms' 中有未完成的工作项；首先运行'svn cleanup'。*****'**

当我通过右键单击项目运行**SVN Cleanup时，出现错误**

**'*一些选定的资源没有被清理。svn：E155032：未找到原始文本*'**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-13T20:57:35.453

对我有用的是找到丢失的原始节点并使用直接在本地 svn DB 中删除它

```
sqlite3 .svn/wc.db
sqlite> select * from pristine where checksum="$sha1$<your missing pristine here>"; 
```

这没有产生任何结果（对于缺少原始的，这是预期的结果）

```
sqlite> select * from nodes where checksum="$sha1$<your missing pristine here>"; 
```

我那里只有一个项目，所以当我删除它时：

```
sqlite> delete from nodes where checksum="$sha1$<your missing pristine here>"; 
```

然后强制 svn 更新已删除的节点，一切正常

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T12:36:26.780

下载 SmartSVN 并单击“验证管理区域”以修复不一致之处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T09:09:19.837

您可以下载 SmartSVN 以恢复丢失的原始文件

# php - 时间戳php样式

> ID：13559149
> 
> 赞同：0
> 
> 时间：2012-11-26T05:29:36.903
> 
> 标签：php, html, css

我有我希望如何为 CSS 显示日期的跨度：

```
.date {
float:left;
position:relative;
margin-right:10px;
padding:45px 5px 0;

}

.date .month{
text-transform:uppercase;
font-size:25px;

}

.date .day{
font-size:35px;
line-height:45px;
position:absolute;
left:5px;top:0;

}

.date .year{
display:block;
position:absolute;
right:-5px;
top:15px;
-webkit-transform:rotate(-90deg);
-moz-transform:rotate(-90deg);
-ms-transform:rotate(-90deg);
-o-transform:rotate(-90deg)

} 
```

在 PHP 的输出中最终看起来像这样：http: [//puu.sh/1uqZ2](http://puu.sh/1uqZ2)

到目前为止，我已经设置了我的 CMS（新闻系统），但是我将如何让它看起来像该图像中显示的时间戳？我是否必须为每行设置每个标签，例如 $day $month $year？

这是我当前的“addarticle.php”页面：

```
<?php

$submit = $_POST['submit'];
$remove = $_POST['remove'];
$news_content = $_POST['newscontent'];
$news_title = mysql_real_escape_string($_POST['newstitle']);
$news_author = mysql_real_escape_string($_POST['newsauthor']);
$news_date = date("l, F jS Y");

if ($submit)
{

$namecheck = mysql_query("SELECT news_title FROM articles WHERE    news_title='$news_title'");
$count = mysql_num_rows($namecheck);

if ($count!=0)
{
    die ('<div class="red" style="margin-bottom: 0;">Article    <strong>'.$news_title.'</strong> already exists!</div>
    <meta http-equiv="REFRESH" content="2;url=index">
    ');
}

if ($news_title&&$news_content&&$news_author)
{

$query = mysql_query("

                 INSERT INTO articles VALUES  ('','$news_title','$news_content','$news_date','$news_author')

");
echo "<div class='green'>You have posted <strong>$news_title</strong> !</div>";

}else {

 echo '<div class="red">You must fill in all fields!</div>';
} 
}

?>

<form action="" method="POST">

Article Title :
<br />
<input name="newstitle" type="text" class="userpass" />
<br /><br />
Article Author :
<br />
<input name="newsauthor" type="text" class="userpass" value="<?php echo $_SESSION['username'] ?>" />
<br /><br />
Article Content :
<br />
<textarea id="elm1" name="newscontent" rows="7" cols="30" style="width: 100%">    </textarea>
<br />
<input name="submit" type="submit" class="button" value="Post News" />
<a href="viewarticle"><input name="edit" type="button" class="button" value="Edit Article" /></a>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:47:59.273

我假设有一个`$date`包含文章日期的数据变量。结合您的 stylecheet，以下代码应输出日期，如您的示例所示。

```
$day   = date('d', $date);
$month = date('m', $date);
$year  = date('Y', $date);

echo '<div class="date">'
         . '<span class="month"' . $month . '</span>'
         . '<span class="day">'  . $day   . '</span>'
         . '<span class="year">' . $year  . '</span>'
     . '</div>'; 
```

我的代码与 SQL 无关，并假设您已经知道文章的日期。为了获得更好的答案，您应该删除所有不必要的代码并为我们提供一个最小的示例。

我在您的代码中找不到从数据库中获取日期的部分。通常`id`在您的数据库中有一个列是您的主键。如果是这样，您可以使用此 SQL 查询获取文章的日期。

```
SELECT news_date FROM articles WHERE id = ... 
```

# java - 如何显示行车路线

> ID：13559153
> 
> 赞同：-1
> 
> 时间：2012-11-26T05:30:03.583
> 
> 标签：java, javascript, android, google-maps

我正在开发一个应用程序，用户可以使用它输入目的地，并且从他当前位置到目的地的路线将显示在谷歌地图上。我在网上搜索并找到了许多使用 google map api javascript v3 的教程。我还阅读了来自的官方文件

[https://developers.google.com/maps/articles/android_v3](https://developers.google.com/maps/articles/android_v3) , [https://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)

但我很困惑

*   他们如何在他们的程序中使用 javascript。
*   XML /JSON 是如何工作的。
*   这个程序总体上是如何运作的？

据我了解，上述文档中定义的方法与浏览器应用程序有关，那么它将如何从android应用程序启动？

最后，这是开发此应用程序的最佳方式/方法/api。

最后，我不是在寻找代码，因为我将自己开发代码。我只是想知道这些应用程序/谷歌地图总体上是如何工作的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:37:07.560

此[链接](http://csie-tw.blogspot.in/2009/06/android-driving-direction-route-path.html)有教程在我们的应用程序中的地图上绘制路线路径。这可能会对您有所帮助并在下面使用地图应用程序链接...这将在谷歌地图应用程序中带给您

```
String uri = "http://maps.google.com/maps?f=d&hl=en&saddr="+source_latitude+","+source_longitude+"&daddr="+destination_latitude+","+destination_longitude;
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

# matlab - 矩阵中元素周围的元素数，matlab

> ID：13559154
> 
> 赞同：2
> 
> 时间：2012-11-26T05:30:24.843
> 
> 标签：matlab, matrix, indexing, surround, thickness

我需要编写一个函数来查找矩阵中单元格（行，列）的“深度”。

给定任何 nxm 矩阵`mat = ones(6,6)`，例如..

```
mat =

     1     1     1     1     1     1
     1     1     1     1     1     1
     1     1     1     1     1     1
     1     1     1     1     1     1
     1     1     1     1     1     1
     1     1     1     1     1     1 
```

结果将是：

```
thick =

     1     1     1     1     1     1
     1     2     2     2     2     1
     1     2     3     3     2     1
     1     2     3     3     2     1
     1     2     2     2     2     1
     1     1     1     1     1     1 
```

其中“1”是可能的最小厚度，定义边缘单元。每个额外的周围单元格增加 +1 厚度。如果 NAN 在边界上，则需要将它们视为“边缘”……但我想我可以在以后构建它。

想法？任何帮助表示赞赏。谢谢！

编辑：

删除了我原来的编辑，需要重新考虑我原来的问题。基本上我想找到矩阵中最深的单元格。矩阵不必是规则的，可以有孔。通常，这将使用多边形并找到适合该多边形内的最大圆的直径来完成，但我不确定在 MATLAB 中实现它的效率如何。嗯……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:06:53.693

这是一个一维提示：给定 m 作为您的矩阵：

```
m=ones(1,6)
i=1:length(m);
depth(i<=length(m)/2)=i(i<=length(m)/2);
depth(i>length(m)/2)=length(m)-i(i>length(m)/2)+1 
```

米=

```
 1     1     1     1     1     1 
```

深度 =

```
 1     2     3     3     2     1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:01:18.680

您可以围绕以下逻辑构建一个函数（在此处显示伪代码）：

```
depth(m):
   M = size(m,1);
   N = size(m,2);
   thick = zeros(M,N);
   for i=1:M
        for j = 1:N
            thick(i,j) = min(i,M-i+1,j,N-j+1);
   return thick; 
```

Where返回从 1 开始索引的矩阵中元素`depth(m)`的深度。`(i,j)``MxN``m`

# database - Delphi XE2 中 TTable 和 TDBGrid 的意外行为

> ID：13559156
> 
> 赞同：0
> 
> 时间：2012-11-26T05:30:50.670
> 
> 标签：database, delphi, delphi-xe

我在表单上有一个文本框和一个网格。

**功能：**当我在文本框中输入对应于该 Emp ID 的 Emp ID（例如 1、2、3 等）时，Emp Name 应该来自数据库的网格。当我再次输入另一个 Emp ID 时，Another Emp Name 应该嵌入到下一行的网格中，依此类推……我希望多少次都没有。emp 名称应该继续以这种方式出现在网格的下一行。

我想我已经尽可能地解释了我的问题。

**我的方法**

我为此使用 TTable、TDatasource 和 TDBGrid。当我在文本框中输入任何 Emp ID 并按 Enter 时，我会检查数据库中的 Emp Name，然后将该名称附加到 TTable。然后我将此TTable 分配给TDatasource，最后将TDatasource 分配给TDBGrid。以下是此代码

```
Table1.Close;

//Create table for the first time

if not Table1.Exists  then
begin
      Table1.Close;

      Table1.DatabaseName    := 'databaseName';
      Table1.TableType           := ttParadox;
      Table1.TableName          := 'MyTable';
      Table1.FieldDefs.Clear;
      Table1.FieldDefs.Add('EmpName',ftString,40);
      Table1.CreateTable;

      Table1.Open;
end;

   Table1.Open;
   Table1.Append;
   Table1.FieldByName('EmpName').AsString := EmpName; //EmpName is fetched from database
   Table1.Post;
//Now assign this table to datasource
       DataSource1.DataSet := Table1;
//Now assign this datasource to dbgrid
       DBGrid1.DataSource := DataSource1; 
```

**我的问题：**我的问题是，网格中显示的记录表现异常。记录没有按正确的顺序显示，而是相互混合。表示网格中的数据行未按我以前附加的顺序显示。可能是什么问题呢。在每次绑定之前我是否要刷新一些数据源或 dbgrid 或其他东西。请在这方面提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-18T04:57:07.057

要定义记录的顺序，您必须使用索引/主键。像下面的代码一样添加它。

```
Table1.FieldDefs.Add('EmpId', ftAutoInc, 0, True);
Table1.FieldDefs.Add('EmpName', ftString, 40);
Table1.IndexDefs.Add('idxEmpId','EmpId',[ixPrimary]);
Table1.CreateTable;
Table1.Open; 
```

您可以通过定义 DBGrid.Columns 属性来隐藏 EmpId 以在网格中查看，其中仅显示必要的列。

# visual-studio-2010 - JS 文件在 VS 2010 中不断崩溃

> ID：13559161
> 
> 赞同：0
> 
> 时间：2012-11-26T05:31:04.033
> 
> 标签：visual-studio-2010, windows-7, crash

我有 VS 2010，Windows 7。

每次我尝试在我的一个项目中更改我的 js 文件时，Vs 都会一直“没有响应”，我不知道为什么。

有人知道我该如何调试吗？它似乎只适用于 js 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:34:05.807

尝试所有标准的东西：

*   禁用所有插件，看看是否发生
*   确保安装所有更新
*   如果一切都失败了 - 你可以用另一个 VS 实例调试 VS，看看它是否给你任何线索。

# java - 如何使用 android OS 组件构建自己的设备（例如相机）

> ID：13559163
> 
> 赞同：1
> 
> 时间：2012-11-26T05:31:12.317
> 
> 标签：java, android, linux, open-source

我想构建自己的使用智能操作系统的小相机，现在从头开始构建它需要大量我没有的时间和资源，所以我想知道有什么方法可以下载 Android 源代码，改变我想要的方式并在我的小项目中使用它。

所以这意味着我将不需要 android 内置手机或浏览器应用程序，并且只使用相机所需的组件并在硬件上使用它。

还有其他几个问题：

我需要谷歌许可才能使用安卓吗？我需要有任何权限来修改android吗？

最后，我如何同时下载 android 源代码并将其解压缩以使用它（如果有人找到这方面的教程会很棒，因为我试图在过去几个小时内找到所有这些，而 sims 中没有任何内容涵盖所有内容一）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:01:12.223

我不知道 only `camera`，但您可以下载源代码并在任何设备上构建。

这里（[Android 源代码](http://source.android.com/source/downloading.html)）是关于如何在设备中下载和构建源代码的完整描述。

诺基亚非官方 Android

[在诺基亚 N9 上运行的 Android 4.0](http://www.theverge.com/2012/3/22/2893830/nokia-n9-android-port-alpha)

[诺基亚 N900 非官方获得 Android 2.3](http://www.fonearena.com/blog/28040/nokia-n900-gets-android-2-3-unoffically.html)

# servlet-filters - 如何使网络过滤器支持异步？

> ID：13559164
> 
> 赞同：6
> 
> 时间：2012-11-26T05:31:13.363
> 
> 标签：servlet-filters, resteasy, embedded-jetty

我正在使用 RESTEasy 异步支持。但是它破坏了我的 JSONPfilter。

```
public class JSONPFilter implements Filter {

    private static final Logger logger = LoggerFactory.getLogger(JSONPFilter.class);

    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {

        String callbackName = request.getParameter("callback");

        if (callbackName != null) {

            ServletOutputStream sos = response.getOutputStream();
            sos.print(callbackName + "(");
            chain.doFilter(request, response);
            sos.print(");");
        } else {

            chain.doFilter(request, response);
        }
    }

curl http://localhost:8088/v0/chat?callback=jsonp
jsonp();{"data":"hello world: 53","timestamp":"2012-11-26T05:04:26.000Z"} 
```

正确的结果应该是：

```
jsonp({"data":"hello world: 53","timestamp":"2012-11-26T05:04:26.000Z"}); 
```

过滤器在非异步 servlet 上工作正常。我试过添加@WebFilter

```
@WebFilter(urlPatterns = "/*", asyncSupported = true)
public class JSONPFilter implements Filter { 
```

但似乎服务器无法识别@WebFilter，因为一旦我删除了 web.xml 中的条目，过滤器就根本不起作用。

我试过添加

```
<async-supported>true</async-supported> 
```

到目前为止没有运气。

顺便说一句，我使用的是嵌入式 Jetty v8.13

# php - 爆炸（）不使用分隔符

> ID：13559166
> 
> 赞同：1
> 
> 时间：2012-11-26T05:31:39.677
> 
> 标签：php, arrays, explode

首先看看我的脚本：

```
<?php
$list=file_get_contents('txt.txt');
$name=explode('\r\n',$list); //file exploding by \n because list is one under one
foreach($name as $i1){
     echo ($i1);
     echo '</br>';
}
?> 
```

它显示了我的结果（根据列表）：

```
morgan daniel martin sopie tommy 
```

但我已经使用`</br>`它必须显示：

```
morgan 
daniel 
martin 
sopie 
tommy 
```

但也许我错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:46:47.737

在这种情况下最好使用`preg_replace`...因为您不太了解它，可以使用以下技巧...请参阅下面的代码...

```
<?php
$list=file_get_contents('txt.txt');
echo implode('<br>',explode(' ',$list));
?> 
```

HTML：

```
morgan<br>daniel<br>martin<br>sopie<br>tommy 
```

输出预览：

```
morgan
daniel
martin
sopie
tommy 
```

如果你也想在最后休息一下......使用下面的一个......

```
echo implode('<br>',explode(' ',$list)).'<br>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:37:07.450

使用 php`file`来循环遍历文档的行：

[http://www.php.net/manual/en/function.file.php](http://www.php.net/manual/en/function.file.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T05:39:52.463

`explode()`根据给定的边界字符串拆分，因此您必须包含所有空白字符。

[你可以在网上](http://phpfiddle.org/lite/code/h45-svj)找到执行

所以最好选择正则表达式，它可以与 preg_split() 和正则表达式模式 "\s" 一起使用 - 空白字符类

```
---edited---
//$list = $list = preg_replace('<br>',' ',$list);; // replace the <br> with space
$list = str_replace('<br>',' ',$list); //better than preg_replace as regex dont 
                                       //  wok better for html tags

---EOF edited---
$name = preg_split('/\s+/',$list); 

echo '<pre>';
print_r($name);
echo '</pre>'; 
```

------------o/p----------

```
大批
(
    [0] => 摩根
    [1] => 丹尼尔
    [2] => 马丁
    [3] => 索比
    [4] => 汤米
)

```

> 笔记：

**替换**，因为它是一个硬编码的字符串函数。

正则**表达式**将花费更长的时间，因为它需要解析正则表达式字符串（即使您设置了 RegexOptions.Compiled），然后在正则表达式字符串中执行它，然后制定结果字符串。但是，如果您真的想确定，请在百万次迭代器中执行每次迭代并对结果进行计时。

通过这个：

[速记字符类（\s）](http://www.regular-expressions.info/charclass.html)

[preg_split](http://php.net/manual/en/function.preg-split.php)

# command - 从系统命令运行可执行文件

> ID：13559180
> 
> 赞同：1
> 
> 时间：2012-11-26T05:34:10.457
> 
> 标签：command, system

我可以手动执行相同的文件，机器人不使用系统命令。前任。system("./update.cgi uImage\n"); 这里 update.cgi 是可执行文件，uImage 是我作为参数传递给 update.cgi 的文件，它已经处理了所有权限。

any1 可以告诉我为什么它没有从系统命令执行。

# javascript - 通过从链接列表中选择提要动态加载提要

> ID：13559183
> 
> 赞同：0
> 
> 时间：2012-11-26T05:34:43.250
> 
> 标签：javascript, jquery, rss

我正在制作一个新闻应用程序，我正在使用一个名为 zRSSFeed 的 jQuery 插件。该插件具有通过从下拉列表中选择新闻源来更改显示的 RSS 提要的功能，这将改变结果 Div 中显示的提要（请参见[此处](http://www.zazar.net/developers/jquery/zrssfeed/example_menu.html)的示例）。

源代码 ：

```
<script src="http://jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="jquery.zrssfeed.min.js" type="text/javascript"></script>
<script type="text/javascript">
  $(document).ready(function() {
    setRSSFeed('#menu');
    $('#menu').change(function() {
      setRSSFeed(this)
    });
    function setRSSFeed(obj) {
      var feedurl = $('option:selected', obj).val();
      if (feedurl) {
        $('#result').rssfeed(feedurl);
      }
    }
  });
</script>
<select id="menu">    
  <optionvalue="http://feeds.reuters.com/reuters/oddlyEnoughNews">News</option>
  <option value="http://feeds.bbc.co.uk/iplayer/highlights/tv/list">BBC </option>
  <option value="http://rss.cnn.com/rss/edition.rss">CNN News</option>
</select>
<div id="result"></div> 
```

我的问题是，我不想通过从下拉列表中选择新来源来更改显示的提要，而是希望通过选择具有指定新来源的链接（href）来更改它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:46:03.337

而不是使用这个

```
<select id="menu">    
  <optionvalue="http://feeds.reuters.com/reuters/oddlyEnoughNews">News</option>
  <option value="http://feeds.bbc.co.uk/iplayer/highlights/tv/list">BBC </option>
  <option value="http://rss.cnn.com/rss/edition.rss">CNN News</option>
</select> 
```

用这个

```
<script type="text/javascript">
  $(document).ready(function() {
    //setting default feed
    setRSSFeed('http://feeds.reuters.com/reuters/oddlyEnoughNews');
    });
    function setRSSFeed(feedurl) {
       if (feedurl) {
             $('#result').rssfeed(feedurl);
                 }
              }
          });
</script>

    <a href="#" onclick="setRSSFeed('http://feeds.reuters.com/reuters/oddlyEnoughNews');">News</a>
    <a href="#" onclick="setRSSFeed('http://feeds.bbc.co.uk/iplayer/highlights/tv/list');">BBC</a>
    <a href="#" onclick="setRSSFeed('http://rss.cnn.com/rss/edition.rss');">CNN News</a> 
```

# php - 在codeigniter中提交表单后如何解决“302 found”响应

> ID：13559187
> 
> 赞同：4
> 
> 时间：2012-11-26T05:34:55.560
> 
> 标签：php, codeigniter, http-status-code-302

我正在使用 codeigniter，我有一个登录视图，我在其中将表单提交给控制器以获取登录功能，但我得到的响应是 302 Found，并重定向到我的登录页面。

我的控制器代码是

```
class super_admin extends CI_Controller
{

    public function index()
    {
        $this->load->view('admin/login_view');
    }

    function checkLogin()
    {
        $email = mysql_real_escape_string($_POST['email']);
        $pwd = mysql_real_escape_string($_POST['pwd']);

        $this->load->model('admin/admin_model');
        $user = $this->admin_model->checkUser($email);
        //print_r($user[0]);
        if ($user && ($user[0]->password == md5($pwd)))
        {

            $user_data = array(
                            'user_id' => $user[0]->user_id,
                            'user_name' => $user[0]->name,
                            'user_email' => $user[0]->email
                        );

            $this->session->set_userdata($user_data);
            $this->load->view('admin/dashboard_view',$user_data);
        }
        else
        {
            $this->session->set_flashdata('invalid', '<div class="alert alert-error" id="invalid" ><h6>Invalid Email or Password</h6></div>');
            redirect('admin/super_admin');
        }
    }
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:46:33.013

请不要在提交表单的方法中使用重定向加载视图，否则刷新页面时不会收到发布请求，并且您的条件返回 false，这将导致故障。试试这个解决方法。还要检查你的 $user 变量包含什么。

```
class super_admin extends CI_Controller
{

    public function index()
    {
        $this->load->view('admin/login_view');
    }

    function checkLogin()
    {
        $email = $this->input->post('email', TRUE);
        $pwd = $this->input->post('pwd', TRUE);

        $this->load->model('admin/admin_model');
        $user = $this->admin_model->checkUser($email);
        //print_r($user[0]);
        if ($user && ($user[0]->password == md5($pwd)))
        {

            $user_data = array(
                            'user_id' => $user[0]->user_id,
                            'user_name' => $user[0]->name,
                            'user_email' => $user[0]->email
                        );

            $this->session->set_userdata($user_data);
            redirect('super_admin/dashboard');
        }
        else
        {
            $this->session->set_flashdata('invalid', '<div class="alert alert-error" id="invalid" ><h6>Invalid Email or Password</h6></div>');
            redirect('admin/super_admin');
        }
    }

    function dashboard()
    {
       if( $this->session->userdata('user_id') ) {
         $user_data = $this->session->all_userdata();
         $this->load->view('admin/dashboard_view',$user_data);
       } else {
         redirect('admin/super_admin');
       }
    }
} 
```

# css - 元素不透明度但不是边框

> ID：13559188
> 
> 赞同：16
> 
> 时间：2012-11-26T05:34:58.333
> 
> 标签：css, border, opacity

好吧，我有这个问题，我看到有人已经问过类似的问题，但我还不明白。

我想要做的是将一个元素的不透明度设置为 0.7，但只是对内容而不是对边框，我希望边框保持全彩。这里有一些示例代码：

```
input#element{
    width: 382px;
    height: 26px;
    border: 2px solid #FFF;
    border-radius: 3px;
    opacity: 0.8;
} 
```

结果是我的输入元素有不透明度但甚至有边框，有人能告诉我如何在内容中设置不透明度而不是边框​​吗？

谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-26T05:42:44.840

`rgba`对颜色和背景使用语法，而不是对整个元素使用不透明度

[**演示小程序**](http://dabblet.com/gist/4146745)

```
input {
    width: 382px;
    height: 26px;
    border: 2px solid #FFF;
    border-radius: 3px;
    background: rgba(255, 255, 255, .8);
    color: rgba(0, 0, 0, .8);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T06:04:55.490

我没有看到这个问题是关于输入元素的，但也许我的回答会对其他人有所帮助，所以我们开始吧。

正如其他海报所说，您可以使用`rgba`语法来定义背景颜色。

如果您要更改的元素中有嵌套元素，您也可以`opacity`使用以下 css 将其应用于它们：

```
#element > * {
    opacity:0.8;
} 
```

这是一个例子：[JsFiddle](http://jsfiddle.net/ynNj7/2/)

如果您想要元素的背景图像，我认为最好的方法仍然是将其包装在带有边框的容器中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-21T16:42:32.870

不透明背景但不是边框 css

[**演示在这里**](http://jsfiddle.net/nnt25251325/Dnfqm/1/)

html

```
<div id="element"></div> 
```

css

```
#element{
    width: 156px;
    height: 156px;
    border: 2px solid #96d5ea;
    background:rgba(150, 213, 234,1);
    margin: 35px auto;
    -webkit-transform: rotate(-45deg);
    -webkit-transition: all 1s ease;
}

#element:hover {
    background:rgba(150, 213, 234,0);
    -webkit-transform: rotate(315deg);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T05:45:46.007

您可以将`background:rgba`属性用于您想要的结果，这只会影响您的`parent`not the`child`和`border`of `parent`。

**CSS**

```
input#element{
    width: 382px;
    height: 26px;
    border: 2px solid #000;
    border-radius: 3px;
    background:rgba(255,0,0,0.1);
} 
```

[**演示**](http://jsfiddle.net/xsyHV/3/)

# sql-server-2008-r2 - SQL Server 2008 R2 和检查约束

> ID：13559189
> 
> 赞同：1
> 
> 时间：2012-11-26T05:35:14.730
> 
> 标签：sql-server-2008-r2

我正在使用 SQL Server 2008 R2，对于我的原型，我想输入一堆历史数据，然后我想加入一个约束，例如

```
ProductionDate >= GETDATE() 
```

但我这样做后无法保存它，因为在历史数据检查失败后系统不会更改表。

我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:29:44.233

约束的重点是防止无效数据。要么删除您的历史数据并将其放在备份表中，要么对其进行更新以遵守约束；否则，您将不得不在前端进行验证。

另一种选择是有一个存档标志并将其合并到您的约束中：

> ProductionDate >= GETDATE() 或存档 = 1

# javascript - 我们可以将水印文本设置为背景吗？

> ID：13559191
> 
> 赞同：0
> 
> 时间：2012-11-26T05:35:33.297
> 
> 标签：javascript, html, watermark

我们可以将水印文本设置为水印的背景文本吗

```
<p style='position:fixed; color: #d0d0d0;font-size: 70pt;-webkit-transform: rotate(-45deg);-moz-transform: rotate(-45deg);left:center;'>Test Water mark</p> 
```

如果我给`z-index: -1`，`< p >`文字不可见

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:41:31.233

如果背景定义为 0 或更高，则 -1 处的文本不可见。因此，要查看所有内容，您至少需要两个“层”：一个背景层（位于较低的 Z，例如 -1），它还将包含您的水印，以及一个较高的层（例如 0），它*没有*背景（或将具有非透明背景）并将包含您的前景。

我怀疑你所做的是有一个前景+背景元素，默认 Z 为 0；在这种情况下，您不能在它们之间插入水印，因为它们*之间没有*；所以你的水印要么覆盖前景，要么在背景后面（因此不可见）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:34:11.280

将以下给定样式添加到 <P> 标记

```
width: 600px;
    height: 600px;
    position: fixed;
    top: 50%;
    left: 50%;
    margin-left: -100px;
    margin-top: -100px;
    color: grey; 
    font-size: 50px; 
    zoom: 1; 
    opacity: 0.4; 
    filter: alpha(opacity=40); 
```

# java - 使用java发送文件以形成帖子

> ID：13559192
> 
> 赞同：5
> 
> 时间：2012-11-26T05:35:35.853
> 
> 标签：java, post, httpclient, forms, http-post

我以前使用 Java 将信息发布到表单中，但我从未使用文件这样做过。我正在使用图像和文本文件测试这个过程，但显然我必须改变我这样做的方式。我目前的做法（如下所示）不起作用，我不完全确定我是否仍然可以使用 HttpClient。

params 部分只接受类型字符串。我有一个表格，我正在将文件上传到服务器。我用于 CMS 的站点不允许直接连接，因此我必须使用表单自动上传文件。

```
public static void main(String[] args) throws IOException {
    File testText = new File("C://xxx/test.txt");
    File testPicture = new File("C://xxx/test.jpg");

    HttpClient httpClient = new HttpClient();
    PostMethod postMethod = new PostMethod("xxxx");
    postMethod.addParameter("test", testText);

    try {
        httpClient.executeMethod(postMethod);
    } catch (HttpException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T05:41:43.737

使用`setRequestEntity`方法直接发送文件。

```
FileRequestEntity fre = new FileRequestEntity(new File("C://xxx/test.txt"), "text/plain");
post.setRequestEntity(fre);
postMethod.setRequestEntity(fre); 
```

要作为表单数据发送，请使用`MultipartRequestEntity`

```
File f = new File("C://xxx/test.txt");
Part[] parts = {
    new FilePart("test", f)
};
postMethod.setRequestEntity(
    new MultipartRequestEntity(parts, postMethod.getParams())
    ); 
```

参考：[https ://stackoverflow.com/a/2092508/324900](https://stackoverflow.com/a/2092508/324900)

# c# - 将文本列转换为对象绑定 DataGridView 控件中的组合框列

> ID：13559193
> 
> 赞同：0
> 
> 时间：2012-11-26T05:35:49.157
> 
> 标签：c#, winforms, datagridview, combobox

我有一个名为 Contacts 的类，其中包含一个名为`PhoneNumbers`. 每个`PhoneNumbers`对象都有几个属性，包括`PhoneNumber`和`PhoneType`以及外键`PhoneTypeFK`。我将此集合分配给 DataGridView 控件的 DataSource 并隐藏我不想在 DGV 中看到的列（属性）。这会在 DGV 中创建一堆用于电话号码和类型的文本单元格（行/列）。一切都很好，除了，我希望在“电话类型”列中显示一个组合框，其中填充了`PhoneTypes`表格的所有各种电话类型，并在该电话号码的单元格中显示了适当的电话类型。
我在某处读到我需要在设计时添加一个与对象`DataPropertyName`的属性相同的组合框列`PhoneNumbers`，即`PhoneType`这样当 DGV 填充列时，它将使用此列而不是创建一个新列（用于 PhoneType）。但是，我无法让它发挥作用。我使用下面的代码来填充 DGV 并隐藏不相关的列：

```
//Fill Grid
uxContactPhoneNumbersGrd.DataSource = contacts.PhoneNumbers;

//Hide non-required columns/rows
uxContactPhoneNumbersGrd.RowHeadersVisible = false;
string[] columnNamesToHide = { "ErrMsg", "ContactsFk", "PhoneNumbersPk", "PhoneTypesFk" };
SAPSCommon.Instance.HideGridColumns(ref uxContactPhoneNumbersGrd, columnNamesToHide); 
```

当我这样做时，我得到 2 列`PhoneType`，一个是在填充 DGV 时创建的文本单元格，另一个是我在设计时添加的组合框列（即使它具有与建议的相同的 DataPropertyName）。

如何仅获取 1 列`PhoneType`以及如何将其绑定到`PhoneTypes`表，以便来自`PhoneNumbers`对象的数据为相应的设置正确的 PhoneType `PhoneNumber`？`PhoneType`（在用对象填充网格之前，我是否需要先绑定组合框列`PhoneNumbers`？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T04:16:25.077

好的，经过数小时的反复试验，我似乎找到了解决方案。

基本流程是：

1.  在窗体上放置一个 DataGridView 控件
2.  将网格的第一列创建为文本框列对象，并将其 DataPropertyName 设置为与 PhoneNumbers 对象的 PhoneNumber 属性名称相同
3.  将网格的第 2 列创建为组合框列对象，并将其 DataPropertyName 设置为与 PhoneNumbers 对象的 PhoneType KEY 属性名称相同
4.  将组合框列绑定到支持表
5.  将列添加到网格
6.  将网格的 AutoGenerateColumns 属性设置为 False
7.  将网格数据源设置为 PhoneNumbers 对象

我将网格列的 DataPropertyName 命名为与 PhoneNumber 对象属性名称相同的原因是，网格会自动使用 PhoneNumber 对象列表中的数据填充正确的列。禁用 AutoGenerateColumns 可确保仅填充命名列，即网格不会自动为该应用程序不需要的 PhoneNumber 对象的其他属性生成列。

这是 PhoneNumber 类，用于在 Contacts 对象中创建 PhoneNumber 对象列表：

```
using System;
using System.Data;
using System.Text;

namespace SAPS
{
public class clsPhoneNumber
{
    #region Fields (4) 

    private int _contacts_FK;
    private string _errMsg;
    private string _phoneNumber;
    private int _phoneNumbers_PK;
    private int _phoneTypes_FK;
    private string _phoneType;

    #endregion Fields 

    #region Constructors (1) 

    public  clsPhoneNumber()
    {
        _errMsg = "";
        _phoneNumbers_PK = 0;
        _phoneTypes_FK = 0;
        _phoneType = "";
        _phoneNumber = "";
        _contacts_FK = 0;
    }

    #endregion Constructors 

    #region Properties (4) 

    public int ContactsFk
    {
        get { return _contacts_FK; }
        set { _contacts_FK = value; }
    }

    public string ErrMsg
    {
        get { return _errMsg; }
        set { _errMsg = value; }
    }

    public string PhoneNumber
    {
        get { return _phoneNumber; }
        set { _phoneNumber = SAPSCommon.Instance.StripNonNumerics(value); }
    }

    public int PhoneNumbersPK
    {
        get { return _phoneNumbers_PK; }
        set { _phoneNumbers_PK = value; }
    }

    public int PhoneTypesFK
    {
        get { return _phoneTypes_FK; }
        set { _phoneTypes_FK = value; }
    }

    public string PhoneType
    {
        get { return _phoneType; }
    }

    #endregion Properties 

    #region Methods (2) 

    // Public Methods (1) 

    /// <summary>
    /// Get the Notes for the specified key
    /// </summary>
    /// <param name="TableID">The Table Primary Key</param>
    /// <returns>An Object containing data for the specified Primary Key</returns>
    public clsPhoneNumber GetData(int TableID)
    {
        AssignProperties(SAPSCommon.Instance.ReadTable("PhoneNumbers", "PN_PhoneNumbers_PK", TableID));
        return this;
    }
    // Private Methods (1) 

    /// <summary>
    /// Assigns the table's data to the properties of the Data Object.
    /// This method must be hand coded for each table.
    /// </summary>
    /// <param name="ds">A Dataset containing the data record read from the Table</param>
    private void AssignProperties(DataSet ds)
    {
        //Assign properties with database data
        try
        {
            //Primary Key for Table
            _phoneNumbers_PK = ds.Tables[0].Rows[0].Field<int>("PN_PhoneNumbers_PK");

            //The rest of the data fields
            _contacts_FK = ds.Tables[0].Rows[0].Field<int>("PN_Contacts_FK");
            _phoneNumber = FormatPhoneNumber(ds.Tables[0].Rows[0].Field<string>("PN_PhoneNum"));
            _phoneTypes_FK = ds.Tables[0].Rows[0].Field<int>("PN_PhoneTypes_FK");

            //Follow links of Foreign Keys
            DataTable dt = new DataTable();
            string sqlSelect =
                string.Format(
                    "SELECT PT_Description FROM Pensions.dbo.PhoneTypes WHERE PT_PhoneTypes_PK = '{0}'",
                    _phoneTypes_FK);             
            dt = SQLCommon.Instance.SQLSelect(sqlSelect);
            _phoneType = dt.Rows[0].Field<string>("PT_Description");
        }
        catch (Exception e)
        {
            _errMsg = e.Message;
            SAPSCommon.Instance.ShowErrorMsg(e.Message);
        }
    }

    /// <summary>
    /// Format an Australian Phone number
    /// </summary>
    /// <param name="Num">Phone Number to format in string format</param>
    /// <returns>Formatted Phone Number</returns>
    private string FormatPhoneNumber(string Num)
    {
        if (Num.Substring(0, 2) == "04") //Mobile Number
        {
            return string.Format("{0:0### ### ###}", Convert.ToInt64(Num));
        }
        return string.Format("{0:(0#) #### ####}", Convert.ToInt64(Num));
    }

    #endregion Methods 

    public string  Update()
    {
        StringBuilder sb = new StringBuilder("UPDATE [");
        sb.Append(Properties.Settings.Default.SQLDatabaseName);
        sb.Append("].[dbo].[PhoneNumbers] SET PN_Contacts_FK='");
        sb.Append(_contacts_FK);
        sb.Append("', PN_PhoneTypes_FK='");
        sb.Append(_phoneTypes_FK);
        sb.Append("', PN_PhoneNum='");
        sb.Append(_phoneNumber);
        sb.Append("' WHERE PN_PhoneNumbers_PK='");
        sb.Append(_phoneNumbers_PK);
        sb.Append("'");

        _errMsg = SQLCommon.Instance.SQLUpdate(sb.ToString());
        return _errMsg;
    }
} 
```

}

这是填充 DataGridView 控件的代码：

```
 private void PopulatePhoneNumbers(clsContacts contacts)
    {
        //Create the 1st column as a textbox for the Phone Number
        DataGridViewTextBoxColumn tb = new DataGridViewTextBoxColumn();
        tb.Name = "PhoneNumber";
        tb.DataPropertyName = "PhoneNumber"; //This is the name of the PhoneNumber object Property for Phone Number

        //Create  2nd column as combobox for PhoneType
        DataGridViewComboBoxColumn cb = new DataGridViewComboBoxColumn();
        cb.Name = "PhoneTypes";
        cb.DataPropertyName = "PhoneTypesFK"; //This is the name of the PhoneNumber object Property for Phone Type

        //Bind the cb to the table
        string sqlQuery = "SELECT PT_PhoneTypes_PK, PT_Description " +
                          "FROM [Pensions].[dbo].[PhoneTypes] ";
        DataTable dtPhoneTypes = SQLCommon.Instance.SQLSelect(sqlQuery);
        cb.DataSource = dtPhoneTypes;
        cb.ValueMember = dtPhoneTypes.Columns["PT_PhoneTypes_PK"].ColumnName;
        cb.DisplayMember = dtPhoneTypes.Columns["PT_Description"].ColumnName;

        uxContactPhoneNumbersGrd.Columns.Add(tb);
        uxContactPhoneNumbersGrd.Columns.Add(cb);

        uxContactPhoneNumbersGrd.AutoGenerateColumns = false;

        if (contacts.PhoneNumbers != null)
        {
            //Show how many phone numbers
            uxContactPhoneNumbersLbl.Text = string.Format("Phone Numbers ({0})", contacts.PhoneNumbers.Count);
            uxContactPhoneNumbersLbl.Visible = true;
            //Fill Grid
            uxContactPhoneNumbersGrd.DataSource = contacts.PhoneNumbers;
            //Hide non-required columns/rows
            uxContactPhoneNumbersGrd.RowHeadersVisible = false;
        }

        //Adjust text column size and auto wrap
        uxContactPhoneNumbersGrd.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill;
        uxContactPhoneNumbersGrd.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.AllCells;
   } 
```

我希望这可以帮助其他一些可怜的人尝试使用支持表使 DataGridView 控件显示来自对象的数据...

# jquery - 与正文中的卸载功能相关的 Jquery 问题

> ID：13559195
> 
> 赞同：-3
> 
> 时间：2012-11-26T05:35:56.883
> 
> 标签：jquery

当我尝试离开页面时，它应该询问确认消息，如果我点击确定，它会重定向到其他页面，如果我点击“取消”它会停留在同一页面上谁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:37:18.640

你可以`onbeforeunload`这样使用

```
window.onbeforeunload = function () {
        return "There are unsaved changes to your survey";

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:40:07.530

单击确定时，您无法重定向到其他页面，浏览器不会提供这样的选项。您所能做的就是在关闭选项卡/窗口之前显示警告消息。现代浏览器甚至不允许在该窗口中显示自定义消息。

# android - 如何让 LibGDX 的 AndroidApplication 类支持 Android Fragments？

> ID：13559196
> 
> 赞同：5
> 
> 时间：2012-11-26T05:35:56.747
> 
> 标签：android, android-fragments, android-activity, libgdx

**我的目标：**我想在 Android 上的 libgdx 游戏旁边使用片段。

这就是问题所在。对于托管 libgdx 游戏的活动，它必须扩展 AndroidApplication 类。

```
public class MyGameActivity extends AndroidApplication {} 
```

而 AndroidApplication 也是 Activity 类的扩展

```
public class AndroidApplication extends Activity ... {} 
```

我想在活动中使用片段，这就是问题所在。我还需要让 MyGameActivity 像这样扩展 FragmentActivity 以支持片段

```
public class MyGameActivity extends FragmentActivity {} 
```

但是如果不扩展AndroidApplication，游戏将无法运行。我该如何解决这个问题？

如果我能做到这一点...

```
public class MyGameActivity extends AndroidApplication, FragmentActivity {} 
```

我正在使用支持库使应用程序向后兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-03T20:42:16.650

**更新：** LibGdx 现在支持 Android 片段，使用 AndroidFragmentApplication。查看[文档](https://github.com/libgdx/libgdx/wiki/Starter-classes-%26-configuration#fragment-based-libgdx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:52:41.317

你不能在 Java 中进行多重继承，即使你能做到，它会如何工作？

您可以做的是复制此代码[https://github.com/libgdx/libgdx/blob/master/backends/gdx-backend-android/src/com/badlogic/gdx/backends/android/AndroidApplication.java](https://github.com/libgdx/libgdx/blob/master/backends/gdx-backend-android/src/com/badlogic/gdx/backends/android/AndroidApplication.java)

在你的类中继承自 FragmentActivity

公共类 MyAndroidApplication 扩展 FragmentActivity 实现 Application

在你实例化 AndroidApplication 的地方你必须实例化 MyAndroidApplication。

# android - 在“Uri newUri = contentResolver.insert(base, values);”行中出现错误 在下面的代码中

> ID：13559199
> 
> 赞同：0
> 
> 时间：2012-11-26T05:36:26.203
> 
> 标签：android, audio-recording

```
package com.example.audiorecordtest;

import java.io.IOException;

import android.app.Activity;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.media.MediaPlayer;
import android.media.MediaRecorder;
import android.media.MediaRecorder.OnInfoListener;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.Log;
import android.view.Surface;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class AudioRecordTest extends Activity implements OnInfoListener {

    private static final String LOG_TAG = "AudioRecordTest";
    private static String mFileName;
    long start_time;
    private RecordButton mRecordButton = null;
    private MediaRecorder mRecorder = null;
    protected Uri newUri;
    private MediaPlayer mPlayer = null;
    TextView time;

    private void onRecord(boolean start) {
        if (start) {
            startRecording();
        } else {
            stopRecording();
        }
    }
    private void startRecording() {
        try {
            mRecorder = new MediaRecorder();
            mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
            mRecorder.setMaxDuration(30000);
            mRecorder.setOnInfoListener(this);
            mRecorder.setOutputFile(mFileName);
            mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);   
            mRecorder.prepare();
            mRecorder.start();
        } catch (IOException e) {
            Log.e(LOG_TAG, "prepare() failed");
        }

        time.setText("Recording...");
    }

    private void stopRecording() {
        mRecorder.stop();
        mRecorder.release();
        time.setText("");
        mRecorder = null;
        addRecordingToMediaLibrary();
        finish();
    }

    protected void addRecordingToMediaLibrary() {

        ContentValues values = new ContentValues(3);
        long current = System.currentTimeMillis();
        values.put(MediaStore.Audio.Media.TITLE, "audio" + mFileName);
        values.put(MediaStore.Audio.Media.DATE_ADDED, (int) (current / 1000));
        values.put(MediaStore.Audio.Media.MIME_TYPE, "audio/3gpp");
        ContentResolver contentResolver = getContentResolver();
        Uri base = MediaStore.Audio.Media.EXTERNAL_CONTENT_URI;
        Uri newUri = contentResolver.insert(base, values);
        sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, newUri));
        Toast.makeText(this, "Added File " + newUri, Toast.LENGTH_LONG).show();
    }

    class RecordButton extends Button {
        boolean mStartRecording = true;

        OnClickListener clicker = new OnClickListener() {
            public void onClick(View v) {
                onRecord(mStartRecording);
                if (mStartRecording) {
                    setText("Stop recording");
                } else {
                    setText("Start recording");
                }
                mStartRecording = !mStartRecording;
            }
        };

        public RecordButton(Context ctx) {
            super(ctx);
            setText("Start recording");
            setOnClickListener(clicker);

        }
    }

    public AudioRecordTest() {
        mFileName = Environment.getExternalStorageDirectory().getAbsolutePath();
        System.out.println("mFileName" + mFileName);
        mFileName += "/recording-" + System.currentTimeMillis() + ".3gpp";
        System.out.println("mFileName after appending" + mFileName);
    }

    protected void onActivityResult(int requestCode, int resultCode,
            Intent imageReturnedIntent) {
        if (imageReturnedIntent != null) {

            Uri audioUri = imageReturnedIntent.getData();
            System.out.println("audioUri" + audioUri);

        }
    }

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        LinearLayout ll = new LinearLayout(this);

        mRecordButton = new RecordButton(this);
        ll.addView(mRecordButton, new LinearLayout.LayoutParams(
                ViewGroup.LayoutParams.WRAP_CONTENT,
                ViewGroup.LayoutParams.WRAP_CONTENT, 0));
        time = new TextView(this);
        ll.addView(time, new LinearLayout.LayoutParams(
                ViewGroup.LayoutParams.WRAP_CONTENT,
                ViewGroup.LayoutParams.WRAP_CONTENT, 0));
        setContentView(ll);
    };

    @Override
    public void onPause() {
        super.onPause();
        if (mRecorder != null) {
            mRecorder.release();
            mRecorder = null;
        }

        if (mPlayer != null) {
            mPlayer.release();
            mPlayer = null;
        }
    }

    @Override
    public void onInfo(MediaRecorder mr, int what, int extra) {
        // TODO Auto-generated method stub

    }
} 
```

日志猫：

```
11-26 11:01:38.750: E/AndroidRuntime(23749): FATAL EXCEPTION: main
11-26 11:01:38.750: E/AndroidRuntime(23749): java.lang.NullPointerException
11-26 11:01:38.750: E/AndroidRuntime(23749):    at android.os.Parcel.readException(Parcel.java:1431)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:188)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:140)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at android.content.ContentProviderProxy.insert(ContentProviderNative.java:420)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at android.content.ContentResolver.insert(ContentResolver.java:864)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at com.example.audiorecordtest.AudioRecordTest.addRecordingToMediaLibrary(AudioRecordTest.java:114)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at com.example.audiorecordtest.AudioRecordTest.stopRecording(AudioRecordTest.java:101)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at com.example.audiorecordtest.AudioRecordTest.onRecord(AudioRecordTest.java:49)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at com.example.audiorecordtest.AudioRecordTest.access$0(AudioRecordTest.java:45)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at com.example.audiorecordtest.AudioRecordTest$RecordButton$1.onClick(AudioRecordTest.java:124)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at android.view.View.performClick(View.java:4084)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at android.view.View$PerformClick.run(View.java:16966)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at android.os.Handler.handleCallback(Handler.java:615)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at android.os.Looper.loop(Looper.java:137)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at android.app.ActivityThread.main(ActivityThread.java:4745)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at java.lang.reflect.Method.invokeNative(Native Method)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at java.lang.reflect.Method.invoke(Method.java:511)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-26 11:01:38.750: E/AndroidRuntime(23749):    at dalvik.system.NativeStart.main(Native Method)
11-26 11:06:37.210: I/Process(23749): Sending signal. PID: 23749 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:15:41.717

您可以尝试的一件事是将构造函数中的以下代码移动到`onCreate()`活动的方法..

```
mFileName = Environment.getExternalStorageDirectory().getAbsolutePath();
        System.out.println("mFileName" + mFileName);
        mFileName += "/recording-" + System.currentTimeMillis() + ".3gpp";
        System.out.println("mFileName after appending" + mFileName); 
```

# c# - 运行时想要从字符串中获取动态列表

> ID：13559205
> 
> 赞同：-1
> 
> 时间：2012-11-26T05:37:15.753
> 
> 标签：c#, .net, code-generation, dynamic-list

我有一个`List<string>`包含列名和相应的数据类型

假设我的清单是：

```
List<string> oList = { 
             "Name-Varchar", 
             "UserID-int", 
             "Address-Varchar", 
             "DBO-Date", 
             "Salary-Money" }; 
```

使用上面`List`想要创建一个具有属性**名称的动态列表，用户ID，地址，DBO，工资** 然后想用数据库表信息填充这个列表。要使用这个列表可能需要创建实例。

1.  在运行时要创建动态列表。
2.  按 DB 值填充列表。
3.  全局声明此列表，因此需要创建列表的实例。

这可能吗 ？

如果有可能，那么我应该怎么做？

请提供一些可行的语法。如果您有任何疑问，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:50:39.590

列表项的自定义类如何，然后为从数据库中检索的每一行添加一个？

```
public class Employee
{
    string Name { get; set; }
    string UserID { get; set; }
    string Address { get; set; }
    string DBO { get; set; }
    string Salary { get; set; }
} 
```

创建您的列表

```
List<Employee> lstEmployees = new List<Employee>; 
```

然后添加每个项目在循环中弹出它（假设它在 a 中`DataTable`）：

```
foreach (DataRow row in dt)
{
    Employee e = new Employee();
    e.Name = row["name"];
    e.UserID = row["userid"];
    e.Address = row["address"];
    e.DBO = row["dbo"];
    e.Salary = row["salary"];
    lstEmployees.Add(e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:33:12.033

不太确定你想要什么......但试试这个

```
List<Dictionary<string,object>> YourList = new List<Dictionary<string,object>>();

foreach (DataRow row in dt)
{
    Dictionary<string,object> e = new Dictionary<string,object>();
    e["name"] = row["name"];
    e["userid"] = row["userid"];
    e["address"] = row["address"];
    e["dbo"] = row["dbo"];
    e["salary"] = row["salary"];
    YourList.Add(e);
} 
```

虽然我不认为这是一个好主意！

请更清楚地描述您的目标，以便给出更好的答案...

# php - 从多个表中选择一个值

> ID：13559208
> 
> 赞同：0
> 
> 时间：2012-11-26T05:37:36.533
> 
> 标签：php, jquery, mysql

我已将搜索选项添加到项目中。当某些特定用户在搜索文本框中输入时，我使用 jquery 自动完成功能来显示关键字的相关结果。

这是我的 php 脚本..

```
<?php

require_once('database.php');

if(isset($_POST['queryString'])) {

    $queryString = $dbc->real_escape_string($_POST['queryString']);

    if(strlen($queryString) >0) {
        //$query = $dbc->query("SELECT subjects FROM subject WHERE subjects LIKE '$queryString%' LIMIT 10");
        $q = "SELECT tutor_name FROM tutors WHERE tutor_name LIKE '%$queryString%' LIMIT 10";

        $r = mysqli_query ( $dbc, $q);

        if($q) {
            while ($row = mysqli_fetch_array($r, MYSQL_ASSOC)) {
                echo '<li onClick="fill(\''.$row['tutor_name'].'\');">'.$row['tutor_name'].'</li>';
            }
        } else {
            echo 'ERROR: There was a problem with the query.';
        }
    } else {

    }
} else {
    echo 'There should be no direct access to this script!';
}

?> 
```

这对我来说工作正常..但我的问题是我需要使用键入关键字检查多个表。在这里我只使用一个表..任何人都可以告诉我如何将我的其他表附加到这个查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T05:39:35.210

利用`UNION`

```
SELECT keyword 
FROM
(
    SELECT tutor_Name AS keyword FROM tutors
    UNION
    SELECT subject_name AS keyword FROM subjects
    UNION
    SELECT institute_name AS keyword FROM institutes
) s
WHERE keyword LIKE '%$queryString%' 
LIMIT 10 
```

您的查询也容易受到攻击`SQL Injection`，请阅读下面的文章

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:12:23.603

下面`Query merge three tables`那个`returns`你只有那些`selective records present in tables`上的`basis of common column in the tables`。

```
SELECT tutor_name FROM yourDB
LEFT JOIN tableA ON tutor_name = '%$queryString%'
LEFT JOIN tableB ON tutor_name = '%$queryString%'; 
```

希望这对你有用。

# jquery - 引导弹出框不适用于第一个 mouseenter 事件

> ID：13559209
> 
> 赞同：2
> 
> 时间：2012-11-26T05:37:50.340
> 
> 标签：jquery, twitter-bootstrap, popover, jquery-hover

我使用代码如下

```
<a class="reply"  data-content="this is the mail" 
data-original-title="this is the title" rel="popover">this</a> 
```

我触发了jquery事件如下

```
$(document).on("mouseenter",".reply",function(event){
   $(this).popover({placement:'bottom'});
}); 
```

但问题是在第一个悬停事件上没有显示弹出框

从第二个事件 popover 开始正常显示......这种活动的原因是什么以及如何纠正它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:42:54.670

您需要添加`trigger: 'hover'`或添加`trigger: 'manual'`到弹出框的选项中。就个人而言，我会用以下内容替换您的javascript。

```
$(function(){
  $('.reply').popover({
    placement: 'bottom',
    trigger: 'hover'
  })
}) 
```

编辑，如果你必须使用你设置的javascript，试试这个

```
$(document).on("mouseenter",".reply",function(event){
  $(this).popover({
    placement:'bottom', 
    trigger: 'hover'
  }).popover('show');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:03:44.687

我找到了添加以下代码的答案使其工作

```
$(document).on("mouseenter",".reply",function(event){
  $(this).popover({placement:'bottom'});
  $(this).popover('toggle');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:27:34.927

您应该使用该`selector`属性来委托 Popover 插件（[请参阅文档](http://twitter.github.com/bootstrap/javascript.html#popovers)）。像这样：

```
$('body').popover({
  placement: 'bottom',
  trigger: 'hover',
  selector: '.reply'
}); 
```

[**注意：**在实践中，比推荐的范围更窄的代表`'body'`。]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-11T06:42:42.997

只需选择您的元素，然后通过悬停调用弹出框

```
$("[rel=popover]").popover({trigger:"hover"}); 
```

# iphone - 点击背景将背景颜色更改为所选颜色

> ID：13559211
> 
> 赞同：1
> 
> 时间：2012-11-26T05:38:32.883
> 
> 标签：iphone, objective-c, ios, xcode, ipad

![在此处输入图像描述](../Images/e9ec1423c1a1b5c175cbf75766a6d782.png)

我想在我的应用程序中添加一项功能，例如用户可以更改他触摸的背景颜色的相似部分的颜色。用户也可以撤消事件，有一个名为**[wall Pentair](https://itunes.apple.com/us/app/wall-painter/id396799182?mt=8)**的应用程序我完全想要相同的功能。

我不知道从哪里开始，必须使用哪些框架。

我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:48:40.963

你可以得到你在背景中触摸的像素的颜色。之后用另一种颜色替换该颜色。为了检测颜色，我使用了 ColorPickerImageView 类。您可以从此链接下载该类 [https://www.assembla.com/code/GeoBattle/subversion/nodes/xcode/Classes/ColorPickerImageView.m?rev=189](https://www.assembla.com/code/GeoBattle/subversion/nodes/xcode/Classes/ColorPickerImageView.m?rev=189)

这可能会帮助你

# android - 如何使用代码进行联系人备份？

> ID：13559212
> 
> 赞同：4
> 
> 时间：2012-11-26T05:38:35.847
> 
> 标签：android, backup, android-contacts

众所周知，当我们点击联系人中的“导出到SD卡”选项时，这意味着我们正在创建我们的联系人备份，并且该文件以扩展名存储为.VCF文件格式，稍后当我们导入时文件，android 操作系统会自动获取其中的所有联系人并保存在我们的联系人中。我只想使用代码创建那个 .VCF（联系人备份文件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:44:52.773

[vcardio](http://code.google.com/p/vcardio/)是一个开源应用程序，它完全按照您的描述进行操作。如果有必要，我会检查并调整它。

# xml - 如何使用 XPath 根据多个子元素选择不同的元素？

> ID：13559216
> 
> 赞同：0
> 
> 时间：2012-11-26T05:39:26.750
> 
> 标签：xml, xpath

我需要使用 XPath 来选择基于多个子元素的不同元素。

我有一些这样的 XML：

```
<Cars>
  <Car>
    <Make>SuperCar</Make>
    <Year>2009</Year>
  </Car>
  <Car>
    <Make>SuperCar</Make>
    <Year>2010</Year>
  </Car>
  <Car>
    <Make>AwesomeCar</Make>
    <Year>2010</Year>
  </Car>
  <Car>
    <Make>SuperCar</Make>
    <Year>2009</Year>
  </Car>
</Cars> 
```

而且我需要使用 XPath（我仅限于 XPath 1.0）来仅选择不同的元素，其中 distinct 由`Make`和定义`Year`。

在上面的示例中，这意味着返回`Car`除最后一个之外的所有对象（因为这是第一个的副本`Car`）。

在典型情况下（即对象由单个键字段标识），我将使用与此类似的 XPath：

```
/*/Car[not(./Id/text()=following-sibling::Car/Id/text())] 
```

但是，我不太清楚如何调整它以正确使用多个字段。

我考虑过这样的事情：

```
/*/Car[not(./Make/text()=following-sibling::Car/Make/text()
   and ./Model/text()=following-sibling::Car/Model/text())] 
```

但这会检查是否在`Make`任何地方使用以及是否在`Model`任何地方使用，而不能确保它们必须在同一个. 上使用`Car`。例如，它错误地`Car`从以下示例 XML 中排除了第一个：

```
<Cars>
  <Car>
    <Make>SuperCar</Make>
    <Year>2009</Year>
  </Car>
  <Car>
    <Make>SuperCar</Make>
    <Year>2010</Year>
  </Car>
  <Car>
    <Make>AwesomeCar</Make>
    <Year>2009</Year>
  </Car>
</Cars> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:48:27.110

使用 XPath1.0 似乎这是不可能的：

[如何使用 XPATH 从 XML 文档中选择不同的值？](https://stackoverflow.com/questions/2871707/how-to-select-distinct-values-from-xml-document-using-xpath?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:34:45.020

以下 XPath 查询根据 Make 和 Year 返回不同的汽车（使用您的 XML 示例时）：

```
/*/Car[not(./Make/text()=preceding-sibling::Car/Make/text() and ./Year/text()=preceding-sibling::Car/Year/text())] 
```

检查前面的兄弟姐妹更明显，因为它们已经被“索引”了。上面的查询给出以下输出：

```
<Car>
    <Make>SuperCar</Make>
    <Year>2009</Year>
</Car>
<Car>
    <Make>SuperCar</Make>
    <Year>2010</Year>
</Car>
<Car>
    <Make>AwesomeCar</Make>
    <Year>2010</Year>
</Car> 
```

# algorithm - Job Shop Scheduling - 课程项目 - 关于参考/alg 的建议。用于实施和获得实验结果

> ID：13559219
> 
> 赞同：1
> 
> 时间：2012-11-26T05:40:01.623
> 
> 标签：algorithm, scheduling, np-hard

我正在开发一个项目来实施和测试一个 NP-Hard/Complete 问题。我有一个大致的想法来做一些关于调度的事情，并且已经阅读了很多关于 Job Shop 问题的内容。我知道 OR 库中有著名的测试用例/基准可供使用。我有适当的代码（Java）来读取测试实例并存储其数据。现在我感觉陷入了一个循环，试图找到一种算法/方法来创建一个时间表，然后提出一个最佳时间表。我读了很多学术论文，但我通常会迷失在其中，尤其是复杂的集合符号。我希望我能找到更多伪代码的例子。我知道这是一个经典问题，我想知道是否有人对作业车间的直接经典解决方案提出建议——尤其是任何有伪代码示例的解决方案。我不需要为这个项目做原创研究。我只需要学习如何应用已知技术来解决 NP-Hard 问题、编写代码、运行测试、展示实验结果并对其进行评论。任何建议或帮助将不胜感激。

“必须完成许多工作，每项工作都包括在一定时间内使用多台机器。问题是要找到在最短的时间内在所有不同机器上完成所有工作的最佳计划。”

示例问题实例：

datalines 部分中的每一行通过 10 对连续数字指定一个作业。每对数字定义了作业的一个任务，代表了作业在机器上的处理。对于每一对，第一个数字标识它执行的机器，第二个数字是持续时间。10 对的顺序定义了作业的任务顺序。

“劳伦斯 10x10 实例”（表 6，实例 4）；也称为 (seta4) 或 (A4)(Applegate 和 Cook; 1991) -10 机器编号 0-9 -10 行 = 10 个工作 -- 最佳：842

2 44 3 5 5 58 4 97 0 9 7 84 8 77 9 96 1 58 6 89

4 15 7 31 1 87 8 57 0 77 3 85 2 81 5 39 9 73 6 21

9 82 6 22 4 10 3 70 1 49 0 40 8 34 2 48 7 80 5 71

1 91 2 17 7 62 5 75 8 47 4 11 3 7 6 72 9 35 0 55

6 71 1 90 3 75 0 64 2 94 8 15 4 12 7 67 9 20 5 50

7 70 5 93 8 77 2 29 4 58 6 93 3 68 1 57 9 7 0 52

6 87 1 63 4 26 5 6 2 82 3 27 7 56 8 48 9 36 0 95

0 36 5 15 8 41 9 78 3 76 6 84 4 30 7 76 2 36 1 8

5 88 2 81 3 13 6 82 4 54 7 13 8 29 9 40 1 78 0 75

9 88 4 54 6 64 7 32 0 52 2 6 8 54 5 82 3 6 1 26

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:26:10.083

看看[Drools Planner](http://www.jboss.org/drools/drools-planner)（一个用于调度此类问题的开源 Java 框架）中使用的算法，它们在[手册](http://docs.jboss.org/drools/release/5.5.0.Final/drools-planner-docs/html_single/index.html)中有详细解释。

# jquery-easyui - jquery easyui数据网格onchange如何

> ID：13559223
> 
> 赞同：0
> 
> 时间：2012-11-26T05:40:53.283
> 
> 标签：jquery-easyui

**Jquery easyui**我想在更改组合框limitid字段时更改customer_name，

这是我的数据网格字段

*带有组合框的第一个字段：'limitid'*

```
th  data-options="field:'limitid', 
width:250,sortable:'true',
formatter:limitidFormatter,

 editor:{                        
type:'combobox',
 options:{

valueField:'limitid',

textField:'name',

data:limitidlist,

required:true

}

}">Limit ID</th> 
```

*第二个字段：客户名称*

```
th   data-options="field:'customer_name',

sortable:'true',

width:250">

Customer Name'/th>' 
```

我想知道如何触发 onchange 功能并填写客户姓名字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:56:01.557

使用组合框的 onselect 函数...

尝试这个..

```
editor:{
      type:'combobox',
      options:{
                valueField:'limitid',
                textField:'name',
                data:limitidlist,
                required:true
        },
      onSelect:function(record){
                   console.log(record); //this is called whn user select the combobox
                  //do your stuff here///
            }
   } 
```

# php - PHP - preg_match - 匹配一个 !word，或匹配 !word 后跟 word(s)

> ID：13559224
> 
> 赞同：1
> 
> 时间：2012-11-26T05:41:07.900
> 
> 标签：php, regex, preg-match

我正在尝试找到一个正则表达式模式来匹配以下与模式（不带引号）：

"!comm" - 匹配，match(0) = !comm，match(1) = comm

"!comm param1 param2" - 匹配，match(0) = !comm param1 param2，match(1) = comm，match(2) = param1 param2

"!comm" - 不应该匹配

我开始如下：

```
$string1 = "!comm";
$string2 = "!comm param1 param2";
$string3 = "!comm ";

preg_match("`!(.*?)$`", $string1, $match1);
preg_match("`!(.*?)\s(.*)$`", $string2, $match2);
preg_match("`!(.*?)\S$`", $string3, $match3);

echo "<h1>Test 1</h1>";
echo "<pre>";
print_r($match1);
print_r($match2);
print_r($match3);
echo "</pre>"; 
```

这给出了我想要的确切输出，只是它们没有被概括并且仅作为个人工作：

```
Array
(
    [0] => !comm
    [1] => comm
)
Array
(
    [0] => !comm param1 param2
    [1] => comm
    [2] => param1 param2
)
Array
(
) 
```

然后尝试将它们合并为：

```
`!(.+)($|\s(.*)$|\S$)` 
```

但显然失败了，我知道我想错了。我尝试了一些其他的，虽然我没有保存它们，但经过一段时间的谷歌搜索后，我主要是盲目射击。前瞻方式，或者 if/else 方式，要么已经结束了“！comm param1 param2”和“！comm”匹配，要么每个都作为单独的。

我确实觉得这在 RegEx 中是可行的，但我对 RegEx 还是太陌生，我觉得我的思维方式还没有找到它的位置。因此，除了可以使用的功能齐全的 RegEx 之外，我还想要一个逐步的过程来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:56:17.237

您可以将模式组合成这样：

```
`^!(\S+)(?:\s+(\S+.*))?+$` 
```

1.  从...开始 ”！”
2.  “comm”应该是非空格字符。
3.  然后是任何内容或任意数量的空格和参数字符串

# php - WordPress 和 Mybb

> ID：13559225
> 
> 赞同：0
> 
> 时间：2012-11-26T05:41:11.640
> 
> 标签：php, wordpress, mybb

是的，我知道有一个插件可以将两者连接起来，但我想让它们分开。基本上我希望 wordpress 中的导航菜单指向一个子域或带有 mybb 论坛的文件夹。每个人都告诉我要使用插件。另外，如果您将文件夹添加到 wordpress，它不仅会给您错误，这些页面不存在吗？那么子域是最好的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:50:30.777

在不使用桥接的情况下将两者分开是完全可以的。如果您想从 Wordpress 菜单中获得指向 MyBB 的链接，您可以在管理面板 -> 外观 -> 菜单中添加它，将自定义链接添加到您的论坛 URL。

默认情况下，Wordpress 中的 .htaccess 文件不会重写服务器上存在的任何文件夹/文件的 URL。因此，*可以*将 MyBB 作为您的 Wordpress 安装中的子文件夹。但是，如果您将它放在单独的子域中，它可能会更干净，更容易维护。

# php - in_array 的问题，返回 false

> ID：13559226
> 
> 赞同：2
> 
> 时间：2012-11-26T05:41:15.873
> 
> 标签：php, arrays, csv

我希望你能帮助我解决这个尴尬的问题。我正在尝试从 csv 文件中的所有行中获取某个值，在 in_array() 之前一切正常。

CSV 文件如下所示：

```
Mach Vu,11-25-2012  21:32:39,row1
Mach Vu,11-25-2012  21:32:46,row2 
```

我试图从每一行（即'row1'，'row2'）中获取最后一个值。

这是我的代码：

```
$i = 1;

foreach($array2 as $key=>$value) {
    foreach($array2[$key] as $value2) {
        if($i % 3 == 0) {
           $array3[] = $value2;
        }
        $i++;
    }
}
print_r($array3);
echo "<br />";

if(in_array("row1", $array3)) {echo "yes";} else {echo "no";} 
```

阵列 3 正在打印：

```
Array ( 
   [0] => row1
   [1] => row2
) 
```

提前感谢您的帮助！祝一切顺利 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:54:46.493

这可能会为您解决问题，同时还可以稍微减少您的代码并大大提高性能。

我的猜测是 in_array 由于额外的空白而无法正常工作，因此添加了 trim()

```
$search = "row1";
$col = 2;
$found = false;

foreach ($array2 as $key => $value) {
    if (trim($value[$col]) == $search) {
        $found = true;
        break;
    }
}

print_r($array3);
print($found ? "yes" : "no"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:49:45.850

更简单的东西怎么样？

```
$s = "Mach Vu,11-25-2012  21:32:39,row1";
$parsed_string = str_getcsv($s);
print $parsed_string[2]; 
```

这将打印`row1`. 请参阅[`str_getcsv`](http://php.net/str_getcsv).

如果您正在阅读文件，请尝试以下操作（来自[`fgetcsv`手册页上](http://www.php.net/manual/en/function.fgetcsv.php)的示例）：

```
if (($handle = fopen("test.csv", "r")) !== FALSE) {
  while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $array3[] = $data[2];
   }
}
fclose($handle);

if (in_array("row1",$array3)) {
    print "yes";
} 
```

# wordpress - 从外部图像创建 wordpress 帖子特色图像

> ID：13559227
> 
> 赞同：0
> 
> 时间：2012-11-26T05:41:18.287
> 
> 标签：wordpress

有什么方法可以从外部来源添加特色图片

$image = "http://example.com/test.jpg";

我想将此图像设置为我的帖子特色图像

我们可以这样做吗？

问候，

古普雷特

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-26T05:44:46.583

检查屏幕截图它已经 -

![射击](../Images/e77c6e83f1eadf54fd299422d7b5a772.png)

# ios - 如何防止重新排序 UICollectionView 中的最后一个单元格？

> ID：13559232
> 
> 赞同：0
> 
> 时间：2012-11-26T05:41:30.593
> 
> 标签：ios, uicollectionview

我试图阻止集合视图中的最后一个单元格被重新排序。本质上，我希望“添加项目”单元格始终是集合中的最后一个单元格。

有任何想法吗？

提前致谢。

编辑：我正在使用LXReorderableCollectionViewFlowLayout 使用[longPress](https://github.com/lxcid/LXReorderableCollectionViewFlowLayout)手势重新排序我的单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:00:52.253

你可以试试这个……这对我有帮助……

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
             {
              return [array count]+1;
              }

          - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
               {
               if (indexPath.row == ([array count]+1)) {
                    UILabel * headerLabel = [[UILabel alloc] initWithFrame:CGRectZero];
                    headerLabel.text = @"your text";
                    headerLabel.frame = CGRectMake(110.0, 11.0, 100.0, 20.0);
                    [cell addSubview:headerLabel];
                    }
                 else
                   {
                   }
               } 
```

我希望这能帮到您。

快乐编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T01:49:26.723

我找到了一个非常简单的方法来做到这一点。

[如何执行此操作的详细信息在这里。](http://www.techotopia.com/index.php/An_iPhone_iOS_6_Storyboard-based_Collection_View_Tutorial#Implementing_a_Supplementary_View)

本教程展示了如何在 UICollectionView 中设置补充视图（页眉或页脚）。我刚刚将我的标签和按钮添加到我的自定义补充视图中，瞧！

# iphone - iOS - 关闭 facebook 窗口不会触发dismissViewController 完成块

> ID：13559233
> 
> 赞同：0
> 
> 时间：2012-11-26T05:41:42.793
> 
> 标签：iphone, ios, facebook, ipad, twitter

我为 iOS 6 编译并运行了这段代码。

```
SLComposeViewController *control = [SLComposeViewController composeViewControllerForServiceType:...];
[control setInitialText:...];
[control addURL:...];
[control setCompletionHandler:^(SLComposeViewControllerResult result) {
    [self dismissViewControllerAnimated:YES completion:^{
        // do something
    }];
}];
[self presentViewController:control animated:YES completion:nil]; 
```

如果将其用作 Twitter 控件，则可以正常工作，但如果将其用作 Facebook 控件，则不会调用 dismissViewController 的完成块，永远！！！（doSomething 部分永远不会运行）。

我认为这可能与控制器不在主线程上被解除有关，所以我将其更改为

```
dispatch_async(dispatch_get_main_queue(), ^{
        [self dismissViewControllerAnimated:YES completion:^{
             // do stuff... 
         }];
}); 
```

没有成功。

这是 iOS 6 的错误吗？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:01:03.750

这是解决方案：

```
[self dismissViewControllerAnimated:YES completion:nil];
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.6 * NSEC_PER_SEC), dispatch_get_main_queue(), ^{
    // do stuff
}); 
```

这可能是与dismissViewController API 相关的iOS 6 错误。

编辑：我创建了一个更强大的解决方案并**[在此处发布](https://github.com/lunarbase/SLComposeViewController-Extended/blob/master/README.md)**

# sql-server - 如何解决 SQL Server 中的日期比较问题？

> ID：13559235
> 
> 赞同：1
> 
> 时间：2012-11-26T05:41:46.540
> 
> 标签：sql-server, sql-server-2008, date, comparison

我正在使用以下方式比较两个日期：

```
if CONVERT(varchar(20), @ScheduleDate, 101) >= CONVERT(varchar(20), @CurrentDateTime, 101) 
```

这在今年工作得很好，但是当每年像一个日期一样出现时，它就`12/31/2012`不起作用`1/1/2013`了。

请帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T05:48:44.587

你为什么要比较字符串？你可以比较日期

```
if @ScheduleDate >= @CurrentDateTime 
```

但如果你的日期包含时间，我通常会

```
if convert(nvarchar(8), @ScheduleDate, 112) >= convert(nvarchar(8), @CurrentDateTime, 112) 
```

112 日期时间格式为 YYYYMMDD，因此它适用于比较日期

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T05:46:34.900

您必须记住，字符串比较是从左到右的，因此“1/....”小于“12/...”。

您需要使用 DATETIME 比较，而不是字符串比较。

就像是

```
DECLARE @ScheduleDate DATETIME = '1/1/2013',
        @CurrentDateTime DATETIME = '12/31/2012'

IF (@ScheduleDate >= @CurrentDateTime)
BEGIN
    SELECT @ScheduleDate, @CurrentDateTime
END

DECLARE @ScheduleDateString VARCHAR(20) = '1/1/2013',
        @CurrentDateTimeString VARCHAR(20) = '12/31/2012'
IF (CONVERT(DATETIME,@ScheduleDateString,101)>=CONVERT(DATETIME,@CurrentDateTimeString,101))
BEGIN
    SELECT CONVERT(DATETIME,@ScheduleDateString,101),CONVERT(DATETIME,@CurrentDateTimeString,101)
END 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/6638)

请注意，如果变量已经是日期时间，则无需转换它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T05:48:54.367

假设这两个变量当前都是 DateTime 变量，你不能只比较它们而不转换为字符串吗？

```
declare @ScheduleDate DATETIME, @CurrentDateTime DATETIME

SET @ScheduleDate = '1 Jan 2013'
SET @CurrentDateTime = GetDate()

IF (@ScheduleDate >= @CurrentDateTime)
BEGIN
    SELECT 'Do Something'
END
ELSE
BEGIN
    SELECT 'Do Something Else'
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T06:31:13.370

当您使用 CONVERT(nvarchar(8), @ScheduleDate, 112) 函数时，它会返回字符串而不是日期。

因此，在 Sql Server 中使用“112”DateFormat 它以“YMD”格式返回字符串，没有任何分隔。在您的查询中比较该字符串并获得期望的输出。

如“如果 CONVERT(nvarchar(8), @ScheduleDate, 112) >= CONVERT(nvarchar(8), @CurrentDateTime, 112)”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T06:44:25.267

我不会使用 CONVERT 来比较格式化的字符串。它很慢（嗯，更像是微秒，但仍然如此）

我对 2008 版之前的 SQL 使用 UDF

```
CREATE  FUNCTION [dbo].[DateOnly] (@Date DateTime)  
RETURNS Datetime AS  
BEGIN 
  Return cast (floor (cast (@Date as float)) as DateTime)
END 
```

对于 >=2008 的版本，这种方法

选择转换（@MyDateTime 作为日期）

当然，你可以直接比较 datetime 值，但是要知道两个 datetime 值是否在同一个日期（忽略时间分量），上面的版本已经证明是有效的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-20T17:50:01.243

日期：从和到，格式如下

# from_Date# = #dateformat("#form.from#", "mm/dd/yyyy")

# to_Date# = #dateformat("#now()#" + 1, "mm/dd/yyyy")

在 SQL 语句中，a.DateCreated >= CAST ('#from_date#' AS DATE) 和 a.DateCreated <= CAST('#to_date#' AS DATE)

在没有任何原始日期时间列的情况下工作正常

# javascript - 不存在对象的 if 语句抛出错误

> ID：13559238
> 
> 赞同：1
> 
> 时间：2012-11-26T05:42:08.240
> 
> 标签：javascript, object, if-statement

这个问题的答案似乎很明显，但我一直在寻求改进我的语义，所以请耐心等待。

我有一个包含 X,Y 坐标的单个项目的数组结构

```
var example = new Array();
example.push({x:0,y:0}); 
```

在我的代码中，我有一个设置的间隔来更新我的画布并检查某些条件。包括一个类似的

```
if(example[0].x == other.x && example[0].y == other.y)
{
//do something
} 
```

问题是数组是非常动态的，当代码第一次执行时，示例数组是空的。因此，Chrome 会抛出“无法获取属性 x”的错误。为了关闭控制台，我在数组 {x:"~", y:"~"} 中添加了一个虚拟项目，但这看起来真的很不直观。我是否实现了不受欢迎的数据结构？处理不存在的对象的 if 语句的简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T05:45:02.410

你为什么不检查数组是否有元素？

```
if (example.length && ...) 
```

或者第一个元素是否为真：

```
if (example[0] && ...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T05:45:13.640

```
if (0 in example
    && example[0].x == other.x && example[0].y == other.y) {
  // do something
} 
```

（这适用于任意索引，而不仅仅是`0`; 如果您只想检查数组是否为非空，`example.length`如 melpomene 所示是好的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T05:49:40.453

您应该能够检查第一级元素（即“示例”） - 当您尝试访问为 null 或未定义的元素的属性时，JavaScript 通常会抛出这样的错误。就像其他一些人已经表明的那样：

```
if(example[0] && example[0].x === other.x) 
```

关键是尽管 JavaScript 会让您拥有 example[0] 并根据需要返回，但是一旦您尝试访问该属性，您就不走运了：

```
var example = [];
//undefined
example
//[]
example[0]
//undefined <--- this is a falsy value, will evaluate false in a check
example[0].x
//TypeError: Cannot read property 'x' of undefined 
```

# php - 释放 PDO 准备好的语句 (DEALLOCATE PREPARE)

> ID：13559239
> 
> 赞同：11
> 
> 时间：2012-11-26T05:42:17.030
> 
> 标签：php, mysql, pdo, prepared-statement

使用后是否应该释放 PDO 准备好的语句？如果是这样，怎么办？具体来说，我问的是 MySQL - 你怎么能，你应该如何[`DEALLOCATE PREPARE`](http://dev.mysql.com/doc/refman/5.0/en/deallocate-prepare.html)通过 PDO 调用。（编辑：澄清一下，这个问题不是指模拟的准备，而是真正的准备。）

另外 - 这会释放结果集（当大时）？

解释：

我看过代码

```
$stmnt = $db->prepare($sql);
$stmnt->execute($aParams);
$stmnt = null; 
```

这让我想知道这是做什么的，什么时候，如果 f`unset($stmnt);`会不同？

手册指出

> 准备好查询后，数据库将分析、编译和优化其执行查询的计划。[...] 通过使用准备好的语句，应用程序避免了重复分析/编译/优化循环。

这往往建议您应该取消分配语句，并且 MySQL 具有此功能。所以，

1.  你能打电话吗？怎么`DEALLOCATE PREPARE`打电话
2.  你应该这样做吗？
3.  任何人都可以确认将语句设置为 null（或取消设置语句）与 mysql_ 和 mysqli_ 的“free_result”相同吗？
4.  它是立即发生，还是等待垃圾收集器启动？

* * *

为了完整起见，另一个提到“free_result”和“close”函数的[SO问题](https://stackoverflow.com/questions/8996499/php-prepared-statments-freeresult-close)`mysqli_()`表明释放语句实际上会增加时间（除非您有大量内存使用并且需要空间）。但是“free_result”不同于将 SQL 服务器从缓存准备好的语句中释放出来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T06:50:09.107

> 使用后是否应该释放 PDO 准备好的语句？如果是这样，怎么办？

在 MySQL 的上下文中？没有为什么？

PDO[默认模拟准备好的语句](https://stackoverflow.com/q/10617057/168868)。这意味着 PDO 本身会执行参数替换、转义等操作，并将 SQL 块向下发送，而不是使用*本机*准备好的语句。

虽然您可以打开它，但您仍然不需要*明确*关闭句柄*，除非*您还使用[无缓冲查询](http://php.net/mysqlinfo.concepts.buffering)。仅仅让语句句柄超出范围或将其设置为 null*不会*关闭游标。同样，这*仅*在您使用无缓冲查询时才重要。如果不是，那么让它超出范围或将其设置为 null 就足以干净地关闭句柄。

您还链接到[`DEALLOCATE PREPARE`](http://dev.mysql.com/doc/refman/5.0/en/deallocate-prepare.html). 只有在使用 SQL 字符串*手动*调用*时才*需要该语法。这是一个完全独立于[MySQL C-level API-based Prepared statements 的](http://dev.mysql.com/doc/refman/5.1/en/c-api-prepared-statement-function-overview.html)操作，这是使用的。（好吧，也许你正在使用，但它实际上是同一件事。）*[`PREPARE`](http://dev.mysql.com/doc/refman/5.0/en/prepare.html)`PDO_MYSQL``mysqlnd`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-18T17:07:49.887

是的。完成准备语句后，您可以将其设置为`NULL`或使用`unset()`.

对于具有多个查询和大型数据库的脚本，这会有所不同。您可以使用以下方法进行测试：

```
$before = memory_get_usage();
$stmt = NULL;
die(memory_get_usage() - $before); 
```

对我来说，这节省了 20MB 的内存，这让脚本后来崩溃了。*

# iphone - 垂直折叠动画

> ID：13559243
> 
> 赞同：2
> 
> 时间：2012-11-26T05:42:24.123
> 
> 标签：iphone, xcode, ipad, animation, calayer

我正在尝试为我的 UIView 垂直创建折叠动画。经过长时间的搜索，我找到了以下链接。[使用 CATransform3D 透视的折纸过渡](https://stackoverflow.com/questions/5456642/origami-transition-using-catransform3d-perspective/13541752#comment18544844_13541752)。从上面的链接中，我刚刚尝试了以下内容。它给了我确切的动画。我的 UIView 出现反向.. 我不知道我在哪里搞砸了.. 任何帮助将不胜感激..

```
-(IBAction)animate
{

    CATransform3D transform = CATransform3DIdentity;
    CALayer *topSleeve;
    CALayer *middleSleeve;
    CALayer *topShadow;
    CALayer *middleShadow;
    UIView *mainView;
    CGFloat width = self.view.frame.size.width;
    CGFloat height = self.view.frame.size.height;
    CALayer *firstJointLayer;
    CALayer *secondJointLayer;
    CALayer *perspectiveLayer;

    mainView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, width, height)];
    mainView.backgroundColor = [UIColor clearColor];
    [self.view addSubview:mainView];

    UIGraphicsBeginImageContext(self.view.bounds.size);
    [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    CGSize size = CGSizeMake(viewImage.size.width / 2, viewImage.size.height);

    UIGraphicsBeginImageContextWithOptions(size, NO, 0.0);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(context, [[UIColor blackColor] CGColor]);
    CGContextFillRect(context, CGRectMake(0, 0, size.width, size.height));
    UIImage *solidColorImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // The left half of the image
    UIGraphicsBeginImageContextWithOptions(size, NO, 0.0);
    [viewImage drawAtPoint:CGPointMake(0, 0) blendMode:kCGBlendModeNormal alpha:1.0];
    UIImage *leftImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    UIGraphicsBeginImageContextWithOptions(size, NO, 0.0);
    [viewImage drawAtPoint:CGPointMake(-size.width, 0) blendMode:kCGBlendModeNormal alpha:1.0];
    [solidColorImage drawAtPoint:CGPointMake(0, 0) blendMode:kCGBlendModeMultiply alpha:0.1];
    UIImage *rightImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    perspectiveLayer = [CALayer layer];
    perspectiveLayer.frame = CGRectMake(0, 0, width/2, height);
    [mainView.layer addSublayer:perspectiveLayer];

    firstJointLayer = [CATransformLayer layer];
    firstJointLayer.frame = mainView.bounds;
    [perspectiveLayer addSublayer:firstJointLayer];

    topSleeve = [CALayer layer];
    topSleeve.frame = CGRectMake(0, 0, width/2, height);
    topSleeve.anchorPoint = CGPointMake(0, 0.5);
    topSleeve.backgroundColor = [UIColor colorWithPatternImage:leftImage].CGColor;
    topSleeve.position = CGPointMake(0, height/2);
    [firstJointLayer addSublayer:topSleeve];
    topSleeve.masksToBounds = YES;

    secondJointLayer = [CATransformLayer layer];
    secondJointLayer.frame = mainView.bounds;
    secondJointLayer.frame = CGRectMake(0, 0, width, height);
    secondJointLayer.anchorPoint = CGPointMake(0, 0.5);
    secondJointLayer.position = CGPointMake(width/2, height/2);
    [firstJointLayer addSublayer:secondJointLayer];

    middleSleeve = [CALayer layer];
    middleSleeve.frame = CGRectMake(0, 0, width/2, height);
    middleSleeve.anchorPoint = CGPointMake(0, 0.5);
    middleSleeve.backgroundColor = [UIColor colorWithPatternImage:rightImage].CGColor;
    middleSleeve.position = CGPointMake(0, height/2);
    [secondJointLayer addSublayer:middleSleeve];
    middleSleeve.masksToBounds = YES;

    firstJointLayer.anchorPoint = CGPointMake(0, 0.5);
    firstJointLayer.position = CGPointMake(0, height/2);

    topShadow = [CALayer layer];
    [topSleeve addSublayer:topShadow];
    topShadow.frame = topSleeve.bounds;
    topShadow.backgroundColor = [UIColor blackColor].CGColor;
    topShadow.opacity = 0.5;

    middleShadow = [CALayer layer];
    [middleSleeve addSublayer:middleShadow];
    middleShadow.frame = middleSleeve.bounds;
    middleShadow.backgroundColor = [UIColor blackColor].CGColor;
    middleShadow.opacity = 0.5;

    transform.m34 = 1.0/(-700.0);
    perspectiveLayer.sublayerTransform = transform;

    CABasicAnimation* animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.y"];
    [animation setDuration:2];
    [animation setAutoreverses:YES];
    [animation setRepeatCount:INFINITY];
    [animation setFromValue:[NSNumber numberWithDouble:90*M_PI/180]];
    [animation setToValue:[NSNumber numberWithDouble:0]];
    [firstJointLayer addAnimation:animation forKey:nil];

    animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.y"];
    [animation setDuration:2];
    [animation setAutoreverses:YES];
    [animation setRepeatCount:INFINITY];
    [animation setFromValue:[NSNumber numberWithDouble:-180*M_PI/180]];
    [animation setToValue:[NSNumber numberWithDouble:0]];
    [secondJointLayer addAnimation:animation forKey:nil];

    animation = [CABasicAnimation animationWithKeyPath:@"bounds.size.width"];
    [animation setDuration:2];
    [animation setAutoreverses:YES];
    [animation setRepeatCount:INFINITY];
    [animation setFromValue:[NSNumber numberWithDouble:perspectiveLayer.bounds.size.width]];
    [animation setToValue:[NSNumber numberWithDouble:0]];
    [perspectiveLayer addAnimation:animation forKey:nil];

    animation = [CABasicAnimation animationWithKeyPath:@"position.x"];
    [animation setDuration:2];
    [animation setAutoreverses:YES];
    [animation setRepeatCount:INFINITY];
    [animation setFromValue:[NSNumber numberWithDouble:perspectiveLayer.position.x]];
    [animation setToValue:[NSNumber numberWithDouble:0]];
    [perspectiveLayer addAnimation:animation forKey:nil];

    animation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    [animation setDuration:2];
    [animation setAutoreverses:YES];
    [animation setRepeatCount:INFINITY];
    [animation setFromValue:[NSNumber numberWithDouble:0.5]];
    [animation setToValue:[NSNumber numberWithDouble:0]];
    [topShadow addAnimation:animation forKey:nil];

    animation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    [animation setDuration:2];
    [animation setAutoreverses:YES];
    [animation setRepeatCount:INFINITY];
    [animation setFromValue:[NSNumber numberWithDouble:0.5]];
    [animation setToValue:[NSNumber numberWithDouble:0]];
    [middleShadow addAnimation:animation forKey:nil];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:51:40.607

这是因为 CALayer 绘制的背景是翻转的。您最好将每个图像设置为 CALayer 内容，这将按预期绘制每个图像（不翻转）。顺便说一句，带有大图像的模式可能会增加内存使用量，因此您应该避免使用它们。

```
topSleeve.contents = (id)leftImage.CGImage;
middleSleeve.contents = (id)rightImage.CGImage; 
```

# javascript - jQuery：将元素渲染到 DOM，然后使用 jquery 选择器选择它

> ID：13559247
> 
> 赞同：2
> 
> 时间：2012-11-26T05:42:45.997
> 
> 标签：javascript, jquery, coffeescript

试图在这里理解一些东西：如果我从 javascript 向 DOM 呈现一些东西，并想在其上调用 jQuery 方法，它的行为与我从 DOM 中“重新选择”元素的行为不同。这是一个简单的例子，在 CoffeeScript 中：

```
element = """
  <div id="my_div">TEST!</div>
  """

$('body').html(element)
element.hide() #this doesn't work.
$(element).hide() #this doesn't work either.

$('div#my_div').hide() #this does. 
```

所以，我似乎在这里误解了一些东西。我猜元素变量只是一个字符串，jQuery 不明白它已作为元素添加到 DOM 中。

那么，是否有另一种方法可以将内容插入到 dom 中，以便它在插入后表现得像一个正常选择的 jQuery 对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T05:47:22.807

第一行不起作用的原因是元素是一个字符串。第二行不起作用的原因是它最终创建了**另一个**DOM 版本的字符串。

解决方法是在您第一次构造元素时（在 JS 中）维护对 DOM 版本的元素的引用：

```
var $elem = $(element);
$elem.appendTo(document.body);
$elem.hide() // should work 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T05:45:07.087

我认为你需要：

```
element = $('<div id="my_div">TEST!</div>'); 
```

# android - 下划线在android中动态生成的TextView

> ID：13559250
> 
> 赞同：2
> 
> 时间：2012-11-26T05:43:23.640
> 
> 标签：android, textview

我有一个文本视图，它具有在 xml 文件中设置的特定文本，并且在 strings.xml 中带有下划线。现在我正在更改此文本视图形式的编辑文本中的内容，即用户输入的任何内容。到该文本在将其设置为 textview 之前，我还要附加某个字符串。我希望这个新字符串形成为带有蓝色下划线并且可点击。我尝试使用

```
 SpannableString phoneNum = new SpannableString(totalPhoneNum);
 phoneNum.setSpan(new UnderlineSpan(), 0, totalPhoneNum.length(), 0);   
 phoneNum.setText(totalPhoneNum); 
```

这是行不通的！我可以在 onResume() 中使用它吗？我不知道如何将下划线的颜色更改为蓝色 :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-21T11:14:13.823

> 在 TextView 中为文本添加下划线的方式有 3 种。
> 
> 1.  [可跨字符串](http://developer.android.com/reference/android/text/SpannableString.html)
>     
>     
> 2.  [setPaintFlags();](http://developer.android.com/reference/android/widget/TextView.html#setPaintFlags%28int%29) 文本视图
>     
>     
> 3.  [Html.fromHtml();](http://developer.android.com/reference/android/text/Html.html#fromHtml%28java.lang.String%29)
>     
>     
> 
> 让我向您解释所有方法：
> 
> **第一种方法**
> 
> 对于 TextView 中的文本，您必须使用[SpannableString](http://developer.android.com/reference/android/text/SpannableString.html)
> 
> ```
> String udata="Underlined Text";
> SpannableString content = new SpannableString(udata);
> content.setSpan(new UnderlineSpan(), 0, udata.length(), 0);
> mTextView.setText(content); 
> ```
> 
> **第二种方法**
> 
> 您可以利用 TextView 的[setPaintFlags](http://developer.android.com/reference/android/widget/TextView.html#setPaintFlags%28int%29)方法为 TextView 的文本添加下划线。
> 
> 例如。
> 
> ```
> mTextView.setPaintFlags(mTextView.getPaintFlags() | Paint.UNDERLINE_TEXT_FLAG);
> mTextView.setText("This text will be underlined"); 
> ```
> 
> 如果要穿透文本，可以参考[Paint类的常量。](http://developer.android.com/reference/android/graphics/Paint.html)
> 
> **第三种方法**
> 
> 利用`Html.fromHtml(htmlString);`
> 
> ```
> String htmlString="<u>This text will be underlined</u>";
> mTextView.setText(Html.fromHtml(htmlString)); 
> ```

来自：
[在Android中的TextView下方绘制下划线](https://stackoverflow.com/questions/8033316/to-draw-an-underline-below-the-textview-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:56:37.143

试试这个

```
String txt = "<u style=\"text-decoration: none; border-bottom: 1px solid #FF0000\">parragraph</u>";
phoneNum.setText(Html.fromHtml(txt)); 
```

此样式将删除默认下划线并在我们传递的颜色处放置 1 px 的边框底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T05:57:23.493

用这个：

```
String text = "some string <u><font color=\"#00FF00\">some link</font></u>";
editText.setText(Html.fromHtml(text), TextView.BufferType.SPANNABLE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T06:21:38.063

xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:text="@string/hello" />
</LinearLayout> 
```

爪哇：

```
public class TextDemoActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new ViewWithRedDot(this));
    }
}

class ViewWithRedDot extends View {
    public ViewWithRedDot(Context context) {
        super(context);
    }

    @Override
    protected void onDraw(Canvas canvas) {

        Paint circlePaint = new Paint();
        Typeface mType = Typeface.create(Typeface.SANS_SERIF, Typeface.ITALIC);
        circlePaint.setTextSize(25);
        circlePaint.setColor(Color.RED);
        circlePaint.setTypeface(mType);
        canvas.drawText("Default Typeface", 50, 100, circlePaint);
        //
        circlePaint.setFlags(Paint.UNDERLINE_TEXT_FLAG);
        circlePaint.setColor(Color.YELLOW);
        canvas.drawText("Underline Text Flag", 50, 120, circlePaint);
        //
        circlePaint.setFlags(Paint.STRIKE_THRU_TEXT_FLAG);
        circlePaint.setColor(Color.GREEN);
        canvas.drawText("Strike Thru Text Flag", 50, 140, circlePaint);
        //
        circlePaint.setFlags(Paint.ANTI_ALIAS_FLAG);
        circlePaint.setColor(Color.WHITE);
        canvas.drawText("Anti Alias Flag", 50, 160, circlePaint);
        //
        circlePaint.setFlags(Paint.DEV_KERN_TEXT_FLAG);
        circlePaint.setColor(Color.WHITE);
        canvas.drawText("Dev Kern Text Flag", 50, 180, circlePaint);
        //
        circlePaint.setFlags(Paint.FAKE_BOLD_TEXT_FLAG);
        circlePaint.setColor(Color.CYAN);
        canvas.drawText("Fake Bold Text Flag", 50, 200, circlePaint);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T05:54:19.527

你可以这样使用

```
phoneNum.setText(Html.fromHtml("W : "+"<u><FONT COLOR=\"#80776b\" >"+Your text+"</Font></u>")); 
```

使用您想要的颜色代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T07:18:06.747

在布局 xml 文件中添加以下代码：

```
<TextView 
    android:autoLink="phone"
    android:linksClickable="true" 
    android:textColorLink="#5e9baa" /> 
```

# c# - 使用用户帐户登录的 Windows 服务

> ID：13559252
> 
> 赞同：0
> 
> 时间：2012-11-26T05:43:28.773
> 
> 标签：c#, .net, windows-services

我正在使用用户帐户作为登录的 Windows 服务。1.有什么方法可以从AD中检索而不是提示用户在安装服务时输入用户名和密码？我无法使用本地系统，因为我需要使用服务内的数据库验证用户。2\. 另一个问题是在修改密码时，windows服务密码没有更新，我需要去手动修改。有什么补救措施吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:06:29.330

我已经通过使用本地系统自行处理了这种情况。为了获取我正在使用的 Logged 用户名，

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT UserName FROM Win32_ComputerSystem");
ManagementObjectCollection collection = searcher.Get();
currentUser = (string)collection.Cast<ManagementBaseObject>().First()["UserName"]; 
```

# machine-learning - 如何获得垃圾邮件的概率而不是分类

> ID：13559253
> 
> 赞同：0
> 
> 时间：2012-11-26T05:43:33.437
> 
> 标签：machine-learning

我正在构建一个工具来计算文本评论是假的（垃圾邮件）还是真实的概率。

我有一个带注释的评论数据集，标记为垃圾邮件或非垃圾邮件。我已经使用 svm 构建了一个分类器，但这只能让我将输入文档分类为垃圾邮件或非垃圾邮件。然而，我想要一个工具，它会给我一个介于 0 和 1 之间的数字，代表文档是垃圾邮件的概率。有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:43:13.083

如果你想要一个连续值的分数（而不是一个明确的概率），你可以只使用从 SVM 到超平面的距离。这是信心的标准衡量标准，您可以将其视为该点“进入”类的程度。

如果您想将分类实际用作更广泛的概率模型的一部分，在这种情况下您需要具有真正概率解释的东西，您可以使用将 SVM 分数转换为概率的方法之一，但这些方法有些改进并且没有伟大的理论基础。相反，我建议您查看[逻辑回归分类器](http://en.wikipedia.org/wiki/Logistic_regression)，有时也称为最大熵，以获取稳健的概率替代方案。这具有像 SVM 这样的判别模型的好处，但具有自然和固有的概率基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:48:38.453

与其自己编写，不如插入[akismet](http://www.akismet.com)？垃圾邮件检测是贝叶斯算法，您提供的数据越多，它的性能就越好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T10:20:16.533

您可以使用 SVM 获得概率。看看 libsvm（-b 参数）。

# c++ - 默认赋值运算符可以访问基类的私有成员

> ID：13559255
> 
> 赞同：2
> 
> 时间：2012-11-26T05:44:06.960
> 
> 标签：c++

这个例子很容易解释我的问题：

[http://pastebin.com/VDBE3miY](http://pastebin.com/VDBE3miY)

```
class Vector3
{
  float                   _x;
  float                   _y;
  float                   _z;

public :
 /// constructors and stuff

};

class Point : public Vector3
{
// some BS
  Point(float _x):Vector3(float _x)
  {}
};

main()
{
   Point aPoint(3);
   Point anotherPoint(4);

   // WHY DOES THIS WORK and copy _x,_y & _z properly
   aPoint = anotherPoint;
} 
```

基本上，我不明白为什么`=`派生类可以复制`_x`,`_y`和`_z`，即使它不应该访问它们，因为它们是私有的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T05:56:13.033

```
aPoint = anotherPoint; 
```

这一行触发了`Point::operator=`（赋值运算符）的调用，它之所以存在是因为编译器生成了一个默认实现。此默认实现对类的所有成员执行赋值操作，并调用`Vector3::operator=`基类的赋值运算符。这又是一个成员函数，`Vector3`因此可以访问所有私有成员，并对其进行复制。

* * *

（编辑）引用 C++11 标准来支持这个答案：

> (§12.8/28) 非联合类 X 的隐式定义的复制/移动赋值运算符执行其子对象的成员复制/移动赋值。首先分配 X 的直接基类，按照它们在基说明符列表中的声明顺序，然后按照它们在类定义中声明的顺序分配 X 的直接非静态数据成员. 令 x 为函数的参数，或者对于移动运算符，为引用参数的 xvalue。每个子对象都以适合其类型的方式分配：
> 
> — 如果子对象是类类型，就好像通过调用 operator= 将子对象作为对象表达式并将 x 的相应子对象作为单个函数参数一样（好像通过显式限定；也就是说，忽略任何可能的虚拟覆盖更多派生类中的函数）；
> 
> — 如果子对象是一个数组，则以适合元素类型的方式分配每个元素；
> 
> — 如果子对象是标量类型，则使用内置赋值运算符。

其他一些（现已部分删除）答案提到了分配操作执行按位复制的想法。这有一些道理：如果您的类或结构定义了 POD（普通旧数据）类型，那么它实际上与 C 结构相同。在这种情况下，它可以通过执行来复制`memcpy`，因此您可以*认为*赋值操作基本上等同于按位复制。但这是一种有效的思考方式的原因是上面的 §12.8/28，这也适用于非 POD 类型。

另请注意，从您的代码中不一定清楚您的数据类型是 POD。您在基类中提到了*构造函数和其他东西*：如果这涉及非平凡的复制构造函数、赋值运算符或可能的虚函数，那么您的数据类型不再是 POD。

* * *

关于评论中的问题：为了从派生类实现中调用基类赋值运算符，只需调用它：

```
struct Base
{
};

struct Derived : Base
{
  Derived &operator=(const Derived &other)
  { Base::operator=(other); return *this; }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:17:23.013

因为编译器生成赋值运算符

```
Point& operator=(Point const& rhs)
{
    Vector3::operator=(rhs);
    return *this;
}

Vector3& operator=(Vector3 const& rhs)
{
   // A class is a friend of irself.
   // So an object of Type A can read any other object of type A
   _x = rhs._x;
   _y = rhs._y;
   _z = rhs._z;
   return *this;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T05:47:15.617

因为调用了 Vector3 的默认复制操作符（浅复制）。

# maven - 限制类在 Maven 中由 Findbugs 分析

> ID：13559256
> 
> 赞同：3
> 
> 时间：2012-11-26T05:44:08.007
> 
> 标签：maven, findbugs

如何限制仅针对某些包分析的类。在一个模块中，我不希望为某些包运行 Maven 的 findbugs。我怎样才能排除它们。有没有办法指定Maven的Findbugs要消除的包

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:19:07.427

请参考 - [http://mojo.codehaus.org/findbugs-maven-plugin/usage.html](http://mojo.codehaus.org/findbugs-maven-plugin/usage.html)

使用`mvn site`而不是 mvn findbugs:findbugs

您需要在配置标签下使用包含排除过滤器文件或仅分析。

```
<reporting>
<plugins>
  <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>findbugs-maven-plugin</artifactId>
    <version>2.5.2</version>
    <configuration>
      <excludeFilterFile>src/main/resources/findbugs-exclude.xml</excludeFilterFile>
      <includeFilterFile>src/main/resources/findbugs-include.xml</includeFilterFile>
      <onlyAnalyze>com.packagename.*</onlyAnalyze>
    </configuration>
  </plugin>
</plugins> 
```

示例过滤器文件

```
<FindBugsFilter>
<Match>
    <Package name="~com\.ly\..*"/>
</Match> 
```

# java - 来自 java.util.zip.Inflater.init(Native Method) 的奇怪 java.lang.OutOfMemoryError

> ID：13559258
> 
> 赞同：2
> 
> 时间：2012-11-26T05:44:12.593
> 
> 标签：java, runtime, manifest, out-of-memory

我需要在运行时从 jar 文件中读取 Manifest 文件。

代码：

```
JarFile someJar = new JarFile(jarFile);
manifest = someJar.getManifest(); 
```

但是，有时上面的代码会抛出 OutOfMemoryError 异常：

```
java.lang.OutOfMemoryError
    at java.util.zip.Inflater.init(Native Method)
    at java.util.zip.Inflater.<init>(Inflater.java:83)
    at java.util.zip.ZipFile.getInflater(ZipFile.java:278)
    at java.util.zip.ZipFile.getInputStream(ZipFile.java:224)
    at java.util.zip.ZipFile.getInputStream(ZipFile.java:192)
    at java.util.jar.JarFile.getBytes(JarFile.java:361) 
```

有时可以告诉我如何避免这种异常（也许是在运行时获取清单的另一种方法）？

顺便说一句，我无权更改 Java 堆大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:15:21.123

这可能与您运行的 ZIP 文件无关。

查看 JDK 1.7 代码，`Inflater`构造函数最终调用了一个名为 的本地方法`init`，并为其提供了一个布尔参数。没有迹象表明对 ZIP 文件的任何引用。

似乎您正在使用的 JRE 中存在错误，或者您的系统在堆内存中非常有限（包含大部分 ZIP 功能的本机 ZIP 库非常小）。

您的 JRE 是否在`OutOfMemoryError`? 如果是这样，你可能想看看那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T05:57:44.393

是不是一个损坏的 jar 文件让 Inflater 误以为它需要分配大量内存？

如果是，您可能会发现您实际上可以捕获 OutOfMemoryError。（您通常不能或不应该捕获这些，但在尝试分配大量不可用内存的特定情况下，在实践中这样做通常是安全的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-18T10:58:06.660

这似乎是一个关于`java.util.zip.Inflater`.

Inflater 会在 init 期间分配堆外内存，如果路由后不调用 end()，内存将一直存在，直到 GC 调用 finalize 函数。如果堆很大，在用完所有内存之前不会调用 finalize()。

请参考这个问题：[java 使用过多的内存](https://stackoverflow.com/questions/6274696/excessive-memory-use-by-java)，
或者这个 JDK 错误报告：[http](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4797189) ://bugs.java.com/bugdatabase/view_bug.do?bug_id=4797189 。

我通过下面的代码验证它，直到JDK8，它仍然存在。

```
public static void main( String args[] ) throws InterruptedException {
    while ( true ) {
        //final Deflater deflater = new Deflater( 9, true );
        final Inflater inflater = new Inflater( true );
        // ....
        // if not call end() after using inflater, it will OOM
        // inflater.end();
        Thread.sleep(10);
    }
} 
```

解决方法很简单，`end()*`用完inflater后调用。

# twitter-bootstrap - 缩略图内的 bootstrap form-horizo ntal 创建错位 - 响应式

> ID：13559261
> 
> 赞同：2
> 
> 时间：2012-11-26T05:44:35.920
> 
> 标签：twitter-bootstrap

我一直在寻找使用表单布局的引导程序问题的答案。到目前为止，没有运气！！

客观的：

创建一个在平板电脑/台式机/iphone下工作的注册表单

问题：

我使用了缩略图，因为它包含了我需要在表单周围装箱的所有 CSS。我使用了水平形式。桌面上的布局还可以，一切都对齐了。直到我在 ipad 上查看（纵向）：下图；

-- 抱歉，这是我第一次发帖，所以我没有足够的积分来发图片。它看起来像：

[http://dl.dropbox.com/u/21743176/Screen%20Shot%202012-11-26%20at%203.26.13%20PM.png](http://dl.dropbox.com/u/21743176/Screen%20Shot%202012-11-26%20at%203.26.13%20PM.png)

第一个输入框使用的是 span6，而其余的则不是。即使使用 span6，控件（标签和输入）也不会居中。我可以将标签的宽度减小到任意值，使其与中心对齐，但这意味着添加特定的@media 宽度等。

这是我的html的快照：

```
<div class="container">
        <div class="row-fluid">
            <div class="section">
                <ul class="thumbnails row">
                    <li class="span6 offset3">
                        <div class="thumbnail">
                                <div class="caption">
                                    <legend><h5><i class="icon-pencil"></i>    Sign-up</h5></legend>
                                    <form action="signup/user_signup" class="form-horizontal" method="POST" id="signup-form">
                                        <fieldset>
                                        <div class="control-group" id="Name">
                                            <label for="inputName" class="control-label">Name</label>
                                            <div class="controls">
                                                <input type="text" name="inputName" class="span6"/>
                                            </div>
                                        </div>
                                        <div class="control-group" id="Email">
                                            <label for="inputEmail" class="control-label">Email</label>
                                            <div class="controls">
                                                <input type="text" name="inputEmail" />
                                            </div>
                                        </div>
                                        <div class="control-group" id="Username">
                                            <label for="inputUsername" class="control-label">Username</label>
                                            <div class="controls">
                                                <input type="text" name="inputUsername" id="inputUsername"/>
                                            </div>
                                        </div>
                                        <div class="control-group" id="Pwd">
                                            <label for="inputPwd" class="control-label">Password</label>
                                            <div class="controls">
                                                <input type="password" name="inputPwd" id="inputPwd"/>
                                            </div>
                                        </div>
                                         <div class="control-group" id="CPwd">
                                            <label for="inputConfirmPwd" class="control-label">Confirm Password</label>
                                            <div class="controls">
                                                <input type="password" name="inputConfirmPwd" id="inputConfirmPwd"/>
                                            </div>
                                        </div>
                                        <div class="control-group" id="TNC">
                                            <div class="controls">
                                                <label class="checkbox">
                                                    <input type="checkbox"> Accept terms and conditions
                                                </label>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <div class="controls">
                                                <button type="cancel" class="btn">Cancel</button>
                                                <button type="submit" class="btn btn-primary">Send</button>
                                            </div>
                                        </div>
                                        </fieldset>
                                    </form>
                                </div>
                        </div>
                    </li>
                    <li class="span3"></li>
                </ul>
            </div>
        </div>
    </div> 
```

问题：

我什么时候使用 form-inline 或 form-horizo​​ntal。有人说要使用 form-horizo​​ntal 你必须有一个宽页面..不确定这是不是真的。

那么，如果我的 html/方法不好，你能告诉我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T03:16:20.237

[小提琴](http://jsfiddle.net/yR7Ap/77/)

我发现了几个使用 width: 100% 来强制文本框留在其容器内的示例。它以大页面为中心，但在桌子上，井扩展到边缘，在手机上，它将从表单水平切换到表单内联。

```
.my-input
{
    width: 100%;
    padding: 4px 0 4px 0 !important;
}

 <input class="my-input" maxlength="80" type="text" name="inputName"  /> 
```

# mysql - Rails & MySQL - 如何在 rails 的 find_by_sql 中使用 LIKE 运算符和 %？

> ID：13559263
> 
> 赞同：3
> 
> 时间：2012-11-26T05:44:48.047
> 
> 标签：mysql, ruby-on-rails, find-by-sql

如何删除变量周围的引号，以便可以在 rails 的 find_by_sql 中使用 LIKE 运算符？

```
@entries1 = Entry.find_by_sql(["SELECT `entries`.name as name FROM `entries` where `entries`.name like '%?%'",@something]) 
```

将产生

```
SELECT `entries`.name as name FROM `entries` where `entries`.name like '%'hello'%' 
```

什么时候`@something = 'hello'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T05:59:24.457

不要将百分号放在 SQL 中，而是将它们添加到您要注入的变量中（在转义已经存在的百分号/下划线之后！）

```
"%#{@something.gsub('%', '\%').gsub('_', '\_')}%" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T05:56:21.200

您可以`concat`在数据库中使用：

```
Entry.find_by_sql([
  "SELECT ... `entries`.name like concat('%', ?, '%')",
  @something
]) 
```

或者您可以在 Ruby 中添加通配符：

```
Entry.find_by_sql([
  "SELECT ... `entries`.name like ?",
  "%#{@something}"
]) 
```

请注意，其他数据库将希望看到`'%' || ? || '%'`或`'%' + ? + '%'`而不是`concat`调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T13:38:38.683

`@entries1 = Entry.select('name').where('name like ?',"%#{@something}%"])`应该做同样的事情

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-21T20:51:35.997

您需要四个 '%' 围绕搜索值，并且必须在每个前面加上分隔符 '\'。

例如 search_val 可以是“”或“031”等...

```
find_by_sql([ "select  * from tableX where id like '\%\%#{search_val}\%\%'" ]) 
```

# robotium - 如何使用robotium跟踪正在运行的设备上的错误日志？

> ID：13559264
> 
> 赞同：0
> 
> 时间：2012-11-26T05:44:50.347
> 
> 标签：robotium

我没有使用命令提示符运行robotium 测试用例，而是导航到开发工具并在其上找到套件并运行它，它在模拟器上对我来说工作正常。

但万一它失败了，它就会退出应用程序。我只是想知道如何收集日志来验证哪个测试用例失败了。

无论如何我都需要知道它的存在方式，我可以在不连接到 PC 的情况下从设备运行套件（就像我如何使用开发工具在模拟器上运行一样）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:58:19.393

如果您将 Instrumentationtest 运行器更改为以下内容：

[http://code.google.com/p/the-missing-android-xml-junit-test-runner/](http://code.google.com/p/the-missing-android-xml-junit-test-runner/)

然后将创建一个包含所有测试运行的 xml 文件。这也很有用，因为它采用标准的 junit xml 格式，因此您可以将其放入任何 CI 系统并且它应该可以工作。

# database - 删除跟踪文件的影响？

> ID：13559270
> 
> 赞同：2
> 
> 时间：2012-11-26T05:45:06.847
> 
> 标签：database, oracle, database-administration

我有一个 oracle 11G 实例。它的跟踪文件每天都在增加并导致磁盘空间问题。我必须在每个磁盘空间警报上手动删除它。我使用命令：

```
**find \`pwd\` \\( -name \\*.trc -o -name \\*.trm \\) -mtime +2 -exec rm -rf {} \;** 
```

我也可以在 cronjob 中安排这个，但我想知道删除这些文件会产生什么影响，以及为什么这些文件的大小会增加这么多。如何通过增加来减少这些文件，这会对我们的数据库产生什么影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T06:03:56.073

为什么数据库会生成一堆跟踪文件？跟踪文件将指示错误，在这种情况下，您通常需要检查跟踪文件以确定错误是什么以及如何纠正它，或者它会指示有人启用了会话跟踪以调试问题，在这种情况下，您需要保留跟踪文件以便进行调试。删除跟踪文件而不查看它们意味着您几乎可以肯定地忽略了问题的症状，随着时间的推移可能会变得更糟。如果这是一个真实的生产数据库而不是本地计算机上的玩具数据库，我强烈建议首先确定为什么要创建跟踪文件并解决导致创建跟踪文件的任何问题。

# iphone - 为 Iphone 定制 iCarousel？

> ID：13559274
> 
> 赞同：6
> 
> 时间：2012-11-26T05:45:23.020
> 
> 标签：iphone, objective-c

在我的应用程序中，我想实现一个 iCarousel 来显示如下图所示的视图控制器，我浏览了许多教程和链接，但我没有得到我的要求，请帮助我![在此处输入图像描述](../Images/0d4f2e1791931f8172e855595909fb25.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T05:47:25.550

它在 iOS 中被称为coverflow。按照[这个链接](http://www.chaosinmotion.com/flowcover.html)，你会得到你想要的，并且会知道如何实现它。

或者你也可以[参考这个关于堆栈溢出的问题](https://stackoverflow.com/questions/718984/open-source-coverflow-library-for-iphone)。这里是[我接受的答案](https://stackoverflow.com/questions/12672017/display-images-in-sequence-in-iphone-application/12672053#12672053)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T06:52:25.893

您可以使用 iCarousel 获得相同的效果

从下面的链接下载轮播效果的示例代码。 [https://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)

No Nib Folder 中有一个例子。

打开它并根据您的要求修改以下代码

//在 iCarouselExampleViewController.m 中

在下面的方法中，根据您的需要修改代码。通过在主视图上添加不同的 UI，您可以设计所需的 UI。

就我而言，我在该主视图上添加了一个图像和标签。

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{

    UILabel *label = nil;
        UIImageView *imageLogo=nil;
        UIImageView *imageBack=nil;
    //create new view if no view is available for recycling
    if (view == nil)
    {
        view = [[[UIImageView alloc] initWithImage:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"page1" ofType:@"png"]]] autorelease];
        imageBack=[[[UIImageView alloc] initWithImage:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"3" ofType:@"png"]]] autorelease];
        imageBack.frame=CGRectMake(70, 70,388, 49);
        [view addSubview:imageBack];
        label = [[UILabel alloc]initWithFrame:CGRectMake(80, 78, 380, 30)];
        label.backgroundColor=[UIColor darkGrayColor];
        label.font = [label.font fontWithSize:20];
        label.backgroundColor=[UIColor clearColor];
        [view addSubview:label];
        imageLogo=[[[UIImageView alloc] initWithImage:[UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Map" ofType:@"png"]]] autorelease];
        imageLogo.frame=CGRectMake(25, 70, 50, 49);
        [view addSubview:imageLogo];

    }
    else
    {
        label = [[view subviews] lastObject];
    }

    label.text = @"Some text";  

    label.frame=CGRectMake(label.frame.origin.x, label.frame.origin.y, label.frame.size.width,label.frame.size.height);

    return view;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T08:33:45.677

iCarousel 用于显示视图，而不是视图控制器。

不需要为您尝试执行的操作提供一系列视图控制器 - 因为您的所有视图的行为方式都相同，您可以将控制逻辑放在一个视图控制器中，该控制器管理轮播并在轮播视图中有任何按钮在主视图控制器上调用方法，使用项目索引来确定按下了哪个轮播项目。

iCarousel 中包含几个示例来展示如何执行此操作，包括显示如何从 nib 文件加载单个轮播视图并将其操作绑定到主视图控制器的控件示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T06:00:19.633

试试 iOS 版 iCarousel，它是更好的方法，可以轻松实现更多轮播效果，如垂直和水平。以下链接可下载和实现教程。

iCarousel 演示项目链接如下：

[https://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)

iCarousel水平滚动实现教程如下链接：

[http://haifa.baluyos.net/index.php?option=com_content&view=article&id=60:objective-c-image-carousel-tutorial&catid=1:programming&Itemid=5](http://haifa.baluyos.net/index.php?option=com_content&view=article&id=60:objective-c-image-carousel-tutorial&catid=1:programming&Itemid=5)

# android - 在 RecyclerView/ListView onScroll 上隐藏 ActionBar

> ID：13559275
> 
> 赞同：46
> 
> 时间：2012-11-26T05:45:28.443
> 
> 标签：android, android-listview, scroll, android-actionbar, vertical-scrolling

在我的应用程序中，我得到了一个活动，顶部有某种操作栏，下面有列表视图。我想要做的 - 是用列表向上滚动它，所以它隐藏，然后，当列表向下滚动时 - 它应该随着列表向下滚动，就像它只是在屏幕上边框上方一样。我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-07-20T23:30:51.567

# 2015 年 6 月 3 日更新：

Google 现在使用`CoordinatorLayout`.

```
<android.support.design.widget.CoordinatorLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/main_content"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <android.support.design.widget.AppBarLayout
        android:id="@+id/appbar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar">

        <android.support.v7.widget.Toolbar
            android:id="@+id/toolbar"
            android:layout_width="match_parent"
            android:layout_height="?attr/actionBarSize"
            android:background="?attr/colorPrimary"
            app:popupTheme="@style/ThemeOverlay.AppCompat.Light"
            app:layout_scrollFlags="scroll|enterAlways" />

        <android.support.design.widget.TabLayout
            android:id="@+id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

    </android.support.design.widget.AppBarLayout>

    <android.support.v4.view.ViewPager
        android:id="@+id/viewpager"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        app:layout_behavior="@string/appbar_scrolling_view_behavior" />

    <android.support.design.widget.FloatingActionButton
        android:id="@+id/fab"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="end|bottom"
        android:layout_margin="@dimen/fab_margin"
        android:src="@drawable/ic_done" />

</android.support.design.widget.CoordinatorLayout> 
```

**来源：** [https ://github.com/chrisbanes/cheesesquare/blob/master/app/src/main/res/layout/include_list_viewpager.xml](https://github.com/chrisbanes/cheesesquare/blob/master/app/src/main/res/layout/include_list_viewpager.xml)

**记录在这里：** [https ://developer.android.com/reference/android/support/design/widget/AppBarLayout.html](https://developer.android.com/reference/android/support/design/widget/AppBarLayout.html)

# 原答案：

## 类似于 Google Play 音乐和 Umano 应用的示例：

[https://github.com/umano/AndroidSlidingUpPanel](https://github.com/umano/AndroidSlidingUpPanel)

查看此存储库中的代码。当您向上滑动面板时，ActionBar 也会向上滑动。

**从演示**：

```
 getWindow().requestFeature(Window.FEATURE_ACTION_BAR_OVERLAY);

   SlidingUpPanelLayout layout = (SlidingUpPanelLayout) findViewById(R.id.sliding_layout);
    layout.setShadowDrawable(getResources().getDrawable(R.drawable.above_shadow));
    layout.setAnchorPoint(0.3f);
    layout.setPanelSlideListener(new PanelSlideListener() {
        @Override
        public void onPanelSlide(View panel, float slideOffset) {
            Log.i(TAG, "onPanelSlide, offset " + slideOffset);
            if (slideOffset < 0.2) {
                if (getActionBar().isShowing()) {
                    getActionBar().hide();
                }
            } else {
                if (!getActionBar().isShowing()) {
                    getActionBar().show();
                }
            }
        }

        @Override
        public void onPanelExpanded(View panel) {
            Log.i(TAG, "onPanelExpanded");

        }

        @Override
        public void onPanelCollapsed(View panel) {
            Log.i(TAG, "onPanelCollapsed");

        }

        @Override
        public void onPanelAnchored(View panel) {
            Log.i(TAG, "onPanelAnchored");

        }
    }); 
```

**在此处下载示例：**

[https://play.google.com/store/apps/details?id=com.sothree.umano](https://play.google.com/store/apps/details?id=com.sothree.umano)

![在此处输入图像描述](../Images/4eb210439cbe9601217728b6ca3b56b7.png)

## ListView - 没有库：

我最近想要相同的功能，这对我来说非常有效：

当用户向上滚动时，ActionBar 将被隐藏，以便让用户可以使用整个屏幕。

当用户向下滚动并松开时，ActionBar 将返回。

```
getWindow().requestFeature(Window.FEATURE_ACTION_BAR_OVERLAY);

listView.setOnScrollListener(new OnScrollListener() {
    int mLastFirstVisibleItem = 0;

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {   }           

    @Override
    public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {    
        if (view.getId() == listView.getId()) {
            final int currentFirstVisibleItem = listView.getFirstVisiblePosition();

            if (currentFirstVisibleItem > mLastFirstVisibleItem) {
                // getSherlockActivity().getSupportActionBar().hide();
                getSupportActionBar().hide();
            } else if (currentFirstVisibleItem < mLastFirstVisibleItem) {
                // getSherlockActivity().getSupportActionBar().show();
                getSupportActionBar().show();
            }

            mLastFirstVisibleItem = currentFirstVisibleItem;
        }               
    }
}); 
```

## RecyclerView - 没有库

```
 this.mRecyclerView.setOnScrollListener(new RecyclerView.OnScrollListener() {
        int mLastFirstVisibleItem = 0;

        @Override
        public void onScrollStateChanged(RecyclerView recyclerView, int newState) {
        }

        @Override
        public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
            super.onScrolled(recyclerView, dx, dy);
            final int currentFirstVisibleItem = mLinearLayoutManager.findFirstVisibleItemPosition();

            if (currentFirstVisibleItem > this.mLastFirstVisibleItem) {
                MainActivity.this.getSupportActionBar().hide();
            } else if (currentFirstVisibleItem < this.mLastFirstVisibleItem) {
                MainActivity.this.getSupportActionBar().show();
            }

            this.mLastFirstVisibleItem = currentFirstVisibleItem;
        }
    }); 
```

如果您需要更多帮助，请告诉我！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-12T22:16:35.347

您会体验到闪烁，因为通过隐藏/向 ActionBar 显示内容布局更改的可用空间，这会导致重新布局。这样，第一个可见项位置的索引也会发生变化（您可以通过注销**mLastFirstVisibleItem**和**currentFirstVisibleItem**来验证这一点。

您可以通过让 ActionBar 覆盖您的内容布局来应对闪烁。要为操作栏启用覆盖模式，您需要创建一个扩展现有操作栏主题的自定义主题，并将**android:windowActionBarOverlay**属性设置为**true**。

有了这个，您可以消除闪烁，但操作栏将覆盖您的列表视图的内容。一个简单的解决方案是将列表视图（或根布局）的顶部填充设置为操作栏的高度。

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/list"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingTop="?android:attr/actionBarSize" /> 
```

不幸的是，这将导致顶部有一个恒定的填充。此解决方案的一个改进是在列表视图中添加一个标题视图，其高度为**?android:attr/actionBarSize**（并删除之前设置的顶部填充）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-14T23:02:26.143

您正在寻找的称为[快速返回模式](http://www.androiduipatterns.com/2012/08/an-emerging-ui-pattern-quick-return.html)，应用于操作栏。[谷歌 IO 2014](https://play.google.com/store/apps/details?id=com.google.samples.apps.iosched)应用程序正是如此。我在我的一个应用程序中使用它，您可以查看该Google 应用程序的[源代码](https://github.com/google/iosched)以了解他们是如何获得它的。BaseActivity类是您拥有所需内容、阅读代码并提取特定功能的地方[。](https://github.com/google/iosched/blob/master/android/src/main/java/com/google/samples/apps/iosched/ui/BaseActivity.java)享受编码！:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-21T14:43:42.140

我确信这不是最好的解决方案。但是我还没有找到更好的。希望它会有所帮助。

```
 static boolean scroll_down;
    ...
    mRecyclerView.setOnScrollListener(new RecyclerView.OnScrollListener() {
        @Override
        public void onScrollStateChanged(RecyclerView recyclerView, int newState) {
            super.onScrollStateChanged(recyclerView, newState);
                if (scroll_down) {
                    actionBar.hide();
                } else {
                    actionBar.show();
                }
        }

        @Override
        public void onScrolled(RecyclerView recyclerView, int dx, int dy) {
            super.onScrolled(recyclerView, dx, dy);
            if (dy > 70) {
                //scroll down
                scroll_down = true;

            } else if (dy < -5) {
                //scroll up
                scroll_down = false;
            }
        }
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-17T08:18:17.993

我认为这是个好主意。

```
listView.setOnScrollListener(new OnScrollListener() {
    int mLastFirstVisibleItem = 0;

@Override
public void onScrollStateChanged(AbsListView view, int scrollState) {
      switch (scrollState) {
            case OnScrollListener.SCROLL_STATE_FLING:
                if (view.getId()==lv_searchresult_results.getId()){
                final int currentFirstVisibleItem=lv_searchresult_results.getFirstVisiblePosition();
                    if(currentFirstVisibleItem>mLastFirstVisibleItem){

                    ObjectAnimator.ofFloat(toolbar, "translationY", -toolbar.getHeight()).start();
                    else if(currentFirstVisibleItem<(mLastFirstVisibleItem)){

                    ObjectAnimator.ofFloat(toolbar, "translationY", 0).start();
                    }
                    mLastFirstVisibleItem= currentFirstVisibleItem;
                }

                if(lv_searchresult_results.getLastVisiblePosition() == myAdapter.getListMap().size()){ 
                    if(myAdapter.getListMap().size() < allRows&&!upLoading){

                    }
                }
                break;
            case OnScrollListener.SCROLL_STATE_IDLE:

                if (view.getFirstVisiblePosition()<=1){
                    ObjectAnimator.ofFloat(toolbar, "translationY", 0).start();

                }
                    if(lv_searchresult_results.getLastVisiblePosition() == myAdapter.getListMap().size()){
                    if(myAdapter.getListMap().size() < allRows&&!upLoading){

                    }
                }
                break; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-14T08:17:30.770

如果您使用的是 CoordinatorLayout，这就是诀窍。

```
<android.support.v7.widget.Toolbar
    android:id="@+id/toolbar"
    android:layout_width="match_parent"
    android:layout_height="?attr/actionBarSize"
    android:background="?attr/colorPrimary"
    app:layout_scrollFlags="scroll|enterAlways" /> 
```

当用户向下滚动列表时，该`app:layout_scrollFlags="scroll|enterAlways"`行将导致我们的工具栏从屏幕上滚动出来，并且一旦他开始向上滚动，工具栏就会再次出现。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-08T13:21:57.677

我认为它会工作得很好......

```
listView.setOnScrollListener(new OnScrollListener() {
            int mLastFirstVisibleItem = listView.getLastVisiblePosition();
            boolean isScrolling = false;

            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {
                if(scrollState == 0)
                    isScrolling = false;
                else if(scrollState == 1)
                    isScrolling = true;
                else if(scrollState == 2)
                    isScrolling = true;     
            }

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {    
                if (view.getId() == myTeamListView.getId()) {

                    if(isScrolling) {
                    final int currentFirstVisibleItem = myTeamListView.getLastVisiblePosition();

                    if (currentFirstVisibleItem > mLastFirstVisibleItem) {                      
                        ((AppCompatActivity)getActivity()).getSupportActionBar().hide();
                    } else if (currentFirstVisibleItem < mLastFirstVisibleItem) {                       
                        ((AppCompatActivity)getActivity()).getSupportActionBar().show();                    
                    }
                    mLastFirstVisibleItem = currentFirstVisibleItem;
                    }
                }
            }
        }); 
```

# python - 我可以在 Python shell 中写入斜体吗？

> ID：13559276
> 
> 赞同：14
> 
> 时间：2012-11-26T05:45:33.960
> 
> 标签：python, italics

是否可以写这样的东西：

```
>>> text_output = "Hello World."
>>> print text_output 
```

...如果 text_output 打印到 Python Shell，它在哪里以斜体打印？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-26T06:04:23.053

在 Python 2 或 3 中，如果您的控制台支持斜体，例如[rxvt-unicode](http://software.schmorp.de/pkg/rxvt-unicode.html)，您可以在斜体文本之前加上[ansi 转义码](http://en.wikipedia.org/wiki/ANSI_escape_code)for italics `\x1B[3m`，然后将其附加`\x1B[0m`为 reset/normal 以返回正常字符。

```
>>> print("Normal text \x1B[3mitalic text\x1B[0m normal text") 
```

[![上面的代码执行和打印斜体](../Images/5b205a726b40cb312531c5d1a146f994.png)](https://i.stack.imgur.com/gmev1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:54:38.583

不在标准的 Python shell 中，不。如果您希望*所有*输出文本都以斜体显示，您可以使用一些 GUI shell，例如 Dreampie。如果您希望能够实际设置文本样式（使用斜体、粗体等），则需要使用一些提供这种功能的 GUI 库。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T05:53:32.093

否。打印功能`sys.stdout`默认输出到。假设您使用的是 IDLE 之类的东西，这将简单地回显到 IDLE 中。您可以在 IDLE 本身中设置一些选项来显示不同的字体和大小等等，但这会修改​​所有内容，而不仅仅是`print`命令的输出。

# ruby-on-rails - 为 Rails 应用程序记录到 Redis

> ID：13559277
> 
> 赞同：0
> 
> 时间：2012-11-26T05:45:37.303
> 
> 标签：ruby-on-rails, logging, heroku, redis, analytics

我在 Heroku 上运行 Rails 应用程序，并希望将所有日志消息记录到 Redis，而不是将标准日志记录到文件/标准输出（或除此之外），以便审计和分析日志。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:59:58.190

[您会在https://github.com/ahoward/ledis](https://github.com/ahoward/ledis)找到 ledis - 一个基于 redis 的简单记录器

# c# - 使用 WMI 在 WPF ViewModel 中实现 USB 处理程序

> ID：13559279
> 
> 赞同：0
> 
> 时间：2012-11-26T05:45:53.693
> 
> 标签：c#, wpf, mvvm, usb, wmi

我正在使用 WMI ManagementEventWatcher 来检测插入和拔出的 USB 设备。我在 ViewModel 中实现了我的 USB 处理代码，因此我的 TreeView 数据源可以在任何检测时更新。我一直在遇到一个关于 COM 对象的 InvalidComObjectException，该对象已与其底层 RCW 分离，无法使用。

我已经阅读了一些文章/答案，并了解这是由于未处理 WMI 对象。但是我没有看到在 WPF ViewModel (MVVM) 中执行此操作的任何具体示例。希望有人能给我一些建议如何解决这个问题。非常感谢。

# java - 即使面板打印，KeyListener 也不起作用

> ID：13559283
> 
> 赞同：1
> 
> 时间：2012-11-26T05:46:11.290
> 
> 标签：java, keylistener

我有以下代码（我`frame.add(new LevelPanel())`在我的 main 方法中执行 extends `JFrame`。出于某种原因，此代码对于`KeyListener`其他人来说正是它的样子，但它不识别任何东西。

当我按下一个键时，它至少应该打印出“到这里”（它没有）。该代码确实打印了面板，但面板对我按下的任何键都没有反应。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

/*
 * Items represent the things in the level that can be picked up.
 * Subclasses: Gem
 * 
 * @author Tim Ochsner
 * @version 1.0 11/18/2012
 */

public class LevelPanel extends JPanel {
private Game game;
private Level level;
private Player player;
private char[][] table =
        {{'p', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f'},
        {'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'w', 'f', 'f', 'f', 'f', 'f'},
        {'f', 'f', 'f', 'f', 'w', 'f', 'f', 'f', 'f', 'w', 'f', 'f', 'f', 'f', 'f'},
        {'f', 'f', 'f', 'f', 'w', 'f', 'f', 'f', 'w', 'w', 'w', 'f', 'f', 'f', 'f'},
        {'f', 'f', 'f', 'f', 'w', 'f', 'f', 'f', 'f', 'f', 'f', 'w', 'f', 'f', 'f'},
        {'f', 'f', 'f', 'f', 'w', 'f', 'f', 'f', 'f', 'f', 'f', 'w', 'f', 'f', 'f'},
        {'f', 'f', 'f', 'f', 'w', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f'},
        {'w', 'f', 'f', 'f', 'w', 'w', 'w', 'w', 'w', 'f', 'f', 'f', 'f', 'f', 'f'},
        {'w', 'w', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'w', 'f'},
        {'w', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'w', 'f'},
        {'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'w', 'f'},
        {'f', 'f', 'f', 'f', 'f', 'f', 'w', 'w', 'w', 'w', 'f', 'f', 'w', 'w', 'f'},
        {'f', 'f', 'w', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'w', 'f', 'f', 'w', 'f'},
        {'f', 'f', 'w', 'f', 'f', 'f', 'f', 'f', 'f', 'w', 'f', 'f', 'f', 'f', 'f'},
        {'w', 'w', 'w', 'w', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f', 'f'}};

public LevelPanel(Game game)
{
    this.game = game;
    player = game.getPlayer();
    level = new Level(game, table);
    setBackground(Color.WHITE);
    addKeyListener(new ArrowListener());

}

public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    level.draw(g);
}

public class ArrowListener implements KeyListener {

    public void keyPressed(KeyEvent e) {
        System.out.println("Got here");
        if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
            if (!(player.getCol() == 14) && level.getTileLayout()[player.getRow() + 1][player.getCol()].isPassable()) {
                System.out.println("Got here");
                player.move(player.getRow() + 1, player.getCol());
                table[player.getRow()][player.getCol()] = 'f';
                table[player.getRow() + 1][player.getCol()] = 'p';
            }
        }

    }

    public void keyReleased(KeyEvent e) {
        System.out.println("Got here");

    }

    public void keyTyped(KeyEvent arg0) {
            System.out.println("Got here");         
    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:52:17.927

`KeyListener`是一个善变的情妇，我建议您避免使用它们以支持[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

`KeyListener`只有在 1- 组件可聚焦且 2- 组件具有焦点时才会触发事件。键绑定允许您绕过此限制。

如果您必须使用`KeyListener`，首先调用`setFocusable(true)`您的`LevelPanel`，然后调用`requestFocusInWindow`。

# php - iOS 应用程序开发的第一步？

> ID：13559286
> 
> 赞同：-3
> 
> 时间：2012-11-26T05:46:59.090
> 
> 标签：php, objective-c, ios, xcode, variables

好吧，这是那个问的人完全迷失的问题之一......

我想为 iOS 开发，但 Objective-C 代码对我来说看起来很陌生。我习惯于在程序风格中使用 PHP。

我希望能够设置一个变量，然后在 iOS 模拟器上回显该变量（没有要按下的按钮，只有要回显的变量）。

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:53:09.933

请检查此[http://www.techotopia.com/index.php/Main_Page](http://www.techotopia.com/index.php/Main_Page)。它适合每个初学者，您可以选择 ios 5、ios 6，也可以通过简单的示例在目标 c 上找到。

在这里查看我的答案，通过添加标签在屏幕上打印。[从应用程序委托在应用程序窗口上添加标签](https://stackoverflow.com/questions/13510835/adding-label-on-application-window-from-app-delegate/13511015#13511015)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:51:25.643

在控制台中回显：应用程序中的 AppDelegate.m:didFinishLaunchingWithOptions: 方法

```
NSString *string = @"Hello World";
NSLog(@"%@", string); 
```

创建新标签：viewDidLoad 方法中的 ViewController.m

```
NSString *string = @"Hello World";

UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 300, 25)];
label.text = string;
[self.view addSubview:label]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T05:57:03.277

在 .m 文件中的实现标记上创建一个全局变量。比如， NSString *str=@"Hello"; 在 .xib 文件中拖动一个 UILabel 并在 .h 文件中为其创建一个属性。

@property(nonatomic,retain)IBOutlet UILabel *label;

将 UILabel 附加到属性。然后在 .m 文件的 ViewdidLoad 方法中将变量分配给属性，例如

标签.文本=str；

就这样

# curl - 如何停止通过 jruby 代码执行 curl 命令？

> ID：13559290
> 
> 赞同：0
> 
> 时间：2012-11-26T05:47:25.113
> 
> 标签：curl, jruby, jrubyonrails

我从控制器调用的模型方法中有以下代码。

`Kernel.system"curl -H "Content-Type:application/json" -d "{\"party\":{\"lock_version\":\"0\",\"party_type\":\"Customer\",\"name\":\"xxxxx\",\"sub_type\":\"\",\"description\":\"\",\"contacts_attributes\":{\"1\":{\"name\":\"Jy\",\"email\":\"xxxx@gmail.com\",\"is_default\":\"true\",\"_destroy\":\"0\"}}}}" "http://localhost:3000/company/customers?auth_token=BhD7P6sXkHkNwVVXx3TF""`

当上面的代码执行时，我可以在控制台上看到。

`% Total % Received % Xferd Average Speed Time Time Time Current Dload Upload Total Spent Left Speed 100 202 0 0 0 202 0 0 --:--:-- 0:04:13 --:--:-- 0`

但上述过程仍在继续。当我使用关闭服务器时，`CTRL+c`我可以在控制台上看到以下几行。

`Started POST "/company/customers?auth_token=BhD7P6sXkHkNwVVXx3TF" for 127.0.0.1 at Mon Nov 26 05:24:13 +0000 2012 Processing by PartiesController#create as JSON Parameters: {"party"=>{"lock_version"=>"0", "party_type"=>"Customer", "name"=>"xxxxx", "sub_type"=>"", "description"=>"", "contacts_attributes"=>{"1"=>{"name"=>"Jy", "email"=>"xxxx@gmail.com", "is_default"=>"true", "_destroy"=>"0"}}}, "auth_token"=>"BhD7P6sXkHkNwVVXx3TF", "party_type"=>"Customer"} WARNING: Can't verify CSRF token authenticity`

这意味着我`customer`正在成功使用`curl`.

但是为什么我需要关闭我的服务器然后重新启动才能看到`curl`命令的结果？这个问题有什么解决方案还是我做错了什么？

请帮我，

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:24:48.053

我的问题得到了答案。我只需要使用`-m`命令来限制命令的执行时间。

像

`Kernel.system"curl -m 3 -H "Content-Type:application/json" -d "{\"party\":{\"lock_version\":\"0\",\"party_type\":\"Customer\",\"name\":\"xxxxx\",\"sub_type\":\"\",\"description\":\"\",\"contacts_attributes\":{\"1\":{\"name\":\"Jy\",\"email\":\"xxxx@gmail.com\",\"is_default\":\"true\",\"_destroy\":\"0\"}}}}" "http://localhost:3000/company/customers?auth_token=BhD7P6sXkHkNwVVXx3TF""`

这将运行 3 秒......所以现在我不需要关闭我的服务器。:-)

# qt - Qt 是否可以在主进程的子窗口中运行外部进程？

> ID：13559292
> 
> 赞同：2
> 
> 时间：2012-11-26T05:47:31.997
> 
> 标签：qt, process

我有一个多文档程序（称之为 HostProgram）。我希望有一个进程（称为 GuestProcess）来管理 HostProgram 中的每个打开的文档，以提高稳定性（如果其中一个 Guest Process 崩溃，我不会被迫关闭 HostProgram 和其他正在运行的 GuestProccesses）。是否可以使用 Qt 库在 HostProcess 的子窗口中呈现组成 GuestProcess 的 GUI？如果是怎么办？

非常感谢您能为我提供的任何帮助/提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:52:00.907

如果我理解你的问题，那么你可以提供帮助：

```
 bool QProcess::startDetached ( const QString & program, const QStringList & arguments) [static] 
```

在新进程中使用给定参数启动程序程序，并从中分离。成功返回真；否则返回假。如果调用进程退出，分离的进程将继续存在。

例如：

```
 QProcess process;
    process.setProcessChannelMode(QProcess::ForwardedChannels);
    process.startDetached(/*you new task*/); 
```

# android - Android 版本 4 中的 Tumblr（使用 OAuth 的 tumblr API）登录页面中出现了额外的文本字段？

> ID：13559294
> 
> 赞同：1
> 
> 时间：2012-11-26T05:47:51.120
> 
> 标签：android, tumblr

![在此处输入图像描述](../Images/851feb6b7473013d3db194513b6deca9.png)

我正在使用 OAuth 来集成 Tumblr API。它在所有设备上都可以正常工作，但是当我在 GT-P6200 更新的 Android 4 上检查时，我遇到了以下问题：

当我单击电子邮件字段并开始键入时，布局中会出现一个额外的文本字段。当焦点从文本字段中移除时，这会消失。也单击它使其消失。

有没有人发现这个问题？有没有办法删除它？

# mysql - 防止特定用户在 SQL 中修改特定表

> ID：13559295
> 
> 赞同：0
> 
> 时间：2012-11-26T05:47:52.947
> 
> 标签：mysql, sql, phpmyadmin, database-permissions

正如标题所说，但是我已尽一切努力防止用户修改此表而没有运气

由于某种原因，mySQL 5.5 手册中不存在 DENY，因此以下内容不起作用

```
DENY ALL ON OBJECT::database.table TO user
DENY ALL ON database.table TO 'user'@'localhost'
REVOKE ALL ON database.table TO 'user'@'localhost' 
```

最后一个给了我这个错误

```
There is no such grant defined for user 'user' on host 'localhost' on table 'table' 
```

但是，如果是这种情况，那么它是否无法插入、选择或更新？

任何帮助表示赞赏，我将在下面添加系统信息。

软件：MySQL

软件版本：5.5.27 - MySQL 社区服务器 (GPL)

协议版本：10

Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7

数据库客户端版本：libmysql - mysqlnd 5.0.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:22:36.570

您不能只从一张表中锁定 MySQL 用户。如果他们已经拥有整个数据库的权限，您需要撤销该权限并重新授予他们对他们**确实**需要能够接触的特定表的访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:32:22.050

您可以更改更新语句以使用该[`current_user()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_current-user)功能：

```
update mytable set
...
where id = ?
and current_user() not in ('john', 'bob', 'sally') 
```

# php - 如何将带引号的字符串存储到 sql 数据库中？

> ID：13559313
> 
> 赞同：1
> 
> 时间：2012-11-26T05:49:30.513
> 
> 标签：php, mysql, sql

我有一个网站，用户输入一个标题。我希望标题能够使用任何标点符号。我的问题是生病有一个查询：

```
"INSERT INTO table(title, body) VALUES ('$title','$body')"; 
```

其中 $title 和 $body 是 GET 变量。当我在标题中加上引号时会发生什么，它就像结束字符串并创建无效的 sql 查询一样。说我有

```
$title = "I'm entering a title";
"INSERT INTO table(title, body) VALUES ('$title','$body')";
//"INSERT INTO table(title, body) VALUES ('I'm entering a title','$body')"; 
```

它结束了字符串。我尝试使用所有双引号和转义字符，但没有。有谁知道解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T05:52:00.520

您的查询很容易受到攻击，`SQL Injection`但使用 PHP 的**[PDO](http://php.net/manual/en/book.pdo.php)**或**[MySQLi](http://php.net/manual/en/book.mysqli.php)**可以帮助您解决该问题（*也允许您在数据库中插入单引号*），请阅读下面的文章

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T05:55:36.267

在将数据输入数据库和从数据库输出时使用这两个功能。

```
/****************************************/
/* Encode special chars                 */
/*                                      */
/****************************************/

function DBin($string) 
{
    return  trim(htmlspecialchars($string,ENT_QUOTES));
}

/****************************************/
/* Decode special chars                 */
/*                                      */
/****************************************/

function DBout($string) 
{
    $string = trim($string);
    return htmlspecialchars_decode($string,ENT_QUOTES);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T05:54:08.850

您应该首先通过 PHP 清理变量，然后通过 PDO 或 MySQLi 将它们发送干净...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T05:58:04.947

你可以试试这个php函数..

```
mysql_real_escape_string

    $title1       = "I'm entering a title";
    $title        = mysqli_real_escape_string($title1);
    "INSERT INTO table(title, body) VALUES ('$title','$body')"; 
```

试试这个，希望对你有帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T06:00:17.883

你需要`mysqli_real_escape_string`你的SQL。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T06:04:32.703

这种情况已经有一个内置的方法......看看[`mysql_escape_string`](http://php.net/manual/en/function.mysql-escape-string.php)方法......看下面的代码......

```
$title = "I'm entering a title";
$title = mysql_escape_string( $title );
// $title === I\'m entering a title
"INSERT INTO table(title, body) VALUES ('$title','$body')";
// "INSERT INTO table(title, body) VALUES ('I\'m entering a title','$body')"; 
```

# objective-c - NSDate转换设置工作日

> ID：13559314
> 
> 赞同：1
> 
> 时间：2012-11-26T05:49:33.543
> 
> 标签：objective-c, ios, cocoa-touch

我有一个 NSDate 对象`*myDate`。我可以从该日期获取工作日，并且我想将工作日设置为 an`integer c`并仅在该周获取新的日期对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:58:00.157

我搜索了它并找到了答案，这是代码..

```
 NSDateComponents *comps = [[NSDateComponents alloc] init];
                [comps setDay:1];
             NSDate   *newDate = [[NSCalendar currentCalendar] dateByAddingComponents:comps toDate:[NSDate date] options:0];
                NSLog(@"new date==%@",newDate); 
```

这将返回第二天的日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:18:14.810

```
 NSDate *date = [NSDate date];
            NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
            [formatter setDateFormat:@"MMM dd, yyy"];
            date = [formatter dateFromString:string];

            NSCalendar *calendar = [NSCalendar currentCalendar];
            NSInteger units = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit |       NSWeekdayCalendarUnit;
            NSDateComponents *components = [calendar components:units fromDate:date];
            NSInteger day = [components day];
            NSInteger weekday = [components weekday]; // if necessary 
```

# java - 如何使用 JavaParser 解析方法或任何其他有效表达式

> ID：13559315
> 
> 赞同：1
> 
> 时间：2012-11-26T05:49:34.313
> 
> 标签：java, parsing, javaparser

[JavaParser](http://code.google.com/p/javaparser)是一个java源代码解析工具。我阅读了文档，但发现它只能解析完整 java 类的源代码，例如：

```
public class X {
    public void show(String id) {
        Question q = Quesiton.findById(id);
        aaa.BBB.render(q);
    }
} 
```

但我只想解析其中的一部分，例如方法声明：

```
public void show(String id) {
    Question q = Quesiton.findById(id);
    aaa.BBB.render(q);
} 
```

怎么做或者有可能吗？如果没有，是否有任何其他工具可以做到这一点？

* * *

**更新**

实际上我想解析java中的任何有效表达式，所以我可以用JavaParser轻松做到这一点：

```
CompilationUnit unit = JavaParser.parse(codeInputStream);

addField(unit, parseField("public String name"));  // not possible now 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:56:53.960

我看到您可以将该方法包含在一个虚拟类中并像往常一样解析它。对于您提供的示例，请将其附在里面：

```
public class DUMMY_CLASS_FOO {

    // The string you're trying to parse (method or whatever)

} 
```

然后你像往常一样解析它并在解析时忽略你的虚拟类。

**更新：**

对于您提供的更新，您可以尝试捕获

如果以前的附件没有这样做，则将其包含在：

```
public class DUMMY_CLASS_FOO {

    public void DUMMY_METHOD_FOO {

        // Anything here

    }
} 
```

您还可以搜索访问级别修饰符（公共、私有、...等），如果找到，请执行第一个解决方案。如果没有找到，做另一个。

# ruby-on-rails - Rails 客户端验证处理所有表单的提交操作

> ID：13559318
> 
> 赞同：0
> 
> 时间：2012-11-26T05:49:39.617
> 
> 标签：ruby-on-rails, validation, client-side-validation

我正在使用 Rails 客户端验证 gem，版本 3.2.1。现在，我遇到了一个问题，现在在我不希望应用这些验证的表单上应用验证。

请找出我的两个表格，用于注册和登录。

```
_sign_up_form.html.erb
<%= form_for(@user, :validate => true, :remote => true) do |f| %>

_sign_in_form.html.erb
<%= form_for(@user_session, :remote => true) do |f| % 
```

如您所见，我仅在我的注册表单上设置了 validate => true。

我希望这些客户端验证在 sign_up 表单上而不是在 sign_in 表单上工作。请注意，这两种形式都是在对各自控制器的“新”操作发出 ajax 请求之后加载的。

_sign_up_form.html.erb 在 users/new.js.erb 被渲染时被加载

```
*users/new/js.erb*
$("#static-form-modal .modal-body").html('<%= j(render(:partial => "users/sign_up_form"))%>');
$('form').live("click",function() {
$(this).enableClientSideValidations();
}); 
```

_sign_in_form.html.erb 在 user_sessions/new.js.erb 被渲染时被加载

```
*user_sessions/new.js.erb*
$('#static-form-modal .modal-body').html('<%= j(render(:partial => "user_sessions/sign_in_form"))%>'); 
```

客户端验证在注册表单中运行良好，错误消息显示在错误字段旁边。

问题是**当我单击登录表单的提交按钮时，这些验证错误消息出现在错误字段旁边**。显然，服务器端验证，但我无法想办法删除出现在错误字段旁边的那些错误消息。

另外，我不是简单的形式。我在 initializers/client_side_validations.rb 中取消了这些行的注释。

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
  unless html_tag =~ /^<label/
    %{<div class="field_with_errors">#{html_tag}<label for="#{instance.send(:tag_id)}" class="message">#{instance.error_message.first}</label></div>}.html_safe
  else
    %{<div class="field_with_errors">#{html_tag}</div>}.html_safe
  end
end 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:58:10.637

我不确定这是否是正确的方法，但我检查了实例是否响应 object_name 方法并相应地更改了我的代码。

请找到编辑后的代码。

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
  if html_tag =~ /^<label/ or instance.respond_to?(:object_name)
    %{<div class="field_with_errors">#{html_tag}</div>}.html_safe
  else
    %{<div class="field_with_errors">#{html_tag}<label for="#{instance.send(:tag_id)}" class="message">#{instance.error_message.first}</label></div>}.html_safe
  end
end 
```

之前生成的代码可以在问题帖子中看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-03T15:49:13.003

只是为了扩展 Sunil 已经正确的内容，如果您使用的是 Rubocop，它可能会抱怨使用`html_safe`并建议使用辅助方法。

这是 Sunil 更改代码的方法

```
ActionView::Base.field_error_proc = proc do |html_tag, instance|
    if html_tag =~ /^<label/
        ApplicationController.helpers.raw("<div class='field_with_errors'>#{html_tag}</div>")
    else
        ApplicationController.helpers.raw("<div class='field_with_errors'>#{html_tag}<label for='#{instance.send(:tag_id)}' class='message'>#{instance.error_message.first}</label></div>")
    end
end 
```

# performance - Haskell：缓存、记忆和引用透明度

> ID：13559319
> 
> 赞同：1
> 
> 时间：2012-11-26T05:49:41.997
> 
> 标签：performance, haskell, profiling, ghc, memoization

> **可能的重复：**
> [GHC Haskell 中的记忆何时自动？](https://stackoverflow.com/questions/3951012/when-is-memoization-automatic-in-ghc-haskell)

我知道由于 Haskell 程序中的引用透明性，记住大多数函数应该几乎是微不足道的。编译器（GHC）会做这些吗？如果是这样，是否有一种简单的方法可以确定哪些功能正在被记忆？（例如。使用分析器。最好不需要知道组装）

如果没有，是否有惯用的方法在 Haskell 中进行记忆？在 C/C++/Java 中，我通常有一个静态或全局变量，将输入映射到计算结果，但我想不出在 Haskell 中表示它的方法。

# php - 3 级嵌套子网格的 CRUD 操作的完整示例

> ID：13559321
> 
> 赞同：0
> 
> 时间：2012-11-26T05:49:51.887
> 
> 标签：php, jqgrid, jqgrid-php, subgrid

我想实现一个 3 级嵌套子网格的 jQgrid，我能够创建 3 级嵌套子网格，但是，CRUD 操作似乎存在缺陷。

如果有人有 3 级嵌套子网格的 CRUD 操作的完整示例，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:29:28.163

我可以使用这个作为参考来解决问题。 [http://www.trirand.net/d...tion/php/_2v90kvcfq.htm](http://www.trirand.net/d...tion/php/_2v90kvcfq.htm)

希望它可以帮助那里的任何人。

# asp.net - 如何在 ASP.NET MVC 4 中使用带有数据注释的 jQuery ui 自定义日期选择器

> ID：13559323
> 
> 赞同：2
> 
> 时间：2012-11-26T05:49:57.157
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我在使用带有数据注释验证的 jQuery 自定义日期选择器时遇到问题。

这是我的元数据

```
[Display(Name = "DOB")]
[Required(ErrorMessage = "Please enter {0}")]
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
public DateTime MyDate { get; set; } 
```

这是我的观点。

```
 $(function () {
 $("#MyDate").datepicker({ dateFormat: 'dd/mm/yy' });
 }); 
```

和

```
@Html.LabelFor(model => model.MyDate)
@Html.EditorFor(mode => mode.MyDate)
@Html.ValidationMessageFor(model => model.MyDate) 
```

例如，当我选择日期时，`31/12/2012`它显示错误**The value '31/12/2001' is not valid for DOB**。

如果我提供像 mm/dd/yyyy( `12/31/2012`) 这样的输入，它会接受。

所以我错过了什么，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:15:12.607

你如何发回你的数据？你在使用网络 api 吗？

我认为您的客户端和服务器端日期格式存在某种冲突。

如果您使用 DatePicker 界面（不是通过手动输入日期）来选择日期，那么选择日期的格式是什么？

尝试在您的 webconfig 中进行设置

```
<configuration>
  <system.web>
    <globalization culture="en-GB" uiCulture="en-GB"/>
  </system.web>
</configuration> 
```

看看它是否有效。

我在使用任何 jquery 插件时总是使用的另一种选择是[jQuery Validity](http://validity.thatscaptaintoyou.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:18:54.103

回答我自己的问题。

我在这个[线程](https://stackoverflow.com/questions/7058111/different-datetimeformat-for-dev-and-test-environment)上找到了答案。我们必须在下面添加文化和 UI 文化代码`web.config`

```
<globalization uiCulture="en" culture="en-GB" /> 
```

# emulation - 2011 和 2012 三星智能电视模拟器有什么区别？

> ID：13559325
> 
> 赞同：0
> 
> 时间：2012-11-26T05:50:05.553
> 
> 标签：emulation, samsung-smart-tv

我在哪里可以读到这个？

我写了三星智能电视应用程序，但在 2011 模拟器中有一些错误。谢谢！对不起我的语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:19:59.023

[您可以在此处](http://www.samsungdforum.com/Devtools/Spec)查看电视/模拟器规格。主要区别在于：

*   DOM 的级别（2 对 3）
*   JavaScript 引擎（Javascript 1.8 与 SquirrelFish）

据我所知，网络浏览器的引擎也发生了变化，但我不确定是不是在 2011 年到 2012 年之间。但是，以前使用 Gecko，现在是 Webkit。

# xslt - 如何在 XSLT 中将数据从一个元素显示到两列？

> ID：13559328
> 
> 赞同：-2
> 
> 时间：2012-11-26T05:50:30.917
> 
> 标签：xslt

让我们看看，

```
<item>    
        <name>A</name>
    </item>
      <item>
<name>B</name></item>
     <item>
     <name>C</name></item>
    <item>       
        <name>D</name></item>
     <item>
     <name>E</name></item>
    <item>
     <name>F</name></item>
     <item>
     <name>G</name></item> 
```

现在我正在寻找 XSLT 转换之类的；

```
A           B
C           D
E           F
G           H 
```

我希望在 html 页面的两列中显示“名称”。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:28:17.947

尝试将位置除以 2 并查看是否有余数...

**XML 输入**

```
<items>
    <item>
        <name>A</name>
    </item>
    <item>
        <name>B</name>
    </item>
    <item>
        <name>C</name>
    </item>
    <item>
        <name>D</name>
    </item>
    <item>
        <name>E</name>
    </item>
    <item>
        <name>F</name>
    </item>
    <item>
        <name>G</name>
    </item>
</items> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/*">
        <html>
            <table>
                <xsl:apply-templates select="item[position() mod 2 = 1]"/>
            </table>
        </html>
    </xsl:template>

    <xsl:template match="item[position() mod 2 = 1]">
        <tr>
            <td><xsl:value-of select="name"/></td>
            <td><xsl:value-of select="following-sibling::item[1]/name"/></td>
        </tr>
    </xsl:template>

</xsl:stylesheet> 
```

**HTML 输出**

```
<html>
   <table>
      <tr>
         <td>A</td>
         <td>B</td>
      </tr>
      <tr>
         <td>C</td>
         <td>D</td>
      </tr>
      <tr>
         <td>E</td>
         <td>F</td>
      </tr>
      <tr>
         <td>G</td>
         <td></td>
      </tr>
   </table>
</html> 
```

# fpdf - FPDF 相邻打印 MultiCell()

> ID：13559330
> 
> 赞同：20
> 
> 时间：2012-11-26T05:50:39.093
> 
> 标签：fpdf

我四处搜索，发现这个问题很常见，但我似乎找不到正确和直接的答案。我正在使用 FPDF，我想使用 MultiCell() 生成表格，因为我需要它的换行属性。尝试过 Cell() 但它无法读取换行符。

```
$col1="PILOT REMARKS\n\n";
$pdf->MultiCell(189, 10, $col1, 1, 1);
$col2="Pilot's Name and Signature\n".$name;
$pdf->MultiCell(63, 10, $col2, 1);
$pdf->Ln(0);
$col3="Date Prepared\n".$date;
$pdf->MultiCell(63, 10, $col3, 1); 
```

但我无法正确生成它，因为 MultiCell() 会堆叠结果。如何以最简单易行的方式实现 MultiCell() 彼此相邻打印？

发现了这个[类似的问题](https://stackoverflow.com/questions/11982375/placing-two-multicells-next-to-each-other-using-fpdf-in-php)，但没有提供明确的答案。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-26T15:32:43.350

尝试存储 X 和 Y 坐标，然后在写入后设置它们

```
$x = $pdf->GetX();
$y = $pdf->GetY();

$col1="PILOT REMARKS\n\n";
$pdf->MultiCell(189, 10, $col1, 1, 1);

$pdf->SetXY($x + 189, $y);

$col2="Pilot's Name and Signature\n".$name;
$pdf->MultiCell(63, 10, $col2, 1);
$pdf->Ln(0);
$col3="Date Prepared\n".$date;
$pdf->MultiCell(63, 10, $col3, 1); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-30T23:09:44.157

只是为了补充[丹尼的答案](https://stackoverflow.com/a/13567996/2305831)。我喜欢保存每列的宽度，然后在执行 SetXY 方法时使用它。

例子：

```
$x = $this->x;
$y = $this->y;
$push_right = 0;

$this->MultiCell($w = 100,3,"Column\r\nNumber 1",1,'C',1);

$push_right += $w;
$this->SetXY($x + $push_right, $y);

$this->MultiCell($w = 60,3,"Column\r\nNumber 2",1,'C',1);

$push_right += $w;
$this->SetXY($x + $push_right, $y);

$this->MultiCell(0,3,"Column 3\r\nFilling in the Rest",1,'C',1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-22T15:13:14.493

您可以使用 SetXY(x,y) 函数在 pdf 中设置光标。

```
 $pdf->SetXY(x,y); 
```

设置光标以打印pdf中的数据

其中 x 是 x 轴值，y 是 y 轴值

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-04T10:24:12.423

`$pdf->Ln(10);` 与_`$pdf->cell();`

例子：

```
$pdf->cell(100,10,"your content");
$pdf->Ln(10); 
```

# xml - 在 iOS 应用程序（plist JSON 或 XML）中如何处理这么多数据？

> ID：13559333
> 
> 赞同：0
> 
> 时间：2012-11-26T05:50:41.483
> 
> 标签：xml, xcode, plist

我正在构建一个简单的应用程序，它将列出并提供城镇内地点的描述，并且我正在寻找向应用程序提供数据的最佳方式的说明（plist 的数据太多？）

*   它是静态数据（我打算将它与应用程序捆绑在一起）
*   必须动态加载数据（以便我可以在多个城镇重复使用该应用程序）
*   是的，数据需要更新，但很少更新（可能每年更新一次）
*   该应用程序最多可以列出多达 300 个地点（每个描述将包含 3 或 4 小段文本 - 总共可能 60 个单词，所以在我看来数据量相对较少）

**我的问题是**：plist 是否适合这么多的数据，还是我应该查看 JSON、XML 或其他替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:08:35.620

我更喜欢你应该在包中使用 JSON 文件，当你需要这些数据时，读取 JSON 文件并将其转换为 NSDictionary 并使用它。它更喜欢以某种方式为您节省大量时间来创建 plist 文件，因为当您阅读此 JSON 文件时使用`NSJSONSerialization`或任何它工作的库将 JSON 转换为`NSDictionary/NSArray`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:07:13.263

我更喜欢使用 plist 文件（实际上是一个 xml 文件）。主要有2个原因：

1.  sdk 提供了将 plist 读入 NSDictionary/NSArray 的便捷方法；
2.  Xcode 可以使用 plist、xml 和源代码编辑器轻松编辑它。

# postgis - 使用 postgis 和 geodjango 在多边形边界上点

> ID：13559334
> 
> 赞同：1
> 
> 时间：2012-11-26T05:50:43.807
> 
> 标签：postgis, geodjango

我在表中有点数据和多面数据。如何使用 postgis 和 geodjango 找到位于多多边形边界上的点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:58:18.620

我无法帮助你解决 geodjango，但我可以给你一个 PostGIS 查询。

```
SELECT ST_Contains(ST_Boundary(ST_GeomFromText('POLYGON((1 1,0 0, -1 1, 1 1))')),
                               ST_GeomFromText(points.g))
FROM UNNEST(ARRAY['POINT(1 1)', 'POINT(0 1)']) points (g) 
```

关键是用来[`ST_Boundary`](http://postgis.refractions.net/docs/ST_Boundary.html)获取多边形的边界并检查它是否包含该点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:02:48.610

我猜你可以只使用 PostGIS SQL：

```
SELECT points,area from points_table,area WHERE 
area_geometry && points 
AND ST_Contains(area_geometry,points) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-20T12:52:24.910

使用 ST_Covers 它包含自己的边界。但是在这种情况下要小心，一个点可以被许多（多）多边形包含。

```
SELECT ST_Covers(ST_GeomFromText('POLYGON((1 1,0 0, -1 1, 1 1))'),
                               ST_GeomFromText(points.g))
FROM UNNEST(ARRAY['POINT(1 1)', 'POINT(0 1)', 'POINT(0 0.5)']) points (g) 
```

# png - 如何命令 Automator 一次将多个图像从 PNG 转换为 ICNS？

> ID：13559343
> 
> 赞同：2
> 
> 时间：2012-11-26T05:51:37.390
> 
> 标签：png, applescript, converter, automator, icns

我使用 OS X Mountain 10.8.2。

我使用 Automator 并添加了 AppleScript，从[Iconoodle 的旧应用程序开发人员那里复制命令 - 方便的 ICNS 到 PNG 图像转换](http://macscripter.net/viewtopic.php?id=25281)（OS X 10.8 作为 PPC 应用程序不支持 Iconoodle）。我将工作流程保存为应用程序。我选择了图像并将它们放入应用程序，但图像没有转换为 ICNS。[我还从问题Convert image to .icns file AppleScript Obj-C 中](https://stackoverflow.com/questions/11991645/convert-image-to-icns-file-applescript-obj-c)复制了它，它也没有工作。

我真的很沮丧。我想使用 Automator 将多个图像从 PNG 转换为 ICNS 一次。在图标编辑器应用程序中将每个图像转换为 ICNS 非常烦人，一对一。Preview.app 不想将 PNG 格式的图像转换为 ICNS，因为它只有一页，只有当图标有很多页时，它才能将其转换为 ICNS。

你知道做吗？

感谢您的关注、帮助和耐心！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:27:13.510

您仍然可以通过将 iconoodle 脚本粘贴到 AppleScript Editor 来运行它。它只是 sips 的包装器，但它只能将 icns 转换为 png。

您可以直接使用 sips 将 png 转换为 icns：

```
for f in *.png; do sips -s format icns "$f" --out "${f%png}icns"; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:11:58.970

这是另一种方法... 注意：在创建 icns 文件之前，您的原始 png 将被缩放到预期的大小。如果要保留原始 png 的副本，请先复制它。您还可以在脚本中添加一行左右以自动执行此操作。

```
property expectedSizes : {16, 32, 48, 128, 256, 512, 1024, 9999999}

set myFiles to choose file with multiple selections allowed

repeat with aFile in myFiles

    tell application "System Events" to set bPath to POSIX path of (container of aFile)
    set newPath to bPath & "/" & bName(aFile) & ".icns" as text
    set aFile to quoted form of (POSIX path of aFile)

    set {W, H} to {paragraph 1, paragraph 2} of (do shell script "sips -g pixelWidth -g pixelHeight " & aFile & " | grep -Eo [0-9]*$")
    set {W, H} to {W as number, H as number}

    if W > H then
        set W to eSize(W)
        do shell script "sips " & aFile & " -Z " & W & " -p " & W & space & W & " --padColor FFFFFF -i"
        delay 1
    else if H > W then
        set H to eSize(H)
        do shell script "sips " & aFile & " -Z " & H & " -p " & H & space & H & " --padColor FFFFFF -i"
        delay 1
        -- H = W but not in expected sizes
    else if H is not in expectedSizes then
        set H to eSize(H)
        do shell script "sips " & aFile & " -Z " & H & " -p " & H & space & H & " --padColor FFFFFF -i"
        delay 1
    end if

    do shell script "sips -s format icns " & aFile & " --out " & quoted form of newPath
end repeat

on bName(theFile)
    tell application "Finder" to set {name:fileName, name extension:nameExtension} to theFile
    set baseName to text 1 thru ((get offset of "." & nameExtension in fileName) - 1) of fileName
end bName

on eSize(lDimen)
    repeat with i from 1 to 8
        if lDimen < item i of expectedSizes then return item (i - 1) of expectedSizes
    end repeat
end eSize 
```

# php - 将 PHP 代码添加到 Drupal 7 页面

> ID：13559347
> 
> 赞同：3
> 
> 时间：2012-11-26T05:52:17.947
> 
> 标签：php, drupal-7

是否可以将 PHP 代码添加到 drupal 内容（例如基本页面）？我启用了上下文和上下文 PHP 模块。谁能告诉我是否可以谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T10:07:34.843

是的，这是可能的。您应该启用“PHP过滤器”模块（它是一个核心模块，因此它已经安装并在您的模块列表管理员/模块中可用），然后在创建新节点时选择“PHP代码”作为您的文本格式（您节点中的php代码也是应该被`<?php ?>`要执行的标签包围）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-22T20:56:28.417

应该注意的是，在 Drupal（或任何其他）环境中启用 PHP 具有巨大的安全隐患。启用 PHP 的环境***非常***强大，如果被恶意甚至错误地使用，可能会产生灾难性的后果。仅当您知道自己在做什么以及为什么要这样做时才启用 PHP。它默认关闭是有原因的。

# ios - 获取 UITableViewCell 内元素的位置

> ID：13559349
> 
> 赞同：1
> 
> 时间：2012-11-26T05:52:39.573
> 
> 标签：ios, xamarin.ios

我真的很难从**UITableViewCell内的按钮呈现弹出窗口**

当我处理**button.TouchUpInside**事件时，**((UIButton)sender).Frame**始终是相同的值 - 位置相对于单元格而不是当前视图，这导致弹出窗口的位置错误。我究竟做错了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:12:04.643

您需要处理表格视图应用的偏移量。`UITableView`是 的子类`UIScrollView`，它具有[contentOffsett](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/contentOffset)属性。将此添加到您的框架中以查找真实位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:14:24.683

不知道为什么我遇到了一些麻烦，但这有效：

`var location = button.ConvertRectToView(button.Bounds, View);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:23:03.143

`((UIButton)sender).bounds`

将返回您所需的值

# android - 如何解决 viewpager ：指定的孩子已经有一个父母。您必须先在孩子的父母上调用 removeView()

> ID：13559353
> 
> 赞同：32
> 
> 时间：2012-11-26T05:53:15.800
> 
> 标签：android, google-maps, android-viewpager

在我的项目中，我使用 viewpager 和三个名为`History`, `Main`,的选项卡`Map`。**主要**活动包括计时器、秒表等。**地图**显示谷歌地图。现在进入**历史**，我只使用简单的 Textview。

Viewpager 流向：**历史** -**主要**-**地图**

我将 Main 设置为当前项目（默认 Main 标签显示）。现在，当我从**Main** > **Map**和**Map** > **Main**滑动时，它的工作完美。**但是当从Main** > **History**滑动时 没有错误，但从**History**返回**Main** ( **History** > **Main** ) eclipse 给我错误，例如：

```
E/AndroidRuntime(  533): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
```

仅供参考，我正在使用`intent into Map Activity`。请检查下面的代码。请让我知道如何解决我的问题。

**ViewPager 类：**

```
@Override
    public Fragment getItem(int position) {
        // return SwipeyTabFragment.newInstance(TITLES[position]);

        Fragment f = new Fragment();

        switch (position) {
        case 0:
            f = History.newInstance(position);
            break;
        case 1:
            f = Main.newInstance(position);
            break;
        case 2:
            f = Map.newInstance(position);
            break;

        }

        return f;

    } 
```

**历史课：**

```
public class History extends Fragment {

public static Fragment newInstance(int position) {
    History f = new History();
    Bundle args = new Bundle();

    args.putInt("title", position);
    f.setArguments(args);
    return f;

}

 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    ViewGroup root = (ViewGroup) inflater.inflate(R.layout.history, null);

     ( (TextView) root.findViewById(R.id.text)).setText("Hello");
    return root;
} 

} 
```

**主类：**

```
 public class Main extends Fragment implements GPSCallback {

 ......

public static Fragment newInstance(int position) {
    Main f = new Main();
    Bundle args = new Bundle();

    args.putInt("title", position);
    f.setArguments(args);
    return f;

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    final ViewGroup root = (ViewGroup) inflater
            .inflate(R.layout.main, null);

    .......

    return root;
 }

    ........
} 
```

**地图类：**

```
public class Map extends Fragment {

private static final String KEY_STATE_BUNDLE = "localActivityManagerState";

private LocalActivityManager mLocalActivityManager;

protected LocalActivityManager getLocalActivityManager() {
    return mLocalActivityManager;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle state = null;
    if (savedInstanceState != null) {
        state = savedInstanceState.getBundle(KEY_STATE_BUNDLE);
    }

    mLocalActivityManager = new LocalActivityManager(getActivity(), true);
    mLocalActivityManager.dispatchCreate(state);
}

public static Fragment newInstance(int position) {
    Map f = new Map();
    Bundle args = new Bundle();

    args.putInt("title", position);
    f.setArguments(args);
    return f;

}

  @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

        Intent i = new Intent(getActivity(), MapViewActivity.class);
       // Intent i = new Intent(getActivity(), hellogooglemap.class);
        Window w = mLocalActivityManager.startActivity("tag", i); 

        View currentView=w.getDecorView(); 
        currentView.setVisibility(View.VISIBLE); 
        currentView.setFocusableInTouchMode(true); 
        ((ViewGroup) currentView).setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS);
        return currentView;

      /*ViewGroup root = (ViewGroup) inflater.inflate(R.layout.history, null);

         ( (TextView) root.findViewById(R.id.text)).setText("Hello");
        return root;*/

}

 @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putBundle(KEY_STATE_BUNDLE,
                mLocalActivityManager.saveInstanceState());
    }

    @Override
    public void onResume() {
        super.onResume();
        mLocalActivityManager.dispatchResume();
    }

    @Override
    public void onPause() {
        super.onPause();
        mLocalActivityManager.dispatchPause(getActivity().isFinishing());
    }

    @Override
    public void onStop() {
        super.onStop();
        mLocalActivityManager.dispatchStop();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mLocalActivityManager.dispatchDestroy(getActivity().isFinishing());
    }

} 
```

日志猫：

```
 E/AndroidRuntime(  533): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
 E/AndroidRuntime(  533):   at android.view.ViewGroup.addViewInner(ViewGroup.java:1976)
 E/AndroidRuntime(  533):   at android.view.ViewGroup.addView(ViewGroup.java:1871)
 E/AndroidRuntime(  533):   at android.view.ViewGroup.addView(ViewGroup.java:1828)
 E/AndroidRuntime(  533):   at android.view.ViewGroup.addView(ViewGroup.java:1808)
 E/AndroidRuntime(  533):   at android.support.v4.app.NoSaveStateFrameLayout.wrap(NoSaveStateFrameLayout.java:40)
 E/AndroidRuntime(  533):   at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:874)
 E/AndroidRuntime(  533):   at android.support.v4.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1240)
 E/AndroidRuntime(  533):   at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:612)
 E/AndroidRuntime(  533):   at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
 E/AndroidRuntime(  533):   at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
 E/AndroidRuntime(  533):   at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:139)
 E/AndroidRuntime(  533):   at android.support.v4.view.ViewPager.populate(ViewPager.java:804)
 E/AndroidRuntime(  533):   at android.support.v4.view.ViewPager.completeScroll(ViewPager.java:1280)
 E/AndroidRuntime(  533):   at android.support.v4.view.ViewPager.computeScroll(ViewPager.java:1176)
 E/AndroidRuntime(  533):   at android.view.ViewGroup.drawChild(ViewGroup.java:1562)
 E/AndroidRuntime(  533):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
 E/AndroidRuntime(  533):   at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
 E/AndroidRuntime(  533):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
 E/AndroidRuntime(  533):   at android.view.View.draw(View.java:6883)
 E/AndroidRuntime(  533):   at android.widget.FrameLayout.draw(FrameLayout.java:357)
 E/AndroidRuntime(  533):   at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
 E/AndroidRuntime(  533):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
 E/AndroidRuntime(  533):   at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
 E/AndroidRuntime(  533):   at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
 E/AndroidRuntime(  533):   at android.view.View.draw(View.java:6883)
 E/AndroidRuntime(  533):   at android.widget.FrameLayout.draw(FrameLayout.java:357)
 E/AndroidRuntime(  533):   at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1862)
 E/AndroidRuntime(  533):   at android.view.ViewRoot.draw(ViewRoot.java:1522)
 E/AndroidRuntime(  533):   at android.view.ViewRoot.performTraversals(ViewRoot.java:1258)
 E/AndroidRuntime(  533):   at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
 E/AndroidRuntime(  533):   at android.os.Handler.dispatchMessage(Handler.java:99)
 E/AndroidRuntime(  533):   at android.os.Looper.loop(Looper.java:130)
 E/AndroidRuntime(  533):   at android.app.ActivityThread.main(ActivityThread.java:3683)
 E/AndroidRuntime(  533):   at java.lang.reflect.Method.invokeNative(Native Method)
 E/AndroidRuntime(  533):   at java.lang.reflect.Method.invoke(Method.java:507)
 E/AndroidRuntime(  533):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 E/AndroidRuntime(  533):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 E/AndroidRuntime(  533):   at dalvik.system.NativeStart.main(Native Method)
 W/ActivityManager(   68):   Force finishing activity      com.android.gps/.viewpager.SwipeyTabsSampleActivity
 W/ActivityManager(   68): Activity pause timeout for HistoryRecord{40716740 com.android.gps/.viewpager.SwipeyTabsSampleActivity} 
```

谢谢。

**编辑：**

没有意图进入地图活动它可以工作 pwrfect。我的意思是当我使用与历史相同的地图时，没有任何错误。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-22T16:22:30.643

我使用的时候遇到了同样的问题

```
View res = inflater.inflate(R.layout.fragment_guide_search, container); 
```

在 Fragment.onCreateView(...

你必须打电话

```
View res = inflater.inflate(R.layout.fragment_guide_search, container, false); 
```

或者

```
View res = inflater.inflate(R.layout.fragment_guide_search, null); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-27T10:38:43.473

我也遇到过这个问题。

你可以通过添加单行来解决它`mViewPager.setOffscreenPageLimit(3);`

```
public class SwipeyTabsSampleActivity extends FragmentActivity {

...

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    mViewPager = (ViewPager) findViewById(R.id.viewpager);
    mTabs = (SwipeyTabs) findViewById(R.id.swipeytabs);

    SwipeyTabsPagerAdapter adapter = new SwipeyTabsPagerAdapter(this,
            getSupportFragmentManager());
    mViewPager.setAdapter(adapter);

    mViewPager.setOffscreenPageLimit(3);  <------  Add this one
}

} 
```

祝你好运。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-09T08:06:08.980

首先，RB Patel 插入代码的答案（如下所示）非常有效，但当我读到此功能时，我意识到它是一种潜在的优化，实际上并不是解决该错误的方法。

```
mViewPager.setOffscreenPageLimit(3); 
```

Android 开发者网站对这种方法有以下说明：

> setOffscreenPageLimit(int limit) - 设置在空闲状态下应保留到视图层次结构中当前页面任一侧的页面数。

似乎这只是对缓存在当前页面右侧或左侧的页面数量设置了限制。在我的情况下，这只是解决问题的创可贴，是的，错误停止了，一切顺利，但我的程序中仍然潜伏着糟糕的代码，根本没有被执行。我相信此方法旨在用作优化，而不是实际修复该错误。

我在尝试重载扩展 PagerAdapter 的自定义类中的 instantiateItem() 方法时遇到了这个问题。在我导航回我之前访问过/实例化的选项卡/页面后，我的错误被抛出。

我是 Android 新手，但我会尽力解释我的解决方案。引发此错误的行如下：

```
v.addView(child); 
```

如果我理解正确的话，那是令人窒息的，因为孩子之前已经实例化并分配了一个父母。

当我导航回以前访问过的视图/页面时，我试图将已经具有父布局视图的视图添加到新布局，因此出现错误。

解决方案：我只是通过查看它是否设置了父视图来检查我试图显示（实例化）的子视图是否已经在其他地方实例化。如果子视图已经创建，那么我只是使用子视图的父视图而不是创建新的布局。

这是我的代码（如果冒犯了任何专家，我深表歉意）：

```
@Override
public Object instantiateItem(View container, int position) { 
    LinearLayout v = new LinearLayout(mContext);

    //the view being loaded (unless it already was then we have to handle it)
    View child = mViews.get(position);

    //If the child view was loaded already then it will have a parent view it belongs to
    //We return the parent view instead of adding the child to the LinearLayout we just created and returning that new layout.
    if(child.getParent() != null) {
        View parent = (View) child.getParent();
        ((ViewPager) container).addView(parent);
        return parent;
    }

    //first time instantiating a child view/page
    v.addView(child);            

    // These lines execute the first time a given page is instantiated
    ((ViewPager) container).addView(v);

    return v;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-25T07:45:41.767

// 如果要添加的子视图已经绑定到父视图，则从父视图中移除子视图，然后再次添加到容器中。

```
if (v.getParent() != null) {
  ((ViewGroup) v.getParent()).removeView(v);
}
container.addView(v); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-04T11:08:26.680

对于适配器，如果您使用的是 tabLayout 或 viewPager，而不是像下面这样`getChildFragmentManager()`替换它。`getActivity().getSupportFragmentManager()`

`TabAdapter adapter = new TabAdapter(getActivity(), getActivity().getSupportFragmentManager());`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-11T10:51:00.780

这是我的解决方案（在每个片段中使用），它允许平滑并避免内存问题：

```
...
private LayoutInflater mInflater;
private WeakReference<View> mRootView = null;
...

@Override
public View onCreateView(final LayoutInflater inflater, final ViewGroup container, final Bundle savedInstanceState) 
  {
  if (inflater != null)
    mInflater = inflater;
  else
    mInflater = LayoutInflater.from(getActivity());
  View rootView = mRootView == null ? null : mRootView.get();
  if (rootView != null) 
      {
      final ViewParent parent = rootView.getParent();
      if (parent != null && parent instanceof ViewGroup)
        ((ViewGroup) parent).removeView(rootView);  
      }
  else 
       {
       rootView = mInflater.inflate(R.layout.fragment_test, null, false);
       mRootView = new WeakReference<View>(rootView);
       }
  return rootView;
  } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-30T12:41:07.210

```
@Override
public Object instantiateItem(View arg0, int arg1) {
    Log.d("instantiateItem", ""+arg0+" "+arg1);
    try { 
        if(mListViews.get(arg1).getParent()==null)
            ((ViewPager) arg0).addView(mListViews.get(arg1), 0);  
        else{
            // I am new to android, it is strange that the view to be added is already bound to a parent
            // Through trials and error I solve this problem with the following codes
            // Add that the element of mlistviews is listview in pagerview;
            ((ViewGroup)mListViews.get(arg1).getParent()).removeView(mListViews.get(arg1));

            ((ViewPager) arg0).addView(mListViews.get(arg1), 0); 
        }
    } catch (Exception e) {   
        Log.d("parent=", ""+mListViews.get(arg1).getParent()); 
        e.printStackTrace();  
    }  
    return mListViews.get(arg1);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-01-16T14:28:07.957

如果您正在使用 FragmentPagerAdapter，那么只需在 FragmentPagerAdapter 中使用 destroyItem 方法。

```
@Override
public void destroyItem(ViewGroup container, int position, Object object) 
{
        FragmentTransaction ft=fm.beginTransaction();
        ft.remove((Fragment) object);
        ft.commit();
} 
```

setOffscreenPageLimit(int limit) 消耗更多内存，在某些情况下它不能完美运行。它在任一侧的保留状态见描述。**setOffscreenPageLimit(int limit) - 设置在空闲状态下应保留到视图层次结构中当前页面任一侧的页面数。**

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-04-06T13:55:05.237

检查您的布局文件中是否有任何 ConstrainLayout （或类似的）。这可能是引发该错误的原因。

# objective-c - 需要参考 NSURLConnection 吗？

> ID：13559367
> 
> 赞同：2
> 
> 时间：2012-11-26T05:54:29.480
> 
> 标签：objective-c, macos, delegates

我可以在 中创建一个`NSURLConnection`带有异步请求的对象`applicationDidFinishLaunching:`，而不是在实例变量中保留对它的引用，如下所示？

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    NSURLConnection *localVariable = [[NSURLConnection alloc] initWithRequest:req delegate:self];
} 
```

我相信这在不使用 ARC 时应该可以工作。虽然我不再对该`NSURLConnection`对象有任何引用，但它应该完成它的工作并且不会被释放，直到我在它的一个委托方法中释放它，比如`connectionDidFinishLoading:`，因为它`applicationDidFinishLaunching:`的保留计数为 +1，对吧？

然而，问题是：这被认为是不好的风格吗？我是否应该始终维护具有这种对象关系的实例变量？我该怎么做才能使这项工作与 ARC 一起使用？毕竟，当`localVariable`超出范围时`NSURLConnection`，我想 ARC 会释放 my 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:04:41.210

我找不到这方面的官方参考，但似乎`NSURLConnection`create with`initWithRequest`对自身保持了强烈的引用，以防止它被释放。只有在调用最终委托函数或取消连接后才会删除此引用。

（参见例如对 NSURLConnection 的 retainCount或[http://www.cocoabuilder.com/archive/cocoa/110116-nsurlconnection-retaincount-at-initialisation.html](http://www.cocoabuilder.com/archive/cocoa/110116-nsurlconnection-retaincount-at-initialisation.html)[有一点困惑](https://stackoverflow.com/questions/5220902/been-having-a-little-confusion-about-the-retaincount-of-nsurlconnection)）

因此，您的代码也适用于 ARC：即使`localVariable`超出范围，只要连接处于“活动状态”，就会有另一个对连接的引用。

这意味着您不必*保留*对连接的引用。但它很有用，因为它使您能够在必要时取消连接。

# dll - XBox360可以加载的DLL文件最大大小是多少

> ID：13559372
> 
> 赞同：1
> 
> 时间：2012-11-26T05:54:47.517
> 
> 标签：dll, size, xbox360

我在Xbox360平台上开发过游戏。我在我的源代码 (c#) 中嵌入了一些游戏资源。所以它使我的 DLL 非常大（大约 16 MB）。在PC上，没关系，可以加载DLL。但它在 Xbox 中不起作用。它抛出这样的异常

Microsoft.Xna.Framework.Game.dll 中发生了“System.MissingMethodException”类型的未处理异常附加信息：文件或程序集名称“MyDLL，版本=1.0.0.0，Culture=neutral，PublicKeyToken=null”，或其之一依赖，没找到。

然后我排除了一些资源以减少我的 DLL 大小（到 ~14 MB）。所以它可以在Xbox中加载。~16MB 是可以在 XBox360 中加载的 DLL 的最大大小吗？有没有办法在 XBox360 中加载更大的 DLL？

# visual-studio-2008 - 可以从 WxWidgets-2.8.12 构建中删除哪些中间文件？

> ID：13559373
> 
> 赞同：0
> 
> 时间：2012-11-26T05:54:49.733
> 
> 标签：visual-studio-2008, wxwidgets

我很少使用命令行 makefile，通常是做单个项目并手动构建它们。

我在带有 wxWidgets2.8.12 和 VS2008 的构建机器上使用 Win Xp-sp3，我为库（总共 10 个）创建了多种构建格式，这留下了大约 2.5Gb 的空间和中间文件，我使用了创建批处理文件，但不确定我是否希望以正确的方式清理正确的文件。当我尝试在 Visual Studio 中运行清理过程时，它会彻底清理中间文件和输出文件。wxWidgets 文件结构如下所示：

C:\wxWidgets-2.8.12\build\msw 包含用于不同构建类型的 10 个子文件夹。我使用了一个简单的批处理脚本进行创建：

```
echo now building... WxWidgets with debug=y Unicode=y DLL=y Universal=y
rem builds debug with unicode DLLs WXUniversal
nmake -f makefile.vc BUILD=debug UNICODE=1 SHARED=1 WXUNIV=1
rem add clean command to delete INTERMEDIATE files only 
rem (*.o, *.obj, *.res, *.pch. *.pdb, *.ilk ....) 
```

我认为运行：

```
nmake -f makefile.vc /clean 
```

在每个创建块之后都可以解决问题，但它只适用于一个目录，删除那里的所有内容。

我的问题是：我是否正在查看要在我的 rem 语句中删除的正确中间文件？是否有一种自动方法可以摆脱中间文件，但保留输出文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:25:40.913

不，“干净”目标会删除所有内容。您可能希望将输出文件（即库、DLL 和 PDB）复制到其他目录，然后“nmake clean”，然后可能将它们移回。

PS你确定你需要构建wxUniversal吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T12:35:25.047

VZ有一个很好的解决方案。另一种解决方案可能是制作新的makefile目标（复制干净的目标并修改它）并告诉它只留下输出文件，这样你就可以做到

```
nmake -f makefile.vc [OPTIONS]
nmake -f makefile.vc New_target 
```

# bash - Curl：绕过本地主机的代理

> ID：13559377
> 
> 赞同：31
> 
> 时间：2012-11-26T05:55:12.653
> 
> 标签：bash, curl, proxy

我在代理下，如果我尝试`curl http://localhost/mysite`或`curl http://127.0.0.1/mysite`curl 尝试使用代理解决它。所以我尝试了`--noproxy`选项，但不起作用。对于代理为`curl http://mysite.com`.

### 我的配置：

*   带有 curl 扩展名的 Windows 8 下的 Cygwin (bash)。
*   代理：`proxy.domain.xx:1080`无认证
*   `http_proxy=http://proxy.domain.xx:1080`
*   本地服务器：XAMP 版本 1.8.0
*   阿帕奇端口：80,443
*   浏览器：带代理的 Chrome，但配置为访问`localhost`和`*.dev`

### 来自 curl --help

> --noproxy ：逗号分隔的不使用代理的主机列表

### 我尝试了什么：

*   我已停用防火墙，但什么也没有
*   `$ curl -v http://localhost/mysite` -> 调试：

    **回复**

    ```
    Connected to proxy.domain.xx (200.55.xxx.xx) port 1080 (#0)
    GET http://localhost/mysite HTTP/1.1
    User-Agent: curl/7.21.1 (i686-pc-mingw32) libcurl/7.21.1 OpenSSL/0.9.8r zlib/1.2.3
    Host: localhost
    Accept: */*
    Proxy-Connection: Keep-Alive
    The system returned: <PRE><I>(111) Connection refused</I></PRE> 
    ```

*   `curl -v --noproxy localhost, http://localhost/muestra`

    **回复**

    ```
    About to connect() to localhost port 80 (#0)
    * Trying 127.0.0.1... 
    * Connected to localhost (127.0.0.1) port 80 (#0)
    > GET /mysite HTTP/1.1
    > User-Agent: curl/7.21.1 (i686-pc-mingw32) libcurl/7.21.1 OpenSSL/0.9.8r zlib/1.2.3
    > Host: localhost
    > Accept: */*
    >
    < HTTP/1.1 301 Moved Permanently
    < Server: Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4
    < Location: http://localhost/mysite
    < Content-Length: 331
    < Content-Type: text/html; charset=iso-8859-1 
    ```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-26T20:44:40.470

后

```
curl -v --noproxy localhost, http://localhost/muestra 
```

卷曲回应

```
About to connect() to localhost port 80 (#0)
* Trying 127.0.0.1... 
* Connected to localhost (127.0.0.1) port 80 (#0) 
```

所以它清楚地表明它连接到本地主机。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-05-03T03:42:49.090

试试下面，绕过本地 ips 的代理服务

```
export no_proxy=localhost,127.0.0.1 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-06-06T13:47:40.187

采用

curl -v --noproxy '*' [http://abc.com](http://abc.com)

完全禁用代理。

或者如果您只想为 abc.com 目标禁用代理

curl -v --noproxy "abc.com" [http://abc.com](http://abc.com)

abc.com 是您要访问的网址

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-21T22:19:51.137

正如其他一些人所说，这些`--noproxy`选项就是您要寻找的。 [https://curl.haxx.se/docs/manpage.html#--noproxy](https://curl.haxx.se/docs/manpage.html#--noproxy)

显然，您尝试的第二个请求是接收 HTTP 301 响应，因此您可能还想使用该`-L`选项来跟踪重定向： [https ://curl.haxx.se/docs/manpage.html#-L](https://curl.haxx.se/docs/manpage.html#-L)

您可以使用 curl 别名来始终忽略 localhost 请求的代理。

`alias curl='curl --noproxy localhost,127.0.0.1'`

为方便起见，将其添加到您的 .bashrc 文件中：

`echo "alias curl='curl --noproxy localhost,127.0.0.1'" >> ~/.bashrc`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-06-08T13:04:58.623

在 Windows 中，以下选项适用于我连接到 localhost。

> curl --proxy "" --location [http://127.0.0.1:8983](http://127.0.0.1:8983)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-09T01:28:35.557

Curl 希望使用代理指定端口此解决方案对我有用

导出 http_proxy="http://myproxy:80"

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-30T11:26:34.260

作为一种解决方法，您可以在运行 curl 之前取消设置变量 http_proxy，而不使用选项 --noproxy。

# c++ - 在win8登录屏幕上运行应用程序

> ID：13559379
> 
> 赞同：1
> 
> 时间：2012-11-26T05:55:19.637
> 
> 标签：c++, windows, login

我需要在登录屏幕上运行我的应用程序（某种屏幕键盘）（登录前，帮助输入密码）。我可以在需要时签署代码。

编辑：我更喜欢安排从我的经理应用程序代码运行的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:27:48.167

相关搜索词是“输入法编辑器”或 IME。微软已经[发布](http://msdn.microsoft.com/en-us/library/windows/apps/hh967425.aspx)了这些应该如何工作的指南，然后可以从登录屏幕中选择它们。

# session - 如何让 Symfony2 直接读取 php 原生会话

> ID：13559382
> 
> 赞同：1
> 
> 时间：2012-11-26T05:55:27.167
> 
> 标签：session, symfony

我有一个 Symfony2 应用程序，我必须从另一个非 symfony 应用程序读取会话集。

`$_SESSION`像往常一样，非 symfony 应用程序只是将其会话设置为 。

但是，当我尝试读取此会话时，数据不存在。不管我怎么做

```
$session = $this->get('request')->getSession();
var_dump($session->all()); 
```

甚至（我知道我不应该这样做，但无论如何）

```
var_dump($_SESSION); 
```

这给了我会话已经开始的错误，尽管我从未在 Symfony 应用程序中启动会话，但我不知道为什么会出现错误。告诉我这种方式是否真的有效，以便我可以调查`session_start()`事情。

```
$session = new Session();
$session->start();
var_dump($session->all()); 
```

`PHPSESSID`cookie 是在 Symfony2 应用程序中设置的，其值与非 symfony 应用程序中设置的 cookie 相同，但我的 Symfony2 应用程序只是拒绝读取会话的内容。（`$session->getName()`返回`PHPSESSID`，要清楚）

（确切地说，两个应用程序都在同一个域但不同的子域下，并且我已经在 Symfony 应用程序中`framework.session.domain`正确设置`app/config.yml`并调用`session_set_cookie_params`非 symfony 应用程序具有相同的域设置以允许在子域之间共享会话 cookie 即`.example.com`）

那么你如何读取非 symfony 应用设置的 Symfony2 应用/控制器中的会话呢？谢谢。

如果这很重要，我正在使用 Symfony 2.1。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T04:53:23.817

无需编写自定义会话处理程序，来自 Symfony2 的本机处理程序可以直接从默认的 PHP $_SESSION 读取/写入。

在 Symfony2 应用程序的 config.yml 中，添加一个 save_path 选项，如下所示：

```
framework:
    session:
        save_path: ~ 
```

清理缓存，现在您的会话将保存在默认的 PHP 路径而不是 Symfony2 会话文件夹中。您现在可以共享数据，这就是我在新 Sf2 应用程序和旧 Sf1 应用程序之间登录数据时所做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T08:36:25.117

您将无法使用本机 Symfony2 会话包装类，因为它们从 读取会话数据`app/cache/{env}/sessions/{session_id}`，并且您的非 Symfony2 应用程序不会将其会话数据写入该位置。

您可以在您的非 Symfony2 应用程序中编写一个自定义会话处理程序来写入该位置，或者更好的是您可以在 Symfony2 中编写一个本机会话处理程序类，它绕过默认的 Symfony2 会话读取位置并从默认的 PHP 会话路径获取它

编辑：自从写下这个答案后，下面的 gadbout 帖子中就有了一个更优雅的解决方案。

# java - Java Spring - 从文件执行 MySQL 查询

> ID：13559383
> 
> 赞同：1
> 
> 时间：2012-11-26T05:55:30.903
> 
> 标签：java, mysql, spring

我正在尝试执行包含存储过程的文件。我使用以下代码来执行此操作，但我不断收到错误消息，提示我的语法错误。它似乎不喜欢涉及 DELIMITER 的第一行。有人有什么建议吗？

爪哇

```
final ResourceDatabasePopulator rdp = new ResourceDatabasePopulator();
        rdp.addScript(new ClassPathResource("storedProcedures.sql"));
        try {
            rdp.populate(dataSource.getConnection());
        } catch (SQLException e) {
            e.printStackTrace();
        } 
```

例外

```
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DELIMITER // DROP PROCEDURE IF EXISTS `GetEvents`// CREATE PROCEDURE `GetEvents`' at line 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:17:20.333

我认为我们需要查看您编写的 mySQL 语法以帮助解决问题。编译器似乎给了你一个很好的提示。我自己更像是一个 SQL 服务器人，我知道如果没有 SQL 编译器的帮助来随时捕捉错误，编写嵌入式或动态 SQL 可能会很困难。

# android - 如何在android中录制音频时做Visualizer

> ID：13559384
> 
> 赞同：11
> 
> 时间：2012-11-26T05:55:33.157
> 
> 标签：android, visualizer

我知道 Visualizer 在使用 android Media Player 播放音频时会显示一些波形。

但是我想在录制音频时显示 Visualizer 意味着在录制时我想显示根据用户语音节拍而变化的线性波。

有没有可能在android中做。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-03T12:24:21.300

通过每 x 毫秒调用一次您的 MediaRecorder.getMaxAmplitude()，您将拥有（来自[官方文档](http://developer.android.com/reference/android/media/MediaRecorder.html#getMaxAmplitude%28%29)）：

> 自上次调用此方法以来采样的最大绝对幅度。

然后，您可以实时处理该值以绘制图形或更改某些视图属性。
不完美，但我希望它有帮助=）

**编辑：**正如您所知，检索到的值在所有 android 设备上都是相同的：介于 0 和 32767 之间。（我有超过 10k 的用户报告在他们吹入麦克风时给了我这个值）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T18:27:33.113

两个重要的事情：

*   您需要将实时字节（来自麦克风）转换为数值才能绘制它们。
*   由于您使用实时图表，因此使用 SurfaceView 绘制这些点。

    **将录制字节转换为数值**参考： [Android：如果发生任何声音，监听器会录制声音](https://stackoverflow.com/questions/9323452/android-listener-to-record-sound-if-any-sound-occurs)，您将看到变量“temp”保存音频的数值。

    **绘图点** 这些表示您的 Y 值的数值相对于增加的 X（时间间隔）值 (0,1,2..) 绘制为图形。使用 SurfaceView 例如..，

> ```
> //canvas.drawLine(previous X value,previous Y value,X,Y, paint);
> canvas.drawPoint(X,Y,paint);
> SurfaceHolder.unlockCanvasAndPost(canvas); 
> ```

您不需要绘制所有值，为了提高效率，您可以根据条件过滤这些值并绘制特定时间间隔。

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T17:21:23.787

您可能需要使用[AudioRecorder](http://developer.android.com/reference/android/media/AudioRecord.html)类而不是 MediaRecorder。

检查 AudioRecorder#read(...) 将音频数据放入 byte[] 而不是直接放入文件的方法。

要在图表上显示更改，您必须分析数据（以 PCM 8 或 16 位[链接](http://developer.android.com/reference/android/media/AudioRecord.html#AudioRecord%28int,%20int,%20int,%20int,%20int%29)编码）并实时更新图表。

# perl - 将 CSV 文件中的特定列转换为小写

> ID：13559389
> 
> 赞同：4
> 
> 时间：2012-11-26T05:56:05.347
> 
> 标签：perl, shell, csv

我有一个 CSV 文件，我想将特定列转换为小写。在linux中这样做的有效方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T06:05:51.133

```
awk -F"," 'BEGIN{OFS=","} {$5 = tolower($5); print}' file 
```

更改第 5 个字段。

还有`-v OFS=","`，但不是 100% 确定它的标准；`,`此外，可以省略周围的引号，但为了概括起见，我保留了它们；所以，作为一个变体：

```
awk -F, -v OFS=, '{$5 = tolower($5); print}' file 
```

请注意，awk 字段是从 1 开始的。sarathi 的回答在 perl 中做同样的事情，它是从 0 开始的；确保选择正确的索引。

编辑：正如 melpomene 正确指出的那样，这两种情况都只适用于没有引号或转义的简单 CSV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:07:10.777

如果要将 colum3 转换为小写，例如：

```
perl -F -lane '$F[2]=lc($F[2]);print "@F"' your_file 
```

# android - 使用 achartengine 的 Android 图表

> ID：13559390
> 
> 赞同：1
> 
> 时间：2012-11-26T05:56:06.867
> 
> 标签：android, charts, achartengine

我正在开发一个带有 Chart 活动的应用程序，为此我使用了 aChartEngine 的 jar 文件并开发了我的应用程序。但它会产生一个错误

```
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Landroid/support/v4/widget/CursorAdapter$1;
    at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
    at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
    at com.android.dx.command.dexer.Main.processClass(Main.java:486)
    at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
    at com.android.dx.command.dexer.Main.access$400(Main.java:67)
    at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
    at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
    at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
    at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
    at com.android.dx.command.dexer.Main.processOne(Main.java:418)
    at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
    at com.android.dx.command.dexer.Main.run(Main.java:206)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
    at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:703)
    at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:577)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
    at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
    at org.eclipse.core.internal.resources.Project.build(Project.java:124)
    at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
    at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:854)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:703)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:937)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1141)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

* * *

```
[2012-11-26 11:22:59 - Graph] Dx 1 error; aborting
[2012-11-26 11:22:59 - Graph] Conversion to Dalvik format failed with error 1 
```

帮我修复错误..

我已经完成了清理项目，并在我的应用程序中重新构建了 jar 文件，即使这个错误再次出现。

# php - 在php中切片小于85的数组值

> ID：13559397
> 
> 赞同：1
> 
> 时间：2012-11-26T05:56:35.350
> 
> 标签：php, arrays

我有一个数组

```
array(0=>12,1=>34,2=>334,3=>87,4=>75); 
```

我想要的是这个数组中小于 85 的值。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T05:59:40.433

您可以使用 PHP 的内置数组函数[`array_filter`](http://www.php.net/manual/en/function.array-filter.php)来处理基于自定义过滤函数的过滤值。

```
<?php
    function less_than_85($value) {
        return $value < 85;
    }

    $arr = array_filter($arr, "less_than_85");
?> 
```

[在此处](http://ideone.com/76Diva)查看使用您的示例输入的实时示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:01:39.477

您可以使用取消设置键的 if 语句对数组执行 foreach 循环。

就像是

`foreach($array as $k => $v){ if($v>= 85) unset($array[$k]); }`

# ios - 将 JPEG 图像保存在文档目录中 - iOS

> ID：13559406
> 
> 赞同：0
> 
> 时间：2012-11-26T05:57:17.783
> 
> 标签：ios, image, encoding, save

我有一个 yuv 图像，我使用一些函数将其转换为 jpeg。之后，如果我尝试将图像保存在相机胶卷中，我可以这样做。`writeToFile:`但是当我尝试使用 的方法将其写入文档目录时`NSData`，它失败了。一些错误 512，错误的地址。

如果我使用该`UIImageJPEGRepresentation`方法，并将我创建的 jpeg 图像传递给它，那么它会正确保存在文档目录中。

如果我想直接保存我创建的 jpeg，而不使用再次对其进行编码，该`UIImageJPEGRepresentation`怎么办？

# tfs - tfs 报告错误在 tfs 2010 中的报告上显示十字标记

> ID：13559409
> 
> 赞同：0
> 
> 时间：2012-11-26T05:57:35.727
> 
> 标签：tfs, tfs-reports

我对 TFS2010 报告的权限有疑问，当我想在 TFS2010 中打开报告时，报告上显示交叉标记，可能我没有报告权限访问报告的权限是什么？或者报告有什么问题有什么建议？？？？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:51:36.560

您需要 SQL 报告服务中的特定权限 - 我知道处理此问题的最简单方法是使用[http://tfsadmin.codeplex.com/](http://tfsadmin.codeplex.com/)

# php - 为什么在 PHP Zend 的 get_active_function_name(TSRMLS_D) 中有“zend_is_executing(TSRMLS_C)”？

> ID：13559413
> 
> 赞同：0
> 
> 时间：2012-11-26T05:58:00.297
> 
> 标签：php

在 PHP-5.2.17 的 Zend/zend_execute_API.c 第 358 行

为什么要“zend_is_executing(TSRMLS_C)”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:39:22.547

如果您查看源代码，您会看到它`get_active_function_name`尝试访问执行程序 global `function_state_ptr`。

问题是，这个 executor global 仅在 PHP 代码实际执行时才被初始化。例如，如果一个扩展在调用函数`get_active_function_name`之前尝试调用，那么如果省略-check，可能会导致 PHP 解释器崩溃。`execute``get_active_function_name``zend_is_executing`

因此，检查会阻止`get_active_function_name`访问未初始化的值，这反过来可能会导致大问题（这只是说“未定义行为”的另一种方式）。

# ajax - Drupal 7 块配置 AJAX

> ID：13559418
> 
> 赞同：2
> 
> 时间：2012-11-26T05:58:34.190
> 
> 标签：ajax, forms, callback, drupal-7, block

我正在以编程方式构建一个具有两个选择框的自定义块。第一个是自动填充的，第二个是根据第一个的值填充的。理想情况下，我想使用 AJAX，并且我有以标准形式集成 AJAX 的经验，但是块配置表单不包含 $form_state 变量，并且功能似乎有所不同。可以使用标准方法吗？

```
'#ajax'               => array(
  'callback'          => 'my_callback',
  'wrapper'           => 'the-id',
  'method'            => 'replace',
  'effect'            => 'fade',
), 
```

回调将如何工作？

谢谢，豪伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T17:28:06.357

我没有尝试过，但我敢打赌它有效：使用 hook_form_alter() 访问您的块配置表单。在那里，您将拥有一个 &$form_state 并能够做一些花哨的 AJAX 的东西（[见这个](https://drupal.org/node/1627664)）。困难的部分是只在改变钩子上改变你的形式。可能的方式：

不确定这是否有效（最优雅的方式）：

```
 function mymodule_form_alter(&$form,&$form_state,$form_id) {
      if ($form_id == 'block_admin_configure' ) {
        // Find the delta in the $form variable
        if ($form['delta'] == 'the_delta_you_are_looking_for') {
         //do fancy ajax stuff
        }
      }
    } 
```

丑陋但绝对可能：

```
function mymodule_form_alter(&$form,&$form_state,$form_id) {
  if ($form_id == 'block_admin_configure' && arg(4) == 'mymodule') {
       //do fancy ajax stuff
    }
  }
} 
```

更丑但也有可能：

```
function mymodule_block_configure($delta = '') {      
    $form = array();
    if ($delta == 'my_block') {
        $form["my_block_change_this"] = array(
            "#type" => "hidden",
            "#value" => "lalala",
        )
    }
}

function mymodule_form_alter(&$form,&$form_state,$form_id) {
    if ($form_id == 'block_admin_configure' ) {
        if (!empty($form['my_block_change_this'])) {
            //do fancy ajax stuff
        }
    }
} 
```

提示：打印出 form_state-array（在 alter hook 处）并查看里面有什么（当我遇到 FAPI-Issues 时，这总是我做的第一件事）。希望这可以帮助。

# java - 静态成员序列化

> ID：13559419
> 
> 赞同：0
> 
> 时间：2012-11-26T05:58:34.713
> 
> 标签：java, serialization

我读到“序列化不适用于静态元素”——但下面的一个简单示例告诉我并非如此。

```
class superparent implements Serializable {
    int data = 0;

    public superparent(int data) {
        this.data = data;
    }

    public int getdata() {
        return data;
    }
}

public class statichost implements Serializable {
    int member = 0;
    public static superparent s = new superparent(20);

    public statichost(int data) {
        this.member = data;
    }

    public static void main(String[] args) {
        statichost c = new statichost(6);
        try {
            FileOutputStream fs = new FileOutputStream("testSer.ser");
            ObjectOutputStream os = new ObjectOutputStream(fs);
            os.writeObject(c);
            os.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

        try {
            FileInputStream fis = new FileInputStream("testSer.ser");
            ObjectInputStream ois = new ObjectInputStream(fis);
            c = (statichost) ois.readObject();
            ois.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
        System.out.println("after: contained data is " + c.s.getdata());
    }
} 
```

根据上面的语句，当我期望 0 时，输出会打印 20。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:00:54.470

这是因为你`int data=0;`不是你的类的静态成员`superparent`。

另外我想指出，如果你忘记了这个建议，类名应该以大写字母开头

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T06:10:01.890

这里没有什么特别的事情发生。您已经为您的类声明了一个静态成员变量`statichost`。这个变量在类被 JVM 加载时初始化，不管是什么触发了类的加载。

序列化和反序列化`statichost`实例与静态字段无关，因为它们与您的类相关联，而不是与您的实例相关联。如果您想对此进行测试，请将序列化和反序列化分解为不同的块并执行以下步骤：

*   序列化您的`statichost`实例
*   更改类，使其`superparent`初始化为 15，而不是 20
*   反序列化`statichost`实例

如果静态字段被序列化，您希望`c.s.getdata()`报告 20，但它会报告 15。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:19:33.393

我认为您的测试代码无法验证这种情况。因为 20 是`public static superparent s=new superparent(20);`在类初始化时设置的，所以在类加载时它总是被 JVM 设置为 20。

**如果您希望初始数据为 0 并检查数据到 20 的修改不能被序列化**，然后尝试

1.  使用`public static superparent s=new superparent(0);`而不是 20 作为初始值。
2.  注释掉第一次执行的readObject try-catch块，在第一个try-catch块中添加修改代码**csdata=20**写入文件，然后执行代码。
3.  注释掉第二次执行的 writeObject try-catch 块，再次执行读取的 Object 代码。然后可以看到20不能序列化成文件，打印0。

# sql - 带有空值的sql oracle Union

> ID：13559421
> 
> 赞同：0
> 
> 时间：2012-11-26T05:59:13.497
> 
> 标签：sql, oracle

我对 2 个视图有疑问，当它联合时

查看 X

```
A    B    C

2    3 
```

查看 Y

```
A    B    C

     3    4 
```

这是我从 2 个视图中的查询

```
select * from view X
UNION 
select * from view Y; 
```

我得到的结果：

```
A    B    C

2    3   

     3    4 
```

我想要的结果（2 覆盖视图 Y @ 属性 A 中的空值）：

```
A    B    C

2    3   

2    3    4 
```

我怎么能得到那个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:18:30.340

尝试这个

```
select nvl(A, lag(A) over (order by rownum)), B, C from (
  select A, B, C from X
  union 
  select A, B, C from Y
) 
```

[sqlfiddle](http://sqlfiddle.com/#!4/61f33/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:58:23.080

这是oracle中的一个答案

```
select * from 
(select x from tbl1
union 
select x from tbl2) t1
,
(select y from tbl1
union 
select y from tbl2) t2
,
(select z from tbl1
union 
select z from tbl2) t3
where t1.x is not null
order by t1.x desc nulls first; 
```

# c# - 尝试运行 Monotouch-bindngs 示例 facebook 时出错

> ID：13559422
> 
> 赞同：3
> 
> 时间：2012-11-26T05:59:16.997
> 
> 标签：c#, facebook, xamarin.ios, monotouch.dialog

我收到以下错误......

错误 MT5202：本机链接失败。请查看构建日志。(MT5202)。

编译为本机代码 /Developer/MonoTouch/usr/bin/mtouch -sdkroot "/Applications/Xcode.app/Contents/Developer" -v --cache "/Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample /obj/Debug/mtouch-cache" --nomanifest --nosign -sim "/Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/Debug/sample.app" -r "/Developer /MonoTouch/usr/lib/mono/2.1/System.dll" -r "/Developer/MonoTouch/usr/lib/mono/2.1/System.Xml.dll" -r "/Developer/MonoTouch/usr/lib/mono /2.1/System.Core.dll"-r"/Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll"-r"/Users/ravichandra/Downloads/monotouch-bindings-master/ATMHud/sample/MonoTouch .Dialog.dll" -r "/Users/ravichandra/Downloads/monotouch-bindings-master/facebook/binding/Facebook.dll”-r“/Developer/MonoTouch/usr/lib/mono/2.1/System.Json.dll”-r“/Developer/MonoTouch/usr/lib/mono/2.1/System.Web.Services.dll”-debug -profiling -nolink -sdk "6.0" "/Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/Debug/sample.exe" MonoTouch 版本 6.0.0 使用框架：/Applications/Xcode。 app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk 已复制 /Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/Debug/sample.exe 到 /用户/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/sample.exe 已复制/Developer/MonoTouch/usr/lib/mono/2.1/monotouch。dll 到 /Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/monotouch.dll 复制 /Developer/MonoTouch/usr/lib/mono/2.1/mscorlib.dll 到/Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/mscorlib.dll 已复制 /Developer/MonoTouch/usr/lib/mono/2.1/System.Core.dll 到/Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/System.Core.dll 已复制 /Developer/MonoTouch/usr/lib/mono/2.1/System.dll 到/Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/System.dll 已复制 /Developer/MonoTouch/usr/lib/mono/2.1/Mono.Security.dll 到/Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/Mono。Security.dll 复制 /Developer/MonoTouch/usr/lib/mono/2.1/System.Xml.dll 到 /Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/ System.Xml.dll 已将 /var/folders/w9/w_xlv4x54j97t8kpzlq2531h0000gn/T/tmp658e855c.tmp/Facebook.dll 复制到 /Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/Debug/sample。 app/Facebook.dll 复制 /Users/ravichandra/Downloads/monotouch-bindings-master/ATMHud/sample/MonoTouch.Dialog.dll 到 /Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/ Debug/sample.app/MonoTouch.Dialog.dll 复制 /Developer/MonoTouch/usr/lib/mono/2.1/System.Web.Services.dll 到 /Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/ bin/iPhoneSimulator/Debug/sample.app/System.Web.Services。dll 将 /Developer/MonoTouch/usr/lib/mono/2.1/System.Json.dll 复制到 /Users/ravichandra/Downloads/monotouch-bindings-master/facebook/sample/bin/iPhoneSimulator/Debug/sample.app/System。 Json.dll 生成 /var/folders/w9/w_xlv4x54j97t8kpzlq2531h0000gn/T/tmp658e855c.tmp/main.m /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc -arch i386 - gdwarf-2 -fobjc-legacy-dispatch -fobjc-abi-version=2 -miphoneos-version-min=6.0 -arch i386 -std=c99 -I/Developer/MonoTouch/SDKs/MonoTouch.iphonesimulator.sdk/usr/include -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -c /var/folders/w9/w_xlv4x54j97t8kpzlq2531h0000gn/T/tmp658e855c.tmp/main.m -o /var/folders/w9/w_xlv4x54j97t8kpzlq2531h0000gn/T/tmp658e855c.tmp/main.x86.o /Applications/Xcode。app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc -Wl,-no_pie -arch i386 -gdwarf-2 -fobjc-legacy-dispatch -fobjc-abi-version=2 -miphoneos-version- min=6.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk /var/folders/w9/w_xlv4x54j97t8kpzlq2531h0000gn/T/tmp658e855c.tmp/main.x86。 o -o /var/folders/w9/w_xlv4x54j97t8kpzlq2531h0000gn/T/tmp658e855c。tmp/sample -framework CFNetwork -framework Foundation -framework GameKit -framework MapKit -framework MediaPlayer -framework MessageUI -framework OpenGLES -framework StoreKit -framework UIKit -framework AddressBookUI -framework SystemConfiguration -framework AddressBook -framework AudioToolbox -framework AVFoundation -framework QuartzCore -framework CoreGraphics -framework CoreLocation -framework MobileCoreServices -framework Security -framework CoreData -framework ExternalAccessory -framework Accounts -framework Social -weak_framework AssetsLibrary -weak_framework CoreBluetooth -weak_framework CoreTelephony -weak_framework EventKit -weak_framework EventKitUI -weak_framework CoreMotion -weak_framework GLKit -weak_framework iAd -weak_framework MediaToolbox - weak_framework NewsstandKit -weak_framework Twitter -weak_framework PassKit -weak_frameworkCoreImage -weak_framework CoreText -weak_framework ImageIO -weak_framework CoreMedia -weak_framework CoreMIDI -weak_framework CoreVideo -weak_framework AdSupport -weak_framework QuickLook -lz -u _mono_pmip -u _CreateZStream -u _CloseZStream -u _Flush -u _ReadZStream -u _WriteZStream -liconv -lmono-2.0 -lmonotouch -L/Developer/MonoTouch/SDKs/MonoTouch.iphonesimulator.sdk/usr/lib -u _catch_exception_raise -force_load /var/folders/w9/w_xlv4x54j97t8kpzlq2531h0000gn/T/tmp658e855c.tmp/libFacebookSDK.a -ObjC -lsqlite3 进程退出，代码为 1 ，命令：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc -Wl,-no_pie -arch i386 -gdwarf-2 -fobjc-legacy-dispatch -fobjc-abi-版本=2 -miphoneos-version-min=6.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator。平台/开发者/SDKs/iPhoneSimulator6.0.sdk /var/folders/w9/w_xlv4x54j97t8kpzlq2531h0000gn/T/tmp658e855c.tmp/main.x86.o -o /var/folders/w9/w_xlv4x54j97t8kpzlq2531h00058/T/tmp658.tmp/sample -framework CFNetwork -framework Foundation -framework GameKit -framework MapKit -framework MediaPlayer -framework MessageUI -framework OpenGLES -framework StoreKit -framework UIKit -framework AddressBookUI -framework SystemConfiguration -framework AddressBook -framework AudioToolbox -framework AVFoundation -framework QuartzCore -framework CoreGraphics -framework CoreLocation -framework MobileCoreServices -framework Security -framework CoreData -framework ExternalAccessory -framework Accounts -framework Social -weak_framework AssetsLibrary -weak_framework CoreBluetooth -weak_framework CoreTelephony -weak_framework EventKit -weak_framework EventKitUI -weak_framework CoreMotion -weak_framework GLKit -weak_framework iAd -weak_framework MediaToolbox - weak_framework NewsstandKit -weak_framework Twitter -weak_framework PassKit -weak_frameworkCoreImage -weak_framework CoreText -weak_framework ImageIO -weak_framework CoreMedia -weak_framework CoreMIDI -weak_framework CoreVideo -weak_framework AdSupport -weak_framework QuickLook -lz -u _mono_pmip -u _CreateZStream -u _CloseZStream -u _Flush -u _ReadZStream -u _WriteZStream -liconv -lmono-2.0 -lmonotouch -L/Developer/MonoTouch/SDKs/MonoTouch.iphonesimulator.sdk/usr/lib -u _catch_exception_raise -force_load /var/folders/w9/w_xlv4x54j97t8kpzlq2531h0000gn/T/tmp658e855c.tmp/libFacebookSDK.a -ObjC -lsqlite3 ld：找不到框架AdSupport collect2: ld 返回 1 退出状态ld 返回 1 个退出状态ld 返回 1 个退出状态找不到框架 AdSupport collect2: ld 返回 1 退出状态找不到框架 AdSupport collect2: ld 返回 1 退出状态

错误 MT5202：本机链接失败。请查看构建日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:31:56.783

```
ld: framework not found AdSupport collect2: ld returned 1 exit status 
```

您需要更新的 Xcode 版本（任何稳定的 4.5 版本 - 不是开发者预览版），您拥有的版本不包含 AdSupport 框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T19:43:28.163

> 错误 MT5202：本机链接失败。请查看构建日志。(MT5202)。

MonoTouch 告诉您本机链接器不满意。构建日志中提供了详细信息（您可以从 MonoDevelop 的错误列表面板中查看，单击**构建输出**按钮）。

遗憾的是，不发布构建日志并没有多大帮助。您可以编辑您的问题并在 MT5202 之前添加输出的一些错误/警告行吗？

一个快速的猜测是绑定只使用 ARMv6**二进制**文件，而 Xcode 4.5（及更高版本）将**只**允许您生成 ARMv7（和 ARMv7s）二进制文件。解决此问题需要更新的绑定（使用 ARMv7 的二进制文件编译）或使用允许构建 ARMv6 二进制文件的 Xcode 4.4 / iOS5.1 SDK。

# objective-c - 如何以编程方式将文件添加到我的项目中

> ID：13559425
> 
> 赞同：0
> 
> 时间：2012-11-26T05:59:29.070
> 
> 标签：objective-c, file, plist, project, add

我在 Application Support 文件夹中创建了一个包含默认值的**WinDef.plist文件。**我想将此文件添加到我的项目中，而无需手动执行。

![在此处输入图像描述](../Images/6f535a79c7efa876ed2862c43ff37c0d.png)

知道我该怎么做吗？

罗纳德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:12:11.767

在您的应用程序中尝试以下方法 didfinishlaunching 方法

```
-(void) checkAndCreateFile
    {
        //-------------------------------------------
        BOOL success;
        NSFileManager *fileManager = [NSFileManager defaultManager];
        success = [fileManager fileExistsAtPath:cFilePath];
        //-------------------------------------------
        //File already there
        if(success)
        {
            return;
        }
        //-------------------------------------------
        //create file
        NSString *filePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:cfileName];
        [fileManager copyItemAtPath:filePathFromApp toPath:cfilePath error:nil];

    }

//------------------------------------------------------------------------
// Method : copyFile
// Method to create file
//------------------------------------------------------------------------
-(void) copyFile
{

        cfileName = @"WinDef.plist";

    NSArray *documentsPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentDir = [documentsPaths objectAtIndex:0];
    cfilePath = [documentDir stringByAppendingPathComponent:cfileName];
    [self checkAndCreateFile];

} 
```

如果需要，这会将 WinDef.plist 文件保存在您的应用程序文件夹中

如果您想访问该文件值，则可以使用以下代码检索它

```
NSString *path = [[NSBundle mainBundle] pathForResource: @"WinDef" ofType: @"plist"]; 
NSDictionary *dictionary = [NSDictionary dictionaryWithContentsOfFile: path];
id obj1 = [dictionary objectForKey: @"YourKey"]; 
```

这将为您提供字典中的键值

# html - JSON 到 HTML (Codeigniter)

> ID：13559429
> 
> 赞同：0
> 
> 时间：2012-11-26T05:59:46.123
> 
> 标签：html, ajax, json, codeigniter

```
public function getCrew(){
    $search = $this->input->post('name');
    if($this->input->post('ajax') && (!empty($search))){
         $result = $this->model->getNames($search);
         foreach($result as $r){
            echo json_encode($r);
         }
    }
}

$(document).ready(function(){
$('#getMem').keyup(function(e){

    var name = {
        ajax: 1,
        name: $('#getMem').val()
    }

    $.ajax({
        url: 'work/getCrew',
        type: 'POST',
        data: name,
        dataType: 'json',
        success: function(data){
            $('#freshMem').html(data.first_name);
        },
        error: function(){
            alert('Error.');
        }
    });
});

 }); 
```

如果数据库的结果只返回一行，这很好用，如果不止一个产生错误，谁能告诉我如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:16:24.337

使用 Output 类告诉浏览器正在返回 JSON。问题是您`json_encode`在 foreach 循环中使用了多个对象。只是`json_encode`从您的模型返回的数组

```
 public function getCrew(){

        $search = $this->input->post('name');
        if($this->input->post('ajax') && (!empty($search))){
             $result = $this->model->getNames($search);

             $this->output
                         ->set_content_type('application/json')
                         ->set_output(json_encode(array("response" => $result)));
        }
    }
    $(document).ready(function(){
        $('#getMem').keyup(function(e){
        var name = {
            ajax: 1,
            name: $('#getMem').val()
        }

            $.ajax({
                url: 'work/getCrew',
                type: 'POST',
                data: name,
                dataType: 'json',
                success: function(data)
                {
                    var __html = '';

                    $.each(data.response, function (a, b) 
                    {

                        __html += '<p>'+b.first_name+'</p>';

                    });

                    $('#freshMem').html(__html);
                },
                error: function()
                {
                    alert('Error.');
                }
            });
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:05:19.537

试试这个：

```
$.ajax({
        url: 'work/getCrew',
        type: 'POST',
        data: name,
        dataType: 'json',
        success: function(data){
             json_data = $.parseJSON(data);
                         $.each(json_data, function(i,item){
                           $('#freshMem').append(item.first_name);
            });
        },
        error: function(){
            alert('Error.');
        }
    }); 
```

您必须遍历返回的数组。

您还需要更改控制器代码：

```
public function getCrew(){
    $search = $this->input->post('name');
    if($this->input->post('ajax') && (!empty($search))){
         $result = $this->model->getNames($search);
         // assuming that $result is array...
         $json = json_encode($result);
         echo $json;
         /*foreach($result as $r){
            echo json_encode($r);
         }*/
    }
} 
```

# javascript - 连接到全日历中的数据库数据

> ID：13559433
> 
> 赞同：0
> 
> 时间：2012-11-26T06:00:02.720
> 
> 标签：javascript, html, mysql

我在 arshaw/fullcalendar 上看到了日历代码。而且我已经更改了一些代码，但我仍然不知道如何将javascript连接到数据库..

这是原始代码

```
$(document).ready(function() {

var date = new Date();
var d = date.getDate();
var m = date.getMonth();
var y = date.getFullYear();

var calendar = $('#calendar').fullCalendar({
header: {
left: 'prev,next today',center: 'title',right: 'month,agendaWeek,agendaDay'
},

selectable: true,
selectHelper: true,
select: function(start, end, allDay) {
var title = prompt('Event Title:');
if (title) {
calendar.fullCalendar('renderEvent',
{
title: title,
start: start,
end: end,
allDay: allDay
},
true // make the event "stick"
);
}
calendar.fullCalendar('unselect');
},
editable: true,

});

}); 
```

这我改变了一点

```
$(document).ready(function()
{

var date = new Date();
var d = date.getDate();
var m = date.getMonth();
var y = date.getFullYear();

var calendar = $('#calendar').fullCalendar({
header: {
left: 'prev,next today',
center: 'title',
right: 'month,agendaWeek,agendaDay'
},
selectable: true,
selectHelper: true,
select: function(start, end, allDay) {

newwindow=window.open('2.php','name','height=400,width=300');
if (window.focus) {newwindow.focus()}
if (title) {
calendar.fullCalendar('renderEvent',
{
title: title,
start: start,
end: end,
allDay: allDay
},
true // make the event "stick"
);
}
calendar.fullCalendar('unselect');
},
editable: true,
});

}); 
```

我在哪里可以放置连接脚本？

需要建议。。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:36:24.330

您无法直接从 javascript 建立连接以在完整日历中使用

你必须这样做

1.  创建一个 Servlet/Action 类/C# 类（无论我们基于什么**控制器**类）；
2.  从控制器连接到数据库
3.  将响应数据写入 JSON 字符串
4.  在完整日历中，添加此属性

    事件：“servletURL”，

当日历加载时，该`events`属性将调用`servletURL`, 使用 ajax 并检索响应文本以将其显示在日历中

# android - 使用 Location API 与 Telephony API 检索设备位置

> ID：13559438
> 
> 赞同：0
> 
> 时间：2012-11-26T06:01:08.027
> 
> 标签：android

使用 Location API 和 Telephony API 获取位置有什么区别？

以前，我问过一个关于在未启用位置服务时获取位置的问题。请参阅：[未启用定位服务时检索 GPS 坐标](https://stackoverflow.com/questions/13490866/retrieving-gps-coordinates-when-location-services-are-not-enabled)

显然，使用电话 API，[http://developer.android.com/reference/android/telephony/CellLocation.html](http://developer.android.com/reference/android/telephony/CellLocation.html)这是可能的。这会返回一个整数，我认为它是基站 ID？

我对么？有什么不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T06:32:11.890

从 Location API 或 Telephony API 获取位置的基本区别在于获取位置的方法。

***Location API***根据您的 GPS 网络返回位置。您的 Android 设备请求其与 GPS 网络中的卫星的距离，并沿所述球体的边界绘制交点，而***Telephony API***根据您的小区 ID（您为响应 getCellLocation() 而获得的整数）定位您。您可能已经知道您的手机几乎总是连接到最近的手机信号塔。每个蜂窝塔的确切位置为其运营商所知，并作为位置区域代码 (LAC) 内的蜂窝 ID 分配给该塔。您的手机会存储您连接的每个塔的 Cell ID 和 LAC，从而大致了解您的位置。

有关更多信息，您可以访问[此](http://blog.wadeburch.com/2012/03/understanding-android-three-ways-to-find-your-location.html)链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:24:26.997

CellLocation 是一个抽象基类，不提供任何类型的获取位置方法。相反，您必须使用 CdmaCellLocation 或 GsmCellLocation。

CdmaCellLocation 提供 getBaseStationId，您大概称之为返回基站 id 的 int 的东西。CdmaCellLocation 还提供 getBaseStationLatitude 和 getBaseStationLongitude，这应该正是您在 CDMA 设备上想要的。但是，GsmCellLocation 不提供此类方法。您需要使用 CID 和 LAC 以及诸如 openbmap 或 opencellid 之类的服务来将 CID/LAC 转换为纬度和经度。

因此，简而言之，Location API 以直截了当的方式为您提供位置。Telephony API 为您提供有关手机连接的信息（如果存在），您必须为 GSM 和 CDMA 提供单独的实现，如果设备有 GPS 但没有电话，您就搞砸了用户。另外，我想指出您之前收到的回复：[https ://stackoverflow.com/a/13491028/198480](https://stackoverflow.com/a/13491028/198480)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:10:01.050

Location Api 将使用 gps、agps 或 glonass 来检索位置，但在电话 api 中，给出的位置不如 gps 位置精确，因为该位置是由运营商（移动运营商）返回的。Telephony api 使用三角测量计算位置。

# iphone - 使用 Bonjour 服务的 iPad 应用程序从 Mac 公用文件夹或共享文件夹访问文件

> ID：13559445
> 
> 赞同：3
> 
> 时间：2012-11-26T06:01:29.213
> 
> 标签：iphone, objective-c, ios, xcode4.5, bonjour

我想从 Mac 公用文件夹或连接到 iPad 应用程序的任何其他共享文件夹访问文件。使用 Bonjour，我可以在应用程序中获取已连接 Mac 的列表，我可以从以下两个链接下载源代码：

[https://developer.apple.com/library/ios/#samplecode/BonjourWeb/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/BonjourWeb/Introduction/Intro.html) [http://blog.haurus.com/?p=342](http://blog.haurus.com/?p=342)

但现在我想使用 Bonjour 从连接的 Mac 的 shred 文件夹中访问文件。任何示例代码或想法，然后在这里回复。

提前致谢。

# php - PHP DateTime()：显示大于 24 小时的时间长度，但如果大于 24 小时，则不显示为天

> ID：13559451
> 
> 赞同：6
> 
> 时间：2012-11-26T06:01:59.667
> 
> 标签：php, datetime

我想显示以小时、分钟和秒为单位的时间长度，其中某些时间长度大于 24 小时。目前我正在尝试这个：

```
$timeLength = new DateTime();
$timeLength->setTime(25, 30);
echo $timeLength->format('H:m:i'); // 01:30:00 
```

我希望它显示`25:30:00`。

我正在寻找一个面向对象的解决方案。

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T08:37:49.720

由于您已经有了以秒为单位的长度，您可以计算它：

```
function timeLength($sec)
{
    $s=$sec % 60;
    $m=(($sec-$s) / 60) % 60;
    $h=floor($sec / 3600);
    return $h.":".substr("0".$m,-2).":".substr("0".$s,-2);
}
echo timeLength(6534293); //outputs "1815:04:53" 
```

如果你真的想使用`DateTime`对象，这里有一个（作弊的）解决方案：

```
function dtLength($sec)
{
    $t=new DateTime("@".$sec);
    $r=new DateTime("@0");
    $i=$t->diff($r);
    $h=intval($i->format("%a"))*24+intval($i->format("%H"));
    return $h.":".$i->format("%I:%S");
}
echo dtLength(6534293); //outputs "1815:04:53" too 
```

如果您需要它 OO 并且不介意创建自己的课程，您可以尝试

```
class DTInterval
{
    private $sec=0;
    function __construct($s){$this->sec=$sec;}
    function formet($format)
    {
        /*$h=...,$m=...,$s=...*/
        $rst=str_replace("H",$h,$format);/*etc.etc.*/
        return $rst;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T08:44:17.363

`DateTime`处理一天中的时间，而不是时间间隔。而且由于没有 25 点，所以使用它是错误的。不过，它[`DateInterval`](http://php.net/DateInterval)处理日期间隔。使用它或进行一些手动计算。即使`DateInterval`您必须进行一些计算，因为它会将间隔分解为几天和几小时。最直接的做法是根据你已经拥有的秒数计算你需要什么。

# c++ - 是否有任何 Windows 功能可以使用域名获取所有 OU（组织单位）名称？

> ID：13559452
> 
> 赞同：2
> 
> 时间：2012-11-26T06:02:04.423
> 
> 标签：c++, winapi, dns, active-directory, window

我想使用域名获取所有 OU 名称。

但我不能使用 C#，我希望它来自任何 Windows 函数或 C++。

任何人都可以告诉它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:39:14.987

您可以为此使用例如 ADSI ADO 提供程序。

[这是 VBScript 的示例](http://support.microsoft.com/kb/187529)。您可以轻松地将代码移植到 C++ 中，只需使用[#import 指令](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675103%28v=vs.85%29.aspx)即可。

# linux - 修改linux网关中的http包

> ID：13559453
> 
> 赞同：-4
> 
> 时间：2012-11-26T06:02:08.400
> 
> 标签：linux, linux-kernel, ipv4, netfilter

问候，

我安装了一个 CentOS 作为网关，一些客​​户端通过这个网关（NAT）连接到互联网。

现在我想在客户请求的每个网页中插入一些字符串。如何做到这一点？netfilter、winpcap 还是别的什么？

任何意见将不胜感激:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:21:02.357

理想情况下，不要。盲目地这样做会破坏很多网页，尤其是那些大量使用 AJAX 的网页。（因为您插入的字符串最终会出现在会导致错误的地方，例如 JSON 响应。）

如果必须，您尝试做的术语是“透明代理”。鱿鱼支持这一点：[http ://wiki.squid-cache.org/SquidFaq/InterceptionProxy](http://wiki.squid-cache.org/SquidFaq/InterceptionProxy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:43:39.633

修改响应内容需要知道如何解析和正确更改该内容的东西。这意味着您无法在数据包层（第 3 层，也实现了 NAT）执行此操作，但您需要在应用程序层（第 7 层）执行此操作。应用程序级网关通常称为代理 :-)

而且由于这个问题实际上是在错误的论坛中，我现在将停止回答:-) 请将其移至即[服务器故障](https://serverfault.com/)。

# php - PHP - 使用字符串替换屏蔽 IP？

> ID：13559455
> 
> 赞同：1
> 
> 时间：2012-11-26T06:02:33.360
> 
> 标签：php, replace

是否有隐藏 IP 中最后 2-3 位数字的功能，以便显示

```
127.0.0.xxx 
```

例如？

我知道str_replace，但这不能用于此，或者可以吗？=P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T06:07:13.210

```
$text = preg_replace('/([0-9]+\\.[0-9]+\\.[0-9]+)\\.[0-9]+/', '\\1.xxx', $text); 
```

是我会选择的解决方案，因为我对正则表达式感到满意，然后它会立即显示它在做什么。还有其他几种可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T06:08:21.887

preg_replace 函数允许您替换正则表达式匹配。如果您已经有一个有效的 IP 地址字符串`$ip_addr`并且想要隐藏最后一个八位字节，

```
$str = preg_replace('/\d+$/', 'xxx', $ip_addr); 
```

如果你想隐藏最后一个八位字节*，除非*它只有一位（你说的是 2-3 位），

```
$str = preg_replace('/\d{2,}$/', 'xxx', $id_addr); 
```

# iphone - UIwebview 在 iphone 4,4s 上的 iOS 6 上加载缓慢

> ID：13559456
> 
> 赞同：1
> 
> 时间：2012-11-26T06:02:42.583
> 
> 标签：iphone, ipad, ios5, uiwebview, ios6

我使用 uiwebview（浏览器）创建了一个应用程序，我在 iOS 5 的 iphone 4,4s 上测试过，并且加载速度非常快。但是当我尝试使用 iOS 6 的 iphone 4,4s 时，加载时间非常非常慢。如何使用编程或任何其他方式处理此问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:54:12.617

我有同样的问题。试试这个答案，它对我有用。Apple 确实改变了 UIWebViews 异步加载文件的方式。

[https://stackoverflow.com/a/13547296/263503](https://stackoverflow.com/a/13547296/263503)

# android - Android“make fullbuild”失败：“单词太多（6306）。停止。”

> ID：13559457
> 
> 赞同：2
> 
> 时间：2012-11-26T06:02:45.640
> 
> 标签：android, makefile

这些天我在尝试构建 android 4.1 时遇到了问题。当我执行“make fullbuild”时，它将在日志下方打印并意外停止。但如果我“制作 libstagefright”和其他模块，它将成功。然后我发现当make模块与java相关时，会失败。

有没有人遇到过同样的问题？谢谢。

...

```
Import includes file: out/host/linux-x86/obj/STATIC_LIBRARIES/libpng_intermediates/import_includes
host C: libpng <= external/libpng/png.c
host C: libpng <= external/libpng/pngerror.c
host C: libpng <= external/libpng/pnggccrd.c
host C: libpng <= external/libpng/pngget.c
host C: libpng <= external/libpng/pngmem.c
host C: libpng <= external/libpng/pngpread.c
host C: libpng <= external/libpng/pngread.c
host C: libpng <= external/libpng/pngrio.c
host C: libpng <= external/libpng/pngrtran.c
host C: libpng <= external/libpng/pngrutil.c
host C: libpng <= external/libpng/pngset.c
host C: libpng <= external/libpng/pngtrans.c
host C: libpng <= external/libpng/pngvcrd.c
host C: libpng <= external/libpng/pngwio.c
host C: libpng <= external/libpng/pngwrite.c
host C: libpng <= external/libpng/pngwtran.c
host C: libpng <= external/libpng/pngwutil.c
host StaticLib: libpng (out/host/linux-x86/obj/STATIC_LIBRARIES/libpng_intermediates/libpng.a)
Export includes file: frameworks/base/tools/aapt/Android.mk -- out/host/linux-x86/obj/EXECUTABLES/aapt_intermediates/export_includes
host Executable: aapt (out/host/linux-x86/obj/EXECUTABLES/aapt_intermediates/aapt)
true
Notice file: frameworks/base/tools/aapt/NOTICE -- out/host/linux-x86/obj/NOTICE_FILES/src//bin/aapt.txt
Notice file: frameworks/base/libs/androidfw/NOTICE -- out/host/linux-x86/obj/NOTICE_FILES/src//lib/libandroidfw.a.txt
Notice file: frameworks/native/libs/utils/NOTICE -- out/host/linux-x86/obj/NOTICE_FILES/src//lib/libutils.a.txt
Notice file: system/core/liblog/NOTICE -- out/host/linux-x86/obj/NOTICE_FILES/src//lib/liblog.a.txt
Notice file: system/core/libcutils/NOTICE -- out/host/linux-x86/obj/NOTICE_FILES/src//lib/libcutils.a.txt
Notice file: external/expat/NOTICE -- out/host/linux-x86/obj/NOTICE_FILES/src//lib/libexpat.a.txt
Notice file: external/libpng/NOTICE -- out/host/linux-x86/obj/NOTICE_FILES/src//lib/libpng.a.txt
Install: out/host/linux-x86/bin/aapt
build/core/java_library.mk:67: *** Too many words (6306).  Stop. 
```

# c++ - 使用输入重定向，如何在 C 中读取文件并获取字符串？

> ID：13559462
> 
> 赞同：0
> 
> 时间：2012-11-26T06:03:39.310
> 
> 标签：c++

我有一个文件，我希望我的程序从命令行使用输入重定向读取该文件。例如，`a.out < file.dat`。然后我打算使用`cin.get()`并将字符放入一个数组中。

我不想硬编码任何输入文件名，我在一些现有的帖子中已经看到了。如果我将此输入重定向视为`stdin`，我是否必须显式打开我的文件？

```
int main (int argc, char *argv[])
{

  string filename;
  ifstream infile;

  cin >> filename;  

  do {               

  int c = 0; 
  c = infile.get();  //need to get one character at a time
                     //further process

} while ( ! infile.eof()); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:51:40.093

您可以只使用[`cin`](http://en.cppreference.com/w/cpp/io/cin)，它是与关联的流缓冲区`stdin`

```
#include <iostream>

int main()
{
    char c;
    while (std::cin.get(c))
    {
        std::cout << c << std::endl; // will print out each character on a new line
    }
    exit(0);
} 
```

# php - mySQLi 准备失败，多个？从表格

> ID：13559464
> 
> 赞同：0
> 
> 时间：2012-11-26T06:03:46.653
> 
> 标签：php, html, mysql, sql, mysqli

我正在尝试创建一个多字段搜索选项。表单中有四个字段，用户可以输入任何一个或多个信息，它会查询数据库。

SQL 在 myPHP 管理员中工作，但我从 mySQL 中得到了一堆丑陋的错误。

当前错误

> 准备失败：（1054）“字段列表”中的未知列“Employee.Fname”致命错误：调用 /nfs/stak/students/g/greenjas/public_html/employee_info 中非对象的成员函数 bind_param()。第 41 行的 php

这是表单代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>

<head>
    <title>Bicycle Store Employees</title>
    <link rel="stylesheet" type="text/css" href="web.css" />
</head>
<body>
    <h1>Bicycle Store Manager</h1>
    <h2>Customized Business Management for Bicycle Stores</h2>

    <h3>FORM: RETRIEVE EMPLOYEE INFORMATION</h3>

    <form action="employee_info.php" method="post">
    <h3>Employee Information</h3>
    <h4>First Name: <input type="text" name="Fname"/>
    Last Name: <input type="text" name="Lname"/></h4>

    <h3>Store Information</h3>
    <h4>
    Department #: <input type="text" name="Dno"/>
    Store #: <input type="text" name="Store_num"/>

    <input type="submit" name="submit" value="SEARCH"/>
    </h4>
    </form>

    <p><a href="index.html">HOME</a></p>

</body>
</html> 
```

这是php

```
if( $_POST["submit"] ) {
    if (!($stmt =$mysqli->prepare("
            SELECT Fname, Minit, Lname, Phone, Address, Sname, Saddress, Dno, Hourly
            FROM
            (
            SELECT LOCATION.*,
            Employee.Fname,
            Employee.Minit,
            Employee.Lname,
            Employee.Address,
            Employee.Hourly,
            Employee.Dno,
            Employee.Phone
            FROM EMPLOYEE, DEPARTMENT, LOCATION
            WHERE EMPLOYEE.Dno=DEPARTMENT.Dnumber AND
            LOCATION.Store_num=DEPARTMENT.Store_num AND
            (Fname='?' OR Lname='?' OR Dno='?' OR LOCATION.Store_num ='?')) X"))) {
            print "Prepare failed: (" . $mysqli->errno . ") " . $mysqli->error;
    }
    if (!$stmt->bind_param("ssii",$_POST['Fname'], $_POST['Lname'], $_POST['Dno'], $_POST['Store_num'])) {
        print "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;
    }
    if (!$stmt->execute()) {
        print "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
    }
    $stmt->store_result();

    if (!$stmt->bind_result($Fname,$Minit,$Lname,$Phone,$Address,$Slocation,$Saddress,$Dno,$Hourly)) {
            print "Binding output parameters failed: (" . $stmt->errno . ") " . $stmt->error;
    }
    if ($stmt->num_rows == 0){
        print "No results were found for the following search <p>"
        .$_POST['Fname'].$_POST['Lname'].$_POST['Store_num'].$_POST['Dno']."</p>";
        }
    else {
        print "<table border=2 cellpadding=4>
            <tr bgcolor=white>
            <th>First Name</th>
            <th>Middle Initial</th>
            <th>Last Name</th>
            <th>Phone</th>
            <th>Address</th>
            <th>Store</th>
            <th>Store Location</th>
            <th>Dept #</th>
            <th>Hourly Rate</th>
            </tr>";
        while ($stmt->fetch()){
            print "<tr><td>".$Fname."</td><td>".$Minit."</td><td>".$Lname.
            "</td><td>".$Phone."</td><td>".$Address."</td><td>".$Slocation."</td>
            <td>".$Saddress."</td><td>".$Dno."</td><td>".$Hourly."</td></tr>";
        }
        print "</table>";
    }
$stmt->free_result();
}

$mysqli->close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:18:40.210

Mysql 表名在 linux 中区分大小写。请参阅以下文档：[http ://dev.mysql.com/doc/refman/5.1/en/identifier-case-sensitive.html](http://dev.mysql.com/doc/refman/5.1/en/identifier-case-sensitivity.html)

因此，如果实际表是“EMPLOYEE”，那么您不能将其称为“Employee”。

# sql - 如何将一列数据拆分为多列

> ID：13559474
> 
> 赞同：0
> 
> 时间：2012-11-26T06:04:57.093
> 
> 标签：sql, sql-server, sql-server-2008

**表格1**

```
create table test (dname varchar(250))
insert test values('0.1 ML LIDOCAINE HYDROCHLORIDE 10 MG/ML')
select * from test

                  dname
                 -------

0.1 ML LIDOCAINE HYDROCHLORIDE 10 MG/ML 
```

我还有一张桌子

**表 2**

```
create table test1(
unit1 int,
measure1 varchar(20),
drugname varchar(250),
unit2 int,
measure2 varchar(40)
) 
```

现在我必须使用 insert into newtablename select from old table name 将数据从测试表插入到 test1 表

我的预期输出是

```
select * from test1

unit1     measure1     drugname                    unit2      measure2
0.1       ML           LIDOCAINE HYDROCHLORIDE     10           mg/ml 
```

请注意，这里的药物名称长度`LIDOCAINE HYDROCHLORIDE`可能会增加或减少。我观察到这里发布的许多问题不适合我的要求。

请提供此问题的解决方案。

不要给出任何建议，因为已经存在更简单的问题。因为我已经提到了这个网站上发布的问题和答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:40:42.400

[SQL小提琴](http://sqlfiddle.com/#!3/515b5/1)

**MS SQL Server 2008 架构设置**：

```
create table test (dname varchar(250))
insert test values('0.1 ML LIDOCAINE HYDROCHLORIDE 10 MG/ML') 
```

**查询 1**：

```
select left(dname, S1.Pos - 1) as FirstWord,
       substring(dname, S1.Pos + 1, S2.Pos - S1.Pos - 1) as SecondWord,
       substring(dname, S2.Pos+1, len(dname)-S3.Pos-S2.Pos) as WordsInTheMiddle,
       left(right(dname, S3.Pos - 1), S3.Pos - S4.Pos - 1) as SecondButLastWord,
       right(dname, S4.Pos - 1) as LastWord
from test
  cross apply (select charindex(' ', dname)) as S1(Pos)
  cross apply (select charindex(' ', dname, S1.Pos+1)) as S2(Pos)
  cross apply (select charindex(' ', reverse(dname))) as S4(Pos)
  cross apply (select charindex(' ', reverse(dname), S4.Pos+1)) as S3(Pos) 
```

**[结果](http://sqlfiddle.com/#!3/515b5/1/0)**：

```
| FIRSTWORD | SECONDWORD |        WORDSINTHEMIDDLE | SECONDBUTLASTWORD | LASTWORD |
-----------------------------------------------------------------------------------
|       0.1 |         ML | LIDOCAINE HYDROCHLORIDE |                10 |    MG/ML | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:35:01.920

尝试这个：

这个查询有点长，但给了你需要的

```
select left(dname,charindex(' ',dname)) as unit1,
       substring(dname,charindex(' ',dname)+1,charindex(' ',dname,charindex(' ',dname)+1)-charindex(' ',dname)-1) as measure1,
       substring(dname,charindex(' ',dname,charindex(' ',dname)+1)+1,len(dname)-charindex(' ',reverse(dname),charindex(' ',reverse(dname))+1)-charindex(' ',dname,charindex(' ',dname)+1)+1) as drugname, 
       reverse(substring(reverse(dname),charindex(' ',reverse(dname),charindex(' ',reverse(dname))+1)-2,charindex(' ',reverse(dname),charindex(' ',reverse(dname))+1)-charindex(' ',reverse(dname))-1)) as unit2,
       reverse(left(reverse(dname),charindex(' ',reverse(dname))-1)) as measure2
from test 
```

### [SQL Fiddle 演示](http://sqlfiddle.com/#!3/679a0/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:25:13.577

使用此功能拆分您的价值

```
CREATE FUNCTION Splitfunction(@String varchar(8000), @Delimiter char(1))       
returns @temptable TABLE (items varchar(8000))       
as       
begin       
declare @idx int       
declare @slice varchar(8000)       

select @idx = 1       
    if len(@String)<1 or @String is null  return       

while @idx!= 0       
begin       
    set @idx = charindex(@Delimiter,@String)       
    if @idx!=0       
        set @slice = left(@String,@idx - 1)       
    else       
        set @slice = @String       

    if(len(@slice)>0)  
        insert into @temptable(Items) values(@slice)       

    set @String = right(@String,len(@String) - @idx)       
    if len(@String) = 0 break       
end   
return      

end 
```

之后在您的查询中使用该功能

```
SELECT i.items FROM dbo.Splitfunction('0.1 ML LIDOCAINE HYDROCHLORIDE 10 MG/ML',' ') AS i 
```

现在您将该值插入到另一个表中。

这对你有帮助吗？

问候

阿米特维亚斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T06:25:20.413

```
 Use DB_Name
GO
if (object_id('splitFields') is not null)
drop function splitFields;
GO
CREATE FUNCTION splitFields(
    @strIds varchar(max) 
)
RETURNS @temp table (unit1 varchar(50),     measure1 varchar(50),drugname varchar(50),unit2 varchar(50),measure2 varchar(50))
AS
BEGIN 
    declare @i int,@j int,@l int,@v bigint;
    SET @i = 0;
    SET @j = 0;
    SET @l = len(@strIds);
    declare @unit1 varchar(50), @measure1 varchar(50),@drugname varchar(50),@unit2 varchar(50),@measure2 varchar(50);
    declare @no int;
    set @no = 0
    while (@j < @l)
    BEGIN
        SET @j = charindex(' ',@strIds,@i+1);
        IF @j = 0 set @j = @l+1;
        SET @v = substring(@strIds,@i+1,@j-@i-1);
        if @no = 0 then set @unit1= @v
        if @no = 1 then set @measure1= @v
        if @no = 2 then set @drugname= @v
        if @no = 3 then set @unit2= @v
        if @no = 4 then set @measure2= @v
        SET @no = @no + 1;
        SET @i = @j;
    END
    insert into @temp(unit1, measure1,drugname,unit2,measure2) values(@unit1, @measure1,@drugname,@unit2,@measure2)
    RETURN ;
END
GO 
```

我没有足够的时间做测试，请您自己测试。

# google-maps - 谷歌地图标记动画中的闪烁

> ID：13559475
> 
> 赞同：1
> 
> 时间：2012-11-26T06:05:00.027
> 
> 标签：google-maps, animation, google-maps-markers

我用谷歌地图、动画标记做了一个网站的一部分。我使用大小为 160X243px 的自定义图像作为标记图标。我将反弹动画放在`mouseover`事件中，并删除动画`mouseout`。问题是我在动画开始时有些混蛋，就像开始时模糊不清。有什么办法可以避免这种情况。我设置了一个延迟来解决这个问题，但这并没有太大帮助。以下是我用于动画的代码。

> 不延误

```
 google.maps.event.addListener(marker, "mouseover", function() {
                marker.setAnimation(google.maps.Animation.BOUNCE);
            });

            google.maps.event.addListener(marker, "mouseout", function() {
                marker.setAnimation(null);
            }); 
```

> 有延迟

```
 google.maps.event.addListener(marker, "mouseover", function() {

             setTimeout(function() {
                  addMarkerMethod1();
                },  400);
        });

        google.maps.event.addListener(marker, "mouseout", function() {  
         setTimeout(function() {
      addMarkerMethod2();
    },  100);
    });

        function addMarkerMethod1()
        {
                marker.setAnimation(google.maps.Animation.BOUNCE);
        }

        function addMarkerMethod2()
        {
                marker.setAnimation(null);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:20:01.190

I used the following code to avoid the flicker in to an extend, But sill it got some flickering. Please let me know, if this code can be improved again

```
google.maps.event.addListener(marker, "mouseover", function() { 
                    setTimeout(function() {
                    addMarkerMethod1();
                                           },400);});

google.maps.event.addListener(marker, "mouseout", function() {  
                     setTimeout(function() {
                         addMarkerMethod2();
                                               },  100);});

                        function addMarkerMethod1()
                        {       
                              marker.setAnimation(google.maps.Animation.BOUNCE);                            
                        }
                        function addMarkerMethod2()
                        {
                                marker.setAnimation(null);
                        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:30:36.033

可能鼠标悬停事件被调用了两次，只要你停留在市场上（所以动画被调用了很多次，导致闪烁）。

您可以尝试删除 mouseover 事件并在 mouseout 上重新添加它：

```
var overEvent = google.maps.event.addListener(marker, "mouseover", doBounce);

function doBounce() {
    google.maps.event.removeListener(overEvent);
    marker.setAnimation(google.maps.Animation.BOUNCE);
}

google.maps.event.addListener(marker, "mouseout", function() {
    overEvent = google.maps.event.addListener(marker, "mouseover", doBounce);
    marker.setAnimation(null);
}); 
```

**编辑：不起作用。因为动画使鼠标呼出事件（通过移动标记，你的鼠标还没有在它上面......）。而且 gmaps API 并没有告诉任何关于动画事件的信息，比如“完成”等。所以它会很复杂而且很难完成。**

# arrays - 在 Z3 上建模内存访问

> ID：13559480
> 
> 赞同：4
> 
> 时间：2012-11-26T06:05:28.227
> 
> 标签：arrays, z3

我正在使用 Z3 对程序的内存访问进行建模，但我对想要分享的性能有疑问。

我想以一种紧凑的方式建模，例如：

```
memset(dst, 0, 1000); 
```

我的第一次尝试是使用数组理论，但这意味着要么创建一千个类似`(assert (and (= (select mem 0) 0) (= (select mem 1) 0) ...`或一千个类似商店的术语，要么创建一个量化公式：

```
(forall (x Int) (implies (and (>= x 0) (< x 1000)) (= (select mem x) 0)) 
```

但是有人告诉我在使用数组时要避免使用量词。

下一个想法是定义一个 UF：

```
 (define-fun newmemfun ((idx Int)) Int (
   ite (and (>= idx 0) (< idx 1000)) 0 (prevmemfun idx)
 )) 
```

但这意味着我需要为每个内存写入操作定义一个新函数（即使是单个存储操作，而不仅仅是 memset 或 memcpy 之类的多个存储）。这最终会创建一个非常嵌套的 ITE 结构，甚至可以为同一索引保存“旧”值。IE：

```
mem[0] = 1;
mem[0] = 2;

would be:
(ite (= idx 0) 2 (ite (= idx 0) 1 ... 
```

这在功能上是正确的，但表达式的大小（我猜为它生成的 AST）往往会快速累积，我不确定 Z3 是否经过优化以检测和处理这种情况。

所以，问题是：编码内存操作的最高效方式是什么，可以同时处理像上面的示例这样的大型多个存储和单个存储。

谢谢，巴勃罗。

PS：非封闭和不匹配的括号意为：P。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:46:08.933

在不了解您的最终目标的情况下，除了对内存访问进行建模（例如，您是否要进行验证、测试用例生成等？），这有点难以回答，因为您有很多选择。但是，如果您依赖其中一个 API，您可能最灵活地控制性能问题。例如，您可以如下定义自己的内存访问（z3py 脚本的链接：[http](http://rise4fun.com/Z3Py/gO6i) ://rise4fun.com/Z3Py/gO6i ）：

```
address_bits = 7
data_bits = 8

s = Solver()

# mem is a list of length program step, of a list of length 2^address_bits of bitvectors of size 2^data_bits
mem =[]

# modify a single address addr to value at program step step
def modifyAddr(addr, value, step):
  mem.append([]) # add new step
  for i in range(0,2**address_bits):
    mem[step+1].append( BitVec('m' + str(step + 1) + '_' + str(i), data_bits) )

    if i != addr:
      s.add(mem[step+1][i] == mem[step][i])
    else:
      s.add(mem[step+1][i] == value)

# set all memory addresses to a specified value at program step step
def memSet(value, step):
  mem.append([])
  for i in range(0,2**address_bits):
    mem[step+1].append( BitVec('m' + str(step + 1) + '_' + str(i), data_bits) )
    s.add(mem[step+1][i] == value)

modaddr = 23 # example address
step = -1
# initialize all addresses to 0
memSet(0, step)
step += 1
print s.check()
for i in range(0,step+1): print s.model()[mem[i][modaddr]] # print all step values for modaddr

modifyAddr(modaddr,3,step)
step += 1
print s.check()
for i in range(0,step+1): print s.model()[mem[i][modaddr]]

modifyAddr(modaddr,4,step)
step += 1
print s.check()
for i in range(0,step+1): print s.model()[mem[i][modaddr]]

modifyAddr(modaddr,2**6,step)
step += 1
print s.check()
for i in range(0,step+1): print s.model()[mem[i][modaddr]]

memSet(1,step)
step += 1
print s.check()
for i in range(0,step+1): print s.model()[mem[i][modaddr]]

for a in range(0,2**address_bits): # set all address values to their address number
  modifyAddr(a,a,step)
  step += 1

print s.check()
print "values for modaddr at all steps"
for i in range(0,step+1): print s.model()[mem[i][modaddr]] # print all values at each step for modaddr

print "values at final step"
for i in range(0,2**address_bits): print s.model()[mem[step][i]] # print all memory addresses at final step 
```

这种简单的实现允许您（a）将所有内存地址设置为某个值（如您的 memset），或（b）修改单个内存地址，将所有其他地址限制为具有相同的值。对我来说，运行和编码 128 个地址的大约 128 个步骤需要几秒钟，因此它有大约 20000 个 8 位的位向量表达式。

现在，根据您在做什么（例如，您是否允许像这个 memset 一样对多个地址进行原子写入，或者您是否希望将它们全部建模为单独的写入？），您可以添加更多功能，例如将地址子集修改为程序步骤中的一些值。这将使您能够灵活地权衡建模精度与性能（例如，原子写入内存块与一次修改单个地址，这将遇到性能问题）。此外，此实现不需要 API，您也可以将其编码为 SMT-LIB 文件，但如果使用API 之一。

# objective-c - NSUUID冲突（iOS6.0及以上）

> ID：13559482
> 
> 赞同：1
> 
> 时间：2012-11-26T06:05:33.867
> 
> 标签：objective-c, ios

我们有一个 NSUUID 类（我们提供声明和实现）。我们成功使用它直到 iOS 6.0。我们实施它是因为`UIDevice uniqueIdentifier`早在 Apple 弃用它之前就被禁止了，并且返回 NSUUID 是一个自然的选择。

在 iOS 6.0 中，我们必须保护定义，因为 Apple 引入了相同的类：

```
#if __IPHONE_OS_VERSION_MAX_ALLOWED <= __IPHONE_5_1
@interface NSUUID : NSObject {
    ...
}
#endif 
```

iOS 5.1 及更低版本现已损坏。在 iOS 5.1 上，我们`nil`在`alloc/init`.

我尝试删除`#if/#end`，但在使用最新的 iPhone SDK 时出现重复名称。

Apple 缺乏稳定的 API 是错误，而不是功能。这种“在运行时尝试”的废话并没有削减它。这使得编写高完整性软件变得非常困难。

从下面 Tommy 的回复来看，我无法指示 Apple 的工具链一直使用我们的 NSUUID 实现。如何为 iOS 5.1 及更低版本（可能使用最新的 SDK 编译）提供 NSUUID 的实现？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T06:11:44.150

你不能。您已经明确违反[了规则](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/Conventions/Conventions.html)：

> Objective-C 类必须唯一命名 [...] 为了保持类名的唯一性，惯例是在所有类上使用前缀。您会注意到 Cocoa 和 Cocoa Touch 类名通常以 NS 或 UI 开头。像这样的两个字母前缀被 Apple 保留用于框架类。

您需要重命名自己的类。最快的方法很可能是右键单击类名，选择“Refactor -> Rename...”并这次使用正确的前缀。Xcode 可能无法完全自动重构，因为`NSUUID`您在代码的其他部分中所指的显然是模棱两可的。

编辑：不管哗众取宠，如果你想实现的代码为不可用的地方提供自我实现的替代品，`NSUUID`那么解决方案是“在运行时尝试”。

假设你已经实现`NDRUUID`了，它实现了相同的接口，`NSUUID`那么最快的解决方案就是在你的前缀头中添加这样的东西：

```
#define NSUUID (NSClassFromString(@"NSUUID") ? [NSUUID class] : [NDRUUID class]) 
```

`[NSUUID UUID]`然后，您可以在代码中的其他任何地方使用等，就好像您只针对 iOS 6 一样；唯一的区别是，当你在 5 下运行时，你实际上是在寻址`NDRUUID`. 每当您停止支持 5 时，只需从前缀标题中删除该行并从项目中删除您自己的类。

希望您能看到这是一种更好的方法来处理引入新的 API 和向后兼容性，而不是在任何地方都使用 Apple 的 NSUUID，直到它无处不在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:05:13.083

我已经完全按照您的要求构建了：`NSUUID`适用于 iOS 5.1 及更低版本的实现，可以使用最新的 SDK 进行编译。在 GitHub 上查看我的[NSUUID](https://github.com/0xced/NSUUID)项目。

# magento - 按用户国家/地区阻止magento网站？

> ID：13559483
> 
> 赞同：2
> 
> 时间：2012-11-26T06:05:37.707
> 
> 标签：magento

我需要在没有任何扩展名的情况下按访问者国家/地区阻止 magento 网站，该怎么做，我需要在哪里编辑代码？我可以使用 .htaccess 来做到这一点吗？其他任何原生支持形成 magento 吗？

请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T06:20:33.383

你可以试试 Maxmind 的 mod_geoip apache 模块：

[http://dev.maxmind.com/geoip/mod_geoip2](http://dev.maxmind.com/geoip/mod_geoip2)

如果您使用的是 WHM/cPanel，那么很容易从防火墙（如 CSF）中阻止整个国家 IP 范围。有关如何在 CSF 中阻止整个国家/地区的更多详细信息，请访问以下 URL：

[http://www.vpsdiscussions.com/index.php/topic,87.0.html](http://www.vpsdiscussions.com/index.php/topic,87.0.html)

我觉得这个更准确：

[http://www.ip2location.com/blockvisitorsbycountry.aspx](http://www.ip2location.com/blockvisitorsbycountry.aspx)

这是一个免费的magento模块：

[http://www.magentocommerce.com/magento-connect/et-ip-security.html](http://www.magentocommerce.com/magento-connect/et-ip-security.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T22:40:24.130

我已经在这里解释了我的经验：http: [//www.magentocommerce.com/boards/viewth/viewthread/469503/](http://www.magentocommerce.com/boards/viewth/viewthread/469503/)

我只是认为你不应该屏蔽整个网站，只屏蔽价格。您无法相信美国以外有多少人找到我们，我们可以将他们指向我们的欧洲或亚洲合作伙伴。

希望能帮助到你

# linux - 操作系统是否初始化已由 BIOS 初始化的控制器？

> ID：13559485
> 
> 赞同：1
> 
> 时间：2012-11-26T06:06:05.017
> 
> 标签：linux, windows, operating-system, bios

在快速启动中，BIOS 会跳过许多可以在操作系统中初始化的模块。例如，如果不需要显示设置或启动标志屏幕，它可以跳过初始化 VGA 控制器。它也可以跳过初始化 EHCI 控制器或任何其他 USB 控制器。然后操作系统对其进行初始化。我的问题是，即使它被 BIOS 初始化，操作系统也会再次初始化它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T17:37:03.537

一般是的。操作系统会在加载自己的驱动程序时重新初始化设备。然而，大多数低级芯片组初始化（例如内存控制器）是特定于芯片组/主板的，并且仅由 BIOS 完成。

# android - 当edittext的长度不固定时生成textView

> ID：13559487
> 
> 赞同：0
> 
> 时间：2012-11-26T06:06:06.647
> 
> 标签：android, textwatcher

我已将 textwatcher 应用于我的编辑文本。当用户输入输入时，如果它达到一定长度，我会自动删除编辑文本并将该输入设置为我的文本视图。

```
if(s.toString().length()==4)
{
  pharmacyLoactionSetFalg=true;
  pharmacyLocation.setText(s.toString());
} 
```

还有一种情况，用户输入可能从 2 到 12 不等。在这种情况下，我不能使用上面的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:01:33.510

您可以使用此检查：

```
if(s.toString().length()>=2 && s.toString().length()<=12)
{
// your code here
} 
```

此代码将检查长度是否在 2 到 12 之间的天气。

# javascript - 在ckeditor所见即所得中我们如何更改块引用按钮的操作

> ID：13559488
> 
> 赞同：2
> 
> 时间：2012-11-26T06:06:12.663
> 
> 标签：javascript, ckeditor, wysiwyg

我最终要做的是实现一些简单的代码荧光笔（/语法荧光笔），因为 ckEditor 中没有可用的东西。出于这个原因，我正在考虑通过单击以下列方式更改所选文本来添加一个新按钮（或修改现有按钮之一）： 1- 获取等宽字体以保留源代码中的缩进（例如“Courier New ") 2- 字体颜色变为蓝色

由于我不知道如何添加新按钮，因此我正在考虑使用现有按钮之一，比如块引用按钮来完成这项工作。

**补充说明：** 顺便说一句，我刚刚注意到 ckEditor 4 也已发布：[ckeditor 4](http://ckeditor.com/demo#full) 插件也可自定义：[ckeditor 4 builder](http://ckeditor.com/builder)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:16:13.967

WYSIWYG 编辑器在后面生成 HTML 标记或编码的 HTML 以存储您的格式，假设它可能在后面生成此代码：

```
<blockquote> … </blockquote> 
```

*（然而，这因一个编辑器而异）*

最简单的方法是找出它在后台生成的标签，并根据需要对其应用 CSS 样式。

```
//.CSS
blockquote{
//Styles here…
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T13:47:07.347

您可以考虑一下我从头开始创建的以下插件（这不是一个完整的解决方案，但它显示了正确的方向）：

```
(function() {
    'use strict';

    CKEDITOR.plugins.add( 'prettify', {
        icons: 'prettify',
        init: function( editor ) {
            editor.on( 'mode', function( event ) {
                if( editor.mode == 'wysiwyg' )
                    insertResources( editor );
            });

            editor.addCommand( 'prettify', {
                exec: function( editor ) {
                    var selection = editor.getSelection(),
                        startElement = selection.getStartElement();

                    if ( startElement.hasClass( 'prettyprint' ) )
                        return;

                    var contents = startElement.getText();

                    // Naive pre-processing.
                    contents = contents.replace( /\n/g ,'<br>' );
                    contents = contents.replace( /\t/g ,'&nbsp;&nbsp;&nbsp;&nbsp;' );
                    contents = contents.replace( / /g ,'&nbsp;' );

                    startElement.setHtml( prettyPrintOne( contents, 'js', 0 ) );
                    startElement.addClass( 'prettyprint' );
                }
            });

            editor.ui.addButton( 'Prettify', {
                label: 'Prettify',
                command: 'prettify',
                toolbar: 'insert'
            });
        }
    });

    function insertResources( editor ) {
        var outerHead = CKEDITOR.document.getHead(),
            innerHead = editor.document.getHead(),
            path = CKEDITOR.plugins.getPath( 'prettify' );

        outerHead.append( CKEDITOR.document.createElement( 'script', {
            attributes: {
                type: 'text/javascript',
                async: 'true',
                src: path + 'lib/prettify.js'
            }
        }));

        innerHead.append( CKEDITOR.document.createElement( 'link', {
            attributes: {
                rel: 'stylesheet',
                href: path + 'lib/prettify.css'
            }
        }));
    }
})(); 
```

要运行它，请将[Google Prettify](http://code.google.com/p/google-code-prettify/downloads/list)库解压缩到插件`lib`目录中。`prettify`然后尝试以下 HTML 并使用工具栏中的按钮进行美化`pre`：

```
<textarea cols="80" id="editor1" name="editor1" rows="10">
<pre>function insertResources( editor ) {
    var outerHead = CKEDITOR.document.getHead(),
        innerHead = editor.document.getHead(),
        path = CKEDITOR.plugins.getPath( 'prettify' );
</pre>

<p>Foo:</p>

<pre>outerHead.append( CKEDITOR.document.createElement( 'script', {
        attributes: {
            type: 'text/javascript',
            async: 'true',
            src: path + 'lib/prettify.js'
        }
    }));</pre>

<p>Bar:</p>

<pre>innerHead.append( CKEDITOR.document.createElement( 'link', {
        attributes: {
            rel: 'stylesheet',
            href: path + 'lib/prettify.css'
        }
    }));
}</pre>
</textarea>
<script>

    CKEDITOR.replace( 'editor1', {
        extraPlugins: 'prettify',
        toolbar: [
            [ 'Source', '-', 'NewPage', 'Preview', '-', 'Templates' ],
            [ 'Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo' ],
            [ 'Bold', 'Italic' ],
            '/',
            [ 'Prettify']
        ]
    } );

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T16:57:01.250

不知道你的完整用例是什么，但这是我的，最后是一个[自定义插件](http://ckeditor.com/addon/insertpre)

1.  我希望能够使用对话窗口将代码片段插入 CKEditor（不知道为什么您更喜欢 blockquote 元素）
2.  我想在 CKEditor 中以某种方式在视觉上标记这些代码片段，我不在乎在 CKEditor 中有真正的语法高亮
3.  最后，在保存内容后，我想对插入的元素应用真正的语法格式，而不需要花费太多的工作。我为此使用了[美化](http://code.google.com/p/google-code-prettify/)。

随意检查插件并根据您的需要进行修改。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-30T10:36:05.603

我刚刚找到了这个超级简单的解决方案：

1.  打开ckeditor根目录下的contents.css

2.  添加以下内容：

    块引用{颜色：蓝色；font-family: "Courier New", Courier, monospace; }

# php - 如何在提交按钮上运行 php 代码而不刷新/重新加载页面

> ID：13559489
> 
> 赞同：1
> 
> 时间：2012-11-26T06:06:15.023
> 
> 标签：php, javascript, ajax, submit, page-refresh

我想在提交按钮单击时执行一些 php 代码而不刷新/重新加载我的页面。可能吗？我在页面加载时也有 javascript 功能，这就是我不想刷新页面的原因。提前致谢。

```
<?php
if(isset($_POST["search"]))
{
$show = "SELECT * FROM data";
$rs = mysql_query($show) or die(mysql_error());
 $add_to_textbox = "<input type='button' name='btn' value='add' />";
#****results in Grid****
    echo "<table width='360px' border='1' cellpadding='2'>";
    $rowID=1;
while($row = mysql_fetch_array($rs))
{
    echo "<tr>";
    echo "<td width='130px' id='name.$rowID.'>$row[Name]</td>";
    echo "<td width='230px' id='link.$rowID.'><a href = '$row[Link]'>$row[Link]</a></td>";
    echo "<td width='130px' onclick='Display($rowID);'>$add_to_textbox</td>";
    echo "</tr>";
    $rowID++;
}
    echo "</table>";
#**********************
mysql_free_result($rs);
}
?>

<script type="text/javascript">
function Display(rowID){
    var linkVal = document.getElementById('link'+rowID+'').innerHTML.replace(/<\/?[^>]+(>|$)/g, "\n");
    document.getElementById("name").value = document.getElementById('name'+rowID+'').innerHTML;
    document.getElementById("link").value = linkVal; 
    }
</script> 
```

这是我的代码

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T06:13:09.977

那么，你需要使用javascript/ajax。

示例：在您的提交链接（例如一个 href ）上，添加调用 js 函数`submitMe`并传递您需要的任何变量

```
function submitMe() {
    jQuery(function($) {    
        $.ajax( {           
            url : "some_php_page.php?action=getsession",
            type : "GET",
            success : function(data) {
                alert ("works!"); //or use data string to show something else
                }
            });
        });
    } 
```

如果您想动态更改某些内容，这很容易——您只需要创建标签，并为它们分配 ID：`<div id="Dynamic"> </div>`

然后你在这两个标签之间加载任何东西

```
document.getElementById("Dynamic").innerHTML = "<b>BOOM!</b>"; 
```

这意味着您调用两个标签之间的区域并将某些内容加载到其中。与从该位置获取数据的方式相同：

```
alert(document.getElementById("Dynamic").innerHTML); 
```

请阅读： [http ://www.tizag.com/javascriptT/javascript-getelementbyid.php](http://www.tizag.com/javascriptT/javascript-getelementbyid.php)

此外，玩和试验 DOM 元素并了解它们如何交互。这并不难，只是需要一些时间来掌握所有概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T06:37:58.117

您的 HTML 或 PHP 表单

```
<form action="submit.php"  method="post">
Name: <input name="name" id="name" type="text" /><br />
Email: <input name="email" id="email" type="text" /><br />
Phone Number: <input name="phone" id="phone" type="text" /><br />
<input type="button" id="searchForm" onclick="SubmitForm();" value="Send" />
</form> 
```

你的 JavaScript

```
 <script>
 function SubmitForm() {
 var name = $("#name").val();
 var email = $("#email").val();
 var phone = $("#phone").val();
 $.post("submit.php", { name: name, email: email, phone: phone },
 function(data) {
 alert("Data Loaded: " + data);
 });
 }
 </script> 
```

你的 PHP 页面做一些活动

```
 <?php
 echo $_POST['name']."<br />";
 echo $_POST['email']."<br />";
 echo $_POST['phone']."<br />";
 echo "All Data Submitted Sucessfully!"
 ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:35:09.250

每当您从 html 表单发送请求 ajax（无论如何都是纯 js）时，请确保添加 return false 语句以防止重定向：类似于：

```
<form method="post" ... onsubmit="ajax_post(); return false;"> 
```

你必须使用 ajax，但你可以用普通的 javascript（没有 jquery）来做。Jquery 使它更容易。

普通的 javascript 示例：此函数将通过 get 触发一个 ajax，不带参数：您可以对其进行调整，使其在 POST 中运行并能够发送一些参数：*file*代表要请求的 php 文件，*html*代表数据所在的容器被显示：

```
function plain_ajax(file,html){
    if (window.XMLHttpRequest){ 
          r=new XMLHttpRequest();   //For Most BRowser
    } else{ 
          r=new ActiveXObject("Microsoft.XMLHTTP");  //for Explorer
    }

    //When the state change
    r.onreadystatechange=function(){ 
       //ReadyState 4 = Loaded     see: http://www.w3.org/TR/2006/WD-XMLHttpRequest-20060405/
       //status 200 = ok           see: http://en.wikipedia.org/wiki/List_of_HTTP_status_codes
       if(r.readyState==4 && r.status==200){
           //Replace the content with the response, Using creatDocumentFragment is more efficient 
           //at the cost of a few more lines But it  would alos allow you to append the data
           //instead of replacing it using innerHTML;
           document.getElementById(html).innerHTML = r.responseText;
        }
    }

    //Opening the connection and sending the request.
    r.open("GET",file,true); 
    r.send();
} 
```

# servlets - servlet response.sendredirect 在域名中不起作用

> ID：13559491
> 
> 赞同：0
> 
> 时间：2012-11-26T06:06:23.387
> 
> 标签：servlets, response.redirect

在处理来自客户端的请求后，我有一个使用 sendredirect 到 jsp 的 servlet。如果客户端使用 Web 的 dns (https://domainName.com/webApp/Order) 向服务器发送请求，它将无法正常工作

我们的网络管理员已经将保留代理中的 dns (https://domainName.com/webApp) 映射到负载平衡中的“http://xxx.xxx.xxx:8080/webApp/”。

这是什么问题以及如何解决？是dns问题还是servlet问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:10:58.460

当您使用 web 的 dns (http://domainName.com/webApp/Order) 时，使用默认端口 80 (HTTP)。当你使用时，`http://xxx.xxx.xxx:8080/webApp/Order`你指定你的 tomcat 服务器的端口号（这里是 8080）。

尝试使用它，它也应该可以轻松地与 dns 一起使用。

```
http://domainName.com:8080/webApp/Order 
```

查看我在 dns 名称后添加的端口号（8080 或运行您的 tomcat 的任何端口号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:11:06.567

在 response.sendRedirect 中，如果有更好的解决方案，我需要输入完整的 url (https://domainName.com/webApp/sucesss.jsp)？

# php - 如何在 php 中使用表单键

> ID：13559499
> 
> 赞同：-1
> 
> 时间：2012-11-26T06:07:28.890
> 
> 标签：php, forms

在我的页面中，我想使用表单键提交表单。但我不知道如何在 php 中使用 formkeys。当我搜索时，无法清楚地了解表单键的用途。如何实现这一点。我在哪里可以看到这个表单键在 php.ini 中的演示。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:15:07.490

`<input type="text" name="text"/>`

$name = $_POST['text'];

`$_POST`是一个包含表单值的数组。使用输入名称（本例中为文本）

# iphone - 如何在特定时间发送短信

> ID：13559500
> 
> 赞同：2
> 
> 时间：2012-11-26T06:07:31.463
> 
> 标签：iphone, objective-c, ios, nsdateformatter

我是 iphone 应用程序开发的新手。

我正在创建一个发送短信的应用程序。

在我的应用程序中，我需要在指定时间发送短信。

我有一个时间选择器来指定 UITextField 中的时间。

-(void)sendInAppSMS { NSLog(@"SendMessage");

```
if([textFieldRounded.text isEqualToString:@""] || [textFieldRounded1.text isEqualToString:@""] || [textFieldRounded2.text isEqualToString:@""] || [textFieldRounded.text isEqualToString:@"(null)"] ||  [textFieldRounded1.text isEqualToString:@"(null)"] ||  [textFieldRounded1.text isEqualToString:@"(null)"] || [textFieldRounded.text isEqualToString:nil]  || [textFieldRounded1.text isEqualToString:nil]|| [textFieldRounded2.text isEqualToString:nil])
{
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"SMS" message:@"Please Enter All Fields!" delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
    [alert show];
}
else 
{
    NSLog(@"Done");
    NSDateFormatter *SentTime = [[NSDateFormatter alloc] init];
    [SentTime setDateFormat:@"dd/MM/YYYY hh:mm aa"];
    NSDate *now1 = [NSDate date];
    NSString *Time1 = [SentTime stringFromDate:now1];
    NSLog(@"Time is :%@",Time1);
    NSString *Sentime=[NSString stringWithFormat:@"%@",textFieldRounded2.text];

    if([Sentime isEqualToString:Time1])
    {
        NSLog(@"Time Matching... can send msg now");

        MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
        if([MFMessageComposeViewController canSendText])
        {

            NSString *Message = [NSString stringWithFormat:@"%@, %@",textFieldRounded1.text,textFieldRounded2.text];
            NSLog(@"Message is %@", Message);
            controller.body = Message;
            controller.recipients = [NSArray arrayWithObjects:@"+919999999999" , nil];
            controller.messageComposeDelegate = self;
            [self presentModalViewController:controller animated:YES];
        }

    }
    else
    {
        NSLog(@"Send Message when time reach at %@",textFieldRounded2.text);

        //Here What code i should write
    }
} 
```

}

如果时间等于当前时间，则立即发送短信（无需将消息存储在任何地方）。

否则，当当前时间变为指定时间时，我需要发送该短信。直到时间到达如何保存（存储）消息并按时发送。

问候，

拉金德兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:11:37.943

您不能在 iOS 中使用计时器发送短信，Apple 不允许此功能。

[看到这个](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/SystemMessaging_TopicsForIOS/Articles/SendinganSMSMessage.html#//apple_ref/doc/uid/TP40010416-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:25:49.880

正如在其他答案中所指出的那样，不可能“保存”用户`MFMessageComposeViewController`在稍后发送的消息（也没有其他方法可以这样做）。

您的选择是：

*   提前收集 SMS 的详细信息，然后在正确的时间提示用户。`UILocalNotification`如果应用程序可能已关闭，您可以为此使用。您可以在实例上使用`setTitle:`、`setBody:`和预填充正确详细信息的消息，因此用户只需点击发送。`setRecipients:``MFMessageComposeViewController`

*   将消息详细信息发送回服务器，并使用某些 SMS 系统（例如[Twilio](http://twilio.com) api）在正确的时间发送 SMS。这将显着增加复杂性，并且 SMS 不会来自用户的电话号码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:01:31.833

就用户体验而言，除非当前时间与指定时间的确切分钟相匹配，否则您的代码不太可能允许用户发送消息。检查时间是否在指定时间之后或在指定时间的某个范围内会更有意义。另外值得注意的是，如果您不比较字符串文字，则进行这些比较会更容易。（使用 NSDate 和相关的便利方法进行这些比较）

就在某个时间发送消息而言，这可能需要一个服务器组件，您在其中注册要发送的消息和应该发送的时间，然后以指定的时间间隔处理消息发送队列中的消息.

# html - 使用 sencha touch 在 Div 中上传图片

> ID：13559502
> 
> 赞同：0
> 
> 时间：2012-11-26T06:07:57.563
> 
> 标签：html, camera, touch, uploading

我从过去 20 天左右开始研究煎茶，我学到了很多东西，我可以访问设备相机并使用该相机拍摄照片，但问题是我想在我的页面的 Div 中显示捕获的图像使用按钮 .. 无法解决；如果有人知道，请提供帮助 .. 看看这个 ..

```
 {
                       xtype:'button',
                       text:'Tap',
                       docked:'top',
                       handler:function(){

                       navigator.camera.getPicture(onSuccess, onFail, { quality: 50,
                                                   destinationType: Camera.DestinationType.FILE_URI });

                       function onSuccess(imageURI) {
                       var image = document.getElementById('myImage');
                       image.src = imageURI;
                       }

                       function onFail(message) {
                       Ext.Msg.alert('Failed because: ' + message);
                       }                           }
                       },
                       {
                       xtype:'container',
                       html:'<div style="border:solid;border-color:red">Hello</div>',
                       id:'picture',
                       },

                       {
                       xtype:'container',
                       html:'<div style="border:solid; border-color=green">Hellow</div>',
                       items:[
         {
               xtype:'button',
               text:'Get',
              }
           ]
             }, 
```

我现在该怎么办？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:26:32.137

您需要对 ID 为“myImages”的元素进行处理。在 onSuccess 函数中，您相应地设置了该元素的 src，但实际使用的元素在哪里？您应该将其添加到其中一个容器中，无论是在初始定义中还是在调用 onSuccess 时。如果您想等到带有文本“Get”的按钮被按下，那么要么让该按钮的处理程序附加 myImages 元素，要么隐藏/显示它。

# matlab - 如何从矩阵中删除 Inf 值，在 Matlab 中保持其大小

> ID：13559510
> 
> 赞同：3
> 
> 时间：2012-11-26T06:09:03.033
> 
> 标签：matlab, octave

我在循环中有一个矩阵，它是

```
m=

 -132.5901    -137.2695   -114.1264   -131.4986   -134.5733       Inf
       Inf       Inf       Inf        -135.2631   -121.7322       -119.7471
 -132.7978    -123.8068   -135.9385       Inf      -134.1602     -117.6997
 -130.1930    -134.0093   -137.4125   -128.7641       Inf        -116.0473 
```

我想要一个可以在循环中使用的命令来得到答案：

```
 -132.5901 -137.2695 -114.1264 -131.4986 -134.5733  -119.7471  
 -132.7978 -123.8068 -135.9385 -135.2631 -121.7322  -117.6997
 -130.1930 -134.0093 -137.4125 -128.7641 -134.1602  -116.0473 
```

我不想要使用 isfinite 命令的单个向量。矩阵大小应使用 Matlab 自动保留。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T06:55:06.453

我将假设在保留原始矩阵的大小时，您希望我们用 填充解决方案矩阵的底部`NaN`。我还将假设`Inf`任何给定的列中可能有不止一个。在这种情况下，以下基于循环的解决方案对我有用：

```
%# Set up an example matrix
M = [Inf 2 Inf 4; 5 Inf 6 7; Inf Inf 8 Inf];
[T, N] = size(M);

%# Get an index of finite elements
I1 = isfinite(M);

%# Solution 1
Soln1 = NaN(T, N);
for n = 1:N
    CurCol = M(:, n);
    Soln1(1:sum(I1(:, n)), n) = CurCol(I1(:, n));
end 
```

对于一般情况，这个问题可能有一个完全矢量化的解决方案（肯定有 - 请参阅下面的更新）。但是，如果它比基于循环的解决方案产生了很大的加速，我会感到惊讶。如果您设置了问题，那么现在在 Matlab 中单循环非常快，因此您可以对矩阵的列（而不是行）进行操作，因为这些元素是在内存中按顺序分配的。

现在，让我们假设`Inf`每列只有一个。在这种情况下，问题更容易解决，可以使用以下单行代码完成：

```
%# Solution 2
Soln2 = [reshape(M(isfinite(M)), T-1, N); NaN(1, N)]; 
```

对于我设置的示例矩阵，解决方案 2 显然会失败，因为无法将 6 个元素重新排列为 T-1 × N（即 2 × 4）矩阵。

**更新：**好的，所以没有充分的理由，没有循环我无法做到这一点让我很恼火。因此，这是一个无循环的解决方案：

```
%# Solution 3
Soln3 = NaN(T, N);
I2 = bsxfun(@plus, cumsum(isfinite(M)), (0:T:T*(N-1)));
I2 = I2(:);
I2(I1 == 0) = [];
Soln3(I2) = M(isfinite(M)); 
```

循环与非循环解决方案的快速（非常）非严格速度测试：

```
Elapsed time is 0.203997 seconds.
Elapsed time is 0.251969 seconds. 
```

`M`尽管 if更大，但非循环解决方案可能会有所改善（相对而言） 。

现在我需要回去工作了:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:36:17.940

基于 Colin 的回答：

```
>> M = [Inf 2 Inf 6; 5 Inf 8 4; Inf Inf 7 Inf];
>> [N,I] = sort(M)
N =
     5     2     7     4
   Inf   Inf     8     6
   Inf   Inf   Inf   Inf
I =
     2     1     3     2
     1     2     2     1
     3     3     1     3 
```

所以这`N`已经是一个可能的最终产品。

中的数据`N`是*sorted*，所以如果你不想这样，你必须取消排序：

```
>> for ii = 1:size(M,2)        
>>     N(~isinf(N(:,ii)),ii) = M(~isinf(M(:,ii)),ii);
>> end
N =
     5     2     8     6
   Inf   Inf     7     4
   Inf   Inf   Inf   Inf 
```

而且，如果你真的必须摆脱`inf`，只需发出

```
N(isinf(N)) = NaN; 
```

沿线某处（和/或在需要的地方替换）`isinf`。`isnan`

# ruby-on-rails - 将选择添加到 Rails 应用程序

> ID：13559516
> 
> 赞同：3
> 
> 时间：2012-11-26T06:09:27.523
> 
> 标签：ruby-on-rails, jquery-chosen

我一直在环顾四周，找不到在Rails 应用程序中实施 Chosen 的好例子， [http ://harvesthq.github.com/chosen/。](http://harvesthq.github.com/chosen/)我正在尝试将现有的多选转换为选定样式的多选框。

我尝试手动插入文件，将 selected.jquery.js 复制到我的 assets/javascripts 文件夹中，同时添加 selected.css。还添加了 //= require selected-jquery 到 application.js 以及以下代码

```
jQuery(function($){
$('.chzn-select').chosen();
}) 
```

还必须在 application.css.scss 中选择 *= 要求

我在 form_tag 的 collection_select 中添加了 :class => "chzn-select"。

还尝试使用 'chosen-rails' gem（这里是一个示例[http://choppingbloc.tumblr.com/post/24894460392/multiple-select-boxes-with-chosen-jquery](http://choppingbloc.tumblr.com/post/24894460392/multiple-select-boxes-with-chosen-jquery)）但没有运气。

有什么我可能会忽略的吗？collection_select 正在工作，但它的样式不像 Chosen。我是一个初学者，所以如果有什么明显的我可能忽略了，请告诉 - 上面的一切都是我所做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:47:17.733

像这样设置

您必须同时包含 css 文件和 js 文件

在你的 application.css.scss 中，（因为它是 sass，所以不要使用 /* 要求）

```
@import "chosen"; 
```

在你的 application.js

```
//= require chosen.jquery 
```

你应该给你的选择一个不同的类或 id

```
$('.chzn-select').chosen(); 
```

因为，当您调试 html 时，它可能会使事情变得混乱。Chosen 提供带有此前缀的类，例如 .chzn-done、.chzn-single、chzn-drop、chzn-search。

如果您有 railscasts 专业帐户。

看这个

[标记字段修订](http://railscasts.com/episodes/258-token-fields-revised)

您真的应该放弃选择的插件并选择[select2](http://ivaynberg.github.com/select2/)插件。它基于所选插件，但更好。

# objective-c - Objective-C 中的 OOP

> ID：13559517
> 
> 赞同：0
> 
> 时间：2012-11-26T06:09:35.587
> 
> 标签：objective-c, oop, instance

我熟悉 OOP，因为我已经用 Java 编码了一段时间，但是我在 Objective-C 中遇到了（语法？）问题。我一直在看这里的其他帖子，但到目前为止没有任何帮助。

我有一个名为“Play_Name.m”的类，它有一个通过触摸按钮设置玩家名称的方法和另一个获取名称并返回字符串的方法，(NSString*)get_name。我还有另一个名为“Play_ChooseChar.m”的类，它应该显示通过调用 get_name 函数输入的名称。

当我在“Play_Name”（它的所有者）中调用它时，get_name 返回正确的名称，但是当我在“Play_ChooseChar”中调用它时，它返回（null）。

```
//Play_Name code below

#import "Play_Name.h"

@interface Play_Name ()

@end

@implementation Play_Name

@synthesize playerName;
@synthesize textName;

-(IBAction)set:(id)sender {

[self setPlayerName:(self.textName.text)];

if([self.textName.text length] <= 0) {
    playerName = @"Player";
    NSLog(@"YOUR NAME: %@", playerName);
}

NSLog(@"YOUR NAME: %@", playerName);

}

//...........

@end

//Play_ChooseChar code below

#import "Play_ChooseChar.h"
#import "Play_Name.h"

@interface Play_ChooseChar ()

@end

@implementation Play_ChooseChar

@synthesize display_name;
@synthesize playname;
@synthesize boy;
@synthesize girl;
@synthesize isGirl;
@synthesize isBoy;

bool isGirl = FALSE;
bool isBoy = FALSE;

-(void)theName {

Play_Name *pN = [[Play_Name alloc] init];
[pN setPlayerName: pN.playerName];
NSLog(@"NAME: %@", pN.playerName);

self.display_name.text = pN.playerName;
//display_name.text = @"test";

[pN release];

//............

@end 
```

因此，当我运行它并输入我的名字时，“Play_ChooseChar”中的打印语句返回“NAME: (null)”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:17:29.257

开幕演讲：您似乎在抛开 Objective-C 约定。Getters 不应该指得到的行为——所以你应该实现`name`，而不是`get_name`你会看到的几乎唯一的动词是 'is'，在`isValid`ala的意义上`NSTimer`。Objective-C 也使用驼峰式大小写，以小写字符开头，所以`player_name`应该是`playerName`. 类似地，你的类应该有一个三个字母的前缀（因为 Objective-C 不做命名空间）并且也是驼峰式的，例如`ATPPlayName`.

抛开讲座要点，这个：

```
Play_Name *play_name = [[Play_Name alloc] init]; 
```

创建一个全新的`Play_Name`. 它与您在其他地方使用的任何实例都不相同。该实例尚未附加名称。所以当你在下一行询问它的名字时，它是`nil`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:18:02.050

您还没有真正显示足够的代码来确定问题。但是，我建议使用属性而不是遵循您自己的命名约定的方法。例如：

```
@interface Player: NSObject
@property NSString* name;
@property NSString* character;
@end 
```

上面定义了一个`Player`具有属性`name`和的类`character`。Xcode 将生成“支持”这些属性的适当访问器方法和实例变量。[有关详细信息，](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)请参阅语言参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:18:47.033

您应该创建属性，xcode 会自动为您创建 getter 和 setter。

[看看这里：](https://developer.apple.com/library/iOs/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T06:33:30.440

抛开设计和代码约定：当你创建一个新的 Play_Name 实例时，它的 get_name 显然将返回 nil，因为在代码中没有任何地方在调用 get_name 之前调用了 set_name。

你应该首先做：[play_name set_name:@"john"];

并且，假设您的 set_name 方法正确实现， [play_name get_name] 应该返回正确的值。

我支持其他建议使用属性的人，因为它可以为您处理大多数内存管理的细微差别。您可以在此处阅读有关此内容的更多信息： [Objective-C：声明的属性](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

# python - 使用 GoogleAppEngine 的 ListProperty

> ID：13559521
> 
> 赞同：1
> 
> 时间：2012-11-26T06:10:06.320
> 
> 标签：python, google-app-engine, web-applications

如何使用 Google App Engine 分配 ListProperty？

```
 name = self.request.get("name")
    description = self.request.get("description")
    list = '''insert code here''' 
```

我希望列表像字典一样工作，这是否可以使用 Google App Engine，如果可以，如何：

[wordone：分数；wordtwo : 分数; 词三：分数]

^我希望列表属性存储一些这样的数据，这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:34:18.087

更改为[NDB](https://developers.google.com/appengine/docs/python/ndb/)并使用 Pickle 属性：

> Value 是一个 Python 对象（例如一个列表或一个字典或一个字符串），可以使用 Python 的 pickle 协议进行序列化；Datastore 将 pickle 序列化存储为 blob。默认情况下未编制索引。

[新开发银行属性](https://developers.google.com/appengine/docs/python/ndb/properties)

然后就可以直接使用了：

```
class table(ndb.Model):
    data_dict = ndb.PickleProperty(default = {}) 
```

然后

```
dd = table()
dd.data_dict['word_one'] = "Some_Score" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:26:21.490

实际上，您将无法将真正的字典存储为 a 中的类型`ListProperty`（它仅支持数据存储属性类型，其中`dict`不是一种），因此您将无法获得您正在寻找的行为。是否所有数据都相同（即每个元素代表一个单词分数）？假设将每个单词作为其自己的属性存储在模型上是没有意义的，一个“肮脏”的解决方案是创建一个`ListProperty`type `str`，然后将单词和 score 作为单独的元素附加。然后，当您在列表中搜索一个单词时，您将返回该单词索引位置的值 + 1。这看起来像：

```
class MyEntity(db.Model):
  name = db.StringProperty()
  description = db.TextProperty()
  word_list = db.ListProperty() 
```

然后，您可以添加以下词：

```
new_entity = MyEntity()
new_entity.word_list = ['word1', 1, 'word2', 2, 'word3', 10] 
```

然后，您可以查询特定实体，然后检查其`word_list`属性（列表），查找目标词并在其后一个位置返回元素。

* * *

**更复杂的建议**

但是，如果这不是一个选项，您可以考虑创建另一个`WordScore`看起来像这样的模型（比如说）：

```
class WordScore(db.Model):
  word = db.StringProperty()
  score = db.IntegerProperty() 
```

然后，当您需要添加新分数时，您将创建一个`WordScore`实例，填写属性，然后将其分配给适当的实体。我还没有测试过这些，但这个想法是这样的：

```
# Pull the 'other' entity (this would be your main class as defined above)
q = OtherEntity.all()
q.filter('name =', 'Someone')
my_entity = q.get()

# Create new score
ws = WordScore(parent=my_entity)
ws.word = 'dog'
ws.score = 2
ws.put() 
```

然后，您可以通过执行以下操作来提取`dog`“某人”的分数（同样，目前完全未经测试 - 请注意:)）：

```
# Get key of 'Someone'
q = OtherEntity.all()
q.filter('name =', 'Someone')
my_entity = q.get().key()

# Now get the score
ws = WordScore.all()
ws.filter('word = ', 'dog').ancestor(my_entity)
word_score = ws.get().score 
```

# java - 如何解决android中的NullPointer异常？

> ID：13559524
> 
> 赞同：0
> 
> 时间：2012-11-26T06:10:54.113
> 
> 标签：java, android, nullpointerexception, android-edittext

这是一个简单的安卓应用。它`nullpointerexception`在执行时显示。我无法从`edittext`. 在这里，我只想从`edittext`. 但它显示`nullpointerexception`..

如何解决这个问题？

```
public class Calci extends Activity  {
    Button add;
    String str1;
    String str2;
    EditText txt1;
    EditText txt2;
    TextView tv;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_calci);

        add=(Button) findViewById(R.id.button1);
        txt1=(EditText) findViewById(R.id.editText1);
        str1=txt1.getText().toString();
        txt2=(EditText) findViewById(R.id.editText2);
        str2=txt2.getText().toString();
        tv=(TextView) findViewById(R.id.textView4);

        addition();

        add.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                addition(); 
            }
        });
    }

    private void addition(){
        int res=0;
        res=Integer.parseInt(str1)+Integer.parseInt(str2);
        tv.setText(String.valueOf(res));
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_calci, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:14:33.107

只需 `addition();`从`onCreate()`. 因为我怀疑它第一次打电话给你的时候`EditTexts`是空的。

此外，当您调用`addition()`方法时，您必须从两者中获取文本`EditTexts`。

而你的方法`addition()`类似于，

```
 private void addition()
 {

  int res=0;
  str1=txt1.getText().toString();
  str2=txt2.getText().toString();
  res=Integer.parseInt(str1)+Integer.parseInt(str2);
  tv.setText(String.valueOf(res));
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T06:14:46.760

确保您在 xml 中设置默认值， `editText1`或者`editText2`如果您想访问用户输入的值，则将您的代码更改为并在 setOnClickListener 之前删除 add() ：

```
 //  addition();  comment this line 
        add.setOnClickListener(new View.OnClickListener() 
        {

            public void onClick(View v) 
            {
                  str1=txt1.getText().toString();
                  str2=txt2.getText().toString();
                  addition(); 

            }
        }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T06:16:34.190

只需替换 oncreate() 中的 additiion() 方法并更改方法，如下所示

```
private void addition()
  {
         str1= str1==null?"0":str1;// do like this, so that if str1 returns null then it will be replaced by 0
         str2= str2==null?"0":str2;
         int res=0;
         res=Integer.parseInt(str1)+Integer.parseInt(str2);
         tv.setText(String.valueOf(res));
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T06:15:54.683

你不要在这里调用addition()这个方法：

```
 str2=txt2.getText().toString();
        tv=(TextView) findViewById(R.id.textView4);

        //addition();

        add.setOnClickListener(new View.OnClickListener() 
```

# facebook-like - 将 Facebook like 按钮放在 IFrame 中时根本不会显示

> ID：13559525
> 
> 赞同：0
> 
> 时间：2012-11-26T06:10:55.780
> 
> 标签：facebook-like, cross-domain

Facebook like 按钮在放置在 IFrame 中时根本不会显示。此外，iframe 正在从不同的域加载页面。所以基本上这是一个跨域场景。我在 iframe 域设置上正确设置了频道文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:16:29.207

如果您在另一个选项卡/窗口中正常从 iframe 加载页面，您是否正常看到类似按钮？

# actionscript-3 - Actionscript 3 - 检查互联网连接

> ID：13559529
> 
> 赞同：5
> 
> 时间：2012-11-26T06:11:38.800
> 
> 标签：actionscript-3, flash-cs6

我在我的闪存文件中使用此代码

```
import air.net.URLMonitor;
import flash.net.URLRequest;
import flash.events.StatusEvent;

var monitor:URLMonitor;

function checkInternetConnection(e:Event = null):void
{
var url:URLRequest = new URLRequest("http://www.google.com");
url.method = "HEAD";
monitor = new URLMonitor(url);
monitor.pollInterval = 1000;
//
monitor.addEventListener(StatusEvent.STATUS, checkHTTP);
//
function checkHTTP(e:Event = null):void
{
if (monitor.available) {

       navigateToURL(new URLRequest("flickr.html"),"_top"); 

   } else {

       gotoAndPlay(1);

   }
}
monitor.start();
} 
```

我试图让闪光灯检查连接并导航到另一个页面，如果没有它会重播。

它似乎没有工作。我错过了什么吗？

我也将库路径添加到 aircore.swc。

它应该是一个带有 flash 的 html 页面，而不是一个 AIR 应用程序

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-25T22:57:41.430

*（我声望太低，无法直接评论林天真的回答……）*

我需要进行一些更改才能使林天真的答案按预期工作：

*   添加：

    ```
    urlRequest.useCache = false;
    urlRequest.cacheResponse = false; 
    ```

    此添加是必需的，因为即使连接肯定丢失，检查仍然成功，因为正在读取缓存。

*   改变：

    ```
    if( textReceived.indexOf( _contentToCheck ) ) 
    ```

    至：

    ```
    if( !(textReceived.indexOf( _contentToCheck ) == -1) ) 
    ```

    之所以需要此更改，是因为虽然总是找到“”（空字符串），但在索引“0”处找到它，这导致原始 if() 条件始终失败。

*   添加：

    ```
    urlRequest.idleTimeout = 10*1000; 
    ```

    在网络电缆与路由器物理断开连接的情况下，请求可能需要很长时间才能超时（老实说，几分钟后我已经厌倦了等待。）

进行上述更改后，我发现天真的代码运行良好：无论我如何断开/重新连接 Wi-Fi（在 iOS 和 Android 设备上），始终检测到连接状态的变化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T17:15:02.880

I see two issues in your code. One is that while you have the logic to [check internet connection](https://stackoverflow.com/questions/9671678/adobe-air-check-for-internet-connection), there is not any code calling the function, therefore the logic of redirection would not be called. Second is that using AIRcore.swc would be a bad idea as you have injected a dependency that might not work with or violate browser sandbox.

You may try the following approach which is tested and requires no AIR's SWC:

Step 1, include a new class `ConnectionChecker` as follow:

```
package
{
    import flash.events.*;
    import flash.net.*;

    [Event(name="error", type="flash.events.Event")]
    [Event(name="success", type="flash.events.Event")]
    public class ConnectionChecker extends EventDispatcher
    {
        public static const EVENT_SUCCESS:String = "success";
        public static const EVENT_ERROR:String = "error";

        // Though google.com might be an idea, it is generally a better practice
        // to use a url with known content, such as http://foo.com/bar/mytext.txt
        // By doing so, known content can also be verified.

        // This would make the checking more reliable as the wireless hotspot sign-in
        // page would negatively intefere the result.
        private var _urlToCheck:String = "http://www.google.com";

        // empty string so it would always be postive
        private var _contentToCheck:String = "";    

        public function ConnectionChecker()
        {
            super();
        }

        public function check():void
        {
            var urlRequest:URLRequest = new URLRequest(_urlToCheck);
            var loader:URLLoader = new URLLoader();
            loader.dataFormat = URLLoaderDataFormat.TEXT;

            loader.addEventListener(Event.COMPLETE, loader_complete);
            loader.addEventListener(IOErrorEvent.IO_ERROR, loader_error);

            try
            {
                loader.load(urlRequest);
            }
            catch ( e:Error )
            {
                dispatchErrorEvent();
            }
        }

        private function loader_complete(event:Event):void
        {
            var loader:URLLoader = URLLoader( event.target );
            var textReceived:String = loader.data as String;

            if ( textReceived )
            {
                if ( textReceived.indexOf( _contentToCheck ) )
                {
                    dispatchSuccessEvent();
                }
                else
                {
                    dispatchErrorEvent();
                }
            }
            else
            {
                dispatchErrorEvent();
            }
        }

        private function loader_error(event:IOErrorEvent):void
        {
            dispatchErrorEvent();
        }

        private function dispatchSuccessEvent():void
        {
            dispatchEvent( new Event( EVENT_SUCCESS ) );
        }

        private function dispatchErrorEvent():void
        {
            dispatchEvent( new Event( EVENT_ERROR ) );
        }
    }
} 
```

Step 2, in your main application or anywhere that internet connection should be checked, use the following snippet:

```
var checker:ConnectionChecker = new ConnectionChecker();
checker.addEventListener(ConnectionChecker.EVENT_SUCCESS, checker_success);
checker.addEventListener(ConnectionChecker.EVENT_ERROR, checker_error);
checker.check();

private function checker_success(event:Event):void
{
    // There is internet connection
}

private function checker_error(event:Event):void
{
    // There is no internet connection
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:37:38.980

air.net.URLMonitor 是 AIR 可用的类 - 所以不能在 AIR 播放器之外工作。

但是你可以尝试自己做，因为这个监视器类所做的只是“ping”url并检查响应，所以你可以做类似的尝试从google.com等已知来源加载一些东西，如果它在没有错误的情况下完成，那么它是好的，否则你会得到错误。

# android - 7寸平板分辨率480X800布局问题

> ID：13559531
> 
> 赞同：0
> 
> 时间：2012-11-26T06:11:52.030
> 
> 标签：android, layout

我有

```
layout

layout-large

layout-xlarge 
```

我的文件夹中的`res`文件夹。

但是，尽管是 7 英寸平板电脑，但布局是从`layout`文件夹中挑选的，而不是从 layout-large 中挑选的。

和设备运行`android 4.0`

我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:21:35.970

查看[支持多屏](http://developer.android.com/guide/practices/screens_support.html)文档中的**配置示例。**

```
res/layout/main_activity.xml           # For handsets (smaller than 600dp available width)
res/layout-sw600dp/main_activity.xml   # For 7” tablets (600dp wide and bigger)
res/layout-sw720dp/main_activity.xml   # For 10” tablets (720dp wide and bigger) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-03T02:10:58.800

检查正确的设备分辨率并遵循 Android 提供的图表：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

**配置示例：**

为了帮助您针对不同类型的设备进行一些设计，以下是典型屏幕宽度的一些数字：

*   320dp：典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。
*   480dp：像 Streak (480x800 mdpi) 这样的补间平板电脑。
*   600dp：7 英寸平板电脑 (600x1024 mdpi)。
*   720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）。

*在您的情况下，您需要在“res”文件夹中创建一个“layout-600dp”文件夹。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:21:44.227

因为设备的DP是160dp/inch，属于mdpi设备的范畴

# python - 如何在 Python 中从二进制数据创建 BMP 图像？

> ID：13559540
> 
> 赞同：0
> 
> 时间：2012-11-26T06:12:25.570
> 
> 标签：python, image, audio

假设我已经从二进制文件中读取了二进制数据，如何从该二进制数据创建 BMP 图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:24:35.093

[您可以在 Wikipedia](http://en.wikipedia.org/wiki/BMP_file_format)等其他地方找到位图文件格式的定义。使用该`struct`模块创建必要的标题。因为格式是未压缩的，所以很容易写出来。颜色信息必须按 BGR 顺序，底线到顶线，并且每行必须用零填充到 4 字节的倍数。

或者，如果您更喜欢简单的方法，[PIL](http://www.pythonware.com/library/pil/handbook/index.htm)知道如何[读写 BMP](http://www.pythonware.com/library/pil/handbook/format-bmp.htm)。

# authentication - 停用数据库中未使用的会话 ID？

> ID：13559549
> 
> 赞同：1
> 
> 时间：2012-11-26T06:13:25.963
> 
> 标签：authentication, security, session-cookies, form-authentication

我有一个具有表单身份验证的网站：

1) 用户登录时可选择是否保持登录状态。

2）服务器生成token，保存到数据库，发送token cookie给浏览器。

请注意，当用户选择不保持登录时，当他关闭浏览器时，令牌 cookie 将过期，如果用户选择保持登录，令牌 cookie 将在他登录一年后过期。

3）当用户注销时，服务器会停用保存在数据库中的token，并删除浏览器中的token cookie。

问题是，如果用户选择不保持登录，如果他关闭浏览器，令牌 cookie 将过期，但保存在数据库中的令牌不会被停用 - 服务器将不知道用户是否关闭了浏览器。

我将如何停用数据库中未使用的令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:24:58.163

在服务器端保留整个会话只是为了记住登录详细信息并不常见。我建议遵循 facebook/google 的设计：如果用户希望浏览器“记住他”，则生成一些随机安全的“访问令牌”cookie，作为该用户的最后一个有效访问令牌保存在用户表中。然后，当浏览器再次访问该网站时，它会发送该 cookie，服务器可以检查它是否与任何现有（有效）访问令牌匹配，从而登录用户。

# java - 获取图像的拍摄日期

> ID：13559551
> 
> 赞同：8
> 
> 时间：2012-11-26T06:13:40.507
> 
> 标签：java, image

我想找到图像的“拍摄日期”，而不是“修改日期”或“创建日期”。虽然我在 stackoverflow 上找到了一些链接，但没有一个可以检索到它。图像格式为：tiff 和 RAW。

使用`javax.imageio`，我编写了以下程序，但它什么也没打印。这意味着没有`reader`可用的

```
 File file = new File( fileName );
        ImageInputStream iis = ImageIO.createImageInputStream(file);
        Iterator<ImageReader> readers = ImageIO.getImageReaders(iis);            
        if (readers.hasNext()) {
            // pick the first available ImageReader
            ImageReader reader = readers.next();
            // attach source to the reader
            reader.setInput(iis, true);
            // read metadata of first image
            IIOMetadata metadata = reader.getImageMetadata(0);
            String[] names = metadata.getMetadataFormatNames();
            int length = names.length;
            for (int i = 0; i < length; i++) {
                System.out.println( "Format name: " + names[ i ] );
                displayMetadata(metadata.getAsTree(names[i]));
            }
        } 
```

使用核心 java 库，是否有一种方法可以访问“拍摄日期”而不是“创建日期”或“修改日期”。进一步的`data taken`信息是可用的，因为我可以从操作系统中的图像属性中看到

编辑：事实证明，`readers`迭代器与它无关。iee size 0\. 它只发生在 tiff 和 raw 图像上。适用于 jpeg

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T06:52:16.767

我找不到使用 java 核心库的任何解决方案。找到了一个名为[metadata-extractor](https://github.com/drewnoakes/metadata-extractor)的库来完成这项工作。

更多信息可以在[这里找到。](http://www.geekcap.com/campus/Java/article/56)

# php - 如何从mysql一次输出两列值并循环其余部分

> ID：13559553
> 
> 赞同：0
> 
> 时间：2012-11-26T06:14:16.837
> 
> 标签：php

在使用 mysql 的 php 中，我怎样才能只输出两列值一次，然后循环通过其他列值。

这里：

```
$exe_fetch_data = mysql_query("select category, subcategory, title, body, views from table");
while($row = mysql_fetch_array($exe_fetch_data))
echo $row['category'];    //Only once
echo $row['subcategory']; //Only once

{
echo $row['title'];
echo $row['body'];
echo $row['views'];
} 
```

期望的输出：

```
Category->SubCategory //Outputted only once

Title,  //Title Body and Views depend on whatever's there in the db. Could be 10 or more
Body,
Views

Title,
Body,
Views

Title,
Body,
Views 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:19:46.160

这段代码应该可以解决问题

```
 $exe_fetch_data = mysql_query("select category, subcategory, title, body, views from table");
    $row_once = mysql_fetch_array($exe_fetch_data)
    echo $row_once['category'];    //Only once
    echo $row_once['subcategory']; //Only once

   while($row = mysql_fetch_array($exe_fetch_data)) {
    echo $row['title'];
    echo $row['body'];
    echo $row['views'];
    } 
```

您也可以尝试使用一个初始值为初始值的标志，`true`并将`false`在第一次迭代后翻转。但我认为上面的代码会比使用标志更快，因为它不会在每次迭代后比较/检查标志值，并且使用庞大的数据库可以节省执行时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T06:17:51.753

一种解决方案可能是一个布尔值，它会记住该类别是否已经输出：

```
$exe_fetch_data = mysql_query("select category, subcategory, title, body, views from table");
$category_output_done = false;
while($row = mysql_fetch_array($exe_fetch_data))
{
    if (!$category_output_done) {
        echo $row['category'];    //Only once
        echo $row['subcategory']; //Only once
        $category_output_done = true;
    }

    echo $row['title'];
    echo $row['body'];
    echo $row['views'];
} 
```

另一种解决方案可能是在每次迭代时递增的计数器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T06:18:07.760

添加一个简单的计数器-

```
$counter = 0;
$exe_fetch_data = mysql_query("select category, subcategory, title, body, views from table");
while($row = mysql_fetch_array($exe_fetch_data))
if ($counter == 0){
echo $row['category'];    //Only once
echo $row['subcategory']; //Only once
$counter = 1;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T06:25:23.763

由于您可能有很多结果，因此在您的 while 循环中保留一个标志是否已显示类别已经消耗 CPU。由于您总是显示具有第一个结果集的类别，因此我不会在 while 循环中保留标志，而是这样做：

```
$exe_fetch_data = mysql_query("select category, subcategory, title, body, views from table");
$iNrOfResults = mysql_num_rows($exe_fetch_data);
//See if the result set has any rows at all, display the categories once
if(iNrOfResults > 0)
{
    $row = mysql_fetch_array($exe_fetch_data)
    echo $row['category'];    //Only once
    echo $row['subcategory']; //Only once
    echo $row['title'];
    echo $row['body'];
    echo $row['views'];
}

//See if there are any more results, do not display the categories anymore
if(iNrOfResults > 1)
{
    while($row = mysql_fetch_array($exe_fetch_data))
    {
        echo $row['title'];
        echo $row['body'];
        echo $row['views'];
    }
} 
```

# iphone - 我可以从 NSString 复制到 NSMutableString 吗？

> ID：13559554
> 
> 赞同：2
> 
> 时间：2012-11-26T06:14:18.393
> 
> 标签：iphone, ios, nsstring, copy

我有`strValue`as `NSString`，我想将`strValue`'s 的内容复制到另一个地方。

这个地方是`mstrValue`，这是一个`NSMutableString`。空间`mstrValue`已经分配。

我想知道如何使用`memcpy`或`strcpy`用于此目的。

如果不可能，我想知道其他方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T06:18:35.333

您的问题不太清楚，但如果您想将可变字符串的值设置为另一个字符串，请执行以下操作：

```
[mstrValue setString:strValue]; 
```

如果要附加该值，请执行以下操作：

```
[mstrValue appendString:strValue]; 
```

这两个都假设您在某些时候做了：

```
mstrValue = [[NSMutableString alloc] init]; 
```

查看[NSMutableString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableString_Class/Reference/Reference.html)的文档。有很多方法可以更新它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:23:01.393

我总是更喜欢使用`[NSString stringWithFormat@"%@", strValue];`，因为这样你就会清楚地得到一个新的自动释放字符串，并且可以正确处理字符串“strValue”。

`NSMutableString *mstrValue = [NSMutableString stringWithFormat:@"%@", strValue];`

或者

`NSMutableString *mstrValue = [NSMutableString stringWithString:strValue];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:47:53.043

除非您想正确处理字符串编码，否则应避免使用 memcpy 或 strcpy。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T16:23:18.210

是的，对象分配：

`NSMutableString *mstrValue = [[NSMutableString alloc] initWithString:strValue];`

你能行的。

# c# - 标签文本更改以调用页面加载/ javascript

> ID：13559558
> 
> 赞同：0
> 
> 时间：2012-11-26T06:14:52.703
> 
> 标签：c#, javascript, jquery, asp.net

基本上我不知道开始所以我不能提供任何更好的代码我有一个空标签

```
lblErrorMsg = "" ; 
```

一旦有任何错误，我的标签将显示带有 css 的错误消息

```
lblErrorMsg.Text = "some error Msg"; 
```

同时我也试图显示另一个图像标签，但我不想让它像按钮单击然后显示错误消息，因为这是一个正在进行的项目，所以有很多按钮，所以什么我想问的是，有没有什么方法可以在页面加载期间执行来检测标签文本的变化？

就像是

```
pageload(){
    check lblErrorMsg
    if(lblErrorMsg.Text!=""){
         lblImg.Visible= true;
     }else{
         lblImg.Visible= false;
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:19:43.797

您需要为此使用 javascript/Jquery。监听 onload 事件并执行逻辑。

您可以尝试将其放在您的 aspx 页面的脚本标记中

```
 window.onload = function(){
            var element = document.getElementById('<%=lblErrorMsg.ClientID%>');
            var lblMsg = document.getElementById('<%=lblImg.ClientID%>');
            lblMsg.style.display='none';
            if(element.innerHTML.length)
                 lblMsg.style.display = 'block';             
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:33:57.603

请放置 jquery 脚本并使用下面的代码片段。

```
$(document).ready(function(){
if($("#lblErrorMsg").text()!=""){
     $("#lblImg").css("visibility","hidden");
 }else{
     $("#lblImg").css("visibility","visible");
 }
}); 
```

谢谢

# android - 亚马逊采购 API 错误：com.amazon.testclient.iap.purchase not found

> ID：13559565
> 
> 赞同：4
> 
> 时间：2012-11-26T06:15:18.417
> 
> 标签：android, amazon-s3, amazon

Logcat 条目

```
11-26 11:16:29.033: W/ActivityManager(61): Unable to start service Intent{ act=com.amazon.testclient.iap.purchase flg=0x10000000 (has extras) }: not found
11-26 11:16:29.133: W/InputManagerService(61): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@40611088
11-26 11:21:06.059: D/SntpClient(61): request time failed: java.net.SocketException: Address family not supported by protocol 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T12:45:22.643

Amazon 与 Google 的 PlayStore 的不同之处在于，在您的应用程序获得批准和发布之前，您*根本无法使用 Amazon 的服务器测试购买：*

> 只有已通过分发门户批准和发布的应用程序才能与亚马逊客户端通信。
> [https://developer.amazon.com/sdk/in-app-purchasing/documentation/testing-iap.html](https://developer.amazon.com/sdk/in-app-purchasing/documentation/testing-iap.html)

因此，在此之前，您调试和测试购买的唯一选择是使用模拟亚马逊商店的 Amazon Tester 应用程序。

此行表示 Amazon API 正在请求 Amazon 的 SDK tester App，但它未安装在您的设备上：

> 11-26 11:16:29.033：W/ActivityManager(61)：无法启动服务 Intent{act=com.amazon.testclient.iap.purchase flg=0x10000000（有附加功能）}：未找到

## 亚马逊测试应用程序 + JSON 文件

Amazon Tester 应用程序与 SDK 一起打包。您需要将其侧加载到您的设备上，并创建和安装一个 json 文件，描述它应该模拟购买的产品。

在您的设备上安装之前，值得通过在线验证器工具运行您的 JSON 文件，因为很难发现错误，并且 SDK 测试器应用程序在出现问题时不会使其明显。

## 使用外部收据验证

如果您在应用程序之外的服务器上通过亚马逊验证购买收据，那么您还需要设置一个运行亚马逊 RVS 沙盒代码的服务器，以便它可以模拟亚马逊的收据验证服务。然后，您需要将您的原始服务器指向此沙箱服务器，而不是 Amazon 的实时收据验证服务器。

RVS Sandbox 是一个 .war 文件，您应该查看类似 Jetty 的东西来运行代码，并在开发过程中使用它来验证您的收据，而不是 Amazon 的服务器。

## 更多信息：

在此网站上查找以下标题：**使用收据验证沙箱**
**创建 JSON 数据文件**[https://developer.amazon.com/sdk/in-app-purchasing/documentation/testing-iap.html](https://developer.amazon.com/sdk/in-app-purchasing/documentation/testing-iap.html)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:31:37.783

这意味着 amazon api 没有安装在模拟器上。您使用的是[此处找到](https://developer.amazon.com/sdk/fire.html)的 Kindle 图片吗？如果没有，请使用您喜欢的任何目标，但安装[amazon appstore](http://www.amazon.com/gp/mas/get-appstore/android)。**

# java - java.lang.ClassNotFoundException：org.hibernate.cfg.AnnotationConfiguration

> ID：13559568
> 
> 赞同：2
> 
> 时间：2012-11-26T06:15:25.557
> 
> 标签：java, hibernate, servlets

我遇到了以下问题：我尝试使用 Eclipse 创建一个简单的 Servlep：

```
@WebServlet(description = "Adress book servlet", urlPatterns = {"/new_address"})
public class CAddressBookServlet extends HttpServlet 
{
    public CAddressBookServlet() 
    {
        super();
    }
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {}
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {}
    private static final long serialVersionUID = 1L;
} 
```

它适用于Tomcat！但后来我要在我的项目中添加 Hibernate 功能。我只向 servlet 构造函数添加了一行：

```
@WebServlet(description = "Adress book servlet", urlPatterns = {"/new_address"})
public class CAddressBookServlet extends HttpServlet 
{
    public CAddressBookServlet() 
    {
        super();
        new AnnotationConfiguration();
    }
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {}
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {}
    private static final long serialVersionUID = 1L;
} 
```

导致以下错误：

> HTTP 状态 500 - 实例化 servlet 类 org.servlets.CAddressBookServlet 时出错
> 
> * * *
> 
> 类型异常报告
> 
> 消息实例化 servlet 类 org.servlets.CAddressBookServlet 时出错
> 
> 描述 服务器遇到一个内部错误，阻止它完成这个请求。
> 
> 例外
> 
> javax.servlet.ServletException: 实例化 servlet 类 org.servlets.CAddressBookServlet org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99) 时出错) org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931) org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor .java:1004) org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) java.util.concurrent .ThreadPoolExecutor.runWorker（未知来源） java.util.concurrent.ThreadPoolExecutor$Worker。运行（未知来源） java.lang.Thread.run（未知来源）
> 
> 根本原因
> 
> java.lang.NoClassDefFoundError: org/hibernate/cfg/AnnotationConfiguration org.servlets.CAddressBookServlet.(CAddressBookServlet.java:33) sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) sun. reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) java.lang.reflect.Constructor.newInstance(Unknown Source) java.lang.Class.newInstance0(Unknown Source) java.lang.Class.newInstance(Unknown Source) org.apache.catalina. authenticationator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99) org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931) org. apache.catalina.connector.CoyoteAdapter.service（CoyoteAdapter.java：第407章SocketProcessor.run(JIoEndpoint.java:310) java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) java.lang.Thread.run(Unknown Source)ThreadPoolExecutor$Worker.run(Unknown Source) java.lang.Thread.run(Unknown Source)ThreadPoolExecutor$Worker.run(Unknown Source) java.lang.Thread.run(Unknown Source)
> 
> 根本原因
> 
> java.lang.ClassNotFoundException: org.hibernate.cfg.AnnotationConfiguration org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714) org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559) org .servlets.CAddressBookServlet.(CAddressBookServlet.java:33) sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) java.lang.reflect .Constructor.newInstance(Unknown Source) java.lang.Class.newInstance0(Unknown Source) java.lang.Class.newInstance(Unknown Source) org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) org. apache.catalina.valves.ErrorReportValve。调用（ErrorReportValve.java:99）org.apache.catalina.valves.AccessLogValve.invoke（AccessLogValve.java:931）org.apache.catalina.connector.CoyoteAdapter.service（CoyoteAdapter.java:407）org.apache.coyote。 http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java: 310) java.util.concurrent.ThreadPoolExecutor.runWorker(未知来源) java.util.concurrent.ThreadPoolExecutor$Worker.run(未知来源) java.lang.Thread.run(未知来源)AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) java.lang.Thread.run(Unknown Source)AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) java.lang.Thread.run(Unknown Source)运行（未知来源）运行（未知来源）
> 
> note Apache Tomcat/7.0.33 日志中提供了根本原因的完整堆栈跟踪。

如何使休眠与我的 servlet 一起工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:35:31.880

@Perception 有正确的答案。您需要在部署的 war 文件中包含 Hibernate 库。您可以将它们放在 WEB-INF/lib 或 Tomcat 认可的目录中。我更喜欢 WEB-INF/lib 位置，因此您不会干扰服务器上的任何其他应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:25:16.780

我认为您缺少注释罐。 [下载注释](https://repository.jboss.org/nexus/content/repositories/releases/org/hibernate/hibernate-annotations/3.5.6-Final/hibernate-annotations-3.5.6-Final.jar)

将下载的 jar 文件复制到这些位置之一....

```
-> Tomcat 库目录
          或者
 -> 到文件夹 webapps/< your_project >/WEB-INF/lib  

```

并重启服务器

# joomla - 将 Joomla 1.0 表格内容转换为 2.5

> ID：13559571
> 
> 赞同：1
> 
> 时间：2012-11-26T06:15:40.203
> 
> 标签：joomla, joomla2.5, joomla-extensions

我曾多次尝试将正在运行的 Joomla 1.0.13 转换为较新的版本，但从未成功。由于德语元音变音（特殊字符），迁移器组件似乎返回了错误的输出，因此我放弃了使用它的计划。

如果我能迁移 Joomla 1.0 的 jos_content 表中的文章并将其移至最新版本 2.5，我将是一个幸运的人。

当我比较新的表结构时，我发现实际上发生了一些变化。 **有谁知道 1.0 版中的表列如何映射到 2.5 版？** 是否可以转换条目？

请注意，我很好，丢失了一些信息，如类别。或者每篇文章都指向同一个类别。

我在 pastebin 发布了 jos_content 表结构的比较：http: [//pastebin.com/RRFaqxk4](http://pastebin.com/RRFaqxk4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:20:35.473

最好的办法是运行 1.5 安装并让它为您执行 1.0 到 1.5 的迁移。然后使用 JUpgrade 或 SPUprgade 去 1.5 到 2.5 或 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:19:05.170

在迁移之前，您应该始终尝试升级您正在使用的 Joomla 系列的最新版本。这将确保迁移运行更顺利，并且不太可能出现任何故障。

JED 上没有 Joomla 1.0 到 1.5 的迁移工具，因此请阅读[此文档](http://docs.joomla.org/Migrating_from_1.0.x_to_1.5_Stable)以了解如何操作。完成后，下载并安装[JUpgrade](http://extensions.joomla.org/extensions/migration-a-conversion/joomla-migration/11658)，这将允许您从 Joomla 1.5 迁移到 2.5。

请注意，迁移后，您正在运行的某些第 3 方扩展将无法工作，并且也需要更新。

希望这可以帮助

# java - 使用ajax提交上传文件

> ID：13559576
> 
> 赞同：0
> 
> 时间：2012-11-26T06:16:10.167
> 
> 标签：java, jquery, ajax

我正在尝试上传文件并在 java 控制器中获取内容并将其写入我指定的路径。当我像往常一样提交表单时它可以工作，但现在我想使用 ajax 提交上传文件。我不知道 ajax 和尝试谷歌搜索但徒劳无功。请任何人提出一些教程或指导我如何去做。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:23:27.880

没有使用 ajax 上传的直接方法，而是使用 iframe 模拟的一种方法

请看看这些讨论

[如何异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery) [AJAX 表单提交与文件上传](https://stackoverflow.com/questions/5561127/ajax-form-submit-with-file-upload)

使用隐藏 iFrame 上传 Ajax 样式文件

[http://viralpatel.net/blogs/ajax-style-file-uploading-using-hidden-iframe/](http://viralpatel.net/blogs/ajax-style-file-uploading-using-hidden-iframe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:07:38.337

试试这个插件

```
<script>
    // wait for the DOM to be loaded
    $(document).ready(function() 
    {
        // bind 'myForm' and provide a simple callback function
       $("#tempForm").ajaxForm({
       url:'../calling action or servlet',
       type:'post',
       beforeSend:function()
       {
         alert("perform action before making the ajax call like showing spinner image");
       },
       success:function(e){
        alert("data is"+e);
            alert("now do whatever you want with the data");
       }
       });
    });
</script> 
```

并将其保存在您的表格中

```
<form id="tempForm" enctype="multipart/form-data">
<input type="file" name="" id="" />
</form> 
```

[你可以在这里](http://www.malsup.com/jquery/form/#download)找到插件

如果您在表单中提到了 ecntype，那么它会将填充作为字节字段传递，您必须使用

```
String photo = request.getParameter('inputFile').getBytes(); 
```

这个字节可以在sql中存储为a.blob

# svn - svn:externals - 使用通配符

> ID：13559578
> 
> 赞同：1
> 
> 时间：2012-11-26T06:16:13.670
> 
> 标签：svn, version-control

我正在使用svn 1.7。

我有一个文件夹，它是来自各个第三方的 DLL 的集合。一些第 3 方包含多个 DLL。

是否有可能在 svn:external 中使用通配符（例如 *.dll）或者我应该单独命名每个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:24:37.173

如果是基于文件的外部，您**必须**将 SRC 定义为单个文件

您**可以**svn:external 某个位置的整个目录并访问链接目录中的所有文件

# mysql - 当更新中的值相同时，mysql会将相同的值写入磁盘吗？

> ID：13559583
> 
> 赞同：2
> 
> 时间：2012-11-26T06:16:38.257
> 
> 标签：mysql, sql-update

当我使用update修改mysql中的数据时：

```
update table set col1=A,col2=B,col3=C where col4=D; 
```

如果A和B相同，C不一样，mysql会把这3个col写入磁盘吗？

# sql - 在 sql 中使用子属性创建 XML

> ID：13559584
> 
> 赞同：1
> 
> 时间：2012-11-26T06:16:42.673
> 
> 标签：sql, xml, sql-server-2008, xquery

我有一个这样的查询：

```
 SELECT  
    getdate()[createdon], 'www.google.com'[XMLNS],
    Co.Country, IC.InterConnectionName as point,
    SO.SOName[TSO], FD.GasDay, FD.CaptureDate,
    CD.mwhentry AS entrymwh, CD.mwhexit AS exitmwh, 
    DS.State, (CD.MWHENTRY - CD.MWHEXIT) AS NETMWH,
    (cd.mwhexit - cd.mwhexit) as NETMCH 
FROM 
    TABLENAME 
```

我希望将其转换为 xml

```
<gas-flow created-on="2012/06/02T10:30:01Z"
          xmlns="www.google.com">
   <country>Austria</country>
   <point>TSO4</point>
   <tso>BOG</tso>
   <gas-day>2012/06/02</gas-day>
   <capture-date>2012/06/02T10:30:00Z</capture-date>
   <state version="1">provisional</state>  
   <entry mwh="558234" mcm="52.80"/>
   <exit mwh="0" mcm="0"/>
   <net mwh="558234" mcm="52.80"/>
</gas-flow> 
```

如果我这样做

```
FOR XML RAW ('gasflow'), ROOT ('FLOWDATAID'), ELEMENTS 
```

我也得到标签之间的数据，但问题是

```
 entry tag, exit tag and net mwh 
```

必须是这样的

谢谢您的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:26:31.393

您需要[检查`FOR XML PATH()`语法](http://msdn.microsoft.com/en-us/library/ms189885.aspx)`FOR XML RAW`- 它比并允许您执行诸如将某些输出指定为属性（而不是元素）之类的事情要灵活得多。

所以尝试这样的事情：

```
;WITH XMLNAMESPACES (DEFAULT 'www.google.com')
SELECT  
    GETDATE() AS '@created-on', 
    CO.Country, 
    IC.InterConnectionName AS 'point',
    SO.SOName AS TSO, 
    FD.GasDay, 
    FD.CaptureDate,
    '1' AS 'State/@version',
    [DS.State], 
    CD.mwhentry AS 'entry/@mwh',
    CD.mcmEntry AS 'entry/@mcm',
    CD.mwhexit AS 'exit/@mwh',
    CD.mcmexit AS 'exit/@mcm',
    (CD.MWHENTRY - CD.MWHEXIT) AS 'net/@mwh',
    (CD.MWHexit - CD.MWHexit) AS 'net/@mcm'
FROM 
    dbo.YourTableNameHere
FOR XML PATH('gas-flow'), ROOT ('FLOWDATAID') 
```

# objective-c - iPhone 应用程序在我切换比例之前没有响应（2x/1x ipad 放大角落）

> ID：13559587
> 
> 赞同：0
> 
> 时间：2012-11-26T06:17:09.250
> 
> 标签：objective-c, xcode, ipad

我将我的应用程序安装到我的 iPad2 上。标签栏控制器，没什么花哨的。在我点击角落的 1x/2x 按钮之前，应用程序不会更改标签。当我更改缩放时，选项卡变得响应。我勒个去.. ？

编辑：在第一个选项卡的笔尖上添加了一个空的 UIButton。在我更改缩放级别之前它不会响应。

编辑：两个选项卡的 viewDidLoad 只调用 super。

编辑： viewDidLoad 中的 NSLog 语句出现。

这是一个非常新鲜的项目。（<2 小时，我将我的方法调用移出 viewDidLoad 以查看我是否正在做任何会导致冻结的事情）。我不记得以前发生过这种情况，但我经常闲着玩缩放级别以获得乐趣，所以有可能我错过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:01:34.080

从来没有见过这个特殊的问题，但是任何时候我遇到过这样的奇怪交互，它要么忘记在各种视图生命周期方法之一中调用 super，要么忘记分配 window.rootViewController。由于您对该过程的了解并不多，因此可能值得从标准模板中重新开始一个新项目，然后看看会发生什么。

# oracle - 员工表中的重复数据

> ID：13559590
> 
> 赞同：0
> 
> 时间：2012-11-26T06:17:24.417
> 
> 标签：oracle

`job_id`我的代码检索用户指定的最高薪水和员工人数。这是 oracle 10g express edition 中的一个 SQL 代码，现在您认为我应该在我的代码中添加问号以创建一个异常处理程序，该处理程序将检测何时有两名员工在指定的薪水最高`job_id`...请帮帮我，你认为我应该在我的异常部分的问号上使用什么关键字？

```
DECLARE

lvn_emp_tot    NUMBER;
lvn_max_sal    NUMBER;
lvc_jb_id      VARCHAR2(30) := :JOB_ID;

BEGIN

  SELECT job_id, max(salary), count(job_id)
    INTO lvc_jb_id, lvn_max_sal, lvn_emp_tot
    FROM Employees
   WHERE job_id = lvc_jb_id
   GROUP BY job_id; 

  DBMS_OUTPUT.PUT_LINE('Maximum salary:  '||lvn_max_sal);
  DBMS_OUTPUT.PUT_LINE('Number of Employees: '||lvn_emp_tot);

EXCEPTION
    WHEN ? THEN 
    DBMS_OUTPUT.PUT_LINE('More than one employee has the highest salary');

END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:31:08.460

在此之前更改您的查询：

```
select job_ID,salary,count(*) INTO lvc_jb_id, lvn_max_sal, lvn_emp_tot 
from Employees
where salary= (
                 SELECT max(salary)
                 FROM Employees
                 WHERE job_id = input_jobid
                 GROUP BY job_id
              )
group by job_ID; 
```

在声明块中：

```
ex_custom EXCEPTION; 
```

并在查询后：

```
if lvn_emp_tot>1 then
    raise ex_custom ;    
end if; 
```

毕竟这一切：

`?=ex_custom`;)

# windows-phone-7 - 市场错误报告中的 System.ComponentModel.AsyncOperation.VerifyNotCompleted 错误

> ID：13559593
> 
> 赞同：5
> 
> 时间：2012-11-26T06:17:52.560
> 
> 标签：windows-phone-7, windows-phone-7.1, backgroundworker, windows-phone-8

我在来自 windows phone 市场的报告中有`System.ComponentModel.AsyncOperation.VerifyNotCompleted`一个错误。`stacktrace`我`background worker`用来在后台线程中工作。`windows phone 8`此错误在 Windows Phone 7 中发生的次数更多。

请问谁能解释这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T12:35:26.237

我从来没有遇到过这样的错误，但我只是想看看我是否能以某种方式帮助你。这是我发现的：

```
private void VerifyNotCompleted()
{
  if (!this.alreadyCompleted)
  {
    return;
  }
  throw new InvalidOperationException(SR.GetString("Async_OperationAlreadyCompleted"));
} 
```

看看这是否有任何该死的帮助。我对这个例外一无所知，只是尝试分享我的搜索结果。也未必是对的。请让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T09:42:09.380

在这种情况下，唯一对我有帮助的解决方案是防止两个线程同时访问后台工作人员。我建议其他人也这样做，并防止线程同时访问工作人员。

# symfony - Symfony 2 Forms：将视图数据存储在数组中并稍后恢复条件

> ID：13559598
> 
> 赞同：1
> 
> 时间：2012-11-26T06:18:24.973
> 
> 标签：symfony, symfony-2.1

我尝试在会话中实现表单值保存。

1）点击按钮“更改类别”上`page1`

2）在会话中存储数据

3）重定向到`page2`

4) 使用此保存的表单数据执行一些更改并在会话中更新它

5）通过存储在会话中的值重定向回`page1`并恢复表单值

```
$product = new Product;

$productType = new ProductType;
$form = $this->createForm($productType, $product);

//get values from session
$form_values_in_session = ...

if ($request->isMethod('POST')) {
    $form->bind($request);

    // if click on change category button
    if ($request->request->get('category')) {
        $form_raw_values = $request->get($productType->getName());

        $form_values = array();
        foreach ($form_raw_values as $form_field_name => $form_field_value) {
            if ($form->has($form_field_name)) {
                $form_values[$form_field_name] = $form_field_value;
            }
        }

        // store this data in session
        // and redirect
        return $this->redirect($this->generateUrl();
    }

    if ($form->isValid()) {
        // form submit
    }
} else if ($form_values_in_session) {
    $form->bind($form_values_in_session);
} 
```

工作得很好，但问题是表单在通话后正在验证`$form->bind($form_values_in_session);`，我在页面上看到表单错误。

正确的方法是：调用 setter `$product`，但在这种情况下，我需要手动转换视图数据 -> 规范数据 -> 模型数据。类中的此类方法`Form`是私有的，我需要从 Form::viewToNorm、Form::normToModel 等方法中复制粘贴一些代码。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:32:12.803

这个想法是表单验证仅适用于根表单。这意味着我可以为表单儿童绑定数据

```
foreach ($form->all() as $name => $field) {
    if (isset($form_values_in_session[$name])) {
        $field->bind($form_values_in_session[$name]);
    }
} 
```

# java - Jsoup：xml标签中冒号时出现SelectorParseException

> ID：13559600
> 
> 赞同：10
> 
> 时间：2012-11-26T06:18:30.950
> 
> 标签：java, xml-parsing, jsoup

当xml标签有冒号时抛出异常，

**例外：**

org.jsoup.select.Selector$SelectorParseException：无法解析查询'w：r'：'：r'处的意外令牌

**XML:**

```
<w:r>
 <w:rPr>
   <w:rStyle w:val="jid"/>
 </w:rPr>
 <w:t>AN</w:t>
</w:r> 
```

**Java代码：**

```
 org.jsoup.nodes.Document doc = Jsoup.parse(documentXmlString); 
```

这里 documentXmlString 有上面指定的 xml

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-07T17:10:48.360

只需将“：”替换为“|”

```
doc.select("w|r"); 
```

我正在使用 Jsoup 1.5.2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T14:47:12.123

尽管您的拼凑对您有用..我想提供有关名称空间的知识！

您的`w:`XML 中的实际称为命名空间前缀。并且要使用 neamespace 前缀，它必须在根节点中声明！^(1+) 由于您的源 XML 中缺少声明部分！解析器抛出错误！下面是在 XML 中定义命名空间的方法！我已经更正了您自己的 XML，我敢打赌它现在不会出错了！

```
<w:r xmlns:w="http://www.w3.org/SomeNamespace">
  <w:rPr>
    <w:rStyle w:val="jid"/>
  </w:rPr>
  <w:t>AN</w:t>
</w:r> 
```

**附加信息：**

命名空间有自己的范围！在下面的例子中：

```
<root>
    <w:r xmlns:w="http://www.w3.org/SomeNamespace">
      <w:rPr>
        <w:rStyle w:val="jid"/>
      </w:rPr>
      <w:t>AN</w:t>
    </w:r>
    <someotherElement>
      <dummychild/>
    </someotherElement> 
```

在上面的例子中，你不能在`<someotherElement>`或`<dummychild/>`!!上使用命名空间前缀。因为命名空间前缀 w 的范围`<r>`仅限于元素及其子元素（孙子元素）！

^(1+：在其下声明命名空间的元素。命名空间对其自身及其子节点有效。在根下声明命名空间使命名空间对 XML 文档中的所有元素有效/可用。) 

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T05:24:04.413

我用了，

```
 documentXmlString = documentXmlString.replaceAll("w:","w"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-26T06:57:08.977

JSoup 是一个 html 而不是 XML 解析器。对于 XML，您可以使用 JAXB 或 SAXON 或 Xstream。

# mysql - 创建索引的顺序会影响查询优化器选择哪个索引？

> ID：13559610
> 
> 赞同：5
> 
> 时间：2012-11-26T06:19:10.053
> 
> 标签：mysql

如果我创建以下两个指标

```
ALTER TABLE requests ADD INDEX daily_ips(exec_date, ip_address);
ALTER TABLE requests ADD INDEX is_cached(exec_date, cached); 
```

的输出`show index from requests`如下

```
Table       Non_unique  Key_name    Seq_in_index    Column_name Collation   Cardinality Sub_part    Packed  Null    Index_type  Comment Index_comment
requests    1           daily_ips   1               exec_date   A           413         NULL    NULL    YES BTREE       
requests    1           daily_ips   2               ip_address  A           218334      NULL    NULL    YES BTREE       
requests    1           is_cached   1               exec_date   A           165         NULL    NULL    YES BTREE       
requests    1           is_cached   2               cached      A           165         NULL    NULL    YES BTREE 
```

我有以下查询

```
EXPLAIN SELECT exec_date,
    100 * SUM(CASE WHEN cached = 'no' THEN 1 ELSE 0 END)  / SUM(1) cached_no,
    100 * SUM(CASE WHEN cached != 'no' THEN 1 ELSE 0 END)  / SUM(1) cached_yes
FROM requests
GROUP BY exec_date;

id  select_type table   type    possible_keys   key         key_len ref rows    Extra
1   SIMPLE  requests    index   NULL            daily_ips   263 NULL    436695 
```

但是我想强制查询优化器使用`is_cached`索引而不是`daily_ips`索引。

如果我删除`daily_ips`索引并再次添加它

```
ALTER TABLE requests DROP INDEX daily_ips;
ALTER TABLE requests ADD INDEX daily_ips(exec_date, ip_address); 
```

然后运行相同的`EXPLAIN`语句，查询优化器选择`is_cached`索引。

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  requests    index   NULL    is_cached   6   NULL    440493  Using index 
```

查询优化器根据添加的顺序选择索引是预期的行为吗？

如何告诉查询优化器使用哪个索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:27:11.970

您可以指定查询应该使用哪个索引来运行。

尝试这个：

```
EXPLAIN SELECT exec_date,
    100 * SUM(CASE WHEN cached = 'no' THEN 1 ELSE 0 END)  / SUM(1) cached_no,
    100 * SUM(CASE WHEN cached != 'no' THEN 1 ELSE 0 END)  / SUM(1) cached_yes
FROM requests USE INDEX(is_cached)
GROUP BY exec_date; 
```

`USE INDEX`和 之间的区别`FORCE INDEX`：

通过指定 USE INDEX (index_list)，您可以告诉 MySQL 仅使用一个命名索引来查找表中的行。替代语法 IGNORE INDEX (index_list) 可用于告诉 MySQL 不要使用某些特定的索引或索引。如果 EXPLAIN 显示 MySQL 正在使用可能索引列表中的错误索引，这些提示很有用。

您还可以使用 FORCE INDEX，它的作用类似于 USE INDEX (index_list)，但另外假设表扫描非常昂贵。换句话说，仅当无法使用给定索引之一来查找表中的行时，才使用表扫描。

**更新**

试试这个查询：

```
SELECT exec_date, 
       100 * SUM(IF(cached = 0, 1, 0)) / SUM(1) cached_no, 
       100 * SUM(IF(cached = 1, 1, 0)) / SUM(1) cached_yes 
FROM (SELECT exec_date, IF(cached = 'no', 0, 1) cached 
      FROM requests GROUP BY exec_date) AS A 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T06:27:56.960

要强制一个索引超过另一个，您可以使用`FORCE INDEX`指令：

```
EXPLAIN SELECT exec_date,
    100 * SUM(CASE WHEN cached = 'no' THEN 1 ELSE 0 END)  / SUM(1) cached_no,
    100 * SUM(CASE WHEN cached != 'no' THEN 1 ELSE 0 END)  / SUM(1) cached_yes FROM requests FORCE INDEX(`is_cached`) GROUP BY exec_date; 
```

MySQL 优化器选择返回较少行扫描的索引，在您的情况下，这两个索引的计数非常接近（436695 与 440493）。

# c++ - 将类似值 bmp 计数为像素值 C++

> ID：13559617
> 
> 赞同：1
> 
> 时间：2012-11-26T06:19:43.463
> 
> 标签：c++, bitmap, count, pixel

我拍摄了一张位图图像，并从中提取了指定像素行的 R、G、B 整数。将 int 转换为字符串，以便我可以打印 6 种特定颜色。我不知道如何用 int 来做。

问题我能够将第 0-184 行（对应于该行中的像素）打印为顺序数据 1234... 或颜色为红色、红色、红色、黑色、黑色、灰色...。

但是我需要计算相似/相同的颜色，显示相似颜色的总和，然后重置计数器，直到该颜色再次出现然后重新计数。我认为 if 或 if else 会这样做，但不完全是。可能是我的代码结构导致了问题？

所以我想要的是：

```
5   red,
10  black,
2   red,
1   gray, 
```

ETC......

这是我的代码，我是初学者，因此批评我缺乏知识，以便我可以正确学习。

```
#include <iostream>
#include <sstream>
#include <string>
#include "EasyBMP.h"
#include "EasyBMP_BMP.h"
#include "EasyBMP_DataStructures.h"
#include "EasyBMP_VariousBMPutilities.h"

//Conversion and comparison function
void calculate(int i, int x, int p);

int main(int argc, const char * argv[])
{

BMP Image;
Image.ReadFromFile( "BMP GOES HERE 24bit" );

std::cout << "Image Height and Width: " << Image.TellHeight() << " x " << Image.TellWidth() << std::endl;

std::cout << "Enter your row: ";

int pixX = 0;
std::cin >> pixX;

//Set getpixel to top of row
int pixY  = 0;

for( pixY = 0; pixY < Image.TellHeight() ; pixY++ )
{
    std::cout << "Pixel: " << pixY + 1;

    RGBApixel Temp = Image.GetPixel(pixX,pixY);

    //Array to store pixel color ints
    int pixy[3];
    pixy[0] = Temp.Red;
    pixy[1] = Temp.Green;
    pixy[2] = Temp.Blue;

    calculate(pixy[0], pixy[1], pixy[2]);
}

return 0;
}

void calculate(int rnum, int gnum, int bnum)
{

//String which will contain the result
std::string result;

//Stream used for the conversion
std::ostringstream convert;

//Insert the textual representation of 'Number' in the characters in the stream
convert << rnum;                

convert << gnum;

convert << bnum;

// set 'Result' to the contents of the stream
result = convert.str();    

// compare result to my given value
if (result == "25500")
{
    std::cout << " RED  " << std::endl;
}
if (result == "255255255")
{
    std::cout << " WHITE " << std::endl;
}
if (result == "000")
{
    std::cout << " BLACK" << std::endl;
}
if (result == "148148148")
{
    std::cout << " GRAY " << std::endl;
}
if (result == "267326")
{
    std::cout << " GREEN " << std::endl;
}
if (result == "2551260")
{
    std::cout << " ORANGE " << std::endl;
}
} 
```

以下是工作代码。请注意，如果您使用它，我的图像只有 6 种特定颜色。要更改打印输出，必须根据需要修改 switch 语句案例。

```
#include <iostream>
#include <vector>
#include "EasyBMP.h"    
#include "EasyBMP_BMP.h"
#include "EasyBMP_DataStructures.h"
#include "EasyBMP_VariousBMPutilities.h"

long toRGB(long red, long grn, long blu);

int main(int argc, const char * argv[])
{

BMP Image;
Image.ReadFromFile( "Your BMP HERE" );

std::cout << "Image Height and Width: " << Image.TellHeight() << " x " << Image.TellWidth() << std::endl;

std::cout << "Enter your row: ";

int pixX = 0;
std::cin >> pixX;
if (pixX != 0)                              //Subtract one from input if not 0, image starts at 0,0
{
    pixX -= 1;
}

long pop  = 0;
long pop1 = 0;

RGBApixel current = Image.GetPixel(pixX,0);

long pixy1[3];                                        //Array to store pixel color ints
pixy1[0] = current.Red;
pixy1[1] = current.Green;
pixy1[2] = current.Blue;

pop1 = toRGB(pixy1[0], pixy1[1], pixy1[2]);

int count = 0;
for( int pixY = 0; pixY < Image.TellHeight() ; pixY++ )
{
    RGBApixel Temp = Image.GetPixel(pixX,pixY);

    long pixy[3];                                        //Array to store pixel color ints
    pixy[0] = Temp.Red;
    pixy[1] = Temp.Green;
    pixy[2] = Temp.Blue;

    pop = toRGB(pixy[0], pixy[1], pixy[2]);

    if (pop == pop1)
    {
        count++;
    }
    else
    {
        switch (pop1) {
            case 0:
                std::cout << "(" << count << ")\t" << "BLACK\n" << std::endl;
                break;
            case 16711680:
                std::cout << "(" << count << ")\t" << "RED\n" << std::endl;
                break;
            case 9737364:
                std::cout << "(" << count << ")\t" << "GRAY\n" << std::endl;
                break;
            case 16777215:
                std::cout << "(" << count << ")\t" << "WHITE\n" << std::endl;
                break;
            case 1722650:
                std::cout << "(" << count << ")\t" << "GREEN\n" << std::endl;
                break;
            case 16743936:
                std::cout << "(" << count << ")\t" << "ORANGE\n" << std::endl;
                break;
            default:
                std::cout << " !!!NO Specified COLOR For!!! " << pop1 << std::endl;
                break;
        }

        pop1 = pop;                                     //Reset the count and current     color
        count = 1;
    }
}
    if (count > 0)                                      //Returns last color and count
    {
        switch (pop1) {
            case 0:
                std::cout << "(" << count << ")\t" << "BLACK\n" << std::endl;
                break;
            case 16711680:
                std::cout << "(" << count << ")\t" << "RED\n" << std::endl;
                break;
            case 9737364:
                std::cout << "(" << count << ")\t" << "GRAY\n" << std::endl;
                break;
            case 16777215:
                std::cout << "(" << count << ")\t" << "WHITE\n" << std::endl;
                break;
            case 1722650:
                std::cout << "(" << count << ")\t" << "GREEN\n" << std::endl;
                break;
            case 16743936:
                std::cout << "(" << count << ")\t" << "ORANGE\n" << std::endl;
                break;
            default:
                std::cout << " !!!NO Specified COLOR For!!! " << pop1 << std::endl;
                break;
    }
}

return 0;
}

long toRGB(long a, long b, long c)                          //Function to convert R, G, B      values to unique value
{
long color = 0;
color |= (a & 255) << 16;
color |= (b & 255) << 8;
color |= (c & 255);

return color;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:44:08.103

有很多不同的方法可以计算给定颜色的像素数。如果您感兴趣的颜色列表相当短，您可以创建一个大小等于初始化为全 0 的颜色数量的数组，然后编写一个函数，根据传递给的颜色返回该数组的索引它（例如，red = 0，white = 1，以任意顺序；常量可能是跟踪它的好方法），然后循环调用每个像素上的函数并在给定索引处递增数组。

这很简单，但非常不优雅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:47:37.587

我之前并没有真正理解你的问题，所以我写了一个更适合你所问内容的新答案。

我认为您可以通过以下方式获得您想要的东西（修改您的代码）：

```
RGBApixel current = Image.GetPixel(pixX,0);
int count = 0;
for( pixY = 0; pixY < Image.TellHeight() ; pixY++ )
{
    RGBApixel Temp = Image.GetPixel(pixX,pixY);
    if (Temp == current)
    {
         count++;
    }
    else
    {
         // same-color sequence ended
         // Add code here to print out current color and count
         --- your output code ----

         // now reset the count and current color
         current = Temp;
         count = 1;
    }
}

// Now just print out the last sequence
if (count > 0)
{
    --- your output code here again ---
} 
```

我不确定的一件事是，如果有的话，如何`==`为 RGBApixel 定义运算符。如果它没有定义或者似乎没有根据它们的颜色来等同像素，只需编写一个这样的函数`pixelsAreEqual(RBGApixel p1, RGBApixel p2)`，它需要两个像素，如果它们具有相同的 RGB 值，则返回 true。

# objective-c - 即使显示已连接状态也不会访问数据库

> ID：13559621
> 
> 赞同：-1
> 
> 时间：2012-11-26T06:20:00.883
> 
> 标签：objective-c, xcode, sap, sup

！[控制台--日志](http://i.stack.imgur.com/pIWvV.png)[http://i.stack.imgur.com/pIWvV.png] 大家好，

我们完全是这项技术的初学者 我们创建了一个名为 flight details 的 MBO，它有 3 个输入参数（airlineid、connectionid.flightdate）。并生成了相应的objective-c代码。现在我们按照以下步骤连接到服务器：

```
#import "ConnectionController.h"
#import "SUPApplication.h"
#import "flightDetailsTest_Flightdetails_v1DB.h"
#import "CallbackHandler.h"
#import "SUPConnectionStatus.h"
#import "SUPConnectionProfile.h"

@interface ConnectionController()

@property (nonatomic, retain) CallbackHandler *callbackHandler;

@end

@implementation ConnectionController

@synthesize callbackHandler;

static ConnectionController *appConnectionController;

+(void)beginApplicationSetup
{
    NSLog(@"inside controller");

    if(!appConnectionController)
    {
        NSLog(@"inside appconnectioncontroller");

        appConnectionController = [[[ConnectionController alloc] init] retain];

        appConnectionController.callbackHandler = [[CallbackHandler getInstance] retain];

        NSLog(@"end of it");
    }

    if([SUPApplication connectionStatus] == SUPConnectionStatus_DISCONNECTED)
    {
        NSLog(@"comparision method");

        [appConnectionController setupApplicationConnection];

        NSLog(@"end of comparision method");
    }

    else {
        NSLog(@"Already Connected");
    }
}

//end of beginApplication

-(BOOL)setupApplicationConnection{

    NSLog(@"inside bool1");

    SUPApplication *app = [SUPApplication getInstance];

    [app setApplicationIdentifier:@"HWC"];

    [app setApplicationCallback:self.callbackHandler];

    NSLog(@"inside bool2");

    SUPConnectionProperties *properties = [app connectionProperties];

    NSLog(@"servername");

    [properties setServerName:@"sapeccehp5.xxx.com"];  

    NSLog(@"inside bool2+line1");   

    [properties setPortNumber:5001];

    NSLog(@"middle bool2");

    [properties setFarmId:0];

    NSLog(@"inside bool2+line3");

    [properties setUrlSuffix:@"/tm/?cid=%cid%"];

    NSLog(@"inside bool2+line4"); 

    [properties setNetworkProtocol:@"http"];

    NSLog(@"inside bool3");

    SUPLoginCredentials *loginCred =[SUPLoginCredentials getInstance];

    [loginCred setUsername:@"ourmac"];

    [loginCred setPassword:nil];

    [properties setLoginCredentials:loginCred];

    [properties setActivationCode:@"1234"];

    NSLog(@"end of bool3");

    if(![flightDetailsTest_Flightdetails_v1DB databaseExists])
    {
        NSLog(@"inside dbif");

        [flightDetailsTest_Flightdetails_v1DB createDatabase];
    }

    NSLog(@"profile start out if");

    SUPConnectionProfile *connProfile = [flightDetailsTest_Flightdetails_v1DB getSynchronizationProfile];

    NSLog(@"start connection profile");

    [connProfile setClientId:@"0" ];

    NSLog(@"clientid");

    [connProfile setDomainName:@"Development"];

    NSLog(@"domain");

    [connProfile setUser:@"ourmac"];

    NSLog(@"user");

    [connProfile setPassword:@"password"];

    NSLog(@"pass");

   //  [connProfile setNetworkProtocol:@"http"];

    NSLog(@"netowrk");

    //  [connProfile setPortNumber:2480];

    NSLog(@"port");

    // [connProfile setServerName:@"sapeccehp5.xxx.com"];

    //  [connProfile setAsyncReplay:YES];

    [flightDetailsTest_Flightdetails_v1DB registerCallbackHandler:self.callbackHandler];

    [flightDetailsTest_Flightdetails_v1DB setApplication:app];

    if([SUPApplication registrationStatus] == SUPRegistrationStatus_REGISTERED)
    {
        [app startConnection:0];
    }
    else{

        [app registerApplication:0];
    }
}
@end

// and we have wrote the viewcontroller.m file as follows

-(IBAction)SearchAction:(id)sender{

    @try{
        [ConnectionController beginApplicationSetup];

        NSLog(@"inside applicationsetup");
    } 

    @catch (NSException *exception) {

        //[MessagingClientLib resetMessagingState];

        NSLog (@"Error-ConnectionAborted");
    }

    @try {
        [flightDetailsTest_Flightdetails_v1DB synchronize];

        NSLog(@"inside synchronise");
    }

    @catch (NSException *exception) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Synchronisation error"

message:@"Error-Please make sure that u r connected"
delegate:self
cancelButtonTitle:@"OK"
otherButtonTitles:nil ];

        [alert show];
        [alert release];
    }

    SUPObjectList *list =[flightDetailsSessionPersonalization findAll];

    NSLog(@"inside the list");

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"number of leaves" message:[NSString stringWithFormat:@"%d lines syncd",[list length]] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];

    [alert show];

    [alert release];

    NSDateFormatter *temp = [[NSDateFormatter alloc] init];

    [temp setDateFormat:@"dd.mm.yyyy"];

    NSDate *date = [temp dateFromString:flightDate.text];

flightDetailsPersonalizationParameters *pp = [flightDetailsTest_Flightdetails_v1DB getPersonalizationParameters];

    [pp setPK_AIRLINEID:airlineID.text] ;

    [pp setPK_CONNECTIONID:connID.text];

    [pp setPK_FLIGHTDATE:date];

    [pp save];

    while([flightDetailsTest_Flightdetails_v1DB hasPendingOperations]){

        [NSThread sleepForTimeInterval:2];

    }

    [flightDetailsTest_Flightdetails_v1DB beginSynchronize];
 SUPObjectList *details = [flightDetailsflightdetails findAll];

    NSLog(@"flights on date %d",[details length]);

} 
```

它显示状态为 103 .. 即已连接，但未检索数据.. 控制台中的状态已附加到此处。请检查这一点并为我们找到解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:49:31.803

If you get a 103 and the sync completes correctly, the problem lies in the data source you are using behind the SUP server.

Use the Sybase Mobile Workspace to preview your MBOs (MBO properties -> preview), and if it does indeed return some records, you need to check the Synchronization section of your MBO properties for the "customized download data" section, which is probably filtering your results.

# java - 一个应用程序中可以有多个相同（开放）JPA 实体的实例吗？Equals 不适用于实体实例？

> ID：13559623
> 
> 赞同：0
> 
> 时间：2012-11-26T06:20:28.530
> 
> 标签：java, spring, jpa, entity, openjpa

我们的堆栈：Tomcat 7、Spring 3.1.1、OpenJPA 2.2.0

我遇到了一个问题，根源是一个比较：

```
server1.equals(server2); 
```

server1 和 server2 都是实体“服务器”的实例：

```
@Entity
public class Server implements Serializable {
   private long id;
   // getters and setters
} 
```

我不得不将比较更改为：

```
server1.getId().equals(server2.getId()); 
```

那个有效，上面那个返回false，即使服务器的id是一样的。我还检查了两个实例的 hashCodes，这两个实例确实有不同的 hashCode。

为什么我们的应用程序中有两个相同实体的实例？

怎么会这样？数据库中只有一个“服务器”实体。

谢谢！
塞巴斯蒂安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T06:26:09.803

例如，如果您使用不同的实体管理器或不同的事务加载它们，将会有不同的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:26:53.770

首先想到的是您的应用程序中有 2 个（至少）类加载器。一个加载实体，然后创建实例 server1，第二个加载 server2。通常这些由您的技术堆栈在内部管理

这在 java 中通常是正确的，而不仅仅是在您的特定应用程序中。现在棘手的部分是这些类加载器是从哪里来的。

首先，为了确保是这种情况，您可以尝试打印出类加载器，如下所示：

```
print before comparison: server1.getClass().getClassLoader()
print before comparison: server2.getClass().getClassLoader() 
```

这可以让您了解那里发生了什么。例如，它可能来自不同的部署单元。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T02:51:25.467

如果它是不同的会话或外部会话，您将拥有多个Entiry 实例。在您的情况下，您正在进行比较，`ClientListHashMapStore`因为这不是交易的一部分。这意味着没有会话，您将拥有多个实体实例。理想情况下`equals`，如果需要比较两个实例，则应覆盖方法。

# actionscript-3 - Flex 3 http 字段无法将编码设置为 utf-8

> ID：13559625
> 
> 赞同：0
> 
> 时间：2012-11-26T06:20:42.570
> 
> 标签：actionscript-3, apache-flex, flex3

我正在使用 HTTPService 发送电子邮件。我在我的应用程序中使用 UTF-8。当我发送电子邮件时，ü 不正确。

我尝试将 service.headers 设置为：

```
service.headers = { 'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8' };
service.url = serviceRequest;
service.useProxy = false;
service.method = "POST";
var token:AsyncToken =service.send(); 
```

我没有其他线索。

希望有人有答案，谢谢，戴夫

# objective-c - 在目标 c 中使用 va_start 错误：“va_start”在具有固定参数的函数中使用

> ID：13559630
> 
> 赞同：1
> 
> 时间：2012-11-26T06:21:13.670
> 
> 标签：objective-c, variadic-functions

我已经定义了一个可变参数方法

```
-(void)generateUserGrantDialog:(const char*)msg 
                         Title:(const char*)title 
                           Tag:(int)tag 
                       MsgData:(const char*)mData 
                        MsgLen:(int)mLen 
             CancelButtonTitle:(NSString*)cancelBtnTitle 
             OtherButtonTitles:(NSString *)firstTitle, ... 
                                           NS_REQUIRES_NIL_TERMINATION; 
```

现在我必须遍历 va_list ，所以我编写了代码：

```
va_list args;
va_start(args, firstTitle);
for (NSString *arg = firstTitle; arg != nil; arg = va_arg(args, NSString*))
{   
     // code
}
va_end(args); 
```

当我构建代码时出现错误

编译错误：在具有固定参数的函数中使用了“va_start”

谁能帮我摆脱它..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:24:21.750

将您的代码更改为：

```
va_list args;
va_start(args, firstTitle);
for (; firstTitle != nil; firstTitle = va_arg(args, NSString*)) {   
    // code (using each firstTitle)
}
va_end(args); 
```

# drupal-7 - 将 jCycle 安装到 Drupal 7

> ID：13559637
> 
> 赞同：0
> 
> 时间：2012-11-26T06:22:07.140
> 
> 标签：drupal-7, slideshow, libraries, jcycle

我正在尝试按照本指南 - [http://drupalquests.blogspot.com/2012/01/drupal-7-create-slideshow-inside.html](http://drupalquests.blogspot.com/2012/01/drupal-7-create-slideshow-inside.html) - 在我的 drupal 网站上制作幻灯片。它要求提供 jCycle，在安装库并将所需文件放入 sites/all/libraries/jquery.cycle 之后，我仍然收到一条通知，说需要 jCycle。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:39:50.707

工作正常：sites/all/libraries/jquery.cycle/jquery.cycle.all.js

清除缓存

# objective-c - UILabel中的换行符？

> ID：13559642
> 
> 赞同：4
> 
> 时间：2012-11-26T06:22:32.417
> 
> 标签：objective-c, uikit, newline

我有这个代码：

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(25, 25, 275, 40)];
label.text = @"I am learning Objective-C for the\n very first time!";
[self.view addSubview:label]; 
```

但由于某种原因，它没有插入新行......我如何在一个换行符中插入一个`UILabel`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T06:26:05.357

请检查

```
 UILabel *yourLabel;
   yourLabel.numberoflines = 0 
```

或不..

如果不是这样，请将其设置为零

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T06:38:35.660

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(25, 25, 275, 40)];
label.text = @"I am learning Objective-C for the\n very first time!";
label.lineBreakMode = UILineBreakModeWordWrap;
label.numberOfLines = 0;

[self.view addSubview:label];` 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-20T15:17:08.740

我尝试了各种不同的解决方案来在我的 UILabel 中换行。

\r 会成功的！例如：

```
NSString *detailInfo=[NSString stringWithFormat:@"Address:\r%@", self.aAddress.text]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-18T10:16:32.817

与@JanB 的解决方案相比，另一种解决方案是，您可以在格式化字符串中插入一个`NSString`对象：`@"\n"`

在您的示例中：

`label.text = [NSString stringWithFormat:@"I am learning Objective-C for the%@ very first time!", @"\n"];`

让我知道是否有问题:)

# vb6 - 为什么调用 SetFocus 时 GotFocus 不运行？

> ID：13559650
> 
> 赞同：0
> 
> 时间：2012-11-26T06:23:15.470
> 
> 标签：vb6, textbox, setfocus

`TextBox1.GotFocus`我在事件函数的第一行有一个断点。

当我`TextBox1.SetFocus`在其他地方打电话时，`GotFocus`断点永远不会被击中。为什么？

调用函数中的代码： `Text1.SetFocus`

```
Private Sub Text1_GotFocus()

   // code here

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:34:21.373

一个小程序来说明我的意思。

运行程序并单击表单（标题仍为 1），单击 Text2 使其成为焦点，然后再次单击表单（标题更改为 2）

然后在 Form_Click 中未注释 Text2.SetFocus 时执行相同操作

这是代码：

```
'1 form with
'    textbox : name=Text1    tabindex=0
'    textbox : name=Text2    tabindex=1
Option Explicit

Private Sub Form_Click()
  'uncomment the following line to make it work
'  Text2.SetFocus
  'with just the following call this wont work
  Text1.SetFocus
End Sub

Private Sub Text1_GotFocus()
  'increase the number in the form caption to show text1 got the focus again
  Caption = CStr(Val(Caption) + 1)
End Sub 
```

当程序启动时 Text1 获得焦点（tabindex = 0），因此当您单击表单时表单标题变为 1 没有任何变化，因为 Text1 已经具有焦点并且当您第一次单击 Text2 时不会“获取”它然后单击表单标题增加的表单

通过使用 Text2.SetFocus 取消注释该行，您可以让程序始终将焦点移到 Text2（如果它不存在），然后再将焦点移到 Text1，因此 Text1 将始终“重新获得”焦点

不过要小心！因为首先将焦点放在另一个控件上可能会产生一些您可能不想要的新事件！

# django - 如何在 django 中向客户端发送可下载文件而不在服务器上保存文件

> ID：13559658
> 
> 赞同：0
> 
> 时间：2012-11-26T06:24:03.293
> 
> 标签：django, file, django-views, download

我正在设计一个网站。我有一个带有复选框的表格。我想根据用户选中的复选框，我向用户发送文件以下载它。首先我将文件保存在服务器上，但现在我意识到这不是一个好方法。因为可能有很多人同时请求文件，所以服务器上会存储很多文件。我需要一种将可下载文件发送到客户端而不存储在服务器上的方法。你能指导我怎么可能吗？（为了使其可下载，我将文件存储在媒体文件夹中，并将作为可下载文件的 url 的数据发送到模板中的 jquery 函数）这是我以前的代码：

```
def dlFunc(request):
    if request.is_ajax():
        authObject = socAuthenticationBackend()
        if request.method == 'POST':
            form = backupForm(request.POST)
            if form.is_valid(): 
                //do form processing               
                //receives file from server with web service 
                downloadFileDecoded = base64.b64decode(downloadFile)
                randomNum = random.random()
                strRandomNum = str(randomNum)
                randPart = strRandomNum.split('.')
                try:
                   f = open("media/downloadFiles/backup"+randPart[1]+".tar.gz","w")
                   try:
                       f.write(downloadFileDecoded)
                       data = "/media/downloadFiles/backup"+randPart[1]+".tar.gz"          
                   finally:
                       f.close()
                except IOError:
                     data = "error"
                return HttpResponse(data)
        else:
            form = backupForm()                     
        return render_to_response('backup.html', RequestContext(request, { 'form':form}))       
    else:
        return render_to_response("ajax.html", {}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:58:36.840

您可以使用 Amazon S3 并让您的用户直接将他们的文件上传到 S3。

[https://stackoverflow.com/a/848251/44816](https://stackoverflow.com/a/848251/44816)

然后您提供 S3 url 以供下载。S3 允许您使用 cname，因此 S3 url 甚至可以在您的域下（例如 files.example.com）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:41:50.053

如果客户想下载，他只能下载服务器上的文件。否则你必须是服务器。

# vim - Rails.vim alternate file issues - does not detect RSpec

> ID：13559668
> 
> 赞同：0
> 
> 时间：2012-11-26T06:25:12.143
> 
> 标签：vim, macvim, rails.vim

I can't seem to get Rails.vim to detect that I don't use `test/unit`, whenever I go into `app/models/model.rb` and issue the `:A` command it I get an error:

> E345: Can't find file "test/unit/model_test.rb" in path

There's no `test/` directory in my tree,

```
-> ls
Gemfile       README.rdoc  app          config.ru    
doc           log          script       tmp
Gemfile.lock  Rakefile     config       db           
lib           public       spec         vendor 
```

Thanks in advance for any clues.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:31:36.923

Took me five minutes after asking the question. The problem was that `spec/models/item_spec.rb` didn't exist either (I thought it did), and Rails.vim/MacVim complained about the `test/unit` file as that is the default one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T11:20:24.633

You could also use the plugin [vim-twitch](https://github.com/bodymindarts/vim-twitch) to address the issue of switching between test and production files.

# php - 我如何写不大于查询

> ID：13559673
> 
> 赞同：2
> 
> 时间：2012-11-26T06:25:23.927
> 
> 标签：php, mysql

我在任何地方都找不到真正的答案，所以我在问。

这是我的查询

```
("SELECT * FROM messages WHERE message_date < ? AND message_date //not greater than// ? AND to_user = ? OR from_user = ? ORDER BY message_date DESC") 
```

我不知道如何检查日期是否大于定义的日期

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:29:35.550

有两种写法。

一种选择是简单地使用`<=`，因为“不大于”等同于“小于或等于”。

另一种是使用`NOT`修饰符，例如`... AND NOT (message_date > ?)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:31:25.693

“不大于”与“小于或等于”是一样的，所以：

```
SELECT * FROM messages
WHERE message_date < ? AND message_date <= ? AND to_user = ? OR from_user = ?
ORDER BY message_date DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:29:30.937

你只需要检查它是否更少，但如果你想说不是，你可以使用 not！

```
not(message_date > ?) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T06:29:48.250

也许你想要这样，

```
SELECT * 
FROM messages 
WHERE message_date <= ?  AND
      ? IN (to_user, from_user)
ORDER BY message_date DESC 
```

*当你说不大于时，它只是意味着小于或等于*

# visual-c++ - 使用 CMFCStatusBar 设置平滑进度条

> ID：13559683
> 
> 赞同：1
> 
> 时间：2012-11-26T06:26:10.807
> 
> 标签：visual-c++, mfc

我正在使用 CMFCStatusBar 来处理应用程序状态栏中的几个不同的窗格，它工作正常。但是，我似乎无法在其中一个窗格中设置平滑的进度条。该应用程序是 SDI，代码如下所示：

1.  在 CMainFrame::OnCreate() 中，使用所有默认值创建状态栏 - m_wndStatusBar.Create(this)，
2.  然后我使用 m_wndStatusBar.EnablePaneProgressBar(3) 允许在窗格 3 中创建进度条
3.  然后使用 m_wndStatusBar.SetPaneStyle(3, PBS_SMOOTH) 设置平滑的进度条，但不影响它并且进度条仍然带有块！

我错过了什么？有什么帮助吗？

# c# - JQuery - 按钮单击未触发

> ID：13559691
> 
> 赞同：0
> 
> 时间：2012-11-26T06:27:02.147
> 
> 标签：c#, asp.net, jquery-ui, jquery

我们的页面中有一个搜索文本框和搜索按钮。当用户输入搜索字符串并按回车键时，我们需要触发服务器端按钮单击事件。代码在用户控件（ascx）中。代码是……

ascx

```
<td class="search_txt_box">
  <asp:TextBox ID="txtSearchBox" class="frmdefault" runat="server"
               MaxLength="100" Width="300"></asp:TextBox>
</td>
<td class="new_search_btn">
  <asp:LinkButton ID="btnSearchHelp" class="ovalbutton" runat="server"
            OnClick="btnSearchHelp_Click">
    <span id="spanBtnTxt" runat="server" class="btn_arrow_space"></span>
  </asp:LinkButton>
</td> 
```

jQuery

```
 (function ($) {
     $(function () {
          $('input[id$="txtSearchBox"]').keypress(function (e) {
        var keyCode;

        if (window.event) keyCode = window.event.keyCode;
        else if (e) keyCode = e.which;
        else return true;

        if (keyCode == 13) {
            //alert("Out - Clicked");
            //alert($('[id*="btnSearchHelp"]').attr('id'));

            $('[id*="btnSearchHelp"]').click();
            return false;
            //$('[id*="btnSearchHelp"]').on('click', 'a', function (e) {
            //    alert('this is the click');
            //    e.preventDefault();
            //});
        }
    });
     });
  } (jQuery)); 
```

ascx.cs

```
protected void btnSearchHelp_Click(object sender, EventArgs e)
{
   //handle search click
} 
```

我们尝试在论坛中寻找答案并尝试了一些，但都没有奏效。显示“Out-Clicked”警报和带有按钮动态 id 的下一个警报，但之后没有任何反应。我们编写了一个内联 Jquery 函数，但即使这样也没有被调用。谁能让我们知道我们在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:27:28.417

问题是因为使用链接按钮。

当链接按钮被渲染时，它会像

```
<a id="btnSearchHelp" class="ovalbutton" href="javascript:__doPostBack('btnSearchHelp','')"><span id="spanBtnTxt"> 
```

**来自 JS 的 Click 事件将触发onclick**属性中定义的处理程序。在您的情况下，定义了 href 属性并且不会触发 href 属性。

选项：

1）您可以使用 asp:button 代替 asp:link 按钮。

2）使用下面的代码而不是你的 $('[id*="btnSearchHelp"]').click();

```
var submitButton = $('[id*="btnSearchHelp"]');
var events = submitButton.data('events');
                if (submitButton.get(0).onclick) {
                    eval(submitButton.get(0).onclick());
                }
                if (events != null && events.click != null && events.click.length > 0) {
                    $(submitButton).trigger(events.click);
                    $.each(events.click, function (index, evt) {
                        evt.handler();
                    });
                }

                if ($.trim(submitButton.attr("href")) != "") {
                    if (submitButton.attr("href").toString().toLowerCase().indexOf("javascript:") != -1) {
                        eval(submitButton.attr("href"));
                    }
                } 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:32:31.410

如果更改标记不是不可能的，您可以将搜索输入包装在表单元素中并在该表单上使用[submit()](http://api.jquery.com/submit/)事件。

这样，点击 Return 和点击“Search”按钮都会触发该事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:21:42.510

我认为你的问题在这里：

```
(function ($) { 

      //you are trying to capture domready function in this
      //This is actually a way to author a jQuery Plugin

} (jQuery));
      //  ^-------------------------
      // although you have put one extra paranthesis ")" at the closing
      // this doesn't matter this won't work if you remove it though 
```

`If you are using different js libraries`你`facing issues of conflict`在图书馆里，那么你必须`save your '$' sign`像上面那样在这个闭包中。虽然相同的`you can do with your doc ready`功能`this way`：

```
jQuery(function($){

   // I just used a simple alert function to test
   // You can do your stuff here.
   alert('123');
}); 
```

在这里你附上你的`$`标志。这样您就可以不与其他库发生冲突。

你可以在这里找到更多信息：http: [//docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

# mysql - mysql如何查询不同表中的帖子列表及其多个标签

> ID：13559694
> 
> 赞同：0
> 
> 时间：2012-11-26T06:27:28.870
> 
> 标签：mysql, tags

**我所拥有的是：**

1.  我有一个表格，如图像、标签、标签名称和下载

2.  其中图像可以有多个标签并位于单独的表格中

3.  下载表将维护图像的总下载量

*现在我希望你能理解我的表定义的目的*

* * *

**我需要的是：**

1.  我需要在列出所有图像时显示标签。例如，我在一页中显示 10 张图片，在每张图片下方我想显示他们的所有标签。（*假设这在一个查询结果中是不可能的。如果是这样，那么其他方法会很好*）

2.  当我将单个图像显示为单独的页面（例如博客文章页面）时，我希望所有标签都像在 stackoverflow 中一样显示。

* * *

**表结构是：**

***图像表***

图像ID | 姓名 |

1 | 样品1

2 | 样品2

3 | 样品3

4 | 样品3

...................................

***标记名表***

标记 | 姓名

1 | 标记名1

2 | 标记名2

3 | 标记名3

4 | 标记名3

...................................

***标签表***

编号 | 图像ID | 标记

1 | 1 | 1

2 | 1 | 2

3 | 1 | 3

4 | 2 | 1

5 | 3 | 4

...................................

***下载表***

编号 | 图像ID | 下载

1 | 1 | 5

1 | 2 | 3

...................................

注意：...其他图像在此表中没有参考，但图像肯定有至少一个标签

在这里，我对下载表有一个性能问题。是通过在下载表中仅包含 id 和 imageid 来为每个下载添加一行，还是拥有另一个字段并像上面的表示例中那样增加它 - 也许我应该将此作为一个单独的问题提出，如果是这样，请忽略这一段.

* * *

**因此，如果可能的话，请建议/建议我，否则请提出替代方案。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:35:02.207

```
select image_name, GRP_CONCAT(tag_name)
from images, tags, tagnames
where tags.image_id = images.image_id
and tags.tag_id = tagnames.tag_id 
group by image_name 
```

[http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

查询应该返回图像名称，以及它在逗号分隔字符串中的所有标签。请参考 Group_CONCAT() 函数文档，并确认语法。您还可以更改分隔符。

# audio - 录音机黑莓错误

> ID：13559695
> 
> 赞同：0
> 
> 时间：2012-11-26T06:27:47.373
> 
> 标签：audio, blackberry, recorder

我正在开发一个用于将音频 .amr 文件发送到服务器的应用程序。但是服务器给了我以下信息：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html> 
 <head>
  <meta http-equiv="refresh" content="0;url=http://airtelforum.com/main?InterceptSource=0&ClientLocation=in&ParticipantID=kk6rp2jf3dkl4v52nla5u7676ej8r6uf&FailureMode=1&SearchQuery=&FailedURI=http%3A%2F%2Fwww.myserver.com%2Fbb%2Fupload3.php%3Fim%3D123456783648138&AddInType=4&Version=2.1.8-1.90base&Referer=&Implementation=0"/>
  <script type="text/javascript">
   url="http://airtelforum.com/main?InterceptSource=0&ClientLocation=in&ParticipantID=kk6rp2jf3dkl4v52nla5u7676ej8r6uf&FailureMode=1&SearchQuery=&FailedURI=http%3A%2F%2Fwww.myserver.com%2Fbb%2Fupload3.php%3Fim%3D123456783648138&AddInType=4&Version=2.1.8-1.90base&Referer=&Implementation=0";
   if(top.location!=location){
    var w=window,d=document,e=d.documentElement,b=d.body,x=w.innerWidth||e.clientWidth||b.clientWidth,y=w.innerHeight||e.clientHeight||b.clientHeight;url+="&w="+x+"&h="+y;
   }
   window.location.replace(url);   
  </script>
 </head>
 <body>
 </body>
</html> 
```

任何人都可以找出问题所在吗？提前致谢。

# python - 如何使用while循环遍历文本文件？

> ID：13559696
> 
> 赞同：0
> 
> 时间：2012-11-26T06:27:48.450
> 
> 标签：python

如果我有一个文本文件，例如：

```
 StudentA:
      10
      20
      30
      40

      StudentB:
      60
      70 
      80
      90 
```

我想做一个功能：

```
 def read_file(file,student):
        file=file.open('file.txt','r') 
```

当我调用它时，

```
 read_file(file,StudentA) 
```

它将显示如下列表：

```
 [10,20,30,40] 
```

如何使用 while 循环来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:36:10.037

我不知道你为什么要阅读 using `while`，`for-loop`会很好。但这是一种读取文件的pythonic方法。

```
with open(...) as f:
    for line in f:
        <do something with line> 
```

该`with`语句处理打开和关闭文件，包括是否在内部块中引发异常。将`for line in f`文件对象`f`视为可迭代对象，它会自动使用缓冲 IO 和内存管理，因此您不必担心大文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:39:10.823

请记住，StackOverflow 不是代码编写服务。通常，在您尝试编写自己的答案之前，我不会做这样的事情，但是今天有人帮了我一个忙，本着这种精神，我正在传递善意。

```
import re

def read_file(filename, student):
    with open(filename, 'r') as thefile:
        lines = [x.strip().upper() for x in thefile.readlines()]
    if student[-1] != ':':
        student += ':'
    current_line = lines.index(student.upper()) + 1
    output = []
    while current_line < len(lines) and re.search('^\d+$', lines[current_line]):
        output.append(int(lines[current_line]))
        current_line += 1
    return output 
```

# c++ - 了解 Negamax 的约束

> ID：13559698
> 
> 赞同：0
> 
> 时间：2012-11-26T06:27:57.950
> 
> 标签：c++, artificial-intelligence, minimax

这段代码是为计算 tictactoe 游戏中某个位置的 bestMove 而构建的。我几乎得到了代码的每一部分，除了 for 循环中的条件，它表示 minRating != LOSING_POSITION。此代码来自给定伪代码的实现。

```
moveT FindBestMove(stateT state, int depth, int & rating) {
for (*each possible move or until you find a forced win*) {
 *Make the move.
 Evaluate the resulting position, adding one to the depth indicator.
 Keep track of the minimum rating so far, along with the corresponding move.
 Retract the move to restore the original state.*
 }
*Store the move rating into the reference parameter.
Return the best move.*
} 
```

我无法将 for 循环的第二个条件与给定的代码匹配，*直到你找到一个强制获胜*。我找不到这个事实和那个 minRating != LOSING_POSITION 之间的相似之处

```
moveT FindBestMove(stateT state, int depth, int & rating) {
Vector<moveT> moveList;
GenerateMoveList(state, moveList);
int nMoves = moveList.size();
if (nMoves == 0) Error("No moves available");
moveT bestMove;

int minRating = WINNING_POSITION + 1;

for (int i = 0; i < nMoves && minRating != LOSING_POSITION; i++) {

 moveT move = moveList[i];
 MakeMove(state, move);
 int curRating = EvaluatePosition(state, depth + 1);

 if (curRating < minRating) {
  bestMove = move;
  minRating = curRating;
  }

 RetractMove(state, move);
 }
rating = -minRating;
return bestMove;

}

int EvaluatePosition(stateT state, int depth) {
int rating;

if (GameIsOver(state) || depth >= MAX_DEPTH) {
 return EvaluateStaticPosition(state);
}

FindBestMove(state, depth, rating);
return rating;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:44:24.853

您的程序从分配`WINNING_POSITION`（我想为您的对手获胜）开始`minRating`，然后循环移动，试图找到具有最大伤害的移动，最小化`minRating`.

当`EvaluatePosition`返回`LOSING_POSITION`比意味着这个动作在任何情况下都会导致你的对手失败，因此，可以终止搜索并且这个动作被认为是最好的动作。

如果没有明显`LOSING_POSITIONS`的 ，那么您的算法会根据静态评估选择“最佳”移动。

# c# - 直到小数点后 2 位的数值的正则表达式是什么？

> ID：13559699
> 
> 赞同：0
> 
> 时间：2012-11-26T06:28:06.467
> 
> 标签：c#, .net, regex

我是正则表达式的新手。
我需要一个正则表达式 (C#) 来匹配小数点前最多 4 位和小数位后最多 2 位的数值。

例子

它应该与以下匹配

```
 1111   
  1211.12  
  1  
  0  
  0.00  
  1.1 
```

它不应该匹配以下

```
 11.111  
  11111  
  11111.1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T06:31:39.553

您可以使用一个简单的数字量词，并使用一个组来测试数字的小数部分。

```
^\d{1,4}(\.\d{1,2})?$ 
```

# silverlight - Windows phone 7 中的 DateTime.Now 问题

> ID：13559701
> 
> 赞同：1
> 
> 时间：2012-11-26T06:28:13.170
> 
> 标签：silverlight, windows-phone-7, xaml, windows-phone-7.1, wp7test

我正在开发一个 Windows Phone 7 应用程序。在我的应用程序中，用户可以进行购买。购买后，我们将购买详细信息发送到我们的数据库服务器以供将来参考。购买详情包括购买日期和时间。现在正在使用 DateTime.Now 在手机中获取当前购买时间和日期。但我的疑问是，如果购买时手机的日期和时间有误，那么我会得到错误的详细信息。那么我该如何处理呢？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T06:23:11.887

通过从服务器端获取当前日期解决了这个问题。

# php - 获取时区 GMT 时间？

> ID：13559703
> 
> 赞同：1
> 
> 时间：2012-11-26T06:28:20.133
> 
> 标签：php, mysql, date

我一直在使用 DATETIME 列将用户消息存储在我的数据库中。我需要向不同国家的用户显示消息的发送时间，因为数据库使用 GMT+0 我需要将检索到的时间调整为用户的时区。

当前用户的时区已使用 date_default_timezone_set() 设置我如何获得它的 GMT +- 时间？

编辑

遵循@doniyor 的想法，这就是我所做的：

```
 // Get server hour
$localtime = localtime();
$serverHour = $localtime[2]; # The server's timezone is used by default before defining one

// Set timezone
date_default_timezone_set('user's timezone goes here');

// Get user hour
$localtime = localtime(); # Now localtime gives the user's time since timezone has been changed
$userHour = $localtime[2];
$timeAdjustment =  $userHour - $serverHour < -12 ? 24 + $userHour - $serverHour : $userHour - $serverHour; // Calculate hours to add to rows got from db to match user's time

// Example of a row adjusted to match user's time
    $adjustTime =  ($userHour - $serverHour < -12 ? 24 + $userHour - $serverHour : ($userHour - $serverHour > 12 ? $userHour - $serverHour - 24 : $userHour - $serverHour)*60*60; // strtotime is in seconds so $timeAdjustment needs *60*60 to convert to seconds too 
```

我已经在 PHP5+Apache 上对此进行了测试，但结果可能因服务器配置而异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:03:41.907

> 当前用户的时区已使用 date_default_timezone_set() 设置我如何获得它的 GMT +- 时间？

你不能。由于夏令时的变幻莫测，偏移量不是恒定的——它可以根据日期而改变。

使用[`gmmktime()`](http://php.net/manual/en/function.gmmktime.php)（连同一些字符串解析）将 GMT 日期/时间转换为 UNIX 时间戳，然后用于[`date()`](http://php.net/manual/en/function.date.php)在当前时区显示该时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:34:00.327

如果错了，请不要投票:)

如果您在客户端浏览器中获取时区时间并检查差异，如果存在差异，则根据客户端的位置添加或减去此差异值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T07:07:44.390

只需将日期值的值作为 UNIX 时间戳传递给 JavaScript。例如，使用 AJAX：

```
echo json_encode(array(
    'time' => strtotime($row['msg_time']),
    'msg' => 'hello world',
)); 
```

然后，使用`Date()`将其转换为用户的本地时间：

```
var msgTime = new Date(data.time * 1000); 
```

# cuda - 在 GTX 560 Ti 上 atomicAdd() 调用安全吗？

> ID：13559705
> 
> 赞同：3
> 
> 时间：2012-11-26T06:28:41.457
> 
> 标签：cuda

我正在写关于在我的 Nvidia GTX 560Ti 卡上使用 CUDA 的**atomicAdd()时发生的明显损坏。**在开发一些代码期间，我遇到了 atomicAdd 的问题，它似乎正在破坏内存。我设计了一个测试来查看是否确实如此，以及该行为是否可以在我的应用程序条件之外重复。我编写了一个测试程序，它使用 atomicAdd 增加缓冲区中稀疏数量的位置。在我的 560Ti 上，测试表明 atomicAdd**会破坏内存中的随机位**。特别是，少数（看似）随机放置在非故意访问或修改位置的位被翻转。内核代码很简单，它有一个 atomicAdd。测试代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/time.h>

#define ANSI_RED "\e[0;41m\e[41;37m"
#define ANSI_BLACK "\e[0;30m"

__global__ void kernel( unsigned int *a, unsigned int *map, int M, int N )
{
    // Add to buffer.
    atomicAdd( a + map[ blockIdx.x * N + threadIdx.x ], 1 );
}

template < class T > void swap( T &a, T &b ) { T t; t = a; a = b; b = t; }

int main( void )
{
    // Chooses 560Ti on my machine
    cudaSetDevice( 1 );
    srand( time( 0 ) );
    unsigned int M = 1024, N = 256;
    unsigned int L = M * N, K = N;
    unsigned int *dev_buf, *dev_map;
    unsigned int *buf = new unsigned int[ L ];
    unsigned int *map = new unsigned int[ L ];
    unsigned int *indices = new unsigned int[ K ];
    bool *check = new bool[ L ];

    // Use buffer to indicate which spots in buffer should have valid values.
    for( int l = 0; l < L; l++ ) check[ l ] = false;

    // Generate K random indices into an L-sized buffer, init "check"
    for( int k = 0; k < K; k++ )
    {
        int i = rand( ) % L;
        while( check[ i ] )
            i = rand( ) % L;
        indices[ k ] = i;
        check[ i ] = true;
    }

    // Generate a random M (blocks) x N (threads) array "map" of indices that contains
    //   offsets into "buf" such that there are at most K locations in "buf" that
    //   should be written to.
    for( int m = 0; m < M; m++ )
        for( int n = 0; n < N; n++ ) // Init.
            map[ m * N + n ] = indices[ n ];
    for( int i = 0; i < L; i++ ) // Shuffle.
        swap( map[ i ], map[ i + rand( ) % ( L - i ) ] );

    // Allocate and initialize device memory.
    cudaMalloc( &dev_buf, L * sizeof( unsigned int ) );
    cudaMalloc( &dev_map, N * M * sizeof( unsigned int ) );
    cudaMemset( dev_buf, 0, L * sizeof( unsigned int ) );
    cudaMemcpy( dev_map, map, L * sizeof( unsigned int ), cudaMemcpyHostToDevice );

    kernel<<< M, N >>>( dev_buf, dev_map, M, N );

    // Copy back to host.
    cudaMemcpy( buf, dev_buf, L * sizeof( unsigned int ), cudaMemcpyDeviceToHost );

    // Print non-zero values.  Highlight abnormalities.
    int j = 0;
    for( int i = 0; i < L; i++ )
    {
        if( buf[ i ] != 0 )
        {
            if( ( buf[ i ] == M ) || ( buf[ i ] == 2 * M ) )
                printf( "%d @ %d [%s]\t",
                        buf[ i ], i, check[ i ] ? "true" : "false" );
            else
                printf( ANSI_RED "%d @ %d [%s]\t" ANSI_BLACK,
                        buf[ i ], i, check[ i ] ? "true" : "false" );
            j++;
        }
    }
    printf( "\nj = %d\n", j );
} 
```

编译：

```
nvcc test_atomicadd_bug.cu -o test_atomicadd_bug -arch sm_21 
```

所有内核调用应该做的（总体上）是将所有 K 个位置递增 M 次，从而在每个位置产生 K * M = 1024 个结果。因此，在运行代码时，它应该打印出非零值 (1024) 及其位置。然而，在下面的示例输出中，除了 1024 的 255 个实例之外，它反而打印出一个 1023 和一个 1。在其他运行中，结果是不同的。即使 srand( 0 ) 替换了按时间播种的 RNG，每次运行的结果也不同。我在 GTX 560Ti 和 Tesla C2070 上都试过这个。特斯拉没有表现出任何腐败。我无法访问另一个 560Ti。

```
1024 @ 1228 [true]    1024 @ 1271 [true]    1024 @ 1842 [true]    1024 @ 2480 [true]    1024 @ 3012 [true]
1024 @ 3802 [true]    1024 @ 4649 [true]    1024 @ 5636 [true]    1024 @ 6988 [true]    1024 @ 9400 [true]
1024 @ 10912 [true]    1024 @ 10930 [true]    1024 @ 11550 [true]    1024 @ 11888 [true]    1024 @ 12047 [true]
1024 @ 12837 [true]    1024 @ 12868 [true]    1024 @ 12991 [true]    1024 @ 16294 [true]    1024 @ 16690 [true]
1024 @ 17396 [true]    1024 @ 17529 [true]    1024 @ 19857 [true]    1024 @ 20926 [true]    1024 @ 22189 [true]
1024 @ 22391 [true]    1024 @ 22613 [true]    1024 @ 22851 [true]    1024 @ 23562 [true]    1024 @ 23955 [true]
1024 @ 24598 [true]    1024 @ 26058 [true]    1024 @ 26441 [true]    1024 @ 26962 [true]    1024 @ 27141 [true]
1024 @ 28101 [true]    1024 @ 28332 [true]    1024 @ 29485 [true]    1024 @ 29487 [true]    1024 @ 29942 [true]
1024 @ 31213 [true]    1024 @ 31965 [true]    1024 @ 35774 [true]    1024 @ 39342 [true]    1024 @ 39883 [true]
1024 @ 39960 [true]    1024 @ 40252 [true]    1024 @ 41435 [true]    1024 @ 42975 [true]    1024 @ 43336 [true]
1024 @ 44527 [true]    1024 @ 44657 [true]    1 @ 45494 [false]    1024 @ 46940 [true]    1024 @ 46983 [true]
1024 @ 48660 [true]    1024 @ 49034 [true]    1024 @ 49420 [true]    1024 @ 49620 [true]    1024 @ 50813 [true]
1024 @ 53859 [true]    1024 @ 55527 [true]    1024 @ 56677 [true]    1024 @ 57048 [true]    1024 @ 57759 [true]
1024 @ 58505 [true]    1024 @ 59539 [true]    1024 @ 59856 [true]    1024 @ 60341 [true]    1024 @ 61556 [true]
1024 @ 61733 [true]    1023 @ 61878 [true]    1024 @ 62025 [true]    1024 @ 65333 [true]    1024 @ 66131 [true]
1024 @ 67196 [true]    1024 @ 69428 [true]    1024 @ 70555 [true]    1024 @ 73135 [true]    1024 @ 73696 [true]
1024 @ 76797 [true]    1024 @ 76947 [true]    1024 @ 79166 [true]    1024 @ 79301 [true]    1024 @ 80182 [true]
1024 @ 80348 [true]    1024 @ 80574 [true]    1024 @ 81386 [true]    1024 @ 84416 [true]    1024 @ 86472 [true]
1024 @ 88234 [true]    1024 @ 88622 [true]    1024 @ 89355 [true]    1024 @ 89571 [true]    1024 @ 90716 [true]
1024 @ 91386 [true]    1024 @ 94846 [true]    1024 @ 95779 [true]    1024 @ 99146 [true]    1024 @ 99569 [true]
1024 @ 100202 [true]    1024 @ 102972 [true]    1024 @ 103909 [true]    1024 @ 104373 [true]    1024 @ 107707 [true]
1024 @ 108543 [true]    1024 @ 108617 [true]    1024 @ 109212 [true]    1024 @ 109388 [true]    1024 @ 111836 [true]
1024 @ 113078 [true]    1024 @ 113343 [true]    1024 @ 114451 [true]    1024 @ 114849 [true]    1024 @ 115024 [true]
1024 @ 115338 [true]    1024 @ 116675 [true]    1024 @ 118624 [true]    1024 @ 119884 [true]    1024 @ 120807 [true]
1024 @ 121993 [true]    1024 @ 122050 [true]    1024 @ 124643 [true]    1024 @ 125161 [true]    1024 @ 125843 [true]
1024 @ 126890 [true]    1024 @ 127718 [true]    1024 @ 127810 [true]    1024 @ 129646 [true]    1024 @ 129907 [true]
1024 @ 132288 [true]    1024 @ 132706 [true]    1024 @ 135574 [true]    1024 @ 136913 [true]    1024 @ 137346 [true]
1024 @ 138326 [true]    1024 @ 138685 [true]    1024 @ 138939 [true]    1024 @ 140996 [true]    1024 @ 141304 [true]
1024 @ 143902 [true]    1024 @ 145723 [true]    1024 @ 146149 [true]    1024 @ 149696 [true]    1024 @ 149726 [true]
1024 @ 150294 [true]    1024 @ 152057 [true]    1024 @ 152198 [true]    1024 @ 152239 [true]    1024 @ 153002 [true]
1024 @ 153776 [true]    1024 @ 156081 [true]    1024 @ 156377 [true]    1024 @ 156654 [true]    1024 @ 158008 [true]
1024 @ 158677 [true]    1024 @ 159369 [true]    1024 @ 159996 [true]    1024 @ 160060 [true]    1024 @ 161456 [true]
1024 @ 161732 [true]    1024 @ 163269 [true]    1024 @ 163675 [true]    1024 @ 163684 [true]    1024 @ 164397 [true]
1024 @ 165077 [true]    1024 @ 166036 [true]    1024 @ 168301 [true]    1024 @ 168409 [true]    1024 @ 171499 [true]
1024 @ 171772 [true]    1024 @ 173353 [true]    1024 @ 175290 [true]    1024 @ 175573 [true]    1024 @ 177155 [true]
1024 @ 178142 [true]    1024 @ 178718 [true]    1024 @ 178822 [true]    1024 @ 179161 [true]    1024 @ 179654 [true]
1024 @ 180683 [true]    1024 @ 182432 [true]    1024 @ 183086 [true]    1024 @ 183695 [true]    1024 @ 184730 [true]
1024 @ 186884 [true]    1024 @ 187746 [true]    1024 @ 188603 [true]    1024 @ 188948 [true]    1024 @ 189124 [true]
1024 @ 190268 [true]    1024 @ 191208 [true]    1024 @ 192630 [true]    1024 @ 193617 [true]    1024 @ 195426 [true]
1024 @ 198352 [true]    1024 @ 201345 [true]    1024 @ 201416 [true]    1024 @ 203214 [true]    1024 @ 205418 [true]
1024 @ 207467 [true]    1024 @ 208763 [true]    1024 @ 208924 [true]    1024 @ 209269 [true]    1024 @ 210679 [true]
1024 @ 211622 [true]    1024 @ 212029 [true]    1024 @ 212135 [true]    1024 @ 213228 [true]    1024 @ 216151 [true]
1024 @ 216425 [true]    1024 @ 216432 [true]    1024 @ 218039 [true]    1024 @ 219445 [true]    1024 @ 219675 [true]
1024 @ 220504 [true]    1024 @ 220702 [true]    1024 @ 220716 [true]    1024 @ 222687 [true]    1024 @ 223582 [true]
1024 @ 223758 [true]    1024 @ 223917 [true]    1024 @ 224254 [true]    1024 @ 224825 [true]    1024 @ 224845 [true]
1024 @ 225372 [true]    1024 @ 226297 [true]    1024 @ 228158 [true]    1024 @ 228367 [true]    1024 @ 229494 [true]
1024 @ 229636 [true]    1024 @ 230722 [true]    1024 @ 232001 [true]    1024 @ 232693 [true]    1024 @ 234729 [true]
1024 @ 235132 [true]    1024 @ 242699 [true]    1024 @ 245103 [true]    1024 @ 245948 [true]    1024 @ 246903 [true]
1024 @ 247836 [true]    1024 @ 247871 [true]    1024 @ 248694 [true]    1024 @ 248801 [true]    1024 @ 250204 [true]
1024 @ 250899 [true]    1024 @ 250968 [true]    1024 @ 251738 [true]    1024 @ 251930 [true]    1024 @ 256221 [true]
1024 @ 258244 [true]    1024 @ 258908 [true]    1024 @ 259884 [true]    1024 @ 260318 [true]    1024 @ 260424 [true]
1024 @ 260884 [true]    1024 @ 260953 [true]
j = 257 
```

我的问题是：我使用 atomicAdd 的方式有问题吗？这会发生在其他 Nvidia GPU 上吗？其他560 Ti？可以想象我的卡有问题吗？atomicAdd 真的有可能在 560Ti 上不安全吗？

在此先感谢您的帮助，克里斯

**编辑：**我的卡一定是坏的。当我用常规添加操作替换 atomicAdd 时，此测试也失败了。（是的，这些值不再是恒定的，因为操作不是原子的，竞争条件等 - 然而，在它们应该为零的地方有非零值，不应该在这些内存位置执行任何操作。）它在重新启动时也仍然存在，我正在进入仅运行登录屏幕的重新启动系统（所以可能是 X，但没有 OpenGL？）。系统正在运行 Ubuntu 10.04 和 CUDA 4.0。GPU 是 GeForce GTX 560 Ti。 *有谁知道这是否是常见的故障模式？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:47:06.837

CentOS 6.3 CUDA 5.0 GeForce 560Ti - 输出中没有“错误”。

只有 Tesla 才能保证在 GPGPU 计算中正常工作。GeForce 卡 - 不是。这就是特斯拉如此昂贵的原因。

尝试升级 CUDA 工具包。它可能会解决问题......但我想这是你的硬件问题。

编辑：我注意到您安装了多个视频卡。你检查温度了吗？我的朋友遇到了一个奇怪来源的问题：一个 GPU 正在加热第二个 GPU 的 PCI 插槽（或类似的东西），而第二个卡产生了不好的结果。

# android - Android中的缩略图网格

> ID：13559708
> 
> 赞同：0
> 
> 时间：2012-11-26T06:29:30.150
> 
> 标签：android, json, gridview

我正在创建一个从 Flickr 读取 JSON 文件并获取图像集合的迷你项目。我想阅读这些图像并将它们放置在图像网格中。当用户在一张照片中单击/点击时，一个新的活动会全屏显示它。

作为奖励，我想要全屏活动上的共享按钮和主小部件上的加载小部件（同时从网络加载图像）。

我是 Android 的初学者，但现在我有一个 JSON 解析器正在工作，下一步我想做的是网格显示。所以我的问题是，有没有人在这里实现过类似的东西？我该如何做网格技巧？欢迎提出建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:39:18.880

几天前检查我的这个答案。它很长，所以我没有添加整个代码，而只是链接到它。

您将不得不调整一些东西以满足您的特定需求，但在那里，您将找到几乎满足您需求的整个解决方案。

[https://stackoverflow.com/a/13265776/450534](https://stackoverflow.com/a/13265776/450534)。

我使用[Fedor 的](https://stackoverflow.com/users/95313/fedor) [Lazy Loading](https://github.com/thest1/LazyList)，但请随意使用*Lazy Ninja*建议的[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# php - 需要验证mysql和PHP中空结果的编码语法

> ID：13559712
> 
> 赞同：2
> 
> 时间：2012-11-26T06:29:43.003
> 
> 标签：php, mysql

这是我遇到的一段代码，据我所知它应该可以工作，但好像 if 语句不存在。

$payloadObj->data 在调用中提供并包含用于识别的唯一编号

```
 $limit="";
        $order=" ORDER BY rmtID";
        $where=" WHERE udid = '".$data."'";
        $data=$payloadObj->data;
        $now = date("o-m-d H:i:s");
        $query00="SELECT DISTINCT udid FROM rmtCustomer".$where; 
        $result00 = mysql_query($query00)
            or die("Query failed -".$query00);
        //$items=mysql_num_rows($result00);
        if ($result00) {
            if (mysql_num_rows($result00) == 0) {
            //if(!$items){
                $query11="INSERT INTO rmtCustomer (rmtCustomerID, udid, date) VALUES ('', '".$data."', '".$now."')";
                $result11 = mysql_query($query11)
                    or die("Query failed -".$query11);  
                $query22="INSERT INTO rmtSales (rmtSalesID, udid, productCount, date) VALUES ('', '".$data."', '9', '".$now."')";
                $result22 = mysql_query($query22)
                    or die("Query failed -".$query22);  
            }
        }

        $query="SELECT rmtTitle as product FROM rmtData".$order.$limit;
        $result = mysql_query($query)
            or die("Query failed -".$query);        
        $rows=array();
        while($row = mysql_fetch_array($result, MYSQL_BOTH)) {
            $rows[] = $row;
        } 
```

我使用变量 $limit、$order 和 $where 来完成查询，因为我有几个变量，这使它更容易。它们已被检查出来，它们根本不是问题。

期望的影响是运行第一个查询以检查新客户，如果没有找到记录，这是一个新客户，然后我想在 if 语句中运行查询以将它们添加到客户表和销售表然后继续其余的查询。如果第一个结果中有记录，则客户存在，我想跳过插入查询并直接移动到其余查询。

此示例显示了到目前为止的一些尝试，注释掉的两行是我的第一次尝试，但得到了相同的结果。

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:39:58.940

一些东西：

1.  $data 在使用后（第 3 行）被初始化（第 4 行）。这不应该反过来吗？

2.  如果 udid 是主键或唯一索引，您可以简单地运行插入并捕获“重复”错误。这将提高您的性能，因为您不需要第一个“选择”查询。注意：这将增加下一个 udid，以防它是一个自动递增的字段，即使插入失败。

3.  你说“声明不存在”，我不太确定这是什么意思..

# facebook - Trigger.IO - 取消 Facebook UI 对话会触发成功回调

> ID：13559716
> 
> 赞同：0
> 
> 时间：2012-11-26T06:30:14.857
> 
> 标签：facebook, trigger.io

我正在使用 forge facebook api 打开提要对话框以将图像发布到用户墙上。如果用户单击“取消”而不是“共享”，则仍会触发成功回调。如果用户单击关闭 ( x ) 按钮，错误回调将正确触发。

```
 forge.facebook.ui(
          {
            method: 'feed',
            link: link,
            picture: model.get('file').url,
            name: name,
            caption: caption,
            description: 'Lorem Ipsum'
          },
          function(response) {

            // Called when user clicks cancel.

            forge.notification.create(
              'Great!',
              'Item has been posted to your wall',
              function() {

              },
              function(error) {
                forge.logging.error(JSON.stringify(error));
              }
            );

          },
          function (e) {
            // Called when user closes dialogue but not on cancel.
            forge.logging.info('facebook failed: ' + JSON.stringify(e));
          }
        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:12:52.227

我倾向于同意这是出乎意料的行为 - 但是它在几个 Facebook 提供的 SDK 中是一致的，并且已经有一段时间了，所以我们按原样通过了它。

如果用户点击`x`对话框左上角的 ，您的错误回调将被调用。如果用户取消对话框，您的成功回调将`{}`作为回调参数调用。

我建议使用以下方法检查这种情况：

```
forge.facebook.ui({
        method: 'feed',
        link: link,
    },
    function (response) {
        if (JSON.stringify(response) === "{}") {
            handleCancel();
        } else {
            handleSuccess(response);
        }
    }
    function (error) {
        handleError(error);
    }
); 
```

# c# - WinRT Gridview DragItemsStarting 事件：如何找到被拖动的控件？

> ID：13559717
> 
> 赞同：0
> 
> 时间：2012-11-26T06:30:19.103
> 
> 标签：c#, gridview, windows-runtime, winrt-xaml

我正在开发一个 XAML/C# WinRT 应用程序。该应用程序有一个带有分组源的 Gridview。我正在 Gridview 上实现手动拖放功能（因为 MS 以他们的智慧决定跳过分组 Gridview 中的关键功能）。

我面临的一个问题是试图获得对被拖动控件的引用。在 DragItemsStarting 事件中，我们有：

```
private void GVDragItemsStarting(object sender, DragItemsStartingEventArgs e)
{
var item = e.Items.FirstOrDefault();
if (item == null)
    return;

e.Data.Properties.Add("item", item);
} 
```

但是这里的sender只是GridView，不是被拖拽的控件，e.Items[0]指向的是底层数据模型对象，并不是实际的控件。有没有办法在拖放发生之前将实际控件拖动到拖动事件链中的某个位置？我正在考虑查看 PointerPressed 事件，但拖动时甚至没有触发。

这似乎很简单，我认为我缺少一些明显的东西。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-04T22:22:55.137

正如您建议使用的`ContainerFromItem`那样，最好引用在处理程序中触发原始事件的 GridView：

```
private void GVDragItemsStarting(object sender, DragItemsStartingEventArgs e) 
{ 
   GridView g = (GridView)sender;
   var draggedControl = g.ContainerFromItem(e.Items[0]);
   // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:57:52.210

在对事件进行了一些试验后，我想通了：通过处理 ManipulationStarting 事件并将 e.Container 或 e.OriginalSource 存储在类变量中以便稍后在拖动事件中访问，可以让控件被拖动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T20:09:25.133

下面是一个更好的解决方案，它不需要跟踪变量：

```
var draggedControl = itemGridView.ItemContainerGenerator.ContainerFromItem(e.Items[0]); 
```

# maxima - Maxima：模块 ezunits 每次都需要编译

> ID：13559718
> 
> 赞同：2
> 
> 时间：2012-11-26T06:30:22.773
> 
> 标签：maxima

直到今天，我一直在 Maxima 中使用假单位，当我意识到有支持转换和其他很酷功能的单位包时。我发现 ezunits 是其家族中最完整的软件包，但我发现它存在问题。

每次我想使用它，我都必须编译它。换句话说，运行该行会`load(ezunits)`启动一个编译过程并将文件的位置作为输出输出`ezunits.mac`。但是，如果要打开一个新的 maxima 会话并`load(ezunits)`在其上运行，则编译将再次执行。人们会期望只编译一次，然后只加载一个编译文件。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:53:13.537

我不知道如何抑制所有关于编译的消息。您可以编辑 ezunits_functions.mac 的副本并注释掉开始的行`compile (constantp_not0, ...)`或直接删除它。

另一种解决方法是将 ezunits 编译并加载到 Maxima 中，然后保存当前图像（现在包含默认的 Maxima 和 ezunits）。然后您可以加载更新的图像而不是默认图像，并且 ezunits 已经存在。

我猜你在 Windows 上工作，Maxima 是用 GCL 编译的。在这种情况下，我不确定如何转储图像。对于 Linux 上的 GCL，它是：`(si:save-system "myimagename")`您还需要修改 Maxima 批处理脚本以加载更新的图像。

顺便说一句，我编写了 ezunits 包，所以如果您有任何问题或意见，我很想听听。

# visual-studio-2010 - Visual Studio 2010 专业版到 2010 速成版

> ID：13559720
> 
> 赞同：0
> 
> 时间：2012-11-26T06:30:53.040
> 
> 标签：visual-studio-2010, c#-4.0

我在 VS 2010 专业版中开发了一个 windows 应用程序。当我尝试打开该项目并构建表达式版本时，它显示错误。我无法打开该项目。有没有兼容的问题？如果有，我该怎么办？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:35:53.113

Visual Studio Profession 专业版，或者我说完整的使用潜力，包括许多其他不属于 Express 版的东西（例如 Express 版不允许第三方加载项），这就是 VS Professional 大约 3~4GB 的原因而 Express 大约有 600Mb 的设置。

要点是通过从 Professional `->`Express 迁移，您将向后迁移，并且通常支持项目转移以提高渐变而不是降级，您的项目可能使用不属于 Express 版的 Professional 的不同功能/库，因此您收到此错误.

检查两个版本之间的完整功能差异图表，然后从那里您可以轻松地发现是否有任何功能是 Pro 版项目的一部分但 Express 版不支持。

# php - 如何在 HTML 中的 QueryString 中插入表单控件值？

> ID：13559721
> 
> 赞同：2
> 
> 时间：2012-11-26T06:30:52.017
> 
> 标签：php, javascript, html, query-string

我在重定向到下一页时在 QueryString 中插入 HTML 表单控件的值时遇到问题。

我可以在 QueryString 中提供静态值，并且可以使用 PHP 的 GET 方法检索这些值，但是 HTML 表单控件中的值存在问题。

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:07:05.267

你可以那样做...

```
 var formValue = document.getElementById("txtName").value;
    window.location="youform.php?formvalue="+formValue+; 
```

# asp.net - WCF 服务不适用于 Ajax 自动完成扩展程序

> ID：13559727
> 
> 赞同：0
> 
> 时间：2012-11-26T06:31:28.640
> 
> 标签：asp.net, wcf, web-services, asp.net-ajax, ajaxcontroltoolkit

***“加载资源失败：服务器响应状态为 415（无法处理消息，因为内容类型 'application/json; charset=UTF-8' 不是预期的类型 'text/xml; charset=utf-8' .) localhost/WS/Service.svc/functionname"***

上述错误是我自过去三天以来一直面临的问题。现在我需要找出为什么我的 WCF 服务不能在我的 Web 应用程序中运行。

我的 service.cs 文件位于名为**“CodeFiles”**的文件夹中。service.svc 文件也位于名为**"WS"**的文件夹中。

因此，每次在使用此服务的自动完成扩展器中输入要搜索的内容时都会出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:28:16.500

错误消息表明客户端正在发送“application/json”消息，而服务器正在等待“text/xml”。您需要做的是将服务器配置为接受 json。谷歌搜索“WCF JSON”会返回许多链接，包括[这个](http://www.codeproject.com/Articles/167159/How-to-create-a-JSON-WCF-RESTful-Service-in-60-sec)应该可以帮助你的链接。

# oracle - 在表中创建一个分区

> ID：13559730
> 
> 赞同：0
> 
> 时间：2012-11-26T06:31:38.867
> 
> 标签：oracle

我想创建一个表，其中数据存储在分区和子分区中。

假设我想在表的分区（P_name）下插入数据。如果分区已经存在，则在该分区下插入数据，否则创建分区然后插入数据。

你能帮我解决子分区的同样问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:28:46.933

从 11.2 开始，仅间隔分区支持自动创建分区。

此外，您通常应该避免插入特定命名的分区。

# c++ - 如何在精灵上绑定 var

> ID：13559736
> 
> 赞同：0
> 
> 时间：2012-11-26T06:32:00.930
> 
> 标签：c++, cocos2d-x

有一个精灵，我想在上面绑定一些 var。从文档中我了解了一些东西，使用函数“setUserData”和“getUserData”。但是有一点不对。

```
float nums = 2.3f;
pSprite->setUserData((void*)nums); // wrong??

// how to get the var from pSprite.  float some_float = *(pSprite->getUserData());?? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:12:29.827

用户数据存储一个指针，因此您需要动态分配内存。尝试这样的事情：

```
float* nums = new float(2.3f);
pSprite->setUserData((void*)nums); 

...

float* data = (float*)pSprite->getUserData();
printf("%f", *data);
delete data; 
```

通常，您创建一个结构，其中包含要存储在 sprite 中的所有数据。如果您只想存储一个数字，这将起作用。在任何一种情况下，请确保删除内存！

# sql-server - SQL 存储过程更新语句

> ID：13559741
> 
> 赞同：0
> 
> 时间：2012-11-26T06:32:19.600
> 
> 标签：sql-server, stored-procedures, sql-server-2008-r2

编写此查询的其他方法是什么？

```
Update TempTableDisplay         
SET  _cPayment = case When exists(
                   select Tofield from #UFTFMappingTempTable where ToField='Payment') 
                   then IsNull(S.Payment,0) 
                else dbo.fnGetMaximum((ISNULL(M.NetTaxDue0,0) + ISNULL(M.NetTaxDue1,0) + ISNULL(M.NetTaxDue2,0) + ISNULL(M.NetTaxDue3,0) + ISNULL(M.NetTaxDue4,0) + ISNULL(M.NetTaxDue5,0) + ISNULL(M.NetTaxDue6,0)),0)
                end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T21:14:46.890

这是另一种方式：

```
if exists(select Tofield from #UFTFMappingTempTable where ToField='Payment') 
begin
    Update TempTableDisplay         
    SET  _cPayment = IsNull(S.Payment,0) 
end
else
begin
    Update TempTableDisplay
    set _cPayment = dbo.fnGetMaximum((ISNULL(M.NetTaxDue0,0) + ISNULL(M.NetTaxDue1,0) + ISNULL(M.NetTaxDue2,0) + ISNULL(M.NetTaxDue3,0) + ISNULL(M.NetTaxDue4,0) + ISNULL(M.NetTaxDue5,0) + ISNULL(M.NetTaxDue6,0)),0)
end 
```

但是您可能已经注意到，您省略了很多查询——例如，“S”或“M”指的是哪些表？没有这些信息，这一切都不会奏效。

# iphone - 在 GridView 中显示 UIButton

> ID：13559748
> 
> 赞同：0
> 
> 时间：2012-11-26T06:32:53.137
> 
> 标签：iphone, objective-c, ios5, uibutton

我有一些按钮（5 个 UIButtons），并且想将它们放置在网格视图中的每一行中，我想放置 3 个按钮。

我怎样才能放置它们，知道吗？

```
-(void)createSubMenusforView:(UIView *)selectedView
{
int y=75;

for(int i=0;i<=([arr count]-1)/3;i++)
{
    int si=(selectedView.frame.size.width/3-50)/2;

    int x=si+si/2;

    for(int j=0;j<3;j++)
    {
        UIButton *btn_item=[[UIButton alloc]initWithFrame:CGRectMake(x,y,50,50)];
        btn_item.backgroundColor=[UIColor  grayColor];
        [selectedView addSubview:btn_item];

        [self doAnimateforView:btn_item forFrame:CGRectMake(btn_item.frame.origin.x, btn_item.frame.origin.y, btn_item.frame.size.width, btn_item.frame.size.height) forDelay:0.5];

        x=x+75;

    }

    y=y+60;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:37:55.087

创建一个全局按钮计数，`int totalButton=5;`

并使用tableView显示Gridview，下面的代码将帮助您解决您的问题，它是泛化代码，您可以在Gridview中添加5个以上的按钮：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // add tableView on your View or thr xib
       tableView.delegate=self;
       tableView.dataSource=self;                
       [self.view addSubView:tableview]; 

}

#pragma mark
#pragma mark UITableViewDataSource

//@required

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    int numberOfRows=totalButton/3;
    if(totalButton%3)
        numberOfRows++;
    return numberOfRows;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    // You can create custom cell with xib and drag drop 3 buttons on it and handle the logic to show total buttons on tableview
   // Here I am adding buttons as subView to cell 
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];
    if (cell == nil) {
        // No cell to reuse => create a new one
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"] autorelease]; 

        // Initialize cell
        int numberOfRows=totalButton/3;
        if(totalButton%3)
           numberOfRows++;

        if(indexPath.row < numberOfRows) {
          int x=10;
          for(int i=0; i< 3;i++) {

               UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
               //[button addTarget:self action:@selector(aMethod:) forControlEvents:UIControlEventTouchDown];
               [button.titleLabel setText:@"Button"];
               button.tag=i+1;
               button.frame = CGRectMake(x, 10.0, 40.0, 40.0);
               [cell addSubview:button];
               x+=70; 
          }
        }
        else {

              int x=10;
          for(int i=0; i< totalButton%3;i++) {

               UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
               //[button addTarget:self action:@selector(aMethod:) forControlEvents:UIControlEventTouchDown];
               [button.titleLabel setText:@"Button"];
               button.tag=i+1;
               button.frame = CGRectMake(x, 10.0, 40.0, 40.0);
               [cell addSubview:button];
               x+=70; 
          }
        }
    }

    // Customize cell

    return cell;
}
```

# iphone - 部署到运行 5.1.1 的越狱 iPhone 时出现“dylib 加载程序为 6.x == 0”错误

> ID：13559753
> 
> 赞同：1
> 
> 时间：2012-11-26T06:33:22.763
> 
> 标签：iphone, xcode, debugging, deployment, dylib

> XCODE 4.5.1 iPhone 4s 5.1.1 (9B206)

我拥有所有 iOS 开发证书和配置文件，并且该应用程序可以正常工作。部署到另一部 iPhone（相同型号和版本等，也已越狱）时，它工作正常。只是不适合我的 iPhone。

当“构建并运行”时，它构建得很好，并将应用程序放在 iPhone 上就好了。但是在运行时它会随着控制台消息打开和关闭

> dylib 加载器是 6.0 == 0

我稍后可以单击该应用程序，它工作得很好，所以在使用我假设的调试器（LLDB）时它会崩溃。

如前所述，该设备已越狱。当我处于“安全模式”时，构建和部署工作正常，所以我假设我安装了一些干扰调试器的包（cydia）？

我在谷歌上找不到任何关于

> dylib 加载器是...

最坏的情况我将不得不一一禁用软件包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T21:45:57.887

*PhotoAlbumsPlus*是罪魁祸首，我不知道为什么，但是一旦我暂时禁用它，`SBSettings`它又可以工作了，但是每次我想在 xcode 中调试时，我都不能禁用它，给作者发电子邮件并告诉他修复它！

为了找到罪魁祸首，我在终端做了以下操作

```
 ls > LIST in my the DynamicLibraries folder 
```

进而

```
( while read line; do strings $line | grep "loader" ; echo $line ; done ) < LIST 
```

在 dylib 加载器被`6.x == %d`证明是罪魁祸首之后回响的 dylib。不完全是一个优雅的解决方案，但它有助于缩小范围！

编辑：

一种更优雅的方法（在 DynamicLibraries 文件夹之外）

```
grep "dylib loader" DynamicLibraries -r 
```

# c++ - C 多行宏问题：为什么不在多行宏定义中使用 if(1){...} 而不是 do{...}while(0)

> ID：13559755
> 
> 赞同：2
> 
> 时间：2012-11-26T06:33:39.963
> 
> 标签：c++, c, gcc

我想在循环中调用多行宏来中断/继续它。

如果我在多行宏定义中使用“do{...}while(0)”，break/continue 只对“do {...}while(0)”有影响，而不是调用这个宏的循环。所以我考虑在多宏定义中使用“if(1){...}”。

```
#define EXIT_CIRCULATION() \
        if(1){ \
           break; \
        }

void func(){
    while(1){
       ...
       EXIT_CIRCULATION();
       ...
    }
} 
```

但我怀疑在宏定义中使用“if(1){...}”是否是一种好方法，因为我在互联网上找不到任何示例。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T06:35:35.063

如果您编写类似的代码

```
 if (somecondition)
    EXIT_CIRCULATION();
 else
    break; 
```

那么你的宏的扩展将不会像你直觉的那样表现。这`else`将适用于您`if (1)`并且永远不会发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T07:03:26.627

这个技巧背后的整个想法是找到一种方法来创建一个多行（即复合）语句，该语句还包含一个终止`;`作为其组成部分。这将使您有机会`;`在宏调用之后使用，而不会无意中引入空语句。

普通的复合语句 in`{ ... }`不起作用，因为它不以`;`. C/C++ 中唯一`;`以`do/while`. C/C++ 语法中没有其他语句可以满足这个要求。（这是一个不准确的说法，请参阅下面我的“PS”）

在所有其他情况下（包括您的`if (1) {...}`）`;`，宏调用之后将被视为*附加的独立独立*空语句。*当宏调用用于需要一个*`;`语句的上下文（如真正的分支或循环体）中时，这将无法在宏调用之后编写。*`if-else``do/while`*

 *例如，如果您定义

```
#define A() if (1) {} 
```

那么这段代码将无法编译

```
do
  A();
while (1); 
```

因为它将被替换为

```
do
  if (1) {}; /* <- two statements, not one */
while (1); 
```

这实际上是and之间的*两个*语句。指定两个语句之间和不包装它们是语法错误。`do``while``do``while``{}`

**PS更正：**`do/while`我上面关于成为*唯一*可行变体的说法是不正确的。在@Michael Burr 的回答中，您可以看到另一个合适的变体，该变体将`else ((void) 0)`技巧用于相同目的。但是，主要原则保持不变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T10:51:40.707

这是一个我相信可以安全地做你想做的事的宏：

```
#define EXIT_CIRCULATION()  \
            if (1) {        \
                /* some statements */   \
                break;                  \
            }                           \
            else                        \
                do {} while (0) 
```

`if`here 与 an 匹配的事实`else`意味着宏可以安全地在 another 中使用`if`，并且由于该`else`子句是无操作`do`/语句，它提供了与在/`while`中包装多行宏类似的属性。比如宏需要用分号结束，就好像它是一个普通的语句一样；忘记分号会导致语法错误。它在另一个or子句中表现得很好。`do``while``if``else`

对你来说最重要的是（我认为），该`break`语句不会被宏吞没 - 它会打破使用宏的循环。

这是否是一个好主意完全是另一回事。许多程序员不喜欢将流控制语句隐藏在宏中（除非控制流完全在宏单元内）。

这是在行动：

```
#include<stdio.h>
#include<stdlib.h>

#define EXIT_CIRCULATION()  \
            if (1) {        \
                puts("done.");          \
                break;                  \
            }                           \
            else                        \
                do {} while (0)

int main()
{
    int i = 0;

    for (i = 0; i < 10; ++i) {
        if (i  > 4)
            EXIT_CIRCULATION();
        else
            puts("working...");
    }

    printf("i == %d\n", i);

    return 0;
} 
```

输出：

```
working...
working...
working...
working...
working...
done.
i == 5 
```*

# c++ - 在模板类中声明结构，成员函数未定义

> ID：13559756
> 
> 赞同：7
> 
> 时间：2012-11-26T06:33:44.267
> 
> 标签：c++, templates, struct

我目前正在尝试使用列表类私有的节点结构在列表模板类中实现排序算法。我正在使用一些私有递归函数，它们返回一个指向节点类型的指针，这会导致 g++ 给我一个声明错误。这是我所拥有的样本 -

```
template<class T>
class SList
{
private:
    struct NODE
    {
        T* elem;
        NODE* next;
    } *_head, *_tail;

NODE* sort(NODE* node);

public:
    //other declarations...

}

template<class T>
NODE* SList<T>::sort(NODE* node) //Error: 'NODE' does not name a type
{
    //sorting algorithm
} 
```

这是 c++ 的限制还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T06:40:30.287

因为`Node`是一个内部类，你需要告诉编译器`Node`' 的定义来自哪里。

此外，Node 的定义会根据`SList`模板参数的不同而变化（它是*依赖类型*）

所以你必须明确地`Node`这样引用：

```
template<class T>
typename SList<T>::NODE* SList<T>::sort(typename SList<T>::NODE* node) 
{
    //sorting algorithm
} 
```

*   请注意，`typename`因为 Node 是依赖类型（它取决于 的类型`SList`）
*   请注意，`SList<T>::Node`因为 Node 是**依赖**于`SList`'s 类型的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T06:40:40.657

下面工作正常：

```
template<class T>
typename SList<T>::NODE* SList<T>::sort(typename SList<T>::NODE* node)
^^^^^^^^^^^^^^^^^^^                     ^^^^^^^^^^^^^^^^^^^ 
```

> 这是 c++ 的限制吗

**没有**。因为可以在;`NODE`的范围之外命名任何结构/类型。`SList<>`所以实际上它是 C++ 为您提供的一种**工具**，您可以在不同的范围内拥有相同的名称类型。

“为什么我需要关键字`typename`”可以在[这里](https://stackoverflow.com/questions/213121/use-class-or-typename-for-template-parameters)找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T06:39:27.100

您要引用的类型在 SList 中，因此您必须这样引用它：

```
template<class T>
typename SList<T>::NODE* SList<T>::sort(typename SList<T>::NODE* node); 
```

# jsf - Primefaces p：类的轮询更新选择器

> ID：13559757
> 
> 赞同：0
> 
> 时间：2012-11-26T06:33:51.587
> 
> 标签：jsf, primefaces

我正在做 Primefaces 轮询器，我想在表单中选择多个带有 Styleclass="updateable" 的项目。在这种情况下，p:poll 的正确更新选择器是什么？我只需要在触发投票时更新部分表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:12:35.810

干得好

```
<p:poll interval="3"  listener="#{myBean.myMethod}" update="@(.updateable)" /> 
```

还可以看一下展示：[PrimeFaces Selectors - @(selector)](http://www.primefaces.org/showcase/ui/selectors.jsf)

> PFS 不使用 UIComponent 的 findComponent()。它在客户端找到组件，因此**它仍然需要将 id 发送到服务器**以标记要更新的组件，因此您还需要为使​​用 PFS 选择的组件提供 id，尽管您自己没有引用这些 id。如果您不提供明确的 id，JSF impls 不会呈现自动生成的 clientId 以保持页面大小更小。（卡加泰公民）

# iphone - 找不到 Google 任务 API

> ID：13559759
> 
> 赞同：2
> 
> 时间：2012-11-26T06:33:56.800
> 
> 标签：iphone, ios, gdata, gdata-api, google-tasks-api

我正在开发用于获取联系人、相册、使用谷歌地图、使用 GData 的日历的应用程序。他们都工作得很好，但我无法获取谷歌的任务。那么任何人都可以帮助我使用 Google 任务 API 吗？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:46:02.350

目标 c gdata 库中包含 Google Tasks API 的生成接口。查看存储库的示例目录中包含的 TasksSample 项目。确保您拥有客户端库的相对较新的副本。

[http://code.google.com/p/google-api-objectivec-client/source/browse/#svn%2Ftrunk%2FExamples%2FTasksSample](http://code.google.com/p/google-api-objectivec-client/source/browse/#svn%2Ftrunk%2FExamples%2FTasksSample)

例如，以下是查询列表的方法：

```
GTLQueryTasks *query = [GTLQueryTasks queryForTasksListWithTasklist:someTasklistID];
query.showCompleted = someBool;
query.showHidden = anotherBool;
query.showDeleted = aThirdBool;

aTasksTicket =  [service executeQuery:query
                       completionHandler:^(GTLServiceTicket *ticket,
                                           id tasks, NSError *error) {
                         // callback
                         [self doSomethingWithTasks: tasks];
                       }]; 
```

# c - C- 带有分配字符的结构 *

> ID：13559765
> 
> 赞同：0
> 
> 时间：2012-11-26T06:34:20.147
> 
> 标签：c, pointers, struct

我正在尝试将值分配给我的结构。但是，我发现了一些困难。我想创建一个包含用户、标题和视图的列表。

我有一个如下所示的结构

```
struct table{
    char *user[50];
    char *title[50];
    int views;
} 
```

我从文本文件中获取信息，并尝试逐行读取文本文件并相应地分配值。

```
 struct table *tables;
 tables = malloc(50*sizeof(struct table));
 FILE *ptr_file;
 char *name_file="2012-11-05-13-34.txt"; //change this later

 ptr_file=fopen(name_file, "r"); 
 if(!ptr_file)
    printf("Couldn't open file %s for reading.\n", name_file);

 printf("Opened file %s for reading.\n", name_file);

 line_number = 0;
 while(fgets(buffer, sizeof(buffer), ptr_file) != NULL){
    if(strcmp(buffer, "") == 0)
       return 0;
    char *views=strtok(buffer, ",");
    char *name=strtok(NULL, ",");
    char *title=strtok(NULL, ",");
    tables[line_number].views=atoi(views);
    strcpy(tables[line_number].user, user);
    strcpy(tables[line_number].title, title);
    line_number++;
 } 
```

我收到类似 char*_restricted_but 参数的错误是 char** 类型。我想知道是否有人可以帮助向我解释这一点，或者他们是否可以指导我到任何我可以找到一些我可以查看的例子的地方。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T06:40:42.097

`struct table`没有`name`它的成员`user`。

您还拥有`user`并`title`声明为指针数组，但尝试使用它们来保存字符串，请改用 char 数组。

```
struct table{
    char user[50];
    char title[50];
    int views;
} 
```

- 编辑 -

如果要保留指针数组（用于排序或其他），则必须为每个指针分配内存来存储字符串。

```
 while(fgets(buffer, sizeof(buffer), ptr_file) != NULL){
    if(strcmp(buffer, "") == 0)
       return 0;
    char *views=strtok(buffer, ",");
    char *name=strtok(NULL, ",");
    char *title=strtok(NULL, ",");
    tables[line_number].views=atoi(views);
    tables[line_number].user[0] = strdup(user);  // 
    tables[line_number].title[0] = strdup(title);// 
    line_number++;
 } 
```

# debugging - cakephp 2.0 电子邮件调试不起作用

> ID：13559769
> 
> 赞同：0
> 
> 时间：2012-11-26T06:34:31.823
> 
> 标签：debugging, email, cakephp, cakephp-2.0

我正在实现电子邮件功能，它也工作正常。现在我必须在本地调试，所以在 app/config/email.php 中做了一些更改，如下所示我已经创建了这个

```
public $test = array(
        'from' => 'you@localhost',
        'transport' => 'Debug',
    ); 
```

现在在我的控制器中，我编写了以下代码

```
 $Email = new CakeEmail('test');

        $email->template('adddoctor', 'add');

        //$email->emailFormat('html');

        $email->from('sender@example.com');

        $email->to('recipient@example.com');//$data['User']['email_id'];

        $email->subject('Account Detail');

        $email->send(); 
```

发送邮件后，它会重定向到索引页面。所以在 index.ctp 文件中我写了

```
<?php echo $this->Session->flash('email'); ?> 
```

我不想发送实际邮件，但我只想显示它。那么任何人都可以告诉我对于电子邮件调试我还需要做哪些更改吗？这里有人给出了答案 [CakeEmail debug](https://stackoverflow.com/questions/9797318/cakeemail-debug)

但不明白在哪里编写该代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:52:16.630

这是您将电子邮件保存到日志所需的操作，这与您尝试实施的其他问题的解决方案有关：

**应用程序/配置/email.php**

```
public $test = array(
    'log' => true
); 
```

**你的控制器**

```
$Email = new CakeEmail('test');
$email->template('adddoctor', 'add');
$email->from('sender@example.com');
$email->to('recipient@example.com');
$email->subject('Account Detail');
$email->send(); 
```

如果您随后进入**app/tmp/logs/debug.log**，您将看到您的电子邮件条目，其中包括标题和消息

```
2012-11-27 14:37:47 Debug: 
From: My Site <me@example.com>
X-Mailer: CakePHP Email
Date: Tue, 27 Nov 2012 14:37:47 +0000
Message-ID: <50ad02b4b1fba42733cc02456a@example.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
My message 
```

但是，在我看来，除非您想查看标题，否则这一切都毫无用处。首先，您实际上无法“看到”您的电子邮件的外观，其次，电子邮件将继续发送给收件人。

如果您想查看电子邮件的实际布局/CSS 是什么样的，最好只给自己发送一些测试电子邮件。

我不知道为什么 Cake 去掉了旧的电子邮件调试功能，因为它更有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T13:24:14.363

```
$Email = new CakeEmail('test');
$email->template('adddoctor', 'add'); 
```

您正在创建对象`$Email`并使用`$email`它是错字吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-28T12:20:07.330

```
$response = $Email->send();

$response['headers']; // headers as string
$response['message']; // message body with attachments

$this->Session->setFlash($response['headers'].$response['message']); 
```

确保您的布局文件中有以下内容。

```
echo $this->Session->flash(); 
```

# css - CSS：如何固定垂直菜单的宽度？

> ID：13559770
> 
> 赞同：0
> 
> 时间：2012-11-26T06:34:37.830
> 
> 标签：css, menu

我正在尝试使每个 li 项目的宽度完全相同。例如，如果有一个**长文本 ul**使其余的**ul**大小相同或具有有限的宽度大小，因此最长的**ul**可以分成两行。

**请参阅黄色的左栏菜单。这就是我所拥有的：** ![在此处输入图像描述](../Images/33e123b96545de70de80f8d05e28ef7b.png)

**这就是我的目标：**

![在此处输入图像描述](../Images/1e95a5d0c5c25fef81f5d1093535a24e.png)

**CSS**

```
#menu-esde li a {
    background-color: #FFC477;
    border: 1px solid white;
    color: #FFFFFF;
    float: right;
    font-size: 20px !important;
}
#secondnav li a, #menu-esde li a {
    background-color: #FFC477;
    border: 1px solid white;
    color: #FFFFFF;
    float: right;
    font-size: 20px !important;
}
#secondnav li a {
    border: medium none;
    display: block;
    padding: 3px 8px; 
```

**网站：** [http ://npmaudiovisual.com/esde/?page_id=36](http://npmaudiovisual.com/esde/?page_id=36)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:41:52.777

`CSS`只需用我的**CSS**更新你的：-

```
#secondnav li a, #menu-esde li a {
    background-color: #FFC477;
    border: 1px solid white;
    color: #FFFFFF;
    float: right;
    font-size: 20px !important;
    text-align: left;
    width: 205px;
} 
```

请参阅所附图像结果是否符合您的要求：-

![在此处输入图像描述](../Images/39d79b1a037058263bcb0ae8ad8a1144.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:40:48.237

**刚刚添加这个css**

```
#secondnav ul li {
    overflow: hidden;
    width: 184px;
}

    #secondnav li a, #menu-esde li a {
        display: block;
        text-align: left;
float:right; // remove this line 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:42:40.173

```
ul#menu-esde li {
    border-bottom: 1px solid #YOUR COLOR;
    height: 42px;
    list-style: none outside none;
    width: 100%;
}
ul#menu-esde li a {
    background-color: #YOUR COLOR;
    color: #YOUR COLOR;
    display: block;
    font-weight: bold;
    line-height: 42px;
    padding: 0 20px;
    text-decoration: none;
} 
```

# c# - 使用后面的 c# 代码在新选项卡而不是窗口中打开 URL

> ID：13559773
> 
> 赞同：2
> 
> 时间：2012-11-26T06:34:48.603
> 
> 标签：c#, redirect, code-behind

*   我的页面上有一个 PDF。但我希望它仅在用户登录时打开。
*   为此，我在 PDF 链接上使用了一个带有登录名的弹出窗口。
*   当他/她尝试使用此弹出窗口登录时，其背后的代码将出现在图片中。
*   从那里我必须决定用户是否可以打开 URL。
*   如果他/她是真实用户，页面将随着用户登录而刷新，并且 PDF 链接将在新选项卡而不是新窗口中打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:46:20.533

如果您使用的是超链接，则使用目标属性

目标属性的行为取决于浏览器

```
 target="_blank" 
```

旧浏览器 --> 在新窗口中导致不支持选项卡。

较新的浏览器---> 新标签。

如果你想要你使用 Button 然后像这样标记你的按钮定义，

```
<asp:Button ........OnClientClick="NameofForm.target ='_blank';"/> 
```

在代码后面使用重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:38:22.617

当用户通过身份验证时，添加一个会话变量来确认身份验证，使用该会话变量来检查用户是否通过身份验证，如果通过身份验证，则编写一个 javascript 代码：

window.open("http://www.yahoo.com");

因此，在您的页面在身份验证后刷新后，该窗口将打开。

# openwrt - 如何更改 OpenWRT AA 中的包编译顺序？

> ID：13559776
> 
> 赞同：0
> 
> 时间：2012-11-26T06:35:07.603
> 
> 标签：openwrt, buildroot

我有一些自定义包添加到 OpenWRT AA，这取决于busybox。据观察，OpenWRT AA 在制作基础文件包之前构建了我的自定义包。所以在我的自定义包构建期间busybox不可用并且我的图像构建失败。有没有办法在 OpenWRT 中配置包构建的顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:39:35.673

OpenWRT 使用字母顺序来编译额外的包，例如，如果你的包是基本文件的一部分，那么大写字母（你的包名的开始字母）将首先被编译，然后是小写字母的包。如果您希望在您的包之前编译其他包，那么您可以将 DEPENDS:= 添加到您的自定义包元数据中。

# android - Android DownloadManager：如何获取响应标头？

> ID：13559781
> 
> 赞同：4
> 
> 时间：2012-11-26T06:35:46.577
> 
> 标签：android, http, header, download-manager

这是响应的标题：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 37888
Content-Type: application/octet-stream; charset=utf-8
Server: Microsoft-IIS/7.5
Set-Cookie: ASP.NET_SessionId=g4tidw45yqwztc55nv0zdu55; path=/; HttpOnly
Content-Disposition: attachment; 
**filename=%e5%85%a5%e5%ad%a6%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9.doc**
X-AspNet-Version: 2.0.50727
X-Powered-By: ASP.NET
Date: Mon, 26 Nov 2012 06:24:36 GMT 
```

我可以通过一个名为 Wireshark 的软件获取此标头。

这是 Java 代码中的 DownloadManager：

```
lastDownloadId = manager.enqueue(new DownloadManager.Request(uri)
            .setAllowedNetworkTypes(
                    DownloadManager.Request.NETWORK_MOBILE
                            | DownloadManager.Request.NETWORK_WIFI)
            .setAllowedOverRoaming(false)
            .setTitle("MyTest")
            .setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED)
            .setDescription("Something Useful")
            .setDestinationInExternalPublicDir(
                    Environment.DIRECTORY_DOWNLOADS, "abc.doc")); 
```

我想获取 Java 代码中的标头，所以我可以获取此响应的文件名。

我怎样才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:03:06.197

头衔不是`DownloadManager`荣誉吗？`Content-Disposition`您可以检查本地文件名是否与标题匹配。如果没有，您将不得不直接使用`HttpClient`或下载文件`HttpURLConnection`。

# android - 无法在 Android webview 中下载

> ID：13559786
> 
> 赞同：1
> 
> 时间：2012-11-26T06:36:23.250
> 
> 标签：android, android-webview

> **可能重复：**
> [在 WebView 中下载文件](https://stackoverflow.com/questions/10069050/download-file-inside-webview)

我的屏幕上有一个 WebView：

```
webDownloadTicket = (WebView) findViewById(R.id.webViewToDownload);
webDownloadTicket.getSettings().setJavaScriptEnabled(true);
webDownloadTicket.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return false;
    }
});
      // and load url
webDownloadTicket.loadUrl("xxx.com/TicketWEB/download.jsp");
      // setup for download listener
webDownloadTicket.setDownloadListener(new DownloadListener() {
    public void onDownloadStart(String url, String userAgent,
            String contentDisposition, String mimetype,
            long contentLength) {
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(Uri.parse(url));
        startActivity(intent);

    }
}); 
```

我正在使用浏览器进行测试，转到[此](http://example.com/TicketWEB/download.jsp)URL，然后按下载按钮，它将下载一个 JSON 文件。

但是当我使用该代码在我的 Android 应用程序上进行测试时，它可以加载网页，但当我按下下载按钮时无法下载任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:04:16.820

无法从应用程序访问网络的最常见答案是 AndroidManifest.xml 中缺少权限声明。检查该行的文件并添加它，如果它不存在：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# php - CodeIgniter 阻止在 URL 中显示控制器/方法

> ID：13559788
> 
> 赞同：0
> 
> 时间：2012-11-26T06:36:31.803
> 
> 标签：php, codeigniter, url-rewriting

我正在使用 CodeIgniter，并且我的路由设置如下：

```
$route["(:num)"] ="login/login_by_id/$1"; 
```

这基本上意味着当 URL 看起来像这样时：

```
http://mydomain.com/12345 
```

这将有效地将值 12345 传递给控制器​​的`login_by_id`方法。`login`当我直接输入 URL 时，一切正常。我遇到问题的地方是当我尝试加载视图时。这些是调用视图的行：

```
$data['content'] = 'login_view';
$data['title']   = 'Login';
$data['error_msg'] = 'Invalid password.  Please try again.';
$this->load->view('login_template', $data); 
```

我的问题是，而不是将用户返回到这里：

```
http://mydomain.com/12345 
```

浏览器将用户定向到此 URL：

```
http://mydomain.com/login/login_by_id 
```

如何更改代码以使我的用户返回到他们之前所在的相同 URL？我不想在 URL 地址中显示控制器/方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:50:10.437

在控制器中的函数（点击提交按钮后调用的函数）中。

```
public function post_login()

  {

      $error_in_validation=set_form_validation($this->config->item('login_form'));

        if($error_in_validation){
            show_form_validation_error('controller_name/login');
        }
        else
        {
            $email=$this->input->post('email');
            $passwd=$this->input->post('passwd');
            $ret=$this->admin_model->user_login($email, $passwd);

            if($ret == NULL){

                $model=array();
                $model['error_msg']=$this->config->item('login_form_error_code_1');;
                $this->load->view('login',$model);              
            }
            else{
                redirect("home");
            }

        }

    } 
```

# mysql - 呈现 2 个带有 Group By 子句的 select 语句

> ID：13559790
> 
> 赞同：2
> 
> 时间：2012-11-26T06:36:44.983
> 
> 标签：mysql

我想加入两个或多个具有 group by 子句的 select 语句，但它不起作用。

```
SELECT COUNT(`rank`) AS rank1,sitename
FROM `larrdb_ranking` 
INNER JOIN larrdb_site_list USING (sid)
WHERE rank=1
GROUP BY sitename
UNION 
SELECT COUNT(`rank`) AS rank2 ,sitename
FROM `larrdb_ranking` 
INNER JOIN larrdb_site_list USING (sid)
WHERE rank=2
GROUP BY sitename 
```

我得到的只是第一个语句有效，但第二个语句没有..我没有选择 rank2

**更新：**

Union All 也不起作用：

```
 SELECT COUNT(`rank`) AS rank1,sitename
FROM `larrydb_ranking` 
INNER JOIN larrydb_site_list USING (sid)
WHERE rank=1
GROUP BY sitename
UNION ALL
SELECT COUNT(`rank`) AS rank2 ,sitename
FROM `larrydb_ranking` 
INNER JOIN larrydb_site_list USING (sid)
WHERE rank=2
GROUP BY sitename 
```

column..rank2 未显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:03:47.477

试试这个：

```
SELECT SUM(IF(rank=1, 1, 0)) AS rank1, SUM(IF(rank=2, 1, 0)) AS rank2,sitename
FROM `larrydb_ranking` 
INNER JOIN larrydb_site_list USING (sid)
GROUP BY sitename 
```

# eclipse - 如何处理 RCP 中的视图零件关闭选项卡

> ID：13559792
> 
> 赞同：1
> 
> 时间：2012-11-26T06:36:46.357
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, rcp

目前我正在`RCP application`使用`view part`. 在应用程序中，用户可以打开相同的多个实例`view part`。我能够使用`menu selection`. 但我不知道处理“X”即标签关闭操作。

我尝试将`IPartListener`对象添加到视图部分对象，（[我引用了此链接](https://stackoverflow.com/questions/11756534/detect-tab-close-in-eclipse-editor)），但在其`partClosed()`方法中我面临 2 个问题，

1.  我无法获取`view part object`.
2.  该`partClosed()`方法仅在关闭选项卡后才被调用，因此我无法显示关闭选项卡的确认。

我应该使用什么方法来解决以上两个问题。

任何帮助表示赞赏。

此致，

曼达尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:59:11.320

如果你只想在关闭编辑器时显示确认，为什么不实现`ISaveablePart2`及其方法`promptToSaveOnClose();`

例子：

```
@Override
public int promptToSaveOnClose() {
    boolean canClose = // Show dialog here and return a boolean based on the users input
    if (canClose) {
        return ISaveablePart2.NO;
    } else {
        return ISaveablePart2.CANCEL;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:02:35.503

您可以考虑将接口实现`ISaveablePart2`到您的`ViewPart`. 该接口负责提示用户该部件是否应该关闭。此外，它决定如何处理未保存的数据。

如果应在方法中使用自定义对话框关闭视图，您可以提示用户`promptToSaveOnClose()`。

```
@Override
public boolean isDirty() {
    return true;
}

@Override
public int promptToSaveOnClose() {
    boolean close = MessageDialog.openConfirm(
            Display.getCurrent().getActiveShell(), "Close?", "Really?");

    if(close)
        return YES;
    return CANCEL;
} 
```

[Eclispe API：ISaveablePart2](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/ISaveablePart2.html)

# c# - MYSQL Insert ...在重复值上再次插入并增加

> ID：13559794
> 
> 赞同：0
> 
> 时间：2012-11-26T06:36:58.253
> 
> 标签：c#, mysql, sql

我有 5 列 a、b、c、d 和 e。我想将值插入前 4 列，并在最后一列中将默认值保留为 1。我将前 4 列保留为主键。如果在前 4 列中插入了重复值，那么我想再次插入相同的值，但在第 5 列中增加。例如：如果 1,2,3,4 是前 4 列的值。然后当 1,2,3,4 再次出现时，它们需要插入为 1,2,3,4 但第五列为 2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:41:43.857

如果前四列是主键，那么你不能再 1,2,3,4

IE

服用 Col 1, Col 2, Col 3, Col 4

1,2,3,4 - 好的 2,1,3,4 - 好的 2,3,1,4 - 好的 1,4,3,2 - 好的 .. 像 4 C 4 组合

但

1,2,3,4 - 好的 1,2,3,4 - 再一次，这将是一个错误！

所以你不能再插入1,2,3,4！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:16:40.163

首先删除主键并添加唯一键。

```
ALTER TABLE test DROP PRIMARY KEY, ADD UNIQUE KEY 'test_uIdx_a_b_c_d_e' ( a,b,c,d,e ); 
```

假设你的桌子现在看起来像这样

```
CREATE TABLE test (
    a int NOT NULL DEFAULT '0',
    b int NOT NULL DEFAULT '0',
    c int NOT NULL DEFAULT '0',
    d int NOT NULL DEFAULT '0',
    e int NOT NULL DEFAULT '0',
    UNIQUE KEY 'test_uIdx_a_b_c_d_e' ( a,b,c,d,e )
) 
```

然后你可以在插入之前创建一个触发器

```
DELIMITER ;;
CREATE TRIGGER before_test_insert 
BEFORE INSERT ON test
FOR EACH ROW
BEGIN
    SET NEW.e := ( SELECT COUNT(*)+1 FROM test WHERE a = NEW.a AND b = NEW.b AND c = NEW.c AND d = NEW.d;
END;;

DELIMITER ; 
```

这会将字段 e 设置为 a、b、c、d 的出现次数

上面的评论之一提供了一个更简单的选择

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# tridion - Content Porter 问题 - 从 Tridion 5.3 导入到 Tridion 2011

> ID：13559796
> 
> 赞同：2
> 
> 时间：2012-11-26T06:37:05.247
> 
> 标签：tridion, tridion-2011, content-porter-2009

我正在将 Tridion 5.3 内容导入 Tridion 2011。导出内容很好。但后来当尝试导入以下消息显示的导出内容时，它失败了

*   无法上传包。对服务器的访问可能受到限制或包太大。
*   此请求需要缓冲数据才能成功。
*   导入已中止

尝试导入的文件大小为 500KB，web.config 文件中的 MaxRequestLengthLimit 为 1000 MB

还检查了是否使用 Admin 尝试了用户权限问题，相同的错误消息并关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:22:37.373

这`MaxRequestLengthLimit`与为 Content porter 上传大型二进制文件无关，这很可能是您遇到的问题。从[SDL ContentPorter 2009 SP2 文档](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_ContentPorter_2009_SP2/task_CCFED8DFFA9A4E138DEA72FBDF4C18AD)中，它声明您必须执行以下操作：

1.  如果您的 Content Porter 网站在 IIS 6 上运行，请将调用的元数据库属性更改`AspMaxRequestEntityAllowed`为一个数字，该数字表示您希望从 Content Porter 上载的最大字节数。典型值可能是`209752100`，即 200 MB。

2.  如果您的 Content Porter 网站在 IIS 7.0 或 IIS 7.5 上运行，则在 Content Porter 服务器计算机上，导航到`Content Porter\ImportExportService\`Content Manager 根位置的子文件夹。默认为`c:\Program Files (x86)\Tridion`or `c:\Program Files\Tridion`)。

3.  在纯文本或 XML 编辑器中打开文件 web.config。

4.  在根`<system.webServer>`元素中，添加以下片段（如果元素尚不存在，则创建元素）：

    ```
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="209752100" />
      </requestFiltering>
    </security> 
    ```

    其中`maxAllowedContentLength`属性的值表示您希望上传的文件大小（显示的值允许上传最大 200 MB 的文件）。

5.  保存并关闭 web.config 并重新启动 IIS。

# view - Tableview 和 Detail 视图在没有 splitviewcontroller 的情况下一次显示

> ID：13559797
> 
> 赞同：1
> 
> 时间：2012-11-26T06:37:13.577
> 
> 标签：view, uiviewcontroller

我试图找到一种在单个视图控制器内显示表格视图和详细视图的方法，并让详细视图根据选择的表格视图单元格更新其内容。

这正是 UISplitViewController 所做的；但是，我正在寻找一个完全自定义的界面，这是我无法使用 cookie 切割器 SVC 完成的。

基本上我有一个单一的视图，左边有一个小表格视图（它没有填满屏幕的整个高度，所以它是一个自定义大小），然后是右边的细节视图。

我尝试了几种方法，例如以编程方式创建表、使用视图控制器容器等。

我只想更改点击新单元格时显示在详细视图中的文本和图像，而不是推送新的详细视图。

关于如何做到这一点的任何想法？

提前致谢！

# iphone - 自定义 uitableviewcell 在 LazyTableImages 中不起作用

> ID：13559800
> 
> 赞同：1
> 
> 时间：2012-11-26T06:37:38.077
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我`UITableView`在我的应用程序中使用自定义单元格，并且我已经集成了 LazyTableImages 示例代码以在 tableview 中下载图像。我正在使用下面的代码

```
- (void)appImageDidLoad:(NSIndexPath *)indexPath
    {
        IconDownloader *iconDownloader = [imageDownloadsInProgress objectForKey:indexPath];
        if (iconDownloader != nil)
        {
            CustomTblViewCell *cell = (CustomTblViewCell *)[self.TblView cellForRowAtIndexPath:iconDownloader.indexPathInTableView];

            // Display the newly loaded image
            cell.ImgViewUser.image = iconDownloader.appRecord.m_strImage;
        }

        // Remove the IconDownloader from the in progress list.
        // This will result in it being deallocated.
        [imageDownloadsInProgress removeObjectForKey:indexPath];
        [m_CtrlTblViewFacetoface reloadData ];
}
```

上面的代码没有加载任何数据，但是当我使用`UITableView`单元格而不是 Customcell 时，它正在工作，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:16:26.447

只是有一个我以前使用过的库，它运行良好，这个名为“ [SDWebImage](https://github.com/rs/SDWebImage) ”的库你可以通过一种方法简单地使用它：

```
[cell.ImgViewUser setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
               placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

它会自动缓存图像，并且仅支持从缓存中加载（如果需要）并自动处理内存警告。

# php - 使用 pdo_mysql 属性时收到 PHP 致命错误

> ID：13559807
> 
> 赞同：2
> 
> 时间：2012-11-26T06:38:12.373
> 
> 标签：php, mysql, ssl, pdo

我正在尝试将 SSL 与 PDO 和 PDO MySQL 一起使用，但收到“PHP 致命错误：未定义的类常量 'MYSQL_ATTR_SSL_CA'”：

```
 $this->db = new PDO(
        "mysql:host=".$this->hostname.";dbname=".$this->database, 
        $this->username, 
        $this->password, 
        array(
            PDO::ATTR_PERSISTENT => true, 
            PDO::MYSQL_ATTR_SSL_CA => "path/to/mysql-ssl-ca-cert.pem" 
        )
    ); 
```

我已经确保 pdo_mysql 是使用 phpinfo() 安装的，并且使用没有 SSL 的代码没有问题。我在使用 PHP 5.3.6-13 的 Ubuntu 3.9 上。我尝试使用其他 MYSQL_ATTR_.. 并收到类似的错误。对可能发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:42:39.947

`PDO::MYSQL_ATTR_SSL_CA`被定义为 5.3.7 以后的常数。

您可以在文档中查找：http: [//php.net/manual/en/ref.pdo-mysql.php#pdo.constants.mysql-attr-ssl-ca](http://php.net/manual/en/ref.pdo-mysql.php#pdo.constants.mysql-attr-ssl-ca)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-09T09:43:47.843

在我的情况下，我在使用 Drush（Drupal 命令行工具，版本 8.1.2）和 Drupal（版本 7.43）时遇到了这个错误。问题是我在 CLI 中使用 PHP7，切换到 PHP5.6 解决了这个问题。

# junit - 为什么我不能在 android 测试项目中运行所有测试？

> ID：13559813
> 
> 赞同：2
> 
> 时间：2012-11-26T06:38:42.913
> 
> 标签：junit, android-testing

现在，我在单独的测试项目中编写 android 测试代码来测试应用程序。我编写了许多测试用例和类。现在，我想写一个测试服。运行所有测试。但它有一个例外。代码如下：

```
 public static Test suit () {
        return new TestSuiteBuilder(AllTest.class)
                  .includeAllPackagesUnderHere()
                  .build();
    } 
```

例外情况如下：

junit.framework.AssertionFailedError：在 android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175) 的 android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190) 的 com.netqin.myproject.test.alltest.AllTest 中找不到测试) 在 android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555) 在 android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584)

出了什么问题，我找不到原因。任何帮助都是感激的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T04:00:28.723

includeAllPackagesUnderHere() 方法需要能够从保存测试套件的包或任何子包（[链接](http://developer.android.com/reference/android/test/suitebuilder/TestSuiteBuilder.html#includeAllPackagesUnderHere%28%29)）中提取测试。

因此，您需要创建一个单独的 JUnit 测试用例，该用例实际上将您的测试方法包含在同一个包中。例如，您可能有两个文件：

1) MyTestSuite.java

```
package com.example.app.tests;

import junit.framework.Test;
import junit.framework.TestSuite;
import android.test.suitebuilder.TestSuiteBuilder;

public class MyTestSuite extends TestSuite {

    /**
     * A test suite containing all tests
     */
    public static Test suit () {
        return new TestSuiteBuilder(MyTestSuite.class)
                  .includeAllPackagesUnderHere()
                  .build();
    }

} 
```

注意：确保 TestSuiteBuilder 中的类，在本例中为 MyTestSuite.class，与包含类的名称匹配，在本例中为 MyTestSuite。

2) MyTestMethods.java

```
package com.example.app.tests;

import android.test.ActivityInstrumentationTestCase2;

public class MyTestMethods extends ActivityInstrumentationTestCase2<TheActivityThatYouAreTesting> {

    public MyTestMethods() {
        super("com.example.app",TheActivityThatYouAreTesting.class);
    }

    protected void setUp() throws Exception {
        super.setUp();
    }

    protected void tearDown() throws Exception {
        super.tearDown();
    }

    public void testFirstTest(){
        test code here
    }

    public void testSecondTest(){
        test code here
    }
} 
```

在这种情况下，testFirstTest() 和 testSecondTest() 将包含在您的测试套件 (MyTestSuite.class) 中。将 MyTestSuite.java 作为 Android JUnit 测试运行现在将同时运行这两个测试。

# php - php日期和日期时间

> ID：13559815
> 
> 赞同：1
> 
> 时间：2012-11-26T06:38:48.943
> 
> 标签：php, date

php DateTime 类的奇怪行为

```
$x = '23120-7-7';
$x = new \DateTime($x);
var_dump($x); 
```

给

```
object(DateTime)#988 (3) {
  ["date"]=>
  string(19) "2000-07-07 23:12:00"
  ["timezone_type"]=>
  int(3)
  ["timezone"]=>
  string(3) "UTC"
} 
```

我想验证日期，但 php 中只有 datetime 类。我该如何检查

我的日期有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:22:45.620

使用 date_create_from_format

```
$x = '23120-7-7';
$x = \DateTime::createFromFormat('Y-m-d', $x);
var_dump($x); 
```

输出：

```
bool(false) 
```

要查看错误详细信息：

```
$errors = DateTime::getLastErrors();
var_dump($errors); 
```

输出：

```
array(4) {
  ["warning_count"]=>
  int(1)
  ["warnings"]=>
  array(1) {
    [7]=>
    string(27) "The parsed date was invalid"
  }
  ["error_count"]=>
  int(2)
  ["errors"]=>
  array(2) {
    [4]=>
    string(40) "The separation symbol could not be found"
    [7]=>
    string(13) "Trailing data"
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:44:14.730

如果你想要一个直接的答案，你可以使用“checkdate”方法。首先用破折号（-）分解日期，我不知道你使用的是什么样式日期，然后使用检查日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:32:14.833

尝试将其转换为时间戳，然后使用您需要的格式设置一个新日期 date("ymd",timestamp)，然后检查错误

# c++ - 分析 C++ 编译过程

> ID：13559818
> 
> 赞同：88
> 
> 时间：2012-11-26T06:39:16.370
> 
> 标签：c++, compilation, profiling

我倾向于编写相当大的模板化仅标头 C++ 库，而我的用户通常抱怨编译时间。想了想这件事，我突然想到，*我不知道时间都去哪儿了*。是否有一些简单的方法可以使用常见的编译器（例如 g++、icc 和 xlC）来分析 C++ 编译过程？例如，是否有可能了解[C++ 编译的每个阶段](http://www.drdobbs.com/cpp/c-compilation-speed/228701711)花费了多少时间？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2014-02-18T17:36:03.210

对于**GCC**，有[调试选项可供](http://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)查找`how much time is spent within each of the phases of C++ compilation?`

> **-Q** 使编译器在编译时打印出每个函数名称，并在完成时打印有关每个传递的一些统计信息。
> 
> **-ftime-report** 使编译器在完成时打印有关每次传递所消耗时间的一些统计信息。

Passes 在[GCCINT 9: Passes and Files of the Compiler](http://gcc.gnu.org/onlinedocs/gccint/Passes.html#Passes)中有描述。

`-v -ftime-report`您可以在此处发布单个源文件的 g++ 编译的输出以进行[讨论](/questions/11338109/gcc-understand-where-compilation-time-is-taken)。[GCC邮件列表](https://gcc.gnu.org/ml/gcc-help/2013-08/msg00063.html)上可能会有一些帮助。

* * *

对于**GCC 以外**的编译器（或比[3.3.6](https://gcc.gnu.org/onlinedocs/gcc-3.3.6/gcc/Debugging-Options.html)*更古老*的 GCC ），请参阅此线程中的其他选项。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2020-05-16T15:46:56.877

Clang 9（和更新的版本）有一个`-ftime-trace`标志，它可以将分析报告输出为 JSON（除了一个目标文件）。

您可以将此文件导入 Chrome ( `chrome://tracing`) 附带的分析器中以获得漂亮的可视化效果：

[![图片](../Images/b545e378f098065b651b43aafccc43aa.png)](https://i.stack.imgur.com/dm9Rz.png)

这些条对应于必须解析的标题，并且对于每个标题，必须解析的特定类（可能还有其他构造）。它还报告实例化特定模板所花费的时间。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-02-17T18:01:27.933

Boost 项目中有**[一个工具](https://svn.boost.org/svn/boost/sandbox/tools/profile_templates/)**，它可以用于几乎任何编译器和构建系统。

该工具需要带有宏调用的**源代码检测。**然后，这些宏在编译时生成特定的诊断（警告），这些诊断与实例化调用堆栈（因此允许构建和[可视](https://stackoverflow.com/questions/582336/how-can-you-profile-a-python-script/13830132#13830132)化调用图）一起由脚本定时和收集。不错，IMO。`TEMPLATE_PROFILE_ENTER()``TEMPLATE_PROFILE_EXIT()`

不过我还没用过。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-10-21T17:03:35.283

我还没有尝试过，但 templight 看起来很有希望：[https ://github.com/mikael-s-persson/templight](https://github.com/mikael-s-persson/templight)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-26T10:28:13.427

您可以在某种程度上将它们分开（我假设`make`）

*   添加一个只预处理文件的构建规则（使用`-E`开关），以及一个`.PHONY`依赖于预处理器输出文件的目标，就像普通的二进制目标依赖于`.o`文件一样。衡量建立这个目标需要多长时间
*   添加一个`'PHONY`依赖于所有`.o`文件但不链接它们的目标。测量构建这个目标需要多长时间（从干净）
*   测量干净构建通常的二进制文件需要多长时间

现在您对预处理、编译和链接需要多长时间有所了解。您还可以比较第二个和第三个目标的优化和非优化 ( `-O0`) 版本，看看在优化器中花费了多长时间。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-01T19:26:47.347

`strace -e trace=process -f -r -ttt -T`至少对于像 g++ 这样被分解为许多进程的编译器，您可能能够通过一些变体获得一些牵引力。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-02-08T22:26:42.590

[Externis](https://github.com/royjacobson/externis)是一个 GCC 插件，它将生成非常类似于 clang 的跟踪文件`-ftime-trace`：

[![在此处输入图像描述](../Images/be94fe9b797440e06ae3f85d8ef7f55a.png)](https://i.stack.imgur.com/DmfeS.png)

免责声明：我是这个插件的作者。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-16T15:28:15.093

其他人已经建议了[`-ftime-report`](https://gcc.gnu.org/onlinedocs/gcc/Debugging-Options.html)GCC 的命令行标志，这使得编译器打印一些关于每个编译阶段消耗的时间的统计信息。缺点是它只显示一个单元的摘要。

我编写了一个 Python[脚本](https://github.com/alex-che/gcc-phases)，它允许在给定项目构建日志文件的情况下，在每个编译阶段打印所有单元的总摘要。它还允许按不同阶段进行排序。它还允许比较两个日志文件（例如，如果您试图了解更改的影响）。

# language-agnostic - 典型浮点中没有倒数的最小正整数是多少？

> ID：13559825
> 
> 赞同：3
> 
> 时间：2012-11-26T06:39:48.933
> 
> 标签：language-agnostic, floating-point, floating-accuracy, ieee-754

一个常见的假设是`1 / x * x == 1`. 在常见的符合 IEEE 754 的硬件上打破这一点的最小正整数是多少？

当乘法逆的假设失败时，写得不好的有理算术就不再起作用了。因为包括 C 和 C++ 在内的许多语言默认使用四舍五入将浮点数转换为整数，所以即使是一个小错误也可能导致整数结果偏移 1。

快速测试程序会产生各种结果。

```
#include <iostream>

int main () {
    {
        double n;
        for ( n = 2; 1 / n * n == 1; ++ n ) ;
        std::cout << n << " (" << 1 - 1/n*n << ")\n";
        for ( ; (int) ( 1 / n * n ) == 1; ++ n ) ;
        std::cout << n << " (" << 1 - 1/n*n << ")\n";
    }
    {
        float n;
        for ( n = 2; 1 / n * n == 1; ++ n ) ;
        std::cout << n << " (" << 1 - 1/n*n << ")\n";
        for ( ; (int) ( 1 / n * n ) == 1; ++ n ) ;
        std::cout << n << " (" << 1 - 1/n*n << ")\n";
    }
} 
```

在使用 GCC 4.3.4 的[ideone.com](https://ideone.com/yeimfS)上，结果是

```
41 (5.42101e-20)
45 (5.42101e-20)
41 (5.42101e-20)
45 (5.42101e-20) 
```

使用 GCC 4.5.1 会产生相同的结果，但据报道误差范围恰好为零。

在我的机器上（GCC 4.7.2 或 Clang 4.1），结果是

```
49 (1.11022e-16)
49 (1.11022e-16)
41 (5.96046e-08)
41 (5.96046e-08) 
```

这与`--fast-math`选项无关。使用`-mfpmath=387`令人惊讶的产生

```
41 (5.42101e-20)
41 (5.42101e-20)
41 (5.42101e-20)
41 (5.42101e-20) 
```

值 5×10 ^(-20)似乎暗示对应于 64 位尾数的 epsilon，即使用 Intel 80 位扩展精度的内部计算。

这似乎高度依赖于 FPU 硬件。是否有适合测试的可靠值？

注意：我不在乎语言标准或编译器对浮点数系统的保证，尽管我认为在任何常见的编程系统中都没有很多有意义的保证。我想知道数字和现实世界计算机之间的交互。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T07:41:53.497

双精度：

1/41 = 0x1.8F9C18F9C18FAP-6和41 * 0x1.8F9C18F9C18FAP-6 = 0x1.000000000000028，其舍入到1.1 / 45 = 0x1.6c16c16c16c16p-6，45 * 0x1.6c16c16c16c17p-6 = 0x1.0000000000000002c , 四舍五入为 1。

然而，

1/49 = 0x1.4e5e0a72f0539p-6，49*0x1.4e5e0a72f0539p-6 = 0x0.fffffffffffffa4，四舍五入为 0x0.ffffffffffff8 = 0x1.ffffffffffffff0p-1

不过，49确实有倒数！它是 0x1.4e5e0a72f053ap-6。

更一般地，如果 f 是 [1, 2) 中的浮点数，则 f 有倒数。在通常的四舍五入算术中，如果一个数字位于 [1 - 2 ^(-54) , 1 + 2 ^(-53) ] 中，它将四舍五入为 1。请注意，最接近 1/f 的双精度数，例如 d，距离 1/f 小于 2 ^(-54)。如果 d > 1/f，那么我们就是黄金；1 < f*d < f*(1/f+2 ^(-54) ) <= 1 + 2 ^(-54) * f < 1 + 2 ^(-53)，所以 f*d 舍入为 1。如果 d < 1/f，则 f *d 可能会舍入到 1 - 2 ^(-53)。如果是，则 f*d 位于 [1 - 2 ^(-53) , 1 - 2 ^(-54) )。如果你取 e = 2 ^(-53) + d，那么 e*f > 1 并且 e*f = d*f + 2 ^(-53) *f < 1 - 2 ^(-53)+ 2 ^(-52) = 1 + 2 ^(-53)，再次四舍五入为 1。

**编辑**：上面的推理是错误的，因为两个连续双打之间的步幅相差了两倍。没有倒数的双精度示例是 0x1.ffffffbffffffe。0x1.0000002000001p-1 太小，但 0x1.0000002000002p-1 太大。没有倒数的整数的最小示例是 237。1/237 大约是 0x1.1485f0e0acd3B68c6Bp-8，四舍五入为 0x1.1485f0e0acd58p-8。这个数字太小了，而它之后的下一个双倍太大了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:24:36.847

这个问题似乎与 C++ 选择转换为整数的方法有关。

这是一个用于比较的 Ada 版本，测试 32 位、64 位和 80 位浮点数（只需要求 7、15 和 18 位数字，或者使用前两个的内置类型）。

首先是结果和注释，代码如下。

```
$ gnatmake fp_torture.adb
gcc -c fp_torture.adb
gnatbind -x fp_torture.ali
gnatlink fp_torture.ali
$ ./fp_torture
 41 ( 5.96046E-08)
Error representing float  2.14748E+09 as integer
 49 ( 1.11022302462516E-16)
 2147483647 ( 0.00000000000000E+00)
 41 ( 5.42101086242752217E-20)
 2147483647 ( 0.00000000000000000E+00)
$ 
```

正如我们所见，浮点计算重现了 C++ 故障点，并确认使用了 387 个 80 位浮点数。但是将（一个非常接近 1 的数字）转换回整数，比较有效。

看到这一点后，向 C++ 示例添加适当的舍入确实可以进行比较。在 MAX_INT 处添加终止条件，“double n”然后起作用。

当`++n`无法递增 n 时，“float n”中会出现一个点，因此迭代器停止迭代，但这是另一回事！

下面的 Ada 版本创建了一个泛型，因此我可以使用任何浮点类型对其进行实例化。（异常处理程序是必要的，因为 2^31 - 1 转换为 32 位浮点数并返回溢出......）

```
with Ada.Text_IO;   
use Ada.Text_IO;

procedure FP_Torture is

    generic
       type Float_Type is digits <>;
    procedure Test_FP;

    procedure Test_FP is
       F : Float_Type;
    begin
       -- for ( n = 2; 1 / n * n == 1; ++ n ) ;
       for i in 2 .. Natural'Last loop
          F := Float_Type(i);
          exit when 1.0 / F * F /= 1.0;
       end loop;
       Put_Line(natural'image(natural(F)) & " (" 
               & Float_Type'image(1.0 - (1.0 / F * F)) & ")");

       -- for ( ; (int) ( 1 / n * n ) == 1; ++ n ) ;
       for i in 1 .. Natural'Last  loop
          F := Float_Type(i);
          exit when natural(1.0 / F * F) /= 1;
       end loop;
       Put_Line(Natural'image(Natural(F)) & " (" 
               & Float_Type'image(1.0 - (1.0 / F * F)) & ")");
    exception
       when Constraint_Error => 
           Put_Line("Error representing float " & Float_Type'image(F) 
                    & " as integer");
    end;

    type Big_Float is digits 18;

    procedure Test7 is new Test_FP(Float);
    procedure Test15 is new Test_FP(Long_Float);
    procedure Test18 is new Test_FP(Big_Float);

begin
    Test7;
    Test15;
    Test18;
end FP_Torture; 
```

# javascript - javascript regexp (|) 管道运算符与 (||) 逻辑运算符的工作方式相同吗？

> ID：13559826
> 
> 赞同：5
> 
> 时间：2012-11-26T06:39:50.993
> 
> 标签：javascript, regex, logical-operators

我知道如果匹配正则表达式两侧的子字符串之一，则 javascript 中的正则表达式 OR (|) 运算符匹配。

我还知道，在 JavaScript 中，逻辑 (||) OR 运算符仅在第一个操作数为假时才检查第二个操作数。

所以我想知道正则表达式（|）（也称为管道）或运算符是否以相同的方式工作，或者它首先匹配两个子字符串然后决定匹配。如果我没记错的话，我认为只有在左手子字符串不匹配时才应该检查第二个右手子字符串以提高性能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T07:05:50.867

是的，`|`在正则表达式中是短路。

例如，

```
"The | is short circuiting, NOT!".match(/The \| is short circuiting(?:|, NOT!)/) 
```

生产

```
["The | is short circuiting"] 
```

尽管

```
"The | is not short circuiting, NOT!".match(/The \| is not short circuiting(?:, NOT!|)/) 
```

生产

```
["The | is not short circuiting, NOT!"] 
```

语言[规范](http://es5.github.com/#x15.10.2.3)说

> 产生*式 Disjunction* :: *Alternative* `|` *Disjunction*评估如下：
> 
> 1.  评估替代方案以获得匹配器 m1。
> 2.  评估析取以获得匹配器 m2。
> 3.  返回一个内部 Matcher 闭包，它接受两个参数，一个 State x 和一个 Continuation c，并执行以下操作：
>     
>     > 一种。调用 m1(x, c) 并令 r 为其结果。
>     > 湾。**如果 r 不是失败，则返回 r。**
>     > C。调用 m2(x, c) 并返回其结果。

15.10.2.3 第 3b 行是规定短路的地方。

# java - Java编程构造函数理解

> ID：13559829
> 
> 赞同：3
> 
> 时间：2012-11-26T06:39:57.883
> 
> 标签：java, constructor

我是 Java 新手，并且正在学习如何通过它。如果子类有参数构造函数，超类是否需要有参数构造函数，如果子类有参数构造函数而超类有默认的无参数构造函数会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:43:11.277

这不是问题 - 但您可以`super()`在子类的构造函数中显式调用（作为子类构造函数中的第一条语句），或者让编译器为您执行 - 因为它隐式调用无参数构造函数（如果存在) 作为第一步。

做其中之一将“让班级知道”如何构建超级班级。

**例子：**

```
class A { 
//defaulut argumentless constructor is implicitly created
}

class B extends A {
  B(int x) { 
      super(); //invoking super()
      //rest of construction
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:50:59.047

是的，即使您在父类中没有参数化构造函数，您也可以在子类中拥有参数化/参数化构造函数。这取决于您将在子类构造函数（默认/参数化）中做什么，是否可以调用父构造函数。

要调用父构造函数，请使用“super();” 在子构造函数的第一行。如果您将一些参数传递给此 super() 方法的参数，那么它将尝试调用父类的参数化构造函数。

尝试对这些概念进行一轮实践，你会更加完美:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:42:54.490

简而言之：每个类只需要担心实例化自己。

如果超类有无参数构造函数而子类没有，那么子类就不需要向超类构造函数传递任何参数；只需调用它。但是，如果超类需要任何参数来实例化其任何成员，那么超类构造函数确实应该接受参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T06:48:04.267

不，如果子类包含参数构造函数，则不需要在超类中具有参数构造函数。

基本上，如果您为子类创建对象，则构造函数将从超类执行，如果父类具有默认构造函数。如果超类不包含任何默认构造函数，编译器将提供自己的默认构造函数。

# php - 液体高度 div

> ID：13559831
> 
> 赞同：0
> 
> 时间：2012-11-26T06:39:58.400
> 
> 标签：php, html, css, css-float

我的 CSS 布局有问题，我有一个包含两列的容器。两列的 CSS 如下所示。

```
 #project-desc{
    float: left;
    width: 500px; 
}

#project-images{
    float: right;
    width: 300px; 
} 
```

我必须浮动它们，因为我不知道如何让两列粘在左右。

问题是，根据 project-desc 中的内容，它会自动调整其高度。但是，容器不会相应地调整它的高度，从而使内容偏离实际容器。容器代码如下。

```
#project-space{
    margin: 10px auto;
    padding: 5px; 
    width: 800px;
    height: 100%;
    min-height: 250px;

    background: -webkit-gradient(linear, 0% 20%, 0% 100%, from(#fff), to(#fff), color-stop(.2, #f2f2f2));
border: 1px solid #ccc;
-webkit-box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);
} 
```

我想要的是让容器根据里面的内容高度调整它的高度。我尝试从 project-desc 中删除浮动选项并且它有效。但是当我向项目图像添加一些东西时，它位于项目描述的顶部。

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:28:28.757

“clearfix”技巧通常应用于容器以实现您想要的行为。谷歌会很快找到你的实现，加上某种形式的解释。

或者，您可以将容器本身向左或向右浮动。

# java - jasperreports - pdf字体粗体仅显示正常字体

> ID：13559835
> 
> 赞同：0
> 
> 时间：2012-11-26T06:40:23.010
> 
> 标签：java, fonts, jasper-reports, ireport

我已经阅读了很多关于此的问题。他们建议使用字体扩展，但我的 jasperreports 版本是**3.1.0**。根据我读到的字体扩展名没有添加到这个版本的 JR 中。那么我该怎么做才能在我的报告中显示粗体字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T07:24:00.873

对于那些遇到这个问题（困惑）的人，我只是依靠`Pdf Font Name`iReport 中的 textfields 属性中的过时。只需忽略 iReport 的已弃用警告，因为这似乎是唯一的方法

# java - 仅显示异常类型及其原因，而不是发生异常时的整个堆栈跟踪，而是显示到日志文件中

> ID：13559837
> 
> 赞同：0
> 
> 时间：2012-11-26T06:40:31.337
> 
> 标签：java, exception, logging, error-handling, struts2

我有一个问题，我不想在发生异常时显示完整的堆栈跟踪，而只显示异常类型。认为

```
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry 'null' for key 3
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
        at com.mysql.jdbc.Util.getInstance(Util.java:381)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1015)
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:956)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3491)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3423)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1936)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2060)
        at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2542) 
```

在这里，我只想将异常类型和异常原因写入我的日志文件，例如

```
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry 'null' for key 3 
```

那么如何实现这一点，我使用的是java，struts2和hibernate3。注意：请不要推荐日志框架，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:42:31.230

使用 `ex.getMessage()`它返回异常的详细消息字符串。

该类`Throwable`是 Java 语言中所有错误和异常的超类。因此，您将在此处找到有关 Javadoc 的更多详细信息。

[http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Throwable.html)

# css - CSS：子菜单绝对定位的子菜单

> ID：13559838
> 
> 赞同：1
> 
> 时间：2012-11-26T06:40:31.970
> 
> 标签：css, list, parent-child

此页面上的菜单：http: [//goldencraft.co/wp/](http://goldencraft.co/wp/)

CSS： http: [//goldencraft.co/wp/wp-content/themes/minecraft/style.css](http://goldencraft.co/wp/wp-content/themes/minecraft/style.css)

将鼠标悬停在`My Account`上面`View Order`。我希望`View Order`子列表位于右侧（绝对在旁边`View Order`）。如果您查看 CSS（见上文），您会注意到我没有指定`min-width`or`width`以外的属性`auto`，`100%`并且不会更改。

我只是在寻找一种将第二个子列表移动到其父级右侧的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:10:08.897

现在只需在样式表中添加这个 css

```
.sub-menu li {
    position: relative;
}

.sub-menu li ul.sub-menu {
    left: auto;
    position: absolute;
    right: -109px;
    top: 10px;
} 
```

结果是

![在此处输入图像描述](../Images/a9ff8c93d8fcd658a5b1ff70401db97a.png)

# image-processing - 使用 cuFFT 实现图像卷积的 GPU 库？

> ID：13559845
> 
> 赞同：1
> 
> 时间：2012-11-26T06:41:05.903
> 
> 标签：image-processing, cuda, fft, convolution

我一直在使用[Nvidia Performance Primitives (NPP)](https://developer.nvidia.com/npp)的图像卷积函数。但是，相对于图像大小，我的内核相当大，而且我听说 NPP 的卷积是直接卷积而不是基于 FFT 的卷积。（我不认为 N​​PP 源代码可用，所以我不确定它是如何实现的。）

我想看看基于[cuFFT](https://developer.nvidia.com/cufft)的卷积函数在我正在处理的图像处理应用程序中运行的速度有多快。

您可能会说“嘿，只需将您的图像放入 cuFFT 中，看看它有多快！” 如果我使用的是 Matlab，那你是对的——这是Matlab 中[的单行调用](https://stackoverflow.com/questions/12253984/linear-convolution-of-two-images-in-matlab-using-fft2?rq=1)：

```
%assuming the images are padded
convolved = ifft2(fft2(image).* fft2(filter)); 
```

* * *

但是，要让 cuFFT 进行图像卷积，需要大量的样板文件。因此，我正在寻找执行基于 cuFFT 的卷积并抽象出实现的代码。而且，确实，我确实发现了一些东西：

*   [这个 github repo](https://github.com/lumberlabs/fft_conv_op)有一个名为[cufft_sample.cu](https://github.com/lumberlabs/fft_conv_op/blob/master/cufft_sample.cu)的文件。我认为代码看起来很有希望，但我[在 repo 中发现了另一个文件，其中](https://github.com/lumberlabs/fft_conv_op/blob/master/fft_conv_op.py)包含说卷积实现产生不正确结果的注释：

 **```
 WARNING: GpuFFTConvOp currently don't return the good answer
    TODO: extend to cover more case, as in many case we will crash! 
```

*   在我的脑海中，[Kitware VTK/ITK](http://www.vtk.org/Wiki/ITK/Release_4/GPU_Acceleration#GPUImage)代码库提供了基于 cuFFT 的图像卷积。唉，事实证明（充其量）执行基于 cuFFT 的例程是[计划在未来发布的](http://www.vtk.org/Wiki/ITK/Release_4/GPU_Acceleration#Target_architecture)。

*   我[在 Matlab File Exchange 上找到了一些](http://www.mathworks.com/matlabcentral/fileexchange/20220-fast-2d-gpu-based-convolution)执行 2D 卷积的代码。重要部分在 C/CUDA 中实现，但有一个 Matlab 包装器。我正在努力剥离 Matlab 包装器以支持纯 C/C++/CUDA，但我仍然很好奇是否有任何更优雅和/或经过验证的解决方案。

**这三个选项中有什么建议吗？**

**就基于 cuFFT 的图像卷积的预构建代码而言，还有什么其他内容？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:32:41.967

你可以试试[arrayfire](http://www.accelereyes.com/arrayfire/c/)。

在 ArrayFire 中，您可以执行以下操作。

```
array image(rows, columns, h_image);
array filter(frows, fcols, h_filter);
array res = convolve(image, filter); 
```

根据过滤器的大小，conolve 命令使用 cufft 或更快的手动调整内核。如果您更喜欢使用`fft2`，您可以执行以下操作

```
array res = ifft2(fft2(image) * fft2(filter)); 
```

但我强烈建议您改用`convolve`它，因为它已经过优化以获得最佳性能。

更多有用的链接：

1.  [傅里叶变换](http://www.accelereyes.com/arrayfire/c/group__fft__mat.htm)
2.  [卷积和过滤](http://www.accelereyes.com/arrayfire/c/group__convolution__mat.htm)

免责声明：

*   ArrayFire 不是开源的。但是它有一个免费使用的版本。
*   我在 AccelerEyes 工作并开发 arrayfire。我链接到我们的产品是因为 @solvingPuzzles 专门要求提供一个类似于 arrayfire 正在做的库。**

# java - 可以在其他程序上打开的文件的 ZipException

> ID：13559847
> 
> 赞同：1
> 
> 时间：2012-11-26T06:41:13.590
> 
> 标签：java, zip, zipfile

我有以下异常

```
java.util.zip.ZipException: error in opening zip file
    at java.util.zip.ZipFile.open(Native Method)
    at java.util.zip.ZipFile.<init>(ZipFile.java:114)
    at java.util.zip.ZipFile.<init>(ZipFile.java:75)
at test.Test.main(Test.java:56) 
```

在线

`ZipFile file = new ZipFile(myfile);`

这仅发生在特定的 zip 文件中，其他文件工作文件，但我可以在其他程序中打开该文件，例如`winRAR`和`7zip`. 我用的是windows xp。

看起来像是一些损坏的文件，但如果有人知道这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:53:57.390

2 件事要检查：

1.  这可能是一个环境问题，即通过使用其他一些外部程序（如 winrar）来提取 zip，您还更改了执行上下文：进程、用户、权限等......也许您的 Java 进程由于某种原因无法访问该文件。尝试以管理员身份运行您的 Java，看看它是否与此相关。

2.  尝试一些其他 zip 文件，或者尝试从相同的 java 代码创建一个 zip 文件，然后将其解压缩，就像您尝试提取有问题的 zip 一样（即相同的 java 进程、相同的代码、相同的用户和权限等） . 这将允许您查明问题。

# java - 在不同的视图中更改文本视图

> ID：13559848
> 
> 赞同：0
> 
> 时间：2012-11-26T06:41:14.177
> 
> 标签：java, android, textview, android-view

我正在尝试通过在切换到该视图之前更新 textview 中的文本来准备要显示的视图。

我已将 textview 变量声明为 public，在 OnCreate 中对其进行了初始化

```
 Info = (TextView) findViewById(R.id.BackDialogText); 
```

然后当需要更改文本时，我得到一个 nullpointerException

```
Info.setText(TheString);
setContentView(R.layout.mydialog_layout); 
```

我在没有 setText 的情况下运行了该应用程序，它运行良好，向我展示了我的预定义文本视图。我是否缺少一些技巧来更新视图的文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:52:36.537

只需交换线路位置。

下面是工作片段。

```
setContentView(R.layout.mydialog_layout);
Info.setText(TheString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:58:53.757

基本上在你设置视图之前

```
 setContentView(R.layout.mydialog_layout); 
```

对于您的活动，您不能在代码中使用视图内的元素。所以你的代码中必须有这样的东西

```
setContentView(R.layout.mydialog_layout);
 Info = (TextView) findViewById(R.id.BackDialogText); // you cannot initialize your view before  setcontentview
 Info.setText(TheString);  //this line must be always called after setContentView 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:43:47.867

findViewById() 在您调用它的视图中查找视图。

编辑：对不起，我的 Mac 崩溃了，我无法进一步扩展。基本上，在 Android 中，只有前台 Activity 存在于任何一点。因此，即使从另一个 Activity 修改一个 View 也不是一个好主意。如果它只是您要修改的文本，那么您有几个选项，最简单的方法是在其中一个活动中拥有一个公共静态变量，并使用该变量调用 setText。

例如：

```
public class Activity1 extends Activity {
    private static theString = "";

    public static void setString(String s) { 
         theString = s;
     }

    public void onCreate(Bundle b) {
        super.onCreate(b);
      setContentView(R.layout.mydialog_layout);
    Info = (TextView) findViewById(R.id.BackDialogText);

      Info.setText(TheString);
    }
} 
```

然后在 Activity2 中你可以调用：

```
Activity1.setString("New String"); 
```

# javascript - 为什么我需要 parseInt() 来避免 NaN？

> ID：13559851
> 
> 赞同：1
> 
> 时间：2012-11-26T06:41:31.937
> 
> 标签：javascript, parseint

我有一个包含 2 个值的二维数组，我想用一点信息打印差异。

```
var array = [[0,2],[3,4]];
console.log(array[0][1]-array[0][0]) //prints '2'
console.log(array[0][1]-array[0][0] + ' is the number') //prints '2 is the number'
console.log('The number is' + array[0][1]-array[0][0]) //prints 'NaN'
console.log('The number is ' + parseInt(array[0][1]-array[0][0], 10)) //prints 'The number is 2' 
```

为什么我需要在这里在结果*之前*`parseInt()`打印一条消息，但在结果*之后*打印文本，或者只是单独的结果，是 A-OK？

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T06:44:05.857

实际上，`parseInt`没有区别。将减法放在括号中很重要。

您的代码基本上是在说：

```
"The number is" + array[0][1]-array[0][0]
// becomes...
"The number is 2"-array[0][0]
// is cast to...
parseInt("The number is 2")-array[0][0];
// which is...
NaN-0
// or just...
NaN 
```

这都是关于操作顺序的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:45:32.347

这是因为 JavaScript 遵循从左到右的数学顺序。由于您从字符串开始，它假定您正在连接字符串。**

# objective-c - Xcode Objective-C：为什么 UIImage imageNamed 方法会将所有其他图像重置为默认位置？

> ID：13559858
> 
> 赞同：3
> 
> 时间：2012-11-26T06:42:06.977
> 
> 标签：objective-c, xcode

当我使用 imageNamed 方法时，它会将我应用程序中的所有其他图像重置回它们的默认位置，这是我不希望发生的。例如，我有一个带有音符图像（note.png）的音乐谱号，允许用户将其拖到谱号上的新位置。音乐谱号下方是一个图像（finger.png），显示您的手指应该放在给定乐器上的哪个位置以演奏选定的音符。因此，当用户将笔记从笔记 A 拖到笔记 B 时，我尝试使用 imageNamed 方法将手指图像从“fingerA.png”更改为“fingerB.png”。它非常适合更改手指图像，因为现在显示“fingerB.png”，但我的 note.png 被移回应用程序加载时开始的默认位置（在这种情况下，note.png 回到 noteA 和“手指B.png”

下面是一个代码片段，可让您了解我是如何执行此操作的。

```
 -(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
    {
        //location.y is where the user stopped dragging the note
        int yloc = location.y; 
        if(yloc > 40 && yloc <=80)
        {
            //noteImage is just the note.png that is being move on clef
            noteImage.center = CGPointMake(120,60);
            fingerImage.image = [UIImage imageNamed:@"fingerB.png"];
        }
    } 
```

我尝试交换两行代码并先更改手指图像，然后再设置音符图像的坐标。我还尝试保存笔记图像的坐标并在以后恢复它们。我已经开始没有想法了，我希望对 Objective-C 或 Xcode 有更多了解的人对如何解决这个问题有一些智慧的话。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:45:19.083

您可能正在情节提要中使用自动布局（它是 ios6 及更高版本的默认设置）。每当再次布置视图控制器的视图时，这将重置 UI 元素的位置。各种事件都可能导致这种情况，设置图像视图的图像很可能就是其中之一。

使用自动布局，您无需设置框架或中心，而是编辑约束。关闭自动布局可能比这样做更容易 - 在界面构建器中，选择文件检查器并取消选中“使用自动布局”。

如果您想继续使用 Autolayout，您需要定义约束（x 位置和 y 位置），为它们创建出口并编辑`constant`约束的属性，而不是直接设置框架。

# php - 使用工作面试应用程序的用户会话将新行插入表中

> ID：13559860
> 
> 赞同：0
> 
> 时间：2012-11-26T06:42:26.223
> 
> 标签：php, mysql

我有一个工作网站，里面有一个按日期列出空缺职位的页面。我网站的登录用户点击了可用的申请日期（从按日期排序的动态列表中）。
目前有 2 个表，用户和作业，它们是固定的。

一旦用户选择了一个日期，我想知道最好的方法是从两个表中获取列数据并将其插入到我创建的名为“应用程序”的新表中。

此“应用程序”表有 2 列：用户 ID（与特定用户相关）和作业 ID（与用户单击的作业相关）。

我是新手，在两个部分遇到问题： 1\. 使用会话收集当前用户的 ID 2\. 通过发布从我的动态列表中收集工作 ID。

我即将推出的 7 个工作的动态列表如下所示：

```
$dynamicList = "";
$sql = mysql_query("SELECT * FROM jobs 
WHERE status = '1' 
ORDER BY date ASC LIMIT 7");
$jobCount = mysql_num_rows($sql);
if ($jobCount > 0) {
while($row = mysql_fetch_array($sql)){ 
         $id = $row["id"];
         $job_date = $row["date"];
         $pay = $row["pay"];
         $dynamicList .= '<table width="100%">
    <tr>
      <td width="17%" valign="top"><a href="job.php?id=' . $id . '"></a></td>
      <td width="83%" valign="top">' . $job_date . '<br />
        Status' . $pay . '<br />
        <a href="reserve_job.php?id=' . $id . '">Apply Here</a></td> 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:47:34.650

更改，这个 LOC，然后让我知道这就是你要找的。

```
while($row = mysql_fetch_array($sql)) 
```

至

```
while($row = mysql_fetch_array($sql, MYSQL_ASSOC)) 
```

# iphone - 检查用户是否以编程方式登录到 Appstore？

> ID：13559870
> 
> 赞同：0
> 
> 时间：2012-11-26T06:43:14.730
> 
> 标签：iphone, objective-c, ios, app-store

我的要求是我需要检查用户是否登录到商店。在此基础上，我需要实现一些功能。如果无法做到这一点，请给我一些文档链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T06:47:13.440

这是不可能的。没有 API 可以了解有关用户及其 iTunes 帐户的任何信息。没有此链接，因为没有可链接的内容。

# jquery - Datepicker 没有从当前月份开始

> ID：13559877
> 
> 赞同：0
> 
> 时间：2012-11-26T06:43:44.643
> 
> 标签：jquery

我从网页上复制了一个 javascript 文件，它使用了一个日期选择器。我注意到的是，该月并没有从当前月份开始。这是它的代码：

```
$( ".datepicker" ).datepicker({ 
        defaultDate: +7,
        showOtherMonths:true,
        autoSize: true,
        appendText: '(dd-mm-yyyy)',
        dateFormat: 'dd-mm-yy'
    }); 
```

那么如何让它开始到当月呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:47:36.440

也许是因为你加了 7 天？下个月会这样吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:47:46.150

删除此行或减少编号。天数

```
defaultDate: +7, 
```

因为它在当前日期增加了 7 天，这就是它在下个月显示的原因

# cocoa - 为什么 -[NSObjectController selection] 返回一个代理对象？

> ID：13559879
> 
> 赞同：0
> 
> 时间：2012-11-26T06:43:47.420
> 
> 标签：cocoa, foundation

NSObjectController 及其子类为选择返回一个代理对象。我想了解他们为什么选择这样设计。该文档似乎没有说明为什么会这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T01:47:12.093

Apple 的[Cocoa Bindings Programming Topics](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaBindings/Concepts/CntrlSelection.html)有这样的说法：

> 您可以建立与控制器的选择方法或 selectedObjects 方法的绑定。但是，您应该避免通过 selectedObjects 数组进行绑定，例如 selectedObjects.name。相反，您应该使用 selection.name。同样，您应该避免通过 selectedObjects 返回的数组来观察键。随着选择的变化，选择返回的代理更有效地管理键值观察的变化。

我想你会发现你的答案就在最后一句话。

对于它的价值，`[objectController valueForKeyPath:@"selection.self"]`返回所选对象本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T01:35:54.447

[还有](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaBindings/Concepts/CntrlSelection.html#//apple_ref/doc/uid/TP40002146-BCICADHC)：

> 通常你需要直接访问控制器当前选择的对象，而不是选择返回的代理对象。NSObjectController 及其子类提供了 selectedObjects 方法来允许您这样做。此方法返回一个数组，其中包含接收者当前选择的对象。NSObjectController 的实现返回一个包含单个对象的数组，即内容对象。

# c# - ASP.NET MVC 模型与 knockout.js 的绑定

> ID：13559888
> 
> 赞同：1
> 
> 时间：2012-11-26T06:44:28.240
> 
> 标签：c#, asp.net-mvc-3, knockout.js

我想对使用 knockout.js 创建的表单元素进行一些服务器端模型绑定，使用附加到每个动态创建的 DOM 元素的一些自定义名称属性。我知道我可以使用 AJAX，但本机 HTML 表单帖子现在对我来说效果更好。js 文件如下所示：

```
function MyModel(){ 
   var self = this;
   var count = 0;
   var insertItem = function(eleToInsertAfter){
       var index = self.items.indexOf(eleToInsertAfter),
           notFound = -1;

       var item = {
           type: '',
           description: ''
       };

       if(index == notFound){
           self.items.push(item); // there are no items yet, just push this item
       } else {
           self.items.spilce(++index, 0, item); // insert after the 'eleToInsertAfter' index
       }
       ++count;
   }

   self.title = ko.observable('');
   self.items = ko.observableArray([]);

   self.insert = function(eleToInsertAfter){
       insertItem(eleToInsertAfter);
   }

   // insert the first item
   self.insert({
           type: '',
           description: ''
       });
}
   ko.applyBindings(new MyModel()); 
```

html 标记如下所示：

```
<form method="post" action="/controller/action/">
     <input type="text" data-bind="value: title" />
     <ol data-bind="foreach: items">
          <li> 
               <!--I'd like to achieve this effect *name="[0].type"* and *name="[0].description"*, and so on -->
               <input type="text" data-bind="value: type, *attr: {name = '['+$index+'].type'}*" />
               <input type="text" data-bind="value: description, *attr: {name = '['+$index+'].description'}*" /><br />
               <button data-bind="click: $root.insert">Add Item</button>
          </li>
     </ol>
     <input type="submit" value="Submit" />
</form> 
```

如果我能达到上述效果，那么 MVC 控制器动作可能如下所示：

```
public ActionResult action(MyModelCS model){
    // do something

    return View();
} 
```

MyModelCS 看起来像这样：

```
public class MyModelCS {
    public string title { get; set; }
    public string[] type { get; set; }
    public string[] description { get; set; }
} 
```

我只使用 jQuery 实现了与此类似的版本，但现在我需要使用 Knockout.js 来执行类似的版本。我是 Knockout 的新手，但我搜索了文档以找到一些帮助，但没有任何运气......请帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:51:00.277

`$index`是[一个可观察的](http://knockoutjs.com/documentation/binding-context.html)，所以你需要解开：`$index()`

```
<input type="text" 
   data-bind="value: type, attr: {name = '['+$index()+'].type'}" />
<input type="text"
   data-bind="value: description, attr: {name = '['+$index()+'].description'}" /> 
```

# java - 字符集编码内存不足

> ID：13559889
> 
> 赞同：0
> 
> 时间：2012-11-26T06:44:36.883
> 
> 标签：java, android, character-encoding

我有一个非常大`ByteBuffer`的，大小约为几 MB。当我`ByteBuffer`进入

```
FileChannel fc = new FileInputStream(new File(decodedUri)).getChannel();
ByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
CharBuffer cb;
if (encoding == null)
    encoding = "UTF-8";
cb = Charset.forName(encoding).decode(bb); 
```

我`OutOfMemoryError`每隔一次就可以跟踪堆栈跟踪`Charset.decode`。正是这一行触发了错误。

```
cb = Charset.forName(encoding).decode(bb); 
```

我该如何解决？

因为第一次启动应用程序时 OutOfMemoryError 没有被触发，只有我第二次尝试启动它时，才会出现此错误。我想知道我需要做的缓冲区是否有某种刷新？或者类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:18:54.487

如果你想分块读取那个巨大的文件，你可以这样做`AsyncTask`：

```
static class StreamTask extends AsyncTask<String, Void, Integer> {
    private static final int BUFFER_LENGTH = 1024 * 8; // Adjust to taste

    // Param #0 = file name
    // Param #1 = charset name
    @Override
    protected Integer doInBackground(String... params) {

        if (params.length != 2) {
            throw new IllegalArgumentException();
        }

        int chars = 0;
        CharsetDecoder cd = Charset.forName(params[1]).newDecoder();
        try {
            FileInputStream fin = new FileInputStream(params[0]);
            try {
                FileChannel fc = fin.getChannel();
                ByteBuffer bb = ByteBuffer.allocateDirect(BUFFER_LENGTH);
                CharBuffer cb = CharBuffer.allocate(BUFFER_LENGTH);

                while (fc.read(bb) != -1) {
                    // Flip the buffer, decode the contents
                    bb.flip();
                    cd.decode(bb, cb, false); // You should probably look at CoderResult also.
                    // Flip & extract the decoded characters.
                    cb.flip();
                    chars += cb.remaining();
                    onCharacters(cb.array(), cb.position(), cb.remaining());
                    cb.clear();
                    // Prepare the buffer for reuse.
                    bb.compact();
                }

                // fc.read(..) returned -1 -> EOF, but bb may still contain
                // stuff to decode.
                bb.flip();
                cd.decode(bb, cb, true);
                cd.flush(cb);
                cb.flip();
                if (cb.remaining() > 0) {
                    chars += cb.remaining();
                    onCharacters(cb.array(), cb.position(), cb.remaining());
                }
            } finally {
                fin.close();
            }

        } catch (IOException e) {
            chars = -1;
        }
        return chars;
    }

    protected void onCharacters(char[] ch, int offset, int length) {
        // Do something with the characters (still running in the AsyncTask thread)
    }
} 
```

# java - 带方括号的 JSON 错误

> ID：13559890
> 
> 赞同：0
> 
> 时间：2012-11-26T06:44:39.633
> 
> 标签：java, xml, json

我的 XML 文件看起来像这样

```
<Reading>
<Item Month="_October.xml">
    <kWhReading Firstday="1" />
    <kWhReading Lastday="552" />
</Item>
</Reading> 
```

然后使用这行代码

`JSONArray jsonArray = (JSONArray) JSONSerializer.toJSON( json.toString() );`

我懂了

`[{"@Month":"_October.xml","kWhReading":[{"@Firstday":"1"},{"@Lastday":"552"}]}]`

然后，使用这个

`JSONObject jsonobject = (JSONObject) jsonArray.get(0);`

我懂了

`{"@Month":"_October.xml","kWhReading":[{"@Firstday":"1"},{"@Lastday":"552"}]}`

现在的问题是，我想`Lastday`从`kWhReading`using中获得价值

`JSONObject readingkWhLast = jsonobject.getJSONObject("kWhReading");`

但它不起作用，它抛出异常

```
net.sf.json.JSONException: JSONObject["kWhReading"] is not a JSONObject.
at net.sf.json.JSONObject.getJSONObject(JSONObject.java:2058)
at com.syntronic.bean.RecentUsage.doPost(RecentUsage.java:82)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

我很确定它与封闭的方括号有关`Firstday`，`Lastday`但我不知道如何删除它。任何人都可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T14:24:37.363

一旦你得到 jsonArray：

```
[{"@Month":"_October.xml","kWhReading":[{"@Firstday":"1"},{"@Lastday":"552"}]}] 
```

然后，您需要使用带有索引号的 getJSONObject() 来获取该数组中的元素。第二个是“kWhReading”，所以：

```
JSONObject kWhReadObject = jsonArray.getJSONObject(1); 
```

那应该把你放在这里：

```
{"kWhReading":[{"@Firstday":"1"},{"@Lastday":"552"}]} 
```

要获取 kWhReading 的值（它本身就是一个数组）：

```
JSONArray kWhReadArray = kWhReadObject.getJSONArray("kWhReading"); 
```

现在你在这里：

```
[{"@Firstday":"1"},{"@Lastday":"552"}] 
```

回到索引号。同样，您想要第二个：

```
JSONObject lastDayObj = kWhReadArray.getJSONObject(1); 
```

最后：

```
String lastDay = lastDayObj.getString("@Lastday"); 
```

文档在这里：http: [//json-lib.sourceforge.net/apidocs/net/sf/json/JSONArray.html](http://json-lib.sourceforge.net/apidocs/net/sf/json/JSONArray.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:56:59.680

从未使用过 JSON 库，但这应该是在正确的轨道上

```
JSONObject readingkWhLast = jsonobject.getJSONArray("kWhReading").get(1); 
```

从您`jsonobject`检索`JSONArray`命名`"kWhReading"`然后检索偏移量 1 处的元素（第二个对象）。

这些都在 API 文档中。您确实应该退后一步并彻底阅读文档，以便了解该库的功能。

# android - 生成资源 ID 时出现 aapt 错误

> ID：13559895
> 
> 赞同：2
> 
> 时间：2012-11-26T06:44:49.970
> 
> 标签：android, aapt

我在 Eclipse 中使用 Android 菜单下的“提取 Android 字符串”选项，并在生成我的资源 (R) 文件时突然崩溃。我在这里完全不知所措。通过将两个项目中的目标 API 从 15 切换到 16 并返回，我已经让它编译一次，但它似乎是侥幸。

我正在使用 Actinbar Sherlock，它在生成一些资源 ID 时会发出便便。Actionbar Sherlock 构建只是找到我的使用 ActionBar Sherlock 的项目失败。

我打开了构建的详细日志记录，您可以看到它只是在打印语句的中间崩溃。

```
... Many working lines like the one below removed...
[2012-11-26 00:32:36 - MyProject]     (new resource id abs__action_bar_tab_bar_view from /.../ActionBarSherlock/library/res/layout/abs__action_bar_tab_bar_view.xml)
[2012-11-26 00:32:36 - MyProject]     (new resource id abs__action_bar_title_item from /.../ActionBarSherlock/library/res/layout/abs__action_bar_title_item.xml)
[2012-11-26 00:32:39 - MyProject]     (new resource id abs__action_m
[2012-11-26 00:32:39 - MyProject] 'aapt' error. Pre Compiler Build aborted. 
```

编辑：我已经删除了我所有的 Actionbar Sherlock 依赖项，但仍然有同样的问题

```
[2012-11-26 12:22:11 - MyProject]     (new resource id details_title from /.../res/layout/details_title.xml)
[2012-11-26 12:22:13 - MyProject]     (new resource id event_details from /.../res/layout/even
[2012-11-26 12:22:13 - MyProject] 'aapt' error. Pre Compiler Build aborted.
[2012-11-26 12:22:14 - MyProject] Starting full Package build. 
```

如您所见，它在编译 event_details.xml 期间损坏了，所以我只是将文件全部删除并生成了我的 R 文件，但这似乎是侥幸，我再次添加了事件，它如我预期的那样失败了，我删除了事件再次文件，现在我在另一个文件上失败了。

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:51:45.473

我恢复了所有更改，然后将它们一一添加回来，而无需使用插件中的重构工具，问题就消失了。我的猜测是重构工具以某种方式损坏了我的一个文件。使用风险自负:)

# c# - DataSourceUpdateMode 等效 WPF

> ID：13559896
> 
> 赞同：0
> 
> 时间：2012-11-26T06:44:54.207
> 
> 标签：c#, wpf, winforms

在 Windows 窗体中，我们可以选择将控件绑定到属性，然后将 DataSourceUpdateMode 设置为 OnPropertyChanged。

如何在 WPF 中实现这一点？

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:02:47.520

WPF 中的 DataSourceUpdateMode 等价于`UpdateSourceTrigger`.

# svn - svn - 删除的文件仍然显示为未版本化（带有 + 号）并且更新它不会恢复文件

> ID：13559899
> 
> 赞同：0
> 
> 时间：2012-11-26T06:45:05.657
> 
> 标签：svn

当我这样做时`svn st`，我得到这样的一行：

```
 !  +    src/com/some_file.java 
```

我已经从文件系统中删除了它，但它仍然显示出来。我明白那个 ！代表未版本化的文件，但代表什么`+`？

该文件存在于存储库中。如果我这样做`svn up`了，该文件应该已从存储库中恢复，但没有任何反应。因此，在服务器启动期间，找不到该文件，并引发错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:13:37.780

“！” 表示“缺失”，而不是“未版本化”（“？”表示“未版本化”）。如果您使用文件系统方式删除文件，则会发生这种情况，但不是`svn rm`.

恢复文件运行`svn revert src/com/some_file.java`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:20:28.510

只是一个猜测：你告诉 SVN 你添加了这个文件（直接或通过一些插件），然后从磁盘中删除了这个文件。

在这种情况下，SVN 记得该文件已添加，但无法在磁盘上找到它。

如果猜测正确，您应该恢复添加操作。对于命令行，它是“svn revert”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:49:23.073

您需要执行“svn rm”才能从存储库中删除文件（而不仅仅是从本地副本中）。如果它是无版本的，它不应该在存储库中，反之亦然。也许这是一个尚未提交的添加文件。“ [svn rm](http://svnbook.red-bean.com/en/1.6/svn.ref.svn.c.delete.html) ” 应该将它从要添加的文件列表中删除。

# c# - asp.net C# 和 Linq 问题

> ID：13559901
> 
> 赞同：1
> 
> 时间：2012-11-26T06:45:19.947
> 
> 标签：c#, asp.net, linq

我有一个下拉列表，我试图从 DataTable 中填充。每行包含短日期，第二列包含月份名称和年份。

像这样的东西：

```
6/11/2011      June 2011
7/11/2011      July 2011 
```

我正在尝试将第二列放入下拉列表中。

```
dateListDropDown.DataSource = DateList.Rows.Select(x=> x[1].ToString());
dateListDropDown.DataBind(); 
```

但我认为我的 Linq 不正确。

谁能看到我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:48:31.780

尝试以下（假设数据不为空）

```
 var list = new List<string>();

 foreach(var row in DateList.Rows)
   list.Add(row[1] as string);

 dateListDropDown.DataSource = list; 
```

正如您在评论中提到的，错误是因为 DataRowCollection 没有实现 IEnumerable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:05:08.007

试试这个：

```
dateListDropDown.DataSource = DateList.AsEnumerable().Select(x => x[1].ToString());
dateListDropDown.DataBind(); 
```

或者

```
dateListDropDown.DataSource = (from a in DateList.AsEnumerable()
                                         select a).ToList();
dateListDropDown.DataTextField = "YourSecondColumnName";
dateListDropDown.DataBind(); 
```

# ios - 有没有一种简单的方法可以通过标签检索 UITabBarItem？

> ID：13559903
> 
> 赞同：2
> 
> 时间：2012-11-26T06:45:26.040
> 
> 标签：ios, uitabbarcontroller, uitabbar, uitabbaritem

UITabBarItem 的 'Tag' 属性听起来很有用，但在实践中，如何使用它？根据[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarItem_Class/Reference/Reference.html)：

> `- (id)initWithTitle:(NSString *)title image:(UIImage *)image tag:(NSInteger)tag Parameters`
> 
> ***标题***
> 
> 项目的标题。如果`nil`，则不显示标题。
> 
> ***图片***
> 
> 项目的图像。如果`nil`，则不显示图像。
> 
> 标签栏上显示的图像来自此图像。如果此图像太大而无法放在选项卡栏上，则会对其进行缩放以适应。标签栏图像的大小通常为 30 x 30 点。源图像中的 alpha 值用于创建未选中和选中的图像——不透明的值将被忽略。
> 
> ***标签***
> 
> **接收者的标签，一个整数，可用于识别应用程序中的条形项目对象。**

但我发现通过标签检索 UITabBarItem 的唯一代码类似于以下内容：

```
for (UIViewController *viewController in stTabBarController.viewControllers) {
    if (viewController.tabBarItem.tag == MyTabBarItemTag) {
        // do stuff
    }
} 
```

我可以把它作为一个类别函数，但似乎我错过了一些东西。肯定已经实施了这样的事情吗？还是我只是错过了标签属性的要点？

# iphone - 如何在 iPhone SDK 中加载 FBGraph 登录 Webview 时管理空白屏幕

> ID：13559907
> 
> 赞同：0
> 
> 时间：2012-11-26T06:45:49.287
> 
> 标签：iphone, xcode, facebook, facebook-graph-api, fb-graph

我`FBgraph`在登录屏幕后实现API，它显示带有标签“”的白屏`Success`，当时我需要`Activity indicator`。请给我解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:53:55.487

转到 FBGraph.m 并添加`ActivityIndicator`以下方法

```
-authenticateUserWithCallbackObject 
```

并`Remove ActivityIndicator`在以下方法中

```
 - (void)webViewDidFinishLoad:(UIWebView *)_webView
{
     // Remove Indicator here
} 
```

# java - 如何测量由单个字符串呈现并受宽度限制的文本的高度，所以它是多行的？

> ID：13559908
> 
> 赞同：0
> 
> 时间：2012-11-26T06:45:50.463
> 
> 标签：java, swing, fonts

我要绘制多行文本。文本受宽度限制，它不适合那里，所以我想那里有多少行，即我需要矩形的高度。我在 Java 中有字体变量。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:56:10.447

试试这个[http://java-sl.com/tip_text_height_measuring.html](http://java-sl.com/tip_text_height_measuring.html) 如果你在`JEditorPane/JTextPane`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:38:54.123

看看[测量文本](http://docs.oracle.com/javase/tutorial/2d/text/measuringtext.html)，特别是[绘制多行文本](http://docs.oracle.com/javase/tutorial/2d/text/drawmulstring.html)

# c# - 从列表中获取新的排序列表，我只需要 x 个项目，并且不想在获取顶部项目之前对整个列表进行排序

> ID：13559910
> 
> 赞同：3
> 
> 时间：2012-11-26T06:46:00.130
> 
> 标签：c#, list, sorting

我有一堂课

```
public class Entity : IComparable<Entity>
{

    public float Priority { get; set; }

{ 
```

我创建了一个列表并在其中填充了 Y 项没有特定顺序的项目

```
list <Entity> = get_unorderd_list(); 
```

现在我想根据优先级值对列表进行排序，但我只关心以正确的顺序获得最高的 X 项，出于性能原因，我不想使用常规的 .sort() 方法，因为 X 很多小于 Y。

我应该编写自定义排序方法吗？或者有没有办法做到这一点？

编辑：不是在谈论使用 .max() 获得一个单一的价值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:03:02.957

> 我应该编写自定义排序方法吗？

我不知道从 .NET 本身轻松做到这一点的方法。当我[为 Edulinq 实现排序时](http://msmvps.com/blogs/jon_skeet/archive/2011/01/07/reimplementing-linq-to-objects-part-26d-fixing-the-key-selectors-and-yielding-early.aspx)，我采用了这种方法 - 整个排序是快速排序，但我只排序了我需要的排序，以便返回迄今为止的结果。

*现在，这仍然是一种通用方法 - 如果您事先*知道需要多少结果，您可能会做得更好。您可能想要构建一个基于堆的解决方案，其中您有一个有界堆（最大大小 X），然后迭代您的输入，在您进行时将值添加到您的堆中。一旦你填满了第一个 X 元素，你就可以开始丢弃小于最小堆元素的新元素，甚至不需要查看树的其余部分。对于其他元素，您执行正常操作来插入元素，保持堆内的顺序。

有关如何构建堆的更多信息，请参阅[关于存储为数组的二进制堆的 Wikipedia 文章。](http://en.wikipedia.org/wiki/Binary_heap#Heap_implementation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:55:09.260

如果你的意思是 MAX 只是使用 linq Max 来查找最高优先级的项目。你不能写比 Max 更有效的方法，因为你必须比较列表中的所有项目才能找到 max 无论如何。

```
var highestPeriorityItem = unorderd_list.Max(x=>x.Periority); 
```

**编辑：**

还有另一种比这更有效的方法，那就是从一开始就保持列表排序。这意味着你必须保持列表在每次插入时都排序（按排序顺序插入项目）。这样找到最大项目的`O(1)`时间复杂度是 ，插入新项目的时间复杂度是`O(1) < x < O(N)`。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T06:57:34.303

问题是未排序列表中的最后一项可能是 X 中的最高项，因此您将不得不遍历我应该认为的整个 Y。

# javascript - 无法让我的正则表达式匹配

> ID：13559912
> 
> 赞同：0
> 
> 时间：2012-11-26T06:46:07.187
> 
> 标签：javascript, regex

我在javascript中的正则表达式遇到了一些问题。我有以下代码，我认为应该匹配，但事实并非如此。

```
var rgx = new RegExp("{\d+:(\d+)}");

if (rgx.test("{0:00000}") == true) {
    alert("match");
}
else
{
    alert("no match");
} 
```

我不确定是否应该在这里使用 test()。我真的很想在我的正则表达式中抓住这个群体，但 exec() 似乎给了我相同的结果。

那么我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T06:49:49.813

问题是您需要转义正则表达式中的 \ 字符：

```
var rgx = new RegExp("{\\d+:(\\d+)}"); 
```

或者，您可以使用文字语法：

```
var rgx = /{\d+:(\d+)}/; 
```

要捕获结果，您还应该使用 .match 函数，而不是 test 或 exec。如果不匹配，它将返回 null，如果匹配，则返回一个至少包含一个元素的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:57:09.460

正则表达式存在多个问题：

```
var rgx = new RegExp("{\d+:(\d+)}"); 
```

首先（首先由 syazdani 指出），您必须对反斜杠进行字符串转义：

```
var rgx = new RegExp("{\\d+:(\\d+)}"); 
```

或者更好的是使用正则表达式文字：

```
var rgx = /{\d+:(\d+)}/ 
```

其次，在正则表达式`{`中`}`有特殊含义，应该转义：

```
var rgx = /\{\d+:(\d+)\}/ 
```

第三，正如 Ian 所说，您可能希望确保匹配整个字符串：

```
var rgx = /^\{\d+:(\d+)\}$/ 
```

* * *

`RegExp#test`字符串是否匹配返回布尔值 true/false。

`RegExp#exec`如果字符串匹配，或者如果字符串不匹配，则返回一个包含匹配项和所有捕获组的数组`null`：

```
var matches = /\{\d+:(\d+)\}/.exec("{0:000000}");
if(matches){
  console.log(matches[1]); //logs "000000"
} 
```

# windows - 在 Windows 8 中注册协议处理程序

> ID：13559915
> 
> 赞同：15
> 
> 时间：2012-11-26T06:46:20.743
> 
> 标签：windows, windows-8, protocol-handler

我正在尝试注册将处理链接打开的应用程序，例如[http://stackoverflow.com](http://stackoverflow.com)。我需要为 Windows 8 明确执行此操作，我在早期版本的 Windows 中使用它。根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/hh848047.aspx)，这在 Win8 中发生了变化。

我浏览了 MSDN 上的默认程序页面 (msdn.microsoft.com/en-us/library/cc144154.aspx) 页面。它提供了有关处理文件类型的出色演练，但对协议的详细信息却很少。 [将应用程序注册到 URL 协议](http://msdn.microsoft.com/en-us/library/aa767914(v=VS.85).aspx)仅涉及设置新协议的步骤，而不涉及如何正确地将新处理程序添加到现有协议。

我还尝试了其他 SO 帖子中概述的注册表设置。

还有一件事，该应用程序不是 Metro/Windows Store 应用程序，因此在清单中添加一个条目对我不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-28T19:17:41.453

You were on the right track with the Default Programs web page - in fact, it's my reference for this post.

The following adapts their example:

First, you need a `ProgID` in `HKLM\SOFTWARE\Classes` that dictates how to handle any input given to it (yours may already exist):

```
HKLM\SOFTWARE\Classes
     MyApp.ProtocolHandler //this is the ProgID, subkeys are its properties
        (Default) = My Protocol //name of any type passed to this
        DefaultIcon
           (Default) = %ProgramFiles%\MyApp\MyApp.exe, 0 //for example
        shell
           open
              command
                 (Default) = %ProgramFiles%\MyApp\MyApp.exe %1 //for example 
```

Then fill the registry with DefaultProgram info inside a `Capabilities` key:

```
HKLM\SOFTWARE\MyApp
    Capabilities
       ApplicationDescription
           URLAssociations
              myprotocol = MyApp.ProtocolHandler //Associated with your ProgID 
```

Finally, register your application's capabilities with DefaultPrograms:

```
HKLM\SOFTWARE
      RegisteredApplications
         MyApplication = HKLM\SOFTWARE\MyApp\Capabilities 
```

Now all "myprotocol:" links should trigger `%ProgramFiles%\MyApp\MyApp.exe %1`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-14T15:44:25.933

**旁注，因为这是在谷歌搜索此类问题时找到的最佳答案：** 确保 shell 命令 open 中的路径是应用程序的**正确路径。**我花了一整天的时间调试似乎只影响 Windows 10 上的 Chrome 和 Edge 的问题。它们从未触发协议处理程序，而 Firefox 却触发了。问题是什么？.bat 文件的路径使用了混合的 \ 和 / 斜杠。在路径中仅使用正确的 \ 斜杠使 Edge 和 Chrome 突然能够接收请求。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-12-04T03:22:04.300

LaunchUriAsync(Uri)

启动与指定 URI 的 URI 方案名称关联的默认应用程序。在这种情况下，您可以允许用户指定。

[http://msdn.microsoft.com/library/windows/apps/Hh701476](http://msdn.microsoft.com/library/windows/apps/Hh701476)

```
 // Create the URI to launch from a string.
    var uri = new Uri(uriToLaunch);

    // Calulcate the position for the Open With dialog.
    // An alternative to using the point is to set the rect of the UI element that triggered the launch.
    Point openWithPosition = GetOpenWithPosition(LaunchUriOpenWithButton);

    // Next, configure the Open With dialog.
    // Here is where you choose the program.
    var options = new Windows.System.LauncherOptions();
    options.DisplayApplicationPicker = true;
    options.UI.InvocationPoint = openWithPosition;
    options.UI.PreferredPlacement = Windows.UI.Popups.Placement.Below;

    // Launch the URI.
    bool success = await Windows.System.Launcher.LaunchUriAsync(uri, options);
    if (success)
    {
       // URI launched: uri.AbsoluteUri
    }
    else
    {
        // URI launch failed.  uri.AbsoluteUri

    } 
```

# c# - 以编程方式从链接中检索和解析 XML

> ID：13559917
> 
> 赞同：0
> 
> 时间：2012-11-26T06:46:25.330
> 
> 标签：c#, xml, web

我的问题是关于 XML 检索和解析。

基本上我有以下网站：*www.website.com/XMLRetrieval.ascx ?arg1=value&arg2=value*

使用此链接，如果您访问此站点，系统会提示您使用一个框来下载 xml，因此我希望在我的程序中检索此 XML 并对其进行解析。但是怎么做呢？

另一个困难是我必须使用代理来获取它并登录它....那么如何实现呢？

额外信息：这将发生在我的 c# 代码和框架 3.5 后面的页面中

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:27:28.527

```
 Stream responseStream = null;
        try
        {
            WebRequest request = WebRequest.Create("http://www.website.com/XMLRetrieval.ascx?arg1=value&arg2=value");
            WebResponse webResponse = request.GetResponse();
            responseStream = webResponse.GetResponseStream();
        }
        catch (Exception e)
        {
            return null;
        }

        if (responseStream != null)
        {
            return new XPathDocument(responseStream);
        } 
```

# objective-c - 覆盖子类中未声明的方法

> ID：13559919
> 
> 赞同：0
> 
> 时间：2012-11-26T06:46:34.047
> 
> 标签：objective-c, ios

我有一个类，其中一些方法既没有在 .h 文件中也没有在任何类别中声明，我想在子类中覆盖这些方法以稍微改变行为。我正在考虑简单地在子类中重新定义这些方法。这是个好主意吗？它甚至会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:26:59.610

理想情况下，子类需要知道方法是什么，如果它想要覆盖该方法并仍然调用 super。

这样做的一种方法是拥有一个单独的头文件，超类和子类实现都导入。

```
// MyClass_protected.h

- (void)someMethodThatYouWantSubclassesToBeAbleToOverride; 
```

然后

```
// MyClass.m

#import "MyClass_protected.h"

// MySubClass.m

#import "MyClass_protected.h" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T06:57:45.537

您可以覆盖基类中的私有方法，但问题是您不能调用`[super someMethod]`. 如果您希望完全替换原始方法，那么这不是问题。

否则你需要让派生类知道父类中的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:52:54.100

它会“工作”，因为编译器允许它。定义这些方法的类可能假定它们在调用时会执行特定的操作，您的实现在覆盖它们时需要遵守这些操作，以避免在使用类接口时引入错误。

# javascript - 如何使用 Harvest 的 Chosen 类为选择框呈现原生 HTML5 验证错误弹出窗口？

> ID：13559921
> 
> 赞同：0
> 
> 时间：2012-11-26T06:47:00.277
> 
> 标签：javascript, jquery, validation, jquery-chosen

好的，所以我目前正在为我的所有表单选择框使用 Harvest 的 Chosen JQ 选择控件，[记录在这里。](http://harvesthq.github.com/chosen/)这些控件给我留下了深刻的印象，但有一个问题......当出现 HTML5 验证错误（我在我的应用程序中使用）时，本机浏览器验证错误弹出窗口不会呈现。

我不知道浏览器是否真的捕捉到错误并试图显示弹出窗口，也许选择的 CSS 正在指示浏览器不显示选择元素的错误消息？附带说明一下，我也无法让 bassistance JQ 验证与这些控件一起使用。我之所以这么说，是因为我认为有人会建议我切换到那个，我宁愿不这样做，因为我是 JQ 的新手，而且无论如何也不介意本机错误弹出窗口。

有谁知道我如何做到这一点？我不知道这是否需要大量的研究/时间，或者它是否是一个简单的答案......我很抱歉，因为我对 Web 开发非常陌生，尤其是 JS 和 JQ。

这是一个带有所选类的表单元素的示例：

```
<form action="#link" method="post">
  <select class="chzn-select" required>
    <option value=""></option>
    <option value="a">a</option>
    <option value="b">b</option>
  </select>
</form> 
```

然后我运行以下 JQuery 语句以使其在页面加载时工作：

```
jQuery(document).ready(function(){
  jQuery(".chzn-select").chosen();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:27:00.753

我使用带有 Chosen 的 jquery 验证库 [http://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate) Chosen 隐藏了 DOM 中的实际选择 HTML 元素。默认情况下，验证库设置为忽略隐藏元素。因此，只需将默认验证更改为选项，如下所示：

```
$("#myform").validate({
  ignore: ".ignore"
}) 
```

只要您在元素上设置了所需的属性，jquery 验证库就会对其进行验证。

# cassandra - 插入 Cassandra 时是否需要转义数据输入？

> ID：13559924
> 
> 赞同：1
> 
> 时间：2012-11-26T06:47:26.430
> 
> 标签：cassandra

好的，我们都知道在传统的 SQL 数据库中，插入数据库时​​必须对日期进行转义，这样它们就没有 SQL 注入。在 Cassandra NoSQL 数据库中，他们有这样的问题吗？在插入 Cassandra 之前，我们是否需要转义任何数据？我需要知道任何与安全相关的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:40:19.387

由于多种原因，注入攻击对 CQL 的关注要少得多。一方面，Cassandra 每次查询只会执行一个完整的语句，因此任何攻击，例如，试图连接 a `DROP`，`DELETE`或连接`INSERT`到 a `SELECT`，都会失败。而且，除了`BATCH`（需要完整`INSERT`的`UPDATE`、、和`DELETE`语句的集合）之外，没有嵌套查询。

也就是说，您应该*始终*清理输入，并且应该使用准备好的语句，而不是在代码中构建完整的查询语句。

# c++ - 为什么我的 Strassen 矩阵乘法很慢？

> ID：13559928
> 
> 赞同：13
> 
> 时间：2012-11-26T06:47:41.080
> 
> 标签：c++, performance, optimization, matrix-multiplication, strassen

我用 C++ 编写了两个矩阵乘法程序：Regular MM [(source)](http://pastebin.com/HqHtFpq9)和 Strassen's MM [(source)](http://pastebin.com/USRQ5tuy)，它们都在大小为 2^kx 2^k 的方阵上运行（换句话说，是偶数大小的方阵）。

结果很糟糕。对于 1024 x 1024 矩阵，Regular MM 需要`46.381 sec`，而 Strassen 的 MM 需要`1484.303 sec`( `25 minutes`!!!!)。

我试图使代码尽可能简单。在网上找到的其他 Strassen 的 MM 示例与我的代码没有太大区别。Strassen 的代码的一个问题是显而易见的——我没有切换到常规 MM 的截止点。

我的 Strassen 的 MM 代码还有什么其他问题？？？

谢谢 ！

直接链接到来源
[http://pastebin.com/HqHtFpq9](http://pastebin.com/HqHtFpq9)
[http://pastebin.com/USRQ5tuy](http://pastebin.com/USRQ5tuy)

编辑1。拳头，很多很好的建议。感谢您抽出宝贵时间分享知识。

我实施了更改（保留了我的所有代码），添加了截止点。MM 的 2048x2048 矩阵，截止 512 已经给出了很好的结果。常规 MM：191.49s Strassen 的 MM：112.179s 显着改善。结果是在配备 Intel Centrino 处理器的史前联想 X61 平板电脑上使用 Visual Studio 2012 获得的。我会做更多检查（以确保我得到正确的结果），并将公布结果。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-26T07:41:37.053

> Strassen 的代码的一个问题是显而易见的——我没有切换到常规 MM 的截止点。

公平地说，递归到 1 点是大部分（如果不是全部）问题。试图猜测其他性能瓶颈而不解决这个问题几乎没有实际意义，因为它会带来巨大的性能损失。（换句话说，您将苹果与橙子进行比较。）

正如评论中所讨论的，缓存对齐可能会产生影响，但不会达到这个规模。此外，缓存对齐对常规算法的伤害可能比 Strassen 算法更大，因为后者是缓存无意识的。

```
void strassen(int **a, int **b, int **c, int tam) {

    // trivial case: when the matrix is 1 X 1:
    if (tam == 1) {
            c[0][0] = a[0][0] * b[0][0];
            return;
    } 
```

那太小了。虽然 Strassen 算法的复杂度较小，但它的 Big-O 常数要大得多。一方面，您的函数调用开销一直下降到 1 个元素。

这类似于使用合并或快速排序并一直递归到一个元素。为了提高效率，您需要在大小变小时停止递归并回退到经典算法。

在快速/合并排序中，您将退回到低开销的`O(n^2)`插入或选择排序。在这里，您将回到正常的`O(n^3)`矩阵乘法。

* * *

您退回经典算法的阈值应该是一个可调阈值，该阈值可能会因硬件和编译器优化代码的能力而异。

对于像 Strassen 乘法这样的优势仅`O(2.8074)`超过经典的乘法，`O(n^3)`如果这个阈值非常高，请不要感到惊讶。（数千个元素？）

* * *

在某些应用程序中，可能有许多算法，每个算法的复杂度都在降低，但 Big-O 会增加。结果是多种算法在不同大小下变得最优。

大整数乘法是一个臭名昭著的例子：

*   小学乘法：**O(N^2)**优化 < ~100 位*
*   [Karatsuba 乘法](http://en.wikipedia.org/wiki/Karatsuba_algorithm)：**O(N^1.585)**比上面快约 100 位数*
*   [Toom-Cook 3-way](http://en.wikipedia.org/wiki/Toom%E2%80%93Cook_multiplication) : **O(N^1.465)**比 Karatsuba 快约 3000 位*
*   [浮点 FFT](http://numbers.computation.free.fr/Constants/Algorithms/fft.html) : **O(> N log(N))**比 Karatsuba/Toom-3 快约 700 位*
*   [Schönhage–Strassen 算法 (SSA)](http://en.wikipedia.org/wiki/Sch%C3%B6nhage%E2%80%93Strassen_algorithm)：**O(N log(n) loglog(n))**比 FFT 快，大约十亿位*
*   [固定宽度数论变换](http://en.wikipedia.org/wiki/Discrete_Fourier_transform_%28general%29#Number-theoretic_transform)：**O(N log(n)**比 SSA 快几亿位数？*

[*请注意，这些示例阈值是近似值，可能会发生巨大变化 - 通常超过 10 倍。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T07:12:27.737

因此，可能存在更多问题，但您的第一个问题是您正在使用指向数组的指针数组。而且由于您使用的是 2 的幂的数组大小，因此与连续分配元素和使用整数除法将长数字数组折叠成行相比，这对性能造成了特别大的影响。

无论如何，这是我对问题的第一个猜测。正如我所说，可能还有更多，当我发现它们时，我会添加到这个答案中。

**编辑：**这可能只会导致问题的一小部分。问题很可能是 [Luchian Grigore](https://stackoverflow.com/users/673730/luchian-grigore)所指的涉及具有 2 次[幂的高速缓存行争用问题](https://stackoverflow.com/questions/11413855/why-is-transposing-a-matrix-of-512x512-much-slower-than-transposing-a-matrix-of/11413856#11413856)。

我证实我的担忧对于朴素算法是有效的。如果数组是连续的，那么朴素算法的时间会减少近 50%。这是pastebin 上[的代码（使用依赖于 C++11 的 SquareMatrix 类）](http://pastebin.com/YvVYXhX3)。

# mysql - MySQL db 已经消失了如何追踪发生了什么？

> ID：13559929
> 
> 赞同：3
> 
> 时间：2012-11-26T06:47:41.280
> 
> 标签：mysql, database, roundcube

两天前，我安装了 RoundCube 邮件脚本，用于：

PHP

```
Name        : php
Arch        : x86_64
Version     : 5.3.18
Release     : 1.el6.remi 
```

MySQL

```
Name        : mysql
Arch        : x86_64
Version     : 5.5.28
Release     : 1.el6.remi 
```

直到今天早上一切正常，脚本指出 Round Cube 数据库有问题。我在看目录有多奇怪：

```
/var/lib/mysql/roundcubemail 
```

只有 frm 文件，没有任何 .myd 或 .myi

```
cache.frm
cache_index.frm
cache_messages.frm
cache_thread.frm
contactgroupmembers.frm
contactgroups.frm
contacts.frm
db.opt
dictionary.frm
identities.frm
searches.frm
session.frm
users.frm 
```

我的服务器有 12 个数据库，现在只有 Round Cube db 缺少 .myd .myi 文件。重新安装这个脚本不是问题，但我很想弄清楚这个数据库发生了什么，并确保它不会再次发生。

MySQL 错误日志只有以下信息：

```
121117  7:38:06 [ERROR] Cannot find or open table roundcubemail/session from
the internal data dictionary of InnoDB though the .frm file for the
table exists. Maybe you have deleted and recreated InnoDB data
files but have forgotten to delete the corresponding .frm files
of InnoDB tables, or you have moved .frm files to another database?
or, the table contains indexes that this version of the engine
doesn't support.
See http://dev.mysql.com/doc/refman/5.5/en/innodb-troubleshooting.html
how you can resolve the problem. 
```

我的问题是：有没有其他方法可以跟踪这种情况并找到数据库刚刚消失的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:47:02.060

`.myd`并且`.myi`文件只存在于 MyISAM 表中。

如果您遵循标准的 Roudcube 安装过程（使用 v0.8.4 验证），则表被设置为使用 InnoDB 存储引擎。

你有没有弄乱过下面的任何文件`/var/lib/mysql/`？默认情况下，InnoDB 表存储在一个文件中，可能`/var/lib/mysql/ibdata1`在您的情况下。如果没有，请在配置文件中查找[innodb_data_file_path](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html#sysvar_innodb_data_file_path)指令。`my.cnf`

# c# - BHO 插件（Microsoft JScript 运行时错误）

> ID：13559933
> 
> 赞同：1
> 
> 时间：2012-11-26T06:47:57.220
> 
> 标签：c#, javascript, regex, internet-explorer, bho

我在 C# 中构建了一个 BHO（浏览器助手对象），它检测网页中的电话号码并在其旁边放置一个带有超链接的图像。BHO 基本上插入了一个 javascript，它使用正则表达式字符串来查找电话号码并在其旁边添加图像。

这是相关代码

```
public void OnDocumentComplete(object pDisp, ref object URL)
{
        HTMLDocument document = (HTMLDocument)webBrowser.Document;

        IHTMLElement head = (IHTMLElement)((IHTMLElementCollection)
        document.all.tags("head")).item(null, 0);

        IHTMLScriptElement scriptObject =
        (IHTMLScriptElement)document.createElement("script");
        scriptObject.src = "\nhttp://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js";
        ((HTMLHeadElement)head).appendChild((IHTMLDOMNode)scriptObject);

        IHTMLScriptElement scriptObject2 =
        (IHTMLScriptElement)document.createElement("script");
        scriptObject2.text = "\nwindow.onload = function()"+
                                                "{"+
                                                      "$('body').html( $('body').html().replace(/(\\d\\d\\d\\d\\s\\d\\d\\d\\s\\d\\d\\d)/g,'$1 <a href=\"http://www.somewebsite.com\"><img src=\"image.png\" border=\"0\"></a>') );"
                                                +"}"+
                               "\n\n";
        ((HTMLHeadElement)head).appendChild((IHTMLDOMNode)scriptObject2);
} 
```

我在一个非常简单的页面上用很少的电话号码测试了 IE 中的 BHO。它按预期工作。但是当我用网络上的任何其他页面测试 BHO 时，我收到以下错误

**Microsoft JScript 运行时错误：对象不支持此属性或方法**

或者

**Microsoft JScript 运行时错误：权限被拒绝**

我收到一些其他页面的 Microsoft JScript 运行时错误。这是否意味着我不允许在页面中插入 javascript？可能是什么原因 ？我希望这是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:35:10.293

我认为抛出错误是因为您将 jQuery 多次添加到您正在加载的站点。您是否曾尝试在 OnDocumentComplete 方法中设置断点？如果这样做，您将看到 OnDocumentComplete 事件在每个站点请求中被触发多次。

因此，您应该首先检查是否是第一次为实际站点请求触发 OnDocumentComplete 事件。如果是，请添加您的 javascript，如果不是，则不执行任何操作。

这应该防止双重 jQuery 包含。

# air - 通过 adobe air 创建的自定义浏览器是否支持 OpenLaszlo？

> ID：13559934
> 
> 赞同：1
> 
> 时间：2012-11-26T06:48:02.120
> 
> 标签：air, openlaszlo, lzx

最近我看到在我们的基于自定义的浏览器中发生了一些问题，但在 mozilla 或 chrome 等浏览器中却没有发生。

一个例子是鼠标光标，我在窗口的鼠标悬停时为其提供了一个自定义光标。这在 Mozilla、chrome 和 IE 中运行良好，但在我们创建的 Adob​​e Air 浏览器中却不行。我可以看到自定义光标，但自定义光标和普通鼠标指针之间有很多闪烁。

这是一个问题还是有解决方法来支持 adobe air 浏览器？我正在使用 Adob​​e AIR 3.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:29:33.477

我还没有听说过有关 Laszlo 测试 Adob​​e AIR 应用程序的任何消息，尤其是在过去两年的 AIR 版本中。AIR 浏览器从未得到官方支持。

我假设您仍在将 SWF 嵌入到您的 AIR 应用程序的 HTML 页面中。将 AIR 与 OpenLaszlo 一起使用时，我总是会生成基于 ActionScript 3 的 AIR 应用程序（而不是将编译为 SWF 的应用程序 SOLO 嵌入到 HTML 容器中）。这样，我就可以使用 Flash Builder 调试任何问题，这比调试嵌入式 SWF 更容易。如果您计划部署 DHTML 运行时应用程序，当然没有办法将 OpenLaszlo 应用程序嵌入到 HTML 容器中。

更新：Flash 10.2 及更高版本支持原生游标集成（这里原生意味着操作系统），这提供了更好的性能。这是 Adob​​e 博客文章中对 API 的一般描述：http: [//www.adobe.com/devnet/flashplayer/articles/native-mouse-cursors.html](http://www.adobe.com/devnet/flashplayer/articles/native-mouse-cursors.html)

在技​​术上可以将本机光标与 OpenLaszlo 一起使用，我创建了一个概念验证 - 但它仅适用于 LzMouseKernel.as 类的大量修改版本（来自 LFC 中的 SWF9 内核文件），因为内核将始终为各种鼠标事件重置光标。由于本机游标至少需要 Flash 10.2，这只能通过 OpenLaszlo 的 SWF11 分支实现。

我怀疑您看到的问题与 OpenLaszlo 启用自定义光标的方式有关（这是通过隐藏本机鼠标光标并在不可见的鼠标光标位置移动精灵来完成的）。

# android - 从清单中删除 LoginActivity - 适用于 Android 3.0 的 Facebook SDK

> ID：13559936
> 
> 赞同：17
> 
> 时间：2012-11-26T06:48:05.770
> 
> 标签：android, facebook

我注意到 Facebook SDK 3.0 必须在 Manifest 文件中有 LoginActivity 声明。

```
<activity android:name="com.facebook.LoginActivity"
          android:label="@string/app_name" />
<meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/applicationId" /> 
```

如果不存在，则会引发以下异常。

```
com.facebook.FacebookException: Cannot use SessionLoginBehavior SSO_WITH_FALLBACK when com.facebook.LoginActivity is not declared as an activity in AndroidManifest.xml 
```

当 Facebook SDK 必须依赖此声明时，这似乎是一种不好的做法。我想知道是否有办法从清单文件中删除它。

关于缺少applicationId，我可以通过修改一些函数，LoginButton构造函数和Session构造函数在代码中传递。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-09T09:04:44.927

使用官方构建堆栈时，您需要引用清单中的每个 Activity（需要启动）。这确实是违反直觉的，因为人们会期望从包含的库中继承这些东西。

现在可以使用[Maven](https://code.google.com/p/maven-android-plugin/)构建堆栈和[新的构建系统](http://tools.android.com/tech-docs/new-build-system)来实现一个称为“清单合并”的过程。由于新的构建系统仍在进行中，您只需要等到它正式推出即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-19T16:55:12.773

正如错误所暗示的那样，将声明如下放在您的清单中：

```
<activity android:name="com.facebook.LoginActivity"
          android:theme="@android:style/Theme.Translucent.NoTitleBar"
          android:label="@string/app_name" /> 
```

# iphone - 重新加载视图后如何保存表格复选标记

> ID：13559937
> 
> 赞同：2
> 
> 时间：2012-11-26T06:48:18.490
> 
> 标签：iphone, ios, xcode, ipad, cocoa-touch

我想在我的表格视图重新加载时恢复复选标记，当我单击表格视图时添加复选标记，当我单击第二个单元格时，旧的检查被删除，现在工作正常我的问题是，当我的表格视图是重新加载旧复选标记应出现在单元格上。谢谢

```
#import "mapMenuVC.h"
#import "ViewController.h"
#import "AppDelegate.h"

@interface mapMenuVC ()

@end

@implementation mapMenuVC
@synthesize checkedIndexPath;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view from its nib.
    dataArray = [[NSMutableArray alloc]initWithObjects:@"Street Map",@"Satellite View",@"Hybird", nil];
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

    return [dataArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell =
    [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                      reuseIdentifier:CellIdentifier];
    }
    if([checkedIndexPath isEqual:indexPath])
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
    else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
    cell.textLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:16.0];
    cell.textLabel.text = [dataArray objectAtIndex:[indexPath row]];
    return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if(self.checkedIndexPath)
    {
        UITableViewCell* uncheckCell = [tableView
                                        cellForRowAtIndexPath:self.checkedIndexPath];
        uncheckCell.accessoryType = UITableViewCellAccessoryNone;
    }
    if([self.checkedIndexPath isEqual:indexPath])
    {
        self.checkedIndexPath = nil;
    }
    else
    {
        UITableViewCell* cell = [tableView cellForRowAtIndexPath:indexPath];
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        self.checkedIndexPath = indexPath;
    }

    switch (indexPath.row) {
        case 0: {

            [APPDELEGATE.viewController.myMapView setMapType:MKMapTypeStandard];
            [APPDELEGATE.viewController.popoverController dismissPopoverAnimated:YES];
            break;
        }
        case 1:
        {

            [APPDELEGATE.viewController.myMapView setMapType:MKMapTypeSatellite];
            [APPDELEGATE.viewController.popoverController dismissPopoverAnimated:YES];

            break;

        }
        case 2:

        {
             [APPDELEGATE.viewController.myMapView setMapType:MKMapTypeHybrid];
            [APPDELEGATE.viewController.popoverController dismissPopoverAnimated:YES];
            break;
        }

        default:
            break;
    }

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:09:36.670

请按照以下步骤编写

**在 TableViewDidSelectRowAtIndexPath**

```
 [[NSUserDefaults standardUserDefaults] setInteger:indexPath.row forKey:@"Checked"];
 [[NSUserDefaults standardUserDefaults] synchronize]; 
```

**现在在 CellForRowAtIndexPath**

```
if(indexPath.row == [[NSUserDefaults standardUserDefaults]integerForKey:@"Checked"])
{
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
}
else
{
    cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

**它只勾选了您选择的最后一个值**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:03:55.137

您需要存储最后检查的行索引，以便下次打开视图控制器时加载该值。由于您似乎只有一个部分，您只需要保存（和恢复）行索引。`NSUserDefaults`是存储这个 NSInteger 值的好地方。每次进行新选择时，您都可以保存行索引。`viewDidLoad`您可以在视图控制器的方法中加载当前值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T07:04:44.753

您可以使用另一个类来存储您的数据并重新加载您使用该类的时间，并正确有效地恢复您的数据。

# javascript - xpath 函数语法 javascript

> ID：13559940
> 
> 赞同：3
> 
> 时间：2012-11-26T06:48:36.803
> 
> 标签：javascript, xpath

我对 Xpath 很陌生，虽然它的概念对于长期程序员来说很简单，但我对函数的语法有点困惑......感谢任何帮助。

假设您有一个 xml 文件（为简单起见，这部分来自 southwind.xml）

```
<Orders>
    <Order OrderID="10248">
        <CustomerID>VINET</CustomerID>
        <EmployeeID>5</EmployeeID>
        <OrderDate>1996-07-04T14:25:55</OrderDate>
        <RequiredDate>1996-08-01T06:43:44</RequiredDate>
        <ShippedDate>1996-07-16T04:00:12</ShippedDate>
        <ShipVia>3</ShipVia>
        <Freight>32.3800</Freight>
        <ShipName>Vins et alcools Chevalier</ShipName>
        <ShipAddress>59 rue de l'Abbaye</ShipAddress>
        <ShipCity>Reims</ShipCity>
        <ShipRegion/>
        <ShipPostalCode>51100</ShipPostalCode>
        <ShipCountry>France</ShipCountry>
        <OrderDetails>
            <OrderDetail>
                <ProductID>11</ProductID>
                <UnitPrice>14.0000</UnitPrice>
                <Quantity>12</Quantity>
                <Discount>0</Discount>
            </OrderDetail>
            <OrderDetail>
                <ProductID>42</ProductID>
                <UnitPrice>9.8000</UnitPrice>
                <Quantity>10</Quantity>
                <Discount>0</Discount>
            </OrderDetail>
            <OrderDetail>
                <ProductID>72</ProductID>
                <UnitPrice>34.8000</UnitPrice>
                <Quantity>5</Quantity>
                <Discount>0</Discount>
            </OrderDetail>
        </OrderDetails>
    </Order>
    <Order OrderID="10249">
        <CustomerID>TOMSP</CustomerID>
        <EmployeeID>6</EmployeeID>
        <OrderDate>1996-07-05T06:39:18</OrderDate>
        <RequiredDate>1996-08-16T03:39:38</RequiredDate>
        <ShippedDate>1996-07-10T14:39:39</ShippedDate>
        <ShipVia>1</ShipVia>
        <Freight>11.6100</Freight>
        <ShipName>Toms SpezialitÃ¤ten</ShipName>
        <ShipAddress>Luisenstr. 48</ShipAddress>
        <ShipCity>MÃ¼nster</ShipCity>
        <ShipRegion/>
        <ShipPostalCode>44087</ShipPostalCode>
        <ShipCountry>Germany</ShipCountry>
        <OrderDetails>
            <OrderDetail>
                <ProductID>14</ProductID>
                <UnitPrice>18.6000</UnitPrice>
                <Quantity>9</Quantity>
                <Discount>0</Discount>
            </OrderDetail>
            <OrderDetail>
                <ProductID>51</ProductID>
                <UnitPrice>42.4000</UnitPrice>
                <Quantity>40</Quantity>
                <Discount>0</Discount>
            </OrderDetail>
        </OrderDetails>
    </Order> 
```

在Javascript中，我如何构建使用任何xpath函数的路径（什么是正确的语法）......我了解选择节点的基础知识，但是使用函数的语法是什么......

**例如，假设我想要订单的所有数量的总和......这就是我卡住的地方，如果我理解一个函数的语法，其余的就很容易获得！** 我尝试过的路径是什么，我知道这是非常错误的..

```
path="/Orders/Order/OrderDetails/OrderDetail[sum(quantity)]"; 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:01:34.703

首先，您的 XML 需要关闭根节点的标记。( `</Orders>`)

这段使用 XPath sum 函数的 javascript 代码在 firefox 中工作，它返回 76，它是 XML 中所有 Quantity 标记的总和。我希望它有帮助：

```
<script>
var xml=document.implementation.createDocument('', 'doc', null);
xml.load('books.xml');
path='sum(/Orders/Order/OrderDetails/OrderDetail/Quantity)';
var result=xml.evaluate(path, xml, null, XPathResult.ANY_TYPE, null);
document.write(result.numberValue);
</script> 
```

[您可以在此处](http://www.w3schools.com/xpath/xpath_functions.asp)找到 XPath 函数。和很好的例子 sintaxis[这里](http://www.brainbell.com/tutorials/XML/Using_XPath_Functions.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:46:01.537

使用`document.selectNodes`(IE) 或`document.evaluate`(Chrome, Firefox, Opera, Safari) 功能。您将在此处找到使用它们的方法：http: [//www.w3schools.com/xpath/xpath_examples.asp](http://www.w3schools.com/xpath/xpath_examples.asp)。

Mozilla 还在此处提供了有用的文档：[https](https://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript) ://developer.mozilla.org/en-US/docs/Introduction_to_using_XPath_in_JavaScript 。

以下是如何使用 对每篇文章的数量求和`document.evaluate`。

```
// retrieves xml document
var xhttp = new XMLHttpRequest();
xhttp.open("GET", "southwind.xml", false);
xhttp.send("");
var xml = xhttp.responseXML;

// evaluates xpath expressions
var orders = xml.evaluate("//Order", xml, null, XPathResult.ANY_TYPE, null);
var order = orders.iterateNext();
while (order) {

  var result = xml.evaluate("sum(OrderDetails//Quantity)", order, null,
    XPathResult.NUMBER_TYPE, null);
  console.log(result.numberValue);
  order = orders.iterateNext();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T15:29:25.007

只是为了跟进......完全有道理，如果你使用带有 Javascript 的 Xpath，这一切都归结为 XpathResult......所以我发现这个网站回答了我之前的跟进问题，以防万一其他人有它......再次感谢 [http://help.dottoro.com/ljagksjc.php](http://help.dottoro.com/ljagksjc.php)

# asp.net - Asp.net web.config 处理错误页面“找不到文件或目录”

> ID：13559941
> 
> 赞同：2
> 
> 时间：2012-11-26T06:48:43.270
> 
> 标签：asp.net, error-handling, web-config

我有页面，即**Default.aspx**。我可以处理像 404,403 这样的错误页面。但是当我更改页面的扩展时，服务器会给我一个错误。如果我将**Default.aspx**更改为**Default.asasd**。在这里，我刚刚更改了页面的扩展，然后服务器给出了以下错误

![错误页面](../Images/77b5eb0d257e28df3624e4e62b3ec2e4.png)

我在 web.config 文件中添加了 404 错误页面。我该如何解决这个问题？

**网页配置**

```
 <customErrors mode="On" defaultRedirect="~/ErrorPages/DefaultErrorPage.aspx" redirectMode="ResponseRedirect">
        <error statusCode="404"  redirect="~/ErrorPages/404.aspx" />
        <error statusCode="403"  redirect="~/ErrorPages/403.aspx" />
   </customErrors> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-02T18:34:04.590

添加这个：

```
<system.webServer>
    <httpErrors errorMode="Custom">
        <remove statusCode="404" />
        <error statusCode="404" path="/Error.aspx" responseMode="ExecuteURL" />
    </httpErrors>
</system.webServer> 
```

# eclipse - Rational clearcase 客户端与 Eclipse 的集成

> ID：13559943
> 
> 赞同：3
> 
> 时间：2012-11-26T06:48:48.333
> 
> 标签：eclipse, clearcase

我在本地机器上使用 Eclipse 3.2.0 和 Rational clear case client 7.1.2。我想在 Eclipse 上安装相同的插件（Rational clear case client 7.1.2）。有人可以给我**Rational clear case client 7.1.2 插件的下载链接，**并指导我将它与 eclipse 集成吗？

谢谢，图沙尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:09:02.953

对于 CCRC 安装（ClearCase 远程客户端，它带有自己的基于 Eclipse 的 RCP - 富客户端平台 - 用于 ClearCase）：

请参阅“[为 Eclipse 和 RSA 安装或更新 CCRC](http://www-01.ibm.com/support/docview.wss?uid=swg21215611) ”（以及[此处的过程](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/index.jsp?topic=/com.ibm.rational.clearcase.cc_ms_install.doc/topics/t_install_ccrc_eclipse.htm)）

![CCRC 更新站点](../Images/db6e12ae487925bd467aa9ea8c9b121f.png)

（另请参阅 Eclipse 和 CCRC 之间的兼容性矩阵）

**CCRC 插件存储在您的 CCRC 服务器中：`http://<computer-name>/ccrc/update`**，其中`<computer-name>`是安装了 Rational® ClearCase® 和 CM Server for Rational ClearCase Remote Client 的计算机的名称。

* * *

对于完整的 ClearCase 客户端安装：

您将在 IBM 的“ [Rational ClearCase SCM Adapter (For Eclipse), Version 7.6.0.0](http://www-01.ibm.com/support/docview.wss?uid=swg24025674) ”中找到 SCM 适配器。

> 对于 Eclipse 版本 3.2.2 到 3.3.x（包括）：
> 
> *   下载适用于您的操作系统的 zip 文件。将文件的内容提取到文件系统中的目录中。
> *   在 Eclipse 中，选择`Help > Software Updates > Manage Configuration`. 在`Product Configuration`窗口中，单击`Add an Extension Location`Eclipse 平台窗格中的“ ”链接。
> *   “浏览文件夹”对话框提示您选择扩展位置，展开“我的电脑”条目并导航到包含提取的 zip 文件内容的目录。展开 Eclipse 文件夹并单击“确定”。
> *   安装/更新对话框提示您重新启动工作台。单击“是”。
> *   在 Eclipse 窗口中，单击窗口 > 自定义透视图。
> *   在“自定义透视”对话框中，单击“命令”选项卡，确保选中“可用命令组”列下的“ClearCase”选项，然后单击“确定”。

更多信息请访问：

*   “ [Eclipse 使用的 Clearcase 插件](https://stackoverflow.com/questions/3393758/clearcase-plugin-for-eclipse-usage/3393857#3393857)”
*   “ [ClearCase 插件 eclipse 的问题](https://stackoverflow.com/questions/2462979/problems-with-clear-case-plugin-eclipse/2463223#2463223)”
*   “ [Eclipse 使用什么 ClearCase 插件](https://stackoverflow.com/questions/1175248/what-clearcase-plugin-to-use-with-eclipse/1175738#1175738)”

# django - 如何更新已注释的查询集？

> ID：13559944
> 
> 赞同：13
> 
> 时间：2012-11-26T06:48:48.790
> 
> 标签：django, orm

我有以下型号：

```
class Work(models.Model):
    visible = models.BooleanField(default=False)

class Book(models.Model):
    work = models.ForeignKey('Work') 
```

我正在尝试像这样更新一些行：

```
qs=Work.objects.all()
qs.annotate(Count('book')).filter(Q(book__count__gt=1)).update(visible=False) 
```

但是，这给出了一个错误：

DatabaseError：子查询的列太多第 1 行：...SET "visible" = false WHERE "app_work"."id" IN (SELECT...

如果我删除更新子句，查询运行没有问题并返回我所期望的。

看起来此错误发生在带有注释后跟更新的查询中。有没有其他方法可以写这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T07:01:00.650

在没有制作一个能够复制您的问题并尝试解决方案的玩具数据库的情况下，我至少可以建议[Django 中的方法：获取查询集的补充](https://stackoverflow.com/questions/8820113/django-getting-complement-of-queryset?rq=1)作为一种可能的方法。

试试这个方法：

```
qs.annotate(Count('book')).filter(Q(book__count__gt=1))
Work.objects.filter(pk__in=qs.values_list('pk', flat=True)).update(visible=False) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-07T15:33:51.267

您还可以非常简单地从查询集中清除注释：

```
qs.query.annotations.clear()
qs.update(..) 
```

这意味着您只触发一个查询，而不是另一个查询，**但如果您的查询依赖于注释进行过滤，请不要使用它。**这非常适合去除数据库生成的连接，以及我偶尔添加到模型默认查询中的实用程序垃圾......但问题中的示例是一个完美的例子，说明这不起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-20T15:26:32.817

添加到 Oli 的答案：如果您需要更新注释，则首先执行过滤器并将结果存储在变量中，然后在该查询集上调用不带参数的过滤器来访问`update`函数，如下所示：

```
q = X.objects.filter(annotated_val=5, annotated_name='Nima')
q.query.annotations.clear()
q.filter().update(field=900) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-23T20:35:43.543

我已经复制了这个问题并相信它是 Django ORM 的一个错误。@acjay 答案是一个很好的解决方法。错误报告：[https ://code.djangoproject.com/ticket/25171](https://code.djangoproject.com/ticket/25171)

在 Django 2 alpha 中发布的修复：[https ://code.djangoproject.com/ticket/19513](https://code.djangoproject.com/ticket/19513)

# mysql - mysqlcppconn.dll 找不到或打开 PDB 文件

> ID：13559945
> 
> 赞同：1
> 
> 时间：2012-11-26T06:48:49.337
> 
> 标签：mysql, visual-c++, visual-studio-2012, mysql-connector

我正在尝试在 VC++ 中构建一个简单的 MySQL db 应用程序，但遇到了一个小问题。

我正在使用 MySQL 连接器 C++ 1.1.0 和 Visual Studio 2012（如果重要，请使用高级版）

```
// ConsoleApplication1.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"

#include <cstdio>
#include <cstdlib>
#include <iostream>
#include <sstream>
#include <memory>
#include <string>
#include <stdexcept>

/* MySQL Connector/C++ specific headers */
#include <driver.h>
#include <connection.h>
#include <statement.h>
#include <prepared_statement.h>
#include <resultset.h>
#include <metadata.h>
#include <resultset_metadata.h>
#include <exception.h>
#include <warning.h>

#include "mysql_driver.h"
#include "mysql_connection.h"

#define DBHOST "tcp://127.0.0.1:3306"
#define USER "root"
#define PASSWORD "root"
#define DATABASE "test"

using namespace std;
using namespace sql;

int _tmain(int argc, char *argv[]){
    // I'm alive
    cout << "Hello World!" << endl;

    // necessary variables
    Driver *driver;
    Connection* con;
    Statement *stmt;
    ResultSet *res;
    /*PreparedStatement *prep_stmt;
    Savepoint *savept;*/

    //
    driver = get_driver_instance();

    // Connect to DB
    con = driver->connect("tcp//127.0.0.1:3306", "root", "root");

    // 
    con->setAutoCommit(false);

    // set schema
    con->setSchema("world");

    // create statement object
    stmt = con->createStatement();

    // alert user
    cout << "Executing query: \"SELECT * FROM city\"" << endl;

    // execute query "SELECT * FROM city"
    res = stmt->executeQuery("SELECT * FROM city");

    // alert user
    cout << "\tRetrieved " << res->rowsCount() << " row(s)." << endl;

    // fetch data
    while(res->next()){
        cout << res->getString("Name") << endl;
    }

    system("pause");

    // Clean up
    delete res;
    delete stmt;
    /*delete prep_stmt;*/
    con->close();
    delete con;

    return 0;
} // end main 
```

我将其构建为调试模式下的 Win32 控制台应用程序，将配置更改为 x64 并将 mysqlcppconn.dll 移动到输出目录。代码正在正确构建（*我认为我已经正确添加了必要的包含目录以及其他库依赖项/相关路径）。但是，当我尝试运行它时，我得到以下调试输出：

```
'ConsoleApplication1.exe' (Win32): Loaded 'C:\Users\RBanerjee\Documents\Visual Studio 2012\Projects\ConsoleApplication1\x64\Debug\ConsoleApplication1.exe'. Symbols loaded.
'ConsoleApplication1.exe' (Win32): Loaded 'C:\Windows\System32\ntdll.dll'. Symbols loaded.
'ConsoleApplication1.exe' (Win32): Loaded 'C:\Windows\System32\kernel32.dll'. Symbols loaded.
'ConsoleApplication1.exe' (Win32): Loaded 'C:\Windows\System32\KernelBase.dll'. Symbols loaded.
'ConsoleApplication1.exe' (Win32): Loaded 'C:\Users\RBanerjee\Documents\Visual Studio 2012\Projects\ConsoleApplication1\x64\Debug\mysqlcppconn.dll'. Cannot find or open the PDB file.
'ConsoleApplication1.exe' (Win32): Loaded 'C:\Windows\System32\libmysql.dll'. Module was built without symbols.
'ConsoleApplication1.exe' (Win32): Unloaded 'C:\Windows\System32\libmysql.dll'
'ConsoleApplication1.exe' (Win32): Loaded 'C:\Windows\System32\libmysql.dll'. Module was built without symbols.
'ConsoleApplication1.exe' (Win32): Unloaded 'C:\Windows\System32\libmysql.dll'
The program '[4172] ConsoleApplication1.exe' has exited with code -1073741701 (0xc000007b). 
```

我对接下来要做什么有点迷茫，我真的只是希望能够开发一个可以连接到 MySQL 数据库并与之交互的 Windows 应用程序。我将不胜感激有关此问题的任何帮助或指向其他教程的指针。

谢谢罗希特

# asp.net - 动态数据列表的项目模板

> ID：13559946
> 
> 赞同：0
> 
> 时间：2012-11-26T06:49:05.617
> 
> 标签：asp.net, datalist

我有使用代码的动态数据列表：-

```
 DataList dl = new DataList();
        dl.DataSource = settings.GetUsers();
        form1.Controls.Add(dl); 
```

但它不起作用我如何为此设置项目模板或其他模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:57:34.723

您可以以编程方式设置模板，请参阅以编程方式[创建 Web 服务器控件模板](http://msdn.microsoft.com/en-us/library/aa289501%28v=vs.71%29.aspx?ppud=4)。

您创建一个必须继承的类，`ITemplate`然后您可以将其分配给 listview/datalist/repeater/etc 上的模板属性。`ITemplate`将要求您具有以下方法：

```
public void InstantiateIn(System.Web.UI.Control container) {
} 
```

此方法允许您构建要创建为模板的控件树。

# postgresql - postgresql where 子句行为

> ID：13559950
> 
> 赞同：0
> 
> 时间：2012-11-26T06:49:19.470
> 
> 标签：postgresql

我做了两个我认为应该有相同结果的查询：

```
SELECT COUNT(*) FROM (
    SELECT DISTINCT ON (id1) id1, value 
    FROM (
        SELECT table1.id1, table2.value 
            FROM table1 
            JOIN table2 ON table1.id1=table2.id 
            WHERE table2.value = '1') 
    AS result1 ORDER BY id1) 
AS result2;

SELECT COUNT(*) FROM (
    SELECT DISTINCT ON (id1) id1, value 
    FROM (
        SELECT table1.id1, table2.value 
        FROM table1 
        JOIN table2 ON table1.id1=table2.id 
    ) 
    AS result1 ORDER BY id1) 
AS result2
WHERE value = '1'; 
```

唯一的区别是一个 WHERE 子句在 SELECT DISTINCT ON 内，另一个在 SELECT DISTINCT ON 之外，但在 SELECT COUNT 内。但结果并不相同。我不明白为什么 WHERE 子句的位置在这种情况下会有所不同。谁能解释一下？或者有没有更好的方式来表达这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:15:44.050

这是一个很好的方法来看待这个：

```
SELECT DISTINCT ON (id) id, value
  FROM (select 1 as id, 1 as value
        union
        select 1 as id, 2 as value) a;

SELECT DISTINCT ON (id) id, value
  FROM (select 1 as id, 1 as value
        union
        select 1 as id, 2 as value) a
 WHERE value = 2; 
```

问题与独特的条件和可见的地方有关。这是设计的行为。

# sqlplus - 错误：ORA-01789：查询块的结果列数不正确

> ID：13559955
> 
> 赞同：6
> 
> 时间：2012-11-26T06:49:48.403
> 
> 标签：sqlplus

我有两种关系观点。

第一种观点：

```
CREATE VIEW VIEW1
AS
SELECT T#,
MAX(DECODE(LEG#,1,DEPARTURE)) ORIGIN,
MAX(DECODE(LEG#,1,DESTINATION)) DESTINATION1
FROM TRIPLEG
WHERE T# IN
(SELECT T# FROM TRIPLEG WHERE LEG# < 3
AND T# IN
(SELECT T# FROM TRIPLEG GROUP BY T#
HAVING COUNT(T#) < 3)
GROUP BY T#)
GROUP BY T#
ORDER BY T#; 
```

第二种观点：

```
CREATE VIEW VIEW2
AS
SELECT T#,
MAX(DECODE(LEG#,2,DESTINATION)) DESTINATION1
FROM TRIPLEG
WHERE T# IN
(SELECT T# FROM TRIPLEG WHERE LEG# < 3
AND T# IN
(SELECT T# FROM TRIPLEG GROUP BY T#
HAVING COUNT(T#) < 3)
GROUP BY T#)
GROUP BY T#
ORDER BY T#; 
```

我使用 SELECT * FROM VIEW1 UNION ALL SELECT * FROM VIEW2

我得到了错误 ORA-01789。

我想要实现的是

```
T#    |       ORIGIN   | DESTINATION1 | DESTINATION2
------------------------------------------------------
1            abc            efg           hij 
```

是我创建的考虑过的关系视图吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T09:05:29.847

两个视图必须具有相同数量的列才能执行 UNION ALL。查看 Oracle 参考资料：[UNION ALL、INTERSECT、MINUS 运算符](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries004.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-17T20:34:39.027

我想你想要一个`INNER JOIN`而不是一个`UNION ALL`。以下内容有帮助吗？

```
SELECT v1.T#, v1.ORIGIN, v1.DESTINATION1, v2.DESTINATION2
  FROM VIEW1 v1
 INNER JOIN VIEW2 v2 ON v1.T# = v2.T# 
```

（我假设您的视图`VIEW2`有一个名为 的列`DESTINATION2`，而不是`DESTINATION1`上面写的。）

如果`ORIGIN`从 中删除该列`VIEW1`，则可以运行`SELECT * FROM VIEW1 UNION ALL SELECT * FROM VIEW2`，但这将为您提供以下输出：

```
T#    |  DESTINATION1 
---------------------
1     |       efg    
1     |       hij 
```

原因是`UNION ALL`只是将行附加在一起，而不是合并它们。如果`VIEW1`仍然有它的`ORIGIN`列，Oracle 将无法附加这些行来创建一组行，因为有些行中会有三个值，而另一些行会有两个。

# php - Apache + PHP：从 XP 迁移到 Win 7 后找不到 oci.dll

> ID：13559959
> 
> 赞同：1
> 
> 时间：2012-11-26T06:50:06.817
> 
> 标签：php, oracle

我的电脑升级到 Win 7。这意味着我现在需要重新设置我的开发环境。我使用 XAMPP。我能够复制并粘贴 XAMPP 文件夹，然后运行 ​​setup_xampp.bat 以正确设置 ini 和配置文件中的绝对文件路径。

我现在面临的问题是我需要连接到 oracle 并且我遇到了几个错误。但基本上 php 不会“找到”oci.dll。我已将包含 oci.dll 的 Instant_client 目录添加到 PATH 环境变量并重新启动（apache /services 需要重新启动才能看到此更改）。但是我仍然遇到同样的错误。

然后我将 oci.dll 复制到 php 文件夹中，然后 php.exe -m -> 没有错误。所以很明显，apache 和 php 不知何故不会在 PATH 变量中查找 oci.dll。我迷失了，因为这在 Win XP 中运行良好。有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:13:51.123

我的天啊。新的 Win 7 安装（这是由我公司的 IT 支持人员制作的）默认安装了一个 oracle 8 客户端，该客户端也在 PATH 中。因此解决方案是删除这个旧的 oracle 客户端的条目，以便 Apache / php 使用新的。

# android - 如何在 android 中使用 sonic NDK 播放 mp3 文件？

> ID：13559970
> 
> 赞同：4
> 
> 时间：2012-11-26T06:51:03.943
> 
> 标签：android, mp3, playback

我在我的应用程序中使用 Sonic Ndk 播放此示例中的音频[https://github.com/waywardgeek/sonic-ndk](https://github.com/waywardgeek/sonic-ndk)。但它不能播放 mp3 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:30:29.217

Android NDK 没有这样的 api。但是在ndk中有几种播放mp3的解决方案。

1.  您可以使用 MediaPlayer 平台 api。见[https://android.googlesource.com/platform/frameworks/av/+/master/include/media/mediaplayer.h](https://android.googlesource.com/platform/frameworks/av/+/master/include/media/mediaplayer.h)

    但是，它不是公共 api，它可以被制造商破坏。

2.  您可以使用 OpenMAX AL 接口。最近，ndk 支持 OpenMAX AL。

    但是，它使用起来非常困难，参考文献很少。:(

    并且只支持 api 级别 14 或以上。

3.  您可以在 jni 中调用 java 方法。

    您可以在下面的源代码中看到如何在 c/c++ 源代码中调用 java 方法。 [https://android.googlesource.com/platform/frameworks/base/+/master/media/jni/android_media_MediaScanner.cpp](https://android.googlesource.com/platform/frameworks/base/+/master/media/jni/android_media_MediaScanner.cpp)

    我认为这是比其他更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T14:18:38.410

抱歉回复这篇文章迟了，我找到了解决办法。

SONIC ndk 正在播放 pcm 文件。

您可以将任何 mp3 转换为 pcm，然后尝试播放该文件是 demo sonic 项目，您将能够播放该文件。对于将 mp3 转换为 pcm，我使用 ffmpeg 使用命令

ffmpeg -y -i mymp3file.mp3 -f s16le -acodec pcm_s16le mypcmfile.pcm

# javascript - Javascript 中的 OR 运算符

> ID：13559972
> 
> 赞同：1
> 
> 时间：2012-11-26T06:51:20.153
> 
> 标签：javascript

```
message += days + " day" + ( days==1 ? '':'s' ) + ", "; 
```

如果我的计数器到 1 个月和零天，它当然会写 dayS。如何将“OR”运算符传递到此代码中？

我试过：

```
( (days==1 ? '':'s' ) || (days==0 ? '':'s')) 
```

和：

```
( days==1||0 ? '':'s' ) 
```

它们都在值“0”处显示 S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:54:39.607

你为什么不试试：

```
days < 2 
```

除非有可能出现负天数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T06:54:44.227

尝试`(( days==1|| days == 0) ? '':'s' )`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T06:55:15.083

“0天”是正确的，但如果你真的想要它：`(days == 0 || days == 1 ? '' : 's')`

或者：（`(days <= 1 ? '' : 's')`因为您不能有负数或非整数天数。

或者您可以对整行执行此操作：

```
if( days) message += days + " day" + (days==1 ? '' : 's') + ", "; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T06:55:30.320

像这样写

```
message += days + " day" + ( days<=1 ? '':'s' ) + ", "; 
```

# javascript - 如何为每个会话设置默认变量

> ID：13559974
> 
> 赞同：4
> 
> 时间：2012-11-26T06:51:34.977
> 
> 标签：javascript, node.js, express, redis, connect

我已经将我的 express/connect 应用程序设置为使用带有 redis 的会话作为存储：

```
app.use(express.session({
        secret: "secret key here",
        store: app.redisStore,
        cookie: { maxAge: 600000 }
    })); 
```

我通过执行以下操作创建了自己的 Flash 消息系统：

```
module.exports = function (app) {
    'use strict';

    //set-up session messages
    app.use(function (req, res, next) {

        /* set up flash*/
        if (req.session.flash === "undefined") {
            req.session.flash = [];
        }

        res.locals.messages = function () {
            var messages = req.session.flash;
            //clear out messages
            req.session.flash = [];
            return messages;
        };
        ... 
```

然后基本上我只是在需要时将闪存消息对象推送到闪存阵列中。每次使用消息功能时，它们都会被清除。这似乎在大多数情况下都有效。但是，在注销时，我使用了 regenerate 功能并且 flash 变得未定义：

```
function logout(req, res) {
            var currentUser = req.session.currentUser;
            req.session.regenerate(function (err) {
                req.session.flash.push({"type": "info", "message": "You have been logged out."});
                console.log(currentUser + " Logged Out");
                res.redirect("/login");
                return;
            });
        } 
```

这似乎是有道理的。Regenerate 消除了会话，因为它发生在初始请求 flash 变得未定义之后。为了避免将来出现类似的问题，我想知道是否有某种可以覆盖或挂钩的会话的初始化函数？每次启动或重新生成会话时，我都会使用它来设置一些默认会话值。

附带问题：flash 是否真的保存在 redis 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:09:09.903

> 为了避免将来出现类似的问题，我想知道是否有某种可以覆盖或挂钩的会话的初始化函数？每次启动或重新生成会话时，我都会使用它来设置一些默认会话值。

不，你这样做的方式是正确的。如果您想将多个操作附加到`regenerate`方法，那么您也可以尝试这样的事情：

```
var EventEmitter = require('events').EventEmitter;
var session_events = new EventEmitter( );

module.exports = function (app) {
    'use strict';

    //set-up session messages
    app.use(function (req, res, next) {
        var regenerate = req.session.regenerate;
        req.session.regenerate = function() {
            session_events.emit( "session_regenerated", req );
            regenerate.apply( req.session, arguments );
        };

        /* set up flash*/
        if (req.session.flash === "undefined") {
            session_events.emit( "session_initializing", req );
        }
        // other code goes here
    });
} 
```

然后你可以简单地做：

```
session_events.on( "session_regenerated", function(req) {
    req.session.flash.push({"type": "info", "message": "You have been logged out."});
});
session_events.on( "session_initializing", function(req) {
    req.session.flash = [];
}); 
```

不过，这是一个猴子补丁（至少是`.regenerate`最重要的），所以我建议编写自己的[会话存储](http://www.senchalabs.org/connect/middleware-session.html)，这一点也不难，因为会话只是 Redis/任何其他存储中的条目。

> 附带问题：flash 是否真的保存在 redis 中？

是的，所有附加到`session`会话存储（在您的情况下为 Redis）。

# android - 使用 Fragments 的 Android 文件管理器

> ID：13559977
> 
> 赞同：0
> 
> 时间：2012-11-26T06:51:43.767
> 
> 标签：android, file, android-arrayadapter

目前，我正在尝试在 Android 上创建一个文件管理器应用程序，使用片段以方便以后使用。像我一样缺乏经验，我往往会遇到问题，我无法弄清楚这个最新的问题。应用程序的力量在我启动它的那一刻就关闭了。我正在运行 Galaxy Nexus，以防有人想知道。

我在这里使用了一个 Item 类，它基本上只是实例变量和 get/set 方法。

主要活动：

```
package tj.apps.files;

import java.io.File;
import java.util.ArrayList;

import android.os.Bundle;
import android.os.Environment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.widget.ImageView;

import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

public class FilesList extends SherlockFragmentActivity implements ListFragment.listFragmentListener {

    // Constructors
    private ItemAdapter aa;
    private ArrayList<Item> array;
    private String extMountState = Environment.getExternalStorageState();
    private String rootPath; 
    private ArrayList<Item> items;
    private FragmentManager fm; 
    private FragmentTransaction ft; 
    private ListFragment listFragment; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.files_list);

        // Set up FragmentManager and FragmentTransaction
        fm = getSupportFragmentManager();
        ft = fm.beginTransaction();

        // Comments below is code that doesn't work, as it returns false always on my Galaxy Nexus
        /*
        // Checking whether or not external storage is mounted or not
        // If it isn't mounted, then an ErrorFragment is shown, which is an
        // ImageView saying media isn't mounted and to restart app once it is.
        if (!(extMountState == (Environment.MEDIA_MOUNTED))) {
            ft.add(R.id.container_fragment_listview, new ErrorFragment());
            ft.commit();

        // If it is mounted, the files are retrieved using getFileDirectory,
        // the ListFragment is loaded and set with the ItemAdapter.
        } else {
        */

            File file = Environment.getExternalStorageDirectory();
            rootPath = file.getPath();
            listFragment = new ListFragment();
            ft.add(R.id.container_fragment_listview, listFragment);
            ft.commit();
            listFragment.getFileDir(rootPath);

        }

    @Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.files_list, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.menu_search:
            return true;
        case R.id.menu_edit_mode:
            return true;
        case R.id.menu_help:
            return true;
        case R.id.menu_about:
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }

    @Override
    public void addNewFragment(String path) {
        ListFragment other = new ListFragment(); 
        ft.replace(R.id.container_fragment_listview, other);
        ft.addToBackStack(null);
        ft.commit(); 
        other.getFileDir(path);
    }

} 
```

列表片段：

```
package tj.apps.files;

import java.io.File;
import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ListView;

import com.actionbarsherlock.app.SherlockListFragment;

public class ListFragment extends SherlockListFragment {

    // constructors
    private ArrayList<Item> items;
    private ItemAdapter adapter;
    private listFragmentListener lfListener;

    // Get reference to interface in Activity
    @Override
    public void onAttach(Activity activity) {
        // TODO Auto-generated method stub
        super.onAttach(activity);
        try { 
            lfListener = (listFragmentListener) activity; 
        } catch (ClassCastException e) { 
            throw new ClassCastException (activity.toString() + "must implement listFragmentListener"); 
        }
    }

    // Inflate custom list at R.layout.fragment
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        return inflater.inflate(R.layout.list_fragment, container, false);
    }

    // Method to create ListFragment from storage path
    public void getFileDir(String path) {

        // Get the File using the 'path' parameter, then gets the directory at
        // that path, while also initializing the 'items' ArrayList
        File f = new File(path);
        File[] files = f.listFiles();
        items = new ArrayList<Item>();

        // Loops through File[], gets the File at the current position in the
        // File[], gets name/extension/path and puts them to strings,
        // Creates a new Item using those. Those are then added to the 'items'
        // ArrayList
        for (int i = 0; i < files.length; i++) {
            File file = files[i];
            String name = file.toString();
            String filePath = file.getPath();
            String extension;

            // If it's a file, then grab the file's extensions (.jpg, .txt,
            // ex.). If it's a folder, get the length of the directory.
            if (file.isFile() == true) {
                extension = name.substring(name.lastIndexOf('.') + 1);
            } else {
                extension = Integer.toString(files[i].listFiles().length)
                        + "files";
            }
            items.add(new Item(name, extension, filePath));
        }

        // initializes ItemAdapter using 'items' and the custom row layout and
        // grabbing the activity this fragment is attached to. Then sets it.
        adapter = new ItemAdapter(getActivity(), R.layout.list_item, items);
        setListAdapter(adapter);
    }

    // On list item click, we check if the file at the position is a folder or not. If it is, we call the listener. 
    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        File file = new File (items.get(position).getPath());
        if (file.isDirectory()) {
            lfListener.addNewFragment(items.get(position).getPath());
        }

    }

    //Listener to communicate with Activity it is attached to. Meant to create a new Fragment. 
    public interface listFragmentListener {
        public void addNewFragment(String path);
    }

} 
```

日志猫：

```
11-25 22:29:19.549: E/AndroidRuntime(12077): FATAL EXCEPTION: main
11-25 22:29:19.549: E/AndroidRuntime(12077): java.lang.RuntimeException: Unable to start activity ComponentInfo{tj.apps.files/tj.apps.files.FilesList}: java.lang.NullPointerException
11-25 22:29:19.549: E/AndroidRuntime(12077):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at android.os.Looper.loop(Looper.java:137)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at android.app.ActivityThread.main(ActivityThread.java:4745)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at java.lang.reflect.Method.invokeNative(Native Method)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at java.lang.reflect.Method.invoke(Method.java:511)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at dalvik.system.NativeStart.main(Native Method)
11-25 22:29:19.549: E/AndroidRuntime(12077): Caused by: java.lang.NullPointerException
11-25 22:29:19.549: E/AndroidRuntime(12077):    at android.widget.ArrayAdapter.init(ArrayAdapter.java:310)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at android.widget.ArrayAdapter.<init>(ArrayAdapter.java:153)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at tj.apps.files.ItemAdapter.<init>(ItemAdapter.java:21)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at tj.apps.files.ListFragment.getFileDir(ListFragment.java:73)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at tj.apps.files.FilesList.onCreate(FilesList.java:58)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at android.app.Activity.performCreate(Activity.java:5008)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-25 22:29:19.549: E/AndroidRuntime(12077):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-25 22:29:19.549: E/AndroidRuntime(12077):    ... 11 more 
```

我还在学习，我有点坚持解决这个问题。这是我正在尝试做的事情：

在 Main Activity 中，我尝试检查 SDCard 是否已安装，如果是，则会弹出 ErrorFragment。如果没有，我初始化一个 ListFragment，将它添加到 Main Activity 的 xml 中的容器中，然后在添加的 Fragment 上调用 ListFragment 方法之一。方法 getFileDir 基本上使用在 getFileDir 中用作参数的路径获取文件数组。然后，它使用 for 循环从数组中的每个文件中获取名称、扩展名和路径，创建一个新项目并将其添加到“项目”ArrayList 中。在循环之后，我使用自定义行布局（我测试为工作）初始化阵列适配器，使用'getActivity（）'和'items'ArrayList 附加活动的上下文。然后我调用 setListAdapter。

**编辑：** Nandesh 知道了，它现在可以工作了。只是有另一个问题。我的列表项不可点击。这可能是我的 ItemAdapter 代码，如下所示：

```
package tj.apps.files;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class ItemAdapter extends ArrayAdapter<Item> {

int resource; 
Context context;
ArrayList<Item> items;

    public ItemAdapter(Context context, int resource, ArrayList<Item> items) {
        super(context, resource, items);
        this.resource = resource;
        this.context = context;
        this.items = items;
    }

    @Override
        public View getView(int position, View convertView, ViewGroup parent) {
        ItemHolder holder = null;

        if (convertView == null) {
            LayoutInflater inflater = ((Activity) context).getLayoutInflater();
            convertView = inflater.inflate(resource, parent, false);

            holder = new ItemHolder();

            convertView.setClickable(true);
            convertView.setFocusable(true);

            holder.text = (TextView) convertView.findViewById(R.id.item_text);
            holder.subtext= (TextView) convertView.findViewById(R.id.item_subtext);

            convertView.setTag(holder);

        } else {
            holder = (ItemHolder) convertView.getTag();
        }

        holder.text.setText(items.get(position).getName());
        holder.subtext.setText(items.get(position).getType());

        return convertView;
    }

    static class ItemHolder {
        ImageView image;
        TextView text;
        TextView subtext;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T06:56:55.110

getActivity() 在您的情况下返回 null 。如果 ListFragment 尚未附加到 Activity，则它可以为 null。

所以将下面的代码移动到 OnAttach

```
 adapter = new ItemAdapter(getActivity(), R.layout.list_item, items);
   setListAdapter(adapter); 
```

# asp.net-mvc - 我如何设置 .net MVC4 应用程序以使用 azure 存储而不是 sql server

> ID：13559978
> 
> 赞同：3
> 
> 时间：2012-11-26T06:51:52.437
> 
> 标签：asp.net-mvc, asp.net-mvc-3, azure

我想在 MVC4 中使用 .new 内置安全和身份验证方法与 azure 存储一起使用，意思是，我不想在 SQL 数据库上创建用户，而是想在 Azure 存储上创建它们，登录过程也是如此。你怎么看？是否可以？

据我所读，我觉得它需要完整的 SQL Server 默认情况下默认的和功能最齐全的提供程序 ASP.NET 成员资格提供程序（SQL 成员资格提供程序、SQL 角色提供程序、SQL 配置文件提供程序）需要完整的 SQL Server。它们依赖于存储过程支持，它们依赖于 SQL Server 缓存依赖关系，它们依赖于代理进行清理和维护。因此，主要的基于 SQL Server 的提供程序在 SQL Server CE 上不能很好地工作，在 SQL Azure 等上不能开箱即用。

[链接]http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms -and-asp-net-mvc-4-templates.aspx

```
[HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public ActionResult Register(RegisterModel model)
        {
            if (ModelState.IsValid)
            {
                // Attempt to register the user
                try
                {
                    WebSecurity.CreateUserAndAccount(model.UserName, model.Password);
                    WebSecurity.Login(model.UserName, model.Password);
                    return RedirectToAction("Index", "Home");
                }
                catch (MembershipCreateUserException e)
                {
                    ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
                }
            }

            // If we got this far, something failed, redisplay form
            return View(model);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:29:59.380

要将它与 Azure 表和 Blob 存储一起使用，请查看完整的源代码[，](http://code.msdn.microsoft.com/windowsazure/Windows-Azure-ASPNET-03d5dc14)但是在使用存储时需要进行一些[权衡](https://stackoverflow.com/questions/5083328/asp-net-membership-provider)。

# html - HTML - 由值决定的字体颜色

> ID：13559982
> 
> 赞同：1
> 
> 时间：2012-11-26T06:52:22.573
> 
> 标签：html, css, colors

如何设置字体颜色以由使用 HTML 和/或 CSS 包含的文本的值确定。封闭的文本被限制为整数值。期望的效果类似于[热图](http://www.google.com/imgres?um=1&hl=en&client=opera&sa=N&tbo=d&channel=suggest&tbm=isch&tbnid=zMw4S613rh327M%3a&imgrefurl=http://www.mathworks.com/matlabcentral/fileexchange/24253-customizable-heat-maps&docid=gRID8AzccpX9qM&imgurl=http://www.mathworks.com/matlabcentral/fx_files/24253/2/heatmap.png&w=839&h=506&ei=nQ-zUNeMH42C9QS_2IGoBA&zoom=1&iact=hc&vpx=198&vpy=182&dur=1058&hovh=174&hovw=289&tx=176&ty=97&sig=115260270143155142479&page=1&tbnh=126&tbnw=217&start=0&ndsp=20&ved=1t:429,r:8,s:0,i:118&biw=1280&bih=669)。

一个可能的解决方案可能如下所示：

```
<FONT COLOR=function> 1 </FONT>
<FONT COLOR=function> 100 </FONT> 
```

其中“功能”将解析为：

```
<FONT COLOR="red"> 1 </FONT>
<FONT COLOR="green"> 100 </FONT> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:04:29.463

使用 jQuery 类似以下内容可能适合您的需求（基于我认为您试图解释的内容）：

```
$('font').each(function() {
    var value = $(this).text();
    var colorVal;
    // determine your color
    $(this).attr('color', colorVal);
}); 
```

但我建议使用类或样式操作，因为您建议使用的 HTML 已被弃用。

# objective-c - 是否可以在 Objective-C 中创建一个具有两个超类的类？

> ID：13559984
> 
> 赞同：2
> 
> 时间：2012-11-26T06:52:31.207
> 
> 标签：objective-c, xcode, superclass

我目前有一个已经有超类的类。我意识到我也想从不同的现有类中调用方法，但没有将它定义为超类。是否可以为我现有的子类分配第二个超类，或者这是不可能的。

如果可能的话，我将如何去做。如果不可能，有什么解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:08:47.680

这是不可能的。Objective-C 是单继承。

根据您的情况，**Composition**可能是解决此问题的正确模式：假设您有类 Foo，并且您还希望 Foo 的实例从类 Bar 继承行为。

您可以将 Bar 的实例作为实例变量保存在 Foo 中，并委托方法调用它。因为 Objective-C 是动态类型的，所以您可以简单地将 Foo 的实例转换为 Bar 的实例，并将其传递给任何需要 Bar 的代码。只要 Foo 响应所有与 Bar 相同的方法，没有人会知道其中的区别。

如果您想变得花哨（或者如果 Bar 有太多方法并且您不想写出每个方法），您可以使用消息转发将您的 Foo 类无法识别的任何消息传递给 Bar 实例。查看文档`forwardInvocation:`以了解其工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:05:31.507

Objective C 不支持多重继承，但您可以通过使用接口来实现此功能。

# objective-c - 将数组传递给 UIViewController 和内存警告

> ID：13559986
> 
> 赞同：1
> 
> 时间：2012-11-26T06:52:40.713
> 
> 标签：objective-c, ios

将可变数组从一个视图控制器传递到另一个视图控制器时，我收到内存警告。将可变数组传递给 uiviewcontroller 有什么更好的方法吗？//这里的内存警告。

```
Item *item = [self.items objectAtIndex:index ]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:11:08.237

当 A 控制器推 B 控制器时，您可以序列化数组。

```
 -(void)viewDidDisappear:(BOOL)animated
 {
     NSArray* array = .....
     [array addObject:obj];//obj have to implements NSCopying,NSCoding
     NSData *archiveCarPriceData = [NSKeyedArchiver archivedDataWithRootObject:array];
     [[NSUserDefaults standardUserDefaults] setObject:archiveCarPriceData forKey:@"your key"];
 } 
```

B控制器：

```
-(void)viewDidLoad
{
   NSData *myEncodedObject = [[NSUserDefaults standardUserDefaults] objectForKey:@"your key"];
   NSArray* array = [NSKeyedUnarchiver unarchiveObjectWithData: myEncodedObject];
} 
```

或者您可以将其保存在文件中

```
{
    //save arr to file
    NSArray* arr;
    [arr writeToFile:@"path" atomically:YES];
    //read arr from file
    arr = [NSArray arrayWithContentsOfFile:@"path"]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:18:44.767

将 NSMutableArray 从 ViewController A 传递到 B 的最佳方法是在 ViewControllerA 的 segue 中进行

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"Some segue"]) 
    {

        [segue.destinationViewController setPassedArray:self.someMutableArray];
    }
} 
```

并在您`ViewControllerB`将其添加到您的`ViewControllerB.h`文件中

```
@property(nonatomic, strong) NSMutableArray *passedArray 
```

现在，当您导航到时`ViewControllerB` `someMutableArray`将被传递给 ViewControllerB 并设置为`passedArray`

# java - Spring 在任何其他 Bean 之前加载一个 Bean

> ID：13559987
> 
> 赞同：2
> 
> 时间：2012-11-26T06:52:44.473
> 
> 标签：java, spring

我有一个要求，我想在我的应用程序上下文中的任何其他 bean 之前初始化一个 bean。一种方法是在每个其他 bean 上使用“依赖”，但它太冗长，因为我的应用程序上下文中有很多 bean。

有没有其他方法可以做到这一点。我已经阅读了为此实现 ServletContext 的 abt，但我认为这不会起作用，因为这与 Spring 无关。

请让我知道您对此的看法。

谢谢，劳纳克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:11:02.787

确保您的 bean 在您的 context.xml 中首先出现，并且它将首先被实例化。你可以做一个简单的测试来验证。

# c++ - 如何在不添加换行符的情况下将文本附加到 QPlainTextEdit，并将滚动保持在底部？

> ID：13559990
> 
> 赞同：34
> 
> 时间：2012-11-26T06:52:57.027
> 
> 标签：c++, qt, newline, qplaintextedit

我需要在`QPlainTextEdit`不向文本添加换行符的情况下附加文本，但是这两种方法实际上`appendPlainText()`都`appendHtml()`添加了新段落。

我可以手动执行此操作`QTextCursor`：

```
QTextCursor text_cursor = QTextCursor(my_plain_text_edit->document());
text_cursor.movePosition(QTextCursor::End);

text_cursor.insertText("string to append. "); 
```

那行得通，但是如果在追加之前处于底部，我还需要将滚动保持在底部。

我试图从 Qt 的源代码中复制逻辑，但我坚持下去，因为实际上`QPlainTextEditPrivate`使用了类，没有它我找不到做同样事情的方法：比如说，我`verticalOffset()`在`QPlainTextEdit`.

实际上，这些来源包含许多奇怪的东西（至少乍一看），我不知道如何实现它。

这是源代码`append()`：[http ://code.qt.io/cgit/qt/qt.git/tree/src/gui/widgets/qplaintextedit.cpp#n2763](http://code.qt.io/cgit/qt/qt.git/tree/src/gui/widgets/qplaintextedit.cpp#n2763)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-08-08T19:49:57.813

我将引用我在这里找到的内容：

[http://www.jcjc-dev.com/2013/03/qt-48-appending-text-to-qtextedit.html](http://www.jcjc-dev.com/2013/03/qt-48-appending-text-to-qtextedit.html)

* * *

我们只需要将光标移动到 QTextEdit 中内容的末尾并使用 insertPlainText。在我的代码中，它看起来像这样：

```
myTextEdit->moveCursor (QTextCursor::End);
myTextEdit->insertPlainText (myString);
myTextEdit->moveCursor (QTextCursor::End); 
```

就如此容易。如果您的应用程序需要在追加文本之前将光标保持在原来的位置，您可以使用`QTextCursor::position()`and`QTextCursor::setPosition()`方法，或者

只需在修改光标位置之前复制光标`[QTextCursor QTextEdit::textCursor()]`，然后将其设置为光标`[void QTextEdit::setTextCursor(const QTextCursor & cursor)]`。

这是一个例子：

```
QTextCursor prev_cursor = myTextEdit->textCursor();
myTextEdit->moveCursor (QTextCursor::End);
myTextEdit->insertPlainText (myString);
myTextEdit->setTextCursor (&prev_cursor); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-08T21:25:27.060

当前的答案对我来说不是一个选择。使用以下方法添加没有新行的html要简单得多。

```
//logs is a QPlainTextEdit object
ui.logs->moveCursor(QTextCursor::End);
ui.logs->textCursor().insertHtml(out);
ui.logs->moveCursor(QTextCursor::End); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-26T07:32:31.103

好的，我不确定我的解决方案是否真的“不错”，但它似乎对我有用：我刚刚创建了`QPlainTextEdit_My`继承自的新类，`QPlainTextEdit`并添加了新方法`appendPlainTextNoNL()`、、、。`appendHtmlNoNL()``insertNL()`

**请注意：**仔细阅读有关参数的评论`check_nl`，`check_br`这很重要！我花了几个小时来弄清楚为什么当我在没有新段落的情况下附加文本时我的小部件会这么慢。

```
/******************************************************************************************
 * INCLUDED FILES
 *****************************************************************************************/

#include "qplaintextedit_my.h"
#include <QScrollBar>
#include <QTextCursor>
#include <QStringList>
#include <QRegExp>

/******************************************************************************************
 * CONSTRUCTOR, DESTRUCTOR
 *****************************************************************************************/

QPlainTextEdit_My::QPlainTextEdit_My(QWidget *parent) :
   QPlainTextEdit(parent)
{

}

QPlainTextEdit_My::QPlainTextEdit_My(const QString &text, QWidget *parent) :
   QPlainTextEdit(text, parent)
{

}        

/******************************************************************************************
 * METHODS
 *****************************************************************************************/

/* private      */

/* protected    */

/* public       */

/**
 * append html without adding new line (new paragraph)
 *
 * @param html       html text to append
 * @param check_nl   if true, then text will be splitted by \n char,
 *                   and each substring will be added as separate QTextBlock.
 *                   NOTE: this important: if you set this to false,
 *                   then you should append new blocks manually (say, by calling appendNL() )
 *                   because one huge block will significantly slow down your widget.
 */
void QPlainTextEdit_My::appendPlainTextNoNL(const QString &text, bool check_nl)
{
   QScrollBar *p_scroll_bar = this->verticalScrollBar();
   bool bool_at_bottom = (p_scroll_bar->value() == p_scroll_bar->maximum());

   if (!check_nl){
      QTextCursor text_cursor = QTextCursor(this->document());
      text_cursor.movePosition(QTextCursor::End);
      text_cursor.insertText(text);
   } else {
      QTextCursor text_cursor = QTextCursor(this->document());
      text_cursor.beginEditBlock();

      text_cursor.movePosition(QTextCursor::End);

      QStringList string_list = text.split('\n');

      for (int i = 0; i < string_list.size(); i++){
         text_cursor.insertText(string_list.at(i));
         if ((i + 1) < string_list.size()){
            text_cursor.insertBlock();
         }
      }

      text_cursor.endEditBlock();
   }

   if (bool_at_bottom){
      p_scroll_bar->setValue(p_scroll_bar->maximum());
   }
}

/**
 * append html without adding new line (new paragraph)
 *
 * @param html       html text to append
 * @param check_br   if true, then text will be splitted by "<br>" tag,
 *                   and each substring will be added as separate QTextBlock.
 *                   NOTE: this important: if you set this to false,
 *                   then you should append new blocks manually (say, by calling appendNL() )
 *                   because one huge block will significantly slow down your widget.
 */
void QPlainTextEdit_My::appendHtmlNoNL(const QString &html, bool check_br)
{
   QScrollBar *p_scroll_bar = this->verticalScrollBar();
   bool bool_at_bottom = (p_scroll_bar->value() == p_scroll_bar->maximum());

   if (!check_br){
      QTextCursor text_cursor = QTextCursor(this->document());
      text_cursor.movePosition(QTextCursor::End);
      text_cursor.insertHtml(html);
   } else {

      QTextCursor text_cursor = QTextCursor(this->document());
      text_cursor.beginEditBlock();

      text_cursor.movePosition(QTextCursor::End);

      QStringList string_list = html.split(QRegExp("\\<br\\s*\\/?\\>", Qt::CaseInsensitive));

      for (int i = 0; i < string_list.size(); i++){
         text_cursor.insertHtml( string_list.at(i) );
         if ((i + 1) < string_list.size()){
            text_cursor.insertBlock();
         }
      }

      text_cursor.endEditBlock();
   }

   if (bool_at_bottom){
      p_scroll_bar->setValue(p_scroll_bar->maximum());
   }
}

/**
 * Just insert new QTextBlock to the text.
 * (in fact, adds new paragraph)
 */
void QPlainTextEdit_My::insertNL()
{
   QScrollBar *p_scroll_bar = this->verticalScrollBar();
   bool bool_at_bottom = (p_scroll_bar->value() == p_scroll_bar->maximum());

   QTextCursor text_cursor = QTextCursor(this->document());
   text_cursor.movePosition(QTextCursor::End);
   text_cursor.insertBlock();

   if (bool_at_bottom){
      p_scroll_bar->setValue(p_scroll_bar->maximum());
   }
} 
```

我很困惑，因为在原始代码中有更复杂的计算`atBottom`：

```
const bool atBottom =  q->isVisible()
                       && (control->blockBoundingRect(document->lastBlock()).bottom() - verticalOffset()
                           <= viewport->rect().bottom()); 
```

和`needScroll`：

```
if (atBottom) {
    const bool needScroll =  !centerOnScroll
                             || control->blockBoundingRect(document->lastBlock()).bottom() - verticalOffset()
                             > viewport->rect().bottom();
    if (needScroll)
        vbar->setValue(vbar->maximum());
} 
```

但我的简单解决方案似乎也有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-08T20:34:21.567

像任何字符串一样：

```
QTextEdit *myTextEdit = ui->textEdit;
myTextEdit->moveCursor (QTextCursor::End);
myTextEdit->insertPlainText (myString+"\n"); 
```

我试过了，它奏效了。

# axis2 - Axis2 Rampart 内部服务器错误

> ID：13559991
> 
> 赞同：1
> 
> 时间：2012-11-26T06:53:16.980
> 
> 标签：axis2, rampart

我在 Axis2 1.6.2 与壁垒 1.6.2、jdk 1.5 和 tomcat 5.0 上苦苦挣扎。我正在使用 Eclipse 并从 WSDL 生成所有类。安装壁垒模块后，我遇到了一些奇怪的错误。我无法弄清楚问题所在。任何帮助，将不胜感激。提前致谢。调试日志如下：

```
[DEBUG] Call Stack = DEBUG_FRAME = org.apache.axis2.util.JavaUtils.callStackToString(JavaUtils.java:564)
    DEBUG_FRAME = org.apache.axis2.description.ParameterIncludeImpl.debugParameterAdd(ParameterIncludeImpl.java:352)
    DEBUG_FRAME = org.apache.axis2.description.ParameterIncludeImpl.addParameter(ParameterIncludeImpl.java:134)
    DEBUG_FRAME = org.apache.axis2.description.AxisDescription.addParameter(AxisDescription.java:108)
    DEBUG_FRAME = org.apache.axis2.deployment.WarBasedAxisConfigurator.setConfigContext(WarBasedAxisConfigurator.java:345)
    DEBUG_FRAME = org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContext(ConfigurationContextFactory.java:89)
    DEBUG_FRAME = org.apache.axis2.transport.http.AxisServlet.initConfigContext(AxisServlet.java:584)
    DEBUG_FRAME = org.apache.axis2.transport.http.AxisServlet.init(AxisServlet.java:454)
    DEBUG_FRAME = org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1044)
    DEBUG_FRAME = org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:701)
    DEBUG_FRAME = org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:144)
    DEBUG_FRAME = org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)
    DEBUG_FRAME = org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)
    DEBUG_FRAME = org.apache.catalina.core.StandardContextValve.invokeInternal(StandardContextValve.java:198)
    DEBUG_FRAME = org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:152)
    DEBUG_FRAME = org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)
    DEBUG_FRAME = org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)
    DEBUG_FRAME = org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:137)
    DEBUG_FRAME = org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)
    DEBUG_FRAME = org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:118)
    DEBUG_FRAME = org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:102)
    DEBUG_FRAME = org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)
    DEBUG_FRAME = org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    DEBUG_FRAME = org.apache.catalina.core.StandardValveContext.invokeNext(StandardValveContext.java:104)
    DEBUG_FRAME = org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:520)
    DEBUG_FRAME = org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:929)
    DEBUG_FRAME = org.apache.coyote.tomcat5.CoyoteAdapter.service(CoyoteAdapter.java:160)
    DEBUG_FRAME = org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:799)
    DEBUG_FRAME = org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:705)
    DEBUG_FRAME = org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:577)
    DEBUG_FRAME = org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684)
    DEBUG_FRAME = java.lang.Thread.run(Thread.java:595)

[DEBUG] ==================
[DEBUG] Initializing Velocity template engine
[DEBUG] servletPath=/axis2-web/Error/error500.jsp, pathInfo=null, queryString=null, name=null
[DEBUG]  Path Based Forward
[DEBUG]   Returning non-STM instance
[DEBUG] JspEngine --> /axis2-web/Error/error500.jsp
[DEBUG]          ServletPath: /axis2-web/Error/error500.jsp
[DEBUG]             PathInfo: null
[DEBUG]             RealPath: /home/praveen/eclipse_workspace_highr/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/PaymentsWebService/axis2-web/Error/error500.jsp
[DEBUG]           RequestURI: /PaymentsWebService/axis2-web/Error/error500.jsp
[DEBUG]          QueryString: null
[DEBUG]       Request Params: 
[DEBUG] servletPath=/axis2-web/include/httpbase.jsp, pathInfo=null, queryString=null, name=null
[DEBUG]  Path Based Include
[DEBUG]   Returning non-STM instance
[DEBUG] JspEngine --> /axis2-web/include/httpbase.jsp
[DEBUG]          ServletPath: /axis2-web/Error/error500.jsp
[DEBUG]             PathInfo: null
[DEBUG]             RealPath: /home/praveen/eclipse_workspace_high/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/PaymentsWebService/axis2-web/include/httpbase.jsp
[DEBUG]           RequestURI: /PaymentsWebService/axis2-web/Error/error500.jsp
[DEBUG]          QueryString: null
[DEBUG]       Request Params: 
[DEBUG]  Disabling the response for futher output 
```

# c++ - 什么是 c# AutoResetEvent/ManualResetEvent 的 c++ 便携式模拟？

> ID：13559993
> 
> 赞同：4
> 
> 时间：2012-11-26T06:53:41.207
> 
> 标签：c++, boost

在 c# 中我喜欢非常方便`AutoResetEvent` `ManualResetEvent`和`WaitHandle.WaitAll`. 我应该在 c++ 中使用什么（可以使用 boost）来获得相同的功能？我需要可移植的代码，以便可以在 Windows 和 Linux 上运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:16:57.443

我还没有完全阅读链接。我想你可以使用期货/承诺来实现它们。

Promise 用于设置事件值，未来等待该值。

为了获得自动/手动重置，您需要使用智能指针进行额外的间接操作，以便重新分配承诺/未来。

接下来是思路：

```
template <typename T>
class AutoResetEvent 
{
  struct Impl {
    promise<T> p;
    future<T> f;
    Impl(): p(), f(p) {}
  };
  scoped_ptr<Impl> ptr;
public:
  AutoResetEvent() : ptr(new Impl()) {}
  set_value(T const v) {
    ptr->p.set_value(v);
  }
  T get() {
     T res = ptr->f.get();
     ptr.reset(new Impl());
  }
  void wait() {
     ptr->f.wait();
     ptr.reset(new Impl());
  }
}; 
```

你需要多一点才能使它们可移动。

等待几个未来只是在一个包含你想要等待的事件的容器上进行迭代。

# html - CSS text-decoration- 设置无，但允许一个或多个属性

> ID：13559997
> 
> 赞同：2
> 
> 时间：2012-11-26T06:53:57.890
> 
> 标签：html, css

如果我有以下属性：

```
html {
    text-decoration: none !important;
} 
```

但我想让一个文本装饰，比如“line-through”仍然处于活动状态......

是否有可能做到这一点？如何？

编辑：我不知道这适用于什么 html - 它是通过浏览器插件动态的...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T06:56:30.603

您可以在特定元素/元素上指定此属性，例如

```
.decorated {
    text-decoration: line-through;
} 
```

这样， 的`text-decoration`值`none`就不会被继承。

**编辑**：

[http://jsfiddle.net/mGGnc/](http://jsfiddle.net/mGGnc/)演示了这一点。当然，如果将`decorated`类添加到`HTML`元素中，这将永远不会起作用，因为在这种情况下将没有属性值继承。[CSS2 规范](http://www.w3.org/TR/CSS2/cascade.html#inheritance)解释了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:02:36.473

如果您将为您的元素单独创建一个类，那么它就不会`inherited`从您的`reset css`

您可以像这样轻松实现您的期望：-

```
html {
    text-decoration: none;
}

.anchor a {
text-decoration:line-through;
color:red;
} 
```

[**演示**](http://tinkerbin.com/dMXXQnSA)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:58:31.117

规则（不是属性）`html { text-decoration: none !important; }`没有影响，除非在另一个样式表在根元素（`html`元素）上设置属性的相当假设的情况下。与流行的误解相反，[`text-decoration`](http://www.w3.org/TR/CSS21/text.html#propdef-text-decoration)元素不是继承的。但是，当设置为 以外的值时`none`，其效果在某种意义上部分类似于继承。

在对答案的评论中，您写道：“这是一个文本装饰重置 css，它删除了所有装饰——除了我想保留的一两个装饰——比如直通”。像往常一样，一般重置 CSS 样式表往往会导致问题而不是解决问题。要覆盖`text-decoration`所有元素的设置，您需要使用通用选择器`*`（或所有已知和未知元素的列表）。但是由于属性的定义方式，您不能使其覆盖使用某些值而不覆盖其他值的设置。它的值是或者是`none`一个以空格分隔的关键字列表，每个关键字都指定一个“装饰”。因此，如果不将属性设置为特定值，就无法仅否定其中一个关键字。

# oracle - oracle 即时客户端和 ORACLE_HOME 环境变量

> ID：13559998
> 
> 赞同：0
> 
> 时间：2012-11-26T06:53:58.327
> 
> 标签：oracle

我在同一台机器上有 Oracle Server 和 Oracle Instant Client。（Windows 7的）

关于删除 ORACLE_HOME 环境变量的即时客户端状态的注释。

我正在使用 SQL Developer - 如果我想安装软件包，我不想对路径进行硬编码，而是执行 Oracle_Home/..... 之类的操作（顺便说一句，我不知道正确的语法）

我将如何在 ORACLE_HOME 环境变量消失的情况下实现这一目标？

什么是正确的语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:40:14.587

SQL Developer 只是连接到数据库端口。它不必知道 ORACLE_HOME。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:03:57.873

Oracle_home 指向 Oracle 软件的安装位置。Oracle 软件需要它才能正确运行。它与您要安装的任何软件包的位置无关。

要安装一个包（我假设您正在谈论一个 Oracle PL/SQL 包），您可以从 SQLplus 执行此操作。

打开 sqlplus 并连接到您希望包驻留的架构。

从 SQL plus 命令提示符键入：

```
SQL>@<path to your package>\<package> 
```

这会将包加载到您的架构中。

或者，您可以在 SQLDeveloper 中打开该包。连接到模式并编译它。